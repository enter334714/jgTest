var Laya=window.Laya=function(C$O,C$s){var C$U={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(C$s,C$M){return 1==arguments.length?C$U.__presubstr.call(this,C$s):C$U.__presubstr.call(this,C$s,0<C$M?C$M:this.length+C$M)},__init:function(C$s){C$s.forEach(function(C$s){C$s.__init$&&C$s.__init$()})},__isClass:function(C$s){return C$s&&(C$s.__isclass||C$s==Object||C$s==String||C$s==Array)},__newvec:function(C$s,C$M){var C$T=[];C$T.length=C$s;for(var C$X=0;C$X<C$s;C$X++)C$T[C$X]=C$M;return C$T},__extend:function(C$s,C$M){for(var C$T in C$M)if(C$M.hasOwnProperty(C$T)){var C$X=Object.getOwnPropertyDescriptor(C$M,C$T),C$x=C$X.get,C$c=C$X.set;C$x||C$c?C$x&&C$c?Object.defineProperty(C$s,C$T,C$X):(C$x&&Object.defineProperty(C$s,C$T,C$x),C$c&&Object.defineProperty(C$s,C$T,C$c)):C$s[C$T]=C$M[C$T]}function C$l(){C$U.un(this,"constructor",C$s)}C$l.prototype=C$M.prototype,C$s.prototype=new C$l,C$U.un(C$s.prototype,"__imps",C$U.__copy({},C$M.prototype.__imps))},__copy:function(C$s,C$M){if(!C$M)return null;for(var C$T in C$s=C$s||{},C$M)C$s[C$T]=C$M[C$T];return C$s},__package:function(C$s,C$M){if(!C$U.__packages[C$s]){C$U.__packages[C$s]=!0;var C$T=C$O,C$X=C$s.split(".");if(1<C$X.length)for(var C$x=0,C$c=C$X.length-1;C$x<C$c;C$x++){var C$l=C$T[C$X[C$x]];C$T=C$l||(C$T[C$X[C$x]]={})}C$T[C$X[C$X.length-1]]||(C$T[C$X[C$X.length-1]]=C$M||{})}},__hasOwnProperty:function(C$s,C$M){return C$M=C$M||this,Object.hasOwnProperty.call(C$M,C$s)||function C$s(C$M,C$T){if(Object.hasOwnProperty.call(C$T.prototype,C$M))return!0;var C$X=C$T.prototype.__super;return null==C$X?null:C$s(C$M,C$X)}(C$s,C$M.__class)},__typeof:function(C$s,C$M){if(!C$s||!C$M)return!1;if(C$M===String)return"string"==typeof C$s;if(C$M===Number)return"number"==typeof C$s;if(C$M.__interface__)C$M=C$M.__interface__;else if("string"!=typeof C$M)return C$s instanceof C$M;return C$s.__imps&&C$s.__imps[C$M]||C$s.__class==C$M},__as:function(C$s,C$M){return this.__typeof(C$s,C$M)?C$s:null},__int:function(C$s){return C$s?parseInt(C$s):0},interface:function(C$s,C$M){C$U.__package(C$s,{});var C$T=C$U.__internals,C$X=C$T[C$s]=C$T[C$s]||{self:C$s};if(C$M){var C$x=C$M.split(",");C$X.extend=[];for(var C$c=0;C$c<C$x.length;C$c++){var C$l=C$x[C$c];C$T[C$l]=C$T[C$l]||{self:C$l},C$X.extend.push(C$T[C$l])}}var C$u=C$O,C$E=C$s.split(".");for(C$c=0;C$c<C$E.length-1;C$c++)C$u=C$u[C$E[C$c]];C$u[C$E[C$E.length-1]]={__interface__:C$s}},class:function(C$s,C$M,C$T,C$X){if(C$T&&C$U.__extend(C$s,C$T),C$M)if(C$U.__package(C$M,C$s),C$U.__classmap[C$M]=C$s,0<C$M.indexOf(".")){if(0==C$M.indexOf("laya.")){var C$x=C$M.split(".");C$X=C$X||C$x[C$x.length-1],C$U[C$X]&&console.log("Warning!,this class["+C$X+"] already exist:",C$U[C$X]),C$U[C$X]=C$s}}else"Main"==C$M?C$O.Main=C$s:"MainWX"==C$M?C$O.MainWX=C$s:(C$U[C$M]&&console.log("Error!,this class["+C$M+"] already exist:",C$U[C$M]),C$U[C$M]=C$s);var C$c=C$U.un,C$l=C$s.prototype;C$c(C$l,"hasOwnProperty",C$U.__hasOwnProperty),C$c(C$l,"__class",C$s),C$c(C$l,"__super",C$T),C$c(C$l,"__className",C$M),C$c(C$s,"__super",C$T),C$c(C$s,"__className",C$M),C$c(C$s,"__isclass",!0),C$c(C$s,"super",function(C$s){this.__super.call(C$s)})},imps:function(C$s,C$M){if(!C$M)return null;var C$x=C$s.__imps||C$U.un(C$s,"__imps",{});function C$c(C$s){var C$M,C$T;if((C$M=C$U.__internals[C$s])&&(C$x[C$s]=!0,C$T=C$M.extend))for(var C$X=0;C$X<C$T.length;C$X++)C$c(C$T[C$X].self)}for(var C$T in C$M)C$c(C$T)},superSet:function(C$s,C$M,C$T,C$X){var C$x=C$s.prototype["_$set_"+C$T];C$x&&C$x.call(C$M,C$X)},superGet:function(C$s,C$M,C$T){var C$X=C$s.prototype["_$get_"+C$T];return C$X?C$X.call(C$M):null},getset:function(C$s,C$M,C$T,C$X,C$x){C$s?(C$X&&(C$M["_$GET_"+C$T]=C$X),C$x&&(C$M["_$SET_"+C$T]=C$x)):(C$X&&C$U.un(C$M,"_$get_"+C$T,C$X),C$x&&C$U.un(C$M,"_$set_"+C$T,C$x)),C$X&&C$x?Object.defineProperty(C$M,C$T,{get:C$X,set:C$x,enumerable:!1,configurable:!0}):(C$X&&Object.defineProperty(C$M,C$T,{get:C$X,enumerable:!1,configurable:!0}),C$x&&Object.defineProperty(C$M,C$T,{set:C$x,enumerable:!1,configurable:!0}))},static:function(C$T,C$X){for(var C$x=0,C$s=C$X.length;C$x<C$s;C$x+=2)if("length"==C$X[C$x])C$T.length=C$X[C$x+1].call(C$T);else{function C$M(){var C$M=C$X[C$x],C$s=C$X[C$x+1];Object.defineProperty(C$T,C$M,{get:function(){return delete this[C$M],this[C$M]=C$s.call(this)},set:function(C$s){delete this[C$M],this[C$M]=C$s},enumerable:!0,configurable:!0})}C$M()}},un:function(C$s,C$M,C$T){return C$T||(C$T=C$s[C$M]),C$U.__propun.value=C$T,Object.defineProperty(C$s,C$M,C$U.__propun),C$T},uns:function(C$M,C$s){C$s.forEach(function(C$s){C$U.un(C$M,C$s)})}};return C$O.console=C$O.console||{log:function(){}},C$O.trace=C$O.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),C$U}(window,document);!function(C$s,C$M,C$T){C$T.un,C$T.uns,C$T.static,C$T.class,C$T.getset,C$T.__newvec}(window,document,Laya),function(C$l,C$M,C$w){C$w.un,C$w.uns;var C$E=C$w.static,C$U=C$w.class,C$q=C$w.getset;C$w.__newvec;C$w.interface("laya.runtime.IMarket"),C$w.interface("laya.filters.IFilter"),C$w.interface("laya.display.ILayout"),C$w.interface("laya.resource.IDispose"),C$w.interface("laya.runtime.IPlatform"),C$w.interface("laya.resource.IDestroy"),C$w.interface("laya.runtime.IConchNode"),C$w.interface("laya.filters.IFilterAction"),C$w.interface("laya.runtime.ICPlatformClass"),C$w.interface("laya.resource.ICreateResource"),C$w.interface("laya.runtime.IConchRenderObject"),C$w.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var C$v=function(){function C$c(){}return C$U(C$c,"laya.utils.RunDriver"),C$c.FILTER_ACTIONS=[],C$c.pixelRatio=-1,C$c._charSizeTestDiv=null,C$c.now=function(){return Date.now()},C$c.getWindow=function(){return C$l},C$c.getPixelRatio=function(){if(C$c.pixelRatio<0){var C$s=C$e.context,C$M=C$s.backingStorePixelRatio||C$s.webkitBackingStorePixelRatio||C$s.mozBackingStorePixelRatio||C$s.msBackingStorePixelRatio||C$s.oBackingStorePixelRatio||C$s.backingStorePixelRatio||1;(C$c.pixelRatio=(C$e.window.devicePixelRatio||1)/C$M)<1&&(C$c.pixelRatio=1)}return C$c.pixelRatio},C$c.getIncludeStr=function(C$s){return null},C$c.createShaderCondition=function(C$s){var C$M="(function() {return "+C$s+";})";return C$w._runScript(C$M)},C$c.fontMap=[],C$c.measureText=function(C$s,C$M){var C$T=C$c.hanzi.test(C$s);if(C$T&&C$c.fontMap[C$M])return C$c.fontMap[C$M];var C$X=C$e.context;C$X.font=C$M;var C$x=C$X.measureText(C$s);return C$x||(C$x={width:16,height:16}),C$T&&(C$c.fontMap[C$M]=C$x),C$x},C$c.getWebGLContext=function(C$s){},C$c.beginFlush=function(){},C$c.endFinish=function(){},C$c.addToAtlas=null,C$c.flashFlushImage=function(C$s){},C$c.drawToCanvas=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$Ps.create("2D"),C$u=new C$m(C$T,C$X,C$l);return C$Y.renders[C$M]._fun(C$s,C$u,C$x,C$c),C$l},C$c.createParticleTemplate2D=null,C$c.createGLTextur=null,C$c.createWebGLContext2D=null,C$c.changeWebGLSize=function(C$s,C$M){},C$c.createRenderSprite=function(C$s,C$M){return new C$Y(C$s,C$M)},C$c.createFilterAction=function(C$s){return new C$P},C$c.createGraphics=function(){return new C$_},C$c.clear=function(C$s){C$C._context.ctx.clear()},C$c.cancelLoadByUrl=function(C$s){},C$c.clearAtlas=function(C$s){},C$c.isAtlas=function(C$s){return!1},C$c.addTextureToAtlas=function(C$s){},C$c.getTexturePixels=function(C$s,C$M,C$T,C$X,C$x){return null},C$c.skinAniSprite=function(){return null},C$c.update3DLoop=function(){},C$E(C$c,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),C$c}(),C$X=(C$q(1,C$w,"alertGlobalError",null,function(C$s){var C$c=0;C$e.window.onerror=C$s?function(C$s,C$M,C$T,C$X,C$x){C$c++<5&&C$x&&alert(C$x.stack||C$x)}:null}),C$w.init=function(C$s,C$M,C$T){for(var C$X=[],C$x=2,C$c=arguments.length;C$x<C$c;C$x++)C$X.push(arguments[C$x]);if(!C$w._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=C$w._arrayBufferSlice),C$w._isinit=!0,C$e.__init__(),C$I.__init__(),C$_.__init__(),C$w.timer=new C$W,C$w.scaleTimer=new C$W,C$w.loader=new C$Es,C$H.__init__(),C$x=0;for(var C$l=C$X.length;C$x<C$l;C$x++)C$X[C$x].enable&&C$X[C$x].enable();return C$R.__init__(),C$u.__init__(),C$y.__init__(),C$b.beginCheck(),C$w._currentStage=C$w.stage=new C$fs,C$w.stage.conchModel&&C$w.stage.conchModel.setRootNode(),C$w._getUrlPath(),C$w.render=new C$C(0,0),C$w.stage.size(C$s,C$M),C$Y.__init__(),C$p.__init__(),C$G.instance.__init__(C$w.stage,C$C.canvas),C$rs.__init__(),C$Q.autoStopMusic=!0,C$D.__init__(),C$C.canvas}},C$w._getUrlPath=function(){var C$s=C$e.window.location,C$M=C$s.pathname;C$M=C$M&&":"==C$M.charAt(2)?C$M.substring(1):C$M,C$o.rootPath=C$o.basePath=C$o.getPath("file:"==C$s.protocol?C$M:C$s.protocol+"//"+C$s.host+C$s.pathname)},C$w._arrayBufferSlice=function(C$s,C$M){var C$T=new Uint8Array(this,C$s,C$M-C$s),C$X=new Uint8Array(C$T.length);return C$X.set(C$T),C$X.buffer},C$w._runScript=function(C$s){return C$e.window[C$w._evcode](C$s)},C$w.stage=null,C$w.timer=null,C$w.scaleTimer=null,C$w.loader=null,C$w.version="1.8.6",C$w.render=null,C$w._currentStage=null,C$w._isinit=!1,C$w.isDebug=!1,C$w.MiniAdpter={init:function(){C$l.navigator&&C$l.navigator.userAgent&&-1<C$l.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},C$E(C$w,["conchMarket",function(){return this.conchMarket=C$l.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=C$l.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function C$s(){}return C$U(C$s,"Config"),C$s.WebGLTextCacheCount=500,C$s.atlasEnable=!1,C$s.showCanvasMark=!1,C$s.animationInterval=50,C$s.isAntialias=!1,C$s.isAlpha=!1,C$s.premultipliedAlpha=!0,C$s.isStencil=!0,C$s.preserveDrawingBuffer=!1,C$s}()),C$O=function(){function C$O(){this._events=null}C$U(C$O,"laya.events.EventDispatcher");var C$s=C$O.prototype;return C$s.hasListener=function(C$s){return!!(this._events&&this._events[C$s])},C$s.getListener=function(C$s){return this._events?this._events[C$s]:null},C$s.event=function(C$s,C$M){if(!this._events||!this._events[C$s])return!1;var C$T=this._events[C$s];if(C$T.lock)C$T.queue||(C$T.queue=[]),C$T.queue.push(C$M);else{var C$X;for(C$T.lock=!0,C$T.cursor=C$T.head;C$T.cursor;)(C$X=C$T.cursor).recover?(C$T.head=C$T.tail=C$T.cursor=null,console.error("node is recover："+C$X.id)):(C$T.cursor=C$X.next,C$X.once&&C$O.delNode(C$T,C$X),C$X.method&&(null!=C$M?C$X.args?C$X.method.apply(C$X.caller,C$X.args.concat(C$M)):C$M instanceof Array?C$X.method.apply(C$X.caller,C$M):C$X.caller?C$X.method.call(C$X.caller,C$M):C$w.recordError("事件派发错误","node.caller:"+C$X.caller+"node.method:"+C$X.method+"data:"+C$M+"node.prev"+C$X.prev):C$X.method.apply(C$X.caller,C$X.args)),C$X.once&&C$O.recoverHandler(C$X));C$T.lock=!1,!C$T.head&&this._events&&this._events[C$s]==C$T&&delete this._events[C$s],C$T.queue&&C$T.queue.length&&this.event(C$s,C$T.queue.shift())}return!0},C$s.on=function(C$s,C$M,C$T,C$X){return this._createListener(C$s,C$M,C$T,C$X,!1)},C$s.once=function(C$s,C$M,C$T,C$X){return this._createListener(C$s,C$M,C$T,C$X,!0)},C$s._createListener=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=!0),C$c&&this.off(C$s,C$M,C$T,C$x);var C$l=C$O.createHandler(C$M||this,C$T,C$X,C$x);this._events||(this._events={});var C$u=this._events,C$E=C$u[C$s];return C$E?C$E.tail?(C$l.prev=C$E.tail,C$E.tail.next=C$l,C$E.tail=C$l):C$E.head=C$E.tail=C$l:C$u[C$s]={head:C$l,tail:C$l,cursor:null,lock:!1},this},C$s.off=function(C$s,C$M,C$T,C$X){if(void 0===C$X&&(C$X=!1),!this._events||!this._events[C$s])return this;for(var C$x=this._events[C$s],C$c=C$x.head;C$c;){if((!C$M||C$c.caller===C$M)&&C$c.method===C$T&&(!C$X||C$c.once)){C$O.delNode(C$x,C$c),C$x.cursor==C$c&&(C$x.cursor=C$c.next),C$O.recoverHandler(C$c);break}C$c=C$c.next}return this},C$s.offAll=function(C$s){var C$M=this._events;if(!C$M)return this;if(C$s)this._recoverHandlers(C$M[C$s]),delete C$M[C$s];else{for(var C$T in C$M)this._recoverHandlers(C$M[C$T]);this._events=null}return this},C$s._recoverHandlers=function(C$s){if(C$s){for(var C$M=C$s.head;C$M;){C$O.delNode(C$s,C$M);var C$T=C$M.next;C$O.recoverHandler(C$M),C$M=C$T}C$s.cursor=null}},C$s.isMouseEvent=function(C$s){return C$O.MOUSE_EVENTS[C$s]},C$O.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},C$O.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},C$O.delNode=function(C$s,C$M){C$M.prev?C$M.prev.next=C$M.next:C$s.head=C$M.next,C$M.next?C$M.next.prev=C$M.prev:C$s.tail=C$M.prev},C$O.createHandler=function(C$s,C$M,C$T,C$X){var C$x=500<C$O._freeHandler.length?C$O._freeHandler.shift():null;if(C$x)if(C$x.recover)C$x.recover=!1,C$x.caller=C$s,C$x.method=C$M,C$x.args=C$T,C$x.once=C$X;else{var C$c="";try{arguments.propertyIsEnumerable.caller}catch(C$s){C$c=C$s.stack}var C$l=C$x.caller?(C$x.caller.__proto__&&C$x.caller.__proto__.constructor&&C$x.caller.__proto__.constructor.name)+"|"+C$x.caller.__className+"|"+C$x.caller.name:"",C$u=C$x.method?C$x.method.name:"";C$w.recordError("EventDispatcher重复创建","caller="+C$l+"  method="+C$u+"  stack="+C$c),C$x={id:++C$O._nodeCount,caller:C$s,method:C$M,args:C$T,once:C$X,recover:!1}}else C$x={id:++C$O._nodeCount,caller:C$s,method:C$M,args:C$T,once:C$X,recover:!1};return C$x.prev=C$x.next=null,C$x},C$O.recoverHandler=function(C$s){if(C$s.recover){if(C$O._errorCount<5){C$O._errorCount++;var C$M="";try{arguments.propertyIsEnumerable.caller}catch(C$s){C$M=C$s.stack}var C$T=C$s.caller?(C$s.caller.__proto__&&C$s.caller.__proto__.constructor&&C$s.caller.__proto__.constructor.name)+"|"+C$s.caller.__className+"|"+C$s.caller.name:"",C$X=C$s.method?C$s.method.name:"";C$w.recordError("EventDispatcher重复回收","id="+C$s.id+"  caller="+C$T+"  method="+C$X+"  stack="+C$M)}C$s.caller=C$s.method=C$s.args=C$s.prev=null}else C$s.recover=!0,C$s.caller=C$s.method=C$s.args=C$s.prev=C$s.next=null,C$O._freeHandler.push(C$s)},C$O._freeHandler=[],C$O._nodeCount=0,C$O._errorCount=0,C$O}(),C$J=function(){function C$x(C$s,C$M,C$T,C$X){this.once=!1,void(this._id=0)===C$X&&(C$X=!1),this.setTo(C$s,C$M,C$T,C$X)}C$U(C$x,"laya.utils.Handler");var C$s=C$x.prototype;return C$s.setTo=function(C$s,C$M,C$T,C$X){return this._id=C$x._gid++,this.caller=C$s,this.method=C$M,this.args=C$T,this.once=C$X,this},C$s.run=function(){if(null==this.method)return null;var C$s=this._id,C$M=this.method.apply(this.caller,this.args);return this._id===C$s&&this.once&&this.recover(),C$M},C$s.runWith=function(C$s){if(null==this.method)return null;var C$M=this._id;if(null==C$s)var C$T=this.method.apply(this.caller,this.args);else C$T=this.args||C$s.unshift?this.args?this.method.apply(this.caller,this.args.concat(C$s)):this.method.apply(this.caller,C$s):this.method.call(this.caller,C$s);return this._id===C$M&&this.once&&this.recover(),C$T},C$s.clear=function(){return this.caller=null,this.method=null,this.args=null,this},C$s.recover=function(){0<this._id&&(this._id=0,this.clear())},C$x.create=function(C$s,C$M,C$T,C$X){return void 0===C$X&&(C$X=!0),new C$x(C$s,C$M,C$T,C$X)},C$x._gid=1,C$x}(),C$h=function(){function C$s(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}C$U(C$s,"laya.display.BitmapFont");var C$M=C$s.prototype;return C$M.loadFont=function(C$s,C$M){this._path=C$s,this._complete=C$M,C$w.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],C$J.create(this,this.onLoaded))},C$M.onLoaded=function(){this.parseFont(C$us.getRes(this._path),C$us.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},C$M.parseFont=function(C$s,C$M){if(null!=C$s&&null!=C$M){this._texture=C$M;var C$T=C$s.getElementsByTagName("info");if(!C$T[0].getAttributeNode)return this.parseFont2(C$s,C$M);this.fontSize=parseInt(C$T[0].getAttributeNode("size").nodeValue);var C$X,C$x=C$T[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(C$x[0]),parseInt(C$x[1]),parseInt(C$x[2]),parseInt(C$x[3])],C$X=C$s.getElementsByTagName("char");var C$c=0;for(C$c=0;C$c<C$X.length;C$c++){var C$l=C$X[C$c],C$u=parseInt(C$l.getAttributeNode("id").nodeValue),C$E=parseInt(C$l.getAttributeNode("xoffset").nodeValue)/1,C$O=parseInt(C$l.getAttributeNode("yoffset").nodeValue)/1,C$U=parseInt(C$l.getAttributeNode("xadvance").nodeValue)/1,C$p=new C$A;C$p.x=parseInt(C$l.getAttributeNode("x").nodeValue),C$p.y=parseInt(C$l.getAttributeNode("y").nodeValue),C$p.width=parseInt(C$l.getAttributeNode("width").nodeValue),C$p.height=parseInt(C$l.getAttributeNode("height").nodeValue);var C$_=C$Us.create(C$M,C$p.x,C$p.y,C$p.width,C$p.height,C$E,C$O);this._maxWidth=Math.max(this._maxWidth,C$U+this.letterSpacing),this._fontCharDic[C$u]=C$_,this._fontWidthMap[C$u]=C$U}}},C$M.parseFont2=function(C$s,C$M){if(null!=C$s&&null!=C$M){this._texture=C$M;var C$T=C$s.getElementsByTagName("info");this.fontSize=parseInt(C$T[0].attributes.size.nodeValue);var C$X=C$T[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(C$X[0]),parseInt(C$X[1]),parseInt(C$X[2]),parseInt(C$X[3])];var C$x=C$s.getElementsByTagName("char"),C$c=0;for(C$c=0;C$c<C$x.length;C$c++){var C$l=C$x[C$c].attributes,C$u=parseInt(C$l.id.nodeValue),C$E=parseInt(C$l.xoffset.nodeValue)/1,C$O=parseInt(C$l.yoffset.nodeValue)/1,C$U=parseInt(C$l.xadvance.nodeValue)/1,C$p=new C$A;C$p.x=parseInt(C$l.x.nodeValue),C$p.y=parseInt(C$l.y.nodeValue),C$p.width=parseInt(C$l.width.nodeValue),C$p.height=parseInt(C$l.height.nodeValue);var C$_=C$Us.create(C$M,C$p.x,C$p.y,C$p.width,C$p.height,C$E,C$O);this._maxWidth=Math.max(this._maxWidth,C$U+this.letterSpacing),this._fontCharDic[C$u]=C$_,this._fontWidthMap[C$u]=C$U}}},C$M.getCharTexture=function(C$s){return this._fontCharDic[C$s.charCodeAt(0)]},C$M.destroy=function(){if(this._texture){for(var C$s in this._fontCharDic){var C$M=this._fontCharDic[C$s];C$M&&C$M.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},C$M.setSpaceWidth=function(C$s){this._spaceWidth=C$s},C$M.getCharWidth=function(C$s){var C$M=C$s.charCodeAt(0);return this._fontWidthMap[C$M]?this._fontWidthMap[C$M]+this.letterSpacing:" "==C$s?this._spaceWidth+this.letterSpacing:0},C$M.getTextWidth=function(C$s){for(var C$M=0,C$T=0,C$X=C$s.length;C$T<C$X;C$T++)C$M+=this.getCharWidth(C$s.charAt(C$T));return C$M},C$M.getMaxWidth=function(){return this._maxWidth},C$M.getMaxHeight=function(){return this.fontSize},C$M.drawText=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u=this.getTextWidth(C$s),C$E=0;"center"===C$x&&(C$E=(C$c-C$u)/2),"right"===C$x&&(C$E=C$c-C$u);for(var C$O=0,C$U=0,C$p=C$s.length;C$U<C$p;C$U++)(C$l=this.getCharTexture(C$s.charAt(C$U)))&&(C$M.graphics.drawTexture(C$l,C$T+C$O+C$E,C$X),C$O+=this.getCharWidth(C$s.charAt(C$U)))},C$s}(),C$u=function(){function C$T(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=C$T._TF_EMPTY}C$U(C$T,"laya.display.css.Style");var C$s=C$T.prototype;return C$s.getTransform=function(){return this._tf},C$s.setTransform=function(C$s){this._tf="none"!==C$s&&C$s?C$s:C$T._TF_EMPTY},C$s.setTranslateX=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.translateX=C$s},C$s.setTranslateY=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.translateY=C$s},C$s.setScaleX=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.scaleX=C$s},C$s.setScale=function(C$s,C$M){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.scaleX=C$s,this._tf.scaleY=C$M},C$s.setScaleY=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.scaleY=C$s},C$s.setRotate=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.rotate=C$s},C$s.setSkewX=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.skewX=C$s},C$s.setSkewY=function(C$s){this._tf===C$T._TF_EMPTY&&(this._tf=new C$x),this._tf.skewY=C$s},C$s.destroy=function(){this.scrollRect=null},C$s.render=function(C$s,C$M,C$T,C$X){},C$s.getCSSStyle=function(){return C$Ms.EMPTY},C$s._enableLayout=function(){return!1},C$q(0,C$s,"scaleX",function(){return this._tf.scaleX},function(C$s){this.setScaleX(C$s)}),C$q(0,C$s,"transform",function(){return this.getTransform()},function(C$s){this.setTransform(C$s)}),C$q(0,C$s,"translateX",function(){return this._tf.translateX},function(C$s){this.setTranslateX(C$s)}),C$q(0,C$s,"translateY",function(){return this._tf.translateY},function(C$s){this.setTranslateY(C$s)}),C$q(0,C$s,"scaleY",function(){return this._tf.scaleY},function(C$s){this.setScaleY(C$s)}),C$q(0,C$s,"block",function(){return 0!=(1&this._type)}),C$q(0,C$s,"skewY",function(){return this._tf.skewY},function(C$s){this.setSkewY(C$s)}),C$q(0,C$s,"rotate",function(){return this._tf.rotate},function(C$s){this.setRotate(C$s)}),C$q(0,C$s,"skewX",function(){return this._tf.skewX},function(C$s){this.setSkewX(C$s)}),C$q(0,C$s,"paddingLeft",function(){return 0}),C$q(0,C$s,"paddingTop",function(){return 0}),C$q(0,C$s,"absolute",function(){return!0}),C$T.__init__=function(){C$T._TF_EMPTY=new C$x,C$T.EMPTY=new C$T},C$T.EMPTY=null,C$T._TF_EMPTY=null,C$T}(),C$R=function(){function C$M(C$s){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=C$S.create(C$M.defaultColor),this.family=C$M.defaultFamily,this.stroke=C$M._STROKE,this.size=C$M.defaultSize,C$s&&C$s!==C$M.EMPTY&&C$s.copyTo(this)}C$U(C$M,"laya.display.css.Font");var C$s=C$M.prototype;return C$s.set=function(C$s){this._text=null;for(var C$M=C$s.split(" "),C$T=0,C$X=C$M.length;C$T<C$X;C$T++){var C$x=C$M[C$T];switch(C$x){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<C$x.indexOf("px")&&(this.size=parseInt(C$x),this.family=C$M[C$T+1],C$T++)}},C$s.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},C$s.copyTo=function(C$s){C$s._type=this._type,C$s._text=this._text,C$s._weight=this._weight,C$s._color=this._color,C$s.family=this.family,C$s.stroke=this.stroke!=C$M._STROKE?this.stroke.slice():C$M._STROKE,C$s.indent=this.indent,C$s.size=this.size},C$q(0,C$s,"password",function(){return 0!=(1024&this._type)},function(C$s){C$s?this._type|=1024:this._type&=-1025}),C$q(0,C$s,"color",function(){return this._color.strColor},function(C$s){this._color=C$S.create(C$s)}),C$q(0,C$s,"italic",function(){return 0!=(512&this._type)},function(C$s){C$s?this._type|=512:this._type&=-513}),C$q(0,C$s,"bold",function(){return 0!=(2048&this._type)},function(C$s){C$s?this._type|=2048:this._type&=-2049}),C$q(0,C$s,"weight",function(){return""+this._weight},function(C$s){var C$M=0;switch(C$s){case"normal":break;case"bold":this.bold=!0,C$M=700;break;case"bolder":C$M=800;break;case"lighter":C$M=100;break;default:C$M=parseInt(C$s)}this._weight=C$M,this._text=null}),C$q(0,C$s,"decoration",function(){return this._decoration?this._decoration.value:null},function(C$s){var C$M=C$s.split(" ");switch(this._decoration||(this._decoration={}),C$M[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=C$M[0]}C$M[1]&&(this._decoration.color=C$S.create(C$M)),this._decoration.value=C$s}),C$M.__init__=function(){C$M.EMPTY=new C$M(null)},C$M.EMPTY=null,C$M.defaultColor="#000000",C$M.defaultSize=12,C$M.defaultFamily="Arial",C$M.defaultFont="12px Arial",C$M._STROKE=[0,"#000000"],C$M._ITALIC=512,C$M._PASSWORD=1024,C$M._BOLD=2048,C$M}(),C$x=function(){function C$s(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return C$U(C$s,"laya.display.css.TransformInfo"),C$s}(),C$_=function(){function C$p(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,C$C.isConchNode){this._nativeObj=new C$l._conchGraphics,this.id=this._nativeObj.conchID}}C$U(C$p,"laya.display.Graphics");var C$s=C$p.prototype;return C$s.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},C$s.clear=function(C$s){void 0===C$s&&(C$s=!1);var C$M=0,C$T=0;if(C$s){var C$X=this._one;if(this._cmds){for(C$T=this._cmds.length,C$M=0;C$M<C$T;C$M++)!(C$X=this._cmds[C$M])||C$X.callee!==C$C._context._drawTexture&&C$X.callee!==C$C._context._drawTextureWithTransform||(C$X[0]=null,C$p._cache.push(C$X));this._cmds.length=0}else C$X&&(!C$X||C$X.callee!==C$C._context._drawTexture&&C$X.callee!==C$C._context._drawTextureWithTransform||(C$X[0]=null,C$p._cache.push(C$X)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(C$M=0,C$T=this._vectorgraphArray.length;C$M<C$T;C$M++)C$i.getInstance().deleteShape(this._vectorgraphArray[C$M]);this._vectorgraphArray.length=0}},C$s._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},C$s._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new C$T,this._graphicBounds._graphics=this)},C$s._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},C$s._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},C$s.getBounds=function(C$s){return void 0===C$s&&(C$s=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(C$s)},C$s.getBoundPoints=function(C$s){return void 0===C$s&&(C$s=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(C$s)},C$s._addCmd=function(C$s){this._cmds=this._cmds||[],C$s.callee=C$s.shift(),this._cmds.push(C$s)},C$s.setFilters=function(C$s){this._saveToCmd(C$C._context._setFilters,C$s)},C$s.drawTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$l&&(C$l=1),!C$s||C$l<.01)return null;C$X||(C$X=C$s.sourceWidth),C$x||(C$x=C$s.sourceHeight),C$l=C$l<0?0:1<C$l?1:C$l;var C$u,C$E=!C$C.isWebGL&&(C$e.onFirefox||C$e.onEdge||C$e.onIE||C$e.onSafari)?.5:0,C$O=C$X/C$s.sourceWidth,C$U=C$x/C$s.sourceHeight;return C$X=C$s.width*C$O,C$x=C$s.height*C$U,C$s.loaded&&(C$X<=0||C$x<=0)?null:(C$M+=C$s.offsetX*C$O,C$T+=C$s.offsetY*C$U,this._sp&&(this._sp._renderType|=512),C$M-=C$E,C$T-=C$E,C$X+=2*C$E,C$x+=2*C$E,C$p._cache.length?((C$u=C$p._cache.pop())[0]=C$s,C$u[1]=C$M,C$u[2]=C$T,C$u[3]=C$X,C$u[4]=C$x,C$u[5]=C$c,C$u[6]=C$l):C$u=[C$s,C$M,C$T,C$X,C$x,C$c,C$l],C$u.callee=C$c||1!=C$l?C$C._context._drawTextureWithTransform:C$C._context._drawTexture,null!=this._one||C$c||1!=C$l?this._saveToCmd(C$u.callee,C$u):(this._one=C$u,this._render=this._renderOneImg),C$s.loaded||C$s.once("loaded",this,this._textureLoaded,[C$s,C$u]),this._repaint(),C$u)},C$s.cleanByTexture=function(C$s,C$M,C$T,C$X,C$x){if(void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),!C$s)return this.clear();if(this._one&&this._render===this._renderOneImg){C$X||(C$X=C$s.sourceWidth),C$x||(C$x=C$s.sourceHeight);var C$c=C$X/C$s.sourceWidth,C$l=C$x/C$s.sourceHeight;C$X=C$s.width*C$c,C$x=C$s.height*C$l,C$M+=C$s.offsetX*C$c,C$T+=C$s.offsetY*C$l,this._one[0]=C$s,this._one[1]=C$M,this._one[2]=C$T,this._one[3]=C$X,this._one[4]=C$x,this._repaint()}else this.clear(),C$s&&this.drawTexture(C$s,C$M,C$T,C$X,C$x)},C$s.drawTextures=function(C$s,C$M){C$s&&this._saveToCmd(C$C._context._drawTextures,[C$s,C$M])},C$s.fillTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c="repeat"),C$s){var C$u=[C$s,C$M,C$T,C$X,C$x,C$c,C$l||C$k.EMPTY,{}];C$s.loaded||C$s.once("loaded",this,this._textureLoaded,[C$s,C$u]),this._saveToCmd(C$C._context._fillTexture,C$u)}},C$s._textureLoaded=function(C$s,C$M){C$M[3]=C$M[3]||C$s.width,C$M[4]=C$M[4]||C$s.height,this._repaint()},C$s.fillCircle=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$T.bitmap.enableMerageInAtlas=!1;var C$u=new Float32Array(2*(C$l+1)),C$E=new Float32Array(2*(C$l+1)),C$O=new Uint16Array(3*C$l),C$U=2*Math.PI/C$l,C$p=0;C$u[0]=C$X,C$u[1]=C$x,C$E[0]=C$X/C$T.width,C$E[1]=C$x/C$T.height;for(var C$_=2,C$R=0;C$R<C$l;C$R++){var C$q=C$c*Math.cos(C$p)+C$X,C$G=C$c*Math.sin(C$p)+C$x;C$u[C$_]=C$q,C$u[C$_+1]=C$G,C$E[C$_]=C$q/C$T.width,C$E[C$_+1]=C$G/C$T.height,C$p+=C$U,C$_+=2}for(C$R=C$_=0;C$R<C$l;C$R++)C$O[C$_++]=0,C$O[C$_++]=C$R+1,C$O[C$_++]=C$l+1<=C$R+2?1:C$R+2;this.drawTriangles(C$T,C$s,C$M,C$u,C$E,C$O)},C$s.drawTriangles=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){void 0===C$u&&(C$u=1),this._saveToCmd(C$C._context.drawTriangles,[C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O])},C$s._saveToCmd=function(C$s,C$M){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=C$M,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(C$M)),C$M.callee=C$s,this._repaint(),C$M},C$s.clipRect=function(C$s,C$M,C$T,C$X){this._saveToCmd(C$C._context._clipRect,[C$s,C$M,C$T,C$X])},C$s.fillText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){void 0===C$l&&(C$l=0),this._saveToCmd(C$C._context._fillText,[C$s,C$M,C$T,C$X||C$R.defaultFont,C$x,C$c])},C$s.fillBorderText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){this._saveToCmd(C$C._context._fillBorderText,[C$s,C$M,C$T,C$X||C$R.defaultFont,C$x,C$c,C$l,C$u])},C$s.strokeText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._saveToCmd(C$C._context._strokeText,[C$s,C$M,C$T,C$X||C$R.defaultFont,C$x,C$c,C$l])},C$s.alpha=function(C$s){C$s=C$s<0?0:1<C$s?1:C$s,this._saveToCmd(C$C._context._alpha,[C$s])},C$s.setAlpha=function(C$s){C$s=C$s<0?0:1<C$s?1:C$s,this._saveToCmd(C$C._context._setAlpha,[C$s])},C$s.transform=function(C$s,C$M,C$T){void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),this._saveToCmd(C$C._context._transform,[C$s,C$M,C$T])},C$s.rotate=function(C$s,C$M,C$T){void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),this._saveToCmd(C$C._context._rotate,[C$s,C$M,C$T])},C$s.scale=function(C$s,C$M,C$T,C$X){void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),this._saveToCmd(C$C._context._scale,[C$s,C$M,C$T,C$X])},C$s.translate=function(C$s,C$M){this._saveToCmd(C$C._context._translate,[C$s,C$M])},C$s.save=function(){this._saveToCmd(C$C._context._save,[])},C$s.restore=function(){this._saveToCmd(C$C._context._restore,[])},C$s.replaceText=function(C$s){this._repaint();var C$M=this._cmds;if(C$M){for(var C$T=C$M.length-1;-1<C$T;C$T--)if(this._isTextCmd(C$M[C$T].callee))return C$M[C$T][0].toUpperCase?C$M[C$T][0]=C$s:C$M[C$T][0].setText(C$s),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=C$s:this._one[0].setText(C$s),!0;return!1},C$s._isTextCmd=function(C$s){return C$s===C$C._context._fillText||C$s===C$C._context._fillBorderText||C$s===C$C._context._strokeText},C$s.replaceTextColor=function(C$s){this._repaint();var C$M=this._cmds;if(C$M)for(var C$T=C$M.length-1;-1<C$T;C$T--)this._isTextCmd(C$M[C$T].callee)&&(C$M[C$T][4]=C$s,C$M[C$T][0].toUpperCase||(C$M[C$T][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=C$s,this._one[0].toUpperCase||(this._one[0].changed=!0))},C$s.loadImage=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=this;void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0);var C$u=C$us.getRes(C$s);function C$E(C$s){C$s&&(C$l.drawTexture(C$s,C$M,C$T,C$X,C$x),null!=C$c&&C$c.call(C$l._sp,C$s))}C$u?C$E(C$u):C$w.loader.load(C$s,C$J.create(null,C$E),null,"image")},C$s._renderEmpty=function(C$s,C$M,C$T,C$X){},C$s._renderAll=function(C$s,C$M,C$T,C$X){for(var C$x,C$c=this._cmds,C$l=0,C$u=C$c.length;C$l<C$u;C$l++)(C$x=C$c[C$l]).callee.call(C$M,C$T,C$X,C$x)},C$s._renderOne=function(C$s,C$M,C$T,C$X){this._one.callee.call(C$M,C$T,C$X,this._one)},C$s._renderOneImg=function(C$s,C$M,C$T,C$X){this._one.callee.call(C$M,C$T,C$X,this._one),2305!==C$s._renderType&&(C$s._renderType|=1)},C$s.drawLine=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=1);var C$l=0;C$C.isWebGL&&(C$l=C$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(C$l));var C$u=C$c%2==0?0:.5,C$E=[C$s+C$u,C$M+C$u,C$T+C$u,C$X+C$u,C$x,C$c,C$l];this._saveToCmd(C$C._context._drawLine,C$E)},C$s.drawLines=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=1);var C$c=0;if(C$T&&!(C$T.length<4)){C$C.isWebGL&&(C$c=C$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(C$c));var C$l=C$x%2==0?0:.5,C$u=[C$s+C$l,C$M+C$l,C$T,C$X,C$x,C$c];this._saveToCmd(C$C._context._drawLines,C$u)}},C$s.drawCurves=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=1);var C$c=[C$s,C$M,C$T,C$X,C$x];this._saveToCmd(C$C._context._drawCurves,C$c)},C$s.drawRect=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){void 0===C$l&&(C$l=1);var C$u=C$c?C$l/2:0,C$E=C$c?C$l:0,C$O=[C$s+C$u,C$M+C$u,C$T-C$E,C$X-C$E,C$x,C$c,C$l];this._saveToCmd(C$C._context._drawRect,C$O)},C$s.drawCircle=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=1);var C$l=C$x?C$c/2:0,C$u=0;C$C.isWebGL&&(C$u=C$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(C$u));var C$E=[C$s,C$M,C$T-C$l,C$X,C$x,C$c,C$u];this._saveToCmd(C$C._context._drawCircle,C$E)},C$s.drawPie=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){void 0===C$u&&(C$u=1);var C$E=C$l?C$u/2:0,C$O=C$l?C$u:0,C$U=0;C$C.isWebGL&&(C$U=C$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(C$U));var C$p=[C$s+C$E,C$M+C$E,C$T-C$O,C$X,C$x,C$c,C$l,C$u,C$U];C$p[3]=C$j.toRadian(C$X),C$p[4]=C$j.toRadian(C$x),this._saveToCmd(C$C._context._drawPie,C$p)},C$s.drawPoly=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=1);var C$l=0,C$u=!1;C$C.isWebGL&&(C$l=C$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(C$l),C$u=!(6<C$T.length));var C$E=C$x?C$c%2==0?0:.5:0,C$O=[C$s+C$E,C$M+C$E,C$T,C$X,C$x,C$c,C$l,C$u];this._saveToCmd(C$C._context._drawPoly,C$O)},C$s.drawPath=function(C$s,C$M,C$T,C$X,C$x){var C$c=[C$s,C$M,C$T,C$X,C$x];this._saveToCmd(C$C._context._drawPath,C$c)},C$q(0,C$s,"cmds",function(){return this._cmds},function(C$s){this._sp&&(this._sp._renderType|=512),this._cmds=C$s,this._render=this._renderAll,this._repaint()}),C$p.__init__=function(){if(C$C.isConchNode){for(var C$s=laya.display.Graphics.prototype,C$M=C$e.window.ConchGraphics.prototype,C$T=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],C$X=0,C$x=C$T.length;C$X<=C$x;C$X++){var C$c=C$T[C$X];C$s[C$c]=C$M[C$c]}C$s._saveToCmd=null,C$M.drawImageS&&(C$s.drawTextures=function(C$s,C$M){if(C$s&&C$s.loaded&&C$s.bitmap&&C$s.source){var C$T=C$s.uv,C$X=C$s.bitmap.width,C$x=C$s.bitmap.height;this.drawImageS(C$s.bitmap.source,C$T[0]*C$X,C$T[1]*C$x,(C$T[2]-C$T[0])*C$X,(C$T[5]-C$T[3])*C$x,C$s.offsetX,C$s.offsetY,C$s.width,C$s.height,C$M)}}),C$s.drawTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$l&&(C$l=1),C$s)if(C$s.loaded){if(C$s.loaded&&C$s.bitmap&&C$s.source&&(C$X||(C$X=C$s.sourceWidth),C$x||(C$x=C$s.sourceHeight),C$l=C$l<0?0:1<C$l?1:C$l,C$X=C$X-C$s.sourceWidth+C$s.width,C$x=C$x-C$s.sourceHeight+C$s.height,!(C$X<=0||C$x<=0))){C$M+=C$s.offsetX,C$T+=C$s.offsetY;var C$u=C$s.uv,C$E=C$s.bitmap.width,C$O=C$s.bitmap.height;C$u[4]<C$u[0]&&C$u[5]<C$u[1]?this.drawImageM(C$s.bitmap.source,C$u[4]*C$E,C$u[5]*C$O,(C$u[0]-C$u[4])*C$E,(C$u[1]-C$u[5])*C$O,C$M,C$T,C$X,C$x,C$c,C$l):this.drawImageM(C$s.bitmap.source,C$u[0]*C$E,C$u[1]*C$O,(C$u[2]-C$u[0])*C$E,(C$u[5]-C$u[3])*C$O,C$M,C$T,C$X,C$x,C$c,C$l),this._repaint()}}else C$s.once("loaded",this,function(){this.drawTexture(C$s,C$M,C$T,C$X,C$x,C$c)})},C$s.fillTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c="repeat"),C$s&&C$s.loaded){var C$u,C$E=C$C._context.ctx,C$O=C$s.bitmap.width,C$U=C$s.bitmap.height,C$p=C$s.uv;C$u=C$s.uv!=C$Us.DEF_UV?C$E.createPattern(C$s.bitmap.source,C$c,C$p[0]*C$O,C$p[1]*C$U,(C$p[2]-C$p[0])*C$O,(C$p[5]-C$p[3])*C$U):C$E.createPattern(C$s.bitmap.source,C$c);var C$_=0,C$R=0;C$l&&(C$M+=C$l.x%C$s.width,C$T+=C$l.y%C$s.height,C$_-=C$l.x%C$s.width,C$R-=C$l.y%C$s.height),this._fillImage(C$u,C$M,C$T,C$_,C$R,C$X,C$x)}}}},C$p._cache=[],C$p}(),C$T=function(){function C$P(){this._cacheBoundsType=!1}C$U(C$P,"laya.display.GraphicsBounds");var C$s=C$P.prototype;return C$s.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},C$s.reset=function(){this._temp&&(this._temp.length=0)},C$s.getBounds=function(C$s){return void 0===C$s&&(C$s=!1),(!this._bounds||!this._temp||this._temp.length<1||C$s!=this._cacheBoundsType)&&(this._bounds=C$A._getWrapRec(this.getBoundPoints(C$s),this._bounds)),this._cacheBoundsType=C$s,this._bounds},C$s.getBoundPoints=function(C$s){return void 0===C$s&&(C$s=!1),(!this._temp||this._temp.length<1||C$s!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(C$s)),this._cacheBoundsType=C$s,this._rstBoundPoints=C$j.copyArray(this._rstBoundPoints,this._temp)},C$s._getCmdPoints=function(C$s){void 0===C$s&&(C$s=!1);var C$M,C$T,C$X=C$C._context,C$x=this._graphics.cmds;if((C$M=this._temp||(this._temp=[])).length=0,C$x||null==this._graphics._one||(C$P._tempCmds.length=0,C$P._tempCmds.push(this._graphics._one),C$x=C$P._tempCmds),!C$x)return C$M;(C$T=C$P._tempMatrixArrays).length=0;var C$c=C$P._initMatrix;C$c.identity();for(var C$l,C$u,C$E=C$P._tempMatrix,C$O=NaN,C$U=NaN,C$p=NaN,C$_=NaN,C$R=NaN,C$q=NaN,C$G=0,C$g=C$x.length;C$G<C$g;C$G++)if((C$l=C$x[C$G]).callee)switch(C$l.callee){case C$X._save:case 7:C$T.push(C$c),C$c=C$c.clone();break;case C$X._restore:case 8:C$c=C$T.pop();break;case C$X._scale:case 5:C$E.identity(),C$E.translate(-C$l[2],-C$l[3]),C$E.scale(C$l[0],C$l[1]),C$E.translate(C$l[2],C$l[3]),this._switchMatrix(C$c,C$E);break;case C$X._rotate:case 3:C$E.identity(),C$E.translate(-C$l[1],-C$l[2]),C$E.rotate(C$l[0]),C$E.translate(C$l[1],C$l[2]),this._switchMatrix(C$c,C$E);break;case C$X._translate:case 6:C$E.identity(),C$E.translate(C$l[0],C$l[1]),this._switchMatrix(C$c,C$E);break;case C$X._transform:case 4:C$E.identity(),C$E.translate(-C$l[1],-C$l[2]),C$E.concat(C$l[0]),C$E.translate(C$l[1],C$l[2]),this._switchMatrix(C$c,C$E);break;case 16:case 24:C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[0],C$l[1],C$l[2],C$l[3]),C$c);break;case 17:C$c.copyTo(C$E),C$E.concat(C$l[4]),C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[0],C$l[1],C$l[2],C$l[3]),C$E);break;case C$X._drawTexture:C$u=C$l[0],C$s?C$l[3]&&C$l[4]?C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$l[3],C$l[4]),C$c):(C$u=C$l[0],C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$u.width,C$u.height),C$c)):(C$O=(C$l[3]||C$u.sourceWidth)/C$u.width,C$U=(C$l[4]||C$u.sourceHeight)/C$u.height,C$p=C$O*C$u.sourceWidth,C$_=C$U*C$u.sourceHeight,C$R=0<C$u.offsetX?C$u.offsetX:0,C$q=0<C$u.offsetY?C$u.offsetY:0,C$R*=C$O,C$q*=C$U,C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1]-C$R,C$l[2]-C$q,C$p,C$_),C$c));break;case C$X._fillTexture:C$l[3]&&C$l[4]?C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$l[3],C$l[4]),C$c):(C$u=C$l[0],C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$u.width,C$u.height),C$c));break;case C$X._drawTextureWithTransform:var C$f;C$f=C$l[5]?(C$c.copyTo(C$E),C$E.concat(C$l[5]),C$E):C$c,C$s?C$l[3]&&C$l[4]?C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$l[3],C$l[4]),C$f):(C$u=C$l[0],C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1],C$l[2],C$u.width,C$u.height),C$f)):(C$u=C$l[0],C$O=(C$l[3]||C$u.sourceWidth)/C$u.width,C$U=(C$l[4]||C$u.sourceHeight)/C$u.height,C$p=C$O*C$u.sourceWidth,C$_=C$U*C$u.sourceHeight,C$R=0<C$u.offsetX?C$u.offsetX:0,C$q=0<C$u.offsetY?C$u.offsetY:0,C$R*=C$O,C$q*=C$U,C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[1]-C$R,C$l[2]-C$q,C$p,C$_),C$f));break;case C$X._drawRect:case 13:C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[0],C$l[1],C$l[2],C$l[3]),C$c);break;case C$X._drawCircle:case C$X._fillCircle:case 14:C$P._addPointArrToRst(C$M,C$A._getBoundPointS(C$l[0]-C$l[2],C$l[1]-C$l[2],C$l[2]+C$l[2],C$l[2]+C$l[2]),C$c);break;case C$X._drawLine:case 20:C$P._tempPoints.length=0;var C$J;C$J=.5*C$l[5],C$l[0]==C$l[2]?C$P._tempPoints.push(C$l[0]+C$J,C$l[1],C$l[2]+C$J,C$l[3],C$l[0]-C$J,C$l[1],C$l[2]-C$J,C$l[3]):C$l[1]==C$l[3]?C$P._tempPoints.push(C$l[0],C$l[1]+C$J,C$l[2],C$l[3]+C$J,C$l[0],C$l[1]-C$J,C$l[2],C$l[3]-C$J):C$P._tempPoints.push(C$l[0],C$l[1],C$l[2],C$l[3]),C$P._addPointArrToRst(C$M,C$P._tempPoints,C$c);break;case C$X._drawCurves:case 22:C$P._addPointArrToRst(C$M,C$t.I.getBezierPoints(C$l[2]),C$c,C$l[0],C$l[1]);break;case C$X._drawPoly:case C$X._drawLines:case 18:C$P._addPointArrToRst(C$M,C$l[2],C$c,C$l[0],C$l[1]);break;case C$X._drawPath:case 19:C$P._addPointArrToRst(C$M,this._getPathPoints(C$l[2]),C$c,C$l[0],C$l[1]);break;case C$X._drawPie:case 15:C$P._addPointArrToRst(C$M,this._getPiePoints(C$l[0],C$l[1],C$l[2],C$l[3],C$l[4]),C$c)}return 200<C$M.length?C$M=C$j.copyArray(C$M,C$A._getWrapRec(C$M)._getBoundPoints()):8<C$M.length&&(C$M=C$r.scanPList(C$M)),C$M},C$s._switchMatrix=function(C$s,C$M){C$M.concat(C$s),C$M.copyTo(C$s)},C$s._getPiePoints=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$P._tempPoints;C$P._tempPoints.length=0,C$c.push(C$s,C$M);var C$l=(C$x-C$X)%(2*Math.PI)/10,C$u=NaN,C$E=C$X;for(C$u=0;C$u<=10;C$u++)C$c.push(C$s+C$T*Math.cos(C$E),C$M+C$T*Math.sin(C$E)),C$E+=C$l;return C$c},C$s._getPathPoints=function(C$s){var C$M,C$T,C$X=0,C$x=C$P._tempPoints;for(C$x.length=0,C$M=C$s.length,C$X=0;C$X<C$M;C$X++)1<(C$T=C$s[C$X]).length&&(C$x.push(C$T[1],C$T[2]),3<C$T.length&&C$x.push(C$T[3],C$T[4]));return C$x},C$P._addPointArrToRst=function(C$s,C$M,C$T,C$X,C$x){void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0);var C$c,C$l=0;for(C$c=C$M.length,C$l=0;C$l<C$c;C$l+=2)C$P._addPointToRst(C$s,C$M[C$l]+C$X,C$M[C$l+1]+C$x,C$T)},C$P._addPointToRst=function(C$s,C$M,C$T,C$X){var C$x=C$k.TEMP;C$x.setTo(C$M||0,C$T||0),C$X.transformPoint(C$x),C$s.push(C$x.x,C$x.y)},C$P._tempPoints=[],C$P._tempMatrixArrays=[],C$P._tempCmds=[],C$E(C$P,["_tempMatrix",function(){return this._tempMatrix=new C$z},"_initMatrix",function(){return this._initMatrix=new C$z}]),C$P}(),C$c=function(){function C$s(){}C$U(C$s,"laya.events.Event");var C$M=C$s.prototype;return C$M.setTo=function(C$s,C$M,C$T){return this.type=C$s,this.currentTarget=C$M,this.target=C$T,this},C$M.stopPropagation=function(){this._stoped=!0},C$q(0,C$M,"stageY",function(){return C$w.stage.mouseY}),C$q(0,C$M,"charCode",function(){return this.nativeEvent.charCode}),C$q(0,C$M,"touches",function(){var C$s=this.nativeEvent.touches;if(C$s)for(var C$M=C$w.stage,C$T=0,C$X=C$s.length;C$T<C$X;C$T++){var C$x=C$s[C$T],C$c=C$k.TEMP;C$c.setTo(C$x.clientX,C$x.clientY),C$M._canvasTransform.invertTransformPoint(C$c),C$M.transform.invertTransformPoint(C$c),C$x.stageX=C$c.x,C$x.stageY=C$c.y}return C$s}),C$q(0,C$M,"keyLocation",function(){return this.nativeEvent.keyLocation}),C$q(0,C$M,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),C$q(0,C$M,"altKey",function(){return this.nativeEvent.altKey}),C$q(0,C$M,"shiftKey",function(){return this.nativeEvent.shiftKey}),C$q(0,C$M,"stageX",function(){return C$w.stage.mouseX}),C$s.EMPTY=new C$s,C$s.MOUSE_DOWN="mousedown",C$s.MOUSE_UP="mouseup",C$s.CLICK="click",C$s.RIGHT_MOUSE_DOWN="rightmousedown",C$s.RIGHT_MOUSE_UP="rightmouseup",C$s.RIGHT_CLICK="rightclick",C$s.MOUSE_MOVE="mousemove",C$s.MOUSE_OVER="mouseover",C$s.MOUSE_OUT="mouseout",C$s.MOUSE_WHEEL="mousewheel",C$s.ROLL_OVER="mouseover",C$s.ROLL_OUT="mouseout",C$s.DOUBLE_CLICK="doubleclick",C$s.CHANGE="change",C$s.CHANGED="changed",C$s.RESIZE="resize",C$s.ADDED="added",C$s.REMOVED="removed",C$s.DISPLAY="display",C$s.UNDISPLAY="undisplay",C$s.ERROR="error",C$s.COMPLETE="complete",C$s.LOADED="loaded",C$s.INITED="inited",C$s.PROGRESS="progress",C$s.INPUT="input",C$s.RENDER="render",C$s.OPEN="open",C$s.MESSAGE="message",C$s.CLOSE="close",C$s.KEY_DOWN="keydown",C$s.KEY_PRESS="keypress",C$s.KEY_UP="keyup",C$s.FRAME="enterframe",C$s.DRAG_START="dragstart",C$s.DRAG_MOVE="dragmove",C$s.DRAG_END="dragend",C$s.ENTER="enter",C$s.SELECT="select",C$s.BLUR="blur",C$s.FOCUS="focus",C$s.VISIBILITY_CHANGE="visibilitychange",C$s.FOCUS_CHANGE="focuschange",C$s.PLAYED="played",C$s.PAUSED="paused",C$s.STOPPED="stopped",C$s.START="start",C$s.END="end",C$s.ENABLE_CHANGED="enablechanged",C$s.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",C$s.COMPONENT_ADDED="componentadded",C$s.COMPONENT_REMOVED="componentremoved",C$s.LAYER_CHANGED="layerchanged",C$s.HIERARCHY_LOADED="hierarchyloaded",C$s.RECOVERED="recovered",C$s.RELEASED="released",C$s.LINK="link",C$s.LABEL="label",C$s.FULL_SCREEN_CHANGE="fullscreenchange",C$s.DEVICE_LOST="devicelost",C$s.MESH_CHANGED="meshchanged",C$s.MATERIAL_CHANGED="materialchanged",C$s.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",C$s.ANIMATION_CHANGED="animationchanged",C$s.TRIGGER_ENTER="triggerenter",C$s.TRIGGER_STAY="triggerstay",C$s.TRIGGER_EXIT="triggerexit",C$s.TRAIL_FILTER_CHANGE="trailfilterchange",C$s.DOMINO_FILTER_CHANGE="dominofilterchange",C$s}(),C$p=(function(){function C$s(){}C$U(C$s,"laya.events.Keyboard"),C$s.NUMBER_0=48,C$s.NUMBER_1=49,C$s.NUMBER_2=50,C$s.NUMBER_3=51,C$s.NUMBER_4=52,C$s.NUMBER_5=53,C$s.NUMBER_6=54,C$s.NUMBER_7=55,C$s.NUMBER_8=56,C$s.NUMBER_9=57,C$s.A=65,C$s.B=66,C$s.C=67,C$s.D=68,C$s.E=69,C$s.F=70,C$s.G=71,C$s.H=72,C$s.I=73,C$s.J=74,C$s.K=75,C$s.L=76,C$s.M=77,C$s.N=78,C$s.O=79,C$s.P=80,C$s.Q=81,C$s.R=82,C$s.S=83,C$s.T=84,C$s.U=85,C$s.V=86,C$s.W=87,C$s.X=88,C$s.Y=89,C$s.Z=90,C$s.F1=112,C$s.F2=113,C$s.F3=114,C$s.F4=115,C$s.F5=116,C$s.F6=117,C$s.F7=118,C$s.F8=119,C$s.F9=120,C$s.F10=121,C$s.F11=122,C$s.F12=123,C$s.F13=124,C$s.F14=125,C$s.F15=126,C$s.NUMPAD=21,C$s.NUMPAD_0=96,C$s.NUMPAD_1=97,C$s.NUMPAD_2=98,C$s.NUMPAD_3=99,C$s.NUMPAD_4=100,C$s.NUMPAD_5=101,C$s.NUMPAD_6=102,C$s.NUMPAD_7=103,C$s.NUMPAD_8=104,C$s.NUMPAD_9=105,C$s.NUMPAD_ADD=107,C$s.NUMPAD_DECIMAL=110,C$s.NUMPAD_DIVIDE=111,C$s.NUMPAD_ENTER=108,C$s.NUMPAD_MULTIPLY=106,C$s.NUMPAD_SUBTRACT=109,C$s.SEMICOLON=186,C$s.EQUAL=187,C$s.COMMA=188,C$s.MINUS=189,C$s.PERIOD=190,C$s.SLASH=191,C$s.BACKQUOTE=192,C$s.LEFTBRACKET=219,C$s.BACKSLASH=220,C$s.RIGHTBRACKET=221,C$s.QUOTE=222,C$s.ALTERNATE=18,C$s.BACKSPACE=8,C$s.CAPS_LOCK=20,C$s.COMMAND=15,C$s.CONTROL=17,C$s.DELETE=46,C$s.ENTER=13,C$s.ESCAPE=27,C$s.PAGE_UP=33,C$s.PAGE_DOWN=34,C$s.END=35,C$s.HOME=36,C$s.LEFT=37,C$s.UP=38,C$s.RIGHT=39,C$s.DOWN=40,C$s.SHIFT=16,C$s.SPACE=32,C$s.TAB=9,C$s.INSERT=45}(),function(){function C$x(){}return C$U(C$x,"laya.events.KeyBoardManager"),C$x.__init__=function(){C$x._addEvent("keydown"),C$x._addEvent("keypress"),C$x._addEvent("keyup")},C$x._addEvent=function(C$M){C$e.document.addEventListener(C$M,function(C$s){laya.events.KeyBoardManager._dispatch(C$s,C$M)},!0)},C$x._dispatch=function(C$s,C$M){if(C$x.enabled){C$x._event._stoped=!1,C$x._event.nativeEvent=C$s,C$x._event.keyCode=C$s.keyCode||C$s.which||C$s.charCode,"keydown"===C$M?C$x._pressKeys[C$x._event.keyCode]=!0:"keyup"===C$M&&(C$x._pressKeys[C$x._event.keyCode]=null);for(var C$T=C$w.stage.focus&&null!=C$w.stage.focus.event&&C$w.stage.focus.displayedInStage?C$w.stage.focus:C$w.stage,C$X=C$T;C$X;)C$X.event(C$M,C$x._event.setTo(C$M,C$X,C$T)),C$X=C$X.parent}},C$x.hasKeyDown=function(C$s){return C$x._pressKeys[C$s]},C$x._pressKeys={},C$x.enabled=!0,C$E(C$x,["_event",function(){return this._event=new C$c}]),C$x}()),C$G=(function(){function C$s(){}C$U(C$s,"laya.events.KeyLocation"),C$s.STANDARD=0,C$s.LEFT=1,C$s.RIGHT=2,C$s.NUM_PAD=3}(),function(){function C$O(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=C$e.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new C$c,this._matrix=new C$z,this._point=new C$k,this._rect=new C$A,this._prePoint=new C$k,this._curTouchID=NaN}C$U(C$O,"laya.events.MouseManager");var C$s=C$O.prototype;return C$s.__init__=function(C$s,C$M){var C$T=this;this._stage=C$s;var C$X=this,C$x=this._eventList;C$M.oncontextmenu=function(C$s){if(C$O.enabled)return!1},C$M.addEventListener("mousedown",function(C$s){C$O.enabled&&(C$e.onIE||C$s.preventDefault(),C$x.push(C$s),C$X.mouseDownTime=C$e.now())}),C$M.addEventListener("mouseup",function(C$s){C$O.enabled&&(C$s.preventDefault(),C$x.push(C$s),C$X.mouseDownTime=-C$e.now())},!0),C$M.addEventListener("mousemove",function(C$s){if(C$O.enabled){C$s.preventDefault();var C$M=C$e.now();if(C$M-C$X._lastMoveTimer<10)return;C$X._lastMoveTimer=C$M,C$x.push(C$s)}},!0),C$M.addEventListener("mouseout",function(C$s){C$O.enabled&&C$x.push(C$s)}),C$M.addEventListener("mouseover",function(C$s){C$O.enabled&&C$x.push(C$s)}),C$M.addEventListener("touchstart",function(C$s){C$O.enabled&&(C$x.push(C$s),C$O._isFirstTouch||C$rs.isInputting||C$s.preventDefault(),C$X.mouseDownTime=C$e.now())}),C$M.addEventListener("touchend",function(C$s){C$O.enabled?(C$O._isFirstTouch||C$rs.isInputting||C$s.preventDefault(),C$O._isFirstTouch=!1,C$x.push(C$s),C$X.mouseDownTime=-C$e.now()):C$T._curTouchID=NaN},!0),C$M.addEventListener("touchmove",function(C$s){C$O.enabled&&(C$s.preventDefault(),C$x.push(C$s))},!0),C$M.addEventListener("touchcancel",function(C$s){C$O.enabled?(C$s.preventDefault(),C$x.push(C$s)):C$T._curTouchID=NaN},!0),C$M.addEventListener("mousewheel",function(C$s){C$O.enabled&&C$x.push(C$s)}),C$M.addEventListener("DOMMouseScroll",function(C$s){C$O.enabled&&C$x.push(C$s)})},C$s.initEvent=function(C$s,C$M){var C$T;this._event._stoped=!1,this._event.nativeEvent=C$M||C$s,this._target=null,this._point.setTo(C$s.pageX||C$s.clientX,C$s.pageY||C$s.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=C$s.identifier||0,this._tTouchID=this._event.touchId,(C$T=C$g.I._event)._stoped=!1,C$T.nativeEvent=this._event.nativeEvent,C$T.touchId=this._event.touchId},C$s.checkMouseWheel=function(C$s){this._event.delta=C$s.wheelDelta?.025*C$s.wheelDelta:-C$s.detail;for(var C$M=C$g.I.getLastOvers(),C$T=0,C$X=C$M.length;C$T<C$X;C$T++){var C$x=C$M[C$T];C$x.event("mousewheel",this._event.setTo("mousewheel",C$x,this._target))}},C$s.onMouseMove=function(C$s){C$g.I.onMouseMove(C$s,this._tTouchID)},C$s.onMouseDown=function(C$s){if(C$rs.isInputting&&C$w.stage.focus&&C$w.stage.focus.focus&&!C$w.stage.focus.contains(this._target)){var C$M=C$w.stage.focus._tf||C$w.stage.focus,C$T=C$s._tf||C$s;C$T instanceof laya.display.Input&&C$T.multiline==C$M.multiline?C$M._focusOut():C$M.focus=!1}C$g.I.onMouseDown(C$s,this._tTouchID,this._isLeftMouse)},C$s.onMouseUp=function(C$s){C$g.I.onMouseUp(C$s,this._tTouchID,this._isLeftMouse)},C$s.check=function(C$s,C$M,C$T,C$X){this._point.setTo(C$M,C$T),C$s.fromParentPoint(this._point),C$M=this._point.x,C$T=this._point.y;var C$x=C$s.scrollRect;if(C$x&&(this._rect.setTo(C$x.x,C$x.y,C$x.width,C$x.height),!this._rect.contains(C$M,C$T)))return!1;if(!this.disableMouseEvent){if(C$s.hitTestPrior&&!C$s.mouseThrough&&!this.hitTest(C$s,C$M,C$T))return!1;for(var C$c=C$s._childs.length-1;-1<C$c;C$c--){var C$l=C$s._childs[C$c];if(!C$l.destroyed&&C$l.mouseEnabled&&C$l.visible&&this.check(C$l,C$M,C$T,C$X))return!0}}var C$u=!(!C$s.hitTestPrior||C$s.mouseThrough||this.disableMouseEvent)||this.hitTest(C$s,C$M,C$T);return C$u?(this._target=C$s,C$X.call(this,C$s)):C$X===this.onMouseUp&&C$s===this._stage&&(this._target=this._stage,C$X.call(this,this._target)),C$u},C$s.hitTest=function(C$s,C$M,C$T){var C$X=!1;if(C$s.scrollRect&&(C$M-=C$s.scrollRect.x,C$T-=C$s.scrollRect.y),C$s.hitArea instanceof laya.utils.HitArea)return C$s.hitArea.isHit(C$M,C$T);if(0<C$s.width&&0<C$s.height||C$s.mouseThrough||C$s.hitArea)if(C$s.mouseThrough)C$X=C$s.getGraphicBounds().contains(C$M,C$T);else{var C$x=this._rect;C$s.hitArea?C$x=C$s.hitArea:C$x.setTo(0,0,C$s.width,C$s.height),C$X=C$x.contains(C$M,C$T)}return C$X},C$s.runEvent=function(){var C$s=this._eventList.length;if(C$s){this.mouseEventTime=C$e.now();var C$M,C$T=0,C$X=0,C$x=0;try{for(;C$T<C$s;){var C$c=this._eventList[C$T];switch("mousemove"!==C$c.type&&(this._prePoint.x=this._prePoint.y=-1e6),C$c.type){case"mousedown":this._touchIDs[0]=this._id++,C$O._isTouchRespond?C$O._isTouchRespond=!1:(this._isLeftMouse=0===C$c.button,this.initEvent(C$c),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===C$c.button,this.initEvent(C$c),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-C$c.clientX)+Math.abs(this._prePoint.y-C$c.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=C$c.clientX,this._prePoint.y=C$c.clientY,this.initEvent(C$c),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":C$O._isTouchRespond=!0,this._isLeftMouse=!0;var C$l=C$c.changedTouches;for(C$X=0,C$x=C$l.length;C$X<C$x;C$X++)C$M=C$l[C$X],(C$O.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=C$M.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[C$M.identifier]=this._id++,this.initEvent(C$M,C$c),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":C$O._isTouchRespond=!0,this._isLeftMouse=!0;var C$u=C$c.changedTouches;for(C$X=0,C$x=C$u.length;C$X<C$x;C$X++)if(C$M=C$u[C$X],C$O.multiTouchEnabled||C$M.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(C$M,C$c);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var C$E=C$c.changedTouches;for(C$X=0,C$x=C$E.length;C$X<C$x;C$X++)C$M=C$E[C$X],(C$O.multiTouchEnabled||C$M.identifier==this._curTouchID)&&(this.initEvent(C$M,C$c),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(C$c);break;case"mouseout":C$g.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}C$T++}}catch(C$s){throw this._eventList.length=0,C$s}this._eventList.length=0}},C$O.enabled=!0,C$O.multiTouchEnabled=!0,C$O._isTouchRespond=!1,C$O._isFirstTouch=!0,C$E(C$O,["instance",function(){return this.instance=new C$O}]),C$O}()),C$g=function(){function C$q(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new C$c}C$U(C$q,"laya.events.TouchManager");var C$s=C$q.prototype;return C$s._clearTempArrs=function(){C$q._oldArr.length=0,C$q._newArr.length=0,C$q._tEleArr.length=0},C$s.getTouchFromArr=function(C$s,C$M){var C$T,C$X,C$x=0;for(C$T=C$M.length,C$x=0;C$x<C$T;C$x++)if((C$X=C$M[C$x]).id==C$s)return C$X;return null},C$s.removeTouchFromArr=function(C$s,C$M){var C$T=0;for(C$T=C$M.length-1;0<=C$T;C$T--)C$M[C$T].id==C$s&&C$M.splice(C$T,1)},C$s.createTouchO=function(C$s,C$M){var C$T;return(C$T=C$$.getItem("TouchData")||{}).id=C$M,C$T.tar=C$s,C$T},C$s.onMouseDown=function(C$s,C$M,C$T){var C$X,C$x,C$c,C$l;(void 0===C$T&&(C$T=!1),this.enable)&&(C$X=this.getTouchFromArr(C$M,this.preOvers),C$c=this.getEles(C$s,null,C$q._tEleArr),C$X?C$X.tar=C$s:(C$x=this.createTouchO(C$s,C$M),this.preOvers.push(C$x)),C$e.onMobile&&this.sendEvents(C$c,"mouseover",C$M),C$l=C$T?this.preDowns:this.preRightDowns,(C$X=this.getTouchFromArr(C$M,C$l))?C$X.tar=C$s:(C$x=this.createTouchO(C$s,C$M),C$l.push(C$x)),this.sendEvents(C$c,C$T?"mousedown":"rightmousedown",C$M),this._clearTempArrs())},C$s.sendEvents=function(C$s,C$M,C$T){void 0===C$T&&(C$T=0);var C$X,C$x,C$c,C$l=0;for(C$X=C$s.length,this._event._stoped=!1,C$x=C$s[0],C$l=0;C$l<C$X;C$l++){if((C$c=C$s[C$l]).destroyed)return;if(C$c.event(C$M,this._event.setTo(C$M,C$c,C$x)),this._event._stoped)break}},C$s.getEles=function(C$s,C$M,C$T){for(C$T?C$T.length=0:C$T=[];C$s&&C$s!=C$M;)C$T.push(C$s),C$s=C$s.parent;return C$T},C$s.checkMouseOutAndOverOfMove=function(C$s,C$M,C$T){if(void 0===C$T&&(C$T=0),C$M!=C$s){var C$X,C$x,C$c=0,C$l=0;if(C$M.contains(C$s))C$x=this.getEles(C$s,C$M,C$q._tEleArr),this.sendEvents(C$x,"mouseover",C$T);else if(C$s.contains(C$M))C$x=this.getEles(C$M,C$s,C$q._tEleArr),this.sendEvents(C$x,"mouseout",C$T);else{var C$u,C$E;(C$x=C$q._tEleArr).length=0,C$u=this.getEles(C$M,null,C$q._oldArr),C$E=this.getEles(C$s,null,C$q._newArr),C$l=C$u.length;var C$O=0;for(C$c=0;C$c<C$l;C$c++){if(C$X=C$u[C$c],0<=(C$O=C$E.indexOf(C$X))){C$E.splice(C$O,C$E.length-C$O);break}C$x.push(C$X)}0<C$x.length&&this.sendEvents(C$x,"mouseout",C$T),0<C$E.length&&this.sendEvents(C$E,"mouseover",C$T)}}},C$s.onMouseMove=function(C$s,C$M){var C$T,C$X;this.enable&&((C$T=this.getTouchFromArr(C$M,this.preOvers))?(this.checkMouseOutAndOverOfMove(C$s,C$T.tar),C$T.tar=C$s,C$X=this.getEles(C$s,null,C$q._tEleArr)):(C$X=this.getEles(C$s,null,C$q._tEleArr),this.sendEvents(C$X,"mouseover",C$M),this.preOvers.push(this.createTouchO(C$s,C$M))),this.sendEvents(C$X,"mousemove",C$M),this._clearTempArrs())},C$s.getLastOvers=function(){return(C$q._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,C$q._tEleArr):(C$q._tEleArr.push(C$w.stage),C$q._tEleArr)},C$s.stageMouseOut=function(){var C$s;C$s=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(C$s,"mouseout",0)},C$s.onMouseUp=function(C$s,C$M,C$T){if(void 0===C$T&&(C$T=!1),this.enable){var C$X,C$x,C$c,C$l,C$u,C$E,C$O=0,C$U=0,C$p=C$e.onMobile;if(C$x=this.getEles(C$s,null,C$q._tEleArr),this.sendEvents(C$x,C$T?"mouseup":"rightmouseup",C$M),C$E=C$T?this.preDowns:this.preRightDowns,C$X=this.getTouchFromArr(C$M,C$E)){var C$_,C$R=C$e.now();if(C$_=C$R-this._lastClickTime<300,this._lastClickTime=C$R,C$s==C$X.tar)C$u=C$x;else for(C$c=this.getEles(C$X.tar,null,C$q._oldArr),(C$u=C$q._newArr).length=0,C$U=C$c.length,C$O=0;C$O<C$U;C$O++)C$l=C$c[C$O],0<=C$x.indexOf(C$l)&&C$u.push(C$l);0<C$u.length&&this.sendEvents(C$u,C$T?"click":"rightclick",C$M),C$T&&C$_&&this.sendEvents(C$u,"doubleclick",C$M),this.removeTouchFromArr(C$M,C$E),C$X.tar=null,C$$.recover("TouchData",C$X)}else;(C$X=this.getTouchFromArr(C$M,this.preOvers))&&C$p&&((C$u=this.getEles(C$X.tar,null,C$u))&&0<C$u.length&&this.sendEvents(C$u,"mouseout",C$M),this.removeTouchFromArr(C$M,this.preOvers),C$X.tar=null,C$$.recover("TouchData",C$X)),this._clearTempArrs()}},C$q._oldArr=[],C$q._newArr=[],C$q._tEleArr=[],C$E(C$q,["I",function(){return this.I=new C$q}]),C$q}(),C$f=function(){function C$s(){this._action=null}C$U(C$s,"laya.filters.Filter");var C$M=C$s.prototype;return C$w.imps(C$M,{"laya.filters.IFilter":!0}),C$M.callNative=function(C$s){},C$q(0,C$M,"type",function(){return-1}),C$q(0,C$M,"action",function(){return this._action}),C$s.BLUR=16,C$s.COLOR=32,C$s.GLOW=8,C$s._filterStart=null,C$s._filterEnd=null,C$s._EndTarget=null,C$s._recycleScope=null,C$s._filter=null,C$s._useSrc=null,C$s._endSrc=null,C$s._useOut=null,C$s._endOut=null,C$s}(),C$P=function(){function C$s(){this.data=null}C$U(C$s,"laya.filters.ColorFilterAction");var C$M=C$s.prototype;return C$w.imps(C$M,{"laya.filters.IFilterAction":!0}),C$M.apply=function(C$s){var C$M=C$s.ctx.ctx,C$T=C$s.ctx.ctx.canvas;if(0==C$T.width||0==C$T.height)return C$T;for(var C$X,C$x=C$M.getImageData(0,0,C$T.width,C$T.height),C$c=C$x.data,C$l=0,C$u=C$c.length;C$l<C$u;C$l+=4)C$X=this.getColor(C$c[C$l],C$c[C$l+1],C$c[C$l+2],C$c[C$l+3]),0!=C$c[C$l+3]&&(C$c[C$l]=C$X[0],C$c[C$l+1]=C$X[1],C$c[C$l+2]=C$X[2],C$c[C$l+3]=C$X[3]);return C$M.putImageData(C$x,0,0),C$s},C$M.getColor=function(C$s,C$M,C$T,C$X){var C$x=[];if(this.data._mat&&this.data._alpha){var C$c=this.data._mat,C$l=this.data._alpha;C$x[0]=C$c[0]*C$s+C$c[1]*C$M+C$c[2]*C$T+C$c[3]*C$X+C$l[0],C$x[1]=C$c[4]*C$s+C$c[5]*C$M+C$c[6]*C$T+C$c[7]*C$X+C$l[1],C$x[2]=C$c[8]*C$s+C$c[9]*C$M+C$c[10]*C$T+C$c[11]*C$X+C$l[2],C$x[3]=C$c[12]*C$s+C$c[13]*C$M+C$c[14]*C$T+C$c[15]*C$X+C$l[3]}return C$x},C$s}(),C$t=(function(){function C$s(){}C$U(C$s,"laya.maths.Arith"),C$s.formatR=function(C$s){return C$s>Math.PI&&(C$s-=2*Math.PI),C$s<-Math.PI&&(C$s+=2*Math.PI),C$s},C$s.isPOT=function(C$s,C$M){return 0<C$s&&0==(C$s&C$s-1)&&0<C$M&&0==(C$M&C$M-1)},C$s.setMatToArray=function(C$s,C$M){C$s.a,C$s.b,C$s.c,C$s.d,C$s.tx,C$s.ty,C$M[0]=C$s.a,C$M[1]=C$s.b,C$M[4]=C$s.c,C$M[5]=C$s.d,C$M[12]=C$s.tx,C$M[13]=C$s.ty}}(),function(){function C$s(){this._controlPoints=[new C$k,new C$k,new C$k],this._calFun=this.getPoint2}C$U(C$s,"laya.maths.Bezier");var C$M=C$s.prototype;return C$M._switchPoint=function(C$s,C$M){var C$T=this._controlPoints.shift();C$T.setTo(C$s,C$M),this._controlPoints.push(C$T)},C$M.getPoint2=function(C$s,C$M){var C$T=this._controlPoints[0],C$X=this._controlPoints[1],C$x=this._controlPoints[2],C$c=Math.pow(1-C$s,2)*C$T.x+2*C$s*(1-C$s)*C$X.x+Math.pow(C$s,2)*C$x.x,C$l=Math.pow(1-C$s,2)*C$T.y+2*C$s*(1-C$s)*C$X.y+Math.pow(C$s,2)*C$x.y;C$M.push(C$c,C$l)},C$M.getPoint3=function(C$s,C$M){var C$T=this._controlPoints[0],C$X=this._controlPoints[1],C$x=this._controlPoints[2],C$c=this._controlPoints[3],C$l=Math.pow(1-C$s,3)*C$T.x+3*C$X.x*C$s*(1-C$s)*(1-C$s)+3*C$x.x*C$s*C$s*(1-C$s)+C$c.x*Math.pow(C$s,3),C$u=Math.pow(1-C$s,3)*C$T.y+3*C$X.y*C$s*(1-C$s)*(1-C$s)+3*C$x.y*C$s*C$s*(1-C$s)+C$c.y*Math.pow(C$s,3);C$M.push(C$l,C$u)},C$M.insertPoints=function(C$s,C$M){var C$T,C$X=NaN;for(C$T=1/(C$s=0<C$s?C$s:5),C$X=0;C$X<=1;C$X+=C$T)this._calFun(C$X,C$M)},C$M.getBezierPoints=function(C$s,C$M,C$T){void 0===C$M&&(C$M=5),void 0===C$T&&(C$T=2);var C$X,C$x,C$c=0;if((C$X=C$s.length)<2*(C$T+1))return[];switch(C$x=[],C$T){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=C$T;)this._controlPoints.push(new C$k);for(C$c=0;C$c<2*C$T;C$c+=2)this._switchPoint(C$s[C$c],C$s[C$c+1]);for(C$c=2*C$T;C$c<C$X;C$c+=2)this._switchPoint(C$s[C$c],C$s[C$c+1]),C$c/2%C$T==0&&this.insertPoints(C$M,C$x);return C$x},C$E(C$s,["I",function(){return this.I=new C$s}]),C$s}()),C$r=function(){function C$O(){}return C$U(C$O,"laya.maths.GrahamScan"),C$O.multiply=function(C$s,C$M,C$T){return(C$s.x-C$T.x)*(C$M.y-C$T.y)-(C$M.x-C$T.x)*(C$s.y-C$T.y)},C$O.dis=function(C$s,C$M){return(C$s.x-C$M.x)*(C$s.x-C$M.x)+(C$s.y-C$M.y)*(C$s.y-C$M.y)},C$O._getPoints=function(C$s,C$M,C$T){for(void 0===C$M&&(C$M=!1),C$O._mPointList||(C$O._mPointList=[]);C$O._mPointList.length<C$s;)C$O._mPointList.push(new C$k);return C$T||(C$T=[]),C$T.length=0,C$M?C$O.getFrom(C$T,C$O._mPointList,C$s):C$O.getFromR(C$T,C$O._mPointList,C$s),C$T},C$O.getFrom=function(C$s,C$M,C$T){var C$X=0;for(C$X=0;C$X<C$T;C$X++)C$s.push(C$M[C$X]);return C$s},C$O.getFromR=function(C$s,C$M,C$T){var C$X=0;for(C$X=0;C$X<C$T;C$X++)C$s.push(C$M.pop());return C$s},C$O.pListToPointList=function(C$s,C$M){void 0===C$M&&(C$M=!1);var C$T=0,C$X=C$s.length/2,C$x=C$O._getPoints(C$X,C$M,C$O._tempPointList);for(C$T=0;C$T<C$X;C$T++)C$x[C$T].setTo(C$s[C$T+C$T],C$s[C$T+C$T+1]);return C$x},C$O.pointListToPlist=function(C$s){var C$M,C$T=0,C$X=C$s.length,C$x=C$O._temPList;for(C$T=C$x.length=0;C$T<C$X;C$T++)C$M=C$s[C$T],C$x.push(C$M.x,C$M.y);return C$x},C$O.scanPList=function(C$s){return C$j.copyArray(C$s,C$O.pointListToPlist(C$O.scan(C$O.pListToPointList(C$s,!0))))},C$O.scan=function(C$s){var C$M,C$T,C$X,C$x=0,C$c=0,C$l=0,C$u=C$s.length,C$E={};for((C$T=C$O._temArr).length=0,C$x=(C$u=C$s.length)-1;0<=C$x;C$x--)C$X=(C$M=C$s[C$x]).x+"_"+C$M.y,C$E.hasOwnProperty(C$X)||(C$E[C$X]=!0,C$T.push(C$M));for(C$u=C$T.length,C$j.copyArray(C$s,C$T),C$x=1;C$x<C$u;C$x++)(C$s[C$x].y<C$s[C$l].y||C$s[C$x].y==C$s[C$l].y&&C$s[C$x].x<C$s[C$l].x)&&(C$l=C$x);for(C$M=C$s[0],C$s[0]=C$s[C$l],C$s[C$l]=C$M,C$x=1;C$x<C$u-1;C$x++){for(C$c=(C$l=C$x)+1;C$c<C$u;C$c++)(0<C$O.multiply(C$s[C$c],C$s[C$l],C$s[0])||0==C$O.multiply(C$s[C$c],C$s[C$l],C$s[0])&&C$O.dis(C$s[0],C$s[C$c])<C$O.dis(C$s[0],C$s[C$l]))&&(C$l=C$c);C$M=C$s[C$x],C$s[C$x]=C$s[C$l],C$s[C$l]=C$M}if((C$T=C$O._temArr).length=0,C$s.length<3)return C$j.copyArray(C$T,C$s);for(C$T.push(C$s[0],C$s[1],C$s[2]),C$x=3;C$x<C$u;C$x++){for(;2<=C$T.length&&0<=C$O.multiply(C$s[C$x],C$T[C$T.length-1],C$T[C$T.length-2]);)C$T.pop();C$s[C$x]&&C$T.push(C$s[C$x])}return C$T},C$O._mPointList=null,C$O._tempPointList=[],C$O._temPList=[],C$O._temArr=[],C$O}(),C$N=function(){function C$x(){}return C$U(C$x,"laya.maths.MathUtil"),C$x.subtractVector3=function(C$s,C$M,C$T){C$T[0]=C$s[0]-C$M[0],C$T[1]=C$s[1]-C$M[1],C$T[2]=C$s[2]-C$M[2]},C$x.lerp=function(C$s,C$M,C$T){return C$s*(1-C$T)+C$M*C$T},C$x.scaleVector3=function(C$s,C$M,C$T){C$T[0]=C$s[0]*C$M,C$T[1]=C$s[1]*C$M,C$T[2]=C$s[2]*C$M},C$x.lerpVector3=function(C$s,C$M,C$T,C$X){var C$x=C$s[0],C$c=C$s[1],C$l=C$s[2];C$X[0]=C$x+C$T*(C$M[0]-C$x),C$X[1]=C$c+C$T*(C$M[1]-C$c),C$X[2]=C$l+C$T*(C$M[2]-C$l)},C$x.lerpVector4=function(C$s,C$M,C$T,C$X){var C$x=C$s[0],C$c=C$s[1],C$l=C$s[2],C$u=C$s[3];C$X[0]=C$x+C$T*(C$M[0]-C$x),C$X[1]=C$c+C$T*(C$M[1]-C$c),C$X[2]=C$l+C$T*(C$M[2]-C$l),C$X[3]=C$u+C$T*(C$M[3]-C$u)},C$x.slerpQuaternionArray=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u,C$E,C$O,C$U,C$p,C$_=C$s[C$M+0],C$R=C$s[C$M+1],C$q=C$s[C$M+2],C$G=C$s[C$M+3],C$g=C$T[C$X+0],C$f=C$T[C$X+1],C$J=C$T[C$X+2],C$P=C$T[C$X+3];return(C$E=C$_*C$g+C$R*C$f+C$q*C$J+C$G*C$P)<0&&(C$E=-C$E,C$g=-C$g,C$f=-C$f,C$J=-C$J,C$P=-C$P),C$p=1e-6<1-C$E?(C$u=Math.acos(C$E),C$O=Math.sin(C$u),C$U=Math.sin((1-C$x)*C$u)/C$O,Math.sin(C$x*C$u)/C$O):(C$U=1-C$x,C$x),C$c[C$l+0]=C$U*C$_+C$p*C$g,C$c[C$l+1]=C$U*C$R+C$p*C$f,C$c[C$l+2]=C$U*C$q+C$p*C$J,C$c[C$l+3]=C$U*C$G+C$p*C$P,C$c},C$x.getRotation=function(C$s,C$M,C$T,C$X){return Math.atan2(C$X-C$M,C$T-C$s)/Math.PI*180},C$x.sortBigFirst=function(C$s,C$M){return C$s==C$M?0:C$s<C$M?1:-1},C$x.sortSmallFirst=function(C$s,C$M){return C$s==C$M?0:C$s<C$M?-1:1},C$x.sortNumBigFirst=function(C$s,C$M){return parseFloat(C$M)-parseFloat(C$s)},C$x.sortNumSmallFirst=function(C$s,C$M){return parseFloat(C$s)-parseFloat(C$M)},C$x.sortByKey=function(C$T,C$s,C$M){var C$X;return void 0===C$s&&(C$s=!1),void 0===C$M&&(C$M=!0),C$X=C$s?C$M?C$x.sortNumBigFirst:C$x.sortBigFirst:C$M?C$x.sortNumSmallFirst:C$x.sortSmallFirst,function(C$s,C$M){return C$X(C$s[C$T],C$M[C$T])}},C$x}(),C$z=function(){function C$T(C$s,C$M,C$T,C$X,C$x,C$c){this.inPool=!1,this.bTransform=!1,void 0===C$s&&(C$s=1),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=1),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=0),this.a=C$s,this.b=C$M,this.c=C$T,this.d=C$X,this.tx=C$x,this.ty=C$c,this._checkTransform()}C$U(C$T,"laya.maths.Matrix");var C$s=C$T.prototype;return C$s.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},C$s._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},C$s.setTranslate=function(C$s,C$M){return this.tx=C$s,this.ty=C$M,this},C$s.translate=function(C$s,C$M){return this.tx+=C$s,this.ty+=C$M,this},C$s.scale=function(C$s,C$M){this.a*=C$s,this.d*=C$M,this.c*=C$s,this.b*=C$M,this.tx*=C$s,this.ty*=C$M,this.bTransform=!0},C$s.rotate=function(C$s){var C$M=Math.cos(C$s),C$T=Math.sin(C$s),C$X=this.a,C$x=this.c,C$c=this.tx;this.a=C$X*C$M-this.b*C$T,this.b=C$X*C$T+this.b*C$M,this.c=C$x*C$M-this.d*C$T,this.d=C$x*C$T+this.d*C$M,this.tx=C$c*C$M-this.ty*C$T,this.ty=C$c*C$T+this.ty*C$M,this.bTransform=!0},C$s.skew=function(C$s,C$M){var C$T=Math.tan(C$s),C$X=Math.tan(C$M),C$x=this.a,C$c=this.b;return this.a+=C$X*this.c,this.b+=C$X*this.d,this.c+=C$T*C$x,this.d+=C$T*C$c,this},C$s.invertTransformPoint=function(C$s){var C$M=this.a,C$T=this.b,C$X=this.c,C$x=this.d,C$c=this.tx,C$l=C$M*C$x-C$T*C$X,C$u=C$x/C$l,C$E=-C$T/C$l,C$O=-C$X/C$l,C$U=C$M/C$l,C$p=(C$X*this.ty-C$x*C$c)/C$l,C$_=-(C$M*this.ty-C$T*C$c)/C$l;return C$s.setTo(C$u*C$s.x+C$O*C$s.y+C$p,C$E*C$s.x+C$U*C$s.y+C$_)},C$s.transformPoint=function(C$s){return C$s.setTo(this.a*C$s.x+this.c*C$s.y+this.tx,this.b*C$s.x+this.d*C$s.y+this.ty)},C$s.transformPointN=function(C$s){return C$s.setTo(this.a*C$s.x+this.c*C$s.y,this.b*C$s.x+this.d*C$s.y)},C$s.transformPointArray=function(C$s,C$M){for(var C$T=C$s.length,C$X=0;C$X<C$T;C$X+=2){var C$x=C$s[C$X],C$c=C$s[C$X+1];C$M[C$X]=this.a*C$x+this.c*C$c+this.tx,C$M[C$X+1]=this.b*C$x+this.d*C$c+this.ty}return C$M},C$s.transformPointArrayScale=function(C$s,C$M){for(var C$T=C$s.length,C$X=0;C$X<C$T;C$X+=2){var C$x=C$s[C$X],C$c=C$s[C$X+1];C$M[C$X]=this.a*C$x+this.c*C$c,C$M[C$X+1]=this.b*C$x+this.d*C$c}return C$M},C$s.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},C$s.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},C$s.invert=function(){var C$s=this.a,C$M=this.b,C$T=this.c,C$X=this.d,C$x=this.tx,C$c=C$s*C$X-C$M*C$T;return this.a=C$X/C$c,this.b=-C$M/C$c,this.c=-C$T/C$c,this.d=C$s/C$c,this.tx=(C$T*this.ty-C$X*C$x)/C$c,this.ty=-(C$s*this.ty-C$M*C$x)/C$c,this},C$s.setTo=function(C$s,C$M,C$T,C$X,C$x,C$c){return this.a=C$s,this.b=C$M,this.c=C$T,this.d=C$X,this.tx=C$x,this.ty=C$c,this},C$s.concat=function(C$s){var C$M=this.a,C$T=this.c,C$X=this.tx;return this.a=C$M*C$s.a+this.b*C$s.c,this.b=C$M*C$s.b+this.b*C$s.d,this.c=C$T*C$s.a+this.d*C$s.c,this.d=C$T*C$s.b+this.d*C$s.d,this.tx=C$X*C$s.a+this.ty*C$s.c+C$s.tx,this.ty=C$X*C$s.b+this.ty*C$s.d+C$s.ty,this},C$s.scaleEx=function(C$s,C$M){var C$T=this.a,C$X=this.b,C$x=this.c,C$c=this.d;0!==C$X||0!==C$x?(this.a=C$s*C$T,this.b=C$s*C$X,this.c=C$M*C$x):(this.a=C$s*C$T,this.b=0*C$c,this.c=0*C$T),this.d=C$M*C$c,this.bTransform=!0},C$s.rotateEx=function(C$s){var C$M=Math.cos(C$s),C$T=Math.sin(C$s),C$X=this.a,C$x=this.b,C$c=this.c,C$l=this.d;0!==C$x||0!==C$c?(this.a=C$M*C$X+C$T*C$c,this.b=C$M*C$x+C$T*C$l,this.c=-C$T*C$X+C$M*C$c,this.d=-C$T*C$x+C$M*C$l):(this.a=C$M*C$X,this.b=C$T*C$l,this.c=-C$T*C$X,this.d=C$M*C$l),this.bTransform=!0},C$s.clone=function(){var C$s=C$T.create();return C$s.a=this.a,C$s.b=this.b,C$s.c=this.c,C$s.d=this.d,C$s.tx=this.tx,C$s.ty=this.ty,C$s.bTransform=this.bTransform,C$s},C$s.copyTo=function(C$s){return C$s.a=this.a,C$s.b=this.b,C$s.c=this.c,C$s.d=this.d,C$s.tx=this.tx,C$s.ty=this.ty,C$s.bTransform=this.bTransform,C$s},C$s.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},C$s.destroy=function(){if(!this.inPool){var C$s=C$T._cache;this.inPool=!0,C$s._length||(C$s._length=0),(C$s[C$s._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},C$T.mul=function(C$s,C$M,C$T){var C$X=C$s.a,C$x=C$s.b,C$c=C$s.c,C$l=C$s.d,C$u=C$s.tx,C$E=C$s.ty,C$O=C$M.a,C$U=C$M.b,C$p=C$M.c,C$_=C$M.d,C$R=C$M.tx,C$q=C$M.ty;return 0!==C$U||0!==C$p?(C$T.a=C$X*C$O+C$x*C$p,C$T.b=C$X*C$U+C$x*C$_,C$T.c=C$c*C$O+C$l*C$p,C$T.d=C$c*C$U+C$l*C$_,C$T.tx=C$O*C$u+C$p*C$E+C$R,C$T.ty=C$U*C$u+C$_*C$E+C$q):(C$T.a=C$X*C$O,C$T.b=C$x*C$_,C$T.c=C$c*C$O,C$T.d=C$l*C$_,C$T.tx=C$O*C$u+C$R,C$T.ty=C$_*C$E+C$q),C$T},C$T.mul16=function(C$s,C$M,C$T){var C$X=C$s.a,C$x=C$s.b,C$c=C$s.c,C$l=C$s.d,C$u=C$s.tx,C$E=C$s.ty,C$O=C$M.a,C$U=C$M.b,C$p=C$M.c,C$_=C$M.d,C$R=C$M.tx,C$q=C$M.ty;return 0!==C$U||0!==C$p?(C$T[0]=C$X*C$O+C$x*C$p,C$T[1]=C$X*C$U+C$x*C$_,C$T[4]=C$c*C$O+C$l*C$p,C$T[5]=C$c*C$U+C$l*C$_,C$T[12]=C$O*C$u+C$p*C$E+C$R,C$T[13]=C$U*C$u+C$_*C$E+C$q):(C$T[0]=C$X*C$O,C$T[1]=C$x*C$_,C$T[4]=C$c*C$O,C$T[5]=C$l*C$_,C$T[12]=C$O*C$u+C$R,C$T[13]=C$_*C$E+C$q),C$T},C$T.mulPre=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=C$s.a,C$O=C$s.b,C$U=C$s.c,C$p=C$s.d,C$_=C$s.tx,C$R=C$s.ty;return 0!==C$T||0!==C$X?(C$u.a=C$E*C$M+C$O*C$X,C$u.b=C$E*C$T+C$O*C$x,C$u.c=C$U*C$M+C$p*C$X,C$u.d=C$U*C$T+C$p*C$x,C$u.tx=C$M*C$_+C$X*C$R+C$c,C$u.ty=C$T*C$_+C$x*C$R+C$l):(C$u.a=C$E*C$M,C$u.b=C$O*C$x,C$u.c=C$U*C$M,C$u.d=C$p*C$x,C$u.tx=C$M*C$_+C$c,C$u.ty=C$x*C$R+C$l),C$u},C$T.mulPos=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=C$s.a,C$O=C$s.b,C$U=C$s.c,C$p=C$s.d,C$_=C$s.tx,C$R=C$s.ty;return 0!==C$O||0!==C$U?(C$u.a=C$M*C$E+C$T*C$U,C$u.b=C$M*C$O+C$T*C$p,C$u.c=C$X*C$E+C$x*C$U,C$u.d=C$X*C$O+C$x*C$p,C$u.tx=C$E*C$c+C$U*C$l+C$_,C$u.ty=C$O*C$c+C$p*C$l+C$R):(C$u.a=C$M*C$E,C$u.b=C$T*C$p,C$u.c=C$X*C$E,C$u.d=C$x*C$p,C$u.tx=C$E*C$c+C$_,C$u.ty=C$p*C$l+C$R),C$u},C$T.preMul=function(C$s,C$M,C$T){var C$X=C$s.a,C$x=C$s.b,C$c=C$s.c,C$l=C$s.d,C$u=C$M.a,C$E=C$M.b,C$O=C$M.c,C$U=C$M.d,C$p=C$M.tx,C$_=C$M.ty;return C$T.a=C$u*C$X,C$T.b=C$T.c=0,C$T.d=C$U*C$l,C$T.tx=C$p*C$X+C$s.tx,C$T.ty=C$_*C$l+C$s.ty,0===C$E&&0===C$O&&0===C$x&&0===C$c||(C$T.a+=C$E*C$c,C$T.d+=C$O*C$x,C$T.b+=C$u*C$x+C$E*C$l,C$T.c+=C$O*C$X+C$U*C$c,C$T.tx+=C$_*C$c,C$T.ty+=C$p*C$x),C$T},C$T.preMulXY=function(C$s,C$M,C$T,C$X){var C$x=C$s.a,C$c=C$s.b,C$l=C$s.c,C$u=C$s.d;return C$X.a=C$x,C$X.b=C$c,C$X.c=C$l,C$X.d=C$u,C$X.tx=C$M*C$x+C$s.tx+C$T*C$l,C$X.ty=C$T*C$u+C$s.ty+C$M*C$c,C$X},C$T.create=function(){var C$s=C$T._cache,C$M=C$s._length?C$s[--C$s._length]:new C$T;return C$M.inPool=!1,C$M},C$T.EMPTY=new C$T,C$T.TEMP=new C$T,C$T._cache=[],C$T}(),C$k=function(){function C$s(C$s,C$M){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),this.x=C$s,this.y=C$M}C$U(C$s,"laya.maths.Point");var C$M=C$s.prototype;return C$M.setTo=function(C$s,C$M){return this.x=C$s,this.y=C$M,this},C$M.distance=function(C$s,C$M){return Math.sqrt((this.x-C$s)*(this.x-C$s)+(this.y-C$M)*(this.y-C$M))},C$M.toString=function(){return this.x+","+this.y},C$M.normalize=function(){var C$s=Math.sqrt(this.x*this.x+this.y*this.y);if(0<C$s){var C$M=1/C$s;this.x*=C$M,this.y*=C$M}},C$s.TEMP=new C$s,C$s.EMPTY=new C$s,C$s}(),C$A=function(){function C$O(C$s,C$M,C$T,C$X){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),this.x=C$s,this.y=C$M,this.width=C$T,this.height=C$X}C$U(C$O,"laya.maths.Rectangle");var C$s=C$O.prototype;return C$s.setTo=function(C$s,C$M,C$T,C$X){return this.x=C$s,this.y=C$M,this.width=C$T,this.height=C$X,this},C$s.copyFrom=function(C$s){return this.x=C$s.x,this.y=C$s.y,this.width=C$s.width,this.height=C$s.height,this},C$s.contains=function(C$s,C$M){return!(this.width<=0||this.height<=0)&&(C$s>=this.x&&C$s<this.right&&C$M>=this.y&&C$M<this.bottom)},C$s.intersects=function(C$s){return!(C$s.x>this.x+this.width||C$s.x+C$s.width<this.x||C$s.y>this.y+this.height||C$s.y+C$s.height<this.y)},C$s.intersection=function(C$s,C$M){return this.intersects(C$s)?(C$M||(C$M=new C$O),C$M.x=Math.max(this.x,C$s.x),C$M.y=Math.max(this.y,C$s.y),C$M.width=Math.min(this.right,C$s.right)-C$M.x,C$M.height=Math.min(this.bottom,C$s.bottom)-C$M.y,C$M):null},C$s.union=function(C$s,C$M){return C$M||(C$M=new C$O),this.clone(C$M),C$s.width<=0||C$s.height<=0?C$M:(C$M.addPoint(C$s.x,C$s.y),C$M.addPoint(C$s.right,C$s.bottom),this)},C$s.clone=function(C$s){return C$s||(C$s=new C$O),C$s.x=this.x,C$s.y=this.y,C$s.width=this.width,C$s.height=this.height,C$s},C$s.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},C$s.equals=function(C$s){return!(!C$s||C$s.x!==this.x||C$s.y!==this.y||C$s.width!==this.width||C$s.height!==this.height)},C$s.addPoint=function(C$s,C$M){return this.x>C$s&&(this.width+=this.x-C$s,this.x=C$s),this.y>C$M&&(this.height+=this.y-C$M,this.y=C$M),this.width<C$s-this.x&&(this.width=C$s-this.x),this.height<C$M-this.y&&(this.height=C$M-this.y),this},C$s._getBoundPoints=function(){var C$s=C$O._temB;return(C$s.length=0)==this.width||0==this.height||C$s.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),C$s},C$s.isEmpty=function(){return this.width<=0||this.height<=0},C$q(0,C$s,"right",function(){return this.x+this.width}),C$q(0,C$s,"bottom",function(){return this.y+this.height}),C$O._getBoundPointS=function(C$s,C$M,C$T,C$X){var C$x=C$O._temA;return(C$x.length=0)==C$T||0==C$X||C$x.push(C$s,C$M,C$s+C$T,C$M,C$s,C$M+C$X,C$s+C$T,C$M+C$X),C$x},C$O._getWrapRec=function(C$s,C$M){if(!C$s||C$s.length<1)return C$M?C$M.setTo(0,0,0,0):C$O.TEMP.setTo(0,0,0,0);C$M=C$M||new C$O;var C$T,C$X,C$x,C$c,C$l,C$u=C$s.length,C$E=C$k.TEMP;for(C$x=C$l=-(C$X=C$c=99999),C$T=0;C$T<C$u;C$T+=2)C$E.x=C$s[C$T],C$E.y=C$s[C$T+1],C$X=C$X<C$E.x?C$X:C$E.x,C$c=C$c<C$E.y?C$c:C$E.y,C$x=C$x>C$E.x?C$x:C$E.x,C$l=C$l>C$E.y?C$l:C$E.y;return C$M.setTo(C$X,C$c,C$x-C$X,C$l-C$c)},C$O.EMPTY=new C$O,C$O.TEMP=new C$O,C$O._temB=[],C$O._temA=[],C$O}(),C$Q=function(){function C$E(){}return C$U(C$E,"laya.media.SoundManager"),C$q(1,C$E,"useAudioMusic",function(){return C$E._useAudioMusic},function(C$s){C$E._useAudioMusic=C$s,C$E._musicClass=C$s?C$Ts:null}),C$q(1,C$E,"autoStopMusic",function(){return C$E._autoStopMusic},function(C$s){C$w.stage.off("blur",null,C$E._stageOnBlur),C$w.stage.off("focus",null,C$E._stageOnFocus),C$w.stage.off("visibilitychange",null,C$E._visibilityChange),(C$E._autoStopMusic=C$s)&&(C$w.stage.on("blur",null,C$E._stageOnBlur),C$w.stage.on("focus",null,C$E._stageOnFocus),C$w.stage.on("visibilitychange",null,C$E._visibilityChange))}),C$q(1,C$E,"muted",function(){return C$E._muted},function(C$s){C$s!=C$E._muted&&(C$s&&C$E.stopAllSound(),C$E.musicMuted=C$s,C$E._muted=C$s)}),C$q(1,C$E,"musicMuted",function(){return C$E._musicMuted},function(C$s){C$s!=C$E._musicMuted&&(C$s?(C$E._tMusic&&C$E._musicChannel&&!C$E._musicChannel.isStopped?C$E._musicChannel.pause():C$E._musicChannel=null,C$E._musicMuted=C$s):(C$E._musicMuted=C$s,C$E._tMusic&&C$E._musicChannel&&C$E._musicChannel.resume()))}),C$q(1,C$E,"soundMuted",function(){return C$E._soundMuted},function(C$s){C$E._soundMuted=C$s}),C$E.addChannel=function(C$s){0<=C$E._channels.indexOf(C$s)||(C$E._channels.push(C$s),C$E.autoReleaseSound&&0!=C$E._notUsedCount&&C$E._notUsedUrls[C$s.url]&&(delete C$E._notUsedUrls[C$s.url],0==--C$E._notUsedCount&&C$w.timer.clear(C$E,C$E.disposeSoundIfNotUsed)))},C$E.removeChannel=function(C$s){var C$M=C$E._channels,C$T=C$M.indexOf(C$s);if(-1!=C$T&&(C$M.splice(C$T,1),C$E.autoReleaseSound)){var C$X=C$s.url,C$x=C$E.defaultIntervals[C$X]||2e4;if(0<C$x){var C$c=!0;for(C$T=C$M.length-1;0<=C$T;C$T--)if(C$M[C$T].url==C$X){C$c=!1;break}C$c&&(C$E._notUsedUrls[C$X]=Date.now()+C$x,0==C$E._notUsedCount++&&C$w.timer.loop(1e4,C$E,C$E.disposeSoundIfNotUsed))}}},C$E.disposeSoundIfNotUsed=function(){var C$s=C$E._notUsedUrls;if(0!=C$E._notUsedCount){var C$M=Date.now();for(var C$T in C$s)C$M>=C$s[C$T]&&(delete C$s[C$T],--C$E._notUsedCount,C$E.destroySound(C$T));if(0!=C$E._notUsedCount)return}C$w.timer.clear(C$E,C$E.disposeSoundIfNotUsed)},C$E._visibilityChange=function(){C$w.stage.isVisibility?C$E._stageOnFocus():C$E._stageOnBlur()},C$E._stageOnBlur=function(){C$E._isActive=!1,C$E._musicChannel&&(C$E._musicChannel.isStopped||(C$E._blurPaused=!0,C$E._musicChannel.pause())),C$E.stopAllSound(),C$w.stage.once("mousedown",null,C$E._stageOnFocus)},C$E._recoverWebAudio=function(){C$cs.ctx&&"running"!=C$cs.ctx.state&&C$cs.ctx.resume&&C$cs.ctx.resume()},C$E._stageOnFocus=function(){if(C$E._isActive=!0,C$E._recoverWebAudio(),C$w.stage.off("mousedown",null,C$E._stageOnFocus),C$E._blurPaused){var C$s=C$E._musicChannel;C$s&&C$E._music&&C$s.isStopped&&(C$E._blurPaused=!1,C$E._music._disposed?C$E.playMusic(C$s.url,C$s.loops,C$s.startHandler,C$s.completeHandler,C$s.startTime):C$s.audioBuffer?C$s.resume():C$E._music.play(C$s.startTime,C$s.loops,C$s.startHandler,C$s))}},C$E.playSound=function(C$s,C$M,C$T,C$X,C$x,C$c){if(void 0===C$M&&(C$M=1),void 0===C$c&&(C$c=0),!C$s)return null;if(C$E._muted)return null;if(C$E._recoverWebAudio(),C$s==C$E._tMusic){if(C$E._musicMuted)return null}else{if(!C$E._isActive)return null;if(C$E._soundMuted)return null}var C$l,C$u=C$E._pool[C$s];return C$x||(C$x=C$E._soundClass),C$u||((C$u=new C$x).load(C$s),C$E._pool[C$s]=C$u),(C$l=C$u.play(C$c,C$M,C$T))?(C$s==C$E._tMusic&&(C$E._music=C$u,C$E._isActive||(C$E._blurPaused=!0,C$l.pause())),C$l.url=C$s,C$l.volume=C$s==C$E._tMusic?C$E.musicVolume:C$E.soundVolume,C$l.completeHandler=C$X,C$l):null},C$E.destroySound=function(C$s){var C$M=C$E._pool[C$s];C$M&&(delete C$E._pool[C$s],C$M.dispose())},C$E.playMusic=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$M&&(C$M=0),void 0===C$x&&(C$x=0),C$E._tMusic=C$s,C$E._musicChannel&&C$E._musicChannel.stop(),C$E._musicChannel=C$E.playSound(C$s,C$M,C$T,C$X,null,C$x)},C$E.stopSound=function(C$s){for(var C$M,C$T=C$E._channels.length-1;0<=C$T;C$T--)(C$M=C$E._channels[C$T]).url==C$s&&C$M.stop()},C$E.stopAll=function(){C$E._tMusic=null;var C$s=0;for(C$s=C$E._channels.length-1;0<=C$s;C$s--)C$E._channels[C$s].stop()},C$E.stopAllSound=function(){var C$s,C$M=0;for(C$M=C$E._channels.length-1;0<=C$M;C$M--)(C$s=C$E._channels[C$M]).url!=C$E._tMusic&&C$s.stop()},C$E.stopMusic=function(){C$E._musicChannel&&C$E._musicChannel.stop(),C$E._tMusic=null},C$E.setSoundVolume=function(C$s,C$M){if(C$M)C$E._setVolume(C$M,C$s);else{C$E.soundVolume=C$s;var C$T,C$X=0;for(C$X=C$E._channels.length-1;0<=C$X;C$X--)(C$T=C$E._channels[C$X]).url!=C$E._tMusic&&(C$T.volume=C$s)}},C$E.setMusicVolume=function(C$s){C$E.musicVolume=C$s,C$E._setVolume(C$E._tMusic,C$s)},C$E._setVolume=function(C$s,C$M){for(var C$T,C$X=C$E._channels.length-1;0<=C$X;C$X--)(C$T=C$E._channels[C$X]).url==C$s&&(C$T.volume=C$M)},C$E.musicVolume=1,C$E.soundVolume=1,C$E.playbackRate=1,C$E._useAudioMusic=!0,C$E._muted=!1,C$E._soundMuted=!1,C$E._musicMuted=!1,C$E._tMusic=null,C$E._musicChannel=null,C$E._music=null,C$E._channels=[],C$E._autoStopMusic=!1,C$E._blurPaused=!1,C$E._isActive=!0,C$E._soundClass=null,C$E._musicClass=null,C$E.autoReleaseSound=!0,C$E._pool={},C$E.defaultIntervals={},C$E._notUsedUrls={},C$E._notUsedCount=0,C$E}(),C$D=function(){var C$s;function C$T(){}return C$U(C$T,"laya.net.LocalStorage"),C$T.__init__=function(){C$T._baseClass||(C$T._baseClass=C$s).init(),C$T.items=C$T._baseClass.items,C$T.support=C$T._baseClass.support},C$T.setItem=function(C$s,C$M){C$T._baseClass.setItem(C$s,C$M)},C$T.getItem=function(C$s){return C$T._baseClass.getItem(C$s)},C$T.setJSON=function(C$s,C$M){C$T._baseClass.setJSON(C$s,C$M)},C$T.getJSON=function(C$s){return C$T._baseClass.getJSON(C$s)},C$T.removeItem=function(C$s){C$T._baseClass.removeItem(C$s)},C$T.clear=function(){C$T._baseClass.clear()},C$T._baseClass=null,C$T.items=null,C$T.support=!1,C$T.__init$=function(){C$s=function(){function C$T(){}return C$U(C$T,""),C$T.init=function(){try{C$T.support=!0,C$T.items=C$l.localStorage,C$T.setItem("laya","1"),C$T.removeItem("laya")}catch(C$s){C$T.support=!1}C$T.support||console.log("LocalStorage is not supprot or browser is private mode.")},C$T.setItem=function(C$s,C$M){try{C$T.support&&C$T.items.setItem(C$s,C$M)}catch(C$s){console.warn("set localStorage failed",C$s)}},C$T.getItem=function(C$s){return C$T.support?C$T.items.getItem(C$s):null},C$T.setJSON=function(C$s,C$M){try{C$T.support&&C$T.items.setItem(C$s,JSON.stringify(C$M))}catch(C$s){console.warn("set localStorage failed",C$s)}},C$T.getJSON=function(C$s){return JSON.parse(C$T.support?C$T.items.getItem(C$s):null)},C$T.removeItem=function(C$s){C$T.support&&C$T.items.removeItem(C$s)},C$T.clear=function(){C$T.support&&C$T.items.clear()},C$T.items=null,C$T.support=!1,C$T}()},C$T}(),C$B=(function(){function C$X(){}C$U(C$X,"laya.net.ResourceVersion"),C$X.enable=function(C$s,C$M,C$T){void 0===C$T&&(C$T=2),laya.net.ResourceVersion.type=C$T,C$w.loader.load(C$s,C$J.create(null,C$X.onManifestLoaded,[C$M]),null,"json"),C$o.customFormat=C$X.addVersionPrefix},C$X.onManifestLoaded=function(C$s,C$M){C$X.manifest=C$M,C$s.run(),C$M||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},C$X.addVersionPrefix=function(C$s){return C$X.manifest&&C$X.manifest[C$s]?2==C$X.type?C$X.manifest[C$s]:C$X.manifest[C$s]+"/"+C$s:C$s},C$X.FOLDER_VERSION=1,C$X.FILENAME_VERSION=2,C$X.manifest=null,C$X.type=1}(),function(){function C$s(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}C$U(C$s,"laya.net.TTFLoader");var C$M=C$s.prototype;return C$M.load=function(C$s){var C$M=(this._url=C$s).split(".ttf")[0].split("/");this.fontName=C$M[C$M.length-1],C$e.window.conch?this._loadConch():C$e.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},C$M._loadConch=function(){this._http=new C$ls,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},C$M._onHttpLoaded=function(C$s){C$e.window.conch.setFontFaceFromBuffer(this.fontName,C$s),this._clearHttp(),this._complete()},C$M._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},C$M._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},C$M._complete=function(){C$w.timer.clear(this,this._complete),C$w.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},C$M._checkComplete=function(){C$v.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},C$M._loadWithFontFace=function(){var C$s=new C$e.window.FontFace(this.fontName,"url('"+this._url+"')");C$e.window.document.fonts.add(C$s);var C$M=this;C$s.loaded.then(function(){C$M._complete()}),C$s.load()},C$M._createDiv=function(){this._div=C$e.createElement("div"),this._div.innerHTML="laya";var C$s=this._div.style;C$s.fontFamily=this.fontName,C$s.position="absolute",C$s.left="-100px",C$s.top="-100px",C$e.document.body.appendChild(this._div)},C$M._loadWithCSS=function(){var C$s=this,C$M=C$e.createElement("style");C$M.type="text/css",C$e.document.body.appendChild(C$M),C$M.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=C$v.measureText("LayaTTFFont",this._fontTxt).width;var C$T=this;C$M.onload=function(){C$w.timer.once(1e4,C$T,C$s._complete)},C$w.timer.loop(20,this,this._checkComplete),this._createDiv()},C$s._testString="LayaTTFFont",C$s}()),C$o=function(){function C$X(C$s){this._url=null,this._path=null,this._url=C$X.formatURL(C$s),this._path=C$X.getPath(C$s)}C$U(C$X,"laya.net.URL");var C$s=C$X.prototype;return C$q(0,C$s,"path",function(){return this._path}),C$q(0,C$s,"url",function(){return this._url}),C$X.formatURL=function(C$s,C$M){if(!C$s)return"null path";if(0<C$s.indexOf(":"))return C$s;null!=C$X.customFormat&&(C$s=C$X.customFormat(C$s,C$M));var C$T=C$s.charAt(0);if("."===C$T)return C$X.formatRelativePath((C$M||C$X.basePath)+C$s);if("~"===C$T)return C$X.rootPath+C$s.substring(1);if("d"===C$T){if(0===C$s.indexOf("data:image"))return C$s}else if("/"===C$T)return C$s;return(C$M||C$X.basePath)+C$s},C$X.formatRelativePath=function(C$s){for(var C$M=C$s.split("/"),C$T=0,C$X=C$M.length;C$T<C$X;C$T++)".."==C$M[C$T]&&(C$M.splice(C$T-1,2),C$T-=2);return C$M.join("/")},C$X.isAbsolute=function(C$s){return 0<C$s.indexOf(":")||"/"==C$s.charAt(0)},C$X.getPath=function(C$s){var C$M=C$s.lastIndexOf("/");return 0<C$M?C$s.substr(0,C$M+1):""},C$X.getFileName=function(C$s){var C$M=C$s.lastIndexOf("/");return 0<C$M?C$s.substr(C$M+1):C$s},C$X.version={},C$X.basePath="",C$X.rootPath="",C$X.customFormat=function(C$s){var C$M=C$X.version[C$s];return!C$C.isConchApp&&C$M&&(C$s+="?v="+C$M),C$s},C$X}(),C$C=function(){function C$x(C$s,C$M){this._timeId=0;var C$T=C$x._mainCanvas.source.style;C$T.position="absolute",C$T.top=C$T.left="0px",C$T.background="#000000",C$x._mainCanvas.source.id="layaCanvas";var C$X=laya.renders.Render.isWebGL;C$x._mainCanvas.source.width=C$s,C$x._mainCanvas.source.height=C$M,C$X&&C$x.WebGL.init(C$x._mainCanvas,C$s,C$M),C$e.container.appendChild(C$x._mainCanvas.source),(C$x._context=new C$m(C$s,C$M,C$X?null:C$x._mainCanvas)).ctx.setIsMainContext(),C$e.window.requestAnimationFrame(function C$s(C$M){C$e.window.requestAnimationFrame(C$s);C$w.stage._loop()}),C$w.stage.on("visibilitychange",this,this._onVisibilitychange)}C$U(C$x,"laya.renders.Render");var C$s=C$x.prototype;return C$s._onVisibilitychange=function(){C$w.stage.isVisibility?0!=this._timeId&&C$e.window.clearInterval(this._timeId):this._timeId=C$e.window.setInterval(this._enterFrame,1e3)},C$s._enterFrame=function(C$s){C$w.stage._loop()},C$q(1,C$x,"context",function(){return C$x._context}),C$q(1,C$x,"canvas",function(){return C$x._mainCanvas.source}),C$x._context=null,C$x._mainCanvas=null,C$x.WebGL=null,C$x.isConchNode=!1,C$x.isConchApp=!1,C$x.isConchWebGL=!1,C$x.isWebGL=!1,C$x.is3DMode=!1,C$x.optimizeTextureMemory=function(C$s,C$M){return!0},C$x.__init$=function(){C$l.ConchRenderType=C$l.ConchRenderType||1,C$l.ConchRenderType|=C$l.conch?4:0,C$x.isConchNode=5==(5&C$l.ConchRenderType),C$x.isConchApp=4==(4&C$l.ConchRenderType),C$x.isConchWebGL=6==C$l.ConchRenderType},C$x}(),C$m=function(){function C$l(C$s,C$M,C$T){this.x=0,this.y=0,this._drawTexture=function(C$s,C$M,C$T){C$T[0].loaded&&this.ctx.drawTexture(C$T[0],C$T[1],C$T[2],C$T[3],C$T[4],C$s,C$M)},this._fillTexture=function(C$s,C$M,C$T){C$T[0].loaded&&this.ctx.fillTexture(C$T[0],C$T[1]+C$s,C$T[2]+C$M,C$T[3],C$T[4],C$T[5],C$T[6],C$T[7])},this._drawTextureWithTransform=function(C$s,C$M,C$T){C$T[0].loaded&&this.ctx.drawTextureWithTransform(C$T[0],C$T[1],C$T[2],C$T[3],C$T[4],C$T[5],C$s,C$M,C$T[6])},this._fillQuadrangle=function(C$s,C$M,C$T){this.ctx.fillQuadrangle(C$T[0],C$T[1],C$T[2],C$T[3],C$T[4])},this._drawRect=function(C$s,C$M,C$T){var C$X=this.ctx;null!=C$T[4]&&(C$X.fillStyle=C$T[4],C$X.fillRect(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3],null)),null!=C$T[5]&&(C$X.strokeStyle=C$T[5],C$X.lineWidth=C$T[6],C$X.strokeRect(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3],C$T[6]))},this._drawPie=function(C$s,C$M,C$T){var C$X=this.ctx;C$C.isWebGL&&C$X.setPathId(C$T[8]),C$X.beginPath(),C$C.isWebGL?(C$X.movePath(C$T[0]+C$s,C$T[1]+C$M),C$X.moveTo(0,0)):C$X.moveTo(C$s+C$T[0],C$M+C$T[1]),C$X.arc(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3],C$T[4]),C$X.closePath(),this._fillAndStroke(C$T[5],C$T[6],C$T[7],!0)},this._clipRect=function(C$s,C$M,C$T){this.ctx.clipRect(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3])},this._fillRect=function(C$s,C$M,C$T){this.ctx.fillRect(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3],C$T[4])},this._drawCircle=function(C$s,C$M,C$T){var C$X=this.ctx;C$C.isWebGL&&C$X.setPathId(C$T[6]),C$F.drawCall++,C$X.beginPath(),C$C.isWebGL&&C$X.movePath(C$T[0]+C$s,C$T[1]+C$M),C$X.arc(C$T[0]+C$s,C$T[1]+C$M,C$T[2],0,C$l.PI2),C$X.closePath(),this._fillAndStroke(C$T[3],C$T[4],C$T[5],!0)},this._fillCircle=function(C$s,C$M,C$T){C$F.drawCall++;var C$X=this.ctx;C$X.beginPath(),C$X.fillStyle=C$T[3],C$X.arc(C$T[0]+C$s,C$T[1]+C$M,C$T[2],0,C$l.PI2),C$X.fill()},this._setShader=function(C$s,C$M,C$T){this.ctx.setShader(C$T[0])},this._drawLine=function(C$s,C$M,C$T){var C$X=this.ctx;C$C.isWebGL&&C$X.setPathId(C$T[6]),C$X.beginPath(),C$X.strokeStyle=C$T[4],C$X.lineWidth=C$T[5],C$C.isWebGL?(C$X.movePath(C$s,C$M),C$X.moveTo(C$T[0],C$T[1]),C$X.lineTo(C$T[2],C$T[3])):(C$X.moveTo(C$s+C$T[0],C$M+C$T[1]),C$X.lineTo(C$s+C$T[2],C$M+C$T[3])),C$X.stroke()},this._drawLines=function(C$s,C$M,C$T){var C$X=this.ctx;C$C.isWebGL&&C$X.setPathId(C$T[5]),C$X.beginPath(),C$s+=C$T[0],C$M+=C$T[1],C$C.isWebGL&&C$X.movePath(C$s,C$M),C$X.strokeStyle=C$T[3],C$X.lineWidth=C$T[4];var C$x=C$T[2],C$c=2,C$l=C$x.length;if(C$C.isWebGL)for(C$X.moveTo(C$x[0],C$x[1]);C$c<C$l;)C$X.lineTo(C$x[C$c++],C$x[C$c++]);else for(C$X.moveTo(C$s+C$x[0],C$M+C$x[1]);C$c<C$l;)C$X.lineTo(C$s+C$x[C$c++],C$M+C$x[C$c++]);C$X.stroke()},this._drawLinesWebGL=function(C$s,C$M,C$T){this.ctx.drawLines(C$s+this.x+C$T[0],C$M+this.y+C$T[1],C$T[2],C$T[3],C$T[4])},this._drawCurves=function(C$s,C$M,C$T){this.ctx.drawCurves(C$s,C$M,C$T)},this._draw=function(C$s,C$M,C$T){C$T[0].call(null,this,C$s,C$M)},this._transformByMatrix=function(C$s,C$M,C$T){this.ctx.transformByMatrix(C$T[0])},this._setTransform=function(C$s,C$M,C$T){this.ctx.setTransform(C$T[0],C$T[1],C$T[2],C$T[3],C$T[4],C$T[5])},this._setTransformByMatrix=function(C$s,C$M,C$T){this.ctx.setTransformByMatrix(C$T[0])},this._save=function(C$s,C$M,C$T){this.ctx.save()},this._restore=function(C$s,C$M,C$T){this.ctx.restore()},this._translate=function(C$s,C$M,C$T){this.ctx.translate(C$T[0],C$T[1])},this._transform=function(C$s,C$M,C$T){this.ctx.translate(C$T[1]+C$s,C$T[2]+C$M);var C$X=C$T[0];this.ctx.transform(C$X.a,C$X.b,C$X.c,C$X.d,C$X.tx,C$X.ty),this.ctx.translate(-C$s-C$T[1],-C$M-C$T[2])},this._rotate=function(C$s,C$M,C$T){this.ctx.translate(C$T[1]+C$s,C$T[2]+C$M),this.ctx.rotate(C$T[0]),this.ctx.translate(-C$s-C$T[1],-C$M-C$T[2])},this._scale=function(C$s,C$M,C$T){this.ctx.translate(C$T[2]+C$s,C$T[3]+C$M),this.ctx.scale(C$T[0],C$T[1]),this.ctx.translate(-C$s-C$T[2],-C$M-C$T[3])},this._alpha=function(C$s,C$M,C$T){this.ctx.globalAlpha*=C$T[0]},this._setAlpha=function(C$s,C$M,C$T){this.ctx.globalAlpha=C$T[0]},this._fillText=function(C$s,C$M,C$T){this.ctx.fillText(C$T[0],C$T[1]+C$s,C$T[2]+C$M,C$T[3],C$T[4],C$T[5])},this._strokeText=function(C$s,C$M,C$T){this.ctx.strokeText(C$T[0],C$T[1]+C$s,C$T[2]+C$M,C$T[3],C$T[4],C$T[5],C$T[6])},this._fillBorderText=function(C$s,C$M,C$T){this.ctx.fillBorderText(C$T[0],C$T[1]+C$s,C$T[2]+C$M,C$T[3],C$T[4],C$T[5],C$T[6],C$T[7])},this._blendMode=function(C$s,C$M,C$T){this.ctx.globalCompositeOperation=C$T[0]},this._beginClip=function(C$s,C$M,C$T){this.ctx.beginClip&&this.ctx.beginClip(C$s+C$T[0],C$M+C$T[1],C$T[2],C$T[3])},this._setIBVB=function(C$s,C$M,C$T){this.ctx.setIBVB(C$T[0]+C$s,C$T[1]+C$M,C$T[2],C$T[3],C$T[4],C$T[5],C$T[6],C$T[7])},this._fillTrangles=function(C$s,C$M,C$T){this.ctx.fillTrangles(C$T[0],C$T[1]+C$s,C$T[2]+C$M,C$T[3],C$T[4])},this._drawPath=function(C$s,C$M,C$T){var C$X=this.ctx;C$C.isWebGL&&C$X.setPathId(-1),C$X.beginPath(),C$s+=C$T[0],C$M+=C$T[1],C$C.isWebGL&&C$X.movePath(C$s,C$M);for(var C$x=C$T[2],C$c=0,C$l=C$x.length;C$c<C$l;C$c++){var C$u=C$x[C$c];switch(C$u[0]){case"moveTo":C$C.isWebGL?C$X.moveTo(C$u[1],C$u[2]):C$X.moveTo(C$s+C$u[1],C$M+C$u[2]);break;case"lineTo":C$C.isWebGL?C$X.lineTo(C$u[1],C$u[2]):C$X.lineTo(C$s+C$u[1],C$M+C$u[2]);break;case"arcTo":C$C.isWebGL?C$X.arcTo(C$u[1],C$u[2],C$u[3],C$u[4],C$u[5]):C$X.arcTo(C$s+C$u[1],C$M+C$u[2],C$s+C$u[3],C$M+C$u[4],C$u[5]);break;case"closePath":C$X.closePath()}}var C$E=C$T[3];null!=C$E&&(C$X.fillStyle=C$E.fillStyle,C$X.fill());var C$O=C$T[4];null!=C$O&&(C$X.strokeStyle=C$O.strokeStyle,C$X.lineWidth=C$O.lineWidth||1,C$X.lineJoin=C$O.lineJoin,C$X.lineCap=C$O.lineCap,C$X.miterLimit=C$O.miterLimit,C$X.stroke())},this.drawPoly=function(C$s,C$M,C$T){this.ctx.drawPoly(C$s+this.x+C$T[0],C$M+this.y+C$T[1],C$T[2],C$T[3],C$T[4],C$T[5],C$T[6])},this._drawPoly=function(C$s,C$M,C$T){var C$X=this.ctx,C$x=C$T[2],C$c=2,C$l=C$x.length;if(C$C.isWebGL)for(C$X.setPathId(C$T[6]),C$X.beginPath(),C$s+=C$T[0],C$M+=C$T[1],C$X.movePath(C$s,C$M),C$X.moveTo(C$x[0],C$x[1]);C$c<C$l;)C$X.lineTo(C$x[C$c++],C$x[C$c++]);else for(C$X.beginPath(),C$s+=C$T[0],C$M+=C$T[1],C$X.moveTo(C$s+C$x[0],C$M+C$x[1]);C$c<C$l;)C$X.lineTo(C$s+C$x[C$c++],C$M+C$x[C$c++]);C$X.closePath(),this._fillAndStroke(C$T[3],C$T[4],C$T[5],C$T[7])},this._drawSkin=function(C$s,C$M,C$T){var C$X=C$T[0];if(C$X){var C$x=this.ctx;C$X.render(C$x,C$s,C$M)}},this._drawParticle=function(C$s,C$M,C$T){this.ctx.drawParticle(C$s+this.x,C$M+this.y,C$T[0])},this._setFilters=function(C$s,C$M,C$T){this.ctx.setFilters(C$T)},C$T?this.ctx=C$T.getContext("2d"):(C$T=C$Ps.create("3D"),this.ctx=C$v.createWebGLContext2D(C$T),C$T._setContext(this.ctx)),C$T.size(C$s,C$M),this.canvas=C$T}C$U(C$l,"laya.renders.RenderContext");var C$s=C$l.prototype;return C$s.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},C$s.drawTexture=function(C$s,C$M,C$T,C$X,C$x){C$s.loaded&&this.ctx.drawTexture(C$s,C$M,C$T,C$X,C$x,this.x,this.y)},C$s._drawTextures=function(C$s,C$M,C$T){C$T[0].loaded&&this.ctx.drawTextures(C$T[0],C$T[1],C$s+this.x,C$M+this.y)},C$s.drawTextureWithTransform=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$s.loaded&&this.ctx.drawTextureWithTransform(C$s,C$M,C$T,C$X,C$x,C$c,this.x,this.y,C$l)},C$s.fillQuadrangle=function(C$s,C$M,C$T,C$X,C$x){this.ctx.fillQuadrangle(C$s,C$M,C$T,C$X,C$x)},C$s.drawCanvas=function(C$s,C$M,C$T,C$X,C$x){this.ctx.drawCanvas(C$s,C$M+this.x,C$T+this.y,C$X,C$x)},C$s.drawRect=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=1);var C$l=this.ctx;C$l.strokeStyle=C$x,C$l.lineWidth=C$c,C$l.strokeRect(C$s+this.x,C$M+this.y,C$T,C$X,C$c)},C$s._fillAndStroke=function(C$s,C$M,C$T,C$X){void 0===C$X&&(C$X=!1);var C$x=this.ctx;null!=C$s&&(C$x.fillStyle=C$s,C$C.isWebGL?C$x.fill(C$X):C$x.fill()),null!=C$M&&0<C$T&&(C$x.strokeStyle=C$M,C$x.lineWidth=C$T,C$x.stroke())},C$s.clipRect=function(C$s,C$M,C$T,C$X){this.ctx.clipRect(C$s+this.x,C$M+this.y,C$T,C$X)},C$s.fillRect=function(C$s,C$M,C$T,C$X,C$x){this.ctx.fillRect(C$s+this.x,C$M+this.y,C$T,C$X,C$x)},C$s.drawCircle=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=1),C$F.drawCall++;var C$c=this.ctx;C$c.beginPath(),C$c.strokeStyle=C$X,C$c.lineWidth=C$x,C$c.arc(C$s+this.x,C$M+this.y,C$T,0,C$l.PI2),C$c.stroke()},C$s.drawTriangles=function(C$s,C$M,C$T){if(C$C.isWebGL)this.ctx.drawTriangles(C$T[0],C$s+C$T[1],C$M+C$T[2],C$T[3],C$T[4],C$T[5],C$T[6],C$T[7],C$T[8],C$T[9]);else{var C$X=C$T[5],C$x=0,C$c=C$X.length,C$l=this.ctx;for(C$x=0;C$x<C$c;C$x+=3){var C$u=2*C$X[C$x],C$E=2*C$X[C$x+1],C$O=2*C$X[C$x+2];C$l.drawTriangle(C$T[0],C$T[3],C$T[4],C$u,C$E,C$O,C$T[6],!0)}}},C$s.fillCircle=function(C$s,C$M,C$T,C$X){C$F.drawCall++;var C$x=this.ctx;C$x.beginPath(),C$x.fillStyle=C$X,C$x.arc(C$s+this.x,C$M+this.y,C$T,0,C$l.PI2),C$x.fill()},C$s.setShader=function(C$s){this.ctx.setShader(C$s)},C$s.drawLine=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=1);var C$l=this.ctx;C$l.beginPath(),C$l.strokeStyle=C$x,C$l.lineWidth=C$c,C$l.moveTo(this.x+C$s,this.y+C$M),C$l.lineTo(this.x+C$T,this.y+C$X),C$l.stroke()},C$s.clear=function(){this.ctx.clear()},C$s.transformByMatrix=function(C$s){this.ctx.transformByMatrix(C$s)},C$s.setTransform=function(C$s,C$M,C$T,C$X,C$x,C$c){this.ctx.setTransform(C$s,C$M,C$T,C$X,C$x,C$c)},C$s.setTransformByMatrix=function(C$s){this.ctx.setTransformByMatrix(C$s)},C$s.save=function(){this.ctx.save()},C$s.restore=function(){this.ctx.restore()},C$s.translate=function(C$s,C$M){this.ctx.translate(C$s,C$M)},C$s.transform=function(C$s,C$M,C$T,C$X,C$x,C$c){this.ctx.transform(C$s,C$M,C$T,C$X,C$x,C$c)},C$s.rotate=function(C$s){this.ctx.rotate(C$s)},C$s.scale=function(C$s,C$M){this.ctx.scale(C$s,C$M)},C$s.alpha=function(C$s){this.ctx.globalAlpha*=C$s},C$s.setAlpha=function(C$s){this.ctx.globalAlpha=C$s},C$s.fillWords=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$c&&(C$c=0),this.ctx.fillWords(C$s,C$M,C$T,C$X,C$x,C$c)},C$s.fillBorderWords=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this.ctx.fillBorderWords(C$s,C$M,C$T,C$X,C$x,C$c,C$l)},C$s.fillText=function(C$s,C$M,C$T,C$X,C$x,C$c){this.ctx.fillText(C$s,C$M+this.x,C$T+this.y,C$X,C$x,C$c)},C$s.strokeText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this.ctx.strokeText(C$s,C$M+this.x,C$T+this.y,C$X,C$x,C$c,C$l)},C$s.blendMode=function(C$s){this.ctx.globalCompositeOperation=C$s},C$s.flush=function(){this.ctx.flush&&this.ctx.flush()},C$s.addRenderObject=function(C$s){this.ctx.addRenderObject(C$s)},C$s.beginClip=function(C$s,C$M,C$T,C$X){this.ctx.beginClip&&this.ctx.beginClip(C$s,C$M,C$T,C$X)},C$s.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},C$s.fillTrangles=function(C$s,C$M,C$T){this.ctx.fillTrangles(C$T[0],C$T[1],C$T[2],C$T[3],4<C$T.length?C$T[4]:null)},C$l.PI2=2*Math.PI,C$l}(),C$Y=function(){function C$l(C$s,C$M){switch(this._next=C$M||C$l.NORENDER,C$s){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=C$f._filter);case 69905:return void(this._fun=C$l._initRenderFun)}this.onCreate(C$s)}C$U(C$l,"laya.renders.RenderSprite");var C$s=C$l.prototype;return C$s.onCreate=function(C$s){},C$s._style=function(C$s,C$M,C$T,C$X){C$s._style.render(C$s,C$M,C$T,C$X);var C$x=this._next;C$x._fun.call(C$x,C$s,C$M,C$T,C$X)},C$s._no=function(C$s,C$M,C$T,C$X){},C$s._custom=function(C$s,C$M,C$T,C$X){C$s.customRender(C$M,C$T,C$X);var C$x=C$s._style._tf;this._next._fun.call(this._next,C$s,C$M,C$T-C$x.translateX,C$X-C$x.translateY)},C$s._clip=function(C$s,C$M,C$T,C$X){var C$x=this._next;if(C$x!=C$l.NORENDER){var C$c=C$s._style.scrollRect;C$M.ctx.save(),C$M.ctx.clipRect(C$T,C$X,C$c.width,C$c.height),C$x._fun.call(C$x,C$s,C$M,C$T-C$c.x,C$X-C$c.y),C$M.ctx.restore()}},C$s._blend=function(C$s,C$M,C$T,C$X){var C$x=C$s._style;C$x.blendMode&&(C$M.ctx.globalCompositeOperation=C$x.blendMode);var C$c=this._next;C$c._fun.call(C$c,C$s,C$M,C$T,C$X),C$M.ctx.globalCompositeOperation="source-over"},C$s._mask=function(C$s,C$M,C$T,C$X){var C$x=this._next;C$x._fun.call(C$x,C$s,C$M,C$T,C$X);var C$c=C$s.mask;C$c&&(C$M.ctx.globalCompositeOperation="destination-in",(0<C$c.numChildren||!C$c.graphics._isOnlyOne())&&(C$c.cacheAsBitmap=!0),C$c.render(C$M,C$T-C$s.pivotX,C$X-C$s.pivotY)),C$M.ctx.globalCompositeOperation="source-over"},C$s._graphics=function(C$s,C$M,C$T,C$X){var C$x=C$s._style._tf;C$s._graphics&&C$s._graphics._render(C$s,C$M,C$T-C$x.translateX,C$X-C$x.translateY);var C$c=this._next;C$c._fun.call(C$c,C$s,C$M,C$T,C$X)},C$s._image=function(C$s,C$M,C$T,C$X){var C$x=C$s._style;C$M.ctx.drawTexture2(C$T,C$X,C$x._tf.translateX,C$x._tf.translateY,C$s.transform,C$x.alpha,C$x.blendMode,C$s._graphics._one)},C$s._image2=function(C$s,C$M,C$T,C$X){var C$x=C$s._style._tf;C$M.ctx.drawTexture2(C$T,C$X,C$x.translateX,C$x.translateY,C$s.transform,1,null,C$s._graphics._one)},C$s._alpha=function(C$s,C$M,C$T,C$X){var C$x;if(.01<(C$x=C$s._style.alpha)||C$s._needRepaint()){var C$c=C$M.ctx.globalAlpha;C$M.ctx.globalAlpha*=C$x;var C$l=this._next;C$l._fun.call(C$l,C$s,C$M,C$T,C$X),C$M.ctx.globalAlpha=C$c}},C$s._transform=function(C$s,C$M,C$T,C$X){var C$x=C$s.transform,C$c=this._next;C$x&&C$c!=C$l.NORENDER?(C$M.save(),C$M.transform(C$x.a,C$x.b,C$x.c,C$x.d,C$x.tx+C$T,C$x.ty+C$X),C$c._fun.call(C$c,C$s,C$M,0,0),C$M.restore()):C$c._fun.call(C$c,C$s,C$M,C$T,C$X)},C$s._childs=function(C$s,C$M,C$T,C$X){var C$x=C$s._style,C$c=C$x._tf;if(C$T=C$T-C$c.translateX+C$x.paddingLeft,C$X=C$X-C$c.translateY+C$x.paddingTop,C$x._calculation){var C$l=C$s._getWords();if(C$l){var C$u=C$x;C$u&&(C$u.stroke?C$M.fillBorderWords(C$l,C$T,C$X,C$u.font,C$u.color,C$u.strokeColor,C$u.stroke):C$M.fillWords(C$l,C$T,C$X,C$u.font,C$u.color,"none"!=C$u.textDecoration&&C$u.underLine?1:0))}}var C$E,C$O=C$s._childs,C$U=C$O.length;if(C$s.viewport||C$s.optimizeScrollRect&&C$s._style.scrollRect){var C$p=C$s.viewport||C$s._style.scrollRect,C$_=C$p.x,C$R=C$p.y,C$q=C$p.right,C$G=C$p.bottom,C$g=NaN,C$f=NaN;for(C$J=0;C$J<C$U;++C$J)(C$E=C$O[C$J]).visible&&(C$g=C$E._x)<C$q&&C$g+C$E.width>C$_&&(C$f=C$E._y)<C$G&&C$f+C$E.height>C$R&&C$E.render(C$M,C$T,C$X)}else for(var C$J=0;C$J<C$U;++C$J)(C$E=C$O[C$J])._style.visible&&C$E.render(C$M,C$T,C$X)},C$s._canvas=function(C$s,C$M,C$T,C$X){var C$x=C$s._$P.cacheCanvas;if(C$x){"bitmap"===C$x.type?C$F.canvasBitmap++:C$F.canvasNormal++;var C$c=C$x.ctx;if(C$s._needRepaint()||!C$c)this._canvas_repaint(C$s,C$M,C$T,C$X);else{var C$l=C$x._cacheRec;C$M.drawCanvas(C$c.canvas,C$T+C$l.x,C$X+C$l.y,C$l.width,C$l.height)}}else this._next._fun.call(this._next,C$s,C$M,C$T,C$X)},C$s._canvas_repaint=function(C$s,C$M,C$T,C$X){var C$x=C$s._$P.cacheCanvas,C$c=this._next;if(C$x){var C$l,C$u,C$E,C$O,C$U=C$x.ctx,C$p=C$s._needRepaint()||!C$U,C$_=C$x.type;if("bitmap"===C$_?C$F.canvasBitmap++:C$F.canvasNormal++,C$p){var C$R,C$q;C$x._cacheRec||(C$x._cacheRec=new C$A),C$C.isWebGL&&"bitmap"!==C$_?C$x._cacheRec.setTo(-C$s.pivotX,-C$s.pivotY,1,1):((C$O=C$s.getSelfBounds()).x=C$O.x-C$s.pivotX,C$O.y=C$O.y-C$s.pivotY,C$O.x=C$O.x-16,C$O.y=C$O.y-16,C$O.width=C$O.width+32,C$O.height=C$O.height+32,C$O.x=Math.floor(C$O.x+C$T)-C$T,C$O.y=Math.floor(C$O.y+C$X)-C$X,C$O.width=Math.floor(C$O.width),C$O.height=Math.floor(C$O.height),C$x._cacheRec.copyFrom(C$O)),C$O=C$x._cacheRec;var C$G,C$g=C$C.isWebGL?1:C$e.pixelRatio*C$w.stage.clientScaleX,C$f=C$C.isWebGL?1:C$e.pixelRatio*C$w.stage.clientScaleY;if(!C$C.isWebGL){var C$J,C$P=1,C$t=1;for(C$J=C$s;C$J&&C$J!=C$w.stage;)C$P*=C$J.scaleX,C$t*=C$J.scaleY,C$J=C$J.parent;C$C.isWebGL?(C$P<1&&(C$g*=C$P),C$t<1&&(C$f*=C$t)):(1<C$P&&(C$g*=C$P),1<C$t&&(C$f*=C$t))}if(C$s.scrollRect){var C$r=C$s.scrollRect;C$O.x-=C$r.x,C$O.y-=C$r.y}if(C$R=C$O.width*C$g,C$q=C$O.height*C$f,C$u=C$O.x,C$E=C$O.y,C$C.isWebGL&&"bitmap"===C$_&&(2048<C$R||2048<C$q))return console.warn("cache bitmap size larger than 2048,cache ignored"),C$x.ctx&&(C$$.recover("RenderContext",C$x.ctx),C$x.ctx.canvas.size(0,0),C$x.ctx=null),void C$c._fun.call(C$c,C$s,C$M,C$T,C$X);if(C$U||(C$U=C$x.ctx=C$$.getItem("RenderContext")||new C$m(C$R,C$q,C$Ps.create("AUTO"))),C$U.ctx.sprite=C$s,(C$l=C$U.canvas).clear(),(C$l.width!=C$R||C$l.height!=C$q)&&C$l.size(C$R,C$q),"bitmap"===C$_?C$l.context.asBitmap=!0:"normal"===C$_&&(C$l.context.asBitmap=!1),1!=C$g||1!=C$f){var C$N=C$U.ctx;C$N.save(),C$N.scale(C$g,C$f),!C$C.isConchWebGL&&C$C.isConchApp&&(C$G=C$s._$P.cf)&&C$N.setFilterMatrix&&C$N.setFilterMatrix(C$G._mat,C$G._alpha),C$c._fun.call(C$c,C$s,C$U,-C$u,-C$E),C$N.restore(),C$C.isConchApp&&!C$C.isConchWebGL||C$s._applyFilters()}else C$N=C$U.ctx,!C$C.isConchWebGL&&C$C.isConchApp&&(C$G=C$s._$P.cf)&&C$N.setFilterMatrix&&C$N.setFilterMatrix(C$G._mat,C$G._alpha),C$c._fun.call(C$c,C$s,C$U,-C$u,-C$E),C$C.isConchApp&&!C$C.isConchWebGL||C$s._applyFilters();C$s._$P.staticCache&&(C$x.reCache=!1),C$F.canvasReCache++}else C$u=(C$O=C$x._cacheRec).x,C$E=C$O.y,C$l=C$U.canvas;C$M.drawCanvas(C$l,C$T+C$u,C$X+C$E,C$O.width,C$O.height)}else C$c._fun.call(C$c,C$s,C$U,C$T,C$X)},C$l.__init__=function(){var C$s,C$M,C$T=0;for(C$M=C$v.createRenderSprite(69905,null),C$s=C$l.renders.length=4096,C$T=0;C$T<C$s;C$T++)C$l.renders[C$T]=C$M;C$l.renders[0]=C$v.createRenderSprite(0,null),function(C$s,C$M){for(var C$T=0,C$X=0;C$X<C$s.length;C$X++)C$T|=C$s[C$X],C$l.renders[C$T]=C$M}([1,512,4,2],new C$l(1,null)),C$l.renders[513]=C$v.createRenderSprite(513,null),C$l.renders[517]=new C$l(517,null)},C$l._initRenderFun=function(C$s,C$M,C$T,C$X){var C$x=C$s._renderType;(C$l.renders[C$x]=C$l._getTypeRender(C$x))._fun(C$s,C$M,C$T,C$X)},C$l._getTypeRender=function(C$s){for(var C$M=null,C$T=2048;1<C$T;)C$T&C$s&&(C$M=C$v.createRenderSprite(C$T,C$M)),C$T>>=1;return C$M},C$l.IMAGE=1,C$l.ALPHA=2,C$l.TRANSFORM=4,C$l.BLEND=8,C$l.CANVAS=16,C$l.FILTERS=32,C$l.MASK=64,C$l.CLIP=128,C$l.STYLE=256,C$l.GRAPHICS=512,C$l.CUSTOM=1024,C$l.CHILDS=2048,C$l.INIT=69905,C$l.renders=[],C$l.NORENDER=new C$l(0,null),C$l}(),C$I=function(){function C$u(){this._repaint=!1}C$U(C$u,"laya.resource.Context");var C$s=C$u.prototype;return C$s.replaceReset=function(){var C$s,C$M,C$T=0;for(C$s=C$u.replaceKeys.length,C$T=0;C$T<C$s;C$T++)C$M=C$u.replaceKeys[C$T],this[C$u.newKeys[C$T]]=this[C$M]},C$s.replaceResotre=function(){this.__restore(),this.__reset()},C$s.setIsMainContext=function(){},C$s.drawTextures=function(C$s,C$M,C$T,C$X){C$F.drawCall+=C$M.length/2;for(var C$x=C$s.width,C$c=C$s.height,C$l=0,C$u=C$M.length;C$l<C$u;C$l+=2)this.drawTexture(C$s,C$M[C$l],C$M[C$l+1],C$x,C$c,C$T,C$X)},C$s.drawCanvas=function(C$s,C$M,C$T,C$X,C$x){C$F.drawCall++,this.drawImage(C$s.source,C$M,C$T,C$X,C$x)},C$s.fillRect=function(C$s,C$M,C$T,C$X,C$x){C$F.drawCall++,C$x&&(this.fillStyle=C$x),this.__fillRect(C$s,C$M,C$T,C$X)},C$s.fillText=function(C$s,C$M,C$T,C$X,C$x,C$c){C$F.drawCall++,3<arguments.length&&null!=C$X&&(this.font=C$X,this.fillStyle=C$x,this.textAlign=C$c,this.textBaseline="top"),this.__fillText(C$s,C$M,C$T)},C$s.fillBorderText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){C$F.drawCall++,this.font=C$X,this.fillStyle=C$x,this.textBaseline="top",this.strokeStyle=C$c,this.lineWidth=C$l,this.textAlign=C$u,this.__strokeText(C$s,C$M,C$T),this.__fillText(C$s,C$M,C$T)},C$s.strokeText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$F.drawCall++,3<arguments.length&&null!=C$X&&(this.font=C$X,this.strokeStyle=C$x,this.lineWidth=C$c,this.textAlign=C$l,this.textBaseline="top"),this.__strokeText(C$s,C$M,C$T)},C$s.transformByMatrix=function(C$s){this.transform(C$s.a,C$s.b,C$s.c,C$s.d,C$s.tx,C$s.ty)},C$s.setTransformByMatrix=function(C$s){this.setTransform(C$s.a,C$s.b,C$s.c,C$s.d,C$s.tx,C$s.ty)},C$s.clipRect=function(C$s,C$M,C$T,C$X){C$F.drawCall++,this.beginPath(),this.rect(C$s,C$M,C$T,C$X),this.clip()},C$s.drawTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$F.drawCall++;var C$u=C$s.uv,C$E=C$s.bitmap.width,C$O=C$s.bitmap.height;this.drawImage(C$s.source,C$u[0]*C$E,C$u[1]*C$O,(C$u[2]-C$u[0])*C$E,(C$u[5]-C$u[3])*C$O,C$M+C$c,C$T+C$l,C$X,C$x)},C$s.drawTextureWithTransform=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){C$F.drawCall++;var C$O=C$s.uv,C$U=C$s.bitmap.width,C$p=C$s.bitmap.height;this.save(),1!=C$E&&(this.globalAlpha*=C$E),C$c?(this.transform(C$c.a,C$c.b,C$c.c,C$c.d,C$c.tx+C$l,C$c.ty+C$u),this.drawImage(C$s.source,C$O[0]*C$U,C$O[1]*C$p,(C$O[2]-C$O[0])*C$U,(C$O[5]-C$O[3])*C$p,C$M,C$T,C$X,C$x)):this.drawImage(C$s.source,C$O[0]*C$U,C$O[1]*C$p,(C$O[2]-C$O[0])*C$U,(C$O[5]-C$O[3])*C$p,C$M+C$l,C$T+C$u,C$X,C$x),this.restore()},C$s.drawTexture2=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=C$u[0];if(C$E.loaded&&C$E.bitmap&&C$E.source){C$F.drawCall++;var C$O=1!==C$c;if(C$O){var C$U=this.globalAlpha;this.globalAlpha*=C$c}var C$p=C$E.uv,C$_=C$E.bitmap.width,C$R=C$E.bitmap.height;C$x?(this.save(),this.transform(C$x.a,C$x.b,C$x.c,C$x.d,C$x.tx+C$s,C$x.ty+C$M),this.drawImage(C$E.source,C$p[0]*C$_,C$p[1]*C$R,(C$p[2]-C$p[0])*C$_,(C$p[5]-C$p[3])*C$R,C$u[1]-C$T,C$u[2]-C$X,C$u[3],C$u[4]),this.restore()):this.drawImage(C$E.source,C$p[0]*C$_,C$p[1]*C$R,(C$p[2]-C$p[0])*C$_,(C$p[5]-C$p[3])*C$R,C$u[1]-C$T+C$s,C$u[2]-C$X+C$M,C$u[3],C$u[4]),C$O&&(this.globalAlpha=C$U)}},C$s.fillTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){if(!C$u.pat){if(C$s.uv!=C$Us.DEF_UV){var C$E=new C$Ps("2D");C$E.getContext("2d"),C$E.size(C$s.width,C$s.height),C$E.context.drawTexture(C$s,0,0,C$s.width,C$s.height,0,0),C$s=new C$Us(C$E)}C$u.pat=this.createPattern(C$s.bitmap.source,C$c)}var C$O=C$M,C$U=C$T,C$p=0,C$_=0;C$l&&(C$O+=C$l.x%C$s.width,C$U+=C$l.y%C$s.height,C$p-=C$l.x%C$s.width,C$_-=C$l.y%C$s.height),this.translate(C$O,C$U),this.fillRect(C$p,C$_,C$X,C$x,C$u.pat),this.translate(-C$O,-C$U)},C$s.drawTriangle=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=C$s.bitmap,C$O=C$E.source,C$U=C$s.width,C$p=C$s.height,C$_=C$E.width,C$R=C$E.height,C$q=C$T[C$X]*C$_,C$G=C$T[C$x]*C$_,C$g=C$T[C$c]*C$_,C$f=C$T[C$X+1]*C$R,C$J=C$T[C$x+1]*C$R,C$P=C$T[C$c+1]*C$R,C$t=C$M[C$X],C$r=C$M[C$x],C$N=C$M[C$c],C$w=C$M[C$X+1],C$k=C$M[C$x+1],C$A=C$M[C$c+1];if(C$u){var C$D=(C$t+C$r+C$N)/3,C$h=(C$w+C$k+C$A)/3,C$Q=C$t-C$D,C$v=C$w-C$h,C$z=Math.sqrt(C$Q*C$Q+C$v*C$v);C$t=C$D+C$Q/C$z*(C$z+1),C$w=C$h+C$v/C$z*(C$z+1),C$v=C$k-C$h,C$r=C$D+(C$Q=C$r-C$D)/(C$z=Math.sqrt(C$Q*C$Q+C$v*C$v))*(C$z+1),C$k=C$h+C$v/C$z*(C$z+1),C$v=C$A-C$h,C$N=C$D+(C$Q=C$N-C$D)/(C$z=Math.sqrt(C$Q*C$Q+C$v*C$v))*(C$z+1),C$A=C$h+C$v/C$z*(C$z+1)}this.save(),C$l&&this.transform(C$l.a,C$l.b,C$l.c,C$l.d,C$l.tx,C$l.ty),this.beginPath(),this.moveTo(C$t,C$w),this.lineTo(C$r,C$k),this.lineTo(C$N,C$A),this.closePath(),this.clip();var C$B=1/(C$q*C$J+C$f*C$g+C$G*C$P-C$J*C$g-C$f*C$G-C$q*C$P),C$o=C$t*C$J+C$f*C$N+C$r*C$P-C$J*C$N-C$f*C$r-C$t*C$P,C$C=C$q*C$r+C$t*C$g+C$G*C$N-C$r*C$g-C$t*C$G-C$q*C$N,C$m=C$q*C$J*C$N+C$f*C$r*C$g+C$t*C$G*C$P-C$t*C$J*C$g-C$f*C$G*C$N-C$q*C$r*C$P,C$Y=C$w*C$J+C$f*C$A+C$k*C$P-C$J*C$A-C$f*C$k-C$w*C$P,C$I=C$q*C$k+C$w*C$g+C$G*C$A-C$k*C$g-C$w*C$G-C$q*C$A,C$y=C$q*C$J*C$A+C$f*C$k*C$g+C$w*C$G*C$P-C$w*C$J*C$g-C$f*C$G*C$A-C$q*C$k*C$P;this.transform(C$o*C$B,C$Y*C$B,C$C*C$B,C$I*C$B,C$m*C$B,C$y*C$B),this.drawImage(C$O,C$s.uv[0]*C$_,C$s.uv[1]*C$R,C$U,C$p,C$s.uv[0]*C$_,C$s.uv[1]*C$R,C$U,C$p),this.restore()},C$s.flush=function(){return 0},C$s.fillWords=function(C$s,C$M,C$T,C$X,C$x,C$c){C$X&&(this.font=C$X),C$x&&(this.fillStyle=C$x);this.textBaseline="top",this.textAlign="left";for(var C$l=0,C$u=C$s.length;C$l<C$u;C$l++){var C$E=C$s[C$l];if(this.__fillText(C$E.char,C$E.x+C$M,C$E.y+C$T),1===C$c){var C$O=C$E.height,C$U=.5*C$E.style.letterSpacing;C$U||(C$U=0),this.beginPath(),this.strokeStyle=C$x,this.lineWidth=1,this.moveTo(C$M+C$E.x-C$U+.5,C$T+C$E.y+C$O+.5),this.lineTo(C$M+C$E.x+C$E.width+C$U+.5,C$T+C$E.y+C$O+.5),this.stroke()}}},C$s.fillBorderWords=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$X&&(this.font=C$X),C$x&&(this.fillStyle=C$x),this.textBaseline="top",this.lineWidth=C$l,this.textAlign="left",this.strokeStyle=C$c;for(var C$u=0,C$E=C$s.length;C$u<C$E;C$u++){var C$O=C$s[C$u];this.__strokeText(C$O.char,C$O.x+C$M,C$O.y+C$T),this.__fillText(C$O.char,C$O.x+C$M,C$O.y+C$T)}},C$s.destroy=function(){this.canvas.width=this.canvas.height=0},C$s.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},C$s.drawCurves=function(C$s,C$M,C$T){this.beginPath(),this.strokeStyle=C$T[3],this.lineWidth=C$T[4];var C$X=C$T[2];C$s+=C$T[0],C$M+=C$T[1],this.moveTo(C$s+C$X[0],C$M+C$X[1]);for(var C$x=2,C$c=C$X.length;C$x<C$c;)this.quadraticCurveTo(C$s+C$X[C$x++],C$M+C$X[C$x++],C$s+C$X[C$x++],C$M+C$X[C$x++]);this.stroke()},C$u.__init__=function(C$M){var C$T=laya.resource.Context.prototype;if(!(C$M=C$M||CanvasRenderingContext2D.prototype).inited){C$M.inited=!0,C$M.__fillText=C$M.fillText,C$M.__fillRect=C$M.fillRect,C$M.__strokeText=C$M.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(C$s){C$M[C$s]=C$T[C$s]})}},C$u.replaceCanvasGetSet=function(C$s,C$M){var C$T=Object.getOwnPropertyDescriptor(C$s,C$M);if(!C$T||!C$T.configurable)return!1;var C$X,C$x={};for(C$X in C$T)"set"!=C$X&&(C$x[C$X]=C$T[C$X]);var C$c=C$T.set;return C$x.set=function(C$s){C$c.call(this,C$s);var C$M=this.getContext("2d");C$M&&"__reset"in C$M&&C$M.__reset()},Object.defineProperty(C$s,C$M,C$x),!0},C$u.replaceGetSet=function(C$s,C$M){var C$T=Object.getOwnPropertyDescriptor(C$s,C$M);if(!C$T||!C$T.configurable)return!1;var C$X,C$x={};for(C$X in C$T)"set"!=C$X&&(C$x[C$X]=C$T[C$X]);var C$c=C$T.set,C$l="___"+C$M+"__";return C$u.newKeys.push(C$l),C$x.set=function(C$s){C$s!=this[C$l]&&(this[C$l]=C$s,C$c.call(this,C$s))},Object.defineProperty(C$s,C$M,C$x),!0},C$u._default=new C$u,C$u.newKeys=[],C$E(C$u,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),C$u}(),C$y=function(){function C$c(C$s){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++C$c._uniqueIDCounter,this._name=C$s||"Content Manager",C$c._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,C$c._resourceManagers.push(this),this._resources=[],this._records={}}C$U(C$c,"laya.resource.ResourceManager");var C$s=C$c.prototype;return C$w.imps(C$s,{"laya.resource.IDispose":!0}),C$s.getResourceByIndex=function(C$s){return this._resources[C$s]},C$s.getResourcesLength=function(){return this._resources.length},C$s.addResource=function(C$s){return C$s.resourceManager&&C$s.resourceManager.removeResource(C$s),-1===this._resources.indexOf(C$s)&&((C$s._resourceManager=this)._resources.push(C$s),this.addRecord(C$s.uri,C$s.__className,C$s.memorySize),this.addSize(C$s.memorySize),!0)},C$s.removeResource=function(C$s){var C$M=this._resources.indexOf(C$s);return-1!==C$M&&(this._resources.splice(C$M,1),C$s._resourceManager=null,this._memorySize-=C$s.memorySize,this.addRecord(C$s.uri,C$s.__className,-C$s.memorySize),!0)},C$s.unload=function(){for(var C$s=this._resources.slice(0,this._resources.length),C$M=0;C$M<C$s.length;C$M++){C$s[C$M].destroy()}C$s.length=0},C$s.dispose=function(){if(this===C$c._systemResourceManager)throw new Error("systemResourceManager不能被释放！");C$c._resourceManagers.splice(C$c._resourceManagers.indexOf(this),1),C$c._isResourceManagersSorted=!1;for(var C$s=this._resources.slice(0,this._resources.length),C$M=0;C$M<C$s.length;C$M++){var C$T=C$s[C$M];C$T.resourceManager.removeResource(C$T),C$T.destroy()}C$s.length=0},C$s.addSize=function(C$s){C$s&&(this.autoRelease&&0<C$s&&this._memorySize+C$s>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=C$s)},C$s.addRecord=function(C$s,C$M,C$T){DEBUG&&C$T&&!C$s&&console.error(C$s,C$M,C$T),C$s&&(this._records.hasOwnProperty(C$M+"|"+C$s)||(this._records[C$M+"|"+C$s]=0),this._records[C$M+"|"+C$s]+=C$T,DEBUG&&this._records[C$M+"|"+C$s]<0&&console.error(C$s,C$M,this._records[C$M+"|"+C$s]))},C$s.garbageCollection=function(C$s){var C$M=this._resources;(C$M=C$M.slice()).sort(function(C$s,C$M){if(!C$s||!C$M)throw new Error("a或b不能为空！");return C$s.released&&C$M.released?0:C$s.released?1:C$M.released?-1:C$s._lastUseFrameCount-C$M._lastUseFrameCount});for(var C$T=C$F.loopCount,C$X=0,C$x=C$M.length;C$X<C$x;C$X++){var C$c=C$M[C$X];if(!(1<C$T-C$c._lastUseFrameCount))return void(this._memorySize>=C$s&&(this._isOverflow=!0));if(C$c.releaseResource(),this._memorySize<C$s)return void(this._isOverflow=!1)}},C$q(0,C$s,"id",function(){return this._id}),C$q(0,C$s,"name",function(){return this._name},function(C$s){!C$s&&""===C$s||this._name===C$s||(this._name=C$s,C$c._isResourceManagersSorted=!1)}),C$q(0,C$s,"memorySize",function(){return this._memorySize}),C$q(0,C$s,"records",function(){return this._records}),C$q(1,C$c,"systemResourceManager",function(){return C$c._systemResourceManager}),C$c.__init__=function(){C$c.currentResourceManager=C$c.systemResourceManager},C$c.getLoadedResourceManagerByIndex=function(C$s){return C$c._resourceManagers[C$s]},C$c.getLoadedResourceManagersCount=function(){return C$c._resourceManagers.length},C$c.recreateContentManagers=function(C$s){void 0===C$s&&(C$s=!1);for(var C$M=C$c.currentResourceManager,C$T=0;C$T<C$c._resourceManagers.length;C$T++){C$c.currentResourceManager=C$c._resourceManagers[C$T];for(var C$X=0;C$X<C$c.currentResourceManager._resources.length;C$X++)C$c.currentResourceManager._resources[C$X].releaseResource(C$s),C$c.currentResourceManager._resources[C$X].activeResource(C$s)}C$c.currentResourceManager=C$M},C$c.releaseContentManagers=function(C$s){void 0===C$s&&(C$s=!1);for(var C$M=C$c.currentResourceManager,C$T=0;C$T<C$c._resourceManagers.length;C$T++){C$c.currentResourceManager=C$c._resourceManagers[C$T];for(var C$X=0;C$X<C$c.currentResourceManager._resources.length;C$X++){var C$x=C$c.currentResourceManager._resources[C$X];!C$x.released&&C$x.releaseResource(C$s)}}C$c.currentResourceManager=C$M},C$c._uniqueIDCounter=0,C$c._isResourceManagersSorted=!1,C$c._resourceManagers=[],C$E(C$c,["_systemResourceManager",function(){return this._systemResourceManager=new C$c("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=C$c._systemResourceManager}]),C$c}(),C$e=(function(){function C$s(){}C$U(C$s,"laya.system.System"),C$s.changeDefinition=function(C$s,C$M){C$w[C$s]=C$M;var C$T=C$s+"=classObj";C$w._runScript(C$T)},C$s.__init__=function(){C$C.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function C$T(){}return C$U(C$T,"laya.utils.Browser"),C$q(1,C$T,"pixelRatio",function(){return C$T.__init__(),-1<C$T.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:C$v.getPixelRatio()}),C$q(1,C$T,"height",function(){return C$T.__init__(),(C$w.stage&&C$w.stage.canvasRotation?C$T.clientWidth:C$T.clientHeight)*C$T.pixelRatio}),C$q(1,C$T,"clientWidth",function(){return C$T.__init__(),C$T.window.innerWidth||C$T.document.body.clientWidth}),C$q(1,C$T,"window",function(){return C$T.__init__(),C$T._window}),C$q(1,C$T,"clientHeight",function(){return C$T.__init__(),C$T.window.innerHeight||C$T.document.body.clientHeight||C$T.document.documentElement.clientHeight}),C$q(1,C$T,"width",function(){return C$T.__init__(),(C$w.stage&&C$w.stage.canvasRotation?C$T.clientHeight:C$T.clientWidth)*C$T.pixelRatio}),C$q(1,C$T,"container",function(){return C$T.__init__(),C$T._container||((C$T._container=C$T.createElement("div")).id="layaContainer",C$T.document.body.appendChild(C$T._container)),C$T._container},function(C$s){C$T._container=C$s}),C$q(1,C$T,"document",function(){return C$T.__init__(),C$T._document}),C$T.__init__=function(){if(!C$T._window){C$T._window=C$v.getWindow(),C$T._document=C$T.window.document,C$T._window.addEventListener("message",function(C$s){laya.utils.Browser._onMessage(C$s)},!1),C$T.document.__createElement=C$T.document.createElement,C$l.requestAnimationFrame=C$l.requestAnimationFrame||C$l.webkitRequestAnimationFrame||C$l.mozRequestAnimationFrame||C$l.oRequestAnimationFrame||C$l.msRequestAnimationFrame||function(C$s){return C$l.setTimeout(C$s,1e3/60)};var C$s=C$l.document.body.style;C$s["-webkit-user-select"]="none",C$s["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",C$T.userAgent=C$T.window.navigator.userAgent,C$T.onIOS=!!(C$T.u=C$T.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),C$T.onMobile=-1<C$T.u.indexOf("Mobile"),C$T.onIPhone=-1<C$T.u.indexOf("iPhone"),C$T.onMac=-1<C$T.u.indexOf("Mac OS X"),C$T.onIPad=-1<C$T.u.indexOf("iPad"),C$T.onAndroid=-1<C$T.u.indexOf("Android")||-1<C$T.u.indexOf("Adr"),C$T.onWP=-1<C$T.u.indexOf("Windows Phone"),C$T.onQQBrowser=-1<C$T.u.indexOf("QQBrowser"),C$T.onMQQBrowser=-1<C$T.u.indexOf("MQQBrowser")||-1<C$T.u.indexOf("Mobile")&&-1<C$T.u.indexOf("QQ"),C$T.onIE=!!C$T.window.ActiveXObject||"ActiveXObject"in C$T.window,C$T.onWeiXin=-1<C$T.u.indexOf("MicroMessenger"),C$T.onPC=!C$T.onMobile,C$T.onSafari=-1<C$T.u.indexOf("Safari"),C$T.onFirefox=-1<C$T.u.indexOf("Firefox"),C$T.onEdge=-1<C$T.u.indexOf("Edge"),C$T.onMiniGame=-1<C$T.u.indexOf("MiniGame"),C$T.onLimixiu=-1<C$T.u.indexOf("limixiu"),C$T.httpProtocol="http:"==C$T.window.location.protocol,C$T.onMiniGame&&null==C$T.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),C$T.webAudioEnabled=!!(C$T.window.AudioContext||C$T.window.webkitAudioContext||C$T.window.mozAudioContext),C$T.soundType=C$T.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",C$xs=C$T.webAudioEnabled?C$cs:C$Ts,C$T.webAudioEnabled&&C$cs.initWebAudio(),C$Ts._initMusicAudio(),C$T.enableTouch="ontouchstart"in C$l||C$l.DocumentTouch&&C$M instanceof DocumentTouch,C$l.focus(),C$Q._soundClass=C$xs,C$Q._musicClass=C$Ts,C$C._mainCanvas=C$C._mainCanvas||C$Ps.create("2D"),C$T.canvas||(C$T.canvas=C$Ps.create("2D"),C$T.context=C$T.canvas.getContext("2d"))}},C$T._onMessage=function(C$s){if(C$s.data&&"size"==C$s.data.name){if(C$T.window.innerWidth=C$s.data.width,C$T.window.innerHeight=C$s.data.height,C$T.window.__innerHeight=C$s.data.clientHeight,!C$T.document.createEvent)return void console.warn("no document.createEvent");var C$M=C$T.document.createEvent("HTMLEvents");return C$M.initEvent("resize",!1,!1),void C$T.window.dispatchEvent(C$M)}},C$T.createElement=function(C$s){return C$T.__init__(),C$T.document.__createElement(C$s)},C$T.getElementById=function(C$s){return C$T.__init__(),C$T.document.getElementById(C$s)},C$T.removeElement=function(C$s){C$s&&C$s.parentNode&&C$s.parentNode.removeChild(C$s)},C$T.now=function(){return C$v.now()},C$T._window=null,C$T._document=null,C$T._container=null,C$T.userAgent=null,C$T.u=null,C$T.onIOS=!1,C$T.onMac=!1,C$T.onMobile=!1,C$T.onIPhone=!1,C$T.onIPad=!1,C$T.onAndroid=!1,C$T.onWP=!1,C$T.onQQBrowser=!1,C$T.onMQQBrowser=!1,C$T.onSafari=!1,C$T.onFirefox=!1,C$T.onEdge=!1,C$T.onIE=!1,C$T.onWeiXin=!1,C$T.onMiniGame=!1,C$T.onLimixiu=!1,C$T.onPC=!1,C$T.httpProtocol=!1,C$T.webAudioEnabled=!1,C$T.soundType=null,C$T.enableTouch=!1,C$T.canvas=null,C$T.context=null,C$T.__init$=function(){},C$T}()),C$V=function(){function C$M(C$s){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,C$s?(this._u8d_=new Uint8Array(C$s),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}C$U(C$M,"laya.utils.Byte");var C$s=C$M.prototype;return C$s.___resizeBuffer=function(C$M){try{var C$s=new Uint8Array(C$M);null!=this._u8d_&&(this._u8d_.length<=C$M?C$s.set(this._u8d_):C$s.set(this._u8d_.subarray(0,C$M))),this._u8d_=C$s,this._d_=new DataView(C$s.buffer)}catch(C$s){throw"___resizeBuffer err:"+C$M}},C$s.getString=function(){return this.rUTF(this.getUint16())},C$s.getFloat32Array=function(C$s,C$M){var C$T=C$s+C$M;C$T=C$T>this._length?this._length:C$T;var C$X=new Float32Array(this._d_.buffer.slice(C$s,C$T));return this._pos_=C$T,C$X},C$s.getUint8Array=function(C$s,C$M){var C$T=C$s+C$M;C$T=C$T>this._length?this._length:C$T;var C$X=new Uint8Array(this._d_.buffer.slice(C$s,C$T));return this._pos_=C$T,C$X},C$s.getInt16Array=function(C$s,C$M){var C$T=C$s+C$M;C$T=C$T>this._length?this._length:C$T;var C$X=new Int16Array(this._d_.buffer.slice(C$s,C$T));return this._pos_=C$T,C$X},C$s.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var C$s=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,C$s},C$s.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var C$s=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,C$s},C$s.writeFloat32=function(C$s){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,C$s,this._xd_),this._pos_+=4},C$s.writeFloat64=function(C$s){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,C$s,this._xd_),this._pos_+=8},C$s.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var C$s=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,C$s},C$s.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var C$s=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,C$s},C$s.writeInt32=function(C$s){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,C$s,this._xd_),this._pos_+=4},C$s.writeUint32=function(C$s){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,C$s,this._xd_),this._pos_+=4},C$s.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var C$s=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,C$s},C$s.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var C$s=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,C$s},C$s.writeUint16=function(C$s){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,C$s,this._xd_),this._pos_+=2},C$s.writeInt16=function(C$s){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,C$s,this._xd_),this._pos_+=2},C$s.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},C$s.writeUint8=function(C$s){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,C$s),this._pos_++},C$s._getUInt8=function(C$s){return this._d_.getUint8(C$s)},C$s._getUint16=function(C$s){return this._d_.getUint16(C$s,this._xd_)},C$s._getMatrix=function(){return new C$z(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},C$s.rUTF=function(C$s){for(var C$M=[],C$T=this._pos_+C$s,C$X=0,C$x=0,C$c=0,C$l=String.fromCharCode,C$u=this._u8d_;this._pos_<C$T;)(C$X=C$u[this._pos_++])<128?0!=C$X&&C$M.push(C$l(C$X)):C$X<224?C$M.push(C$l((63&C$X)<<6|127&C$u[this._pos_++])):C$X<240?(C$x=C$u[this._pos_++],C$M.push(C$l((31&C$X)<<12|(127&C$x)<<6|127&C$u[this._pos_++]))):(C$x=C$u[this._pos_++],C$c=C$u[this._pos_++],C$M.push(C$l((15&C$X)<<18|(127&C$x)<<12|C$c<<6&127|127&C$u[this._pos_++]))),0;return C$M.join("")},C$s.getCustomString=function(C$s){for(var C$M=[],C$T=0,C$X=0,C$x=0,C$c=String.fromCharCode,C$l=this._u8d_;0<C$s;)if((C$X=C$l[this._pos_])<128)C$M.push(C$c(C$X)),this._pos_++,C$s--;else for(C$T=C$X-128,this._pos_++,C$s-=C$T;0<C$T;)C$X=C$l[this._pos_++],C$x=C$l[this._pos_++],C$M.push(C$c(C$x<<8|C$X)),C$T--;return C$M.join("")},C$s.clear=function(){this._pos_=0,this.length=0},C$s.__getBuffer=function(){return this._d_.buffer},C$s.writeUTFBytes=function(C$s){for(var C$M=0,C$T=(C$s+="").length;C$M<C$T;C$M++){var C$X=C$s.charCodeAt(C$M);C$X<=127?this.writeByte(C$X):C$X<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|C$X>>6,128|63&C$X],this._pos_),this._pos_+=2):C$X<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|C$X>>12,128|C$X>>6&63,128|63&C$X],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|C$X>>18,128|C$X>>12&63,128|C$X>>6&63,128|63&C$X],this._pos_),this._pos_+=4)}},C$s.writeUTFString=function(C$s){var C$M=this.pos;this.writeUint16(1),this.writeUTFBytes(C$s);var C$T=this.pos-C$M-2;if(65536<=C$T)throw"writeUTFString byte len more than 65536";this._d_.setUint16(C$M,C$T,this._xd_)},C$s.readUTFString=function(){return this.readUTFBytes(this.getUint16())},C$s.getUTFString=function(){return this.readUTFString()},C$s.readUTFBytes=function(C$s){if(void 0===C$s&&(C$s=-1),0==C$s)return"";var C$M=this.bytesAvailable;if(C$M<C$s)throw"readUTFBytes error - Out of bounds";return C$s=0<C$s?C$s:C$M,this.rUTF(C$s)},C$s.getUTFBytes=function(C$s){return void 0===C$s&&(C$s=-1),this.readUTFBytes(C$s)},C$s.writeByte=function(C$s){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,C$s),this._pos_+=1},C$s.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},C$s.getByte=function(){return this.readByte()},C$s.ensureWrite=function(C$s){this._length<C$s&&(this._length=C$s),this._allocated_<C$s&&(this.length=C$s)},C$s.writeArrayBuffer=function(C$s,C$M,C$T){if(void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),C$M<0||C$T<0)throw"writeArrayBuffer error - Out of bounds";0==C$T&&(C$T=C$s.byteLength-C$M),this.ensureWrite(this._pos_+C$T);var C$X=new Uint8Array(C$s);this._u8d_.set(C$X.subarray(C$M,C$M+C$T),this._pos_),this._pos_+=C$T},C$q(0,C$s,"buffer",function(){var C$s=this._d_.buffer;return C$s.byteLength==this.length?C$s:C$s.slice(0,this.length)}),C$q(0,C$s,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(C$s){this._xd_="littleEndian"==C$s}),C$q(0,C$s,"length",function(){return this._length},function(C$s){this._allocated_<C$s?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(C$s,2*this._allocated_))):this._allocated_>C$s&&this.___resizeBuffer(this._allocated_=C$s),this._length=C$s}),C$q(0,C$s,"pos",function(){return this._pos_},function(C$s){this._pos_=C$s}),C$q(0,C$s,"bytesAvailable",function(){return this._length-this._pos_}),C$M.getSystemEndian=function(){if(!C$M._sysEndian){var C$s=new ArrayBuffer(2);new DataView(C$s).setInt16(0,256,!0),C$M._sysEndian=256===new Int16Array(C$s)[0]?"littleEndian":"bigEndian"}return C$M._sysEndian},C$M.BIG_ENDIAN="bigEndian",C$M.LITTLE_ENDIAN="littleEndian",C$M._sysEndian=null,C$M}(),C$b=function(){function C$x(){}return C$U(C$x,"laya.utils.CacheManager"),C$x.regCacheByFunction=function(C$s,C$M){var C$T;C$x.unRegCacheByFunction(C$s,C$M),C$T={tryDispose:C$s,getCacheList:C$M},C$x._cacheList.push(C$T)},C$x.unRegCacheByFunction=function(C$s,C$M){var C$T,C$X=0;for(C$T=C$x._cacheList.length,C$X=0;C$X<C$T;C$X++)if(C$x._cacheList[C$X].tryDispose==C$s&&C$x._cacheList[C$X].getCacheList==C$M)return void C$x._cacheList.splice(C$X,1)},C$x.forceDispose=function(){var C$s=0,C$M=C$x._cacheList.length;for(C$s=0;C$s<C$M;C$s++)C$x._cacheList[C$s].tryDispose(!0)},C$x.beginCheck=function(C$s){void 0===C$s&&(C$s=15e3),C$w.timer.loop(C$s,null,C$x._checkLoop)},C$x.stopCheck=function(){C$w.timer.clear(null,C$x._checkLoop)},C$x._checkLoop=function(){var C$s=C$x._cacheList;if(!(C$s.length<1)){var C$M,C$T=C$e.now(),C$X=0;for(C$M=C$X=C$s.length;0<C$X&&(C$s[C$x._index=++C$x._index%C$M].tryDispose(!1),!(C$e.now()-C$T>C$x.loopTimeLimit));)C$X--}},C$x.loopTimeLimit=2,C$x._cacheList=[],C$x._index=0,C$x}(),C$L=function(){function C$R(){}return C$U(C$R,"laya.utils.ClassUtils"),C$R.regClass=function(C$s,C$M){C$R._classMap[C$s]=C$M},C$R.getRegClass=function(C$s){return C$R._classMap[C$s]},C$R.getInstance=function(C$s){var C$M=C$R.getClass(C$s);return C$M?new C$M:(console.warn("[error] Undefined class:",C$s),null)},C$R.createByJson=function(C$s,C$M,C$T,C$X,C$x){"string"==typeof C$s&&(C$s=JSON.parse(C$s));var C$c=C$s.props;if(!C$M&&!(C$M=C$x?C$x.runWith(C$s):C$R.getInstance(C$c.runtime||C$s.type)))return null;var C$l=C$s.child;if(C$l)for(var C$u=0,C$E=C$l.length;C$u<C$E;C$u++){var C$O=C$l[C$u];if("render"!==C$O.props.name&&"render"!==C$O.props.renderType||!C$M._$set_itemRender)if("Graphic"==C$O.type)C$R.addGraphicsToSprite(C$O,C$M);else if(C$R.isDrawType(C$O.type))C$R.addGraphicToSprite(C$O,C$M,!0);else{var C$U=C$R.createByJson(C$O,null,C$T,C$X,C$x);"Script"==C$O.type?C$U.hasOwnProperty("owner")?C$U.owner=C$M:C$U.hasOwnProperty("target")&&(C$U.target=C$M):"mask"==C$O.props.renderType?C$M.mask=C$U:C$M.addChild(C$U)}else C$M.itemRender=C$O}if(C$c)for(var C$p in C$c){var C$_=C$c[C$p];"var"===C$p&&C$T?C$T[C$_]=C$M:C$_ instanceof Array&&"function"==typeof C$M[C$p]?C$M[C$p].apply(C$M,C$_):C$M[C$p]=C$_}return C$X&&C$s.customProps&&C$X.runWith([C$M,C$s]),C$M.created&&C$M.created(),C$M},C$R.addGraphicsToSprite=function(C$s,C$M){var C$T;if((C$T=C$s.child)&&!(C$T.length<1)){var C$X;C$X=C$R._getGraphicsFromSprite(C$s,C$M);var C$x=0,C$c=0;C$s.props&&(C$x=C$R._getObjVar(C$s.props,"x",0),C$c=C$R._getObjVar(C$s.props,"y",0)),0!=C$x&&0!=C$c&&C$X.translate(C$x,C$c);var C$l,C$u=0;for(C$l=C$T.length,C$u=0;C$u<C$l;C$u++)C$R._addGraphicToGraphics(C$T[C$u],C$X);0!=C$x&&0!=C$c&&C$X.translate(-C$x,-C$c)}},C$R.addGraphicToSprite=function(C$s,C$M,C$T){var C$X;void 0===C$T&&(C$T=!1),C$X=C$T?C$R._getGraphicsFromSprite(C$s,C$M):C$M.graphics,C$R._addGraphicToGraphics(C$s,C$X)},C$R._getGraphicsFromSprite=function(C$s,C$M){var C$T,C$X;if(!C$s||!C$s.props)return C$M.graphics;switch(C$X=C$s.props.renderType){case"hit":case"unHit":var C$x;C$M.hitArea||(C$M.hitArea=new C$n),(C$x=C$M.hitArea)[C$X]||(C$x[C$X]=new C$_),C$T=C$x[C$X]}return C$T||(C$T=C$M.graphics),C$T},C$R._getTransformData=function(C$s){var C$M;(C$s.hasOwnProperty("pivotX")||C$s.hasOwnProperty("pivotY"))&&(C$M=C$M||new C$z).translate(-C$R._getObjVar(C$s,"pivotX",0),-C$R._getObjVar(C$s,"pivotY",0));var C$T=C$R._getObjVar(C$s,"scaleX",1),C$X=C$R._getObjVar(C$s,"scaleY",1),C$x=C$R._getObjVar(C$s,"rotation",0);C$R._getObjVar(C$s,"skewX",0),C$R._getObjVar(C$s,"skewY",0);return 1==C$T&&1==C$X&&0==C$x||((C$M=C$M||new C$z).scale(C$T,C$X),C$M.rotate(.0174532922222222*C$x)),C$M},C$R._addGraphicToGraphics=function(C$s,C$M){var C$T,C$X;if((C$T=C$s.props)&&(C$X=C$R.DrawTypeDic[C$s.type])){var C$x,C$c;C$x=C$M;var C$l=C$R._getParams(C$T,C$X[1],C$X[2],C$X[3]);((C$c=C$R._tM)||1!=C$R._alpha)&&(C$x.save(),C$c&&C$x.transform(C$c),1!=C$R._alpha&&C$x.alpha(C$R._alpha)),C$x[C$X[0]].apply(C$x,C$l),(C$c||1!=C$R._alpha)&&C$x.restore()}},C$R._adptLineData=function(C$s){return C$s[2]=parseFloat(C$s[0])+parseFloat(C$s[2]),C$s[3]=parseFloat(C$s[1])+parseFloat(C$s[3]),C$s},C$R._adptTextureData=function(C$s){return C$s[0]=C$us.getRes(C$s[0]),C$s},C$R._adptLinesData=function(C$s){return C$s[2]=C$R._getPointListByStr(C$s[2]),C$s},C$R.isDrawType=function(C$s){return"Image"!=C$s&&C$R.DrawTypeDic.hasOwnProperty(C$s)},C$R._getParams=function(C$s,C$M,C$T,C$X){var C$x;void 0===C$T&&(C$T=0),(C$x=C$R._temParam).length=C$M.length;var C$c,C$l,C$u=0;for(C$c=C$M.length,C$u=0;C$u<C$c;C$u++)C$x[C$u]=C$R._getObjVar(C$s,C$M[C$u][0],C$M[C$u][1]);return C$R._alpha=C$R._getObjVar(C$s,"alpha",1),C$l=C$R._getTransformData(C$s),C$R._tM=C$l?(C$T||(C$T=0),C$l.translate(C$x[C$T],C$x[C$T+1]),C$x[C$T]=C$x[C$T+1]=0,C$l):null,C$X&&C$R[C$X]&&(C$x=C$R[C$X](C$x)),C$x},C$R._getPointListByStr=function(C$s){var C$M,C$T,C$X=0;for(C$T=(C$M=C$s.split(",")).length,C$X=0;C$X<C$T;C$X++)C$M[C$X]=parseFloat(C$M[C$X]);return C$M},C$R._getObjVar=function(C$s,C$M,C$T){return C$s.hasOwnProperty(C$M)?C$s[C$M]:C$T},C$R._temParam=[],C$R._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},C$R.getClass=function(C$s){var C$M=C$R._classMap[C$s]||C$s;return"string"==typeof C$M?C$w.__classmap[C$M]:C$M},C$R._tM=null,C$R._alpha=NaN,C$E(C$R,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),C$R}(),C$S=function(){function C$c(C$s){if(this._color=[],"string"==typeof C$s){null===(this.strColor=C$s)&&(C$s="#000000"),"#"==C$s.charAt(0)&&(C$s=C$s.substr(1));var C$M=C$s.length;if(3==C$M||4==C$M){for(var C$T="",C$X=0;C$X<C$M;C$X++)C$T+=C$s[C$X]+C$s[C$X];C$s=C$T}var C$x=this.numColor=parseInt(C$s,16);if(8==C$s.length)return void(this._color=[parseInt(C$s.substr(0,2),16)/255,((16711680&C$x)>>16)/255,((65280&C$x)>>8)/255,(255&C$x)/255])}else C$x=this.numColor=C$s,this.strColor=C$j.toHexColor(C$x);this._color=[((16711680&C$x)>>16)/255,((65280&C$x)>>8)/255,(255&C$x)/255,1],this._color.__id=++C$c._COLODID}return C$U(C$c,"laya.utils.Color"),C$c._initDefault=function(){for(var C$s in C$c._DEFAULT={},C$c._COLOR_MAP)C$c._SAVE[C$s]=C$c._DEFAULT[C$s]=new C$c(C$c._COLOR_MAP[C$s]);return C$c._DEFAULT},C$c._initSaveMap=function(){for(var C$s in C$c._SAVE_SIZE=0,C$c._SAVE={},C$c._DEFAULT)C$c._SAVE[C$s]=C$c._DEFAULT[C$s]},C$c.create=function(C$s){var C$M=C$c._SAVE[C$s+""];return null!=C$M?C$M:(C$c._SAVE_SIZE<1e3||C$c._initSaveMap(),C$c._SAVE[C$s+""]=new C$c(C$s))},C$c._SAVE={},C$c._SAVE_SIZE=0,C$c._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},C$c._DEFAULT=C$c._initDefault(),C$c._COLODID=1,C$c}(),C$K=(function(){function C$s(){this._values=[],this._keys=[]}C$U(C$s,"laya.utils.Dictionary");var C$M=C$s.prototype;C$M.set=function(C$s,C$M){var C$T=this.indexOf(C$s);0<=C$T?this._values[C$T]=C$M:(this._keys.push(C$s),this._values.push(C$M))},C$M.indexOf=function(C$s){var C$M=this._keys.indexOf(C$s);return 0<=C$M?C$M:(C$s="string"==typeof C$s?Number(C$s):"number"==typeof C$s?C$s.toString():C$s,this._keys.indexOf(C$s))},C$M.get=function(C$s){var C$M=this.indexOf(C$s);return C$M<0?null:this._values[C$M]},C$M.remove=function(C$s){var C$M=this.indexOf(C$s);return 0<=C$M&&(this._keys.splice(C$M,1),this._values.splice(C$M,1),!0)},C$M.clear=function(){this._values.length=0,this._keys.length=0},C$q(0,C$M,"values",function(){return this._values}),C$q(0,C$M,"keys",function(){return this._keys})}(),function(){function C$s(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}C$U(C$s,"laya.utils.Dragging");var C$M=C$s.prototype;return C$M.start=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){void 0===C$u&&(C$u=.92),this.clearTimer(),this.target=C$s,this.area=C$M,this.hasInertia=C$T,this.elasticDistance=C$M?C$X:0,this.elasticBackTime=C$x,this.data=C$c,this._disableMouseEvent=C$l,this.ratio=C$u,1!=C$s.globalScaleX||1!=C$s.globalScaleY?this._parent=C$s.parent:this._parent=C$w.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,C$w.stage.on("mouseup",this,this.onStageMouseUp),C$w.stage.on("mouseout",this,this.onStageMouseUp),C$w.timer.frameLoop(1,this,this.loop)},C$M.clearTimer=function(){C$w.timer.clear(this,this.loop),C$w.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},C$M.stop=function(){this._dragging&&(C$G.instance.disableMouseEvent=!1,C$w.stage.off("mouseup",this,this.onStageMouseUp),C$w.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},C$M.loop=function(){var C$s=this._parent.getMousePoint(),C$M=C$s.x,C$T=C$s.y,C$X=C$M-this._lastX,C$x=C$T-this._lastY;if(this._clickOnly){if(!(1<Math.abs(C$X*C$w.stage._canvasTransform.getScaleX())||1<Math.abs(C$x*C$w.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),C$G.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(C$X,C$x);0==C$X&&0==C$x||(this._lastX=C$M,this._lastY=C$T,this.target.x+=C$X*this._elasticRateX,this.target.y+=C$x*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},C$M.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var C$s=this.area.x-this.target.x;else C$s=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-C$s/this.elasticDistance),this.target.y<this.area.y)var C$M=this.area.y-this.target.y;else C$M=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-C$M/this.elasticDistance)}},C$M.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},C$M.onStageMouseUp=function(C$s){if(C$G.instance.disableMouseEvent=!1,C$w.stage.off("mouseup",this,this.onStageMouseUp),C$w.stage.off("mouseout",this,this.onStageMouseUp),C$w.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var C$M=this._offsets.length,C$T=Math.min(C$M,6),C$X=this._offsets.length-C$T,C$x=C$M-1;C$X<C$x;C$x--)this._offsetY+=this._offsets[C$x--],this._offsetX+=this._offsets[C$x];this._offsetX=this._offsetX/C$T*2,this._offsetY=this._offsetY/C$T*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),C$w.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},C$M.checkElastic=function(){var C$s=NaN,C$M=NaN;if(this.target.x<this.area.x?C$s=this.area.x:this.target.x>this.area.x+this.area.width&&(C$s=this.area.x+this.area.width),this.target.y<this.area.y?C$M=this.area.y:this.target.y>this.area.y+this.area.height&&(C$M=this.area.y+this.area.height),isNaN(C$s)&&isNaN(C$M))this.clear();else{var C$T={};isNaN(C$s)||(C$T.x=C$s),isNaN(C$M)||(C$T.y=C$M),this._tween=C$a.to(this.target,C$T,this.elasticBackTime,C$Z.sineOut,C$J.create(this,this.clear),0,!1,!1)}},C$M.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(C$w.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},C$M.clear=function(){if(this.target){this.clearTimer();var C$s=this.target;this.target=null,this._parent=null,C$s.event("dragend",this.data)}},C$s}()),C$Z=function(){function C$u(){}return C$U(C$u,"laya.utils.Ease"),C$u.linearNone=function(C$s,C$M,C$T,C$X){return C$T*C$s/C$X+C$M},C$u.linearIn=function(C$s,C$M,C$T,C$X){return C$T*C$s/C$X+C$M},C$u.linearInOut=function(C$s,C$M,C$T,C$X){return C$T*C$s/C$X+C$M},C$u.linearOut=function(C$s,C$M,C$T,C$X){return C$T*C$s/C$X+C$M},C$u.bounceIn=function(C$s,C$M,C$T,C$X){return C$T-C$u.bounceOut(C$X-C$s,0,C$T,C$X)+C$M},C$u.bounceInOut=function(C$s,C$M,C$T,C$X){return C$s<.5*C$X?.5*C$u.bounceIn(2*C$s,0,C$T,C$X)+C$M:.5*C$u.bounceOut(2*C$s-C$X,0,C$T,C$X)+.5*C$T+C$M},C$u.bounceOut=function(C$s,C$M,C$T,C$X){return(C$s/=C$X)<1/2.75?C$T*(7.5625*C$s*C$s)+C$M:C$s<2/2.75?C$T*(7.5625*(C$s-=1.5/2.75)*C$s+.75)+C$M:C$s<2.5/2.75?C$T*(7.5625*(C$s-=2.25/2.75)*C$s+.9375)+C$M:C$T*(7.5625*(C$s-=2.625/2.75)*C$s+.984375)+C$M},C$u.backIn=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=1.70158),C$T*(C$s/=C$X)*C$s*((C$x+1)*C$s-C$x)+C$M},C$u.backInOut=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=1.70158),(C$s/=.5*C$X)<1?.5*C$T*(C$s*C$s*((1+(C$x*=1.525))*C$s-C$x))+C$M:C$T/2*((C$s-=2)*C$s*((1+(C$x*=1.525))*C$s+C$x)+2)+C$M},C$u.backOut=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=1.70158),C$T*((C$s=C$s/C$X-1)*C$s*((C$x+1)*C$s+C$x)+1)+C$M},C$u.elasticIn=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l;return void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=0),0==C$s?C$M:1==(C$s/=C$X)?C$M+C$T:(C$c||(C$c=.3*C$X),C$l=!C$x||0<C$T&&C$x<C$T||C$T<0&&C$x<-C$T?(C$x=C$T,C$c/4):C$c/C$u.PI2*Math.asin(C$T/C$x),-C$x*Math.pow(2,10*(C$s-=1))*Math.sin((C$s*C$X-C$l)*C$u.PI2/C$c)+C$M)},C$u.elasticInOut=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l;return void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=0),0==C$s?C$M:2==(C$s/=.5*C$X)?C$M+C$T:(C$c||(C$c=C$X*(.3*1.5)),C$l=!C$x||0<C$T&&C$x<C$T||C$T<0&&C$x<-C$T?(C$x=C$T,C$c/4):C$c/C$u.PI2*Math.asin(C$T/C$x),C$s<1?C$x*Math.pow(2,10*(C$s-=1))*Math.sin((C$s*C$X-C$l)*C$u.PI2/C$c)*-.5+C$M:C$x*Math.pow(2,-10*(C$s-=1))*Math.sin((C$s*C$X-C$l)*C$u.PI2/C$c)*.5+C$T+C$M)},C$u.elasticOut=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l;return void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=0),0==C$s?C$M:1==(C$s/=C$X)?C$M+C$T:(C$c||(C$c=.3*C$X),C$l=!C$x||0<C$T&&C$x<C$T||C$T<0&&C$x<-C$T?(C$x=C$T,C$c/4):C$c/C$u.PI2*Math.asin(C$T/C$x),C$x*Math.pow(2,-10*C$s)*Math.sin((C$s*C$X-C$l)*C$u.PI2/C$c)+C$T+C$M)},C$u.strongIn=function(C$s,C$M,C$T,C$X){return C$T*(C$s/=C$X)*C$s*C$s*C$s*C$s+C$M},C$u.strongInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*C$T*C$s*C$s*C$s*C$s*C$s+C$M:.5*C$T*((C$s-=2)*C$s*C$s*C$s*C$s+2)+C$M},C$u.strongOut=function(C$s,C$M,C$T,C$X){return C$T*((C$s=C$s/C$X-1)*C$s*C$s*C$s*C$s+1)+C$M},C$u.sineInOut=function(C$s,C$M,C$T,C$X){return.5*-C$T*(Math.cos(Math.PI*C$s/C$X)-1)+C$M},C$u.sineIn=function(C$s,C$M,C$T,C$X){return-C$T*Math.cos(C$s/C$X*C$u.HALF_PI)+C$T+C$M},C$u.sineOut=function(C$s,C$M,C$T,C$X){return C$T*Math.sin(C$s/C$X*C$u.HALF_PI)+C$M},C$u.quintIn=function(C$s,C$M,C$T,C$X){return C$T*(C$s/=C$X)*C$s*C$s*C$s*C$s+C$M},C$u.quintInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*C$T*C$s*C$s*C$s*C$s*C$s+C$M:.5*C$T*((C$s-=2)*C$s*C$s*C$s*C$s+2)+C$M},C$u.quintOut=function(C$s,C$M,C$T,C$X){return C$T*((C$s=C$s/C$X-1)*C$s*C$s*C$s*C$s+1)+C$M},C$u.quartIn=function(C$s,C$M,C$T,C$X){return C$T*(C$s/=C$X)*C$s*C$s*C$s+C$M},C$u.quartInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*C$T*C$s*C$s*C$s*C$s+C$M:.5*-C$T*((C$s-=2)*C$s*C$s*C$s-2)+C$M},C$u.quartOut=function(C$s,C$M,C$T,C$X){return-C$T*((C$s=C$s/C$X-1)*C$s*C$s*C$s-1)+C$M},C$u.cubicIn=function(C$s,C$M,C$T,C$X){return C$T*(C$s/=C$X)*C$s*C$s+C$M},C$u.cubicInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*C$T*C$s*C$s*C$s+C$M:.5*C$T*((C$s-=2)*C$s*C$s+2)+C$M},C$u.cubicOut=function(C$s,C$M,C$T,C$X){return C$T*((C$s=C$s/C$X-1)*C$s*C$s+1)+C$M},C$u.quadIn=function(C$s,C$M,C$T,C$X){return C$T*(C$s/=C$X)*C$s+C$M},C$u.quadInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*C$T*C$s*C$s+C$M:.5*-C$T*(--C$s*(C$s-2)-1)+C$M},C$u.quadOut=function(C$s,C$M,C$T,C$X){return-C$T*(C$s/=C$X)*(C$s-2)+C$M},C$u.expoIn=function(C$s,C$M,C$T,C$X){return 0==C$s?C$M:C$T*Math.pow(2,10*(C$s/C$X-1))+C$M-.001*C$T},C$u.expoInOut=function(C$s,C$M,C$T,C$X){return 0==C$s?C$M:C$s==C$X?C$M+C$T:(C$s/=.5*C$X)<1?.5*C$T*Math.pow(2,10*(C$s-1))+C$M:.5*C$T*(2-Math.pow(2,-10*--C$s))+C$M},C$u.expoOut=function(C$s,C$M,C$T,C$X){return C$s==C$X?C$M+C$T:C$T*(1-Math.pow(2,-10*C$s/C$X))+C$M},C$u.circIn=function(C$s,C$M,C$T,C$X){return-C$T*(Math.sqrt(1-(C$s/=C$X)*C$s)-1)+C$M},C$u.circInOut=function(C$s,C$M,C$T,C$X){return(C$s/=.5*C$X)<1?.5*-C$T*(Math.sqrt(1-C$s*C$s)-1)+C$M:.5*C$T*(Math.sqrt(1-(C$s-=2)*C$s)+1)+C$M},C$u.circOut=function(C$s,C$M,C$T,C$X){return C$T*Math.sqrt(1-(C$s=C$s/C$X-1)*C$s)+C$M},C$u.HALF_PI=.5*Math.PI,C$u.PI2=2*Math.PI,C$u}(),C$n=function(){function C$p(){this._hit=null,this._unHit=null}C$U(C$p,"laya.utils.HitArea");var C$s=C$p.prototype;return C$s.isHit=function(C$s,C$M){return!!C$p.isHitGraphic(C$s,C$M,this.hit)&&!C$p.isHitGraphic(C$s,C$M,this.unHit)},C$s.contains=function(C$s,C$M){return this.isHit(C$s,C$M)},C$q(0,C$s,"hit",function(){return this._hit||(this._hit=new C$_),this._hit},function(C$s){this._hit=C$s}),C$q(0,C$s,"unHit",function(){return this._unHit||(this._unHit=new C$_),this._unHit},function(C$s){this._unHit=C$s}),C$p.isHitGraphic=function(C$s,C$M,C$T){if(!C$T)return!1;var C$X;if(!(C$X=C$T.cmds)&&C$T._one&&((C$X=C$p._cmds).length=1,C$X[0]=C$T._one),!C$X)return!1;var C$x,C$c,C$l=0;for(C$x=C$X.length,C$l=0;C$l<C$x;C$l++)if(C$c=C$X[C$l]){var C$u=C$C._context;switch(C$c.callee){case C$u._translate:case 6:C$s-=C$c[0],C$M-=C$c[1]}if(C$p.isHitCmd(C$s,C$M,C$c))return!0}return!1},C$p.isHitCmd=function(C$s,C$M,C$T){if(!C$T)return!1;var C$X=C$C._context,C$x=!1;switch(C$T.callee){case C$X._drawRect:case 13:C$p._rec.setTo(C$T[0],C$T[1],C$T[2],C$T[3]),C$x=C$p._rec.contains(C$s,C$M);break;case C$X._drawCircle:case C$X._fillCircle:case 14:C$x=(C$s-=C$T[0])*C$s+(C$M-=C$T[1])*C$M<C$T[2]*C$T[2];break;case C$X._drawPoly:case 18:C$s-=C$T[0],C$M-=C$T[1],C$x=C$p.ptInPolygon(C$s,C$M,C$T[2])}return C$x},C$p.ptInPolygon=function(C$s,C$M,C$T){var C$X;(C$X=C$p._ptPoint).setTo(C$s,C$M);var C$x,C$c=0,C$l=NaN,C$u=NaN,C$E=NaN,C$O=NaN;C$x=C$T.length;for(var C$U=0;C$U<C$x;C$U+=2){if(C$l=C$T[C$U],C$u=C$T[C$U+1],C$E=C$T[(C$U+2)%C$x],C$u!=(C$O=C$T[(C$U+3)%C$x]))if(!(C$X.y<Math.min(C$u,C$O)))if(!(C$X.y>=Math.max(C$u,C$O)))(C$X.y-C$u)*(C$E-C$l)/(C$O-C$u)+C$l>C$X.x&&C$c++}return C$c%2==1},C$p._cmds=[],C$E(C$p,["_rec",function(){return this._rec=new C$A},"_ptPoint",function(){return this._ptPoint=new C$k}]),C$p}(),C$$=(function(){function C$x(C$s,C$M,C$T,C$X){this.char=C$s,this.charNum=C$s.charCodeAt(0),this._x=this._y=0,this.width=C$M,this.height=C$T,this.style=C$X,this.isWord=!C$x._isWordRegExp.test(C$s)}C$U(C$x,"laya.utils.HTMLChar");var C$s=C$x.prototype;C$w.imps(C$s,{"laya.display.ILayout":!0}),C$s.setSprite=function(C$s){this._sprite=C$s},C$s.getSprite=function(){return this._sprite},C$s._isChar=function(){return!0},C$s._getCSSStyle=function(){return this.style},C$q(0,C$s,"width",function(){return this._w},function(C$s){this._w=C$s}),C$q(0,C$s,"x",function(){return this._x},function(C$s){this._sprite&&(this._sprite.x=C$s),this._x=C$s}),C$q(0,C$s,"y",function(){return this._y},function(C$s){this._sprite&&(this._sprite.y=C$s),this._y=C$s}),C$q(0,C$s,"height",function(){return this._h},function(C$s){this._h=C$s}),C$x._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function C$M(){}C$U(C$M,"laya.utils.Log"),C$M.enable=function(){C$M._logdiv||(C$M._logdiv=C$e.window.document.createElement("div"),C$e.window.document.body.appendChild(C$M._logdiv),C$M._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},C$M.toggle=function(){var C$s=C$M._logdiv.style;"1px"==C$s.width?C$s.width=C$s.height="50%":C$s.width=C$s.height="1px"},C$M.print=function(C$s){C$M._logdiv&&(C$M.maxCount<=C$M._count&&C$M.clear(),C$M._count++,C$M._logdiv.innerText+=C$s+"\n",C$M._logdiv.scrollTop=C$M._logdiv.scrollHeight)},C$M.clear=function(){C$M._logdiv.innerText="",C$M._count=0},C$M._logdiv=null,C$M._count=0,C$M.maxCount=20}(),function(){function C$M(){}C$U(C$M,"laya.utils.Mouse"),C$q(1,C$M,"cursor",function(){return C$M._style.cursor},function(C$s){C$M._style.cursor=C$s}),C$M.hide=function(){"none"!=C$M.cursor&&(C$M._preCursor=C$M.cursor,C$M.cursor="none")},C$M.show=function(){"none"==C$M.cursor&&(C$M.cursor=C$M._preCursor?C$M._preCursor:"auto")},C$M._preCursor=null,C$E(C$M,["_style",function(){return this._style=C$e.document.body.style}])}(),function(){function C$c(){}return C$U(C$c,"laya.utils.Pool"),C$c.getPoolBySign=function(C$s){return C$c._poolDic[C$s]||(C$c._poolDic[C$s]=[])},C$c.clearBySign=function(C$s){C$c._poolDic[C$s]&&(C$c._poolDic[C$s].length=0)},C$c.recover=function(C$s,C$M){C$M.__InPool||(C$M.__InPool=!0,C$c.getPoolBySign(C$s).push(C$M))},C$c.getItemByClass=function(C$s,C$M){var C$T=C$c.getPoolBySign(C$s),C$X=C$T.length?C$T.pop():new C$M;return C$X.__InPool=!1,C$X},C$c.getItemByCreateFun=function(C$s,C$M,C$T){var C$X=C$c.getPoolBySign(C$s),C$x=C$X.length?C$X.pop():C$M.call(C$T);return C$x.__InPool=!1,C$x},C$c.getItem=function(C$s){var C$M=C$c.getPoolBySign(C$s),C$T=C$M.length?C$M.pop():null;return C$T&&(C$T.__InPool=!1),C$T},C$c._poolDic={},C$c.InPoolSign="__InPool",C$c}()),C$F=function(){function C$E(){}return C$U(C$E,"laya.utils.Stat"),C$q(1,C$E,"onclick",null,function(C$s){C$E._sp&&C$E._sp.on("click",C$E._sp,C$s),C$E._canvas&&(C$E._canvas.source.onclick=C$s,C$E._canvas.source.style.pointerEvents="")}),C$E.show=function(C$s,C$M,C$T){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),!C$C.isConchApp||C$C.isConchWebGL){if(C$C.isConchWebGL||C$e.onMiniGame||C$e.onLimixiu||(C$E._useCanvas=!0),C$E._show=!0,C$E._fpsData.length=60,C$E._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},C$E._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},C$E._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},C$E._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},C$C.isWebGL)if(C$E._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},C$C.is3DMode){if(C$E._view[0].title="FPS(3D)",C$E._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},C$E._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},C$E._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==C$T){var C$X=8;C$E._view[C$X++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},C$E._view[C$X++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},C$E._view[C$X++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==C$T){C$X=8;C$E._view[C$X++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},C$E._view[C$X++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else C$E._view[0].title="FPS(WebGL)",C$E._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else C$E._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};C$E._useCanvas?C$E.createUIPre(C$s,C$M):C$E.createUI(C$s,C$M),C$E.enable()}else C$e.window.conch.showFPS&&C$e.window.conch.showFPS(C$s,C$M)},C$E.createUIPre=function(C$s,C$M){var C$T=C$e.pixelRatio;C$E._width=170*C$T,C$E._vx=75*C$T,C$E._height=C$T*(12*C$E._view.length+3*C$T)+4,C$E._fontSize=12*C$T;for(var C$X=0;C$X<C$E._view.length;C$X++)C$E._view[C$X].x=4,C$E._view[C$X].y=C$X*C$E._fontSize+2*C$T;C$E._canvas||((C$E._canvas=new C$Ps("2D")).size(C$E._width,C$E._height),(C$E._ctx=C$E._canvas.getContext("2d")).textBaseline="top",C$E._ctx.font=C$E._fontSize+"px Sans-serif",C$E._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+C$s+"px;top:"+C$M+"px;width:"+C$E._width/C$T+"px;height:"+C$E._height/C$T+"px;"),C$E._first=!0,C$E.loop(),C$E._first=!1,C$e.container.appendChild(C$E._canvas.source)},C$E.createUI=function(C$s,C$M){var C$T=C$E._sp,C$X=C$e.pixelRatio;C$T||(C$T=new C$ps,(C$E._leftText=new C$gs).pos(5,5),C$E._leftText.color="#ffffff",C$T.addChild(C$E._leftText),(C$E._txt=new C$gs).pos(80*C$X,5),C$E._txt.color="#ffffff",C$T.addChild(C$E._txt),C$E._sp=C$T),C$T.pos(C$s,C$M);for(var C$x="",C$c=0;C$c<C$E._view.length;C$c++){C$x+=C$E._view[C$c].title+"\n"}C$E._leftText.text=C$x;var C$l=170*C$X,C$u=C$X*(12*C$E._view.length+3*C$X)+4;C$E._txt.fontSize=C$E._fontSize*C$X,C$E._leftText.fontSize=C$E._fontSize*C$X,C$T.size(C$l,C$u),C$T.graphics.clear(),C$T.graphics.setAlpha(.5),C$T.graphics.drawRect(0,0,C$l,C$u,"#999999"),C$T.graphics.setAlpha(1),C$E.loop()},C$E.enable=function(){C$w.timer.frameLoop(1,C$E,C$E.loop)},C$E.hide=function(){C$E._show=!1,C$w.timer.clear(C$E,C$E.loop),C$E._canvas&&C$e.removeElement(C$E._canvas.source)},C$E.clear=function(){C$E.trianglesFaces=C$E.drawCall=C$E.shaderCall=C$E.spriteCount=C$E.spriteRenderUseCacheCount=C$E.treeNodeCollision=C$E.treeSpriteCollision=C$E.canvasNormal=C$E.canvasBitmap=C$E.canvasReCache=0},C$E.loop=function(){C$E._count++;var C$s=C$e.now();if(!(C$s-C$E._timer<1e3)){var C$M=C$E._count;if(C$E.FPS=Math.round(1e3*C$M/(C$s-C$E._timer)),C$E._show){C$E.trianglesFaces=Math.round(C$E.trianglesFaces/C$M),C$E.spriteCount=C$E._useCanvas?(C$E.drawCall=Math.round(C$E.drawCall/C$M)-2,C$E.shaderCall=Math.round(C$E.shaderCall/C$M),Math.round(C$E.spriteCount/C$M)-1):(C$E.drawCall=Math.round(C$E.drawCall/C$M)-2,C$E.shaderCall=Math.round(C$E.shaderCall/C$M)-4,Math.round(C$E.spriteCount/C$M)-4),C$E.spriteRenderUseCacheCount=Math.round(C$E.spriteRenderUseCacheCount/C$M),C$E.canvasNormal=Math.round(C$E.canvasNormal/C$M),C$E.canvasBitmap=Math.round(C$E.canvasBitmap/C$M),C$E.canvasReCache=Math.ceil(C$E.canvasReCache/C$M),C$E.treeNodeCollision=Math.round(C$E.treeNodeCollision/C$M),C$E.treeSpriteCollision=Math.round(C$E.treeSpriteCollision/C$M);var C$T=0<C$E.FPS?Math.floor(1e3/C$E.FPS).toString():" ";C$E._fpsStr=C$E.FPS+(C$E.renderSlow?" slow":"")+" "+C$T,C$E._spriteStr=C$E.spriteCount+(C$E.spriteRenderUseCacheCount?"/"+C$E.spriteRenderUseCacheCount:""),C$E._canvasStr=C$E.canvasReCache+"/"+C$E.canvasNormal+"/"+C$E.canvasBitmap,C$E.currentMemorySize=C$y.systemResourceManager.memorySize,C$E._useCanvas?C$E.renderInfoPre():C$E.renderInfo(),C$E.clear()}C$E._count=0,C$E._timer=C$s}},C$E.renderInfoPre=function(){if(C$E._canvas){var C$s=C$E._ctx;C$s.clearRect(C$E._first?0:C$E._vx,0,C$E._width,C$E._height);for(var C$M=C$C.WebGL.mainContext,C$T=0;C$T<C$E._view.length;C$T++){var C$X=C$E._view[C$T];C$E._first&&(C$s.fillStyle="white",C$s.fillText(C$X.title,C$X.x,C$X.y,null,null,null)),C$s.fillStyle=C$X.color;var C$x=-1;if((C$X=C$E._view[C$T]).varying){if(C$M)switch(C$X.varying){case 1:C$x=C$M.getParameter(C$M[C$X.value]);break;case 2:C$x=C$M.getExtension(C$X.value)}}else C$x=C$E[C$X.value];"M"==C$X.units&&(C$x=Math.floor(C$x/1048576*100)/100+" M"),"K"==C$X.units&&(C$x=Math.floor(C$x/1024*100)/100+" K"),"string"==C$X.units&&(C$x=C$x.match(/\d+\.?\d/i)),C$s.fillText(C$x+"",C$X.x+C$E._vx,C$X.y,null,null,null)}}},C$E.renderInfo=function(){for(var C$s="",C$M=C$C.WebGL.mainContext,C$T=0;C$T<C$E._view.length;C$T++){var C$X=C$E._view[C$T],C$x=-1;if(C$X.varying){if(C$M)switch(C$X.varying){case 1:C$x=C$M.getParameter(C$M[C$X.value]);break;case 2:C$x=C$M.getExtension(C$X.value)}}else C$x=C$E[C$X.value];"M"==C$X.units&&(C$x=Math.floor(C$x/1048576*100)/100+" M"),"K"==C$X.units&&(C$x=Math.floor(C$x/1024*100)/100+" K"),"string"==C$X.units&&(C$x=C$x.match(/\d+\.?\d/i)),C$s+=C$x+"\n"}C$E._txt.text=C$s},C$E.FPS=0,C$E.loopCount=0,C$E.shaderCall=0,C$E.drawCall=0,C$E.trianglesFaces=0,C$E.spriteCount=0,C$E.spriteRenderUseCacheCount=0,C$E.treeNodeCollision=0,C$E.treeSpriteCollision=0,C$E.canvasNormal=0,C$E.canvasBitmap=0,C$E.canvasReCache=0,C$E.renderSlow=!1,C$E.currentMemorySize=0,C$E._fpsStr=null,C$E._canvasStr=null,C$E._spriteStr=null,C$E._fpsData=[],C$E._timer=0,C$E._count=0,C$E._view=[],C$E._fontSize=12,C$E._txt=null,C$E._leftText=null,C$E._sp=null,C$E._show=!1,C$E._useCanvas=!1,C$E._canvas=null,C$E._ctx=null,C$E._first=!1,C$E._vx=NaN,C$E._width=0,C$E._height=100,C$E}(),C$W=(function(){function C$s(){this._strsToID={},this._idToStrs=[],this._length=0}C$U(C$s,"laya.utils.StringKey");var C$M=C$s.prototype;C$M.add=function(C$s){var C$M=this._strsToID[C$s];return null!=C$M?C$M:(this._idToStrs[this._length]=C$s,this._strsToID[C$s]=this._length++)},C$M.getID=function(C$s){var C$M=this._strsToID[C$s];return null==C$M?-1:C$M},C$M.getName=function(C$s){var C$M=this._idToStrs[C$s];return null==C$M?void 0:C$M}}(),function(){var C$O;function C$s(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}C$U(C$s,"laya.utils.Timer");var C$M=C$s.prototype;return C$M._init=function(){C$w.timer&&C$w.timer.frameLoop(1,this,this._update)},C$M._now=function(){return Date.now()},C$M._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var C$s=this.currFrame=this.currFrame+this.scale,C$M=this._now();this._delta=(C$M-this._lastTimer)*this.scale;var C$T=this.currTimer=this.currTimer+this._delta;C$w.isDebug&&6e4<Math.abs(C$M-this._lastTimer)&&console.error("系统时间错误！"+(C$M-this._lastTimer)),this._lastTimer=C$M;var C$X=this._handlers;for(C$l=this._count=0,C$u=C$X.length;C$l<C$u;C$l++)if(null!==(C$E=C$X[C$l]).method){var C$x=C$E.userFrame?C$s:C$T;if(C$x>=C$E.exeTime)if(C$E.repeat)if(C$E.jumpFrame)for(;C$x>=C$E.exeTime;)C$E.exeTime+=C$E.delay,C$E.run(!1);else C$E.exeTime+=C$E.delay,C$E.run(!1),C$x>C$E.exeTime&&(C$E.exeTime+=Math.ceil((C$x-C$E.exeTime)/C$E.delay)*C$E.delay);else C$E.run(!0)}else this._count++;(30<this._count||C$s%200==0)&&this._clearHandlers();for(var C$c=this._laters,C$l=0,C$u=C$c.length-1;C$l<=C$u;C$l++){var C$E=C$c[C$l];this._isIgnoreRecover(C$E)||(null!==C$E.method&&(delete this._map[C$E.key],C$E.run(!1)),this._recoverHandler(C$E)),C$l===C$u&&(C$u=C$c.length-1)}C$c.length=0}},C$M._clearHandlers=function(){for(var C$s=this._handlers,C$M=0,C$T=C$s.length;C$M<C$T;C$M++){var C$X=C$s[C$M];null!==C$X.method?this._temp.push(C$X):this._isIgnoreRecover(C$X)?this._temp.push(C$X):this._recoverHandler(C$X)}this._handlers=this._temp,this._temp=C$s,this._temp.length=0},C$M._recoverHandler=function(C$s){this._map[C$s.key]==C$s&&delete this._map[C$s.key],C$s.recover()},C$M._create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){if(!C$T)return C$x.apply(C$X,C$c),null;if(C$l){var C$E=this._getHandler(C$X,C$x);if(C$E)return C$E.repeat=C$M,C$E.userFrame=C$s,C$E.delay=C$T,C$E.ignoreRecover=C$u,C$E.caller=C$X,C$E.method=C$x,C$E.args=C$c,C$E.exeTime=C$T+(C$s?this.currFrame:this.currTimer+this._now()-this._lastTimer),C$E}return(C$E=C$O.create()).repeat=C$M,C$E.userFrame=C$s,C$E.delay=C$T,C$E.ignoreRecover=C$u,C$E.caller=C$X,C$E.method=C$x,C$E.args=C$c,C$E.exeTime=C$T+(C$s?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(C$E),this._handlers.push(C$E),C$E},C$M._indexHandler=function(C$s){var C$M=C$s.caller,C$T=C$s.method,C$X=C$M?C$M.$_GID||(C$M.$_GID=C$j.getGID()):0,C$x=C$T.$_TID||(C$T.$_TID=this._mid++);C$s.key=C$X+"_"+C$x,this._map[C$s.key]=C$s},C$M.once=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=!0),this._create(!1,!1,C$s,C$M,C$T,C$X,C$x,!1)},C$M.loop=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){void 0===C$x&&(C$x=!0),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!1);var C$u=this._create(!1,!0,C$s,C$M,C$T,C$X,C$x,C$l);C$u&&(C$u.jumpFrame=C$c)},C$M.frameOnce=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=!0),this._create(!0,!1,C$s,C$M,C$T,C$X,C$x,!1)},C$M.frameLoop=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$x&&(C$x=!0),void 0===C$c&&(C$c=!1),this._create(!0,!0,C$s,C$M,C$T,C$X,C$x,C$c)},C$M.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+C$O._freeCount},C$M.clear=function(C$s,C$M){var C$T=this._getHandler(C$s,C$M);return!(!C$T||this._isIgnoreRecover(C$T))&&(delete this._map[C$T.key],C$T.key=null,C$T.clear(),!0)},C$M.clearAll=function(C$s){if(C$s)for(var C$M=0,C$T=this._handlers.length;C$M<C$T;C$M++){var C$X=this._handlers[C$M];C$X.caller===C$s&&(this._isIgnoreRecover(C$X)||(delete this._map[C$X.key],C$X.key=null,C$X.clear()))}},C$M._getHandler=function(C$s,C$M){var C$T=C$s?C$s.$_GID||(C$s.$_GID=C$j.getGID()):0,C$X=C$M.$_TID||(C$M.$_TID=this._mid++);return this._map[C$T+"_"+C$X]},C$M._isIgnoreRecover=function(C$s){if(C$s.ignoreRecover||C$s.caller&&"IgnoreRecover"==C$s.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var C$M="";try{arguments.propertyIsEnumerable.caller}catch(C$s){C$M=C$s.stack}C$w.recordError("报错：核心定时器销毁忽略  "+C$M)}return!0}return!1},C$M.hasHandler=function(C$s,C$M){return this._map[C$s.$_GID+"_"+C$M.$_TID]},C$M.callLater=function(C$s,C$M,C$T){if(null==this._getHandler(C$s,C$M)){var C$X=C$O.create();C$X.caller=C$s,C$X.method=C$M,C$X.args=C$T,this._indexHandler(C$X),this._laters.push(C$X)}},C$M.runCallLater=function(C$s,C$M){var C$T=this._getHandler(C$s,C$M);C$T&&null!=C$T.method&&(this._isIgnoreRecover(C$T)||(delete this._map[C$T.key],C$T.run(!0)))},C$M.runTimer=function(C$s,C$M){this.runCallLater(C$s,C$M)},C$q(0,C$M,"delta",function(){return this._delta}),C$s.__init$=function(){C$O=function(){function C$M(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}C$U(C$M,"");var C$s=C$M.prototype;return C$s.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},C$s.recover=function(){this.clear(),this.args=C$M._freeHandler,C$M._freeHandler=this,C$M._freeCount++},C$s.run=function(C$s){var C$M=this.caller;if(C$M&&C$M.destroyed)return this.clear();var C$T=this.method,C$X=this.args;C$s&&this.clear(),null!=C$T&&(C$X?C$T.apply(C$M,C$X):C$T.call(C$M))},C$M._freeHandler=null,C$M._freeCount=0,C$M.create=function(){var C$s=C$M._freeHandler;return C$s?(C$M._freeHandler=C$s.args,--C$M._freeCount,C$s.args=null,C$s):new C$M},C$M}()},C$s}()),C$a=function(){function C$p(){this.gid=0}C$U(C$p,"laya.utils.Tween");var C$s=C$p.prototype;return C$s.to=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){return void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=!1),this._create(C$s,C$M,C$T,C$X,C$x,C$c,C$l,!0,!1,!0)},C$s.from=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){return void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=!1),this._create(C$s,C$M,C$T,C$X,C$x,C$c,C$l,!1,!1,!0)},C$s._create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){if(!C$s)throw new Error("Tween:target is null");this._target=C$s,this._duration=C$T,this._ease=C$X||C$M.ease||C$p.easeNone,this._complete=C$x||C$M.complete,this._delay=C$c,this._props=[],this._usedTimer=0,this._startTimer=C$e.now(),this._usedPool=C$E,this._delayParam=null,this.update=C$M.update;var C$U=C$s.$_GID||(C$s.$_GID=C$j.getGID());return C$p.tweenMap[C$U]?(C$l&&C$p.clearTween(C$s),C$p.tweenMap[C$U].push(this)):C$p.tweenMap[C$U]=[this],C$O?C$c<=0?this.firstStart(C$s,C$M,C$u):(this._delayParam=[C$s,C$M,C$u],C$w.scaleTimer.once(C$c,this,this.firstStart,this._delayParam)):this._initProps(C$s,C$M,C$u),this},C$s.firstStart=function(C$s,C$M,C$T){this._delayParam=null,C$s.destroyed?this.clear():(this._initProps(C$s,C$M,C$T),this._beginLoop())},C$s._initProps=function(C$s,C$M,C$T){for(var C$X in C$M)if("number"==typeof C$s[C$X]){var C$x=C$T?C$s[C$X]:C$M[C$X],C$c=C$T?C$M[C$X]:C$s[C$X];this._props.push([C$X,C$x,C$c-C$x]),C$T||(C$s[C$X]=C$x)}},C$s._beginLoop=function(){C$w.scaleTimer.frameLoop(1,this,this._doEase)},C$s._doEase=function(){this._updateEase(C$e.now())},C$s._updateEase=function(C$s){var C$M=this._target;if(C$M){if(C$M.destroyed)return C$p.clearTween(C$M);var C$T=this._usedTimer=C$s-this._startTimer-this._delay;if(!(C$T<0)){if(C$T>=this._duration)return this.complete();for(var C$X=0<C$T?this._ease(C$T,0,1,this._duration):0,C$x=this._props,C$c=0,C$l=C$x.length;C$c<C$l;C$c++){var C$u=C$x[C$c];C$M[C$u[0]]=C$u[1]+C$X*C$u[2]}this.update&&this.update.run()}}},C$s.complete=function(){if(this._target){C$w.scaleTimer.runTimer(this,this.firstStart);for(var C$s=this._target,C$M=this._props,C$T=this._complete,C$X=0,C$x=C$M.length;C$X<C$x;C$X++){var C$c=C$M[C$X];C$s[C$c[0]]=C$c[1]+C$c[2]}this.update&&this.update.run(),this.clear(),C$T&&C$T.run()}},C$s.pause=function(){C$w.scaleTimer.clear(this,this._beginLoop),C$w.scaleTimer.clear(this,this._doEase),C$w.scaleTimer.clear(this,this.firstStart);var C$s;(C$s=C$e.now()-this._startTimer-this._delay)<0&&(this._usedTimer=C$s)},C$s.setStartTime=function(C$s){this._startTimer=C$s},C$s.clear=function(){this._target&&(this._remove(),this._clear())},C$s._clear=function(){this.pause(),C$w.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,C$$.recover("tween",this))},C$s.recover=function(){this._usedPool=!0,this._clear()},C$s._remove=function(){var C$s=C$p.tweenMap[this._target.$_GID];if(C$s)for(var C$M=0,C$T=C$s.length;C$M<C$T;C$M++)if(C$s[C$M]===this){C$s.splice(C$M,1);break}},C$s.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=C$e.now(),this._delayParam)C$w.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var C$s=this._props,C$M=0,C$T=C$s.length;C$M<C$T;C$M++){var C$X=C$s[C$M];this._target[C$X[0]]=C$X[1]}C$w.scaleTimer.once(this._delay,this,this._beginLoop)}},C$s.resume=function(){this._usedTimer>=this._duration||(this._startTimer=C$e.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?C$w.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},C$q(0,C$s,"progress",null,function(C$s){var C$M=C$s*this._duration;this._startTimer=C$e.now()-this._delay-C$M}),C$p.to=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){return void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=!0),C$$.getItemByClass("tween",C$p)._create(C$s,C$M,C$T,C$X,C$x,C$c,C$l,!0,C$u,!0)},C$p.from=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){return void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=!0),C$$.getItemByClass("tween",C$p)._create(C$s,C$M,C$T,C$X,C$x,C$c,C$l,!1,C$u,!0)},C$p.clearAll=function(C$s){if(C$s&&C$s.$_GID){var C$M=C$p.tweenMap[C$s.$_GID];if(C$M){for(var C$T=0,C$X=C$M.length;C$T<C$X;C$T++)C$M[C$T]._clear();C$M.length=0}}},C$p.clear=function(C$s){C$s.clear()},C$p.clearTween=function(C$s){C$p.clearAll(C$s)},C$p.easeNone=function(C$s,C$M,C$T,C$X){return C$T*C$s/C$X+C$M},C$p.tweenMap={},C$p}(),C$j=function(){function C$u(){}return C$U(C$u,"laya.utils.Utils"),C$u.toRadian=function(C$s){return C$s*C$u._pi2},C$u.toAngle=function(C$s){return C$s*C$u._pi},C$u.toHexColor=function(C$s){if(C$s<0||isNaN(C$s))return null;for(var C$M=C$s.toString(16);C$M.length<6;)C$M="0"+C$M;return"#"+C$M},C$u.getGID=function(){return C$u._gid++},C$u.concatArray=function(C$s,C$M){if(!C$M)return C$s;if(!C$s)return C$M;var C$T=0,C$X=C$M.length;for(C$T=0;C$T<C$X;C$T++)C$s.push(C$M[C$T]);return C$s},C$u.clearArray=function(C$s){return C$s&&(C$s.length=0),C$s},C$u.copyArray=function(C$s,C$M){if(C$s||(C$s=[]),!C$M)return C$s;C$s.length=C$M.length;var C$T=0,C$X=C$M.length;for(C$T=0;C$T<C$X;C$T++)C$s[C$T]=C$M[C$T];return C$s},C$u.getGlobalRecByPoints=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l;return C$c=new C$k(C$M,C$T),C$c=C$s.localToGlobal(C$c),C$l=new C$k(C$X,C$x),C$l=C$s.localToGlobal(C$l),C$A._getWrapRec([C$c.x,C$c.y,C$l.x,C$l.y])},C$u.getGlobalPosAndScale=function(C$s){return C$u.getGlobalRecByPoints(C$s,0,0,1,1)},C$u.bind=function(C$s,C$M){return C$s.bind(C$M)},C$u.measureText=function(C$s,C$M){return C$v.measureText(C$s,C$M)},C$u.contextMeasureText=function(C$s){var C$M=C$e.context.measureText(C$s);return C$M||(C$M={width:16,height:16}),C$M},C$u.updateOrder=function(C$s){if(!C$s||C$s.length<2)return!1;for(var C$M,C$T=1,C$X=0,C$x=C$s.length,C$c=NaN;C$T<C$x;){for(C$M=C$s[C$X=C$T],C$c=C$s[C$X]._zOrder;-1<--C$X&&C$s[C$X]._zOrder>C$c;)C$s[C$X+1]=C$s[C$X];C$s[C$X+1]=C$M,C$T++}var C$l=C$M.parent.conchModel;if(C$l)if(null!=C$l.updateZOrder)C$l.updateZOrder();else{for(C$T=0;C$T<C$x;C$T++)C$l.removeChild(C$s[C$T].conchModel);for(C$T=0;C$T<C$x;C$T++)C$l.addChildAt(C$s[C$T].conchModel,C$T)}return!0},C$u.transPointList=function(C$s,C$M,C$T){var C$X=0,C$x=C$s.length;for(C$X=0;C$X<C$x;C$X+=2)C$s[C$X]+=C$M,C$s[C$X+1]+=C$T},C$u.parseInt=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T=C$e.window.parseInt(C$s,C$M);return isNaN(C$T)?0:C$T},C$u.getFileExtension=function(C$s){C$u._extReg.lastIndex=C$s.lastIndexOf(".");var C$M=C$u._extReg.exec(C$s);return C$M&&1<C$M.length?C$M[1].toLowerCase():null},C$u.getTransformRelativeToWindow=function(C$s,C$M,C$T){var C$X=C$w.stage,C$x=laya.utils.Utils.getGlobalPosAndScale(C$s),C$c=C$X._canvasTransform.clone(),C$l=C$c.tx,C$u=C$c.ty;C$c.rotate(-Math.PI/180*C$w.stage.canvasDegree),C$c.scale(C$w.stage.clientScaleX,C$w.stage.clientScaleY);var C$E=C$w.stage.canvasDegree%180!=0,C$O=NaN,C$U=NaN;C$E?(C$O=C$T+C$x.y,C$U=C$M+C$x.x,C$O*=C$c.d,C$U*=C$c.a,90==C$w.stage.canvasDegree?(C$O=C$l-C$O,C$U+=C$u):(C$O+=C$l,C$U=C$u-C$U)):(C$O=C$M+C$x.x,C$U=C$T+C$x.y,C$O*=C$c.a,C$U*=C$c.d,C$O+=C$l,C$U+=C$u);var C$p=NaN,C$_=NaN;return C$_=C$E?(C$p=C$c.d*C$x.height,C$c.a*C$x.width):(C$p=C$c.a*C$x.width,C$c.d*C$x.height),{x:C$O,y:C$U,scaleX:C$p,scaleY:C$_}},C$u.fitDOMElementInArea=function(C$s,C$M,C$T,C$X,C$x,C$c){C$s._fitLayaAirInitialized||(C$s._fitLayaAirInitialized=!0,C$s.style.transformOrigin=C$s.style.webKittransformOrigin="left top",C$s.style.position="absolute");var C$l=C$u.getTransformRelativeToWindow(C$M,C$T,C$X);C$s.style.transform=C$s.style.webkitTransform="scale("+C$l.scaleX+","+C$l.scaleY+") rotate("+C$w.stage.canvasDegree+"deg)",C$s.style.width=C$x+"px",C$s.style.height=C$c+"px",C$s.style.left=C$l.x+"px",C$s.style.top=C$l.y+"px"},C$u.isOkTextureList=function(C$s){if(!C$s)return!1;var C$M,C$T=0,C$X=C$s.length;for(C$T=0;C$T<C$X;C$T++)if(!(C$M=C$s[C$T])||!C$M.source)return!1;return!0},C$u.isOKCmdList=function(C$s){if(!C$s)return!1;var C$M,C$T,C$X=0,C$x=C$s.length,C$c=C$C._context;for(C$X=0;C$X<C$x;C$X++)switch((C$M=C$s[C$X]).callee){case C$c._drawTexture:case C$c._fillTexture:case C$c._drawTextureWithTransform:if(!(C$T=C$M[0])||!C$T.source)return!1}return!0},C$u._gid=1,C$u._pi=180/Math.PI,C$u._pi2=Math.PI/180,C$u._extReg=/\.(\w+)\??/g,C$u.parseXMLFromString=function(C$s){var C$M;if(C$s=C$s.replace(/>\s+</g,"><"),-1<(C$M=(new DOMParser).parseFromString(C$s,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(C$M.firstChild.firstChild.textContent);return C$M},C$u}(),C$i=function(){function C$s(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],C$C.isWebGL&&C$b.regCacheByFunction(C$j.bind(this.startDispose,this),C$j.bind(this.getCacheList,this))}C$U(C$s,"laya.utils.VectorGraphManager");var C$M=C$s.prototype;return C$M.getId=function(){return this._id++},C$M.addShape=function(C$s,C$M){this.shapeDic[C$s]=C$M,this.useDic[C$s]||(this.useDic[C$s]=!0)},C$M.addLine=function(C$s,C$M){this.shapeLineDic[C$s]=C$M,this.shapeLineDic[C$s]||(this.shapeLineDic[C$s]=!0)},C$M.getShape=function(C$s){this._checkKey&&null!=this.useDic[C$s]&&(this.useDic[C$s]=!0)},C$M.deleteShape=function(C$s){this.shapeDic[C$s]&&(this.shapeDic[C$s]=null,delete this.shapeDic[C$s]),this.shapeLineDic[C$s]&&(this.shapeLineDic[C$s]=null,delete this.shapeLineDic[C$s]),null!=this.useDic[C$s]&&delete this.useDic[C$s]},C$M.getCacheList=function(){var C$s,C$M=[];for(C$s in this.shapeDic)C$M.push(this.shapeDic[C$s]);for(C$s in this.shapeLineDic)C$M.push(this.shapeLineDic[C$s]);return C$M},C$M.startDispose=function(C$s){var C$M;for(C$M in this.useDic)this.useDic[C$M]=!1;this._checkKey=!0},C$M.endDispose=function(){if(this._checkKey){var C$s;for(C$s in this.useDic)this.useDic[C$s]||this.deleteShape(C$s);this._checkKey=!1}},C$s.getInstance=function(){return C$s.instance=C$s.instance||new C$s},C$s.instance=null,C$s}(),C$H=function(){function C$X(){this._obj=null,this._obj=C$X.supportWeakMap?new C$e.window.WeakMap:{},C$X.supportWeakMap||C$X._maps.push(this)}C$U(C$X,"laya.utils.WeakObject");var C$s=C$X.prototype;return C$s.set=function(C$s,C$M){if(null!=C$s)if(C$X.supportWeakMap){var C$T=C$s;"string"!=typeof C$s&&"number"!=typeof C$s||(C$T=C$X._keys[C$s])||(C$T=C$X._keys[C$s]={k:C$s}),this._obj.set(C$T,C$M)}else"string"==typeof C$s||"number"==typeof C$s?this._obj[C$s]=C$M:(C$s.$_GID||(C$s.$_GID=C$j.getGID()),this._obj[C$s.$_GID]=C$M)},C$s.get=function(C$s){if(null==C$s)return null;if(C$X.supportWeakMap){var C$M="string"==typeof C$s||"number"==typeof C$s?C$X._keys[C$s]:C$s;return C$M?this._obj.get(C$M):null}return"string"==typeof C$s||"number"==typeof C$s?this._obj[C$s]:this._obj[C$s.$_GID]},C$s.del=function(C$s){if(null!=C$s)if(C$X.supportWeakMap){var C$M="string"==typeof C$s||"number"==typeof C$s?C$X._keys[C$s]:C$s;if(!C$M)return;this._obj.delete(C$M)}else"string"==typeof C$s||"number"==typeof C$s?delete this._obj[C$s]:delete this._obj[this._obj.$_GID]},C$s.has=function(C$s){if(null==C$s)return!1;if(C$X.supportWeakMap){var C$M="string"==typeof C$s||"number"==typeof C$s?C$X._keys[C$s]:C$s;return this._obj.has(C$M)}return"string"==typeof C$s||"number"==typeof C$s?null!=this._obj[C$s]:null!=this._obj[this._obj.$_GID]},C$X.__init__=function(){(C$X.supportWeakMap=null!=C$e.window.WeakMap)||C$w.timer.loop(C$X.delInterval,null,C$X.clearCache)},C$X.clearCache=function(){for(var C$s=0,C$M=C$X._maps.length;C$s<C$M;C$s++){C$X._maps[C$s]._obj={}}},C$X.supportWeakMap=!1,C$X.delInterval=3e5,C$X._keys={},C$X._maps=[],C$E(C$X,["I",function(){return this.I=new C$X}]),C$X}(),C$d=function(){function C$s(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}C$U(C$s,"laya.utils.WordText");var C$M=C$s.prototype;return C$M.setText=function(C$s){this.changed=!0,this._text=C$s},C$M.toString=function(){return this._text},C$M.charCodeAt=function(C$s){return this._text?this._text.charCodeAt(C$s):NaN},C$M.charAt=function(C$s){return this._text?this._text.charAt(C$s):null},C$q(0,C$M,"length",function(){return this._text?this._text.length:0}),C$s}(),C$ss=function(C$s){function C$l(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,C$l.__super.call(this),this._childs=C$l.ARRAY_EMPTY,this._$P=C$l.PROP_EMPTY,this.timer=C$w.scaleTimer,this.conchModel=C$C.isConchNode?this.createConchModel():null}C$U(C$l,"laya.display.Node",C$O);var C$M=C$l.prototype;return C$M._setBit=function(C$s,C$M){1==C$s&&(this._getBit(C$s)!=C$M&&this._updateDisplayedInstage());C$M?this._bits|=C$s:this._bits&=~C$s},C$M._getBit=function(C$s){return 0!=(this._bits&C$s)},C$M._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},C$M._setUpNoticeType=function(C$s){var C$M=this;for(C$M._setBit(C$s,!0),C$M=C$M.parent;C$M;){if(C$M._getBit(C$s))return;C$M._setBit(C$s,!0),C$M=C$M.parent}},C$M.on=function(C$s,C$M,C$T,C$X){return"display"!==C$s&&"undisplay"!==C$s||this._getBit(1)||this._setUpNoticeType(1),this._createListener(C$s,C$M,C$T,C$X,!1)},C$M.once=function(C$s,C$M,C$T,C$X){return"display"!==C$s&&"undisplay"!==C$s||this._getBit(1)||this._setUpNoticeType(1),this._createListener(C$s,C$M,C$T,C$X,!0)},C$M.createConchModel=function(){return null},C$M.destroy=function(C$s){void 0===C$s&&(C$s=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(C$s?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},C$M.destroyChildren=function(){if(this._childs)for(var C$s=this._childs.length-1;-1<C$s;C$s--)this._childs[C$s].destroy(!0)},C$M.addChild=function(C$s){if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),C$s._parent===this){var C$M=this.getChildIndex(C$s);C$M!==this._childs.length-1&&(this._childs.splice(C$M,1),this._childs.push(C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1)),this._childChanged())}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1),(C$s.parent=this)._childChanged();return C$s},C$M.addChildren=function(C$s){for(var C$M=arguments,C$T=0,C$X=C$M.length;C$T<C$X;)this.addChild(C$M[C$T++])},C$M.addChildAt=function(C$s,C$M){if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),0<=C$M&&C$M<=this._childs.length){if(C$s._parent===this){var C$T=this.getChildIndex(C$s);this._childs.splice(C$T,1),this._childs.splice(C$M,0,C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,C$M)),this._childChanged()}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(C$M,0,C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,C$M),C$s.parent=this;return C$s}throw new Error("appendChildAt:The index is out of bounds")},C$M.getChildIndex=function(C$s){return this._childs.indexOf(C$s)},C$M.getChildByName=function(C$s){var C$M=this._childs;if(C$M)for(var C$T=0,C$X=C$M.length;C$T<C$X;C$T++){var C$x=C$M[C$T];if(C$x.name===C$s)return C$x}return null},C$M._get$P=function(C$s){return this._$P[C$s]},C$M._set$P=function(C$s,C$M){return this.destroyed||(this._$P===C$l.PROP_EMPTY&&(this._$P={}),this._$P[C$s]=C$M),C$M},C$M.getChildAt=function(C$s){return this._childs[C$s]},C$M.setChildIndex=function(C$s,C$M){var C$T=this._childs;if(C$M<0||C$M>=C$T.length)throw new Error("setChildIndex:The index is out of bounds.");var C$X=this.getChildIndex(C$s);if(C$X<0)throw new Error("setChildIndex:node is must child of this object.");return C$T.splice(C$X,1),C$T.splice(C$M,0,C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,C$M)),this._childChanged(),C$s},C$M._childChanged=function(C$s){},C$M.removeChild=function(C$s){if(!this._childs)return C$s;var C$M=this._childs.indexOf(C$s);return this.removeChildAt(C$M)},C$M.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},C$M.removeChildByName=function(C$s){var C$M=this.getChildByName(C$s);return C$M&&this.removeChild(C$M),C$M},C$M.removeChildAt=function(C$s){var C$M=this.getChildAt(C$s);if(C$M){for(var C$T=this._childs.length-1,C$X=C$s;C$X<C$T;++C$X)this._childs[C$X]=this._childs[C$X+1];this._childs.length=C$T,this.conchModel&&this.conchModel.removeChild(C$M.conchModel),C$M.parent=null}return C$M},C$M.removeChildren=function(C$s,C$M){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=2147483647),this._childs&&0<this._childs.length){var C$T=this._childs;if(0===C$s&&C$c<=C$M){var C$X=C$T;this._childs=C$l.ARRAY_EMPTY}else C$X=C$T.splice(C$s,C$M-C$s);for(var C$x=0,C$c=C$X.length;C$x<C$c;C$x++)C$X[C$x].parent=null,this.conchModel&&this.conchModel.removeChild(C$X[C$x].conchModel)}return this},C$M.replaceChild=function(C$s,C$M){var C$T=this._childs.indexOf(C$M);return-1<C$T?(this._childs.splice(C$T,1,C$s),this.conchModel&&(this.conchModel.removeChild(C$M.conchModel),this.conchModel.addChildAt(C$s.conchModel,C$T)),C$M.parent=null,C$s.parent=this,C$s):null},C$M._updateDisplayedInstage=function(){var C$s;C$s=this;var C$M=C$w.stage;for(this._displayedInStage=!1;C$s;){if(C$s._getBit(1)){this._displayedInStage=C$s._displayedInStage;break}if(C$s==C$M||C$s._displayedInStage){this._displayedInStage=!0;break}C$s=C$s.parent}},C$M._setDisplay=function(C$s){this._displayedInStage!==C$s&&((this._displayedInStage=C$s)?this.event("display"):this.event("undisplay"))},C$M._displayChild=function(C$s,C$M){var C$T=C$s._childs;if(C$T)for(var C$X=0;C$X<C$T.length;C$X++){var C$x=C$T[C$X];C$x&&C$x._getBit(1)&&(0<C$x._childs.length?this._displayChild(C$x,C$M):C$x._setDisplay(C$M))}C$s._setDisplay(C$M)},C$M.contains=function(C$s){if(C$s===this)return!0;for(;C$s;){if(C$s.parent===this)return!0;C$s=C$s.parent}return!1},C$M.timerLoop=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$x&&(C$x=!0),void 0===C$c&&(C$c=!1),this.timer.loop(C$s,C$M,C$T,C$X,C$x,C$c)},C$M.timerOnce=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=!0),this.timer._create(!1,!1,C$s,C$M,C$T,C$X,C$x)},C$M.frameLoop=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=!0),this.timer._create(!0,!0,C$s,C$M,C$T,C$X,C$x)},C$M.frameOnce=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=!0),this.timer._create(!0,!1,C$s,C$M,C$T,C$X,C$x)},C$M.clearTimer=function(C$s,C$M){this.timer.clear(C$s,C$M)},C$q(0,C$M,"numChildren",function(){return this._childs.length}),C$q(0,C$M,"destroyed",function(){return this._destroyed}),C$q(0,C$M,"parent",function(){return this._parent},function(C$s){this._parent!==C$s&&(C$s?(this._parent=C$s,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),C$s.displayedInStage&&this._displayChild(this,!0)),C$s._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=C$s))}),C$q(0,C$M,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),C$l.ARRAY_EMPTY=[],C$l.PROP_EMPTY={},C$l.NOTICE_DISPLAY=1,C$l.MOUSEENABLE=2,C$l}(),C$Ms=function(C$s){function C$_(C$s){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,C$_.__super.call(this),this._padding=C$_._PADDING,this._spacing=C$_._SPACING,this._aligns=C$_._ALIGNS,this._font=C$R.EMPTY,this._ower=C$s}C$U(C$_,"laya.display.css.CSSStyle",C$s);var C$M=C$_.prototype;return C$M.destroy=function(){this._ower=null,this._font=null,this._rect=null},C$M.inherit=function(C$s){this._font=C$s._font,this._spacing=C$s._spacing===C$_._SPACING?C$_._SPACING:C$s._spacing.slice(),this.lineHeight=C$s.lineHeight},C$M._widthAuto=function(){return 0!=(262144&this._type)},C$M.widthed=function(C$s){return 0!=(8&this._type)},C$M._calculation=function(C$s,C$M){if(C$M.indexOf("%")<0)return!1;var C$X=this._ower,C$x=C$X.parent,C$c=this._rect;function C$l(C$s,C$M,C$T){return C$s*C$T[0]+C$M*C$T[1]+C$T[2]}function C$T(C$s){var C$M=C$x.width,C$T=C$X.width;C$c.width&&(C$X.width=C$l(C$M,C$T,C$c.width)),C$c.height&&(C$X.height=C$l(C$M,C$T,C$c.height)),C$c.left&&(C$X.x=C$l(C$M,C$T,C$c.left)),C$c.top&&(C$X.y=C$l(C$M,C$T,C$c.top))}null===C$c&&(C$x._getCSSStyle()._type|=524288,C$x.on("resize",this,C$T),this._rect=C$c={input:{}});var C$u=C$M.split(" ");return C$u[0]=parseFloat(C$u[0])/100,1==C$u.length?C$u[1]=C$u[2]=0:(C$u[1]=parseFloat(C$u[1])/100,C$u[2]=parseFloat(C$u[2])),C$c[C$s]=C$u,C$c.input[C$s]=C$M,C$T(),!0},C$M.heighted=function(C$s){return 0!=(8192&this._type)},C$M.size=function(C$s,C$M){var C$T=this._ower,C$X=!1;-1!==C$s&&C$s!=this._ower.width&&(this._type|=8,this._ower.width=C$s,C$X=!0),-1!==C$M&&C$M!=this._ower.height&&(this._type|=8192,this._ower.height=C$M,C$X=!0),C$X&&(C$T._layoutLater(),524288&this._type&&C$T.event("resize",this))},C$M._getAlign=function(){return this._aligns[0]},C$M._getValign=function(){return this._aligns[1]},C$M._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},C$M._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new C$R(this._font))},C$M.render=function(C$s,C$M,C$T,C$X){var C$x=C$s.width,C$c=C$s.height;C$T-=C$s.pivotX,C$X-=C$s.pivotY,this._bgground&&null!=this._bgground.color&&C$M.ctx.fillRect(C$T,C$X,C$x,C$c,this._bgground.color),this._border&&this._border.color&&C$M.drawRect(C$T,C$X,C$x,C$c,this._border.color.strColor,this._border.size)},C$M.getCSSStyle=function(){return this},C$M.cssText=function(C$s){this.attrs(C$_.parseOneCSS(C$s,";"))},C$M.attrs=function(C$s){if(C$s)for(var C$M=0,C$T=C$s.length;C$M<C$T;C$M++){var C$X=C$s[C$M];this[C$X[0]]=C$X[1]}},C$M.setTransform=function(C$s){"none"===C$s?this._tf=C$u._TF_EMPTY:this.attrs(C$_.parseOneCSS(C$s,","))},C$M.translate=function(C$s,C$M){this._tf===C$u._TF_EMPTY&&(this._tf=new C$x),this._tf.translateX=C$s,this._tf.translateY=C$M},C$M.scale=function(C$s,C$M){this._tf===C$u._TF_EMPTY&&(this._tf=new C$x),this._tf.scaleX=C$s,this._tf.scaleY=C$M},C$M._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},C$q(0,C$M,"block",C$s.prototype._$get_block,function(C$s){C$s?this._type|=1:this._type&=-2}),C$q(0,C$M,"valign",function(){return C$_._valigndef[this._aligns[1]]},function(C$s){this._aligns===C$_._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=C$_._valigndef[C$s]}),C$q(0,C$M,"height",null,function(C$s){if(this._type|=8192,"string"==typeof C$s){if(this._calculation("height",C$s))return;C$s=parseInt(C$s)}this.size(-1,C$s)}),C$q(0,C$M,"width",null,function(C$s){if(this._type|=8,"string"==typeof C$s){var C$M=C$s.indexOf("auto");if(0<=C$M&&(this._type|=262144,C$s=C$s.substr(0,C$M)),this._calculation("width",C$s))return;C$s=parseInt(C$s)}this.size(C$s,-1)}),C$q(0,C$M,"fontWeight",function(){return this._font.weight},function(C$s){this._createFont().weight=C$s}),C$q(0,C$M,"left",null,function(C$s){var C$M=this._ower;if("string"==typeof C$s){if("center"===C$s?C$s="50% -50% 0":"right"===C$s&&(C$s="100% -100% 0"),this._calculation("left",C$s))return;C$s=parseInt(C$s)}C$M.x=C$s}),C$q(0,C$M,"_translate",null,function(C$s){this.translate(C$s[0],C$s[1])}),C$q(0,C$M,"absolute",function(){return 0!=(4&this._type)}),C$q(0,C$M,"top",null,function(C$s){var C$M=this._ower;if("string"==typeof C$s){if("middle"===C$s?C$s="50% -50% 0":"bottom"===C$s&&(C$s="100% -100% 0"),this._calculation("top",C$s))return;C$s=parseInt(C$s)}C$M.y=C$s}),C$q(0,C$M,"align",function(){return C$_._aligndef[this._aligns[0]]},function(C$s){this._aligns===C$_._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=C$_._aligndef[C$s]}),C$q(0,C$M,"bold",function(){return this._font.bold},function(C$s){this._createFont().bold=C$s}),C$q(0,C$M,"padding",function(){return this._padding},function(C$s){this._padding=C$s}),C$q(0,C$M,"leading",function(){return this._spacing[1]},function(C$s){"string"==typeof C$s&&(C$s=parseInt(C$s+"")),this._spacing===C$_._SPACING&&(this._spacing=[0,0]),this._spacing[1]=C$s}),C$q(0,C$M,"lineElement",function(){return 0!=(65536&this._type)},function(C$s){C$s?this._type|=65536:this._type&=-65537}),C$q(0,C$M,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(C$s){this.lineElement=!1,"right"===C$s?this._type|=32768:this._type&=-32769}),C$q(0,C$M,"textDecoration",function(){return this._font.decoration},function(C$s){this._createFont().decoration=C$s}),C$q(0,C$M,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(C$s){"nowrap"===C$s&&(this._type|=131072),"none"===C$s&&(this._type&=-131073)}),C$q(0,C$M,"background",null,function(C$s){C$s?(this._bgground||(this._bgground={}),this._bgground.color=C$s,this._ower.conchModel&&this._ower.conchModel.bgColor(C$s),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),C$q(0,C$M,"wordWrap",function(){return 0==(131072&this._type)},function(C$s){C$s?this._type&=-131073:this._type|=131072}),C$q(0,C$M,"color",function(){return this._font.color},function(C$s){this._createFont().color=C$s}),C$q(0,C$M,"password",function(){return this._font.password},function(C$s){this._createFont().password=C$s}),C$q(0,C$M,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(C$s){"none"===C$s?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=C$s),this._ower.conchModel&&this._ower.conchModel.bgColor(C$s),this._ower._renderType|=256}),C$q(0,C$M,"font",function(){return this._font.toString()},function(C$s){this._createFont().set(C$s)}),C$q(0,C$M,"weight",null,function(C$s){this._createFont().weight=C$s}),C$q(0,C$M,"letterSpacing",function(){return this._spacing[0]},function(C$s){"string"==typeof C$s&&(C$s=parseInt(C$s+"")),this._spacing===C$_._SPACING&&(this._spacing=[0,0]),this._spacing[0]=C$s}),C$q(0,C$M,"fontSize",function(){return this._font.size},function(C$s){this._createFont().size=C$s}),C$q(0,C$M,"italic",function(){return this._font.italic},function(C$s){this._createFont().italic=C$s}),C$q(0,C$M,"fontFamily",function(){return this._font.family},function(C$s){this._createFont().family=C$s}),C$q(0,C$M,"stroke",function(){return this._font.stroke[0]},function(C$s){this._createFont().stroke===C$R._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=C$s}),C$q(0,C$M,"strokeColor",function(){return this._font.stroke[1]},function(C$s){this._createFont().stroke===C$R._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=C$s}),C$q(0,C$M,"border",function(){return this._border?this._border.value:""},function(C$s){if("none"!=C$s){this._border||(this._border={});var C$M=(this._border.value=C$s).split(" ");if(this._border.color=C$S.create(C$M[C$M.length-1]),1==C$M.length)return this._border.size=1,void(this._border.type="solid");var C$T=0;0<C$M[0].indexOf("px")?(this._border.size=parseInt(C$M[0]),C$T++):this._border.size=1,this._border.type=C$M[C$T],this._ower._renderType|=256}else this._border=null}),C$q(0,C$M,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(C$s){C$s?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==C$s?null:C$S.create(C$s),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),C$q(0,C$M,"position",function(){return 4&this._type?"absolute":""},function(C$s){"absolute"==C$s?this._type|=4:this._type&=-5}),C$q(0,C$M,"display",null,function(C$s){switch(C$s){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),C$q(0,C$M,"paddingLeft",function(){return this.padding[3]}),C$q(0,C$M,"paddingTop",function(){return this.padding[0]}),C$q(0,C$M,"_scale",null,function(C$s){this._ower.scale(C$s[0],C$s[1])}),C$q(0,C$M,"_rotate",null,function(C$s){this._ower.rotation=C$s}),C$_.parseOneCSS=function(C$s,C$M){for(var C$T,C$X=[],C$x=C$s.split(C$M),C$c=0,C$l=C$x.length;C$c<C$l;C$c++){var C$u=C$x[C$c],C$E=C$u.indexOf(":"),C$O=C$u.substr(0,C$E).replace(/^\s+|\s+$/g,"");if(0!=C$O.length){var C$U=C$u.substr(C$E+1).replace(/^\s+|\s+$/g,""),C$p=[C$O,C$U];switch(C$O){case"italic":case"bold":C$p[1]="true"==C$U;break;case"line-height":C$p[0]="lineHeight",C$p[1]=parseInt(C$U);break;case"font-size":C$p[0]="fontSize",C$p[1]=parseInt(C$U);break;case"padding":1<(C$T=C$U.split(" ")).length||(C$T[1]=C$T[2]=C$T[3]=C$T[0]),C$p[1]=[parseInt(C$T[0]),parseInt(C$T[1]),parseInt(C$T[2]),parseInt(C$T[3])];break;case"rotate":C$p[0]="_rotate",C$p[1]=parseFloat(C$U);break;case"scale":C$T=C$U.split(" "),C$p[0]="_scale",C$p[1]=[parseFloat(C$T[0]),parseFloat(C$T[1])];break;case"translate":C$T=C$U.split(" "),C$p[0]="_translate",C$p[1]=[parseInt(C$T[0]),parseInt(C$T[1])];break;default:(C$p[0]=C$_._CSSTOVALUE[C$O])||(C$p[0]=C$O)}C$X.push(C$p)}}return C$X},C$_.parseCSS=function(C$s,C$M){for(var C$T;null!=(C$T=C$_._parseCSSRegExp.exec(C$s));)C$_.styleSheets[C$T[1]]=C$_.parseOneCSS(C$T[2],";")},C$_.EMPTY=new C$_(null),C$_._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},C$_._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),C$_._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},C$_._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},C$_.styleSheets={},C$_.ALIGN_CENTER=1,C$_.ALIGN_RIGHT=2,C$_.VALIGN_MIDDLE=1,C$_.VALIGN_BOTTOM=2,C$_._CSS_BLOCK=1,C$_._DISPLAY_NONE=2,C$_._ABSOLUTE=4,C$_._WIDTH_SET=8,C$_._PADDING=[0,0,0,0],C$_._RECT=[-1,-1,-1,-1],C$_._SPACING=[0,0],C$_._ALIGNS=[0,0,0],C$_.ADDLAYOUTED=512,C$_._NEWFONT=4096,C$_._HEIGHT_SET=8192,C$_._BACKGROUND_SET=16384,C$_._FLOAT_RIGHT=32768,C$_._LINE_ELEMENT=65536,C$_._NOWARP=131072,C$_._WIDTHAUTO=262144,C$_._LISTERRESZIE=524288,C$_}(C$u),C$Ts=function(C$s){function C$l(){this.url=null,this.audio=null,this.loaded=!1,C$l.__super.call(this)}C$U(C$l,"laya.media.h5audio.AudioSound",C$O);var C$M=C$l.prototype;return C$M.dispose=function(){var C$s=C$l._audioCache[this.url];C$s&&(C$s.src="",delete C$l._audioCache[this.url])},C$M.load=function(C$s){var C$M;if(C$s=C$o.formatURL(C$s),(this.url=C$s)==C$Q._tMusic?(C$l._initMusicAudio(),(C$M=C$l._musicAudio).src!=C$s&&(C$l._audioCache[C$M.src]=null,C$M=null)):C$M=C$l._audioCache[C$s],C$M&&2<=C$M.readyState)this.event("complete");else{C$M||(C$M=C$s==C$Q._tMusic?(C$l._initMusicAudio(),C$l._musicAudio):C$e.createElement("audio"),(C$l._audioCache[C$s]=C$M).src=C$s),C$M.addEventListener("canplaythrough",C$X),C$M.addEventListener("error",C$x);var C$T=this;(this.audio=C$M).load?C$M.load():C$x()}function C$X(){C$c(),C$T.loaded=!0,C$T.event("complete")}function C$x(){C$M.load=null,C$c(),C$T.event("error")}function C$c(){C$M.removeEventListener("canplaythrough",C$X),C$M.removeEventListener("error",C$x)}},C$M.play=function(C$s,C$M,C$T){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),!this.url)return null;var C$X,C$x;if(!(C$X=this.url==C$Q._tMusic?C$l._musicAudio:C$l._audioCache[this.url]))return null;C$x=C$$.getItem("audio:"+this.url),C$C.isConchApp?C$x||((C$x=C$e.createElement("audio")).src=this.url):this.url==C$Q._tMusic?(C$l._initMusicAudio(),(C$x=C$l._musicAudio).src=this.url):C$x=C$x||C$X.cloneNode(!0);var C$c=new C$_s(C$x);return C$c.url=this.url,C$c.loops=C$M,C$c.startTime=C$s,C$c.startHandler=C$T,C$c.play(!1),C$Q.addChannel(C$c),C$c},C$q(0,C$M,"duration",function(){var C$s;return(C$s=C$l._audioCache[this.url])?C$s.duration:0}),C$l._initMusicAudio=function(){C$l._musicAudio||(C$l._musicAudio||(C$l._musicAudio=C$e.createElement("audio")),C$C.isConchApp||C$e.document.addEventListener("mousedown",C$l._makeMusicOK))},C$l._makeMusicOK=function(){C$e.document.removeEventListener("mousedown",C$l._makeMusicOK),C$l._musicAudio.src?C$l._musicAudio.play():(C$l._musicAudio.src="",C$l._musicAudio.load())},C$l._audioCache={},C$l._musicAudio=null,C$l}(),C$Xs=function(C$s){function C$M(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,C$M.__super.call(this)}C$U(C$M,"laya.media.SoundChannel",C$O);var C$T=C$M.prototype;return C$T.play=function(){},C$T.stop=function(){},C$T.pause=function(){},C$T.resume=function(){},C$T.__runComplete=function(C$s){C$s&&C$s.run()},C$q(0,C$T,"volume",function(){return 1},function(C$s){}),C$q(0,C$T,"position",function(){return 0}),C$q(0,C$T,"duration",function(){return 0}),C$M}(),C$xs=function(C$s){function C$M(){C$M.__super.call(this)}C$U(C$M,"laya.media.Sound",C$O);var C$T=C$M.prototype;return C$T.load=function(C$s){},C$T.play=function(C$s,C$M,C$T){return void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),null},C$T.dispose=function(){},C$q(0,C$T,"duration",function(){return 0}),C$M}(),C$cs=function(C$s){function C$x(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,C$x.__super.call(this)}C$U(C$x,"laya.media.webaudio.WebAudioSound",C$O);var C$M=C$x.prototype;return C$M.load=function(C$s){this.url=C$s,this.audioBuffer=C$x._dataCache[C$s],this.audioBuffer?this._loaded(this.audioBuffer):(C$x.e.on("loaded:"+C$s,this,this._loaded),C$x.e.on("err:"+C$s,this,this._err),C$x.__loadingSound[C$s]||(C$x.__loadingSound[C$s]=!0,C$w.loader.load(C$s,C$J.create(this,this.onloaded),null,C$us.BUFFER,4,!1,null,!0)))},C$M.onloaded=function(C$s){C$s||this._err(),this._disposed?this._removeLoadEvents():(this.data=C$s,C$x.buffs.push({buffer:this.data,url:this.url}),C$x.decode())},C$M._err=function(){if(this._removeLoadEvents(),C$x.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var C$s,C$M,C$T,C$X=0;for(C$s=(C$M=this.__toPlays).length,C$X=0;C$X<C$s;C$X++)(C$T=C$M[C$X])[3]&&!C$T[3].isStopped&&C$T[3].event("error");this.__toPlays.length=0}},C$M._loaded=function(C$s){this._removeLoadEvents(),this._disposed||(this.audioBuffer=C$s,this.loaded=!0,this.event("complete"))},C$M._removeLoadEvents=function(){C$x.e.off("loaded:"+this.url,this,this._loaded),C$x.e.off("err:"+this.url,this,this._err)},C$M.__playAfterLoaded=function(){if(this.__toPlays){var C$s,C$M,C$T,C$X=0;for(C$s=(C$M=this.__toPlays).length,C$X=0;C$X<C$s;C$X++)(C$T=C$M[C$X])[3]&&!C$T[3].isStopped&&this.play(C$T[0],C$T[1],C$T[2],C$T[3]);this.__toPlays.length=0}},C$M.play=function(C$s,C$M,C$T,C$X){return void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),C$X=C$X||new C$Rs,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([C$s,C$M,C$T,C$X]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),C$X.url=this.url,C$X.loops=C$M,C$X.audioBuffer=this.audioBuffer,C$X.startTime=C$s,C$X.startHandler=C$T,C$X.play(!1),C$Q.addChannel(C$X),C$X},C$M.dispose=function(){this._disposed=!0,delete C$x._dataCache[this.url],delete C$x.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},C$q(0,C$M,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),C$x.decode=function(){if(!(C$x.buffs.length<=0||C$x.isDecoding))if(C$x.isDecoding=!0,(C$x.tInfo=C$x.buffs.shift())&&C$x.tInfo.buffer&&C$x.tInfo.buffer.byteLength)try{C$x.ctx.decodeAudioData(C$x.tInfo.buffer,C$x._done,C$x._fail)}catch(C$s){console.error("decodeAudioData error  byteLength:"+C$x.tInfo.buffer.byteLength+"  url:"+C$x.tInfo.url)}else C$x._fail()},C$x._done=function(C$s){C$x.e.event("loaded:"+C$x.tInfo.url,C$s),C$x._dataCache[C$x.tInfo.url]=C$s,C$x.isDecoding=!1,C$x.decode()},C$x._fail=function(){C$x.e.event("err:"+C$x.tInfo.url,null),C$x.isDecoding=!1,C$x.decode()},C$x._playEmptySound=function(){if(null!=C$x.ctx){if(C$x._emptySource&&(C$x._emptySource.stop(),C$x._emptySource.disconnect(0),!C$Rs._tryCleanFailed))try{C$x._emptySource.buffer=null}catch(C$s){C$Rs._tryCleanFailed=!0}var C$s=C$x.ctx.createBufferSource();C$s.buffer=C$x._miniBuffer,C$s.connect(C$x.ctx.destination),C$s.start(0,0,0),C$x._emptySource=C$s}},C$x._unlock=function(){C$x._unlocked||(C$x._playEmptySound(),"running"==C$x.ctx.state?(C$e.document.removeEventListener("mousedown",C$x._unlock,!0),C$e.document.removeEventListener("touchend",C$x._unlock,!0),C$e.document.removeEventListener("touchstart",C$x._unlock,!0),C$x._unlocked=!0):"suspended"==C$x.ctx.state&&C$Q._recoverWebAudio())},C$x.initWebAudio=function(){"running"!=C$x.ctx.state&&(C$x._unlock(),C$e.document.addEventListener("mousedown",C$x._unlock,!0),C$e.document.addEventListener("touchend",C$x._unlock,!0),C$e.document.addEventListener("touchstart",C$x._unlock,!0))},C$x._emptySource=null,C$x._dataCache={},C$x.buffs=[],C$x.isDecoding=!1,C$x._unlocked=!1,C$x.tInfo=null,C$x.__loadingSound={},C$E(C$x,["window",function(){return this.window=C$e.window},"webAudioEnabled",function(){return this.webAudioEnabled=C$x.window.AudioContext||C$x.window.webkitAudioContext||C$x.window.mozAudioContext},"ctx",function(){return this.ctx=C$x.webAudioEnabled?new(C$x.window.AudioContext||C$x.window.webkitAudioContext||C$x.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=C$x.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new C$O}]),C$x}(),C$ls=function(C$s){function C$M(){this._responseType=null,this._data=null,C$M.__super.call(this),this._http=new C$e.window.XMLHttpRequest}C$U(C$M,"laya.net.HttpRequest",C$O);var C$T=C$M.prototype;return C$T.send=function(C$s,C$M,C$T,C$X,C$x){void 0===C$T&&(C$T="get"),void 0===C$X&&(C$X="text"),this._responseType=C$X,this._data=null;var C$c=this,C$l=this._http;if(C$l.open(C$T,C$s,!0),C$x)for(var C$u=0;C$u<C$x.length;C$u++)C$l.setRequestHeader(C$x[C$u++],C$x[C$u]);else C$C.isConchApp||(C$M&&"string"!=typeof C$M?C$l.setRequestHeader("Content-Type","application/json"):C$l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));C$l.responseType="arraybuffer"!==C$X?"text":"arraybuffer",C$l.onerror=function(C$s){C$c._onError(C$s)},C$l.onabort=function(C$s){C$c._onAbort(C$s)},C$l.onprogress=function(C$s){C$c._onProgress(C$s)},C$l.onload=function(C$s){C$c._onLoad(C$s)},C$l.send(C$M)},C$T._onProgress=function(C$s){C$s&&C$s.lengthComputable&&this.event("progress",C$s.loaded/C$s.total)},C$T._onAbort=function(C$s){this.error("Request was aborted by user")},C$T._onError=function(C$s){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},C$T._onLoad=function(C$s){var C$M=this._http,C$T=void 0!==C$M.status?C$M.status:200;200===C$T||204===C$T||0===C$T?this.complete():this.error("["+C$M.status+"]"+C$M.statusText+":"+C$M.responseURL)},C$T.error=function(C$s){this.clear(),this.event("error",C$s)},C$T.complete=function(){this.clear();var C$M=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=C$j.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(C$s){C$M=!1,this.error(C$s.message)}C$M&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},C$T.clear=function(){var C$s=this._http;C$s.onerror=C$s.onabort=C$s.onprogress=C$s.onload=null},C$q(0,C$T,"url",function(){return this._http.responseURL}),C$q(0,C$T,"http",function(){return this._http}),C$q(0,C$T,"data",function(){return this._data}),C$M}(),C$us=function(C$s){function C$D(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,C$D.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}C$U(C$D,"laya.net.Loader",C$O);var C$M=C$D.prototype;return C$M.load=function(C$s,C$M,C$T,C$X,C$x){if(C$s&&""!=C$s||console.error("Loader 加载的url不合法 "+C$s),void 0===C$T&&(C$T=!0),void 0===C$x&&(C$x=!1),0===(this._url=C$s).indexOf("data:image")?this._type=C$M="image":this._type=C$M||(C$M=this.getTypeFromUrl(C$s)),this._cache=C$T,this._data=null,!C$x&&C$D.loadedMap[C$s])return this._data=C$D.loadedMap[C$s],this.event("progress",1),void this.event("complete",this._data);if(C$X&&C$D.setGroup(C$s,C$X),null!=C$D.parserMap[C$M])return this._customParse=!0,void(C$D.parserMap[C$M]instanceof laya.utils.Handler?C$D.parserMap[C$M].runWith(this):C$D.parserMap[C$M].call(null,this));if("image"===C$M||"htmlimage"===C$M||"nativeimage"===C$M)return this._loadImage(C$s);if("ttf"===C$M)return this._loadTTF(C$s);switch(C$M){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:C$M}C$D.preLoadedMap[C$s]?this.onLoaded(C$D.preLoadedMap[C$s]):C$l.resMgrLoad(C$s,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},C$M.getTypeFromUrl=function(C$s){var C$M=C$j.getFileExtension(C$s);return C$M?C$D.typeMap[C$M]:(console.warn("Not recognize the resources suffix",C$s),"text")},C$M._loadTTF=function(C$s){C$s=C$o.formatURL(C$s);var C$M=new C$B;C$M.complete=C$J.create(this,this.onLoaded),C$M.load(C$s)},C$M._loadImage=function(C$s){C$l.imgMgrLoad(C$s,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},C$M._loadImageComplete=function(C$s,C$M,C$T){if(null!=C$T)if(C$T instanceof ArrayBuffer){var C$X=new DataView(C$T),C$x=new laya.webgl.resource.WebGLImage(new Uint8Array(C$T,8),C$s,0,!1,C$X.getUint32(0),C$X.getUint32(4));this.onLoaded(C$x)}else if(C$T instanceof C$Us)C$D.imgMgrSet[C$s]=C$M,C$l.imgMgrLock(C$s,C$D.imgMgrSet[C$s]),this._url=C$s,this.complete(C$T);else{var C$c=-1!=C$s.indexOf(".png",C$s.length-4)?6408:6407;C$x=new laya.webgl.resource.WebGLImage(C$T,C$s,C$c,!1,C$T.width,C$T.height);this.onLoaded(C$x)}else this.event("error","Load image failed")},C$M.imageCancel=function(C$s,C$M,C$T){C$l.imgMgrCancel(C$s,this._onImageCallback)},C$M._loadSound=function(C$s){var C$M=new C$Q._soundClass,C$T=this;function C$X(){C$M.offAll()}C$M.on("complete",this,function(){C$X(),C$T.onLoaded(C$M)}),C$M.on("error",this,function(){C$X(),C$M.dispose(),C$T.event("error","Load sound failed")}),C$M.load(C$s)},C$M.onProgress=function(C$s){"atlas"===this._type?this.event("progress",.3*C$s):this.event("progress",C$s)},C$M.onError=function(C$s){this.event("error",C$s)},C$M._loadedComplete=function(C$s,C$M,C$T){if(null!=C$T)switch(this._type){case"atlas":case"plf":case"json":var C$X=new C$V(C$T);this.onLoaded(JSON.parse(C$X.readUTFBytes()));break;case"font":C$X=new C$V(C$T);this.onLoaded(C$j.parseXMLFromString(C$X.readUTFBytes()));break;default:this.onLoaded(C$T)}else this.event("error",C$s)},C$M.onLoaded=function(C$s){var C$M=this._type;if("plf"==C$M)this.parsePLFData(C$s),this.complete(C$s);else if("image"===C$M){var C$T=new C$Us(C$s);C$T.url=this._url,this.complete(C$T)}else if("sound"===C$M||"htmlimage"===C$M||"nativeimage"===C$M)this.complete(C$s);else if("atlas"===C$M){if(!C$s.src&&!C$s._setContext){if(!this._data){if((this._data=C$s).meta&&C$s.meta.image)for(var C$X=C$s.meta.image.split(","),C$x=0<=this._url.indexOf("/")?"/":"\\",C$c=this._url.lastIndexOf(C$x),C$l=0<=C$c?this._url.substr(0,C$c+1):"",C$u=0,C$E=C$X.length;C$u<C$E;C$u++)C$X[C$u]=C$l+C$X[C$u];else C$X=[this._url.replace(".json",".png")];C$X.reverse(),C$s.toLoads=C$X,C$s.pics=[]}return this.event("progress",.3+1/C$X.length*.6),this._loadImage(C$X.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(C$s),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var C$O=this._data.frames,C$U=this._url.split("?")[0],C$p=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:C$U.substring(0,C$U.lastIndexOf("."))+"/",C$_=this._data.pics,C$R=C$o.formatURL(this._url),C$q=C$D.atlasMap[C$R]||(C$D.atlasMap[C$R]=[]);C$q.dir=C$p;var C$G=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var C$g in C$G=parseFloat(this._data.meta.scale),C$O){var C$f,C$J=C$O[C$g],C$P=C$_[C$J.frame.idx?C$J.frame.idx:0],C$t=C$o.formatURL(C$p+C$g);C$P.scaleRate=C$G,C$f=C$Us.create(C$P,C$J.frame.x,C$J.frame.y,C$J.frame.w,C$J.frame.h,C$J.spriteSourceSize.x,C$J.spriteSourceSize.y,C$J.sourceSize.w,C$J.sourceSize.h),C$D.cacheRes(C$t,C$f),C$D.keepCache(this._url,C$p+C$g),C$f.url=C$t,C$q.push(C$t)}else for(C$g in C$O)C$P=C$_[(C$J=C$O[C$g]).frame.idx?C$J.frame.idx:0],C$t=C$o.formatURL(C$p+C$g),C$D.cacheRes(C$t,C$Us.create(C$P,C$J.frame.x,C$J.frame.y,C$J.frame.w,C$J.frame.h,C$J.spriteSourceSize.x,C$J.spriteSourceSize.y,C$J.sourceSize.w,C$J.sourceSize.h)),C$D.loadedMap[C$t].url=C$t,C$D.keepCache(this._url,C$p+C$g),C$q.push(C$t);delete this._data.pics,this.complete(this._data)}else if("font"==C$M){if(!C$s.src)return this._data=C$s,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var C$r=new C$h;C$r.parseFont(this._data,C$s);var C$N=this._url.split(".fnt")[0].split("/"),C$w=C$N[C$N.length-1];C$gs.registerBitmapFont(C$w,C$r),this._data=C$r,this.complete(this._data)}else if("pkm"==C$M){var C$k=C$Ns.create(C$s,this._url),C$A=new C$Us(C$k);C$A.url=this._url,this.complete(C$A)}else this.complete(C$s)},C$M.parsePLFData=function(C$s){var C$M,C$T,C$X;for(C$M in C$s)switch(C$X=C$s[C$M],C$M){case"json":case"text":for(C$T in C$X)C$D.preLoadedMap[C$o.formatURL(C$T)]=C$X[C$T];break;default:for(C$T in C$X)C$D.preLoadedMap[C$o.formatURL(C$T)]=C$X[C$T]}},C$M.complete=function(C$s){this._data=C$s,this._customParse?this.event("loaded",C$s instanceof Array?[C$s]:C$s):(C$D._loaders.push(this),C$D._isWorking||C$D.checkNext())},C$M.endLoad=function(C$s){C$s&&(this._data=C$s),this._cache&&C$D.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},C$q(0,C$M,"url",function(){return this._url}),C$q(0,C$M,"data",function(){return this._data}),C$q(0,C$M,"cache",function(){return this._cache}),C$q(0,C$M,"type",function(){return this._type}),C$D.checkNext=function(){C$D._isWorking=!0;for(var C$s=C$e.now();C$D._startIndex<C$D._loaders.length;)if(C$e.now(),C$D._loaders[C$D._startIndex].endLoad(),C$D._startIndex++,C$e.now()-C$s>C$D.maxTimeOut)return console.warn("loader callback cost a long time:"+(C$e.now()-C$s)+" url="+C$D._loaders[C$D._startIndex-1].url),void C$w.timer.frameOnce(1,null,C$D.checkNext);C$D._loaders.length=0,C$D._startIndex=0,C$D._isWorking=!1},C$D.clearRes=function(C$s,C$M){if(null!=C$s){void 0===C$M&&(C$M=!1),C$s=C$o.formatURL(C$s);var C$T=C$D.getAtlas(C$s);if(C$T){for(var C$X=0,C$x=C$T.length;C$X<C$x;C$X++){var C$c=C$T[C$X],C$l=C$D.getRes(C$c);delete C$D.loadedMap[C$c],C$D.clearCache(C$s.substring(C$o.basePath.length),C$c.substring(C$o.basePath.length)),C$l&&C$l.destroy(C$M)}C$T.length=0,delete C$D.atlasMap[C$s],delete C$D.loadedMap[C$s]}else{var C$u=C$D.loadedMap[C$s];C$u&&(delete C$D.loadedMap[C$s],C$u instanceof laya.resource.Texture&&C$u.bitmap&&C$u.destroy(C$M))}}},C$D.clearTextureRes=function(C$s){C$s=C$o.formatURL(C$s);var C$M=laya.net.Loader.getAtlas(C$s),C$T=C$M&&0<C$M.length?laya.net.Loader.getRes(C$M[0]):laya.net.Loader.getRes(C$s);C$T&&C$T.bitmap&&(C$C.isConchApp&&!C$C.isConchWebGL?C$T.bitmap.source.releaseTexture&&C$T.bitmap.source.releaseTexture():null==C$T.bitmap._atlaser&&C$T.bitmap.releaseResource(!0))},C$D.getRes=function(C$s){return C$D.loadedMap[C$o.formatURL(C$s)]},C$D.getAtlas=function(C$s){return C$D.atlasMap[C$o.formatURL(C$s)]},C$D.cacheRes=function(C$s,C$M){C$s=C$o.formatURL(C$s),null!=C$D.loadedMap[C$s]?console.warn("Resources already exist,is repeated loading:",C$s):C$D.loadedMap[C$s]=C$M},C$D.setGroup=function(C$s,C$M){C$D.groupMap[C$M]||(C$D.groupMap[C$M]=[]),C$D.groupMap[C$M].push(C$s)},C$D.clearResByGroup=function(C$s){if(C$D.groupMap[C$s]){var C$M=C$D.groupMap[C$s],C$T=0,C$X=C$M.length;for(C$T=0;C$T<C$X;C$T++)C$D.clearRes(C$M[C$T]);C$M.length=0}},C$D.keepCache=function(C$s,C$M){if(C$s&&C$M){var C$T=C$D.cacheSet[C$M];C$T?-1==C$T.indexOf(C$s)&&C$T.push(C$s):C$D.cacheSet[C$M]=[C$s]}},C$D.clearCache=function(C$s,C$M){if(C$s&&C$M){var C$T=C$D.cacheSet[C$M];if(C$T){var C$X=C$T.indexOf(C$s);if(-1!==C$X){var C$x=C$T.length-1;0==C$x?(delete C$D.cacheSet[C$M],0<C$D.imgMgrSet[C$M]?C$l.imgMgrFree(C$M,C$D.imgMgrSet[C$M]):C$D.clearRes(C$M,!0)):(C$T[C$X]=C$T[C$x],C$T.length=C$x)}}}},C$D.saveObject=function(C$s,C$M,C$T){if(C$M&&C$s){var C$X=C$D.objectSet[C$s];C$X?(console.warn("Loader.saveObject: "+C$s),C$X[0]=C$M,C$X[1]=C$T):C$D.objectSet[C$s]=[C$M,C$T,[]]}},C$D.findObject=function(C$s){if(C$s){var C$M=C$D.objectSet[C$s];if(C$M)return C$M[0]}return null},C$D.keepObject=function(C$s,C$M){if(C$s&&C$M){var C$T=C$D.objectSet[C$M];C$T&&-1===C$T[2].indexOf(C$s)&&C$T[2].push(C$s)}},C$D.clearObject=function(C$s,C$M){if(C$s&&C$M){var C$T=C$D.objectSet[C$M];if(C$T){var C$X=C$T[2],C$x=C$X.indexOf(C$s);if(-1!==C$x){var C$c=C$X.length-1;0==C$c?(delete C$D.objectSet[C$M],C$T[1]&&C$T[1].call(null,C$T[0])):(C$X[C$x]=C$X[C$c],C$X.length=C$c)}}}},C$D.TEXT="text",C$D.JSON="json",C$D.XML="xml",C$D.BUFFER="arraybuffer",C$D.IMAGE="image",C$D.SOUND="sound",C$D.ATLAS="atlas",C$D.FONT="font",C$D.TTF="ttf",C$D.PLF="plf",C$D.PKM="pkm",C$D.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},C$D.parserMap={},C$D.groupMap={},C$D.maxTimeOut=100,C$D.loadedMap={},C$D.preLoadedMap={},C$D.atlasMap={},C$D._loaders=[],C$D._isWorking=!1,C$D._startIndex=0,C$D.imgCache={},C$D.cacheSet={},C$D.objectSet={},C$D.imgMgrSet={},C$D}(),C$Es=function(C$s){var C$_;function C$R(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},C$R.__super.call(this);for(var C$s=0;C$s<this._maxPriority;C$s++)this._resInfos[C$s]=[]}C$U(C$R,"laya.net.LoaderManager",C$O);var C$M=C$R.prototype;return C$M.create=function(C$s,C$T,C$M,C$X,C$x,C$c,C$l,C$u){if(null==C$c&&(C$c=2),null==C$l&&(C$l=!0),C$s instanceof Array){var C$E=C$s,C$O=C$E.length,C$U=0;if(C$M)var C$p=C$J.create(C$M.caller,C$M.method,C$M.args,!1);for(var C$_=0;C$_<C$O;C$_++){var C$R=C$E[C$_];"string"==typeof C$R&&(C$R=C$E[C$_]={url:C$R}),C$R.progress=0}for(C$_=0;C$_<C$O;C$_++){C$R=C$E[C$_];var C$q=C$M?C$J.create(null,C$f,[C$R],!1):null,C$G=C$M||C$T?C$J.create(null,C$g,[C$R]):null;this._create(C$R.url,C$G,C$q,C$R.clas||C$X,C$R.params||C$x,null!=C$R.priority&&0<=C$R.priority?C$R.priority:C$c,C$l,C$R.group||C$u)}function C$g(C$s,C$M){C$U++,C$s.progress=1,C$U===C$O&&C$T&&C$T.run()}function C$f(C$s,C$M){C$s.progress=C$M;for(var C$T=0,C$X=0;C$X<C$O;C$X++){C$T+=C$E[C$X].progress}var C$x=C$T/C$O;C$p.runWith(C$x)}return!0}return this._create(C$s,C$T,C$M,C$X,C$x,C$c,C$l,C$u)},C$M._create=function(C$M,C$T,C$s,C$X,C$x,C$c,C$l,C$u){C$M&&""!=C$M||console.error("加载的url不合法 "+C$M),null==C$c&&(C$c=2),null==C$l&&(C$l=!0);var C$E=C$o.formatURL(C$M),C$O=this.getRes(C$E);if(C$O)!C$O.hasOwnProperty("loaded")||C$O.loaded?(C$s&&C$s.runWith(1),C$T&&C$T.run()):C$T&&C$w.loader._createListener(C$M,C$T.caller,C$T.method,C$T.args,!0,!1);else{var C$U=C$j.getFileExtension(C$M),C$p=C$R.createMap[C$U];if(!C$p)throw new Error("LoaderManager:unknown file("+C$M+") extension with: "+C$U+".");C$X||(C$X=C$p[0]);var C$_=C$p[1];if("atlas"==C$U)this.load(C$M,C$T,C$s,C$_,C$c,C$l);else{C$X===C$Us&&(C$_="htmlimage"),(C$O=C$X?new C$X:null).hasOwnProperty("_loaded")&&(C$O._loaded=!1),C$O._setUrl(C$M),C$u&&C$O._setGroup(C$u),this._createLoad(C$O,C$M,C$J.create(null,function(C$s){C$O&&!C$O.destroyed&&C$s&&C$O.onAsynLoaded.call(C$O,C$M,C$s,C$x),C$T&&C$T.run();C$w.loader.event(C$M)}),C$s,C$_,C$c,!1,C$u,!0),C$l&&this.cacheRes(C$E,C$O)}}return C$O},C$M.load=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){C$s&&""!=C$s||console.error("加载的url不合法 "+C$s);var C$E=this;if(null==C$x&&(C$x=2),null==C$c&&(C$c=!0),void 0===C$u&&(C$u=!1),C$s instanceof Array)return this._loadAssets(C$s,C$M,C$T,C$X,C$x,C$c,C$l);var C$O=C$us.getRes(C$s);if(null!=C$O)C$w.timer.frameOnce(1,null,function(){C$T&&C$T.runWith(1),C$M&&C$M.runWith(C$O),C$E._loaderCount||C$E.event("complete")});else{var C$U=C$R._resMap[C$s];C$U?(C$M&&C$U._createListener("complete",C$M.caller,C$M.method,C$M.args,!1,!1),C$T&&C$U._createListener("progress",C$T.caller,C$T.method,C$T.args,!1,!1)):((C$U=this._infoPool.length?this._infoPool.pop():new C$_).url=C$s,C$U.clas=null,C$U.type=C$X,C$U.cache=C$c,C$U.group=C$l,C$U.ignoreCache=C$u,C$U.priority=C$x,C$M&&C$U.on("complete",C$M.caller,C$M.method,C$M.args),C$T&&C$U.on("progress",C$T.caller,C$T.method,C$T.args),C$R._resMap[C$s]=C$U,C$x=C$x<this._maxPriority?0<=C$x?C$x:0:this._maxPriority-1,this._resInfos[C$x].push(C$U),this._next())}return this},C$M.cancel=function(C$s,C$M,C$T){if(C$O=C$R._resMap[C$s]){C$M&&C$O.off("complete",C$M.caller,C$M.method,!1),C$T&&C$O.off("progress",C$T.caller,C$T.method,!1);var C$X=C$O.getListener("complete"),C$x=C$O.getListener("progress");if(!(C$X&&C$X.head||C$x&&C$x.head)){if(C$O.loader){var C$c=C$O.loader;C$c.imageCancel(C$s),C$c.offAll(),C$c._data=null,C$c._customParse=!1,C$c._url=null,C$c._class=null,C$c._type=null,this._loaders.push(C$c),this._loaderCount--,delete this._loaderMap[C$O.url]}for(var C$l=0;C$l<this._maxPriority;C$l++)for(var C$u=this._resInfos[C$l],C$E=C$u.length-1;-1<C$E;C$E--){var C$O;(C$O=C$u[C$E])&&C$O.url===C$s&&(C$u[C$E]=null,C$O.destroy(),C$O.offAll(),this._infoPool.push(C$O))}delete C$R._resMap[C$s],this._next()}}},C$M._createLoad=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){var C$O=this;if(null==C$c&&(C$c=2),null==C$l&&(C$l=!0),void 0===C$E&&(C$E=!1),C$M instanceof Array)return this._loadAssets(C$M,C$T,C$X,C$x,C$c,C$l,C$u);var C$U=C$us.getRes(C$M);if(null!=C$U)C$w.timer.frameOnce(1,null,function(){C$X&&C$X.runWith(1),C$T&&C$T.runWith(C$U),C$O._loaderCount||C$O.event("complete")});else{var C$p=C$R._resMap[C$M];C$p?(C$T&&C$p._createListener("complete",C$T.caller,C$T.method,C$T.args,!1,!1),C$X&&C$p._createListener("progress",C$X.caller,C$X.method,C$X.args,!1,!1)):((C$p=this._infoPool.length?this._infoPool.pop():new C$_).url=C$M,C$p.clas=C$s,C$p.type=C$x,C$p.cache=C$l,C$p.group=C$u,C$p.ignoreCache=C$E,C$p.priority=C$c,C$T&&C$p.on("complete",C$T.caller,C$T.method,C$T.args),C$X&&C$p.on("progress",C$X.caller,C$X.method,C$X.args),C$R._resMap[C$M]=C$p,C$c=C$c<this._maxPriority?0<=C$c?C$c:0:this._maxPriority-1,this._resInfos[C$c].push(C$p),this._next())}return this},C$M._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var C$s=0;C$s<this._maxPriority;C$s++)for(var C$M=this._resInfos[C$s];0<C$M.length;){var C$T=C$M.shift();if(C$T)return this._doLoad(C$T)}this._loaderCount||this.event("complete")}},C$M._doLoad=function(C$M){var C$T=this._loaders.length?this._loaders.pop():new C$us;this._loaderCount++,(this._loaderMap[C$M.url]=C$T).on("complete",null,C$x),C$T.on("progress",null,function(C$s){C$M.event("progress",C$s)}),C$T.on("error",null,function(C$s){C$x(null)}),C$M.loader=C$T;var C$X=this;function C$x(C$s){C$T.offAll(),C$T._data=null,C$T._customParse=!1,C$T._url=null,C$T._class=null,C$T._type=null,C$X._loaders.push(C$T),C$X._loaderCount--,delete C$X._loaderMap[C$M.url],C$X._endLoad(C$M,C$s instanceof Array?[C$s]:C$s),C$X._next()}C$T._class=C$M.clas,1<=C$M.priority?(C$T.priority=C$M.priority,C$T.realTime=!1):(C$T.priority=0,C$T.realTime=!0),C$T.load(C$M.url,C$M.type,C$M.cache,C$M.group,C$M.ignoreCache)},C$M._endLoad=function(C$s,C$M){var C$T=C$s.url;if(null==C$M){var C$X=this._failRes[C$T]||0;if(C$X<this.retryNum)return console.warn("[warn]Retry to load:",C$T),this._failRes[C$T]=C$X+1,void C$w.timer.once(this.retryDelay,this,this._addReTry,[C$s],!1);console.warn("[error]Failed to load:",C$T),this.event("error",C$T)}this._failRes[C$T]&&(this._failRes[C$T]=0),delete C$R._resMap[C$T],C$s.event("complete",C$M),C$s.destroy(),C$s.offAll(),this._infoPool.push(C$s)},C$M._addReTry=function(C$s){this._resInfos[this._maxPriority-1].push(C$s),this._next()},C$M.clearRes=function(C$s,C$M){void 0===C$M&&(C$M=!1),C$us.clearRes(C$s,C$M)},C$M.getRes=function(C$s){return C$us.getRes(C$s)},C$M.cacheRes=function(C$s,C$M){C$us.cacheRes(C$s,C$M)},C$M.clearTextureRes=function(C$s){C$us.clearTextureRes(C$s)},C$M.setGroup=function(C$s,C$M){C$us.setGroup(C$s,C$M)},C$M.clearResByGroup=function(C$s){C$us.clearResByGroup(C$s)},C$M.clearUnLoaded=function(){for(var C$s=0;C$s<this._maxPriority;C$s++){for(var C$M=this._resInfos[C$s],C$T=C$M.length-1;-1<C$T;C$T--){var C$X=C$M[C$T];C$X&&(C$X.destroy(),C$X.offAll(),this._infoPool.push(C$X))}C$M.length=0}this._loaderCount=0,C$R._resMap={}},C$M.cancelLoadByUrls=function(C$s){if(C$s)for(var C$M=0,C$T=C$s.length;C$M<C$T;C$M++)this.cancelLoadByUrl(C$s[C$M])},C$M.cancelLoadByUrl=function(C$s){for(var C$M=0;C$M<this._maxPriority;C$M++)for(var C$T=this._resInfos[C$M],C$X=C$T.length-1;-1<C$X;C$X--){var C$x=C$T[C$X];C$x&&C$x.url===C$s&&(C$T[C$X]=null,C$x.destroy(),C$x.offAll(),this._infoPool.push(C$x))}C$R._resMap[C$s]&&delete C$R._resMap[C$s]},C$M._loadAssets=function(C$s,C$T,C$l,C$M,C$X,C$x,C$c){null==C$X&&(C$X=2),null==C$x&&(C$x=!0);for(var C$u=C$s.length,C$E=0,C$O=0,C$U=[],C$p=!0,C$_=0;C$_<C$u;C$_++){var C$R=C$s[C$_];if(!C$R)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+C$s);"string"==typeof C$R&&(C$R={url:C$R,type:C$M,size:1,priority:C$X}),C$R.size||(C$R.size=1),C$R.progress=0,C$O+=C$R.size,C$U.push(C$R);var C$q=C$l?C$J.create(null,C$f,[C$R],!1):null,C$G=C$T||C$l?C$J.create(null,C$g,[C$R]):null;this.load(C$R.url,C$G,C$q,C$R.type,null!=C$R.priority&&0<=C$R.priority?C$R.priority:2,C$x,C$R.group||C$c)}function C$g(C$s,C$M){C$E++,C$s.progress=1,C$M||(C$p=!1),C$E===C$u&&C$T&&C$T.runWith(C$p)}function C$f(C$s,C$M){if(null!=C$l){C$s.progress=C$M;for(var C$T=0,C$X=0;C$X<C$U.length;C$X++){var C$x=C$U[C$X];C$T+=C$x.size*C$x.progress}var C$c=C$T/C$O;C$l.runWith(C$c)}}return this},C$R.cacheRes=function(C$s,C$M){C$us.cacheRes(C$s,C$M)},C$R._resMap={},C$E(C$R,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),C$R.__init$=function(){C$_=function(C$s){function C$M(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,C$M.__super.call(this)}return C$U(C$M,"",C$O),C$M.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},C$M}()},C$R}(),C$Os=(function(C$s){function C$x(C$s){C$x.__super.call(this),C$s||(C$s=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var C$M=0,C$T=0,C$X=0;C$X<20;C$X++)C$X%5!=4?this._mat[C$M++]=C$s[C$X]:this._alpha[C$T++]=C$s[C$X];this._action=C$v.createFilterAction(32),this._action.data=this}C$U(C$x,"laya.filters.ColorFilter",C$f);var C$M=C$x.prototype;C$w.imps(C$M,{"laya.filters.IFilter":!0}),C$M.callNative=function(C$s){C$s._$P.cf=this;C$s.conchModel&&C$s.conchModel.setFilterMatrix&&C$s.conchModel.setFilterMatrix(this._mat,this._alpha)},C$q(0,C$M,"type",function(){return 32}),C$q(0,C$M,"action",function(){return this._action})}(),function(C$s){function C$X(C$s,C$M,C$T){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===C$M&&(C$M=0),C$X.__super.call(this),this._byteClass=C$T||C$V,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,C$s&&0<C$M&&C$M<65535&&this.connect(C$s,C$M)}C$U(C$X,"laya.net.Socket",C$O);var C$M=C$X.prototype;C$M.connect=function(C$s,C$M){var C$T="ws://"+C$s+":"+C$M;C$T="https:"==C$e.window.location.protocol?"wss://"+C$s+":"+C$M:"ws://"+C$s+":"+C$M,this.connectByUrl(C$T)},C$M.connectByUrl=function(C$s){var C$M=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new C$e.window.WebSocket(C$s,this.protocols):this._socket=new C$e.window.WebSocket(C$s),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(C$s){C$M._onOpen(C$s)},this._socket.onmessage=function(C$s){C$M._onMessage(C$s)},this._socket.onclose=function(C$s){C$M._onClose(C$s)},this._socket.onerror=function(C$s){C$M._onError(C$s)}},C$M.cleanSocket=function(){try{this._socket.close()}catch(C$s){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},C$M.close=function(){if(null!=this._socket)try{this._socket.close()}catch(C$s){}},C$M._onOpen=function(C$s){this._connected=!0,this.event("open",C$s)},C$M._onMessage=function(C$s){if(C$s&&C$s.data){var C$M=C$s.data;if(this.disableInput&&C$M)this.event("message",C$M);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var C$T=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,C$M&&("string"==typeof C$M?this._input.writeUTFBytes(C$M):this._input.writeArrayBuffer(C$M),this._addInputPosition=this._input.pos,this._input.pos=C$T),this.event("message",C$M)}}},C$M._onClose=function(C$s){this._connected=!1,this.event("close",C$s)},C$M._onError=function(C$s){this.event("error",C$s)},C$M.send=function(C$s){this._socket.send(C$s)},C$M.flush=function(){if(this._output&&0<this._output.length){var C$M;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(C$s){C$M=C$s}this._output.endian=this.endian,this._output.clear(),C$M&&this.event("error",C$M)}},C$q(0,C$M,"input",function(){return this._input}),C$q(0,C$M,"output",function(){return this._output}),C$q(0,C$M,"connected",function(){return this._connected}),C$q(0,C$M,"endian",function(){return this._endian},function(C$s){this._endian=C$s,null!=this._input&&(this._input.endian=C$s),null!=this._output&&(this._output.endian=C$s)}),C$X.LITTLE_ENDIAN="littleEndian",C$X.BIG_ENDIAN="bigEndian"}(),function(C$s){function C$u(){C$u.__super.call(this),this._$1__id=++C$u._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(C$u._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,C$y.currentResourceManager&&C$y.currentResourceManager.addResource(this)}C$U(C$u,"laya.resource.Resource",C$O);var C$M=C$u.prototype;return C$w.imps(C$M,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),C$M._setUrl=function(C$s){var C$M;this._url!==C$s&&(this._url&&((C$M=C$u._urlResourcesMap[this._url]).splice(C$M.indexOf(this),1),0===C$M.length&&delete C$u._urlResourcesMap[this._url]),C$s&&((C$M=C$u._urlResourcesMap[C$s])||(C$u._urlResourcesMap[C$s]=C$M=[]),C$M.push(this)),this._url=C$s)},C$M._getGroup=function(){return this._group},C$M._setGroup=function(C$s){var C$M;this._group!==C$s&&(this._group&&((C$M=C$u._groupResourcesMap[this._group]).splice(C$M.indexOf(this),1),0===C$M.length&&delete C$u._groupResourcesMap[this._group]),C$s&&((C$M=C$u._groupResourcesMap[C$s])||(C$u._groupResourcesMap[C$s]=C$M=[]),C$M.push(this)),this._group=C$s)},C$M._addReference=function(){this._referenceCount++},C$M._removeReference=function(){this._referenceCount--},C$M._clearReference=function(){this._referenceCount=0},C$M._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},C$M.recreateResource=function(){this.completeCreate()},C$M.disposeResource=function(){},C$M.activeResource=function(C$s){void 0===C$s&&(C$s=!1),this._lastUseFrameCount=C$F.loopCount,!this._destroyed&&this.__loaded&&(this._released||C$s)&&this.recreateResource()},C$M.releaseResource=function(C$s){return void 0===C$s&&(C$s=!0),!(!C$s&&this.lock)&&(!(this._released&&!C$s)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},C$M.onAsynLoaded=function(C$s,C$M,C$T){throw new Error("Resource: must override this function!")},C$M.destroy=function(){var C$s;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete C$u._idResourcesMap[this.id],this._url&&((C$s=C$u._urlResourcesMap[this._url])&&(C$s.splice(C$s.indexOf(this),1),0===C$s.length&&delete C$u._urlResourcesMap[this.url]),C$us.clearRes(this._url),this.__loaded||C$v.cancelLoadByUrl(this._url)),this._group&&((C$s=C$u._groupResourcesMap[this._group]).splice(C$s.indexOf(this),1),0===C$s.length&&delete C$u._groupResourcesMap[this.url]))},C$M.completeCreate=function(){this._released=!1,this.event("recovered",this)},C$M.dispose=function(){this.destroy()},C$q(0,C$M,"memorySize",function(){return this._memorySize},function(C$s){var C$M=C$s-this._memorySize;this._memorySize=C$s,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,C$M),this.resourceManager&&this.resourceManager.addSize(C$M)}),C$q(0,C$M,"_loaded",null,function(C$s){this.__loaded=C$s}),C$q(0,C$M,"loaded",function(){return this.__loaded}),C$q(0,C$M,"id",function(){return this._$1__id}),C$q(0,C$M,"destroyed",function(){return this._destroyed}),C$q(0,C$M,"group",function(){return this._getGroup()},function(C$s){this._setGroup(C$s)}),C$q(0,C$M,"resourceManager",function(){return this._resourceManager}),C$q(0,C$M,"url",function(){return this._url}),C$q(0,C$M,"released",function(){return this._released}),C$q(0,C$M,"referenceCount",function(){return this._referenceCount}),C$u.getResourceByID=function(C$s){return C$u._idResourcesMap[C$s]},C$u.getResourceByURL=function(C$s,C$M){return void 0===C$M&&(C$M=0),null==C$u._urlResourcesMap[C$s]?null:C$u._urlResourcesMap[C$s][C$M]},C$u.getResourceCountByURL=function(C$s){return C$u._urlResourcesMap[C$s].length},C$u.destroyUnusedResources=function(C$s){var C$M;if(C$s){var C$T=C$u._groupResourcesMap[C$s];if(C$T)for(var C$X=C$T.slice(),C$x=0,C$c=C$X.length;C$x<C$c;C$x++)(C$M=C$X[C$x]).lock||0!==C$M._referenceCount||C$M.destroy()}else for(var C$l in C$u._idResourcesMap)(C$M=C$u._idResourcesMap[C$l]).lock||0!==C$M._referenceCount||C$M.destroy()},C$u._uniqueIDCounter=0,C$u._idResourcesMap={},C$u._urlResourcesMap={},C$u._groupResourcesMap={},C$u}()),C$Us=function(C$s){function C$D(C$s,C$M){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,C$D.__super.call(this),C$s&&null!=C$s._addReference&&C$s._addReference(),this.setTo(C$s,C$M)}C$U(C$D,"laya.resource.Texture",C$O);var C$M=C$D.prototype;return C$M._setUrl=function(C$s){this.url=C$s},C$M.setTo=function(C$s,C$M){if(C$s instanceof C$l.HTMLElement){var C$T=C$Ps.create("2D",C$s);this.bitmap=C$T}else this.bitmap=C$s;if(this.uv=C$M||C$D.DEF_UV,C$s){this._w=C$s.width,this._h=C$s.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var C$X=this;if(this._loaded)C$v.addToAtlas&&C$v.addToAtlas(C$X);else{var C$x=C$s;C$x instanceof laya.resource.HTMLImage&&C$x.image&&C$x.image.addEventListener("load",function(C$s){C$v.addToAtlas&&C$v.addToAtlas(C$X)},!1)}}},C$M.active=function(){this.bitmap&&this.bitmap.activeResource()},C$M.destroy=function(C$s){if(void 0===C$s&&(C$s=!1),this.alphaTexture&&(this.alphaTexture.destroy(C$s),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var C$M=this.bitmap;C$s?(C$C.isConchApp&&C$M.source&&C$M.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,C$M.dispose(),C$M._clearReference()):(C$M._removeReference(),0==C$M.referenceCount&&(C$C.isConchApp&&C$M.source&&C$M.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,C$M.dispose())),this.url&&this===C$w.loader.getRes(this.url)&&C$w.loader.clearRes(this.url,C$s),this._loaded=!1}},C$M.load=function(C$s){var C$M=this;this._loaded=!1,C$s=C$o.customFormat(C$s);var C$T=this.bitmap||(this.bitmap=C$Ns.create(C$s));C$T.uri=C$s,C$T&&C$T._addReference();var C$X=this;C$T.onload=function(){C$T.onload=null,C$X._loaded=!0,C$M.sourceWidth=C$M._w=C$T.width,C$M.sourceHeight=C$M._h=C$T.height,C$X.event("loaded",this),C$v.addToAtlas&&C$v.addToAtlas(C$X)}},C$M.addTextureToAtlas=function(C$s){C$v.addTextureToAtlas(this)},C$M.getPixels=function(C$s,C$M,C$T,C$X){if(C$C.isConchApp){var C$x=this.bitmap;if(C$x.source&&C$x.source.getImageData){var C$c=C$x.source.getImageData(C$s,C$M,C$T,C$X),C$l=new Uint8Array(C$c);return Array.from(C$l)}return null}return C$C.isWebGL?C$v.getTexturePixels(this,C$s,C$M,C$T,C$X):(C$e.canvas.size(C$T,C$X),C$e.canvas.clear(),C$e.context.drawTexture(this,-C$s,-C$M,this.width,this.height,0,0),C$e.context.getImageData(0,0,C$T,C$X).data)},C$M.onAsynLoaded=function(C$s,C$M){if(C$M){if("function"!=typeof C$M._addReference)throw new Error("bitmap._addReference is not a function. "+C$M.className+" "+typeof C$M._addReference+" "+C$M.constructor);C$M._addReference()}this.setTo(C$M,this.uv),this._loaded&&this.event("loaded",this)},C$q(0,C$M,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),C$q(0,C$M,"loaded",function(){return this._loaded}),C$q(0,C$M,"released",function(){return!this.bitmap||this.bitmap.released}),C$q(0,C$M,"width",function(){return this._w?this._w:this.uv&&this.uv!==C$D.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(C$s){this._w=C$s,this.sourceWidth||(this.sourceWidth=C$s)}),C$q(0,C$M,"repeat",function(){return!C$C.isWebGL||!this.bitmap||this.bitmap.repeat},function(C$s){C$s&&C$C.isWebGL&&this.bitmap&&(this.bitmap.repeat=C$s)&&(this.bitmap.enableMerageInAtlas=!1)}),C$q(0,C$M,"height",function(){return this._h?this._h:this.uv&&this.uv!==C$D.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(C$s){this._h=C$s,this.sourceHeight||(this.sourceHeight=C$s)}),C$q(0,C$M,"isLinearSampling",function(){return!C$C.isWebGL||9728!=this.bitmap.minFifter},function(C$s){!C$s&&C$C.isWebGL&&(C$s||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),C$D.moveUV=function(C$s,C$M,C$T){for(var C$X=0;C$X<8;C$X+=2)C$T[C$X]+=C$s,C$T[C$X+1]+=C$M;return C$T},C$D.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=0),void 0===C$u&&(C$u=0),void 0===C$E&&(C$E=0);var C$O=C$s instanceof laya.resource.Texture,C$U=C$O?C$s.uv:C$D.DEF_UV,C$p=C$O?C$s.bitmap:C$s,C$_=C$v.isAtlas(C$p);if(C$_){var C$R=C$p._atlaser,C$q=C$s._atlasID;if(-1==C$q)throw new Error("create texture error");C$p=C$R._inAtlasTextureBitmapValue[C$q],C$U=C$R._inAtlasTextureOriUVValue[C$q]}var C$G=new C$D(C$p,null);C$p.width&&C$M+C$X>C$p.width&&(C$X=C$p.width-C$M),C$p.height&&C$T+C$x>C$p.height&&(C$x=C$p.height-C$T),C$G.width=C$X,C$G.height=C$x,C$G.offsetX=C$c,C$G.offsetY=C$l,C$G.sourceWidth=C$u||C$X,C$G.sourceHeight=C$E||C$x;var C$g=1/C$p.width,C$f=1/C$p.height;C$M*=C$g,C$T*=C$f,C$X*=C$g,C$x*=C$f;var C$J=C$G.uv[0],C$P=C$G.uv[1],C$t=C$G.uv[4],C$r=C$G.uv[5],C$N=C$t-C$J,C$w=C$r-C$P,C$k=C$D.moveUV(C$U[0],C$U[1],[C$M,C$T,C$M+C$X,C$T,C$M+C$X,C$T+C$x,C$M,C$T+C$x]);C$G.uv=[C$J+C$k[0]*C$N,C$P+C$k[1]*C$w,C$t-(1-C$k[2])*C$N,C$P+C$k[3]*C$w,C$t-(1-C$k[4])*C$N,C$r-(1-C$k[5])*C$w,C$J+C$k[6]*C$N,C$r-(1-C$k[7])*C$w],C$_&&C$G.addTextureToAtlas();var C$A=C$p.scaleRate;return C$A&&1!=C$A?(C$G.sourceWidth/=C$A,C$G.sourceHeight/=C$A,C$G.width/=C$A,C$G.height/=C$A,C$G.scaleRate=C$A,C$G.offsetX/=C$A,C$G.offsetY/=C$A):C$G.scaleRate=1,C$G},C$D.createFromTexture=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$s.scaleRate;1!=C$c&&(C$M*=C$c,C$T*=C$c,C$X*=C$c,C$x*=C$c);var C$l=C$A.TEMP.setTo(C$M-C$s.offsetX,C$T-C$s.offsetY,C$X,C$x),C$u=C$l.intersection(C$D._rect1.setTo(0,0,C$s.width,C$s.height),C$D._rect2);if(!C$u)return null;var C$E=C$D.create(C$s,C$u.x,C$u.y,C$u.width,C$u.height,C$u.x-C$l.x,C$u.y-C$l.y,C$X,C$x);if(C$E.bitmap&&C$E.bitmap._removeReference)return C$E.bitmap._removeReference(),C$E;var C$O="bitmap:"+(C$E.bitmap?C$E.bitmap.constructor?C$E.bitmap.constructor.name:C$E.bitmap.__className:"")+", url:"+(C$s.url+" | "+(C$E.bitmap?C$E.bitmap.url:C$s.url))+", x="+C$M+",y="+C$T+",width="+C$X+",height="+C$x+", result="+(C$u?C$u.x+","+C$u.y+","+C$u.width+","+C$u.height:"null")+", rect="+C$l.x+","+C$l.y+","+C$l.width+","+C$l.height;throw new Error("报错：bitmap._removeReference is not a function  "+C$O)},C$D.DEF_UV=[0,0,1,0,1,1,0,1],C$D.INV_UV=[0,1,1,1,1,0,0,0],C$D._rect1=new C$A,C$D._rect2=new C$A,C$D}(),C$s=function(C$s){var C$u;function C$c(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,C$c.__super.call(this)}C$U(C$c,"laya.utils.TimeLine",C$O);var C$M=C$c.prototype;return C$M.to=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=0),this._create(C$s,C$M,C$T,C$X,C$x,!0)},C$M.from=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=0),this._create(C$s,C$M,C$T,C$X,C$x,!1)},C$M._create=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$$.getItemByClass("tweenData",C$u);return C$l.isTo=C$c,C$l.type=0,C$l.target=C$s,C$l.duration=C$T,C$l.data=C$M,C$l.startTime=this._startTime+C$x,C$l.endTime=C$l.startTime+C$l.duration,C$l.ease=C$X,this._startTime=Math.max(C$l.endTime,this._startTime),this._tweenDataList.push(C$l),this._startTimeSort=!0,this._endTimeSort=!0,this},C$M.addLabel=function(C$s,C$M){var C$T=C$$.getItemByClass("tweenData",C$u);return C$T.type=1,C$T.data=C$s,C$T.endTime=C$T.startTime=this._startTime+C$M,this._labelDic||(this._labelDic={}),this._labelDic[C$s]=C$T,this._tweenDataList.push(C$T),this},C$M.removeLabel=function(C$s){if(this._labelDic&&this._labelDic[C$s]){var C$M=this._labelDic[C$s];if(C$M){var C$T=this._tweenDataList.indexOf(C$M);-1<C$T&&this._tweenDataList.splice(C$T,1)}delete this._labelDic[C$s]}},C$M.gotoTime=function(C$s){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var C$M,C$T,C$X,C$x;for(var C$c in this._firstTweenDic)if(C$T=this._firstTweenDic[C$c])for(var C$l in C$T)C$T.diyTarget.hasOwnProperty(C$l)&&(C$T.diyTarget[C$l]=C$T[C$l]);for(C$c in this._tweenDic)(C$M=this._tweenDic[C$c]).clear(),delete this._tweenDic[C$c];if(this._index=0,this._gidIndex=0,this._currTime=C$s,this._lastTime=C$e.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=C$X=this._tweenDataList.concat(),C$X.sort(function(C$s,C$M){return C$s.endTime>C$M.endTime?1:C$s.endTime<C$M.endTime?-1:0})}else C$X=this._endTweenDataList;for(var C$u=0,C$E=C$X.length;C$u<C$E;C$u++)if(0==(C$x=C$X[C$u]).type){if(!(C$s>=C$x.endTime))break;this._index=Math.max(this._index,C$u+1);var C$O=C$x.data;if(C$x.isTo)for(var C$U in C$O)C$x.target[C$U]=C$O[C$U]}for(C$u=0,C$E=this._tweenDataList.length;C$u<C$E;C$u++)0==(C$x=this._tweenDataList[C$u]).type&&C$s>=C$x.startTime&&C$s<C$x.endTime&&(this._index=Math.max(this._index,C$u+1),this._gidIndex++,(C$M=C$$.getItemByClass("tween",C$a))._create(C$x.target,C$x.data,C$x.duration,C$x.ease,C$J.create(this,this._animComplete,[this._gidIndex]),0,!1,C$x.isTo,!0,!1),C$M.setStartTime(this._currTime-(C$s-C$x.startTime)),C$M._updateEase(this._currTime),C$M.gid=this._gidIndex,this._tweenDic[this._gidIndex]=C$M)}},C$M.gotoLabel=function(C$s){if(null!=this._labelDic){var C$M=this._labelDic[C$s];C$M&&this.gotoTime(C$M.startTime)}},C$M.pause=function(){C$w.timer.clear(this,this._update)},C$M.resume=function(){this.play(this._currTime,this._loopKey)},C$M.play=function(C$s,C$M){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(C$s,C$M){return C$s.startTime>C$M.startTime?1:C$s.startTime<C$M.startTime?-1:0});for(var C$T=0,C$X=this._tweenDataList.length;C$T<C$X;C$T++){var C$x=this._tweenDataList[C$T];if(null!=C$x&&0==C$x.type){var C$c=C$x.target,C$l=C$c.$_GID||(C$c.$_GID=C$j.getGID()),C$u=null;for(var C$E in null==this._firstTweenDic[C$l]?((C$u={}).diyTarget=C$c,this._firstTweenDic[C$l]=C$u):C$u=this._firstTweenDic[C$l],C$x.data)null==C$u[C$E]&&(C$u[C$E]=C$c[C$E])}}}"string"==typeof C$s?this.gotoLabel(C$s):this.gotoTime(C$s),this._loopKey=C$M,this._lastTime=C$e.now(),C$w.timer.frameLoop(1,this,this._update)}},C$M._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var C$s in this._tweenDic)(C$M=this._tweenDic[C$s]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var C$M,C$T=C$e.now(),C$X=C$T-this._lastTime,C$x=this._currTime+=C$X*this.scale;for(C$s in this._lastTime=C$T,this._tweenDic)(C$M=this._tweenDic[C$s])._updateEase(C$x);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var C$c=this._tweenDataList[this._index];C$x>=C$c.startTime&&(this._index++,0==C$c.type?(this._gidIndex++,(C$M=C$$.getItemByClass("tween",C$a))._create(C$c.target,C$c.data,C$c.duration,C$c.ease,C$J.create(this,this._animComplete,[this._gidIndex]),0,!1,C$c.isTo,!0,!1),C$M.setStartTime(C$x),C$M.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=C$M)._updateEase(C$x)):this.event("label",C$c.data))}},C$M._animComplete=function(C$s){this._tweenDic[C$s]&&delete this._tweenDic[C$s]},C$M._complete=function(){this.event("complete")},C$M.reset=function(){var C$s;if(this._labelDic)for(C$s in this._labelDic)delete this._labelDic[C$s];for(C$s in this._tweenDic)this._tweenDic[C$s].clear(),delete this._tweenDic[C$s];for(C$s in this._firstTweenDic)delete this._firstTweenDic[C$s];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var C$M,C$T=0;for(C$M=this._tweenDataList.length,C$T=0;C$T<C$M;C$T++)this._tweenDataList[C$T]&&this._tweenDataList[C$T].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,C$w.timer.clear(this,this._update)},C$M.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},C$q(0,C$M,"index",function(){return this._frameIndex},function(C$s){this._frameIndex=C$s,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),C$q(0,C$M,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),C$c.to=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=0),(new C$c).to(C$s,C$M,C$T,C$X,C$x)},C$c.from=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$x&&(C$x=0),(new C$c).from(C$s,C$M,C$T,C$X,C$x)},C$c.__init$=function(){C$u=function(){function C$s(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return C$U(C$s,""),C$s.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,C$$.recover("tweenData",this)},C$s}()},C$c}(),C$ps=function(C$x){function C$T(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,C$T.__super.call(this),this._style=C$u.EMPTY}C$U(C$T,"laya.display.Sprite",C$x);var C$s=C$T.prototype;return C$w.imps(C$s,{"laya.display.ILayout":!0}),C$s.createConchModel=function(){return new ConchNode},C$s.destroy=function(C$s){if(void 0===C$s&&(C$s=!0),this._releaseMem(),!this._destroyed){this.filters=null;var C$M=this.mask;C$M&&(this.mask=null,C$M.destroy(C$s))}C$x.prototype.destroy.call(this,C$s),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},C$s.updateZOrder=function(){C$j.updateOrder(this._childs)&&this.repaint()},C$s.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},C$s.setBounds=function(C$s){this._set$P("uBounds",C$s)},C$s.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new C$A),C$A._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},C$s.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new C$A),C$A._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},C$s._boundPointsToParent=function(C$s){void 0===C$s&&(C$s=!1);var C$M=0,C$T=0;this._style&&(C$M=this._style._tf.translateX,C$T=this._style._tf.translateY,C$s=C$s||0!==this._style._tf.rotate,this._style.scrollRect&&(C$M+=this._style.scrollRect.x,C$T+=this._style.scrollRect.y));var C$X=this._getBoundPointsM(C$s);if(!C$X||C$X.length<1)return C$X;if(8!=C$X.length&&(C$X=C$s?C$r.scanPList(C$X):C$A._getWrapRec(C$X,C$A.TEMP)._getBoundPoints()),!this.transform)return C$j.transPointList(C$X,this._x-C$M,this._y-C$T),C$X;var C$x=C$k.TEMP,C$c=0,C$l=C$X.length;for(C$c=0;C$c<C$l;C$c+=2)C$x.x=C$X[C$c],C$x.y=C$X[C$c+1],this.toParentPoint(C$x),C$X[C$c]=C$x.x,C$X[C$c+1]=C$x.y;return C$X},C$s.getGraphicBounds=function(C$s){return void 0===C$s&&(C$s=!1),this._graphics?this._graphics.getBounds(C$s):C$A.TEMP.setTo(0,0,0,0)},C$s._getBoundPointsM=function(C$s){if(void 0===C$s&&(C$s=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var C$M=C$j.clearArray(this._$P.temBM),C$T=C$A.TEMP;return C$T.copyFrom(this.scrollRect),C$j.concatArray(C$M,C$T._getBoundPoints()),C$M}for(var C$X,C$x,C$c,C$l=this._graphics?this._graphics.getBoundPoints():C$j.clearArray(this._$P.temBM),C$u=0,C$E=(C$c=this._childs).length;C$u<C$E;C$u++)(C$X=C$c[C$u])instanceof laya.display.Sprite&&1==C$X.visible&&(C$x=C$X._boundPointsToParent(C$s))&&(C$l=C$l?C$j.concatArray(C$l,C$x):C$x);return C$l},C$s.getStyle=function(){return this._style===C$u.EMPTY&&(this._style=new C$u),this._style},C$s.setStyle=function(C$s){this._style=C$s},C$s._adjustTransform=function(){this._tfChanged=!1;var C$s,C$M=this._style._tf,C$T=C$M.scaleX,C$X=C$M.scaleY;if(C$M.rotate||1!==C$T||1!==C$X||C$M.skewX||C$M.skewY){(C$s=this._transform||(this._transform=C$z.create())).bTransform=!0;var C$x=.0174532922222222*(C$M.rotate-C$M.skewX),C$c=.0174532922222222*(C$M.rotate+C$M.skewY),C$l=Math.cos(C$c),C$u=Math.sin(C$c),C$E=Math.sin(C$x),C$O=Math.cos(C$x);return C$s.a=C$T*C$l,C$s.b=C$T*C$u,C$s.c=-C$X*C$E,C$s.d=C$X*C$O,C$s.tx=C$s.ty=0,C$s}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,C$s},C$s.pos=function(C$s,C$M,C$T){if(void 0===C$T&&(C$T=!1),this._x!==C$s||this._y!==C$M){if(this.destroyed)return this;if(C$T){this._x=C$s,this._y=C$M,this.conchModel&&this.conchModel.pos(this._x,this._y);var C$X=this._parent;C$X&&0===C$X._repaint&&(C$X._repaint=1,C$X.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=C$s,this.y=C$M}return this},C$s.pivot=function(C$s,C$M){return this.pivotX=C$s,this.pivotY=C$M,this},C$s.size=function(C$s,C$M){return this.width=C$s,this.height=C$M,this},C$s.scale=function(C$s,C$M,C$T){void 0===C$T&&(C$T=!1);var C$X=this.getStyle(),C$x=C$X._tf;if(C$x.scaleX!=C$s||C$x.scaleY!=C$M){if(this.destroyed)return this;if(C$T){C$X.setScale(C$s,C$M),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(C$s,C$M),this._renderType|=4;var C$c=this._parent;C$c&&0===C$c._repaint&&(C$c._repaint=1,C$c.parentRepaint())}else this.scaleX=C$s,this.scaleY=C$M}return this},C$s.skew=function(C$s,C$M){return this.skewX=C$s,this.skewY=C$M,this},C$s.render=function(C$s,C$M,C$T){C$F.spriteCount++,C$Y.renders[this._renderType]._fun(this,C$s,C$M+this._x,C$T+this._y),this._repaint=0},C$s.drawToCanvas=function(C$s,C$M,C$T,C$X){if(C$C.isConchNode){var C$x=C$Ps.create("2D");return new C$m(C$s,C$M,C$x).ctx.setCanvasType(1),this.conchModel.drawToCanvas(C$x.source,C$T,C$X),C$x}return C$v.drawToCanvas(this,this._renderType,C$s,C$M,C$T,C$X)},C$s.customRender=function(C$s,C$M,C$T){this._renderType|=1024},C$s._applyFilters=function(){var C$s;if(!C$C.isWebGL&&((C$s=this._$P.filters)&&!(C$s.length<1)))for(var C$M=0,C$T=C$s.length;C$M<C$T;C$M++)C$s[C$M].action.apply(this._$P.cacheCanvas)},C$s._isHaveGlowFilter=function(){var C$s,C$M=0;if(this.filters)for(C$M=0;C$M<this.filters.length;C$M++)if(8==this.filters[C$M].type)return!0;for(C$M=0,C$s=this._childs.length;C$M<C$s;C$M++)if(this._childs[C$M]._isHaveGlowFilter())return!0;return!1},C$s.localToGlobal=function(C$s,C$M){void 0===C$M&&(C$M=!1),!0===C$M&&(C$s=new C$k(C$s.x,C$s.y));for(var C$T=this;C$T&&C$T!=C$w.stage;)C$s=C$T.toParentPoint(C$s),C$T=C$T.parent;return C$s},C$s.globalToLocal=function(C$s,C$M){void 0===C$M&&(C$M=!1),C$M&&(C$s=new C$k(C$s.x,C$s.y));for(var C$T=this,C$X=[];C$T&&C$T!=C$w.stage;)C$X.push(C$T),C$T=C$T.parent;for(var C$x=C$X.length-1;0<=C$x;)C$s=(C$T=C$X[C$x]).fromParentPoint(C$s),C$x--;return C$s},C$s.toParentPoint=function(C$s){if(!C$s)return C$s;C$s.x-=this.pivotX,C$s.y-=this.pivotY,this.transform&&this._transform.transformPoint(C$s),C$s.x+=this._x,C$s.y+=this._y;var C$M=this._style.scrollRect;return C$M&&(C$s.x-=C$M.x,C$s.y-=C$M.y),C$s},C$s.fromParentPoint=function(C$s){if(!C$s)return C$s;C$s.x-=this._x,C$s.y-=this._y;var C$M=this._style.scrollRect;return C$M&&(C$s.x+=C$M.x,C$s.y+=C$M.y),this.transform&&this._transform.invertTransformPoint(C$s),C$s.x+=this.pivotX,C$s.y+=this.pivotY,C$s},C$s.on=function(C$s,C$M,C$T,C$X){return 1!==this._mouseEnableState&&this.isMouseEvent(C$s)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(C$s,C$M,C$T,C$X,!1)):C$x.prototype.on.call(this,C$s,C$M,C$T,C$X)},C$s.once=function(C$s,C$M,C$T,C$X){return 1!==this._mouseEnableState&&this.isMouseEvent(C$s)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(C$s,C$M,C$T,C$X,!0)):C$x.prototype.once.call(this,C$s,C$M,C$T,C$X)},C$s._$2__onDisplay=function(){if(1!==this._mouseEnableState){var C$s=this;for(C$s=C$s.parent;C$s&&1!==C$s._mouseEnableState&&!C$s._getBit(2);)C$s.mouseEnabled=!0,C$s._setBit(2,!0),C$s=C$s.parent}},C$s.loadImage=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=this;return void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),this.graphics.loadImage(C$s,C$M,C$T,C$X,C$x,function(C$s){C$l.destroyed||(C$l.size(C$M+(C$X||C$s.width),C$T+(C$x||C$s.height)),C$l.repaint(),C$c&&C$c.runWith(C$s))}),this},C$s.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},C$s._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},C$s._childChanged=function(C$s){this._childs.length?this._renderType|=2048:this._renderType&=-2049,C$s&&this._get$P("hasZorder")&&C$w.timer.callLater(this,this.updateZOrder),this.repaint()},C$s.parentRepaint=function(){var C$s=this._parent;C$s&&0===C$s._repaint&&(C$s._repaint=1,C$s.parentRepaint())},C$s.startDrag=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){void 0===C$M&&(C$M=!1),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=300),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=.92),this._$P.dragging||this._set$P("dragging",new C$K),this._$P.dragging.start(this,C$s,C$M,C$T,C$X,C$x,C$c,C$l)},C$s.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},C$s._releaseMem=function(){if(this._$P){var C$s=this._$P.cacheCanvas;C$s&&C$s.ctx&&(C$$.recover("RenderContext",C$s.ctx),C$s.ctx.canvas.size(0,0),C$s.ctx=null);var C$M=this._$P._filterCache;C$M&&(C$M.destroy(),C$M.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},C$s._setDisplay=function(C$s){C$s||this._releaseMem(),C$x.prototype._setDisplay.call(this,C$s)},C$s.hitTestPoint=function(C$s,C$M){var C$T=this.globalToLocal(C$k.TEMP.setTo(C$s,C$M));return C$s=C$T.x,C$M=C$T.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?C$A.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(C$s,C$M)},C$s.getMousePoint=function(){return this.globalToLocal(C$k.TEMP.setTo(C$w.stage.mouseX,C$w.stage.mouseY))},C$s._getWords=function(){return null},C$s._addChildsToLayout=function(C$s){var C$M=this._getWords();if(null==C$M&&0==this._childs.length)return!1;if(C$M)for(var C$T=0,C$X=C$M.length;C$T<C$X;C$T++)C$s.push(C$M[C$T]);C$T=0;for(var C$x=this._childs.length;C$T<C$x;++C$T){var C$c=this._childs[C$T];C$c._style._enableLayout()&&C$c._addToLayout(C$s)}return!0},C$s._addToLayout=function(C$s){this._style.absolute||(this._style.block?C$s.push(this):this._addChildsToLayout(C$s)&&(this.x=this.y=0))},C$s._isChar=function(){return!1},C$s._getCSSStyle=function(){return this._style.getCSSStyle()},C$s._setAttributes=function(C$s,C$M){switch(C$s){case"x":this.x=parseFloat(C$M);break;case"y":this.y=parseFloat(C$M);break;case"width":this.width=parseFloat(C$M);break;case"height":this.height=parseFloat(C$M);break;default:this[C$s]=C$M}},C$s._layoutLater=function(){this.parent&&this.parent._layoutLater()},C$q(0,C$s,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(C$s){this._optimizeScrollRect!=C$s&&(this._optimizeScrollRect=C$s,this.conchModel&&this.conchModel.optimizeScrollRect(C$s))}),C$q(0,C$s,"customRenderEnable",null,function(C$s){if(C$s&&(this._renderType|=1024,C$C.isConchNode)){C$T.CustomList.push(this);var C$M=new C$Ps("2d");C$M._setContext(new CanvasRenderingContext2D),this.customContext=new C$m(0,0,C$M),C$M.context.setCanvasType&&C$M.context.setCanvasType(2),this.conchModel.custom(C$M.context)}}),C$q(0,C$s,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(C$s){this.cacheAs=C$s?this._$P.hasFilter?"none":"normal":"none"}),C$q(0,C$s,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(C$s){var C$M=this._$P.cacheCanvas;if(C$s!==(C$M?C$M.type:"none")){if("none"!==C$s)this._getBit(1)||this._setUpNoticeType(1),C$M||(C$M=this._set$P("cacheCanvas",C$$.getItemByClass("cacheCanvas",Object))),C$M.type=C$s,C$M.reCache=!0,this._renderType|=16,"bitmap"==C$s&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(C$M){var C$T=C$M;C$T&&C$T.ctx&&(C$$.recover("RenderContext",C$T.ctx),C$T.ctx.canvas.size(0,0),C$T.ctx=null),C$$.recover("cacheCanvas",C$M)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),C$q(0,C$s,"zOrder",function(){return this._zOrder},function(C$s){this._zOrder!=C$s&&(this._zOrder=C$s,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(C$s),this._parent&&(C$s&&this._parent._set$P("hasZorder",!0),C$w.timer.callLater(this._parent,this.updateZOrder)))}),C$q(0,C$s,"rotation",function(){return this._style._tf.rotate},function(C$s){var C$M=this.getStyle();if(C$M._tf.rotate!==C$s){C$M.setRotate(C$s),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(C$s),this._renderType|=4;var C$T=this._parent;C$T&&0===C$T._repaint&&(C$T._repaint=1,C$T.parentRepaint())}}),C$q(0,C$s,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(C$s){this._width!==C$s&&(this._width=C$s,this.conchModel&&this.conchModel.size(C$s,this._height),this.repaint())}),C$q(0,C$s,"x",function(){return this._x},function(C$s){if(this._x!==C$s){if(this.destroyed)return;this._x=C$s,this.conchModel&&this.conchModel.pos(C$s,this._y);var C$M=this._parent;C$M&&0===C$M._repaint&&(C$M._repaint=1,C$M.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),C$q(0,C$s,"globalScaleY",function(){for(var C$s=1,C$M=this;C$M&&C$M!==C$w.stage;)C$s*=C$M.scaleY,C$M=C$M.parent;return C$s}),C$q(0,C$s,"hitArea",function(){return this._$P.hitArea},function(C$s){this._set$P("hitArea",C$s)}),C$q(0,C$s,"staticCache",function(){return this._$P.staticCache},function(C$s){this._set$P("staticCache",C$s),C$s||this.reCache()}),C$q(0,C$s,"texture",function(){return this._texture},function(C$s){this._texture!=C$s&&(this._texture=C$s,this.graphics.cleanByTexture(C$s,0,0))}),C$q(0,C$s,"y",function(){return this._y},function(C$s){if(this._y!==C$s){if(this.destroyed)return;this._y=C$s,this.conchModel&&this.conchModel.pos(this._x,C$s);var C$M=this._parent;C$M&&0===C$M._repaint&&(C$M._repaint=1,C$M.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),C$q(0,C$s,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(C$s){this._height!==C$s&&(this._height=C$s,this.conchModel&&this.conchModel.size(this._width,C$s),this.repaint())}),C$q(0,C$s,"blendMode",function(){return this._style.blendMode},function(C$s){this.getStyle().blendMode=C$s,this.conchModel&&this.conchModel.blendMode(C$s),C$s&&"source-over"!=C$s?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),C$q(0,C$s,"scaleX",function(){return this._style._tf.scaleX},function(C$s){var C$M=this.getStyle();if(C$M._tf.scaleX!==C$s){C$M.setScaleX(C$s),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(C$s,C$M._tf.scaleY),this._renderType|=4;var C$T=this._parent;C$T&&0===C$T._repaint&&(C$T._repaint=1,C$T.parentRepaint())}}),C$q(0,C$s,"scaleY",function(){return this._style._tf.scaleY},function(C$s){var C$M=this.getStyle();if(C$M._tf.scaleY!==C$s){C$M.setScaleY(C$s),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(C$M._tf.scaleX,C$s),this._renderType|=4;var C$T=this._parent;C$T&&0===C$T._repaint&&(C$T._repaint=1,C$T.parentRepaint())}}),C$q(0,C$s,"stage",function(){return C$w.stage}),C$q(0,C$s,"skewX",function(){return this._style._tf.skewX},function(C$s){var C$M=this.getStyle();if(C$M._tf.skewX!==C$s){C$M.setSkewX(C$s),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(C$s,C$M._tf.skewY),this._renderType|=4;var C$T=this._parent;C$T&&0===C$T._repaint&&(C$T._repaint=1,C$T.parentRepaint())}}),C$q(0,C$s,"scrollRect",function(){return this._style.scrollRect},function(C$s){this.getStyle().scrollRect=C$s,this.repaint(),C$s?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(C$s.x,C$s.y,C$s.width,C$s.height)):(this._renderType&=-129,this.conchModel&&(C$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),C$q(0,C$s,"skewY",function(){return this._style._tf.skewY},function(C$s){var C$M=this.getStyle();if(C$M._tf.skewY!==C$s){C$M.setSkewY(C$s),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(C$M._tf.skewX,C$s),this._renderType|=4;var C$T=this._parent;C$T&&0===C$T._repaint&&(C$T._repaint=1,C$T.parentRepaint())}}),C$q(0,C$s,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(C$s){this._tfChanged=!1,(this._transform=C$s)&&(this._x=C$s.tx,this._y=C$s.ty,C$s.tx=C$s.ty=0,this.conchModel&&this.conchModel.transform(C$s.a,C$s.b,C$s.c,C$s.d,this._x,this._y)),C$s?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),C$q(0,C$s,"pivotX",function(){return this._style._tf.translateX},function(C$s){this.getStyle().setTranslateX(C$s),this.conchModel&&this.conchModel.pivot(C$s,this._style._tf.translateY),this.repaint()}),C$q(0,C$s,"pivotY",function(){return this._style._tf.translateY},function(C$s){this.getStyle().setTranslateY(C$s),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,C$s),this.repaint()}),C$q(0,C$s,"alpha",function(){return this._style.alpha},function(C$s){this._style&&this._style.alpha!==C$s&&(C$s=C$s<0?0:1<C$s?1:C$s,this.getStyle().alpha=C$s,this.conchModel&&this.conchModel.alpha(C$s),1!==C$s?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),C$q(0,C$s,"visible",function(){return this._style.visible},function(C$s){this._style&&this._style.visible!==C$s&&(this.getStyle().visible=C$s,this.conchModel&&this.conchModel.visible(C$s),this.parentRepaint())}),C$q(0,C$s,"graphics",function(){return this._graphics||(this.graphics=C$v.createGraphics())},function(C$s){this._graphics&&(this._graphics._sp=null),(this._graphics=C$s)?(this._renderType&=-2,this._renderType|=512,(C$s._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(C$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),C$q(0,C$s,"filters",function(){return this._$P.filters},function(C$s){C$s&&0===C$s.length&&(C$s=null),this._$P.filters!=C$s&&(this._set$P("filters",C$s?C$s.slice():null),C$C.isConchApp&&(this.conchModel&&(C$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),C$C.isWebGL&&(C$s&&C$s.length?this._renderType|=32:this._renderType&=-33),C$s&&0<C$s.length?(this._getBit(1)||this._setUpNoticeType(1),C$C.isWebGL&&1==C$s.length&&C$s[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(C$C.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),C$q(0,C$s,"parent",C$x.prototype._$get_parent,function(C$s){C$w.superSet(C$ss,this,"parent",C$s),C$s&&this._getBit(2)&&this._$2__onDisplay()}),C$q(0,C$s,"mask",function(){return this._$P._mask},function(C$s){C$s&&this.mask&&this.mask._$P.maskParent||(C$s?(this.cacheAs="bitmap",this._set$P("_mask",C$s),C$s._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",C$s),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(C$s?C$s.conchModel:null),this._renderType|=64,this.parentRepaint())}),C$q(0,C$s,"mouseEnabled",function(){return 1<this._mouseEnableState},function(C$s){this._mouseEnableState=C$s?2:1}),C$q(0,C$s,"globalScaleX",function(){for(var C$s=1,C$M=this;C$M&&C$M!==C$w.stage;)C$s*=C$M.scaleX,C$M=C$M.parent;return C$s}),C$q(0,C$s,"mouseX",function(){return this.getMousePoint().x}),C$q(0,C$s,"mouseY",function(){return this.getMousePoint().y}),C$T.fromImage=function(C$s){return(new C$T).loadImage(C$s)},C$T._cachePool=[],C$T.CustomList=[],C$E(C$T,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=C$l.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),C$T}(C$ss),C$_s=function(C$s){function C$M(C$s){this._audio=null,this._onEnd=null,this._resumePlay=null,C$M.__super.call(this),this._onEnd=C$j.bind(this.__onEnd,this),this._resumePlay=C$j.bind(this.__resumePlay,this),C$s.addEventListener("ended",this._onEnd),this._audio=C$s}C$U(C$M,"laya.media.h5audio.AudioSoundChannel",C$Xs);var C$T=C$M.prototype;return C$T.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(C$w.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},C$T.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,C$e.container.appendChild(this._audio),this._audio.play()}catch(C$s){this.event("error")}},C$T.play=function(C$s){this.isStopped=!1;try{this._audio.playbackRate=C$Q.playbackRate,this._audio.currentTime=this.startTime}catch(C$s){return void this._audio.addEventListener("canplay",this._resumePlay)}C$Q.addChannel(this),C$e.container.appendChild(this._audio),!C$s&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},C$T.stop=function(){this.isStopped=!0,C$Q.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&C$C.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),C$e.onIE||this._audio!=C$Ts._musicAudio&&C$$.recover("audio:"+this.url,this._audio),C$e.removeElement(this._audio),this._audio=null)},C$T.pause=function(){this.isStopped=!0,C$Q.removeChannel(this),"pause"in this._audio&&this._audio.pause()},C$T.resume=function(){this._audio&&(this.isStopped=!1,C$Q.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},C$q(0,C$T,"position",function(){return this._audio?this._audio.currentTime:0}),C$q(0,C$T,"duration",function(){return this._audio?this._audio.duration:0}),C$q(0,C$T,"volume",function(){return this._audio?this._audio.volume:1},function(C$s){this._audio&&(this._audio.volume=C$s)}),C$M}(),C$Rs=function(C$s){function C$M(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=C$cs.ctx,C$M.__super.call(this),this._onPlayEnd=C$j.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}C$U(C$M,"laya.media.webaudio.WebAudioSoundChannel",C$Xs);var C$T=C$M.prototype;return C$T.play=function(C$s){if(C$Q.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var C$M=this.context,C$T=this.gain,C$X=C$M.createBufferSource();(this.bufferSource=C$X).buffer=this.audioBuffer,C$X.connect(C$T),C$T&&C$T.disconnect(),C$T.connect(C$M.destination),C$X.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=C$e.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(C$X.loop=!0),C$X.playbackRate.setTargetAtTime?C$X.playbackRate.setTargetAtTime(C$Q.playbackRate,this.context.currentTime,.1):C$X.playbackRate.value=C$Q.playbackRate,C$X.start(0,this.startTime),!C$s&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},C$T.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(C$w.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},C$T._clearBufferSource=function(){if(this.bufferSource){var C$s=this.bufferSource;C$s.stop?C$s.stop(0):C$s.noteOff(0),C$s.disconnect(0),C$s.onended=null,C$M._tryCleanFailed||this._tryClearBuffer(C$s),this.bufferSource=null}},C$T._tryClearBuffer=function(C$s){try{C$s.buffer=null}catch(C$s){C$M._tryCleanFailed=!0}},C$T.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,C$Q.removeChannel(this),this.startHandler=null,this.completeHandler=null},C$T.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,C$Q.removeChannel(this)},C$T.resume=function(){this.startTime=this._pauseTime,this.play(!1)},C$q(0,C$T,"position",function(){return this.bufferSource?(C$e.now()-this._startTime)/1e3+this.startTime:0}),C$q(0,C$T,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),C$q(0,C$T,"volume",function(){return this._volume},function(C$s){this.isStopped||(this._volume=C$s,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(C$s,this.context.currentTime,.1):this.gain.gain.value=C$s)}),C$M._tryCleanFailed=!1,C$M}(),C$qs=function(C$s){function C$M(){C$M.__super.call(this),this._w=0,this._h=0}C$U(C$M,"laya.resource.Bitmap",C$Os);var C$T=C$M.prototype;return C$q(0,C$T,"width",function(){return this._w}),C$q(0,C$T,"height",function(){return this._h}),C$q(0,C$T,"source",function(){return this._source}),C$M}(),C$Gs=function(C$M){function C$s(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,C$s.__super.call(this),this._interval=C$X.animationInterval,this._setUpNoticeType(1)}C$U(C$s,"laya.display.AnimationPlayerBase",C$M);var C$T=C$s.prototype;return C$T.play=function(C$s,C$M,C$T,C$X){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=!0),void 0===C$T&&(C$T=""),void 0===C$X&&(C$X=!0),this._isPlaying=!0,this.index="string"==typeof C$s?this._getFrameByLabel(C$s):C$s,this.loop=C$M,this._actionName=C$T,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},C$T._getFrameByLabel=function(C$s){var C$M=0;for(C$M=0;C$M<this._count;C$M++)if(this._labels[C$M]&&0<=this._labels[C$M].indexOf(C$s))return C$M;return 0},C$T._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},C$T._setControlNode=function(C$s){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=C$s)&&C$s!=this&&(C$s.on("display",this,this._checkResumePlaying),C$s.on("undisplay",this,this._checkResumePlaying))},C$T._setDisplay=function(C$s){C$M.prototype._setDisplay.call(this,C$s),this._checkResumePlaying()},C$T._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},C$T.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},C$T.addLabel=function(C$s,C$M){this._labels||(this._labels={}),this._labels[C$M]||(this._labels[C$M]=[]),this._labels[C$M].push(C$s)},C$T.removeLabel=function(C$s){if(C$s){if(this._labels)for(var C$M in this._labels)this._removeLabelFromLabelList(this._labels[C$M],C$s)}else this._labels=null},C$T._removeLabelFromLabelList=function(C$s,C$M){if(C$s)for(var C$T=C$s.length-1;0<=C$T;C$T--)C$s[C$T]==C$M&&C$s.splice(C$T,1)},C$T.gotoAndStop=function(C$s){this.index="string"==typeof C$s?this._getFrameByLabel(C$s):C$s,this.stop()},C$T._displayToIndex=function(C$s){},C$T.clear=function(){this.stop(),this._labels=null},C$q(0,C$T,"interval",function(){return this._interval},function(C$s){this._interval!=C$s&&(this._frameRateChanged=!0,this._interval=C$s,this._isPlaying&&0<C$s&&this.timerLoop(C$s,this,this._frameLoop,null,!0,!0))}),C$q(0,C$T,"isPlaying",function(){return this._isPlaying}),C$q(0,C$T,"index",function(){return this._index},function(C$s){if(this._index=C$s,this._displayToIndex(C$s),this._labels&&this._labels[C$s])for(var C$M=this._labels[C$s],C$T=0,C$X=C$M.length;C$T<C$X;C$T++)this.event("label",C$M[C$T])}),C$q(0,C$T,"count",function(){return this._count}),C$s.WRAP_POSITIVE=0,C$s.WRAP_REVERSE=1,C$s.WRAP_PINGPONG=2,C$s}(C$ps),C$gs=function(C$M){function C$R(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,C$R.__super.call(this),this.overflow=C$R.VISIBLE,this._style=new C$Ms(this),this._style.wordWrap=!1}C$U(C$R,"laya.display.Text",C$M);var C$s=C$R.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._lines=null,this._words&&(this._words.length=0,this._words=null)},C$s._getBoundPointsM=function(C$s){void 0===C$s&&(C$s=!1);var C$M=C$A.TEMP;return C$M.setTo(0,0,this.width,this.height),C$M._getBoundPoints()},C$s.getGraphicBounds=function(C$s){void 0===C$s&&(C$s=!1);var C$M=C$A.TEMP;return C$M.setTo(0,0,this.width,this.height),C$M},C$s._getCSSStyle=function(){return this._style},C$s.lang=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U){if(C$s=C$R.langPacks&&C$R.langPacks[C$s]?C$R.langPacks[C$s]:C$s,arguments.length<2)this._text=C$s;else{for(var C$p=0,C$_=arguments.length;C$p<C$_;C$p++)C$s=C$s.replace("{"+C$p+"}",arguments[C$p+1]);this._text=C$s}},C$s._isPassWordMode=function(){var C$s=this._style.password;return"prompt"in this&&this.prompt==this._text&&(C$s=!1),C$s},C$s._getPassWordTxt=function(C$s){var C$M;C$M="";for(var C$T=C$s.length;0<C$T;C$T--)C$M+="●";return C$M},C$s.renderText=function(C$s,C$M){var C$T=this.graphics;C$T.clear(!0);var C$X=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(C$e.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);C$e.context.font=C$X;var C$x=this.padding,C$c=C$x[3],C$l="left",C$u=this._lines,C$E=this.leading+this._charSize.height,C$O=this._currBitmapFont;C$O&&(C$E=this.leading+C$O.getMaxHeight());var C$U=C$x[0];if(!C$O&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(C$l="right",C$c=this._width-C$x[1]):"center"==this.align&&(C$l="center",C$c=.5*this._width+C$x[3]-C$x[1])),0<this._height){var C$p=this._textHeight>this._height?"top":this.valign;"middle"===C$p?C$U=.5*(this._height-C$M*C$E)+C$x[0]-C$x[2]:"bottom"===C$p&&(C$U=this._height-C$M*C$E-C$x[2])}var C$_=this._style;if(C$O&&C$O.autoScaleSize)var C$R=C$O.fontSize/this.fontSize;if(this._clipPoint)if(C$T.save(),C$O&&C$O.autoScaleSize){var C$q=0,C$G=0;C$q=this._width?this._width-C$x[3]-C$x[1]:this._textWidth,C$G=this._height?this._height-C$x[0]-C$x[2]:this._textHeight,C$q*=C$R,C$G*=C$R,C$T.clipRect(C$x[3],C$x[0],C$q,C$G)}else C$T.clipRect(C$x[3],C$x[0],this._width?this._width-C$x[3]-C$x[1]:this._textWidth,this._height?this._height-C$x[0]-C$x[2]:this._textHeight);var C$g=C$_.password;"prompt"in this&&this.prompt==this._text&&(C$g=!1);for(var C$f=0,C$J=0,C$P=Math.min(this._lines.length,C$M+C$s)||1,C$t=C$s;C$t<C$P;C$t++){var C$r,C$N=C$u[C$t];if(C$g){var C$w=C$N.length;C$N="";for(var C$k=C$w;0<C$k;C$k--)C$N+="●"}if(C$f=C$c-(this._clipPoint?this._clipPoint.x:0),C$J=C$U+C$E*C$t-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(C$l,C$f,C$J,C$t),C$O){var C$A=this.width;C$O.autoScaleSize&&(C$A=this.width*C$R),C$O.drawText(C$N,this,C$f,C$J,this.align,C$A)}else C$C.isWebGL?(this._words||(this._words=[]),(C$r=this._words.length>C$t-C$s?this._words[C$t-C$s]:new C$d).setText(C$N)):C$r=C$N,C$_.stroke?C$T.fillBorderText(C$r,C$f,C$J,C$X,this.color,C$_.strokeColor,C$_.stroke,C$l):C$T.fillText(C$r,C$f,C$J,C$X,this.color,C$l)}if(C$O&&C$O.autoScaleSize){var C$D=1/C$R;this.scale(C$D,C$D)}this._clipPoint&&C$T.restore(),this._startX=C$c,this._startY=C$U},C$s.drawUnderline=function(C$s,C$M,C$T,C$X){var C$x=this._lineWidths[C$X];switch(C$s){case"center":C$M-=C$x/2;break;case"right":C$M-=C$x}C$T+=this._charSize.height,this._graphics.drawLine(C$M,C$T,C$M+C$x,C$T,this.underlineColor||this.color,1)},C$s.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);C$e.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new C$k(0,0)):this._clipPoint=null;var C$s=this._lines.length;if(this.overflow!=C$R.VISIBLE){var C$M=this.overflow==C$R.HIDDEN?Math.floor:Math.ceil;C$s=Math.min(C$s,C$M((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var C$T=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(C$T,C$s),this.repaint()},C$s.evalTextSize=function(){var C$s,C$M=NaN;C$s=Math.max.apply(this,this._lineWidths),C$M=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],C$s==this._textWidth&&C$M==this._textHeight||(this._textWidth=C$s,this._textHeight=C$M,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},C$s.checkEnabledViewportOrNot=function(){return this.overflow==C$R.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},C$s.changeText=function(C$s){this._text!==C$s&&(this.lang(C$s+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},C$s.parseLines=function(C$s){var C$M=this.wordWrap||this.overflow==C$R.HIDDEN;if(C$M)var C$T=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var C$X=C$j.contextMeasureText(C$R._testWord);C$C.isConchApp&&0===C$X.width&&0===C$X.height&&(C$X=C$j.contextMeasureText("W")),this._charSize.width=C$X.width,this._charSize.height=C$X.height||this.fontSize}for(var C$x=C$s.replace(/\r\n/g,"\n").split("\n"),C$c=0,C$l=C$x.length;C$c<C$l;C$c++){var C$u=C$x[C$c];C$M?this.parseLine(C$u,C$T):(this._lineWidths.push(this.getTextWidth(C$u)),this._lines.push(C$u))}},C$s.parseLine=function(C$s,C$M){C$e.context;var C$T,C$X=this._lines,C$x=0,C$c=NaN,C$l=NaN,C$u=0;if((C$c=this.getTextWidth(C$s))<=C$M)return C$X.push(C$s),void this._lineWidths.push(C$c);C$c=this._charSize.width,0==(C$x=Math.floor(C$M/C$c))&&(C$x=1),C$l=C$c=this.getTextWidth(C$s.substring(0,C$x));for(var C$E=C$x,C$O=C$s.length;C$E<C$O;C$E++)if(C$M<(C$l+=C$c=this.getTextWidth(C$s.charAt(C$E))))if(this.wordWrap){var C$U=C$s.substring(C$u,C$E);if(C$U.charCodeAt(C$U.length-1)<255?(C$T=/(?:\w|-)+$/.exec(C$U))&&(C$E=C$T.index+C$u,0==C$T.index?C$E+=C$U.length:C$U=C$s.substring(C$u,C$E)):C$R.RightToLeft&&(C$T=/([\u0600-\u06FF])+$/.exec(C$U))&&(C$E=C$T.index+C$u,0==C$T.index?C$E+=C$U.length:C$U=C$s.substring(C$u,C$E)),C$X.push(C$U),this._lineWidths.push(C$l-C$c),!((C$u=C$E)+C$x<C$O)){C$X.push(C$s.substring(C$u,C$O)),this._lineWidths.push(this.getTextWidth(C$X[C$X.length-1])),C$u=-1;break}C$E+=C$x,C$l=C$c=this.getTextWidth(C$s.substring(C$u,C$E)),C$E--}else if(this.overflow==C$R.HIDDEN)return C$X.push(C$s.substring(0,C$E)),void this._lineWidths.push(this.getTextWidth(C$X[C$X.length-1]));this.wordWrap&&-1!=C$u&&(C$X.push(C$s.substring(C$u,C$O)),this._lineWidths.push(this.getTextWidth(C$X[C$X.length-1])))},C$s.getTextWidth=function(C$s){return this._currBitmapFont?this._currBitmapFont.getTextWidth(C$s):C$j.contextMeasureText(C$s).width},C$s.getWordWrapWidth=function(){var C$s=this.padding,C$M=NaN;return(C$M=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(C$M=this.wordWrap?100:C$e.width),C$M<=0&&(C$M=100),C$M-C$s[3]-C$s[1]},C$s.getCharPoint=function(C$s,C$M){this._isChanged&&C$w.timer.runCallLater(this,this.typeset);for(var C$T=0,C$X=this._lines,C$x=0,C$c=0,C$l=C$X.length;C$c<C$l;C$c++){if(C$s<(C$T+=C$X[C$c].length)){var C$u=C$c;break}C$x=C$T}var C$E=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;C$e.context.font=C$E;var C$O=this.getTextWidth(this._text.substring(C$x,C$s));return(C$M||new C$k).setTo(this._startX+C$O-(this._clipPoint?this._clipPoint.x:0),this._startY+C$u*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},C$q(0,C$s,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(C$s){C$s!=this._width&&(C$w.superSet(C$ps,this,"width",C$s),this.isChanged=!0)}),C$q(0,C$s,"textWidth",function(){return this._isChanged&&C$w.timer.runCallLater(this,this.typeset),this._textWidth}),C$q(0,C$s,"height",function(){return this._height?this._height:this.textHeight},function(C$s){C$s!=this._height&&(C$w.superSet(C$ps,this,"height",C$s),this.isChanged=!0)}),C$q(0,C$s,"textHeight",function(){return this._isChanged&&C$w.timer.runCallLater(this,this.typeset),this._textHeight}),C$q(0,C$s,"padding",function(){return this._getCSSStyle().padding},function(C$s){this._getCSSStyle().padding=C$s,this.isChanged=!0}),C$q(0,C$s,"bold",function(){return this._getCSSStyle().bold},function(C$s){this._getCSSStyle().bold=C$s,this.isChanged=!0}),C$q(0,C$s,"text",function(){return this._text||""},function(C$s){this._text!==C$s&&(this.lang(C$s+""),this.isChanged=!0,this.event("change"))}),C$q(0,C$s,"color",function(){return this._getCSSStyle().color},function(C$s){this._getCSSStyle().color!=C$s&&(this._getCSSStyle().color=C$s,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),C$q(0,C$s,"font",function(){return this._getCSSStyle().fontFamily},function(C$s){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),C$R._bitmapFonts&&C$R._bitmapFonts[C$s]&&(this._currBitmapFont=C$R._bitmapFonts[C$s]),this._getCSSStyle().fontFamily=C$s,this.isChanged=!0}),C$q(0,C$s,"fontSize",function(){return this._getCSSStyle().fontSize},function(C$s){this._getCSSStyle().fontSize=C$s,this.isChanged=!0}),C$q(0,C$s,"italic",function(){return this._getCSSStyle().italic},function(C$s){this._getCSSStyle().italic=C$s,this.isChanged=!0}),C$q(0,C$s,"align",function(){return this._getCSSStyle().align},function(C$s){this._getCSSStyle().align=C$s,this.isChanged=!0}),C$q(0,C$s,"valign",function(){return this._getCSSStyle().valign},function(C$s){this._getCSSStyle().valign=C$s,this.isChanged=!0}),C$q(0,C$s,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(C$s){this._getCSSStyle().wordWrap=C$s,this.isChanged=!0}),C$q(0,C$s,"leading",function(){return this._getCSSStyle().leading},function(C$s){this._getCSSStyle().leading=C$s,this.isChanged=!0}),C$q(0,C$s,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(C$s){this._getCSSStyle().backgroundColor=C$s,this.isChanged=!0}),C$q(0,C$s,"borderColor",function(){return this._getCSSStyle().borderColor},function(C$s){this._getCSSStyle().borderColor=C$s,this.isChanged=!0}),C$q(0,C$s,"stroke",function(){return this._getCSSStyle().stroke},function(C$s){this._getCSSStyle().stroke=C$s,this.isChanged=!0}),C$q(0,C$s,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(C$s){this._getCSSStyle().strokeColor=C$s,this.isChanged=!0}),C$q(0,C$s,"isChanged",null,function(C$s){this._isChanged!==C$s&&(this._isChanged=C$s)&&C$w.timer.callLater(this,this.typeset)}),C$q(0,C$s,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(C$s){if(!(this.overflow!=C$R.SCROLL||this.textWidth<this._width)&&this._clipPoint){C$s=C$s<this.padding[3]?this.padding[3]:C$s;var C$M=this._textWidth-this._width;C$s=C$M<C$s?C$M:C$s;var C$T=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=C$s,this.renderText(this._lastVisibleLineIndex,C$T)}}),C$q(0,C$s,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(C$s){if(!(this.overflow!=C$R.SCROLL||this.textHeight<this._height)&&this._clipPoint){C$s=C$s<this.padding[0]?this.padding[0]:C$s;var C$M=this._textHeight-this._height,C$T=(C$s=C$M<C$s?C$M:C$s)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=C$T;var C$X=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=C$s,this.renderText(C$T,C$X)}}),C$q(0,C$s,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),C$q(0,C$s,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),C$q(0,C$s,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),C$q(0,C$s,"underlineColor",function(){return this._underlineColor},function(C$s){this._underlineColor=C$s,this._isChanged=!0,this.typeset()}),C$R.registerBitmapFont=function(C$s,C$M){C$R._bitmapFonts||(C$R._bitmapFonts={}),C$R._bitmapFonts[C$s]=C$M},C$R.unregisterBitmapFont=function(C$s,C$M){if(void 0===C$M&&(C$M=!0),C$R._bitmapFonts&&C$R._bitmapFonts[C$s]){var C$T=C$R._bitmapFonts[C$s];C$M&&C$T.destroy(),delete C$R._bitmapFonts[C$s]}},C$R.setTextRightToLeft=function(){var C$s;(C$s=C$e.canvas.source.style).display="none",C$s.position="absolute",C$s.direction="rtl",C$C._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,C$e.document.body.appendChild(C$e.canvas.source)},C$R.supportFont=function(C$s){C$e.context.font="10px sans-serif";var C$M=C$j.contextMeasureText("abcji").width;C$e.context.font="10px "+C$s;var C$T=C$j.contextMeasureText("abcji").width;return console.log(C$M,C$T),C$M!==C$T},C$R._testWord="游",C$R.langPacks=null,C$R.VISIBLE="visible",C$R.SCROLL="scroll",C$R.HIDDEN="hidden",C$R.CharacterCache=!0,C$R.RightToLeft=!1,C$R._bitmapFonts=null,C$E(C$R,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),C$R}(C$ps),C$fs=function(C$p){function C$l(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",C$l.__super.call(this),this.offset=new C$k,this._canvasTransform=new C$z,this._previousOrientation=C$e.window.orientation;var C$M=this;this.transform=C$z.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var C$s=C$e.window,C$T=this;C$s.addEventListener("focus",function(){C$M._isFocused=!0,C$T.event("focus"),C$T.event("focuschange")}),C$s.addEventListener("blur",function(){C$M._isFocused=!1,C$T.event("blur"),C$T.event("focuschange"),C$T._isInputting()&&(C$rs.inputElement.target.focus=!1)});var C$X="visibilityState",C$x="visibilitychange",C$c=C$s.document;void 0!==C$c.hidden?(C$x="visibilitychange",C$X="visibilityState"):void 0!==C$c.mozHidden?(C$x="mozvisibilitychange",C$X="mozVisibilityState"):void 0!==C$c.msHidden?(C$x="msvisibilitychange",C$X="msVisibilityState"):void 0!==C$c.webkitHidden&&(C$x="webkitvisibilitychange",C$X="webkitVisibilityState"),C$s.document.addEventListener(C$x,function(){"hidden"==C$e.document[C$X]?C$T._setStageVisible(!1):C$T._setStageVisible(!0)}),C$s.document.addEventListener("qbrowserVisibilityChange",function(C$s){C$T._setStageVisible(!C$s.hidden)}),C$s.addEventListener("resize",function(){var C$s=C$e.window.orientation;null!=C$s&&C$s!=C$M._previousOrientation&&C$T._isInputting()&&(C$rs.inputElement.target.focus=!1),C$M._previousOrientation=C$s,C$T._isInputting()||C$T._resetCanvas()}),C$s.addEventListener("orientationchange",function(C$s){C$T._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),C$e.onMobile&&this.on("mousedown",this,this._onmouseMove)}C$U(C$l,"laya.display.Stage",C$p);var C$s=C$l.prototype;return C$s._setStageVisible=function(C$s){this._isVisibility!=C$s&&(this._isVisibility=C$s,this._isVisibility||this._isInputting()&&(C$rs.inputElement.target.focus=!1),this.event("visibilitychange"))},C$s._isInputting=function(){return C$e.onMobile&&C$rs.isInputting},C$s._changeCanvasSize=function(){this.setScreenSize(C$e.clientWidth*C$e.pixelRatio,C$e.clientHeight*C$e.pixelRatio)},C$s._resetCanvas=function(){if(this.screenAdaptationEnabled){var C$s=C$C._mainCanvas;C$s.source.style;C$s.size(1,1),C$w.timer.once(100,this,this._changeCanvasSize)}},C$s.setScreenSize=function(C$s,C$M){var C$T=!1;if("none"!==this._screenMode&&(C$T=(C$s/C$M<1?"vertical":"horizontal")!==this._screenMode)){var C$X=C$M;C$M=C$s,C$s=C$X}this.canvasRotation=C$T;var C$x=C$C._mainCanvas,C$c=C$x.source.style,C$l=this._canvasTransform.identity(),C$u=this._scaleMode,C$E=C$s/this.designWidth,C$O=C$M/this.designHeight,C$U=this.designWidth,C$p=this.designHeight,C$_=C$s,C$R=C$M,C$q=C$e.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,C$u){case"noscale":C$E=C$O=1,C$_=this.designWidth,C$R=this.designHeight;break;case"showall":C$E=C$O=Math.min(C$E,C$O),C$U=C$_=Math.round(this.designWidth*C$E),C$p=C$R=Math.round(this.designHeight*C$O);break;case"noborder":C$E=C$O=Math.max(C$E,C$O),C$_=Math.round(this.designWidth*C$E),C$R=Math.round(this.designHeight*C$O);break;case"full":C$E=C$O=1,this._width=C$U=C$s,this._height=C$p=C$M;break;case"fixedwidth":C$O=C$E,this._height=C$p=Math.round(C$M/C$E);break;case"fixedheight":C$E=C$O,this._width=C$U=Math.round(C$s/C$O);break;case"fixedauto":C$s/C$M<this.designWidth/this.designHeight?(C$O=C$E,this._height=C$p=Math.round(C$M/C$E)):(C$E=C$O,this._width=C$U=Math.round(C$s/C$O))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,C$U=C$U+1&2147483646,C$p=C$p+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),C$E*=this.scaleX,C$O*=this.scaleY,1===C$E&&1===C$O?this.transform.identity():(this.transform.a=this._formatData(C$E/(C$_/C$U)),this.transform.d=this._formatData(C$O/(C$R/C$p)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),C$x.size(C$U,C$p),C$v.changeWebGLSize(C$U,C$p),C$l.scale(C$_/C$U/C$q,C$R/C$p/C$q),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(C$s-C$_)/C$q:this.offset.x=.5*(C$s-C$_)/C$q,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(C$M-C$R)/C$q:this.offset.y=.5*(C$M-C$R)/C$q,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),C$l.translate(this.offset.x,this.offset.y),this.canvasDegree=0,C$T&&("horizontal"===this._screenMode?(C$l.rotate(Math.PI/2),C$l.translate(C$M/C$q,0),this.canvasDegree=90):(C$l.rotate(-Math.PI/2),C$l.translate(0,C$s/C$q),this.canvasDegree=-90)),C$l.a=this._formatData(C$l.a),C$l.d=this._formatData(C$l.d),C$l.tx=this._formatData(C$l.tx),C$l.ty=this._formatData(C$l.ty),C$c.transformOrigin=C$c.webkitTransformOrigin=C$c.msTransformOrigin=C$c.mozTransformOrigin=C$c.oTransformOrigin="0px 0px 0px",C$c.transform=C$c.webkitTransform=C$c.msTransform=C$c.mozTransform=C$c.oTransform="matrix("+C$l.toString()+")",C$l.translate(parseInt(C$c.left)||0,parseInt(C$c.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},C$s._formatData=function(C$s){return Math.abs(C$s)<1e-6?0:Math.abs(1-C$s)<.001?0<C$s?1:-1:C$s},C$s.getMousePoint=function(){return C$k.TEMP.setTo(this.mouseX,this.mouseY)},C$s.repaint=function(){this._repaint=1},C$s.parentRepaint=function(){},C$s._loop=function(){return this.render(C$C.context,0,0),!0},C$s._onmouseMove=function(C$s){this._mouseMoveTime=C$e.now()},C$s.getTimeFromFrameStart=function(){return C$e.now()-this._frameStartTime},C$s.render=function(C$s,C$M,C$T){if("sleep"===this._frameRate&&!C$C.isConchApp){var C$X=C$e.now();if(!(1e3<=C$X-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(C$F.loopCount++,C$G.instance.runEvent(),C$w.timer._update()));this._frameStartTime=C$X}if(this._renderCount++,C$C.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=C$e.now();var C$x="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),C$c=this._renderCount%2==0;if(C$F.renderSlow=!C$x,C$x||C$c||C$C.isConchApp){var C$l;C$F.loopCount++,C$G.instance.runEvent(),C$w.timer._update(),C$v.update3DLoop();var C$u=0,C$E=0;if(C$C.isConchNode)for(C$u=0,C$E=this._scenes.length;C$u<C$E;C$u++)(C$l=this._scenes[C$u])&&C$l._updateSceneConch();else for(C$u=0,C$E=this._scenes.length;C$u<C$E;C$u++)(C$l=this._scenes[C$u])&&C$l._updateScene();if(C$C.isConchNode){var C$O=C$ps.CustomList;for(C$u=0,C$E=C$O.length;C$u<C$E;C$u++){var C$U=C$O[C$u];C$U.customRender(C$U.customContext,0,0)}return}}C$C.isConchNode||this.renderingEnabled&&(C$x||!C$c||C$C.isConchWebGL)&&(C$C.isWebGL?C$C.WebGL.mainContext&&!C$C.WebGL.mainContext.isContextLost()&&(C$s.clear(),C$p.prototype.render.call(this,C$s,C$M,C$T),C$F._show&&C$F._sp&&C$F._sp.render(C$s,C$M,C$T),C$v.clear(this._bgColor),C$v.beginFlush(),C$s.flush(),C$v.endFinish(),C$i.instance&&C$i.getInstance().endDispose()):(C$v.clear(this._bgColor),C$p.prototype.render.call(this,C$s,C$M,C$T),C$F._show&&C$F._sp&&C$F._sp.render(C$s,C$M,C$T)))}else this._renderCount%5==0&&(C$F.loopCount++,C$G.instance.runEvent(),C$w.timer._update())},C$s._requestFullscreen=function(){var C$s=C$e.document.documentElement;C$s.requestFullscreen?C$s.requestFullscreen():C$s.mozRequestFullScreen?C$s.mozRequestFullScreen():C$s.webkitRequestFullscreen?C$s.webkitRequestFullscreen():C$s.msRequestFullscreen&&C$s.msRequestFullscreen()},C$s._fullScreenChanged=function(){C$w.stage.event("fullscreenchange")},C$s.exitFullscreen=function(){var C$s=C$e.document;C$s.exitFullscreen?C$s.exitFullscreen():C$s.mozCancelFullScreen?C$s.mozCancelFullScreen():C$s.webkitExitFullscreen&&C$s.webkitExitFullscreen()},C$q(0,C$s,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),C$q(0,C$s,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),C$q(0,C$s,"frameRate",function(){return this._frameRate},function(C$s){if(this._frameRate=C$s,C$C.isConchApp)switch(this._frameRate){case"slow":C$e.window.conch&&C$e.window.conchConfig.setSlowFrame&&C$e.window.conchConfig.setSlowFrame(!0);break;case"fast":C$e.window.conch&&C$e.window.conchConfig.setSlowFrame&&C$e.window.conchConfig.setSlowFrame(!1);break;case"mouse":C$e.window.conch&&C$e.window.conchConfig.setMouseFrame&&C$e.window.conchConfig.setMouseFrame(2e3);break;case"sleep":C$e.window.conch&&C$e.window.conchConfig.setLimitFPS&&C$e.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),C$q(0,C$s,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),C$q(0,C$s,"width",C$p.prototype._$get_width,function(C$s){this.designWidth=C$s,C$w.superSet(C$ps,this,"width",C$s),C$w.timer.callLater(this,this._changeCanvasSize)}),C$q(0,C$s,"alignH",function(){return this._alignH},function(C$s){this._alignH=C$s,C$w.timer.callLater(this,this._changeCanvasSize)}),C$q(0,C$s,"isFocused",function(){return this._isFocused}),C$q(0,C$s,"height",C$p.prototype._$get_height,function(C$s){this.designHeight=C$s,C$w.superSet(C$ps,this,"height",C$s),C$w.timer.callLater(this,this._changeCanvasSize)}),C$q(0,C$s,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||C$z.create()},C$p.prototype._$set_transform),C$q(0,C$s,"isVisibility",function(){return this._isVisibility}),C$q(0,C$s,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),C$q(0,C$s,"scaleMode",function(){return this._scaleMode},function(C$s){this._scaleMode=C$s,C$w.timer.callLater(this,this._changeCanvasSize)}),C$q(0,C$s,"alignV",function(){return this._alignV},function(C$s){this._alignV=C$s,C$w.timer.callLater(this,this._changeCanvasSize)}),C$q(0,C$s,"bgColor",function(){return this._bgColor},function(C$s){this._bgColor=C$s,this.conchModel&&this.conchModel.bgColor(C$s),C$C.isWebGL&&(C$s?C$l._wgColor=C$S.create(C$s)._color:C$e.onMiniGame||(C$l._wgColor=null)),C$e.onLimixiu?C$l._wgColor=C$S.create(C$s)._color:C$C.canvas.style.background=C$s||"none"}),C$q(0,C$s,"mouseX",function(){return Math.round(C$G.instance.mouseX/this.clientScaleX)}),C$q(0,C$s,"mouseY",function(){return Math.round(C$G.instance.mouseY/this.clientScaleY)}),C$q(0,C$s,"screenMode",function(){return this._screenMode},function(C$s){this._screenMode=C$s}),C$q(0,C$s,"visible",C$p.prototype._$get_visible,function(C$s){this.visible!==C$s&&(C$w.superSet(C$ps,this,"visible",C$s),C$C._mainCanvas.source.style.visibility=C$s?"visible":"hidden")}),C$q(0,C$s,"fullScreenEnabled",null,function(C$s){var C$M=C$e.document,C$T=C$C.canvas;C$s?(C$T.addEventListener("mousedown",this._requestFullscreen),C$T.addEventListener("touchstart",this._requestFullscreen),C$M.addEventListener("fullscreenchange",this._fullScreenChanged),C$M.addEventListener("mozfullscreenchange",this._fullScreenChanged),C$M.addEventListener("webkitfullscreenchange",this._fullScreenChanged),C$M.addEventListener("msfullscreenchange",this._fullScreenChanged)):(C$T.removeEventListener("mousedown",this._requestFullscreen),C$T.removeEventListener("touchstart",this._requestFullscreen),C$M.removeEventListener("fullscreenchange",this._fullScreenChanged),C$M.removeEventListener("mozfullscreenchange",this._fullScreenChanged),C$M.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),C$M.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),C$l.SCALE_NOSCALE="noscale",C$l.SCALE_EXACTFIT="exactfit",C$l.SCALE_SHOWALL="showall",C$l.SCALE_NOBORDER="noborder",C$l.SCALE_FULL="full",C$l.SCALE_FIXED_WIDTH="fixedwidth",C$l.SCALE_FIXED_HEIGHT="fixedheight",C$l.SCALE_FIXED_AUTO="fixedauto",C$l.ALIGN_LEFT="left",C$l.ALIGN_RIGHT="right",C$l.ALIGN_CENTER="center",C$l.ALIGN_TOP="top",C$l.ALIGN_MIDDLE="middle",C$l.ALIGN_BOTTOM="bottom",C$l.SCREEN_NONE="none",C$l.SCREEN_HORIZONTAL="horizontal",C$l.SCREEN_VERTICAL="vertical",C$l.FRAME_FAST="fast",C$l.FRAME_SLOW="slow",C$l.FRAME_MOUSE="mouse",C$l.FRAME_SLEEP="sleep",C$l.FRAME_MOUSE_THREDHOLD=2e3,C$E(C$l,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),C$l}(C$ps),C$Js=(function(C$s){function C$M(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,C$M.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}C$U(C$M,"laya.media.SoundNode",C$ps);var C$T=C$M.prototype;C$T._onParentChange=function(){this.target=this.parent},C$T.play=function(C$s,C$M){void 0===C$s&&(C$s=1),isNaN(C$s)&&(C$s=1),this.url&&(this.stop(),this._channel=C$Q.playSound(this.url,C$s,null,C$M))},C$T.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},C$T._setPlayAction=function(C$s,C$M,C$T,C$X){void 0===C$X&&(C$X=!0),this[C$T]&&C$s&&(C$X?C$s.on(C$M,this,this[C$T]):C$s.off(C$M,this,this[C$T]))},C$T._setPlayActions=function(C$s,C$M,C$T,C$X){if(void 0===C$X&&(C$X=!0),C$s&&C$M){var C$x,C$c=C$M.split(","),C$l=0;for(C$x=C$c.length,C$l=0;C$l<C$x;C$l++)this._setPlayAction(C$s,C$c[C$l],C$T,C$X)}},C$q(0,C$T,"playEvent",null,function(C$s){(this._playEvents=C$s)&&this._tar&&this._setPlayActions(this._tar,C$s,"play")}),C$q(0,C$T,"target",null,function(C$s){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=C$s,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),C$q(0,C$T,"stopEvent",null,function(C$s){(this._stopEvents=C$s)&&this._tar&&this._setPlayActions(this._tar,C$s,"stop")})}(),function(C$s){function C$M(){this._src=null,this._onload=null,this._onerror=null,C$M.__super.call(this)}C$U(C$M,"laya.resource.FileBitmap",C$qs);var C$T=C$M.prototype;return C$q(0,C$T,"src",function(){return this._src},function(C$s){this._src=C$s}),C$q(0,C$T,"onload",null,function(C$s){}),C$q(0,C$T,"onerror",null,function(C$s){}),C$M}()),C$Ps=function(C$s){function C$T(C$s,C$M){this._is2D=!1,C$T.__super.call(this);var C$X=this;if(this._source=this,"2D"===C$s||"AUTO"===C$s&&!C$C.isWebGL){this._is2D=!0,this._source=C$M||C$e.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var C$x=this;C$x.getContext=function(C$s,C$M){if(C$X._ctx)return C$X._ctx;var C$T=C$X._ctx=C$X._source.getContext(C$s,C$M);return C$T&&(C$T._canvas=C$x,C$C.isFlash||C$e.onLimixiu||(C$T.size=function(C$s,C$M){})),C$T}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}C$U(C$T,"laya.resource.HTMLCanvas",C$qs);var C$M=C$T.prototype;return C$M.clear=function(){this._ctx&&this._ctx.clear()},C$M.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},C$M.release=function(){},C$M._setContext=function(C$s){this._ctx=C$s},C$M.getContext=function(C$s,C$M){return this._ctx?this._ctx:this._ctx=C$T._createContext(this)},C$M.getMemSize=function(){return 0},C$M.size=function(C$s,C$M){(this._w!=C$s||this._h!=C$M||this._source&&(this._source.width!=C$s||this._source.height!=C$M))&&(this._w=C$s,this._h=C$M,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(C$s,C$M),this._source&&(this._source.height=C$M,this._source.width=C$s))},C$M.getCanvas=function(){return this._source},C$M.toBase64=function(C$s,C$M,C$T){if(this._source)if(C$C.isConchApp&&this._source.toBase64)this._source.toBase64(C$s,C$M,C$T);else{var C$X=this._source.toDataURL(C$s,C$M);C$T.call(this,C$X)}},C$q(0,C$M,"context",function(){return this._ctx}),C$q(0,C$M,"asBitmap",null,function(C$s){}),C$T.create=function(C$s,C$M){return new C$T(C$s,C$M)},C$T.TYPE2D="2D",C$T.TYPE3D="3D",C$T.TYPEAUTO="AUTO",C$T._createContext=null,C$T}(),C$ts=(function(C$s){function C$E(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){throw C$E.__super.call(this),new Error("不允许new！")}C$U(C$E,"laya.resource.HTMLSubImage",C$qs),C$E.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){return void 0===C$u&&(C$u=!1),new C$E(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u)}}(),function(C$s){function C$p(){this._frames=null,this._url=null,C$p.__super.call(this),this._setControlNode(this)}C$U(C$p,"laya.display.Animation",C$s);var C$M=C$p.prototype;C$M.destroy=function(C$s){void 0===C$s&&(C$s=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,C$s),this._frames=null,this._labels=null},C$M.play=function(C$s,C$M,C$T,C$X){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=!0),void 0===C$T&&(C$T=""),void 0===C$X&&(C$X=!0),C$T&&this._setFramesFromCache(C$T,C$X),this._isPlaying=!0,this.index="string"==typeof C$s?this._getFrameByLabel(C$s):C$s,this.loop=C$M,this._actionName=C$T,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},C$M._setFramesFromCache=function(C$s,C$M){var C$T;return void 0===C$M&&(C$M=!1),this._url&&(C$s=this._url+"#"+C$s),C$s&&C$p.framesMap[C$s]?((C$T=C$p.framesMap[C$s])instanceof Array?(this._frames=C$p.framesMap[C$s],this._count=this._frames.length):(C$T.nodeRoot&&(C$p.framesMap[C$s]=this._parseGraphicAnimationByData(C$T),C$T=C$p.framesMap[C$s]),this._frames=C$T.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=C$T.interval),this._labels=this._copyLabels(C$T.labels)),!0):(C$M&&console.log("ani not found:",C$s),!1)},C$M._copyLabels=function(C$s){if(!C$s)return null;var C$M,C$T;for(C$T in C$M={},C$s)C$M[C$T]=C$j.copyArray([],C$s[C$T]);return C$M},C$M._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&C$s.prototype._frameLoop.call(this)},C$M._displayToIndex=function(C$s){this._frames&&(this.graphics=this._frames[C$s])},C$M.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},C$M.loadImages=function(C$s,C$M){return void 0===C$M&&(C$M=""),this._url="",this._setFramesFromCache(C$M)||(this.frames=C$p.framesMap[C$M]?C$p.framesMap[C$M]:C$p.createFrames(C$s,C$M)),this},C$M.loadAtlas=function(C$M,C$T,C$X){void 0===C$X&&(C$X=""),this._url="";var C$x=this;function C$s(C$s){C$M===C$s&&(C$x.frames=C$p.framesMap[C$X]?C$p.framesMap[C$X]:C$p.createFrames(C$M,C$X),C$T&&C$T.run())}return C$x._setFramesFromCache(C$X)||(C$us.getAtlas(C$M)?C$s(C$M):C$w.loader.load(C$M,C$J.create(null,C$s,[C$M]),null,"atlas")),this},C$M.loadAnimation=function(C$s,C$M,C$T){this._url=C$s;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,C$M&&C$M.run()):!C$T||C$us.getAtlas(C$T)?this._loadAnimationData(C$s,C$M,C$T):C$w.loader.load(C$T,C$J.create(this,this._loadAnimationData,[C$s,C$M,C$T]),null,"atlas"),this},C$M._loadAnimationData=function(C$u,C$E,C$s){var C$O=this;if(!C$s||C$us.getAtlas(C$s)){var C$U=this;C$us.getRes(C$u)?C$M(C$u):C$w.loader.load(C$u,C$J.create(null,C$M,[C$u]),null,"json"),C$us.clearRes(C$u)}else console.warn("atlas load fail:"+C$s);function C$M(C$s){if(C$us.getRes(C$s)&&C$u===C$s){var C$M;if(C$p.framesMap[C$u+"#"])C$U._setFramesFromCache(C$O._actionName,!0),C$O.index=0,C$O._checkResumePlaying();else{var C$T=C$U._parseGraphicAnimation(C$us.getRes(C$u));if(!C$T)return;var C$X,C$x=C$T.animationList,C$c=0,C$l=C$x.length;for(C$c=0;C$c<C$l;C$c++)C$M=C$x[C$c],C$p.framesMap[C$u+"#"+C$M.name]=C$M,C$X||(C$X=C$M);C$X&&(C$p.framesMap[C$u+"#"]=C$X,C$U._setFramesFromCache(C$O._actionName,!0),C$O.index=0),C$O._checkResumePlaying()}C$E&&C$E.run()}}},C$M._parseGraphicAnimation=function(C$s){return C$ws.parseAnimationData(C$s)},C$M._parseGraphicAnimationByData=function(C$s){return C$ws.parseAnimationByData(C$s)},C$q(0,C$M,"frames",function(){return this._frames},function(C$s){(this._frames=C$s)&&(this._count=C$s.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),C$q(0,C$M,"autoPlay",null,function(C$s){C$s?this.play():this.stop()}),C$q(0,C$M,"source",null,function(C$s){-1<C$s.indexOf(".ani")?this.loadAnimation(C$s):-1<C$s.indexOf(".json")||-1<C$s.indexOf("als")||-1<C$s.indexOf("atlas")?this.loadAtlas(C$s):this.loadImages(C$s.split(","))}),C$q(0,C$M,"autoAnimation",null,function(C$s){this.play(0,!0,C$s,!1)}),C$p.createFrames=function(C$s,C$M){var C$T,C$X,C$x=0,C$c=0;if("string"==typeof C$s){var C$l=C$us.getAtlas(C$s);if(C$l&&C$l.length)for(C$T=[],C$x=0,C$c=C$l.length;C$x<C$c;C$x++)(C$X=new C$v.createGraphics).drawTexture(C$us.getRes(C$l[C$x]),0,0),C$T.push(C$X)}else if(C$s instanceof Array)for(C$T=[],C$x=0,C$c=C$s.length;C$x<C$c;C$x++)(C$X=new C$v.createGraphics).loadImage(C$s[C$x],0,0),C$T.push(C$X);return C$M&&(C$p.framesMap[C$M]=C$T),C$T},C$p.clearCache=function(C$s){var C$M,C$T=C$p.framesMap,C$X=C$s+"#";for(C$M in C$T)C$M!==C$s&&0!=C$M.indexOf(C$X)||delete C$p.framesMap[C$M]},C$p.framesMap={}}(C$Gs),function(C$s){function C$c(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,C$c.__super.call(this),null==C$c._sortIndexFun&&(C$c._sortIndexFun=C$N.sortByKey("index",!1,!0))}C$U(C$c,"laya.display.FrameAnimation",C$s);var C$M=C$c.prototype;return C$M._setUp=function(C$s,C$M){this._labels=null,this._animationNewFrames=null,this._targetDic=C$s,this._animationData=C$M,this.interval=1e3/C$M.frameRate,C$M.parsed?(this._count=C$M.count,this._labels=C$M.labels,this._animationNewFrames=C$M.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),C$M.parsed=!0,C$M.labels=this._labels,C$M.count=this._count,C$M.animationNewFrames=this._animationNewFrames},C$M.clear=function(){C$s.prototype.clear.call(this),this._targetDic=null,this._animationData=null},C$M._displayToIndex=function(C$s){if(this._animationData){C$s<0&&(C$s=0),C$s>this._count&&(C$s=this._count);var C$M=this._animationData.nodes,C$T=0,C$X=C$M.length;for(C$T=0;C$T<C$X;C$T++)this._displayNodeToFrame(C$M[C$T],C$s)}},C$M._displayNodeToFrame=function(C$s,C$M,C$T){C$T||(C$T=this._targetDic);var C$X=C$T[C$s.target];if(C$X){var C$x,C$c,C$l,C$u=C$s.frames,C$E=C$s.keys,C$O=0,C$U=C$E.length;for(C$O=0;C$O<C$U;C$O++)C$l=(C$c=C$u[C$x=C$E[C$O]]).length>C$M?C$c[C$M]:C$c[C$c.length-1],C$X[C$x]=C$l}},C$M._calculateDatas=function(){if(this._animationData){var C$s,C$M=this._animationData.nodes,C$T=0,C$X=C$M.length;for(C$T=this._count=0;C$T<C$X;C$T++)C$s=C$M[C$T],this._calculateNodeKeyFrames(C$s);this._count+=1}},C$M._calculateNodeKeyFrames=function(C$s){var C$M,C$T,C$X=C$s.keyframes,C$x=C$s.target;for(C$M in C$s.frames||(C$s.frames={}),C$s.keys?C$s.keys.length=0:C$s.keys=[],C$s.initValues||(C$s.initValues={}),C$X)C$T=C$X[C$M],C$s.frames[C$M]||(C$s.frames[C$M]=[]),this._targetDic&&this._targetDic[C$x]&&(C$s.initValues[C$M]=this._targetDic[C$x][C$M]),C$T.sort(C$c._sortIndexFun),C$s.keys.push(C$M),this._calculateNodePropFrames(C$T,C$s.frames[C$M],C$M,C$x)},C$M.resetToInitState=function(){if(this._targetDic&&this._animationData){var C$s,C$M,C$T=this._animationData.nodes,C$X=0,C$x=C$T.length;for(C$X=0;C$X<C$x;C$X++)if(C$M=(C$s=C$T[C$X]).initValues){var C$c,C$l=this._targetDic[C$s.target];if(C$l)for(C$c in C$M)C$l[C$c]=C$M[C$c]}}},C$M._calculateNodePropFrames=function(C$s,C$M,C$T,C$X){var C$x=0,C$c=C$s.length-1;if(0<C$c){for(C$M.length=C$s[C$c].index+1,C$x=0;C$x<C$c;C$x++)this._dealKeyFrame(C$s[C$x]),this._calculateFrameValues(C$s[C$x],C$s[C$x+1],C$M);this._dealKeyFrame(C$s[C$x])}0==C$c&&(C$M[C$s[0].index]=C$s[0].value,this._animationNewFrames&&(this._animationNewFrames[C$s[0].index]=!0))},C$M._dealKeyFrame=function(C$s){C$s.label&&""!=C$s.label&&this.addLabel(C$s.label,C$s.index)},C$M._calculateFrameValues=function(C$s,C$M,C$T){var C$X,C$x=0,C$c=C$s.index,C$l=C$M.index,C$u=C$s.value,C$E=C$M.value-C$s.value,C$O=C$l-C$c;if(C$l>this._count&&(this._count=C$l),C$s.tween)for(null==(C$X=C$Z[C$s.tweenMethod])&&(C$X=C$Z.linearNone),C$x=C$c;C$x<C$l;C$x++)C$T[C$x]=C$X(C$x-C$c,C$u,C$E,C$O),this._animationNewFrames&&(this._animationNewFrames[C$x]=!0);else for(C$x=C$c;C$x<C$l;C$x++)C$T[C$x]=C$u;this._animationNewFrames&&(this._animationNewFrames[C$s.index]=!0,this._animationNewFrames[C$M.index]=!0),C$T[C$M.index]=C$M.value},C$c._sortIndexFun=null,C$c}(C$Gs)),C$rs=function(C$M){function C$x(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",C$x.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=C$gs.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}C$U(C$x,"laya.display.Input",C$M);var C$s=C$x.prototype;return C$s.setSelection=function(C$s,C$M){this.focus=!0,laya.display.Input.inputElement.selectionStart=C$s,laya.display.Input.inputElement.selectionEnd=C$M},C$s._onUnDisplay=function(C$s){this.focus=!1},C$s._onMouseDown=function(C$s){this.focus=!0},C$s._syncInputTransform=function(){var C$s=this.nativeInput,C$M=C$j.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),C$T=this._width-this.padding[1]-this.padding[3],C$X=this._height-this.padding[0]-this.padding[2];C$C.isConchApp?(C$s.setScale(C$M.scaleX,C$M.scaleY),C$s.setSize(C$T,C$X),C$s.setPos(C$M.x,C$M.y)):(C$x.inputContainer.style.transform=C$x.inputContainer.style.webkitTransform="scale("+C$M.scaleX+","+C$M.scaleY+") rotate("+C$w.stage.canvasDegree+"deg)",C$s.style.width=C$T+"px",C$s.style.height=C$X+"px",C$x.inputContainer.style.left=C$M.x+"px",C$x.inputContainer.style.top=C$M.y+"px")},C$s.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},C$s._setInputMethod=function(){C$x.input.parentElement&&C$x.inputContainer.removeChild(C$x.input),C$x.area.parentElement&&C$x.inputContainer.removeChild(C$x.area),C$x.inputElement=this._multiline?C$x.area:C$x.input,C$x.inputContainer.appendChild(C$x.inputElement),C$gs.RightToLeft&&(C$x.inputElement.style.direction="rtl")},C$s._focusIn=function(){laya.display.Input.isInputting=!0;var C$s=this.nativeInput;this._focus=!0;var C$M=C$s.style;C$M.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),C$s.readOnly=!this._editable,C$C.isConchApp&&(C$s.setType(this._type),C$s.setForbidEdit(!this._editable)),C$s.maxLength=this._maxChars;this.padding;if(C$s.type=this._type,C$s.value=this._content,C$s.placeholder=this._prompt,C$w.stage.off("keydown",this,this._onKeyDown),C$w.stage.on("keydown",this,this._onKeyDown),(C$w.stage.focus=this).event("focus"),C$e.onPC&&C$s.focus(),!C$e.onMiniGame){this._text;this._text=null}this.typeset(),C$s.setColor(this._originColor),C$s.setFontSize(this.fontSize),C$s.setFontFace(C$e.onIPhone&&C$gs._fontFamilyMap[this.font]||this.font),C$C.isConchApp&&C$s.setMultiAble&&C$s.setMultiAble(this._multiline),C$M.lineHeight=this.leading+this.fontSize+"px",C$M.fontStyle=this.italic?"italic":"normal",C$M.fontWeight=this.bold?"bold":"normal",C$M.textAlign=this.align,C$M.padding="0 0",this._syncInputTransform(),!C$C.isConchApp&&C$e.onPC&&C$w.timer.frameLoop(1,this,this._syncInputTransform)},C$s._setPromptColor=function(){(C$x.promptStyleDOM=C$e.getElementById("promptStyle"))||((C$x.promptStyleDOM=C$e.createElement("style")).setAttribute("id","promptStyle"),C$e.document.head.appendChild(C$x.promptStyleDOM)),C$x.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},C$s._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(C$w.superSet(C$gs,this,"text",this._content),C$w.superSet(C$gs,this,"color",this._originColor)):(C$w.superSet(C$gs,this,"text",this._prompt),C$w.superSet(C$gs,this,"color",this._promptColor)),C$w.stage.off("keydown",this,this._onKeyDown),C$w.stage.focus=null,this.event("blur"),C$C.isConchApp&&this.nativeInput.blur(),C$e.onPC&&C$w.timer.clear(this,this._syncInputTransform)},C$s._onKeyDown=function(C$s){13===C$s.keyCode&&(C$e.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},C$s.changeText=function(C$s){this._content=C$s,this._focus?(this.nativeInput.value=C$s||"",this.event("change")):C$M.prototype.changeText.call(this,C$s)},C$q(0,C$s,"color",C$M.prototype._$get_color,function(C$s){this._focus&&this.nativeInput.setColor(C$s),C$w.superSet(C$gs,this,"color",this._content?C$s:this._promptColor),this._originColor=C$s}),C$q(0,C$s,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(C$s){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),C$q(0,C$s,"multiline",function(){return this._multiline},function(C$s){this._multiline=C$s,this.valign=C$s?"top":"middle"}),C$q(0,C$s,"maxChars",function(){return this._maxChars},function(C$s){C$s<=0&&(C$s=1e5),this._maxChars=C$s}),C$q(0,C$s,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(C$s){C$w.superSet(C$gs,this,"color",this._originColor),C$s+="",this._focus?(this.nativeInput.value=C$s||"",this.event("change")):(this._multiline||(C$s=C$s.replace(/\r?\n/g,"")),(this._content=C$s)?C$w.superSet(C$gs,this,"text",C$s):(C$w.superSet(C$gs,this,"text",this._prompt),C$w.superSet(C$gs,this,"color",this.promptColor)))}),C$q(0,C$s,"nativeInput",function(){return this._multiline?C$x.area:C$x.input}),C$q(0,C$s,"prompt",function(){return this._prompt},function(C$s){!this._text&&C$s&&C$w.superSet(C$gs,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?C$w.superSet(C$gs,this,"text",this._text==this._prompt?C$s:this._text):C$w.superSet(C$gs,this,"text",C$s),this._prompt=C$gs.langPacks&&C$gs.langPacks[C$s]?C$gs.langPacks[C$s]:C$s}),C$q(0,C$s,"focus",function(){return this._focus},function(C$s){var C$M=this.nativeInput;this._focus!==C$s&&(C$s?(C$M.target?C$M.target._focusOut():this._setInputMethod(),(C$M.target=this)._focusIn()):(C$M.target=null,this._focusOut(),C$e.document.body.scrollTop=0,C$M.blur(),C$C.isConchApp?C$M.setPos(-1e4,-1e4):C$x.inputContainer.contains(C$M)&&C$x.inputContainer.removeChild(C$M)))}),C$q(0,C$s,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(C$s){C$s?(-1<(C$s="[^"+C$s+"]").indexOf("^^")&&(C$s=C$s.replace("^^","")),this._restrictPattern=new RegExp(C$s,"g")):this._restrictPattern=null}),C$q(0,C$s,"editable",function(){return this._editable},function(C$s){this._editable=C$s,C$C.isConchApp&&C$x.input.setForbidEdit(!C$s)}),C$q(0,C$s,"promptColor",function(){return this._promptColor},function(C$s){this._promptColor=C$s,this._content||C$w.superSet(C$gs,this,"color",C$s)}),C$q(0,C$s,"type",function(){return this._type},function(C$s){this._getCSSStyle().password="password"==C$s,this._type=C$s,C$C.isConchApp&&this.nativeInput.setType(C$s)}),C$q(0,C$s,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(C$s){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),C$q(0,C$s,"asPassword",function(){return this._getCSSStyle().password},function(C$s){this._getCSSStyle().password=C$s,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),C$x.__init__=function(){C$x._createInputElement(),C$e.onMobile&&C$C.canvas.addEventListener(C$x.IOS_IFRAME?C$e.onMiniGame?"touchend":"click":"touchend",C$x._popupInputMethod)},C$x._popupInputMethod=function(C$s){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},C$x._createInputElement=function(){C$x._initInput(C$x.area=C$e.createElement("textarea")),C$x._initInput(C$x.input=C$e.createElement("input")),(C$x.inputContainer=C$e.createElement("div")).style.position="absolute",C$x.inputContainer.style.zIndex=1e5,C$e.container.appendChild(C$x.inputContainer),C$x.inputContainer.setPos=function(C$s,C$M){C$x.inputContainer.style.left=C$s+"px",C$x.inputContainer.style.top=C$M+"px"}},C$x._initInput=function(C$M){var C$s=C$M.style;C$s.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",C$s.resize="none",C$s.backgroundColor="transparent",C$s.border="none",C$s.outline="none",C$s.zIndex=1,C$M.addEventListener("input",C$x._processInputting),C$M.addEventListener("mousemove",C$x._stopEvent),C$M.addEventListener("mousedown",C$x._stopEvent),C$M.addEventListener("touchmove",C$x._stopEvent),C$M.setFontFace=function(C$s){C$M.style.fontFamily=C$s},C$C.isConchApp||(C$M.setColor=function(C$s){C$M.style.color=C$s},C$M.setFontSize=function(C$s){C$M.style.fontSize=C$s+"px"})},C$x._processInputting=function(C$s){var C$M=laya.display.Input.inputElement.target;if(C$M){var C$T=laya.display.Input.inputElement.value;C$M._restrictPattern&&(C$T=C$T.replace(/\u2006|\x27/g,""),C$M._restrictPattern.test(C$T)&&(C$T=C$T.replace(C$M._restrictPattern,""),laya.display.Input.inputElement.value=C$T)),C$M._text=C$T,C$M.event("input")}},C$x._stopEvent=function(C$s){"touchmove"==C$s.type&&C$s.preventDefault(),C$s.stopPropagation&&C$s.stopPropagation()},C$x.TYPE_TEXT="text",C$x.TYPE_PASSWORD="password",C$x.TYPE_EMAIL="email",C$x.TYPE_URL="url",C$x.TYPE_NUMBER="number",C$x.TYPE_RANGE="range",C$x.TYPE_DATE="date",C$x.TYPE_MONTH="month",C$x.TYPE_WEEK="week",C$x.TYPE_TIME="time",C$x.TYPE_DATE_TIME="datetime",C$x.TYPE_DATE_TIME_LOCAL="datetime-local",C$x.TYPE_SEARCH="search",C$x.input=null,C$x.area=null,C$x.inputElement=null,C$x.inputContainer=null,C$x.confirmButton=null,C$x.promptStyleDOM=null,C$x.inputHeight=45,C$x.isInputting=!1,C$x.stageMatrix=null,C$E(C$x,["IOS_IFRAME",function(){return this.IOS_IFRAME=C$e.onIOS&&C$e.window.top!=C$e.window.self}]),C$x}(C$gs),C$Ns=function(C$s){function C$T(C$s,C$M){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,C$T.__super.call(this),C$s&&this._init_(C$s,C$M)}C$U(C$T,"laya.resource.HTMLImage",C$Js);var C$M=C$T.prototype;return C$M._init_=function(C$s,C$M){this._src=C$s,this._source=new C$e.window.Image,C$M&&(C$M.onload&&(this.onload=C$M.onload),C$M.onerror&&(this.onerror=C$M.onerror),C$M.onCreate&&C$M.onCreate(this)),0!=C$s.indexOf("data:image")&&(this._source.crossOrigin=""),C$s&&(this._source.src=C$s)},C$M.recreateResource=function(){var C$s=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var C$M=this;this._source=new C$e.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(C$M._needReleaseAgain)return C$M._needReleaseAgain=!1,C$M._source.onload=null,void(C$M._source=null);C$M._source.onload=null,C$M.memorySize=C$s._w*C$s._h*4,C$M._recreateLock=!1,C$M.completeCreate()},this._source.src=this._src}},C$M.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},C$M.onresize=function(){this._w=this._source.width,this._h=this._source.height},C$q(0,C$M,"onload",null,function(C$s){var C$M=this;this._onload=C$s,this._source&&(this._source.onload=null!=this._onload?function(){C$M.onresize(),C$M._onload()}:null)}),C$q(0,C$M,"onerror",null,function(C$s){var C$M=this;this._onerror=C$s,this._source&&(this._source.onerror=null!=this._onerror?function(){C$M._onerror()}:null)}),C$q(0,C$M,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(C$s){this._enableMerageInAtlas=C$s,C$C.isConchApp&&this._source&&(this._source.enableMerageInAtlas=C$s)}),C$T.create=function(C$s,C$M){return new C$T(C$s,C$M)},C$T}(),C$ws=(function(C$c){function C$s(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,C$s.__super.call(this)}C$U(C$s,"laya.display.EffectAnimation",C$c);var C$M=C$s.prototype;C$M._onOtherBegin=function(C$s){C$s!=this&&this.stop()},C$M.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},C$M._onPlayAction=function(){this.play(0,!1)},C$M.play=function(C$s,C$M,C$T,C$X){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=!0),void 0===C$T&&(C$T=""),void 0===C$X&&(C$X=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,C$s,C$M,C$T,C$X))},C$M._recordInitData=function(){if(this._aniKeys){var C$s,C$M,C$T=0;for(C$s=this._aniKeys.length,C$T=0;C$T<C$s;C$T++)C$M=this._aniKeys[C$T],this._initData[C$M]=this._target[C$M]}},C$M._displayToIndex=function(C$s){if(this._animationData){C$s<0&&(C$s=0),C$s>this._count&&(C$s=this._count);var C$M=this._animationData.nodes,C$T=0,C$X=C$M.length;for(C$X=1<C$X?1:C$X,C$T=0;C$T<C$X;C$T++)this._displayNodeToFrame(C$M[C$T],C$s)}},C$M._displayNodeToFrame=function(C$s,C$M,C$T){if(this._target){var C$X;C$X=this._target;var C$x,C$c,C$l,C$u,C$E=C$s.frames,C$O=C$s.keys,C$U=0,C$p=C$O.length;C$u=C$s.secondFrames;var C$_,C$R,C$q,C$G,C$g=0;for(C$U=0;C$U<C$p;C$U++)C$c=C$E[C$x=C$O[C$U]],C$l=-1==(C$g=C$u[C$x])?this._initData[C$x]:C$M<C$g?(C$q=(C$R=C$s.keyframes[C$x])[0]).tween?(null==(C$_=C$Z[C$q.tweenMethod])&&(C$_=C$Z.linearNone),C$G=C$R[1],C$_(C$M,this._initData[C$x],C$G.value-this._initData[C$x],C$G.index)):this._initData[C$x]:C$c.length>C$M?C$c[C$M]:C$c[C$c.length-1],C$X[C$x]=C$l}},C$M._calculateNodeKeyFrames=function(C$s){C$c.prototype._calculateNodeKeyFrames.call(this,C$s);var C$M,C$T,C$X,C$x=C$s.keyframes;C$s.target;for(C$M in C$X={},C$s.secondFrames=C$X,C$x)(C$T=C$x[C$M]).length<=1?C$X[C$M]=-1:C$X[C$M]=C$T[1].index},C$q(0,C$M,"target",function(){return this._target},function(C$s){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=C$s,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),C$q(0,C$M,"playEvent",null,function(C$s){(this._playEvents=C$s)&&this.addEvent()}),C$q(0,C$M,"effectData",null,function(C$s){var C$M;C$s&&((C$M=C$s.animations)&&C$M[0]&&(this._setUp({},C$M[0]),C$M[0].nodes&&C$M[0].nodes[0]&&(this._aniKeys=C$M[0].nodes[0].keys)))}),C$q(0,C$M,"effectClass",null,function(C$s){var C$M,C$T;(this._effectClass=C$L.getClass(C$s),this._effectClass)&&((C$M=this._effectClass.uiView)&&(C$T=C$M.animations)&&C$T[0]&&(this._setUp({},C$T[0]),C$T[0].nodes&&C$T[0].nodes[0]&&(this._aniKeys=C$T[0].nodes[0].keys)))}),C$s.EffectAnimationBegin="effectanimationbegin"}(C$ts),function(C$M){var C$h;function C$Q(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,C$Q.__super.call(this)}C$U(C$Q,"laya.utils.GraphicAnimation",C$M);var C$s=C$Q.prototype;return C$s._parseNodeList=function(C$s){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[C$s.compId]=C$s.props,C$s.compId&&this._nodeList.push(C$s.compId);var C$M=C$s.child;if(C$M){var C$T=0,C$X=C$M.length;for(C$T=0;C$T<C$X;C$T++)this._parseNodeList(C$M[C$T])}},C$s._calGraphicData=function(C$s){var C$M;if(this._setUp(null,C$s),this._createGraphicData(),this._nodeIDAniDic)for(C$M in this._nodeIDAniDic)this._nodeIDAniDic[C$M]=null},C$s._createGraphicData=function(){var C$s,C$M=[],C$T=0,C$X=this.count,C$x=this._animationNewFrames;for(C$x||(C$x=[]),C$T=0;C$T<C$X;C$T++)!C$x[C$T]&&C$s||(C$s=this._createFrameGraphic(C$T)),C$M.push(C$s);this._gList=C$M},C$s._createFrameGraphic=function(C$s){var C$M=C$v.createGraphics();return C$Q._rootMatrix||(C$Q._rootMatrix=new C$z),this._updateNodeGraphic(this._rootNode,C$s,C$Q._rootMatrix,C$M),C$M},C$s._updateNodeGraphic=function(C$s,C$M,C$T,C$X,C$x){var C$c;void 0===C$x&&(C$x=1);var C$l,C$u,C$E,C$O=(C$c=this._nodeGDic[C$s.compId]=this._getNodeGraphicData(C$s.compId,C$M,this._nodeGDic[C$s.compId])).alpha*C$x;if(!(C$O<.01)&&(C$c.resultTransform||(C$c.resultTransform=C$z.create()),C$l=C$c.resultTransform,C$z.mul(C$c.transform,C$T,C$l),C$c.skin&&(C$u=this._getTextureByUrl(C$c.skin))&&(C$l._checkTransform()?(C$X.drawTexture(C$u,0,0,C$c.width,C$c.height,C$l,C$O),C$c.resultTransform=null):C$X.drawTexture(C$u,C$l.tx,C$l.ty,C$c.width,C$c.height,null,C$O)),C$E=C$s.child)){var C$U,C$p=0;for(C$U=C$E.length,C$p=0;C$p<C$U;C$p++)this._updateNodeGraphic(C$E[C$p],C$M,C$l,C$X,C$O)}},C$s._updateNoChilds=function(C$s,C$M){if(C$s.skin){var C$T=this._getTextureByUrl(C$s.skin);if(C$T){var C$X=C$s.transform;C$X._checkTransform();!C$X.bTransform?C$M.drawTexture(C$T,C$X.tx,C$X.ty,C$s.width,C$s.height,null,C$s.alpha):C$M.drawTexture(C$T,0,0,C$s.width,C$s.height,C$X.clone(),C$s.alpha)}}},C$s._updateNodeGraphic2=function(C$s,C$M,C$T){var C$X;if(C$X=this._nodeGDic[C$s.compId]=this._getNodeGraphicData(C$s.compId,C$M,this._nodeGDic[C$s.compId]),C$s.child){var C$x=C$X.transform;C$x._checkTransform();var C$c,C$l;C$l=(C$c=!C$x.bTransform)&&(0!=C$x.tx||0!=C$x.ty);var C$u,C$E,C$O;if((C$u=C$x.bTransform||1!=C$X.alpha)&&C$T.save(),1!=C$X.alpha&&C$T.alpha(C$X.alpha),C$c?C$l&&C$T.translate(C$x.tx,C$x.ty):C$T.transform(C$x.clone()),C$E=C$s.child,C$X.skin&&(C$O=this._getTextureByUrl(C$X.skin))&&C$T.drawTexture(C$O,0,0,C$X.width,C$X.height),C$E){var C$U,C$p=0;for(C$U=C$E.length,C$p=0;C$p<C$U;C$p++)this._updateNodeGraphic2(C$E[C$p],C$M,C$T)}C$u?C$T.restore():C$c?C$l&&C$T.translate(-C$x.tx,-C$x.ty):C$T.transform(C$x.clone().invert())}else this._updateNoChilds(C$X,C$T)},C$s._calculateNodeKeyFrames=function(C$s){C$M.prototype._calculateNodeKeyFrames.call(this,C$s),this._nodeIDAniDic[C$s.target]=C$s},C$s.getNodeDataByID=function(C$s){return this._nodeIDAniDic[C$s]},C$s._getParams=function(C$s,C$M,C$T,C$X){var C$x=C$Q._temParam;C$x.length=C$M.length;var C$c=0,C$l=C$M.length;for(C$c=0;C$c<C$l;C$c++)C$x[C$c]=this._getObjVar(C$s,C$M[C$c][0],C$T,C$M[C$c][1],C$X);return C$x},C$s._getObjVar=function(C$s,C$M,C$T,C$X,C$x){if(C$s.hasOwnProperty(C$M)){var C$c=C$s[C$M];if(C$T>=C$c.length&&(C$T=C$c.length-1),null!=C$s[C$M][C$T])return C$s[C$M][C$T]}return C$x.hasOwnProperty(C$M)?C$x[C$M]:C$X},C$s._getNodeGraphicData=function(C$s,C$M,C$T){C$T||(C$T=C$h.create()),C$T.transform?C$T.transform.identity():C$T.transform=C$z.create();var C$X=this.getNodeDataByID(C$s);if(!C$X)return C$T;var C$x,C$c,C$l=C$X.frames,C$u=this._getParams(C$l,C$Q._drawTextureCmd,C$M,this._nodeDefaultProps[C$s]),C$E=C$u[0],C$O=NaN,C$U=NaN,C$p=C$u[5],C$_=C$u[6],C$R=C$u[13],C$q=C$u[14],C$G=C$u[7],C$g=C$u[8],C$f=C$u[9],C$J=C$u[11],C$P=C$u[12];C$O=C$u[3],C$U=C$u[4],0!=C$O&&0!=C$U||(C$E=null),-1==C$O&&(C$O=0),-1==C$U&&(C$U=0),C$T.skin=C$E,C$T.width=C$O,C$T.height=C$U,C$E&&((C$x=this._getTextureByUrl(C$E))?(C$O||(C$O=C$x.sourceWidth),C$U||(C$U=C$x.sourceHeight)):console.warn("lost skin:",C$E,",you may load pics first")),C$T.alpha=C$u[10],C$c=C$T.transform,0!=C$R&&(C$p=C$R*C$O),0!=C$q&&(C$_=C$q*C$U),0==C$p&&0==C$_||C$c.translate(-C$p,-C$_);var C$t=null;if(C$f||1!==C$G||1!==C$g||C$J||C$P){(C$t=C$Q._tempMt).identity(),C$t.bTransform=!0;var C$r=.0174532922222222*(C$f-C$J),C$N=.0174532922222222*(C$f+C$P),C$w=Math.cos(C$N),C$k=Math.sin(C$N),C$A=Math.sin(C$r),C$D=Math.cos(C$r);C$t.a=C$G*C$w,C$t.b=C$G*C$k,C$t.c=-C$g*C$A,C$t.d=C$g*C$D,C$t.tx=C$t.ty=0}return C$t&&(C$c=C$z.mul(C$c,C$t,C$c)),C$c.translate(C$u[1],C$u[2]),C$T},C$s._getTextureByUrl=function(C$s){return C$us.getRes(C$s)},C$s.setAniData=function(C$s,C$M){if(C$s.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=C$s,this._parseNodeList(C$s);var C$T,C$X={},C$x=[],C$c=C$s.animations,C$l=0,C$u=C$c.length;for(C$l=0;C$l<C$u;C$l++)if(C$T=C$c[C$l],this._labels=null,(!C$M||C$M==C$T.name)&&C$T){try{this._calGraphicData(C$T)}catch(C$s){console.warn("parse animation fail:"+C$T.name+",empty animation created"),this._gList=[]}var C$E={};C$E.interval=1e3/C$T.frameRate,C$E.frames=this._gList,C$E.labels=this._labels,C$E.name=C$T.name,C$x.push(C$E),C$X[C$T.name]=C$E}this.animationList=C$x,this.animationDic=C$X}C$Q._temParam.length=0},C$s.parseByData=function(C$s){var C$M,C$T;C$M=C$s.nodeRoot,C$T=C$s.aniO,delete C$s.nodeRoot,delete C$s.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=C$M,this._parseNodeList(C$M),this._labels=null;try{this._calGraphicData(C$T)}catch(C$s){console.warn("parse animation fail:"+C$T.name+",empty animation created"),this._gList=[]}var C$X=C$s;return C$X.interval=1e3/C$T.frameRate,C$X.frames=this._gList,C$X.labels=this._labels,C$X.name=C$T.name,C$X},C$s.setUpAniData=function(C$s){if(C$s.animations){var C$M,C$T={},C$X=[],C$x=C$s.animations,C$c=0,C$l=C$x.length;for(C$c=0;C$c<C$l;C$c++)if(C$M=C$x[C$c]){var C$u={};C$u.name=C$M.name,C$u.aniO=C$M,C$u.nodeRoot=C$s,C$X.push(C$u),C$T[C$M.name]=C$u}this.animationList=C$X,this.animationDic=C$T}},C$s._clear=function(){var C$s,C$M;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(C$s in this._nodeGDic)(C$M=this._nodeGDic[C$s])&&C$M.recover();this._nodeGDic=null},C$Q.parseAnimationByData=function(C$s){var C$M;return C$Q._I||(C$Q._I=new C$Q),C$M=C$Q._I.parseByData(C$s),C$Q._I._clear(),C$M},C$Q.parseAnimationData=function(C$s){var C$M;return C$Q._I||(C$Q._I=new C$Q),C$Q._I.setUpAniData(C$s),(C$M={}).animationList=C$Q._I.animationList,C$M.animationDic=C$Q._I.animationDic,C$Q._I._clear(),C$M},C$Q._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],C$Q._temParam=[],C$Q._I=null,C$Q._rootMatrix=null,C$E(C$Q,["_tempMt",function(){return this._tempMt=new C$z}]),C$Q.__init$=function(){C$h=function(){function C$s(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return C$U(C$s,""),C$s.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),C$$.recover("GraphicNode",this)},C$s.create=function(){return C$$.getItemByClass("GraphicNode",C$s)},C$s}()},C$Q}(C$ts));C$w.__init([C$O,C$Es,C$C,C$e,C$W,C$D,C$s,C$ws])}(window,document,Laya),function(C$s,C$M,C$T){C$T.un,C$T.uns,C$T.static;var C$X=C$T.class;C$T.getset,C$T.__newvec;new(function(){function C$s(){}return C$X(C$s,"LayaMain"),C$s}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}}),function(C$s,C$M,C$N){C$N.un,C$N.uns;var C$l=C$N.static,C$_=C$N.class,C$X=C$N.getset,C$c=C$N.__newvec,C$U=laya.maths.Arith,C$p=laya.maths.Bezier,C$T=laya.resource.Bitmap,C$R=laya.utils.Browser,C$E=laya.utils.Byte,C$q=laya.utils.Color,C$w=(laya.filters.ColorFilter,C$N.Config),C$x=laya.resource.Context,C$k=(laya.events.Event,laya.filters.Filter),C$u=laya.display.Graphics,C$O=laya.resource.HTMLCanvas,C$G=(laya.utils.HTMLChar,laya.resource.HTMLImage),C$g=laya.resource.HTMLSubImage,C$A=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),C$D=laya.maths.Point,C$h=laya.maths.Rectangle,C$f=laya.renders.Render,C$J=(laya.renders.RenderContext,laya.renders.RenderSprite),C$P=laya.resource.Resource,C$t=laya.resource.ResourceManager,C$r=laya.utils.RunDriver,C$Q=laya.display.Sprite,C$v=laya.display.Stage,C$z=laya.utils.Stat,C$B=laya.utils.StringKey,C$o=(laya.display.css.Style,laya.system.System),C$C=laya.display.Text,C$m=laya.resource.Texture,C$Y=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),C$I=laya.utils.VectorGraphManager;laya.utils.WordText;C$N.interface("laya.webgl.shapes.IShape"),C$N.interface("laya.webgl.submit.ISubmit"),C$N.interface("laya.webgl.text.ICharSegment"),C$N.interface("laya.webgl.canvas.save.ISaveData"),C$N.interface("laya.webgl.resource.IMergeAtlasBitmap"),C$N.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var C$y=function(){function C$s(){}C$_(C$s,"laya.filters.webgl.FilterActionGL");var C$M=C$s.prototype;return C$N.imps(C$M,{"laya.filters.IFilterActionGL":!0}),C$M.setValue=function(C$s){},C$M.setValueMix=function(C$s){},C$M.apply3d=function(C$s,C$M,C$T,C$X,C$x){return null},C$M.apply=function(C$s){return null},C$X(0,C$M,"typeMix",function(){return 0}),C$s}(),C$e=function(){function C$s(){}return C$_(C$s,"laya.webgl.shader.ShaderValue"),C$s}(),C$V=function(){var C$X,C$x;function C$s(C$s,C$M,C$T){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new C$x,void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),this._cells=null,this._rowInfo=null,this._init(C$s,C$M),this._atlasID=C$T}C$_(C$s,"laya.webgl.atlas.AtlasGrid");var C$M=C$s.prototype;return C$M.getAltasID=function(){return this._atlasID},C$M.setAltasID=function(C$s){0<=C$s&&(this._atlasID=C$s)},C$M.addTex=function(C$s,C$M,C$T){var C$X=this._get(C$M,C$T);return 0==C$X.ret||(this._fill(C$X.x,C$X.y,C$M,C$T,C$s),this._texCount++),C$X},C$M._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},C$M._init=function(C$s,C$M){if(this._width=C$s,this._height=C$M,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=C$c(this._height);for(var C$T=0;C$T<this._height;C$T++)this._rowInfo[C$T]=new C$X;return this._clear(),!0},C$M._get=function(C$s,C$M){var C$T=new C$L;if(C$s>=this._failSize.width&&C$M>=this._failSize.height)return C$T;for(var C$X=-1,C$x=-1,C$c=this._width,C$l=this._height,C$u=this._cells,C$E=0;C$E<C$l;C$E++)if(!(this._rowInfo[C$E].spaceCount<C$s))for(var C$O=0;C$O<C$c;){var C$U=3*(C$E*C$c+C$O);if(0!=C$u[C$U]||C$u[1+C$U]<C$s||C$u[2+C$U]<C$M)C$O+=C$u[1+C$U];else{C$X=C$O,C$x=C$E;for(var C$p=0;C$p<C$s;C$p++)if(C$u[3*C$p+C$U+2]<C$M){C$X=-1;break}if(!(C$X<0))return C$T.ret=!0,C$T.x=C$X,C$T.y=C$x,C$T;C$O+=C$u[1+C$U]}}return C$T},C$M._fill=function(C$s,C$M,C$T,C$X,C$x){var C$c=this._width,C$l=this._height;this._check(C$s+C$T<=C$c&&C$M+C$X<=C$l);for(var C$u=C$M;C$u<C$X+C$M;++C$u){this._check(this._rowInfo[C$u].spaceCount>=C$T),this._rowInfo[C$u].spaceCount-=C$T;for(var C$E=0;C$E<C$T;C$E++){var C$O=3*(C$s+C$u*C$c+C$E);this._check(0==this._cells[C$O]),this._cells[C$O]=C$x,this._cells[1+C$O]=C$T,this._cells[2+C$O]=C$X}}if(0<C$s)for(C$u=0;C$u<C$X;++C$u){var C$U=0;for(C$E=C$s-1;0<=C$E&&0==this._cells[3*((C$M+C$u)*C$c+C$E)];--C$E,++C$U);for(C$E=C$U;0<C$E;--C$E)this._cells[3*((C$M+C$u)*C$c+C$s-C$E)+1]=C$E,this._check(0<C$E)}if(0<C$M)for(C$E=C$s;C$E<C$s+C$T;++C$E){for(C$U=0,C$u=C$M-1;0<=C$u&&0==this._cells[3*(C$E+C$u*C$c)];--C$u,C$U++);for(C$u=C$U;0<C$u;--C$u)this._cells[3*(C$E+(C$M-C$u)*C$c)+2]=C$u,this._check(0<C$u)}},C$M._check=function(C$s){0==C$s&&console.log("xtexMerger 错误啦")},C$M._clear=function(){for(var C$s=this._texCount=0;C$s<this._height;C$s++)this._rowInfo[C$s].spaceCount=this._width;for(var C$M=0;C$M<this._height;C$M++)for(var C$T=0;C$T<this._width;C$T++){var C$X=3*(C$M*this._width+C$T);this._cells[C$X]=0,this._cells[1+C$X]=this._width-C$T,this._cells[2+C$X]=this._width-C$M}this._failSize.width=this._width+1,this._failSize.height=this._height+1},C$s.__init$=function(){C$X=function(){function C$s(){this.spaceCount=0}return C$_(C$s,""),C$s}(),C$x=function(){function C$s(){this.width=0,this.height=0}return C$_(C$s,""),C$s}()},C$s}(),C$b=function(){function C$f(C$s,C$M,C$T,C$X){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=C$s,this._height=C$M,this._gridSize=C$T,this._maxAtlaserCount=C$X,this._gridNumX=C$s/C$T,this._gridNumY=C$M/C$T,this._curAtlasIndex=0,this._atlaserArray=[]}C$_(C$f,"laya.webgl.atlas.AtlasResourceManager");var C$s=C$f.prototype;return C$s.setAtlasParam=function(C$s,C$M,C$T,C$X){if(1==this._setAtlasParam)return C$f._sid_=0,this._width=C$s,this._height=C$M,this._gridSize=C$T,this._maxAtlaserCount=C$X,this._gridNumX=C$s/C$T,this._gridNumY=C$M/C$T,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},C$s.pushData=function(C$s){var C$M,C$T=C$s.bitmap,C$X=-1,C$x=null,C$c=0,C$l=0;for(C$c=0,C$M=this._atlaserArray.length;C$c<C$M&&(C$l=(this._curAtlasIndex+C$c)%C$M,-1==(C$X=(C$x=this._atlaserArray[C$l]).findBitmapIsExist(C$T)));C$c++);if(-1!=C$X){var C$u=C$x.InAtlasWebGLImagesOffsetValue[C$X];return C$q=C$u[0],C$G=C$u[1],C$x.addToAtlas(C$s,C$q,C$G),!0}this._setAtlasParam=!1;for(var C$E=Math.ceil((C$s.bitmap.width+2)/this._gridSize),C$O=Math.ceil((C$s.bitmap.height+2)/this._gridSize),C$U=!1,C$p=0;C$p<2;C$p++){var C$_=this._maxAtlaserCount;for(C$c=0;C$c<C$_;C$c++){C$l=(this._curAtlasIndex+C$c)%C$_,this._atlaserArray.length-1>=C$l||this._atlaserArray.push(new C$hs(this._gridNumX,this._gridNumY,this._width,this._height,C$f._sid_++));var C$R=this._atlaserArray[C$l],C$q=0,C$G=0,C$g=C$R.addTex(1,C$E,C$O);if(C$g.ret){C$q=C$g.x*this._gridSize+1,C$G=C$g.y*this._gridSize+1,C$T.lock=!0,C$R.addToAtlasTexture(C$T,C$q,C$G),C$R.addToAtlas(C$s,C$q,C$G),C$U=!0,this._curAtlasIndex=C$l;break}}if(C$U)break;this._atlaserArray.push(new C$hs(this._gridNumX,this._gridNumY,this._width,this._height,C$f._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return C$U||console.log(">>>AtlasManager pushData error"),C$U},C$s.addToAtlas=function(C$s){laya.webgl.atlas.AtlasResourceManager.instance.pushData(C$s)},C$s.garbageCollection=function(){if(!0===this._needGC){for(var C$s=this._atlaserArray.length-this._maxAtlaserCount,C$M=0;C$M<C$s;C$M++)this._atlaserArray[C$M].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+C$s),this._atlaserArray.splice(0,C$s),this._needGC=!1}return!0},C$s.freeAll=function(){for(var C$s=0,C$M=this._atlaserArray.length;C$s<C$M;C$s++)this._atlaserArray[C$s].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},C$s.getAtlaserCount=function(){return this._atlaserArray.length},C$s.getAtlaserByIndex=function(C$s){return this._atlaserArray[C$s]},C$X(1,C$f,"instance",function(){return C$f._Instance||(C$f._Instance=new C$f(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),C$f._Instance}),C$X(1,C$f,"enabled",function(){return C$w.atlasEnable}),C$X(1,C$f,"atlasLimitWidth",function(){return C$f._atlasLimitWidth},function(C$s){C$f._atlasLimitWidth=C$s}),C$X(1,C$f,"atlasLimitHeight",function(){return C$f._atlasLimitHeight},function(C$s){C$f._atlasLimitHeight=C$s}),C$f._enable=function(){C$w.atlasEnable=!0},C$f._disable=function(){C$w.atlasEnable=!1},C$f.__init__=function(){C$f.atlasTextureWidth=2048,C$f.atlasTextureHeight=2048,C$f.maxTextureCount=6,C$f.atlasLimitWidth=512,C$f.atlasLimitHeight=512},C$f._atlasLimitWidth=0,C$f._atlasLimitHeight=0,C$f.gridSize=16,C$f.atlasTextureWidth=0,C$f.atlasTextureHeight=0,C$f.maxTextureCount=0,C$f._atlasRestore=0,C$f.BOARDER_TYPE_NO=0,C$f.BOARDER_TYPE_RIGHT=1,C$f.BOARDER_TYPE_LEFT=2,C$f.BOARDER_TYPE_BOTTOM=4,C$f.BOARDER_TYPE_TOP=8,C$f.BOARDER_TYPE_ALL=15,C$f._sid_=0,C$f._Instance=null,C$f}(),C$L=function(){function C$s(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return C$_(C$s,"laya.webgl.atlas.MergeFillInfo"),C$s}(),C$S=function(){function C$M(){}return C$_(C$M,"laya.webgl.canvas.BlendMode"),C$M._init_=function(C$s){C$M.fns=[C$M.BlendNormal,C$M.BlendAdd,C$M.BlendMultiply,C$M.BlendScreen,C$M.BlendOverlay,C$M.BlendLight,C$M.BlendMask,C$M.BlendDestinationOut],C$M.targetFns=[C$M.BlendNormalTarget,C$M.BlendAddTarget,C$M.BlendMultiplyTarget,C$M.BlendScreenTarget,C$M.BlendOverlayTarget,C$M.BlendLightTarget,C$M.BlendMask,C$M.BlendDestinationOut]},C$M.BlendNormal=function(C$s){C$s.blendFunc(1,771)},C$M.BlendAdd=function(C$s){C$s.blendFunc(1,772)},C$M.BlendMultiply=function(C$s){C$s.blendFunc(774,771)},C$M.BlendScreen=function(C$s){C$s.blendFunc(1,1)},C$M.BlendOverlay=function(C$s){C$s.blendFunc(1,769)},C$M.BlendLight=function(C$s){C$s.blendFunc(1,1)},C$M.BlendNormalTarget=function(C$s){C$s.blendFunc(1,771)},C$M.BlendAddTarget=function(C$s){C$s.blendFunc(1,772)},C$M.BlendMultiplyTarget=function(C$s){C$s.blendFunc(774,771)},C$M.BlendScreenTarget=function(C$s){C$s.blendFunc(1,1)},C$M.BlendOverlayTarget=function(C$s){C$s.blendFunc(1,769)},C$M.BlendLightTarget=function(C$s){C$s.blendFunc(1,1)},C$M.BlendMask=function(C$s){C$s.blendFunc(0,770)},C$M.BlendDestinationOut=function(C$s){C$s.blendFunc(0,0)},C$M.activeBlendFunction=null,C$M.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],C$M.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},C$M.NORMAL="normal",C$M.ADD="add",C$M.MULTIPLY="multiply",C$M.SCREEN="screen",C$M.LIGHT="light",C$M.OVERLAY="overlay",C$M.DESTINATIONOUT="destination-out",C$M.fns=[],C$M.targetFns=[],C$M}(),C$K=function(){function C$T(C$s){this._color=C$q.create("black"),this.setValue(C$s)}C$_(C$T,"laya.webgl.canvas.DrawStyle");var C$s=C$T.prototype;return C$s.setValue=function(C$s){if(C$s){if("string"==typeof C$s)return void(this._color=C$q.create(C$s));if(C$s instanceof laya.utils.Color)return void(this._color=C$s)}},C$s.reset=function(){this._color=C$q.create("black")},C$s.equal=function(C$s){return"string"==typeof C$s?this._color.strColor===C$s:C$s instanceof laya.utils.Color&&this._color.numColor===C$s.numColor},C$s.toColorStr=function(){return this._color.strColor},C$T.create=function(C$s){var C$M;if(C$s&&("string"==typeof C$s?C$M=C$q.create(C$s):C$s instanceof laya.utils.Color&&(C$M=C$s),C$M))return C$M._drawStyle||(C$M._drawStyle=new C$T(C$s));return laya.webgl.canvas.DrawStyle.DEFAULT},C$l(C$T,["DEFAULT",function(){return this.DEFAULT=new C$T("#000000")}]),C$T}(),C$Z=function(){function C$s(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];C$ts.mainContext;this.ib=C$Hs.create(35048),this.vb=C$ds.create(5)}C$_(C$s,"laya.webgl.canvas.Path");var C$M=C$s.prototype;return C$M.addPoint=function(C$s,C$M){this.tempArray.push(C$s,C$M)},C$M.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},C$M.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},C$M.polygon=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l;return this.geomatrys.push(this._curGeomatry=C$l=new C$Bs(C$s,C$M,C$T,C$X,C$x,C$c)),C$X||(C$l.fill=!1),null==C$c&&(C$l.borderWidth=0),C$l},C$M.setGeomtry=function(C$s){this.geomatrys.push(this._curGeomatry=C$s)},C$M.drawLine=function(C$s,C$M,C$T,C$X,C$x){var C$c;return this.closePath?this.geomatrys.push(this._curGeomatry=C$c=new C$zs(C$s,C$M,C$T,C$X,C$x)):this.geomatrys.push(this._curGeomatry=C$c=new C$vs(C$s,C$M,C$T,C$X,C$x)),C$c.fill=!1,C$c},C$M.update=function(){var C$s=this.ib._byteLength,C$M=this.geomatrys.length;this.offset=C$s;for(var C$T=this.geoStart;C$T<C$M;C$T++)this.geomatrys[C$T].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=C$M,this.count=(this.ib._byteLength-C$s)/C$Gs.BYTES_PIDX},C$M.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},C$M.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},C$s}(),C$n=function(){function C$u(){}C$_(C$u,"laya.webgl.canvas.save.SaveBase");var C$s=C$u.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!1},C$s.restore=function(C$s){this._dataObj[this._valueName]=this._value,(C$u._cache[C$u._cache._length++]=this)._newSubmit&&(C$s._curSubmit=C$cs.RENDERBASE,C$s._renderKey=0)},C$u._createArray=function(){var C$s=[];return C$s._length=0,C$s},C$u._init=function(){var C$s=C$u._namemap={};return C$s[1]="ALPHA",C$s[2]="fillStyle",C$s[8]="font",C$s[256]="lineWidth",C$s[512]="strokeStyle",C$s[8192]="_mergeID",C$s[1024]=C$s[2048]=C$s[4096]=[],C$s[16384]="textBaseline",C$s[32768]="textAlign",C$s[65536]="_nBlendType",C$s[1048576]="shader",C$s[2097152]="filters",C$s},C$u.save=function(C$s,C$M,C$T,C$X){if((C$s._saveMark._saveuse&C$M)!==C$M){C$s._saveMark._saveuse|=C$M;var C$x=C$u._cache,C$c=0<C$x._length?C$x[--C$x._length]:new C$u;C$c._value=C$T[C$c._valueName=C$u._namemap[C$M]],C$c._dataObj=C$T,C$c._newSubmit=C$X;var C$l=C$s._save;C$l[C$l._length++]=C$c}},C$u._cache=laya.webgl.canvas.save.SaveBase._createArray(),C$u._namemap=C$u._init(),C$u}(),C$$=function(){function C$c(){this._clipRect=new C$h}C$_(C$c,"laya.webgl.canvas.save.SaveClipRect");var C$s=C$c.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!1},C$s.restore=function(C$s){C$s._clipRect=this._clipSaveRect,(C$c._cache[C$c._cache._length++]=this)._submitScissor.submitLength=C$s._submits._length-this._submitScissor.submitIndex,C$s._curSubmit=C$cs.RENDERBASE,C$s._renderKey=0},C$c.save=function(C$s,C$M){if(131072!=(131072&C$s._saveMark._saveuse)){C$s._saveMark._saveuse|=131072;var C$T=C$c._cache,C$X=0<C$T._length?C$T[--C$T._length]:new C$c;C$X._clipSaveRect=C$s._clipRect,C$s._clipRect=C$X._clipRect.copyFrom(C$s._clipRect),C$X._submitScissor=C$M;var C$x=C$s._save;C$x[C$x._length++]=C$X}},C$l(C$c,["_cache",function(){return this._cache=C$n._createArray()}]),C$c}(),C$F=function(){function C$R(){this._contextX=0,this._contextY=0,this._clipRect=new C$h,this._rect=new C$h,this._matrix=new C$A}C$_(C$R,"laya.webgl.canvas.save.SaveClipRectStencil");var C$s=C$R.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!1},C$s.restore=function(C$s){C$Us.restore(C$s,this._rect,this._saveMatrix,this._contextX,this._contextY),C$s._clipRect=this._clipSaveRect,C$s._curMat=this._saveMatrix,C$s._x=this._contextX,C$s._y=this._contextY,C$R._cache[C$R._cache._length++]=this,C$s._curSubmit=C$cs.RENDERBASE},C$R.save=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){if(262144!=(262144&C$s._saveMark._saveuse)){C$s._saveMark._saveuse|=262144;var C$U=C$R._cache,C$p=0<C$U._length?C$U[--C$U._length]:new C$R;C$p._clipSaveRect=C$s._clipRect,C$p._clipRect.setTo(C$l,C$u,C$E,C$O),C$s._clipRect=C$p._clipRect,C$p._rect.x=C$T,C$p._rect.y=C$X,C$p._rect.width=C$x,C$p._rect.height=C$c,C$p._contextX=C$s._x,C$p._contextY=C$s._y,C$p._saveMatrix=C$s._curMat,C$s._curMat.copyTo(C$p._matrix),C$s._curMat=C$p._matrix,C$p._submitStencil=C$M;var C$_=C$s._save;C$_[C$_._length++]=C$p}},C$l(C$R,["_cache",function(){return this._cache=C$n._createArray()}]),C$R}(),C$W=function(){function C$X(){this._saveuse=0}C$_(C$X,"laya.webgl.canvas.save.SaveMark");var C$s=C$X.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!0},C$s.restore=function(C$s){C$s._saveMark=this._preSaveMark,C$X._no[C$X._no._length++]=this},C$X.Create=function(C$s){var C$M=C$X._no,C$T=0<C$M._length?C$M[--C$M._length]:new C$X;return C$T._saveuse=0,C$T._preSaveMark=C$s._saveMark,C$s._saveMark=C$T},C$l(C$X,["_no",function(){return this._no=C$n._createArray()}]),C$X}(),C$a=function(){function C$c(){this._matrix=new C$A}C$_(C$c,"laya.webgl.canvas.save.SaveTransform");var C$s=C$c.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!1},C$s.restore=function(C$s){C$s._curMat=this._savematrix,C$c._no[C$c._no._length++]=this},C$c.save=function(C$s){var C$M=C$s._saveMark;if(2048!=(2048&C$M._saveuse)){C$M._saveuse|=2048;var C$T=C$c._no,C$X=0<C$T._length?C$T[--C$T._length]:new C$c;C$X._savematrix=C$s._curMat,C$s._curMat=C$s._curMat.copyTo(C$X._matrix);var C$x=C$s._save;C$x[C$x._length++]=C$X}},C$l(C$c,["_no",function(){return this._no=C$n._createArray()}]),C$c}(),C$j=function(){function C$x(){}C$_(C$x,"laya.webgl.canvas.save.SaveTranslate");var C$s=C$x.prototype;return C$N.imps(C$s,{"laya.webgl.canvas.save.ISaveData":!0}),C$s.isSaveMark=function(){return!1},C$s.restore=function(C$s){C$s._curMat;C$s._x=this._x,C$s._y=this._y,C$x._no[C$x._no._length++]=this},C$x.save=function(C$s){var C$M=C$x._no,C$T=0<C$M._length?C$M[--C$M._length]:new C$x;C$T._x=C$s._x,C$T._y=C$s._y;var C$X=C$s._save;C$X[C$X._length++]=C$T},C$l(C$x,["_no",function(){return this._no=C$n._createArray()}]),C$x}(),C$i=function(){function C$s(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new C$h}C$_(C$s,"laya.webgl.resource.RenderTargetMAX");var C$M=C$s.prototype;return C$M.setSP=function(C$s){this._sp=C$s},C$M.size=function(C$s,C$M){var C$T=this;this._width!==C$s||this._height!==C$M?(this.repaint=!0,this._width=C$s,this._height=C$M,this.target?this.target.size(C$s,C$M):this.target=C$Is.create(C$s,C$M),this.target.hasListener("recovered")||this.target.on("recovered",this,function(C$s){C$N.timer.callLater(C$T._sp,C$T._sp.repaint)})):this.target.size(C$s,C$M)},C$M._flushToTarget=function(C$s,C$M){if(!C$M._destroy){var C$T=C$Js.worldScissorTest,C$X=C$Js.worldClipRect;C$Js.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,C$Js.worldScissorTest=!1,C$ts.mainContext.disable(3089);var C$x=C$Js.worldAlpha,C$c=C$Js.worldMatrix4,C$l=C$Js.worldMatrix,C$u=C$Js.worldFilters,C$E=C$Js.worldShaderDefines;if(C$Js.worldMatrix=C$A.EMPTY,C$Js.restoreTempArray(),C$Js.worldMatrix4=C$Js.TEMPMAT4_ARRAY,C$Js.worldAlpha=1,C$Js.worldFilters=null,C$Js.worldShaderDefines=null,C$Ys.activeShader=null,C$M.start(),C$w.showCanvasMark?C$M.clear(0,1,0,.3):C$M.clear(0,0,0,0),C$s.flush(),C$M.end(),C$Ys.activeShader=null,C$Js.worldAlpha=C$x,C$Js.worldMatrix4=C$c,C$Js.worldMatrix=C$l,C$Js.worldFilters=C$u,C$Js.worldShaderDefines=C$E,C$Js.worldScissorTest=C$T){var C$O=C$Js.height-C$X.y-C$X.height;C$ts.mainContext.scissor(C$X.x,C$O,C$X.width,C$X.height),C$ts.mainContext.enable(3089)}C$Js.worldClipRect=C$X}},C$M.flush=function(C$s){this.repaint&&(this._flushToTarget(C$s,this.target),this.repaint=!1)},C$M.drawTo=function(C$s,C$M,C$T,C$X,C$x){C$s.drawTexture(this.target.getTexture(),C$M,C$T,C$X,C$x,0,0)},C$M.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},C$s}(),C$H=function(){function C$s(){this.ALPHA=1,this.shaderType=0,this.defines=new C$Qs}return C$_(C$s,"laya.webgl.shader.d2.Shader2D"),C$s.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},C$s.__init__=function(){var C$s,C$M;C$Ws.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),C$Ws.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),C$Ws.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),C$Ws.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),C$Ws.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),C$Ws.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),C$Ws.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),C$Ws.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),C$s="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",C$M='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',C$Ws.preCompile2D(0,1,C$s,C$M,null),C$s="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",C$M='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',C$Ws.preCompile2D(0,2,C$s,C$M,null),C$s="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",C$M="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",C$Ws.preCompile2D(0,4,C$s,C$M,null),C$s="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",C$M='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',C$Ws.preCompile2D(0,256,C$s,C$M,null),C$s="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",C$M="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",C$Ws.preCompile2D(0,512,C$s,C$M,null)},C$s}(),C$d=function(){function C$M(C$s,C$M,C$T){this._value=0,this._name2int=C$s,this._int2name=C$M,this._int2nameMap=C$T}C$_(C$M,"laya.webgl.shader.ShaderDefines");var C$s=C$M.prototype;return C$s.add=function(C$s){return"string"==typeof C$s&&(C$s=this._name2int[C$s]),this._value|=C$s,this._value},C$s.addInt=function(C$s){return this._value|=C$s,this._value},C$s.remove=function(C$s){return"string"==typeof C$s&&(C$s=this._name2int[C$s]),this._value&=~C$s,this._value},C$s.isDefine=function(C$s){return(this._value&C$s)===C$s},C$s.getValue=function(){return this._value},C$s.setValue=function(C$s){this._value=C$s},C$s.toNameDic=function(){var C$s=this._int2nameMap[this._value];return C$s||C$M._toText(this._value,this._int2name,this._int2nameMap)},C$M._reg=function(C$s,C$M,C$T,C$X){C$X[C$T[C$s]=C$M]=C$s},C$M._toText=function(C$s,C$M,C$T){var C$X=C$T[C$s];if(C$X)return C$X;for(var C$x={},C$c=1,C$l=0;C$l<32&&!(C$s<(C$c=1<<C$l));C$l++)if(C$s&C$c){var C$u=C$M[C$c];C$u&&(C$x[C$u]="")}return C$T[C$s]=C$x},C$M._toInt=function(C$s,C$M){for(var C$T=C$s.split("."),C$X=0,C$x=0,C$c=C$T.length;C$x<C$c;C$x++){var C$l=C$M[C$T[C$x]];if(!C$l)throw new Error("Defines to int err:"+C$s+"/"+C$T[C$x]);C$X|=C$l}return C$X},C$M}(),C$ss=function(){function C$l(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new C$A}C$_(C$l,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var C$s=C$l.prototype;return C$s.init=function(C$s,C$M,C$T){if(C$M)this._vs=C$M;else{this._vs=[];var C$X=C$s.width,C$x=C$s.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(C$X,0,1,0,1,1,1,1),this._vs.push(C$X,C$x,1,1,1,1,1,1),this._vs.push(0,C$x,0,1,1,1,1,1)}C$T?this._ps=C$T:(C$l._defaultPS||(C$l._defaultPS=[]).push(0,1,3,3,1,2),this._ps=C$l._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=C$s},C$s.init2=function(C$s,C$M,C$T,C$X,C$x){this.transform&&(this.transform=null),C$T?this._ps=C$T:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=C$X,this._uvs=C$x,this.mEleNum=this._ps.length,this.mTexture=C$s,(C$f.isConchNode||C$f.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},C$s._initMyData=function(){var C$s=0,C$M=0,C$T=4*this._verticles.length;this._vs=C$l._tempVS;var C$X=!1;if(C$f.isConchNode||C$f.isConchApp?(this._vs.length=C$T,C$X=!0):this._vs.length<C$T&&(this._vs.length=C$T,C$X=!0),C$l._tVSLen=C$T,C$X)for(;C$s<C$T;)this._vs[C$s]=this._verticles[C$M],this._vs[C$s+1]=this._verticles[C$M+1],this._vs[C$s+2]=this._uvs[C$M],this._vs[C$s+3]=this._uvs[C$M+1],this._vs[C$s+4]=1,this._vs[C$s+5]=1,this._vs[C$s+6]=1,this._vs[C$s+7]=1,C$s+=8,C$M+=2;else for(;C$s<C$T;)this._vs[C$s]=this._verticles[C$M],this._vs[C$s+1]=this._verticles[C$M+1],this._vs[C$s+2]=this._uvs[C$M],this._vs[C$s+3]=this._uvs[C$M+1],C$s+=8,C$M+=2},C$s.getData2=function(C$s,C$M,C$T){var C$X;this.mVBBuffer=C$s,this.mIBBuffer=C$M,this._initMyData(),C$s.appendEx2(this._vs,Float32Array,C$l._tVSLen,4),this._indexStart=C$M._byteLength,(C$X=C$l._tempIB).length<this._ps.length&&(C$X.length=this._ps.length);for(var C$x=0,C$c=this._ps.length;C$x<C$c;C$x++)C$X[C$x]=this._ps[C$x]+C$T;C$M.appendEx2(C$X,Uint16Array,this._ps.length,2)},C$s.getData=function(C$s,C$M,C$T){if(this.mVBBuffer=C$s,this.mIBBuffer=C$M,C$s.append(this.mVBData),this._indexStart=C$M._byteLength,this.mIBData.start!=C$T){for(var C$X=0,C$x=this._ps.length;C$X<C$x;C$X++)this.mIBData[C$X]=this._ps[C$X]+C$T;this.mIBData.start=C$T}C$M.append(this.mIBData)},C$s.render=function(C$s,C$M,C$T){if(C$f.isWebGL&&this.mTexture){C$s._renderKey=0,C$s._shader2D.glTexture=null,C$Ms.getInstance().addSkinMesh(this);var C$X=C$cs.createShape(C$s,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,C$ks.create(512,0));this.transform||(this.transform=C$A.EMPTY),this.transform.translate(C$M,C$T),C$A.mul(this.transform,C$s._curMat,this._tempMatrix),this.transform.translate(-C$M,-C$T);var C$x=C$X.shaderValue,C$c=C$x.u_mmat2||C$Js.getMatrArray();C$Js.mat2MatArray(this._tempMatrix,C$c),C$x.textureHost=this.mTexture,C$x.offsetX=0,C$x.offsetY=0,C$x.u_mmat2=C$c,C$x.ALPHA=C$s._shader2D.ALPHA,C$s._submits[C$s._submits._length++]=C$X}else C$f.isConchApp&&this.mTexture&&(this.transform||(this.transform=C$A.EMPTY),C$s.setSkinMesh&&C$s.setSkinMesh(C$M,C$T,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},C$l._tempVS=[],C$l._tempIB=[],C$l._defaultPS=null,C$l._tVSLen=0,C$l}(),C$Ms=function(){function C$s(){this.ib=null,this.vb=null;C$ts.mainContext;this.ib=C$Hs.create(35048),this.vb=C$ds.create(8)}C$_(C$s,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var C$M=C$s.prototype;return C$M.addSkinMesh=function(C$s){C$s.getData2(this.vb,this.ib,this.vb._byteLength/32)},C$M.reset=function(){this.vb.clear(),this.ib.clear()},C$s.getInstance=function(){return C$s.instance=C$s.instance||new C$s},C$s.instance=null,C$s}(),C$Ts=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===C$E&&(C$E=0),this.x=C$s,this.y=C$M,this.width=C$T,this.height=C$X,this.edges=C$x,this.color=C$c,this.borderWidth=C$l,this.borderColor=C$u}C$_(C$s,"laya.webgl.shapes.BasePoly");var C$M=C$s.prototype;return C$N.imps(C$M,{"laya.webgl.shapes.IShape":!0}),C$M.getData=function(C$s,C$M,C$T){},C$M.rebuild=function(C$s){},C$M.setMatrix=function(C$s){},C$M.needUpdate=function(C$s){return!0},C$M.sector=function(C$s,C$M,C$T){var C$X=this.x,C$x=this.y,C$c=this.edges,C$l=(this.r1-this.r0)/C$c,C$u=this.width,C$E=this.height,C$O=this.color,C$U=(C$O>>16&255)/255,C$p=(C$O>>8&255)/255,C$_=(255&C$O)/255;C$s.push(C$X,C$x,C$U,C$p,C$_);for(var C$R=0;C$R<C$c+1;C$R++)C$s.push(C$X+Math.sin(C$l*C$R+this.r0)*C$u,C$x+Math.cos(C$l*C$R+this.r0)*C$E),C$s.push(C$U,C$p,C$_);for(C$R=0;C$R<C$c;C$R++)C$M.push(C$T,C$T+C$R+1,C$T+C$R+2)},C$M.createLine2=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u,C$E,C$O,C$U,C$p,C$_,C$R,C$q,C$G,C$g,C$f,C$J,C$P,C$t,C$r,C$N,C$w,C$k,C$A,C$D=C$s.concat(),C$h=C$x,C$Q=this.borderColor,C$v=(C$Q>>16&255)/255,C$z=(C$Q>>8&255)/255,C$B=(255&C$Q)/255,C$o=C$D.length/2,C$C=C$X,C$m=C$T/2;C$E=C$D[0],C$O=C$D[1],C$G=C$E-(C$U=C$D[2]),C$q=(C$q=-(C$O-(C$p=C$D[3])))/(C$A=Math.sqrt(C$q*C$q+C$G*C$G))*C$m,C$G=C$G/C$A*C$m,C$h.push(C$E-C$q+this.x,C$O-C$G+this.y,C$v,C$z,C$B,C$E+C$q+this.x,C$O+C$G+this.y,C$v,C$z,C$B);for(var C$Y=1;C$Y<C$o-1;C$Y++)C$E=C$D[2*(C$Y-1)],C$O=C$D[2*(C$Y-1)+1],C$U=C$D[2*C$Y],C$p=C$D[2*C$Y+1],C$_=C$D[2*(C$Y+1)],C$R=C$D[2*(C$Y+1)+1],C$G=C$E-C$U,C$f=C$U-C$_,C$t=(-(C$q=(C$q=-(C$O-C$p))/(C$A=Math.sqrt(C$q*C$q+C$G*C$G))*C$m)+C$E)*(-(C$G=C$G/C$A*C$m)+C$p)-(-C$q+C$U)*(-C$G+C$O),C$w=(-(C$g=(C$g=-(C$p-C$R))/(C$A=Math.sqrt(C$g*C$g+C$f*C$f))*C$m)+C$_)*(-(C$f=C$f/C$A*C$m)+C$p)-(-C$g+C$U)*(-C$f+C$R),C$k=(C$J=-C$G+C$O-(-C$G+C$p))*(C$N=-C$g+C$U-(-C$g+C$_))-(C$r=-C$f+C$R-(-C$f+C$p))*(C$P=-C$q+C$U-(-C$q+C$E)),Math.abs(C$k)<.1?(C$k+=10.1,C$h.push(C$U-C$q+this.x,C$p-C$G+this.y,C$v,C$z,C$B,C$U+C$q+this.x,C$p+C$G+this.y,C$v,C$z,C$B)):(((C$l=(C$P*C$w-C$N*C$t)/C$k)-C$U)*(C$l-C$U)+((C$u=(C$r*C$t-C$J*C$w)/C$k)-C$p)+(C$u-C$p),C$h.push(C$l+this.x,C$u+this.y,C$v,C$z,C$B,C$U-(C$l-C$U)+this.x,C$p-(C$u-C$p)+this.y,C$v,C$z,C$B));C$E=C$D[C$D.length-4],C$O=C$D[C$D.length-3],C$G=C$E-(C$U=C$D[C$D.length-2]),C$q=(C$q=-(C$O-(C$p=C$D[C$D.length-1])))/(C$A=Math.sqrt(C$q*C$q+C$G*C$G))*C$m,C$G=C$G/C$A*C$m,C$h.push(C$U-C$q+this.x,C$p-C$G+this.y,C$v,C$z,C$B,C$U+C$q+this.x,C$p+C$G+this.y,C$v,C$z,C$B);var C$I=C$c;for(C$Y=1;C$Y<C$I;C$Y++)C$M.push(C$C+2*(C$Y-1),C$C+2*(C$Y-1)+1,C$C+2*C$Y+1,C$C+2*C$Y+1,C$C+2*C$Y,C$C+2*(C$Y-1));return C$h},C$M.createLine=function(C$s,C$M,C$T,C$X){var C$x=C$s.concat(),C$c=C$s,C$l=this.borderColor,C$u=(C$l>>16&255)/255,C$E=(C$l>>8&255)/255,C$O=(255&C$l)/255;C$x.splice(0,5);var C$U,C$p,C$_,C$R,C$q,C$G,C$g,C$f,C$J,C$P,C$t,C$r,C$N,C$w,C$k,C$A,C$D,C$h,C$Q,C$v,C$z=C$x.length/5,C$B=C$X,C$o=C$T/2;C$_=C$x[0],C$R=C$x[1],C$P=C$_-(C$q=C$x[5]),C$J=(C$J=-(C$R-(C$G=C$x[6])))/(C$v=Math.sqrt(C$J*C$J+C$P*C$P))*C$o,C$P=C$P/C$v*C$o,C$c.push(C$_-C$J,C$R-C$P,C$u,C$E,C$O,C$_+C$J,C$R+C$P,C$u,C$E,C$O);for(var C$C=1;C$C<C$z-1;C$C++)C$_=C$x[5*(C$C-1)],C$R=C$x[5*(C$C-1)+1],C$q=C$x[5*C$C],C$G=C$x[5*C$C+1],C$g=C$x[5*(C$C+1)],C$f=C$x[5*(C$C+1)+1],C$P=C$_-C$q,C$r=C$q-C$g,C$k=(-(C$J=(C$J=-(C$R-C$G))/(C$v=Math.sqrt(C$J*C$J+C$P*C$P))*C$o)+C$_)*(-(C$P=C$P/C$v*C$o)+C$G)-(-C$J+C$q)*(-C$P+C$R),C$h=(-(C$t=(C$t=-(C$G-C$f))/(C$v=Math.sqrt(C$t*C$t+C$r*C$r))*C$o)+C$g)*(-(C$r=C$r/C$v*C$o)+C$G)-(-C$t+C$q)*(-C$r+C$f),C$Q=(C$N=-C$P+C$R-(-C$P+C$G))*(C$D=-C$t+C$q-(-C$t+C$g))-(C$A=-C$r+C$f-(-C$r+C$G))*(C$w=-C$J+C$q-(-C$J+C$_)),Math.abs(C$Q)<.1?(C$Q+=10.1,C$c.push(C$q-C$J,C$G-C$P,C$u,C$E,C$O,C$q+C$J,C$G+C$P,C$u,C$E,C$O)):(((C$U=(C$w*C$h-C$D*C$k)/C$Q)-C$q)*(C$U-C$q)+((C$p=(C$A*C$k-C$N*C$h)/C$Q)-C$G)+(C$p-C$G),C$c.push(C$U,C$p,C$u,C$E,C$O,C$q-(C$U-C$q),C$G-(C$p-C$G),C$u,C$E,C$O));C$_=C$x[C$x.length-10],C$R=C$x[C$x.length-9],C$P=C$_-(C$q=C$x[C$x.length-5]),C$J=(C$J=-(C$R-(C$G=C$x[C$x.length-4])))/(C$v=Math.sqrt(C$J*C$J+C$P*C$P))*C$o,C$P=C$P/C$v*C$o,C$c.push(C$q-C$J,C$G-C$P,C$u,C$E,C$O,C$q+C$J,C$G+C$P,C$u,C$E,C$O);var C$m=this.edges+1;for(C$C=1;C$C<C$m;C$C++)C$M.push(C$B+2*(C$C-1),C$B+2*(C$C-1)+1,C$B+2*C$C+1,C$B+2*C$C+1,C$B+2*C$C,C$B+2*(C$C-1));return C$c},C$M.createLoopLine=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$s.concat(),C$u=C$x||C$s,C$E=this.borderColor,C$O=(C$E>>16&255)/255,C$U=(C$E>>8&255)/255,C$p=(255&C$E)/255;C$l.splice(0,5);var C$_=[C$l[0],C$l[1]],C$R=[C$l[C$l.length-5],C$l[C$l.length-4]],C$q=C$R[0]+.5*(C$_[0]-C$R[0]),C$G=C$R[1]+.5*(C$_[1]-C$R[1]);C$l.unshift(C$q,C$G,0,0,0),C$l.push(C$q,C$G,0,0,0);var C$g,C$f,C$J,C$P,C$t,C$r,C$N,C$w,C$k,C$A,C$D,C$h,C$Q,C$v,C$z,C$B,C$o,C$C,C$m,C$Y,C$I=C$l.length/5,C$y=C$X,C$e=C$T/2;C$J=C$l[0],C$P=C$l[1],C$A=C$J-(C$t=C$l[5]),C$k=(C$k=-(C$P-(C$r=C$l[6])))/(C$Y=Math.sqrt(C$k*C$k+C$A*C$A))*C$e,C$A=C$A/C$Y*C$e,C$u.push(C$J-C$k,C$P-C$A,C$O,C$U,C$p,C$J+C$k,C$P+C$A,C$O,C$U,C$p);for(var C$V=1;C$V<C$I-1;C$V++)C$J=C$l[5*(C$V-1)],C$P=C$l[5*(C$V-1)+1],C$t=C$l[5*C$V],C$r=C$l[5*C$V+1],C$N=C$l[5*(C$V+1)],C$w=C$l[5*(C$V+1)+1],C$A=C$J-C$t,C$h=C$t-C$N,C$z=(-(C$k=(C$k=-(C$P-C$r))/(C$Y=Math.sqrt(C$k*C$k+C$A*C$A))*C$e)+C$J)*(-(C$A=C$A/C$Y*C$e)+C$r)-(-C$k+C$t)*(-C$A+C$P),C$C=(-(C$D=(C$D=-(C$r-C$w))/(C$Y=Math.sqrt(C$D*C$D+C$h*C$h))*C$e)+C$N)*(-(C$h=C$h/C$Y*C$e)+C$r)-(-C$D+C$t)*(-C$h+C$w),C$m=(C$Q=-C$A+C$P-(-C$A+C$r))*(C$o=-C$D+C$t-(-C$D+C$N))-(C$B=-C$h+C$w-(-C$h+C$r))*(C$v=-C$k+C$t-(-C$k+C$J)),Math.abs(C$m)<.1?(C$m+=10.1,C$u.push(C$t-C$k,C$r-C$A,C$O,C$U,C$p,C$t+C$k,C$r+C$A,C$O,C$U,C$p)):(((C$g=(C$v*C$C-C$o*C$z)/C$m)-C$t)*(C$g-C$t)+((C$f=(C$B*C$z-C$Q*C$C)/C$m)-C$r)+(C$f-C$r),C$u.push(C$g,C$f,C$O,C$U,C$p,C$t-(C$g-C$t),C$r-(C$f-C$r),C$O,C$U,C$p));C$c&&(C$M=C$c);var C$b=this.edges+1;for(C$V=1;C$V<C$b;C$V++)C$M.push(C$y+2*(C$V-1),C$y+2*(C$V-1)+1,C$y+2*C$V+1,C$y+2*C$V+1,C$y+2*C$V,C$y+2*(C$V-1));return C$M.push(C$y+2*(C$V-1),C$y+2*(C$V-1)+1,C$y+1,C$y+1,C$y,C$y+2*(C$V-1)),C$u},C$s}(),C$Xs=function(){function C$G(){}return C$_(C$G,"laya.webgl.shapes.Earcut"),C$G.earcut=function(C$s,C$M,C$T){C$T=C$T||2;var C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U=C$M&&C$M.length,C$p=C$U?C$M[0]*C$T:C$s.length,C$_=C$G.linkedList(C$s,0,C$p,C$T,!0),C$R=[];if(!C$_)return C$R;if(C$U&&(C$_=C$G.eliminateHoles(C$s,C$M,C$_,C$T)),C$s.length>80*C$T){C$X=C$c=C$s[0],C$x=C$l=C$s[1];for(var C$q=C$T;C$q<C$p;C$q+=C$T)(C$u=C$s[C$q])<C$X&&(C$X=C$u),(C$E=C$s[C$q+1])<C$x&&(C$x=C$E),C$c<C$u&&(C$c=C$u),C$l<C$E&&(C$l=C$E);C$O=0!==(C$O=Math.max(C$c-C$X,C$l-C$x))?1/C$O:0}return C$G.earcutLinked(C$_,C$R,C$T,C$X,C$x,C$O),C$R},C$G.linkedList=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l;if(C$x===0<C$G.signedArea(C$s,C$M,C$T,C$X))for(C$c=C$M;C$c<C$T;C$c+=C$X)C$l=C$G.insertNode(C$c,C$s[C$c],C$s[C$c+1],C$l);else for(C$c=C$T-C$X;C$M<=C$c;C$c-=C$X)C$l=C$G.insertNode(C$c,C$s[C$c],C$s[C$c+1],C$l);return C$l&&C$G.equals(C$l,C$l.next)&&(C$G.removeNode(C$l),C$l=C$l.next),C$l},C$G.filterPoints=function(C$s,C$M){if(!C$s)return C$s;C$M||(C$M=C$s);var C$T,C$X=C$s;do{if(C$T=!1,C$X.steiner||!C$G.equals(C$X,C$X.next)&&0!==C$G.area(C$X.prev,C$X,C$X.next))C$X=C$X.next;else{if(C$G.removeNode(C$X),(C$X=C$M=C$X.prev)===C$X.next)break;C$T=!0}}while(C$T||C$X!==C$M);return C$M},C$G.earcutLinked=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(C$s){!C$l&&C$c&&C$G.indexCurve(C$s,C$X,C$x,C$c);for(var C$u,C$E,C$O=C$s;C$s.prev!==C$s.next;)if(C$u=C$s.prev,C$E=C$s.next,C$c?C$G.isEarHashed(C$s,C$X,C$x,C$c):C$G.isEar(C$s))C$M.push(C$u.i/C$T),C$M.push(C$s.i/C$T),C$M.push(C$E.i/C$T),C$G.removeNode(C$s),C$s=C$E.next,C$O=C$E.next;else if((C$s=C$E)===C$O){C$l?1===C$l?(C$s=C$G.cureLocalIntersections(C$s,C$M,C$T),C$G.earcutLinked(C$s,C$M,C$T,C$X,C$x,C$c,2)):2===C$l&&C$G.splitEarcut(C$s,C$M,C$T,C$X,C$x,C$c):C$G.earcutLinked(C$G.filterPoints(C$s,null),C$M,C$T,C$X,C$x,C$c,1);break}}},C$G.isEar=function(C$s){var C$M=C$s.prev,C$T=C$s,C$X=C$s.next;if(0<=C$G.area(C$M,C$T,C$X))return!1;for(var C$x=C$s.next.next;C$x!==C$s.prev;){if(C$G.pointInTriangle(C$M.x,C$M.y,C$T.x,C$T.y,C$X.x,C$X.y,C$x.x,C$x.y)&&0<=C$G.area(C$x.prev,C$x,C$x.next))return!1;C$x=C$x.next}return!0},C$G.isEarHashed=function(C$s,C$M,C$T,C$X){var C$x=C$s.prev,C$c=C$s,C$l=C$s.next;if(0<=C$G.area(C$x,C$c,C$l))return!1;for(var C$u=C$x.x<C$c.x?C$x.x<C$l.x?C$x.x:C$l.x:C$c.x<C$l.x?C$c.x:C$l.x,C$E=C$x.y<C$c.y?C$x.y<C$l.y?C$x.y:C$l.y:C$c.y<C$l.y?C$c.y:C$l.y,C$O=C$x.x>C$c.x?C$x.x>C$l.x?C$x.x:C$l.x:C$c.x>C$l.x?C$c.x:C$l.x,C$U=C$x.y>C$c.y?C$x.y>C$l.y?C$x.y:C$l.y:C$c.y>C$l.y?C$c.y:C$l.y,C$p=C$G.zOrder(C$u,C$E,C$M,C$T,C$X),C$_=C$G.zOrder(C$O,C$U,C$M,C$T,C$X),C$R=C$s.nextZ;C$R&&C$R.z<=C$_;){if(C$R!==C$s.prev&&C$R!==C$s.next&&C$G.pointInTriangle(C$x.x,C$x.y,C$c.x,C$c.y,C$l.x,C$l.y,C$R.x,C$R.y)&&0<=C$G.area(C$R.prev,C$R,C$R.next))return!1;C$R=C$R.nextZ}for(C$R=C$s.prevZ;C$R&&C$R.z>=C$p;){if(C$R!==C$s.prev&&C$R!==C$s.next&&C$G.pointInTriangle(C$x.x,C$x.y,C$c.x,C$c.y,C$l.x,C$l.y,C$R.x,C$R.y)&&0<=C$G.area(C$R.prev,C$R,C$R.next))return!1;C$R=C$R.prevZ}return!0},C$G.cureLocalIntersections=function(C$s,C$M,C$T){var C$X=C$s;do{var C$x=C$X.prev,C$c=C$X.next.next;!C$G.equals(C$x,C$c)&&C$G.intersects(C$x,C$X,C$X.next,C$c)&&C$G.locallyInside(C$x,C$c)&&C$G.locallyInside(C$c,C$x)&&(C$M.push(C$x.i/C$T),C$M.push(C$X.i/C$T),C$M.push(C$c.i/C$T),C$G.removeNode(C$X),C$G.removeNode(C$X.next),C$X=C$s=C$c),C$X=C$X.next}while(C$X!==C$s);return C$X},C$G.splitEarcut=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$s;do{for(var C$u=C$l.next.next;C$u!==C$l.prev;){if(C$l.i!==C$u.i&&C$G.isValidDiagonal(C$l,C$u)){var C$E=C$G.splitPolygon(C$l,C$u);return C$l=C$G.filterPoints(C$l,C$l.next),C$E=C$G.filterPoints(C$E,C$E.next),C$G.earcutLinked(C$l,C$M,C$T,C$X,C$x,C$c),void C$G.earcutLinked(C$E,C$M,C$T,C$X,C$x,C$c)}C$u=C$u.next}C$l=C$l.next}while(C$l!==C$s)},C$G.eliminateHoles=function(C$s,C$M,C$T,C$X){var C$x,C$c,C$l,C$u,C$E,C$O=[];for(C$x=0,C$c=C$M.length;C$x<C$c;C$x++)C$l=C$M[C$x]*C$X,C$u=C$x<C$c-1?C$M[C$x+1]*C$X:C$s.length,(C$E=C$G.linkedList(C$s,C$l,C$u,C$X,!1))===C$E.next&&(C$E.steiner=!0),C$O.push(C$G.getLeftmost(C$E));for(C$O.sort(C$G.compareX),C$x=0;C$x<C$O.length;C$x++)C$G.eliminateHole(C$O[C$x],C$T),C$T=C$G.filterPoints(C$T,C$T.next);return C$T},C$G.compareX=function(C$s,C$M){return C$s.x-C$M.x},C$G.eliminateHole=function(C$s,C$M){if(C$M=C$G.findHoleBridge(C$s,C$M)){var C$T=C$G.splitPolygon(C$M,C$s);C$G.filterPoints(C$T,C$T.next)}},C$G.findHoleBridge=function(C$s,C$M){var C$T,C$X=C$M,C$x=C$s.x,C$c=C$s.y,C$l=-1/0;do{if(C$c<=C$X.y&&C$c>=C$X.next.y&&C$X.next.y!==C$X.y){var C$u=C$X.x+(C$c-C$X.y)*(C$X.next.x-C$X.x)/(C$X.next.y-C$X.y);if(C$u<=C$x&&C$l<C$u){if((C$l=C$u)===C$x){if(C$c===C$X.y)return C$X;if(C$c===C$X.next.y)return C$X.next}C$T=C$X.x<C$X.next.x?C$X:C$X.next}}C$X=C$X.next}while(C$X!==C$M);if(!C$T)return null;if(C$x===C$l)return C$T.prev;var C$E,C$O=C$T,C$U=C$T.x,C$p=C$T.y,C$_=1/0;for(C$X=C$T.next;C$X!==C$O;)C$x>=C$X.x&&C$X.x>=C$U&&C$x!==C$X.x&&C$G.pointInTriangle(C$c<C$p?C$x:C$l,C$c,C$U,C$p,C$c<C$p?C$l:C$x,C$c,C$X.x,C$X.y)&&((C$E=Math.abs(C$c-C$X.y)/(C$x-C$X.x))<C$_||C$E===C$_&&C$X.x>C$T.x)&&C$G.locallyInside(C$X,C$s)&&(C$T=C$X,C$_=C$E),C$X=C$X.next;return C$T},C$G.indexCurve=function(C$s,C$M,C$T,C$X){for(var C$x=C$s;null===C$x.z&&(C$x.z=C$G.zOrder(C$x.x,C$x.y,C$M,C$T,C$X)),C$x.prevZ=C$x.prev,C$x.nextZ=C$x.next,(C$x=C$x.next)!==C$s;);C$x.prevZ.nextZ=null,C$x.prevZ=null,C$G.sortLinked(C$x)},C$G.sortLinked=function(C$s){var C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O=1;do{for(C$T=C$s,C$c=C$s=null,C$l=0;C$T;){for(C$l++,C$X=C$T,C$M=C$u=0;C$M<C$O&&(C$u++,C$X=C$X.nextZ);C$M++);for(C$E=C$O;0<C$u||0<C$E&&C$X;)0!==C$u&&(0===C$E||!C$X||C$T.z<=C$X.z)?(C$T=(C$x=C$T).nextZ,C$u--):(C$X=(C$x=C$X).nextZ,C$E--),C$c?C$c.nextZ=C$x:C$s=C$x,C$x.prevZ=C$c,C$c=C$x;C$T=C$X}C$c.nextZ=null,C$O*=2}while(1<C$l);return C$s},C$G.zOrder=function(C$s,C$M,C$T,C$X,C$x){return(C$s=1431655765&((C$s=858993459&((C$s=252645135&((C$s=16711935&((C$s=32767*(C$s-C$T)*C$x)|C$s<<8))|C$s<<4))|C$s<<2))|C$s<<1))|(C$M=1431655765&((C$M=858993459&((C$M=252645135&((C$M=16711935&((C$M=32767*(C$M-C$X)*C$x)|C$M<<8))|C$M<<4))|C$M<<2))|C$M<<1))<<1},C$G.getLeftmost=function(C$s){for(var C$M=C$s,C$T=C$s;C$M.x<C$T.x&&(C$T=C$M),(C$M=C$M.next)!==C$s;);return C$T},C$G.pointInTriangle=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){return 0<=(C$x-C$l)*(C$M-C$u)-(C$s-C$l)*(C$c-C$u)&&0<=(C$s-C$l)*(C$X-C$u)-(C$T-C$l)*(C$M-C$u)&&0<=(C$T-C$l)*(C$c-C$u)-(C$x-C$l)*(C$X-C$u)},C$G.isValidDiagonal=function(C$s,C$M){return C$s.next.i!==C$M.i&&C$s.prev.i!==C$M.i&&!C$G.intersectsPolygon(C$s,C$M)&&C$G.locallyInside(C$s,C$M)&&C$G.locallyInside(C$M,C$s)&&C$G.middleInside(C$s,C$M)},C$G.area=function(C$s,C$M,C$T){return(C$M.y-C$s.y)*(C$T.x-C$M.x)-(C$M.x-C$s.x)*(C$T.y-C$M.y)},C$G.equals=function(C$s,C$M){return C$s.x===C$M.x&&C$s.y===C$M.y},C$G.intersects=function(C$s,C$M,C$T,C$X){return!!(C$G.equals(C$s,C$M)&&C$G.equals(C$T,C$X)||C$G.equals(C$s,C$X)&&C$G.equals(C$T,C$M))||0<C$G.area(C$s,C$M,C$T)!=0<C$G.area(C$s,C$M,C$X)&&0<C$G.area(C$T,C$X,C$s)!=0<C$G.area(C$T,C$X,C$M)},C$G.intersectsPolygon=function(C$s,C$M){var C$T=C$s;do{if(C$T.i!==C$s.i&&C$T.next.i!==C$s.i&&C$T.i!==C$M.i&&C$T.next.i!==C$M.i&&C$G.intersects(C$T,C$T.next,C$s,C$M))return!0;C$T=C$T.next}while(C$T!==C$s);return!1},C$G.locallyInside=function(C$s,C$M){return C$G.area(C$s.prev,C$s,C$s.next)<0?0<=C$G.area(C$s,C$M,C$s.next)&&0<=C$G.area(C$s,C$s.prev,C$M):C$G.area(C$s,C$M,C$s.prev)<0||C$G.area(C$s,C$s.next,C$M)<0},C$G.middleInside=function(C$s,C$M){for(var C$T=C$s,C$X=!1,C$x=(C$s.x+C$M.x)/2,C$c=(C$s.y+C$M.y)/2;C$T.y>C$c!=C$T.next.y>C$c&&C$T.next.y!==C$T.y&&C$x<(C$T.next.x-C$T.x)*(C$c-C$T.y)/(C$T.next.y-C$T.y)+C$T.x&&(C$X=!C$X),(C$T=C$T.next)!==C$s;);return C$X},C$G.splitPolygon=function(C$s,C$M){var C$T=new C$xs(C$s.i,C$s.x,C$s.y),C$X=new C$xs(C$M.i,C$M.x,C$M.y),C$x=C$s.next,C$c=C$M.prev;return(C$s.next=C$M).prev=C$s,(C$T.next=C$x).prev=C$T,(C$X.next=C$T).prev=C$X,(C$c.next=C$X).prev=C$c,C$X},C$G.insertNode=function(C$s,C$M,C$T,C$X){var C$x=new C$xs(C$s,C$M,C$T);return C$X?(C$x.next=C$X.next,(C$x.prev=C$X).next.prev=C$x,C$X.next=C$x):(C$x.prev=C$x).next=C$x,C$x},C$G.removeNode=function(C$s){C$s.next.prev=C$s.prev,C$s.prev.next=C$s.next,C$s.prevZ&&(C$s.prevZ.nextZ=C$s.nextZ),C$s.nextZ&&(C$s.nextZ.prevZ=C$s.prevZ)},C$G.signedArea=function(C$s,C$M,C$T,C$X){for(var C$x=0,C$c=C$M,C$l=C$T-C$X;C$c<C$T;C$c+=C$X)C$x+=(C$s[C$l]-C$s[C$c])*(C$s[C$c+1]+C$s[C$l+1]),C$l=C$c;return C$x},C$G}(),C$xs=function(){function C$s(C$s,C$M,C$T){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=C$s,this.x=C$M,this.y=C$T,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return C$_(C$s,"laya.webgl.shapes.EarcutNode"),C$s}(),C$cs=(function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this.lineWidth=C$s,this.lineColor=C$M,this.lineAlpha=C$T,this.fillColor=C$X,this.fillAlpha=C$x,this.shape=C$l,this.fill=C$c}C$_(C$s,"laya.webgl.shapes.GeometryData");var C$M=C$s.prototype;C$M.clone=function(){return new C$s(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},C$M.getIndexData=function(){return null},C$M.getVertexData=function(){return null},C$M.destroy=function(){this.shape=null}}(),function(){function C$s(C$s){if(C$s instanceof Float32Array)this.points=C$s;else if(C$s instanceof Array){C$s.length;this.points=new Float32Array(C$s)}}C$_(C$s,"laya.webgl.shapes.Vertex");var C$M=C$s.prototype;C$N.imps(C$M,{"laya.webgl.shapes.IShape":!0}),C$M.getData=function(C$s,C$M,C$T){},C$M.needUpdate=function(C$s){return!1},C$M.rebuild=function(C$s){},C$M.setMatrix=function(C$s){}}(),function(){function C$E(C$s){void 0===C$s&&(C$s=1e4),this._renderType=C$s}C$_(C$E,"laya.webgl.submit.Submit");var C$s=C$E.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s.releaseRender=function(){var C$s=C$E._cache;(C$s[C$s._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},C$s.getRenderType=function(){return this._renderType},C$s.renderSubmit=function(){if(0===this._numEle)return 1;var C$s=this.shaderValue.textureHost;if(C$s){var C$M=C$s.source;if(!C$s.bitmap||!C$M)return 1;this.shaderValue.texture=C$M,C$s.alphaTexture&&C$s.alphaTexture.source&&(this.shaderValue.texture1=C$s.alphaTexture.source)}this._vb.bind_upload(this._ib);var C$T=C$ts.mainContext;return this.shaderValue.upload(),C$S.activeBlendFunction!==this._blendFn&&(C$T.enable(3042),this._blendFn(C$T),C$S.activeBlendFunction=this._blendFn),C$z.drawCall++,C$z.trianglesFaces+=this._numEle/3,C$T.drawElements(4,this._numEle,5123,this._startIdx),1},C$E.__init__=function(){var C$s=C$E.RENDERBASE=new C$E(-1);C$s.shaderValue=new C$ks(0,0),C$s.shaderValue.ALPHA=-1234},C$E.createSubmit=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$E._cache._length?C$E._cache[--C$E._cache._length]:new C$E;null==C$T&&((C$T=C$c._selfVb||(C$c._selfVb=C$ds.create(-1))).clear(),C$X=0),C$c._ib=C$M,C$c._vb=C$T,C$c._startIdx=C$X*C$Gs.BYTES_PIDX,C$c._numEle=0;var C$l=C$s._nBlendType;C$c._blendFn=C$s._targets?C$S.targetFns[C$l]:C$S.fns[C$l],C$c.shaderValue=C$x,C$c.shaderValue.setValue(C$s._shader2D);var C$u=C$s._shader2D.filters;return C$u&&C$c.shaderValue.setFilters(C$u),C$c},C$E.createShape=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$E._cache._length?C$E._cache[--C$E._cache._length]:new C$E;C$l._ib=C$M,C$l._vb=C$T,C$l._numEle=C$X,C$l._startIdx=C$x,C$l.shaderValue=C$c,C$l.shaderValue.setValue(C$s._shader2D);var C$u=C$s._nBlendType;return C$l._blendFn=C$s._targets?C$S.targetFns[C$u]:C$S.fns[C$u],C$l},C$E.TYPE_2D=1e4,C$E.TYPE_CANVAS=10003,C$E.TYPE_CMDSETRT=10004,C$E.TYPE_CUSTOM=10005,C$E.TYPE_BLURRT=10006,C$E.TYPE_CMDDESTORYPRERT=10007,C$E.TYPE_DISABLESTENCIL=10008,C$E.TYPE_OTHERIBVB=10009,C$E.TYPE_PRIMITIVE=10010,C$E.TYPE_RT=10011,C$E.TYPE_BLUR_RT=10012,C$E.TYPE_TARGET=10013,C$E.TYPE_CHANGE_VALUE=10014,C$E.TYPE_SHAPE=10015,C$E.TYPE_TEXTURE=10016,C$E.TYPE_FILLTEXTURE=10017,C$E.RENDERBASE=null,C$E._cache=((C$E._cache=[])._length=0,C$E._cache),C$E}()),C$ls=function(){function C$X(){this.fun=null,this.args=null}C$_(C$X,"laya.webgl.submit.SubmitCMD");var C$s=C$X.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s.renderSubmit=function(){return this.fun.apply(null,this.args),1},C$s.getRenderType=function(){return 0},C$s.releaseRender=function(){var C$s=C$X._cache;C$s[C$s._length++]=this},C$X.create=function(C$s,C$M){var C$T=C$X._cache._length?C$X._cache[--C$X._cache._length]:new C$X;return C$T.fun=C$M,C$T.args=C$s,C$T},C$X._cache=((C$X._cache=[])._length=0,C$X._cache),C$X}(),C$us=function(){function C$M(){this.variables={}}C$_(C$M,"laya.webgl.submit.SubmitCMDScope");var C$s=C$M.prototype;return C$s.getValue=function(C$s){return this.variables[C$s]},C$s.addValue=function(C$s,C$M){return this.variables[C$s]=C$M},C$s.setValue=function(C$s,C$M){return this.variables.hasOwnProperty(C$s)?this.variables[C$s]=C$M:null},C$s.clear=function(){for(var C$s in this.variables)delete this.variables[C$s]},C$s.recycle=function(){this.clear(),C$M.POOL.push(this)},C$M.create=function(){var C$s=C$M.POOL.pop();return C$s||(C$s=new C$M),C$s},C$M.POOL=[],C$M}(),C$Es=function(){function C$p(){this.offset=0,this.startIndex=0,this._mat=C$A.create()}C$_(C$p,"laya.webgl.submit.SubmitOtherIBVB");var C$s=C$p.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s.releaseRender=function(){var C$s=C$p._cache;(C$s[C$s._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},C$s.getRenderType=function(){return 10009},C$s.renderSubmit=function(){var C$s=this._shaderValue.textureHost;if(C$s){var C$M=C$s.source;if(!C$s.bitmap||!C$M)return 1;this._shaderValue.texture=C$M}this._vb.bind_upload(this._ib);var C$T=C$Js.worldMatrix4,C$X=C$A.TEMP;C$A.mulPre(this._mat,C$T[0],C$T[1],C$T[4],C$T[5],C$T[12],C$T[13],C$X);var C$x=C$Js.worldMatrix4=C$p.tempMatrix4;C$x[0]=C$X.a,C$x[1]=C$X.b,C$x[4]=C$X.c,C$x[5]=C$X.d,C$x[12]=C$X.tx,C$x[13]=C$X.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var C$c=C$ts.mainContext;return C$S.activeBlendFunction!==this._blendFn&&(C$c.enable(3042),this._blendFn(C$c),C$S.activeBlendFunction=this._blendFn),C$z.drawCall++,C$z.trianglesFaces+=this._numEle/3,C$c.drawElements(4,this._numEle,5123,this.startIndex),C$Js.worldMatrix4=C$T,C$Ys.activeShader=null,1},C$p.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){void 0===C$E&&(C$E=0);var C$O=C$p._cache._length?C$p._cache[--C$p._cache._length]:new C$p;C$O._ib=C$T,C$O._vb=C$M,C$O._numEle=C$X,C$O._shader=C$x,C$O._shaderValue=C$c;var C$U=C$s._nBlendType;switch(C$O._blendFn=C$s._targets?C$S.targetFns[C$U]:C$S.fns[C$U],C$E){case 0:C$O.offset=0,C$O.startIndex=C$u/(C$Gs.BYTES_PE*C$M.vertexStride)*1.5,C$O.startIndex*=C$Gs.BYTES_PIDX;break;case 1:C$O.startIndex=C$l,C$O.offset=C$u}return C$O},C$p._cache=((C$p._cache=[])._length=0,C$p._cache),C$p.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C$p}(),C$Os=function(){function C$T(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new C$h,this.screenRect=new C$h}C$_(C$T,"laya.webgl.submit.SubmitScissor");var C$s=C$T.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s._scissor=function(C$s,C$M,C$T,C$X){var C$x=C$Js.worldMatrix4,C$c=C$x[0],C$l=C$x[5],C$u=C$x[12],C$E=C$x[13];if(C$X*=C$l,(C$T*=C$c)<1||C$X<1)return!1;var C$O=(C$s=C$s*C$c+C$u)+C$T,C$U=(C$M=C$M*C$l+C$E)+C$X;C$s<0&&(C$T=C$O-(C$s=0)),C$M<0&&(C$X=C$U-(C$M=0));var C$p=C$Js.worldClipRect;if(C$s=Math.max(C$s,C$p.x),C$M=Math.max(C$M,C$p.y),C$T=Math.min(C$O,C$p.right)-C$s,C$X=Math.min(C$U,C$p.bottom)-C$M,C$T<1||C$X<1)return!1;var C$_=C$Js.worldScissorTest;return this.screenRect.copyFrom(C$p),C$p.x=C$s,C$p.y=C$M,C$p.width=C$T,C$p.height=C$X,C$Js.worldScissorTest=!0,C$M=C$Js.height-C$M-C$X,C$ts.mainContext.scissor(C$s,C$M,C$T,C$X),C$ts.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),C$_?(C$M=C$Js.height-this.screenRect.y-this.screenRect.height,C$ts.mainContext.scissor(this.screenRect.x,C$M,this.screenRect.width,this.screenRect.height),C$ts.mainContext.enable(3089)):(C$ts.mainContext.disable(3089),C$Js.worldScissorTest=!1),C$p.copyFrom(this.screenRect),!0},C$s._scissorWithTagart=function(C$s,C$M,C$T,C$X){if(C$T<1||C$X<1)return!1;var C$x=C$s+C$T,C$c=C$M+C$X;C$s<0&&(C$T=C$x-(C$s=0)),C$M<0&&(C$X=C$c-(C$M=0));var C$l=C$Js.worldClipRect;if(C$s=Math.max(C$s,C$l.x),C$M=Math.max(C$M,C$l.y),C$T=Math.min(C$x,C$l.right)-C$s,C$X=Math.min(C$c,C$l.bottom)-C$M,C$T<1||C$X<1)return!1;var C$u=C$Js.worldScissorTest;return this.screenRect.copyFrom(C$l),C$Js.worldScissorTest=!0,C$l.x=C$s,C$l.y=C$M,C$l.width=C$T,C$l.height=C$X,C$M=C$Js.height-C$M-C$X,C$ts.mainContext.scissor(C$s,C$M,C$T,C$X),C$ts.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),C$u?(C$M=C$Js.height-this.screenRect.y-this.screenRect.height,C$ts.mainContext.scissor(this.screenRect.x,C$M,this.screenRect.width,this.screenRect.height),C$ts.mainContext.enable(3089)):(C$ts.mainContext.disable(3089),C$Js.worldScissorTest=!1),C$l.copyFrom(this.screenRect),!0},C$s.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},C$s.getRenderType=function(){return 0},C$s.releaseRender=function(){var C$s=C$T._cache;(C$s[C$s._length++]=this).context=null},C$T.create=function(C$s){var C$M=C$T._cache._length?C$T._cache[--C$T._cache._length]:new C$T;return C$M.context=C$s,C$M},C$T._cache=((C$T._cache=[])._length=0,C$T._cache),C$T}(),C$Us=function(){function C$E(){this.step=0,this.blendMode=null,this.level=0}C$_(C$E,"laya.webgl.submit.SubmitStencil");var C$s=C$E.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},C$s.getRenderType=function(){return 0},C$s.releaseRender=function(){var C$s=C$E._cache;C$s[C$s._length++]=this},C$s.do1=function(){var C$s=C$ts.mainContext;C$s.enable(2960),C$s.clear(1024),C$s.colorMask(!1,!1,!1,!1),C$s.stencilFunc(514,this.level,255),C$s.stencilOp(7680,7680,7682)},C$s.do2=function(){var C$s=C$ts.mainContext;C$s.stencilFunc(514,this.level+1,255),C$s.colorMask(!0,!0,!0,!0),C$s.stencilOp(7680,7680,7680)},C$s.do3=function(){var C$s=C$ts.mainContext;C$s.colorMask(!0,!0,!0,!0),C$s.stencilOp(7680,7680,7680),C$s.clear(1024),C$s.disable(2960)},C$s.do4=function(){var C$s=C$ts.mainContext;0==this.level&&(C$s.enable(2960),C$s.clear(1024)),C$s.colorMask(!1,!1,!1,!1),C$s.stencilFunc(519,0,255),C$s.stencilOp(7680,7680,7682)},C$s.do5=function(){var C$s=C$ts.mainContext;C$s.stencilFunc(514,this.level,255),C$s.colorMask(!0,!0,!0,!0),C$s.stencilOp(7680,7680,7680)},C$s.do6=function(){var C$s=C$ts.mainContext;C$S.targetFns[C$S.TOINT[this.blendMode]](C$s)},C$s.do7=function(){var C$s=C$ts.mainContext;C$s.colorMask(!1,!1,!1,!1),C$s.stencilOp(7680,7680,7683)},C$s.do8=function(){var C$s=C$ts.mainContext;C$s.colorMask(!0,!0,!0,!0),C$s.stencilFunc(514,this.level,255),C$s.stencilOp(7680,7680,7680)},C$E.restore=function(C$s,C$M,C$T,C$X,C$x){var C$c;if((C$s._renderKey=0)<C$E._mask&&C$E._mask--,0==C$E._mask)C$c=laya.webgl.submit.SubmitStencil.create(3),C$s.addRenderObject(C$c),C$s._curSubmit=C$cs.RENDERBASE;else{C$c=laya.webgl.submit.SubmitStencil.create(7),C$s.addRenderObject(C$c);var C$l=C$s._vb;C$l._byteLength;if(C$gs.fillRectImgVb(C$l,null,C$M.x,C$M.y,C$M.width,C$M.height,C$m.DEF_UV,C$T,C$X,C$x,0,0)){C$s._shader2D.glTexture=null;var C$u=C$s._curSubmit=C$cs.createSubmit(C$s,C$s._ib,C$l,(C$l._byteLength-64)/32*3,C$ks.create(2,0));C$u.shaderValue.ALPHA=1,C$s._submits[C$s._submits._length++]=C$u,C$s._curSubmit._numEle+=6,C$s._curSubmit=C$cs.RENDERBASE}else alert("clipRect calc stencil rect error");C$c=laya.webgl.submit.SubmitStencil.create(8),C$s.addRenderObject(C$c)}},C$E.restore2=function(C$s,C$M){var C$T;(C$s._renderKey=0)<C$E._mask&&C$E._mask--,0==C$E._mask?(C$T=laya.webgl.submit.SubmitStencil.create(3),C$s.addRenderObject(C$T),C$s._curSubmit=C$cs.RENDERBASE):(C$T=laya.webgl.submit.SubmitStencil.create(7),C$s.addRenderObject(C$T),C$s._submits[C$s._submits._length++]=C$M,C$T=laya.webgl.submit.SubmitStencil.create(8),C$s.addRenderObject(C$T))},C$E.create=function(C$s){var C$M=C$E._cache._length?C$E._cache[--C$E._cache._length]:new C$E;return 5==(C$M.step=C$s)&&++C$E._mask,C$M.level=C$E._mask,C$M},C$E._cache=((C$E._cache=[])._length=0,C$E._cache),C$E._mask=0,C$E}(),C$ps=function(){function C$u(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}C$_(C$u,"laya.webgl.submit.SubmitTarget");var C$s=C$u.prototype;return C$N.imps(C$s,{"laya.webgl.submit.ISubmit":!0}),C$s.renderSubmit=function(){this._vb.bind_upload(this._ib);var C$s=this.scope.getValue(this.proName);return C$s&&(this.shaderValue.texture=C$s.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[C$s.width,C$s.height]),this.shaderValue.upload(),this.blend(),C$z.drawCall++,C$z.trianglesFaces+=this._numEle/3,C$ts.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},C$s.blend=function(){if(C$S.activeBlendFunction!==C$S.fns[this.blendType]){var C$s=C$ts.mainContext;C$s.enable(3042),C$S.fns[this.blendType](C$s),C$S.activeBlendFunction=C$S.fns[this.blendType]}},C$s.getRenderType=function(){return 0},C$s.releaseRender=function(){var C$s=C$u._cache;(C$s[C$s._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},C$u.create=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$u._cache._length?C$u._cache[--C$u._cache._length]:new C$u;return C$l._ib=C$M,C$l._vb=C$T,C$l.proName=C$c,C$l._startIdx=C$X*C$Gs.BYTES_PIDX,C$l._numEle=0,C$l.blendType=C$s._nBlendType,C$l.shaderValue=C$x,C$l.shaderValue.setValue(C$s._shader2D),C$l},C$u._cache=((C$u._cache=[])._length=0,C$u._cache),C$u}(),C$_s=function(){function C$s(){this._sourceStr=null}C$_(C$s,"laya.webgl.text.CharSegment");var C$M=C$s.prototype;return C$N.imps(C$M,{"laya.webgl.text.ICharSegment":!0}),C$M.textToSpit=function(C$s){this._sourceStr=C$s},C$M.getChar=function(C$s){return this._sourceStr.charAt(C$s)},C$M.getCharCode=function(C$s){return this._sourceStr.charCodeAt(C$s)},C$M.length=function(){return this._sourceStr.length},C$s}(),C$Rs=function(){var C$s;function C$z(){}return C$_(C$z,"laya.webgl.text.DrawText"),C$z.__init__=function(){C$z._charsTemp=new Array,C$z._drawValue=new C$s,C$z._charSeg=new C$_s},C$z.customCharSeg=function(C$s){C$z._charSeg=C$s},C$z.getChar=function(C$s,C$M,C$T){var C$X=C$ns.createOneChar(C$s,C$T);return-1!=C$M&&(C$z._charsCache[C$M]=C$X),C$X},C$z._drawSlow=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_,C$R,C$q){var C$G,C$g,C$f=C$z._drawValue.value(C$c,C$u,C$E,C$O,C$_,C$R,C$q),C$J=0,C$P=0,C$t=C$z._charsTemp,C$r=0,C$N=NaN;if(C$X)for(C$t.length=C$X.length,C$J=0,C$P=C$X.length;C$J<C$P;C$J++)(C$g=C$X[C$J])&&(C$N=C$g.charNum+C$f.txtID,C$t[C$J]=C$G=C$z._charsCache[C$N]||C$z.getChar(C$g.char,C$N,C$f),C$G.active());else{var C$w=C$T instanceof laya.utils.WordText?C$T.toString():C$T;if(C$C.CharacterCache){C$z._charSeg.textToSpit(C$w);var C$k=C$z._charSeg.length();for(C$J=0,C$P=C$t.length=C$k;C$J<C$P;C$J++)C$N=C$z._charSeg.getCharCode(C$J)+C$f.txtID,C$t[C$J]=C$G=C$z._charsCache[C$N]||C$z.getChar(C$z._charSeg.getChar(C$J),C$N,C$f),C$G.active(),C$r+=C$G.cw}else C$t.length=0,(C$G=C$z.getChar(C$w,-1,C$f)).active(),C$r+=C$G.cw,C$t[0]=C$G}var C$A=0;null!==C$l&&"left"!==C$l&&(C$A=-("center"==C$l?C$r/2:C$r));var C$D,C$h,C$Q=NaN,C$v=0;if(C$X)for(C$J=0,C$P=C$t.length;C$J<C$P;C$J++)C$G=C$t[C$J],C$g=C$X[C$J],C$G&&C$g&&!C$G.isSpace&&(C$Q=C$G.borderSize,C$D=C$G.texture,C$M._drawText(C$D,C$U+C$A+C$g.x*C$_-C$Q,C$p+C$g.y*C$R-C$Q,C$D.width,C$D.height,C$x,0,0,0,0));else{for(C$J=0,C$P=C$t.length;C$J<C$P;C$J++)(C$G=C$t[C$J])&&!C$G.isSpace&&(C$Q=C$G.borderSize,C$D=C$G.texture,C$M._drawText(C$D,C$U+C$A-C$Q,C$p-C$Q,C$D.width,C$D.height,C$x,0,0,0,0),C$s&&((C$h=C$s[C$v++])||(C$h=C$s[C$v-1]=[]),C$h[0]=C$D,C$h[1]=C$A-C$Q,C$h[2]=-C$Q)),C$A+=C$G.cw;C$s&&(C$s.length=C$v)}},C$z._drawFast=function(C$s,C$M,C$T,C$X,C$x){for(var C$c,C$l,C$u=0,C$E=C$s.length;C$u<C$E;C$u++)(C$c=(C$l=C$s[C$u])[0]).active(),C$M._drawText(C$c,C$X+C$l[1],C$x+C$l[2],C$c.width,C$c.height,C$T,0,0,0,0)},C$z.drawText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p){if(void 0===C$p&&(C$p=0),!(C$M&&0===C$M.length||C$T&&0===C$T.length)){var C$_=C$X.a,C$R=C$X.d;(0!==C$X.b||0!==C$X.c)&&(C$_=C$R=1);var C$q=1!==C$_||1!==C$R;if(C$q&&C$N.stage.transform){var C$G=C$N.stage.transform;C$q=C$G.a===C$_&&C$G.d===C$R}else C$q=!1;if(C$q){var C$g=(C$X=C$X.copyTo(C$ws._tmpMatrix)).tx,C$f=C$X.ty;C$X.scale(1/C$_,1/C$R),C$X._checkTransform(),C$O*=C$_,C$U*=C$R,C$O+=C$g-C$X.tx,C$U+=C$f-C$X.ty}else C$_=C$R=1;if(C$T)C$z._drawSlow(null,C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$_,C$R,C$p);else{if(null===C$M.toUpperCase){var C$J=C$_+1e5*C$R,C$P=C$M;return void(C$P.changed||C$P.id!==C$J?(C$P.id=C$J,C$P.changed=!1,C$z._drawSlow(C$P.save,C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$_,C$R,C$p)):C$z._drawFast(C$P.save,C$s,C$X,C$O,C$U))}var C$t=C$M+C$x.toString()+C$l+C$u+C$E+C$_+C$R+C$c,C$r=C$z._textsCache[C$t];C$C.CharacterCache?C$r?C$z._drawFast(C$r,C$s,C$X,C$O,C$U):(C$z._textsCache.__length||(C$z._textsCache.__length=0),C$z._textsCache.__length>C$w.WebGLTextCacheCount&&((C$z._textsCache={}).__length=0,C$z._curPoolIndex=0),C$z._textCachesPool[C$z._curPoolIndex]?(C$r=C$z._textsCache[C$t]=C$z._textCachesPool[C$z._curPoolIndex]).length=0:C$z._textCachesPool[C$z._curPoolIndex]=C$r=C$z._textsCache[C$t]=[],C$z._textsCache.__length++,C$z._curPoolIndex++,C$z._drawSlow(C$r,C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$_,C$R,C$p)):C$z._drawSlow(C$r,C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$_,C$R,C$p)}}},C$z._charsTemp=null,C$z._textCachesPool=[],C$z._curPoolIndex=0,C$z._charsCache={},C$z._textsCache={},C$z._drawValue=null,C$z.d=[],C$z._charSeg=null,C$z.__init$=function(){C$s=function(){function C$E(){}return C$_(C$E,""),C$E.prototype.value=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this.font=C$s,this.fillColor=C$M,this.borderColor=C$T,this.lineWidth=C$X,this.scaleX=C$x,this.scaleY=C$c,this.underLine=C$l;var C$u=C$s.toString()+C$x+C$c+C$X+(C$M?C$M.toLowerCase():" ")+(C$T?C$T.toLowerCase():" ")+C$l;return this.txtID=C$E._keymap[C$u],this.txtID||(this.txtID=1e-7*++C$E._keymapCount,C$E._keymap[C$u]=this.txtID),this},C$E.clear=function(){C$E._keymap={},C$E._keymapCount=1},C$E._keymap={},C$E._keymapCount=1,C$E}()},C$z}(),C$qs=function(){function C$x(C$s){this._index=0,this._size=14,this._italic=-2,C$x._cache2=C$x._cache2||[],this.setFont(C$s||"14px Arial")}C$_(C$x,"laya.webgl.text.FontInContext");var C$s=C$x.prototype;return C$s.setFont=function(C$s){var C$M=C$x._cache2[C$s];if(C$M)this._words=C$M[0],this._size=C$M[1];else{this._words=C$s.split(" ");for(var C$T=0,C$X=this._words.length;C$T<C$X;C$T++)if(0<this._words[C$T].indexOf("px")){this._index=C$T;break}this._size=parseInt(this._words[this._index]),C$x._cache2[C$s]=[this._words,this._size]}this._text=null,this._italic=-2},C$s.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},C$s.hasType=function(C$s){for(var C$M=0,C$T=this._words.length;C$M<C$T;C$M++)if(this._words[C$M]===C$s)return C$M;return-1},C$s.removeType=function(C$s){for(var C$M=0,C$T=this._words.length;C$M<C$T;C$M++)if(this._words[C$M]===C$s){this._words.splice(C$M,1),this._index>C$M&&this._index--;break}this._text=null,this._italic=-2},C$s.copyTo=function(C$s){return C$s._text=this._text,C$s._size=this._size,C$s._index=this._index,C$s._words=this._words.slice(),C$s._italic=-2,C$s},C$s.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},C$X(0,C$s,"size",function(){return this._size},function(C$s){this._size=C$s,this._words[this._index]=C$s+"px",this._text=null}),C$x.create=function(C$s){var C$M=C$x._cache[C$s];return C$M||(C$M=C$x._cache[C$s]=new C$x(C$s))},C$x.EMPTY=new C$x,C$x._cache={},C$x._cache2=null,C$x}(),C$Gs=function(){function C$s(){}return C$_(C$s,"laya.webgl.utils.CONST3D2D"),C$s.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C$s.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],C$s.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],C$s._TMPARRAY=[],C$s._OFFSETX=0,C$s._OFFSETY=0,C$l(C$s,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),C$s}(),C$gs=function(){function C$q(){}return C$_(C$q,"laya.webgl.utils.GlUtils"),C$q.make2DProjection=function(C$s,C$M,C$T){return[2/C$s,0,0,0,0,-2/C$M,0,0,0,0,2/C$T,0,-1,1,0,1]},C$q.fillIBQuadrangle=function(C$s,C$M){if(65535/4<C$M)throw Error("IBQuadrangle count:"+C$M+" must<:"+Math.floor(65535/4));C$M=Math.floor(C$M),C$s._resizeBuffer(6*(C$M+1)*2,!1),C$s.byteLength=C$s.bufferLength;for(var C$T=C$s.getUint16Array(),C$X=0,C$x=0;C$x<C$M;C$x++)C$T[C$X++]=4*C$x,C$T[C$X++]=4*C$x+2,C$T[C$X++]=4*C$x+1,C$T[C$X++]=4*C$x,C$T[C$X++]=4*C$x+3,C$T[C$X++]=4*C$x+2;return C$s.setNeedUpload(),!0},C$q.expandIBQuadrangle=function(C$s,C$M){C$s.bufferLength>=6*C$M*2||C$q.fillIBQuadrangle(C$s,C$M)},C$q.mathCeilPowerOfTwo=function(C$s){return C$s--,C$s|=C$s>>1,C$s|=C$s>>2,C$s|=C$s>>4,C$s|=C$s>>8,C$s|=C$s>>16,++C$s},C$q.fillQuadrangleImgVb=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=16+(C$s._byteLength>>2);C$s.byteLength=C$E<<2;var C$O=C$s.getFloat32Array();C$O[(C$E-=16)+2]=C$x[0],C$O[C$E+3]=C$x[1],C$O[C$E+6]=C$x[2],C$O[C$E+7]=C$x[3],C$O[C$E+10]=C$x[4],C$O[C$E+11]=C$x[5],C$O[C$E+14]=C$x[6],C$O[C$E+15]=C$x[7];var C$U=C$c.a,C$p=C$c.b,C$_=C$c.c,C$R=C$c.d;if(1!==C$U||0!==C$p||0!==C$_||1!==C$R){C$c.bTransform=!0;var C$q=C$c.tx+C$l,C$G=C$c.ty+C$u;C$O[C$E]=(C$X[0]+C$M)*C$U+(C$X[1]+C$T)*C$_+C$q,C$O[C$E+1]=(C$X[0]+C$M)*C$p+(C$X[1]+C$T)*C$R+C$G,C$O[C$E+4]=(C$X[2]+C$M)*C$U+(C$X[3]+C$T)*C$_+C$q,C$O[C$E+5]=(C$X[2]+C$M)*C$p+(C$X[3]+C$T)*C$R+C$G,C$O[C$E+8]=(C$X[4]+C$M)*C$U+(C$X[5]+C$T)*C$_+C$q,C$O[C$E+9]=(C$X[4]+C$M)*C$p+(C$X[5]+C$T)*C$R+C$G,C$O[C$E+12]=(C$X[6]+C$M)*C$U+(C$X[7]+C$T)*C$_+C$q,C$O[C$E+13]=(C$X[6]+C$M)*C$p+(C$X[7]+C$T)*C$R+C$G}else C$c.bTransform=!1,C$M+=C$c.tx+C$l,C$T+=C$c.ty+C$u,C$O[C$E]=C$M+C$X[0],C$O[C$E+1]=C$T+C$X[1],C$O[C$E+4]=C$M+C$X[2],C$O[C$E+5]=C$T+C$X[3],C$O[C$E+8]=C$M+C$X[4],C$O[C$E+9]=C$T+C$X[5],C$O[C$E+12]=C$M+C$X[6],C$O[C$E+13]=C$T+C$X[7];return C$s._upload=!0},C$q.fillTranglesVB=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u=(C$s._byteLength>>2)+C$X.length;C$s.byteLength=C$u<<2;var C$E=C$s.getFloat32Array();C$u-=C$X.length;for(var C$O=C$X.length,C$U=C$x.a,C$p=C$x.b,C$_=C$x.c,C$R=C$x.d,C$q=0;C$q<C$O;C$q+=4)if(C$E[C$u+C$q+2]=C$X[C$q+2],C$E[C$u+C$q+3]=C$X[C$q+3],1!==C$U||0!==C$p||0!==C$_||1!==C$R){C$x.bTransform=!0;var C$G=C$x.tx+C$c,C$g=C$x.ty+C$l;C$E[C$u+C$q]=(C$X[C$q]+C$M)*C$U+(C$X[C$q+1]+C$T)*C$_+C$G,C$E[C$u+C$q+1]=(C$X[C$q]+C$M)*C$p+(C$X[C$q+1]+C$T)*C$R+C$g}else C$x.bTransform=!1,C$M+=C$x.tx+C$c,C$T+=C$x.ty+C$l,C$E[C$u+C$q]=C$M+C$X[C$q],C$E[C$u+C$q+1]=C$T+C$X[C$q+1];return C$s._upload=!0},C$q.copyPreImgVb=function(C$s,C$M,C$T){var C$X=C$s._byteLength>>2;C$s.byteLength=C$X+16<<2;for(var C$x=C$s.getFloat32Array(),C$c=0,C$l=C$X-16;C$c<4;C$c++)C$x[C$X]=C$x[C$l]+C$M,++C$l,C$x[++C$X]=C$x[C$l]+C$T,++C$l,C$x[++C$X]=C$x[C$l],++C$l,C$x[++C$X]=C$x[C$l],++C$X,++C$l;C$s._upload=!0},C$q.fillRectImgVb=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_){void 0===C$_&&(C$_=!1);var C$R,C$q,C$G,C$g,C$f,C$J,C$P,C$t,C$r,C$N,C$w,C$k,C$A,C$D,C$h,C$Q,C$v=1,C$z=C$u.a,C$B=C$u.b,C$o=C$u.c,C$C=C$u.d,C$m=C$M&&C$M.width<99999999;if(1!==C$z||0!==C$B||0!==C$o||1!==C$C?(C$u.bTransform=!0,0===C$B&&0===C$o&&(C$v=23,C$r=C$x+C$T,C$N=C$c+C$X,C$R=C$z*C$T+(C$w=C$u.tx+C$E),C$G=C$z*C$r+C$w,C$q=C$C*C$X+(C$k=C$u.ty+C$O),C$g=C$C*C$N+C$k)):(C$v=23,C$u.bTransform=!1,C$G=(C$R=C$T+C$u.tx+C$E)+C$x,C$g=(C$q=C$X+C$u.ty+C$O)+C$c),C$m&&(C$f=C$M.x,C$J=C$M.y,C$P=C$M.width+C$f,C$t=C$M.height+C$J),1!==C$v){if(Math.min(C$R,C$G)>=C$P)return!1;if(Math.min(C$q,C$g)>=C$t)return!1;if(Math.max(C$G,C$R)<=C$f)return!1;if(Math.max(C$g,C$q)<=C$J)return!1}var C$Y=C$s._byteLength>>2;C$s.byteLength=16+C$Y<<2;var C$I=C$s.getFloat32Array();switch(C$I[2+C$Y]=C$l[0],C$I[3+C$Y]=C$l[1],C$I[6+C$Y]=C$l[2],C$I[7+C$Y]=C$l[3],C$I[10+C$Y]=C$l[4],C$I[11+C$Y]=C$l[5],C$I[14+C$Y]=C$l[6],C$I[15+C$Y]=C$l[7],C$v){case 1:C$w=C$u.tx+C$E,C$k=C$u.ty+C$O;var C$y=C$z*C$T,C$e=C$o*C$X,C$V=C$C*C$X,C$b=C$B*C$T,C$L=C$z*(C$r=C$x+C$T),C$S=C$o*(C$N=C$c+C$X),C$K=C$C*C$N,C$Z=C$B*C$r;C$_?(C$A=C$y+C$e+C$w,C$h=Math.round(C$A)-C$A,C$D=C$V+C$b+C$k,C$Q=Math.round(C$D)-C$D,C$I[C$Y]=C$A+C$h,C$I[1+C$Y]=C$D+C$Q,C$I[4+C$Y]=C$L+C$e+C$w+C$h,C$I[5+C$Y]=C$V+C$Z+C$k+C$Q,C$I[8+C$Y]=C$L+C$S+C$w+C$h,C$I[9+C$Y]=C$K+C$Z+C$k+C$Q,C$I[12+C$Y]=C$y+C$S+C$w+C$h,C$I[13+C$Y]=C$K+C$b+C$k+C$Q):(C$I[C$Y]=C$y+C$e+C$w,C$I[1+C$Y]=C$V+C$b+C$k,C$I[4+C$Y]=C$L+C$e+C$w,C$I[5+C$Y]=C$V+C$Z+C$k,C$I[8+C$Y]=C$L+C$S+C$w,C$I[9+C$Y]=C$K+C$Z+C$k,C$I[12+C$Y]=C$y+C$S+C$w,C$I[13+C$Y]=C$K+C$b+C$k);break;case 23:C$_?(C$A=C$R+C$U,C$h=Math.round(C$A)-C$A,C$D=C$q,C$Q=Math.round(C$D)-C$D,C$I[C$Y]=C$A+C$h,C$I[1+C$Y]=C$D+C$Q,C$I[4+C$Y]=C$G+C$U+C$h,C$I[5+C$Y]=C$q+C$Q,C$I[8+C$Y]=C$G+C$h,C$I[9+C$Y]=C$g+C$Q,C$I[12+C$Y]=C$R+C$h,C$I[13+C$Y]=C$g+C$Q):(C$I[C$Y]=C$R+C$U,C$I[1+C$Y]=C$q,C$I[4+C$Y]=C$G+C$U,C$I[5+C$Y]=C$q,C$I[8+C$Y]=C$G,C$I[9+C$Y]=C$g,C$I[12+C$Y]=C$R,C$I[13+C$Y]=C$g)}return C$s._upload=!0},C$q.fillLineVb=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=.5*C$l,C$O=C$q._fillLineArray,C$U=-(C$X-C$c),C$p=C$T-C$x,C$_=Math.sqrt(C$U*C$U+C$p*C$p);C$U/=C$_,C$p/=C$_,C$U*=C$E,C$p*=C$E,C$O[0]=C$T-C$U,C$O[1]=C$X-C$p,C$O[4]=C$T+C$U,C$O[5]=C$X+C$p,C$O[8]=C$x+C$U,C$O[9]=C$c+C$p,C$O[12]=C$x-C$U,C$O[13]=C$c-C$p,C$u&&C$u.transformPointArray(C$O,C$O);var C$R=16+(C$s._byteLength>>2);return C$s.byteLength=C$R<<2,C$s.insertData(C$O,C$R-16),!0},C$q._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C$q}(),C$fs=(function(){function C$E(){}C$_(C$E,"laya.webgl.utils.MatirxArray"),C$E.ArrayMul=function(C$s,C$M,C$T){if(C$s)if(C$M)for(var C$X=NaN,C$x=NaN,C$c=NaN,C$l=NaN,C$u=0;C$u<4;C$u++)C$X=C$s[C$u],C$x=C$s[C$u+4],C$c=C$s[C$u+8],C$l=C$s[C$u+12],C$T[C$u]=C$X*C$M[0]+C$x*C$M[1]+C$c*C$M[2]+C$l*C$M[3],C$T[C$u+4]=C$X*C$M[4]+C$x*C$M[5]+C$c*C$M[6]+C$l*C$M[7],C$T[C$u+8]=C$X*C$M[8]+C$x*C$M[9]+C$c*C$M[10]+C$l*C$M[11],C$T[C$u+12]=C$X*C$M[12]+C$x*C$M[13]+C$c*C$M[14]+C$l*C$M[15];else C$E.copyArray(C$s,C$T);else C$E.copyArray(C$M,C$T)},C$E.copyArray=function(C$s,C$M){if(C$s&&C$M)for(var C$T=0;C$T<C$s.length;C$T++)C$M[C$T]=C$s[C$T]}}(),function(){function C$M(C$s,C$M,C$T){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=C$s,this._vb=new C$ds(C$s,35048),C$M&&this._vb._resizeBuffer(C$M,!1),this._ib=new C$Hs,C$T&&this._ib._resizeBuffer(C$T,!1)}C$_(C$M,"laya.webgl.utils.Mesh2D");var C$s=C$M.prototype;return C$s.cloneWithNewVB=function(){var C$s=new C$M(this._stride,0,0);return C$s._ib=this._ib,C$s._quadNum=this._quadNum,C$s._attribInfo=this._attribInfo,C$s},C$s.cloneWithNewVBIB=function(){var C$s=new C$M(this._stride,0,0);return C$s._attribInfo=this._attribInfo,C$s},C$s.getVBW=function(){return this._vb.setNeedUpload(),this._vb},C$s.getVBR=function(){return this._vb},C$s.getIBR=function(){return this._ib},C$s.getIBW=function(){return this._ib.setNeedUpload(),this._ib},C$s.createQuadIB=function(C$s){this._quadNum=C$s,this._ib._resizeBuffer(6*C$s*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var C$M=this._ib.getUint16Array(),C$T=0,C$X=0,C$x=0;C$x<C$s;C$x++)C$M[C$T++]=C$X,C$M[C$T++]=C$X+2,C$M[C$T++]=C$X+1,C$M[C$T++]=C$X,C$M[C$T++]=C$X+3,C$M[C$T++]=C$X+2,C$X+=4;this._ib.setNeedUpload()},C$s.setAttributes=function(C$s){if(this._attribInfo=C$s,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},C$s.getEleNum=function(){return this._ib.getBuffer().byteLength/2},C$s.releaseMesh=function(){},C$s.destroy=function(){},C$s.clearVB=function(){this._vb.clear()},C$M._gvaoid=0,C$M}()),C$Js=function(){function C$x(){}return C$_(C$x,"laya.webgl.utils.RenderState2D"),C$x.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},C$x.mat2MatArray=function(C$s,C$M){var C$T=C$s,C$X=C$M;return C$X[0]=C$T.a,C$X[1]=C$T.b,C$X[2]=C$x.EMPTYMAT4_ARRAY[2],C$X[3]=C$x.EMPTYMAT4_ARRAY[3],C$X[4]=C$T.c,C$X[5]=C$T.d,C$X[6]=C$x.EMPTYMAT4_ARRAY[6],C$X[7]=C$x.EMPTYMAT4_ARRAY[7],C$X[8]=C$x.EMPTYMAT4_ARRAY[8],C$X[9]=C$x.EMPTYMAT4_ARRAY[9],C$X[10]=C$x.EMPTYMAT4_ARRAY[10],C$X[11]=C$x.EMPTYMAT4_ARRAY[11],C$X[12]=C$T.tx,C$X[13]=C$T.ty,C$X[14]=C$x.EMPTYMAT4_ARRAY[14],C$X[15]=C$x.EMPTYMAT4_ARRAY[15],C$M},C$x.restoreTempArray=function(){C$x.TEMPMAT4_ARRAY[0]=1,C$x.TEMPMAT4_ARRAY[1]=0,C$x.TEMPMAT4_ARRAY[4]=0,C$x.TEMPMAT4_ARRAY[5]=1,C$x.TEMPMAT4_ARRAY[12]=0,C$x.TEMPMAT4_ARRAY[13]=0},C$x.clear=function(){C$x.worldScissorTest=!1,C$x.worldShaderDefines=null,C$x.worldFilters=null,C$x.worldAlpha=1,C$x.worldClipRect.x=C$x.worldClipRect.y=0,C$x.worldClipRect.width=C$x.width,C$x.worldClipRect.height=C$x.height,C$x.curRenderTarget=null},C$x._MAXSIZE=99999999,C$x.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C$x.worldMatrix4=C$x.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C$x.worldAlpha=1,C$x.worldScissorTest=!1,C$x.worldFilters=null,C$x.worldShaderDefines=null,C$x.curRenderTarget=null,C$x.width=0,C$x.height=0,C$l(C$x,["worldMatrix",function(){return this.worldMatrix=new C$A},"worldClipRect",function(){return this.worldClipRect=new C$h(0,0,99999999,99999999)}]),C$x}(),C$Ps=function(){var C$J,C$T;function C$P(C$s,C$M,C$T,C$X,C$x){var C$c=this;function C$l(C$s){var C$M=[],C$T=new C$J(C$M);return C$c._compileToTree(C$T,C$s.split("\n"),0,C$M,C$x),C$T}var C$u=C$R.now();this._VS=C$l(C$M),this._PS=C$l(C$T),this._nameMap=C$X,2<C$R.now()-C$u&&console.log("ShaderCompile use time:"+(C$R.now()-C$u)+"  size:"+C$M.length+"/"+C$T.length)}C$_(C$P,"laya.webgl.utils.ShaderCompile");var C$s=C$P.prototype;return C$s._compileToTree=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_=0,C$R=0,C$q=0,C$G=0;for(C$R=C$T;C$R<C$M.length;C$R++)if(!((C$u=C$M[C$R]).length<1)&&0!==(C$_=C$u.indexOf("//"))){if(0<=C$_&&(C$u=C$u.substr(0,C$_)),C$c=C$p||new C$J(C$X),C$p=null,C$c.text=C$u,C$c.noCompile=!0,0<=(C$_=C$u.indexOf("#"))){for(C$E="#",C$G=C$_+1,C$q=C$u.length;C$G<C$q;C$G++){var C$g=C$u.charAt(C$G);if(" "===C$g||"\t"===C$g||"\r"===C$g||"\n"===C$g||"?"===C$g)break;C$E+=C$g}switch(C$c.name=C$E){case"#ifdef":case"#ifndef":if(C$c.src=C$u,C$c.noCompile=null!=C$u.match(/[!&|()=<>]/),C$c.noCompile?console.log("function():Boolean{return "+C$u.substr(C$_+C$c.name.length)+"}"):(C$U=C$u.replace(/^\s*/,"").split(/\s+/),C$c.setCondition(C$U[1],"#ifdef"===C$E?1:2),C$c.text="//"+C$c.text),C$c.setParent(C$s),C$s=C$c,C$x)for(C$U=C$u.substr(C$G).split(C$P._splitToWordExps3),C$G=0;C$G<C$U.length;C$G++)(C$u=C$U[C$G]).length&&(C$x[C$u]=!0);continue;case"#if":if(C$c.src=C$u,C$c.noCompile=!0,C$c.setParent(C$s),C$s=C$c,C$x)for(C$U=C$u.substr(C$G).split(C$P._splitToWordExps3),C$G=0;C$G<C$U.length;C$G++)(C$u=C$U[C$G]).length&&"defined"!=C$u&&(C$x[C$u]=!0);continue;case"#else":C$c.src=C$u,C$l=(C$s=C$s.parent).childs[C$s.childs.length-1],C$c.noCompile=C$l.noCompile,C$c.noCompile||(C$c.condition=C$l.condition,C$c.conditionType=1==C$l.conditionType?2:1,C$c.text="//"+C$c.text+" "+C$l.text+" "+C$c.conditionType),C$c.setParent(C$s),C$s=C$c;continue;case"#endif":C$l=(C$s=C$s.parent).childs[C$s.childs.length-1],C$c.noCompile=C$l.noCompile,C$c.noCompile||(C$c.text="//"+C$c.text),C$c.setParent(C$s);continue;case"#include":C$U=C$P.splitToWords(C$u,null);var C$f=C$P.includes[C$U[1]];if(!C$f)throw"ShaderCompile error no this include file:"+C$U[1];if((C$_=C$U[0].indexOf("?"))<0){C$c.setParent(C$s),C$u=C$f.getWith("with"==C$U[2]?C$U[3]:null),this._compileToTree(C$c,C$u.split("\n"),0,C$X,C$x),C$c.text="";continue}C$c.setCondition(C$U[0].substr(C$_+1),1),C$c.text=C$f.getWith("with"==C$U[2]?C$U[3]:null);break;case"#import":C$O=(C$U=C$P.splitToWords(C$u,null))[1],C$X.push({node:C$c,file:C$P.includes[C$O],ofs:C$c.text.length});continue}}else{if((C$l=C$s.childs[C$s.childs.length-1])&&!C$l.name){0<C$X.length&&C$P.splitToWords(C$u,C$l),C$p=C$c,C$l.text+="\n"+C$u;continue}0<C$X.length&&C$P.splitToWords(C$u,C$c)}C$c.setParent(C$s)}},C$s.createShader=function(C$s,C$M,C$T){var C$X={},C$x="";if(C$s)for(var C$c in C$s)C$x+="#define "+C$c+"\n",C$X[C$c]=!0;var C$l=this._VS.toscript(C$X,[]),C$u=this._PS.toscript(C$X,[]);return(C$T||C$Ws.create)(C$x+C$l.join("\n"),C$x+C$u.join("\n"),C$M,this._nameMap)},C$P._parseOne=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l={type:C$P.shaderParamsMap[C$T[C$X+1]],name:C$T[C$X+2],size:isNaN(parseInt(C$T[C$X+3]))?1:parseInt(C$T[C$X+3])};return C$c&&("attribute"==C$x?C$s.push(C$l):C$M.push(C$l)),":"==C$T[C$X+3]&&(C$l.type=C$T[C$X+4],C$X+=2),C$X+=2},C$P.addInclude=function(C$s,C$M){if(!C$M||0===C$M.length)throw new Error("add shader include file err:"+C$s);if(C$P.includes[C$s])throw new Error("add shader include file err, has add:"+C$s);C$P.includes[C$s]=new C$T(C$M)},C$P.preGetParams=function(C$s,C$M){var C$T=[C$s,C$M],C$X={},C$x=[],C$c=[],C$l={},C$u=[];C$X.attributes=C$x,C$X.uniforms=C$c,C$X.defines=C$l;for(var C$E=0,C$O=0,C$U=0;C$U<2;C$U++){C$T[C$U]=C$T[C$U].replace(C$P._removeAnnotation,"");var C$p,C$_=C$T[C$U].match(C$P._reg);for(C$E=0,C$O=C$_.length;C$E<C$O;C$E++){var C$R=C$_[C$E];if("attribute"==C$R||"uniform"==C$R)C$E=C$P._parseOne(C$x,C$c,C$_,C$E,C$R,!0);else{if("#define"==C$R){C$u[C$R=C$_[++C$E]]=1;continue}if("#ifdef"==C$R){C$l[C$p=C$_[++C$E]]=C$l[C$p]||[];for(C$E++;C$E<C$O;C$E++)if("attribute"==(C$R=C$_[C$E])||"uniform"==C$R)C$E=C$P._parseOne(C$x,C$c,C$_,C$E,C$R,C$u[C$p]);else if("#else"==C$R)for(C$E++;C$E<C$O;C$E++)if("attribute"==(C$R=C$_[C$E])||"uniform"==C$R)C$E=C$P._parseOne(C$x,C$c,C$_,C$E,C$R,!C$u[C$p]);else if("#endif"==C$R)break}}}}return C$X},C$P.splitToWords=function(C$s,C$M){for(var C$T,C$X,C$x=[],C$c=-1,C$l=0,C$u=C$s.length;C$l<C$u;C$l++)if(C$T=C$s.charAt(C$l),0<=" \t=+-*/&%!<>()'\",;".indexOf(C$T)){if(0<=C$c&&1<C$l-C$c&&(C$X=C$s.substr(C$c,C$l-C$c),C$x.push(C$X)),'"'==C$T||"'"==C$T){var C$E=C$s.indexOf(C$T,C$l+1);if(C$E<0)throw"Sharder err:"+C$s;C$x.push(C$s.substr(C$l+1,C$E-C$l-1)),C$l=C$E,C$c=-1;continue}"("==C$T&&C$M&&0<C$x.length&&(C$X=C$x[C$x.length-1]+";","vec4;main;".indexOf(C$X)<0&&(C$M.useFuns+=C$X)),C$c=-1}else C$c<0&&(C$c=C$l);return C$c<C$u&&1<C$u-C$c&&(C$X=C$s.substr(C$c,C$u-C$c),C$x.push(C$X)),C$x},C$P.IFDEF_NO=0,C$P.IFDEF_YES=1,C$P.IFDEF_ELSE=2,C$P.IFDEF_PARENT=3,C$P._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),C$P._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),C$P._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),C$P.includes={},C$l(C$P,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),C$P.__init$=function(){C$J=function(){function C$T(C$s){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=C$s}C$_(C$T,"");var C$s=C$T.prototype;return C$s.setParent=function(C$s){C$s.childs.push(this),this.z=C$s.z+1,this.parent=C$s},C$s.setCondition=function(C$s,C$M){C$s&&(this.conditionType=C$M,C$s=C$s.replace(/(\s*$)/g,""),this.condition=function(){return this[C$s]},this.condition.__condition=C$s)},C$s.toscript=function(C$s,C$M){return this._toscript(C$s,C$M,++C$T.__id)},C$s._toscript=function(C$X,C$x,C$c){if(this.childs.length<1&&!this.text)return C$x;C$x.length;if(this.condition){var C$s=!!this.condition.call(C$X);if(2===this.conditionType&&(C$s=!C$s),!C$s)return C$x}if(this.text&&C$x.push(this.text),0<this.childs.length&&this.childs.forEach(function(C$s,C$M,C$T){C$s._toscript(C$X,C$x,C$c)}),0<this.includefiles.length&&0<this.useFuns.length)for(var C$M,C$T=0,C$l=this.includefiles.length;C$T<C$l;C$T++)this.includefiles[C$T].curUseID!=C$c&&0<(C$M=this.includefiles[C$T].file.getFunsScript(this.useFuns)).length&&(this.includefiles[C$T].curUseID=C$c,C$x[0]=C$M+C$x[0]);return C$x},C$T.__id=1,C$T}(),C$T=function(){function C$s(C$s){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=C$s;for(var C$M=0,C$T=0,C$X=0;!((C$M=C$s.indexOf("#begin",C$M))<0);){for(C$X=C$M+5;!((C$X=C$s.indexOf("#end",C$X))<0)&&"i"===C$s.charAt(C$X+4);)C$X+=5;if(C$X<0)throw"add include err,no #end:"+C$s;C$T=C$s.indexOf("\n",C$M);var C$x=C$P.splitToWords(C$s.substr(C$M,C$T-C$M),null);"code"==C$x[1]?this.codes[C$x[2]]=C$s.substr(C$T+1,C$X-C$T-1):"function"==C$x[1]&&(C$T=C$s.indexOf("function",C$M),C$T+="function".length,this.funs[C$x[3]]=C$s.substr(C$T+1,C$X-C$T-1),this.funnames+=C$x[3]+";"),C$M=C$X+1}}C$_(C$s,"");var C$M=C$s.prototype;return C$M.getWith=function(C$s){var C$M=C$s?this.codes[C$s]:this.script;if(!C$M)throw"get with error:"+C$s;return C$M},C$M.getFunsScript=function(C$s){var C$M="";for(var C$T in this.funs)0<=C$s.indexOf(C$T+";")&&(C$M+=this.funs[C$T]);return C$M},C$s}()},C$P}(),C$ts=function(){function C$l(){}return C$_(C$l,"laya.webgl.WebGL"),C$l._uint8ArraySlice=function(){for(var C$s=this.length,C$M=new Uint8Array(this.length),C$T=0;C$T<C$s;C$T++)C$M[C$T]=this[C$T];return C$M},C$l._float32ArraySlice=function(){for(var C$s=this.length,C$M=new Float32Array(this.length),C$T=0;C$T<C$s;C$T++)C$M[C$T]=this[C$T];return C$M},C$l._uint16ArraySlice=function(C$s){var C$M,C$T=arguments,C$X=0,C$x=0;if(0===C$T.length)for(C$X=this.length,C$M=new Uint16Array(C$X),C$x=0;C$x<C$X;C$x++)C$M[C$x]=this[C$x];else if(2===C$T.length){var C$c=C$T[0],C$l=C$T[1];if(C$c<C$l)for(C$X=C$l-C$c,C$M=new Uint16Array(C$X),C$x=C$c;C$x<C$l;C$x++)C$M[C$x-C$c]=this[C$x];else C$M=new Uint16Array(0)}return C$M},C$l.expandContext=function(){var C$s=C$x.prototype,C$M=CanvasRenderingContext2D.prototype;C$M.fillTrangles=C$s.fillTrangles,C$as.__int__(null),C$M.setIBVB=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){void 0===C$E&&(C$E=0),void 0===C$O&&(C$O=0),null===C$T&&(this._ib=this._ib||C$Hs.QuadrangleIB,C$T=this._ib,C$gs.expandIBQuadrangle(C$T,C$X._byteLength/64+8)),this._setIBVB(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O)},C$M.fillTrangles=function(C$s,C$M,C$T,C$X,C$x){this._curMat=this._curMat||C$A.create(),this._vb=this._vb||C$ds.create(),this._ib||(this._ib=C$Hs.create(),C$gs.fillIBQuadrangle(this._ib,C$l/4));var C$c=this._vb,C$l=C$X.length>>4;C$gs.fillTranglesVB(C$c,C$M,C$T,C$X,C$x||this._curMat,0,0),C$gs.expandIBQuadrangle(this._ib,C$c._byteLength/64+8);var C$u=new C$ks(1,0);C$u.textureHost=C$s;var C$E=new C$is("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");C$c._vertType=3,this._setIBVB(C$M,C$T,this._ib,C$c,6*C$l,C$x,C$E,C$u,0,0)}},C$l.enable=function(){if(C$R.__init__(),C$f.isConchApp&&!C$f.isConchWebGL)return C$r.skinAniSprite=function(){return new C$ss},C$l.expandContext(),!1;if(C$r.getWebGLContext=function(C$s){for(var C$M,C$T=["webgl","experimental-webgl","webkit-3d","moz-webgl"],C$X=0;C$X<C$T.length;C$X++){try{C$M=C$s.getContext(C$T[C$X],{stencil:C$w.isStencil,alpha:C$w.isAlpha,antialias:C$w.isAntialias,premultipliedAlpha:C$w.premultipliedAlpha,preserveDrawingBuffer:C$w.preserveDrawingBuffer})}catch(C$s){}if(C$M)return C$M}return null},null==(C$l.mainContext=C$l.mainContext||C$r.getWebGLContext(C$f._mainCanvas)))return!1;if(C$f.isWebGL)return!0;C$G.create=function(C$s,C$M){return new C$sM(C$s,C$M)},C$g.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){return new C$Fs(C$s,C$M,C$T,C$X,C$x,C$c,C$l)},C$f.WebGL=C$l,C$f.isWebGL=!0,C$Rs.__init__(),C$r.createRenderSprite=function(C$s,C$M){return new C$As(C$s,C$M)},C$r.createWebGLContext2D=function(C$s){return new C$ws(C$s)},C$r.changeWebGLSize=function(C$s,C$M){laya.webgl.WebGL.onStageResize(C$s,C$M)},C$r.createGraphics=function(){return new C$Ns};var C$s=C$r.createFilterAction;return C$r.createFilterAction=C$s||function(C$s){return new C$Ds},C$r.clear=function(C$s){C$Js.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var C$M=C$f.context.ctx,C$T=0==C$M._submits._length||C$w.preserveDrawingBuffer?C$q.create(C$s)._color:C$v._wgColor;C$T&&C$M.clearBG(C$T[0],C$T[1],C$T[2],C$T[3]),C$Js.clear()},C$r.addToAtlas=function(C$s,C$M){void 0===C$M&&(C$M=!1);var C$T=C$s.bitmap;C$f.optimizeTextureMemory(C$s.url,C$s)?C$N.__typeof(C$T,"laya.webgl.resource.IMergeAtlasBitmap")&&C$T.allowMerageInAtlas&&C$T.on("recovered",C$s,C$s.addTextureToAtlas):C$T.enableMerageInAtlas=!1},C$r.isAtlas=function(C$s){return C$s instanceof laya.webgl.atlas.AtlasWebGLCanvas},C$b._enable(),C$r.beginFlush=function(){for(var C$s=C$b.instance,C$M=C$s.getAtlaserCount(),C$T=0;C$T<C$M;C$T++){var C$X=C$s.getAtlaserByIndex(C$T).texture;C$X._flashCacheImageNeedFlush&&C$r.flashFlushImage(C$X)}},C$r.drawToCanvas=function(C$s,C$M,C$T,C$X,C$x,C$c){(C$T<=0||C$X<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),C$T|=0,C$X|=0,C$x|=0,C$c|=0;var C$l=C$Is.create(C$T,C$X,6408,5121,0,!1);C$l.start(),C$l.clear(0,0,0,0),C$f.context.clear(),C$J.renders[C$M]._fun(C$s,C$f.context,C$x,C$Js.height-C$X+C$c),C$f.context.flush(),C$l.end();var C$u=C$l.getData(0,0,C$T,C$X);if(C$l.recycle(),C$u.byteLength==C$T*C$X*4){var C$E=new C$Zs;C$E._canvas=C$R.createElement("canvas"),C$E.size(C$T,C$X);var C$O=C$E._canvas.getContext("2d");C$R.canvas.size(C$T,C$X);var C$U=C$R.context,C$p=C$U.createImageData(C$T,C$X);return C$p.data.set(new Uint8ClampedArray(C$u.buffer)),C$E._imgData=C$p,C$U.putImageData(C$p,0,0),C$O.save(),C$O.translate(0,C$X),C$O.scale(1,-1),C$O.drawImage(C$R.canvas.source,0,0),C$O.restore(),C$E}console.log("drawToCanvas error: w:"+C$T+",h:"+C$X+",datalen:"+C$u.byteLength)},C$r.createFilterAction=function(C$s){var C$M;switch(C$s){case 32:C$M=new C$Ds}return C$M},C$r.addTextureToAtlas=function(C$s){C$s._uvID++,C$b._atlasRestore++,C$s.bitmap.enableMerageInAtlas&&C$b.instance.addToAtlas(C$s)},C$r.getTexturePixels=function(C$s,C$M,C$T,C$X,C$x){C$f.context.ctx.clear();var C$c=new C$Q;C$c.graphics.drawTexture(C$s,-C$M,-C$T);var C$l=C$Is.create(C$X,C$x);C$l.start(),C$l.clear(0,0,0,0),C$c.render(C$f.context,0,0),C$f.context.ctx.flush(),C$l.end();for(var C$u=C$l.getData(0,0,C$X,C$x),C$E=[],C$O=0,C$U=C$x-1;0<=C$U;C$U--)for(var C$p=0;C$p<C$X;C$p++)C$O=4*(C$U*C$X+C$p),C$E.push(C$u[C$O]),C$E.push(C$u[C$O+1]),C$E.push(C$u[C$O+2]),C$E.push(C$u[C$O+3]);return C$E},C$r.skinAniSprite=function(){return new C$ss},C$O.create=function(C$s,C$M){var C$T=new C$Zs;return C$T._imgData=C$M,C$T.flipY=!1,C$T},C$k._filterStart=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$s.getValue("bounds"),C$l=C$Is.create(C$c.width,C$c.height);if(C$l.start(),C$l.clear(0,0,0,0),C$s.addValue("src",C$l),C$s.addValue("ScissorTest",C$Js.worldScissorTest),C$Js.worldScissorTest){var C$u=new C$h;C$u.copyFrom(C$T.ctx._clipRect),C$s.addValue("clipRect",C$u),C$Js.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},C$k._filterEnd=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$s.getValue("bounds");C$s.getValue("src").end();var C$l=C$Is.create(C$c.width,C$c.height);C$l.start(),C$l.clear(0,0,0,0),C$s.addValue("out",C$l),C$M._set$P("_filterCache",C$l),C$M._set$P("_isHaveGlowFilter",C$s.getValue("_isHaveGlowFilter"))},C$k._EndTarget=function(C$s,C$M){if(C$s.getValue("src").recycle(),C$s.getValue("out").end(),C$s.getValue("ScissorTest")){C$Js.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),C$M.ctx.save();var C$T=C$s.getValue("clipRect");C$M.ctx.clipRect(C$T.x,C$T.y,C$T.width,C$T.height)}},C$k._useSrc=function(C$s){var C$M=C$s.getValue("out");C$M.end(),(C$M=C$s.getValue("src")).start(),C$M.clear(0,0,0,0)},C$k._endSrc=function(C$s){C$s.getValue("src").end()},C$k._useOut=function(C$s){var C$M=C$s.getValue("src");C$M.end(),(C$M=C$s.getValue("out")).start(),C$M.clear(0,0,0,0)},C$k._endOut=function(C$s){C$s.getValue("out").end()},C$k._recycleScope=function(C$s){C$s.recycle()},C$k._filter=function(C$s,C$M,C$T,C$X){var C$x=this._next;if(C$x){var C$c,C$l,C$u=C$s.filters,C$E=C$u.length;if(1==C$E&&32==C$u[0].type)return C$M.ctx.save(),C$M.ctx.setFilters([C$u[0]]),C$x._fun.call(C$x,C$s,C$M,C$T,C$X),void C$M.ctx.restore();var C$O=C$us.create(),C$U=C$D.TEMP,C$p=C$M.ctx._getTransformMatrix(),C$_=C$A.create();C$p.copyTo(C$_);var C$R=0,C$q=0,C$G=!1,C$g=C$s._$P._filterCache?C$s._$P._filterCache:null;if(!C$g||C$s._repaint){C$G=C$s._isHaveGlowFilter(),C$O.addValue("_isHaveGlowFilter",C$G),C$G&&(C$R=50,C$q=25),(C$l=new C$h).copyFrom(C$s.getSelfBounds()),C$l.x+=C$s.x,C$l.y+=C$s.y,C$l.x-=C$s.pivotX+4,C$l.y-=C$s.pivotY+4;var C$f=C$l.x,C$J=C$l.y;if(C$l.width+=C$R+8,C$l.height+=C$R+8,C$U.x=C$l.x*C$_.a+C$l.y*C$_.c,C$U.y=C$l.y*C$_.d+C$l.x*C$_.b,C$l.x=C$U.x,C$l.y=C$U.y,C$U.x=C$l.width*C$_.a+C$l.height*C$_.c,C$U.y=C$l.height*C$_.d+C$l.width*C$_.b,C$l.width=C$U.x,C$l.height=C$U.y,C$l.width<=0||C$l.height<=0)return;C$g&&C$g.recycle(),C$O.addValue("bounds",C$l);var C$P=C$ls.create([C$O,C$s,C$M,0,0],C$k._filterStart);C$M.addRenderObject(C$P),C$M.ctx._renderKey=0,C$M.ctx._shader2D.glTexture=null;var C$t=C$s.x-C$f+C$q,C$r=C$s.y-C$J+C$q;C$x._fun.call(C$x,C$s,C$M,C$t,C$r),C$P=C$ls.create([C$O,C$s,C$M,0,0],C$k._filterEnd),C$M.addRenderObject(C$P);for(var C$N=0;C$N<C$E;C$N++){0!=C$N&&(C$P=C$ls.create([C$O],C$k._useSrc),C$M.addRenderObject(C$P),C$c=C$ks.create(1,0),C$A.TEMP.identity(),C$M.ctx.drawTarget(C$O,0,0,C$l.width,C$l.height,C$A.TEMP,"out",C$c,null,C$S.TOINT.overlay),C$P=C$ls.create([C$O],C$k._useOut),C$M.addRenderObject(C$P)),C$u[C$N].action.apply3d(C$O,C$s,C$M,0,0)}C$P=C$ls.create([C$O,C$M],C$k._EndTarget),C$M.addRenderObject(C$P)}else{if((C$G=!!C$s._$P._isHaveGlowFilter&&C$s._$P._isHaveGlowFilter)&&(C$R=50,C$q=25),(C$l=C$s.getBounds()).width<=0||C$l.height<=0)return;C$l.width+=C$R,C$l.height+=C$R,C$U.x=C$l.x*C$_.a+C$l.y*C$_.c,C$U.y=C$l.y*C$_.d+C$l.x*C$_.b,C$l.x=C$U.x,C$l.y=C$U.y,C$U.x=C$l.width*C$_.a+C$l.height*C$_.c,C$U.y=C$l.height*C$_.d+C$l.width*C$_.b,C$l.width=C$U.x,C$l.height=C$U.y,C$O.addValue("out",C$g)}C$T=C$T-C$q-C$s.x,C$X=C$X-C$q-C$s.y,C$U.setTo(C$T,C$X),C$_.transformPoint(C$U),C$T=C$U.x+C$l.x,C$X=C$U.y+C$l.y,C$c=C$ks.create(1,0),C$A.TEMP.identity(),C$M.ctx.drawTarget(C$O,C$T,C$X,C$l.width,C$l.height,C$A.TEMP,"out",C$c,null,C$S.TOINT.overlay),C$P=C$ls.create([C$O],C$k._recycleScope),C$M.addRenderObject(C$P),C$_.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=C$l._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=C$l._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=C$l._uint8ArraySlice),!0},C$l.onStageResize=function(C$s,C$M){null!=C$l.mainContext&&(C$l.mainContext.viewport(0,0,C$s,C$M),C$Js.width=C$s,C$Js.height=C$M)},C$l.onInvalidGLRes=function(){C$b.instance.freeAll(),C$t.releaseContentManagers(!0),C$l.doNodeRepaint(C$N.stage),C$l.mainContext.viewport(0,0,C$Js.width,C$Js.height),C$N.stage.event("devicelost")},C$l.doNodeRepaint=function(C$s){0==C$s.numChildren&&C$s.repaint();for(var C$M=0;C$M<C$s.numChildren;C$M++)C$l.doNodeRepaint(C$s.getChildAt(C$M))},C$l.init=function(C$s,C$M,C$T){C$l.mainCanvas=C$s,C$O._createContext=function(C$s){return new C$ws(C$s)},C$Zs._createContext=function(C$s){return new C$ws(C$s)};var C$X=laya.webgl.WebGL.mainContext;if(null!=C$X.getShaderPrecisionFormat){var C$x=C$X.getShaderPrecisionFormat(35633,36338),C$c=C$X.getShaderPrecisionFormat(35632,36338);C$l.shaderHighPrecision=!(!C$x.precision||!C$c.precision)}else C$l.shaderHighPrecision=!1;if(C$l.compressAstc=C$X.getExtension("WEBGL_compressed_texture_astc"),C$l.compressAtc=C$X.getExtension("WEBGL_compressed_texture_atc"),C$l.compressEtc=C$X.getExtension("WEBGL_compressed_texture_etc"),C$l.compressEtc1=C$X.getExtension("WEBGL_compressed_texture_etc1"),C$l.compressPvrtc=C$X.getExtension("WEBGL_compressed_texture_pvrtc"),C$l.compressS3tc=C$X.getExtension("WEBGL_compressed_texture_s3tc"),C$l.compressS3tc_srgb=C$X.getExtension("WEBGL_compressed_texture_s3tc_srgb"),C$l.compressAstc=C$l.compressAstc?C$l.compressAstc:{},C$l.compressAtc=C$l.compressAtc?C$l.compressAtc:{},C$l.compressEtc=C$l.compressEtc?C$l.compressEtc:{},C$l.compressEtc1=C$l.compressEtc1?C$l.compressEtc1:{},C$l.compressPvrtc=C$l.compressPvrtc?C$l.compressPvrtc:{},C$l.compressS3tc=C$l.compressS3tc?C$l.compressS3tc:{},C$l.compressS3tc_srgb=C$l.compressS3tc_srgb?C$l.compressS3tc_srgb:{},C$X.deleteTexture1=C$X.deleteTexture,C$X.deleteTexture=function(C$s){C$s==C$rs.curBindTexValue&&(C$rs.curBindTexValue=null),C$X.deleteTexture1(C$s)},C$l.onStageResize(C$M,C$T),null==C$l.mainContext)throw new Error("webGL getContext err!");C$o.__init__(),C$b.__init__(),C$Qs.__init__(),C$cs.__init__(),C$ws.__init__(),C$ks.__init__(),C$H.__init__(),C$as.__int__(C$X),C$S._init_(C$X),C$f.isConchApp&&conch.setOnInvalidGLRes(C$l.onInvalidGLRes)},C$l.mainCanvas=null,C$l.antialias=!0,C$l.shaderHighPrecision=!1,C$l._bg_null=[0,0,0,0],C$l}(),C$rs=function(){function C$X(){}return C$_(C$X,"laya.webgl.WebGLContext"),C$X.UseProgram=function(C$s){return C$X._useProgram!==C$s&&(C$ts.mainContext.useProgram(C$s),C$X._useProgram=C$s,!0)},C$X.setDepthTest=function(C$s,C$M){C$M!==C$X._depthTest&&((C$X._depthTest=C$M)?C$s.enable(2929):C$s.disable(2929))},C$X.setDepthMask=function(C$s,C$M){C$M!==C$X._depthMask&&(C$X._depthMask=C$M,C$s.depthMask(C$M))},C$X.setDepthFunc=function(C$s,C$M){C$M!==C$X._depthFunc&&(C$X._depthFunc=C$M,C$s.depthFunc(C$M))},C$X.setBlend=function(C$s,C$M){C$M!==C$X._blend&&((C$X._blend=C$M)?C$s.enable(3042):C$s.disable(3042))},C$X.setBlendFunc=function(C$s,C$M,C$T){(C$M!==C$X._sFactor||C$T!==C$X._dFactor)&&(C$X._sFactor=C$M,C$X._dFactor=C$T,C$s.blendFunc(C$M,C$T))},C$X.setCullFace=function(C$s,C$M){C$M!==C$X._cullFace&&((C$X._cullFace=C$M)?C$s.enable(2884):C$s.disable(2884))},C$X.setFrontFace=function(C$s,C$M){C$M!==C$X._frontFace&&(C$X._frontFace=C$M,C$s.frontFace(C$M))},C$X.bindTexture=function(C$s,C$M,C$T){C$s.bindTexture(C$M,C$T),C$X.curBindTexTarget=C$M,C$X.curBindTexValue=C$T},C$X.DEPTH_BUFFER_BIT=256,C$X.STENCIL_BUFFER_BIT=1024,C$X.COLOR_BUFFER_BIT=16384,C$X.POINTS=0,C$X.LINES=1,C$X.LINE_LOOP=2,C$X.LINE_STRIP=3,C$X.TRIANGLES=4,C$X.TRIANGLE_STRIP=5,C$X.TRIANGLE_FAN=6,C$X.ZERO=0,C$X.ONE=1,C$X.SRC_COLOR=768,C$X.ONE_MINUS_SRC_COLOR=769,C$X.SRC_ALPHA=770,C$X.ONE_MINUS_SRC_ALPHA=771,C$X.DST_ALPHA=772,C$X.ONE_MINUS_DST_ALPHA=773,C$X.DST_COLOR=774,C$X.ONE_MINUS_DST_COLOR=775,C$X.SRC_ALPHA_SATURATE=776,C$X.FUNC_ADD=32774,C$X.BLEND_EQUATION=32777,C$X.BLEND_EQUATION_RGB=32777,C$X.BLEND_EQUATION_ALPHA=34877,C$X.FUNC_SUBTRACT=32778,C$X.FUNC_REVERSE_SUBTRACT=32779,C$X.BLEND_DST_RGB=32968,C$X.BLEND_SRC_RGB=32969,C$X.BLEND_DST_ALPHA=32970,C$X.BLEND_SRC_ALPHA=32971,C$X.CONSTANT_COLOR=32769,C$X.ONE_MINUS_CONSTANT_COLOR=32770,C$X.CONSTANT_ALPHA=32771,C$X.ONE_MINUS_CONSTANT_ALPHA=32772,C$X.BLEND_COLOR=32773,C$X.ARRAY_BUFFER=34962,C$X.ELEMENT_ARRAY_BUFFER=34963,C$X.ARRAY_BUFFER_BINDING=34964,C$X.ELEMENT_ARRAY_BUFFER_BINDING=34965,C$X.STREAM_DRAW=35040,C$X.STATIC_DRAW=35044,C$X.DYNAMIC_DRAW=35048,C$X.BUFFER_SIZE=34660,C$X.BUFFER_USAGE=34661,C$X.CURRENT_VERTEX_ATTRIB=34342,C$X.FRONT=1028,C$X.BACK=1029,C$X.CULL_FACE=2884,C$X.FRONT_AND_BACK=1032,C$X.BLEND=3042,C$X.DITHER=3024,C$X.STENCIL_TEST=2960,C$X.DEPTH_TEST=2929,C$X.SCISSOR_TEST=3089,C$X.POLYGON_OFFSET_FILL=32823,C$X.SAMPLE_ALPHA_TO_COVERAGE=32926,C$X.SAMPLE_COVERAGE=32928,C$X.NO_ERROR=0,C$X.INVALID_ENUM=1280,C$X.INVALID_VALUE=1281,C$X.INVALID_OPERATION=1282,C$X.OUT_OF_MEMORY=1285,C$X.CW=2304,C$X.CCW=2305,C$X.LINE_WIDTH=2849,C$X.ALIASED_POINT_SIZE_RANGE=33901,C$X.ALIASED_LINE_WIDTH_RANGE=33902,C$X.CULL_FACE_MODE=2885,C$X.FRONT_FACE=2886,C$X.DEPTH_RANGE=2928,C$X.DEPTH_WRITEMASK=2930,C$X.DEPTH_CLEAR_VALUE=2931,C$X.DEPTH_FUNC=2932,C$X.STENCIL_CLEAR_VALUE=2961,C$X.STENCIL_FUNC=2962,C$X.STENCIL_FAIL=2964,C$X.STENCIL_PASS_DEPTH_FAIL=2965,C$X.STENCIL_PASS_DEPTH_PASS=2966,C$X.STENCIL_REF=2967,C$X.STENCIL_VALUE_MASK=2963,C$X.STENCIL_WRITEMASK=2968,C$X.STENCIL_BACK_FUNC=34816,C$X.STENCIL_BACK_FAIL=34817,C$X.STENCIL_BACK_PASS_DEPTH_FAIL=34818,C$X.STENCIL_BACK_PASS_DEPTH_PASS=34819,C$X.STENCIL_BACK_REF=36003,C$X.STENCIL_BACK_VALUE_MASK=36004,C$X.STENCIL_BACK_WRITEMASK=36005,C$X.VIEWPORT=2978,C$X.SCISSOR_BOX=3088,C$X.COLOR_CLEAR_VALUE=3106,C$X.COLOR_WRITEMASK=3107,C$X.UNPACK_ALIGNMENT=3317,C$X.PACK_ALIGNMENT=3333,C$X.MAX_TEXTURE_SIZE=3379,C$X.MAX_VIEWPORT_DIMS=3386,C$X.SUBPIXEL_BITS=3408,C$X.RED_BITS=3410,C$X.GREEN_BITS=3411,C$X.BLUE_BITS=3412,C$X.ALPHA_BITS=3413,C$X.DEPTH_BITS=3414,C$X.STENCIL_BITS=3415,C$X.POLYGON_OFFSET_UNITS=10752,C$X.POLYGON_OFFSET_FACTOR=32824,C$X.TEXTURE_BINDING_2D=32873,C$X.SAMPLE_BUFFERS=32936,C$X.SAMPLES=32937,C$X.SAMPLE_COVERAGE_VALUE=32938,C$X.SAMPLE_COVERAGE_INVERT=32939,C$X.NUM_COMPRESSED_TEXTURE_FORMATS=34466,C$X.COMPRESSED_TEXTURE_FORMATS=34467,C$X.DONT_CARE=4352,C$X.FASTEST=4353,C$X.NICEST=4354,C$X.GENERATE_MIPMAP_HINT=33170,C$X.BYTE=5120,C$X.UNSIGNED_BYTE=5121,C$X.SHORT=5122,C$X.UNSIGNED_SHORT=5123,C$X.INT=5124,C$X.UNSIGNED_INT=5125,C$X.FLOAT=5126,C$X.DEPTH_COMPONENT=6402,C$X.ALPHA=6406,C$X.RGB=6407,C$X.RGBA=6408,C$X.LUMINANCE=6409,C$X.LUMINANCE_ALPHA=6410,C$X.UNSIGNED_SHORT_4_4_4_4=32819,C$X.UNSIGNED_SHORT_5_5_5_1=32820,C$X.UNSIGNED_SHORT_5_6_5=33635,C$X.FRAGMENT_SHADER=35632,C$X.VERTEX_SHADER=35633,C$X.MAX_VERTEX_ATTRIBS=34921,C$X.MAX_VERTEX_UNIFORM_VECTORS=36347,C$X.MAX_VARYING_VECTORS=36348,C$X.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,C$X.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,C$X.MAX_TEXTURE_IMAGE_UNITS=34930,C$X.MAX_FRAGMENT_UNIFORM_VECTORS=36349,C$X.SHADER_TYPE=35663,C$X.DELETE_STATUS=35712,C$X.LINK_STATUS=35714,C$X.VALIDATE_STATUS=35715,C$X.ATTACHED_SHADERS=35717,C$X.ACTIVE_UNIFORMS=35718,C$X.ACTIVE_ATTRIBUTES=35721,C$X.SHADING_LANGUAGE_VERSION=35724,C$X.CURRENT_PROGRAM=35725,C$X.NEVER=512,C$X.LESS=513,C$X.EQUAL=514,C$X.LEQUAL=515,C$X.GREATER=516,C$X.NOTEQUAL=517,C$X.GEQUAL=518,C$X.ALWAYS=519,C$X.KEEP=7680,C$X.REPLACE=7681,C$X.INCR=7682,C$X.DECR=7683,C$X.INVERT=5386,C$X.INCR_WRAP=34055,C$X.DECR_WRAP=34056,C$X.VENDOR=7936,C$X.RENDERER=7937,C$X.VERSION=7938,C$X.NEAREST=9728,C$X.LINEAR=9729,C$X.NEAREST_MIPMAP_NEAREST=9984,C$X.LINEAR_MIPMAP_NEAREST=9985,C$X.NEAREST_MIPMAP_LINEAR=9986,C$X.LINEAR_MIPMAP_LINEAR=9987,C$X.TEXTURE_MAG_FILTER=10240,C$X.TEXTURE_MIN_FILTER=10241,C$X.TEXTURE_WRAP_S=10242,C$X.TEXTURE_WRAP_T=10243,C$X.TEXTURE_2D=3553,C$X.TEXTURE=5890,C$X.TEXTURE_CUBE_MAP=34067,C$X.TEXTURE_BINDING_CUBE_MAP=34068,C$X.TEXTURE_CUBE_MAP_POSITIVE_X=34069,C$X.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,C$X.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,C$X.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,C$X.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,C$X.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,C$X.MAX_CUBE_MAP_TEXTURE_SIZE=34076,C$X.TEXTURE0=33984,C$X.TEXTURE1=33985,C$X.TEXTURE2=33986,C$X.TEXTURE3=33987,C$X.TEXTURE4=33988,C$X.TEXTURE5=33989,C$X.TEXTURE6=33990,C$X.TEXTURE7=33991,C$X.TEXTURE8=33992,C$X.TEXTURE9=33993,C$X.TEXTURE10=33994,C$X.TEXTURE11=33995,C$X.TEXTURE12=33996,C$X.TEXTURE13=33997,C$X.TEXTURE14=33998,C$X.TEXTURE15=33999,C$X.TEXTURE16=34e3,C$X.TEXTURE17=34001,C$X.TEXTURE18=34002,C$X.TEXTURE19=34003,C$X.TEXTURE20=34004,C$X.TEXTURE21=34005,C$X.TEXTURE22=34006,C$X.TEXTURE23=34007,C$X.TEXTURE24=34008,C$X.TEXTURE25=34009,C$X.TEXTURE26=34010,C$X.TEXTURE27=34011,C$X.TEXTURE28=34012,C$X.TEXTURE29=34013,C$X.TEXTURE30=34014,C$X.TEXTURE31=34015,C$X.ACTIVE_TEXTURE=34016,C$X.REPEAT=10497,C$X.CLAMP_TO_EDGE=33071,C$X.MIRRORED_REPEAT=33648,C$X.FLOAT_VEC2=35664,C$X.FLOAT_VEC3=35665,C$X.FLOAT_VEC4=35666,C$X.INT_VEC2=35667,C$X.INT_VEC3=35668,C$X.INT_VEC4=35669,C$X.BOOL=35670,C$X.BOOL_VEC2=35671,C$X.BOOL_VEC3=35672,C$X.BOOL_VEC4=35673,C$X.FLOAT_MAT2=35674,C$X.FLOAT_MAT3=35675,C$X.FLOAT_MAT4=35676,C$X.SAMPLER_2D=35678,C$X.SAMPLER_CUBE=35680,C$X.VERTEX_ATTRIB_ARRAY_ENABLED=34338,C$X.VERTEX_ATTRIB_ARRAY_SIZE=34339,C$X.VERTEX_ATTRIB_ARRAY_STRIDE=34340,C$X.VERTEX_ATTRIB_ARRAY_TYPE=34341,C$X.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,C$X.VERTEX_ATTRIB_ARRAY_POINTER=34373,C$X.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,C$X.COMPILE_STATUS=35713,C$X.LOW_FLOAT=36336,C$X.MEDIUM_FLOAT=36337,C$X.HIGH_FLOAT=36338,C$X.LOW_INT=36339,C$X.MEDIUM_INT=36340,C$X.HIGH_INT=36341,C$X.FRAMEBUFFER=36160,C$X.RENDERBUFFER=36161,C$X.RGBA4=32854,C$X.RGB5_A1=32855,C$X.RGB565=36194,C$X.DEPTH_COMPONENT16=33189,C$X.STENCIL_INDEX=6401,C$X.STENCIL_INDEX8=36168,C$X.DEPTH_STENCIL=34041,C$X.RENDERBUFFER_WIDTH=36162,C$X.RENDERBUFFER_HEIGHT=36163,C$X.RENDERBUFFER_INTERNAL_FORMAT=36164,C$X.RENDERBUFFER_RED_SIZE=36176,C$X.RENDERBUFFER_GREEN_SIZE=36177,C$X.RENDERBUFFER_BLUE_SIZE=36178,C$X.RENDERBUFFER_ALPHA_SIZE=36179,C$X.RENDERBUFFER_DEPTH_SIZE=36180,C$X.RENDERBUFFER_STENCIL_SIZE=36181,C$X.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,C$X.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,C$X.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,C$X.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,C$X.COLOR_ATTACHMENT0=36064,C$X.DEPTH_ATTACHMENT=36096,C$X.STENCIL_ATTACHMENT=36128,C$X.DEPTH_STENCIL_ATTACHMENT=33306,C$X.NONE=0,C$X.FRAMEBUFFER_COMPLETE=36053,C$X.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,C$X.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,C$X.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,C$X.FRAMEBUFFER_UNSUPPORTED=36061,C$X.FRAMEBUFFER_BINDING=36006,C$X.RENDERBUFFER_BINDING=36007,C$X.MAX_RENDERBUFFER_SIZE=34024,C$X.INVALID_FRAMEBUFFER_OPERATION=1286,C$X.UNPACK_FLIP_Y_WEBGL=37440,C$X.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,C$X.CONTEXT_LOST_WEBGL=37442,C$X.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,C$X.BROWSER_DEFAULT_WEBGL=37444,C$X._useProgram=null,C$X._depthTest=!0,C$X._depthMask=!0,C$X._blend=!1,C$X._cullFace=!1,C$X.curBindTexTarget=null,C$X.curBindTexValue=null,C$l(C$X,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),C$X}(),C$Ns=function(C$s){function C$M(){C$M.__super.call(this)}C$_(C$M,"laya.webgl.display.GraphicsGL",C$u);var C$T=C$M.prototype;return C$T.setShader=function(C$s){this._saveToCmd(C$f.context._setShader,[C$s])},C$T.setIBVB=function(C$s,C$M,C$T,C$X,C$x,C$c){this._saveToCmd(C$f.context._setIBVB,[C$s,C$M,C$T,C$X,C$x,C$c])},C$T.drawParticle=function(C$s,C$M,C$T){var C$X=C$r.createParticleTemplate2D(C$T);C$X.x=C$s,C$X.y=C$M,this._saveToCmd(C$f.context._drawParticle,[C$X])},C$M}(),C$ws=function(C$s){var C$T;function C$V(C$s){this._x=0,this._y=0,this._id=++C$V._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,C$V.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=C$V.MAXCLIPRECT,this.mOutPoint,this._canvas=C$s,this._canvas._addReference(),C$V._contextcount++,C$f.isFlash?(this._ib=C$Hs.create(35044),C$gs.fillIBQuadrangle(this._ib,16)):this._ib=C$Hs.QuadrangleIB,this.clear()}C$_(C$V,"laya.webgl.canvas.WebGLContext2D",C$x);var C$M=C$V.prototype;return C$M.setIsMainContext=function(){this._isMain=!0},C$M.clearBG=function(C$s,C$M,C$T,C$X){var C$x=C$ts.mainContext;C$x.clearColor(C$s,C$M,C$T,C$X),C$x.clear(16384)},C$M._getSubmits=function(){return this._submits},C$M._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var C$s=0,C$M=this._submits._length;C$s<C$M;C$s++)this._submits[C$s].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},C$M.destroy=function(){--C$V._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=C$Hs.QuadrangleIB&&this._ib.releaseResource()},C$M.clear=function(){this._submits||(this._other=C$T.DEFAULT,this._curMat=C$A.create(),this._vb=C$ds.create(-1),this._submits=[],this._save=[C$W.Create(this)],this._save.length=10,this._shader2D=new C$H,this._triangleMesh=C$ms.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=C$T.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=C$V.MAXCLIPRECT,this._curSubmit=C$cs.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=C$K.DEFAULT;for(var C$s=0,C$M=this._submits._length;C$s<C$M;C$s++)this._submits[C$s].releaseRender(),this._submits[C$s]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},C$M.size=function(C$s,C$M){if(this._width!=C$s||this._height!=C$M)if(0==C$s||0==C$M){0!=this._vb._byteLength&&(this._width=C$s,this._height=C$M,this._vb.clear(),this._vb.upload());for(var C$T=0,C$X=this._submits._length;C$T<C$X;C$T++)this._submits[C$T].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=C$s,this._height=C$M,this._targets&&this._targets.size(C$s,C$M),this._canvas.memorySize-=this._canvas.memorySize;0===C$s&&0===C$M&&this._releaseMem()},C$M._getTransformMatrix=function(){return this._curMat},C$M.translate=function(C$s,C$M){0===C$s&&0===C$M||(C$j.save(this),this._curMat.bTransform&&(C$a.save(this),this._curMat.transformPointN(C$D.TEMP.setTo(C$s,C$M)),C$s=C$D.TEMP.x,C$M=C$D.TEMP.y),this._x+=C$s,this._y+=C$M)},C$M.save=function(){this._save[this._save._length++]=C$W.Create(this)},C$M.restore=function(){var C$s=this._save._length;if(!(C$s<1))for(var C$M=C$s-1;0<=C$M;C$M--){var C$T=this._save[C$M];if(C$T.restore(this),C$T.isSaveMark())return void(this._save._length=C$M)}},C$M._fillText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){void 0===C$O&&(C$O=0);var C$U=this._shader2D,C$p=this._curSubmit.shaderValue,C$_=C$x?C$qs.create(C$x):this._other.font;if(C$b.enabled)C$U.ALPHA!==C$p.ALPHA&&(C$U.glTexture=null),C$Rs.drawText(this,C$s,C$M,this._curMat,C$_,C$E||this._other.textAlign,C$c,C$l,C$u,C$T,C$X,C$O);else{this._shader2D.defines.getValue();var C$R=C$c?C$q.create(C$c)._color:C$U.colorAdd;C$U.ALPHA===C$p.ALPHA&&C$R===C$U.colorAdd&&C$p.colorAdd===C$U.colorAdd||(C$U.glTexture=null,C$U.colorAdd=C$R),C$Rs.drawText(this,C$s,C$M,this._curMat,C$_,C$E||this._other.textAlign,C$c,C$l,C$u,C$T,C$X,C$O)}},C$M.fillWords=function(C$s,C$M,C$T,C$X,C$x,C$c){this._fillText(null,C$s,C$M,C$T,C$X,C$x,null,-1,null,C$c)},C$M.fillBorderWords=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._fillBorderText(null,C$s,C$M,C$T,C$X,C$x,C$c,C$l,null)},C$M.fillText=function(C$s,C$M,C$T,C$X,C$x,C$c){this._fillText(C$s,null,C$M,C$T,C$X,C$x,null,-1,C$c)},C$M.strokeText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._fillText(C$s,null,C$M,C$T,C$X,null,C$x,C$c||1,C$l)},C$M.fillBorderText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){this._fillBorderText(C$s,null,C$M,C$T,C$X,C$x,C$c,C$l,C$u)},C$M._fillBorderText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){if(!C$b.enabled)return this._fillText(C$s,C$M,C$T,C$X,C$x,null,C$l,C$u||1,C$E),void this._fillText(C$s,C$M,C$T,C$X,C$x,C$c,null,-1,C$E);var C$O=this._shader2D,C$U=this._curSubmit.shaderValue;C$O.ALPHA!==C$U.ALPHA&&(C$O.glTexture=null);var C$p=C$x?(C$V._fontTemp.setFont(C$x),C$V._fontTemp):this._other.font;C$Rs.drawText(this,C$s,C$M,this._curMat,C$p,C$E||this._other.textAlign,C$c,C$l,C$u||1,C$T,C$X,0)},C$M.fillRect=function(C$s,C$M,C$T,C$X,C$x){var C$c=this._vb;if(C$gs.fillRectImgVb(C$c,this._clipRect,C$s,C$M,C$T,C$X,C$m.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var C$l=this._shader2D.fillStyle;C$x&&(this._shader2D.fillStyle=C$K.create(C$x));var C$u=this._shader2D,C$E=this._curSubmit.shaderValue;if(C$u.fillStyle!==C$E.fillStyle||C$u.ALPHA!==C$E.ALPHA){C$u.glTexture=null;var C$O=this._curSubmit=C$cs.createSubmit(this,this._ib,C$c,(C$c._byteLength-64)/32*3,C$ks.create(2,0));C$O.shaderValue.color=C$u.fillStyle._color._color,C$O.shaderValue.ALPHA=C$u.ALPHA,this._submits[this._submits._length++]=C$O}this._curSubmit._numEle+=6,this._shader2D.fillStyle=C$l}},C$M.fillTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){if(C$s.loaded&&C$s.bitmap&&C$s.source){var C$E=this._vb,C$O=C$s.bitmap.width,C$U=C$s.bitmap.height,C$p=C$s.uv,C$_=C$l.x%C$s.width,C$R=C$l.y%C$s.height;if(C$O!=C$u.w||C$U!=C$u.h){if(!C$u.w&&!C$u.h)switch(C$u.oy=C$u.ox=0,C$c){case"repeat":C$u.width=C$X,C$u.height=C$x;break;case"repeat-x":C$u.width=C$X,C$R<0?C$s.height+C$R>C$x?C$u.height=C$x:C$u.height=C$s.height+C$R:(C$u.oy=C$R,C$s.height+C$R>C$x?C$u.height=C$x-C$R:C$u.height=C$s.height);break;case"repeat-y":C$_<0?C$s.width+C$_>C$X?C$u.width=C$X:C$u.width=C$s.width+C$_:(C$u.ox=C$_,C$s.width+C$_>C$X?C$u.width=C$X-C$_:C$u.width=C$s.width),C$u.height=C$x;break;case"no-repeat":C$_<0?C$s.width+C$_>C$X?C$u.width=C$X:C$u.width=C$s.width+C$_:(C$u.ox=C$_,C$s.width+C$_>C$X?C$u.width=C$X-C$_:C$u.width=C$s.width),C$R<0?C$s.height+C$R>C$x?C$u.height=C$x:C$u.height=C$s.height+C$R:(C$u.oy=C$R,C$s.height+C$R>C$x?C$u.height=C$x-C$R:C$u.height=C$s.height);break;default:C$u.width=C$X,C$u.height=C$x}C$u.w=C$O,C$u.h=C$U,C$u.uv=[0,0,C$u.width/C$O,0,C$u.width/C$O,C$u.height/C$U,0,C$u.height/C$U]}if(C$M+=C$u.ox,C$T+=C$u.oy,C$_-=C$u.ox,C$R-=C$u.oy,C$gs.fillRectImgVb(C$E,this._clipRect,C$M,C$T,C$u.width,C$u.height,C$u.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var C$q=C$Cs.create(this,this._ib,C$E,(C$E._byteLength-64)/32*3,C$ks.create(256,0)),C$G=(this._submits[this._submits._length++]=C$q).shaderValue;C$G.textureHost=C$s;var C$g=C$p[0]*C$O,C$f=C$p[1]*C$U,C$J=(C$p[2]-C$p[0])*C$O,C$P=(C$p[5]-C$p[3])*C$U,C$t=-C$_/C$O,C$r=-C$R/C$U;C$G.u_TexRange[0]=C$g/C$O,C$G.u_TexRange[1]=C$J/C$O,C$G.u_TexRange[2]=C$f/C$U,C$G.u_TexRange[3]=C$P/C$U,C$G.u_offset[0]=C$t,C$G.u_offset[1]=C$r,C$b.enabled&&!this._isMain&&C$q.addTexture(C$s,(C$E._byteLength>>2)-16),(this._curSubmit=C$q)._renderType=10017,C$q._numEle+=6}}else this.sprite&&C$N.timer.callLater(this,this._repaintSprite)},C$M.setShader=function(C$s){C$n.save(this,1048576,this._shader2D,!0),this._shader2D.shader=C$s},C$M.setFilters=function(C$s){C$n.save(this,2097152,this._shader2D,!0),this._shader2D.filters=C$s,this._curSubmit=C$cs.RENDERBASE,this._renderKey=0,this._drawCount++},C$M.drawTexture=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._drawTextureM(C$s,C$M,C$T,C$X,C$x,C$c,C$l,null,1)},C$M.addTextureVb=function(C$s,C$M,C$T){var C$X=this._curSubmit._vb||this._vb,C$x=C$X._byteLength>>2;C$X.byteLength=C$x+16<<2;for(var C$c=C$X.getFloat32Array(),C$l=0;C$l<16;C$l+=4)C$c[C$x++]=C$s[C$l]+C$M,C$c[C$x++]=C$s[C$l+1]+C$T,C$c[C$x++]=C$s[C$l+2],C$c[C$x++]=C$s[C$l+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),C$X._upload=!0},C$M.willDrawTexture=function(C$s,C$M){if(!(C$s.loaded&&C$s.bitmap&&C$s.source))return this.sprite&&C$N.timer.callLater(this,this._repaintSprite),0;var C$T=C$s.bitmap,C$X=C$T.id+this._shader2D.ALPHA*C$M+10016;if(C$X==this._renderKey)return C$X;var C$x=this._shader2D,C$c=C$x.ALPHA,C$l=this._curSubmit.shaderValue;C$x.ALPHA*=C$M,this._renderKey=C$X,this._drawCount++,C$x.glTexture=C$T;var C$u=this._vb,C$E=null,C$O=C$u._byteLength/32*3,C$U=C$l.textureHost&&C$l.textureHost==C$s&&C$l.textureHost.alphaTexture==C$s.alphaTexture;return C$E=C$Cs.create(this,this._ib,C$u,C$O,C$ks.create(1,0)),(this._submits[this._submits._length++]=C$E).shaderValue.textureHost=C$s,C$E._renderType=10016,C$E._preIsSameTextureShader=10016===this._curSubmit._renderType&&C$x.ALPHA===C$l.ALPHA&&C$U,this._curSubmit=C$E,C$x.ALPHA=C$c,C$X},C$M.drawTextures=function(C$s,C$M,C$T,C$X){if(C$s.loaded&&C$s.bitmap&&C$s.source){var C$x=this._clipRect;if(this._clipRect=C$V.MAXCLIPRECT,this._drawTextureM(C$s,C$M[0],C$M[1],C$s.width,C$s.height,C$T,C$X,null,1)){if(this._clipRect=C$x,C$z.drawCall++,!(C$M.length<4)){for(var C$c=this._curSubmit._vb||this._vb,C$l=this._curMat.a,C$u=this._curMat.d,C$E=2,C$O=C$M.length;C$E<C$O;C$E+=2)C$gs.copyPreImgVb(C$c,(C$M[C$E]-C$M[C$E-2])*C$l,(C$M[C$E+1]-C$M[C$E-1])*C$u),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&C$N.timer.callLater(this,this._repaintSprite)},C$M._drawTextureM=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){if(!C$s.loaded||!C$s.source)return this.sprite&&C$N.timer.callLater(this,this._repaintSprite),!1;var C$O=this._curSubmit._vb||this._vb,C$U=C$s.bitmap;C$M+=C$c,C$T+=C$l,this._drawCount++;var C$p=C$U.id+this._shader2D.ALPHA*C$E+10016;if(C$p!=this._renderKey){this._renderKey=C$p;var C$_=this._curSubmit.shaderValue,C$R=this._shader2D,C$q=C$R.ALPHA;C$R.ALPHA*=C$E,C$R.glTexture=C$U;var C$G=this._vb,C$g=null,C$f=C$G._byteLength/32*3,C$J=C$_.textureHost&&C$_.textureHost==C$s&&C$_.textureHost.alphaTexture==C$s.alphaTexture;C$g=C$Cs.create(this,this._ib,C$G,C$f,C$ks.create(1,0)),(this._submits[this._submits._length++]=C$g).shaderValue.textureHost=C$s,C$g._renderType=10016,C$g._preIsSameTextureShader=10016===this._curSubmit._renderType&&C$R.ALPHA===C$_.ALPHA&&C$J,this._curSubmit=C$g,C$O=this._curSubmit._vb||this._vb,C$R.ALPHA=C$q}return!!C$gs.fillRectImgVb(C$O,this._clipRect,C$M,C$T,C$X||C$s.width,C$x||C$s.height,C$s.uv,C$u||this._curMat,this._x,this._y,0,0)&&(C$b.enabled&&!this._isMain&&this._curSubmit.addTexture(C$s,(C$O._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},C$M._repaintSprite=function(){this.sprite&&this.sprite.repaint()},C$M._drawText=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){var C$U=C$s.bitmap;this._drawCount++;var C$p=C$U.id+this._shader2D.ALPHA+10016;if(C$p!=this._renderKey){this._renderKey=C$p;var C$_=this._curSubmit.shaderValue,C$R=this._shader2D;C$R.glTexture=C$U;var C$q=this._vb,C$G=null,C$g=C$q._byteLength/32*3,C$f=C$_.textureHost&&C$_.textureHost==C$s&&C$_.textureHost.alphaTexture==C$s.alphaTexture;(C$G=C$b.enabled?C$Cs.create(this,this._ib,C$q,C$g,C$ks.create(1,0)):C$Cs.create(this,this._ib,C$q,C$g,C$js.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&C$R.ALPHA===C$_.ALPHA&&C$f,(this._submits[this._submits._length++]=C$G).shaderValue.textureHost=C$s,C$G._renderType=10016,this._curSubmit=C$G}C$s.active();var C$J=this._curSubmit._vb||this._vb;C$gs.fillRectImgVb(C$J,this._clipRect,C$M+C$l,C$T+C$u,C$X||C$s.width,C$x||C$s.height,C$s.uv,C$c||this._curMat,this._x,this._y,C$E,C$O,!0)&&(C$b.enabled&&!this._isMain&&this._curSubmit.addTexture(C$s,(C$J._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},C$M.drawTextureWithTransform=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){if(C$c){var C$O=this._curMat,C$U=this._x,C$p=this._y;(0!==C$l||0!==C$u)&&(this._x=C$l*C$O.a+C$u*C$O.c,this._y=C$u*C$O.d+C$l*C$O.b),C$c&&C$O.bTransform?(C$A.mul(C$c,C$O,C$V._tmpMatrix),(C$c=C$V._tmpMatrix)._checkTransform()):(this._x+=C$O.tx,this._y+=C$O.ty),this._drawTextureM(C$s,C$M,C$T,C$X,C$x,0,0,C$c,C$E),this._x=C$U,this._y=C$p}else this._drawTextureM(C$s,C$M,C$T,C$X,C$x,C$l,C$u,null,C$E)},C$M.fillQuadrangle=function(C$s,C$M,C$T,C$X,C$x){var C$c=this._curSubmit,C$l=this._vb,C$u=this._shader2D,C$E=C$c.shaderValue;if(this._renderKey=0,C$s.bitmap){var C$O=C$s.bitmap;C$u.glTexture==C$O&&C$u.ALPHA===C$E.ALPHA||(C$u.glTexture=C$O,(C$c=this._curSubmit=C$cs.createSubmit(this,this._ib,C$l,C$l._byteLength/32*3,C$ks.create(1,0))).shaderValue.glTexture=C$O,this._submits[this._submits._length++]=C$c),C$gs.fillQuadrangleImgVb(C$l,C$M,C$T,C$X,C$s.uv,C$x||this._curMat,this._x,this._y)}else C$c.shaderValue.fillStyle&&C$c.shaderValue.fillStyle.equal(C$s)&&C$u.ALPHA===C$E.ALPHA||(C$u.glTexture=null,(C$c=this._curSubmit=C$cs.createSubmit(this,this._ib,C$l,C$l._byteLength/32*3,C$ks.create(2,0))).shaderValue.defines.add(2),C$c.shaderValue.fillStyle=C$K.create(C$s),this._submits[this._submits._length++]=C$c),C$gs.fillQuadrangleImgVb(C$l,C$M,C$T,C$X,C$m.DEF_UV,C$x||this._curMat,this._x,this._y);C$c._numEle+=6},C$M.drawTexture2=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){if(0!=C$c){var C$E=this._curMat;if(this._x=C$s*C$E.a+C$M*C$E.c,this._y=C$M*C$E.d+C$s*C$E.b,C$x&&(C$x=C$E.bTransform||C$x.bTransform?(C$A.mul(C$x,C$E,C$V._tmpMatrix),C$V._tmpMatrix):(this._x+=C$x.tx+C$E.tx,this._y+=C$x.ty+C$E.ty,C$A.EMPTY)),1!==C$c||C$l){var C$O=this._shader2D.ALPHA,C$U=this._nBlendType;this._shader2D.ALPHA=C$c,C$l&&(this._nBlendType=C$S.TOINT(C$l)),this._drawTextureM(C$u[0],C$u[1]-C$T,C$u[2]-C$X,C$u[3],C$u[4],0,0,C$x,1),this._shader2D.ALPHA=C$O,this._nBlendType=C$U}else this._drawTextureM(C$u[0],C$u[1]-C$T,C$u[2]-C$X,C$u[3],C$u[4],0,0,C$x,1);this._x=this._y=0}},C$M.drawCanvas=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$s.context;if(this._renderKey=0,C$c._targets)this._submits[this._submits._length++]=C$os.create(C$c,0,null),this._curSubmit=C$cs.RENDERBASE,C$c._targets.drawTo(this,C$M,C$T,C$X,C$x);else{var C$l=this._submits[this._submits._length++]=C$os.create(C$c,this._shader2D.ALPHA,this._shader2D.filters),C$u=C$X/C$s.width,C$E=C$x/C$s.height,C$O=C$l._matrix;this._curMat.copyTo(C$O),1!=C$u&&1!=C$E&&C$O.scale(C$u,C$E);var C$U=C$O.tx,C$p=C$O.ty;C$O.tx=C$O.ty=0,C$O.transformPoint(C$D.TEMP.setTo(C$M,C$T)),C$O.translate(C$D.TEMP.x+C$U,C$D.TEMP.y+C$p),this._curSubmit=C$cs.RENDERBASE}C$w.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=C$c._targets?"yellow":"green",this.strokeRect(C$M-1,C$T-1,C$X+2,C$x+2,1),this.strokeRect(C$M,C$T,C$X,C$x,1),this.restore())},C$M.drawTarget=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){void 0===C$O&&(C$O=-1);var C$U=this._vb;if(C$gs.fillRectImgVb(C$U,this._clipRect,C$M,C$T,C$X,C$x,C$E||C$m.DEF_UV,C$c||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var C$p=this._curSubmit=C$ps.create(this,this._ib,C$U,(C$U._byteLength-64)/32*3,C$u,C$l);C$p.blendType=-1==C$O?this._nBlendType:C$O,C$p.scope=C$s,this._submits[this._submits._length++]=C$p,this._curSubmit._numEle+=6}},C$M.mixRGBandAlpha=function(C$s){return this._mixRGBandAlpha(C$s,this._shader2D.ALPHA)},C$M._mixRGBandAlpha=function(C$s,C$M){var C$T=(4278190080&C$s)>>>24;return 0!=C$T?C$T*=C$M:C$T=255*C$M,16777215&C$s|C$T<<24},C$M.drawTriangles=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){if(!C$s.loaded||!C$s.source)return this.sprite&&C$N.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;C$s.bitmap;var C$U=this._mixRGBandAlpha(4294967295,C$u),C$p=(C$X.length,C$c.length);this._renderKey=-1;var C$_=this._curSubmit=C$Cs.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,C$ks.create(1,0));return C$_.shaderValue.textureHost=C$s,C$_._renderType=10016,this._submits[this._submits._length++]=C$_,C$l?(C$V._tmpMatrix.a=C$l.a,C$V._tmpMatrix.b=C$l.b,C$V._tmpMatrix.c=C$l.c,C$V._tmpMatrix.d=C$l.d,C$V._tmpMatrix.tx=C$l.tx+C$M,C$V._tmpMatrix.ty=C$l.ty+C$T,C$A.mul(C$V._tmpMatrix,this._curMat,C$V._tmpMatrix)):(C$V._tmpMatrix.a=this._curMat.a,C$V._tmpMatrix.b=this._curMat.b,C$V._tmpMatrix.c=this._curMat.c,C$V._tmpMatrix.d=this._curMat.d,C$V._tmpMatrix.tx=this._curMat.tx+C$M,C$V._tmpMatrix.ty=this._curMat.ty+C$T),this._triangleMesh.addData(C$X,C$x,C$c,C$V._tmpMatrix,C$U,this),this._curSubmit._numEle+=C$p,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},C$M.transform=function(C$s,C$M,C$T,C$X,C$x,C$c){C$a.save(this),C$A.mul(C$A.TEMP.setTo(C$s,C$M,C$T,C$X,C$x,C$c),this._curMat,this._curMat),this._curMat._checkTransform()},C$M.setTransformByMatrix=function(C$s){C$s.copyTo(this._curMat)},C$M.transformByMatrix=function(C$s){C$a.save(this),C$A.mul(C$s,this._curMat,this._curMat),this._curMat._checkTransform()},C$M.rotate=function(C$s){C$a.save(this),this._curMat.rotateEx(C$s)},C$M.scale=function(C$s,C$M){C$a.save(this),this._curMat.scaleEx(C$s,C$M)},C$M.clipRect=function(C$s,C$M,C$T,C$X){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var C$x=C$Us.create(4);this.addRenderObject(C$x);var C$c=this._vb,C$l=C$c._byteLength>>2;if(C$gs.fillRectImgVb(C$c,null,C$s,C$M,C$T,C$X,C$m.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var C$u=this._curSubmit=C$cs.createSubmit(this,this._ib,C$c,(C$c._byteLength-64)/32*3,C$ks.create(2,0));C$u.shaderValue.ALPHA=1,this._submits[this._submits._length++]=C$u,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var C$E=C$Us.create(5);this.addRenderObject(C$E);var C$O=C$c.getFloat32Array(),C$U=Math.min(Math.min(Math.min(C$O[0+C$l],C$O[4+C$l]),C$O[8+C$l]),C$O[12+C$l]),C$p=Math.max(Math.max(Math.max(C$O[0+C$l],C$O[4+C$l]),C$O[8+C$l]),C$O[12+C$l]),C$_=Math.min(Math.min(Math.min(C$O[1+C$l],C$O[5+C$l]),C$O[9+C$l]),C$O[13+C$l]),C$R=Math.max(Math.max(Math.max(C$O[1+C$l],C$O[5+C$l]),C$O[9+C$l]),C$O[13+C$l]);C$F.save(this,C$E,C$s,C$M,C$T,C$X,C$U,C$_,C$p-C$U,C$R-C$_),this._curSubmit=C$cs.RENDERBASE}else{C$T*=this._curMat.a,C$X*=this._curMat.d;var C$q=C$D.TEMP;this._curMat.transformPoint(C$q.setTo(C$s,C$M)),C$T<0&&(C$q.x=C$q.x+C$T,C$T=-C$T),C$X<0&&(C$q.y=C$q.y+C$X,C$X=-C$X),this._renderKey=0;var C$G=this._curSubmit=C$Os.create(this);(this._submits[this._submits._length++]=C$G).submitIndex=this._submits._length,C$G.submitLength=9999999,C$$.save(this,C$G);var C$g=this._clipRect,C$f=C$g.x,C$J=C$g.y,C$P=C$q.x+C$T,C$t=C$q.y+C$X;C$f<C$q.x&&(C$g.x=C$q.x),C$J<C$q.y&&(C$g.y=C$q.y),C$g.width=Math.min(C$P,C$f+C$g.width)-C$g.x,C$g.height=Math.min(C$t,C$J+C$g.height)-C$g.y,this._shader2D.glTexture=null,C$G.clipRect.copyFrom(C$g),this._curSubmit=C$cs.RENDERBASE}},C$M.setIBVB=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U){if(void 0===C$E&&(C$E=0),void 0===C$O&&(C$O=0),void 0===C$U&&(C$U=0),null===C$T){if(C$f.isFlash){var C$p=C$X;C$p._selfIB||(C$p._selfIB=C$Hs.create(35044)),C$p._selfIB.clear(),C$T=C$p._selfIB}else C$T=this._ib;C$gs.expandIBQuadrangle(C$T,C$X._byteLength/(4*C$X.vertexStride*4))}if(!C$u||!C$l)throw Error("setIBVB must input:shader shaderValues");var C$_=C$Es.create(this,C$X,C$T,C$x,C$l,C$u,C$E,C$O,C$U);C$c||(C$c=C$A.EMPTY),C$c.translate(C$s,C$M),C$A.mul(C$c,this._curMat,C$_._mat),C$c.translate(-C$s,-C$M),this._submits[this._submits._length++]=C$_,this._curSubmit=C$cs.RENDERBASE,this._renderKey=0},C$M.addRenderObject=function(C$s){this._submits[this._submits._length++]=C$s},C$M.fillTrangles=function(C$s,C$M,C$T,C$X,C$x){var C$c=this._curSubmit,C$l=this._vb,C$u=this._shader2D,C$E=C$c.shaderValue,C$O=C$X.length>>4,C$U=C$s.bitmap;this._renderKey=0,C$u.glTexture==C$U&&C$u.ALPHA===C$E.ALPHA||((C$c=this._curSubmit=C$cs.createSubmit(this,this._ib,C$l,C$l._byteLength/32*3,C$ks.create(1,0))).shaderValue.textureHost=C$s,this._submits[this._submits._length++]=C$c),C$gs.fillTranglesVB(C$l,C$M,C$T,C$X,C$x||this._curMat,this._x,this._y),C$c._numEle+=6*C$O},C$M.submitElement=function(C$s,C$M){var C$T=this._submits;for(C$M<0&&(C$M=C$T._length);C$s<C$M;)C$s+=C$T[C$s].renderSubmit()},C$M.finish=function(){C$ts.mainContext.finish()},C$M.flush=function(){var C$s=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(C$s>this._ib.bufferLength/12&&C$gs.expandIBQuadrangle(this._ib,C$s),!this._isMain&&C$b.enabled&&C$b._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=C$b._atlasRestore;for(var C$M=this._submits,C$T=0,C$X=C$M._length;C$T<C$X;C$T++){var C$x=C$M[C$T];10016===C$x.getRenderType()&&C$x.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),C$Ms.instance&&C$Ms.getInstance().reset();var C$c;for(C$T=0,C$c=this.meshlist.length;C$T<C$c;C$T++){var C$l=this.meshlist[C$T];C$l.canReuse?C$l.releaseMesh():C$l.destroy()}return this.meshlist.length=0,this._curSubmit=C$cs.RENDERBASE,this._renderKey=0,this._triangleMesh=C$ms.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},C$M.setPathId=function(C$s){if(this.mId=C$s,-1!=this.mId){this.mHaveKey=!1;var C$M=C$I.getInstance();C$M.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,C$M.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},C$M.movePath=function(C$s,C$M){var C$T=C$s,C$X=C$M;C$s=this._curMat.a*C$T+this._curMat.c*C$X+this._curMat.tx,C$M=this._curMat.b*C$T+this._curMat.d*C$X+this._curMat.ty,this.mX+=C$s,this.mY+=C$M},C$M.beginPath=function(){var C$s=this._getPath();C$s.tempArray.length=0,C$s.closePath=!1,this.mX=0,this.mY=0},C$M.closePath=function(){this._path.closePath=!0},C$M.fill=function(C$s){void 0===C$s&&(C$s=!1);var C$M=this._getPath();this.drawPoly(0,0,C$M.tempArray,this.fillStyle._color.numColor,0,0,C$s)},C$M.stroke=function(){var C$s=this._getPath();if(0<this.lineWidth){if(-1==this.mId)C$s.drawLine(0,0,C$s.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var C$M=C$I.getInstance().shapeLineDic[this.mId];C$M.rebuild(C$s.tempArray),C$s.setGeomtry(C$M)}else C$I.getInstance().addLine(this.mId,C$s.drawLine(0,0,C$s.tempArray,this.lineWidth,this.strokeStyle._color.numColor));C$s.update();var C$T=[this.mX,this.mY],C$X=C$cs.createShape(this,C$s.ib,C$s.vb,C$s.count,C$s.offset,C$ks.create(4,0));C$X.shaderValue.ALPHA=this._shader2D.ALPHA,C$X.shaderValue.u_pos=C$T,C$X.shaderValue.u_mmat2=C$Js.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=C$X,this._renderKey=-1}},C$M.line=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=this._curSubmit,C$u=this._vb;if(C$gs.fillLineVb(C$u,this._clipRect,C$s,C$M,C$T,C$X,C$x,C$c)){this._renderKey=0;var C$E=this._shader2D,C$O=C$l.shaderValue;C$E.strokeStyle===C$O.strokeStyle&&C$E.ALPHA===C$O.ALPHA||(C$E.glTexture=null,(C$l=this._curSubmit=C$cs.createSubmit(this,this._ib,C$u,(C$u._byteLength-64)/32*3,C$ks.create(2,0))).shaderValue.strokeStyle=C$E.strokeStyle,C$l.shaderValue.mainID=2,C$l.shaderValue.ALPHA=C$E.ALPHA,this._submits[this._submits._length++]=C$l),C$l._numEle+=6}},C$M.moveTo=function(C$s,C$M,C$T){void 0===C$T&&(C$T=!0);var C$X=this._getPath();if(C$T){var C$x=C$s,C$c=C$M;C$s=this._curMat.a*C$x+this._curMat.c*C$c,C$M=this._curMat.b*C$x+this._curMat.d*C$c}C$X.addPoint(C$s,C$M)},C$M.lineTo=function(C$s,C$M,C$T){void 0===C$T&&(C$T=!0);var C$X=this._getPath();if(C$T){var C$x=C$s,C$c=C$M;C$s=this._curMat.a*C$x+this._curMat.c*C$c,C$M=this._curMat.b*C$x+this._curMat.d*C$c}C$X.addPoint(C$s,C$M)},C$M.drawCurves=function(C$s,C$M,C$T){this.setPathId(-1),this.beginPath(),this.strokeStyle=C$T[3],this.lineWidth=C$T[4];var C$X=C$T[2];C$s+=C$T[0],C$M+=C$T[1],this.movePath(C$s,C$M),this.moveTo(C$X[0],C$X[1]);for(var C$x=2,C$c=C$X.length;C$x<C$c;)this.quadraticCurveTo(C$X[C$x++],C$X[C$x++],C$X[C$x++],C$X[C$x++]);this.stroke()},C$M.arcTo=function(C$s,C$M,C$T,C$X,C$x){if(-1==this.mId||!this.mHaveKey){var C$c=0,C$l=0,C$u=0,C$E=this._getPath();this._curMat.copyTo(C$V._tmpMatrix),C$V._tmpMatrix.tx=C$V._tmpMatrix.ty=0,C$V._tempPoint.setTo(C$E.getEndPointX(),C$E.getEndPointY()),C$V._tmpMatrix.invertTransformPoint(C$V._tempPoint);var C$O=C$V._tempPoint.x-C$s,C$U=C$V._tempPoint.y-C$M,C$p=Math.sqrt(C$O*C$O+C$U*C$U);if(!(C$p<=1e-6)){var C$_=C$O/C$p,C$R=C$U/C$p,C$q=C$T-C$s,C$G=C$X-C$M,C$g=C$q*C$q+C$G*C$G,C$f=Math.sqrt(C$g);if(!(C$f<=1e-6)){var C$J=C$q/C$f,C$P=C$G/C$f,C$t=C$_+C$J,C$r=C$R+C$P,C$N=Math.sqrt(C$t*C$t+C$r*C$r);if(!(C$N<=1e-6)){var C$w=C$t/C$N,C$k=C$r/C$N,C$A=Math.acos(C$w*C$_+C$k*C$R),C$D=Math.PI/2-C$A,C$h=(C$p=C$x/Math.tan(C$D))*C$_+C$s,C$Q=C$p*C$R+C$M,C$v=Math.sqrt(C$p*C$p+C$x*C$x),C$z=C$s+C$w*C$v,C$B=C$M+C$k*C$v,C$o=0,C$C=0;if(0<=C$_*C$P-C$R*C$J){var C$m=2*C$D/C$V.SEGNUM;C$o=Math.sin(C$m),C$C=Math.cos(C$m)}else C$m=2*-C$D/C$V.SEGNUM,C$o=Math.sin(C$m),C$C=Math.cos(C$m);C$l=this._curMat.a*C$h+this._curMat.c*C$Q,C$u=this._curMat.b*C$h+this._curMat.d*C$Q,C$l==this._path.getEndPointX()&&C$u==this._path.getEndPointY()||C$E.addPoint(C$l,C$u);var C$Y=C$h-C$z,C$I=C$Q-C$B;for(C$c=0;C$c<C$V.SEGNUM;C$c++){var C$y=C$Y*C$C+C$I*C$o,C$e=-C$Y*C$o+C$I*C$C;C$l=C$y+C$z,C$u=C$e+C$B,C$s=this._curMat.a*C$l+this._curMat.c*C$u,C$u=C$M=this._curMat.b*C$l+this._curMat.d*C$u,(C$l=C$s)==this._path.getEndPointX()&&C$u==this._path.getEndPointY()||C$E.addPoint(C$l,C$u),C$Y=C$y,C$I=C$e}}}}}},C$M.arc=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!0),-1!=this.mId){var C$u=C$I.getInstance().shapeDic[this.mId];if(C$u&&this.mHaveKey&&!C$u.needUpdate(this._curMat))return;C$M=C$s=0}var C$E,C$O=0,C$U=0,C$p=0,C$_=0,C$R=0,C$q=0,C$G=0;if(C$U=C$x-C$X,C$c)if(Math.abs(C$U)>=2*Math.PI)C$U=2*-Math.PI;else for(;0<C$U;)C$U-=2*Math.PI;else if(Math.abs(C$U)>=2*Math.PI)C$U=2*Math.PI;else for(;C$U<0;)C$U+=2*Math.PI;C$E=C$U/(C$G=C$T<101?Math.max(10,C$U*C$T/5):C$T<201?Math.max(10,C$U*C$T/20):Math.max(10,C$U*C$T/40))/2,C$p=Math.abs(4/3*(1-Math.cos(C$E))/Math.sin(C$E)),C$c&&(C$p=-C$p);var C$g=this._getPath(),C$f=NaN,C$J=NaN;for(C$q=0;C$q<=C$G;C$q++)C$O=C$X+C$U*(C$q/C$G),C$_=C$s+Math.cos(C$O)*C$T,C$R=C$M+Math.sin(C$O)*C$T,C$l&&(C$f=C$_,C$J=C$R,C$_=this._curMat.a*C$f+this._curMat.c*C$J,C$R=this._curMat.b*C$f+this._curMat.d*C$J),C$_==this._path.getEndPointX()&&C$R==this._path.getEndPointY()||C$g.addPoint(C$_,C$R);C$_=C$s+Math.cos(C$x)*C$T,C$R=C$M+Math.sin(C$x)*C$T,C$l&&(C$f=C$_,C$J=C$R,C$_=this._curMat.a*C$f+this._curMat.c*C$J,C$R=this._curMat.b*C$f+this._curMat.d*C$J),C$_==this._path.getEndPointX()&&C$R==this._path.getEndPointY()||C$g.addPoint(C$_,C$R)},C$M.quadraticCurveTo=function(C$s,C$M,C$T,C$X){var C$x=C$p.I,C$c=C$T,C$l=C$X;C$T=this._curMat.a*C$c+this._curMat.c*C$l,C$X=this._curMat.b*C$c+this._curMat.d*C$l,C$c=C$s,C$l=C$M,C$s=this._curMat.a*C$c+this._curMat.c*C$l,C$M=this._curMat.b*C$c+this._curMat.d*C$l;for(var C$u=C$x.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),C$s,C$M,C$T,C$X],30,2),C$E=0,C$O=C$u.length/2;C$E<C$O;C$E++)this.lineTo(C$u[2*C$E],C$u[2*C$E+1],!1);this.lineTo(C$T,C$X,!1)},C$M.rect=function(C$s,C$M,C$T,C$X){this._other=this._other.make(),this._other.path||(this._other.path=new C$Z),this._other.path.rect(C$s,C$M,C$T,C$X)},C$M.strokeRect=function(C$s,C$M,C$T,C$X,C$x){var C$c=.5*C$x;this.line(C$s-C$c,C$M,C$s+C$T+C$c,C$M,C$x,this._curMat),this.line(C$s+C$T,C$M,C$s+C$T,C$M+C$X,C$x,this._curMat),this.line(C$s,C$M,C$s,C$M+C$X,C$x,this._curMat),this.line(C$s-C$c,C$M+C$X,C$s+C$T+C$c,C$M+C$X,C$x,this._curMat)},C$M.clip=function(){},C$M.drawPoly=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){void 0===C$l&&(C$l=!1),this._renderKey=0,this._shader2D.glTexture=null;var C$u=this._getPath();if(-1==this.mId)C$u.polygon(C$s,C$M,C$T,C$X,C$x||1,C$c);else if(this.mHaveKey){var C$E=C$I.getInstance().shapeDic[this.mId];C$E.setMatrix(this._curMat),C$E.rebuild(C$u.tempArray),C$u.setGeomtry(C$E)}else{var C$O=C$u.polygon(C$s,C$M,C$T,C$X,C$x||1,C$c);C$I.getInstance().addShape(this.mId,C$O),C$O.setMatrix(this._curMat)}C$u.update();var C$U,C$p=[this.mX,this.mY];if((C$U=C$cs.createShape(this,C$u.ib,C$u.vb,C$u.count,C$u.offset,C$ks.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,C$U.shaderValue.u_pos=C$p,C$U.shaderValue.u_mmat2=C$Js.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=C$U,0<C$x){if(this.mHaveLineKey){var C$_=C$I.getInstance().shapeLineDic[this.mId];C$_.rebuild(C$u.tempArray),C$u.setGeomtry(C$_)}else C$I.getInstance().addShape(this.mId,C$u.drawLine(C$s,C$M,C$T,C$x,C$c));C$u.update(),(C$U=C$cs.createShape(this,C$u.ib,C$u.vb,C$u.count,C$u.offset,C$ks.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,C$U.shaderValue.u_mmat2=C$Js.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=C$U}},C$M.drawParticle=function(C$s,C$M,C$T){C$T.x=C$s,C$T.y=C$M,this._submits[this._submits._length++]=C$T},C$M._getPath=function(){return this._path||(this._path=new C$Z)},C$X(0,C$M,"globalCompositeOperation",function(){return C$S.NAMES[this._nBlendType]},function(C$s){var C$M=C$S.TOINT[C$s];null==C$M||this._nBlendType===C$M||(C$n.save(this,65536,this,!0),this._curSubmit=C$cs.RENDERBASE,this._renderKey=0,this._nBlendType=C$M)}),C$X(0,C$M,"strokeStyle",function(){return this._shader2D.strokeStyle},function(C$s){this._shader2D.strokeStyle.equal(C$s)||(C$n.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=C$K.create(C$s))}),C$X(0,C$M,"globalAlpha",function(){return this._shader2D.ALPHA},function(C$s){(C$s=Math.floor(1e3*C$s)/1e3)!=this._shader2D.ALPHA&&(C$n.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=C$s)}),C$X(0,C$M,"asBitmap",null,function(C$s){if(C$s){if(this._targets||(this._targets=new C$i),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),C$X(0,C$M,"fillStyle",function(){return this._shader2D.fillStyle},function(C$s){this._shader2D.fillStyle.equal(C$s)||(C$n.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=C$K.create(C$s))}),C$X(0,C$M,"textAlign",function(){return this._other.textAlign},function(C$s){this._other.textAlign===C$s||(this._other=this._other.make(),C$n.save(this,32768,this._other,!1),this._other.textAlign=C$s)}),C$X(0,C$M,"lineWidth",function(){return this._other.lineWidth},function(C$s){this._other.lineWidth===C$s||(this._other=this._other.make(),C$n.save(this,256,this._other,!1),this._other.lineWidth=C$s)}),C$X(0,C$M,"textBaseline",function(){return this._other.textBaseline},function(C$s){this._other.textBaseline===C$s||(this._other=this._other.make(),C$n.save(this,16384,this._other,!1),this._other.textBaseline=C$s)}),C$X(0,C$M,"font",null,function(C$s){C$s!=this._other.font.toString()&&(this._other=this._other.make(),C$n.save(this,8,this._other,!1),this._other.font===C$qs.EMPTY?this._other.font=new C$qs(C$s):this._other.font.setFont(C$s))}),C$V.__init__=function(){C$T.DEFAULT=new C$T},C$V._tempPoint=new C$D,C$V._SUBMITVBSIZE=32e3,C$V._MAXSIZE=99999999,C$V._RECTVBSIZE=16,C$V.MAXCLIPRECT=new C$h(0,0,99999999,99999999),C$V._COUNT=0,C$V._tmpMatrix=new C$A,C$V.SEGNUM=32,C$V._contextcount=0,C$l(C$V,["_fontTemp",function(){return this._fontTemp=new C$qs},"_drawStyleTemp",function(){return this._drawStyleTemp=new C$K(null)}]),C$V.__init$=function(){C$T=function(){function C$s(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=C$qs.EMPTY}C$_(C$s,"");var C$M=C$s.prototype;return C$M.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=C$qs.EMPTY},C$M.make=function(){return this===C$s.DEFAULT?new C$s:this},C$s.DEFAULT=null,C$s}()},C$V}(),C$ks=function(C$s){function C$X(C$s,C$M){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,C$X.__super.call(this),this.defines=new C$Qs,this.position=C$X._POSITION,this.mainID=C$s,this.subID=C$M,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=C$s|C$M,this._inClassCache=C$X._cache[this._cacheID],0<C$s&&!this._inClassCache&&(this._inClassCache=C$X._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}C$_(C$X,"laya.webgl.shader.d2.value.Value2D",C$e);var C$M=C$X.prototype;return C$M.setValue=function(C$s){},C$M.refresh=function(){var C$s=this.size;return C$s[0]=C$Js.width,C$s[1]=C$Js.height,this.alpha=this.ALPHA*C$Js.worldAlpha,this.mmat=C$Js.worldMatrix4,this},C$M._ShaderWithCompile=function(){return C$Ws.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,C$is.create)},C$M._withWorldShaderDefines=function(){var C$s=C$Js.worldShaderDefines,C$M=C$Ws.sharders[this.mainID|this.defines._value|C$s.getValue()];if(!C$M){var C$T,C$X={};for(C$T in this.defines.toNameDic())C$X[C$T]="";for(C$T in C$s.toNameDic())C$X[C$T]="";C$M=C$Ws.withCompile2D(0,this.mainID,C$X,this.mainID|this.defines._value|C$s.getValue(),C$is.create)}var C$x=C$Js.worldFilters;if(!C$x)return C$M;for(var C$c,C$l=C$x.length,C$u=0;C$u<C$l;C$u++)(C$c=C$x[C$u])&&C$c.action.setValue(this);return C$M},C$M.upload=function(){var C$s=C$Js;this.alpha=this.ALPHA*C$s.worldAlpha,C$Js.worldMatrix4!==C$Js.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),C$ts.shaderHighPrecision&&this.defines.add(1024);var C$M,C$T=C$s.worldShaderDefines?this._withWorldShaderDefines():C$Ws.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=C$s.width,this.size[1]=C$s.height,this.mmat=C$s.worldMatrix4,C$Ys.activeShader!==C$T?C$T._shaderValueWidth!==C$s.width||C$T._shaderValueHeight!==C$s.height?(C$T._shaderValueWidth=C$s.width,C$T._shaderValueHeight=C$s.height):C$M=C$T._params2dQuick2||C$T._make2dQuick2():C$T._shaderValueWidth!==C$s.width||C$T._shaderValueHeight!==C$s.height?(C$T._shaderValueWidth=C$s.width,C$T._shaderValueHeight=C$s.height):C$M=C$T._params2dQuick1||C$T._make2dQuick1(),C$T.upload(this,C$M)},C$M.setFilters=function(C$s){if(this.filters=C$s)for(var C$M,C$T=C$s.length,C$X=0;C$X<C$T;C$X++)(C$M=C$s[C$X])&&(this.defines.add(C$M.type),C$M.action.setValue(this))},C$M.clear=function(){this.defines.setValue(this.subID)},C$M.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},C$X._initone=function(C$s,C$M){C$X._typeClass[C$s]=C$M,C$X._cache[C$s]=[],C$X._cache[C$s]._length=0},C$X.__init__=function(){C$X._POSITION=[2,5126,!1,4*C$Gs.BYTES_PE,0],C$X._TEXCOORD=[2,5126,!1,4*C$Gs.BYTES_PE,2*C$Gs.BYTES_PE],C$X._initone(2,C$Vs),C$X._initone(4,C$Ss),C$X._initone(256,C$bs),C$X._initone(512,C$es),C$X._initone(1,C$Ls),C$X._initone(65,C$js),C$X._initone(9,C$Ls)},C$X.create=function(C$s,C$M){var C$T=C$X._cache[C$s|C$M];return C$T._length?C$T[--C$T._length]:new C$X._typeClass[C$s|C$M](C$M)},C$X._POSITION=null,C$X._TEXCOORD=null,C$X._cache=[],C$X._typeClass=[],C$X.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C$X}(),C$As=function(C$s){function C$g(C$s,C$M){C$g.__super.call(this,C$s,C$M)}C$_(C$g,"laya.webgl.utils.RenderSprite3D",C$J);var C$M=C$g.prototype;return C$M.onCreate=function(C$s){switch(C$s){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},C$M._mask=function(C$s,C$M,C$T,C$X){var C$x,C$c,C$l=this._next,C$u=C$s.mask;if(C$u){C$M.ctx.save();var C$E=C$M.ctx.globalCompositeOperation,C$O=new C$h;if(C$O.copyFrom(C$u.getBounds()),C$O.width=Math.round(C$O.width),C$O.height=Math.round(C$O.height),C$O.x=Math.round(C$O.x),C$O.y=Math.round(C$O.y),0<C$O.width&&0<C$O.height){var C$U=C$s._style._tf,C$p=C$us.create();C$p.addValue("bounds",C$O),C$x=C$ls.create([C$p,C$M],laya.webgl.utils.RenderSprite3D.tmpTarget),C$M.addRenderObject(C$x),C$u.render(C$M,-C$O.x,-C$O.y),C$x=C$ls.create([C$p],laya.webgl.utils.RenderSprite3D.endTmpTarget),C$M.addRenderObject(C$x),C$M.ctx.save(),C$M.clipRect(C$T-C$U.translateX+C$O.x,C$X-C$U.translateY+C$O.y,C$O.width,C$O.height),C$l._fun.call(C$l,C$s,C$M,C$T,C$X),C$M.ctx.restore(),C$c=C$Us.create(6),C$E=C$M.ctx.globalCompositeOperation,C$c.blendMode="mask",C$M.addRenderObject(C$c),C$A.TEMP.identity();var C$_=C$ks.create(1,0),C$R=C$m.INV_UV,C$q=C$O.width,C$G=C$O.height;(C$O.width<32||C$O.height<32)&&((C$R=C$g.tempUV)[0]=0,C$R[1]=0,C$R[2]=32<=C$O.width?1:C$O.width/32,C$R[3]=0,C$R[4]=32<=C$O.width?1:C$O.width/32,C$R[5]=32<=C$O.height?1:C$O.height/32,C$R[6]=0,C$R[7]=32<=C$O.height?1:C$O.height/32,C$O.width=32<=C$O.width?C$O.width:32,C$O.height=32<=C$O.height?C$O.height:32,C$R[1]*=-1,C$R[3]*=-1,C$R[5]*=-1,C$R[7]*=-1,C$R[1]+=1,C$R[3]+=1,C$R[5]+=1,C$R[7]+=1),C$M.ctx.drawTarget(C$p,C$T+C$O.x-C$U.translateX,C$X+C$O.y-C$U.translateY,C$q,C$G,C$A.TEMP,"tmpTarget",C$_,C$R,6),C$x=C$ls.create([C$p],laya.webgl.utils.RenderSprite3D.recycleTarget),C$M.addRenderObject(C$x),(C$c=C$Us.create(6)).blendMode=C$E,C$M.addRenderObject(C$c)}C$M.ctx.restore()}else C$l._fun.call(C$l,C$s,C$M,C$T,C$X)},C$M._blend=function(C$s,C$M,C$T,C$X){var C$x=C$s._style,C$c=this._next;C$x.blendMode?(C$M.ctx.save(),C$M.ctx.globalCompositeOperation=C$x.blendMode,C$c._fun.call(C$c,C$s,C$M,C$T,C$X),C$M.ctx.restore()):C$c._fun.call(C$c,C$s,C$M,C$T,C$X)},C$M._transform=function(C$s,C$M,C$T,C$X){var C$x=C$s.transform,C$c=this._next;if(C$x&&C$c!=C$J.NORENDER){var C$l=C$M.ctx;C$s._style;C$x.tx=C$T,C$x.ty=C$X;var C$u=C$l._getTransformMatrix(),C$E=C$u.clone();C$A.mul(C$x,C$u,C$u),C$u._checkTransform(),C$x.tx=C$x.ty=0,C$c._fun.call(C$c,C$s,C$M,0,0),C$E.copyTo(C$u),C$E.destroy()}else C$c._fun.call(C$c,C$s,C$M,C$T,C$X)},C$g.tmpTarget=function(C$s,C$M){var C$T=C$s.getValue("bounds"),C$X=C$Is.create(C$T.width,C$T.height);C$X.start(),C$X.clear(0,0,0,0),C$s.addValue("tmpTarget",C$X)},C$g.endTmpTarget=function(C$s){C$s.getValue("tmpTarget").end()},C$g.recycleTarget=function(C$s){C$s.getValue("tmpTarget").recycle(),C$s.recycle()},C$l(C$g,["tempUV",function(){return this.tempUV=new Array(8)}]),C$g}(),C$Ds=function(C$s){function C$M(){this.data=null,C$M.__super.call(this)}C$_(C$M,"laya.filters.webgl.ColorFilterActionGL",C$y);var C$T=C$M.prototype;return C$N.imps(C$T,{"laya.filters.IFilterActionGL":!0}),C$T.setValue=function(C$s){C$s.colorMat=this.data._mat,C$s.colorAlpha=this.data._alpha},C$T.apply3d=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$s.getValue("bounds"),C$l=C$ks.create(1,0);C$l.setFilters([this.data]);var C$u=C$A.TEMP;C$u.identity(),C$T.ctx.drawTarget(C$s,0,0,C$c.width,C$c.height,C$u,"src",C$l)},C$M}(),C$hs=function(C$s){function C$c(C$s,C$M,C$T,C$X,C$x){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,C$c.__super.call(this,C$s,C$M,C$x),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new C$Ks,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=C$T,this._atlasCanvas.height=C$X,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}C$_(C$c,"laya.webgl.atlas.Atlaser",C$V);var C$M=C$c.prototype;return C$M.computeUVinAtlasTexture=function(C$s,C$M,C$T,C$X){var C$x=C$b.atlasTextureWidth,C$c=C$b.atlasTextureHeight,C$l=C$T/C$x,C$u=C$X/C$c,C$E=(C$T+C$s.bitmap.width)/C$x,C$O=(C$X+C$s.bitmap.height)/C$c,C$U=C$s.bitmap.width/C$x,C$p=C$s.bitmap.height/C$c;C$s.uv=[C$l+C$M[0]*C$U,C$u+C$M[1]*C$p,C$E-(1-C$M[2])*C$U,C$u+C$M[3]*C$p,C$E-(1-C$M[4])*C$U,C$O-(1-C$M[5])*C$p,C$l+C$M[6]*C$U,C$O-(1-C$M[7])*C$p]},C$M.findBitmapIsExist=function(C$s){if(C$s instanceof laya.webgl.resource.WebGLImage){var C$M=C$s,C$T=C$M.url,C$X=this._InAtlasWebGLImagesKey[C$T||C$M.id];if(C$X)return C$X.offsetInfoID}return-1},C$M.addToAtlasTexture=function(C$s,C$M,C$T){if(C$s instanceof laya.webgl.resource.WebGLImage){var C$X=C$s,C$x=C$X.url;this._InAtlasWebGLImagesKey[C$x||C$X.id]={bitmap:C$s,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([C$M,C$T])}this._atlasCanvas.texSubImage2D(C$M,C$T,C$s.atlasSource),C$s.clearAtlasSource()},C$M.addToAtlas=function(C$s,C$M,C$T){C$s._atlasID=this._inAtlasTextureKey.length;var C$X=C$s.uv.slice(),C$x=C$s.bitmap;this._inAtlasTextureKey.push(C$s),this._inAtlasTextureOriUVValue.push(C$X),this._inAtlasTextureBitmapValue.push(C$x),this.computeUVinAtlasTexture(C$s,C$X,C$M,C$T),C$s.bitmap=this._atlasCanvas},C$M.clear=function(){for(var C$s=0,C$M=this._inAtlasTextureKey.length;C$s<C$M;C$s++)this._inAtlasTextureKey[C$s].bitmap=this._inAtlasTextureBitmapValue[C$s],this._inAtlasTextureKey[C$s].uv=this._inAtlasTextureOriUVValue[C$s],this._inAtlasTextureKey[C$s]._atlasID=-1,this._inAtlasTextureKey[C$s].bitmap.lock=!1,this._inAtlasTextureKey[C$s].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},C$M.dispose=function(){this.clear(),this._atlasCanvas.destroy()},C$X(0,C$M,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),C$X(0,C$M,"texture",function(){return this._atlasCanvas}),C$X(0,C$M,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),C$c}(),C$Qs=function(C$s){function C$T(){C$T.__super.call(this,C$T.__name2int,C$T.__int2name,C$T.__int2nameMap)}return C$_(C$T,"laya.webgl.shader.d2.ShaderDefines2D",C$d),C$T.__init__=function(){C$T.reg("TEXTURE2D",1),C$T.reg("COLOR2D",2),C$T.reg("PRIMITIVE",4),C$T.reg("GLOW_FILTER",8),C$T.reg("BLUR_FILTER",16),C$T.reg("COLOR_FILTER",32),C$T.reg("COLOR_ADD",64),C$T.reg("WORLDMAT",128),C$T.reg("FILLTEXTURE",256),C$T.reg("FSHIGHPRECISION",1024),C$T.reg("TXTALPHA",2048),C$T.reg("TXTCOMPRESS",4096)},C$T.reg=function(C$s,C$M){C$d._reg(C$s,C$M,C$T.__name2int,C$T.__int2name)},C$T.toText=function(C$s,C$M,C$T){return C$d._toText(C$s,C$M,C$T)},C$T.toInt=function(C$s){return C$d._toInt(C$s,C$T.__name2int)},C$T.TEXTURE2D=1,C$T.COLOR2D=2,C$T.PRIMITIVE=4,C$T.FILTERGLOW=8,C$T.FILTERBLUR=16,C$T.FILTERCOLOR=32,C$T.COLORADD=64,C$T.WORLDMAT=128,C$T.FILLTEXTURE=256,C$T.SKINMESH=512,C$T.SHADERDEFINE_FSHIGHPRECISION=1024,C$T.TXTALPHA=2048,C$T.TXTCOMPRESS=4096,C$T.__name2int={},C$T.__int2name=[],C$T.__int2nameMap=[],C$T}(),C$vs=(function(C$s){function C$u(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$u.__super.call(this,C$s,C$M,C$T,C$X,40,C$x,C$c,C$l)}C$_(C$u,"laya.webgl.shapes.Ellipse",C$Ts)}(),function(C$s){function C$c(C$s,C$M,C$T,C$X,C$x){this._points=[],this.rebuild(C$T),C$c.__super.call(this,C$s,C$M,0,0,0,C$x,C$X,C$x,0)}C$_(C$c,"laya.webgl.shapes.Line",C$Ts);var C$M=C$c.prototype;return C$M.rebuild=function(C$s){var C$M=C$s.length;C$M!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(C$M/2-1)),this.mFloat32Array=new Float32Array(5*C$M)),this._points.length=0;for(var C$T=NaN,C$X=NaN,C$x=-1,C$c=-1,C$l=C$s.length/2,C$u=0;C$u<C$l;C$u++)C$T=C$s[2*C$u],C$X=C$s[2*C$u+1],(.01<Math.abs(C$x-C$T)||.01<Math.abs(C$c-C$X))&&this._points.push(C$T,C$X),C$x=C$T,C$c=C$X},C$M.getData=function(C$s,C$M,C$T){var C$X=[],C$x=[];0<this.borderWidth&&this.createLine2(this._points,C$X,this.borderWidth,C$T,C$x,this._points.length/2),this.mUint16Array.set(C$X,0),this.mFloat32Array.set(C$x,0),C$s.append(this.mUint16Array),C$M.append(this.mFloat32Array)},C$c}()),C$zs=function(C$s){function C$p(C$s,C$M,C$T,C$X,C$x){this._points=[];for(var C$c=NaN,C$l=NaN,C$u=-1,C$E=-1,C$O=C$T.length/2-1,C$U=0;C$U<C$O;C$U++)C$c=C$T[2*C$U],C$l=C$T[2*C$U+1],(.01<Math.abs(C$u-C$c)||.01<Math.abs(C$E-C$l))&&this._points.push(C$c,C$l),C$u=C$c,C$E=C$l;C$c=C$T[2*C$O],C$l=C$T[2*C$O+1],C$u=this._points[0],C$E=this._points[1],(.01<Math.abs(C$u-C$c)||.01<Math.abs(C$E-C$l))&&this._points.push(C$c,C$l),C$p.__super.call(this,C$s,C$M,0,0,this._points.length/2,0,C$X,C$x)}C$_(C$p,"laya.webgl.shapes.LoopLine",C$Ts);var C$M=C$p.prototype;return C$M.getData=function(C$s,C$M,C$T){if(0<this.borderWidth){for(var C$X=this.color,C$x=(C$X>>16&255)/255,C$c=(C$X>>8&255)/255,C$l=(255&C$X)/255,C$u=[],C$E=0,C$O=0,C$U=[],C$p=Math.floor(this._points.length/2),C$_=0;C$_<C$p;C$_++)C$E=this._points[2*C$_],C$O=this._points[2*C$_+1],C$u.push(this.x+C$E,this.y+C$O,C$x,C$c,C$l);this.createLoopLine(C$u,C$U,this.borderWidth,C$T+C$u.length/5),C$s.append(new Uint16Array(C$U)),C$M.append(new Float32Array(C$u))}},C$M.createLoopLine=function(C$s,C$M,C$T,C$X,C$x,C$c){C$s.length;var C$l=C$s.concat(),C$u=C$x||C$s,C$E=this.borderColor,C$O=(C$E>>16&255)/255,C$U=(C$E>>8&255)/255,C$p=(255&C$E)/255,C$_=[C$l[0],C$l[1]],C$R=[C$l[C$l.length-5],C$l[C$l.length-4]],C$q=C$R[0]+.5*(C$_[0]-C$R[0]),C$G=C$R[1]+.5*(C$_[1]-C$R[1]);C$l.unshift(C$q,C$G,0,0,0),C$l.push(C$q,C$G,0,0,0);var C$g,C$f,C$J,C$P,C$t,C$r,C$N,C$w,C$k,C$A,C$D,C$h,C$Q,C$v,C$z,C$B,C$o,C$C,C$m,C$Y,C$I=C$l.length/5,C$y=C$X,C$e=C$T/2;C$J=C$l[0],C$P=C$l[1],C$A=C$J-(C$t=C$l[5]),C$k=(C$k=-(C$P-(C$r=C$l[6])))/(C$Y=Math.sqrt(C$k*C$k+C$A*C$A))*C$e,C$A=C$A/C$Y*C$e,C$u.push(C$J-C$k,C$P-C$A,C$O,C$U,C$p,C$J+C$k,C$P+C$A,C$O,C$U,C$p);for(var C$V=1;C$V<C$I-1;C$V++)C$J=C$l[5*(C$V-1)],C$P=C$l[5*(C$V-1)+1],C$t=C$l[5*C$V],C$r=C$l[5*C$V+1],C$N=C$l[5*(C$V+1)],C$w=C$l[5*(C$V+1)+1],C$A=C$J-C$t,C$h=C$t-C$N,C$z=(-(C$k=(C$k=-(C$P-C$r))/(C$Y=Math.sqrt(C$k*C$k+C$A*C$A))*C$e)+C$J)*(-(C$A=C$A/C$Y*C$e)+C$r)-(-C$k+C$t)*(-C$A+C$P),C$C=(-(C$D=(C$D=-(C$r-C$w))/(C$Y=Math.sqrt(C$D*C$D+C$h*C$h))*C$e)+C$N)*(-(C$h=C$h/C$Y*C$e)+C$r)-(-C$D+C$t)*(-C$h+C$w),C$m=(C$Q=-C$A+C$P-(-C$A+C$r))*(C$o=-C$D+C$t-(-C$D+C$N))-(C$B=-C$h+C$w-(-C$h+C$r))*(C$v=-C$k+C$t-(-C$k+C$J)),Math.abs(C$m)<.1?(C$m+=10.1,C$u.push(C$t-C$k,C$r-C$A,C$O,C$U,C$p,C$t+C$k,C$r+C$A,C$O,C$U,C$p)):(((C$g=(C$v*C$C-C$o*C$z)/C$m)-C$t)*(C$g-C$t)+((C$f=(C$B*C$z-C$Q*C$C)/C$m)-C$r)+(C$f-C$r),C$u.push(C$g,C$f,C$O,C$U,C$p,C$t-(C$g-C$t),C$r-(C$f-C$r),C$O,C$U,C$p));C$c&&(C$M=C$c);var C$b=this.edges+1;for(C$V=1;C$V<C$b;C$V++)C$M.push(C$y+2*(C$V-1),C$y+2*(C$V-1)+1,C$y+2*C$V+1,C$y+2*C$V+1,C$y+2*C$V,C$y+2*(C$V-1));return C$M.push(C$y+2*(C$V-1),C$y+2*(C$V-1)+1,C$y+1,C$y+1,C$y,C$y+2*(C$V-1)),C$u},C$p}(),C$Bs=function(C$s){function C$l(C$s,C$M,C$T,C$X,C$x,C$c){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=C$A.create(),this._points=C$T.slice(0,C$T.length),C$l.__super.call(this,C$s,C$M,0,0,this._points.length/2,C$X,C$x,C$c)}C$_(C$l,"laya.webgl.shapes.Polygon",C$Ts);var C$M=C$l.prototype;return C$M.rebuild=function(C$s){this._repaint||(this._points.length=0,this._points=this._points.concat(C$s))},C$M.setMatrix=function(C$s){C$s.copyTo(this._mat)},C$M.needUpdate=function(C$s){return this._repaint=this._mat.a==C$s.a&&this._mat.b==C$s.b&&this._mat.c==C$s.c&&this._mat.d==C$s.d&&this._mat.tx==C$s.tx&&this._mat.ty==C$s.ty,!this._repaint},C$M.getData=function(C$s,C$M,C$T){var C$X,C$x=0,C$c=this._points,C$l=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=C$T){for(this._start=C$T,C$X=[],C$l=this.earcutTriangles.length,C$x=0;C$x<C$l;C$x++)C$X.push(this.earcutTriangles[C$x]+C$T);this.mUint16Array=new Uint16Array(C$X)}}else{this._start=C$T,C$X=[];var C$u=[],C$E=[],C$O=this.color,C$U=(C$O>>16&255)/255,C$p=(C$O>>8&255)/255,C$_=(255&C$O)/255;for(C$l=Math.floor(C$c.length/2),C$x=0;C$x<C$l;C$x++)C$u.push(this.x+C$c[2*C$x],this.y+C$c[2*C$x+1],C$U,C$p,C$_),C$E.push(this.x+C$c[2*C$x],this.y+C$c[2*C$x+1]);for(this.earcutTriangles=C$Xs.earcut(C$E,null,2),C$l=this.earcutTriangles.length,C$x=0;C$x<C$l;C$x++)C$X.push(this.earcutTriangles[C$x]+C$T);this.mUint16Array=new Uint16Array(C$X),this.mFloat32Array=new Float32Array(C$u)}C$s.append(this.mUint16Array),C$M.append(this.mFloat32Array)},C$l}(),C$os=function(C$s){function C$c(){this._matrix=new C$A,this._matrix4=C$Gs.defaultMatrix4.concat(),C$c.__super.call(this,1e4),this.shaderValue=new C$ks(0,0)}C$_(C$c,"laya.webgl.submit.SubmitCanvas",C$cs);var C$M=C$c.prototype;return C$M.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var C$s=C$Js.worldAlpha,C$M=C$Js.worldMatrix4,C$T=C$Js.worldMatrix,C$X=C$Js.worldFilters,C$x=C$Js.worldShaderDefines,C$c=this.shaderValue,C$l=this._matrix,C$u=this._matrix4,C$E=C$A.TEMP;return C$A.mul(C$l,C$T,C$E),C$u[0]=C$E.a,C$u[1]=C$E.b,C$u[4]=C$E.c,C$u[5]=C$E.d,C$u[12]=C$E.tx,C$u[13]=C$E.ty,C$Js.worldMatrix=C$E.clone(),C$Js.worldMatrix4=C$u,C$Js.worldAlpha=C$Js.worldAlpha*C$c.alpha,C$c.filters&&C$c.filters.length&&(C$Js.worldFilters=C$c.filters,C$Js.worldShaderDefines=C$c.defines),this._ctx_src.flush(),C$Js.worldAlpha=C$s,C$Js.worldMatrix4=C$M,C$Js.worldMatrix.destroy(),C$Js.worldMatrix=C$T,C$Js.worldFilters=C$X,C$Js.worldShaderDefines=C$x,1},C$M.releaseRender=function(){var C$s=C$c._cache;this._ctx_src=null,C$s[C$s._length++]=this},C$M.getRenderType=function(){return 10003},C$c.create=function(C$s,C$M,C$T){var C$X=C$c._cache._length?C$c._cache[--C$c._cache._length]:new C$c;C$X._ctx_src=C$s;var C$x=C$X.shaderValue;return C$x.alpha=C$M,C$x.defines.setValue(0),C$T&&C$T.length&&C$x.setFilters(C$T),C$X},C$c._cache=((C$c._cache=[])._length=0,C$c._cache),C$c}(),C$Cs=function(C$s){function C$O(C$s){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===C$s&&(C$s=1e4),C$O.__super.call(this,C$s)}C$_(C$O,"laya.webgl.submit.SubmitTexture",C$cs);var C$M=C$O.prototype;return C$M.releaseRender=function(){var C$s=C$O._cache;(C$s[C$s._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},C$M.addTexture=function(C$s,C$M){this._texsID[this._texs.length]=C$s._uvID,this._texs.push(C$s),this._vbPos.push(C$M)},C$M.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var C$s=this.shaderValue.textureHost.bitmap;if(null!==C$s)for(var C$M=this._vb.getFloat32Array(),C$T=0,C$X=this._texs.length;C$T<C$X;C$T++){var C$x=this._texs[C$T];C$x.active();var C$c=C$x.uv;if(this._texsID[C$T]!==C$x._uvID){this._texsID[C$T]=C$x._uvID;var C$l=this._vbPos[C$T];C$M[C$l+2]=C$c[0],C$M[C$l+3]=C$c[1],C$M[C$l+6]=C$c[2],C$M[C$l+7]=C$c[3],C$M[C$l+10]=C$c[4],C$M[C$l+11]=C$c[5],C$M[C$l+14]=C$c[6],C$M[C$l+15]=C$c[7],this._vb.setNeedUpload()}C$x.bitmap!==C$s&&(this._isSameTexture=!1)}}},C$M.renderSubmit=function(){if(0===this._numEle)return C$O._shaderSet=!1,1;var C$s=this.shaderValue.textureHost;if(C$s){var C$M=C$s.source;if(!C$s.bitmap||!C$M)return C$O._shaderSet=!1,1;this.shaderValue.texture=C$M,C$s.alphaTexture&&C$s.alphaTexture.source&&(this.shaderValue.texture1=C$s.alphaTexture.source)}this._vb.bind_upload(this._ib);var C$T=C$ts.mainContext;if(C$S.activeBlendFunction!==this._blendFn&&(C$T.enable(3042),this._blendFn(C$T),C$S.activeBlendFunction=this._blendFn),C$z.drawCall++,C$z.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&C$Ys.activeShader&&C$O._shaderSet?(C$Ys.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&C$Ys.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),C$O._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var C$X=C$s.bitmap,C$x=0,C$c=C$Ys.activeShader,C$l=0,C$u=this._texs.length;C$l<C$u;C$l++){var C$E=this._texs[C$l];C$E.bitmap===C$X&&C$l+1!==C$u||(C$c.uploadTexture2D(C$E.source),C$T.drawElements(4,6*(C$l-C$x+1),5123,this._startIdx+6*C$x*C$Gs.BYTES_PIDX),C$X=C$E.bitmap,C$x=C$l)}else C$T.drawElements(4,this._numEle,5123,this._startIdx);return 1},C$O.create=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$O._cache._length?C$O._cache[--C$O._cache._length]:new C$O;null==C$T&&((C$T=C$c._selfVb||(C$c._selfVb=C$ds.create(-1))).clear(),C$X=0),C$c._ib=C$M,C$c._vb=C$T,C$c._startIdx=C$X*C$Gs.BYTES_PIDX,C$c._numEle=0;var C$l=C$s._nBlendType;C$c._blendFn=C$s._targets?C$S.targetFns[C$l]:C$S.fns[C$l],C$c.shaderValue=C$x,C$c.shaderValue.setValue(C$s._shader2D);var C$u=C$s._shader2D.filters;return C$u&&C$c.shaderValue.setFilters(C$u),C$c},C$O._cache=((C$O._cache=[])._length=0,C$O._cache),C$O._shaderSet=!0,C$O}(),C$ms=function(C$s){function C$f(){C$f.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}C$_(C$f,"laya.webgl.utils.MeshTexture",C$fs);var C$M=C$f.prototype;return C$M.addData=function(C$s,C$M,C$T,C$X,C$x,C$c){for(var C$l=C$s.length/2,C$u=this._vb.needSize(C$l*C$f.const_stride)>>2,C$E=this._vb.getFloat32Array(),C$O=0,C$U=0;C$U<C$l;C$U++){var C$p=C$s[C$O],C$_=C$s[C$O+1],C$R=C$p*C$X.a+C$_*C$X.c+C$X.tx,C$q=C$p*C$X.b+C$_*C$X.d+C$X.ty;C$E[C$u++]=C$R,C$E[C$u++]=C$q,C$E[C$u++]=C$M[C$O],C$E[C$u++]=C$M[C$O+1],C$O+=2}this._vb.setNeedUpload();var C$G=this.vertNum;if(0<C$G){(C$l=C$T.length)>C$f.tmpIdx.length&&(C$f.tmpIdx=new Uint16Array(C$l));for(var C$g=0;C$g<C$l;C$g++)C$f.tmpIdx[C$g]=C$T[C$g]+C$G;this._ib.appendU16Array(C$f.tmpIdx,C$T.length)}else this._ib.append(C$T);this._ib.setNeedUpload(),this.vertNum+=C$l,this.indexNum+=C$T.length},C$M.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},C$M.destroy=function(){this._ib.destroy(),this._vb.destroy()},C$f.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new C$f},C$f.const_stride=16,C$f._POOL=[],C$l(C$f,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),C$f}(),C$Ys=function(C$s){function C$M(){C$M.__super.call(this),this.lock=!0}return C$_(C$M,"laya.webgl.shader.BaseShader",C$P),C$M.activeShader=null,C$M.bindShader=null,C$M}(),C$Is=function(C$M){function C$U(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===C$T&&(C$T=6408),void 0===C$X&&(C$X=5121),void 0===C$x&&(C$x=34041),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=-1),void 0===C$E&&(C$E=-1),this._type=1,this._w=C$s,this._h=C$M,this._surfaceFormat=C$T,this._surfaceType=C$X,this._depthStencilFormat=C$x,C$f.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=C$c,this._repeat=C$l,this._minFifter=C$u,this._magFifter=C$E,this._createWebGLRenderTarget(),this.bitmap.lock=!0,C$U.__super.call(this,this.bitmap,C$m.INV_UV)}C$_(C$U,"laya.webgl.resource.RenderTarget2D",C$M);var C$s=C$U.prototype;return C$N.imps(C$s,{"laya.resource.IDispose":!0}),C$s.getType=function(){return this._type},C$s.getTexture=function(){return this},C$s.size=function(C$s,C$M){this._w==C$s&&this._h==C$M||(this._w=C$s,this._h=C$M,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},C$s.release=function(){this.destroy()},C$s.recycle=function(){C$U.POOL.push(this)},C$s.start=function(){var C$s=C$ts.mainContext;return this._preRenderTarget=C$Js.curRenderTarget,C$Js.curRenderTarget=this,C$s.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(C$s.viewport(0,0,this._w,this._h),this._svWidth=C$Js.width,this._svHeight=C$Js.height,C$Js.width=this._w,C$Js.height=this._h,C$Ys.activeShader=null),this},C$s.clear=function(C$s,C$M,C$T,C$X){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=1);var C$x=C$ts.mainContext;C$x.clearColor(C$s,C$M,C$T,C$X);var C$c=16384;switch(this._depthStencilFormat){case 33189:C$c|=256;break;case 36168:C$c|=1024;break;case 34041:C$c|=256,C$c|=1024}C$x.clear(C$c)},C$s.end=function(){var C$s=C$ts.mainContext;C$s.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,C$Js.curRenderTarget=this._preRenderTarget,1==this._type?(C$s.viewport(0,0,this._svWidth,this._svHeight),C$Js.width=this._svWidth,C$Js.height=this._svHeight,C$Ys.activeShader=null):C$s.viewport(0,0,C$N.stage.width,C$N.stage.height)},C$s.getData=function(C$s,C$M,C$T,C$X){var C$x=C$ts.mainContext;if(C$x.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===C$x.checkFramebufferStatus(36160)))return C$x.bindFramebuffer(36160,null),null;var C$c=new Uint8Array(this._w*this._h*4);return C$x.readPixels(C$s,C$M,C$T,C$X,this._surfaceFormat,this._surfaceType,C$c),C$x.bindFramebuffer(36160,null),C$c},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,C$M.prototype.destroy.call(this))},C$s.dispose=function(){},C$s._createWebGLRenderTarget=function(){this.bitmap=new C$$s(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(C$s){this.event("recovered")})},C$X(0,C$s,"surfaceFormat",function(){return this._surfaceFormat}),C$X(0,C$s,"magFifter",function(){return this._magFifter}),C$X(0,C$s,"surfaceType",function(){return this._surfaceType}),C$X(0,C$s,"mipMap",function(){return this._mipMap}),C$X(0,C$s,"depthStencilFormat",function(){return this._depthStencilFormat}),C$X(0,C$s,"minFifter",function(){return this._minFifter}),C$X(0,C$s,"source",function(){return this._alreadyResolved?C$N.superGet(C$m,this,"source"):null}),C$U.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){void 0===C$T&&(C$T=6408),void 0===C$X&&(C$X=5121),void 0===C$x&&(C$x=34041),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=-1),void 0===C$E&&(C$E=-1);var C$O=C$U.POOL.pop();return C$O||(C$O=new C$U(C$s,C$M)),C$O.bitmap&&C$O._w==C$s&&C$O._h==C$M&&C$O._surfaceFormat==C$T&&C$O._surfaceType==C$X&&C$O._depthStencilFormat==C$x&&C$O._mipMap==C$c&&C$O._repeat==C$l&&C$O._minFifter==C$u&&C$O._magFifter==C$E||(C$O._w=C$s,C$O._h=C$M,C$O._surfaceFormat=C$T,C$O._surfaceType=C$X,C$O._depthStencilFormat=C$x,C$f.isConchWebGL&&34041===C$O._depthStencilFormat&&(C$O._depthStencilFormat=33189),C$O._mipMap=C$c,C$O._repeat=C$l,C$O._minFifter=C$u,C$O._magFifter=C$E,C$O.release(),C$O._createWebGLRenderTarget()),C$O},C$U.TYPE2D=1,C$U.TYPE3D=2,C$U.POOL=[],C$U}(C$m),C$ys=function(C$s){function C$M(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,C$M.__super.call(this),C$M._gl=C$ts.mainContext}C$_(C$M,"laya.webgl.utils.Buffer",C$P);var C$T=C$M.prototype;return C$T._bind=function(){this.activeResource(),C$M._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(C$M._bindVertexBuffer=this._glBuffer),C$M._gl.bindBuffer(this._bufferType,C$M._bindActive[this._bufferType]=this._glBuffer),C$Ys.activeShader=null)},C$T.recreateResource=function(){this._glBuffer||(this._glBuffer=C$M._gl.createBuffer()),this.completeCreate()},C$T.disposeResource=function(){this._glBuffer&&(C$ts.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},C$X(0,C$T,"bufferUsage",function(){return this._bufferUsage}),C$M._gl=null,C$M._bindActive={},C$M._bindVertexBuffer=null,C$M._enableAtributes=[],C$M}(),C$es=function(C$s){function C$T(C$s){this.texcoord=null,this.offsetX=300,this.offsetY=0,C$T.__super.call(this,512,0);var C$M=8*C$Gs.BYTES_PE;this.position=[2,5126,!1,C$M,0],this.texcoord=[2,5126,!1,C$M,2*C$Gs.BYTES_PE],this.color=[4,5126,!1,C$M,4*C$Gs.BYTES_PE]}return C$_(C$T,"laya.webgl.shader.d2.skinAnishader.SkinSV",C$ks),C$T}(),C$Vs=function(C$s){function C$M(C$s){C$M.__super.call(this,2,0),this.color=[]}return C$_(C$M,"laya.webgl.shader.d2.value.Color2dSV",C$ks),C$M.prototype.setValue=function(C$s){C$s.fillStyle&&(this.color=C$s.fillStyle._color._color),C$s.strokeStyle&&(this.color=C$s.strokeStyle._color._color)},C$M}(),C$bs=function(C$s){function C$M(C$s){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=C$ks._TEXCOORD,C$M.__super.call(this,256,0)}C$_(C$M,"laya.webgl.shader.d2.value.FillTextureSV",C$ks);var C$T=C$M.prototype;return C$T.setValue=function(C$s){this.ALPHA=C$s.ALPHA,C$s.filters&&this.setFilters(C$s.filters)},C$T.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},C$M}(),C$Ls=function(C$s){function C$M(C$s){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=C$ks._TEXCOORD,void 0===C$s&&(C$s=0),C$M.__super.call(this,1,C$s)}C$_(C$M,"laya.webgl.shader.d2.value.TextureSV",C$ks);var C$T=C$M.prototype;return C$T.setValue=function(C$s){this.ALPHA=C$s.ALPHA,C$s.filters&&this.setFilters(C$s.filters)},C$T.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},C$M}(),C$Ss=function(C$s){function C$M(C$s){this.a_color=null,this.u_pos=[0,0],C$M.__super.call(this,4,0),this.position=[2,5126,!1,5*C$Gs.BYTES_PE,0],this.a_color=[3,5126,!1,5*C$Gs.BYTES_PE,2*C$Gs.BYTES_PE]}return C$_(C$M,"laya.webgl.shader.d2.value.PrimitiveSV",C$ks),C$M}(),C$Ks=function(C$s){function C$M(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,C$M.__super.call(this)}C$_(C$M,"laya.webgl.atlas.AtlasWebGLCanvas",C$s);var C$T=C$M.prototype;return C$T.recreateResource=function(){var C$s=C$ts.mainContext,C$M=this._source=C$s.createTexture(),C$T=C$rs.curBindTexTarget,C$X=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,C$M),C$s.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),C$s.texParameteri(3553,10241,9729),C$s.texParameteri(3553,10240,9729),C$s.texParameteri(3553,10242,33071),C$s.texParameteri(3553,10243,33071),C$T&&C$X&&C$rs.bindTexture(C$s,C$T,C$X),this.memorySize=this._w*this._h*4,this.completeCreate()},C$T.disposeResource=function(){this._source&&(C$ts.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},C$T.texSubImage2D=function(C$s,C$M,C$T){if(C$f.isFlash){this._flashCacheImage||(this._flashCacheImage=C$G.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var C$X=C$T.bitmapdata;this._flashCacheImage._image.copyPixels(C$X,0,0,C$X.width,C$X.height,C$s,C$M),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var C$x=C$ts.mainContext,C$c=C$rs.curBindTexTarget,C$l=C$rs.curBindTexValue;C$rs.bindTexture(C$x,3553,this._source),C$x.pixelStorei(37441,!0),0<=C$s-1&&C$x.texSubImage2D(3553,0,C$s-1,C$M,6408,5121,C$T),C$s+1<=this._w&&C$x.texSubImage2D(3553,0,C$s+1,C$M,6408,5121,C$T),0<=C$M-1&&C$x.texSubImage2D(3553,0,C$s,C$M-1,6408,5121,C$T),C$M+1<=this._h&&C$x.texSubImage2D(3553,0,C$s,C$M+1,6408,5121,C$T),C$x.texSubImage2D(3553,0,C$s,C$M,6408,5121,C$T),C$x.pixelStorei(37441,!1),C$c&&C$l&&C$rs.bindTexture(C$x,C$c,C$l)}},C$T.texSubImage2DPixel=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$ts.mainContext,C$l=C$rs.curBindTexTarget,C$u=C$rs.curBindTexValue;C$rs.bindTexture(C$c,3553,this._source);var C$E=new Uint8Array(C$x.data);C$c.pixelStorei(37441,!0),C$c.texSubImage2D(3553,0,C$s,C$M,C$T,C$X,6408,5121,C$E),C$c.pixelStorei(37441,!1),C$l&&C$u&&C$rs.bindTexture(C$c,C$l,C$u)},C$X(0,C$T,"width",C$s.prototype._$get_width,function(C$s){this._w=C$s}),C$X(0,C$T,"height",C$s.prototype._$get_height,function(C$s){this._h=C$s}),C$M}(C$T),C$Zs=function(C$s){function C$x(){this.flipY=!0,this.alwaysChange=!1,C$x.__super.call(this)}C$_(C$x,"laya.webgl.resource.WebGLCanvas",C$T);var C$M=C$x.prototype;return C$M.getCanvas=function(){return this._canvas},C$M.clear=function(){this._ctx&&this._ctx.clear()},C$M.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},C$M._setContext=function(C$s){this._ctx=C$s},C$M.getContext=function(C$s,C$M){return this._ctx?this._ctx:this._ctx=C$x._createContext(this)},C$M.size=function(C$s,C$M){this._w==C$s&&this._h==C$M||(this._w=C$s,this._h=C$M,this._ctx&&this._ctx.size(C$s,C$M),this._canvas&&(this._canvas.height=C$M,this._canvas.width=C$s))},C$M.activeResource=function(C$s){void 0===C$s&&(C$s=!1),this._source||this.recreateResource()},C$M.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},C$M.disposeResource=function(){this._source&&!this.iscpuSource&&(C$ts.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},C$M.createWebGlTexture=function(){var C$s=C$ts.mainContext;this._canvas;var C$M=this._source=C$s.createTexture();this.iscpuSource=!1;var C$T=C$rs.curBindTexTarget,C$X=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,C$M),C$s.pixelStorei(37440,this.flipY?1:0),C$x.premulAlpha&&C$s.pixelStorei(37441,!0),C$s.texImage2D(3553,0,6408,6408,5121,this._imgData),C$x.premulAlpha&&C$s.pixelStorei(37441,!1),C$s.texParameteri(3553,10240,9729),C$s.texParameteri(3553,10241,9729),C$s.texParameteri(3553,10242,33071),C$s.texParameteri(3553,10243,33071),C$s.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,C$T&&C$X&&C$rs.bindTexture(C$s,C$T,C$X)},C$M.reloadCanvasData=function(){var C$s=C$ts.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var C$M=C$rs.curBindTexTarget,C$T=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,this._source),C$x.premulAlpha&&C$s.pixelStorei(37441,!0),C$s.texImage2D(3553,0,6408,6408,5121,this._imgData),C$x.premulAlpha&&C$s.pixelStorei(37441,!1),C$s.pixelStorei(37440,0),C$M&&C$T&&C$rs.bindTexture(C$s,C$M,C$T)},C$M.texSubImage2D=function(C$s,C$M,C$T){var C$X=C$ts.mainContext,C$x=C$rs.curBindTexTarget,C$c=C$rs.curBindTexValue;C$rs.bindTexture(C$X,3553,this._source),C$X.pixelStorei(37441,!0),C$X.texSubImage2D(3553,0,C$M,C$T,6408,5121,C$s._source),C$X.pixelStorei(37441,!1),C$x&&C$c&&C$rs.bindTexture(C$X,C$x,C$c)},C$M.toBase64=function(C$s,C$M,C$T){var C$X=null;this._canvas&&(C$X=this._canvas.toDataURL(C$s,C$M)),C$T.call(this,C$X)},C$X(0,C$M,"context",function(){return this._ctx}),C$X(0,C$M,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),C$X(0,C$M,"asBitmap",null,function(C$s){this._ctx&&(this._ctx.asBitmap=C$s)}),C$x._createContext=null,C$x.premulAlpha=!1,C$x}(),C$ns=function(C$s){function C$c(C$s,C$M){this.CborderSize=12,C$c.__super.call(this),this.char=C$s,this.isSpace=" "===C$s,this.xs=C$M.scaleX,this.ys=C$M.scaleY,this.font=C$M.font.toString(),this.fontSize=C$M.font.size,this.fillColor=C$M.fillColor,this.borderColor=C$M.borderColor,this.lineWidth=C$M.lineWidth,this.underLine=C$M.underLine;var C$T,C$X=C$f.isConchApp;C$X?((C$T=ConchTextCanvas)._source=ConchTextCanvas,C$T._source.canvas=ConchTextCanvas):C$T=C$R.canvas.source,this.canvas=C$T,this._enableMerageInAtlas=!0,this._ctx=C$X?C$T:this.canvas.getContext("2d",void 0);var C$x=C$Y.measureText(this.char,this.font);this.cw=C$x.width*this.xs,this.ch=(C$x.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new C$m(this)}C$_(C$c,"laya.webgl.resource.WebGLCharImage",C$T);var C$M=C$c.prototype;return C$N.imps(C$M,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),C$M.active=function(){this.texture.active()},C$M.recreateResource=function(){var C$s=C$f.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),C$s){var C$M=this.fontSize;1==this.xs&&1==this.ys||(C$M=parseInt(C$M*(this.xs>this.ys?this.xs:this.ys)+""));var C$T="normal 100 "+this.font;C$T=C$T.replace(C$c._fontSizeReg,C$M),this.borderColor&&(C$T+=" 1 "+this.borderColor),this._ctx.font=C$T,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,C$C.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var C$X=this._ctx.measureText(this.char);C$X||(C$X={width:16});var C$x=C$X.width+1;this._ctx.lineTo(C$x,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},C$M.onresize=function(C$s,C$M){this._w=C$s,this._h=C$M,this._allowMerageInAtlas=!0},C$M.clearAtlasSource=function(){},C$X(0,C$M,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),C$X(0,C$M,"atlasSource",function(){return this.canvas}),C$X(0,C$M,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(C$s){this._enableMerageInAtlas=C$s}),C$c.createOneChar=function(C$s,C$M){return new C$c(C$s,C$M)},C$c._fontSizeReg=new RegExp("\\d+(?=px)","g"),C$c}(),C$$s=function(C$s){function C$O(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){void 0===C$T&&(C$T=6408),void 0===C$X&&(C$X=5121),void 0===C$x&&(C$x=34041),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=-1),void 0===C$E&&(C$E=1),C$O.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=C$s,this._h=C$M,this._surfaceFormat=C$T,this._surfaceType=C$X,this._depthStencilFormat=C$x,this._mipMap=C$c,this._repeat=C$l,this._minFifter=C$u,this._magFifter=C$E}C$_(C$O,"laya.webgl.resource.WebGLRenderTarget",C$T);var C$M=C$O.prototype;return C$M.recreateResource=function(){var C$s=C$ts.mainContext;this._frameBuffer||(this._frameBuffer=C$s.createFramebuffer()),this._source||(this._source=C$s.createTexture());var C$M=C$rs.curBindTexTarget,C$T=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,this._source),C$s.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var C$X=this._minFifter,C$x=this._magFifter,C$c=this._repeat?10497:33071,C$l=C$U.isPOT(this._w,this._h);if(C$l?(this._mipMap?-1!==C$X||(C$X=9987):-1!==C$X||(C$X=9729),-1!==C$x||(C$x=9729),C$s.texParameteri(3553,10241,C$X),C$s.texParameteri(3553,10240,C$x),C$s.texParameteri(3553,10242,C$c),C$s.texParameteri(3553,10243,C$c),this._mipMap&&C$s.generateMipmap(3553)):(-1!==C$X||(C$X=9729),-1!==C$x||(C$x=9729),C$s.texParameteri(3553,10241,C$X),C$s.texParameteri(3553,10240,C$x),C$s.texParameteri(3553,10242,33071),C$s.texParameteri(3553,10243,33071)),C$s.bindFramebuffer(36160,this._frameBuffer),C$s.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=C$s.createRenderbuffer()),C$s.bindRenderbuffer(36161,this._depthStencilBuffer),C$s.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:C$s.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:C$s.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:C$s.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}C$s.bindFramebuffer(36160,null),C$M&&C$T&&C$rs.bindTexture(C$s,C$M,C$T),C$s.bindRenderbuffer(36161,null),C$l&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},C$M.disposeResource=function(){this._frameBuffer&&(C$ts.mainContext.deleteTexture(this._source),C$ts.mainContext.deleteFramebuffer(this._frameBuffer),C$ts.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},C$X(0,C$M,"depthStencilBuffer",function(){return this._depthStencilBuffer}),C$X(0,C$M,"frameBuffer",function(){return this._frameBuffer}),C$O}(),C$Fs=function(C$s){function C$u(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this.offsetX=0,this.offsetY=0,C$u.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=C$c,this.canvas=C$s,this._ctx=C$s.getContext("2d",void 0),this._w=C$X,this._h=C$x,this.offsetX=C$M,this.offsetY=C$T,this.src=C$l,this._enableMerageInAtlas=!0,C$b.enabled&&this._w<C$b.atlasLimitWidth&&this._h<C$b.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}C$_(C$u,"laya.webgl.resource.WebGLSubImage",C$T);var C$M=C$u.prototype;return C$N.imps(C$M,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),C$M.size=function(C$s,C$M){this._w=C$s,this._h=C$M,this._ctx&&this._ctx.size(C$s,C$M),this.canvas&&(this.canvas.height=C$M,this.canvas.width=C$s)},C$M.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},C$M.createWebGlTexture=function(){var C$s=C$ts.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var C$M=this._source=C$s.createTexture(),C$T=C$rs.curBindTexTarget,C$X=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,C$M),C$s.pixelStorei(37441,!0),C$s.texImage2D(3553,0,6408,6408,5121,this.canvas),C$s.pixelStorei(37441,!1);var C$x=this.minFifter,C$c=this.magFifter,C$l=this.repeat?10497:33071,C$u=C$U.isPOT(this.width,this.height);C$u?(this.mipmap?-1!==C$x||(C$x=9987):-1!==C$x||(C$x=9729),-1!==C$c||(C$c=9729),C$s.texParameteri(3553,10240,C$c),C$s.texParameteri(3553,10241,C$x),C$s.texParameteri(3553,10242,C$l),C$s.texParameteri(3553,10243,C$l),this.mipmap&&C$s.generateMipmap(3553)):(-1!==C$x||(C$x=9729),-1!==C$c||(C$c=9729),C$s.texParameteri(3553,10241,C$x),C$s.texParameteri(3553,10240,C$c),C$s.texParameteri(3553,10242,33071),C$s.texParameteri(3553,10243,33071)),C$T&&C$X&&C$rs.bindTexture(C$s,C$T,C$X),this.canvas=null,C$u&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},C$M.disposeResource=function(){C$b.enabled&&this._allowMerageInAtlas||!this._source||(C$ts.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},C$M.clearAtlasSource=function(){},C$X(0,C$M,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),C$X(0,C$M,"atlasSource",function(){return this.canvas}),C$X(0,C$M,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(C$s){this._allowMerageInAtlas=C$s}),C$u}(),C$Ws=function(C$s){function C$O(C$s,C$M,C$T,C$X){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,C$O.__super.call(this),!C$s||!C$M)throw"Shader Error";this._id=++C$O._count,this._vs=C$s,this._ps=C$M,this._nameMap=C$X||{},null!=C$T&&(C$O.sharders[C$T]=this)}C$_(C$O,"laya.webgl.shader.Shader",C$Ys);var C$M=C$O.prototype;return C$M.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},C$M.disposeResource=function(){C$ts.mainContext.deleteShader(this._vshader),C$ts.mainContext.deleteShader(this._pshader),C$ts.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},C$M._compile=function(){if(!C$ts.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var C$s=[this._vs,this._ps],C$M=C$ts.mainContext;if(this._program=C$M.createProgram(),this._vshader=C$O._createShader(C$M,C$s[0],35633),this._pshader=C$O._createShader(C$M,C$s[1],35632),C$M.attachShader(this._program,this._vshader),C$M.attachShader(this._program,this._pshader),C$M.linkProgram(this._program),!C$f.isConchApp&&!C$M.getProgramParameter(this._program,35714))throw C$M.getProgramInfoLog(this._program);var C$T,C$X,C$x=0,C$c=0;for(C$c=C$f.isConchApp?C$M.getProgramParameterEx(this._vs,this._ps,"",35721):C$M.getProgramParameter(this._program,35721),C$x=0;C$x<C$c;C$x++){var C$l=null;C$T={vartype:"attribute",glfun:null,ivartype:0,attrib:C$l=C$f.isConchApp?C$M.getActiveAttribEx(this._vs,this._ps,"",C$x):C$M.getActiveAttrib(this._program,C$x),location:C$M.getAttribLocation(this._program,C$l.name),name:C$l.name,type:C$l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(C$T)}var C$u=0;for(C$u=C$f.isConchApp?C$M.getProgramParameterEx(this._vs,this._ps,"",35718):C$M.getProgramParameter(this._program,35718),C$x=0;C$x<C$u;C$x++){var C$E=null;C$E=C$f.isConchApp?C$M.getActiveUniformEx(this._vs,this._ps,"",C$x):C$M.getActiveUniform(this._program,C$x),0<(C$T={vartype:"uniform",glfun:null,ivartype:1,attrib:C$l,location:C$M.getUniformLocation(this._program,C$E.name),name:C$E.name,type:C$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(C$T.name=C$T.name.substr(0,C$T.name.length-3),C$T.isArray=!0,C$T.location=C$M.getUniformLocation(this._program,C$T.name)),this._params.push(C$T)}for(C$x=0,C$X=this._params.length;C$x<C$X;C$x++)if((C$T=this._params[C$x]).indexOfParams=C$x,C$T.index=1,C$T.value=[C$T.location,null],C$T.codename=C$T.name,C$T.name=this._nameMap[C$T.codename]?this._nameMap[C$T.codename]:C$T.codename,(this._paramsMap[C$T.name]=C$T)._this=this,C$T.uploadedValue=[],"attribute"!==C$T.vartype)switch(C$T.type){case 5124:C$T.fun=C$T.isArray?this._uniform1iv:this._uniform1i;break;case 5126:C$T.fun=C$T.isArray?this._uniform1fv:this._uniform1f;break;case 35664:C$T.fun=C$T.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:C$T.fun=C$T.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:C$T.fun=C$T.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:C$T.fun=this._uniform_sampler2D;break;case 35680:C$T.fun=this._uniform_samplerCube;break;case 35676:C$T.glfun=C$M.uniformMatrix4fv,C$T.fun=this._uniformMatrix4fv;break;case 35670:C$T.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else C$T.fun=this._attribute}},C$M.getUniform=function(C$s){return this._paramsMap[C$s]},C$M._attribute=function(C$s,C$M){var C$T=C$ts.mainContext,C$X=C$ys._enableAtributes,C$x=C$s.location;return C$X[C$x]||C$T.enableVertexAttribArray(C$x),C$T.vertexAttribPointer(C$x,C$M[0],C$M[1],C$M[2],C$M[3],C$M[4]+this._offset),C$X[C$x]=C$ys._bindVertexBuffer,1},C$M._uniform1f=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M?(C$ts.mainContext.uniform1f(C$s.location,C$T[0]=C$M),1):0},C$M._uniform1fv=function(C$s,C$M){if(C$M.length<4){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$ts.mainContext.uniform1fv(C$s.location,C$M),C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3],1):0}return C$ts.mainContext.uniform1fv(C$s.location,C$M),1},C$M._uniform_vec2=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]?(C$ts.mainContext.uniform2f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1]),1):0},C$M._uniform_vec2v=function(C$s,C$M){if(C$M.length<2){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$ts.mainContext.uniform2fv(C$s.location,C$M),C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3],1):0}return C$ts.mainContext.uniform2fv(C$s.location,C$M),1},C$M._uniform_vec3=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]?(C$ts.mainContext.uniform3f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2]),1):0},C$M._uniform_vec3v=function(C$s,C$M){return C$ts.mainContext.uniform3fv(C$s.location,C$M),1},C$M._uniform_vec4=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$ts.mainContext.uniform4f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3]),1):0},C$M._uniform_vec4v=function(C$s,C$M){return C$ts.mainContext.uniform4fv(C$s.location,C$M),1},C$M._uniformMatrix2fv=function(C$s,C$M){return C$ts.mainContext.uniformMatrix2fv(C$s.location,!1,C$M),1},C$M._uniformMatrix3fv=function(C$s,C$M){return C$ts.mainContext.uniformMatrix3fv(C$s.location,!1,C$M),1},C$M._uniformMatrix4fv=function(C$s,C$M){return C$ts.mainContext.uniformMatrix4fv(C$s.location,!1,C$M),1},C$M._uniform1i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M?(C$ts.mainContext.uniform1i(C$s.location,C$T[0]=C$M),1):0},C$M._uniform1iv=function(C$s,C$M){return C$ts.mainContext.uniform1iv(C$s.location,C$M),1},C$M._uniform_ivec2=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]?(C$ts.mainContext.uniform2i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1]),1):0},C$M._uniform_ivec2v=function(C$s,C$M){return C$ts.mainContext.uniform2iv(C$s.location,C$M),1},C$M._uniform_vec3i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]?(C$ts.mainContext.uniform3i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2]),1):0},C$M._uniform_vec3vi=function(C$s,C$M){return C$ts.mainContext.uniform3iv(C$s.location,C$M),1},C$M._uniform_vec4i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$ts.mainContext.uniform4i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3]),1):0},C$M._uniform_vec4vi=function(C$s,C$M){return C$ts.mainContext.uniform4iv(C$s.location,C$M),1},C$M._uniform_sampler2D=function(C$s,C$M){var C$T=C$ts.mainContext,C$X=C$s.uploadedValue;return null==C$X[0]?(C$X[0]=this._curActTexIndex,C$T.uniform1i(C$s.location,this._curActTexIndex),C$T.activeTexture(C$O._TEXTURES[this._curActTexIndex]),C$rs.bindTexture(C$T,3553,C$M),this._curActTexIndex++,1):(C$T.activeTexture(C$O._TEXTURES[C$X[0]]),C$rs.bindTexture(C$T,3553,C$M),0)},C$M._uniform_samplerCube=function(C$s,C$M){var C$T=C$ts.mainContext,C$X=C$s.uploadedValue;return null==C$X[0]?(C$X[0]=this._curActTexIndex,C$T.uniform1i(C$s.location,this._curActTexIndex),C$T.activeTexture(C$O._TEXTURES[this._curActTexIndex]),C$rs.bindTexture(C$T,34067,C$M),this._curActTexIndex++,1):(C$T.activeTexture(C$O._TEXTURES[C$X[0]]),C$rs.bindTexture(C$T,34067,C$M),0)},C$M._noSetValue=function(C$s){console.log("no....:"+C$s.name)},C$M.uploadOne=function(C$s,C$M){this.activeResource(),C$rs.UseProgram(this._program);var C$T=this._paramsMap[C$s];C$T.fun.call(this,C$T,C$M)},C$M.uploadTexture2D=function(C$s){C$z.shaderCall++;var C$M=C$ts.mainContext;C$M.activeTexture(33984),C$rs.bindTexture(C$M,3553,C$s)},C$M.uploadTexture2D1=function(C$s){C$z.shaderCall++;var C$M=C$ts.mainContext;C$M.activeTexture(33985),C$rs.bindTexture(C$M,3553,C$s)},C$M.upload=function(C$s,C$M){C$Ys.activeShader=C$Ys.bindShader=this,this._lastUseFrameCount===C$z.loopCount||this.activeResource(),C$rs.UseProgram(this._program),this._reCompile?(C$M=this._params,this._reCompile=!1):C$M=C$M||this._params;C$ts.mainContext;for(var C$T,C$X,C$x=C$M.length,C$c=0,C$l=0;C$l<C$x;C$l++)null!==(C$X=C$s[(C$T=C$M[C$l]).name])&&(C$c+=C$T.fun.call(this,C$T,C$X));C$z.shaderCall+=C$c},C$M.uploadArray=function(C$s,C$M,C$T){C$Ys.activeShader=this,(C$Ys.bindShader=this).activeResource(),C$rs.UseProgram(this._program);this._params;for(var C$X,C$x,C$c=0,C$l=C$M-2;0<=C$l;C$l-=2)(C$x=this._paramsMap[C$s[C$l]])&&null!=(C$X=C$s[C$l+1])&&(C$T&&C$T[C$x.name]&&C$T[C$x.name].bind(),C$c+=C$x.fun.call(this,C$x,C$X));C$z.shaderCall+=C$c},C$M.getParams=function(){return this._params},C$O.getShader=function(C$s){return C$O.sharders[C$s]},C$O.create=function(C$s,C$M,C$T,C$X){return new C$O(C$s,C$M,C$T,C$X)},C$O.withCompile=function(C$s,C$M,C$T,C$X){if(C$T&&C$O.sharders[C$T])return C$O.sharders[C$T];var C$x=C$O._preCompileShader[2e-4*C$s];if(!C$x)throw new Error("withCompile shader err!"+C$s);return C$x.createShader(C$M,C$T,C$X)},C$O.withCompile2D=function(C$s,C$M,C$T,C$X,C$x){if(C$X&&C$O.sharders[C$X])return C$O.sharders[C$X];var C$c=C$O._preCompileShader[2e-4*C$s+C$M];if(!C$c)throw new Error("withCompile shader err!"+C$s+" "+C$M);return C$c.createShader(C$T,C$X,C$x)},C$O.addInclude=function(C$s,C$M){C$Ps.addInclude(C$s,C$M)},C$O.preCompile=function(C$s,C$M,C$T,C$X){var C$x=2e-4*C$s;C$O._preCompileShader[C$x]=new C$Ps(C$x,C$M,C$T,C$X)},C$O.preCompile2D=function(C$s,C$M,C$T,C$X,C$x){var C$c=2e-4*C$s+C$M;C$O._preCompileShader[C$c]=new C$Ps(C$c,C$T,C$X,C$x)},C$O._createShader=function(C$s,C$M,C$T){var C$X=C$s.createShader(C$T);return C$s.shaderSource(C$X,C$M),C$s.compileShader(C$X),C$X},C$O._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],C$O._count=0,C$O._preCompileShader={},C$O.SHADERNAME2ID=2e-4,C$O.sharders=((C$O.sharders=[]).length=32,C$O.sharders),C$l(C$O,["nameKey",function(){return this.nameKey=new C$B}]),C$O}(),C$as=function(C$s){function C$M(){this._maxsize=0,this._upload=!0,this._uploadSize=0,C$M.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}C$_(C$M,"laya.webgl.utils.Buffer2D",C$s);var C$T=C$M.prototype;return C$T.needSize=function(C$s){var C$M=this._byteLength;if(C$s){var C$T=this._byteLength+C$s;C$T<=this._buffer.byteLength||this._resizeBuffer(C$T<<1,!0),this._byteLength=C$T}return C$M},C$T._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),C$z.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,C$ys._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),C$ys._gl.bufferSubData(this._bufferType,0,this._buffer)},C$T._bufferSubData=function(C$s,C$M,C$T){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),this._maxsize=Math.max(this._maxsize,this._byteLength),C$z.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,C$ys._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),C$M||C$T){var C$X=this._buffer.slice(C$M,C$T);C$ys._gl.bufferSubData(this._bufferType,C$s,C$X)}else C$ys._gl.bufferSubData(this._bufferType,C$s,this._buffer)},C$T._checkArrayUse=function(){},C$T._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},C$T._bind_subUpload=function(C$s,C$M,C$T){return void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(C$s,C$M,C$T),!0)},C$T._resizeBuffer=function(C$s,C$M){if(C$s<this._buffer.byteLength)return this;if(this.memorySize=C$s,C$M&&this._buffer&&0<this._buffer.byteLength){var C$T=new ArrayBuffer(C$s);new Uint8Array(C$T).set(new Uint8Array(this._buffer),0),this._buffer=C$T}else this._buffer=new ArrayBuffer(C$s);return this._checkArrayUse(),this._upload=!0,this},C$T.append=function(C$s){this._upload=!0;var C$M,C$T;C$M=C$s.byteLength,C$s instanceof Uint8Array?(this._resizeBuffer(this._byteLength+C$M,!0),C$T=new Uint8Array(this._buffer,this._byteLength)):C$s instanceof Uint16Array?(this._resizeBuffer(this._byteLength+C$M,!0),C$T=new Uint16Array(this._buffer,this._byteLength)):C$s instanceof Float32Array&&(this._resizeBuffer(this._byteLength+C$M,!0),C$T=new Float32Array(this._buffer,this._byteLength)),C$T.set(C$s,0),this._byteLength+=C$M,this._checkArrayUse()},C$T.appendU16Array=function(C$s,C$M){this._resizeBuffer(this._byteLength+2*C$M,!0);for(var C$T=new Uint16Array(this._buffer,this._byteLength,C$M),C$X=0;C$X<C$M;C$X++)C$T[C$X]=C$s[C$X];this._byteLength+=2*C$M,this._checkArrayUse()},C$T.appendEx=function(C$s,C$M){this._upload=!0;var C$T;C$T=C$s.byteLength,this._resizeBuffer(this._byteLength+C$T,!0),new C$M(this._buffer,this._byteLength).set(C$s,0),this._byteLength+=C$T,this._checkArrayUse()},C$T.appendEx2=function(C$s,C$M,C$T,C$X){void 0===C$X&&(C$X=1),this._upload=!0;var C$x,C$c;C$x=C$T*C$X,this._resizeBuffer(this._byteLength+C$x,!0),C$c=new C$M(this._buffer,this._byteLength);var C$l=0;for(C$l=0;C$l<C$T;C$l++)C$c[C$l]=C$s[C$l];this._byteLength+=C$x,this._checkArrayUse()},C$T.getBuffer=function(){return this._buffer},C$T.setNeedUpload=function(){this._upload=!0},C$T.getNeedUpload=function(){return this._upload},C$T.upload=function(){var C$s=this._bind_upload();return C$ys._gl.bindBuffer(this._bufferType,null),C$ys._bindActive[this._bufferType]=null,C$Ys.activeShader=null,C$s},C$T.subUpload=function(C$s,C$M,C$T){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0);var C$X=this._bind_subUpload();return C$ys._gl.bindBuffer(this._bufferType,null),C$ys._bindActive[this._bufferType]=null,C$Ys.activeShader=null,C$X},C$T.disposeResource=function(){C$s.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},C$T.clear=function(){this._byteLength=0,this._upload=!0},C$X(0,C$T,"bufferLength",function(){return this._buffer.byteLength}),C$X(0,C$T,"byteLength",null,function(C$s){this._byteLength!==C$s&&(C$s<=this._buffer.byteLength||this._resizeBuffer(2*C$s+256,!0),this._byteLength=C$s)}),C$M.__int__=function(C$s){C$Hs.QuadrangleIB=C$Hs.create(35044),C$gs.fillIBQuadrangle(C$Hs.QuadrangleIB,16)},C$M.FLOAT32=4,C$M.SHORT=2,C$M}(C$ys),C$js=(function(C$M){function C$T(C$s){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,C$T.__super.call(this,9)}C$_(C$T,"laya.webgl.shader.d2.value.GlowSV",C$M);var C$s=C$T.prototype;C$s.setValue=function(C$s){C$M.prototype.setValue.call(this,C$s)},C$s.clear=function(){C$M.prototype.clear.call(this)}}(C$Ls),function(C$s){function C$M(C$s){C$M.__super.call(this,64),this.defines.add(64)}C$_(C$M,"laya.webgl.shader.d2.value.TextSV",C$s);var C$T=C$M.prototype;return C$T.release=function(){(C$M.pool[C$M._length++]=this).clear()},C$T.clear=function(){C$s.prototype.clear.call(this)},C$M.create=function(){return C$M._length?C$M.pool[--C$M._length]:new C$M(null)},C$M.pool=[],C$M._length=0,C$M}(C$Ls)),C$is=function(C$s){function C$x(C$s,C$M,C$T,C$X){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,C$x.__super.call(this,C$s,C$M,C$T,C$X)}C$_(C$x,"laya.webgl.shader.d2.Shader2X",C$s);var C$M=C$x.prototype;return C$M.upload2dQuick1=function(C$s){this.upload(C$s,this._params2dQuick1||this._make2dQuick1())},C$M._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var C$s,C$M=this._params,C$T=0,C$X=C$M.length;C$T<C$X;C$T++)C$s=C$M[C$T],(C$f.isFlash||"size"!==C$s.name&&"position"!==C$s.name&&"texcoord"!==C$s.name)&&this._params2dQuick1.push(C$s)}return this._params2dQuick1},C$M.disposeResource=function(){C$s.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},C$M.upload2dQuick2=function(C$s){this.upload(C$s,this._params2dQuick2||this._make2dQuick2())},C$M._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var C$s,C$M=this._params,C$T=0,C$X=C$M.length;C$T<C$X;C$T++)C$s=C$M[C$T],(C$f.isFlash||"size"!==C$s.name)&&this._params2dQuick2.push(C$s)}return this._params2dQuick2},C$x.create=function(C$s,C$M,C$T,C$X){return new C$x(C$s,C$M,C$T,C$X)},C$x}(C$Ws),C$Hs=function(C$s){function C$M(C$s){this._uint8Array=null,this._uint16Array=null,void 0===C$s&&(C$s=35044),C$M.__super.call(this),this._bufferUsage=C$s,this._bufferType=34963,C$f.isFlash||(this._buffer=new ArrayBuffer(8))}C$_(C$M,"laya.webgl.utils.IndexBuffer2D",C$as);var C$T=C$M.prototype;return C$T._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},C$T.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},C$T.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},C$T.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},C$M.QuadrangleIB=null,C$M.create=function(C$s){return void 0===C$s&&(C$s=35044),new C$M(C$s)},C$M}(),C$ds=function(C$s){function C$T(C$s,C$M){this._floatArray32=null,this._vertexStride=0,C$T.__super.call(this),this._vertexStride=C$s,this._bufferUsage=C$M,this._bufferType=34962,C$f.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}C$_(C$T,"laya.webgl.utils.VertexBuffer2D",C$s);var C$M=C$T.prototype;return C$M.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},C$M.bind=function(C$s){C$s&&C$s._bind(),this._bind()},C$M.insertData=function(C$s,C$M){this.getFloat32Array().set(C$s,C$M),this._upload=!0},C$M.bind_upload=function(C$s){C$s._bind_upload()||C$s._bind(),this._bind_upload()||this._bind()},C$M._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},C$M.disposeResource=function(){C$s.prototype.disposeResource.call(this)},C$M.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},C$X(0,C$M,"vertexStride",function(){return this._vertexStride}),C$T.create=function(C$s,C$M){return void 0===C$M&&(C$M=35048),new C$T(C$s,C$M)},C$T}(C$as),C$sM=function(C$s){function C$u(C$s,C$M,C$T,C$X,C$x,C$c){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===C$T&&(C$T=6408),void 0===C$X&&(C$X=!0),C$u.__super.call(this,C$s,C$M),C$s){if(this._format=C$T,this._mipmap=C$X,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof C$s)this._url=C$s,this._src=C$s,this._image=new C$R.window.Image,C$M&&(C$M.onload&&(this.onload=C$M.onload),C$M.onerror&&(this.onerror=C$M.onerror),C$M.onCreate&&C$M.onCreate(this)),this._image.crossOrigin=C$s&&0==C$s.indexOf("data:")?null:"",C$s&&(this._image.src=C$s);else if(C$s instanceof ArrayBuffer){this._src=C$M,this._url=this._src;var C$l=new C$E(C$s);C$l.readUTFBytes(4),C$l.readUTFBytes(2),C$l.getInt16();C$l.endian="bigEndian",this._w=C$l.getInt16(),this._h=C$l.getInt16();C$l.getInt16(),C$l.getInt16();this._image=new Uint8Array(C$s,C$l.pos),this._format=C$ts.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,C$b.enabled&&this._w<C$b.atlasLimitWidth&&this._h<C$b.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(C$s instanceof Uint8Array))return this._src=C$M,this._url=this._src,this._image=C$s.source||C$s,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=C$M,this._url=this._src,this._w=C$x,this._h=C$c,this._image=C$s,this._format=0===C$T?C$s.byteLength/(C$x*C$c)==4?6408:6407:C$T}this._$5__enableMerageInAtlas=!0}}C$_(C$u,"laya.webgl.resource.WebGLImage",C$G);var C$M=C$u.prototype;return C$N.imps(C$M,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),C$M._init_=function(C$s,C$M){},C$M._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var C$s=C$ts.mainContext,C$M=this._source=C$s.createTexture(),C$T=C$rs.curBindTexTarget,C$X=C$rs.curBindTexValue;C$rs.bindTexture(C$s,3553,C$M);var C$x=this.minFifter,C$c=this.magFifter,C$l=this.repeat?10497:33071,C$u=C$U.isPOT(this._w,this._h),C$E=!1;switch(C$u?(this.mipmap?-1!==C$x||(C$x=9987):-1!==C$x||(C$x=9729),-1!==C$c||(C$c=9729),C$s.texParameteri(3553,10241,C$x),C$s.texParameteri(3553,10240,C$c),C$s.texParameteri(3553,10242,C$l),C$s.texParameteri(3553,10243,C$l),this.mipmap&&C$s.generateMipmap(3553)):(-1!==C$x||(C$x=9729),-1!==C$c||(C$c=9729),C$s.texParameteri(3553,10241,C$x),C$s.texParameteri(3553,10240,C$c),C$s.texParameteri(3553,10242,33071),C$s.texParameteri(3553,10243,33071)),C$s.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&C$s.pixelStorei(C$s.UNPACK_ALIGNMENT,1),C$s.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&C$s.pixelStorei(C$s.UNPACK_ALIGNMENT,1),C$s.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:C$E=!0,C$s.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case C$ts.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:C$E=!0,C$s.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}C$s.pixelStorei(37441,!1),C$T&&C$X&&C$rs.bindTexture(C$s,C$T,C$X),this.uri||(this.uri=this._url),C$E?this.memorySize=this._image.length:C$u&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},C$M.recreateResource=function(){var C$s=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var C$M=this;this._image=new C$R.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(C$M._needReleaseAgain)return C$M._needReleaseAgain=!1,C$M._image.onload=null,void(C$M._image=null);C$M._allowMerageInAtlas&&C$M._enableMerageInAtlas?(C$s.memorySize=0,C$s._recreateLock=!1):C$M._createWebGlTexture(),C$M.completeCreate()},this._image.src=this._src}},C$M.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&C$ts.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},C$M.onresize=function(){this._w=this._image.width,this._h=this._image.height,C$b.enabled&&this._w<C$b.atlasLimitWidth&&this._h<C$b.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},C$M.clearAtlasSource=function(){this._image=null},C$X(0,C$M,"format",function(){return this._format}),C$X(0,C$M,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(C$s){this._$5__enableMerageInAtlas=C$s}),C$X(0,C$M,"mipmap",function(){return this._mipmap}),C$X(0,C$M,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),C$X(0,C$M,"atlasSource",function(){return this._image}),C$X(0,C$M,"onload",null,function(C$s){var C$M=this;this._onload=C$s,this._image&&(this._image.onload=null!=this._onload?function(){C$M.onresize(),C$M._onload()}:null)}),C$X(0,C$M,"onerror",null,function(C$s){var C$M=this;this._onerror=C$s,this._image&&(this._image.onerror=null!=this._onerror?function(){C$M._onerror()}:null)}),C$u}();C$N.__init([C$Rs,C$V,C$ws,C$Ps])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}}),function(C$c,C$s,C$X){C$X.un,C$X.uns;var C$x=C$X.static,C$l=C$X.class,C$u=C$X.getset,C$E=(C$X.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),C$q=laya.utils.ClassUtils,C$p=(laya.events.Event,laya.utils.HTMLChar),C$O=laya.net.Loader,C$U=(laya.display.Node,laya.maths.Rectangle),C$_=laya.renders.Render,C$R=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),C$G=laya.utils.Stat,C$Y=laya.display.Text,C$g=laya.resource.Texture,C$f=laya.net.URL,C$J=laya.utils.Utils,C$P=function(){function C$R(){}return C$l(C$R,"laya.html.utils.HTMLParse"),C$R.parse=function(C$s,C$M,C$T){C$M=(C$M="<root>"+(C$M=C$M.replace(/<br>/g,"<br/>"))+"</root>").replace(C$R.spacePattern,C$R.char255);var C$X=C$J.parseXMLFromString(C$M);C$R._parseXML(C$s,C$X.childNodes[0].childNodes,C$T)},C$R._parseXML=function(C$s,C$M,C$T,C$X){var C$x=0,C$c=0;if(C$M.join||C$M.item)for(C$x=0,C$c=C$M.length;C$x<C$c;++C$x)C$R._parseXML(C$s,C$M[C$x],C$T,C$X);else{var C$l,C$u,C$E;if(3==C$M.nodeType)return void(C$s instanceof laya.html.dom.HTMLDivElement?(null==C$M.nodeName&&(C$M.nodeName="#text"),C$u=C$M.nodeName.toLowerCase(),0<(C$E=C$M.textContent.replace(/^\s+|\s+$/g,"")).length&&(C$l=C$q.getInstance(C$u))&&(C$s.addChild(C$l),C$l.innerTEXT=C$E.replace(C$R.char255AndOneSpacePattern," "))):0<(C$E=C$M.textContent.replace(/^\s+|\s+$/g,"")).length&&(C$s.innerTEXT=C$E.replace(C$R.char255AndOneSpacePattern," ")));if("#comment"==(C$u=C$M.nodeName.toLowerCase()))return;if(C$l=C$q.getInstance(C$u)){(C$l=C$s.addChild(C$l)).URI=C$T,C$l.href=C$X;var C$O=C$M.attributes;if(C$O&&0<C$O.length)for(C$x=0,C$c=C$O.length;C$x<C$c;++C$x){var C$U=C$O[C$x],C$p=C$U.nodeName,C$_=C$U.value;C$l._setAttributes(C$p,C$_)}C$R._parseXML(C$l,C$M.childNodes,C$T,C$l.href)}else C$R._parseXML(C$s,C$M.childNodes,C$T,C$X)}},C$R.char255=String.fromCharCode(255),C$R.spacePattern=/&nbsp;|&#160;/g,C$R.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),C$R}(),C$t=function(){function C$m(){}return C$l(C$m,"laya.html.utils.Layout"),C$m.later=function(C$s){null==C$m._will&&(C$m._will=[],C$X.stage.frameLoop(1,null,function(){if(!(C$m._will.length<1)){for(var C$s=0;C$s<C$m._will.length;C$s++)laya.html.utils.Layout.layout(C$m._will[C$s]);C$m._will.length=0}})),C$m._will.push(C$s)},C$m.layout=function(C$s){if(!C$s||!C$s._style)return null;if(0==(512&C$s._style._type))return null;C$s.getStyle()._type&=-513;var C$M=C$m._multiLineLayout(C$s);return C$_.isConchApp&&C$s.layaoutCallNative&&C$s.layaoutCallNative(),C$M},C$m._multiLineLayout=function(C$s){if(C$Y.RightToLeft)return C$m._multiLineLayout2(C$s);var C$M=new Array;C$s._addChildsToLayout(C$M);var C$T,C$X,C$x,C$c,C$l,C$u=0,C$E=C$M.length,C$O=C$s._getCSSStyle(),C$U=C$O.letterSpacing,C$p=C$O.leading,C$_=C$O.lineHeight,C$R=C$O._widthAuto()||!C$O.wordWrap,C$q=C$R?999999:C$s.width,C$G=(C$s.height,0),C$g=C$O.italic?C$O.fontSize/3:0,C$f=C$O._getAlign(),C$J=C$O._getValign(),C$P=0!==C$J||0!==C$f||0!=C$_,C$t=0,C$r=0,C$N=0,C$w=0,C$k=new Array,C$A=C$k[0]=new C$I,C$D=!1,C$h=!1;C$A.h=0,C$O.italic&&(C$q-=C$O.fontSize/3);var C$Q=0,C$v=!0;function C$z(){C$A.y=C$r,C$r+=C$A.h+C$p,0==C$A.h&&(C$r+=C$_),C$A.mWidth=C$Q,C$Q=0,C$A=new C$I,C$k.push(C$A),C$A.h=0,C$D=!(C$v=!(C$t=0))}for(C$u=0;C$u<C$E;C$u++)if(null!=(C$T=C$M[C$u]))if(C$v=!1,C$T instanceof laya.html.dom.HTMLBrElement)C$z(),C$A.y=C$r;else{if(C$T._isChar()){if((C$c=C$T).isWord)C$D=C$h||"\n"===C$c.char,C$A.wordStartIndex=C$A.elements.length;else{if(C$N=C$c.width+C$c.style.letterSpacin,0<C$k.length&&C$q<C$t+C$N&&0<C$A.wordStartIndex){var C$B;C$B=C$A.elements.length-C$A.wordStartIndex+1,C$A.elements.length=C$A.wordStartIndex,C$u-=C$B,C$z();continue}C$D=!1,C$Q+=C$c.width}C$N=C$c.width+C$U,C$w=C$c.height,C$h=!1,(C$D=C$D||C$q<C$t+C$N)&&C$z(),C$A.minTextHeight=Math.min(C$A.minTextHeight,C$T.height)}else C$X=C$T._getCSSStyle(),C$l=C$T,C$x=C$X.padding,0===C$X._getCssFloat()||(C$P=!0),C$D=C$h||C$X.lineElement,C$N=C$l.width*C$l._style._tf.scaleX+C$x[1]+C$x[3]+C$U,C$w=C$l.height*C$l._style._tf.scaleY+C$x[0]+C$x[2],C$h=C$X.lineElement,(C$D=C$D||C$q<C$t+C$N&&C$X.wordWrap)&&C$z();C$A.elements.push(C$T),C$A.h=Math.max(C$A.h,C$w),C$T.x=C$t,C$T.y=C$r,C$t+=C$N,C$A.w=C$t-C$U,C$A.y=C$r,C$G=Math.max(C$t+C$g,C$G)}else C$v||(C$t+=C$m.DIV_ELEMENT_PADDING),C$A.wordStartIndex=C$A.elements.length;if(C$r=C$A.y+C$A.h,C$P){var C$o=0,C$C=C$q;for(C$R&&0<C$s.width&&(C$C=C$s.width),C$u=0,C$E=C$k.length;C$u<C$E;C$u++)C$k[C$u].updatePos(0,C$C,C$u,C$o,C$f,C$J,C$_),C$o+=Math.max(C$_,C$k[C$u].h+C$p);C$r=C$o}return C$R&&(C$s.width=C$G),C$r>C$s.height&&(C$s.height=C$r),[C$G,C$r]},C$m._multiLineLayout2=function(C$s){var C$M=new Array;C$s._addChildsToLayout(C$M);var C$T,C$X,C$x,C$c,C$l,C$u=0,C$E=C$M.length,C$O=C$s._getCSSStyle(),C$U=C$O.letterSpacing,C$p=C$O.leading,C$_=C$O.lineHeight,C$R=C$O._widthAuto()||!C$O.wordWrap,C$q=C$R?999999:C$s.width,C$G=(C$s.height,0),C$g=C$O.italic?C$O.fontSize/3:0,C$f=2-C$O._getAlign(),C$J=C$O._getValign(),C$P=0!==C$J||0!=C$f||0!=C$_,C$t=0,C$r=0,C$N=0,C$w=0,C$k=new Array,C$A=C$k[0]=new C$I,C$D=!1,C$h=!1;C$A.h=0,C$O.italic&&(C$q-=C$O.fontSize/3);var C$Q=0,C$v=!0;function C$z(){C$A.y=C$r,C$r+=C$A.h+C$p,0==C$A.h&&(C$r+=C$_),C$A.mWidth=C$Q,C$Q=0,C$A=new C$I,C$k.push(C$A),C$A.h=0,C$D=!(C$v=!(C$t=0))}for(C$u=0;C$u<C$E;C$u++)if(null!=(C$T=C$M[C$u]))if(C$v=!1,C$T instanceof laya.html.dom.HTMLBrElement)C$z(),C$A.y=C$r;else{if(C$T._isChar()){if((C$c=C$T).isWord)C$D=C$h||"\n"===C$c.char,C$A.wordStartIndex=C$A.elements.length;else{if(0<C$k.length&&C$q<C$t+C$N&&0<C$A.wordStartIndex){var C$B;C$B=C$A.elements.length-C$A.wordStartIndex+1,C$A.elements.length=C$A.wordStartIndex,C$u-=C$B,C$z();continue}C$D=!1,C$Q+=C$c.width}C$N=C$c.width+C$U,C$w=C$c.height,C$h=!1,(C$D=C$D||C$q<C$t+C$N)&&C$z(),C$A.minTextHeight=Math.min(C$A.minTextHeight,C$T.height)}else C$X=C$T._getCSSStyle(),C$l=C$T,C$x=C$X.padding,0===C$X._getCssFloat()||(C$P=!0),C$D=C$h||C$X.lineElement,C$N=C$l.width*C$l._style._tf.scaleX+C$x[1]+C$x[3]+C$U,C$w=C$l.height*C$l._style._tf.scaleY+C$x[0]+C$x[2],C$h=C$X.lineElement,(C$D=C$D||C$q<C$t+C$N&&C$X.wordWrap)&&C$z();C$A.elements.push(C$T),C$A.h=Math.max(C$A.h,C$w),C$T.x=C$t,C$T.y=C$r,C$t+=C$N,C$A.w=C$t-C$U,C$A.y=C$r,C$G=Math.max(C$t+C$g,C$G)}else C$v||(C$t+=C$m.DIV_ELEMENT_PADDING),C$A.wordStartIndex=C$A.elements.length;if(C$r=C$A.y+C$A.h,C$P){var C$o=0,C$C=C$q;for(C$u=0,C$E=C$k.length;C$u<C$E;C$u++)C$k[C$u].updatePos(0,C$C,C$u,C$o,C$f,C$J,C$_),C$o+=Math.max(C$_,C$k[C$u].h+C$p);C$r=C$o}for(C$R&&(C$s.width=C$G),C$r>C$s.height&&(C$s.height=C$r),C$u=0,C$E=C$k.length;C$u<C$E;C$u++)C$k[C$u].revertOrder(C$q);return[C$G,C$r]},C$m._will=null,C$m.DIV_ELEMENT_PADDING=0,C$m}(),C$I=function(){function C$s(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}C$l(C$s,"laya.html.utils.LayoutLine");var C$M=C$s.prototype;return C$M.updatePos=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u,C$E=0;0<this.elements.length&&(C$E=(C$u=this.elements[this.elements.length-1]).x+C$u.width-this.elements[0].x);var C$O=0,C$U=NaN;1===C$x&&(C$O=(C$M-C$E)/2),2===C$x&&(C$O=C$M-C$E),0===C$l||0!=C$c||(C$c=1);for(var C$p=0,C$_=this.elements.length;C$p<C$_;C$p++){var C$R=(C$u=this.elements[C$p])._getCSSStyle();switch(0!==C$O&&(C$u.x+=C$O),C$R._getValign()){case 0:C$u.y=C$X;break;case 1:var C$q=0;99999!=this.minTextHeight&&(C$q=this.minTextHeight);var C$G=(C$q+C$l)/2;C$G=Math.max(C$G,this.h),C$U=(laya.html.dom.HTMLImageElement,C$X+C$G-C$u.height),C$u.y=C$U;break;case 2:C$u.y=C$X+(C$l-C$u.height)}}},C$M.revertOrder=function(C$s){var C$M;if(0<this.elements.length){var C$T,C$X=0;for(C$T=this.elements.length,C$X=0;C$X<C$T;C$X++)(C$M=this.elements[C$X]).x=C$s-C$M.x-C$M.width}},C$s}(),C$r=function(C$T){function C$M(){this.URI=null,this._href=null,C$M.__super.call(this),this._text=C$M._EMPTYTEXT,this.setStyle(new C$E(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}C$l(C$M,"laya.html.dom.HTMLElement",C$T);var C$s=C$M.prototype;return C$s.layaoutCallNative=function(){var C$s=0;if(this._childs&&0<(C$s=this._childs.length))for(var C$M=0;C$M<C$s;C$M++)this._childs[C$M].layaoutCallNative&&this._childs[C$M].layaoutCallNative();var C$T=this._getWords();C$T?laya.html.dom.HTMLElement.fillWords(this,C$T,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},C$s.appendChild=function(C$s){return this.addChild(C$s)},C$s._getWords2=function(){var C$s=this._text.text;if(!C$s||0===C$s.length)return null;var C$M,C$T,C$X=0,C$x=0;if(this._text.drawWords)C$T=this._text.drawWords;else{for(C$x=(C$M=C$s.split(" ")).length-1,C$T=[],C$X=0;C$X<C$x;C$X++)C$T.push(C$M[C$X]," ");0<=C$x&&C$T.push(C$M[C$x]),this._text.drawWords=C$T}var C$c,C$l=this._text.words;if(C$l&&C$l.length===C$T.length)return C$l;null===C$l&&(this._text.words=C$l=[]),C$l.length=C$T.length;var C$u=this.style,C$E=C$u.font;for(C$X=0,C$x=C$T.length;C$X<C$x;C$X++){C$c=C$J.measureText(C$T[C$X],C$E);var C$O=C$l[C$X]=new C$p(C$T[C$X],C$c.width,C$c.height||C$u.fontSize,C$u);if(1<C$O.char.length&&(C$O.charNum=C$O.char),this.href){var C$U=new C$R;this.addChild(C$U),C$O.setSprite(C$U)}}return C$l},C$s._getWords=function(){if(!C$Y.CharacterCache)return this._getWords2();var C$s=this._text.text;if(!C$s||0===C$s.length)return null;var C$M,C$T=this._text.words;if(C$T&&C$T.length===C$s.length)return C$T;null===C$T&&(this._text.words=C$T=[]),C$T.length=C$s.length;for(var C$X=this.style,C$x=C$X.font,C$c=0,C$l=C$s.length;C$c<C$l;C$c++)if(C$M=C$J.measureText(C$s.charAt(C$c),C$x)){var C$u=C$T[C$c]=new C$p(C$s.charAt(C$c),C$M.width,C$M.height||C$X.fontSize,C$X);if(this.href){var C$E=new C$R;this.addChild(C$E),C$u.setSprite(C$E)}}else console.warn("_getWords size is null"+C$s.charAt(C$c),C$x);return C$T},C$s.showLinkSprite=function(){var C$s=this._text.words;if(C$s)for(var C$M,C$T,C$X=[],C$x=0;C$x<C$s.length;C$x++)C$T=C$s[C$x],(C$M=new C$R).graphics.drawRect(0,0,C$T.width,C$T.height,"#ff0000"),C$M.width=C$T.width,C$M.height=C$T.height,this.addChild(C$M),C$X.push(C$M)},C$s._layoutLater=function(){var C$s=this.style;512&C$s._type||(C$s.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&C$s.block?(C$t.later(this),C$s._type|=512):this.parent&&this.parent._layoutLater())},C$s._setAttributes=function(C$s,C$M){switch(C$s){case"style":return void this.style.cssText(C$M);case"class":return void(this.className=C$M)}C$T.prototype._setAttributes.call(this,C$s,C$M)},C$s.updateHref=function(){if(null!=this._href){var C$s=this._getWords();if(C$s)for(var C$M,C$T,C$X=0;C$X<C$s.length;C$X++)(C$T=(C$M=C$s[C$X]).getSprite())&&(C$T.size(C$M.width,C$M.height),C$T.on("click",this,this.onLinkHandler))}},C$s.onLinkHandler=function(C$s){switch(C$s.type){case"click":for(var C$M=this;C$M;)C$M.event("link",[this.href]),C$M=C$M.parent}},C$s.formatURL=function(C$s){return this.URI?C$f.formatURL(C$s,this.URI?this.URI.path:null):C$s},C$u(0,C$s,"href",function(){return this._href},function(C$s){null!=(this._href=C$s)&&(this._getCSSStyle().underLine=1,this.updateHref())}),C$u(0,C$s,"color",null,function(C$s){this.style.color=C$s}),C$u(0,C$s,"onClick",null,function(C$s){C$X._runScript("fn=function(event){"+C$s+";}"),this.on("click",this,void 0)}),C$u(0,C$s,"id",null,function(C$s){C$N.document.setElementById(C$s,this)}),C$u(0,C$s,"innerTEXT",function(){return this._text.text},function(C$s){this.text=C$s}),C$u(0,C$s,"style",function(){return this._style}),C$u(0,C$s,"text",function(){return this._text.text},function(C$s){this._text==C$M._EMPTYTEXT?this._text={text:C$s,words:null}:(this._text.text=C$s,this._text.words&&(this._text.words.length=0)),C$_.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),C$u(0,C$s,"parent",C$T.prototype._$get_parent,function(C$s){if(C$s instanceof laya.html.dom.HTMLElement){var C$M=C$s;this.URI||(this.URI=C$M.URI),this.style.inherit(C$M.style)}C$X.superSet(C$R,this,"parent",C$s)}),C$u(0,C$s,"className",null,function(C$s){this.style.attrs(C$N.document.styleSheets["."+C$s])}),C$M.fillWords=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$s.graphics.clear();for(var C$u=0,C$E=C$M.length;C$u<C$E;C$u++){var C$O=C$M[C$u];C$s.graphics.fillText(C$O.char,C$O.x+C$T,C$O.y+C$X,C$x,C$c,"left",C$l)}},C$M._EMPTYTEXT={text:null,words:null},C$M}(C$R),C$M=(function(C$s){function C$M(){C$M.__super.call(this),this.style.lineElement=!0,this.style.block=!0}C$l(C$M,"laya.html.dom.HTMLBrElement",C$r)}(),function(C$s){function C$M(){this.contextHeight=NaN,this.contextWidth=NaN,C$M.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}C$l(C$M,"laya.html.dom.HTMLDivElement",C$s);var C$T=C$M.prototype;return C$T.appendHTML=function(C$s){C$P.parse(this,C$s,this.URI),this.layout()},C$T._addChildsToLayout=function(C$M){var C$s=this._getWords();if(null==C$s&&0==this._childs.length)return!1;C$s&&C$s.forEach(function(C$s){C$M.push(C$s)});for(var C$T=!0,C$X=0,C$x=this._childs.length;C$X<C$x;C$X++){var C$c=this._childs[C$X];C$T?C$T=!1:C$M.push(null),C$c._addToLayout(C$M)}return!0},C$T._addToLayout=function(C$s){this.layout()},C$T.layout=function(){if(this.style){this.style._type|=512;var C$s=C$t.layout(this);if(C$s){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new C$U);var C$M=this._$P.mHtmlBounds;C$M.x=C$M.y=0,C$M.width=this.contextWidth=C$s[0],C$M.height=this.contextHeight=C$s[1],this.setBounds(C$M)}}},C$u(0,C$T,"height",function(){return this._height?this._height:this.contextHeight},C$s.prototype._$set_height),C$u(0,C$T,"innerHTML",null,function(C$s){this.destroyChildren(),this.appendHTML(C$s)}),C$u(0,C$T,"width",function(){return this._width?this._width:this.contextWidth},function(C$s){var C$M=!1;C$M=0===C$s?C$s!=this._width:C$s!=this.width,C$X.superSet(C$r,this,"width",C$s),C$M&&this.layout()}),C$M}(C$r)),C$N=function(C$s){function C$M(){this.all=new Array,this.styleSheets=C$E.styleSheets,C$M.__super.call(this)}C$l(C$M,"laya.html.dom.HTMLDocument",C$r);var C$T=C$M.prototype;return C$T.getElementById=function(C$s){return this.all[C$s]},C$T.setElementById=function(C$s,C$M){this.all[C$s]=C$M},C$x(C$M,["document",function(){return this.document=new C$M}]),C$M}();(function(C$s){function C$M(){this._tex=null,this._url=null,this._renderArgs=[],C$M.__super.call(this),this.style.block=!0}C$l(C$M,"laya.html.dom.HTMLImageElement",C$r);var C$T=C$M.prototype;C$T._addToLayout=function(C$s){!this._style.absolute&&C$s.push(this)},C$T.render=function(C$s,C$M,C$T){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(C$G.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,C$s.ctx.drawTexture2(C$M,C$T,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},C$T.layaoutCallNative=function(){var C$s=0;if(this._childs&&0<(C$s=this._childs.length))for(var C$M=0;C$M<C$s;C$M++)this._childs[C$M].layaoutCallNative&&this._childs[C$M].layaoutCallNative()},C$u(0,C$T,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(C$s){this._width!==C$s&&(this._width=C$s,this._style.width=C$s,this.repaint())}),C$u(0,C$T,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(C$s){this._height!==C$s&&(this._height=C$s,this._style.height=C$s,this.repaint())}),C$T.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),C$O.clearCache(this,this._url),this._tex=null),C$r.prototype.destroy.call(this)},C$T.onloaded=function(){var C$s=this._style;C$s&&!C$s.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),C$s&&!C$s.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),C$_.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},C$T._loadImageComplete=function(C$s,C$M,C$T){if(!this._destroyed)if(null!=C$T)if(C$T instanceof ArrayBuffer){var C$X=new DataView(C$T);new laya.webgl.resource.WebGLImage(new Uint8Array(C$T,8),C$s,0,!1,C$X.getUint32(0),C$X.getUint32(4));this.onloaded()}else if(C$T instanceof C$g)C$O.imgMgrSet[C$s]=C$M,C$c.imgMgrLock(C$s,C$O.imgMgrSet[C$s]),this._url=C$s,this._tex=C$T,C$O.keepCache(this,C$s),C$O.cacheRes(C$s,this._tex),this.onloaded();else{var C$x=-1!=C$s.indexOf(".png",C$s.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(C$T,C$s,C$x,!1,C$T.width,C$T.height);this.onloaded()}else this.event("error","Load image failed")},C$u(0,C$T,"src",null,function(C$s){(C$s=this.formatURL(C$s),this._url!=C$s)&&(null!=this._tex&&(C$O.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=C$s,(this._tex=C$O.getRes(C$s))?(C$O.keepCache(this,C$s),this.onloaded()):C$c.imgMgrLoad(C$s,this._loadImageComplete.bind(this),2,!1))})})(),function(C$s){function C$M(){this.type=null,C$M.__super.call(this),this.visible=!1}C$l(C$M,"laya.html.dom.HTMLLinkElement",C$s);var C$T=C$M.prototype;C$T._onload=function(C$s){switch(this.type){case"text/css":C$E.parseCSS(C$s,this.URI)}},C$u(0,C$T,"href",C$s.prototype._$get_href,function(C$s){var C$M=this;C$s=this.formatURL(C$s),this.URI=new C$f(C$s);var C$T=new C$O;C$T.once("complete",null,function(C$s){C$M._onload(C$s)}),C$T.load(C$s,"text")}),C$M._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(C$r),function(C$s){function C$M(){C$M.__super.call(this),this.visible=!1}C$l(C$M,"laya.html.dom.HTMLStyleElement",C$s),C$u(0,C$M.prototype,"text",C$s.prototype._$get_text,function(C$s){C$E.parseCSS(C$s,null)})}(C$r),function(C$s){function C$M(){C$M.__super.call(this),this._getCSSStyle().valign="middle"}C$l(C$M,"laya.html.dom.HTMLIframeElement",C$s),C$u(0,C$M.prototype,"href",C$s.prototype._$get_href,function(C$T){var C$X=this;C$T=this.formatURL(C$T);var C$s=new C$O;C$s.once("complete",null,function(C$s){var C$M=C$X.URI;C$X.URI=new C$f(C$T),C$X.innerHTML=C$s,!C$M||(C$X.URI=C$M)}),C$s.load(C$T,"text")})}(C$M)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}}),function(C$x,C$s,C$G){C$G.un,C$G.uns;var C$X=C$G.static,C$c=C$G.class,C$l=C$G.getset,C$T=(C$G.__newvec,laya.display.Animation),C$g=(laya.utils.Browser,laya.utils.ClassUtils),C$u=laya.filters.ColorFilter,C$E=laya.utils.Ease,C$O=laya.events.Event,C$U=(laya.events.EventDispatcher,laya.display.css.Font),C$p=laya.display.FrameAnimation,C$M=laya.display.Graphics,C$_=laya.utils.Handler,C$R=laya.display.Input,C$J=laya.net.Loader,C$q=(laya.display.Node,laya.maths.Point),C$f=laya.maths.Rectangle,C$P=laya.renders.Render,C$t=laya.display.Sprite,C$r=laya.display.Text,C$N=laya.resource.Texture,C$w=laya.utils.Tween,C$k=laya.utils.Utils,C$A=laya.utils.WeakObject;C$G.interface("laya.ui.IItem"),C$G.interface("laya.ui.ISelect"),C$G.interface("laya.ui.IRender"),C$G.interface("laya.ui.IComponent"),C$G.interface("laya.ui.IBox","IComponent");var C$D=function(){function C$s(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return C$c(C$s,"laya.ui.LayoutStyle"),C$X(C$s,["EMPTY",function(){return this.EMPTY=new C$s}]),C$s}(),C$h=function(){function C$s(){}return C$c(C$s,"laya.ui.Styles"),C$s.labelColor="#000000",C$s.buttonStateNum=3,C$s.scrollBarMinNum=15,C$s.scrollBarDelayTime=500,C$X(C$s,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),C$s}(),C$Q=function(){function C$x(){}return C$c(C$x,"laya.ui.UIUtils"),C$x.fillArray=function(C$s,C$M,C$T){var C$X=C$s.concat();if(C$M)for(var C$x=C$M.split(","),C$c=0,C$l=Math.min(C$X.length,C$x.length);C$c<C$l;C$c++){var C$u=C$x[C$c];C$X[C$c]="true"==C$u||"false"!=C$u&&C$u,null!=C$T&&(C$X[C$c]=C$T(C$u))}return C$X},C$x.toColor=function(C$s){return C$k.toHexColor(C$s)},C$x.gray=function(C$s,C$M){void 0===C$M&&(C$M=!0),C$M?C$x.addFilter(C$s,C$x.grayFilter):C$x.clearFilter(C$s,C$u)},C$x.addFilter=function(C$s,C$M){var C$T=C$s.filters||[];C$T.push(C$M),C$s.filters=C$T},C$x.clearFilter=function(C$s,C$M){var C$T=C$s.filters;if(null!=C$T&&0<C$T.length){for(var C$X=C$T.length-1;-1<C$X;C$X--){var C$x=C$T[C$X];C$G.__typeof(C$x,C$M)&&C$T.splice(C$X,1)}C$s.filters=C$T}},C$x._getReplaceStr=function(C$s){return C$x.escapeSequence[C$s]},C$x.adptString=function(C$s){return C$s.replace(/\\(\w)/g,C$x._getReplaceStr)},C$x.getBindFun=function(C$s){var C$M=C$x._funMap.get(C$s);if(null==C$M){var C$T='"'+C$s+'"',C$X="(function(data){if(data==null)return;with(data){try{\nreturn "+(C$T=C$T.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";C$M=C$G._runScript(C$X),C$x._funMap.set(C$s,C$M)}return C$M},C$X(C$x,["grayFilter",function(){return this.grayFilter=new C$u([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new C$A}]),C$x}(),C$v=function(){function C$s(){}return C$c(C$s,"UIConfig"),C$s.touchScrollEnable=!0,C$s.mouseWheelEnable=!0,C$s.showButtons=!0,C$s.popupBgColor="#000000",C$s.popupBgAlpha=.5,C$s.closeDialogOnSide=!0,C$s}(),C$z=function(C$T){function C$f(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,C$f.__super.call(this),this._weakKeys=[]}C$c(C$f,"laya.ui.AutoBitmap",C$T);var C$s=C$f.prototype;return C$s.destroy=function(){if(C$J.clearObject(this,this._weakKey),this._weakKeys){for(var C$s=0,C$M=this._weakKeys.length;C$s<C$M;++C$s)C$J.clearObject(this,this._weakKeys[C$s]);this._weakKeys=null}C$T.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},C$s._setChanged=function(){this._isChanged||(this._isChanged=!0,C$G.timer.callLater(this,this.changeSource))},C$s.changeSource=function(){this._isChanged=!1;var C$s=this._source;if(C$s&&C$s.bitmap){var C$M=this.width,C$T=this.height,C$X=this._sizeGrid,C$x=C$s.sourceWidth,C$c=C$s.sourceHeight;if(!C$X||C$x===C$M&&C$c===C$T)this.cleanByTexture(C$s,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,C$M,C$T);else{C$J.clearObject(this,this._weakKey),C$s.$_GID||(C$s.$_GID=C$k.getGID());var C$l=C$s.$_GID+"."+C$M+"."+C$T+"."+C$X.join("."),C$u=C$J.findObject(C$l);if(C$k.isOKCmdList(C$u))return this._weakKey=C$l,C$J.keepObject(this,this._weakKey),void(this.cmds=C$u);this.clear();var C$E,C$O,C$U=C$X[0],C$p=C$X[1],C$_=C$X[2],C$R=C$X[3],C$q=C$X[4],C$G=!1;if(C$M==C$x&&(C$R=C$p=0),C$T==C$c&&(C$U=C$_=0),C$M<C$R+C$p){var C$g=C$M;C$G=!0,C$M=C$R+C$p,this.save(),this.clipRect(0,0,C$g,C$T)}C$R&&C$U&&(C$E=C$f.getTexture(C$s,0,0,C$R,C$U),C$O=this._weakKeys[0],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[0]=C$E.weakKey),this.drawTexture(C$E,0,0,C$R,C$U)):(C$J.clearObject(this,C$O),this._weakKeys[0]="")),C$p&&C$U&&(C$E=C$f.getTexture(C$s,C$x-C$p,0,C$p,C$U),C$O=this._weakKeys[1],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[1]=C$E.weakKey),this.drawTexture(C$E,C$M-C$p,0,C$p,C$U)):(C$J.clearObject(this,C$O),this._weakKeys[1]="")),C$R&&C$_&&(C$E=C$f.getTexture(C$s,0,C$c-C$_,C$R,C$_),C$O=this._weakKeys[2],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[2]=C$E.weakKey),this.drawTexture(C$E,0,C$T-C$_,C$R,C$_)):(C$J.clearObject(this,C$O),this._weakKeys[2]="")),C$p&&C$_&&(C$E=C$f.getTexture(C$s,C$x-C$p,C$c-C$_,C$p,C$_),C$O=this._weakKeys[3],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[3]=C$E.weakKey),this.drawTexture(C$E,C$M-C$p,C$T-C$_,C$p,C$_)):(C$J.clearObject(this,C$O),this._weakKeys[3]="")),C$U&&(C$E=C$f.getTexture(C$s,C$R,0,C$x-C$R-C$p,C$U),C$O=this._weakKeys[4],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[4]=C$E.weakKey),this.drawBitmap(C$q,C$E,C$R,0,C$M-C$R-C$p,C$U)):(C$J.clearObject(this,C$O),this._weakKeys[4]="")),C$_&&(C$E=C$f.getTexture(C$s,C$R,C$c-C$_,C$x-C$R-C$p,C$_),C$O=this._weakKeys[5],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[5]=C$E.weakKey),this.drawBitmap(C$q,C$E,C$R,C$T-C$_,C$M-C$R-C$p,C$_)):(C$J.clearObject(this,C$O),this._weakKeys[5]="")),C$R&&(C$E=C$f.getTexture(C$s,0,C$U,C$R,C$c-C$U-C$_),C$O=this._weakKeys[6],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[6]=C$E.weakKey),this.drawBitmap(C$q,C$E,0,C$U,C$R,C$T-C$U-C$_)):(C$J.clearObject(this,C$O),this._weakKeys[6]="")),C$p&&(C$E=C$f.getTexture(C$s,C$x-C$p,C$U,C$p,C$c-C$U-C$_),C$O=this._weakKeys[7],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[7]=C$E.weakKey),this.drawBitmap(C$q,C$E,C$M-C$p,C$U,C$p,C$T-C$U-C$_)):(C$J.clearObject(this,C$O),this._weakKeys[7]="")),C$E=C$f.getTexture(C$s,C$R,C$U,C$x-C$R-C$p,C$c-C$U-C$_),C$O=this._weakKeys[8],C$E?(C$O!=C$E.weakKey&&(C$J.clearObject(this,C$O),C$J.keepObject(this,C$E.weakKey),this._weakKeys[8]=C$E.weakKey),this.drawBitmap(C$q,C$E,C$R,C$U,C$M-C$R-C$p,C$T-C$U-C$_)):(C$J.clearObject(this,C$O),this._weakKeys[8]=""),C$G&&this.restore(),this.autoCacheCmd&&!C$P.isConchApp&&(C$J.saveObject(C$l,this.cmds,null),this._weakKey=C$l,C$J.keepObject(this,this._weakKey))}this._repaint()}},C$s.drawBitmap=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=0),C$x<.1||C$c<.1||(!C$s||C$M.width==C$x&&C$M.height==C$c?this.drawTexture(C$M,C$T,C$X,C$x,C$c):this.fillTexture(C$M,C$T,C$X,C$x,C$c))},C$s.clear=function(C$s){void 0===C$s&&(C$s=!0),C$T.prototype.clear.call(this,!1)},C$l(0,C$s,"sizeGrid",function(){return this._sizeGrid},function(C$s){this._sizeGrid=C$s,this._setChanged()}),C$l(0,C$s,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(C$s){this._width!=C$s&&(this._width=C$s,this._setChanged())}),C$l(0,C$s,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(C$s){this._height!=C$s&&(this._height=C$s,this._setChanged())}),C$l(0,C$s,"source",function(){return this._source},function(C$s){C$s?(this._source=C$s,this._setChanged()):(this._source=null,this.clear())}),C$f.getTexture=function(C$s,C$M,C$T,C$X,C$x){C$X<=0&&(C$X=1),C$x<=0&&(C$x=1),C$s.$_GID||(C$s.$_GID=C$k.getGID());var C$c=C$s.$_GID+"."+C$M+"."+C$T+"."+C$X+"."+C$x,C$l=C$J.findObject(C$c);if((!C$l||!C$l.source)&&(C$l=C$N.createFromTexture(C$s,C$M,C$T,C$X,C$x))){if(C$s.alphaTexture){var C$u=C$s.width/C$s.alphaTexture.width;C$l.alphaTexture=C$N.createFromTexture(C$s.alphaTexture,C$M/C$u,C$T/C$u,C$X/C$u,C$x/C$u)}C$J.saveObject(C$c,C$l),C$l.weakKey=C$c}return C$l},C$f}(C$M),C$B=(function(C$s){function C$M(){C$M.__super.call(this)}C$c(C$M,"laya.ui.UIEvent",C$O),C$M.SHOW_TIP="showtip",C$M.HIDE_TIP="hidetip"}(),function(C$M){function C$s(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,C$s.__super.call(this),this._layout=C$D.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}C$c(C$s,"laya.ui.Component",C$M);var C$T=C$s.prototype;return C$G.imps(C$T,{"laya.ui.IComponent":!0}),C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},C$T.preinitialize=function(){},C$T.createChildren=function(){},C$T.initialize=function(){},C$T.callLater=function(C$s,C$M){C$G.timer.callLater(this,C$s,C$M)},C$T.runCallLater=function(C$s){C$G.timer.runCallLater(this,C$s)},C$T.commitMeasure=function(){},C$T.changeSize=function(){this.event("resize")},C$T.getLayout=function(){return this._layout===C$D.EMPTY&&(this._layout=new C$D),this._layout},C$T._setLayoutEnabled=function(C$s){this._layout&&this._layout.enable!=C$s&&(this._layout.enable=C$s,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},C$T.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},C$T.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},C$T.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},C$T.resetLayoutX=function(){var C$s=this._layout;if(isNaN(C$s.anchorX)||(this.pivotX=C$s.anchorX*this.width),this.layoutEnabled){var C$M=this.parent;C$M&&(isNaN(C$s.centerX)?isNaN(C$s.left)?isNaN(C$s.right)||(this.x=Math.round(C$M.width-this.displayWidth-C$s.right+this.pivotX*this.scaleX)):(this.x=Math.round(C$s.left+this.pivotX*this.scaleX),isNaN(C$s.right)||(this.width=(C$M._width-C$s.left-C$s.right)/(this.scaleX||.01))):this.x=Math.round(.5*(C$M.width-this.displayWidth)+C$s.centerX+this.pivotX*this.scaleX))}},C$T.resetLayoutY=function(){var C$s=this._layout;if(isNaN(C$s.anchorY)||(this.pivotY=C$s.anchorY*this.height),this.layoutEnabled){var C$M=this.parent;C$M&&(isNaN(C$s.centerY)?isNaN(C$s.top)?isNaN(C$s.bottom)||(this.y=Math.round(C$M.height-this.displayHeight-C$s.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(C$s.top+this.pivotY*this.scaleY),isNaN(C$s.bottom)||(this.height=(C$M._height-C$s.top-C$s.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(C$M.height-this.displayHeight)+C$s.centerY+this.pivotY*this.scaleY))}},C$T.onMouseOver=function(C$s){C$G.stage.event("showtip",this._toolTip)},C$T.onMouseOut=function(C$s){C$G.stage.event("hidetip",this._toolTip)},C$l(0,C$T,"displayWidth",function(){return this.width*this.scaleX}),C$l(0,C$T,"width",function(){return this._width?this._width:this.measureWidth},function(C$s){this._width!=C$s&&(this._width=C$s,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),C$l(0,C$T,"measureWidth",function(){var C$s=0;this.commitMeasure();for(var C$M=this.numChildren-1;-1<C$M;C$M--){var C$T=this.getChildAt(C$M);C$T.visible&&(C$s=Math.max(C$T.x+C$T.width*C$T.scaleX,C$s))}return C$s}),C$l(0,C$T,"displayHeight",function(){return this.height*this.scaleY}),C$l(0,C$T,"height",function(){return this._height?this._height:this.measureHeight},function(C$s){this._height!=C$s&&(this._height=C$s,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),C$l(0,C$T,"dataSource",function(){return this._dataSource},function(C$s){for(var C$M in this._dataSource=C$s,this._dataSource)this.hasOwnProperty(C$M)&&"function"!=typeof this[C$M]&&(this[C$M]=this._dataSource[C$M])}),C$l(0,C$T,"scaleY",C$M.prototype._$get_scaleY,function(C$s){C$G.superGet(C$t,this,"scaleY")!=C$s&&(C$G.superSet(C$t,this,"scaleY",C$s),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),C$l(0,C$T,"measureHeight",function(){var C$s=0;this.commitMeasure();for(var C$M=this.numChildren-1;-1<C$M;C$M--){var C$T=this.getChildAt(C$M);C$T.visible&&(C$s=Math.max(C$T.y+C$T.height*C$T.scaleY,C$s))}return C$s}),C$l(0,C$T,"scaleX",C$M.prototype._$get_scaleX,function(C$s){C$G.superGet(C$t,this,"scaleX")!=C$s&&(C$G.superSet(C$t,this,"scaleX",C$s),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),C$l(0,C$T,"top",function(){return this._layout.top},function(C$s){C$s!=this._layout.top&&(this.getLayout().top=C$s,this._setLayoutEnabled(!0)),this.resetLayoutY()}),C$l(0,C$T,"bottom",function(){return this._layout.bottom},function(C$s){C$s!=this._layout.bottom&&(this.getLayout().bottom=C$s,this._setLayoutEnabled(!0)),this.resetLayoutY()}),C$l(0,C$T,"left",function(){return this._layout.left},function(C$s){C$s!=this._layout.left&&(this.getLayout().left=C$s,this._setLayoutEnabled(!0)),this.resetLayoutX()}),C$l(0,C$T,"right",function(){return this._layout.right},function(C$s){C$s!=this._layout.right&&(this.getLayout().right=C$s,this._setLayoutEnabled(!0)),this.resetLayoutX()}),C$l(0,C$T,"centerX",function(){return this._layout.centerX},function(C$s){C$s!=this._layout.centerX&&(this.getLayout().centerX=C$s,this._setLayoutEnabled(!0)),this.resetLayoutX()}),C$l(0,C$T,"centerY",function(){return this._layout.centerY},function(C$s){C$s!=this._layout.centerY&&(this.getLayout().centerY=C$s,this._setLayoutEnabled(!0)),this.resetLayoutY()}),C$l(0,C$T,"anchorX",function(){return this._layout.anchorX},function(C$s){C$s!=this._layout.anchorX&&(this.getLayout().anchorX=C$s,this._setLayoutEnabled(!0)),this.resetLayoutX()}),C$l(0,C$T,"anchorY",function(){return this._layout.anchorY},function(C$s){C$s!=this._layout.anchorY&&(this.getLayout().anchorY=C$s,this._setLayoutEnabled(!0)),this.resetLayoutY()}),C$l(0,C$T,"tag",function(){return this._tag},function(C$s){this._tag=C$s}),C$l(0,C$T,"toolTip",function(){return this._toolTip},function(C$s){this._toolTip!=C$s&&(null!=(this._toolTip=C$s)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),C$l(0,C$T,"comXml",function(){return this._comXml},function(C$s){this._comXml=C$s}),C$l(0,C$T,"gray",function(){return this._gray},function(C$s){C$s!==this._gray&&(this._gray=C$s,C$Q.gray(this,C$s))}),C$l(0,C$T,"disabled",function(){return this._disabled},function(C$s){C$s!==this._disabled&&(this.gray=this._disabled=C$s,this.mouseEnabled=!C$s)}),C$s}(C$t)),C$o=function(C$s){function C$M(){this.lockLayer=null,this.popupEffect=function(C$s){C$s.scale(1,1),C$w.from(C$s,{x:C$G.stage.width/2,y:C$G.stage.height/2,scaleX:0,scaleY:0},300,C$E.backOut,C$_.create(this,this.doOpen,[C$s]))},this.closeEffect=function(C$s,C$M){C$w.to(C$s,{x:C$G.stage.width/2,y:C$G.stage.height/2,scaleX:0,scaleY:0},300,C$E.strongOut,C$_.create(this,this.doClose,[C$s,C$M]))},C$M.__super.call(this),this.maskLayer=new C$t,this.popupEffectHandler=C$_.create(this,this.popupEffect,null,!1),this.closeEffectHandler=C$_.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,C$G.stage.addChild(this),C$G.stage.on("resize",this,this._onResize),C$v.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}C$c(C$M,"laya.ui.DialogManager",C$t);var C$T=C$M.prototype;return C$T._closeOnSide=function(){var C$s=this.getChildAt(this.numChildren-1);C$s instanceof laya.ui.Dialog&&C$s.close("side")},C$T.setLockView=function(C$s){this.lockLayer||(this.lockLayer=new C$C,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(C$G.stage.width,C$G.stage.height)),this.lockLayer.removeChildren(),C$s&&(C$s.centerX=C$s.centerY=0,this.lockLayer.addChild(C$s))},C$T._onResize=function(C$s){var C$M=this.maskLayer.width=C$G.stage.width,C$T=this.maskLayer.height=C$G.stage.height;this.lockLayer&&this.lockLayer.size(C$M,C$T),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,C$M,C$T,C$v.popupBgColor),this.maskLayer.alpha=C$v.popupBgAlpha;for(var C$X=this.numChildren-1;-1<C$X;C$X--){var C$x=this.getChildAt(C$X);C$x.popupCenter&&this._centerDialog(C$x)}},C$T._centerDialog=function(C$s){C$s.x=Math.round((C$G.stage.width-C$s.width>>1)+C$s.pivotX),C$s.y=Math.round((C$G.stage.height-C$s.height>>1)+C$s.pivotY)},C$T.open=function(C$s,C$M,C$T){void 0===C$M&&(C$M=!1),void 0===C$T&&(C$T=!1),C$M&&this._closeAll(),C$s.popupCenter&&this._centerDialog(C$s),this.addChild(C$s),(C$s.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),C$T&&null!=C$s.popupEffect?C$s.popupEffect.runWith(C$s):this.doOpen(C$s),this.event("open")},C$T.doOpen=function(C$s){C$s.onOpened()},C$T.lock=function(C$s){this.lockLayer&&(C$s?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},C$T.close=function(C$s,C$M,C$T){void 0===C$T&&(C$T=!1),C$T&&null!=C$s.closeEffect?C$s.closeEffect.runWith([C$s,C$M]):this.doClose(C$s,C$M),this.event("close")},C$T.doClose=function(C$s,C$M){C$s.removeSelf(),C$s.isModal&&this._checkMask(),C$s.closeHandler&&C$s.closeHandler.runWith(C$M),C$s.onClosed(C$M)},C$T.closeAll=function(){this._closeAll(),this.event("close")},C$T._closeAll=function(){for(var C$s=this.numChildren-1;-1<C$s;C$s--){var C$M=this.getChildAt(C$s);C$M&&null!=C$M.close&&this.doClose(C$M)}},C$T.getDialogsByGroup=function(C$s){for(var C$M=[],C$T=this.numChildren-1;-1<C$T;C$T--){var C$X=this.getChildAt(C$T);C$X&&C$X.group===C$s&&C$M.push(C$X)}return C$M},C$T.closeByGroup=function(C$s){for(var C$M=[],C$T=this.numChildren-1;-1<C$T;C$T--){var C$X=this.getChildAt(C$T);C$X&&C$X.group===C$s&&(C$X.close(),C$M.push(C$X))}return C$M},C$T._checkMask=function(){this.maskLayer.removeSelf();for(var C$s=this.numChildren-1;-1<C$s;C$s--){var C$M=this.getChildAt(C$s);if(C$M&&C$M.isModal)return void this.addChildAt(this.maskLayer,C$s)}},C$M}(),C$C=function(C$s){function C$M(){C$M.__super.call(this)}C$c(C$M,"laya.ui.Box",C$s);var C$T=C$M.prototype;return C$G.imps(C$T,{"laya.ui.IBox":!0}),C$l(0,C$T,"dataSource",C$s.prototype._$get_dataSource,function(C$s){for(var C$M in this._dataSource=C$s){var C$T=this.getChildByName(C$M);C$T?C$T.dataSource=C$s[C$M]:this.hasOwnProperty(C$M)&&"function"!=typeof this[C$M]&&(this[C$M]=C$s[C$M])}}),C$M}(C$B),C$m=function(C$M){function C$T(C$s,C$M){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,C$T.__super.call(this),this._labelColors=C$h.buttonLabelColors,this._stateNum=C$h.buttonStateNum,void 0===C$M&&(C$M=""),this.skin=C$s,this.label=C$M}C$c(C$T,"laya.ui.Button",C$M);var C$s=C$T.prototype;return C$G.imps(C$s,{"laya.ui.ISelect":!0}),C$s.destroy=function(C$s){this.clearEvent(),C$J.clearCache(this,this._skin),C$J.clearObject(this,this._weakKey),void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(C$s),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},C$s.clearEvent=function(){this._skin&&C$x.atalsNotify&&C$x.atalsNotify.off(this._skin,this,this._setBtnSource)},C$s.createChildren=function(){this.graphics=this._bitmap=new C$z},C$s.createText=function(){this._text||(this._text=new C$r,this._text.overflow=C$r.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},C$s.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},C$s.onMouse=function(C$s){if(!1!==this.toggle||!this._selected)return"click"===C$s.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=C$T.stateMap[C$s.type]))},C$s.changeClips=function(){var C$s=C$J.getRes(this._skin);if(C$s)if(this._skin&&""!=this._skin){C$J.clearObject(this,this._weakKey);var C$M=C$s.sourceWidth,C$T=C$s.sourceHeight/this._stateNum;C$s.$_GID||(C$s.$_GID=C$k.getGID());var C$X=C$s.$_GID+"-"+this._stateNum,C$x=C$J.findObject(C$X);if(C$k.isOkTextureList(C$x)||(C$x=null),C$x)this._weakKey=C$X,C$J.keepObject(this,this._weakKey),this._sources=C$x;else{if(this._sources=[],1===this._stateNum)this._sources.push(C$s);else for(var C$c=0;C$c<this._stateNum;C$c++){var C$l=C$N.createFromTexture(C$s,0,C$T*C$c,C$M,C$T);if(C$s.alphaTexture){var C$u=C$s.width/C$s.alphaTexture.width;C$l.alphaTexture=C$N.createFromTexture(C$s.alphaTexture,0/C$u,C$T*C$c/C$u,C$M/C$u,C$T/C$u)}this._sources.push(C$l)}C$J.saveObject(C$X,this._sources),this._weakKey=C$X,C$J.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||C$M,this._bitmap.height=this._height||C$T,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=C$M)}else console.warn("lose skin ",this._skin,this.name,this.__className)},C$s.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var C$s=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[C$s]),this.label&&(this._text.color=this._labelColors[C$s],this._strokeColors&&(this._text.strokeColor=this._strokeColors[C$s]))},C$s._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},C$l(0,C$s,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(C$s){this.createText(),this._text.strokeColor=C$s}),C$l(0,C$s,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){if(this._skin!=C$s)if(this.clearEvent(),C$J.clearCache(this,this._skin),this._skin=C$s,C$J.keepCache(this,this._skin),C$J.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var C$M=C$x.resAtalsObj&&C$x.resAtalsObj[this._skin];C$M?(C$x.atalsNotify&&C$x.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=C$M.sourceW),0==this.height&&(this.height=C$M.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),C$s._setBtnSource=function(C$s,C$M){C$s===this._skin&&C$M&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},C$l(0,C$s,"state",function(){return this._state},function(C$s){this._state!=C$s&&(this._state=C$s,this._setStateChanged())}),C$l(0,C$s,"text",function(){return this.createText(),this._text}),C$l(0,C$s,"stateNum",function(){return this._stateNum},function(C$s){"string"==typeof C$s&&(C$s=parseInt(C$s)),this._stateNum!=C$s&&(this._stateNum=C$s<1?1:3<C$s?3:C$s,this.callLater(this.changeClips))}),C$l(0,C$s,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(C$s){this._strokeColors=C$Q.fillArray(C$h.buttonLabelColors,C$s,String),this._setStateChanged()}),C$l(0,C$s,"labelColors",function(){return this._labelColors.join(",")},function(C$s){this._labelColors=C$Q.fillArray(C$h.buttonLabelColors,C$s,String),this._setStateChanged()}),C$l(0,C$s,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),C$l(0,C$s,"label",function(){return this._text?this._text.text:null},function(C$s){(this._text||C$s)&&(this.createText(),this._text.text!=C$s&&(C$s&&!this._text.parent&&this.addChild(this._text),this._text.text=(C$s+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),C$l(0,C$s,"selected",function(){return this._selected},function(C$s){this._selected!=C$s&&(this._selected=C$s,this.state=this._selected?2:0,this.event("change"))}),C$l(0,C$s,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(C$s){this.createText(),this._text.padding=C$Q.fillArray(C$h.labelPadding,C$s,Number)}),C$l(0,C$s,"labelSize",function(){return this.createText(),this._text.fontSize},function(C$s){this.createText(),this._text.fontSize=C$s}),C$l(0,C$s,"labelStroke",function(){return this.createText(),this._text.stroke},function(C$s){this.createText(),this._text.stroke=C$s}),C$l(0,C$s,"labelBold",function(){return this.createText(),this._text.bold},function(C$s){this.createText(),this._text.bold=C$s}),C$l(0,C$s,"labelFont",function(){return this.createText(),this._text.font},function(C$s){this.createText(),this._text.font=C$s}),C$l(0,C$s,"labelAlign",function(){return this.createText(),this._text.align},function(C$s){this.createText(),this._text.align=C$s}),C$l(0,C$s,"clickHandler",function(){return this._clickHandler},function(C$s){this._clickHandler=C$s}),C$l(0,C$s,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(C$s){this._bitmap.sizeGrid=C$Q.fillArray(C$h.defaultSizeGrid,C$s,Number)}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$B,this,"width",C$s),this._autoSize&&(this._bitmap.width=C$s,this._text&&(this._text.width=C$s))}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$B,this,"height",C$s),this._autoSize&&(this._bitmap.height=C$s,this._text&&(this._text.height=C$s))}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)||"string"==typeof C$s?this.label=C$s+"":C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(C$s){this._bitmap._offset=C$s?C$Q.fillArray([1,1],C$s,Number):[]}),C$X(C$T,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),C$T}(C$B),C$Y=function(C$M){function C$X(C$s,C$M,C$T){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,C$X.__super.call(this),void 0===C$M&&(C$M=1),void 0===C$T&&(C$T=1),this._clipX=C$M,this._clipY=C$T,this.skin=C$s}C$c(C$X,"laya.ui.Clip",C$M);var C$s=C$X.prototype;return C$s.destroy=function(C$s){this.clearEvent(),this.clearLoad(),C$J.clearCache(this,this._skin),C$J.clearObject(this,this._weakKey),void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},C$s.dispose=function(){this.destroy(!0),C$G.loader.clearRes(this._skin)},C$s.createChildren=function(){this.graphics=this._bitmap=new C$z},C$s._onDisplay=function(C$s){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},C$s.changeClip=function(){if(this._clipChanged=!1,this._skin){var C$s=C$J.getRes(this._skin);if(C$s)this.loadComplete(this._skin,C$s);else{if(C$x.resAtalsObj&&C$x.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=C$_.create(this,this.loadComplete,[this._skin]),this._progress=null,C$G.loader.load(this._skin,this._complete,this._progress)}}},C$s.loadComplete=function(C$s,C$M){if(C$s===this._skin&&C$M){C$J.clearObject(this,this._weakKey);var C$T=this._clipWidth||Math.ceil(C$M.sourceWidth/this._clipX),C$X=this._clipHeight||Math.ceil(C$M.sourceHeight/this._clipY),C$x=this._skin+C$T+C$X,C$c=C$J.findObject(C$x);if(C$k.isOkTextureList(C$c)||(C$c=null),C$c)this._weakKey=C$x,C$J.keepObject(this,this._weakKey),this._sources=C$c;else{this._sources=[];for(var C$l=0;C$l<this._clipY;C$l++)for(var C$u=0;C$u<this._clipX;C$u++){var C$E=C$N.createFromTexture(C$M,C$T*C$u,C$X*C$l,C$T,C$X);if(C$M.alphaTexture){var C$O=C$M.width/C$M.alphaTexture.width;C$E.alphaTexture=C$N.createFromTexture(C$M.alphaTexture,C$T*C$u/C$O,C$X*C$l/C$O,C$T/C$O,C$X/C$O)}this._sources.push(C$E)}C$J.saveObject(C$x,this._sources),this._weakKey=C$x,C$J.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},C$s.play=function(C$s,C$M){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=-1),this._isPlaying=!0,this.index=C$s,this._toIndex=C$M,this._index++,C$G.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},C$s._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},C$s.stop=function(){this._isPlaying=!1,C$G.timer.clear(this,this._loop),this.event("complete")},C$s._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},C$l(0,C$s,"interval",function(){return this._interval},function(C$s){this._interval!=C$s&&(this._interval=C$s,this._isPlaying&&this.play())}),C$s.clearEvent=function(){this._skin&&C$x.atalsNotify&&C$x.atalsNotify.off(this._skin,this,this._setBtnSource)},C$s.clearLoad=function(){this._skin&&((this._complete||this._progress)&&C$G.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},C$l(0,C$s,"skin",function(){return this._skin},function(C$s){if(this._skin!=C$s)if(this.clearLoad(),this.clearEvent(),C$J.clearCache(this,this._skin),this._skin=C$s){C$J.keepCache(this,this._skin);var C$M=C$J.getRes(C$s),C$T=C$x.resAtalsObj&&C$x.resAtalsObj[this._skin];!C$M&&C$T?C$x.atalsNotify&&C$x.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),C$s._setBtnSource=function(C$s,C$M){C$s===this._skin&&C$M&&(this.loadComplete(C$s,C$M),this.clearEvent())},C$l(0,C$s,"sources",function(){return this._sources},function(C$s){this._sources=C$s,this.index=this._index,this.event("loaded")}),C$l(0,C$s,"clipX",function(){return this._clipX},function(C$s){this._clipX=C$s||1,this._setClipChanged()}),C$l(0,C$s,"clipY",function(){return this._clipY},function(C$s){this._clipY=C$s||1,this._setClipChanged()}),C$l(0,C$s,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),C$l(0,C$s,"clipWidth",function(){return this._clipWidth},function(C$s){this._clipWidth=C$s,this._setClipChanged()}),C$l(0,C$s,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(C$s){this._bitmap.sizeGrid=C$Q.fillArray(C$h.defaultSizeGrid,C$s,Number)}),C$l(0,C$s,"group",function(){return this._group},function(C$s){C$s&&this._skin&&C$J.setGroup(this._skin,C$s),this._group=C$s}),C$l(0,C$s,"clipHeight",function(){return this._clipHeight},function(C$s){this._clipHeight=C$s,this._setClipChanged()}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$B,this,"width",C$s),this._bitmap.width=C$s}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$B,this,"height",C$s),this._bitmap.height=C$s}),C$l(0,C$s,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),C$l(0,C$s,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),C$l(0,C$s,"index",function(){return this._index},function(C$s){this._index=C$s,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[C$s]),this.event("change")}),C$l(0,C$s,"autoPlay",function(){return this._autoPlay},function(C$s){this._autoPlay!=C$s&&((this._autoPlay=C$s)?this.play():this.stop())}),C$l(0,C$s,"isPlaying",function(){return this._isPlaying},function(C$s){this._isPlaying=C$s}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)&&Math.floor(C$s)==C$s||"string"==typeof C$s?this.index=parseInt(C$s):C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"bitmap",function(){return this._bitmap}),C$X}(C$B),C$I=function(C$M){function C$s(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,C$s.__super.call(this)}C$c(C$s,"laya.ui.ColorPicker",C$M);var C$T=C$s.prototype;return C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._colorPanel&&this._colorPanel.destroy(C$s),this._colorButton&&this._colorButton.destroy(C$s),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},C$T.createChildren=function(){this.addChild(this._colorButton=new C$m),this._colorPanel=new C$C,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new C$t),this._colorPanel.addChild(this._colorBlock=new C$t),this._colorPanel.addChild(this._colorInput=new C$R)},C$T.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},C$T.onPanelMouseDown=function(C$s){C$s.stopPropagation()},C$T.changePanel=function(){this._panelChanged=!1;var C$s=this._colorPanel.graphics;C$s.clear(),C$s.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(C$s=this._colorTiles.graphics).clear();for(var C$M=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],C$T=0;C$T<12;C$T++)for(var C$X=0;C$X<20;C$X++){var C$x=0;C$x=0===C$X?C$M[C$T]:1===C$X?0:51*(((3*C$T+C$X/6)%3<<0)+3*(C$T/6<<0))<<16|C$X%6*51<<8|(C$T<<0)%6*51;var C$c=C$Q.toColor(C$x);this._colors.push(C$c);var C$l=C$X*this._gridSize,C$u=C$T*this._gridSize;C$s.drawRect(C$l,C$u,this._gridSize,this._gridSize,C$c,"#000000")}},C$T.onColorButtonClick=function(C$s){this._colorPanel.parent?this.close():this.open()},C$T.open=function(){var C$s=this.localToGlobal(new C$q),C$M=C$s.x+this._colorPanel.width<=C$G.stage.width?C$s.x:C$G.stage.width-this._colorPanel.width,C$T=C$s.y+this._colorButton.height;C$T=C$T+this._colorPanel.height<=C$G.stage.height?C$T:C$s.y-this._colorPanel.height,this._colorPanel.pos(C$M,C$T),this._colorPanel.zOrder=1001,C$G._currentStage.addChild(this._colorPanel),C$G.stage.on("mousedown",this,this.removeColorBox)},C$T.close=function(){C$G.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},C$T.removeColorBox=function(C$s){this.close()},C$T.onColorFieldKeyDown=function(C$s){13==C$s.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),C$s.stopPropagation())},C$T.onColorInputChange=function(C$s){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},C$T.onColorTilesClick=function(C$s){this.selectedColor=this.getColorByMouse(),this.close()},C$T.onColorTilesMouseMove=function(C$s){this._colorInput.focus=!1;var C$M=this.getColorByMouse();this._colorInput.text=C$M,this.drawBlock(C$M)},C$T.getColorByMouse=function(){var C$s=this._colorTiles.getMousePoint(),C$M=Math.floor(C$s.x/this._gridSize),C$T=Math.floor(C$s.y/this._gridSize);return this._colors[20*C$T+C$M]},C$T.drawBlock=function(C$s){var C$M=this._colorBlock.graphics;C$M.clear();var C$T=C$s||"#ffffff";C$M.drawRect(0,0,50,20,C$T,this._borderColor),C$s||C$M.drawLine(0,0,50,20,"#ff0000")},C$T.changeColor=function(){var C$s=this.graphics;C$s.clear();var C$M=this._selectedColor||"#000000";C$s.drawRect(0,0,this._colorButton.width,this._colorButton.height,C$M)},C$T._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},C$l(0,C$T,"inputBgColor",function(){return this._inputBgColor},function(C$s){this._inputBgColor=C$s,this._setPanelChanged()}),C$l(0,C$T,"selectedColor",function(){return this._selectedColor},function(C$s){this._selectedColor!=C$s&&(this._selectedColor=this._colorInput.text=C$s,this.drawBlock(C$s),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",C$O.EMPTY.setTo("change",this,this)))}),C$l(0,C$T,"skin",function(){return this._colorButton.skin},function(C$s){this._colorButton.skin=C$s,this.changeColor()}),C$l(0,C$T,"bgColor",function(){return this._bgColor},function(C$s){this._bgColor=C$s,this._setPanelChanged()}),C$l(0,C$T,"borderColor",function(){return this._borderColor},function(C$s){this._borderColor=C$s,this._setPanelChanged()}),C$l(0,C$T,"inputColor",function(){return this._inputColor},function(C$s){this._inputColor=C$s,this._setPanelChanged()}),C$s}(C$B),C$y=function(C$M){function C$T(C$s,C$M){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,C$T.__super.call(this),this._itemColors=C$h.comboBoxItemColors,this.skin=C$s,this.labels=C$M}C$c(C$T,"laya.ui.ComboBox",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._button&&this._button.destroy(C$s),this._list&&this._list.destroy(C$s),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},C$s.createChildren=function(){this.addChild(this._button=new C$m),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},C$s._createList=function(){this._list=new C$F,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},C$s._setListEvent=function(C$s){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=C$_.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},C$s.onListDown=function(C$s){C$s.stopPropagation()},C$s.onScrollBarDown=function(C$s){C$s.stopPropagation()},C$s.onButtonMouseDown=function(C$s){this.callLater(this.switchTo,[!this._isOpen])},C$s.changeList=function(){this._listChanged=!1;var C$s=this.width-2,C$M=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:C$s,height:this._itemHeight,fontSize:this._itemSize,color:C$M}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},C$s.onlistItemMouse=function(C$s,C$M){var C$T=C$s.type;if("mouseover"===C$T||"mouseout"===C$T){if(this._isCustomList)return;var C$X=this._list.getCell(C$M);if(!C$X)return;var C$x=C$X.getChildByName("label");C$x&&("mouseover"===C$T?(C$x.bgColor=this._itemColors[0],C$x.color=this._itemColors[1]):(C$x.bgColor=null,C$x.color=this._itemColors[2]))}else"click"===C$T&&(this.selectedIndex=C$M,this.isOpen=!1)},C$s.switchTo=function(C$s){this.isOpen=C$s},C$s.changeOpen=function(){this.isOpen=!this._isOpen},C$s.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var C$s=this._list.graphics;C$s.clear(),C$s.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var C$M=this._list.array||[],C$T=C$M.length=0,C$X=this._labels.length;C$T<C$X;C$T++)C$M.push({label:this._labels[C$T]});this._list.height=this._listHeight,this._list.array=C$M},C$s.changeSelected=function(){this._button.label=this.selectedLabel},C$s._onStageMouseWheel=function(C$s){this._list&&!this._list.contains(C$s.target)&&this.removeList(null)},C$s.removeList=function(C$s){C$G.stage.off("mousedown",this,this.removeList),C$G.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},C$l(0,C$s,"selectedIndex",function(){return this._selectedIndex},function(C$s){this._selectedIndex!=C$s&&(this._selectedIndex=C$s,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[C$O.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),C$l(0,C$s,"measureHeight",function(){return this._button.height}),C$l(0,C$s,"skin",function(){return this._button.skin},function(C$s){this._button.skin!=C$s&&(this._button.skin=C$s,this._listChanged=!0)}),C$l(0,C$s,"measureWidth",function(){return this._button.width}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$B,this,"width",C$s),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),C$l(0,C$s,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(C$s){this.selectedIndex=this._labels.indexOf(C$s)}),C$l(0,C$s,"labels",function(){return this._labels.join(",")},function(C$s){0<this._labels.length&&(this.selectedIndex=-1),C$s?this._labels=C$s.split(","):this._labels.length=0,this._itemChanged=!0}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$B,this,"height",C$s),this._button.height=this._height}),C$l(0,C$s,"selectHandler",function(){return this._selectHandler},function(C$s){this._selectHandler=C$s}),C$l(0,C$s,"visibleNum",function(){return this._visibleNum},function(C$s){this._visibleNum=C$s,this._listChanged=!0}),C$l(0,C$s,"labelBold",function(){return this._button.text.bold},function(C$s){this._button.text.bold=C$s}),C$l(0,C$s,"itemColors",function(){return String(this._itemColors)},function(C$s){this._itemColors=C$Q.fillArray(this._itemColors,C$s,String),this._listChanged=!0}),C$l(0,C$s,"itemSize",function(){return this._itemSize},function(C$s){this._itemSize=C$s,this._listChanged=!0}),C$l(0,C$s,"scrollBar",function(){return this.list.scrollBar}),C$l(0,C$s,"isOpen",function(){return this._isOpen},function(C$s){if(this._isOpen!=C$s)if(this._isOpen=C$s,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var C$M=this.localToGlobal(C$q.TEMP.setTo(0,0)),C$T=C$M.y+this._button.height;C$T=C$T+this._listHeight<=C$G.stage.height?C$T:C$M.y-this._listHeight,this._list.pos(C$M.x,C$T),this._list.zOrder=1001,C$G._currentStage.addChild(this._list),C$G.stage.once("mousedown",this,this.removeList),C$G.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),C$l(0,C$s,"scrollBarSkin",function(){return this._scrollBarSkin},function(C$s){this._scrollBarSkin=C$s}),C$l(0,C$s,"sizeGrid",function(){return this._button.sizeGrid},function(C$s){this._button.sizeGrid=C$s}),C$l(0,C$s,"button",function(){return this._button}),C$l(0,C$s,"list",function(){return this._list||this._createList(),this._list},function(C$s){C$s&&(C$s.removeSelf(),this._isCustomList=!0,this._list=C$s,this._setListEvent(C$s),this._itemHeight=C$s.getCell(0).height+C$s.spaceY)}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)&&Math.floor(C$s)==C$s||"string"==typeof C$s?this.selectedIndex=parseInt(C$s):C$s instanceof Array?this.labels=C$s.join(","):C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"labelColors",function(){return this._button.labelColors},function(C$s){this._button.labelColors!=C$s&&(this._button.labelColors=C$s)}),C$l(0,C$s,"labelPadding",function(){return this._button.text.padding.join(",")},function(C$s){this._button.text.padding=C$Q.fillArray(C$h.labelPadding,C$s,Number)}),C$l(0,C$s,"labelSize",function(){return this._button.text.fontSize},function(C$s){this._button.text.fontSize=C$s}),C$l(0,C$s,"labelFont",function(){return this._button.text.font},function(C$s){this._button.text.font=C$s}),C$l(0,C$s,"stateNum",function(){return this._button.stateNum},function(C$s){this._button.stateNum=C$s}),C$T}(C$B),C$e=function(C$M){function C$T(C$s){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,C$T.__super.call(this),this._showButtons=C$v.showButtons,this._touchScrollEnable=C$v.touchScrollEnable,this._mouseWheelEnable=C$v.mouseWheelEnable,this.skin=C$s,this.max=1}C$c(C$T,"laya.ui.ScrollBar",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),this.stopScroll(),this.target=null,C$M.prototype.destroy.call(this,C$s),this.upButton&&this.upButton.destroy(C$s),this.downButton&&this.downButton.destroy(C$s),this.slider&&this.slider.destroy(C$s),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},C$s.createChildren=function(){this.addChild(this.slider=new C$V),this.addChild(this.upButton=new C$m),this.addChild(this.downButton=new C$m)},C$s.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},C$s.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},C$s.onButtonMouseDown=function(C$s){var C$M=C$s.currentTarget===this.upButton;this.slide(C$M),C$G.timer.once(C$h.scrollBarDelayTime,this,this.startLoop,[C$M]),C$G.stage.once("mouseup",this,this.onStageMouseUp)},C$s.startLoop=function(C$s){C$G.timer.frameLoop(1,this,this.slide,[C$s])},C$s.slide=function(C$s){C$s?this.value-=this._scrollSize:this.value+=this._scrollSize},C$s.onStageMouseUp=function(C$s){C$G.timer.clear(this,this.startLoop),C$G.timer.clear(this,this.slide)},C$s.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},C$s.changeSize=function(){C$M.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},C$s.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},C$s.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},C$s.setScroll=function(C$s,C$M,C$T){this.runCallLater(this.changeSize),this.slider.setSlider(C$s,C$M,C$T),this.slider.bar.visible=0<C$M,!this._hide&&this.autoHide&&(this.visible=!1)},C$s.onTargetMouseWheel=function(C$s){this.value-=C$s.delta*this._scrollSize,this.target=this._target},C$s.onTargetMouseDown=function(C$s){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new C$q),this._lastPoint.setTo(C$G.stage.mouseX,C$G.stage.mouseY),C$G.timer.clear(this,this.tweenMove),C$w.clearTween(this),C$G.stage.once("mouseup",this,this.onStageMouseUp2),C$G.stage.once("mouseout",this,this.onStageMouseUp2),C$G.timer.frameLoop(1,this,this.loop)},C$s.loop=function(){var C$s=C$G.stage.mouseY,C$M=C$G.stage.mouseX;if(this._lastOffset=this.isVertical?C$s-this._lastPoint.y:C$M-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?C$G.stage._canvasTransform.getScaleY():C$G.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=C$M,this._lastPoint.y=C$s,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},C$s.onStageMouseUp2=function(C$s){if(C$G.stage.off("mouseup",this,this.onStageMouseUp2),C$G.stage.off("mouseout",this,this.onStageMouseUp2),C$G.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?C$w.to(this,{value:this.min},this.elasticBackTime,C$E.sineOut,C$_.create(this,this.elasticOver)):this._value>this.max&&C$w.to(this,{value:this.max},this.elasticBackTime,C$E.sineOut,C$_.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?C$G.stage.mouseY-this._lastPoint.y:C$G.stage.mouseX-this._lastPoint.x);for(var C$M=0,C$T=Math.min(this._offsets.length,3),C$X=0;C$X<C$T;C$X++)C$M+=this._offsets[this._offsets.length-1-C$X];if(this._lastOffset=C$M/C$T,(C$M=Math.abs(this._lastOffset))<2)return void this.event("end");60<C$M&&(this._lastOffset=0<this._lastOffset?60:-60);var C$x=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));C$G.timer.frameLoop(1,this,this.tweenMove,[C$x])}},C$s.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&C$w.to(this,{alpha:0},500),this.event("end")},C$s.tweenMove=function(C$s){this._lastOffset*=this.rollRatio;var C$M=NaN;if(0<C$s&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,C$M=.5*-(this.min-C$s-this.value),this._lastOffset>C$M&&(this._lastOffset=C$M)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,C$M=.5*-(this.max+C$s-this.value),this._lastOffset<C$M&&(this._lastOffset=C$M))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(C$G.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?C$w.to(this,{value:this.min},this.elasticBackTime,C$E.sineOut,C$_.create(this,this.elasticOver)):this._value>this.max?C$w.to(this,{value:this.max},this.elasticBackTime,C$E.sineOut,C$_.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&C$w.to(this,{alpha:0},500)}},C$s.stopScroll=function(){this.onStageMouseUp2(null),C$G.timer.clear(this,this.tweenMove),C$w.clearTween(this)},C$l(0,C$s,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){this._skin!=C$s&&(this._skin=C$s,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),C$l(0,C$s,"max",function(){return this.slider.max},function(C$s){this.slider.max=C$s}),C$l(0,C$s,"showButtons",function(){return this._showButtons},function(C$s){this._showButtons=C$s,this.callLater(this.changeScrollBar)}),C$l(0,C$s,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),C$l(0,C$s,"min",function(){return this.slider.min},function(C$s){this.slider.min=C$s}),C$l(0,C$s,"value",function(){return this._value},function(C$s){C$s!==this._value&&(this._value=C$s,this._isElastic||(this.slider._value!=C$s&&(this.slider._value=C$s,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),C$l(0,C$s,"isVertical",function(){return this.slider.isVertical},function(C$s){this.slider.isVertical=C$s}),C$l(0,C$s,"sizeGrid",function(){return this.slider.sizeGrid},function(C$s){this.slider.sizeGrid=C$s}),C$l(0,C$s,"scrollSize",function(){return this._scrollSize},function(C$s){this._scrollSize=C$s}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)||"string"==typeof C$s?this.value=Number(C$s):C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"thumbPercent",function(){return this._thumbPercent},function(C$s){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),C$s=1<=C$s?.99:C$s,this._thumbPercent=C$s,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*C$s,C$h.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*C$s,C$h.scrollBarMinNum))}),C$l(0,C$s,"target",function(){return this._target},function(C$s){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=C$s)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),C$l(0,C$s,"hide",function(){return this._hide},function(C$s){this._hide=C$s,this.visible=!C$s}),C$l(0,C$s,"touchScrollEnable",function(){return this._touchScrollEnable},function(C$s){this._touchScrollEnable=C$s,this.target=this._target}),C$l(0,C$s,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(C$s){this._mouseWheelEnable=C$s,this.target=this._target}),C$l(0,C$s,"tick",function(){return this.slider.tick},function(C$s){this.slider.tick=C$s}),C$T}(C$B),C$V=function(C$M){function C$T(C$s){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,C$T.__super.call(this),this.skin=C$s}C$c(C$T,"laya.ui.Slider",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._bg&&this._bg.destroy(C$s),this._bar&&this._bar.destroy(C$s),this._progress&&this._progress.destroy(C$s),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},C$s.createChildren=function(){this.addChild(this._bg=new C$b),this.addChild(this._bar=new C$m)},C$s.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},C$s.onBarMouseDown=function(C$s){this._globalSacle||(this._globalSacle=new C$q),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=C$G.stage.mouseX,this._ty=C$G.stage.mouseY,C$G.stage.on("mousemove",this,this.mouseMove),C$G.stage.once("mouseup",this,this.mouseUp),C$G.stage.once("mouseout",this,this.mouseUp),this.showValueText()},C$s.showValueText=function(){if(this.showLabel){var C$s=laya.ui.Slider.label;this.addChild(C$s),C$s.textField.changeText(this._value+""),this.isVertical?(C$s.x=this._bar.x+20,C$s.y=.5*(this._bar.height-C$s.height)+this._bar.y):(C$s.y=this._bar.y-20,C$s.x=.5*(this._bar.width-C$s.width)+this._bar.x)}},C$s.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},C$s.mouseUp=function(C$s){C$G.stage.off("mousemove",this,this.mouseMove),C$G.stage.off("mouseup",this,this.mouseUp),C$G.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},C$s.mouseMove=function(C$s){var C$M=this._value;this.isVertical?(this._bar.y+=(C$G.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(C$G.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=C$G.stage.mouseX,this._ty=C$G.stage.mouseY;var C$T=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*C$T)/C$T,this._value!=C$M&&this.sendChangeEvent(),this.showValueText()},C$s.sendChangeEvent=function(C$s){void 0===C$s&&(C$s="change"),this.event(C$s),this.changeHandler&&this.changeHandler.runWith(this._value)},C$s.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},C$s.changeSize=function(){C$M.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},C$s.setSlider=function(C$s,C$M,C$T){this._value=-1,this._min=C$s,this._max=C$s<C$M?C$M:C$s,this.value=C$T<C$s?C$s:C$M<C$T?C$M:C$T},C$s.changeValue=function(){var C$s=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*C$s)/C$s,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var C$M=this._max-this._min;0===C$M&&(C$M=1),this.isVertical?(this._bar.y=(this._value-this._min)/C$M*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/C$M*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},C$s.onBgMouseDown=function(C$s){var C$M=this._bg.getMousePoint();this.isVertical?this.value=C$M.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=C$M.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},C$l(0,C$s,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){if(this._skin!=C$s){this._skin=C$s,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var C$M=this._skin.replace(".png","$progress.png");C$J.getRes(C$M)&&(this._progress||(this.addChild(this._progress=new C$b),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=C$M),this.setBarPoint(),this.callLater(this.changeValue)}}),C$l(0,C$s,"allowClickBack",function(){return this._allowClickBack},function(C$s){this._allowClickBack!=C$s&&((this._allowClickBack=C$s)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),C$l(0,C$s,"max",function(){return this._max},function(C$s){this._max!=C$s&&(this._max=C$s,this.callLater(this.changeValue))}),C$l(0,C$s,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),C$l(0,C$s,"tick",function(){return this._tick},function(C$s){this._tick!=C$s&&(this._tick=C$s,this.callLater(this.changeValue))}),C$l(0,C$s,"sizeGrid",function(){return this._bg.sizeGrid},function(C$s){this._bg.sizeGrid=C$s,this._bar.sizeGrid=C$s,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),C$l(0,C$s,"min",function(){return this._min},function(C$s){this._min!=C$s&&(this._min=C$s,this.callLater(this.changeValue))}),C$l(0,C$s,"value",function(){return this._value},function(C$s){if(this._value!=C$s){var C$M=this._value;this._value=C$s,this.changeValue(),this._value!=C$M&&this.sendChangeEvent()}}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)||"string"==typeof C$s?this.value=Number(C$s):C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"bar",function(){return this._bar}),C$X(C$T,["label",function(){return this.label=new C$L}]),C$T}(C$B),C$b=function(C$M){function C$T(C$s){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,C$T.__super.call(this),this.skin=C$s}C$c(C$T,"laya.ui.Image",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,C$J.clearCache(this,this._skin)},C$s.dispose=function(){this.destroy(!0),C$J.clearCache(this,this._skin),this.clearEvent()},C$s.createChildren=function(){this.graphics=this._bitmap=new C$z},C$s.setSource=function(C$s,C$M){C$s===this._skin&&C$M&&(this.source=C$M,this.onCompResize(),this.clearEvent())},C$s.clearEvent=function(){this._skin&&C$x.atalsNotify&&C$x.atalsNotify.off(this._skin,this,this.setSource)},C$s.clearLoad=function(){this._skin&&((this._complete||this._progress)&&C$G.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},C$l(0,C$s,"source",function(){return this._bitmap.source},function(C$s){this._bitmap&&(this._bitmap.source=C$s,this.event("loaded"),this.repaint())}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"string"==typeof(this._dataSource=C$s)?this.skin=C$s:C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"measureHeight",function(){return this._bitmap.height}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){if(this._skin!=C$s)if(C$J.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=C$s){C$J.keepCache(this,this._skin);var C$M=C$J.getRes(C$s),C$T=C$x.resAtalsObj&&C$x.resAtalsObj[this._skin];C$M?(this.source=C$M,this.onCompResize()):C$T?(C$x.atalsNotify&&C$x.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=C$T.sourceW),0==this.height&&(this.height=C$T.sourceH)):(this._complete=C$_.create(this,this.setSource,[this._skin]),this._progress=null,C$G.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),C$l(0,C$s,"group",function(){return this._group},function(C$s){C$s&&this._skin&&C$J.setGroup(this._skin,C$s),this._group=C$s}),C$l(0,C$s,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(C$s){this._bitmap.sizeGrid=C$Q.fillArray(C$h.defaultSizeGrid,C$s,Number)}),C$l(0,C$s,"measureWidth",function(){return this._bitmap.width}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$B,this,"width",C$s),this._bitmap.width=0==C$s?1e-7:C$s}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$B,this,"height",C$s),this._bitmap.height=0==C$s?1e-7:C$s}),C$T}(C$B),C$L=function(C$M){function C$T(C$s){this._tf=null,C$T.__super.call(this),void 0===C$s&&(C$s=""),C$U.defaultColor=C$h.labelColor,this.text=C$s}C$c(C$T,"laya.ui.Label",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._tf=null},C$s.createChildren=function(){this.addChild(this._tf=new C$r)},C$s.changeText=function(C$s){this._tf.changeText(C$s)},C$l(0,C$s,"padding",function(){return this._tf.padding.join(",")},function(C$s){this._tf.padding=C$Q.fillArray(C$h.labelPadding,C$s,Number)}),C$l(0,C$s,"bold",function(){return this._tf.bold},function(C$s){this._tf.bold=C$s}),C$l(0,C$s,"align",function(){return this._tf.align},function(C$s){this._tf.align=C$s}),C$l(0,C$s,"text",function(){return this._tf.text},function(C$s){this._tf.text!=C$s&&(C$s&&(C$s=C$Q.adptString(C$s+"")),this._tf.text=C$s,this.event("change"),this._width&&this._height||this.onCompResize())}),C$l(0,C$s,"italic",function(){return this._tf.italic},function(C$s){this._tf.italic=C$s}),C$l(0,C$s,"wordWrap",function(){return this._tf.wordWrap},function(C$s){this._tf.wordWrap=C$s}),C$l(0,C$s,"font",function(){return this._tf.font},function(C$s){this._tf.font=C$s}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)||"string"==typeof C$s?this.text=C$s+"":C$G.superSet(C$B,this,"dataSource",C$s)}),C$l(0,C$s,"color",function(){return this._tf.color},function(C$s){this._tf.color=C$s}),C$l(0,C$s,"valign",function(){return this._tf.valign},function(C$s){this._tf.valign=C$s}),C$l(0,C$s,"leading",function(){return this._tf.leading},function(C$s){this._tf.leading=C$s}),C$l(0,C$s,"fontSize",function(){return this._tf.fontSize},function(C$s){this._tf.fontSize=C$s}),C$l(0,C$s,"bgColor",function(){return this._tf.bgColor},function(C$s){this._tf.bgColor=C$s}),C$l(0,C$s,"borderColor",function(){return this._tf.borderColor},function(C$s){this._tf.borderColor=C$s}),C$l(0,C$s,"stroke",function(){return this._tf.stroke},function(C$s){this._tf.stroke=C$s}),C$l(0,C$s,"strokeColor",function(){return this._tf.strokeColor},function(C$s){this._tf.strokeColor=C$s}),C$l(0,C$s,"textField",function(){return this._tf}),C$l(0,C$s,"measureWidth",function(){return this._tf.width}),C$l(0,C$s,"measureHeight",function(){return this._tf.height}),C$l(0,C$s,"width",function(){return this._width||this._tf.text?C$G.superGet(C$B,this,"width"):0},function(C$s){C$G.superSet(C$B,this,"width",C$s),this._tf.width=C$s}),C$l(0,C$s,"height",function(){return this._height||this._tf.text?C$G.superGet(C$B,this,"height"):0},function(C$s){C$G.superSet(C$B,this,"height",C$s),this._tf.height=C$s}),C$l(0,C$s,"overflow",function(){return this._tf.overflow},function(C$s){this._tf.overflow=C$s}),C$l(0,C$s,"underline",function(){return this._tf.underline},function(C$s){this._tf.underline=C$s}),C$l(0,C$s,"underlineColor",function(){return this._tf.underlineColor},function(C$s){this._tf.underlineColor=C$s}),C$T}(C$B),C$S=function(C$M){function C$T(C$s){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,C$T.__super.call(this),this.skin=C$s}C$c(C$T,"laya.ui.ProgressBar",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._bg&&this._bg.destroy(C$s),this._bar&&this._bar.destroy(C$s),this._bg=this._bar=null,this.changeHandler=null},C$s.createChildren=function(){this.addChild(this._bg=new C$b),this.addChild(this._bar=new C$b)},C$s.changeValue=function(){if(this.sizeGrid){var C$s=this.sizeGrid.split(","),C$M=Number(C$s[3]),C$T=Number(C$s[1]),C$X=(this.width-C$M-C$T)*this._value;this._bar.width=C$M+C$T+C$X,this._bar.visible=this._bar.width>C$M+C$T}else this._bar.width=this.width*this._value},C$l(0,C$s,"measureHeight",function(){return this._bg.height}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){this._skin!=C$s&&(this._skin=C$s,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),C$l(0,C$s,"measureWidth",function(){return this._bg.width}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$B,this,"height",C$s),this._bg.height=this._height,this._bar.height=this._height}),C$l(0,C$s,"bar",function(){return this._bar}),C$l(0,C$s,"value",function(){return this._value},function(C$s){this._value!=C$s&&(C$s=1<C$s?1:C$s<0?0:C$s,this._value=C$s,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(C$s))}),C$l(0,C$s,"bg",function(){return this._bg}),C$l(0,C$s,"sizeGrid",function(){return this._bg.sizeGrid},function(C$s){this._bg.sizeGrid=this._bar.sizeGrid=C$s}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$B,this,"width",C$s),this._bg.width=this._width,this.callLater(this.changeValue)}),C$l(0,C$s,"dataSource",C$M.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)||"string"==typeof C$s?this.value=Number(C$s):C$G.superSet(C$B,this,"dataSource",C$s)}),C$T}(C$B),C$K=(function(C$s){function C$T(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,C$T.__super.call(this),this._tipBox=new C$B,this._tipBox.addChild(this._tipText=new C$r),this._tipText.x=this._tipText.y=5,this._tipText.color=C$T.tipTextColor,this._defaultTipHandler=this._showDefaultTip,C$G.stage.on("showtip",this,this._onStageShowTip),C$G.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}C$c(C$T,"laya.ui.TipManager",C$B);var C$M=C$T.prototype;C$M._onStageHideTip=function(C$s){C$G.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},C$M._onStageShowTip=function(C$s){C$G.timer.once(C$T.tipDelay,this,this._showTip,[C$s],!0)},C$M._showTip=function(C$s){if("string"==typeof C$s){var C$M=String(C$s);Boolean(C$M)&&this._defaultTipHandler(C$M)}else C$s instanceof laya.utils.Handler?C$s.run():"function"==typeof C$s&&C$s.apply();C$G.stage.on("mousemove",this,this._onStageMouseMove),C$G.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},C$M._onStageMouseDown=function(C$s){this.closeAll()},C$M._onStageMouseMove=function(C$s){this._showToStage(this,C$T.offsetX,C$T.offsetY)},C$M._showToStage=function(C$s,C$M,C$T){void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0);var C$X=C$s.getBounds();C$s.x=C$G.stage.mouseX+C$M,C$s.y=C$G.stage.mouseY+C$T,C$s.x+C$X.width>C$G.stage.width&&(C$s.x-=C$X.width+C$M),C$s.y+C$X.height>C$G.stage.height&&(C$s.y-=C$X.height+C$T)},C$M.closeAll=function(){C$G.timer.clear(this,this._showTip),C$G.stage.off("mousemove",this,this._onStageMouseMove),C$G.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},C$M.showDislayTip=function(C$s){this.addChild(C$s),this._showToStage(this),C$G._currentStage.addChild(this)},C$M._showDefaultTip=function(C$s){this._tipText.text=C$s;var C$M=this._tipBox.graphics;C$M.clear(),C$M.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,C$T.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),C$G._currentStage.addChild(this)},C$l(0,C$M,"defaultTipHandler",function(){return this._defaultTipHandler},function(C$s){this._defaultTipHandler=C$s}),C$T.offsetX=10,C$T.offsetY=15,C$T.tipTextColor="#ffffff",C$T.tipBackColor="#111111",C$T.tipDelay=200}(),function(C$s){var C$R;function C$q(){this._idMap=null,this._aniList=null,this._watchMap={},C$q.__super.call(this)}C$c(C$q,"laya.ui.View",C$C);var C$M=C$q.prototype;return C$M.createView=function(C$s){if(C$s.animations&&!this._idMap&&(this._idMap={}),C$q.createComp(C$s,this,this),C$s.animations){var C$M,C$T,C$X=[],C$x=C$s.animations,C$c=0,C$l=C$x.length;for(C$c=0;C$c<C$l;C$c++){switch(C$M=new C$p,C$T=C$x[C$c],C$M._setUp(this._idMap,C$T),(this[C$T.name]=C$M)._setControlNode(this),C$T.action){case 1:C$M.play(0,!1);break;case 2:C$M.play(0,!0)}C$X.push(C$M)}this._aniList=C$X}0<this._width&&null==C$s.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},C$M.onEvent=function(C$s,C$M){},C$M.loadUI=function(C$s){var C$M=C$q.uiMap[C$s];C$M&&this.createView(C$M)},C$M.destroy=function(C$s){void 0===C$s&&(C$s=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,C$s)},C$M.changeData=function(C$s){var C$M=this._watchMap[C$s];if(C$M){console.log("change",C$s);for(var C$T=0,C$X=C$M.length;C$T<C$X;C$T++){C$M[C$T].exe(this)}}},C$q._regs=function(){for(var C$s in C$q.uiClassMap)C$g.regClass(C$s,C$q.uiClassMap[C$s])},C$q.createComp=function(C$s,C$M,C$T,C$X){if(!(C$M=C$M||C$q.getCompInstance(C$s)))return console.warn("can not create:"+C$s.type),null;var C$x=C$s.child;if(C$x)for(var C$c=C$M instanceof laya.ui.List,C$l=0,C$u=C$x.length;C$l<C$u;C$l++){var C$E=C$x[C$l];if(!C$M.hasOwnProperty("itemRender")||"render"!=C$E.props.name&&"render"!==C$E.props.renderType)if("Graphic"==C$E.type)C$g.addGraphicsToSprite(C$E,C$M);else if(C$g.isDrawType(C$E.type))C$g.addGraphicToSprite(C$E,C$M,!0);else{if(C$c){var C$O=[],C$U=C$q.createComp(C$E,null,C$T,C$O);C$O.length&&(C$U._$bindData=C$O)}else C$U=C$q.createComp(C$E,null,C$T,C$X);"Script"==C$E.type?"owner"in C$U?C$U.owner=C$M:"target"in C$U&&(C$U.target=C$M):"mask"==C$E.props.renderType||"mask"==C$E.props.name?C$M.mask=C$U:C$U instanceof laya.display.Sprite&&C$M.addChild(C$U)}else C$M.itemRender=C$E}var C$p=C$s.props;for(var C$_ in C$p){var C$R=C$p[C$_];C$q.eventDic[C$_]?C$R&&C$T&&C$M.on(C$_,C$T,C$T.onEvent,[C$R]):C$q.setCompValue(C$M,C$_,C$R,C$T,C$X)}return C$G.__typeof(C$M,"laya.ui.IItem")&&C$M.initItems(),C$s.compId&&C$T&&C$T._idMap&&(C$T._idMap[C$s.compId]=C$M),C$M},C$q.setCompValue=function(C$s,C$M,C$T,C$X,C$x){if("string"==typeof C$T&&-1<C$T.indexOf("${")){if(C$q._sheet||(C$q._sheet=C$g.getClass("laya.data.Table")),!C$q._sheet)return void console.warn("Can not find class Sheet");if(C$x)C$x.push(C$s,C$M,C$T);else if(C$X){-1==C$T.indexOf("].")&&(C$T=C$T.replace(".","[0]."));var C$c,C$l,C$u=new C$R(C$s,C$M,C$T);C$u.exe(C$X);for(var C$E=C$T.replace(/\[.*?\]\./g,".");null!=(C$c=C$q._parseWatchData.exec(C$E));){for(var C$O=C$c[1];null!=(C$l=C$q._parseKeyWord.exec(C$O));){var C$U=C$l[0],C$p=C$X._watchMap[C$U]||(C$X._watchMap[C$U]=[]);C$p.push(C$u),C$q._sheet.I.notifer.on(C$U,C$X,C$X.changeData,[C$U])}(C$p=C$X._watchMap[C$O]||(C$X._watchMap[C$O]=[])).push(C$u),C$q._sheet.I.notifer.on(C$O,C$X,C$X.changeData,[C$O])}}}else if("var"===C$M&&C$X)C$X[C$T]=C$s;else if("onClick"==C$M){var C$_=C$G._runScript("(function(){"+C$T+"})");C$s.on("click",C$X,C$_)}else C$s[C$M]="true"===C$T||"false"!==C$T&&C$T},C$q.getCompInstance=function(C$s){var C$M,C$T=C$s.props?C$s.props.runtime:null;return C$M=C$T?C$q.viewClassMap[C$T]||C$q.uiClassMap[C$T]||C$G.__classmap[C$T]:C$q.uiClassMap[C$s.type],C$s.props&&C$s.props.hasOwnProperty("renderType")&&"instance"==C$s.props.renderType?C$M.instance:C$M?new C$M:null},C$q.regComponent=function(C$s,C$M){C$q.uiClassMap[C$s]=C$M,C$g.regClass(C$s,C$M)},C$q.regViewRuntime=function(C$s,C$M){C$q.viewClassMap[C$s]=C$M},C$q.uiMap={},C$q.viewClassMap={},C$q._sheet=null,C$X(C$q,["uiClassMap",function(){return this.uiClassMap={ViewStack:C$ss,LinkButton:C$m,TextArea:C$Os,ColorPicker:C$I,Box:C$C,Button:C$m,CheckBox:C$Z,Clip:C$Y,ComboBox:C$y,Component:C$B,HScrollBar:C$W,HSlider:C$j,Image:C$b,Label:C$L,List:C$F,Panel:C$a,ProgressBar:C$S,Radio:C$H,RadioGroup:C$us,ScrollBar:C$e,Slider:C$V,Tab:C$Es,TextInput:C$Ts,View:C$q,VScrollBar:C$Ms,VSlider:C$Xs,Tree:C$d,HBox:C$cs,VBox:C$ls,Sprite:C$t,Animation:C$T,Text:C$r,FontClip:C$$}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),C$q.__init$=function(){C$q._regs(),C$R=function(){function C$s(C$s,C$M,C$T){this.comp=null,this.prop=null,this.value=null,this.comp=C$s,this.prop=C$M,this.value=C$T}return C$c(C$s,""),C$s.prototype.exe=function(C$s){var C$M=C$Q.getBindFun(this.value);this.comp[this.prop]=C$M.call(this,C$s)},C$s}()},C$q}()),C$Z=function(C$s){function C$T(C$s,C$M){void 0===C$M&&(C$M=""),C$T.__super.call(this,C$s,C$M)}C$c(C$T,"laya.ui.CheckBox",C$s);var C$M=C$T.prototype;return C$M.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},C$M.initialize=function(){C$s.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},C$l(0,C$M,"dataSource",C$s.prototype._$get_dataSource,function(C$s){"boolean"==typeof(this._dataSource=C$s)?this.selected=C$s:"string"==typeof C$s?this.selected="true"===C$s:C$G.superSet(C$m,this,"dataSource",C$s)}),C$T}(C$m),C$n=function(C$s){function C$M(){this._space=0,this._align="none",this._itemChanged=!1,C$M.__super.call(this)}C$c(C$M,"laya.ui.LayoutBox",C$C);var C$T=C$M.prototype;return C$T.addChild=function(C$s){return C$s.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,C$s)},C$T.onResize=function(C$s){this._setItemChanged()},C$T.addChildAt=function(C$s,C$M){return C$s.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,C$s,C$M)},C$T.removeChild=function(C$s){return C$s.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,C$s)},C$T.removeChildAt=function(C$s){return this.getChildAt(C$s).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,C$s)},C$T.refresh=function(){this._setItemChanged()},C$T.changeItems=function(){this._itemChanged=!1},C$T.sortItem=function(C$s){C$s&&C$s.sort(function(C$s,C$M){return C$s.y-C$M.y})},C$T._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},C$l(0,C$T,"space",function(){return this._space},function(C$s){this._space=C$s,this._setItemChanged()}),C$l(0,C$T,"align",function(){return this._align},function(C$s){this._align=C$s,this._setItemChanged()}),C$M}(),C$$=function(C$M){function C$T(C$s,C$M){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,C$T.__super.call(this),C$s&&(this.skin=C$s),C$M&&(this.sheet=C$M)}C$c(C$T,"laya.ui.FontClip",C$M);var C$s=C$T.prototype;return C$s.createChildren=function(){this._bitmap=new C$z,this.on("loaded",this,this._onClipLoaded)},C$s._onClipLoaded=function(){this.callLater(this.changeValue)},C$s.changeValue=function(){var C$s;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),C$s=this._sources[0]))){var C$M="horizontal"===this._direction;C$M?(this._wordsW=this._valueArr.length*(C$s.sourceWidth+this.spaceX),this._wordsH=C$s.sourceHeight):(this._wordsW=C$s.sourceWidth,this._wordsH=(C$s.sourceHeight+this.spaceY)*this._valueArr.length);var C$T=0;if(this._width)switch(this._align){case"center":C$T=.5*(this._width-this._wordsW);break;case"right":C$T=this._width-this._wordsW;break;default:C$T=0}for(var C$X=0,C$x=this._valueArr.length;C$X<C$x;C$X++){var C$c=this._indexMap[this._valueArr.charAt(C$X)];this.sources[C$c]&&(C$s=this.sources[C$c],C$M?this.graphics.drawTexture(C$s,C$T+C$X*(C$s.sourceWidth+this.spaceX),0,C$s.sourceWidth,C$s.sourceHeight):this.graphics.drawTexture(C$s,0+C$T,C$X*(C$s.sourceHeight+this.spaceY),C$s.sourceWidth,C$s.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),C$M.prototype.destroy.call(this,C$s)},C$l(0,C$s,"sheet",function(){return this._sheet},function(C$s){C$s+="";var C$M=(this._sheet=C$s).split(" ");this._clipX=String(C$M[0]).length,this.clipY=C$M.length,this._indexMap={};for(var C$T=0;C$T<this._clipY;C$T++)for(var C$X=C$M[C$T].split(""),C$x=0,C$c=C$X.length;C$x<C$c;C$x++)this._indexMap[C$X[C$x]]=C$T*this._clipX+C$x}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$Y,this,"height",C$s),this.callLater(this.changeValue)}),C$l(0,C$s,"direction",function(){return this._direction},function(C$s){this._direction=C$s,this.callLater(this.changeValue)}),C$l(0,C$s,"value",function(){return this._valueArr?this._valueArr:""},function(C$s){C$s+="",this._valueArr=C$s,this.callLater(this.changeValue)}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$Y,this,"width",C$s),this.callLater(this.changeValue)}),C$l(0,C$s,"spaceX",function(){return this._spaceX},function(C$s){this._spaceX=C$s,"horizontal"===this._direction&&this.callLater(this.changeValue)}),C$l(0,C$s,"spaceY",function(){return this._spaceY},function(C$s){this._spaceY=C$s,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),C$l(0,C$s,"align",function(){return this._align},function(C$s){this._align=C$s,this.callLater(this.changeValue)}),C$l(0,C$s,"measureWidth",function(){return this._wordsW}),C$l(0,C$s,"measureHeight",function(){return this._wordsH}),C$T}(C$Y),C$F=function(C$s){function C$M(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new C$q,C$M.__super.call(this)}C$c(C$M,"laya.ui.List",C$s);var C$T=C$M.prototype;return C$G.imps(C$T,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),this._content&&this._content.destroy(C$s),this._scrollBar&&this._scrollBar.destroy(C$s),laya.ui.Component.prototype.destroy.call(this,C$s),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},C$T.createChildren=function(){this.addChild(this._content=new C$C)},C$T.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=C$G.superGet(C$C,this,"cacheAs")),C$G.superSet(C$C,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},C$T.onScrollEnd=function(){C$G.superSet(C$C,this,"cacheAs",this._$P.cacheAs)},C$T._removePreScrollBar=function(){var C$s=this.removeChildByName("scrollBar");C$s&&C$s.destroy(!0)},C$T.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var C$s=this._getOneCell(),C$M=C$s.width+this._spaceX||1,C$T=C$s.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/C$M):Math.ceil(this._width/C$M)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/C$T):Math.round(this._height/C$T));var C$X=this._width?this._width:C$M*this.repeatX-this._spaceX,C$x=this._height?this._height:C$T*this.repeatY-this._spaceY;this._cellSize=this._isVertical?C$T:C$M,this._cellOffset=this._isVertical?C$T*Math.max(this._repeatY2,this._repeatY)-C$x-this._spaceY:C$M*Math.max(this._repeatX2,this._repeatX)-C$X-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=C$x:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=C$X),this.setContentSize(C$X,C$x);var C$c=this._isVertical?this.repeatX:this.repeatY,C$l=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,C$c,C$l),this._createdLine=C$l,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},C$T._getOneCell=function(){if(0===this._cells.length){var C$s=this.createItem();if(this._offset.setTo(C$s.x,C$s.y),this.cacheContent)return C$s;this._cells.push(C$s)}return this._cells[0]},C$T._createItems=function(C$s,C$M,C$T){var C$X=this._content,C$x=this._getOneCell(),C$c=C$x.width+this._spaceX,C$l=C$x.height+this._spaceY;if(this.cacheContent){var C$u=new C$C;C$u.cacheAsBitmap=!0,C$u.pos((this._isVertical?0:C$s)*C$c,(this._isVertical?C$s:0)*C$l),this._content.addChild(C$u),this._content.optimizeScrollRect=!0,C$X=C$u}else{for(var C$E=[],C$O=this._cells.length-1;-1<C$O;C$O--){var C$U=this._cells[C$O];C$U.removeSelf(),C$E.push(C$U)}this._cells.length=0}for(var C$p=C$s;C$p<C$T;C$p++)for(var C$_=0;C$_<C$M;C$_++)(C$x=C$E&&C$E.length?C$E.pop():this.createItem()).x=(this._isVertical?C$_:C$p)*C$c-C$X.x,C$x.y=(this._isVertical?C$p:C$_)*C$l-C$X.y,C$x.name="item"+(C$p*C$M+C$_),C$X.addChild(C$x),this.addCell(C$x)},C$T.createItem=function(){var C$s=[];if("function"==typeof this._itemRender)var C$M=new this._itemRender;else C$M=C$K.createComp(this._itemRender,null,null,C$s);if(0==C$s.length&&C$M._watchMap){var C$T=C$M._watchMap;for(var C$X in C$T)for(var C$x=C$T[C$X],C$c=0;C$c<C$x.length;C$c++){var C$l=C$x[C$c];C$s.push(C$l.comp,C$l.prop,C$l.value)}}return C$s.length&&(C$M._$bindData=C$s),C$M},C$T.addCell=function(C$s){C$s.on("click",this,this.onCellMouse),C$s.on("rightclick",this,this.onCellMouse),C$s.on("mouseover",this,this.onCellMouse),C$s.on("mouseout",this,this.onCellMouse),C$s.on("mousedown",this,this.onCellMouse),C$s.on("mouseup",this,this.onCellMouse),this._cells.push(C$s)},C$T.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var C$s=0,C$M=C$s=0;C$M<1e4;C$M++){var C$T=this.getChildByName("item"+C$M);if(!C$T)break;this.addCell(C$T),C$s++}this.repeatY=C$s}},C$T.setContentSize=function(C$s,C$M){this._content.width=C$s,this._content.height=C$M,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new C$f),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,C$s,C$M),this._content.scrollRect=this._content.scrollRect),this.event("resize")},C$T.onCellMouse=function(C$s){"mousedown"===C$s.type&&(this._isMoved=!1);var C$M=C$s.currentTarget,C$T=this._startIndex+this._cells.indexOf(C$M);C$T<0||("click"===C$s.type||"rightclick"===C$s.type?this.selectEnable&&!this._isMoved?this.selectedIndex=C$T:this.changeCellState(C$M,!0,0):"mouseover"!==C$s.type&&"mouseout"!==C$s.type||this._selectedIndex===C$T||this.changeCellState(C$M,"mouseover"===C$s.type,0),this.mouseHandler&&this.mouseHandler.runWith([C$s,C$T]))},C$T.changeCellState=function(C$s,C$M,C$T){var C$X=C$s.getChildByName("selectBox");C$X&&(this.selectEnable=!0,C$X.visible=C$M,C$X.index=C$T)},C$T.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},C$T.onScrollBarChange=function(C$s){this.runCallLater(this.changeCells);var C$M=this._scrollBar.value,C$T=this._isVertical?this.repeatX:this.repeatY,C$X=this._isVertical?this.repeatY:this.repeatX,C$x=Math.floor(C$M/this._cellSize);if(this.cacheContent)C$l=C$X+1,this._createdLine-C$x<C$l&&(this._createItems(this._createdLine,C$T,this._createdLine+C$l),this.renderItems(this._createdLine*C$T,0),this._createdLine+=C$l);else{var C$c=C$x*C$T,C$l=0;if(C$c>this._startIndex){C$l=C$c-this._startIndex;var C$u=!0,C$E=this._startIndex+C$T*(C$X+1);this._isMoved=!0}else C$c<this._startIndex&&(C$l=this._startIndex-C$c,C$u=!1,C$E=this._startIndex-1,this._isMoved=!0);for(var C$O=0;C$O<C$l;C$O++){if(C$u){var C$U=this._cells.shift();this._cells[this._cells.length]=C$U;var C$p=C$E+C$O}else C$U=this._cells.pop(),this._cells.unshift(C$U),C$p=C$E-C$O;var C$_=Math.floor(C$p/C$T)*this._cellSize;this._isVertical?C$U.y=C$_:C$U.x=C$_,this.renderItem(C$U,C$p)}this._startIndex=C$c,this.changeSelectStatus()}var C$R=this._content.scrollRect;this._isVertical?(C$R.y=C$M-this._offset.y,C$R.x=-this._offset.x):(C$R.y=-this._offset.y,C$R.x=C$M-this._offset.x),this._content.scrollRect=C$R},C$T.posCell=function(C$s,C$M){if(this._scrollBar){var C$T=this._isVertical?this.repeatX:this.repeatY,C$X=(this._isVertical?this.repeatY:this.repeatX,Math.floor(C$M/C$T)*this._cellSize);this._isVertical?C$s.y=C$X:C$s.x=C$X}},C$T.changeSelectStatus=function(){for(var C$s=0,C$M=this._cells.length;C$s<C$M;C$s++)this.changeCellState(this._cells[C$s],this._selectedIndex===this._startIndex+C$s,1)},C$T.renderItems=function(C$s,C$M){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0);for(var C$T=C$s,C$X=C$M||this._cells.length;C$T<C$X;C$T++)this.renderItem(this._cells[C$T],this._startIndex+C$T);this.changeSelectStatus()},C$T.renderItem=function(C$s,C$M){this._array&&0<=C$M&&C$M<this._array.length?(C$s.visible=!0,C$s._$bindData?(C$s._dataSource=this._array[C$M],this._bindData(C$s,this._array[C$M])):C$s.dataSource=this._array[C$M],this.cacheContent||this.posCell(C$s,C$M),this.hasListener("render")&&this.event("render",[C$s,C$M]),this.renderHandler&&this.renderHandler.runWith([C$s,C$M])):(C$s.visible=!1,C$s.dataSource=null)},C$T._bindData=function(C$s,C$M){for(var C$T=C$s._$bindData,C$X=0,C$x=C$T.length;C$X<C$x;C$X++){var C$c=C$T[C$X++],C$l=C$T[C$X++],C$u=C$T[C$X],C$E=C$Q.getBindFun(C$u);C$c[C$l]=C$E.call(this,C$M)}},C$T.refresh=function(){this.array=this._array},C$T.getItem=function(C$s){return-1<C$s&&C$s<this._array.length?this._array[C$s]:null},C$T.changeItem=function(C$s,C$M){-1<C$s&&C$s<this._array.length&&(this._array[C$s]=C$M,C$s>=this._startIndex&&C$s<this._startIndex+this._cells.length&&this.renderItem(this.getCell(C$s),C$s))},C$T.setItem=function(C$s,C$M){this.changeItem(C$s,C$M)},C$T.addItem=function(C$s){this._array.push(C$s),this.array=this._array},C$T.addItemAt=function(C$s,C$M){this._array.splice(C$M,0,C$s),this.array=this._array},C$T.deleteItem=function(C$s){this._array.splice(C$s,1),this.array=this._array},C$T.getCell=function(C$s){return this.runCallLater(this.changeCells),-1<C$s&&this._cells?this._cells[(C$s-this._startIndex)%this._cells.length]:null},C$T.scrollTo=function(C$s){if(this._scrollBar){var C$M=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(C$s/C$M)*this._cellSize}else this.startIndex=C$s},C$T.tweenTo=function(C$s,C$M,C$T){if(void 0===C$M&&(C$M=200),this._scrollBar){var C$X=this._isVertical?this.repeatX:this.repeatY;C$w.to(this._scrollBar,{value:Math.floor(C$s/C$X)*this._cellSize},C$M,null,C$T,0,!0)}else this.startIndex=C$s,C$T&&C$T.run()},C$T._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},C$T.commitMeasure=function(){this.runCallLater(this.changeCells)},C$l(0,C$T,"cacheAs",C$s.prototype._$get_cacheAs,function(C$s){C$G.superSet(C$C,this,"cacheAs",C$s),this._scrollBar&&(this._$P.cacheAs=null,"none"!==C$s?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),C$l(0,C$T,"content",function(){return this._content}),C$l(0,C$T,"height",C$s.prototype._$get_height,function(C$s){C$s!=this._height&&(C$G.superSet(C$C,this,"height",C$s),this._setCellChanged())}),C$l(0,C$T,"itemRender",function(){return this._itemRender},function(C$s){if(this._itemRender!=C$s){this._itemRender=C$s;for(var C$M=this._cells.length-1;-1<C$M;C$M--)this._cells[C$M].destroy();this._cells.length=0,this._setCellChanged()}}),C$l(0,C$T,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(C$s){this._removePreScrollBar();var C$M=new C$Ms;C$M.name="scrollBar",C$M.right=0,C$s&&" "!=C$s&&(C$M.skin=C$s),this.scrollBar=C$M,this.addChild(C$M),this._setCellChanged()}),C$l(0,C$T,"page",function(){return this._page},function(C$s){this._page=C$s,this._array&&(this._page=0<C$s?C$s:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),C$l(0,C$T,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(C$s){this._removePreScrollBar();var C$M=new C$W;C$M.name="scrollBar",C$M.bottom=0,C$s&&" "!=C$s&&(C$M.skin=C$s),this.scrollBar=C$M,this.addChild(C$M),this._setCellChanged()}),C$l(0,C$T,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(C$s){this._repeatX=C$s,this._setCellChanged()}),C$l(0,C$T,"scrollBar",function(){return this._scrollBar},function(C$s){this._scrollBar!=C$s&&(this._scrollBar=C$s)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),C$l(0,C$T,"width",C$s.prototype._$get_width,function(C$s){C$s!=this._width&&(C$G.superSet(C$C,this,"width",C$s),this._setCellChanged())}),C$l(0,C$T,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(C$s){this._repeatY=C$s,this._setCellChanged()}),C$l(0,C$T,"spaceX",function(){return this._spaceX},function(C$s){this._spaceX=C$s,this._setCellChanged()}),C$l(0,C$T,"spaceY",function(){return this._spaceY},function(C$s){this._spaceY=C$s,this._setCellChanged()}),C$l(0,C$T,"selectedIndex",function(){return this._selectedIndex},function(C$s){this._selectedIndex!=C$s&&(this._selectedIndex=C$s,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(C$s),this.startIndex=this._startIndex)}),C$l(0,C$T,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(C$s){this.selectedIndex=this._array.indexOf(C$s)}),C$l(0,C$T,"length",function(){return this._array?this._array.length:0}),C$l(0,C$T,"selection",function(){return this.getCell(this._selectedIndex)},function(C$s){this.selectedIndex=this._startIndex+this._cells.indexOf(C$s)}),C$l(0,C$T,"startIndex",function(){return this._startIndex},function(C$s){this._startIndex=0<C$s?C$s:0,this.callLater(this.renderItems)}),C$l(0,C$T,"array",function(){return this._array},function(C$s){this.runCallLater(this.changeCells),this._array=C$s||[];var C$M=this._array.length;if(this.totalPage=Math.ceil(C$M/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<C$M?this._selectedIndex:C$M-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var C$T=this._isVertical?this.repeatX:this.repeatY,C$X=this._isVertical?this.repeatY:this.repeatX,C$x=Math.ceil(C$M/C$T);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=C$X/C$x,this._scrollBar.setScroll(0,(C$x-C$X)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),C$l(0,C$T,"dataSource",C$s.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)&&Math.floor(C$s)==C$s||"string"==typeof C$s?this.selectedIndex=parseInt(C$s):C$s instanceof Array?this.array=C$s:C$G.superSet(C$C,this,"dataSource",C$s)}),C$l(0,C$T,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),C$M}(C$C),C$W=function(C$s){function C$M(){C$M.__super.call(this)}return C$c(C$M,"laya.ui.HScrollBar",C$s),C$M.prototype.initialize=function(){C$s.prototype.initialize.call(this),this.slider.isVertical=!1},C$M}(C$e),C$a=function(C$s){function C$M(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,C$M.__super.call(this),this.width=this.height=100}C$c(C$M,"laya.ui.Panel",C$s);var C$T=C$M.prototype;return C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),laya.ui.Component.prototype.destroy.call(this,C$s),this._content&&this._content.destroy(C$s),this._vScrollBar&&this._vScrollBar.destroy(C$s),this._hScrollBar&&this._hScrollBar.destroy(C$s),this._vScrollBar=null,this._hScrollBar=null,this._content=null},C$T.destroyChildren=function(){this._content.destroyChildren()},C$T.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new C$C)},C$T.addChild=function(C$s){return C$s.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(C$s)},C$T.onResize=function(){this._setScrollChanged()},C$T.addChildAt=function(C$s,C$M){return C$s.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(C$s,C$M)},C$T.removeChild=function(C$s){return C$s.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(C$s)},C$T.removeChildAt=function(C$s){return this.getChildAt(C$s).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(C$s)},C$T.removeChildren=function(C$s,C$M){return void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=2147483647),this._content.removeChildren(C$s,C$M),this._setScrollChanged(),this},C$T.getChildAt=function(C$s){return this._content.getChildAt(C$s)},C$T.getChildByName=function(C$s){return this._content.getChildByName(C$s)},C$T.getChildIndex=function(C$s){return this._content.getChildIndex(C$s)},C$T.changeScroll=function(){this._scrollChanged=!1;var C$s=this.contentWidth||1,C$M=this.contentHeight||1,C$T=this._vScrollBar,C$X=this._hScrollBar,C$x=C$T&&C$M>this._height,C$c=C$X&&C$s>this._width,C$l=C$x?this._width-C$T.width:this._width,C$u=C$c?this._height-C$X.height:this._height;C$T&&(C$T.x=this._width-C$T.width,C$T.y=0,C$T.height=this._height-(C$c?C$X.height:0),C$T.scrollSize=Math.max(.033*this._height,1),C$T.thumbPercent=C$u/C$M,C$T.setScroll(0,C$M-C$u,C$T.value)),C$X&&(C$X.x=0,C$X.y=this._height-C$X.height,C$X.width=this._width-(C$x?C$T.width:0),C$X.scrollSize=Math.max(.033*this._width,1),C$X.thumbPercent=C$l/C$s,C$X.setScroll(0,C$s-C$l,C$X.value))},C$T.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},C$T.setContentSize=function(C$s,C$M){var C$T=this._content;C$T.width=C$s,C$T.height=C$M,C$T.scrollRect||(C$T.scrollRect=new C$f),C$T.scrollRect.setTo(0,0,C$s,C$M),C$T.scrollRect=C$T.scrollRect},C$T.onScrollBarChange=function(C$s){var C$M=this._content.scrollRect;if(C$M){var C$T=Math.round(C$s.value);C$s.isVertical?C$M.y=C$T:C$M.x=C$T,this._content.scrollRect=C$M}},C$T.scrollTo=function(C$s,C$M){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),this.vScrollBar&&(this.vScrollBar.value=C$M),this.hScrollBar&&(this.hScrollBar.value=C$s)},C$T.refresh=function(){this.changeScroll()},C$T.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=C$G.superGet(C$C,this,"cacheAs")),C$G.superSet(C$C,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},C$T.onScrollEnd=function(){C$G.superSet(C$C,this,"cacheAs",this._$P.cacheAs)},C$T._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},C$l(0,C$T,"numChildren",function(){return this._content.numChildren}),C$l(0,C$T,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(C$s){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new C$W),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=C$s}),C$l(0,C$T,"contentWidth",function(){for(var C$s=0,C$M=this._content.numChildren-1;-1<C$M;C$M--){var C$T=this._content.getChildAt(C$M);C$s=Math.max(C$T.x+C$T.width*C$T.scaleX,C$s)}return C$s}),C$l(0,C$T,"contentHeight",function(){for(var C$s=0,C$M=this._content.numChildren-1;-1<C$M;C$M--){var C$T=this._content.getChildAt(C$M);C$s=Math.max(C$T.y+C$T.height*C$T.scaleY,C$s)}return C$s}),C$l(0,C$T,"width",C$s.prototype._$get_width,function(C$s){C$G.superSet(C$C,this,"width",C$s),this._setScrollChanged()}),C$l(0,C$T,"hScrollBar",function(){return this._hScrollBar}),C$l(0,C$T,"content",function(){return this._content}),C$l(0,C$T,"height",C$s.prototype._$get_height,function(C$s){C$G.superSet(C$C,this,"height",C$s),this._setScrollChanged()}),C$l(0,C$T,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(C$s){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new C$Ms),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=C$s}),C$l(0,C$T,"vScrollBar",function(){return this._vScrollBar}),C$l(0,C$T,"cacheAs",C$s.prototype._$get_cacheAs,function(C$s){C$G.superSet(C$C,this,"cacheAs",C$s),this._$P.cacheAs=null,"none"!==C$s?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),C$M}(C$C),C$j=function(C$s){function C$M(C$s){C$M.__super.call(this,C$s),this.isVertical=!1}return C$c(C$M,"laya.ui.HSlider",C$V),C$M}(),C$i=function(C$s){function C$T(C$s,C$M){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,C$T.__super.call(this),this.skin=C$M,this.labels=C$s}C$c(C$T,"laya.ui.UIGroup",C$s);var C$M=C$T.prototype;return C$G.imps(C$M,{"laya.ui.IItem":!0}),C$M.preinitialize=function(){this.mouseEnabled=!0},C$M.destroy=function(C$s){void 0===C$s&&(C$s=!0),laya.ui.Component.prototype.destroy.call(this,C$s),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},C$M.addItem=function(C$s,C$M){void 0===C$M&&(C$M=!0);var C$T=C$s,C$X=this._items.length;if(C$T.name="item"+C$X,this.addChild(C$T),this.initItems(),C$M&&0<C$X){var C$x=this._items[C$X-1];"horizontal"==this._direction?C$T.x=C$x.x+C$x.width+this._space:C$T.y=C$x.y+C$x.height+this._space}else C$M&&(C$T.x=0,C$T.y=0);return C$X},C$M.delItem=function(C$s,C$M){void 0===C$M&&(C$M=!0);var C$T=this._items.indexOf(C$s);if(-1!=C$T){var C$X=C$s;this.removeChild(C$X);for(var C$x=C$T+1,C$c=this._items.length;C$x<C$c;C$x++){var C$l=this._items[C$x];C$l.name="item"+(C$x-1),C$M&&("horizontal"==this._direction?C$l.x-=C$X.width+this._space:C$l.y-=C$X.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var C$u;C$u=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=C$u}}},C$M.initItems=function(){this._items||(this._items=[]);for(var C$s=this._items.length=0;C$s<1e4;C$s++){var C$M=this.getChildByName("item"+C$s);if(null==C$M)break;this._items.push(C$M),C$M.selected=C$s===this._selectedIndex,C$M.clickHandler=C$_.create(this,this.itemClick,[C$s],!1)}},C$M.itemClick=function(C$s){this.selectedIndex=C$s},C$M.setSelect=function(C$s,C$M){this._items&&-1<C$s&&C$s<this._items.length&&(this._items[C$s].selected=C$M)},C$M.createItem=function(C$s,C$M){return null},C$M.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var C$s=0,C$M=0,C$T=this._items.length;C$M<C$T;C$M++){var C$X=this._items[C$M];this._skin&&(C$X.skin=this._skin),this._labelColors&&(C$X.labelColors=this._labelColors),this._labelSize&&(C$X.labelSize=this._labelSize),this._labelStroke&&(C$X.labelStroke=this._labelStroke),this._labelStrokeColor&&(C$X.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(C$X.strokeColors=this._strokeColors),this._labelBold&&(C$X.labelBold=this._labelBold),this._labelPadding&&(C$X.labelPadding=this._labelPadding),this._labelAlign&&(C$X.labelAlign=this._labelAlign),this._stateNum&&(C$X.stateNum=this._stateNum),this._labelFont&&(C$X.labelFont=this._labelFont),"horizontal"===this._direction?(C$X.y=0,C$X.x=C$s,C$s+=C$X.width+this._space):(C$X.x=0,C$X.y=C$s,C$s+=C$X.height+this._space)}this.changeSize()},C$M.commitMeasure=function(){this.runCallLater(this.changeLabels)},C$M._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},C$l(0,C$M,"labelStrokeColor",function(){return this._labelStrokeColor},function(C$s){this._labelStrokeColor!=C$s&&(this._labelStrokeColor=C$s,this._setLabelChanged())}),C$l(0,C$M,"skin",function(){return this._skin},function(C$s){this._skin!=C$s&&(this._skin=C$s,this._setLabelChanged())}),C$l(0,C$M,"selectedIndex",function(){return this._selectedIndex},function(C$s){this._selectedIndex!=C$s&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=C$s,this.setSelect(C$s,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),C$l(0,C$M,"labels",function(){return this._labels},function(C$s){if(this._labels!=C$s){if(this._labels=C$s,this.removeChildren(),this._setLabelChanged(),this._labels)for(var C$M=this._labels.split(","),C$T=0,C$X=C$M.length;C$T<C$X;C$T++){var C$x=this.createItem(this._skin,C$M[C$T]);C$x.name="item"+C$T,this.addChild(C$x)}this.initItems()}}),C$l(0,C$M,"strokeColors",function(){return this._strokeColors},function(C$s){this._strokeColors!=C$s&&(this._strokeColors=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelColors",function(){return this._labelColors},function(C$s){this._labelColors!=C$s&&(this._labelColors=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelStroke",function(){return this._labelStroke},function(C$s){this._labelStroke!=C$s&&(this._labelStroke=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelSize",function(){return this._labelSize},function(C$s){this._labelSize!=C$s&&(this._labelSize=C$s,this._setLabelChanged())}),C$l(0,C$M,"stateNum",function(){return this._stateNum},function(C$s){this._stateNum!=C$s&&(this._stateNum=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelBold",function(){return this._labelBold},function(C$s){this._labelBold!=C$s&&(this._labelBold=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelFont",function(){return this._labelFont},function(C$s){this._labelFont!=C$s&&(this._labelFont=C$s,this._setLabelChanged())}),C$l(0,C$M,"labelPadding",function(){return this._labelPadding},function(C$s){this._labelPadding!=C$s&&(this._labelPadding=C$s,this._setLabelChanged())}),C$l(0,C$M,"direction",function(){return this._direction},function(C$s){this._direction=C$s,this._setLabelChanged()}),C$l(0,C$M,"space",function(){return this._space},function(C$s){this._space=C$s,this._setLabelChanged()}),C$l(0,C$M,"items",function(){return this._items}),C$l(0,C$M,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(C$s){this.selectedIndex=this._items.indexOf(C$s)}),C$l(0,C$M,"dataSource",C$s.prototype._$get_dataSource,function(C$s){"number"==typeof(this._dataSource=C$s)&&Math.floor(C$s)==C$s||"string"==typeof C$s?this.selectedIndex=parseInt(C$s):C$s instanceof Array?this.labels=C$s.join(","):C$G.superSet(C$C,this,"dataSource",C$s)}),C$T}(C$C),C$H=function(C$M){function C$T(C$s,C$M){this._value=null,void 0===C$M&&(C$M=""),C$T.__super.call(this,C$s,C$M)}C$c(C$T,"laya.ui.Radio",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._value=null},C$s.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},C$s.initialize=function(){C$M.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},C$s.onClick=function(C$s){this.selected=!0},C$l(0,C$s,"value",function(){return null!=this._value?this._value:this.label},function(C$s){this._value=C$s}),C$T}(C$m),C$d=function(C$s){function C$M(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,C$M.__super.call(this),this.width=this.height=200}C$c(C$M,"laya.ui.Tree",C$s);var C$T=C$M.prototype;return C$G.imps(C$T,{"laya.ui.IRender":!0}),C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),laya.ui.Component.prototype.destroy.call(this,C$s),this._list&&this._list.destroy(C$s),this._list=null,this._source=null,this._renderHandler=null},C$T.createChildren=function(){this.addChild(this._list=new C$F),this._list.renderHandler=C$_.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},C$T.onListChange=function(C$s){this.event("change")},C$T.getArray=function(){var C$s,C$M=[];for(var C$T in this._source)C$s=this._source[C$T],this.getParentOpenStatus(C$s)&&(C$s.x=this._spaceLeft*this.getDepth(C$s),C$M.push(C$s));return C$M},C$T.getDepth=function(C$s,C$M){return void 0===C$M&&(C$M=0),null==C$s.nodeParent?C$M:this.getDepth(C$s.nodeParent,C$M+1)},C$T.getParentOpenStatus=function(C$s){var C$M=C$s.nodeParent;return null==C$M||!!C$M.isOpen&&(null==C$M.nodeParent||this.getParentOpenStatus(C$M))},C$T.renderItem=function(C$s,C$M){var C$T=C$s.dataSource;if(C$T){C$s.left=C$T.x;var C$X=C$s.getChildByName("arrow");C$X&&(C$T.hasChild?(C$X.visible=!0,C$X.index=C$T.isOpen?1:0,C$X.tag=C$M,C$X.off("click",this,this.onArrowClick),C$X.on("click",this,this.onArrowClick)):C$X.visible=!1);var C$x=C$s.getChildByName("folder");C$x&&(2==C$x.clipY?C$x.index=C$T.isDirectory?0:1:C$x.index=C$T.isDirectory?C$T.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([C$s,C$M])}},C$T.onArrowClick=function(C$s){var C$M=C$s.currentTarget.tag;this._list.array[C$M].isOpen=!this._list.array[C$M].isOpen,this.event("open"),this._list.array=this.getArray()},C$T.setItemState=function(C$s,C$M){this._list.array[C$s]&&(this._list.array[C$s].isOpen=C$M,this._list.array=this.getArray())},C$T.fresh=function(){this._list.array=this.getArray(),this.repaint()},C$T.parseXml=function(C$s,C$M,C$T,C$X){var C$x,C$c=C$s.childNodes,C$l=C$c.length;if(!C$X){C$x={};var C$u,C$E=C$s.attributes;for(var C$O in C$E){var C$U=(C$u=C$E[C$O]).nodeName,C$p=C$u.nodeValue;C$x[C$U]="true"==C$p||"false"!=C$p&&C$p}C$x.nodeParent=C$T,0<C$l&&(C$x.isDirectory=!0),C$x.hasChild=0<C$l,C$M.push(C$x)}for(var C$_=0;C$_<C$l;C$_++){var C$R=C$c[C$_];this.parseXml(C$R,C$M,C$x,!1)}},C$T.parseOpenStatus=function(C$s,C$M){for(var C$T=0,C$X=C$M.length;C$T<C$X;C$T++){var C$x=C$M[C$T];if(C$x.isDirectory)for(var C$c=0,C$l=C$s.length;C$c<C$l;C$c++){var C$u=C$s[C$c];if(C$u.isDirectory&&this.isSameParent(C$u,C$x)&&C$x.label==C$u.label){C$x.isOpen=C$u.isOpen;break}}}},C$T.isSameParent=function(C$s,C$M){return null==C$s.nodeParent&&null==C$M.nodeParent||null!=C$s.nodeParent&&null!=C$M.nodeParent&&(C$s.nodeParent.label==C$M.nodeParent.label&&this.isSameParent(C$s.nodeParent,C$M.nodeParent))},C$T.filter=function(C$s){if(Boolean(C$s)){var C$M=[];this.getFilterSource(this._source,C$M,C$s),this._list.array=C$M}else this._list.array=this.getArray()},C$T.getFilterSource=function(C$s,C$M,C$T){var C$X;for(var C$x in C$T=C$T.toLocaleLowerCase(),C$s)!(C$X=C$s[C$x]).isDirectory&&-1<String(C$X.label).toLowerCase().indexOf(C$T)&&(C$X.x=0,C$M.push(C$X)),C$X.child&&0<C$X.child.length&&this.getFilterSource(C$X.child,C$M,C$T)},C$l(0,C$T,"spaceBottom",function(){return this._list.spaceY},function(C$s){this._list.spaceY=C$s}),C$l(0,C$T,"keepStatus",function(){return this._keepStatus},function(C$s){this._keepStatus=C$s}),C$l(0,C$T,"itemRender",function(){return this._list.itemRender},function(C$s){this._list.itemRender=C$s}),C$l(0,C$T,"array",function(){return this._list.array},function(C$s){this._keepStatus&&this._list.array&&C$s&&this.parseOpenStatus(this._list.array,C$s),this._source=C$s,this._list.array=this.getArray()}),C$l(0,C$T,"mouseHandler",function(){return this._list.mouseHandler},function(C$s){this._list.mouseHandler=C$s}),C$l(0,C$T,"dataSource",C$s.prototype._$get_dataSource,function(C$s){this._dataSource=C$s,C$G.superSet(C$C,this,"dataSource",C$s)}),C$l(0,C$T,"source",function(){return this._source}),C$l(0,C$T,"scrollBar",function(){return this._list.scrollBar}),C$l(0,C$T,"list",function(){return this._list}),C$l(0,C$T,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(C$s){this._list.vScrollBarSkin=C$s}),C$l(0,C$T,"renderHandler",function(){return this._renderHandler},function(C$s){this._renderHandler=C$s}),C$l(0,C$T,"selectedIndex",function(){return this._list.selectedIndex},function(C$s){this._list.selectedIndex=C$s}),C$l(0,C$T,"spaceLeft",function(){return this._spaceLeft},function(C$s){this._spaceLeft=C$s}),C$l(0,C$T,"selectedItem",function(){return this._list.selectedItem},function(C$s){this._list.selectedItem=C$s}),C$l(0,C$T,"width",C$s.prototype._$get_width,function(C$s){C$G.superSet(C$C,this,"width",C$s),this._list.width=C$s}),C$l(0,C$T,"height",C$s.prototype._$get_height,function(C$s){C$G.superSet(C$C,this,"height",C$s),this._list.height=C$s}),C$l(0,C$T,"xml",null,function(C$s){var C$M=[];this.parseXml(C$s.childNodes[0],C$M,null,!0),this.array=C$M}),C$l(0,C$T,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),C$M}(C$C),C$ss=function(C$s){function C$M(){this._items=null,this._selectedIndex=0,C$M.__super.call(this),this._setIndexHandler=C$_.create(this,this.setIndex,null,!1)}C$c(C$M,"laya.ui.ViewStack",C$s);var C$T=C$M.prototype;return C$G.imps(C$T,{"laya.ui.IItem":!0}),C$T.setItems=function(C$s){this.removeChildren();for(var C$M=0,C$T=0,C$X=C$s.length;C$T<C$X;C$T++){var C$x=C$s[C$T];C$x&&(C$x.name="item"+C$M,this.addChild(C$x),C$M++)}this.initItems()},C$T.addItem=function(C$s){C$s.name="item"+this._items.length,this.addChild(C$s),this.initItems()},C$T.initItems=function(){this._items=[];for(var C$s=0;C$s<1e4;C$s++){var C$M=this.getChildByName("item"+C$s);if(null==C$M)break;this._items.push(C$M),C$M.visible=C$s==this._selectedIndex}},C$T.setSelect=function(C$s,C$M){this._items&&-1<C$s&&C$s<this._items.length&&(this._items[C$s].visible=C$M)},C$T.setIndex=function(C$s){this.selectedIndex=C$s},C$l(0,C$T,"dataSource",C$s.prototype._$get_dataSource,function(C$s){if("number"==typeof(this._dataSource=C$s)&&Math.floor(C$s)==C$s||"string"==typeof C$s)this.selectedIndex=parseInt(C$s);else for(var C$M in this._dataSource)this.hasOwnProperty(C$M)&&(this[C$M]=this._dataSource[C$M])}),C$l(0,C$T,"selectedIndex",function(){return this._selectedIndex},function(C$s){this._selectedIndex!=C$s&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=C$s,this.setSelect(this._selectedIndex,!0))}),C$l(0,C$T,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(C$s){this.selectedIndex=this._items.indexOf(C$s)}),C$l(0,C$T,"items",function(){return this._items}),C$l(0,C$T,"setIndexHandler",function(){return this._setIndexHandler},function(C$s){this._setIndexHandler=C$s}),C$M}(C$C),C$Ms=function(C$s){function C$M(){C$M.__super.call(this)}return C$c(C$M,"laya.ui.VScrollBar",C$e),C$M}(),C$Ts=function(C$M){function C$T(C$s){this._bg=null,this._skin=null,C$T.__super.call(this),void 0===C$s&&(C$s=""),this.text=C$s,this.skin=this.skin}C$c(C$T,"laya.ui.TextInput",C$M);var C$s=C$T.prototype;return C$s.preinitialize=function(){this.mouseEnabled=!0},C$s.destroy=function(C$s){C$J.clearCache(this,this._skin),void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._bg&&this._bg.destroy(),this._bg=null},C$s.createChildren=function(){this.addChild(this._tf=new C$R),this._tf.padding=C$h.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},C$s._onFocus=function(){this.event("focus",this)},C$s._onBlur=function(){this.event("blur",this)},C$s._onInput=function(){this.event("input",this)},C$s._onEnter=function(){this.event("enter",this)},C$s.initialize=function(){this.width=128,this.height=22},C$s.select=function(){this._tf.select()},C$s.setSelection=function(C$s,C$M){this._tf.setSelection(C$s,C$M)},C$l(0,C$s,"text",C$M.prototype._$get_text,function(C$s){this._tf.text!=C$s&&(C$s+="",this._tf.text=C$s,this.event("change"))}),C$l(0,C$s,"bg",function(){return this._bg},function(C$s){this.graphics=this._bg=C$s}),C$l(0,C$s,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(C$s){this._tf.inputElementYAdjuster=C$s}),C$l(0,C$s,"multiline",function(){return this._tf.multiline},function(C$s){this._tf.multiline=C$s}),C$l(0,C$s,"skin",function(){return this._skin},function(C$s){this._skin!=C$s&&(C$J.clearCache(this,this._skin),this._skin=C$s,this._bg||(this.graphics=this._bg=new C$z),C$J.keepCache(this,this._skin),this._bg.source=C$J.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),C$l(0,C$s,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(C$s){this._bg||(this.graphics=this._bg=new C$z),this._bg.sizeGrid=C$Q.fillArray(C$h.defaultSizeGrid,C$s,Number)}),C$l(0,C$s,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(C$s){this._tf.inputElementXAdjuster=C$s}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$L,this,"width",C$s),this._bg&&(this._bg.width=C$s)}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$L,this,"height",C$s),this._bg&&(this._bg.height=C$s)}),C$l(0,C$s,"editable",function(){return this._tf.editable},function(C$s){this._tf.editable=C$s}),C$l(0,C$s,"restrict",function(){return this._tf.restrict},function(C$s){this._tf.restrict=C$s}),C$l(0,C$s,"prompt",function(){return this._tf.prompt},function(C$s){this._tf.prompt=C$s}),C$l(0,C$s,"promptColor",function(){return this._tf.promptColor},function(C$s){this._tf.promptColor=C$s}),C$l(0,C$s,"maxChars",function(){return this._tf.maxChars},function(C$s){this._tf.maxChars=C$s}),C$l(0,C$s,"focus",function(){return this._tf.focus},function(C$s){this._tf.focus=C$s}),C$l(0,C$s,"type",function(){return this._tf.type},function(C$s){this._tf.type=C$s}),C$l(0,C$s,"asPassword",function(){return this._tf.asPassword},function(C$s){this._tf.asPassword=C$s}),C$T}(C$L),C$Xs=function(C$s){function C$M(){C$M.__super.call(this)}return C$c(C$M,"laya.ui.VSlider",C$V),C$M}(),C$xs=function(C$s){function C$X(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,C$X.__super.call(this)}C$c(C$X,"laya.ui.Dialog",C$s);var C$M=C$X.prototype;return C$M.initialize=function(){this.popupEffect=C$X.manager.popupEffectHandler,this.closeEffect=C$X.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},C$M._dealDragArea=function(){var C$s=this.getChildByName("drag");C$s&&(this.dragArea=C$s.x+","+C$s.y+","+C$s.width+","+C$s.height,C$s.removeSelf())},C$M._onClick=function(C$s){var C$M=C$s.target;if(C$M)switch(C$M.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(C$M.name)}},C$M.show=function(C$s,C$M){void 0===C$s&&(C$s=!1),void 0===C$M&&(C$M=!0),this._open(!1,C$s,C$M)},C$M.popup=function(C$s,C$M){void 0===C$s&&(C$s=!1),void 0===C$M&&(C$M=!0),this._open(!0,C$s,C$M)},C$M._open=function(C$s,C$M,C$T){C$X.manager.lock(!1),this.isModal=C$s,C$X.manager.open(this,C$M,C$T)},C$M.onOpened=function(){},C$M.close=function(C$s,C$M){void 0===C$M&&(C$M=!0),C$X.manager.close(this,C$s,C$M)},C$M.onClosed=function(C$s){},C$M._onMouseDown=function(C$s){var C$M=this.getMousePoint();this._dragArea.contains(C$M.x,C$M.y)?this.startDrag():this.stopDrag()},C$l(0,C$M,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(C$s){if(C$s){var C$M=C$Q.fillArray([0,0,0,0],C$s,Number);this._dragArea=new C$f(C$M[0],C$M[1],C$M[2],C$M[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),C$l(0,C$M,"isPopup",function(){return null!=this.parent}),C$l(0,C$M,"zOrder",C$s.prototype._$get_zOrder,function(C$s){C$G.superSet(C$K,this,"zOrder",C$s),C$X.manager._checkMask()}),C$l(1,C$X,"manager",function(){return C$X._manager=C$X._manager||new C$o},function(C$s){C$X._manager=C$s}),C$X.setLockView=function(C$s){C$X.manager.setLockView(C$s)},C$X.lock=function(C$s){C$X.manager.lock(C$s)},C$X.closeAll=function(){C$X.manager.closeAll()},C$X.getDialogsByGroup=function(C$s){return C$X.manager.getDialogsByGroup(C$s)},C$X.closeByGroup=function(C$s){return C$X.manager.closeByGroup(C$s)},C$X.CLOSE="close",C$X.CANCEL="cancel",C$X.SURE="sure",C$X.NO="no",C$X.OK="ok",C$X.YES="yes",C$X._manager=null,C$X}(C$K),C$cs=function(C$s){function C$M(){C$M.__super.call(this)}C$c(C$M,"laya.ui.HBox",C$s);var C$T=C$M.prototype;return C$T.sortItem=function(C$s){C$s&&C$s.sort(function(C$s,C$M){return C$s.x-C$M.x})},C$T.changeItems=function(){this._itemChanged=!1;for(var C$s=[],C$M=0,C$T=0,C$X=this.numChildren;C$T<C$X;C$T++){var C$x=this.getChildAt(C$T);C$x&&C$x.layoutEnabled&&(C$s.push(C$x),C$M=this._height?this._height:Math.max(C$M,C$x.height*C$x.scaleY))}this.sortItem(C$s);var C$c=0;for(C$T=0,C$X=C$s.length;C$T<C$X;C$T++)(C$x=C$s[C$T]).x=C$c,C$c+=C$x.width*C$x.scaleX+this._space,"top"==this._align?C$x.y=0:"middle"==this._align?C$x.y=.5*(C$M-C$x.height*C$x.scaleY):"bottom"==this._align&&(C$x.y=C$M-C$x.height*C$x.scaleY);this.changeSize()},C$l(0,C$T,"height",C$s.prototype._$get_height,function(C$s){this._height!=C$s&&(C$G.superSet(C$n,this,"height",C$s),this.callLater(this.changeItems))}),C$M.NONE="none",C$M.TOP="top",C$M.MIDDLE="middle",C$M.BOTTOM="bottom",C$M}(C$n),C$ls=function(C$s){function C$M(){C$M.__super.call(this)}C$c(C$M,"laya.ui.VBox",C$s);var C$T=C$M.prototype;return C$T.changeItems=function(){this._itemChanged=!1;for(var C$s=[],C$M=0,C$T=0,C$X=this.numChildren;C$T<C$X;C$T++){var C$x=this.getChildAt(C$T);C$x&&C$x.layoutEnabled&&(C$s.push(C$x),C$M=this._width?this._width:Math.max(C$M,C$x.width*C$x.scaleX))}this.sortItem(C$s);var C$c=0;for(C$T=0,C$X=C$s.length;C$T<C$X;C$T++)(C$x=C$s[C$T]).y=C$c,C$c+=C$x.height*C$x.scaleY+this._space,"left"==this._align?C$x.x=0:"center"==this._align?C$x.x=.5*(C$M-C$x.width*C$x.scaleX):"right"==this._align&&(C$x.x=C$M-C$x.width*C$x.scaleX);this.changeSize()},C$l(0,C$T,"width",C$s.prototype._$get_width,function(C$s){this._width!=C$s&&(C$G.superSet(C$n,this,"width",C$s),this.callLater(this.changeItems))}),C$M.NONE="none",C$M.LEFT="left",C$M.CENTER="center",C$M.RIGHT="right",C$M}(C$n),C$us=function(C$s){function C$M(){C$M.__super.call(this)}return C$c(C$M,"laya.ui.RadioGroup",C$i),C$M.prototype.createItem=function(C$s,C$M){return new C$H(C$s,C$M)},C$M}(),C$Es=function(C$s){function C$M(){C$M.__super.call(this)}return C$c(C$M,"laya.ui.Tab",C$i),C$M.prototype.createItem=function(C$s,C$M){return new C$m(C$s,C$M)},C$M}(),C$Os=function(C$M){function C$T(C$s){this._vScrollBar=null,this._hScrollBar=null,void 0===C$s&&(C$s=""),C$T.__super.call(this,C$s)}C$c(C$T,"laya.ui.TextArea",C$M);var C$s=C$T.prototype;return C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},C$s.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},C$s.onVBarChanged=function(C$s){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},C$s.onHBarChanged=function(C$s){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},C$s.changeScroll=function(){var C$s=this._vScrollBar&&0<this._tf.maxScrollY,C$M=this._hScrollBar&&0<this._tf.maxScrollX,C$T=C$s?this._width-this._vScrollBar.width:this._width,C$X=C$M?this._height-this._hScrollBar.height:this._height,C$x=this._tf.padding||C$h.labelPadding;this._tf.width=C$T,this._tf.height=C$X,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-C$x[2],this._vScrollBar.y=C$x[1],this._vScrollBar.height=this._height-(C$M?this._hScrollBar.height:0)-C$x[1]-C$x[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=C$X/Math.max(this._tf.textHeight,C$X),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=C$s),this._hScrollBar&&(this._hScrollBar.x=C$x[0],this._hScrollBar.y=this._height-this._hScrollBar.height-C$x[3],this._hScrollBar.width=this._width-(C$s?this._vScrollBar.width:0)-C$x[0]-C$x[2],this._hScrollBar.scrollSize=Math.max(.033*C$T,1),this._hScrollBar.thumbPercent=C$T/Math.max(this._tf.textWidth,C$T),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=C$M)},C$s.scrollTo=function(C$s){this.commitMeasure(),this._tf.scrollY=C$s},C$l(0,C$s,"scrollY",function(){return this._tf.scrollY}),C$l(0,C$s,"width",C$M.prototype._$get_width,function(C$s){C$G.superSet(C$Ts,this,"width",C$s),this.callLater(this.changeScroll)}),C$l(0,C$s,"hScrollBar",function(){return this._hScrollBar}),C$l(0,C$s,"height",C$M.prototype._$get_height,function(C$s){C$G.superSet(C$Ts,this,"height",C$s),this.callLater(this.changeScroll)}),C$l(0,C$s,"maxScrollX",function(){return this._tf.maxScrollX}),C$l(0,C$s,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(C$s){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new C$Ms),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=C$s}),C$l(0,C$s,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(C$s){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new C$W),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=C$s}),C$l(0,C$s,"vScrollBar",function(){return this._vScrollBar}),C$l(0,C$s,"maxScrollY",function(){return this._tf.maxScrollY}),C$l(0,C$s,"scrollX",function(){return this._tf.scrollX}),C$T}(C$Ts);!function(C$s){function C$M(){this._uiView=null,this.isCloseOther=!1,C$M.__super.call(this)}C$c(C$M,"laya.ui.AsynDialog",C$xs);var C$T=C$M.prototype;C$T.createView=function(C$s){this._uiView=C$s},C$T._open=function(C$s,C$M,C$T){this.isModal=C$s,this.isCloseOther=C$M,C$xs.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},C$T.onCreated=function(){this.createUI(),this.onOpen()},C$T.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},C$T.onOpen=function(){C$xs.manager.open(this,this.isCloseOther),C$xs.manager.lock(!1)},C$T.close=function(C$s,C$M){void 0===C$M&&(C$M=!0),C$xs.manager.close(this),this.onClose()},C$T.onClose=function(){},C$T.destroy=function(C$s){void 0===C$s&&(C$s=!0),laya.ui.View.prototype.destroy.call(this,C$s),this._uiView=null,this.onDestroy()},C$T.onDestroy=function(){}}();C$G.__init([C$K])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}}),function(C$_,C$s,C$r){C$r.un,C$r.uns;var C$p=C$r.static,C$R=C$r.class,C$q=C$r.getset,C$X=C$r.__newvec,C$t=laya.maths.Arith,C$l=laya.webgl.atlas.AtlasResourceManager,C$T=laya.webgl.shader.BaseShader,C$B=laya.utils.Browser,C$u=laya.webgl.utils.Buffer,C$N=laya.utils.Byte,C$x=laya.utils.ClassUtils,C$E=C$r.Config,C$c=(laya.events.Event,laya.events.EventDispatcher),C$h=laya.utils.Handler,C$f=laya.net.Loader,C$M=laya.net.LoaderManager,C$O=(laya.maths.MathUtil,laya.display.Node),C$G=laya.renders.Render,C$U=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),C$g=laya.resource.Resource,C$J=laya.utils.RunDriver,C$P=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),C$w=laya.display.Sprite,C$k=laya.utils.Stat,C$A=laya.utils.StringKey,C$Q=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),C$D=laya.utils.Utils,C$v=laya.webgl.WebGL,C$z=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;C$r.interface("laya.d3.core.IClone"),C$r.interface("laya.d3.graphics.IVertex"),C$r.interface("laya.d3.core.render.IUpdate"),C$r.interface("laya.d3.core.scene.ITreeNode"),C$r.interface("laya.d3.core.render.IRenderable");(function(){function C$m(){}C$R(C$m,"laya.d3.animation.AnimationClipParser01"),C$m.READ_DATA=function(){C$m._DATA.offset=C$m._reader.getUint32(),C$m._DATA.size=C$m._reader.getUint32()},C$m.READ_BLOCK=function(){for(var C$s=C$m._BLOCK.count=C$m._reader.getUint16(),C$M=C$m._BLOCK.blockStarts=[],C$T=C$m._BLOCK.blockLengths=[],C$X=0;C$X<C$s;C$X++)C$M.push(C$m._reader.getUint32()),C$T.push(C$m._reader.getUint32())},C$m.READ_STRINGS=function(){var C$s=C$m._reader.getUint32(),C$M=C$m._reader.getUint16(),C$T=C$m._reader.pos;C$m._reader.pos=C$s+C$m._DATA.offset;for(var C$X=0;C$X<C$M;C$X++)C$m._strings[C$X]=C$m._reader.readUTFString();C$m._reader.pos=C$T},C$m.parse=function(C$s,C$M){C$m._animationClip=C$s;(C$m._reader=C$M).__getBuffer();C$m.READ_DATA(),C$m.READ_BLOCK(),C$m.READ_STRINGS();for(var C$T=0,C$X=C$m._BLOCK.count;C$T<C$X;C$T++){var C$x=C$M.getUint16(),C$c=C$m._strings[C$x],C$l=C$m["READ_"+C$c];if(null==C$l)throw new Error("model file err,no this function:"+C$x+" "+C$c);C$l.call()}},C$m.READ_ANIMATIONS=function(){var C$s,C$M=0,C$T=0,C$X=C$m._reader,C$x=C$X.__getBuffer(),C$c=[],C$l=C$X.getUint8();for(C$c.length=C$l,C$M=0;C$M<C$l;C$M++)C$c[C$M]=C$X.getUint16();var C$u=[],C$E=C$X.getUint16();for(C$u.length=C$E,C$M=0;C$M<C$E;C$M++)C$u[C$M]=C$X.getFloat32();var C$O=C$m._animationClip;C$O.name=C$m._strings[C$X.getUint16()];var C$U=C$O._duration=C$X.getFloat32();C$O.islooping=!!C$X.getByte(),C$O._frameRate=C$X.getInt16();var C$p=C$X.getInt16(),C$_=C$O._nodes=new Array;C$_.length=C$p,(C$O._publicClipDatas=[]).length=C$p;var C$R=C$O._nodesMap={},C$q=0,C$G=0;for(C$M=0;C$M<C$p;C$M++){C$s=C$_[C$M]=new C$S;var C$g=C$X.getUint16(),C$f=C$s.path=[];for(C$f.length=C$g,C$T=0;C$T<C$g;C$T++)C$f[C$T]=C$m._strings[C$X.getUint16()];var C$J=C$f.join("/"),C$P=C$R[C$J];C$P||(C$R[C$J]=C$P=[]),C$P.push(C$s);var C$t=C$X.getInt16();-1!==C$t&&(C$s.componentType=C$m._strings[C$t]);var C$r=C$b._propertyIndexDic[C$m._strings[C$X.getUint16()]];if(null==C$r)throw new Error("AnimationClipParser01:unknown property name.");var C$N=C$r<4,C$w=!C$N||C$N&&""===C$f[0];(C$s._cacheProperty=C$w)?C$q++:C$G++,C$s.propertyNameID=C$r;var C$k=C$c[C$X.getUint8()];C$s.keyFrameWidth=C$k/4;var C$A=C$s.keyFrames=[],C$D=C$A.length=C$X.getUint16(),C$h=null,C$Q=NaN;for(C$T=0;C$T<C$D;C$T++){var C$v=C$A[C$T]=new C$L;C$Q=C$v.startTime=C$u[C$X.getUint16()];var C$z=C$X.pos;C$v.inTangent=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$z=C$X.pos,C$v.outTangent=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$z=C$X.pos,C$v.data=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$h&&(C$h.next=C$v,C$h.duration=C$Q-C$h.startTime),C$h=C$v}C$v.next=null,C$v.duration=C$U-C$Q}var C$B=C$O._nodeToCachePropertyMap=new Int32Array(C$p),C$o=C$O._cachePropertyMap=new Int32Array(C$q),C$C=C$O._unCachePropertyMap=new Int32Array(C$G);for(C$q=C$G=0,C$M=0;C$M<C$p;C$M++)(C$s=C$_[C$M])._cacheProperty?(C$B[C$M]=C$q,C$o[C$q++]=C$M):C$C[C$G++]=C$M},C$m._animationClip=null,C$m._reader=null,C$m._strings=[],C$p(C$m,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function C$e(){}C$R(C$e,"laya.d3.animation.AnimationClipParser02"),C$e.READ_DATA=function(){C$e._DATA.offset=C$e._reader.getUint32(),C$e._DATA.size=C$e._reader.getUint32()},C$e.READ_BLOCK=function(){for(var C$s=C$e._BLOCK.count=C$e._reader.getUint16(),C$M=C$e._BLOCK.blockStarts=[],C$T=C$e._BLOCK.blockLengths=[],C$X=0;C$X<C$s;C$X++)C$M.push(C$e._reader.getUint32()),C$T.push(C$e._reader.getUint32())},C$e.READ_STRINGS=function(){var C$s=C$e._reader.getUint32(),C$M=C$e._reader.getUint16(),C$T=C$e._reader.pos;C$e._reader.pos=C$s+C$e._DATA.offset;for(var C$X=0;C$X<C$M;C$X++)C$e._strings[C$X]=C$e._reader.readUTFString();C$e._reader.pos=C$T},C$e.parse=function(C$s,C$M){C$e._animationClip=C$s;(C$e._reader=C$M).__getBuffer();C$e.READ_DATA(),C$e.READ_BLOCK(),C$e.READ_STRINGS();for(var C$T=0,C$X=C$e._BLOCK.count;C$T<C$X;C$T++){var C$x=C$M.getUint16(),C$c=C$e._strings[C$x],C$l=C$e["READ_"+C$c];if(null==C$l)throw new Error("model file err,no this function:"+C$x+" "+C$c);C$l.call()}},C$e.READ_ANIMATIONS=function(){var C$s,C$M=0,C$T=0,C$X=C$e._reader,C$x=C$X.__getBuffer(),C$c=[],C$l=C$X.getUint8();for(C$c.length=C$l,C$M=0;C$M<C$l;C$M++)C$c[C$M]=C$X.getUint16();var C$u=[],C$E=C$X.getUint16();for(C$u.length=C$E,C$M=0;C$M<C$E;C$M++)C$u[C$M]=C$X.getFloat32();var C$O=C$e._animationClip;C$O.name=C$e._strings[C$X.getUint16()];var C$U=C$O._duration=C$X.getFloat32();C$O.islooping=!!C$X.getByte(),C$O._frameRate=C$X.getInt16();var C$p=C$X.getInt16(),C$_=C$O._nodes=new Array;C$_.length=C$p,(C$O._publicClipDatas=[]).length=C$p;var C$R=C$O._nodesMap={},C$q=0,C$G=0;for(C$M=0;C$M<C$p;C$M++){C$s=C$_[C$M]=new C$S;var C$g=C$X.getUint16(),C$f=C$s.path=[];for(C$f.length=C$g,C$T=0;C$T<C$g;C$T++)C$f[C$T]=C$e._strings[C$X.getUint16()];var C$J=C$f.join("/"),C$P=C$R[C$J];C$P||(C$R[C$J]=C$P=[]),C$P.push(C$s);var C$t=C$X.getInt16();-1!==C$t&&(C$s.componentType=C$e._strings[C$t]);var C$r=C$b._propertyIndexDic[C$e._strings[C$X.getUint16()]];if(null==C$r)throw new Error("AnimationClipParser02:unknown property name.");var C$N=C$r<4,C$w=!C$N||C$N&&""===C$f[0];(C$s._cacheProperty=C$w)?C$q++:C$G++,C$s.propertyNameID=C$r;var C$k=C$c[C$X.getUint8()];C$s.keyFrameWidth=C$k/4;var C$A=C$s.keyFrames=[],C$D=C$A.length=C$X.getUint16(),C$h=null,C$Q=NaN;for(C$T=0;C$T<C$D;C$T++){var C$v=C$A[C$T]=new C$L;C$Q=C$v.startTime=C$u[C$X.getUint16()];var C$z=C$X.pos;C$v.inTangent=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$z=C$X.pos,C$v.outTangent=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$z=C$X.pos,C$v.data=new Float32Array(C$x.slice(C$z,C$z+C$k)),C$X.pos+=C$k,C$h&&(C$h.next=C$v,C$h.duration=C$Q-C$h.startTime),C$h=C$v}C$v.next=null,C$v.duration=C$U-C$Q}var C$B=C$X.getUint16();for(C$M=0;C$M<C$B;C$M++){var C$o,C$C=new C$V;C$C.time=C$X.getFloat32(),C$C.eventName=C$e._strings[C$X.getUint16()];var C$m=C$X.getUint16();for(0<C$m&&(C$C.params=C$o=[]),C$T=0;C$T<C$m;C$T++){switch(C$X.getByte()){case 0:C$o.push(!!C$X.getByte());break;case 1:C$o.push(C$X.getInt32());break;case 2:C$o.push(C$X.getFloat32());break;case 3:C$o.push(C$e._strings[C$X.getUint16()]);break;default:throw new Error("unknown type.")}}C$O.addEvent(C$C)}var C$Y=C$O._nodeToCachePropertyMap=new Int32Array(C$p),C$I=C$O._cachePropertyMap=new Int32Array(C$q),C$y=C$O._unCachePropertyMap=new Int32Array(C$G);for(C$q=C$G=0,C$M=0;C$M<C$p;C$M++)(C$s=C$_[C$M])._cacheProperty?(C$Y[C$M]=C$q,C$I[C$q++]=C$M):C$y[C$G++]=C$M},C$e._animationClip=null,C$e._reader=null,C$e._strings=[],C$p(C$e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var C$V=function(){function C$s(){this.time=NaN,this.eventName=null,this.params=null}return C$R(C$s,"laya.d3.animation.AnimationEvent"),C$s}(),C$b=function(){function C$X(){this._childs=[],this.transform=new C$JM(this)}C$R(C$X,"laya.d3.animation.AnimationNode");var C$s=C$X.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.addChild=function(C$s){C$s._parent=this,C$s.transform.setParent(this.transform),this._childs.push(C$s)},C$s.removeChild=function(C$s){var C$M=this._childs.indexOf(C$s);-1!==C$M&&this._childs.splice(C$M,1)},C$s.getChildByName=function(C$s){for(var C$M=0,C$T=this._childs.length;C$M<C$T;C$M++){var C$X=this._childs[C$M];if(C$X.name===C$s)return C$X}return null},C$s.getChildByIndex=function(C$s){return this._childs[C$s]},C$s.getChildCount=function(){return this._childs.length},C$s.cloneTo=function(C$s){var C$M=C$s;C$M.name=this.name;for(var C$T=0,C$X=this._childs.length;C$T<C$X;C$T++){var C$x=this._childs[C$T],C$c=C$x.clone();C$M.addChild(C$c);var C$l=C$x.transform,C$u=C$c.transform;C$u.setLocalPosition(C$l.getLocalPosition()),C$u.setLocalRotation(C$l.getLocalRotation()),C$u.setLocalScale(C$l.getLocalScale()),C$u._localRotationEuler=C$l._localRotationEuler,C$u._setWorldMatrixIgnoreUpdate(C$l.getWorldMatrix())}},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$X.__init__=function(){C$X.registerAnimationNodeProperty("localPosition",C$X._getLocalPosition,C$X._setLocalPosition),C$X.registerAnimationNodeProperty("localRotation",C$X._getLocalRotation,C$X._setLocalRotation),C$X.registerAnimationNodeProperty("localScale",C$X._getLocalScale,C$X._setLocalScale),C$X.registerAnimationNodeProperty("localRotationEuler",C$X._getLocalRotationEuler,C$X._setLocalRotationEuler),C$X.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",C$X._getParticleRenderSharedMaterialTintColor,C$X._setParticleRenderSharedMaterialTintColor),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",C$X._getMeshRenderSharedMaterialTilingOffset,C$X._setMeshRenderSharedMaterialTilingOffset),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",C$X._getMeshRenderSharedMaterialAlbedo,C$X._setMeshRenderSharedMaterialAlbedo),C$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",C$X._getSkinnedMeshRenderSharedMaterialTilingOffset,C$X._setSkinnedMeshRenderSharedMaterialTilingOffset),C$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",C$X._getSkinnedMeshRenderSharedMaterialAlbedo,C$X._setSkinnedMeshRenderSharedMaterialAlbedo),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",C$X._getMeshRenderSharedMaterialAlbedo,C$X._setMeshRenderSharedMaterialAlbedo),C$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",C$X._getSkinnedMeshRenderSharedMaterialAlbedo,C$X._setSkinnedMeshRenderSharedMaterialAlbedo),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",C$X._getMeshRenderSharedMaterialIntensity,C$X._setMeshRenderSharedMaterialIntensity),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",C$X._getMeshRenderSharedMaterialAlpha,C$X._setMeshRenderSharedMaterialAlpha),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",C$X._getMeshRenderSharedMaterialAlphaColor,C$X._setMeshRenderSharedMaterialAlphaColor),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",C$X._getMeshRenderSharedMaterialBaseColor,C$X._setMeshRenderSharedMaterialBaseColor),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",C$X._getMeshRenderSharedMaterialDissolve,C$X._setMeshRenderSharedMaterialDissolve),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",C$X._getMeshRenderSharedMaterialDissolveSpeed,C$X._setMeshRenderSharedMaterialDissolveSpeed),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",C$X._getMeshRenderSharedMaterialMMultiplier,C$X._setMeshRenderSharedMaterialMMultiplier),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",C$X._getMeshRenderSharedMaterialBaseScrollSpeedX,C$X._setMeshRenderSharedMaterialBaseScrollSpeedX),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",C$X._getMeshRenderSharedMaterialBaseScrollSpeedY,C$X._setMeshRenderSharedMaterialBaseScrollSpeedY),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",C$X._getMeshRenderSharedMaterialSecondScrollSpeedX,C$X._setMeshRenderSharedMaterialSecondScrollSpeedX),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",C$X._getMeshRenderSharedMaterialSecondScrollSpeedY,C$X._setMeshRenderSharedMaterialSecondScrollSpeedY),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",C$X._getMeshRenderSharedMaterialDetailTilingOffset,C$X._setMeshRenderSharedMaterialDetailTilingOffset),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",C$X._getMeshRenderSharedMaterialDissolveTilingOffset,C$X._setMeshRenderSharedMaterialDissolveTilingOffset),C$X.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",C$X._getMeshRenderSharedMaterialMaskTilingOffset,C$X._setMeshRenderSharedMaterialMaskTilingOffset)},C$X.registerAnimationNodeProperty=function(C$s,C$M,C$T){if(C$X._propertyIndexDic[C$s])throw new Error("AnimationNode: this propertyName has registered.");C$X._propertyIndexDic[C$s]=C$X._propertyIDCounter,C$X._propertyGetFuncs[C$X._propertyIDCounter]=C$M,C$X._propertySetFuncs[C$X._propertyIDCounter]=C$T,C$X._propertyIDCounter++},C$X._getLocalPosition=function(C$s,C$M){return C$s?C$s.transform.getLocalPosition():C$M._transform.localPosition.elements},C$X._setLocalPosition=function(C$s,C$M,C$T){if(C$s)C$s.transform.setLocalPosition(C$T);else{var C$X=C$M._transform,C$x=C$X.localPosition;C$x.elements=C$T,C$X.localPosition=C$x}},C$X._getLocalRotation=function(C$s,C$M){return C$s?C$s.transform.getLocalRotation():C$M._transform.localRotation.elements},C$X._setLocalRotation=function(C$s,C$M,C$T){if(C$s)C$s.transform.setLocalRotation(C$T);else{var C$X=C$M._transform,C$x=C$X.localRotation;C$x.elements=C$T,C$X.localRotation=C$x}},C$X._getLocalScale=function(C$s,C$M){return C$s?C$s.transform.getLocalScale():C$M._transform.localScale.elements},C$X._setLocalScale=function(C$s,C$M,C$T){if(C$s)C$s.transform.setLocalScale(C$T);else{var C$X=C$M._transform,C$x=C$X.localScale;C$x.elements=C$T,C$X.localScale=C$x}},C$X._getLocalRotationEuler=function(C$s,C$M){return C$s?C$s.transform.getLocalRotationEuler():C$M._transform.localRotationEuler.elements},C$X._setLocalRotationEuler=function(C$s,C$M,C$T){if(C$s)C$s.transform.setLocalRotationEuler(C$T);else{var C$X=C$M._transform,C$x=C$X.localRotationEuler;C$x.elements=C$T,C$X.localRotationEuler=C$x}},C$X._getMeshRenderSharedMaterialTilingOffset=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return C$M.meshRender.sharedMaterial.tilingOffset.elements},C$X._setMeshRenderSharedMaterialTilingOffset=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).tilingOffset).elements=C$T,C$X.tilingOffset=C$x)}else(C$x=(C$X=C$M.meshRender.material).tilingOffset).elements=C$T,C$X.tilingOffset=C$x},C$X._getMeshRenderSharedMaterialAlbedo=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.albedoColor.elements:null}return C$M.meshRender.sharedMaterial.albedoColor.elements},C$X._setMeshRenderSharedMaterialAlbedo=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).albedoColor).elements=C$T,C$X.albedoColor=C$x)}else(C$x=(C$X=C$M.meshRender.material).albedoColor).elements=C$T,C$X.albedoColor=C$x},C$X._getSkinnedMeshRenderSharedMaterialTilingOffset=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return C$M.skinnedMeshRender.sharedMaterial.tilingOffset.elements},C$X._setSkinnedMeshRenderSharedMaterialTilingOffset=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.skinnedMeshRender.material).tilingOffset).elements=C$T,C$X.tilingOffset=C$x)}else(C$x=(C$X=C$M.skinnedMeshRender.material).tilingOffset).elements=C$T,C$X.tilingOffset=C$x},C$X._getSkinnedMeshRenderSharedMaterialAlbedo=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return C$M.skinnedMeshRender.sharedMaterial.albedoColor.elements},C$X._setSkinnedMeshRenderSharedMaterialAlbedo=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.skinnedMeshRender.material).albedoColor).elements=C$T,C$X.albedoColor=C$x)}else(C$x=(C$X=C$M.skinnedMeshRender.material).albedoColor).elements=C$T,C$X.albedoColor=C$x},C$X._getParticleRenderSharedMaterialTintColor=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.particleRender.sharedMaterial.tintColor.elements:null}return C$M.particleRender.sharedMaterial.tintColor.elements},C$X._setParticleRenderSharedMaterialTintColor=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.particleRender.material).tintColor).elements=C$T,C$X.tintColor=C$x)}else(C$x=(C$X=C$M.particleRender.material).tintColor).elements=C$T,C$X.tintColor=C$x},C$X._getMeshRenderSharedMaterialAlphaColor=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.alphaColor.elements:null}return C$M.meshRender.sharedMaterial.alphaColor.elements},C$X._setMeshRenderSharedMaterialAlphaColor=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).alphaColor).elements=C$T,C$X.alphaColor=C$x)}else(C$x=(C$X=C$M.meshRender.material).alphaColor).elements=C$T,C$X.alphaColor=C$x},C$X._getMeshRenderSharedMaterialBaseColor=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.baseColor.elements:null}return C$M.meshRender.sharedMaterial.baseColor.elements},C$X._setMeshRenderSharedMaterialBaseColor=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).baseColor).elements=C$T,C$X.baseColor=C$x)}else(C$x=(C$X=C$M.meshRender.material).baseColor).elements=C$T,C$X.baseColor=C$x},C$X._getMeshRenderSharedMaterialDissolve=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.dissolve:0}return C$M.meshRender.sharedMaterial.dissolve},C$X._setMeshRenderSharedMaterialDissolve=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.dissolve=C$T[0])}else C$M.meshRender.material.dissolve=C$T[0]},C$X._getMeshRenderSharedMaterialDissolveSpeed=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.dissolveSpeed:0}return C$M.meshRender.sharedMaterial.dissolveSpeed},C$X._setMeshRenderSharedMaterialDissolveSpeed=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.dissolveSpeed=C$T[0])}else C$M.meshRender.material.dissolveSpeed=C$T[0]},C$X._getMeshRenderSharedMaterialMMultiplier=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.mMultiplier:0}return C$M.meshRender.sharedMaterial.mMultiplier},C$X._setMeshRenderSharedMaterialMMultiplier=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.mMultiplier=C$T[0])}else C$M.meshRender.material.mMultiplier=C$T[0]},C$X._getMeshRenderSharedMaterialBaseScrollSpeedX=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return C$M.meshRender.sharedMaterial.baseScrollSpeedX},C$X._setMeshRenderSharedMaterialBaseScrollSpeedX=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.baseScrollSpeedX=C$T[0])}else C$M.meshRender.material.baseScrollSpeedX=C$T[0]},C$X._getMeshRenderSharedMaterialBaseScrollSpeedY=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return C$M.meshRender.sharedMaterial.baseScrollSpeedY},C$X._setMeshRenderSharedMaterialBaseScrollSpeedY=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.baseScrollSpeedY=C$T[0])}else C$M.meshRender.material.baseScrollSpeedY=C$T[0]},C$X._getMeshRenderSharedMaterialSecondScrollSpeedX=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return C$M.meshRender.sharedMaterial.secondScrollSpeedX},C$X._setMeshRenderSharedMaterialSecondScrollSpeedX=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.secondScrollSpeedX=C$T[0])}else C$M.meshRender.material.secondScrollSpeedX=C$T[0]},C$X._getMeshRenderSharedMaterialSecondScrollSpeedY=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return C$M.meshRender.sharedMaterial.secondScrollSpeedY},C$X._setMeshRenderSharedMaterialSecondScrollSpeedY=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.secondScrollSpeedY=C$T[0])}else C$M.meshRender.material.secondScrollSpeedY=C$T[0]},C$X._getMeshRenderSharedMaterialAlpha=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.alpha:0}return C$M.meshRender.sharedMaterial.alpha},C$X._setMeshRenderSharedMaterialAlpha=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.alpha=C$T[0])}else C$M.meshRender.material.alpha=C$T[0]},C$X._getMeshRenderSharedMaterialIntensity=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.intensity:0}return C$M.meshRender.sharedMaterial.intensity},C$X._setMeshRenderSharedMaterialIntensity=function(C$s,C$M,C$T){if(C$s){var C$X=C$s.transform._entity;C$X&&(C$X.owner.meshRender.material.intensity=C$T[0])}else C$M.meshRender.material.intensity=C$T[0]},C$X._getMeshRenderSharedMaterialDetailTilingOffset=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return C$M.meshRender.sharedMaterial.detailTilingOffset.elements},C$X._setMeshRenderSharedMaterialDetailTilingOffset=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).detailTilingOffset).elements=C$T,C$X.detailTilingOffset=C$x)}else(C$x=(C$X=C$M.meshRender.material).detailTilingOffset).elements=C$T,C$X.detailTilingOffset=C$x},C$X._getMeshRenderSharedMaterialDissolveTilingOffset=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return C$M.meshRender.sharedMaterial.dissolveTilingOffset.elements},C$X._setMeshRenderSharedMaterialDissolveTilingOffset=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).dissolveTilingOffset).elements=C$T,C$X.dissolveTilingOffset=C$x)}else(C$x=(C$X=C$M.meshRender.material).dissolveTilingOffset).elements=C$T,C$X.dissolveTilingOffset=C$x},C$X._getMeshRenderSharedMaterialMaskTilingOffset=function(C$s,C$M){if(C$s){var C$T=C$s.transform._entity;return C$T?C$T.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return C$M.meshRender.sharedMaterial.maskTilingOffset.elements},C$X._setMeshRenderSharedMaterialMaskTilingOffset=function(C$s,C$M,C$T){var C$X,C$x;if(C$s){var C$c=C$s.transform._entity;C$c&&((C$x=(C$X=C$c.owner.meshRender.material).maskTilingOffset).elements=C$T,C$X.maskTilingOffset=C$x)}else(C$x=(C$X=C$M.meshRender.material).maskTilingOffset).elements=C$T,C$X.maskTilingOffset=C$x},C$X._propertyIDCounter=0,C$X._propertyIndexDic={},C$X._propertySetFuncs=[],C$X._propertyGetFuncs=[],C$X}(),C$L=function(){function C$s(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return C$R(C$s,"laya.d3.animation.Keyframe"),C$s}(),C$S=function(){function C$s(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return C$R(C$s,"laya.d3.animation.KeyframeNode"),C$s}(),C$o=(function(){function C$s(){this._tempVector30=new C$lM,this._tempVector31=new C$lM,this._tempVector32=new C$lM,this._a=new C$lM,this._b=new C$lM,this._c=new C$lM,this._d=new C$lM}C$R(C$s,"laya.d3.core.glitter.SplineCurvePositionVelocity");var C$M=C$s.prototype;C$M.Init=function(C$s,C$M,C$T,C$X){C$s.cloneTo(this._d),C$M.cloneTo(this._c),C$lM.scale(C$s,2,this._a),C$lM.scale(C$T,2,this._tempVector30),C$lM.subtract(this._a,this._tempVector30,this._a),C$lM.add(this._a,C$M,this._a),C$lM.add(this._a,C$X,this._a),C$lM.scale(C$T,3,this._b),C$lM.scale(C$s,3,this._tempVector30),C$lM.subtract(this._b,this._tempVector30,this._b),C$lM.subtract(this._b,C$X,this._b),C$lM.scale(C$M,2,this._tempVector30),C$lM.subtract(this._b,this._tempVector30,this._b)},C$M.Slerp=function(C$s,C$M){C$lM.scale(this._a,C$s*C$s*C$s,this._tempVector30),C$lM.scale(this._b,C$s*C$s,this._tempVector31),C$lM.scale(this._c,C$s,this._tempVector32),C$lM.add(this._tempVector30,this._tempVector31,C$M),C$lM.add(C$M,this._tempVector32,C$M),C$lM.add(C$M,this._d,C$M)}}(),function(){function C$I(C$s,C$M,C$T,C$X){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=C$s,this._h=C$M,this._minHeight=C$T,this._maxHeight=C$X}C$R(C$I,"laya.d3.core.HeightMap");var C$s=C$I.prototype;C$s._inBounds=function(C$s,C$M){return 0<=C$s&&C$s<this._h&&0<=C$M&&C$M<this._w},C$s.getHeight=function(C$s,C$M){return this._inBounds(C$s,C$M)?this._datas[C$s][C$M]:NaN},C$q(0,C$s,"width",function(){return this._w}),C$q(0,C$s,"height",function(){return this._h}),C$q(0,C$s,"maxHeight",function(){return this._maxHeight}),C$q(0,C$s,"minHeight",function(){return this._minHeight}),C$I.creatFromMesh=function(C$s,C$M,C$T,C$X){for(var C$x=[],C$c=[],C$l=C$s.getSubMeshCount(),C$u=0;C$u<C$l;C$u++){for(var C$E=C$s.getSubMesh(C$u),C$O=C$E._getVertexBuffer(),C$U=C$O.getData(),C$p=[],C$_=0;C$_<C$U.length;C$_+=C$O.vertexDeclaration.vertexStride/4){var C$R=new C$lM(C$U[C$_+0],C$U[C$_+1],C$U[C$_+2]);C$p.push(C$R)}C$x.push(C$p);var C$q=C$E._getIndexBuffer();C$c.push(C$q.getData())}var C$G=C$s.boundingBox,C$g=C$G.min.x,C$f=C$G.min.z,C$J=C$G.max.x,C$P=C$G.max.z,C$t=C$G.min.y,C$r=C$G.max.y,C$N=C$J-C$g,C$w=C$P-C$f,C$k=C$X.elements[0]=C$N/(C$M-1),C$A=C$X.elements[1]=C$w/(C$T-1),C$D=new C$I(C$M,C$T,C$t,C$r),C$h=C$I._tempRay,C$Q=C$h.direction.elements;C$Q[0]=0,C$Q[1]=-1,C$Q[2]=0;var C$v=C$r+.1;C$h.origin.elements[1]=C$v;for(var C$z=0;C$z<C$T;C$z++){var C$B=C$f+C$z*C$A;C$D._datas[C$z]=[];for(var C$o=0;C$o<C$M;C$o++){var C$C=C$g+C$o*C$k,C$m=C$h.origin.elements;C$m[0]=C$C,C$m[2]=C$B;var C$Y=C$I._getPosition(C$h,C$x,C$c);C$D._datas[C$z][C$o]=C$Y===Number.MAX_VALUE?NaN:C$v-C$Y}}return C$D},C$I.createFromImage=function(C$s,C$M,C$T){for(var C$X=C$s.width,C$x=C$s.height,C$c=new C$I(C$X,C$x,C$M,C$T),C$l=(C$T-C$M)/254,C$u=C$s.getPixels(),C$E=0,C$O=0;C$O<C$x;C$O++)for(var C$U=C$c._datas[C$O]=[],C$p=0;C$p<C$X;C$p++){var C$_=C$u[C$E++],C$R=C$u[C$E++],C$q=C$u[C$E++],C$G=C$u[C$E++];C$U[C$p]=255==C$_&&255==C$R&&255==C$q&&255==C$G?NaN:(C$_+C$R+C$q)/3*C$l+C$M}return C$c},C$I._getPosition=function(C$s,C$M,C$T){for(var C$X=Number.MAX_VALUE,C$x=0;C$x<C$M.length;C$x++)for(var C$c=C$M[C$x],C$l=C$T[C$x],C$u=0;C$u<C$l.length;C$u+=3){var C$E=C$c[C$l[C$u+0]],C$O=C$c[C$l[C$u+1]],C$U=C$c[C$l[C$u+2]],C$p=C$qM.rayIntersectsTriangle(C$s,C$E,C$O,C$U);!isNaN(C$p)&&C$p<C$X&&(C$X=C$p)}return C$X},C$p(C$I,["_tempRay",function(){return this._tempRay=new C$xM(new C$lM,new C$lM)}])}(),function(){function C$x(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}C$R(C$x,"laya.d3.core.Layer");var C$s=C$x.prototype;return C$s._binarySearchIndex=function(){for(var C$s=0,C$M=C$x._collsionTestList.length-1,C$T=0;C$s<=C$M;){C$T=Math.floor((C$s+C$M)/2);var C$X=C$x._collsionTestList[C$T];if(C$X==this._number)return C$T;C$X>this._number?C$M=C$T-1:C$s=C$T+1}return C$s},C$s._addCollider=function(C$s){0===this._colliders.length&&C$x._collsionTestList.splice(this._binarySearchIndex(),0,this._number),C$s._isRigidbody?(this._colliders.unshift(C$s),this._nonRigidbodyOffset++):this._colliders.push(C$s)},C$s._removeCollider=function(C$s){var C$M=this._colliders.indexOf(C$s);C$M<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(C$M,1),0===this._colliders.length&&C$x._collsionTestList.splice(C$x._collsionTestList.indexOf(this._number),1)},C$q(0,C$s,"number",function(){return this._number}),C$q(0,C$s,"visible",function(){return this._visible},function(C$s){this._visible=C$s,C$x._visibleLayers=C$s?C$x._visibleLayers|this.mask:C$x._visibleLayers&~this.mask}),C$q(0,C$s,"mask",function(){return this._mask}),C$q(1,C$x,"visibleLayers",function(){return C$x._visibleLayers},function(C$s){C$x._visibleLayers=C$s;for(var C$M=0,C$T=C$x._layerList.length;C$M<C$T;C$M++){var C$X=C$x._layerList[C$M];C$X._visible=0!=(C$X._mask&C$x._visibleLayers)}}),C$x.__init__=function(){C$x._layerList.length=31;for(var C$s=0;C$s<31;C$s++){var C$M=new C$x;C$x._layerList[C$s]=C$M,0===C$s?(C$M.name="Default Layer",C$M.visible=!0):(C$M.name="Layer-"+C$s,C$M.visible=!1),C$M._number=C$s,C$M._mask=Math.pow(2,C$s)}C$x.currentCreationLayer=C$x._layerList[0]},C$x.getLayerByNumber=function(C$s){if(C$s<0||30<C$s)throw new Error("无法返回指定Layer，该number超出范围！");return C$x._layerList[C$s]},C$x.getLayerByName=function(C$s){for(var C$M=0;C$M<31;C$M++)if(C$x._layerList[C$M].name===C$s)return C$x._layerList[C$M];throw new Error("无法返回指定Layer,该name不存在")},C$x.isVisible=function(C$s){return 0!=(C$s&C$x._currentCameraCullingMask&C$x._visibleLayers)},C$x._layerList=[],C$x._visibleLayers=2147483647,C$x._collsionTestList=[],C$x._currentCameraCullingMask=2147483647,C$x.maxCount=31,C$x.currentCreationLayer=null,C$x}()),C$C=(function(){function C$s(C$s,C$M,C$T){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=C$s,this._minCount=C$M,this._maxCount=C$T}C$R(C$s,"laya.d3.core.particleShuriKen.module.Burst");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.cloneTo=function(C$s){var C$M=C$s;C$M._time=this._time,C$M._minCount=this._minCount,C$M._maxCount=this._maxCount},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"time",function(){return this._time}),C$q(0,C$M,"minCount",function(){return this._minCount}),C$q(0,C$M,"maxCount",function(){return this._maxCount})}(),function(){function C$s(C$s){this._color=null,this.enbale=!1,this._color=C$s}C$R(C$s,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var C$M=C$s.prototype;C$M.cloneTo=function(C$s){var C$M=C$s;this._color.cloneTo(C$M._color),C$M.enbale=this.enbale},C$M.clone=function(){var C$s;switch(this._color.type){case 0:C$s=C$Y.createByConstant(this._color.constant.clone());break;case 1:C$s=C$Y.createByGradient(this._color.gradient.clone());break;case 2:C$s=C$Y.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:C$s=C$Y.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var C$M=new this.constructor(C$s);return C$M.enbale=this.enbale,C$M},C$q(0,C$M,"color",function(){return this._color})}(),function(){function C$s(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}C$R(C$s,"laya.d3.core.particleShuriKen.module.Emission");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),C$M._destroy=function(){this._bursts=null,this._destroyed=!0},C$M.getBurstsCount=function(){return this._bursts.length},C$M.getBurstByIndex=function(C$s){return this._bursts[C$s]},C$M.addBurst=function(C$s){var C$M=this._bursts.length;if(0<C$M)for(var C$T=0;C$T<C$M;C$T++)this._bursts[C$T].time>C$s.time&&this._bursts.splice(C$T,0,C$s);this._bursts.push(C$s)},C$M.removeBurst=function(C$s){var C$M=this._bursts.indexOf(C$s);-1!==C$M&&this._bursts.splice(C$M,1)},C$M.removeBurstByIndex=function(C$s){this._bursts.splice(C$s,1)},C$M.clearBurst=function(){this._bursts.length=0},C$M.cloneTo=function(C$s){var C$M=C$s,C$T=C$M._bursts;C$T.length=this._bursts.length;for(var C$X=0,C$x=this._bursts.length;C$X<C$x;C$X++){var C$c=C$T[C$X];C$c?this._bursts[C$X].cloneTo(C$c):C$T[C$X]=this._bursts[C$X].clone()}C$M._emissionRate=this._emissionRate,C$M.enbale=this.enbale},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"destroyed",function(){return this._destroyed}),C$q(0,C$M,"emissionRate",function(){return this._emissionRate},function(C$s){if(C$s<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=C$s})}(),function(){function C$X(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}C$R(C$X,"laya.d3.core.particleShuriKen.module.FrameOverTime");var C$s=C$X.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,C$M._constant=this._constant,this._overTime.cloneTo(C$M._overTime),C$M._constantMin=this._constantMin,C$M._constantMax=this._constantMax,this._overTimeMin.cloneTo(C$M._overTimeMin),this._overTimeMax.cloneTo(C$M._overTimeMax)},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"frameOverTimeData",function(){return this._overTime}),C$q(0,C$s,"constant",function(){return this._constant}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"frameOverTimeDataMin",function(){return this._overTimeMin}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"frameOverTimeDataMax",function(){return this._overTimeMax}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$X.createByConstant=function(C$s){var C$M=new C$X;return C$M._type=0,C$M._constant=C$s,C$M},C$X.createByOverTime=function(C$s){var C$M=new C$X;return C$M._type=1,C$M._overTime=C$s,C$M},C$X.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$X;return C$T._type=2,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$X.createByRandomTwoOverTime=function(C$s,C$M){var C$T=new C$X;return C$T._type=3,C$T._overTimeMin=C$s,C$T._overTimeMax=C$M,C$T},C$X}()),C$m=function(){function C$O(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}C$R(C$O,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var C$s=C$O.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,C$M._separateAxes=this._separateAxes,C$M._constant=this._constant,this._constantSeparate.cloneTo(C$M._constantSeparate),this._gradient.cloneTo(C$M._gradient),this._gradientX.cloneTo(C$M._gradientX),this._gradientY.cloneTo(C$M._gradientY),this._gradientZ.cloneTo(C$M._gradientZ),C$M._constantMin=this._constantMin,C$M._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(C$M._constantMinSeparate),this._constantMaxSeparate.cloneTo(C$M._constantMaxSeparate),this._gradientMin.cloneTo(C$M._gradientMin),this._gradientMax.cloneTo(C$M._gradientMax),this._gradientXMin.cloneTo(C$M._gradientXMin),this._gradientXMax.cloneTo(C$M._gradientXMax),this._gradientYMin.cloneTo(C$M._gradientYMin),this._gradientYMax.cloneTo(C$M._gradientYMax),this._gradientZMin.cloneTo(C$M._gradientZMin),this._gradientZMax.cloneTo(C$M._gradientZMax)},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"gradientZ",function(){return this._gradientZ}),C$q(0,C$s,"constant",function(){return this._constant}),C$q(0,C$s,"gradient",function(){return this._gradient}),C$q(0,C$s,"separateAxes",function(){return this._separateAxes}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"constantSeparate",function(){return this._constantSeparate}),C$q(0,C$s,"gradientX",function(){return this._gradientX}),C$q(0,C$s,"gradientY",function(){return this._gradientY}),C$q(0,C$s,"gradientW",function(){return this._gradientW}),C$q(0,C$s,"gradientMin",function(){return this._gradientMin}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"gradientMax",function(){return this._gradientMax}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$q(0,C$s,"gradientWMin",function(){return this._gradientWMin}),C$q(0,C$s,"constantMinSeparate",function(){return this._constantMinSeparate}),C$q(0,C$s,"constantMaxSeparate",function(){return this._constantMaxSeparate}),C$q(0,C$s,"gradientXMin",function(){return this._gradientXMin}),C$q(0,C$s,"gradientXMax",function(){return this._gradientXMax}),C$q(0,C$s,"gradientWMax",function(){return this._gradientWMax}),C$q(0,C$s,"gradientYMin",function(){return this._gradientYMin}),C$q(0,C$s,"gradientYMax",function(){return this._gradientYMax}),C$q(0,C$s,"gradientZMin",function(){return this._gradientZMin}),C$q(0,C$s,"gradientZMax",function(){return this._gradientZMax}),C$O.createByConstant=function(C$s){var C$M=new C$O;return C$M._type=0,C$M._separateAxes=!1,C$M._constant=C$s,C$M},C$O.createByConstantSeparate=function(C$s){var C$M=new C$O;return C$M._type=0,C$M._separateAxes=!0,C$M._constantSeparate=C$s,C$M},C$O.createByGradient=function(C$s){var C$M=new C$O;return C$M._type=1,C$M._separateAxes=!1,C$M._gradient=C$s,C$M},C$O.createByGradientSeparate=function(C$s,C$M,C$T,C$X){var C$x=new C$O;return C$x._type=1,C$x._separateAxes=!0,C$x._gradientX=C$s,C$x._gradientY=C$M,C$x._gradientZ=C$T,C$x._gradientW=C$X,C$x},C$O.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$O;return C$T._type=2,C$T._separateAxes=!1,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$O.createByRandomTwoConstantSeparate=function(C$s,C$M){var C$T=new C$O;return C$T._type=2,C$T._separateAxes=!0,C$T._constantMinSeparate=C$s,C$T._constantMaxSeparate=C$M,C$T},C$O.createByRandomTwoGradient=function(C$s,C$M){var C$T=new C$O;return C$T._type=3,C$T._separateAxes=!1,C$T._gradientMin=C$s,C$T._gradientMax=C$M,C$T},C$O.createByRandomTwoGradientSeparate=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){var C$E=new C$O;return C$E._type=3,C$E._separateAxes=!0,C$E._gradientXMin=C$s,C$E._gradientXMax=C$M,C$E._gradientYMin=C$T,C$E._gradientYMax=C$X,C$E._gradientZMin=C$x,C$E._gradientZMax=C$c,C$E._gradientWMin=C$l,C$E._gradientWMax=C$u,C$E},C$O}(),C$Y=function(){function C$X(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}C$R(C$X,"laya.d3.core.particleShuriKen.module.GradientColor");var C$s=C$X.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,this._constant.cloneTo(C$M._constant),this._constantMin.cloneTo(C$M._constantMin),this._constantMax.cloneTo(C$M._constantMax),this._gradient.cloneTo(C$M._gradient),this._gradientMin.cloneTo(C$M._gradientMin),this._gradientMax.cloneTo(C$M._gradientMax)},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"gradient",function(){return this._gradient}),C$q(0,C$s,"constant",function(){return this._constant}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"gradientMin",function(){return this._gradientMin}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"gradientMax",function(){return this._gradientMax}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$X.createByConstant=function(C$s){var C$M=new C$X;return C$M._type=0,C$M._constant=C$s,C$M},C$X.createByGradient=function(C$s){var C$M=new C$X;return C$M._type=1,C$M._gradient=C$s,C$M},C$X.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$X;return C$T._type=2,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$X.createByRandomTwoGradient=function(C$s,C$M){var C$T=new C$X;return C$T._type=3,C$T._gradientMin=C$s,C$T._gradientMax=C$M,C$T},C$X}(),C$I=(function(){function C$s(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}C$R(C$s,"laya.d3.core.particleShuriKen.module.GradientDataColor");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.addAlpha=function(C$s,C$M){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==C$s&&(C$s=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=C$s,this._alphaElements[this._alphaCurrentLength++]=C$M):DEBUG},C$M.addRGB=function(C$s,C$M){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==C$s&&(C$s=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=C$s,this._rgbElements[this._rgbCurrentLength++]=C$M.x,this._rgbElements[this._rgbCurrentLength++]=C$M.y,this._rgbElements[this._rgbCurrentLength++]=C$M.z):DEBUG},C$M.cloneTo=function(C$s){var C$M=C$s,C$T=0,C$X=0;C$M._alphaCurrentLength=this._alphaCurrentLength;var C$x=C$M._alphaElements;for(C$x.length=this._alphaElements.length,C$T=0,C$X=this._alphaElements.length;C$T<C$X;C$T++)C$x[C$T]=this._alphaElements[C$T];C$M._rgbCurrentLength=this._rgbCurrentLength;var C$c=C$M._rgbElements;for(C$c.length=this._rgbElements.length,C$T=0,C$X=this._rgbElements.length;C$T<C$X;C$T++)C$c[C$T]=this._rgbElements[C$T]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),C$q(0,C$M,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function C$s(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}C$R(C$s,"laya.d3.core.particleShuriKen.module.GradientDataInt");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.add=function(C$s,C$M){this._currentLength<8?(6===this._currentLength&&1!==C$s&&(C$s=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=C$s,this._elements[this._currentLength++]=C$M):console.log("Warning:data count must lessEqual than 4")},C$M.cloneTo=function(C$s){var C$M=C$s;C$M._currentLength=this._currentLength;var C$T=C$M._elements;C$T.length=this._elements.length;for(var C$X=0,C$x=this._elements.length;C$X<C$x;C$X++)C$T[C$X]=this._elements[C$X]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"gradientCount",function(){return this._currentLength/2})}(),function(){function C$s(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}C$R(C$s,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.add=function(C$s,C$M){this._currentLength<8?(6===this._currentLength&&1!==C$s&&(C$s=1,DEBUG),this._elements[this._currentLength++]=C$s,this._elements[this._currentLength++]=C$M):DEBUG},C$M.getKeyByIndex=function(C$s){return this._elements[2*C$s]},C$M.getValueByIndex=function(C$s){return this._elements[2*C$s+1]},C$M.getAverageValue=function(){for(var C$s=0,C$M=this._currentLength-2;C$s<C$M;C$s+=2){this._elements[C$s+1];this._elements[C$s+3],this._elements[C$s+2]-this._elements[C$s]}return 0},C$M.cloneTo=function(C$s){var C$M=C$s;C$M._currentLength=this._currentLength;var C$T=C$M._elements;C$T.length=this._elements.length;for(var C$X=0,C$x=this._elements.length;C$X<C$x;C$X++)C$T[C$X]=this._elements[C$X]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"gradientCount",function(){return this._currentLength/2})}(),function(){function C$s(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}C$R(C$s,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.add=function(C$s,C$M){this._currentLength<8?(6===this._currentLength&&1!==C$s&&(C$s=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=C$s,this._elements[this._currentLength++]=C$M.x,this._elements[this._currentLength++]=C$M.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},C$M.cloneTo=function(C$s){var C$M=C$s;C$M._currentLength=this._currentLength;var C$T=C$M._elements;C$T.length=this._elements.length;for(var C$X=0,C$x=this._elements.length;C$X<C$x;C$X++)C$T[C$X]=this._elements[C$X]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"gradientCount",function(){return this._currentLength/3})}(),function(){function C$u(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}C$R(C$u,"laya.d3.core.particleShuriKen.module.GradientSize");var C$s=C$u.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.getMaxSizeInGradient=function(){var C$s=0,C$M=0,C$T=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(C$s=0,C$M=this._gradientX.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientX.getValueByIndex(C$s));for(C$s=0,C$M=this._gradientY.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientY.getValueByIndex(C$s))}else for(C$s=0,C$M=this._gradient.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradient.getValueByIndex(C$s));break;case 1:C$T=this._separateAxes?(C$T=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),C$T=Math.max(C$T,this._constantMinSeparate.y),Math.max(C$T,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(C$s=0,C$M=this._gradientXMin.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientXMin.getValueByIndex(C$s));for(C$s=0,C$M=this._gradientXMax.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientXMax.getValueByIndex(C$s));for(C$s=0,C$M=this._gradientYMin.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientYMin.getValueByIndex(C$s));for(C$s=0,C$M=this._gradientZMax.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientZMax.getValueByIndex(C$s))}else{for(C$s=0,C$M=this._gradientMin.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientMin.getValueByIndex(C$s));for(C$s=0,C$M=this._gradientMax.gradientCount;C$s<C$M;C$s++)C$T=Math.max(C$T,this._gradientMax.getValueByIndex(C$s))}}return C$T},C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,C$M._separateAxes=this._separateAxes,this._gradient.cloneTo(C$M._gradient),this._gradientX.cloneTo(C$M._gradientX),this._gradientY.cloneTo(C$M._gradientY),this._gradientZ.cloneTo(C$M._gradientZ),C$M._constantMin=this._constantMin,C$M._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(C$M._constantMinSeparate),this._constantMaxSeparate.cloneTo(C$M._constantMaxSeparate),this._gradientMin.cloneTo(C$M._gradientMin),this._gradientMax.cloneTo(C$M._gradientMax),this._gradientXMin.cloneTo(C$M._gradientXMin),this._gradientXMax.cloneTo(C$M._gradientXMax),this._gradientYMin.cloneTo(C$M._gradientYMin),this._gradientYMax.cloneTo(C$M._gradientYMax),this._gradientZMin.cloneTo(C$M._gradientZMin),this._gradientZMax.cloneTo(C$M._gradientZMax)},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"gradientZ",function(){return this._gradientZ}),C$q(0,C$s,"gradient",function(){return this._gradient}),C$q(0,C$s,"separateAxes",function(){return this._separateAxes}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"gradientMin",function(){return this._gradientMin}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"gradientX",function(){return this._gradientX}),C$q(0,C$s,"gradientY",function(){return this._gradientY}),C$q(0,C$s,"gradientMax",function(){return this._gradientMax}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$q(0,C$s,"constantMinSeparate",function(){return this._constantMinSeparate}),C$q(0,C$s,"constantMaxSeparate",function(){return this._constantMaxSeparate}),C$q(0,C$s,"gradientXMin",function(){return this._gradientXMin}),C$q(0,C$s,"gradientXMax",function(){return this._gradientXMax}),C$q(0,C$s,"gradientYMin",function(){return this._gradientYMin}),C$q(0,C$s,"gradientYMax",function(){return this._gradientYMax}),C$q(0,C$s,"gradientZMin",function(){return this._gradientZMin}),C$q(0,C$s,"gradientZMax",function(){return this._gradientZMax}),C$u.createByGradient=function(C$s){var C$M=new C$u;return C$M._type=0,C$M._separateAxes=!1,C$M._gradient=C$s,C$M},C$u.createByGradientSeparate=function(C$s,C$M,C$T){var C$X=new C$u;return C$X._type=0,C$X._separateAxes=!0,C$X._gradientX=C$s,C$X._gradientY=C$M,C$X._gradientZ=C$T,C$X},C$u.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$u;return C$T._type=1,C$T._separateAxes=!1,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$u.createByRandomTwoConstantSeparate=function(C$s,C$M){var C$T=new C$u;return C$T._type=1,C$T._separateAxes=!0,C$T._constantMinSeparate=C$s,C$T._constantMaxSeparate=C$M,C$T},C$u.createByRandomTwoGradient=function(C$s,C$M){var C$T=new C$u;return C$T._type=2,C$T._separateAxes=!1,C$T._gradientMin=C$s,C$T._gradientMax=C$M,C$T},C$u.createByRandomTwoGradientSeparate=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=new C$u;return C$l._type=2,C$l._separateAxes=!0,C$l._gradientXMin=C$s,C$l._gradientXMax=C$M,C$l._gradientYMin=C$T,C$l._gradientYMax=C$X,C$l._gradientZMin=C$x,C$l._gradientZMax=C$c,C$l},C$u}()),C$y=function(){function C$u(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}C$R(C$u,"laya.d3.core.particleShuriKen.module.GradientVelocity");var C$s=C$u.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,this._constant.cloneTo(C$M._constant),this._gradientX.cloneTo(C$M._gradientX),this._gradientY.cloneTo(C$M._gradientY),this._gradientZ.cloneTo(C$M._gradientZ),this._constantMin.cloneTo(C$M._constantMin),this._constantMax.cloneTo(C$M._constantMax),this._gradientXMin.cloneTo(C$M._gradientXMin),this._gradientXMax.cloneTo(C$M._gradientXMax),this._gradientYMin.cloneTo(C$M._gradientYMin),this._gradientYMax.cloneTo(C$M._gradientYMax),this._gradientZMin.cloneTo(C$M._gradientZMin),this._gradientZMax.cloneTo(C$M._gradientZMax)},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"gradientZ",function(){return this._gradientZ}),C$q(0,C$s,"constant",function(){return this._constant}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"gradientXMax",function(){return this._gradientXMax}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"gradientX",function(){return this._gradientX}),C$q(0,C$s,"gradientY",function(){return this._gradientY}),C$q(0,C$s,"gradientXMin",function(){return this._gradientXMin}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$q(0,C$s,"gradientYMin",function(){return this._gradientYMin}),C$q(0,C$s,"gradientYMax",function(){return this._gradientYMax}),C$q(0,C$s,"gradientZMin",function(){return this._gradientZMin}),C$q(0,C$s,"gradientZMax",function(){return this._gradientZMax}),C$u.createByConstant=function(C$s){var C$M=new C$u;return C$M._type=0,C$M._constant=C$s,C$M},C$u.createByGradient=function(C$s,C$M,C$T){var C$X=new C$u;return C$X._type=1,C$X._gradientX=C$s,C$X._gradientY=C$M,C$X._gradientZ=C$T,C$X},C$u.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$u;return C$T._type=2,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$u.createByRandomTwoGradient=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=new C$u;return C$l._type=3,C$l._gradientXMin=C$s,C$l._gradientXMax=C$M,C$l._gradientYMin=C$T,C$l._gradientYMax=C$X,C$l._gradientZMin=C$x,C$l._gradientZMax=C$c,C$l},C$u}(),C$e=(function(){function C$s(C$s){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=C$s}C$R(C$s,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.cloneTo=function(C$s){var C$M=C$s;this._angularVelocity.cloneTo(C$M._angularVelocity),C$M.enbale=this.enbale},C$M.clone=function(){var C$s;switch(this._angularVelocity.type){case 0:C$s=this._angularVelocity.separateAxes?C$m.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):C$m.createByConstant(this._angularVelocity.constant);break;case 1:C$s=this._angularVelocity.separateAxes?C$m.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):C$m.createByGradient(this._angularVelocity.gradient.clone());break;case 2:C$s=this._angularVelocity.separateAxes?C$m.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):C$m.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:C$s=this._angularVelocity.separateAxes?C$m.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):C$m.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var C$M=new this.constructor(C$s);return C$M.enbale=this.enbale,C$M},C$q(0,C$M,"angularVelocity",function(){return this._angularVelocity})}(),function(){function C$s(){this.enable=!1,this.randomDirection=!1}C$R(C$s,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M._getShapeBoundBox=function(C$s){throw new Error("BaseShape: must override it.")},C$M._getSpeedBoundBox=function(C$s){throw new Error("BaseShape: must override it.")},C$M.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){throw new Error("BaseShape: must override it.")},C$M._calculateProceduralBounds=function(C$s,C$M,C$T){this._getShapeBoundBox(C$s);var C$X=C$s.min,C$x=C$s.max;C$lM.multiply(C$X,C$M,C$X),C$lM.multiply(C$x,C$M,C$x);var C$c=new C$as(new C$lM,new C$lM);this.randomDirection?(C$c.min=new C$lM(-1,-1,-1),C$c.max=new C$lM(1,1,1)):this._getSpeedBoundBox(C$c);var C$l=new C$as(new C$lM,new C$lM),C$u=C$l.min,C$E=C$l.max;C$lM.scale(C$c.min,C$T.y,C$u),C$lM.scale(C$c.max,C$T.y,C$E),C$lM.add(C$s.min,C$u,C$u),C$lM.add(C$s.max,C$E,C$E),C$lM.min(C$s.min,C$u,C$s.min),C$lM.max(C$s.max,C$u,C$s.max);var C$O=new C$as(new C$lM,new C$lM),C$U=C$O.min,C$p=C$O.max;C$lM.scale(C$c.min,C$T.x,C$U),C$lM.scale(C$c.max,C$T.x,C$p),C$lM.min(C$O.min,C$p,C$u),C$lM.max(C$O.min,C$p,C$E),C$lM.min(C$s.min,C$u,C$s.min),C$lM.max(C$s.max,C$u,C$s.max)},C$M.cloneTo=function(C$s){C$s.enable=this.enable},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$s}()),C$K=function(){function C$c(){}return C$R(C$c,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),C$c._randomPointUnitArcCircle=function(C$s,C$M,C$T){var C$X=C$M.elements,C$x=NaN;C$x=C$T?C$T.getFloat()*C$s:Math.random()*C$s,C$X[0]=Math.cos(C$x),C$X[1]=Math.sin(C$x)},C$c._randomPointInsideUnitArcCircle=function(C$s,C$M,C$T){var C$X=C$M.elements;C$c._randomPointUnitArcCircle(C$s,C$M,C$T);var C$x=NaN;C$x=C$T?Math.pow(C$T.getFloat(),.5):Math.pow(Math.random(),.5),C$X[0]=C$X[0]*C$x,C$X[1]=C$X[1]*C$x},C$c._randomPointUnitCircle=function(C$s,C$M){var C$T=C$s.elements,C$X=NaN;C$X=C$M?C$M.getFloat()*Math.PI*2:Math.random()*Math.PI*2,C$T[0]=Math.cos(C$X),C$T[1]=Math.sin(C$X)},C$c._randomPointInsideUnitCircle=function(C$s,C$M){var C$T=C$s.elements;C$c._randomPointUnitCircle(C$s);var C$X=NaN;C$X=C$M?Math.pow(C$M.getFloat(),.5):Math.pow(Math.random(),.5),C$T[0]=C$T[0]*C$X,C$T[1]=C$T[1]*C$X},C$c._randomPointUnitSphere=function(C$s,C$M){var C$T=C$s.elements,C$X=NaN,C$x=NaN;C$x=C$M?(C$X=C$T[2]=2*C$M.getFloat()-1,C$M.getFloat()*Math.PI*2):(C$X=C$T[2]=2*Math.random()-1,Math.random()*Math.PI*2);var C$c=Math.sqrt(1-C$X*C$X);C$T[0]=C$c*Math.cos(C$x),C$T[1]=C$c*Math.sin(C$x)},C$c._randomPointInsideUnitSphere=function(C$s,C$M){var C$T=C$s.elements;C$c._randomPointUnitSphere(C$s);var C$X=NaN;C$X=C$M?Math.pow(C$M.getFloat(),1/3):Math.pow(Math.random(),1/3),C$T[0]=C$T[0]*C$X,C$T[1]=C$T[1]*C$X,C$T[2]=C$T[2]*C$X},C$c._randomPointInsideHalfUnitBox=function(C$s,C$M){var C$T=C$s.elements;C$M?(C$T[0]=C$M.getFloat()-.5,C$T[1]=C$M.getFloat()-.5,C$T[2]=C$M.getFloat()-.5):(C$T[0]=Math.random()-.5,C$T[1]=Math.random()-.5,C$T[2]=Math.random()-.5)},C$c}(),C$Z=(function(){function C$s(C$s){this._size=null,this.enbale=!1,this._size=C$s}C$R(C$s,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.cloneTo=function(C$s){var C$M=C$s;this._size.cloneTo(C$M._size),C$M.enbale=this.enbale},C$M.clone=function(){var C$s;switch(this._size.type){case 0:C$s=this._size.separateAxes?C$I.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):C$I.createByGradient(this._size.gradient.clone());break;case 1:C$s=this._size.separateAxes?C$I.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):C$I.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:C$s=this._size.separateAxes?C$I.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):C$I.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var C$M=new this.constructor(C$s);return C$M.enbale=this.enbale,C$M},C$q(0,C$M,"size",function(){return this._size})}(),function(){function C$X(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}C$R(C$X,"laya.d3.core.particleShuriKen.module.StartFrame");var C$s=C$X.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.cloneTo=function(C$s){var C$M=C$s;C$M._type=this._type,C$M._constant=this._constant,C$M._constantMin=this._constantMin,C$M._constantMax=this._constantMax},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$s,"constant",function(){return this._constant}),C$q(0,C$s,"type",function(){return this._type}),C$q(0,C$s,"constantMin",function(){return this._constantMin}),C$q(0,C$s,"constantMax",function(){return this._constantMax}),C$X.createByConstant=function(C$s){var C$M=new C$X;return C$M._type=0,C$M._constant=C$s,C$M},C$X.createByRandomTwoConstant=function(C$s,C$M){var C$T=new C$X;return C$T._type=1,C$T._constantMin=C$s,C$T._constantMax=C$M,C$T},C$X}()),C$n=(function(){function C$s(C$s,C$M){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new C$cM(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=C$s,this._startFrame=C$M}C$R(C$s,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.cloneTo=function(C$s){var C$M=C$s;this.tiles.cloneTo(C$M.tiles),C$M.type=this.type,C$M.randomRow=this.randomRow,this._frame.cloneTo(C$M._frame),this._startFrame.cloneTo(C$M._startFrame),C$M.cycles=this.cycles,C$M.enableUVChannels=this.enableUVChannels,C$M.enable=this.enable},C$M.clone=function(){var C$s,C$M;switch(this._frame.type){case 0:C$s=C$C.createByConstant(this._frame.constant);break;case 1:C$s=C$C.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:C$s=C$C.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:C$s=C$C.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:C$M=C$Z.createByConstant(this._startFrame.constant);break;case 1:C$M=C$Z.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var C$T=new this.constructor(C$s,C$M);return this.tiles.cloneTo(C$T.tiles),C$T.type=this.type,C$T.randomRow=this.randomRow,C$T.cycles=this.cycles,C$T.enableUVChannels=this.enableUVChannels,C$T.enable=this.enable,C$T},C$q(0,C$M,"frame",function(){return this._frame}),C$q(0,C$M,"startFrame",function(){return this._startFrame})}(),function(){function C$s(C$s){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=C$s}C$R(C$s,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.cloneTo=function(C$s){var C$M=C$s;this._velocity.cloneTo(C$M._velocity),C$M.enbale=this.enbale,C$M.space=this.space},C$M.clone=function(){var C$s;switch(this._velocity.type){case 0:C$s=C$y.createByConstant(this._velocity.constant.clone());break;case 1:C$s=C$y.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:C$s=C$y.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:C$s=C$y.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var C$M=new this.constructor(C$s);return C$M.enbale=this.enbale,C$M.space=this.space,C$M},C$q(0,C$M,"velocity",function(){return this._velocity})}(),function(){function C$s(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new C$_M,this._vb=C$eM.create(C$s._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=C$yM.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=C$YM.nameKey.getID("LINE"),this._shaderCompile=C$kM._preCompileShader[this._sharderNameID]}C$R(C$s,"laya.d3.core.PhasorSpriter3D");var C$M=C$s.prototype;return C$M.line=function(C$s,C$M,C$T,C$X){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(C$s.x,C$s.y,C$s.z,C$M.x,C$M.y,C$M.z,C$M.w),this.addVertex(C$T.x,C$T.y,C$T.z,C$X.x,C$X.y,C$X.z,C$X.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},C$M.circle=function(C$s,C$M,C$T,C$X,C$x,C$c){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*C$M,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/C$M,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*C$s,Math.cos(this._tempNumver0)*C$s,0,C$T,C$X,C$x,C$c),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},C$M.plane=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=C$X/2,this._tempNumver1=C$x/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(C$s-this._tempNumver0,C$M+this._tempNumver1,C$T,C$c,C$l,C$u,C$E),this.addVertex(C$s+this._tempNumver0,C$M+this._tempNumver1,C$T,C$c,C$l,C$u,C$E),this.addVertex(C$s-this._tempNumver0,C$M-this._tempNumver1,C$T,C$c,C$l,C$u,C$E),this.addVertex(C$s+this._tempNumver0,C$M-this._tempNumver1,C$T,C$c,C$l,C$u,C$E),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},C$M.box=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=C$X/2,this._tempNumver1=C$x/2,this._tempNumver2=C$c/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(C$s-this._tempNumver0,C$M+this._tempNumver1,C$T+this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s+this._tempNumver0,C$M+this._tempNumver1,C$T+this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s-this._tempNumver0,C$M-this._tempNumver1,C$T+this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s+this._tempNumver0,C$M-this._tempNumver1,C$T+this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s+this._tempNumver0,C$M+this._tempNumver1,C$T-this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s-this._tempNumver0,C$M+this._tempNumver1,C$T-this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s+this._tempNumver0,C$M-this._tempNumver1,C$T-this._tempNumver2,C$l,C$u,C$E,C$O),this.addVertex(C$s-this._tempNumver0,C$M-this._tempNumver1,C$T-this._tempNumver2,C$l,C$u,C$E,C$O),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},C$M.cone=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*C$T+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*C$T>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/C$T,this.addVertexIndex(0,C$M,0,C$X,C$x,C$c,C$l,this._tempUint0),this.addVertexIndex(0,0,0,C$X,C$x,C$c,C$l,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<C$T;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(C$s*this._tempNumver2,0,C$s*this._tempNumver3,C$X,C$x,C$c,C$l,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==C$T-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(C$s*this._tempNumver2,0,C$s*this._tempNumver3,C$X,C$x,C$c,C$l,this._tempUint0+(this._tempInt0+C$T)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==C$T-1?this.addIndexes(this._tempUint1+C$T+2):this.addIndexes(this._tempUint1+this._tempInt0+C$T+1),this.addIndexes(this._tempUint1+this._tempInt0+C$T),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},C$M.boundingBoxLine=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(C$s,C$x,C$c,C$l,C$u,C$E,C$O),this.addVertex(C$X,C$x,C$c,C$l,C$u,C$E,C$O),this.addVertex(C$s,C$M,C$c,C$l,C$u,C$E,C$O),this.addVertex(C$X,C$M,C$c,C$l,C$u,C$E,C$O),this.addVertex(C$X,C$x,C$T,C$l,C$u,C$E,C$O),this.addVertex(C$s,C$x,C$T,C$l,C$u,C$E,C$O),this.addVertex(C$X,C$M,C$T,C$l,C$u,C$E,C$O),this.addVertex(C$s,C$M,C$T,C$l,C$u,C$E,C$O),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},C$M.addVertex=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=C$s,this._vbData[this._posInVBData+1]=C$M,this._vbData[this._posInVBData+2]=C$T,this._vbData[this._posInVBData+3]=C$X,this._vbData[this._posInVBData+4]=C$x,this._vbData[this._posInVBData+5]=C$c,this._vbData[this._posInVBData+6]=C$l,this._posInVBData+=this._floatSizePerVer,this},C$M.addVertexIndex=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){return this._hasBegun||this.addVertexIndexException(),this._vbData[C$u]=C$s,this._vbData[C$u+1]=C$M,this._vbData[C$u+2]=C$T,this._vbData[C$u+3]=C$X,this._vbData[C$u+4]=C$x,this._vbData[C$u+5]=C$c,this._vbData[C$u+6]=C$l,(C$u+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=C$u),this},C$M.addIndexes=function(C$s){var C$M=arguments;this._hasBegun||this.addVertexIndexException();for(var C$T=0;C$T<C$M.length;C$T++)this._ibData[this._posInIBData]=C$M[C$T],this._posInIBData++;return this},C$M.begin=function(C$s,C$M){return this._hasBegun&&this.beginException0(),1!==C$s&&4!==C$s&&this.beginException1(),this._primitiveType=C$s,this._camera=C$M,this._hasBegun=!0,this},C$M.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},C$M.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(C$s._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),C$k.drawCall++,C$v.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},C$M.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},C$M.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},C$M.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},C$M.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},C$M.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},C$M.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(28,[new C$ls(0,"vector3",0),new C$ls(12,"vector4",1)])}]),C$s}()),C$$=function(){function C$s(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++C$s._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new C$_M}C$R(C$s,"laya.d3.core.render.RenderElement");var C$M=C$s.prototype;return C$M.getDynamicBatchBakedVertexs=function(C$s){for(var C$M=this._renderObj._getVertexBuffer(C$s),C$T=C$M.getData().slice(),C$X=C$M.vertexDeclaration,C$x=C$X.getVertexElementByUsage(0).offset/4,C$c=C$X.getVertexElementByUsage(3).offset/4,C$l=this._sprite3D.transform,C$u=C$l.worldMatrix,C$E=C$l.rotation,C$O=C$X.vertexStride/4,C$U=0,C$p=C$T.length;C$U<C$p;C$U+=C$O){var C$_=C$U+C$x,C$R=C$U+C$c;C$gM.transformVector3ArrayToVector3ArrayCoordinate(C$T,C$_,C$u,C$T,C$_),C$gM.transformVector3ArrayByQuat(C$T,C$R,C$E,C$T,C$R)}return C$T},C$M.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},C$M._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},C$q(0,C$M,"id",function(){return this._id}),C$q(0,C$M,"renderObj",function(){return this._renderObj},function(C$s){this._renderObj!==C$s&&(this._renderObj=C$s)}),C$s._uniqueIDCounter=0,C$s}(),C$F=function(){function C$M(C$s){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++C$M._uniqueIDCounter,this._needSort=!1,this._scene=C$s,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}C$R(C$M,"laya.d3.core.render.RenderQueue");var C$s=C$M.prototype;return C$s._sortOpaqueFunc=function(C$s,C$M){if(C$s._render&&C$M._render){var C$T=C$s._material.renderQueue-C$M._material.renderQueue;return 0==C$T?C$s._render._distanceForSort-C$M._render._distanceForSort:C$T}return 0},C$s._sortAlphaFunc=function(C$s,C$M){if(C$s._render&&C$M._render){var C$T=C$s._material.renderQueue-C$M._material.renderQueue;return 0==C$T?C$M._render._distanceForSort-C$s._render._distanceForSort:C$T}return 0},C$s._begainRenderElement=function(C$s,C$M,C$T){return!!C$M._beforeRender(C$s)},C$s._sortAlpha=function(C$s){C$M._cameraPosition=C$s,this._finalElements.sort(this._sortAlphaFunc)},C$s._sortOpaque=function(C$s){C$M._cameraPosition=C$s,this._finalElements.sort(this._sortOpaqueFunc)},C$s._preRender=function(C$s){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},C$s._render=function(C$s,C$M){for(var C$T,C$X,C$x,C$c,C$l,C$u,C$E=C$k.loopCount,C$O=this._scene,C$U=C$s.camera,C$p=(C$U.id,!1),C$_=0,C$R=this._finalElements.length;C$_<C$R;C$_++){var C$q,C$G,C$g,C$f=this._finalElements[C$_];if(null!=C$f._onPreRenderFunction&&C$f._onPreRenderFunction.call(C$f._sprite3D,C$s),0===C$f._type){if(C$s.owner=C$g=C$f._sprite3D,C$s.renderElement=C$f,C$g._preRenderUpdateComponents(C$s),C$q=C$f.renderObj,C$G=C$f._material,this._begainRenderElement(C$s,C$q,C$G)){if(C$T=C$q._getVertexBuffers(),!(C$x=(C$X=C$q._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[C$X.id]){this._errorRecord[C$X.id]=1;var C$J="vertexBuffer:"+("("+C$X._destroyed+","+C$X._released+","+C$X._referenceCount+","+C$X._buffer+")")+", material:"+(C$G?C$G.__className+"("+C$G._destroyed+","+C$G._released+")":"null")+", owner:"+(C$g?C$g.__className+"("+C$g._destroyed+","+C$g._activeInHierarchy+","+C$g._displayedInStage+")":"null")+", renderObj:"+(C$q?C$q.__className+"("+C$q._destroyed+","+C$q._released+","+C$q._referenceCount+")":"")+", parent:, url:"+(C$g?C$g.url:"")+", disposeStack:"+C$X.disposeStack;C$r.recordError("报错：unknown vertexDeclaration  "+C$J)}continue}if(C$p=(C$c=C$s._shader=C$G._getShader(C$O._shaderDefineValue,C$x.shaderDefineValue,C$g._shaderDefineValue)).bind()||C$E!==C$c._uploadLoopCount,C$T){if(C$c._uploadVertexBuffer!==C$T||C$p){for(var C$P=0;C$P<C$T.length;C$P++){var C$t=C$T[C$P];C$c.uploadAttributesX(C$t.vertexDeclaration.shaderValues.data,C$t)}C$c._uploadVertexBuffer=C$T}}else(C$c._uploadVertexBuffer!==C$X||C$p)&&(C$c.uploadAttributes(C$x.shaderValues.data,null),C$c._uploadVertexBuffer=C$X);(C$c._uploadScene!==C$O||C$p)&&(C$c.uploadSceneUniforms(C$O._shaderValues.data),C$c._uploadScene=C$O),(C$U!==C$c._uploadCamera||C$c._uploadSprite3D!==C$g||C$p)&&(C$c.uploadSpriteUniforms(C$g._shaderValues.data),C$c._uploadSprite3D=C$g),(C$U!==C$c._uploadCamera||C$p)&&(C$c.uploadCameraUniforms(C$U._shaderValues.data),C$c._uploadCamera=C$U),(C$c._uploadMaterial!==C$G||C$p)&&(C$G._upload(),C$c._uploadMaterial=C$G),C$l!==C$G?(C$G._setRenderStateBlendDepth(),C$G._setRenderStateFrontFace(C$M,C$g.transform),C$l=C$G,C$u=C$g):C$u!==C$g&&(C$G._setRenderStateFrontFace(C$M,C$g.transform),C$u=C$g),C$q._render(C$s),C$c._uploadLoopCount=C$E}C$g._postRenderUpdateComponents(C$s)}else if(2===C$f._type){C$f.renderObj;C$s.owner=C$g=C$f._sprite3D,C$s.renderElement=C$f,C$s._batchIndexStart=C$f._tempBatchIndexStart,C$s._batchIndexEnd=C$f._tempBatchIndexEnd,C$q=C$f.renderObj,C$G=C$f._material,this._begainRenderElement(C$s,C$q,C$G)&&(C$x=(C$X=C$q._getVertexBuffer(0)).vertexDeclaration,C$p=(C$c=C$s._shader=C$G._getShader(C$O._shaderDefineValue,C$x.shaderDefineValue,C$g._shaderDefineValue)).bind()||C$E!==C$c._uploadLoopCount,(C$c._uploadVertexBuffer!==C$X||C$p)&&(C$c.uploadAttributes(C$x.shaderValues.data,null),C$c._uploadVertexBuffer=C$X),(C$c._uploadScene!==C$O||C$p)&&(C$c.uploadSceneUniforms(C$O._shaderValues.data),C$c._uploadScene=C$O),(C$U!==C$c._uploadCamera||C$c._uploadSprite3D!==C$g||C$p)&&(C$c.uploadSpriteUniforms(C$g._shaderValues.data),C$c._uploadSprite3D=C$g),(C$U!==C$c._uploadCamera||C$p)&&(C$c.uploadCameraUniforms(C$U._shaderValues.data),C$c._uploadCamera=C$U),(C$c._uploadMaterial!==C$G||C$p)&&(C$G._upload(),C$c._uploadMaterial=C$G),C$l!==C$G?(C$G._setRenderStateBlendDepth(),C$G._setRenderStateFrontFace(C$M,C$g.transform),C$l=C$G,C$u=C$g):C$u!==C$g&&(C$G._setRenderStateFrontFace(C$M,C$g.transform),C$u=C$g),C$q._render(C$s),C$c._uploadLoopCount=C$E)}}},C$s._renderShadow=function(C$s,C$M){for(var C$T,C$X,C$x,C$c,C$l,C$u=C$k.loopCount,C$E=this._scene,C$O=C$s.camera,C$U=!1,C$p=0,C$_=this._finalElements.length;C$p<C$_;C$p++){var C$R,C$q,C$G,C$g=this._finalElements[C$p];0===C$g._type&&(C$s.owner=C$G=C$g._sprite3D,C$M||C$G._projectionViewWorldUpdateCamera===C$O&&C$G._projectionViewWorldUpdateLoopCount===C$k.loopCount||(C$G._render._renderUpdate(C$s._projectionViewMatrix),C$G._projectionViewWorldUpdateLoopCount=C$k.loopCount,C$G._projectionViewWorldUpdateCamera=C$O),C$s.renderElement=C$g,C$G._preRenderUpdateComponents(C$s),C$R=C$g.renderObj,C$q=C$g._material,this._begainRenderElement(C$s,C$R,null)&&(C$X=(C$T=C$R._getVertexBuffer(0)).vertexDeclaration,C$U=(C$x=C$s._shader=C$q._getShader(C$E._shaderDefineValue,C$X.shaderDefineValue,C$G._shaderDefineValue)).bind()||C$u!==C$x._uploadLoopCount,(C$x._uploadVertexBuffer!==C$T||C$U)&&(C$x.uploadAttributes(C$X.shaderValues.data,null),C$x._uploadVertexBuffer=C$T),(C$O!==C$x._uploadCamera||C$x._uploadSprite3D!==C$G||C$U)&&(C$x.uploadSpriteUniforms(C$G._shaderValues.data),C$x._uploadSprite3D=C$G),(C$O!==C$x._uploadCamera||C$U)&&(C$x.uploadCameraUniforms(C$O._shaderValues.data),C$x._uploadCamera=C$O),(C$x._uploadMaterial!==C$q||C$U)&&(C$q._upload(),C$x._uploadMaterial=C$q),C$x._uploadRenderElement,C$c!==C$q?(C$q._setRenderStateFrontFace(!1,C$G.transform),C$c=C$q,C$l=C$G):C$l!==C$G&&(C$q._setRenderStateFrontFace(!1,C$G.transform),C$l=C$G),C$R._render(C$s),C$x._uploadLoopCount=C$u),C$G._postRenderUpdateComponents(C$s))}},C$s._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},C$s._addRenderElement=function(C$s){this._renderElements.push(C$s),this._needSort=!0},C$s._addDynamicBatchElement=function(C$s){this._dynamicBatchCombineRenderElements.push(C$s)},C$q(0,C$s,"id",function(){return this._id}),C$M._uniqueIDCounter=0,C$M._cameraPosition=null,C$M}(),C$W=function(){function C$s(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return C$R(C$s,"laya.d3.core.render.RenderState"),C$s.clientWidth=0,C$s.clientHeight=0,C$s}(),C$a=function(){function C$l(C$s,C$M){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new C$is(new C$lM,0),this._corners=[new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM],this._boundingBoxCenter=new C$lM,this._children=C$X(8),this._objects=[],this._tempBoundBoxCorners=[new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM],this._scene=C$s,this._currentDepth=C$M}C$R(C$l,"laya.d3.core.scene.OctreeNode");var C$s=C$l.prototype;return C$r.imps(C$s,{"laya.d3.core.scene.ITreeNode":!0}),C$s.init=function(C$s,C$M){var C$T=new C$lM,C$X=new C$lM;C$lM.scale(C$M,-.5,C$T),C$lM.scale(C$M,.5,C$X),C$lM.add(C$T,C$s,C$T),C$lM.add(C$X,C$s,C$X),this.exactBox=new C$as(C$T,C$X),this.relaxBox=new C$as(C$T,C$X)},C$s.addTreeNode=function(C$s){1===Collision.boxContainsBox(this._relaxBox,C$s.boundingBox)?this.addNodeDown(C$s,0):this.addObject(C$s)},C$s.addChild=function(C$s){var C$M=this._children[C$s];if(null==C$M){C$M=new C$l(this._scene,this._currentDepth+1),(this._children[C$s]=C$M)._parent=this,C$lM.subtract(this._exactBox.max,this._exactBox.min,C$l.tempSize),C$lM.multiply(C$l.tempSize,C$l._octreeSplit[C$s],C$l.tempCenter),C$lM.add(this._exactBox.min,C$l.tempCenter,C$l.tempCenter),C$lM.scale(C$l.tempSize,.25,C$l.tempSize);var C$T=new C$lM,C$X=new C$lM;C$lM.subtract(C$l.tempCenter,C$l.tempSize,C$T),C$lM.add(C$l.tempCenter,C$l.tempSize,C$X),C$M.exactBox=new C$as(C$T,C$X),C$lM.scale(C$l.tempSize,C$l.relax,C$l.tempSize);var C$x=new C$lM,C$c=new C$lM;C$lM.subtract(C$l.tempCenter,C$l.tempSize,C$x),C$lM.add(C$l.tempCenter,C$l.tempSize,C$c),C$M.relaxBox=new C$as(C$x,C$c)}return C$M},C$s.addObject=function(C$s){(C$s._treeNode=this)._objects.push(C$s)},C$s.removeObject=function(C$s){if(C$s._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var C$M=this._objects.indexOf(C$s);return-1!==C$M&&(this._objects.splice(C$M,1),!0)},C$s.clearObject=function(){this._objects.length=0},C$s.addNodeUp=function(C$s,C$M){this._parent&&1!==Collision.boxContainsBox(this._exactBox,C$s.boundingBox)?this._parent.addNodeUp(C$s,C$M-1):this.addNodeDown(C$s,C$M)},C$s.addNodeDown=function(C$s,C$M){if(C$M<this._scene.treeLevel){var C$T=this.inChildIndex(C$s.boundingBoxCenter),C$X=this.addChild(C$T);1===Collision.boxContainsBox(C$X._relaxBox,C$s.boundingBox)?C$X.addNodeDown(C$s,++C$M):this.addObject(C$s)}else this.addObject(C$s)},C$s.inChildIndex=function(C$s){return 4*(C$s.z<this._boundingBoxCenter.z?0:1)+2*(C$s.y<this._boundingBoxCenter.y?0:1)+(C$s.x<this._boundingBoxCenter.x?0:1)},C$s.updateObject=function(C$s){1===Collision.boxContainsBox(this._relaxBox,C$s.boundingBox)?(this.removeObject(C$s),C$s._treeNode=null,this.addNodeDown(C$s,this._currentDepth)):this._parent&&(this.removeObject(C$s),C$s._treeNode=null,this._parent.addNodeUp(C$s,this._currentDepth-1))},C$s.cullingObjects=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l=0,C$u=0,C$E=0,C$O=this._scene._dynamicBatchManager;for(C$l=0,C$c=this._objects.length;C$l<C$c;C$l++){var C$U=this._objects[C$l];if(C$o.isVisible(C$U._owner.layer.mask)&&C$U.enable){if(C$M&&(C$k.treeSpriteCollision+=1,0===C$s.containsBoundSphere(C$U.boundingSphere)))continue;C$U._renderUpdate(C$x),C$U._distanceForSort=C$lM.distance(C$U.boundingSphere.center,C$X)+C$U.sortingFudge;var C$p=C$U._renderElements;for(C$u=0,C$E=C$p.length;C$u<C$E;C$u++){var C$_=C$p[C$u],C$R=C$_._staticBatch;if(C$R&&C$R._material===C$_._material)C$R._addBatchRenderElement(C$_);else{var C$q=C$_.renderObj;C$q.triangleCount<10&&1===C$q._vertexBufferCount&&C$q._getIndexBuffer()&&C$_._material.renderQueue<2&&C$_._canDynamicBatch&&!C$U._owner.isStatic?C$O._addPrepareRenderElement(C$_):this._scene.getRenderQueue(C$_._material.renderQueue)._addRenderElement(C$_)}}}}for(C$l=0;C$l<8;C$l++){var C$G=this._children[C$l];if(null!=C$G){var C$g=C$M;if(C$M){var C$f=C$s.containsBoundBox(C$G._relaxBox);if(C$k.treeNodeCollision+=1,0===C$f)continue;C$g=2===C$f}C$G.cullingObjects(C$s,C$g,C$T,C$X,C$x)}}},C$s.cullingShadowObjects=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l=0,C$u=0,C$E=0;this._scene._dynamicBatchManager;for(C$l=0,C$c=this._objects.length;C$l<C$c;C$l++){var C$O=this._objects[C$l];if(C$O.castShadow&&C$o.isVisible(C$O._owner.layer.mask)&&C$O.enable){if(C$T&&0===C$s[0].containsBoundSphere(C$O.boundingSphere))continue;for(var C$U=1,C$p=C$s.length;C$U<C$p;C$U++){var C$_=C$M[C$U-1];if(0!==C$s[C$U].containsBoundSphere(C$O.boundingSphere)){var C$R=C$O._renderElements;for(C$u=0,C$E=C$R.length;C$u<C$E;C$u++)C$_._addRenderElement(C$R[C$u])}}}}for(C$l=0;C$l<8;C$l++){var C$q=this._children[C$l];if(null!=C$q){var C$G=C$T;if(C$T){var C$g=C$s[0].containsBoundBox(C$q._relaxBox);if(0===C$g)continue;C$G=2===C$g}C$q.cullingShadowObjects(C$s,C$M,C$G,C$X,C$x)}}},C$s.cullingShadowObjectsOnePSSM=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u=C$M[0],C$E=0,C$O=0,C$U=0;for(C$E=0,C$l=this._objects.length;C$E<C$l;C$E++){var C$p=this._objects[C$E];if(C$p.castShadow&&C$o.isVisible(C$p._owner.layer.mask)&&C$p.enable){if(C$X&&0===C$s.containsBoundSphere(C$p.boundingSphere))continue;C$p._renderUpdate(C$T);var C$_=C$p._renderElements;for(C$O=0,C$U=C$_.length;C$O<C$U;C$O++)C$u._addRenderElement(C$_[C$O])}}for(C$E=0;C$E<8;C$E++){var C$R=this._children[C$E];if(null!=C$R){var C$q=C$X;if(C$X){var C$G=C$s.containsBoundBox(C$R._relaxBox);if(0===C$G)continue;C$q=2===C$G}C$R.cullingShadowObjectsOnePSSM(C$s,C$M,C$T,C$q,C$x,C$c)}}},C$s.renderBoudingBox=function(C$s){this._renderBoudingBox(C$s);for(var C$M=0;C$M<8;++C$M){var C$T=this._children[C$M];C$T&&C$T.renderBoudingBox(C$s)}},C$s.buildAllChild=function(C$s){if(C$s<this._scene.treeLevel)for(var C$M=0;C$M<8;C$M++){this.addChild(C$M).buildAllChild(C$s+1)}},C$s._renderBoudingBox=function(C$s){},C$q(0,C$s,"exactBox",function(){return this._exactBox},function(C$s){this._exactBox=C$s,C$lM.add(C$s.min,C$s.max,this._boundingBoxCenter),C$lM.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),C$q(0,C$s,"relaxBox",function(){return this._relaxBox},function(C$s){(this._relaxBox=C$s).getCorners(this._corners),C$is.createfromPoints(this._corners,this._boundingSphere)}),C$l.debugMode=!1,C$l.relax=1.15,C$l.CHILDNUM=8,C$p(C$l,["tempVector0",function(){return this.tempVector0=new C$lM},"tempSize",function(){return this.tempSize=new C$lM},"tempCenter",function(){return this.tempCenter=new C$lM},"_octreeSplit",function(){return this._octreeSplit=[new C$lM(.25,.25,.25),new C$lM(.75,.25,.25),new C$lM(.25,.75,.25),new C$lM(.75,.75,.25),new C$lM(.25,.25,.75),new C$lM(.75,.25,.75),new C$lM(.25,.75,.75),new C$lM(.75,.75,.75)]}]),C$l}(),C$j=(function(){function C$s(){}C$R(C$s,"laya.d3.core.scene.SceneManager")}(),function(){function C$s(C$s,C$M,C$T,C$X){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===C$s&&(C$s=1),void 0===C$M&&(C$M=1),void 0===C$T&&(C$T=1),void 0===C$X&&(C$X=1),this._r=C$s,this._g=C$M,this._b=C$T,this._a=C$X}return C$R(C$s,"laya.d3.core.trail.module.Color",null,"Color$1"),C$s.prototype.cloneTo=function(C$s){C$s._r=this._r,C$s._g=this._g,C$s._b=this._b,C$s._a=this._a},C$p(C$s,["RED",function(){return this.RED=new C$s(1,0,0,1)},"GREEN",function(){return this.GREEN=new C$s(0,1,0,1)},"BLUE",function(){return this.BLUE=new C$s(0,0,1,1)},"CYAN",function(){return this.CYAN=new C$s(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new C$s(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new C$s(1,0,1,1)},"GRAY",function(){return this.GRAY=new C$s(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new C$s(1,1,1,1)},"BLACK",function(){return this.BLACK=new C$s(0,0,0,1)}]),C$s}()),C$i=(function(){function C$s(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}C$R(C$s,"laya.d3.core.trail.module.Gradient");var C$M=C$s.prototype;C$M.setKeys=function(C$s,C$M){var C$T,C$X;this._colorKeys=C$s;for(var C$x=this.index=0;C$x<C$s.length;C$x++){var C$c=(C$T=C$s[C$x]).color;this._colorKeyData[this.index++]=C$c._r,this._colorKeyData[this.index++]=C$c._g,this._colorKeyData[this.index++]=C$c._b,this._colorKeyData[this.index++]=C$T.time}this._alphaKeys=C$M;for(var C$l=this.index=0;C$l<C$M.length;C$l++)C$X=C$M[C$l],this._alphaKeyData[this.index++]=C$X.alpha,this._alphaKeyData[this.index++]=C$X.time},C$M.cloneTo=function(C$s){var C$M=0,C$T=0,C$X=this.colorKeys,C$x=[];for(C$M=0,C$T=C$X.length;C$M<C$T;C$M++){var C$c=new C$H;C$X[C$M].cloneTo(C$c),C$x.push(C$c)}var C$l=this.alphaKeys,C$u=[];for(C$M=0,C$T=C$l.length;C$M<C$T;C$M++){var C$E=new C$i;C$l[C$M].cloneTo(C$E),C$u.push(C$E)}C$s.setKeys(C$x,C$u)},C$q(0,C$M,"mode",function(){return this._mode},function(C$s){this._mode=C$s}),C$q(0,C$M,"colorKeys",function(){return this._colorKeys},function(C$s){this._colorKeys=C$s;for(var C$M=this.index=0;C$M<C$s.length;C$M++){var C$T=C$s[C$M],C$X=C$T.color;this._colorKeyData[this.index++]=C$X._r,this._colorKeyData[this.index++]=C$X._g,this._colorKeyData[this.index++]=C$X._b,this._colorKeyData[this.index++]=C$T.time}}),C$q(0,C$M,"alphaKeys",function(){return this._alphaKeys},function(C$s){this._alphaKeys=C$s;for(var C$M=this.index=0;C$M<C$s.length;C$M++){var C$T=C$s[C$M];this._alphaKeyData[this.index++]=C$T.alpha,this._alphaKeyData[this.index++]=C$T.time}})}(),function(){function C$s(C$s,C$M){this._alpha=NaN,this._time=NaN,void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),this._alpha=C$s,this._time=C$M}C$R(C$s,"laya.d3.core.trail.module.GradientAlphaKey");var C$M=C$s.prototype;return C$M.cloneTo=function(C$s){C$s.alpha=this.alpha,C$s.time=this.time},C$q(0,C$M,"alpha",function(){return this._alpha},function(C$s){this._alpha=C$s}),C$q(0,C$M,"time",function(){return this._time},function(C$s){this._time=C$s}),C$s}()),C$H=function(){function C$s(C$s,C$M){this._color=null,this._time=NaN,void 0===C$M&&(C$M=0),this._color=C$s||new C$j,this._time=C$M}C$R(C$s,"laya.d3.core.trail.module.GradientColorKey");var C$M=C$s.prototype;return C$M.cloneTo=function(C$s){this.color.cloneTo(C$s.color),C$s.time=this.time},C$q(0,C$M,"color",function(){return this._color},function(C$s){this._color=C$s}),C$q(0,C$M,"time",function(){return this._time},function(C$s){this._time=C$s}),C$s}(),C$d=(function(){function C$s(){}C$R(C$s,"laya.d3.core.trail.module.GradientMode"),C$s.Blend=0,C$s.Fixed=1}(),function(){function C$s(){}C$R(C$s,"laya.d3.core.trail.module.TextureMode"),C$s.Stretch=0,C$s.Tile=1}(),function(){function C$s(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}C$R(C$s,"laya.d3.core.trail.module.TrailKeyFrame"),C$s.prototype.cloneTo=function(C$s){C$s.time=this.time,C$s.inTangent=this.inTangent,C$s.outTangent=this.outTangent,C$s.value=this.value}}(),function(){function C$M(C$s){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new C$lM,this._curPosition=new C$lM,this._delVector3=new C$lM,this._lastFixedVertexPosition=new C$lM,this._pointAtoBVector3=new C$lM,this._pointA=new C$lM,this._pointB=new C$lM,this._owner=C$s,this._id=C$M.renderElementCount++,0==this._id?C$s._owner.transform.position.cloneTo(this._lastPosition):C$s._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new C$eM(C$d.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new C$eM(C$d.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}C$R(C$M,"laya.d3.core.trail.TrailRenderElement");var C$s=C$M.prototype;C$r.imps(C$s,{"laya.d3.core.render.IRenderable":!0}),C$s._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},C$s._addTrailByFirstPosition=function(C$s,C$M){C$lM.subtract(C$M,C$s,this._delVector3),C$lM.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),C$lM.normalize(this._pointAtoBVector3,this._pointAtoBVector3),C$lM.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(C$s),C$s.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},C$s._addTrailByNextPosition=function(C$s){C$lM.subtract(C$s,this._lastFixedVertexPosition,this._delVector3),C$lM.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),C$lM.normalize(this._pointAtoBVector3,this._pointAtoBVector3),C$lM.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=C$lM.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=C$Hs.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(C$s),C$s.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(C$s),this._virtualVerticesCount=2)},C$s._updateVerticesByPosition=function(C$s){this._pointe=C$s.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},C$s._updateVertexBuffer2=function(){var C$s,C$M=0,C$T=0,C$X=0;for(C$X=0,C$s=(this._verticesCount+this._virtualVerticesCount)/2;C$X<C$s;C$X++)C$T=0==this._owner.textureMode?(this._VerticesToTailLength[C$X]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[C$X],this._vertices2[C$M++]=1-C$T,this._vertices2[C$M++]=1-C$T;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},C$s._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},C$s._updateDisappear=function(){var C$s,C$M=0;for(C$M=this._curDisappearIndex,C$s=(this._verticesCount+this._virtualVerticesCount)/2;C$M<C$s;C$M++)this._owner._curtime-this._everyGroupVertexBirthTime[C$M]>=this._owner.time+C$Hs.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},C$s._beforeRender=function(C$s){return this._camera=C$s.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),C$lM.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},C$s._render=function(C$s){this._isDead||(C$v.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),C$k.drawCall++,C$k.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},C$s._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),0===C$s?this._vertexBuffer1:1===C$s?this._vertexBuffer2:null},C$s._getVertexBuffers=function(){return this._vertexBuffers},C$s._getIndexBuffer=function(){return null},C$s.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},C$s._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},C$q(0,C$s,"_vertexBufferCount",function(){return this._vertexBuffers.length}),C$q(0,C$s,"triangleCount",function(){return 0}),C$M.renderElementCount=0}(),function(){function C$s(){}C$R(C$s,"laya.d3.core.trail.VertexTrail");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration1}),C$q(1,C$s,"vertexDeclaration1",function(){return C$s._vertexDeclaration1}),C$q(1,C$s,"vertexDeclaration2",function(){return C$s._vertexDeclaration2}),C$p(C$s,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new C$cs(32,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",41),new C$ls(24,"single",33),new C$ls(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new C$cs(4,[new C$ls(0,"single",38)])}]),C$s}()),C$ss=function(){function C$t(C$s){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=C$s}C$R(C$t,"laya.d3.graphics.DynamicBatch");var C$s=C$t.prototype;return C$r.imps(C$s,{"laya.d3.core.render.IRenderable":!0}),C$s._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),0===C$s?this._vertexBuffer:null},C$s._getIndexBuffer=function(){return this._indexBuffer},C$s._getCombineRenderElementFromPool=function(C$s,C$M,C$T){var C$X=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return C$X||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=C$X=new C$$,C$X._sprite3D=new C$FM),C$X._sprite3D._render._renderUpdate(C$T),C$X},C$s._getRenderElement=function(C$s,C$M,C$T){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*C$t.maxVertexCount),this._indexDatas=new Uint16Array(C$t.maxIndexCount),this._vertexBuffer=C$eM.create(this._vertexDeclaration,C$t.maxVertexCount,35048),this._indexBuffer=C$yM.create("ushort",C$t.maxIndexCount,35048));for(var C$X=this._merageElements.length=0,C$x=0,C$c=0,C$l=this._combineRenderElements.length;C$c<C$l;C$c++){var C$u=this._combineRenderElements[C$c],C$E=C$u.getDynamicBatchBakedVertexs(0),C$O=C$u.getBakedIndices(),C$U=C$u._sprite3D.transform._isFrontFaceInvert,C$p=C$X/(this._vertexDeclaration.vertexStride/4),C$_=C$x,C$R=C$_+C$O.length;C$u._tempBatchIndexStart=C$_,C$u._tempBatchIndexEnd=C$R,this._indexDatas.set(C$O,C$x);var C$q=0;if(C$U)for(C$q=C$_;C$q<C$R;C$q+=3){this._indexDatas[C$q]=C$p+this._indexDatas[C$q];var C$G=this._indexDatas[C$q+1],C$g=this._indexDatas[C$q+2];this._indexDatas[C$q+1]=C$p+C$g,this._indexDatas[C$q+2]=C$p+C$G}else for(C$q=C$_;C$q<C$R;C$q+=3)this._indexDatas[C$q]=C$p+this._indexDatas[C$q],this._indexDatas[C$q+1]=C$p+this._indexDatas[C$q+1],this._indexDatas[C$q+2]=C$p+this._indexDatas[C$q+2];C$x+=C$O.length,this._vertexDatas.set(C$E,C$X),C$X+=C$E.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),C$c=this._combineRenderElementPoolIndex=0,C$l=this._materials.length;C$c<C$l;C$c++){var C$f=this._getCombineRenderElementFromPool(C$s,C$M,C$T);C$f._type=2,C$f._staticBatch=null;var C$J=(C$f.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[C$c]]._tempBatchIndexStart,C$P=C$c+1===this._materialToRenderElementsOffsets.length?C$x:this._combineRenderElements[this._materialToRenderElementsOffsets[C$c+1]]._tempBatchIndexStart;C$f._tempBatchIndexStart=C$J,C$f._tempBatchIndexEnd=C$P,C$f._material=this._materials[C$c],this._merageElements.push(C$f)}},C$s._addCombineRenderObjTest=function(C$s){var C$M=C$s.renderObj,C$T=this._currentCombineIndexCount+C$M._getIndexBuffer().indexCount,C$X=this._currentCombineVertexCount+C$M._getVertexBuffer().vertexCount;return!(C$t.maxVertexCount<C$X||C$t.maxIndexCount<C$T)},C$s._addCombineRenderObj=function(C$s){var C$M=C$s.renderObj;this._combineRenderElements.push(C$s),this._currentCombineIndexCount=this._currentCombineIndexCount+C$M._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+C$M._getVertexBuffer().vertexCount},C$s._addCombineMaterial=function(C$s){this._materials.push(C$s)},C$s._addMaterialToRenderElementOffset=function(C$s){this._materialToRenderElementsOffsets.push(C$s)},C$s._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},C$s._addToRenderQueue=function(C$s,C$M,C$T,C$X){this._getRenderElement(C$M,C$T,C$X);for(var C$x=0,C$c=this._materials.length;C$x<C$c;C$x++)C$s.getRenderQueue(this._materials[C$x].renderQueue)._addDynamicBatchElement(this._merageElements[C$x])},C$s._beforeRender=function(C$s){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},C$s._render=function(C$s){var C$M=C$s._batchIndexEnd-C$s._batchIndexStart;C$v.mainContext.drawElements(4,C$M,5123,2*C$s._batchIndexStart),C$k.drawCall++,C$k.trianglesFaces+=C$M/3},C$s._getVertexBuffers=function(){return null},C$q(0,C$s,"_vertexBufferCount",function(){return 1}),C$q(0,C$s,"triangleCount",function(){return this._indexBuffer.indexCount/3}),C$q(0,C$s,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),C$t.maxVertexCount=2e4,C$t.maxIndexCount=4e4,C$t.maxCombineTriangleCount=10,C$t}(),C$Ms=function(){function C$t(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}C$R(C$t,"laya.d3.graphics.DynamicBatchManager");var C$s=C$t.prototype;return C$s.getDynamicBatch=function(C$s,C$M){var C$T,C$X=C$s.id.toString()+C$M;return this._dynamicBatches[C$X]?C$T=this._dynamicBatches[C$X]:this._dynamicBatches[C$X]=C$T=new C$ss(C$s),C$T},C$s._garbageCollection=function(){for(var C$s in this._dynamicBatches)0===this._dynamicBatches[C$s].combineRenderElementsCount&&delete this._dynamicBatches[C$s]},C$s._addPrepareRenderElement=function(C$s){this._prepareDynamicBatchCombineElements.push(C$s)},C$s._finishCombineDynamicBatch=function(C$s){var C$M,C$T,C$X;this._prepareDynamicBatchCombineElements.sort(C$t._sortPrepareDynamicBatch);for(var C$x,C$c,C$l,C$u,C$E,C$O=-1,C$U=!0,C$p=0,C$_=-1,C$R=0,C$q=this._prepareDynamicBatchCombineElements.length;C$R<C$q;C$R++){var C$G=(C$c=this._prepareDynamicBatchCombineElements[C$R]).renderObj._getVertexBuffer(0).vertexDeclaration,C$g=C$T!==C$G;C$g&&(C$p=0,C$T=C$G);var C$f=C$p!==C$O;if(C$f&&(C$O=C$p),(C$g||C$f)&&(C$l=this.getDynamicBatch(C$G,C$p),C$M=null),C$U)if(C$l._addCombineRenderObjTest(C$c)){if(C$M!==(C$x=C$c._material))C$u&&(C$s.getRenderQueue(C$E._material.renderQueue)._addRenderElement(C$E),C$E=C$u=null,C$_=-1),C$u=C$x,C$_=C$l.combineRenderElementsCount,C$E=C$c,C$M=C$x;else if(C$u){var C$J=C$E.renderObj,C$P=C$c.renderObj;C$J._getVertexBuffer().vertexCount+C$P._getVertexBuffer().vertexCount>C$ss.maxVertexCount||C$J._getIndexBuffer().indexCount+C$P._getIndexBuffer().indexCount>C$ss.maxIndexCount?(C$s.getRenderQueue(C$E._material.renderQueue)._addRenderElement(C$E),C$u=C$x,C$_=C$l.combineRenderElementsCount,C$E=C$c):(C$l._addCombineMaterial(C$u),C$l._addMaterialToRenderElementOffset(C$_),C$l._addCombineRenderObj(C$E),C$E=C$u=null,C$_=-1,C$l._addCombineRenderObj(C$c))}else C$l._addCombineRenderObj(C$c);C$U=!0}else C$u&&(C$s.getRenderQueue(C$E._material.renderQueue)._addRenderElement(C$E),C$E=C$u=null,C$_=-1),C$p++,C$U=!1;else C$X=this._prepareDynamicBatchCombineElements[C$R-1],C$l._addMaterialToRenderElementOffset(C$l.combineRenderElementsCount),C$M=C$X._material,C$l._addCombineMaterial(C$M),C$l._addCombineRenderObj(C$X),C$U=!0,C$M!==(C$x=C$c._material)?(C$u=C$x,C$_=C$l.combineRenderElementsCount,C$E=C$c):C$l._addCombineRenderObj(C$c),C$M=C$x}C$u&&(C$s.getRenderQueue(C$E._material.renderQueue)._addRenderElement(C$E),C$E=C$u=null,C$_=-1),this._prepareDynamicBatchCombineElements.length=0},C$s._clearRenderElements=function(){for(var C$s in this._dynamicBatches)this._dynamicBatches[C$s]._clearRenderElements()},C$s._addToRenderQueue=function(C$s,C$M,C$T,C$X){for(var C$x in this._dynamicBatches){var C$c=this._dynamicBatches[C$x];0<C$c.combineRenderElementsCount&&C$c._addToRenderQueue(C$s,C$M,C$T,C$X)}},C$s.dispose=function(){this._dynamicBatches=null},C$t._sortPrepareDynamicBatch=function(C$s,C$M){return C$s._mainSortID-C$M._mainSortID},C$t}(),C$Ts=function(){function C$s(){}return C$R(C$s,"laya.d3.graphics.FrustumCulling"),C$s.renderShadowObjectCulling=function(C$s,C$M,C$T,C$X,C$x){var C$c=0,C$l=0,C$u=0,C$E=0;for(C$c=0,C$u=C$T.length;C$c<C$u;C$c++){var C$O=C$T[C$c];C$O&&C$O._clearRenderElements()}var C$U,C$p,C$_,C$R=C$s._cullingRenders;if(1<C$x){for(C$c=0,C$u=C$s._cullingRendersLength;C$c<C$u;C$c++)if((C$U=C$R[C$c]).castShadow&&C$o.isVisible(C$U._owner.layer.mask)&&C$U.enable)for(var C$q=1,C$G=C$M.length;C$q<C$G;C$q++)if(C$p=C$T[C$q-1],0!==C$M[C$q].containsBoundSphere(C$U.boundingSphere))for(C$l=0,C$E=(C$_=C$U._renderElements).length;C$l<C$E;C$l++)C$p._addRenderElement(C$_[C$l])}else for(C$c=0,C$u=C$s._cullingRendersLength;C$c<C$u;C$c++)if((C$U=C$R[C$c]).castShadow&&C$o.isVisible(C$U._owner.layer.mask)&&C$U.enable&&0!==C$M[0].containsBoundSphere(C$U.boundingSphere))for(C$U._renderUpdate(C$X),C$p=C$T[0],C$l=0,C$E=(C$_=C$U._renderElements).length;C$l<C$E;C$l++)C$p._addRenderElement(C$_[C$l])},C$s.renderShadowObjectCullingOctree=function(C$s,C$M,C$T,C$X,C$x){for(var C$c=0,C$l=C$T.length;C$c<C$l;C$c++){var C$u=C$T[C$c];C$u&&C$u._clearRenderElements()}1<C$x?C$s.treeRoot.cullingShadowObjects(C$M,C$T,!0,0,C$s):C$s.treeRoot.cullingShadowObjectsOnePSSM(C$M[0],C$T,C$X,!0,0,C$s)},C$s.renderObjectCulling=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=0,C$u=0,C$E=0,C$O=0,C$U=C$M._quenes,C$p=C$M._dynamicBatchManager,C$_=C$M._cullingRenders;for(C$l=0,C$u=C$U.length;C$l<C$u;C$l++){var C$R=C$U[C$l];C$R&&C$R._clearRenderElements()}var C$q=C$Xs._staticBatchManagers;for(C$l=0,C$u=C$q.length;C$l<C$u;C$l++)C$q[C$l]._clearRenderElements();C$p._clearRenderElements();var C$G=C$T.transform.position;for(C$l=0,C$u=C$M._cullingRendersLength;C$l<C$u;C$l++){var C$g=C$_[C$l];if(C$o.isVisible(C$g._owner.layer.mask)&&C$g.enable&&0!==C$s.containsBoundSphere(C$g.boundingSphere)&&C$g._renderUpdate(C$c)){C$g._distanceForSort=C$lM.distance(C$g.boundingSphere.center,C$G)+C$g.sortingFudge;var C$f=C$g._renderElements;for(C$E=0,C$O=C$f.length;C$E<C$O;C$E++){var C$J=C$f[C$E],C$P=C$J._staticBatch;if(C$P&&C$P._material===C$J._material)C$P._addBatchRenderElement(C$J);else{var C$t=C$J.renderObj;C$t.triangleCount<10&&1===C$t._vertexBufferCount&&C$t._getIndexBuffer()&&C$J._material.renderQueue<2&&C$J._canDynamicBatch&&!C$g._owner.isStatic?C$p._addPrepareRenderElement(C$J):C$M.getRenderQueue(C$J._material.renderQueue)._addRenderElement(C$J)}}}}for(C$l=0,C$u=C$q.length;C$l<C$u;C$l++)C$q[C$l]._addToRenderQueue(C$M,C$X,C$x,C$c);C$p._finishCombineDynamicBatch(C$M),C$p._addToRenderQueue(C$M,C$X,C$x,C$c)},C$s.renderObjectCullingOctree=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=0,C$u=0,C$E=C$M._quenes,C$O=C$M._dynamicBatchManager;for(C$l=0,C$u=C$E.length;C$l<C$u;C$l++){var C$U=C$E[C$l];C$U&&C$U._clearRenderElements()}var C$p=C$Xs._staticBatchManagers;for(C$l=0,C$u=C$p.length;C$l<C$u;C$l++)C$p[C$l]._clearRenderElements();for(C$O._clearRenderElements(),C$M._cullingRenders.length=0,C$M.treeRoot.cullingObjects(C$s,!0,0,C$T.transform.position,C$c),C$l=0,C$u=C$p.length;C$l<C$u;C$l++)C$p[C$l]._addToRenderQueue(C$M,C$X,C$x,C$c);C$O._finishCombineDynamicBatch(C$M),C$O._addToRenderQueue(C$M,C$X,C$x,C$c)},C$s.renderObjectCullingNoBoundFrustum=function(C$s,C$M,C$T,C$X,C$x){var C$c=0,C$l=0,C$u=0,C$E=0,C$O=C$s._quenes,C$U=C$s._dynamicBatchManager,C$p=C$s._cullingRenders;for(C$c=0,C$l=C$O.length;C$c<C$l;C$c++){var C$_=C$O[C$c];C$_&&C$_._clearRenderElements()}var C$R=C$Xs._staticBatchManagers;for(C$c=0,C$l=C$R.length;C$c<C$l;C$c++)C$R[C$c]._clearRenderElements();C$U._clearRenderElements();var C$q=C$M.transform.position;for(C$c=0,C$l=C$s._cullingRendersLength;C$c<C$l;C$c++){var C$G=C$p[C$c];if(C$o.isVisible(C$G._owner.layer.mask)&&C$G.enable){C$G._renderUpdate(C$x),C$G._distanceForSort=C$lM.distance(C$G.boundingSphere.center,C$q)+C$G.sortingFudge;var C$g=C$G._renderElements;for(C$u=0,C$E=C$g.length;C$u<C$E;C$u++){var C$f=C$g[C$u],C$J=C$f._staticBatch;if(C$J&&C$J._material===C$f._material)C$J._addBatchRenderElement(C$f);else{var C$P=C$f.renderObj;C$P.triangleCount<10&&1===C$P._vertexBufferCount&&C$P._getIndexBuffer()&&C$f._material.renderQueue<2&&C$f._canDynamicBatch&&!C$G._owner.isStatic?C$U._addPrepareRenderElement(C$f):C$s.getRenderQueue(C$f._material.renderQueue)._addRenderElement(C$f)}}}}for(C$c=0,C$l=C$R.length;C$c<C$l;C$c++)C$R[C$c]._addToRenderQueue(C$s,C$T,C$X,C$x);C$U._finishCombineDynamicBatch(C$s),C$U._addToRenderQueue(C$s,C$T,C$X,C$x)},C$s}(),C$Xs=function(){function C$c(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}C$R(C$c,"laya.d3.graphics.StaticBatchManager");var C$s=C$c.prototype;return C$s._finishInit=function(){for(var C$s in this._staticBatches)this._staticBatches[C$s]._finishInit();this._initBatchRenderElements.length=0},C$s._initStaticBatchs=function(C$s){throw new Error("StaticBatchManager:must override this function.")},C$s._addInitBatchSprite=function(C$s){for(var C$M=C$s._render._renderElements,C$T=0,C$X=C$M.length;C$T<C$X;C$T++)this._initBatchRenderElements.push(C$M[C$T])},C$s._clearRenderElements=function(){for(var C$s in this._staticBatches)this._staticBatches[C$s]._clearRenderElements()},C$s._garbageCollection=function(C$s){var C$M=C$s._staticBatch,C$T=C$M._initBatchRenderElements,C$X=C$T.indexOf(C$s);C$T.splice(C$X,1),0===C$T.length&&(C$M.dispose(),delete this._staticBatches[C$M._key])},C$s._addToRenderQueue=function(C$s,C$M,C$T,C$X){for(var C$x in this._staticBatches){var C$c=this._staticBatches[C$x];0<C$c._batchRenderElements.length&&C$c._updateToRenderQueue(C$s,C$X)}},C$s.dispose=function(){this._staticBatches=null},C$c._addToStaticBatchQueue=function(C$s){C$s instanceof laya.d3.core.RenderableSprite3D&&C$s._addToInitStaticBatchManager();for(var C$M=0,C$T=C$s.numChildren;C$M<C$T;C$M++)C$c._addToStaticBatchQueue(C$s._childs[C$M])},C$c.combine=function(C$s,C$M){var C$T,C$X=0,C$x=0;if(C$M)for(C$X=0,C$x=C$M.length;C$X<C$x;C$X++){C$M[C$X]._addToInitStaticBatchManager()}else C$s&&C$c._addToStaticBatchQueue(C$s);for(C$X=0,C$x=C$c._staticBatchManagers.length;C$X<C$x;C$X++)(C$T=C$c._staticBatchManagers[C$X])._initStaticBatchs(C$s),C$T._finishInit()},C$c._staticBatchManagers=[],C$c}(),C$xs=function(){function C$s(C$s,C$M,C$T){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=C$s,this._manager=C$M,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=C$T}C$R(C$s,"laya.d3.graphics.StaticBatch");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),C$M._binarySearch=function(C$s){for(var C$M=0,C$T=this._batchRenderElements.length-1,C$X=0;C$M<=C$T;)C$X=Math.floor((C$M+C$T)/2),this._compareBatchRenderElement(this._batchRenderElements[C$X],C$s)?C$T=C$X-1:C$M=C$X+1;return C$M},C$M._compareBatchRenderElement=function(C$s,C$M){throw new Error("StaticBatch:must override this function.")},C$M._getVertexDecLightMap=function(C$s){return C$s===C$ys.vertexDeclaration?C$os.vertexDeclaration:C$s===C$Is.vertexDeclaration?C$Bs.vertexDeclaration:C$s===C$As.vertexDeclaration?C$ts.vertexDeclaration:C$s===C$Ls.vertexDeclaration?null:C$s===C$Gs.vertexDeclaration?C$gs.vertexDeclaration:C$s===C$Vs.vertexDeclaration?C$ms.vertexDeclaration:C$s===C$vs.vertexDeclaration?C$zs.vertexDeclaration:C$s===C$es.vertexDeclaration?C$Cs.vertexDeclaration:C$s===C$Is.vertexDeclaration?C$Bs.vertexDeclaration:C$s===C$Ds.vertexDeclaration?C$rs.vertexDeclaration:C$s===C$Ls.vertexDeclaration?null:C$s===C$Gs.vertexDeclaration?C$gs.vertexDeclaration:C$s===C$bs.vertexDeclaration?C$Ys.vertexDeclaration:C$s===C$vs.vertexDeclaration?C$zs.vertexDeclaration:C$s},C$M._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},C$M._addBatchRenderElement=function(C$s){this._batchRenderElements.splice(this._binarySearch(C$s),0,C$s)},C$M._updateToRenderQueue=function(C$s,C$M){this._combineRenderElementPoolIndex=0,this._getRenderElement(C$s.getRenderQueue(this._material.renderQueue)._renderElements,C$s,C$M)},C$M._getRenderElement=function(C$s,C$M,C$T){throw new Error("StaticBatch:must override this function.")},C$M._finishInit=function(){throw new Error("StaticBatch:must override this function.")},C$M._clearRenderElements=function(){this._batchRenderElements.length=0},C$M.dispose=function(){},C$M._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),null},C$M._getIndexBuffer=function(){return null},C$M._beforeRender=function(C$s){return!0},C$M._render=function(C$s){},C$M._getVertexBuffers=function(){return null},C$q(0,C$M,"_vertexBufferCount",function(){return 1}),C$q(0,C$M,"triangleCount",function(){return 0}),C$s.combine=function(C$s){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),C$Xs.combine(C$s)},C$s.maxBatchVertexCount=65535,C$s}(),C$cs=function(){function C$l(C$s,C$M){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++C$l._uniqueIDCounter,this._id>C$l.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",C$l.maxVertexDeclaration);this._shaderValues=new C$_M,this._vertexElementsDic={},this._vertexStride=C$s,this._vertexElements=C$M;for(var C$T=0;C$T<C$M.length;C$T++){var C$X=C$M[C$T],C$x=C$X.elementUsage;this._vertexElementsDic[C$x]=C$X;var C$c=[C$l._getTypeSize(C$X.elementFormat)/4,5126,!1,this._vertexStride,C$X.offset];switch(this._shaderValues.setValue(C$x,C$c),C$x){case 1:this._addShaderDefine(C$kM.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(C$kM.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(C$kM.SHADERDEFINE_UV1)}}}C$R(C$l,"laya.d3.graphics.VertexDeclaration");var C$s=C$l.prototype;return C$s._addShaderDefine=function(C$s){this._shaderDefineValue|=C$s},C$s._removeShaderDefine=function(C$s){this._shaderDefineValue&=~C$s},C$s.getVertexElements=function(){return this._vertexElements.slice()},C$s.getVertexElementByUsage=function(C$s){return this._vertexElementsDic[C$s]},C$s.unBinding=function(){},C$q(0,C$s,"shaderDefineValue",function(){return this._shaderDefineValue}),C$q(0,C$s,"id",function(){return this._id}),C$q(0,C$s,"vertexStride",function(){return this._vertexStride}),C$q(0,C$s,"shaderValues",function(){return this._shaderValues}),C$l._getTypeSize=function(C$s){switch(C$s){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},C$l.getVertexStride=function(C$s){for(var C$M=0,C$T=0;C$T<C$s.Length;C$T++){var C$X=C$s[C$T],C$x=C$X.offset+C$l._getTypeSize(C$X.elementFormat);C$M<C$x&&(C$M=C$x)}return C$M},C$l._maxVertexDeclarationBit=1e3,C$l._uniqueIDCounter=1,C$p(C$l,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),C$l}(),C$ls=function(){function C$s(C$s,C$M,C$T){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=C$s,this.elementFormat=C$M,this.elementUsage=C$T}return C$R(C$s,"laya.d3.graphics.VertexElement"),C$s}(),C$us=(function(){function C$s(){}C$R(C$s,"laya.d3.graphics.VertexElementFormat"),C$s.Single="single",C$s.Vector2="vector2",C$s.Vector3="vector3",C$s.Vector4="vector4",C$s.Color="color",C$s.Byte4="byte4",C$s.Short2="short2",C$s.Short4="short4",C$s.NormalizedShort2="normalizedshort2",C$s.NormalizedShort4="normalizedshort4",C$s.HalfVector2="halfvector2",C$s.HalfVector4="halfvector4"}(),function(){function C$s(){}C$R(C$s,"laya.d3.graphics.VertexElementUsage"),C$s.POSITION0=0,C$s.COLOR0=1,C$s.TEXTURECOORDINATE0=2,C$s.NORMAL0=3,C$s.BINORMAL0=4,C$s.TANGENT0=5,C$s.BLENDINDICES0=6,C$s.BLENDWEIGHT0=7,C$s.DEPTH0=8,C$s.FOG0=9,C$s.POINTSIZE0=10,C$s.SAMPLE0=11,C$s.TESSELLATEFACTOR0=12,C$s.COLOR1=13,C$s.NEXTTEXTURECOORDINATE0=14,C$s.TEXTURECOORDINATE1=15,C$s.NEXTTEXTURECOORDINATE1=16,C$s.CORNERTEXTURECOORDINATE0=17,C$s.VELOCITY0=18,C$s.STARTCOLOR0=19,C$s.STARTSIZE=20,C$s.AGEADDSCALE0=21,C$s.STARTROTATION=22,C$s.ENDCOLOR0=23,C$s.STARTLIFETIME=24,C$s.TIME0=33,C$s.SHAPEPOSITIONSTARTLIFETIME=30,C$s.DIRECTIONTIME=32,C$s.SIZEROTATION0=27,C$s.RADIUS0=28,C$s.RADIAN0=29,C$s.STARTSPEED=31,C$s.RANDOM0=34,C$s.RANDOM1=35,C$s.SIMULATIONWORLDPOSTION=36,C$s.SIMULATIONWORLDROTATION=37,C$s.TEXTURECOORDINATE0X=38,C$s.TEXTURECOORDINATE0X1=39,C$s.TEXTURECOORDINATE0Y=40,C$s.OFFSETVECTOR=41}(),function(){function C$s(C$s,C$M,C$T){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=C$s,this._textureCoordinate0=C$M,this._time=C$T}C$R(C$s,"laya.d3.graphics.VertexGlitter");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate0}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"time",function(){return this._time}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(24,[new C$ls(0,"vector3",0),new C$ls(12,"vector2",2),new C$ls(20,"single",33)])}])}(),function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=C$s,this._position=C$M,this._velocity=C$T,this._startColor=C$X,this._endColor=C$x,this._sizeRotation=C$c,this._radius=C$l,this._radian=C$u,this._ageAddScale=C$E,this._time=C$O}C$R(C$s,"laya.d3.graphics.VertexParticle");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"endColor",function(){return this._endColor}),C$q(0,C$M,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),C$q(0,C$M,"sizeRotation",function(){return this._sizeRotation}),C$q(0,C$M,"velocity",function(){return this._velocity}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"startColor",function(){return this._startColor}),C$q(0,C$M,"radius",function(){return this._radius}),C$q(0,C$M,"radian",function(){return this._radian}),C$q(0,C$M,"ageAddScale",function(){return this._ageAddScale}),C$q(0,C$M,"time",function(){return this._time}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(116,[new C$ls(0,"vector4",17),new C$ls(16,"vector3",0),new C$ls(28,"vector3",18),new C$ls(40,"vector4",19),new C$ls(56,"vector4",23),new C$ls(72,"vector3",27),new C$ls(84,"vector2",28),new C$ls(92,"vector4",29),new C$ls(108,"single",24),new C$ls(112,"single",33)])}])}(),function(){function C$s(C$s){this._position=null,this._position=C$s}C$R(C$s,"laya.d3.graphics.VertexPosition");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(12,[new C$ls(0,"vector3",0)])}]),C$s}()),C$Es=function(){function C$s(C$s,C$M){this._position=null,this._normal=null,this._position=C$s,this._normal=C$M}C$R(C$s,"laya.d3.graphics.VertexPositionNormal");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(24,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3)])}]),C$s}(),C$Os=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._color=null,this._position=C$s,this._normal=C$M,this._color=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColor");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(40,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1)])}]),C$s}(),C$Us=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._blendIndex=C$X,this._blendWeight=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorSkin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(72,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6)])}]),C$s}(),C$ps=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._tangent=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(88,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6),new C$ls(72,"vector4",5)])}]),C$s}(),C$_s=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._tangent=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(84,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6),new C$ls(72,"vector3",5)])}]),C$s}(),C$Rs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._tangent=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(56,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector4",5)])}]),C$s}(),C$qs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._tangent=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(52,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector3",5)])}]),C$s}(),C$Gs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(48,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2)])}]),C$s}(),C$gs=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(56,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15)])}]),C$s}(),C$fs=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._blendIndex=C$c,this._blendWeight=C$l}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(88,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15),new C$ls(56,"vector4",7),new C$ls(72,"vector4",6)])}]),C$s}(),C$Js=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._tangent=C$c,this._blendIndex=C$l,this._blendWeight=C$u}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(104,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15),new C$ls(56,"vector4",7),new C$ls(72,"vector4",6),new C$ls(88,"vector4",5)])}]),C$s}(),C$Ps=function(){function C$s(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$M.VertexPositionNormalColorTexture0SkinTangent=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._tangent=C$c,this._blendIndex=C$l,this._blendWeight=C$u},C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(100,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15),new C$ls(56,"vector4",7),new C$ls(72,"vector4",6),new C$ls(88,"vector3",5)])}]),C$s}(),C$ts=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._tangent=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(72,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15),new C$ls(56,"vector4",5)])}]),C$s}(),C$rs=function(){function C$s(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$M.VertexPositionNormalColorTexture0Tangent=function(C$s,C$M,C$T,C$X,C$x,C$c){this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._tangent=C$c},C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(68,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector2",15),new C$ls(56,"vector3",5)])}]),C$s}(),C$Ns=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(80,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector4",7),new C$ls(64,"vector4",6)])}]),C$s}(),C$ws=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X,this._tangent=C$x,this._blendIndex=C$c,this._blendWeight=C$l}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(96,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector4",7),new C$ls(64,"vector4",6),new C$ls(80,"vector4",5)])}]),C$s}(),C$ks=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X,this._tangent=C$x,this._blendIndex=C$c,this._blendWeight=C$l}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(92,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector4",7),new C$ls(64,"vector4",6),new C$ls(80,"vector3",5)])}]),C$s}(),C$As=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X,this._tangent=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(64,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector4",5)])}]),C$s}(),C$Ds=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._color=C$T,this._textureCoordinate=C$X,this._tangent=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"color",function(){return this._color}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(60,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",1),new C$ls(40,"vector2",2),new C$ls(48,"vector3",5)])}]),C$s}(),C$hs=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._tangent=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNormalSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(40,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector4",5)])}]),C$s}(),C$Qs=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._tangent=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(36,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector3",5)])}]),C$s}(),C$vs=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(32,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2)])}]),C$s}(),C$zs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(40,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15)])}]),C$s}(),C$Bs=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(72,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6)])}]),C$s}(),C$os=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X,this._tangent=C$x,this._blendIndex=C$c,this._blendWeight=C$l}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(88,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6),new C$ls(72,"vector4",5)])}]),C$s}(),C$Cs=function(){function C$s(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$M.VertexPositionNormalTexture0SkinTangent=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X,this._tangent=C$x,this._blendIndex=C$c,this._blendWeight=C$l},C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(84,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15),new C$ls(40,"vector4",7),new C$ls(56,"vector4",6),new C$ls(72,"vector3",5)])}]),C$s}(),C$ms=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X,this._tangent=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(56,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15),new C$ls(40,"vector4",5)])}]),C$s}(),C$Ys=function(){function C$s(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$M.VertexPositionNormalTexture0Tangent=function(C$s,C$M,C$T,C$X,C$x){this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$T,this._textureCoordinate1=C$X,this._tangent=C$x},C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(52,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15),new C$ls(40,"vector3",5)])}]),C$s}(),C$Is=function(){function C$s(C$s,C$M,C$T,C$X,C$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T,this._blendIndex=C$X,this._blendWeight=C$x}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTextureSkin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(64,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector4",7),new C$ls(48,"vector4",6)])}]),C$s}(),C$ys=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T,this._tangent=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(80,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector4",7),new C$ls(48,"vector4",6),new C$ls(64,"vector4",5)])}]),C$s}(),C$es=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T,this._tangent=C$X,this._blendIndex=C$x,this._blendWeight=C$c}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(76,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector4",7),new C$ls(48,"vector4",6),new C$ls(64,"vector3",5)])}]),C$s}(),C$Vs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T,this._tangent=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(48,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector4",5)])}]),C$s}(),C$bs=function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T,this._tangent=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionNormalTextureTangent");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(44,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector3",5)])}]),C$s}(),C$Ls=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNTBTexture");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(56,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector3",5),new C$ls(36,"vector3",4),new C$ls(48,"vector2",2)])}]),C$s}(),C$Ss=function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=C$s,this._normal=C$M,this._textureCoordinate0=C$X,this._textureCoordinate1=C$x,this._tangent=C$c,C$T=C$T,this._blendIndex=C$l,this._blendWeight=C$u}C$R(C$s,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"tangent",function(){return this._tangent}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(0,C$M,"textureCoordinate1",function(){return this._textureCoordinate1}),C$q(0,C$M,"blendIndex",function(){return this._blendIndex}),C$q(0,C$M,"blendWeight",function(){return this._blendWeight}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(96,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector3",5),new C$ls(36,"vector3",4),new C$ls(48,"vector2",2),new C$ls(56,"vector2",15),new C$ls(64,"vector4",7),new C$ls(80,"vector4",6)])}]),C$s}(),C$Ks=function(){function C$s(C$s,C$M,C$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=C$s,this._normal=C$M,this._textureCoordinate=C$T}C$R(C$s,"laya.d3.graphics.VertexPositionNTBTextureSkin");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"textureCoordinate",function(){return this._textureCoordinate}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(88,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector3",5),new C$ls(36,"vector3",4),new C$ls(48,"vector2",2),new C$ls(56,"vector4",7),new C$ls(72,"vector4",6)])}]),C$s}(),C$Zs=(function(){function C$s(C$s,C$M,C$T,C$X){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=C$s,this._normal=C$M,this._textureCoord0=C$T,this._textureCoord1=C$X}C$R(C$s,"laya.d3.graphics.VertexPositionTerrain");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"normal",function(){return this._normal}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoord0",function(){return this._textureCoord0}),C$q(0,C$M,"textureCoord1",function(){return this._textureCoord1}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(40,[new C$ls(0,"vector3",0),new C$ls(12,"vector3",3),new C$ls(24,"vector2",2),new C$ls(32,"vector2",15)])}])}(),function(){function C$s(C$s,C$M){this._position=null,this._textureCoordinate0=null,this._position=C$s,this._textureCoordinate0=C$M}C$R(C$s,"laya.d3.graphics.VertexPositionTexture0");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"position",function(){return this._position}),C$q(0,C$M,"textureCoordinate0",function(){return this._textureCoordinate0}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(20,[new C$ls(0,"vector3",0),new C$ls(12,"vector2",2)])}]),C$s}()),C$ns=(function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_,C$R){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=C$s,this._positionStartLifeTime=C$M,this._velocity=C$T,this._startColor=C$X,this._startSize=C$x,this._startRotation0=C$c,this._startRotation1=C$l,this._startRotation2=C$u,this._startLifeTime=C$E,this._time=C$O,this._startSpeed=C$U,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=C$R}C$R(C$s,"laya.d3.graphics.VertexShurikenParticleBillboard");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),C$q(0,C$M,"random1",function(){return this._randoms1}),C$q(0,C$M,"startRotation2",function(){return this._startRotation2}),C$q(0,C$M,"positionStartLifeTime",function(){return this._positionStartLifeTime}),C$q(0,C$M,"velocity",function(){return this._velocity}),C$q(0,C$M,"random0",function(){return this._randoms0}),C$q(0,C$M,"startSize",function(){return this._startSize}),C$q(0,C$M,"startColor",function(){return this._startColor}),C$q(0,C$M,"startRotation0",function(){return this._startRotation0}),C$q(0,C$M,"startRotation1",function(){return this._startRotation1}),C$q(0,C$M,"startLifeTime",function(){return this._startLifeTime}),C$q(0,C$M,"time",function(){return this._time}),C$q(0,C$M,"startSpeed",function(){return this._startSpeed}),C$q(0,C$M,"simulationWorldPostion",function(){return this._simulationWorldPostion}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(152,[new C$ls(0,"vector4",17),new C$ls(16,"vector4",30),new C$ls(32,"vector4",32),new C$ls(48,"vector4",19),new C$ls(64,"vector3",20),new C$ls(76,"vector3",22),new C$ls(88,"single",31),new C$ls(92,"vector4",34),new C$ls(108,"vector4",35),new C$ls(124,"vector3",36),new C$ls(136,"vector4",37)])}])}(),function(){function C$s(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_,C$R){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=C$s,this._positionStartLifeTime=C$M,this._velocity=C$T,this._startColor=C$X,this._startSize=C$x,this._startRotation0=C$c,this._startRotation1=C$l,this._startRotation2=C$u,this._startLifeTime=C$E,this._time=C$O,this._startSpeed=C$U,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=C$R}C$R(C$s,"laya.d3.graphics.VertexShurikenParticleMesh");var C$M=C$s.prototype;C$r.imps(C$M,{"laya.d3.graphics.IVertex":!0}),C$q(0,C$M,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),C$q(0,C$M,"velocity",function(){return this._velocity}),C$q(0,C$M,"position",function(){return this._positionStartLifeTime}),C$q(0,C$M,"random0",function(){return this._randoms0}),C$q(0,C$M,"startSize",function(){return this._startSize}),C$q(0,C$M,"startColor",function(){return this._startColor}),C$q(0,C$M,"startRotation0",function(){return this._startRotation0}),C$q(0,C$M,"startRotation1",function(){return this._startRotation1}),C$q(0,C$M,"random1",function(){return this._randoms1}),C$q(0,C$M,"startRotation2",function(){return this._startRotation2}),C$q(0,C$M,"startLifeTime",function(){return this._startLifeTime}),C$q(0,C$M,"time",function(){return this._time}),C$q(0,C$M,"startSpeed",function(){return this._startSpeed}),C$q(0,C$M,"simulationWorldPostion",function(){return this._simulationWorldPostion}),C$q(0,C$M,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$q(1,C$s,"vertexDeclaration",function(){return C$s._vertexDeclaration}),C$p(C$s,["_vertexDeclaration",function(){return this._vertexDeclaration=new C$cs(172,[new C$ls(0,"vector3",0),new C$ls(12,"vector4",1),new C$ls(28,"vector2",2),new C$ls(36,"vector4",30),new C$ls(52,"vector4",32),new C$ls(68,"vector4",19),new C$ls(84,"vector3",20),new C$ls(96,"vector3",22),new C$ls(108,"single",31),new C$ls(112,"vector4",34),new C$ls(128,"vector4",35),new C$ls(144,"vector3",36),new C$ls(156,"vector4",37)])}])}(),function(){function C$P(C$s,C$M,C$T,C$X,C$x,C$c){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=C$T,this._materials=C$X,this._subMeshes=C$x,this._materialMap=C$c,this._version=C$M,this._onLoaded(C$s)}C$R(C$P,"laya.d3.loaders.LoadModelV01");var C$s=C$P.prototype;return C$s._onLoaded=function(C$s){this._readData=C$s,this.READ_BLOCK();for(var C$M=0;C$M<this._BLOCK.count;C$M++){var C$T=this._readData.getUint16(),C$X=this._strings[C$T],C$x=this["READ_"+C$X];if(null==C$x)throw new Error("model file err,no this function:"+C$T+" "+C$X);if(!C$x.call(this))break}return this._mesh},C$s.onError=function(){},C$s._readString=function(){return this._strings[this._readData.getUint16()]},C$s.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},C$s.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},C$s.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var C$s=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var C$M=0;C$M<this._STRINGS.size;C$M++)this._strings[C$M]=this._readData.readUTFString();return this._readData.pos=C$s,!0},C$s.READ_MATERIAL=function(){var C$s=this._readData.getUint16(),C$M=(this._readString(),this._readString());return this._materials[C$s]="null"!==C$M?C$f.getRes(this._materialMap[C$M]):new C$QM,!0},C$s.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var C$s,C$M=this._readData.__getBuffer(),C$T=0,C$X=this._readData.getUint32(),C$x=this._readData.getUint32(),C$c=(new Float32Array(C$M.slice(C$X+this._DATA.offset,C$X+this._DATA.offset+C$x)),this._readData.getUint32()),C$l=this._readData.getUint32(),C$u=new Float32Array(C$M.slice(C$c+this._DATA.offset,C$c+this._DATA.offset+C$l));for(this.mesh._inverseBindPoses=[],C$T=0,C$s=C$u.length;C$T<C$s;C$T+=16){var C$E=new C$sM(C$u[C$T+0],C$u[C$T+1],C$u[C$T+2],C$u[C$T+3],C$u[C$T+4],C$u[C$T+5],C$u[C$T+6],C$u[C$T+7],C$u[C$T+8],C$u[C$T+9],C$u[C$T+10],C$u[C$T+11],C$u[C$T+12],C$u[C$T+13],C$u[C$T+14],C$u[C$T+15]);this.mesh._inverseBindPoses.push(C$E)}break;default:throw new Error("LoadModel:unknown version.")}return!0},C$s.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var C$s=this._readString();this._shaderAttributes=C$s.match(C$P._attrReg);var C$M=this._readData.getUint32(),C$T=this._readData.getUint32(),C$X=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),C$x=this._readData.getUint32(),C$c=this._readData.getUint32(),C$l=this._readData.getUint32(),C$u=this._readData.__getBuffer(),C$E=new C$OM(this._mesh),C$O=this._getVertexDeclaration(),C$U=C$eM.create(C$O,C$x/C$O.vertexStride,35044,!0),C$p=C$X+this._DATA.offset,C$_=C$u.slice(C$p,C$p+C$x);C$U.setData(new Float32Array(C$_));for(var C$R=(C$E._vertexBuffer=C$U).vertexDeclaration.getVertexElements(),C$q=0;C$q<C$R.length;C$q++)C$E._bufferUsage[C$R[C$q].elementUsage]=C$U;var C$G=C$yM.create("ushort",C$T/2,35044,!0),C$g=C$M+this._DATA.offset,C$f=C$u.slice(C$g,C$g+C$T);C$G.setData(new Uint16Array(C$f)),C$E._indexBuffer=C$G;var C$J=C$u.slice(C$c+this._DATA.offset,C$c+this._DATA.offset+C$l);return C$E._boneIndicesList[0]=new Uint8Array(C$J),this._subMeshes.push(C$E),!0},C$s.READ_DATAAREA=function(){return!1},C$s._getVertexDeclaration=function(){for(var C$s,C$M=!1,C$T=!1,C$X=!1,C$x=!1,C$c=!1,C$l=!1,C$u=!1,C$E=!1,C$O=!1,C$U=0;C$U<this._shaderAttributes.length;C$U+=8)switch(this._shaderAttributes[C$U]){case"POSITION":C$M=!0;break;case"NORMAL":C$T=!0;break;case"COLOR":C$X=!0;break;case"UV":C$x=!0;break;case"UV1":C$c=!0;break;case"BLENDWEIGHT":C$u=!0;break;case"BLENDINDICES":C$E=!0;break;case"TANGENT":C$l=!0;break;case"BINORMAL":C$O=!0}return C$M&&C$T&&C$X&&C$x&&C$c&&C$u&&C$E&&C$l?C$s=C$Ps.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$c&&C$u&&C$E?C$s=C$fs.vertexDeclaration:C$M&&C$T&&C$x&&C$c&&C$u&&C$E&&C$l?C$s=C$Cs.vertexDeclaration:C$M&&C$T&&C$x&&C$c&&C$u&&C$E?C$s=C$Bs.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$u&&C$E&&C$l?C$s=C$ks.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$u&&C$E?C$s=C$Ns.vertexDeclaration:C$M&&C$T&&C$l&&C$O&&C$x&&C$u&&C$E?C$s=C$Ks.vertexDeclaration:C$M&&C$T&&C$x&&C$u&&C$E&&C$l?C$s=C$es.vertexDeclaration:C$M&&C$T&&C$x&&C$u&&C$E?C$s=C$Is.vertexDeclaration:C$M&&C$T&&C$X&&C$u&&C$E&&C$l?C$s=C$_s.vertexDeclaration:C$M&&C$T&&C$X&&C$u&&C$E?C$s=C$Us.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$c&&C$l?C$s=C$rs.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$c?C$s=C$gs.vertexDeclaration:C$M&&C$T&&C$x&&C$c&&C$l?C$s=C$Ys.vertexDeclaration:C$M&&C$T&&C$x&&C$c?C$s=C$zs.vertexDeclaration:C$M&&C$T&&C$X&&C$x&&C$l?C$s=C$Ds.vertexDeclaration:C$M&&C$T&&C$x&&C$l&&C$O?C$s=C$Ls.vertexDeclaration:C$M&&C$T&&C$X&&C$x?C$s=C$Gs.vertexDeclaration:C$M&&C$T&&C$x&&C$l?C$s=C$bs.vertexDeclaration:C$M&&C$T&&C$x?C$s=C$vs.vertexDeclaration:C$M&&C$T&&C$X&&C$l?C$s=C$qs.vertexDeclaration:C$M&&C$T&&C$X&&(C$s=C$Os.vertexDeclaration),C$s},C$q(0,C$s,"mesh",function(){return this._mesh}),C$P._attrReg=new RegExp("(\\w+)|([:,;])","g"),C$P}()),C$$s=function(){function C$w(){}return C$R(C$w,"laya.d3.loaders.LoadModelV02"),C$w.parse=function(C$s,C$M,C$T,C$X,C$x,C$c){C$w._mesh=C$T,C$w._materials=C$X,C$w._subMeshes=C$x,C$w._materialMap=C$c,C$w._version=C$M,C$w._readData=C$s,C$w.READ_DATA(),C$w.READ_BLOCK(),C$w.READ_STRINGS();for(var C$l=0,C$u=C$w._BLOCK.count;C$l<C$u;C$l++){C$w._readData.pos=C$w._BLOCK.blockStarts[C$l];var C$E=C$w._readData.getUint16(),C$O=C$w._strings[C$E],C$U=C$w["READ_"+C$O];if(null==C$U)throw new Error("model file err,no this function:"+C$E+" "+C$O);C$U.call()}C$w._strings.length=0,C$w._readData=null,C$w._version=null,C$w._mesh=null,C$w._materials=null,C$w._subMeshes=null,C$w._materialMap=null},C$w._readString=function(){return C$w._strings[C$w._readData.getUint16()]},C$w.READ_DATA=function(){C$w._DATA.offset=C$w._readData.getUint32(),C$w._DATA.size=C$w._readData.getUint32()},C$w.READ_BLOCK=function(){for(var C$s=C$w._BLOCK.count=C$w._readData.getUint16(),C$M=C$w._BLOCK.blockStarts=[],C$T=C$w._BLOCK.blockLengths=[],C$X=0;C$X<C$s;C$X++)C$M.push(C$w._readData.getUint32()),C$T.push(C$w._readData.getUint32())},C$w.READ_STRINGS=function(){var C$s=C$w._readData.getUint32(),C$M=C$w._readData.getUint16(),C$T=C$w._readData.pos;C$w._readData.pos=C$s+C$w._DATA.offset;for(var C$X=0;C$X<C$M;C$X++)C$w._strings[C$X]=C$w._readData.readUTFString();C$w._readData.pos=C$T},C$w.READ_MATERIAL=function(){C$w._readString(),C$w._readString();var C$s=C$w._readString();return""!==C$s&&C$w._materials.push(C$f.getRes(C$w._materialMap[C$s])),!0},C$w.READ_MESH=function(){C$w._readString();var C$s,C$M=C$w._readData.__getBuffer(),C$T=0,C$X=C$w._readData.getInt16(),C$x=C$w._DATA.offset;for(C$T=0;C$T<C$X;C$T++){var C$c=C$x+C$w._readData.getUint32(),C$l=C$w._readData.getUint32(),C$u=new Float32Array(C$M.slice(C$c,C$c+C$l)),C$E=C$w._readString().match(C$w._attrReg),C$O=C$w._getVertexDeclaration(C$E),C$U=C$eM.create(C$O,4*C$u.length/C$O.vertexStride,35044,!0);C$U.setData(C$u),C$w._mesh._vertexBuffers.push(C$U)}var C$p=C$x+C$w._readData.getUint32(),C$_=C$w._readData.getUint32(),C$R=new Uint16Array(C$M.slice(C$p,C$p+C$_)),C$q=C$yM.create("ushort",C$_/2,35044,!0);C$q.setData(C$R),C$w._mesh._indexBuffer=C$q;var C$G=C$w._mesh._boneNames=[],C$g=C$w._readData.getUint16();for(C$G.length=C$g,C$T=0;C$T<C$g;C$T++)C$G[C$T]=C$w._strings[C$w._readData.getUint16()];var C$f=C$w._readData.getUint32(),C$J=C$w._readData.getUint32(),C$P=(new Float32Array(C$M.slice(C$x+C$f,C$x+C$f+C$J)),C$w._readData.getUint32()),C$t=C$w._readData.getUint32(),C$r=new Float32Array(C$M.slice(C$x+C$P,C$x+C$P+C$t));for(C$w._mesh._inverseBindPoses=[],C$T=0,C$s=C$r.length;C$T<C$s;C$T+=16){var C$N=new C$sM(C$r[C$T+0],C$r[C$T+1],C$r[C$T+2],C$r[C$T+3],C$r[C$T+4],C$r[C$T+5],C$r[C$T+6],C$r[C$T+7],C$r[C$T+8],C$r[C$T+9],C$r[C$T+10],C$r[C$T+11],C$r[C$T+12],C$r[C$T+13],C$r[C$T+14],C$r[C$T+15]);C$w._mesh._inverseBindPoses.push(C$N)}return C$w._mesh._skinnedDatas=new Float32Array(16*C$r.length),!0},C$w.READ_SUBMESH=function(){var C$s=C$w._readData.__getBuffer(),C$M=new C$OM(C$w._mesh),C$T=C$w._readData.getInt16(),C$X=C$w._readData.getUint32(),C$x=C$w._readData.getUint32();C$M._vertexBuffer=C$w._mesh._vertexBuffers[C$T],C$M._vertexStart=C$X,C$M._vertexCount=C$x;var C$c=C$w._readData.getUint32(),C$l=C$w._readData.getUint32(),C$u=C$w._mesh._indexBuffer;C$M._indexBuffer=C$u,C$M._indexStart=C$c,C$M._indexCount=C$l,C$M._indices=new Uint16Array(C$u.getData().buffer,2*C$c,C$l);var C$E=C$w._DATA.offset,C$O=C$M._subIndexBufferStart,C$U=C$M._subIndexBufferCount,C$p=C$M._boneIndicesList,C$_=C$w._readData.getUint16();C$O.length=C$_,C$U.length=C$_,C$p.length=C$_;for(var C$R=0;C$R<C$_;C$R++){C$O[C$R]=C$w._readData.getUint32(),C$U[C$R]=C$w._readData.getUint32();var C$q=C$w._readData.getUint32(),C$G=C$w._readData.getUint32();C$M._boneIndicesList[C$R]=new Uint8Array(C$s.slice(C$E+C$q,C$E+C$q+C$G))}return C$w._subMeshes.push(C$M),!0},C$w._getVertexDeclaration=function(C$s){for(var C$M,C$T=!1,C$X=!1,C$x=!1,C$c=!1,C$l=!1,C$u=!1,C$E=!1,C$O=!1,C$U=!1,C$p=0;C$p<C$s.length;C$p++)switch(C$s[C$p]){case"POSITION":C$T=!0;break;case"NORMAL":C$X=!0;break;case"COLOR":C$x=!0;break;case"UV":C$c=!0;break;case"UV1":C$l=!0;break;case"BLENDWEIGHT":C$E=!0;break;case"BLENDINDICES":C$O=!0;break;case"TANGENT":C$u=!0;break;case"BINORMAL":C$U=!0}return C$T&&C$X&&C$x&&C$c&&C$l&&C$E&&C$O&&C$u?C$M=C$Ps.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$l&&C$E&&C$O?C$M=C$fs.vertexDeclaration:C$T&&C$X&&C$c&&C$l&&C$E&&C$O&&C$u?C$M=C$Cs.vertexDeclaration:C$T&&C$X&&C$c&&C$l&&C$E&&C$O?C$M=C$Bs.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$E&&C$O&&C$u?C$M=C$ks.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$E&&C$O?C$M=C$Ns.vertexDeclaration:C$T&&C$X&&C$c&&C$E&&C$O&&C$u?C$M=C$es.vertexDeclaration:C$T&&C$X&&C$c&&C$E&&C$O?C$M=C$Is.vertexDeclaration:C$T&&C$X&&C$x&&C$E&&C$O&&C$u?C$M=C$_s.vertexDeclaration:C$T&&C$X&&C$x&&C$E&&C$O?C$M=C$Us.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$l&&C$u?C$M=C$rs.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$l?C$M=C$gs.vertexDeclaration:C$T&&C$X&&C$c&&C$l&&C$u?C$M=C$Ys.vertexDeclaration:C$T&&C$X&&C$c&&C$l?C$M=C$zs.vertexDeclaration:C$T&&C$X&&C$x&&C$c&&C$u?C$M=C$Ds.vertexDeclaration:C$T&&C$X&&C$c&&C$u&&C$U?C$M=C$Ls.vertexDeclaration:C$T&&C$X&&C$x&&C$c?C$M=C$Gs.vertexDeclaration:C$T&&C$X&&C$c&&C$u?C$M=C$bs.vertexDeclaration:C$T&&C$X&&C$c?C$M=C$vs.vertexDeclaration:C$T&&C$X&&C$x&&C$u?C$M=C$qs.vertexDeclaration:C$T&&C$X&&C$x&&(C$M=C$Os.vertexDeclaration),C$M},C$w._attrReg=new RegExp("(\\w+)|([:,;])","g"),C$w._strings=[],C$w._readData=null,C$w._version=null,C$w._mesh=null,C$w._materials=null,C$w._subMeshes=null,C$w._materialMap=null,C$p(C$w,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),C$w}(),C$Fs=function(){function C$N(){}return C$R(C$N,"laya.d3.loaders.LoadModelV03"),C$N.parse=function(C$s,C$M,C$T,C$X,C$x){C$N._mesh=C$T,C$N._subMeshes=C$X,C$N._materialMap=C$x,C$N._version=C$M,C$N._readData=C$s,C$N.READ_DATA(),C$N.READ_BLOCK(),C$N.READ_STRINGS();for(var C$c=0,C$l=C$N._BLOCK.count;C$c<C$l;C$c++){C$N._readData.pos=C$N._BLOCK.blockStarts[C$c];var C$u=C$N._readData.getUint16(),C$E=C$N._strings[C$u],C$O=C$N["READ_"+C$E];if(null==C$O)throw new Error("model file err,no this function:"+C$u+" "+C$E);C$O.call()}C$N._strings.length=0,C$N._readData=null,C$N._version=null,C$N._mesh=null,C$N._subMeshes=null,C$N._materialMap=null},C$N._readString=function(){return C$N._strings[C$N._readData.getUint16()]},C$N.READ_DATA=function(){C$N._DATA.offset=C$N._readData.getUint32(),C$N._DATA.size=C$N._readData.getUint32()},C$N.READ_BLOCK=function(){for(var C$s=C$N._BLOCK.count=C$N._readData.getUint16(),C$M=C$N._BLOCK.blockStarts=[],C$T=C$N._BLOCK.blockLengths=[],C$X=0;C$X<C$s;C$X++)C$M.push(C$N._readData.getUint32()),C$T.push(C$N._readData.getUint32())},C$N.READ_STRINGS=function(){var C$s=C$N._readData.getUint32(),C$M=C$N._readData.getUint16(),C$T=C$N._readData.pos;C$N._readData.pos=C$s+C$N._DATA.offset;for(var C$X=0;C$X<C$M;C$X++)C$N._strings[C$X]=C$N._readData.readUTFString();C$N._readData.pos=C$T},C$N.READ_MESH=function(){var C$s,C$M=C$N._readString(),C$T=C$N._readData.__getBuffer(),C$X=0,C$x=C$N._readData.getInt16(),C$c=C$N._DATA.offset;for(C$X=0;C$X<C$x;C$X++){var C$l,C$u=C$c+C$N._readData.getUint32(),C$E=C$N._readData.getUint32(),C$O=new Float32Array(C$T.slice(C$u,C$u+C$E)),C$U=C$N._readString();switch(C$N._version){case"LAYAMODEL:03":C$l=C$N._vertexDeclarationMap_Discard[C$U];break;case"LAYAMODEL:0301":C$l=C$N._vertexDeclarationMap[C$U];break;default:throw new Error("LoadModelV03: unknown version.")}if(!C$l)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+C$N._version+"  bufferAttribute="+C$U+"  name="+C$M+"  url="+(C$N._mesh?C$N._mesh.url:"null"));var C$p=C$eM.create(C$l,4*C$O.length/C$l.vertexStride,35044,!0,C$N._mesh._url+"_"+C$X);C$p.setData(C$O),C$N._mesh._vertexBuffers.push(C$p)}var C$_=C$c+C$N._readData.getUint32(),C$R=C$N._readData.getUint32(),C$q=new Uint16Array(C$T.slice(C$_,C$_+C$R)),C$G=C$yM.create("ushort",C$R/2,35044,!0,C$N._mesh._url);C$G.setData(C$q),C$N._mesh._indexBuffer=C$G;var C$g=C$N._mesh._boneNames=[],C$f=C$N._readData.getUint16();for(C$g.length=C$f,C$X=0;C$X<C$f;C$X++)C$g[C$X]=C$N._strings[C$N._readData.getUint16()];C$N._readData.pos+=8;var C$J=C$N._readData.getUint32(),C$P=C$N._readData.getUint32(),C$t=new Float32Array(C$T.slice(C$c+C$J,C$c+C$J+C$P));for(C$N._mesh._inverseBindPoses=[],C$X=0,C$s=C$t.length;C$X<C$s;C$X+=16){var C$r=new C$sM(C$t[C$X+0],C$t[C$X+1],C$t[C$X+2],C$t[C$X+3],C$t[C$X+4],C$t[C$X+5],C$t[C$X+6],C$t[C$X+7],C$t[C$X+8],C$t[C$X+9],C$t[C$X+10],C$t[C$X+11],C$t[C$X+12],C$t[C$X+13],C$t[C$X+14],C$t[C$X+15]);C$N._mesh._inverseBindPoses.push(C$r)}return C$N._mesh._skinnedDatas=new Float32Array(16*C$t.length),!0},C$N.READ_SUBMESH=function(){var C$s=C$N._readData.__getBuffer(),C$M=new C$OM(C$N._mesh),C$T=C$N._readData.getInt16(),C$X=C$N._readData.getUint32(),C$x=C$N._readData.getUint32();C$M._vertexBuffer=C$N._mesh._vertexBuffers[C$T],C$M._vertexStart=C$X,C$M._vertexCount=C$x;var C$c=C$N._readData.getUint32(),C$l=C$N._readData.getUint32(),C$u=C$N._mesh._indexBuffer;C$M._indexBuffer=C$u,C$M._indexStart=C$c,C$M._indexCount=C$l,C$M._indices=new Uint16Array(C$u.getData().buffer,2*C$c,C$l);var C$E=C$N._DATA.offset,C$O=C$M._subIndexBufferStart,C$U=C$M._subIndexBufferCount,C$p=C$M._boneIndicesList,C$_=C$N._readData.getUint16();C$O.length=C$_,C$U.length=C$_,C$p.length=C$_;for(var C$R=0;C$R<C$_;C$R++){C$O[C$R]=C$N._readData.getUint32(),C$U[C$R]=C$N._readData.getUint32();var C$q=C$N._readData.getUint32(),C$G=C$N._readData.getUint32();C$p[C$R]=new Uint8Array(C$s.slice(C$E+C$q,C$E+C$q+C$G))}return C$N._subMeshes.push(C$M),!0},C$N._strings=[],C$N._readData=null,C$N._version=null,C$N._mesh=null,C$N._subMeshes=null,C$N._materialMap=null,C$p(C$N,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":C$Ps.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":C$fs.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":C$Ss.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":C$Cs.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":C$Bs.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":C$ks.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":C$Ns.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":C$es.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":C$Is.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":C$_s.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":C$Us.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":C$rs.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":C$gs.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":C$Ys.vertexDeclaration,"POSITION,NORMAL,UV,UV1":C$zs.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":C$Ds.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":C$Ls.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":C$Gs.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":C$bs.vertexDeclaration,"POSITION,NORMAL,UV":C$vs.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":C$qs.vertexDeclaration,"POSITION,NORMAL,COLOR":C$Os.vertexDeclaration,"POSITION,NORMAL,TANGENT":C$Qs.vertexDeclaration,"POSITION,NORMAL":C$Es.vertexDeclaration,"POSITION,UV":C$Zs.vertexDeclaration,POSITION:C$us.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":C$Js.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":C$fs.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":C$Ss.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":C$os.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":C$Bs.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":C$ws.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":C$Ns.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":C$ys.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":C$Is.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":C$ps.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":C$Us.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":C$ts.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":C$gs.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":C$ms.vertexDeclaration,"POSITION,NORMAL,UV,UV1":C$zs.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":C$As.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":C$Ls.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":C$Gs.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":C$Vs.vertexDeclaration,"POSITION,NORMAL,UV":C$vs.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":C$Rs.vertexDeclaration,"POSITION,NORMAL,COLOR":C$Os.vertexDeclaration,"POSITION,NORMAL,TANGENT":C$hs.vertexDeclaration,"POSITION,NORMAL":C$Es.vertexDeclaration,"POSITION,UV":C$Zs.vertexDeclaration,POSITION:C$us.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),C$N}(),C$Ws=function(){function C$u(){}return C$R(C$u,"laya.d3.loaders.MeshReader"),C$u.read=function(C$s,C$M,C$T,C$X,C$x){var C$c=new C$N(C$s);C$c.pos=0;var C$l=C$c.readUTFString();switch(C$l){case"LAYAMODEL:01":case"LAYASKINANI:01":C$u._readVersion01(C$c,C$l,C$M,C$T,C$X,C$x);break;case"LAYAMODEL:02":C$$s.parse(C$c,C$l,C$M,C$T,C$X,C$x);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":C$Fs.parse(C$c,C$l,C$M,C$X,C$x);break;default:throw new Error("MeshReader: unknown mesh version.")}C$M._setSubMeshes(C$X)},C$u._readVersion01=function(C$s,C$M,C$T,C$X,C$x,C$c){new C$ns(C$s,C$M,C$T,C$X,C$x,C$c)},C$u}(),C$as=function(){function C$s(C$s,C$M){this.min=null,this.max=null,this.min=C$s,this.max=C$M}C$R(C$s,"laya.d3.math.BoundBox");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.getCorners=function(C$s){C$s.length=8;var C$M=this.min.elements,C$T=this.max.elements,C$X=C$M[0],C$x=C$M[1],C$c=C$M[2],C$l=C$T[0],C$u=C$T[1],C$E=C$T[2];C$s[0]=new C$lM(C$X,C$u,C$E),C$s[1]=new C$lM(C$l,C$u,C$E),C$s[2]=new C$lM(C$l,C$x,C$E),C$s[3]=new C$lM(C$X,C$x,C$E),C$s[4]=new C$lM(C$X,C$u,C$c),C$s[5]=new C$lM(C$l,C$u,C$c),C$s[6]=new C$lM(C$l,C$x,C$c),C$s[7]=new C$lM(C$X,C$x,C$c)},C$M.toDefault=function(){this.min.toDefault(),this.max.toDefault()},C$M.cloneTo=function(C$s){var C$M=C$s;this.min.cloneTo(C$M.min),this.max.cloneTo(C$M.max)},C$M.clone=function(){var C$s=new this.constructor(new C$lM,new C$lM);return this.cloneTo(C$s),C$s},C$s.createfromPoints=function(C$s,C$M){if(null==C$s)throw new Error("points");var C$T=C$M.min,C$X=C$M.max,C$x=C$T.elements;C$x[0]=Number.MAX_VALUE,C$x[1]=Number.MAX_VALUE,C$x[2]=Number.MAX_VALUE;var C$c=C$X.elements;C$c[0]=-Number.MAX_VALUE,C$c[1]=-Number.MAX_VALUE,C$c[2]=-Number.MAX_VALUE;for(var C$l=0,C$u=C$s.length;C$l<C$u;++C$l)C$lM.min(C$T,C$s[C$l],C$T),C$lM.max(C$X,C$s[C$l],C$X)},C$s.merge=function(C$s,C$M,C$T){C$lM.min(C$s.min,C$M.min,C$T.min),C$lM.max(C$s.max,C$M.max,C$T.max)},C$s}(),C$js=function(){function C$O(C$s){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=C$s,this._near=new C$MM(new C$lM),this._far=new C$MM(new C$lM),this._left=new C$MM(new C$lM),this._right=new C$MM(new C$lM),this._top=new C$MM(new C$lM),this._bottom=new C$MM(new C$lM),C$O._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}C$R(C$O,"laya.d3.math.BoundFrustum");var C$s=C$O.prototype;return C$s.equalsBoundFrustum=function(C$s){return this._matrix.equalsOtherMatrix(C$s.matrix)},C$s.equalsObj=function(C$s){if(C$s instanceof laya.d3.math.BoundFrustum){var C$M=C$s;return this.equalsBoundFrustum(C$M)}return!1},C$s.getPlane=function(C$s){switch(C$s){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},C$s.getCorners=function(C$s){C$O._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(C$s[0]),C$O._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(C$s[1]),C$O._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(C$s[2]),C$O._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(C$s[3]),C$O._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(C$s[4]),C$O._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(C$s[5]),C$O._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(C$s[6]),C$O._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(C$s[7])},C$s.containsPoint=function(C$s){for(var C$M=C$MM.PlaneIntersectionType_Front,C$T=C$MM.PlaneIntersectionType_Front,C$X=0;C$X<6;C$X++){switch(C$X){case 0:C$T=Collision.intersectsPlaneAndPoint(this._near,C$s);break;case 1:C$T=Collision.intersectsPlaneAndPoint(this._far,C$s);break;case 2:C$T=Collision.intersectsPlaneAndPoint(this._left,C$s);break;case 3:C$T=Collision.intersectsPlaneAndPoint(this._right,C$s);break;case 4:C$T=Collision.intersectsPlaneAndPoint(this._top,C$s);break;case 5:C$T=Collision.intersectsPlaneAndPoint(this._bottom,C$s)}switch(C$T){case C$MM.PlaneIntersectionType_Back:return 0;case C$MM.PlaneIntersectionType_Intersecting:C$M=C$MM.PlaneIntersectionType_Intersecting}}switch(C$M){case C$MM.PlaneIntersectionType_Intersecting:return 2;default:return 1}},C$s.containsBoundBox=function(C$s){for(var C$M,C$T=C$O._tempV30,C$X=C$O._tempV31,C$x=1,C$c=0;C$c<6;C$c++){if(C$M=this.getPlane(C$c),this._getBoxToPlanePVertexNVertex(C$s,C$M.normal,C$T,C$X),Collision.intersectsPlaneAndPoint(C$M,C$T)===C$MM.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(C$M,C$X)===C$MM.PlaneIntersectionType_Back&&(C$x=2)}return C$x},C$s.containsBoundSphere=function(C$s){for(var C$M=C$MM.PlaneIntersectionType_Front,C$T=C$MM.PlaneIntersectionType_Front,C$X=0;C$X<6;C$X++){switch(C$X){case 0:C$T=Collision.intersectsPlaneAndSphere(this._near,C$s);break;case 1:C$T=Collision.intersectsPlaneAndSphere(this._far,C$s);break;case 2:C$T=Collision.intersectsPlaneAndSphere(this._left,C$s);break;case 3:C$T=Collision.intersectsPlaneAndSphere(this._right,C$s);break;case 4:C$T=Collision.intersectsPlaneAndSphere(this._top,C$s);break;case 5:C$T=Collision.intersectsPlaneAndSphere(this._bottom,C$s)}switch(C$T){case C$MM.PlaneIntersectionType_Back:return 0;case C$MM.PlaneIntersectionType_Intersecting:C$M=C$MM.PlaneIntersectionType_Intersecting}}switch(C$M){case C$MM.PlaneIntersectionType_Intersecting:return 2;default:return 1}},C$s._getBoxToPlanePVertexNVertex=function(C$s,C$M,C$T,C$X){var C$x=C$s.min,C$c=C$x.elements,C$l=C$s.max,C$u=C$l.elements,C$E=C$M.elements,C$O=C$E[0],C$U=C$E[1],C$p=C$E[2];C$x.cloneTo(C$T);var C$_=C$T.elements;0<=C$O&&(C$_[0]=C$u[0]),0<=C$U&&(C$_[1]=C$u[1]),0<=C$p&&(C$_[2]=C$u[2]),C$l.cloneTo(C$X);var C$R=C$X.elements;0<=C$O&&(C$R[0]=C$c[0]),0<=C$U&&(C$R[1]=C$c[1]),0<=C$p&&(C$R[2]=C$c[2])},C$q(0,C$s,"top",function(){return this._top}),C$q(0,C$s,"matrix",function(){return this._matrix},function(C$s){this._matrix=C$s,C$O._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),C$q(0,C$s,"near",function(){return this._near}),C$q(0,C$s,"far",function(){return this._far}),C$q(0,C$s,"left",function(){return this._left}),C$q(0,C$s,"right",function(){return this._right}),C$q(0,C$s,"bottom",function(){return this._bottom}),C$O._getPlanesFromMatrix=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u=C$s.elements,C$E=C$u[0],C$O=C$u[1],C$U=C$u[2],C$p=C$u[3],C$_=C$u[4],C$R=C$u[5],C$q=C$u[6],C$G=C$u[7],C$g=C$u[8],C$f=C$u[9],C$J=C$u[10],C$P=C$u[11],C$t=C$u[12],C$r=C$u[13],C$N=C$u[14],C$w=C$u[15],C$k=C$M.normal.elements;C$k[0]=C$p+C$U,C$k[1]=C$G+C$q,C$k[2]=C$P+C$J,C$M.distance=C$w+C$N,C$M.normalize();var C$A=C$T.normal.elements;C$A[0]=C$p-C$U,C$A[1]=C$G-C$q,C$A[2]=C$P-C$J,C$T.distance=C$w-C$N,C$T.normalize();var C$D=C$X.normal.elements;C$D[0]=C$p+C$E,C$D[1]=C$G+C$_,C$D[2]=C$P+C$g,C$X.distance=C$w+C$t,C$X.normalize();var C$h=C$x.normal.elements;C$h[0]=C$p-C$E,C$h[1]=C$G-C$_,C$h[2]=C$P-C$g,C$x.distance=C$w-C$t,C$x.normalize();var C$Q=C$c.normal.elements;C$Q[0]=C$p-C$O,C$Q[1]=C$G-C$R,C$Q[2]=C$P-C$f,C$c.distance=C$w-C$r,C$c.normalize();var C$v=C$l.normal.elements;C$v[0]=C$p+C$O,C$v[1]=C$G+C$R,C$v[2]=C$P+C$f,C$l.distance=C$w+C$r,C$l.normalize()},C$O._get3PlaneInterPoint=function(C$s,C$M,C$T){var C$X=C$s.normal,C$x=C$M.normal,C$c=C$T.normal;C$lM.cross(C$x,C$c,C$O._tempV30),C$lM.cross(C$c,C$X,C$O._tempV31),C$lM.cross(C$X,C$x,C$O._tempV32);var C$l=C$lM.dot(C$X,C$O._tempV30),C$u=C$lM.dot(C$x,C$O._tempV31),C$E=C$lM.dot(C$c,C$O._tempV32);return C$lM.scale(C$O._tempV30,-C$s.distance/C$l,C$O._tempV33),C$lM.scale(C$O._tempV31,-C$M.distance/C$u,C$O._tempV34),C$lM.scale(C$O._tempV32,-C$T.distance/C$E,C$O._tempV35),C$lM.add(C$O._tempV33,C$O._tempV34,C$O._tempV36),C$lM.add(C$O._tempV35,C$O._tempV36,C$O._tempV37),C$O._tempV37},C$p(C$O,["_tempV30",function(){return this._tempV30=new C$lM},"_tempV31",function(){return this._tempV31=new C$lM},"_tempV32",function(){return this._tempV32=new C$lM},"_tempV33",function(){return this._tempV33=new C$lM},"_tempV34",function(){return this._tempV34=new C$lM},"_tempV35",function(){return this._tempV35=new C$lM},"_tempV36",function(){return this._tempV36=new C$lM},"_tempV37",function(){return this._tempV37=new C$lM}]),C$O}(),C$is=function(){function C$U(C$s,C$M){this.center=null,this.radius=NaN,this.center=C$s,this.radius=C$M}C$R(C$U,"laya.d3.math.BoundSphere");var C$s=C$U.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.toDefault=function(){this.center.toDefault(),this.radius=0},C$s.intersectsRayDistance=function(C$s){return Collision.intersectsRayAndSphereRD(C$s,this)},C$s.intersectsRayPoint=function(C$s,C$M){return Collision.intersectsRayAndSphereRP(C$s,this,C$M)},C$s.cloneTo=function(C$s){var C$M=C$s;this.center.cloneTo(C$M.center),C$M.radius=this.radius},C$s.clone=function(){var C$s=new this.constructor(new C$lM,new C$lM);return this.cloneTo(C$s),C$s},C$U.createFromSubPoints=function(C$s,C$M,C$T,C$X){if(null==C$s)throw new Error("points");if(C$M<0||C$M>=C$s.length)throw new Error("start"+C$M+"Must be in the range [0, "+(C$s.length-1)+"]");if(C$T<0||C$M+C$T>C$s.length)throw new Error("count"+C$T+"Must be in the range <= "+C$s.length+"}");var C$x=C$M+C$T,C$c=C$U._tempVector3;C$c.elements[0]=0,C$c.elements[1]=0,C$c.elements[2]=0;for(var C$l=C$M;C$l<C$x;++C$l)C$lM.add(C$s[C$l],C$c,C$c);var C$u=C$X.center;C$lM.scale(C$c,1/C$T,C$u);var C$E=0;for(C$l=C$M;C$l<C$x;++C$l){var C$O=C$lM.distanceSquared(C$u,C$s[C$l]);C$E<C$O&&(C$E=C$O)}C$X.radius=Math.sqrt(C$E)},C$U.createfromPoints=function(C$s,C$M){if(null==C$s)throw new Error("points");C$U.createFromSubPoints(C$s,0,C$s.length,C$M)},C$p(C$U,["_tempVector3",function(){return this._tempVector3=new C$lM}]),C$U}(),C$Hs=(function(){function C$s(){}C$R(C$s,"laya.d3.math.ContainmentType"),C$s.Disjoint=0,C$s.Contains=1,C$s.Intersects=2}(),function(){function C$T(){}return C$R(C$T,"laya.d3.math.MathUtils3D"),C$T.isZero=function(C$s){return Math.abs(C$s)<C$T.zeroTolerance},C$T.nearEqual=function(C$s,C$M){return!!C$T.isZero(C$s-C$M)},C$T.fastInvSqrt=function(C$s){return C$T.isZero(C$s)?C$s:1/Math.sqrt(C$s)},C$p(C$T,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),C$T}()),C$ds=function(){function C$E(){var C$s=this.elements=new Float32Array(9);C$s[0]=1,C$s[1]=0,C$s[2]=0,C$s[3]=0,C$s[4]=1,C$s[5]=0,C$s[6]=0,C$s[7]=0,C$s[8]=1}C$R(C$E,"laya.d3.math.Matrix3x3");var C$s=C$E.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.determinant=function(){var C$s=this.elements,C$M=C$s[0],C$T=C$s[1],C$X=C$s[2],C$x=C$s[3],C$c=C$s[4],C$l=C$s[5],C$u=C$s[6],C$E=C$s[7],C$O=C$s[8];return C$M*(C$O*C$c-C$l*C$E)+C$T*(-C$O*C$x+C$l*C$u)+C$X*(C$E*C$x-C$c*C$u)},C$s.translate=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements,C$x=C$s.elements,C$c=C$X[0],C$l=C$X[1],C$u=C$X[2],C$E=C$X[3],C$O=C$X[4],C$U=C$X[5],C$p=C$X[6],C$_=C$X[7],C$R=C$X[8],C$q=C$x[0],C$G=C$x[1];C$T[0]=C$c,C$T[1]=C$l,C$T[2]=C$u,C$T[3]=C$E,C$T[4]=C$O,C$T[5]=C$U,C$T[6]=C$q*C$c+C$G*C$E+C$p,C$T[7]=C$q*C$l+C$G*C$O+C$_,C$T[8]=C$q*C$u+C$G*C$U+C$R},C$s.rotate=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=C$X[4],C$O=C$X[5],C$U=C$X[6],C$p=C$X[7],C$_=C$X[8],C$R=Math.sin(C$s),C$q=Math.cos(C$s);C$T[0]=C$q*C$x+C$R*C$u,C$T[1]=C$q*C$c+C$R*C$E,C$T[2]=C$q*C$l+C$R*C$O,C$T[3]=C$q*C$u-C$R*C$x,C$T[4]=C$q*C$E-C$R*C$c,C$T[5]=C$q*C$O-C$R*C$l,C$T[6]=C$U,C$T[7]=C$p,C$T[8]=C$_},C$s.scale=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements,C$x=C$s.elements,C$c=C$x[0],C$l=C$x[1];C$T[0]=C$c*C$X[0],C$T[1]=C$c*C$X[1],C$T[2]=C$c*C$X[2],C$T[3]=C$l*C$X[3],C$T[4]=C$l*C$X[4],C$T[5]=C$l*C$X[5],C$T[6]=C$X[6],C$T[7]=C$X[7],C$T[8]=C$X[8]},C$s.invert=function(C$s){var C$M=C$s.elements,C$T=this.elements,C$X=C$T[0],C$x=C$T[1],C$c=C$T[2],C$l=C$T[3],C$u=C$T[4],C$E=C$T[5],C$O=C$T[6],C$U=C$T[7],C$p=C$T[8],C$_=C$p*C$u-C$E*C$U,C$R=-C$p*C$l+C$E*C$O,C$q=C$U*C$l-C$u*C$O,C$G=C$X*C$_+C$x*C$R+C$c*C$q;C$G||(C$s=null),C$G=1/C$G,C$M[0]=C$_*C$G,C$M[1]=(-C$p*C$x+C$c*C$U)*C$G,C$M[2]=(C$E*C$x-C$c*C$u)*C$G,C$M[3]=C$R*C$G,C$M[4]=(C$p*C$X-C$c*C$O)*C$G,C$M[5]=(-C$E*C$X+C$c*C$l)*C$G,C$M[6]=C$q*C$G,C$M[7]=(-C$U*C$X+C$x*C$O)*C$G,C$M[8]=(C$u*C$X-C$x*C$l)*C$G},C$s.transpose=function(C$s){var C$M=C$s.elements,C$T=this.elements;if(C$s===this){var C$X=C$T[1],C$x=C$T[2],C$c=C$T[5];C$M[1]=C$T[3],C$M[2]=C$T[6],C$M[3]=C$X,C$M[5]=C$T[7],C$M[6]=C$x,C$M[7]=C$c}else C$M[0]=C$T[0],C$M[1]=C$T[3],C$M[2]=C$T[6],C$M[3]=C$T[1],C$M[4]=C$T[4],C$M[5]=C$T[7],C$M[6]=C$T[2],C$M[7]=C$T[5],C$M[8]=C$T[8]},C$s.identity=function(){var C$s=this.elements;C$s[0]=1,C$s[1]=0,C$s[2]=0,C$s[3]=0,C$s[4]=1,C$s[5]=0,C$s[6]=0,C$s[7]=0,C$s[8]=1},C$s.cloneTo=function(C$s){var C$M,C$T,C$X;if((C$T=this.elements)!==(C$X=C$s.elements))for(C$M=0;C$M<9;++C$M)C$X[C$M]=C$T[C$M]},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$E.createFromTranslation=function(C$s,C$M){C$M.elements;var C$T=C$s.elements;C$M[0]=1,C$M[1]=0,C$M[2]=0,C$M[3]=0,C$M[4]=1,C$M[5]=0,C$M[6]=C$T[0],C$M[7]=C$T[1],C$M[8]=1},C$E.createFromRotation=function(C$s,C$M){var C$T=C$M.elements,C$X=Math.sin(C$s),C$x=Math.cos(C$s);C$T[0]=C$x,C$T[1]=C$X,C$T[2]=0,C$T[3]=-C$X,C$T[4]=C$x,C$T[5]=0,C$T[6]=0,C$T[7]=0,C$T[8]=1},C$E.createFromScaling=function(C$s,C$M){var C$T=C$M.elements,C$X=C$s.elements;C$T[0]=C$X[0],C$T[1]=0,C$T[2]=0,C$T[3]=0,C$T[4]=C$X[1],C$T[5]=0,C$T[6]=0,C$T[7]=0,C$T[8]=1},C$E.createFromMatrix4x4=function(C$s,C$M){C$M[0]=C$s[0],C$M[1]=C$s[1],C$M[2]=C$s[2],C$M[3]=C$s[4],C$M[4]=C$s[5],C$M[5]=C$s[6],C$M[6]=C$s[8],C$M[7]=C$s[9],C$M[8]=C$s[10]},C$E.multiply=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements,C$l=C$x[0],C$u=C$x[1],C$E=C$x[2],C$O=C$x[3],C$U=C$x[4],C$p=C$x[5],C$_=C$x[6],C$R=C$x[7],C$q=C$x[8],C$G=C$c[0],C$g=C$c[1],C$f=C$c[2],C$J=C$c[3],C$P=C$c[4],C$t=C$c[5],C$r=C$c[6],C$N=C$c[7],C$w=C$c[8];C$X[0]=C$G*C$l+C$g*C$O+C$f*C$_,C$X[1]=C$G*C$u+C$g*C$U+C$f*C$R,C$X[2]=C$G*C$E+C$g*C$p+C$f*C$q,C$X[3]=C$J*C$l+C$P*C$O+C$t*C$_,C$X[4]=C$J*C$u+C$P*C$U+C$t*C$R,C$X[5]=C$J*C$E+C$P*C$p+C$t*C$q,C$X[6]=C$r*C$l+C$N*C$O+C$w*C$_,C$X[7]=C$r*C$u+C$N*C$U+C$w*C$R,C$X[8]=C$r*C$E+C$N*C$p+C$w*C$q},C$E.lookAt=function(C$s,C$M,C$T,C$X){C$lM.subtract(C$s,C$M,C$E._tempV30),C$lM.normalize(C$E._tempV30,C$E._tempV30),C$lM.cross(C$T,C$E._tempV30,C$E._tempV31),C$lM.normalize(C$E._tempV31,C$E._tempV31),C$lM.cross(C$E._tempV30,C$E._tempV31,C$E._tempV32);var C$x=C$E._tempV30.elements,C$c=C$E._tempV31.elements,C$l=C$E._tempV32.elements,C$u=C$X.elements;C$u[0]=C$c[0],C$u[3]=C$c[1],C$u[6]=C$c[2],C$u[1]=C$l[0],C$u[4]=C$l[1],C$u[7]=C$l[2],C$u[2]=C$x[0],C$u[5]=C$x[1],C$u[8]=C$x[2]},C$E.DEFAULT=new C$E,C$p(C$E,["_tempV30",function(){return this._tempV30=new C$lM},"_tempV31",function(){return this._tempV31=new C$lM},"_tempV32",function(){return this._tempV32=new C$lM}]),C$E}(),C$sM=function(){function C$A(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p,C$_,C$R,C$q,C$G){void 0===C$s&&(C$s=1),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=1),void 0===C$l&&(C$l=0),void 0===C$u&&(C$u=0),void 0===C$E&&(C$E=0),void 0===C$O&&(C$O=0),void 0===C$U&&(C$U=1),void 0===C$p&&(C$p=0),void 0===C$_&&(C$_=0),void 0===C$R&&(C$R=0),void 0===C$q&&(C$q=0),void 0===C$G&&(C$G=1);var C$g=this.elements=new Float32Array(16);C$g[0]=C$s,C$g[1]=C$M,C$g[2]=C$T,C$g[3]=C$X,C$g[4]=C$x,C$g[5]=C$c,C$g[6]=C$l,C$g[7]=C$u,C$g[8]=C$E,C$g[9]=C$O,C$g[10]=C$U,C$g[11]=C$p,C$g[12]=C$_,C$g[13]=C$R,C$g[14]=C$q,C$g[15]=C$G}C$R(C$A,"laya.d3.math.Matrix4x4");var C$s=C$A.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.getElementByRowColumn=function(C$s,C$M){if(C$s<0||3<C$s)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(C$M<0||3<C$M)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*C$s+C$M]},C$s.setElementByRowColumn=function(C$s,C$M,C$T){if(C$s<0||3<C$s)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(C$M<0||3<C$M)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*C$s+C$M]=C$T},C$s.equalsOtherMatrix=function(C$s){var C$M=this.elements,C$T=C$s.elements;return C$Hs.nearEqual(C$M[0],C$T[0])&&C$Hs.nearEqual(C$M[1],C$T[1])&&C$Hs.nearEqual(C$M[2],C$T[2])&&C$Hs.nearEqual(C$M[3],C$T[3])&&C$Hs.nearEqual(C$M[4],C$T[4])&&C$Hs.nearEqual(C$M[5],C$T[5])&&C$Hs.nearEqual(C$M[6],C$T[6])&&C$Hs.nearEqual(C$M[7],C$T[7])&&C$Hs.nearEqual(C$M[8],C$T[8])&&C$Hs.nearEqual(C$M[9],C$T[9])&&C$Hs.nearEqual(C$M[10],C$T[10])&&C$Hs.nearEqual(C$M[11],C$T[11])&&C$Hs.nearEqual(C$M[12],C$T[12])&&C$Hs.nearEqual(C$M[13],C$T[13])&&C$Hs.nearEqual(C$M[14],C$T[14])&&C$Hs.nearEqual(C$M[15],C$T[15])},C$s.decomposeTransRotScale=function(C$s,C$M,C$T){var C$X=C$A._tempMatrix4x4;return this.decomposeTransRotMatScale(C$s,C$X,C$T)?(C$TM.createFromMatrix4x4(C$X,C$M),!0):(C$M.identity(),!1)},C$s.decomposeTransRotMatScale=function(C$s,C$M,C$T){var C$X=this.elements,C$x=C$s.elements,C$c=C$M.elements,C$l=C$T.elements;C$x[0]=C$X[12],C$x[1]=C$X[13],C$x[2]=C$X[14];var C$u=C$X[0],C$E=C$X[1],C$O=C$X[2],C$U=C$X[4],C$p=C$X[5],C$_=C$X[6],C$R=C$X[8],C$q=C$X[9],C$G=C$X[10],C$g=C$l[0]=Math.sqrt(C$u*C$u+C$E*C$E+C$O*C$O),C$f=C$l[1]=Math.sqrt(C$U*C$U+C$p*C$p+C$_*C$_),C$J=C$l[2]=Math.sqrt(C$R*C$R+C$q*C$q+C$G*C$G);if(C$Hs.isZero(C$g)||C$Hs.isZero(C$f)||C$Hs.isZero(C$J))return C$c[1]=C$c[2]=C$c[3]=C$c[4]=C$c[6]=C$c[7]=C$c[8]=C$c[9]=C$c[11]=C$c[12]=C$c[13]=C$c[14]=0,C$c[0]=C$c[5]=C$c[10]=C$c[15]=1,!1;var C$P=C$A._tempVector0,C$t=C$P.elements;C$t[0]=C$R/C$J,C$t[1]=C$q/C$J,C$t[2]=C$G/C$J;var C$r=C$A._tempVector1,C$N=C$r.elements;C$N[0]=C$u/C$g,C$N[1]=C$E/C$g,C$N[2]=C$O/C$g;var C$w=C$A._tempVector2;C$lM.cross(C$P,C$r,C$w);var C$k=C$A._tempVector1;return C$lM.cross(C$w,C$P,C$k),C$c[3]=C$c[7]=C$c[11]=C$c[12]=C$c[13]=C$c[14]=0,C$c[15]=1,C$c[0]=C$k.x,C$c[1]=C$k.y,C$c[2]=C$k.z,C$c[4]=C$w.x,C$c[5]=C$w.y,C$c[6]=C$w.z,C$c[8]=C$P.x,C$c[9]=C$P.y,C$c[10]=C$P.z,C$c[0]*C$u+C$c[1]*C$E+C$c[2]*C$O<0&&(C$l[0]=-C$g),C$c[4]*C$U+C$c[5]*C$p+C$c[6]*C$_<0&&(C$l[1]=-C$f),C$c[8]*C$R+C$c[9]*C$q+C$c[10]*C$G<0&&(C$l[2]=-C$J),!0},C$s.decomposeYawPitchRoll=function(C$s){var C$M=C$s.elements,C$T=Math.asin(-this.elements[9]);C$M[1]=C$T,Math.cos(C$T)>C$Hs.zeroTolerance?(C$M[2]=Math.atan2(this.elements[1],this.elements[5]),C$M[0]=Math.atan2(this.elements[8],this.elements[10])):(C$M[2]=Math.atan2(-this.elements[4],this.elements[0]),C$M[0]=0)},C$s.normalize=function(){var C$s=this.elements,C$M=C$s[0],C$T=C$s[1],C$X=C$s[2],C$x=Math.sqrt(C$M*C$M+C$T*C$T+C$X*C$X);if(!C$x)return C$s[0]=0,C$s[1]=0,void(C$s[2]=0);1!=C$x&&(C$x=1/C$x,C$s[0]=C$M*C$x,C$s[1]=C$T*C$x,C$s[2]=C$X*C$x)},C$s.transpose=function(){var C$s,C$M;return C$M=(C$s=this.elements)[1],C$s[1]=C$s[4],C$s[4]=C$M,C$M=C$s[2],C$s[2]=C$s[8],C$s[8]=C$M,C$M=C$s[3],C$s[3]=C$s[12],C$s[12]=C$M,C$M=C$s[6],C$s[6]=C$s[9],C$s[9]=C$M,C$M=C$s[7],C$s[7]=C$s[13],C$s[13]=C$M,C$M=C$s[11],C$s[11]=C$s[14],C$s[14]=C$M,this},C$s.invert=function(C$s){var C$M=this.elements,C$T=C$s.elements,C$X=C$M[0],C$x=C$M[1],C$c=C$M[2],C$l=C$M[3],C$u=C$M[4],C$E=C$M[5],C$O=C$M[6],C$U=C$M[7],C$p=C$M[8],C$_=C$M[9],C$R=C$M[10],C$q=C$M[11],C$G=C$M[12],C$g=C$M[13],C$f=C$M[14],C$J=C$M[15],C$P=C$X*C$E-C$x*C$u,C$t=C$X*C$O-C$c*C$u,C$r=C$X*C$U-C$l*C$u,C$N=C$x*C$O-C$c*C$E,C$w=C$x*C$U-C$l*C$E,C$k=C$c*C$U-C$l*C$O,C$A=C$p*C$g-C$_*C$G,C$D=C$p*C$f-C$R*C$G,C$h=C$p*C$J-C$q*C$G,C$Q=C$_*C$f-C$R*C$g,C$v=C$_*C$J-C$q*C$g,C$z=C$R*C$J-C$q*C$f,C$B=C$P*C$z-C$t*C$v+C$r*C$Q+C$N*C$h-C$w*C$D+C$k*C$A;0!==Math.abs(C$B)&&(C$B=1/C$B,C$T[0]=(C$E*C$z-C$O*C$v+C$U*C$Q)*C$B,C$T[1]=(C$c*C$v-C$x*C$z-C$l*C$Q)*C$B,C$T[2]=(C$g*C$k-C$f*C$w+C$J*C$N)*C$B,C$T[3]=(C$R*C$w-C$_*C$k-C$q*C$N)*C$B,C$T[4]=(C$O*C$h-C$u*C$z-C$U*C$D)*C$B,C$T[5]=(C$X*C$z-C$c*C$h+C$l*C$D)*C$B,C$T[6]=(C$f*C$r-C$G*C$k-C$J*C$t)*C$B,C$T[7]=(C$p*C$k-C$R*C$r+C$q*C$t)*C$B,C$T[8]=(C$u*C$v-C$E*C$h+C$U*C$A)*C$B,C$T[9]=(C$x*C$h-C$X*C$v-C$l*C$A)*C$B,C$T[10]=(C$G*C$w-C$g*C$r+C$J*C$P)*C$B,C$T[11]=(C$_*C$r-C$p*C$w-C$q*C$P)*C$B,C$T[12]=(C$E*C$D-C$u*C$Q-C$O*C$A)*C$B,C$T[13]=(C$X*C$Q-C$x*C$D+C$c*C$A)*C$B,C$T[14]=(C$g*C$t-C$G*C$N-C$f*C$P)*C$B,C$T[15]=(C$p*C$N-C$_*C$t+C$R*C$P)*C$B)},C$s.identity=function(){var C$s=this.elements;C$s[1]=C$s[2]=C$s[3]=C$s[4]=C$s[6]=C$s[7]=C$s[8]=C$s[9]=C$s[11]=C$s[12]=C$s[13]=C$s[14]=0,C$s[0]=C$s[5]=C$s[10]=C$s[15]=1},C$s.cloneTo=function(C$s){var C$M,C$T,C$X;if((C$T=this.elements)!==(C$X=C$s.elements))for(C$M=0;C$M<16;++C$M)C$X[C$M]=C$T[C$M]},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$s.getTranslationVector=function(C$s){var C$M=this.elements,C$T=C$s.elements;C$T[0]=C$M[12],C$T[1]=C$M[13],C$T[2]=C$M[14]},C$s.setTranslationVector=function(C$s){var C$M=this.elements,C$T=C$s.elements;C$M[12]=C$T[0],C$M[13]=C$T[1],C$M[14]=C$T[2]},C$s.getForward=function(C$s){var C$M=this.elements,C$T=C$s.elements;C$T[0]=-C$M[8],C$T[1]=-C$M[9],C$T[2]=-C$M[10]},C$s.setForward=function(C$s){var C$M=this.elements,C$T=C$s.elements;C$M[8]=-C$T[0],C$M[9]=-C$T[1],C$M[10]=-C$T[2]},C$A.createRotationX=function(C$s,C$M){var C$T=C$M.elements,C$X=Math.sin(C$s),C$x=Math.cos(C$s);C$T[1]=C$T[2]=C$T[3]=C$T[4]=C$T[7]=C$T[8]=C$T[11]=C$T[12]=C$T[13]=C$T[14]=0,C$T[0]=C$T[15]=1,C$T[5]=C$T[10]=C$x,C$T[6]=C$X,C$T[9]=-C$X},C$A.createRotationY=function(C$s,C$M){var C$T=C$M.elements,C$X=Math.sin(C$s),C$x=Math.cos(C$s);C$T[1]=C$T[3]=C$T[4]=C$T[6]=C$T[7]=C$T[9]=C$T[11]=C$T[12]=C$T[13]=C$T[14]=0,C$T[5]=C$T[15]=1,C$T[0]=C$T[10]=C$x,C$T[2]=-C$X,C$T[8]=C$X},C$A.createRotationZ=function(C$s,C$M){var C$T=C$M.elements,C$X=Math.sin(C$s),C$x=Math.cos(C$s);C$T[2]=C$T[3]=C$T[6]=C$T[7]=C$T[8]=C$T[9]=C$T[11]=C$T[12]=C$T[13]=C$T[14]=0,C$T[10]=C$T[15]=1,C$T[0]=C$T[5]=C$x,C$T[1]=C$X,C$T[4]=-C$X},C$A.createRotationYawPitchRoll=function(C$s,C$M,C$T,C$X){C$TM.createFromYawPitchRoll(C$s,C$M,C$T,C$A._tempQuaternion),C$A.createRotationQuaternion(C$A._tempQuaternion,C$X)},C$A.createRotationAxis=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=Math.cos(C$M),C$E=Math.sin(C$M),C$O=C$x*C$x,C$U=C$c*C$c,C$p=C$l*C$l,C$_=C$x*C$c,C$R=C$x*C$l,C$q=C$c*C$l,C$G=C$T.elements;C$G[3]=C$G[7]=C$G[11]=C$G[12]=C$G[13]=C$G[14]=0,C$G[15]=1,C$G[0]=C$O+C$u*(1-C$O),C$G[1]=C$_-C$u*C$_+C$E*C$l,C$G[2]=C$R-C$u*C$R-C$E*C$c,C$G[4]=C$_-C$u*C$_-C$E*C$l,C$G[5]=C$U+C$u*(1-C$U),C$G[6]=C$q-C$u*C$q+C$E*C$x,C$G[8]=C$R-C$u*C$R+C$E*C$c,C$G[9]=C$q-C$u*C$q-C$E*C$x,C$G[10]=C$p+C$u*(1-C$p)},C$A.createRotationQuaternion=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0],C$c=C$T[1],C$l=C$T[2],C$u=C$T[3],C$E=C$x*C$x,C$O=C$c*C$c,C$U=C$l*C$l,C$p=C$x*C$c,C$_=C$l*C$u,C$R=C$l*C$x,C$q=C$c*C$u,C$G=C$c*C$l,C$g=C$x*C$u;C$X[3]=C$X[7]=C$X[11]=C$X[12]=C$X[13]=C$X[14]=0,C$X[15]=1,C$X[0]=1-2*(C$O+C$U),C$X[1]=2*(C$p+C$_),C$X[2]=2*(C$R-C$q),C$X[4]=2*(C$p-C$_),C$X[5]=1-2*(C$U+C$E),C$X[6]=2*(C$G+C$g),C$X[8]=2*(C$R+C$q),C$X[9]=2*(C$G-C$g),C$X[10]=1-2*(C$O+C$E)},C$A.createTranslate=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;C$X[4]=C$X[8]=C$X[1]=C$X[9]=C$X[2]=C$X[6]=C$X[3]=C$X[7]=C$X[11]=0,C$X[0]=C$X[5]=C$X[10]=C$X[15]=1,C$X[12]=C$T[0],C$X[13]=C$T[1],C$X[14]=C$T[2]},C$A.createScaling=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;C$X[0]=C$T[0],C$X[5]=C$T[1],C$X[10]=C$T[2],C$X[1]=C$X[4]=C$X[8]=C$X[12]=C$X[9]=C$X[13]=C$X[2]=C$X[6]=C$X[14]=C$X[3]=C$X[7]=C$X[11]=0,C$X[15]=1},C$A.multiply=function(C$s,C$M,C$T){var C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U;for(C$x=C$T.elements,C$c=C$s.elements,C$x===(C$l=C$M.elements)&&(C$l=C$l.slice()),C$X=0;C$X<4;C$X++)C$u=C$c[C$X],C$E=C$c[C$X+4],C$O=C$c[C$X+8],C$U=C$c[C$X+12],C$x[C$X]=C$u*C$l[0]+C$E*C$l[1]+C$O*C$l[2]+C$U*C$l[3],C$x[C$X+4]=C$u*C$l[4]+C$E*C$l[5]+C$O*C$l[6]+C$U*C$l[7],C$x[C$X+8]=C$u*C$l[8]+C$E*C$l[9]+C$O*C$l[10]+C$U*C$l[11],C$x[C$X+12]=C$u*C$l[12]+C$E*C$l[13]+C$O*C$l[14]+C$U*C$l[15]},C$A.createFromQuaternion=function(C$s,C$M){var C$T=C$M.elements,C$X=C$s.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=C$x+C$x,C$O=C$c+C$c,C$U=C$l+C$l,C$p=C$x*C$E,C$_=C$c*C$E,C$R=C$c*C$O,C$q=C$l*C$E,C$G=C$l*C$O,C$g=C$l*C$U,C$f=C$u*C$E,C$J=C$u*C$O,C$P=C$u*C$U;C$T[0]=1-C$R-C$g,C$T[1]=C$_+C$P,C$T[2]=C$q-C$J,C$T[3]=0,C$T[4]=C$_-C$P,C$T[5]=1-C$p-C$g,C$T[6]=C$G+C$f,C$T[7]=0,C$T[8]=C$q+C$J,C$T[9]=C$G-C$f,C$T[10]=1-C$p-C$R,C$T[11]=0,C$T[12]=0,C$T[13]=0,C$T[14]=0,C$T[15]=1},C$A.createAffineTransformation=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements,C$c=C$M.elements,C$l=C$T.elements,C$u=C$X.elements,C$E=C$c[0],C$O=C$c[1],C$U=C$c[2],C$p=C$c[3],C$_=C$E+C$E,C$R=C$O+C$O,C$q=C$U+C$U,C$G=C$E*C$_,C$g=C$E*C$R,C$f=C$E*C$q,C$J=C$O*C$R,C$P=C$O*C$q,C$t=C$U*C$q,C$r=C$p*C$_,C$N=C$p*C$R,C$w=C$p*C$q,C$k=C$l[0],C$A=C$l[1],C$D=C$l[2];C$u[0]=(1-(C$J+C$t))*C$k,C$u[1]=(C$g+C$w)*C$k,C$u[2]=(C$f-C$N)*C$k,C$u[3]=0,C$u[4]=(C$g-C$w)*C$A,C$u[5]=(1-(C$G+C$t))*C$A,C$u[6]=(C$P+C$r)*C$A,C$u[7]=0,C$u[8]=(C$f+C$N)*C$D,C$u[9]=(C$P-C$r)*C$D,C$u[10]=(1-(C$G+C$J))*C$D,C$u[11]=0,C$u[12]=C$x[0],C$u[13]=C$x[1],C$u[14]=C$x[2],C$u[15]=1},C$A.createLookAt=function(C$s,C$M,C$T,C$X){var C$x=C$X.elements,C$c=C$A._tempVector0,C$l=C$A._tempVector1,C$u=C$A._tempVector2;C$lM.subtract(C$s,C$M,C$u),C$lM.normalize(C$u,C$u),C$lM.cross(C$T,C$u,C$c),C$lM.normalize(C$c,C$c),C$lM.cross(C$u,C$c,C$l),C$X.identity(),C$x[0]=C$c.x,C$x[4]=C$c.y,C$x[8]=C$c.z,C$x[1]=C$l.x,C$x[5]=C$l.y,C$x[9]=C$l.z,C$x[2]=C$u.x,C$x[6]=C$u.y,C$x[10]=C$u.z,C$x[12]=-C$lM.dot(C$c,C$s),C$x[13]=-C$lM.dot(C$l,C$s),C$x[14]=-C$lM.dot(C$u,C$s)},C$A.createPerspective=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$x.elements,C$l=1/Math.tan(C$s/2),C$u=1/(C$T-C$X);C$c[0]=C$l/C$M,C$c[5]=C$l,C$c[10]=(C$X+C$T)*C$u,C$c[11]=-1,C$c[14]=2*C$X*C$T*C$u,C$c[1]=C$c[2]=C$c[3]=C$c[4]=C$c[6]=C$c[7]=C$c[8]=C$c[9]=C$c[12]=C$c[13]=C$c[15]=0},C$A.createOrthoOffCenterRH=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u=C$l.elements,C$E=1/(C$s-C$M),C$O=1/(C$T-C$X),C$U=1/(C$x-C$c);C$u[1]=C$u[2]=C$u[3]=C$u[4]=C$u[6]=C$u[7]=C$u[8]=C$u[9]=C$u[11]=0,C$u[15]=1,C$u[0]=-2*C$E,C$u[5]=-2*C$O,C$u[10]=2*C$U,C$u[12]=(C$s+C$M)*C$E,C$u[13]=(C$X+C$T)*C$O,C$u[14]=(C$c+C$x)*C$U},C$A.translation=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;C$X[0]=C$X[5]=C$X[10]=C$X[15]=1,C$X[12]=C$T[0],C$X[13]=C$T[1],C$X[14]=C$T[2]},C$p(C$A,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new C$A},"_tempVector0",function(){return this._tempVector0=new C$lM},"_tempVector1",function(){return this._tempVector1=new C$lM},"_tempVector2",function(){return this._tempVector2=new C$lM},"_tempQuaternion",function(){return this._tempQuaternion=new C$TM},"DEFAULT",function(){return this.DEFAULT=new C$A},"ZERO",function(){return this.ZERO=new C$A(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),C$A}(),C$MM=(function(){function C$P(C$s,C$M){this.extents=null,this.transformation=null,this.extents=C$s,this.transformation=C$M}C$R(C$P,"laya.d3.math.OrientedBoundBox");var C$s=C$P.prototype;C$s.getCorners=function(C$s){var C$M=C$P._tempV30.elements,C$T=C$P._tempV31.elements,C$X=C$P._tempV32.elements,C$x=this.extents.elements;C$M[0]=C$x[0],C$M[1]=C$M[2]=0,C$T[1]=C$x[1],C$T[0]=C$T[2]=0,C$X[2]=C$x[2],C$X[0]=C$X[1]=0,C$lM.TransformNormal(C$P._tempV30,this.transformation,C$P._tempV30),C$lM.TransformNormal(C$P._tempV31,this.transformation,C$P._tempV31),C$lM.TransformNormal(C$P._tempV32,this.transformation,C$P._tempV32);var C$c=C$P._tempV33;this.transformation.getTranslationVector(C$c),C$s.length=8,C$lM.add(C$c,C$P._tempV30,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV32,C$s[0]),C$lM.add(C$c,C$P._tempV30,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV32,C$s[1]),C$lM.subtract(C$c,C$P._tempV30,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV32,C$s[2]),C$lM.subtract(C$c,C$P._tempV30,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV32,C$s[3]),C$lM.add(C$c,C$P._tempV30,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV32,C$s[4]),C$lM.add(C$c,C$P._tempV30,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV32,C$s[5]),C$lM.subtract(C$c,C$P._tempV30,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV32,C$s[6]),C$lM.subtract(C$c,C$P._tempV30,C$P._tempV34),C$lM.subtract(C$P._tempV34,C$P._tempV31,C$P._tempV34),C$lM.add(C$P._tempV34,C$P._tempV32,C$s[7])},C$s.transform=function(C$s){C$sM.multiply(this.transformation,C$s,this.transformation)},C$s.scale=function(C$s){C$lM.multiply(this.extents,C$s,this.extents)},C$s.translate=function(C$s){this.transformation.getTranslationVector(C$P._tempV30),C$lM.add(C$P._tempV30,C$s,C$P._tempV31),this.transformation.setTranslationVector(C$P._tempV31)},C$s.Size=function(C$s){C$lM.scale(this.extents,2,C$s)},C$s.getSize=function(C$s){var C$M=this.extents.elements;C$P._tempV30.x=C$M[0],C$P._tempV31.y=C$M[1],C$P._tempV32.z=C$M[2],C$lM.TransformNormal(C$P._tempV30,this.transformation,C$P._tempV30),C$lM.TransformNormal(C$P._tempV31,this.transformation,C$P._tempV31),C$lM.TransformNormal(C$P._tempV31,this.transformation,C$P._tempV32);var C$T=C$s.elements;C$T[0]=C$lM.scalarLength(C$P._tempV30),C$T[1]=C$lM.scalarLength(C$P._tempV31),C$T[2]=C$lM.scalarLength(C$P._tempV32)},C$s.getSizeSquared=function(C$s){var C$M=this.extents.elements;C$P._tempV30.x=C$M[0],C$P._tempV31.y=C$M[1],C$P._tempV32.z=C$M[2],C$lM.TransformNormal(C$P._tempV30,this.transformation,C$P._tempV30),C$lM.TransformNormal(C$P._tempV31,this.transformation,C$P._tempV31),C$lM.TransformNormal(C$P._tempV31,this.transformation,C$P._tempV32);var C$T=C$s.elements;C$T[0]=C$lM.scalarLengthSquared(C$P._tempV30),C$T[1]=C$lM.scalarLengthSquared(C$P._tempV31),C$T[2]=C$lM.scalarLengthSquared(C$P._tempV32)},C$s.getCenter=function(C$s){this.transformation.getTranslationVector(C$s)},C$s.containsPoint=function(C$s){var C$M=this.extents.elements,C$T=C$M[0],C$X=C$M[1],C$x=C$M[2];this.transformation.invert(C$P._tempM0),C$lM.transformCoordinate(C$s,C$P._tempM0,C$P._tempV30);var C$c=C$P._tempV30.elements,C$l=Math.abs(C$c[0]),C$u=Math.abs(C$c[1]),C$E=Math.abs(C$c[2]);return C$Hs.nearEqual(C$l,C$T)&&C$Hs.nearEqual(C$u,C$X)&&C$Hs.nearEqual(C$E,C$x)?2:C$l<C$T&&C$u<C$X&&C$E<C$x?1:0},C$s.containsPoints=function(C$s){var C$M=this.extents.elements,C$T=C$M[0],C$X=C$M[1],C$x=C$M[2];this.transformation.invert(C$P._tempM0);for(var C$c=!0,C$l=!1,C$u=0;C$u<C$s.length;C$u++){C$lM.transformCoordinate(C$s[C$u],C$P._tempM0,C$P._tempV30);var C$E=C$P._tempV30.elements,C$O=Math.abs(C$E[0]),C$U=Math.abs(C$E[1]),C$p=Math.abs(C$E[2]);C$Hs.nearEqual(C$O,C$T)&&C$Hs.nearEqual(C$U,C$X)&&C$Hs.nearEqual(C$p,C$x)&&(C$l=!0),C$O<C$T&&C$U<C$X&&C$p<C$x?C$l=!0:C$c=!1}return C$c?1:C$l?2:0},C$s.containsSphere=function(C$s,C$M){void 0===C$M&&(C$M=!1);var C$T=this.extents.elements,C$X=C$T[0],C$x=C$T[1],C$c=C$T[2],C$l=C$s.radius;this.transformation.invert(C$P._tempM0),C$lM.transformCoordinate(C$s.center,C$P._tempM0,C$P._tempV30);var C$u=NaN;if(C$u=C$M?C$l:(C$lM.scale(C$lM.UnitX,C$l,C$P._tempV31),C$lM.TransformNormal(C$P._tempV31,C$P._tempM0,C$P._tempV31),C$lM.scalarLength(C$P._tempV31)),C$lM.scale(this.extents,-1,C$P._tempV32),C$lM.Clamp(C$P._tempV30,C$P._tempV32,this.extents,C$P._tempV33),C$u*C$u<C$lM.distanceSquared(C$P._tempV30,C$P._tempV33))return 0;var C$E=C$P._tempV30.elements,C$O=C$E[0],C$U=C$E[1],C$p=C$E[2],C$_=C$P._tempV32.elements,C$R=C$_[0],C$q=C$_[1],C$G=C$_[2];return C$R+C$u<=C$O&&C$O<=C$X-C$u&&C$u<C$X-C$R&&C$q+C$u<=C$U&&C$U<=C$x-C$u&&C$u<C$x-C$q&&C$G+C$u<=C$p&&C$p<=C$c-C$u&&C$u<C$c-C$G?1:2},C$s.containsOrientedBoundBox=function(C$s){var C$M=0,C$T=0;C$s.getCorners(C$P._corners);var C$X=this.containsPoints(C$P._corners);if(0!=C$X)return C$X;var C$x=this.extents.elements;C$s.extents.cloneTo(C$P._tempV35);var C$c=C$P._tempV35.elements;C$P._getRows(this.transformation,C$P._rows1),C$P._getRows(C$s.transformation,C$P._rows2);var C$l=NaN;for(C$M=0;C$M<4;C$M++)for(C$T=0;C$T<4;C$T++)3==C$M||3==C$T?(C$P._tempM0.setElementByRowColumn(C$M,C$T,0),C$P._tempM1.setElementByRowColumn(C$M,C$T,0)):(C$l=C$lM.dot(C$P._rows1[C$M],C$P._rows2[C$T]),C$P._tempM0.setElementByRowColumn(C$M,C$T,C$l),C$P._tempM1.setElementByRowColumn(C$M,C$T,Math.abs(C$l)));C$s.getCenter(C$P._tempV34),this.getCenter(C$P._tempV36),C$lM.subtract(C$P._tempV34,C$P._tempV36,C$P._tempV30);var C$u=C$P._tempV31.elements;C$u[0]=C$lM.dot(C$P._tempV30,C$P._rows1[0]),C$u[1]=C$lM.dot(C$P._tempV30,C$P._rows1[1]),C$u[2]=C$lM.dot(C$P._tempV30,C$P._rows1[2]);var C$E=C$P._tempV32.elements,C$O=C$P._tempV33.elements;for(C$M=0;C$M<3;C$M++)if(C$E[0]=C$P._tempM1.getElementByRowColumn(C$M,0),C$E[1]=C$P._tempM1.getElementByRowColumn(C$M,1),C$E[2]=C$P._tempM1.getElementByRowColumn(C$M,2),C$x[C$M]+C$lM.dot(C$P._tempV35,C$P._tempV32)<Math.abs(C$u[C$M]))return 0;for(C$T=0;C$T<3;C$T++)if(C$E[0]=C$P._tempM1.getElementByRowColumn(0,C$T),C$E[1]=C$P._tempM1.getElementByRowColumn(1,C$T),C$E[2]=C$P._tempM1.getElementByRowColumn(2,C$T),C$O[0]=C$P._tempM0.getElementByRowColumn(0,C$T),C$O[1]=C$P._tempM0.getElementByRowColumn(1,C$T),C$O[2]=C$P._tempM0.getElementByRowColumn(2,C$T),C$lM.dot(this.extents,C$P._tempV32)+C$c[C$T]<Math.abs(C$lM.dot(C$P._tempV31,C$P._tempV33)))return 0;for(C$M=0;C$M<3;C$M++)for(C$T=0;C$T<3;C$T++){var C$U=(C$M+1)%3,C$p=(C$M+2)%3,C$_=(C$T+1)%3,C$R=(C$T+2)%3;if(C$x[C$U]*C$P._tempM1.getElementByRowColumn(C$p,C$T)+C$x[C$p]*C$P._tempM1.getElementByRowColumn(C$U,C$T)+(C$c[C$_]*C$P._tempM1.getElementByRowColumn(C$M,C$R)+C$c[C$R]*C$P._tempM1.getElementByRowColumn(C$M,C$_))<Math.abs(C$u[C$p]*C$P._tempM0.getElementByRowColumn(C$U,C$T)-C$u[C$U]*C$P._tempM0.getElementByRowColumn(C$p,C$T)))return 0}return 2},C$s.containsLine=function(C$s,C$M){C$P._corners[0]=C$s,C$P._corners[1]=C$M;var C$T=this.containsPoints(C$P._corners);if(0!=C$T)return C$T;var C$X=this.extents.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2];this.transformation.invert(C$P._tempM0),C$lM.transformCoordinate(C$s,C$P._tempM0,C$P._tempV30),C$lM.transformCoordinate(C$M,C$P._tempM0,C$P._tempV31),C$lM.add(C$P._tempV30,C$P._tempV31,C$P._tempV32),C$lM.scale(C$P._tempV32,.5,C$P._tempV32),C$lM.subtract(C$P._tempV30,C$P._tempV32,C$P._tempV33);var C$u=C$P._tempV33.elements,C$E=C$u[0],C$O=C$u[1],C$U=C$u[2],C$p=C$P._tempV34.elements,C$_=C$p[0]=Math.abs(C$u[0]),C$R=C$p[1]=Math.abs(C$u[1]),C$q=C$p[2]=Math.abs(C$u[2]),C$G=C$P._tempV32.elements,C$g=C$G[0],C$f=C$G[1],C$J=C$G[2];return Math.abs(C$g)>C$x+C$_?0:Math.abs(C$f)>C$c+C$R?0:Math.abs(C$J)>C$l+C$q?0:Math.abs(C$f*C$U-C$J*C$O)>C$c*C$q+C$l*C$R?0:Math.abs(C$g*C$U-C$J*C$E)>C$x*C$q+C$l*C$_?0:Math.abs(C$g*C$O-C$f*C$E)>C$x*C$R+C$c*C$_?0:2},C$s.containsBoundBox=function(C$s){var C$M=0,C$T=0,C$X=C$s.min,C$x=C$s.max;C$s.getCorners(C$P._corners);var C$c=this.containsPoints(C$P._corners);if(0!=C$c)return C$c;C$lM.subtract(C$x,C$X,C$P._tempV30),C$lM.scale(C$P._tempV30,.5,C$P._tempV30),C$lM.add(C$X,C$P._tempV30,C$P._tempV30),C$lM.subtract(C$x,C$P._tempV30,C$P._tempV31);var C$l=this.extents.elements,C$u=C$P._tempV31.elements;C$P._getRows(this.transformation,C$P._rows1),this.transformation.invert(C$P._tempM0);for(C$M=0;C$M<3;C$M++)for(C$T=0;C$T<3;C$T++)C$P._tempM1.setElementByRowColumn(C$M,C$T,Math.abs(C$P._tempM0.getElementByRowColumn(C$M,C$T)));this.getCenter(C$P._tempV35),C$lM.subtract(C$P._tempV30,C$P._tempV35,C$P._tempV32);var C$E=C$P._tempV31.elements;C$E[0]=C$lM.dot(C$P._tempV32,C$P._rows1[0]),C$E[1]=C$lM.dot(C$P._tempV32,C$P._rows1[1]),C$E[2]=C$lM.dot(C$P._tempV32,C$P._rows1[2]);var C$O=C$P._tempV33.elements,C$U=C$P._tempV34.elements;for(C$M=0;C$M<3;C$M++)if(C$O[0]=C$P._tempM1.getElementByRowColumn(C$M,0),C$O[1]=C$P._tempM1.getElementByRowColumn(C$M,1),C$O[2]=C$P._tempM1.getElementByRowColumn(C$M,2),C$l[C$M]+C$lM.dot(C$P._tempV31,C$P._tempV33)<Math.abs(C$E[C$M]))return 0;for(C$T=0;C$T<3;C$T++)if(C$O[0]=C$P._tempM1.getElementByRowColumn(0,C$T),C$O[1]=C$P._tempM1.getElementByRowColumn(1,C$T),C$O[2]=C$P._tempM1.getElementByRowColumn(2,C$T),C$U[0]=C$P._tempM0.getElementByRowColumn(0,C$T),C$U[1]=C$P._tempM0.getElementByRowColumn(1,C$T),C$U[2]=C$P._tempM0.getElementByRowColumn(2,C$T),C$lM.dot(this.extents,C$P._tempV33)+C$u[C$T]<Math.abs(C$lM.dot(C$P._tempV31,C$P._tempV34)))return 0;for(C$M=0;C$M<3;C$M++)for(C$T=0;C$T<3;C$T++){var C$p=(C$M+1)%3,C$_=(C$M+2)%3,C$R=(C$T+1)%3,C$q=(C$T+2)%3;if(C$l[C$p]*C$P._tempM1.getElementByRowColumn(C$_,C$T)+C$l[C$_]*C$P._tempM1.getElementByRowColumn(C$p,C$T)+(C$u[C$R]*C$P._tempM1.getElementByRowColumn(C$M,C$q)+C$u[C$q]*C$P._tempM1.getElementByRowColumn(C$M,C$R))<Math.abs(C$E[C$_]*C$P._tempM0.getElementByRowColumn(C$p,C$T)-C$E[C$p]*C$P._tempM0.getElementByRowColumn(C$_,C$T)))return 0}return 2},C$s.intersectsRay=function(C$s,C$M){C$lM.scale(this.extents,-1,C$P._tempV30),this.transformation.invert(C$P._tempM0),C$lM.TransformNormal(C$s.direction,C$P._tempM0,C$P._ray.direction),C$lM.transformCoordinate(C$s.origin,C$P._tempM0,C$P._ray.origin),C$P._boxBound1.min=C$P._tempV30,C$P._boxBound1.max=this.extents;var C$T=Collision.intersectsRayAndBoxRP(C$P._ray,C$P._boxBound1,C$M);return-1!==C$T&&C$lM.transformCoordinate(C$M,this.transformation,C$M),C$T},C$s._getLocalCorners=function(C$s){C$s.length=8;var C$M=this.extents.elements;C$P._tempV30.x=C$M[0],C$P._tempV31.y=C$M[1],C$P._tempV32.z=C$M[2],C$lM.add(C$P._tempV30,C$P._tempV31,C$P._tempV33),C$lM.add(C$P._tempV33,C$P._tempV32,C$s[0]),C$lM.add(C$P._tempV30,C$P._tempV31,C$P._tempV33),C$lM.subtract(C$P._tempV33,C$P._tempV32,C$s[1]),C$lM.subtract(C$P._tempV31,C$P._tempV30,C$P._tempV33),C$lM.subtract(C$P._tempV33,C$P._tempV30,C$s[2]),C$lM.subtract(C$P._tempV31,C$P._tempV30,C$P._tempV33),C$lM.add(C$P._tempV33,C$P._tempV32,C$s[3]),C$lM.subtract(C$P._tempV30,C$P._tempV31,C$P._tempV33),C$lM.add(C$P._tempV33,C$P._tempV32,C$s[4]),C$lM.subtract(C$P._tempV30,C$P._tempV31,C$P._tempV33),C$lM.subtract(C$P._tempV33,C$P._tempV32,C$s[5]),C$lM.scale(C$s[0],-1,C$s[6]),C$lM.subtract(C$P._tempV32,C$P._tempV30,C$P._tempV33),C$lM.subtract(C$P._tempV33,C$P._tempV31,C$s[7])},C$s.equals=function(C$s){return this.extents==C$s.extents&&this.transformation==C$s.transformation},C$s.cloneTo=function(C$s){var C$M=C$s;this.extents.cloneTo(C$M.extents),this.transformation.cloneTo(C$M.transformation)},C$P.createByBoundBox=function(C$s,C$M){var C$T=C$s.min,C$X=C$s.max;C$lM.subtract(C$X,C$T,C$P._tempV30),C$lM.scale(C$P._tempV30,.5,C$P._tempV30),C$lM.add(C$T,C$P._tempV30,C$P._tempV31),C$lM.subtract(C$X,C$P._tempV31,C$P._tempV32),C$sM.translation(C$P._tempV31,C$P._tempM0);var C$x=C$P._tempV32.clone(),C$c=C$P._tempM0.clone();C$M.extents=C$x,C$M.transformation=C$c},C$P.createByMinAndMaxVertex=function(C$s,C$M){return C$lM.subtract(C$M,C$s,C$P._tempV30),C$lM.scale(C$P._tempV30,.5,C$P._tempV30),C$lM.add(C$s,C$P._tempV30,C$P._tempV31),C$lM.subtract(C$M,C$P._tempV31,C$P._tempV32),C$sM.translation(C$P._tempV31,C$P._tempM0),new C$P(C$P._tempV32,C$P._tempM0)},C$P._getRows=function(C$s,C$M){C$M.length=3;var C$T=C$s.elements,C$X=C$M[0].elements;C$X[0]=C$T[0],C$X[1]=C$T[1],C$X[2]=C$T[2];var C$x=C$M[1].elements;C$x[0]=C$T[4],C$x[1]=C$T[5],C$x[2]=C$T[6];var C$c=C$M[2].elements;C$c[0]=C$T[8],C$c[1]=C$T[9],C$c[2]=C$T[10]},C$P.getObbtoObbMatrix4x4=function(C$s,C$M,C$T,C$X){var C$x=C$s.transformation,C$c=C$M.transformation;if(C$T){C$P._getRows(C$x,C$P._rows1),C$P._getRows(C$c,C$P._rows2);for(var C$l=0;C$l<3;C$l++)for(var C$u=0;C$u<3;C$u++)C$X.setElementByRowColumn(C$l,C$u,C$lM.dot(C$P._rows2[C$l],C$P._rows1[C$u]));C$M.getCenter(C$P._tempV30),C$s.getCenter(C$P._tempV31),C$lM.subtract(C$P._tempV30,C$P._tempV31,C$P._tempV32);var C$E=C$X.elements;C$E[12]=C$lM.dot(C$P._tempV32,C$P._rows1[0]),C$E[13]=C$lM.dot(C$P._tempV32,C$P._rows1[1]),C$E[14]=C$lM.dot(C$P._tempV32,C$P._rows1[2]),C$E[15]=1}else C$x.invert(C$P._tempM0),C$sM.multiply(C$c,C$P._tempM0,C$X)},C$P.merge=function(C$s,C$M,C$T){var C$X=C$s.extents,C$x=C$s.transformation;C$P.getObbtoObbMatrix4x4(C$s,C$M,C$T,C$P._tempM0),C$M._getLocalCorners(C$P._corners),C$lM.transformCoordinate(C$P._corners[0],C$P._tempM0,C$P._corners[0]),C$lM.transformCoordinate(C$P._corners[1],C$P._tempM0,C$P._corners[1]),C$lM.transformCoordinate(C$P._corners[2],C$P._tempM0,C$P._corners[2]),C$lM.transformCoordinate(C$P._corners[3],C$P._tempM0,C$P._corners[3]),C$lM.transformCoordinate(C$P._corners[4],C$P._tempM0,C$P._corners[4]),C$lM.transformCoordinate(C$P._corners[5],C$P._tempM0,C$P._corners[5]),C$lM.transformCoordinate(C$P._corners[6],C$P._tempM0,C$P._corners[6]),C$lM.transformCoordinate(C$P._corners[7],C$P._tempM0,C$P._corners[7]),C$lM.scale(C$X,-1,C$P._boxBound1.min),C$X.cloneTo(C$P._boxBound1.max),C$as.createfromPoints(C$P._corners,C$P._boxBound2),C$as.merge(C$P._boxBound2,C$P._boxBound1,C$P._boxBound3);var C$c=C$P._boxBound3.min,C$l=C$P._boxBound3.max;C$lM.subtract(C$l,C$c,C$P._tempV30),C$lM.scale(C$P._tempV30,.5,C$P._tempV30),C$lM.add(C$c,C$P._tempV30,C$P._tempV32),C$lM.subtract(C$l,C$P._tempV32,C$X),C$lM.transformCoordinate(C$P._tempV32,C$x,C$P._tempV33)},C$p(C$P,["_tempV30",function(){return this._tempV30=new C$lM},"_tempV31",function(){return this._tempV31=new C$lM},"_tempV32",function(){return this._tempV32=new C$lM},"_tempV33",function(){return this._tempV33=new C$lM},"_tempV34",function(){return this._tempV34=new C$lM},"_tempV35",function(){return this._tempV35=new C$lM},"_tempV36",function(){return this._tempV36=new C$lM},"_tempM0",function(){return this._tempM0=new C$sM},"_tempM1",function(){return this._tempM1=new C$sM},"_corners",function(){return this._corners=[new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM]},"_rows1",function(){return this._rows1=[new C$lM,new C$lM,new C$lM]},"_rows2",function(){return this._rows2=[new C$lM,new C$lM,new C$lM]},"_ray",function(){return this._ray=new C$xM(new C$lM,new C$lM)},"_boxBound1",function(){return this._boxBound1=new C$as(new C$lM,new C$lM)},"_boxBound2",function(){return this._boxBound2=new C$as(new C$lM,new C$lM)},"_boxBound3",function(){return this._boxBound3=new C$as(new C$lM,new C$lM)}])}(),function(){function C$r(C$s,C$M){this.normal=null,this.distance=NaN,void 0===C$M&&(C$M=0),this.normal=C$s,this.distance=C$M}return C$R(C$r,"laya.d3.math.Plane"),C$r.prototype.normalize=function(){var C$s=this.normal.elements,C$M=C$s[0],C$T=C$s[1],C$X=C$s[2],C$x=1/Math.sqrt(C$M*C$M+C$T*C$T+C$X*C$X);C$s[0]=C$M*C$x,C$s[1]=C$T*C$x,C$s[2]=C$X*C$x,this.distance*=C$x},C$r.createPlaneBy3P=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$M.elements,C$c=C$T.elements,C$l=C$x[0]-C$X[0],C$u=C$x[1]-C$X[1],C$E=C$x[2]-C$X[2],C$O=C$c[0]-C$X[0],C$U=C$c[1]-C$X[1],C$p=C$c[2]-C$X[2],C$_=C$u*C$p-C$E*C$U,C$R=C$E*C$O-C$l*C$p,C$q=C$l*C$U-C$u*C$O,C$G=1/Math.sqrt(C$_*C$_+C$R*C$R+C$q*C$q),C$g=C$_*C$G,C$f=C$R*C$G,C$J=C$q*C$G,C$P=C$r._TEMPVec3.elements;C$P[0]=C$g,C$P[1]=C$f,C$P[2]=C$J;var C$t=-(C$g*C$X[0]+C$f*C$X[1]+C$J*C$X[2]);return new C$r(C$r._TEMPVec3,C$t)},C$r.PlaneIntersectionType_Back=0,C$r.PlaneIntersectionType_Front=1,C$r.PlaneIntersectionType_Intersecting=2,C$p(C$r,["_TEMPVec3",function(){return this._TEMPVec3=new C$lM}]),C$r}()),C$TM=function(){function C$x(C$s,C$M,C$T,C$X){this.elements=new Float32Array(4),void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=1),this.elements[0]=C$s,this.elements[1]=C$M,this.elements[2]=C$T,this.elements[3]=C$X}C$R(C$x,"laya.d3.math.Quaternion");var C$s=C$x.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.scaling=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements;C$T[0]=C$X[0]*C$s,C$T[1]=C$X[1]*C$s,C$T[2]=C$X[2]*C$s,C$T[3]=C$X[3]*C$s},C$s.normalize=function(C$s){var C$M=C$s.elements,C$T=this.elements,C$X=C$T[0],C$x=C$T[1],C$c=C$T[2],C$l=C$T[3],C$u=C$X*C$X+C$x*C$x+C$c*C$c+C$l*C$l;0<C$u&&(C$u=1/Math.sqrt(C$u),C$M[0]=C$X*C$u,C$M[1]=C$x*C$u,C$M[2]=C$c*C$u,C$M[3]=C$l*C$u)},C$s.length=function(){var C$s=this.elements,C$M=C$s[0],C$T=C$s[1],C$X=C$s[2],C$x=C$s[3];return Math.sqrt(C$M*C$M+C$T*C$T+C$X*C$X+C$x*C$x)},C$s.rotateX=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements;C$s*=.5;var C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=Math.sin(C$s),C$O=Math.cos(C$s);C$T[0]=C$x*C$O+C$u*C$E,C$T[1]=C$c*C$O+C$l*C$E,C$T[2]=C$l*C$O-C$c*C$E,C$T[3]=C$u*C$O-C$x*C$E},C$s.rotateY=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements;C$s*=.5;var C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=Math.sin(C$s),C$O=Math.cos(C$s);C$T[0]=C$x*C$O-C$l*C$E,C$T[1]=C$c*C$O+C$u*C$E,C$T[2]=C$l*C$O+C$x*C$E,C$T[3]=C$u*C$O-C$c*C$E},C$s.rotateZ=function(C$s,C$M){var C$T=C$M.elements,C$X=this.elements;C$s*=.5;var C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=Math.sin(C$s),C$O=Math.cos(C$s);C$T[0]=C$x*C$O+C$c*C$E,C$T[1]=C$c*C$O-C$x*C$E,C$T[2]=C$l*C$O+C$u*C$E,C$T[3]=C$u*C$O-C$l*C$E},C$s.getYawPitchRoll=function(C$s){C$lM.transformQuat(C$lM.ForwardRH,this,C$x.TEMPVector31),C$lM.transformQuat(C$lM.Up,this,C$x.TEMPVector32);var C$M=C$x.TEMPVector32.elements;C$x.angleTo(C$lM.ZERO,C$x.TEMPVector31,C$x.TEMPVector33);var C$T=C$x.TEMPVector33.elements;C$T[0]==Math.PI/2?(C$T[1]=C$x.arcTanAngle(C$M[2],C$M[0]),C$T[2]=0):C$T[0]==-Math.PI/2?(C$T[1]=C$x.arcTanAngle(-C$M[2],-C$M[0]),C$T[2]=0):(C$sM.createRotationY(-C$T[1],C$x.TEMPMatrix0),C$sM.createRotationX(-C$T[0],C$x.TEMPMatrix1),C$lM.transformCoordinate(C$x.TEMPVector32,C$x.TEMPMatrix0,C$x.TEMPVector32),C$lM.transformCoordinate(C$x.TEMPVector32,C$x.TEMPMatrix1,C$x.TEMPVector32),C$T[2]=C$x.arcTanAngle(C$M[1],-C$M[0])),C$T[1]<=-Math.PI&&(C$T[1]=Math.PI),C$T[2]<=-Math.PI&&(C$T[2]=Math.PI),C$T[1]>=Math.PI&&C$T[2]>=Math.PI&&(C$T[1]=0,C$T[2]=0,C$T[0]=Math.PI-C$T[0]);var C$X=C$s.elements;C$X[0]=C$T[1],C$X[1]=C$T[0],C$X[2]=C$T[2]},C$s.invert=function(C$s){var C$M=C$s.elements,C$T=this.elements,C$X=C$T[0],C$x=C$T[1],C$c=C$T[2],C$l=C$T[3],C$u=C$X*C$X+C$x*C$x+C$c*C$c+C$l*C$l,C$E=C$u?1/C$u:0;C$M[0]=-C$X*C$E,C$M[1]=-C$x*C$E,C$M[2]=-C$c*C$E,C$M[3]=C$l*C$E},C$s.identity=function(){var C$s=this.elements;C$s[0]=0,C$s[1]=0,C$s[2]=0,C$s[3]=1},C$s.fromArray=function(C$s,C$M){void 0===C$M&&(C$M=0),this.elements[0]=C$s[C$M+0],this.elements[1]=C$s[C$M+1],this.elements[2]=C$s[C$M+2],this.elements[3]=C$s[C$M+3]},C$s.cloneTo=function(C$s){var C$M,C$T,C$X;if((C$T=this.elements)!==(C$X=C$s.elements))for(C$M=0;C$M<4;++C$M)C$X[C$M]=C$T[C$M]},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$s.equals=function(C$s){var C$M=this.elements,C$T=C$s.elements;return C$Hs.nearEqual(C$M[0],C$T[0])&&C$Hs.nearEqual(C$M[1],C$T[1])&&C$Hs.nearEqual(C$M[2],C$T[2])&&C$Hs.nearEqual(C$M[3],C$T[3])},C$s.lengthSquared=function(){var C$s=this.elements[0],C$M=this.elements[1],C$T=this.elements[2],C$X=this.elements[3];return C$s*C$s+C$M*C$M+C$T*C$T+C$X*C$X},C$q(0,C$s,"x",function(){return this.elements[0]}),C$q(0,C$s,"y",function(){return this.elements[1]}),C$q(0,C$s,"z",function(){return this.elements[2]}),C$q(0,C$s,"w",function(){return this.elements[3]}),C$x.createFromYawPitchRoll=function(C$s,C$M,C$T,C$X){var C$x=.5*C$T,C$c=.5*C$M,C$l=.5*C$s,C$u=Math.sin(C$x),C$E=Math.cos(C$x),C$O=Math.sin(C$c),C$U=Math.cos(C$c),C$p=Math.sin(C$l),C$_=Math.cos(C$l),C$R=C$X.elements;C$R[0]=C$_*C$O*C$E+C$p*C$U*C$u,C$R[1]=C$p*C$U*C$E-C$_*C$O*C$u,C$R[2]=C$_*C$U*C$u-C$p*C$O*C$E,C$R[3]=C$_*C$U*C$E+C$p*C$O*C$u},C$x.multiply=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$M.elements,C$c=C$T.elements,C$l=C$X[0],C$u=C$X[1],C$E=C$X[2],C$O=C$X[3],C$U=C$x[0],C$p=C$x[1],C$_=C$x[2],C$R=C$x[3],C$q=C$u*C$_-C$E*C$p,C$G=C$E*C$U-C$l*C$_,C$g=C$l*C$p-C$u*C$U,C$f=C$l*C$U+C$u*C$p+C$E*C$_;C$c[0]=C$l*C$R+C$U*C$O+C$q,C$c[1]=C$u*C$R+C$p*C$O+C$G,C$c[2]=C$E*C$R+C$_*C$O+C$g,C$c[3]=C$O*C$R-C$f},C$x.arcTanAngle=function(C$s,C$M){return 0==C$s?1==C$M?Math.PI/2:-Math.PI/2:0<C$s?Math.atan(C$M/C$s):C$s<0?0<C$M?Math.atan(C$M/C$s)+Math.PI:Math.atan(C$M/C$s)-Math.PI:0},C$x.angleTo=function(C$s,C$M,C$T){C$lM.subtract(C$M,C$s,C$x.TEMPVector30),C$lM.normalize(C$x.TEMPVector30,C$x.TEMPVector30),C$T.elements[0]=Math.asin(C$x.TEMPVector30.y),C$T.elements[1]=C$x.arcTanAngle(-C$x.TEMPVector30.z,-C$x.TEMPVector30.x)},C$x.createFromAxisAngle=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements;C$M*=.5;var C$c=Math.sin(C$M);C$X[0]=C$c*C$x[0],C$X[1]=C$c*C$x[1],C$X[2]=C$c*C$x[2],C$X[3]=Math.cos(C$M)},C$x.createFromMatrix3x3=function(C$s,C$M){var C$T,C$X=C$M.elements,C$x=C$s.elements,C$c=C$x[0]+C$x[4]+C$x[8];if(0<C$c)C$T=Math.sqrt(C$c+1),C$X[3]=.5*C$T,C$T=.5/C$T,C$X[0]=(C$x[5]-C$x[7])*C$T,C$X[1]=(C$x[6]-C$x[2])*C$T,C$X[2]=(C$x[1]-C$x[3])*C$T;else{var C$l=0;C$x[4]>C$x[0]&&(C$l=1),C$x[8]>C$x[3*C$l+C$l]&&(C$l=2);var C$u=(C$l+1)%3,C$E=(C$l+2)%3;C$T=Math.sqrt(C$x[3*C$l+C$l]-C$x[3*C$u+C$u]-C$x[3*C$E+C$E]+1),C$X[C$l]=.5*C$T,C$T=.5/C$T,C$X[3]=(C$x[3*C$u+C$E]-C$x[3*C$E+C$u])*C$T,C$X[C$u]=(C$x[3*C$u+C$l]+C$x[3*C$l+C$u])*C$T,C$X[C$E]=(C$x[3*C$E+C$l]+C$x[3*C$l+C$E])*C$T}},C$x.createFromMatrix4x4=function(C$s,C$M){var C$T,C$X,C$x=C$s.elements,C$c=C$M.elements,C$l=C$x[0]+C$x[5]+C$x[10];0<C$l?(C$T=Math.sqrt(C$l+1),C$c[3]=.5*C$T,C$T=.5/C$T,C$c[0]=(C$x[6]-C$x[9])*C$T,C$c[1]=(C$x[8]-C$x[2])*C$T,C$c[2]=(C$x[1]-C$x[4])*C$T):C$x[0]>=C$x[5]&&C$x[0]>=C$x[10]?(C$X=.5/(C$T=Math.sqrt(1+C$x[0]-C$x[5]-C$x[10])),C$c[0]=.5*C$T,C$c[1]=(C$x[1]+C$x[4])*C$X,C$c[2]=(C$x[2]+C$x[8])*C$X,C$c[3]=(C$x[6]-C$x[9])*C$X):C$x[5]>C$x[10]?(C$X=.5/(C$T=Math.sqrt(1+C$x[5]-C$x[0]-C$x[10])),C$c[0]=(C$x[4]+C$x[1])*C$X,C$c[1]=.5*C$T,C$c[2]=(C$x[9]+C$x[6])*C$X,C$c[3]=(C$x[8]-C$x[2])*C$X):(C$X=.5/(C$T=Math.sqrt(1+C$x[10]-C$x[0]-C$x[5])),C$c[0]=(C$x[8]+C$x[2])*C$X,C$c[1]=(C$x[9]+C$x[6])*C$X,C$c[2]=.5*C$T,C$c[3]=(C$x[1]-C$x[4])*C$X)},C$x.slerp=function(C$s,C$M,C$T,C$X){var C$x,C$c,C$l,C$u,C$E,C$O=C$s.elements,C$U=C$M.elements,C$p=C$X.elements,C$_=C$O[0],C$R=C$O[1],C$q=C$O[2],C$G=C$O[3],C$g=C$U[0],C$f=C$U[1],C$J=C$U[2],C$P=C$U[3];return(C$c=C$_*C$g+C$R*C$f+C$q*C$J+C$G*C$P)<0&&(C$c=-C$c,C$g=-C$g,C$f=-C$f,C$J=-C$J,C$P=-C$P),C$E=1e-6<1-C$c?(C$x=Math.acos(C$c),C$l=Math.sin(C$x),C$u=Math.sin((1-C$T)*C$x)/C$l,Math.sin(C$T*C$x)/C$l):(C$u=1-C$T,C$T),C$p[0]=C$u*C$_+C$E*C$g,C$p[1]=C$u*C$R+C$E*C$f,C$p[2]=C$u*C$q+C$E*C$J,C$p[3]=C$u*C$G+C$E*C$P,C$p},C$x.lerp=function(C$s,C$M,C$T,C$X){var C$x=C$X.elements,C$c=C$s.elements,C$l=C$M.elements,C$u=C$c[0],C$E=C$c[1],C$O=C$c[2],C$U=C$c[3];C$x[0]=C$u+C$T*(C$l[0]-C$u),C$x[1]=C$E+C$T*(C$l[1]-C$E),C$x[2]=C$O+C$T*(C$l[2]-C$O),C$x[3]=C$U+C$T*(C$l[3]-C$U)},C$x.add=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]+C$c[0],C$X[1]=C$x[1]+C$c[1],C$X[2]=C$x[2]+C$c[2],C$X[3]=C$x[3]+C$c[3]},C$x.dot=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;return C$T[0]*C$X[0]+C$T[1]*C$X[1]+C$T[2]*C$X[2]+C$T[3]*C$X[3]},C$x.rotationLookAt=function(C$s,C$M,C$T){C$x.lookAt(C$lM.ZERO,C$s,C$M,C$T)},C$x.lookAt=function(C$s,C$M,C$T,C$X){C$ds.lookAt(C$s,C$M,C$T,C$x._tempMatrix3x3),C$x.rotationMatrix(C$x._tempMatrix3x3,C$X)},C$x.invert=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$s.lengthSquared();C$Hs.isZero(C$x)||(C$x=1/C$x,C$X[0]=-C$T[0]*C$x,C$X[1]=-C$T[1]*C$x,C$X[2]=-C$T[2]*C$x,C$X[3]=C$T[3]*C$x)},C$x.rotationMatrix=function(C$s,C$M){var C$T=C$s.elements,C$X=C$T[0],C$x=C$T[1],C$c=C$T[2],C$l=C$T[3],C$u=C$T[4],C$E=C$T[5],C$O=C$T[6],C$U=C$T[7],C$p=C$T[8],C$_=C$M.elements,C$R=NaN,C$q=NaN,C$G=C$X+C$u+C$p;0<C$G?(C$R=Math.sqrt(C$G+1),C$_[3]=.5*C$R,C$R=.5/C$R,C$_[0]=(C$E-C$U)*C$R,C$_[1]=(C$O-C$c)*C$R,C$_[2]=(C$x-C$l)*C$R):C$u<=C$X&&C$p<=C$X?(C$q=.5/(C$R=Math.sqrt(1+C$X-C$u-C$p)),C$_[0]=.5*C$R,C$_[1]=(C$x+C$l)*C$q,C$_[2]=(C$c+C$O)*C$q,C$_[3]=(C$E-C$U)*C$q):C$p<C$u?(C$q=.5/(C$R=Math.sqrt(1+C$u-C$X-C$p)),C$_[0]=(C$l+C$x)*C$q,C$_[1]=.5*C$R,C$_[2]=(C$U+C$E)*C$q,C$_[3]=(C$O-C$c)*C$q):(C$q=.5/(C$R=Math.sqrt(1+C$p-C$X-C$u)),C$_[0]=(C$O+C$c)*C$q,C$_[1]=(C$U+C$E)*C$q,C$_[2]=.5*C$R,C$_[3]=(C$x-C$l)*C$q)},C$x.DEFAULT=new C$x,C$p(C$x,["TEMPVector30",function(){return this.TEMPVector30=new C$lM},"TEMPVector31",function(){return this.TEMPVector31=new C$lM},"TEMPVector32",function(){return this.TEMPVector32=new C$lM},"TEMPVector33",function(){return this.TEMPVector33=new C$lM},"TEMPMatrix0",function(){return this.TEMPMatrix0=new C$sM},"TEMPMatrix1",function(){return this.TEMPMatrix1=new C$sM},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new C$ds},"NAN",function(){return this.NAN=new C$x(NaN,NaN,NaN,NaN)}]),C$x}(),C$XM=function(){function C$s(C$s){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=C$s,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}C$R(C$s,"laya.d3.math.Rand");var C$M=C$s.prototype;return C$M.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},C$M.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},C$M.getSignedFloat=function(){return 2*this.getFloat()-1},C$q(0,C$M,"seed",function(){return this.seeds[0]},function(C$s){this.seeds[0]=C$s,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),C$s.getFloatFromInt=function(C$s){return 1/8388607*(8388607&C$s)},C$s.getByteFromInt=function(C$s){return(8388607&C$s)>>>15},C$s}(),C$xM=(function(){function C$x(C$s){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(C$s instanceof Array)||4!==C$s.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|C$s[0],this._state0L=0|C$s[1],this._state1U=0|C$s[2],this._state1L=0|C$s[3]}C$R(C$x,"laya.d3.math.RandX");var C$s=C$x.prototype;C$s.randomint=function(){var C$s=this._state0U,C$M=this._state0L,C$T=this._state1U,C$X=this._state1L,C$x=(C$X>>>0)+(C$M>>>0),C$c=C$T+C$s+(C$x/2>>>31)>>>0,C$l=C$x>>>0,C$u=0,C$E=0;C$u=(C$s^=C$u=C$s<<23|(-512&C$M)>>>9)^(this._state0U=C$T),C$E=(C$M^=C$E=C$M<<23)^(this._state0L=C$X);C$u^=C$s>>>18,C$E^=C$M>>>18|(262143&C$s)<<14;return C$u^=C$T>>>5,C$E^=C$X>>>5|(31&C$T)<<27,this._state1U=C$u,this._state1L=C$E,[C$c,C$l]},C$s.random=function(){var C$s=this.randomint(),C$M=C$s[0],C$T=1023<<20|C$M>>>12,C$X=0|(C$s[1]>>>12|(4095&C$M)<<20);return C$x._CONVERTION_BUFFER.setUint32(0,C$T,!1),C$x._CONVERTION_BUFFER.setUint32(4,C$X,!1),C$XM._CONVERTION_BUFFER.getFloat64(0,!1)-1},C$p(C$x,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new C$XM([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function C$s(C$s,C$M){this.origin=null,this.direction=null,this.origin=C$s,this.direction=C$M}return C$R(C$s,"laya.d3.math.Ray"),C$s}()),C$cM=function(){function C$s(C$s,C$M){this.elements=new Float32Array(2),void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0);var C$T=this.elements;C$T[0]=C$s,C$T[1]=C$M}C$R(C$s,"laya.d3.math.Vector2");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.fromArray=function(C$s,C$M){void 0===C$M&&(C$M=0),this.elements[0]=C$s[C$M+0],this.elements[1]=C$s[C$M+1]},C$M.cloneTo=function(C$s){var C$M=C$s.elements,C$T=this.elements;C$M[0]=C$T[0],C$M[1]=C$T[1]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"x",function(){return this.elements[0]},function(C$s){this.elements[0]=C$s}),C$q(0,C$M,"y",function(){return this.elements[1]},function(C$s){this.elements[1]=C$s}),C$s.scale=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements;C$X[0]=C$x[0]*C$M,C$X[1]=C$x[1]*C$M},C$p(C$s,["ZERO",function(){return this.ZERO=new C$s(0,0)},"ONE",function(){return this.ONE=new C$s(1,1)}]),C$s}(),C$lM=function(){function C$U(C$s,C$M,C$T){this.elements=new Float32Array(3),void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0);var C$X=this.elements;C$X[0]=C$s,C$X[1]=C$M,C$X[2]=C$T}C$R(C$U,"laya.d3.math.Vector3");var C$s=C$U.prototype;return C$r.imps(C$s,{"laya.d3.core.IClone":!0}),C$s.fromArray=function(C$s,C$M){void 0===C$M&&(C$M=0),this.elements[0]=C$s[C$M+0],this.elements[1]=C$s[C$M+1],this.elements[2]=C$s[C$M+2]},C$s.cloneTo=function(C$s){var C$M=C$s.elements,C$T=this.elements;C$M[0]=C$T[0],C$M[1]=C$T[1],C$M[2]=C$T[2]},C$s.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$s.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},C$s.reset=function(C$s,C$M,C$T){this.elements[0]=C$s,this.elements[1]=C$M,this.elements[2]=C$T},C$q(0,C$s,"x",function(){return this.elements[0]},function(C$s){this.elements[0]=C$s}),C$q(0,C$s,"y",function(){return this.elements[1]},function(C$s){this.elements[1]=C$s}),C$q(0,C$s,"z",function(){return this.elements[2]},function(C$s){this.elements[2]=C$s}),C$U.distanceSquared=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0]-C$X[0],C$c=C$T[1]-C$X[1],C$l=C$T[2]-C$X[2];return C$x*C$x+C$c*C$c+C$l*C$l},C$U.distance=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0]-C$X[0],C$c=C$T[1]-C$X[1],C$l=C$T[2]-C$X[2];return Math.sqrt(C$x*C$x+C$c*C$c+C$l*C$l)},C$U.min=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=Math.min(C$x[0],C$c[0]),C$X[1]=Math.min(C$x[1],C$c[1]),C$X[2]=Math.min(C$x[2],C$c[2])},C$U.max=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=Math.max(C$x[0],C$c[0]),C$X[1]=Math.max(C$x[1],C$c[1]),C$X[2]=Math.max(C$x[2],C$c[2])},C$U.transformQuat=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements,C$l=C$x[0],C$u=C$x[1],C$E=C$x[2],C$O=C$c[0],C$U=C$c[1],C$p=C$c[2],C$_=C$c[3],C$R=C$_*C$l+C$U*C$E-C$p*C$u,C$q=C$_*C$u+C$p*C$l-C$O*C$E,C$G=C$_*C$E+C$O*C$u-C$U*C$l,C$g=-C$O*C$l-C$U*C$u-C$p*C$E;C$X[0]=C$R*C$_+C$g*-C$O+C$q*-C$p-C$G*-C$U,C$X[1]=C$q*C$_+C$g*-C$U+C$G*-C$O-C$R*-C$p,C$X[2]=C$G*C$_+C$g*-C$p+C$R*-C$U-C$q*-C$O},C$U.scalarLength=function(C$s){var C$M=C$s.elements,C$T=C$M[0],C$X=C$M[1],C$x=C$M[2];return Math.sqrt(C$T*C$T+C$X*C$X+C$x*C$x)},C$U.scalarLengthSquared=function(C$s){var C$M=C$s.elements,C$T=C$M[0],C$X=C$M[1],C$x=C$M[2];return C$T*C$T+C$X*C$X+C$x*C$x},C$U.normalize=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0],C$c=C$T[1],C$l=C$T[2],C$u=C$x*C$x+C$c*C$c+C$l*C$l;0<C$u&&(C$u=1/Math.sqrt(C$u),C$X[0]=C$T[0]*C$u,C$X[1]=C$T[1]*C$u,C$X[2]=C$T[2]*C$u)},C$U.multiply=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]*C$c[0],C$X[1]=C$x[1]*C$c[1],C$X[2]=C$x[2]*C$c[2]},C$U.scale=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements;C$X[0]=C$x[0]*C$M,C$X[1]=C$x[1]*C$M,C$X[2]=C$x[2]*C$M},C$U.lerp=function(C$s,C$M,C$T,C$X){var C$x=C$X.elements,C$c=C$s.elements,C$l=C$M.elements,C$u=C$c[0],C$E=C$c[1],C$O=C$c[2];C$x[0]=C$u+C$T*(C$l[0]-C$u),C$x[1]=C$E+C$T*(C$l[1]-C$E),C$x[2]=C$O+C$T*(C$l[2]-C$O)},C$U.transformV3ToV3=function(C$s,C$M,C$T){var C$X=C$U._tempVector4;C$U.transformV3ToV4(C$s,C$M,C$X);var C$x=C$X.elements,C$c=C$T.elements;C$c[0]=C$x[0],C$c[1]=C$x[1],C$c[2]=C$x[2]},C$U.transformV3ToV4=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$M.elements,C$E=C$T.elements;C$E[0]=C$x*C$u[0]+C$c*C$u[4]+C$l*C$u[8]+C$u[12],C$E[1]=C$x*C$u[1]+C$c*C$u[5]+C$l*C$u[9]+C$u[13],C$E[2]=C$x*C$u[2]+C$c*C$u[6]+C$l*C$u[10]+C$u[14],C$E[3]=C$x*C$u[3]+C$c*C$u[7]+C$l*C$u[11]+C$u[15]},C$U.TransformNormal=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$M.elements,C$E=C$T.elements;C$E[0]=C$x*C$u[0]+C$c*C$u[4]+C$l*C$u[8],C$E[1]=C$x*C$u[1]+C$c*C$u[5]+C$l*C$u[9],C$E[2]=C$x*C$u[2]+C$c*C$u[6]+C$l*C$u[10]},C$U.transformCoordinate=function(C$s,C$M,C$T){var C$X=C$U._tempVector4.elements,C$x=C$s.elements,C$c=C$x[0],C$l=C$x[1],C$u=C$x[2],C$E=C$M.elements;C$X[0]=C$c*C$E[0]+C$l*C$E[4]+C$u*C$E[8]+C$E[12],C$X[1]=C$c*C$E[1]+C$l*C$E[5]+C$u*C$E[9]+C$E[13],C$X[2]=C$c*C$E[2]+C$l*C$E[6]+C$u*C$E[10]+C$E[14],C$X[3]=1/(C$c*C$E[3]+C$l*C$E[7]+C$u*C$E[11]+C$E[15]);var C$O=C$T.elements;C$O[0]=C$X[0]*C$X[3],C$O[1]=C$X[1]*C$X[3],C$O[2]=C$X[2]*C$X[3]},C$U.Clamp=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements,C$c=C$x[0],C$l=C$x[1],C$u=C$x[2],C$E=C$M.elements,C$O=C$E[0],C$U=C$E[1],C$p=C$E[2],C$_=C$T.elements,C$R=C$_[0],C$q=C$_[1],C$G=C$_[2],C$g=C$X.elements;C$c=(C$c=C$R<C$c?C$R:C$c)<C$O?C$O:C$c,C$l=(C$l=C$q<C$l?C$q:C$l)<C$U?C$U:C$l,C$u=(C$u=C$G<C$u?C$G:C$u)<C$p?C$p:C$u,C$g[0]=C$c,C$g[1]=C$l,C$g[2]=C$u},C$U.add=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]+C$c[0],C$X[1]=C$x[1]+C$c[1],C$X[2]=C$x[2]+C$c[2]},C$U.subtract=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]-C$c[0],C$X[1]=C$x[1]-C$c[1],C$X[2]=C$x[2]-C$c[2]},C$U.cross=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$M.elements,C$c=C$T.elements,C$l=C$X[0],C$u=C$X[1],C$E=C$X[2],C$O=C$x[0],C$U=C$x[1],C$p=C$x[2];C$c[0]=C$u*C$p-C$E*C$U,C$c[1]=C$E*C$O-C$l*C$p,C$c[2]=C$l*C$U-C$u*C$O},C$U.dot=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;return C$T[0]*C$X[0]+C$T[1]*C$X[1]+C$T[2]*C$X[2]},C$U.equals=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;return C$Hs.nearEqual(Math.abs(C$T[0]),Math.abs(C$X[0]))&&C$Hs.nearEqual(Math.abs(C$T[1]),Math.abs(C$X[1]))&&C$Hs.nearEqual(Math.abs(C$T[2]),Math.abs(C$X[2]))},C$U.ZERO=new C$U(0,0,0),C$U.ONE=new C$U(1,1,1),C$U.NegativeUnitX=new C$U(-1,0,0),C$U.UnitX=new C$U(1,0,0),C$U.UnitY=new C$U(0,1,0),C$U.UnitZ=new C$U(0,0,1),C$U.ForwardRH=new C$U(0,0,-1),C$U.ForwardLH=new C$U(0,0,1),C$U.Up=new C$U(0,1,0),C$U.NAN=new C$U(NaN,NaN,NaN),C$p(C$U,["_tempVector4",function(){return this._tempVector4=new C$uM}]),C$U}(),C$uM=function(){function C$s(C$s,C$M,C$T,C$X){this.elements=new Float32Array(4),void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=0);var C$x=this.elements;C$x[0]=C$s,C$x[1]=C$M,C$x[2]=C$T,C$x[3]=C$X}C$R(C$s,"laya.d3.math.Vector4");var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M.fromArray=function(C$s,C$M){void 0===C$M&&(C$M=0),this.elements[0]=C$s[C$M+0],this.elements[1]=C$s[C$M+1],this.elements[2]=C$s[C$M+2],this.elements[3]=C$s[C$M+3]},C$M.cloneTo=function(C$s){var C$M=C$s.elements,C$T=this.elements;C$M[0]=C$T[0],C$M[1]=C$T[1],C$M[2]=C$T[2],C$M[3]=C$T[3]},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$M.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},C$M.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},C$q(0,C$M,"x",function(){return this.elements[0]},function(C$s){this.elements[0]=C$s}),C$q(0,C$M,"y",function(){return this.elements[1]},function(C$s){this.elements[1]=C$s}),C$q(0,C$M,"z",function(){return this.elements[2]},function(C$s){this.elements[2]=C$s}),C$q(0,C$M,"w",function(){return this.elements[3]},function(C$s){this.elements[3]=C$s}),C$s.lerp=function(C$s,C$M,C$T,C$X){var C$x=C$X.elements,C$c=C$s.elements,C$l=C$M.elements,C$u=C$c[0],C$E=C$c[1],C$O=C$c[2],C$U=C$c[3];C$x[0]=C$u+C$T*(C$l[0]-C$u),C$x[1]=C$E+C$T*(C$l[1]-C$E),C$x[2]=C$O+C$T*(C$l[2]-C$O),C$x[3]=C$U+C$T*(C$l[3]-C$U)},C$s.transformByM4x4=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$X[0],C$c=C$X[1],C$l=C$X[2],C$u=C$X[3],C$E=C$M.elements,C$O=C$T.elements;C$O[0]=C$x*C$E[0]+C$c*C$E[4]+C$l*C$E[8]+C$u*C$E[12],C$O[1]=C$x*C$E[1]+C$c*C$E[5]+C$l*C$E[9]+C$u*C$E[13],C$O[2]=C$x*C$E[2]+C$c*C$E[6]+C$l*C$E[10]+C$u*C$E[14],C$O[3]=C$x*C$E[3]+C$c*C$E[7]+C$l*C$E[11]+C$u*C$E[15]},C$s.equals=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;return C$Hs.nearEqual(Math.abs(C$T[0]),Math.abs(C$X[0]))&&C$Hs.nearEqual(Math.abs(C$T[1]),Math.abs(C$X[1]))&&C$Hs.nearEqual(Math.abs(C$T[2]),Math.abs(C$X[2]))&&C$Hs.nearEqual(Math.abs(C$T[3]),Math.abs(C$X[3]))},C$s.normalize=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$s.length();0<C$x&&(C$X[0]=C$T[0]*C$x,C$X[1]=C$T[1]*C$x,C$X[2]=C$T[2]*C$x,C$X[3]=C$T[3]*C$x)},C$s.add=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]+C$c[0],C$X[1]=C$x[1]+C$c[1],C$X[2]=C$x[2]+C$c[2],C$X[3]=C$x[3]+C$c[3]},C$s.subtract=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]-C$c[0],C$X[1]=C$x[1]-C$c[1],C$X[2]=C$x[2]-C$c[2],C$X[3]=C$x[3]-C$c[3]},C$s.multiply=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=C$x[0]*C$c[0],C$X[1]=C$x[1]*C$c[1],C$X[2]=C$x[2]*C$c[2],C$X[3]=C$x[3]*C$c[3]},C$s.scale=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements;C$X[0]=C$x[0]*C$M,C$X[1]=C$x[1]*C$M,C$X[2]=C$x[2]*C$M,C$X[3]=C$x[3]*C$M},C$s.Clamp=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements,C$c=C$x[0],C$l=C$x[1],C$u=C$x[2],C$E=C$x[3],C$O=C$M.elements,C$U=C$O[0],C$p=C$O[1],C$_=C$O[2],C$R=C$O[3],C$q=C$T.elements,C$G=C$q[0],C$g=C$q[1],C$f=C$q[2],C$J=C$q[3],C$P=C$X.elements;C$c=(C$c=C$G<C$c?C$G:C$c)<C$U?C$U:C$c,C$l=(C$l=C$g<C$l?C$g:C$l)<C$p?C$p:C$l,C$u=(C$u=C$f<C$u?C$f:C$u)<C$_?C$_:C$u,C$E=(C$E=C$J<C$E?C$J:C$E)<C$R?C$R:C$E,C$P[0]=C$c,C$P[1]=C$l,C$P[2]=C$u,C$P[3]=C$E},C$s.distanceSquared=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0]-C$X[0],C$c=C$T[1]-C$X[1],C$l=C$T[2]-C$X[2],C$u=C$T[3]-C$X[3];return C$x*C$x+C$c*C$c+C$l*C$l+C$u*C$u},C$s.distance=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements,C$x=C$T[0]-C$X[0],C$c=C$T[1]-C$X[1],C$l=C$T[2]-C$X[2],C$u=C$T[3]-C$X[3];return Math.sqrt(C$x*C$x+C$c*C$c+C$l*C$l+C$u*C$u)},C$s.dot=function(C$s,C$M){var C$T=C$s.elements,C$X=C$M.elements;return C$T[0]*C$X[0]+C$T[1]*C$X[1]+C$T[2]*C$X[2]+C$T[3]*C$X[3]},C$s.min=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=Math.min(C$x[0],C$c[0]),C$X[1]=Math.min(C$x[1],C$c[1]),C$X[2]=Math.min(C$x[2],C$c[2]),C$X[3]=Math.min(C$x[3],C$c[3])},C$s.max=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M.elements;C$X[0]=Math.max(C$x[0],C$c[0]),C$X[1]=Math.max(C$x[1],C$c[1]),C$X[2]=Math.max(C$x[2],C$c[2]),C$X[3]=Math.max(C$x[3],C$c[3])},C$p(C$s,["ZERO",function(){return this.ZERO=new C$s},"ONE",function(){return this.ONE=new C$s(1,1,1,1)},"UnitX",function(){return this.UnitX=new C$s(1,0,0,0)},"UnitY",function(){return this.UnitY=new C$s(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new C$s(0,0,1,0)},"UnitW",function(){return this.UnitW=new C$s(0,0,0,1)}]),C$s}(),C$EM=function(){function C$c(C$s,C$M,C$T,C$X){this.minDepth=0,this.maxDepth=1,this.x=C$s,this.y=C$M,this.width=C$T,this.height=C$X}C$R(C$c,"laya.d3.math.Viewport");var C$s=C$c.prototype;return C$s.project=function(C$s,C$M,C$T){C$lM.transformV3ToV3(C$s,C$M,C$T);var C$X=C$s.elements,C$x=C$M.elements,C$c=C$T.elements,C$l=C$X[0]*C$x[3]+C$X[1]*C$x[7]+C$X[2]*C$x[11]+C$x[15];1!==C$l&&(C$c[0]=C$c[0]/C$l,C$c[1]=C$c[1]/C$l,C$c[2]=C$c[2]/C$l),C$c[0]=.5*(C$c[0]+1)*this.width+this.x,C$c[1]=.5*(1-C$c[1])*this.height+this.y,C$c[2]=C$c[2]*(this.maxDepth-this.minDepth)+this.minDepth},C$s.unprojectFromMat=function(C$s,C$M,C$T){var C$X=C$s.elements,C$x=C$M.elements,C$c=C$T.elements;C$c[0]=(C$X[0]-this.x)/this.width*2-1,C$c[1]=-((C$X[1]-this.y)/this.height*2-1);var C$l=(this.maxDepth-this.minDepth)/2;C$c[2]=(C$X[2]-this.minDepth-C$l)/C$l;var C$u=C$c[0]*C$x[3]+C$c[1]*C$x[7]+C$c[2]*C$x[11]+C$x[15];C$lM.transformV3ToV3(C$T,C$M,C$T),1!==C$u&&(C$c[0]=C$c[0]/C$u,C$c[1]=C$c[1]/C$u,C$c[2]=C$c[2]/C$u)},C$s.unprojectFromWVP=function(C$s,C$M,C$T,C$X,C$x){C$sM.multiply(C$M,C$T,C$c._tempMatrix4x4),C$X&&C$sM.multiply(C$c._tempMatrix4x4,C$X,C$c._tempMatrix4x4),C$c._tempMatrix4x4.invert(C$c._tempMatrix4x4),this.unprojectFromMat(C$s,C$c._tempMatrix4x4,C$x)},C$p(C$c,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new C$sM}]),C$c}(),C$OM=function(){function C$Q(C$s){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=C$s,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}C$R(C$Q,"laya.d3.resource.models.SubMesh");var C$s=C$Q.prototype;return C$r.imps(C$s,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),C$s._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),0===C$s?this._vertexBuffer:null},C$s._getIndexBuffer=function(){return this._indexBuffer},C$s._getStaticBatchBakedVertexs=function(C$s,C$M){var C$T,C$X,C$x=this._vertexBuffer,C$c=C$x.vertexDeclaration,C$l=C$c.getVertexElementByUsage(0).offset/4,C$u=C$c.getVertexElementByUsage(3).offset/4,C$E=C$M.meshRender.lightmapScaleOffset,C$O=0,C$U=0,C$p=0,C$_=0,C$R=0,C$q=0;if(C$E)if(C$X=C$c.getVertexElementByUsage(15))C$p=C$c.vertexStride/4,C$T=0<this._vertexCount?C$x.getData().slice(this._vertexStart*C$p,(this._vertexStart+this._vertexCount)*C$p):C$x.getData().slice(),C$_=C$X.offset/4;else{C$p=(C$q=C$c.vertexStride/4)+2,C$T=this._vertexCount?new Float32Array(this._vertexCount*(C$x.vertexDeclaration.vertexStride/4+2)):new Float32Array(C$x.vertexCount*(C$x.vertexDeclaration.vertexStride/4+2)),C$_=(C$R=C$c.getVertexElementByUsage(2).offset/4)+2;var C$G=C$x.getData();for(C$O=0,C$U=C$G.length/C$q;C$O<C$U;C$O++){var C$g=0;C$g=0<this._vertexCount?(this._vertexStart+C$O)*C$q:C$O*C$q;var C$f=C$O*C$p,C$J=0;for(C$J=0;C$J<C$_;C$J++)C$T[C$f+C$J]=C$G[C$g+C$J];for(C$J=C$_;C$J<C$q;C$J++)C$T[C$f+C$J+2]=C$G[C$g+C$J]}}else C$p=C$c.vertexStride/4,C$T=this._vertexCount?C$x.getData().slice(this._vertexStart*C$p,(this._vertexStart+this._vertexCount)*C$p):C$x.getData().slice();if(C$s){var C$P=C$s.worldMatrix,C$t=C$Q._tempMatrix4x40;C$P.invert(C$t);var C$r=C$Q._tempMatrix4x41,C$N=C$M.transform.worldMatrix;C$sM.multiply(C$t,C$N,C$r)}else C$r=C$M.transform.worldMatrix;var C$w=C$Q._tempQuaternion0;for(C$r.decomposeTransRotScale(C$Q._tempVector30,C$w,C$Q._tempVector31),C$O=0,C$U=C$T.length/C$p;C$O<C$U;C$O++){var C$k=C$O*C$p+C$l,C$A=C$O*C$p+C$u;if(C$gM.transformVector3ArrayToVector3ArrayCoordinate(C$T,C$k,C$r,C$T,C$k),C$gM.transformVector3ArrayByQuat(C$T,C$A,C$w,C$T,C$A),C$E){var C$D=C$O*C$p+C$_;if(C$X)C$gM.transformLightingMapTexcoordByUV1Array(C$T,C$D,C$E,C$T,C$D);else{var C$h=C$O*C$q+C$R;C$gM.transformLightingMapTexcoordByUV0Array(C$G,C$h,C$E,C$T,C$D)}}}return C$T},C$s._getVertexBuffers=function(){return null},C$s._beforeRender=function(C$s){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},C$s._render=function(C$s){var C$M,C$T=0,C$X=C$s.renderElement;if(1<this._indexCount){var C$x=this._boneIndicesList.length;if(1<C$x){for(var C$c=0;C$c<C$x;C$c++)(C$M=C$X._skinAnimationDatas||this._skinAnimationDatas)&&(C$X._shaderValue.setValue(0,C$M[C$c]),C$s._shader.uploadRenderElementUniforms(C$X._shaderValue.data)),C$v.mainContext.drawElements(4,this._subIndexBufferCount[C$c],5123,2*this._subIndexBufferStart[C$c]);C$k.drawCall+=C$x}else(C$M=C$X._skinAnimationDatas||this._skinAnimationDatas)&&(C$X._shaderValue.setValue(0,C$M[0]),C$s._shader.uploadRenderElementUniforms(C$X._shaderValue.data)),C$v.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),C$k.drawCall++;C$T=this._indexCount}else C$T=this._indexBuffer.indexCount,(C$M=C$X._skinAnimationDatas||this._skinAnimationDatas)&&(C$X._shaderValue.setValue(0,C$M[0]),C$s._shader.uploadRenderElementUniforms(C$X._shaderValue.data)),C$v.mainContext.drawElements(4,C$T,5123,0),C$k.drawCall++;C$k.trianglesFaces+=C$T/3},C$s.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},C$s.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},C$q(0,C$s,"_vertexBufferCount",function(){return 1}),C$q(0,C$s,"triangleCount",function(){return this._indexBuffer.indexCount/3}),C$p(C$Q,["_tempVector30",function(){return this._tempVector30=new C$lM},"_tempVector31",function(){return this._tempVector31=new C$lM},"_tempQuaternion0",function(){return this._tempQuaternion0=new C$TM},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new C$sM},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new C$sM}]),C$Q}(),C$UM=function(){function C$s(C$s){this.defineCounter=0,this.defines=null,C$s?(this.defineCounter=C$s.defineCounter,this.defines=C$s.defines.slice()):(this.defineCounter=0,this.defines=[])}return C$R(C$s,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),C$s.prototype.registerDefine=function(C$s){var C$M=Math.pow(2,this.defineCounter++);return this.defines[C$M]=C$s,C$M},C$s}(),C$pM=function(){function C$s(){}return C$R(C$s,"laya.d3.shader.ShaderInit3D"),C$s.__init__=function(){var C$s,C$M;C$kM._globalRegDefine("HIGHPRECISION",C$kM.SHADERDEFINE_HIGHPRECISION),C$kM._globalRegDefine("FOG",C$kM.SHADERDEFINE_FOG),C$kM._globalRegDefine("DIRECTIONLIGHT",C$kM.SHADERDEFINE_DIRECTIONLIGHT),C$kM._globalRegDefine("POINTLIGHT",C$kM.SHADERDEFINE_POINTLIGHT),C$kM._globalRegDefine("SPOTLIGHT",C$kM.SHADERDEFINE_SPOTLIGHT),C$kM._globalRegDefine("UV",C$kM.SHADERDEFINE_UV0),C$kM._globalRegDefine("COLOR",C$kM.SHADERDEFINE_COLOR),C$kM._globalRegDefine("UV1",C$kM.SHADERDEFINE_UV1),C$kM._globalRegDefine("CASTSHADOW",C$RM.SHADERDEFINE_CAST_SHADOW),C$kM._globalRegDefine("SHADOWMAP_PSSM1",C$RM.SHADERDEFINE_SHADOW_PSSM1),C$kM._globalRegDefine("SHADOWMAP_PSSM2",C$RM.SHADERDEFINE_SHADOW_PSSM2),C$kM._globalRegDefine("SHADOWMAP_PSSM3",C$RM.SHADERDEFINE_SHADOW_PSSM3),C$kM._globalRegDefine("SHADOWMAP_PCF_NO",C$RM.SHADERDEFINE_SHADOW_PCF_NO),C$kM._globalRegDefine("SHADOWMAP_PCF1",C$RM.SHADERDEFINE_SHADOW_PCF1),C$kM._globalRegDefine("SHADOWMAP_PCF2",C$RM.SHADERDEFINE_SHADOW_PCF2),C$kM._globalRegDefine("SHADOWMAP_PCF3",C$RM.SHADERDEFINE_SHADOW_PCF3),C$kM._globalRegDefine("DEPTHFOG",C$kM.SAHDERDEFINE_DEPTHFOG),C$YM.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),C$YM.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),C$s={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},C$M={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var C$T=C$YM.nameKey.add("SIMPLE");shaderCompile=C$kM.add(C$T,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',C$s,C$M),C$IM.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),C$IM.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),C$IM.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),C$IM.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),C$IM.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),C$IM.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),C$IM.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),C$IM.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),C$IM.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},C$s}(),C$_M=function(){function C$s(){this._data=null,this._data=[]}C$R(C$s,"laya.d3.shader.ValusArray");var C$M=C$s.prototype;return C$M.setValue=function(C$s,C$M){this._data[C$s]=C$M},C$q(0,C$M,"data",function(){return this._data}),C$s}(),C$RM=function(){function C$s(){}return C$s.SHADERDEFINE_RECEIVE_SHADOW=1,C$s.SHADERDEFINE_CAST_SHADOW=512,C$s.SHADERDEFINE_SHADOW_PSSM1=1024,C$s.SHADERDEFINE_SHADOW_PSSM2=2048,C$s.SHADERDEFINE_SHADOW_PSSM3=4096,C$s.SHADERDEFINE_SHADOW_PCF_NO=8192,C$s.SHADERDEFINE_SHADOW_PCF1=16384,C$s.SHADERDEFINE_SHADOW_PCF2=32768,C$s.SHADERDEFINE_SHADOW_PCF3=65536,C$s.MAX_PSSM_COUNT=3,C$s}(),C$qM=function(){function C$F(){}return C$R(C$F,"laya.d3.utils.Picker"),C$F.calculateCursorRay=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$s.elements[0],C$u=C$s.elements[1],C$E=C$F._tempVector30,C$O=C$E.elements;C$O[0]=C$l,C$O[1]=C$u,C$O[2]=C$M.minDepth;var C$U=C$F._tempVector31,C$p=C$U.elements;C$p[0]=C$l,C$p[1]=C$u,C$p[2]=C$M.maxDepth;var C$_=C$c.origin,C$R=C$F._tempVector32;C$M.unprojectFromWVP(C$E,C$T,C$X,C$x,C$_),C$M.unprojectFromWVP(C$U,C$T,C$X,C$x,C$R);var C$q=C$c.direction.elements;C$q[0]=C$R.x-C$_.x,C$q[1]=C$R.y-C$_.y,C$q[2]=C$R.z-C$_.z,C$lM.normalize(C$c.direction,C$c.direction)},C$F.rayIntersectsPositionsAndIndices=function(C$s,C$M,C$T,C$X,C$x){for(var C$c=C$T.vertexStride/4,C$l=C$T.getVertexElementByUsage(0).offset/4,C$u=Number.MAX_VALUE,C$E=-1,C$O=-1,C$U=-1,C$p=0;C$p<C$X.length;C$p+=3){var C$_=C$F._tempVector35,C$R=C$_.elements,C$q=C$X[C$p]*C$c,C$G=C$q+C$l;C$R[0]=C$M[C$G],C$R[1]=C$M[1+C$G],C$R[2]=C$M[2+C$G];var C$g=C$F._tempVector36,C$f=C$g.elements,C$J=C$X[C$p+1]*C$c,C$P=C$J+C$l;C$f[0]=C$M[C$P],C$f[1]=C$M[1+C$P],C$f[2]=C$M[2+C$P];var C$t=C$F._tempVector37,C$r=C$t.elements,C$N=C$X[C$p+2]*C$c,C$w=C$N+C$l;C$r[0]=C$M[C$w],C$r[1]=C$M[1+C$w],C$r[2]=C$M[2+C$w];var C$k=laya.d3.utils.Picker.rayIntersectsTriangle(C$s,C$_,C$g,C$t);!isNaN(C$k)&&C$k<C$u&&(C$u=C$k,C$E=C$q,C$O=C$J,C$U=C$N)}if(C$u===Number.MAX_VALUE)return C$x.position.toDefault(),C$x.distance=Number.MAX_VALUE,C$x.trianglePositions[0].toDefault(),C$x.trianglePositions[1].toDefault(),C$x.trianglePositions[2].toDefault(),C$x.triangleNormals[0].toDefault(),C$x.triangleNormals[1].toDefault(),C$x.triangleNormals[2].toDefault(),!1;C$x.distance=C$u,C$lM.scale(C$s.direction,C$u,C$x.position),C$lM.add(C$s.origin,C$x.position,C$x.position);var C$A=C$x.trianglePositions,C$D=C$A[0],C$h=C$A[1],C$Q=C$A[2],C$v=C$D.elements,C$z=C$h.elements,C$B=C$Q.elements,C$o=C$E+C$l;C$v[0]=C$M[C$o],C$v[1]=C$M[C$o+1],C$v[2]=C$M[C$o+2];var C$C=C$O+C$l;C$z[0]=C$M[C$C],C$z[1]=C$M[C$C+1],C$z[2]=C$M[C$C+2];var C$m=C$U+C$l;C$B[0]=C$M[C$m],C$B[1]=C$M[C$m+1],C$B[2]=C$M[C$m+2];var C$Y=C$T.getVertexElementByUsage(3);if(C$Y){var C$I=C$Y.offset/4,C$y=C$x.triangleNormals,C$e=C$y[0],C$V=C$y[1],C$b=C$y[2],C$L=C$e.elements,C$S=C$V.elements,C$K=C$b.elements,C$Z=C$E+C$I;C$L[0]=C$M[C$Z],C$L[1]=C$M[C$Z+1],C$L[2]=C$M[C$Z+2];var C$n=C$O+C$I;C$S[0]=C$M[C$n],C$S[1]=C$M[C$n+1],C$S[2]=C$M[C$n+2];var C$$=C$U+C$I;C$K[0]=C$M[C$$],C$K[1]=C$M[C$$+1],C$K[2]=C$M[C$$+2]}return!0},C$F.rayIntersectsTriangle=function(C$s,C$M,C$T,C$X){var C$x=C$F._tempVector30,C$c=C$F._tempVector31;C$lM.subtract(C$T,C$M,C$x),C$lM.subtract(C$X,C$M,C$c);var C$l,C$u=C$F._tempVector32;if(C$lM.cross(C$s.direction,C$c,C$u),(C$l=C$lM.dot(C$x,C$u))>-Number.MIN_VALUE&&C$l<Number.MIN_VALUE)return Number.NaN;var C$E,C$O=1/C$l,C$U=C$F._tempVector33;if(C$lM.subtract(C$s.origin,C$M,C$U),C$E=C$lM.dot(C$U,C$u),(C$E*=C$O)<0||1<C$E)return Number.NaN;var C$p,C$_,C$R=C$F._tempVector34;return C$lM.cross(C$U,C$x,C$R),C$p=C$lM.dot(C$s.direction,C$R),(C$p*=C$O)<0||1<C$E+C$p?Number.NaN:(C$_=C$lM.dot(C$c,C$R),(C$_*=C$O)<0?Number.NaN:C$_)},C$p(C$F,["_tempVector30",function(){return this._tempVector30=new C$lM},"_tempVector31",function(){return this._tempVector31=new C$lM},"_tempVector32",function(){return this._tempVector32=new C$lM},"_tempVector33",function(){return this._tempVector33=new C$lM},"_tempVector34",function(){return this._tempVector34=new C$lM},"_tempVector35",function(){return this._tempVector35=new C$lM},"_tempVector36",function(){return this._tempVector36=new C$lM},"_tempVector37",function(){return this._tempVector37=new C$lM}]),C$F}(),C$GM=(function(){function C$s(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new C$lM,new C$lM,new C$lM],this.trianglePositions.length=3,this.triangleNormals=[new C$lM,new C$lM,new C$lM],this.triangleNormals.length=3,this.position=new C$lM}C$R(C$s,"laya.d3.utils.RaycastHit"),C$s.prototype.cloneTo=function(C$s){C$s.distance=this.distance,this.trianglePositions[0].cloneTo(C$s.trianglePositions[0]),this.trianglePositions[1].cloneTo(C$s.trianglePositions[1]),this.trianglePositions[2].cloneTo(C$s.trianglePositions[2]),this.triangleNormals[0].cloneTo(C$s.triangleNormals[0]),this.triangleNormals[1].cloneTo(C$s.triangleNormals[1]),this.triangleNormals[2].cloneTo(C$s.triangleNormals[2]),this.position.cloneTo(C$s.position),C$s.sprite3D=this.sprite3D}}(),function(){function C$s(C$s,C$M){this._width=0,this._height=0,this._width=C$s,this._height=C$M}C$R(C$s,"laya.d3.utils.Size");var C$M=C$s.prototype;return C$q(0,C$M,"width",function(){return-1===this._width?C$W.clientWidth:this._width}),C$q(0,C$M,"height",function(){return-1===this._height?C$W.clientHeight:this._height}),C$q(1,C$s,"fullScreen",function(){return new C$s(-1,-1)}),C$s}()),C$gM=function(){function C$o(){}return C$R(C$o,"laya.d3.utils.Utils3D"),C$o._rotationTransformScaleSkinAnimation=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p){var C$_,C$R,C$q,C$G,C$g,C$f=C$o._tempArray16_0,C$J=C$o._tempArray16_1,C$P=C$o._tempArray16_2,C$t=C$X+C$X,C$r=C$x+C$x,C$N=C$c+C$c,C$w=C$X*C$t,C$k=C$x*C$t,C$A=C$x*C$r,C$D=C$c*C$t,C$h=C$c*C$r,C$Q=C$c*C$N,C$v=C$l*C$t,C$z=C$l*C$r,C$B=C$l*C$N;for(C$f[15]=1,C$f[0]=1-C$A-C$Q,C$f[1]=C$k+C$B,C$f[2]=C$D-C$z,C$f[4]=C$k-C$B,C$f[5]=1-C$w-C$Q,C$f[6]=C$h+C$v,C$f[8]=C$D+C$z,C$f[9]=C$h-C$v,C$f[10]=1-C$w-C$A,C$J[15]=1,C$J[0]=C$u,C$J[5]=C$E,C$J[10]=C$O,C$_=0;C$_<4;C$_++)C$R=C$f[C$_],C$q=C$f[C$_+4],C$G=C$f[C$_+8],C$g=C$f[C$_+12],C$P[C$_]=C$R,C$P[C$_+4]=C$q,C$P[C$_+8]=C$G,C$P[C$_+12]=C$R*C$s+C$q*C$M+C$G*C$T+C$g;for(C$_=0;C$_<4;C$_++)C$R=C$P[C$_],C$q=C$P[C$_+4],C$G=C$P[C$_+8],C$g=C$P[C$_+12],C$U[C$_+C$p]=C$R*C$J[0]+C$q*C$J[1]+C$G*C$J[2]+C$g*C$J[3],C$U[C$_+C$p+4]=C$R*C$J[4]+C$q*C$J[5]+C$G*C$J[6]+C$g*C$J[7],C$U[C$_+C$p+8]=C$R*C$J[8]+C$q*C$J[9]+C$G*C$J[10]+C$g*C$J[11],C$U[C$_+C$p+12]=C$R*C$J[12]+C$q*C$J[13]+C$G*C$J[14]+C$g*C$J[15]},C$o._createNodeByJson=function(C$s,C$M,C$T,C$X){if(!C$T)switch(C$M.type){case"Sprite3D":C$T=new C$mM;break;case"MeshSprite3D":C$T=new C$FM;break;case"SkinnedMeshSprite3D":C$T=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":C$T=new ShuriKenParticle3D;break;case"TrailSprite3D":C$T=new TrailSprite3D;break;case"Terrain":C$T=new Terrain;break;case"Camera":C$T=new C$$M;break;case"DirectionLight":C$T=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var C$x=C$M.props;if(C$x)for(var C$c in C$x)C$T[C$c]=C$x[C$c];var C$l=C$M.customProps;C$l&&(C$T instanceof laya.d3.core.Sprite3D?(C$T._parseBaseCustomProps(C$l),C$T._parseCustomProps(C$s,C$X,C$l,C$M),C$T._parseCustomComponent(C$s,C$X,C$M.components)):C$T._parseCustomProps(C$s,C$X,C$l,C$M));var C$u=C$M.child;if(C$u)for(var C$E=0,C$O=C$u.length;C$E<C$O;C$E++){var C$U=C$o._createNodeByJson(C$s,C$u[C$E],null,C$X);C$T.addChild(C$U)}return C$T},C$o._computeBoneAndAnimationDatasByBindPoseMatrxix=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u,C$E=0,C$O=0,C$U=C$s.length;for(C$l=0;C$l<C$U;C$E+=C$s[C$l].keyframeWidth,C$O+=16,C$l++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(C$M[C$E+0],C$M[C$E+1],C$M[C$E+2],C$M[C$E+3],C$M[C$E+4],C$M[C$E+5],C$M[C$E+6],C$M[C$E+7],C$M[C$E+8],C$M[C$E+9],C$X,C$O),0!=C$l&&(C$u=16*C$s[C$l].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(C$X,C$u,C$X,C$O,C$X,C$O));var C$p=C$T.length;for(C$l=0;C$l<C$p;C$l++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(C$X,16*C$c[C$l],C$T[C$l],C$x,16*C$l)},C$o._computeAnimationDatasByArrayAndMatrixFast=function(C$s,C$M,C$T,C$X){for(var C$x=0,C$c=C$s.length;C$x<C$c;C$x++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(C$M,16*C$X[C$x],C$s[C$x],C$T,16*C$x)},C$o._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l,C$u=0,C$E=0,C$O=C$s.length;for(C$c=0;C$c<C$O;C$u+=C$s[C$c].keyframeWidth,C$E+=16,C$c++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(C$M[C$u+7],C$M[C$u+8],C$M[C$u+9],C$M[C$u+3],C$M[C$u+4],C$M[C$u+5],C$M[C$u+6],C$M[C$u+0],C$M[C$u+1],C$M[C$u+2],C$X,C$E),0!=C$c&&(C$l=16*C$s[C$c].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(C$X,C$l,C$X,C$E,C$X,C$E));var C$U=C$T.length;for(C$c=0;C$c<C$U;C$c++){var C$p=16*C$c;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(C$X,C$p,C$T[C$c],C$x,C$p)}},C$o._computeAnimationDatasByArrayAndMatrixFastOld=function(C$s,C$M,C$T){for(var C$X=C$s.length,C$x=0;C$x<C$X;C$x++){var C$c=16*C$x;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(C$M,C$c,C$s[C$x],C$T,C$c)}},C$o._computeRootAnimationData=function(C$s,C$M,C$T){for(var C$X=0,C$x=0,C$c=0,C$l=C$s.length;C$X<C$l;C$x+=C$s[C$X].keyframeWidth,C$c+=16,C$X++)laya.d3.utils.Utils3D.createAffineTransformationArray(C$M[C$x+0],C$M[C$x+1],C$M[C$x+2],C$M[C$x+3],C$M[C$x+4],C$M[C$x+5],C$M[C$x+6],C$M[C$x+7],C$M[C$x+8],C$M[C$x+9],C$T,C$c)},C$o.transformVector3ArrayByQuat=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$T.elements,C$l=C$s[C$M],C$u=C$s[C$M+1],C$E=C$s[C$M+2],C$O=C$c[0],C$U=C$c[1],C$p=C$c[2],C$_=C$c[3],C$R=C$_*C$l+C$U*C$E-C$p*C$u,C$q=C$_*C$u+C$p*C$l-C$O*C$E,C$G=C$_*C$E+C$O*C$u-C$U*C$l,C$g=-C$O*C$l-C$U*C$u-C$p*C$E;C$X[C$x]=C$R*C$_+C$g*-C$O+C$q*-C$p-C$G*-C$U,C$X[C$x+1]=C$q*C$_+C$g*-C$U+C$G*-C$O-C$R*-C$p,C$X[C$x+2]=C$G*C$_+C$g*-C$p+C$R*-C$U-C$q*-C$O},C$o.mulMatrixByArray=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u,C$E,C$O,C$U;if(C$x===C$T){for(C$T=C$o._tempArray16_3,C$l=0;C$l<16;++C$l)C$T[C$l]=C$x[C$c+C$l];C$X=0}for(C$l=0;C$l<4;C$l++)C$u=C$s[C$M+C$l],C$E=C$s[C$M+C$l+4],C$O=C$s[C$M+C$l+8],C$U=C$s[C$M+C$l+12],C$x[C$c+C$l]=C$u*C$T[C$X+0]+C$E*C$T[C$X+1]+C$O*C$T[C$X+2]+C$U*C$T[C$X+3],C$x[C$c+C$l+4]=C$u*C$T[C$X+4]+C$E*C$T[C$X+5]+C$O*C$T[C$X+6]+C$U*C$T[C$X+7],C$x[C$c+C$l+8]=C$u*C$T[C$X+8]+C$E*C$T[C$X+9]+C$O*C$T[C$X+10]+C$U*C$T[C$X+11],C$x[C$c+C$l+12]=C$u*C$T[C$X+12]+C$E*C$T[C$X+13]+C$O*C$T[C$X+14]+C$U*C$T[C$X+15]},C$o.mulMatrixByArrayFast=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u,C$E,C$O,C$U;for(C$l=0;C$l<4;C$l++)C$u=C$s[C$M+C$l],C$E=C$s[C$M+C$l+4],C$O=C$s[C$M+C$l+8],C$U=C$s[C$M+C$l+12],C$x[C$c+C$l]=C$u*C$T[C$X+0]+C$E*C$T[C$X+1]+C$O*C$T[C$X+2]+C$U*C$T[C$X+3],C$x[C$c+C$l+4]=C$u*C$T[C$X+4]+C$E*C$T[C$X+5]+C$O*C$T[C$X+6]+C$U*C$T[C$X+7],C$x[C$c+C$l+8]=C$u*C$T[C$X+8]+C$E*C$T[C$X+9]+C$O*C$T[C$X+10]+C$U*C$T[C$X+11],C$x[C$c+C$l+12]=C$u*C$T[C$X+12]+C$E*C$T[C$X+13]+C$O*C$T[C$X+14]+C$U*C$T[C$X+15]},C$o.mulMatrixByArrayAndMatrixFast=function(C$s,C$M,C$T,C$X,C$x){var C$c,C$l,C$u,C$E,C$O,C$U=C$T.elements,C$p=C$U[0],C$_=C$U[1],C$R=C$U[2],C$q=C$U[3],C$G=C$U[4],C$g=C$U[5],C$f=C$U[6],C$J=C$U[7],C$P=C$U[8],C$t=C$U[9],C$r=C$U[10],C$N=C$U[11],C$w=C$U[12],C$k=C$U[13],C$A=C$U[14],C$D=C$U[15],C$h=C$M,C$Q=C$M+4,C$v=C$M+8,C$z=C$M+12,C$B=C$x,C$o=C$x+4,C$C=C$x+8,C$m=C$x+12;for(C$c=0;C$c<4;C$c++)C$l=C$s[C$h+C$c],C$u=C$s[C$Q+C$c],C$E=C$s[C$v+C$c],C$O=C$s[C$z+C$c],C$X[C$B+C$c]=C$l*C$p+C$u*C$_+C$E*C$R+C$O*C$q,C$X[C$o+C$c]=C$l*C$G+C$u*C$g+C$E*C$f+C$O*C$J,C$X[C$C+C$c]=C$l*C$P+C$u*C$t+C$E*C$r+C$O*C$N,C$X[C$m+C$c]=C$l*C$w+C$u*C$k+C$E*C$A+C$O*C$D},C$o.createAffineTransformationArray=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p){var C$_=C$X+C$X,C$R=C$x+C$x,C$q=C$c+C$c,C$G=C$X*C$_,C$g=C$X*C$R,C$f=C$X*C$q,C$J=C$x*C$R,C$P=C$x*C$q,C$t=C$c*C$q,C$r=C$l*C$_,C$N=C$l*C$R,C$w=C$l*C$q;C$U[C$p+0]=(1-(C$J+C$t))*C$u,C$U[C$p+1]=(C$g+C$w)*C$u,C$U[C$p+2]=(C$f-C$N)*C$u,C$U[C$p+3]=0,C$U[C$p+4]=(C$g-C$w)*C$E,C$U[C$p+5]=(1-(C$G+C$t))*C$E,C$U[C$p+6]=(C$P+C$r)*C$E,C$U[C$p+7]=0,C$U[C$p+8]=(C$f+C$N)*C$O,C$U[C$p+9]=(C$P-C$r)*C$O,C$U[C$p+10]=(1-(C$G+C$J))*C$O,C$U[C$p+11]=0,C$U[C$p+12]=C$s,C$U[C$p+13]=C$M,C$U[C$p+14]=C$T,C$U[C$p+15]=1},C$o.transformVector3ArrayToVector3ArrayCoordinate=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$o._tempArray4_0,C$l=C$s[C$M+0],C$u=C$s[C$M+1],C$E=C$s[C$M+2],C$O=C$T.elements;C$c[0]=C$l*C$O[0]+C$u*C$O[4]+C$E*C$O[8]+C$O[12],C$c[1]=C$l*C$O[1]+C$u*C$O[5]+C$E*C$O[9]+C$O[13],C$c[2]=C$l*C$O[2]+C$u*C$O[6]+C$E*C$O[10]+C$O[14],C$c[3]=1/(C$l*C$O[3]+C$u*C$O[7]+C$E*C$O[11]+C$O[15]),C$X[C$x+0]=C$c[0]*C$c[3],C$X[C$x+1]=C$c[1]*C$c[3],C$X[C$x+2]=C$c[2]*C$c[3]},C$o.transformLightingMapTexcoordByUV0Array=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$T.elements;C$X[C$x+0]=C$s[C$M+0]*C$c[0]+C$c[2],C$X[C$x+1]=(C$s[C$M+1]-1)*C$c[1]+C$c[3]},C$o.transformLightingMapTexcoordByUV1Array=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$T.elements;C$X[C$x+0]=C$s[C$M+0]*C$c[0]+C$c[2],C$X[C$x+1]=1+C$s[C$M+1]*C$c[1]+C$c[3]},C$o.getURLVerion=function(C$s){var C$M=C$s.indexOf("?");return 0<=C$M?C$s.substr(C$M):null},C$o._quaternionCreateFromYawPitchRollArray=function(C$s,C$M,C$T,C$X){var C$x=.5*C$T,C$c=.5*C$M,C$l=.5*C$s,C$u=Math.sin(C$x),C$E=Math.cos(C$x),C$O=Math.sin(C$c),C$U=Math.cos(C$c),C$p=Math.sin(C$l),C$_=Math.cos(C$l);C$X[0]=C$_*C$O*C$E+C$p*C$U*C$u,C$X[1]=C$p*C$U*C$E-C$_*C$O*C$u,C$X[2]=C$_*C$U*C$u-C$p*C$O*C$E,C$X[3]=C$_*C$U*C$E+C$p*C$O*C$u},C$o._createAffineTransformationArray=function(C$s,C$M,C$T,C$X){var C$x=C$M[0],C$c=C$M[1],C$l=C$M[2],C$u=C$M[3],C$E=C$x+C$x,C$O=C$c+C$c,C$U=C$l+C$l,C$p=C$x*C$E,C$_=C$x*C$O,C$R=C$x*C$U,C$q=C$c*C$O,C$G=C$c*C$U,C$g=C$l*C$U,C$f=C$u*C$E,C$J=C$u*C$O,C$P=C$u*C$U,C$t=C$T[0],C$r=C$T[1],C$N=C$T[2];C$X[0]=(1-(C$q+C$g))*C$t,C$X[1]=(C$_+C$P)*C$t,C$X[2]=(C$R-C$J)*C$t,C$X[3]=0,C$X[4]=(C$_-C$P)*C$r,C$X[5]=(1-(C$p+C$g))*C$r,C$X[6]=(C$G+C$f)*C$r,C$X[7]=0,C$X[8]=(C$R+C$J)*C$N,C$X[9]=(C$G-C$f)*C$N,C$X[10]=(1-(C$p+C$q))*C$N,C$X[11]=0,C$X[12]=C$s[0],C$X[13]=C$s[1],C$X[14]=C$s[2],C$X[15]=1},C$o._mulMatrixArray=function(C$s,C$M,C$T,C$X){var C$x,C$c,C$l,C$u,C$E,C$O=C$M.elements,C$U=C$O[0],C$p=C$O[1],C$_=C$O[2],C$R=C$O[3],C$q=C$O[4],C$G=C$O[5],C$g=C$O[6],C$f=C$O[7],C$J=C$O[8],C$P=C$O[9],C$t=C$O[10],C$r=C$O[11],C$N=C$O[12],C$w=C$O[13],C$k=C$O[14],C$A=C$O[15],C$D=C$X,C$h=C$X+4,C$Q=C$X+8,C$v=C$X+12;for(C$x=0;C$x<4;C$x++)C$c=C$s[C$x],C$l=C$s[C$x+4],C$u=C$s[C$x+8],C$E=C$s[C$x+12],C$T[C$D+C$x]=C$c*C$U+C$l*C$p+C$u*C$_+C$E*C$R,C$T[C$h+C$x]=C$c*C$q+C$l*C$G+C$u*C$g+C$E*C$f,C$T[C$Q+C$x]=C$c*C$J+C$l*C$P+C$u*C$t+C$E*C$r,C$T[C$v+C$x]=C$c*C$N+C$l*C$w+C$u*C$k+C$E*C$A},C$o.getYawPitchRoll=function(C$s,C$M){C$o.transformQuat(C$lM.ForwardRH,C$s,C$TM.TEMPVector31),C$o.transformQuat(C$lM.Up,C$s,C$TM.TEMPVector32);var C$T=C$TM.TEMPVector32.elements;C$o.angleTo(C$lM.ZERO,C$TM.TEMPVector31,C$TM.TEMPVector33);var C$X=C$TM.TEMPVector33.elements;C$X[0]==Math.PI/2?(C$X[1]=C$o.arcTanAngle(C$T[2],C$T[0]),C$X[2]=0):C$X[0]==-Math.PI/2?(C$X[1]=C$o.arcTanAngle(-C$T[2],-C$T[0]),C$X[2]=0):(C$sM.createRotationY(-C$X[1],C$TM.TEMPMatrix0),C$sM.createRotationX(-C$X[0],C$TM.TEMPMatrix1),C$lM.transformCoordinate(C$TM.TEMPVector32,C$TM.TEMPMatrix0,C$TM.TEMPVector32),C$lM.transformCoordinate(C$TM.TEMPVector32,C$TM.TEMPMatrix1,C$TM.TEMPVector32),C$X[2]=C$o.arcTanAngle(C$T[1],-C$T[0])),C$X[1]<=-Math.PI&&(C$X[1]=Math.PI),C$X[2]<=-Math.PI&&(C$X[2]=Math.PI),C$X[1]>=Math.PI&&C$X[2]>=Math.PI&&(C$X[1]=0,C$X[2]=0,C$X[0]=Math.PI-C$X[0]),C$M[0]=C$X[1],C$M[1]=C$X[0],C$M[2]=C$X[2]},C$o.arcTanAngle=function(C$s,C$M){return 0==C$s?1==C$M?Math.PI/2:-Math.PI/2:0<C$s?Math.atan(C$M/C$s):C$s<0?0<C$M?Math.atan(C$M/C$s)+Math.PI:Math.atan(C$M/C$s)-Math.PI:0},C$o.angleTo=function(C$s,C$M,C$T){C$lM.subtract(C$M,C$s,C$TM.TEMPVector30),C$lM.normalize(C$TM.TEMPVector30,C$TM.TEMPVector30),C$T.elements[0]=Math.asin(C$TM.TEMPVector30.y),C$T.elements[1]=C$o.arcTanAngle(-C$TM.TEMPVector30.z,-C$TM.TEMPVector30.x)},C$o.transformQuat=function(C$s,C$M,C$T){var C$X=C$T.elements,C$x=C$s.elements,C$c=C$M,C$l=C$x[0],C$u=C$x[1],C$E=C$x[2],C$O=C$c[0],C$U=C$c[1],C$p=C$c[2],C$_=C$c[3],C$R=C$_*C$l+C$U*C$E-C$p*C$u,C$q=C$_*C$u+C$p*C$l-C$O*C$E,C$G=C$_*C$E+C$O*C$u-C$U*C$l,C$g=-C$O*C$l-C$U*C$u-C$p*C$E;C$X[0]=C$R*C$_+C$g*-C$O+C$q*-C$p-C$G*-C$U,C$X[1]=C$q*C$_+C$g*-C$U+C$G*-C$O-C$R*-C$p,C$X[2]=C$G*C$_+C$g*-C$p+C$R*-C$U-C$q*-C$O},C$o.quaterionNormalize=function(C$s,C$M){var C$T=C$s[0],C$X=C$s[1],C$x=C$s[2],C$c=C$s[3],C$l=C$T*C$T+C$X*C$X+C$x*C$x+C$c*C$c;0<C$l&&(C$l=1/Math.sqrt(C$l),C$M[0]=C$T*C$l,C$M[1]=C$X*C$l,C$M[2]=C$x*C$l,C$M[3]=C$c*C$l)},C$o.matrix4x4MultiplyFFF=function(C$s,C$M,C$T){var C$X,C$x,C$c,C$l,C$u;if(C$T===C$M)for(C$M=new Float32Array(16),C$X=0;C$X<16;++C$X)C$M[C$X]=C$T[C$X];for(C$X=0;C$X<4;C$X++)C$x=C$s[C$X],C$c=C$s[C$X+4],C$l=C$s[C$X+8],C$u=C$s[C$X+12],C$T[C$X]=C$x*C$M[0]+C$c*C$M[1]+C$l*C$M[2]+C$u*C$M[3],C$T[C$X+4]=C$x*C$M[4]+C$c*C$M[5]+C$l*C$M[6]+C$u*C$M[7],C$T[C$X+8]=C$x*C$M[8]+C$c*C$M[9]+C$l*C$M[10]+C$u*C$M[11],C$T[C$X+12]=C$x*C$M[12]+C$c*C$M[13]+C$l*C$M[14]+C$u*C$M[15]},C$o.matrix4x4MultiplyMFM=function(C$s,C$M,C$T){C$o.matrix4x4MultiplyFFF(C$s.elements,C$M,C$T.elements)},C$p(C$o,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new C$lM},"_tempVector3_1",function(){return this._tempVector3_1=new C$lM},"_tempVector3_2",function(){return this._tempVector3_2=new C$lM},"_tempVector3_3",function(){return this._tempVector3_3=new C$lM},"_tempVector3_4",function(){return this._tempVector3_4=new C$lM},"_tempVector3_5",function(){return this._tempVector3_5=new C$lM},"_tempVector3_6",function(){return this._tempVector3_6=new C$lM},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),C$o}(),C$fM=function(){function C$z(){}return C$R(C$z,"Laya3D"),C$z._cancelLoadByUrl=function(C$s){C$r.loader.cancelLoadByUrl(C$s),C$z._innerFirstLevelLoaderManager.cancelLoadByUrl(C$s),C$z._innerSecondLevelLoaderManager.cancelLoadByUrl(C$s),C$z._innerThirdLevelLoaderManager.cancelLoadByUrl(C$s),C$z._innerFourthLevelLoaderManager.cancelLoadByUrl(C$s)},C$z._changeWebGLSize=function(C$s,C$M){C$v.onStageResize(C$s,C$M),C$W.clientWidth=C$s,C$W.clientHeight=C$M},C$z.__init__=function(){var C$s=C$M.createMap;C$s.lh=[C$mM,"SPRITE3DHIERARCHY"],C$s.ls=[C$CM,"SPRITE3DHIERARCHY"],C$s.lm=[C$LM,"MESH"],C$s.lmat=[C$IM,"MATERIAL"],C$s.jpg=[C$KM,"nativeimage"],C$s.jpeg=[C$KM,"nativeimage"],C$s.png=[C$KM,"nativeimage"],C$s.pkm=[C$KM,"arraybuffer"],C$s.raw=[C$VM,"arraybuffer"],C$s.mipmaps=[C$VM,"arraybuffer"],C$f.parserMap.SPRITE3DHIERARCHY=C$z._loadHierarchy,C$f.parserMap.MESH=C$z._loadMesh,C$f.parserMap.MATERIAL=C$z._loadMaterial,C$f.parserMap.TEXTURECUBE=C$z._loadTextureCube,C$f.parserMap.TERRAIN=C$z._loadTerrain,C$z._innerFirstLevelLoaderManager.on("error",null,C$z._eventLoadManagerError),C$z._innerSecondLevelLoaderManager.on("error",null,C$z._eventLoadManagerError),C$z._innerThirdLevelLoaderManager.on("error",null,C$z._eventLoadManagerError),C$z._innerFourthLevelLoaderManager.on("error",null,C$z._eventLoadManagerError)},C$z.READ_BLOCK=function(){return C$z._readData.pos+=4,!0},C$z.READ_DATA=function(){return C$z._DATA.offset=C$z._readData.getUint32(),C$z._DATA.size=C$z._readData.getUint32(),!0},C$z.READ_STRINGS=function(){var C$s=[],C$M={offset:0,size:0};C$M.offset=C$z._readData.getUint16(),C$M.size=C$z._readData.getUint16();C$z._readData.pos;C$z._readData.pos=C$M.offset+C$z._DATA.offset;for(var C$T=0;C$T<C$M.size;C$T++){var C$X=C$z._readData.readUTFString();-1===C$X.lastIndexOf(".lmat")&&-1===C$X.lastIndexOf(".lpbr")||C$s.push(C$X)}return C$s},C$z.formatRelativePath=function(C$s,C$M){var C$T;if("."===C$M.charAt(0)){for(var C$X=(C$s+C$M).split("/"),C$x=0,C$c=C$X.length;C$x<C$c;C$x++)if(".."==C$X[C$x]){var C$l=C$x-1;0<C$l&&".."!==C$X[C$l]&&(C$X.splice(C$l,2),C$x-=2)}C$T=C$X.join("/")}else C$T=C$s+C$M;return null!=C$Q.customFormat&&(C$T=C$Q.customFormat(C$T,null)),C$T},C$z._eventLoadManagerError=function(C$s){C$r.loader.event("error",C$s)},C$z._addHierarchyInnerUrls=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l=C$z.formatRelativePath(C$X,C$x);C$T&&(C$l+=C$T),C$s.push({url:C$l,clas:C$c}),C$M[C$x]=C$l},C$z._getSprite3DHierarchyInnerUrls=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){var C$u,C$E=0,C$O=0;switch(C$s.type){case"Scene":var C$U=C$s.customProps.lightmaps;for(C$E=0,C$O=C$U.length;C$E<C$O;C$E++){var C$p=C$U[C$E].replace(".exr",".png");C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$p,C$KM)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var C$_;if(C$s.instanceParams)(C$_=C$s.instanceParams.loadPath)&&C$z._addHierarchyInnerUrls(C$M,C$x,C$c,C$l,C$_,C$LM);else{(C$_=(C$u=C$s.customProps).meshPath)&&C$z._addHierarchyInnerUrls(C$M,C$x,C$c,C$l,C$_,C$LM);var C$R=C$u.materials;if(C$R)for(C$E=0,C$O=C$R.length;C$E<C$O;C$E++){for(var C$q=C$R[C$E],C$G=C$q.type.split("."),C$g=C$B.window,C$f=0,C$J=C$G.length;C$f<C$J;++C$f){C$g=C$g[this.clasPaths[C$f]]}if("function"!=typeof C$g)throw"_getSprite3DHierarchyInnerUrls 错误: "+C$q.type+" 不是类";C$z._addHierarchyInnerUrls(C$T,C$x,C$c,C$l,C$q.path,C$g)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var C$P=(C$u=C$s.customProps).meshPath;C$P&&C$z._addHierarchyInnerUrls(C$M,C$x,C$c,C$l,C$P,C$LM);var C$t=C$u.material;if(C$t){C$G=C$t.type.split("."),C$g=C$B.window;for(C$f=0,C$J=C$G.length;C$f<C$J;++C$f){C$g=C$g[this.clasPaths[C$f]]}C$z._addHierarchyInnerUrls(C$T,C$x,C$c,C$l,C$t.path,C$g)}else{var C$r=C$u.materialPath;if(C$r)C$z._addHierarchyInnerUrls(C$T,C$x,C$c,C$l,C$r,ShurikenParticleMaterial);else{var C$N=C$u.texturePath;C$N&&C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$N,C$KM)}}break;case"Terrain":C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$s.customProps.dataPath,TerrainRes)}var C$w=C$s.components;for(var C$k in C$w){var C$A=C$w[C$k];switch(C$k){case"Animator":var C$D=C$A.avatarPath;if(C$D)C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$D,Avatar);else{var C$h=C$A.avatar;C$h&&C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$h.path,Avatar)}var C$Q=C$A.clipPaths;for(C$E=0,C$O=C$Q.length;C$E<C$O;C$E++)C$z._addHierarchyInnerUrls(C$X,C$x,C$c,C$l,C$Q[C$E],AnimationClip)}}var C$v=C$s.child;for(C$E=0,C$O=C$v.length;C$E<C$O;C$E++)C$z._getSprite3DHierarchyInnerUrls(C$v[C$E],C$M,C$T,C$X,C$x,C$c,C$l)},C$z._loadHierarchy=function(C$s){C$s.on("loaded",null,C$z._onHierarchylhLoaded,[C$s,C$s._class._getGroup()]),C$s.load(C$s.url,"json",!1,null,!0)},C$z._onHierarchylhLoaded=function(C$s,C$M,C$T){if(C$s._class.destroyed)C$s.endLoad();else{var C$X=C$s.url,C$x=C$gM.getURLVerion(C$X),C$c=C$Q.getPath(C$X),C$l=[],C$u=[],C$E=[],C$O={};C$z._getSprite3DHierarchyInnerUrls(C$T,C$l,C$u,C$E,C$O,C$x,C$c);var C$U=C$l.length+C$u.length+C$E.length,C$p=C$U+1,C$_=1/C$p;if(C$z._onProcessChange(C$s,0,C$_,1),0<C$E.length){var C$R=C$U/C$p,C$q=C$h.create(null,C$z._onProcessChange,[C$s,C$_,C$R],!1);C$z._innerFourthLevelLoaderManager.create(C$E,C$h.create(null,C$z._onHierarchyInnerForthLevResouLoaded,[C$s,C$M,C$q,C$T,C$O,C$l,C$u,C$_+C$R*C$E.length,C$R]),C$q,null,null,1,!0,C$M)}else C$z._onHierarchyInnerForthLevResouLoaded(C$s,C$M,null,C$T,C$O,C$l,C$u,C$_,C$R)}},C$z._onHierarchyInnerForthLevResouLoaded=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){if(C$s._class.destroyed)C$s.endLoad();else if(C$T&&C$T.recover(),0<C$l.length){var C$O=C$h.create(null,C$z._onProcessChange,[C$s,C$u,C$E],!1);C$z._innerSecondLevelLoaderManager.create(C$l,C$h.create(null,C$z._onHierarchyInnerSecondLevResouLoaded,[C$s,C$M,C$O,C$X,C$x,C$c,C$u+C$E*C$l.length,C$E]),C$T,null,null,1,!0,C$M)}else C$z._onHierarchyInnerSecondLevResouLoaded(C$s,C$M,null,C$X,C$x,C$c,C$u,C$E)},C$z._onHierarchyInnerSecondLevResouLoaded=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u){if(C$s._class.destroyed)C$s.endLoad();else if(C$T&&C$T.recover(),0<C$c.length){var C$E=C$h.create(null,C$z._onProcessChange,[C$s,C$l,C$u],!1);C$z._innerFirstLevelLoaderManager.create(C$c,C$h.create(null,C$z._onHierarchyInnerFirstLevResouLoaded,[C$s,C$E,C$X,C$x]),C$T,null,null,1,!0,C$M)}else C$z._onHierarchyInnerFirstLevResouLoaded(C$s,null,C$X,C$x)},C$z._onHierarchyInnerFirstLevResouLoaded=function(C$s,C$M,C$T,C$X){C$M&&C$M.recover(),C$s.endLoad([C$T,C$X])},C$z._loadTerrain=function(C$s){C$s.on("loaded",null,C$z._onTerrainLtLoaded,[C$s,C$s._class._getGroup()]),C$s.load(C$s.url,"json",!1,null,!0)},C$z._onTerrainLtLoaded=function(C$s,C$M,C$T){if(C$s._class.destroyed)C$s.endLoad();else{var C$X,C$x,C$c=C$s.url,C$l=C$gM.getURLVerion(C$c),C$u=C$Q.getPath(C$c),C$E=[],C$O={},C$U=0,C$p=0,C$_=C$T.heightData;C$X=C$_.url,C$x=C$z.formatRelativePath(C$u,C$X),C$l&&(C$x+=C$l),C$X=C$O[C$X]=C$x;var C$R=C$T.detailTexture;for(C$U=0,C$p=C$R.length;C$U<C$p;C$U++)C$E.push({url:C$R[C$U].diffuse});var C$q=C$T.normalMap;for(C$U=0,C$p=C$q.length;C$U<C$p;C$U++)C$E.push({url:C$q[C$U]});var C$G=C$T.alphaMap;for(C$U=0,C$p=C$G.length;C$U<C$p;C$U++)C$E.push({url:C$G[C$U],params:[!1,!1,6408,!0]});for(C$U=0,C$p=C$E.length;C$U<C$p;C$U++){var C$g=C$E[C$U].url;C$x=C$z.formatRelativePath(C$u,C$g),C$l&&(C$x+=C$l),C$E[C$U].url=C$x,C$O[C$g]=C$x}var C$f=C$E.length,C$J=C$f+2,C$P=1/C$J;C$z._onProcessChange(C$s,0,C$P,1);var C$t={heightMapLoaded:!1,texturesLoaded:!1},C$r=C$h.create(null,C$z._onProcessChange,[C$s,C$P,C$P],!1);C$z._innerFourthLevelLoaderManager.create(C$X,C$h.create(null,C$z._onTerrainHeightMapLoaded,[C$s,C$r,C$T,C$O,C$t]),C$r,null,[C$_.numX,C$_.numZ,C$_.bitType,C$_.value],1,!0,C$M);var C$N=C$h.create(null,C$z._onProcessChange,[C$s,2*C$P,C$f/C$J],!1);C$z._innerFourthLevelLoaderManager.create(C$E,C$h.create(null,C$z._onTerrainTexturesLoaded,[C$s,C$N,C$T,C$O,C$t]),C$N,null,null,1,!0,C$M)}},C$z._onTerrainHeightMapLoaded=function(C$s,C$M,C$T,C$X,C$x){C$x.heightMapLoaded=!0,C$x.texturesLoaded&&(C$s.endLoad([C$T,C$X]),C$M.recover())},C$z._onTerrainTexturesLoaded=function(C$s,C$M,C$T,C$X,C$x){C$x.texturesLoaded=!0,C$x.heightMapLoaded&&(C$s.endLoad([C$T,C$X]),C$M.recover())},C$z._loadMesh=function(C$s){C$s.on("loaded",null,C$z._onMeshLmLoaded,[C$s,C$s._class._getGroup()]),C$s.load(C$s.url,"arraybuffer",!1,null,!0)},C$z._onMeshLmLoaded=function(C$s,C$M,C$T){if(C$s._class.destroyed)C$s.endLoad();else{var C$X,C$x,C$c,C$l=C$s.url,C$u=C$gM.getURLVerion(C$l),C$E=C$Q.getPath(C$l),C$O={},C$U=0,C$p=0;switch((C$z._readData=new C$N(C$T)).pos=0,C$z._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var C$_=C$z._readData.getUint32();C$z._readData.pos=C$z._readData.pos+4,C$p=C$z._readData.getUint16(),C$z._readData.pos=C$z._readData.pos+8*C$p;var C$R=C$z._readData.getUint32();for(C$p=C$z._readData.getUint16(),C$z._readData.pos=C$_+C$R,C$X=[],C$U=0;C$U<C$p;C$U++){var C$q=C$z._readData.readUTFString();-1!==C$q.lastIndexOf(".lmat")&&C$X.push(C$q)}break;default:for(C$z.READ_BLOCK(),C$U=0;C$U<2;C$U++){var C$G=C$z._readData.getUint16(),C$g=C$z._strings[C$G],C$f=C$z["READ_"+C$g];if(null==C$f)throw new Error("model file err,no this function:"+C$G+" "+C$g);1===C$U?C$X=C$f.call():C$f.call()}}for(C$U=0,C$c=C$X.length;C$U<C$c;C$U++){var C$J=C$X[C$U];C$x=C$z.formatRelativePath(C$E,C$J),C$u&&(C$x+=C$u),C$X[C$U]=C$x,C$O[C$J]=C$x}if(0<C$X.length){C$z._onProcessChange(C$s,0,.5,1);var C$P=C$h.create(null,C$z._onProcessChange,[C$s,.5,.5],!1);C$z._innerSecondLevelLoaderManager.create(C$X,C$h.create(null,C$z._onMeshMateialLoaded,[C$s,C$P,C$T,C$O]),C$P,null,null,1,!0,C$M)}else C$s.endLoad([C$T,C$O])}},C$z._onMeshMateialLoaded=function(C$s,C$M,C$T,C$X){C$s.endLoad([C$T,C$X]),C$M.recover()},C$z._getMaterialTexturePath=function(C$s,C$M,C$T){var C$X=C$s.length-4;return C$s.indexOf(".dds")!=C$X&&C$s.indexOf(".tga")!=C$X&&C$s.indexOf(".exr")!=C$X&&C$s.indexOf(".DDS")!=C$X&&C$s.indexOf(".TGA")!=C$X&&C$s.indexOf(".EXR")!=C$X||(C$s=C$s.substr(0,C$X)+".png"),C$s=C$z.formatRelativePath(C$T,C$s),C$M&&(C$s+=C$M),C$s},C$z._loadMaterial=function(C$s){C$s.on("loaded",null,C$z._onMaterilLmatLoaded,[C$s,C$s._class._getGroup()]),C$s.load(C$s.url,"json",!1,null,!0)},C$z._onMaterilLmatLoaded=function(C$s,C$M,C$T){if(C$s._class.destroyed)C$s.endLoad();else{var C$X,C$x=C$s.url,C$c=C$gM.getURLVerion(C$x),C$l=C$Q.getPath(C$x),C$u=[],C$E={},C$O=C$T.customProps,C$U=C$T.version;if(C$U)switch(C$U){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var C$p=C$T.props.textures,C$_=0,C$R=C$p.length;C$_<C$R;C$_++){var C$q=C$p[C$_],C$G=C$q.path;if(C$G){var C$g=C$G.length-4;C$G.indexOf(".exr")!=C$g&&C$G.indexOf(".EXR")!=C$g||(C$G=C$G.substr(0,C$g)+".png"),C$X=C$z.formatRelativePath(C$l,C$G),C$c&&(C$X+=C$c),C$u.push({url:C$X,params:C$q.params}),C$E[C$G]=C$X}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var C$f=C$O.diffuseTexture.texture2D;if(C$f&&(C$X=C$z._getMaterialTexturePath(C$f,C$c,C$l),C$u.push(C$X),C$E[C$f]=C$X),C$O.normalTexture){var C$J=C$O.normalTexture.texture2D;C$J&&(C$X=C$z._getMaterialTexturePath(C$J,C$c,C$l),C$u.push(C$X),C$E[C$J]=C$X)}if(C$O.specularTexture){var C$P=C$O.specularTexture.texture2D;C$P&&(C$X=C$z._getMaterialTexturePath(C$P,C$c,C$l),C$u.push(C$X),C$E[C$P]=C$X)}if(C$O.emissiveTexture){var C$t=C$O.emissiveTexture.texture2D;C$t&&(C$X=C$z._getMaterialTexturePath(C$t,C$c,C$l),C$u.push(C$X),C$E[C$t]=C$X)}if(C$O.ambientTexture){var C$r=C$O.ambientTexture.texture2D;C$r&&(C$X=C$z._getMaterialTexturePath(C$r,C$c,C$l),C$u.push(C$X),C$E[C$r]=C$X)}if(C$O.reflectTexture){var C$N=C$O.reflectTexture.texture2D;C$N&&(C$X=C$z._getMaterialTexturePath(C$N,C$c,C$l),C$u.push(C$X),C$E[C$N]=C$X)}}var C$w=C$u.length,C$k=C$w+1,C$A=1/C$k;if(C$z._onProcessChange(C$s,0,C$A,1),0<C$w){var C$D=C$h.create(null,C$z._onProcessChange,[C$s,C$A,C$w/C$k],!1);C$z._innerFourthLevelLoaderManager.create(C$u,C$h.create(null,C$z._onMateialTexturesLoaded,[C$s,C$D,C$T,C$E]),C$D,C$KM,null,1,!0,C$M)}else C$z._onMateialTexturesLoaded(C$s,null,C$T,null)}},C$z._onMateialTexturesLoaded=function(C$s,C$M,C$T,C$X){C$s.endLoad([C$T,C$X]),C$M&&C$M.recover()},C$z._loadTextureCube=function(C$s){C$s.on("loaded",null,C$z._onTextureCubeLtcLoaded,[C$s]),C$s.load(C$s.url,"json",!1,null,!0)},C$z._onTextureCubeLtcLoaded=function(C$s,C$M){if(C$s._class.destroyed)C$s.endLoad();else{var C$T=C$Q.getPath(C$s.url),C$X=[C$z.formatRelativePath(C$T,C$M.px),C$z.formatRelativePath(C$T,C$M.nx),C$z.formatRelativePath(C$T,C$M.py),C$z.formatRelativePath(C$T,C$M.ny),C$z.formatRelativePath(C$T,C$M.pz),C$z.formatRelativePath(C$T,C$M.nz)];C$z._onProcessChange(C$s,0,1/7,1);var C$x=C$h.create(null,C$z._onProcessChange,[C$s,1/7,6/7],!1);C$z._innerFourthLevelLoaderManager.load(C$X,C$h.create(null,C$z._onTextureCubeImagesLoaded,[C$s,C$X,C$x]),C$x,"nativeimage")}},C$z._onTextureCubeImagesLoaded=function(C$s,C$M,C$T){var C$X=[];C$X.length=6;for(var C$x=0;C$x<6;C$x++){var C$c=C$M[C$x];C$X[C$x]=C$f.getRes(C$c),C$f.clearRes(C$c)}C$s.endLoad(C$X),C$T.recover()},C$z._onProcessChange=function(C$s,C$M,C$T,C$X){(C$X=C$M+C$X*C$T)<1&&C$s.event("progress",C$X)},C$z.init=function(C$s,C$M,C$T,C$X,C$x,C$c){if(void 0===C$T&&(C$T=!1),void 0===C$X&&(C$X=!1),void 0===C$x&&(C$x=!0),void 0===C$c&&(C$c=!0),C$J.update3DLoop=function(){},C$J.cancelLoadByUrl=function(C$s){C$z._cancelLoadByUrl(C$s)},C$E.isAntialias=C$T,C$E.isAlpha=C$X,C$E.premultipliedAlpha=C$x,C$E.isStencil=C$c,!C$v.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");C$J.changeWebGLSize=C$z._changeWebGLSize,C$G.is3DMode=!0,C$r.init(C$s,C$M),C$o.__init__(),C$pM.__init__(),C$FM.__init__(),C$b.__init__(),C$z.__init__(),C$l.maxTextureCount=2,(C$z.debugMode||C$a.debugMode)&&(C$z._debugPhasorSprite=new C$n)},C$z.HIERARCHY="SPRITE3DHIERARCHY",C$z.MESH="MESH",C$z.MATERIAL="MATERIAL",C$z.PBRMATERIAL="PBRMTL",C$z.TEXTURECUBE="TEXTURECUBE",C$z.TERRAIN="TERRAIN",C$z._readData=null,C$z._debugPhasorSprite=null,C$z.debugMode=!1,C$p(C$z,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new C$M},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new C$M},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new C$M},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new C$M}]),C$z}(),C$JM=function(C$s){function C$x(C$s){C$x.__super.call(this),this._owner=C$s,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}C$R(C$x,"laya.d3.animation.AnimationTransform3D",C$c);var C$M=C$x.prototype;return C$M._getlocalMatrix=function(){return this._localUpdate&&(C$gM._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},C$M._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldTransform()}},C$M._setWorldMatrixAndUpdate=function(C$s){if(this._worldMatrix=C$s,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var C$M=this._getlocalMatrix(),C$T=0;C$T<16;++C$T)this._worldMatrix[C$T]=C$M[C$T];else C$gM.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},C$M._setWorldMatrixNoUpdate=function(C$s){this._worldMatrix=C$s},C$M._setWorldMatrixIgnoreUpdate=function(C$s){this._worldMatrix=C$s,this._worldUpdate=!1},C$M.getLocalPosition=function(){return this._localPosition},C$M.setLocalPosition=function(C$s){if(this._parent)this._localPosition=C$s,this._localUpdate=!0,this._onWorldTransform();else{var C$M=this._entity.owner._transform,C$T=this._entity.localPosition,C$X=C$T.elements;C$X[0]=C$s[0],C$X[1]=C$s[1],C$X[2]=C$s[2],C$M.localPosition=C$T}},C$M.getLocalRotation=function(){if(this._localQuaternionUpdate){var C$s=this._localRotationEuler;C$gM._quaternionCreateFromYawPitchRollArray(C$s[1]/C$x._angleToRandin,C$s[0]/C$x._angleToRandin,C$s[2]/C$x._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},C$M.setLocalRotation=function(C$s){if(this._parent)this._localRotation=C$s,C$gM.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var C$M=this._entity.owner._transform,C$T=this._entity.localRotation,C$X=C$T.elements;C$X[0]=C$s[0],C$X[1]=C$s[1],C$X[2]=C$s[2],C$X[3]=C$s[3],C$M.localRotation=C$T}},C$M.getLocalScale=function(){return this._localScale},C$M.setLocalScale=function(C$s){if(this._parent)this._localScale=C$s,this._localUpdate=!0,this._onWorldTransform();else{var C$M=this._entity.owner._transform,C$T=this._entity.localScale,C$X=C$T.elements;C$X[0]=C$s[0],C$X[1]=C$s[1],C$X[2]=C$s[2],C$M.localScale=C$T}},C$M.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){C$gM.getYawPitchRoll(this._localRotation,C$x._tempVector3);var C$s=C$x._tempVector3,C$M=this._localRotationEuler;C$M[0]=C$s[1]*C$x._angleToRandin,C$M[1]=C$s[0]*C$x._angleToRandin,C$M[2]=C$s[2]*C$x._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},C$M.setLocalRotationEuler=function(C$s){if(this._parent)C$gM._quaternionCreateFromYawPitchRollArray(C$s[1]/C$x._angleToRandin,C$s[0]/C$x._angleToRandin,C$s[2]/C$x._angleToRandin,this._localRotation),this._localRotationEuler=C$s,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var C$M=this._entity.owner._transform,C$T=this._entity.localRotationEuler,C$X=C$T.elements;C$X[0]=C$s[0],C$X[1]=C$s[1],C$X[2]=C$s[2],C$M.localRotationEuler=C$T}},C$M.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)C$gM.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var C$s=this._getlocalMatrix(),C$M=0;C$M<16;++C$M)this._worldMatrix[C$M]=C$s[C$M];this._worldUpdate=!1}return this._worldMatrix},C$M.setParent=function(C$s){if(this._parent!==C$s){if(this._parent){var C$M=this._parent._childs,C$T=C$M.indexOf(this);C$M.splice(C$T,1)}C$s&&(C$s._childs.push(this),C$s&&this._onWorldTransform()),this._parent=C$s}},C$p(C$x,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),C$x}(),C$PM=function(C$s){function C$M(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,C$M.__super.call(this),this._destroyed=!1,this._id=C$M._uniqueIDCounter,C$M._uniqueIDCounter++}C$R(C$M,"laya.d3.component.Component3D",C$c);var C$T=C$M.prototype;return C$r.imps(C$T,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),C$T._initialize=function(C$s){this._owner=C$s,this._enable=!0,this.started=!1,this._load(C$s)},C$T._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},C$T._load=function(C$s){},C$T._start=function(C$s){},C$T._update=function(C$s){},C$T._lateUpdate=function(C$s){},C$T._preRenderUpdate=function(C$s){},C$T._postRenderUpdate=function(C$s){},C$T._unload=function(C$s){this.offAll()},C$T._cloneTo=function(C$s){},C$q(0,C$T,"id",function(){return this._id}),C$q(0,C$T,"destroyed",function(){return this._destroyed}),C$q(0,C$T,"owner",function(){return this._owner}),C$q(0,C$T,"enable",function(){return this._enable},function(C$s){this._enable!==C$s&&(this._enable=C$s,this.event("enablechanged",this._enable))}),C$q(0,C$T,"isSingleton",function(){return C$M._isSingleton}),C$M._isSingleton=!0,C$M._uniqueIDCounter=1,C$M}(),C$tM=function(C$s){function C$M(){this._destroyed=!1,C$M.__super.call(this),this._destroyed=!1}C$R(C$M,"laya.d3.core.GeometryFilter",C$c);var C$T=C$M.prototype;return C$r.imps(C$T,{"laya.resource.IDestroy":!0}),C$T._destroy=function(){this.offAll(),this._destroyed=!0},C$q(0,C$T,"_isAsyncLoaded",function(){return!0}),C$q(0,C$T,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),C$q(0,C$T,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),C$q(0,C$T,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),C$q(0,C$T,"destroyed",function(){return this._destroyed}),C$M}(),C$rM=function(C$s){function C$X(C$s){C$X.__super.call(this),this._id=++C$X._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new C$as(new C$lM,new C$lM),this._boundingBoxCenter=new C$lM,this._boundingSphere=new C$is(new C$lM,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=C$s,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}C$R(C$X,"laya.d3.core.render.BaseRender",C$c);var C$M=C$X.prototype;return C$r.imps(C$M,{"laya.resource.IDestroy":!0}),C$M._changeMaterialReference=function(C$s,C$M){C$s&&C$s._removeReference(),C$M._addReference()},C$M._getInstanceMaterial=function(C$s,C$M){var C$T=new C$s.constructor;return C$s.cloneTo(C$T),C$T.name=C$T.name+"(Instance)",this._materialsInstance[C$M]=!0,this._changeMaterialReference(this._materials[C$M],C$T),this._materials[C$M]=C$T},C$M._setShaderValuelightMap=function(C$s){this._setShaderValueTexture(3,C$s)},C$M._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},C$M._renderRenderableBoundBox=function(){var C$s=C$fM._debugPhasorSprite,C$M=this.boundingBox,C$T=C$X._tempBoundBoxCorners;C$M.getCorners(C$T),C$s.line(C$T[0],C$X._greenColor,C$T[1],C$X._greenColor),C$s.line(C$T[2],C$X._greenColor,C$T[3],C$X._greenColor),C$s.line(C$T[4],C$X._greenColor,C$T[5],C$X._greenColor),C$s.line(C$T[6],C$X._greenColor,C$T[7],C$X._greenColor),C$s.line(C$T[0],C$X._greenColor,C$T[3],C$X._greenColor),C$s.line(C$T[1],C$X._greenColor,C$T[2],C$X._greenColor),C$s.line(C$T[2],C$X._greenColor,C$T[6],C$X._greenColor),C$s.line(C$T[3],C$X._greenColor,C$T[7],C$X._greenColor),C$s.line(C$T[0],C$X._greenColor,C$T[4],C$X._greenColor),C$s.line(C$T[1],C$X._greenColor,C$T[5],C$X._greenColor),C$s.line(C$T[4],C$X._greenColor,C$T[7],C$X._greenColor),C$s.line(C$T[5],C$X._greenColor,C$T[6],C$X._greenColor)},C$M._calculateBoundingSphere=function(){throw"BaseRender: must override it."},C$M._calculateBoundingBox=function(){throw"BaseRender: must override it."},C$M._setShaderValueTexture=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M)},C$M._setShaderValueMatrix4x4=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M?C$M.elements:null)},C$M._setShaderValueColor=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M?C$M.elements:null)},C$M._setShaderValueBuffer=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M)},C$M._setShaderValueInt=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M)},C$M._setShaderValueBool=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M)},C$M._setShaderValueNumber=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M)},C$M._setShaderValueVector2=function(C$s,C$M){this._owner._shaderValues.setValue(C$s,C$M?C$M.elements:null)},C$M._addShaderDefine=function(C$s){this._owner._shaderDefineValue|=C$s},C$M._removeShaderDefine=function(C$s){this._owner._shaderDefineValue&=~C$s},C$M._renderUpdate=function(C$s){return!0},C$M._applyLightMapParams=function(){if(0<=this._lightmapIndex){var C$s=this._owner.scene;if(C$s){var C$M=C$s.getlightmaps()[this._lightmapIndex];C$M?(this._addShaderDefine(C$nM.SAHDERDEFINE_LIGHTMAP),C$M.loaded?this._setShaderValuelightMap(C$M):C$M.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(C$nM.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(C$nM.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(C$nM.SAHDERDEFINE_LIGHTMAP)},C$M._updateOctreeNode=function(){var C$s=this._treeNode;C$s&&this._octreeNodeNeedChange&&(C$s.updateObject(this),this._octreeNodeNeedChange=!1)},C$M._destroy=function(){this.offAll();var C$s=0,C$M=0;for(C$s=0,C$M=this._renderElements.length;C$s<C$M;C$s++)this._renderElements[C$s]._destroy();for(C$s=0,C$M=this._materials.length;C$s<C$M;C$s++)this._materials[C$s]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},C$q(0,C$M,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),C$q(0,C$M,"id",function(){return this._id}),C$q(0,C$M,"material",function(){var C$s=this._materials[0];if(C$s&&!this._materialsInstance[0]){var C$M=this._getInstanceMaterial(C$s,0);this.event("materialchanged",[this,0,C$M])}return this._materials[0]},function(C$s){this.sharedMaterial=C$s}),C$q(0,C$M,"sharedMaterial",function(){return this._materials[0]},function(C$s){var C$M=this._materials[0];C$M!==C$s&&(this._materials[0]=C$s,this._materialsInstance[0]=!1,this._changeMaterialReference(C$M,C$s),this.event("materialchanged",[this,0,C$s]))}),C$q(0,C$M,"lightmapIndex",function(){return this._lightmapIndex},function(C$s){this._lightmapIndex=C$s,this._applyLightMapParams()}),C$q(0,C$M,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(C$s){this._lightmapScaleOffset=C$s,this._setShaderValueColor(2,C$s),this._addShaderDefine(C$nM.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),C$q(0,C$M,"enable",function(){return this._enable},function(C$s){this._enable=C$s,this.event("enablechanged",[this,C$s])}),C$q(0,C$M,"materials",function(){for(var C$s=0,C$M=this._materials.length;C$s<C$M;C$s++)if(!this._materialsInstance[C$s]){var C$T=this._getInstanceMaterial(this._materials[C$s],C$s);this.event("materialchanged",[this,C$s,C$T])}return this._materials.slice()},function(C$s){this.sharedMaterials=C$s}),C$q(0,C$M,"sharedMaterials",function(){return this._materials.slice()},function(C$s){if(!C$s)throw new Error("MeshRender: shadredMaterials value can't be null.");var C$M=C$s.length;this._materialsInstance.length=C$M;for(var C$T=0;C$T<C$M;C$T++){var C$X=this._materials[C$T];C$X!==C$s[C$T]&&(this._materialsInstance[C$T]=!1,this._changeMaterialReference(C$X,C$s[C$T]),this.event("materialchanged",[this,C$T,C$s[C$T]]))}this._materials=C$s}),C$q(0,C$M,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),C$q(0,C$M,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var C$s=this.boundingBox;C$lM.add(C$s.min,C$s.max,this._boundingBoxCenter),C$lM.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),C$q(0,C$M,"receiveShadow",function(){return this._receiveShadow},function(C$s){this._receiveShadow!==C$s&&((this._receiveShadow=C$s)?this._addShaderDefine(C$RM.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(C$RM.SHADERDEFINE_RECEIVE_SHADOW))}),C$q(0,C$M,"destroyed",function(){return this._destroyed}),C$X._uniqueIDCounter=0,C$p(C$X,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM,new C$lM]},"_greenColor",function(){return this._greenColor=new C$uM(0,1,0,1)}]),C$X}(),C$NM=function(C$s){function C$u(C$s){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,C$u.__super.call(this),this._localPosition=new C$lM,this._localRotation=new C$TM(0,0,0,1),this._localScale=new C$lM(1,1,1),this._localRotationEuler=new C$lM,this._localMatrix=new C$sM,this._position=new C$lM,this._rotation=new C$TM(0,0,0,1),this._scale=new C$lM(1,1,1),this._worldMatrix=new C$sM,this._forward=new C$lM,this._up=new C$lM,this._right=new C$lM,this._owner=C$s,this._childs=[]}C$R(C$u,"laya.d3.core.Transform3D",C$c);var C$M=C$u.prototype;return C$M._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)C$sM.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var C$s=C$u._tempVector30;C$lM.multiply(this.pivot,this._localScale,C$s);var C$M=C$u._tempVector31;C$lM.subtract(C$s,this.pivot,C$M);var C$T=C$u._tempVector32,C$X=this.localRotation;C$lM.transformQuat(C$s,C$X,C$T),C$lM.subtract(C$T,C$s,C$T);var C$x=C$u._tempVector33;C$lM.subtract(this._localPosition,C$M,C$x),C$lM.subtract(C$x,C$T,C$x),C$sM.createAffineTransformation(C$x,C$X,this._localScale,this._localMatrix)}},C$M._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldPositionRotationTransform()}},C$M._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldPositionScaleTransform()}},C$M._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldPositionTransform()}},C$M._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldPositionRotationTransform()}},C$M._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldPositionScaleTransform()}},C$M._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._onWorldTransform()}},C$M.translate=function(C$s,C$M){void 0===C$M&&(C$M=!0),C$M?(C$sM.createFromQuaternion(this.localRotation,C$u._tempMatrix0),C$lM.transformCoordinate(C$s,C$u._tempMatrix0,C$u._tempVector30),C$lM.add(this.localPosition,C$u._tempVector30,this._localPosition),this.localPosition=this._localPosition):(C$lM.add(this.position,C$s,this._position),this.position=this._position)},C$M.rotate=function(C$s,C$M,C$T){var C$X;void 0===C$M&&(C$M=!0),void 0===C$T&&(C$T=!0),C$X=C$T?C$s:(C$lM.scale(C$s,Math.PI/180,C$u._tempVector30),C$u._tempVector30),C$TM.createFromYawPitchRoll(C$X.y,C$X.x,C$X.z,C$u._tempQuaternion0),C$M?(C$TM.multiply(this._localRotation,C$u._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(C$TM.multiply(C$u._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},C$M.lookAt=function(C$s,C$M,C$T){void 0===C$T&&(C$T=!1);var C$X,C$x=C$s.elements;if(C$T){if(C$X=this._localPosition.elements,Math.abs(C$X[0]-C$x[0])<C$Hs.zeroTolerance&&Math.abs(C$X[1]-C$x[1])<C$Hs.zeroTolerance&&Math.abs(C$X[2]-C$x[2])<C$Hs.zeroTolerance)return;C$TM.lookAt(this._localPosition,C$s,C$M,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var C$c=this.position;if(C$X=C$c.elements,Math.abs(C$X[0]-C$x[0])<C$Hs.zeroTolerance&&Math.abs(C$X[1]-C$x[1])<C$Hs.zeroTolerance&&Math.abs(C$X[2]-C$x[2])<C$Hs.zeroTolerance)return;C$TM.lookAt(C$c,C$s,C$M,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},C$q(0,C$M,"_isFrontFaceInvert",function(){var C$s=this.scale,C$M=C$s.x<0;return C$s.y<0&&(C$M=!C$M),C$s.z<0&&(C$M=!C$M),C$M}),C$q(0,C$M,"owner",function(){return this._owner}),C$q(0,C$M,"localRotation",function(){if(this._localQuaternionUpdate){var C$s=this._localRotationEuler.elements;C$TM.createFromYawPitchRoll(C$s[1]/C$u._angleToRandin,C$s[0]/C$u._angleToRandin,C$s[2]/C$u._angleToRandin,this._localRotation)}return this._localRotation},function(C$s){this._localRotation=C$s,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),C$q(0,C$M,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?C$sM.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(C$s){null===this._parent?C$s.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),C$sM.multiply(this._localMatrix,C$s,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=C$s,this._worldUpdate=!1}),C$q(0,C$M,"worldNeedUpdate",function(){return this._worldUpdate}),C$q(0,C$M,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(C$s){this._localMatrix=C$s,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),C$q(0,C$M,"dummy",function(){return this._dummy},function(C$s){this._dummy!==C$s&&(this._dummy&&(this._dummy._entity=null),C$s&&(C$s._entity=this),this._dummy=C$s)}),C$q(0,C$M,"localPosition",function(){return this._localPosition},function(C$s){this._localPosition=C$s,this._localUpdate=!0,this._onWorldPositionTransform()}),C$q(0,C$M,"position",function(){if(this._positionUpdate){if(null!=this._parent){var C$s=this._parent.position;C$lM.multiply(this._localPosition,this._parent.scale,C$u._tempVector30),C$lM.transformQuat(C$u._tempVector30,this._parent.rotation,C$u._tempVector30),C$lM.add(C$s,C$u._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(C$s){if(null!=this._parent){C$lM.subtract(C$s,this._parent.position,this._localPosition);var C$M=this._parent.scale.elements,C$T=C$M[0],C$X=C$M[1],C$x=C$M[2];if(1!==C$T||1!==C$X||1!==C$x){var C$c=C$u._tempVector30,C$l=C$c.elements;C$l[0]=1/C$T,C$l[1]=1/C$X,C$l[2]=1/C$x,C$lM.multiply(this._localPosition,C$c,this._localPosition)}this._parent.rotation.invert(C$u._tempQuaternion0),C$lM.transformQuat(this._localPosition,C$u._tempQuaternion0,this._localPosition)}else C$s.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=C$s,this._positionUpdate=!1}),C$q(0,C$M,"localScale",function(){return this._localScale},function(C$s){this._localScale=C$s,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),C$q(0,C$M,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(C$u._tempVector30);var C$s=C$u._tempVector30.elements,C$M=this._localRotationEuler.elements;C$M[0]=C$s[1]*C$u._angleToRandin,C$M[1]=C$s[0]*C$u._angleToRandin,C$M[2]=C$s[2]*C$u._angleToRandin}return this._localRotationEuler},function(C$s){this._localRotationEuler=C$s,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),C$q(0,C$M,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?C$TM.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(C$s){null!=this._parent?(this._parent.rotation.invert(C$u._tempQuaternion0),C$TM.multiply(C$s,C$u._tempQuaternion0,this._localRotation)):C$s.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=C$s,this._rotationUpdate=!1}),C$q(0,C$M,"scale",function(){return this._scaleUpdate&&(null!==this._parent?C$lM.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(C$s){if(null!==this._parent){var C$M=this._parent.scale.elements,C$T=C$u._tempVector30.elements;C$T[0]=1/C$M[0],C$T[1]=1/C$M[1],C$T[2]=1/C$M[2],C$lM.multiply(C$s,C$u._tempVector30,this._localScale)}else C$s.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=C$s,this._scaleUpdate=!1}),C$q(0,C$M,"rotationEuler",null,function(C$s){C$TM.createFromYawPitchRoll(C$s.y,C$s.x,C$s.z,this._rotation),this.rotation=this._rotation}),C$q(0,C$M,"forward",function(){var C$s=this.worldMatrix.elements;return this._forward.elements[0]=-C$s[8],this._forward.elements[1]=-C$s[9],this._forward.elements[2]=-C$s[10],this._forward}),C$q(0,C$M,"up",function(){var C$s=this.worldMatrix.elements;return this._up.elements[0]=C$s[4],this._up.elements[1]=C$s[5],this._up.elements[2]=C$s[6],this._up}),C$q(0,C$M,"right",function(){var C$s=this.worldMatrix.elements;return this._right.elements[0]=C$s[0],this._right.elements[1]=C$s[1],this._right.elements[2]=C$s[2],this._right}),C$q(0,C$M,"parent",function(){return this._parent},function(C$s){if(this._parent!==C$s){if(this._parent){var C$M=this._parent._childs,C$T=C$M.indexOf(this);C$M.splice(C$T,1)}C$s&&(C$s._childs.push(this),C$s&&this._onWorldTransform()),this._parent=C$s}}),C$p(C$u,["_tempVector30",function(){return this._tempVector30=new C$lM},"_tempVector31",function(){return this._tempVector31=new C$lM},"_tempVector32",function(){return this._tempVector32=new C$lM},"_tempVector33",function(){return this._tempVector33=new C$lM},"_tempQuaternion0",function(){return this._tempQuaternion0=new C$TM},"_tempMatrix0",function(){return this._tempMatrix0=new C$sM},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),C$u}(),C$wM=(function(C$s){function C$M(){this._rotation=0,this._matNeedUpdte=!1,C$M.__super.call(this),this._matrix=new C$sM,this._offset=new C$cM,this._tiling=new C$cM(1,1)}C$R(C$M,"laya.d3.core.TransformUV",C$c);var C$T=C$M.prototype;C$r.imps(C$T,{"laya.d3.core.IClone":!0}),C$T._updateMatrix=function(){C$M._tempOffsetV3.elements[0]=this._offset.x,C$M._tempOffsetV3.elements[1]=this._offset.y,C$TM.createFromYawPitchRoll(0,0,this._rotation,C$M._tempRotationQua),C$M._tempTitlingV3.elements[0]=this._tiling.x,C$M._tempTitlingV3.elements[1]=this._tiling.y,C$sM.createAffineTransformation(C$M._tempOffsetV3,C$M._tempRotationQua,C$M._tempTitlingV3,this._matrix)},C$T.cloneTo=function(C$s){C$s._matrix=this._matrix.clone(),C$s._offset=this._offset.clone(),C$s._rotation=this._rotation,C$s._tiling=this._tiling.clone()},C$T.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$T,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),C$q(0,C$T,"tiling",function(){return this._tiling},function(C$s){this._tiling=C$s,this._matNeedUpdte=!0}),C$q(0,C$T,"offset",function(){return this._offset},function(C$s){this._offset=C$s,this._matNeedUpdte=!0}),C$q(0,C$T,"rotation",function(){return this._rotation},function(C$s){this._rotation=C$s,this._matNeedUpdte=!0}),C$p(C$M,["_tempOffsetV3",function(){return this._tempOffsetV3=new C$lM(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new C$TM},"_tempTitlingV3",function(){return this._tempTitlingV3=new C$lM(1,1,1)}])}(),function(C$T){function C$s(){this.x=NaN,this.y=NaN,this.z=NaN,C$s.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}C$R(C$s,"laya.d3.core.particleShuriKen.module.shape.BoxShape",C$T);var C$M=C$s.prototype;C$M._getShapeBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=.5*-this.x,C$M[1]=.5*-this.y,C$M[2]=.5*-this.z;var C$T=C$s.max.elements;C$T[0]=.5*this.x,C$T[1]=.5*this.y,C$T[2]=.5*this.z},C$M._getSpeedBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=0,C$M[1]=0,C$M[2]=0;var C$T=C$s.max.elements;C$T[0]=0,C$T[1]=1,C$T[2]=0},C$M.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements,C$c=C$M.elements;C$T?(C$T.seed=C$X[16],C$K._randomPointInsideHalfUnitBox(C$s,C$T),C$X[16]=C$T.seed):C$K._randomPointInsideHalfUnitBox(C$s),C$x[0]=this.x*C$x[0],C$x[1]=this.y*C$x[1],C$x[2]=this.z*C$x[2],this.randomDirection?C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M):(C$c[0]=0,C$c[1]=0,C$c[2]=1)},C$M.cloneTo=function(C$s){C$T.prototype.cloneTo.call(this,C$s);var C$M=C$s;C$M.x=this.x,C$M.y=this.y,C$M.z=this.z,C$M.randomDirection=this.randomDirection}}(C$e),function(C$T){function C$l(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,C$l.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}C$R(C$l,"laya.d3.core.particleShuriKen.module.shape.CircleShape",C$T);var C$s=C$l.prototype;C$s._getShapeBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[2]=-this.radius,C$M[1]=0;var C$T=C$s.max.elements;C$T[0]=C$T[2]=this.radius,C$T[1]=0},C$s._getSpeedBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[1]=-1,C$M[2]=0;var C$T=C$s.max.elements;C$T[0]=C$T[1]=1,C$T[2]=0},C$s.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements,C$c=C$l._tempPositionPoint.elements;C$T?(C$T.seed=C$X[16],this.emitFromEdge?C$K._randomPointUnitArcCircle(this.arc,C$l._tempPositionPoint,C$T):C$K._randomPointInsideUnitArcCircle(this.arc,C$l._tempPositionPoint,C$T),C$X[16]=C$T.seed):this.emitFromEdge?C$K._randomPointUnitArcCircle(this.arc,C$l._tempPositionPoint):C$K._randomPointInsideUnitArcCircle(this.arc,C$l._tempPositionPoint),C$x[0]=-C$c[0],C$x[1]=C$c[1],C$x[2]=0,C$lM.scale(C$s,this.radius,C$s),this.randomDirection?C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M):C$s.cloneTo(C$M)},C$s.cloneTo=function(C$s){C$T.prototype.cloneTo.call(this,C$s);var C$M=C$s;C$M.radius=this.radius,C$M.arc=this.arc,C$M.emitFromEdge=this.emitFromEdge,C$M.randomDirection=this.randomDirection},C$p(C$l,["_tempPositionPoint",function(){return this._tempPositionPoint=new C$cM}])}(C$e),function(C$T){function C$_(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,C$_.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}C$R(C$_,"laya.d3.core.particleShuriKen.module.shape.ConeShape",C$T);var C$s=C$_.prototype;C$s._getShapeBoundBox=function(C$s){var C$M=this.radius+this.length*Math.sin(this.angle),C$T=this.length*Math.cos(this.angle),C$X=C$s.min.elements;C$X[0]=C$X[1]=-C$M,C$X[2]=0;var C$x=C$s.max.elements;C$x[0]=C$x[1]=C$M,C$x[2]=C$T},C$s._getSpeedBoundBox=function(C$s){var C$M=Math.sin(this.angle),C$T=C$s.min.elements;C$T[0]=C$T[1]=-C$M,C$T[2]=0;var C$X=C$s.max.elements;C$X[0]=C$T[1]=C$M,C$X[2]=1},C$s.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){var C$x,C$c=C$s.elements,C$l=C$M.elements,C$u=C$_._tempPositionPoint.elements,C$E=NaN,C$O=NaN,C$U=Math.cos(this.angle),C$p=Math.sin(this.angle);switch(this.emitType){case 0:C$T?(C$T.seed=C$X[16],C$K._randomPointInsideUnitCircle(C$_._tempPositionPoint,C$T),C$X[16]=C$T.seed):C$K._randomPointInsideUnitCircle(C$_._tempPositionPoint),C$E=C$u[0],C$O=C$u[1],C$c[0]=C$E*this.radius,C$c[1]=C$O*this.radius,C$c[2]=0,this.randomDirection?(C$T?(C$T.seed=C$X[17],C$K._randomPointInsideUnitCircle(C$_._tempDirectionPoint,C$T),C$X[17]=C$T.seed):C$K._randomPointInsideUnitCircle(C$_._tempDirectionPoint),C$x=C$_._tempDirectionPoint.elements,C$l[0]=C$x[0]*C$p,C$l[1]=C$x[1]*C$p):(C$l[0]=C$E*C$p,C$l[1]=C$O*C$p),C$l[2]=C$U;break;case 1:C$T?(C$T.seed=C$X[16],C$K._randomPointUnitCircle(C$_._tempPositionPoint,C$T),C$X[16]=C$T.seed):C$K._randomPointUnitCircle(C$_._tempPositionPoint),C$E=C$u[0],C$O=C$u[1],C$c[0]=C$E*this.radius,C$c[1]=C$O*this.radius,C$c[2]=0,this.randomDirection?(C$T?(C$T.seed=C$X[17],C$K._randomPointInsideUnitCircle(C$_._tempDirectionPoint,C$T),C$X[17]=C$T.seed):C$K._randomPointInsideUnitCircle(C$_._tempDirectionPoint),C$x=C$_._tempDirectionPoint.elements,C$l[0]=C$x[0]*C$p,C$l[1]=C$x[1]*C$p):(C$l[0]=C$E*C$p,C$l[1]=C$O*C$p),C$l[2]=C$U;break;case 2:C$T?(C$T.seed=C$X[16],C$K._randomPointInsideUnitCircle(C$_._tempPositionPoint,C$T)):C$K._randomPointInsideUnitCircle(C$_._tempPositionPoint),C$E=C$u[0],C$O=C$u[1],C$c[0]=C$E*this.radius,C$c[1]=C$O*this.radius,C$l[C$c[2]=0]=C$E*C$p,C$l[1]=C$O*C$p,C$l[2]=C$U,C$lM.normalize(C$M,C$M),C$T?(C$lM.scale(C$M,this.length*C$T.getFloat(),C$M),C$X[16]=C$T.seed):C$lM.scale(C$M,this.length*Math.random(),C$M),C$lM.add(C$s,C$M,C$s),this.randomDirection&&(C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M));break;case 3:C$T?(C$T.seed=C$X[16],C$K._randomPointUnitCircle(C$_._tempPositionPoint,C$T)):C$K._randomPointUnitCircle(C$_._tempPositionPoint),C$E=C$u[0],C$O=C$u[1],C$c[0]=C$E*this.radius,C$c[1]=C$O*this.radius,C$l[C$c[2]=0]=C$E*C$p,C$l[1]=C$O*C$p,C$l[2]=C$U,C$lM.normalize(C$M,C$M),C$T?(C$lM.scale(C$M,this.length*C$T.getFloat(),C$M),C$X[16]=C$T.seed):C$lM.scale(C$M,this.length*Math.random(),C$M),C$lM.add(C$s,C$M,C$s),this.randomDirection&&(C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M));break;default:throw new Error("ConeShape:emitType is invalid.")}},C$s.cloneTo=function(C$s){C$T.prototype.cloneTo.call(this,C$s);var C$M=C$s;C$M.angle=this.angle,C$M.radius=this.radius,C$M.length=this.length,C$M.emitType=this.emitType,C$M.randomDirection=this.randomDirection},C$p(C$_,["_tempPositionPoint",function(){return this._tempPositionPoint=new C$cM},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new C$cM}])}(C$e),function(C$T){function C$s(){this.radius=NaN,this.emitFromShell=!1,C$s.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}C$R(C$s,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",C$T);var C$M=C$s.prototype;C$M._getShapeBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[1]=C$M[2]=-this.radius;var C$T=C$s.max.elements;C$T[0]=C$T[1]=this.radius,C$T[2]=0},C$M._getSpeedBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[1]=-1,C$M[2]=0;var C$T=C$s.max.elements;C$T[0]=C$T[1]=C$T[2]=1},C$M.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){var C$x=C$s.elements;C$T?(C$T.seed=C$X[16],this.emitFromShell?C$K._randomPointUnitSphere(C$s,C$T):C$K._randomPointInsideUnitSphere(C$s,C$T),C$X[16]=C$T.seed):this.emitFromShell?C$K._randomPointUnitSphere(C$s):C$K._randomPointInsideUnitSphere(C$s),C$lM.scale(C$s,this.radius,C$s);var C$c=C$x[2];C$c<0&&(C$x[2]=-1*C$c),this.randomDirection?C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M):C$s.cloneTo(C$M)},C$M.cloneTo=function(C$s){C$T.prototype.cloneTo.call(this,C$s);var C$M=C$s;C$M.radius=this.radius,C$M.emitFromShell=this.emitFromShell,C$M.randomDirection=this.randomDirection}}(C$e),function(C$T){function C$s(){this.radius=NaN,this.emitFromShell=!1,C$s.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}C$R(C$s,"laya.d3.core.particleShuriKen.module.shape.SphereShape",C$T);var C$M=C$s.prototype;C$M._getShapeBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[1]=C$M[2]=-this.radius;var C$T=C$s.max.elements;C$T[0]=C$T[1]=C$T[2]=this.radius},C$M._getSpeedBoundBox=function(C$s){var C$M=C$s.min.elements;C$M[0]=C$M[1]=C$M[2]=-1;var C$T=C$s.max.elements;C$T[0]=C$T[1]=C$T[2]=1},C$M.generatePositionAndDirection=function(C$s,C$M,C$T,C$X){C$T?(C$T.seed=C$X[16],this.emitFromShell?C$K._randomPointUnitSphere(C$s,C$T):C$K._randomPointInsideUnitSphere(C$s,C$T),C$X[16]=C$T.seed):this.emitFromShell?C$K._randomPointUnitSphere(C$s):C$K._randomPointInsideUnitSphere(C$s),C$lM.scale(C$s,this.radius,C$s),this.randomDirection?C$T?(C$T.seed=C$X[17],C$K._randomPointUnitSphere(C$M,C$T),C$X[17]=C$T.seed):C$K._randomPointUnitSphere(C$M):C$s.cloneTo(C$M)},C$M.cloneTo=function(C$s){C$T.prototype.cloneTo.call(this,C$s);var C$M=C$s;C$M.radius=this.radius,C$M.emitFromShell=this.emitFromShell,C$M.randomDirection=this.randomDirection}}(C$e),function(C$s){function C$M(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,C$M.__super.call(this)}return C$R(C$M,"laya.d3.core.render.SubMeshRenderElement",C$$),C$M}()),C$kM=function(C$s){function C$g(C$s,C$M,C$T,C$X,C$x,C$c){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=C$s,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[C$RM.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[C$nM.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[C$nM.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[C$QM.SHADERDEFINE_ALPHATEST]="ALPHATEST";C$g.__super.call(this,C$s,C$M,C$T,null,{}),this._attributeMap=C$X;var C$l;for(C$l in C$x){var C$u=C$x[C$l];switch(C$u[1]){case 0:this._renderElementUniformMap[C$l]=C$u[0];break;case 1:this._materialUniformMap[C$l]=C$u[0];break;case 2:this._spriteUniformMap[C$l]=C$u[0];break;case 3:this._cameraUniformMap[C$l]=C$u[0];break;case 4:this._sceneUniformMap[C$l]=C$u[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}C$R(C$g,"laya.d3.shader.ShaderCompile3D",C$P);var C$M=C$g.prototype;return C$M._definesToNameDic=function(C$s,C$M){for(var C$T={},C$X=1,C$x=0;C$x<32&&!(C$s<(C$X=1<<C$x));C$x++)if(C$s&C$X){var C$c=C$M[C$X];C$c&&(C$T[C$c]="")}return C$T},C$M.withCompile=function(C$s,C$M,C$T,C$X){var C$x,C$c,C$l;if(C$c=this.sharders[C$s])if(C$l=C$c[C$M]){if(C$x=C$l[C$T])return C$x}else C$l=C$c[C$M]=[];else C$l=(C$c=this.sharders[C$s]=[])[C$M]=[];var C$u,C$E=this._definesToNameDic(C$s,C$g._globalInt2name),C$O=this._definesToNameDic(C$M,this._spriteInt2name),C$U=this._definesToNameDic(C$T,this._materialInt2name),C$p={},C$_="";if(C$E)for(C$u in C$E)C$_+="#define "+C$u+"\n",C$p[C$u]=!0;if(C$O)for(C$u in C$O)C$_+="#define "+C$u+"\n",C$p[C$u]=!0;if(C$U)for(C$u in C$U)C$_+="#define "+C$u+"\n",C$p[C$u]=!0;var C$R=C$YM.nameKey.getName(this._name)+" compile ("+C$s+","+C$M+","+C$T+")",C$q=this._VS.toscript(C$p,[]),C$G=this._PS.toscript(C$p,[]);C$B.now();if(C$x=C$YM.create(C$_+C$q.join("\n"),C$_+C$G.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,C$X,C$R),C$l[C$T]=C$x,laya.d3.shader.ShaderCompile3D.debugMode)C$B.now();return C$x},C$M.precompileShaderWithShaderDefine=function(C$s,C$M,C$T){this.withCompile(C$s,C$M,C$T,!0)},C$M.addMaterialDefines=function(C$s){var C$M=C$s.defines;for(var C$T in C$M){var C$X=C$M[C$T],C$x=parseInt(C$T);this._materialInt2name[C$x]=C$X,this._materialName2Int[C$X]=C$x}},C$M.addSpriteDefines=function(C$s){var C$M=C$s.defines;for(var C$T in C$M){var C$X=C$M[C$T],C$x=parseInt(C$T);this._spriteInt2name[C$x]=C$X,this._spriteName2Int[C$X]=C$x}},C$M.getMaterialDefineByName=function(C$s){return this._materialName2Int[C$s]},C$M.registerMaterialDefine=function(C$s){var C$M=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[C$M]=C$s,this._materialName2Int[C$s]=C$M},C$M.registerSpriteDefine=function(C$s){var C$M=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[C$M]=C$s,this._spriteName2Int[C$s]=C$M},C$g._globalRegDefine=function(C$s,C$M){C$g._globalInt2name[C$M]=C$s},C$g.add=function(C$s,C$M,C$T,C$X,C$x){return laya.d3.shader.ShaderCompile3D._preCompileShader[C$s]=new C$g(C$s,C$M,C$T,C$X,C$x,C$P.includes)},C$g.get=function(C$s){return laya.d3.shader.ShaderCompile3D._preCompileShader[C$YM.nameKey.getID(C$s)]},C$g._preCompileShader={},C$g._globalInt2name=[],C$g.debugMode=!1,C$g.SHADERDEFINE_HIGHPRECISION=1,C$g.SHADERDEFINE_FOG=4,C$g.SHADERDEFINE_DIRECTIONLIGHT=8,C$g.SHADERDEFINE_POINTLIGHT=16,C$g.SHADERDEFINE_SPOTLIGHT=32,C$g.SHADERDEFINE_UV0=64,C$g.SHADERDEFINE_COLOR=128,C$g.SHADERDEFINE_UV1=256,C$g.SAHDERDEFINE_DEPTHFOG=131072,C$g}(),C$AM=function(C$s){function C$q(){C$q.__super.call(this)}C$R(C$q,"laya.d3.graphics.MeshSprite3DStaticBatchManager",C$Xs);var C$M=C$q.prototype;return C$M._getStaticBatch=function(C$s,C$M,C$T,C$X){var C$x,C$c;return C$c=C$s?C$s.id.toString()+C$T.id.toString()+C$M.id.toString()+C$X.toString():C$T.id.toString()+C$M.id.toString()+C$X.toString(),this._staticBatches[C$c]?C$x=this._staticBatches[C$c]:this._staticBatches[C$c]=C$x=new C$DM(C$c,this,C$s,C$M,C$T),C$x},C$M._initStaticBatchs=function(C$s){var C$M,C$T;this._initBatchRenderElements.sort(C$q._sortPrepareStaticBatch);for(var C$X,C$x=!1,C$c=0,C$l=0,C$u=this._initBatchRenderElements.length;C$l<C$u;C$l++){var C$E,C$O=this._initBatchRenderElements[C$l],C$U=C$O.renderObj._getVertexBuffer(0);C$O._sprite3D;if(C$T===C$U.vertexDeclaration&&C$M===C$O._material)if(C$x)C$X._addCombineBatchRenderObjTest(C$O)?(C$E=C$O._staticBatch)!==C$X&&(C$E&&C$E._deleteCombineBatchRenderObj(C$O),C$X._addCombineBatchRenderObj(C$O)):(C$x=!1,C$c++);else{var C$p=this._initBatchRenderElements[C$l-1],C$_=C$p.renderObj,C$R=C$O.renderObj;C$x=!(65535<C$_._getVertexBuffer().vertexCount+C$R._getVertexBuffer().vertexCount)&&(C$X=this._getStaticBatch(C$s,C$T,C$M,C$c),(C$E=C$p._staticBatch)!==C$X&&(C$E&&C$E._deleteCombineBatchRenderObj(C$p),C$X._addCombineBatchRenderObj(C$p)),(C$E=C$O._staticBatch)!==C$X&&(C$E&&C$E._deleteCombineBatchRenderObj(C$O),C$X._addCombineBatchRenderObj(C$O)),!0)}else C$x=!1,C$c=0;C$M=C$O._material,C$T=C$U.vertexDeclaration}},C$q._sortPrepareStaticBatch=function(C$s,C$M){var C$T=C$s._render,C$X=C$M._render,C$x=C$T.lightmapIndex-C$X.lightmapIndex;if(0!=C$x)return C$x;var C$c=C$T.receiveShadow-C$X.receiveShadow;if(0!=C$c)return C$c;var C$l=C$s._mainSortID-C$M._mainSortID;return 0==C$l?C$s.renderObj.triangleCount-C$M.renderObj.triangleCount:C$l},C$q}(),C$DM=function(C$s){function C$c(C$s,C$M,C$T,C$X,C$x){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,C$c.__super.call(this,C$s,C$M,C$T),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=C$X,this._material=C$x}C$R(C$c,"laya.d3.graphics.SubMeshStaticBatch",C$xs);var C$M=C$c.prototype;return C$M._compareBatchRenderElement=function(C$s,C$M){return C$s._batchIndexStart>C$M._batchIndexStart},C$M._addCombineBatchRenderObjTest=function(C$s){var C$M=C$s.renderObj._vertexCount;return!(65535<(0<C$M?this._currentCombineVertexCount+C$M:this._currentCombineVertexCount+C$s.renderObj._getVertexBuffer().vertexCount))},C$M._addCombineBatchRenderObj=function(C$s){var C$M=C$s.renderObj,C$T=C$M._vertexCount;this._initBatchRenderElements.push(C$s),C$s._staticBatch=this,0<C$T?(this._currentCombineIndexCount+=C$M._indexCount,this._currentCombineVertexCount+=C$T):(this._currentCombineIndexCount=this._currentCombineIndexCount+C$M._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+C$M._getVertexBuffer().vertexCount),this._needFinishCombine=!0},C$M._deleteCombineBatchRenderObj=function(C$s){var C$M=C$s.renderObj,C$T=this._initBatchRenderElements.indexOf(C$s);if(-1!==C$T){this._initBatchRenderElements.splice(C$T,1),C$s._staticBatch=null;var C$X=C$M._vertexCount;0<C$X?(this._currentCombineIndexCount=this._currentCombineIndexCount-C$M._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-C$X):(this._currentCombineIndexCount=this._currentCombineIndexCount-C$M._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-C$M._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},C$M._finishInit=function(){if(this._needFinishCombine){var C$s=0,C$M=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var C$T=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),C$X=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=C$eM.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=C$yM.create("ushort",this._currentCombineIndexCount,35044);for(var C$x=0,C$c=this._initBatchRenderElements.length;C$x<C$c;C$x++){var C$l=this._initBatchRenderElements[C$x],C$u=C$l.renderObj,C$E=C$u._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,C$l._sprite3D),C$O=C$u.getIndices(),C$U=C$l._sprite3D.transform._isFrontFaceInvert,C$p=C$s/(this._vertexDeclaration.vertexStride/4)-C$u._vertexStart,C$_=C$M,C$R=C$_+C$O.length;C$l._batchIndexStart=C$_,C$l._batchIndexEnd=C$R,C$X.set(C$O,C$M);var C$q=0;if(C$U)for(C$q=C$_;C$q<C$R;C$q+=3){C$X[C$q]=C$p+C$X[C$q];var C$G=C$X[C$q+1],C$g=C$X[C$q+2];C$X[C$q+1]=C$p+C$g,C$X[C$q+2]=C$p+C$G}else for(C$q=C$_;C$q<C$R;C$q+=3)C$X[C$q]=C$p+C$X[C$q],C$X[C$q+1]=C$p+C$X[C$q+1],C$X[C$q+2]=C$p+C$X[C$q+2];C$M+=C$O.length,C$T.set(C$E,C$s),C$s+=C$E.length}this._vertexBuffer.setData(C$T),this._indexBuffer.setData(C$X),this._needFinishCombine=!1}},C$M._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new C$wM)},C$M._getRenderElement=function(C$s,C$M,C$T){for(var C$X,C$x,C$c=this._batchRenderElements.length,C$l=!0,C$u=0;C$u<C$c;C$u++){var C$E,C$O,C$U=(C$x=this._batchRenderElements[C$u])._sprite3D._render;if(0!==C$u&&(C$l=(C$E=(C$X=this._batchRenderElements[C$u-1])._sprite3D._render).lightmapIndex!==C$U.lightmapIndex||C$E.receiveShadow!==C$U.receiveShadow||C$X._batchIndexEnd!==C$x._batchIndexStart),C$l){(C$O=this._getCombineRenderElementFromPool()).renderObj=this,C$O._material=this._material,C$O._batchIndexStart=C$x._batchIndexStart,C$O._batchIndexEnd=C$x._batchIndexEnd;var C$p=C$U.lightmapIndex,C$_=C$p+1,C$R=this._batchOwnerIndices[C$_];C$R||(C$R=this._batchOwnerIndices[C$_]=[]);var C$q,C$G=C$R[C$x._render.receiveShadow?1:0];void 0===C$G?(C$R[C$U.receiveShadow?1:0]=this._batchOwners.length,(C$q=new C$FM(null,"StaticBatchMeshSprite3D"))._scene=C$M,C$q._transform=this._rootOwner?this._rootOwner._transform:null,C$q._render.lightmapIndex=C$p,C$q._render.receiveShadow=C$x._render.receiveShadow,this._batchOwners.push(C$q)):C$q=this._batchOwners[C$G],C$q._render._renderUpdate(C$T),C$O._sprite3D=C$q,C$s.push(C$O)}else C$O._batchIndexEnd=C$x._batchIndexEnd}},C$M._beforeRender=function(C$s){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},C$M._render=function(C$s){var C$M=C$s.renderElement,C$T=C$M._batchIndexStart,C$X=C$M._batchIndexEnd-C$T;C$v.mainContext.drawElements(4,C$X,5123,2*C$T),C$k.drawCall++,C$k.trianglesFaces+=C$X/3},C$M.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},C$M._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),this._vertexBuffer},C$c}(),C$hM=function(C$s){function C$M(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,C$M.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}C$R(C$M,"laya.d3.core.ComponentNode",C$O);var C$T=C$M.prototype;return C$T.addComponent=function(C$s){var C$M,C$T=this._componentsMap.indexOf(C$s);if(-1===C$T)C$M=[],this._componentsMap.push(C$s),this._typeComponentsIndices.push(C$M);else if(C$M=this._typeComponentsIndices[C$T],this._components[C$M[0]].isSingleton)throw new Error("无法单实例创建"+C$s+"组件，"+C$s+"组件已存在！");var C$X=C$x.getInstance(C$s);return C$M.push(this._components.length),this._components.push(C$X),C$X instanceof laya.d3.component.Script&&this._scripts.push(C$X),C$X._initialize(this),C$X},C$T._removeComponent=function(C$s,C$M){var C$T=this._typeComponentsIndices[C$s],C$X=C$T[C$M],C$x=this._components[C$X];this._components.splice(C$X,1),C$x instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(C$x),1),C$T.splice(C$M,1),0===C$T.length&&(this._typeComponentsIndices.splice(C$s,1),this._componentsMap.splice(C$s,1));for(var C$c=0,C$l=this._componentsMap.length;C$c<C$l;C$c++)for(var C$u=(C$T=this._typeComponentsIndices[C$c]).length-1;0<=C$u;C$u--){var C$E=C$T[C$u];if(!(C$X<C$E))break;C$T[C$u]=--C$E}C$x._destroy()},C$T.getComponentByType=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T=this._componentsMap.indexOf(C$s);return-1===C$T?null:this._components[this._typeComponentsIndices[C$T][C$M]]},C$T.getComponentsByType=function(C$s,C$M){var C$T=this._componentsMap.indexOf(C$s);if(-1!==C$T){var C$X=this._typeComponentsIndices[C$T],C$x=C$X.length;C$M.length=C$x;for(var C$c=0;C$c<C$x;C$c++)C$M[C$c]=this._components[C$X[C$c]]}else C$M.length=0},C$T.getComponentByIndex=function(C$s){return this._components[C$s]},C$T.removeComponentByType=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T=this._componentsMap.indexOf(C$s);-1!==C$T&&this._removeComponent(C$T,C$M)},C$T.removeComponentsByType=function(C$s){var C$M=this._componentsMap.indexOf(C$s);if(-1!==C$M)for(var C$T=this._typeComponentsIndices[C$M],C$X=0,C$x=C$T.length;C$X<C$x;C$T.length<C$x?C$x--:C$X++)this._removeComponent(C$M,C$X)},C$T.removeAllComponent=function(){for(var C$s=0,C$M=this._componentsMap.length;C$s<C$M;this._componentsMap.length<C$M?C$M--:C$s++)this.removeComponentsByType(this._componentsMap[C$s])},C$T._updateComponents=function(C$s){for(var C$M=0,C$T=this._components.length;C$M<C$T;C$M++){var C$X=this._components[C$M];!C$X.started&&(C$X._start(C$s),C$X.started=!0),C$X.enable&&C$X._update(C$s)}},C$T._lateUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._lateUpdate(C$s)}},C$T._preRenderUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._preRenderUpdate(C$s)}},C$T._postRenderUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._postRenderUpdate(C$s)}},C$M}(),C$QM=function(C$X){function C$s(){C$s.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new C$_M,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new C$uM(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}C$R(C$s,"laya.d3.core.material.BaseMaterial",C$X);var C$M=C$s.prototype;return C$r.imps(C$M,{"laya.d3.core.IClone":!0}),C$M._addShaderDefine=function(C$s){this._shaderDefineValue|=C$s},C$M._removeShaderDefine=function(C$s){this._shaderDefineValue&=~C$s},C$M._addDisablePublicShaderDefine=function(C$s){this._disablePublicShaderDefine|=C$s},C$M._removeDisablePublicShaderDefine=function(C$s){this._disablePublicShaderDefine&=~C$s},C$M._setBuffer=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M),this._values[C$s]=C$M},C$M._getBuffer=function(C$s){return this._values[C$s]},C$M._setMatrix4x4=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M?C$M.elements:null),this._values[C$s]=C$M},C$M._getMatrix4x4=function(C$s){return this._values[C$s]},C$M._setInt=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M),this._values[C$s]=C$M},C$M._getInt=function(C$s){return this._values[C$s]},C$M._setNumber=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M),this._values[C$s]=C$M},C$M._getNumber=function(C$s){return this._values[C$s]},C$M._setBool=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M),this._values[C$s]=C$M},C$M._getBool=function(C$s){return this._values[C$s]},C$M._setVector2=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M?C$M.elements:null),this._values[C$s]=C$M},C$M._getVector2=function(C$s){return this._values[C$s]},C$M._setColor=function(C$s,C$M){this._shaderValues.setValue(C$s,C$M?C$M.elements:null),this._values[C$s]=C$M},C$M._getColor=function(C$s){return this._values[C$s]},C$M._setTexture=function(C$s,C$M){var C$T=this._values[C$s];this._values[C$s]=C$M,this._shaderValues.setValue(C$s,C$M),0<this.referenceCount&&(C$T&&C$T._removeReference(),C$M&&C$M._addReference())},C$M._getTexture=function(C$s){return this._values[C$s]},C$M._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},C$M._getShader=function(C$s,C$M,C$T){var C$X=(C$s|C$M)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(C$X,C$T,this._shaderDefineValue),this._shader},C$M._setRenderStateBlendDepth=function(){var C$s=C$v.mainContext;switch(C$z.setDepthMask(C$s,this.depthWrite),0===this.depthTest?C$z.setDepthTest(C$s,!1):(C$z.setDepthTest(C$s,!0),C$z.setDepthFunc(C$s,this.depthTest)),this.blend){case 0:C$z.setBlend(C$s,!1);break;case 1:C$z.setBlend(C$s,!0),C$z.setBlendFunc(C$s,this.srcBlend,this.dstBlend);break;case 2:C$z.setBlend(C$s,!0)}},C$M._setRenderStateFrontFace=function(C$s,C$M){var C$T=C$v.mainContext,C$X=0;switch(this.cull){case 0:C$z.setCullFace(C$T,!1);break;case 1:C$z.setCullFace(C$T,!0),C$X=C$s?C$M&&C$M._isFrontFaceInvert?2305:2304:C$M&&C$M._isFrontFaceInvert?2304:2305,C$z.setFrontFace(C$T,C$X);break;case 2:C$z.setCullFace(C$T,!0),C$X=C$s?C$M&&C$M._isFrontFaceInvert?2304:2305:C$M&&C$M._isFrontFaceInvert?2305:2304,C$z.setFrontFace(C$T,C$X)}},C$M.onAsynLoaded=function(C$s,C$M,C$T){var C$X=C$M[0],C$x=C$M[1];switch(C$X.version){case"LAYAMATERIAL:01":var C$c=0,C$l=0,C$u=C$X.props;for(var C$E in C$u)switch(C$E){case"vectors":var C$O=C$u[C$E];for(C$c=0,C$l=C$O.length;C$c<C$l;C$c++){var C$U=C$O[C$c],C$p=C$U.value;switch(C$p.length){case 2:this[C$U.name]=new C$cM(C$p[0],C$p[1]);break;case 3:this[C$U.name]=new C$lM(C$p[0],C$p[1],C$p[2]);break;case 4:this[C$U.name]=new C$uM(C$p[0],C$p[1],C$p[2],C$p[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var C$_=C$u[C$E];for(C$c=0,C$l=C$_.length;C$c<C$l;C$c++){var C$R=C$_[C$c],C$q=C$R.path;C$q&&(this[C$R.name]=C$f.getRes(C$x[C$q]))}break;case"defines":var C$G=C$u[C$E];for(C$c=0,C$l=C$G.length;C$c<C$l;C$c++){var C$g=this._shaderCompile.getMaterialDefineByName(C$G[C$c]);this._addShaderDefine(C$g)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[C$E]=C$u[C$E];break;case"renderQueue":switch(C$u[C$E]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[C$E]=C$u[C$E]}break;case"LAYAMATERIAL:02":for(C$E in C$u=C$X.props)switch(C$E){case"vectors":for(C$c=0,C$l=(C$O=C$u[C$E]).length;C$c<C$l;C$c++)switch((C$p=(C$U=C$O[C$c]).value).length){case 2:this[C$U.name]=new C$cM(C$p[0],C$p[1]);break;case 3:this[C$U.name]=new C$lM(C$p[0],C$p[1],C$p[2]);break;case 4:this[C$U.name]=new C$uM(C$p[0],C$p[1],C$p[2],C$p[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(C$c=0,C$l=(C$_=C$u[C$E]).length;C$c<C$l;C$c++)(C$q=(C$R=C$_[C$c]).path)&&(this[C$R.name]=C$f.getRes(C$x[C$q]));break;case"defines":for(C$c=0,C$l=(C$G=C$u[C$E]).length;C$c<C$l;C$c++)C$g=this._shaderCompile.getMaterialDefineByName(C$G[C$c]),this._addShaderDefine(C$g);break;default:this[C$E]=C$u[C$E]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},C$M._addReference=function(){C$X.prototype._addReference.call(this);for(var C$s=0,C$M=this._values.length;C$s<C$M;C$s++){var C$T=this._values[C$s];C$T&&C$T instanceof laya.d3.resource.BaseTexture&&C$T._addReference()}},C$M._removeReference=function(){C$X.prototype._removeReference.call(this);for(var C$s=0,C$M=this._values.length;C$s<C$M;C$s++){var C$T=this._values[C$s];C$T&&C$T instanceof laya.d3.resource.BaseTexture&&C$T._removeReference()}},C$M.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},C$M.setShaderName=function(C$s){var C$M=C$YM.nameKey.getID(C$s);if(-1===C$M)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=C$kM._preCompileShader[C$M]},C$M.cloneTo=function(C$s){var C$M=C$s;C$M.name=this.name,C$M.cull=this.cull,C$M.blend=this.blend,C$M.srcBlend=this.srcBlend,C$M.dstBlend=this.dstBlend,C$M.srcBlendRGB=this.srcBlendRGB,C$M.dstBlendRGB=this.dstBlendRGB,C$M.srcBlendAlpha=this.srcBlendAlpha,C$M.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(C$M.blendConstColor),C$M.blendEquation=this.blendEquation,C$M.blendEquationRGB=this.blendEquationRGB,C$M.blendEquationAlpha=this.blendEquationAlpha,C$M.depthTest=this.depthTest,C$M.depthWrite=this.depthWrite,C$M.renderQueue=this.renderQueue,C$M._shader=this._shader,C$M._disablePublicShaderDefine=this._disablePublicShaderDefine,C$M._shaderDefineValue=this._shaderDefineValue;var C$T,C$X=0,C$x=C$M._shaderValues;C$M._shaderValues.data.length=this._shaderValues.data.length;var C$c=this._values.length,C$l=C$M._values;for(C$X=0,C$T=C$l.length=C$c;C$X<C$T;C$X++){var C$u=this._values[C$X];if(C$u)if("number"==typeof C$u)C$l[C$X]=C$u,C$x.data[C$X]=C$u;else if("number"==typeof C$u&&Math.floor(C$u)==C$u)C$l[C$X]=C$u,C$x.data[C$X]=C$u;else if("boolean"==typeof C$u)C$l[C$X]=C$u,C$x.data[C$X]=C$u;else if(C$u instanceof laya.d3.math.Vector2){var C$E=C$l[C$X]||(C$l[C$X]=new C$cM);C$u.cloneTo(C$E),C$x.data[C$X]=C$E.elements}else if(C$u instanceof laya.d3.math.Vector3){var C$O=C$l[C$X]||(C$l[C$X]=new C$lM);C$u.cloneTo(C$O),C$x.data[C$X]=C$O.elements}else if(C$u instanceof laya.d3.math.Vector4){var C$U=C$l[C$X]||(C$l[C$X]=new C$uM);C$u.cloneTo(C$U),C$x.data[C$X]=C$U.elements}else if(C$u instanceof laya.d3.math.Matrix4x4){var C$p=C$l[C$X]||(C$l[C$X]=new C$sM);C$u.cloneTo(C$p),C$x.data[C$X]=C$p.elements}else C$u instanceof laya.d3.resource.BaseTexture&&(C$l[C$X]=C$u,C$x.data[C$X]=C$u)}},C$M.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$q(0,C$M,"alphaTestValue",function(){return this._getNumber(0)},function(C$s){this._setNumber(0,C$s)}),C$q(0,C$M,"alphaTest",function(){return this._alphaTest},function(C$s){(this._alphaTest=C$s)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),C$s.__init__=function(){C$s.SHADERDEFINE_ALPHATEST=C$s.shaderDefines.registerDefine("ALPHATEST")},C$s.RENDERQUEUE_OPAQUE=2e3,C$s.RENDERQUEUE_ALPHATEST=2450,C$s.RENDERQUEUE_TRANSPARENT=3e3,C$s.CULL_NONE=0,C$s.CULL_FRONT=1,C$s.CULL_BACK=2,C$s.BLEND_DISABLE=0,C$s.BLEND_ENABLE_ALL=1,C$s.BLEND_ENABLE_SEPERATE=2,C$s.BLENDPARAM_ZERO=0,C$s.BLENDPARAM_ONE=1,C$s.BLENDPARAM_SRC_COLOR=768,C$s.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,C$s.BLENDPARAM_DST_COLOR=774,C$s.BLENDPARAM_ONE_MINUS_DST_COLOR=775,C$s.BLENDPARAM_SRC_ALPHA=770,C$s.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,C$s.BLENDPARAM_DST_ALPHA=772,C$s.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,C$s.BLENDPARAM_SRC_ALPHA_SATURATE=776,C$s.BLENDEQUATION_ADD=0,C$s.BLENDEQUATION_SUBTRACT=1,C$s.BLENDEQUATION_REVERSE_SUBTRACT=2,C$s.DEPTHTEST_OFF=0,C$s.DEPTHTEST_NEVER=512,C$s.DEPTHTEST_LESS=513,C$s.DEPTHTEST_EQUAL=514,C$s.DEPTHTEST_LEQUAL=515,C$s.DEPTHTEST_GREATER=516,C$s.DEPTHTEST_NOTEQUAL=517,C$s.DEPTHTEST_GEQUAL=518,C$s.DEPTHTEST_ALWAYS=519,C$s.SHADERDEFINE_ALPHATEST=1,C$s.ALPHATESTVALUE=0,C$p(C$s,["shaderDefines",function(){return this.shaderDefines=new C$UM}]),C$s}(C$g),C$vM=function(C$s){function C$M(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,C$M.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}C$R(C$M,"laya.d3.resource.BaseTexture",C$g);var C$T=C$M.prototype;return C$q(0,C$T,"width",function(){return this._width}),C$q(0,C$T,"repeat",function(){return this._repeat},function(C$s){if(this._repeat!==C$s&&(this._repeat=C$s,this._source)){var C$M=C$v.mainContext;C$z.bindTexture(C$M,this._type,this._source),C$t.isPOT(this._width,this._height)&&this._repeat?(C$M.texParameteri(this._type,10242,10497),C$M.texParameteri(this._type,10243,10497)):(C$M.texParameteri(this._type,10242,33071),C$M.texParameteri(this._type,10243,33071))}}),C$q(0,C$T,"height",function(){return this._height}),C$q(0,C$T,"magFifter",function(){return this._magFifter},function(C$s){(this._magFifter=C$s)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(C$s)}),C$q(0,C$T,"wrapModeV",function(){return this._wrapModeV}),C$q(0,C$T,"size",function(){return this._size}),C$q(0,C$T,"wrapModeU",function(){return this._wrapModeU}),C$q(0,C$T,"mipmap",function(){return this._mipmap},function(C$s){this._mipmap=C$s,this._mipmap!=C$s&&this._conchTexture&&this._conchTexture.setMipMap(C$s)}),C$q(0,C$T,"minFifter",function(){return this._minFifter},function(C$s){this._minFifter=C$s,this._minFifter!=C$s&&this._conchTexture&&this._conchTexture.setMinFifter(C$s)}),C$q(0,C$T,"format",function(){return this._format}),C$q(0,C$T,"source",function(){return this.activeResource(),this._source}),C$q(0,C$T,"defaulteTexture",function(){return C$SM.grayTexture}),C$M.WARPMODE_REPEAT=0,C$M.WARPMODE_CLAMP=1,C$M}(),C$zM=function(C$s){function C$M(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,C$M.__super.call(this),this._boundingBoxCorners=C$X(8,null)}C$R(C$M,"laya.d3.resource.models.BaseMesh",C$g);var C$T=C$M.prototype;return C$T._getPositions=function(){throw new Error("未Override,请重载该属性！")},C$T._generateBoundingObject=function(){this._boundingSphere=new C$is(new C$lM,0),C$is.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new C$as(new C$lM,new C$lM),C$as.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},C$T.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},C$T.getRenderElement=function(C$s){throw new Error("未Override,请重载该属性！")},C$q(0,C$T,"subMeshCount",function(){return this._subMeshCount}),C$q(0,C$T,"boundingBox",function(){return this._boundingBox}),C$q(0,C$T,"boundingBoxCorners",function(){return this._boundingBoxCorners}),C$q(0,C$T,"boundingSphere",function(){return this._boundingSphere}),C$M}(),C$BM=(function(C$s){function C$M(){C$M.__super.call(this)}C$R(C$M,"laya.d3.component.Script",C$PM);var C$T=C$M.prototype;C$T.onTriggerEnter=function(C$s){},C$T.onTriggerExit=function(C$s){},C$T.onTriggerStay=function(C$s){},C$q(0,C$T,"isSingleton",function(){return C$M._isSingleton}),C$M._isSingleton=!1}(),function(C$s){function C$M(C$s){this._owner=null,this._sharedMesh=null,C$M.__super.call(this),this._owner=C$s}C$R(C$M,"laya.d3.core.MeshFilter",C$s);var C$T=C$M.prototype;return C$T._sharedMeshLoaded=function(){this.event("loaded")},C$T._destroy=function(){C$s.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},C$q(0,C$T,"sharedMesh",function(){return this._sharedMesh},function(C$s){var C$M=this._sharedMesh;C$M&&C$M._removeReference(),(this._sharedMesh=C$s)._addReference(),this.event("meshchanged",[this,C$M,C$s]),C$s.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),C$q(0,C$T,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),C$q(0,C$T,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),C$q(0,C$T,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),C$q(0,C$T,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),C$M}(C$tM)),C$oM=function(C$s){function C$M(C$s){C$M.__super.call(this,C$s),C$s.meshFilter.on("meshchanged",this,this._onMeshChanged)}C$R(C$M,"laya.d3.core.MeshRender",C$rM);var C$T=C$M.prototype;return C$T._onMeshChanged=function(C$s,C$M,C$T){C$T.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:C$T.once("loaded",this,this._onMeshLoaed)},C$T._onMeshLoaed=function(C$s,C$M){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},C$T._calculateBoundingSphereByInitSphere=function(C$s){var C$M=NaN,C$T=this._owner.transform,C$X=C$T.scale.elements,C$x=Math.abs(C$X[0]),C$c=Math.abs(C$X[1]),C$l=Math.abs(C$X[2]);C$M=C$c<=C$x&&C$l<=C$x?C$x:C$l<=C$c?C$c:C$l,C$lM.transformCoordinate(C$s.center,C$T.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=C$s.radius*C$M},C$T._calculateBoundBoxByInitCorners=function(C$s){for(var C$M=this._owner.transform.worldMatrix,C$T=0;C$T<8;C$T++)C$lM.transformCoordinate(C$s[C$T],C$M,C$rM._tempBoundBoxCorners[C$T]);C$as.createfromPoints(C$rM._tempBoundBoxCorners,this._boundingBox)},C$T._calculateBoundingSphere=function(){var C$s=this._owner.meshFilter.sharedMesh;null==C$s||null==C$s.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(C$s.boundingSphere)},C$T._calculateBoundingBox=function(){var C$s=this._owner.meshFilter.sharedMesh;null==C$s||null==C$s.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(C$s.boundingBoxCorners)},C$T._renderUpdate=function(C$s){var C$M=this._owner.transform;if(C$M){this._setShaderValueMatrix4x4(0,C$M.worldMatrix);var C$T=this._owner.getProjectionViewWorldMatrix(C$s);this._setShaderValueMatrix4x4(1,C$T)}else this._setShaderValueMatrix4x4(0,C$sM.DEFAULT),this._setShaderValueMatrix4x4(1,C$s);return C$fM.debugMode&&this._renderRenderableBoundBox(),!0},C$M}(),C$CM=function(C$M){function C$X(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,C$X.__super.call(this),this._renderState=new C$W,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new C$_M,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new C$Ms,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new C$lM(.7,.7,.7),this.ambientColor=new C$lM(.212,.227,.259),C$v.shaderHighPrecision&&this.addShaderDefine(C$kM.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}C$R(C$X,"laya.d3.core.scene.Scene",C$M);var C$s=C$X.prototype;return C$r.imps(C$s,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),C$s._setUrl=function(C$s){this._url=C$s},C$s._getGroup=function(){return this._group},C$s._setGroup=function(C$s){this._group=C$s},C$s._display=function(){C$r.stage._scenes.push(this),C$r.stage._scenes.sort(C$X._sortScenes);for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++){var C$T=this._childs[C$s];C$T.active&&C$T._activeHierarchy()}},C$s._unDisplay=function(){var C$s=C$r.stage._scenes;C$s.splice(C$s.indexOf(this),1);for(var C$M=0,C$T=this._childs.length;C$M<C$T;C$M++){var C$X=this._childs[C$M];C$X.active&&C$X._inActiveHierarchy()}},C$s._addChild3D=function(C$s){C$s.transform._onWorldTransform(),C$s._setBelongScene(this),this.displayedInStage&&C$s.active&&C$s._activeHierarchy()},C$s._removeChild3D=function(C$s){C$s.transform.parent=null,this.displayedInStage&&C$s.active&&C$s._inActiveHierarchy(),C$s._setUnBelongScene()},C$s.initOctree=function(C$s,C$M,C$T,C$X,C$x){void 0===C$x&&(C$x=6),this.treeSize=new C$lM(C$s,C$M,C$T),this.treeLevel=C$x,this.treeRoot=new C$a(this,0),this.treeRoot.init(C$X,this.treeSize)},C$s._prepareUpdateToRenderState=function(C$s,C$M){C$M.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,C$M.scene=this},C$s._prepareSceneToRender=function(C$s){var C$M=this._lights.length;if(0<C$M)for(var C$T=0,C$X=0;C$X<C$M&&!(this._lights[C$X]._prepareToScene(C$s)&&++C$T>=this._enableLightCount);C$X++);},C$s._updateChilds=function(C$s){for(var C$M=0,C$T=this._childs.length;C$M<C$T;++C$M)this._childs[C$M]._update(C$s)},C$s._preRenderScene=function(C$s,C$M,C$T){var C$X,C$x=C$M._viewMatrix,C$c=C$M._projectionMatrix,C$l=C$M._projectionViewMatrix,C$u=0,C$E=C$M.camera;for(C$E.useOcclusionCulling?this.treeRoot?C$Ts.renderObjectCullingOctree(C$T,this,C$E,C$x,C$c,C$l):C$Ts.renderObjectCulling(C$T,this,C$E,C$x,C$c,C$l):C$Ts.renderObjectCullingNoBoundFrustum(this,C$E,C$x,C$c,C$l),C$u=0,C$X=this._quenes.length;C$u<C$X;C$u++)this._quenes[C$u]&&this._quenes[C$u]._preRender(C$M)},C$s._clear=function(C$s,C$M){var C$T=C$M._viewport,C$X=C$M.camera,C$x=C$T.x,C$c=C$X.renderTargetSize.height-C$T.y-C$T.height,C$l=C$T.width,C$u=C$T.height;C$s.viewport(C$x,C$c,C$l,C$u);var C$E=256,C$O=C$X.renderTarget;switch(C$X.clearFlag){case 0:var C$U=C$X.clearColor;if(C$U){C$s.enable(3089),C$s.scissor(C$x,C$c,C$l,C$u);var C$p=C$U.elements;C$s.clearColor(C$p[0],C$p[1],C$p[2],C$p[3]),C$E|=16384}if(C$O)switch(C$U||(C$E=16384),C$O.depthStencilFormat){case 33189:C$E|=256;break;case 36168:C$E|=1024;break;case 34041:C$E|=256,C$E|=1024}C$s.clear(C$E),C$U&&C$s.disable(3089);break;case 1:case 2:if(C$O)switch(C$E=16384,C$O.depthStencilFormat){case 33189:C$E|=256;break;case 36168:C$E|=1024;break;case 34041:C$E|=256,C$E|=1024}C$s.clear(C$E);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},C$s._renderScene=function(C$s,C$M){var C$T,C$X,C$x=C$M.camera,C$c=0;for(C$c=0;C$c<2;C$c++)(C$X=this._quenes[C$c])&&(C$x.renderTarget?C$X._render(C$M,!0):C$X._render(C$M,!1));if(1===C$x.clearFlag){var C$l=C$x.sky;C$l&&(C$z.setCullFace(C$s,!1),C$z.setDepthFunc(C$s,515),C$z.setDepthMask(C$s,!1),C$l._render(C$M),C$z.setDepthFunc(C$s,513),C$z.setDepthMask(C$s,!0))}for(C$c=2,C$T=this._quenes.length;C$c<C$T;C$c++)(C$X=this._quenes[C$c])&&(C$X._sortAlpha(C$M.camera.transform.position),C$x.renderTarget?C$X._render(C$M,!0):C$X._render(C$M,!1))},C$s._set3DRenderConfig=function(C$s){C$s.disable(3042),C$z._blend=!1,C$s.blendFunc(770,771),C$z._sFactor=770,C$z._dFactor=771,C$s.disable(2929),C$z._depthTest=!1,C$s.enable(2884),C$z._cullFace=!0,C$s.depthMask(1),C$z._depthMask=!0,C$s.frontFace(2304),C$z._frontFace=2304},C$s._set2DRenderConfig=function(C$s){C$z.setBlend(C$s,!0),C$z.setBlendFunc(C$s,1,771),C$z.setDepthTest(C$s,!1),C$z.setCullFace(C$s,!1),C$z.setDepthMask(C$s,!0),C$z.setFrontFace(C$s,2305),C$s.viewport(0,0,C$U.width,C$U.height)},C$s._parseCustomProps=function(C$s,C$M,C$T,C$X){var C$x=C$X.customProps.lightmaps,C$c=C$x.length,C$l=this._lightmaps;C$l.length=C$c;for(var C$u=0;C$u<C$c;C$u++)C$l[C$u]=C$f.getRes(C$M[C$x[C$u].replace(".exr",".png")]);this.setlightmaps(C$l);var C$E=C$X.customProps.ambientColor;C$E&&(this.ambientColor=new C$lM(C$E[0],C$E[1],C$E[2]));var C$O=C$X.customProps.fogColor;C$O&&(this.fogColor=new C$lM(C$O[0],C$O[1],C$O[2]))},C$s._addLight=function(C$s){this._lights.indexOf(C$s)<0&&this._lights.push(C$s)},C$s._removeLight=function(C$s){var C$M=this._lights.indexOf(C$s);0<=C$M&&this._lights.splice(C$M,1)},C$s._updateScene=function(){var C$s=this._renderState;this._prepareUpdateToRenderState(C$v.mainContext,C$s),this._updateComponents(C$s),this._updateChilds(C$s),this._lateUpdateComponents(C$s),this._time+=C$s.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},C$s._updateSceneConch=function(){var C$s=this._renderState;this._prepareUpdateToRenderState(C$v.mainContext,C$s),this._updateComponents(C$s),this._lateUpdateComponents(C$s),this._prepareSceneToRender(C$s);for(var C$M=0,C$T=this._cameraPool.length;C$M<C$T;C$M++){var C$X=this._cameraPool[C$M];(C$s.camera=C$X)._prepareCameraToRender()}},C$s._preRenderShadow=function(C$s,C$M,C$T,C$X,C$x){this.treeRoot?C$Ts.renderShadowObjectCullingOctree(this,C$M,C$T,C$X,C$x):C$Ts.renderShadowObjectCulling(this,C$M,C$T,C$X,C$x);for(var C$c=0,C$l=C$T.length;C$c<C$l;C$c++)C$T[C$c]&&C$T[C$c]._preRender(C$s)},C$s._renderShadowMap=function(C$s,C$M,C$T){var C$X=this.parallelSplitShadowMaps[0];C$X._calcAllLightCameraInfo(C$T);var C$x,C$c,C$l,C$u=C$X.PSSMNum;if(this._preRenderShadow(C$M,C$X._lightCulling,C$X._shadowQuenes,C$X._lightVPMatrix[0],C$u),this.addShaderDefine(C$RM.SHADERDEFINE_CAST_SHADOW),1<C$u)for(var C$E=0;C$E<C$u;C$E++)C$x=C$X.getRenderTarget(C$E+1),C$X.beginRenderTarget(C$E+1),C$s.clearColor(1,1,1,1),C$s.clear(16640),C$s.viewport(0,0,C$x.width,C$x.height),C$M.camera=C$l=C$X.getLightCamera(C$E),C$l._prepareCameraToRender(),C$l._prepareCameraViewProject(C$l.viewMatrix,C$l.projectionMatrix),C$M._projectionViewMatrix=C$X._lightVPMatrix[C$E+1],(C$c=C$X._shadowQuenes[C$E])._preRender(C$M),C$c._renderShadow(C$M,!1),C$X.endRenderTarget(C$E+1);else C$x=C$X.getRenderTarget(1),C$X.beginRenderTarget(1),C$s.clearColor(1,1,1,1),C$s.clear(16640),C$s.viewport(0,0,C$x.width,C$x.height),C$M.camera=C$l=C$X.getLightCamera(0),C$l._prepareCameraToRender(),C$l._prepareCameraViewProject(C$l.viewMatrix,C$l.projectionMatrix),C$M._projectionViewMatrix=C$X._lightVPMatrix[0],(C$c=C$X._shadowQuenes[0])._preRender(C$M),C$c._renderShadow(C$M,!0),C$X.endRenderTarget(1);this.removeShaderDefine(C$RM.SHADERDEFINE_CAST_SHADOW)},C$s.addTreeNode=function(C$s){this.treeRoot.addTreeNode(C$s)},C$s.removeTreeNode=function(C$s){this.treeSize&&C$s._treeNode&&C$s._treeNode.removeObject(C$s)},C$s.setlightmaps=function(C$s){this._lightmaps=C$s;for(var C$M=0,C$T=this._renderableSprite3Ds.length;C$M<C$T;C$M++)this._renderableSprite3Ds[C$M]._render._applyLightMapParams()},C$s.getlightmaps=function(){return this._lightmaps},C$s.addChildAt=function(C$s,C$M){if(!(C$s instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(C$s&&C$s.__className));if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),0<=C$M&&C$M<=this._childs.length){if(C$s._parent===this){var C$T=this.getChildIndex(C$s);this._childs.splice(C$T,1),this._childs.splice(C$M,0,C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,C$M)),this._childChanged()}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$O.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(C$M,0,C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,C$M),(C$s.parent=this)._addChild3D(C$s);return C$s}throw new Error("appendChildAt:The index is out of bounds")},C$s.addChild=function(C$s){if(!(C$s instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),C$s._parent===this){var C$M=this.getChildIndex(C$s);C$M!==this._childs.length-1&&(this._childs.splice(C$M,1),this._childs.push(C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1)),this._childChanged())}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$O.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1),(C$s.parent=this)._childChanged(),this._addChild3D(C$s);return C$s},C$s.removeChildAt=function(C$s){var C$M=this.getChildAt(C$s);return C$M&&(this._removeChild3D(C$M),this._childs.splice(C$s,1),this.conchModel&&this.conchModel.removeChild(C$M.conchModel),C$M.parent=null),C$M},C$s.removeChildren=function(C$s,C$M){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=2147483647),this._childs&&0<this._childs.length){var C$T=this._childs;if(0===C$s&&C$c<=C$M){var C$X=C$T;this._childs=C$O.ARRAY_EMPTY}else C$X=C$T.splice(C$s,C$M-C$s);for(var C$x=0,C$c=C$X.length;C$x<C$c;C$x++)this._removeChild3D(C$X[C$x]),C$X[C$x].parent=null,this.conchModel&&this.conchModel.removeChild(C$X[C$x].conchModel)}return this},C$s.addFrustumCullingObject=function(C$s){this.treeRoot?this.addTreeNode(C$s):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(C$s):this._cullingRenders[this._cullingRendersLength]=C$s,C$s._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},C$s.removeFrustumCullingObject=function(C$s){if(this.treeRoot)this.removeTreeNode(C$s);else{this._cullingRendersLength--;var C$M=C$s._indexInSceneFrustumCullingObjects;if(C$M!==this._cullingRendersLength){var C$T=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[C$M]=C$T)._indexInSceneFrustumCullingObjects=C$M,C$s._indexInSceneFrustumCullingObjects=-1}}},C$s.getRenderQueue=function(C$s){return C$s<3e3?this._quenes[1]||(this._quenes[1]=new C$F(this)):this._quenes[2]||(this._quenes[2]=new C$F(this))},C$s.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new C$F(this)},C$s.addShaderDefine=function(C$s){this._shaderDefineValue|=C$s},C$s.removeShaderDefine=function(C$s){this._shaderDefineValue&=~C$s},C$s.addScript=function(C$s){return this._addComponent(C$s)},C$s.getScriptByType=function(C$s,C$M){return void 0===C$M&&(C$M=0),this._getComponentByType(C$s,C$M)},C$s.getScriptsByType=function(C$s,C$M){this._getComponentsByType(C$s,C$M)},C$s.getScriptByIndex=function(C$s){return this._getComponentByIndex(C$s)},C$s.removeScriptByType=function(C$s,C$M){void 0===C$M&&(C$M=0),this._removeComponentByType(C$s,C$M)},C$s.removeScriptsByType=function(C$s){this._removeComponentByType(C$s)},C$s.removeAllScript=function(){this._removeAllComponent()},C$s.render=function(C$s,C$M,C$T){(C$G._context.ctx._renderKey=0)<this._childs.length&&C$s.addRenderObject(this)},C$s.renderSubmit=function(){var C$s=C$v.mainContext,C$M=this._renderState;this._set3DRenderConfig(C$s),this._prepareSceneToRender(this._renderState);var C$T,C$X=0,C$x=0;if(C$fM.debugMode||C$a.debugMode)for(C$X=0,C$x=this._cameraPool.length;C$X<C$x;C$X++)C$T=this._cameraPool[C$X],C$fM._debugPhasorSprite.begin(1,C$T),C$T.activeInHierarchy&&C$T._renderCamera(C$s,C$M,this),C$fM._debugPhasorSprite.end();else for(C$X=0,C$x=this._cameraPool.length;C$X<C$x;C$X++)(C$T=this._cameraPool[C$X]).activeInHierarchy&&C$T._renderCamera(C$s,C$M,this);return this._set2DRenderConfig(C$s),1},C$s.onAsynLoaded=function(C$s,C$M,C$T){var C$X=C$M[0];if("Scene"!==C$X.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var C$x=C$M[1];C$gM._createNodeByJson(this,C$X,this,C$x),this.event("hierarchyloaded",[this]),this.__loaded=!0},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),this.destroyed||(C$M.prototype.destroy.call(this,C$s),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,C$f.clearRes(this.url),this.loaded||C$fM._cancelLoadByUrl(this.url))},C$s.getRenderType=function(){return 0},C$s.releaseRender=function(){},C$s._addComponent=function(C$s){var C$M,C$T=this._componentsMap.indexOf(C$s);if(-1===C$T)C$M=[],this._componentsMap.push(C$s),this._typeComponentsIndices.push(C$M);else if(C$M=this._typeComponentsIndices[C$T],this._components[C$M[0]].isSingleton)throw new Error("无法单实例创建"+C$s+"组件，"+C$s+"组件已存在！");var C$X=C$x.getInstance(C$s);C$M.push(this._components.length),this._components.push(C$X);return C$X._initialize(this),C$X},C$s._removeComponent=function(C$s,C$M){var C$T=this._typeComponentsIndices[C$s],C$X=C$T[C$M],C$x=this._components[C$X];this._components.splice(C$X,1),C$T.splice(C$M,1),0===C$T.length&&(this._typeComponentsIndices.splice(C$s,1),this._componentsMap.splice(C$s,1));for(var C$c=0,C$l=this._componentsMap.length;C$c<C$l;C$c++)for(var C$u=(C$T=this._typeComponentsIndices[C$c]).length-1;0<=C$u;C$u--){var C$E=C$T[C$u];if(!(C$X<C$E))break;C$T[C$u]=--C$E}C$x._destroy()},C$s._getComponentByType=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T=this._componentsMap.indexOf(C$s);return-1===C$T?null:this._components[this._typeComponentsIndices[C$T][C$M]]},C$s._getComponentsByType=function(C$s,C$M){var C$T=this._componentsMap.indexOf(C$s);if(-1!==C$T){var C$X=this._typeComponentsIndices[C$T],C$x=C$X.length;C$M.length=C$x;for(var C$c=0;C$c<C$x;C$c++)C$M[C$c]=this._components[C$X[C$c]]}else C$M.length=0},C$s._getComponentByIndex=function(C$s){return this._components[C$s]},C$s._removeComponentByType=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T=this._componentsMap.indexOf(C$s);-1!==C$T&&this._removeComponent(C$T,C$M)},C$s._removeComponentsByType=function(C$s){var C$M=this._componentsMap.indexOf(C$s);if(-1!==C$M)for(var C$T=this._typeComponentsIndices[C$M],C$X=0,C$x=C$T.length;C$X<C$x;C$T.length<C$x?C$x--:C$X++)this._removeComponent(C$M,C$X)},C$s._removeAllComponent=function(){for(var C$s=0,C$M=this._componentsMap.length;C$s<C$M;this._componentsMap.length<C$M?C$M--:C$s++)this._removeComponentsByType(this._componentsMap[C$s])},C$s._updateComponents=function(C$s){for(var C$M=0,C$T=this._components.length;C$M<C$T;C$M++){var C$X=this._components[C$M];!C$X.started&&(C$X._start(C$s),C$X.started=!0),C$X.enable&&C$X._update(C$s)}},C$s._lateUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._lateUpdate(C$s)}},C$s._preRenderUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._preRenderUpdate(C$s)}},C$s._postRenderUpdateComponents=function(C$s){for(var C$M=0;C$M<this._components.length;C$M++){var C$T=this._components[C$M];!C$T.started&&(C$T._start(C$s),C$T.started=!0),C$T.enable&&C$T._postRenderUpdate(C$s)}},C$q(0,C$s,"_loaded",null,function(C$s){this.__loaded=C$s}),C$q(0,C$s,"fogColor",function(){return this._fogColor},function(C$s){this._fogColor=C$s,this._shaderValues.setValue(0,C$s.elements)}),C$q(0,C$s,"enableFog",function(){return this._enableFog},function(C$s){this._enableFog!==C$s&&((this._enableFog=C$s)?(this.addShaderDefine(C$kM.SHADERDEFINE_FOG),this.removeShaderDefine(C$kM.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(C$kM.SHADERDEFINE_FOG))}),C$q(0,C$s,"url",function(){return this._url}),C$q(0,C$s,"loaded",function(){return this.__loaded}),C$q(0,C$s,"enableDepthFog",function(){return this._enableDepthFog},function(C$s){this._enableDepthFog!=C$s&&((this._enableDepthFog=C$s)?(this.addShaderDefine(C$kM.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(C$kM.SHADERDEFINE_FOG)):this.removeShaderDefine(C$kM.SAHDERDEFINE_DEPTHFOG))}),C$q(0,C$s,"fogStart",function(){return this._fogStart},function(C$s){this._fogStart=C$s,this._shaderValues.setValue(1,C$s)}),C$q(0,C$s,"fogRange",function(){return this._fogRange},function(C$s){this._fogRange=C$s,this._shaderValues.setValue(2,C$s)}),C$q(0,C$s,"ambientColor",function(){return this._ambientColor},function(C$s){this._ambientColor=C$s,this._shaderValues.setValue(21,C$s.elements)}),C$q(0,C$s,"scene",function(){return this}),C$q(0,C$s,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),C$X._sortScenes=function(C$s,C$M){if(C$s.parent!==C$r.stage||C$M.parent!==C$r.stage)return C$s.parent!==C$r.stage&&C$M.parent!==C$r.stage?C$X._sortScenes(C$s.parent,C$M.parent):C$s.parent===C$r.stage?-1:1;var C$T=C$r.stage._childs;return C$T.indexOf(C$s)-C$T.indexOf(C$M)},C$X.load=function(C$s){return C$r.loader.create(C$s,null,null,C$X)},C$X.FOGCOLOR=0,C$X.FOGSTART=1,C$X.FOGRANGE=2,C$X.LIGHTDIRECTION=3,C$X.LIGHTDIRCOLOR=4,C$X.POINTLIGHTPOS=5,C$X.POINTLIGHTRANGE=6,C$X.POINTLIGHTATTENUATION=7,C$X.POINTLIGHTCOLOR=8,C$X.SPOTLIGHTPOS=9,C$X.SPOTLIGHTDIRECTION=10,C$X.SPOTLIGHTSPOT=11,C$X.SPOTLIGHTRANGE=12,C$X.SPOTLIGHTATTENUATION=13,C$X.SPOTLIGHTCOLOR=14,C$X.SHADOWDISTANCE=15,C$X.SHADOWLIGHTVIEWPROJECT=16,C$X.SHADOWMAPPCFOFFSET=17,C$X.SHADOWMAPTEXTURE1=18,C$X.SHADOWMAPTEXTURE2=19,C$X.SHADOWMAPTEXTURE3=20,C$X.AMBIENTCOLOR=21,C$X.TIME=22,C$X}(C$w),C$mM=function(C$s){function C$M(C$s){C$M.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new C$sM,this._shaderValues=new C$_M,this._colliders=[],this._id=++C$M._uniqueIDCounter,this._transform=new C$NM(this),this.name=C$s||"Sprite3D-"+C$M._nameNumberCounter++,this.layer=C$o.currentCreationLayer,this.active=!0}C$R(C$M,"laya.d3.core.Sprite3D",C$hM);var C$T=C$M.prototype;return C$r.imps(C$T,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),C$T._setUrl=function(C$s){this._url=C$s},C$T._getGroup=function(){return this._group},C$T._setGroup=function(C$s){this._group=C$s},C$T._addChild3D=function(C$s){C$s.transform.parent=this.transform,this._hierarchyAnimator&&(!C$s._hierarchyAnimator&&C$s._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(C$s,!0,[C$s.name])),this._scene&&(C$s._setBelongScene(this._scene),this._activeInHierarchy&&C$s._active&&C$s._activeHierarchy())},C$T._removeChild3D=function(C$s){C$s.transform.parent=null,this._scene&&(this._activeInHierarchy&&C$s._active&&C$s._inActiveHierarchy(),C$s._setUnBelongScene()),this._hierarchyAnimator&&(C$s._hierarchyAnimator==this._hierarchyAnimator&&C$s._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(C$s,!1,[C$s.name]))},C$T._parseBaseCustomProps=function(C$s){var C$M=this.transform.localPosition;C$s.translate?(C$M.fromArray(C$s.translate),C$M.x*=100,C$M.y*=100,C$M.z*=100):C$M.elements.fill(0),this.transform.localPosition=C$M;var C$T=this.transform.localRotation;C$s.rotation?C$T.fromArray(C$s.rotation):C$T.fromArray([0,0,0,-1]),this.transform.localRotation=C$T;var C$X=this.transform.localScale;C$s.scale?C$X.fromArray(C$s.scale):C$X.elements.fill(1),this.transform.localScale=C$X;var C$x=C$s.layer;null!=C$x&&(this.layer=C$o.getLayerByNumber(C$x))},C$T._parseCustomComponent=function(C$s,C$M,C$T){for(var C$X in C$T){var C$x=C$T[C$X];switch(C$X){case"Animator":var C$c=this.addComponent(Animator);if(C$x.avatarPath)C$c.avatar=C$f.getRes(C$M[C$x.avatarPath]);else{var C$l=C$x.avatar;if(C$l){C$c.avatar=C$f.getRes(C$M[C$l.path]);var C$u=C$l.linkSprites;C$u&&C$s.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[C$c,C$u])}}for(var C$E=C$x.clipPaths,C$O=C$E.length,C$U=0;C$U<C$O;C$U++)C$c.addClip(C$f.getRes(C$M[C$E[C$U]]));C$c.clip=C$f.getRes(C$M[C$E[0]]);var C$p=C$x.playOnWake;void 0!==C$p&&(C$c.playOnWake=C$p);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var C$_=this.addComponent(SphereCollider);C$_.isTrigger=C$x.isTrigger;var C$R=C$_.center;C$R.fromArray(C$x.center),C$_.center=C$R,C$_.radius=C$x.radius;break;case"BoxCollider":var C$q=this.addComponent(BoxCollider);C$q.isTrigger=C$x.isTrigger,C$q.center.fromArray(C$x.center);var C$G=C$q.size;C$G.fromArray(C$x.size),C$q.size=C$G;break;case"MeshCollider":this.addComponent(MeshCollider)}}},C$T._onRootNodeHierarchyLoaded=function(C$s,C$M){for(var C$T in C$M){for(var C$X=this,C$x=C$M[C$T],C$c=0,C$l=C$x.length;C$c<C$l;C$c++){var C$u=C$x[C$c];if(""===C$u)break;if(!(C$X=C$X.getChildByName(C$u)))break}C$X&&C$s.linkSprite3DToAvatarNode(C$T,C$X)}},C$T._setHierarchyAnimator=function(C$s,C$M){this._changeHierarchyAnimator(C$s);for(var C$T=0,C$X=this._childs.length;C$T<C$X;C$T++){var C$x=this._childs[C$T];C$x._hierarchyAnimator==C$M&&C$x._setHierarchyAnimator(C$s,C$M)}},C$T._clearHierarchyAnimator=function(C$s,C$M){this._changeHierarchyAnimator(C$M);for(var C$T=0,C$X=this._childs.length;C$T<C$X;C$T++){var C$x=this._childs[C$T];C$x._hierarchyAnimator==C$s&&C$x._clearHierarchyAnimator(C$s,C$M)}},C$T._getAnimatorToLinkSprite3D=function(C$s,C$M,C$T){var C$X=this.getComponentByType(Animator);if(C$X&&(C$X.avatar?C$X.avatar._version||C$s._setAnimatorToLinkAvatar(C$X,C$M):C$s._setAnimatorToLinkSprite3DNoAvatar(C$X,C$M,C$T)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){C$T.unshift(this._parent.name);var C$x=this._parent;C$x._hierarchyAnimator&&C$x._getAnimatorToLinkSprite3D(C$s,C$M,C$T)}},C$T._setAnimatorToLinkSprite3DNoAvatar=function(C$s,C$M,C$T){var C$X=0,C$x=0;for(C$X=0,C$x=C$s.getClipCount();C$X<C$x;C$X++)C$s._handleSpriteOwnersBySprite(C$X,C$M,C$T,this);for(C$X=0,C$x=this._childs.length;C$X<C$x;C$X++){var C$c=this._childs[C$X],C$l=C$T.length;C$T.push(C$c.name),C$c._setAnimatorToLinkSprite3DNoAvatar(C$s,C$M,C$T),C$T.splice(C$l,1)}},C$T._changeHierarchyAnimator=function(C$s){this._hierarchyAnimator=C$s},C$T._isLinkSpriteToAnimationNode=function(C$s,C$M,C$T){var C$X=C$s._avatarNodes.indexOf(C$M),C$x=C$s._cacheSpriteToNodesMap;if(C$T)this._transform.dummy=C$M.transform,C$s._cacheNodesToSpriteMap[C$X]=C$x.length,C$x.push(C$X);else{this._transform.dummy=null;var C$c=C$s._cacheNodesToSpriteMap[C$X];C$s._cacheNodesToSpriteMap[C$X]=null,C$x.splice(C$c,1)}},C$T._setBelongScene=function(C$s){this._scene=C$s;for(var C$M=0,C$T=this._childs.length;C$M<C$T;C$M++)this._childs[C$M]._setBelongScene(C$s)},C$T._setUnBelongScene=function(){this._scene=null;for(var C$s=0,C$M=this._childs.length;C$s<C$M;C$s++)this._childs[C$s]._setUnBelongScene()},C$T._activeHierarchy=function(){var C$s=0,C$M=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),C$s=0,C$M=this._colliders.length;C$s<C$M;C$s++)this._layer._addCollider(this._colliders[C$s]);for(this.event("activeinhierarchychanged",!0),C$s=0,C$M=this._childs.length;C$s<C$M;C$s++){var C$T=this._childs[C$s];C$T._active&&C$T._activeHierarchy()}},C$T._inActiveHierarchy=function(){var C$s=0,C$M=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),C$s=0,C$M=this._colliders.length;C$s<C$M;C$s++){var C$T=this._colliders[C$s];C$T._clearCollsionMap(),this._layer._removeCollider(C$T)}for(this.event("activeinhierarchychanged",!1),C$s=0,C$M=this._childs.length;C$s<C$M;C$s++){var C$X=this._childs[C$s];C$X._active&&C$X._inActiveHierarchy()}},C$T.addComponent=function(C$s){var C$M,C$T=this._componentsMap.indexOf(C$s);if(-1===C$T)C$M=[],this._componentsMap.push(C$s),this._typeComponentsIndices.push(C$M);else if(C$M=this._typeComponentsIndices[C$T],this._components[C$M[0]].isSingleton)throw new Error("无法单实例创建"+C$s+"组件，"+C$s+"组件已存在！");var C$X=C$x.getInstance(C$s);return C$M.push(this._components.length),this._components.push(C$X),C$X instanceof laya.d3.component.Script&&this._scripts.push(C$X),C$X._initialize(this),C$X},C$T._removeComponent=function(C$s,C$M){var C$T,C$X=0,C$x=this._typeComponentsIndices[C$s],C$c=C$x[C$M],C$l=this._components[C$c];for(C$l instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(C$l),1),C$x.splice(C$M,1),0===C$x.length&&(this._typeComponentsIndices.splice(C$s,1),this._componentsMap.splice(C$s,1)),C$X=0,C$T=this._componentsMap.length;C$X<C$T;C$X++)for(var C$u=(C$x=this._typeComponentsIndices[C$X]).length-1;0<=C$u;C$u--){var C$E=C$x[C$u];if(!(C$c<C$E))break;C$x[C$u]=--C$E}C$l._destroy()},C$T._clearSelfRenderObjects=function(){},C$T._addSelfRenderObjects=function(){},C$T._parseCustomProps=function(C$s,C$M,C$T,C$X){},C$T._updateChilds=function(C$s){var C$M=this._childs.length;if(0!==C$M)for(var C$T=0;C$T<C$M;++C$T)this._childs[C$T]._update(C$s)},C$T._getSortID=function(C$s,C$M){return 1e3*C$M.id+C$s._getVertexBuffer().vertexDeclaration.id},C$T._update=function(C$s){(C$s.owner=this)._activeInHierarchy&&(this._updateComponents(C$s),this._lateUpdateComponents(C$s),C$k.spriteCount++,this._childs.length&&this._updateChilds(C$s))},C$T.getProjectionViewWorldMatrix=function(C$s){return C$sM.multiply(C$s,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},C$T.loadHierarchy=function(C$s){this.addChild(laya.d3.core.Sprite3D.load(C$s))},C$T.addChildAt=function(C$s,C$M){if(!(C$s instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),0<=C$M&&C$M<=this._childs.length){if(C$s._parent===this){var C$T=this.getChildIndex(C$s);this._childs.splice(C$T,1),this._childs.splice(C$M,0,C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,C$M)),this._childChanged()}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$O.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(C$M,0,C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,C$M),(C$s.parent=this)._addChild3D(C$s);return C$s}throw new Error("appendChildAt:The index is out of bounds")},C$T.addChild=function(C$s){if(!(C$s instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!C$s||this.destroyed||C$s===this)return C$s;if(C$s.zOrder&&this._set$P("hasZorder",!0),C$s._parent===this){var C$M=this.getChildIndex(C$s);C$M!==this._childs.length-1&&(this._childs.splice(C$M,1),this._childs.push(C$s),this.conchModel&&(this.conchModel.removeChild(C$s.conchModel),this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1)),this._childChanged())}else C$s.parent&&C$s.parent.removeChild(C$s),this._childs===C$O.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(C$s),this.conchModel&&this.conchModel.addChildAt(C$s.conchModel,this._childs.length-1),(C$s.parent=this)._childChanged(),this._addChild3D(C$s);return C$s},C$T.removeChildAt=function(C$s){var C$M=this.getChildAt(C$s);return C$M&&(this._removeChild3D(C$M),this._childs.splice(C$s,1),this.conchModel&&this.conchModel.removeChild(C$M.conchModel),C$M.parent=null),C$M},C$T.removeChildren=function(C$s,C$M){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=2147483647),this._childs&&0<this._childs.length){var C$T=this._childs;if(0===C$s&&C$c<=C$M){var C$X=C$T;this._childs=C$O.ARRAY_EMPTY}else C$X=C$T.splice(C$s,C$M-C$s);for(var C$x=0,C$c=C$X.length;C$x<C$c;C$x++)this._removeChild3D(C$X[C$x]),C$X[C$x].parent=null,this.conchModel&&this.conchModel.removeChild(C$X[C$x].conchModel)}return this},C$T.onAsynLoaded=function(C$s,C$M,C$T){var C$X=C$M[0];if("Sprite3D"!==C$X.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var C$x=C$M[1];C$gM._createNodeByJson(this,C$X,this,C$x),this.event("hierarchyloaded",[this]),this.__loaded=!0},C$T.cloneTo=function(C$s){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var C$M=C$s;C$M.name=this.name,C$M._destroyed=this._destroyed,C$M.timer=this.timer,C$M._$P=this._$P,C$M.active=this._active;var C$T=C$M.transform.localPosition;this.transform.localPosition.cloneTo(C$T),C$M.transform.localPosition=C$T;var C$X=C$M.transform.localRotation;this.transform.localRotation.cloneTo(C$X),C$M.transform.localRotation=C$X;var C$x=C$M.transform.localScale;this.transform.localScale.cloneTo(C$x),C$M.transform.localScale=C$x,C$M.isStatic=this.isStatic;var C$c=0,C$l=0;for(C$c=0,C$l=this._componentsMap.length;C$c<C$l;C$c++){var C$u=C$M.addComponent(this._componentsMap[C$c]);this._components[C$c]._cloneTo(C$u)}for(C$c=0,C$l=this._childs.length;C$c<C$l;C$c++)C$M.addChild(this._childs[C$c].clone());var C$E=C$M.getComponentByType(Animator);if(C$E){var C$O=C$E._linkSpritesData;if(C$O)for(var C$U in C$O){for(var C$p=C$O[C$U],C$_=C$M,C$R=0,C$q=C$p.length;C$R<C$q&&(C$_=C$_.getChildByName(C$p[C$R]));C$R++);if(C$_){var C$G=C$E._avatarNodeMap[C$U];C$_._isLinkSpriteToAnimationNode(C$E,C$G,!0)}}}},C$T.clone=function(){var C$s=new this.constructor;return this.cloneTo(C$s),C$s},C$T.destroy=function(C$s){if(void 0===C$s&&(C$s=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,C$s);var C$M,C$T=0;for(C$T=0,C$M=this._components.length;C$T<C$M;C$T++)this._components[C$T]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,C$f.clearRes(this.url),this.loaded||C$fM._cancelLoadByUrl(this.url)}},C$T._handleSpriteToAvatar=function(C$s,C$M){C$s._avatarNodes;var C$T=C$s._avatarNodeMap[this.name];C$T&&C$T.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(C$s,C$T,C$M)},C$T._setAnimatorToLinkAvatar=function(C$s,C$M){this._handleSpriteToAvatar(C$s,C$M);for(var C$T=0,C$X=this._childs.length;C$T<C$X;C$T++){this._childs[C$T]._setAnimatorToLinkAvatar(C$s,C$M)}},C$q(0,C$T,"activeInHierarchy",function(){return this._activeInHierarchy}),C$q(0,C$T,"_loaded",null,function(C$s){this.__loaded=C$s}),C$q(0,C$T,"active",function(){return this._active},function(C$s){this._active!==C$s&&(this._active=C$s,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(C$s?this._activeHierarchy():this._inActiveHierarchy()))}),C$q(0,C$T,"componentsCount",function(){return this._components.length}),C$q(0,C$T,"loaded",function(){return this.__loaded}),C$q(0,C$T,"id",function(){return this._id}),C$q(0,C$T,"url",function(){return this._url}),C$q(0,C$T,"layer",function(){return this._layer},function(C$s){if(this._layer!==C$s){if(!C$s)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var C$M=0,C$T=this._colliders.length;if(this._layer)for(C$M=0;C$M<C$T;C$M++)this._layer._removeCollider(this._colliders[C$M]);for(C$M=0;C$M<C$T;C$M++)C$s._addCollider(this._colliders[C$M])}this._layer=C$s,this.event("layerchanged",C$s)}}),C$q(0,C$T,"scene",function(){return this._scene}),C$q(0,C$T,"transform",function(){return this._transform}),C$M.instantiate=function(C$s,C$M,C$T,C$X,C$x){void 0===C$T&&(C$T=!0);var C$c=C$s.clone();C$M&&C$M.addChild(C$c);var C$l=C$c.transform;if(C$T){var C$u=C$l.worldMatrix;C$s.transform.worldMatrix.cloneTo(C$u),C$l.worldMatrix=C$u}else C$X&&(C$l.position=C$X),C$x&&(C$l.rotation=C$x);return C$c},C$M.load=function(C$s){return C$r.loader.create(C$s,null,null,C$M)},C$M.WORLDMATRIX=0,C$M.MVPMATRIX=1,C$M._uniqueIDCounter=0,C$M._nameNumberCounter=0,C$M}(),C$YM=function(C$s){function C$U(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],C$U.__super.call(this),!C$s||!C$M)throw"Shader Error";this._id=++C$U._count,this._vs=C$s,this._ps=C$M,this._attributeMap=C$T,this._sceneUniformMap=C$X,this._cameraUniformMap=C$x,this._spriteUniformMap=C$c,this._materialUniformMap=C$l,this._renderElementUniformMap=C$u,this._precompile=C$E,this._define=C$O,this._precompile&&C$U.extCompileObj&&C$U.extCompileFunc?C$U.extCompileFunc.call(C$U.extCompileObj,C$s,C$M,C$O):this.recreateResource()}C$R(C$U,"laya.d3.shader.Shader3D",C$T);var C$M=C$U.prototype;return C$M.recreateResource=function(){C$B.now();this._compile(),this.completeCreate(),this.memorySize=0},C$M.disposeResource=function(){C$v.mainContext.deleteShader(this._vshader),C$v.mainContext.deleteShader(this._pshader),C$v.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},C$M._compile=function(){if(!C$v.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var C$s=[this._vs,this._ps],C$M=C$v.mainContext;if(this._program=C$M.createProgram(),this._vshader=C$U._createShader(C$M,C$s[0],35633),this._pshader=C$U._createShader(C$M,C$s[1],35632),C$M.attachShader(this._program,this._vshader),C$M.attachShader(this._program,this._pshader),C$M.linkProgram(this._program),!C$G.isConchApp&&C$kM.debugMode&&!C$M.getProgramParameter(this._program,35714))throw C$M.getProgramInfoLog(this._program);var C$T,C$X=0,C$x=0,C$c=0;for(C$c=C$G.isConchApp?C$M.getProgramParameterEx(this._vs,this._ps,"",35721):C$M.getProgramParameter(this._program,35721),C$X=0;C$X<C$c;C$X++){var C$l=null;C$T={vartype:"attribute",ivartype:0,attrib:C$l=C$G.isConchApp?C$M.getActiveAttribEx(this._vs,this._ps,"",C$X):C$M.getActiveAttrib(this._program,C$X),location:C$M.getAttribLocation(this._program,C$l.name),name:C$l.name,type:C$l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(C$T)}var C$u=0;for(C$u=C$G.isConchApp?C$M.getProgramParameterEx(this._vs,this._ps,"",35718):C$M.getProgramParameter(this._program,35718),C$X=0;C$X<C$u;C$X++){var C$E=null;C$E=C$G.isConchApp?C$M.getActiveUniformEx(this._vs,this._ps,"",C$X):C$M.getActiveUniform(this._program,C$X),0<(C$T={vartype:"uniform",ivartype:1,attrib:C$l,location:C$M.getUniformLocation(this._program,C$E.name),name:C$E.name,type:C$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(C$T.name=C$T.name.substr(0,C$T.name.length-3),C$T.isArray=!0,C$T.location=C$M.getUniformLocation(this._program,C$T.name)),this._uniformParams.push(C$T)}for(C$X=0,C$x=this._attributeParams.length;C$X<C$x;C$X++)(C$T=this._attributeParams[C$X]).indexOfParams=C$X,C$T.index=1,C$T.value=[C$T.location,null],C$T.codename=C$T.name,C$T.name=null!=this._attributeMap[C$T.codename]?this._attributeMap[C$T.codename]:C$T.codename,this._attributeParamsMap.push(C$T.name),this._attributeParamsMap.push(C$T),C$T._this=this,C$T.uploadedValue=[],C$T.fun=this._attribute;for(C$X=0,C$x=this._uniformParams.length;C$X<C$x;C$X++)switch((C$T=this._uniformParams[C$X]).indexOfParams=C$X,C$T.index=1,C$T.value=[C$T.location,null],C$T.codename=C$T.name,null!=this._sceneUniformMap[C$T.codename]?(C$T.name=this._sceneUniformMap[C$T.codename],this._sceneUniformParamsMap.push(C$T.name),this._sceneUniformParamsMap.push(C$T)):null!=this._cameraUniformMap[C$T.codename]?(C$T.name=this._cameraUniformMap[C$T.codename],this._cameraUniformParamsMap.push(C$T.name),this._cameraUniformParamsMap.push(C$T)):null!=this._spriteUniformMap[C$T.codename]?(C$T.name=this._spriteUniformMap[C$T.codename],this._spriteUniformParamsMap.push(C$T.name),this._spriteUniformParamsMap.push(C$T)):null!=this._materialUniformMap[C$T.codename]?(C$T.name=this._materialUniformMap[C$T.codename],this._materialUniformParamsMap.push(C$T.name),this._materialUniformParamsMap.push(C$T)):null!=this._renderElementUniformMap[C$T.codename]?(C$T.name=this._renderElementUniformMap[C$T.codename],this._renderElementUniformParamsMap.push(C$T.name),this._renderElementUniformParamsMap.push(C$T)):console.log("Shader:can't find uinform name:"+C$T.codename+" in shader file."),C$T._this=this,C$T.uploadedValue=[],C$T.type){case 5124:C$T.fun=C$T.isArray?this._uniform1iv:this._uniform1i;break;case 5126:C$T.fun=C$T.isArray?this._uniform1fv:this._uniform1f;break;case 35664:C$T.fun=C$T.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:C$T.fun=C$T.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:C$T.fun=C$T.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:C$T.fun=this._uniform_sampler2D;break;case 35680:C$T.fun=this._uniform_samplerCube;break;case 35676:C$T.fun=this._uniformMatrix4fv;break;case 35670:C$T.fun=this._uniform1i;break;case 35674:C$T.fun=this._uinformMatrix2fv;break;case 35675:C$T.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},C$M._attribute=function(C$s,C$M){var C$T=C$v.mainContext,C$X=C$u._enableAtributes,C$x=C$s.location;return C$X[C$x]||C$T.enableVertexAttribArray(C$x),C$T.vertexAttribPointer(C$x,C$M[0],C$M[1],C$M[2],C$M[3],C$M[4]),C$X[C$x]=C$u._bindVertexBuffer,1},C$M._uniform1f=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M?(C$v.mainContext.uniform1f(C$s.location,C$T[0]=C$M),1):0},C$M._uniform1fv=function(C$s,C$M){if(C$M.length<4){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$v.mainContext.uniform1fv(C$s.location,C$M),C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3],1):0}return C$v.mainContext.uniform1fv(C$s.location,C$M),1},C$M._uniform_vec2=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]?(C$v.mainContext.uniform2f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1]),1):0},C$M._uniform_vec2v=function(C$s,C$M){if(C$M.length<2){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$v.mainContext.uniform2fv(C$s.location,C$M),C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3],1):0}return C$v.mainContext.uniform2fv(C$s.location,C$M),1},C$M._uniform_vec3=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]?(C$v.mainContext.uniform3f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2]),1):0},C$M._uniform_vec3v=function(C$s,C$M){return C$v.mainContext.uniform3fv(C$s.location,C$M),1},C$M._uniform_vec4=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$v.mainContext.uniform4f(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3]),1):0},C$M._uniform_vec4v=function(C$s,C$M){return C$v.mainContext.uniform4fv(C$s.location,C$M),1},C$M._uniformMatrix2fv=function(C$s,C$M){return C$v.mainContext.uniformMatrix2fv(C$s.location,!1,C$M),1},C$M._uniformMatrix3fv=function(C$s,C$M){return C$v.mainContext.uniformMatrix3fv(C$s.location,!1,C$M),1},C$M._uniformMatrix4fv=function(C$s,C$M){return C$v.mainContext.uniformMatrix4fv(C$s.location,!1,C$M),1},C$M._uinformMatrix2fv=function(C$s,C$M){return C$v.mainContext.uniformMatrix2fv(C$s.location,!1,C$M),1},C$M._uinformMatrix3fv=function(C$s,C$M){return C$v.mainContext.uniformMatrix3fv(C$s.location,!1,C$M),1},C$M._uniform1i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M?(C$v.mainContext.uniform1i(C$s.location,C$T[0]=C$M),1):0},C$M._uniform1iv=function(C$s,C$M){return C$v.mainContext.uniform1iv(C$s.location,C$M),1},C$M._uniform_ivec2=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]?(C$v.mainContext.uniform2i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1]),1):0},C$M._uniform_ivec2v=function(C$s,C$M){return C$v.mainContext.uniform2iv(C$s.location,C$M),1},C$M._uniform_vec3i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]?(C$v.mainContext.uniform3i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2]),1):0},C$M._uniform_vec3vi=function(C$s,C$M){return C$v.mainContext.uniform3iv(C$s.location,C$M),1},C$M._uniform_vec4i=function(C$s,C$M){var C$T=C$s.uploadedValue;return C$T[0]!==C$M[0]||C$T[1]!==C$M[1]||C$T[2]!==C$M[2]||C$T[3]!==C$M[3]?(C$v.mainContext.uniform4i(C$s.location,C$T[0]=C$M[0],C$T[1]=C$M[1],C$T[2]=C$M[2],C$T[3]=C$M[3]),1):0},C$M._uniform_vec4vi=function(C$s,C$M){return C$v.mainContext.uniform4iv(C$s.location,C$M),1},C$M._uniform_sampler2D=function(C$s,C$M){var C$T=C$M.source||C$M.defaulteTexture.source,C$X=C$v.mainContext,C$x=C$s.uploadedValue;if(null!=C$x[0])return C$X.activeTexture(C$U._TEXTURES[C$x[0]]),C$T&&C$z.bindTexture(C$X,3553,C$T),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return C$x[0]=this._curActTexIndex,C$X.uniform1i(C$s.location,this._curActTexIndex),C$X.activeTexture(C$U._TEXTURES[this._curActTexIndex]),C$T&&C$z.bindTexture(C$X,3553,C$T),this._curActTexIndex++,1},C$M._uniform_samplerCube=function(C$s,C$M){var C$T=C$M.source||C$M.defaulteTexture.source,C$X=C$v.mainContext,C$x=C$s.uploadedValue;if(null!=C$x[0])return C$X.activeTexture(C$U._TEXTURES[C$x[0]]),C$T?C$z.bindTexture(C$X,34067,C$T):C$z.bindTexture(C$X,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return C$x[0]=this._curActTexIndex,C$X.uniform1i(C$s.location,this._curActTexIndex),C$X.activeTexture(C$U._TEXTURES[this._curActTexIndex]),C$T?C$z.bindTexture(C$X,34067,C$T):C$z.bindTexture(C$X,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},C$M._noSetValue=function(C$s){console.log("no....:"+C$s.name)},C$M.bind=function(){return C$T.activeShader=this,(C$T.bindShader=this).activeResource(),C$z.UseProgram(this._program)},C$M.uploadAttributes=function(C$s,C$M){for(var C$T,C$X,C$x=0,C$c=0,C$l=this._attributeParamsMap.length;C$c<C$l;C$c+=2)C$X=this._attributeParamsMap[C$c+1],null!=(C$T=C$s[this._attributeParamsMap[C$c]])&&(C$M&&C$M[C$X.name]&&C$M[C$X.name].bind(),C$x+=C$X.fun.call(this,C$X,C$T));C$k.shaderCall+=C$x},C$M.uploadAttributesX=function(C$s,C$M){for(var C$T,C$X,C$x=0,C$c=0,C$l=this._attributeParamsMap.length;C$c<C$l;C$c+=2)C$X=this._attributeParamsMap[C$c+1],null!=(C$T=C$s[this._attributeParamsMap[C$c]])&&(C$M._bind(),C$x+=C$X.fun.call(this,C$X,C$T));C$k.shaderCall+=C$x},C$M.uploadSceneUniforms=function(C$s){for(var C$M,C$T,C$X=0,C$x=0,C$c=this._sceneUniformParamsMap.length;C$x<C$c;C$x+=2)C$T=this._sceneUniformParamsMap[C$x+1],null!=(C$M=C$s[this._sceneUniformParamsMap[C$x]])&&(C$X+=C$T.fun.call(this,C$T,C$M));C$k.shaderCall+=C$X},C$M.uploadCameraUniforms=function(C$s){for(var C$M,C$T,C$X=0,C$x=0,C$c=this._cameraUniformParamsMap.length;C$x<C$c;C$x+=2)C$T=this._cameraUniformParamsMap[C$x+1],null!=(C$M=C$s[this._cameraUniformParamsMap[C$x]])&&(C$X+=C$T.fun.call(this,C$T,C$M));C$k.shaderCall+=C$X},C$M.uploadSpriteUniforms=function(C$s){for(var C$M,C$T,C$X=0,C$x=0,C$c=this._spriteUniformParamsMap.length;C$x<C$c;C$x+=2)C$T=this._spriteUniformParamsMap[C$x+1],null!=(C$M=C$s[this._spriteUniformParamsMap[C$x]])&&(C$X+=C$T.fun.call(this,C$T,C$M));C$k.shaderCall+=C$X},C$M.uploadMaterialUniforms=function(C$s){for(var C$M,C$T,C$X=0,C$x=0,C$c=this._materialUniformParamsMap.length;C$x<C$c;C$x+=2)C$T=this._materialUniformParamsMap[C$x+1],null!=(C$M=C$s[this._materialUniformParamsMap[C$x]])&&(C$X+=C$T.fun.call(this,C$T,C$M));C$k.shaderCall+=C$X},C$M.uploadRenderElementUniforms=function(C$s){for(var C$M,C$T,C$X=0,C$x=0,C$c=this._renderElementUniformParamsMap.length;C$x<C$c;C$x+=2)C$T=this._renderElementUniformParamsMap[C$x+1],null!=(C$M=C$s[this._renderElementUniformParamsMap[C$x]])&&(C$X+=C$T.fun.call(this,C$T,C$M));C$k.shaderCall+=C$X},C$U.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return new C$U(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O)},C$U.addInclude=function(C$s,C$M){C$P.addInclude(C$s,C$M)},C$U._createShader=function(C$s,C$M,C$T){var C$X=C$s.createShader(C$T);if(C$s.shaderSource(C$X,C$M),C$s.compileShader(C$X),C$kM.debugMode&&!C$s.getShaderParameter(C$X,35713))throw C$s.getShaderInfoLog(C$X);return C$X},C$U.PERIOD_RENDERELEMENT=0,C$U.PERIOD_MATERIAL=1,C$U.PERIOD_SPRITE=2,C$U.PERIOD_CAMERA=3,C$U.PERIOD_SCENE=4,C$U._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],C$U._count=0,C$U._preCompile=!1,C$U.extCompileFunc=null,C$U.extCompileObj=null,C$p(C$U,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new C$A}]),C$U}(),C$IM=function(C$u){function C$E(){this._transformUV=null,C$E.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new C$lM(.6,.6,.6)),this._setColor(10,new C$lM(1,1,1)),this._setColor(11,new C$uM(1,1,1,8)),this._setColor(12,new C$lM(1,1,1)),this._setColor(7,new C$uM(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new C$uM(1,1,0,0)),this.renderMode=1}C$R(C$E,"laya.d3.core.material.StandardMaterial",C$u);var C$s=C$E.prototype;return C$s.disableLight=function(){this._addDisablePublicShaderDefine(C$kM.SHADERDEFINE_POINTLIGHT|C$kM.SHADERDEFINE_SPOTLIGHT|C$kM.SHADERDEFINE_DIRECTIONLIGHT)},C$s.disableFog=function(){this._addDisablePublicShaderDefine(C$kM.SHADERDEFINE_FOG)},C$s.onAsynLoaded=function(C$s,C$M,C$T){var C$X=C$M[0];if(C$X.version)C$u.prototype.onAsynLoaded.call(this,C$s,C$M,C$T);else{var C$x=C$M[1],C$c=C$X.props;for(var C$l in C$c)this[C$l]=C$c[C$l];C$E._parseStandardMaterial(C$x,this,C$X),this._endLoaded()}},C$s.cloneTo=function(C$s){C$u.prototype.cloneTo.call(this,C$s);var C$M=C$s;this._transformUV&&(C$M._transformUV=this._transformUV.clone())},C$q(0,C$s,"ambientColor",function(){return this._getColor(9)},function(C$s){this._setColor(9,C$s)}),C$q(0,C$s,"ambientTexture",function(){return this._getTexture(5)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,C$s)}),C$q(0,C$s,"renderMode",null,function(C$s){switch(C$s){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(C$E.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(C$s)}),C$q(0,C$s,"reflectColor",function(){return this._getColor(12)},function(C$s){this._setColor(12,C$s)}),C$q(0,C$s,"tilingOffset",function(){return this._getColor(15)},function(C$s){if(C$s){var C$M=C$s.elements;1!=C$M[0]||1!=C$M[1]||0!=C$M[2]||0!=C$M[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,C$s)}),C$q(0,C$s,"albedo",function(){return this._getColor(7)},function(C$s){this._setColor(7,C$s)}),C$q(0,C$s,"diffuseColor",function(){return this._getColor(10)},function(C$s){this._setColor(10,C$s)}),C$q(0,C$s,"albedoColor",function(){return this._getColor(7)},function(C$s){this._setColor(7,C$s)}),C$q(0,C$s,"specularColor",function(){return this._getColor(11)},function(C$s){this._setColor(11,C$s)}),C$q(0,C$s,"diffuseTexture",function(){return this._getTexture(1)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,C$s)}),C$q(0,C$s,"normalTexture",function(){return this._getTexture(2)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,C$s)}),C$q(0,C$s,"specularTexture",function(){return this._getTexture(3)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,C$s)}),C$q(0,C$s,"emissiveTexture",function(){return this._getTexture(4)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,C$s)}),C$q(0,C$s,"reflectTexture",function(){return this._getTexture(6)},function(C$s){C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,C$s)}),C$q(0,C$s,"transformUV",function(){return this._transformUV},function(C$s){this._transformUV=C$s,this._setMatrix4x4(13,C$s.matrix),C$s?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,C$s.matrix.elements,0)}),C$E.__init__=function(){C$E.SHADERDEFINE_DIFFUSEMAP=C$E.shaderDefines.registerDefine("DIFFUSEMAP"),C$E.SHADERDEFINE_NORMALMAP=C$E.shaderDefines.registerDefine("NORMALMAP"),C$E.SHADERDEFINE_SPECULARMAP=C$E.shaderDefines.registerDefine("SPECULARMAP"),C$E.SHADERDEFINE_EMISSIVEMAP=C$E.shaderDefines.registerDefine("EMISSIVEMAP"),C$E.SHADERDEFINE_AMBIENTMAP=C$E.shaderDefines.registerDefine("AMBIENTMAP"),C$E.SHADERDEFINE_REFLECTMAP=C$E.shaderDefines.registerDefine("REFLECTMAP"),C$E.SHADERDEFINE_UVTRANSFORM=C$E.shaderDefines.registerDefine("UVTRANSFORM"),C$E.SHADERDEFINE_TILINGOFFSET=C$E.shaderDefines.registerDefine("TILINGOFFSET"),C$E.SHADERDEFINE_ADDTIVEFOG=C$E.shaderDefines.registerDefine("ADDTIVEFOG")},C$E.load=function(C$s){return C$r.loader.create(C$s,null,null,C$E)},C$E._parseStandardMaterial=function(C$s,C$M,C$T){var C$X=C$T.customProps,C$x=C$X.ambientColor;C$M.ambientColor=new C$lM(C$x[0],C$x[1],C$x[2]);var C$c=C$X.diffuseColor;C$M.diffuseColor=new C$lM(C$c[0],C$c[1],C$c[2]);var C$l=C$X.specularColor;C$M.specularColor=new C$uM(C$l[0],C$l[1],C$l[2],C$l[3]);var C$u=C$X.reflectColor;C$M.reflectColor=new C$lM(C$u[0],C$u[1],C$u[2]);var C$E=C$X.albedoColor;C$E&&(C$M.albedo=new C$uM(C$E[0],C$E[1],C$E[2],C$E[3]));var C$O=C$X.diffuseTexture.texture2D;C$O&&(C$M.diffuseTexture=C$f.getRes(C$s[C$O]));var C$U=C$X.normalTexture.texture2D;C$U&&(C$M.normalTexture=C$f.getRes(C$s[C$U]));var C$p=C$X.specularTexture.texture2D;C$p&&(C$M.specularTexture=C$f.getRes(C$s[C$p]));var C$_=C$X.emissiveTexture.texture2D;C$_&&(C$M.emissiveTexture=C$f.getRes(C$s[C$_]));var C$R=C$X.ambientTexture.texture2D;C$R&&(C$M.ambientTexture=C$f.getRes(C$s[C$R]));var C$q=C$X.reflectTexture.texture2D;C$q&&(C$M.reflectTexture=C$f.getRes(C$s[C$q]))},C$E.RENDERMODE_OPAQUE=1,C$E.RENDERMODE_OPAQUEDOUBLEFACE=2,C$E.RENDERMODE_CUTOUT=3,C$E.RENDERMODE_CUTOUTDOUBLEFACE=4,C$E.RENDERMODE_TRANSPARENT=13,C$E.RENDERMODE_TRANSPARENTDOUBLEFACE=14,C$E.RENDERMODE_ADDTIVE=15,C$E.RENDERMODE_ADDTIVEDOUBLEFACE=16,C$E.RENDERMODE_DEPTHREAD_TRANSPARENT=5,C$E.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,C$E.RENDERMODE_DEPTHREAD_ADDTIVE=7,C$E.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,C$E.RENDERMODE_NONDEPTH_TRANSPARENT=9,C$E.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,C$E.RENDERMODE_NONDEPTH_ADDTIVE=11,C$E.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,C$E.SHADERDEFINE_DIFFUSEMAP=0,C$E.SHADERDEFINE_NORMALMAP=0,C$E.SHADERDEFINE_SPECULARMAP=0,C$E.SHADERDEFINE_EMISSIVEMAP=0,C$E.SHADERDEFINE_AMBIENTMAP=0,C$E.SHADERDEFINE_REFLECTMAP=0,C$E.SHADERDEFINE_UVTRANSFORM=0,C$E.SHADERDEFINE_TILINGOFFSET=0,C$E.SHADERDEFINE_ADDTIVEFOG=0,C$E.DIFFUSETEXTURE=1,C$E.NORMALTEXTURE=2,C$E.SPECULARTEXTURE=3,C$E.EMISSIVETEXTURE=4,C$E.AMBIENTTEXTURE=5,C$E.REFLECTTEXTURE=6,C$E.ALBEDO=7,C$E.UVANIAGE=8,C$E.MATERIALAMBIENT=9,C$E.MATERIALDIFFUSE=10,C$E.MATERIALSPECULAR=11,C$E.MATERIALREFLECT=12,C$E.UVMATRIX=13,C$E.UVAGE=14,C$E.TILINGOFFSET=15,C$p(C$E,["defaultMaterial",function(){var C$s=new C$E;return C$s.lock=!0,this.defaultMaterial=C$s},"shaderDefines",function(){return this.shaderDefines=new C$UM(C$QM.shaderDefines)}]),C$E}(C$QM),C$yM=function(C$s){function C$l(C$s,C$M,C$T,C$X,C$x){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===C$T&&(C$T=35044),void 0===C$X&&(C$X=!1),C$l.__super.call(this),this._indexType=C$s,this._indexCount=C$M,this._bufferUsage=C$T,this._bufferType=34963,this._canRead=C$X;var C$c;if("ushort"==C$s)this._indexTypeByteCount=2;else{if("ubyte"!=C$s)throw new Error("unidentification index type.");this._indexTypeByteCount=1}C$c=this._indexTypeByteCount*C$M,this._byteLength=C$c,this._bind(),C$u._gl.bufferData(this._bufferType,C$c,this._bufferUsage),this.uri=C$x,C$X?("ushort"==C$s?this._buffer=new Uint16Array(C$M):"ubyte"==C$s&&(this._buffer=new Uint8Array(C$M)),this.memorySize=2*C$c):this.memorySize=C$c}C$R(C$l,"laya.d3.graphics.IndexBuffer3D",C$s);var C$M=C$l.prototype;return C$M.setData=function(C$s,C$M,C$T,C$X){void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=4294967295);var C$x=0;if("ushort"==this._indexType?(C$x=2,0===C$T&&4294967295===C$X||(C$s=new Uint16Array(C$s.buffer,C$T*C$x,C$X))):"ubyte"==this._indexType&&(C$x=1,0===C$T&&4294967295===C$X||(C$s=new Uint8Array(C$s.buffer,C$T*C$x,C$X))),this._bind(),C$u._gl.bufferSubData(this._bufferType,C$M*C$x,C$s),this._canRead)if(0!==C$M||0!==C$T||4294967295!==C$X){var C$c=this._buffer.length-C$M;C$c<C$X&&(C$X=C$c);for(var C$l=0;C$l<C$X;C$l++)this._buffer[C$M+C$l]=C$s[C$l]}else this._buffer=C$s},C$M.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},C$M.disposeResource=function(){C$s.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},C$q(0,C$M,"indexType",function(){return this._indexType}),C$q(0,C$M,"indexTypeByteCount",function(){return this._indexTypeByteCount}),C$q(0,C$M,"indexCount",function(){return this._indexCount}),C$q(0,C$M,"canRead",function(){return this._canRead}),C$l.INDEXTYPE_UBYTE="ubyte",C$l.INDEXTYPE_USHORT="ushort",C$l.create=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$T&&(C$T=35044),void 0===C$X&&(C$X=!1),new C$l(C$s,C$M,C$T,C$X,C$x)},C$l}(C$u),C$eM=function(C$c){function C$l(C$s,C$M,C$T,C$X,C$x){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===C$X&&(C$X=!1),C$l.__super.call(this),this._vertexDeclaration=C$s,this._vertexCount=C$M,this._bufferUsage=C$T,this._bufferType=34962,this._canRead=C$X,this.uri=C$x,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*C$M,this._bind(),C$u._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),C$X&&(this._buffer=new Float32Array(this._byteLength/4))}C$R(C$l,"laya.d3.graphics.VertexBuffer3D",C$c);var C$s=C$l.prototype;return C$s.bindWithIndexBuffer=function(C$s){C$s&&C$s._bind(),this._bind()},C$s.setData=function(C$s,C$M,C$T,C$X){if(void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=4294967295),0===C$T&&4294967295===C$X||(C$s=new Float32Array(C$s.buffer,4*C$T,C$X)),this._bind(),C$u._gl.bufferSubData(this._bufferType,4*C$M,C$s),this._canRead)if(0!==C$M||0!==C$T||4294967295!==C$X){var C$x=this._buffer.length-C$M;C$x<C$X&&(C$X=C$x);for(var C$c=0;C$c<C$X;C$c++)this._buffer[C$M+C$c]=C$s[C$c]}else this._buffer=C$s},C$s.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},C$s.disposeResource=function(){for(var C$s=C$v.mainContext,C$M=this._vertexDeclaration.getVertexElements(),C$T=C$u._enableAtributes,C$X=0,C$x=C$M.length;C$X<C$x;C$X++)C$T[C$X]===this._glBuffer&&(C$s.disableVertexAttribArray(C$X),C$T[C$X]=null);C$c.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},C$q(0,C$s,"vertexDeclaration",function(){return this._vertexDeclaration}),C$q(0,C$s,"vertexCount",function(){return this._vertexCount}),C$q(0,C$s,"canRead",function(){return this._canRead}),C$l.create=function(C$s,C$M,C$T,C$X,C$x){return void 0===C$T&&(C$T=35044),void 0===C$X&&(C$X=!1),new C$l(C$s,C$M,C$T,C$X,C$x)},C$l}(C$u),C$VM=function(C$s){function C$P(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,C$P.__super.call(this),this._type=3553}C$R(C$P,"laya.d3.resource.DataTexture2D",C$vM);var C$M=C$P.prototype;return C$M.genDebugMipmaps=function(){var C$s=[];return C$s.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),C$s.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),C$s.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),C$s.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),C$s.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),C$s.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),C$s.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),C$s.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),C$s.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),C$s.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),C$s},C$M._onTextureLoaded=function(C$s){},C$M._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var C$s=C$v.mainContext,C$M=this._source=C$s.createTexture(),C$T=this._width,C$X=this._height,C$x=C$z.curBindTexTarget,C$c=C$z.curBindTexValue,C$l=!1;if(C$z.bindTexture(C$s,this._type,C$M),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var C$u=0;C$s.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var C$E=0;C$E<this._mipmaps.length;C$E++){if(this._mipmaps[C$E].byteLength!=C$O*C$U*4)throw"mipmap size error  level:"+C$E;C$s.texSubImage2D(this._type,0,C$P.simLodRect[C$u++],C$P.simLodRect[C$u++],C$P.simLodRect[C$u++],C$P.simLodRect[C$u++],6408,5121,new Uint8Array(this._mipmaps[C$E]))}this.minFifter=9729,this.magFifter=9729}else{var C$O=this._width,C$U=this._height;for(C$u=0,C$s.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),C$E=0;C$E<this._mipmaps.length;C$E++){if(this._mipmaps[C$E].byteLength!=C$O*C$U*4)throw"mipmap size error  level:"+C$E;C$s.texImage2D(this._type,C$E,6408,C$O,C$U,0,6408,5121,new Uint8Array(this._mipmaps[C$E])),(C$O/=2)<1&&(C$O=1),(C$U/=2)<1&&(C$U=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&C$s.pixelStorei(C$s.UNPACK_ALIGNMENT,1),C$s.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var C$p=0,C$_=!1,C$R=!1;this._buffer.byteLength==4*C$T*C$X?(C$p=6408,C$_=!0):this._buffer.byteLength==3*C$T*C$X?(C$p=6407,C$R=!0):C$p=this._format,C$_||C$R?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),C$R&&C$s.pixelStorei(C$s.UNPACK_ALIGNMENT,1),C$s.texImage2D(this._type,0,C$p,C$T,C$X,0,C$p,5121,this._buffer)):C$s&&C$p==C$s.ALPHA?(C$s.texImage2D(3553,0,C$p,C$T,C$X,0,C$p,C$s.UNSIGNED_BYTE,this._buffer),C$l=!0):0!=C$p&&(C$s.compressedTexImage2D(3553,0,C$p,C$T,C$X,0,this._buffer),C$l=!0)}var C$q=this._minFifter,C$G=this._magFifter,C$g=0==this._wrapModeU?10497:33071,C$f=0==this._wrapModeV?10497:33071,C$J=C$t.isPOT(C$T,C$X);C$J?(this._mipmap||this._mipmaps?-1!==C$q||(C$q=9987):-1!==C$q||(C$q=9729),-1!==C$G||(C$G=9729),C$s.texParameteri(this._type,10241,C$q),C$s.texParameteri(this._type,10240,C$G),C$s.texParameteri(this._type,10242,C$g),C$s.texParameteri(this._type,10243,C$f),this._mipmap&&C$s.generateMipmap(this._type)):(-1!==C$q||(C$q=9729),-1!==C$G||(C$G=9729),C$s.texParameteri(this._type,10241,C$q),C$s.texParameteri(this._type,10240,C$G),C$s.texParameteri(this._type,10242,33071),C$s.texParameteri(this._type,10243,33071)),C$x&&C$c&&C$z.bindTexture(C$s,C$x,C$c),this.memorySize=C$l?this._buffer.length:C$J?C$T*C$X*4*(1+1/3):C$T*C$X*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},C$M.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},C$M.onAsynLoaded=function(C$s,C$M,C$T){var C$X;C$T&&(C$X=C$T[0].call(this,C$M)),C$X&&(this._width=C$X.width,this._height=C$X.height,this._buffer=C$X.data),this._src=C$s,this._size=new C$GM(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},C$M.getPixels=function(){return new Uint8Array(this._buffer)},C$M.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(C$v.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},C$q(0,C$M,"src",function(){return this._src}),C$P.create=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){if(void 0===C$X&&(C$X=9729),void 0===C$x&&(C$x=9729),void 0===C$c&&(C$c=!0),!C$s||C$s.byteLength<C$M*C$T*4)throw"DataTexture2D create error";var C$u=new C$P;return C$u.uri=C$l,C$u._buffer=C$s,C$u._width=C$M,C$u._height=C$T,C$u._mipmap=C$c,C$u._magFifter=C$X,C$u._minFifter=C$x,C$u._size=new C$GM(C$u._width,C$u._height),C$u._conchTexture?alert("怎么给runtime传递datatexture数据"):C$u.activeResource(),C$u},C$P.load=function(C$s,C$M,C$T,C$X,C$x){if(void 0===C$M&&(C$M=0),void 0===C$T&&(C$T=0),void 0===C$X&&(C$X=9729),void 0===C$x&&(C$x=9729),"mipmaps"===C$D.getFileExtension(C$s)){var C$c=C$r.loader.create(C$s,null,null,C$P,[function(C$s){this._mipmaps=[];var C$M=new Uint32Array(C$s);this._width=C$M[0];var C$T=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,C$T=1024),this._width!=C$T)throw"现在只支持512x256的环境贴图。当前的是"+C$M[0];this._height=C$M[1];for(var C$X=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,C$x=this._height,C$c=8;;){var C$l=C$X*C$x*4;if(C$c+C$l>C$s.byteLength)throw"load mipmaps data size error ";var C$u=new Uint8Array(C$s,C$c,C$l);if(this._mipmaps.push(C$u),C$c+=C$l,1==C$X&&1==C$x)break;(C$X/=2)<1&&(C$X=1),(C$x/=2)<1&&(C$x=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){C$c.simLodInfo=new Float32Array(40);for(var C$l=0;C$l<C$c.simLodInfo.length;)C$c.simLodInfo[C$l]=(C$P.simLodRect[C$l]+.5)/1024,C$l++,C$c.simLodInfo[C$l]=(C$P.simLodRect[C$l]+.5)/256,C$l++,C$c.simLodInfo[C$l]=Math.max(C$P.simLodRect[C$l]-1,.1)/1024,C$l++,C$c.simLodInfo[C$l]=Math.max(C$P.simLodRect[C$l]-1.5,.1)/256,C$l++}return C$c}if("number"==typeof C$M)return C$r.loader.create(C$s,null,null,C$P,[function(C$s){return this._width=C$M,this._height=C$T,this._buffer=C$s,null}]);if("function"==typeof C$M)return C$r.loader.create(C$s,null,null,C$P,[C$M]);throw new Error("unknown params.")},C$P.lodasatlas=!1,C$p(C$P,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),C$P}(),C$bM=function(C$s){function C$M(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,C$M.__super.call(this)}C$R(C$M,"laya.d3.resource.models.PrimitiveMesh",C$zM);var C$T=C$M.prototype;return C$r.imps(C$T,{"laya.d3.core.render.IRenderable":!0}),C$T._getVertexBuffer=function(C$s){return void 0===C$s&&(C$s=0),0===C$s?this._vertexBuffer:null},C$T._getVertexBuffers=function(){return null},C$T._getIndexBuffer=function(){return this._indexBuffer},C$T._getPositions=function(){var C$s,C$M=[],C$T=this._vertexBuffer.vertexDeclaration.getVertexElements(),C$X=0;for(C$X=0;C$X<C$T.length;C$X++){var C$x=C$T[C$X];if("vector3"===C$x.elementFormat&&0===C$x.elementUsage){C$s=C$x;break}}var C$c=this._vertexBuffer.getData();for(C$X=0;C$X<C$c.length;C$X+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var C$l=C$X+C$s.offset/4,C$u=new C$lM(C$c[C$l+0],C$c[C$l+1],C$c[C$l+2]);C$M.push(C$u)}return C$M},C$T.getRenderElement=function(C$s){return this},C$T.getRenderElementsCount=function(){return 1},C$T.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},C$T._beforeRender=function(C$s){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},C$T._render=function(C$s){C$v.mainContext.drawElements(4,this._numberIndices,5123,0),C$k.drawCall++,C$k.trianglesFaces+=this._numberIndices/3},C$q(0,C$T,"_vertexBufferCount",function(){return 1}),C$q(0,C$T,"triangleCount",function(){return this._indexBuffer.indexCount/3}),C$M}(),C$LM=function(C$s){function C$M(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,C$M.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}C$R(C$M,"laya.d3.resource.models.Mesh",C$zM);var C$T=C$M.prototype;return C$T._getPositions=function(){var C$s,C$M,C$T,C$X,C$x,C$c=[],C$l=0,C$u=0,C$E=0;if(0!==this._vertexBuffers.length){var C$O=this._vertexBuffers.length;for(C$l=0;C$l<C$O;C$l++){for(C$T=(C$s=this._vertexBuffers[C$l]).vertexDeclaration.getVertexElements(),C$u=0;C$u<C$T.length;C$u++)if("vector3"===(C$X=C$T[C$u]).elementFormat&&0===C$X.elementUsage){C$M=C$X;break}for(C$x=C$s.getData(),C$u=0;C$u<C$x.length;C$u+=C$s.vertexDeclaration.vertexStride/4)C$E=C$u+C$M.offset/4,C$c.push(new C$lM(C$x[C$E+0],C$x[C$E+1],C$x[C$E+2]))}}else{var C$U=this._subMeshes.length;for(C$l=0;C$l<C$U;C$l++){for(C$T=(C$s=this._subMeshes[C$l]._getVertexBuffer()).vertexDeclaration.getVertexElements(),C$u=0;C$u<C$T.length;C$u++)if("vector3"===(C$X=C$T[C$u]).elementFormat&&0===C$X.elementUsage){C$M=C$X;break}for(C$x=C$s.getData(),C$u=0;C$u<C$x.length;C$u+=C$s.vertexDeclaration.vertexStride/4)C$E=C$u+C$M.offset/4,C$c.push(new C$lM(C$x[C$E+0],C$x[C$E+1],C$x[C$E+2]))}}return C$c},C$T._setSubMeshes=function(C$s){this._subMeshes=C$s,this._subMeshCount=C$s.length;for(var C$M=0;C$M<this._subMeshCount;C$M++)C$s[C$M]._indexInMesh=C$M;this._positions=this._getPositions(),this._generateBoundingObject()},C$T.onAsynLoaded=function(C$s,C$M,C$T){var C$X=C$M[0],C$x=C$M[1];C$Ws.read(C$X,this,this._materials,this._subMeshes,C$x),this.completeCreate(),this._endLoaded()},C$T.getSubMesh=function(C$s){return this._subMeshes[C$s]},C$T.getSubMeshCount=function(){return this._subMeshes.length},C$T.getRenderElementsCount=function(){return this._subMeshes.length},C$T.getRenderElement=function(C$s){return this._subMeshes[C$s]},C$T.disposeResource=function(){for(var C$s=0;C$s<this._subMeshes.length;C$s++)this._subMeshes[C$s].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},C$q(0,C$T,"materials",function(){return this._materials.slice()}),C$q(0,C$T,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),C$M.load=function(C$s){return C$r.loader.create(C$s,null,null,C$M)},C$M}(),C$SM=(function(C$s){function C$O(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===C$T&&(C$T=6408),void 0===C$X&&(C$X=5121),void 0===C$x&&(C$x=33189),void 0===C$c&&(C$c=!1),void 0===C$l&&(C$l=!1),void 0===C$u&&(C$u=-1),void 0===C$E&&(C$E=-1),C$O.__super.call(this),this._type=3553,this._width=C$s,this._height=C$M,this._size=new C$GM(C$s,C$M),this._surfaceFormat=C$T,this._surfaceType=C$X,this._depthStencilFormat=C$x,C$G.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=C$c,this._repeat=C$l,this._minFifter=C$u,this._magFifter=C$E,this.activeResource(),this._alreadyResolved=!0}C$R(C$O,"laya.d3.resource.RenderTexture",C$vM);var C$M=C$O.prototype;C$M.recreateResource=function(){var C$s=C$v.mainContext;this._frameBuffer=C$s.createFramebuffer(),this._source=C$s.createTexture();var C$M=C$z.curBindTexTarget,C$T=C$z.curBindTexValue;C$z.bindTexture(C$s,this._type,this._source),C$s.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var C$X=this._minFifter,C$x=this._magFifter,C$c=this._repeat?10497:33071;if(C$t.isPOT(this._width,this._height)?(this._mipmap?-1!==C$X||(C$X=9987):-1!==C$X||(C$X=9729),-1!==C$x||(C$x=9729),C$s.texParameteri(this._type,10241,C$X),C$s.texParameteri(this._type,10240,C$x),C$s.texParameteri(this._type,10242,C$c),C$s.texParameteri(this._type,10243,C$c),this._mipmap&&C$s.generateMipmap(this._type)):(-1!==C$X||(C$X=9729),-1!==C$x||(C$x=9729),C$s.texParameteri(this._type,10241,C$X),C$s.texParameteri(this._type,10240,C$x),C$s.texParameteri(this._type,10242,33071),C$s.texParameteri(this._type,10243,33071)),C$M&&C$T&&C$z.bindTexture(C$s,C$M,C$T),C$s.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=C$s.createRenderbuffer(),C$s.bindRenderbuffer(36161,this._depthStencilBuffer),C$s.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),C$s.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:C$s.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:C$s.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:C$s.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}C$s.framebufferTexture2D(36160,36064,3553,this._source,0),C$s.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},C$M.start=function(){C$v.mainContext.bindFramebuffer(36160,this.frameBuffer),(C$O._currentRenderTarget=this)._alreadyResolved=!1},C$M.end=function(){C$v.mainContext.bindFramebuffer(36160,null),C$O._currentRenderTarget=null,this._alreadyResolved=!0},C$M.getData=function(C$s,C$M,C$T,C$X){var C$x=C$v.mainContext;if(C$x.bindFramebuffer(36160,this._frameBuffer),!(36053===C$x.checkFramebufferStatus(36160)))return C$x.bindFramebuffer(36160,null),null;var C$c=new Uint8Array(this._width*this._height*4);return C$x.readPixels(C$s,C$M,C$T,C$X,this._surfaceFormat,this._surfaceType,C$c),C$x.bindFramebuffer(36160,null),C$c},C$M.disposeResource=function(){if(this._frameBuffer){var C$s=C$v.mainContext;C$s.deleteTexture(this._source),C$s.deleteFramebuffer(this._frameBuffer),C$s.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},C$q(0,C$M,"surfaceFormat",function(){return this._surfaceFormat}),C$q(0,C$M,"surfaceType",function(){return this._surfaceType}),C$q(0,C$M,"depthStencilFormat",function(){return this._depthStencilFormat}),C$q(0,C$M,"source",function(){return this._alreadyResolved?C$r.superGet(C$vM,this,"source"):null}),C$q(0,C$M,"depthStencilBuffer",function(){return this._depthStencilBuffer}),C$q(0,C$M,"frameBuffer",function(){return this._frameBuffer}),C$O._currentRenderTarget=null}(),function(C$s){function C$M(C$s){this._color=null,this._pixels=null,C$M.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new C$GM(this.width,this.height),this._color=C$s,this._pixels=new Uint8Array([255*C$s.x,255*C$s.y,255*C$s.z,255*C$s.w]),this.uri="SolidColorTexture2D_"+this.id}C$R(C$M,"laya.d3.resource.SolidColorTexture2D",C$vM);var C$T=C$M.prototype;return C$T._createWebGlTexture=function(){var C$s=C$v.mainContext,C$M=this._source=C$s.createTexture(),C$T=this._width,C$X=this._height,C$x=C$z.curBindTexTarget,C$c=C$z.curBindTexValue;C$z.bindTexture(C$s,this._type,C$M),C$s.texImage2D(this._type,0,6408,C$T,C$X,0,6408,5121,this._pixels);var C$l=this._minFifter,C$u=this._magFifter,C$E=this._repeat?10497:33071,C$O=C$t.isPOT(C$T,C$X);C$O?(this._mipmap?-1!==C$l||(C$l=9987):-1!==C$l||(C$l=9729),-1!==C$u||(C$u=9729),C$s.texParameteri(this._type,10241,C$l),C$s.texParameteri(this._type,10240,C$u),C$s.texParameteri(this._type,10242,C$E),C$s.texParameteri(this._type,10243,C$E),this._mipmap&&C$s.generateMipmap(this._type)):(-1!==C$l||(C$l=9729),-1!==C$u||(C$u=9729),C$s.texParameteri(this._type,10241,C$l),C$s.texParameteri(this._type,10240,C$u),C$s.texParameteri(this._type,10242,33071),C$s.texParameteri(this._type,10243,33071)),C$x&&C$c&&C$z.bindTexture(C$s,C$x,C$c),this.memorySize=C$O?C$T*C$X*4*(1+1/3):C$T*C$X*4},C$T.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},C$T.disposeResource=function(){this._source&&(C$v.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},C$p(C$M,["magentaTexture",function(){var C$s=new C$M(new C$uM(1,0,1,1));return C$s.lock=!0,this.magentaTexture=C$s},"grayTexture",function(){var C$s=new C$M(new C$uM(.5,.5,.5,1));return C$s.lock=!0,this.grayTexture=C$s}]),C$M}()),C$KM=function(C$s){function C$x(C$s,C$M,C$T,C$X){this._canRead=!1,this._image=null,this._pixels=null,void 0===C$s&&(C$s=!1),void 0===C$M&&(C$M=!0),void 0===C$T&&(C$T=6408),void 0===C$X&&(C$X=!0),C$x.__super.call(this),this._type=3553,this._repeat=C$M,this._canRead=C$s,this._format=C$T,this._mipmap=C$X}C$R(C$x,"laya.d3.resource.Texture2D",C$vM);var C$M=C$x.prototype;return C$M._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var C$s=C$v.mainContext,C$M=this._source=C$s.createTexture(),C$T=this._width,C$X=this._height,C$x=C$z.curBindTexTarget,C$c=C$z.curBindTexValue;switch(C$z.bindTexture(C$s,this._type,C$M),this._format){case 6407:case 6408:this._canRead?C$s.texImage2D(this._type,0,this._format,C$T,C$X,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?C$s.texImage2D(this._type,0,this._image._format,C$T,C$X,0,this._image._format,5121,this._image.atlasSource):C$s.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case C$v.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:C$s.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var C$l=this._minFifter,C$u=this._magFifter,C$E=this._repeat?10497:33071,C$O=0==this._wrapModeU?10497:33071,C$U=0==this._wrapModeV?10497:33071,C$p=C$t.isPOT(C$T,C$X);C$p?(this._mipmap?-1!==C$l||(C$l=9987):-1!==C$l||(C$l=9729),-1!==C$u||(C$u=9729),C$s.texParameteri(this._type,10241,C$l),C$s.texParameteri(this._type,10240,C$u),C$s.texParameteri(this._type,10242,C$E),C$s.texParameteri(this._type,10243,C$E),C$s.texParameteri(this._type,10242,C$O),C$s.texParameteri(this._type,10243,C$U),this._mipmap&&C$s.generateMipmap(this._type)):(-1!==C$l||(C$l=9729),-1!==C$u||(C$u=9729),C$s.texParameteri(this._type,10241,C$l),C$s.texParameteri(this._type,10240,C$u),C$s.texParameteri(this._type,10242,33071),C$s.texParameteri(this._type,10243,33071)),C$x&&C$c&&C$z.bindTexture(C$s,C$x,C$c),this._image.onload=null,this._image=null,this.memorySize=C$p?C$T*C$X*4*(1+1/3):C$T*C$X*4},C$M.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},C$M.onAsynLoaded=function(C$s,C$M,C$T){if(C$T){var C$X=C$T[0];void 0!==C$X&&(this._canRead=C$X);var C$x=C$T[1];void 0!==C$x&&(this._repeat=C$x);var C$c=C$T[2];void 0!==C$c&&(this._format=C$c);var C$l=C$T[3];void 0!==C$l&&(this._mipmap=C$l);var C$u=C$T.wrapModeU;void 0!==C$u&&(this._wrapModeU=C$u);var C$E=C$T.wrapModeV;void 0!==C$E&&(this._wrapModeV=C$E)}switch(this._format){case 6407:case 6408:var C$O=(this._image=C$M).width,C$U=C$M.height;this._width=C$O,this._height=C$U,this._size=new C$GM(C$O,C$U),this._canRead&&(C$G.isConchApp?C$M instanceof C$_.HTMLElement&&(this._pixels=new Uint8Array(C$M.getImageData(0,0,C$O,C$U))):(C$B.canvas.size(C$O,C$U),C$B.canvas.clear(),C$B.context.drawImage(C$M,0,0,C$O,C$U),this._pixels=new Uint8Array(C$B.context.getImageData(0,0,C$O,C$U).data.buffer)));break;case C$v.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var C$p=new C$N(C$M);C$p.readUTFBytes(4),C$p.readUTFBytes(2),C$p.getInt16();C$p.endian="bigEndian",this._width=C$p.getInt16(),this._height=C$p.getInt16(),this._size=new C$GM(this._width,this._height);C$p.getInt16(),C$p.getInt16();this._image=new Uint8Array(C$M,C$p.pos)}this.recreateResource(),this._endLoaded()},C$M.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},C$M.disposeResource=function(){this._source&&(C$v.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},C$q(0,C$M,"_src",function(){return this.url}),C$q(0,C$M,"src",function(){return this.url}),C$x.load=function(C$s){return C$r.loader.create(C$s,null,null,C$x)},C$x}(),C$ZM=function(C$M){function C$T(C$s,C$M){C$T.__super.call(this),void 0===C$s&&(C$s=.3),void 0===C$M&&(C$M=1e3),this._tempVector3=new C$lM,this._position=new C$lM,this._up=new C$lM,this._forward=new C$lM,this._right=new C$lM,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=C$GM.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=C$s,this._farPlane=C$M,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),C$r.stage.on("resize",this,this._onScreenSizeChanged)}C$R(C$T,"laya.d3.core.BaseCamera",C$M);var C$s=C$T.prototype;return C$s._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var C$s=this.scene._cameraPool,C$M=C$s.length-1,C$T=0;C$T<C$M;C$T++)if(C$s[C$T].renderingOrder>C$s[C$M].renderingOrder){var C$X=C$s[C$T];C$s[C$T]=C$s[C$M],C$s[C$M]=C$X}},C$s._calculateProjectionMatrix=function(){},C$s._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},C$s._prepareCameraToRender=function(){C$o._currentCameraCullingMask=this.cullingMask;var C$s=this._shaderValues;C$s.setValue(0,this.transform.position.elements),C$s.setValue(5,this.forward.elements),C$s.setValue(6,this.up.elements)},C$s._prepareCameraViewProject=function(C$s,C$M){var C$T=this._shaderValues;C$T.setValue(1,C$s.elements),C$T.setValue(2,C$M.elements)},C$s._renderCamera=function(C$s,C$M,C$T){},C$s.addLayer=function(C$s){29!==C$s.number&&30!=C$s.number&&(this.cullingMask=this.cullingMask|C$s.mask)},C$s.removeLayer=function(C$s){29!==C$s.number&&30!=C$s.number&&(this.cullingMask=this.cullingMask&~C$s.mask)},C$s.addAllLayers=function(){this.cullingMask=2147483647},C$s.removeAllLayers=function(){this.cullingMask=0|C$o.getLayerByNumber(29).mask|C$o.getLayerByNumber(30).mask},C$s.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},C$s.moveForward=function(C$s){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=C$s,this.transform.translate(this._tempVector3)},C$s.moveRight=function(C$s){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=C$s,this.transform.translate(this._tempVector3)},C$s.moveVertical=function(C$s){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=C$s,this.transform.translate(this._tempVector3,!1)},C$s._addSelfRenderObjects=function(){var C$s=this.scene._cameraPool,C$M=C$s.length;if(0<C$M){for(var C$T=C$M-1;0<=C$T;C$T--)if(this.renderingOrder<=C$s[C$T].renderingOrder){C$s.splice(C$T+1,0,this);break}}else C$s.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},C$s._clearSelfRenderObjects=function(){var C$s=this.scene._cameraPool;C$s.splice(C$s.indexOf(this),1)},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,C$r.stage.off("resize",this,this._onScreenSizeChanged),C$M.prototype.destroy.call(this,C$s)},C$q(0,C$s,"sky",function(){return this._sky},function(C$s){(this._sky=C$s)._ownerCamera=this}),C$q(0,C$s,"forward",function(){var C$s=this.transform.worldMatrix.elements,C$M=this._forward.elements;return C$M[0]=-C$s[8],C$M[1]=-C$s[9],C$M[2]=-C$s[10],this._forward}),C$q(0,C$s,"position",function(){var C$s=this.transform.worldMatrix.elements,C$M=this._position.elements;return C$M[0]=C$s[12],C$M[1]=C$s[13],C$M[2]=C$s[14],this._position}),C$q(0,C$s,"renderTarget",function(){return this._renderTarget},function(C$s){null!=(this._renderTarget=C$s)&&(this._renderTargetSize=C$s.size)}),C$q(0,C$s,"up",function(){var C$s=this.transform.worldMatrix.elements,C$M=this._up.elements;return C$M[0]=C$s[4],C$M[1]=C$s[5],C$M[2]=C$s[6],this._up}),C$q(0,C$s,"right",function(){var C$s=this.transform.worldMatrix.elements,C$M=this._right.elements;return C$M[0]=C$s[0],C$M[1]=C$s[1],C$M[2]=C$s[2],this._right}),C$q(0,C$s,"renderTargetSize",function(){return this._renderTargetSize},function(C$s){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"fieldOfView",function(){return this._fieldOfView},function(C$s){this._fieldOfView=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"nearPlane",function(){return this._nearPlane},function(C$s){this._nearPlane=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"farPlane",function(){return this._farPlane},function(C$s){this._farPlane=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"orthographic",function(){return this._orthographic},function(C$s){this._orthographic=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(C$s){this._orthographicVerticalSize=C$s,this._calculateProjectionMatrix()}),C$q(0,C$s,"renderingOrder",function(){return this._renderingOrder},function(C$s){this._renderingOrder=C$s,this._sortCamerasByRenderingOrder()}),C$T.CAMERAPOS=0,C$T.VIEWMATRIX=1,C$T.PROJECTMATRIX=2,C$T.VPMATRIX=3,C$T.VPMATRIX_NO_TRANSLATE=4,C$T.CAMERADIRECTION=5,C$T.CAMERAUP=6,C$T.ENVIRONMENTDIFFUSE=7,C$T.ENVIRONMENTSPECULAR=8,C$T.SIMLODINFO=9,C$T.DIFFUSEIRRADMATR=10,C$T.DIFFUSEIRRADMATG=11,C$T.DIFFUSEIRRADMATB=12,C$T.HDREXPOSURE=13,C$T.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",C$T.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",C$T.CLEARFLAG_SOLIDCOLOR=0,C$T.CLEARFLAG_SKY=1,C$T.CLEARFLAG_DEPTHONLY=2,C$T.CLEARFLAG_NONE=3,C$p(C$T,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new C$sM(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new C$sM},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new C$sM}]),C$T}(C$mM),C$nM=function(C$T){function C$M(C$s){this._render=null,this._geometryFilter=null,C$M.__super.call(this,C$s)}C$R(C$M,"laya.d3.core.RenderableSprite3D",C$T);var C$s=C$M.prototype;return C$s._addToInitStaticBatchManager=function(){},C$s._setBelongScene=function(C$s){C$T.prototype._setBelongScene.call(this,C$s),C$s._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},C$s._setUnBelongScene=function(){var C$s=this._scene._renderableSprite3Ds,C$M=C$s.indexOf(this);C$s.splice(C$M,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),C$T.prototype._setUnBelongScene.call(this)},C$s._update=function(C$s){(C$s.owner=this)._activeInHierarchy&&(this._updateComponents(C$s),this._render._updateOctreeNode(),this._lateUpdateComponents(C$s),C$k.spriteCount++,this._childs.length&&this._updateChilds(C$s))},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$T.prototype.destroy.call(this,C$s),this._render._destroy(),this._render=null},C$M.__init__=function(){C$M.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=C$M.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),C$M.SAHDERDEFINE_LIGHTMAP=C$M.shaderDefines.registerDefine("LIGHTMAP")},C$M.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,C$M.SAHDERDEFINE_LIGHTMAP=4,C$M.LIGHTMAPSCALEOFFSET=2,C$M.LIGHTMAP=3,C$p(C$M,["shaderDefines",function(){return this.shaderDefines=new C$UM}]),C$M}(C$mM),C$$M=(function(C$s){function C$X(C$s,C$M,C$T){this._long=NaN,this._width=NaN,this._height=NaN,void 0===C$s&&(C$s=1),void 0===C$M&&(C$M=1),void 0===C$T&&(C$T=1),C$X.__super.call(this),this._long=C$s,this._width=C$M,this._height=C$T,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}C$R(C$X,"laya.d3.resource.models.BoxMesh",C$bM);var C$M=C$X.prototype;C$M.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var C$s=C$vs.vertexDeclaration,C$M=(C$s.vertexStride,this._long/2),C$T=this._height/2,C$X=this._width/2,C$x=new Float32Array([-C$M,C$T,-C$X,0,1,0,0,0,C$M,C$T,-C$X,0,1,0,1,0,C$M,C$T,C$X,0,1,0,1,1,-C$M,C$T,C$X,0,1,0,0,1,-C$M,-C$T,-C$X,0,-1,0,0,1,C$M,-C$T,-C$X,0,-1,0,1,1,C$M,-C$T,C$X,0,-1,0,1,0,-C$M,-C$T,C$X,0,-1,0,0,0,-C$M,C$T,-C$X,-1,0,0,0,0,-C$M,C$T,C$X,-1,0,0,1,0,-C$M,-C$T,C$X,-1,0,0,1,1,-C$M,-C$T,-C$X,-1,0,0,0,1,C$M,C$T,-C$X,1,0,0,1,0,C$M,C$T,C$X,1,0,0,0,0,C$M,-C$T,C$X,1,0,0,0,1,C$M,-C$T,-C$X,1,0,0,1,1,-C$M,C$T,C$X,0,0,1,0,0,C$M,C$T,C$X,0,0,1,1,0,C$M,-C$T,C$X,0,0,1,1,1,-C$M,-C$T,C$X,0,0,1,0,1,-C$M,C$T,-C$X,0,0,-1,1,0,C$M,C$T,-C$X,0,0,-1,0,0,C$M,-C$T,-C$X,0,0,-1,0,1,-C$M,-C$T,-C$X,0,0,-1,1,1]),C$c=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new C$eM(C$s,this._numberVertices,35044,!0),this._indexBuffer=new C$yM("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(C$x),this._indexBuffer.setData(C$c),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},C$q(0,C$M,"long",function(){return this._long},function(C$s){this._long!==C$s&&(this._long=C$s,this.releaseResource(),this.activeResource())}),C$q(0,C$M,"width",function(){return this._width},function(C$s){this._width!==C$s&&(this._width=C$s,this.releaseResource(),this.activeResource())}),C$q(0,C$M,"height",function(){return this._height},function(C$s){this._height!==C$s&&(this._height=C$s,this.releaseResource(),this.activeResource())})}(),function(C$s){function C$l(C$s,C$M,C$T){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=.3),void 0===C$T&&(C$T=1e3),this._viewMatrix=new C$sM,this._projectionMatrix=new C$sM,this._projectionViewMatrix=new C$sM,this._viewport=new C$EM(0,0,0,0),this._normalizedViewport=new C$EM(0,0,1,1),this._aspectRatio=C$s,this._boundFrustumUpdate=!0,this._boundFrustum=new C$js(C$sM.DEFAULT),C$l.__super.call(this,C$M,C$T),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}C$R(C$l,"laya.d3.core.Camera",C$ZM);var C$M=C$l.prototype;return C$M._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},C$M._parseCustomProps=function(C$s,C$M,C$T,C$X){var C$x=C$T.clearColor;this.clearColor=new C$uM(C$x[0],C$x[1],C$x[2],C$x[3]);var C$c=C$T.viewport;this.normalizedViewport=new C$EM(C$c[0],C$c[1],C$c[2],C$c[3])},C$M._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var C$s=this.orthographicVerticalSize*this.aspectRatio*.5,C$M=.5*this.orthographicVerticalSize;C$sM.createOrthoOffCenterRH(-C$s,C$s,-C$M,C$M,this.nearPlane,this.farPlane,this._projectionMatrix)}else C$sM.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},C$M._update=function(C$s){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,C$s)},C$M._renderCamera=function(C$s,C$M,C$T){var C$X,C$x;C$T.parallelSplitShadowMaps[0]&&C$T._renderShadowMap(C$s,C$M,this),(C$M.camera=this)._prepareCameraToRender(),C$T._preRenderUpdateComponents(C$M),C$X=C$M._viewMatrix=this.viewMatrix;var C$c=this._renderTarget;C$c?(C$c.start(),C$sM.multiply(C$ZM._invertYScaleMatrix,this._projectionMatrix,C$ZM._invertYProjectionMatrix),C$sM.multiply(C$ZM._invertYScaleMatrix,this.projectionViewMatrix,C$ZM._invertYProjectionViewMatrix),C$x=C$M._projectionMatrix=C$ZM._invertYProjectionMatrix,C$M._projectionViewMatrix=C$ZM._invertYProjectionViewMatrix):(C$x=C$M._projectionMatrix=this._projectionMatrix,C$M._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(C$X,C$x),C$M._viewport=this.viewport,C$T._preRenderScene(C$s,C$M,this.boundFrustum),C$T._clear(C$s,C$M),C$T._renderScene(C$s,C$M),C$T._postRenderUpdateComponents(C$M),C$c&&C$c.end()},C$M.viewportPointToRay=function(C$s,C$M){C$qM.calculateCursorRay(C$s,this.viewport,this._projectionMatrix,this.viewMatrix,null,C$M)},C$M.normalizedViewportPointToRay=function(C$s,C$M){var C$T=C$l._tempVector20,C$X=this.viewport,C$x=C$s.elements,C$c=C$T.elements;C$c[0]=C$x[0]*C$X.width,C$c[1]=C$x[1]*C$X.height,C$qM.calculateCursorRay(C$T,this.viewport,this._projectionMatrix,this.viewMatrix,null,C$M)},C$M.worldToViewportPoint=function(C$s,C$M){C$sM.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(C$s,this._projectionViewMatrix,C$M);var C$T=C$M.elements;C$T[0]=C$T[0]/C$r.stage.clientScaleX,C$T[1]=C$T[1]/C$r.stage.clientScaleY},C$M.worldToNormalizedViewportPoint=function(C$s,C$M){C$sM.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(C$s,this._projectionViewMatrix,C$M);var C$T=C$M.elements;C$T[0]=C$T[0]/C$r.stage.clientScaleX,C$T[1]=C$T[1]/C$r.stage.clientScaleY},C$M.convertScreenCoordToOrthographicCoord=function(C$s,C$M){if(this._orthographic){var C$T=C$W.clientWidth,C$X=C$W.clientHeight,C$x=this.orthographicVerticalSize*this.aspectRatio/C$T,C$c=this.orthographicVerticalSize/C$X,C$l=C$s.elements,C$u=C$M.elements;return C$u[0]=(-C$T/2+C$l[0])*C$x,C$u[1]=(C$X/2-C$l[1])*C$c,C$u[2]=(this.nearPlane-this.farPlane)*(C$l[2]+1)/2-this.nearPlane,C$lM.transformCoordinate(C$M,this.transform.worldMatrix,C$M),!0}return!1},C$q(0,C$M,"projectionViewMatrix",function(){return C$sM.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),C$q(0,C$M,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var C$s=this.viewport;return C$s.width/C$s.height},function(C$s){if(C$s<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=C$s,this._calculateProjectionMatrix()}),C$q(0,C$M,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),C$q(0,C$M,"needViewport",function(){var C$s=this.normalizedViewport;return 0===C$s.x&&0===C$s.y&&1===C$s.width&&1===C$s.height}),C$q(0,C$M,"viewport",function(){if(this._viewportExpressedInClipSpace){var C$s=this._normalizedViewport,C$M=this.renderTargetSize,C$T=C$M.width,C$X=C$M.height;this._viewport.x=C$s.x*C$T,this._viewport.y=C$s.y*C$X,this._viewport.width=C$s.width*C$T,this._viewport.height=C$s.height*C$X}return this._viewport},function(C$s){if(null!=this.renderTarget&&(C$s.x<0||C$s.y<0||0==C$s.width||0==C$s.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=C$s,this._calculateProjectionMatrix()}),C$q(0,C$M,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var C$s=this._viewport,C$M=this.renderTargetSize,C$T=C$M.width,C$X=C$M.height;this._normalizedViewport.x=C$s.x/C$T,this._normalizedViewport.y=C$s.y/C$X,this._normalizedViewport.width=C$s.width/C$T,this._normalizedViewport.height=C$s.height/C$X}return this._normalizedViewport},function(C$s){C$s.x<0&&(C$s.x=0,console.warn("Camera: viewport.x must large than 0.0.")),C$s.y<0&&(C$s.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<C$s.x+C$s.width&&(C$s.width=1-C$s.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<C$s.y+C$s.height&&(C$s.height=1-C$s.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=C$s,this._calculateProjectionMatrix()}),C$q(0,C$M,"projectionMatrix",function(){return this._projectionMatrix},function(C$s){this._projectionMatrix=C$s,this._useUserProjectionMatrix=!0}),C$q(0,C$M,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),C$p(C$l,["_tempVector20",function(){return this._tempVector20=new C$cM}]),C$l}()),C$FM=function(C$T){function C$X(C$s,C$M){C$X.__super.call(this,C$M),this._geometryFilter=new C$BM(this),this._render=new C$oM(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),C$s&&(this._geometryFilter.sharedMesh=C$s)instanceof laya.d3.resource.models.Mesh&&(C$s.loaded?this._render.sharedMaterials=C$s.materials:C$s.once("loaded",this,this._applyMeshMaterials))}C$R(C$X,"laya.d3.core.MeshSprite3D",C$T);var C$s=C$X.prototype;return C$s._changeRenderObjectByMesh=function(C$s){var C$M=this._render._renderElements,C$T=C$M[C$s];C$T||(C$T=C$M[C$s]=new C$wM),C$T._render=this._render;var C$X=this._render.sharedMaterials[C$s];C$X||(C$X=C$IM.defaultMaterial);var C$x=this._geometryFilter.sharedMesh.getRenderElement(C$s);return C$T._mainSortID=this._getSortID(C$x,C$X),C$T._sprite3D=this,C$T.renderObj=C$x,C$T._material=C$X,C$T},C$s._changeRenderObjectByMaterial=function(C$s,C$M){var C$T=this._render._renderElements[C$s];C$M||(C$M=C$IM.defaultMaterial);var C$X=this._geometryFilter.sharedMesh.getRenderElement(C$s);return C$T._mainSortID=this._getSortID(C$X,C$M),C$T._sprite3D=this,C$T.renderObj=C$X,C$T._material=C$M,C$T},C$s._changeRenderObjectsByMesh=function(){var C$s=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=C$s;for(var C$M=0;C$M<C$s;C$M++)this._changeRenderObjectByMesh(C$M)},C$s._onMeshChanged=function(C$s){var C$M=C$s.sharedMesh;C$M.loaded?this._changeRenderObjectsByMesh():C$M.once("loaded",this,this._onMeshLoaded)},C$s._onMeshLoaded=function(C$s){C$s===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},C$s._onMaterialChanged=function(C$s,C$M,C$T){C$M<this._render._renderElements.length&&this._changeRenderObjectByMaterial(C$M,C$T)},C$s._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},C$s._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},C$s._parseCustomProps=function(C$s,C$M,C$T,C$X){var C$x=this.meshRender,C$c=C$T.lightmapIndex;null!=C$c&&(C$x.lightmapIndex=C$c);var C$l,C$u,C$E=C$T.lightmapScaleOffset;if(C$E&&(C$x.lightmapScaleOffset=new C$uM(C$E[0],C$E[1],C$E[2],C$E[3])),C$X.instanceParams)(C$l=C$X.instanceParams.loadPath)&&(C$u=C$f.getRes(C$M[C$l]),(this.meshFilter.sharedMesh=C$u).loaded?C$x.sharedMaterials=C$u.materials:C$u.once("loaded",this,this._applyMeshMaterials));else{(C$l=C$T.meshPath)&&(C$u=C$f.getRes(C$M[C$l]),this.meshFilter.sharedMesh=C$u);var C$O=C$T.materials;if(C$O){var C$U=C$x.sharedMaterials,C$p=C$O.length;C$U.length=C$p;for(var C$_=0;C$_<C$p;C$_++)C$U[C$_]=C$f.getRes(C$M[C$O[C$_].path]);C$x.sharedMaterials=C$U}}},C$s._applyMeshMaterials=function(C$s){for(var C$M=this._render.sharedMaterials,C$T=C$s.materials,C$X=0,C$x=C$T.length;C$X<C$x;C$X++)C$M[C$X]||(C$M[C$X]=C$T[C$X]);this._render.sharedMaterials=C$M},C$s._addToInitStaticBatchManager=function(){C$X._staticBatchManager._addInitBatchSprite(this)},C$s.cloneTo=function(C$s){var C$M=C$s;C$M._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var C$T=this._render,C$X=C$M._render;C$X.enable=C$T.enable,C$X.sharedMaterials=C$T.sharedMaterials,C$X.castShadow=C$T.castShadow;var C$x=C$T.lightmapScaleOffset;C$x&&(C$X.lightmapScaleOffset=C$x.clone()),C$X.lightmapIndex=C$T.lightmapIndex,C$X.receiveShadow=C$T.receiveShadow,C$X.sortingFudge=C$T.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,C$s)},C$s.destroy=function(C$s){if(void 0===C$s&&(C$s=!0),!this.destroyed){var C$M=this.meshFilter.sharedMesh;null!=C$M&&(C$M.loaded||C$M.off("loaded",this,this._applyMeshMaterials)),C$T.prototype.destroy.call(this,C$s),this._geometryFilter._destroy()}},C$q(0,C$s,"meshFilter",function(){return this._geometryFilter}),C$q(0,C$s,"meshRender",function(){return this._render}),C$X.__init__=function(){C$Xs._staticBatchManagers.push(C$X._staticBatchManager)},C$X.load=function(C$s){return C$r.loader.create(C$s,null,null,C$X)},C$p(C$X,["_staticBatchManager",function(){return this._staticBatchManager=new C$AM}]),C$X}(C$nM)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}}),function(C$s,C$M,C$xs){C$xs.un,C$xs.uns;var C$T=C$xs.static,C$X=C$xs.class,C$c=C$xs.getset,C$G=C$xs.__newvec,C$u=laya.maths.Bezier,C$p=laya.utils.Browser,C$vs=laya.utils.Byte,C$x=(laya.events.Event,laya.events.EventDispatcher),C$l=laya.display.Graphics,C$E=(laya.resource.HTMLCanvas,laya.utils.Handler),C$O=laya.net.Loader,C$_=laya.maths.MathUtil,C$zs=laya.maths.Matrix,C$g=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),C$U=(laya.renders.RenderContext,laya.resource.Resource),C$R=laya.utils.RunDriver,C$cs=laya.display.Sprite,C$q=laya.utils.Stat,C$Bs=laya.resource.Texture,C$f=(laya.net.URL,laya.utils.Utils),C$z=function(){function C$s(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return C$X(C$s,"laya.ani.AnimationContent"),C$s}(),C$B=function(){function C$s(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return C$X(C$s,"laya.ani.AnimationNodeContent"),C$s}(),C$P=function(){function C$s(){}return C$X(C$s,"laya.ani.AnimationParser01"),C$s.parse=function(C$s,C$M){var C$T=C$M.__getBuffer(),C$X=0,C$x=0,C$c=0,C$l=0,C$u=0,C$E=0,C$O=0,C$U=C$M.readUTFString();C$s._aniClassName=C$U;var C$p,C$_=C$M.readUTFString().split("\n"),C$R=C$M.getUint8(),C$q=C$M.getUint32(),C$G=C$M.getUint32();0<C$q&&(C$p=C$T.slice(C$q,C$G));var C$g=new C$vs(C$p);for(0<C$G&&(C$s._publicExtData=C$T.slice(C$G,C$T.byteLength)),C$s._useParent=!!C$M.getUint8(),C$s._anis.length=C$R,C$X=0;C$X<C$R;C$X++){var C$f=C$s._anis[C$X]=new C$z;C$f.nodes=new Array;var C$J=C$f.name=C$_[C$M.getUint16()];C$s._aniMap[C$J]=C$X,C$f.bone3DMap={},C$f.playTime=C$M.getFloat32(),C$f.playTime<=0&&console.error("播放时间不能为0  url="+C$s.url+" name="+C$f.name);var C$P=C$f.nodes.length=C$M.getUint8();for(C$x=C$f.totalKeyframeDatasLength=0;C$x<C$P;C$x++){var C$t=C$f.nodes[C$x]=new C$B;C$t.childs=[];var C$r=C$M.getInt16();0<=C$r&&(C$t.name=C$_[C$r],C$f.bone3DMap[C$t.name]=C$x),C$t.keyFrame=new Array,C$t.parentIndex=C$M.getInt16(),-1==C$t.parentIndex?C$t.parent=null:C$t.parent=C$f.nodes[C$t.parentIndex],C$t.lerpType=C$M.getUint8();var C$N=C$M.getUint32();C$g.pos=C$N;var C$w=C$t.keyframeWidth=C$g.getUint16();if(C$f.totalKeyframeDatasLength+=C$w,0===C$t.lerpType||1===C$t.lerpType)for(C$t.interpolationMethod=[],C$t.interpolationMethod.length=C$w,C$c=0;C$c<C$w;C$c++)C$t.interpolationMethod[C$c]=C$m.interpolation[C$g.getUint8()];null!=C$t.parent&&C$t.parent.childs.push(C$t);var C$k=C$M.getUint16();0<C$k&&(C$t.extenData=C$T.slice(C$M.pos,C$M.pos+C$k),C$M.pos+=C$k);var C$A,C$D=C$M.getUint16(),C$h=0;for(C$c=0,C$l=C$t.keyFrame.length=C$D;C$c<C$l;C$c++){if((C$A=C$t.keyFrame[C$c]=new C$o).duration=C$M.getFloat32(),C$A.startTime=C$h,2===C$t.lerpType){C$A.interpolationData=[];var C$Q,C$v=C$M.getUint8();switch(C$Q=C$M.getFloat32()){case 254:for(C$A.interpolationData.length=C$w,C$O=0;C$O<C$w;C$O++)C$A.interpolationData[C$O]=0;break;case 255:for(C$A.interpolationData.length=C$w,C$O=0;C$O<C$w;C$O++)C$A.interpolationData[C$O]=5;break;default:for(C$A.interpolationData.push(C$Q),C$E=1;C$E<C$v;C$E++)C$A.interpolationData.push(C$M.getFloat32())}}for(C$A.data=new Float32Array(C$w),C$u=0;C$u<C$w;C$u++)C$A.data[C$u]=C$M.getFloat32(),-1e-8<C$A.data[C$u]&&C$A.data[C$u]<1e-8&&(C$A.data[C$u]=0);C$h+=C$A.duration}C$A.startTime=C$f.playTime,C$t.playTime=C$f.playTime,C$s._calculateKeyFrame(C$t,C$D,C$w)}}},C$s}(),C$t=function(){function C$r(){}return C$X(C$r,"laya.ani.AnimationParser02"),C$r.READ_DATA=function(){C$r._DATA.offset=C$r._reader.getUint32(),C$r._DATA.size=C$r._reader.getUint32()},C$r.READ_BLOCK=function(){for(var C$s=C$r._BLOCK.count=C$r._reader.getUint16(),C$M=C$r._BLOCK.blockStarts=[],C$T=C$r._BLOCK.blockLengths=[],C$X=0;C$X<C$s;C$X++)C$M.push(C$r._reader.getUint32()),C$T.push(C$r._reader.getUint32())},C$r.READ_STRINGS=function(){var C$s=C$r._reader.getUint32(),C$M=C$r._reader.getUint16(),C$T=C$r._reader.pos;C$r._reader.pos=C$s+C$r._DATA.offset;for(var C$X=0;C$X<C$M;C$X++)C$r._strings[C$X]=C$r._reader.readUTFString();C$r._reader.pos=C$T},C$r.parse=function(C$s,C$M){C$r._templet=C$s;(C$r._reader=C$M).__getBuffer();C$r.READ_DATA(),C$r.READ_BLOCK(),C$r.READ_STRINGS();for(var C$T=0,C$X=C$r._BLOCK.count;C$T<C$X;C$T++){var C$x=C$M.getUint16(),C$c=C$r._strings[C$x],C$l=C$r["READ_"+C$c];if(null==C$l)throw new Error("model file err,no this function:"+C$x+" "+C$c);C$l.call()}},C$r.READ_ANIMATIONS=function(){var C$s=C$r._reader,C$M=C$s.__getBuffer(),C$T=0,C$X=0,C$x=0,C$c=0,C$l=C$s.getUint16(),C$u=[];for(C$u.length=C$l,C$T=0;C$T<C$l;C$T++)C$u[C$T]=C$m.interpolation[C$s.getByte()];var C$E=C$s.getUint8();for(C$r._templet._anis.length=C$E,C$T=0;C$T<C$E;C$T++){var C$O=C$r._templet._anis[C$T]={};C$O.nodes=new Array;var C$U=C$O.name=C$r._strings[C$s.getUint16()];C$r._templet._aniMap[C$U]=C$T,C$O.bone3DMap={},C$O.playTime=C$s.getFloat32();var C$p=C$O.nodes.length=C$s.getInt16();for(C$X=C$O.totalKeyframeDatasLength=0;C$X<C$p;C$X++){var C$_=C$O.nodes[C$X]={};C$_.keyframeWidth=C$l,C$_.childs=[];var C$R=C$s.getUint16();0<=C$R&&(C$_.name=C$r._strings[C$R],C$O.bone3DMap[C$_.name]=C$X),C$_.keyFrame=new Array,C$_.parentIndex=C$s.getInt16(),-1==C$_.parentIndex?C$_.parent=null:C$_.parent=C$O.nodes[C$_.parentIndex],C$O.totalKeyframeDatasLength+=C$l,C$_.interpolationMethod=C$u,null!=C$_.parent&&C$_.parent.childs.push(C$_);var C$q=C$s.getUint16(),C$G=null,C$g=null;for(C$x=0,C$c=C$_.keyFrame.length=C$q;C$x<C$c;C$x++){(C$G=C$_.keyFrame[C$x]={}).startTime=C$s.getFloat32(),C$g&&(C$g.duration=C$G.startTime-C$g.startTime);var C$f=C$r._DATA.offset,C$J=C$s.getUint32(),C$P=4*C$l,C$t=C$M.slice(C$f+C$J,C$f+C$J+C$P);C$G.data=new Float32Array(C$t),C$g=C$G}C$G.duration=0,C$_.playTime=C$O.playTime,C$r._templet._calculateKeyFrame(C$_,C$q,C$l)}}},C$r._templet=null,C$r._reader=null,C$r._strings=[],C$T(C$r,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),C$r}(),C$os=(function(){function C$s(){}C$X(C$s,"laya.ani.AnimationState"),C$s.stopped=0,C$s.paused=1,C$s.playing=2}(),function(){function C$x(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new C$ns,this.resultMatrix=new C$zs,this._children=[]}C$X(C$x,"laya.ani.bone.Bone");var C$s=C$x.prototype;return C$s.setTempMatrix=function(C$s){this._tempMatrix=C$s;var C$M,C$T=0;for(C$T=0,C$M=this._children.length;C$T<C$M;C$T++)this._children[C$T].setTempMatrix(this._tempMatrix)},C$s.update=function(C$s){var C$M;if(this.rotation=this.transform.skX,C$s)C$M=this.resultTransform.getMatrix(),C$zs.mul(C$M,C$s,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)C$M=this.resultTransform.getMatrix(),C$zs.mul(C$M,this.parentBone.resultMatrix,this.resultMatrix);else{var C$T=this.parentBone,C$X=NaN,C$x=NaN,C$c=NaN,C$l=this.parentBone.resultMatrix;C$M=this.resultTransform.getMatrix();var C$u=C$l.a*C$M.tx+C$l.c*C$M.ty+C$l.tx,C$E=C$l.b*C$M.tx+C$l.d*C$M.ty+C$l.ty,C$O=new C$zs;this.inheritRotation?(C$X=Math.atan2(C$T.resultMatrix.b,C$T.resultMatrix.a),C$x=Math.cos(C$X),C$c=Math.sin(C$X),C$O.setTo(C$x,C$c,-C$c,C$x,0,0),C$zs.mul(this._tempMatrix,C$O,C$zs.TEMP),C$zs.TEMP.copyTo(C$O),C$M=this.resultTransform.getMatrix(),C$zs.mul(C$M,C$O,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,C$M=this.resultTransform.getMatrix(),C$zs.TEMP.identity(),C$zs.TEMP.d=this.d,C$zs.mul(C$M,C$zs.TEMP,this.resultMatrix)),this.resultMatrix.tx=C$u,this.resultMatrix.ty=C$E}else(C$M=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var C$U,C$p=0;for(C$p=0,C$U=this._children.length;C$p<C$U;C$p++)this._children[C$p].update()},C$s.updateChild=function(){var C$s,C$M=0;for(C$M=0,C$s=this._children.length;C$M<C$s;C$M++)this._children[C$M].update()},C$s.setRotation=function(C$s){this._sprite&&(this._sprite.rotation=180*C$s/Math.PI)},C$s.updateDraw=function(C$s,C$M){C$x.ShowBones&&!C$x.ShowBones[this.name]||(this._sprite||(this._sprite=new C$cs,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),C$xs.stage.addChild(this._sprite)),this._sprite.x=C$s+this.resultMatrix.tx,this._sprite.y=C$M+this.resultMatrix.ty);var C$T,C$X=0;for(C$X=0,C$T=this._children.length;C$X<C$T;C$X++)this._children[C$X].updateDraw(C$s,C$M)},C$s.addChild=function(C$s){this._children.push(C$s),C$s.parentBone=this},C$s.findBone=function(C$s){if(this.name==C$s)return this;var C$M,C$T,C$X=0;for(C$X=0,C$M=this._children.length;C$X<C$M;C$X++)if(C$T=this._children[C$X].findBone(C$s))return C$T;return null},C$s.localToWorld=function(C$s){var C$M=C$s[0],C$T=C$s[1];C$s[0]=C$M*this.resultMatrix.a+C$T*this.resultMatrix.c+this.resultMatrix.tx,C$s[1]=C$M*this.resultMatrix.b+C$T*this.resultMatrix.d+this.resultMatrix.ty},C$x.ShowBones={},C$x}()),C$Cs=function(){function C$G(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}C$X(C$G,"laya.ani.bone.BoneSlot");var C$s=C$G.prototype;return C$s.showSlotData=function(C$s,C$M){void 0===C$M&&(C$M=!0),this.currSlotData=C$s,C$M&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},C$s.showDisplayByName=function(C$s){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(C$s))},C$s.replaceDisplayByName=function(C$s,C$M){if(this.currSlotData){var C$T;C$T=this.currSlotData.getDisplayByName(C$s);var C$X;C$X=this.currSlotData.getDisplayByName(C$M),this.replaceDisplayByIndex(C$T,C$X)}},C$s.replaceDisplayByIndex=function(C$s,C$M){this.currSlotData&&(this._replaceDic[C$s]=C$M,this.displayIndex==C$s&&this.showDisplayByIndex(C$s))},C$s.showDisplayByIndex=function(C$s){if(null!=this._replaceDic[C$s]&&(C$s=this._replaceDic[C$s]),this.currSlotData&&-1<C$s&&C$s<this.currSlotData.displayArr.length){if(this.displayIndex=C$s,this.currDisplayData=this.currSlotData.displayArr[C$s],this.currDisplayData){var C$M=this.currDisplayData.name;this.currTexture=this.templet.getTexture(C$M),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!C$g.isConchApp||C$g.isConchApp&&"0.9.15"<C$cs.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},C$s.replaceSkin=function(C$s){this._diyTexture=C$s,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},C$s.setParentMatrix=function(C$s){this._parentMatrix=C$s},C$s.draw=function(C$s,C$M,C$T,C$X){if(void 0===C$T&&(C$T=!1),void 0===C$X&&(C$X=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var C$x,C$c=this.currTexture;switch(this._diyTexture&&(C$c=this._diyTexture),this.currDisplayData.type){case 0:if(C$s){var C$l=this.getDisplayMatrix();if(this._parentMatrix){var C$u=!1;if(C$l){var C$E;if(C$zs.mul(C$l,this._parentMatrix,C$zs.TEMP),C$E=C$T?(null==this._resultMatrix&&(this._resultMatrix=new C$zs),this._resultMatrix):new C$zs,!C$g.isWebGL&&this.currDisplayData.uvs||C$g.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var C$O=C$G._tempMatrix;C$O.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(C$O.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(C$u=!0,C$O.rotate(-Math.PI/2)),C$zs.mul(C$O,C$zs.TEMP,C$E)}else C$zs.TEMP.copyTo(C$E);C$u?C$s.drawTexture(C$c,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,C$E):C$s.drawTexture(C$c,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,C$E)}}}break;case 1:if(null==(C$x=C$T?(null==this._skinSprite&&(this._skinSprite=C$G.createSkinMesh()),this._skinSprite):C$G.createSkinMesh()))return;var C$U;if(null==this.currDisplayData.bones){var C$p,C$_=this.currDisplayData.weights;this.deformData&&(C$_=this.deformData),C$p=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=C$w.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=C$w.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=C$_;this.currDisplayData.triangles.length;C$U=this.currDisplayData.triangles,C$x.init2(C$c,null,C$U,this._mVerticleArr,C$p);var C$R,C$q=this.getDisplayMatrix();if(this._parentMatrix)if(C$q)C$zs.mul(C$q,this._parentMatrix,C$zs.TEMP),C$R=C$T?(null==this._resultMatrix&&(this._resultMatrix=new C$zs),this._resultMatrix):new C$zs,C$zs.TEMP.copyTo(C$R),C$x.transform=C$R}else this.skinMesh(C$M,C$x,C$X);C$s.drawSkin(C$x);break;case 2:if(null==(C$x=C$T?(null==this._skinSprite&&(this._skinSprite=C$G.createSkinMesh()),this._skinSprite):C$G.createSkinMesh()))return;this.skinMesh(C$M,C$x,C$X),C$s.drawSkin(C$x)}}},C$s.skinMesh=function(C$s,C$M,C$T){var C$X,C$x=this.currTexture,C$c=this.currDisplayData.bones;C$X=this._diyTexture?(C$x=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=C$w.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=C$w.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var C$l,C$u,C$E=this.currDisplayData.weights,C$O=this.currDisplayData.triangles,C$U=0,C$p=0,C$_=0,C$R=NaN,C$q=NaN,C$G=0,C$g=0,C$f=[],C$J=0,C$P=0;if(this.deformData&&0<this.deformData.length){var C$t=0;for(C$J=0,C$P=C$c.length;C$J<C$P;){for(C$_=C$c[C$J++]+C$J,C$p=C$U=0;C$J<C$_;C$J++)C$u=C$s[C$c[C$J]],C$R=C$E[C$G]+this.deformData[C$t++],C$q=C$E[C$G+1]+this.deformData[C$t++],C$g=C$E[C$G+2],C$U+=(C$R*C$u.a+C$q*C$u.c+C$u.tx)*C$g,C$p+=(C$R*C$u.b+C$q*C$u.d+C$u.ty)*C$g,C$G+=3;C$f.push(C$U,C$p)}}else for(C$J=0,C$P=C$c.length;C$J<C$P;){for(C$_=C$c[C$J++]+C$J,C$p=C$U=0;C$J<C$_;C$J++)C$u=C$s[C$c[C$J]],C$R=C$E[C$G],C$q=C$E[C$G+1],C$g=C$E[C$G+2],C$U+=(C$R*C$u.a+C$q*C$u.c+C$u.tx)*C$g,C$p+=(C$R*C$u.b+C$q*C$u.d+C$u.ty)*C$g,C$G+=3;C$f.push(C$U,C$p)}this._mVerticleArr=C$f,C$l=C$O,C$M.init2(C$x,null,C$l,this._mVerticleArr,C$X)},C$s.drawBonePoint=function(C$s){C$s&&this._parentMatrix&&C$s.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},C$s.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},C$s.getMatrix=function(){return this._resultMatrix},C$s.copy=function(){var C$s=new C$G;return C$s.type="copy",C$s.name=this.name,C$s.attachmentName=this.attachmentName,C$s.srcDisplayIndex=this.srcDisplayIndex,C$s.parent=this.parent,C$s.displayIndex=this.displayIndex,C$s.templet=this.templet,C$s.currSlotData=this.currSlotData,C$s.currTexture=this.currTexture,C$s.currDisplayData=this.currDisplayData,C$s},C$G.createSkinMesh=function(){return C$g.isWebGL||C$g.isConchApp?C$R.skinAniSprite():(C$g.isWebGL,null)},C$T(C$G,["_tempMatrix",function(){return this._tempMatrix=new C$zs}]),C$G}(),C$ms=function(){function C$s(){this.skinName=null,this.deformSlotDataList=[]}return C$X(C$s,"laya.ani.bone.DeformAniData"),C$s}(),C$Ys=function(){function C$s(){this.deformSlotDisplayList=[]}return C$X(C$s,"laya.ani.bone.DeformSlotData"),C$s}(),C$Is=function(){function C$s(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}C$X(C$s,"laya.ani.bone.DeformSlotDisplayData");var C$M=C$s.prototype;return C$M.binarySearch1=function(C$s,C$M){var C$T=0,C$X=C$s.length-2;if(0==C$X)return 1;for(var C$x=C$X>>>1;;){if(C$s[Math.floor(C$x+1)]<=C$M?C$T=C$x+1:C$X=C$x,C$T==C$X)return C$T+1;C$x=C$T+C$X>>>1}return 0},C$M.apply=function(C$s,C$M,C$T){if(void 0===C$T&&(C$T=1),C$s+=.05,!(this.timeList.length<=0)){var C$X=0;if(!(C$s<this.timeList[0])){var C$x=this.vectices[0].length,C$c=[],C$l=this.binarySearch1(this.timeList,C$s);if(this.frameIndex=C$l,C$s>=this.timeList[this.timeList.length-1]){var C$u=this.vectices[this.vectices.length-1];if(C$T<1)for(C$X=0;C$X<C$x;C$X++)C$c[C$X]+=(C$u[C$X]-C$c[C$X])*C$T;else for(C$X=0;C$X<C$x;C$X++)C$c[C$X]=C$u[C$X];this.deformData=C$c}else{this.tweenKeyList[this.frameIndex];var C$E=this.vectices[this.frameIndex-1],C$O=this.vectices[this.frameIndex],C$U=this.timeList[this.frameIndex-1],C$p=this.timeList[this.frameIndex];C$T=this.tweenKeyList[C$l-1]?(C$s-C$U)/(C$p-C$U):0;var C$_=NaN;for(C$X=0;C$X<C$x;C$X++)C$_=C$E[C$X],C$c[C$X]=C$_+(C$O[C$X]-C$_)*C$T;this.deformData=C$c}}}},C$s}(),C$ys=function(){function C$s(){this.time=NaN,this.drawOrder=[]}return C$X(C$s,"laya.ani.bone.DrawOrderData"),C$s}(),C$es=function(){function C$s(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return C$X(C$s,"laya.ani.bone.EventData"),C$s}(),C$J=function(){function C$Xs(C$s,C$M){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=C$s,this._targetBone=C$M[C$s.targetBoneIndex],this.isSpine=C$s.isSpine,null==this._bones&&(this._bones=[]);for(var C$T=this._bones.length=0,C$X=C$s.boneIndexs.length;C$T<C$X;C$T++)this._bones.push(C$M[C$s.boneIndexs[C$T]]);this.name=C$s.name,this.mix=C$s.mix,this.bendDirection=C$s.bendDirection}C$X(C$Xs,"laya.ani.bone.IkConstraint");var C$s=C$Xs.prototype;return C$s.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},C$s._applyIk1=function(C$s,C$M,C$T,C$X){var C$x=C$s.parentBone,C$c=1/(C$x.resultMatrix.a*C$x.resultMatrix.d-C$x.resultMatrix.b*C$x.resultMatrix.c),C$l=C$M-C$x.resultMatrix.tx,C$u=C$T-C$x.resultMatrix.ty,C$E=(C$l*C$x.resultMatrix.d-C$u*C$x.resultMatrix.c)*C$c-C$s.transform.x,C$O=(C$u*C$x.resultMatrix.a-C$l*C$x.resultMatrix.b)*C$c-C$s.transform.y,C$U=Math.atan2(C$O,C$E)*C$Xs.radDeg-0-C$s.transform.skX;C$s.transform.scX<0&&(C$U+=180),180<C$U?C$U-=360:C$U<-180&&(C$U+=360),C$s.transform.skX=C$s.transform.skY=C$s.transform.skX+C$U*C$X,C$s.update()},C$s.updatePos=function(C$s,C$M){this._sp&&this._sp.pos(C$s,C$M)},C$s._applyIk2=function(C$s,C$M,C$T,C$X,C$x,C$c){if(0!=C$c){var C$l=C$s.resultTransform.x,C$u=C$s.resultTransform.y,C$E=C$s.transform.scX,C$O=C$s.transform.scY,C$U=C$M.transform.scX,C$p=0,C$_=0,C$R=0;C$R=C$E<0?(C$E=-C$E,C$p=180,-1):(C$p=0,1),C$O<0&&(C$O=-C$O,C$R=-C$R),C$_=C$U<0?(C$U=-C$U,180):0;var C$q=C$M.resultTransform.x,C$G=NaN,C$g=NaN,C$f=NaN,C$J=C$s.resultMatrix.a,C$P=C$s.resultMatrix.c,C$t=C$s.resultMatrix.b,C$r=C$s.resultMatrix.d,C$N=Math.abs(C$E-C$O)<=1e-4;C$f=C$N?(C$g=C$J*C$q+C$P*(C$G=C$M.resultTransform.y)+C$s.resultMatrix.tx,C$t*C$q+C$r*C$G+C$s.resultMatrix.ty):(C$G=0,C$g=C$J*C$q+C$s.resultMatrix.tx,C$t*C$q+C$s.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new C$cs,C$xs.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(C$T,C$X,15,"#ffff00"),this._sp.graphics.drawCircle(C$g,C$f,15,"#ff00ff")),C$s.setRotation(Math.atan2(C$f-C$s.resultMatrix.ty,C$g-C$s.resultMatrix.tx));var C$w=C$s.parentBone;C$J=C$w.resultMatrix.a,C$P=C$w.resultMatrix.c,C$t=C$w.resultMatrix.b;var C$k=1/(C$J*(C$r=C$w.resultMatrix.d)-C$P*C$t),C$A=C$T-C$w.resultMatrix.tx,C$D=C$X-C$w.resultMatrix.ty,C$h=(C$A*C$r-C$D*C$P)*C$k-C$l,C$Q=(C$D*C$J-C$A*C$t)*C$k-C$u,C$v=((C$A=C$g-C$w.resultMatrix.tx)*C$r-(C$D=C$f-C$w.resultMatrix.ty)*C$P)*C$k-C$l,C$z=(C$D*C$J-C$A*C$t)*C$k-C$u,C$B=Math.sqrt(C$v*C$v+C$z*C$z),C$o=C$M.length*C$U,C$C=NaN,C$m=NaN;if(C$N){var C$Y=(C$h*C$h+C$Q*C$Q-C$B*C$B-(C$o*=C$E)*C$o)/(2*C$B*C$o);C$Y<-1?C$Y=-1:1<C$Y&&(C$Y=1),C$m=Math.acos(C$Y)*C$x,C$J=C$B+C$o*C$Y,C$P=C$o*Math.sin(C$m),C$C=Math.atan2(C$Q*C$J-C$h*C$P,C$h*C$J+C$Q*C$P)}else{var C$I=(C$J=C$E*C$o)*C$J,C$y=(C$P=C$O*C$o)*C$P,C$e=C$h*C$h+C$Q*C$Q,C$V=Math.atan2(C$Q,C$h),C$b=-2*C$y*C$B,C$L=C$y-C$I;if(0<(C$r=C$b*C$b-4*C$L*(C$t=C$y*C$B*C$B+C$I*C$e-C$I*C$y))){var C$S=Math.sqrt(C$r);C$b<0&&(C$S=-C$S);var C$K=(C$S=-(C$b+C$S)/2)/C$L,C$Z=C$t/C$S,C$n=Math.abs(C$K)<Math.abs(C$Z)?C$K:C$Z;C$n*C$n<=C$e&&(C$D=Math.sqrt(C$e-C$n*C$n)*C$x,C$C=C$V-Math.atan2(C$D,C$n),C$m=Math.atan2(C$D/C$O,(C$n-C$B)/C$E))}var C$$=0,C$F=Number.MAX_VALUE,C$W=0,C$a=0,C$j=0,C$i=0,C$H=0,C$d=0;C$i<(C$r=(C$A=C$B+C$J)*C$A)&&(C$j=0,C$i=C$r,C$H=C$A),(C$r=(C$A=C$B-C$J)*C$A)<C$F&&(C$$=Math.PI,C$F=C$r,C$W=C$A);var C$ss=Math.acos(-C$J*C$B/(C$I-C$y));(C$r=(C$A=C$J*Math.cos(C$ss)+C$B)*C$A+(C$D=C$P*Math.sin(C$ss))*C$D)<C$F&&(C$$=C$ss,C$F=C$r,C$W=C$A,C$a=C$D),C$i<C$r&&(C$j=C$ss,C$i=C$r,C$H=C$A,C$d=C$D),C$m=C$e<=(C$F+C$i)/2?(C$C=C$V-Math.atan2(C$a*C$x,C$W),C$$*C$x):(C$C=C$V-Math.atan2(C$d*C$x,C$H),C$j*C$x)}var C$Ms=Math.atan2(C$G,C$q)*C$R,C$Ts=C$s.resultTransform.skX;180<(C$C=(C$C-C$Ms)*C$Xs.radDeg+C$p-C$Ts)?C$C-=360:C$C<-180&&(C$C+=360),C$s.resultTransform.x=C$l,C$s.resultTransform.y=C$u,C$s.resultTransform.skX=C$s.resultTransform.skY=C$Ts+C$C*C$c,C$Ts=C$M.resultTransform.skX,180<(C$m=((C$m+C$Ms)*C$Xs.radDeg-0)*C$R+C$_-(C$Ts%=360))?C$m-=360:C$m<-180&&(C$m+=360),C$M.resultTransform.x=C$q,C$M.resultTransform.y=C$G,C$M.resultTransform.skX=C$M.resultTransform.skY=C$M.resultTransform.skY+C$m*C$c,C$s.update()}},C$s._applyIk3=function(C$s,C$M,C$T,C$X,C$x,C$c){if(0!=C$c){var C$l,C$u,C$E=C$M.resultMatrix.a*C$M.length,C$O=C$M.resultMatrix.b*C$M.length,C$U=C$E*C$E+C$O*C$O,C$p=Math.sqrt(C$U),C$_=C$s.resultMatrix.tx,C$R=C$s.resultMatrix.ty,C$q=C$M.resultMatrix.tx,C$G=C$M.resultMatrix.ty,C$g=C$q-C$_,C$f=C$G-C$R,C$J=C$g*C$g+C$f*C$f,C$P=Math.sqrt(C$J),C$t=(C$g=C$T-C$s.resultMatrix.tx)*C$g+(C$f=C$X-C$s.resultMatrix.ty)*C$f,C$r=Math.sqrt(C$t);if(C$p+C$P<=C$r||C$r+C$p<=C$P||C$r+C$P<=C$p){var C$N=NaN;C$q=C$_+(C$N=C$p+C$P<=C$r?1:-1)*(C$T-C$_)*C$P/C$r,C$G=C$R+C$N*(C$X-C$R)*C$P/C$r}else{var C$w=(C$J-C$U+C$t)/(2*C$t),C$k=Math.sqrt(C$J-C$w*C$w*C$t)/C$r,C$A=C$_+C$g*C$w,C$D=C$R+C$f*C$w,C$h=-C$f*C$k,C$Q=C$g*C$k;C$G=0<C$x?(C$q=C$A-C$h,C$D-C$Q):(C$q=C$A+C$h,C$D+C$Q)}C$l=C$q,C$u=C$G,this.isDebug&&(this._sp||(this._sp=new C$cs,C$xs.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(C$_,C$R,15,"#ff00ff"),this._sp.graphics.drawCircle(C$T,C$X,15,"#ffff00"),this._sp.graphics.drawCircle(C$l,C$u,15,"#ff00ff"));var C$v,C$z;C$v=Math.atan2(C$u-C$s.resultMatrix.ty,C$l-C$s.resultMatrix.tx),C$s.setRotation(C$v),(C$z=C$Xs._tempMatrix).identity(),C$z.rotate(C$v),C$z.scale(C$s.resultMatrix.getScaleX(),C$s.resultMatrix.getScaleY()),C$z.translate(C$s.resultMatrix.tx,C$s.resultMatrix.ty),C$z.copyTo(C$s.resultMatrix),C$s.updateChild();var C$B,C$o;C$B=Math.atan2(C$X-C$u,C$T-C$l),C$M.setRotation(C$B),(C$o=C$Xs._tempMatrix).identity(),C$o.rotate(C$B),C$o.scale(C$M.resultMatrix.getScaleX(),C$M.resultMatrix.getScaleY()),C$o.translate(C$l,C$u),C$z.copyTo(C$M.resultMatrix),C$M.updateChild()}},C$T(C$Xs,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new C$zs}]),C$Xs}(),C$Vs=function(){function C$s(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return C$X(C$s,"laya.ani.bone.IkConstraintData"),C$s}(),C$r=function(){function C$o(C$s,C$M){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=C$s,this.position=C$s.position,this.spacing=C$s.spacing,this.rotateMix=C$s.rotateMix,this.translateMix=C$s.translateMix,this.bones=[];for(var C$T=this.data.bones,C$X=0,C$x=C$T.length;C$X<C$x;C$X++)this.bones.push(C$M[C$T[C$X]])}C$X(C$o,"laya.ani.bone.PathConstraint");var C$s=C$o.prototype;return C$s.apply=function(C$s,C$M){if(this.target){var C$T=this.translateMix,C$X=this.translateMix,C$x=0<C$X,C$c=this.data.spacingMode,C$l="length"==C$c,C$u=this.data.rotateMode,C$E="tangent"==C$u,C$O="chainScale"==C$u,C$U=[],C$p=this.bones.length,C$_=C$E?C$p:C$p+1,C$R=[];(this._spaces=C$R)[0]=this.position;var C$q=this.spacing;if(C$O||C$l)for(var C$G=0,C$g=C$_-1;C$G<C$g;){var C$f=this.bones[C$G],C$J=C$f.length,C$P=C$J*C$f.resultMatrix.a,C$t=C$J*C$f.resultMatrix.b;C$J=Math.sqrt(C$P*C$P+C$t*C$t),C$O&&(C$U[C$G]=C$J),C$R[++C$G]=C$l?Math.max(0,C$J+C$q):C$q}else for(C$G=1;C$G<C$_;C$G++)C$R[C$G]=C$q;var C$r=this.computeWorldPositions(this.target,C$s,C$M,C$_,C$E,"percent"==this.data.positionMode,"percent"==C$c);if(this._debugKey){for(C$G=0;C$G<C$r.length;C$G++)C$M.drawCircle(C$r[C$G++],C$r[C$G++],5,"#00ff00");var C$N=[];for(C$G=0;C$G<C$r.length;C$G++)C$N.push(C$r[C$G++],C$r[C$G++]);C$M.drawLines(0,0,C$N,"#ff0000")}var C$w=C$r[0],C$k=C$r[1],C$A=this.data.offsetRotation,C$D="chain"==C$u&&0==C$A,C$h=NaN;for(C$G=0,C$h=3;C$G<C$p;C$G++,C$h+=3){(C$f=this.bones[C$G]).resultMatrix.tx+=(C$w-C$f.resultMatrix.tx)*C$T,C$f.resultMatrix.ty+=(C$k-C$f.resultMatrix.ty)*C$T;var C$Q=(C$P=C$r[C$h])-C$w,C$v=(C$t=C$r[C$h+1])-C$k;if(C$O&&0!=(C$J=C$U[C$G])){var C$z=(Math.sqrt(C$Q*C$Q+C$v*C$v)/C$J-1)*C$X+1;C$f.resultMatrix.a*=C$z,C$f.resultMatrix.c*=C$z}if(C$w=C$P,C$k=C$t,C$x){var C$B=C$f.resultMatrix.a,C$o=C$f.resultMatrix.c,C$C=C$f.resultMatrix.b,C$m=C$f.resultMatrix.d,C$Y=NaN,C$I=NaN,C$y=NaN;C$Y=C$E?C$r[C$h-1]:0==C$R[C$G+1]?C$r[C$h+2]:Math.atan2(C$v,C$Q),C$Y-=Math.atan2(C$C,C$B)-C$A/180*Math.PI,C$D&&(C$I=Math.cos(C$Y),C$y=Math.sin(C$Y),C$w+=((C$J=C$f.length)*(C$I*C$B-C$y*C$C)-C$Q)*C$X,C$k+=(C$J*(C$y*C$B+C$I*C$C)-C$v)*C$X),C$Y>Math.PI?C$Y-=2*Math.PI:C$Y<-Math.PI&&(C$Y+=2*Math.PI),C$Y*=C$X,C$I=Math.cos(C$Y),C$y=Math.sin(C$Y),C$f.resultMatrix.a=C$I*C$B-C$y*C$C,C$f.resultMatrix.c=C$I*C$o-C$y*C$m,C$f.resultMatrix.b=C$y*C$B+C$I*C$C,C$f.resultMatrix.d=C$y*C$o+C$I*C$m}}}},C$s.computeWorldVertices2=function(C$s,C$M,C$T,C$X,C$x,C$c){var C$l,C$u,C$E=C$s.currDisplayData.bones,C$O=C$s.currDisplayData.weights,C$U=C$s.currDisplayData.triangles,C$p=0,C$_=0,C$R=0,C$q=0,C$G=0,C$g=0,C$f=0,C$J=0,C$P=0,C$t=0,C$r=0;if(null!=C$E){for(C$p=0;C$p<C$T;C$p+=2)C$_+=(C$q=C$E[C$_])+1,C$R+=C$q;var C$N=C$M;for(C$G=C$c,C$g=3*C$R;C$G<C$X;C$G+=2){for(C$J=C$f=0,C$q=C$E[C$_++],C$q+=C$_;C$_<C$q;C$_++,C$g+=3){C$l=C$N[C$E[C$_]].resultMatrix,C$P=C$O[C$g],C$t=C$O[C$g+1];var C$w=C$O[C$g+2];C$f+=(C$P*C$l.a+C$t*C$l.c+C$l.tx)*C$w,C$J+=(C$P*C$l.b+C$t*C$l.d+C$l.ty)*C$w}C$x[C$G]=C$f,C$x[C$G+1]=C$J}}else{var C$k,C$A;if(C$U||(C$U=C$O),C$s.deformData&&(C$U=C$s.deformData),C$k=C$s.parent,C$M)for(C$r=C$M.length,C$p=0;C$p<C$r;C$p++)if(C$M[C$p].name==C$k){C$u=C$M[C$p];break}C$u&&(C$A=C$u.resultMatrix),C$A||(C$A=C$o._tempMt);var C$D=C$A.tx,C$h=C$A.ty,C$Q=C$A.a,C$v=C$A.b,C$z=C$A.c,C$B=C$A.d;for(C$u&&(C$B*=C$u.d),C$_=C$T,C$G=C$c;C$G<C$X;C$_+=2,C$G+=2)C$P=C$U[C$_],C$t=C$U[C$_+1],C$x[C$G]=C$P*C$Q+C$t*C$v+C$D,C$x[C$G+1]=-(C$P*C$z+C$t*C$B+C$h)}},C$s.computeWorldPositions=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l){C$s.currDisplayData.bones,C$s.currDisplayData.weights,C$s.currDisplayData.triangles;var C$u=[],C$E=0,C$O=C$s.currDisplayData.verLen,C$U=this.position,C$p=this._spaces,C$_=[],C$R=[],C$q=C$O/6,C$G=-1,C$g=NaN,C$f=0,C$J=0,C$P=NaN,C$t=NaN,C$r=NaN,C$N=NaN;if(C$q--,C$O-=4,this.computeWorldVertices2(C$s,C$M,2,C$O,C$u,0),this._debugKey)for(C$E=0;C$E<C$u.length;)C$T.drawCircle(C$u[C$E++],C$u[C$E++],10,"#ff0000");C$_=C$u,this._curves.length=C$q;var C$w=this._curves,C$k=C$_[C$g=0],C$A=C$_[1],C$D=0,C$h=0,C$Q=0,C$v=0,C$z=0,C$B=0,C$o=NaN,C$C=NaN,C$m=NaN,C$Y=NaN,C$I=NaN,C$y=NaN,C$e=NaN,C$V=NaN,C$b=0;for(C$E=0,C$b=2;C$E<C$q;C$E++,C$b+=6)C$D=C$_[C$b],C$h=C$_[C$b+1],C$Q=C$_[C$b+2],C$v=C$_[C$b+3],C$I=2*(C$o=.1875*(C$k-2*C$D+C$Q))+(C$m=.09375*(3*(C$D-C$Q)-C$k+(C$z=C$_[C$b+4]))),C$y=2*(C$C=.1875*(C$A-2*C$h+C$v))+(C$Y=.09375*(3*(C$h-C$v)-C$A+(C$B=C$_[C$b+5]))),C$e=.75*(C$D-C$k)+C$o+.16666667*C$m,C$V=.75*(C$h-C$A)+C$C+.16666667*C$Y,C$g+=Math.sqrt(C$e*C$e+C$V*C$V),C$e+=C$I,C$V+=C$y,C$I+=C$m,C$y+=C$Y,C$g+=Math.sqrt(C$e*C$e+C$V*C$V),C$e+=C$I,C$V+=C$y,C$g+=Math.sqrt(C$e*C$e+C$V*C$V),C$e+=C$I+C$m,C$V+=C$y+C$Y,C$g+=Math.sqrt(C$e*C$e+C$V*C$V),C$w[C$E]=C$g,C$k=C$z,C$A=C$B;if(C$c&&(C$U*=C$g),C$l)for(C$E=0;C$E<C$X;C$E++)C$p[C$E]*=C$g;var C$L=this._segments,C$S=0,C$K=0;for(C$K=C$J=C$f=C$E=0;C$E<C$X;C$E++,C$f+=3)if((C$P=C$U+=C$t=C$p[C$E])<0)this.addBeforePosition(C$P,C$_,0,C$R,C$f);else if(C$g<C$P)this.addAfterPosition(C$P-C$g,C$_,C$O-4,C$R,C$f);else{for(;;C$J++)if(!((C$N=C$w[C$J])<C$P)){0==C$J?C$P/=C$N:C$P=(C$P-(C$r=C$w[C$J-1]))/(C$N-C$r);break}if(C$J!=C$G){var C$Z=6*(C$G=C$J);for(C$k=C$_[C$Z],C$A=C$_[C$Z+1],C$D=C$_[C$Z+2],C$h=C$_[C$Z+3],C$Q=C$_[C$Z+4],C$v=C$_[C$Z+5],C$I=2*(C$o=.03*(C$k-2*C$D+C$Q))+(C$m=.006*(3*(C$D-C$Q)-C$k+(C$z=C$_[C$Z+6]))),C$y=2*(C$C=.03*(C$A-2*C$h+C$v))+(C$Y=.006*(3*(C$h-C$v)-C$A+(C$B=C$_[C$Z+7]))),C$e=.3*(C$D-C$k)+C$o+.16666667*C$m,C$V=.3*(C$h-C$A)+C$C+.16666667*C$Y,C$S=Math.sqrt(C$e*C$e+C$V*C$V),C$L[0]=C$S,C$Z=1;C$Z<8;C$Z++)C$e+=C$I,C$V+=C$y,C$I+=C$m,C$y+=C$Y,C$S+=Math.sqrt(C$e*C$e+C$V*C$V),C$L[C$Z]=C$S;C$e+=C$I,C$V+=C$y,C$S+=Math.sqrt(C$e*C$e+C$V*C$V),C$L[8]=C$S,C$e+=C$I+C$m,C$V+=C$y+C$Y,C$S+=Math.sqrt(C$e*C$e+C$V*C$V),C$L[9]=C$S,C$K=0}for(C$P*=C$S;;C$K++)if(!((C$N=C$L[C$K])<C$P)){0==C$K?C$P/=C$N:C$P=C$K+(C$P-(C$r=C$L[C$K-1]))/(C$N-C$r);break}this.addCurvePosition(.1*C$P,C$k,C$A,C$D,C$h,C$Q,C$v,C$z,C$B,C$R,C$f,C$x||0<C$E&&0==C$t)}return C$R},C$s.addBeforePosition=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$M[C$T],C$l=C$M[C$T+1],C$u=C$M[C$T+2]-C$c,C$E=C$M[C$T+3]-C$l,C$O=Math.atan2(C$E,C$u);C$X[C$x]=C$c+C$s*Math.cos(C$O),C$X[C$x+1]=C$l+C$s*Math.sin(C$O),C$X[C$x+2]=C$O},C$s.addAfterPosition=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$M[C$T+2],C$l=C$M[C$T+3],C$u=C$c-C$M[C$T],C$E=C$l-C$M[C$T+1],C$O=Math.atan2(C$E,C$u);C$X[C$x]=C$c+C$s*Math.cos(C$O),C$X[C$x+1]=C$l+C$s*Math.sin(C$O),C$X[C$x+2]=C$O},C$s.addCurvePosition=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U,C$p){0==C$s&&(C$s=1e-4);var C$_=C$s*C$s,C$R=C$_*C$s,C$q=1-C$s,C$G=C$q*C$q,C$g=C$G*C$q,C$f=C$q*C$s,C$J=3*C$f,C$P=C$q*C$J,C$t=C$J*C$s,C$r=C$M*C$g+C$X*C$P+C$c*C$t+C$u*C$R,C$N=C$T*C$g+C$x*C$P+C$l*C$t+C$E*C$R;C$O[C$U]=C$r,C$O[C$U+1]=C$N,C$O[C$U+2]=C$p?Math.atan2(C$N-(C$T*C$G+C$x*C$f*2+C$l*C$_),C$r-(C$M*C$G+C$X*C$f*2+C$c*C$_)):0},C$o.NONE=-1,C$o.BEFORE=-2,C$o.AFTER=-3,C$T(C$o,["_tempMt",function(){return this._tempMt=new C$zs}]),C$o}(),C$bs=function(){function C$s(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return C$X(C$s,"laya.ani.bone.PathConstraintData"),C$s}(),C$Ls=function(){function C$s(){this.name=null,this.slotArr=[]}return C$X(C$s,"laya.ani.bone.SkinData"),C$s}(),C$Ss=function(){function C$s(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}C$X(C$s,"laya.ani.bone.SkinSlotDisplayData");var C$M=C$s.prototype;return C$M.createTexture=function(C$s){return this.texture||(this.texture=new C$Bs(C$s.bitmap,this.uvs),C$s.bitmap.alphaTexture&&(this.texture.alphaTexture=new C$Bs(C$s.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=C$s.height,this.texture.height=C$s.width,this.texture.offsetX=-C$s.offsetX,this.texture.offsetY=-C$s.offsetY,this.texture.sourceWidth=C$s.sourceHeight,this.texture.sourceHeight=C$s.sourceWidth):(this.texture.width=C$s.width,this.texture.height=C$s.height,this.texture.offsetX=-C$s.offsetX,this.texture.offsetY=-C$s.offsetY,this.texture.sourceWidth=C$s.sourceWidth,this.texture.sourceHeight=C$s.sourceHeight),C$g.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},C$M.destory=function(){this.texture&&this.texture.destroy()},C$s}(),C$Ks=function(){function C$s(){this.name=null,this.displayArr=[]}return C$X(C$s,"laya.ani.bone.SlotData"),C$s.prototype.getDisplayByName=function(C$s){for(var C$M=0,C$T=this.displayArr.length;C$M<C$T;C$M++)if(this.displayArr[C$M].attachmentName==C$s)return C$M;return-1},C$s}(),C$N=function(){function C$s(C$s,C$M){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=C$G(2,0),this._data=C$s,null==this._bones&&(this._bones=[]),this.target=C$M[C$s.targetIndex];var C$T,C$X=0;for(C$X=0,C$T=C$s.boneIndexs.length;C$X<C$T;C$X++)this._bones.push(C$M[C$s.boneIndexs[C$X]]);this.rotateMix=C$s.rotateMix,this.translateMix=C$s.translateMix,this.scaleMix=C$s.scaleMix,this.shearMix=C$s.shearMix}return C$X(C$s,"laya.ani.bone.TfConstraint"),C$s.prototype.apply=function(){for(var C$s,C$M=this.target.resultMatrix.a,C$T=this.target.resultMatrix.b,C$X=this.target.resultMatrix.c,C$x=this.target.resultMatrix.d,C$c=0,C$l=this._bones.length;C$c<C$l;C$c++){if(C$s=this._bones[C$c],0<this.rotateMix){var C$u=C$s.resultMatrix.a,C$E=C$s.resultMatrix.b,C$O=C$s.resultMatrix.c,C$U=C$s.resultMatrix.d,C$p=Math.atan2(C$X,C$M)-Math.atan2(C$O,C$u)+this._data.offsetRotation*Math.PI/180;C$p>Math.PI?C$p-=2*Math.PI:C$p<-Math.PI&&(C$p+=2*Math.PI),C$p*=this.rotateMix;var C$_=Math.cos(C$p),C$R=Math.sin(C$p);C$s.resultMatrix.a=C$_*C$u-C$R*C$O,C$s.resultMatrix.b=C$_*C$E-C$R*C$U,C$s.resultMatrix.c=C$R*C$u+C$_*C$O,C$s.resultMatrix.d=C$R*C$E+C$_*C$U}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),C$s.resultMatrix.tx+=(this._temp[0]-C$s.resultMatrix.tx)*this.translateMix,C$s.resultMatrix.ty+=(this._temp[1]-C$s.resultMatrix.ty)*this.translateMix,C$s.updateChild()),0<this.scaleMix){var C$q=Math.sqrt(C$s.resultMatrix.a*C$s.resultMatrix.a+C$s.resultMatrix.c*C$s.resultMatrix.c),C$G=Math.sqrt(C$M*C$M+C$X*C$X),C$g=1e-5<C$q?(C$q+(C$G-C$q+this._data.offsetScaleX)*this.scaleMix)/C$q:0;C$s.resultMatrix.a*=C$g,C$s.resultMatrix.c*=C$g,C$q=Math.sqrt(C$s.resultMatrix.b*C$s.resultMatrix.b+C$s.resultMatrix.d*C$s.resultMatrix.d),C$G=Math.sqrt(C$T*C$T+C$x*C$x),C$g=1e-5<C$q?(C$q+(C$G-C$q+this._data.offsetScaleY)*this.scaleMix)/C$q:0,C$s.resultMatrix.b*=C$g,C$s.resultMatrix.d*=C$g}if(0<this.shearMix){C$E=C$s.resultMatrix.b,C$U=C$s.resultMatrix.d;var C$f=Math.atan2(C$U,C$E);(C$p=Math.atan2(C$x,C$T)-Math.atan2(C$X,C$M)-(C$f-Math.atan2(C$s.resultMatrix.c,C$s.resultMatrix.a)))>Math.PI?C$p-=2*Math.PI:C$p<-Math.PI&&(C$p+=2*Math.PI),C$p=C$f+(C$p+this._data.offsetShearY*Math.PI/180)*this.shearMix,C$g=Math.sqrt(C$E*C$E+C$U*C$U),C$s.resultMatrix.b=Math.cos(C$p)*C$g,C$s.resultMatrix.d=Math.sin(C$p)*C$g}}},C$s}(),C$Zs=function(){function C$s(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return C$X(C$s,"laya.ani.bone.TfConstraintData"),C$s}(),C$ns=function(){function C$s(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}C$X(C$s,"laya.ani.bone.Transform");var C$M=C$s.prototype;return C$M.initData=function(C$s){null!=C$s.x&&(this.x=C$s.x),null!=C$s.y&&(this.y=C$s.y),null!=C$s.skX&&(this.skX=C$s.skX),null!=C$s.skY&&(this.skY=C$s.skY),null!=C$s.scX&&(this.scX=C$s.scX),null!=C$s.scY&&(this.scY=C$s.scY)},C$M.getMatrix=function(){var C$s;return(C$s=this.mMatrix?this.mMatrix:this.mMatrix=new C$zs).identity(),C$s.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(C$s,this.skewX*Math.PI/180,this.skewY*Math.PI/180),C$s.rotate(this.skX*Math.PI/180),C$s.translate(this.x,this.y),C$s},C$M.skew=function(C$s,C$M,C$T){var C$X=Math.sin(C$T),C$x=Math.cos(C$T),C$c=Math.sin(C$M),C$l=Math.cos(C$M);return C$s.setTo(C$s.a*C$l-C$s.b*C$X,C$s.a*C$c+C$s.b*C$x,C$s.c*C$l-C$s.d*C$X,C$s.c*C$c+C$s.d*C$x,C$s.tx*C$l-C$s.ty*C$X,C$s.tx*C$c+C$s.ty*C$x),C$s},C$s}(),C$w=function(){function C$s(){}return C$X(C$s,"laya.ani.bone.UVTools"),C$s.getRelativeUV=function(C$s,C$M,C$T){var C$X=C$s[0],C$x=C$s[2]-C$s[0],C$c=C$s[1],C$l=C$s[5]-C$s[1];C$T||(C$T=[]),C$T.length=C$M.length;var C$u,C$E=0;C$u=C$T.length;var C$O=1/C$x,C$U=1/C$l;for(C$E=0;C$E<C$u;C$E+=2)C$T[C$E]=(C$M[C$E]-C$X)*C$O,C$T[C$E+1]=(C$M[C$E+1]-C$c)*C$U;return C$T},C$s.getAbsoluteUV=function(C$s,C$M,C$T){if(0==C$s[0]&&0==C$s[1]&&1==C$s[4]&&1==C$s[5])return C$T?(C$f.copyArray(C$T,C$M),C$T):C$M;var C$X=C$s[0],C$x=C$s[2]-C$s[0],C$c=C$s[1],C$l=C$s[5]-C$s[1];C$T||(C$T=[]),C$T.length=C$M.length;var C$u,C$E=0;for(C$u=C$T.length,C$E=0;C$E<C$u;C$E+=2)C$T[C$E]=C$M[C$E]*C$x+C$X,C$T[C$E+1]=C$M[C$E+1]*C$l+C$c;return C$T},C$s}(),C$o=function(){function C$s(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return C$X(C$s,"laya.ani.KeyFramesContent"),C$s}(),C$k=function(){function C$U(){}return C$X(C$U,"laya.ani.math.BezierLerp"),C$U.getBezierRate=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$U._getBezierParamKey(C$M,C$T,C$X,C$x),C$l=100*C$c+C$s;if(C$U._bezierResultCache[C$l])return C$U._bezierResultCache[C$l];var C$u,C$E=C$U._getBezierPoints(C$M,C$T,C$X,C$x,C$c),C$O=0;for(C$u=C$E.length,C$O=0;C$O<C$u;C$O+=2)if(C$s<=C$E[C$O])return C$U._bezierResultCache[C$l]=C$E[C$O+1],C$E[C$O+1];return C$U._bezierResultCache[C$l]=1},C$U._getBezierParamKey=function(C$s,C$M,C$T,C$X){return 100*(100*(100*(100*C$s+C$M)+C$T)+C$X)},C$U._getBezierPoints=function(C$s,C$M,C$T,C$X,C$x){return C$U._bezierPointsCache[C$x]?C$U._bezierPointsCache[C$x]:(C$c=[0,0,C$s,C$M,C$T,C$X,1,1],C$l=(new C$u).getBezierPoints(C$c,100,3),C$U._bezierPointsCache[C$x]=C$l);var C$c,C$l},C$U._bezierResultCache={},C$U._bezierPointsCache={},C$U}(),C$A=function(C$s){function C$M(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,C$M.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}C$X(C$M,"laya.ani.AnimationPlayer",C$x);var C$T=C$M.prototype;return C$xs.imps(C$T,{"laya.resource.IDestroy":!0}),C$T._onTempletLoadedComputeFullKeyframeIndices=function(C$s,C$M,C$T){this._templet===C$T&&this._cachePlayRate===C$s&&this._cacheFrameRate===C$M&&this._computeFullKeyframeIndices()},C$T._computeFullKeyframeIndices=function(){for(var C$s=this._fullFrames=[],C$M=this._templet,C$T=this._cacheFrameRateInterval*this._cachePlayRate,C$X=0,C$x=C$M.getAnimationCount();C$X<C$x;C$X++){for(var C$c=[],C$l=0,C$u=C$M.getAnimation(C$X).nodes.length;C$l<C$u;C$l++){for(var C$E=C$M.getAnimation(C$X).nodes[C$l],C$O=Math.floor(C$E.playTime/C$T+.01),C$U=new Uint16Array(C$O+1),C$p=-1,C$_=0,C$R=C$E.keyFrame.length;C$_<C$R;C$_++){var C$q=C$E.keyFrame[C$_],C$G=C$q.startTime,C$g=C$G+C$q.duration+C$T;do{for(var C$f=Math.floor(C$G/C$T+.5),C$J=C$p+1;C$J<C$f;C$J++)C$U[C$J]=C$_;C$U[C$p=C$f]=C$_,C$G+=C$T}while(C$G<=C$g)}C$c.push(C$U)}C$s.push(C$c)}},C$T._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},C$T._calculatePlayDuration=function(){if(0!==this.state){var C$s=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=C$s),this._playEnd>C$s&&(this._playEnd=C$s),this._playDuration=this._playEnd-this._playStart}},C$T._setPlayParams=function(C$s,C$M){this._currentTime=C$s,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/C$M+.01),0),this._currentFrameTime=this._currentKeyframeIndex*C$M},C$T._setPlayParamsWhenStop=function(C$s,C$M){this._currentTime=C$s,this._currentKeyframeIndex=Math.max(Math.floor(C$s/C$M+.01),0),this._currentFrameTime=this._currentKeyframeIndex*C$M,this._currentAnimationClipIndex=-1},C$T._update=function(C$s){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var C$M=this._cacheFrameRateInterval*this._cachePlayRate,C$T=0;this._startUpdateLoopCount!==C$q.loopCount&&(C$T=C$s*this.playbackRate,this._elapsedPlaybackTime+=C$T);var C$X=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=C$X)return this._setPlayParamsWhenStop(C$X,C$M),void this.event("stopped");if(C$T+=this._currentTime,0<C$X)if(C$X<=C$T)do{if(C$T-=C$X,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(C$X,C$M),this._stopWhenCircleFinish=!1,void this.event("stopped");C$T<C$X&&(this._setPlayParams(C$T,C$M),this.event("complete"))}while(C$X<=C$T);else this._setPlayParams(C$T,C$M);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(C$X,C$M),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},C$T._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},C$T.play=function(C$s,C$M,C$T,C$X,C$x){if(void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=1),void 0===C$T&&(C$T=2147483647),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(C$T<0||C$X<0||C$x<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==C$x&&C$x<C$X)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=C$M,this._overallDuration=C$T,this._playStart=C$X,this._playEnd=C$x,this._paused=!1,this._currentAnimationClipIndex=C$s,this._currentKeyframeIndex=0,this._startUpdateLoopCount=C$q.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},C$T.playByFrame=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$s&&(C$s=0),void 0===C$M&&(C$M=1),void 0===C$T&&(C$T=2147483647),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=30);var C$l=1e3/C$c;this.play(C$s,C$M,C$T,C$X*C$l,C$x*C$l)},C$T.stop=function(C$s){void 0===C$s&&(C$s=!0),C$s?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},C$c(0,C$T,"playEnd",function(){return this._playEnd}),C$c(0,C$T,"templet",function(){return this._templet},function(C$s){0===!this.state&&this.stop(!0),this._templet!==C$s&&((this._templet=C$s).loaded?this._computeFullKeyframeIndices():C$s.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),C$c(0,C$T,"playStart",function(){return this._playStart}),C$c(0,C$T,"playDuration",function(){return this._playDuration}),C$c(0,C$T,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),C$c(0,C$T,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),C$c(0,C$T,"overallDuration",function(){return this._overallDuration}),C$c(0,C$T,"currentFrameTime",function(){return this._currentFrameTime}),C$c(0,C$T,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),C$c(0,C$T,"currentPlayTime",function(){return this._currentTime+this._playStart}),C$c(0,C$T,"cachePlayRate",function(){return this._cachePlayRate},function(C$s){this._cachePlayRate!==C$s&&(this._cachePlayRate=C$s,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[C$s,this._cacheFrameRate])))}),C$c(0,C$T,"cacheFrameRate",function(){return this._cacheFrameRate},function(C$s){this._cacheFrameRate!==C$s&&(this._cacheFrameRate=C$s,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,C$s])))}),C$c(0,C$T,"currentTime",null,function(C$s){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(C$s<this._playStart||C$s>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=C$q.loopCount;var C$M=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=C$s,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/C$M),0),this._currentFrameTime=this._currentKeyframeIndex*C$M}}),C$c(0,C$T,"paused",function(){return this._paused},function(C$s){(this._paused=C$s)&&this.event("paused")}),C$c(0,C$T,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),C$c(0,C$T,"destroyed",function(){return this._destroyed}),C$M}(),C$C=function(C$s){function C$M(){C$M.__super.call(this),C$g.isConchNode&&(this.drawSkin=function(C$s){C$s.transform||(C$s.transform=C$zs.EMPTY),this._addCmd([C$s]),this.setSkinMesh&&this.setSkinMesh(C$s._ps,C$s.mVBData,C$s.mEleNum,0,C$s.mTexture,C$s.transform)})}return C$X(C$M,"laya.ani.GraphicsAni",C$l),C$M.prototype.drawSkin=function(C$s){var C$M=[C$s];this._saveToCmd(C$g._context._drawSkin,C$M)},C$M.create=function(){return C$M._caches.pop()||new C$M},C$M.recycle=function(C$s){C$s.clear(),C$M._caches.push(C$s)},C$M._caches=[],C$M}(),C$m=function(C$s){function C$J(){this._aniMap={},this.unfixedLastAniIndex=-1,C$J.__super.call(this),this._anis=new Array}C$X(C$J,"laya.ani.AnimationTemplet",C$U);var C$M=C$J.prototype;return C$M.parse=function(C$s){var C$M=new C$vs(C$s);this._aniVersion=C$M.readUTFString(),C$P.parse(this,C$M)},C$M._calculateKeyFrame=function(C$s,C$M,C$T){var C$X=C$s.keyFrame;C$X[C$M]=C$X[0];for(var C$x=0;C$x<C$M;C$x++){var C$c=C$X[C$x];C$c.nextData=0===C$c.duration?C$c.data:C$X[C$x+1].data}C$X.length--},C$M.onAsynLoaded=function(C$s,C$M,C$T){var C$X=new C$vs(C$M);switch(this._aniVersion=C$X.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":C$t.parse(this,C$X);break;default:C$P.parse(this,C$X)}this._endLoaded()},C$M.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},C$M.getAnimationCount=function(){return this._anis.length},C$M.getAnimation=function(C$s){return this._anis[C$s]},C$M.getAniDuration=function(C$s){return this._anis[C$s].playTime},C$M.getNodes=function(C$s){return this._anis[C$s].nodes},C$M.getNodeIndexWithName=function(C$s,C$M){return this._anis[C$s].bone3DMap[C$M]},C$M.getNodeCount=function(C$s){return this._anis[C$s].nodes.length},C$M.getTotalkeyframesLength=function(C$s){return this._anis[C$s].totalKeyframeDatasLength},C$M.getPublicExtData=function(){return this._publicExtData},C$M.getAnimationDataWithCache=function(C$s,C$M,C$T,C$X){var C$x=C$M[C$T];if(C$x){var C$c=C$x[C$s];return C$c?C$c[C$X]:null}return null},C$M.setAnimationDataWithCache=function(C$s,C$M,C$T,C$X,C$x){var C$c=C$M[C$T]||(C$M[C$T]={});(C$c[C$s]||(C$c[C$s]=[]))[C$X]=C$x},C$M.getOriginalData=function(C$s,C$M,C$T,C$X,C$x){for(var C$c=this._anis[C$s].nodes,C$l=0,C$u=0,C$E=C$c.length,C$O=0;C$u<C$E;C$u++){var C$U,C$p=C$c[C$u];C$U=C$p.keyFrame[C$T[C$u][C$X]],C$p.dataOffset=C$O;var C$_=C$x-C$U.startTime,C$R=C$p.lerpType;if(C$R)switch(C$R){case 0:case 1:for(C$l=0;C$l<C$p.keyframeWidth;)C$l+=C$p.interpolationMethod[C$l](C$p,C$l,C$M,C$O+C$l,C$U.data,C$_,null,C$U.duration,C$U.nextData);break;case 2:var C$q=C$U.interpolationData,C$G=C$q.length,C$g=0;for(C$l=0;C$l<C$G;){var C$f=C$q[C$l];switch(C$f){case 6:case 7:C$l+=C$J.interpolation[C$f](C$p,C$g,C$M,C$O+C$g,C$U.data,C$_,null,C$U.duration,C$U.nextData,C$q,C$l+1);break;default:C$l+=C$J.interpolation[C$f](C$p,C$g,C$M,C$O+C$g,C$U.data,C$_,null,C$U.duration,C$U.nextData)}C$g++}}else for(C$l=0;C$l<C$p.keyframeWidth;)C$l+=C$p.interpolationMethod[C$l](C$p,C$l,C$M,C$O+C$l,C$U.data,C$_,null,C$U.duration,C$U.nextData);C$O+=C$p.keyframeWidth}},C$M.getNodesCurrentFrameIndex=function(C$s,C$M){var C$T=this._anis[C$s].nodes;C$s!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(C$T.length),this.unfixedCurrentTimes=new Float32Array(C$T.length),this.unfixedLastAniIndex=C$s);for(var C$X=0,C$x=C$T.length;C$X<C$x;C$X++){var C$c=C$T[C$X];for(C$M<this.unfixedCurrentTimes[C$X]&&(this.unfixedCurrentFrameIndexes[C$X]=0),this.unfixedCurrentTimes[C$X]=C$M;this.unfixedCurrentFrameIndexes[C$X]<C$c.keyFrame.length&&!(C$c.keyFrame[this.unfixedCurrentFrameIndexes[C$X]].startTime>this.unfixedCurrentTimes[C$X]);)this.unfixedCurrentFrameIndexes[C$X]++;this.unfixedCurrentFrameIndexes[C$X]--}return this.unfixedCurrentFrameIndexes},C$M.getOriginalDataUnfixedRate=function(C$s,C$M,C$T){var C$X=this._anis[C$s].nodes;C$s!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(C$X.length),this.unfixedCurrentTimes=new Float32Array(C$X.length),this.unfixedKeyframes=C$G(C$X.length),this.unfixedLastAniIndex=C$s);for(var C$x=0,C$c=0,C$l=C$X.length,C$u=0;C$c<C$l;C$c++){var C$E=C$X[C$c];for(C$T<this.unfixedCurrentTimes[C$c]&&(this.unfixedCurrentFrameIndexes[C$c]=0),this.unfixedCurrentTimes[C$c]=C$T;this.unfixedCurrentFrameIndexes[C$c]<C$E.keyFrame.length&&!(C$E.keyFrame[this.unfixedCurrentFrameIndexes[C$c]].startTime>this.unfixedCurrentTimes[C$c]);)this.unfixedKeyframes[C$c]=C$E.keyFrame[this.unfixedCurrentFrameIndexes[C$c]],this.unfixedCurrentFrameIndexes[C$c]++;var C$O=this.unfixedKeyframes[C$c];C$E.dataOffset=C$u;var C$U=C$T-C$O.startTime;if(C$E.lerpType)switch(C$E.lerpType){case 0:case 1:for(C$x=0;C$x<C$E.keyframeWidth;)C$x+=C$E.interpolationMethod[C$x](C$E,C$x,C$M,C$u+C$x,C$O.data,C$U,null,C$O.duration,C$O.nextData);break;case 2:var C$p=C$O.interpolationData,C$_=C$p.length,C$R=0;for(C$x=0;C$x<C$_;){var C$q=C$p[C$x];switch(C$q){case 6:case 7:C$x+=C$J.interpolation[C$q](C$E,C$R,C$M,C$u+C$R,C$O.data,C$U,null,C$O.duration,C$O.nextData,C$p,C$x+1);break;default:C$x+=C$J.interpolation[C$q](C$E,C$R,C$M,C$u+C$R,C$O.data,C$U,null,C$O.duration,C$O.nextData)}C$R++}}else for(C$x=0;C$x<C$E.keyframeWidth;)C$x+=C$E.interpolationMethod[C$x](C$E,C$x,C$M,C$u+C$x,C$O.data,C$U,null,C$O.duration,C$O.nextData);C$u+=C$E.keyframeWidth}},C$J._LinearInterpolation_0=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){var C$U=0===C$u?0:C$c/C$u;return C$T[C$X]=(1-C$U)*C$x[C$M]+C$U*C$E[C$M],1},C$J._QuaternionInterpolation_1=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){var C$U=0===C$u?0:C$c/C$u;return C$_.slerpQuaternionArray(C$x,C$M,C$E,C$M,C$U,C$T,C$X),4},C$J._AngleInterpolation_2=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return 0},C$J._RadiansInterpolation_3=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return 0},C$J._Matrix4x4Interpolation_4=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){for(var C$U=0;C$U<16;C$U++,C$M++)C$T[C$X+C$U]=C$x[C$M]+C$c*C$l[C$M];return 16},C$J._NoInterpolation_5=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O){return C$T[C$X]=C$x[C$M],1},C$J._BezierInterpolation_6=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U){return void 0===C$U&&(C$U=0),C$T[C$X]=C$x[C$M]+(C$E[C$M]-C$x[C$M])*C$k.getBezierRate(C$c/C$u,C$O[C$U],C$O[C$U+1],C$O[C$U+2],C$O[C$U+3]),5},C$J._BezierInterpolation_7=function(C$s,C$M,C$T,C$X,C$x,C$c,C$l,C$u,C$E,C$O,C$U){return void 0===C$U&&(C$U=0),C$T[C$X]=C$O[C$U+4]+C$O[C$U+5]*C$k.getBezierRate((.001*C$c+C$O[C$U+6])/C$O[C$U+7],C$O[C$U],C$O[C$U+1],C$O[C$U+2],C$O[C$U+3]),9},C$J.load=function(C$s){return C$xs.loader.create(C$s,null,null,C$J)},C$J.interpolation=[C$J._LinearInterpolation_0,C$J._QuaternionInterpolation_1,C$J._AngleInterpolation_2,C$J._RadiansInterpolation_3,C$J._Matrix4x4Interpolation_4,C$J._NoInterpolation_5,C$J._BezierInterpolation_6,C$J._BezierInterpolation_7],C$J}(),C$D=function(C$M){function C$T(C$s,C$M){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,C$T.__super.call(this),void 0===C$M&&(C$M=0),C$s&&this.init(C$s,C$M)}C$X(C$T,"laya.ani.bone.Skeleton",C$M);var C$s=C$T.prototype;return C$s.init=function(C$s,C$M){void 0===C$M&&(C$M=0);var C$T,C$X,C$x,C$c=0,C$l=0;if(1==C$M)for(this._graphicsCache=[],C$c=0,C$l=C$s.getAnimationCount();C$c<C$l;C$c++)this._graphicsCache.push([]);if(this._yReverseMatrix=C$s.yReverseMatrix,this._aniMode=C$M,this._templet=C$s,this._player=new C$A,this._player.cacheFrameRate=C$s.rate,this._player.templet=C$s,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=C$s.mBoneArr,this._rootBone=C$s.mRootBone,this._aniSectionDic=C$s.aniSectionDic,0<C$s.ikArr.length)for(this._ikArr=[],C$c=0,C$l=C$s.ikArr.length;C$c<C$l;C$c++)this._ikArr.push(new C$J(C$s.ikArr[C$c],this._boneList));if(0<C$s.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),C$c=0,C$l=C$s.pathArr.length;C$c<C$l;C$c++)C$T=C$s.pathArr[C$c],C$X=new C$r(C$T,this._boneList),(C$x=this._boneSlotDic[C$T.name])&&((C$X=new C$r(C$T,this._boneList)).target=C$x),this._pathDic[C$T.name]=C$X;if(0<C$s.tfArr.length)for(this._tfArr=[],C$c=0,C$l=C$s.tfArr.length;C$c<C$l;C$c++)this._tfArr.push(new C$N(C$s.tfArr[C$c],this._boneList));if(0<C$s.skinDataArray.length){var C$u=this._templet.skinDataArray[this._skinIndex];this._skinName=C$u.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},C$s.load=function(C$s,C$M,C$T){},C$s._onLoaded=function(){},C$s._parseComplete=function(){var C$s=C$h.TEMPLET_DICTIONARY[this._aniPath];C$s&&(this.init(C$s,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},C$s._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},C$s._onPlay=function(){this.event("played")},C$s._onStop=function(){var C$s,C$M=this._templet.eventAniArr[this._aniClipIndex];if(C$M&&this._eventIndex<C$M.length)for(;this._eventIndex<C$M.length;this._eventIndex++)(C$s=C$M[this._eventIndex]).time>=this._player.playStart&&C$s.time<=this._player.playEnd&&this.event("label",C$s);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},C$s._onPause=function(){this.event("paused")},C$s._parseSrcBoneMatrix=function(){var C$s=0,C$M=0;for(C$M=this._templet.srcBoneMatrixArr.length,C$s=0;C$s<C$M;C$s++)this._boneMatrixArray.push(new C$zs);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var C$T,C$X,C$x=this._templet.boneSlotArray;for(C$s=0,C$M=C$x.length;C$s<C$M;C$s++)C$T=C$x[C$s],null==(C$X=this._bindBoneBoneSlotDic[C$T.parent])&&(this._bindBoneBoneSlotDic[C$T.parent]=C$X=[]),this._boneSlotDic[C$T.name]=C$T=C$T.copy(),C$X.push(C$T),this._boneSlotArray.push(C$T)}},C$s._emitMissedEvents=function(C$s,C$M,C$T){void 0===C$T&&(C$T=0);var C$X=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(C$X){var C$x,C$c,C$l=0;for(C$x=C$X.length,C$l=C$T;C$l<C$x;C$l++)(C$c=C$X[C$l]).time>=this._player.playStart&&C$c.time<=this._player.playEnd&&this.event("label",C$c)}},C$s._update=function(C$s){if(void 0===C$s&&(C$s=!0),!(this._pause||C$s&&this._indexControl)){var C$M=this.timer.currTimer,C$T=this._player.currentKeyframeIndex,C$X=C$M-this._lastTime;if(C$s?this._player._update(C$X):C$T=-1,this._lastTime=C$M,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<C$X&&this._clipIndex==C$T&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var C$x;this._lastUpdateAniClipIndex=this._aniClipIndex,C$T>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var C$c,C$l=this._templet.eventAniArr[this._aniClipIndex];if(C$l&&this._eventIndex<C$l.length&&((C$x=C$l[this._eventIndex]).time>=this._player.playStart&&C$x.time<=this._player.playEnd?this._player.currentPlayTime>=C$x.time&&(this.event("label",C$x),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(C$c=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=C$c&&(this.graphics=C$c));var C$u=0,C$E=0;for(C$E=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,C$E-1)&&0<C$E;)C$E--;if(C$E<this._clipIndex)for(C$u=C$E;C$u<this._clipIndex;C$u++)this._createGraphics(C$u)}else if(1==this._aniMode){if(C$c=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=C$c&&(this.graphics=C$c));for(C$E=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,C$E-1)&&0<C$E;)C$E--;if(C$E<this._clipIndex)for(C$u=C$E;C$u<this._clipIndex;C$u++)this._createGraphics(C$u)}this._createGraphics()}}},C$s._createGraphics=function(C$s){void 0===C$s&&(C$s=-1),-1==C$s&&(C$s=this._clipIndex);var C$M,C$T,C$X=C$s*this._player.cacheFrameRateInterval,C$x=this._templet.drawOrderAniArr[this._aniClipIndex];if(C$x&&0<C$x.length)for(this._drawOrderIndex=0,C$M=C$x[this._drawOrderIndex];C$X>=C$M.time&&(this._drawOrder=C$M.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=C$x.length));)C$M=C$x[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=C$C.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=C$C.create(),C$T=this.graphics;var C$c=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],C$s,C$X);var C$l,C$u,C$E,C$O,C$U=this._aniSectionDic[this._aniClipIndex],C$p=0,C$_=0,C$R=0,C$q=0,C$G=0,C$g=this._templet.srcBoneMatrixArr.length;for(C$G=C$U[C$_=0];C$_<C$g;C$_++)C$O=this._boneList[C$_],C$E=this._templet.srcBoneMatrixArr[C$_],C$O.resultTransform.scX=C$E.scX*this._curOriginalData[C$p++],C$O.resultTransform.skX=C$E.skX+this._curOriginalData[C$p++],C$O.resultTransform.skY=C$E.skY+this._curOriginalData[C$p++],C$O.resultTransform.scY=C$E.scY*this._curOriginalData[C$p++],C$O.resultTransform.x=C$E.x+this._curOriginalData[C$p++],C$O.resultTransform.y=C$E.y+this._curOriginalData[C$p++],8===this._templet.tMatrixDataLen&&(C$O.resultTransform.skewX=C$E.skewX+this._curOriginalData[C$p++],C$O.resultTransform.skewY=C$E.skewY+this._curOriginalData[C$p++]);var C$f,C$J={},C$P={};for(C$G+=C$U[1];C$_<C$G;C$_++)C$J[(C$f=C$c[C$_]).name]=this._curOriginalData[C$p++],C$P[C$f.name]=this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++];var C$t,C$r,C$N={},C$w={};for(C$G+=C$U[2];C$_<C$G;C$_++)C$N[(C$f=C$c[C$_]).name]=this._curOriginalData[C$p++],C$w[C$f.name]=this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++],this._curOriginalData[C$p++];if(this._pathDic)for(C$G+=C$U[3];C$_<C$G;C$_++){if(C$f=C$c[C$_],C$t=this._pathDic[C$f.name])switch(new C$vs(C$f.extenData).getByte()){case 1:C$t.position=this._curOriginalData[C$p++];break;case 2:C$t.spacing=this._curOriginalData[C$p++];break;case 3:C$t.rotateMix=this._curOriginalData[C$p++],C$t.translateMix=this._curOriginalData[C$p++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(C$zs.TEMP.identity()),this._ikArr)for(C$_=0,C$G=this._ikArr.length;C$_<C$G;C$_++)C$r=this._ikArr[C$_],C$N.hasOwnProperty(C$r.name)&&(C$r.bendDirection=C$N[C$r.name]),C$w.hasOwnProperty(C$r.name)&&(C$r.mix=C$w[C$r.name]),C$r.apply();if(this._pathDic)for(var C$k in this._pathDic)(C$t=this._pathDic[C$k]).apply(this._boneList,C$T);if(this._tfArr)for(C$_=0,C$q=this._tfArr.length;C$_<C$q;C$_++)this._tfArr[C$_].apply();for(C$_=0,C$q=this._boneList.length;C$_<C$q;C$_++)if(C$O=this._boneList[C$_],C$u=this._bindBoneBoneSlotDic[C$O.name],C$O.resultMatrix.copyTo(this._boneMatrixArray[C$_]),C$u)for(C$R=0,C$G=C$u.length;C$R<C$G;C$R++)(C$l=C$u[C$R])&&C$l.setParentMatrix(C$O.resultMatrix);var C$A,C$D,C$h,C$Q,C$v={},C$z=this._templet.deformAniArr;if(C$z&&0<C$z.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,C$_=0,C$G=this._boneSlotArray.length;C$_<C$G;C$_++)(C$l=this._boneSlotArray[C$_]).deformData=null;var C$B,C$o=C$z[this._aniClipIndex];for(C$B in C$A=C$o.default,this._setDeform(C$A,C$v,this._boneSlotArray,C$X),C$o)"default"!=C$B&&C$B!=this._skinName&&(C$A=C$o[C$B],this._setDeform(C$A,C$v,this._boneSlotArray,C$X));C$A=C$o[this._skinName],this._setDeform(C$A,C$v,this._boneSlotArray,C$X)}if(this._drawOrder)for(C$_=0,C$G=this._drawOrder.length;C$_<C$G;C$_++)C$D=C$J[(C$l=this._boneSlotArray[this._drawOrder[C$_]]).name],C$h=C$P[C$l.name],isNaN(C$h)||(C$T.save(),C$T.alpha(C$h)),isNaN(C$D)||-2==C$D||(this._templet.attachmentNames?C$l.showDisplayByName(this._templet.attachmentNames[C$D]):C$l.showDisplayByIndex(C$D)),C$v[this._drawOrder[C$_]]?(C$Q=C$v[this._drawOrder[C$_]],C$l.currDisplayData&&C$Q[C$l.currDisplayData.attachmentName]?C$l.deformData=C$Q[C$l.currDisplayData.attachmentName]:C$l.deformData=null):C$l.deformData=null,isNaN(C$h)?C$l.draw(C$T,this._boneMatrixArray,2==this._aniMode):C$l.draw(C$T,this._boneMatrixArray,2==this._aniMode,C$h),isNaN(C$h)||C$T.restore();else for(C$_=0,C$G=this._boneSlotArray.length;C$_<C$G;C$_++)C$D=C$J[(C$l=this._boneSlotArray[C$_]).name],C$h=C$P[C$l.name],isNaN(C$h)||(C$T.save(),C$T.alpha(C$h)),isNaN(C$D)||-2==C$D||(this._templet.attachmentNames?C$l.showDisplayByName(this._templet.attachmentNames[C$D]):C$l.showDisplayByIndex(C$D)),C$v[C$_]?(C$Q=C$v[C$_],C$l.currDisplayData&&C$Q[C$l.currDisplayData.attachmentName]?C$l.deformData=C$Q[C$l.currDisplayData.attachmentName]:C$l.deformData=null):C$l.deformData=null,isNaN(C$h)?C$l.draw(C$T,this._boneMatrixArray,2==this._aniMode):C$l.draw(C$T,this._boneMatrixArray,2==this._aniMode,C$h),isNaN(C$h)||C$T.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,C$s,C$T):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,C$s,C$T)},C$s._setDeform=function(C$s,C$M,C$T,C$X){if(C$s){var C$x,C$c,C$l,C$u=0,C$E=0,C$O=0;if(C$s)for(C$u=0,C$E=C$s.deformSlotDataList.length;C$u<C$E;C$u++)for(C$x=C$s.deformSlotDataList[C$u],C$O=0;C$O<C$x.deformSlotDisplayList.length;C$O++)C$l=C$T[(C$c=C$x.deformSlotDisplayList[C$O]).slotIndex],C$c.apply(C$X,C$l),C$M[C$c.slotIndex]||(C$M[C$c.slotIndex]={}),C$M[C$c.slotIndex][C$c.attachment]=C$c.deformData}},C$s.getAnimNum=function(){return this._templet.getAnimationCount()},C$s.getAniNameByIndex=function(C$s){return this._templet.getAniNameByIndex(C$s)},C$s.getSlotByName=function(C$s){return this._boneSlotDic[C$s]},C$s.showSkinByName=function(C$s,C$M){void 0===C$M&&(C$M=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(C$s),C$M)},C$s.showSkinByIndex=function(C$s,C$M){void 0===C$M&&(C$M=!0);for(var C$T=0;C$T<this._boneSlotArray.length;C$T++)this._boneSlotArray[C$T].showSlotData(null,C$M);if(this._templet.showSkinByIndex(this._boneSlotDic,C$s,C$M)){var C$X=this._templet.skinDataArray[C$s];this._skinIndex=C$s,this._skinName=C$X.name}this._clearCache()},C$s.showSlotSkinByIndex=function(C$s,C$M){if(0!=this._aniMode){var C$T=this.getSlotByName(C$s);C$T&&C$T.showDisplayByIndex(C$M),this._clearCache()}},C$s.showSlotSkinByName=function(C$s,C$M){if(0!=this._aniMode){var C$T=this.getSlotByName(C$s);C$T&&C$T.showDisplayByName(C$M),this._clearCache()}},C$s.replaceSlotSkinName=function(C$s,C$M,C$T){if(0!=this._aniMode){var C$X=this.getSlotByName(C$s);C$X&&C$X.replaceDisplayByName(C$M,C$T),this._clearCache()}},C$s.replaceSlotSkinByIndex=function(C$s,C$M,C$T){if(0!=this._aniMode){var C$X=this.getSlotByName(C$s);C$X&&C$X.replaceDisplayByIndex(C$M,C$T),this._clearCache()}},C$s.setSlotSkin=function(C$s,C$M){if(0!=this._aniMode){var C$T=this.getSlotByName(C$s);C$T&&C$T.replaceSkin(C$M),this._clearCache()}},C$s._clearCache=function(){if(1==this._aniMode)for(var C$s=0,C$M=this._graphicsCache.length;C$s<C$M;C$s++){for(var C$T=0,C$X=this._graphicsCache[C$s].length;C$T<C$X;C$T++){var C$x=this._graphicsCache[C$s][C$T];C$x!=this.graphics&&C$C.recycle(C$x)}this._graphicsCache[C$s].length=0}},C$s.play=function(C$s,C$M,C$T,C$X,C$x,C$c){void 0===C$T&&(C$T=!0),void 0===C$X&&(C$X=0),void 0===C$x&&(C$x=0),void 0===C$c&&(C$c=!0),this._indexControl=!1;var C$l=-1,C$u=NaN;if(C$u=C$M?2147483647:0,"string"==typeof C$s)for(var C$E=0,C$O=this._templet.getAnimationCount();C$E<C$O;C$E++){var C$U=this._templet.getAnimation(C$E);if(C$U&&C$s==C$U.name){C$l=C$E;break}}else C$l=C$s;-1<C$l&&C$l<this.getAnimNum()&&(this._aniClipIndex=C$l,(C$T||this._pause||this._currAniIndex!=C$l)&&(this._currAniIndex=C$l,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(C$l)),this._drawOrder=null,this._eventIndex=0,this._player.play(C$l,this._player.playbackRate,C$u,C$X,C$x),C$c&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=C$p.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},C$s.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},C$s.playbackRate=function(C$s){this._player&&(this._player.playbackRate=C$s)},C$s.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},C$s.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=C$p.now(),this.timer.frameLoop(1,this,this._update,null,!0))},C$s._getGrahicsDataWithCache=function(C$s,C$M){return this._graphicsCache[C$s][C$M]},C$s._setGrahicsDataWithCache=function(C$s,C$M,C$T){this._graphicsCache[C$s][C$M]=C$T},C$s.destroy=function(C$s){void 0===C$s&&(C$s=!0),C$M.prototype.destroy.call(this,C$s),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},C$c(0,C$s,"url",function(){return this._aniPath},function(C$s){this.load(C$s)}),C$c(0,C$s,"index",function(){return this._index},function(C$s){this.player&&(this._index=C$s,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),C$c(0,C$s,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),C$c(0,C$s,"templet",function(){return this._templet}),C$c(0,C$s,"player",function(){return this._player}),C$T.useSimpleMeshInCanvas=!1,C$T}(C$cs),C$h=function(C$M){function C$x(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,C$x.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}C$X(C$x,"laya.ani.bone.Templet",C$M);var C$s=C$x.prototype;return C$s.getLoadList=function(){return this._loadList},C$s.loadAni=function(C$s){this._skBufferUrl=C$s,C$xs.loader.load(C$s,C$E.create(this,this.onComplete),null,"arraybuffer")},C$s.onComplete=function(C$s){if(this._isDestroyed)this.destroy();else{var C$M=C$O.getRes(this._skBufferUrl);C$M?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,C$M)):this.event("error","load failed:"+this._skBufferUrl)}},C$s.parseData=function(C$s,C$M,C$T){void 0===C$T&&(C$T=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=C$s,this._mainTexture&&C$g.isWebGL&&C$s.bitmap&&(C$s.bitmap.enableMerageInAtlas=!1),this._rate=C$T,this.parse(C$M)},C$s.buildArmature=function(C$s){return void 0===C$s&&(C$s=0),new C$D(this,C$s)},C$s.parse=function(C$s){C$M.prototype.parse.call(this,C$s),this._endLoaded(),this._aniVersion!=C$x.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+C$x.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},C$s._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var C$s=0;this._loadList=[];var C$M,C$T=new C$vs(this.getPublicExtData()),C$X=0,C$x=0,C$c=0,C$l=C$T.getInt32(),C$u=C$T.readUTFString(),C$E=C$u.split("\n");for(C$s=0;C$s<C$l;C$s++)C$M=this._path+C$E[2*C$s],C$u=C$E[2*C$s+1],C$T.getFloat32(),C$T.getFloat32(),C$X=C$T.getFloat32(),C$x=C$T.getFloat32(),C$c=C$T.getFloat32(),isNaN(C$c)?0:C$c,C$c=C$T.getFloat32(),isNaN(C$c)?0:C$c,C$c=C$T.getFloat32(),isNaN(C$c)?C$X:C$c,C$c=C$T.getFloat32(),isNaN(C$c)?C$x:C$c,-1==this._loadList.indexOf(C$M)&&this._loadList.push(C$M);this.event("inited",this)}},C$s._textureComplete=function(){for(var C$s,C$M,C$T=0,C$X=this._loadList.length;C$T<C$X;C$T++)C$M=this._loadList[C$T],C$s=this._textureDic[C$M]=C$O.getRes(C$M),C$g.isWebGL&&C$s&&C$s.bitmap&&(C$s.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},C$s._parsePublicExtData=function(){var C$s=0,C$M=0,C$T=0,C$X=0,C$x=0;for(C$s=0,C$x=this.getAnimationCount();C$s<C$x;C$s++)this._graphicsCache.push([]);var C$c;C$c="Dragon"!=this._aniClassName;var C$l,C$u,C$E=new C$vs(this.getPublicExtData()),C$O=0,C$U=0,C$p=0,C$_=0,C$R=0,C$q=0,C$G=0,C$g=0,C$f=0,C$J=C$E.getInt32(),C$P=C$E.readUTFString(),C$t=C$P.split("\n");for(C$s=0;C$s<C$J;C$s++){if(C$l=this._mainTexture,C$u=this._path+C$t[2*C$s],C$P=C$t[2*C$s+1],null==this._mainTexture&&(C$l=this._textureDic[C$u]),!C$l)return this.event("error",this),void(this.isParseFail=!0);C$O=C$E.getFloat32(),C$U=C$E.getFloat32(),C$p=C$E.getFloat32(),C$_=C$E.getFloat32(),C$f=C$E.getFloat32(),C$R=isNaN(C$f)?0:C$f,C$f=C$E.getFloat32(),C$q=isNaN(C$f)?0:C$f,C$f=C$E.getFloat32(),C$G=isNaN(C$f)?C$p:C$f,C$f=C$E.getFloat32(),C$g=isNaN(C$f)?C$_:C$f,this.subTextureDic[C$P]=C$Bs.create(C$l,C$O,C$U,C$p,C$_,-C$R,-C$q,C$G,C$g),C$l.alphaTexture&&(this.subTextureDic[C$P].alphaTexture=C$Bs.create(C$l.alphaTexture,C$O,C$U,C$p,C$_,-C$R,-C$q,C$G,C$g))}this._mainTexture=C$l;var C$r,C$N,C$w,C$k,C$A,C$D=C$E.getUint16();for(C$s=0;C$s<C$D;C$s++)(C$r=[]).push(C$E.getUint16()),C$r.push(C$E.getUint16()),C$r.push(C$E.getUint16()),C$r.push(C$E.getUint16()),this.aniSectionDic[C$s]=C$r;var C$h,C$Q=C$E.getInt16(),C$v={};for(C$s=0;C$s<C$Q;C$s++)C$N=new C$os,0==C$s?C$h=C$N:C$N.root=C$h,C$N.d=C$c?-1:1,C$k=C$E.readUTFString(),C$A=C$E.readUTFString(),C$N.length=C$E.getFloat32(),1==C$E.getByte()&&(C$N.inheritRotation=!1),1==C$E.getByte()&&(C$N.inheritScale=!1),C$N.name=C$k,C$A&&((C$w=C$v[C$A])?C$w.addChild(C$N):this.mRootBone=C$N),C$v[C$k]=C$N,this.mBoneArr.push(C$N);this.tMatrixDataLen=C$E.getUint16();var C$z,C$B,C$o=C$E.getUint16(),C$C=Math.floor(C$o/this.tMatrixDataLen),C$m=this.srcBoneMatrixArr;for(C$s=0;C$s<C$C;C$s++)(C$z=new C$ns).scX=C$E.getFloat32(),C$z.skX=C$E.getFloat32(),C$z.skY=C$E.getFloat32(),C$z.scY=C$E.getFloat32(),C$z.x=C$E.getFloat32(),C$z.y=C$E.getFloat32(),8===this.tMatrixDataLen&&(C$z.skewX=C$E.getFloat32(),C$z.skewY=C$E.getFloat32()),C$m.push(C$z),(C$N=this.mBoneArr[C$s]).transform=C$z;var C$Y,C$I=C$E.getUint16(),C$y=0;for(C$s=0;C$s<C$I;C$s++){for(C$B=new C$Vs,C$y=C$E.getUint16(),C$M=0;C$M<C$y;C$M++)C$B.boneNames.push(C$E.readUTFString()),C$B.boneIndexs.push(C$E.getInt16());C$B.name=C$E.readUTFString(),C$B.targetBoneName=C$E.readUTFString(),C$B.targetBoneIndex=C$E.getInt16(),C$B.bendDirection=C$E.getFloat32(),C$B.mix=C$E.getFloat32(),C$B.isSpine=C$c,this.ikArr.push(C$B)}var C$e,C$V=C$E.getUint16(),C$b=0;for(C$s=0;C$s<C$V;C$s++){for(C$Y=new C$Zs,C$b=C$E.getUint16(),C$M=0;C$M<C$b;C$M++)C$Y.boneIndexs.push(C$E.getInt16());C$Y.name=C$E.getUTFString(),C$Y.targetIndex=C$E.getInt16(),C$Y.rotateMix=C$E.getFloat32(),C$Y.translateMix=C$E.getFloat32(),C$Y.scaleMix=C$E.getFloat32(),C$Y.shearMix=C$E.getFloat32(),C$Y.offsetRotation=C$E.getFloat32(),C$Y.offsetX=C$E.getFloat32(),C$Y.offsetY=C$E.getFloat32(),C$Y.offsetScaleX=C$E.getFloat32(),C$Y.offsetScaleY=C$E.getFloat32(),C$Y.offsetShearY=C$E.getFloat32(),this.tfArr.push(C$Y)}var C$L=C$E.getUint16(),C$S=0;for(C$s=0;C$s<C$L;C$s++){for((C$e=new C$bs).name=C$E.readUTFString(),C$S=C$E.getUint16(),C$M=0;C$M<C$S;C$M++)C$e.bones.push(C$E.getInt16());C$e.target=C$E.readUTFString(),C$e.positionMode=C$E.readUTFString(),C$e.spacingMode=C$E.readUTFString(),C$e.rotateMode=C$E.readUTFString(),C$e.offsetRotation=C$E.getFloat32(),C$e.position=C$E.getFloat32(),C$e.spacing=C$E.getFloat32(),C$e.rotateMix=C$E.getFloat32(),C$e.translateMix=C$E.getFloat32(),this.pathArr.push(C$e)}var C$K,C$Z,C$n,C$$,C$F,C$W=0,C$a=0,C$j=0,C$i=NaN,C$H=0,C$d=C$E.getInt16();for(C$s=0;C$s<C$d;C$s++){var C$ss=C$E.getUint8(),C$Ms={};this.deformAniArr.push(C$Ms);for(var C$Ts=0;C$Ts<C$ss;C$Ts++)for((C$K=new C$ms).skinName=C$E.getUTFString(),C$Ms[C$K.skinName]=C$K,C$W=C$E.getInt16(),C$M=0;C$M<C$W;C$M++)for(C$Z=new C$Ys,C$K.deformSlotDataList.push(C$Z),C$a=C$E.getInt16(),C$T=0;C$T<C$a;C$T++)for(C$n=new C$Is,C$Z.deformSlotDisplayList.push(C$n),C$n.slotIndex=C$E.getInt16(),C$n.attachment=C$E.getUTFString(),C$j=C$E.getInt16(),C$X=0;C$X<C$j;C$X++)for(1==C$E.getByte()?C$n.tweenKeyList.push(!0):C$n.tweenKeyList.push(!1),C$i=C$E.getFloat32(),C$n.timeList.push(C$i),C$$=[],C$n.vectices.push(C$$),C$H=C$E.getInt16(),C$x=0;C$x<C$H;C$x++)C$$.push(C$E.getFloat32())}var C$Xs,C$xs,C$cs=C$E.getInt16(),C$ls=0,C$us=0;for(C$s=0;C$s<C$cs;C$s++){for(C$ls=C$E.getInt16(),C$F=[],C$M=0;C$M<C$ls;C$M++){for((C$Xs=new C$ys).time=C$E.getFloat32(),C$us=C$E.getInt16(),C$T=0;C$T<C$us;C$T++)C$Xs.drawOrder.push(C$E.getInt16());C$F.push(C$Xs)}this.drawOrderAniArr.push(C$F)}var C$Es,C$Os=C$E.getInt16(),C$Us=0;for(C$s=0;C$s<C$Os;C$s++){for(C$Us=C$E.getInt16(),C$xs=[],C$M=0;C$M<C$Us;C$M++)(C$Es=new C$es).name=C$E.getUTFString(),C$Es.intValue=C$E.getInt32(),C$Es.floatValue=C$E.getFloat32(),C$Es.stringValue=C$E.getUTFString(),C$Es.time=C$E.getFloat32(),C$xs.push(C$Es);this.eventAniArr.push(C$xs)}var C$ps=C$E.getInt16();if(0<C$ps)for(this.attachmentNames=[],C$s=0;C$s<C$ps;C$s++)this.attachmentNames.push(C$E.getUTFString());var C$_s,C$Rs,C$qs=C$E.getInt16();for(C$s=0;C$s<C$qs;C$s++)(C$_s=new C$Cs).name=C$E.readUTFString(),C$_s.parent=C$E.readUTFString(),C$_s.attachmentName=C$E.readUTFString(),C$_s.srcDisplayIndex=C$_s.displayIndex=C$E.getInt16(),(C$_s.templet=this).boneSlotDic[C$_s.name]=C$_s,null==(C$Rs=this.bindBoneBoneSlotDic[C$_s.parent])&&(this.bindBoneBoneSlotDic[C$_s.parent]=C$Rs=[]),C$Rs.push(C$_s),this.boneSlotArray.push(C$_s);var C$Gs,C$gs,C$fs,C$Js=C$E.readUTFString().split("\n"),C$Ps=0,C$ts=C$E.getUint8(),C$rs=0,C$Ns=0,C$ws=0,C$ks=0,C$As=0,C$Ds=0,C$hs=0;for(C$s=0;C$s<C$ts;C$s++){for((C$Gs=new C$Ls).name=C$Js[C$Ps++],C$rs=C$E.getUint8(),C$M=0;C$M<C$rs;C$M++){for((C$gs=new C$Ks).name=C$Js[C$Ps++],C$_s=this.boneSlotDic[C$gs.name],C$Ns=C$E.getUint8(),C$T=0;C$T<C$Ns;C$T++){if(C$fs=new C$Ss,this.skinSlotDisplayDataArr.push(C$fs),C$fs.name=C$Js[C$Ps++],C$fs.attachmentName=C$Js[C$Ps++],C$fs.transform=new C$ns,C$fs.transform.scX=C$E.getFloat32(),C$fs.transform.skX=C$E.getFloat32(),C$fs.transform.skY=C$E.getFloat32(),C$fs.transform.scY=C$E.getFloat32(),C$fs.transform.x=C$E.getFloat32(),C$fs.transform.y=C$E.getFloat32(),C$gs.displayArr.push(C$fs),C$fs.width=C$E.getFloat32(),C$fs.height=C$E.getFloat32(),C$fs.type=C$E.getUint8(),C$fs.verLen=C$E.getUint16(),0<(C$Q=C$E.getUint16()))for(C$fs.bones=[],C$X=0;C$X<C$Q;C$X++){var C$Qs=C$E.getUint16();C$fs.bones.push(C$Qs)}if(0<(C$ws=C$E.getUint16()))for(C$fs.uvs=[],C$X=0;C$X<C$ws;C$X++)C$fs.uvs.push(C$E.getFloat32());if(0<(C$ks=C$E.getUint16()))for(C$fs.weights=[],C$X=0;C$X<C$ks;C$X++)C$fs.weights.push(C$E.getFloat32());if(0<(C$As=C$E.getUint16()))for(C$fs.triangles=[],C$X=0;C$X<C$As;C$X++)C$fs.triangles.push(C$E.getUint16());if(0<(C$Ds=C$E.getUint16()))for(C$fs.vertices=[],C$X=0;C$X<C$Ds;C$X++)C$fs.vertices.push(C$E.getFloat32());if(0<(C$hs=C$E.getUint16()))for(C$fs.lengths=[],C$X=0;C$X<C$hs;C$X++)C$fs.lengths.push(C$E.getFloat32())}C$Gs.slotArr.push(C$gs)}this.skinDic[C$Gs.name]=C$Gs,this.skinDataArray.push(C$Gs)}1==C$E.getUint8()?(this.yReverseMatrix=new C$zs(1,0,0,-1,0,0),C$h&&C$h.setTempMatrix(this.yReverseMatrix)):C$h&&C$h.setTempMatrix(new C$zs),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},C$s.getTexture=function(C$s){var C$M=this.subTextureDic[C$s];return C$M||(C$M=this.subTextureDic[C$s.substr(0,C$s.length-1)]),null==C$M?this._mainTexture:C$M},C$s.showSkinByIndex=function(C$s,C$M,C$T){if(void 0===C$T&&(C$T=!0),C$M<0&&C$M>=this.skinDataArray.length)return!1;var C$X,C$x,C$c=0,C$l=0,C$u=this.skinDataArray[C$M];if(C$u){for(C$c=0,C$l=C$u.slotArr.length;C$c<C$l;C$c++)(C$x=C$u.slotArr[C$c])&&(C$X=C$s[C$x.name])&&(C$X.showSlotData(C$x,C$T),C$T&&"undefined"!=C$X.attachmentName&&"null"!=C$X.attachmentName?C$X.showDisplayByName(C$X.attachmentName):C$X.showDisplayByIndex(C$X.displayIndex));return!0}return!1},C$s.getSkinIndexByName=function(C$s){for(var C$M=0,C$T=this.skinDataArray.length;C$M<C$T;C$M++)if(this.skinDataArray[C$M].name==C$s)return C$M;return-1},C$s.getGrahicsDataWithCache=function(C$s,C$M){return this._graphicsCache[C$s][C$M]},C$s.setGrahicsDataWithCache=function(C$s,C$M,C$T){this._graphicsCache[C$s][C$M]=C$T},C$s.destroy=function(){var C$s;for(var C$M in this._isDestroyed=!0,this.subTextureDic)(C$s=this.subTextureDic[C$M])&&C$s.destroy();for(C$M in this._textureDic)(C$s=this._textureDic[C$M])&&C$s.destroy();for(var C$T=0,C$X=this.skinSlotDisplayDataArr.length;C$T<C$X;C$T++)this.skinSlotDisplayDataArr[C$T].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete C$x.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},C$s.getAniNameByIndex=function(C$s){var C$M=this.getAnimation(C$s);return C$M?C$M.name:null},C$c(0,C$s,"rate",function(){return this._rate},function(C$s){this._rate=C$s}),C$x.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",C$x.TEMPLET_DICTIONARY=null,C$x}(C$m)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(C$s,C$M){"use strict";for(var C$T in Object.defineProperty(C$M,"__esModule",{value:!0}),Laya){var C$X=Laya[C$T];C$X&&C$X.__isclass&&(C$M[C$T]=C$X)}});