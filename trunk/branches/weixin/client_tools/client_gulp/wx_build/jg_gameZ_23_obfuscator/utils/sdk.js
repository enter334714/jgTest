var c=wx.$a;var utilMd5=require("./rymd5.js");let common_param={gid:"",pkid:"",cid:"",aid:"",osid:"1",pcid:191,appid:"",openid:"",unionid:"",pid:1,lid:1,areaid:1,adtype:1,pdata:{},uid:"",roleid:"",role:"",rolelevel:"",server:"",payType:31,payName:31,account:"",sdkver:"1.0.7",platform:"",appver:"1.0.0",xcx_appid:"",jump_appid:"",jump_path:"",gdt_vid:"",weixinadinfo:"",clue_token:"",ad_id:"",creative_id:""};export default class RYSDK{getPdata(){return new Promise((i,a)=>{wx.getSystemInfo({success:function(a){let o="android";common_param.osid=1,"devtools"==a.platform?o="PC":"ios"==a.platform&&(o="IOS",common_param.osid=2),common_param.platform=a.platform;let m=wx.getStorageSync("rydid");if(!m){m+="wx";var e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];for(let a=0;a<6;a++){var n=Math.ceil(35*Math.random());m+=e[n]}wx.setStorageSync("rydid",m)}common_param.xcx_appid=wx.getAccountInfoSync().miniProgram.appId,common_param.pdata.appver=common_param.appver,common_param.pdata.dev=a.model,common_param.pdata.devtype=o,common_param.pdata.did=m,common_param.pdata.idfa="",common_param.pdata.ip="",common_param.pdata.mno="",common_param.pdata.nm="",common_param.pdata.os=o,common_param.pdata.osid=common_param.osid,common_param.pdata.osver=a.system.split(" ")[1],common_param.pdata.screen=a.screenHeight+"*"+a.screenWidth,common_param.pdata.sdkver=common_param.sdkver,common_param.pdata=JSON.stringify(common_param.pdata),i({msg:"\u6210\u529f"})}})})}rySendMessage(a){let e=this;return new Promise((o,m)=>{common_param.uid?a?a.phone?e.ryRequest("https://message.cn.sy.iskywan.com/app/message/cqapi/ApiSendMessage.php",{appid:wx.getAccountInfoSync().miniProgram.appId,gid:common_param.gid,pkid:common_param.pkid,uid:common_param.uid,openid:common_param.openid,unionid:common_param.unionid,appver:common_param.appver,sdkver:common_param.sdkver,account:common_param.account,phone:a.phone,captcha_type:"update_phone"}).then(a=>{a.info.status?o({msg:"\u6210\u529f"}):m({msg:a.info.info})}):m({msg:"\u7f3a\u5c11\u624b\u673a"}):m({msg:"\u7f3a\u5c11\u6570\u636e"}):m({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryBindPhone(a){let e=this;return new Promise((o,m)=>{common_param.uid?a?a.phone?a.captcha?e.ryRequest("https://message.cn.sy.iskywan.com/app/message/api/ApiUpdatePhone.php",{appid:wx.getAccountInfoSync().miniProgram.appId,gid:common_param.gid,pkid:common_param.pkid,uid:common_param.uid,openid:common_param.openid,unionid:common_param.unionid,appver:common_param.appver,sdkver:common_param.sdkver,account:common_param.account,phone:a.phone,captcha:a.captcha,did:common_param.did}).then(a=>{a.info.status?o({msg:"\u6210\u529f"}):m({msg:a.info.info})}):m({msg:"\u7f3a\u5c11\u9a8c\u8bc1\u7801"}):m({msg:"\u7f3a\u5c11\u624b\u673a"}):m({msg:"\u7f3a\u5c11\u6570\u636e"}):m({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryCheckTurnTerminal(a){let e=this;return new Promise((o,m)=>{e.ryRequest("https://weixin.iskywan.com/data/api/ApiCheckTurnTerminal.php",{appid:wx.getAccountInfoSync().miniProgram.appId,gid:common_param.gid,pkid:common_param.pkid,uid:common_param.uid,openid:common_param.openid,unionid:common_param.unionid,appver:common_param.appver,roleid:common_param.roleid,rolelevel:common_param.rolelevel,server:common_param.server,sdkver:common_param.sdkver}).then(a=>{a.info.status?m({msg:"\u5931\u8d25"}):o({msg:"\u6210\u529f"})})})}ryCheckTurnTerminalMsg(){let m=this;return new Promise((o,a)=>{m.ryRequest("https://weixin.iskywan.com/data/api/ApiSetXcxBehavior.php",{appid:wx.getAccountInfoSync().miniProgram.appId,type:"turnTerminalMsg",unionid:common_param.unionid,openid:common_param.openid,ext:common_param.uid,sdkver:common_param.sdkver}).then(a=>{a.info.status&&wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u56de\u590d\u201c\u7ed1\u5b9a\u624b\u673a\u201d\u7ee7\u7eed",sendMessageImg:"https://staticbase.iskywan.com/h5/image/bingphone.png",success:function(a){},fail:function(a){}}),o({msg:"\u6210\u529f"})})})}ryCheckTurnPackage(a){let e=this;return new Promise((o,m)=>{e.ryRequest("https://weixin.iskywan.com/data/api/ApiCheckTurnPackage.php",{appid:wx.getAccountInfoSync().miniProgram.appId,gid:common_param.gid,pkid:common_param.pkid,uid:common_param.uid,openid:common_param.openid,unionid:common_param.unionid,appver:common_param.appver,sdkver:common_param.sdkver}).then(a=>{a.info.status?(common_param.jump_appid=a.info.info.jump_appid,common_param.jump_path=a.info.info.jump_path,wx.showModal({title:"\u5c0a\u656c\u7684\u73a9\u5bb6",content:a.info.info.msg,showCancel:!1,success:function(a){e.ryJump(common_param.jump_appid,common_param.jump_path)}}),o({msg:"\u4e0d\u7528\u8f6c"})):m({msg:"\u8f6c\u5305"})})})}ryCheckWord(a){let e=this;return new Promise((o,m)=>{e.ryRequest("https://weixin.iskywan.com/data/api/ApiCheckWord.php",{appid:wx.getAccountInfoSync().miniProgram.appId,version:a.version,scene:a.scene,content:a.content,openid:common_param.openid,unionid:common_param.unionid,appver:common_param.appver,sdkver:common_param.sdkver}).then(a=>{a.info.status?o({msg:"\u6210\u529f"}):m({msg:a.info.info})})})}ryInit(a){let m=this;common_param.gid=a.gid,common_param.pkid=a.pkid,common_param.appver=a.appver,common_param.aid=(wx.getLaunchOptionsSync().query.aid?wx.getLaunchOptionsSync().query:a).aid,common_param.cid=(wx.getLaunchOptionsSync().query.cid?wx.getLaunchOptionsSync().query:a).cid,common_param.appid=(wx.getLaunchOptionsSync().query.appid?wx.getLaunchOptionsSync().query:a).appid;a=wx.getLaunchOptionsSync().query.gdt_vid;var o=wx.getLaunchOptionsSync().query.weixinadinfo;var e=wx.getLaunchOptionsSync().query.clue_token;var n=wx.getLaunchOptionsSync().query.ad_id;var i=wx.getLaunchOptionsSync().query.creative_id;return!common_param.gdt_vid&&a&&(common_param.gdt_vid=a,wx.setStorageSync("gdt_vid",a)),!common_param.weixinadinfo&&o&&(common_param.weixinadinfo=o,wx.setStorageSync("weixinadinfo",o)),!common_param.clue_token&&e&&(common_param.clue_token=e,wx.setStorageSync("clue_token",e)),!common_param.ad_id&&n&&(common_param.ad_id=n,wx.setStorageSync("ad_id",n)),!common_param.creative_id&&i&&(common_param.creative_id=i,wx.setStorageSync("creative_id",i)),new Promise((o,a)=>{m.getPdata().then(a=>{m.logReport("open",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid}),o({msg:"\u6210\u529f"})}).catch(a=>{})})}ryLogin(){let i=this;return new Promise((e,n)=>{wx.login({success(a){a.code?(a=a.code,i.ryRequest("https://weixin.iskywan.com/data/api/ApiGetWxXcxOpenId.php",{appid:wx.getAccountInfoSync().miniProgram.appId,code:a}).then(a=>{a.info.status?(common_param.openid=a.info.info.openid,common_param.unionid=a.info.info.unionid,i.ryRequest("https://user.cn.sy.iskywan.com/app/main/api/ApiLoginThirdparty.php",{login_type:4,openid:common_param.openid,unionid:common_param.unionid,gameid:common_param.gid,pid:common_param.pid,cid:common_param.cid,aid:common_param.aid,pcid:common_param.pcid,areaid:common_param.areaid,adtype:common_param.adtype,pkid:common_param.pkid,pdata:common_param.pdata,sdkver:common_param.sdkver}).then(m=>{if(m.info.status){common_param.uid=m.info.info.uid,common_param.account=m.info.info.account,common_param.token=m.info.info.token,i.logWxReport({uid:common_param.uid,wx_appid:wx.getAccountInfoSync().miniProgram.appId,wx_openid:common_param.openid,gdt_vid:common_param.gdt_vid,clue_token:common_param.clue_token,ad_id:common_param.ad_id,creative_id:common_param.creative_id,weixinadinfo:common_param.weixinadinfo,type:"START_APP",sdkver:common_param.sdkver}),m.info.info.live2&&i.logWxReport({uid:common_param.uid,wx_appid:wx.getAccountInfoSync().miniProgram.appId,wx_openid:common_param.openid,gdt_vid:common_param.gdt_vid,clue_token:common_param.clue_token,ad_id:common_param.ad_id,creative_id:common_param.creative_id,weixinadinfo:common_param.weixinadinfo,type:"NextDayLive",sdkver:common_param.sdkver}),i.ryLoginLog();let o=!1;m.info.info.phone&&(o=!0),i.ryPopUp(1,common_param).then(a=>{e({info:{uid:m.info.info.uid,token:m.info.info.token,is_phone:o}})}).catch(a=>{n({mgs:a})})}else n({msg:m.info})}).catch(a=>{n({msg:a.errMsg})})):n({msg:a.info})}).catch(a=>{n({msg:a.errMsg})})):n({msg:"\u767b\u5f55\u5931\u8d25"})},fail(a){n({msg:a.errMsg})}})})}logWxReport(a){var o=this.paramJson();for(var m in o)""!=a[m]&&null!=a[m]&&null!=a[m]||(a[m]=o[m]);this.ryRequest("https://sadmarketcnsy.rongyao666.com/app/channelapi/?_c=weixinXcx&_a=index",a)}logReport(a,o){let m={pkid:common_param.pkid,pdata:common_param.pdata,rectime:Date.parse(new Date),lid:common_param.lid,appid:common_param.appid,pcid:common_param.pcid,type:a,gdata:JSON.stringify(o),roleid:common_param.roleid};m.sign=this.getSign(JSON.parse(common_param.pdata),o,m.rectime),this.ryRequest("https://api.basedata.sy.iskywan.com",m)}getSign(a,o,m){var e="";for(var n in a)""!==a[n]&&"undefined"!=a[n]||(a[n]=""),e+=n+"="+a[n]+"&";for(var n in o)""!==o[n]&&"undefined"!=o[n]||(o[n]=""),e+=n+"="+o[n]+"&";return utilMd5.hexMD5(e+""+m)}ryRequest(a,e={},n="POST",i={"Content-Type":"application/x-www-form-urlencoded"}){return new Promise((o,m)=>{wx.request({method:n,url:a,header:i,data:e,success(a){200===a.statusCode?o({info:a.data}):m({msg:a.statusCode})},fail(a){m({msg:a.errMsg})}})})}ryEntry(m){let e=this;return new Promise((a,o)=>{common_param.uid?m?m.hasOwnProperty("server")?m.hasOwnProperty("roleid")?m.hasOwnProperty("role")?(common_param.role=m.role,common_param.roleid=m.roleid,common_param.rolelevel=m.rolelevel,common_param.server=m.server,setInterval(function(){e.ryOnline()},3e5),e.ryPopUp(2,common_param),e.logReport("entry",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid,roleLevel:m.rolelevel,server:m.server,uid:common_param.uid}),a({msg:"\u6210\u529f"})):o({msg:"\u7f3a\u5c11\u89d2\u8272\u540d\u79f0"}):o({msg:"\u7f3a\u5c11\u89d2\u8272id"}):o({msg:"\u7f3a\u5c11\u533a\u670did"}):o({msg:"\u7f3a\u5c11\u6570\u636e"}):o({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryRole(m){let e=this;return new Promise((a,o)=>{common_param.uid?m?m.hasOwnProperty("server")?m.hasOwnProperty("role")?m.hasOwnProperty("roleid")?(common_param.roleid=m.roleid,e.logWxReport({uid:common_param.uid,wx_appid:wx.getAccountInfoSync().miniProgram.appId,wx_openid:common_param.openid,type:"CREATE_ROLE",gdt_vid:common_param.gdt_vid,weixinadinfo:common_param.weixinadinfo,clue_token:common_param.clue_token,ad_id:common_param.ad_id,creative_id:common_param.creative_id,sdkver:common_param.sdkver}),e.logReport("role",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid,role:m.role,server:m.server,uid:common_param.uid}),a({msg:"\u6210\u529f"})):o({msg:"\u7f3a\u5c11\u89d2\u8272id"}):o({msg:"\u7f3a\u5c11\u89d2\u8272\u540d"}):o({msg:"\u7f3a\u5c11\u533a\u670did"}):o({msg:"\u7f3a\u5c11\u6570\u636e"}):o({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryLevel(m){let e=this;return new Promise((a,o)=>{common_param.uid?m?m.hasOwnProperty("server")?m.hasOwnProperty("role")?m.hasOwnProperty("roleid")?m.hasOwnProperty("rolelevel")?(common_param.roleid=m.roleid,e.logReport("level",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid,role:m.role,roleLevel:m.rolelevel,server:m.server,uid:common_param.uid}),a({msg:"\u6210\u529f"})):o({msg:"\u7f3a\u5c11\u89d2\u8272\u7b49\u7ea7"}):o({msg:"\u7f3a\u5c11\u89d2\u8272id"}):o({msg:"\u7f3a\u5c11\u89d2\u8272\u540d"}):o({msg:"\u7f3a\u5c11\u533a\u670did"}):o({msg:"\u7f3a\u5c11\u6570\u636e"}):o({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryOnline(){common_param.uid&&this.logReport("online",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid,role:common_param.role,roleLevel:common_param.rolelevel,server:common_param.server,uid:common_param.uid})}ryLoginLog(){common_param.uid&&this.logReport("login",{adtype:common_param.adtype,aid:common_param.aid,areaId:common_param.areaid,cid:common_param.cid,game:common_param.gid,pid:common_param.pid,uid:common_param.uid})}ryPayConfirm(){let m=this;return new Promise((o,a)=>{m.ryRequest("https://weixin.iskywan.com/data/api/ApiSetXcxBehavior.php",{appid:wx.getAccountInfoSync().miniProgram.appId,type:"turnPayData",unionid:common_param.unionid,openid:common_param.openid,ext:common_param.uid,sdkver:common_param.sdkver}).then(a=>{a.info.status&&wx.showModal({title:"\u5145\u503c\u6559\u7a0b",content:"\u5373\u5c06\u8df3\u8f6c\u5b98\u65b9[\u5ba2\u670d\u4f1a\u8bdd]\u5145\u503c\u7ed9\u5ba2\u670d[\u56de\u590d\u5145\u503c]\u83b7\u53d6\u5145\u503c\u94fe\u63a5",showCancel:!1,success:function(a){wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u56de\u590d\u201c\u5145\u503c\u201d\u7ee7\u7eed",sendMessageImg:"https://staticbase.iskywan.com/h5/image/wxxcx.png",success:function(a){},fail:function(a){wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u56e0\u7248\u672c\u9650\u5236\uff0c\u987b\u901a\u8fc7[\u5ba2\u670d\u4f1a\u8bdd]\u5145\u503c\uff0c\u8bf7\u60a8\u8c05\u89e3",cancelText:"\u6715\u77e5\u9053\u4e86",confirmText:"\u524d\u5f80\u5145\u503c",success:function(a){a.confirm&&wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u56de\u590d\u201c\u5145\u503c\u201d\u7ee7\u7eed",sendMessageImg:"https://staticbase.iskywan.com/h5/image/wxxcx.png",success:function(a){},fail:function(a){}})}})}})}}),o({msg:"\u6210\u529f"})})})}ryJump(a,o){wx.navigateToMiniProgram({appId:a,path:o,envVersion:"release",success(a){console.log(a)},fail(a){console.log(a)}})}ryMidasPayment(o,m){let e=this;let n=common_param;n.money=m.money,n.serverid=m.server,wx.requestMidasPayment({mode:o.info.info.gameConf.mode,env:o.info.info.gameConf.env,offerId:o.info.info.gameConf.offerId,currencyType:o.info.info.gameConf.currencyType,platform:o.info.info.gameConf.platform,buyQuantity:o.info.info.gameConf.buyQuantity,zoneId:o.info.info.gameConf.zone_id,success:function(a){e.logWxReport({uid:common_param.uid,wx_appid:wx.getAccountInfoSync().miniProgram.appId,wx_openid:common_param.openid,type:"PURCHASE",gdt_vid:common_param.gdt_vid,clue_token:common_param.clue_token,ad_id:common_param.ad_id,creative_id:common_param.creative_id,weixinadinfo:common_param.weixinadinfo,value:100*m.money,sdkver:common_param.sdkver}),e.ryRequest("https://pay.cn.sy.iskywan.com/app/main/api/ApiMobilePayXcx.php",{game:common_param.gid,lid:common_param.lid,pid:common_param.pid,uid:common_param.uid,areaid:common_param.areaid,pkid:common_param.pkid,token:common_param.token,money:m.money,appid:common_param.appid,pcid:common_param.pcid,aid:common_param.aid,account:common_param.account,cid:common_param.cid,order:o.info.info.orderID,payName:common_param.payName,payType:common_param.payType,openid:common_param.openid,unionid:common_param.unionid,sdkver:common_param.sdkver}).then(a=>{}).catch(a=>{}),e.ryPopUp(4,n).then(a=>{}).catch(a=>{console.log(a.msg)})},fail:function(a){console.log(a)}})}ryPay(n){let i=this;return new Promise((m,e)=>{if(common_param.uid)if(n)if(n.hasOwnProperty("server"))if(n.hasOwnProperty("role"))if(n.hasOwnProperty("roleid"))if(n.hasOwnProperty("goodsId"))if(n.hasOwnProperty("goodsName"))if(n.hasOwnProperty("goodsNum"))if(n.hasOwnProperty("gameOrder"))if(n.hasOwnProperty("money")){let a=common_param;a.money=n.money,a.serverid=n.server,i.ryPopUp(3,a).then(a=>{i.ryCheckTurnPackage({}).then(a=>{}).catch(a=>{i.ryRequest("https://manage.cn.sy.iskywan.com/app/data/api/ApiGetThPayCtl.php",{pid:common_param.pid,gid:common_param.gid,osid:common_param.osid,pkid:common_param.pkid,rolelevel:n.rolelevel,uid:common_param.uid,sdkver:common_param.sdkver,appver:common_param.appver,is_xcx:1}).then(a=>{var o;a.info.status?1==a.info.info.type?i.ryRequest("https://pay.cn.sy.iskywan.com/app/main/api/ApiSetPayData.php",{xcx_appid:common_param.xcx_appid,openid:common_param.openid,unionid:common_param.unionid,server:n.server,game:common_param.gid,pdata:common_param.pdata,role:n.role,goodsId:n.goodsId,lid:common_param.lid,goods:n.goodsName,pid:common_param.pid,uid:common_param.uid,vipLevel:common_param.vipLevel,areaid:common_param.areaid,role_id:n.roleid,atype:common_param.adtype,roleLevel:n.rolelevel,payName:common_param.payName,payType:common_param.payType,goodsName:n.goodsName,goodsNum:n.goodsNum,ext:n.ext,pkid:common_param.pkid,token:common_param.token,money:n.money,gameOrder:n.gameOrder,appid:common_param.appid,pcid:common_param.pcid,aid:common_param.aid,account:common_param.account,cid:common_param.cid,sdkver:common_param.sdkver}).then(a=>{i.ryPayConfirm(),m({msg:"\u6210\u529f"})}).catch(a=>{e({msg:a.msg})}):(o=a.info.info.appid,a=a.info.info.paytype,i.ryRequest("https://pay.cn.sy.iskywan.com/app/main/api/ApiMobilePay.php",{subAppId:o,server:n.server,game:common_param.gid,pdata:common_param.pdata,role:n.role,goodsId:n.goodsId,lid:common_param.lid,goods:n.goodsName,pid:common_param.pid,uid:common_param.uid,vipLevel:common_param.vipLevel,areaid:common_param.areaid,role_id:n.roleid,atype:common_param.adtype,roleLevel:n.rolelevel,payName:a,payType:a,goodsName:n.goodsName,goodsNum:n.goodsNum,ext:n.ext,pkid:common_param.pkid,token:common_param.token,money:n.money,gameOrder:n.gameOrder,appid:common_param.appid,pcid:common_param.pcid,aid:common_param.aid,account:common_param.account,cid:common_param.cid,xcx_appid:common_param.xcx_appid,openid:common_param.openid,unionid:common_param.unionid,sdkver:common_param.sdkver}).then(a=>{i.ryJump(a.info.info.subAppId,a.info.info.path),m({msg:"\u6210\u529f"})}).catch(a=>{e({msg:a.msg})})):i.ryRequest("https://pay.cn.sy.iskywan.com/app/main/api/ApiMobilePay.php",{server:n.server,game:common_param.gid,pdata:common_param.pdata,role:n.role,goodsId:n.goodsId,lid:common_param.lid,goods:n.goodsName,pid:common_param.pid,uid:common_param.uid,vipLevel:common_param.vipLevel,areaid:common_param.areaid,role_id:n.roleid,atype:common_param.adtype,roleLevel:n.rolelevel,payName:common_param.payName,payType:common_param.payType,goodsName:n.goodsName,goodsNum:n.goodsNum,ext:n.ext,pkid:common_param.pkid,token:common_param.token,money:n.money,gameOrder:n.gameOrder,appid:common_param.appid,pcid:common_param.pcid,aid:common_param.aid,account:common_param.account,cid:common_param.cid,xcx_appid:common_param.xcx_appid,openid:common_param.openid,unionid:common_param.unionid,sdkver:common_param.sdkver}).then(o=>{o.info.status?i.ryRequest("https://pay.cn.sy.iskywan.com/app/main/api/ApiGetTodayMoney.php",{uid:common_param.uid,xcx_appid:common_param.xcx_appid,openid:common_param.openid,unionid:common_param.unionid,sdkver:common_param.sdkver}).then(a=>{a.info.status?wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:a.info.info.msg,showCancel:!1,success:function(a){i.ryMidasPayment(o,n),m({msg:"\u6210\u529f"})}}):(i.ryMidasPayment(o,n),m({msg:"\u6210\u529f"}))}).catch(a=>{e({msg:a.msg})}):e({msg:o.info})}).catch(a=>{e({msg:a.msg})})}).catch(a=>{e({msg:a.msg})})})}).catch(a=>{e({msg:a})})}else e({msg:"\u7f3a\u5c11\u5546\u54c1\u91d1\u989d"});else e({msg:"\u7f3a\u5c11\u5546\u54c1\u8ba2\u5355\u53f7"});else e({msg:"\u7f3a\u5c11\u5546\u54c1\u6570\u91cf"});else e({msg:"\u7f3a\u5c11\u5546\u54c1\u540d\u79f0"});else e({msg:"\u7f3a\u5c11\u5546\u54c1id"});else e({msg:"\u7f3a\u5c11\u89d2\u8272id"});else e({msg:"\u7f3a\u5c11\u89d2\u8272\u540d"});else e({msg:"\u7f3a\u5c11\u533a\u670did"});else e({msg:"\u7f3a\u5c11\u6570\u636e"});else e({msg:"\u8bf7\u5148\u767b\u5f55"})})}ryPopUp(d,o){let c=this;let m={};let a=new Date;let e=[];let n=["uid","gid","pkid","appver","sdkver","openid","unionid","osid"];2!=d&&3!=d&&4!=d||(n.push("roleid"),n.push("rolelevel"),3!=d&&4!=d||(n.push("serverid"),n.push("money"))),m.type=d,n.forEach(function(a){0==o.hasOwnProperty(a)?e.push(a):m[a]=o[a]});return new Promise((p,r)=>{if(0<e.length){let o="";e.forEach(function(a){o=o+a+"  "}),r({msg:"\u7f3a\u5c11\u53c2\u6570\uff1a"+o})}else 1==localStorage.getItem("is_pop_up_"+d+"_"+a.getFullYear()+a.getMonth()+a.getDate())?p({msg:"\u4eca\u65e5\u5df2\u5f39\u51fa\u8fc7"}):(c.ryRequest("https://weixin.iskywan.com/data/api/ApiCheckTurnPackage2.php",m).then(a=>{console.log(a);var o=a.info.info.model;var m=a.info.info.msg;var e=a.info.info.jump_appid;var n=a.info.info.jump_path;let i=!0;a.info.status?(console.log("\u5f3a\u5236\u6a21\u5f0f"),2!=d&&4!=d||(i=!1),2==d?(a=a.info.info.time,setTimeout(c.ryPopUpMode(d,o,m,e,n,i).then(a=>{p(a)}).catch(a=>{r(a)}),1e3*a*60)):(c.ryPopUpMode(d,o,m,e,n,i).then(a=>{p(a)}).catch(a=>{r(a)}),0==i&&p({msg:"\u975e\u5f3a\u5236\u6a21\u5f0f\u5df2\u7ecf\u6267\u884c"}))):p({msg:"\u65e0\u9700\u5f39\u7a97"})}).catch(a=>{r({msg:a})}),2==d&&p({msg:"\u8fdb\u5165\u6e38\u620f\u5f02\u6b65\u5f39\u7a97\u6210\u529f"}))})}ryPopUpMode(a,o,e,n,i,p=!0){let r=this;let d=!1;return 2==o&&(d=!0,localStorage.setItem("is_pop_up_"+a+"_"+date.getFullYear()+date.getMonth()+date.getDate(),!0)),new Promise((o,m)=>{new Date;wx.showModal({title:"\u63d0\u793a",content:e,showCancel:d,success:function(a){1==a.confirm?(r.ryJump(n,i),m({msg:"\u8df3\u8f6c\u4e86"})):o({msg:"\u70b9\u51fb\u53d6\u6d88"})}}),1!=p&&o({msg:"\u5df2\u7ecf\u5f02\u6b65\u5f39\u51fa"})})}paramJson(){let a={};let o=[];var m;for(var e in wx.getLaunchOptionsSync().query)o.unshift(e);var n=[...new Set(["gdt_vid","weixinadinfo","clue_token","ad_id","creative_id",...o])];for(var i in n)m=n[i],i=null==wx.getLaunchOptionsSync().query[n[i]]?wx.getStorageSync(n[i]):wx.getLaunchOptionsSync().query[n[i]],a[m]=i;return wx.setStorageSync("paramJson",JSON.stringify(a)),a}shareMsg(){const a=this;let n;let i;let p={};return["gid","pkid","osid","appver","sdkver","uid"].forEach(function(a,o){p[a]=common_param[a]}),new Promise((m,e)=>{a.ryRequest("https://weixin.iskywan.com/data/api/ApiGetShareData.php",p).then(a=>{var o;a.info.status?(n=a.info.info.title,i=a.info.info.img_url,o={title:n,img_url:i},m({msg:o})):e({msg:a.info.info})}).catch(a=>{e({msg:"\u8bf7\u6c42\u5931\u8d25"})})})}}