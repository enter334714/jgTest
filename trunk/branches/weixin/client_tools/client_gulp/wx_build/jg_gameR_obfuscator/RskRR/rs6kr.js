var I=wx.$X;require(I[37072]);var config={game_id:I[37073],game_pkg:I[37074],partner_label:I[37075],partner_id:I[37076],game_ver:I[37077],platId:1e3,gameId:289,channelVer:I[37078],mode:2,is_auth:!0,tmpId:{1:I[37079],2:I[37080],3:I[37081]}};window.config=config;var rUYESF=rUEFSY();var HOST=I[37082];var rUYEFS=null;var rUESFY=null;var partner_data={};function rUEFSY(){var l={};return{order_data:{},init:function(e,r){e=e&&e.game_ver?e.game_ver:0;console.log(I[37083]);var t=this;var a;a=wx.getStorageSync(I[37084])?0:(a=t.uuid(16,32),wx.setStorageSync(I[37084],a),1),wx.getStorageSync(I[37085])||(o=t.uuid(16,32),wx.setStorageSync(I[37085],o));var o=wx.getLaunchOptionsSync();var n=o.scene||"";a&&o.query&&o.query.ad_code&&wx.setStorageSync(I[37086],o.query.ad_code),t.log(I[1908],{install:a,scene:n});ddtSDKPlat.init({platId:config.platId,gameId:config.gameId,channelVer:config.channelVer,mode:config.mode},function(e,r){switch(e){case I[37087]:console.log(I[37088],e,r);break;case I[37089]:console.log(I[37090],e,r);break;case I[37091]:console.log(I[37092],e,r),t.do_login(r);break;case I[37093]:console.log(I[37094],e,r),l[I[301]]&&l[I[301]](1,{errMsg:r.msg});break;case I[37095]:console.log(I[37096],e,r);break;case I[37097]:console.log(I[37098],e,r),l[I[390]]&&l[I[390]](1,{errMsg:r.errMsg})}},!0),wx.showShareMenu({withShareTicket:!0}),console.log(I[37099]+ddtSDKPlat.version);var i=o.query&&o.query.invite?o.query.invite:"";o=o.query&&o.query.invite_type?o.query.invite_type:"";i&&(rUESFY={invite:i,invite_type:o,is_new:a,scene:n}),e&&this.checkGameVersion(e,function(e){r&&r(e)})},login:function(e,r){console.log(I[37100]),l[I[301]]=typeof r==I[612]?r:null},do_login:function(e){var t=this;partner_data={uid:e.uid,gameToken:e.gameToken,time:e.time,sign:e.sign};var r=t.getPublicData();if(r[I[37101]]=1,r[I[37102]]=JSON.stringify(partner_data),rUESFY&&typeof rUESFY==I[609])for(var a in rUESFY)r[a]=rUESFY[a];wx.request({url:I[7267]+HOST+I[37103],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:r,success:function(e){if(console.log(I[37104]),console.log(e),200===e.statusCode){e=e.data;if(e.state){try{wx.setStorageSync(I[37105],e.data.sdk_token),wx.setStorageSync(I[37106],e.data.user_id),wx.setStorageSync(I[37107],e.data.username),e.data.ext&&wx.setStorageSync(I[37108],e.data.ext)}catch(e){}var r={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};l[I[301]]&&l[I[301]](0,r)}else l[I[301]]&&l[I[301]](1,{errMsg:e.msg});t.getShareInfo(I[37109],function(e){console.log(I[37110]),wx.onShareAppMessage(function(){return t.logStartShare(I[37109]),{title:e.title,imageUrl:e.img,query:e.query}})})}else l[I[301]]&&l[I[301]](1,{errMsg:I[37111]})}})},share:function(e){l[I[414]]=typeof callback==I[612]?callback:null;var r=e.type||I[414];console.log(I[37112]+r);var t=this;this.getShareInfo(r,function(e){t.logStartShare(r),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var r=wx.getStorageSync(I[37105]);wx.request({url:I[7267]+HOST+I[37113],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:r,server_id:rUYEFS?rUYEFS.server_id:"",role_id:rUYEFS?rUYEFS.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,t){console.log(I[37114]);wx.getStorageSync(I[37105]);wx.request({url:I[7267]+HOST+I[37115],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var r;console.log(I[37116]),console.log(e),200==e.statusCode&&(r=e.data).state?t&&t(r.data):t&&t({develop:0})}})},getShareInfo:function(e,r){console.log(I[37117]);var t=wx.getStorageSync(I[37105]);wx.request({url:I[7267]+HOST+I[37118],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,type:e,server_id:rUYEFS?rUYEFS.server_id:"",role_id:rUYEFS?rUYEFS.role_id:"",no_log:1},success:function(e){console.log(I[37119]),console.log(e),200==e.statusCode?(e=e.data).state?r&&r(e.data):l[I[414]]&&l[I[414]](1,{errMsg:I[37120]+e.msg}):l[I[414]]&&l[I[414]](1,{errMsg:I[37121]})}})},updateShare:function(e,r,t,a,o,n){console.log(I[37122]);var i=wx.getStorageSync(I[37105]);wx.request({url:I[7267]+HOST+I[37123],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:r,is_new:t,role_id:a,sever_id:o,scene:n},success:function(e){console.log(I[37124]),console.log(e)}})},msgCheck:function(e,r){console.log(I[37125]);var t=wx.getStorageSync(I[37105]);wx.request({url:I[7267]+HOST+I[37126]+config.partner_id+"/"+config.game_pkg,method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,content:e,gameToken:partner_data.gameToken,uid:partner_data.uid,channelVer:config.channelVer,gameId:config.gameId,platId:config.platId},success:function(e){console.log(I[37127]),console.log(e),r&&r(e)}})},pay:function(e,r){this.startPay(e,r)},startPay:function(e,r){console.log(I[37128]),console.log(e);var t=this;l[I[390]]=typeof r==I[612]?r:null;r=wx.getStorageSync(I[37105]);var a=wx.getStorageSync(I[37108]);var o;r||a?(o=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:r,session_key:a,platform:o.platform},t.order_data=e,(r=t.getPublicData())[I[37130]]=JSON.stringify(e),r[I[37101]]=1,wx.request({url:I[7267]+HOST+I[37131],method:I[263],dataType:I[2170],header:{"content-type":I[461]},data:r,success:function(e){var r;console.log(I[37132]),console.log(e),200==e.statusCode?""==(e=e.data).data.ext?e.state&&e.data.pay_data&&""==e.data.ext?(console.log(I[37133]+JSON.stringify(e.data.pay_data)),r={billNo:e.data.pay_data.billNo,amount:e.data.pay_data.amount,serverId:e.data.pay_data.serverId,roleId:e.data.pay_data.roleId,roleName:e.data.pay_data.roleName,roleLevel:e.data.pay_data.roleLevel,subject:e.data.pay_data.subject,productDesc:e.data.pay_data.productDesc,extraInfo:e.data.pay_data.extraInfo},ddtSDKPlat.pay(r)):t.extDo({ext1:e.data.ext,ext2:e.data.pay_data}):l[I[390]]&&l[I[390]](1,{errMsg:e.errMsg}):l[I[301]]&&l[I[301]](1,{errMsg:I[37111]})}})):l[I[390]]&&l[I[390]](1,{errMsg:I[37129]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:I[37134]+e.ext2.extraInfo+I[37135]+e.ext2.amount,extraData:{},envVersion:I[3485],success(e){}})},logCreateRole:function(e){var r=wx.getStorageSync(I[37106]);var t=wx.getStorageSync(I[37107]);var a={};a[I[37136]]=r,a[I[37137]]=t,a[I[17768]]=e.roleid,a[I[37138]]=e.rolelevel,a[I[37139]]=e.rolename,a[I[25]]=e.serverid,e.roleid&&e.serverid&&(rUYEFS={role_id:e.roleid,server_id:e.serverid}),this.log(I[618],a);r={roleLevel:e.rolelevel+"",roleId:e.roleid+"",roleName:e.rolename,serverName:e.servername,serverId:e.serverid+""};ddtSDKPlat.submitData(I[14769],r)},logEnterGame:function(e,r){var t=wx.getStorageSync(I[37106]);var a=wx.getStorageSync(I[37107]);var o={};o[I[37136]]=t,o[I[37137]]=a,o[I[17768]]=e.roleid,o[I[37138]]=e.rolelevel,o[I[37139]]=e.rolename,o[I[25]]=e.serverid,e.roleid&&e.serverid&&(rUYEFS={role_id:e.roleid,server_id:e.serverid}),this.log(I[1894],o);t={roleLevel:e.rolelevel,roleId:e.roleid,roleName:e.rolename,serverName:e.servername,serverId:e.serverid};ddtSDKPlat.submitData(I[18909],t),rUESFY&&this.updateShare(rUESFY.invite,rUESFY.invite_type,rUESFY.is_new,e.roleid,e.serverid,rUESFY.scene)},logRoleUpLevel:function(e,r){var t=wx.getStorageSync(I[37106]);var a=wx.getStorageSync(I[37107]);this.log(I[37140],e);var o={};o[I[37136]]=t,o[I[37137]]=a,o[I[17768]]=e.roleid,o[I[37138]]=e.rolelevel,o[I[37139]]=e.rolename,o[I[25]]=e.serverid,e.roleid&&e.serverid&&(rUYEFS={role_id:e.roleid,server_id:e.serverid,role_level:e.rolelevel,role_createtime:e.rolecreatetime});t={roleLevel:e.rolelevel,roleId:e.roleid,roleName:e.rolename,serverName:e.servername,serverId:e.serverid,rolecreatetime:e.rolecreatetime,vipLevel:"",power:"",roleSex:"",partyId:"",partyName:""};ddtSDKPlat.submitData(I[37141],t)},subscribeMessage:function(e,r){console.log(I[37142]+e),l[I[427]]=typeof r==I[612]?r:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(I[37143]),console.log(e),l[I[427]]&&l[I[427]](e)},fail(e){console.log(I[37144]),console.log(e),l[I[427]]&&l[I[427]](e)}})},weiduanHelper:function(){console.log(I[37145]),ddtSDKPlat.jump()},uuid:function(e,r){var t=I[37146].split("");var a,o=[];var n;if(e=e||t.length,r)for(a=0;a<r;a++)o[a]=t[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",a=0;a<36;a++)o[a]||(n=0|16*Math.random(),o[a]=t[19==a?3&n|8:n]);return o.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var r=wx.getStorageSync(I[37084]);var t=wx.getStorageSync(I[37085]);var a=wx.getStorageSync(I[37086]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:a,uuid:r,idfv:t,dname:e.model,mac:I[37147],net_type:0==e.wifiSignal?I[37148]:I[37149],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==I[124]?1:2}},log:function(e,r){var t=this.getPublicData();for(var a in r)t[a]=r[a];console.log(I[37150]+e),console.log(t),wx.request({url:I[7267]+HOST+I[37151]+e+I[37152]+encodeURIComponent(JSON.stringify(t))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()}}}function run(e,r,t){e in rUYESF&&rUYESF[e](r,t)}exports.init=function(e,r){run(I[276],e,r)},exports.login=function(e){run(I[301],"",e)},exports.pay=function(e,r){run(I[390],e,r)},exports.openService=function(){run(I[415])},exports.logCreateRole=function(e,r,t,a,o){run(I[405],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o})},exports.logEnterGame=function(e,r,t,a,o,n,i){run(I[408],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o,rolecreatetime:n},i)},exports.logRoleUpLevel=function(e,r,t,a,o,n,i){run(I[411],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o,rolecreatetime:n},i)},exports.share=function(e){run(I[414],{type:e})},exports.subscribeMessage=function(e,r){run(I[427],e,r)},exports.msgCheck=function(e,r){run(I[233],e,r)},exports.downloadClient=function(){run(I[37153])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(I[37154])},exports.weiduanHelper=function(){run(I[417])};