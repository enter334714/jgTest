var Laya=window.Laya=function(F$H,F$e){var F$g={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(F$e,F$F){return 1==arguments.length?F$g.__presubstr.call(this,F$e):F$g.__presubstr.call(this,F$e,0<F$F?F$F:this.length+F$F)},__init:function(F$e){F$e.forEach(function(F$e){F$e.__init$&&F$e.__init$()})},__isClass:function(F$e){return F$e&&(F$e.__isclass||F$e==Object||F$e==String||F$e==Array)},__newvec:function(F$e,F$F){var F$a=[];F$a.length=F$e;for(var F$o=0;F$o<F$e;F$o++)F$a[F$o]=F$F;return F$a},__extend:function(F$e,F$F){for(var F$a in F$F)if(F$F.hasOwnProperty(F$a)){var F$o=Object.getOwnPropertyDescriptor(F$F,F$a),F$E=F$o.get,F$s=F$o.set;F$E||F$s?F$E&&F$s?Object.defineProperty(F$e,F$a,F$o):(F$E&&Object.defineProperty(F$e,F$a,F$E),F$s&&Object.defineProperty(F$e,F$a,F$s)):F$e[F$a]=F$F[F$a]}function F$Y(){F$g.un(this,"constructor",F$e)}F$Y.prototype=F$F.prototype,F$e.prototype=new F$Y,F$g.un(F$e.prototype,"__imps",F$g.__copy({},F$F.prototype.__imps))},__copy:function(F$e,F$F){if(!F$F)return null;for(var F$a in F$e=F$e||{},F$F)F$e[F$a]=F$F[F$a];return F$e},__package:function(F$e,F$F){if(!F$g.__packages[F$e]){F$g.__packages[F$e]=!0;var F$a=F$H,F$o=F$e.split(".");if(1<F$o.length)for(var F$E=0,F$s=F$o.length-1;F$E<F$s;F$E++){var F$Y=F$a[F$o[F$E]];F$a=F$Y||(F$a[F$o[F$E]]={})}F$a[F$o[F$o.length-1]]||(F$a[F$o[F$o.length-1]]=F$F||{})}},__hasOwnProperty:function(F$e,F$F){return F$F=F$F||this,Object.hasOwnProperty.call(F$F,F$e)||function F$e(F$F,F$a){if(Object.hasOwnProperty.call(F$a.prototype,F$F))return!0;var F$o=F$a.prototype.__super;return null==F$o?null:F$e(F$F,F$o)}(F$e,F$F.__class)},__typeof:function(F$e,F$F){if(!F$e||!F$F)return!1;if(F$F===String)return"string"==typeof F$e;if(F$F===Number)return"number"==typeof F$e;if(F$F.__interface__)F$F=F$F.__interface__;else if("string"!=typeof F$F)return F$e instanceof F$F;return F$e.__imps&&F$e.__imps[F$F]||F$e.__class==F$F},__as:function(F$e,F$F){return this.__typeof(F$e,F$F)?F$e:null},__int:function(F$e){return F$e?parseInt(F$e):0},interface:function(F$e,F$F){F$g.__package(F$e,{});var F$a=F$g.__internals,F$o=F$a[F$e]=F$a[F$e]||{self:F$e};if(F$F){var F$E=F$F.split(",");F$o.extend=[];for(var F$s=0;F$s<F$E.length;F$s++){var F$Y=F$E[F$s];F$a[F$Y]=F$a[F$Y]||{self:F$Y},F$o.extend.push(F$a[F$Y])}}var F$_=F$H,F$R=F$e.split(".");for(F$s=0;F$s<F$R.length-1;F$s++)F$_=F$_[F$R[F$s]];F$_[F$R[F$R.length-1]]={__interface__:F$e}},class:function(F$e,F$F,F$a,F$o){if(F$a&&F$g.__extend(F$e,F$a),F$F)if(F$g.__package(F$F,F$e),F$g.__classmap[F$F]=F$e,0<F$F.indexOf(".")){if(0==F$F.indexOf("laya.")){var F$E=F$F.split(".");F$o=F$o||F$E[F$E.length-1],F$g[F$o]&&console.log("Warning!,this class["+F$o+"] already exist:",F$g[F$o]),F$g[F$o]=F$e}}else"Main"==F$F?F$H.Main=F$e:"MainWX"==F$F?F$H.MainWX=F$e:(F$g[F$F]&&console.log("Error!,this class["+F$F+"] already exist:",F$g[F$F]),F$g[F$F]=F$e);var F$s=F$g.un,F$Y=F$e.prototype;F$s(F$Y,"hasOwnProperty",F$g.__hasOwnProperty),F$s(F$Y,"__class",F$e),F$s(F$Y,"__super",F$a),F$s(F$Y,"__className",F$F),F$s(F$e,"__super",F$a),F$s(F$e,"__className",F$F),F$s(F$e,"__isclass",!0),F$s(F$e,"super",function(F$e){this.__super.call(F$e)})},imps:function(F$e,F$F){if(!F$F)return null;var F$E=F$e.__imps||F$g.un(F$e,"__imps",{});function F$s(F$e){var F$F,F$a;if((F$F=F$g.__internals[F$e])&&(F$E[F$e]=!0,F$a=F$F.extend))for(var F$o=0;F$o<F$a.length;F$o++)F$s(F$a[F$o].self)}for(var F$a in F$F)F$s(F$a)},superSet:function(F$e,F$F,F$a,F$o){var F$E=F$e.prototype["_$set_"+F$a];F$E&&F$E.call(F$F,F$o)},superGet:function(F$e,F$F,F$a){var F$o=F$e.prototype["_$get_"+F$a];return F$o?F$o.call(F$F):null},getset:function(F$e,F$F,F$a,F$o,F$E){F$e?(F$o&&(F$F["_$GET_"+F$a]=F$o),F$E&&(F$F["_$SET_"+F$a]=F$E)):(F$o&&F$g.un(F$F,"_$get_"+F$a,F$o),F$E&&F$g.un(F$F,"_$set_"+F$a,F$E)),F$o&&F$E?Object.defineProperty(F$F,F$a,{get:F$o,set:F$E,enumerable:!1,configurable:!0}):(F$o&&Object.defineProperty(F$F,F$a,{get:F$o,enumerable:!1,configurable:!0}),F$E&&Object.defineProperty(F$F,F$a,{set:F$E,enumerable:!1,configurable:!0}))},static:function(F$a,F$o){for(var F$E=0,F$e=F$o.length;F$E<F$e;F$E+=2)if("length"==F$o[F$E])F$a.length=F$o[F$E+1].call(F$a);else{function F$F(){var F$F=F$o[F$E],F$e=F$o[F$E+1];Object.defineProperty(F$a,F$F,{get:function(){return delete this[F$F],this[F$F]=F$e.call(this)},set:function(F$e){delete this[F$F],this[F$F]=F$e},enumerable:!0,configurable:!0})}F$F()}},un:function(F$e,F$F,F$a){return F$a||(F$a=F$e[F$F]),F$g.__propun.value=F$a,Object.defineProperty(F$e,F$F,F$g.__propun),F$a},uns:function(F$F,F$e){F$e.forEach(function(F$e){F$g.un(F$F,F$e)})}};return F$H.console=F$H.console||{log:function(){}},F$H.trace=F$H.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),F$g}(window,document);!function(F$e,F$F,F$a){F$a.un,F$a.uns,F$a.static,F$a.class,F$a.getset,F$a.__newvec}(window,document,Laya),function(F$Y,F$F,F$b){F$b.un,F$b.uns;var F$R=F$b.static,F$g=F$b.class,F$I=F$b.getset;F$b.__newvec;F$b.interface("laya.runtime.IMarket"),F$b.interface("laya.filters.IFilter"),F$b.interface("laya.display.ILayout"),F$b.interface("laya.resource.IDispose"),F$b.interface("laya.runtime.IPlatform"),F$b.interface("laya.resource.IDestroy"),F$b.interface("laya.runtime.IConchNode"),F$b.interface("laya.filters.IFilterAction"),F$b.interface("laya.runtime.ICPlatformClass"),F$b.interface("laya.resource.ICreateResource"),F$b.interface("laya.runtime.IConchRenderObject"),F$b.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var F$G=function(){function F$s(){}return F$g(F$s,"laya.utils.RunDriver"),F$s.FILTER_ACTIONS=[],F$s.pixelRatio=-1,F$s._charSizeTestDiv=null,F$s.now=function(){return Date.now()},F$s.getWindow=function(){return F$Y},F$s.getPixelRatio=function(){if(F$s.pixelRatio<0){var F$e=F$k.context,F$F=F$e.backingStorePixelRatio||F$e.webkitBackingStorePixelRatio||F$e.mozBackingStorePixelRatio||F$e.msBackingStorePixelRatio||F$e.oBackingStorePixelRatio||F$e.backingStorePixelRatio||1;(F$s.pixelRatio=(F$k.window.devicePixelRatio||1)/F$F)<1&&(F$s.pixelRatio=1)}return F$s.pixelRatio},F$s.getIncludeStr=function(F$e){return null},F$s.createShaderCondition=function(F$e){var F$F="(function() {return "+F$e+";})";return F$b._runScript(F$F)},F$s.fontMap=[],F$s.measureText=function(F$e,F$F){var F$a=F$s.hanzi.test(F$e);if(F$a&&F$s.fontMap[F$F])return F$s.fontMap[F$F];var F$o=F$k.context;F$o.font=F$F;var F$E=F$o.measureText(F$e);return F$E||(F$E={width:16,height:16}),F$a&&(F$s.fontMap[F$F]=F$E),F$E},F$s.getWebGLContext=function(F$e){},F$s.beginFlush=function(){},F$s.endFinish=function(){},F$s.addToAtlas=null,F$s.flashFlushImage=function(F$e){},F$s.drawToCanvas=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$ye.create("2D"),F$_=new F$z(F$a,F$o,F$Y);return F$T.renders[F$F]._fun(F$e,F$_,F$E,F$s),F$Y},F$s.createParticleTemplate2D=null,F$s.createGLTextur=null,F$s.createWebGLContext2D=null,F$s.changeWebGLSize=function(F$e,F$F){},F$s.createRenderSprite=function(F$e,F$F){return new F$T(F$e,F$F)},F$s.createFilterAction=function(F$e){return new F$y},F$s.createGraphics=function(){return new F$O},F$s.clear=function(F$e){F$Z._context.ctx.clear()},F$s.cancelLoadByUrl=function(F$e){},F$s.clearAtlas=function(F$e){},F$s.isAtlas=function(F$e){return!1},F$s.addTextureToAtlas=function(F$e){},F$s.getTexturePixels=function(F$e,F$F,F$a,F$o,F$E){return null},F$s.skinAniSprite=function(){return null},F$s.update3DLoop=function(){},F$R(F$s,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),F$s}(),F$o=(F$I(1,F$b,"alertGlobalError",null,function(F$e){var F$s=0;F$k.window.onerror=F$e?function(F$e,F$F,F$a,F$o,F$E){F$s++<5&&F$E&&alert(F$E.stack||F$E)}:null}),F$b.init=function(F$e,F$F,F$a){for(var F$o=[],F$E=2,F$s=arguments.length;F$E<F$s;F$E++)F$o.push(arguments[F$E]);if(!F$b._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=F$b._arrayBufferSlice),F$b._isinit=!0,F$k.__init__(),F$p.__init__(),F$O.__init__(),F$b.timer=new F$f,F$b.scaleTimer=new F$f,F$b.loader=new F$Re,F$c.__init__(),F$E=0;for(var F$Y=F$o.length;F$E<F$Y;F$E++)F$o[F$E].enable&&F$o[F$E].enable();return F$q.__init__(),F$_.__init__(),F$J.__init__(),F$w.beginCheck(),F$b._currentStage=F$b.stage=new F$je,F$b.stage.conchModel&&F$b.stage.conchModel.setRootNode(),F$b._getUrlPath(),F$b.render=new F$Z(0,0),F$b.stage.size(F$e,F$F),F$T.__init__(),F$n.__init__(),F$l.instance.__init__(F$b.stage,F$Z.canvas),F$De.__init__(),F$V.autoStopMusic=!0,F$v.__init__(),F$Z.canvas}},F$b._getUrlPath=function(){var F$e=F$k.window.location,F$F=F$e.pathname;F$F=F$F&&":"==F$F.charAt(2)?F$F.substring(1):F$F,F$r.rootPath=F$r.basePath=F$r.getPath("file:"==F$e.protocol?F$F:F$e.protocol+"//"+F$e.host+F$e.pathname)},F$b._arrayBufferSlice=function(F$e,F$F){var F$a=new Uint8Array(this,F$e,F$F-F$e),F$o=new Uint8Array(F$a.length);return F$o.set(F$a),F$o.buffer},F$b._runScript=function(F$e){return F$k.window[F$b._evcode](F$e)},F$b.stage=null,F$b.timer=null,F$b.scaleTimer=null,F$b.loader=null,F$b.version="1.8.6",F$b.render=null,F$b._currentStage=null,F$b._isinit=!1,F$b.isDebug=!1,F$b.MiniAdpter={init:function(){F$Y.navigator&&F$Y.navigator.userAgent&&-1<F$Y.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},F$R(F$b,["conchMarket",function(){return this.conchMarket=F$Y.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=F$Y.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function F$e(){}return F$g(F$e,"Config"),F$e.WebGLTextCacheCount=500,F$e.atlasEnable=!1,F$e.showCanvasMark=!1,F$e.animationInterval=50,F$e.isAntialias=!1,F$e.isAlpha=!1,F$e.premultipliedAlpha=!0,F$e.isStencil=!0,F$e.preserveDrawingBuffer=!1,F$e}()),F$H=function(){function F$H(){this._events=null}F$g(F$H,"laya.events.EventDispatcher");var F$e=F$H.prototype;return F$e.hasListener=function(F$e){return!!(this._events&&this._events[F$e])},F$e.getListener=function(F$e){return this._events?this._events[F$e]:null},F$e.event=function(F$e,F$F){if(!this._events||!this._events[F$e])return!1;var F$a=this._events[F$e];if(F$a.lock)F$a.queue||(F$a.queue=[]),F$a.queue.push(F$F);else{var F$o;for(F$a.lock=!0,F$a.cursor=F$a.head;F$a.cursor;)(F$o=F$a.cursor).recover?(F$a.head=F$a.tail=F$a.cursor=null,console.error("node is recover："+F$o.id)):(F$a.cursor=F$o.next,F$o.once&&F$H.delNode(F$a,F$o),F$o.method&&(null!=F$F?F$o.args?F$o.method.apply(F$o.caller,F$o.args.concat(F$F)):F$F instanceof Array?F$o.method.apply(F$o.caller,F$F):F$o.caller?F$o.method.call(F$o.caller,F$F):F$b.recordError("事件派发错误","node.caller:"+F$o.caller+"node.method:"+F$o.method+"data:"+F$F+"node.prev"+F$o.prev):F$o.method.apply(F$o.caller,F$o.args)),F$o.once&&F$H.recoverHandler(F$o));F$a.lock=!1,!F$a.head&&this._events&&this._events[F$e]==F$a&&delete this._events[F$e],F$a.queue&&F$a.queue.length&&this.event(F$e,F$a.queue.shift())}return!0},F$e.on=function(F$e,F$F,F$a,F$o){return this._createListener(F$e,F$F,F$a,F$o,!1)},F$e.once=function(F$e,F$F,F$a,F$o){return this._createListener(F$e,F$F,F$a,F$o,!0)},F$e._createListener=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=!0),F$s&&this.off(F$e,F$F,F$a,F$E);var F$Y=F$H.createHandler(F$F||this,F$a,F$o,F$E);this._events||(this._events={});var F$_=this._events,F$R=F$_[F$e];return F$R?F$R.tail?(F$Y.prev=F$R.tail,F$R.tail.next=F$Y,F$R.tail=F$Y):F$R.head=F$R.tail=F$Y:F$_[F$e]={head:F$Y,tail:F$Y,cursor:null,lock:!1},this},F$e.off=function(F$e,F$F,F$a,F$o){if(void 0===F$o&&(F$o=!1),!this._events||!this._events[F$e])return this;for(var F$E=this._events[F$e],F$s=F$E.head;F$s;){if((!F$F||F$s.caller===F$F)&&F$s.method===F$a&&(!F$o||F$s.once)){F$H.delNode(F$E,F$s),F$E.cursor==F$s&&(F$E.cursor=F$s.next),F$H.recoverHandler(F$s);break}F$s=F$s.next}return this},F$e.offAll=function(F$e){var F$F=this._events;if(!F$F)return this;if(F$e)this._recoverHandlers(F$F[F$e]),delete F$F[F$e];else{for(var F$a in F$F)this._recoverHandlers(F$F[F$a]);this._events=null}return this},F$e._recoverHandlers=function(F$e){if(F$e){for(var F$F=F$e.head;F$F;){F$H.delNode(F$e,F$F);var F$a=F$F.next;F$H.recoverHandler(F$F),F$F=F$a}F$e.cursor=null}},F$e.isMouseEvent=function(F$e){return F$H.MOUSE_EVENTS[F$e]},F$H.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},F$H.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},F$H.delNode=function(F$e,F$F){F$F.prev?F$F.prev.next=F$F.next:F$e.head=F$F.next,F$F.next?F$F.next.prev=F$F.prev:F$e.tail=F$F.prev},F$H.createHandler=function(F$e,F$F,F$a,F$o){var F$E=500<F$H._freeHandler.length?F$H._freeHandler.shift():null;if(F$E)if(F$E.recover)F$E.recover=!1,F$E.caller=F$e,F$E.method=F$F,F$E.args=F$a,F$E.once=F$o;else{var F$s="";try{arguments.propertyIsEnumerable.caller}catch(F$e){F$s=F$e.stack}var F$Y=F$E.caller?(F$E.caller.__proto__&&F$E.caller.__proto__.constructor&&F$E.caller.__proto__.constructor.name)+"|"+F$E.caller.__className+"|"+F$E.caller.name:"",F$_=F$E.method?F$E.method.name:"";F$b.recordError("EventDispatcher重复创建","caller="+F$Y+"  method="+F$_+"  stack="+F$s),F$E={id:++F$H._nodeCount,caller:F$e,method:F$F,args:F$a,once:F$o,recover:!1}}else F$E={id:++F$H._nodeCount,caller:F$e,method:F$F,args:F$a,once:F$o,recover:!1};return F$E.prev=F$E.next=null,F$E},F$H.recoverHandler=function(F$e){if(F$e.recover){if(F$H._errorCount<5){F$H._errorCount++;var F$F="";try{arguments.propertyIsEnumerable.caller}catch(F$e){F$F=F$e.stack}var F$a=F$e.caller?(F$e.caller.__proto__&&F$e.caller.__proto__.constructor&&F$e.caller.__proto__.constructor.name)+"|"+F$e.caller.__className+"|"+F$e.caller.name:"",F$o=F$e.method?F$e.method.name:"";F$b.recordError("EventDispatcher重复回收","id="+F$e.id+"  caller="+F$a+"  method="+F$o+"  stack="+F$F)}F$e.caller=F$e.method=F$e.args=F$e.prev=null}else F$e.recover=!0,F$e.caller=F$e.method=F$e.args=F$e.prev=F$e.next=null,F$H._freeHandler&&F$H._freeHandler.length<3e3&&F$H._freeHandler.push(F$e)},F$H._freeHandler=[],F$H._nodeCount=0,F$H._errorCount=0,F$H}(),F$$=function(){function F$E(F$e,F$F,F$a,F$o){this.once=!1,void(this._id=0)===F$o&&(F$o=!1),this.setTo(F$e,F$F,F$a,F$o)}F$g(F$E,"laya.utils.Handler");var F$e=F$E.prototype;return F$e.setTo=function(F$e,F$F,F$a,F$o){return this._id=F$E._gid++,this.caller=F$e,this.method=F$F,this.args=F$a,this.once=F$o,this},F$e.run=function(){if(null==this.method)return null;var F$e=this._id,F$F=this.method.apply(this.caller,this.args);return this._id===F$e&&this.once&&this.recover(),F$F},F$e.runWith=function(F$e){if(null==this.method)return null;var F$F=this._id;if(null==F$e)var F$a=this.method.apply(this.caller,this.args);else F$a=this.args||F$e.unshift?this.args?this.method.apply(this.caller,this.args.concat(F$e)):this.method.apply(this.caller,F$e):this.method.call(this.caller,F$e);return this._id===F$F&&this.once&&this.recover(),F$a},F$e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},F$e.recover=function(){0<this._id&&(this._id=0,this.clear())},F$E.create=function(F$e,F$F,F$a,F$o){return void 0===F$o&&(F$o=!0),new F$E(F$e,F$F,F$a,F$o)},F$E._gid=1,F$E}(),F$K=function(){function F$e(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}F$g(F$e,"laya.display.BitmapFont");var F$F=F$e.prototype;return F$F.loadFont=function(F$e,F$F){this._path=F$e,this._complete=F$F,F$b.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],F$$.create(this,this.onLoaded))},F$F.onLoaded=function(){this.parseFont(F$_e.getRes(this._path),F$_e.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},F$F.parseFont=function(F$e,F$F){if(null!=F$e&&null!=F$F){this._texture=F$F;var F$a=F$e.getElementsByTagName("info");if(!F$a[0].getAttributeNode)return this.parseFont2(F$e,F$F);this.fontSize=parseInt(F$a[0].getAttributeNode("size").nodeValue);var F$o,F$E=F$a[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(F$E[0]),parseInt(F$E[1]),parseInt(F$E[2]),parseInt(F$E[3])],F$o=F$e.getElementsByTagName("char");var F$s=0;for(F$s=0;F$s<F$o.length;F$s++){var F$Y=F$o[F$s],F$_=parseInt(F$Y.getAttributeNode("id").nodeValue),F$R=parseInt(F$Y.getAttributeNode("xoffset").nodeValue)/1,F$H=parseInt(F$Y.getAttributeNode("yoffset").nodeValue)/1,F$g=parseInt(F$Y.getAttributeNode("xadvance").nodeValue)/1,F$n=new F$B;F$n.x=parseInt(F$Y.getAttributeNode("x").nodeValue),F$n.y=parseInt(F$Y.getAttributeNode("y").nodeValue),F$n.width=parseInt(F$Y.getAttributeNode("width").nodeValue),F$n.height=parseInt(F$Y.getAttributeNode("height").nodeValue);var F$O=F$ge.create(F$F,F$n.x,F$n.y,F$n.width,F$n.height,F$R,F$H);this._maxWidth=Math.max(this._maxWidth,F$g+this.letterSpacing),this._fontCharDic[F$_]=F$O,this._fontWidthMap[F$_]=F$g}}},F$F.parseFont2=function(F$e,F$F){if(null!=F$e&&null!=F$F){this._texture=F$F;var F$a=F$e.getElementsByTagName("info");this.fontSize=parseInt(F$a[0].attributes.size.nodeValue);var F$o=F$a[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(F$o[0]),parseInt(F$o[1]),parseInt(F$o[2]),parseInt(F$o[3])];var F$E=F$e.getElementsByTagName("char"),F$s=0;for(F$s=0;F$s<F$E.length;F$s++){var F$Y=F$E[F$s].attributes,F$_=parseInt(F$Y.id.nodeValue),F$R=parseInt(F$Y.xoffset.nodeValue)/1,F$H=parseInt(F$Y.yoffset.nodeValue)/1,F$g=parseInt(F$Y.xadvance.nodeValue)/1,F$n=new F$B;F$n.x=parseInt(F$Y.x.nodeValue),F$n.y=parseInt(F$Y.y.nodeValue),F$n.width=parseInt(F$Y.width.nodeValue),F$n.height=parseInt(F$Y.height.nodeValue);var F$O=F$ge.create(F$F,F$n.x,F$n.y,F$n.width,F$n.height,F$R,F$H);this._maxWidth=Math.max(this._maxWidth,F$g+this.letterSpacing),this._fontCharDic[F$_]=F$O,this._fontWidthMap[F$_]=F$g}}},F$F.getCharTexture=function(F$e){return this._fontCharDic[F$e.charCodeAt(0)]},F$F.destroy=function(){if(this._texture){for(var F$e in this._fontCharDic){var F$F=this._fontCharDic[F$e];F$F&&F$F.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},F$F.setSpaceWidth=function(F$e){this._spaceWidth=F$e},F$F.getCharWidth=function(F$e){var F$F=F$e.charCodeAt(0);return this._fontWidthMap[F$F]?this._fontWidthMap[F$F]+this.letterSpacing:" "==F$e?this._spaceWidth+this.letterSpacing:0},F$F.getTextWidth=function(F$e){for(var F$F=0,F$a=0,F$o=F$e.length;F$a<F$o;F$a++)F$F+=this.getCharWidth(F$e.charAt(F$a));return F$F},F$F.getMaxWidth=function(){return this._maxWidth},F$F.getMaxHeight=function(){return this.fontSize},F$F.drawText=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_=this.getTextWidth(F$e),F$R=0;"center"===F$E&&(F$R=(F$s-F$_)/2),"right"===F$E&&(F$R=F$s-F$_);for(var F$H=0,F$g=0,F$n=F$e.length;F$g<F$n;F$g++)(F$Y=this.getCharTexture(F$e.charAt(F$g)))&&(F$F.graphics.drawTexture(F$Y,F$a+F$H+F$R,F$o),F$H+=this.getCharWidth(F$e.charAt(F$g)))},F$e}(),F$_=function(){function F$a(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=F$a._TF_EMPTY}F$g(F$a,"laya.display.css.Style");var F$e=F$a.prototype;return F$e.getTransform=function(){return this._tf},F$e.setTransform=function(F$e){this._tf="none"!==F$e&&F$e?F$e:F$a._TF_EMPTY},F$e.setTranslateX=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.translateX=F$e},F$e.setTranslateY=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.translateY=F$e},F$e.setScaleX=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.scaleX=F$e},F$e.setScale=function(F$e,F$F){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.scaleX=F$e,this._tf.scaleY=F$F},F$e.setScaleY=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.scaleY=F$e},F$e.setRotate=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.rotate=F$e},F$e.setSkewX=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.skewX=F$e},F$e.setSkewY=function(F$e){this._tf===F$a._TF_EMPTY&&(this._tf=new F$E),this._tf.skewY=F$e},F$e.destroy=function(){this.scrollRect=null},F$e.render=function(F$e,F$F,F$a,F$o){},F$e.getCSSStyle=function(){return F$Fe.EMPTY},F$e._enableLayout=function(){return!1},F$I(0,F$e,"scaleX",function(){return this._tf.scaleX},function(F$e){this.setScaleX(F$e)}),F$I(0,F$e,"transform",function(){return this.getTransform()},function(F$e){this.setTransform(F$e)}),F$I(0,F$e,"translateX",function(){return this._tf.translateX},function(F$e){this.setTranslateX(F$e)}),F$I(0,F$e,"translateY",function(){return this._tf.translateY},function(F$e){this.setTranslateY(F$e)}),F$I(0,F$e,"scaleY",function(){return this._tf.scaleY},function(F$e){this.setScaleY(F$e)}),F$I(0,F$e,"block",function(){return 0!=(1&this._type)}),F$I(0,F$e,"skewY",function(){return this._tf.skewY},function(F$e){this.setSkewY(F$e)}),F$I(0,F$e,"rotate",function(){return this._tf.rotate},function(F$e){this.setRotate(F$e)}),F$I(0,F$e,"skewX",function(){return this._tf.skewX},function(F$e){this.setSkewX(F$e)}),F$I(0,F$e,"paddingLeft",function(){return 0}),F$I(0,F$e,"paddingTop",function(){return 0}),F$I(0,F$e,"absolute",function(){return!0}),F$a.__init__=function(){F$a._TF_EMPTY=new F$E,F$a.EMPTY=new F$a},F$a.EMPTY=null,F$a._TF_EMPTY=null,F$a}(),F$q=function(){function F$F(F$e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=F$C.create(F$F.defaultColor),this.family=F$F.defaultFamily,this.stroke=F$F._STROKE,this.size=F$F.defaultSize,F$e&&F$e!==F$F.EMPTY&&F$e.copyTo(this)}F$g(F$F,"laya.display.css.Font");var F$e=F$F.prototype;return F$e.set=function(F$e){this._text=null;for(var F$F=F$e.split(" "),F$a=0,F$o=F$F.length;F$a<F$o;F$a++){var F$E=F$F[F$a];switch(F$E){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<F$E.indexOf("px")&&(this.size=parseInt(F$E),this.family=F$F[F$a+1],F$a++)}},F$e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},F$e.copyTo=function(F$e){F$e._type=this._type,F$e._text=this._text,F$e._weight=this._weight,F$e._color=this._color,F$e.family=this.family,F$e.stroke=this.stroke!=F$F._STROKE?this.stroke.slice():F$F._STROKE,F$e.indent=this.indent,F$e.size=this.size},F$I(0,F$e,"password",function(){return 0!=(1024&this._type)},function(F$e){F$e?this._type|=1024:this._type&=-1025}),F$I(0,F$e,"color",function(){return this._color.strColor},function(F$e){this._color=F$C.create(F$e)}),F$I(0,F$e,"italic",function(){return 0!=(512&this._type)},function(F$e){F$e?this._type|=512:this._type&=-513}),F$I(0,F$e,"bold",function(){return 0!=(2048&this._type)},function(F$e){F$e?this._type|=2048:this._type&=-2049}),F$I(0,F$e,"weight",function(){return""+this._weight},function(F$e){var F$F=0;switch(F$e){case"normal":break;case"bold":this.bold=!0,F$F=700;break;case"bolder":F$F=800;break;case"lighter":F$F=100;break;default:F$F=parseInt(F$e)}this._weight=F$F,this._text=null}),F$I(0,F$e,"decoration",function(){return this._decoration?this._decoration.value:null},function(F$e){var F$F=F$e.split(" ");switch(this._decoration||(this._decoration={}),F$F[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=F$F[0]}F$F[1]&&(this._decoration.color=F$C.create(F$F)),this._decoration.value=F$e}),F$F.__init__=function(){F$F.EMPTY=new F$F(null)},F$F.EMPTY=null,F$F.defaultColor="#000000",F$F.defaultSize=12,F$F.defaultFamily="Arial",F$F.defaultFont="12px Arial",F$F._STROKE=[0,"#000000"],F$F._ITALIC=512,F$F._PASSWORD=1024,F$F._BOLD=2048,F$F}(),F$E=function(){function F$e(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return F$g(F$e,"laya.display.css.TransformInfo"),F$e}(),F$O=function(){function F$n(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,F$Z.isConchNode){this._nativeObj=new F$Y._conchGraphics,this.id=this._nativeObj.conchID}}F$g(F$n,"laya.display.Graphics");var F$e=F$n.prototype;return F$e.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},F$e.clear=function(F$e){void 0===F$e&&(F$e=!1);var F$F=0,F$a=0;if(F$e){var F$o=this._one;if(this._cmds){for(F$a=this._cmds.length,F$F=0;F$F<F$a;F$F++)!(F$o=this._cmds[F$F])||F$o.callee!==F$Z._context._drawTexture&&F$o.callee!==F$Z._context._drawTextureWithTransform||(F$o[0]=null,F$n._cache.push(F$o));this._cmds.length=0}else F$o&&(!F$o||F$o.callee!==F$Z._context._drawTexture&&F$o.callee!==F$Z._context._drawTextureWithTransform||(F$o[0]=null,F$n._cache.push(F$o)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(F$F=0,F$a=this._vectorgraphArray.length;F$F<F$a;F$F++)F$t.getInstance().deleteShape(this._vectorgraphArray[F$F]);this._vectorgraphArray.length=0}},F$e._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},F$e._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new F$a,this._graphicBounds._graphics=this)},F$e._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},F$e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},F$e.getBounds=function(F$e){return void 0===F$e&&(F$e=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(F$e)},F$e.getBoundPoints=function(F$e){return void 0===F$e&&(F$e=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(F$e)},F$e._addCmd=function(F$e){this._cmds=this._cmds||[],F$e.callee=F$e.shift(),this._cmds.push(F$e)},F$e.setFilters=function(F$e){this._saveToCmd(F$Z._context._setFilters,F$e)},F$e.drawTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$Y&&(F$Y=1),!F$e||F$Y<.01)return null;F$o||(F$o=F$e.sourceWidth),F$E||(F$E=F$e.sourceHeight),F$Y=F$Y<0?0:1<F$Y?1:F$Y;var F$_,F$R=!F$Z.isWebGL&&(F$k.onFirefox||F$k.onEdge||F$k.onIE||F$k.onSafari)?.5:0,F$H=F$o/F$e.sourceWidth,F$g=F$E/F$e.sourceHeight;return F$o=F$e.width*F$H,F$E=F$e.height*F$g,F$e.loaded&&(F$o<=0||F$E<=0)?null:(F$F+=F$e.offsetX*F$H,F$a+=F$e.offsetY*F$g,this._sp&&(this._sp._renderType|=512),F$F-=F$R,F$a-=F$R,F$o+=2*F$R,F$E+=2*F$R,F$n._cache.length?((F$_=F$n._cache.pop())[0]=F$e,F$_[1]=F$F,F$_[2]=F$a,F$_[3]=F$o,F$_[4]=F$E,F$_[5]=F$s,F$_[6]=F$Y):F$_=[F$e,F$F,F$a,F$o,F$E,F$s,F$Y],F$_.callee=F$s||1!=F$Y?F$Z._context._drawTextureWithTransform:F$Z._context._drawTexture,null!=this._one||F$s||1!=F$Y?this._saveToCmd(F$_.callee,F$_):(this._one=F$_,this._render=this._renderOneImg),F$e.loaded||F$e.once("loaded",this,this._textureLoaded,[F$e,F$_]),this._repaint(),F$_)},F$e.cleanByTexture=function(F$e,F$F,F$a,F$o,F$E){if(void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),!F$e)return this.clear();if(this._one&&this._render===this._renderOneImg){F$o||(F$o=F$e.sourceWidth),F$E||(F$E=F$e.sourceHeight);var F$s=F$o/F$e.sourceWidth,F$Y=F$E/F$e.sourceHeight;F$o=F$e.width*F$s,F$E=F$e.height*F$Y,F$F+=F$e.offsetX*F$s,F$a+=F$e.offsetY*F$Y,this._one[0]=F$e,this._one[1]=F$F,this._one[2]=F$a,this._one[3]=F$o,this._one[4]=F$E,this._repaint()}else this.clear(),F$e&&this.drawTexture(F$e,F$F,F$a,F$o,F$E)},F$e.drawTextures=function(F$e,F$F){F$e&&this._saveToCmd(F$Z._context._drawTextures,[F$e,F$F])},F$e.fillTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s="repeat"),F$e){var F$_=[F$e,F$F,F$a,F$o,F$E,F$s,F$Y||F$L.EMPTY,{}];F$e.loaded||F$e.once("loaded",this,this._textureLoaded,[F$e,F$_]),this._saveToCmd(F$Z._context._fillTexture,F$_)}},F$e._textureLoaded=function(F$e,F$F){F$F[3]=F$F[3]||F$e.width,F$F[4]=F$F[4]||F$e.height,this._repaint()},F$e.fillCircle=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$a.bitmap.enableMerageInAtlas=!1;var F$_=new Float32Array(2*(F$Y+1)),F$R=new Float32Array(2*(F$Y+1)),F$H=new Uint16Array(3*F$Y),F$g=2*Math.PI/F$Y,F$n=0;F$_[0]=F$o,F$_[1]=F$E,F$R[0]=F$o/F$a.width,F$R[1]=F$E/F$a.height;for(var F$O=2,F$q=0;F$q<F$Y;F$q++){var F$I=F$s*Math.cos(F$n)+F$o,F$l=F$s*Math.sin(F$n)+F$E;F$_[F$O]=F$I,F$_[F$O+1]=F$l,F$R[F$O]=F$I/F$a.width,F$R[F$O+1]=F$l/F$a.height,F$n+=F$g,F$O+=2}for(F$q=F$O=0;F$q<F$Y;F$q++)F$H[F$O++]=0,F$H[F$O++]=F$q+1,F$H[F$O++]=F$Y+1<=F$q+2?1:F$q+2;this.drawTriangles(F$a,F$e,F$F,F$_,F$R,F$H)},F$e.drawTriangles=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){void 0===F$_&&(F$_=1),this._saveToCmd(F$Z._context.drawTriangles,[F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H])},F$e._saveToCmd=function(F$e,F$F){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=F$F,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(F$F)),F$F.callee=F$e,this._repaint(),F$F},F$e.clipRect=function(F$e,F$F,F$a,F$o){this._saveToCmd(F$Z._context._clipRect,[F$e,F$F,F$a,F$o])},F$e.fillText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){void 0===F$Y&&(F$Y=0),this._saveToCmd(F$Z._context._fillText,[F$e,F$F,F$a,F$o||F$q.defaultFont,F$E,F$s])},F$e.fillBorderText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){this._saveToCmd(F$Z._context._fillBorderText,[F$e,F$F,F$a,F$o||F$q.defaultFont,F$E,F$s,F$Y,F$_])},F$e.strokeText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._saveToCmd(F$Z._context._strokeText,[F$e,F$F,F$a,F$o||F$q.defaultFont,F$E,F$s,F$Y])},F$e.alpha=function(F$e){F$e=F$e<0?0:1<F$e?1:F$e,this._saveToCmd(F$Z._context._alpha,[F$e])},F$e.setAlpha=function(F$e){F$e=F$e<0?0:1<F$e?1:F$e,this._saveToCmd(F$Z._context._setAlpha,[F$e])},F$e.transform=function(F$e,F$F,F$a){void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),this._saveToCmd(F$Z._context._transform,[F$e,F$F,F$a])},F$e.rotate=function(F$e,F$F,F$a){void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),this._saveToCmd(F$Z._context._rotate,[F$e,F$F,F$a])},F$e.scale=function(F$e,F$F,F$a,F$o){void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),this._saveToCmd(F$Z._context._scale,[F$e,F$F,F$a,F$o])},F$e.translate=function(F$e,F$F){this._saveToCmd(F$Z._context._translate,[F$e,F$F])},F$e.save=function(){this._saveToCmd(F$Z._context._save,[])},F$e.restore=function(){this._saveToCmd(F$Z._context._restore,[])},F$e.replaceText=function(F$e){this._repaint();var F$F=this._cmds;if(F$F){for(var F$a=F$F.length-1;-1<F$a;F$a--)if(this._isTextCmd(F$F[F$a].callee))return F$F[F$a][0].toUpperCase?F$F[F$a][0]=F$e:F$F[F$a][0].setText(F$e),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=F$e:this._one[0].setText(F$e),!0;return!1},F$e._isTextCmd=function(F$e){return F$e===F$Z._context._fillText||F$e===F$Z._context._fillBorderText||F$e===F$Z._context._strokeText},F$e.replaceTextColor=function(F$e){this._repaint();var F$F=this._cmds;if(F$F)for(var F$a=F$F.length-1;-1<F$a;F$a--)this._isTextCmd(F$F[F$a].callee)&&(F$F[F$a][4]=F$e,F$F[F$a][0].toUpperCase||(F$F[F$a][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=F$e,this._one[0].toUpperCase||(this._one[0].changed=!0))},F$e.loadImage=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=this;void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0);var F$_=F$_e.getRes(F$e);function F$R(F$e){F$e&&(F$Y.drawTexture(F$e,F$F,F$a,F$o,F$E),null!=F$s&&F$s.call(F$Y._sp,F$e))}F$_?F$R(F$_):F$b.loader.load(F$e,F$$.create(null,F$R),null,"image")},F$e._renderEmpty=function(F$e,F$F,F$a,F$o){},F$e._renderAll=function(F$e,F$F,F$a,F$o){for(var F$E,F$s=this._cmds,F$Y=0,F$_=F$s.length;F$Y<F$_;F$Y++)(F$E=F$s[F$Y]).callee.call(F$F,F$a,F$o,F$E)},F$e._renderOne=function(F$e,F$F,F$a,F$o){this._one.callee.call(F$F,F$a,F$o,this._one)},F$e._renderOneImg=function(F$e,F$F,F$a,F$o){this._one.callee.call(F$F,F$a,F$o,this._one),2305!==F$e._renderType&&(F$e._renderType|=1)},F$e.drawLine=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=1);var F$Y=0;F$Z.isWebGL&&(F$Y=F$t.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$Y));var F$_=F$s%2==0?0:.5,F$R=[F$e+F$_,F$F+F$_,F$a+F$_,F$o+F$_,F$E,F$s,F$Y];this._saveToCmd(F$Z._context._drawLine,F$R)},F$e.drawLines=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=1);var F$s=0;if(F$a&&!(F$a.length<4)){F$Z.isWebGL&&(F$s=F$t.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$s));var F$Y=F$E%2==0?0:.5,F$_=[F$e+F$Y,F$F+F$Y,F$a,F$o,F$E,F$s];this._saveToCmd(F$Z._context._drawLines,F$_)}},F$e.drawCurves=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=1);var F$s=[F$e,F$F,F$a,F$o,F$E];this._saveToCmd(F$Z._context._drawCurves,F$s)},F$e.drawRect=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){void 0===F$Y&&(F$Y=1);var F$_=F$s?F$Y/2:0,F$R=F$s?F$Y:0,F$H=[F$e+F$_,F$F+F$_,F$a-F$R,F$o-F$R,F$E,F$s,F$Y];this._saveToCmd(F$Z._context._drawRect,F$H)},F$e.drawCircle=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=1);var F$Y=F$E?F$s/2:0,F$_=0;F$Z.isWebGL&&(F$_=F$t.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$_));var F$R=[F$e,F$F,F$a-F$Y,F$o,F$E,F$s,F$_];this._saveToCmd(F$Z._context._drawCircle,F$R)},F$e.drawPie=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){void 0===F$_&&(F$_=1);var F$R=F$Y?F$_/2:0,F$H=F$Y?F$_:0,F$g=0;F$Z.isWebGL&&(F$g=F$t.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$g));var F$n=[F$e+F$R,F$F+F$R,F$a-F$H,F$o,F$E,F$s,F$Y,F$_,F$g];F$n[3]=F$Q.toRadian(F$o),F$n[4]=F$Q.toRadian(F$E),this._saveToCmd(F$Z._context._drawPie,F$n)},F$e.drawPoly=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=1);var F$Y=0,F$_=!1;F$Z.isWebGL&&(F$Y=F$t.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$Y),F$_=!(6<F$a.length));var F$R=F$E?F$s%2==0?0:.5:0,F$H=[F$e+F$R,F$F+F$R,F$a,F$o,F$E,F$s,F$Y,F$_];this._saveToCmd(F$Z._context._drawPoly,F$H)},F$e.drawPath=function(F$e,F$F,F$a,F$o,F$E){var F$s=[F$e,F$F,F$a,F$o,F$E];this._saveToCmd(F$Z._context._drawPath,F$s)},F$I(0,F$e,"cmds",function(){return this._cmds},function(F$e){this._sp&&(this._sp._renderType|=512),this._cmds=F$e,this._render=this._renderAll,this._repaint()}),F$n.__init__=function(){if(F$Z.isConchNode){for(var F$e=laya.display.Graphics.prototype,F$F=F$k.window.ConchGraphics.prototype,F$a=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],F$o=0,F$E=F$a.length;F$o<=F$E;F$o++){var F$s=F$a[F$o];F$e[F$s]=F$F[F$s]}F$e._saveToCmd=null,F$F.drawImageS&&(F$e.drawTextures=function(F$e,F$F){if(F$e&&F$e.loaded&&F$e.bitmap&&F$e.source){var F$a=F$e.uv,F$o=F$e.bitmap.width,F$E=F$e.bitmap.height;this.drawImageS(F$e.bitmap.source,F$a[0]*F$o,F$a[1]*F$E,(F$a[2]-F$a[0])*F$o,(F$a[5]-F$a[3])*F$E,F$e.offsetX,F$e.offsetY,F$e.width,F$e.height,F$F)}}),F$e.drawTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$Y&&(F$Y=1),F$e)if(F$e.loaded){if(F$e.loaded&&F$e.bitmap&&F$e.source&&(F$o||(F$o=F$e.sourceWidth),F$E||(F$E=F$e.sourceHeight),F$Y=F$Y<0?0:1<F$Y?1:F$Y,F$o=F$o-F$e.sourceWidth+F$e.width,F$E=F$E-F$e.sourceHeight+F$e.height,!(F$o<=0||F$E<=0))){F$F+=F$e.offsetX,F$a+=F$e.offsetY;var F$_=F$e.uv,F$R=F$e.bitmap.width,F$H=F$e.bitmap.height;F$_[4]<F$_[0]&&F$_[5]<F$_[1]?this.drawImageM(F$e.bitmap.source,F$_[4]*F$R,F$_[5]*F$H,(F$_[0]-F$_[4])*F$R,(F$_[1]-F$_[5])*F$H,F$F,F$a,F$o,F$E,F$s,F$Y):this.drawImageM(F$e.bitmap.source,F$_[0]*F$R,F$_[1]*F$H,(F$_[2]-F$_[0])*F$R,(F$_[5]-F$_[3])*F$H,F$F,F$a,F$o,F$E,F$s,F$Y),this._repaint()}}else F$e.once("loaded",this,function(){this.drawTexture(F$e,F$F,F$a,F$o,F$E,F$s)})},F$e.fillTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s="repeat"),F$e&&F$e.loaded){var F$_,F$R=F$Z._context.ctx,F$H=F$e.bitmap.width,F$g=F$e.bitmap.height,F$n=F$e.uv;F$_=F$e.uv!=F$ge.DEF_UV?F$R.createPattern(F$e.bitmap.source,F$s,F$n[0]*F$H,F$n[1]*F$g,(F$n[2]-F$n[0])*F$H,(F$n[5]-F$n[3])*F$g):F$R.createPattern(F$e.bitmap.source,F$s);var F$O=0,F$q=0;F$Y&&(F$F+=F$Y.x%F$e.width,F$a+=F$Y.y%F$e.height,F$O-=F$Y.x%F$e.width,F$q-=F$Y.y%F$e.height),this._fillImage(F$_,F$F,F$a,F$O,F$q,F$o,F$E)}}}},F$n._cache=[],F$n}(),F$a=function(){function F$y(){this._cacheBoundsType=!1}F$g(F$y,"laya.display.GraphicsBounds");var F$e=F$y.prototype;return F$e.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},F$e.reset=function(){this._temp&&(this._temp.length=0)},F$e.getBounds=function(F$e){return void 0===F$e&&(F$e=!1),(!this._bounds||!this._temp||this._temp.length<1||F$e!=this._cacheBoundsType)&&(this._bounds=F$B._getWrapRec(this.getBoundPoints(F$e),this._bounds)),this._cacheBoundsType=F$e,this._bounds},F$e.getBoundPoints=function(F$e){return void 0===F$e&&(F$e=!1),(!this._temp||this._temp.length<1||F$e!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(F$e)),this._cacheBoundsType=F$e,this._rstBoundPoints=F$Q.copyArray(this._rstBoundPoints,this._temp)},F$e._getCmdPoints=function(F$e){void 0===F$e&&(F$e=!1);var F$F,F$a,F$o=F$Z._context,F$E=this._graphics.cmds;if((F$F=this._temp||(this._temp=[])).length=0,F$E||null==this._graphics._one||(F$y._tempCmds.length=0,F$y._tempCmds.push(this._graphics._one),F$E=F$y._tempCmds),!F$E)return F$F;(F$a=F$y._tempMatrixArrays).length=0;var F$s=F$y._initMatrix;F$s.identity();for(var F$Y,F$_,F$R=F$y._tempMatrix,F$H=NaN,F$g=NaN,F$n=NaN,F$O=NaN,F$q=NaN,F$I=NaN,F$l=0,F$P=F$E.length;F$l<F$P;F$l++)if((F$Y=F$E[F$l]).callee)switch(F$Y.callee){case F$o._save:case 7:F$a.push(F$s),F$s=F$s.clone();break;case F$o._restore:case 8:F$s=F$a.pop();break;case F$o._scale:case 5:F$R.identity(),F$R.translate(-F$Y[2],-F$Y[3]),F$R.scale(F$Y[0],F$Y[1]),F$R.translate(F$Y[2],F$Y[3]),this._switchMatrix(F$s,F$R);break;case F$o._rotate:case 3:F$R.identity(),F$R.translate(-F$Y[1],-F$Y[2]),F$R.rotate(F$Y[0]),F$R.translate(F$Y[1],F$Y[2]),this._switchMatrix(F$s,F$R);break;case F$o._translate:case 6:F$R.identity(),F$R.translate(F$Y[0],F$Y[1]),this._switchMatrix(F$s,F$R);break;case F$o._transform:case 4:F$R.identity(),F$R.translate(-F$Y[1],-F$Y[2]),F$R.concat(F$Y[0]),F$R.translate(F$Y[1],F$Y[2]),this._switchMatrix(F$s,F$R);break;case 16:case 24:F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[0],F$Y[1],F$Y[2],F$Y[3]),F$s);break;case 17:F$s.copyTo(F$R),F$R.concat(F$Y[4]),F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[0],F$Y[1],F$Y[2],F$Y[3]),F$R);break;case F$o._drawTexture:F$_=F$Y[0],F$e?F$Y[3]&&F$Y[4]?F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$Y[3],F$Y[4]),F$s):(F$_=F$Y[0],F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$_.width,F$_.height),F$s)):(F$H=(F$Y[3]||F$_.sourceWidth)/F$_.width,F$g=(F$Y[4]||F$_.sourceHeight)/F$_.height,F$n=F$H*F$_.sourceWidth,F$O=F$g*F$_.sourceHeight,F$q=0<F$_.offsetX?F$_.offsetX:0,F$I=0<F$_.offsetY?F$_.offsetY:0,F$q*=F$H,F$I*=F$g,F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1]-F$q,F$Y[2]-F$I,F$n,F$O),F$s));break;case F$o._fillTexture:F$Y[3]&&F$Y[4]?F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$Y[3],F$Y[4]),F$s):(F$_=F$Y[0],F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$_.width,F$_.height),F$s));break;case F$o._drawTextureWithTransform:var F$j;F$j=F$Y[5]?(F$s.copyTo(F$R),F$R.concat(F$Y[5]),F$R):F$s,F$e?F$Y[3]&&F$Y[4]?F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$Y[3],F$Y[4]),F$j):(F$_=F$Y[0],F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1],F$Y[2],F$_.width,F$_.height),F$j)):(F$_=F$Y[0],F$H=(F$Y[3]||F$_.sourceWidth)/F$_.width,F$g=(F$Y[4]||F$_.sourceHeight)/F$_.height,F$n=F$H*F$_.sourceWidth,F$O=F$g*F$_.sourceHeight,F$q=0<F$_.offsetX?F$_.offsetX:0,F$I=0<F$_.offsetY?F$_.offsetY:0,F$q*=F$H,F$I*=F$g,F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[1]-F$q,F$Y[2]-F$I,F$n,F$O),F$j));break;case F$o._drawRect:case 13:F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[0],F$Y[1],F$Y[2],F$Y[3]),F$s);break;case F$o._drawCircle:case F$o._fillCircle:case 14:F$y._addPointArrToRst(F$F,F$B._getBoundPointS(F$Y[0]-F$Y[2],F$Y[1]-F$Y[2],F$Y[2]+F$Y[2],F$Y[2]+F$Y[2]),F$s);break;case F$o._drawLine:case 20:F$y._tempPoints.length=0;var F$$;F$$=.5*F$Y[5],F$Y[0]==F$Y[2]?F$y._tempPoints.push(F$Y[0]+F$$,F$Y[1],F$Y[2]+F$$,F$Y[3],F$Y[0]-F$$,F$Y[1],F$Y[2]-F$$,F$Y[3]):F$Y[1]==F$Y[3]?F$y._tempPoints.push(F$Y[0],F$Y[1]+F$$,F$Y[2],F$Y[3]+F$$,F$Y[0],F$Y[1]-F$$,F$Y[2],F$Y[3]-F$$):F$y._tempPoints.push(F$Y[0],F$Y[1],F$Y[2],F$Y[3]),F$y._addPointArrToRst(F$F,F$y._tempPoints,F$s);break;case F$o._drawCurves:case 22:F$y._addPointArrToRst(F$F,F$M.I.getBezierPoints(F$Y[2]),F$s,F$Y[0],F$Y[1]);break;case F$o._drawPoly:case F$o._drawLines:case 18:F$y._addPointArrToRst(F$F,F$Y[2],F$s,F$Y[0],F$Y[1]);break;case F$o._drawPath:case 19:F$y._addPointArrToRst(F$F,this._getPathPoints(F$Y[2]),F$s,F$Y[0],F$Y[1]);break;case F$o._drawPie:case 15:F$y._addPointArrToRst(F$F,this._getPiePoints(F$Y[0],F$Y[1],F$Y[2],F$Y[3],F$Y[4]),F$s)}return 200<F$F.length?F$F=F$Q.copyArray(F$F,F$B._getWrapRec(F$F)._getBoundPoints()):8<F$F.length&&(F$F=F$D.scanPList(F$F)),F$F},F$e._switchMatrix=function(F$e,F$F){F$F.concat(F$e),F$F.copyTo(F$e)},F$e._getPiePoints=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$y._tempPoints;F$y._tempPoints.length=0,F$s.push(F$e,F$F);var F$Y=(F$E-F$o)%(2*Math.PI)/10,F$_=NaN,F$R=F$o;for(F$_=0;F$_<=10;F$_++)F$s.push(F$e+F$a*Math.cos(F$R),F$F+F$a*Math.sin(F$R)),F$R+=F$Y;return F$s},F$e._getPathPoints=function(F$e){var F$F,F$a,F$o=0,F$E=F$y._tempPoints;for(F$E.length=0,F$F=F$e.length,F$o=0;F$o<F$F;F$o++)1<(F$a=F$e[F$o]).length&&(F$E.push(F$a[1],F$a[2]),3<F$a.length&&F$E.push(F$a[3],F$a[4]));return F$E},F$y._addPointArrToRst=function(F$e,F$F,F$a,F$o,F$E){void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0);var F$s,F$Y=0;for(F$s=F$F.length,F$Y=0;F$Y<F$s;F$Y+=2)F$y._addPointToRst(F$e,F$F[F$Y]+F$o,F$F[F$Y+1]+F$E,F$a)},F$y._addPointToRst=function(F$e,F$F,F$a,F$o){var F$E=F$L.TEMP;F$E.setTo(F$F||0,F$a||0),F$o.transformPoint(F$E),F$e.push(F$E.x,F$E.y)},F$y._tempPoints=[],F$y._tempMatrixArrays=[],F$y._tempCmds=[],F$R(F$y,["_tempMatrix",function(){return this._tempMatrix=new F$A},"_initMatrix",function(){return this._initMatrix=new F$A}]),F$y}(),F$s=function(){function F$e(){}F$g(F$e,"laya.events.Event");var F$F=F$e.prototype;return F$F.setTo=function(F$e,F$F,F$a){return this.type=F$e,this.currentTarget=F$F,this.target=F$a,this},F$F.stopPropagation=function(){this._stoped=!0},F$I(0,F$F,"stageY",function(){return F$b.stage.mouseY}),F$I(0,F$F,"charCode",function(){return this.nativeEvent.charCode}),F$I(0,F$F,"touches",function(){var F$e=this.nativeEvent.touches;if(F$e)for(var F$F=F$b.stage,F$a=0,F$o=F$e.length;F$a<F$o;F$a++){var F$E=F$e[F$a],F$s=F$L.TEMP;F$s.setTo(F$E.clientX,F$E.clientY),F$F._canvasTransform.invertTransformPoint(F$s),F$F.transform.invertTransformPoint(F$s),F$E.stageX=F$s.x,F$E.stageY=F$s.y}return F$e}),F$I(0,F$F,"keyLocation",function(){return this.nativeEvent.keyLocation}),F$I(0,F$F,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),F$I(0,F$F,"altKey",function(){return this.nativeEvent.altKey}),F$I(0,F$F,"shiftKey",function(){return this.nativeEvent.shiftKey}),F$I(0,F$F,"stageX",function(){return F$b.stage.mouseX}),F$e.EMPTY=new F$e,F$e.MOUSE_DOWN="mousedown",F$e.MOUSE_UP="mouseup",F$e.CLICK="click",F$e.RIGHT_MOUSE_DOWN="rightmousedown",F$e.RIGHT_MOUSE_UP="rightmouseup",F$e.RIGHT_CLICK="rightclick",F$e.MOUSE_MOVE="mousemove",F$e.MOUSE_OVER="mouseover",F$e.MOUSE_OUT="mouseout",F$e.MOUSE_WHEEL="mousewheel",F$e.ROLL_OVER="mouseover",F$e.ROLL_OUT="mouseout",F$e.DOUBLE_CLICK="doubleclick",F$e.CHANGE="change",F$e.CHANGED="changed",F$e.RESIZE="resize",F$e.ADDED="added",F$e.REMOVED="removed",F$e.DISPLAY="display",F$e.UNDISPLAY="undisplay",F$e.ERROR="error",F$e.COMPLETE="complete",F$e.LOADED="loaded",F$e.INITED="inited",F$e.PROGRESS="progress",F$e.INPUT="input",F$e.RENDER="render",F$e.OPEN="open",F$e.MESSAGE="message",F$e.CLOSE="close",F$e.KEY_DOWN="keydown",F$e.KEY_PRESS="keypress",F$e.KEY_UP="keyup",F$e.FRAME="enterframe",F$e.DRAG_START="dragstart",F$e.DRAG_MOVE="dragmove",F$e.DRAG_END="dragend",F$e.ENTER="enter",F$e.SELECT="select",F$e.BLUR="blur",F$e.FOCUS="focus",F$e.VISIBILITY_CHANGE="visibilitychange",F$e.FOCUS_CHANGE="focuschange",F$e.PLAYED="played",F$e.PAUSED="paused",F$e.STOPPED="stopped",F$e.START="start",F$e.END="end",F$e.ENABLE_CHANGED="enablechanged",F$e.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",F$e.COMPONENT_ADDED="componentadded",F$e.COMPONENT_REMOVED="componentremoved",F$e.LAYER_CHANGED="layerchanged",F$e.HIERARCHY_LOADED="hierarchyloaded",F$e.RECOVERED="recovered",F$e.RELEASED="released",F$e.LINK="link",F$e.LABEL="label",F$e.FULL_SCREEN_CHANGE="fullscreenchange",F$e.DEVICE_LOST="devicelost",F$e.MESH_CHANGED="meshchanged",F$e.MATERIAL_CHANGED="materialchanged",F$e.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",F$e.ANIMATION_CHANGED="animationchanged",F$e.TRIGGER_ENTER="triggerenter",F$e.TRIGGER_STAY="triggerstay",F$e.TRIGGER_EXIT="triggerexit",F$e.TRAIL_FILTER_CHANGE="trailfilterchange",F$e.DOMINO_FILTER_CHANGE="dominofilterchange",F$e}(),F$n=(function(){function F$e(){}F$g(F$e,"laya.events.Keyboard"),F$e.NUMBER_0=48,F$e.NUMBER_1=49,F$e.NUMBER_2=50,F$e.NUMBER_3=51,F$e.NUMBER_4=52,F$e.NUMBER_5=53,F$e.NUMBER_6=54,F$e.NUMBER_7=55,F$e.NUMBER_8=56,F$e.NUMBER_9=57,F$e.A=65,F$e.B=66,F$e.C=67,F$e.D=68,F$e.E=69,F$e.F=70,F$e.G=71,F$e.H=72,F$e.I=73,F$e.J=74,F$e.K=75,F$e.L=76,F$e.M=77,F$e.N=78,F$e.O=79,F$e.P=80,F$e.Q=81,F$e.R=82,F$e.S=83,F$e.T=84,F$e.U=85,F$e.V=86,F$e.W=87,F$e.X=88,F$e.Y=89,F$e.Z=90,F$e.F1=112,F$e.F2=113,F$e.F3=114,F$e.F4=115,F$e.F5=116,F$e.F6=117,F$e.F7=118,F$e.F8=119,F$e.F9=120,F$e.F10=121,F$e.F11=122,F$e.F12=123,F$e.F13=124,F$e.F14=125,F$e.F15=126,F$e.NUMPAD=21,F$e.NUMPAD_0=96,F$e.NUMPAD_1=97,F$e.NUMPAD_2=98,F$e.NUMPAD_3=99,F$e.NUMPAD_4=100,F$e.NUMPAD_5=101,F$e.NUMPAD_6=102,F$e.NUMPAD_7=103,F$e.NUMPAD_8=104,F$e.NUMPAD_9=105,F$e.NUMPAD_ADD=107,F$e.NUMPAD_DECIMAL=110,F$e.NUMPAD_DIVIDE=111,F$e.NUMPAD_ENTER=108,F$e.NUMPAD_MULTIPLY=106,F$e.NUMPAD_SUBTRACT=109,F$e.SEMICOLON=186,F$e.EQUAL=187,F$e.COMMA=188,F$e.MINUS=189,F$e.PERIOD=190,F$e.SLASH=191,F$e.BACKQUOTE=192,F$e.LEFTBRACKET=219,F$e.BACKSLASH=220,F$e.RIGHTBRACKET=221,F$e.QUOTE=222,F$e.ALTERNATE=18,F$e.BACKSPACE=8,F$e.CAPS_LOCK=20,F$e.COMMAND=15,F$e.CONTROL=17,F$e.DELETE=46,F$e.ENTER=13,F$e.ESCAPE=27,F$e.PAGE_UP=33,F$e.PAGE_DOWN=34,F$e.END=35,F$e.HOME=36,F$e.LEFT=37,F$e.UP=38,F$e.RIGHT=39,F$e.DOWN=40,F$e.SHIFT=16,F$e.SPACE=32,F$e.TAB=9,F$e.INSERT=45}(),function(){function F$E(){}return F$g(F$E,"laya.events.KeyBoardManager"),F$E.__init__=function(){F$E._addEvent("keydown"),F$E._addEvent("keypress"),F$E._addEvent("keyup")},F$E._addEvent=function(F$F){F$k.document.addEventListener(F$F,function(F$e){laya.events.KeyBoardManager._dispatch(F$e,F$F)},!0)},F$E._dispatch=function(F$e,F$F){if(F$E.enabled){F$E._event._stoped=!1,F$E._event.nativeEvent=F$e,F$E._event.keyCode=F$e.keyCode||F$e.which||F$e.charCode,"keydown"===F$F?F$E._pressKeys[F$E._event.keyCode]=!0:"keyup"===F$F&&(F$E._pressKeys[F$E._event.keyCode]=null);for(var F$a=F$b.stage.focus&&null!=F$b.stage.focus.event&&F$b.stage.focus.displayedInStage?F$b.stage.focus:F$b.stage,F$o=F$a;F$o;)F$o.event(F$F,F$E._event.setTo(F$F,F$o,F$a)),F$o=F$o.parent}},F$E.hasKeyDown=function(F$e){return F$E._pressKeys[F$e]},F$E._pressKeys={},F$E.enabled=!0,F$R(F$E,["_event",function(){return this._event=new F$s}]),F$E}()),F$l=(function(){function F$e(){}F$g(F$e,"laya.events.KeyLocation"),F$e.STANDARD=0,F$e.LEFT=1,F$e.RIGHT=2,F$e.NUM_PAD=3}(),function(){function F$H(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=F$k.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new F$s,this._matrix=new F$A,this._point=new F$L,this._rect=new F$B,this._prePoint=new F$L,this._curTouchID=NaN}F$g(F$H,"laya.events.MouseManager");var F$e=F$H.prototype;return F$e.__init__=function(F$e,F$F){var F$a=this;this._stage=F$e;var F$o=this,F$E=this._eventList;F$F.oncontextmenu=function(F$e){if(F$H.enabled)return!1},F$F.addEventListener("mousedown",function(F$e){F$H.enabled&&(F$k.onIE||F$e.preventDefault(),F$E.push(F$e),F$o.mouseDownTime=F$k.now())}),F$F.addEventListener("mouseup",function(F$e){F$H.enabled&&(F$e.preventDefault(),F$E.push(F$e),F$o.mouseDownTime=-F$k.now())},!0),F$F.addEventListener("mousemove",function(F$e){if(F$H.enabled){F$e.preventDefault();var F$F=F$k.now();if(F$F-F$o._lastMoveTimer<10)return;F$o._lastMoveTimer=F$F,F$E.push(F$e)}},!0),F$F.addEventListener("mouseout",function(F$e){F$H.enabled&&F$E.push(F$e)}),F$F.addEventListener("mouseover",function(F$e){F$H.enabled&&F$E.push(F$e)}),F$F.addEventListener("touchstart",function(F$e){F$H.enabled&&(F$E.push(F$e),F$H._isFirstTouch||F$De.isInputting||F$e.preventDefault(),F$o.mouseDownTime=F$k.now())}),F$F.addEventListener("touchend",function(F$e){F$H.enabled?(F$H._isFirstTouch||F$De.isInputting||F$e.preventDefault(),F$H._isFirstTouch=!1,F$E.push(F$e),F$o.mouseDownTime=-F$k.now()):F$a._curTouchID=NaN},!0),F$F.addEventListener("touchmove",function(F$e){F$H.enabled&&(F$e.preventDefault(),F$E.push(F$e))},!0),F$F.addEventListener("touchcancel",function(F$e){F$H.enabled?(F$e.preventDefault(),F$E.push(F$e)):F$a._curTouchID=NaN},!0),F$F.addEventListener("mousewheel",function(F$e){F$H.enabled&&F$E.push(F$e)}),F$F.addEventListener("DOMMouseScroll",function(F$e){F$H.enabled&&F$E.push(F$e)})},F$e.initEvent=function(F$e,F$F){var F$a;this._event._stoped=!1,this._event.nativeEvent=F$F||F$e,this._target=null,this._point.setTo(F$e.pageX||F$e.clientX,F$e.pageY||F$e.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=F$e.identifier||0,this._tTouchID=this._event.touchId,(F$a=F$P.I._event)._stoped=!1,F$a.nativeEvent=this._event.nativeEvent,F$a.touchId=this._event.touchId},F$e.checkMouseWheel=function(F$e){this._event.delta=F$e.wheelDelta?.025*F$e.wheelDelta:-F$e.detail;for(var F$F=F$P.I.getLastOvers(),F$a=0,F$o=F$F.length;F$a<F$o;F$a++){var F$E=F$F[F$a];F$E.event("mousewheel",this._event.setTo("mousewheel",F$E,this._target))}},F$e.onMouseMove=function(F$e){F$P.I.onMouseMove(F$e,this._tTouchID)},F$e.onMouseDown=function(F$e){if(F$De.isInputting&&F$b.stage.focus&&F$b.stage.focus.focus&&!F$b.stage.focus.contains(this._target)){var F$F=F$b.stage.focus._tf||F$b.stage.focus,F$a=F$e._tf||F$e;F$a instanceof laya.display.Input&&F$a.multiline==F$F.multiline?F$F._focusOut():F$F.focus=!1}F$P.I.onMouseDown(F$e,this._tTouchID,this._isLeftMouse)},F$e.onMouseUp=function(F$e){F$P.I.onMouseUp(F$e,this._tTouchID,this._isLeftMouse)},F$e.check=function(F$e,F$F,F$a,F$o){this._point.setTo(F$F,F$a),F$e.fromParentPoint(this._point),F$F=this._point.x,F$a=this._point.y;var F$E=F$e.scrollRect;if(F$E&&(this._rect.setTo(F$E.x,F$E.y,F$E.width,F$E.height),!this._rect.contains(F$F,F$a)))return!1;if(!this.disableMouseEvent){if(F$e.hitTestPrior&&!F$e.mouseThrough&&!this.hitTest(F$e,F$F,F$a))return!1;for(var F$s=F$e._childs.length-1;-1<F$s;F$s--){var F$Y=F$e._childs[F$s];if(!F$Y.destroyed&&F$Y.mouseEnabled&&F$Y.visible&&this.check(F$Y,F$F,F$a,F$o))return!0}}var F$_=!(!F$e.hitTestPrior||F$e.mouseThrough||this.disableMouseEvent)||this.hitTest(F$e,F$F,F$a);return F$_?(this._target=F$e,F$o.call(this,F$e)):F$o===this.onMouseUp&&F$e===this._stage&&(this._target=this._stage,F$o.call(this,this._target)),F$_},F$e.hitTest=function(F$e,F$F,F$a){var F$o=!1;if(F$e.scrollRect&&(F$F-=F$e.scrollRect.x,F$a-=F$e.scrollRect.y),F$e.hitArea instanceof laya.utils.HitArea)return F$e.hitArea.isHit(F$F,F$a);if(0<F$e.width&&0<F$e.height||F$e.mouseThrough||F$e.hitArea)if(F$e.mouseThrough)F$o=F$e.getGraphicBounds().contains(F$F,F$a);else{var F$E=this._rect;F$e.hitArea?F$E=F$e.hitArea:F$E.setTo(0,0,F$e.width,F$e.height),F$o=F$E.contains(F$F,F$a)}return F$o},F$e.runEvent=function(){var F$e=this._eventList.length;if(F$e){this.mouseEventTime=F$k.now();var F$F,F$a=0,F$o=0,F$E=0;try{for(;F$a<F$e;){var F$s=this._eventList[F$a];switch("mousemove"!==F$s.type&&(this._prePoint.x=this._prePoint.y=-1e6),F$s.type){case"mousedown":this._touchIDs[0]=this._id++,F$H._isTouchRespond?F$H._isTouchRespond=!1:(this._isLeftMouse=0===F$s.button,this.initEvent(F$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===F$s.button,this.initEvent(F$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-F$s.clientX)+Math.abs(this._prePoint.y-F$s.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=F$s.clientX,this._prePoint.y=F$s.clientY,this.initEvent(F$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":F$H._isTouchRespond=!0,this._isLeftMouse=!0;var F$Y=F$s.changedTouches;for(F$o=0,F$E=F$Y.length;F$o<F$E;F$o++)F$F=F$Y[F$o],(F$H.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=F$F.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[F$F.identifier]=this._id++,this.initEvent(F$F,F$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":F$H._isTouchRespond=!0,this._isLeftMouse=!0;var F$_=F$s.changedTouches;for(F$o=0,F$E=F$_.length;F$o<F$E;F$o++)if(F$F=F$_[F$o],F$H.multiTouchEnabled||F$F.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(F$F,F$s);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var F$R=F$s.changedTouches;for(F$o=0,F$E=F$R.length;F$o<F$E;F$o++)F$F=F$R[F$o],(F$H.multiTouchEnabled||F$F.identifier==this._curTouchID)&&(this.initEvent(F$F,F$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(F$s);break;case"mouseout":F$P.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}F$a++}}catch(F$e){throw this._eventList.length=0,F$e}this._eventList.length=0}},F$H.enabled=!0,F$H.multiTouchEnabled=!0,F$H._isTouchRespond=!1,F$H._isFirstTouch=!0,F$R(F$H,["instance",function(){return this.instance=new F$H}]),F$H}()),F$P=function(){function F$I(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new F$s}F$g(F$I,"laya.events.TouchManager");var F$e=F$I.prototype;return F$e._clearTempArrs=function(){F$I._oldArr.length=0,F$I._newArr.length=0,F$I._tEleArr.length=0},F$e.getTouchFromArr=function(F$e,F$F){var F$a,F$o,F$E=0;for(F$a=F$F.length,F$E=0;F$E<F$a;F$E++)if((F$o=F$F[F$E]).id==F$e)return F$o;return null},F$e.removeTouchFromArr=function(F$e,F$F){var F$a=0;for(F$a=F$F.length-1;0<=F$a;F$a--)F$F[F$a].id==F$e&&F$F.splice(F$a,1)},F$e.createTouchO=function(F$e,F$F){var F$a;return(F$a=F$X.getItem("TouchData")||{}).id=F$F,F$a.tar=F$e,F$a},F$e.onMouseDown=function(F$e,F$F,F$a){var F$o,F$E,F$s,F$Y;(void 0===F$a&&(F$a=!1),this.enable)&&(F$o=this.getTouchFromArr(F$F,this.preOvers),F$s=this.getEles(F$e,null,F$I._tEleArr),F$o?F$o.tar=F$e:(F$E=this.createTouchO(F$e,F$F),this.preOvers.push(F$E)),F$k.onMobile&&this.sendEvents(F$s,"mouseover",F$F),F$Y=F$a?this.preDowns:this.preRightDowns,(F$o=this.getTouchFromArr(F$F,F$Y))?F$o.tar=F$e:(F$E=this.createTouchO(F$e,F$F),F$Y.push(F$E)),this.sendEvents(F$s,F$a?"mousedown":"rightmousedown",F$F),this._clearTempArrs())},F$e.sendEvents=function(F$e,F$F,F$a){void 0===F$a&&(F$a=0);var F$o,F$E,F$s,F$Y=0;for(F$o=F$e.length,this._event._stoped=!1,F$E=F$e[0],F$Y=0;F$Y<F$o;F$Y++){if((F$s=F$e[F$Y]).destroyed)return;if(F$s.event(F$F,this._event.setTo(F$F,F$s,F$E)),this._event._stoped)break}},F$e.getEles=function(F$e,F$F,F$a){for(F$a?F$a.length=0:F$a=[];F$e&&F$e!=F$F;)F$a.push(F$e),F$e=F$e.parent;return F$a},F$e.checkMouseOutAndOverOfMove=function(F$e,F$F,F$a){if(void 0===F$a&&(F$a=0),F$F!=F$e){var F$o,F$E,F$s=0,F$Y=0;if(F$F.contains(F$e))F$E=this.getEles(F$e,F$F,F$I._tEleArr),this.sendEvents(F$E,"mouseover",F$a);else if(F$e.contains(F$F))F$E=this.getEles(F$F,F$e,F$I._tEleArr),this.sendEvents(F$E,"mouseout",F$a);else{var F$_,F$R;(F$E=F$I._tEleArr).length=0,F$_=this.getEles(F$F,null,F$I._oldArr),F$R=this.getEles(F$e,null,F$I._newArr),F$Y=F$_.length;var F$H=0;for(F$s=0;F$s<F$Y;F$s++){if(F$o=F$_[F$s],0<=(F$H=F$R.indexOf(F$o))){F$R.splice(F$H,F$R.length-F$H);break}F$E.push(F$o)}0<F$E.length&&this.sendEvents(F$E,"mouseout",F$a),0<F$R.length&&this.sendEvents(F$R,"mouseover",F$a)}}},F$e.onMouseMove=function(F$e,F$F){var F$a,F$o;this.enable&&((F$a=this.getTouchFromArr(F$F,this.preOvers))?(this.checkMouseOutAndOverOfMove(F$e,F$a.tar),F$a.tar=F$e,F$o=this.getEles(F$e,null,F$I._tEleArr)):(F$o=this.getEles(F$e,null,F$I._tEleArr),this.sendEvents(F$o,"mouseover",F$F),this.preOvers.push(this.createTouchO(F$e,F$F))),this.sendEvents(F$o,"mousemove",F$F),this._clearTempArrs())},F$e.getLastOvers=function(){return(F$I._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,F$I._tEleArr):(F$I._tEleArr.push(F$b.stage),F$I._tEleArr)},F$e.stageMouseOut=function(){var F$e;F$e=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(F$e,"mouseout",0)},F$e.onMouseUp=function(F$e,F$F,F$a){if(void 0===F$a&&(F$a=!1),this.enable){var F$o,F$E,F$s,F$Y,F$_,F$R,F$H=0,F$g=0,F$n=F$k.onMobile;if(F$E=this.getEles(F$e,null,F$I._tEleArr),this.sendEvents(F$E,F$a?"mouseup":"rightmouseup",F$F),F$R=F$a?this.preDowns:this.preRightDowns,F$o=this.getTouchFromArr(F$F,F$R)){var F$O,F$q=F$k.now();if(F$O=F$q-this._lastClickTime<300,this._lastClickTime=F$q,F$e==F$o.tar)F$_=F$E;else for(F$s=this.getEles(F$o.tar,null,F$I._oldArr),(F$_=F$I._newArr).length=0,F$g=F$s.length,F$H=0;F$H<F$g;F$H++)F$Y=F$s[F$H],0<=F$E.indexOf(F$Y)&&F$_.push(F$Y);0<F$_.length&&this.sendEvents(F$_,F$a?"click":"rightclick",F$F),F$a&&F$O&&this.sendEvents(F$_,"doubleclick",F$F),this.removeTouchFromArr(F$F,F$R),F$o.tar=null,F$X.recover("TouchData",F$o)}else;(F$o=this.getTouchFromArr(F$F,this.preOvers))&&F$n&&((F$_=this.getEles(F$o.tar,null,F$_))&&0<F$_.length&&this.sendEvents(F$_,"mouseout",F$F),this.removeTouchFromArr(F$F,this.preOvers),F$o.tar=null,F$X.recover("TouchData",F$o)),this._clearTempArrs()}},F$I._oldArr=[],F$I._newArr=[],F$I._tEleArr=[],F$R(F$I,["I",function(){return this.I=new F$I}]),F$I}(),F$j=function(){function F$e(){this._action=null}F$g(F$e,"laya.filters.Filter");var F$F=F$e.prototype;return F$b.imps(F$F,{"laya.filters.IFilter":!0}),F$F.callNative=function(F$e){},F$I(0,F$F,"type",function(){return-1}),F$I(0,F$F,"action",function(){return this._action}),F$e.BLUR=16,F$e.COLOR=32,F$e.GLOW=8,F$e._filterStart=null,F$e._filterEnd=null,F$e._EndTarget=null,F$e._recycleScope=null,F$e._filter=null,F$e._useSrc=null,F$e._endSrc=null,F$e._useOut=null,F$e._endOut=null,F$e}(),F$y=function(){function F$e(){this.data=null}F$g(F$e,"laya.filters.ColorFilterAction");var F$F=F$e.prototype;return F$b.imps(F$F,{"laya.filters.IFilterAction":!0}),F$F.apply=function(F$e){var F$F=F$e.ctx.ctx,F$a=F$e.ctx.ctx.canvas;if(0==F$a.width||0==F$a.height)return F$a;for(var F$o,F$E=F$F.getImageData(0,0,F$a.width,F$a.height),F$s=F$E.data,F$Y=0,F$_=F$s.length;F$Y<F$_;F$Y+=4)F$o=this.getColor(F$s[F$Y],F$s[F$Y+1],F$s[F$Y+2],F$s[F$Y+3]),0!=F$s[F$Y+3]&&(F$s[F$Y]=F$o[0],F$s[F$Y+1]=F$o[1],F$s[F$Y+2]=F$o[2],F$s[F$Y+3]=F$o[3]);return F$F.putImageData(F$E,0,0),F$e},F$F.getColor=function(F$e,F$F,F$a,F$o){var F$E=[];if(this.data._mat&&this.data._alpha){var F$s=this.data._mat,F$Y=this.data._alpha;F$E[0]=F$s[0]*F$e+F$s[1]*F$F+F$s[2]*F$a+F$s[3]*F$o+F$Y[0],F$E[1]=F$s[4]*F$e+F$s[5]*F$F+F$s[6]*F$a+F$s[7]*F$o+F$Y[1],F$E[2]=F$s[8]*F$e+F$s[9]*F$F+F$s[10]*F$a+F$s[11]*F$o+F$Y[2],F$E[3]=F$s[12]*F$e+F$s[13]*F$F+F$s[14]*F$a+F$s[15]*F$o+F$Y[3]}return F$E},F$e}(),F$M=(function(){function F$e(){}F$g(F$e,"laya.maths.Arith"),F$e.formatR=function(F$e){return F$e>Math.PI&&(F$e-=2*Math.PI),F$e<-Math.PI&&(F$e+=2*Math.PI),F$e},F$e.isPOT=function(F$e,F$F){return 0<F$e&&0==(F$e&F$e-1)&&0<F$F&&0==(F$F&F$F-1)},F$e.setMatToArray=function(F$e,F$F){F$e.a,F$e.b,F$e.c,F$e.d,F$e.tx,F$e.ty,F$F[0]=F$e.a,F$F[1]=F$e.b,F$F[4]=F$e.c,F$F[5]=F$e.d,F$F[12]=F$e.tx,F$F[13]=F$e.ty}}(),function(){function F$e(){this._controlPoints=[new F$L,new F$L,new F$L],this._calFun=this.getPoint2}F$g(F$e,"laya.maths.Bezier");var F$F=F$e.prototype;return F$F._switchPoint=function(F$e,F$F){var F$a=this._controlPoints.shift();F$a.setTo(F$e,F$F),this._controlPoints.push(F$a)},F$F.getPoint2=function(F$e,F$F){var F$a=this._controlPoints[0],F$o=this._controlPoints[1],F$E=this._controlPoints[2],F$s=Math.pow(1-F$e,2)*F$a.x+2*F$e*(1-F$e)*F$o.x+Math.pow(F$e,2)*F$E.x,F$Y=Math.pow(1-F$e,2)*F$a.y+2*F$e*(1-F$e)*F$o.y+Math.pow(F$e,2)*F$E.y;F$F.push(F$s,F$Y)},F$F.getPoint3=function(F$e,F$F){var F$a=this._controlPoints[0],F$o=this._controlPoints[1],F$E=this._controlPoints[2],F$s=this._controlPoints[3],F$Y=Math.pow(1-F$e,3)*F$a.x+3*F$o.x*F$e*(1-F$e)*(1-F$e)+3*F$E.x*F$e*F$e*(1-F$e)+F$s.x*Math.pow(F$e,3),F$_=Math.pow(1-F$e,3)*F$a.y+3*F$o.y*F$e*(1-F$e)*(1-F$e)+3*F$E.y*F$e*F$e*(1-F$e)+F$s.y*Math.pow(F$e,3);F$F.push(F$Y,F$_)},F$F.insertPoints=function(F$e,F$F){var F$a,F$o=NaN;for(F$a=1/(F$e=0<F$e?F$e:5),F$o=0;F$o<=1;F$o+=F$a)this._calFun(F$o,F$F)},F$F.getBezierPoints=function(F$e,F$F,F$a){void 0===F$F&&(F$F=5),void 0===F$a&&(F$a=2);var F$o,F$E,F$s=0;if((F$o=F$e.length)<2*(F$a+1))return[];switch(F$E=[],F$a){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=F$a;)this._controlPoints.push(new F$L);for(F$s=0;F$s<2*F$a;F$s+=2)this._switchPoint(F$e[F$s],F$e[F$s+1]);for(F$s=2*F$a;F$s<F$o;F$s+=2)this._switchPoint(F$e[F$s],F$e[F$s+1]),F$s/2%F$a==0&&this.insertPoints(F$F,F$E);return F$E},F$R(F$e,["I",function(){return this.I=new F$e}]),F$e}()),F$D=function(){function F$H(){}return F$g(F$H,"laya.maths.GrahamScan"),F$H.multiply=function(F$e,F$F,F$a){return(F$e.x-F$a.x)*(F$F.y-F$a.y)-(F$F.x-F$a.x)*(F$e.y-F$a.y)},F$H.dis=function(F$e,F$F){return(F$e.x-F$F.x)*(F$e.x-F$F.x)+(F$e.y-F$F.y)*(F$e.y-F$F.y)},F$H._getPoints=function(F$e,F$F,F$a){for(void 0===F$F&&(F$F=!1),F$H._mPointList||(F$H._mPointList=[]);F$H._mPointList.length<F$e;)F$H._mPointList.push(new F$L);return F$a||(F$a=[]),F$a.length=0,F$F?F$H.getFrom(F$a,F$H._mPointList,F$e):F$H.getFromR(F$a,F$H._mPointList,F$e),F$a},F$H.getFrom=function(F$e,F$F,F$a){var F$o=0;for(F$o=0;F$o<F$a;F$o++)F$e.push(F$F[F$o]);return F$e},F$H.getFromR=function(F$e,F$F,F$a){var F$o=0;for(F$o=0;F$o<F$a;F$o++)F$e.push(F$F.pop());return F$e},F$H.pListToPointList=function(F$e,F$F){void 0===F$F&&(F$F=!1);var F$a=0,F$o=F$e.length/2,F$E=F$H._getPoints(F$o,F$F,F$H._tempPointList);for(F$a=0;F$a<F$o;F$a++)F$E[F$a].setTo(F$e[F$a+F$a],F$e[F$a+F$a+1]);return F$E},F$H.pointListToPlist=function(F$e){var F$F,F$a=0,F$o=F$e.length,F$E=F$H._temPList;for(F$a=F$E.length=0;F$a<F$o;F$a++)F$F=F$e[F$a],F$E.push(F$F.x,F$F.y);return F$E},F$H.scanPList=function(F$e){return F$Q.copyArray(F$e,F$H.pointListToPlist(F$H.scan(F$H.pListToPointList(F$e,!0))))},F$H.scan=function(F$e){var F$F,F$a,F$o,F$E=0,F$s=0,F$Y=0,F$_=F$e.length,F$R={};for((F$a=F$H._temArr).length=0,F$E=(F$_=F$e.length)-1;0<=F$E;F$E--)F$o=(F$F=F$e[F$E]).x+"_"+F$F.y,F$R.hasOwnProperty(F$o)||(F$R[F$o]=!0,F$a.push(F$F));for(F$_=F$a.length,F$Q.copyArray(F$e,F$a),F$E=1;F$E<F$_;F$E++)(F$e[F$E].y<F$e[F$Y].y||F$e[F$E].y==F$e[F$Y].y&&F$e[F$E].x<F$e[F$Y].x)&&(F$Y=F$E);for(F$F=F$e[0],F$e[0]=F$e[F$Y],F$e[F$Y]=F$F,F$E=1;F$E<F$_-1;F$E++){for(F$s=(F$Y=F$E)+1;F$s<F$_;F$s++)(0<F$H.multiply(F$e[F$s],F$e[F$Y],F$e[0])||0==F$H.multiply(F$e[F$s],F$e[F$Y],F$e[0])&&F$H.dis(F$e[0],F$e[F$s])<F$H.dis(F$e[0],F$e[F$Y]))&&(F$Y=F$s);F$F=F$e[F$E],F$e[F$E]=F$e[F$Y],F$e[F$Y]=F$F}if((F$a=F$H._temArr).length=0,F$e.length<3)return F$Q.copyArray(F$a,F$e);for(F$a.push(F$e[0],F$e[1],F$e[2]),F$E=3;F$E<F$_;F$E++){for(;2<=F$a.length&&0<=F$H.multiply(F$e[F$E],F$a[F$a.length-1],F$a[F$a.length-2]);)F$a.pop();F$e[F$E]&&F$a.push(F$e[F$E])}return F$a},F$H._mPointList=null,F$H._tempPointList=[],F$H._temPList=[],F$H._temArr=[],F$H}(),F$m=function(){function F$E(){}return F$g(F$E,"laya.maths.MathUtil"),F$E.subtractVector3=function(F$e,F$F,F$a){F$a[0]=F$e[0]-F$F[0],F$a[1]=F$e[1]-F$F[1],F$a[2]=F$e[2]-F$F[2]},F$E.lerp=function(F$e,F$F,F$a){return F$e*(1-F$a)+F$F*F$a},F$E.scaleVector3=function(F$e,F$F,F$a){F$a[0]=F$e[0]*F$F,F$a[1]=F$e[1]*F$F,F$a[2]=F$e[2]*F$F},F$E.lerpVector3=function(F$e,F$F,F$a,F$o){var F$E=F$e[0],F$s=F$e[1],F$Y=F$e[2];F$o[0]=F$E+F$a*(F$F[0]-F$E),F$o[1]=F$s+F$a*(F$F[1]-F$s),F$o[2]=F$Y+F$a*(F$F[2]-F$Y)},F$E.lerpVector4=function(F$e,F$F,F$a,F$o){var F$E=F$e[0],F$s=F$e[1],F$Y=F$e[2],F$_=F$e[3];F$o[0]=F$E+F$a*(F$F[0]-F$E),F$o[1]=F$s+F$a*(F$F[1]-F$s),F$o[2]=F$Y+F$a*(F$F[2]-F$Y),F$o[3]=F$_+F$a*(F$F[3]-F$_)},F$E.slerpQuaternionArray=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_,F$R,F$H,F$g,F$n,F$O=F$e[F$F+0],F$q=F$e[F$F+1],F$I=F$e[F$F+2],F$l=F$e[F$F+3],F$P=F$a[F$o+0],F$j=F$a[F$o+1],F$$=F$a[F$o+2],F$y=F$a[F$o+3];return(F$R=F$O*F$P+F$q*F$j+F$I*F$$+F$l*F$y)<0&&(F$R=-F$R,F$P=-F$P,F$j=-F$j,F$$=-F$$,F$y=-F$y),F$n=1e-6<1-F$R?(F$_=Math.acos(F$R),F$H=Math.sin(F$_),F$g=Math.sin((1-F$E)*F$_)/F$H,Math.sin(F$E*F$_)/F$H):(F$g=1-F$E,F$E),F$s[F$Y+0]=F$g*F$O+F$n*F$P,F$s[F$Y+1]=F$g*F$q+F$n*F$j,F$s[F$Y+2]=F$g*F$I+F$n*F$$,F$s[F$Y+3]=F$g*F$l+F$n*F$y,F$s},F$E.getRotation=function(F$e,F$F,F$a,F$o){return Math.atan2(F$o-F$F,F$a-F$e)/Math.PI*180},F$E.sortBigFirst=function(F$e,F$F){return F$e==F$F?0:F$e<F$F?1:-1},F$E.sortSmallFirst=function(F$e,F$F){return F$e==F$F?0:F$e<F$F?-1:1},F$E.sortNumBigFirst=function(F$e,F$F){return parseFloat(F$F)-parseFloat(F$e)},F$E.sortNumSmallFirst=function(F$e,F$F){return parseFloat(F$e)-parseFloat(F$F)},F$E.sortByKey=function(F$a,F$e,F$F){var F$o;return void 0===F$e&&(F$e=!1),void 0===F$F&&(F$F=!0),F$o=F$e?F$F?F$E.sortNumBigFirst:F$E.sortBigFirst:F$F?F$E.sortNumSmallFirst:F$E.sortSmallFirst,function(F$e,F$F){return F$o(F$e[F$a],F$F[F$a])}},F$E}(),F$A=function(){function F$a(F$e,F$F,F$a,F$o,F$E,F$s){this.inPool=!1,this.bTransform=!1,void 0===F$e&&(F$e=1),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=1),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=0),this.a=F$e,this.b=F$F,this.c=F$a,this.d=F$o,this.tx=F$E,this.ty=F$s,this._checkTransform()}F$g(F$a,"laya.maths.Matrix");var F$e=F$a.prototype;return F$e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},F$e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},F$e.setTranslate=function(F$e,F$F){return this.tx=F$e,this.ty=F$F,this},F$e.translate=function(F$e,F$F){return this.tx+=F$e,this.ty+=F$F,this},F$e.scale=function(F$e,F$F){this.a*=F$e,this.d*=F$F,this.c*=F$e,this.b*=F$F,this.tx*=F$e,this.ty*=F$F,this.bTransform=!0},F$e.rotate=function(F$e){var F$F=Math.cos(F$e),F$a=Math.sin(F$e),F$o=this.a,F$E=this.c,F$s=this.tx;this.a=F$o*F$F-this.b*F$a,this.b=F$o*F$a+this.b*F$F,this.c=F$E*F$F-this.d*F$a,this.d=F$E*F$a+this.d*F$F,this.tx=F$s*F$F-this.ty*F$a,this.ty=F$s*F$a+this.ty*F$F,this.bTransform=!0},F$e.skew=function(F$e,F$F){var F$a=Math.tan(F$e),F$o=Math.tan(F$F),F$E=this.a,F$s=this.b;return this.a+=F$o*this.c,this.b+=F$o*this.d,this.c+=F$a*F$E,this.d+=F$a*F$s,this},F$e.invertTransformPoint=function(F$e){var F$F=this.a,F$a=this.b,F$o=this.c,F$E=this.d,F$s=this.tx,F$Y=F$F*F$E-F$a*F$o,F$_=F$E/F$Y,F$R=-F$a/F$Y,F$H=-F$o/F$Y,F$g=F$F/F$Y,F$n=(F$o*this.ty-F$E*F$s)/F$Y,F$O=-(F$F*this.ty-F$a*F$s)/F$Y;return F$e.setTo(F$_*F$e.x+F$H*F$e.y+F$n,F$R*F$e.x+F$g*F$e.y+F$O)},F$e.transformPoint=function(F$e){return F$e.setTo(this.a*F$e.x+this.c*F$e.y+this.tx,this.b*F$e.x+this.d*F$e.y+this.ty)},F$e.transformPointN=function(F$e){return F$e.setTo(this.a*F$e.x+this.c*F$e.y,this.b*F$e.x+this.d*F$e.y)},F$e.transformPointArray=function(F$e,F$F){for(var F$a=F$e.length,F$o=0;F$o<F$a;F$o+=2){var F$E=F$e[F$o],F$s=F$e[F$o+1];F$F[F$o]=this.a*F$E+this.c*F$s+this.tx,F$F[F$o+1]=this.b*F$E+this.d*F$s+this.ty}return F$F},F$e.transformPointArrayScale=function(F$e,F$F){for(var F$a=F$e.length,F$o=0;F$o<F$a;F$o+=2){var F$E=F$e[F$o],F$s=F$e[F$o+1];F$F[F$o]=this.a*F$E+this.c*F$s,F$F[F$o+1]=this.b*F$E+this.d*F$s}return F$F},F$e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},F$e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},F$e.invert=function(){var F$e=this.a,F$F=this.b,F$a=this.c,F$o=this.d,F$E=this.tx,F$s=F$e*F$o-F$F*F$a;return this.a=F$o/F$s,this.b=-F$F/F$s,this.c=-F$a/F$s,this.d=F$e/F$s,this.tx=(F$a*this.ty-F$o*F$E)/F$s,this.ty=-(F$e*this.ty-F$F*F$E)/F$s,this},F$e.setTo=function(F$e,F$F,F$a,F$o,F$E,F$s){return this.a=F$e,this.b=F$F,this.c=F$a,this.d=F$o,this.tx=F$E,this.ty=F$s,this},F$e.concat=function(F$e){var F$F=this.a,F$a=this.c,F$o=this.tx;return this.a=F$F*F$e.a+this.b*F$e.c,this.b=F$F*F$e.b+this.b*F$e.d,this.c=F$a*F$e.a+this.d*F$e.c,this.d=F$a*F$e.b+this.d*F$e.d,this.tx=F$o*F$e.a+this.ty*F$e.c+F$e.tx,this.ty=F$o*F$e.b+this.ty*F$e.d+F$e.ty,this},F$e.scaleEx=function(F$e,F$F){var F$a=this.a,F$o=this.b,F$E=this.c,F$s=this.d;0!==F$o||0!==F$E?(this.a=F$e*F$a,this.b=F$e*F$o,this.c=F$F*F$E):(this.a=F$e*F$a,this.b=0*F$s,this.c=0*F$a),this.d=F$F*F$s,this.bTransform=!0},F$e.rotateEx=function(F$e){var F$F=Math.cos(F$e),F$a=Math.sin(F$e),F$o=this.a,F$E=this.b,F$s=this.c,F$Y=this.d;0!==F$E||0!==F$s?(this.a=F$F*F$o+F$a*F$s,this.b=F$F*F$E+F$a*F$Y,this.c=-F$a*F$o+F$F*F$s,this.d=-F$a*F$E+F$F*F$Y):(this.a=F$F*F$o,this.b=F$a*F$Y,this.c=-F$a*F$o,this.d=F$F*F$Y),this.bTransform=!0},F$e.clone=function(){var F$e=F$a.create();return F$e.a=this.a,F$e.b=this.b,F$e.c=this.c,F$e.d=this.d,F$e.tx=this.tx,F$e.ty=this.ty,F$e.bTransform=this.bTransform,F$e},F$e.copyTo=function(F$e){return F$e.a=this.a,F$e.b=this.b,F$e.c=this.c,F$e.d=this.d,F$e.tx=this.tx,F$e.ty=this.ty,F$e.bTransform=this.bTransform,F$e},F$e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},F$e.destroy=function(){if(!this.inPool){var F$e=F$a._cache;this.inPool=!0,F$e._length||(F$e._length=0),(F$e[F$e._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},F$a.mul=function(F$e,F$F,F$a){var F$o=F$e.a,F$E=F$e.b,F$s=F$e.c,F$Y=F$e.d,F$_=F$e.tx,F$R=F$e.ty,F$H=F$F.a,F$g=F$F.b,F$n=F$F.c,F$O=F$F.d,F$q=F$F.tx,F$I=F$F.ty;return 0!==F$g||0!==F$n?(F$a.a=F$o*F$H+F$E*F$n,F$a.b=F$o*F$g+F$E*F$O,F$a.c=F$s*F$H+F$Y*F$n,F$a.d=F$s*F$g+F$Y*F$O,F$a.tx=F$H*F$_+F$n*F$R+F$q,F$a.ty=F$g*F$_+F$O*F$R+F$I):(F$a.a=F$o*F$H,F$a.b=F$E*F$O,F$a.c=F$s*F$H,F$a.d=F$Y*F$O,F$a.tx=F$H*F$_+F$q,F$a.ty=F$O*F$R+F$I),F$a},F$a.mul16=function(F$e,F$F,F$a){var F$o=F$e.a,F$E=F$e.b,F$s=F$e.c,F$Y=F$e.d,F$_=F$e.tx,F$R=F$e.ty,F$H=F$F.a,F$g=F$F.b,F$n=F$F.c,F$O=F$F.d,F$q=F$F.tx,F$I=F$F.ty;return 0!==F$g||0!==F$n?(F$a[0]=F$o*F$H+F$E*F$n,F$a[1]=F$o*F$g+F$E*F$O,F$a[4]=F$s*F$H+F$Y*F$n,F$a[5]=F$s*F$g+F$Y*F$O,F$a[12]=F$H*F$_+F$n*F$R+F$q,F$a[13]=F$g*F$_+F$O*F$R+F$I):(F$a[0]=F$o*F$H,F$a[1]=F$E*F$O,F$a[4]=F$s*F$H,F$a[5]=F$Y*F$O,F$a[12]=F$H*F$_+F$q,F$a[13]=F$O*F$R+F$I),F$a},F$a.mulPre=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=F$e.a,F$H=F$e.b,F$g=F$e.c,F$n=F$e.d,F$O=F$e.tx,F$q=F$e.ty;return 0!==F$a||0!==F$o?(F$_.a=F$R*F$F+F$H*F$o,F$_.b=F$R*F$a+F$H*F$E,F$_.c=F$g*F$F+F$n*F$o,F$_.d=F$g*F$a+F$n*F$E,F$_.tx=F$F*F$O+F$o*F$q+F$s,F$_.ty=F$a*F$O+F$E*F$q+F$Y):(F$_.a=F$R*F$F,F$_.b=F$H*F$E,F$_.c=F$g*F$F,F$_.d=F$n*F$E,F$_.tx=F$F*F$O+F$s,F$_.ty=F$E*F$q+F$Y),F$_},F$a.mulPos=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=F$e.a,F$H=F$e.b,F$g=F$e.c,F$n=F$e.d,F$O=F$e.tx,F$q=F$e.ty;return 0!==F$H||0!==F$g?(F$_.a=F$F*F$R+F$a*F$g,F$_.b=F$F*F$H+F$a*F$n,F$_.c=F$o*F$R+F$E*F$g,F$_.d=F$o*F$H+F$E*F$n,F$_.tx=F$R*F$s+F$g*F$Y+F$O,F$_.ty=F$H*F$s+F$n*F$Y+F$q):(F$_.a=F$F*F$R,F$_.b=F$a*F$n,F$_.c=F$o*F$R,F$_.d=F$E*F$n,F$_.tx=F$R*F$s+F$O,F$_.ty=F$n*F$Y+F$q),F$_},F$a.preMul=function(F$e,F$F,F$a){var F$o=F$e.a,F$E=F$e.b,F$s=F$e.c,F$Y=F$e.d,F$_=F$F.a,F$R=F$F.b,F$H=F$F.c,F$g=F$F.d,F$n=F$F.tx,F$O=F$F.ty;return F$a.a=F$_*F$o,F$a.b=F$a.c=0,F$a.d=F$g*F$Y,F$a.tx=F$n*F$o+F$e.tx,F$a.ty=F$O*F$Y+F$e.ty,0===F$R&&0===F$H&&0===F$E&&0===F$s||(F$a.a+=F$R*F$s,F$a.d+=F$H*F$E,F$a.b+=F$_*F$E+F$R*F$Y,F$a.c+=F$H*F$o+F$g*F$s,F$a.tx+=F$O*F$s,F$a.ty+=F$n*F$E),F$a},F$a.preMulXY=function(F$e,F$F,F$a,F$o){var F$E=F$e.a,F$s=F$e.b,F$Y=F$e.c,F$_=F$e.d;return F$o.a=F$E,F$o.b=F$s,F$o.c=F$Y,F$o.d=F$_,F$o.tx=F$F*F$E+F$e.tx+F$a*F$Y,F$o.ty=F$a*F$_+F$e.ty+F$F*F$s,F$o},F$a.create=function(){var F$e=F$a._cache,F$F=F$e._length?F$e[--F$e._length]:new F$a;return F$F.inPool=!1,F$F},F$a.EMPTY=new F$a,F$a.TEMP=new F$a,F$a._cache=[],F$a}(),F$L=function(){function F$e(F$e,F$F){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),this.x=F$e,this.y=F$F}F$g(F$e,"laya.maths.Point");var F$F=F$e.prototype;return F$F.setTo=function(F$e,F$F){return this.x=F$e,this.y=F$F,this},F$F.distance=function(F$e,F$F){return Math.sqrt((this.x-F$e)*(this.x-F$e)+(this.y-F$F)*(this.y-F$F))},F$F.toString=function(){return this.x+","+this.y},F$F.normalize=function(){var F$e=Math.sqrt(this.x*this.x+this.y*this.y);if(0<F$e){var F$F=1/F$e;this.x*=F$F,this.y*=F$F}},F$e.TEMP=new F$e,F$e.EMPTY=new F$e,F$e}(),F$B=function(){function F$H(F$e,F$F,F$a,F$o){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),this.x=F$e,this.y=F$F,this.width=F$a,this.height=F$o}F$g(F$H,"laya.maths.Rectangle");var F$e=F$H.prototype;return F$e.setTo=function(F$e,F$F,F$a,F$o){return this.x=F$e,this.y=F$F,this.width=F$a,this.height=F$o,this},F$e.copyFrom=function(F$e){return this.x=F$e.x,this.y=F$e.y,this.width=F$e.width,this.height=F$e.height,this},F$e.contains=function(F$e,F$F){return!(this.width<=0||this.height<=0)&&(F$e>=this.x&&F$e<this.right&&F$F>=this.y&&F$F<this.bottom)},F$e.intersects=function(F$e){return!(F$e.x>this.x+this.width||F$e.x+F$e.width<this.x||F$e.y>this.y+this.height||F$e.y+F$e.height<this.y)},F$e.intersection=function(F$e,F$F){return this.intersects(F$e)?(F$F||(F$F=new F$H),F$F.x=Math.max(this.x,F$e.x),F$F.y=Math.max(this.y,F$e.y),F$F.width=Math.min(this.right,F$e.right)-F$F.x,F$F.height=Math.min(this.bottom,F$e.bottom)-F$F.y,F$F):null},F$e.union=function(F$e,F$F){return F$F||(F$F=new F$H),this.clone(F$F),F$e.width<=0||F$e.height<=0?F$F:(F$F.addPoint(F$e.x,F$e.y),F$F.addPoint(F$e.right,F$e.bottom),this)},F$e.clone=function(F$e){return F$e||(F$e=new F$H),F$e.x=this.x,F$e.y=this.y,F$e.width=this.width,F$e.height=this.height,F$e},F$e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},F$e.equals=function(F$e){return!(!F$e||F$e.x!==this.x||F$e.y!==this.y||F$e.width!==this.width||F$e.height!==this.height)},F$e.addPoint=function(F$e,F$F){return this.x>F$e&&(this.width+=this.x-F$e,this.x=F$e),this.y>F$F&&(this.height+=this.y-F$F,this.y=F$F),this.width<F$e-this.x&&(this.width=F$e-this.x),this.height<F$F-this.y&&(this.height=F$F-this.y),this},F$e._getBoundPoints=function(){var F$e=F$H._temB;return(F$e.length=0)==this.width||0==this.height||F$e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),F$e},F$e.isEmpty=function(){return this.width<=0||this.height<=0},F$I(0,F$e,"right",function(){return this.x+this.width}),F$I(0,F$e,"bottom",function(){return this.y+this.height}),F$H._getBoundPointS=function(F$e,F$F,F$a,F$o){var F$E=F$H._temA;return(F$E.length=0)==F$a||0==F$o||F$E.push(F$e,F$F,F$e+F$a,F$F,F$e,F$F+F$o,F$e+F$a,F$F+F$o),F$E},F$H._getWrapRec=function(F$e,F$F){if(!F$e||F$e.length<1)return F$F?F$F.setTo(0,0,0,0):F$H.TEMP.setTo(0,0,0,0);F$F=F$F||new F$H;var F$a,F$o,F$E,F$s,F$Y,F$_=F$e.length,F$R=F$L.TEMP;for(F$E=F$Y=-(F$o=F$s=99999),F$a=0;F$a<F$_;F$a+=2)F$R.x=F$e[F$a],F$R.y=F$e[F$a+1],F$o=F$o<F$R.x?F$o:F$R.x,F$s=F$s<F$R.y?F$s:F$R.y,F$E=F$E>F$R.x?F$E:F$R.x,F$Y=F$Y>F$R.y?F$Y:F$R.y;return F$F.setTo(F$o,F$s,F$E-F$o,F$Y-F$s)},F$H.EMPTY=new F$H,F$H.TEMP=new F$H,F$H._temB=[],F$H._temA=[],F$H}(),F$V=function(){function F$R(){}return F$g(F$R,"laya.media.SoundManager"),F$I(1,F$R,"useAudioMusic",function(){return F$R._useAudioMusic},function(F$e){F$R._useAudioMusic=F$e,F$R._musicClass=F$e?F$ae:null}),F$I(1,F$R,"autoStopMusic",function(){return F$R._autoStopMusic},function(F$e){F$b.stage.off("blur",null,F$R._stageOnBlur),F$b.stage.off("focus",null,F$R._stageOnFocus),F$b.stage.off("visibilitychange",null,F$R._visibilityChange),(F$R._autoStopMusic=F$e)&&(F$b.stage.on("blur",null,F$R._stageOnBlur),F$b.stage.on("focus",null,F$R._stageOnFocus),F$b.stage.on("visibilitychange",null,F$R._visibilityChange))}),F$I(1,F$R,"muted",function(){return F$R._muted},function(F$e){F$e!=F$R._muted&&(F$e&&F$R.stopAllSound(),F$R.musicMuted=F$e,F$R._muted=F$e)}),F$I(1,F$R,"musicMuted",function(){return F$R._musicMuted},function(F$e){F$e!=F$R._musicMuted&&(F$e?(F$R._tMusic&&F$R._musicChannel&&!F$R._musicChannel.isStopped?F$R._musicChannel.pause():F$R._musicChannel=null,F$R._musicMuted=F$e):(F$R._musicMuted=F$e,F$R._tMusic&&F$R._musicChannel&&F$R._musicChannel.resume()))}),F$I(1,F$R,"soundMuted",function(){return F$R._soundMuted},function(F$e){F$R._soundMuted=F$e}),F$R.addChannel=function(F$e){0<=F$R._channels.indexOf(F$e)||(F$R._channels.push(F$e),F$R.autoReleaseSound&&0!=F$R._notUsedCount&&F$R._notUsedUrls[F$e.url]&&(delete F$R._notUsedUrls[F$e.url],0==--F$R._notUsedCount&&F$b.timer.clear(F$R,F$R.disposeSoundIfNotUsed)))},F$R.removeChannel=function(F$e){var F$F=F$R._channels,F$a=F$F.indexOf(F$e);if(-1!=F$a&&(F$F.splice(F$a,1),F$R.autoReleaseSound)){var F$o=F$e.url,F$E=F$R.defaultIntervals[F$o]||2e4;if(0<F$E){var F$s=!0;for(F$a=F$F.length-1;0<=F$a;F$a--)if(F$F[F$a].url==F$o){F$s=!1;break}F$s&&(F$R._notUsedUrls[F$o]=Date.now()+F$E,0==F$R._notUsedCount++&&F$b.timer.loop(1e4,F$R,F$R.disposeSoundIfNotUsed))}}},F$R.disposeSoundIfNotUsed=function(){var F$e=F$R._notUsedUrls;if(0!=F$R._notUsedCount){var F$F=Date.now();for(var F$a in F$e)F$F>=F$e[F$a]&&(delete F$e[F$a],--F$R._notUsedCount,F$R.destroySound(F$a));if(0!=F$R._notUsedCount)return}F$b.timer.clear(F$R,F$R.disposeSoundIfNotUsed)},F$R._visibilityChange=function(){F$b.stage.isVisibility?F$R._stageOnFocus():F$R._stageOnBlur()},F$R._stageOnBlur=function(){F$R._isActive=!1,F$R._musicChannel&&(F$R._musicChannel.isStopped||(F$R._blurPaused=!0,F$R._musicChannel.pause())),F$R.stopAllSound(),F$b.stage.once("mousedown",null,F$R._stageOnFocus)},F$R._recoverWebAudio=function(){F$se.ctx&&"running"!=F$se.ctx.state&&F$se.ctx.resume&&F$se.ctx.resume()},F$R._stageOnFocus=function(){if(F$R._isActive=!0,F$R._recoverWebAudio(),F$b.stage.off("mousedown",null,F$R._stageOnFocus),F$R._blurPaused){var F$e=F$R._musicChannel;F$e&&F$R._music&&F$e.isStopped&&(F$R._blurPaused=!1,F$R._music._disposed?F$R.playMusic(F$e.url,F$e.loops,F$e.startHandler,F$e.completeHandler,F$e.startTime):F$e.audioBuffer?F$e.resume():F$R._music.play(F$e.startTime,F$e.loops,F$e.startHandler,F$e))}},F$R.playSound=function(F$e,F$F,F$a,F$o,F$E,F$s){if(void 0===F$F&&(F$F=1),void 0===F$s&&(F$s=0),!F$e)return null;if(F$R._muted)return null;if(F$R._recoverWebAudio(),F$e==F$R._tMusic){if(F$R._musicMuted)return null}else{if(!F$R._isActive)return null;if(F$R._soundMuted)return null}var F$Y,F$_=F$R._pool[F$e];return F$E||(F$E=F$R._soundClass),F$_||((F$_=new F$E).load(F$e),F$R._pool[F$e]=F$_),(F$Y=F$_.play(F$s,F$F,F$a))?(F$e==F$R._tMusic&&(F$R._music=F$_,F$R._isActive||(F$R._blurPaused=!0,F$Y.pause())),F$Y.url=F$e,F$Y.volume=F$e==F$R._tMusic?F$R.musicVolume:F$R.soundVolume,F$Y.completeHandler=F$o,F$Y):null},F$R.destroySound=function(F$e){var F$F=F$R._pool[F$e];F$F&&(delete F$R._pool[F$e],F$F.dispose())},F$R.playMusic=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$F&&(F$F=0),void 0===F$E&&(F$E=0),F$R._tMusic=F$e,F$R._musicChannel&&F$R._musicChannel.stop(),F$R._musicChannel=F$R.playSound(F$e,F$F,F$a,F$o,null,F$E)},F$R.stopSound=function(F$e){for(var F$F,F$a=F$R._channels.length-1;0<=F$a;F$a--)(F$F=F$R._channels[F$a]).url==F$e&&F$F.stop()},F$R.stopAll=function(){F$R._tMusic=null;var F$e=0;for(F$e=F$R._channels.length-1;0<=F$e;F$e--)F$R._channels[F$e].stop()},F$R.stopAllSound=function(){var F$e,F$F=0;for(F$F=F$R._channels.length-1;0<=F$F;F$F--)(F$e=F$R._channels[F$F]).url!=F$R._tMusic&&F$e.stop()},F$R.stopMusic=function(){F$R._musicChannel&&F$R._musicChannel.stop(),F$R._tMusic=null},F$R.setSoundVolume=function(F$e,F$F){if(F$F)F$R._setVolume(F$F,F$e);else{F$R.soundVolume=F$e;var F$a,F$o=0;for(F$o=F$R._channels.length-1;0<=F$o;F$o--)(F$a=F$R._channels[F$o]).url!=F$R._tMusic&&(F$a.volume=F$e)}},F$R.setMusicVolume=function(F$e){F$R.musicVolume=F$e,F$R._setVolume(F$R._tMusic,F$e)},F$R._setVolume=function(F$e,F$F){for(var F$a,F$o=F$R._channels.length-1;0<=F$o;F$o--)(F$a=F$R._channels[F$o]).url==F$e&&(F$a.volume=F$F)},F$R.musicVolume=1,F$R.soundVolume=1,F$R.playbackRate=1,F$R._useAudioMusic=!0,F$R._muted=!1,F$R._soundMuted=!1,F$R._musicMuted=!1,F$R._tMusic=null,F$R._musicChannel=null,F$R._music=null,F$R._channels=[],F$R._autoStopMusic=!1,F$R._blurPaused=!1,F$R._isActive=!0,F$R._soundClass=null,F$R._musicClass=null,F$R.autoReleaseSound=!0,F$R._pool={},F$R.defaultIntervals={},F$R._notUsedUrls={},F$R._notUsedCount=0,F$R}(),F$v=function(){var F$e;function F$a(){}return F$g(F$a,"laya.net.LocalStorage"),F$a.__init__=function(){F$a._baseClass||(F$a._baseClass=F$e).init(),F$a.items=F$a._baseClass.items,F$a.support=F$a._baseClass.support},F$a.setItem=function(F$e,F$F){F$a._baseClass.setItem(F$e,F$F)},F$a.getItem=function(F$e){return F$a._baseClass.getItem(F$e)},F$a.setJSON=function(F$e,F$F){F$a._baseClass.setJSON(F$e,F$F)},F$a.getJSON=function(F$e){return F$a._baseClass.getJSON(F$e)},F$a.removeItem=function(F$e){F$a._baseClass.removeItem(F$e)},F$a.clear=function(){F$a._baseClass.clear()},F$a._baseClass=null,F$a.items=null,F$a.support=!1,F$a.__init$=function(){F$e=function(){function F$a(){}return F$g(F$a,""),F$a.init=function(){try{F$a.support=!0,F$a.items=F$Y.localStorage,F$a.setItem("laya","1"),F$a.removeItem("laya")}catch(F$e){F$a.support=!1}F$a.support||console.log("LocalStorage is not supprot or browser is private mode.")},F$a.setItem=function(F$e,F$F){try{F$a.support&&F$a.items.setItem(F$e,F$F)}catch(F$e){console.warn("set localStorage failed",F$e)}},F$a.getItem=function(F$e){return F$a.support?F$a.items.getItem(F$e):null},F$a.setJSON=function(F$e,F$F){try{F$a.support&&F$a.items.setItem(F$e,JSON.stringify(F$F))}catch(F$e){console.warn("set localStorage failed",F$e)}},F$a.getJSON=function(F$e){return JSON.parse(F$a.support?F$a.items.getItem(F$e):null)},F$a.removeItem=function(F$e){F$a.support&&F$a.items.removeItem(F$e)},F$a.clear=function(){F$a.support&&F$a.items.clear()},F$a.items=null,F$a.support=!1,F$a}()},F$a}(),F$U=(function(){function F$o(){}F$g(F$o,"laya.net.ResourceVersion"),F$o.enable=function(F$e,F$F,F$a){void 0===F$a&&(F$a=2),laya.net.ResourceVersion.type=F$a,F$b.loader.load(F$e,F$$.create(null,F$o.onManifestLoaded,[F$F]),null,"json"),F$r.customFormat=F$o.addVersionPrefix},F$o.onManifestLoaded=function(F$e,F$F){F$o.manifest=F$F,F$e.run(),F$F||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},F$o.addVersionPrefix=function(F$e){return F$o.manifest&&F$o.manifest[F$e]?2==F$o.type?F$o.manifest[F$e]:F$o.manifest[F$e]+"/"+F$e:F$e},F$o.FOLDER_VERSION=1,F$o.FILENAME_VERSION=2,F$o.manifest=null,F$o.type=1}(),function(){function F$e(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}F$g(F$e,"laya.net.TTFLoader");var F$F=F$e.prototype;return F$F.load=function(F$e){var F$F=(this._url=F$e).split(".ttf")[0].split("/");this.fontName=F$F[F$F.length-1],F$k.window.conch?this._loadConch():F$k.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},F$F._loadConch=function(){this._http=new F$Ye,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},F$F._onHttpLoaded=function(F$e){F$k.window.conch.setFontFaceFromBuffer(this.fontName,F$e),this._clearHttp(),this._complete()},F$F._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},F$F._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},F$F._complete=function(){F$b.timer.clear(this,this._complete),F$b.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},F$F._checkComplete=function(){F$G.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},F$F._loadWithFontFace=function(){var F$e=new F$k.window.FontFace(this.fontName,"url('"+this._url+"')");F$k.window.document.fonts.add(F$e);var F$F=this;F$e.loaded.then(function(){F$F._complete()}),F$e.load()},F$F._createDiv=function(){this._div=F$k.createElement("div"),this._div.innerHTML="laya";var F$e=this._div.style;F$e.fontFamily=this.fontName,F$e.position="absolute",F$e.left="-100px",F$e.top="-100px",F$k.document.body.appendChild(this._div)},F$F._loadWithCSS=function(){var F$e=this,F$F=F$k.createElement("style");F$F.type="text/css",F$k.document.body.appendChild(F$F),F$F.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=F$G.measureText("LayaTTFFont",this._fontTxt).width;var F$a=this;F$F.onload=function(){F$b.timer.once(1e4,F$a,F$e._complete)},F$b.timer.loop(20,this,this._checkComplete),this._createDiv()},F$e._testString="LayaTTFFont",F$e}()),F$r=function(){function F$o(F$e){this._url=null,this._path=null,this._url=F$o.formatURL(F$e),this._path=F$o.getPath(F$e)}F$g(F$o,"laya.net.URL");var F$e=F$o.prototype;return F$I(0,F$e,"path",function(){return this._path}),F$I(0,F$e,"url",function(){return this._url}),F$o.formatURL=function(F$e,F$F){if(!F$e)return"null path";if(0<F$e.indexOf(":"))return F$e;null!=F$o.customFormat&&(F$e=F$o.customFormat(F$e,F$F));var F$a=F$e.charAt(0);if("."===F$a)return F$o.formatRelativePath((F$F||F$o.basePath)+F$e);if("~"===F$a)return F$o.rootPath+F$e.substring(1);if("d"===F$a){if(0===F$e.indexOf("data:image"))return F$e}else if("/"===F$a)return F$e;return(F$F||F$o.basePath)+F$e},F$o.formatRelativePath=function(F$e){for(var F$F=F$e.split("/"),F$a=0,F$o=F$F.length;F$a<F$o;F$a++)".."==F$F[F$a]&&(F$F.splice(F$a-1,2),F$a-=2);return F$F.join("/")},F$o.isAbsolute=function(F$e){return 0<F$e.indexOf(":")||"/"==F$e.charAt(0)},F$o.getPath=function(F$e){var F$F=F$e.lastIndexOf("/");return 0<F$F?F$e.substr(0,F$F+1):""},F$o.getFileName=function(F$e){var F$F=F$e.lastIndexOf("/");return 0<F$F?F$e.substr(F$F+1):F$e},F$o.version={},F$o.basePath="",F$o.rootPath="",F$o.customFormat=function(F$e){var F$F=F$o.version[F$e];return!F$Z.isConchApp&&F$F&&(F$e+="?v="+F$F),F$e},F$o}(),F$Z=function(){function F$E(F$e,F$F){this._timeId=0;var F$a=F$E._mainCanvas.source.style;F$a.position="absolute",F$a.top=F$a.left="0px",F$a.background="#000000",F$E._mainCanvas.source.id="layaCanvas";var F$o=laya.renders.Render.isWebGL;F$E._mainCanvas.source.width=F$e,F$E._mainCanvas.source.height=F$F,F$o&&F$E.WebGL.init(F$E._mainCanvas,F$e,F$F),F$k.container.appendChild(F$E._mainCanvas.source),(F$E._context=new F$z(F$e,F$F,F$o?null:F$E._mainCanvas)).ctx.setIsMainContext(),F$k.window.requestAnimationFrame(function F$e(F$F){F$k.window.requestAnimationFrame(F$e);F$b.stage._loop()}),F$b.stage.on("visibilitychange",this,this._onVisibilitychange)}F$g(F$E,"laya.renders.Render");var F$e=F$E.prototype;return F$e._onVisibilitychange=function(){F$b.stage.isVisibility?0!=this._timeId&&F$k.window.clearInterval(this._timeId):this._timeId=F$k.window.setInterval(this._enterFrame,1e3)},F$e._enterFrame=function(F$e){F$b.stage._loop()},F$I(1,F$E,"context",function(){return F$E._context}),F$I(1,F$E,"canvas",function(){return F$E._mainCanvas.source}),F$E._context=null,F$E._mainCanvas=null,F$E.WebGL=null,F$E.isConchNode=!1,F$E.isConchApp=!1,F$E.isConchWebGL=!1,F$E.isWebGL=!1,F$E.is3DMode=!1,F$E.optimizeTextureMemory=function(F$e,F$F){return!0},F$E.__init$=function(){F$Y.ConchRenderType=F$Y.ConchRenderType||1,F$Y.ConchRenderType|=F$Y.conch?4:0,F$E.isConchNode=5==(5&F$Y.ConchRenderType),F$E.isConchApp=4==(4&F$Y.ConchRenderType),F$E.isConchWebGL=6==F$Y.ConchRenderType},F$E}(),F$z=function(){function F$Y(F$e,F$F,F$a){this.x=0,this.y=0,this._drawTexture=function(F$e,F$F,F$a){F$a[0].loaded&&this.ctx.drawTexture(F$a[0],F$a[1],F$a[2],F$a[3],F$a[4],F$e,F$F)},this._fillTexture=function(F$e,F$F,F$a){F$a[0].loaded&&this.ctx.fillTexture(F$a[0],F$a[1]+F$e,F$a[2]+F$F,F$a[3],F$a[4],F$a[5],F$a[6],F$a[7])},this._drawTextureWithTransform=function(F$e,F$F,F$a){F$a[0].loaded&&this.ctx.drawTextureWithTransform(F$a[0],F$a[1],F$a[2],F$a[3],F$a[4],F$a[5],F$e,F$F,F$a[6])},this._fillQuadrangle=function(F$e,F$F,F$a){this.ctx.fillQuadrangle(F$a[0],F$a[1],F$a[2],F$a[3],F$a[4])},this._drawRect=function(F$e,F$F,F$a){var F$o=this.ctx;null!=F$a[4]&&(F$o.fillStyle=F$a[4],F$o.fillRect(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3],null)),null!=F$a[5]&&(F$o.strokeStyle=F$a[5],F$o.lineWidth=F$a[6],F$o.strokeRect(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3],F$a[6]))},this._drawPie=function(F$e,F$F,F$a){var F$o=this.ctx;F$Z.isWebGL&&F$o.setPathId(F$a[8]),F$o.beginPath(),F$Z.isWebGL?(F$o.movePath(F$a[0]+F$e,F$a[1]+F$F),F$o.moveTo(0,0)):F$o.moveTo(F$e+F$a[0],F$F+F$a[1]),F$o.arc(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3],F$a[4]),F$o.closePath(),this._fillAndStroke(F$a[5],F$a[6],F$a[7],!0)},this._clipRect=function(F$e,F$F,F$a){this.ctx.clipRect(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3])},this._fillRect=function(F$e,F$F,F$a){this.ctx.fillRect(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3],F$a[4])},this._drawCircle=function(F$e,F$F,F$a){var F$o=this.ctx;F$Z.isWebGL&&F$o.setPathId(F$a[6]),F$W.drawCall++,F$o.beginPath(),F$Z.isWebGL&&F$o.movePath(F$a[0]+F$e,F$a[1]+F$F),F$o.arc(F$a[0]+F$e,F$a[1]+F$F,F$a[2],0,F$Y.PI2),F$o.closePath(),this._fillAndStroke(F$a[3],F$a[4],F$a[5],!0)},this._fillCircle=function(F$e,F$F,F$a){F$W.drawCall++;var F$o=this.ctx;F$o.beginPath(),F$o.fillStyle=F$a[3],F$o.arc(F$a[0]+F$e,F$a[1]+F$F,F$a[2],0,F$Y.PI2),F$o.fill()},this._setShader=function(F$e,F$F,F$a){this.ctx.setShader(F$a[0])},this._drawLine=function(F$e,F$F,F$a){var F$o=this.ctx;F$Z.isWebGL&&F$o.setPathId(F$a[6]),F$o.beginPath(),F$o.strokeStyle=F$a[4],F$o.lineWidth=F$a[5],F$Z.isWebGL?(F$o.movePath(F$e,F$F),F$o.moveTo(F$a[0],F$a[1]),F$o.lineTo(F$a[2],F$a[3])):(F$o.moveTo(F$e+F$a[0],F$F+F$a[1]),F$o.lineTo(F$e+F$a[2],F$F+F$a[3])),F$o.stroke()},this._drawLines=function(F$e,F$F,F$a){var F$o=this.ctx;F$Z.isWebGL&&F$o.setPathId(F$a[5]),F$o.beginPath(),F$e+=F$a[0],F$F+=F$a[1],F$Z.isWebGL&&F$o.movePath(F$e,F$F),F$o.strokeStyle=F$a[3],F$o.lineWidth=F$a[4];var F$E=F$a[2],F$s=2,F$Y=F$E.length;if(F$Z.isWebGL)for(F$o.moveTo(F$E[0],F$E[1]);F$s<F$Y;)F$o.lineTo(F$E[F$s++],F$E[F$s++]);else for(F$o.moveTo(F$e+F$E[0],F$F+F$E[1]);F$s<F$Y;)F$o.lineTo(F$e+F$E[F$s++],F$F+F$E[F$s++]);F$o.stroke()},this._drawLinesWebGL=function(F$e,F$F,F$a){this.ctx.drawLines(F$e+this.x+F$a[0],F$F+this.y+F$a[1],F$a[2],F$a[3],F$a[4])},this._drawCurves=function(F$e,F$F,F$a){this.ctx.drawCurves(F$e,F$F,F$a)},this._draw=function(F$e,F$F,F$a){F$a[0].call(null,this,F$e,F$F)},this._transformByMatrix=function(F$e,F$F,F$a){this.ctx.transformByMatrix(F$a[0])},this._setTransform=function(F$e,F$F,F$a){this.ctx.setTransform(F$a[0],F$a[1],F$a[2],F$a[3],F$a[4],F$a[5])},this._setTransformByMatrix=function(F$e,F$F,F$a){this.ctx.setTransformByMatrix(F$a[0])},this._save=function(F$e,F$F,F$a){this.ctx.save()},this._restore=function(F$e,F$F,F$a){this.ctx.restore()},this._translate=function(F$e,F$F,F$a){this.ctx.translate(F$a[0],F$a[1])},this._transform=function(F$e,F$F,F$a){this.ctx.translate(F$a[1]+F$e,F$a[2]+F$F);var F$o=F$a[0];this.ctx.transform(F$o.a,F$o.b,F$o.c,F$o.d,F$o.tx,F$o.ty),this.ctx.translate(-F$e-F$a[1],-F$F-F$a[2])},this._rotate=function(F$e,F$F,F$a){this.ctx.translate(F$a[1]+F$e,F$a[2]+F$F),this.ctx.rotate(F$a[0]),this.ctx.translate(-F$e-F$a[1],-F$F-F$a[2])},this._scale=function(F$e,F$F,F$a){this.ctx.translate(F$a[2]+F$e,F$a[3]+F$F),this.ctx.scale(F$a[0],F$a[1]),this.ctx.translate(-F$e-F$a[2],-F$F-F$a[3])},this._alpha=function(F$e,F$F,F$a){this.ctx.globalAlpha*=F$a[0]},this._setAlpha=function(F$e,F$F,F$a){this.ctx.globalAlpha=F$a[0]},this._fillText=function(F$e,F$F,F$a){this.ctx.fillText(F$a[0],F$a[1]+F$e,F$a[2]+F$F,F$a[3],F$a[4],F$a[5])},this._strokeText=function(F$e,F$F,F$a){this.ctx.strokeText(F$a[0],F$a[1]+F$e,F$a[2]+F$F,F$a[3],F$a[4],F$a[5],F$a[6])},this._fillBorderText=function(F$e,F$F,F$a){this.ctx.fillBorderText(F$a[0],F$a[1]+F$e,F$a[2]+F$F,F$a[3],F$a[4],F$a[5],F$a[6],F$a[7])},this._blendMode=function(F$e,F$F,F$a){this.ctx.globalCompositeOperation=F$a[0]},this._beginClip=function(F$e,F$F,F$a){this.ctx.beginClip&&this.ctx.beginClip(F$e+F$a[0],F$F+F$a[1],F$a[2],F$a[3])},this._setIBVB=function(F$e,F$F,F$a){this.ctx.setIBVB(F$a[0]+F$e,F$a[1]+F$F,F$a[2],F$a[3],F$a[4],F$a[5],F$a[6],F$a[7])},this._fillTrangles=function(F$e,F$F,F$a){this.ctx.fillTrangles(F$a[0],F$a[1]+F$e,F$a[2]+F$F,F$a[3],F$a[4])},this._drawPath=function(F$e,F$F,F$a){var F$o=this.ctx;F$Z.isWebGL&&F$o.setPathId(-1),F$o.beginPath(),F$e+=F$a[0],F$F+=F$a[1],F$Z.isWebGL&&F$o.movePath(F$e,F$F);for(var F$E=F$a[2],F$s=0,F$Y=F$E.length;F$s<F$Y;F$s++){var F$_=F$E[F$s];switch(F$_[0]){case"moveTo":F$Z.isWebGL?F$o.moveTo(F$_[1],F$_[2]):F$o.moveTo(F$e+F$_[1],F$F+F$_[2]);break;case"lineTo":F$Z.isWebGL?F$o.lineTo(F$_[1],F$_[2]):F$o.lineTo(F$e+F$_[1],F$F+F$_[2]);break;case"arcTo":F$Z.isWebGL?F$o.arcTo(F$_[1],F$_[2],F$_[3],F$_[4],F$_[5]):F$o.arcTo(F$e+F$_[1],F$F+F$_[2],F$e+F$_[3],F$F+F$_[4],F$_[5]);break;case"closePath":F$o.closePath()}}var F$R=F$a[3];null!=F$R&&(F$o.fillStyle=F$R.fillStyle,F$o.fill());var F$H=F$a[4];null!=F$H&&(F$o.strokeStyle=F$H.strokeStyle,F$o.lineWidth=F$H.lineWidth||1,F$o.lineJoin=F$H.lineJoin,F$o.lineCap=F$H.lineCap,F$o.miterLimit=F$H.miterLimit,F$o.stroke())},this.drawPoly=function(F$e,F$F,F$a){this.ctx.drawPoly(F$e+this.x+F$a[0],F$F+this.y+F$a[1],F$a[2],F$a[3],F$a[4],F$a[5],F$a[6])},this._drawPoly=function(F$e,F$F,F$a){var F$o=this.ctx,F$E=F$a[2],F$s=2,F$Y=F$E.length;if(F$Z.isWebGL)for(F$o.setPathId(F$a[6]),F$o.beginPath(),F$e+=F$a[0],F$F+=F$a[1],F$o.movePath(F$e,F$F),F$o.moveTo(F$E[0],F$E[1]);F$s<F$Y;)F$o.lineTo(F$E[F$s++],F$E[F$s++]);else for(F$o.beginPath(),F$e+=F$a[0],F$F+=F$a[1],F$o.moveTo(F$e+F$E[0],F$F+F$E[1]);F$s<F$Y;)F$o.lineTo(F$e+F$E[F$s++],F$F+F$E[F$s++]);F$o.closePath(),this._fillAndStroke(F$a[3],F$a[4],F$a[5],F$a[7])},this._drawSkin=function(F$e,F$F,F$a){var F$o=F$a[0];if(F$o){var F$E=this.ctx;F$o.render(F$E,F$e,F$F)}},this._drawParticle=function(F$e,F$F,F$a){this.ctx.drawParticle(F$e+this.x,F$F+this.y,F$a[0])},this._setFilters=function(F$e,F$F,F$a){this.ctx.setFilters(F$a)},F$a?this.ctx=F$a.getContext("2d"):(F$a=F$ye.create("3D"),this.ctx=F$G.createWebGLContext2D(F$a),F$a._setContext(this.ctx)),F$a.size(F$e,F$F),this.canvas=F$a}F$g(F$Y,"laya.renders.RenderContext");var F$e=F$Y.prototype;return F$e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},F$e.drawTexture=function(F$e,F$F,F$a,F$o,F$E){F$e.loaded&&this.ctx.drawTexture(F$e,F$F,F$a,F$o,F$E,this.x,this.y)},F$e._drawTextures=function(F$e,F$F,F$a){F$a[0].loaded&&this.ctx.drawTextures(F$a[0],F$a[1],F$e+this.x,F$F+this.y)},F$e.drawTextureWithTransform=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$e.loaded&&this.ctx.drawTextureWithTransform(F$e,F$F,F$a,F$o,F$E,F$s,this.x,this.y,F$Y)},F$e.fillQuadrangle=function(F$e,F$F,F$a,F$o,F$E){this.ctx.fillQuadrangle(F$e,F$F,F$a,F$o,F$E)},F$e.drawCanvas=function(F$e,F$F,F$a,F$o,F$E){this.ctx.drawCanvas(F$e,F$F+this.x,F$a+this.y,F$o,F$E)},F$e.drawRect=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=1);var F$Y=this.ctx;F$Y.strokeStyle=F$E,F$Y.lineWidth=F$s,F$Y.strokeRect(F$e+this.x,F$F+this.y,F$a,F$o,F$s)},F$e._fillAndStroke=function(F$e,F$F,F$a,F$o){void 0===F$o&&(F$o=!1);var F$E=this.ctx;null!=F$e&&(F$E.fillStyle=F$e,F$Z.isWebGL?F$E.fill(F$o):F$E.fill()),null!=F$F&&0<F$a&&(F$E.strokeStyle=F$F,F$E.lineWidth=F$a,F$E.stroke())},F$e.clipRect=function(F$e,F$F,F$a,F$o){this.ctx.clipRect(F$e+this.x,F$F+this.y,F$a,F$o)},F$e.fillRect=function(F$e,F$F,F$a,F$o,F$E){this.ctx.fillRect(F$e+this.x,F$F+this.y,F$a,F$o,F$E)},F$e.drawCircle=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=1),F$W.drawCall++;var F$s=this.ctx;F$s.beginPath(),F$s.strokeStyle=F$o,F$s.lineWidth=F$E,F$s.arc(F$e+this.x,F$F+this.y,F$a,0,F$Y.PI2),F$s.stroke()},F$e.drawTriangles=function(F$e,F$F,F$a){if(F$Z.isWebGL)this.ctx.drawTriangles(F$a[0],F$e+F$a[1],F$F+F$a[2],F$a[3],F$a[4],F$a[5],F$a[6],F$a[7],F$a[8],F$a[9]);else{var F$o=F$a[5],F$E=0,F$s=F$o.length,F$Y=this.ctx;for(F$E=0;F$E<F$s;F$E+=3){var F$_=2*F$o[F$E],F$R=2*F$o[F$E+1],F$H=2*F$o[F$E+2];F$Y.drawTriangle(F$a[0],F$a[3],F$a[4],F$_,F$R,F$H,F$a[6],!0)}}},F$e.fillCircle=function(F$e,F$F,F$a,F$o){F$W.drawCall++;var F$E=this.ctx;F$E.beginPath(),F$E.fillStyle=F$o,F$E.arc(F$e+this.x,F$F+this.y,F$a,0,F$Y.PI2),F$E.fill()},F$e.setShader=function(F$e){this.ctx.setShader(F$e)},F$e.drawLine=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=1);var F$Y=this.ctx;F$Y.beginPath(),F$Y.strokeStyle=F$E,F$Y.lineWidth=F$s,F$Y.moveTo(this.x+F$e,this.y+F$F),F$Y.lineTo(this.x+F$a,this.y+F$o),F$Y.stroke()},F$e.clear=function(){this.ctx.clear()},F$e.transformByMatrix=function(F$e){this.ctx.transformByMatrix(F$e)},F$e.setTransform=function(F$e,F$F,F$a,F$o,F$E,F$s){this.ctx.setTransform(F$e,F$F,F$a,F$o,F$E,F$s)},F$e.setTransformByMatrix=function(F$e){this.ctx.setTransformByMatrix(F$e)},F$e.save=function(){this.ctx.save()},F$e.restore=function(){this.ctx.restore()},F$e.translate=function(F$e,F$F){this.ctx.translate(F$e,F$F)},F$e.transform=function(F$e,F$F,F$a,F$o,F$E,F$s){this.ctx.transform(F$e,F$F,F$a,F$o,F$E,F$s)},F$e.rotate=function(F$e){this.ctx.rotate(F$e)},F$e.scale=function(F$e,F$F){this.ctx.scale(F$e,F$F)},F$e.alpha=function(F$e){this.ctx.globalAlpha*=F$e},F$e.setAlpha=function(F$e){this.ctx.globalAlpha=F$e},F$e.fillWords=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$s&&(F$s=0),this.ctx.fillWords(F$e,F$F,F$a,F$o,F$E,F$s)},F$e.fillBorderWords=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this.ctx.fillBorderWords(F$e,F$F,F$a,F$o,F$E,F$s,F$Y)},F$e.fillText=function(F$e,F$F,F$a,F$o,F$E,F$s){this.ctx.fillText(F$e,F$F+this.x,F$a+this.y,F$o,F$E,F$s)},F$e.strokeText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this.ctx.strokeText(F$e,F$F+this.x,F$a+this.y,F$o,F$E,F$s,F$Y)},F$e.blendMode=function(F$e){this.ctx.globalCompositeOperation=F$e},F$e.flush=function(){this.ctx.flush&&this.ctx.flush()},F$e.addRenderObject=function(F$e){this.ctx.addRenderObject(F$e)},F$e.beginClip=function(F$e,F$F,F$a,F$o){this.ctx.beginClip&&this.ctx.beginClip(F$e,F$F,F$a,F$o)},F$e.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},F$e.fillTrangles=function(F$e,F$F,F$a){this.ctx.fillTrangles(F$a[0],F$a[1],F$a[2],F$a[3],4<F$a.length?F$a[4]:null)},F$Y.PI2=2*Math.PI,F$Y}(),F$T=function(){function F$Y(F$e,F$F){switch(this._next=F$F||F$Y.NORENDER,F$e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=F$j._filter);case 69905:return void(this._fun=F$Y._initRenderFun)}this.onCreate(F$e)}F$g(F$Y,"laya.renders.RenderSprite");var F$e=F$Y.prototype;return F$e.onCreate=function(F$e){},F$e._style=function(F$e,F$F,F$a,F$o){F$e._style.render(F$e,F$F,F$a,F$o);var F$E=this._next;F$E._fun.call(F$E,F$e,F$F,F$a,F$o)},F$e._no=function(F$e,F$F,F$a,F$o){},F$e._custom=function(F$e,F$F,F$a,F$o){F$e.customRender(F$F,F$a,F$o);var F$E=F$e._style._tf;this._next._fun.call(this._next,F$e,F$F,F$a-F$E.translateX,F$o-F$E.translateY)},F$e._clip=function(F$e,F$F,F$a,F$o){var F$E=this._next;if(F$E!=F$Y.NORENDER){var F$s=F$e._style.scrollRect;F$F.ctx.save(),F$F.ctx.clipRect(F$a,F$o,F$s.width,F$s.height),F$E._fun.call(F$E,F$e,F$F,F$a-F$s.x,F$o-F$s.y),F$F.ctx.restore()}},F$e._blend=function(F$e,F$F,F$a,F$o){var F$E=F$e._style;F$E.blendMode&&(F$F.ctx.globalCompositeOperation=F$E.blendMode);var F$s=this._next;F$s._fun.call(F$s,F$e,F$F,F$a,F$o),F$F.ctx.globalCompositeOperation="source-over"},F$e._mask=function(F$e,F$F,F$a,F$o){var F$E=this._next;F$E._fun.call(F$E,F$e,F$F,F$a,F$o);var F$s=F$e.mask;F$s&&(F$F.ctx.globalCompositeOperation="destination-in",(0<F$s.numChildren||!F$s.graphics._isOnlyOne())&&(F$s.cacheAsBitmap=!0),F$s.render(F$F,F$a-F$e.pivotX,F$o-F$e.pivotY)),F$F.ctx.globalCompositeOperation="source-over"},F$e._graphics=function(F$e,F$F,F$a,F$o){var F$E=F$e._style._tf;F$e._graphics&&F$e._graphics._render(F$e,F$F,F$a-F$E.translateX,F$o-F$E.translateY);var F$s=this._next;F$s._fun.call(F$s,F$e,F$F,F$a,F$o)},F$e._image=function(F$e,F$F,F$a,F$o){var F$E=F$e._style;F$F.ctx.drawTexture2(F$a,F$o,F$E._tf.translateX,F$E._tf.translateY,F$e.transform,F$E.alpha,F$E.blendMode,F$e._graphics._one)},F$e._image2=function(F$e,F$F,F$a,F$o){var F$E=F$e._style._tf;F$F.ctx.drawTexture2(F$a,F$o,F$E.translateX,F$E.translateY,F$e.transform,1,null,F$e._graphics._one)},F$e._alpha=function(F$e,F$F,F$a,F$o){var F$E;if(.01<(F$E=F$e._style.alpha)||F$e._needRepaint()){var F$s=F$F.ctx.globalAlpha;F$F.ctx.globalAlpha*=F$E;var F$Y=this._next;F$Y._fun.call(F$Y,F$e,F$F,F$a,F$o),F$F.ctx.globalAlpha=F$s}},F$e._transform=function(F$e,F$F,F$a,F$o){var F$E=F$e.transform,F$s=this._next;F$E&&F$s!=F$Y.NORENDER?(F$F.save(),F$F.transform(F$E.a,F$E.b,F$E.c,F$E.d,F$E.tx+F$a,F$E.ty+F$o),F$s._fun.call(F$s,F$e,F$F,0,0),F$F.restore()):F$s._fun.call(F$s,F$e,F$F,F$a,F$o)},F$e._childs=function(F$e,F$F,F$a,F$o){var F$E=F$e._style,F$s=F$E._tf;if(F$a=F$a-F$s.translateX+F$E.paddingLeft,F$o=F$o-F$s.translateY+F$E.paddingTop,F$E._calculation){var F$Y=F$e._getWords();if(F$Y){var F$_=F$E;F$_&&(F$_.stroke?F$F.fillBorderWords(F$Y,F$a,F$o,F$_.font,F$_.color,F$_.strokeColor,F$_.stroke):F$F.fillWords(F$Y,F$a,F$o,F$_.font,F$_.color,"none"!=F$_.textDecoration&&F$_.underLine?1:0))}}var F$R,F$H=F$e._childs,F$g=F$H.length;if(F$e.viewport||F$e.optimizeScrollRect&&F$e._style.scrollRect){var F$n=F$e.viewport||F$e._style.scrollRect,F$O=F$n.x,F$q=F$n.y,F$I=F$n.right,F$l=F$n.bottom,F$P=NaN,F$j=NaN;for(F$$=0;F$$<F$g;++F$$)(F$R=F$H[F$$]).visible&&(F$P=F$R._x)<F$I&&F$P+F$R.width>F$O&&(F$j=F$R._y)<F$l&&F$j+F$R.height>F$q&&F$R.render(F$F,F$a,F$o)}else for(var F$$=0;F$$<F$g;++F$$)(F$R=F$H[F$$])._style.visible&&F$R.render(F$F,F$a,F$o)},F$e._canvas=function(F$e,F$F,F$a,F$o){var F$E=F$e._$P.cacheCanvas;if(F$E){"bitmap"===F$E.type?F$W.canvasBitmap++:F$W.canvasNormal++;var F$s=F$E.ctx;if(F$e._needRepaint()||!F$s)this._canvas_repaint(F$e,F$F,F$a,F$o);else{var F$Y=F$E._cacheRec;F$F.drawCanvas(F$s.canvas,F$a+F$Y.x,F$o+F$Y.y,F$Y.width,F$Y.height)}}else this._next._fun.call(this._next,F$e,F$F,F$a,F$o)},F$e._canvas_repaint=function(F$e,F$F,F$a,F$o){var F$E=F$e._$P.cacheCanvas,F$s=this._next;if(F$E){var F$Y,F$_,F$R,F$H,F$g=F$E.ctx,F$n=F$e._needRepaint()||!F$g,F$O=F$E.type;if("bitmap"===F$O?F$W.canvasBitmap++:F$W.canvasNormal++,F$n){var F$q,F$I;F$E._cacheRec||(F$E._cacheRec=new F$B),F$Z.isWebGL&&"bitmap"!==F$O?F$E._cacheRec.setTo(-F$e.pivotX,-F$e.pivotY,1,1):((F$H=F$e.getSelfBounds()).x=F$H.x-F$e.pivotX,F$H.y=F$H.y-F$e.pivotY,F$H.x=F$H.x-16,F$H.y=F$H.y-16,F$H.width=F$H.width+32,F$H.height=F$H.height+32,F$H.x=Math.floor(F$H.x+F$a)-F$a,F$H.y=Math.floor(F$H.y+F$o)-F$o,F$H.width=Math.floor(F$H.width),F$H.height=Math.floor(F$H.height),F$E._cacheRec.copyFrom(F$H)),F$H=F$E._cacheRec;var F$l,F$P=F$Z.isWebGL?1:F$k.pixelRatio*F$b.stage.clientScaleX,F$j=F$Z.isWebGL?1:F$k.pixelRatio*F$b.stage.clientScaleY;if(!F$Z.isWebGL){var F$$,F$y=1,F$M=1;for(F$$=F$e;F$$&&F$$!=F$b.stage;)F$y*=F$$.scaleX,F$M*=F$$.scaleY,F$$=F$$.parent;F$Z.isWebGL?(F$y<1&&(F$P*=F$y),F$M<1&&(F$j*=F$M)):(1<F$y&&(F$P*=F$y),1<F$M&&(F$j*=F$M))}if(F$e.scrollRect){var F$D=F$e.scrollRect;F$H.x-=F$D.x,F$H.y-=F$D.y}if(F$q=F$H.width*F$P,F$I=F$H.height*F$j,F$_=F$H.x,F$R=F$H.y,F$Z.isWebGL&&"bitmap"===F$O&&(2048<F$q||2048<F$I))return console.warn("cache bitmap size larger than 2048,cache ignored"),F$E.ctx&&(F$X.recover("RenderContext",F$E.ctx),F$E.ctx.canvas.size(0,0),F$E.ctx=null),void F$s._fun.call(F$s,F$e,F$F,F$a,F$o);if(F$g||(F$g=F$E.ctx=F$X.getItem("RenderContext")||new F$z(F$q,F$I,F$ye.create("AUTO"))),F$g.ctx.sprite=F$e,(F$Y=F$g.canvas).clear(),(F$Y.width!=F$q||F$Y.height!=F$I)&&F$Y.size(F$q,F$I),"bitmap"===F$O?F$Y.context.asBitmap=!0:"normal"===F$O&&(F$Y.context.asBitmap=!1),1!=F$P||1!=F$j){var F$m=F$g.ctx;F$m.save(),F$m.scale(F$P,F$j),!F$Z.isConchWebGL&&F$Z.isConchApp&&(F$l=F$e._$P.cf)&&F$m.setFilterMatrix&&F$m.setFilterMatrix(F$l._mat,F$l._alpha),F$s._fun.call(F$s,F$e,F$g,-F$_,-F$R),F$m.restore(),F$Z.isConchApp&&!F$Z.isConchWebGL||F$e._applyFilters()}else F$m=F$g.ctx,!F$Z.isConchWebGL&&F$Z.isConchApp&&(F$l=F$e._$P.cf)&&F$m.setFilterMatrix&&F$m.setFilterMatrix(F$l._mat,F$l._alpha),F$s._fun.call(F$s,F$e,F$g,-F$_,-F$R),F$Z.isConchApp&&!F$Z.isConchWebGL||F$e._applyFilters();F$e._$P.staticCache&&(F$E.reCache=!1),F$W.canvasReCache++}else F$_=(F$H=F$E._cacheRec).x,F$R=F$H.y,F$Y=F$g.canvas;F$F.drawCanvas(F$Y,F$a+F$_,F$o+F$R,F$H.width,F$H.height)}else F$s._fun.call(F$s,F$e,F$g,F$a,F$o)},F$Y.__init__=function(){var F$e,F$F,F$a=0;for(F$F=F$G.createRenderSprite(69905,null),F$e=F$Y.renders.length=4096,F$a=0;F$a<F$e;F$a++)F$Y.renders[F$a]=F$F;F$Y.renders[0]=F$G.createRenderSprite(0,null),function(F$e,F$F){for(var F$a=0,F$o=0;F$o<F$e.length;F$o++)F$a|=F$e[F$o],F$Y.renders[F$a]=F$F}([1,512,4,2],new F$Y(1,null)),F$Y.renders[513]=F$G.createRenderSprite(513,null),F$Y.renders[517]=new F$Y(517,null)},F$Y._initRenderFun=function(F$e,F$F,F$a,F$o){var F$E=F$e._renderType;(F$Y.renders[F$E]=F$Y._getTypeRender(F$E))._fun(F$e,F$F,F$a,F$o)},F$Y._getTypeRender=function(F$e){for(var F$F=null,F$a=2048;1<F$a;)F$a&F$e&&(F$F=F$G.createRenderSprite(F$a,F$F)),F$a>>=1;return F$F},F$Y.IMAGE=1,F$Y.ALPHA=2,F$Y.TRANSFORM=4,F$Y.BLEND=8,F$Y.CANVAS=16,F$Y.FILTERS=32,F$Y.MASK=64,F$Y.CLIP=128,F$Y.STYLE=256,F$Y.GRAPHICS=512,F$Y.CUSTOM=1024,F$Y.CHILDS=2048,F$Y.INIT=69905,F$Y.renders=[],F$Y.NORENDER=new F$Y(0,null),F$Y}(),F$p=function(){function F$_(){this._repaint=!1}F$g(F$_,"laya.resource.Context");var F$e=F$_.prototype;return F$e.replaceReset=function(){var F$e,F$F,F$a=0;for(F$e=F$_.replaceKeys.length,F$a=0;F$a<F$e;F$a++)F$F=F$_.replaceKeys[F$a],this[F$_.newKeys[F$a]]=this[F$F]},F$e.replaceResotre=function(){this.__restore(),this.__reset()},F$e.setIsMainContext=function(){},F$e.drawTextures=function(F$e,F$F,F$a,F$o){F$W.drawCall+=F$F.length/2;for(var F$E=F$e.width,F$s=F$e.height,F$Y=0,F$_=F$F.length;F$Y<F$_;F$Y+=2)this.drawTexture(F$e,F$F[F$Y],F$F[F$Y+1],F$E,F$s,F$a,F$o)},F$e.drawCanvas=function(F$e,F$F,F$a,F$o,F$E){F$W.drawCall++,this.drawImage(F$e.source,F$F,F$a,F$o,F$E)},F$e.fillRect=function(F$e,F$F,F$a,F$o,F$E){F$W.drawCall++,F$E&&(this.fillStyle=F$E),this.__fillRect(F$e,F$F,F$a,F$o)},F$e.fillText=function(F$e,F$F,F$a,F$o,F$E,F$s){F$W.drawCall++,3<arguments.length&&null!=F$o&&(this.font=F$o,this.fillStyle=F$E,this.textAlign=F$s,this.textBaseline="top"),this.__fillText(F$e,F$F,F$a)},F$e.fillBorderText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){F$W.drawCall++,this.font=F$o,this.fillStyle=F$E,this.textBaseline="top",this.strokeStyle=F$s,this.lineWidth=F$Y,this.textAlign=F$_,this.__strokeText(F$e,F$F,F$a),this.__fillText(F$e,F$F,F$a)},F$e.strokeText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$W.drawCall++,3<arguments.length&&null!=F$o&&(this.font=F$o,this.strokeStyle=F$E,this.lineWidth=F$s,this.textAlign=F$Y,this.textBaseline="top"),this.__strokeText(F$e,F$F,F$a)},F$e.transformByMatrix=function(F$e){this.transform(F$e.a,F$e.b,F$e.c,F$e.d,F$e.tx,F$e.ty)},F$e.setTransformByMatrix=function(F$e){this.setTransform(F$e.a,F$e.b,F$e.c,F$e.d,F$e.tx,F$e.ty)},F$e.clipRect=function(F$e,F$F,F$a,F$o){F$W.drawCall++,this.beginPath(),this.rect(F$e,F$F,F$a,F$o),this.clip()},F$e.drawTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$W.drawCall++;var F$_=F$e.uv,F$R=F$e.bitmap.width,F$H=F$e.bitmap.height;this.drawImage(F$e.source,F$_[0]*F$R,F$_[1]*F$H,(F$_[2]-F$_[0])*F$R,(F$_[5]-F$_[3])*F$H,F$F+F$s,F$a+F$Y,F$o,F$E)},F$e.drawTextureWithTransform=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){F$W.drawCall++;var F$H=F$e.uv,F$g=F$e.bitmap.width,F$n=F$e.bitmap.height;this.save(),1!=F$R&&(this.globalAlpha*=F$R),F$s?(this.transform(F$s.a,F$s.b,F$s.c,F$s.d,F$s.tx+F$Y,F$s.ty+F$_),this.drawImage(F$e.source,F$H[0]*F$g,F$H[1]*F$n,(F$H[2]-F$H[0])*F$g,(F$H[5]-F$H[3])*F$n,F$F,F$a,F$o,F$E)):this.drawImage(F$e.source,F$H[0]*F$g,F$H[1]*F$n,(F$H[2]-F$H[0])*F$g,(F$H[5]-F$H[3])*F$n,F$F+F$Y,F$a+F$_,F$o,F$E),this.restore()},F$e.drawTexture2=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=F$_[0];if(F$R.loaded&&F$R.bitmap&&F$R.source){F$W.drawCall++;var F$H=1!==F$s;if(F$H){var F$g=this.globalAlpha;this.globalAlpha*=F$s}var F$n=F$R.uv,F$O=F$R.bitmap.width,F$q=F$R.bitmap.height;F$E?(this.save(),this.transform(F$E.a,F$E.b,F$E.c,F$E.d,F$E.tx+F$e,F$E.ty+F$F),this.drawImage(F$R.source,F$n[0]*F$O,F$n[1]*F$q,(F$n[2]-F$n[0])*F$O,(F$n[5]-F$n[3])*F$q,F$_[1]-F$a,F$_[2]-F$o,F$_[3],F$_[4]),this.restore()):this.drawImage(F$R.source,F$n[0]*F$O,F$n[1]*F$q,(F$n[2]-F$n[0])*F$O,(F$n[5]-F$n[3])*F$q,F$_[1]-F$a+F$e,F$_[2]-F$o+F$F,F$_[3],F$_[4]),F$H&&(this.globalAlpha=F$g)}},F$e.fillTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){if(!F$_.pat){if(F$e.uv!=F$ge.DEF_UV){var F$R=new F$ye("2D");F$R.getContext("2d"),F$R.size(F$e.width,F$e.height),F$R.context.drawTexture(F$e,0,0,F$e.width,F$e.height,0,0),F$e=new F$ge(F$R)}F$_.pat=this.createPattern(F$e.bitmap.source,F$s)}var F$H=F$F,F$g=F$a,F$n=0,F$O=0;F$Y&&(F$H+=F$Y.x%F$e.width,F$g+=F$Y.y%F$e.height,F$n-=F$Y.x%F$e.width,F$O-=F$Y.y%F$e.height),this.translate(F$H,F$g),this.fillRect(F$n,F$O,F$o,F$E,F$_.pat),this.translate(-F$H,-F$g)},F$e.drawTriangle=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=F$e.bitmap,F$H=F$R.source,F$g=F$e.width,F$n=F$e.height,F$O=F$R.width,F$q=F$R.height,F$I=F$a[F$o]*F$O,F$l=F$a[F$E]*F$O,F$P=F$a[F$s]*F$O,F$j=F$a[F$o+1]*F$q,F$$=F$a[F$E+1]*F$q,F$y=F$a[F$s+1]*F$q,F$M=F$F[F$o],F$D=F$F[F$E],F$m=F$F[F$s],F$b=F$F[F$o+1],F$L=F$F[F$E+1],F$B=F$F[F$s+1];if(F$_){var F$v=(F$M+F$D+F$m)/3,F$K=(F$b+F$L+F$B)/3,F$V=F$M-F$v,F$G=F$b-F$K,F$A=Math.sqrt(F$V*F$V+F$G*F$G);F$M=F$v+F$V/F$A*(F$A+1),F$b=F$K+F$G/F$A*(F$A+1),F$G=F$L-F$K,F$D=F$v+(F$V=F$D-F$v)/(F$A=Math.sqrt(F$V*F$V+F$G*F$G))*(F$A+1),F$L=F$K+F$G/F$A*(F$A+1),F$G=F$B-F$K,F$m=F$v+(F$V=F$m-F$v)/(F$A=Math.sqrt(F$V*F$V+F$G*F$G))*(F$A+1),F$B=F$K+F$G/F$A*(F$A+1)}this.save(),F$Y&&this.transform(F$Y.a,F$Y.b,F$Y.c,F$Y.d,F$Y.tx,F$Y.ty),this.beginPath(),this.moveTo(F$M,F$b),this.lineTo(F$D,F$L),this.lineTo(F$m,F$B),this.closePath(),this.clip();var F$U=1/(F$I*F$$+F$j*F$P+F$l*F$y-F$$*F$P-F$j*F$l-F$I*F$y),F$r=F$M*F$$+F$j*F$m+F$D*F$y-F$$*F$m-F$j*F$D-F$M*F$y,F$Z=F$I*F$D+F$M*F$P+F$l*F$m-F$D*F$P-F$M*F$l-F$I*F$m,F$z=F$I*F$$*F$m+F$j*F$D*F$P+F$M*F$l*F$y-F$M*F$$*F$P-F$j*F$l*F$m-F$I*F$D*F$y,F$T=F$b*F$$+F$j*F$B+F$L*F$y-F$$*F$B-F$j*F$L-F$b*F$y,F$p=F$I*F$L+F$b*F$P+F$l*F$B-F$L*F$P-F$b*F$l-F$I*F$B,F$J=F$I*F$$*F$B+F$j*F$L*F$P+F$b*F$l*F$y-F$b*F$$*F$P-F$j*F$l*F$B-F$I*F$L*F$y;this.transform(F$r*F$U,F$T*F$U,F$Z*F$U,F$p*F$U,F$z*F$U,F$J*F$U),this.drawImage(F$H,F$e.uv[0]*F$O,F$e.uv[1]*F$q,F$g,F$n,F$e.uv[0]*F$O,F$e.uv[1]*F$q,F$g,F$n),this.restore()},F$e.flush=function(){return 0},F$e.fillWords=function(F$e,F$F,F$a,F$o,F$E,F$s){F$o&&(this.font=F$o),F$E&&(this.fillStyle=F$E);this.textBaseline="top",this.textAlign="left";for(var F$Y=0,F$_=F$e.length;F$Y<F$_;F$Y++){var F$R=F$e[F$Y];if(this.__fillText(F$R.char,F$R.x+F$F,F$R.y+F$a),1===F$s){var F$H=F$R.height,F$g=.5*F$R.style.letterSpacing;F$g||(F$g=0),this.beginPath(),this.strokeStyle=F$E,this.lineWidth=1,this.moveTo(F$F+F$R.x-F$g+.5,F$a+F$R.y+F$H+.5),this.lineTo(F$F+F$R.x+F$R.width+F$g+.5,F$a+F$R.y+F$H+.5),this.stroke()}}},F$e.fillBorderWords=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$o&&(this.font=F$o),F$E&&(this.fillStyle=F$E),this.textBaseline="top",this.lineWidth=F$Y,this.textAlign="left",this.strokeStyle=F$s;for(var F$_=0,F$R=F$e.length;F$_<F$R;F$_++){var F$H=F$e[F$_];this.__strokeText(F$H.char,F$H.x+F$F,F$H.y+F$a),this.__fillText(F$H.char,F$H.x+F$F,F$H.y+F$a)}},F$e.destroy=function(){this.canvas.width=this.canvas.height=0},F$e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},F$e.drawCurves=function(F$e,F$F,F$a){this.beginPath(),this.strokeStyle=F$a[3],this.lineWidth=F$a[4];var F$o=F$a[2];F$e+=F$a[0],F$F+=F$a[1],this.moveTo(F$e+F$o[0],F$F+F$o[1]);for(var F$E=2,F$s=F$o.length;F$E<F$s;)this.quadraticCurveTo(F$e+F$o[F$E++],F$F+F$o[F$E++],F$e+F$o[F$E++],F$F+F$o[F$E++]);this.stroke()},F$_.__init__=function(F$F){var F$a=laya.resource.Context.prototype;if(!(F$F=F$F||CanvasRenderingContext2D.prototype).inited){F$F.inited=!0,F$F.__fillText=F$F.fillText,F$F.__fillRect=F$F.fillRect,F$F.__strokeText=F$F.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(F$e){F$F[F$e]=F$a[F$e]})}},F$_.replaceCanvasGetSet=function(F$e,F$F){var F$a=Object.getOwnPropertyDescriptor(F$e,F$F);if(!F$a||!F$a.configurable)return!1;var F$o,F$E={};for(F$o in F$a)"set"!=F$o&&(F$E[F$o]=F$a[F$o]);var F$s=F$a.set;return F$E.set=function(F$e){F$s.call(this,F$e);var F$F=this.getContext("2d");F$F&&"__reset"in F$F&&F$F.__reset()},Object.defineProperty(F$e,F$F,F$E),!0},F$_.replaceGetSet=function(F$e,F$F){var F$a=Object.getOwnPropertyDescriptor(F$e,F$F);if(!F$a||!F$a.configurable)return!1;var F$o,F$E={};for(F$o in F$a)"set"!=F$o&&(F$E[F$o]=F$a[F$o]);var F$s=F$a.set,F$Y="___"+F$F+"__";return F$_.newKeys.push(F$Y),F$E.set=function(F$e){F$e!=this[F$Y]&&(this[F$Y]=F$e,F$s.call(this,F$e))},Object.defineProperty(F$e,F$F,F$E),!0},F$_._default=new F$_,F$_.newKeys=[],F$R(F$_,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),F$_}(),F$J=function(){function F$s(F$e){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++F$s._uniqueIDCounter,this._name=F$e||"Content Manager",F$s._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,F$s._resourceManagers.push(this),this._resources=[],this._records={}}F$g(F$s,"laya.resource.ResourceManager");var F$e=F$s.prototype;return F$b.imps(F$e,{"laya.resource.IDispose":!0}),F$e.getResourceByIndex=function(F$e){return this._resources[F$e]},F$e.getResourcesLength=function(){return this._resources.length},F$e.addResource=function(F$e){return F$e.resourceManager&&F$e.resourceManager.removeResource(F$e),-1===this._resources.indexOf(F$e)&&((F$e._resourceManager=this)._resources.push(F$e),this.addRecord(F$e.uri,F$e.__className,F$e.memorySize),this.addSize(F$e.memorySize),!0)},F$e.removeResource=function(F$e){var F$F=this._resources.indexOf(F$e);return-1!==F$F&&(this._resources.splice(F$F,1),F$e._resourceManager=null,this._memorySize-=F$e.memorySize,this.addRecord(F$e.uri,F$e.__className,-F$e.memorySize),!0)},F$e.unload=function(){for(var F$e=this._resources.slice(0,this._resources.length),F$F=0;F$F<F$e.length;F$F++){F$e[F$F].destroy()}F$e.length=0},F$e.dispose=function(){if(this===F$s._systemResourceManager)throw new Error("systemResourceManager不能被释放！");F$s._resourceManagers.splice(F$s._resourceManagers.indexOf(this),1),F$s._isResourceManagersSorted=!1;for(var F$e=this._resources.slice(0,this._resources.length),F$F=0;F$F<F$e.length;F$F++){var F$a=F$e[F$F];F$a.resourceManager.removeResource(F$a),F$a.destroy()}F$e.length=0},F$e.addSize=function(F$e){F$e&&(this.autoRelease&&0<F$e&&this._memorySize+F$e>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=F$e)},F$e.addRecord=function(F$e,F$F,F$a){DEBUG&&F$a&&!F$e&&console.error(F$e,F$F,F$a),F$e&&(this._records.hasOwnProperty(F$F+"|"+F$e)||(this._records[F$F+"|"+F$e]=0),this._records[F$F+"|"+F$e]+=F$a,DEBUG&&this._records[F$F+"|"+F$e]<0&&console.error(F$e,F$F,this._records[F$F+"|"+F$e]))},F$e.garbageCollection=function(F$e){var F$F=this._resources;(F$F=F$F.slice()).sort(function(F$e,F$F){if(!F$e||!F$F)throw new Error("a或b不能为空！");return F$e.released&&F$F.released?0:F$e.released?1:F$F.released?-1:F$e._lastUseFrameCount-F$F._lastUseFrameCount});for(var F$a=F$W.loopCount,F$o=0,F$E=F$F.length;F$o<F$E;F$o++){var F$s=F$F[F$o];if(!(1<F$a-F$s._lastUseFrameCount))return void(this._memorySize>=F$e&&(this._isOverflow=!0));if(F$s.releaseResource(),this._memorySize<F$e)return void(this._isOverflow=!1)}},F$I(0,F$e,"id",function(){return this._id}),F$I(0,F$e,"name",function(){return this._name},function(F$e){!F$e&&""===F$e||this._name===F$e||(this._name=F$e,F$s._isResourceManagersSorted=!1)}),F$I(0,F$e,"memorySize",function(){return this._memorySize}),F$I(0,F$e,"records",function(){return this._records}),F$I(1,F$s,"systemResourceManager",function(){return F$s._systemResourceManager}),F$s.__init__=function(){F$s.currentResourceManager=F$s.systemResourceManager},F$s.getLoadedResourceManagerByIndex=function(F$e){return F$s._resourceManagers[F$e]},F$s.getLoadedResourceManagersCount=function(){return F$s._resourceManagers.length},F$s.recreateContentManagers=function(F$e){void 0===F$e&&(F$e=!1);for(var F$F=F$s.currentResourceManager,F$a=0;F$a<F$s._resourceManagers.length;F$a++){F$s.currentResourceManager=F$s._resourceManagers[F$a];for(var F$o=0;F$o<F$s.currentResourceManager._resources.length;F$o++)F$s.currentResourceManager._resources[F$o].releaseResource(F$e),F$s.currentResourceManager._resources[F$o].activeResource(F$e)}F$s.currentResourceManager=F$F},F$s.releaseContentManagers=function(F$e){void 0===F$e&&(F$e=!1);for(var F$F=F$s.currentResourceManager,F$a=0;F$a<F$s._resourceManagers.length;F$a++){F$s.currentResourceManager=F$s._resourceManagers[F$a];for(var F$o=0;F$o<F$s.currentResourceManager._resources.length;F$o++){var F$E=F$s.currentResourceManager._resources[F$o];!F$E.released&&F$E.releaseResource(F$e)}}F$s.currentResourceManager=F$F},F$s._uniqueIDCounter=0,F$s._isResourceManagersSorted=!1,F$s._resourceManagers=[],F$R(F$s,["_systemResourceManager",function(){return this._systemResourceManager=new F$s("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=F$s._systemResourceManager}]),F$s}(),F$k=(function(){function F$e(){}F$g(F$e,"laya.system.System"),F$e.changeDefinition=function(F$e,F$F){F$b[F$e]=F$F;var F$a=F$e+"=classObj";F$b._runScript(F$a)},F$e.__init__=function(){F$Z.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function F$a(){}return F$g(F$a,"laya.utils.Browser"),F$I(1,F$a,"pixelRatio",function(){return F$a.__init__(),-1<F$a.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:F$G.getPixelRatio()}),F$I(1,F$a,"height",function(){return F$a.__init__(),(F$b.stage&&F$b.stage.canvasRotation?F$a.clientWidth:F$a.clientHeight)*F$a.pixelRatio}),F$I(1,F$a,"clientWidth",function(){return F$a.__init__(),F$a.window.innerWidth||F$a.document.body.clientWidth}),F$I(1,F$a,"window",function(){return F$a.__init__(),F$a._window}),F$I(1,F$a,"clientHeight",function(){return F$a.__init__(),F$a.window.innerHeight||F$a.document.body.clientHeight||F$a.document.documentElement.clientHeight}),F$I(1,F$a,"width",function(){return F$a.__init__(),(F$b.stage&&F$b.stage.canvasRotation?F$a.clientHeight:F$a.clientWidth)*F$a.pixelRatio}),F$I(1,F$a,"container",function(){return F$a.__init__(),F$a._container||((F$a._container=F$a.createElement("div")).id="layaContainer",F$a.document.body.appendChild(F$a._container)),F$a._container},function(F$e){F$a._container=F$e}),F$I(1,F$a,"document",function(){return F$a.__init__(),F$a._document}),F$a.__init__=function(){if(!F$a._window){F$a._window=F$G.getWindow(),F$a._document=F$a.window.document,F$a._window.addEventListener("message",function(F$e){laya.utils.Browser._onMessage(F$e)},!1),F$a.document.__createElement=F$a.document.createElement,F$Y.requestAnimationFrame=F$Y.requestAnimationFrame||F$Y.webkitRequestAnimationFrame||F$Y.mozRequestAnimationFrame||F$Y.oRequestAnimationFrame||F$Y.msRequestAnimationFrame||function(F$e){return F$Y.setTimeout(F$e,1e3/60)};var F$e=F$Y.document.body.style;F$e["-webkit-user-select"]="none",F$e["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",F$a.userAgent=F$a.window.navigator.userAgent,F$a.onIOS=!!(F$a.u=F$a.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),F$a.onMobile=-1<F$a.u.indexOf("Mobile"),F$a.onIPhone=-1<F$a.u.indexOf("iPhone"),F$a.onMac=-1<F$a.u.indexOf("Mac OS X"),F$a.onIPad=-1<F$a.u.indexOf("iPad"),F$a.onAndroid=-1<F$a.u.indexOf("Android")||-1<F$a.u.indexOf("Adr"),F$a.onWP=-1<F$a.u.indexOf("Windows Phone"),F$a.onQQBrowser=-1<F$a.u.indexOf("QQBrowser"),F$a.onMQQBrowser=-1<F$a.u.indexOf("MQQBrowser")||-1<F$a.u.indexOf("Mobile")&&-1<F$a.u.indexOf("QQ"),F$a.onIE=!!F$a.window.ActiveXObject||"ActiveXObject"in F$a.window,F$a.onWeiXin=-1<F$a.u.indexOf("MicroMessenger"),F$a.onPC=!F$a.onMobile,F$a.onSafari=-1<F$a.u.indexOf("Safari"),F$a.onFirefox=-1<F$a.u.indexOf("Firefox"),F$a.onEdge=-1<F$a.u.indexOf("Edge"),F$a.onMiniGame=-1<F$a.u.indexOf("MiniGame"),F$a.onLimixiu=-1<F$a.u.indexOf("limixiu"),F$a.httpProtocol="http:"==F$a.window.location.protocol,F$a.onMiniGame&&null==F$a.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),F$a.webAudioEnabled=!!(F$a.window.AudioContext||F$a.window.webkitAudioContext||F$a.window.mozAudioContext),F$a.soundType=F$a.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",F$Ee=F$a.webAudioEnabled?F$se:F$ae,F$a.webAudioEnabled&&F$se.initWebAudio(),F$ae._initMusicAudio(),F$a.enableTouch="ontouchstart"in F$Y||F$Y.DocumentTouch&&F$F instanceof DocumentTouch,F$Y.focus(),F$V._soundClass=F$Ee,F$V._musicClass=F$ae,F$Z._mainCanvas=F$Z._mainCanvas||F$ye.create("2D"),F$a.canvas||(F$a.canvas=F$ye.create("2D"),F$a.context=F$a.canvas.getContext("2d"))}},F$a._onMessage=function(F$e){if(F$e.data&&"size"==F$e.data.name){if(F$a.window.innerWidth=F$e.data.width,F$a.window.innerHeight=F$e.data.height,F$a.window.__innerHeight=F$e.data.clientHeight,!F$a.document.createEvent)return void console.warn("no document.createEvent");var F$F=F$a.document.createEvent("HTMLEvents");return F$F.initEvent("resize",!1,!1),void F$a.window.dispatchEvent(F$F)}},F$a.createElement=function(F$e){return F$a.__init__(),F$a.document.__createElement(F$e)},F$a.getElementById=function(F$e){return F$a.__init__(),F$a.document.getElementById(F$e)},F$a.removeElement=function(F$e){F$e&&F$e.parentNode&&F$e.parentNode.removeChild(F$e)},F$a.now=function(){return F$G.now()},F$a._window=null,F$a._document=null,F$a._container=null,F$a.userAgent=null,F$a.u=null,F$a.onIOS=!1,F$a.onMac=!1,F$a.onMobile=!1,F$a.onIPhone=!1,F$a.onIPad=!1,F$a.onAndroid=!1,F$a.onWP=!1,F$a.onQQBrowser=!1,F$a.onMQQBrowser=!1,F$a.onSafari=!1,F$a.onFirefox=!1,F$a.onEdge=!1,F$a.onIE=!1,F$a.onWeiXin=!1,F$a.onMiniGame=!1,F$a.onLimixiu=!1,F$a.onPC=!1,F$a.httpProtocol=!1,F$a.webAudioEnabled=!1,F$a.soundType=null,F$a.enableTouch=!1,F$a.canvas=null,F$a.context=null,F$a.__init$=function(){},F$a}()),F$d=function(){function F$F(F$e){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,F$e?(this._u8d_=new Uint8Array(F$e),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}F$g(F$F,"laya.utils.Byte");var F$e=F$F.prototype;return F$e.___resizeBuffer=function(F$F){try{var F$e=new Uint8Array(F$F);null!=this._u8d_&&(this._u8d_.length<=F$F?F$e.set(this._u8d_):F$e.set(this._u8d_.subarray(0,F$F))),this._u8d_=F$e,this._d_=new DataView(F$e.buffer)}catch(F$e){throw"___resizeBuffer err:"+F$F}},F$e.getString=function(){return this.rUTF(this.getUint16())},F$e.getFloat32Array=function(F$e,F$F){var F$a=F$e+F$F;F$a=F$a>this._length?this._length:F$a;var F$o=new Float32Array(this._d_.buffer.slice(F$e,F$a));return this._pos_=F$a,F$o},F$e.getUint8Array=function(F$e,F$F){var F$a=F$e+F$F;F$a=F$a>this._length?this._length:F$a;var F$o=new Uint8Array(this._d_.buffer.slice(F$e,F$a));return this._pos_=F$a,F$o},F$e.getInt16Array=function(F$e,F$F){var F$a=F$e+F$F;F$a=F$a>this._length?this._length:F$a;var F$o=new Int16Array(this._d_.buffer.slice(F$e,F$a));return this._pos_=F$a,F$o},F$e.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var F$e=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,F$e},F$e.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var F$e=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,F$e},F$e.writeFloat32=function(F$e){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,F$e,this._xd_),this._pos_+=4},F$e.writeFloat64=function(F$e){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,F$e,this._xd_),this._pos_+=8},F$e.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var F$e=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,F$e},F$e.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var F$e=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,F$e},F$e.writeInt32=function(F$e){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,F$e,this._xd_),this._pos_+=4},F$e.writeUint32=function(F$e){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,F$e,this._xd_),this._pos_+=4},F$e.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var F$e=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,F$e},F$e.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var F$e=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,F$e},F$e.writeUint16=function(F$e){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,F$e,this._xd_),this._pos_+=2},F$e.writeInt16=function(F$e){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,F$e,this._xd_),this._pos_+=2},F$e.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},F$e.writeUint8=function(F$e){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,F$e),this._pos_++},F$e._getUInt8=function(F$e){return this._d_.getUint8(F$e)},F$e._getUint16=function(F$e){return this._d_.getUint16(F$e,this._xd_)},F$e._getMatrix=function(){return new F$A(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},F$e.rUTF=function(F$e){for(var F$F=[],F$a=this._pos_+F$e,F$o=0,F$E=0,F$s=0,F$Y=String.fromCharCode,F$_=this._u8d_;this._pos_<F$a;)(F$o=F$_[this._pos_++])<128?0!=F$o&&F$F.push(F$Y(F$o)):F$o<224?F$F.push(F$Y((63&F$o)<<6|127&F$_[this._pos_++])):F$o<240?(F$E=F$_[this._pos_++],F$F.push(F$Y((31&F$o)<<12|(127&F$E)<<6|127&F$_[this._pos_++]))):(F$E=F$_[this._pos_++],F$s=F$_[this._pos_++],F$F.push(F$Y((15&F$o)<<18|(127&F$E)<<12|F$s<<6&127|127&F$_[this._pos_++]))),0;return F$F.join("")},F$e.getCustomString=function(F$e){for(var F$F=[],F$a=0,F$o=0,F$E=0,F$s=String.fromCharCode,F$Y=this._u8d_;0<F$e;)if((F$o=F$Y[this._pos_])<128)F$F.push(F$s(F$o)),this._pos_++,F$e--;else for(F$a=F$o-128,this._pos_++,F$e-=F$a;0<F$a;)F$o=F$Y[this._pos_++],F$E=F$Y[this._pos_++],F$F.push(F$s(F$E<<8|F$o)),F$a--;return F$F.join("")},F$e.clear=function(){this._pos_=0,this.length=0},F$e.__getBuffer=function(){return this._d_.buffer},F$e.writeUTFBytes=function(F$e){for(var F$F=0,F$a=(F$e+="").length;F$F<F$a;F$F++){var F$o=F$e.charCodeAt(F$F);F$o<=127?this.writeByte(F$o):F$o<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|F$o>>6,128|63&F$o],this._pos_),this._pos_+=2):F$o<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|F$o>>12,128|F$o>>6&63,128|63&F$o],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|F$o>>18,128|F$o>>12&63,128|F$o>>6&63,128|63&F$o],this._pos_),this._pos_+=4)}},F$e.writeUTFString=function(F$e){var F$F=this.pos;this.writeUint16(1),this.writeUTFBytes(F$e);var F$a=this.pos-F$F-2;if(65536<=F$a)throw"writeUTFString byte len more than 65536";this._d_.setUint16(F$F,F$a,this._xd_)},F$e.readUTFString=function(){return this.readUTFBytes(this.getUint16())},F$e.getUTFString=function(){return this.readUTFString()},F$e.readUTFBytes=function(F$e){if(void 0===F$e&&(F$e=-1),0==F$e)return"";var F$F=this.bytesAvailable;if(F$F<F$e)throw"readUTFBytes error - Out of bounds";return F$e=0<F$e?F$e:F$F,this.rUTF(F$e)},F$e.getUTFBytes=function(F$e){return void 0===F$e&&(F$e=-1),this.readUTFBytes(F$e)},F$e.writeByte=function(F$e){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,F$e),this._pos_+=1},F$e.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},F$e.getByte=function(){return this.readByte()},F$e.ensureWrite=function(F$e){this._length<F$e&&(this._length=F$e),this._allocated_<F$e&&(this.length=F$e)},F$e.writeArrayBuffer=function(F$e,F$F,F$a){if(void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),F$F<0||F$a<0)throw"writeArrayBuffer error - Out of bounds";0==F$a&&(F$a=F$e.byteLength-F$F),this.ensureWrite(this._pos_+F$a);var F$o=new Uint8Array(F$e);this._u8d_.set(F$o.subarray(F$F,F$F+F$a),this._pos_),this._pos_+=F$a},F$I(0,F$e,"buffer",function(){var F$e=this._d_.buffer;return F$e.byteLength==this.length?F$e:F$e.slice(0,this.length)}),F$I(0,F$e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(F$e){this._xd_="littleEndian"==F$e}),F$I(0,F$e,"length",function(){return this._length},function(F$e){this._allocated_<F$e?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(F$e,2*this._allocated_))):this._allocated_>F$e&&this.___resizeBuffer(this._allocated_=F$e),this._length=F$e}),F$I(0,F$e,"pos",function(){return this._pos_},function(F$e){this._pos_=F$e}),F$I(0,F$e,"bytesAvailable",function(){return this._length-this._pos_}),F$F.getSystemEndian=function(){if(!F$F._sysEndian){var F$e=new ArrayBuffer(2);new DataView(F$e).setInt16(0,256,!0),F$F._sysEndian=256===new Int16Array(F$e)[0]?"littleEndian":"bigEndian"}return F$F._sysEndian},F$F.BIG_ENDIAN="bigEndian",F$F.LITTLE_ENDIAN="littleEndian",F$F._sysEndian=null,F$F}(),F$w=function(){function F$E(){}return F$g(F$E,"laya.utils.CacheManager"),F$E.regCacheByFunction=function(F$e,F$F){var F$a;F$E.unRegCacheByFunction(F$e,F$F),F$a={tryDispose:F$e,getCacheList:F$F},F$E._cacheList.push(F$a)},F$E.unRegCacheByFunction=function(F$e,F$F){var F$a,F$o=0;for(F$a=F$E._cacheList.length,F$o=0;F$o<F$a;F$o++)if(F$E._cacheList[F$o].tryDispose==F$e&&F$E._cacheList[F$o].getCacheList==F$F)return void F$E._cacheList.splice(F$o,1)},F$E.forceDispose=function(){var F$e=0,F$F=F$E._cacheList.length;for(F$e=0;F$e<F$F;F$e++)F$E._cacheList[F$e].tryDispose(!0)},F$E.beginCheck=function(F$e){void 0===F$e&&(F$e=15e3),F$b.timer.loop(F$e,null,F$E._checkLoop)},F$E.stopCheck=function(){F$b.timer.clear(null,F$E._checkLoop)},F$E._checkLoop=function(){var F$e=F$E._cacheList;if(!(F$e.length<1)){var F$F,F$a=F$k.now(),F$o=0;for(F$F=F$o=F$e.length;0<F$o&&(F$e[F$E._index=++F$E._index%F$F].tryDispose(!1),!(F$k.now()-F$a>F$E.loopTimeLimit));)F$o--}},F$E.loopTimeLimit=2,F$E._cacheList=[],F$E._index=0,F$E}(),F$S=function(){function F$q(){}return F$g(F$q,"laya.utils.ClassUtils"),F$q.regClass=function(F$e,F$F){F$q._classMap[F$e]=F$F},F$q.getRegClass=function(F$e){return F$q._classMap[F$e]},F$q.getInstance=function(F$e){var F$F=F$q.getClass(F$e);return F$F?new F$F:(console.warn("[error] Undefined class:",F$e),null)},F$q.createByJson=function(F$e,F$F,F$a,F$o,F$E){"string"==typeof F$e&&(F$e=JSON.parse(F$e));var F$s=F$e.props;if(!F$F&&!(F$F=F$E?F$E.runWith(F$e):F$q.getInstance(F$s.runtime||F$e.type)))return null;var F$Y=F$e.child;if(F$Y)for(var F$_=0,F$R=F$Y.length;F$_<F$R;F$_++){var F$H=F$Y[F$_];if("render"!==F$H.props.name&&"render"!==F$H.props.renderType||!F$F._$set_itemRender)if("Graphic"==F$H.type)F$q.addGraphicsToSprite(F$H,F$F);else if(F$q.isDrawType(F$H.type))F$q.addGraphicToSprite(F$H,F$F,!0);else{var F$g=F$q.createByJson(F$H,null,F$a,F$o,F$E);"Script"==F$H.type?F$g.hasOwnProperty("owner")?F$g.owner=F$F:F$g.hasOwnProperty("target")&&(F$g.target=F$F):"mask"==F$H.props.renderType?F$F.mask=F$g:F$F.addChild(F$g)}else F$F.itemRender=F$H}if(F$s)for(var F$n in F$s){var F$O=F$s[F$n];"var"===F$n&&F$a?F$a[F$O]=F$F:F$O instanceof Array&&"function"==typeof F$F[F$n]?F$F[F$n].apply(F$F,F$O):F$F[F$n]=F$O}return F$o&&F$e.customProps&&F$o.runWith([F$F,F$e]),F$F.created&&F$F.created(),F$F},F$q.addGraphicsToSprite=function(F$e,F$F){var F$a;if((F$a=F$e.child)&&!(F$a.length<1)){var F$o;F$o=F$q._getGraphicsFromSprite(F$e,F$F);var F$E=0,F$s=0;F$e.props&&(F$E=F$q._getObjVar(F$e.props,"x",0),F$s=F$q._getObjVar(F$e.props,"y",0)),0!=F$E&&0!=F$s&&F$o.translate(F$E,F$s);var F$Y,F$_=0;for(F$Y=F$a.length,F$_=0;F$_<F$Y;F$_++)F$q._addGraphicToGraphics(F$a[F$_],F$o);0!=F$E&&0!=F$s&&F$o.translate(-F$E,-F$s)}},F$q.addGraphicToSprite=function(F$e,F$F,F$a){var F$o;void 0===F$a&&(F$a=!1),F$o=F$a?F$q._getGraphicsFromSprite(F$e,F$F):F$F.graphics,F$q._addGraphicToGraphics(F$e,F$o)},F$q._getGraphicsFromSprite=function(F$e,F$F){var F$a,F$o;if(!F$e||!F$e.props)return F$F.graphics;switch(F$o=F$e.props.renderType){case"hit":case"unHit":var F$E;F$F.hitArea||(F$F.hitArea=new F$N),(F$E=F$F.hitArea)[F$o]||(F$E[F$o]=new F$O),F$a=F$E[F$o]}return F$a||(F$a=F$F.graphics),F$a},F$q._getTransformData=function(F$e){var F$F;(F$e.hasOwnProperty("pivotX")||F$e.hasOwnProperty("pivotY"))&&(F$F=F$F||new F$A).translate(-F$q._getObjVar(F$e,"pivotX",0),-F$q._getObjVar(F$e,"pivotY",0));var F$a=F$q._getObjVar(F$e,"scaleX",1),F$o=F$q._getObjVar(F$e,"scaleY",1),F$E=F$q._getObjVar(F$e,"rotation",0);F$q._getObjVar(F$e,"skewX",0),F$q._getObjVar(F$e,"skewY",0);return 1==F$a&&1==F$o&&0==F$E||((F$F=F$F||new F$A).scale(F$a,F$o),F$F.rotate(.0174532922222222*F$E)),F$F},F$q._addGraphicToGraphics=function(F$e,F$F){var F$a,F$o;if((F$a=F$e.props)&&(F$o=F$q.DrawTypeDic[F$e.type])){var F$E,F$s;F$E=F$F;var F$Y=F$q._getParams(F$a,F$o[1],F$o[2],F$o[3]);((F$s=F$q._tM)||1!=F$q._alpha)&&(F$E.save(),F$s&&F$E.transform(F$s),1!=F$q._alpha&&F$E.alpha(F$q._alpha)),F$E[F$o[0]].apply(F$E,F$Y),(F$s||1!=F$q._alpha)&&F$E.restore()}},F$q._adptLineData=function(F$e){return F$e[2]=parseFloat(F$e[0])+parseFloat(F$e[2]),F$e[3]=parseFloat(F$e[1])+parseFloat(F$e[3]),F$e},F$q._adptTextureData=function(F$e){return F$e[0]=F$_e.getRes(F$e[0]),F$e},F$q._adptLinesData=function(F$e){return F$e[2]=F$q._getPointListByStr(F$e[2]),F$e},F$q.isDrawType=function(F$e){return"Image"!=F$e&&F$q.DrawTypeDic.hasOwnProperty(F$e)},F$q._getParams=function(F$e,F$F,F$a,F$o){var F$E;void 0===F$a&&(F$a=0),(F$E=F$q._temParam).length=F$F.length;var F$s,F$Y,F$_=0;for(F$s=F$F.length,F$_=0;F$_<F$s;F$_++)F$E[F$_]=F$q._getObjVar(F$e,F$F[F$_][0],F$F[F$_][1]);return F$q._alpha=F$q._getObjVar(F$e,"alpha",1),F$Y=F$q._getTransformData(F$e),F$q._tM=F$Y?(F$a||(F$a=0),F$Y.translate(F$E[F$a],F$E[F$a+1]),F$E[F$a]=F$E[F$a+1]=0,F$Y):null,F$o&&F$q[F$o]&&(F$E=F$q[F$o](F$E)),F$E},F$q._getPointListByStr=function(F$e){var F$F,F$a,F$o=0;for(F$a=(F$F=F$e.split(",")).length,F$o=0;F$o<F$a;F$o++)F$F[F$o]=parseFloat(F$F[F$o]);return F$F},F$q._getObjVar=function(F$e,F$F,F$a){return F$e.hasOwnProperty(F$F)?F$e[F$F]:F$a},F$q._temParam=[],F$q._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},F$q.getClass=function(F$e){var F$F=F$q._classMap[F$e]||F$e;return"string"==typeof F$F?F$b.__classmap[F$F]:F$F},F$q._tM=null,F$q._alpha=NaN,F$R(F$q,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),F$q}(),F$C=function(){function F$s(F$e){if(this._color=[],"string"==typeof F$e){null===(this.strColor=F$e)&&(F$e="#000000"),"#"==F$e.charAt(0)&&(F$e=F$e.substr(1));var F$F=F$e.length;if(3==F$F||4==F$F){for(var F$a="",F$o=0;F$o<F$F;F$o++)F$a+=F$e[F$o]+F$e[F$o];F$e=F$a}var F$E=this.numColor=parseInt(F$e,16);if(8==F$e.length)return void(this._color=[parseInt(F$e.substr(0,2),16)/255,((16711680&F$E)>>16)/255,((65280&F$E)>>8)/255,(255&F$E)/255])}else F$E=this.numColor=F$e,this.strColor=F$Q.toHexColor(F$E);this._color=[((16711680&F$E)>>16)/255,((65280&F$E)>>8)/255,(255&F$E)/255,1],this._color.__id=++F$s._COLODID}return F$g(F$s,"laya.utils.Color"),F$s._initDefault=function(){for(var F$e in F$s._DEFAULT={},F$s._COLOR_MAP)F$s._SAVE[F$e]=F$s._DEFAULT[F$e]=new F$s(F$s._COLOR_MAP[F$e]);return F$s._DEFAULT},F$s._initSaveMap=function(){for(var F$e in F$s._SAVE_SIZE=0,F$s._SAVE={},F$s._DEFAULT)F$s._SAVE[F$e]=F$s._DEFAULT[F$e]},F$s.create=function(F$e){var F$F=F$s._SAVE[F$e+""];return null!=F$F?F$F:(F$s._SAVE_SIZE<1e3||F$s._initSaveMap(),F$s._SAVE[F$e+""]=new F$s(F$e))},F$s._SAVE={},F$s._SAVE_SIZE=0,F$s._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},F$s._DEFAULT=F$s._initDefault(),F$s._COLODID=1,F$s}(),F$u=(function(){function F$e(){this._values=[],this._keys=[]}F$g(F$e,"laya.utils.Dictionary");var F$F=F$e.prototype;F$F.set=function(F$e,F$F){var F$a=this.indexOf(F$e);0<=F$a?this._values[F$a]=F$F:(this._keys.push(F$e),this._values.push(F$F))},F$F.indexOf=function(F$e){var F$F=this._keys.indexOf(F$e);return 0<=F$F?F$F:(F$e="string"==typeof F$e?Number(F$e):"number"==typeof F$e?F$e.toString():F$e,this._keys.indexOf(F$e))},F$F.get=function(F$e){var F$F=this.indexOf(F$e);return F$F<0?null:this._values[F$F]},F$F.remove=function(F$e){var F$F=this.indexOf(F$e);return 0<=F$F&&(this._keys.splice(F$F,1),this._values.splice(F$F,1),!0)},F$F.clear=function(){this._values.length=0,this._keys.length=0},F$I(0,F$F,"values",function(){return this._values}),F$I(0,F$F,"keys",function(){return this._keys})}(),function(){function F$e(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}F$g(F$e,"laya.utils.Dragging");var F$F=F$e.prototype;return F$F.start=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){void 0===F$_&&(F$_=.92),this.clearTimer(),this.target=F$e,this.area=F$F,this.hasInertia=F$a,this.elasticDistance=F$F?F$o:0,this.elasticBackTime=F$E,this.data=F$s,this._disableMouseEvent=F$Y,this.ratio=F$_,1!=F$e.globalScaleX||1!=F$e.globalScaleY?this._parent=F$e.parent:this._parent=F$b.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,F$b.stage.on("mouseup",this,this.onStageMouseUp),F$b.stage.on("mouseout",this,this.onStageMouseUp),F$b.timer.frameLoop(1,this,this.loop)},F$F.clearTimer=function(){F$b.timer.clear(this,this.loop),F$b.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},F$F.stop=function(){this._dragging&&(F$l.instance.disableMouseEvent=!1,F$b.stage.off("mouseup",this,this.onStageMouseUp),F$b.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},F$F.loop=function(){var F$e=this._parent.getMousePoint(),F$F=F$e.x,F$a=F$e.y,F$o=F$F-this._lastX,F$E=F$a-this._lastY;if(this._clickOnly){if(!(1<Math.abs(F$o*F$b.stage._canvasTransform.getScaleX())||1<Math.abs(F$E*F$b.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),F$l.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(F$o,F$E);0==F$o&&0==F$E||(this._lastX=F$F,this._lastY=F$a,this.target.x+=F$o*this._elasticRateX,this.target.y+=F$E*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},F$F.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var F$e=this.area.x-this.target.x;else F$e=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-F$e/this.elasticDistance),this.target.y<this.area.y)var F$F=this.area.y-this.target.y;else F$F=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-F$F/this.elasticDistance)}},F$F.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},F$F.onStageMouseUp=function(F$e){if(F$l.instance.disableMouseEvent=!1,F$b.stage.off("mouseup",this,this.onStageMouseUp),F$b.stage.off("mouseout",this,this.onStageMouseUp),F$b.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var F$F=this._offsets.length,F$a=Math.min(F$F,6),F$o=this._offsets.length-F$a,F$E=F$F-1;F$o<F$E;F$E--)this._offsetY+=this._offsets[F$E--],this._offsetX+=this._offsets[F$E];this._offsetX=this._offsetX/F$a*2,this._offsetY=this._offsetY/F$a*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),F$b.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},F$F.checkElastic=function(){var F$e=NaN,F$F=NaN;if(this.target.x<this.area.x?F$e=this.area.x:this.target.x>this.area.x+this.area.width&&(F$e=this.area.x+this.area.width),this.target.y<this.area.y?F$F=this.area.y:this.target.y>this.area.y+this.area.height&&(F$F=this.area.y+this.area.height),isNaN(F$e)&&isNaN(F$F))this.clear();else{var F$a={};isNaN(F$e)||(F$a.x=F$e),isNaN(F$F)||(F$a.y=F$F),this._tween=F$i.to(this.target,F$a,this.elasticBackTime,F$x.sineOut,F$$.create(this,this.clear),0,!1,!1)}},F$F.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(F$b.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},F$F.clear=function(){if(this.target){this.clearTimer();var F$e=this.target;this.target=null,this._parent=null,F$e.event("dragend",this.data)}},F$e}()),F$x=function(){function F$_(){}return F$g(F$_,"laya.utils.Ease"),F$_.linearNone=function(F$e,F$F,F$a,F$o){return F$a*F$e/F$o+F$F},F$_.linearIn=function(F$e,F$F,F$a,F$o){return F$a*F$e/F$o+F$F},F$_.linearInOut=function(F$e,F$F,F$a,F$o){return F$a*F$e/F$o+F$F},F$_.linearOut=function(F$e,F$F,F$a,F$o){return F$a*F$e/F$o+F$F},F$_.bounceIn=function(F$e,F$F,F$a,F$o){return F$a-F$_.bounceOut(F$o-F$e,0,F$a,F$o)+F$F},F$_.bounceInOut=function(F$e,F$F,F$a,F$o){return F$e<.5*F$o?.5*F$_.bounceIn(2*F$e,0,F$a,F$o)+F$F:.5*F$_.bounceOut(2*F$e-F$o,0,F$a,F$o)+.5*F$a+F$F},F$_.bounceOut=function(F$e,F$F,F$a,F$o){return(F$e/=F$o)<1/2.75?F$a*(7.5625*F$e*F$e)+F$F:F$e<2/2.75?F$a*(7.5625*(F$e-=1.5/2.75)*F$e+.75)+F$F:F$e<2.5/2.75?F$a*(7.5625*(F$e-=2.25/2.75)*F$e+.9375)+F$F:F$a*(7.5625*(F$e-=2.625/2.75)*F$e+.984375)+F$F},F$_.backIn=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=1.70158),F$a*(F$e/=F$o)*F$e*((F$E+1)*F$e-F$E)+F$F},F$_.backInOut=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=1.70158),(F$e/=.5*F$o)<1?.5*F$a*(F$e*F$e*((1+(F$E*=1.525))*F$e-F$E))+F$F:F$a/2*((F$e-=2)*F$e*((1+(F$E*=1.525))*F$e+F$E)+2)+F$F},F$_.backOut=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=1.70158),F$a*((F$e=F$e/F$o-1)*F$e*((F$E+1)*F$e+F$E)+1)+F$F},F$_.elasticIn=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y;return void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=0),0==F$e?F$F:1==(F$e/=F$o)?F$F+F$a:(F$s||(F$s=.3*F$o),F$Y=!F$E||0<F$a&&F$E<F$a||F$a<0&&F$E<-F$a?(F$E=F$a,F$s/4):F$s/F$_.PI2*Math.asin(F$a/F$E),-F$E*Math.pow(2,10*(F$e-=1))*Math.sin((F$e*F$o-F$Y)*F$_.PI2/F$s)+F$F)},F$_.elasticInOut=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y;return void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=0),0==F$e?F$F:2==(F$e/=.5*F$o)?F$F+F$a:(F$s||(F$s=F$o*(.3*1.5)),F$Y=!F$E||0<F$a&&F$E<F$a||F$a<0&&F$E<-F$a?(F$E=F$a,F$s/4):F$s/F$_.PI2*Math.asin(F$a/F$E),F$e<1?F$E*Math.pow(2,10*(F$e-=1))*Math.sin((F$e*F$o-F$Y)*F$_.PI2/F$s)*-.5+F$F:F$E*Math.pow(2,-10*(F$e-=1))*Math.sin((F$e*F$o-F$Y)*F$_.PI2/F$s)*.5+F$a+F$F)},F$_.elasticOut=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y;return void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=0),0==F$e?F$F:1==(F$e/=F$o)?F$F+F$a:(F$s||(F$s=.3*F$o),F$Y=!F$E||0<F$a&&F$E<F$a||F$a<0&&F$E<-F$a?(F$E=F$a,F$s/4):F$s/F$_.PI2*Math.asin(F$a/F$E),F$E*Math.pow(2,-10*F$e)*Math.sin((F$e*F$o-F$Y)*F$_.PI2/F$s)+F$a+F$F)},F$_.strongIn=function(F$e,F$F,F$a,F$o){return F$a*(F$e/=F$o)*F$e*F$e*F$e*F$e+F$F},F$_.strongInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*F$a*F$e*F$e*F$e*F$e*F$e+F$F:.5*F$a*((F$e-=2)*F$e*F$e*F$e*F$e+2)+F$F},F$_.strongOut=function(F$e,F$F,F$a,F$o){return F$a*((F$e=F$e/F$o-1)*F$e*F$e*F$e*F$e+1)+F$F},F$_.sineInOut=function(F$e,F$F,F$a,F$o){return.5*-F$a*(Math.cos(Math.PI*F$e/F$o)-1)+F$F},F$_.sineIn=function(F$e,F$F,F$a,F$o){return-F$a*Math.cos(F$e/F$o*F$_.HALF_PI)+F$a+F$F},F$_.sineOut=function(F$e,F$F,F$a,F$o){return F$a*Math.sin(F$e/F$o*F$_.HALF_PI)+F$F},F$_.quintIn=function(F$e,F$F,F$a,F$o){return F$a*(F$e/=F$o)*F$e*F$e*F$e*F$e+F$F},F$_.quintInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*F$a*F$e*F$e*F$e*F$e*F$e+F$F:.5*F$a*((F$e-=2)*F$e*F$e*F$e*F$e+2)+F$F},F$_.quintOut=function(F$e,F$F,F$a,F$o){return F$a*((F$e=F$e/F$o-1)*F$e*F$e*F$e*F$e+1)+F$F},F$_.quartIn=function(F$e,F$F,F$a,F$o){return F$a*(F$e/=F$o)*F$e*F$e*F$e+F$F},F$_.quartInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*F$a*F$e*F$e*F$e*F$e+F$F:.5*-F$a*((F$e-=2)*F$e*F$e*F$e-2)+F$F},F$_.quartOut=function(F$e,F$F,F$a,F$o){return-F$a*((F$e=F$e/F$o-1)*F$e*F$e*F$e-1)+F$F},F$_.cubicIn=function(F$e,F$F,F$a,F$o){return F$a*(F$e/=F$o)*F$e*F$e+F$F},F$_.cubicInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*F$a*F$e*F$e*F$e+F$F:.5*F$a*((F$e-=2)*F$e*F$e+2)+F$F},F$_.cubicOut=function(F$e,F$F,F$a,F$o){return F$a*((F$e=F$e/F$o-1)*F$e*F$e+1)+F$F},F$_.quadIn=function(F$e,F$F,F$a,F$o){return F$a*(F$e/=F$o)*F$e+F$F},F$_.quadInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*F$a*F$e*F$e+F$F:.5*-F$a*(--F$e*(F$e-2)-1)+F$F},F$_.quadOut=function(F$e,F$F,F$a,F$o){return-F$a*(F$e/=F$o)*(F$e-2)+F$F},F$_.expoIn=function(F$e,F$F,F$a,F$o){return 0==F$e?F$F:F$a*Math.pow(2,10*(F$e/F$o-1))+F$F-.001*F$a},F$_.expoInOut=function(F$e,F$F,F$a,F$o){return 0==F$e?F$F:F$e==F$o?F$F+F$a:(F$e/=.5*F$o)<1?.5*F$a*Math.pow(2,10*(F$e-1))+F$F:.5*F$a*(2-Math.pow(2,-10*--F$e))+F$F},F$_.expoOut=function(F$e,F$F,F$a,F$o){return F$e==F$o?F$F+F$a:F$a*(1-Math.pow(2,-10*F$e/F$o))+F$F},F$_.circIn=function(F$e,F$F,F$a,F$o){return-F$a*(Math.sqrt(1-(F$e/=F$o)*F$e)-1)+F$F},F$_.circInOut=function(F$e,F$F,F$a,F$o){return(F$e/=.5*F$o)<1?.5*-F$a*(Math.sqrt(1-F$e*F$e)-1)+F$F:.5*F$a*(Math.sqrt(1-(F$e-=2)*F$e)+1)+F$F},F$_.circOut=function(F$e,F$F,F$a,F$o){return F$a*Math.sqrt(1-(F$e=F$e/F$o-1)*F$e)+F$F},F$_.HALF_PI=.5*Math.PI,F$_.PI2=2*Math.PI,F$_}(),F$N=function(){function F$n(){this._hit=null,this._unHit=null}F$g(F$n,"laya.utils.HitArea");var F$e=F$n.prototype;return F$e.isHit=function(F$e,F$F){return!!F$n.isHitGraphic(F$e,F$F,this.hit)&&!F$n.isHitGraphic(F$e,F$F,this.unHit)},F$e.contains=function(F$e,F$F){return this.isHit(F$e,F$F)},F$I(0,F$e,"hit",function(){return this._hit||(this._hit=new F$O),this._hit},function(F$e){this._hit=F$e}),F$I(0,F$e,"unHit",function(){return this._unHit||(this._unHit=new F$O),this._unHit},function(F$e){this._unHit=F$e}),F$n.isHitGraphic=function(F$e,F$F,F$a){if(!F$a)return!1;var F$o;if(!(F$o=F$a.cmds)&&F$a._one&&((F$o=F$n._cmds).length=1,F$o[0]=F$a._one),!F$o)return!1;var F$E,F$s,F$Y=0;for(F$E=F$o.length,F$Y=0;F$Y<F$E;F$Y++)if(F$s=F$o[F$Y]){var F$_=F$Z._context;switch(F$s.callee){case F$_._translate:case 6:F$e-=F$s[0],F$F-=F$s[1]}if(F$n.isHitCmd(F$e,F$F,F$s))return!0}return!1},F$n.isHitCmd=function(F$e,F$F,F$a){if(!F$a)return!1;var F$o=F$Z._context,F$E=!1;switch(F$a.callee){case F$o._drawRect:case 13:F$n._rec.setTo(F$a[0],F$a[1],F$a[2],F$a[3]),F$E=F$n._rec.contains(F$e,F$F);break;case F$o._drawCircle:case F$o._fillCircle:case 14:F$E=(F$e-=F$a[0])*F$e+(F$F-=F$a[1])*F$F<F$a[2]*F$a[2];break;case F$o._drawPoly:case 18:F$e-=F$a[0],F$F-=F$a[1],F$E=F$n.ptInPolygon(F$e,F$F,F$a[2])}return F$E},F$n.ptInPolygon=function(F$e,F$F,F$a){var F$o;(F$o=F$n._ptPoint).setTo(F$e,F$F);var F$E,F$s=0,F$Y=NaN,F$_=NaN,F$R=NaN,F$H=NaN;F$E=F$a.length;for(var F$g=0;F$g<F$E;F$g+=2){if(F$Y=F$a[F$g],F$_=F$a[F$g+1],F$R=F$a[(F$g+2)%F$E],F$_!=(F$H=F$a[(F$g+3)%F$E]))if(!(F$o.y<Math.min(F$_,F$H)))if(!(F$o.y>=Math.max(F$_,F$H)))(F$o.y-F$_)*(F$R-F$Y)/(F$H-F$_)+F$Y>F$o.x&&F$s++}return F$s%2==1},F$n._cmds=[],F$R(F$n,["_rec",function(){return this._rec=new F$B},"_ptPoint",function(){return this._ptPoint=new F$L}]),F$n}(),F$X=(function(){function F$E(F$e,F$F,F$a,F$o){this.char=F$e,this.charNum=F$e.charCodeAt(0),this._x=this._y=0,this.width=F$F,this.height=F$a,this.style=F$o,this.isWord=!F$E._isWordRegExp.test(F$e)}F$g(F$E,"laya.utils.HTMLChar");var F$e=F$E.prototype;F$b.imps(F$e,{"laya.display.ILayout":!0}),F$e.setSprite=function(F$e){this._sprite=F$e},F$e.getSprite=function(){return this._sprite},F$e._isChar=function(){return!0},F$e._getCSSStyle=function(){return this.style},F$I(0,F$e,"width",function(){return this._w},function(F$e){this._w=F$e}),F$I(0,F$e,"x",function(){return this._x},function(F$e){this._sprite&&(this._sprite.x=F$e),this._x=F$e}),F$I(0,F$e,"y",function(){return this._y},function(F$e){this._sprite&&(this._sprite.y=F$e),this._y=F$e}),F$I(0,F$e,"height",function(){return this._h},function(F$e){this._h=F$e}),F$E._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function F$F(){}F$g(F$F,"laya.utils.Log"),F$F.enable=function(){F$F._logdiv||(F$F._logdiv=F$k.window.document.createElement("div"),F$k.window.document.body.appendChild(F$F._logdiv),F$F._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},F$F.toggle=function(){var F$e=F$F._logdiv.style;"1px"==F$e.width?F$e.width=F$e.height="50%":F$e.width=F$e.height="1px"},F$F.print=function(F$e){F$F._logdiv&&(F$F.maxCount<=F$F._count&&F$F.clear(),F$F._count++,F$F._logdiv.innerText+=F$e+"\n",F$F._logdiv.scrollTop=F$F._logdiv.scrollHeight)},F$F.clear=function(){F$F._logdiv.innerText="",F$F._count=0},F$F._logdiv=null,F$F._count=0,F$F.maxCount=20}(),function(){function F$F(){}F$g(F$F,"laya.utils.Mouse"),F$I(1,F$F,"cursor",function(){return F$F._style.cursor},function(F$e){F$F._style.cursor=F$e}),F$F.hide=function(){"none"!=F$F.cursor&&(F$F._preCursor=F$F.cursor,F$F.cursor="none")},F$F.show=function(){"none"==F$F.cursor&&(F$F.cursor=F$F._preCursor?F$F._preCursor:"auto")},F$F._preCursor=null,F$R(F$F,["_style",function(){return this._style=F$k.document.body.style}])}(),function(){function F$s(){}return F$g(F$s,"laya.utils.Pool"),F$s.getPoolBySign=function(F$e){return F$s._poolDic[F$e]||(F$s._poolDic[F$e]=[])},F$s.clearBySign=function(F$e){F$s._poolDic[F$e]&&(F$s._poolDic[F$e].length=0)},F$s.recover=function(F$e,F$F){F$F.__InPool||(F$F.__InPool=!0,F$s.getPoolBySign(F$e).push(F$F))},F$s.getItemByClass=function(F$e,F$F){var F$a=F$s.getPoolBySign(F$e),F$o=F$a.length?F$a.pop():new F$F;return F$o.__InPool=!1,F$o},F$s.getItemByCreateFun=function(F$e,F$F,F$a){var F$o=F$s.getPoolBySign(F$e),F$E=F$o.length?F$o.pop():F$F.call(F$a);return F$E.__InPool=!1,F$E},F$s.getItem=function(F$e){var F$F=F$s.getPoolBySign(F$e),F$a=F$F.length?F$F.pop():null;return F$a&&(F$a.__InPool=!1),F$a},F$s._poolDic={},F$s.InPoolSign="__InPool",F$s}()),F$W=function(){function F$R(){}return F$g(F$R,"laya.utils.Stat"),F$I(1,F$R,"onclick",null,function(F$e){F$R._sp&&F$R._sp.on("click",F$R._sp,F$e),F$R._canvas&&(F$R._canvas.source.onclick=F$e,F$R._canvas.source.style.pointerEvents="")}),F$R.show=function(F$e,F$F,F$a){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),!F$Z.isConchApp||F$Z.isConchWebGL){if(F$Z.isConchWebGL||F$k.onMiniGame||F$k.onLimixiu||(F$R._useCanvas=!0),F$R._show=!0,F$R._fpsData.length=60,F$R._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},F$R._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},F$R._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},F$R._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},F$Z.isWebGL)if(F$R._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},F$Z.is3DMode){if(F$R._view[0].title="FPS(3D)",F$R._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},F$R._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},F$R._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==F$a){var F$o=8;F$R._view[F$o++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$R._view[F$o++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},F$R._view[F$o++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==F$a){F$o=8;F$R._view[F$o++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},F$R._view[F$o++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else F$R._view[0].title="FPS(WebGL)",F$R._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else F$R._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};F$R._useCanvas?F$R.createUIPre(F$e,F$F):F$R.createUI(F$e,F$F),F$R.enable()}else F$k.window.conch.showFPS&&F$k.window.conch.showFPS(F$e,F$F)},F$R.createUIPre=function(F$e,F$F){var F$a=F$k.pixelRatio;F$R._width=170*F$a,F$R._vx=75*F$a,F$R._height=F$a*(12*F$R._view.length+3*F$a)+4,F$R._fontSize=12*F$a;for(var F$o=0;F$o<F$R._view.length;F$o++)F$R._view[F$o].x=4,F$R._view[F$o].y=F$o*F$R._fontSize+2*F$a;F$R._canvas||((F$R._canvas=new F$ye("2D")).size(F$R._width,F$R._height),(F$R._ctx=F$R._canvas.getContext("2d")).textBaseline="top",F$R._ctx.font=F$R._fontSize+"px Sans-serif",F$R._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+F$e+"px;top:"+F$F+"px;width:"+F$R._width/F$a+"px;height:"+F$R._height/F$a+"px;"),F$R._first=!0,F$R.loop(),F$R._first=!1,F$k.container.appendChild(F$R._canvas.source)},F$R.createUI=function(F$e,F$F){var F$a=F$R._sp,F$o=F$k.pixelRatio;F$a||(F$a=new F$ne,(F$R._leftText=new F$Pe).pos(5,5),F$R._leftText.color="#ffffff",F$a.addChild(F$R._leftText),(F$R._txt=new F$Pe).pos(80*F$o,5),F$R._txt.color="#ffffff",F$a.addChild(F$R._txt),F$R._sp=F$a),F$a.pos(F$e,F$F);for(var F$E="",F$s=0;F$s<F$R._view.length;F$s++){F$E+=F$R._view[F$s].title+"\n"}F$R._leftText.text=F$E;var F$Y=170*F$o,F$_=F$o*(12*F$R._view.length+3*F$o)+4;F$R._txt.fontSize=F$R._fontSize*F$o,F$R._leftText.fontSize=F$R._fontSize*F$o,F$a.size(F$Y,F$_),F$a.graphics.clear(),F$a.graphics.setAlpha(.5),F$a.graphics.drawRect(0,0,F$Y,F$_,"#999999"),F$a.graphics.setAlpha(1),F$R.loop()},F$R.enable=function(){F$b.timer.frameLoop(1,F$R,F$R.loop)},F$R.hide=function(){F$R._show=!1,F$b.timer.clear(F$R,F$R.loop),F$R._canvas&&F$k.removeElement(F$R._canvas.source)},F$R.clear=function(){F$R.trianglesFaces=F$R.drawCall=F$R.shaderCall=F$R.spriteCount=F$R.spriteRenderUseCacheCount=F$R.treeNodeCollision=F$R.treeSpriteCollision=F$R.canvasNormal=F$R.canvasBitmap=F$R.canvasReCache=0},F$R.loop=function(){F$R._count++;var F$e=F$k.now();if(!(F$e-F$R._timer<1e3)){var F$F=F$R._count;if(F$R.FPS=Math.round(1e3*F$F/(F$e-F$R._timer)),F$R._show){F$R.trianglesFaces=Math.round(F$R.trianglesFaces/F$F),F$R.spriteCount=F$R._useCanvas?(F$R.drawCall=Math.round(F$R.drawCall/F$F)-2,F$R.shaderCall=Math.round(F$R.shaderCall/F$F),Math.round(F$R.spriteCount/F$F)-1):(F$R.drawCall=Math.round(F$R.drawCall/F$F)-2,F$R.shaderCall=Math.round(F$R.shaderCall/F$F)-4,Math.round(F$R.spriteCount/F$F)-4),F$R.spriteRenderUseCacheCount=Math.round(F$R.spriteRenderUseCacheCount/F$F),F$R.canvasNormal=Math.round(F$R.canvasNormal/F$F),F$R.canvasBitmap=Math.round(F$R.canvasBitmap/F$F),F$R.canvasReCache=Math.ceil(F$R.canvasReCache/F$F),F$R.treeNodeCollision=Math.round(F$R.treeNodeCollision/F$F),F$R.treeSpriteCollision=Math.round(F$R.treeSpriteCollision/F$F);var F$a=0<F$R.FPS?Math.floor(1e3/F$R.FPS).toString():" ";F$R._fpsStr=F$R.FPS+(F$R.renderSlow?" slow":"")+" "+F$a,F$R._spriteStr=F$R.spriteCount+(F$R.spriteRenderUseCacheCount?"/"+F$R.spriteRenderUseCacheCount:""),F$R._canvasStr=F$R.canvasReCache+"/"+F$R.canvasNormal+"/"+F$R.canvasBitmap,F$R.currentMemorySize=F$J.systemResourceManager.memorySize,F$R._useCanvas?F$R.renderInfoPre():F$R.renderInfo(),F$R.clear()}F$R._count=0,F$R._timer=F$e}},F$R.renderInfoPre=function(){if(F$R._canvas){var F$e=F$R._ctx;F$e.clearRect(F$R._first?0:F$R._vx,0,F$R._width,F$R._height);for(var F$F=F$Z.WebGL.mainContext,F$a=0;F$a<F$R._view.length;F$a++){var F$o=F$R._view[F$a];F$R._first&&(F$e.fillStyle="white",F$e.fillText(F$o.title,F$o.x,F$o.y,null,null,null)),F$e.fillStyle=F$o.color;var F$E=-1;if((F$o=F$R._view[F$a]).varying){if(F$F)switch(F$o.varying){case 1:F$E=F$F.getParameter(F$F[F$o.value]);break;case 2:F$E=F$F.getExtension(F$o.value)}}else F$E=F$R[F$o.value];"M"==F$o.units&&(F$E=Math.floor(F$E/1048576*100)/100+" M"),"K"==F$o.units&&(F$E=Math.floor(F$E/1024*100)/100+" K"),"string"==F$o.units&&(F$E=F$E.match(/\d+\.?\d/i)),F$e.fillText(F$E+"",F$o.x+F$R._vx,F$o.y,null,null,null)}}},F$R.renderInfo=function(){for(var F$e="",F$F=F$Z.WebGL.mainContext,F$a=0;F$a<F$R._view.length;F$a++){var F$o=F$R._view[F$a],F$E=-1;if(F$o.varying){if(F$F)switch(F$o.varying){case 1:F$E=F$F.getParameter(F$F[F$o.value]);break;case 2:F$E=F$F.getExtension(F$o.value)}}else F$E=F$R[F$o.value];"M"==F$o.units&&(F$E=Math.floor(F$E/1048576*100)/100+" M"),"K"==F$o.units&&(F$E=Math.floor(F$E/1024*100)/100+" K"),"string"==F$o.units&&(F$E=F$E.match(/\d+\.?\d/i)),F$e+=F$E+"\n"}F$R._txt.text=F$e},F$R.FPS=0,F$R.loopCount=0,F$R.shaderCall=0,F$R.drawCall=0,F$R.trianglesFaces=0,F$R.spriteCount=0,F$R.spriteRenderUseCacheCount=0,F$R.treeNodeCollision=0,F$R.treeSpriteCollision=0,F$R.canvasNormal=0,F$R.canvasBitmap=0,F$R.canvasReCache=0,F$R.renderSlow=!1,F$R.currentMemorySize=0,F$R._fpsStr=null,F$R._canvasStr=null,F$R._spriteStr=null,F$R._fpsData=[],F$R._timer=0,F$R._count=0,F$R._view=[],F$R._fontSize=12,F$R._txt=null,F$R._leftText=null,F$R._sp=null,F$R._show=!1,F$R._useCanvas=!1,F$R._canvas=null,F$R._ctx=null,F$R._first=!1,F$R._vx=NaN,F$R._width=0,F$R._height=100,F$R}(),F$f=(function(){function F$e(){this._strsToID={},this._idToStrs=[],this._length=0}F$g(F$e,"laya.utils.StringKey");var F$F=F$e.prototype;F$F.add=function(F$e){var F$F=this._strsToID[F$e];return null!=F$F?F$F:(this._idToStrs[this._length]=F$e,this._strsToID[F$e]=this._length++)},F$F.getID=function(F$e){var F$F=this._strsToID[F$e];return null==F$F?-1:F$F},F$F.getName=function(F$e){var F$F=this._idToStrs[F$e];return null==F$F?void 0:F$F}}(),function(){var F$H;function F$e(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}F$g(F$e,"laya.utils.Timer");var F$F=F$e.prototype;return F$F._init=function(){F$b.timer&&F$b.timer.frameLoop(1,this,this._update)},F$F._now=function(){return Date.now()},F$F._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var F$e=this.currFrame=this.currFrame+this.scale,F$F=this._now();this._delta=(F$F-this._lastTimer)*this.scale;var F$a=this.currTimer=this.currTimer+this._delta;F$b.isDebug&&6e4<Math.abs(F$F-this._lastTimer)&&console.error("系统时间错误！"+(F$F-this._lastTimer)),this._lastTimer=F$F;var F$o=this._handlers;for(F$Y=this._count=0,F$_=F$o.length;F$Y<F$_;F$Y++)if(null!==(F$R=F$o[F$Y]).method){var F$E=F$R.userFrame?F$e:F$a;if(F$E>=F$R.exeTime)if(F$R.repeat)if(F$R.jumpFrame)for(;F$E>=F$R.exeTime;)F$R.exeTime+=F$R.delay,F$R.run(!1);else F$R.exeTime+=F$R.delay,F$R.run(!1),F$E>F$R.exeTime&&(F$R.exeTime+=Math.ceil((F$E-F$R.exeTime)/F$R.delay)*F$R.delay);else F$R.run(!0)}else this._count++;(30<this._count||F$e%200==0)&&this._clearHandlers();for(var F$s=this._laters,F$Y=0,F$_=F$s.length-1;F$Y<=F$_;F$Y++){var F$R=F$s[F$Y];this._isIgnoreRecover(F$R)||(null!==F$R.method&&(delete this._map[F$R.key],F$R.run(!1)),this._recoverHandler(F$R)),F$Y===F$_&&(F$_=F$s.length-1)}F$s.length=0}},F$F._clearHandlers=function(){for(var F$e=this._handlers,F$F=0,F$a=F$e.length;F$F<F$a;F$F++){var F$o=F$e[F$F];null!==F$o.method?this._temp.push(F$o):this._isIgnoreRecover(F$o)?this._temp.push(F$o):this._recoverHandler(F$o)}this._handlers=this._temp,this._temp=F$e,this._temp.length=0},F$F._recoverHandler=function(F$e){this._map[F$e.key]==F$e&&delete this._map[F$e.key],F$e.recover()},F$F._create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){if(!F$a)return F$E.apply(F$o,F$s),null;if(F$Y){var F$R=this._getHandler(F$o,F$E);if(F$R)return F$R.repeat=F$F,F$R.userFrame=F$e,F$R.delay=F$a,F$R.ignoreRecover=F$_,F$R.caller=F$o,F$R.method=F$E,F$R.args=F$s,F$R.exeTime=F$a+(F$e?this.currFrame:this.currTimer+this._now()-this._lastTimer),F$R}return(F$R=F$H.create()).repeat=F$F,F$R.userFrame=F$e,F$R.delay=F$a,F$R.ignoreRecover=F$_,F$R.caller=F$o,F$R.method=F$E,F$R.args=F$s,F$R.exeTime=F$a+(F$e?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(F$R),this._handlers.push(F$R),F$R},F$F._indexHandler=function(F$e){var F$F=F$e.caller,F$a=F$e.method,F$o=F$F?F$F.$_GID||(F$F.$_GID=F$Q.getGID()):0,F$E=F$a.$_TID||(F$a.$_TID=this._mid++);F$e.key=F$o+"_"+F$E,this._map[F$e.key]=F$e},F$F.once=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=!0),this._create(!1,!1,F$e,F$F,F$a,F$o,F$E,!1)},F$F.loop=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){void 0===F$E&&(F$E=!0),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!1);var F$_=this._create(!1,!0,F$e,F$F,F$a,F$o,F$E,F$Y);F$_&&(F$_.jumpFrame=F$s)},F$F.frameOnce=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=!0),this._create(!0,!1,F$e,F$F,F$a,F$o,F$E,!1)},F$F.frameLoop=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$E&&(F$E=!0),void 0===F$s&&(F$s=!1),this._create(!0,!0,F$e,F$F,F$a,F$o,F$E,F$s)},F$F.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+F$H._freeCount},F$F.clear=function(F$e,F$F){var F$a=this._getHandler(F$e,F$F);return!(!F$a||this._isIgnoreRecover(F$a))&&(delete this._map[F$a.key],F$a.key=null,F$a.clear(),!0)},F$F.clearAll=function(F$e){if(F$e)for(var F$F=0,F$a=this._handlers.length;F$F<F$a;F$F++){var F$o=this._handlers[F$F];F$o.caller===F$e&&(this._isIgnoreRecover(F$o)||(delete this._map[F$o.key],F$o.key=null,F$o.clear()))}},F$F._getHandler=function(F$e,F$F){var F$a=F$e?F$e.$_GID||(F$e.$_GID=F$Q.getGID()):0,F$o=F$F.$_TID||(F$F.$_TID=this._mid++);return this._map[F$a+"_"+F$o]},F$F._isIgnoreRecover=function(F$e){if(F$e.ignoreRecover||F$e.caller&&"IgnoreRecover"==F$e.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var F$F="";try{arguments.propertyIsEnumerable.caller}catch(F$e){F$F=F$e.stack}F$b.recordError("报错：核心定时器销毁忽略  "+F$F)}return!0}return!1},F$F.hasHandler=function(F$e,F$F){return this._map[F$e.$_GID+"_"+F$F.$_TID]},F$F.callLater=function(F$e,F$F,F$a){if(null==this._getHandler(F$e,F$F)){var F$o=F$H.create();F$o.caller=F$e,F$o.method=F$F,F$o.args=F$a,this._indexHandler(F$o),this._laters.push(F$o)}},F$F.runCallLater=function(F$e,F$F){var F$a=this._getHandler(F$e,F$F);F$a&&null!=F$a.method&&(this._isIgnoreRecover(F$a)||(delete this._map[F$a.key],F$a.run(!0)))},F$F.runTimer=function(F$e,F$F){this.runCallLater(F$e,F$F)},F$I(0,F$F,"delta",function(){return this._delta}),F$e.__init$=function(){F$H=function(){function F$F(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}F$g(F$F,"");var F$e=F$F.prototype;return F$e.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},F$e.recover=function(){this.clear(),this.args=F$F._freeHandler,F$F._freeHandler=this,F$F._freeCount++},F$e.run=function(F$e){var F$F=this.caller;if(F$F&&F$F.destroyed)return this.clear();var F$a=this.method,F$o=this.args;F$e&&this.clear(),null!=F$a&&(F$o?F$a.apply(F$F,F$o):F$a.call(F$F))},F$F._freeHandler=null,F$F._freeCount=0,F$F.create=function(){var F$e=F$F._freeHandler;return F$e?(F$F._freeHandler=F$e.args,--F$F._freeCount,F$e.args=null,F$e):new F$F},F$F}()},F$e}()),F$i=function(){function F$n(){this.gid=0}F$g(F$n,"laya.utils.Tween");var F$e=F$n.prototype;return F$e.to=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){return void 0===F$s&&(F$s=0),void 0===F$Y&&(F$Y=!1),this._create(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,!0,!1,!0)},F$e.from=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){return void 0===F$s&&(F$s=0),void 0===F$Y&&(F$Y=!1),this._create(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,!1,!1,!0)},F$e._create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){if(!F$e)throw new Error("Tween:target is null");this._target=F$e,this._duration=F$a,this._ease=F$o||F$F.ease||F$n.easeNone,this._complete=F$E||F$F.complete,this._delay=F$s,this._props=[],this._usedTimer=0,this._startTimer=F$k.now(),this._usedPool=F$R,this._delayParam=null,this.update=F$F.update;var F$g=F$e.$_GID||(F$e.$_GID=F$Q.getGID());return F$n.tweenMap[F$g]?(F$Y&&F$n.clearTween(F$e),F$n.tweenMap[F$g].push(this)):F$n.tweenMap[F$g]=[this],F$H?F$s<=0?this.firstStart(F$e,F$F,F$_):(this._delayParam=[F$e,F$F,F$_],F$b.scaleTimer.once(F$s,this,this.firstStart,this._delayParam)):this._initProps(F$e,F$F,F$_),this},F$e.firstStart=function(F$e,F$F,F$a){this._delayParam=null,F$e.destroyed?this.clear():(this._initProps(F$e,F$F,F$a),this._beginLoop())},F$e._initProps=function(F$e,F$F,F$a){for(var F$o in F$F)if("number"==typeof F$e[F$o]){var F$E=F$a?F$e[F$o]:F$F[F$o],F$s=F$a?F$F[F$o]:F$e[F$o];this._props.push([F$o,F$E,F$s-F$E]),F$a||(F$e[F$o]=F$E)}},F$e._beginLoop=function(){F$b.scaleTimer.frameLoop(1,this,this._doEase)},F$e._doEase=function(){this._updateEase(F$k.now())},F$e._updateEase=function(F$e){var F$F=this._target;if(F$F){if(F$F.destroyed)return F$n.clearTween(F$F);var F$a=this._usedTimer=F$e-this._startTimer-this._delay;if(!(F$a<0)){if(F$a>=this._duration)return this.complete();for(var F$o=0<F$a?this._ease(F$a,0,1,this._duration):0,F$E=this._props,F$s=0,F$Y=F$E.length;F$s<F$Y;F$s++){var F$_=F$E[F$s];F$F[F$_[0]]=F$_[1]+F$o*F$_[2]}this.update&&this.update.run()}}},F$e.complete=function(){if(this._target){F$b.scaleTimer.runTimer(this,this.firstStart);for(var F$e=this._target,F$F=this._props,F$a=this._complete,F$o=0,F$E=F$F.length;F$o<F$E;F$o++){var F$s=F$F[F$o];F$e[F$s[0]]=F$s[1]+F$s[2]}this.update&&this.update.run(),this.clear(),F$a&&F$a.run()}},F$e.pause=function(){F$b.scaleTimer.clear(this,this._beginLoop),F$b.scaleTimer.clear(this,this._doEase),F$b.scaleTimer.clear(this,this.firstStart);var F$e;(F$e=F$k.now()-this._startTimer-this._delay)<0&&(this._usedTimer=F$e)},F$e.setStartTime=function(F$e){this._startTimer=F$e},F$e.clear=function(){this._target&&(this._remove(),this._clear())},F$e._clear=function(){this.pause(),F$b.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,F$X.recover("tween",this))},F$e.recover=function(){this._usedPool=!0,this._clear()},F$e._remove=function(){var F$e=F$n.tweenMap[this._target.$_GID];if(F$e)for(var F$F=0,F$a=F$e.length;F$F<F$a;F$F++)if(F$e[F$F]===this){F$e.splice(F$F,1);break}},F$e.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=F$k.now(),this._delayParam)F$b.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var F$e=this._props,F$F=0,F$a=F$e.length;F$F<F$a;F$F++){var F$o=F$e[F$F];this._target[F$o[0]]=F$o[1]}F$b.scaleTimer.once(this._delay,this,this._beginLoop)}},F$e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=F$k.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?F$b.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},F$I(0,F$e,"progress",null,function(F$e){var F$F=F$e*this._duration;this._startTimer=F$k.now()-this._delay-F$F}),F$n.to=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){return void 0===F$s&&(F$s=0),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=!0),F$X.getItemByClass("tween",F$n)._create(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,!0,F$_,!0)},F$n.from=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){return void 0===F$s&&(F$s=0),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=!0),F$X.getItemByClass("tween",F$n)._create(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,!1,F$_,!0)},F$n.clearAll=function(F$e){if(F$e&&F$e.$_GID){var F$F=F$n.tweenMap[F$e.$_GID];if(F$F){for(var F$a=0,F$o=F$F.length;F$a<F$o;F$a++)F$F[F$a]._clear();F$F.length=0}}},F$n.clear=function(F$e){F$e.clear()},F$n.clearTween=function(F$e){F$n.clearAll(F$e)},F$n.easeNone=function(F$e,F$F,F$a,F$o){return F$a*F$e/F$o+F$F},F$n.tweenMap={},F$n}(),F$Q=function(){function F$_(){}return F$g(F$_,"laya.utils.Utils"),F$_.toRadian=function(F$e){return F$e*F$_._pi2},F$_.toAngle=function(F$e){return F$e*F$_._pi},F$_.toHexColor=function(F$e){if(F$e<0||isNaN(F$e))return null;for(var F$F=F$e.toString(16);F$F.length<6;)F$F="0"+F$F;return"#"+F$F},F$_.getGID=function(){return F$_._gid++},F$_.concatArray=function(F$e,F$F){if(!F$F)return F$e;if(!F$e)return F$F;var F$a=0,F$o=F$F.length;for(F$a=0;F$a<F$o;F$a++)F$e.push(F$F[F$a]);return F$e},F$_.clearArray=function(F$e){return F$e&&(F$e.length=0),F$e},F$_.copyArray=function(F$e,F$F){if(F$e||(F$e=[]),!F$F)return F$e;F$e.length=F$F.length;var F$a=0,F$o=F$F.length;for(F$a=0;F$a<F$o;F$a++)F$e[F$a]=F$F[F$a];return F$e},F$_.getGlobalRecByPoints=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y;return F$s=new F$L(F$F,F$a),F$s=F$e.localToGlobal(F$s),F$Y=new F$L(F$o,F$E),F$Y=F$e.localToGlobal(F$Y),F$B._getWrapRec([F$s.x,F$s.y,F$Y.x,F$Y.y])},F$_.getGlobalPosAndScale=function(F$e){return F$_.getGlobalRecByPoints(F$e,0,0,1,1)},F$_.bind=function(F$e,F$F){return F$e.bind(F$F)},F$_.measureText=function(F$e,F$F){return F$G.measureText(F$e,F$F)},F$_.contextMeasureText=function(F$e){var F$F=F$k.context.measureText(F$e);return F$F||(F$F={width:16,height:16}),F$F},F$_.updateOrder=function(F$e){if(!F$e||F$e.length<2)return!1;for(var F$F,F$a=1,F$o=0,F$E=F$e.length,F$s=NaN;F$a<F$E;){for(F$F=F$e[F$o=F$a],F$s=F$e[F$o]._zOrder;-1<--F$o&&F$e[F$o]._zOrder>F$s;)F$e[F$o+1]=F$e[F$o];F$e[F$o+1]=F$F,F$a++}var F$Y=F$F.parent.conchModel;if(F$Y)if(null!=F$Y.updateZOrder)F$Y.updateZOrder();else{for(F$a=0;F$a<F$E;F$a++)F$Y.removeChild(F$e[F$a].conchModel);for(F$a=0;F$a<F$E;F$a++)F$Y.addChildAt(F$e[F$a].conchModel,F$a)}return!0},F$_.transPointList=function(F$e,F$F,F$a){var F$o=0,F$E=F$e.length;for(F$o=0;F$o<F$E;F$o+=2)F$e[F$o]+=F$F,F$e[F$o+1]+=F$a},F$_.parseInt=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a=F$k.window.parseInt(F$e,F$F);return isNaN(F$a)?0:F$a},F$_.getFileExtension=function(F$e){F$_._extReg.lastIndex=F$e.lastIndexOf(".");var F$F=F$_._extReg.exec(F$e);return F$F&&1<F$F.length?F$F[1].toLowerCase():null},F$_.getTransformRelativeToWindow=function(F$e,F$F,F$a){var F$o=F$b.stage,F$E=laya.utils.Utils.getGlobalPosAndScale(F$e),F$s=F$o._canvasTransform.clone(),F$Y=F$s.tx,F$_=F$s.ty;F$s.rotate(-Math.PI/180*F$b.stage.canvasDegree),F$s.scale(F$b.stage.clientScaleX,F$b.stage.clientScaleY);var F$R=F$b.stage.canvasDegree%180!=0,F$H=NaN,F$g=NaN;F$R?(F$H=F$a+F$E.y,F$g=F$F+F$E.x,F$H*=F$s.d,F$g*=F$s.a,90==F$b.stage.canvasDegree?(F$H=F$Y-F$H,F$g+=F$_):(F$H+=F$Y,F$g=F$_-F$g)):(F$H=F$F+F$E.x,F$g=F$a+F$E.y,F$H*=F$s.a,F$g*=F$s.d,F$H+=F$Y,F$g+=F$_);var F$n=NaN,F$O=NaN;return F$O=F$R?(F$n=F$s.d*F$E.height,F$s.a*F$E.width):(F$n=F$s.a*F$E.width,F$s.d*F$E.height),{x:F$H,y:F$g,scaleX:F$n,scaleY:F$O}},F$_.fitDOMElementInArea=function(F$e,F$F,F$a,F$o,F$E,F$s){F$e._fitLayaAirInitialized||(F$e._fitLayaAirInitialized=!0,F$e.style.transformOrigin=F$e.style.webKittransformOrigin="left top",F$e.style.position="absolute");var F$Y=F$_.getTransformRelativeToWindow(F$F,F$a,F$o);F$e.style.transform=F$e.style.webkitTransform="scale("+F$Y.scaleX+","+F$Y.scaleY+") rotate("+F$b.stage.canvasDegree+"deg)",F$e.style.width=F$E+"px",F$e.style.height=F$s+"px",F$e.style.left=F$Y.x+"px",F$e.style.top=F$Y.y+"px"},F$_.isOkTextureList=function(F$e){if(!F$e)return!1;var F$F,F$a=0,F$o=F$e.length;for(F$a=0;F$a<F$o;F$a++)if(!(F$F=F$e[F$a])||!F$F.source)return!1;return!0},F$_.isOKCmdList=function(F$e){if(!F$e)return!1;var F$F,F$a,F$o=0,F$E=F$e.length,F$s=F$Z._context;for(F$o=0;F$o<F$E;F$o++)switch((F$F=F$e[F$o]).callee){case F$s._drawTexture:case F$s._fillTexture:case F$s._drawTextureWithTransform:if(!(F$a=F$F[0])||!F$a.source)return!1}return!0},F$_._gid=1,F$_._pi=180/Math.PI,F$_._pi2=Math.PI/180,F$_._extReg=/\.(\w+)\??/g,F$_.parseXMLFromString=function(F$e){var F$F;if(F$e=F$e.replace(/>\s+</g,"><"),-1<(F$F=(new DOMParser).parseFromString(F$e,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(F$F.firstChild.firstChild.textContent);return F$F},F$_}(),F$t=function(){function F$e(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],F$Z.isWebGL&&F$w.regCacheByFunction(F$Q.bind(this.startDispose,this),F$Q.bind(this.getCacheList,this))}F$g(F$e,"laya.utils.VectorGraphManager");var F$F=F$e.prototype;return F$F.getId=function(){return this._id++},F$F.addShape=function(F$e,F$F){this.shapeDic[F$e]=F$F,this.useDic[F$e]||(this.useDic[F$e]=!0)},F$F.addLine=function(F$e,F$F){this.shapeLineDic[F$e]=F$F,this.shapeLineDic[F$e]||(this.shapeLineDic[F$e]=!0)},F$F.getShape=function(F$e){this._checkKey&&null!=this.useDic[F$e]&&(this.useDic[F$e]=!0)},F$F.deleteShape=function(F$e){this.shapeDic[F$e]&&(this.shapeDic[F$e]=null,delete this.shapeDic[F$e]),this.shapeLineDic[F$e]&&(this.shapeLineDic[F$e]=null,delete this.shapeLineDic[F$e]),null!=this.useDic[F$e]&&delete this.useDic[F$e]},F$F.getCacheList=function(){var F$e,F$F=[];for(F$e in this.shapeDic)F$F.push(this.shapeDic[F$e]);for(F$e in this.shapeLineDic)F$F.push(this.shapeLineDic[F$e]);return F$F},F$F.startDispose=function(F$e){var F$F;for(F$F in this.useDic)this.useDic[F$F]=!1;this._checkKey=!0},F$F.endDispose=function(){if(this._checkKey){var F$e;for(F$e in this.useDic)this.useDic[F$e]||this.deleteShape(F$e);this._checkKey=!1}},F$e.getInstance=function(){return F$e.instance=F$e.instance||new F$e},F$e.instance=null,F$e}(),F$c=function(){function F$o(){this._obj=null,this._obj=F$o.supportWeakMap?new F$k.window.WeakMap:{},F$o.supportWeakMap||F$o._maps.push(this)}F$g(F$o,"laya.utils.WeakObject");var F$e=F$o.prototype;return F$e.set=function(F$e,F$F){if(null!=F$e)if(F$o.supportWeakMap){var F$a=F$e;"string"!=typeof F$e&&"number"!=typeof F$e||(F$a=F$o._keys[F$e])||(F$a=F$o._keys[F$e]={k:F$e}),this._obj.set(F$a,F$F)}else"string"==typeof F$e||"number"==typeof F$e?this._obj[F$e]=F$F:(F$e.$_GID||(F$e.$_GID=F$Q.getGID()),this._obj[F$e.$_GID]=F$F)},F$e.get=function(F$e){if(null==F$e)return null;if(F$o.supportWeakMap){var F$F="string"==typeof F$e||"number"==typeof F$e?F$o._keys[F$e]:F$e;return F$F?this._obj.get(F$F):null}return"string"==typeof F$e||"number"==typeof F$e?this._obj[F$e]:this._obj[F$e.$_GID]},F$e.del=function(F$e){if(null!=F$e)if(F$o.supportWeakMap){var F$F="string"==typeof F$e||"number"==typeof F$e?F$o._keys[F$e]:F$e;if(!F$F)return;this._obj.delete(F$F)}else"string"==typeof F$e||"number"==typeof F$e?delete this._obj[F$e]:delete this._obj[this._obj.$_GID]},F$e.has=function(F$e){if(null==F$e)return!1;if(F$o.supportWeakMap){var F$F="string"==typeof F$e||"number"==typeof F$e?F$o._keys[F$e]:F$e;return this._obj.has(F$F)}return"string"==typeof F$e||"number"==typeof F$e?null!=this._obj[F$e]:null!=this._obj[this._obj.$_GID]},F$o.__init__=function(){(F$o.supportWeakMap=null!=F$k.window.WeakMap)||F$b.timer.loop(F$o.delInterval,null,F$o.clearCache)},F$o.clearCache=function(){for(var F$e=0,F$F=F$o._maps.length;F$e<F$F;F$e++){F$o._maps[F$e]._obj={}}},F$o.supportWeakMap=!1,F$o.delInterval=3e5,F$o._keys={},F$o._maps=[],F$R(F$o,["I",function(){return this.I=new F$o}]),F$o}(),F$h=function(){function F$e(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}F$g(F$e,"laya.utils.WordText");var F$F=F$e.prototype;return F$F.setText=function(F$e){this.changed=!0,this._text=F$e},F$F.toString=function(){return this._text},F$F.charCodeAt=function(F$e){return this._text?this._text.charCodeAt(F$e):NaN},F$F.charAt=function(F$e){return this._text?this._text.charAt(F$e):null},F$I(0,F$F,"length",function(){return this._text?this._text.length:0}),F$e}(),F$ee=function(F$e){function F$Y(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,F$Y.__super.call(this),this._childs=F$Y.ARRAY_EMPTY,this._$P=F$Y.PROP_EMPTY,this.timer=F$b.scaleTimer,this.conchModel=F$Z.isConchNode?this.createConchModel():null}F$g(F$Y,"laya.display.Node",F$H);var F$F=F$Y.prototype;return F$F._setBit=function(F$e,F$F){1==F$e&&(this._getBit(F$e)!=F$F&&this._updateDisplayedInstage());F$F?this._bits|=F$e:this._bits&=~F$e},F$F._getBit=function(F$e){return 0!=(this._bits&F$e)},F$F._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},F$F._setUpNoticeType=function(F$e){var F$F=this;for(F$F._setBit(F$e,!0),F$F=F$F.parent;F$F;){if(F$F._getBit(F$e))return;F$F._setBit(F$e,!0),F$F=F$F.parent}},F$F.on=function(F$e,F$F,F$a,F$o){return"display"!==F$e&&"undisplay"!==F$e||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$e,F$F,F$a,F$o,!1)},F$F.once=function(F$e,F$F,F$a,F$o){return"display"!==F$e&&"undisplay"!==F$e||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$e,F$F,F$a,F$o,!0)},F$F.createConchModel=function(){return null},F$F.destroy=function(F$e){void 0===F$e&&(F$e=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(F$e?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},F$F.destroyChildren=function(){if(this._childs)for(var F$e=this._childs.length-1;-1<F$e;F$e--)this._childs[F$e].destroy(!0)},F$F.addChild=function(F$e){if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),F$e._parent===this){var F$F=this.getChildIndex(F$e);F$F!==this._childs.length-1&&(this._childs.splice(F$F,1),this._childs.push(F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1)),this._childChanged())}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$Y.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1),(F$e.parent=this)._childChanged();return F$e},F$F.addChildren=function(F$e){for(var F$F=arguments,F$a=0,F$o=F$F.length;F$a<F$o;)this.addChild(F$F[F$a++])},F$F.addChildAt=function(F$e,F$F){if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),0<=F$F&&F$F<=this._childs.length){if(F$e._parent===this){var F$a=this.getChildIndex(F$e);this._childs.splice(F$a,1),this._childs.splice(F$F,0,F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,F$F)),this._childChanged()}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$Y.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$F,0,F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,F$F),F$e.parent=this;return F$e}throw new Error("appendChildAt:The index is out of bounds")},F$F.getChildIndex=function(F$e){return this._childs.indexOf(F$e)},F$F.getChildByName=function(F$e){var F$F=this._childs;if(F$F)for(var F$a=0,F$o=F$F.length;F$a<F$o;F$a++){var F$E=F$F[F$a];if(F$E.name===F$e)return F$E}return null},F$F._get$P=function(F$e){return this._$P[F$e]},F$F._set$P=function(F$e,F$F){return this.destroyed||(this._$P===F$Y.PROP_EMPTY&&(this._$P={}),this._$P[F$e]=F$F),F$F},F$F.getChildAt=function(F$e){return this._childs[F$e]},F$F.setChildIndex=function(F$e,F$F){var F$a=this._childs;if(F$F<0||F$F>=F$a.length)throw new Error("setChildIndex:The index is out of bounds.");var F$o=this.getChildIndex(F$e);if(F$o<0)throw new Error("setChildIndex:node is must child of this object.");return F$a.splice(F$o,1),F$a.splice(F$F,0,F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,F$F)),this._childChanged(),F$e},F$F._childChanged=function(F$e){},F$F.removeChild=function(F$e){if(!this._childs)return F$e;var F$F=this._childs.indexOf(F$e);return this.removeChildAt(F$F)},F$F.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},F$F.removeChildByName=function(F$e){var F$F=this.getChildByName(F$e);return F$F&&this.removeChild(F$F),F$F},F$F.removeChildAt=function(F$e){var F$F=this.getChildAt(F$e);if(F$F){for(var F$a=this._childs.length-1,F$o=F$e;F$o<F$a;++F$o)this._childs[F$o]=this._childs[F$o+1];this._childs.length=F$a,this.conchModel&&this.conchModel.removeChild(F$F.conchModel),F$F.parent=null}return F$F},F$F.removeChildren=function(F$e,F$F){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=2147483647),this._childs&&0<this._childs.length){var F$a=this._childs;if(0===F$e&&F$s<=F$F){var F$o=F$a;this._childs=F$Y.ARRAY_EMPTY}else F$o=F$a.splice(F$e,F$F-F$e);for(var F$E=0,F$s=F$o.length;F$E<F$s;F$E++)F$o[F$E].parent=null,this.conchModel&&this.conchModel.removeChild(F$o[F$E].conchModel)}return this},F$F.replaceChild=function(F$e,F$F){var F$a=this._childs.indexOf(F$F);return-1<F$a?(this._childs.splice(F$a,1,F$e),this.conchModel&&(this.conchModel.removeChild(F$F.conchModel),this.conchModel.addChildAt(F$e.conchModel,F$a)),F$F.parent=null,F$e.parent=this,F$e):null},F$F._updateDisplayedInstage=function(){var F$e;F$e=this;var F$F=F$b.stage;for(this._displayedInStage=!1;F$e;){if(F$e._getBit(1)){this._displayedInStage=F$e._displayedInStage;break}if(F$e==F$F||F$e._displayedInStage){this._displayedInStage=!0;break}F$e=F$e.parent}},F$F._setDisplay=function(F$e){this._displayedInStage!==F$e&&((this._displayedInStage=F$e)?this.event("display"):this.event("undisplay"))},F$F._displayChild=function(F$e,F$F){var F$a=F$e._childs;if(F$a)for(var F$o=0;F$o<F$a.length;F$o++){var F$E=F$a[F$o];F$E&&F$E._getBit(1)&&(0<F$E._childs.length?this._displayChild(F$E,F$F):F$E._setDisplay(F$F))}F$e._setDisplay(F$F)},F$F.contains=function(F$e){if(F$e===this)return!0;for(;F$e;){if(F$e.parent===this)return!0;F$e=F$e.parent}return!1},F$F.timerLoop=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$E&&(F$E=!0),void 0===F$s&&(F$s=!1),this.timer.loop(F$e,F$F,F$a,F$o,F$E,F$s)},F$F.timerOnce=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=!0),this.timer._create(!1,!1,F$e,F$F,F$a,F$o,F$E)},F$F.frameLoop=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=!0),this.timer._create(!0,!0,F$e,F$F,F$a,F$o,F$E)},F$F.frameOnce=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=!0),this.timer._create(!0,!1,F$e,F$F,F$a,F$o,F$E)},F$F.clearTimer=function(F$e,F$F){this.timer.clear(F$e,F$F)},F$I(0,F$F,"numChildren",function(){return this._childs.length}),F$I(0,F$F,"destroyed",function(){return this._destroyed}),F$I(0,F$F,"parent",function(){return this._parent},function(F$e){this._parent!==F$e&&(F$e?(this._parent=F$e,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),F$e.displayedInStage&&this._displayChild(this,!0)),F$e._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=F$e))}),F$I(0,F$F,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),F$Y.ARRAY_EMPTY=[],F$Y.PROP_EMPTY={},F$Y.NOTICE_DISPLAY=1,F$Y.MOUSEENABLE=2,F$Y}(),F$Fe=function(F$e){function F$O(F$e){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,F$O.__super.call(this),this._padding=F$O._PADDING,this._spacing=F$O._SPACING,this._aligns=F$O._ALIGNS,this._font=F$q.EMPTY,this._ower=F$e}F$g(F$O,"laya.display.css.CSSStyle",F$e);var F$F=F$O.prototype;return F$F.destroy=function(){this._ower=null,this._font=null,this._rect=null},F$F.inherit=function(F$e){this._font=F$e._font,this._spacing=F$e._spacing===F$O._SPACING?F$O._SPACING:F$e._spacing.slice(),this.lineHeight=F$e.lineHeight},F$F._widthAuto=function(){return 0!=(262144&this._type)},F$F.widthed=function(F$e){return 0!=(8&this._type)},F$F._calculation=function(F$e,F$F){if(F$F.indexOf("%")<0)return!1;var F$o=this._ower,F$E=F$o.parent,F$s=this._rect;function F$Y(F$e,F$F,F$a){return F$e*F$a[0]+F$F*F$a[1]+F$a[2]}function F$a(F$e){var F$F=F$E.width,F$a=F$o.width;F$s.width&&(F$o.width=F$Y(F$F,F$a,F$s.width)),F$s.height&&(F$o.height=F$Y(F$F,F$a,F$s.height)),F$s.left&&(F$o.x=F$Y(F$F,F$a,F$s.left)),F$s.top&&(F$o.y=F$Y(F$F,F$a,F$s.top))}null===F$s&&(F$E._getCSSStyle()._type|=524288,F$E.on("resize",this,F$a),this._rect=F$s={input:{}});var F$_=F$F.split(" ");return F$_[0]=parseFloat(F$_[0])/100,1==F$_.length?F$_[1]=F$_[2]=0:(F$_[1]=parseFloat(F$_[1])/100,F$_[2]=parseFloat(F$_[2])),F$s[F$e]=F$_,F$s.input[F$e]=F$F,F$a(),!0},F$F.heighted=function(F$e){return 0!=(8192&this._type)},F$F.size=function(F$e,F$F){var F$a=this._ower,F$o=!1;-1!==F$e&&F$e!=this._ower.width&&(this._type|=8,this._ower.width=F$e,F$o=!0),-1!==F$F&&F$F!=this._ower.height&&(this._type|=8192,this._ower.height=F$F,F$o=!0),F$o&&(F$a._layoutLater(),524288&this._type&&F$a.event("resize",this))},F$F._getAlign=function(){return this._aligns[0]},F$F._getValign=function(){return this._aligns[1]},F$F._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},F$F._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new F$q(this._font))},F$F.render=function(F$e,F$F,F$a,F$o){var F$E=F$e.width,F$s=F$e.height;F$a-=F$e.pivotX,F$o-=F$e.pivotY,this._bgground&&null!=this._bgground.color&&F$F.ctx.fillRect(F$a,F$o,F$E,F$s,this._bgground.color),this._border&&this._border.color&&F$F.drawRect(F$a,F$o,F$E,F$s,this._border.color.strColor,this._border.size)},F$F.getCSSStyle=function(){return this},F$F.cssText=function(F$e){this.attrs(F$O.parseOneCSS(F$e,";"))},F$F.attrs=function(F$e){if(F$e)for(var F$F=0,F$a=F$e.length;F$F<F$a;F$F++){var F$o=F$e[F$F];this[F$o[0]]=F$o[1]}},F$F.setTransform=function(F$e){"none"===F$e?this._tf=F$_._TF_EMPTY:this.attrs(F$O.parseOneCSS(F$e,","))},F$F.translate=function(F$e,F$F){this._tf===F$_._TF_EMPTY&&(this._tf=new F$E),this._tf.translateX=F$e,this._tf.translateY=F$F},F$F.scale=function(F$e,F$F){this._tf===F$_._TF_EMPTY&&(this._tf=new F$E),this._tf.scaleX=F$e,this._tf.scaleY=F$F},F$F._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},F$I(0,F$F,"block",F$e.prototype._$get_block,function(F$e){F$e?this._type|=1:this._type&=-2}),F$I(0,F$F,"valign",function(){return F$O._valigndef[this._aligns[1]]},function(F$e){this._aligns===F$O._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=F$O._valigndef[F$e]}),F$I(0,F$F,"height",null,function(F$e){if(this._type|=8192,"string"==typeof F$e){if(this._calculation("height",F$e))return;F$e=parseInt(F$e)}this.size(-1,F$e)}),F$I(0,F$F,"width",null,function(F$e){if(this._type|=8,"string"==typeof F$e){var F$F=F$e.indexOf("auto");if(0<=F$F&&(this._type|=262144,F$e=F$e.substr(0,F$F)),this._calculation("width",F$e))return;F$e=parseInt(F$e)}this.size(F$e,-1)}),F$I(0,F$F,"fontWeight",function(){return this._font.weight},function(F$e){this._createFont().weight=F$e}),F$I(0,F$F,"left",null,function(F$e){var F$F=this._ower;if("string"==typeof F$e){if("center"===F$e?F$e="50% -50% 0":"right"===F$e&&(F$e="100% -100% 0"),this._calculation("left",F$e))return;F$e=parseInt(F$e)}F$F.x=F$e}),F$I(0,F$F,"_translate",null,function(F$e){this.translate(F$e[0],F$e[1])}),F$I(0,F$F,"absolute",function(){return 0!=(4&this._type)}),F$I(0,F$F,"top",null,function(F$e){var F$F=this._ower;if("string"==typeof F$e){if("middle"===F$e?F$e="50% -50% 0":"bottom"===F$e&&(F$e="100% -100% 0"),this._calculation("top",F$e))return;F$e=parseInt(F$e)}F$F.y=F$e}),F$I(0,F$F,"align",function(){return F$O._aligndef[this._aligns[0]]},function(F$e){this._aligns===F$O._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=F$O._aligndef[F$e]}),F$I(0,F$F,"bold",function(){return this._font.bold},function(F$e){this._createFont().bold=F$e}),F$I(0,F$F,"padding",function(){return this._padding},function(F$e){this._padding=F$e}),F$I(0,F$F,"leading",function(){return this._spacing[1]},function(F$e){"string"==typeof F$e&&(F$e=parseInt(F$e+"")),this._spacing===F$O._SPACING&&(this._spacing=[0,0]),this._spacing[1]=F$e}),F$I(0,F$F,"lineElement",function(){return 0!=(65536&this._type)},function(F$e){F$e?this._type|=65536:this._type&=-65537}),F$I(0,F$F,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(F$e){this.lineElement=!1,"right"===F$e?this._type|=32768:this._type&=-32769}),F$I(0,F$F,"textDecoration",function(){return this._font.decoration},function(F$e){this._createFont().decoration=F$e}),F$I(0,F$F,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(F$e){"nowrap"===F$e&&(this._type|=131072),"none"===F$e&&(this._type&=-131073)}),F$I(0,F$F,"background",null,function(F$e){F$e?(this._bgground||(this._bgground={}),this._bgground.color=F$e,this._ower.conchModel&&this._ower.conchModel.bgColor(F$e),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),F$I(0,F$F,"wordWrap",function(){return 0==(131072&this._type)},function(F$e){F$e?this._type&=-131073:this._type|=131072}),F$I(0,F$F,"color",function(){return this._font.color},function(F$e){this._createFont().color=F$e}),F$I(0,F$F,"password",function(){return this._font.password},function(F$e){this._createFont().password=F$e}),F$I(0,F$F,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(F$e){"none"===F$e?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=F$e),this._ower.conchModel&&this._ower.conchModel.bgColor(F$e),this._ower._renderType|=256}),F$I(0,F$F,"font",function(){return this._font.toString()},function(F$e){this._createFont().set(F$e)}),F$I(0,F$F,"weight",null,function(F$e){this._createFont().weight=F$e}),F$I(0,F$F,"letterSpacing",function(){return this._spacing[0]},function(F$e){"string"==typeof F$e&&(F$e=parseInt(F$e+"")),this._spacing===F$O._SPACING&&(this._spacing=[0,0]),this._spacing[0]=F$e}),F$I(0,F$F,"fontSize",function(){return this._font.size},function(F$e){this._createFont().size=F$e}),F$I(0,F$F,"italic",function(){return this._font.italic},function(F$e){this._createFont().italic=F$e}),F$I(0,F$F,"fontFamily",function(){return this._font.family},function(F$e){this._createFont().family=F$e}),F$I(0,F$F,"stroke",function(){return this._font.stroke[0]},function(F$e){this._createFont().stroke===F$q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=F$e}),F$I(0,F$F,"strokeColor",function(){return this._font.stroke[1]},function(F$e){this._createFont().stroke===F$q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=F$e}),F$I(0,F$F,"border",function(){return this._border?this._border.value:""},function(F$e){if("none"!=F$e){this._border||(this._border={});var F$F=(this._border.value=F$e).split(" ");if(this._border.color=F$C.create(F$F[F$F.length-1]),1==F$F.length)return this._border.size=1,void(this._border.type="solid");var F$a=0;0<F$F[0].indexOf("px")?(this._border.size=parseInt(F$F[0]),F$a++):this._border.size=1,this._border.type=F$F[F$a],this._ower._renderType|=256}else this._border=null}),F$I(0,F$F,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(F$e){F$e?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==F$e?null:F$C.create(F$e),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),F$I(0,F$F,"position",function(){return 4&this._type?"absolute":""},function(F$e){"absolute"==F$e?this._type|=4:this._type&=-5}),F$I(0,F$F,"display",null,function(F$e){switch(F$e){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),F$I(0,F$F,"paddingLeft",function(){return this.padding[3]}),F$I(0,F$F,"paddingTop",function(){return this.padding[0]}),F$I(0,F$F,"_scale",null,function(F$e){this._ower.scale(F$e[0],F$e[1])}),F$I(0,F$F,"_rotate",null,function(F$e){this._ower.rotation=F$e}),F$O.parseOneCSS=function(F$e,F$F){for(var F$a,F$o=[],F$E=F$e.split(F$F),F$s=0,F$Y=F$E.length;F$s<F$Y;F$s++){var F$_=F$E[F$s],F$R=F$_.indexOf(":"),F$H=F$_.substr(0,F$R).replace(/^\s+|\s+$/g,"");if(0!=F$H.length){var F$g=F$_.substr(F$R+1).replace(/^\s+|\s+$/g,""),F$n=[F$H,F$g];switch(F$H){case"italic":case"bold":F$n[1]="true"==F$g;break;case"line-height":F$n[0]="lineHeight",F$n[1]=parseInt(F$g);break;case"font-size":F$n[0]="fontSize",F$n[1]=parseInt(F$g);break;case"padding":1<(F$a=F$g.split(" ")).length||(F$a[1]=F$a[2]=F$a[3]=F$a[0]),F$n[1]=[parseInt(F$a[0]),parseInt(F$a[1]),parseInt(F$a[2]),parseInt(F$a[3])];break;case"rotate":F$n[0]="_rotate",F$n[1]=parseFloat(F$g);break;case"scale":F$a=F$g.split(" "),F$n[0]="_scale",F$n[1]=[parseFloat(F$a[0]),parseFloat(F$a[1])];break;case"translate":F$a=F$g.split(" "),F$n[0]="_translate",F$n[1]=[parseInt(F$a[0]),parseInt(F$a[1])];break;default:(F$n[0]=F$O._CSSTOVALUE[F$H])||(F$n[0]=F$H)}F$o.push(F$n)}}return F$o},F$O.parseCSS=function(F$e,F$F){for(var F$a;null!=(F$a=F$O._parseCSSRegExp.exec(F$e));)F$O.styleSheets[F$a[1]]=F$O.parseOneCSS(F$a[2],";")},F$O.EMPTY=new F$O(null),F$O._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},F$O._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),F$O._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},F$O._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},F$O.styleSheets={},F$O.ALIGN_CENTER=1,F$O.ALIGN_RIGHT=2,F$O.VALIGN_MIDDLE=1,F$O.VALIGN_BOTTOM=2,F$O._CSS_BLOCK=1,F$O._DISPLAY_NONE=2,F$O._ABSOLUTE=4,F$O._WIDTH_SET=8,F$O._PADDING=[0,0,0,0],F$O._RECT=[-1,-1,-1,-1],F$O._SPACING=[0,0],F$O._ALIGNS=[0,0,0],F$O.ADDLAYOUTED=512,F$O._NEWFONT=4096,F$O._HEIGHT_SET=8192,F$O._BACKGROUND_SET=16384,F$O._FLOAT_RIGHT=32768,F$O._LINE_ELEMENT=65536,F$O._NOWARP=131072,F$O._WIDTHAUTO=262144,F$O._LISTERRESZIE=524288,F$O}(F$_),F$ae=function(F$e){function F$Y(){this.url=null,this.audio=null,this.loaded=!1,F$Y.__super.call(this)}F$g(F$Y,"laya.media.h5audio.AudioSound",F$H);var F$F=F$Y.prototype;return F$F.dispose=function(){var F$e=F$Y._audioCache[this.url];F$e&&(F$e.src="",delete F$Y._audioCache[this.url])},F$F.load=function(F$e){var F$F;if(F$e=F$r.formatURL(F$e),(this.url=F$e)==F$V._tMusic?(F$Y._initMusicAudio(),(F$F=F$Y._musicAudio).src!=F$e&&(F$Y._audioCache[F$F.src]=null,F$F=null)):F$F=F$Y._audioCache[F$e],F$F&&2<=F$F.readyState)this.event("complete");else{F$F||(F$F=F$e==F$V._tMusic?(F$Y._initMusicAudio(),F$Y._musicAudio):F$k.createElement("audio"),(F$Y._audioCache[F$e]=F$F).src=F$e),F$F.addEventListener("canplaythrough",F$o),F$F.addEventListener("error",F$E);var F$a=this;(this.audio=F$F).load?F$F.load():F$E()}function F$o(){F$s(),F$a.loaded=!0,F$a.event("complete")}function F$E(){F$F.load=null,F$s(),F$a.event("error")}function F$s(){F$F.removeEventListener("canplaythrough",F$o),F$F.removeEventListener("error",F$E)}},F$F.play=function(F$e,F$F,F$a){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),!this.url)return null;var F$o,F$E;if(!(F$o=this.url==F$V._tMusic?F$Y._musicAudio:F$Y._audioCache[this.url]))return null;F$E=F$X.getItem("audio:"+this.url),F$Z.isConchApp?F$E||((F$E=F$k.createElement("audio")).src=this.url):this.url==F$V._tMusic?(F$Y._initMusicAudio(),(F$E=F$Y._musicAudio).src=this.url):F$E=F$E||F$o.cloneNode(!0);var F$s=new F$Oe(F$E);return F$s.url=this.url,F$s.loops=F$F,F$s.startTime=F$e,F$s.startHandler=F$a,F$s.play(!1),F$V.addChannel(F$s),F$s},F$I(0,F$F,"duration",function(){var F$e;return(F$e=F$Y._audioCache[this.url])?F$e.duration:0}),F$Y._initMusicAudio=function(){F$Y._musicAudio||(F$Y._musicAudio||(F$Y._musicAudio=F$k.createElement("audio")),F$Z.isConchApp||F$k.document.addEventListener("mousedown",F$Y._makeMusicOK))},F$Y._makeMusicOK=function(){F$k.document.removeEventListener("mousedown",F$Y._makeMusicOK),F$Y._musicAudio.src?F$Y._musicAudio.play():(F$Y._musicAudio.src="",F$Y._musicAudio.load())},F$Y._audioCache={},F$Y._musicAudio=null,F$Y}(),F$oe=function(F$e){function F$F(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,F$F.__super.call(this)}F$g(F$F,"laya.media.SoundChannel",F$H);var F$a=F$F.prototype;return F$a.play=function(){},F$a.stop=function(){},F$a.pause=function(){},F$a.resume=function(){},F$a.__runComplete=function(F$e){F$e&&F$e.run()},F$I(0,F$a,"volume",function(){return 1},function(F$e){}),F$I(0,F$a,"position",function(){return 0}),F$I(0,F$a,"duration",function(){return 0}),F$F}(),F$Ee=function(F$e){function F$F(){F$F.__super.call(this)}F$g(F$F,"laya.media.Sound",F$H);var F$a=F$F.prototype;return F$a.load=function(F$e){},F$a.play=function(F$e,F$F,F$a){return void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),null},F$a.dispose=function(){},F$I(0,F$a,"duration",function(){return 0}),F$F}(),F$se=function(F$e){function F$E(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,F$E.__super.call(this)}F$g(F$E,"laya.media.webaudio.WebAudioSound",F$H);var F$F=F$E.prototype;return F$F.load=function(F$e){this.url=F$e,this.audioBuffer=F$E._dataCache[F$e],this.audioBuffer?this._loaded(this.audioBuffer):(F$E.e.on("loaded:"+F$e,this,this._loaded),F$E.e.on("err:"+F$e,this,this._err),F$E.__loadingSound[F$e]||(F$E.__loadingSound[F$e]=!0,F$b.loader.load(F$e,F$$.create(this,this.onloaded),null,F$_e.BUFFER,4,!1,null,!0)))},F$F.onloaded=function(F$e){F$e||this._err(),this._disposed?this._removeLoadEvents():(this.data=F$e,F$E.buffs.push({buffer:this.data,url:this.url}),F$E.decode())},F$F._err=function(){if(this._removeLoadEvents(),F$E.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var F$e,F$F,F$a,F$o=0;for(F$e=(F$F=this.__toPlays).length,F$o=0;F$o<F$e;F$o++)(F$a=F$F[F$o])[3]&&!F$a[3].isStopped&&F$a[3].event("error");this.__toPlays.length=0}},F$F._loaded=function(F$e){this._removeLoadEvents(),this._disposed||(this.audioBuffer=F$e,this.loaded=!0,this.event("complete"))},F$F._removeLoadEvents=function(){F$E.e.off("loaded:"+this.url,this,this._loaded),F$E.e.off("err:"+this.url,this,this._err)},F$F.__playAfterLoaded=function(){if(this.__toPlays){var F$e,F$F,F$a,F$o=0;for(F$e=(F$F=this.__toPlays).length,F$o=0;F$o<F$e;F$o++)(F$a=F$F[F$o])[3]&&!F$a[3].isStopped&&this.play(F$a[0],F$a[1],F$a[2],F$a[3]);this.__toPlays.length=0}},F$F.play=function(F$e,F$F,F$a,F$o){return void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),F$o=F$o||new F$qe,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([F$e,F$F,F$a,F$o]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),F$o.url=this.url,F$o.loops=F$F,F$o.audioBuffer=this.audioBuffer,F$o.startTime=F$e,F$o.startHandler=F$a,F$o.play(!1),F$V.addChannel(F$o),F$o},F$F.dispose=function(){this._disposed=!0,delete F$E._dataCache[this.url],delete F$E.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},F$I(0,F$F,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$E.decode=function(){if(!(F$E.buffs.length<=0||F$E.isDecoding))if(F$E.isDecoding=!0,(F$E.tInfo=F$E.buffs.shift())&&F$E.tInfo.buffer&&F$E.tInfo.buffer.byteLength)try{F$E.ctx.decodeAudioData(F$E.tInfo.buffer,F$E._done,F$E._fail)}catch(F$e){console.error("decodeAudioData error  byteLength:"+F$E.tInfo.buffer.byteLength+"  url:"+F$E.tInfo.url)}else F$E._fail()},F$E._done=function(F$e){F$E.e.event("loaded:"+F$E.tInfo.url,F$e),F$E._dataCache[F$E.tInfo.url]=F$e,F$E.isDecoding=!1,F$E.decode()},F$E._fail=function(){F$E.e.event("err:"+F$E.tInfo.url,null),F$E.isDecoding=!1,F$E.decode()},F$E._playEmptySound=function(){if(null!=F$E.ctx){if(F$E._emptySource&&(F$E._emptySource.stop(),F$E._emptySource.disconnect(0),!F$qe._tryCleanFailed))try{F$E._emptySource.buffer=null}catch(F$e){F$qe._tryCleanFailed=!0}var F$e=F$E.ctx.createBufferSource();F$e.buffer=F$E._miniBuffer,F$e.connect(F$E.ctx.destination),F$e.start(0,0,0),F$E._emptySource=F$e}},F$E._unlock=function(){F$E._unlocked||(F$E._playEmptySound(),"running"==F$E.ctx.state?(F$k.document.removeEventListener("mousedown",F$E._unlock,!0),F$k.document.removeEventListener("touchend",F$E._unlock,!0),F$k.document.removeEventListener("touchstart",F$E._unlock,!0),F$E._unlocked=!0):"suspended"==F$E.ctx.state&&F$V._recoverWebAudio())},F$E.initWebAudio=function(){"running"!=F$E.ctx.state&&(F$E._unlock(),F$k.document.addEventListener("mousedown",F$E._unlock,!0),F$k.document.addEventListener("touchend",F$E._unlock,!0),F$k.document.addEventListener("touchstart",F$E._unlock,!0))},F$E._emptySource=null,F$E._dataCache={},F$E.buffs=[],F$E.isDecoding=!1,F$E._unlocked=!1,F$E.tInfo=null,F$E.__loadingSound={},F$R(F$E,["window",function(){return this.window=F$k.window},"webAudioEnabled",function(){return this.webAudioEnabled=F$E.window.AudioContext||F$E.window.webkitAudioContext||F$E.window.mozAudioContext},"ctx",function(){return this.ctx=F$E.webAudioEnabled?new(F$E.window.AudioContext||F$E.window.webkitAudioContext||F$E.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=F$E.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new F$H}]),F$E}(),F$Ye=function(F$e){function F$F(){this._responseType=null,this._data=null,F$F.__super.call(this),this._http=new F$k.window.XMLHttpRequest}F$g(F$F,"laya.net.HttpRequest",F$H);var F$a=F$F.prototype;return F$a.send=function(F$e,F$F,F$a,F$o,F$E){void 0===F$a&&(F$a="get"),void 0===F$o&&(F$o="text"),this._responseType=F$o,this._data=null;var F$s=this,F$Y=this._http;if(F$Y.open(F$a,F$e,!0),F$E)for(var F$_=0;F$_<F$E.length;F$_++)F$Y.setRequestHeader(F$E[F$_++],F$E[F$_]);else F$Z.isConchApp||(F$F&&"string"!=typeof F$F?F$Y.setRequestHeader("Content-Type","application/json"):F$Y.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));F$Y.responseType="arraybuffer"!==F$o?"text":"arraybuffer",F$Y.onerror=function(F$e){F$s._onError(F$e)},F$Y.onabort=function(F$e){F$s._onAbort(F$e)},F$Y.onprogress=function(F$e){F$s._onProgress(F$e)},F$Y.onload=function(F$e){F$s._onLoad(F$e)},F$Y.send(F$F)},F$a._onProgress=function(F$e){F$e&&F$e.lengthComputable&&this.event("progress",F$e.loaded/F$e.total)},F$a._onAbort=function(F$e){this.error("Request was aborted by user")},F$a._onError=function(F$e){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},F$a._onLoad=function(F$e){var F$F=this._http,F$a=void 0!==F$F.status?F$F.status:200;200===F$a||204===F$a||0===F$a?this.complete():this.error("["+F$F.status+"]"+F$F.statusText+":"+F$F.responseURL)},F$a.error=function(F$e){this.clear(),this.event("error",F$e)},F$a.complete=function(){this.clear();var F$F=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=F$Q.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(F$e){F$F=!1,this.error(F$e.message)}F$F&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},F$a.clear=function(){var F$e=this._http;F$e.onerror=F$e.onabort=F$e.onprogress=F$e.onload=null},F$I(0,F$a,"url",function(){return this._http.responseURL}),F$I(0,F$a,"http",function(){return this._http}),F$I(0,F$a,"data",function(){return this._data}),F$F}(),F$_e=function(F$e){function F$v(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,F$v.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}F$g(F$v,"laya.net.Loader",F$H);var F$F=F$v.prototype;return F$F.load=function(F$e,F$F,F$a,F$o,F$E){if(F$e&&""!=F$e||console.error("Loader 加载的url不合法 "+F$e),void 0===F$a&&(F$a=!0),void 0===F$E&&(F$E=!1),0===(this._url=F$e).indexOf("data:image")?this._type=F$F="image":this._type=F$F||(F$F=this.getTypeFromUrl(F$e)),this._cache=F$a,this._data=null,!F$E&&F$v.loadedMap[F$e])return this._data=F$v.loadedMap[F$e],this.event("progress",1),void this.event("complete",this._data);if(F$o&&F$v.setGroup(F$e,F$o),null!=F$v.parserMap[F$F])return this._customParse=!0,void(F$v.parserMap[F$F]instanceof laya.utils.Handler?F$v.parserMap[F$F].runWith(this):F$v.parserMap[F$F].call(null,this));if("image"===F$F||"htmlimage"===F$F||"nativeimage"===F$F)return this._loadImage(F$e);if("ttf"===F$F)return this._loadTTF(F$e);switch(F$F){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:F$F}F$v.preLoadedMap[F$e]?this.onLoaded(F$v.preLoadedMap[F$e]):F$Y.resMgrLoad(F$e,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},F$F.getTypeFromUrl=function(F$e){var F$F=F$Q.getFileExtension(F$e);return F$F?F$v.typeMap[F$F]:(console.warn("Not recognize the resources suffix",F$e),"text")},F$F._loadTTF=function(F$e){F$e=F$r.formatURL(F$e);var F$F=new F$U;F$F.complete=F$$.create(this,this.onLoaded),F$F.load(F$e)},F$F._loadImage=function(F$e){F$Y.imgMgrLoad(F$e,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},F$F._loadImageComplete=function(F$e,F$F,F$a){if(null!=F$a)if(F$a instanceof ArrayBuffer){var F$o=new DataView(F$a),F$E=new laya.webgl.resource.WebGLImage(new Uint8Array(F$a,8),F$e,0,!1,F$o.getUint32(0),F$o.getUint32(4));this.onLoaded(F$E)}else if(F$a instanceof F$ge)F$v.imgMgrSet[F$e]=F$F,F$Y.imgMgrLock(F$e,F$v.imgMgrSet[F$e]),this._url=F$e,this.complete(F$a);else{var F$s=-1!=F$e.indexOf(".png",F$e.length-4)?6408:6407;F$E=new laya.webgl.resource.WebGLImage(F$a,F$e,F$s,!1,F$a.width,F$a.height);this.onLoaded(F$E)}else this.event("error","Load image failed")},F$F.imageCancel=function(F$e,F$F,F$a){F$Y.imgMgrCancel(F$e,this._onImageCallback)},F$F._loadSound=function(F$e){var F$F=new F$V._soundClass,F$a=this;function F$o(){F$F.offAll()}F$F.on("complete",this,function(){F$o(),F$a.onLoaded(F$F)}),F$F.on("error",this,function(){F$o(),F$F.dispose(),F$a.event("error","Load sound failed")}),F$F.load(F$e)},F$F.onProgress=function(F$e){"atlas"===this._type?this.event("progress",.3*F$e):this.event("progress",F$e)},F$F.onError=function(F$e){this.event("error",F$e)},F$F._loadedComplete=function(F$e,F$F,F$a){if(null!=F$a)switch(this._type){case"atlas":case"plf":case"json":var F$o=new F$d(F$a);this.onLoaded(JSON.parse(F$o.readUTFBytes()));break;case"font":F$o=new F$d(F$a);this.onLoaded(F$Q.parseXMLFromString(F$o.readUTFBytes()));break;default:this.onLoaded(F$a)}else this.event("error",F$e)},F$F.onLoaded=function(F$e){var F$F=this._type;if("plf"==F$F)this.parsePLFData(F$e),this.complete(F$e);else if("image"===F$F){var F$a=new F$ge(F$e);F$a.url=this._url,this.complete(F$a)}else if("sound"===F$F||"htmlimage"===F$F||"nativeimage"===F$F)this.complete(F$e);else if("atlas"===F$F){if(!F$e.src&&!F$e._setContext){if(!this._data){if((this._data=F$e).meta&&F$e.meta.image)for(var F$o=F$e.meta.image.split(","),F$E=0<=this._url.indexOf("/")?"/":"\\",F$s=this._url.lastIndexOf(F$E),F$Y=0<=F$s?this._url.substr(0,F$s+1):"",F$_=0,F$R=F$o.length;F$_<F$R;F$_++)F$o[F$_]=F$Y+F$o[F$_];else F$o=[this._url.replace(".json",".png")];F$o.reverse(),F$e.toLoads=F$o,F$e.pics=[]}return this.event("progress",.3+1/F$o.length*.6),this._loadImage(F$o.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(F$e),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var F$H=this._data.frames,F$g=this._url.split("?")[0],F$n=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:F$g.substring(0,F$g.lastIndexOf("."))+"/",F$O=this._data.pics,F$q=F$r.formatURL(this._url),F$I=F$v.atlasMap[F$q]||(F$v.atlasMap[F$q]=[]);F$I.dir=F$n;var F$l=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var F$P in F$l=parseFloat(this._data.meta.scale),F$H){var F$j,F$$=F$H[F$P],F$y=F$O[F$$.frame.idx?F$$.frame.idx:0],F$M=F$r.formatURL(F$n+F$P);F$y.scaleRate=F$l,F$j=F$ge.create(F$y,F$$.frame.x,F$$.frame.y,F$$.frame.w,F$$.frame.h,F$$.spriteSourceSize.x,F$$.spriteSourceSize.y,F$$.sourceSize.w,F$$.sourceSize.h),F$v.cacheRes(F$M,F$j),F$v.keepCache(this._url,F$n+F$P),F$j.url=F$M,F$I.push(F$M)}else for(F$P in F$H)F$y=F$O[(F$$=F$H[F$P]).frame.idx?F$$.frame.idx:0],F$M=F$r.formatURL(F$n+F$P),F$v.cacheRes(F$M,F$ge.create(F$y,F$$.frame.x,F$$.frame.y,F$$.frame.w,F$$.frame.h,F$$.spriteSourceSize.x,F$$.spriteSourceSize.y,F$$.sourceSize.w,F$$.sourceSize.h)),F$v.loadedMap[F$M].url=F$M,F$v.keepCache(this._url,F$n+F$P),F$I.push(F$M);delete this._data.pics,this.complete(this._data)}else if("font"==F$F){if(!F$e.src)return this._data=F$e,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var F$D=new F$K;F$D.parseFont(this._data,F$e);var F$m=this._url.split(".fnt")[0].split("/"),F$b=F$m[F$m.length-1];F$Pe.registerBitmapFont(F$b,F$D),this._data=F$D,this.complete(this._data)}else if("pkm"==F$F){var F$L=F$me.create(F$e,this._url),F$B=new F$ge(F$L);F$B.url=this._url,this.complete(F$B)}else this.complete(F$e)},F$F.parsePLFData=function(F$e){var F$F,F$a,F$o;for(F$F in F$e)switch(F$o=F$e[F$F],F$F){case"json":case"text":for(F$a in F$o)F$v.preLoadedMap[F$r.formatURL(F$a)]=F$o[F$a];break;default:for(F$a in F$o)F$v.preLoadedMap[F$r.formatURL(F$a)]=F$o[F$a]}},F$F.complete=function(F$e){this._data=F$e,this._customParse?this.event("loaded",F$e instanceof Array?[F$e]:F$e):(F$v._loaders.push(this),F$v._isWorking||F$v.checkNext())},F$F.endLoad=function(F$e){F$e&&(this._data=F$e),this._cache&&F$v.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},F$I(0,F$F,"url",function(){return this._url}),F$I(0,F$F,"data",function(){return this._data}),F$I(0,F$F,"cache",function(){return this._cache}),F$I(0,F$F,"type",function(){return this._type}),F$v.checkNext=function(){F$v._isWorking=!0;for(var F$e=F$k.now();F$v._startIndex<F$v._loaders.length;)if(F$k.now(),F$v._loaders[F$v._startIndex].endLoad(),F$v._startIndex++,F$k.now()-F$e>F$v.maxTimeOut)return console.warn("loader callback cost a long time:"+(F$k.now()-F$e)+" url="+F$v._loaders[F$v._startIndex-1].url),void F$b.timer.frameOnce(1,null,F$v.checkNext);F$v._loaders.length=0,F$v._startIndex=0,F$v._isWorking=!1},F$v.clearRes=function(F$e,F$F){if(null!=F$e){void 0===F$F&&(F$F=!1),F$e=F$r.formatURL(F$e);var F$a=F$v.getAtlas(F$e);if(F$a){for(var F$o=0,F$E=F$a.length;F$o<F$E;F$o++){var F$s=F$a[F$o],F$Y=F$v.getRes(F$s);delete F$v.loadedMap[F$s],F$v.clearCache(F$e.substring(F$r.basePath.length),F$s.substring(F$r.basePath.length)),F$Y&&F$Y.destroy(F$F)}F$a.length=0,delete F$v.atlasMap[F$e],delete F$v.loadedMap[F$e]}else{var F$_=F$v.loadedMap[F$e];F$_&&(delete F$v.loadedMap[F$e],F$_ instanceof laya.resource.Texture&&F$_.bitmap&&F$_.destroy(F$F))}}},F$v.clearTextureRes=function(F$e){F$e=F$r.formatURL(F$e);var F$F=laya.net.Loader.getAtlas(F$e),F$a=F$F&&0<F$F.length?laya.net.Loader.getRes(F$F[0]):laya.net.Loader.getRes(F$e);F$a&&F$a.bitmap&&(F$Z.isConchApp&&!F$Z.isConchWebGL?F$a.bitmap.source.releaseTexture&&F$a.bitmap.source.releaseTexture():null==F$a.bitmap._atlaser&&F$a.bitmap.releaseResource(!0))},F$v.getRes=function(F$e){return F$v.loadedMap[F$r.formatURL(F$e)]},F$v.getAtlas=function(F$e){return F$v.atlasMap[F$r.formatURL(F$e)]},F$v.cacheRes=function(F$e,F$F){F$e=F$r.formatURL(F$e),null!=F$v.loadedMap[F$e]?console.warn("Resources already exist,is repeated loading:",F$e):F$v.loadedMap[F$e]=F$F},F$v.setGroup=function(F$e,F$F){F$v.groupMap[F$F]||(F$v.groupMap[F$F]=[]),F$v.groupMap[F$F].push(F$e)},F$v.clearResByGroup=function(F$e){if(F$v.groupMap[F$e]){var F$F=F$v.groupMap[F$e],F$a=0,F$o=F$F.length;for(F$a=0;F$a<F$o;F$a++)F$v.clearRes(F$F[F$a]);F$F.length=0}},F$v.keepCache=function(F$e,F$F){if(F$e&&F$F){var F$a=F$v.cacheSet[F$F];F$a?-1==F$a.indexOf(F$e)&&F$a.push(F$e):F$v.cacheSet[F$F]=[F$e]}},F$v.clearCache=function(F$e,F$F){if(F$e&&F$F){var F$a=F$v.cacheSet[F$F];if(F$a){var F$o=F$a.indexOf(F$e);if(-1!==F$o){var F$E=F$a.length-1;0==F$E?(delete F$v.cacheSet[F$F],0<F$v.imgMgrSet[F$F]?F$Y.imgMgrFree(F$F,F$v.imgMgrSet[F$F]):F$v.clearRes(F$F,!0)):(F$a[F$o]=F$a[F$E],F$a.length=F$E)}}}},F$v.saveObject=function(F$e,F$F,F$a){if(F$F&&F$e){var F$o=F$v.objectSet[F$e];F$o?(console.warn("Loader.saveObject: "+F$e),F$o[0]=F$F,F$o[1]=F$a):F$v.objectSet[F$e]=[F$F,F$a,[]]}},F$v.findObject=function(F$e){if(F$e){var F$F=F$v.objectSet[F$e];if(F$F)return F$F[0]}return null},F$v.keepObject=function(F$e,F$F){if(F$e&&F$F){var F$a=F$v.objectSet[F$F];F$a&&-1===F$a[2].indexOf(F$e)&&F$a[2].push(F$e)}},F$v.clearObject=function(F$e,F$F){if(F$e&&F$F){var F$a=F$v.objectSet[F$F];if(F$a){var F$o=F$a[2],F$E=F$o.indexOf(F$e);if(-1!==F$E){var F$s=F$o.length-1;0==F$s?(delete F$v.objectSet[F$F],F$a[1]&&F$a[1].call(null,F$a[0])):(F$o[F$E]=F$o[F$s],F$o.length=F$s)}}}},F$v.TEXT="text",F$v.JSON="json",F$v.XML="xml",F$v.BUFFER="arraybuffer",F$v.IMAGE="image",F$v.SOUND="sound",F$v.ATLAS="atlas",F$v.FONT="font",F$v.TTF="ttf",F$v.PLF="plf",F$v.PKM="pkm",F$v.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},F$v.parserMap={},F$v.groupMap={},F$v.maxTimeOut=100,F$v.loadedMap={},F$v.preLoadedMap={},F$v.atlasMap={},F$v._loaders=[],F$v._isWorking=!1,F$v._startIndex=0,F$v.imgCache={},F$v.cacheSet={},F$v.objectSet={},F$v.imgMgrSet={},F$v}(),F$Re=function(F$e){var F$O;function F$q(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},F$q.__super.call(this);for(var F$e=0;F$e<this._maxPriority;F$e++)this._resInfos[F$e]=[]}F$g(F$q,"laya.net.LoaderManager",F$H);var F$F=F$q.prototype;return F$F.create=function(F$e,F$a,F$F,F$o,F$E,F$s,F$Y,F$_){if(null==F$s&&(F$s=2),null==F$Y&&(F$Y=!0),F$e instanceof Array){var F$R=F$e,F$H=F$R.length,F$g=0;if(F$F)var F$n=F$$.create(F$F.caller,F$F.method,F$F.args,!1);for(var F$O=0;F$O<F$H;F$O++){var F$q=F$R[F$O];"string"==typeof F$q&&(F$q=F$R[F$O]={url:F$q}),F$q.progress=0}for(F$O=0;F$O<F$H;F$O++){F$q=F$R[F$O];var F$I=F$F?F$$.create(null,F$j,[F$q],!1):null,F$l=F$F||F$a?F$$.create(null,F$P,[F$q]):null;this._create(F$q.url,F$l,F$I,F$q.clas||F$o,F$q.params||F$E,null!=F$q.priority&&0<=F$q.priority?F$q.priority:F$s,F$Y,F$q.group||F$_)}function F$P(F$e,F$F){F$g++,F$e.progress=1,F$g===F$H&&F$a&&F$a.run()}function F$j(F$e,F$F){F$e.progress=F$F;for(var F$a=0,F$o=0;F$o<F$H;F$o++){F$a+=F$R[F$o].progress}var F$E=F$a/F$H;F$n.runWith(F$E)}return!0}return this._create(F$e,F$a,F$F,F$o,F$E,F$s,F$Y,F$_)},F$F._create=function(F$F,F$a,F$e,F$o,F$E,F$s,F$Y,F$_){F$F&&""!=F$F||console.error("加载的url不合法 "+F$F),null==F$s&&(F$s=2),null==F$Y&&(F$Y=!0);var F$R=F$r.formatURL(F$F),F$H=this.getRes(F$R);if(F$H)!F$H.hasOwnProperty("loaded")||F$H.loaded?(F$e&&F$e.runWith(1),F$a&&F$a.run()):F$a&&F$b.loader._createListener(F$F,F$a.caller,F$a.method,F$a.args,!0,!1);else{var F$g=F$Q.getFileExtension(F$F),F$n=F$q.createMap[F$g];if(!F$n)throw new Error("LoaderManager:unknown file("+F$F+") extension with: "+F$g+".");F$o||(F$o=F$n[0]);var F$O=F$n[1];if("atlas"==F$g)this.load(F$F,F$a,F$e,F$O,F$s,F$Y);else{F$o===F$ge&&(F$O="htmlimage"),(F$H=F$o?new F$o:null).hasOwnProperty("_loaded")&&(F$H._loaded=!1),F$H._setUrl(F$F),F$_&&F$H._setGroup(F$_),this._createLoad(F$H,F$F,F$$.create(null,function(F$e){F$H&&!F$H.destroyed&&F$e&&F$H.onAsynLoaded.call(F$H,F$F,F$e,F$E),F$a&&F$a.run();F$b.loader.event(F$F)}),F$e,F$O,F$s,!1,F$_,!0),F$Y&&this.cacheRes(F$R,F$H)}}return F$H},F$F.load=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){F$e&&""!=F$e||console.error("加载的url不合法 "+F$e);var F$R=this;if(null==F$E&&(F$E=2),null==F$s&&(F$s=!0),void 0===F$_&&(F$_=!1),F$e instanceof Array)return this._loadAssets(F$e,F$F,F$a,F$o,F$E,F$s,F$Y);var F$H=F$_e.getRes(F$e);if(null!=F$H)F$b.timer.frameOnce(1,null,function(){F$a&&F$a.runWith(1),F$F&&F$F.runWith(F$H),F$R._loaderCount||F$R.event("complete")});else{var F$g=F$q._resMap[F$e];F$g?(F$F&&F$g._createListener("complete",F$F.caller,F$F.method,F$F.args,!1,!1),F$a&&F$g._createListener("progress",F$a.caller,F$a.method,F$a.args,!1,!1)):((F$g=this._infoPool.length?this._infoPool.pop():new F$O).url=F$e,F$g.clas=null,F$g.type=F$o,F$g.cache=F$s,F$g.group=F$Y,F$g.ignoreCache=F$_,F$g.priority=F$E,F$F&&F$g.on("complete",F$F.caller,F$F.method,F$F.args),F$a&&F$g.on("progress",F$a.caller,F$a.method,F$a.args),F$q._resMap[F$e]=F$g,F$E=F$E<this._maxPriority?0<=F$E?F$E:0:this._maxPriority-1,this._resInfos[F$E].push(F$g),this._next())}return this},F$F.cancel=function(F$e,F$F,F$a){if(F$H=F$q._resMap[F$e]){F$F&&F$H.off("complete",F$F.caller,F$F.method,!1),F$a&&F$H.off("progress",F$a.caller,F$a.method,!1);var F$o=F$H.getListener("complete"),F$E=F$H.getListener("progress");if(!(F$o&&F$o.head||F$E&&F$E.head)){if(F$H.loader){var F$s=F$H.loader;F$s.imageCancel(F$e),F$s.offAll(),F$s._data=null,F$s._customParse=!1,F$s._url=null,F$s._class=null,F$s._type=null,this._loaders.push(F$s),this._loaderCount--,delete this._loaderMap[F$H.url]}for(var F$Y=0;F$Y<this._maxPriority;F$Y++)for(var F$_=this._resInfos[F$Y],F$R=F$_.length-1;-1<F$R;F$R--){var F$H;(F$H=F$_[F$R])&&F$H.url===F$e&&(F$_[F$R]=null,F$H.destroy(),F$H.offAll(),this._infoPool.push(F$H))}delete F$q._resMap[F$e],this._next()}}},F$F._createLoad=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){var F$H=this;if(null==F$s&&(F$s=2),null==F$Y&&(F$Y=!0),void 0===F$R&&(F$R=!1),F$F instanceof Array)return this._loadAssets(F$F,F$a,F$o,F$E,F$s,F$Y,F$_);var F$g=F$_e.getRes(F$F);if(null!=F$g)F$b.timer.frameOnce(1,null,function(){F$o&&F$o.runWith(1),F$a&&F$a.runWith(F$g),F$H._loaderCount||F$H.event("complete")});else{var F$n=F$q._resMap[F$F];F$n?(F$a&&F$n._createListener("complete",F$a.caller,F$a.method,F$a.args,!1,!1),F$o&&F$n._createListener("progress",F$o.caller,F$o.method,F$o.args,!1,!1)):((F$n=this._infoPool.length?this._infoPool.pop():new F$O).url=F$F,F$n.clas=F$e,F$n.type=F$E,F$n.cache=F$Y,F$n.group=F$_,F$n.ignoreCache=F$R,F$n.priority=F$s,F$a&&F$n.on("complete",F$a.caller,F$a.method,F$a.args),F$o&&F$n.on("progress",F$o.caller,F$o.method,F$o.args),F$q._resMap[F$F]=F$n,F$s=F$s<this._maxPriority?0<=F$s?F$s:0:this._maxPriority-1,this._resInfos[F$s].push(F$n),this._next())}return this},F$F._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var F$e=0;F$e<this._maxPriority;F$e++)for(var F$F=this._resInfos[F$e];0<F$F.length;){var F$a=F$F.shift();if(F$a)return this._doLoad(F$a)}this._loaderCount||this.event("complete")}},F$F._doLoad=function(F$F){var F$a=this._loaders.length?this._loaders.pop():new F$_e;this._loaderCount++,(this._loaderMap[F$F.url]=F$a).on("complete",null,F$E),F$a.on("progress",null,function(F$e){F$F.event("progress",F$e)}),F$a.on("error",null,function(F$e){F$E(null)}),F$F.loader=F$a;var F$o=this;function F$E(F$e){F$a.offAll(),F$a._data=null,F$a._customParse=!1,F$a._url=null,F$a._class=null,F$a._type=null,F$o._loaders.push(F$a),F$o._loaderCount--,delete F$o._loaderMap[F$F.url],F$o._endLoad(F$F,F$e instanceof Array?[F$e]:F$e),F$o._next()}F$a._class=F$F.clas,1<=F$F.priority?(F$a.priority=F$F.priority,F$a.realTime=!1):(F$a.priority=0,F$a.realTime=!0),F$a.load(F$F.url,F$F.type,F$F.cache,F$F.group,F$F.ignoreCache)},F$F._endLoad=function(F$e,F$F){var F$a=F$e.url;if(null==F$F){var F$o=this._failRes[F$a]||0;if(F$o<this.retryNum)return console.warn("[warn]Retry to load:",F$a),this._failRes[F$a]=F$o+1,void F$b.timer.once(this.retryDelay,this,this._addReTry,[F$e],!1);console.warn("[error]Failed to load:",F$a),this.event("error",F$a)}this._failRes[F$a]&&(this._failRes[F$a]=0),delete F$q._resMap[F$a],F$e.event("complete",F$F),F$e.destroy(),F$e.offAll(),this._infoPool.push(F$e)},F$F._addReTry=function(F$e){this._resInfos[this._maxPriority-1].push(F$e),this._next()},F$F.clearRes=function(F$e,F$F){void 0===F$F&&(F$F=!1),F$_e.clearRes(F$e,F$F)},F$F.getRes=function(F$e){return F$_e.getRes(F$e)},F$F.cacheRes=function(F$e,F$F){F$_e.cacheRes(F$e,F$F)},F$F.clearTextureRes=function(F$e){F$_e.clearTextureRes(F$e)},F$F.setGroup=function(F$e,F$F){F$_e.setGroup(F$e,F$F)},F$F.clearResByGroup=function(F$e){F$_e.clearResByGroup(F$e)},F$F.clearUnLoaded=function(){for(var F$e=0;F$e<this._maxPriority;F$e++){for(var F$F=this._resInfos[F$e],F$a=F$F.length-1;-1<F$a;F$a--){var F$o=F$F[F$a];F$o&&(F$o.destroy(),F$o.offAll(),this._infoPool.push(F$o))}F$F.length=0}this._loaderCount=0,F$q._resMap={}},F$F.cancelLoadByUrls=function(F$e){if(F$e)for(var F$F=0,F$a=F$e.length;F$F<F$a;F$F++)this.cancelLoadByUrl(F$e[F$F])},F$F.cancelLoadByUrl=function(F$e){for(var F$F=0;F$F<this._maxPriority;F$F++)for(var F$a=this._resInfos[F$F],F$o=F$a.length-1;-1<F$o;F$o--){var F$E=F$a[F$o];F$E&&F$E.url===F$e&&(F$a[F$o]=null,F$E.destroy(),F$E.offAll(),this._infoPool.push(F$E))}F$q._resMap[F$e]&&delete F$q._resMap[F$e]},F$F._loadAssets=function(F$e,F$a,F$Y,F$F,F$o,F$E,F$s){null==F$o&&(F$o=2),null==F$E&&(F$E=!0);for(var F$_=F$e.length,F$R=0,F$H=0,F$g=[],F$n=!0,F$O=0;F$O<F$_;F$O++){var F$q=F$e[F$O];if(!F$q)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+F$e);"string"==typeof F$q&&(F$q={url:F$q,type:F$F,size:1,priority:F$o}),F$q.size||(F$q.size=1),F$q.progress=0,F$H+=F$q.size,F$g.push(F$q);var F$I=F$Y?F$$.create(null,F$j,[F$q],!1):null,F$l=F$a||F$Y?F$$.create(null,F$P,[F$q]):null;this.load(F$q.url,F$l,F$I,F$q.type,null!=F$q.priority&&0<=F$q.priority?F$q.priority:2,F$E,F$q.group||F$s)}function F$P(F$e,F$F){F$R++,F$e.progress=1,F$F||(F$n=!1),F$R===F$_&&F$a&&F$a.runWith(F$n)}function F$j(F$e,F$F){if(null!=F$Y){F$e.progress=F$F;for(var F$a=0,F$o=0;F$o<F$g.length;F$o++){var F$E=F$g[F$o];F$a+=F$E.size*F$E.progress}var F$s=F$a/F$H;F$Y.runWith(F$s)}}return this},F$q.cacheRes=function(F$e,F$F){F$_e.cacheRes(F$e,F$F)},F$q._resMap={},F$R(F$q,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),F$q.__init$=function(){F$O=function(F$e){function F$F(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,F$F.__super.call(this)}return F$g(F$F,"",F$H),F$F.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},F$F}()},F$q}(),F$He=(function(F$e){function F$E(F$e){F$E.__super.call(this),F$e||(F$e=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var F$F=0,F$a=0,F$o=0;F$o<20;F$o++)F$o%5!=4?this._mat[F$F++]=F$e[F$o]:this._alpha[F$a++]=F$e[F$o];this._action=F$G.createFilterAction(32),this._action.data=this}F$g(F$E,"laya.filters.ColorFilter",F$j);var F$F=F$E.prototype;F$b.imps(F$F,{"laya.filters.IFilter":!0}),F$F.callNative=function(F$e){F$e._$P.cf=this;F$e.conchModel&&F$e.conchModel.setFilterMatrix&&F$e.conchModel.setFilterMatrix(this._mat,this._alpha)},F$I(0,F$F,"type",function(){return 32}),F$I(0,F$F,"action",function(){return this._action})}(),function(F$e){function F$o(F$e,F$F,F$a){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===F$F&&(F$F=0),F$o.__super.call(this),this._byteClass=F$a||F$d,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,F$e&&0<F$F&&F$F<65535&&this.connect(F$e,F$F)}F$g(F$o,"laya.net.Socket",F$H);var F$F=F$o.prototype;F$F.connect=function(F$e,F$F){var F$a="ws://"+F$e+":"+F$F;F$a="https:"==F$k.window.location.protocol?"wss://"+F$e+":"+F$F:"ws://"+F$e+":"+F$F,this.connectByUrl(F$a)},F$F.connectByUrl=function(F$e){var F$F=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new F$k.window.WebSocket(F$e,this.protocols):this._socket=new F$k.window.WebSocket(F$e),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(F$e){F$F._onOpen(F$e)},this._socket.onmessage=function(F$e){F$F._onMessage(F$e)},this._socket.onclose=function(F$e){F$F._onClose(F$e)},this._socket.onerror=function(F$e){F$F._onError(F$e)}},F$F.cleanSocket=function(){try{this._socket.close()}catch(F$e){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},F$F.close=function(){if(null!=this._socket)try{this._socket.close()}catch(F$e){}},F$F._onOpen=function(F$e){this._connected=!0,this.event("open",F$e)},F$F._onMessage=function(F$e){if(F$e&&F$e.data){var F$F=F$e.data;if(this.disableInput&&F$F)this.event("message",F$F);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var F$a=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,F$F&&("string"==typeof F$F?this._input.writeUTFBytes(F$F):this._input.writeArrayBuffer(F$F),this._addInputPosition=this._input.pos,this._input.pos=F$a),this.event("message",F$F)}}},F$F._onClose=function(F$e){this._connected=!1,this.event("close",F$e)},F$F._onError=function(F$e){this.event("error",F$e)},F$F.send=function(F$e){this._socket.send(F$e)},F$F.flush=function(){if(this._output&&0<this._output.length){var F$F;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(F$e){F$F=F$e}this._output.endian=this.endian,this._output.clear(),F$F&&this.event("error",F$F)}},F$I(0,F$F,"input",function(){return this._input}),F$I(0,F$F,"output",function(){return this._output}),F$I(0,F$F,"connected",function(){return this._connected}),F$I(0,F$F,"endian",function(){return this._endian},function(F$e){this._endian=F$e,null!=this._input&&(this._input.endian=F$e),null!=this._output&&(this._output.endian=F$e)}),F$o.LITTLE_ENDIAN="littleEndian",F$o.BIG_ENDIAN="bigEndian"}(),function(F$e){function F$_(){F$_.__super.call(this),this._$1__id=++F$_._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(F$_._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,F$J.currentResourceManager&&F$J.currentResourceManager.addResource(this)}F$g(F$_,"laya.resource.Resource",F$H);var F$F=F$_.prototype;return F$b.imps(F$F,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),F$F._setUrl=function(F$e){var F$F;this._url!==F$e&&(this._url&&((F$F=F$_._urlResourcesMap[this._url]).splice(F$F.indexOf(this),1),0===F$F.length&&delete F$_._urlResourcesMap[this._url]),F$e&&((F$F=F$_._urlResourcesMap[F$e])||(F$_._urlResourcesMap[F$e]=F$F=[]),F$F.push(this)),this._url=F$e)},F$F._getGroup=function(){return this._group},F$F._setGroup=function(F$e){var F$F;this._group!==F$e&&(this._group&&((F$F=F$_._groupResourcesMap[this._group]).splice(F$F.indexOf(this),1),0===F$F.length&&delete F$_._groupResourcesMap[this._group]),F$e&&((F$F=F$_._groupResourcesMap[F$e])||(F$_._groupResourcesMap[F$e]=F$F=[]),F$F.push(this)),this._group=F$e)},F$F._addReference=function(){this._referenceCount++},F$F._removeReference=function(){this._referenceCount--},F$F._clearReference=function(){this._referenceCount=0},F$F._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},F$F.recreateResource=function(){this.completeCreate()},F$F.disposeResource=function(){},F$F.activeResource=function(F$e){void 0===F$e&&(F$e=!1),this._lastUseFrameCount=F$W.loopCount,!this._destroyed&&this.__loaded&&(this._released||F$e)&&this.recreateResource()},F$F.releaseResource=function(F$e){return void 0===F$e&&(F$e=!0),!(!F$e&&this.lock)&&(!(this._released&&!F$e)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},F$F.onAsynLoaded=function(F$e,F$F,F$a){throw new Error("Resource: must override this function!")},F$F.destroy=function(){var F$e;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete F$_._idResourcesMap[this.id],this._url&&((F$e=F$_._urlResourcesMap[this._url])&&(F$e.splice(F$e.indexOf(this),1),0===F$e.length&&delete F$_._urlResourcesMap[this.url]),F$_e.clearRes(this._url),this.__loaded||F$G.cancelLoadByUrl(this._url)),this._group&&((F$e=F$_._groupResourcesMap[this._group]).splice(F$e.indexOf(this),1),0===F$e.length&&delete F$_._groupResourcesMap[this.url]))},F$F.completeCreate=function(){this._released=!1,this.event("recovered",this)},F$F.dispose=function(){this.destroy()},F$I(0,F$F,"memorySize",function(){return this._memorySize},function(F$e){var F$F=F$e-this._memorySize;this._memorySize=F$e,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,F$F),this.resourceManager&&this.resourceManager.addSize(F$F)}),F$I(0,F$F,"_loaded",null,function(F$e){this.__loaded=F$e}),F$I(0,F$F,"loaded",function(){return this.__loaded}),F$I(0,F$F,"id",function(){return this._$1__id}),F$I(0,F$F,"destroyed",function(){return this._destroyed}),F$I(0,F$F,"group",function(){return this._getGroup()},function(F$e){this._setGroup(F$e)}),F$I(0,F$F,"resourceManager",function(){return this._resourceManager}),F$I(0,F$F,"url",function(){return this._url}),F$I(0,F$F,"released",function(){return this._released}),F$I(0,F$F,"referenceCount",function(){return this._referenceCount}),F$_.getResourceByID=function(F$e){return F$_._idResourcesMap[F$e]},F$_.getResourceByURL=function(F$e,F$F){return void 0===F$F&&(F$F=0),null==F$_._urlResourcesMap[F$e]?null:F$_._urlResourcesMap[F$e][F$F]},F$_.getResourceCountByURL=function(F$e){return F$_._urlResourcesMap[F$e].length},F$_.destroyUnusedResources=function(F$e){var F$F;if(F$e){var F$a=F$_._groupResourcesMap[F$e];if(F$a)for(var F$o=F$a.slice(),F$E=0,F$s=F$o.length;F$E<F$s;F$E++)(F$F=F$o[F$E]).lock||0!==F$F._referenceCount||F$F.destroy()}else for(var F$Y in F$_._idResourcesMap)(F$F=F$_._idResourcesMap[F$Y]).lock||0!==F$F._referenceCount||F$F.destroy()},F$_._uniqueIDCounter=0,F$_._idResourcesMap={},F$_._urlResourcesMap={},F$_._groupResourcesMap={},F$_}()),F$ge=function(F$e){function F$v(F$e,F$F){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,F$v.__super.call(this),F$e&&null!=F$e._addReference&&F$e._addReference(),this.setTo(F$e,F$F)}F$g(F$v,"laya.resource.Texture",F$H);var F$F=F$v.prototype;return F$F._setUrl=function(F$e){this.url=F$e},F$F.setTo=function(F$e,F$F){if(F$e instanceof F$Y.HTMLElement){var F$a=F$ye.create("2D",F$e);this.bitmap=F$a}else this.bitmap=F$e;if(this.uv=F$F||F$v.DEF_UV,F$e){this._w=F$e.width,this._h=F$e.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var F$o=this;if(this._loaded)F$G.addToAtlas&&F$G.addToAtlas(F$o);else{var F$E=F$e;F$E instanceof laya.resource.HTMLImage&&F$E.image&&F$E.image.addEventListener("load",function(F$e){F$G.addToAtlas&&F$G.addToAtlas(F$o)},!1)}}},F$F.active=function(){this.bitmap&&this.bitmap.activeResource()},F$F.destroy=function(F$e){if(void 0===F$e&&(F$e=!1),this.alphaTexture&&(this.alphaTexture.destroy(F$e),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var F$F=this.bitmap;F$e?(F$Z.isConchApp&&F$F.source&&F$F.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$F.dispose(),F$F._clearReference()):(F$F._removeReference(),0==F$F.referenceCount&&(F$Z.isConchApp&&F$F.source&&F$F.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$F.dispose())),this.url&&this===F$b.loader.getRes(this.url)&&F$b.loader.clearRes(this.url,F$e),this._loaded=!1}},F$F.load=function(F$e){var F$F=this;this._loaded=!1,F$e=F$r.customFormat(F$e);var F$a=this.bitmap||(this.bitmap=F$me.create(F$e));F$a.uri=F$e,F$a&&F$a._addReference();var F$o=this;F$a.onload=function(){F$a.onload=null,F$o._loaded=!0,F$F.sourceWidth=F$F._w=F$a.width,F$F.sourceHeight=F$F._h=F$a.height,F$o.event("loaded",this),F$G.addToAtlas&&F$G.addToAtlas(F$o)}},F$F.addTextureToAtlas=function(F$e){F$G.addTextureToAtlas(this)},F$F.getPixels=function(F$e,F$F,F$a,F$o){if(F$Z.isConchApp){var F$E=this.bitmap;if(F$E.source&&F$E.source.getImageData){var F$s=F$E.source.getImageData(F$e,F$F,F$a,F$o),F$Y=new Uint8Array(F$s);return Array.from(F$Y)}return null}return F$Z.isWebGL?F$G.getTexturePixels(this,F$e,F$F,F$a,F$o):(F$k.canvas.size(F$a,F$o),F$k.canvas.clear(),F$k.context.drawTexture(this,-F$e,-F$F,this.width,this.height,0,0),F$k.context.getImageData(0,0,F$a,F$o).data)},F$F.onAsynLoaded=function(F$e,F$F){if(F$F){if("function"!=typeof F$F._addReference)throw new Error("bitmap._addReference is not a function. "+F$F.className+" "+typeof F$F._addReference+" "+F$F.constructor);F$F._addReference()}this.setTo(F$F,this.uv),this._loaded&&this.event("loaded",this)},F$I(0,F$F,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),F$I(0,F$F,"loaded",function(){return this._loaded}),F$I(0,F$F,"released",function(){return!this.bitmap||this.bitmap.released}),F$I(0,F$F,"width",function(){return this._w?this._w:this.uv&&this.uv!==F$v.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(F$e){this._w=F$e,this.sourceWidth||(this.sourceWidth=F$e)}),F$I(0,F$F,"repeat",function(){return!F$Z.isWebGL||!this.bitmap||this.bitmap.repeat},function(F$e){F$e&&F$Z.isWebGL&&this.bitmap&&(this.bitmap.repeat=F$e)&&(this.bitmap.enableMerageInAtlas=!1)}),F$I(0,F$F,"height",function(){return this._h?this._h:this.uv&&this.uv!==F$v.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(F$e){this._h=F$e,this.sourceHeight||(this.sourceHeight=F$e)}),F$I(0,F$F,"isLinearSampling",function(){return!F$Z.isWebGL||9728!=this.bitmap.minFifter},function(F$e){!F$e&&F$Z.isWebGL&&(F$e||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),F$v.moveUV=function(F$e,F$F,F$a){for(var F$o=0;F$o<8;F$o+=2)F$a[F$o]+=F$e,F$a[F$o+1]+=F$F;return F$a},F$v.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){void 0===F$s&&(F$s=0),void 0===F$Y&&(F$Y=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0);var F$H=F$e instanceof laya.resource.Texture,F$g=F$H?F$e.uv:F$v.DEF_UV,F$n=F$H?F$e.bitmap:F$e,F$O=F$G.isAtlas(F$n);if(F$O){var F$q=F$n._atlaser,F$I=F$e._atlasID;if(-1==F$I)throw new Error("create texture error");F$n=F$q._inAtlasTextureBitmapValue[F$I],F$g=F$q._inAtlasTextureOriUVValue[F$I]}var F$l=new F$v(F$n,null);F$n.width&&F$F+F$o>F$n.width&&(F$o=F$n.width-F$F),F$n.height&&F$a+F$E>F$n.height&&(F$E=F$n.height-F$a),F$l.width=F$o,F$l.height=F$E,F$l.offsetX=F$s,F$l.offsetY=F$Y,F$l.sourceWidth=F$_||F$o,F$l.sourceHeight=F$R||F$E;var F$P=1/F$n.width,F$j=1/F$n.height;F$F*=F$P,F$a*=F$j,F$o*=F$P,F$E*=F$j;var F$$=F$l.uv[0],F$y=F$l.uv[1],F$M=F$l.uv[4],F$D=F$l.uv[5],F$m=F$M-F$$,F$b=F$D-F$y,F$L=F$v.moveUV(F$g[0],F$g[1],[F$F,F$a,F$F+F$o,F$a,F$F+F$o,F$a+F$E,F$F,F$a+F$E]);F$l.uv=[F$$+F$L[0]*F$m,F$y+F$L[1]*F$b,F$M-(1-F$L[2])*F$m,F$y+F$L[3]*F$b,F$M-(1-F$L[4])*F$m,F$D-(1-F$L[5])*F$b,F$$+F$L[6]*F$m,F$D-(1-F$L[7])*F$b],F$O&&F$l.addTextureToAtlas();var F$B=F$n.scaleRate;return F$B&&1!=F$B?(F$l.sourceWidth/=F$B,F$l.sourceHeight/=F$B,F$l.width/=F$B,F$l.height/=F$B,F$l.scaleRate=F$B,F$l.offsetX/=F$B,F$l.offsetY/=F$B):F$l.scaleRate=1,F$l},F$v.createFromTexture=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$e.scaleRate;1!=F$s&&(F$F*=F$s,F$a*=F$s,F$o*=F$s,F$E*=F$s);var F$Y=F$B.TEMP.setTo(F$F-F$e.offsetX,F$a-F$e.offsetY,F$o,F$E),F$_=F$Y.intersection(F$v._rect1.setTo(0,0,F$e.width,F$e.height),F$v._rect2);if(!F$_)return null;var F$R=F$v.create(F$e,F$_.x,F$_.y,F$_.width,F$_.height,F$_.x-F$Y.x,F$_.y-F$Y.y,F$o,F$E);if(F$R.bitmap&&F$R.bitmap._removeReference)return F$R.bitmap._removeReference(),F$R;var F$H="bitmap:"+(F$R.bitmap?F$R.bitmap.constructor?F$R.bitmap.constructor.name:F$R.bitmap.__className:"")+", url:"+(F$e.url+" | "+(F$R.bitmap?F$R.bitmap.url:F$e.url))+", x="+F$F+",y="+F$a+",width="+F$o+",height="+F$E+", result="+(F$_?F$_.x+","+F$_.y+","+F$_.width+","+F$_.height:"null")+", rect="+F$Y.x+","+F$Y.y+","+F$Y.width+","+F$Y.height;throw new Error("报错：bitmap._removeReference is not a function  "+F$H)},F$v.DEF_UV=[0,0,1,0,1,1,0,1],F$v.INV_UV=[0,1,1,1,1,0,0,0],F$v._rect1=new F$B,F$v._rect2=new F$B,F$v}(),F$e=function(F$e){var F$_;function F$s(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,F$s.__super.call(this)}F$g(F$s,"laya.utils.TimeLine",F$H);var F$F=F$s.prototype;return F$F.to=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=0),this._create(F$e,F$F,F$a,F$o,F$E,!0)},F$F.from=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=0),this._create(F$e,F$F,F$a,F$o,F$E,!1)},F$F._create=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$X.getItemByClass("tweenData",F$_);return F$Y.isTo=F$s,F$Y.type=0,F$Y.target=F$e,F$Y.duration=F$a,F$Y.data=F$F,F$Y.startTime=this._startTime+F$E,F$Y.endTime=F$Y.startTime+F$Y.duration,F$Y.ease=F$o,this._startTime=Math.max(F$Y.endTime,this._startTime),this._tweenDataList.push(F$Y),this._startTimeSort=!0,this._endTimeSort=!0,this},F$F.addLabel=function(F$e,F$F){var F$a=F$X.getItemByClass("tweenData",F$_);return F$a.type=1,F$a.data=F$e,F$a.endTime=F$a.startTime=this._startTime+F$F,this._labelDic||(this._labelDic={}),this._labelDic[F$e]=F$a,this._tweenDataList.push(F$a),this},F$F.removeLabel=function(F$e){if(this._labelDic&&this._labelDic[F$e]){var F$F=this._labelDic[F$e];if(F$F){var F$a=this._tweenDataList.indexOf(F$F);-1<F$a&&this._tweenDataList.splice(F$a,1)}delete this._labelDic[F$e]}},F$F.gotoTime=function(F$e){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var F$F,F$a,F$o,F$E;for(var F$s in this._firstTweenDic)if(F$a=this._firstTweenDic[F$s])for(var F$Y in F$a)F$a.diyTarget.hasOwnProperty(F$Y)&&(F$a.diyTarget[F$Y]=F$a[F$Y]);for(F$s in this._tweenDic)(F$F=this._tweenDic[F$s]).clear(),delete this._tweenDic[F$s];if(this._index=0,this._gidIndex=0,this._currTime=F$e,this._lastTime=F$k.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=F$o=this._tweenDataList.concat(),F$o.sort(function(F$e,F$F){return F$e.endTime>F$F.endTime?1:F$e.endTime<F$F.endTime?-1:0})}else F$o=this._endTweenDataList;for(var F$_=0,F$R=F$o.length;F$_<F$R;F$_++)if(0==(F$E=F$o[F$_]).type){if(!(F$e>=F$E.endTime))break;this._index=Math.max(this._index,F$_+1);var F$H=F$E.data;if(F$E.isTo)for(var F$g in F$H)F$E.target[F$g]=F$H[F$g]}for(F$_=0,F$R=this._tweenDataList.length;F$_<F$R;F$_++)0==(F$E=this._tweenDataList[F$_]).type&&F$e>=F$E.startTime&&F$e<F$E.endTime&&(this._index=Math.max(this._index,F$_+1),this._gidIndex++,(F$F=F$X.getItemByClass("tween",F$i))._create(F$E.target,F$E.data,F$E.duration,F$E.ease,F$$.create(this,this._animComplete,[this._gidIndex]),0,!1,F$E.isTo,!0,!1),F$F.setStartTime(this._currTime-(F$e-F$E.startTime)),F$F._updateEase(this._currTime),F$F.gid=this._gidIndex,this._tweenDic[this._gidIndex]=F$F)}},F$F.gotoLabel=function(F$e){if(null!=this._labelDic){var F$F=this._labelDic[F$e];F$F&&this.gotoTime(F$F.startTime)}},F$F.pause=function(){F$b.timer.clear(this,this._update)},F$F.resume=function(){this.play(this._currTime,this._loopKey)},F$F.play=function(F$e,F$F){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(F$e,F$F){return F$e.startTime>F$F.startTime?1:F$e.startTime<F$F.startTime?-1:0});for(var F$a=0,F$o=this._tweenDataList.length;F$a<F$o;F$a++){var F$E=this._tweenDataList[F$a];if(null!=F$E&&0==F$E.type){var F$s=F$E.target,F$Y=F$s.$_GID||(F$s.$_GID=F$Q.getGID()),F$_=null;for(var F$R in null==this._firstTweenDic[F$Y]?((F$_={}).diyTarget=F$s,this._firstTweenDic[F$Y]=F$_):F$_=this._firstTweenDic[F$Y],F$E.data)null==F$_[F$R]&&(F$_[F$R]=F$s[F$R])}}}"string"==typeof F$e?this.gotoLabel(F$e):this.gotoTime(F$e),this._loopKey=F$F,this._lastTime=F$k.now(),F$b.timer.frameLoop(1,this,this._update)}},F$F._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var F$e in this._tweenDic)(F$F=this._tweenDic[F$e]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var F$F,F$a=F$k.now(),F$o=F$a-this._lastTime,F$E=this._currTime+=F$o*this.scale;for(F$e in this._lastTime=F$a,this._tweenDic)(F$F=this._tweenDic[F$e])._updateEase(F$E);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var F$s=this._tweenDataList[this._index];F$E>=F$s.startTime&&(this._index++,0==F$s.type?(this._gidIndex++,(F$F=F$X.getItemByClass("tween",F$i))._create(F$s.target,F$s.data,F$s.duration,F$s.ease,F$$.create(this,this._animComplete,[this._gidIndex]),0,!1,F$s.isTo,!0,!1),F$F.setStartTime(F$E),F$F.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=F$F)._updateEase(F$E)):this.event("label",F$s.data))}},F$F._animComplete=function(F$e){this._tweenDic[F$e]&&delete this._tweenDic[F$e]},F$F._complete=function(){this.event("complete")},F$F.reset=function(){var F$e;if(this._labelDic)for(F$e in this._labelDic)delete this._labelDic[F$e];for(F$e in this._tweenDic)this._tweenDic[F$e].clear(),delete this._tweenDic[F$e];for(F$e in this._firstTweenDic)delete this._firstTweenDic[F$e];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var F$F,F$a=0;for(F$F=this._tweenDataList.length,F$a=0;F$a<F$F;F$a++)this._tweenDataList[F$a]&&this._tweenDataList[F$a].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,F$b.timer.clear(this,this._update)},F$F.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},F$I(0,F$F,"index",function(){return this._frameIndex},function(F$e){this._frameIndex=F$e,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),F$I(0,F$F,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),F$s.to=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=0),(new F$s).to(F$e,F$F,F$a,F$o,F$E)},F$s.from=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$E&&(F$E=0),(new F$s).from(F$e,F$F,F$a,F$o,F$E)},F$s.__init$=function(){F$_=function(){function F$e(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return F$g(F$e,""),F$e.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,F$X.recover("tweenData",this)},F$e}()},F$s}(),F$ne=function(F$E){function F$a(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,F$a.__super.call(this),this._style=F$_.EMPTY}F$g(F$a,"laya.display.Sprite",F$E);var F$e=F$a.prototype;return F$b.imps(F$e,{"laya.display.ILayout":!0}),F$e.createConchModel=function(){return new ConchNode},F$e.destroy=function(F$e){if(void 0===F$e&&(F$e=!0),this._releaseMem(),!this._destroyed){this.filters=null;var F$F=this.mask;F$F&&(this.mask=null,F$F.destroy(F$e))}F$E.prototype.destroy.call(this,F$e),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},F$e.updateZOrder=function(){F$Q.updateOrder(this._childs)&&this.repaint()},F$e.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},F$e.setBounds=function(F$e){this._set$P("uBounds",F$e)},F$e.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new F$B),F$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},F$e.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new F$B),F$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},F$e._boundPointsToParent=function(F$e){void 0===F$e&&(F$e=!1);var F$F=0,F$a=0;this._style&&(F$F=this._style._tf.translateX,F$a=this._style._tf.translateY,F$e=F$e||0!==this._style._tf.rotate,this._style.scrollRect&&(F$F+=this._style.scrollRect.x,F$a+=this._style.scrollRect.y));var F$o=this._getBoundPointsM(F$e);if(!F$o||F$o.length<1)return F$o;if(8!=F$o.length&&(F$o=F$e?F$D.scanPList(F$o):F$B._getWrapRec(F$o,F$B.TEMP)._getBoundPoints()),!this.transform)return F$Q.transPointList(F$o,this._x-F$F,this._y-F$a),F$o;var F$E=F$L.TEMP,F$s=0,F$Y=F$o.length;for(F$s=0;F$s<F$Y;F$s+=2)F$E.x=F$o[F$s],F$E.y=F$o[F$s+1],this.toParentPoint(F$E),F$o[F$s]=F$E.x,F$o[F$s+1]=F$E.y;return F$o},F$e.getGraphicBounds=function(F$e){return void 0===F$e&&(F$e=!1),this._graphics?this._graphics.getBounds(F$e):F$B.TEMP.setTo(0,0,0,0)},F$e._getBoundPointsM=function(F$e){if(void 0===F$e&&(F$e=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var F$F=F$Q.clearArray(this._$P.temBM),F$a=F$B.TEMP;return F$a.copyFrom(this.scrollRect),F$Q.concatArray(F$F,F$a._getBoundPoints()),F$F}for(var F$o,F$E,F$s,F$Y=this._graphics?this._graphics.getBoundPoints():F$Q.clearArray(this._$P.temBM),F$_=0,F$R=(F$s=this._childs).length;F$_<F$R;F$_++)(F$o=F$s[F$_])instanceof laya.display.Sprite&&1==F$o.visible&&(F$E=F$o._boundPointsToParent(F$e))&&(F$Y=F$Y?F$Q.concatArray(F$Y,F$E):F$E);return F$Y},F$e.getStyle=function(){return this._style===F$_.EMPTY&&(this._style=new F$_),this._style},F$e.setStyle=function(F$e){this._style=F$e},F$e._adjustTransform=function(){this._tfChanged=!1;var F$e,F$F=this._style._tf,F$a=F$F.scaleX,F$o=F$F.scaleY;if(F$F.rotate||1!==F$a||1!==F$o||F$F.skewX||F$F.skewY){(F$e=this._transform||(this._transform=F$A.create())).bTransform=!0;var F$E=.0174532922222222*(F$F.rotate-F$F.skewX),F$s=.0174532922222222*(F$F.rotate+F$F.skewY),F$Y=Math.cos(F$s),F$_=Math.sin(F$s),F$R=Math.sin(F$E),F$H=Math.cos(F$E);return F$e.a=F$a*F$Y,F$e.b=F$a*F$_,F$e.c=-F$o*F$R,F$e.d=F$o*F$H,F$e.tx=F$e.ty=0,F$e}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,F$e},F$e.pos=function(F$e,F$F,F$a){if(void 0===F$a&&(F$a=!1),this._x!==F$e||this._y!==F$F){if(this.destroyed)return this;if(F$a){this._x=F$e,this._y=F$F,this.conchModel&&this.conchModel.pos(this._x,this._y);var F$o=this._parent;F$o&&0===F$o._repaint&&(F$o._repaint=1,F$o.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=F$e,this.y=F$F}return this},F$e.pivot=function(F$e,F$F){return this.pivotX=F$e,this.pivotY=F$F,this},F$e.size=function(F$e,F$F){return this.width=F$e,this.height=F$F,this},F$e.scale=function(F$e,F$F,F$a){void 0===F$a&&(F$a=!1);var F$o=this.getStyle(),F$E=F$o._tf;if(F$E.scaleX!=F$e||F$E.scaleY!=F$F){if(this.destroyed)return this;if(F$a){F$o.setScale(F$e,F$F),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$e,F$F),this._renderType|=4;var F$s=this._parent;F$s&&0===F$s._repaint&&(F$s._repaint=1,F$s.parentRepaint())}else this.scaleX=F$e,this.scaleY=F$F}return this},F$e.skew=function(F$e,F$F){return this.skewX=F$e,this.skewY=F$F,this},F$e.render=function(F$e,F$F,F$a){F$W.spriteCount++,F$T.renders[this._renderType]._fun(this,F$e,F$F+this._x,F$a+this._y),this._repaint=0},F$e.drawToCanvas=function(F$e,F$F,F$a,F$o){if(F$Z.isConchNode){var F$E=F$ye.create("2D");return new F$z(F$e,F$F,F$E).ctx.setCanvasType(1),this.conchModel.drawToCanvas(F$E.source,F$a,F$o),F$E}return F$G.drawToCanvas(this,this._renderType,F$e,F$F,F$a,F$o)},F$e.customRender=function(F$e,F$F,F$a){this._renderType|=1024},F$e._applyFilters=function(){var F$e;if(!F$Z.isWebGL&&((F$e=this._$P.filters)&&!(F$e.length<1)))for(var F$F=0,F$a=F$e.length;F$F<F$a;F$F++)F$e[F$F].action.apply(this._$P.cacheCanvas)},F$e._isHaveGlowFilter=function(){var F$e,F$F=0;if(this.filters)for(F$F=0;F$F<this.filters.length;F$F++)if(8==this.filters[F$F].type)return!0;for(F$F=0,F$e=this._childs.length;F$F<F$e;F$F++)if(this._childs[F$F]._isHaveGlowFilter())return!0;return!1},F$e.localToGlobal=function(F$e,F$F){void 0===F$F&&(F$F=!1),!0===F$F&&(F$e=new F$L(F$e.x,F$e.y));for(var F$a=this;F$a&&F$a!=F$b.stage;)F$e=F$a.toParentPoint(F$e),F$a=F$a.parent;return F$e},F$e.globalToLocal=function(F$e,F$F){void 0===F$F&&(F$F=!1),F$F&&(F$e=new F$L(F$e.x,F$e.y));for(var F$a=this,F$o=[];F$a&&F$a!=F$b.stage;)F$o.push(F$a),F$a=F$a.parent;for(var F$E=F$o.length-1;0<=F$E;)F$e=(F$a=F$o[F$E]).fromParentPoint(F$e),F$E--;return F$e},F$e.toParentPoint=function(F$e){if(!F$e)return F$e;F$e.x-=this.pivotX,F$e.y-=this.pivotY,this.transform&&this._transform.transformPoint(F$e),F$e.x+=this._x,F$e.y+=this._y;var F$F=this._style.scrollRect;return F$F&&(F$e.x-=F$F.x,F$e.y-=F$F.y),F$e},F$e.fromParentPoint=function(F$e){if(!F$e)return F$e;F$e.x-=this._x,F$e.y-=this._y;var F$F=this._style.scrollRect;return F$F&&(F$e.x+=F$F.x,F$e.y+=F$F.y),this.transform&&this._transform.invertTransformPoint(F$e),F$e.x+=this.pivotX,F$e.y+=this.pivotY,F$e},F$e.on=function(F$e,F$F,F$a,F$o){return 1!==this._mouseEnableState&&this.isMouseEvent(F$e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$e,F$F,F$a,F$o,!1)):F$E.prototype.on.call(this,F$e,F$F,F$a,F$o)},F$e.once=function(F$e,F$F,F$a,F$o){return 1!==this._mouseEnableState&&this.isMouseEvent(F$e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$e,F$F,F$a,F$o,!0)):F$E.prototype.once.call(this,F$e,F$F,F$a,F$o)},F$e._$2__onDisplay=function(){if(1!==this._mouseEnableState){var F$e=this;for(F$e=F$e.parent;F$e&&1!==F$e._mouseEnableState&&!F$e._getBit(2);)F$e.mouseEnabled=!0,F$e._setBit(2,!0),F$e=F$e.parent}},F$e.loadImage=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=this;return void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),this.graphics.loadImage(F$e,F$F,F$a,F$o,F$E,function(F$e){F$Y.destroyed||(F$Y.size(F$F+(F$o||F$e.width),F$a+(F$E||F$e.height)),F$Y.repaint(),F$s&&F$s.runWith(F$e))}),this},F$e.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},F$e._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},F$e._childChanged=function(F$e){this._childs.length?this._renderType|=2048:this._renderType&=-2049,F$e&&this._get$P("hasZorder")&&F$b.timer.callLater(this,this.updateZOrder),this.repaint()},F$e.parentRepaint=function(){var F$e=this._parent;F$e&&0===F$e._repaint&&(F$e._repaint=1,F$e.parentRepaint())},F$e.startDrag=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){void 0===F$F&&(F$F=!1),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=300),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=.92),this._$P.dragging||this._set$P("dragging",new F$u),this._$P.dragging.start(this,F$e,F$F,F$a,F$o,F$E,F$s,F$Y)},F$e.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},F$e._releaseMem=function(){if(this._$P){var F$e=this._$P.cacheCanvas;F$e&&F$e.ctx&&(F$X.recover("RenderContext",F$e.ctx),F$e.ctx.canvas.size(0,0),F$e.ctx=null);var F$F=this._$P._filterCache;F$F&&(F$F.destroy(),F$F.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},F$e._setDisplay=function(F$e){F$e||this._releaseMem(),F$E.prototype._setDisplay.call(this,F$e)},F$e.hitTestPoint=function(F$e,F$F){var F$a=this.globalToLocal(F$L.TEMP.setTo(F$e,F$F));return F$e=F$a.x,F$F=F$a.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?F$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(F$e,F$F)},F$e.getMousePoint=function(){return this.globalToLocal(F$L.TEMP.setTo(F$b.stage.mouseX,F$b.stage.mouseY))},F$e._getWords=function(){return null},F$e._addChildsToLayout=function(F$e){var F$F=this._getWords();if(null==F$F&&0==this._childs.length)return!1;if(F$F)for(var F$a=0,F$o=F$F.length;F$a<F$o;F$a++)F$e.push(F$F[F$a]);F$a=0;for(var F$E=this._childs.length;F$a<F$E;++F$a){var F$s=this._childs[F$a];F$s._style._enableLayout()&&F$s._addToLayout(F$e)}return!0},F$e._addToLayout=function(F$e){this._style.absolute||(this._style.block?F$e.push(this):this._addChildsToLayout(F$e)&&(this.x=this.y=0))},F$e._isChar=function(){return!1},F$e._getCSSStyle=function(){return this._style.getCSSStyle()},F$e._setAttributes=function(F$e,F$F){switch(F$e){case"x":this.x=parseFloat(F$F);break;case"y":this.y=parseFloat(F$F);break;case"width":this.width=parseFloat(F$F);break;case"height":this.height=parseFloat(F$F);break;default:this[F$e]=F$F}},F$e._layoutLater=function(){this.parent&&this.parent._layoutLater()},F$I(0,F$e,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(F$e){this._optimizeScrollRect!=F$e&&(this._optimizeScrollRect=F$e,this.conchModel&&this.conchModel.optimizeScrollRect(F$e))}),F$I(0,F$e,"customRenderEnable",null,function(F$e){if(F$e&&(this._renderType|=1024,F$Z.isConchNode)){F$a.CustomList.push(this);var F$F=new F$ye("2d");F$F._setContext(new CanvasRenderingContext2D),this.customContext=new F$z(0,0,F$F),F$F.context.setCanvasType&&F$F.context.setCanvasType(2),this.conchModel.custom(F$F.context)}}),F$I(0,F$e,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(F$e){this.cacheAs=F$e?this._$P.hasFilter?"none":"normal":"none"}),F$I(0,F$e,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(F$e){var F$F=this._$P.cacheCanvas;if(F$e!==(F$F?F$F.type:"none")){if("none"!==F$e)this._getBit(1)||this._setUpNoticeType(1),F$F||(F$F=this._set$P("cacheCanvas",F$X.getItemByClass("cacheCanvas",Object))),F$F.type=F$e,F$F.reCache=!0,this._renderType|=16,"bitmap"==F$e&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(F$F){var F$a=F$F;F$a&&F$a.ctx&&(F$X.recover("RenderContext",F$a.ctx),F$a.ctx.canvas.size(0,0),F$a.ctx=null),F$X.recover("cacheCanvas",F$F)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),F$I(0,F$e,"zOrder",function(){return this._zOrder},function(F$e){this._zOrder!=F$e&&(this._zOrder=F$e,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(F$e),this._parent&&(F$e&&this._parent._set$P("hasZorder",!0),F$b.timer.callLater(this._parent,this.updateZOrder)))}),F$I(0,F$e,"rotation",function(){return this._style._tf.rotate},function(F$e){var F$F=this.getStyle();if(F$F._tf.rotate!==F$e){F$F.setRotate(F$e),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(F$e),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}}),F$I(0,F$e,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$e){this._width!==F$e&&(this._width=F$e,this.conchModel&&this.conchModel.size(F$e,this._height),this.repaint())}),F$I(0,F$e,"x",function(){return this._x},function(F$e){if(this._x!==F$e){if(this.destroyed)return;this._x=F$e,this.conchModel&&this.conchModel.pos(F$e,this._y);var F$F=this._parent;F$F&&0===F$F._repaint&&(F$F._repaint=1,F$F.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$I(0,F$e,"globalScaleY",function(){for(var F$e=1,F$F=this;F$F&&F$F!==F$b.stage;)F$e*=F$F.scaleY,F$F=F$F.parent;return F$e}),F$I(0,F$e,"hitArea",function(){return this._$P.hitArea},function(F$e){this._set$P("hitArea",F$e)}),F$I(0,F$e,"staticCache",function(){return this._$P.staticCache},function(F$e){this._set$P("staticCache",F$e),F$e||this.reCache()}),F$I(0,F$e,"texture",function(){return this._texture},function(F$e){this._texture!=F$e&&(this._texture=F$e,this.graphics.cleanByTexture(F$e,0,0))}),F$I(0,F$e,"y",function(){return this._y},function(F$e){if(this._y!==F$e){if(this.destroyed)return;this._y=F$e,this.conchModel&&this.conchModel.pos(this._x,F$e);var F$F=this._parent;F$F&&0===F$F._repaint&&(F$F._repaint=1,F$F.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$I(0,F$e,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$e){this._height!==F$e&&(this._height=F$e,this.conchModel&&this.conchModel.size(this._width,F$e),this.repaint())}),F$I(0,F$e,"blendMode",function(){return this._style.blendMode},function(F$e){this.getStyle().blendMode=F$e,this.conchModel&&this.conchModel.blendMode(F$e),F$e&&"source-over"!=F$e?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),F$I(0,F$e,"scaleX",function(){return this._style._tf.scaleX},function(F$e){var F$F=this.getStyle();if(F$F._tf.scaleX!==F$e){F$F.setScaleX(F$e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$e,F$F._tf.scaleY),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}}),F$I(0,F$e,"scaleY",function(){return this._style._tf.scaleY},function(F$e){var F$F=this.getStyle();if(F$F._tf.scaleY!==F$e){F$F.setScaleY(F$e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$F._tf.scaleX,F$e),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}}),F$I(0,F$e,"stage",function(){return F$b.stage}),F$I(0,F$e,"skewX",function(){return this._style._tf.skewX},function(F$e){var F$F=this.getStyle();if(F$F._tf.skewX!==F$e){F$F.setSkewX(F$e),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$e,F$F._tf.skewY),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}}),F$I(0,F$e,"scrollRect",function(){return this._style.scrollRect},function(F$e){this.getStyle().scrollRect=F$e,this.repaint(),F$e?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(F$e.x,F$e.y,F$e.width,F$e.height)):(this._renderType&=-129,this.conchModel&&(F$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),F$I(0,F$e,"skewY",function(){return this._style._tf.skewY},function(F$e){var F$F=this.getStyle();if(F$F._tf.skewY!==F$e){F$F.setSkewY(F$e),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$F._tf.skewX,F$e),this._renderType|=4;var F$a=this._parent;F$a&&0===F$a._repaint&&(F$a._repaint=1,F$a.parentRepaint())}}),F$I(0,F$e,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(F$e){this._tfChanged=!1,(this._transform=F$e)&&(this._x=F$e.tx,this._y=F$e.ty,F$e.tx=F$e.ty=0,this.conchModel&&this.conchModel.transform(F$e.a,F$e.b,F$e.c,F$e.d,this._x,this._y)),F$e?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),F$I(0,F$e,"pivotX",function(){return this._style._tf.translateX},function(F$e){this.getStyle().setTranslateX(F$e),this.conchModel&&this.conchModel.pivot(F$e,this._style._tf.translateY),this.repaint()}),F$I(0,F$e,"pivotY",function(){return this._style._tf.translateY},function(F$e){this.getStyle().setTranslateY(F$e),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,F$e),this.repaint()}),F$I(0,F$e,"alpha",function(){return this._style.alpha},function(F$e){this._style&&this._style.alpha!==F$e&&(F$e=F$e<0?0:1<F$e?1:F$e,this.getStyle().alpha=F$e,this.conchModel&&this.conchModel.alpha(F$e),1!==F$e?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),F$I(0,F$e,"visible",function(){return this._style.visible},function(F$e){this._style&&this._style.visible!==F$e&&(this.getStyle().visible=F$e,this.conchModel&&this.conchModel.visible(F$e),this.parentRepaint())}),F$I(0,F$e,"graphics",function(){return this._graphics||(this.graphics=F$G.createGraphics())},function(F$e){this._graphics&&(this._graphics._sp=null),(this._graphics=F$e)?(this._renderType&=-2,this._renderType|=512,(F$e._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(F$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),F$I(0,F$e,"filters",function(){return this._$P.filters},function(F$e){F$e&&0===F$e.length&&(F$e=null),this._$P.filters!=F$e&&(this._set$P("filters",F$e?F$e.slice():null),F$Z.isConchApp&&(this.conchModel&&(F$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),F$Z.isWebGL&&(F$e&&F$e.length?this._renderType|=32:this._renderType&=-33),F$e&&0<F$e.length?(this._getBit(1)||this._setUpNoticeType(1),F$Z.isWebGL&&1==F$e.length&&F$e[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(F$Z.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),F$I(0,F$e,"parent",F$E.prototype._$get_parent,function(F$e){F$b.superSet(F$ee,this,"parent",F$e),F$e&&this._getBit(2)&&this._$2__onDisplay()}),F$I(0,F$e,"mask",function(){return this._$P._mask},function(F$e){F$e&&this.mask&&this.mask._$P.maskParent||(F$e?(this.cacheAs="bitmap",this._set$P("_mask",F$e),F$e._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",F$e),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(F$e?F$e.conchModel:null),this._renderType|=64,this.parentRepaint())}),F$I(0,F$e,"mouseEnabled",function(){return 1<this._mouseEnableState},function(F$e){this._mouseEnableState=F$e?2:1}),F$I(0,F$e,"globalScaleX",function(){for(var F$e=1,F$F=this;F$F&&F$F!==F$b.stage;)F$e*=F$F.scaleX,F$F=F$F.parent;return F$e}),F$I(0,F$e,"mouseX",function(){return this.getMousePoint().x}),F$I(0,F$e,"mouseY",function(){return this.getMousePoint().y}),F$a.fromImage=function(F$e){return(new F$a).loadImage(F$e)},F$a._cachePool=[],F$a.CustomList=[],F$R(F$a,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=F$Y.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),F$a}(F$ee),F$Oe=function(F$e){function F$F(F$e){this._audio=null,this._onEnd=null,this._resumePlay=null,F$F.__super.call(this),this._onEnd=F$Q.bind(this.__onEnd,this),this._resumePlay=F$Q.bind(this.__resumePlay,this),F$e.addEventListener("ended",this._onEnd),this._audio=F$e}F$g(F$F,"laya.media.h5audio.AudioSoundChannel",F$oe);var F$a=F$F.prototype;return F$a.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(F$b.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$a.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,F$k.container.appendChild(this._audio),this._audio.play()}catch(F$e){this.event("error")}},F$a.play=function(F$e){this.isStopped=!1;try{this._audio.playbackRate=F$V.playbackRate,this._audio.currentTime=this.startTime}catch(F$e){return void this._audio.addEventListener("canplay",this._resumePlay)}F$V.addChannel(this),F$k.container.appendChild(this._audio),!F$e&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},F$a.stop=function(){this.isStopped=!0,F$V.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&F$Z.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),F$k.onIE||this._audio!=F$ae._musicAudio&&F$X.recover("audio:"+this.url,this._audio),F$k.removeElement(this._audio),this._audio=null)},F$a.pause=function(){this.isStopped=!0,F$V.removeChannel(this),"pause"in this._audio&&this._audio.pause()},F$a.resume=function(){this._audio&&(this.isStopped=!1,F$V.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},F$I(0,F$a,"position",function(){return this._audio?this._audio.currentTime:0}),F$I(0,F$a,"duration",function(){return this._audio?this._audio.duration:0}),F$I(0,F$a,"volume",function(){return this._audio?this._audio.volume:1},function(F$e){this._audio&&(this._audio.volume=F$e)}),F$F}(),F$qe=function(F$e){function F$F(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=F$se.ctx,F$F.__super.call(this),this._onPlayEnd=F$Q.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}F$g(F$F,"laya.media.webaudio.WebAudioSoundChannel",F$oe);var F$a=F$F.prototype;return F$a.play=function(F$e){if(F$V.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var F$F=this.context,F$a=this.gain,F$o=F$F.createBufferSource();(this.bufferSource=F$o).buffer=this.audioBuffer,F$o.connect(F$a),F$a&&F$a.disconnect(),F$a.connect(F$F.destination),F$o.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=F$k.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(F$o.loop=!0),F$o.playbackRate.setTargetAtTime?F$o.playbackRate.setTargetAtTime(F$V.playbackRate,this.context.currentTime,.1):F$o.playbackRate.value=F$V.playbackRate,F$o.start(0,this.startTime),!F$e&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},F$a.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(F$b.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$a._clearBufferSource=function(){if(this.bufferSource){var F$e=this.bufferSource;F$e.stop?F$e.stop(0):F$e.noteOff(0),F$e.disconnect(0),F$e.onended=null,F$F._tryCleanFailed||this._tryClearBuffer(F$e),this.bufferSource=null}},F$a._tryClearBuffer=function(F$e){try{F$e.buffer=null}catch(F$e){F$F._tryCleanFailed=!0}},F$a.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,F$V.removeChannel(this),this.startHandler=null,this.completeHandler=null},F$a.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,F$V.removeChannel(this)},F$a.resume=function(){this.startTime=this._pauseTime,this.play(!1)},F$I(0,F$a,"position",function(){return this.bufferSource?(F$k.now()-this._startTime)/1e3+this.startTime:0}),F$I(0,F$a,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$I(0,F$a,"volume",function(){return this._volume},function(F$e){this.isStopped||(this._volume=F$e,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(F$e,this.context.currentTime,.1):this.gain.gain.value=F$e)}),F$F._tryCleanFailed=!1,F$F}(),F$Ie=function(F$e){function F$F(){F$F.__super.call(this),this._w=0,this._h=0}F$g(F$F,"laya.resource.Bitmap",F$He);var F$a=F$F.prototype;return F$I(0,F$a,"width",function(){return this._w}),F$I(0,F$a,"height",function(){return this._h}),F$I(0,F$a,"source",function(){return this._source}),F$F}(),F$le=function(F$F){function F$e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,F$e.__super.call(this),this._interval=F$o.animationInterval,this._setUpNoticeType(1)}F$g(F$e,"laya.display.AnimationPlayerBase",F$F);var F$a=F$e.prototype;return F$a.play=function(F$e,F$F,F$a,F$o){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=!0),void 0===F$a&&(F$a=""),void 0===F$o&&(F$o=!0),this._isPlaying=!0,this.index="string"==typeof F$e?this._getFrameByLabel(F$e):F$e,this.loop=F$F,this._actionName=F$a,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$a._getFrameByLabel=function(F$e){var F$F=0;for(F$F=0;F$F<this._count;F$F++)if(this._labels[F$F]&&0<=this._labels[F$F].indexOf(F$e))return F$F;return 0},F$a._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},F$a._setControlNode=function(F$e){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=F$e)&&F$e!=this&&(F$e.on("display",this,this._checkResumePlaying),F$e.on("undisplay",this,this._checkResumePlaying))},F$a._setDisplay=function(F$e){F$F.prototype._setDisplay.call(this,F$e),this._checkResumePlaying()},F$a._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},F$a.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},F$a.addLabel=function(F$e,F$F){this._labels||(this._labels={}),this._labels[F$F]||(this._labels[F$F]=[]),this._labels[F$F].push(F$e)},F$a.removeLabel=function(F$e){if(F$e){if(this._labels)for(var F$F in this._labels)this._removeLabelFromLabelList(this._labels[F$F],F$e)}else this._labels=null},F$a._removeLabelFromLabelList=function(F$e,F$F){if(F$e)for(var F$a=F$e.length-1;0<=F$a;F$a--)F$e[F$a]==F$F&&F$e.splice(F$a,1)},F$a.gotoAndStop=function(F$e){this.index="string"==typeof F$e?this._getFrameByLabel(F$e):F$e,this.stop()},F$a._displayToIndex=function(F$e){},F$a.clear=function(){this.stop(),this._labels=null},F$I(0,F$a,"interval",function(){return this._interval},function(F$e){this._interval!=F$e&&(this._frameRateChanged=!0,this._interval=F$e,this._isPlaying&&0<F$e&&this.timerLoop(F$e,this,this._frameLoop,null,!0,!0))}),F$I(0,F$a,"isPlaying",function(){return this._isPlaying}),F$I(0,F$a,"index",function(){return this._index},function(F$e){if(this._index=F$e,this._displayToIndex(F$e),this._labels&&this._labels[F$e])for(var F$F=this._labels[F$e],F$a=0,F$o=F$F.length;F$a<F$o;F$a++)this.event("label",F$F[F$a])}),F$I(0,F$a,"count",function(){return this._count}),F$e.WRAP_POSITIVE=0,F$e.WRAP_REVERSE=1,F$e.WRAP_PINGPONG=2,F$e}(F$ne),F$Pe=function(F$F){function F$q(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,F$q.__super.call(this),this.overflow=F$q.VISIBLE,this._style=new F$Fe(this),this._style.wordWrap=!1}F$g(F$q,"laya.display.Text",F$F);var F$e=F$q.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._lines=null,this._words&&(this._words.length=0,this._words=null)},F$e._getBoundPointsM=function(F$e){void 0===F$e&&(F$e=!1);var F$F=F$B.TEMP;return F$F.setTo(0,0,this.width,this.height),F$F._getBoundPoints()},F$e.getGraphicBounds=function(F$e){void 0===F$e&&(F$e=!1);var F$F=F$B.TEMP;return F$F.setTo(0,0,this.width,this.height),F$F},F$e._getCSSStyle=function(){return this._style},F$e.lang=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g){if(F$e=F$q.langPacks&&F$q.langPacks[F$e]?F$q.langPacks[F$e]:F$e,arguments.length<2)this._text=F$e;else{for(var F$n=0,F$O=arguments.length;F$n<F$O;F$n++)F$e=F$e.replace("{"+F$n+"}",arguments[F$n+1]);this._text=F$e}},F$e._isPassWordMode=function(){var F$e=this._style.password;return"prompt"in this&&this.prompt==this._text&&(F$e=!1),F$e},F$e._getPassWordTxt=function(F$e){var F$F;F$F="";for(var F$a=F$e.length;0<F$a;F$a--)F$F+="●";return F$F},F$e.renderText=function(F$e,F$F){var F$a=this.graphics;F$a.clear(!0);var F$o=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(F$k.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);F$k.context.font=F$o;var F$E=this.padding,F$s=F$E[3],F$Y="left",F$_=this._lines,F$R=this.leading+this._charSize.height,F$H=this._currBitmapFont;F$H&&(F$R=this.leading+F$H.getMaxHeight());var F$g=F$E[0];if(!F$H&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(F$Y="right",F$s=this._width-F$E[1]):"center"==this.align&&(F$Y="center",F$s=.5*this._width+F$E[3]-F$E[1])),0<this._height){var F$n=this._textHeight>this._height?"top":this.valign;"middle"===F$n?F$g=.5*(this._height-F$F*F$R)+F$E[0]-F$E[2]:"bottom"===F$n&&(F$g=this._height-F$F*F$R-F$E[2])}var F$O=this._style;if(F$H&&F$H.autoScaleSize)var F$q=F$H.fontSize/this.fontSize;if(this._clipPoint)if(F$a.save(),F$H&&F$H.autoScaleSize){var F$I=0,F$l=0;F$I=this._width?this._width-F$E[3]-F$E[1]:this._textWidth,F$l=this._height?this._height-F$E[0]-F$E[2]:this._textHeight,F$I*=F$q,F$l*=F$q,F$a.clipRect(F$E[3],F$E[0],F$I,F$l)}else F$a.clipRect(F$E[3],F$E[0],this._width?this._width-F$E[3]-F$E[1]:this._textWidth,this._height?this._height-F$E[0]-F$E[2]:this._textHeight);var F$P=F$O.password;"prompt"in this&&this.prompt==this._text&&(F$P=!1);for(var F$j=0,F$$=0,F$y=Math.min(this._lines.length,F$F+F$e)||1,F$M=F$e;F$M<F$y;F$M++){var F$D,F$m=F$_[F$M];if(F$P){var F$b=F$m.length;F$m="";for(var F$L=F$b;0<F$L;F$L--)F$m+="●"}if(F$j=F$s-(this._clipPoint?this._clipPoint.x:0),F$$=F$g+F$R*F$M-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(F$Y,F$j,F$$,F$M),F$H){var F$B=this.width;F$H.autoScaleSize&&(F$B=this.width*F$q),F$H.drawText(F$m,this,F$j,F$$,this.align,F$B)}else F$Z.isWebGL?(this._words||(this._words=[]),(F$D=this._words.length>F$M-F$e?this._words[F$M-F$e]:new F$h).setText(F$m)):F$D=F$m,F$O.stroke?F$a.fillBorderText(F$D,F$j,F$$,F$o,this.color,F$O.strokeColor,F$O.stroke,F$Y):F$a.fillText(F$D,F$j,F$$,F$o,this.color,F$Y)}if(F$H&&F$H.autoScaleSize){var F$v=1/F$q;this.scale(F$v,F$v)}this._clipPoint&&F$a.restore(),this._startX=F$s,this._startY=F$g},F$e.drawUnderline=function(F$e,F$F,F$a,F$o){var F$E=this._lineWidths[F$o];switch(F$e){case"center":F$F-=F$E/2;break;case"right":F$F-=F$E}F$a+=this._charSize.height,this._graphics.drawLine(F$F,F$a,F$F+F$E,F$a,this.underlineColor||this.color,1)},F$e.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);F$k.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new F$L(0,0)):this._clipPoint=null;var F$e=this._lines.length;if(this.overflow!=F$q.VISIBLE){var F$F=this.overflow==F$q.HIDDEN?Math.floor:Math.ceil;F$e=Math.min(F$e,F$F((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var F$a=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(F$a,F$e),this.repaint()},F$e.evalTextSize=function(){var F$e,F$F=NaN;F$e=Math.max.apply(this,this._lineWidths),F$F=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],F$e==this._textWidth&&F$F==this._textHeight||(this._textWidth=F$e,this._textHeight=F$F,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},F$e.checkEnabledViewportOrNot=function(){return this.overflow==F$q.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},F$e.changeText=function(F$e){this._text!==F$e&&(this.lang(F$e+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},F$e.parseLines=function(F$e){var F$F=this.wordWrap||this.overflow==F$q.HIDDEN;if(F$F)var F$a=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var F$o=F$Q.contextMeasureText(F$q._testWord);F$Z.isConchApp&&0===F$o.width&&0===F$o.height&&(F$o=F$Q.contextMeasureText("W")),this._charSize.width=F$o.width,this._charSize.height=F$o.height||this.fontSize}for(var F$E=F$e.replace(/\r\n/g,"\n").split("\n"),F$s=0,F$Y=F$E.length;F$s<F$Y;F$s++){var F$_=F$E[F$s];F$F?this.parseLine(F$_,F$a):(this._lineWidths.push(this.getTextWidth(F$_)),this._lines.push(F$_))}},F$e.parseLine=function(F$e,F$F){F$k.context;var F$a,F$o=this._lines,F$E=0,F$s=NaN,F$Y=NaN,F$_=0;if((F$s=this.getTextWidth(F$e))<=F$F)return F$o.push(F$e),void this._lineWidths.push(F$s);F$s=this._charSize.width,0==(F$E=Math.floor(F$F/F$s))&&(F$E=1),F$Y=F$s=this.getTextWidth(F$e.substring(0,F$E));for(var F$R=F$E,F$H=F$e.length;F$R<F$H;F$R++)if(F$F<(F$Y+=F$s=this.getTextWidth(F$e.charAt(F$R))))if(this.wordWrap){var F$g=F$e.substring(F$_,F$R);if(F$g.charCodeAt(F$g.length-1)<255?(F$a=/(?:\w|-)+$/.exec(F$g))&&(F$R=F$a.index+F$_,0==F$a.index?F$R+=F$g.length:F$g=F$e.substring(F$_,F$R)):F$q.RightToLeft&&(F$a=/([\u0600-\u06FF])+$/.exec(F$g))&&(F$R=F$a.index+F$_,0==F$a.index?F$R+=F$g.length:F$g=F$e.substring(F$_,F$R)),F$o.push(F$g),this._lineWidths.push(F$Y-F$s),!((F$_=F$R)+F$E<F$H)){F$o.push(F$e.substring(F$_,F$H)),this._lineWidths.push(this.getTextWidth(F$o[F$o.length-1])),F$_=-1;break}F$R+=F$E,F$Y=F$s=this.getTextWidth(F$e.substring(F$_,F$R)),F$R--}else if(this.overflow==F$q.HIDDEN)return F$o.push(F$e.substring(0,F$R)),void this._lineWidths.push(this.getTextWidth(F$o[F$o.length-1]));this.wordWrap&&-1!=F$_&&(F$o.push(F$e.substring(F$_,F$H)),this._lineWidths.push(this.getTextWidth(F$o[F$o.length-1])))},F$e.getTextWidth=function(F$e){return this._currBitmapFont?this._currBitmapFont.getTextWidth(F$e):F$Q.contextMeasureText(F$e).width},F$e.getWordWrapWidth=function(){var F$e=this.padding,F$F=NaN;return(F$F=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(F$F=this.wordWrap?100:F$k.width),F$F<=0&&(F$F=100),F$F-F$e[3]-F$e[1]},F$e.getCharPoint=function(F$e,F$F){this._isChanged&&F$b.timer.runCallLater(this,this.typeset);for(var F$a=0,F$o=this._lines,F$E=0,F$s=0,F$Y=F$o.length;F$s<F$Y;F$s++){if(F$e<(F$a+=F$o[F$s].length)){var F$_=F$s;break}F$E=F$a}var F$R=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;F$k.context.font=F$R;var F$H=this.getTextWidth(this._text.substring(F$E,F$e));return(F$F||new F$L).setTo(this._startX+F$H-(this._clipPoint?this._clipPoint.x:0),this._startY+F$_*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},F$I(0,F$e,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(F$e){F$e!=this._width&&(F$b.superSet(F$ne,this,"width",F$e),this.isChanged=!0)}),F$I(0,F$e,"textWidth",function(){return this._isChanged&&F$b.timer.runCallLater(this,this.typeset),this._textWidth}),F$I(0,F$e,"height",function(){return this._height?this._height:this.textHeight},function(F$e){F$e!=this._height&&(F$b.superSet(F$ne,this,"height",F$e),this.isChanged=!0)}),F$I(0,F$e,"textHeight",function(){return this._isChanged&&F$b.timer.runCallLater(this,this.typeset),this._textHeight}),F$I(0,F$e,"padding",function(){return this._getCSSStyle().padding},function(F$e){this._getCSSStyle().padding=F$e,this.isChanged=!0}),F$I(0,F$e,"bold",function(){return this._getCSSStyle().bold},function(F$e){this._getCSSStyle().bold=F$e,this.isChanged=!0}),F$I(0,F$e,"text",function(){return this._text||""},function(F$e){this._text!==F$e&&(this.lang(F$e+""),this.isChanged=!0,this.event("change"))}),F$I(0,F$e,"color",function(){return this._getCSSStyle().color},function(F$e){this._getCSSStyle().color!=F$e&&(this._getCSSStyle().color=F$e,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),F$I(0,F$e,"font",function(){return this._getCSSStyle().fontFamily},function(F$e){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),F$q._bitmapFonts&&F$q._bitmapFonts[F$e]&&(this._currBitmapFont=F$q._bitmapFonts[F$e]),this._getCSSStyle().fontFamily=F$e,this.isChanged=!0}),F$I(0,F$e,"fontSize",function(){return this._getCSSStyle().fontSize},function(F$e){this._getCSSStyle().fontSize=F$e,this.isChanged=!0}),F$I(0,F$e,"italic",function(){return this._getCSSStyle().italic},function(F$e){this._getCSSStyle().italic=F$e,this.isChanged=!0}),F$I(0,F$e,"align",function(){return this._getCSSStyle().align},function(F$e){this._getCSSStyle().align=F$e,this.isChanged=!0}),F$I(0,F$e,"valign",function(){return this._getCSSStyle().valign},function(F$e){this._getCSSStyle().valign=F$e,this.isChanged=!0}),F$I(0,F$e,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(F$e){this._getCSSStyle().wordWrap=F$e,this.isChanged=!0}),F$I(0,F$e,"leading",function(){return this._getCSSStyle().leading},function(F$e){this._getCSSStyle().leading=F$e,this.isChanged=!0}),F$I(0,F$e,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(F$e){this._getCSSStyle().backgroundColor=F$e,this.isChanged=!0}),F$I(0,F$e,"borderColor",function(){return this._getCSSStyle().borderColor},function(F$e){this._getCSSStyle().borderColor=F$e,this.isChanged=!0}),F$I(0,F$e,"stroke",function(){return this._getCSSStyle().stroke},function(F$e){this._getCSSStyle().stroke=F$e,this.isChanged=!0}),F$I(0,F$e,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(F$e){this._getCSSStyle().strokeColor=F$e,this.isChanged=!0}),F$I(0,F$e,"isChanged",null,function(F$e){this._isChanged!==F$e&&(this._isChanged=F$e)&&F$b.timer.callLater(this,this.typeset)}),F$I(0,F$e,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(F$e){if(!(this.overflow!=F$q.SCROLL||this.textWidth<this._width)&&this._clipPoint){F$e=F$e<this.padding[3]?this.padding[3]:F$e;var F$F=this._textWidth-this._width;F$e=F$F<F$e?F$F:F$e;var F$a=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=F$e,this.renderText(this._lastVisibleLineIndex,F$a)}}),F$I(0,F$e,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(F$e){if(!(this.overflow!=F$q.SCROLL||this.textHeight<this._height)&&this._clipPoint){F$e=F$e<this.padding[0]?this.padding[0]:F$e;var F$F=this._textHeight-this._height,F$a=(F$e=F$F<F$e?F$F:F$e)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=F$a;var F$o=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=F$e,this.renderText(F$a,F$o)}}),F$I(0,F$e,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),F$I(0,F$e,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),F$I(0,F$e,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),F$I(0,F$e,"underlineColor",function(){return this._underlineColor},function(F$e){this._underlineColor=F$e,this._isChanged=!0,this.typeset()}),F$q.registerBitmapFont=function(F$e,F$F){F$q._bitmapFonts||(F$q._bitmapFonts={}),F$q._bitmapFonts[F$e]=F$F},F$q.unregisterBitmapFont=function(F$e,F$F){if(void 0===F$F&&(F$F=!0),F$q._bitmapFonts&&F$q._bitmapFonts[F$e]){var F$a=F$q._bitmapFonts[F$e];F$F&&F$a.destroy(),delete F$q._bitmapFonts[F$e]}},F$q.setTextRightToLeft=function(){var F$e;(F$e=F$k.canvas.source.style).display="none",F$e.position="absolute",F$e.direction="rtl",F$Z._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,F$k.document.body.appendChild(F$k.canvas.source)},F$q.supportFont=function(F$e){F$k.context.font="10px sans-serif";var F$F=F$Q.contextMeasureText("abcji").width;F$k.context.font="10px "+F$e;var F$a=F$Q.contextMeasureText("abcji").width;return console.log(F$F,F$a),F$F!==F$a},F$q._testWord="游",F$q.langPacks=null,F$q.VISIBLE="visible",F$q.SCROLL="scroll",F$q.HIDDEN="hidden",F$q.CharacterCache=!0,F$q.RightToLeft=!1,F$q._bitmapFonts=null,F$R(F$q,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),F$q}(F$ne),F$je=function(F$n){function F$Y(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",F$Y.__super.call(this),this.offset=new F$L,this._canvasTransform=new F$A,this._previousOrientation=F$k.window.orientation;var F$F=this;this.transform=F$A.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var F$e=F$k.window,F$a=this;F$e.addEventListener("focus",function(){F$F._isFocused=!0,F$a.event("focus"),F$a.event("focuschange")}),F$e.addEventListener("blur",function(){F$F._isFocused=!1,F$a.event("blur"),F$a.event("focuschange"),F$a._isInputting()&&(F$De.inputElement.target.focus=!1)});var F$o="visibilityState",F$E="visibilitychange",F$s=F$e.document;void 0!==F$s.hidden?(F$E="visibilitychange",F$o="visibilityState"):void 0!==F$s.mozHidden?(F$E="mozvisibilitychange",F$o="mozVisibilityState"):void 0!==F$s.msHidden?(F$E="msvisibilitychange",F$o="msVisibilityState"):void 0!==F$s.webkitHidden&&(F$E="webkitvisibilitychange",F$o="webkitVisibilityState"),F$e.document.addEventListener(F$E,function(){"hidden"==F$k.document[F$o]?F$a._setStageVisible(!1):F$a._setStageVisible(!0)}),F$e.document.addEventListener("qbrowserVisibilityChange",function(F$e){F$a._setStageVisible(!F$e.hidden)}),F$e.addEventListener("resize",function(){var F$e=F$k.window.orientation;null!=F$e&&F$e!=F$F._previousOrientation&&F$a._isInputting()&&(F$De.inputElement.target.focus=!1),F$F._previousOrientation=F$e,F$a._isInputting()||F$a._resetCanvas()}),F$e.addEventListener("orientationchange",function(F$e){F$a._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),F$k.onMobile&&this.on("mousedown",this,this._onmouseMove)}F$g(F$Y,"laya.display.Stage",F$n);var F$e=F$Y.prototype;return F$e._setStageVisible=function(F$e){this._isVisibility!=F$e&&(this._isVisibility=F$e,this._isVisibility||this._isInputting()&&(F$De.inputElement.target.focus=!1),this.event("visibilitychange"))},F$e._isInputting=function(){return F$k.onMobile&&F$De.isInputting},F$e._changeCanvasSize=function(){this.setScreenSize(F$k.clientWidth*F$k.pixelRatio,F$k.clientHeight*F$k.pixelRatio)},F$e._resetCanvas=function(){if(this.screenAdaptationEnabled){var F$e=F$Z._mainCanvas;F$e.source.style;F$e.size(1,1),F$b.timer.once(100,this,this._changeCanvasSize)}},F$e.setScreenSize=function(F$e,F$F){var F$a=!1;if("none"!==this._screenMode&&(F$a=(F$e/F$F<1?"vertical":"horizontal")!==this._screenMode)){var F$o=F$F;F$F=F$e,F$e=F$o}this.canvasRotation=F$a;var F$E=F$Z._mainCanvas,F$s=F$E.source.style,F$Y=this._canvasTransform.identity(),F$_=this._scaleMode,F$R=F$e/this.designWidth,F$H=F$F/this.designHeight,F$g=this.designWidth,F$n=this.designHeight,F$O=F$e,F$q=F$F,F$I=F$k.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,F$_){case"noscale":F$R=F$H=1,F$O=this.designWidth,F$q=this.designHeight;break;case"showall":F$R=F$H=Math.min(F$R,F$H),F$g=F$O=Math.round(this.designWidth*F$R),F$n=F$q=Math.round(this.designHeight*F$H);break;case"noborder":F$R=F$H=Math.max(F$R,F$H),F$O=Math.round(this.designWidth*F$R),F$q=Math.round(this.designHeight*F$H);break;case"full":F$R=F$H=1,this._width=F$g=F$e,this._height=F$n=F$F;break;case"fixedwidth":F$H=F$R,this._height=F$n=Math.round(F$F/F$R);break;case"fixedheight":F$R=F$H,this._width=F$g=Math.round(F$e/F$H);break;case"fixedauto":F$e/F$F<this.designWidth/this.designHeight?(F$H=F$R,this._height=F$n=Math.round(F$F/F$R)):(F$R=F$H,this._width=F$g=Math.round(F$e/F$H))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,F$g=F$g+1&2147483646,F$n=F$n+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),F$R*=this.scaleX,F$H*=this.scaleY,1===F$R&&1===F$H?this.transform.identity():(this.transform.a=this._formatData(F$R/(F$O/F$g)),this.transform.d=this._formatData(F$H/(F$q/F$n)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),F$E.size(F$g,F$n),F$G.changeWebGLSize(F$g,F$n),F$Y.scale(F$O/F$g/F$I,F$q/F$n/F$I),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(F$e-F$O)/F$I:this.offset.x=.5*(F$e-F$O)/F$I,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(F$F-F$q)/F$I:this.offset.y=.5*(F$F-F$q)/F$I,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),F$Y.translate(this.offset.x,this.offset.y),this.canvasDegree=0,F$a&&("horizontal"===this._screenMode?(F$Y.rotate(Math.PI/2),F$Y.translate(F$F/F$I,0),this.canvasDegree=90):(F$Y.rotate(-Math.PI/2),F$Y.translate(0,F$e/F$I),this.canvasDegree=-90)),F$Y.a=this._formatData(F$Y.a),F$Y.d=this._formatData(F$Y.d),F$Y.tx=this._formatData(F$Y.tx),F$Y.ty=this._formatData(F$Y.ty),F$s.transformOrigin=F$s.webkitTransformOrigin=F$s.msTransformOrigin=F$s.mozTransformOrigin=F$s.oTransformOrigin="0px 0px 0px",F$s.transform=F$s.webkitTransform=F$s.msTransform=F$s.mozTransform=F$s.oTransform="matrix("+F$Y.toString()+")",F$Y.translate(parseInt(F$s.left)||0,parseInt(F$s.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},F$e._formatData=function(F$e){return Math.abs(F$e)<1e-6?0:Math.abs(1-F$e)<.001?0<F$e?1:-1:F$e},F$e.getMousePoint=function(){return F$L.TEMP.setTo(this.mouseX,this.mouseY)},F$e.repaint=function(){this._repaint=1},F$e.parentRepaint=function(){},F$e._loop=function(){return this.render(F$Z.context,0,0),!0},F$e._onmouseMove=function(F$e){this._mouseMoveTime=F$k.now()},F$e.getTimeFromFrameStart=function(){return F$k.now()-this._frameStartTime},F$e.render=function(F$e,F$F,F$a){if("sleep"===this._frameRate&&!F$Z.isConchApp){var F$o=F$k.now();if(!(1e3<=F$o-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(F$W.loopCount++,F$l.instance.runEvent(),F$b.timer._update()));this._frameStartTime=F$o}if(this._renderCount++,F$Z.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=F$k.now();var F$E="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),F$s=this._renderCount%2==0;if(F$W.renderSlow=!F$E,F$E||F$s||F$Z.isConchApp){var F$Y;F$W.loopCount++,F$l.instance.runEvent(),F$b.timer._update(),F$G.update3DLoop();var F$_=0,F$R=0;if(F$Z.isConchNode)for(F$_=0,F$R=this._scenes.length;F$_<F$R;F$_++)(F$Y=this._scenes[F$_])&&F$Y._updateSceneConch();else for(F$_=0,F$R=this._scenes.length;F$_<F$R;F$_++)(F$Y=this._scenes[F$_])&&F$Y._updateScene();if(F$Z.isConchNode){var F$H=F$ne.CustomList;for(F$_=0,F$R=F$H.length;F$_<F$R;F$_++){var F$g=F$H[F$_];F$g.customRender(F$g.customContext,0,0)}return}}F$Z.isConchNode||this.renderingEnabled&&(F$E||!F$s||F$Z.isConchWebGL)&&(F$Z.isWebGL?F$Z.WebGL.mainContext&&!F$Z.WebGL.mainContext.isContextLost()&&(F$e.clear(),F$n.prototype.render.call(this,F$e,F$F,F$a),F$W._show&&F$W._sp&&F$W._sp.render(F$e,F$F,F$a),F$G.clear(this._bgColor),F$G.beginFlush(),F$e.flush(),F$G.endFinish(),F$t.instance&&F$t.getInstance().endDispose()):(F$G.clear(this._bgColor),F$n.prototype.render.call(this,F$e,F$F,F$a),F$W._show&&F$W._sp&&F$W._sp.render(F$e,F$F,F$a)))}else this._renderCount%5==0&&(F$W.loopCount++,F$l.instance.runEvent(),F$b.timer._update())},F$e._requestFullscreen=function(){var F$e=F$k.document.documentElement;F$e.requestFullscreen?F$e.requestFullscreen():F$e.mozRequestFullScreen?F$e.mozRequestFullScreen():F$e.webkitRequestFullscreen?F$e.webkitRequestFullscreen():F$e.msRequestFullscreen&&F$e.msRequestFullscreen()},F$e._fullScreenChanged=function(){F$b.stage.event("fullscreenchange")},F$e.exitFullscreen=function(){var F$e=F$k.document;F$e.exitFullscreen?F$e.exitFullscreen():F$e.mozCancelFullScreen?F$e.mozCancelFullScreen():F$e.webkitExitFullscreen&&F$e.webkitExitFullscreen()},F$I(0,F$e,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),F$I(0,F$e,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),F$I(0,F$e,"frameRate",function(){return this._frameRate},function(F$e){if(this._frameRate=F$e,F$Z.isConchApp)switch(this._frameRate){case"slow":F$k.window.conch&&F$k.window.conchConfig.setSlowFrame&&F$k.window.conchConfig.setSlowFrame(!0);break;case"fast":F$k.window.conch&&F$k.window.conchConfig.setSlowFrame&&F$k.window.conchConfig.setSlowFrame(!1);break;case"mouse":F$k.window.conch&&F$k.window.conchConfig.setMouseFrame&&F$k.window.conchConfig.setMouseFrame(2e3);break;case"sleep":F$k.window.conch&&F$k.window.conchConfig.setLimitFPS&&F$k.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),F$I(0,F$e,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),F$I(0,F$e,"width",F$n.prototype._$get_width,function(F$e){this.designWidth=F$e,F$b.superSet(F$ne,this,"width",F$e),F$b.timer.callLater(this,this._changeCanvasSize)}),F$I(0,F$e,"alignH",function(){return this._alignH},function(F$e){this._alignH=F$e,F$b.timer.callLater(this,this._changeCanvasSize)}),F$I(0,F$e,"isFocused",function(){return this._isFocused}),F$I(0,F$e,"height",F$n.prototype._$get_height,function(F$e){this.designHeight=F$e,F$b.superSet(F$ne,this,"height",F$e),F$b.timer.callLater(this,this._changeCanvasSize)}),F$I(0,F$e,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||F$A.create()},F$n.prototype._$set_transform),F$I(0,F$e,"isVisibility",function(){return this._isVisibility}),F$I(0,F$e,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),F$I(0,F$e,"scaleMode",function(){return this._scaleMode},function(F$e){this._scaleMode=F$e,F$b.timer.callLater(this,this._changeCanvasSize)}),F$I(0,F$e,"alignV",function(){return this._alignV},function(F$e){this._alignV=F$e,F$b.timer.callLater(this,this._changeCanvasSize)}),F$I(0,F$e,"bgColor",function(){return this._bgColor},function(F$e){this._bgColor=F$e,this.conchModel&&this.conchModel.bgColor(F$e),F$Z.isWebGL&&(F$e?F$Y._wgColor=F$C.create(F$e)._color:F$k.onMiniGame||(F$Y._wgColor=null)),F$k.onLimixiu?F$Y._wgColor=F$C.create(F$e)._color:F$Z.canvas.style.background=F$e||"none"}),F$I(0,F$e,"mouseX",function(){return Math.round(F$l.instance.mouseX/this.clientScaleX)}),F$I(0,F$e,"mouseY",function(){return Math.round(F$l.instance.mouseY/this.clientScaleY)}),F$I(0,F$e,"screenMode",function(){return this._screenMode},function(F$e){this._screenMode=F$e}),F$I(0,F$e,"visible",F$n.prototype._$get_visible,function(F$e){this.visible!==F$e&&(F$b.superSet(F$ne,this,"visible",F$e),F$Z._mainCanvas.source.style.visibility=F$e?"visible":"hidden")}),F$I(0,F$e,"fullScreenEnabled",null,function(F$e){var F$F=F$k.document,F$a=F$Z.canvas;F$e?(F$a.addEventListener("mousedown",this._requestFullscreen),F$a.addEventListener("touchstart",this._requestFullscreen),F$F.addEventListener("fullscreenchange",this._fullScreenChanged),F$F.addEventListener("mozfullscreenchange",this._fullScreenChanged),F$F.addEventListener("webkitfullscreenchange",this._fullScreenChanged),F$F.addEventListener("msfullscreenchange",this._fullScreenChanged)):(F$a.removeEventListener("mousedown",this._requestFullscreen),F$a.removeEventListener("touchstart",this._requestFullscreen),F$F.removeEventListener("fullscreenchange",this._fullScreenChanged),F$F.removeEventListener("mozfullscreenchange",this._fullScreenChanged),F$F.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),F$F.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),F$Y.SCALE_NOSCALE="noscale",F$Y.SCALE_EXACTFIT="exactfit",F$Y.SCALE_SHOWALL="showall",F$Y.SCALE_NOBORDER="noborder",F$Y.SCALE_FULL="full",F$Y.SCALE_FIXED_WIDTH="fixedwidth",F$Y.SCALE_FIXED_HEIGHT="fixedheight",F$Y.SCALE_FIXED_AUTO="fixedauto",F$Y.ALIGN_LEFT="left",F$Y.ALIGN_RIGHT="right",F$Y.ALIGN_CENTER="center",F$Y.ALIGN_TOP="top",F$Y.ALIGN_MIDDLE="middle",F$Y.ALIGN_BOTTOM="bottom",F$Y.SCREEN_NONE="none",F$Y.SCREEN_HORIZONTAL="horizontal",F$Y.SCREEN_VERTICAL="vertical",F$Y.FRAME_FAST="fast",F$Y.FRAME_SLOW="slow",F$Y.FRAME_MOUSE="mouse",F$Y.FRAME_SLEEP="sleep",F$Y.FRAME_MOUSE_THREDHOLD=2e3,F$R(F$Y,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),F$Y}(F$ne),F$$e=(function(F$e){function F$F(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,F$F.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}F$g(F$F,"laya.media.SoundNode",F$ne);var F$a=F$F.prototype;F$a._onParentChange=function(){this.target=this.parent},F$a.play=function(F$e,F$F){void 0===F$e&&(F$e=1),isNaN(F$e)&&(F$e=1),this.url&&(this.stop(),this._channel=F$V.playSound(this.url,F$e,null,F$F))},F$a.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},F$a._setPlayAction=function(F$e,F$F,F$a,F$o){void 0===F$o&&(F$o=!0),this[F$a]&&F$e&&(F$o?F$e.on(F$F,this,this[F$a]):F$e.off(F$F,this,this[F$a]))},F$a._setPlayActions=function(F$e,F$F,F$a,F$o){if(void 0===F$o&&(F$o=!0),F$e&&F$F){var F$E,F$s=F$F.split(","),F$Y=0;for(F$E=F$s.length,F$Y=0;F$Y<F$E;F$Y++)this._setPlayAction(F$e,F$s[F$Y],F$a,F$o)}},F$I(0,F$a,"playEvent",null,function(F$e){(this._playEvents=F$e)&&this._tar&&this._setPlayActions(this._tar,F$e,"play")}),F$I(0,F$a,"target",null,function(F$e){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=F$e,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),F$I(0,F$a,"stopEvent",null,function(F$e){(this._stopEvents=F$e)&&this._tar&&this._setPlayActions(this._tar,F$e,"stop")})}(),function(F$e){function F$F(){this._src=null,this._onload=null,this._onerror=null,F$F.__super.call(this)}F$g(F$F,"laya.resource.FileBitmap",F$Ie);var F$a=F$F.prototype;return F$I(0,F$a,"src",function(){return this._src},function(F$e){this._src=F$e}),F$I(0,F$a,"onload",null,function(F$e){}),F$I(0,F$a,"onerror",null,function(F$e){}),F$F}()),F$ye=function(F$e){function F$a(F$e,F$F){this._is2D=!1,F$a.__super.call(this);var F$o=this;if(this._source=this,"2D"===F$e||"AUTO"===F$e&&!F$Z.isWebGL){this._is2D=!0,this._source=F$F||F$k.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var F$E=this;F$E.getContext=function(F$e,F$F){if(F$o._ctx)return F$o._ctx;var F$a=F$o._ctx=F$o._source.getContext(F$e,F$F);return F$a&&(F$a._canvas=F$E,F$Z.isFlash||F$k.onLimixiu||(F$a.size=function(F$e,F$F){})),F$a}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}F$g(F$a,"laya.resource.HTMLCanvas",F$Ie);var F$F=F$a.prototype;return F$F.clear=function(){this._ctx&&this._ctx.clear()},F$F.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$F.release=function(){},F$F._setContext=function(F$e){this._ctx=F$e},F$F.getContext=function(F$e,F$F){return this._ctx?this._ctx:this._ctx=F$a._createContext(this)},F$F.getMemSize=function(){return 0},F$F.size=function(F$e,F$F){(this._w!=F$e||this._h!=F$F||this._source&&(this._source.width!=F$e||this._source.height!=F$F))&&(this._w=F$e,this._h=F$F,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(F$e,F$F),this._source&&(this._source.height=F$F,this._source.width=F$e))},F$F.getCanvas=function(){return this._source},F$F.toBase64=function(F$e,F$F,F$a){if(this._source)if(F$Z.isConchApp&&this._source.toBase64)this._source.toBase64(F$e,F$F,F$a);else{var F$o=this._source.toDataURL(F$e,F$F);F$a.call(this,F$o)}},F$I(0,F$F,"context",function(){return this._ctx}),F$I(0,F$F,"asBitmap",null,function(F$e){}),F$a.create=function(F$e,F$F){return new F$a(F$e,F$F)},F$a.TYPE2D="2D",F$a.TYPE3D="3D",F$a.TYPEAUTO="AUTO",F$a._createContext=null,F$a}(),F$Me=(function(F$e){function F$R(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){throw F$R.__super.call(this),new Error("不允许new！")}F$g(F$R,"laya.resource.HTMLSubImage",F$Ie),F$R.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){return void 0===F$_&&(F$_=!1),new F$R(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_)}}(),function(F$e){function F$n(){this._frames=null,this._url=null,F$n.__super.call(this),this._setControlNode(this)}F$g(F$n,"laya.display.Animation",F$e);var F$F=F$n.prototype;F$F.destroy=function(F$e){void 0===F$e&&(F$e=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,F$e),this._frames=null,this._labels=null},F$F.play=function(F$e,F$F,F$a,F$o){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=!0),void 0===F$a&&(F$a=""),void 0===F$o&&(F$o=!0),F$a&&this._setFramesFromCache(F$a,F$o),this._isPlaying=!0,this.index="string"==typeof F$e?this._getFrameByLabel(F$e):F$e,this.loop=F$F,this._actionName=F$a,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$F._setFramesFromCache=function(F$e,F$F){var F$a;return void 0===F$F&&(F$F=!1),this._url&&(F$e=this._url+"#"+F$e),F$e&&F$n.framesMap[F$e]?((F$a=F$n.framesMap[F$e])instanceof Array?(this._frames=F$n.framesMap[F$e],this._count=this._frames.length):(F$a.nodeRoot&&(F$n.framesMap[F$e]=this._parseGraphicAnimationByData(F$a),F$a=F$n.framesMap[F$e]),this._frames=F$a.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=F$a.interval),this._labels=this._copyLabels(F$a.labels)),!0):(F$F&&console.log("ani not found:",F$e),!1)},F$F._copyLabels=function(F$e){if(!F$e)return null;var F$F,F$a;for(F$a in F$F={},F$e)F$F[F$a]=F$Q.copyArray([],F$e[F$a]);return F$F},F$F._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&F$e.prototype._frameLoop.call(this)},F$F._displayToIndex=function(F$e){this._frames&&(this.graphics=this._frames[F$e])},F$F.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},F$F.loadImages=function(F$e,F$F){return void 0===F$F&&(F$F=""),this._url="",this._setFramesFromCache(F$F)||(this.frames=F$n.framesMap[F$F]?F$n.framesMap[F$F]:F$n.createFrames(F$e,F$F)),this},F$F.loadAtlas=function(F$F,F$a,F$o){void 0===F$o&&(F$o=""),this._url="";var F$E=this;function F$e(F$e){F$F===F$e&&(F$E.frames=F$n.framesMap[F$o]?F$n.framesMap[F$o]:F$n.createFrames(F$F,F$o),F$a&&F$a.run())}return F$E._setFramesFromCache(F$o)||(F$_e.getAtlas(F$F)?F$e(F$F):F$b.loader.load(F$F,F$$.create(null,F$e,[F$F]),null,"atlas")),this},F$F.loadAnimation=function(F$e,F$F,F$a){this._url=F$e;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,F$F&&F$F.run()):!F$a||F$_e.getAtlas(F$a)?this._loadAnimationData(F$e,F$F,F$a):F$b.loader.load(F$a,F$$.create(this,this._loadAnimationData,[F$e,F$F,F$a]),null,"atlas"),this},F$F._loadAnimationData=function(F$_,F$R,F$e){var F$H=this;if(!F$e||F$_e.getAtlas(F$e)){var F$g=this;F$_e.getRes(F$_)?F$F(F$_):F$b.loader.load(F$_,F$$.create(null,F$F,[F$_]),null,"json"),F$_e.clearRes(F$_)}else console.warn("atlas load fail:"+F$e);function F$F(F$e){if(F$_e.getRes(F$e)&&F$_===F$e){var F$F;if(F$n.framesMap[F$_+"#"])F$g._setFramesFromCache(F$H._actionName,!0),F$H.index=0,F$H._checkResumePlaying();else{var F$a=F$g._parseGraphicAnimation(F$_e.getRes(F$_));if(!F$a)return;var F$o,F$E=F$a.animationList,F$s=0,F$Y=F$E.length;for(F$s=0;F$s<F$Y;F$s++)F$F=F$E[F$s],F$n.framesMap[F$_+"#"+F$F.name]=F$F,F$o||(F$o=F$F);F$o&&(F$n.framesMap[F$_+"#"]=F$o,F$g._setFramesFromCache(F$H._actionName,!0),F$H.index=0),F$H._checkResumePlaying()}F$R&&F$R.run()}}},F$F._parseGraphicAnimation=function(F$e){return F$be.parseAnimationData(F$e)},F$F._parseGraphicAnimationByData=function(F$e){return F$be.parseAnimationByData(F$e)},F$I(0,F$F,"frames",function(){return this._frames},function(F$e){(this._frames=F$e)&&(this._count=F$e.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),F$I(0,F$F,"autoPlay",null,function(F$e){F$e?this.play():this.stop()}),F$I(0,F$F,"source",null,function(F$e){-1<F$e.indexOf(".ani")?this.loadAnimation(F$e):-1<F$e.indexOf(".json")||-1<F$e.indexOf("als")||-1<F$e.indexOf("atlas")?this.loadAtlas(F$e):this.loadImages(F$e.split(","))}),F$I(0,F$F,"autoAnimation",null,function(F$e){this.play(0,!0,F$e,!1)}),F$n.createFrames=function(F$e,F$F){var F$a,F$o,F$E=0,F$s=0;if("string"==typeof F$e){var F$Y=F$_e.getAtlas(F$e);if(F$Y&&F$Y.length)for(F$a=[],F$E=0,F$s=F$Y.length;F$E<F$s;F$E++)(F$o=new F$G.createGraphics).drawTexture(F$_e.getRes(F$Y[F$E]),0,0),F$a.push(F$o)}else if(F$e instanceof Array)for(F$a=[],F$E=0,F$s=F$e.length;F$E<F$s;F$E++)(F$o=new F$G.createGraphics).loadImage(F$e[F$E],0,0),F$a.push(F$o);return F$F&&(F$n.framesMap[F$F]=F$a),F$a},F$n.clearCache=function(F$e){var F$F,F$a=F$n.framesMap,F$o=F$e+"#";for(F$F in F$a)F$F!==F$e&&0!=F$F.indexOf(F$o)||delete F$n.framesMap[F$F]},F$n.framesMap={}}(F$le),function(F$e){function F$s(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,F$s.__super.call(this),null==F$s._sortIndexFun&&(F$s._sortIndexFun=F$m.sortByKey("index",!1,!0))}F$g(F$s,"laya.display.FrameAnimation",F$e);var F$F=F$s.prototype;return F$F._setUp=function(F$e,F$F){this._labels=null,this._animationNewFrames=null,this._targetDic=F$e,this._animationData=F$F,this.interval=1e3/F$F.frameRate,F$F.parsed?(this._count=F$F.count,this._labels=F$F.labels,this._animationNewFrames=F$F.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),F$F.parsed=!0,F$F.labels=this._labels,F$F.count=this._count,F$F.animationNewFrames=this._animationNewFrames},F$F.clear=function(){F$e.prototype.clear.call(this),this._targetDic=null,this._animationData=null},F$F._displayToIndex=function(F$e){if(this._animationData){F$e<0&&(F$e=0),F$e>this._count&&(F$e=this._count);var F$F=this._animationData.nodes,F$a=0,F$o=F$F.length;for(F$a=0;F$a<F$o;F$a++)this._displayNodeToFrame(F$F[F$a],F$e)}},F$F._displayNodeToFrame=function(F$e,F$F,F$a){F$a||(F$a=this._targetDic);var F$o=F$a[F$e.target];if(F$o){var F$E,F$s,F$Y,F$_=F$e.frames,F$R=F$e.keys,F$H=0,F$g=F$R.length;for(F$H=0;F$H<F$g;F$H++)F$Y=(F$s=F$_[F$E=F$R[F$H]]).length>F$F?F$s[F$F]:F$s[F$s.length-1],F$o[F$E]=F$Y}},F$F._calculateDatas=function(){if(this._animationData){var F$e,F$F=this._animationData.nodes,F$a=0,F$o=F$F.length;for(F$a=this._count=0;F$a<F$o;F$a++)F$e=F$F[F$a],this._calculateNodeKeyFrames(F$e);this._count+=1}},F$F._calculateNodeKeyFrames=function(F$e){var F$F,F$a,F$o=F$e.keyframes,F$E=F$e.target;for(F$F in F$e.frames||(F$e.frames={}),F$e.keys?F$e.keys.length=0:F$e.keys=[],F$e.initValues||(F$e.initValues={}),F$o)F$a=F$o[F$F],F$e.frames[F$F]||(F$e.frames[F$F]=[]),this._targetDic&&this._targetDic[F$E]&&(F$e.initValues[F$F]=this._targetDic[F$E][F$F]),F$a.sort(F$s._sortIndexFun),F$e.keys.push(F$F),this._calculateNodePropFrames(F$a,F$e.frames[F$F],F$F,F$E)},F$F.resetToInitState=function(){if(this._targetDic&&this._animationData){var F$e,F$F,F$a=this._animationData.nodes,F$o=0,F$E=F$a.length;for(F$o=0;F$o<F$E;F$o++)if(F$F=(F$e=F$a[F$o]).initValues){var F$s,F$Y=this._targetDic[F$e.target];if(F$Y)for(F$s in F$F)F$Y[F$s]=F$F[F$s]}}},F$F._calculateNodePropFrames=function(F$e,F$F,F$a,F$o){var F$E=0,F$s=F$e.length-1;if(0<F$s){for(F$F.length=F$e[F$s].index+1,F$E=0;F$E<F$s;F$E++)this._dealKeyFrame(F$e[F$E]),this._calculateFrameValues(F$e[F$E],F$e[F$E+1],F$F);this._dealKeyFrame(F$e[F$E])}0==F$s&&(F$F[F$e[0].index]=F$e[0].value,this._animationNewFrames&&(this._animationNewFrames[F$e[0].index]=!0))},F$F._dealKeyFrame=function(F$e){F$e.label&&""!=F$e.label&&this.addLabel(F$e.label,F$e.index)},F$F._calculateFrameValues=function(F$e,F$F,F$a){var F$o,F$E=0,F$s=F$e.index,F$Y=F$F.index,F$_=F$e.value,F$R=F$F.value-F$e.value,F$H=F$Y-F$s;if(F$Y>this._count&&(this._count=F$Y),F$e.tween)for(null==(F$o=F$x[F$e.tweenMethod])&&(F$o=F$x.linearNone),F$E=F$s;F$E<F$Y;F$E++)F$a[F$E]=F$o(F$E-F$s,F$_,F$R,F$H),this._animationNewFrames&&(this._animationNewFrames[F$E]=!0);else for(F$E=F$s;F$E<F$Y;F$E++)F$a[F$E]=F$_;this._animationNewFrames&&(this._animationNewFrames[F$e.index]=!0,this._animationNewFrames[F$F.index]=!0),F$a[F$F.index]=F$F.value},F$s._sortIndexFun=null,F$s}(F$le)),F$De=function(F$F){function F$E(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",F$E.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=F$Pe.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}F$g(F$E,"laya.display.Input",F$F);var F$e=F$E.prototype;return F$e.setSelection=function(F$e,F$F){this.focus=!0,laya.display.Input.inputElement.selectionStart=F$e,laya.display.Input.inputElement.selectionEnd=F$F},F$e._onUnDisplay=function(F$e){this.focus=!1},F$e._onMouseDown=function(F$e){this.focus=!0},F$e._syncInputTransform=function(){var F$e=this.nativeInput,F$F=F$Q.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),F$a=this._width-this.padding[1]-this.padding[3],F$o=this._height-this.padding[0]-this.padding[2];F$Z.isConchApp?(F$e.setScale(F$F.scaleX,F$F.scaleY),F$e.setSize(F$a,F$o),F$e.setPos(F$F.x,F$F.y)):(F$E.inputContainer.style.transform=F$E.inputContainer.style.webkitTransform="scale("+F$F.scaleX+","+F$F.scaleY+") rotate("+F$b.stage.canvasDegree+"deg)",F$e.style.width=F$a+"px",F$e.style.height=F$o+"px",F$E.inputContainer.style.left=F$F.x+"px",F$E.inputContainer.style.top=F$F.y+"px")},F$e.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},F$e._setInputMethod=function(){F$E.input.parentElement&&F$E.inputContainer.removeChild(F$E.input),F$E.area.parentElement&&F$E.inputContainer.removeChild(F$E.area),F$E.inputElement=this._multiline?F$E.area:F$E.input,F$E.inputContainer.appendChild(F$E.inputElement),F$Pe.RightToLeft&&(F$E.inputElement.style.direction="rtl")},F$e._focusIn=function(){laya.display.Input.isInputting=!0;var F$e=this.nativeInput;this._focus=!0;var F$F=F$e.style;F$F.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),F$e.readOnly=!this._editable,F$Z.isConchApp&&(F$e.setType(this._type),F$e.setForbidEdit(!this._editable)),F$e.maxLength=this._maxChars;this.padding;if(F$e.type=this._type,F$e.value=this._content,F$e.placeholder=this._prompt,F$b.stage.off("keydown",this,this._onKeyDown),F$b.stage.on("keydown",this,this._onKeyDown),(F$b.stage.focus=this).event("focus"),F$k.onPC&&F$e.focus(),!F$k.onMiniGame){this._text;this._text=null}this.typeset(),F$e.setColor(this._originColor),F$e.setFontSize(this.fontSize),F$e.setFontFace(F$k.onIPhone&&F$Pe._fontFamilyMap[this.font]||this.font),F$Z.isConchApp&&F$e.setMultiAble&&F$e.setMultiAble(this._multiline),F$F.lineHeight=this.leading+this.fontSize+"px",F$F.fontStyle=this.italic?"italic":"normal",F$F.fontWeight=this.bold?"bold":"normal",F$F.textAlign=this.align,F$F.padding="0 0",this._syncInputTransform(),!F$Z.isConchApp&&F$k.onPC&&F$b.timer.frameLoop(1,this,this._syncInputTransform)},F$e._setPromptColor=function(){(F$E.promptStyleDOM=F$k.getElementById("promptStyle"))||((F$E.promptStyleDOM=F$k.createElement("style")).setAttribute("id","promptStyle"),F$k.document.head.appendChild(F$E.promptStyleDOM)),F$E.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},F$e._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(F$b.superSet(F$Pe,this,"text",this._content),F$b.superSet(F$Pe,this,"color",this._originColor)):(F$b.superSet(F$Pe,this,"text",this._prompt),F$b.superSet(F$Pe,this,"color",this._promptColor)),F$b.stage.off("keydown",this,this._onKeyDown),F$b.stage.focus=null,this.event("blur"),F$Z.isConchApp&&this.nativeInput.blur(),F$k.onPC&&F$b.timer.clear(this,this._syncInputTransform)},F$e._onKeyDown=function(F$e){13===F$e.keyCode&&(F$k.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},F$e.changeText=function(F$e){this._content=F$e,this._focus?(this.nativeInput.value=F$e||"",this.event("change")):F$F.prototype.changeText.call(this,F$e)},F$I(0,F$e,"color",F$F.prototype._$get_color,function(F$e){this._focus&&this.nativeInput.setColor(F$e),F$b.superSet(F$Pe,this,"color",this._content?F$e:this._promptColor),this._originColor=F$e}),F$I(0,F$e,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(F$e){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),F$I(0,F$e,"multiline",function(){return this._multiline},function(F$e){this._multiline=F$e,this.valign=F$e?"top":"middle"}),F$I(0,F$e,"maxChars",function(){return this._maxChars},function(F$e){F$e<=0&&(F$e=1e5),this._maxChars=F$e}),F$I(0,F$e,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(F$e){F$b.superSet(F$Pe,this,"color",this._originColor),F$e+="",this._focus?(this.nativeInput.value=F$e||"",this.event("change")):(this._multiline||(F$e=F$e.replace(/\r?\n/g,"")),(this._content=F$e)?F$b.superSet(F$Pe,this,"text",F$e):(F$b.superSet(F$Pe,this,"text",this._prompt),F$b.superSet(F$Pe,this,"color",this.promptColor)))}),F$I(0,F$e,"nativeInput",function(){return this._multiline?F$E.area:F$E.input}),F$I(0,F$e,"prompt",function(){return this._prompt},function(F$e){!this._text&&F$e&&F$b.superSet(F$Pe,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?F$b.superSet(F$Pe,this,"text",this._text==this._prompt?F$e:this._text):F$b.superSet(F$Pe,this,"text",F$e),this._prompt=F$Pe.langPacks&&F$Pe.langPacks[F$e]?F$Pe.langPacks[F$e]:F$e}),F$I(0,F$e,"focus",function(){return this._focus},function(F$e){var F$F=this.nativeInput;this._focus!==F$e&&(F$e?(F$F.target?F$F.target._focusOut():this._setInputMethod(),(F$F.target=this)._focusIn()):(F$F.target=null,this._focusOut(),F$k.document.body.scrollTop=0,F$F.blur(),F$Z.isConchApp?F$F.setPos(-1e4,-1e4):F$E.inputContainer.contains(F$F)&&F$E.inputContainer.removeChild(F$F)))}),F$I(0,F$e,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(F$e){F$e?(-1<(F$e="[^"+F$e+"]").indexOf("^^")&&(F$e=F$e.replace("^^","")),this._restrictPattern=new RegExp(F$e,"g")):this._restrictPattern=null}),F$I(0,F$e,"editable",function(){return this._editable},function(F$e){this._editable=F$e,F$Z.isConchApp&&F$E.input.setForbidEdit(!F$e)}),F$I(0,F$e,"promptColor",function(){return this._promptColor},function(F$e){this._promptColor=F$e,this._content||F$b.superSet(F$Pe,this,"color",F$e)}),F$I(0,F$e,"type",function(){return this._type},function(F$e){this._getCSSStyle().password="password"==F$e,this._type=F$e,F$Z.isConchApp&&this.nativeInput.setType(F$e)}),F$I(0,F$e,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(F$e){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),F$I(0,F$e,"asPassword",function(){return this._getCSSStyle().password},function(F$e){this._getCSSStyle().password=F$e,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),F$E.__init__=function(){F$E._createInputElement(),F$k.onMobile&&F$Z.canvas.addEventListener(F$E.IOS_IFRAME?F$k.onMiniGame?"touchend":"click":"touchend",F$E._popupInputMethod)},F$E._popupInputMethod=function(F$e){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},F$E._createInputElement=function(){F$E._initInput(F$E.area=F$k.createElement("textarea")),F$E._initInput(F$E.input=F$k.createElement("input")),(F$E.inputContainer=F$k.createElement("div")).style.position="absolute",F$E.inputContainer.style.zIndex=1e5,F$k.container.appendChild(F$E.inputContainer),F$E.inputContainer.setPos=function(F$e,F$F){F$E.inputContainer.style.left=F$e+"px",F$E.inputContainer.style.top=F$F+"px"}},F$E._initInput=function(F$F){var F$e=F$F.style;F$e.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",F$e.resize="none",F$e.backgroundColor="transparent",F$e.border="none",F$e.outline="none",F$e.zIndex=1,F$F.addEventListener("input",F$E._processInputting),F$F.addEventListener("mousemove",F$E._stopEvent),F$F.addEventListener("mousedown",F$E._stopEvent),F$F.addEventListener("touchmove",F$E._stopEvent),F$F.setFontFace=function(F$e){F$F.style.fontFamily=F$e},F$Z.isConchApp||(F$F.setColor=function(F$e){F$F.style.color=F$e},F$F.setFontSize=function(F$e){F$F.style.fontSize=F$e+"px"})},F$E._processInputting=function(F$e){var F$F=laya.display.Input.inputElement.target;if(F$F){var F$a=laya.display.Input.inputElement.value;F$F._restrictPattern&&(F$a=F$a.replace(/\u2006|\x27/g,""),F$F._restrictPattern.test(F$a)&&(F$a=F$a.replace(F$F._restrictPattern,""),laya.display.Input.inputElement.value=F$a)),F$F._text=F$a,F$F.event("input")}},F$E._stopEvent=function(F$e){"touchmove"==F$e.type&&F$e.preventDefault(),F$e.stopPropagation&&F$e.stopPropagation()},F$E.TYPE_TEXT="text",F$E.TYPE_PASSWORD="password",F$E.TYPE_EMAIL="email",F$E.TYPE_URL="url",F$E.TYPE_NUMBER="number",F$E.TYPE_RANGE="range",F$E.TYPE_DATE="date",F$E.TYPE_MONTH="month",F$E.TYPE_WEEK="week",F$E.TYPE_TIME="time",F$E.TYPE_DATE_TIME="datetime",F$E.TYPE_DATE_TIME_LOCAL="datetime-local",F$E.TYPE_SEARCH="search",F$E.input=null,F$E.area=null,F$E.inputElement=null,F$E.inputContainer=null,F$E.confirmButton=null,F$E.promptStyleDOM=null,F$E.inputHeight=45,F$E.isInputting=!1,F$E.stageMatrix=null,F$R(F$E,["IOS_IFRAME",function(){return this.IOS_IFRAME=F$k.onIOS&&F$k.window.top!=F$k.window.self}]),F$E}(F$Pe),F$me=function(F$e){function F$a(F$e,F$F){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,F$a.__super.call(this),F$e&&this._init_(F$e,F$F)}F$g(F$a,"laya.resource.HTMLImage",F$$e);var F$F=F$a.prototype;return F$F._init_=function(F$e,F$F){this._src=F$e,this._source=new F$k.window.Image,F$F&&(F$F.onload&&(this.onload=F$F.onload),F$F.onerror&&(this.onerror=F$F.onerror),F$F.onCreate&&F$F.onCreate(this)),0!=F$e.indexOf("data:image")&&(this._source.crossOrigin=""),F$e&&(this._source.src=F$e)},F$F.recreateResource=function(){var F$e=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var F$F=this;this._source=new F$k.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(F$F._needReleaseAgain)return F$F._needReleaseAgain=!1,F$F._source.onload=null,void(F$F._source=null);F$F._source.onload=null,F$F.memorySize=F$e._w*F$e._h*4,F$F._recreateLock=!1,F$F.completeCreate()},this._source.src=this._src}},F$F.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},F$F.onresize=function(){this._w=this._source.width,this._h=this._source.height},F$I(0,F$F,"onload",null,function(F$e){var F$F=this;this._onload=F$e,this._source&&(this._source.onload=null!=this._onload?function(){F$F.onresize(),F$F._onload()}:null)}),F$I(0,F$F,"onerror",null,function(F$e){var F$F=this;this._onerror=F$e,this._source&&(this._source.onerror=null!=this._onerror?function(){F$F._onerror()}:null)}),F$I(0,F$F,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$e){this._enableMerageInAtlas=F$e,F$Z.isConchApp&&this._source&&(this._source.enableMerageInAtlas=F$e)}),F$a.create=function(F$e,F$F){return new F$a(F$e,F$F)},F$a}(),F$be=(function(F$s){function F$e(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,F$e.__super.call(this)}F$g(F$e,"laya.display.EffectAnimation",F$s);var F$F=F$e.prototype;F$F._onOtherBegin=function(F$e){F$e!=this&&this.stop()},F$F.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},F$F._onPlayAction=function(){this.play(0,!1)},F$F.play=function(F$e,F$F,F$a,F$o){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=!0),void 0===F$a&&(F$a=""),void 0===F$o&&(F$o=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,F$e,F$F,F$a,F$o))},F$F._recordInitData=function(){if(this._aniKeys){var F$e,F$F,F$a=0;for(F$e=this._aniKeys.length,F$a=0;F$a<F$e;F$a++)F$F=this._aniKeys[F$a],this._initData[F$F]=this._target[F$F]}},F$F._displayToIndex=function(F$e){if(this._animationData){F$e<0&&(F$e=0),F$e>this._count&&(F$e=this._count);var F$F=this._animationData.nodes,F$a=0,F$o=F$F.length;for(F$o=1<F$o?1:F$o,F$a=0;F$a<F$o;F$a++)this._displayNodeToFrame(F$F[F$a],F$e)}},F$F._displayNodeToFrame=function(F$e,F$F,F$a){if(this._target){var F$o;F$o=this._target;var F$E,F$s,F$Y,F$_,F$R=F$e.frames,F$H=F$e.keys,F$g=0,F$n=F$H.length;F$_=F$e.secondFrames;var F$O,F$q,F$I,F$l,F$P=0;for(F$g=0;F$g<F$n;F$g++)F$s=F$R[F$E=F$H[F$g]],F$Y=-1==(F$P=F$_[F$E])?this._initData[F$E]:F$F<F$P?(F$I=(F$q=F$e.keyframes[F$E])[0]).tween?(null==(F$O=F$x[F$I.tweenMethod])&&(F$O=F$x.linearNone),F$l=F$q[1],F$O(F$F,this._initData[F$E],F$l.value-this._initData[F$E],F$l.index)):this._initData[F$E]:F$s.length>F$F?F$s[F$F]:F$s[F$s.length-1],F$o[F$E]=F$Y}},F$F._calculateNodeKeyFrames=function(F$e){F$s.prototype._calculateNodeKeyFrames.call(this,F$e);var F$F,F$a,F$o,F$E=F$e.keyframes;F$e.target;for(F$F in F$o={},F$e.secondFrames=F$o,F$E)(F$a=F$E[F$F]).length<=1?F$o[F$F]=-1:F$o[F$F]=F$a[1].index},F$I(0,F$F,"target",function(){return this._target},function(F$e){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=F$e,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),F$I(0,F$F,"playEvent",null,function(F$e){(this._playEvents=F$e)&&this.addEvent()}),F$I(0,F$F,"effectData",null,function(F$e){var F$F;F$e&&((F$F=F$e.animations)&&F$F[0]&&(this._setUp({},F$F[0]),F$F[0].nodes&&F$F[0].nodes[0]&&(this._aniKeys=F$F[0].nodes[0].keys)))}),F$I(0,F$F,"effectClass",null,function(F$e){var F$F,F$a;(this._effectClass=F$S.getClass(F$e),this._effectClass)&&((F$F=this._effectClass.uiView)&&(F$a=F$F.animations)&&F$a[0]&&(this._setUp({},F$a[0]),F$a[0].nodes&&F$a[0].nodes[0]&&(this._aniKeys=F$a[0].nodes[0].keys)))}),F$e.EffectAnimationBegin="effectanimationbegin"}(F$Me),function(F$F){var F$K;function F$V(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,F$V.__super.call(this)}F$g(F$V,"laya.utils.GraphicAnimation",F$F);var F$e=F$V.prototype;return F$e._parseNodeList=function(F$e){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[F$e.compId]=F$e.props,F$e.compId&&this._nodeList.push(F$e.compId);var F$F=F$e.child;if(F$F){var F$a=0,F$o=F$F.length;for(F$a=0;F$a<F$o;F$a++)this._parseNodeList(F$F[F$a])}},F$e._calGraphicData=function(F$e){var F$F;if(this._setUp(null,F$e),this._createGraphicData(),this._nodeIDAniDic)for(F$F in this._nodeIDAniDic)this._nodeIDAniDic[F$F]=null},F$e._createGraphicData=function(){var F$e,F$F=[],F$a=0,F$o=this.count,F$E=this._animationNewFrames;for(F$E||(F$E=[]),F$a=0;F$a<F$o;F$a++)!F$E[F$a]&&F$e||(F$e=this._createFrameGraphic(F$a)),F$F.push(F$e);this._gList=F$F},F$e._createFrameGraphic=function(F$e){var F$F=F$G.createGraphics();return F$V._rootMatrix||(F$V._rootMatrix=new F$A),this._updateNodeGraphic(this._rootNode,F$e,F$V._rootMatrix,F$F),F$F},F$e._updateNodeGraphic=function(F$e,F$F,F$a,F$o,F$E){var F$s;void 0===F$E&&(F$E=1);var F$Y,F$_,F$R,F$H=(F$s=this._nodeGDic[F$e.compId]=this._getNodeGraphicData(F$e.compId,F$F,this._nodeGDic[F$e.compId])).alpha*F$E;if(!(F$H<.01)&&(F$s.resultTransform||(F$s.resultTransform=F$A.create()),F$Y=F$s.resultTransform,F$A.mul(F$s.transform,F$a,F$Y),F$s.skin&&(F$_=this._getTextureByUrl(F$s.skin))&&(F$Y._checkTransform()?(F$o.drawTexture(F$_,0,0,F$s.width,F$s.height,F$Y,F$H),F$s.resultTransform=null):F$o.drawTexture(F$_,F$Y.tx,F$Y.ty,F$s.width,F$s.height,null,F$H)),F$R=F$e.child)){var F$g,F$n=0;for(F$g=F$R.length,F$n=0;F$n<F$g;F$n++)this._updateNodeGraphic(F$R[F$n],F$F,F$Y,F$o,F$H)}},F$e._updateNoChilds=function(F$e,F$F){if(F$e.skin){var F$a=this._getTextureByUrl(F$e.skin);if(F$a){var F$o=F$e.transform;F$o._checkTransform();!F$o.bTransform?F$F.drawTexture(F$a,F$o.tx,F$o.ty,F$e.width,F$e.height,null,F$e.alpha):F$F.drawTexture(F$a,0,0,F$e.width,F$e.height,F$o.clone(),F$e.alpha)}}},F$e._updateNodeGraphic2=function(F$e,F$F,F$a){var F$o;if(F$o=this._nodeGDic[F$e.compId]=this._getNodeGraphicData(F$e.compId,F$F,this._nodeGDic[F$e.compId]),F$e.child){var F$E=F$o.transform;F$E._checkTransform();var F$s,F$Y;F$Y=(F$s=!F$E.bTransform)&&(0!=F$E.tx||0!=F$E.ty);var F$_,F$R,F$H;if((F$_=F$E.bTransform||1!=F$o.alpha)&&F$a.save(),1!=F$o.alpha&&F$a.alpha(F$o.alpha),F$s?F$Y&&F$a.translate(F$E.tx,F$E.ty):F$a.transform(F$E.clone()),F$R=F$e.child,F$o.skin&&(F$H=this._getTextureByUrl(F$o.skin))&&F$a.drawTexture(F$H,0,0,F$o.width,F$o.height),F$R){var F$g,F$n=0;for(F$g=F$R.length,F$n=0;F$n<F$g;F$n++)this._updateNodeGraphic2(F$R[F$n],F$F,F$a)}F$_?F$a.restore():F$s?F$Y&&F$a.translate(-F$E.tx,-F$E.ty):F$a.transform(F$E.clone().invert())}else this._updateNoChilds(F$o,F$a)},F$e._calculateNodeKeyFrames=function(F$e){F$F.prototype._calculateNodeKeyFrames.call(this,F$e),this._nodeIDAniDic[F$e.target]=F$e},F$e.getNodeDataByID=function(F$e){return this._nodeIDAniDic[F$e]},F$e._getParams=function(F$e,F$F,F$a,F$o){var F$E=F$V._temParam;F$E.length=F$F.length;var F$s=0,F$Y=F$F.length;for(F$s=0;F$s<F$Y;F$s++)F$E[F$s]=this._getObjVar(F$e,F$F[F$s][0],F$a,F$F[F$s][1],F$o);return F$E},F$e._getObjVar=function(F$e,F$F,F$a,F$o,F$E){if(F$e.hasOwnProperty(F$F)){var F$s=F$e[F$F];if(F$a>=F$s.length&&(F$a=F$s.length-1),null!=F$e[F$F][F$a])return F$e[F$F][F$a]}return F$E.hasOwnProperty(F$F)?F$E[F$F]:F$o},F$e._getNodeGraphicData=function(F$e,F$F,F$a){F$a||(F$a=F$K.create()),F$a.transform?F$a.transform.identity():F$a.transform=F$A.create();var F$o=this.getNodeDataByID(F$e);if(!F$o)return F$a;var F$E,F$s,F$Y=F$o.frames,F$_=this._getParams(F$Y,F$V._drawTextureCmd,F$F,this._nodeDefaultProps[F$e]),F$R=F$_[0],F$H=NaN,F$g=NaN,F$n=F$_[5],F$O=F$_[6],F$q=F$_[13],F$I=F$_[14],F$l=F$_[7],F$P=F$_[8],F$j=F$_[9],F$$=F$_[11],F$y=F$_[12];F$H=F$_[3],F$g=F$_[4],0!=F$H&&0!=F$g||(F$R=null),-1==F$H&&(F$H=0),-1==F$g&&(F$g=0),F$a.skin=F$R,F$a.width=F$H,F$a.height=F$g,F$R&&((F$E=this._getTextureByUrl(F$R))?(F$H||(F$H=F$E.sourceWidth),F$g||(F$g=F$E.sourceHeight)):console.warn("lost skin:",F$R,",you may load pics first")),F$a.alpha=F$_[10],F$s=F$a.transform,0!=F$q&&(F$n=F$q*F$H),0!=F$I&&(F$O=F$I*F$g),0==F$n&&0==F$O||F$s.translate(-F$n,-F$O);var F$M=null;if(F$j||1!==F$l||1!==F$P||F$$||F$y){(F$M=F$V._tempMt).identity(),F$M.bTransform=!0;var F$D=.0174532922222222*(F$j-F$$),F$m=.0174532922222222*(F$j+F$y),F$b=Math.cos(F$m),F$L=Math.sin(F$m),F$B=Math.sin(F$D),F$v=Math.cos(F$D);F$M.a=F$l*F$b,F$M.b=F$l*F$L,F$M.c=-F$P*F$B,F$M.d=F$P*F$v,F$M.tx=F$M.ty=0}return F$M&&(F$s=F$A.mul(F$s,F$M,F$s)),F$s.translate(F$_[1],F$_[2]),F$a},F$e._getTextureByUrl=function(F$e){return F$_e.getRes(F$e)},F$e.setAniData=function(F$e,F$F){if(F$e.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$e,this._parseNodeList(F$e);var F$a,F$o={},F$E=[],F$s=F$e.animations,F$Y=0,F$_=F$s.length;for(F$Y=0;F$Y<F$_;F$Y++)if(F$a=F$s[F$Y],this._labels=null,(!F$F||F$F==F$a.name)&&F$a){try{this._calGraphicData(F$a)}catch(F$e){console.warn("parse animation fail:"+F$a.name+",empty animation created"),this._gList=[]}var F$R={};F$R.interval=1e3/F$a.frameRate,F$R.frames=this._gList,F$R.labels=this._labels,F$R.name=F$a.name,F$E.push(F$R),F$o[F$a.name]=F$R}this.animationList=F$E,this.animationDic=F$o}F$V._temParam.length=0},F$e.parseByData=function(F$e){var F$F,F$a;F$F=F$e.nodeRoot,F$a=F$e.aniO,delete F$e.nodeRoot,delete F$e.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$F,this._parseNodeList(F$F),this._labels=null;try{this._calGraphicData(F$a)}catch(F$e){console.warn("parse animation fail:"+F$a.name+",empty animation created"),this._gList=[]}var F$o=F$e;return F$o.interval=1e3/F$a.frameRate,F$o.frames=this._gList,F$o.labels=this._labels,F$o.name=F$a.name,F$o},F$e.setUpAniData=function(F$e){if(F$e.animations){var F$F,F$a={},F$o=[],F$E=F$e.animations,F$s=0,F$Y=F$E.length;for(F$s=0;F$s<F$Y;F$s++)if(F$F=F$E[F$s]){var F$_={};F$_.name=F$F.name,F$_.aniO=F$F,F$_.nodeRoot=F$e,F$o.push(F$_),F$a[F$F.name]=F$_}this.animationList=F$o,this.animationDic=F$a}},F$e._clear=function(){var F$e,F$F;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(F$e in this._nodeGDic)(F$F=this._nodeGDic[F$e])&&F$F.recover();this._nodeGDic=null},F$V.parseAnimationByData=function(F$e){var F$F;return F$V._I||(F$V._I=new F$V),F$F=F$V._I.parseByData(F$e),F$V._I._clear(),F$F},F$V.parseAnimationData=function(F$e){var F$F;return F$V._I||(F$V._I=new F$V),F$V._I.setUpAniData(F$e),(F$F={}).animationList=F$V._I.animationList,F$F.animationDic=F$V._I.animationDic,F$V._I._clear(),F$F},F$V._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],F$V._temParam=[],F$V._I=null,F$V._rootMatrix=null,F$R(F$V,["_tempMt",function(){return this._tempMt=new F$A}]),F$V.__init$=function(){F$K=function(){function F$e(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return F$g(F$e,""),F$e.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),F$X.recover("GraphicNode",this)},F$e.create=function(){return F$X.getItemByClass("GraphicNode",F$e)},F$e}()},F$V}(F$Me));F$b.__init([F$H,F$Re,F$Z,F$k,F$f,F$v,F$e,F$be])}(window,document,Laya),function(F$e,F$F,F$a){F$a.un,F$a.uns,F$a.static;var F$o=F$a.class;F$a.getset,F$a.__newvec;new(function(){function F$e(){}return F$o(F$e,"LayaMain"),F$e}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}}),function(F$e,F$F,F$m){F$m.un,F$m.uns;var F$Y=F$m.static,F$O=F$m.class,F$o=F$m.getset,F$s=F$m.__newvec,F$g=laya.maths.Arith,F$n=laya.maths.Bezier,F$a=laya.resource.Bitmap,F$q=laya.utils.Browser,F$R=laya.utils.Byte,F$I=laya.utils.Color,F$b=(laya.filters.ColorFilter,F$m.Config),F$E=laya.resource.Context,F$L=(laya.events.Event,laya.filters.Filter),F$_=laya.display.Graphics,F$H=laya.resource.HTMLCanvas,F$l=(laya.utils.HTMLChar,laya.resource.HTMLImage),F$P=laya.resource.HTMLSubImage,F$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),F$v=laya.maths.Point,F$K=laya.maths.Rectangle,F$j=laya.renders.Render,F$$=(laya.renders.RenderContext,laya.renders.RenderSprite),F$y=laya.resource.Resource,F$M=laya.resource.ResourceManager,F$D=laya.utils.RunDriver,F$V=laya.display.Sprite,F$G=laya.display.Stage,F$A=laya.utils.Stat,F$U=laya.utils.StringKey,F$r=(laya.display.css.Style,laya.system.System),F$Z=laya.display.Text,F$z=laya.resource.Texture,F$T=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),F$p=laya.utils.VectorGraphManager;laya.utils.WordText;F$m.interface("laya.webgl.shapes.IShape"),F$m.interface("laya.webgl.submit.ISubmit"),F$m.interface("laya.webgl.text.ICharSegment"),F$m.interface("laya.webgl.canvas.save.ISaveData"),F$m.interface("laya.webgl.resource.IMergeAtlasBitmap"),F$m.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var F$J=function(){function F$e(){}F$O(F$e,"laya.filters.webgl.FilterActionGL");var F$F=F$e.prototype;return F$m.imps(F$F,{"laya.filters.IFilterActionGL":!0}),F$F.setValue=function(F$e){},F$F.setValueMix=function(F$e){},F$F.apply3d=function(F$e,F$F,F$a,F$o,F$E){return null},F$F.apply=function(F$e){return null},F$o(0,F$F,"typeMix",function(){return 0}),F$e}(),F$k=function(){function F$e(){}return F$O(F$e,"laya.webgl.shader.ShaderValue"),F$e}(),F$d=function(){var F$o,F$E;function F$e(F$e,F$F,F$a){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new F$E,void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),this._cells=null,this._rowInfo=null,this._init(F$e,F$F),this._atlasID=F$a}F$O(F$e,"laya.webgl.atlas.AtlasGrid");var F$F=F$e.prototype;return F$F.getAltasID=function(){return this._atlasID},F$F.setAltasID=function(F$e){0<=F$e&&(this._atlasID=F$e)},F$F.addTex=function(F$e,F$F,F$a){var F$o=this._get(F$F,F$a);return 0==F$o.ret||(this._fill(F$o.x,F$o.y,F$F,F$a,F$e),this._texCount++),F$o},F$F._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},F$F._init=function(F$e,F$F){if(this._width=F$e,this._height=F$F,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=F$s(this._height);for(var F$a=0;F$a<this._height;F$a++)this._rowInfo[F$a]=new F$o;return this._clear(),!0},F$F._get=function(F$e,F$F){var F$a=new F$S;if(F$e>=this._failSize.width&&F$F>=this._failSize.height)return F$a;for(var F$o=-1,F$E=-1,F$s=this._width,F$Y=this._height,F$_=this._cells,F$R=0;F$R<F$Y;F$R++)if(!(this._rowInfo[F$R].spaceCount<F$e))for(var F$H=0;F$H<F$s;){var F$g=3*(F$R*F$s+F$H);if(0!=F$_[F$g]||F$_[1+F$g]<F$e||F$_[2+F$g]<F$F)F$H+=F$_[1+F$g];else{F$o=F$H,F$E=F$R;for(var F$n=0;F$n<F$e;F$n++)if(F$_[3*F$n+F$g+2]<F$F){F$o=-1;break}if(!(F$o<0))return F$a.ret=!0,F$a.x=F$o,F$a.y=F$E,F$a;F$H+=F$_[1+F$g]}}return F$a},F$F._fill=function(F$e,F$F,F$a,F$o,F$E){var F$s=this._width,F$Y=this._height;this._check(F$e+F$a<=F$s&&F$F+F$o<=F$Y);for(var F$_=F$F;F$_<F$o+F$F;++F$_){this._check(this._rowInfo[F$_].spaceCount>=F$a),this._rowInfo[F$_].spaceCount-=F$a;for(var F$R=0;F$R<F$a;F$R++){var F$H=3*(F$e+F$_*F$s+F$R);this._check(0==this._cells[F$H]),this._cells[F$H]=F$E,this._cells[1+F$H]=F$a,this._cells[2+F$H]=F$o}}if(0<F$e)for(F$_=0;F$_<F$o;++F$_){var F$g=0;for(F$R=F$e-1;0<=F$R&&0==this._cells[3*((F$F+F$_)*F$s+F$R)];--F$R,++F$g);for(F$R=F$g;0<F$R;--F$R)this._cells[3*((F$F+F$_)*F$s+F$e-F$R)+1]=F$R,this._check(0<F$R)}if(0<F$F)for(F$R=F$e;F$R<F$e+F$a;++F$R){for(F$g=0,F$_=F$F-1;0<=F$_&&0==this._cells[3*(F$R+F$_*F$s)];--F$_,F$g++);for(F$_=F$g;0<F$_;--F$_)this._cells[3*(F$R+(F$F-F$_)*F$s)+2]=F$_,this._check(0<F$_)}},F$F._check=function(F$e){0==F$e&&console.log("xtexMerger 错误啦")},F$F._clear=function(){for(var F$e=this._texCount=0;F$e<this._height;F$e++)this._rowInfo[F$e].spaceCount=this._width;for(var F$F=0;F$F<this._height;F$F++)for(var F$a=0;F$a<this._width;F$a++){var F$o=3*(F$F*this._width+F$a);this._cells[F$o]=0,this._cells[1+F$o]=this._width-F$a,this._cells[2+F$o]=this._width-F$F}this._failSize.width=this._width+1,this._failSize.height=this._height+1},F$e.__init$=function(){F$o=function(){function F$e(){this.spaceCount=0}return F$O(F$e,""),F$e}(),F$E=function(){function F$e(){this.width=0,this.height=0}return F$O(F$e,""),F$e}()},F$e}(),F$w=function(){function F$j(F$e,F$F,F$a,F$o){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=F$e,this._height=F$F,this._gridSize=F$a,this._maxAtlaserCount=F$o,this._gridNumX=F$e/F$a,this._gridNumY=F$F/F$a,this._curAtlasIndex=0,this._atlaserArray=[]}F$O(F$j,"laya.webgl.atlas.AtlasResourceManager");var F$e=F$j.prototype;return F$e.setAtlasParam=function(F$e,F$F,F$a,F$o){if(1==this._setAtlasParam)return F$j._sid_=0,this._width=F$e,this._height=F$F,this._gridSize=F$a,this._maxAtlaserCount=F$o,this._gridNumX=F$e/F$a,this._gridNumY=F$F/F$a,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},F$e.pushData=function(F$e){var F$F,F$a=F$e.bitmap,F$o=-1,F$E=null,F$s=0,F$Y=0;for(F$s=0,F$F=this._atlaserArray.length;F$s<F$F&&(F$Y=(this._curAtlasIndex+F$s)%F$F,-1==(F$o=(F$E=this._atlaserArray[F$Y]).findBitmapIsExist(F$a)));F$s++);if(-1!=F$o){var F$_=F$E.InAtlasWebGLImagesOffsetValue[F$o];return F$I=F$_[0],F$l=F$_[1],F$E.addToAtlas(F$e,F$I,F$l),!0}this._setAtlasParam=!1;for(var F$R=Math.ceil((F$e.bitmap.width+2)/this._gridSize),F$H=Math.ceil((F$e.bitmap.height+2)/this._gridSize),F$g=!1,F$n=0;F$n<2;F$n++){var F$O=this._maxAtlaserCount;for(F$s=0;F$s<F$O;F$s++){F$Y=(this._curAtlasIndex+F$s)%F$O,this._atlaserArray.length-1>=F$Y||this._atlaserArray.push(new F$Ke(this._gridNumX,this._gridNumY,this._width,this._height,F$j._sid_++));var F$q=this._atlaserArray[F$Y],F$I=0,F$l=0,F$P=F$q.addTex(1,F$R,F$H);if(F$P.ret){F$I=F$P.x*this._gridSize+1,F$l=F$P.y*this._gridSize+1,F$a.lock=!0,F$q.addToAtlasTexture(F$a,F$I,F$l),F$q.addToAtlas(F$e,F$I,F$l),F$g=!0,this._curAtlasIndex=F$Y;break}}if(F$g)break;this._atlaserArray.push(new F$Ke(this._gridNumX,this._gridNumY,this._width,this._height,F$j._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return F$g||console.log(">>>AtlasManager pushData error"),F$g},F$e.addToAtlas=function(F$e){laya.webgl.atlas.AtlasResourceManager.instance.pushData(F$e)},F$e.garbageCollection=function(){if(!0===this._needGC){for(var F$e=this._atlaserArray.length-this._maxAtlaserCount,F$F=0;F$F<F$e;F$F++)this._atlaserArray[F$F].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+F$e),this._atlaserArray.splice(0,F$e),this._needGC=!1}return!0},F$e.freeAll=function(){for(var F$e=0,F$F=this._atlaserArray.length;F$e<F$F;F$e++)this._atlaserArray[F$e].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},F$e.getAtlaserCount=function(){return this._atlaserArray.length},F$e.getAtlaserByIndex=function(F$e){return this._atlaserArray[F$e]},F$o(1,F$j,"instance",function(){return F$j._Instance||(F$j._Instance=new F$j(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),F$j._Instance}),F$o(1,F$j,"enabled",function(){return F$b.atlasEnable}),F$o(1,F$j,"atlasLimitWidth",function(){return F$j._atlasLimitWidth},function(F$e){F$j._atlasLimitWidth=F$e}),F$o(1,F$j,"atlasLimitHeight",function(){return F$j._atlasLimitHeight},function(F$e){F$j._atlasLimitHeight=F$e}),F$j._enable=function(){F$b.atlasEnable=!0},F$j._disable=function(){F$b.atlasEnable=!1},F$j.__init__=function(){F$j.atlasTextureWidth=2048,F$j.atlasTextureHeight=2048,F$j.maxTextureCount=6,F$j.atlasLimitWidth=512,F$j.atlasLimitHeight=512},F$j._atlasLimitWidth=0,F$j._atlasLimitHeight=0,F$j.gridSize=16,F$j.atlasTextureWidth=0,F$j.atlasTextureHeight=0,F$j.maxTextureCount=0,F$j._atlasRestore=0,F$j.BOARDER_TYPE_NO=0,F$j.BOARDER_TYPE_RIGHT=1,F$j.BOARDER_TYPE_LEFT=2,F$j.BOARDER_TYPE_BOTTOM=4,F$j.BOARDER_TYPE_TOP=8,F$j.BOARDER_TYPE_ALL=15,F$j._sid_=0,F$j._Instance=null,F$j}(),F$S=function(){function F$e(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return F$O(F$e,"laya.webgl.atlas.MergeFillInfo"),F$e}(),F$C=function(){function F$F(){}return F$O(F$F,"laya.webgl.canvas.BlendMode"),F$F._init_=function(F$e){F$F.fns=[F$F.BlendNormal,F$F.BlendAdd,F$F.BlendMultiply,F$F.BlendScreen,F$F.BlendOverlay,F$F.BlendLight,F$F.BlendMask,F$F.BlendDestinationOut],F$F.targetFns=[F$F.BlendNormalTarget,F$F.BlendAddTarget,F$F.BlendMultiplyTarget,F$F.BlendScreenTarget,F$F.BlendOverlayTarget,F$F.BlendLightTarget,F$F.BlendMask,F$F.BlendDestinationOut]},F$F.BlendNormal=function(F$e){F$e.blendFunc(1,771)},F$F.BlendAdd=function(F$e){F$e.blendFunc(1,772)},F$F.BlendMultiply=function(F$e){F$e.blendFunc(774,771)},F$F.BlendScreen=function(F$e){F$e.blendFunc(1,1)},F$F.BlendOverlay=function(F$e){F$e.blendFunc(1,769)},F$F.BlendLight=function(F$e){F$e.blendFunc(1,1)},F$F.BlendNormalTarget=function(F$e){F$e.blendFunc(1,771)},F$F.BlendAddTarget=function(F$e){F$e.blendFunc(1,772)},F$F.BlendMultiplyTarget=function(F$e){F$e.blendFunc(774,771)},F$F.BlendScreenTarget=function(F$e){F$e.blendFunc(1,1)},F$F.BlendOverlayTarget=function(F$e){F$e.blendFunc(1,769)},F$F.BlendLightTarget=function(F$e){F$e.blendFunc(1,1)},F$F.BlendMask=function(F$e){F$e.blendFunc(0,770)},F$F.BlendDestinationOut=function(F$e){F$e.blendFunc(0,0)},F$F.activeBlendFunction=null,F$F.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],F$F.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},F$F.NORMAL="normal",F$F.ADD="add",F$F.MULTIPLY="multiply",F$F.SCREEN="screen",F$F.LIGHT="light",F$F.OVERLAY="overlay",F$F.DESTINATIONOUT="destination-out",F$F.fns=[],F$F.targetFns=[],F$F}(),F$u=function(){function F$a(F$e){this._color=F$I.create("black"),this.setValue(F$e)}F$O(F$a,"laya.webgl.canvas.DrawStyle");var F$e=F$a.prototype;return F$e.setValue=function(F$e){if(F$e){if("string"==typeof F$e)return void(this._color=F$I.create(F$e));if(F$e instanceof laya.utils.Color)return void(this._color=F$e)}},F$e.reset=function(){this._color=F$I.create("black")},F$e.equal=function(F$e){return"string"==typeof F$e?this._color.strColor===F$e:F$e instanceof laya.utils.Color&&this._color.numColor===F$e.numColor},F$e.toColorStr=function(){return this._color.strColor},F$a.create=function(F$e){var F$F;if(F$e&&("string"==typeof F$e?F$F=F$I.create(F$e):F$e instanceof laya.utils.Color&&(F$F=F$e),F$F))return F$F._drawStyle||(F$F._drawStyle=new F$a(F$e));return laya.webgl.canvas.DrawStyle.DEFAULT},F$Y(F$a,["DEFAULT",function(){return this.DEFAULT=new F$a("#000000")}]),F$a}(),F$x=function(){function F$e(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];F$Me.mainContext;this.ib=F$ce.create(35048),this.vb=F$he.create(5)}F$O(F$e,"laya.webgl.canvas.Path");var F$F=F$e.prototype;return F$F.addPoint=function(F$e,F$F){this.tempArray.push(F$e,F$F)},F$F.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},F$F.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},F$F.polygon=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y;return this.geomatrys.push(this._curGeomatry=F$Y=new F$Ue(F$e,F$F,F$a,F$o,F$E,F$s)),F$o||(F$Y.fill=!1),null==F$s&&(F$Y.borderWidth=0),F$Y},F$F.setGeomtry=function(F$e){this.geomatrys.push(this._curGeomatry=F$e)},F$F.drawLine=function(F$e,F$F,F$a,F$o,F$E){var F$s;return this.closePath?this.geomatrys.push(this._curGeomatry=F$s=new F$Ae(F$e,F$F,F$a,F$o,F$E)):this.geomatrys.push(this._curGeomatry=F$s=new F$Ge(F$e,F$F,F$a,F$o,F$E)),F$s.fill=!1,F$s},F$F.update=function(){var F$e=this.ib._byteLength,F$F=this.geomatrys.length;this.offset=F$e;for(var F$a=this.geoStart;F$a<F$F;F$a++)this.geomatrys[F$a].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=F$F,this.count=(this.ib._byteLength-F$e)/F$le.BYTES_PIDX},F$F.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},F$F.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},F$e}(),F$N=function(){function F$_(){}F$O(F$_,"laya.webgl.canvas.save.SaveBase");var F$e=F$_.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!1},F$e.restore=function(F$e){this._dataObj[this._valueName]=this._value,(F$_._cache[F$_._cache._length++]=this)._newSubmit&&(F$e._curSubmit=F$se.RENDERBASE,F$e._renderKey=0)},F$_._createArray=function(){var F$e=[];return F$e._length=0,F$e},F$_._init=function(){var F$e=F$_._namemap={};return F$e[1]="ALPHA",F$e[2]="fillStyle",F$e[8]="font",F$e[256]="lineWidth",F$e[512]="strokeStyle",F$e[8192]="_mergeID",F$e[1024]=F$e[2048]=F$e[4096]=[],F$e[16384]="textBaseline",F$e[32768]="textAlign",F$e[65536]="_nBlendType",F$e[1048576]="shader",F$e[2097152]="filters",F$e},F$_.save=function(F$e,F$F,F$a,F$o){if((F$e._saveMark._saveuse&F$F)!==F$F){F$e._saveMark._saveuse|=F$F;var F$E=F$_._cache,F$s=0<F$E._length?F$E[--F$E._length]:new F$_;F$s._value=F$a[F$s._valueName=F$_._namemap[F$F]],F$s._dataObj=F$a,F$s._newSubmit=F$o;var F$Y=F$e._save;F$Y[F$Y._length++]=F$s}},F$_._cache=laya.webgl.canvas.save.SaveBase._createArray(),F$_._namemap=F$_._init(),F$_}(),F$X=function(){function F$s(){this._clipRect=new F$K}F$O(F$s,"laya.webgl.canvas.save.SaveClipRect");var F$e=F$s.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!1},F$e.restore=function(F$e){F$e._clipRect=this._clipSaveRect,(F$s._cache[F$s._cache._length++]=this)._submitScissor.submitLength=F$e._submits._length-this._submitScissor.submitIndex,F$e._curSubmit=F$se.RENDERBASE,F$e._renderKey=0},F$s.save=function(F$e,F$F){if(131072!=(131072&F$e._saveMark._saveuse)){F$e._saveMark._saveuse|=131072;var F$a=F$s._cache,F$o=0<F$a._length?F$a[--F$a._length]:new F$s;F$o._clipSaveRect=F$e._clipRect,F$e._clipRect=F$o._clipRect.copyFrom(F$e._clipRect),F$o._submitScissor=F$F;var F$E=F$e._save;F$E[F$E._length++]=F$o}},F$Y(F$s,["_cache",function(){return this._cache=F$N._createArray()}]),F$s}(),F$W=function(){function F$q(){this._contextX=0,this._contextY=0,this._clipRect=new F$K,this._rect=new F$K,this._matrix=new F$B}F$O(F$q,"laya.webgl.canvas.save.SaveClipRectStencil");var F$e=F$q.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!1},F$e.restore=function(F$e){F$ge.restore(F$e,this._rect,this._saveMatrix,this._contextX,this._contextY),F$e._clipRect=this._clipSaveRect,F$e._curMat=this._saveMatrix,F$e._x=this._contextX,F$e._y=this._contextY,F$q._cache[F$q._cache._length++]=this,F$e._curSubmit=F$se.RENDERBASE},F$q.save=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){if(262144!=(262144&F$e._saveMark._saveuse)){F$e._saveMark._saveuse|=262144;var F$g=F$q._cache,F$n=0<F$g._length?F$g[--F$g._length]:new F$q;F$n._clipSaveRect=F$e._clipRect,F$n._clipRect.setTo(F$Y,F$_,F$R,F$H),F$e._clipRect=F$n._clipRect,F$n._rect.x=F$a,F$n._rect.y=F$o,F$n._rect.width=F$E,F$n._rect.height=F$s,F$n._contextX=F$e._x,F$n._contextY=F$e._y,F$n._saveMatrix=F$e._curMat,F$e._curMat.copyTo(F$n._matrix),F$e._curMat=F$n._matrix,F$n._submitStencil=F$F;var F$O=F$e._save;F$O[F$O._length++]=F$n}},F$Y(F$q,["_cache",function(){return this._cache=F$N._createArray()}]),F$q}(),F$f=function(){function F$o(){this._saveuse=0}F$O(F$o,"laya.webgl.canvas.save.SaveMark");var F$e=F$o.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!0},F$e.restore=function(F$e){F$e._saveMark=this._preSaveMark,F$o._no[F$o._no._length++]=this},F$o.Create=function(F$e){var F$F=F$o._no,F$a=0<F$F._length?F$F[--F$F._length]:new F$o;return F$a._saveuse=0,F$a._preSaveMark=F$e._saveMark,F$e._saveMark=F$a},F$Y(F$o,["_no",function(){return this._no=F$N._createArray()}]),F$o}(),F$i=function(){function F$s(){this._matrix=new F$B}F$O(F$s,"laya.webgl.canvas.save.SaveTransform");var F$e=F$s.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!1},F$e.restore=function(F$e){F$e._curMat=this._savematrix,F$s._no[F$s._no._length++]=this},F$s.save=function(F$e){var F$F=F$e._saveMark;if(2048!=(2048&F$F._saveuse)){F$F._saveuse|=2048;var F$a=F$s._no,F$o=0<F$a._length?F$a[--F$a._length]:new F$s;F$o._savematrix=F$e._curMat,F$e._curMat=F$e._curMat.copyTo(F$o._matrix);var F$E=F$e._save;F$E[F$E._length++]=F$o}},F$Y(F$s,["_no",function(){return this._no=F$N._createArray()}]),F$s}(),F$Q=function(){function F$E(){}F$O(F$E,"laya.webgl.canvas.save.SaveTranslate");var F$e=F$E.prototype;return F$m.imps(F$e,{"laya.webgl.canvas.save.ISaveData":!0}),F$e.isSaveMark=function(){return!1},F$e.restore=function(F$e){F$e._curMat;F$e._x=this._x,F$e._y=this._y,F$E._no[F$E._no._length++]=this},F$E.save=function(F$e){var F$F=F$E._no,F$a=0<F$F._length?F$F[--F$F._length]:new F$E;F$a._x=F$e._x,F$a._y=F$e._y;var F$o=F$e._save;F$o[F$o._length++]=F$a},F$Y(F$E,["_no",function(){return this._no=F$N._createArray()}]),F$E}(),F$t=function(){function F$e(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new F$K}F$O(F$e,"laya.webgl.resource.RenderTargetMAX");var F$F=F$e.prototype;return F$F.setSP=function(F$e){this._sp=F$e},F$F.size=function(F$e,F$F){var F$a=this;this._width!==F$e||this._height!==F$F?(this.repaint=!0,this._width=F$e,this._height=F$F,this.target?this.target.size(F$e,F$F):this.target=F$pe.create(F$e,F$F),this.target.hasListener("recovered")||this.target.on("recovered",this,function(F$e){F$m.timer.callLater(F$a._sp,F$a._sp.repaint)})):this.target.size(F$e,F$F)},F$F._flushToTarget=function(F$e,F$F){if(!F$F._destroy){var F$a=F$$e.worldScissorTest,F$o=F$$e.worldClipRect;F$$e.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,F$$e.worldScissorTest=!1,F$Me.mainContext.disable(3089);var F$E=F$$e.worldAlpha,F$s=F$$e.worldMatrix4,F$Y=F$$e.worldMatrix,F$_=F$$e.worldFilters,F$R=F$$e.worldShaderDefines;if(F$$e.worldMatrix=F$B.EMPTY,F$$e.restoreTempArray(),F$$e.worldMatrix4=F$$e.TEMPMAT4_ARRAY,F$$e.worldAlpha=1,F$$e.worldFilters=null,F$$e.worldShaderDefines=null,F$Te.activeShader=null,F$F.start(),F$b.showCanvasMark?F$F.clear(0,1,0,.3):F$F.clear(0,0,0,0),F$e.flush(),F$F.end(),F$Te.activeShader=null,F$$e.worldAlpha=F$E,F$$e.worldMatrix4=F$s,F$$e.worldMatrix=F$Y,F$$e.worldFilters=F$_,F$$e.worldShaderDefines=F$R,F$$e.worldScissorTest=F$a){var F$H=F$$e.height-F$o.y-F$o.height;F$Me.mainContext.scissor(F$o.x,F$H,F$o.width,F$o.height),F$Me.mainContext.enable(3089)}F$$e.worldClipRect=F$o}},F$F.flush=function(F$e){this.repaint&&(this._flushToTarget(F$e,this.target),this.repaint=!1)},F$F.drawTo=function(F$e,F$F,F$a,F$o,F$E){F$e.drawTexture(this.target.getTexture(),F$F,F$a,F$o,F$E,0,0)},F$F.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},F$e}(),F$c=function(){function F$e(){this.ALPHA=1,this.shaderType=0,this.defines=new F$Ve}return F$O(F$e,"laya.webgl.shader.d2.Shader2D"),F$e.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},F$e.__init__=function(){var F$e,F$F;F$fe.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),F$fe.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),F$fe.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),F$fe.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),F$fe.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),F$fe.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),F$fe.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),F$fe.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),F$e="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$F='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$fe.preCompile2D(0,1,F$e,F$F,null),F$e="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",F$F='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',F$fe.preCompile2D(0,2,F$e,F$F,null),F$e="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",F$F="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",F$fe.preCompile2D(0,4,F$e,F$F,null),F$e="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$F='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$fe.preCompile2D(0,256,F$e,F$F,null),F$e="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",F$F="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",F$fe.preCompile2D(0,512,F$e,F$F,null)},F$e}(),F$h=function(){function F$F(F$e,F$F,F$a){this._value=0,this._name2int=F$e,this._int2name=F$F,this._int2nameMap=F$a}F$O(F$F,"laya.webgl.shader.ShaderDefines");var F$e=F$F.prototype;return F$e.add=function(F$e){return"string"==typeof F$e&&(F$e=this._name2int[F$e]),this._value|=F$e,this._value},F$e.addInt=function(F$e){return this._value|=F$e,this._value},F$e.remove=function(F$e){return"string"==typeof F$e&&(F$e=this._name2int[F$e]),this._value&=~F$e,this._value},F$e.isDefine=function(F$e){return(this._value&F$e)===F$e},F$e.getValue=function(){return this._value},F$e.setValue=function(F$e){this._value=F$e},F$e.toNameDic=function(){var F$e=this._int2nameMap[this._value];return F$e||F$F._toText(this._value,this._int2name,this._int2nameMap)},F$F._reg=function(F$e,F$F,F$a,F$o){F$o[F$a[F$e]=F$F]=F$e},F$F._toText=function(F$e,F$F,F$a){var F$o=F$a[F$e];if(F$o)return F$o;for(var F$E={},F$s=1,F$Y=0;F$Y<32&&!(F$e<(F$s=1<<F$Y));F$Y++)if(F$e&F$s){var F$_=F$F[F$s];F$_&&(F$E[F$_]="")}return F$a[F$e]=F$E},F$F._toInt=function(F$e,F$F){for(var F$a=F$e.split("."),F$o=0,F$E=0,F$s=F$a.length;F$E<F$s;F$E++){var F$Y=F$F[F$a[F$E]];if(!F$Y)throw new Error("Defines to int err:"+F$e+"/"+F$a[F$E]);F$o|=F$Y}return F$o},F$F}(),F$ee=function(){function F$Y(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new F$B}F$O(F$Y,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var F$e=F$Y.prototype;return F$e.init=function(F$e,F$F,F$a){if(F$F)this._vs=F$F;else{this._vs=[];var F$o=F$e.width,F$E=F$e.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(F$o,0,1,0,1,1,1,1),this._vs.push(F$o,F$E,1,1,1,1,1,1),this._vs.push(0,F$E,0,1,1,1,1,1)}F$a?this._ps=F$a:(F$Y._defaultPS||(F$Y._defaultPS=[]).push(0,1,3,3,1,2),this._ps=F$Y._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=F$e},F$e.init2=function(F$e,F$F,F$a,F$o,F$E){this.transform&&(this.transform=null),F$a?this._ps=F$a:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=F$o,this._uvs=F$E,this.mEleNum=this._ps.length,this.mTexture=F$e,(F$j.isConchNode||F$j.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},F$e._initMyData=function(){var F$e=0,F$F=0,F$a=4*this._verticles.length;this._vs=F$Y._tempVS;var F$o=!1;if(F$j.isConchNode||F$j.isConchApp?(this._vs.length=F$a,F$o=!0):this._vs.length<F$a&&(this._vs.length=F$a,F$o=!0),F$Y._tVSLen=F$a,F$o)for(;F$e<F$a;)this._vs[F$e]=this._verticles[F$F],this._vs[F$e+1]=this._verticles[F$F+1],this._vs[F$e+2]=this._uvs[F$F],this._vs[F$e+3]=this._uvs[F$F+1],this._vs[F$e+4]=1,this._vs[F$e+5]=1,this._vs[F$e+6]=1,this._vs[F$e+7]=1,F$e+=8,F$F+=2;else for(;F$e<F$a;)this._vs[F$e]=this._verticles[F$F],this._vs[F$e+1]=this._verticles[F$F+1],this._vs[F$e+2]=this._uvs[F$F],this._vs[F$e+3]=this._uvs[F$F+1],F$e+=8,F$F+=2},F$e.getData2=function(F$e,F$F,F$a){var F$o;this.mVBBuffer=F$e,this.mIBBuffer=F$F,this._initMyData(),F$e.appendEx2(this._vs,Float32Array,F$Y._tVSLen,4),this._indexStart=F$F._byteLength,(F$o=F$Y._tempIB).length<this._ps.length&&(F$o.length=this._ps.length);for(var F$E=0,F$s=this._ps.length;F$E<F$s;F$E++)F$o[F$E]=this._ps[F$E]+F$a;F$F.appendEx2(F$o,Uint16Array,this._ps.length,2)},F$e.getData=function(F$e,F$F,F$a){if(this.mVBBuffer=F$e,this.mIBBuffer=F$F,F$e.append(this.mVBData),this._indexStart=F$F._byteLength,this.mIBData.start!=F$a){for(var F$o=0,F$E=this._ps.length;F$o<F$E;F$o++)this.mIBData[F$o]=this._ps[F$o]+F$a;this.mIBData.start=F$a}F$F.append(this.mIBData)},F$e.render=function(F$e,F$F,F$a){if(F$j.isWebGL&&this.mTexture){F$e._renderKey=0,F$e._shader2D.glTexture=null,F$Fe.getInstance().addSkinMesh(this);var F$o=F$se.createShape(F$e,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,F$Le.create(512,0));this.transform||(this.transform=F$B.EMPTY),this.transform.translate(F$F,F$a),F$B.mul(this.transform,F$e._curMat,this._tempMatrix),this.transform.translate(-F$F,-F$a);var F$E=F$o.shaderValue,F$s=F$E.u_mmat2||F$$e.getMatrArray();F$$e.mat2MatArray(this._tempMatrix,F$s),F$E.textureHost=this.mTexture,F$E.offsetX=0,F$E.offsetY=0,F$E.u_mmat2=F$s,F$E.ALPHA=F$e._shader2D.ALPHA,F$e._submits[F$e._submits._length++]=F$o}else F$j.isConchApp&&this.mTexture&&(this.transform||(this.transform=F$B.EMPTY),F$e.setSkinMesh&&F$e.setSkinMesh(F$F,F$a,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},F$Y._tempVS=[],F$Y._tempIB=[],F$Y._defaultPS=null,F$Y._tVSLen=0,F$Y}(),F$Fe=function(){function F$e(){this.ib=null,this.vb=null;F$Me.mainContext;this.ib=F$ce.create(35048),this.vb=F$he.create(8)}F$O(F$e,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var F$F=F$e.prototype;return F$F.addSkinMesh=function(F$e){F$e.getData2(this.vb,this.ib,this.vb._byteLength/32)},F$F.reset=function(){this.vb.clear(),this.ib.clear()},F$e.getInstance=function(){return F$e.instance=F$e.instance||new F$e},F$e.instance=null,F$e}(),F$ae=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===F$R&&(F$R=0),this.x=F$e,this.y=F$F,this.width=F$a,this.height=F$o,this.edges=F$E,this.color=F$s,this.borderWidth=F$Y,this.borderColor=F$_}F$O(F$e,"laya.webgl.shapes.BasePoly");var F$F=F$e.prototype;return F$m.imps(F$F,{"laya.webgl.shapes.IShape":!0}),F$F.getData=function(F$e,F$F,F$a){},F$F.rebuild=function(F$e){},F$F.setMatrix=function(F$e){},F$F.needUpdate=function(F$e){return!0},F$F.sector=function(F$e,F$F,F$a){var F$o=this.x,F$E=this.y,F$s=this.edges,F$Y=(this.r1-this.r0)/F$s,F$_=this.width,F$R=this.height,F$H=this.color,F$g=(F$H>>16&255)/255,F$n=(F$H>>8&255)/255,F$O=(255&F$H)/255;F$e.push(F$o,F$E,F$g,F$n,F$O);for(var F$q=0;F$q<F$s+1;F$q++)F$e.push(F$o+Math.sin(F$Y*F$q+this.r0)*F$_,F$E+Math.cos(F$Y*F$q+this.r0)*F$R),F$e.push(F$g,F$n,F$O);for(F$q=0;F$q<F$s;F$q++)F$F.push(F$a,F$a+F$q+1,F$a+F$q+2)},F$F.createLine2=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_,F$R,F$H,F$g,F$n,F$O,F$q,F$I,F$l,F$P,F$j,F$$,F$y,F$M,F$D,F$m,F$b,F$L,F$B,F$v=F$e.concat(),F$K=F$E,F$V=this.borderColor,F$G=(F$V>>16&255)/255,F$A=(F$V>>8&255)/255,F$U=(255&F$V)/255,F$r=F$v.length/2,F$Z=F$o,F$z=F$a/2;F$R=F$v[0],F$H=F$v[1],F$l=F$R-(F$g=F$v[2]),F$I=(F$I=-(F$H-(F$n=F$v[3])))/(F$B=Math.sqrt(F$I*F$I+F$l*F$l))*F$z,F$l=F$l/F$B*F$z,F$K.push(F$R-F$I+this.x,F$H-F$l+this.y,F$G,F$A,F$U,F$R+F$I+this.x,F$H+F$l+this.y,F$G,F$A,F$U);for(var F$T=1;F$T<F$r-1;F$T++)F$R=F$v[2*(F$T-1)],F$H=F$v[2*(F$T-1)+1],F$g=F$v[2*F$T],F$n=F$v[2*F$T+1],F$O=F$v[2*(F$T+1)],F$q=F$v[2*(F$T+1)+1],F$l=F$R-F$g,F$j=F$g-F$O,F$M=(-(F$I=(F$I=-(F$H-F$n))/(F$B=Math.sqrt(F$I*F$I+F$l*F$l))*F$z)+F$R)*(-(F$l=F$l/F$B*F$z)+F$n)-(-F$I+F$g)*(-F$l+F$H),F$b=(-(F$P=(F$P=-(F$n-F$q))/(F$B=Math.sqrt(F$P*F$P+F$j*F$j))*F$z)+F$O)*(-(F$j=F$j/F$B*F$z)+F$n)-(-F$P+F$g)*(-F$j+F$q),F$L=(F$$=-F$l+F$H-(-F$l+F$n))*(F$m=-F$P+F$g-(-F$P+F$O))-(F$D=-F$j+F$q-(-F$j+F$n))*(F$y=-F$I+F$g-(-F$I+F$R)),Math.abs(F$L)<.1?(F$L+=10.1,F$K.push(F$g-F$I+this.x,F$n-F$l+this.y,F$G,F$A,F$U,F$g+F$I+this.x,F$n+F$l+this.y,F$G,F$A,F$U)):(((F$Y=(F$y*F$b-F$m*F$M)/F$L)-F$g)*(F$Y-F$g)+((F$_=(F$D*F$M-F$$*F$b)/F$L)-F$n)+(F$_-F$n),F$K.push(F$Y+this.x,F$_+this.y,F$G,F$A,F$U,F$g-(F$Y-F$g)+this.x,F$n-(F$_-F$n)+this.y,F$G,F$A,F$U));F$R=F$v[F$v.length-4],F$H=F$v[F$v.length-3],F$l=F$R-(F$g=F$v[F$v.length-2]),F$I=(F$I=-(F$H-(F$n=F$v[F$v.length-1])))/(F$B=Math.sqrt(F$I*F$I+F$l*F$l))*F$z,F$l=F$l/F$B*F$z,F$K.push(F$g-F$I+this.x,F$n-F$l+this.y,F$G,F$A,F$U,F$g+F$I+this.x,F$n+F$l+this.y,F$G,F$A,F$U);var F$p=F$s;for(F$T=1;F$T<F$p;F$T++)F$F.push(F$Z+2*(F$T-1),F$Z+2*(F$T-1)+1,F$Z+2*F$T+1,F$Z+2*F$T+1,F$Z+2*F$T,F$Z+2*(F$T-1));return F$K},F$F.createLine=function(F$e,F$F,F$a,F$o){var F$E=F$e.concat(),F$s=F$e,F$Y=this.borderColor,F$_=(F$Y>>16&255)/255,F$R=(F$Y>>8&255)/255,F$H=(255&F$Y)/255;F$E.splice(0,5);var F$g,F$n,F$O,F$q,F$I,F$l,F$P,F$j,F$$,F$y,F$M,F$D,F$m,F$b,F$L,F$B,F$v,F$K,F$V,F$G,F$A=F$E.length/5,F$U=F$o,F$r=F$a/2;F$O=F$E[0],F$q=F$E[1],F$y=F$O-(F$I=F$E[5]),F$$=(F$$=-(F$q-(F$l=F$E[6])))/(F$G=Math.sqrt(F$$*F$$+F$y*F$y))*F$r,F$y=F$y/F$G*F$r,F$s.push(F$O-F$$,F$q-F$y,F$_,F$R,F$H,F$O+F$$,F$q+F$y,F$_,F$R,F$H);for(var F$Z=1;F$Z<F$A-1;F$Z++)F$O=F$E[5*(F$Z-1)],F$q=F$E[5*(F$Z-1)+1],F$I=F$E[5*F$Z],F$l=F$E[5*F$Z+1],F$P=F$E[5*(F$Z+1)],F$j=F$E[5*(F$Z+1)+1],F$y=F$O-F$I,F$D=F$I-F$P,F$L=(-(F$$=(F$$=-(F$q-F$l))/(F$G=Math.sqrt(F$$*F$$+F$y*F$y))*F$r)+F$O)*(-(F$y=F$y/F$G*F$r)+F$l)-(-F$$+F$I)*(-F$y+F$q),F$K=(-(F$M=(F$M=-(F$l-F$j))/(F$G=Math.sqrt(F$M*F$M+F$D*F$D))*F$r)+F$P)*(-(F$D=F$D/F$G*F$r)+F$l)-(-F$M+F$I)*(-F$D+F$j),F$V=(F$m=-F$y+F$q-(-F$y+F$l))*(F$v=-F$M+F$I-(-F$M+F$P))-(F$B=-F$D+F$j-(-F$D+F$l))*(F$b=-F$$+F$I-(-F$$+F$O)),Math.abs(F$V)<.1?(F$V+=10.1,F$s.push(F$I-F$$,F$l-F$y,F$_,F$R,F$H,F$I+F$$,F$l+F$y,F$_,F$R,F$H)):(((F$g=(F$b*F$K-F$v*F$L)/F$V)-F$I)*(F$g-F$I)+((F$n=(F$B*F$L-F$m*F$K)/F$V)-F$l)+(F$n-F$l),F$s.push(F$g,F$n,F$_,F$R,F$H,F$I-(F$g-F$I),F$l-(F$n-F$l),F$_,F$R,F$H));F$O=F$E[F$E.length-10],F$q=F$E[F$E.length-9],F$y=F$O-(F$I=F$E[F$E.length-5]),F$$=(F$$=-(F$q-(F$l=F$E[F$E.length-4])))/(F$G=Math.sqrt(F$$*F$$+F$y*F$y))*F$r,F$y=F$y/F$G*F$r,F$s.push(F$I-F$$,F$l-F$y,F$_,F$R,F$H,F$I+F$$,F$l+F$y,F$_,F$R,F$H);var F$z=this.edges+1;for(F$Z=1;F$Z<F$z;F$Z++)F$F.push(F$U+2*(F$Z-1),F$U+2*(F$Z-1)+1,F$U+2*F$Z+1,F$U+2*F$Z+1,F$U+2*F$Z,F$U+2*(F$Z-1));return F$s},F$F.createLoopLine=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$e.concat(),F$_=F$E||F$e,F$R=this.borderColor,F$H=(F$R>>16&255)/255,F$g=(F$R>>8&255)/255,F$n=(255&F$R)/255;F$Y.splice(0,5);var F$O=[F$Y[0],F$Y[1]],F$q=[F$Y[F$Y.length-5],F$Y[F$Y.length-4]],F$I=F$q[0]+.5*(F$O[0]-F$q[0]),F$l=F$q[1]+.5*(F$O[1]-F$q[1]);F$Y.unshift(F$I,F$l,0,0,0),F$Y.push(F$I,F$l,0,0,0);var F$P,F$j,F$$,F$y,F$M,F$D,F$m,F$b,F$L,F$B,F$v,F$K,F$V,F$G,F$A,F$U,F$r,F$Z,F$z,F$T,F$p=F$Y.length/5,F$J=F$o,F$k=F$a/2;F$$=F$Y[0],F$y=F$Y[1],F$B=F$$-(F$M=F$Y[5]),F$L=(F$L=-(F$y-(F$D=F$Y[6])))/(F$T=Math.sqrt(F$L*F$L+F$B*F$B))*F$k,F$B=F$B/F$T*F$k,F$_.push(F$$-F$L,F$y-F$B,F$H,F$g,F$n,F$$+F$L,F$y+F$B,F$H,F$g,F$n);for(var F$d=1;F$d<F$p-1;F$d++)F$$=F$Y[5*(F$d-1)],F$y=F$Y[5*(F$d-1)+1],F$M=F$Y[5*F$d],F$D=F$Y[5*F$d+1],F$m=F$Y[5*(F$d+1)],F$b=F$Y[5*(F$d+1)+1],F$B=F$$-F$M,F$K=F$M-F$m,F$A=(-(F$L=(F$L=-(F$y-F$D))/(F$T=Math.sqrt(F$L*F$L+F$B*F$B))*F$k)+F$$)*(-(F$B=F$B/F$T*F$k)+F$D)-(-F$L+F$M)*(-F$B+F$y),F$Z=(-(F$v=(F$v=-(F$D-F$b))/(F$T=Math.sqrt(F$v*F$v+F$K*F$K))*F$k)+F$m)*(-(F$K=F$K/F$T*F$k)+F$D)-(-F$v+F$M)*(-F$K+F$b),F$z=(F$V=-F$B+F$y-(-F$B+F$D))*(F$r=-F$v+F$M-(-F$v+F$m))-(F$U=-F$K+F$b-(-F$K+F$D))*(F$G=-F$L+F$M-(-F$L+F$$)),Math.abs(F$z)<.1?(F$z+=10.1,F$_.push(F$M-F$L,F$D-F$B,F$H,F$g,F$n,F$M+F$L,F$D+F$B,F$H,F$g,F$n)):(((F$P=(F$G*F$Z-F$r*F$A)/F$z)-F$M)*(F$P-F$M)+((F$j=(F$U*F$A-F$V*F$Z)/F$z)-F$D)+(F$j-F$D),F$_.push(F$P,F$j,F$H,F$g,F$n,F$M-(F$P-F$M),F$D-(F$j-F$D),F$H,F$g,F$n));F$s&&(F$F=F$s);var F$w=this.edges+1;for(F$d=1;F$d<F$w;F$d++)F$F.push(F$J+2*(F$d-1),F$J+2*(F$d-1)+1,F$J+2*F$d+1,F$J+2*F$d+1,F$J+2*F$d,F$J+2*(F$d-1));return F$F.push(F$J+2*(F$d-1),F$J+2*(F$d-1)+1,F$J+1,F$J+1,F$J,F$J+2*(F$d-1)),F$_},F$e}(),F$oe=function(){function F$l(){}return F$O(F$l,"laya.webgl.shapes.Earcut"),F$l.earcut=function(F$e,F$F,F$a){F$a=F$a||2;var F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g=F$F&&F$F.length,F$n=F$g?F$F[0]*F$a:F$e.length,F$O=F$l.linkedList(F$e,0,F$n,F$a,!0),F$q=[];if(!F$O)return F$q;if(F$g&&(F$O=F$l.eliminateHoles(F$e,F$F,F$O,F$a)),F$e.length>80*F$a){F$o=F$s=F$e[0],F$E=F$Y=F$e[1];for(var F$I=F$a;F$I<F$n;F$I+=F$a)(F$_=F$e[F$I])<F$o&&(F$o=F$_),(F$R=F$e[F$I+1])<F$E&&(F$E=F$R),F$s<F$_&&(F$s=F$_),F$Y<F$R&&(F$Y=F$R);F$H=0!==(F$H=Math.max(F$s-F$o,F$Y-F$E))?1/F$H:0}return F$l.earcutLinked(F$O,F$q,F$a,F$o,F$E,F$H),F$q},F$l.linkedList=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y;if(F$E===0<F$l.signedArea(F$e,F$F,F$a,F$o))for(F$s=F$F;F$s<F$a;F$s+=F$o)F$Y=F$l.insertNode(F$s,F$e[F$s],F$e[F$s+1],F$Y);else for(F$s=F$a-F$o;F$F<=F$s;F$s-=F$o)F$Y=F$l.insertNode(F$s,F$e[F$s],F$e[F$s+1],F$Y);return F$Y&&F$l.equals(F$Y,F$Y.next)&&(F$l.removeNode(F$Y),F$Y=F$Y.next),F$Y},F$l.filterPoints=function(F$e,F$F){if(!F$e)return F$e;F$F||(F$F=F$e);var F$a,F$o=F$e;do{if(F$a=!1,F$o.steiner||!F$l.equals(F$o,F$o.next)&&0!==F$l.area(F$o.prev,F$o,F$o.next))F$o=F$o.next;else{if(F$l.removeNode(F$o),(F$o=F$F=F$o.prev)===F$o.next)break;F$a=!0}}while(F$a||F$o!==F$F);return F$F},F$l.earcutLinked=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(F$e){!F$Y&&F$s&&F$l.indexCurve(F$e,F$o,F$E,F$s);for(var F$_,F$R,F$H=F$e;F$e.prev!==F$e.next;)if(F$_=F$e.prev,F$R=F$e.next,F$s?F$l.isEarHashed(F$e,F$o,F$E,F$s):F$l.isEar(F$e))F$F.push(F$_.i/F$a),F$F.push(F$e.i/F$a),F$F.push(F$R.i/F$a),F$l.removeNode(F$e),F$e=F$R.next,F$H=F$R.next;else if((F$e=F$R)===F$H){F$Y?1===F$Y?(F$e=F$l.cureLocalIntersections(F$e,F$F,F$a),F$l.earcutLinked(F$e,F$F,F$a,F$o,F$E,F$s,2)):2===F$Y&&F$l.splitEarcut(F$e,F$F,F$a,F$o,F$E,F$s):F$l.earcutLinked(F$l.filterPoints(F$e,null),F$F,F$a,F$o,F$E,F$s,1);break}}},F$l.isEar=function(F$e){var F$F=F$e.prev,F$a=F$e,F$o=F$e.next;if(0<=F$l.area(F$F,F$a,F$o))return!1;for(var F$E=F$e.next.next;F$E!==F$e.prev;){if(F$l.pointInTriangle(F$F.x,F$F.y,F$a.x,F$a.y,F$o.x,F$o.y,F$E.x,F$E.y)&&0<=F$l.area(F$E.prev,F$E,F$E.next))return!1;F$E=F$E.next}return!0},F$l.isEarHashed=function(F$e,F$F,F$a,F$o){var F$E=F$e.prev,F$s=F$e,F$Y=F$e.next;if(0<=F$l.area(F$E,F$s,F$Y))return!1;for(var F$_=F$E.x<F$s.x?F$E.x<F$Y.x?F$E.x:F$Y.x:F$s.x<F$Y.x?F$s.x:F$Y.x,F$R=F$E.y<F$s.y?F$E.y<F$Y.y?F$E.y:F$Y.y:F$s.y<F$Y.y?F$s.y:F$Y.y,F$H=F$E.x>F$s.x?F$E.x>F$Y.x?F$E.x:F$Y.x:F$s.x>F$Y.x?F$s.x:F$Y.x,F$g=F$E.y>F$s.y?F$E.y>F$Y.y?F$E.y:F$Y.y:F$s.y>F$Y.y?F$s.y:F$Y.y,F$n=F$l.zOrder(F$_,F$R,F$F,F$a,F$o),F$O=F$l.zOrder(F$H,F$g,F$F,F$a,F$o),F$q=F$e.nextZ;F$q&&F$q.z<=F$O;){if(F$q!==F$e.prev&&F$q!==F$e.next&&F$l.pointInTriangle(F$E.x,F$E.y,F$s.x,F$s.y,F$Y.x,F$Y.y,F$q.x,F$q.y)&&0<=F$l.area(F$q.prev,F$q,F$q.next))return!1;F$q=F$q.nextZ}for(F$q=F$e.prevZ;F$q&&F$q.z>=F$n;){if(F$q!==F$e.prev&&F$q!==F$e.next&&F$l.pointInTriangle(F$E.x,F$E.y,F$s.x,F$s.y,F$Y.x,F$Y.y,F$q.x,F$q.y)&&0<=F$l.area(F$q.prev,F$q,F$q.next))return!1;F$q=F$q.prevZ}return!0},F$l.cureLocalIntersections=function(F$e,F$F,F$a){var F$o=F$e;do{var F$E=F$o.prev,F$s=F$o.next.next;!F$l.equals(F$E,F$s)&&F$l.intersects(F$E,F$o,F$o.next,F$s)&&F$l.locallyInside(F$E,F$s)&&F$l.locallyInside(F$s,F$E)&&(F$F.push(F$E.i/F$a),F$F.push(F$o.i/F$a),F$F.push(F$s.i/F$a),F$l.removeNode(F$o),F$l.removeNode(F$o.next),F$o=F$e=F$s),F$o=F$o.next}while(F$o!==F$e);return F$o},F$l.splitEarcut=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$e;do{for(var F$_=F$Y.next.next;F$_!==F$Y.prev;){if(F$Y.i!==F$_.i&&F$l.isValidDiagonal(F$Y,F$_)){var F$R=F$l.splitPolygon(F$Y,F$_);return F$Y=F$l.filterPoints(F$Y,F$Y.next),F$R=F$l.filterPoints(F$R,F$R.next),F$l.earcutLinked(F$Y,F$F,F$a,F$o,F$E,F$s),void F$l.earcutLinked(F$R,F$F,F$a,F$o,F$E,F$s)}F$_=F$_.next}F$Y=F$Y.next}while(F$Y!==F$e)},F$l.eliminateHoles=function(F$e,F$F,F$a,F$o){var F$E,F$s,F$Y,F$_,F$R,F$H=[];for(F$E=0,F$s=F$F.length;F$E<F$s;F$E++)F$Y=F$F[F$E]*F$o,F$_=F$E<F$s-1?F$F[F$E+1]*F$o:F$e.length,(F$R=F$l.linkedList(F$e,F$Y,F$_,F$o,!1))===F$R.next&&(F$R.steiner=!0),F$H.push(F$l.getLeftmost(F$R));for(F$H.sort(F$l.compareX),F$E=0;F$E<F$H.length;F$E++)F$l.eliminateHole(F$H[F$E],F$a),F$a=F$l.filterPoints(F$a,F$a.next);return F$a},F$l.compareX=function(F$e,F$F){return F$e.x-F$F.x},F$l.eliminateHole=function(F$e,F$F){if(F$F=F$l.findHoleBridge(F$e,F$F)){var F$a=F$l.splitPolygon(F$F,F$e);F$l.filterPoints(F$a,F$a.next)}},F$l.findHoleBridge=function(F$e,F$F){var F$a,F$o=F$F,F$E=F$e.x,F$s=F$e.y,F$Y=-1/0;do{if(F$s<=F$o.y&&F$s>=F$o.next.y&&F$o.next.y!==F$o.y){var F$_=F$o.x+(F$s-F$o.y)*(F$o.next.x-F$o.x)/(F$o.next.y-F$o.y);if(F$_<=F$E&&F$Y<F$_){if((F$Y=F$_)===F$E){if(F$s===F$o.y)return F$o;if(F$s===F$o.next.y)return F$o.next}F$a=F$o.x<F$o.next.x?F$o:F$o.next}}F$o=F$o.next}while(F$o!==F$F);if(!F$a)return null;if(F$E===F$Y)return F$a.prev;var F$R,F$H=F$a,F$g=F$a.x,F$n=F$a.y,F$O=1/0;for(F$o=F$a.next;F$o!==F$H;)F$E>=F$o.x&&F$o.x>=F$g&&F$E!==F$o.x&&F$l.pointInTriangle(F$s<F$n?F$E:F$Y,F$s,F$g,F$n,F$s<F$n?F$Y:F$E,F$s,F$o.x,F$o.y)&&((F$R=Math.abs(F$s-F$o.y)/(F$E-F$o.x))<F$O||F$R===F$O&&F$o.x>F$a.x)&&F$l.locallyInside(F$o,F$e)&&(F$a=F$o,F$O=F$R),F$o=F$o.next;return F$a},F$l.indexCurve=function(F$e,F$F,F$a,F$o){for(var F$E=F$e;null===F$E.z&&(F$E.z=F$l.zOrder(F$E.x,F$E.y,F$F,F$a,F$o)),F$E.prevZ=F$E.prev,F$E.nextZ=F$E.next,(F$E=F$E.next)!==F$e;);F$E.prevZ.nextZ=null,F$E.prevZ=null,F$l.sortLinked(F$E)},F$l.sortLinked=function(F$e){var F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H=1;do{for(F$a=F$e,F$s=F$e=null,F$Y=0;F$a;){for(F$Y++,F$o=F$a,F$F=F$_=0;F$F<F$H&&(F$_++,F$o=F$o.nextZ);F$F++);for(F$R=F$H;0<F$_||0<F$R&&F$o;)0!==F$_&&(0===F$R||!F$o||F$a.z<=F$o.z)?(F$a=(F$E=F$a).nextZ,F$_--):(F$o=(F$E=F$o).nextZ,F$R--),F$s?F$s.nextZ=F$E:F$e=F$E,F$E.prevZ=F$s,F$s=F$E;F$a=F$o}F$s.nextZ=null,F$H*=2}while(1<F$Y);return F$e},F$l.zOrder=function(F$e,F$F,F$a,F$o,F$E){return(F$e=1431655765&((F$e=858993459&((F$e=252645135&((F$e=16711935&((F$e=32767*(F$e-F$a)*F$E)|F$e<<8))|F$e<<4))|F$e<<2))|F$e<<1))|(F$F=1431655765&((F$F=858993459&((F$F=252645135&((F$F=16711935&((F$F=32767*(F$F-F$o)*F$E)|F$F<<8))|F$F<<4))|F$F<<2))|F$F<<1))<<1},F$l.getLeftmost=function(F$e){for(var F$F=F$e,F$a=F$e;F$F.x<F$a.x&&(F$a=F$F),(F$F=F$F.next)!==F$e;);return F$a},F$l.pointInTriangle=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){return 0<=(F$E-F$Y)*(F$F-F$_)-(F$e-F$Y)*(F$s-F$_)&&0<=(F$e-F$Y)*(F$o-F$_)-(F$a-F$Y)*(F$F-F$_)&&0<=(F$a-F$Y)*(F$s-F$_)-(F$E-F$Y)*(F$o-F$_)},F$l.isValidDiagonal=function(F$e,F$F){return F$e.next.i!==F$F.i&&F$e.prev.i!==F$F.i&&!F$l.intersectsPolygon(F$e,F$F)&&F$l.locallyInside(F$e,F$F)&&F$l.locallyInside(F$F,F$e)&&F$l.middleInside(F$e,F$F)},F$l.area=function(F$e,F$F,F$a){return(F$F.y-F$e.y)*(F$a.x-F$F.x)-(F$F.x-F$e.x)*(F$a.y-F$F.y)},F$l.equals=function(F$e,F$F){return F$e.x===F$F.x&&F$e.y===F$F.y},F$l.intersects=function(F$e,F$F,F$a,F$o){return!!(F$l.equals(F$e,F$F)&&F$l.equals(F$a,F$o)||F$l.equals(F$e,F$o)&&F$l.equals(F$a,F$F))||0<F$l.area(F$e,F$F,F$a)!=0<F$l.area(F$e,F$F,F$o)&&0<F$l.area(F$a,F$o,F$e)!=0<F$l.area(F$a,F$o,F$F)},F$l.intersectsPolygon=function(F$e,F$F){var F$a=F$e;do{if(F$a.i!==F$e.i&&F$a.next.i!==F$e.i&&F$a.i!==F$F.i&&F$a.next.i!==F$F.i&&F$l.intersects(F$a,F$a.next,F$e,F$F))return!0;F$a=F$a.next}while(F$a!==F$e);return!1},F$l.locallyInside=function(F$e,F$F){return F$l.area(F$e.prev,F$e,F$e.next)<0?0<=F$l.area(F$e,F$F,F$e.next)&&0<=F$l.area(F$e,F$e.prev,F$F):F$l.area(F$e,F$F,F$e.prev)<0||F$l.area(F$e,F$e.next,F$F)<0},F$l.middleInside=function(F$e,F$F){for(var F$a=F$e,F$o=!1,F$E=(F$e.x+F$F.x)/2,F$s=(F$e.y+F$F.y)/2;F$a.y>F$s!=F$a.next.y>F$s&&F$a.next.y!==F$a.y&&F$E<(F$a.next.x-F$a.x)*(F$s-F$a.y)/(F$a.next.y-F$a.y)+F$a.x&&(F$o=!F$o),(F$a=F$a.next)!==F$e;);return F$o},F$l.splitPolygon=function(F$e,F$F){var F$a=new F$Ee(F$e.i,F$e.x,F$e.y),F$o=new F$Ee(F$F.i,F$F.x,F$F.y),F$E=F$e.next,F$s=F$F.prev;return(F$e.next=F$F).prev=F$e,(F$a.next=F$E).prev=F$a,(F$o.next=F$a).prev=F$o,(F$s.next=F$o).prev=F$s,F$o},F$l.insertNode=function(F$e,F$F,F$a,F$o){var F$E=new F$Ee(F$e,F$F,F$a);return F$o?(F$E.next=F$o.next,(F$E.prev=F$o).next.prev=F$E,F$o.next=F$E):(F$E.prev=F$E).next=F$E,F$E},F$l.removeNode=function(F$e){F$e.next.prev=F$e.prev,F$e.prev.next=F$e.next,F$e.prevZ&&(F$e.prevZ.nextZ=F$e.nextZ),F$e.nextZ&&(F$e.nextZ.prevZ=F$e.prevZ)},F$l.signedArea=function(F$e,F$F,F$a,F$o){for(var F$E=0,F$s=F$F,F$Y=F$a-F$o;F$s<F$a;F$s+=F$o)F$E+=(F$e[F$Y]-F$e[F$s])*(F$e[F$s+1]+F$e[F$Y+1]),F$Y=F$s;return F$E},F$l}(),F$Ee=function(){function F$e(F$e,F$F,F$a){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=F$e,this.x=F$F,this.y=F$a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return F$O(F$e,"laya.webgl.shapes.EarcutNode"),F$e}(),F$se=(function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this.lineWidth=F$e,this.lineColor=F$F,this.lineAlpha=F$a,this.fillColor=F$o,this.fillAlpha=F$E,this.shape=F$Y,this.fill=F$s}F$O(F$e,"laya.webgl.shapes.GeometryData");var F$F=F$e.prototype;F$F.clone=function(){return new F$e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},F$F.getIndexData=function(){return null},F$F.getVertexData=function(){return null},F$F.destroy=function(){this.shape=null}}(),function(){function F$e(F$e){if(F$e instanceof Float32Array)this.points=F$e;else if(F$e instanceof Array){F$e.length;this.points=new Float32Array(F$e)}}F$O(F$e,"laya.webgl.shapes.Vertex");var F$F=F$e.prototype;F$m.imps(F$F,{"laya.webgl.shapes.IShape":!0}),F$F.getData=function(F$e,F$F,F$a){},F$F.needUpdate=function(F$e){return!1},F$F.rebuild=function(F$e){},F$F.setMatrix=function(F$e){}}(),function(){function F$R(F$e){void 0===F$e&&(F$e=1e4),this._renderType=F$e}F$O(F$R,"laya.webgl.submit.Submit");var F$e=F$R.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e.releaseRender=function(){var F$e=F$R._cache;(F$e[F$e._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$e.getRenderType=function(){return this._renderType},F$e.renderSubmit=function(){if(0===this._numEle)return 1;var F$e=this.shaderValue.textureHost;if(F$e){var F$F=F$e.source;if(!F$e.bitmap||!F$F)return 1;this.shaderValue.texture=F$F,F$e.alphaTexture&&F$e.alphaTexture.source&&(this.shaderValue.texture1=F$e.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$a=F$Me.mainContext;return this.shaderValue.upload(),F$C.activeBlendFunction!==this._blendFn&&(F$a.enable(3042),this._blendFn(F$a),F$C.activeBlendFunction=this._blendFn),F$A.drawCall++,F$A.trianglesFaces+=this._numEle/3,F$a.drawElements(4,this._numEle,5123,this._startIdx),1},F$R.__init__=function(){var F$e=F$R.RENDERBASE=new F$R(-1);F$e.shaderValue=new F$Le(0,0),F$e.shaderValue.ALPHA=-1234},F$R.createSubmit=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$R._cache._length?F$R._cache[--F$R._cache._length]:new F$R;null==F$a&&((F$a=F$s._selfVb||(F$s._selfVb=F$he.create(-1))).clear(),F$o=0),F$s._ib=F$F,F$s._vb=F$a,F$s._startIdx=F$o*F$le.BYTES_PIDX,F$s._numEle=0;var F$Y=F$e._nBlendType;F$s._blendFn=F$e._targets?F$C.targetFns[F$Y]:F$C.fns[F$Y],F$s.shaderValue=F$E,F$s.shaderValue.setValue(F$e._shader2D);var F$_=F$e._shader2D.filters;return F$_&&F$s.shaderValue.setFilters(F$_),F$s},F$R.createShape=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$R._cache._length?F$R._cache[--F$R._cache._length]:new F$R;F$Y._ib=F$F,F$Y._vb=F$a,F$Y._numEle=F$o,F$Y._startIdx=F$E,F$Y.shaderValue=F$s,F$Y.shaderValue.setValue(F$e._shader2D);var F$_=F$e._nBlendType;return F$Y._blendFn=F$e._targets?F$C.targetFns[F$_]:F$C.fns[F$_],F$Y},F$R.TYPE_2D=1e4,F$R.TYPE_CANVAS=10003,F$R.TYPE_CMDSETRT=10004,F$R.TYPE_CUSTOM=10005,F$R.TYPE_BLURRT=10006,F$R.TYPE_CMDDESTORYPRERT=10007,F$R.TYPE_DISABLESTENCIL=10008,F$R.TYPE_OTHERIBVB=10009,F$R.TYPE_PRIMITIVE=10010,F$R.TYPE_RT=10011,F$R.TYPE_BLUR_RT=10012,F$R.TYPE_TARGET=10013,F$R.TYPE_CHANGE_VALUE=10014,F$R.TYPE_SHAPE=10015,F$R.TYPE_TEXTURE=10016,F$R.TYPE_FILLTEXTURE=10017,F$R.RENDERBASE=null,F$R._cache=((F$R._cache=[])._length=0,F$R._cache),F$R}()),F$Ye=function(){function F$o(){this.fun=null,this.args=null}F$O(F$o,"laya.webgl.submit.SubmitCMD");var F$e=F$o.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e.renderSubmit=function(){return this.fun.apply(null,this.args),1},F$e.getRenderType=function(){return 0},F$e.releaseRender=function(){var F$e=F$o._cache;F$e[F$e._length++]=this},F$o.create=function(F$e,F$F){var F$a=F$o._cache._length?F$o._cache[--F$o._cache._length]:new F$o;return F$a.fun=F$F,F$a.args=F$e,F$a},F$o._cache=((F$o._cache=[])._length=0,F$o._cache),F$o}(),F$_e=function(){function F$F(){this.variables={}}F$O(F$F,"laya.webgl.submit.SubmitCMDScope");var F$e=F$F.prototype;return F$e.getValue=function(F$e){return this.variables[F$e]},F$e.addValue=function(F$e,F$F){return this.variables[F$e]=F$F},F$e.setValue=function(F$e,F$F){return this.variables.hasOwnProperty(F$e)?this.variables[F$e]=F$F:null},F$e.clear=function(){for(var F$e in this.variables)delete this.variables[F$e]},F$e.recycle=function(){this.clear(),F$F.POOL.push(this)},F$F.create=function(){var F$e=F$F.POOL.pop();return F$e||(F$e=new F$F),F$e},F$F.POOL=[],F$F}(),F$Re=function(){function F$n(){this.offset=0,this.startIndex=0,this._mat=F$B.create()}F$O(F$n,"laya.webgl.submit.SubmitOtherIBVB");var F$e=F$n.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e.releaseRender=function(){var F$e=F$n._cache;(F$e[F$e._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$e.getRenderType=function(){return 10009},F$e.renderSubmit=function(){var F$e=this._shaderValue.textureHost;if(F$e){var F$F=F$e.source;if(!F$e.bitmap||!F$F)return 1;this._shaderValue.texture=F$F}this._vb.bind_upload(this._ib);var F$a=F$$e.worldMatrix4,F$o=F$B.TEMP;F$B.mulPre(this._mat,F$a[0],F$a[1],F$a[4],F$a[5],F$a[12],F$a[13],F$o);var F$E=F$$e.worldMatrix4=F$n.tempMatrix4;F$E[0]=F$o.a,F$E[1]=F$o.b,F$E[4]=F$o.c,F$E[5]=F$o.d,F$E[12]=F$o.tx,F$E[13]=F$o.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var F$s=F$Me.mainContext;return F$C.activeBlendFunction!==this._blendFn&&(F$s.enable(3042),this._blendFn(F$s),F$C.activeBlendFunction=this._blendFn),F$A.drawCall++,F$A.trianglesFaces+=this._numEle/3,F$s.drawElements(4,this._numEle,5123,this.startIndex),F$$e.worldMatrix4=F$a,F$Te.activeShader=null,1},F$n.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){void 0===F$R&&(F$R=0);var F$H=F$n._cache._length?F$n._cache[--F$n._cache._length]:new F$n;F$H._ib=F$a,F$H._vb=F$F,F$H._numEle=F$o,F$H._shader=F$E,F$H._shaderValue=F$s;var F$g=F$e._nBlendType;switch(F$H._blendFn=F$e._targets?F$C.targetFns[F$g]:F$C.fns[F$g],F$R){case 0:F$H.offset=0,F$H.startIndex=F$_/(F$le.BYTES_PE*F$F.vertexStride)*1.5,F$H.startIndex*=F$le.BYTES_PIDX;break;case 1:F$H.startIndex=F$Y,F$H.offset=F$_}return F$H},F$n._cache=((F$n._cache=[])._length=0,F$n._cache),F$n.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$n}(),F$He=function(){function F$a(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new F$K,this.screenRect=new F$K}F$O(F$a,"laya.webgl.submit.SubmitScissor");var F$e=F$a.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e._scissor=function(F$e,F$F,F$a,F$o){var F$E=F$$e.worldMatrix4,F$s=F$E[0],F$Y=F$E[5],F$_=F$E[12],F$R=F$E[13];if(F$o*=F$Y,(F$a*=F$s)<1||F$o<1)return!1;var F$H=(F$e=F$e*F$s+F$_)+F$a,F$g=(F$F=F$F*F$Y+F$R)+F$o;F$e<0&&(F$a=F$H-(F$e=0)),F$F<0&&(F$o=F$g-(F$F=0));var F$n=F$$e.worldClipRect;if(F$e=Math.max(F$e,F$n.x),F$F=Math.max(F$F,F$n.y),F$a=Math.min(F$H,F$n.right)-F$e,F$o=Math.min(F$g,F$n.bottom)-F$F,F$a<1||F$o<1)return!1;var F$O=F$$e.worldScissorTest;return this.screenRect.copyFrom(F$n),F$n.x=F$e,F$n.y=F$F,F$n.width=F$a,F$n.height=F$o,F$$e.worldScissorTest=!0,F$F=F$$e.height-F$F-F$o,F$Me.mainContext.scissor(F$e,F$F,F$a,F$o),F$Me.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$O?(F$F=F$$e.height-this.screenRect.y-this.screenRect.height,F$Me.mainContext.scissor(this.screenRect.x,F$F,this.screenRect.width,this.screenRect.height),F$Me.mainContext.enable(3089)):(F$Me.mainContext.disable(3089),F$$e.worldScissorTest=!1),F$n.copyFrom(this.screenRect),!0},F$e._scissorWithTagart=function(F$e,F$F,F$a,F$o){if(F$a<1||F$o<1)return!1;var F$E=F$e+F$a,F$s=F$F+F$o;F$e<0&&(F$a=F$E-(F$e=0)),F$F<0&&(F$o=F$s-(F$F=0));var F$Y=F$$e.worldClipRect;if(F$e=Math.max(F$e,F$Y.x),F$F=Math.max(F$F,F$Y.y),F$a=Math.min(F$E,F$Y.right)-F$e,F$o=Math.min(F$s,F$Y.bottom)-F$F,F$a<1||F$o<1)return!1;var F$_=F$$e.worldScissorTest;return this.screenRect.copyFrom(F$Y),F$$e.worldScissorTest=!0,F$Y.x=F$e,F$Y.y=F$F,F$Y.width=F$a,F$Y.height=F$o,F$F=F$$e.height-F$F-F$o,F$Me.mainContext.scissor(F$e,F$F,F$a,F$o),F$Me.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$_?(F$F=F$$e.height-this.screenRect.y-this.screenRect.height,F$Me.mainContext.scissor(this.screenRect.x,F$F,this.screenRect.width,this.screenRect.height),F$Me.mainContext.enable(3089)):(F$Me.mainContext.disable(3089),F$$e.worldScissorTest=!1),F$Y.copyFrom(this.screenRect),!0},F$e.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},F$e.getRenderType=function(){return 0},F$e.releaseRender=function(){var F$e=F$a._cache;(F$e[F$e._length++]=this).context=null},F$a.create=function(F$e){var F$F=F$a._cache._length?F$a._cache[--F$a._cache._length]:new F$a;return F$F.context=F$e,F$F},F$a._cache=((F$a._cache=[])._length=0,F$a._cache),F$a}(),F$ge=function(){function F$R(){this.step=0,this.blendMode=null,this.level=0}F$O(F$R,"laya.webgl.submit.SubmitStencil");var F$e=F$R.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},F$e.getRenderType=function(){return 0},F$e.releaseRender=function(){var F$e=F$R._cache;F$e[F$e._length++]=this},F$e.do1=function(){var F$e=F$Me.mainContext;F$e.enable(2960),F$e.clear(1024),F$e.colorMask(!1,!1,!1,!1),F$e.stencilFunc(514,this.level,255),F$e.stencilOp(7680,7680,7682)},F$e.do2=function(){var F$e=F$Me.mainContext;F$e.stencilFunc(514,this.level+1,255),F$e.colorMask(!0,!0,!0,!0),F$e.stencilOp(7680,7680,7680)},F$e.do3=function(){var F$e=F$Me.mainContext;F$e.colorMask(!0,!0,!0,!0),F$e.stencilOp(7680,7680,7680),F$e.clear(1024),F$e.disable(2960)},F$e.do4=function(){var F$e=F$Me.mainContext;0==this.level&&(F$e.enable(2960),F$e.clear(1024)),F$e.colorMask(!1,!1,!1,!1),F$e.stencilFunc(519,0,255),F$e.stencilOp(7680,7680,7682)},F$e.do5=function(){var F$e=F$Me.mainContext;F$e.stencilFunc(514,this.level,255),F$e.colorMask(!0,!0,!0,!0),F$e.stencilOp(7680,7680,7680)},F$e.do6=function(){var F$e=F$Me.mainContext;F$C.targetFns[F$C.TOINT[this.blendMode]](F$e)},F$e.do7=function(){var F$e=F$Me.mainContext;F$e.colorMask(!1,!1,!1,!1),F$e.stencilOp(7680,7680,7683)},F$e.do8=function(){var F$e=F$Me.mainContext;F$e.colorMask(!0,!0,!0,!0),F$e.stencilFunc(514,this.level,255),F$e.stencilOp(7680,7680,7680)},F$R.restore=function(F$e,F$F,F$a,F$o,F$E){var F$s;if((F$e._renderKey=0)<F$R._mask&&F$R._mask--,0==F$R._mask)F$s=laya.webgl.submit.SubmitStencil.create(3),F$e.addRenderObject(F$s),F$e._curSubmit=F$se.RENDERBASE;else{F$s=laya.webgl.submit.SubmitStencil.create(7),F$e.addRenderObject(F$s);var F$Y=F$e._vb;F$Y._byteLength;if(F$Pe.fillRectImgVb(F$Y,null,F$F.x,F$F.y,F$F.width,F$F.height,F$z.DEF_UV,F$a,F$o,F$E,0,0)){F$e._shader2D.glTexture=null;var F$_=F$e._curSubmit=F$se.createSubmit(F$e,F$e._ib,F$Y,(F$Y._byteLength-64)/32*3,F$Le.create(2,0));F$_.shaderValue.ALPHA=1,F$e._submits[F$e._submits._length++]=F$_,F$e._curSubmit._numEle+=6,F$e._curSubmit=F$se.RENDERBASE}else alert("clipRect calc stencil rect error");F$s=laya.webgl.submit.SubmitStencil.create(8),F$e.addRenderObject(F$s)}},F$R.restore2=function(F$e,F$F){var F$a;(F$e._renderKey=0)<F$R._mask&&F$R._mask--,0==F$R._mask?(F$a=laya.webgl.submit.SubmitStencil.create(3),F$e.addRenderObject(F$a),F$e._curSubmit=F$se.RENDERBASE):(F$a=laya.webgl.submit.SubmitStencil.create(7),F$e.addRenderObject(F$a),F$e._submits[F$e._submits._length++]=F$F,F$a=laya.webgl.submit.SubmitStencil.create(8),F$e.addRenderObject(F$a))},F$R.create=function(F$e){var F$F=F$R._cache._length?F$R._cache[--F$R._cache._length]:new F$R;return 5==(F$F.step=F$e)&&++F$R._mask,F$F.level=F$R._mask,F$F},F$R._cache=((F$R._cache=[])._length=0,F$R._cache),F$R._mask=0,F$R}(),F$ne=function(){function F$_(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}F$O(F$_,"laya.webgl.submit.SubmitTarget");var F$e=F$_.prototype;return F$m.imps(F$e,{"laya.webgl.submit.ISubmit":!0}),F$e.renderSubmit=function(){this._vb.bind_upload(this._ib);var F$e=this.scope.getValue(this.proName);return F$e&&(this.shaderValue.texture=F$e.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[F$e.width,F$e.height]),this.shaderValue.upload(),this.blend(),F$A.drawCall++,F$A.trianglesFaces+=this._numEle/3,F$Me.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},F$e.blend=function(){if(F$C.activeBlendFunction!==F$C.fns[this.blendType]){var F$e=F$Me.mainContext;F$e.enable(3042),F$C.fns[this.blendType](F$e),F$C.activeBlendFunction=F$C.fns[this.blendType]}},F$e.getRenderType=function(){return 0},F$e.releaseRender=function(){var F$e=F$_._cache;(F$e[F$e._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$_.create=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$_._cache._length?F$_._cache[--F$_._cache._length]:new F$_;return F$Y._ib=F$F,F$Y._vb=F$a,F$Y.proName=F$s,F$Y._startIdx=F$o*F$le.BYTES_PIDX,F$Y._numEle=0,F$Y.blendType=F$e._nBlendType,F$Y.shaderValue=F$E,F$Y.shaderValue.setValue(F$e._shader2D),F$Y},F$_._cache=((F$_._cache=[])._length=0,F$_._cache),F$_}(),F$Oe=function(){function F$e(){this._sourceStr=null}F$O(F$e,"laya.webgl.text.CharSegment");var F$F=F$e.prototype;return F$m.imps(F$F,{"laya.webgl.text.ICharSegment":!0}),F$F.textToSpit=function(F$e){this._sourceStr=F$e},F$F.getChar=function(F$e){return this._sourceStr.charAt(F$e)},F$F.getCharCode=function(F$e){return this._sourceStr.charCodeAt(F$e)},F$F.length=function(){return this._sourceStr.length},F$e}(),F$qe=function(){var F$e;function F$A(){}return F$O(F$A,"laya.webgl.text.DrawText"),F$A.__init__=function(){F$A._charsTemp=new Array,F$A._drawValue=new F$e,F$A._charSeg=new F$Oe},F$A.customCharSeg=function(F$e){F$A._charSeg=F$e},F$A.getChar=function(F$e,F$F,F$a){var F$o=F$Ne.createOneChar(F$e,F$a);return-1!=F$F&&(F$A._charsCache[F$F]=F$o),F$o},F$A._drawSlow=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O,F$q,F$I){var F$l,F$P,F$j=F$A._drawValue.value(F$s,F$_,F$R,F$H,F$O,F$q,F$I),F$$=0,F$y=0,F$M=F$A._charsTemp,F$D=0,F$m=NaN;if(F$o)for(F$M.length=F$o.length,F$$=0,F$y=F$o.length;F$$<F$y;F$$++)(F$P=F$o[F$$])&&(F$m=F$P.charNum+F$j.txtID,F$M[F$$]=F$l=F$A._charsCache[F$m]||F$A.getChar(F$P.char,F$m,F$j),F$l.active());else{var F$b=F$a instanceof laya.utils.WordText?F$a.toString():F$a;if(F$Z.CharacterCache){F$A._charSeg.textToSpit(F$b);var F$L=F$A._charSeg.length();for(F$$=0,F$y=F$M.length=F$L;F$$<F$y;F$$++)F$m=F$A._charSeg.getCharCode(F$$)+F$j.txtID,F$M[F$$]=F$l=F$A._charsCache[F$m]||F$A.getChar(F$A._charSeg.getChar(F$$),F$m,F$j),F$l.active(),F$D+=F$l.cw}else F$M.length=0,(F$l=F$A.getChar(F$b,-1,F$j)).active(),F$D+=F$l.cw,F$M[0]=F$l}var F$B=0;null!==F$Y&&"left"!==F$Y&&(F$B=-("center"==F$Y?F$D/2:F$D));var F$v,F$K,F$V=NaN,F$G=0;if(F$o)for(F$$=0,F$y=F$M.length;F$$<F$y;F$$++)F$l=F$M[F$$],F$P=F$o[F$$],F$l&&F$P&&!F$l.isSpace&&(F$V=F$l.borderSize,F$v=F$l.texture,F$F._drawText(F$v,F$g+F$B+F$P.x*F$O-F$V,F$n+F$P.y*F$q-F$V,F$v.width,F$v.height,F$E,0,0,0,0));else{for(F$$=0,F$y=F$M.length;F$$<F$y;F$$++)(F$l=F$M[F$$])&&!F$l.isSpace&&(F$V=F$l.borderSize,F$v=F$l.texture,F$F._drawText(F$v,F$g+F$B-F$V,F$n-F$V,F$v.width,F$v.height,F$E,0,0,0,0),F$e&&((F$K=F$e[F$G++])||(F$K=F$e[F$G-1]=[]),F$K[0]=F$v,F$K[1]=F$B-F$V,F$K[2]=-F$V)),F$B+=F$l.cw;F$e&&(F$e.length=F$G)}},F$A._drawFast=function(F$e,F$F,F$a,F$o,F$E){for(var F$s,F$Y,F$_=0,F$R=F$e.length;F$_<F$R;F$_++)(F$s=(F$Y=F$e[F$_])[0]).active(),F$F._drawText(F$s,F$o+F$Y[1],F$E+F$Y[2],F$s.width,F$s.height,F$a,0,0,0,0)},F$A.drawText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n){if(void 0===F$n&&(F$n=0),!(F$F&&0===F$F.length||F$a&&0===F$a.length)){var F$O=F$o.a,F$q=F$o.d;(0!==F$o.b||0!==F$o.c)&&(F$O=F$q=1);var F$I=1!==F$O||1!==F$q;if(F$I&&F$m.stage.transform){var F$l=F$m.stage.transform;F$I=F$l.a===F$O&&F$l.d===F$q}else F$I=!1;if(F$I){var F$P=(F$o=F$o.copyTo(F$be._tmpMatrix)).tx,F$j=F$o.ty;F$o.scale(1/F$O,1/F$q),F$o._checkTransform(),F$H*=F$O,F$g*=F$q,F$H+=F$P-F$o.tx,F$g+=F$j-F$o.ty}else F$O=F$q=1;if(F$a)F$A._drawSlow(null,F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$O,F$q,F$n);else{if(null===F$F.toUpperCase){var F$$=F$O+1e5*F$q,F$y=F$F;return void(F$y.changed||F$y.id!==F$$?(F$y.id=F$$,F$y.changed=!1,F$A._drawSlow(F$y.save,F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$O,F$q,F$n)):F$A._drawFast(F$y.save,F$e,F$o,F$H,F$g))}var F$M=F$F+F$E.toString()+F$Y+F$_+F$R+F$O+F$q+F$s,F$D=F$A._textsCache[F$M];F$Z.CharacterCache?F$D?F$A._drawFast(F$D,F$e,F$o,F$H,F$g):(F$A._textsCache.__length||(F$A._textsCache.__length=0),F$A._textsCache.__length>F$b.WebGLTextCacheCount&&((F$A._textsCache={}).__length=0,F$A._curPoolIndex=0),F$A._textCachesPool[F$A._curPoolIndex]?(F$D=F$A._textsCache[F$M]=F$A._textCachesPool[F$A._curPoolIndex]).length=0:F$A._textCachesPool[F$A._curPoolIndex]=F$D=F$A._textsCache[F$M]=[],F$A._textsCache.__length++,F$A._curPoolIndex++,F$A._drawSlow(F$D,F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$O,F$q,F$n)):F$A._drawSlow(F$D,F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$O,F$q,F$n)}}},F$A._charsTemp=null,F$A._textCachesPool=[],F$A._curPoolIndex=0,F$A._charsCache={},F$A._textsCache={},F$A._drawValue=null,F$A.d=[],F$A._charSeg=null,F$A.__init$=function(){F$e=function(){function F$R(){}return F$O(F$R,""),F$R.prototype.value=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this.font=F$e,this.fillColor=F$F,this.borderColor=F$a,this.lineWidth=F$o,this.scaleX=F$E,this.scaleY=F$s,this.underLine=F$Y;var F$_=F$e.toString()+F$E+F$s+F$o+(F$F?F$F.toLowerCase():" ")+(F$a?F$a.toLowerCase():" ")+F$Y;return this.txtID=F$R._keymap[F$_],this.txtID||(this.txtID=1e-7*++F$R._keymapCount,F$R._keymap[F$_]=this.txtID),this},F$R.clear=function(){F$R._keymap={},F$R._keymapCount=1},F$R._keymap={},F$R._keymapCount=1,F$R}()},F$A}(),F$Ie=function(){function F$E(F$e){this._index=0,this._size=14,this._italic=-2,F$E._cache2=F$E._cache2||[],this.setFont(F$e||"14px Arial")}F$O(F$E,"laya.webgl.text.FontInContext");var F$e=F$E.prototype;return F$e.setFont=function(F$e){var F$F=F$E._cache2[F$e];if(F$F)this._words=F$F[0],this._size=F$F[1];else{this._words=F$e.split(" ");for(var F$a=0,F$o=this._words.length;F$a<F$o;F$a++)if(0<this._words[F$a].indexOf("px")){this._index=F$a;break}this._size=parseInt(this._words[this._index]),F$E._cache2[F$e]=[this._words,this._size]}this._text=null,this._italic=-2},F$e.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},F$e.hasType=function(F$e){for(var F$F=0,F$a=this._words.length;F$F<F$a;F$F++)if(this._words[F$F]===F$e)return F$F;return-1},F$e.removeType=function(F$e){for(var F$F=0,F$a=this._words.length;F$F<F$a;F$F++)if(this._words[F$F]===F$e){this._words.splice(F$F,1),this._index>F$F&&this._index--;break}this._text=null,this._italic=-2},F$e.copyTo=function(F$e){return F$e._text=this._text,F$e._size=this._size,F$e._index=this._index,F$e._words=this._words.slice(),F$e._italic=-2,F$e},F$e.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},F$o(0,F$e,"size",function(){return this._size},function(F$e){this._size=F$e,this._words[this._index]=F$e+"px",this._text=null}),F$E.create=function(F$e){var F$F=F$E._cache[F$e];return F$F||(F$F=F$E._cache[F$e]=new F$E(F$e))},F$E.EMPTY=new F$E,F$E._cache={},F$E._cache2=null,F$E}(),F$le=function(){function F$e(){}return F$O(F$e,"laya.webgl.utils.CONST3D2D"),F$e.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$e.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],F$e.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],F$e._TMPARRAY=[],F$e._OFFSETX=0,F$e._OFFSETY=0,F$Y(F$e,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),F$e}(),F$Pe=function(){function F$I(){}return F$O(F$I,"laya.webgl.utils.GlUtils"),F$I.make2DProjection=function(F$e,F$F,F$a){return[2/F$e,0,0,0,0,-2/F$F,0,0,0,0,2/F$a,0,-1,1,0,1]},F$I.fillIBQuadrangle=function(F$e,F$F){if(65535/4<F$F)throw Error("IBQuadrangle count:"+F$F+" must<:"+Math.floor(65535/4));F$F=Math.floor(F$F),F$e._resizeBuffer(6*(F$F+1)*2,!1),F$e.byteLength=F$e.bufferLength;for(var F$a=F$e.getUint16Array(),F$o=0,F$E=0;F$E<F$F;F$E++)F$a[F$o++]=4*F$E,F$a[F$o++]=4*F$E+2,F$a[F$o++]=4*F$E+1,F$a[F$o++]=4*F$E,F$a[F$o++]=4*F$E+3,F$a[F$o++]=4*F$E+2;return F$e.setNeedUpload(),!0},F$I.expandIBQuadrangle=function(F$e,F$F){F$e.bufferLength>=6*F$F*2||F$I.fillIBQuadrangle(F$e,F$F)},F$I.mathCeilPowerOfTwo=function(F$e){return F$e--,F$e|=F$e>>1,F$e|=F$e>>2,F$e|=F$e>>4,F$e|=F$e>>8,F$e|=F$e>>16,++F$e},F$I.fillQuadrangleImgVb=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=16+(F$e._byteLength>>2);F$e.byteLength=F$R<<2;var F$H=F$e.getFloat32Array();F$H[(F$R-=16)+2]=F$E[0],F$H[F$R+3]=F$E[1],F$H[F$R+6]=F$E[2],F$H[F$R+7]=F$E[3],F$H[F$R+10]=F$E[4],F$H[F$R+11]=F$E[5],F$H[F$R+14]=F$E[6],F$H[F$R+15]=F$E[7];var F$g=F$s.a,F$n=F$s.b,F$O=F$s.c,F$q=F$s.d;if(1!==F$g||0!==F$n||0!==F$O||1!==F$q){F$s.bTransform=!0;var F$I=F$s.tx+F$Y,F$l=F$s.ty+F$_;F$H[F$R]=(F$o[0]+F$F)*F$g+(F$o[1]+F$a)*F$O+F$I,F$H[F$R+1]=(F$o[0]+F$F)*F$n+(F$o[1]+F$a)*F$q+F$l,F$H[F$R+4]=(F$o[2]+F$F)*F$g+(F$o[3]+F$a)*F$O+F$I,F$H[F$R+5]=(F$o[2]+F$F)*F$n+(F$o[3]+F$a)*F$q+F$l,F$H[F$R+8]=(F$o[4]+F$F)*F$g+(F$o[5]+F$a)*F$O+F$I,F$H[F$R+9]=(F$o[4]+F$F)*F$n+(F$o[5]+F$a)*F$q+F$l,F$H[F$R+12]=(F$o[6]+F$F)*F$g+(F$o[7]+F$a)*F$O+F$I,F$H[F$R+13]=(F$o[6]+F$F)*F$n+(F$o[7]+F$a)*F$q+F$l}else F$s.bTransform=!1,F$F+=F$s.tx+F$Y,F$a+=F$s.ty+F$_,F$H[F$R]=F$F+F$o[0],F$H[F$R+1]=F$a+F$o[1],F$H[F$R+4]=F$F+F$o[2],F$H[F$R+5]=F$a+F$o[3],F$H[F$R+8]=F$F+F$o[4],F$H[F$R+9]=F$a+F$o[5],F$H[F$R+12]=F$F+F$o[6],F$H[F$R+13]=F$a+F$o[7];return F$e._upload=!0},F$I.fillTranglesVB=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_=(F$e._byteLength>>2)+F$o.length;F$e.byteLength=F$_<<2;var F$R=F$e.getFloat32Array();F$_-=F$o.length;for(var F$H=F$o.length,F$g=F$E.a,F$n=F$E.b,F$O=F$E.c,F$q=F$E.d,F$I=0;F$I<F$H;F$I+=4)if(F$R[F$_+F$I+2]=F$o[F$I+2],F$R[F$_+F$I+3]=F$o[F$I+3],1!==F$g||0!==F$n||0!==F$O||1!==F$q){F$E.bTransform=!0;var F$l=F$E.tx+F$s,F$P=F$E.ty+F$Y;F$R[F$_+F$I]=(F$o[F$I]+F$F)*F$g+(F$o[F$I+1]+F$a)*F$O+F$l,F$R[F$_+F$I+1]=(F$o[F$I]+F$F)*F$n+(F$o[F$I+1]+F$a)*F$q+F$P}else F$E.bTransform=!1,F$F+=F$E.tx+F$s,F$a+=F$E.ty+F$Y,F$R[F$_+F$I]=F$F+F$o[F$I],F$R[F$_+F$I+1]=F$a+F$o[F$I+1];return F$e._upload=!0},F$I.copyPreImgVb=function(F$e,F$F,F$a){var F$o=F$e._byteLength>>2;F$e.byteLength=F$o+16<<2;for(var F$E=F$e.getFloat32Array(),F$s=0,F$Y=F$o-16;F$s<4;F$s++)F$E[F$o]=F$E[F$Y]+F$F,++F$Y,F$E[++F$o]=F$E[F$Y]+F$a,++F$Y,F$E[++F$o]=F$E[F$Y],++F$Y,F$E[++F$o]=F$E[F$Y],++F$o,++F$Y;F$e._upload=!0},F$I.fillRectImgVb=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O){void 0===F$O&&(F$O=!1);var F$q,F$I,F$l,F$P,F$j,F$$,F$y,F$M,F$D,F$m,F$b,F$L,F$B,F$v,F$K,F$V,F$G=1,F$A=F$_.a,F$U=F$_.b,F$r=F$_.c,F$Z=F$_.d,F$z=F$F&&F$F.width<99999999;if(1!==F$A||0!==F$U||0!==F$r||1!==F$Z?(F$_.bTransform=!0,0===F$U&&0===F$r&&(F$G=23,F$D=F$E+F$a,F$m=F$s+F$o,F$q=F$A*F$a+(F$b=F$_.tx+F$R),F$l=F$A*F$D+F$b,F$I=F$Z*F$o+(F$L=F$_.ty+F$H),F$P=F$Z*F$m+F$L)):(F$G=23,F$_.bTransform=!1,F$l=(F$q=F$a+F$_.tx+F$R)+F$E,F$P=(F$I=F$o+F$_.ty+F$H)+F$s),F$z&&(F$j=F$F.x,F$$=F$F.y,F$y=F$F.width+F$j,F$M=F$F.height+F$$),1!==F$G){if(Math.min(F$q,F$l)>=F$y)return!1;if(Math.min(F$I,F$P)>=F$M)return!1;if(Math.max(F$l,F$q)<=F$j)return!1;if(Math.max(F$P,F$I)<=F$$)return!1}var F$T=F$e._byteLength>>2;F$e.byteLength=16+F$T<<2;var F$p=F$e.getFloat32Array();switch(F$p[2+F$T]=F$Y[0],F$p[3+F$T]=F$Y[1],F$p[6+F$T]=F$Y[2],F$p[7+F$T]=F$Y[3],F$p[10+F$T]=F$Y[4],F$p[11+F$T]=F$Y[5],F$p[14+F$T]=F$Y[6],F$p[15+F$T]=F$Y[7],F$G){case 1:F$b=F$_.tx+F$R,F$L=F$_.ty+F$H;var F$J=F$A*F$a,F$k=F$r*F$o,F$d=F$Z*F$o,F$w=F$U*F$a,F$S=F$A*(F$D=F$E+F$a),F$C=F$r*(F$m=F$s+F$o),F$u=F$Z*F$m,F$x=F$U*F$D;F$O?(F$B=F$J+F$k+F$b,F$K=Math.round(F$B)-F$B,F$v=F$d+F$w+F$L,F$V=Math.round(F$v)-F$v,F$p[F$T]=F$B+F$K,F$p[1+F$T]=F$v+F$V,F$p[4+F$T]=F$S+F$k+F$b+F$K,F$p[5+F$T]=F$d+F$x+F$L+F$V,F$p[8+F$T]=F$S+F$C+F$b+F$K,F$p[9+F$T]=F$u+F$x+F$L+F$V,F$p[12+F$T]=F$J+F$C+F$b+F$K,F$p[13+F$T]=F$u+F$w+F$L+F$V):(F$p[F$T]=F$J+F$k+F$b,F$p[1+F$T]=F$d+F$w+F$L,F$p[4+F$T]=F$S+F$k+F$b,F$p[5+F$T]=F$d+F$x+F$L,F$p[8+F$T]=F$S+F$C+F$b,F$p[9+F$T]=F$u+F$x+F$L,F$p[12+F$T]=F$J+F$C+F$b,F$p[13+F$T]=F$u+F$w+F$L);break;case 23:F$O?(F$B=F$q+F$g,F$K=Math.round(F$B)-F$B,F$v=F$I,F$V=Math.round(F$v)-F$v,F$p[F$T]=F$B+F$K,F$p[1+F$T]=F$v+F$V,F$p[4+F$T]=F$l+F$g+F$K,F$p[5+F$T]=F$I+F$V,F$p[8+F$T]=F$l+F$K,F$p[9+F$T]=F$P+F$V,F$p[12+F$T]=F$q+F$K,F$p[13+F$T]=F$P+F$V):(F$p[F$T]=F$q+F$g,F$p[1+F$T]=F$I,F$p[4+F$T]=F$l+F$g,F$p[5+F$T]=F$I,F$p[8+F$T]=F$l,F$p[9+F$T]=F$P,F$p[12+F$T]=F$q,F$p[13+F$T]=F$P)}return F$e._upload=!0},F$I.fillLineVb=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=.5*F$Y,F$H=F$I._fillLineArray,F$g=-(F$o-F$s),F$n=F$a-F$E,F$O=Math.sqrt(F$g*F$g+F$n*F$n);F$g/=F$O,F$n/=F$O,F$g*=F$R,F$n*=F$R,F$H[0]=F$a-F$g,F$H[1]=F$o-F$n,F$H[4]=F$a+F$g,F$H[5]=F$o+F$n,F$H[8]=F$E+F$g,F$H[9]=F$s+F$n,F$H[12]=F$E-F$g,F$H[13]=F$s-F$n,F$_&&F$_.transformPointArray(F$H,F$H);var F$q=16+(F$e._byteLength>>2);return F$e.byteLength=F$q<<2,F$e.insertData(F$H,F$q-16),!0},F$I._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F$I}(),F$je=(function(){function F$R(){}F$O(F$R,"laya.webgl.utils.MatirxArray"),F$R.ArrayMul=function(F$e,F$F,F$a){if(F$e)if(F$F)for(var F$o=NaN,F$E=NaN,F$s=NaN,F$Y=NaN,F$_=0;F$_<4;F$_++)F$o=F$e[F$_],F$E=F$e[F$_+4],F$s=F$e[F$_+8],F$Y=F$e[F$_+12],F$a[F$_]=F$o*F$F[0]+F$E*F$F[1]+F$s*F$F[2]+F$Y*F$F[3],F$a[F$_+4]=F$o*F$F[4]+F$E*F$F[5]+F$s*F$F[6]+F$Y*F$F[7],F$a[F$_+8]=F$o*F$F[8]+F$E*F$F[9]+F$s*F$F[10]+F$Y*F$F[11],F$a[F$_+12]=F$o*F$F[12]+F$E*F$F[13]+F$s*F$F[14]+F$Y*F$F[15];else F$R.copyArray(F$e,F$a);else F$R.copyArray(F$F,F$a)},F$R.copyArray=function(F$e,F$F){if(F$e&&F$F)for(var F$a=0;F$a<F$e.length;F$a++)F$F[F$a]=F$e[F$a]}}(),function(){function F$F(F$e,F$F,F$a){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=F$e,this._vb=new F$he(F$e,35048),F$F&&this._vb._resizeBuffer(F$F,!1),this._ib=new F$ce,F$a&&this._ib._resizeBuffer(F$a,!1)}F$O(F$F,"laya.webgl.utils.Mesh2D");var F$e=F$F.prototype;return F$e.cloneWithNewVB=function(){var F$e=new F$F(this._stride,0,0);return F$e._ib=this._ib,F$e._quadNum=this._quadNum,F$e._attribInfo=this._attribInfo,F$e},F$e.cloneWithNewVBIB=function(){var F$e=new F$F(this._stride,0,0);return F$e._attribInfo=this._attribInfo,F$e},F$e.getVBW=function(){return this._vb.setNeedUpload(),this._vb},F$e.getVBR=function(){return this._vb},F$e.getIBR=function(){return this._ib},F$e.getIBW=function(){return this._ib.setNeedUpload(),this._ib},F$e.createQuadIB=function(F$e){this._quadNum=F$e,this._ib._resizeBuffer(6*F$e*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var F$F=this._ib.getUint16Array(),F$a=0,F$o=0,F$E=0;F$E<F$e;F$E++)F$F[F$a++]=F$o,F$F[F$a++]=F$o+2,F$F[F$a++]=F$o+1,F$F[F$a++]=F$o,F$F[F$a++]=F$o+3,F$F[F$a++]=F$o+2,F$o+=4;this._ib.setNeedUpload()},F$e.setAttributes=function(F$e){if(this._attribInfo=F$e,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},F$e.getEleNum=function(){return this._ib.getBuffer().byteLength/2},F$e.releaseMesh=function(){},F$e.destroy=function(){},F$e.clearVB=function(){this._vb.clear()},F$F._gvaoid=0,F$F}()),F$$e=function(){function F$E(){}return F$O(F$E,"laya.webgl.utils.RenderState2D"),F$E.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F$E.mat2MatArray=function(F$e,F$F){var F$a=F$e,F$o=F$F;return F$o[0]=F$a.a,F$o[1]=F$a.b,F$o[2]=F$E.EMPTYMAT4_ARRAY[2],F$o[3]=F$E.EMPTYMAT4_ARRAY[3],F$o[4]=F$a.c,F$o[5]=F$a.d,F$o[6]=F$E.EMPTYMAT4_ARRAY[6],F$o[7]=F$E.EMPTYMAT4_ARRAY[7],F$o[8]=F$E.EMPTYMAT4_ARRAY[8],F$o[9]=F$E.EMPTYMAT4_ARRAY[9],F$o[10]=F$E.EMPTYMAT4_ARRAY[10],F$o[11]=F$E.EMPTYMAT4_ARRAY[11],F$o[12]=F$a.tx,F$o[13]=F$a.ty,F$o[14]=F$E.EMPTYMAT4_ARRAY[14],F$o[15]=F$E.EMPTYMAT4_ARRAY[15],F$F},F$E.restoreTempArray=function(){F$E.TEMPMAT4_ARRAY[0]=1,F$E.TEMPMAT4_ARRAY[1]=0,F$E.TEMPMAT4_ARRAY[4]=0,F$E.TEMPMAT4_ARRAY[5]=1,F$E.TEMPMAT4_ARRAY[12]=0,F$E.TEMPMAT4_ARRAY[13]=0},F$E.clear=function(){F$E.worldScissorTest=!1,F$E.worldShaderDefines=null,F$E.worldFilters=null,F$E.worldAlpha=1,F$E.worldClipRect.x=F$E.worldClipRect.y=0,F$E.worldClipRect.width=F$E.width,F$E.worldClipRect.height=F$E.height,F$E.curRenderTarget=null},F$E._MAXSIZE=99999999,F$E.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$E.worldMatrix4=F$E.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$E.worldAlpha=1,F$E.worldScissorTest=!1,F$E.worldFilters=null,F$E.worldShaderDefines=null,F$E.curRenderTarget=null,F$E.width=0,F$E.height=0,F$Y(F$E,["worldMatrix",function(){return this.worldMatrix=new F$B},"worldClipRect",function(){return this.worldClipRect=new F$K(0,0,99999999,99999999)}]),F$E}(),F$ye=function(){var F$$,F$a;function F$y(F$e,F$F,F$a,F$o,F$E){var F$s=this;function F$Y(F$e){var F$F=[],F$a=new F$$(F$F);return F$s._compileToTree(F$a,F$e.split("\n"),0,F$F,F$E),F$a}var F$_=F$q.now();this._VS=F$Y(F$F),this._PS=F$Y(F$a),this._nameMap=F$o,2<F$q.now()-F$_&&console.log("ShaderCompile use time:"+(F$q.now()-F$_)+"  size:"+F$F.length+"/"+F$a.length)}F$O(F$y,"laya.webgl.utils.ShaderCompile");var F$e=F$y.prototype;return F$e._compileToTree=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O=0,F$q=0,F$I=0,F$l=0;for(F$q=F$a;F$q<F$F.length;F$q++)if(!((F$_=F$F[F$q]).length<1)&&0!==(F$O=F$_.indexOf("//"))){if(0<=F$O&&(F$_=F$_.substr(0,F$O)),F$s=F$n||new F$$(F$o),F$n=null,F$s.text=F$_,F$s.noCompile=!0,0<=(F$O=F$_.indexOf("#"))){for(F$R="#",F$l=F$O+1,F$I=F$_.length;F$l<F$I;F$l++){var F$P=F$_.charAt(F$l);if(" "===F$P||"\t"===F$P||"\r"===F$P||"\n"===F$P||"?"===F$P)break;F$R+=F$P}switch(F$s.name=F$R){case"#ifdef":case"#ifndef":if(F$s.src=F$_,F$s.noCompile=null!=F$_.match(/[!&|()=<>]/),F$s.noCompile?console.log("function():Boolean{return "+F$_.substr(F$O+F$s.name.length)+"}"):(F$g=F$_.replace(/^\s*/,"").split(/\s+/),F$s.setCondition(F$g[1],"#ifdef"===F$R?1:2),F$s.text="//"+F$s.text),F$s.setParent(F$e),F$e=F$s,F$E)for(F$g=F$_.substr(F$l).split(F$y._splitToWordExps3),F$l=0;F$l<F$g.length;F$l++)(F$_=F$g[F$l]).length&&(F$E[F$_]=!0);continue;case"#if":if(F$s.src=F$_,F$s.noCompile=!0,F$s.setParent(F$e),F$e=F$s,F$E)for(F$g=F$_.substr(F$l).split(F$y._splitToWordExps3),F$l=0;F$l<F$g.length;F$l++)(F$_=F$g[F$l]).length&&"defined"!=F$_&&(F$E[F$_]=!0);continue;case"#else":F$s.src=F$_,F$Y=(F$e=F$e.parent).childs[F$e.childs.length-1],F$s.noCompile=F$Y.noCompile,F$s.noCompile||(F$s.condition=F$Y.condition,F$s.conditionType=1==F$Y.conditionType?2:1,F$s.text="//"+F$s.text+" "+F$Y.text+" "+F$s.conditionType),F$s.setParent(F$e),F$e=F$s;continue;case"#endif":F$Y=(F$e=F$e.parent).childs[F$e.childs.length-1],F$s.noCompile=F$Y.noCompile,F$s.noCompile||(F$s.text="//"+F$s.text),F$s.setParent(F$e);continue;case"#include":F$g=F$y.splitToWords(F$_,null);var F$j=F$y.includes[F$g[1]];if(!F$j)throw"ShaderCompile error no this include file:"+F$g[1];if((F$O=F$g[0].indexOf("?"))<0){F$s.setParent(F$e),F$_=F$j.getWith("with"==F$g[2]?F$g[3]:null),this._compileToTree(F$s,F$_.split("\n"),0,F$o,F$E),F$s.text="";continue}F$s.setCondition(F$g[0].substr(F$O+1),1),F$s.text=F$j.getWith("with"==F$g[2]?F$g[3]:null);break;case"#import":F$H=(F$g=F$y.splitToWords(F$_,null))[1],F$o.push({node:F$s,file:F$y.includes[F$H],ofs:F$s.text.length});continue}}else{if((F$Y=F$e.childs[F$e.childs.length-1])&&!F$Y.name){0<F$o.length&&F$y.splitToWords(F$_,F$Y),F$n=F$s,F$Y.text+="\n"+F$_;continue}0<F$o.length&&F$y.splitToWords(F$_,F$s)}F$s.setParent(F$e)}},F$e.createShader=function(F$e,F$F,F$a){var F$o={},F$E="";if(F$e)for(var F$s in F$e)F$E+="#define "+F$s+"\n",F$o[F$s]=!0;var F$Y=this._VS.toscript(F$o,[]),F$_=this._PS.toscript(F$o,[]);return(F$a||F$fe.create)(F$E+F$Y.join("\n"),F$E+F$_.join("\n"),F$F,this._nameMap)},F$y._parseOne=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y={type:F$y.shaderParamsMap[F$a[F$o+1]],name:F$a[F$o+2],size:isNaN(parseInt(F$a[F$o+3]))?1:parseInt(F$a[F$o+3])};return F$s&&("attribute"==F$E?F$e.push(F$Y):F$F.push(F$Y)),":"==F$a[F$o+3]&&(F$Y.type=F$a[F$o+4],F$o+=2),F$o+=2},F$y.addInclude=function(F$e,F$F){if(!F$F||0===F$F.length)throw new Error("add shader include file err:"+F$e);if(F$y.includes[F$e])throw new Error("add shader include file err, has add:"+F$e);F$y.includes[F$e]=new F$a(F$F)},F$y.preGetParams=function(F$e,F$F){var F$a=[F$e,F$F],F$o={},F$E=[],F$s=[],F$Y={},F$_=[];F$o.attributes=F$E,F$o.uniforms=F$s,F$o.defines=F$Y;for(var F$R=0,F$H=0,F$g=0;F$g<2;F$g++){F$a[F$g]=F$a[F$g].replace(F$y._removeAnnotation,"");var F$n,F$O=F$a[F$g].match(F$y._reg);for(F$R=0,F$H=F$O.length;F$R<F$H;F$R++){var F$q=F$O[F$R];if("attribute"==F$q||"uniform"==F$q)F$R=F$y._parseOne(F$E,F$s,F$O,F$R,F$q,!0);else{if("#define"==F$q){F$_[F$q=F$O[++F$R]]=1;continue}if("#ifdef"==F$q){F$Y[F$n=F$O[++F$R]]=F$Y[F$n]||[];for(F$R++;F$R<F$H;F$R++)if("attribute"==(F$q=F$O[F$R])||"uniform"==F$q)F$R=F$y._parseOne(F$E,F$s,F$O,F$R,F$q,F$_[F$n]);else if("#else"==F$q)for(F$R++;F$R<F$H;F$R++)if("attribute"==(F$q=F$O[F$R])||"uniform"==F$q)F$R=F$y._parseOne(F$E,F$s,F$O,F$R,F$q,!F$_[F$n]);else if("#endif"==F$q)break}}}}return F$o},F$y.splitToWords=function(F$e,F$F){for(var F$a,F$o,F$E=[],F$s=-1,F$Y=0,F$_=F$e.length;F$Y<F$_;F$Y++)if(F$a=F$e.charAt(F$Y),0<=" \t=+-*/&%!<>()'\",;".indexOf(F$a)){if(0<=F$s&&1<F$Y-F$s&&(F$o=F$e.substr(F$s,F$Y-F$s),F$E.push(F$o)),'"'==F$a||"'"==F$a){var F$R=F$e.indexOf(F$a,F$Y+1);if(F$R<0)throw"Sharder err:"+F$e;F$E.push(F$e.substr(F$Y+1,F$R-F$Y-1)),F$Y=F$R,F$s=-1;continue}"("==F$a&&F$F&&0<F$E.length&&(F$o=F$E[F$E.length-1]+";","vec4;main;".indexOf(F$o)<0&&(F$F.useFuns+=F$o)),F$s=-1}else F$s<0&&(F$s=F$Y);return F$s<F$_&&1<F$_-F$s&&(F$o=F$e.substr(F$s,F$_-F$s),F$E.push(F$o)),F$E},F$y.IFDEF_NO=0,F$y.IFDEF_YES=1,F$y.IFDEF_ELSE=2,F$y.IFDEF_PARENT=3,F$y._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),F$y._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),F$y._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),F$y.includes={},F$Y(F$y,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),F$y.__init$=function(){F$$=function(){function F$a(F$e){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=F$e}F$O(F$a,"");var F$e=F$a.prototype;return F$e.setParent=function(F$e){F$e.childs.push(this),this.z=F$e.z+1,this.parent=F$e},F$e.setCondition=function(F$e,F$F){F$e&&(this.conditionType=F$F,F$e=F$e.replace(/(\s*$)/g,""),this.condition=function(){return this[F$e]},this.condition.__condition=F$e)},F$e.toscript=function(F$e,F$F){return this._toscript(F$e,F$F,++F$a.__id)},F$e._toscript=function(F$o,F$E,F$s){if(this.childs.length<1&&!this.text)return F$E;F$E.length;if(this.condition){var F$e=!!this.condition.call(F$o);if(2===this.conditionType&&(F$e=!F$e),!F$e)return F$E}if(this.text&&F$E.push(this.text),0<this.childs.length&&this.childs.forEach(function(F$e,F$F,F$a){F$e._toscript(F$o,F$E,F$s)}),0<this.includefiles.length&&0<this.useFuns.length)for(var F$F,F$a=0,F$Y=this.includefiles.length;F$a<F$Y;F$a++)this.includefiles[F$a].curUseID!=F$s&&0<(F$F=this.includefiles[F$a].file.getFunsScript(this.useFuns)).length&&(this.includefiles[F$a].curUseID=F$s,F$E[0]=F$F+F$E[0]);return F$E},F$a.__id=1,F$a}(),F$a=function(){function F$e(F$e){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=F$e;for(var F$F=0,F$a=0,F$o=0;!((F$F=F$e.indexOf("#begin",F$F))<0);){for(F$o=F$F+5;!((F$o=F$e.indexOf("#end",F$o))<0)&&"i"===F$e.charAt(F$o+4);)F$o+=5;if(F$o<0)throw"add include err,no #end:"+F$e;F$a=F$e.indexOf("\n",F$F);var F$E=F$y.splitToWords(F$e.substr(F$F,F$a-F$F),null);"code"==F$E[1]?this.codes[F$E[2]]=F$e.substr(F$a+1,F$o-F$a-1):"function"==F$E[1]&&(F$a=F$e.indexOf("function",F$F),F$a+="function".length,this.funs[F$E[3]]=F$e.substr(F$a+1,F$o-F$a-1),this.funnames+=F$E[3]+";"),F$F=F$o+1}}F$O(F$e,"");var F$F=F$e.prototype;return F$F.getWith=function(F$e){var F$F=F$e?this.codes[F$e]:this.script;if(!F$F)throw"get with error:"+F$e;return F$F},F$F.getFunsScript=function(F$e){var F$F="";for(var F$a in this.funs)0<=F$e.indexOf(F$a+";")&&(F$F+=this.funs[F$a]);return F$F},F$e}()},F$y}(),F$Me=function(){function F$Y(){}return F$O(F$Y,"laya.webgl.WebGL"),F$Y._uint8ArraySlice=function(){for(var F$e=this.length,F$F=new Uint8Array(this.length),F$a=0;F$a<F$e;F$a++)F$F[F$a]=this[F$a];return F$F},F$Y._float32ArraySlice=function(){for(var F$e=this.length,F$F=new Float32Array(this.length),F$a=0;F$a<F$e;F$a++)F$F[F$a]=this[F$a];return F$F},F$Y._uint16ArraySlice=function(F$e){var F$F,F$a=arguments,F$o=0,F$E=0;if(0===F$a.length)for(F$o=this.length,F$F=new Uint16Array(F$o),F$E=0;F$E<F$o;F$E++)F$F[F$E]=this[F$E];else if(2===F$a.length){var F$s=F$a[0],F$Y=F$a[1];if(F$s<F$Y)for(F$o=F$Y-F$s,F$F=new Uint16Array(F$o),F$E=F$s;F$E<F$Y;F$E++)F$F[F$E-F$s]=this[F$E];else F$F=new Uint16Array(0)}return F$F},F$Y.expandContext=function(){var F$e=F$E.prototype,F$F=CanvasRenderingContext2D.prototype;F$F.fillTrangles=F$e.fillTrangles,F$ie.__int__(null),F$F.setIBVB=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){void 0===F$R&&(F$R=0),void 0===F$H&&(F$H=0),null===F$a&&(this._ib=this._ib||F$ce.QuadrangleIB,F$a=this._ib,F$Pe.expandIBQuadrangle(F$a,F$o._byteLength/64+8)),this._setIBVB(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H)},F$F.fillTrangles=function(F$e,F$F,F$a,F$o,F$E){this._curMat=this._curMat||F$B.create(),this._vb=this._vb||F$he.create(),this._ib||(this._ib=F$ce.create(),F$Pe.fillIBQuadrangle(this._ib,F$Y/4));var F$s=this._vb,F$Y=F$o.length>>4;F$Pe.fillTranglesVB(F$s,F$F,F$a,F$o,F$E||this._curMat,0,0),F$Pe.expandIBQuadrangle(this._ib,F$s._byteLength/64+8);var F$_=new F$Le(1,0);F$_.textureHost=F$e;var F$R=new F$te("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");F$s._vertType=3,this._setIBVB(F$F,F$a,this._ib,F$s,6*F$Y,F$E,F$R,F$_,0,0)}},F$Y.enable=function(){if(F$q.__init__(),F$j.isConchApp&&!F$j.isConchWebGL)return F$D.skinAniSprite=function(){return new F$ee},F$Y.expandContext(),!1;if(F$D.getWebGLContext=function(F$e){for(var F$F,F$a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],F$o=0;F$o<F$a.length;F$o++){try{F$F=F$e.getContext(F$a[F$o],{stencil:F$b.isStencil,alpha:F$b.isAlpha,antialias:F$b.isAntialias,premultipliedAlpha:F$b.premultipliedAlpha,preserveDrawingBuffer:F$b.preserveDrawingBuffer})}catch(F$e){}if(F$F)return F$F}return null},null==(F$Y.mainContext=F$Y.mainContext||F$D.getWebGLContext(F$j._mainCanvas)))return!1;if(F$j.isWebGL)return!0;F$l.create=function(F$e,F$F){return new F$eF(F$e,F$F)},F$P.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){return new F$We(F$e,F$F,F$a,F$o,F$E,F$s,F$Y)},F$j.WebGL=F$Y,F$j.isWebGL=!0,F$qe.__init__(),F$D.createRenderSprite=function(F$e,F$F){return new F$Be(F$e,F$F)},F$D.createWebGLContext2D=function(F$e){return new F$be(F$e)},F$D.changeWebGLSize=function(F$e,F$F){laya.webgl.WebGL.onStageResize(F$e,F$F)},F$D.createGraphics=function(){return new F$me};var F$e=F$D.createFilterAction;return F$D.createFilterAction=F$e||function(F$e){return new F$ve},F$D.clear=function(F$e){F$$e.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var F$F=F$j.context.ctx,F$a=0==F$F._submits._length||F$b.preserveDrawingBuffer?F$I.create(F$e)._color:F$G._wgColor;F$a&&F$F.clearBG(F$a[0],F$a[1],F$a[2],F$a[3]),F$$e.clear()},F$D.addToAtlas=function(F$e,F$F){void 0===F$F&&(F$F=!1);var F$a=F$e.bitmap;F$j.optimizeTextureMemory(F$e.url,F$e)?F$m.__typeof(F$a,"laya.webgl.resource.IMergeAtlasBitmap")&&F$a.allowMerageInAtlas&&F$a.on("recovered",F$e,F$e.addTextureToAtlas):F$a.enableMerageInAtlas=!1},F$D.isAtlas=function(F$e){return F$e instanceof laya.webgl.atlas.AtlasWebGLCanvas},F$w._enable(),F$D.beginFlush=function(){for(var F$e=F$w.instance,F$F=F$e.getAtlaserCount(),F$a=0;F$a<F$F;F$a++){var F$o=F$e.getAtlaserByIndex(F$a).texture;F$o._flashCacheImageNeedFlush&&F$D.flashFlushImage(F$o)}},F$D.drawToCanvas=function(F$e,F$F,F$a,F$o,F$E,F$s){(F$a<=0||F$o<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),F$a|=0,F$o|=0,F$E|=0,F$s|=0;var F$Y=F$pe.create(F$a,F$o,6408,5121,0,!1);F$Y.start(),F$Y.clear(0,0,0,0),F$j.context.clear(),F$$.renders[F$F]._fun(F$e,F$j.context,F$E,F$$e.height-F$o+F$s),F$j.context.flush(),F$Y.end();var F$_=F$Y.getData(0,0,F$a,F$o);if(F$Y.recycle(),F$_.byteLength==F$a*F$o*4){var F$R=new F$xe;F$R._canvas=F$q.createElement("canvas"),F$R.size(F$a,F$o);var F$H=F$R._canvas.getContext("2d");F$q.canvas.size(F$a,F$o);var F$g=F$q.context,F$n=F$g.createImageData(F$a,F$o);return F$n.data.set(new Uint8ClampedArray(F$_.buffer)),F$R._imgData=F$n,F$g.putImageData(F$n,0,0),F$H.save(),F$H.translate(0,F$o),F$H.scale(1,-1),F$H.drawImage(F$q.canvas.source,0,0),F$H.restore(),F$R}console.log("drawToCanvas error: w:"+F$a+",h:"+F$o+",datalen:"+F$_.byteLength)},F$D.createFilterAction=function(F$e){var F$F;switch(F$e){case 32:F$F=new F$ve}return F$F},F$D.addTextureToAtlas=function(F$e){F$e._uvID++,F$w._atlasRestore++,F$e.bitmap.enableMerageInAtlas&&F$w.instance.addToAtlas(F$e)},F$D.getTexturePixels=function(F$e,F$F,F$a,F$o,F$E){F$j.context.ctx.clear();var F$s=new F$V;F$s.graphics.drawTexture(F$e,-F$F,-F$a);var F$Y=F$pe.create(F$o,F$E);F$Y.start(),F$Y.clear(0,0,0,0),F$s.render(F$j.context,0,0),F$j.context.ctx.flush(),F$Y.end();for(var F$_=F$Y.getData(0,0,F$o,F$E),F$R=[],F$H=0,F$g=F$E-1;0<=F$g;F$g--)for(var F$n=0;F$n<F$o;F$n++)F$H=4*(F$g*F$o+F$n),F$R.push(F$_[F$H]),F$R.push(F$_[F$H+1]),F$R.push(F$_[F$H+2]),F$R.push(F$_[F$H+3]);return F$R},F$D.skinAniSprite=function(){return new F$ee},F$H.create=function(F$e,F$F){var F$a=new F$xe;return F$a._imgData=F$F,F$a.flipY=!1,F$a},F$L._filterStart=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$e.getValue("bounds"),F$Y=F$pe.create(F$s.width,F$s.height);if(F$Y.start(),F$Y.clear(0,0,0,0),F$e.addValue("src",F$Y),F$e.addValue("ScissorTest",F$$e.worldScissorTest),F$$e.worldScissorTest){var F$_=new F$K;F$_.copyFrom(F$a.ctx._clipRect),F$e.addValue("clipRect",F$_),F$$e.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},F$L._filterEnd=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$e.getValue("bounds");F$e.getValue("src").end();var F$Y=F$pe.create(F$s.width,F$s.height);F$Y.start(),F$Y.clear(0,0,0,0),F$e.addValue("out",F$Y),F$F._set$P("_filterCache",F$Y),F$F._set$P("_isHaveGlowFilter",F$e.getValue("_isHaveGlowFilter"))},F$L._EndTarget=function(F$e,F$F){if(F$e.getValue("src").recycle(),F$e.getValue("out").end(),F$e.getValue("ScissorTest")){F$$e.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),F$F.ctx.save();var F$a=F$e.getValue("clipRect");F$F.ctx.clipRect(F$a.x,F$a.y,F$a.width,F$a.height)}},F$L._useSrc=function(F$e){var F$F=F$e.getValue("out");F$F.end(),(F$F=F$e.getValue("src")).start(),F$F.clear(0,0,0,0)},F$L._endSrc=function(F$e){F$e.getValue("src").end()},F$L._useOut=function(F$e){var F$F=F$e.getValue("src");F$F.end(),(F$F=F$e.getValue("out")).start(),F$F.clear(0,0,0,0)},F$L._endOut=function(F$e){F$e.getValue("out").end()},F$L._recycleScope=function(F$e){F$e.recycle()},F$L._filter=function(F$e,F$F,F$a,F$o){var F$E=this._next;if(F$E){var F$s,F$Y,F$_=F$e.filters,F$R=F$_.length;if(1==F$R&&32==F$_[0].type)return F$F.ctx.save(),F$F.ctx.setFilters([F$_[0]]),F$E._fun.call(F$E,F$e,F$F,F$a,F$o),void F$F.ctx.restore();var F$H=F$_e.create(),F$g=F$v.TEMP,F$n=F$F.ctx._getTransformMatrix(),F$O=F$B.create();F$n.copyTo(F$O);var F$q=0,F$I=0,F$l=!1,F$P=F$e._$P._filterCache?F$e._$P._filterCache:null;if(!F$P||F$e._repaint){F$l=F$e._isHaveGlowFilter(),F$H.addValue("_isHaveGlowFilter",F$l),F$l&&(F$q=50,F$I=25),(F$Y=new F$K).copyFrom(F$e.getSelfBounds()),F$Y.x+=F$e.x,F$Y.y+=F$e.y,F$Y.x-=F$e.pivotX+4,F$Y.y-=F$e.pivotY+4;var F$j=F$Y.x,F$$=F$Y.y;if(F$Y.width+=F$q+8,F$Y.height+=F$q+8,F$g.x=F$Y.x*F$O.a+F$Y.y*F$O.c,F$g.y=F$Y.y*F$O.d+F$Y.x*F$O.b,F$Y.x=F$g.x,F$Y.y=F$g.y,F$g.x=F$Y.width*F$O.a+F$Y.height*F$O.c,F$g.y=F$Y.height*F$O.d+F$Y.width*F$O.b,F$Y.width=F$g.x,F$Y.height=F$g.y,F$Y.width<=0||F$Y.height<=0)return;F$P&&F$P.recycle(),F$H.addValue("bounds",F$Y);var F$y=F$Ye.create([F$H,F$e,F$F,0,0],F$L._filterStart);F$F.addRenderObject(F$y),F$F.ctx._renderKey=0,F$F.ctx._shader2D.glTexture=null;var F$M=F$e.x-F$j+F$I,F$D=F$e.y-F$$+F$I;F$E._fun.call(F$E,F$e,F$F,F$M,F$D),F$y=F$Ye.create([F$H,F$e,F$F,0,0],F$L._filterEnd),F$F.addRenderObject(F$y);for(var F$m=0;F$m<F$R;F$m++){0!=F$m&&(F$y=F$Ye.create([F$H],F$L._useSrc),F$F.addRenderObject(F$y),F$s=F$Le.create(1,0),F$B.TEMP.identity(),F$F.ctx.drawTarget(F$H,0,0,F$Y.width,F$Y.height,F$B.TEMP,"out",F$s,null,F$C.TOINT.overlay),F$y=F$Ye.create([F$H],F$L._useOut),F$F.addRenderObject(F$y)),F$_[F$m].action.apply3d(F$H,F$e,F$F,0,0)}F$y=F$Ye.create([F$H,F$F],F$L._EndTarget),F$F.addRenderObject(F$y)}else{if((F$l=!!F$e._$P._isHaveGlowFilter&&F$e._$P._isHaveGlowFilter)&&(F$q=50,F$I=25),(F$Y=F$e.getBounds()).width<=0||F$Y.height<=0)return;F$Y.width+=F$q,F$Y.height+=F$q,F$g.x=F$Y.x*F$O.a+F$Y.y*F$O.c,F$g.y=F$Y.y*F$O.d+F$Y.x*F$O.b,F$Y.x=F$g.x,F$Y.y=F$g.y,F$g.x=F$Y.width*F$O.a+F$Y.height*F$O.c,F$g.y=F$Y.height*F$O.d+F$Y.width*F$O.b,F$Y.width=F$g.x,F$Y.height=F$g.y,F$H.addValue("out",F$P)}F$a=F$a-F$I-F$e.x,F$o=F$o-F$I-F$e.y,F$g.setTo(F$a,F$o),F$O.transformPoint(F$g),F$a=F$g.x+F$Y.x,F$o=F$g.y+F$Y.y,F$s=F$Le.create(1,0),F$B.TEMP.identity(),F$F.ctx.drawTarget(F$H,F$a,F$o,F$Y.width,F$Y.height,F$B.TEMP,"out",F$s,null,F$C.TOINT.overlay),F$y=F$Ye.create([F$H],F$L._recycleScope),F$F.addRenderObject(F$y),F$O.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=F$Y._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=F$Y._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=F$Y._uint8ArraySlice),!0},F$Y.onStageResize=function(F$e,F$F){null!=F$Y.mainContext&&(F$Y.mainContext.viewport(0,0,F$e,F$F),F$$e.width=F$e,F$$e.height=F$F)},F$Y.onInvalidGLRes=function(){F$w.instance.freeAll(),F$M.releaseContentManagers(!0),F$Y.doNodeRepaint(F$m.stage),F$Y.mainContext.viewport(0,0,F$$e.width,F$$e.height),F$m.stage.event("devicelost")},F$Y.doNodeRepaint=function(F$e){0==F$e.numChildren&&F$e.repaint();for(var F$F=0;F$F<F$e.numChildren;F$F++)F$Y.doNodeRepaint(F$e.getChildAt(F$F))},F$Y.init=function(F$e,F$F,F$a){F$Y.mainCanvas=F$e,F$H._createContext=function(F$e){return new F$be(F$e)},F$xe._createContext=function(F$e){return new F$be(F$e)};var F$o=laya.webgl.WebGL.mainContext;if(null!=F$o.getShaderPrecisionFormat){var F$E=F$o.getShaderPrecisionFormat(35633,36338),F$s=F$o.getShaderPrecisionFormat(35632,36338);F$Y.shaderHighPrecision=!(!F$E.precision||!F$s.precision)}else F$Y.shaderHighPrecision=!1;if(F$Y.compressAstc=F$o.getExtension("WEBGL_compressed_texture_astc"),F$Y.compressAtc=F$o.getExtension("WEBGL_compressed_texture_atc"),F$Y.compressEtc=F$o.getExtension("WEBGL_compressed_texture_etc"),F$Y.compressEtc1=F$o.getExtension("WEBGL_compressed_texture_etc1"),F$Y.compressPvrtc=F$o.getExtension("WEBGL_compressed_texture_pvrtc"),F$Y.compressS3tc=F$o.getExtension("WEBGL_compressed_texture_s3tc"),F$Y.compressS3tc_srgb=F$o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),F$Y.compressAstc=F$Y.compressAstc?F$Y.compressAstc:{},F$Y.compressAtc=F$Y.compressAtc?F$Y.compressAtc:{},F$Y.compressEtc=F$Y.compressEtc?F$Y.compressEtc:{},F$Y.compressEtc1=F$Y.compressEtc1?F$Y.compressEtc1:{},F$Y.compressPvrtc=F$Y.compressPvrtc?F$Y.compressPvrtc:{},F$Y.compressS3tc=F$Y.compressS3tc?F$Y.compressS3tc:{},F$Y.compressS3tc_srgb=F$Y.compressS3tc_srgb?F$Y.compressS3tc_srgb:{},F$o.deleteTexture1=F$o.deleteTexture,F$o.deleteTexture=function(F$e){F$e==F$De.curBindTexValue&&(F$De.curBindTexValue=null),F$o.deleteTexture1(F$e)},F$Y.onStageResize(F$F,F$a),null==F$Y.mainContext)throw new Error("webGL getContext err!");F$r.__init__(),F$w.__init__(),F$Ve.__init__(),F$se.__init__(),F$be.__init__(),F$Le.__init__(),F$c.__init__(),F$ie.__int__(F$o),F$C._init_(F$o),F$j.isConchApp&&conch.setOnInvalidGLRes(F$Y.onInvalidGLRes)},F$Y.mainCanvas=null,F$Y.antialias=!0,F$Y.shaderHighPrecision=!1,F$Y._bg_null=[0,0,0,0],F$Y}(),F$De=function(){function F$o(){}return F$O(F$o,"laya.webgl.WebGLContext"),F$o.UseProgram=function(F$e){return F$o._useProgram!==F$e&&(F$Me.mainContext.useProgram(F$e),F$o._useProgram=F$e,!0)},F$o.setDepthTest=function(F$e,F$F){F$F!==F$o._depthTest&&((F$o._depthTest=F$F)?F$e.enable(2929):F$e.disable(2929))},F$o.setDepthMask=function(F$e,F$F){F$F!==F$o._depthMask&&(F$o._depthMask=F$F,F$e.depthMask(F$F))},F$o.setDepthFunc=function(F$e,F$F){F$F!==F$o._depthFunc&&(F$o._depthFunc=F$F,F$e.depthFunc(F$F))},F$o.setBlend=function(F$e,F$F){F$F!==F$o._blend&&((F$o._blend=F$F)?F$e.enable(3042):F$e.disable(3042))},F$o.setBlendFunc=function(F$e,F$F,F$a){(F$F!==F$o._sFactor||F$a!==F$o._dFactor)&&(F$o._sFactor=F$F,F$o._dFactor=F$a,F$e.blendFunc(F$F,F$a))},F$o.setCullFace=function(F$e,F$F){F$F!==F$o._cullFace&&((F$o._cullFace=F$F)?F$e.enable(2884):F$e.disable(2884))},F$o.setFrontFace=function(F$e,F$F){F$F!==F$o._frontFace&&(F$o._frontFace=F$F,F$e.frontFace(F$F))},F$o.bindTexture=function(F$e,F$F,F$a){F$e.bindTexture(F$F,F$a),F$o.curBindTexTarget=F$F,F$o.curBindTexValue=F$a},F$o.DEPTH_BUFFER_BIT=256,F$o.STENCIL_BUFFER_BIT=1024,F$o.COLOR_BUFFER_BIT=16384,F$o.POINTS=0,F$o.LINES=1,F$o.LINE_LOOP=2,F$o.LINE_STRIP=3,F$o.TRIANGLES=4,F$o.TRIANGLE_STRIP=5,F$o.TRIANGLE_FAN=6,F$o.ZERO=0,F$o.ONE=1,F$o.SRC_COLOR=768,F$o.ONE_MINUS_SRC_COLOR=769,F$o.SRC_ALPHA=770,F$o.ONE_MINUS_SRC_ALPHA=771,F$o.DST_ALPHA=772,F$o.ONE_MINUS_DST_ALPHA=773,F$o.DST_COLOR=774,F$o.ONE_MINUS_DST_COLOR=775,F$o.SRC_ALPHA_SATURATE=776,F$o.FUNC_ADD=32774,F$o.BLEND_EQUATION=32777,F$o.BLEND_EQUATION_RGB=32777,F$o.BLEND_EQUATION_ALPHA=34877,F$o.FUNC_SUBTRACT=32778,F$o.FUNC_REVERSE_SUBTRACT=32779,F$o.BLEND_DST_RGB=32968,F$o.BLEND_SRC_RGB=32969,F$o.BLEND_DST_ALPHA=32970,F$o.BLEND_SRC_ALPHA=32971,F$o.CONSTANT_COLOR=32769,F$o.ONE_MINUS_CONSTANT_COLOR=32770,F$o.CONSTANT_ALPHA=32771,F$o.ONE_MINUS_CONSTANT_ALPHA=32772,F$o.BLEND_COLOR=32773,F$o.ARRAY_BUFFER=34962,F$o.ELEMENT_ARRAY_BUFFER=34963,F$o.ARRAY_BUFFER_BINDING=34964,F$o.ELEMENT_ARRAY_BUFFER_BINDING=34965,F$o.STREAM_DRAW=35040,F$o.STATIC_DRAW=35044,F$o.DYNAMIC_DRAW=35048,F$o.BUFFER_SIZE=34660,F$o.BUFFER_USAGE=34661,F$o.CURRENT_VERTEX_ATTRIB=34342,F$o.FRONT=1028,F$o.BACK=1029,F$o.CULL_FACE=2884,F$o.FRONT_AND_BACK=1032,F$o.BLEND=3042,F$o.DITHER=3024,F$o.STENCIL_TEST=2960,F$o.DEPTH_TEST=2929,F$o.SCISSOR_TEST=3089,F$o.POLYGON_OFFSET_FILL=32823,F$o.SAMPLE_ALPHA_TO_COVERAGE=32926,F$o.SAMPLE_COVERAGE=32928,F$o.NO_ERROR=0,F$o.INVALID_ENUM=1280,F$o.INVALID_VALUE=1281,F$o.INVALID_OPERATION=1282,F$o.OUT_OF_MEMORY=1285,F$o.CW=2304,F$o.CCW=2305,F$o.LINE_WIDTH=2849,F$o.ALIASED_POINT_SIZE_RANGE=33901,F$o.ALIASED_LINE_WIDTH_RANGE=33902,F$o.CULL_FACE_MODE=2885,F$o.FRONT_FACE=2886,F$o.DEPTH_RANGE=2928,F$o.DEPTH_WRITEMASK=2930,F$o.DEPTH_CLEAR_VALUE=2931,F$o.DEPTH_FUNC=2932,F$o.STENCIL_CLEAR_VALUE=2961,F$o.STENCIL_FUNC=2962,F$o.STENCIL_FAIL=2964,F$o.STENCIL_PASS_DEPTH_FAIL=2965,F$o.STENCIL_PASS_DEPTH_PASS=2966,F$o.STENCIL_REF=2967,F$o.STENCIL_VALUE_MASK=2963,F$o.STENCIL_WRITEMASK=2968,F$o.STENCIL_BACK_FUNC=34816,F$o.STENCIL_BACK_FAIL=34817,F$o.STENCIL_BACK_PASS_DEPTH_FAIL=34818,F$o.STENCIL_BACK_PASS_DEPTH_PASS=34819,F$o.STENCIL_BACK_REF=36003,F$o.STENCIL_BACK_VALUE_MASK=36004,F$o.STENCIL_BACK_WRITEMASK=36005,F$o.VIEWPORT=2978,F$o.SCISSOR_BOX=3088,F$o.COLOR_CLEAR_VALUE=3106,F$o.COLOR_WRITEMASK=3107,F$o.UNPACK_ALIGNMENT=3317,F$o.PACK_ALIGNMENT=3333,F$o.MAX_TEXTURE_SIZE=3379,F$o.MAX_VIEWPORT_DIMS=3386,F$o.SUBPIXEL_BITS=3408,F$o.RED_BITS=3410,F$o.GREEN_BITS=3411,F$o.BLUE_BITS=3412,F$o.ALPHA_BITS=3413,F$o.DEPTH_BITS=3414,F$o.STENCIL_BITS=3415,F$o.POLYGON_OFFSET_UNITS=10752,F$o.POLYGON_OFFSET_FACTOR=32824,F$o.TEXTURE_BINDING_2D=32873,F$o.SAMPLE_BUFFERS=32936,F$o.SAMPLES=32937,F$o.SAMPLE_COVERAGE_VALUE=32938,F$o.SAMPLE_COVERAGE_INVERT=32939,F$o.NUM_COMPRESSED_TEXTURE_FORMATS=34466,F$o.COMPRESSED_TEXTURE_FORMATS=34467,F$o.DONT_CARE=4352,F$o.FASTEST=4353,F$o.NICEST=4354,F$o.GENERATE_MIPMAP_HINT=33170,F$o.BYTE=5120,F$o.UNSIGNED_BYTE=5121,F$o.SHORT=5122,F$o.UNSIGNED_SHORT=5123,F$o.INT=5124,F$o.UNSIGNED_INT=5125,F$o.FLOAT=5126,F$o.DEPTH_COMPONENT=6402,F$o.ALPHA=6406,F$o.RGB=6407,F$o.RGBA=6408,F$o.LUMINANCE=6409,F$o.LUMINANCE_ALPHA=6410,F$o.UNSIGNED_SHORT_4_4_4_4=32819,F$o.UNSIGNED_SHORT_5_5_5_1=32820,F$o.UNSIGNED_SHORT_5_6_5=33635,F$o.FRAGMENT_SHADER=35632,F$o.VERTEX_SHADER=35633,F$o.MAX_VERTEX_ATTRIBS=34921,F$o.MAX_VERTEX_UNIFORM_VECTORS=36347,F$o.MAX_VARYING_VECTORS=36348,F$o.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,F$o.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,F$o.MAX_TEXTURE_IMAGE_UNITS=34930,F$o.MAX_FRAGMENT_UNIFORM_VECTORS=36349,F$o.SHADER_TYPE=35663,F$o.DELETE_STATUS=35712,F$o.LINK_STATUS=35714,F$o.VALIDATE_STATUS=35715,F$o.ATTACHED_SHADERS=35717,F$o.ACTIVE_UNIFORMS=35718,F$o.ACTIVE_ATTRIBUTES=35721,F$o.SHADING_LANGUAGE_VERSION=35724,F$o.CURRENT_PROGRAM=35725,F$o.NEVER=512,F$o.LESS=513,F$o.EQUAL=514,F$o.LEQUAL=515,F$o.GREATER=516,F$o.NOTEQUAL=517,F$o.GEQUAL=518,F$o.ALWAYS=519,F$o.KEEP=7680,F$o.REPLACE=7681,F$o.INCR=7682,F$o.DECR=7683,F$o.INVERT=5386,F$o.INCR_WRAP=34055,F$o.DECR_WRAP=34056,F$o.VENDOR=7936,F$o.RENDERER=7937,F$o.VERSION=7938,F$o.NEAREST=9728,F$o.LINEAR=9729,F$o.NEAREST_MIPMAP_NEAREST=9984,F$o.LINEAR_MIPMAP_NEAREST=9985,F$o.NEAREST_MIPMAP_LINEAR=9986,F$o.LINEAR_MIPMAP_LINEAR=9987,F$o.TEXTURE_MAG_FILTER=10240,F$o.TEXTURE_MIN_FILTER=10241,F$o.TEXTURE_WRAP_S=10242,F$o.TEXTURE_WRAP_T=10243,F$o.TEXTURE_2D=3553,F$o.TEXTURE=5890,F$o.TEXTURE_CUBE_MAP=34067,F$o.TEXTURE_BINDING_CUBE_MAP=34068,F$o.TEXTURE_CUBE_MAP_POSITIVE_X=34069,F$o.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,F$o.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,F$o.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,F$o.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,F$o.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,F$o.MAX_CUBE_MAP_TEXTURE_SIZE=34076,F$o.TEXTURE0=33984,F$o.TEXTURE1=33985,F$o.TEXTURE2=33986,F$o.TEXTURE3=33987,F$o.TEXTURE4=33988,F$o.TEXTURE5=33989,F$o.TEXTURE6=33990,F$o.TEXTURE7=33991,F$o.TEXTURE8=33992,F$o.TEXTURE9=33993,F$o.TEXTURE10=33994,F$o.TEXTURE11=33995,F$o.TEXTURE12=33996,F$o.TEXTURE13=33997,F$o.TEXTURE14=33998,F$o.TEXTURE15=33999,F$o.TEXTURE16=34e3,F$o.TEXTURE17=34001,F$o.TEXTURE18=34002,F$o.TEXTURE19=34003,F$o.TEXTURE20=34004,F$o.TEXTURE21=34005,F$o.TEXTURE22=34006,F$o.TEXTURE23=34007,F$o.TEXTURE24=34008,F$o.TEXTURE25=34009,F$o.TEXTURE26=34010,F$o.TEXTURE27=34011,F$o.TEXTURE28=34012,F$o.TEXTURE29=34013,F$o.TEXTURE30=34014,F$o.TEXTURE31=34015,F$o.ACTIVE_TEXTURE=34016,F$o.REPEAT=10497,F$o.CLAMP_TO_EDGE=33071,F$o.MIRRORED_REPEAT=33648,F$o.FLOAT_VEC2=35664,F$o.FLOAT_VEC3=35665,F$o.FLOAT_VEC4=35666,F$o.INT_VEC2=35667,F$o.INT_VEC3=35668,F$o.INT_VEC4=35669,F$o.BOOL=35670,F$o.BOOL_VEC2=35671,F$o.BOOL_VEC3=35672,F$o.BOOL_VEC4=35673,F$o.FLOAT_MAT2=35674,F$o.FLOAT_MAT3=35675,F$o.FLOAT_MAT4=35676,F$o.SAMPLER_2D=35678,F$o.SAMPLER_CUBE=35680,F$o.VERTEX_ATTRIB_ARRAY_ENABLED=34338,F$o.VERTEX_ATTRIB_ARRAY_SIZE=34339,F$o.VERTEX_ATTRIB_ARRAY_STRIDE=34340,F$o.VERTEX_ATTRIB_ARRAY_TYPE=34341,F$o.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,F$o.VERTEX_ATTRIB_ARRAY_POINTER=34373,F$o.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,F$o.COMPILE_STATUS=35713,F$o.LOW_FLOAT=36336,F$o.MEDIUM_FLOAT=36337,F$o.HIGH_FLOAT=36338,F$o.LOW_INT=36339,F$o.MEDIUM_INT=36340,F$o.HIGH_INT=36341,F$o.FRAMEBUFFER=36160,F$o.RENDERBUFFER=36161,F$o.RGBA4=32854,F$o.RGB5_A1=32855,F$o.RGB565=36194,F$o.DEPTH_COMPONENT16=33189,F$o.STENCIL_INDEX=6401,F$o.STENCIL_INDEX8=36168,F$o.DEPTH_STENCIL=34041,F$o.RENDERBUFFER_WIDTH=36162,F$o.RENDERBUFFER_HEIGHT=36163,F$o.RENDERBUFFER_INTERNAL_FORMAT=36164,F$o.RENDERBUFFER_RED_SIZE=36176,F$o.RENDERBUFFER_GREEN_SIZE=36177,F$o.RENDERBUFFER_BLUE_SIZE=36178,F$o.RENDERBUFFER_ALPHA_SIZE=36179,F$o.RENDERBUFFER_DEPTH_SIZE=36180,F$o.RENDERBUFFER_STENCIL_SIZE=36181,F$o.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,F$o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,F$o.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,F$o.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,F$o.COLOR_ATTACHMENT0=36064,F$o.DEPTH_ATTACHMENT=36096,F$o.STENCIL_ATTACHMENT=36128,F$o.DEPTH_STENCIL_ATTACHMENT=33306,F$o.NONE=0,F$o.FRAMEBUFFER_COMPLETE=36053,F$o.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,F$o.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,F$o.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,F$o.FRAMEBUFFER_UNSUPPORTED=36061,F$o.FRAMEBUFFER_BINDING=36006,F$o.RENDERBUFFER_BINDING=36007,F$o.MAX_RENDERBUFFER_SIZE=34024,F$o.INVALID_FRAMEBUFFER_OPERATION=1286,F$o.UNPACK_FLIP_Y_WEBGL=37440,F$o.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,F$o.CONTEXT_LOST_WEBGL=37442,F$o.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,F$o.BROWSER_DEFAULT_WEBGL=37444,F$o._useProgram=null,F$o._depthTest=!0,F$o._depthMask=!0,F$o._blend=!1,F$o._cullFace=!1,F$o.curBindTexTarget=null,F$o.curBindTexValue=null,F$Y(F$o,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),F$o}(),F$me=function(F$e){function F$F(){F$F.__super.call(this)}F$O(F$F,"laya.webgl.display.GraphicsGL",F$_);var F$a=F$F.prototype;return F$a.setShader=function(F$e){this._saveToCmd(F$j.context._setShader,[F$e])},F$a.setIBVB=function(F$e,F$F,F$a,F$o,F$E,F$s){this._saveToCmd(F$j.context._setIBVB,[F$e,F$F,F$a,F$o,F$E,F$s])},F$a.drawParticle=function(F$e,F$F,F$a){var F$o=F$D.createParticleTemplate2D(F$a);F$o.x=F$e,F$o.y=F$F,this._saveToCmd(F$j.context._drawParticle,[F$o])},F$F}(),F$be=function(F$e){var F$a;function F$d(F$e){this._x=0,this._y=0,this._id=++F$d._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,F$d.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=F$d.MAXCLIPRECT,this.mOutPoint,this._canvas=F$e,this._canvas._addReference(),F$d._contextcount++,F$j.isFlash?(this._ib=F$ce.create(35044),F$Pe.fillIBQuadrangle(this._ib,16)):this._ib=F$ce.QuadrangleIB,this.clear()}F$O(F$d,"laya.webgl.canvas.WebGLContext2D",F$E);var F$F=F$d.prototype;return F$F.setIsMainContext=function(){this._isMain=!0},F$F.clearBG=function(F$e,F$F,F$a,F$o){var F$E=F$Me.mainContext;F$E.clearColor(F$e,F$F,F$a,F$o),F$E.clear(16384)},F$F._getSubmits=function(){return this._submits},F$F._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var F$e=0,F$F=this._submits._length;F$e<F$F;F$e++)this._submits[F$e].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},F$F.destroy=function(){--F$d._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=F$ce.QuadrangleIB&&this._ib.releaseResource()},F$F.clear=function(){this._submits||(this._other=F$a.DEFAULT,this._curMat=F$B.create(),this._vb=F$he.create(-1),this._submits=[],this._save=[F$f.Create(this)],this._save.length=10,this._shader2D=new F$c,this._triangleMesh=F$ze.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=F$a.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=F$d.MAXCLIPRECT,this._curSubmit=F$se.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=F$u.DEFAULT;for(var F$e=0,F$F=this._submits._length;F$e<F$F;F$e++)this._submits[F$e].releaseRender(),this._submits[F$e]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},F$F.size=function(F$e,F$F){if(this._width!=F$e||this._height!=F$F)if(0==F$e||0==F$F){0!=this._vb._byteLength&&(this._width=F$e,this._height=F$F,this._vb.clear(),this._vb.upload());for(var F$a=0,F$o=this._submits._length;F$a<F$o;F$a++)this._submits[F$a].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=F$e,this._height=F$F,this._targets&&this._targets.size(F$e,F$F),this._canvas.memorySize-=this._canvas.memorySize;0===F$e&&0===F$F&&this._releaseMem()},F$F._getTransformMatrix=function(){return this._curMat},F$F.translate=function(F$e,F$F){0===F$e&&0===F$F||(F$Q.save(this),this._curMat.bTransform&&(F$i.save(this),this._curMat.transformPointN(F$v.TEMP.setTo(F$e,F$F)),F$e=F$v.TEMP.x,F$F=F$v.TEMP.y),this._x+=F$e,this._y+=F$F)},F$F.save=function(){this._save[this._save._length++]=F$f.Create(this)},F$F.restore=function(){var F$e=this._save._length;if(!(F$e<1))for(var F$F=F$e-1;0<=F$F;F$F--){var F$a=this._save[F$F];if(F$a.restore(this),F$a.isSaveMark())return void(this._save._length=F$F)}},F$F._fillText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){void 0===F$H&&(F$H=0);var F$g=this._shader2D,F$n=this._curSubmit.shaderValue,F$O=F$E?F$Ie.create(F$E):this._other.font;if(F$w.enabled)F$g.ALPHA!==F$n.ALPHA&&(F$g.glTexture=null),F$qe.drawText(this,F$e,F$F,this._curMat,F$O,F$R||this._other.textAlign,F$s,F$Y,F$_,F$a,F$o,F$H);else{this._shader2D.defines.getValue();var F$q=F$s?F$I.create(F$s)._color:F$g.colorAdd;F$g.ALPHA===F$n.ALPHA&&F$q===F$g.colorAdd&&F$n.colorAdd===F$g.colorAdd||(F$g.glTexture=null,F$g.colorAdd=F$q),F$qe.drawText(this,F$e,F$F,this._curMat,F$O,F$R||this._other.textAlign,F$s,F$Y,F$_,F$a,F$o,F$H)}},F$F.fillWords=function(F$e,F$F,F$a,F$o,F$E,F$s){this._fillText(null,F$e,F$F,F$a,F$o,F$E,null,-1,null,F$s)},F$F.fillBorderWords=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._fillBorderText(null,F$e,F$F,F$a,F$o,F$E,F$s,F$Y,null)},F$F.fillText=function(F$e,F$F,F$a,F$o,F$E,F$s){this._fillText(F$e,null,F$F,F$a,F$o,F$E,null,-1,F$s)},F$F.strokeText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._fillText(F$e,null,F$F,F$a,F$o,null,F$E,F$s||1,F$Y)},F$F.fillBorderText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){this._fillBorderText(F$e,null,F$F,F$a,F$o,F$E,F$s,F$Y,F$_)},F$F._fillBorderText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){if(!F$w.enabled)return this._fillText(F$e,F$F,F$a,F$o,F$E,null,F$Y,F$_||1,F$R),void this._fillText(F$e,F$F,F$a,F$o,F$E,F$s,null,-1,F$R);var F$H=this._shader2D,F$g=this._curSubmit.shaderValue;F$H.ALPHA!==F$g.ALPHA&&(F$H.glTexture=null);var F$n=F$E?(F$d._fontTemp.setFont(F$E),F$d._fontTemp):this._other.font;F$qe.drawText(this,F$e,F$F,this._curMat,F$n,F$R||this._other.textAlign,F$s,F$Y,F$_||1,F$a,F$o,0)},F$F.fillRect=function(F$e,F$F,F$a,F$o,F$E){var F$s=this._vb;if(F$Pe.fillRectImgVb(F$s,this._clipRect,F$e,F$F,F$a,F$o,F$z.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$Y=this._shader2D.fillStyle;F$E&&(this._shader2D.fillStyle=F$u.create(F$E));var F$_=this._shader2D,F$R=this._curSubmit.shaderValue;if(F$_.fillStyle!==F$R.fillStyle||F$_.ALPHA!==F$R.ALPHA){F$_.glTexture=null;var F$H=this._curSubmit=F$se.createSubmit(this,this._ib,F$s,(F$s._byteLength-64)/32*3,F$Le.create(2,0));F$H.shaderValue.color=F$_.fillStyle._color._color,F$H.shaderValue.ALPHA=F$_.ALPHA,this._submits[this._submits._length++]=F$H}this._curSubmit._numEle+=6,this._shader2D.fillStyle=F$Y}},F$F.fillTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){if(F$e.loaded&&F$e.bitmap&&F$e.source){var F$R=this._vb,F$H=F$e.bitmap.width,F$g=F$e.bitmap.height,F$n=F$e.uv,F$O=F$Y.x%F$e.width,F$q=F$Y.y%F$e.height;if(F$H!=F$_.w||F$g!=F$_.h){if(!F$_.w&&!F$_.h)switch(F$_.oy=F$_.ox=0,F$s){case"repeat":F$_.width=F$o,F$_.height=F$E;break;case"repeat-x":F$_.width=F$o,F$q<0?F$e.height+F$q>F$E?F$_.height=F$E:F$_.height=F$e.height+F$q:(F$_.oy=F$q,F$e.height+F$q>F$E?F$_.height=F$E-F$q:F$_.height=F$e.height);break;case"repeat-y":F$O<0?F$e.width+F$O>F$o?F$_.width=F$o:F$_.width=F$e.width+F$O:(F$_.ox=F$O,F$e.width+F$O>F$o?F$_.width=F$o-F$O:F$_.width=F$e.width),F$_.height=F$E;break;case"no-repeat":F$O<0?F$e.width+F$O>F$o?F$_.width=F$o:F$_.width=F$e.width+F$O:(F$_.ox=F$O,F$e.width+F$O>F$o?F$_.width=F$o-F$O:F$_.width=F$e.width),F$q<0?F$e.height+F$q>F$E?F$_.height=F$E:F$_.height=F$e.height+F$q:(F$_.oy=F$q,F$e.height+F$q>F$E?F$_.height=F$E-F$q:F$_.height=F$e.height);break;default:F$_.width=F$o,F$_.height=F$E}F$_.w=F$H,F$_.h=F$g,F$_.uv=[0,0,F$_.width/F$H,0,F$_.width/F$H,F$_.height/F$g,0,F$_.height/F$g]}if(F$F+=F$_.ox,F$a+=F$_.oy,F$O-=F$_.ox,F$q-=F$_.oy,F$Pe.fillRectImgVb(F$R,this._clipRect,F$F,F$a,F$_.width,F$_.height,F$_.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$I=F$Ze.create(this,this._ib,F$R,(F$R._byteLength-64)/32*3,F$Le.create(256,0)),F$l=(this._submits[this._submits._length++]=F$I).shaderValue;F$l.textureHost=F$e;var F$P=F$n[0]*F$H,F$j=F$n[1]*F$g,F$$=(F$n[2]-F$n[0])*F$H,F$y=(F$n[5]-F$n[3])*F$g,F$M=-F$O/F$H,F$D=-F$q/F$g;F$l.u_TexRange[0]=F$P/F$H,F$l.u_TexRange[1]=F$$/F$H,F$l.u_TexRange[2]=F$j/F$g,F$l.u_TexRange[3]=F$y/F$g,F$l.u_offset[0]=F$M,F$l.u_offset[1]=F$D,F$w.enabled&&!this._isMain&&F$I.addTexture(F$e,(F$R._byteLength>>2)-16),(this._curSubmit=F$I)._renderType=10017,F$I._numEle+=6}}else this.sprite&&F$m.timer.callLater(this,this._repaintSprite)},F$F.setShader=function(F$e){F$N.save(this,1048576,this._shader2D,!0),this._shader2D.shader=F$e},F$F.setFilters=function(F$e){F$N.save(this,2097152,this._shader2D,!0),this._shader2D.filters=F$e,this._curSubmit=F$se.RENDERBASE,this._renderKey=0,this._drawCount++},F$F.drawTexture=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._drawTextureM(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,null,1)},F$F.addTextureVb=function(F$e,F$F,F$a){var F$o=this._curSubmit._vb||this._vb,F$E=F$o._byteLength>>2;F$o.byteLength=F$E+16<<2;for(var F$s=F$o.getFloat32Array(),F$Y=0;F$Y<16;F$Y+=4)F$s[F$E++]=F$e[F$Y]+F$F,F$s[F$E++]=F$e[F$Y+1]+F$a,F$s[F$E++]=F$e[F$Y+2],F$s[F$E++]=F$e[F$Y+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),F$o._upload=!0},F$F.willDrawTexture=function(F$e,F$F){if(!(F$e.loaded&&F$e.bitmap&&F$e.source))return this.sprite&&F$m.timer.callLater(this,this._repaintSprite),0;var F$a=F$e.bitmap,F$o=F$a.id+this._shader2D.ALPHA*F$F+10016;if(F$o==this._renderKey)return F$o;var F$E=this._shader2D,F$s=F$E.ALPHA,F$Y=this._curSubmit.shaderValue;F$E.ALPHA*=F$F,this._renderKey=F$o,this._drawCount++,F$E.glTexture=F$a;var F$_=this._vb,F$R=null,F$H=F$_._byteLength/32*3,F$g=F$Y.textureHost&&F$Y.textureHost==F$e&&F$Y.textureHost.alphaTexture==F$e.alphaTexture;return F$R=F$Ze.create(this,this._ib,F$_,F$H,F$Le.create(1,0)),(this._submits[this._submits._length++]=F$R).shaderValue.textureHost=F$e,F$R._renderType=10016,F$R._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$E.ALPHA===F$Y.ALPHA&&F$g,this._curSubmit=F$R,F$E.ALPHA=F$s,F$o},F$F.drawTextures=function(F$e,F$F,F$a,F$o){if(F$e.loaded&&F$e.bitmap&&F$e.source){var F$E=this._clipRect;if(this._clipRect=F$d.MAXCLIPRECT,this._drawTextureM(F$e,F$F[0],F$F[1],F$e.width,F$e.height,F$a,F$o,null,1)){if(this._clipRect=F$E,F$A.drawCall++,!(F$F.length<4)){for(var F$s=this._curSubmit._vb||this._vb,F$Y=this._curMat.a,F$_=this._curMat.d,F$R=2,F$H=F$F.length;F$R<F$H;F$R+=2)F$Pe.copyPreImgVb(F$s,(F$F[F$R]-F$F[F$R-2])*F$Y,(F$F[F$R+1]-F$F[F$R-1])*F$_),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&F$m.timer.callLater(this,this._repaintSprite)},F$F._drawTextureM=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){if(!F$e.loaded||!F$e.source)return this.sprite&&F$m.timer.callLater(this,this._repaintSprite),!1;var F$H=this._curSubmit._vb||this._vb,F$g=F$e.bitmap;F$F+=F$s,F$a+=F$Y,this._drawCount++;var F$n=F$g.id+this._shader2D.ALPHA*F$R+10016;if(F$n!=this._renderKey){this._renderKey=F$n;var F$O=this._curSubmit.shaderValue,F$q=this._shader2D,F$I=F$q.ALPHA;F$q.ALPHA*=F$R,F$q.glTexture=F$g;var F$l=this._vb,F$P=null,F$j=F$l._byteLength/32*3,F$$=F$O.textureHost&&F$O.textureHost==F$e&&F$O.textureHost.alphaTexture==F$e.alphaTexture;F$P=F$Ze.create(this,this._ib,F$l,F$j,F$Le.create(1,0)),(this._submits[this._submits._length++]=F$P).shaderValue.textureHost=F$e,F$P._renderType=10016,F$P._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$q.ALPHA===F$O.ALPHA&&F$$,this._curSubmit=F$P,F$H=this._curSubmit._vb||this._vb,F$q.ALPHA=F$I}return!!F$Pe.fillRectImgVb(F$H,this._clipRect,F$F,F$a,F$o||F$e.width,F$E||F$e.height,F$e.uv,F$_||this._curMat,this._x,this._y,0,0)&&(F$w.enabled&&!this._isMain&&this._curSubmit.addTexture(F$e,(F$H._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},F$F._repaintSprite=function(){this.sprite&&this.sprite.repaint()},F$F._drawText=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){var F$g=F$e.bitmap;this._drawCount++;var F$n=F$g.id+this._shader2D.ALPHA+10016;if(F$n!=this._renderKey){this._renderKey=F$n;var F$O=this._curSubmit.shaderValue,F$q=this._shader2D;F$q.glTexture=F$g;var F$I=this._vb,F$l=null,F$P=F$I._byteLength/32*3,F$j=F$O.textureHost&&F$O.textureHost==F$e&&F$O.textureHost.alphaTexture==F$e.alphaTexture;(F$l=F$w.enabled?F$Ze.create(this,this._ib,F$I,F$P,F$Le.create(1,0)):F$Ze.create(this,this._ib,F$I,F$P,F$Qe.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$q.ALPHA===F$O.ALPHA&&F$j,(this._submits[this._submits._length++]=F$l).shaderValue.textureHost=F$e,F$l._renderType=10016,this._curSubmit=F$l}F$e.active();var F$$=this._curSubmit._vb||this._vb;F$Pe.fillRectImgVb(F$$,this._clipRect,F$F+F$Y,F$a+F$_,F$o||F$e.width,F$E||F$e.height,F$e.uv,F$s||this._curMat,this._x,this._y,F$R,F$H,!0)&&(F$w.enabled&&!this._isMain&&this._curSubmit.addTexture(F$e,(F$$._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},F$F.drawTextureWithTransform=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){if(F$s){var F$H=this._curMat,F$g=this._x,F$n=this._y;(0!==F$Y||0!==F$_)&&(this._x=F$Y*F$H.a+F$_*F$H.c,this._y=F$_*F$H.d+F$Y*F$H.b),F$s&&F$H.bTransform?(F$B.mul(F$s,F$H,F$d._tmpMatrix),(F$s=F$d._tmpMatrix)._checkTransform()):(this._x+=F$H.tx,this._y+=F$H.ty),this._drawTextureM(F$e,F$F,F$a,F$o,F$E,0,0,F$s,F$R),this._x=F$g,this._y=F$n}else this._drawTextureM(F$e,F$F,F$a,F$o,F$E,F$Y,F$_,null,F$R)},F$F.fillQuadrangle=function(F$e,F$F,F$a,F$o,F$E){var F$s=this._curSubmit,F$Y=this._vb,F$_=this._shader2D,F$R=F$s.shaderValue;if(this._renderKey=0,F$e.bitmap){var F$H=F$e.bitmap;F$_.glTexture==F$H&&F$_.ALPHA===F$R.ALPHA||(F$_.glTexture=F$H,(F$s=this._curSubmit=F$se.createSubmit(this,this._ib,F$Y,F$Y._byteLength/32*3,F$Le.create(1,0))).shaderValue.glTexture=F$H,this._submits[this._submits._length++]=F$s),F$Pe.fillQuadrangleImgVb(F$Y,F$F,F$a,F$o,F$e.uv,F$E||this._curMat,this._x,this._y)}else F$s.shaderValue.fillStyle&&F$s.shaderValue.fillStyle.equal(F$e)&&F$_.ALPHA===F$R.ALPHA||(F$_.glTexture=null,(F$s=this._curSubmit=F$se.createSubmit(this,this._ib,F$Y,F$Y._byteLength/32*3,F$Le.create(2,0))).shaderValue.defines.add(2),F$s.shaderValue.fillStyle=F$u.create(F$e),this._submits[this._submits._length++]=F$s),F$Pe.fillQuadrangleImgVb(F$Y,F$F,F$a,F$o,F$z.DEF_UV,F$E||this._curMat,this._x,this._y);F$s._numEle+=6},F$F.drawTexture2=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){if(0!=F$s){var F$R=this._curMat;if(this._x=F$e*F$R.a+F$F*F$R.c,this._y=F$F*F$R.d+F$e*F$R.b,F$E&&(F$E=F$R.bTransform||F$E.bTransform?(F$B.mul(F$E,F$R,F$d._tmpMatrix),F$d._tmpMatrix):(this._x+=F$E.tx+F$R.tx,this._y+=F$E.ty+F$R.ty,F$B.EMPTY)),1!==F$s||F$Y){var F$H=this._shader2D.ALPHA,F$g=this._nBlendType;this._shader2D.ALPHA=F$s,F$Y&&(this._nBlendType=F$C.TOINT(F$Y)),this._drawTextureM(F$_[0],F$_[1]-F$a,F$_[2]-F$o,F$_[3],F$_[4],0,0,F$E,1),this._shader2D.ALPHA=F$H,this._nBlendType=F$g}else this._drawTextureM(F$_[0],F$_[1]-F$a,F$_[2]-F$o,F$_[3],F$_[4],0,0,F$E,1);this._x=this._y=0}},F$F.drawCanvas=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$e.context;if(this._renderKey=0,F$s._targets)this._submits[this._submits._length++]=F$re.create(F$s,0,null),this._curSubmit=F$se.RENDERBASE,F$s._targets.drawTo(this,F$F,F$a,F$o,F$E);else{var F$Y=this._submits[this._submits._length++]=F$re.create(F$s,this._shader2D.ALPHA,this._shader2D.filters),F$_=F$o/F$e.width,F$R=F$E/F$e.height,F$H=F$Y._matrix;this._curMat.copyTo(F$H),1!=F$_&&1!=F$R&&F$H.scale(F$_,F$R);var F$g=F$H.tx,F$n=F$H.ty;F$H.tx=F$H.ty=0,F$H.transformPoint(F$v.TEMP.setTo(F$F,F$a)),F$H.translate(F$v.TEMP.x+F$g,F$v.TEMP.y+F$n),this._curSubmit=F$se.RENDERBASE}F$b.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=F$s._targets?"yellow":"green",this.strokeRect(F$F-1,F$a-1,F$o+2,F$E+2,1),this.strokeRect(F$F,F$a,F$o,F$E,1),this.restore())},F$F.drawTarget=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){void 0===F$H&&(F$H=-1);var F$g=this._vb;if(F$Pe.fillRectImgVb(F$g,this._clipRect,F$F,F$a,F$o,F$E,F$R||F$z.DEF_UV,F$s||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var F$n=this._curSubmit=F$ne.create(this,this._ib,F$g,(F$g._byteLength-64)/32*3,F$_,F$Y);F$n.blendType=-1==F$H?this._nBlendType:F$H,F$n.scope=F$e,this._submits[this._submits._length++]=F$n,this._curSubmit._numEle+=6}},F$F.mixRGBandAlpha=function(F$e){return this._mixRGBandAlpha(F$e,this._shader2D.ALPHA)},F$F._mixRGBandAlpha=function(F$e,F$F){var F$a=(4278190080&F$e)>>>24;return 0!=F$a?F$a*=F$F:F$a=255*F$F,16777215&F$e|F$a<<24},F$F.drawTriangles=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){if(!F$e.loaded||!F$e.source)return this.sprite&&F$m.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;F$e.bitmap;var F$g=this._mixRGBandAlpha(4294967295,F$_),F$n=(F$o.length,F$s.length);this._renderKey=-1;var F$O=this._curSubmit=F$Ze.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,F$Le.create(1,0));return F$O.shaderValue.textureHost=F$e,F$O._renderType=10016,this._submits[this._submits._length++]=F$O,F$Y?(F$d._tmpMatrix.a=F$Y.a,F$d._tmpMatrix.b=F$Y.b,F$d._tmpMatrix.c=F$Y.c,F$d._tmpMatrix.d=F$Y.d,F$d._tmpMatrix.tx=F$Y.tx+F$F,F$d._tmpMatrix.ty=F$Y.ty+F$a,F$B.mul(F$d._tmpMatrix,this._curMat,F$d._tmpMatrix)):(F$d._tmpMatrix.a=this._curMat.a,F$d._tmpMatrix.b=this._curMat.b,F$d._tmpMatrix.c=this._curMat.c,F$d._tmpMatrix.d=this._curMat.d,F$d._tmpMatrix.tx=this._curMat.tx+F$F,F$d._tmpMatrix.ty=this._curMat.ty+F$a),this._triangleMesh.addData(F$o,F$E,F$s,F$d._tmpMatrix,F$g,this),this._curSubmit._numEle+=F$n,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},F$F.transform=function(F$e,F$F,F$a,F$o,F$E,F$s){F$i.save(this),F$B.mul(F$B.TEMP.setTo(F$e,F$F,F$a,F$o,F$E,F$s),this._curMat,this._curMat),this._curMat._checkTransform()},F$F.setTransformByMatrix=function(F$e){F$e.copyTo(this._curMat)},F$F.transformByMatrix=function(F$e){F$i.save(this),F$B.mul(F$e,this._curMat,this._curMat),this._curMat._checkTransform()},F$F.rotate=function(F$e){F$i.save(this),this._curMat.rotateEx(F$e)},F$F.scale=function(F$e,F$F){F$i.save(this),this._curMat.scaleEx(F$e,F$F)},F$F.clipRect=function(F$e,F$F,F$a,F$o){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var F$E=F$ge.create(4);this.addRenderObject(F$E);var F$s=this._vb,F$Y=F$s._byteLength>>2;if(F$Pe.fillRectImgVb(F$s,null,F$e,F$F,F$a,F$o,F$z.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var F$_=this._curSubmit=F$se.createSubmit(this,this._ib,F$s,(F$s._byteLength-64)/32*3,F$Le.create(2,0));F$_.shaderValue.ALPHA=1,this._submits[this._submits._length++]=F$_,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var F$R=F$ge.create(5);this.addRenderObject(F$R);var F$H=F$s.getFloat32Array(),F$g=Math.min(Math.min(Math.min(F$H[0+F$Y],F$H[4+F$Y]),F$H[8+F$Y]),F$H[12+F$Y]),F$n=Math.max(Math.max(Math.max(F$H[0+F$Y],F$H[4+F$Y]),F$H[8+F$Y]),F$H[12+F$Y]),F$O=Math.min(Math.min(Math.min(F$H[1+F$Y],F$H[5+F$Y]),F$H[9+F$Y]),F$H[13+F$Y]),F$q=Math.max(Math.max(Math.max(F$H[1+F$Y],F$H[5+F$Y]),F$H[9+F$Y]),F$H[13+F$Y]);F$W.save(this,F$R,F$e,F$F,F$a,F$o,F$g,F$O,F$n-F$g,F$q-F$O),this._curSubmit=F$se.RENDERBASE}else{F$a*=this._curMat.a,F$o*=this._curMat.d;var F$I=F$v.TEMP;this._curMat.transformPoint(F$I.setTo(F$e,F$F)),F$a<0&&(F$I.x=F$I.x+F$a,F$a=-F$a),F$o<0&&(F$I.y=F$I.y+F$o,F$o=-F$o),this._renderKey=0;var F$l=this._curSubmit=F$He.create(this);(this._submits[this._submits._length++]=F$l).submitIndex=this._submits._length,F$l.submitLength=9999999,F$X.save(this,F$l);var F$P=this._clipRect,F$j=F$P.x,F$$=F$P.y,F$y=F$I.x+F$a,F$M=F$I.y+F$o;F$j<F$I.x&&(F$P.x=F$I.x),F$$<F$I.y&&(F$P.y=F$I.y),F$P.width=Math.min(F$y,F$j+F$P.width)-F$P.x,F$P.height=Math.min(F$M,F$$+F$P.height)-F$P.y,this._shader2D.glTexture=null,F$l.clipRect.copyFrom(F$P),this._curSubmit=F$se.RENDERBASE}},F$F.setIBVB=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g){if(void 0===F$R&&(F$R=0),void 0===F$H&&(F$H=0),void 0===F$g&&(F$g=0),null===F$a){if(F$j.isFlash){var F$n=F$o;F$n._selfIB||(F$n._selfIB=F$ce.create(35044)),F$n._selfIB.clear(),F$a=F$n._selfIB}else F$a=this._ib;F$Pe.expandIBQuadrangle(F$a,F$o._byteLength/(4*F$o.vertexStride*4))}if(!F$_||!F$Y)throw Error("setIBVB must input:shader shaderValues");var F$O=F$Re.create(this,F$o,F$a,F$E,F$Y,F$_,F$R,F$H,F$g);F$s||(F$s=F$B.EMPTY),F$s.translate(F$e,F$F),F$B.mul(F$s,this._curMat,F$O._mat),F$s.translate(-F$e,-F$F),this._submits[this._submits._length++]=F$O,this._curSubmit=F$se.RENDERBASE,this._renderKey=0},F$F.addRenderObject=function(F$e){this._submits[this._submits._length++]=F$e},F$F.fillTrangles=function(F$e,F$F,F$a,F$o,F$E){var F$s=this._curSubmit,F$Y=this._vb,F$_=this._shader2D,F$R=F$s.shaderValue,F$H=F$o.length>>4,F$g=F$e.bitmap;this._renderKey=0,F$_.glTexture==F$g&&F$_.ALPHA===F$R.ALPHA||((F$s=this._curSubmit=F$se.createSubmit(this,this._ib,F$Y,F$Y._byteLength/32*3,F$Le.create(1,0))).shaderValue.textureHost=F$e,this._submits[this._submits._length++]=F$s),F$Pe.fillTranglesVB(F$Y,F$F,F$a,F$o,F$E||this._curMat,this._x,this._y),F$s._numEle+=6*F$H},F$F.submitElement=function(F$e,F$F){var F$a=this._submits;for(F$F<0&&(F$F=F$a._length);F$e<F$F;)F$e+=F$a[F$e].renderSubmit()},F$F.finish=function(){F$Me.mainContext.finish()},F$F.flush=function(){var F$e=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(F$e>this._ib.bufferLength/12&&F$Pe.expandIBQuadrangle(this._ib,F$e),!this._isMain&&F$w.enabled&&F$w._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=F$w._atlasRestore;for(var F$F=this._submits,F$a=0,F$o=F$F._length;F$a<F$o;F$a++){var F$E=F$F[F$a];10016===F$E.getRenderType()&&F$E.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),F$Fe.instance&&F$Fe.getInstance().reset();var F$s;for(F$a=0,F$s=this.meshlist.length;F$a<F$s;F$a++){var F$Y=this.meshlist[F$a];F$Y.canReuse?F$Y.releaseMesh():F$Y.destroy()}return this.meshlist.length=0,this._curSubmit=F$se.RENDERBASE,this._renderKey=0,this._triangleMesh=F$ze.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},F$F.setPathId=function(F$e){if(this.mId=F$e,-1!=this.mId){this.mHaveKey=!1;var F$F=F$p.getInstance();F$F.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,F$F.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},F$F.movePath=function(F$e,F$F){var F$a=F$e,F$o=F$F;F$e=this._curMat.a*F$a+this._curMat.c*F$o+this._curMat.tx,F$F=this._curMat.b*F$a+this._curMat.d*F$o+this._curMat.ty,this.mX+=F$e,this.mY+=F$F},F$F.beginPath=function(){var F$e=this._getPath();F$e.tempArray.length=0,F$e.closePath=!1,this.mX=0,this.mY=0},F$F.closePath=function(){this._path.closePath=!0},F$F.fill=function(F$e){void 0===F$e&&(F$e=!1);var F$F=this._getPath();this.drawPoly(0,0,F$F.tempArray,this.fillStyle._color.numColor,0,0,F$e)},F$F.stroke=function(){var F$e=this._getPath();if(0<this.lineWidth){if(-1==this.mId)F$e.drawLine(0,0,F$e.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var F$F=F$p.getInstance().shapeLineDic[this.mId];F$F.rebuild(F$e.tempArray),F$e.setGeomtry(F$F)}else F$p.getInstance().addLine(this.mId,F$e.drawLine(0,0,F$e.tempArray,this.lineWidth,this.strokeStyle._color.numColor));F$e.update();var F$a=[this.mX,this.mY],F$o=F$se.createShape(this,F$e.ib,F$e.vb,F$e.count,F$e.offset,F$Le.create(4,0));F$o.shaderValue.ALPHA=this._shader2D.ALPHA,F$o.shaderValue.u_pos=F$a,F$o.shaderValue.u_mmat2=F$$e.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=F$o,this._renderKey=-1}},F$F.line=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=this._curSubmit,F$_=this._vb;if(F$Pe.fillLineVb(F$_,this._clipRect,F$e,F$F,F$a,F$o,F$E,F$s)){this._renderKey=0;var F$R=this._shader2D,F$H=F$Y.shaderValue;F$R.strokeStyle===F$H.strokeStyle&&F$R.ALPHA===F$H.ALPHA||(F$R.glTexture=null,(F$Y=this._curSubmit=F$se.createSubmit(this,this._ib,F$_,(F$_._byteLength-64)/32*3,F$Le.create(2,0))).shaderValue.strokeStyle=F$R.strokeStyle,F$Y.shaderValue.mainID=2,F$Y.shaderValue.ALPHA=F$R.ALPHA,this._submits[this._submits._length++]=F$Y),F$Y._numEle+=6}},F$F.moveTo=function(F$e,F$F,F$a){void 0===F$a&&(F$a=!0);var F$o=this._getPath();if(F$a){var F$E=F$e,F$s=F$F;F$e=this._curMat.a*F$E+this._curMat.c*F$s,F$F=this._curMat.b*F$E+this._curMat.d*F$s}F$o.addPoint(F$e,F$F)},F$F.lineTo=function(F$e,F$F,F$a){void 0===F$a&&(F$a=!0);var F$o=this._getPath();if(F$a){var F$E=F$e,F$s=F$F;F$e=this._curMat.a*F$E+this._curMat.c*F$s,F$F=this._curMat.b*F$E+this._curMat.d*F$s}F$o.addPoint(F$e,F$F)},F$F.drawCurves=function(F$e,F$F,F$a){this.setPathId(-1),this.beginPath(),this.strokeStyle=F$a[3],this.lineWidth=F$a[4];var F$o=F$a[2];F$e+=F$a[0],F$F+=F$a[1],this.movePath(F$e,F$F),this.moveTo(F$o[0],F$o[1]);for(var F$E=2,F$s=F$o.length;F$E<F$s;)this.quadraticCurveTo(F$o[F$E++],F$o[F$E++],F$o[F$E++],F$o[F$E++]);this.stroke()},F$F.arcTo=function(F$e,F$F,F$a,F$o,F$E){if(-1==this.mId||!this.mHaveKey){var F$s=0,F$Y=0,F$_=0,F$R=this._getPath();this._curMat.copyTo(F$d._tmpMatrix),F$d._tmpMatrix.tx=F$d._tmpMatrix.ty=0,F$d._tempPoint.setTo(F$R.getEndPointX(),F$R.getEndPointY()),F$d._tmpMatrix.invertTransformPoint(F$d._tempPoint);var F$H=F$d._tempPoint.x-F$e,F$g=F$d._tempPoint.y-F$F,F$n=Math.sqrt(F$H*F$H+F$g*F$g);if(!(F$n<=1e-6)){var F$O=F$H/F$n,F$q=F$g/F$n,F$I=F$a-F$e,F$l=F$o-F$F,F$P=F$I*F$I+F$l*F$l,F$j=Math.sqrt(F$P);if(!(F$j<=1e-6)){var F$$=F$I/F$j,F$y=F$l/F$j,F$M=F$O+F$$,F$D=F$q+F$y,F$m=Math.sqrt(F$M*F$M+F$D*F$D);if(!(F$m<=1e-6)){var F$b=F$M/F$m,F$L=F$D/F$m,F$B=Math.acos(F$b*F$O+F$L*F$q),F$v=Math.PI/2-F$B,F$K=(F$n=F$E/Math.tan(F$v))*F$O+F$e,F$V=F$n*F$q+F$F,F$G=Math.sqrt(F$n*F$n+F$E*F$E),F$A=F$e+F$b*F$G,F$U=F$F+F$L*F$G,F$r=0,F$Z=0;if(0<=F$O*F$y-F$q*F$$){var F$z=2*F$v/F$d.SEGNUM;F$r=Math.sin(F$z),F$Z=Math.cos(F$z)}else F$z=2*-F$v/F$d.SEGNUM,F$r=Math.sin(F$z),F$Z=Math.cos(F$z);F$Y=this._curMat.a*F$K+this._curMat.c*F$V,F$_=this._curMat.b*F$K+this._curMat.d*F$V,F$Y==this._path.getEndPointX()&&F$_==this._path.getEndPointY()||F$R.addPoint(F$Y,F$_);var F$T=F$K-F$A,F$p=F$V-F$U;for(F$s=0;F$s<F$d.SEGNUM;F$s++){var F$J=F$T*F$Z+F$p*F$r,F$k=-F$T*F$r+F$p*F$Z;F$Y=F$J+F$A,F$_=F$k+F$U,F$e=this._curMat.a*F$Y+this._curMat.c*F$_,F$_=F$F=this._curMat.b*F$Y+this._curMat.d*F$_,(F$Y=F$e)==this._path.getEndPointX()&&F$_==this._path.getEndPointY()||F$R.addPoint(F$Y,F$_),F$T=F$J,F$p=F$k}}}}}},F$F.arc=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!0),-1!=this.mId){var F$_=F$p.getInstance().shapeDic[this.mId];if(F$_&&this.mHaveKey&&!F$_.needUpdate(this._curMat))return;F$F=F$e=0}var F$R,F$H=0,F$g=0,F$n=0,F$O=0,F$q=0,F$I=0,F$l=0;if(F$g=F$E-F$o,F$s)if(Math.abs(F$g)>=2*Math.PI)F$g=2*-Math.PI;else for(;0<F$g;)F$g-=2*Math.PI;else if(Math.abs(F$g)>=2*Math.PI)F$g=2*Math.PI;else for(;F$g<0;)F$g+=2*Math.PI;F$R=F$g/(F$l=F$a<101?Math.max(10,F$g*F$a/5):F$a<201?Math.max(10,F$g*F$a/20):Math.max(10,F$g*F$a/40))/2,F$n=Math.abs(4/3*(1-Math.cos(F$R))/Math.sin(F$R)),F$s&&(F$n=-F$n);var F$P=this._getPath(),F$j=NaN,F$$=NaN;for(F$I=0;F$I<=F$l;F$I++)F$H=F$o+F$g*(F$I/F$l),F$O=F$e+Math.cos(F$H)*F$a,F$q=F$F+Math.sin(F$H)*F$a,F$Y&&(F$j=F$O,F$$=F$q,F$O=this._curMat.a*F$j+this._curMat.c*F$$,F$q=this._curMat.b*F$j+this._curMat.d*F$$),F$O==this._path.getEndPointX()&&F$q==this._path.getEndPointY()||F$P.addPoint(F$O,F$q);F$O=F$e+Math.cos(F$E)*F$a,F$q=F$F+Math.sin(F$E)*F$a,F$Y&&(F$j=F$O,F$$=F$q,F$O=this._curMat.a*F$j+this._curMat.c*F$$,F$q=this._curMat.b*F$j+this._curMat.d*F$$),F$O==this._path.getEndPointX()&&F$q==this._path.getEndPointY()||F$P.addPoint(F$O,F$q)},F$F.quadraticCurveTo=function(F$e,F$F,F$a,F$o){var F$E=F$n.I,F$s=F$a,F$Y=F$o;F$a=this._curMat.a*F$s+this._curMat.c*F$Y,F$o=this._curMat.b*F$s+this._curMat.d*F$Y,F$s=F$e,F$Y=F$F,F$e=this._curMat.a*F$s+this._curMat.c*F$Y,F$F=this._curMat.b*F$s+this._curMat.d*F$Y;for(var F$_=F$E.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),F$e,F$F,F$a,F$o],30,2),F$R=0,F$H=F$_.length/2;F$R<F$H;F$R++)this.lineTo(F$_[2*F$R],F$_[2*F$R+1],!1);this.lineTo(F$a,F$o,!1)},F$F.rect=function(F$e,F$F,F$a,F$o){this._other=this._other.make(),this._other.path||(this._other.path=new F$x),this._other.path.rect(F$e,F$F,F$a,F$o)},F$F.strokeRect=function(F$e,F$F,F$a,F$o,F$E){var F$s=.5*F$E;this.line(F$e-F$s,F$F,F$e+F$a+F$s,F$F,F$E,this._curMat),this.line(F$e+F$a,F$F,F$e+F$a,F$F+F$o,F$E,this._curMat),this.line(F$e,F$F,F$e,F$F+F$o,F$E,this._curMat),this.line(F$e-F$s,F$F+F$o,F$e+F$a+F$s,F$F+F$o,F$E,this._curMat)},F$F.clip=function(){},F$F.drawPoly=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){void 0===F$Y&&(F$Y=!1),this._renderKey=0,this._shader2D.glTexture=null;var F$_=this._getPath();if(-1==this.mId)F$_.polygon(F$e,F$F,F$a,F$o,F$E||1,F$s);else if(this.mHaveKey){var F$R=F$p.getInstance().shapeDic[this.mId];F$R.setMatrix(this._curMat),F$R.rebuild(F$_.tempArray),F$_.setGeomtry(F$R)}else{var F$H=F$_.polygon(F$e,F$F,F$a,F$o,F$E||1,F$s);F$p.getInstance().addShape(this.mId,F$H),F$H.setMatrix(this._curMat)}F$_.update();var F$g,F$n=[this.mX,this.mY];if((F$g=F$se.createShape(this,F$_.ib,F$_.vb,F$_.count,F$_.offset,F$Le.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$g.shaderValue.u_pos=F$n,F$g.shaderValue.u_mmat2=F$$e.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$g,0<F$E){if(this.mHaveLineKey){var F$O=F$p.getInstance().shapeLineDic[this.mId];F$O.rebuild(F$_.tempArray),F$_.setGeomtry(F$O)}else F$p.getInstance().addShape(this.mId,F$_.drawLine(F$e,F$F,F$a,F$E,F$s));F$_.update(),(F$g=F$se.createShape(this,F$_.ib,F$_.vb,F$_.count,F$_.offset,F$Le.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$g.shaderValue.u_mmat2=F$$e.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$g}},F$F.drawParticle=function(F$e,F$F,F$a){F$a.x=F$e,F$a.y=F$F,this._submits[this._submits._length++]=F$a},F$F._getPath=function(){return this._path||(this._path=new F$x)},F$o(0,F$F,"globalCompositeOperation",function(){return F$C.NAMES[this._nBlendType]},function(F$e){var F$F=F$C.TOINT[F$e];null==F$F||this._nBlendType===F$F||(F$N.save(this,65536,this,!0),this._curSubmit=F$se.RENDERBASE,this._renderKey=0,this._nBlendType=F$F)}),F$o(0,F$F,"strokeStyle",function(){return this._shader2D.strokeStyle},function(F$e){this._shader2D.strokeStyle.equal(F$e)||(F$N.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=F$u.create(F$e))}),F$o(0,F$F,"globalAlpha",function(){return this._shader2D.ALPHA},function(F$e){(F$e=Math.floor(1e3*F$e)/1e3)!=this._shader2D.ALPHA&&(F$N.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=F$e)}),F$o(0,F$F,"asBitmap",null,function(F$e){if(F$e){if(this._targets||(this._targets=new F$t),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),F$o(0,F$F,"fillStyle",function(){return this._shader2D.fillStyle},function(F$e){this._shader2D.fillStyle.equal(F$e)||(F$N.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=F$u.create(F$e))}),F$o(0,F$F,"textAlign",function(){return this._other.textAlign},function(F$e){this._other.textAlign===F$e||(this._other=this._other.make(),F$N.save(this,32768,this._other,!1),this._other.textAlign=F$e)}),F$o(0,F$F,"lineWidth",function(){return this._other.lineWidth},function(F$e){this._other.lineWidth===F$e||(this._other=this._other.make(),F$N.save(this,256,this._other,!1),this._other.lineWidth=F$e)}),F$o(0,F$F,"textBaseline",function(){return this._other.textBaseline},function(F$e){this._other.textBaseline===F$e||(this._other=this._other.make(),F$N.save(this,16384,this._other,!1),this._other.textBaseline=F$e)}),F$o(0,F$F,"font",null,function(F$e){F$e!=this._other.font.toString()&&(this._other=this._other.make(),F$N.save(this,8,this._other,!1),this._other.font===F$Ie.EMPTY?this._other.font=new F$Ie(F$e):this._other.font.setFont(F$e))}),F$d.__init__=function(){F$a.DEFAULT=new F$a},F$d._tempPoint=new F$v,F$d._SUBMITVBSIZE=32e3,F$d._MAXSIZE=99999999,F$d._RECTVBSIZE=16,F$d.MAXCLIPRECT=new F$K(0,0,99999999,99999999),F$d._COUNT=0,F$d._tmpMatrix=new F$B,F$d.SEGNUM=32,F$d._contextcount=0,F$Y(F$d,["_fontTemp",function(){return this._fontTemp=new F$Ie},"_drawStyleTemp",function(){return this._drawStyleTemp=new F$u(null)}]),F$d.__init$=function(){F$a=function(){function F$e(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=F$Ie.EMPTY}F$O(F$e,"");var F$F=F$e.prototype;return F$F.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=F$Ie.EMPTY},F$F.make=function(){return this===F$e.DEFAULT?new F$e:this},F$e.DEFAULT=null,F$e}()},F$d}(),F$Le=function(F$e){function F$o(F$e,F$F){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,F$o.__super.call(this),this.defines=new F$Ve,this.position=F$o._POSITION,this.mainID=F$e,this.subID=F$F,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=F$e|F$F,this._inClassCache=F$o._cache[this._cacheID],0<F$e&&!this._inClassCache&&(this._inClassCache=F$o._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}F$O(F$o,"laya.webgl.shader.d2.value.Value2D",F$k);var F$F=F$o.prototype;return F$F.setValue=function(F$e){},F$F.refresh=function(){var F$e=this.size;return F$e[0]=F$$e.width,F$e[1]=F$$e.height,this.alpha=this.ALPHA*F$$e.worldAlpha,this.mmat=F$$e.worldMatrix4,this},F$F._ShaderWithCompile=function(){return F$fe.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,F$te.create)},F$F._withWorldShaderDefines=function(){var F$e=F$$e.worldShaderDefines,F$F=F$fe.sharders[this.mainID|this.defines._value|F$e.getValue()];if(!F$F){var F$a,F$o={};for(F$a in this.defines.toNameDic())F$o[F$a]="";for(F$a in F$e.toNameDic())F$o[F$a]="";F$F=F$fe.withCompile2D(0,this.mainID,F$o,this.mainID|this.defines._value|F$e.getValue(),F$te.create)}var F$E=F$$e.worldFilters;if(!F$E)return F$F;for(var F$s,F$Y=F$E.length,F$_=0;F$_<F$Y;F$_++)(F$s=F$E[F$_])&&F$s.action.setValue(this);return F$F},F$F.upload=function(){var F$e=F$$e;this.alpha=this.ALPHA*F$e.worldAlpha,F$$e.worldMatrix4!==F$$e.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),F$Me.shaderHighPrecision&&this.defines.add(1024);var F$F,F$a=F$e.worldShaderDefines?this._withWorldShaderDefines():F$fe.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=F$e.width,this.size[1]=F$e.height,this.mmat=F$e.worldMatrix4,F$Te.activeShader!==F$a?F$a._shaderValueWidth!==F$e.width||F$a._shaderValueHeight!==F$e.height?(F$a._shaderValueWidth=F$e.width,F$a._shaderValueHeight=F$e.height):F$F=F$a._params2dQuick2||F$a._make2dQuick2():F$a._shaderValueWidth!==F$e.width||F$a._shaderValueHeight!==F$e.height?(F$a._shaderValueWidth=F$e.width,F$a._shaderValueHeight=F$e.height):F$F=F$a._params2dQuick1||F$a._make2dQuick1(),F$a.upload(this,F$F)},F$F.setFilters=function(F$e){if(this.filters=F$e)for(var F$F,F$a=F$e.length,F$o=0;F$o<F$a;F$o++)(F$F=F$e[F$o])&&(this.defines.add(F$F.type),F$F.action.setValue(this))},F$F.clear=function(){this.defines.setValue(this.subID)},F$F.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},F$o._initone=function(F$e,F$F){F$o._typeClass[F$e]=F$F,F$o._cache[F$e]=[],F$o._cache[F$e]._length=0},F$o.__init__=function(){F$o._POSITION=[2,5126,!1,4*F$le.BYTES_PE,0],F$o._TEXCOORD=[2,5126,!1,4*F$le.BYTES_PE,2*F$le.BYTES_PE],F$o._initone(2,F$de),F$o._initone(4,F$Ce),F$o._initone(256,F$we),F$o._initone(512,F$ke),F$o._initone(1,F$Se),F$o._initone(65,F$Qe),F$o._initone(9,F$Se)},F$o.create=function(F$e,F$F){var F$a=F$o._cache[F$e|F$F];return F$a._length?F$a[--F$a._length]:new F$o._typeClass[F$e|F$F](F$F)},F$o._POSITION=null,F$o._TEXCOORD=null,F$o._cache=[],F$o._typeClass=[],F$o.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$o}(),F$Be=function(F$e){function F$P(F$e,F$F){F$P.__super.call(this,F$e,F$F)}F$O(F$P,"laya.webgl.utils.RenderSprite3D",F$$);var F$F=F$P.prototype;return F$F.onCreate=function(F$e){switch(F$e){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},F$F._mask=function(F$e,F$F,F$a,F$o){var F$E,F$s,F$Y=this._next,F$_=F$e.mask;if(F$_){F$F.ctx.save();var F$R=F$F.ctx.globalCompositeOperation,F$H=new F$K;if(F$H.copyFrom(F$_.getBounds()),F$H.width=Math.round(F$H.width),F$H.height=Math.round(F$H.height),F$H.x=Math.round(F$H.x),F$H.y=Math.round(F$H.y),0<F$H.width&&0<F$H.height){var F$g=F$e._style._tf,F$n=F$_e.create();F$n.addValue("bounds",F$H),F$E=F$Ye.create([F$n,F$F],laya.webgl.utils.RenderSprite3D.tmpTarget),F$F.addRenderObject(F$E),F$_.render(F$F,-F$H.x,-F$H.y),F$E=F$Ye.create([F$n],laya.webgl.utils.RenderSprite3D.endTmpTarget),F$F.addRenderObject(F$E),F$F.ctx.save(),F$F.clipRect(F$a-F$g.translateX+F$H.x,F$o-F$g.translateY+F$H.y,F$H.width,F$H.height),F$Y._fun.call(F$Y,F$e,F$F,F$a,F$o),F$F.ctx.restore(),F$s=F$ge.create(6),F$R=F$F.ctx.globalCompositeOperation,F$s.blendMode="mask",F$F.addRenderObject(F$s),F$B.TEMP.identity();var F$O=F$Le.create(1,0),F$q=F$z.INV_UV,F$I=F$H.width,F$l=F$H.height;(F$H.width<32||F$H.height<32)&&((F$q=F$P.tempUV)[0]=0,F$q[1]=0,F$q[2]=32<=F$H.width?1:F$H.width/32,F$q[3]=0,F$q[4]=32<=F$H.width?1:F$H.width/32,F$q[5]=32<=F$H.height?1:F$H.height/32,F$q[6]=0,F$q[7]=32<=F$H.height?1:F$H.height/32,F$H.width=32<=F$H.width?F$H.width:32,F$H.height=32<=F$H.height?F$H.height:32,F$q[1]*=-1,F$q[3]*=-1,F$q[5]*=-1,F$q[7]*=-1,F$q[1]+=1,F$q[3]+=1,F$q[5]+=1,F$q[7]+=1),F$F.ctx.drawTarget(F$n,F$a+F$H.x-F$g.translateX,F$o+F$H.y-F$g.translateY,F$I,F$l,F$B.TEMP,"tmpTarget",F$O,F$q,6),F$E=F$Ye.create([F$n],laya.webgl.utils.RenderSprite3D.recycleTarget),F$F.addRenderObject(F$E),(F$s=F$ge.create(6)).blendMode=F$R,F$F.addRenderObject(F$s)}F$F.ctx.restore()}else F$Y._fun.call(F$Y,F$e,F$F,F$a,F$o)},F$F._blend=function(F$e,F$F,F$a,F$o){var F$E=F$e._style,F$s=this._next;F$E.blendMode?(F$F.ctx.save(),F$F.ctx.globalCompositeOperation=F$E.blendMode,F$s._fun.call(F$s,F$e,F$F,F$a,F$o),F$F.ctx.restore()):F$s._fun.call(F$s,F$e,F$F,F$a,F$o)},F$F._transform=function(F$e,F$F,F$a,F$o){var F$E=F$e.transform,F$s=this._next;if(F$E&&F$s!=F$$.NORENDER){var F$Y=F$F.ctx;F$e._style;F$E.tx=F$a,F$E.ty=F$o;var F$_=F$Y._getTransformMatrix(),F$R=F$_.clone();F$B.mul(F$E,F$_,F$_),F$_._checkTransform(),F$E.tx=F$E.ty=0,F$s._fun.call(F$s,F$e,F$F,0,0),F$R.copyTo(F$_),F$R.destroy()}else F$s._fun.call(F$s,F$e,F$F,F$a,F$o)},F$P.tmpTarget=function(F$e,F$F){var F$a=F$e.getValue("bounds"),F$o=F$pe.create(F$a.width,F$a.height);F$o.start(),F$o.clear(0,0,0,0),F$e.addValue("tmpTarget",F$o)},F$P.endTmpTarget=function(F$e){F$e.getValue("tmpTarget").end()},F$P.recycleTarget=function(F$e){F$e.getValue("tmpTarget").recycle(),F$e.recycle()},F$Y(F$P,["tempUV",function(){return this.tempUV=new Array(8)}]),F$P}(),F$ve=function(F$e){function F$F(){this.data=null,F$F.__super.call(this)}F$O(F$F,"laya.filters.webgl.ColorFilterActionGL",F$J);var F$a=F$F.prototype;return F$m.imps(F$a,{"laya.filters.IFilterActionGL":!0}),F$a.setValue=function(F$e){F$e.colorMat=this.data._mat,F$e.colorAlpha=this.data._alpha},F$a.apply3d=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$e.getValue("bounds"),F$Y=F$Le.create(1,0);F$Y.setFilters([this.data]);var F$_=F$B.TEMP;F$_.identity(),F$a.ctx.drawTarget(F$e,0,0,F$s.width,F$s.height,F$_,"src",F$Y)},F$F}(),F$Ke=function(F$e){function F$s(F$e,F$F,F$a,F$o,F$E){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,F$s.__super.call(this,F$e,F$F,F$E),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new F$ue,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=F$a,this._atlasCanvas.height=F$o,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}F$O(F$s,"laya.webgl.atlas.Atlaser",F$d);var F$F=F$s.prototype;return F$F.computeUVinAtlasTexture=function(F$e,F$F,F$a,F$o){var F$E=F$w.atlasTextureWidth,F$s=F$w.atlasTextureHeight,F$Y=F$a/F$E,F$_=F$o/F$s,F$R=(F$a+F$e.bitmap.width)/F$E,F$H=(F$o+F$e.bitmap.height)/F$s,F$g=F$e.bitmap.width/F$E,F$n=F$e.bitmap.height/F$s;F$e.uv=[F$Y+F$F[0]*F$g,F$_+F$F[1]*F$n,F$R-(1-F$F[2])*F$g,F$_+F$F[3]*F$n,F$R-(1-F$F[4])*F$g,F$H-(1-F$F[5])*F$n,F$Y+F$F[6]*F$g,F$H-(1-F$F[7])*F$n]},F$F.findBitmapIsExist=function(F$e){if(F$e instanceof laya.webgl.resource.WebGLImage){var F$F=F$e,F$a=F$F.url,F$o=this._InAtlasWebGLImagesKey[F$a||F$F.id];if(F$o)return F$o.offsetInfoID}return-1},F$F.addToAtlasTexture=function(F$e,F$F,F$a){if(F$e instanceof laya.webgl.resource.WebGLImage){var F$o=F$e,F$E=F$o.url;this._InAtlasWebGLImagesKey[F$E||F$o.id]={bitmap:F$e,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([F$F,F$a])}this._atlasCanvas.texSubImage2D(F$F,F$a,F$e.atlasSource),F$e.clearAtlasSource()},F$F.addToAtlas=function(F$e,F$F,F$a){F$e._atlasID=this._inAtlasTextureKey.length;var F$o=F$e.uv.slice(),F$E=F$e.bitmap;this._inAtlasTextureKey.push(F$e),this._inAtlasTextureOriUVValue.push(F$o),this._inAtlasTextureBitmapValue.push(F$E),this.computeUVinAtlasTexture(F$e,F$o,F$F,F$a),F$e.bitmap=this._atlasCanvas},F$F.clear=function(){for(var F$e=0,F$F=this._inAtlasTextureKey.length;F$e<F$F;F$e++)this._inAtlasTextureKey[F$e].bitmap=this._inAtlasTextureBitmapValue[F$e],this._inAtlasTextureKey[F$e].uv=this._inAtlasTextureOriUVValue[F$e],this._inAtlasTextureKey[F$e]._atlasID=-1,this._inAtlasTextureKey[F$e].bitmap.lock=!1,this._inAtlasTextureKey[F$e].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},F$F.dispose=function(){this.clear(),this._atlasCanvas.destroy()},F$o(0,F$F,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),F$o(0,F$F,"texture",function(){return this._atlasCanvas}),F$o(0,F$F,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),F$s}(),F$Ve=function(F$e){function F$a(){F$a.__super.call(this,F$a.__name2int,F$a.__int2name,F$a.__int2nameMap)}return F$O(F$a,"laya.webgl.shader.d2.ShaderDefines2D",F$h),F$a.__init__=function(){F$a.reg("TEXTURE2D",1),F$a.reg("COLOR2D",2),F$a.reg("PRIMITIVE",4),F$a.reg("GLOW_FILTER",8),F$a.reg("BLUR_FILTER",16),F$a.reg("COLOR_FILTER",32),F$a.reg("COLOR_ADD",64),F$a.reg("WORLDMAT",128),F$a.reg("FILLTEXTURE",256),F$a.reg("FSHIGHPRECISION",1024),F$a.reg("TXTALPHA",2048),F$a.reg("TXTCOMPRESS",4096)},F$a.reg=function(F$e,F$F){F$h._reg(F$e,F$F,F$a.__name2int,F$a.__int2name)},F$a.toText=function(F$e,F$F,F$a){return F$h._toText(F$e,F$F,F$a)},F$a.toInt=function(F$e){return F$h._toInt(F$e,F$a.__name2int)},F$a.TEXTURE2D=1,F$a.COLOR2D=2,F$a.PRIMITIVE=4,F$a.FILTERGLOW=8,F$a.FILTERBLUR=16,F$a.FILTERCOLOR=32,F$a.COLORADD=64,F$a.WORLDMAT=128,F$a.FILLTEXTURE=256,F$a.SKINMESH=512,F$a.SHADERDEFINE_FSHIGHPRECISION=1024,F$a.TXTALPHA=2048,F$a.TXTCOMPRESS=4096,F$a.__name2int={},F$a.__int2name=[],F$a.__int2nameMap=[],F$a}(),F$Ge=(function(F$e){function F$_(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$_.__super.call(this,F$e,F$F,F$a,F$o,40,F$E,F$s,F$Y)}F$O(F$_,"laya.webgl.shapes.Ellipse",F$ae)}(),function(F$e){function F$s(F$e,F$F,F$a,F$o,F$E){this._points=[],this.rebuild(F$a),F$s.__super.call(this,F$e,F$F,0,0,0,F$E,F$o,F$E,0)}F$O(F$s,"laya.webgl.shapes.Line",F$ae);var F$F=F$s.prototype;return F$F.rebuild=function(F$e){var F$F=F$e.length;F$F!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(F$F/2-1)),this.mFloat32Array=new Float32Array(5*F$F)),this._points.length=0;for(var F$a=NaN,F$o=NaN,F$E=-1,F$s=-1,F$Y=F$e.length/2,F$_=0;F$_<F$Y;F$_++)F$a=F$e[2*F$_],F$o=F$e[2*F$_+1],(.01<Math.abs(F$E-F$a)||.01<Math.abs(F$s-F$o))&&this._points.push(F$a,F$o),F$E=F$a,F$s=F$o},F$F.getData=function(F$e,F$F,F$a){var F$o=[],F$E=[];0<this.borderWidth&&this.createLine2(this._points,F$o,this.borderWidth,F$a,F$E,this._points.length/2),this.mUint16Array.set(F$o,0),this.mFloat32Array.set(F$E,0),F$e.append(this.mUint16Array),F$F.append(this.mFloat32Array)},F$s}()),F$Ae=function(F$e){function F$n(F$e,F$F,F$a,F$o,F$E){this._points=[];for(var F$s=NaN,F$Y=NaN,F$_=-1,F$R=-1,F$H=F$a.length/2-1,F$g=0;F$g<F$H;F$g++)F$s=F$a[2*F$g],F$Y=F$a[2*F$g+1],(.01<Math.abs(F$_-F$s)||.01<Math.abs(F$R-F$Y))&&this._points.push(F$s,F$Y),F$_=F$s,F$R=F$Y;F$s=F$a[2*F$H],F$Y=F$a[2*F$H+1],F$_=this._points[0],F$R=this._points[1],(.01<Math.abs(F$_-F$s)||.01<Math.abs(F$R-F$Y))&&this._points.push(F$s,F$Y),F$n.__super.call(this,F$e,F$F,0,0,this._points.length/2,0,F$o,F$E)}F$O(F$n,"laya.webgl.shapes.LoopLine",F$ae);var F$F=F$n.prototype;return F$F.getData=function(F$e,F$F,F$a){if(0<this.borderWidth){for(var F$o=this.color,F$E=(F$o>>16&255)/255,F$s=(F$o>>8&255)/255,F$Y=(255&F$o)/255,F$_=[],F$R=0,F$H=0,F$g=[],F$n=Math.floor(this._points.length/2),F$O=0;F$O<F$n;F$O++)F$R=this._points[2*F$O],F$H=this._points[2*F$O+1],F$_.push(this.x+F$R,this.y+F$H,F$E,F$s,F$Y);this.createLoopLine(F$_,F$g,this.borderWidth,F$a+F$_.length/5),F$e.append(new Uint16Array(F$g)),F$F.append(new Float32Array(F$_))}},F$F.createLoopLine=function(F$e,F$F,F$a,F$o,F$E,F$s){F$e.length;var F$Y=F$e.concat(),F$_=F$E||F$e,F$R=this.borderColor,F$H=(F$R>>16&255)/255,F$g=(F$R>>8&255)/255,F$n=(255&F$R)/255,F$O=[F$Y[0],F$Y[1]],F$q=[F$Y[F$Y.length-5],F$Y[F$Y.length-4]],F$I=F$q[0]+.5*(F$O[0]-F$q[0]),F$l=F$q[1]+.5*(F$O[1]-F$q[1]);F$Y.unshift(F$I,F$l,0,0,0),F$Y.push(F$I,F$l,0,0,0);var F$P,F$j,F$$,F$y,F$M,F$D,F$m,F$b,F$L,F$B,F$v,F$K,F$V,F$G,F$A,F$U,F$r,F$Z,F$z,F$T,F$p=F$Y.length/5,F$J=F$o,F$k=F$a/2;F$$=F$Y[0],F$y=F$Y[1],F$B=F$$-(F$M=F$Y[5]),F$L=(F$L=-(F$y-(F$D=F$Y[6])))/(F$T=Math.sqrt(F$L*F$L+F$B*F$B))*F$k,F$B=F$B/F$T*F$k,F$_.push(F$$-F$L,F$y-F$B,F$H,F$g,F$n,F$$+F$L,F$y+F$B,F$H,F$g,F$n);for(var F$d=1;F$d<F$p-1;F$d++)F$$=F$Y[5*(F$d-1)],F$y=F$Y[5*(F$d-1)+1],F$M=F$Y[5*F$d],F$D=F$Y[5*F$d+1],F$m=F$Y[5*(F$d+1)],F$b=F$Y[5*(F$d+1)+1],F$B=F$$-F$M,F$K=F$M-F$m,F$A=(-(F$L=(F$L=-(F$y-F$D))/(F$T=Math.sqrt(F$L*F$L+F$B*F$B))*F$k)+F$$)*(-(F$B=F$B/F$T*F$k)+F$D)-(-F$L+F$M)*(-F$B+F$y),F$Z=(-(F$v=(F$v=-(F$D-F$b))/(F$T=Math.sqrt(F$v*F$v+F$K*F$K))*F$k)+F$m)*(-(F$K=F$K/F$T*F$k)+F$D)-(-F$v+F$M)*(-F$K+F$b),F$z=(F$V=-F$B+F$y-(-F$B+F$D))*(F$r=-F$v+F$M-(-F$v+F$m))-(F$U=-F$K+F$b-(-F$K+F$D))*(F$G=-F$L+F$M-(-F$L+F$$)),Math.abs(F$z)<.1?(F$z+=10.1,F$_.push(F$M-F$L,F$D-F$B,F$H,F$g,F$n,F$M+F$L,F$D+F$B,F$H,F$g,F$n)):(((F$P=(F$G*F$Z-F$r*F$A)/F$z)-F$M)*(F$P-F$M)+((F$j=(F$U*F$A-F$V*F$Z)/F$z)-F$D)+(F$j-F$D),F$_.push(F$P,F$j,F$H,F$g,F$n,F$M-(F$P-F$M),F$D-(F$j-F$D),F$H,F$g,F$n));F$s&&(F$F=F$s);var F$w=this.edges+1;for(F$d=1;F$d<F$w;F$d++)F$F.push(F$J+2*(F$d-1),F$J+2*(F$d-1)+1,F$J+2*F$d+1,F$J+2*F$d+1,F$J+2*F$d,F$J+2*(F$d-1));return F$F.push(F$J+2*(F$d-1),F$J+2*(F$d-1)+1,F$J+1,F$J+1,F$J,F$J+2*(F$d-1)),F$_},F$n}(),F$Ue=function(F$e){function F$Y(F$e,F$F,F$a,F$o,F$E,F$s){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=F$B.create(),this._points=F$a.slice(0,F$a.length),F$Y.__super.call(this,F$e,F$F,0,0,this._points.length/2,F$o,F$E,F$s)}F$O(F$Y,"laya.webgl.shapes.Polygon",F$ae);var F$F=F$Y.prototype;return F$F.rebuild=function(F$e){this._repaint||(this._points.length=0,this._points=this._points.concat(F$e))},F$F.setMatrix=function(F$e){F$e.copyTo(this._mat)},F$F.needUpdate=function(F$e){return this._repaint=this._mat.a==F$e.a&&this._mat.b==F$e.b&&this._mat.c==F$e.c&&this._mat.d==F$e.d&&this._mat.tx==F$e.tx&&this._mat.ty==F$e.ty,!this._repaint},F$F.getData=function(F$e,F$F,F$a){var F$o,F$E=0,F$s=this._points,F$Y=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=F$a){for(this._start=F$a,F$o=[],F$Y=this.earcutTriangles.length,F$E=0;F$E<F$Y;F$E++)F$o.push(this.earcutTriangles[F$E]+F$a);this.mUint16Array=new Uint16Array(F$o)}}else{this._start=F$a,F$o=[];var F$_=[],F$R=[],F$H=this.color,F$g=(F$H>>16&255)/255,F$n=(F$H>>8&255)/255,F$O=(255&F$H)/255;for(F$Y=Math.floor(F$s.length/2),F$E=0;F$E<F$Y;F$E++)F$_.push(this.x+F$s[2*F$E],this.y+F$s[2*F$E+1],F$g,F$n,F$O),F$R.push(this.x+F$s[2*F$E],this.y+F$s[2*F$E+1]);for(this.earcutTriangles=F$oe.earcut(F$R,null,2),F$Y=this.earcutTriangles.length,F$E=0;F$E<F$Y;F$E++)F$o.push(this.earcutTriangles[F$E]+F$a);this.mUint16Array=new Uint16Array(F$o),this.mFloat32Array=new Float32Array(F$_)}F$e.append(this.mUint16Array),F$F.append(this.mFloat32Array)},F$Y}(),F$re=function(F$e){function F$s(){this._matrix=new F$B,this._matrix4=F$le.defaultMatrix4.concat(),F$s.__super.call(this,1e4),this.shaderValue=new F$Le(0,0)}F$O(F$s,"laya.webgl.submit.SubmitCanvas",F$se);var F$F=F$s.prototype;return F$F.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var F$e=F$$e.worldAlpha,F$F=F$$e.worldMatrix4,F$a=F$$e.worldMatrix,F$o=F$$e.worldFilters,F$E=F$$e.worldShaderDefines,F$s=this.shaderValue,F$Y=this._matrix,F$_=this._matrix4,F$R=F$B.TEMP;return F$B.mul(F$Y,F$a,F$R),F$_[0]=F$R.a,F$_[1]=F$R.b,F$_[4]=F$R.c,F$_[5]=F$R.d,F$_[12]=F$R.tx,F$_[13]=F$R.ty,F$$e.worldMatrix=F$R.clone(),F$$e.worldMatrix4=F$_,F$$e.worldAlpha=F$$e.worldAlpha*F$s.alpha,F$s.filters&&F$s.filters.length&&(F$$e.worldFilters=F$s.filters,F$$e.worldShaderDefines=F$s.defines),this._ctx_src.flush(),F$$e.worldAlpha=F$e,F$$e.worldMatrix4=F$F,F$$e.worldMatrix.destroy(),F$$e.worldMatrix=F$a,F$$e.worldFilters=F$o,F$$e.worldShaderDefines=F$E,1},F$F.releaseRender=function(){var F$e=F$s._cache;this._ctx_src=null,F$e[F$e._length++]=this},F$F.getRenderType=function(){return 10003},F$s.create=function(F$e,F$F,F$a){var F$o=F$s._cache._length?F$s._cache[--F$s._cache._length]:new F$s;F$o._ctx_src=F$e;var F$E=F$o.shaderValue;return F$E.alpha=F$F,F$E.defines.setValue(0),F$a&&F$a.length&&F$E.setFilters(F$a),F$o},F$s._cache=((F$s._cache=[])._length=0,F$s._cache),F$s}(),F$Ze=function(F$e){function F$H(F$e){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===F$e&&(F$e=1e4),F$H.__super.call(this,F$e)}F$O(F$H,"laya.webgl.submit.SubmitTexture",F$se);var F$F=F$H.prototype;return F$F.releaseRender=function(){var F$e=F$H._cache;(F$e[F$e._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},F$F.addTexture=function(F$e,F$F){this._texsID[this._texs.length]=F$e._uvID,this._texs.push(F$e),this._vbPos.push(F$F)},F$F.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var F$e=this.shaderValue.textureHost.bitmap;if(null!==F$e)for(var F$F=this._vb.getFloat32Array(),F$a=0,F$o=this._texs.length;F$a<F$o;F$a++){var F$E=this._texs[F$a];F$E.active();var F$s=F$E.uv;if(this._texsID[F$a]!==F$E._uvID){this._texsID[F$a]=F$E._uvID;var F$Y=this._vbPos[F$a];F$F[F$Y+2]=F$s[0],F$F[F$Y+3]=F$s[1],F$F[F$Y+6]=F$s[2],F$F[F$Y+7]=F$s[3],F$F[F$Y+10]=F$s[4],F$F[F$Y+11]=F$s[5],F$F[F$Y+14]=F$s[6],F$F[F$Y+15]=F$s[7],this._vb.setNeedUpload()}F$E.bitmap!==F$e&&(this._isSameTexture=!1)}}},F$F.renderSubmit=function(){if(0===this._numEle)return F$H._shaderSet=!1,1;var F$e=this.shaderValue.textureHost;if(F$e){var F$F=F$e.source;if(!F$e.bitmap||!F$F)return F$H._shaderSet=!1,1;this.shaderValue.texture=F$F,F$e.alphaTexture&&F$e.alphaTexture.source&&(this.shaderValue.texture1=F$e.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$a=F$Me.mainContext;if(F$C.activeBlendFunction!==this._blendFn&&(F$a.enable(3042),this._blendFn(F$a),F$C.activeBlendFunction=this._blendFn),F$A.drawCall++,F$A.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&F$Te.activeShader&&F$H._shaderSet?(F$Te.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&F$Te.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),F$H._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var F$o=F$e.bitmap,F$E=0,F$s=F$Te.activeShader,F$Y=0,F$_=this._texs.length;F$Y<F$_;F$Y++){var F$R=this._texs[F$Y];F$R.bitmap===F$o&&F$Y+1!==F$_||(F$s.uploadTexture2D(F$R.source),F$a.drawElements(4,6*(F$Y-F$E+1),5123,this._startIdx+6*F$E*F$le.BYTES_PIDX),F$o=F$R.bitmap,F$E=F$Y)}else F$a.drawElements(4,this._numEle,5123,this._startIdx);return 1},F$H.create=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$H._cache._length?F$H._cache[--F$H._cache._length]:new F$H;null==F$a&&((F$a=F$s._selfVb||(F$s._selfVb=F$he.create(-1))).clear(),F$o=0),F$s._ib=F$F,F$s._vb=F$a,F$s._startIdx=F$o*F$le.BYTES_PIDX,F$s._numEle=0;var F$Y=F$e._nBlendType;F$s._blendFn=F$e._targets?F$C.targetFns[F$Y]:F$C.fns[F$Y],F$s.shaderValue=F$E,F$s.shaderValue.setValue(F$e._shader2D);var F$_=F$e._shader2D.filters;return F$_&&F$s.shaderValue.setFilters(F$_),F$s},F$H._cache=((F$H._cache=[])._length=0,F$H._cache),F$H._shaderSet=!0,F$H}(),F$ze=function(F$e){function F$j(){F$j.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}F$O(F$j,"laya.webgl.utils.MeshTexture",F$je);var F$F=F$j.prototype;return F$F.addData=function(F$e,F$F,F$a,F$o,F$E,F$s){for(var F$Y=F$e.length/2,F$_=this._vb.needSize(F$Y*F$j.const_stride)>>2,F$R=this._vb.getFloat32Array(),F$H=0,F$g=0;F$g<F$Y;F$g++){var F$n=F$e[F$H],F$O=F$e[F$H+1],F$q=F$n*F$o.a+F$O*F$o.c+F$o.tx,F$I=F$n*F$o.b+F$O*F$o.d+F$o.ty;F$R[F$_++]=F$q,F$R[F$_++]=F$I,F$R[F$_++]=F$F[F$H],F$R[F$_++]=F$F[F$H+1],F$H+=2}this._vb.setNeedUpload();var F$l=this.vertNum;if(0<F$l){(F$Y=F$a.length)>F$j.tmpIdx.length&&(F$j.tmpIdx=new Uint16Array(F$Y));for(var F$P=0;F$P<F$Y;F$P++)F$j.tmpIdx[F$P]=F$a[F$P]+F$l;this._ib.appendU16Array(F$j.tmpIdx,F$a.length)}else this._ib.append(F$a);this._ib.setNeedUpload(),this.vertNum+=F$Y,this.indexNum+=F$a.length},F$F.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},F$F.destroy=function(){this._ib.destroy(),this._vb.destroy()},F$j.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new F$j},F$j.const_stride=16,F$j._POOL=[],F$Y(F$j,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),F$j}(),F$Te=function(F$e){function F$F(){F$F.__super.call(this),this.lock=!0}return F$O(F$F,"laya.webgl.shader.BaseShader",F$y),F$F.activeShader=null,F$F.bindShader=null,F$F}(),F$pe=function(F$F){function F$g(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===F$a&&(F$a=6408),void 0===F$o&&(F$o=5121),void 0===F$E&&(F$E=34041),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=-1),void 0===F$R&&(F$R=-1),this._type=1,this._w=F$e,this._h=F$F,this._surfaceFormat=F$a,this._surfaceType=F$o,this._depthStencilFormat=F$E,F$j.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=F$s,this._repeat=F$Y,this._minFifter=F$_,this._magFifter=F$R,this._createWebGLRenderTarget(),this.bitmap.lock=!0,F$g.__super.call(this,this.bitmap,F$z.INV_UV)}F$O(F$g,"laya.webgl.resource.RenderTarget2D",F$F);var F$e=F$g.prototype;return F$m.imps(F$e,{"laya.resource.IDispose":!0}),F$e.getType=function(){return this._type},F$e.getTexture=function(){return this},F$e.size=function(F$e,F$F){this._w==F$e&&this._h==F$F||(this._w=F$e,this._h=F$F,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},F$e.release=function(){this.destroy()},F$e.recycle=function(){F$g.POOL.push(this)},F$e.start=function(){var F$e=F$Me.mainContext;return this._preRenderTarget=F$$e.curRenderTarget,F$$e.curRenderTarget=this,F$e.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(F$e.viewport(0,0,this._w,this._h),this._svWidth=F$$e.width,this._svHeight=F$$e.height,F$$e.width=this._w,F$$e.height=this._h,F$Te.activeShader=null),this},F$e.clear=function(F$e,F$F,F$a,F$o){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=1);var F$E=F$Me.mainContext;F$E.clearColor(F$e,F$F,F$a,F$o);var F$s=16384;switch(this._depthStencilFormat){case 33189:F$s|=256;break;case 36168:F$s|=1024;break;case 34041:F$s|=256,F$s|=1024}F$E.clear(F$s)},F$e.end=function(){var F$e=F$Me.mainContext;F$e.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,F$$e.curRenderTarget=this._preRenderTarget,1==this._type?(F$e.viewport(0,0,this._svWidth,this._svHeight),F$$e.width=this._svWidth,F$$e.height=this._svHeight,F$Te.activeShader=null):F$e.viewport(0,0,F$m.stage.width,F$m.stage.height)},F$e.getData=function(F$e,F$F,F$a,F$o){var F$E=F$Me.mainContext;if(F$E.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===F$E.checkFramebufferStatus(36160)))return F$E.bindFramebuffer(36160,null),null;var F$s=new Uint8Array(this._w*this._h*4);return F$E.readPixels(F$e,F$F,F$a,F$o,this._surfaceFormat,this._surfaceType,F$s),F$E.bindFramebuffer(36160,null),F$s},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,F$F.prototype.destroy.call(this))},F$e.dispose=function(){},F$e._createWebGLRenderTarget=function(){this.bitmap=new F$Xe(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(F$e){this.event("recovered")})},F$o(0,F$e,"surfaceFormat",function(){return this._surfaceFormat}),F$o(0,F$e,"magFifter",function(){return this._magFifter}),F$o(0,F$e,"surfaceType",function(){return this._surfaceType}),F$o(0,F$e,"mipMap",function(){return this._mipMap}),F$o(0,F$e,"depthStencilFormat",function(){return this._depthStencilFormat}),F$o(0,F$e,"minFifter",function(){return this._minFifter}),F$o(0,F$e,"source",function(){return this._alreadyResolved?F$m.superGet(F$z,this,"source"):null}),F$g.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){void 0===F$a&&(F$a=6408),void 0===F$o&&(F$o=5121),void 0===F$E&&(F$E=34041),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=-1),void 0===F$R&&(F$R=-1);var F$H=F$g.POOL.pop();return F$H||(F$H=new F$g(F$e,F$F)),F$H.bitmap&&F$H._w==F$e&&F$H._h==F$F&&F$H._surfaceFormat==F$a&&F$H._surfaceType==F$o&&F$H._depthStencilFormat==F$E&&F$H._mipMap==F$s&&F$H._repeat==F$Y&&F$H._minFifter==F$_&&F$H._magFifter==F$R||(F$H._w=F$e,F$H._h=F$F,F$H._surfaceFormat=F$a,F$H._surfaceType=F$o,F$H._depthStencilFormat=F$E,F$j.isConchWebGL&&34041===F$H._depthStencilFormat&&(F$H._depthStencilFormat=33189),F$H._mipMap=F$s,F$H._repeat=F$Y,F$H._minFifter=F$_,F$H._magFifter=F$R,F$H.release(),F$H._createWebGLRenderTarget()),F$H},F$g.TYPE2D=1,F$g.TYPE3D=2,F$g.POOL=[],F$g}(F$z),F$Je=function(F$e){function F$F(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,F$F.__super.call(this),F$F._gl=F$Me.mainContext}F$O(F$F,"laya.webgl.utils.Buffer",F$y);var F$a=F$F.prototype;return F$a._bind=function(){this.activeResource(),F$F._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(F$F._bindVertexBuffer=this._glBuffer),F$F._gl.bindBuffer(this._bufferType,F$F._bindActive[this._bufferType]=this._glBuffer),F$Te.activeShader=null)},F$a.recreateResource=function(){this._glBuffer||(this._glBuffer=F$F._gl.createBuffer()),this.completeCreate()},F$a.disposeResource=function(){this._glBuffer&&(F$Me.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},F$o(0,F$a,"bufferUsage",function(){return this._bufferUsage}),F$F._gl=null,F$F._bindActive={},F$F._bindVertexBuffer=null,F$F._enableAtributes=[],F$F}(),F$ke=function(F$e){function F$a(F$e){this.texcoord=null,this.offsetX=300,this.offsetY=0,F$a.__super.call(this,512,0);var F$F=8*F$le.BYTES_PE;this.position=[2,5126,!1,F$F,0],this.texcoord=[2,5126,!1,F$F,2*F$le.BYTES_PE],this.color=[4,5126,!1,F$F,4*F$le.BYTES_PE]}return F$O(F$a,"laya.webgl.shader.d2.skinAnishader.SkinSV",F$Le),F$a}(),F$de=function(F$e){function F$F(F$e){F$F.__super.call(this,2,0),this.color=[]}return F$O(F$F,"laya.webgl.shader.d2.value.Color2dSV",F$Le),F$F.prototype.setValue=function(F$e){F$e.fillStyle&&(this.color=F$e.fillStyle._color._color),F$e.strokeStyle&&(this.color=F$e.strokeStyle._color._color)},F$F}(),F$we=function(F$e){function F$F(F$e){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=F$Le._TEXCOORD,F$F.__super.call(this,256,0)}F$O(F$F,"laya.webgl.shader.d2.value.FillTextureSV",F$Le);var F$a=F$F.prototype;return F$a.setValue=function(F$e){this.ALPHA=F$e.ALPHA,F$e.filters&&this.setFilters(F$e.filters)},F$a.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$F}(),F$Se=function(F$e){function F$F(F$e){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=F$Le._TEXCOORD,void 0===F$e&&(F$e=0),F$F.__super.call(this,1,F$e)}F$O(F$F,"laya.webgl.shader.d2.value.TextureSV",F$Le);var F$a=F$F.prototype;return F$a.setValue=function(F$e){this.ALPHA=F$e.ALPHA,F$e.filters&&this.setFilters(F$e.filters)},F$a.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$F}(),F$Ce=function(F$e){function F$F(F$e){this.a_color=null,this.u_pos=[0,0],F$F.__super.call(this,4,0),this.position=[2,5126,!1,5*F$le.BYTES_PE,0],this.a_color=[3,5126,!1,5*F$le.BYTES_PE,2*F$le.BYTES_PE]}return F$O(F$F,"laya.webgl.shader.d2.value.PrimitiveSV",F$Le),F$F}(),F$ue=function(F$e){function F$F(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,F$F.__super.call(this)}F$O(F$F,"laya.webgl.atlas.AtlasWebGLCanvas",F$e);var F$a=F$F.prototype;return F$a.recreateResource=function(){var F$e=F$Me.mainContext,F$F=this._source=F$e.createTexture(),F$a=F$De.curBindTexTarget,F$o=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,F$F),F$e.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),F$e.texParameteri(3553,10241,9729),F$e.texParameteri(3553,10240,9729),F$e.texParameteri(3553,10242,33071),F$e.texParameteri(3553,10243,33071),F$a&&F$o&&F$De.bindTexture(F$e,F$a,F$o),this.memorySize=this._w*this._h*4,this.completeCreate()},F$a.disposeResource=function(){this._source&&(F$Me.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$a.texSubImage2D=function(F$e,F$F,F$a){if(F$j.isFlash){this._flashCacheImage||(this._flashCacheImage=F$l.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var F$o=F$a.bitmapdata;this._flashCacheImage._image.copyPixels(F$o,0,0,F$o.width,F$o.height,F$e,F$F),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var F$E=F$Me.mainContext,F$s=F$De.curBindTexTarget,F$Y=F$De.curBindTexValue;F$De.bindTexture(F$E,3553,this._source),F$E.pixelStorei(37441,!0),0<=F$e-1&&F$E.texSubImage2D(3553,0,F$e-1,F$F,6408,5121,F$a),F$e+1<=this._w&&F$E.texSubImage2D(3553,0,F$e+1,F$F,6408,5121,F$a),0<=F$F-1&&F$E.texSubImage2D(3553,0,F$e,F$F-1,6408,5121,F$a),F$F+1<=this._h&&F$E.texSubImage2D(3553,0,F$e,F$F+1,6408,5121,F$a),F$E.texSubImage2D(3553,0,F$e,F$F,6408,5121,F$a),F$E.pixelStorei(37441,!1),F$s&&F$Y&&F$De.bindTexture(F$E,F$s,F$Y)}},F$a.texSubImage2DPixel=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$Me.mainContext,F$Y=F$De.curBindTexTarget,F$_=F$De.curBindTexValue;F$De.bindTexture(F$s,3553,this._source);var F$R=new Uint8Array(F$E.data);F$s.pixelStorei(37441,!0),F$s.texSubImage2D(3553,0,F$e,F$F,F$a,F$o,6408,5121,F$R),F$s.pixelStorei(37441,!1),F$Y&&F$_&&F$De.bindTexture(F$s,F$Y,F$_)},F$o(0,F$a,"width",F$e.prototype._$get_width,function(F$e){this._w=F$e}),F$o(0,F$a,"height",F$e.prototype._$get_height,function(F$e){this._h=F$e}),F$F}(F$a),F$xe=function(F$e){function F$E(){this.flipY=!0,this.alwaysChange=!1,F$E.__super.call(this)}F$O(F$E,"laya.webgl.resource.WebGLCanvas",F$a);var F$F=F$E.prototype;return F$F.getCanvas=function(){return this._canvas},F$F.clear=function(){this._ctx&&this._ctx.clear()},F$F.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$F._setContext=function(F$e){this._ctx=F$e},F$F.getContext=function(F$e,F$F){return this._ctx?this._ctx:this._ctx=F$E._createContext(this)},F$F.size=function(F$e,F$F){this._w==F$e&&this._h==F$F||(this._w=F$e,this._h=F$F,this._ctx&&this._ctx.size(F$e,F$F),this._canvas&&(this._canvas.height=F$F,this._canvas.width=F$e))},F$F.activeResource=function(F$e){void 0===F$e&&(F$e=!1),this._source||this.recreateResource()},F$F.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},F$F.disposeResource=function(){this._source&&!this.iscpuSource&&(F$Me.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$F.createWebGlTexture=function(){var F$e=F$Me.mainContext;this._canvas;var F$F=this._source=F$e.createTexture();this.iscpuSource=!1;var F$a=F$De.curBindTexTarget,F$o=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,F$F),F$e.pixelStorei(37440,this.flipY?1:0),F$E.premulAlpha&&F$e.pixelStorei(37441,!0),F$e.texImage2D(3553,0,6408,6408,5121,this._imgData),F$E.premulAlpha&&F$e.pixelStorei(37441,!1),F$e.texParameteri(3553,10240,9729),F$e.texParameteri(3553,10241,9729),F$e.texParameteri(3553,10242,33071),F$e.texParameteri(3553,10243,33071),F$e.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,F$a&&F$o&&F$De.bindTexture(F$e,F$a,F$o)},F$F.reloadCanvasData=function(){var F$e=F$Me.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var F$F=F$De.curBindTexTarget,F$a=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,this._source),F$E.premulAlpha&&F$e.pixelStorei(37441,!0),F$e.texImage2D(3553,0,6408,6408,5121,this._imgData),F$E.premulAlpha&&F$e.pixelStorei(37441,!1),F$e.pixelStorei(37440,0),F$F&&F$a&&F$De.bindTexture(F$e,F$F,F$a)},F$F.texSubImage2D=function(F$e,F$F,F$a){var F$o=F$Me.mainContext,F$E=F$De.curBindTexTarget,F$s=F$De.curBindTexValue;F$De.bindTexture(F$o,3553,this._source),F$o.pixelStorei(37441,!0),F$o.texSubImage2D(3553,0,F$F,F$a,6408,5121,F$e._source),F$o.pixelStorei(37441,!1),F$E&&F$s&&F$De.bindTexture(F$o,F$E,F$s)},F$F.toBase64=function(F$e,F$F,F$a){var F$o=null;this._canvas&&(F$o=this._canvas.toDataURL(F$e,F$F)),F$a.call(this,F$o)},F$o(0,F$F,"context",function(){return this._ctx}),F$o(0,F$F,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),F$o(0,F$F,"asBitmap",null,function(F$e){this._ctx&&(this._ctx.asBitmap=F$e)}),F$E._createContext=null,F$E.premulAlpha=!1,F$E}(),F$Ne=function(F$e){function F$s(F$e,F$F){this.CborderSize=12,F$s.__super.call(this),this.char=F$e,this.isSpace=" "===F$e,this.xs=F$F.scaleX,this.ys=F$F.scaleY,this.font=F$F.font.toString(),this.fontSize=F$F.font.size,this.fillColor=F$F.fillColor,this.borderColor=F$F.borderColor,this.lineWidth=F$F.lineWidth,this.underLine=F$F.underLine;var F$a,F$o=F$j.isConchApp;F$o?((F$a=ConchTextCanvas)._source=ConchTextCanvas,F$a._source.canvas=ConchTextCanvas):F$a=F$q.canvas.source,this.canvas=F$a,this._enableMerageInAtlas=!0,this._ctx=F$o?F$a:this.canvas.getContext("2d",void 0);var F$E=F$T.measureText(this.char,this.font);this.cw=F$E.width*this.xs,this.ch=(F$E.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new F$z(this)}F$O(F$s,"laya.webgl.resource.WebGLCharImage",F$a);var F$F=F$s.prototype;return F$m.imps(F$F,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$F.active=function(){this.texture.active()},F$F.recreateResource=function(){var F$e=F$j.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),F$e){var F$F=this.fontSize;1==this.xs&&1==this.ys||(F$F=parseInt(F$F*(this.xs>this.ys?this.xs:this.ys)+""));var F$a="normal 100 "+this.font;F$a=F$a.replace(F$s._fontSizeReg,F$F),this.borderColor&&(F$a+=" 1 "+this.borderColor),this._ctx.font=F$a,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,F$Z.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var F$o=this._ctx.measureText(this.char);F$o||(F$o={width:16});var F$E=F$o.width+1;this._ctx.lineTo(F$E,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},F$F.onresize=function(F$e,F$F){this._w=F$e,this._h=F$F,this._allowMerageInAtlas=!0},F$F.clearAtlasSource=function(){},F$o(0,F$F,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$o(0,F$F,"atlasSource",function(){return this.canvas}),F$o(0,F$F,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$e){this._enableMerageInAtlas=F$e}),F$s.createOneChar=function(F$e,F$F){return new F$s(F$e,F$F)},F$s._fontSizeReg=new RegExp("\\d+(?=px)","g"),F$s}(),F$Xe=function(F$e){function F$H(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){void 0===F$a&&(F$a=6408),void 0===F$o&&(F$o=5121),void 0===F$E&&(F$E=34041),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=-1),void 0===F$R&&(F$R=1),F$H.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=F$e,this._h=F$F,this._surfaceFormat=F$a,this._surfaceType=F$o,this._depthStencilFormat=F$E,this._mipMap=F$s,this._repeat=F$Y,this._minFifter=F$_,this._magFifter=F$R}F$O(F$H,"laya.webgl.resource.WebGLRenderTarget",F$a);var F$F=F$H.prototype;return F$F.recreateResource=function(){var F$e=F$Me.mainContext;this._frameBuffer||(this._frameBuffer=F$e.createFramebuffer()),this._source||(this._source=F$e.createTexture());var F$F=F$De.curBindTexTarget,F$a=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,this._source),F$e.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var F$o=this._minFifter,F$E=this._magFifter,F$s=this._repeat?10497:33071,F$Y=F$g.isPOT(this._w,this._h);if(F$Y?(this._mipMap?-1!==F$o||(F$o=9987):-1!==F$o||(F$o=9729),-1!==F$E||(F$E=9729),F$e.texParameteri(3553,10241,F$o),F$e.texParameteri(3553,10240,F$E),F$e.texParameteri(3553,10242,F$s),F$e.texParameteri(3553,10243,F$s),this._mipMap&&F$e.generateMipmap(3553)):(-1!==F$o||(F$o=9729),-1!==F$E||(F$E=9729),F$e.texParameteri(3553,10241,F$o),F$e.texParameteri(3553,10240,F$E),F$e.texParameteri(3553,10242,33071),F$e.texParameteri(3553,10243,33071)),F$e.bindFramebuffer(36160,this._frameBuffer),F$e.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=F$e.createRenderbuffer()),F$e.bindRenderbuffer(36161,this._depthStencilBuffer),F$e.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:F$e.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$e.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$e.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$e.bindFramebuffer(36160,null),F$F&&F$a&&F$De.bindTexture(F$e,F$F,F$a),F$e.bindRenderbuffer(36161,null),F$Y&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},F$F.disposeResource=function(){this._frameBuffer&&(F$Me.mainContext.deleteTexture(this._source),F$Me.mainContext.deleteFramebuffer(this._frameBuffer),F$Me.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},F$o(0,F$F,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$o(0,F$F,"frameBuffer",function(){return this._frameBuffer}),F$H}(),F$We=function(F$e){function F$_(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this.offsetX=0,this.offsetY=0,F$_.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=F$s,this.canvas=F$e,this._ctx=F$e.getContext("2d",void 0),this._w=F$o,this._h=F$E,this.offsetX=F$F,this.offsetY=F$a,this.src=F$Y,this._enableMerageInAtlas=!0,F$w.enabled&&this._w<F$w.atlasLimitWidth&&this._h<F$w.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}F$O(F$_,"laya.webgl.resource.WebGLSubImage",F$a);var F$F=F$_.prototype;return F$m.imps(F$F,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$F.size=function(F$e,F$F){this._w=F$e,this._h=F$F,this._ctx&&this._ctx.size(F$e,F$F),this.canvas&&(this.canvas.height=F$F,this.canvas.width=F$e)},F$F.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},F$F.createWebGlTexture=function(){var F$e=F$Me.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var F$F=this._source=F$e.createTexture(),F$a=F$De.curBindTexTarget,F$o=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,F$F),F$e.pixelStorei(37441,!0),F$e.texImage2D(3553,0,6408,6408,5121,this.canvas),F$e.pixelStorei(37441,!1);var F$E=this.minFifter,F$s=this.magFifter,F$Y=this.repeat?10497:33071,F$_=F$g.isPOT(this.width,this.height);F$_?(this.mipmap?-1!==F$E||(F$E=9987):-1!==F$E||(F$E=9729),-1!==F$s||(F$s=9729),F$e.texParameteri(3553,10240,F$s),F$e.texParameteri(3553,10241,F$E),F$e.texParameteri(3553,10242,F$Y),F$e.texParameteri(3553,10243,F$Y),this.mipmap&&F$e.generateMipmap(3553)):(-1!==F$E||(F$E=9729),-1!==F$s||(F$s=9729),F$e.texParameteri(3553,10241,F$E),F$e.texParameteri(3553,10240,F$s),F$e.texParameteri(3553,10242,33071),F$e.texParameteri(3553,10243,33071)),F$a&&F$o&&F$De.bindTexture(F$e,F$a,F$o),this.canvas=null,F$_&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},F$F.disposeResource=function(){F$w.enabled&&this._allowMerageInAtlas||!this._source||(F$Me.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$F.clearAtlasSource=function(){},F$o(0,F$F,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$o(0,F$F,"atlasSource",function(){return this.canvas}),F$o(0,F$F,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(F$e){this._allowMerageInAtlas=F$e}),F$_}(),F$fe=function(F$e){function F$H(F$e,F$F,F$a,F$o){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,F$H.__super.call(this),!F$e||!F$F)throw"Shader Error";this._id=++F$H._count,this._vs=F$e,this._ps=F$F,this._nameMap=F$o||{},null!=F$a&&(F$H.sharders[F$a]=this)}F$O(F$H,"laya.webgl.shader.Shader",F$Te);var F$F=F$H.prototype;return F$F.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},F$F.disposeResource=function(){F$Me.mainContext.deleteShader(this._vshader),F$Me.mainContext.deleteShader(this._pshader),F$Me.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},F$F._compile=function(){if(!F$Me.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var F$e=[this._vs,this._ps],F$F=F$Me.mainContext;if(this._program=F$F.createProgram(),this._vshader=F$H._createShader(F$F,F$e[0],35633),this._pshader=F$H._createShader(F$F,F$e[1],35632),F$F.attachShader(this._program,this._vshader),F$F.attachShader(this._program,this._pshader),F$F.linkProgram(this._program),!F$j.isConchApp&&!F$F.getProgramParameter(this._program,35714))throw F$F.getProgramInfoLog(this._program);var F$a,F$o,F$E=0,F$s=0;for(F$s=F$j.isConchApp?F$F.getProgramParameterEx(this._vs,this._ps,"",35721):F$F.getProgramParameter(this._program,35721),F$E=0;F$E<F$s;F$E++){var F$Y=null;F$a={vartype:"attribute",glfun:null,ivartype:0,attrib:F$Y=F$j.isConchApp?F$F.getActiveAttribEx(this._vs,this._ps,"",F$E):F$F.getActiveAttrib(this._program,F$E),location:F$F.getAttribLocation(this._program,F$Y.name),name:F$Y.name,type:F$Y.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(F$a)}var F$_=0;for(F$_=F$j.isConchApp?F$F.getProgramParameterEx(this._vs,this._ps,"",35718):F$F.getProgramParameter(this._program,35718),F$E=0;F$E<F$_;F$E++){var F$R=null;F$R=F$j.isConchApp?F$F.getActiveUniformEx(this._vs,this._ps,"",F$E):F$F.getActiveUniform(this._program,F$E),0<(F$a={vartype:"uniform",glfun:null,ivartype:1,attrib:F$Y,location:F$F.getUniformLocation(this._program,F$R.name),name:F$R.name,type:F$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$a.name=F$a.name.substr(0,F$a.name.length-3),F$a.isArray=!0,F$a.location=F$F.getUniformLocation(this._program,F$a.name)),this._params.push(F$a)}for(F$E=0,F$o=this._params.length;F$E<F$o;F$E++)if((F$a=this._params[F$E]).indexOfParams=F$E,F$a.index=1,F$a.value=[F$a.location,null],F$a.codename=F$a.name,F$a.name=this._nameMap[F$a.codename]?this._nameMap[F$a.codename]:F$a.codename,(this._paramsMap[F$a.name]=F$a)._this=this,F$a.uploadedValue=[],"attribute"!==F$a.vartype)switch(F$a.type){case 5124:F$a.fun=F$a.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$a.fun=F$a.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$a.fun=F$a.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$a.fun=F$a.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$a.fun=F$a.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$a.fun=this._uniform_sampler2D;break;case 35680:F$a.fun=this._uniform_samplerCube;break;case 35676:F$a.glfun=F$F.uniformMatrix4fv,F$a.fun=this._uniformMatrix4fv;break;case 35670:F$a.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else F$a.fun=this._attribute}},F$F.getUniform=function(F$e){return this._paramsMap[F$e]},F$F._attribute=function(F$e,F$F){var F$a=F$Me.mainContext,F$o=F$Je._enableAtributes,F$E=F$e.location;return F$o[F$E]||F$a.enableVertexAttribArray(F$E),F$a.vertexAttribPointer(F$E,F$F[0],F$F[1],F$F[2],F$F[3],F$F[4]+this._offset),F$o[F$E]=F$Je._bindVertexBuffer,1},F$F._uniform1f=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F?(F$Me.mainContext.uniform1f(F$e.location,F$a[0]=F$F),1):0},F$F._uniform1fv=function(F$e,F$F){if(F$F.length<4){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$Me.mainContext.uniform1fv(F$e.location,F$F),F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3],1):0}return F$Me.mainContext.uniform1fv(F$e.location,F$F),1},F$F._uniform_vec2=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]?(F$Me.mainContext.uniform2f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1]),1):0},F$F._uniform_vec2v=function(F$e,F$F){if(F$F.length<2){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$Me.mainContext.uniform2fv(F$e.location,F$F),F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3],1):0}return F$Me.mainContext.uniform2fv(F$e.location,F$F),1},F$F._uniform_vec3=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]?(F$Me.mainContext.uniform3f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2]),1):0},F$F._uniform_vec3v=function(F$e,F$F){return F$Me.mainContext.uniform3fv(F$e.location,F$F),1},F$F._uniform_vec4=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$Me.mainContext.uniform4f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3]),1):0},F$F._uniform_vec4v=function(F$e,F$F){return F$Me.mainContext.uniform4fv(F$e.location,F$F),1},F$F._uniformMatrix2fv=function(F$e,F$F){return F$Me.mainContext.uniformMatrix2fv(F$e.location,!1,F$F),1},F$F._uniformMatrix3fv=function(F$e,F$F){return F$Me.mainContext.uniformMatrix3fv(F$e.location,!1,F$F),1},F$F._uniformMatrix4fv=function(F$e,F$F){return F$Me.mainContext.uniformMatrix4fv(F$e.location,!1,F$F),1},F$F._uniform1i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F?(F$Me.mainContext.uniform1i(F$e.location,F$a[0]=F$F),1):0},F$F._uniform1iv=function(F$e,F$F){return F$Me.mainContext.uniform1iv(F$e.location,F$F),1},F$F._uniform_ivec2=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]?(F$Me.mainContext.uniform2i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1]),1):0},F$F._uniform_ivec2v=function(F$e,F$F){return F$Me.mainContext.uniform2iv(F$e.location,F$F),1},F$F._uniform_vec3i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]?(F$Me.mainContext.uniform3i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2]),1):0},F$F._uniform_vec3vi=function(F$e,F$F){return F$Me.mainContext.uniform3iv(F$e.location,F$F),1},F$F._uniform_vec4i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$Me.mainContext.uniform4i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3]),1):0},F$F._uniform_vec4vi=function(F$e,F$F){return F$Me.mainContext.uniform4iv(F$e.location,F$F),1},F$F._uniform_sampler2D=function(F$e,F$F){var F$a=F$Me.mainContext,F$o=F$e.uploadedValue;return null==F$o[0]?(F$o[0]=this._curActTexIndex,F$a.uniform1i(F$e.location,this._curActTexIndex),F$a.activeTexture(F$H._TEXTURES[this._curActTexIndex]),F$De.bindTexture(F$a,3553,F$F),this._curActTexIndex++,1):(F$a.activeTexture(F$H._TEXTURES[F$o[0]]),F$De.bindTexture(F$a,3553,F$F),0)},F$F._uniform_samplerCube=function(F$e,F$F){var F$a=F$Me.mainContext,F$o=F$e.uploadedValue;return null==F$o[0]?(F$o[0]=this._curActTexIndex,F$a.uniform1i(F$e.location,this._curActTexIndex),F$a.activeTexture(F$H._TEXTURES[this._curActTexIndex]),F$De.bindTexture(F$a,34067,F$F),this._curActTexIndex++,1):(F$a.activeTexture(F$H._TEXTURES[F$o[0]]),F$De.bindTexture(F$a,34067,F$F),0)},F$F._noSetValue=function(F$e){console.log("no....:"+F$e.name)},F$F.uploadOne=function(F$e,F$F){this.activeResource(),F$De.UseProgram(this._program);var F$a=this._paramsMap[F$e];F$a.fun.call(this,F$a,F$F)},F$F.uploadTexture2D=function(F$e){F$A.shaderCall++;var F$F=F$Me.mainContext;F$F.activeTexture(33984),F$De.bindTexture(F$F,3553,F$e)},F$F.uploadTexture2D1=function(F$e){F$A.shaderCall++;var F$F=F$Me.mainContext;F$F.activeTexture(33985),F$De.bindTexture(F$F,3553,F$e)},F$F.upload=function(F$e,F$F){F$Te.activeShader=F$Te.bindShader=this,this._lastUseFrameCount===F$A.loopCount||this.activeResource(),F$De.UseProgram(this._program),this._reCompile?(F$F=this._params,this._reCompile=!1):F$F=F$F||this._params;F$Me.mainContext;for(var F$a,F$o,F$E=F$F.length,F$s=0,F$Y=0;F$Y<F$E;F$Y++)null!==(F$o=F$e[(F$a=F$F[F$Y]).name])&&(F$s+=F$a.fun.call(this,F$a,F$o));F$A.shaderCall+=F$s},F$F.uploadArray=function(F$e,F$F,F$a){F$Te.activeShader=this,(F$Te.bindShader=this).activeResource(),F$De.UseProgram(this._program);this._params;for(var F$o,F$E,F$s=0,F$Y=F$F-2;0<=F$Y;F$Y-=2)(F$E=this._paramsMap[F$e[F$Y]])&&null!=(F$o=F$e[F$Y+1])&&(F$a&&F$a[F$E.name]&&F$a[F$E.name].bind(),F$s+=F$E.fun.call(this,F$E,F$o));F$A.shaderCall+=F$s},F$F.getParams=function(){return this._params},F$H.getShader=function(F$e){return F$H.sharders[F$e]},F$H.create=function(F$e,F$F,F$a,F$o){return new F$H(F$e,F$F,F$a,F$o)},F$H.withCompile=function(F$e,F$F,F$a,F$o){if(F$a&&F$H.sharders[F$a])return F$H.sharders[F$a];var F$E=F$H._preCompileShader[2e-4*F$e];if(!F$E)throw new Error("withCompile shader err!"+F$e);return F$E.createShader(F$F,F$a,F$o)},F$H.withCompile2D=function(F$e,F$F,F$a,F$o,F$E){if(F$o&&F$H.sharders[F$o])return F$H.sharders[F$o];var F$s=F$H._preCompileShader[2e-4*F$e+F$F];if(!F$s)throw new Error("withCompile shader err!"+F$e+" "+F$F);return F$s.createShader(F$a,F$o,F$E)},F$H.addInclude=function(F$e,F$F){F$ye.addInclude(F$e,F$F)},F$H.preCompile=function(F$e,F$F,F$a,F$o){var F$E=2e-4*F$e;F$H._preCompileShader[F$E]=new F$ye(F$E,F$F,F$a,F$o)},F$H.preCompile2D=function(F$e,F$F,F$a,F$o,F$E){var F$s=2e-4*F$e+F$F;F$H._preCompileShader[F$s]=new F$ye(F$s,F$a,F$o,F$E)},F$H._createShader=function(F$e,F$F,F$a){var F$o=F$e.createShader(F$a);return F$e.shaderSource(F$o,F$F),F$e.compileShader(F$o),F$o},F$H._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],F$H._count=0,F$H._preCompileShader={},F$H.SHADERNAME2ID=2e-4,F$H.sharders=((F$H.sharders=[]).length=32,F$H.sharders),F$Y(F$H,["nameKey",function(){return this.nameKey=new F$U}]),F$H}(),F$ie=function(F$e){function F$F(){this._maxsize=0,this._upload=!0,this._uploadSize=0,F$F.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}F$O(F$F,"laya.webgl.utils.Buffer2D",F$e);var F$a=F$F.prototype;return F$a.needSize=function(F$e){var F$F=this._byteLength;if(F$e){var F$a=this._byteLength+F$e;F$a<=this._buffer.byteLength||this._resizeBuffer(F$a<<1,!0),this._byteLength=F$a}return F$F},F$a._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),F$A.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$Je._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$Je._gl.bufferSubData(this._bufferType,0,this._buffer)},F$a._bufferSubData=function(F$e,F$F,F$a){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),this._maxsize=Math.max(this._maxsize,this._byteLength),F$A.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$Je._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$F||F$a){var F$o=this._buffer.slice(F$F,F$a);F$Je._gl.bufferSubData(this._bufferType,F$e,F$o)}else F$Je._gl.bufferSubData(this._bufferType,F$e,this._buffer)},F$a._checkArrayUse=function(){},F$a._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},F$a._bind_subUpload=function(F$e,F$F,F$a){return void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(F$e,F$F,F$a),!0)},F$a._resizeBuffer=function(F$e,F$F){if(F$e<this._buffer.byteLength)return this;if(this.memorySize=F$e,F$F&&this._buffer&&0<this._buffer.byteLength){var F$a=new ArrayBuffer(F$e);new Uint8Array(F$a).set(new Uint8Array(this._buffer),0),this._buffer=F$a}else this._buffer=new ArrayBuffer(F$e);return this._checkArrayUse(),this._upload=!0,this},F$a.append=function(F$e){this._upload=!0;var F$F,F$a;F$F=F$e.byteLength,F$e instanceof Uint8Array?(this._resizeBuffer(this._byteLength+F$F,!0),F$a=new Uint8Array(this._buffer,this._byteLength)):F$e instanceof Uint16Array?(this._resizeBuffer(this._byteLength+F$F,!0),F$a=new Uint16Array(this._buffer,this._byteLength)):F$e instanceof Float32Array&&(this._resizeBuffer(this._byteLength+F$F,!0),F$a=new Float32Array(this._buffer,this._byteLength)),F$a.set(F$e,0),this._byteLength+=F$F,this._checkArrayUse()},F$a.appendU16Array=function(F$e,F$F){this._resizeBuffer(this._byteLength+2*F$F,!0);for(var F$a=new Uint16Array(this._buffer,this._byteLength,F$F),F$o=0;F$o<F$F;F$o++)F$a[F$o]=F$e[F$o];this._byteLength+=2*F$F,this._checkArrayUse()},F$a.appendEx=function(F$e,F$F){this._upload=!0;var F$a;F$a=F$e.byteLength,this._resizeBuffer(this._byteLength+F$a,!0),new F$F(this._buffer,this._byteLength).set(F$e,0),this._byteLength+=F$a,this._checkArrayUse()},F$a.appendEx2=function(F$e,F$F,F$a,F$o){void 0===F$o&&(F$o=1),this._upload=!0;var F$E,F$s;F$E=F$a*F$o,this._resizeBuffer(this._byteLength+F$E,!0),F$s=new F$F(this._buffer,this._byteLength);var F$Y=0;for(F$Y=0;F$Y<F$a;F$Y++)F$s[F$Y]=F$e[F$Y];this._byteLength+=F$E,this._checkArrayUse()},F$a.getBuffer=function(){return this._buffer},F$a.setNeedUpload=function(){this._upload=!0},F$a.getNeedUpload=function(){return this._upload},F$a.upload=function(){var F$e=this._bind_upload();return F$Je._gl.bindBuffer(this._bufferType,null),F$Je._bindActive[this._bufferType]=null,F$Te.activeShader=null,F$e},F$a.subUpload=function(F$e,F$F,F$a){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0);var F$o=this._bind_subUpload();return F$Je._gl.bindBuffer(this._bufferType,null),F$Je._bindActive[this._bufferType]=null,F$Te.activeShader=null,F$o},F$a.disposeResource=function(){F$e.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},F$a.clear=function(){this._byteLength=0,this._upload=!0},F$o(0,F$a,"bufferLength",function(){return this._buffer.byteLength}),F$o(0,F$a,"byteLength",null,function(F$e){this._byteLength!==F$e&&(F$e<=this._buffer.byteLength||this._resizeBuffer(2*F$e+256,!0),this._byteLength=F$e)}),F$F.__int__=function(F$e){F$ce.QuadrangleIB=F$ce.create(35044),F$Pe.fillIBQuadrangle(F$ce.QuadrangleIB,16)},F$F.FLOAT32=4,F$F.SHORT=2,F$F}(F$Je),F$Qe=(function(F$F){function F$a(F$e){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,F$a.__super.call(this,9)}F$O(F$a,"laya.webgl.shader.d2.value.GlowSV",F$F);var F$e=F$a.prototype;F$e.setValue=function(F$e){F$F.prototype.setValue.call(this,F$e)},F$e.clear=function(){F$F.prototype.clear.call(this)}}(F$Se),function(F$e){function F$F(F$e){F$F.__super.call(this,64),this.defines.add(64)}F$O(F$F,"laya.webgl.shader.d2.value.TextSV",F$e);var F$a=F$F.prototype;return F$a.release=function(){(F$F.pool[F$F._length++]=this).clear()},F$a.clear=function(){F$e.prototype.clear.call(this)},F$F.create=function(){return F$F._length?F$F.pool[--F$F._length]:new F$F(null)},F$F.pool=[],F$F._length=0,F$F}(F$Se)),F$te=function(F$e){function F$E(F$e,F$F,F$a,F$o){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,F$E.__super.call(this,F$e,F$F,F$a,F$o)}F$O(F$E,"laya.webgl.shader.d2.Shader2X",F$e);var F$F=F$E.prototype;return F$F.upload2dQuick1=function(F$e){this.upload(F$e,this._params2dQuick1||this._make2dQuick1())},F$F._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var F$e,F$F=this._params,F$a=0,F$o=F$F.length;F$a<F$o;F$a++)F$e=F$F[F$a],(F$j.isFlash||"size"!==F$e.name&&"position"!==F$e.name&&"texcoord"!==F$e.name)&&this._params2dQuick1.push(F$e)}return this._params2dQuick1},F$F.disposeResource=function(){F$e.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},F$F.upload2dQuick2=function(F$e){this.upload(F$e,this._params2dQuick2||this._make2dQuick2())},F$F._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var F$e,F$F=this._params,F$a=0,F$o=F$F.length;F$a<F$o;F$a++)F$e=F$F[F$a],(F$j.isFlash||"size"!==F$e.name)&&this._params2dQuick2.push(F$e)}return this._params2dQuick2},F$E.create=function(F$e,F$F,F$a,F$o){return new F$E(F$e,F$F,F$a,F$o)},F$E}(F$fe),F$ce=function(F$e){function F$F(F$e){this._uint8Array=null,this._uint16Array=null,void 0===F$e&&(F$e=35044),F$F.__super.call(this),this._bufferUsage=F$e,this._bufferType=34963,F$j.isFlash||(this._buffer=new ArrayBuffer(8))}F$O(F$F,"laya.webgl.utils.IndexBuffer2D",F$ie);var F$a=F$F.prototype;return F$a._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},F$a.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},F$a.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},F$a.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},F$F.QuadrangleIB=null,F$F.create=function(F$e){return void 0===F$e&&(F$e=35044),new F$F(F$e)},F$F}(),F$he=function(F$e){function F$a(F$e,F$F){this._floatArray32=null,this._vertexStride=0,F$a.__super.call(this),this._vertexStride=F$e,this._bufferUsage=F$F,this._bufferType=34962,F$j.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}F$O(F$a,"laya.webgl.utils.VertexBuffer2D",F$e);var F$F=F$a.prototype;return F$F.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},F$F.bind=function(F$e){F$e&&F$e._bind(),this._bind()},F$F.insertData=function(F$e,F$F){this.getFloat32Array().set(F$e,F$F),this._upload=!0},F$F.bind_upload=function(F$e){F$e._bind_upload()||F$e._bind(),this._bind_upload()||this._bind()},F$F._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},F$F.disposeResource=function(){F$e.prototype.disposeResource.call(this)},F$F.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},F$o(0,F$F,"vertexStride",function(){return this._vertexStride}),F$a.create=function(F$e,F$F){return void 0===F$F&&(F$F=35048),new F$a(F$e,F$F)},F$a}(F$ie),F$eF=function(F$e){function F$_(F$e,F$F,F$a,F$o,F$E,F$s){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===F$a&&(F$a=6408),void 0===F$o&&(F$o=!0),F$_.__super.call(this,F$e,F$F),F$e){if(this._format=F$a,this._mipmap=F$o,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof F$e)this._url=F$e,this._src=F$e,this._image=new F$q.window.Image,F$F&&(F$F.onload&&(this.onload=F$F.onload),F$F.onerror&&(this.onerror=F$F.onerror),F$F.onCreate&&F$F.onCreate(this)),this._image.crossOrigin=F$e&&0==F$e.indexOf("data:")?null:"",F$e&&(this._image.src=F$e);else if(F$e instanceof ArrayBuffer){this._src=F$F,this._url=this._src;var F$Y=new F$R(F$e);F$Y.readUTFBytes(4),F$Y.readUTFBytes(2),F$Y.getInt16();F$Y.endian="bigEndian",this._w=F$Y.getInt16(),this._h=F$Y.getInt16();F$Y.getInt16(),F$Y.getInt16();this._image=new Uint8Array(F$e,F$Y.pos),this._format=F$Me.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,F$w.enabled&&this._w<F$w.atlasLimitWidth&&this._h<F$w.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(F$e instanceof Uint8Array))return this._src=F$F,this._url=this._src,this._image=F$e.source||F$e,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=F$F,this._url=this._src,this._w=F$E,this._h=F$s,this._image=F$e,this._format=0===F$a?F$e.byteLength/(F$E*F$s)==4?6408:6407:F$a}this._$5__enableMerageInAtlas=!0}}F$O(F$_,"laya.webgl.resource.WebGLImage",F$l);var F$F=F$_.prototype;return F$m.imps(F$F,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$F._init_=function(F$e,F$F){},F$F._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$e=F$Me.mainContext,F$F=this._source=F$e.createTexture(),F$a=F$De.curBindTexTarget,F$o=F$De.curBindTexValue;F$De.bindTexture(F$e,3553,F$F);var F$E=this.minFifter,F$s=this.magFifter,F$Y=this.repeat?10497:33071,F$_=F$g.isPOT(this._w,this._h),F$R=!1;switch(F$_?(this.mipmap?-1!==F$E||(F$E=9987):-1!==F$E||(F$E=9729),-1!==F$s||(F$s=9729),F$e.texParameteri(3553,10241,F$E),F$e.texParameteri(3553,10240,F$s),F$e.texParameteri(3553,10242,F$Y),F$e.texParameteri(3553,10243,F$Y),this.mipmap&&F$e.generateMipmap(3553)):(-1!==F$E||(F$E=9729),-1!==F$s||(F$s=9729),F$e.texParameteri(3553,10241,F$E),F$e.texParameteri(3553,10240,F$s),F$e.texParameteri(3553,10242,33071),F$e.texParameteri(3553,10243,33071)),F$e.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&F$e.pixelStorei(F$e.UNPACK_ALIGNMENT,1),F$e.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&F$e.pixelStorei(F$e.UNPACK_ALIGNMENT,1),F$e.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:F$R=!0,F$e.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case F$Me.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$R=!0,F$e.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}F$e.pixelStorei(37441,!1),F$a&&F$o&&F$De.bindTexture(F$e,F$a,F$o),this.uri||(this.uri=this._url),F$R?this.memorySize=this._image.length:F$_&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},F$F.recreateResource=function(){var F$e=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var F$F=this;this._image=new F$q.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(F$F._needReleaseAgain)return F$F._needReleaseAgain=!1,F$F._image.onload=null,void(F$F._image=null);F$F._allowMerageInAtlas&&F$F._enableMerageInAtlas?(F$e.memorySize=0,F$e._recreateLock=!1):F$F._createWebGlTexture(),F$F.completeCreate()},this._image.src=this._src}},F$F.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&F$Me.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},F$F.onresize=function(){this._w=this._image.width,this._h=this._image.height,F$w.enabled&&this._w<F$w.atlasLimitWidth&&this._h<F$w.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},F$F.clearAtlasSource=function(){this._image=null},F$o(0,F$F,"format",function(){return this._format}),F$o(0,F$F,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(F$e){this._$5__enableMerageInAtlas=F$e}),F$o(0,F$F,"mipmap",function(){return this._mipmap}),F$o(0,F$F,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$o(0,F$F,"atlasSource",function(){return this._image}),F$o(0,F$F,"onload",null,function(F$e){var F$F=this;this._onload=F$e,this._image&&(this._image.onload=null!=this._onload?function(){F$F.onresize(),F$F._onload()}:null)}),F$o(0,F$F,"onerror",null,function(F$e){var F$F=this;this._onerror=F$e,this._image&&(this._image.onerror=null!=this._onerror?function(){F$F._onerror()}:null)}),F$_}();F$m.__init([F$qe,F$d,F$be,F$ye])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}}),function(F$s,F$e,F$o){F$o.un,F$o.uns;var F$E=F$o.static,F$Y=F$o.class,F$_=F$o.getset,F$R=(F$o.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),F$I=laya.utils.ClassUtils,F$n=(laya.events.Event,laya.utils.HTMLChar),F$H=laya.net.Loader,F$g=(laya.display.Node,laya.maths.Rectangle),F$O=laya.renders.Render,F$q=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),F$l=laya.utils.Stat,F$T=laya.display.Text,F$P=laya.resource.Texture,F$j=laya.net.URL,F$$=laya.utils.Utils,F$y=function(){function F$q(){}return F$Y(F$q,"laya.html.utils.HTMLParse"),F$q.parse=function(F$e,F$F,F$a){F$F=(F$F="<root>"+(F$F=F$F.replace(/<br>/g,"<br/>"))+"</root>").replace(F$q.spacePattern,F$q.char255);var F$o=F$$.parseXMLFromString(F$F);F$q._parseXML(F$e,F$o.childNodes[0].childNodes,F$a)},F$q._parseXML=function(F$e,F$F,F$a,F$o){var F$E=0,F$s=0;if(F$F.join||F$F.item)for(F$E=0,F$s=F$F.length;F$E<F$s;++F$E)F$q._parseXML(F$e,F$F[F$E],F$a,F$o);else{var F$Y,F$_,F$R;if(3==F$F.nodeType)return void(F$e instanceof laya.html.dom.HTMLDivElement?(null==F$F.nodeName&&(F$F.nodeName="#text"),F$_=F$F.nodeName.toLowerCase(),0<(F$R=F$F.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$Y=F$I.getInstance(F$_))&&(F$e.addChild(F$Y),F$Y.innerTEXT=F$R.replace(F$q.char255AndOneSpacePattern," "))):0<(F$R=F$F.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$e.innerTEXT=F$R.replace(F$q.char255AndOneSpacePattern," ")));if("#comment"==(F$_=F$F.nodeName.toLowerCase()))return;if(F$Y=F$I.getInstance(F$_)){(F$Y=F$e.addChild(F$Y)).URI=F$a,F$Y.href=F$o;var F$H=F$F.attributes;if(F$H&&0<F$H.length)for(F$E=0,F$s=F$H.length;F$E<F$s;++F$E){var F$g=F$H[F$E],F$n=F$g.nodeName,F$O=F$g.value;F$Y._setAttributes(F$n,F$O)}F$q._parseXML(F$Y,F$F.childNodes,F$a,F$Y.href)}else F$q._parseXML(F$e,F$F.childNodes,F$a,F$o)}},F$q.char255=String.fromCharCode(255),F$q.spacePattern=/&nbsp;|&#160;/g,F$q.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),F$q}(),F$M=function(){function F$z(){}return F$Y(F$z,"laya.html.utils.Layout"),F$z.later=function(F$e){null==F$z._will&&(F$z._will=[],F$o.stage.frameLoop(1,null,function(){if(!(F$z._will.length<1)){for(var F$e=0;F$e<F$z._will.length;F$e++)laya.html.utils.Layout.layout(F$z._will[F$e]);F$z._will.length=0}})),F$z._will.push(F$e)},F$z.layout=function(F$e){if(!F$e||!F$e._style)return null;if(0==(512&F$e._style._type))return null;F$e.getStyle()._type&=-513;var F$F=F$z._multiLineLayout(F$e);return F$O.isConchApp&&F$e.layaoutCallNative&&F$e.layaoutCallNative(),F$F},F$z._multiLineLayout=function(F$e){if(F$T.RightToLeft)return F$z._multiLineLayout2(F$e);var F$F=new Array;F$e._addChildsToLayout(F$F);var F$a,F$o,F$E,F$s,F$Y,F$_=0,F$R=F$F.length,F$H=F$e._getCSSStyle(),F$g=F$H.letterSpacing,F$n=F$H.leading,F$O=F$H.lineHeight,F$q=F$H._widthAuto()||!F$H.wordWrap,F$I=F$q?999999:F$e.width,F$l=(F$e.height,0),F$P=F$H.italic?F$H.fontSize/3:0,F$j=F$H._getAlign(),F$$=F$H._getValign(),F$y=0!==F$$||0!==F$j||0!=F$O,F$M=0,F$D=0,F$m=0,F$b=0,F$L=new Array,F$B=F$L[0]=new F$p,F$v=!1,F$K=!1;F$B.h=0,F$H.italic&&(F$I-=F$H.fontSize/3);var F$V=0,F$G=!0;function F$A(){F$B.y=F$D,F$D+=F$B.h+F$n,0==F$B.h&&(F$D+=F$O),F$B.mWidth=F$V,F$V=0,F$B=new F$p,F$L.push(F$B),F$B.h=0,F$v=!(F$G=!(F$M=0))}for(F$_=0;F$_<F$R;F$_++)if(null!=(F$a=F$F[F$_]))if(F$G=!1,F$a instanceof laya.html.dom.HTMLBrElement)F$A(),F$B.y=F$D;else{if(F$a._isChar()){if((F$s=F$a).isWord)F$v=F$K||"\n"===F$s.char,F$B.wordStartIndex=F$B.elements.length;else{if(F$m=F$s.width+F$s.style.letterSpacin,0<F$L.length&&F$I<F$M+F$m&&0<F$B.wordStartIndex){var F$U;F$U=F$B.elements.length-F$B.wordStartIndex+1,F$B.elements.length=F$B.wordStartIndex,F$_-=F$U,F$A();continue}F$v=!1,F$V+=F$s.width}F$m=F$s.width+F$g,F$b=F$s.height,F$K=!1,(F$v=F$v||F$I<F$M+F$m)&&F$A(),F$B.minTextHeight=Math.min(F$B.minTextHeight,F$a.height)}else F$o=F$a._getCSSStyle(),F$Y=F$a,F$E=F$o.padding,0===F$o._getCssFloat()||(F$y=!0),F$v=F$K||F$o.lineElement,F$m=F$Y.width*F$Y._style._tf.scaleX+F$E[1]+F$E[3]+F$g,F$b=F$Y.height*F$Y._style._tf.scaleY+F$E[0]+F$E[2],F$K=F$o.lineElement,(F$v=F$v||F$I<F$M+F$m&&F$o.wordWrap)&&F$A();F$B.elements.push(F$a),F$B.h=Math.max(F$B.h,F$b),F$a.x=F$M,F$a.y=F$D,F$M+=F$m,F$B.w=F$M-F$g,F$B.y=F$D,F$l=Math.max(F$M+F$P,F$l)}else F$G||(F$M+=F$z.DIV_ELEMENT_PADDING),F$B.wordStartIndex=F$B.elements.length;if(F$D=F$B.y+F$B.h,F$y){var F$r=0,F$Z=F$I;for(F$q&&0<F$e.width&&(F$Z=F$e.width),F$_=0,F$R=F$L.length;F$_<F$R;F$_++)F$L[F$_].updatePos(0,F$Z,F$_,F$r,F$j,F$$,F$O),F$r+=Math.max(F$O,F$L[F$_].h+F$n);F$D=F$r}return F$q&&(F$e.width=F$l),F$D>F$e.height&&(F$e.height=F$D),[F$l,F$D]},F$z._multiLineLayout2=function(F$e){var F$F=new Array;F$e._addChildsToLayout(F$F);var F$a,F$o,F$E,F$s,F$Y,F$_=0,F$R=F$F.length,F$H=F$e._getCSSStyle(),F$g=F$H.letterSpacing,F$n=F$H.leading,F$O=F$H.lineHeight,F$q=F$H._widthAuto()||!F$H.wordWrap,F$I=F$q?999999:F$e.width,F$l=(F$e.height,0),F$P=F$H.italic?F$H.fontSize/3:0,F$j=2-F$H._getAlign(),F$$=F$H._getValign(),F$y=0!==F$$||0!=F$j||0!=F$O,F$M=0,F$D=0,F$m=0,F$b=0,F$L=new Array,F$B=F$L[0]=new F$p,F$v=!1,F$K=!1;F$B.h=0,F$H.italic&&(F$I-=F$H.fontSize/3);var F$V=0,F$G=!0;function F$A(){F$B.y=F$D,F$D+=F$B.h+F$n,0==F$B.h&&(F$D+=F$O),F$B.mWidth=F$V,F$V=0,F$B=new F$p,F$L.push(F$B),F$B.h=0,F$v=!(F$G=!(F$M=0))}for(F$_=0;F$_<F$R;F$_++)if(null!=(F$a=F$F[F$_]))if(F$G=!1,F$a instanceof laya.html.dom.HTMLBrElement)F$A(),F$B.y=F$D;else{if(F$a._isChar()){if((F$s=F$a).isWord)F$v=F$K||"\n"===F$s.char,F$B.wordStartIndex=F$B.elements.length;else{if(0<F$L.length&&F$I<F$M+F$m&&0<F$B.wordStartIndex){var F$U;F$U=F$B.elements.length-F$B.wordStartIndex+1,F$B.elements.length=F$B.wordStartIndex,F$_-=F$U,F$A();continue}F$v=!1,F$V+=F$s.width}F$m=F$s.width+F$g,F$b=F$s.height,F$K=!1,(F$v=F$v||F$I<F$M+F$m)&&F$A(),F$B.minTextHeight=Math.min(F$B.minTextHeight,F$a.height)}else F$o=F$a._getCSSStyle(),F$Y=F$a,F$E=F$o.padding,0===F$o._getCssFloat()||(F$y=!0),F$v=F$K||F$o.lineElement,F$m=F$Y.width*F$Y._style._tf.scaleX+F$E[1]+F$E[3]+F$g,F$b=F$Y.height*F$Y._style._tf.scaleY+F$E[0]+F$E[2],F$K=F$o.lineElement,(F$v=F$v||F$I<F$M+F$m&&F$o.wordWrap)&&F$A();F$B.elements.push(F$a),F$B.h=Math.max(F$B.h,F$b),F$a.x=F$M,F$a.y=F$D,F$M+=F$m,F$B.w=F$M-F$g,F$B.y=F$D,F$l=Math.max(F$M+F$P,F$l)}else F$G||(F$M+=F$z.DIV_ELEMENT_PADDING),F$B.wordStartIndex=F$B.elements.length;if(F$D=F$B.y+F$B.h,F$y){var F$r=0,F$Z=F$I;for(F$_=0,F$R=F$L.length;F$_<F$R;F$_++)F$L[F$_].updatePos(0,F$Z,F$_,F$r,F$j,F$$,F$O),F$r+=Math.max(F$O,F$L[F$_].h+F$n);F$D=F$r}for(F$q&&(F$e.width=F$l),F$D>F$e.height&&(F$e.height=F$D),F$_=0,F$R=F$L.length;F$_<F$R;F$_++)F$L[F$_].revertOrder(F$I);return[F$l,F$D]},F$z._will=null,F$z.DIV_ELEMENT_PADDING=0,F$z}(),F$p=function(){function F$e(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}F$Y(F$e,"laya.html.utils.LayoutLine");var F$F=F$e.prototype;return F$F.updatePos=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_,F$R=0;0<this.elements.length&&(F$R=(F$_=this.elements[this.elements.length-1]).x+F$_.width-this.elements[0].x);var F$H=0,F$g=NaN;1===F$E&&(F$H=(F$F-F$R)/2),2===F$E&&(F$H=F$F-F$R),0===F$Y||0!=F$s||(F$s=1);for(var F$n=0,F$O=this.elements.length;F$n<F$O;F$n++){var F$q=(F$_=this.elements[F$n])._getCSSStyle();switch(0!==F$H&&(F$_.x+=F$H),F$q._getValign()){case 0:F$_.y=F$o;break;case 1:var F$I=0;99999!=this.minTextHeight&&(F$I=this.minTextHeight);var F$l=(F$I+F$Y)/2;F$l=Math.max(F$l,this.h),F$g=(laya.html.dom.HTMLImageElement,F$o+F$l-F$_.height),F$_.y=F$g;break;case 2:F$_.y=F$o+(F$Y-F$_.height)}}},F$F.revertOrder=function(F$e){var F$F;if(0<this.elements.length){var F$a,F$o=0;for(F$a=this.elements.length,F$o=0;F$o<F$a;F$o++)(F$F=this.elements[F$o]).x=F$e-F$F.x-F$F.width}},F$e}(),F$D=function(F$a){function F$F(){this.URI=null,this._href=null,F$F.__super.call(this),this._text=F$F._EMPTYTEXT,this.setStyle(new F$R(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}F$Y(F$F,"laya.html.dom.HTMLElement",F$a);var F$e=F$F.prototype;return F$e.layaoutCallNative=function(){var F$e=0;if(this._childs&&0<(F$e=this._childs.length))for(var F$F=0;F$F<F$e;F$F++)this._childs[F$F].layaoutCallNative&&this._childs[F$F].layaoutCallNative();var F$a=this._getWords();F$a?laya.html.dom.HTMLElement.fillWords(this,F$a,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},F$e.appendChild=function(F$e){return this.addChild(F$e)},F$e._getWords2=function(){var F$e=this._text.text;if(!F$e||0===F$e.length)return null;var F$F,F$a,F$o=0,F$E=0;if(this._text.drawWords)F$a=this._text.drawWords;else{for(F$E=(F$F=F$e.split(" ")).length-1,F$a=[],F$o=0;F$o<F$E;F$o++)F$a.push(F$F[F$o]," ");0<=F$E&&F$a.push(F$F[F$E]),this._text.drawWords=F$a}var F$s,F$Y=this._text.words;if(F$Y&&F$Y.length===F$a.length)return F$Y;null===F$Y&&(this._text.words=F$Y=[]),F$Y.length=F$a.length;var F$_=this.style,F$R=F$_.font;for(F$o=0,F$E=F$a.length;F$o<F$E;F$o++){F$s=F$$.measureText(F$a[F$o],F$R);var F$H=F$Y[F$o]=new F$n(F$a[F$o],F$s.width,F$s.height||F$_.fontSize,F$_);if(1<F$H.char.length&&(F$H.charNum=F$H.char),this.href){var F$g=new F$q;this.addChild(F$g),F$H.setSprite(F$g)}}return F$Y},F$e._getWords=function(){if(!F$T.CharacterCache)return this._getWords2();var F$e=this._text.text;if(!F$e||0===F$e.length)return null;var F$F,F$a=this._text.words;if(F$a&&F$a.length===F$e.length)return F$a;null===F$a&&(this._text.words=F$a=[]),F$a.length=F$e.length;for(var F$o=this.style,F$E=F$o.font,F$s=0,F$Y=F$e.length;F$s<F$Y;F$s++)if(F$F=F$$.measureText(F$e.charAt(F$s),F$E)){var F$_=F$a[F$s]=new F$n(F$e.charAt(F$s),F$F.width,F$F.height||F$o.fontSize,F$o);if(this.href){var F$R=new F$q;this.addChild(F$R),F$_.setSprite(F$R)}}else console.warn("_getWords size is null"+F$e.charAt(F$s),F$E);return F$a},F$e.showLinkSprite=function(){var F$e=this._text.words;if(F$e)for(var F$F,F$a,F$o=[],F$E=0;F$E<F$e.length;F$E++)F$a=F$e[F$E],(F$F=new F$q).graphics.drawRect(0,0,F$a.width,F$a.height,"#ff0000"),F$F.width=F$a.width,F$F.height=F$a.height,this.addChild(F$F),F$o.push(F$F)},F$e._layoutLater=function(){var F$e=this.style;512&F$e._type||(F$e.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&F$e.block?(F$M.later(this),F$e._type|=512):this.parent&&this.parent._layoutLater())},F$e._setAttributes=function(F$e,F$F){switch(F$e){case"style":return void this.style.cssText(F$F);case"class":return void(this.className=F$F)}F$a.prototype._setAttributes.call(this,F$e,F$F)},F$e.updateHref=function(){if(null!=this._href){var F$e=this._getWords();if(F$e)for(var F$F,F$a,F$o=0;F$o<F$e.length;F$o++)(F$a=(F$F=F$e[F$o]).getSprite())&&(F$a.size(F$F.width,F$F.height),F$a.on("click",this,this.onLinkHandler))}},F$e.onLinkHandler=function(F$e){switch(F$e.type){case"click":for(var F$F=this;F$F;)F$F.event("link",[this.href]),F$F=F$F.parent}},F$e.formatURL=function(F$e){return this.URI?F$j.formatURL(F$e,this.URI?this.URI.path:null):F$e},F$_(0,F$e,"href",function(){return this._href},function(F$e){null!=(this._href=F$e)&&(this._getCSSStyle().underLine=1,this.updateHref())}),F$_(0,F$e,"color",null,function(F$e){this.style.color=F$e}),F$_(0,F$e,"onClick",null,function(F$e){F$o._runScript("fn=function(event){"+F$e+";}"),this.on("click",this,void 0)}),F$_(0,F$e,"id",null,function(F$e){F$m.document.setElementById(F$e,this)}),F$_(0,F$e,"innerTEXT",function(){return this._text.text},function(F$e){this.text=F$e}),F$_(0,F$e,"style",function(){return this._style}),F$_(0,F$e,"text",function(){return this._text.text},function(F$e){this._text==F$F._EMPTYTEXT?this._text={text:F$e,words:null}:(this._text.text=F$e,this._text.words&&(this._text.words.length=0)),F$O.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),F$_(0,F$e,"parent",F$a.prototype._$get_parent,function(F$e){if(F$e instanceof laya.html.dom.HTMLElement){var F$F=F$e;this.URI||(this.URI=F$F.URI),this.style.inherit(F$F.style)}F$o.superSet(F$q,this,"parent",F$e)}),F$_(0,F$e,"className",null,function(F$e){this.style.attrs(F$m.document.styleSheets["."+F$e])}),F$F.fillWords=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$e.graphics.clear();for(var F$_=0,F$R=F$F.length;F$_<F$R;F$_++){var F$H=F$F[F$_];F$e.graphics.fillText(F$H.char,F$H.x+F$a,F$H.y+F$o,F$E,F$s,"left",F$Y)}},F$F._EMPTYTEXT={text:null,words:null},F$F}(F$q),F$F=(function(F$e){function F$F(){F$F.__super.call(this),this.style.lineElement=!0,this.style.block=!0}F$Y(F$F,"laya.html.dom.HTMLBrElement",F$D)}(),function(F$e){function F$F(){this.contextHeight=NaN,this.contextWidth=NaN,F$F.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}F$Y(F$F,"laya.html.dom.HTMLDivElement",F$e);var F$a=F$F.prototype;return F$a.appendHTML=function(F$e){F$y.parse(this,F$e,this.URI),this.layout()},F$a._addChildsToLayout=function(F$F){var F$e=this._getWords();if(null==F$e&&0==this._childs.length)return!1;F$e&&F$e.forEach(function(F$e){F$F.push(F$e)});for(var F$a=!0,F$o=0,F$E=this._childs.length;F$o<F$E;F$o++){var F$s=this._childs[F$o];F$a?F$a=!1:F$F.push(null),F$s._addToLayout(F$F)}return!0},F$a._addToLayout=function(F$e){this.layout()},F$a.layout=function(){if(this.style){this.style._type|=512;var F$e=F$M.layout(this);if(F$e){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new F$g);var F$F=this._$P.mHtmlBounds;F$F.x=F$F.y=0,F$F.width=this.contextWidth=F$e[0],F$F.height=this.contextHeight=F$e[1],this.setBounds(F$F)}}},F$_(0,F$a,"height",function(){return this._height?this._height:this.contextHeight},F$e.prototype._$set_height),F$_(0,F$a,"innerHTML",null,function(F$e){this.destroyChildren(),this.appendHTML(F$e)}),F$_(0,F$a,"width",function(){return this._width?this._width:this.contextWidth},function(F$e){var F$F=!1;F$F=0===F$e?F$e!=this._width:F$e!=this.width,F$o.superSet(F$D,this,"width",F$e),F$F&&this.layout()}),F$F}(F$D)),F$m=function(F$e){function F$F(){this.all=new Array,this.styleSheets=F$R.styleSheets,F$F.__super.call(this)}F$Y(F$F,"laya.html.dom.HTMLDocument",F$D);var F$a=F$F.prototype;return F$a.getElementById=function(F$e){return this.all[F$e]},F$a.setElementById=function(F$e,F$F){this.all[F$e]=F$F},F$E(F$F,["document",function(){return this.document=new F$F}]),F$F}();(function(F$e){function F$F(){this._tex=null,this._url=null,this._renderArgs=[],F$F.__super.call(this),this.style.block=!0}F$Y(F$F,"laya.html.dom.HTMLImageElement",F$D);var F$a=F$F.prototype;F$a._addToLayout=function(F$e){!this._style.absolute&&F$e.push(this)},F$a.render=function(F$e,F$F,F$a){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(F$l.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,F$e.ctx.drawTexture2(F$F,F$a,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},F$a.layaoutCallNative=function(){var F$e=0;if(this._childs&&0<(F$e=this._childs.length))for(var F$F=0;F$F<F$e;F$F++)this._childs[F$F].layaoutCallNative&&this._childs[F$F].layaoutCallNative()},F$_(0,F$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$e){this._width!==F$e&&(this._width=F$e,this._style.width=F$e,this.repaint())}),F$_(0,F$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$e){this._height!==F$e&&(this._height=F$e,this._style.height=F$e,this.repaint())}),F$a.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),F$H.clearCache(this,this._url),this._tex=null),F$D.prototype.destroy.call(this)},F$a.onloaded=function(){var F$e=this._style;F$e&&!F$e.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),F$e&&!F$e.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),F$O.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},F$a._loadImageComplete=function(F$e,F$F,F$a){if(!this._destroyed)if(null!=F$a)if(F$a instanceof ArrayBuffer){var F$o=new DataView(F$a);new laya.webgl.resource.WebGLImage(new Uint8Array(F$a,8),F$e,0,!1,F$o.getUint32(0),F$o.getUint32(4));this.onloaded()}else if(F$a instanceof F$P)F$H.imgMgrSet[F$e]=F$F,F$s.imgMgrLock(F$e,F$H.imgMgrSet[F$e]),this._url=F$e,this._tex=F$a,F$H.keepCache(this,F$e),F$H.cacheRes(F$e,this._tex),this.onloaded();else{var F$E=-1!=F$e.indexOf(".png",F$e.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(F$a,F$e,F$E,!1,F$a.width,F$a.height);this.onloaded()}else this.event("error","Load image failed")},F$_(0,F$a,"src",null,function(F$e){(F$e=this.formatURL(F$e),this._url!=F$e)&&(null!=this._tex&&(F$H.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=F$e,(this._tex=F$H.getRes(F$e))?(F$H.keepCache(this,F$e),this.onloaded()):F$s.imgMgrLoad(F$e,this._loadImageComplete.bind(this),2,!1))})})(),function(F$e){function F$F(){this.type=null,F$F.__super.call(this),this.visible=!1}F$Y(F$F,"laya.html.dom.HTMLLinkElement",F$e);var F$a=F$F.prototype;F$a._onload=function(F$e){switch(this.type){case"text/css":F$R.parseCSS(F$e,this.URI)}},F$_(0,F$a,"href",F$e.prototype._$get_href,function(F$e){var F$F=this;F$e=this.formatURL(F$e),this.URI=new F$j(F$e);var F$a=new F$H;F$a.once("complete",null,function(F$e){F$F._onload(F$e)}),F$a.load(F$e,"text")}),F$F._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(F$D),function(F$e){function F$F(){F$F.__super.call(this),this.visible=!1}F$Y(F$F,"laya.html.dom.HTMLStyleElement",F$e),F$_(0,F$F.prototype,"text",F$e.prototype._$get_text,function(F$e){F$R.parseCSS(F$e,null)})}(F$D),function(F$e){function F$F(){F$F.__super.call(this),this._getCSSStyle().valign="middle"}F$Y(F$F,"laya.html.dom.HTMLIframeElement",F$e),F$_(0,F$F.prototype,"href",F$e.prototype._$get_href,function(F$a){var F$o=this;F$a=this.formatURL(F$a);var F$e=new F$H;F$e.once("complete",null,function(F$e){var F$F=F$o.URI;F$o.URI=new F$j(F$a),F$o.innerHTML=F$e,!F$F||(F$o.URI=F$F)}),F$e.load(F$a,"text")})}(F$F)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}}),function(F$E,F$e,F$l){F$l.un,F$l.uns;var F$o=F$l.static,F$s=F$l.class,F$Y=F$l.getset,F$a=(F$l.__newvec,laya.display.Animation),F$P=(laya.utils.Browser,laya.utils.ClassUtils),F$_=laya.filters.ColorFilter,F$R=laya.utils.Ease,F$H=laya.events.Event,F$g=(laya.events.EventDispatcher,laya.display.css.Font),F$n=laya.display.FrameAnimation,F$F=laya.display.Graphics,F$O=laya.utils.Handler,F$q=laya.display.Input,F$$=laya.net.Loader,F$I=(laya.display.Node,laya.maths.Point),F$j=laya.maths.Rectangle,F$y=laya.renders.Render,F$M=laya.display.Sprite,F$D=laya.display.Text,F$m=laya.resource.Texture,F$b=laya.utils.Tween,F$L=laya.utils.Utils,F$B=laya.utils.WeakObject;F$l.interface("laya.ui.IItem"),F$l.interface("laya.ui.ISelect"),F$l.interface("laya.ui.IRender"),F$l.interface("laya.ui.IComponent"),F$l.interface("laya.ui.IBox","IComponent");var F$v=function(){function F$e(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return F$s(F$e,"laya.ui.LayoutStyle"),F$o(F$e,["EMPTY",function(){return this.EMPTY=new F$e}]),F$e}(),F$K=function(){function F$e(){}return F$s(F$e,"laya.ui.Styles"),F$e.labelColor="#000000",F$e.buttonStateNum=3,F$e.scrollBarMinNum=15,F$e.scrollBarDelayTime=500,F$o(F$e,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),F$e}(),F$V=function(){function F$E(){}return F$s(F$E,"laya.ui.UIUtils"),F$E.fillArray=function(F$e,F$F,F$a){var F$o=F$e.concat();if(F$F)for(var F$E=F$F.split(","),F$s=0,F$Y=Math.min(F$o.length,F$E.length);F$s<F$Y;F$s++){var F$_=F$E[F$s];F$o[F$s]="true"==F$_||"false"!=F$_&&F$_,null!=F$a&&(F$o[F$s]=F$a(F$_))}return F$o},F$E.toColor=function(F$e){return F$L.toHexColor(F$e)},F$E.gray=function(F$e,F$F){void 0===F$F&&(F$F=!0),F$F?F$E.addFilter(F$e,F$E.grayFilter):F$E.clearFilter(F$e,F$_)},F$E.addFilter=function(F$e,F$F){var F$a=F$e.filters||[];F$a.push(F$F),F$e.filters=F$a},F$E.clearFilter=function(F$e,F$F){var F$a=F$e.filters;if(null!=F$a&&0<F$a.length){for(var F$o=F$a.length-1;-1<F$o;F$o--){var F$E=F$a[F$o];F$l.__typeof(F$E,F$F)&&F$a.splice(F$o,1)}F$e.filters=F$a}},F$E._getReplaceStr=function(F$e){return F$E.escapeSequence[F$e]},F$E.adptString=function(F$e){return F$e.replace(/\\(\w)/g,F$E._getReplaceStr)},F$E.getBindFun=function(F$e){var F$F=F$E._funMap.get(F$e);if(null==F$F){var F$a='"'+F$e+'"',F$o="(function(data){if(data==null)return;with(data){try{\nreturn "+(F$a=F$a.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";F$F=F$l._runScript(F$o),F$E._funMap.set(F$e,F$F)}return F$F},F$o(F$E,["grayFilter",function(){return this.grayFilter=new F$_([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new F$B}]),F$E}(),F$G=function(){function F$e(){}return F$s(F$e,"UIConfig"),F$e.touchScrollEnable=!0,F$e.mouseWheelEnable=!0,F$e.showButtons=!0,F$e.popupBgColor="#000000",F$e.popupBgAlpha=.5,F$e.closeDialogOnSide=!0,F$e}(),F$A=function(F$a){function F$j(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,F$j.__super.call(this),this._weakKeys=[]}F$s(F$j,"laya.ui.AutoBitmap",F$a);var F$e=F$j.prototype;return F$e.destroy=function(){if(F$$.clearObject(this,this._weakKey),this._weakKeys){for(var F$e=0,F$F=this._weakKeys.length;F$e<F$F;++F$e)F$$.clearObject(this,this._weakKeys[F$e]);this._weakKeys=null}F$a.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},F$e._setChanged=function(){this._isChanged||(this._isChanged=!0,F$l.timer.callLater(this,this.changeSource))},F$e.changeSource=function(){this._isChanged=!1;var F$e=this._source;if(F$e&&F$e.bitmap){var F$F=this.width,F$a=this.height,F$o=this._sizeGrid,F$E=F$e.sourceWidth,F$s=F$e.sourceHeight;if(!F$o||F$E===F$F&&F$s===F$a)this.cleanByTexture(F$e,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,F$F,F$a);else{F$$.clearObject(this,this._weakKey),F$e.$_GID||(F$e.$_GID=F$L.getGID());var F$Y=F$e.$_GID+"."+F$F+"."+F$a+"."+F$o.join("."),F$_=F$$.findObject(F$Y);if(F$L.isOKCmdList(F$_))return this._weakKey=F$Y,F$$.keepObject(this,this._weakKey),void(this.cmds=F$_);this.clear();var F$R,F$H,F$g=F$o[0],F$n=F$o[1],F$O=F$o[2],F$q=F$o[3],F$I=F$o[4],F$l=!1;if(F$F==F$E&&(F$q=F$n=0),F$a==F$s&&(F$g=F$O=0),F$F<F$q+F$n){var F$P=F$F;F$l=!0,F$F=F$q+F$n,this.save(),this.clipRect(0,0,F$P,F$a)}F$q&&F$g&&(F$R=F$j.getTexture(F$e,0,0,F$q,F$g),F$H=this._weakKeys[0],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[0]=F$R.weakKey),this.drawTexture(F$R,0,0,F$q,F$g)):(F$$.clearObject(this,F$H),this._weakKeys[0]="")),F$n&&F$g&&(F$R=F$j.getTexture(F$e,F$E-F$n,0,F$n,F$g),F$H=this._weakKeys[1],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[1]=F$R.weakKey),this.drawTexture(F$R,F$F-F$n,0,F$n,F$g)):(F$$.clearObject(this,F$H),this._weakKeys[1]="")),F$q&&F$O&&(F$R=F$j.getTexture(F$e,0,F$s-F$O,F$q,F$O),F$H=this._weakKeys[2],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[2]=F$R.weakKey),this.drawTexture(F$R,0,F$a-F$O,F$q,F$O)):(F$$.clearObject(this,F$H),this._weakKeys[2]="")),F$n&&F$O&&(F$R=F$j.getTexture(F$e,F$E-F$n,F$s-F$O,F$n,F$O),F$H=this._weakKeys[3],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[3]=F$R.weakKey),this.drawTexture(F$R,F$F-F$n,F$a-F$O,F$n,F$O)):(F$$.clearObject(this,F$H),this._weakKeys[3]="")),F$g&&(F$R=F$j.getTexture(F$e,F$q,0,F$E-F$q-F$n,F$g),F$H=this._weakKeys[4],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[4]=F$R.weakKey),this.drawBitmap(F$I,F$R,F$q,0,F$F-F$q-F$n,F$g)):(F$$.clearObject(this,F$H),this._weakKeys[4]="")),F$O&&(F$R=F$j.getTexture(F$e,F$q,F$s-F$O,F$E-F$q-F$n,F$O),F$H=this._weakKeys[5],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[5]=F$R.weakKey),this.drawBitmap(F$I,F$R,F$q,F$a-F$O,F$F-F$q-F$n,F$O)):(F$$.clearObject(this,F$H),this._weakKeys[5]="")),F$q&&(F$R=F$j.getTexture(F$e,0,F$g,F$q,F$s-F$g-F$O),F$H=this._weakKeys[6],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[6]=F$R.weakKey),this.drawBitmap(F$I,F$R,0,F$g,F$q,F$a-F$g-F$O)):(F$$.clearObject(this,F$H),this._weakKeys[6]="")),F$n&&(F$R=F$j.getTexture(F$e,F$E-F$n,F$g,F$n,F$s-F$g-F$O),F$H=this._weakKeys[7],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[7]=F$R.weakKey),this.drawBitmap(F$I,F$R,F$F-F$n,F$g,F$n,F$a-F$g-F$O)):(F$$.clearObject(this,F$H),this._weakKeys[7]="")),F$R=F$j.getTexture(F$e,F$q,F$g,F$E-F$q-F$n,F$s-F$g-F$O),F$H=this._weakKeys[8],F$R?(F$H!=F$R.weakKey&&(F$$.clearObject(this,F$H),F$$.keepObject(this,F$R.weakKey),this._weakKeys[8]=F$R.weakKey),this.drawBitmap(F$I,F$R,F$q,F$g,F$F-F$q-F$n,F$a-F$g-F$O)):(F$$.clearObject(this,F$H),this._weakKeys[8]=""),F$l&&this.restore(),this.autoCacheCmd&&!F$y.isConchApp&&(F$$.saveObject(F$Y,this.cmds,null),this._weakKey=F$Y,F$$.keepObject(this,this._weakKey))}this._repaint()}},F$e.drawBitmap=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=0),F$E<.1||F$s<.1||(!F$e||F$F.width==F$E&&F$F.height==F$s?this.drawTexture(F$F,F$a,F$o,F$E,F$s):this.fillTexture(F$F,F$a,F$o,F$E,F$s))},F$e.clear=function(F$e){void 0===F$e&&(F$e=!0),F$a.prototype.clear.call(this,!1)},F$Y(0,F$e,"sizeGrid",function(){return this._sizeGrid},function(F$e){this._sizeGrid=F$e,this._setChanged()}),F$Y(0,F$e,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(F$e){this._width!=F$e&&(this._width=F$e,this._setChanged())}),F$Y(0,F$e,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(F$e){this._height!=F$e&&(this._height=F$e,this._setChanged())}),F$Y(0,F$e,"source",function(){return this._source},function(F$e){F$e?(this._source=F$e,this._setChanged()):(this._source=null,this.clear())}),F$j.getTexture=function(F$e,F$F,F$a,F$o,F$E){F$o<=0&&(F$o=1),F$E<=0&&(F$E=1),F$e.$_GID||(F$e.$_GID=F$L.getGID());var F$s=F$e.$_GID+"."+F$F+"."+F$a+"."+F$o+"."+F$E,F$Y=F$$.findObject(F$s);if((!F$Y||!F$Y.source)&&(F$Y=F$m.createFromTexture(F$e,F$F,F$a,F$o,F$E))){if(F$e.alphaTexture){var F$_=F$e.width/F$e.alphaTexture.width;F$Y.alphaTexture=F$m.createFromTexture(F$e.alphaTexture,F$F/F$_,F$a/F$_,F$o/F$_,F$E/F$_)}F$$.saveObject(F$s,F$Y),F$Y.weakKey=F$s}return F$Y},F$j}(F$F),F$U=(function(F$e){function F$F(){F$F.__super.call(this)}F$s(F$F,"laya.ui.UIEvent",F$H),F$F.SHOW_TIP="showtip",F$F.HIDE_TIP="hidetip"}(),function(F$F){function F$e(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,F$e.__super.call(this),this._layout=F$v.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}F$s(F$e,"laya.ui.Component",F$F);var F$a=F$e.prototype;return F$l.imps(F$a,{"laya.ui.IComponent":!0}),F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},F$a.preinitialize=function(){},F$a.createChildren=function(){},F$a.initialize=function(){},F$a.callLater=function(F$e,F$F){F$l.timer.callLater(this,F$e,F$F)},F$a.runCallLater=function(F$e){F$l.timer.runCallLater(this,F$e)},F$a.commitMeasure=function(){},F$a.changeSize=function(){this.event("resize")},F$a.getLayout=function(){return this._layout===F$v.EMPTY&&(this._layout=new F$v),this._layout},F$a._setLayoutEnabled=function(F$e){this._layout&&this._layout.enable!=F$e&&(this._layout.enable=F$e,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},F$a.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},F$a.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},F$a.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},F$a.resetLayoutX=function(){var F$e=this._layout;if(isNaN(F$e.anchorX)||(this.pivotX=F$e.anchorX*this.width),this.layoutEnabled){var F$F=this.parent;F$F&&(isNaN(F$e.centerX)?isNaN(F$e.left)?isNaN(F$e.right)||(this.x=Math.round(F$F.width-this.displayWidth-F$e.right+this.pivotX*this.scaleX)):(this.x=Math.round(F$e.left+this.pivotX*this.scaleX),isNaN(F$e.right)||(this.width=(F$F._width-F$e.left-F$e.right)/(this.scaleX||.01))):this.x=Math.round(.5*(F$F.width-this.displayWidth)+F$e.centerX+this.pivotX*this.scaleX))}},F$a.resetLayoutY=function(){var F$e=this._layout;if(isNaN(F$e.anchorY)||(this.pivotY=F$e.anchorY*this.height),this.layoutEnabled){var F$F=this.parent;F$F&&(isNaN(F$e.centerY)?isNaN(F$e.top)?isNaN(F$e.bottom)||(this.y=Math.round(F$F.height-this.displayHeight-F$e.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(F$e.top+this.pivotY*this.scaleY),isNaN(F$e.bottom)||(this.height=(F$F._height-F$e.top-F$e.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(F$F.height-this.displayHeight)+F$e.centerY+this.pivotY*this.scaleY))}},F$a.onMouseOver=function(F$e){F$l.stage.event("showtip",this._toolTip)},F$a.onMouseOut=function(F$e){F$l.stage.event("hidetip",this._toolTip)},F$Y(0,F$a,"displayWidth",function(){return this.width*this.scaleX}),F$Y(0,F$a,"width",function(){return this._width?this._width:this.measureWidth},function(F$e){this._width!=F$e&&(this._width=F$e,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),F$Y(0,F$a,"measureWidth",function(){var F$e=0;this.commitMeasure();for(var F$F=this.numChildren-1;-1<F$F;F$F--){var F$a=this.getChildAt(F$F);F$a.visible&&(F$e=Math.max(F$a.x+F$a.width*F$a.scaleX,F$e))}return F$e}),F$Y(0,F$a,"displayHeight",function(){return this.height*this.scaleY}),F$Y(0,F$a,"height",function(){return this._height?this._height:this.measureHeight},function(F$e){this._height!=F$e&&(this._height=F$e,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),F$Y(0,F$a,"dataSource",function(){return this._dataSource},function(F$e){for(var F$F in this._dataSource=F$e,this._dataSource)this.hasOwnProperty(F$F)&&"function"!=typeof this[F$F]&&(this[F$F]=this._dataSource[F$F])}),F$Y(0,F$a,"scaleY",F$F.prototype._$get_scaleY,function(F$e){F$l.superGet(F$M,this,"scaleY")!=F$e&&(F$l.superSet(F$M,this,"scaleY",F$e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),F$Y(0,F$a,"measureHeight",function(){var F$e=0;this.commitMeasure();for(var F$F=this.numChildren-1;-1<F$F;F$F--){var F$a=this.getChildAt(F$F);F$a.visible&&(F$e=Math.max(F$a.y+F$a.height*F$a.scaleY,F$e))}return F$e}),F$Y(0,F$a,"scaleX",F$F.prototype._$get_scaleX,function(F$e){F$l.superGet(F$M,this,"scaleX")!=F$e&&(F$l.superSet(F$M,this,"scaleX",F$e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),F$Y(0,F$a,"top",function(){return this._layout.top},function(F$e){F$e!=this._layout.top&&(this.getLayout().top=F$e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$Y(0,F$a,"bottom",function(){return this._layout.bottom},function(F$e){F$e!=this._layout.bottom&&(this.getLayout().bottom=F$e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$Y(0,F$a,"left",function(){return this._layout.left},function(F$e){F$e!=this._layout.left&&(this.getLayout().left=F$e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$Y(0,F$a,"right",function(){return this._layout.right},function(F$e){F$e!=this._layout.right&&(this.getLayout().right=F$e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$Y(0,F$a,"centerX",function(){return this._layout.centerX},function(F$e){F$e!=this._layout.centerX&&(this.getLayout().centerX=F$e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$Y(0,F$a,"centerY",function(){return this._layout.centerY},function(F$e){F$e!=this._layout.centerY&&(this.getLayout().centerY=F$e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$Y(0,F$a,"anchorX",function(){return this._layout.anchorX},function(F$e){F$e!=this._layout.anchorX&&(this.getLayout().anchorX=F$e,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$Y(0,F$a,"anchorY",function(){return this._layout.anchorY},function(F$e){F$e!=this._layout.anchorY&&(this.getLayout().anchorY=F$e,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$Y(0,F$a,"tag",function(){return this._tag},function(F$e){this._tag=F$e}),F$Y(0,F$a,"toolTip",function(){return this._toolTip},function(F$e){this._toolTip!=F$e&&(null!=(this._toolTip=F$e)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),F$Y(0,F$a,"comXml",function(){return this._comXml},function(F$e){this._comXml=F$e}),F$Y(0,F$a,"gray",function(){return this._gray},function(F$e){F$e!==this._gray&&(this._gray=F$e,F$V.gray(this,F$e))}),F$Y(0,F$a,"disabled",function(){return this._disabled},function(F$e){F$e!==this._disabled&&(this.gray=this._disabled=F$e,this.mouseEnabled=!F$e)}),F$e}(F$M)),F$r=function(F$e){function F$F(){this.lockLayer=null,this.popupEffect=function(F$e){F$e.scale(1,1),F$b.from(F$e,{x:F$l.stage.width/2,y:F$l.stage.height/2,scaleX:0,scaleY:0},300,F$R.backOut,F$O.create(this,this.doOpen,[F$e]))},this.closeEffect=function(F$e,F$F){F$b.to(F$e,{x:F$l.stage.width/2,y:F$l.stage.height/2,scaleX:0,scaleY:0},300,F$R.strongOut,F$O.create(this,this.doClose,[F$e,F$F]))},F$F.__super.call(this),this.maskLayer=new F$M,this.popupEffectHandler=F$O.create(this,this.popupEffect,null,!1),this.closeEffectHandler=F$O.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,F$l.stage.addChild(this),F$l.stage.on("resize",this,this._onResize),F$G.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}F$s(F$F,"laya.ui.DialogManager",F$M);var F$a=F$F.prototype;return F$a._closeOnSide=function(){var F$e=this.getChildAt(this.numChildren-1);F$e instanceof laya.ui.Dialog&&F$e.close("side")},F$a.setLockView=function(F$e){this.lockLayer||(this.lockLayer=new F$Z,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(F$l.stage.width,F$l.stage.height)),this.lockLayer.removeChildren(),F$e&&(F$e.centerX=F$e.centerY=0,this.lockLayer.addChild(F$e))},F$a._onResize=function(F$e){var F$F=this.maskLayer.width=F$l.stage.width,F$a=this.maskLayer.height=F$l.stage.height;this.lockLayer&&this.lockLayer.size(F$F,F$a),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,F$F,F$a,F$G.popupBgColor),this.maskLayer.alpha=F$G.popupBgAlpha;for(var F$o=this.numChildren-1;-1<F$o;F$o--){var F$E=this.getChildAt(F$o);F$E.popupCenter&&this._centerDialog(F$E)}},F$a._centerDialog=function(F$e){F$e.x=Math.round((F$l.stage.width-F$e.width>>1)+F$e.pivotX),F$e.y=Math.round((F$l.stage.height-F$e.height>>1)+F$e.pivotY)},F$a.open=function(F$e,F$F,F$a){void 0===F$F&&(F$F=!1),void 0===F$a&&(F$a=!1),F$F&&this._closeAll(),F$e.popupCenter&&this._centerDialog(F$e),this.addChild(F$e),(F$e.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),F$a&&null!=F$e.popupEffect?F$e.popupEffect.runWith(F$e):this.doOpen(F$e),this.event("open")},F$a.doOpen=function(F$e){F$e.onOpened()},F$a.lock=function(F$e){this.lockLayer&&(F$e?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},F$a.close=function(F$e,F$F,F$a){void 0===F$a&&(F$a=!1),F$a&&null!=F$e.closeEffect?F$e.closeEffect.runWith([F$e,F$F]):this.doClose(F$e,F$F),this.event("close")},F$a.doClose=function(F$e,F$F){F$e.removeSelf(),F$e.isModal&&this._checkMask(),F$e.closeHandler&&F$e.closeHandler.runWith(F$F),F$e.onClosed(F$F)},F$a.closeAll=function(){this._closeAll(),this.event("close")},F$a._closeAll=function(){for(var F$e=this.numChildren-1;-1<F$e;F$e--){var F$F=this.getChildAt(F$e);F$F&&null!=F$F.close&&this.doClose(F$F)}},F$a.getDialogsByGroup=function(F$e){for(var F$F=[],F$a=this.numChildren-1;-1<F$a;F$a--){var F$o=this.getChildAt(F$a);F$o&&F$o.group===F$e&&F$F.push(F$o)}return F$F},F$a.closeByGroup=function(F$e){for(var F$F=[],F$a=this.numChildren-1;-1<F$a;F$a--){var F$o=this.getChildAt(F$a);F$o&&F$o.group===F$e&&(F$o.close(),F$F.push(F$o))}return F$F},F$a._checkMask=function(){this.maskLayer.removeSelf();for(var F$e=this.numChildren-1;-1<F$e;F$e--){var F$F=this.getChildAt(F$e);if(F$F&&F$F.isModal)return void this.addChildAt(this.maskLayer,F$e)}},F$F}(),F$Z=function(F$e){function F$F(){F$F.__super.call(this)}F$s(F$F,"laya.ui.Box",F$e);var F$a=F$F.prototype;return F$l.imps(F$a,{"laya.ui.IBox":!0}),F$Y(0,F$a,"dataSource",F$e.prototype._$get_dataSource,function(F$e){for(var F$F in this._dataSource=F$e){var F$a=this.getChildByName(F$F);F$a?F$a.dataSource=F$e[F$F]:this.hasOwnProperty(F$F)&&"function"!=typeof this[F$F]&&(this[F$F]=F$e[F$F])}}),F$F}(F$U),F$z=function(F$F){function F$a(F$e,F$F){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,F$a.__super.call(this),this._labelColors=F$K.buttonLabelColors,this._stateNum=F$K.buttonStateNum,void 0===F$F&&(F$F=""),this.skin=F$e,this.label=F$F}F$s(F$a,"laya.ui.Button",F$F);var F$e=F$a.prototype;return F$l.imps(F$e,{"laya.ui.ISelect":!0}),F$e.destroy=function(F$e){this.clearEvent(),F$$.clearCache(this,this._skin),F$$.clearObject(this,this._weakKey),void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(F$e),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},F$e.clearEvent=function(){this._skin&&F$E.atalsNotify&&F$E.atalsNotify.off(this._skin,this,this._setBtnSource)},F$e.createChildren=function(){this.graphics=this._bitmap=new F$A},F$e.createText=function(){this._text||(this._text=new F$D,this._text.overflow=F$D.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},F$e.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},F$e.onMouse=function(F$e){if(!1!==this.toggle||!this._selected)return"click"===F$e.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=F$a.stateMap[F$e.type]))},F$e.changeClips=function(){var F$e=F$$.getRes(this._skin);if(F$e)if(this._skin&&""!=this._skin){F$$.clearObject(this,this._weakKey);var F$F=F$e.sourceWidth,F$a=F$e.sourceHeight/this._stateNum;F$e.$_GID||(F$e.$_GID=F$L.getGID());var F$o=F$e.$_GID+"-"+this._stateNum,F$E=F$$.findObject(F$o);if(F$L.isOkTextureList(F$E)||(F$E=null),F$E)this._weakKey=F$o,F$$.keepObject(this,this._weakKey),this._sources=F$E;else{if(this._sources=[],1===this._stateNum)this._sources.push(F$e);else for(var F$s=0;F$s<this._stateNum;F$s++){var F$Y=F$m.createFromTexture(F$e,0,F$a*F$s,F$F,F$a);if(F$e.alphaTexture){var F$_=F$e.width/F$e.alphaTexture.width;F$Y.alphaTexture=F$m.createFromTexture(F$e.alphaTexture,0/F$_,F$a*F$s/F$_,F$F/F$_,F$a/F$_)}this._sources.push(F$Y)}F$$.saveObject(F$o,this._sources),this._weakKey=F$o,F$$.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||F$F,this._bitmap.height=this._height||F$a,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=F$F)}else console.warn("lose skin ",this._skin,this.name,this.__className)},F$e.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var F$e=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[F$e]),this.label&&(this._text.color=this._labelColors[F$e],this._strokeColors&&(this._text.strokeColor=this._strokeColors[F$e]))},F$e._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},F$Y(0,F$e,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(F$e){this.createText(),this._text.strokeColor=F$e}),F$Y(0,F$e,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){if(this._skin!=F$e)if(this.clearEvent(),F$$.clearCache(this,this._skin),this._skin=F$e,F$$.keepCache(this,this._skin),F$$.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var F$F=F$E.resAtalsObj&&F$E.resAtalsObj[this._skin];F$F?(F$E.atalsNotify&&F$E.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=F$F.sourceW),0==this.height&&(this.height=F$F.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),F$e._setBtnSource=function(F$e,F$F){F$e===this._skin&&F$F&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},F$Y(0,F$e,"state",function(){return this._state},function(F$e){this._state!=F$e&&(this._state=F$e,this._setStateChanged())}),F$Y(0,F$e,"text",function(){return this.createText(),this._text}),F$Y(0,F$e,"stateNum",function(){return this._stateNum},function(F$e){"string"==typeof F$e&&(F$e=parseInt(F$e)),this._stateNum!=F$e&&(this._stateNum=F$e<1?1:3<F$e?3:F$e,this.callLater(this.changeClips))}),F$Y(0,F$e,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(F$e){this._strokeColors=F$V.fillArray(F$K.buttonLabelColors,F$e,String),this._setStateChanged()}),F$Y(0,F$e,"labelColors",function(){return this._labelColors.join(",")},function(F$e){this._labelColors=F$V.fillArray(F$K.buttonLabelColors,F$e,String),this._setStateChanged()}),F$Y(0,F$e,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),F$Y(0,F$e,"label",function(){return this._text?this._text.text:null},function(F$e){(this._text||F$e)&&(this.createText(),this._text.text!=F$e&&(F$e&&!this._text.parent&&this.addChild(this._text),this._text.text=(F$e+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),F$Y(0,F$e,"selected",function(){return this._selected},function(F$e){this._selected!=F$e&&(this._selected=F$e,this.state=this._selected?2:0,this.event("change"))}),F$Y(0,F$e,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(F$e){this.createText(),this._text.padding=F$V.fillArray(F$K.labelPadding,F$e,Number)}),F$Y(0,F$e,"labelSize",function(){return this.createText(),this._text.fontSize},function(F$e){this.createText(),this._text.fontSize=F$e}),F$Y(0,F$e,"labelStroke",function(){return this.createText(),this._text.stroke},function(F$e){this.createText(),this._text.stroke=F$e}),F$Y(0,F$e,"labelBold",function(){return this.createText(),this._text.bold},function(F$e){this.createText(),this._text.bold=F$e}),F$Y(0,F$e,"labelFont",function(){return this.createText(),this._text.font},function(F$e){this.createText(),this._text.font=F$e}),F$Y(0,F$e,"labelAlign",function(){return this.createText(),this._text.align},function(F$e){this.createText(),this._text.align=F$e}),F$Y(0,F$e,"clickHandler",function(){return this._clickHandler},function(F$e){this._clickHandler=F$e}),F$Y(0,F$e,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$e){this._bitmap.sizeGrid=F$V.fillArray(F$K.defaultSizeGrid,F$e,Number)}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$U,this,"width",F$e),this._autoSize&&(this._bitmap.width=F$e,this._text&&(this._text.width=F$e))}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$U,this,"height",F$e),this._autoSize&&(this._bitmap.height=F$e,this._text&&(this._text.height=F$e))}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)||"string"==typeof F$e?this.label=F$e+"":F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(F$e){this._bitmap._offset=F$e?F$V.fillArray([1,1],F$e,Number):[]}),F$o(F$a,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),F$a}(F$U),F$T=function(F$F){function F$o(F$e,F$F,F$a){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,F$o.__super.call(this),void 0===F$F&&(F$F=1),void 0===F$a&&(F$a=1),this._clipX=F$F,this._clipY=F$a,this.skin=F$e}F$s(F$o,"laya.ui.Clip",F$F);var F$e=F$o.prototype;return F$e.destroy=function(F$e){this.clearEvent(),this.clearLoad(),F$$.clearCache(this,this._skin),F$$.clearObject(this,this._weakKey),void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},F$e.dispose=function(){this.destroy(!0),F$l.loader.clearRes(this._skin)},F$e.createChildren=function(){this.graphics=this._bitmap=new F$A},F$e._onDisplay=function(F$e){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},F$e.changeClip=function(){if(this._clipChanged=!1,this._skin){var F$e=F$$.getRes(this._skin);if(F$e)this.loadComplete(this._skin,F$e);else{if(F$E.resAtalsObj&&F$E.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=F$O.create(this,this.loadComplete,[this._skin]),this._progress=null,F$l.loader.load(this._skin,this._complete,this._progress)}}},F$e.loadComplete=function(F$e,F$F){if(F$e===this._skin&&F$F){F$$.clearObject(this,this._weakKey);var F$a=this._clipWidth||Math.ceil(F$F.sourceWidth/this._clipX),F$o=this._clipHeight||Math.ceil(F$F.sourceHeight/this._clipY),F$E=this._skin+F$a+F$o,F$s=F$$.findObject(F$E);if(F$L.isOkTextureList(F$s)||(F$s=null),F$s)this._weakKey=F$E,F$$.keepObject(this,this._weakKey),this._sources=F$s;else{this._sources=[];for(var F$Y=0;F$Y<this._clipY;F$Y++)for(var F$_=0;F$_<this._clipX;F$_++){var F$R=F$m.createFromTexture(F$F,F$a*F$_,F$o*F$Y,F$a,F$o);if(F$F.alphaTexture){var F$H=F$F.width/F$F.alphaTexture.width;F$R.alphaTexture=F$m.createFromTexture(F$F.alphaTexture,F$a*F$_/F$H,F$o*F$Y/F$H,F$a/F$H,F$o/F$H)}this._sources.push(F$R)}F$$.saveObject(F$E,this._sources),this._weakKey=F$E,F$$.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},F$e.play=function(F$e,F$F){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=-1),this._isPlaying=!0,this.index=F$e,this._toIndex=F$F,this._index++,F$l.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},F$e._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},F$e.stop=function(){this._isPlaying=!1,F$l.timer.clear(this,this._loop),this.event("complete")},F$e._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},F$Y(0,F$e,"interval",function(){return this._interval},function(F$e){this._interval!=F$e&&(this._interval=F$e,this._isPlaying&&this.play())}),F$e.clearEvent=function(){this._skin&&F$E.atalsNotify&&F$E.atalsNotify.off(this._skin,this,this._setBtnSource)},F$e.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$l.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){if(this._skin!=F$e)if(this.clearLoad(),this.clearEvent(),F$$.clearCache(this,this._skin),this._skin=F$e){F$$.keepCache(this,this._skin);var F$F=F$$.getRes(F$e),F$a=F$E.resAtalsObj&&F$E.resAtalsObj[this._skin];!F$F&&F$a?F$E.atalsNotify&&F$E.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),F$e._setBtnSource=function(F$e,F$F){F$e===this._skin&&F$F&&(this.loadComplete(F$e,F$F),this.clearEvent())},F$Y(0,F$e,"sources",function(){return this._sources},function(F$e){this._sources=F$e,this.index=this._index,this.event("loaded")}),F$Y(0,F$e,"clipX",function(){return this._clipX},function(F$e){this._clipX=F$e||1,this._setClipChanged()}),F$Y(0,F$e,"clipY",function(){return this._clipY},function(F$e){this._clipY=F$e||1,this._setClipChanged()}),F$Y(0,F$e,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),F$Y(0,F$e,"clipWidth",function(){return this._clipWidth},function(F$e){this._clipWidth=F$e,this._setClipChanged()}),F$Y(0,F$e,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$e){this._bitmap.sizeGrid=F$V.fillArray(F$K.defaultSizeGrid,F$e,Number)}),F$Y(0,F$e,"group",function(){return this._group},function(F$e){F$e&&this._skin&&F$$.setGroup(this._skin,F$e),this._group=F$e}),F$Y(0,F$e,"clipHeight",function(){return this._clipHeight},function(F$e){this._clipHeight=F$e,this._setClipChanged()}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$U,this,"width",F$e),this._bitmap.width=F$e}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$U,this,"height",F$e),this._bitmap.height=F$e}),F$Y(0,F$e,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),F$Y(0,F$e,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),F$Y(0,F$e,"index",function(){return this._index},function(F$e){this._index=F$e,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[F$e]),this.event("change")}),F$Y(0,F$e,"autoPlay",function(){return this._autoPlay},function(F$e){this._autoPlay!=F$e&&((this._autoPlay=F$e)?this.play():this.stop())}),F$Y(0,F$e,"isPlaying",function(){return this._isPlaying},function(F$e){this._isPlaying=F$e}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)&&Math.floor(F$e)==F$e||"string"==typeof F$e?this.index=parseInt(F$e):F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"bitmap",function(){return this._bitmap}),F$o}(F$U),F$p=function(F$F){function F$e(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,F$e.__super.call(this)}F$s(F$e,"laya.ui.ColorPicker",F$F);var F$a=F$e.prototype;return F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._colorPanel&&this._colorPanel.destroy(F$e),this._colorButton&&this._colorButton.destroy(F$e),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},F$a.createChildren=function(){this.addChild(this._colorButton=new F$z),this._colorPanel=new F$Z,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new F$M),this._colorPanel.addChild(this._colorBlock=new F$M),this._colorPanel.addChild(this._colorInput=new F$q)},F$a.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},F$a.onPanelMouseDown=function(F$e){F$e.stopPropagation()},F$a.changePanel=function(){this._panelChanged=!1;var F$e=this._colorPanel.graphics;F$e.clear(),F$e.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(F$e=this._colorTiles.graphics).clear();for(var F$F=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],F$a=0;F$a<12;F$a++)for(var F$o=0;F$o<20;F$o++){var F$E=0;F$E=0===F$o?F$F[F$a]:1===F$o?0:51*(((3*F$a+F$o/6)%3<<0)+3*(F$a/6<<0))<<16|F$o%6*51<<8|(F$a<<0)%6*51;var F$s=F$V.toColor(F$E);this._colors.push(F$s);var F$Y=F$o*this._gridSize,F$_=F$a*this._gridSize;F$e.drawRect(F$Y,F$_,this._gridSize,this._gridSize,F$s,"#000000")}},F$a.onColorButtonClick=function(F$e){this._colorPanel.parent?this.close():this.open()},F$a.open=function(){var F$e=this.localToGlobal(new F$I),F$F=F$e.x+this._colorPanel.width<=F$l.stage.width?F$e.x:F$l.stage.width-this._colorPanel.width,F$a=F$e.y+this._colorButton.height;F$a=F$a+this._colorPanel.height<=F$l.stage.height?F$a:F$e.y-this._colorPanel.height,this._colorPanel.pos(F$F,F$a),this._colorPanel.zOrder=1001,F$l._currentStage.addChild(this._colorPanel),F$l.stage.on("mousedown",this,this.removeColorBox)},F$a.close=function(){F$l.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},F$a.removeColorBox=function(F$e){this.close()},F$a.onColorFieldKeyDown=function(F$e){13==F$e.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),F$e.stopPropagation())},F$a.onColorInputChange=function(F$e){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},F$a.onColorTilesClick=function(F$e){this.selectedColor=this.getColorByMouse(),this.close()},F$a.onColorTilesMouseMove=function(F$e){this._colorInput.focus=!1;var F$F=this.getColorByMouse();this._colorInput.text=F$F,this.drawBlock(F$F)},F$a.getColorByMouse=function(){var F$e=this._colorTiles.getMousePoint(),F$F=Math.floor(F$e.x/this._gridSize),F$a=Math.floor(F$e.y/this._gridSize);return this._colors[20*F$a+F$F]},F$a.drawBlock=function(F$e){var F$F=this._colorBlock.graphics;F$F.clear();var F$a=F$e||"#ffffff";F$F.drawRect(0,0,50,20,F$a,this._borderColor),F$e||F$F.drawLine(0,0,50,20,"#ff0000")},F$a.changeColor=function(){var F$e=this.graphics;F$e.clear();var F$F=this._selectedColor||"#000000";F$e.drawRect(0,0,this._colorButton.width,this._colorButton.height,F$F)},F$a._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},F$Y(0,F$a,"inputBgColor",function(){return this._inputBgColor},function(F$e){this._inputBgColor=F$e,this._setPanelChanged()}),F$Y(0,F$a,"selectedColor",function(){return this._selectedColor},function(F$e){this._selectedColor!=F$e&&(this._selectedColor=this._colorInput.text=F$e,this.drawBlock(F$e),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",F$H.EMPTY.setTo("change",this,this)))}),F$Y(0,F$a,"skin",function(){return this._colorButton.skin},function(F$e){this._colorButton.skin=F$e,this.changeColor()}),F$Y(0,F$a,"bgColor",function(){return this._bgColor},function(F$e){this._bgColor=F$e,this._setPanelChanged()}),F$Y(0,F$a,"borderColor",function(){return this._borderColor},function(F$e){this._borderColor=F$e,this._setPanelChanged()}),F$Y(0,F$a,"inputColor",function(){return this._inputColor},function(F$e){this._inputColor=F$e,this._setPanelChanged()}),F$e}(F$U),F$J=function(F$F){function F$a(F$e,F$F){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,F$a.__super.call(this),this._itemColors=F$K.comboBoxItemColors,this.skin=F$e,this.labels=F$F}F$s(F$a,"laya.ui.ComboBox",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._button&&this._button.destroy(F$e),this._list&&this._list.destroy(F$e),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},F$e.createChildren=function(){this.addChild(this._button=new F$z),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},F$e._createList=function(){this._list=new F$W,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},F$e._setListEvent=function(F$e){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=F$O.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},F$e.onListDown=function(F$e){F$e.stopPropagation()},F$e.onScrollBarDown=function(F$e){F$e.stopPropagation()},F$e.onButtonMouseDown=function(F$e){this.callLater(this.switchTo,[!this._isOpen])},F$e.changeList=function(){this._listChanged=!1;var F$e=this.width-2,F$F=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:F$e,height:this._itemHeight,fontSize:this._itemSize,color:F$F}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},F$e.onlistItemMouse=function(F$e,F$F){var F$a=F$e.type;if("mouseover"===F$a||"mouseout"===F$a){if(this._isCustomList)return;var F$o=this._list.getCell(F$F);if(!F$o)return;var F$E=F$o.getChildByName("label");F$E&&("mouseover"===F$a?(F$E.bgColor=this._itemColors[0],F$E.color=this._itemColors[1]):(F$E.bgColor=null,F$E.color=this._itemColors[2]))}else"click"===F$a&&(this.selectedIndex=F$F,this.isOpen=!1)},F$e.switchTo=function(F$e){this.isOpen=F$e},F$e.changeOpen=function(){this.isOpen=!this._isOpen},F$e.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var F$e=this._list.graphics;F$e.clear(),F$e.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var F$F=this._list.array||[],F$a=F$F.length=0,F$o=this._labels.length;F$a<F$o;F$a++)F$F.push({label:this._labels[F$a]});this._list.height=this._listHeight,this._list.array=F$F},F$e.changeSelected=function(){this._button.label=this.selectedLabel},F$e._onStageMouseWheel=function(F$e){this._list&&!this._list.contains(F$e.target)&&this.removeList(null)},F$e.removeList=function(F$e){F$l.stage.off("mousedown",this,this.removeList),F$l.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},F$Y(0,F$e,"selectedIndex",function(){return this._selectedIndex},function(F$e){this._selectedIndex!=F$e&&(this._selectedIndex=F$e,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[F$H.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),F$Y(0,F$e,"measureHeight",function(){return this._button.height}),F$Y(0,F$e,"skin",function(){return this._button.skin},function(F$e){this._button.skin!=F$e&&(this._button.skin=F$e,this._listChanged=!0)}),F$Y(0,F$e,"measureWidth",function(){return this._button.width}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$U,this,"width",F$e),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),F$Y(0,F$e,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(F$e){this.selectedIndex=this._labels.indexOf(F$e)}),F$Y(0,F$e,"labels",function(){return this._labels.join(",")},function(F$e){0<this._labels.length&&(this.selectedIndex=-1),F$e?this._labels=F$e.split(","):this._labels.length=0,this._itemChanged=!0}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$U,this,"height",F$e),this._button.height=this._height}),F$Y(0,F$e,"selectHandler",function(){return this._selectHandler},function(F$e){this._selectHandler=F$e}),F$Y(0,F$e,"visibleNum",function(){return this._visibleNum},function(F$e){this._visibleNum=F$e,this._listChanged=!0}),F$Y(0,F$e,"labelBold",function(){return this._button.text.bold},function(F$e){this._button.text.bold=F$e}),F$Y(0,F$e,"itemColors",function(){return String(this._itemColors)},function(F$e){this._itemColors=F$V.fillArray(this._itemColors,F$e,String),this._listChanged=!0}),F$Y(0,F$e,"itemSize",function(){return this._itemSize},function(F$e){this._itemSize=F$e,this._listChanged=!0}),F$Y(0,F$e,"scrollBar",function(){return this.list.scrollBar}),F$Y(0,F$e,"isOpen",function(){return this._isOpen},function(F$e){if(this._isOpen!=F$e)if(this._isOpen=F$e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var F$F=this.localToGlobal(F$I.TEMP.setTo(0,0)),F$a=F$F.y+this._button.height;F$a=F$a+this._listHeight<=F$l.stage.height?F$a:F$F.y-this._listHeight,this._list.pos(F$F.x,F$a),this._list.zOrder=1001,F$l._currentStage.addChild(this._list),F$l.stage.once("mousedown",this,this.removeList),F$l.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),F$Y(0,F$e,"scrollBarSkin",function(){return this._scrollBarSkin},function(F$e){this._scrollBarSkin=F$e}),F$Y(0,F$e,"sizeGrid",function(){return this._button.sizeGrid},function(F$e){this._button.sizeGrid=F$e}),F$Y(0,F$e,"button",function(){return this._button}),F$Y(0,F$e,"list",function(){return this._list||this._createList(),this._list},function(F$e){F$e&&(F$e.removeSelf(),this._isCustomList=!0,this._list=F$e,this._setListEvent(F$e),this._itemHeight=F$e.getCell(0).height+F$e.spaceY)}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)&&Math.floor(F$e)==F$e||"string"==typeof F$e?this.selectedIndex=parseInt(F$e):F$e instanceof Array?this.labels=F$e.join(","):F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"labelColors",function(){return this._button.labelColors},function(F$e){this._button.labelColors!=F$e&&(this._button.labelColors=F$e)}),F$Y(0,F$e,"labelPadding",function(){return this._button.text.padding.join(",")},function(F$e){this._button.text.padding=F$V.fillArray(F$K.labelPadding,F$e,Number)}),F$Y(0,F$e,"labelSize",function(){return this._button.text.fontSize},function(F$e){this._button.text.fontSize=F$e}),F$Y(0,F$e,"labelFont",function(){return this._button.text.font},function(F$e){this._button.text.font=F$e}),F$Y(0,F$e,"stateNum",function(){return this._button.stateNum},function(F$e){this._button.stateNum=F$e}),F$a}(F$U),F$k=function(F$F){function F$a(F$e){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,F$a.__super.call(this),this._showButtons=F$G.showButtons,this._touchScrollEnable=F$G.touchScrollEnable,this._mouseWheelEnable=F$G.mouseWheelEnable,this.skin=F$e,this.max=1}F$s(F$a,"laya.ui.ScrollBar",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),this.stopScroll(),this.target=null,F$F.prototype.destroy.call(this,F$e),this.upButton&&this.upButton.destroy(F$e),this.downButton&&this.downButton.destroy(F$e),this.slider&&this.slider.destroy(F$e),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},F$e.createChildren=function(){this.addChild(this.slider=new F$d),this.addChild(this.upButton=new F$z),this.addChild(this.downButton=new F$z)},F$e.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},F$e.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},F$e.onButtonMouseDown=function(F$e){var F$F=F$e.currentTarget===this.upButton;this.slide(F$F),F$l.timer.once(F$K.scrollBarDelayTime,this,this.startLoop,[F$F]),F$l.stage.once("mouseup",this,this.onStageMouseUp)},F$e.startLoop=function(F$e){F$l.timer.frameLoop(1,this,this.slide,[F$e])},F$e.slide=function(F$e){F$e?this.value-=this._scrollSize:this.value+=this._scrollSize},F$e.onStageMouseUp=function(F$e){F$l.timer.clear(this,this.startLoop),F$l.timer.clear(this,this.slide)},F$e.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},F$e.changeSize=function(){F$F.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},F$e.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},F$e.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},F$e.setScroll=function(F$e,F$F,F$a){this.runCallLater(this.changeSize),this.slider.setSlider(F$e,F$F,F$a),this.slider.bar.visible=0<F$F,!this._hide&&this.autoHide&&(this.visible=!1)},F$e.onTargetMouseWheel=function(F$e){this.value-=F$e.delta*this._scrollSize,this.target=this._target},F$e.onTargetMouseDown=function(F$e){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new F$I),this._lastPoint.setTo(F$l.stage.mouseX,F$l.stage.mouseY),F$l.timer.clear(this,this.tweenMove),F$b.clearTween(this),F$l.stage.once("mouseup",this,this.onStageMouseUp2),F$l.stage.once("mouseout",this,this.onStageMouseUp2),F$l.timer.frameLoop(1,this,this.loop)},F$e.loop=function(){var F$e=F$l.stage.mouseY,F$F=F$l.stage.mouseX;if(this._lastOffset=this.isVertical?F$e-this._lastPoint.y:F$F-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?F$l.stage._canvasTransform.getScaleY():F$l.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=F$F,this._lastPoint.y=F$e,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},F$e.onStageMouseUp2=function(F$e){if(F$l.stage.off("mouseup",this,this.onStageMouseUp2),F$l.stage.off("mouseout",this,this.onStageMouseUp2),F$l.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?F$b.to(this,{value:this.min},this.elasticBackTime,F$R.sineOut,F$O.create(this,this.elasticOver)):this._value>this.max&&F$b.to(this,{value:this.max},this.elasticBackTime,F$R.sineOut,F$O.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?F$l.stage.mouseY-this._lastPoint.y:F$l.stage.mouseX-this._lastPoint.x);for(var F$F=0,F$a=Math.min(this._offsets.length,3),F$o=0;F$o<F$a;F$o++)F$F+=this._offsets[this._offsets.length-1-F$o];if(this._lastOffset=F$F/F$a,(F$F=Math.abs(this._lastOffset))<2)return void this.event("end");60<F$F&&(this._lastOffset=0<this._lastOffset?60:-60);var F$E=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));F$l.timer.frameLoop(1,this,this.tweenMove,[F$E])}},F$e.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&F$b.to(this,{alpha:0},500),this.event("end")},F$e.tweenMove=function(F$e){this._lastOffset*=this.rollRatio;var F$F=NaN;if(0<F$e&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,F$F=.5*-(this.min-F$e-this.value),this._lastOffset>F$F&&(this._lastOffset=F$F)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,F$F=.5*-(this.max+F$e-this.value),this._lastOffset<F$F&&(this._lastOffset=F$F))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(F$l.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?F$b.to(this,{value:this.min},this.elasticBackTime,F$R.sineOut,F$O.create(this,this.elasticOver)):this._value>this.max?F$b.to(this,{value:this.max},this.elasticBackTime,F$R.sineOut,F$O.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&F$b.to(this,{alpha:0},500)}},F$e.stopScroll=function(){this.onStageMouseUp2(null),F$l.timer.clear(this,this.tweenMove),F$b.clearTween(this)},F$Y(0,F$e,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){this._skin!=F$e&&(this._skin=F$e,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),F$Y(0,F$e,"max",function(){return this.slider.max},function(F$e){this.slider.max=F$e}),F$Y(0,F$e,"showButtons",function(){return this._showButtons},function(F$e){this._showButtons=F$e,this.callLater(this.changeScrollBar)}),F$Y(0,F$e,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),F$Y(0,F$e,"min",function(){return this.slider.min},function(F$e){this.slider.min=F$e}),F$Y(0,F$e,"value",function(){return this._value},function(F$e){F$e!==this._value&&(this._value=F$e,this._isElastic||(this.slider._value!=F$e&&(this.slider._value=F$e,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),F$Y(0,F$e,"isVertical",function(){return this.slider.isVertical},function(F$e){this.slider.isVertical=F$e}),F$Y(0,F$e,"sizeGrid",function(){return this.slider.sizeGrid},function(F$e){this.slider.sizeGrid=F$e}),F$Y(0,F$e,"scrollSize",function(){return this._scrollSize},function(F$e){this._scrollSize=F$e}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)||"string"==typeof F$e?this.value=Number(F$e):F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"thumbPercent",function(){return this._thumbPercent},function(F$e){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),F$e=1<=F$e?.99:F$e,this._thumbPercent=F$e,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*F$e,F$K.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*F$e,F$K.scrollBarMinNum))}),F$Y(0,F$e,"target",function(){return this._target},function(F$e){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=F$e)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),F$Y(0,F$e,"hide",function(){return this._hide},function(F$e){this._hide=F$e,this.visible=!F$e}),F$Y(0,F$e,"touchScrollEnable",function(){return this._touchScrollEnable},function(F$e){this._touchScrollEnable=F$e,this.target=this._target}),F$Y(0,F$e,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(F$e){this._mouseWheelEnable=F$e,this.target=this._target}),F$Y(0,F$e,"tick",function(){return this.slider.tick},function(F$e){this.slider.tick=F$e}),F$a}(F$U),F$d=function(F$F){function F$a(F$e){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,F$a.__super.call(this),this.skin=F$e}F$s(F$a,"laya.ui.Slider",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._bg&&this._bg.destroy(F$e),this._bar&&this._bar.destroy(F$e),this._progress&&this._progress.destroy(F$e),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},F$e.createChildren=function(){this.addChild(this._bg=new F$w),this.addChild(this._bar=new F$z)},F$e.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},F$e.onBarMouseDown=function(F$e){this._globalSacle||(this._globalSacle=new F$I),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=F$l.stage.mouseX,this._ty=F$l.stage.mouseY,F$l.stage.on("mousemove",this,this.mouseMove),F$l.stage.once("mouseup",this,this.mouseUp),F$l.stage.once("mouseout",this,this.mouseUp),this.showValueText()},F$e.showValueText=function(){if(this.showLabel){var F$e=laya.ui.Slider.label;this.addChild(F$e),F$e.textField.changeText(this._value+""),this.isVertical?(F$e.x=this._bar.x+20,F$e.y=.5*(this._bar.height-F$e.height)+this._bar.y):(F$e.y=this._bar.y-20,F$e.x=.5*(this._bar.width-F$e.width)+this._bar.x)}},F$e.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},F$e.mouseUp=function(F$e){F$l.stage.off("mousemove",this,this.mouseMove),F$l.stage.off("mouseup",this,this.mouseUp),F$l.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},F$e.mouseMove=function(F$e){var F$F=this._value;this.isVertical?(this._bar.y+=(F$l.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(F$l.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=F$l.stage.mouseX,this._ty=F$l.stage.mouseY;var F$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$a)/F$a,this._value!=F$F&&this.sendChangeEvent(),this.showValueText()},F$e.sendChangeEvent=function(F$e){void 0===F$e&&(F$e="change"),this.event(F$e),this.changeHandler&&this.changeHandler.runWith(this._value)},F$e.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},F$e.changeSize=function(){F$F.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},F$e.setSlider=function(F$e,F$F,F$a){this._value=-1,this._min=F$e,this._max=F$e<F$F?F$F:F$e,this.value=F$a<F$e?F$e:F$F<F$a?F$F:F$a},F$e.changeValue=function(){var F$e=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$e)/F$e,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var F$F=this._max-this._min;0===F$F&&(F$F=1),this.isVertical?(this._bar.y=(this._value-this._min)/F$F*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/F$F*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},F$e.onBgMouseDown=function(F$e){var F$F=this._bg.getMousePoint();this.isVertical?this.value=F$F.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=F$F.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},F$Y(0,F$e,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){if(this._skin!=F$e){this._skin=F$e,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var F$F=this._skin.replace(".png","$progress.png");F$$.getRes(F$F)&&(this._progress||(this.addChild(this._progress=new F$w),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=F$F),this.setBarPoint(),this.callLater(this.changeValue)}}),F$Y(0,F$e,"allowClickBack",function(){return this._allowClickBack},function(F$e){this._allowClickBack!=F$e&&((this._allowClickBack=F$e)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),F$Y(0,F$e,"max",function(){return this._max},function(F$e){this._max!=F$e&&(this._max=F$e,this.callLater(this.changeValue))}),F$Y(0,F$e,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),F$Y(0,F$e,"tick",function(){return this._tick},function(F$e){this._tick!=F$e&&(this._tick=F$e,this.callLater(this.changeValue))}),F$Y(0,F$e,"sizeGrid",function(){return this._bg.sizeGrid},function(F$e){this._bg.sizeGrid=F$e,this._bar.sizeGrid=F$e,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),F$Y(0,F$e,"min",function(){return this._min},function(F$e){this._min!=F$e&&(this._min=F$e,this.callLater(this.changeValue))}),F$Y(0,F$e,"value",function(){return this._value},function(F$e){if(this._value!=F$e){var F$F=this._value;this._value=F$e,this.changeValue(),this._value!=F$F&&this.sendChangeEvent()}}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)||"string"==typeof F$e?this.value=Number(F$e):F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"bar",function(){return this._bar}),F$o(F$a,["label",function(){return this.label=new F$S}]),F$a}(F$U),F$w=function(F$F){function F$a(F$e){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,F$a.__super.call(this),this.skin=F$e}F$s(F$a,"laya.ui.Image",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,F$$.clearCache(this,this._skin)},F$e.dispose=function(){this.destroy(!0),F$$.clearCache(this,this._skin),this.clearEvent()},F$e.createChildren=function(){this.graphics=this._bitmap=new F$A},F$e.setSource=function(F$e,F$F){F$e===this._skin&&F$F&&(this.source=F$F,this.onCompResize(),this.clearEvent())},F$e.clearEvent=function(){this._skin&&F$E.atalsNotify&&F$E.atalsNotify.off(this._skin,this,this.setSource)},F$e.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$l.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$Y(0,F$e,"source",function(){return this._bitmap.source},function(F$e){this._bitmap&&(this._bitmap.source=F$e,this.event("loaded"),this.repaint())}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"string"==typeof(this._dataSource=F$e)?this.skin=F$e:F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"measureHeight",function(){return this._bitmap.height}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){if(this._skin!=F$e)if(F$$.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=F$e){F$$.keepCache(this,this._skin);var F$F=F$$.getRes(F$e),F$a=F$E.resAtalsObj&&F$E.resAtalsObj[this._skin];F$F?(this.source=F$F,this.onCompResize()):F$a?(F$E.atalsNotify&&F$E.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=F$a.sourceW),0==this.height&&(this.height=F$a.sourceH)):(this._complete=F$O.create(this,this.setSource,[this._skin]),this._progress=null,F$l.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),F$Y(0,F$e,"group",function(){return this._group},function(F$e){F$e&&this._skin&&F$$.setGroup(this._skin,F$e),this._group=F$e}),F$Y(0,F$e,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$e){this._bitmap.sizeGrid=F$V.fillArray(F$K.defaultSizeGrid,F$e,Number)}),F$Y(0,F$e,"measureWidth",function(){return this._bitmap.width}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$U,this,"width",F$e),this._bitmap.width=0==F$e?1e-7:F$e}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$U,this,"height",F$e),this._bitmap.height=0==F$e?1e-7:F$e}),F$a}(F$U),F$S=function(F$F){function F$a(F$e){this._tf=null,F$a.__super.call(this),void 0===F$e&&(F$e=""),F$g.defaultColor=F$K.labelColor,this.text=F$e}F$s(F$a,"laya.ui.Label",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._tf=null},F$e.createChildren=function(){this.addChild(this._tf=new F$D)},F$e.changeText=function(F$e){this._tf.changeText(F$e)},F$Y(0,F$e,"padding",function(){return this._tf.padding.join(",")},function(F$e){this._tf.padding=F$V.fillArray(F$K.labelPadding,F$e,Number)}),F$Y(0,F$e,"bold",function(){return this._tf.bold},function(F$e){this._tf.bold=F$e}),F$Y(0,F$e,"align",function(){return this._tf.align},function(F$e){this._tf.align=F$e}),F$Y(0,F$e,"text",function(){return this._tf.text},function(F$e){this._tf.text!=F$e&&(F$e&&(F$e=F$V.adptString(F$e+"")),this._tf.text=F$e,this.event("change"),this._width&&this._height||this.onCompResize())}),F$Y(0,F$e,"italic",function(){return this._tf.italic},function(F$e){this._tf.italic=F$e}),F$Y(0,F$e,"wordWrap",function(){return this._tf.wordWrap},function(F$e){this._tf.wordWrap=F$e}),F$Y(0,F$e,"font",function(){return this._tf.font},function(F$e){this._tf.font=F$e}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)||"string"==typeof F$e?this.text=F$e+"":F$l.superSet(F$U,this,"dataSource",F$e)}),F$Y(0,F$e,"color",function(){return this._tf.color},function(F$e){this._tf.color=F$e}),F$Y(0,F$e,"valign",function(){return this._tf.valign},function(F$e){this._tf.valign=F$e}),F$Y(0,F$e,"leading",function(){return this._tf.leading},function(F$e){this._tf.leading=F$e}),F$Y(0,F$e,"fontSize",function(){return this._tf.fontSize},function(F$e){this._tf.fontSize=F$e}),F$Y(0,F$e,"bgColor",function(){return this._tf.bgColor},function(F$e){this._tf.bgColor=F$e}),F$Y(0,F$e,"borderColor",function(){return this._tf.borderColor},function(F$e){this._tf.borderColor=F$e}),F$Y(0,F$e,"stroke",function(){return this._tf.stroke},function(F$e){this._tf.stroke=F$e}),F$Y(0,F$e,"strokeColor",function(){return this._tf.strokeColor},function(F$e){this._tf.strokeColor=F$e}),F$Y(0,F$e,"textField",function(){return this._tf}),F$Y(0,F$e,"measureWidth",function(){return this._tf.width}),F$Y(0,F$e,"measureHeight",function(){return this._tf.height}),F$Y(0,F$e,"width",function(){return this._width||this._tf.text?F$l.superGet(F$U,this,"width"):0},function(F$e){F$l.superSet(F$U,this,"width",F$e),this._tf.width=F$e}),F$Y(0,F$e,"height",function(){return this._height||this._tf.text?F$l.superGet(F$U,this,"height"):0},function(F$e){F$l.superSet(F$U,this,"height",F$e),this._tf.height=F$e}),F$Y(0,F$e,"overflow",function(){return this._tf.overflow},function(F$e){this._tf.overflow=F$e}),F$Y(0,F$e,"underline",function(){return this._tf.underline},function(F$e){this._tf.underline=F$e}),F$Y(0,F$e,"underlineColor",function(){return this._tf.underlineColor},function(F$e){this._tf.underlineColor=F$e}),F$a}(F$U),F$C=function(F$F){function F$a(F$e){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,F$a.__super.call(this),this.skin=F$e}F$s(F$a,"laya.ui.ProgressBar",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._bg&&this._bg.destroy(F$e),this._bar&&this._bar.destroy(F$e),this._bg=this._bar=null,this.changeHandler=null},F$e.createChildren=function(){this.addChild(this._bg=new F$w),this.addChild(this._bar=new F$w)},F$e.changeValue=function(){if(this.sizeGrid){var F$e=this.sizeGrid.split(","),F$F=Number(F$e[3]),F$a=Number(F$e[1]),F$o=(this.width-F$F-F$a)*this._value;this._bar.width=F$F+F$a+F$o,this._bar.visible=this._bar.width>F$F+F$a}else this._bar.width=this.width*this._value},F$Y(0,F$e,"measureHeight",function(){return this._bg.height}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){this._skin!=F$e&&(this._skin=F$e,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),F$Y(0,F$e,"measureWidth",function(){return this._bg.width}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$U,this,"height",F$e),this._bg.height=this._height,this._bar.height=this._height}),F$Y(0,F$e,"bar",function(){return this._bar}),F$Y(0,F$e,"value",function(){return this._value},function(F$e){this._value!=F$e&&(F$e=1<F$e?1:F$e<0?0:F$e,this._value=F$e,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(F$e))}),F$Y(0,F$e,"bg",function(){return this._bg}),F$Y(0,F$e,"sizeGrid",function(){return this._bg.sizeGrid},function(F$e){this._bg.sizeGrid=this._bar.sizeGrid=F$e}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$U,this,"width",F$e),this._bg.width=this._width,this.callLater(this.changeValue)}),F$Y(0,F$e,"dataSource",F$F.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)||"string"==typeof F$e?this.value=Number(F$e):F$l.superSet(F$U,this,"dataSource",F$e)}),F$a}(F$U),F$u=(function(F$e){function F$a(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,F$a.__super.call(this),this._tipBox=new F$U,this._tipBox.addChild(this._tipText=new F$D),this._tipText.x=this._tipText.y=5,this._tipText.color=F$a.tipTextColor,this._defaultTipHandler=this._showDefaultTip,F$l.stage.on("showtip",this,this._onStageShowTip),F$l.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}F$s(F$a,"laya.ui.TipManager",F$U);var F$F=F$a.prototype;F$F._onStageHideTip=function(F$e){F$l.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},F$F._onStageShowTip=function(F$e){F$l.timer.once(F$a.tipDelay,this,this._showTip,[F$e],!0)},F$F._showTip=function(F$e){if("string"==typeof F$e){var F$F=String(F$e);Boolean(F$F)&&this._defaultTipHandler(F$F)}else F$e instanceof laya.utils.Handler?F$e.run():"function"==typeof F$e&&F$e.apply();F$l.stage.on("mousemove",this,this._onStageMouseMove),F$l.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},F$F._onStageMouseDown=function(F$e){this.closeAll()},F$F._onStageMouseMove=function(F$e){this._showToStage(this,F$a.offsetX,F$a.offsetY)},F$F._showToStage=function(F$e,F$F,F$a){void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0);var F$o=F$e.getBounds();F$e.x=F$l.stage.mouseX+F$F,F$e.y=F$l.stage.mouseY+F$a,F$e.x+F$o.width>F$l.stage.width&&(F$e.x-=F$o.width+F$F),F$e.y+F$o.height>F$l.stage.height&&(F$e.y-=F$o.height+F$a)},F$F.closeAll=function(){F$l.timer.clear(this,this._showTip),F$l.stage.off("mousemove",this,this._onStageMouseMove),F$l.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},F$F.showDislayTip=function(F$e){this.addChild(F$e),this._showToStage(this),F$l._currentStage.addChild(this)},F$F._showDefaultTip=function(F$e){this._tipText.text=F$e;var F$F=this._tipBox.graphics;F$F.clear(),F$F.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,F$a.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),F$l._currentStage.addChild(this)},F$Y(0,F$F,"defaultTipHandler",function(){return this._defaultTipHandler},function(F$e){this._defaultTipHandler=F$e}),F$a.offsetX=10,F$a.offsetY=15,F$a.tipTextColor="#ffffff",F$a.tipBackColor="#111111",F$a.tipDelay=200}(),function(F$e){var F$q;function F$I(){this._idMap=null,this._aniList=null,this._watchMap={},F$I.__super.call(this)}F$s(F$I,"laya.ui.View",F$Z);var F$F=F$I.prototype;return F$F.createView=function(F$e){if(F$e.animations&&!this._idMap&&(this._idMap={}),F$I.createComp(F$e,this,this),F$e.animations){var F$F,F$a,F$o=[],F$E=F$e.animations,F$s=0,F$Y=F$E.length;for(F$s=0;F$s<F$Y;F$s++){switch(F$F=new F$n,F$a=F$E[F$s],F$F._setUp(this._idMap,F$a),(this[F$a.name]=F$F)._setControlNode(this),F$a.action){case 1:F$F.play(0,!1);break;case 2:F$F.play(0,!0)}F$o.push(F$F)}this._aniList=F$o}0<this._width&&null==F$e.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},F$F.onEvent=function(F$e,F$F){},F$F.loadUI=function(F$e){var F$F=F$I.uiMap[F$e];F$F&&this.createView(F$F)},F$F.destroy=function(F$e){void 0===F$e&&(F$e=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,F$e)},F$F.changeData=function(F$e){var F$F=this._watchMap[F$e];if(F$F){console.log("change",F$e);for(var F$a=0,F$o=F$F.length;F$a<F$o;F$a++){F$F[F$a].exe(this)}}},F$I._regs=function(){for(var F$e in F$I.uiClassMap)F$P.regClass(F$e,F$I.uiClassMap[F$e])},F$I.createComp=function(F$e,F$F,F$a,F$o){if(!(F$F=F$F||F$I.getCompInstance(F$e)))return console.warn("can not create:"+F$e.type),null;var F$E=F$e.child;if(F$E)for(var F$s=F$F instanceof laya.ui.List,F$Y=0,F$_=F$E.length;F$Y<F$_;F$Y++){var F$R=F$E[F$Y];if(!F$F.hasOwnProperty("itemRender")||"render"!=F$R.props.name&&"render"!==F$R.props.renderType)if("Graphic"==F$R.type)F$P.addGraphicsToSprite(F$R,F$F);else if(F$P.isDrawType(F$R.type))F$P.addGraphicToSprite(F$R,F$F,!0);else{if(F$s){var F$H=[],F$g=F$I.createComp(F$R,null,F$a,F$H);F$H.length&&(F$g._$bindData=F$H)}else F$g=F$I.createComp(F$R,null,F$a,F$o);"Script"==F$R.type?"owner"in F$g?F$g.owner=F$F:"target"in F$g&&(F$g.target=F$F):"mask"==F$R.props.renderType||"mask"==F$R.props.name?F$F.mask=F$g:F$g instanceof laya.display.Sprite&&F$F.addChild(F$g)}else F$F.itemRender=F$R}var F$n=F$e.props;for(var F$O in F$n){var F$q=F$n[F$O];F$I.eventDic[F$O]?F$q&&F$a&&F$F.on(F$O,F$a,F$a.onEvent,[F$q]):F$I.setCompValue(F$F,F$O,F$q,F$a,F$o)}return F$l.__typeof(F$F,"laya.ui.IItem")&&F$F.initItems(),F$e.compId&&F$a&&F$a._idMap&&(F$a._idMap[F$e.compId]=F$F),F$F},F$I.setCompValue=function(F$e,F$F,F$a,F$o,F$E){if("string"==typeof F$a&&-1<F$a.indexOf("${")){if(F$I._sheet||(F$I._sheet=F$P.getClass("laya.data.Table")),!F$I._sheet)return void console.warn("Can not find class Sheet");if(F$E)F$E.push(F$e,F$F,F$a);else if(F$o){-1==F$a.indexOf("].")&&(F$a=F$a.replace(".","[0]."));var F$s,F$Y,F$_=new F$q(F$e,F$F,F$a);F$_.exe(F$o);for(var F$R=F$a.replace(/\[.*?\]\./g,".");null!=(F$s=F$I._parseWatchData.exec(F$R));){for(var F$H=F$s[1];null!=(F$Y=F$I._parseKeyWord.exec(F$H));){var F$g=F$Y[0],F$n=F$o._watchMap[F$g]||(F$o._watchMap[F$g]=[]);F$n.push(F$_),F$I._sheet.I.notifer.on(F$g,F$o,F$o.changeData,[F$g])}(F$n=F$o._watchMap[F$H]||(F$o._watchMap[F$H]=[])).push(F$_),F$I._sheet.I.notifer.on(F$H,F$o,F$o.changeData,[F$H])}}}else if("var"===F$F&&F$o)F$o[F$a]=F$e;else if("onClick"==F$F){var F$O=F$l._runScript("(function(){"+F$a+"})");F$e.on("click",F$o,F$O)}else F$e[F$F]="true"===F$a||"false"!==F$a&&F$a},F$I.getCompInstance=function(F$e){var F$F,F$a=F$e.props?F$e.props.runtime:null;return F$F=F$a?F$I.viewClassMap[F$a]||F$I.uiClassMap[F$a]||F$l.__classmap[F$a]:F$I.uiClassMap[F$e.type],F$e.props&&F$e.props.hasOwnProperty("renderType")&&"instance"==F$e.props.renderType?F$F.instance:F$F?new F$F:null},F$I.regComponent=function(F$e,F$F){F$I.uiClassMap[F$e]=F$F,F$P.regClass(F$e,F$F)},F$I.regViewRuntime=function(F$e,F$F){F$I.viewClassMap[F$e]=F$F},F$I.uiMap={},F$I.viewClassMap={},F$I._sheet=null,F$o(F$I,["uiClassMap",function(){return this.uiClassMap={ViewStack:F$ee,LinkButton:F$z,TextArea:F$He,ColorPicker:F$p,Box:F$Z,Button:F$z,CheckBox:F$x,Clip:F$T,ComboBox:F$J,Component:F$U,HScrollBar:F$f,HSlider:F$Q,Image:F$w,Label:F$S,List:F$W,Panel:F$i,ProgressBar:F$C,Radio:F$c,RadioGroup:F$_e,ScrollBar:F$k,Slider:F$d,Tab:F$Re,TextInput:F$ae,View:F$I,VScrollBar:F$Fe,VSlider:F$oe,Tree:F$h,HBox:F$se,VBox:F$Ye,Sprite:F$M,Animation:F$a,Text:F$D,FontClip:F$X}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),F$I.__init$=function(){F$I._regs(),F$q=function(){function F$e(F$e,F$F,F$a){this.comp=null,this.prop=null,this.value=null,this.comp=F$e,this.prop=F$F,this.value=F$a}return F$s(F$e,""),F$e.prototype.exe=function(F$e){var F$F=F$V.getBindFun(this.value);this.comp[this.prop]=F$F.call(this,F$e)},F$e}()},F$I}()),F$x=function(F$e){function F$a(F$e,F$F){void 0===F$F&&(F$F=""),F$a.__super.call(this,F$e,F$F)}F$s(F$a,"laya.ui.CheckBox",F$e);var F$F=F$a.prototype;return F$F.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},F$F.initialize=function(){F$e.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},F$Y(0,F$F,"dataSource",F$e.prototype._$get_dataSource,function(F$e){"boolean"==typeof(this._dataSource=F$e)?this.selected=F$e:"string"==typeof F$e?this.selected="true"===F$e:F$l.superSet(F$z,this,"dataSource",F$e)}),F$a}(F$z),F$N=function(F$e){function F$F(){this._space=0,this._align="none",this._itemChanged=!1,F$F.__super.call(this)}F$s(F$F,"laya.ui.LayoutBox",F$Z);var F$a=F$F.prototype;return F$a.addChild=function(F$e){return F$e.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,F$e)},F$a.onResize=function(F$e){this._setItemChanged()},F$a.addChildAt=function(F$e,F$F){return F$e.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,F$e,F$F)},F$a.removeChild=function(F$e){return F$e.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,F$e)},F$a.removeChildAt=function(F$e){return this.getChildAt(F$e).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,F$e)},F$a.refresh=function(){this._setItemChanged()},F$a.changeItems=function(){this._itemChanged=!1},F$a.sortItem=function(F$e){F$e&&F$e.sort(function(F$e,F$F){return F$e.y-F$F.y})},F$a._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},F$Y(0,F$a,"space",function(){return this._space},function(F$e){this._space=F$e,this._setItemChanged()}),F$Y(0,F$a,"align",function(){return this._align},function(F$e){this._align=F$e,this._setItemChanged()}),F$F}(),F$X=function(F$F){function F$a(F$e,F$F){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,F$a.__super.call(this),F$e&&(this.skin=F$e),F$F&&(this.sheet=F$F)}F$s(F$a,"laya.ui.FontClip",F$F);var F$e=F$a.prototype;return F$e.createChildren=function(){this._bitmap=new F$A,this.on("loaded",this,this._onClipLoaded)},F$e._onClipLoaded=function(){this.callLater(this.changeValue)},F$e.changeValue=function(){var F$e;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),F$e=this._sources[0]))){var F$F="horizontal"===this._direction;F$F?(this._wordsW=this._valueArr.length*(F$e.sourceWidth+this.spaceX),this._wordsH=F$e.sourceHeight):(this._wordsW=F$e.sourceWidth,this._wordsH=(F$e.sourceHeight+this.spaceY)*this._valueArr.length);var F$a=0;if(this._width)switch(this._align){case"center":F$a=.5*(this._width-this._wordsW);break;case"right":F$a=this._width-this._wordsW;break;default:F$a=0}for(var F$o=0,F$E=this._valueArr.length;F$o<F$E;F$o++){var F$s=this._indexMap[this._valueArr.charAt(F$o)];this.sources[F$s]&&(F$e=this.sources[F$s],F$F?this.graphics.drawTexture(F$e,F$a+F$o*(F$e.sourceWidth+this.spaceX),0,F$e.sourceWidth,F$e.sourceHeight):this.graphics.drawTexture(F$e,0+F$a,F$o*(F$e.sourceHeight+this.spaceY),F$e.sourceWidth,F$e.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),F$F.prototype.destroy.call(this,F$e)},F$Y(0,F$e,"sheet",function(){return this._sheet},function(F$e){F$e+="";var F$F=(this._sheet=F$e).split(" ");this._clipX=String(F$F[0]).length,this.clipY=F$F.length,this._indexMap={};for(var F$a=0;F$a<this._clipY;F$a++)for(var F$o=F$F[F$a].split(""),F$E=0,F$s=F$o.length;F$E<F$s;F$E++)this._indexMap[F$o[F$E]]=F$a*this._clipX+F$E}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$T,this,"height",F$e),this.callLater(this.changeValue)}),F$Y(0,F$e,"direction",function(){return this._direction},function(F$e){this._direction=F$e,this.callLater(this.changeValue)}),F$Y(0,F$e,"value",function(){return this._valueArr?this._valueArr:""},function(F$e){F$e+="",this._valueArr=F$e,this.callLater(this.changeValue)}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$T,this,"width",F$e),this.callLater(this.changeValue)}),F$Y(0,F$e,"spaceX",function(){return this._spaceX},function(F$e){this._spaceX=F$e,"horizontal"===this._direction&&this.callLater(this.changeValue)}),F$Y(0,F$e,"spaceY",function(){return this._spaceY},function(F$e){this._spaceY=F$e,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),F$Y(0,F$e,"align",function(){return this._align},function(F$e){this._align=F$e,this.callLater(this.changeValue)}),F$Y(0,F$e,"measureWidth",function(){return this._wordsW}),F$Y(0,F$e,"measureHeight",function(){return this._wordsH}),F$a}(F$T),F$W=function(F$e){function F$F(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new F$I,F$F.__super.call(this)}F$s(F$F,"laya.ui.List",F$e);var F$a=F$F.prototype;return F$l.imps(F$a,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),this._content&&this._content.destroy(F$e),this._scrollBar&&this._scrollBar.destroy(F$e),laya.ui.Component.prototype.destroy.call(this,F$e),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},F$a.createChildren=function(){this.addChild(this._content=new F$Z)},F$a.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$l.superGet(F$Z,this,"cacheAs")),F$l.superSet(F$Z,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},F$a.onScrollEnd=function(){F$l.superSet(F$Z,this,"cacheAs",this._$P.cacheAs)},F$a._removePreScrollBar=function(){var F$e=this.removeChildByName("scrollBar");F$e&&F$e.destroy(!0)},F$a.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var F$e=this._getOneCell(),F$F=F$e.width+this._spaceX||1,F$a=F$e.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/F$F):Math.ceil(this._width/F$F)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/F$a):Math.round(this._height/F$a));var F$o=this._width?this._width:F$F*this.repeatX-this._spaceX,F$E=this._height?this._height:F$a*this.repeatY-this._spaceY;this._cellSize=this._isVertical?F$a:F$F,this._cellOffset=this._isVertical?F$a*Math.max(this._repeatY2,this._repeatY)-F$E-this._spaceY:F$F*Math.max(this._repeatX2,this._repeatX)-F$o-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=F$E:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=F$o),this.setContentSize(F$o,F$E);var F$s=this._isVertical?this.repeatX:this.repeatY,F$Y=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,F$s,F$Y),this._createdLine=F$Y,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},F$a._getOneCell=function(){if(0===this._cells.length){var F$e=this.createItem();if(this._offset.setTo(F$e.x,F$e.y),this.cacheContent)return F$e;this._cells.push(F$e)}return this._cells[0]},F$a._createItems=function(F$e,F$F,F$a){var F$o=this._content,F$E=this._getOneCell(),F$s=F$E.width+this._spaceX,F$Y=F$E.height+this._spaceY;if(this.cacheContent){var F$_=new F$Z;F$_.cacheAsBitmap=!0,F$_.pos((this._isVertical?0:F$e)*F$s,(this._isVertical?F$e:0)*F$Y),this._content.addChild(F$_),this._content.optimizeScrollRect=!0,F$o=F$_}else{for(var F$R=[],F$H=this._cells.length-1;-1<F$H;F$H--){var F$g=this._cells[F$H];F$g.removeSelf(),F$R.push(F$g)}this._cells.length=0}for(var F$n=F$e;F$n<F$a;F$n++)for(var F$O=0;F$O<F$F;F$O++)(F$E=F$R&&F$R.length?F$R.pop():this.createItem()).x=(this._isVertical?F$O:F$n)*F$s-F$o.x,F$E.y=(this._isVertical?F$n:F$O)*F$Y-F$o.y,F$E.name="item"+(F$n*F$F+F$O),F$o.addChild(F$E),this.addCell(F$E)},F$a.createItem=function(){var F$e=[];if("function"==typeof this._itemRender)var F$F=new this._itemRender;else F$F=F$u.createComp(this._itemRender,null,null,F$e);if(0==F$e.length&&F$F._watchMap){var F$a=F$F._watchMap;for(var F$o in F$a)for(var F$E=F$a[F$o],F$s=0;F$s<F$E.length;F$s++){var F$Y=F$E[F$s];F$e.push(F$Y.comp,F$Y.prop,F$Y.value)}}return F$e.length&&(F$F._$bindData=F$e),F$F},F$a.addCell=function(F$e){F$e.on("click",this,this.onCellMouse),F$e.on("rightclick",this,this.onCellMouse),F$e.on("mouseover",this,this.onCellMouse),F$e.on("mouseout",this,this.onCellMouse),F$e.on("mousedown",this,this.onCellMouse),F$e.on("mouseup",this,this.onCellMouse),this._cells.push(F$e)},F$a.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var F$e=0,F$F=F$e=0;F$F<1e4;F$F++){var F$a=this.getChildByName("item"+F$F);if(!F$a)break;this.addCell(F$a),F$e++}this.repeatY=F$e}},F$a.setContentSize=function(F$e,F$F){this._content.width=F$e,this._content.height=F$F,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new F$j),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,F$e,F$F),this._content.scrollRect=this._content.scrollRect),this.event("resize")},F$a.onCellMouse=function(F$e){"mousedown"===F$e.type&&(this._isMoved=!1);var F$F=F$e.currentTarget,F$a=this._startIndex+this._cells.indexOf(F$F);F$a<0||("click"===F$e.type||"rightclick"===F$e.type?this.selectEnable&&!this._isMoved?this.selectedIndex=F$a:this.changeCellState(F$F,!0,0):"mouseover"!==F$e.type&&"mouseout"!==F$e.type||this._selectedIndex===F$a||this.changeCellState(F$F,"mouseover"===F$e.type,0),this.mouseHandler&&this.mouseHandler.runWith([F$e,F$a]))},F$a.changeCellState=function(F$e,F$F,F$a){var F$o=F$e.getChildByName("selectBox");F$o&&(this.selectEnable=!0,F$o.visible=F$F,F$o.index=F$a)},F$a.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},F$a.onScrollBarChange=function(F$e){this.runCallLater(this.changeCells);var F$F=this._scrollBar.value,F$a=this._isVertical?this.repeatX:this.repeatY,F$o=this._isVertical?this.repeatY:this.repeatX,F$E=Math.floor(F$F/this._cellSize);if(this.cacheContent)F$Y=F$o+1,this._createdLine-F$E<F$Y&&(this._createItems(this._createdLine,F$a,this._createdLine+F$Y),this.renderItems(this._createdLine*F$a,0),this._createdLine+=F$Y);else{var F$s=F$E*F$a,F$Y=0;if(F$s>this._startIndex){F$Y=F$s-this._startIndex;var F$_=!0,F$R=this._startIndex+F$a*(F$o+1);this._isMoved=!0}else F$s<this._startIndex&&(F$Y=this._startIndex-F$s,F$_=!1,F$R=this._startIndex-1,this._isMoved=!0);for(var F$H=0;F$H<F$Y;F$H++){if(F$_){var F$g=this._cells.shift();this._cells[this._cells.length]=F$g;var F$n=F$R+F$H}else F$g=this._cells.pop(),this._cells.unshift(F$g),F$n=F$R-F$H;var F$O=Math.floor(F$n/F$a)*this._cellSize;this._isVertical?F$g.y=F$O:F$g.x=F$O,this.renderItem(F$g,F$n)}this._startIndex=F$s,this.changeSelectStatus()}var F$q=this._content.scrollRect;this._isVertical?(F$q.y=F$F-this._offset.y,F$q.x=-this._offset.x):(F$q.y=-this._offset.y,F$q.x=F$F-this._offset.x),this._content.scrollRect=F$q},F$a.posCell=function(F$e,F$F){if(this._scrollBar){var F$a=this._isVertical?this.repeatX:this.repeatY,F$o=(this._isVertical?this.repeatY:this.repeatX,Math.floor(F$F/F$a)*this._cellSize);this._isVertical?F$e.y=F$o:F$e.x=F$o}},F$a.changeSelectStatus=function(){for(var F$e=0,F$F=this._cells.length;F$e<F$F;F$e++)this.changeCellState(this._cells[F$e],this._selectedIndex===this._startIndex+F$e,1)},F$a.renderItems=function(F$e,F$F){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0);for(var F$a=F$e,F$o=F$F||this._cells.length;F$a<F$o;F$a++)this.renderItem(this._cells[F$a],this._startIndex+F$a);this.changeSelectStatus()},F$a.renderItem=function(F$e,F$F){this._array&&0<=F$F&&F$F<this._array.length?(F$e.visible=!0,F$e._$bindData?(F$e._dataSource=this._array[F$F],this._bindData(F$e,this._array[F$F])):F$e.dataSource=this._array[F$F],this.cacheContent||this.posCell(F$e,F$F),this.hasListener("render")&&this.event("render",[F$e,F$F]),this.renderHandler&&this.renderHandler.runWith([F$e,F$F])):(F$e.visible=!1,F$e.dataSource=null)},F$a._bindData=function(F$e,F$F){for(var F$a=F$e._$bindData,F$o=0,F$E=F$a.length;F$o<F$E;F$o++){var F$s=F$a[F$o++],F$Y=F$a[F$o++],F$_=F$a[F$o],F$R=F$V.getBindFun(F$_);F$s[F$Y]=F$R.call(this,F$F)}},F$a.refresh=function(){this.array=this._array},F$a.getItem=function(F$e){return-1<F$e&&F$e<this._array.length?this._array[F$e]:null},F$a.changeItem=function(F$e,F$F){-1<F$e&&F$e<this._array.length&&(this._array[F$e]=F$F,F$e>=this._startIndex&&F$e<this._startIndex+this._cells.length&&this.renderItem(this.getCell(F$e),F$e))},F$a.setItem=function(F$e,F$F){this.changeItem(F$e,F$F)},F$a.addItem=function(F$e){this._array.push(F$e),this.array=this._array},F$a.addItemAt=function(F$e,F$F){this._array.splice(F$F,0,F$e),this.array=this._array},F$a.deleteItem=function(F$e){this._array.splice(F$e,1),this.array=this._array},F$a.getCell=function(F$e){return this.runCallLater(this.changeCells),-1<F$e&&this._cells?this._cells[(F$e-this._startIndex)%this._cells.length]:null},F$a.scrollTo=function(F$e){if(this._scrollBar){var F$F=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(F$e/F$F)*this._cellSize}else this.startIndex=F$e},F$a.tweenTo=function(F$e,F$F,F$a){if(void 0===F$F&&(F$F=200),this._scrollBar){var F$o=this._isVertical?this.repeatX:this.repeatY;F$b.to(this._scrollBar,{value:Math.floor(F$e/F$o)*this._cellSize},F$F,null,F$a,0,!0)}else this.startIndex=F$e,F$a&&F$a.run()},F$a._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},F$a.commitMeasure=function(){this.runCallLater(this.changeCells)},F$Y(0,F$a,"cacheAs",F$e.prototype._$get_cacheAs,function(F$e){F$l.superSet(F$Z,this,"cacheAs",F$e),this._scrollBar&&(this._$P.cacheAs=null,"none"!==F$e?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),F$Y(0,F$a,"content",function(){return this._content}),F$Y(0,F$a,"height",F$e.prototype._$get_height,function(F$e){F$e!=this._height&&(F$l.superSet(F$Z,this,"height",F$e),this._setCellChanged())}),F$Y(0,F$a,"itemRender",function(){return this._itemRender},function(F$e){if(this._itemRender!=F$e){this._itemRender=F$e;for(var F$F=this._cells.length-1;-1<F$F;F$F--)this._cells[F$F].destroy();this._cells.length=0,this._setCellChanged()}}),F$Y(0,F$a,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$e){this._removePreScrollBar();var F$F=new F$Fe;F$F.name="scrollBar",F$F.right=0,F$e&&" "!=F$e&&(F$F.skin=F$e),this.scrollBar=F$F,this.addChild(F$F),this._setCellChanged()}),F$Y(0,F$a,"page",function(){return this._page},function(F$e){this._page=F$e,this._array&&(this._page=0<F$e?F$e:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),F$Y(0,F$a,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$e){this._removePreScrollBar();var F$F=new F$f;F$F.name="scrollBar",F$F.bottom=0,F$e&&" "!=F$e&&(F$F.skin=F$e),this.scrollBar=F$F,this.addChild(F$F),this._setCellChanged()}),F$Y(0,F$a,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(F$e){this._repeatX=F$e,this._setCellChanged()}),F$Y(0,F$a,"scrollBar",function(){return this._scrollBar},function(F$e){this._scrollBar!=F$e&&(this._scrollBar=F$e)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),F$Y(0,F$a,"width",F$e.prototype._$get_width,function(F$e){F$e!=this._width&&(F$l.superSet(F$Z,this,"width",F$e),this._setCellChanged())}),F$Y(0,F$a,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(F$e){this._repeatY=F$e,this._setCellChanged()}),F$Y(0,F$a,"spaceX",function(){return this._spaceX},function(F$e){this._spaceX=F$e,this._setCellChanged()}),F$Y(0,F$a,"spaceY",function(){return this._spaceY},function(F$e){this._spaceY=F$e,this._setCellChanged()}),F$Y(0,F$a,"selectedIndex",function(){return this._selectedIndex},function(F$e){this._selectedIndex!=F$e&&(this._selectedIndex=F$e,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(F$e),this.startIndex=this._startIndex)}),F$Y(0,F$a,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(F$e){this.selectedIndex=this._array.indexOf(F$e)}),F$Y(0,F$a,"length",function(){return this._array?this._array.length:0}),F$Y(0,F$a,"selection",function(){return this.getCell(this._selectedIndex)},function(F$e){this.selectedIndex=this._startIndex+this._cells.indexOf(F$e)}),F$Y(0,F$a,"startIndex",function(){return this._startIndex},function(F$e){this._startIndex=0<F$e?F$e:0,this.callLater(this.renderItems)}),F$Y(0,F$a,"array",function(){return this._array},function(F$e){this.runCallLater(this.changeCells),this._array=F$e||[];var F$F=this._array.length;if(this.totalPage=Math.ceil(F$F/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<F$F?this._selectedIndex:F$F-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var F$a=this._isVertical?this.repeatX:this.repeatY,F$o=this._isVertical?this.repeatY:this.repeatX,F$E=Math.ceil(F$F/F$a);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=F$o/F$E,this._scrollBar.setScroll(0,(F$E-F$o)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),F$Y(0,F$a,"dataSource",F$e.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)&&Math.floor(F$e)==F$e||"string"==typeof F$e?this.selectedIndex=parseInt(F$e):F$e instanceof Array?this.array=F$e:F$l.superSet(F$Z,this,"dataSource",F$e)}),F$Y(0,F$a,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),F$F}(F$Z),F$f=function(F$e){function F$F(){F$F.__super.call(this)}return F$s(F$F,"laya.ui.HScrollBar",F$e),F$F.prototype.initialize=function(){F$e.prototype.initialize.call(this),this.slider.isVertical=!1},F$F}(F$k),F$i=function(F$e){function F$F(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,F$F.__super.call(this),this.width=this.height=100}F$s(F$F,"laya.ui.Panel",F$e);var F$a=F$F.prototype;return F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),laya.ui.Component.prototype.destroy.call(this,F$e),this._content&&this._content.destroy(F$e),this._vScrollBar&&this._vScrollBar.destroy(F$e),this._hScrollBar&&this._hScrollBar.destroy(F$e),this._vScrollBar=null,this._hScrollBar=null,this._content=null},F$a.destroyChildren=function(){this._content.destroyChildren()},F$a.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new F$Z)},F$a.addChild=function(F$e){return F$e.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(F$e)},F$a.onResize=function(){this._setScrollChanged()},F$a.addChildAt=function(F$e,F$F){return F$e.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(F$e,F$F)},F$a.removeChild=function(F$e){return F$e.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(F$e)},F$a.removeChildAt=function(F$e){return this.getChildAt(F$e).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(F$e)},F$a.removeChildren=function(F$e,F$F){return void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=2147483647),this._content.removeChildren(F$e,F$F),this._setScrollChanged(),this},F$a.getChildAt=function(F$e){return this._content.getChildAt(F$e)},F$a.getChildByName=function(F$e){return this._content.getChildByName(F$e)},F$a.getChildIndex=function(F$e){return this._content.getChildIndex(F$e)},F$a.changeScroll=function(){this._scrollChanged=!1;var F$e=this.contentWidth||1,F$F=this.contentHeight||1,F$a=this._vScrollBar,F$o=this._hScrollBar,F$E=F$a&&F$F>this._height,F$s=F$o&&F$e>this._width,F$Y=F$E?this._width-F$a.width:this._width,F$_=F$s?this._height-F$o.height:this._height;F$a&&(F$a.x=this._width-F$a.width,F$a.y=0,F$a.height=this._height-(F$s?F$o.height:0),F$a.scrollSize=Math.max(.033*this._height,1),F$a.thumbPercent=F$_/F$F,F$a.setScroll(0,F$F-F$_,F$a.value)),F$o&&(F$o.x=0,F$o.y=this._height-F$o.height,F$o.width=this._width-(F$E?F$a.width:0),F$o.scrollSize=Math.max(.033*this._width,1),F$o.thumbPercent=F$Y/F$e,F$o.setScroll(0,F$e-F$Y,F$o.value))},F$a.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},F$a.setContentSize=function(F$e,F$F){var F$a=this._content;F$a.width=F$e,F$a.height=F$F,F$a.scrollRect||(F$a.scrollRect=new F$j),F$a.scrollRect.setTo(0,0,F$e,F$F),F$a.scrollRect=F$a.scrollRect},F$a.onScrollBarChange=function(F$e){var F$F=this._content.scrollRect;if(F$F){var F$a=Math.round(F$e.value);F$e.isVertical?F$F.y=F$a:F$F.x=F$a,this._content.scrollRect=F$F}},F$a.scrollTo=function(F$e,F$F){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),this.vScrollBar&&(this.vScrollBar.value=F$F),this.hScrollBar&&(this.hScrollBar.value=F$e)},F$a.refresh=function(){this.changeScroll()},F$a.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$l.superGet(F$Z,this,"cacheAs")),F$l.superSet(F$Z,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},F$a.onScrollEnd=function(){F$l.superSet(F$Z,this,"cacheAs",this._$P.cacheAs)},F$a._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},F$Y(0,F$a,"numChildren",function(){return this._content.numChildren}),F$Y(0,F$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$e){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new F$f),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=F$e}),F$Y(0,F$a,"contentWidth",function(){for(var F$e=0,F$F=this._content.numChildren-1;-1<F$F;F$F--){var F$a=this._content.getChildAt(F$F);F$e=Math.max(F$a.x+F$a.width*F$a.scaleX,F$e)}return F$e}),F$Y(0,F$a,"contentHeight",function(){for(var F$e=0,F$F=this._content.numChildren-1;-1<F$F;F$F--){var F$a=this._content.getChildAt(F$F);F$e=Math.max(F$a.y+F$a.height*F$a.scaleY,F$e)}return F$e}),F$Y(0,F$a,"width",F$e.prototype._$get_width,function(F$e){F$l.superSet(F$Z,this,"width",F$e),this._setScrollChanged()}),F$Y(0,F$a,"hScrollBar",function(){return this._hScrollBar}),F$Y(0,F$a,"content",function(){return this._content}),F$Y(0,F$a,"height",F$e.prototype._$get_height,function(F$e){F$l.superSet(F$Z,this,"height",F$e),this._setScrollChanged()}),F$Y(0,F$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$e){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new F$Fe),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=F$e}),F$Y(0,F$a,"vScrollBar",function(){return this._vScrollBar}),F$Y(0,F$a,"cacheAs",F$e.prototype._$get_cacheAs,function(F$e){F$l.superSet(F$Z,this,"cacheAs",F$e),this._$P.cacheAs=null,"none"!==F$e?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),F$F}(F$Z),F$Q=function(F$e){function F$F(F$e){F$F.__super.call(this,F$e),this.isVertical=!1}return F$s(F$F,"laya.ui.HSlider",F$d),F$F}(),F$t=function(F$e){function F$a(F$e,F$F){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,F$a.__super.call(this),this.skin=F$F,this.labels=F$e}F$s(F$a,"laya.ui.UIGroup",F$e);var F$F=F$a.prototype;return F$l.imps(F$F,{"laya.ui.IItem":!0}),F$F.preinitialize=function(){this.mouseEnabled=!0},F$F.destroy=function(F$e){void 0===F$e&&(F$e=!0),laya.ui.Component.prototype.destroy.call(this,F$e),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},F$F.addItem=function(F$e,F$F){void 0===F$F&&(F$F=!0);var F$a=F$e,F$o=this._items.length;if(F$a.name="item"+F$o,this.addChild(F$a),this.initItems(),F$F&&0<F$o){var F$E=this._items[F$o-1];"horizontal"==this._direction?F$a.x=F$E.x+F$E.width+this._space:F$a.y=F$E.y+F$E.height+this._space}else F$F&&(F$a.x=0,F$a.y=0);return F$o},F$F.delItem=function(F$e,F$F){void 0===F$F&&(F$F=!0);var F$a=this._items.indexOf(F$e);if(-1!=F$a){var F$o=F$e;this.removeChild(F$o);for(var F$E=F$a+1,F$s=this._items.length;F$E<F$s;F$E++){var F$Y=this._items[F$E];F$Y.name="item"+(F$E-1),F$F&&("horizontal"==this._direction?F$Y.x-=F$o.width+this._space:F$Y.y-=F$o.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var F$_;F$_=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=F$_}}},F$F.initItems=function(){this._items||(this._items=[]);for(var F$e=this._items.length=0;F$e<1e4;F$e++){var F$F=this.getChildByName("item"+F$e);if(null==F$F)break;this._items.push(F$F),F$F.selected=F$e===this._selectedIndex,F$F.clickHandler=F$O.create(this,this.itemClick,[F$e],!1)}},F$F.itemClick=function(F$e){this.selectedIndex=F$e},F$F.setSelect=function(F$e,F$F){this._items&&-1<F$e&&F$e<this._items.length&&(this._items[F$e].selected=F$F)},F$F.createItem=function(F$e,F$F){return null},F$F.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var F$e=0,F$F=0,F$a=this._items.length;F$F<F$a;F$F++){var F$o=this._items[F$F];this._skin&&(F$o.skin=this._skin),this._labelColors&&(F$o.labelColors=this._labelColors),this._labelSize&&(F$o.labelSize=this._labelSize),this._labelStroke&&(F$o.labelStroke=this._labelStroke),this._labelStrokeColor&&(F$o.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(F$o.strokeColors=this._strokeColors),this._labelBold&&(F$o.labelBold=this._labelBold),this._labelPadding&&(F$o.labelPadding=this._labelPadding),this._labelAlign&&(F$o.labelAlign=this._labelAlign),this._stateNum&&(F$o.stateNum=this._stateNum),this._labelFont&&(F$o.labelFont=this._labelFont),"horizontal"===this._direction?(F$o.y=0,F$o.x=F$e,F$e+=F$o.width+this._space):(F$o.x=0,F$o.y=F$e,F$e+=F$o.height+this._space)}this.changeSize()},F$F.commitMeasure=function(){this.runCallLater(this.changeLabels)},F$F._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},F$Y(0,F$F,"labelStrokeColor",function(){return this._labelStrokeColor},function(F$e){this._labelStrokeColor!=F$e&&(this._labelStrokeColor=F$e,this._setLabelChanged())}),F$Y(0,F$F,"skin",function(){return this._skin},function(F$e){this._skin!=F$e&&(this._skin=F$e,this._setLabelChanged())}),F$Y(0,F$F,"selectedIndex",function(){return this._selectedIndex},function(F$e){this._selectedIndex!=F$e&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$e,this.setSelect(F$e,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),F$Y(0,F$F,"labels",function(){return this._labels},function(F$e){if(this._labels!=F$e){if(this._labels=F$e,this.removeChildren(),this._setLabelChanged(),this._labels)for(var F$F=this._labels.split(","),F$a=0,F$o=F$F.length;F$a<F$o;F$a++){var F$E=this.createItem(this._skin,F$F[F$a]);F$E.name="item"+F$a,this.addChild(F$E)}this.initItems()}}),F$Y(0,F$F,"strokeColors",function(){return this._strokeColors},function(F$e){this._strokeColors!=F$e&&(this._strokeColors=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelColors",function(){return this._labelColors},function(F$e){this._labelColors!=F$e&&(this._labelColors=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelStroke",function(){return this._labelStroke},function(F$e){this._labelStroke!=F$e&&(this._labelStroke=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelSize",function(){return this._labelSize},function(F$e){this._labelSize!=F$e&&(this._labelSize=F$e,this._setLabelChanged())}),F$Y(0,F$F,"stateNum",function(){return this._stateNum},function(F$e){this._stateNum!=F$e&&(this._stateNum=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelBold",function(){return this._labelBold},function(F$e){this._labelBold!=F$e&&(this._labelBold=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelFont",function(){return this._labelFont},function(F$e){this._labelFont!=F$e&&(this._labelFont=F$e,this._setLabelChanged())}),F$Y(0,F$F,"labelPadding",function(){return this._labelPadding},function(F$e){this._labelPadding!=F$e&&(this._labelPadding=F$e,this._setLabelChanged())}),F$Y(0,F$F,"direction",function(){return this._direction},function(F$e){this._direction=F$e,this._setLabelChanged()}),F$Y(0,F$F,"space",function(){return this._space},function(F$e){this._space=F$e,this._setLabelChanged()}),F$Y(0,F$F,"items",function(){return this._items}),F$Y(0,F$F,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$e){this.selectedIndex=this._items.indexOf(F$e)}),F$Y(0,F$F,"dataSource",F$e.prototype._$get_dataSource,function(F$e){"number"==typeof(this._dataSource=F$e)&&Math.floor(F$e)==F$e||"string"==typeof F$e?this.selectedIndex=parseInt(F$e):F$e instanceof Array?this.labels=F$e.join(","):F$l.superSet(F$Z,this,"dataSource",F$e)}),F$a}(F$Z),F$c=function(F$F){function F$a(F$e,F$F){this._value=null,void 0===F$F&&(F$F=""),F$a.__super.call(this,F$e,F$F)}F$s(F$a,"laya.ui.Radio",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._value=null},F$e.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},F$e.initialize=function(){F$F.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},F$e.onClick=function(F$e){this.selected=!0},F$Y(0,F$e,"value",function(){return null!=this._value?this._value:this.label},function(F$e){this._value=F$e}),F$a}(F$z),F$h=function(F$e){function F$F(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,F$F.__super.call(this),this.width=this.height=200}F$s(F$F,"laya.ui.Tree",F$e);var F$a=F$F.prototype;return F$l.imps(F$a,{"laya.ui.IRender":!0}),F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),laya.ui.Component.prototype.destroy.call(this,F$e),this._list&&this._list.destroy(F$e),this._list=null,this._source=null,this._renderHandler=null},F$a.createChildren=function(){this.addChild(this._list=new F$W),this._list.renderHandler=F$O.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},F$a.onListChange=function(F$e){this.event("change")},F$a.getArray=function(){var F$e,F$F=[];for(var F$a in this._source)F$e=this._source[F$a],this.getParentOpenStatus(F$e)&&(F$e.x=this._spaceLeft*this.getDepth(F$e),F$F.push(F$e));return F$F},F$a.getDepth=function(F$e,F$F){return void 0===F$F&&(F$F=0),null==F$e.nodeParent?F$F:this.getDepth(F$e.nodeParent,F$F+1)},F$a.getParentOpenStatus=function(F$e){var F$F=F$e.nodeParent;return null==F$F||!!F$F.isOpen&&(null==F$F.nodeParent||this.getParentOpenStatus(F$F))},F$a.renderItem=function(F$e,F$F){var F$a=F$e.dataSource;if(F$a){F$e.left=F$a.x;var F$o=F$e.getChildByName("arrow");F$o&&(F$a.hasChild?(F$o.visible=!0,F$o.index=F$a.isOpen?1:0,F$o.tag=F$F,F$o.off("click",this,this.onArrowClick),F$o.on("click",this,this.onArrowClick)):F$o.visible=!1);var F$E=F$e.getChildByName("folder");F$E&&(2==F$E.clipY?F$E.index=F$a.isDirectory?0:1:F$E.index=F$a.isDirectory?F$a.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([F$e,F$F])}},F$a.onArrowClick=function(F$e){var F$F=F$e.currentTarget.tag;this._list.array[F$F].isOpen=!this._list.array[F$F].isOpen,this.event("open"),this._list.array=this.getArray()},F$a.setItemState=function(F$e,F$F){this._list.array[F$e]&&(this._list.array[F$e].isOpen=F$F,this._list.array=this.getArray())},F$a.fresh=function(){this._list.array=this.getArray(),this.repaint()},F$a.parseXml=function(F$e,F$F,F$a,F$o){var F$E,F$s=F$e.childNodes,F$Y=F$s.length;if(!F$o){F$E={};var F$_,F$R=F$e.attributes;for(var F$H in F$R){var F$g=(F$_=F$R[F$H]).nodeName,F$n=F$_.nodeValue;F$E[F$g]="true"==F$n||"false"!=F$n&&F$n}F$E.nodeParent=F$a,0<F$Y&&(F$E.isDirectory=!0),F$E.hasChild=0<F$Y,F$F.push(F$E)}for(var F$O=0;F$O<F$Y;F$O++){var F$q=F$s[F$O];this.parseXml(F$q,F$F,F$E,!1)}},F$a.parseOpenStatus=function(F$e,F$F){for(var F$a=0,F$o=F$F.length;F$a<F$o;F$a++){var F$E=F$F[F$a];if(F$E.isDirectory)for(var F$s=0,F$Y=F$e.length;F$s<F$Y;F$s++){var F$_=F$e[F$s];if(F$_.isDirectory&&this.isSameParent(F$_,F$E)&&F$E.label==F$_.label){F$E.isOpen=F$_.isOpen;break}}}},F$a.isSameParent=function(F$e,F$F){return null==F$e.nodeParent&&null==F$F.nodeParent||null!=F$e.nodeParent&&null!=F$F.nodeParent&&(F$e.nodeParent.label==F$F.nodeParent.label&&this.isSameParent(F$e.nodeParent,F$F.nodeParent))},F$a.filter=function(F$e){if(Boolean(F$e)){var F$F=[];this.getFilterSource(this._source,F$F,F$e),this._list.array=F$F}else this._list.array=this.getArray()},F$a.getFilterSource=function(F$e,F$F,F$a){var F$o;for(var F$E in F$a=F$a.toLocaleLowerCase(),F$e)!(F$o=F$e[F$E]).isDirectory&&-1<String(F$o.label).toLowerCase().indexOf(F$a)&&(F$o.x=0,F$F.push(F$o)),F$o.child&&0<F$o.child.length&&this.getFilterSource(F$o.child,F$F,F$a)},F$Y(0,F$a,"spaceBottom",function(){return this._list.spaceY},function(F$e){this._list.spaceY=F$e}),F$Y(0,F$a,"keepStatus",function(){return this._keepStatus},function(F$e){this._keepStatus=F$e}),F$Y(0,F$a,"itemRender",function(){return this._list.itemRender},function(F$e){this._list.itemRender=F$e}),F$Y(0,F$a,"array",function(){return this._list.array},function(F$e){this._keepStatus&&this._list.array&&F$e&&this.parseOpenStatus(this._list.array,F$e),this._source=F$e,this._list.array=this.getArray()}),F$Y(0,F$a,"mouseHandler",function(){return this._list.mouseHandler},function(F$e){this._list.mouseHandler=F$e}),F$Y(0,F$a,"dataSource",F$e.prototype._$get_dataSource,function(F$e){this._dataSource=F$e,F$l.superSet(F$Z,this,"dataSource",F$e)}),F$Y(0,F$a,"source",function(){return this._source}),F$Y(0,F$a,"scrollBar",function(){return this._list.scrollBar}),F$Y(0,F$a,"list",function(){return this._list}),F$Y(0,F$a,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(F$e){this._list.vScrollBarSkin=F$e}),F$Y(0,F$a,"renderHandler",function(){return this._renderHandler},function(F$e){this._renderHandler=F$e}),F$Y(0,F$a,"selectedIndex",function(){return this._list.selectedIndex},function(F$e){this._list.selectedIndex=F$e}),F$Y(0,F$a,"spaceLeft",function(){return this._spaceLeft},function(F$e){this._spaceLeft=F$e}),F$Y(0,F$a,"selectedItem",function(){return this._list.selectedItem},function(F$e){this._list.selectedItem=F$e}),F$Y(0,F$a,"width",F$e.prototype._$get_width,function(F$e){F$l.superSet(F$Z,this,"width",F$e),this._list.width=F$e}),F$Y(0,F$a,"height",F$e.prototype._$get_height,function(F$e){F$l.superSet(F$Z,this,"height",F$e),this._list.height=F$e}),F$Y(0,F$a,"xml",null,function(F$e){var F$F=[];this.parseXml(F$e.childNodes[0],F$F,null,!0),this.array=F$F}),F$Y(0,F$a,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),F$F}(F$Z),F$ee=function(F$e){function F$F(){this._items=null,this._selectedIndex=0,F$F.__super.call(this),this._setIndexHandler=F$O.create(this,this.setIndex,null,!1)}F$s(F$F,"laya.ui.ViewStack",F$e);var F$a=F$F.prototype;return F$l.imps(F$a,{"laya.ui.IItem":!0}),F$a.setItems=function(F$e){this.removeChildren();for(var F$F=0,F$a=0,F$o=F$e.length;F$a<F$o;F$a++){var F$E=F$e[F$a];F$E&&(F$E.name="item"+F$F,this.addChild(F$E),F$F++)}this.initItems()},F$a.addItem=function(F$e){F$e.name="item"+this._items.length,this.addChild(F$e),this.initItems()},F$a.initItems=function(){this._items=[];for(var F$e=0;F$e<1e4;F$e++){var F$F=this.getChildByName("item"+F$e);if(null==F$F)break;this._items.push(F$F),F$F.visible=F$e==this._selectedIndex}},F$a.setSelect=function(F$e,F$F){this._items&&-1<F$e&&F$e<this._items.length&&(this._items[F$e].visible=F$F)},F$a.setIndex=function(F$e){this.selectedIndex=F$e},F$Y(0,F$a,"dataSource",F$e.prototype._$get_dataSource,function(F$e){if("number"==typeof(this._dataSource=F$e)&&Math.floor(F$e)==F$e||"string"==typeof F$e)this.selectedIndex=parseInt(F$e);else for(var F$F in this._dataSource)this.hasOwnProperty(F$F)&&(this[F$F]=this._dataSource[F$F])}),F$Y(0,F$a,"selectedIndex",function(){return this._selectedIndex},function(F$e){this._selectedIndex!=F$e&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$e,this.setSelect(this._selectedIndex,!0))}),F$Y(0,F$a,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$e){this.selectedIndex=this._items.indexOf(F$e)}),F$Y(0,F$a,"items",function(){return this._items}),F$Y(0,F$a,"setIndexHandler",function(){return this._setIndexHandler},function(F$e){this._setIndexHandler=F$e}),F$F}(F$Z),F$Fe=function(F$e){function F$F(){F$F.__super.call(this)}return F$s(F$F,"laya.ui.VScrollBar",F$k),F$F}(),F$ae=function(F$F){function F$a(F$e){this._bg=null,this._skin=null,F$a.__super.call(this),void 0===F$e&&(F$e=""),this.text=F$e,this.skin=this.skin}F$s(F$a,"laya.ui.TextInput",F$F);var F$e=F$a.prototype;return F$e.preinitialize=function(){this.mouseEnabled=!0},F$e.destroy=function(F$e){F$$.clearCache(this,this._skin),void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._bg&&this._bg.destroy(),this._bg=null},F$e.createChildren=function(){this.addChild(this._tf=new F$q),this._tf.padding=F$K.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},F$e._onFocus=function(){this.event("focus",this)},F$e._onBlur=function(){this.event("blur",this)},F$e._onInput=function(){this.event("input",this)},F$e._onEnter=function(){this.event("enter",this)},F$e.initialize=function(){this.width=128,this.height=22},F$e.select=function(){this._tf.select()},F$e.setSelection=function(F$e,F$F){this._tf.setSelection(F$e,F$F)},F$Y(0,F$e,"text",F$F.prototype._$get_text,function(F$e){this._tf.text!=F$e&&(F$e+="",this._tf.text=F$e,this.event("change"))}),F$Y(0,F$e,"bg",function(){return this._bg},function(F$e){this.graphics=this._bg=F$e}),F$Y(0,F$e,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(F$e){this._tf.inputElementYAdjuster=F$e}),F$Y(0,F$e,"multiline",function(){return this._tf.multiline},function(F$e){this._tf.multiline=F$e}),F$Y(0,F$e,"skin",function(){return this._skin},function(F$e){this._skin!=F$e&&(F$$.clearCache(this,this._skin),this._skin=F$e,this._bg||(this.graphics=this._bg=new F$A),F$$.keepCache(this,this._skin),this._bg.source=F$$.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),F$Y(0,F$e,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(F$e){this._bg||(this.graphics=this._bg=new F$A),this._bg.sizeGrid=F$V.fillArray(F$K.defaultSizeGrid,F$e,Number)}),F$Y(0,F$e,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(F$e){this._tf.inputElementXAdjuster=F$e}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$S,this,"width",F$e),this._bg&&(this._bg.width=F$e)}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$S,this,"height",F$e),this._bg&&(this._bg.height=F$e)}),F$Y(0,F$e,"editable",function(){return this._tf.editable},function(F$e){this._tf.editable=F$e}),F$Y(0,F$e,"restrict",function(){return this._tf.restrict},function(F$e){this._tf.restrict=F$e}),F$Y(0,F$e,"prompt",function(){return this._tf.prompt},function(F$e){this._tf.prompt=F$e}),F$Y(0,F$e,"promptColor",function(){return this._tf.promptColor},function(F$e){this._tf.promptColor=F$e}),F$Y(0,F$e,"maxChars",function(){return this._tf.maxChars},function(F$e){this._tf.maxChars=F$e}),F$Y(0,F$e,"focus",function(){return this._tf.focus},function(F$e){this._tf.focus=F$e}),F$Y(0,F$e,"type",function(){return this._tf.type},function(F$e){this._tf.type=F$e}),F$Y(0,F$e,"asPassword",function(){return this._tf.asPassword},function(F$e){this._tf.asPassword=F$e}),F$a}(F$S),F$oe=function(F$e){function F$F(){F$F.__super.call(this)}return F$s(F$F,"laya.ui.VSlider",F$d),F$F}(),F$Ee=function(F$e){function F$o(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,F$o.__super.call(this)}F$s(F$o,"laya.ui.Dialog",F$e);var F$F=F$o.prototype;return F$F.initialize=function(){this.popupEffect=F$o.manager.popupEffectHandler,this.closeEffect=F$o.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},F$F._dealDragArea=function(){var F$e=this.getChildByName("drag");F$e&&(this.dragArea=F$e.x+","+F$e.y+","+F$e.width+","+F$e.height,F$e.removeSelf())},F$F._onClick=function(F$e){var F$F=F$e.target;if(F$F)switch(F$F.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(F$F.name)}},F$F.show=function(F$e,F$F){void 0===F$e&&(F$e=!1),void 0===F$F&&(F$F=!0),this._open(!1,F$e,F$F)},F$F.popup=function(F$e,F$F){void 0===F$e&&(F$e=!1),void 0===F$F&&(F$F=!0),this._open(!0,F$e,F$F)},F$F._open=function(F$e,F$F,F$a){F$o.manager.lock(!1),this.isModal=F$e,F$o.manager.open(this,F$F,F$a)},F$F.onOpened=function(){},F$F.close=function(F$e,F$F){void 0===F$F&&(F$F=!0),F$o.manager.close(this,F$e,F$F)},F$F.onClosed=function(F$e){},F$F._onMouseDown=function(F$e){var F$F=this.getMousePoint();this._dragArea.contains(F$F.x,F$F.y)?this.startDrag():this.stopDrag()},F$Y(0,F$F,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(F$e){if(F$e){var F$F=F$V.fillArray([0,0,0,0],F$e,Number);this._dragArea=new F$j(F$F[0],F$F[1],F$F[2],F$F[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),F$Y(0,F$F,"isPopup",function(){return null!=this.parent}),F$Y(0,F$F,"zOrder",F$e.prototype._$get_zOrder,function(F$e){F$l.superSet(F$u,this,"zOrder",F$e),F$o.manager._checkMask()}),F$Y(1,F$o,"manager",function(){return F$o._manager=F$o._manager||new F$r},function(F$e){F$o._manager=F$e}),F$o.setLockView=function(F$e){F$o.manager.setLockView(F$e)},F$o.lock=function(F$e){F$o.manager.lock(F$e)},F$o.closeAll=function(){F$o.manager.closeAll()},F$o.getDialogsByGroup=function(F$e){return F$o.manager.getDialogsByGroup(F$e)},F$o.closeByGroup=function(F$e){return F$o.manager.closeByGroup(F$e)},F$o.CLOSE="close",F$o.CANCEL="cancel",F$o.SURE="sure",F$o.NO="no",F$o.OK="ok",F$o.YES="yes",F$o._manager=null,F$o}(F$u),F$se=function(F$e){function F$F(){F$F.__super.call(this)}F$s(F$F,"laya.ui.HBox",F$e);var F$a=F$F.prototype;return F$a.sortItem=function(F$e){F$e&&F$e.sort(function(F$e,F$F){return F$e.x-F$F.x})},F$a.changeItems=function(){this._itemChanged=!1;for(var F$e=[],F$F=0,F$a=0,F$o=this.numChildren;F$a<F$o;F$a++){var F$E=this.getChildAt(F$a);F$E&&F$E.layoutEnabled&&(F$e.push(F$E),F$F=this._height?this._height:Math.max(F$F,F$E.height*F$E.scaleY))}this.sortItem(F$e);var F$s=0;for(F$a=0,F$o=F$e.length;F$a<F$o;F$a++)(F$E=F$e[F$a]).x=F$s,F$s+=F$E.width*F$E.scaleX+this._space,"top"==this._align?F$E.y=0:"middle"==this._align?F$E.y=.5*(F$F-F$E.height*F$E.scaleY):"bottom"==this._align&&(F$E.y=F$F-F$E.height*F$E.scaleY);this.changeSize()},F$Y(0,F$a,"height",F$e.prototype._$get_height,function(F$e){this._height!=F$e&&(F$l.superSet(F$N,this,"height",F$e),this.callLater(this.changeItems))}),F$F.NONE="none",F$F.TOP="top",F$F.MIDDLE="middle",F$F.BOTTOM="bottom",F$F}(F$N),F$Ye=function(F$e){function F$F(){F$F.__super.call(this)}F$s(F$F,"laya.ui.VBox",F$e);var F$a=F$F.prototype;return F$a.changeItems=function(){this._itemChanged=!1;for(var F$e=[],F$F=0,F$a=0,F$o=this.numChildren;F$a<F$o;F$a++){var F$E=this.getChildAt(F$a);F$E&&F$E.layoutEnabled&&(F$e.push(F$E),F$F=this._width?this._width:Math.max(F$F,F$E.width*F$E.scaleX))}this.sortItem(F$e);var F$s=0;for(F$a=0,F$o=F$e.length;F$a<F$o;F$a++)(F$E=F$e[F$a]).y=F$s,F$s+=F$E.height*F$E.scaleY+this._space,"left"==this._align?F$E.x=0:"center"==this._align?F$E.x=.5*(F$F-F$E.width*F$E.scaleX):"right"==this._align&&(F$E.x=F$F-F$E.width*F$E.scaleX);this.changeSize()},F$Y(0,F$a,"width",F$e.prototype._$get_width,function(F$e){this._width!=F$e&&(F$l.superSet(F$N,this,"width",F$e),this.callLater(this.changeItems))}),F$F.NONE="none",F$F.LEFT="left",F$F.CENTER="center",F$F.RIGHT="right",F$F}(F$N),F$_e=function(F$e){function F$F(){F$F.__super.call(this)}return F$s(F$F,"laya.ui.RadioGroup",F$t),F$F.prototype.createItem=function(F$e,F$F){return new F$c(F$e,F$F)},F$F}(),F$Re=function(F$e){function F$F(){F$F.__super.call(this)}return F$s(F$F,"laya.ui.Tab",F$t),F$F.prototype.createItem=function(F$e,F$F){return new F$z(F$e,F$F)},F$F}(),F$He=function(F$F){function F$a(F$e){this._vScrollBar=null,this._hScrollBar=null,void 0===F$e&&(F$e=""),F$a.__super.call(this,F$e)}F$s(F$a,"laya.ui.TextArea",F$F);var F$e=F$a.prototype;return F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},F$e.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},F$e.onVBarChanged=function(F$e){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},F$e.onHBarChanged=function(F$e){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},F$e.changeScroll=function(){var F$e=this._vScrollBar&&0<this._tf.maxScrollY,F$F=this._hScrollBar&&0<this._tf.maxScrollX,F$a=F$e?this._width-this._vScrollBar.width:this._width,F$o=F$F?this._height-this._hScrollBar.height:this._height,F$E=this._tf.padding||F$K.labelPadding;this._tf.width=F$a,this._tf.height=F$o,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-F$E[2],this._vScrollBar.y=F$E[1],this._vScrollBar.height=this._height-(F$F?this._hScrollBar.height:0)-F$E[1]-F$E[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=F$o/Math.max(this._tf.textHeight,F$o),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=F$e),this._hScrollBar&&(this._hScrollBar.x=F$E[0],this._hScrollBar.y=this._height-this._hScrollBar.height-F$E[3],this._hScrollBar.width=this._width-(F$e?this._vScrollBar.width:0)-F$E[0]-F$E[2],this._hScrollBar.scrollSize=Math.max(.033*F$a,1),this._hScrollBar.thumbPercent=F$a/Math.max(this._tf.textWidth,F$a),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=F$F)},F$e.scrollTo=function(F$e){this.commitMeasure(),this._tf.scrollY=F$e},F$Y(0,F$e,"scrollY",function(){return this._tf.scrollY}),F$Y(0,F$e,"width",F$F.prototype._$get_width,function(F$e){F$l.superSet(F$ae,this,"width",F$e),this.callLater(this.changeScroll)}),F$Y(0,F$e,"hScrollBar",function(){return this._hScrollBar}),F$Y(0,F$e,"height",F$F.prototype._$get_height,function(F$e){F$l.superSet(F$ae,this,"height",F$e),this.callLater(this.changeScroll)}),F$Y(0,F$e,"maxScrollX",function(){return this._tf.maxScrollX}),F$Y(0,F$e,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$e){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new F$Fe),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=F$e}),F$Y(0,F$e,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$e){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new F$f),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=F$e}),F$Y(0,F$e,"vScrollBar",function(){return this._vScrollBar}),F$Y(0,F$e,"maxScrollY",function(){return this._tf.maxScrollY}),F$Y(0,F$e,"scrollX",function(){return this._tf.scrollX}),F$a}(F$ae);!function(F$e){function F$F(){this._uiView=null,this.isCloseOther=!1,F$F.__super.call(this)}F$s(F$F,"laya.ui.AsynDialog",F$Ee);var F$a=F$F.prototype;F$a.createView=function(F$e){this._uiView=F$e},F$a._open=function(F$e,F$F,F$a){this.isModal=F$e,this.isCloseOther=F$F,F$Ee.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},F$a.onCreated=function(){this.createUI(),this.onOpen()},F$a.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},F$a.onOpen=function(){F$Ee.manager.open(this,this.isCloseOther),F$Ee.manager.lock(!1)},F$a.close=function(F$e,F$F){void 0===F$F&&(F$F=!0),F$Ee.manager.close(this),this.onClose()},F$a.onClose=function(){},F$a.destroy=function(F$e){void 0===F$e&&(F$e=!0),laya.ui.View.prototype.destroy.call(this,F$e),this._uiView=null,this.onDestroy()},F$a.onDestroy=function(){}}();F$l.__init([F$u])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}}),function(F$O,F$e,F$D){F$D.un,F$D.uns;var F$n=F$D.static,F$q=F$D.class,F$I=F$D.getset,F$o=F$D.__newvec,F$M=laya.maths.Arith,F$Y=laya.webgl.atlas.AtlasResourceManager,F$a=laya.webgl.shader.BaseShader,F$U=laya.utils.Browser,F$_=laya.webgl.utils.Buffer,F$m=laya.utils.Byte,F$E=laya.utils.ClassUtils,F$R=F$D.Config,F$s=(laya.events.Event,laya.events.EventDispatcher),F$K=laya.utils.Handler,F$j=laya.net.Loader,F$F=laya.net.LoaderManager,F$H=(laya.maths.MathUtil,laya.display.Node),F$l=laya.renders.Render,F$g=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),F$P=laya.resource.Resource,F$$=laya.utils.RunDriver,F$y=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),F$b=laya.display.Sprite,F$L=laya.utils.Stat,F$B=laya.utils.StringKey,F$V=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),F$v=laya.utils.Utils,F$G=laya.webgl.WebGL,F$A=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;F$D.interface("laya.d3.core.IClone"),F$D.interface("laya.d3.graphics.IVertex"),F$D.interface("laya.d3.core.render.IUpdate"),F$D.interface("laya.d3.core.scene.ITreeNode"),F$D.interface("laya.d3.core.render.IRenderable");(function(){function F$z(){}F$q(F$z,"laya.d3.animation.AnimationClipParser01"),F$z.READ_DATA=function(){F$z._DATA.offset=F$z._reader.getUint32(),F$z._DATA.size=F$z._reader.getUint32()},F$z.READ_BLOCK=function(){for(var F$e=F$z._BLOCK.count=F$z._reader.getUint16(),F$F=F$z._BLOCK.blockStarts=[],F$a=F$z._BLOCK.blockLengths=[],F$o=0;F$o<F$e;F$o++)F$F.push(F$z._reader.getUint32()),F$a.push(F$z._reader.getUint32())},F$z.READ_STRINGS=function(){var F$e=F$z._reader.getUint32(),F$F=F$z._reader.getUint16(),F$a=F$z._reader.pos;F$z._reader.pos=F$e+F$z._DATA.offset;for(var F$o=0;F$o<F$F;F$o++)F$z._strings[F$o]=F$z._reader.readUTFString();F$z._reader.pos=F$a},F$z.parse=function(F$e,F$F){F$z._animationClip=F$e;(F$z._reader=F$F).__getBuffer();F$z.READ_DATA(),F$z.READ_BLOCK(),F$z.READ_STRINGS();for(var F$a=0,F$o=F$z._BLOCK.count;F$a<F$o;F$a++){var F$E=F$F.getUint16(),F$s=F$z._strings[F$E],F$Y=F$z["READ_"+F$s];if(null==F$Y)throw new Error("model file err,no this function:"+F$E+" "+F$s);F$Y.call()}},F$z.READ_ANIMATIONS=function(){var F$e,F$F=0,F$a=0,F$o=F$z._reader,F$E=F$o.__getBuffer(),F$s=[],F$Y=F$o.getUint8();for(F$s.length=F$Y,F$F=0;F$F<F$Y;F$F++)F$s[F$F]=F$o.getUint16();var F$_=[],F$R=F$o.getUint16();for(F$_.length=F$R,F$F=0;F$F<F$R;F$F++)F$_[F$F]=F$o.getFloat32();var F$H=F$z._animationClip;F$H.name=F$z._strings[F$o.getUint16()];var F$g=F$H._duration=F$o.getFloat32();F$H.islooping=!!F$o.getByte(),F$H._frameRate=F$o.getInt16();var F$n=F$o.getInt16(),F$O=F$H._nodes=new Array;F$O.length=F$n,(F$H._publicClipDatas=[]).length=F$n;var F$q=F$H._nodesMap={},F$I=0,F$l=0;for(F$F=0;F$F<F$n;F$F++){F$e=F$O[F$F]=new F$C;var F$P=F$o.getUint16(),F$j=F$e.path=[];for(F$j.length=F$P,F$a=0;F$a<F$P;F$a++)F$j[F$a]=F$z._strings[F$o.getUint16()];var F$$=F$j.join("/"),F$y=F$q[F$$];F$y||(F$q[F$$]=F$y=[]),F$y.push(F$e);var F$M=F$o.getInt16();-1!==F$M&&(F$e.componentType=F$z._strings[F$M]);var F$D=F$w._propertyIndexDic[F$z._strings[F$o.getUint16()]];if(null==F$D)throw new Error("AnimationClipParser01:unknown property name.");var F$m=F$D<4,F$b=!F$m||F$m&&""===F$j[0];(F$e._cacheProperty=F$b)?F$I++:F$l++,F$e.propertyNameID=F$D;var F$L=F$s[F$o.getUint8()];F$e.keyFrameWidth=F$L/4;var F$B=F$e.keyFrames=[],F$v=F$B.length=F$o.getUint16(),F$K=null,F$V=NaN;for(F$a=0;F$a<F$v;F$a++){var F$G=F$B[F$a]=new F$S;F$V=F$G.startTime=F$_[F$o.getUint16()];var F$A=F$o.pos;F$G.inTangent=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$A=F$o.pos,F$G.outTangent=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$A=F$o.pos,F$G.data=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$K&&(F$K.next=F$G,F$K.duration=F$V-F$K.startTime),F$K=F$G}F$G.next=null,F$G.duration=F$g-F$V}var F$U=F$H._nodeToCachePropertyMap=new Int32Array(F$n),F$r=F$H._cachePropertyMap=new Int32Array(F$I),F$Z=F$H._unCachePropertyMap=new Int32Array(F$l);for(F$I=F$l=0,F$F=0;F$F<F$n;F$F++)(F$e=F$O[F$F])._cacheProperty?(F$U[F$F]=F$I,F$r[F$I++]=F$F):F$Z[F$l++]=F$F},F$z._animationClip=null,F$z._reader=null,F$z._strings=[],F$n(F$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function F$k(){}F$q(F$k,"laya.d3.animation.AnimationClipParser02"),F$k.READ_DATA=function(){F$k._DATA.offset=F$k._reader.getUint32(),F$k._DATA.size=F$k._reader.getUint32()},F$k.READ_BLOCK=function(){for(var F$e=F$k._BLOCK.count=F$k._reader.getUint16(),F$F=F$k._BLOCK.blockStarts=[],F$a=F$k._BLOCK.blockLengths=[],F$o=0;F$o<F$e;F$o++)F$F.push(F$k._reader.getUint32()),F$a.push(F$k._reader.getUint32())},F$k.READ_STRINGS=function(){var F$e=F$k._reader.getUint32(),F$F=F$k._reader.getUint16(),F$a=F$k._reader.pos;F$k._reader.pos=F$e+F$k._DATA.offset;for(var F$o=0;F$o<F$F;F$o++)F$k._strings[F$o]=F$k._reader.readUTFString();F$k._reader.pos=F$a},F$k.parse=function(F$e,F$F){F$k._animationClip=F$e;(F$k._reader=F$F).__getBuffer();F$k.READ_DATA(),F$k.READ_BLOCK(),F$k.READ_STRINGS();for(var F$a=0,F$o=F$k._BLOCK.count;F$a<F$o;F$a++){var F$E=F$F.getUint16(),F$s=F$k._strings[F$E],F$Y=F$k["READ_"+F$s];if(null==F$Y)throw new Error("model file err,no this function:"+F$E+" "+F$s);F$Y.call()}},F$k.READ_ANIMATIONS=function(){var F$e,F$F=0,F$a=0,F$o=F$k._reader,F$E=F$o.__getBuffer(),F$s=[],F$Y=F$o.getUint8();for(F$s.length=F$Y,F$F=0;F$F<F$Y;F$F++)F$s[F$F]=F$o.getUint16();var F$_=[],F$R=F$o.getUint16();for(F$_.length=F$R,F$F=0;F$F<F$R;F$F++)F$_[F$F]=F$o.getFloat32();var F$H=F$k._animationClip;F$H.name=F$k._strings[F$o.getUint16()];var F$g=F$H._duration=F$o.getFloat32();F$H.islooping=!!F$o.getByte(),F$H._frameRate=F$o.getInt16();var F$n=F$o.getInt16(),F$O=F$H._nodes=new Array;F$O.length=F$n,(F$H._publicClipDatas=[]).length=F$n;var F$q=F$H._nodesMap={},F$I=0,F$l=0;for(F$F=0;F$F<F$n;F$F++){F$e=F$O[F$F]=new F$C;var F$P=F$o.getUint16(),F$j=F$e.path=[];for(F$j.length=F$P,F$a=0;F$a<F$P;F$a++)F$j[F$a]=F$k._strings[F$o.getUint16()];var F$$=F$j.join("/"),F$y=F$q[F$$];F$y||(F$q[F$$]=F$y=[]),F$y.push(F$e);var F$M=F$o.getInt16();-1!==F$M&&(F$e.componentType=F$k._strings[F$M]);var F$D=F$w._propertyIndexDic[F$k._strings[F$o.getUint16()]];if(null==F$D)throw new Error("AnimationClipParser02:unknown property name.");var F$m=F$D<4,F$b=!F$m||F$m&&""===F$j[0];(F$e._cacheProperty=F$b)?F$I++:F$l++,F$e.propertyNameID=F$D;var F$L=F$s[F$o.getUint8()];F$e.keyFrameWidth=F$L/4;var F$B=F$e.keyFrames=[],F$v=F$B.length=F$o.getUint16(),F$K=null,F$V=NaN;for(F$a=0;F$a<F$v;F$a++){var F$G=F$B[F$a]=new F$S;F$V=F$G.startTime=F$_[F$o.getUint16()];var F$A=F$o.pos;F$G.inTangent=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$A=F$o.pos,F$G.outTangent=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$A=F$o.pos,F$G.data=new Float32Array(F$E.slice(F$A,F$A+F$L)),F$o.pos+=F$L,F$K&&(F$K.next=F$G,F$K.duration=F$V-F$K.startTime),F$K=F$G}F$G.next=null,F$G.duration=F$g-F$V}var F$U=F$o.getUint16();for(F$F=0;F$F<F$U;F$F++){var F$r,F$Z=new F$d;F$Z.time=F$o.getFloat32(),F$Z.eventName=F$k._strings[F$o.getUint16()];var F$z=F$o.getUint16();for(0<F$z&&(F$Z.params=F$r=[]),F$a=0;F$a<F$z;F$a++){switch(F$o.getByte()){case 0:F$r.push(!!F$o.getByte());break;case 1:F$r.push(F$o.getInt32());break;case 2:F$r.push(F$o.getFloat32());break;case 3:F$r.push(F$k._strings[F$o.getUint16()]);break;default:throw new Error("unknown type.")}}F$H.addEvent(F$Z)}var F$T=F$H._nodeToCachePropertyMap=new Int32Array(F$n),F$p=F$H._cachePropertyMap=new Int32Array(F$I),F$J=F$H._unCachePropertyMap=new Int32Array(F$l);for(F$I=F$l=0,F$F=0;F$F<F$n;F$F++)(F$e=F$O[F$F])._cacheProperty?(F$T[F$F]=F$I,F$p[F$I++]=F$F):F$J[F$l++]=F$F},F$k._animationClip=null,F$k._reader=null,F$k._strings=[],F$n(F$k,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var F$d=function(){function F$e(){this.time=NaN,this.eventName=null,this.params=null}return F$q(F$e,"laya.d3.animation.AnimationEvent"),F$e}(),F$w=function(){function F$o(){this._childs=[],this.transform=new F$$F(this)}F$q(F$o,"laya.d3.animation.AnimationNode");var F$e=F$o.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.addChild=function(F$e){F$e._parent=this,F$e.transform.setParent(this.transform),this._childs.push(F$e)},F$e.removeChild=function(F$e){var F$F=this._childs.indexOf(F$e);-1!==F$F&&this._childs.splice(F$F,1)},F$e.getChildByName=function(F$e){for(var F$F=0,F$a=this._childs.length;F$F<F$a;F$F++){var F$o=this._childs[F$F];if(F$o.name===F$e)return F$o}return null},F$e.getChildByIndex=function(F$e){return this._childs[F$e]},F$e.getChildCount=function(){return this._childs.length},F$e.cloneTo=function(F$e){var F$F=F$e;F$F.name=this.name;for(var F$a=0,F$o=this._childs.length;F$a<F$o;F$a++){var F$E=this._childs[F$a],F$s=F$E.clone();F$F.addChild(F$s);var F$Y=F$E.transform,F$_=F$s.transform;F$_.setLocalPosition(F$Y.getLocalPosition()),F$_.setLocalRotation(F$Y.getLocalRotation()),F$_.setLocalScale(F$Y.getLocalScale()),F$_._localRotationEuler=F$Y._localRotationEuler,F$_._setWorldMatrixIgnoreUpdate(F$Y.getWorldMatrix())}},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$o.__init__=function(){F$o.registerAnimationNodeProperty("localPosition",F$o._getLocalPosition,F$o._setLocalPosition),F$o.registerAnimationNodeProperty("localRotation",F$o._getLocalRotation,F$o._setLocalRotation),F$o.registerAnimationNodeProperty("localScale",F$o._getLocalScale,F$o._setLocalScale),F$o.registerAnimationNodeProperty("localRotationEuler",F$o._getLocalRotationEuler,F$o._setLocalRotationEuler),F$o.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",F$o._getParticleRenderSharedMaterialTintColor,F$o._setParticleRenderSharedMaterialTintColor),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",F$o._getMeshRenderSharedMaterialTilingOffset,F$o._setMeshRenderSharedMaterialTilingOffset),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",F$o._getMeshRenderSharedMaterialAlbedo,F$o._setMeshRenderSharedMaterialAlbedo),F$o.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",F$o._getSkinnedMeshRenderSharedMaterialTilingOffset,F$o._setSkinnedMeshRenderSharedMaterialTilingOffset),F$o.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",F$o._getSkinnedMeshRenderSharedMaterialAlbedo,F$o._setSkinnedMeshRenderSharedMaterialAlbedo),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",F$o._getMeshRenderSharedMaterialAlbedo,F$o._setMeshRenderSharedMaterialAlbedo),F$o.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",F$o._getSkinnedMeshRenderSharedMaterialAlbedo,F$o._setSkinnedMeshRenderSharedMaterialAlbedo),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",F$o._getMeshRenderSharedMaterialIntensity,F$o._setMeshRenderSharedMaterialIntensity),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",F$o._getMeshRenderSharedMaterialAlpha,F$o._setMeshRenderSharedMaterialAlpha),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",F$o._getMeshRenderSharedMaterialAlphaColor,F$o._setMeshRenderSharedMaterialAlphaColor),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",F$o._getMeshRenderSharedMaterialBaseColor,F$o._setMeshRenderSharedMaterialBaseColor),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",F$o._getMeshRenderSharedMaterialDissolve,F$o._setMeshRenderSharedMaterialDissolve),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",F$o._getMeshRenderSharedMaterialDissolveSpeed,F$o._setMeshRenderSharedMaterialDissolveSpeed),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",F$o._getMeshRenderSharedMaterialMMultiplier,F$o._setMeshRenderSharedMaterialMMultiplier),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",F$o._getMeshRenderSharedMaterialBaseScrollSpeedX,F$o._setMeshRenderSharedMaterialBaseScrollSpeedX),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",F$o._getMeshRenderSharedMaterialBaseScrollSpeedY,F$o._setMeshRenderSharedMaterialBaseScrollSpeedY),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",F$o._getMeshRenderSharedMaterialSecondScrollSpeedX,F$o._setMeshRenderSharedMaterialSecondScrollSpeedX),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",F$o._getMeshRenderSharedMaterialSecondScrollSpeedY,F$o._setMeshRenderSharedMaterialSecondScrollSpeedY),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",F$o._getMeshRenderSharedMaterialDetailTilingOffset,F$o._setMeshRenderSharedMaterialDetailTilingOffset),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",F$o._getMeshRenderSharedMaterialDissolveTilingOffset,F$o._setMeshRenderSharedMaterialDissolveTilingOffset),F$o.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",F$o._getMeshRenderSharedMaterialMaskTilingOffset,F$o._setMeshRenderSharedMaterialMaskTilingOffset)},F$o.registerAnimationNodeProperty=function(F$e,F$F,F$a){if(F$o._propertyIndexDic[F$e])throw new Error("AnimationNode: this propertyName has registered.");F$o._propertyIndexDic[F$e]=F$o._propertyIDCounter,F$o._propertyGetFuncs[F$o._propertyIDCounter]=F$F,F$o._propertySetFuncs[F$o._propertyIDCounter]=F$a,F$o._propertyIDCounter++},F$o._getLocalPosition=function(F$e,F$F){return F$e?F$e.transform.getLocalPosition():F$F._transform.localPosition.elements},F$o._setLocalPosition=function(F$e,F$F,F$a){if(F$e)F$e.transform.setLocalPosition(F$a);else{var F$o=F$F._transform,F$E=F$o.localPosition;F$E.elements=F$a,F$o.localPosition=F$E}},F$o._getLocalRotation=function(F$e,F$F){return F$e?F$e.transform.getLocalRotation():F$F._transform.localRotation.elements},F$o._setLocalRotation=function(F$e,F$F,F$a){if(F$e)F$e.transform.setLocalRotation(F$a);else{var F$o=F$F._transform,F$E=F$o.localRotation;F$E.elements=F$a,F$o.localRotation=F$E}},F$o._getLocalScale=function(F$e,F$F){return F$e?F$e.transform.getLocalScale():F$F._transform.localScale.elements},F$o._setLocalScale=function(F$e,F$F,F$a){if(F$e)F$e.transform.setLocalScale(F$a);else{var F$o=F$F._transform,F$E=F$o.localScale;F$E.elements=F$a,F$o.localScale=F$E}},F$o._getLocalRotationEuler=function(F$e,F$F){return F$e?F$e.transform.getLocalRotationEuler():F$F._transform.localRotationEuler.elements},F$o._setLocalRotationEuler=function(F$e,F$F,F$a){if(F$e)F$e.transform.setLocalRotationEuler(F$a);else{var F$o=F$F._transform,F$E=F$o.localRotationEuler;F$E.elements=F$a,F$o.localRotationEuler=F$E}},F$o._getMeshRenderSharedMaterialTilingOffset=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return F$F.meshRender.sharedMaterial.tilingOffset.elements},F$o._setMeshRenderSharedMaterialTilingOffset=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).tilingOffset).elements=F$a,F$o.tilingOffset=F$E)}else(F$E=(F$o=F$F.meshRender.material).tilingOffset).elements=F$a,F$o.tilingOffset=F$E},F$o._getMeshRenderSharedMaterialAlbedo=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.albedoColor.elements:null}return F$F.meshRender.sharedMaterial.albedoColor.elements},F$o._setMeshRenderSharedMaterialAlbedo=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).albedoColor).elements=F$a,F$o.albedoColor=F$E)}else(F$E=(F$o=F$F.meshRender.material).albedoColor).elements=F$a,F$o.albedoColor=F$E},F$o._getSkinnedMeshRenderSharedMaterialTilingOffset=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return F$F.skinnedMeshRender.sharedMaterial.tilingOffset.elements},F$o._setSkinnedMeshRenderSharedMaterialTilingOffset=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.skinnedMeshRender.material).tilingOffset).elements=F$a,F$o.tilingOffset=F$E)}else(F$E=(F$o=F$F.skinnedMeshRender.material).tilingOffset).elements=F$a,F$o.tilingOffset=F$E},F$o._getSkinnedMeshRenderSharedMaterialAlbedo=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return F$F.skinnedMeshRender.sharedMaterial.albedoColor.elements},F$o._setSkinnedMeshRenderSharedMaterialAlbedo=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.skinnedMeshRender.material).albedoColor).elements=F$a,F$o.albedoColor=F$E)}else(F$E=(F$o=F$F.skinnedMeshRender.material).albedoColor).elements=F$a,F$o.albedoColor=F$E},F$o._getParticleRenderSharedMaterialTintColor=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.particleRender.sharedMaterial.tintColor.elements:null}return F$F.particleRender.sharedMaterial.tintColor.elements},F$o._setParticleRenderSharedMaterialTintColor=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.particleRender.material).tintColor).elements=F$a,F$o.tintColor=F$E)}else(F$E=(F$o=F$F.particleRender.material).tintColor).elements=F$a,F$o.tintColor=F$E},F$o._getMeshRenderSharedMaterialAlphaColor=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.alphaColor.elements:null}return F$F.meshRender.sharedMaterial.alphaColor.elements},F$o._setMeshRenderSharedMaterialAlphaColor=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).alphaColor).elements=F$a,F$o.alphaColor=F$E)}else(F$E=(F$o=F$F.meshRender.material).alphaColor).elements=F$a,F$o.alphaColor=F$E},F$o._getMeshRenderSharedMaterialBaseColor=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.baseColor.elements:null}return F$F.meshRender.sharedMaterial.baseColor.elements},F$o._setMeshRenderSharedMaterialBaseColor=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).baseColor).elements=F$a,F$o.baseColor=F$E)}else(F$E=(F$o=F$F.meshRender.material).baseColor).elements=F$a,F$o.baseColor=F$E},F$o._getMeshRenderSharedMaterialDissolve=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.dissolve:0}return F$F.meshRender.sharedMaterial.dissolve},F$o._setMeshRenderSharedMaterialDissolve=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.dissolve=F$a[0])}else F$F.meshRender.material.dissolve=F$a[0]},F$o._getMeshRenderSharedMaterialDissolveSpeed=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.dissolveSpeed:0}return F$F.meshRender.sharedMaterial.dissolveSpeed},F$o._setMeshRenderSharedMaterialDissolveSpeed=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.dissolveSpeed=F$a[0])}else F$F.meshRender.material.dissolveSpeed=F$a[0]},F$o._getMeshRenderSharedMaterialMMultiplier=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.mMultiplier:0}return F$F.meshRender.sharedMaterial.mMultiplier},F$o._setMeshRenderSharedMaterialMMultiplier=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.mMultiplier=F$a[0])}else F$F.meshRender.material.mMultiplier=F$a[0]},F$o._getMeshRenderSharedMaterialBaseScrollSpeedX=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return F$F.meshRender.sharedMaterial.baseScrollSpeedX},F$o._setMeshRenderSharedMaterialBaseScrollSpeedX=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.baseScrollSpeedX=F$a[0])}else F$F.meshRender.material.baseScrollSpeedX=F$a[0]},F$o._getMeshRenderSharedMaterialBaseScrollSpeedY=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return F$F.meshRender.sharedMaterial.baseScrollSpeedY},F$o._setMeshRenderSharedMaterialBaseScrollSpeedY=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.baseScrollSpeedY=F$a[0])}else F$F.meshRender.material.baseScrollSpeedY=F$a[0]},F$o._getMeshRenderSharedMaterialSecondScrollSpeedX=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return F$F.meshRender.sharedMaterial.secondScrollSpeedX},F$o._setMeshRenderSharedMaterialSecondScrollSpeedX=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.secondScrollSpeedX=F$a[0])}else F$F.meshRender.material.secondScrollSpeedX=F$a[0]},F$o._getMeshRenderSharedMaterialSecondScrollSpeedY=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return F$F.meshRender.sharedMaterial.secondScrollSpeedY},F$o._setMeshRenderSharedMaterialSecondScrollSpeedY=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.secondScrollSpeedY=F$a[0])}else F$F.meshRender.material.secondScrollSpeedY=F$a[0]},F$o._getMeshRenderSharedMaterialAlpha=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.alpha:0}return F$F.meshRender.sharedMaterial.alpha},F$o._setMeshRenderSharedMaterialAlpha=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.alpha=F$a[0])}else F$F.meshRender.material.alpha=F$a[0]},F$o._getMeshRenderSharedMaterialIntensity=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.intensity:0}return F$F.meshRender.sharedMaterial.intensity},F$o._setMeshRenderSharedMaterialIntensity=function(F$e,F$F,F$a){if(F$e){var F$o=F$e.transform._entity;F$o&&(F$o.owner.meshRender.material.intensity=F$a[0])}else F$F.meshRender.material.intensity=F$a[0]},F$o._getMeshRenderSharedMaterialDetailTilingOffset=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return F$F.meshRender.sharedMaterial.detailTilingOffset.elements},F$o._setMeshRenderSharedMaterialDetailTilingOffset=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).detailTilingOffset).elements=F$a,F$o.detailTilingOffset=F$E)}else(F$E=(F$o=F$F.meshRender.material).detailTilingOffset).elements=F$a,F$o.detailTilingOffset=F$E},F$o._getMeshRenderSharedMaterialDissolveTilingOffset=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return F$F.meshRender.sharedMaterial.dissolveTilingOffset.elements},F$o._setMeshRenderSharedMaterialDissolveTilingOffset=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).dissolveTilingOffset).elements=F$a,F$o.dissolveTilingOffset=F$E)}else(F$E=(F$o=F$F.meshRender.material).dissolveTilingOffset).elements=F$a,F$o.dissolveTilingOffset=F$E},F$o._getMeshRenderSharedMaterialMaskTilingOffset=function(F$e,F$F){if(F$e){var F$a=F$e.transform._entity;return F$a?F$a.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return F$F.meshRender.sharedMaterial.maskTilingOffset.elements},F$o._setMeshRenderSharedMaterialMaskTilingOffset=function(F$e,F$F,F$a){var F$o,F$E;if(F$e){var F$s=F$e.transform._entity;F$s&&((F$E=(F$o=F$s.owner.meshRender.material).maskTilingOffset).elements=F$a,F$o.maskTilingOffset=F$E)}else(F$E=(F$o=F$F.meshRender.material).maskTilingOffset).elements=F$a,F$o.maskTilingOffset=F$E},F$o._propertyIDCounter=0,F$o._propertyIndexDic={},F$o._propertySetFuncs=[],F$o._propertyGetFuncs=[],F$o}(),F$S=function(){function F$e(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return F$q(F$e,"laya.d3.animation.Keyframe"),F$e}(),F$C=function(){function F$e(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return F$q(F$e,"laya.d3.animation.KeyframeNode"),F$e}(),F$r=(function(){function F$e(){this._tempVector30=new F$YF,this._tempVector31=new F$YF,this._tempVector32=new F$YF,this._a=new F$YF,this._b=new F$YF,this._c=new F$YF,this._d=new F$YF}F$q(F$e,"laya.d3.core.glitter.SplineCurvePositionVelocity");var F$F=F$e.prototype;F$F.Init=function(F$e,F$F,F$a,F$o){F$e.cloneTo(this._d),F$F.cloneTo(this._c),F$YF.scale(F$e,2,this._a),F$YF.scale(F$a,2,this._tempVector30),F$YF.subtract(this._a,this._tempVector30,this._a),F$YF.add(this._a,F$F,this._a),F$YF.add(this._a,F$o,this._a),F$YF.scale(F$a,3,this._b),F$YF.scale(F$e,3,this._tempVector30),F$YF.subtract(this._b,this._tempVector30,this._b),F$YF.subtract(this._b,F$o,this._b),F$YF.scale(F$F,2,this._tempVector30),F$YF.subtract(this._b,this._tempVector30,this._b)},F$F.Slerp=function(F$e,F$F){F$YF.scale(this._a,F$e*F$e*F$e,this._tempVector30),F$YF.scale(this._b,F$e*F$e,this._tempVector31),F$YF.scale(this._c,F$e,this._tempVector32),F$YF.add(this._tempVector30,this._tempVector31,F$F),F$YF.add(F$F,this._tempVector32,F$F),F$YF.add(F$F,this._d,F$F)}}(),function(){function F$p(F$e,F$F,F$a,F$o){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=F$e,this._h=F$F,this._minHeight=F$a,this._maxHeight=F$o}F$q(F$p,"laya.d3.core.HeightMap");var F$e=F$p.prototype;F$e._inBounds=function(F$e,F$F){return 0<=F$e&&F$e<this._h&&0<=F$F&&F$F<this._w},F$e.getHeight=function(F$e,F$F){return this._inBounds(F$e,F$F)?this._datas[F$e][F$F]:NaN},F$I(0,F$e,"width",function(){return this._w}),F$I(0,F$e,"height",function(){return this._h}),F$I(0,F$e,"maxHeight",function(){return this._maxHeight}),F$I(0,F$e,"minHeight",function(){return this._minHeight}),F$p.creatFromMesh=function(F$e,F$F,F$a,F$o){for(var F$E=[],F$s=[],F$Y=F$e.getSubMeshCount(),F$_=0;F$_<F$Y;F$_++){for(var F$R=F$e.getSubMesh(F$_),F$H=F$R._getVertexBuffer(),F$g=F$H.getData(),F$n=[],F$O=0;F$O<F$g.length;F$O+=F$H.vertexDeclaration.vertexStride/4){var F$q=new F$YF(F$g[F$O+0],F$g[F$O+1],F$g[F$O+2]);F$n.push(F$q)}F$E.push(F$n);var F$I=F$R._getIndexBuffer();F$s.push(F$I.getData())}var F$l=F$e.boundingBox,F$P=F$l.min.x,F$j=F$l.min.z,F$$=F$l.max.x,F$y=F$l.max.z,F$M=F$l.min.y,F$D=F$l.max.y,F$m=F$$-F$P,F$b=F$y-F$j,F$L=F$o.elements[0]=F$m/(F$F-1),F$B=F$o.elements[1]=F$b/(F$a-1),F$v=new F$p(F$F,F$a,F$M,F$D),F$K=F$p._tempRay,F$V=F$K.direction.elements;F$V[0]=0,F$V[1]=-1,F$V[2]=0;var F$G=F$D+.1;F$K.origin.elements[1]=F$G;for(var F$A=0;F$A<F$a;F$A++){var F$U=F$j+F$A*F$B;F$v._datas[F$A]=[];for(var F$r=0;F$r<F$F;F$r++){var F$Z=F$P+F$r*F$L,F$z=F$K.origin.elements;F$z[0]=F$Z,F$z[2]=F$U;var F$T=F$p._getPosition(F$K,F$E,F$s);F$v._datas[F$A][F$r]=F$T===Number.MAX_VALUE?NaN:F$G-F$T}}return F$v},F$p.createFromImage=function(F$e,F$F,F$a){for(var F$o=F$e.width,F$E=F$e.height,F$s=new F$p(F$o,F$E,F$F,F$a),F$Y=(F$a-F$F)/254,F$_=F$e.getPixels(),F$R=0,F$H=0;F$H<F$E;F$H++)for(var F$g=F$s._datas[F$H]=[],F$n=0;F$n<F$o;F$n++){var F$O=F$_[F$R++],F$q=F$_[F$R++],F$I=F$_[F$R++],F$l=F$_[F$R++];F$g[F$n]=255==F$O&&255==F$q&&255==F$I&&255==F$l?NaN:(F$O+F$q+F$I)/3*F$Y+F$F}return F$s},F$p._getPosition=function(F$e,F$F,F$a){for(var F$o=Number.MAX_VALUE,F$E=0;F$E<F$F.length;F$E++)for(var F$s=F$F[F$E],F$Y=F$a[F$E],F$_=0;F$_<F$Y.length;F$_+=3){var F$R=F$s[F$Y[F$_+0]],F$H=F$s[F$Y[F$_+1]],F$g=F$s[F$Y[F$_+2]],F$n=F$IF.rayIntersectsTriangle(F$e,F$R,F$H,F$g);!isNaN(F$n)&&F$n<F$o&&(F$o=F$n)}return F$o},F$n(F$p,["_tempRay",function(){return this._tempRay=new F$EF(new F$YF,new F$YF)}])}(),function(){function F$E(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}F$q(F$E,"laya.d3.core.Layer");var F$e=F$E.prototype;return F$e._binarySearchIndex=function(){for(var F$e=0,F$F=F$E._collsionTestList.length-1,F$a=0;F$e<=F$F;){F$a=Math.floor((F$e+F$F)/2);var F$o=F$E._collsionTestList[F$a];if(F$o==this._number)return F$a;F$o>this._number?F$F=F$a-1:F$e=F$a+1}return F$e},F$e._addCollider=function(F$e){0===this._colliders.length&&F$E._collsionTestList.splice(this._binarySearchIndex(),0,this._number),F$e._isRigidbody?(this._colliders.unshift(F$e),this._nonRigidbodyOffset++):this._colliders.push(F$e)},F$e._removeCollider=function(F$e){var F$F=this._colliders.indexOf(F$e);F$F<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(F$F,1),0===this._colliders.length&&F$E._collsionTestList.splice(F$E._collsionTestList.indexOf(this._number),1)},F$I(0,F$e,"number",function(){return this._number}),F$I(0,F$e,"visible",function(){return this._visible},function(F$e){this._visible=F$e,F$E._visibleLayers=F$e?F$E._visibleLayers|this.mask:F$E._visibleLayers&~this.mask}),F$I(0,F$e,"mask",function(){return this._mask}),F$I(1,F$E,"visibleLayers",function(){return F$E._visibleLayers},function(F$e){F$E._visibleLayers=F$e;for(var F$F=0,F$a=F$E._layerList.length;F$F<F$a;F$F++){var F$o=F$E._layerList[F$F];F$o._visible=0!=(F$o._mask&F$E._visibleLayers)}}),F$E.__init__=function(){F$E._layerList.length=31;for(var F$e=0;F$e<31;F$e++){var F$F=new F$E;F$E._layerList[F$e]=F$F,0===F$e?(F$F.name="Default Layer",F$F.visible=!0):(F$F.name="Layer-"+F$e,F$F.visible=!1),F$F._number=F$e,F$F._mask=Math.pow(2,F$e)}F$E.currentCreationLayer=F$E._layerList[0]},F$E.getLayerByNumber=function(F$e){if(F$e<0||30<F$e)throw new Error("无法返回指定Layer，该number超出范围！");return F$E._layerList[F$e]},F$E.getLayerByName=function(F$e){for(var F$F=0;F$F<31;F$F++)if(F$E._layerList[F$F].name===F$e)return F$E._layerList[F$F];throw new Error("无法返回指定Layer,该name不存在")},F$E.isVisible=function(F$e){return 0!=(F$e&F$E._currentCameraCullingMask&F$E._visibleLayers)},F$E._layerList=[],F$E._visibleLayers=2147483647,F$E._collsionTestList=[],F$E._currentCameraCullingMask=2147483647,F$E.maxCount=31,F$E.currentCreationLayer=null,F$E}()),F$Z=(function(){function F$e(F$e,F$F,F$a){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=F$e,this._minCount=F$F,this._maxCount=F$a}F$q(F$e,"laya.d3.core.particleShuriKen.module.Burst");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.cloneTo=function(F$e){var F$F=F$e;F$F._time=this._time,F$F._minCount=this._minCount,F$F._maxCount=this._maxCount},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"time",function(){return this._time}),F$I(0,F$F,"minCount",function(){return this._minCount}),F$I(0,F$F,"maxCount",function(){return this._maxCount})}(),function(){function F$e(F$e){this._color=null,this.enbale=!1,this._color=F$e}F$q(F$e,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var F$F=F$e.prototype;F$F.cloneTo=function(F$e){var F$F=F$e;this._color.cloneTo(F$F._color),F$F.enbale=this.enbale},F$F.clone=function(){var F$e;switch(this._color.type){case 0:F$e=F$T.createByConstant(this._color.constant.clone());break;case 1:F$e=F$T.createByGradient(this._color.gradient.clone());break;case 2:F$e=F$T.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:F$e=F$T.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var F$F=new this.constructor(F$e);return F$F.enbale=this.enbale,F$F},F$I(0,F$F,"color",function(){return this._color})}(),function(){function F$e(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}F$q(F$e,"laya.d3.core.particleShuriKen.module.Emission");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),F$F._destroy=function(){this._bursts=null,this._destroyed=!0},F$F.getBurstsCount=function(){return this._bursts.length},F$F.getBurstByIndex=function(F$e){return this._bursts[F$e]},F$F.addBurst=function(F$e){var F$F=this._bursts.length;if(0<F$F)for(var F$a=0;F$a<F$F;F$a++)this._bursts[F$a].time>F$e.time&&this._bursts.splice(F$a,0,F$e);this._bursts.push(F$e)},F$F.removeBurst=function(F$e){var F$F=this._bursts.indexOf(F$e);-1!==F$F&&this._bursts.splice(F$F,1)},F$F.removeBurstByIndex=function(F$e){this._bursts.splice(F$e,1)},F$F.clearBurst=function(){this._bursts.length=0},F$F.cloneTo=function(F$e){var F$F=F$e,F$a=F$F._bursts;F$a.length=this._bursts.length;for(var F$o=0,F$E=this._bursts.length;F$o<F$E;F$o++){var F$s=F$a[F$o];F$s?this._bursts[F$o].cloneTo(F$s):F$a[F$o]=this._bursts[F$o].clone()}F$F._emissionRate=this._emissionRate,F$F.enbale=this.enbale},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"destroyed",function(){return this._destroyed}),F$I(0,F$F,"emissionRate",function(){return this._emissionRate},function(F$e){if(F$e<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=F$e})}(),function(){function F$o(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}F$q(F$o,"laya.d3.core.particleShuriKen.module.FrameOverTime");var F$e=F$o.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,F$F._constant=this._constant,this._overTime.cloneTo(F$F._overTime),F$F._constantMin=this._constantMin,F$F._constantMax=this._constantMax,this._overTimeMin.cloneTo(F$F._overTimeMin),this._overTimeMax.cloneTo(F$F._overTimeMax)},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"frameOverTimeData",function(){return this._overTime}),F$I(0,F$e,"constant",function(){return this._constant}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"frameOverTimeDataMin",function(){return this._overTimeMin}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"frameOverTimeDataMax",function(){return this._overTimeMax}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$o.createByConstant=function(F$e){var F$F=new F$o;return F$F._type=0,F$F._constant=F$e,F$F},F$o.createByOverTime=function(F$e){var F$F=new F$o;return F$F._type=1,F$F._overTime=F$e,F$F},F$o.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$o;return F$a._type=2,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$o.createByRandomTwoOverTime=function(F$e,F$F){var F$a=new F$o;return F$a._type=3,F$a._overTimeMin=F$e,F$a._overTimeMax=F$F,F$a},F$o}()),F$z=function(){function F$H(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}F$q(F$H,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var F$e=F$H.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,F$F._separateAxes=this._separateAxes,F$F._constant=this._constant,this._constantSeparate.cloneTo(F$F._constantSeparate),this._gradient.cloneTo(F$F._gradient),this._gradientX.cloneTo(F$F._gradientX),this._gradientY.cloneTo(F$F._gradientY),this._gradientZ.cloneTo(F$F._gradientZ),F$F._constantMin=this._constantMin,F$F._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$F._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$F._constantMaxSeparate),this._gradientMin.cloneTo(F$F._gradientMin),this._gradientMax.cloneTo(F$F._gradientMax),this._gradientXMin.cloneTo(F$F._gradientXMin),this._gradientXMax.cloneTo(F$F._gradientXMax),this._gradientYMin.cloneTo(F$F._gradientYMin),this._gradientYMax.cloneTo(F$F._gradientYMax),this._gradientZMin.cloneTo(F$F._gradientZMin),this._gradientZMax.cloneTo(F$F._gradientZMax)},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"gradientZ",function(){return this._gradientZ}),F$I(0,F$e,"constant",function(){return this._constant}),F$I(0,F$e,"gradient",function(){return this._gradient}),F$I(0,F$e,"separateAxes",function(){return this._separateAxes}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"constantSeparate",function(){return this._constantSeparate}),F$I(0,F$e,"gradientX",function(){return this._gradientX}),F$I(0,F$e,"gradientY",function(){return this._gradientY}),F$I(0,F$e,"gradientW",function(){return this._gradientW}),F$I(0,F$e,"gradientMin",function(){return this._gradientMin}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"gradientMax",function(){return this._gradientMax}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$I(0,F$e,"gradientWMin",function(){return this._gradientWMin}),F$I(0,F$e,"constantMinSeparate",function(){return this._constantMinSeparate}),F$I(0,F$e,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$I(0,F$e,"gradientXMin",function(){return this._gradientXMin}),F$I(0,F$e,"gradientXMax",function(){return this._gradientXMax}),F$I(0,F$e,"gradientWMax",function(){return this._gradientWMax}),F$I(0,F$e,"gradientYMin",function(){return this._gradientYMin}),F$I(0,F$e,"gradientYMax",function(){return this._gradientYMax}),F$I(0,F$e,"gradientZMin",function(){return this._gradientZMin}),F$I(0,F$e,"gradientZMax",function(){return this._gradientZMax}),F$H.createByConstant=function(F$e){var F$F=new F$H;return F$F._type=0,F$F._separateAxes=!1,F$F._constant=F$e,F$F},F$H.createByConstantSeparate=function(F$e){var F$F=new F$H;return F$F._type=0,F$F._separateAxes=!0,F$F._constantSeparate=F$e,F$F},F$H.createByGradient=function(F$e){var F$F=new F$H;return F$F._type=1,F$F._separateAxes=!1,F$F._gradient=F$e,F$F},F$H.createByGradientSeparate=function(F$e,F$F,F$a,F$o){var F$E=new F$H;return F$E._type=1,F$E._separateAxes=!0,F$E._gradientX=F$e,F$E._gradientY=F$F,F$E._gradientZ=F$a,F$E._gradientW=F$o,F$E},F$H.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$H;return F$a._type=2,F$a._separateAxes=!1,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$H.createByRandomTwoConstantSeparate=function(F$e,F$F){var F$a=new F$H;return F$a._type=2,F$a._separateAxes=!0,F$a._constantMinSeparate=F$e,F$a._constantMaxSeparate=F$F,F$a},F$H.createByRandomTwoGradient=function(F$e,F$F){var F$a=new F$H;return F$a._type=3,F$a._separateAxes=!1,F$a._gradientMin=F$e,F$a._gradientMax=F$F,F$a},F$H.createByRandomTwoGradientSeparate=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){var F$R=new F$H;return F$R._type=3,F$R._separateAxes=!0,F$R._gradientXMin=F$e,F$R._gradientXMax=F$F,F$R._gradientYMin=F$a,F$R._gradientYMax=F$o,F$R._gradientZMin=F$E,F$R._gradientZMax=F$s,F$R._gradientWMin=F$Y,F$R._gradientWMax=F$_,F$R},F$H}(),F$T=function(){function F$o(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}F$q(F$o,"laya.d3.core.particleShuriKen.module.GradientColor");var F$e=F$o.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,this._constant.cloneTo(F$F._constant),this._constantMin.cloneTo(F$F._constantMin),this._constantMax.cloneTo(F$F._constantMax),this._gradient.cloneTo(F$F._gradient),this._gradientMin.cloneTo(F$F._gradientMin),this._gradientMax.cloneTo(F$F._gradientMax)},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"gradient",function(){return this._gradient}),F$I(0,F$e,"constant",function(){return this._constant}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"gradientMin",function(){return this._gradientMin}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"gradientMax",function(){return this._gradientMax}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$o.createByConstant=function(F$e){var F$F=new F$o;return F$F._type=0,F$F._constant=F$e,F$F},F$o.createByGradient=function(F$e){var F$F=new F$o;return F$F._type=1,F$F._gradient=F$e,F$F},F$o.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$o;return F$a._type=2,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$o.createByRandomTwoGradient=function(F$e,F$F){var F$a=new F$o;return F$a._type=3,F$a._gradientMin=F$e,F$a._gradientMax=F$F,F$a},F$o}(),F$p=(function(){function F$e(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}F$q(F$e,"laya.d3.core.particleShuriKen.module.GradientDataColor");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.addAlpha=function(F$e,F$F){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==F$e&&(F$e=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=F$e,this._alphaElements[this._alphaCurrentLength++]=F$F):DEBUG},F$F.addRGB=function(F$e,F$F){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==F$e&&(F$e=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=F$e,this._rgbElements[this._rgbCurrentLength++]=F$F.x,this._rgbElements[this._rgbCurrentLength++]=F$F.y,this._rgbElements[this._rgbCurrentLength++]=F$F.z):DEBUG},F$F.cloneTo=function(F$e){var F$F=F$e,F$a=0,F$o=0;F$F._alphaCurrentLength=this._alphaCurrentLength;var F$E=F$F._alphaElements;for(F$E.length=this._alphaElements.length,F$a=0,F$o=this._alphaElements.length;F$a<F$o;F$a++)F$E[F$a]=this._alphaElements[F$a];F$F._rgbCurrentLength=this._rgbCurrentLength;var F$s=F$F._rgbElements;for(F$s.length=this._rgbElements.length,F$a=0,F$o=this._rgbElements.length;F$a<F$o;F$a++)F$s[F$a]=this._rgbElements[F$a]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),F$I(0,F$F,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function F$e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$q(F$e,"laya.d3.core.particleShuriKen.module.GradientDataInt");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.add=function(F$e,F$F){this._currentLength<8?(6===this._currentLength&&1!==F$e&&(F$e=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$e,this._elements[this._currentLength++]=F$F):console.log("Warning:data count must lessEqual than 4")},F$F.cloneTo=function(F$e){var F$F=F$e;F$F._currentLength=this._currentLength;var F$a=F$F._elements;F$a.length=this._elements.length;for(var F$o=0,F$E=this._elements.length;F$o<F$E;F$o++)F$a[F$o]=this._elements[F$o]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$q(F$e,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.add=function(F$e,F$F){this._currentLength<8?(6===this._currentLength&&1!==F$e&&(F$e=1,DEBUG),this._elements[this._currentLength++]=F$e,this._elements[this._currentLength++]=F$F):DEBUG},F$F.getKeyByIndex=function(F$e){return this._elements[2*F$e]},F$F.getValueByIndex=function(F$e){return this._elements[2*F$e+1]},F$F.getAverageValue=function(){for(var F$e=0,F$F=this._currentLength-2;F$e<F$F;F$e+=2){this._elements[F$e+1];this._elements[F$e+3],this._elements[F$e+2]-this._elements[F$e]}return 0},F$F.cloneTo=function(F$e){var F$F=F$e;F$F._currentLength=this._currentLength;var F$a=F$F._elements;F$a.length=this._elements.length;for(var F$o=0,F$E=this._elements.length;F$o<F$E;F$o++)F$a[F$o]=this._elements[F$o]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$e(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}F$q(F$e,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.add=function(F$e,F$F){this._currentLength<8?(6===this._currentLength&&1!==F$e&&(F$e=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$e,this._elements[this._currentLength++]=F$F.x,this._elements[this._currentLength++]=F$F.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},F$F.cloneTo=function(F$e){var F$F=F$e;F$F._currentLength=this._currentLength;var F$a=F$F._elements;F$a.length=this._elements.length;for(var F$o=0,F$E=this._elements.length;F$o<F$E;F$o++)F$a[F$o]=this._elements[F$o]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"gradientCount",function(){return this._currentLength/3})}(),function(){function F$_(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$q(F$_,"laya.d3.core.particleShuriKen.module.GradientSize");var F$e=F$_.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.getMaxSizeInGradient=function(){var F$e=0,F$F=0,F$a=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(F$e=0,F$F=this._gradientX.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientX.getValueByIndex(F$e));for(F$e=0,F$F=this._gradientY.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientY.getValueByIndex(F$e))}else for(F$e=0,F$F=this._gradient.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradient.getValueByIndex(F$e));break;case 1:F$a=this._separateAxes?(F$a=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),F$a=Math.max(F$a,this._constantMinSeparate.y),Math.max(F$a,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(F$e=0,F$F=this._gradientXMin.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientXMin.getValueByIndex(F$e));for(F$e=0,F$F=this._gradientXMax.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientXMax.getValueByIndex(F$e));for(F$e=0,F$F=this._gradientYMin.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientYMin.getValueByIndex(F$e));for(F$e=0,F$F=this._gradientZMax.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientZMax.getValueByIndex(F$e))}else{for(F$e=0,F$F=this._gradientMin.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientMin.getValueByIndex(F$e));for(F$e=0,F$F=this._gradientMax.gradientCount;F$e<F$F;F$e++)F$a=Math.max(F$a,this._gradientMax.getValueByIndex(F$e))}}return F$a},F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,F$F._separateAxes=this._separateAxes,this._gradient.cloneTo(F$F._gradient),this._gradientX.cloneTo(F$F._gradientX),this._gradientY.cloneTo(F$F._gradientY),this._gradientZ.cloneTo(F$F._gradientZ),F$F._constantMin=this._constantMin,F$F._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$F._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$F._constantMaxSeparate),this._gradientMin.cloneTo(F$F._gradientMin),this._gradientMax.cloneTo(F$F._gradientMax),this._gradientXMin.cloneTo(F$F._gradientXMin),this._gradientXMax.cloneTo(F$F._gradientXMax),this._gradientYMin.cloneTo(F$F._gradientYMin),this._gradientYMax.cloneTo(F$F._gradientYMax),this._gradientZMin.cloneTo(F$F._gradientZMin),this._gradientZMax.cloneTo(F$F._gradientZMax)},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"gradientZ",function(){return this._gradientZ}),F$I(0,F$e,"gradient",function(){return this._gradient}),F$I(0,F$e,"separateAxes",function(){return this._separateAxes}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"gradientMin",function(){return this._gradientMin}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"gradientX",function(){return this._gradientX}),F$I(0,F$e,"gradientY",function(){return this._gradientY}),F$I(0,F$e,"gradientMax",function(){return this._gradientMax}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$I(0,F$e,"constantMinSeparate",function(){return this._constantMinSeparate}),F$I(0,F$e,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$I(0,F$e,"gradientXMin",function(){return this._gradientXMin}),F$I(0,F$e,"gradientXMax",function(){return this._gradientXMax}),F$I(0,F$e,"gradientYMin",function(){return this._gradientYMin}),F$I(0,F$e,"gradientYMax",function(){return this._gradientYMax}),F$I(0,F$e,"gradientZMin",function(){return this._gradientZMin}),F$I(0,F$e,"gradientZMax",function(){return this._gradientZMax}),F$_.createByGradient=function(F$e){var F$F=new F$_;return F$F._type=0,F$F._separateAxes=!1,F$F._gradient=F$e,F$F},F$_.createByGradientSeparate=function(F$e,F$F,F$a){var F$o=new F$_;return F$o._type=0,F$o._separateAxes=!0,F$o._gradientX=F$e,F$o._gradientY=F$F,F$o._gradientZ=F$a,F$o},F$_.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$_;return F$a._type=1,F$a._separateAxes=!1,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$_.createByRandomTwoConstantSeparate=function(F$e,F$F){var F$a=new F$_;return F$a._type=1,F$a._separateAxes=!0,F$a._constantMinSeparate=F$e,F$a._constantMaxSeparate=F$F,F$a},F$_.createByRandomTwoGradient=function(F$e,F$F){var F$a=new F$_;return F$a._type=2,F$a._separateAxes=!1,F$a._gradientMin=F$e,F$a._gradientMax=F$F,F$a},F$_.createByRandomTwoGradientSeparate=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=new F$_;return F$Y._type=2,F$Y._separateAxes=!0,F$Y._gradientXMin=F$e,F$Y._gradientXMax=F$F,F$Y._gradientYMin=F$a,F$Y._gradientYMax=F$o,F$Y._gradientZMin=F$E,F$Y._gradientZMax=F$s,F$Y},F$_}()),F$J=function(){function F$_(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$q(F$_,"laya.d3.core.particleShuriKen.module.GradientVelocity");var F$e=F$_.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,this._constant.cloneTo(F$F._constant),this._gradientX.cloneTo(F$F._gradientX),this._gradientY.cloneTo(F$F._gradientY),this._gradientZ.cloneTo(F$F._gradientZ),this._constantMin.cloneTo(F$F._constantMin),this._constantMax.cloneTo(F$F._constantMax),this._gradientXMin.cloneTo(F$F._gradientXMin),this._gradientXMax.cloneTo(F$F._gradientXMax),this._gradientYMin.cloneTo(F$F._gradientYMin),this._gradientYMax.cloneTo(F$F._gradientYMax),this._gradientZMin.cloneTo(F$F._gradientZMin),this._gradientZMax.cloneTo(F$F._gradientZMax)},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"gradientZ",function(){return this._gradientZ}),F$I(0,F$e,"constant",function(){return this._constant}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"gradientXMax",function(){return this._gradientXMax}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"gradientX",function(){return this._gradientX}),F$I(0,F$e,"gradientY",function(){return this._gradientY}),F$I(0,F$e,"gradientXMin",function(){return this._gradientXMin}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$I(0,F$e,"gradientYMin",function(){return this._gradientYMin}),F$I(0,F$e,"gradientYMax",function(){return this._gradientYMax}),F$I(0,F$e,"gradientZMin",function(){return this._gradientZMin}),F$I(0,F$e,"gradientZMax",function(){return this._gradientZMax}),F$_.createByConstant=function(F$e){var F$F=new F$_;return F$F._type=0,F$F._constant=F$e,F$F},F$_.createByGradient=function(F$e,F$F,F$a){var F$o=new F$_;return F$o._type=1,F$o._gradientX=F$e,F$o._gradientY=F$F,F$o._gradientZ=F$a,F$o},F$_.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$_;return F$a._type=2,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$_.createByRandomTwoGradient=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=new F$_;return F$Y._type=3,F$Y._gradientXMin=F$e,F$Y._gradientXMax=F$F,F$Y._gradientYMin=F$a,F$Y._gradientYMax=F$o,F$Y._gradientZMin=F$E,F$Y._gradientZMax=F$s,F$Y},F$_}(),F$k=(function(){function F$e(F$e){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=F$e}F$q(F$e,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.cloneTo=function(F$e){var F$F=F$e;this._angularVelocity.cloneTo(F$F._angularVelocity),F$F.enbale=this.enbale},F$F.clone=function(){var F$e;switch(this._angularVelocity.type){case 0:F$e=this._angularVelocity.separateAxes?F$z.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):F$z.createByConstant(this._angularVelocity.constant);break;case 1:F$e=this._angularVelocity.separateAxes?F$z.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):F$z.createByGradient(this._angularVelocity.gradient.clone());break;case 2:F$e=this._angularVelocity.separateAxes?F$z.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):F$z.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:F$e=this._angularVelocity.separateAxes?F$z.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):F$z.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var F$F=new this.constructor(F$e);return F$F.enbale=this.enbale,F$F},F$I(0,F$F,"angularVelocity",function(){return this._angularVelocity})}(),function(){function F$e(){this.enable=!1,this.randomDirection=!1}F$q(F$e,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F._getShapeBoundBox=function(F$e){throw new Error("BaseShape: must override it.")},F$F._getSpeedBoundBox=function(F$e){throw new Error("BaseShape: must override it.")},F$F.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){throw new Error("BaseShape: must override it.")},F$F._calculateProceduralBounds=function(F$e,F$F,F$a){this._getShapeBoundBox(F$e);var F$o=F$e.min,F$E=F$e.max;F$YF.multiply(F$o,F$F,F$o),F$YF.multiply(F$E,F$F,F$E);var F$s=new F$ie(new F$YF,new F$YF);this.randomDirection?(F$s.min=new F$YF(-1,-1,-1),F$s.max=new F$YF(1,1,1)):this._getSpeedBoundBox(F$s);var F$Y=new F$ie(new F$YF,new F$YF),F$_=F$Y.min,F$R=F$Y.max;F$YF.scale(F$s.min,F$a.y,F$_),F$YF.scale(F$s.max,F$a.y,F$R),F$YF.add(F$e.min,F$_,F$_),F$YF.add(F$e.max,F$R,F$R),F$YF.min(F$e.min,F$_,F$e.min),F$YF.max(F$e.max,F$_,F$e.max);var F$H=new F$ie(new F$YF,new F$YF),F$g=F$H.min,F$n=F$H.max;F$YF.scale(F$s.min,F$a.x,F$g),F$YF.scale(F$s.max,F$a.x,F$n),F$YF.min(F$H.min,F$n,F$_),F$YF.max(F$H.min,F$n,F$R),F$YF.min(F$e.min,F$_,F$e.min),F$YF.max(F$e.max,F$_,F$e.max)},F$F.cloneTo=function(F$e){F$e.enable=this.enable},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$e}()),F$u=function(){function F$s(){}return F$q(F$s,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),F$s._randomPointUnitArcCircle=function(F$e,F$F,F$a){var F$o=F$F.elements,F$E=NaN;F$E=F$a?F$a.getFloat()*F$e:Math.random()*F$e,F$o[0]=Math.cos(F$E),F$o[1]=Math.sin(F$E)},F$s._randomPointInsideUnitArcCircle=function(F$e,F$F,F$a){var F$o=F$F.elements;F$s._randomPointUnitArcCircle(F$e,F$F,F$a);var F$E=NaN;F$E=F$a?Math.pow(F$a.getFloat(),.5):Math.pow(Math.random(),.5),F$o[0]=F$o[0]*F$E,F$o[1]=F$o[1]*F$E},F$s._randomPointUnitCircle=function(F$e,F$F){var F$a=F$e.elements,F$o=NaN;F$o=F$F?F$F.getFloat()*Math.PI*2:Math.random()*Math.PI*2,F$a[0]=Math.cos(F$o),F$a[1]=Math.sin(F$o)},F$s._randomPointInsideUnitCircle=function(F$e,F$F){var F$a=F$e.elements;F$s._randomPointUnitCircle(F$e);var F$o=NaN;F$o=F$F?Math.pow(F$F.getFloat(),.5):Math.pow(Math.random(),.5),F$a[0]=F$a[0]*F$o,F$a[1]=F$a[1]*F$o},F$s._randomPointUnitSphere=function(F$e,F$F){var F$a=F$e.elements,F$o=NaN,F$E=NaN;F$E=F$F?(F$o=F$a[2]=2*F$F.getFloat()-1,F$F.getFloat()*Math.PI*2):(F$o=F$a[2]=2*Math.random()-1,Math.random()*Math.PI*2);var F$s=Math.sqrt(1-F$o*F$o);F$a[0]=F$s*Math.cos(F$E),F$a[1]=F$s*Math.sin(F$E)},F$s._randomPointInsideUnitSphere=function(F$e,F$F){var F$a=F$e.elements;F$s._randomPointUnitSphere(F$e);var F$o=NaN;F$o=F$F?Math.pow(F$F.getFloat(),1/3):Math.pow(Math.random(),1/3),F$a[0]=F$a[0]*F$o,F$a[1]=F$a[1]*F$o,F$a[2]=F$a[2]*F$o},F$s._randomPointInsideHalfUnitBox=function(F$e,F$F){var F$a=F$e.elements;F$F?(F$a[0]=F$F.getFloat()-.5,F$a[1]=F$F.getFloat()-.5,F$a[2]=F$F.getFloat()-.5):(F$a[0]=Math.random()-.5,F$a[1]=Math.random()-.5,F$a[2]=Math.random()-.5)},F$s}(),F$x=(function(){function F$e(F$e){this._size=null,this.enbale=!1,this._size=F$e}F$q(F$e,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.cloneTo=function(F$e){var F$F=F$e;this._size.cloneTo(F$F._size),F$F.enbale=this.enbale},F$F.clone=function(){var F$e;switch(this._size.type){case 0:F$e=this._size.separateAxes?F$p.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):F$p.createByGradient(this._size.gradient.clone());break;case 1:F$e=this._size.separateAxes?F$p.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):F$p.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:F$e=this._size.separateAxes?F$p.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):F$p.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var F$F=new this.constructor(F$e);return F$F.enbale=this.enbale,F$F},F$I(0,F$F,"size",function(){return this._size})}(),function(){function F$o(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}F$q(F$o,"laya.d3.core.particleShuriKen.module.StartFrame");var F$e=F$o.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.cloneTo=function(F$e){var F$F=F$e;F$F._type=this._type,F$F._constant=this._constant,F$F._constantMin=this._constantMin,F$F._constantMax=this._constantMax},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$e,"constant",function(){return this._constant}),F$I(0,F$e,"type",function(){return this._type}),F$I(0,F$e,"constantMin",function(){return this._constantMin}),F$I(0,F$e,"constantMax",function(){return this._constantMax}),F$o.createByConstant=function(F$e){var F$F=new F$o;return F$F._type=0,F$F._constant=F$e,F$F},F$o.createByRandomTwoConstant=function(F$e,F$F){var F$a=new F$o;return F$a._type=1,F$a._constantMin=F$e,F$a._constantMax=F$F,F$a},F$o}()),F$N=(function(){function F$e(F$e,F$F){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new F$sF(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=F$e,this._startFrame=F$F}F$q(F$e,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.cloneTo=function(F$e){var F$F=F$e;this.tiles.cloneTo(F$F.tiles),F$F.type=this.type,F$F.randomRow=this.randomRow,this._frame.cloneTo(F$F._frame),this._startFrame.cloneTo(F$F._startFrame),F$F.cycles=this.cycles,F$F.enableUVChannels=this.enableUVChannels,F$F.enable=this.enable},F$F.clone=function(){var F$e,F$F;switch(this._frame.type){case 0:F$e=F$Z.createByConstant(this._frame.constant);break;case 1:F$e=F$Z.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:F$e=F$Z.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:F$e=F$Z.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:F$F=F$x.createByConstant(this._startFrame.constant);break;case 1:F$F=F$x.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var F$a=new this.constructor(F$e,F$F);return this.tiles.cloneTo(F$a.tiles),F$a.type=this.type,F$a.randomRow=this.randomRow,F$a.cycles=this.cycles,F$a.enableUVChannels=this.enableUVChannels,F$a.enable=this.enable,F$a},F$I(0,F$F,"frame",function(){return this._frame}),F$I(0,F$F,"startFrame",function(){return this._startFrame})}(),function(){function F$e(F$e){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=F$e}F$q(F$e,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.cloneTo=function(F$e){var F$F=F$e;this._velocity.cloneTo(F$F._velocity),F$F.enbale=this.enbale,F$F.space=this.space},F$F.clone=function(){var F$e;switch(this._velocity.type){case 0:F$e=F$J.createByConstant(this._velocity.constant.clone());break;case 1:F$e=F$J.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:F$e=F$J.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:F$e=F$J.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var F$F=new this.constructor(F$e);return F$F.enbale=this.enbale,F$F.space=this.space,F$F},F$I(0,F$F,"velocity",function(){return this._velocity})}(),function(){function F$e(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new F$OF,this._vb=F$kF.create(F$e._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=F$JF.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=F$TF.nameKey.getID("LINE"),this._shaderCompile=F$LF._preCompileShader[this._sharderNameID]}F$q(F$e,"laya.d3.core.PhasorSpriter3D");var F$F=F$e.prototype;return F$F.line=function(F$e,F$F,F$a,F$o){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$e.x,F$e.y,F$e.z,F$F.x,F$F.y,F$F.z,F$F.w),this.addVertex(F$a.x,F$a.y,F$a.z,F$o.x,F$o.y,F$o.z,F$o.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},F$F.circle=function(F$e,F$F,F$a,F$o,F$E,F$s){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*F$F,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/F$F,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*F$e,Math.cos(this._tempNumver0)*F$e,0,F$a,F$o,F$E,F$s),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},F$F.plane=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=F$o/2,this._tempNumver1=F$E/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$e-this._tempNumver0,F$F+this._tempNumver1,F$a,F$s,F$Y,F$_,F$R),this.addVertex(F$e+this._tempNumver0,F$F+this._tempNumver1,F$a,F$s,F$Y,F$_,F$R),this.addVertex(F$e-this._tempNumver0,F$F-this._tempNumver1,F$a,F$s,F$Y,F$_,F$R),this.addVertex(F$e+this._tempNumver0,F$F-this._tempNumver1,F$a,F$s,F$Y,F$_,F$R),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},F$F.box=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=F$o/2,this._tempNumver1=F$E/2,this._tempNumver2=F$s/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$e-this._tempNumver0,F$F+this._tempNumver1,F$a+this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e+this._tempNumver0,F$F+this._tempNumver1,F$a+this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e-this._tempNumver0,F$F-this._tempNumver1,F$a+this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e+this._tempNumver0,F$F-this._tempNumver1,F$a+this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e+this._tempNumver0,F$F+this._tempNumver1,F$a-this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e-this._tempNumver0,F$F+this._tempNumver1,F$a-this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e+this._tempNumver0,F$F-this._tempNumver1,F$a-this._tempNumver2,F$Y,F$_,F$R,F$H),this.addVertex(F$e-this._tempNumver0,F$F-this._tempNumver1,F$a-this._tempNumver2,F$Y,F$_,F$R,F$H),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},F$F.cone=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*F$a+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*F$a>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/F$a,this.addVertexIndex(0,F$F,0,F$o,F$E,F$s,F$Y,this._tempUint0),this.addVertexIndex(0,0,0,F$o,F$E,F$s,F$Y,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<F$a;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(F$e*this._tempNumver2,0,F$e*this._tempNumver3,F$o,F$E,F$s,F$Y,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==F$a-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(F$e*this._tempNumver2,0,F$e*this._tempNumver3,F$o,F$E,F$s,F$Y,this._tempUint0+(this._tempInt0+F$a)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==F$a-1?this.addIndexes(this._tempUint1+F$a+2):this.addIndexes(this._tempUint1+this._tempInt0+F$a+1),this.addIndexes(this._tempUint1+this._tempInt0+F$a),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},F$F.boundingBoxLine=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$e,F$E,F$s,F$Y,F$_,F$R,F$H),this.addVertex(F$o,F$E,F$s,F$Y,F$_,F$R,F$H),this.addVertex(F$e,F$F,F$s,F$Y,F$_,F$R,F$H),this.addVertex(F$o,F$F,F$s,F$Y,F$_,F$R,F$H),this.addVertex(F$o,F$E,F$a,F$Y,F$_,F$R,F$H),this.addVertex(F$e,F$E,F$a,F$Y,F$_,F$R,F$H),this.addVertex(F$o,F$F,F$a,F$Y,F$_,F$R,F$H),this.addVertex(F$e,F$F,F$a,F$Y,F$_,F$R,F$H),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},F$F.addVertex=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=F$e,this._vbData[this._posInVBData+1]=F$F,this._vbData[this._posInVBData+2]=F$a,this._vbData[this._posInVBData+3]=F$o,this._vbData[this._posInVBData+4]=F$E,this._vbData[this._posInVBData+5]=F$s,this._vbData[this._posInVBData+6]=F$Y,this._posInVBData+=this._floatSizePerVer,this},F$F.addVertexIndex=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){return this._hasBegun||this.addVertexIndexException(),this._vbData[F$_]=F$e,this._vbData[F$_+1]=F$F,this._vbData[F$_+2]=F$a,this._vbData[F$_+3]=F$o,this._vbData[F$_+4]=F$E,this._vbData[F$_+5]=F$s,this._vbData[F$_+6]=F$Y,(F$_+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=F$_),this},F$F.addIndexes=function(F$e){var F$F=arguments;this._hasBegun||this.addVertexIndexException();for(var F$a=0;F$a<F$F.length;F$a++)this._ibData[this._posInIBData]=F$F[F$a],this._posInIBData++;return this},F$F.begin=function(F$e,F$F){return this._hasBegun&&this.beginException0(),1!==F$e&&4!==F$e&&this.beginException1(),this._primitiveType=F$e,this._camera=F$F,this._hasBegun=!0,this},F$F.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},F$F.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(F$e._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),F$L.drawCall++,F$G.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},F$F.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},F$F.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},F$F.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},F$F.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},F$F.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},F$F.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(28,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector4",1)])}]),F$e}()),F$X=function(){function F$e(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++F$e._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new F$OF}F$q(F$e,"laya.d3.core.render.RenderElement");var F$F=F$e.prototype;return F$F.getDynamicBatchBakedVertexs=function(F$e){for(var F$F=this._renderObj._getVertexBuffer(F$e),F$a=F$F.getData().slice(),F$o=F$F.vertexDeclaration,F$E=F$o.getVertexElementByUsage(0).offset/4,F$s=F$o.getVertexElementByUsage(3).offset/4,F$Y=this._sprite3D.transform,F$_=F$Y.worldMatrix,F$R=F$Y.rotation,F$H=F$o.vertexStride/4,F$g=0,F$n=F$a.length;F$g<F$n;F$g+=F$H){var F$O=F$g+F$E,F$q=F$g+F$s;F$PF.transformVector3ArrayToVector3ArrayCoordinate(F$a,F$O,F$_,F$a,F$O),F$PF.transformVector3ArrayByQuat(F$a,F$q,F$R,F$a,F$q)}return F$a},F$F.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},F$F._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},F$I(0,F$F,"id",function(){return this._id}),F$I(0,F$F,"renderObj",function(){return this._renderObj},function(F$e){this._renderObj!==F$e&&(this._renderObj=F$e)}),F$e._uniqueIDCounter=0,F$e}(),F$W=function(){function F$F(F$e){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++F$F._uniqueIDCounter,this._needSort=!1,this._scene=F$e,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}F$q(F$F,"laya.d3.core.render.RenderQueue");var F$e=F$F.prototype;return F$e._sortOpaqueFunc=function(F$e,F$F){if(F$e._render&&F$F._render){var F$a=F$e._material.renderQueue-F$F._material.renderQueue;return 0==F$a?F$e._render._distanceForSort-F$F._render._distanceForSort:F$a}return 0},F$e._sortAlphaFunc=function(F$e,F$F){if(F$e._render&&F$F._render){var F$a=F$e._material.renderQueue-F$F._material.renderQueue;return 0==F$a?F$F._render._distanceForSort-F$e._render._distanceForSort:F$a}return 0},F$e._begainRenderElement=function(F$e,F$F,F$a){return!!F$F._beforeRender(F$e)},F$e._sortAlpha=function(F$e){F$F._cameraPosition=F$e,this._finalElements.sort(this._sortAlphaFunc)},F$e._sortOpaque=function(F$e){F$F._cameraPosition=F$e,this._finalElements.sort(this._sortOpaqueFunc)},F$e._preRender=function(F$e){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},F$e._render=function(F$e,F$F){for(var F$a,F$o,F$E,F$s,F$Y,F$_,F$R=F$L.loopCount,F$H=this._scene,F$g=F$e.camera,F$n=(F$g.id,!1),F$O=0,F$q=this._finalElements.length;F$O<F$q;F$O++){var F$I,F$l,F$P,F$j=this._finalElements[F$O];if(null!=F$j._onPreRenderFunction&&F$j._onPreRenderFunction.call(F$j._sprite3D,F$e),0===F$j._type){if(F$e.owner=F$P=F$j._sprite3D,F$e.renderElement=F$j,F$P._preRenderUpdateComponents(F$e),F$I=F$j.renderObj,F$l=F$j._material,this._begainRenderElement(F$e,F$I,F$l)){if(F$a=F$I._getVertexBuffers(),!(F$E=(F$o=F$I._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[F$o.id]){this._errorRecord[F$o.id]=1;var F$$="vertexBuffer:"+("("+F$o._destroyed+","+F$o._released+","+F$o._referenceCount+","+F$o._buffer+")")+", material:"+(F$l?F$l.__className+"("+F$l._destroyed+","+F$l._released+")":"null")+", owner:"+(F$P?F$P.__className+"("+F$P._destroyed+","+F$P._activeInHierarchy+","+F$P._displayedInStage+")":"null")+", renderObj:"+(F$I?F$I.__className+"("+F$I._destroyed+","+F$I._released+","+F$I._referenceCount+")":"")+", parent:, url:"+(F$P?F$P.url:"")+", disposeStack:"+F$o.disposeStack;F$D.recordError("报错：unknown vertexDeclaration  "+F$$)}continue}if(F$n=(F$s=F$e._shader=F$l._getShader(F$H._shaderDefineValue,F$E.shaderDefineValue,F$P._shaderDefineValue)).bind()||F$R!==F$s._uploadLoopCount,F$a){if(F$s._uploadVertexBuffer!==F$a||F$n){for(var F$y=0;F$y<F$a.length;F$y++){var F$M=F$a[F$y];F$s.uploadAttributesX(F$M.vertexDeclaration.shaderValues.data,F$M)}F$s._uploadVertexBuffer=F$a}}else(F$s._uploadVertexBuffer!==F$o||F$n)&&(F$s.uploadAttributes(F$E.shaderValues.data,null),F$s._uploadVertexBuffer=F$o);(F$s._uploadScene!==F$H||F$n)&&(F$s.uploadSceneUniforms(F$H._shaderValues.data),F$s._uploadScene=F$H),(F$g!==F$s._uploadCamera||F$s._uploadSprite3D!==F$P||F$n)&&(F$s.uploadSpriteUniforms(F$P._shaderValues.data),F$s._uploadSprite3D=F$P),(F$g!==F$s._uploadCamera||F$n)&&(F$s.uploadCameraUniforms(F$g._shaderValues.data),F$s._uploadCamera=F$g),(F$s._uploadMaterial!==F$l||F$n)&&(F$l._upload(),F$s._uploadMaterial=F$l),F$Y!==F$l?(F$l._setRenderStateBlendDepth(),F$l._setRenderStateFrontFace(F$F,F$P.transform),F$Y=F$l,F$_=F$P):F$_!==F$P&&(F$l._setRenderStateFrontFace(F$F,F$P.transform),F$_=F$P),F$I._render(F$e),F$s._uploadLoopCount=F$R}F$P._postRenderUpdateComponents(F$e)}else if(2===F$j._type){F$j.renderObj;F$e.owner=F$P=F$j._sprite3D,F$e.renderElement=F$j,F$e._batchIndexStart=F$j._tempBatchIndexStart,F$e._batchIndexEnd=F$j._tempBatchIndexEnd,F$I=F$j.renderObj,F$l=F$j._material,this._begainRenderElement(F$e,F$I,F$l)&&(F$E=(F$o=F$I._getVertexBuffer(0)).vertexDeclaration,F$n=(F$s=F$e._shader=F$l._getShader(F$H._shaderDefineValue,F$E.shaderDefineValue,F$P._shaderDefineValue)).bind()||F$R!==F$s._uploadLoopCount,(F$s._uploadVertexBuffer!==F$o||F$n)&&(F$s.uploadAttributes(F$E.shaderValues.data,null),F$s._uploadVertexBuffer=F$o),(F$s._uploadScene!==F$H||F$n)&&(F$s.uploadSceneUniforms(F$H._shaderValues.data),F$s._uploadScene=F$H),(F$g!==F$s._uploadCamera||F$s._uploadSprite3D!==F$P||F$n)&&(F$s.uploadSpriteUniforms(F$P._shaderValues.data),F$s._uploadSprite3D=F$P),(F$g!==F$s._uploadCamera||F$n)&&(F$s.uploadCameraUniforms(F$g._shaderValues.data),F$s._uploadCamera=F$g),(F$s._uploadMaterial!==F$l||F$n)&&(F$l._upload(),F$s._uploadMaterial=F$l),F$Y!==F$l?(F$l._setRenderStateBlendDepth(),F$l._setRenderStateFrontFace(F$F,F$P.transform),F$Y=F$l,F$_=F$P):F$_!==F$P&&(F$l._setRenderStateFrontFace(F$F,F$P.transform),F$_=F$P),F$I._render(F$e),F$s._uploadLoopCount=F$R)}}},F$e._renderShadow=function(F$e,F$F){for(var F$a,F$o,F$E,F$s,F$Y,F$_=F$L.loopCount,F$R=this._scene,F$H=F$e.camera,F$g=!1,F$n=0,F$O=this._finalElements.length;F$n<F$O;F$n++){var F$q,F$I,F$l,F$P=this._finalElements[F$n];0===F$P._type&&(F$e.owner=F$l=F$P._sprite3D,F$F||F$l._projectionViewWorldUpdateCamera===F$H&&F$l._projectionViewWorldUpdateLoopCount===F$L.loopCount||(F$l._render._renderUpdate(F$e._projectionViewMatrix),F$l._projectionViewWorldUpdateLoopCount=F$L.loopCount,F$l._projectionViewWorldUpdateCamera=F$H),F$e.renderElement=F$P,F$l._preRenderUpdateComponents(F$e),F$q=F$P.renderObj,F$I=F$P._material,this._begainRenderElement(F$e,F$q,null)&&(F$o=(F$a=F$q._getVertexBuffer(0)).vertexDeclaration,F$g=(F$E=F$e._shader=F$I._getShader(F$R._shaderDefineValue,F$o.shaderDefineValue,F$l._shaderDefineValue)).bind()||F$_!==F$E._uploadLoopCount,(F$E._uploadVertexBuffer!==F$a||F$g)&&(F$E.uploadAttributes(F$o.shaderValues.data,null),F$E._uploadVertexBuffer=F$a),(F$H!==F$E._uploadCamera||F$E._uploadSprite3D!==F$l||F$g)&&(F$E.uploadSpriteUniforms(F$l._shaderValues.data),F$E._uploadSprite3D=F$l),(F$H!==F$E._uploadCamera||F$g)&&(F$E.uploadCameraUniforms(F$H._shaderValues.data),F$E._uploadCamera=F$H),(F$E._uploadMaterial!==F$I||F$g)&&(F$I._upload(),F$E._uploadMaterial=F$I),F$E._uploadRenderElement,F$s!==F$I?(F$I._setRenderStateFrontFace(!1,F$l.transform),F$s=F$I,F$Y=F$l):F$Y!==F$l&&(F$I._setRenderStateFrontFace(!1,F$l.transform),F$Y=F$l),F$q._render(F$e),F$E._uploadLoopCount=F$_),F$l._postRenderUpdateComponents(F$e))}},F$e._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},F$e._addRenderElement=function(F$e){this._renderElements.push(F$e),this._needSort=!0},F$e._addDynamicBatchElement=function(F$e){this._dynamicBatchCombineRenderElements.push(F$e)},F$I(0,F$e,"id",function(){return this._id}),F$F._uniqueIDCounter=0,F$F._cameraPosition=null,F$F}(),F$f=function(){function F$e(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return F$q(F$e,"laya.d3.core.render.RenderState"),F$e.clientWidth=0,F$e.clientHeight=0,F$e}(),F$i=function(){function F$Y(F$e,F$F){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new F$te(new F$YF,0),this._corners=[new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF],this._boundingBoxCenter=new F$YF,this._children=F$o(8),this._objects=[],this._tempBoundBoxCorners=[new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF],this._scene=F$e,this._currentDepth=F$F}F$q(F$Y,"laya.d3.core.scene.OctreeNode");var F$e=F$Y.prototype;return F$D.imps(F$e,{"laya.d3.core.scene.ITreeNode":!0}),F$e.init=function(F$e,F$F){var F$a=new F$YF,F$o=new F$YF;F$YF.scale(F$F,-.5,F$a),F$YF.scale(F$F,.5,F$o),F$YF.add(F$a,F$e,F$a),F$YF.add(F$o,F$e,F$o),this.exactBox=new F$ie(F$a,F$o),this.relaxBox=new F$ie(F$a,F$o)},F$e.addTreeNode=function(F$e){1===Collision.boxContainsBox(this._relaxBox,F$e.boundingBox)?this.addNodeDown(F$e,0):this.addObject(F$e)},F$e.addChild=function(F$e){var F$F=this._children[F$e];if(null==F$F){F$F=new F$Y(this._scene,this._currentDepth+1),(this._children[F$e]=F$F)._parent=this,F$YF.subtract(this._exactBox.max,this._exactBox.min,F$Y.tempSize),F$YF.multiply(F$Y.tempSize,F$Y._octreeSplit[F$e],F$Y.tempCenter),F$YF.add(this._exactBox.min,F$Y.tempCenter,F$Y.tempCenter),F$YF.scale(F$Y.tempSize,.25,F$Y.tempSize);var F$a=new F$YF,F$o=new F$YF;F$YF.subtract(F$Y.tempCenter,F$Y.tempSize,F$a),F$YF.add(F$Y.tempCenter,F$Y.tempSize,F$o),F$F.exactBox=new F$ie(F$a,F$o),F$YF.scale(F$Y.tempSize,F$Y.relax,F$Y.tempSize);var F$E=new F$YF,F$s=new F$YF;F$YF.subtract(F$Y.tempCenter,F$Y.tempSize,F$E),F$YF.add(F$Y.tempCenter,F$Y.tempSize,F$s),F$F.relaxBox=new F$ie(F$E,F$s)}return F$F},F$e.addObject=function(F$e){(F$e._treeNode=this)._objects.push(F$e)},F$e.removeObject=function(F$e){if(F$e._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var F$F=this._objects.indexOf(F$e);return-1!==F$F&&(this._objects.splice(F$F,1),!0)},F$e.clearObject=function(){this._objects.length=0},F$e.addNodeUp=function(F$e,F$F){this._parent&&1!==Collision.boxContainsBox(this._exactBox,F$e.boundingBox)?this._parent.addNodeUp(F$e,F$F-1):this.addNodeDown(F$e,F$F)},F$e.addNodeDown=function(F$e,F$F){if(F$F<this._scene.treeLevel){var F$a=this.inChildIndex(F$e.boundingBoxCenter),F$o=this.addChild(F$a);1===Collision.boxContainsBox(F$o._relaxBox,F$e.boundingBox)?F$o.addNodeDown(F$e,++F$F):this.addObject(F$e)}else this.addObject(F$e)},F$e.inChildIndex=function(F$e){return 4*(F$e.z<this._boundingBoxCenter.z?0:1)+2*(F$e.y<this._boundingBoxCenter.y?0:1)+(F$e.x<this._boundingBoxCenter.x?0:1)},F$e.updateObject=function(F$e){1===Collision.boxContainsBox(this._relaxBox,F$e.boundingBox)?(this.removeObject(F$e),F$e._treeNode=null,this.addNodeDown(F$e,this._currentDepth)):this._parent&&(this.removeObject(F$e),F$e._treeNode=null,this._parent.addNodeUp(F$e,this._currentDepth-1))},F$e.cullingObjects=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y=0,F$_=0,F$R=0,F$H=this._scene._dynamicBatchManager;for(F$Y=0,F$s=this._objects.length;F$Y<F$s;F$Y++){var F$g=this._objects[F$Y];if(F$r.isVisible(F$g._owner.layer.mask)&&F$g.enable){if(F$F&&(F$L.treeSpriteCollision+=1,0===F$e.containsBoundSphere(F$g.boundingSphere)))continue;F$g._renderUpdate(F$E),F$g._distanceForSort=F$YF.distance(F$g.boundingSphere.center,F$o)+F$g.sortingFudge;var F$n=F$g._renderElements;for(F$_=0,F$R=F$n.length;F$_<F$R;F$_++){var F$O=F$n[F$_],F$q=F$O._staticBatch;if(F$q&&F$q._material===F$O._material)F$q._addBatchRenderElement(F$O);else{var F$I=F$O.renderObj;F$I.triangleCount<10&&1===F$I._vertexBufferCount&&F$I._getIndexBuffer()&&F$O._material.renderQueue<2&&F$O._canDynamicBatch&&!F$g._owner.isStatic?F$H._addPrepareRenderElement(F$O):this._scene.getRenderQueue(F$O._material.renderQueue)._addRenderElement(F$O)}}}}for(F$Y=0;F$Y<8;F$Y++){var F$l=this._children[F$Y];if(null!=F$l){var F$P=F$F;if(F$F){var F$j=F$e.containsBoundBox(F$l._relaxBox);if(F$L.treeNodeCollision+=1,0===F$j)continue;F$P=2===F$j}F$l.cullingObjects(F$e,F$P,F$a,F$o,F$E)}}},F$e.cullingShadowObjects=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y=0,F$_=0,F$R=0;this._scene._dynamicBatchManager;for(F$Y=0,F$s=this._objects.length;F$Y<F$s;F$Y++){var F$H=this._objects[F$Y];if(F$H.castShadow&&F$r.isVisible(F$H._owner.layer.mask)&&F$H.enable){if(F$a&&0===F$e[0].containsBoundSphere(F$H.boundingSphere))continue;for(var F$g=1,F$n=F$e.length;F$g<F$n;F$g++){var F$O=F$F[F$g-1];if(0!==F$e[F$g].containsBoundSphere(F$H.boundingSphere)){var F$q=F$H._renderElements;for(F$_=0,F$R=F$q.length;F$_<F$R;F$_++)F$O._addRenderElement(F$q[F$_])}}}}for(F$Y=0;F$Y<8;F$Y++){var F$I=this._children[F$Y];if(null!=F$I){var F$l=F$a;if(F$a){var F$P=F$e[0].containsBoundBox(F$I._relaxBox);if(0===F$P)continue;F$l=2===F$P}F$I.cullingShadowObjects(F$e,F$F,F$l,F$o,F$E)}}},F$e.cullingShadowObjectsOnePSSM=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_=F$F[0],F$R=0,F$H=0,F$g=0;for(F$R=0,F$Y=this._objects.length;F$R<F$Y;F$R++){var F$n=this._objects[F$R];if(F$n.castShadow&&F$r.isVisible(F$n._owner.layer.mask)&&F$n.enable){if(F$o&&0===F$e.containsBoundSphere(F$n.boundingSphere))continue;F$n._renderUpdate(F$a);var F$O=F$n._renderElements;for(F$H=0,F$g=F$O.length;F$H<F$g;F$H++)F$_._addRenderElement(F$O[F$H])}}for(F$R=0;F$R<8;F$R++){var F$q=this._children[F$R];if(null!=F$q){var F$I=F$o;if(F$o){var F$l=F$e.containsBoundBox(F$q._relaxBox);if(0===F$l)continue;F$I=2===F$l}F$q.cullingShadowObjectsOnePSSM(F$e,F$F,F$a,F$I,F$E,F$s)}}},F$e.renderBoudingBox=function(F$e){this._renderBoudingBox(F$e);for(var F$F=0;F$F<8;++F$F){var F$a=this._children[F$F];F$a&&F$a.renderBoudingBox(F$e)}},F$e.buildAllChild=function(F$e){if(F$e<this._scene.treeLevel)for(var F$F=0;F$F<8;F$F++){this.addChild(F$F).buildAllChild(F$e+1)}},F$e._renderBoudingBox=function(F$e){},F$I(0,F$e,"exactBox",function(){return this._exactBox},function(F$e){this._exactBox=F$e,F$YF.add(F$e.min,F$e.max,this._boundingBoxCenter),F$YF.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),F$I(0,F$e,"relaxBox",function(){return this._relaxBox},function(F$e){(this._relaxBox=F$e).getCorners(this._corners),F$te.createfromPoints(this._corners,this._boundingSphere)}),F$Y.debugMode=!1,F$Y.relax=1.15,F$Y.CHILDNUM=8,F$n(F$Y,["tempVector0",function(){return this.tempVector0=new F$YF},"tempSize",function(){return this.tempSize=new F$YF},"tempCenter",function(){return this.tempCenter=new F$YF},"_octreeSplit",function(){return this._octreeSplit=[new F$YF(.25,.25,.25),new F$YF(.75,.25,.25),new F$YF(.25,.75,.25),new F$YF(.75,.75,.25),new F$YF(.25,.25,.75),new F$YF(.75,.25,.75),new F$YF(.25,.75,.75),new F$YF(.75,.75,.75)]}]),F$Y}(),F$Q=(function(){function F$e(){}F$q(F$e,"laya.d3.core.scene.SceneManager")}(),function(){function F$e(F$e,F$F,F$a,F$o){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===F$e&&(F$e=1),void 0===F$F&&(F$F=1),void 0===F$a&&(F$a=1),void 0===F$o&&(F$o=1),this._r=F$e,this._g=F$F,this._b=F$a,this._a=F$o}return F$q(F$e,"laya.d3.core.trail.module.Color",null,"Color$1"),F$e.prototype.cloneTo=function(F$e){F$e._r=this._r,F$e._g=this._g,F$e._b=this._b,F$e._a=this._a},F$n(F$e,["RED",function(){return this.RED=new F$e(1,0,0,1)},"GREEN",function(){return this.GREEN=new F$e(0,1,0,1)},"BLUE",function(){return this.BLUE=new F$e(0,0,1,1)},"CYAN",function(){return this.CYAN=new F$e(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new F$e(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new F$e(1,0,1,1)},"GRAY",function(){return this.GRAY=new F$e(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new F$e(1,1,1,1)},"BLACK",function(){return this.BLACK=new F$e(0,0,0,1)}]),F$e}()),F$t=(function(){function F$e(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}F$q(F$e,"laya.d3.core.trail.module.Gradient");var F$F=F$e.prototype;F$F.setKeys=function(F$e,F$F){var F$a,F$o;this._colorKeys=F$e;for(var F$E=this.index=0;F$E<F$e.length;F$E++){var F$s=(F$a=F$e[F$E]).color;this._colorKeyData[this.index++]=F$s._r,this._colorKeyData[this.index++]=F$s._g,this._colorKeyData[this.index++]=F$s._b,this._colorKeyData[this.index++]=F$a.time}this._alphaKeys=F$F;for(var F$Y=this.index=0;F$Y<F$F.length;F$Y++)F$o=F$F[F$Y],this._alphaKeyData[this.index++]=F$o.alpha,this._alphaKeyData[this.index++]=F$o.time},F$F.cloneTo=function(F$e){var F$F=0,F$a=0,F$o=this.colorKeys,F$E=[];for(F$F=0,F$a=F$o.length;F$F<F$a;F$F++){var F$s=new F$c;F$o[F$F].cloneTo(F$s),F$E.push(F$s)}var F$Y=this.alphaKeys,F$_=[];for(F$F=0,F$a=F$Y.length;F$F<F$a;F$F++){var F$R=new F$t;F$Y[F$F].cloneTo(F$R),F$_.push(F$R)}F$e.setKeys(F$E,F$_)},F$I(0,F$F,"mode",function(){return this._mode},function(F$e){this._mode=F$e}),F$I(0,F$F,"colorKeys",function(){return this._colorKeys},function(F$e){this._colorKeys=F$e;for(var F$F=this.index=0;F$F<F$e.length;F$F++){var F$a=F$e[F$F],F$o=F$a.color;this._colorKeyData[this.index++]=F$o._r,this._colorKeyData[this.index++]=F$o._g,this._colorKeyData[this.index++]=F$o._b,this._colorKeyData[this.index++]=F$a.time}}),F$I(0,F$F,"alphaKeys",function(){return this._alphaKeys},function(F$e){this._alphaKeys=F$e;for(var F$F=this.index=0;F$F<F$e.length;F$F++){var F$a=F$e[F$F];this._alphaKeyData[this.index++]=F$a.alpha,this._alphaKeyData[this.index++]=F$a.time}})}(),function(){function F$e(F$e,F$F){this._alpha=NaN,this._time=NaN,void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),this._alpha=F$e,this._time=F$F}F$q(F$e,"laya.d3.core.trail.module.GradientAlphaKey");var F$F=F$e.prototype;return F$F.cloneTo=function(F$e){F$e.alpha=this.alpha,F$e.time=this.time},F$I(0,F$F,"alpha",function(){return this._alpha},function(F$e){this._alpha=F$e}),F$I(0,F$F,"time",function(){return this._time},function(F$e){this._time=F$e}),F$e}()),F$c=function(){function F$e(F$e,F$F){this._color=null,this._time=NaN,void 0===F$F&&(F$F=0),this._color=F$e||new F$Q,this._time=F$F}F$q(F$e,"laya.d3.core.trail.module.GradientColorKey");var F$F=F$e.prototype;return F$F.cloneTo=function(F$e){this.color.cloneTo(F$e.color),F$e.time=this.time},F$I(0,F$F,"color",function(){return this._color},function(F$e){this._color=F$e}),F$I(0,F$F,"time",function(){return this._time},function(F$e){this._time=F$e}),F$e}(),F$h=(function(){function F$e(){}F$q(F$e,"laya.d3.core.trail.module.GradientMode"),F$e.Blend=0,F$e.Fixed=1}(),function(){function F$e(){}F$q(F$e,"laya.d3.core.trail.module.TextureMode"),F$e.Stretch=0,F$e.Tile=1}(),function(){function F$e(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}F$q(F$e,"laya.d3.core.trail.module.TrailKeyFrame"),F$e.prototype.cloneTo=function(F$e){F$e.time=this.time,F$e.inTangent=this.inTangent,F$e.outTangent=this.outTangent,F$e.value=this.value}}(),function(){function F$F(F$e){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new F$YF,this._curPosition=new F$YF,this._delVector3=new F$YF,this._lastFixedVertexPosition=new F$YF,this._pointAtoBVector3=new F$YF,this._pointA=new F$YF,this._pointB=new F$YF,this._owner=F$e,this._id=F$F.renderElementCount++,0==this._id?F$e._owner.transform.position.cloneTo(this._lastPosition):F$e._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new F$kF(F$h.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new F$kF(F$h.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}F$q(F$F,"laya.d3.core.trail.TrailRenderElement");var F$e=F$F.prototype;F$D.imps(F$e,{"laya.d3.core.render.IRenderable":!0}),F$e._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},F$e._addTrailByFirstPosition=function(F$e,F$F){F$YF.subtract(F$F,F$e,this._delVector3),F$YF.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$YF.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$YF.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(F$e),F$e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},F$e._addTrailByNextPosition=function(F$e){F$YF.subtract(F$e,this._lastFixedVertexPosition,this._delVector3),F$YF.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$YF.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$YF.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=F$YF.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=F$ce.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(F$e),F$e.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(F$e),this._virtualVerticesCount=2)},F$e._updateVerticesByPosition=function(F$e){this._pointe=F$e.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},F$e._updateVertexBuffer2=function(){var F$e,F$F=0,F$a=0,F$o=0;for(F$o=0,F$e=(this._verticesCount+this._virtualVerticesCount)/2;F$o<F$e;F$o++)F$a=0==this._owner.textureMode?(this._VerticesToTailLength[F$o]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[F$o],this._vertices2[F$F++]=1-F$a,this._vertices2[F$F++]=1-F$a;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},F$e._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},F$e._updateDisappear=function(){var F$e,F$F=0;for(F$F=this._curDisappearIndex,F$e=(this._verticesCount+this._virtualVerticesCount)/2;F$F<F$e;F$F++)this._owner._curtime-this._everyGroupVertexBirthTime[F$F]>=this._owner.time+F$ce.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},F$e._beforeRender=function(F$e){return this._camera=F$e.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),F$YF.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},F$e._render=function(F$e){this._isDead||(F$G.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),F$L.drawCall++,F$L.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},F$e._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),0===F$e?this._vertexBuffer1:1===F$e?this._vertexBuffer2:null},F$e._getVertexBuffers=function(){return this._vertexBuffers},F$e._getIndexBuffer=function(){return null},F$e.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},F$e._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},F$I(0,F$e,"_vertexBufferCount",function(){return this._vertexBuffers.length}),F$I(0,F$e,"triangleCount",function(){return 0}),F$F.renderElementCount=0}(),function(){function F$e(){}F$q(F$e,"laya.d3.core.trail.VertexTrail");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration1}),F$I(1,F$e,"vertexDeclaration1",function(){return F$e._vertexDeclaration1}),F$I(1,F$e,"vertexDeclaration2",function(){return F$e._vertexDeclaration2}),F$n(F$e,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new F$se(32,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",41),new F$Ye(24,"single",33),new F$Ye(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new F$se(4,[new F$Ye(0,"single",38)])}]),F$e}()),F$ee=function(){function F$M(F$e){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=F$e}F$q(F$M,"laya.d3.graphics.DynamicBatch");var F$e=F$M.prototype;return F$D.imps(F$e,{"laya.d3.core.render.IRenderable":!0}),F$e._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),0===F$e?this._vertexBuffer:null},F$e._getIndexBuffer=function(){return this._indexBuffer},F$e._getCombineRenderElementFromPool=function(F$e,F$F,F$a){var F$o=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return F$o||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=F$o=new F$X,F$o._sprite3D=new F$WF),F$o._sprite3D._render._renderUpdate(F$a),F$o},F$e._getRenderElement=function(F$e,F$F,F$a){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*F$M.maxVertexCount),this._indexDatas=new Uint16Array(F$M.maxIndexCount),this._vertexBuffer=F$kF.create(this._vertexDeclaration,F$M.maxVertexCount,35048),this._indexBuffer=F$JF.create("ushort",F$M.maxIndexCount,35048));for(var F$o=this._merageElements.length=0,F$E=0,F$s=0,F$Y=this._combineRenderElements.length;F$s<F$Y;F$s++){var F$_=this._combineRenderElements[F$s],F$R=F$_.getDynamicBatchBakedVertexs(0),F$H=F$_.getBakedIndices(),F$g=F$_._sprite3D.transform._isFrontFaceInvert,F$n=F$o/(this._vertexDeclaration.vertexStride/4),F$O=F$E,F$q=F$O+F$H.length;F$_._tempBatchIndexStart=F$O,F$_._tempBatchIndexEnd=F$q,this._indexDatas.set(F$H,F$E);var F$I=0;if(F$g)for(F$I=F$O;F$I<F$q;F$I+=3){this._indexDatas[F$I]=F$n+this._indexDatas[F$I];var F$l=this._indexDatas[F$I+1],F$P=this._indexDatas[F$I+2];this._indexDatas[F$I+1]=F$n+F$P,this._indexDatas[F$I+2]=F$n+F$l}else for(F$I=F$O;F$I<F$q;F$I+=3)this._indexDatas[F$I]=F$n+this._indexDatas[F$I],this._indexDatas[F$I+1]=F$n+this._indexDatas[F$I+1],this._indexDatas[F$I+2]=F$n+this._indexDatas[F$I+2];F$E+=F$H.length,this._vertexDatas.set(F$R,F$o),F$o+=F$R.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),F$s=this._combineRenderElementPoolIndex=0,F$Y=this._materials.length;F$s<F$Y;F$s++){var F$j=this._getCombineRenderElementFromPool(F$e,F$F,F$a);F$j._type=2,F$j._staticBatch=null;var F$$=(F$j.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[F$s]]._tempBatchIndexStart,F$y=F$s+1===this._materialToRenderElementsOffsets.length?F$E:this._combineRenderElements[this._materialToRenderElementsOffsets[F$s+1]]._tempBatchIndexStart;F$j._tempBatchIndexStart=F$$,F$j._tempBatchIndexEnd=F$y,F$j._material=this._materials[F$s],this._merageElements.push(F$j)}},F$e._addCombineRenderObjTest=function(F$e){var F$F=F$e.renderObj,F$a=this._currentCombineIndexCount+F$F._getIndexBuffer().indexCount,F$o=this._currentCombineVertexCount+F$F._getVertexBuffer().vertexCount;return!(F$M.maxVertexCount<F$o||F$M.maxIndexCount<F$a)},F$e._addCombineRenderObj=function(F$e){var F$F=F$e.renderObj;this._combineRenderElements.push(F$e),this._currentCombineIndexCount=this._currentCombineIndexCount+F$F._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$F._getVertexBuffer().vertexCount},F$e._addCombineMaterial=function(F$e){this._materials.push(F$e)},F$e._addMaterialToRenderElementOffset=function(F$e){this._materialToRenderElementsOffsets.push(F$e)},F$e._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},F$e._addToRenderQueue=function(F$e,F$F,F$a,F$o){this._getRenderElement(F$F,F$a,F$o);for(var F$E=0,F$s=this._materials.length;F$E<F$s;F$E++)F$e.getRenderQueue(this._materials[F$E].renderQueue)._addDynamicBatchElement(this._merageElements[F$E])},F$e._beforeRender=function(F$e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$e._render=function(F$e){var F$F=F$e._batchIndexEnd-F$e._batchIndexStart;F$G.mainContext.drawElements(4,F$F,5123,2*F$e._batchIndexStart),F$L.drawCall++,F$L.trianglesFaces+=F$F/3},F$e._getVertexBuffers=function(){return null},F$I(0,F$e,"_vertexBufferCount",function(){return 1}),F$I(0,F$e,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$I(0,F$e,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),F$M.maxVertexCount=2e4,F$M.maxIndexCount=4e4,F$M.maxCombineTriangleCount=10,F$M}(),F$Fe=function(){function F$M(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}F$q(F$M,"laya.d3.graphics.DynamicBatchManager");var F$e=F$M.prototype;return F$e.getDynamicBatch=function(F$e,F$F){var F$a,F$o=F$e.id.toString()+F$F;return this._dynamicBatches[F$o]?F$a=this._dynamicBatches[F$o]:this._dynamicBatches[F$o]=F$a=new F$ee(F$e),F$a},F$e._garbageCollection=function(){for(var F$e in this._dynamicBatches)0===this._dynamicBatches[F$e].combineRenderElementsCount&&delete this._dynamicBatches[F$e]},F$e._addPrepareRenderElement=function(F$e){this._prepareDynamicBatchCombineElements.push(F$e)},F$e._finishCombineDynamicBatch=function(F$e){var F$F,F$a,F$o;this._prepareDynamicBatchCombineElements.sort(F$M._sortPrepareDynamicBatch);for(var F$E,F$s,F$Y,F$_,F$R,F$H=-1,F$g=!0,F$n=0,F$O=-1,F$q=0,F$I=this._prepareDynamicBatchCombineElements.length;F$q<F$I;F$q++){var F$l=(F$s=this._prepareDynamicBatchCombineElements[F$q]).renderObj._getVertexBuffer(0).vertexDeclaration,F$P=F$a!==F$l;F$P&&(F$n=0,F$a=F$l);var F$j=F$n!==F$H;if(F$j&&(F$H=F$n),(F$P||F$j)&&(F$Y=this.getDynamicBatch(F$l,F$n),F$F=null),F$g)if(F$Y._addCombineRenderObjTest(F$s)){if(F$F!==(F$E=F$s._material))F$_&&(F$e.getRenderQueue(F$R._material.renderQueue)._addRenderElement(F$R),F$R=F$_=null,F$O=-1),F$_=F$E,F$O=F$Y.combineRenderElementsCount,F$R=F$s,F$F=F$E;else if(F$_){var F$$=F$R.renderObj,F$y=F$s.renderObj;F$$._getVertexBuffer().vertexCount+F$y._getVertexBuffer().vertexCount>F$ee.maxVertexCount||F$$._getIndexBuffer().indexCount+F$y._getIndexBuffer().indexCount>F$ee.maxIndexCount?(F$e.getRenderQueue(F$R._material.renderQueue)._addRenderElement(F$R),F$_=F$E,F$O=F$Y.combineRenderElementsCount,F$R=F$s):(F$Y._addCombineMaterial(F$_),F$Y._addMaterialToRenderElementOffset(F$O),F$Y._addCombineRenderObj(F$R),F$R=F$_=null,F$O=-1,F$Y._addCombineRenderObj(F$s))}else F$Y._addCombineRenderObj(F$s);F$g=!0}else F$_&&(F$e.getRenderQueue(F$R._material.renderQueue)._addRenderElement(F$R),F$R=F$_=null,F$O=-1),F$n++,F$g=!1;else F$o=this._prepareDynamicBatchCombineElements[F$q-1],F$Y._addMaterialToRenderElementOffset(F$Y.combineRenderElementsCount),F$F=F$o._material,F$Y._addCombineMaterial(F$F),F$Y._addCombineRenderObj(F$o),F$g=!0,F$F!==(F$E=F$s._material)?(F$_=F$E,F$O=F$Y.combineRenderElementsCount,F$R=F$s):F$Y._addCombineRenderObj(F$s),F$F=F$E}F$_&&(F$e.getRenderQueue(F$R._material.renderQueue)._addRenderElement(F$R),F$R=F$_=null,F$O=-1),this._prepareDynamicBatchCombineElements.length=0},F$e._clearRenderElements=function(){for(var F$e in this._dynamicBatches)this._dynamicBatches[F$e]._clearRenderElements()},F$e._addToRenderQueue=function(F$e,F$F,F$a,F$o){for(var F$E in this._dynamicBatches){var F$s=this._dynamicBatches[F$E];0<F$s.combineRenderElementsCount&&F$s._addToRenderQueue(F$e,F$F,F$a,F$o)}},F$e.dispose=function(){this._dynamicBatches=null},F$M._sortPrepareDynamicBatch=function(F$e,F$F){return F$e._mainSortID-F$F._mainSortID},F$M}(),F$ae=function(){function F$e(){}return F$q(F$e,"laya.d3.graphics.FrustumCulling"),F$e.renderShadowObjectCulling=function(F$e,F$F,F$a,F$o,F$E){var F$s=0,F$Y=0,F$_=0,F$R=0;for(F$s=0,F$_=F$a.length;F$s<F$_;F$s++){var F$H=F$a[F$s];F$H&&F$H._clearRenderElements()}var F$g,F$n,F$O,F$q=F$e._cullingRenders;if(1<F$E){for(F$s=0,F$_=F$e._cullingRendersLength;F$s<F$_;F$s++)if((F$g=F$q[F$s]).castShadow&&F$r.isVisible(F$g._owner.layer.mask)&&F$g.enable)for(var F$I=1,F$l=F$F.length;F$I<F$l;F$I++)if(F$n=F$a[F$I-1],0!==F$F[F$I].containsBoundSphere(F$g.boundingSphere))for(F$Y=0,F$R=(F$O=F$g._renderElements).length;F$Y<F$R;F$Y++)F$n._addRenderElement(F$O[F$Y])}else for(F$s=0,F$_=F$e._cullingRendersLength;F$s<F$_;F$s++)if((F$g=F$q[F$s]).castShadow&&F$r.isVisible(F$g._owner.layer.mask)&&F$g.enable&&0!==F$F[0].containsBoundSphere(F$g.boundingSphere))for(F$g._renderUpdate(F$o),F$n=F$a[0],F$Y=0,F$R=(F$O=F$g._renderElements).length;F$Y<F$R;F$Y++)F$n._addRenderElement(F$O[F$Y])},F$e.renderShadowObjectCullingOctree=function(F$e,F$F,F$a,F$o,F$E){for(var F$s=0,F$Y=F$a.length;F$s<F$Y;F$s++){var F$_=F$a[F$s];F$_&&F$_._clearRenderElements()}1<F$E?F$e.treeRoot.cullingShadowObjects(F$F,F$a,!0,0,F$e):F$e.treeRoot.cullingShadowObjectsOnePSSM(F$F[0],F$a,F$o,!0,0,F$e)},F$e.renderObjectCulling=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=0,F$_=0,F$R=0,F$H=0,F$g=F$F._quenes,F$n=F$F._dynamicBatchManager,F$O=F$F._cullingRenders;for(F$Y=0,F$_=F$g.length;F$Y<F$_;F$Y++){var F$q=F$g[F$Y];F$q&&F$q._clearRenderElements()}var F$I=F$oe._staticBatchManagers;for(F$Y=0,F$_=F$I.length;F$Y<F$_;F$Y++)F$I[F$Y]._clearRenderElements();F$n._clearRenderElements();var F$l=F$a.transform.position;for(F$Y=0,F$_=F$F._cullingRendersLength;F$Y<F$_;F$Y++){var F$P=F$O[F$Y];if(F$r.isVisible(F$P._owner.layer.mask)&&F$P.enable&&0!==F$e.containsBoundSphere(F$P.boundingSphere)&&F$P._renderUpdate(F$s)){F$P._distanceForSort=F$YF.distance(F$P.boundingSphere.center,F$l)+F$P.sortingFudge;var F$j=F$P._renderElements;for(F$R=0,F$H=F$j.length;F$R<F$H;F$R++){var F$$=F$j[F$R],F$y=F$$._staticBatch;if(F$y&&F$y._material===F$$._material)F$y._addBatchRenderElement(F$$);else{var F$M=F$$.renderObj;F$M.triangleCount<10&&1===F$M._vertexBufferCount&&F$M._getIndexBuffer()&&F$$._material.renderQueue<2&&F$$._canDynamicBatch&&!F$P._owner.isStatic?F$n._addPrepareRenderElement(F$$):F$F.getRenderQueue(F$$._material.renderQueue)._addRenderElement(F$$)}}}}for(F$Y=0,F$_=F$I.length;F$Y<F$_;F$Y++)F$I[F$Y]._addToRenderQueue(F$F,F$o,F$E,F$s);F$n._finishCombineDynamicBatch(F$F),F$n._addToRenderQueue(F$F,F$o,F$E,F$s)},F$e.renderObjectCullingOctree=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=0,F$_=0,F$R=F$F._quenes,F$H=F$F._dynamicBatchManager;for(F$Y=0,F$_=F$R.length;F$Y<F$_;F$Y++){var F$g=F$R[F$Y];F$g&&F$g._clearRenderElements()}var F$n=F$oe._staticBatchManagers;for(F$Y=0,F$_=F$n.length;F$Y<F$_;F$Y++)F$n[F$Y]._clearRenderElements();for(F$H._clearRenderElements(),F$F._cullingRenders.length=0,F$F.treeRoot.cullingObjects(F$e,!0,0,F$a.transform.position,F$s),F$Y=0,F$_=F$n.length;F$Y<F$_;F$Y++)F$n[F$Y]._addToRenderQueue(F$F,F$o,F$E,F$s);F$H._finishCombineDynamicBatch(F$F),F$H._addToRenderQueue(F$F,F$o,F$E,F$s)},F$e.renderObjectCullingNoBoundFrustum=function(F$e,F$F,F$a,F$o,F$E){var F$s=0,F$Y=0,F$_=0,F$R=0,F$H=F$e._quenes,F$g=F$e._dynamicBatchManager,F$n=F$e._cullingRenders;for(F$s=0,F$Y=F$H.length;F$s<F$Y;F$s++){var F$O=F$H[F$s];F$O&&F$O._clearRenderElements()}var F$q=F$oe._staticBatchManagers;for(F$s=0,F$Y=F$q.length;F$s<F$Y;F$s++)F$q[F$s]._clearRenderElements();F$g._clearRenderElements();var F$I=F$F.transform.position;for(F$s=0,F$Y=F$e._cullingRendersLength;F$s<F$Y;F$s++){var F$l=F$n[F$s];if(F$r.isVisible(F$l._owner.layer.mask)&&F$l.enable){F$l._renderUpdate(F$E),F$l._distanceForSort=F$YF.distance(F$l.boundingSphere.center,F$I)+F$l.sortingFudge;var F$P=F$l._renderElements;for(F$_=0,F$R=F$P.length;F$_<F$R;F$_++){var F$j=F$P[F$_],F$$=F$j._staticBatch;if(F$$&&F$$._material===F$j._material)F$$._addBatchRenderElement(F$j);else{var F$y=F$j.renderObj;F$y.triangleCount<10&&1===F$y._vertexBufferCount&&F$y._getIndexBuffer()&&F$j._material.renderQueue<2&&F$j._canDynamicBatch&&!F$l._owner.isStatic?F$g._addPrepareRenderElement(F$j):F$e.getRenderQueue(F$j._material.renderQueue)._addRenderElement(F$j)}}}}for(F$s=0,F$Y=F$q.length;F$s<F$Y;F$s++)F$q[F$s]._addToRenderQueue(F$e,F$a,F$o,F$E);F$g._finishCombineDynamicBatch(F$e),F$g._addToRenderQueue(F$e,F$a,F$o,F$E)},F$e}(),F$oe=function(){function F$s(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}F$q(F$s,"laya.d3.graphics.StaticBatchManager");var F$e=F$s.prototype;return F$e._finishInit=function(){for(var F$e in this._staticBatches)this._staticBatches[F$e]._finishInit();this._initBatchRenderElements.length=0},F$e._initStaticBatchs=function(F$e){throw new Error("StaticBatchManager:must override this function.")},F$e._addInitBatchSprite=function(F$e){for(var F$F=F$e._render._renderElements,F$a=0,F$o=F$F.length;F$a<F$o;F$a++)this._initBatchRenderElements.push(F$F[F$a])},F$e._clearRenderElements=function(){for(var F$e in this._staticBatches)this._staticBatches[F$e]._clearRenderElements()},F$e._garbageCollection=function(F$e){var F$F=F$e._staticBatch,F$a=F$F._initBatchRenderElements,F$o=F$a.indexOf(F$e);F$a.splice(F$o,1),0===F$a.length&&(F$F.dispose(),delete this._staticBatches[F$F._key])},F$e._addToRenderQueue=function(F$e,F$F,F$a,F$o){for(var F$E in this._staticBatches){var F$s=this._staticBatches[F$E];0<F$s._batchRenderElements.length&&F$s._updateToRenderQueue(F$e,F$o)}},F$e.dispose=function(){this._staticBatches=null},F$s._addToStaticBatchQueue=function(F$e){F$e instanceof laya.d3.core.RenderableSprite3D&&F$e._addToInitStaticBatchManager();for(var F$F=0,F$a=F$e.numChildren;F$F<F$a;F$F++)F$s._addToStaticBatchQueue(F$e._childs[F$F])},F$s.combine=function(F$e,F$F){var F$a,F$o=0,F$E=0;if(F$F)for(F$o=0,F$E=F$F.length;F$o<F$E;F$o++){F$F[F$o]._addToInitStaticBatchManager()}else F$e&&F$s._addToStaticBatchQueue(F$e);for(F$o=0,F$E=F$s._staticBatchManagers.length;F$o<F$E;F$o++)(F$a=F$s._staticBatchManagers[F$o])._initStaticBatchs(F$e),F$a._finishInit()},F$s._staticBatchManagers=[],F$s}(),F$Ee=function(){function F$e(F$e,F$F,F$a){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=F$e,this._manager=F$F,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=F$a}F$q(F$e,"laya.d3.graphics.StaticBatch");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$F._binarySearch=function(F$e){for(var F$F=0,F$a=this._batchRenderElements.length-1,F$o=0;F$F<=F$a;)F$o=Math.floor((F$F+F$a)/2),this._compareBatchRenderElement(this._batchRenderElements[F$o],F$e)?F$a=F$o-1:F$F=F$o+1;return F$F},F$F._compareBatchRenderElement=function(F$e,F$F){throw new Error("StaticBatch:must override this function.")},F$F._getVertexDecLightMap=function(F$e){return F$e===F$Je.vertexDeclaration?F$re.vertexDeclaration:F$e===F$pe.vertexDeclaration?F$Ue.vertexDeclaration:F$e===F$Be.vertexDeclaration?F$Me.vertexDeclaration:F$e===F$Se.vertexDeclaration?null:F$e===F$le.vertexDeclaration?F$Pe.vertexDeclaration:F$e===F$de.vertexDeclaration?F$ze.vertexDeclaration:F$e===F$Ge.vertexDeclaration?F$Ae.vertexDeclaration:F$e===F$ke.vertexDeclaration?F$Ze.vertexDeclaration:F$e===F$pe.vertexDeclaration?F$Ue.vertexDeclaration:F$e===F$ve.vertexDeclaration?F$De.vertexDeclaration:F$e===F$Se.vertexDeclaration?null:F$e===F$le.vertexDeclaration?F$Pe.vertexDeclaration:F$e===F$we.vertexDeclaration?F$Te.vertexDeclaration:F$e===F$Ge.vertexDeclaration?F$Ae.vertexDeclaration:F$e},F$F._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},F$F._addBatchRenderElement=function(F$e){this._batchRenderElements.splice(this._binarySearch(F$e),0,F$e)},F$F._updateToRenderQueue=function(F$e,F$F){this._combineRenderElementPoolIndex=0,this._getRenderElement(F$e.getRenderQueue(this._material.renderQueue)._renderElements,F$e,F$F)},F$F._getRenderElement=function(F$e,F$F,F$a){throw new Error("StaticBatch:must override this function.")},F$F._finishInit=function(){throw new Error("StaticBatch:must override this function.")},F$F._clearRenderElements=function(){this._batchRenderElements.length=0},F$F.dispose=function(){},F$F._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),null},F$F._getIndexBuffer=function(){return null},F$F._beforeRender=function(F$e){return!0},F$F._render=function(F$e){},F$F._getVertexBuffers=function(){return null},F$I(0,F$F,"_vertexBufferCount",function(){return 1}),F$I(0,F$F,"triangleCount",function(){return 0}),F$e.combine=function(F$e){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),F$oe.combine(F$e)},F$e.maxBatchVertexCount=65535,F$e}(),F$se=function(){function F$Y(F$e,F$F){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++F$Y._uniqueIDCounter,this._id>F$Y.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",F$Y.maxVertexDeclaration);this._shaderValues=new F$OF,this._vertexElementsDic={},this._vertexStride=F$e,this._vertexElements=F$F;for(var F$a=0;F$a<F$F.length;F$a++){var F$o=F$F[F$a],F$E=F$o.elementUsage;this._vertexElementsDic[F$E]=F$o;var F$s=[F$Y._getTypeSize(F$o.elementFormat)/4,5126,!1,this._vertexStride,F$o.offset];switch(this._shaderValues.setValue(F$E,F$s),F$E){case 1:this._addShaderDefine(F$LF.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(F$LF.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(F$LF.SHADERDEFINE_UV1)}}}F$q(F$Y,"laya.d3.graphics.VertexDeclaration");var F$e=F$Y.prototype;return F$e._addShaderDefine=function(F$e){this._shaderDefineValue|=F$e},F$e._removeShaderDefine=function(F$e){this._shaderDefineValue&=~F$e},F$e.getVertexElements=function(){return this._vertexElements.slice()},F$e.getVertexElementByUsage=function(F$e){return this._vertexElementsDic[F$e]},F$e.unBinding=function(){},F$I(0,F$e,"shaderDefineValue",function(){return this._shaderDefineValue}),F$I(0,F$e,"id",function(){return this._id}),F$I(0,F$e,"vertexStride",function(){return this._vertexStride}),F$I(0,F$e,"shaderValues",function(){return this._shaderValues}),F$Y._getTypeSize=function(F$e){switch(F$e){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},F$Y.getVertexStride=function(F$e){for(var F$F=0,F$a=0;F$a<F$e.Length;F$a++){var F$o=F$e[F$a],F$E=F$o.offset+F$Y._getTypeSize(F$o.elementFormat);F$F<F$E&&(F$F=F$E)}return F$F},F$Y._maxVertexDeclarationBit=1e3,F$Y._uniqueIDCounter=1,F$n(F$Y,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),F$Y}(),F$Ye=function(){function F$e(F$e,F$F,F$a){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=F$e,this.elementFormat=F$F,this.elementUsage=F$a}return F$q(F$e,"laya.d3.graphics.VertexElement"),F$e}(),F$_e=(function(){function F$e(){}F$q(F$e,"laya.d3.graphics.VertexElementFormat"),F$e.Single="single",F$e.Vector2="vector2",F$e.Vector3="vector3",F$e.Vector4="vector4",F$e.Color="color",F$e.Byte4="byte4",F$e.Short2="short2",F$e.Short4="short4",F$e.NormalizedShort2="normalizedshort2",F$e.NormalizedShort4="normalizedshort4",F$e.HalfVector2="halfvector2",F$e.HalfVector4="halfvector4"}(),function(){function F$e(){}F$q(F$e,"laya.d3.graphics.VertexElementUsage"),F$e.POSITION0=0,F$e.COLOR0=1,F$e.TEXTURECOORDINATE0=2,F$e.NORMAL0=3,F$e.BINORMAL0=4,F$e.TANGENT0=5,F$e.BLENDINDICES0=6,F$e.BLENDWEIGHT0=7,F$e.DEPTH0=8,F$e.FOG0=9,F$e.POINTSIZE0=10,F$e.SAMPLE0=11,F$e.TESSELLATEFACTOR0=12,F$e.COLOR1=13,F$e.NEXTTEXTURECOORDINATE0=14,F$e.TEXTURECOORDINATE1=15,F$e.NEXTTEXTURECOORDINATE1=16,F$e.CORNERTEXTURECOORDINATE0=17,F$e.VELOCITY0=18,F$e.STARTCOLOR0=19,F$e.STARTSIZE=20,F$e.AGEADDSCALE0=21,F$e.STARTROTATION=22,F$e.ENDCOLOR0=23,F$e.STARTLIFETIME=24,F$e.TIME0=33,F$e.SHAPEPOSITIONSTARTLIFETIME=30,F$e.DIRECTIONTIME=32,F$e.SIZEROTATION0=27,F$e.RADIUS0=28,F$e.RADIAN0=29,F$e.STARTSPEED=31,F$e.RANDOM0=34,F$e.RANDOM1=35,F$e.SIMULATIONWORLDPOSTION=36,F$e.SIMULATIONWORLDROTATION=37,F$e.TEXTURECOORDINATE0X=38,F$e.TEXTURECOORDINATE0X1=39,F$e.TEXTURECOORDINATE0Y=40,F$e.OFFSETVECTOR=41}(),function(){function F$e(F$e,F$F,F$a){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=F$e,this._textureCoordinate0=F$F,this._time=F$a}F$q(F$e,"laya.d3.graphics.VertexGlitter");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate0}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"time",function(){return this._time}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(24,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector2",2),new F$Ye(20,"single",33)])}])}(),function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=F$e,this._position=F$F,this._velocity=F$a,this._startColor=F$o,this._endColor=F$E,this._sizeRotation=F$s,this._radius=F$Y,this._radian=F$_,this._ageAddScale=F$R,this._time=F$H}F$q(F$e,"laya.d3.graphics.VertexParticle");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"endColor",function(){return this._endColor}),F$I(0,F$F,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$I(0,F$F,"sizeRotation",function(){return this._sizeRotation}),F$I(0,F$F,"velocity",function(){return this._velocity}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"startColor",function(){return this._startColor}),F$I(0,F$F,"radius",function(){return this._radius}),F$I(0,F$F,"radian",function(){return this._radian}),F$I(0,F$F,"ageAddScale",function(){return this._ageAddScale}),F$I(0,F$F,"time",function(){return this._time}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(116,[new F$Ye(0,"vector4",17),new F$Ye(16,"vector3",0),new F$Ye(28,"vector3",18),new F$Ye(40,"vector4",19),new F$Ye(56,"vector4",23),new F$Ye(72,"vector3",27),new F$Ye(84,"vector2",28),new F$Ye(92,"vector4",29),new F$Ye(108,"single",24),new F$Ye(112,"single",33)])}])}(),function(){function F$e(F$e){this._position=null,this._position=F$e}F$q(F$e,"laya.d3.graphics.VertexPosition");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(12,[new F$Ye(0,"vector3",0)])}]),F$e}()),F$Re=function(){function F$e(F$e,F$F){this._position=null,this._normal=null,this._position=F$e,this._normal=F$F}F$q(F$e,"laya.d3.graphics.VertexPositionNormal");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(24,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3)])}]),F$e}(),F$He=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._color=null,this._position=F$e,this._normal=F$F,this._color=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColor");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(40,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1)])}]),F$e}(),F$ge=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._blendIndex=F$o,this._blendWeight=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorSkin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(72,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6)])}]),F$e}(),F$ne=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._tangent=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(88,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6),new F$Ye(72,"vector4",5)])}]),F$e}(),F$Oe=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._tangent=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(84,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6),new F$Ye(72,"vector3",5)])}]),F$e}(),F$qe=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._tangent=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(56,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector4",5)])}]),F$e}(),F$Ie=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._tangent=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(52,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector3",5)])}]),F$e}(),F$le=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(48,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2)])}]),F$e}(),F$Pe=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(56,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15)])}]),F$e}(),F$je=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._blendIndex=F$s,this._blendWeight=F$Y}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(88,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15),new F$Ye(56,"vector4",7),new F$Ye(72,"vector4",6)])}]),F$e}(),F$$e=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._tangent=F$s,this._blendIndex=F$Y,this._blendWeight=F$_}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(104,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15),new F$Ye(56,"vector4",7),new F$Ye(72,"vector4",6),new F$Ye(88,"vector4",5)])}]),F$e}(),F$ye=function(){function F$e(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$F.VertexPositionNormalColorTexture0SkinTangent=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._tangent=F$s,this._blendIndex=F$Y,this._blendWeight=F$_},F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(100,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15),new F$Ye(56,"vector4",7),new F$Ye(72,"vector4",6),new F$Ye(88,"vector3",5)])}]),F$e}(),F$Me=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._tangent=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(72,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15),new F$Ye(56,"vector4",5)])}]),F$e}(),F$De=function(){function F$e(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$F.VertexPositionNormalColorTexture0Tangent=function(F$e,F$F,F$a,F$o,F$E,F$s){this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._tangent=F$s},F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(68,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector2",15),new F$Ye(56,"vector3",5)])}]),F$e}(),F$me=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(80,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector4",7),new F$Ye(64,"vector4",6)])}]),F$e}(),F$be=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o,this._tangent=F$E,this._blendIndex=F$s,this._blendWeight=F$Y}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(96,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector4",7),new F$Ye(64,"vector4",6),new F$Ye(80,"vector4",5)])}]),F$e}(),F$Le=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o,this._tangent=F$E,this._blendIndex=F$s,this._blendWeight=F$Y}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(92,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector4",7),new F$Ye(64,"vector4",6),new F$Ye(80,"vector3",5)])}]),F$e}(),F$Be=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o,this._tangent=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(64,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector4",5)])}]),F$e}(),F$ve=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._color=F$a,this._textureCoordinate=F$o,this._tangent=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"color",function(){return this._color}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(60,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",1),new F$Ye(40,"vector2",2),new F$Ye(48,"vector3",5)])}]),F$e}(),F$Ke=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._tangent=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNormalSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(40,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector4",5)])}]),F$e}(),F$Ve=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._tangent=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(36,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector3",5)])}]),F$e}(),F$Ge=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(32,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2)])}]),F$e}(),F$Ae=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(40,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15)])}]),F$e}(),F$Ue=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(72,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6)])}]),F$e}(),F$re=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o,this._tangent=F$E,this._blendIndex=F$s,this._blendWeight=F$Y}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(88,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6),new F$Ye(72,"vector4",5)])}]),F$e}(),F$Ze=function(){function F$e(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$F.VertexPositionNormalTexture0SkinTangent=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o,this._tangent=F$E,this._blendIndex=F$s,this._blendWeight=F$Y},F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(84,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15),new F$Ye(40,"vector4",7),new F$Ye(56,"vector4",6),new F$Ye(72,"vector3",5)])}]),F$e}(),F$ze=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o,this._tangent=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(56,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15),new F$Ye(40,"vector4",5)])}]),F$e}(),F$Te=function(){function F$e(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$F.VertexPositionNormalTexture0Tangent=function(F$e,F$F,F$a,F$o,F$E){this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$a,this._textureCoordinate1=F$o,this._tangent=F$E},F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(52,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15),new F$Ye(40,"vector3",5)])}]),F$e}(),F$pe=function(){function F$e(F$e,F$F,F$a,F$o,F$E){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a,this._blendIndex=F$o,this._blendWeight=F$E}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTextureSkin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(64,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector4",7),new F$Ye(48,"vector4",6)])}]),F$e}(),F$Je=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a,this._tangent=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(80,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector4",7),new F$Ye(48,"vector4",6),new F$Ye(64,"vector4",5)])}]),F$e}(),F$ke=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a,this._tangent=F$o,this._blendIndex=F$E,this._blendWeight=F$s}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(76,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector4",7),new F$Ye(48,"vector4",6),new F$Ye(64,"vector3",5)])}]),F$e}(),F$de=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a,this._tangent=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(48,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector4",5)])}]),F$e}(),F$we=function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a,this._tangent=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionNormalTextureTangent");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(44,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector3",5)])}]),F$e}(),F$Se=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNTBTexture");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(56,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector3",5),new F$Ye(36,"vector3",4),new F$Ye(48,"vector2",2)])}]),F$e}(),F$Ce=function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=F$e,this._normal=F$F,this._textureCoordinate0=F$o,this._textureCoordinate1=F$E,this._tangent=F$s,F$a=F$a,this._blendIndex=F$Y,this._blendWeight=F$_}F$q(F$e,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"tangent",function(){return this._tangent}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(0,F$F,"textureCoordinate1",function(){return this._textureCoordinate1}),F$I(0,F$F,"blendIndex",function(){return this._blendIndex}),F$I(0,F$F,"blendWeight",function(){return this._blendWeight}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(96,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector3",5),new F$Ye(36,"vector3",4),new F$Ye(48,"vector2",2),new F$Ye(56,"vector2",15),new F$Ye(64,"vector4",7),new F$Ye(80,"vector4",6)])}]),F$e}(),F$ue=function(){function F$e(F$e,F$F,F$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$e,this._normal=F$F,this._textureCoordinate=F$a}F$q(F$e,"laya.d3.graphics.VertexPositionNTBTextureSkin");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"textureCoordinate",function(){return this._textureCoordinate}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(88,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector3",5),new F$Ye(36,"vector3",4),new F$Ye(48,"vector2",2),new F$Ye(56,"vector4",7),new F$Ye(72,"vector4",6)])}]),F$e}(),F$xe=(function(){function F$e(F$e,F$F,F$a,F$o){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=F$e,this._normal=F$F,this._textureCoord0=F$a,this._textureCoord1=F$o}F$q(F$e,"laya.d3.graphics.VertexPositionTerrain");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"normal",function(){return this._normal}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoord0",function(){return this._textureCoord0}),F$I(0,F$F,"textureCoord1",function(){return this._textureCoord1}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(40,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector3",3),new F$Ye(24,"vector2",2),new F$Ye(32,"vector2",15)])}])}(),function(){function F$e(F$e,F$F){this._position=null,this._textureCoordinate0=null,this._position=F$e,this._textureCoordinate0=F$F}F$q(F$e,"laya.d3.graphics.VertexPositionTexture0");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"position",function(){return this._position}),F$I(0,F$F,"textureCoordinate0",function(){return this._textureCoordinate0}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(20,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector2",2)])}]),F$e}()),F$Ne=(function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O,F$q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$e,this._positionStartLifeTime=F$F,this._velocity=F$a,this._startColor=F$o,this._startSize=F$E,this._startRotation0=F$s,this._startRotation1=F$Y,this._startRotation2=F$_,this._startLifeTime=F$R,this._time=F$H,this._startSpeed=F$g,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$q}F$q(F$e,"laya.d3.graphics.VertexShurikenParticleBillboard");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$I(0,F$F,"random1",function(){return this._randoms1}),F$I(0,F$F,"startRotation2",function(){return this._startRotation2}),F$I(0,F$F,"positionStartLifeTime",function(){return this._positionStartLifeTime}),F$I(0,F$F,"velocity",function(){return this._velocity}),F$I(0,F$F,"random0",function(){return this._randoms0}),F$I(0,F$F,"startSize",function(){return this._startSize}),F$I(0,F$F,"startColor",function(){return this._startColor}),F$I(0,F$F,"startRotation0",function(){return this._startRotation0}),F$I(0,F$F,"startRotation1",function(){return this._startRotation1}),F$I(0,F$F,"startLifeTime",function(){return this._startLifeTime}),F$I(0,F$F,"time",function(){return this._time}),F$I(0,F$F,"startSpeed",function(){return this._startSpeed}),F$I(0,F$F,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(152,[new F$Ye(0,"vector4",17),new F$Ye(16,"vector4",30),new F$Ye(32,"vector4",32),new F$Ye(48,"vector4",19),new F$Ye(64,"vector3",20),new F$Ye(76,"vector3",22),new F$Ye(88,"single",31),new F$Ye(92,"vector4",34),new F$Ye(108,"vector4",35),new F$Ye(124,"vector3",36),new F$Ye(136,"vector4",37)])}])}(),function(){function F$e(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O,F$q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$e,this._positionStartLifeTime=F$F,this._velocity=F$a,this._startColor=F$o,this._startSize=F$E,this._startRotation0=F$s,this._startRotation1=F$Y,this._startRotation2=F$_,this._startLifeTime=F$R,this._time=F$H,this._startSpeed=F$g,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$q}F$q(F$e,"laya.d3.graphics.VertexShurikenParticleMesh");var F$F=F$e.prototype;F$D.imps(F$F,{"laya.d3.graphics.IVertex":!0}),F$I(0,F$F,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$I(0,F$F,"velocity",function(){return this._velocity}),F$I(0,F$F,"position",function(){return this._positionStartLifeTime}),F$I(0,F$F,"random0",function(){return this._randoms0}),F$I(0,F$F,"startSize",function(){return this._startSize}),F$I(0,F$F,"startColor",function(){return this._startColor}),F$I(0,F$F,"startRotation0",function(){return this._startRotation0}),F$I(0,F$F,"startRotation1",function(){return this._startRotation1}),F$I(0,F$F,"random1",function(){return this._randoms1}),F$I(0,F$F,"startRotation2",function(){return this._startRotation2}),F$I(0,F$F,"startLifeTime",function(){return this._startLifeTime}),F$I(0,F$F,"time",function(){return this._time}),F$I(0,F$F,"startSpeed",function(){return this._startSpeed}),F$I(0,F$F,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$I(0,F$F,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$I(1,F$e,"vertexDeclaration",function(){return F$e._vertexDeclaration}),F$n(F$e,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$se(172,[new F$Ye(0,"vector3",0),new F$Ye(12,"vector4",1),new F$Ye(28,"vector2",2),new F$Ye(36,"vector4",30),new F$Ye(52,"vector4",32),new F$Ye(68,"vector4",19),new F$Ye(84,"vector3",20),new F$Ye(96,"vector3",22),new F$Ye(108,"single",31),new F$Ye(112,"vector4",34),new F$Ye(128,"vector4",35),new F$Ye(144,"vector3",36),new F$Ye(156,"vector4",37)])}])}(),function(){function F$y(F$e,F$F,F$a,F$o,F$E,F$s){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=F$a,this._materials=F$o,this._subMeshes=F$E,this._materialMap=F$s,this._version=F$F,this._onLoaded(F$e)}F$q(F$y,"laya.d3.loaders.LoadModelV01");var F$e=F$y.prototype;return F$e._onLoaded=function(F$e){this._readData=F$e,this.READ_BLOCK();for(var F$F=0;F$F<this._BLOCK.count;F$F++){var F$a=this._readData.getUint16(),F$o=this._strings[F$a],F$E=this["READ_"+F$o];if(null==F$E)throw new Error("model file err,no this function:"+F$a+" "+F$o);if(!F$E.call(this))break}return this._mesh},F$e.onError=function(){},F$e._readString=function(){return this._strings[this._readData.getUint16()]},F$e.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},F$e.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},F$e.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var F$e=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var F$F=0;F$F<this._STRINGS.size;F$F++)this._strings[F$F]=this._readData.readUTFString();return this._readData.pos=F$e,!0},F$e.READ_MATERIAL=function(){var F$e=this._readData.getUint16(),F$F=(this._readString(),this._readString());return this._materials[F$e]="null"!==F$F?F$j.getRes(this._materialMap[F$F]):new F$VF,!0},F$e.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var F$e,F$F=this._readData.__getBuffer(),F$a=0,F$o=this._readData.getUint32(),F$E=this._readData.getUint32(),F$s=(new Float32Array(F$F.slice(F$o+this._DATA.offset,F$o+this._DATA.offset+F$E)),this._readData.getUint32()),F$Y=this._readData.getUint32(),F$_=new Float32Array(F$F.slice(F$s+this._DATA.offset,F$s+this._DATA.offset+F$Y));for(this.mesh._inverseBindPoses=[],F$a=0,F$e=F$_.length;F$a<F$e;F$a+=16){var F$R=new F$eF(F$_[F$a+0],F$_[F$a+1],F$_[F$a+2],F$_[F$a+3],F$_[F$a+4],F$_[F$a+5],F$_[F$a+6],F$_[F$a+7],F$_[F$a+8],F$_[F$a+9],F$_[F$a+10],F$_[F$a+11],F$_[F$a+12],F$_[F$a+13],F$_[F$a+14],F$_[F$a+15]);this.mesh._inverseBindPoses.push(F$R)}break;default:throw new Error("LoadModel:unknown version.")}return!0},F$e.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var F$e=this._readString();this._shaderAttributes=F$e.match(F$y._attrReg);var F$F=this._readData.getUint32(),F$a=this._readData.getUint32(),F$o=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),F$E=this._readData.getUint32(),F$s=this._readData.getUint32(),F$Y=this._readData.getUint32(),F$_=this._readData.__getBuffer(),F$R=new F$HF(this._mesh),F$H=this._getVertexDeclaration(),F$g=F$kF.create(F$H,F$E/F$H.vertexStride,35044,!0),F$n=F$o+this._DATA.offset,F$O=F$_.slice(F$n,F$n+F$E);F$g.setData(new Float32Array(F$O));for(var F$q=(F$R._vertexBuffer=F$g).vertexDeclaration.getVertexElements(),F$I=0;F$I<F$q.length;F$I++)F$R._bufferUsage[F$q[F$I].elementUsage]=F$g;var F$l=F$JF.create("ushort",F$a/2,35044,!0),F$P=F$F+this._DATA.offset,F$j=F$_.slice(F$P,F$P+F$a);F$l.setData(new Uint16Array(F$j)),F$R._indexBuffer=F$l;var F$$=F$_.slice(F$s+this._DATA.offset,F$s+this._DATA.offset+F$Y);return F$R._boneIndicesList[0]=new Uint8Array(F$$),this._subMeshes.push(F$R),!0},F$e.READ_DATAAREA=function(){return!1},F$e._getVertexDeclaration=function(){for(var F$e,F$F=!1,F$a=!1,F$o=!1,F$E=!1,F$s=!1,F$Y=!1,F$_=!1,F$R=!1,F$H=!1,F$g=0;F$g<this._shaderAttributes.length;F$g+=8)switch(this._shaderAttributes[F$g]){case"POSITION":F$F=!0;break;case"NORMAL":F$a=!0;break;case"COLOR":F$o=!0;break;case"UV":F$E=!0;break;case"UV1":F$s=!0;break;case"BLENDWEIGHT":F$_=!0;break;case"BLENDINDICES":F$R=!0;break;case"TANGENT":F$Y=!0;break;case"BINORMAL":F$H=!0}return F$F&&F$a&&F$o&&F$E&&F$s&&F$_&&F$R&&F$Y?F$e=F$ye.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$s&&F$_&&F$R?F$e=F$je.vertexDeclaration:F$F&&F$a&&F$E&&F$s&&F$_&&F$R&&F$Y?F$e=F$Ze.vertexDeclaration:F$F&&F$a&&F$E&&F$s&&F$_&&F$R?F$e=F$Ue.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$_&&F$R&&F$Y?F$e=F$Le.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$_&&F$R?F$e=F$me.vertexDeclaration:F$F&&F$a&&F$Y&&F$H&&F$E&&F$_&&F$R?F$e=F$ue.vertexDeclaration:F$F&&F$a&&F$E&&F$_&&F$R&&F$Y?F$e=F$ke.vertexDeclaration:F$F&&F$a&&F$E&&F$_&&F$R?F$e=F$pe.vertexDeclaration:F$F&&F$a&&F$o&&F$_&&F$R&&F$Y?F$e=F$Oe.vertexDeclaration:F$F&&F$a&&F$o&&F$_&&F$R?F$e=F$ge.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$s&&F$Y?F$e=F$De.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$s?F$e=F$Pe.vertexDeclaration:F$F&&F$a&&F$E&&F$s&&F$Y?F$e=F$Te.vertexDeclaration:F$F&&F$a&&F$E&&F$s?F$e=F$Ae.vertexDeclaration:F$F&&F$a&&F$o&&F$E&&F$Y?F$e=F$ve.vertexDeclaration:F$F&&F$a&&F$E&&F$Y&&F$H?F$e=F$Se.vertexDeclaration:F$F&&F$a&&F$o&&F$E?F$e=F$le.vertexDeclaration:F$F&&F$a&&F$E&&F$Y?F$e=F$we.vertexDeclaration:F$F&&F$a&&F$E?F$e=F$Ge.vertexDeclaration:F$F&&F$a&&F$o&&F$Y?F$e=F$Ie.vertexDeclaration:F$F&&F$a&&F$o&&(F$e=F$He.vertexDeclaration),F$e},F$I(0,F$e,"mesh",function(){return this._mesh}),F$y._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$y}()),F$Xe=function(){function F$b(){}return F$q(F$b,"laya.d3.loaders.LoadModelV02"),F$b.parse=function(F$e,F$F,F$a,F$o,F$E,F$s){F$b._mesh=F$a,F$b._materials=F$o,F$b._subMeshes=F$E,F$b._materialMap=F$s,F$b._version=F$F,F$b._readData=F$e,F$b.READ_DATA(),F$b.READ_BLOCK(),F$b.READ_STRINGS();for(var F$Y=0,F$_=F$b._BLOCK.count;F$Y<F$_;F$Y++){F$b._readData.pos=F$b._BLOCK.blockStarts[F$Y];var F$R=F$b._readData.getUint16(),F$H=F$b._strings[F$R],F$g=F$b["READ_"+F$H];if(null==F$g)throw new Error("model file err,no this function:"+F$R+" "+F$H);F$g.call()}F$b._strings.length=0,F$b._readData=null,F$b._version=null,F$b._mesh=null,F$b._materials=null,F$b._subMeshes=null,F$b._materialMap=null},F$b._readString=function(){return F$b._strings[F$b._readData.getUint16()]},F$b.READ_DATA=function(){F$b._DATA.offset=F$b._readData.getUint32(),F$b._DATA.size=F$b._readData.getUint32()},F$b.READ_BLOCK=function(){for(var F$e=F$b._BLOCK.count=F$b._readData.getUint16(),F$F=F$b._BLOCK.blockStarts=[],F$a=F$b._BLOCK.blockLengths=[],F$o=0;F$o<F$e;F$o++)F$F.push(F$b._readData.getUint32()),F$a.push(F$b._readData.getUint32())},F$b.READ_STRINGS=function(){var F$e=F$b._readData.getUint32(),F$F=F$b._readData.getUint16(),F$a=F$b._readData.pos;F$b._readData.pos=F$e+F$b._DATA.offset;for(var F$o=0;F$o<F$F;F$o++)F$b._strings[F$o]=F$b._readData.readUTFString();F$b._readData.pos=F$a},F$b.READ_MATERIAL=function(){F$b._readString(),F$b._readString();var F$e=F$b._readString();return""!==F$e&&F$b._materials.push(F$j.getRes(F$b._materialMap[F$e])),!0},F$b.READ_MESH=function(){F$b._readString();var F$e,F$F=F$b._readData.__getBuffer(),F$a=0,F$o=F$b._readData.getInt16(),F$E=F$b._DATA.offset;for(F$a=0;F$a<F$o;F$a++){var F$s=F$E+F$b._readData.getUint32(),F$Y=F$b._readData.getUint32(),F$_=new Float32Array(F$F.slice(F$s,F$s+F$Y)),F$R=F$b._readString().match(F$b._attrReg),F$H=F$b._getVertexDeclaration(F$R),F$g=F$kF.create(F$H,4*F$_.length/F$H.vertexStride,35044,!0);F$g.setData(F$_),F$b._mesh._vertexBuffers.push(F$g)}var F$n=F$E+F$b._readData.getUint32(),F$O=F$b._readData.getUint32(),F$q=new Uint16Array(F$F.slice(F$n,F$n+F$O)),F$I=F$JF.create("ushort",F$O/2,35044,!0);F$I.setData(F$q),F$b._mesh._indexBuffer=F$I;var F$l=F$b._mesh._boneNames=[],F$P=F$b._readData.getUint16();for(F$l.length=F$P,F$a=0;F$a<F$P;F$a++)F$l[F$a]=F$b._strings[F$b._readData.getUint16()];var F$j=F$b._readData.getUint32(),F$$=F$b._readData.getUint32(),F$y=(new Float32Array(F$F.slice(F$E+F$j,F$E+F$j+F$$)),F$b._readData.getUint32()),F$M=F$b._readData.getUint32(),F$D=new Float32Array(F$F.slice(F$E+F$y,F$E+F$y+F$M));for(F$b._mesh._inverseBindPoses=[],F$a=0,F$e=F$D.length;F$a<F$e;F$a+=16){var F$m=new F$eF(F$D[F$a+0],F$D[F$a+1],F$D[F$a+2],F$D[F$a+3],F$D[F$a+4],F$D[F$a+5],F$D[F$a+6],F$D[F$a+7],F$D[F$a+8],F$D[F$a+9],F$D[F$a+10],F$D[F$a+11],F$D[F$a+12],F$D[F$a+13],F$D[F$a+14],F$D[F$a+15]);F$b._mesh._inverseBindPoses.push(F$m)}return F$b._mesh._skinnedDatas=new Float32Array(16*F$D.length),!0},F$b.READ_SUBMESH=function(){var F$e=F$b._readData.__getBuffer(),F$F=new F$HF(F$b._mesh),F$a=F$b._readData.getInt16(),F$o=F$b._readData.getUint32(),F$E=F$b._readData.getUint32();F$F._vertexBuffer=F$b._mesh._vertexBuffers[F$a],F$F._vertexStart=F$o,F$F._vertexCount=F$E;var F$s=F$b._readData.getUint32(),F$Y=F$b._readData.getUint32(),F$_=F$b._mesh._indexBuffer;F$F._indexBuffer=F$_,F$F._indexStart=F$s,F$F._indexCount=F$Y,F$F._indices=new Uint16Array(F$_.getData().buffer,2*F$s,F$Y);var F$R=F$b._DATA.offset,F$H=F$F._subIndexBufferStart,F$g=F$F._subIndexBufferCount,F$n=F$F._boneIndicesList,F$O=F$b._readData.getUint16();F$H.length=F$O,F$g.length=F$O,F$n.length=F$O;for(var F$q=0;F$q<F$O;F$q++){F$H[F$q]=F$b._readData.getUint32(),F$g[F$q]=F$b._readData.getUint32();var F$I=F$b._readData.getUint32(),F$l=F$b._readData.getUint32();F$F._boneIndicesList[F$q]=new Uint8Array(F$e.slice(F$R+F$I,F$R+F$I+F$l))}return F$b._subMeshes.push(F$F),!0},F$b._getVertexDeclaration=function(F$e){for(var F$F,F$a=!1,F$o=!1,F$E=!1,F$s=!1,F$Y=!1,F$_=!1,F$R=!1,F$H=!1,F$g=!1,F$n=0;F$n<F$e.length;F$n++)switch(F$e[F$n]){case"POSITION":F$a=!0;break;case"NORMAL":F$o=!0;break;case"COLOR":F$E=!0;break;case"UV":F$s=!0;break;case"UV1":F$Y=!0;break;case"BLENDWEIGHT":F$R=!0;break;case"BLENDINDICES":F$H=!0;break;case"TANGENT":F$_=!0;break;case"BINORMAL":F$g=!0}return F$a&&F$o&&F$E&&F$s&&F$Y&&F$R&&F$H&&F$_?F$F=F$ye.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$Y&&F$R&&F$H?F$F=F$je.vertexDeclaration:F$a&&F$o&&F$s&&F$Y&&F$R&&F$H&&F$_?F$F=F$Ze.vertexDeclaration:F$a&&F$o&&F$s&&F$Y&&F$R&&F$H?F$F=F$Ue.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$R&&F$H&&F$_?F$F=F$Le.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$R&&F$H?F$F=F$me.vertexDeclaration:F$a&&F$o&&F$s&&F$R&&F$H&&F$_?F$F=F$ke.vertexDeclaration:F$a&&F$o&&F$s&&F$R&&F$H?F$F=F$pe.vertexDeclaration:F$a&&F$o&&F$E&&F$R&&F$H&&F$_?F$F=F$Oe.vertexDeclaration:F$a&&F$o&&F$E&&F$R&&F$H?F$F=F$ge.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$Y&&F$_?F$F=F$De.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$Y?F$F=F$Pe.vertexDeclaration:F$a&&F$o&&F$s&&F$Y&&F$_?F$F=F$Te.vertexDeclaration:F$a&&F$o&&F$s&&F$Y?F$F=F$Ae.vertexDeclaration:F$a&&F$o&&F$E&&F$s&&F$_?F$F=F$ve.vertexDeclaration:F$a&&F$o&&F$s&&F$_&&F$g?F$F=F$Se.vertexDeclaration:F$a&&F$o&&F$E&&F$s?F$F=F$le.vertexDeclaration:F$a&&F$o&&F$s&&F$_?F$F=F$we.vertexDeclaration:F$a&&F$o&&F$s?F$F=F$Ge.vertexDeclaration:F$a&&F$o&&F$E&&F$_?F$F=F$Ie.vertexDeclaration:F$a&&F$o&&F$E&&(F$F=F$He.vertexDeclaration),F$F},F$b._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$b._strings=[],F$b._readData=null,F$b._version=null,F$b._mesh=null,F$b._materials=null,F$b._subMeshes=null,F$b._materialMap=null,F$n(F$b,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$b}(),F$We=function(){function F$m(){}return F$q(F$m,"laya.d3.loaders.LoadModelV03"),F$m.parse=function(F$e,F$F,F$a,F$o,F$E){F$m._mesh=F$a,F$m._subMeshes=F$o,F$m._materialMap=F$E,F$m._version=F$F,F$m._readData=F$e,F$m.READ_DATA(),F$m.READ_BLOCK(),F$m.READ_STRINGS();for(var F$s=0,F$Y=F$m._BLOCK.count;F$s<F$Y;F$s++){F$m._readData.pos=F$m._BLOCK.blockStarts[F$s];var F$_=F$m._readData.getUint16(),F$R=F$m._strings[F$_],F$H=F$m["READ_"+F$R];if(null==F$H)throw new Error("model file err,no this function:"+F$_+" "+F$R);F$H.call()}F$m._strings.length=0,F$m._readData=null,F$m._version=null,F$m._mesh=null,F$m._subMeshes=null,F$m._materialMap=null},F$m._readString=function(){return F$m._strings[F$m._readData.getUint16()]},F$m.READ_DATA=function(){F$m._DATA.offset=F$m._readData.getUint32(),F$m._DATA.size=F$m._readData.getUint32()},F$m.READ_BLOCK=function(){for(var F$e=F$m._BLOCK.count=F$m._readData.getUint16(),F$F=F$m._BLOCK.blockStarts=[],F$a=F$m._BLOCK.blockLengths=[],F$o=0;F$o<F$e;F$o++)F$F.push(F$m._readData.getUint32()),F$a.push(F$m._readData.getUint32())},F$m.READ_STRINGS=function(){var F$e=F$m._readData.getUint32(),F$F=F$m._readData.getUint16(),F$a=F$m._readData.pos;F$m._readData.pos=F$e+F$m._DATA.offset;for(var F$o=0;F$o<F$F;F$o++)F$m._strings[F$o]=F$m._readData.readUTFString();F$m._readData.pos=F$a},F$m.READ_MESH=function(){var F$e,F$F=F$m._readString(),F$a=F$m._readData.__getBuffer(),F$o=0,F$E=F$m._readData.getInt16(),F$s=F$m._DATA.offset;for(F$o=0;F$o<F$E;F$o++){var F$Y,F$_=F$s+F$m._readData.getUint32(),F$R=F$m._readData.getUint32(),F$H=new Float32Array(F$a.slice(F$_,F$_+F$R)),F$g=F$m._readString();switch(F$m._version){case"LAYAMODEL:03":F$Y=F$m._vertexDeclarationMap_Discard[F$g];break;case"LAYAMODEL:0301":F$Y=F$m._vertexDeclarationMap[F$g];break;default:throw new Error("LoadModelV03: unknown version.")}if(!F$Y)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+F$m._version+"  bufferAttribute="+F$g+"  name="+F$F+"  url="+(F$m._mesh?F$m._mesh.url:"null"));var F$n=F$kF.create(F$Y,4*F$H.length/F$Y.vertexStride,35044,!0,F$m._mesh._url+"_"+F$o);F$n.setData(F$H),F$m._mesh._vertexBuffers.push(F$n)}var F$O=F$s+F$m._readData.getUint32(),F$q=F$m._readData.getUint32(),F$I=new Uint16Array(F$a.slice(F$O,F$O+F$q)),F$l=F$JF.create("ushort",F$q/2,35044,!0,F$m._mesh._url);F$l.setData(F$I),F$m._mesh._indexBuffer=F$l;var F$P=F$m._mesh._boneNames=[],F$j=F$m._readData.getUint16();for(F$P.length=F$j,F$o=0;F$o<F$j;F$o++)F$P[F$o]=F$m._strings[F$m._readData.getUint16()];F$m._readData.pos+=8;var F$$=F$m._readData.getUint32(),F$y=F$m._readData.getUint32(),F$M=new Float32Array(F$a.slice(F$s+F$$,F$s+F$$+F$y));for(F$m._mesh._inverseBindPoses=[],F$o=0,F$e=F$M.length;F$o<F$e;F$o+=16){var F$D=new F$eF(F$M[F$o+0],F$M[F$o+1],F$M[F$o+2],F$M[F$o+3],F$M[F$o+4],F$M[F$o+5],F$M[F$o+6],F$M[F$o+7],F$M[F$o+8],F$M[F$o+9],F$M[F$o+10],F$M[F$o+11],F$M[F$o+12],F$M[F$o+13],F$M[F$o+14],F$M[F$o+15]);F$m._mesh._inverseBindPoses.push(F$D)}return F$m._mesh._skinnedDatas=new Float32Array(16*F$M.length),!0},F$m.READ_SUBMESH=function(){var F$e=F$m._readData.__getBuffer(),F$F=new F$HF(F$m._mesh),F$a=F$m._readData.getInt16(),F$o=F$m._readData.getUint32(),F$E=F$m._readData.getUint32();F$F._vertexBuffer=F$m._mesh._vertexBuffers[F$a],F$F._vertexStart=F$o,F$F._vertexCount=F$E;var F$s=F$m._readData.getUint32(),F$Y=F$m._readData.getUint32(),F$_=F$m._mesh._indexBuffer;F$F._indexBuffer=F$_,F$F._indexStart=F$s,F$F._indexCount=F$Y,F$F._indices=new Uint16Array(F$_.getData().buffer,2*F$s,F$Y);var F$R=F$m._DATA.offset,F$H=F$F._subIndexBufferStart,F$g=F$F._subIndexBufferCount,F$n=F$F._boneIndicesList,F$O=F$m._readData.getUint16();F$H.length=F$O,F$g.length=F$O,F$n.length=F$O;for(var F$q=0;F$q<F$O;F$q++){F$H[F$q]=F$m._readData.getUint32(),F$g[F$q]=F$m._readData.getUint32();var F$I=F$m._readData.getUint32(),F$l=F$m._readData.getUint32();F$n[F$q]=new Uint8Array(F$e.slice(F$R+F$I,F$R+F$I+F$l))}return F$m._subMeshes.push(F$F),!0},F$m._strings=[],F$m._readData=null,F$m._version=null,F$m._mesh=null,F$m._subMeshes=null,F$m._materialMap=null,F$n(F$m,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$ye.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$je.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$Ce.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Ze.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$Ue.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Le.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$me.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$ke.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$pe.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Oe.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$ge.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$De.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$Pe.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$Te.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$Ae.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$ve.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$Se.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$le.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$we.vertexDeclaration,"POSITION,NORMAL,UV":F$Ge.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$Ie.vertexDeclaration,"POSITION,NORMAL,COLOR":F$He.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$Ve.vertexDeclaration,"POSITION,NORMAL":F$Re.vertexDeclaration,"POSITION,UV":F$xe.vertexDeclaration,POSITION:F$_e.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$$e.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$je.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$Ce.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$re.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$Ue.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$be.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$me.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Je.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$pe.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$ne.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$ge.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$Me.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$Pe.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$ze.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$Ae.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$Be.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$Se.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$le.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$de.vertexDeclaration,"POSITION,NORMAL,UV":F$Ge.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$qe.vertexDeclaration,"POSITION,NORMAL,COLOR":F$He.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$Ke.vertexDeclaration,"POSITION,NORMAL":F$Re.vertexDeclaration,"POSITION,UV":F$xe.vertexDeclaration,POSITION:F$_e.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$m}(),F$fe=function(){function F$_(){}return F$q(F$_,"laya.d3.loaders.MeshReader"),F$_.read=function(F$e,F$F,F$a,F$o,F$E){var F$s=new F$m(F$e);F$s.pos=0;var F$Y=F$s.readUTFString();switch(F$Y){case"LAYAMODEL:01":case"LAYASKINANI:01":F$_._readVersion01(F$s,F$Y,F$F,F$a,F$o,F$E);break;case"LAYAMODEL:02":F$Xe.parse(F$s,F$Y,F$F,F$a,F$o,F$E);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":F$We.parse(F$s,F$Y,F$F,F$o,F$E);break;default:throw new Error("MeshReader: unknown mesh version.")}F$F._setSubMeshes(F$o)},F$_._readVersion01=function(F$e,F$F,F$a,F$o,F$E,F$s){new F$Ne(F$e,F$F,F$a,F$o,F$E,F$s)},F$_}(),F$ie=function(){function F$e(F$e,F$F){this.min=null,this.max=null,this.min=F$e,this.max=F$F}F$q(F$e,"laya.d3.math.BoundBox");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.getCorners=function(F$e){F$e.length=8;var F$F=this.min.elements,F$a=this.max.elements,F$o=F$F[0],F$E=F$F[1],F$s=F$F[2],F$Y=F$a[0],F$_=F$a[1],F$R=F$a[2];F$e[0]=new F$YF(F$o,F$_,F$R),F$e[1]=new F$YF(F$Y,F$_,F$R),F$e[2]=new F$YF(F$Y,F$E,F$R),F$e[3]=new F$YF(F$o,F$E,F$R),F$e[4]=new F$YF(F$o,F$_,F$s),F$e[5]=new F$YF(F$Y,F$_,F$s),F$e[6]=new F$YF(F$Y,F$E,F$s),F$e[7]=new F$YF(F$o,F$E,F$s)},F$F.toDefault=function(){this.min.toDefault(),this.max.toDefault()},F$F.cloneTo=function(F$e){var F$F=F$e;this.min.cloneTo(F$F.min),this.max.cloneTo(F$F.max)},F$F.clone=function(){var F$e=new this.constructor(new F$YF,new F$YF);return this.cloneTo(F$e),F$e},F$e.createfromPoints=function(F$e,F$F){if(null==F$e)throw new Error("points");var F$a=F$F.min,F$o=F$F.max,F$E=F$a.elements;F$E[0]=Number.MAX_VALUE,F$E[1]=Number.MAX_VALUE,F$E[2]=Number.MAX_VALUE;var F$s=F$o.elements;F$s[0]=-Number.MAX_VALUE,F$s[1]=-Number.MAX_VALUE,F$s[2]=-Number.MAX_VALUE;for(var F$Y=0,F$_=F$e.length;F$Y<F$_;++F$Y)F$YF.min(F$a,F$e[F$Y],F$a),F$YF.max(F$o,F$e[F$Y],F$o)},F$e.merge=function(F$e,F$F,F$a){F$YF.min(F$e.min,F$F.min,F$a.min),F$YF.max(F$e.max,F$F.max,F$a.max)},F$e}(),F$Qe=function(){function F$H(F$e){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=F$e,this._near=new F$FF(new F$YF),this._far=new F$FF(new F$YF),this._left=new F$FF(new F$YF),this._right=new F$FF(new F$YF),this._top=new F$FF(new F$YF),this._bottom=new F$FF(new F$YF),F$H._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}F$q(F$H,"laya.d3.math.BoundFrustum");var F$e=F$H.prototype;return F$e.equalsBoundFrustum=function(F$e){return this._matrix.equalsOtherMatrix(F$e.matrix)},F$e.equalsObj=function(F$e){if(F$e instanceof laya.d3.math.BoundFrustum){var F$F=F$e;return this.equalsBoundFrustum(F$F)}return!1},F$e.getPlane=function(F$e){switch(F$e){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},F$e.getCorners=function(F$e){F$H._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(F$e[0]),F$H._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(F$e[1]),F$H._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(F$e[2]),F$H._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(F$e[3]),F$H._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(F$e[4]),F$H._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(F$e[5]),F$H._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(F$e[6]),F$H._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(F$e[7])},F$e.containsPoint=function(F$e){for(var F$F=F$FF.PlaneIntersectionType_Front,F$a=F$FF.PlaneIntersectionType_Front,F$o=0;F$o<6;F$o++){switch(F$o){case 0:F$a=Collision.intersectsPlaneAndPoint(this._near,F$e);break;case 1:F$a=Collision.intersectsPlaneAndPoint(this._far,F$e);break;case 2:F$a=Collision.intersectsPlaneAndPoint(this._left,F$e);break;case 3:F$a=Collision.intersectsPlaneAndPoint(this._right,F$e);break;case 4:F$a=Collision.intersectsPlaneAndPoint(this._top,F$e);break;case 5:F$a=Collision.intersectsPlaneAndPoint(this._bottom,F$e)}switch(F$a){case F$FF.PlaneIntersectionType_Back:return 0;case F$FF.PlaneIntersectionType_Intersecting:F$F=F$FF.PlaneIntersectionType_Intersecting}}switch(F$F){case F$FF.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$e.containsBoundBox=function(F$e){for(var F$F,F$a=F$H._tempV30,F$o=F$H._tempV31,F$E=1,F$s=0;F$s<6;F$s++){if(F$F=this.getPlane(F$s),this._getBoxToPlanePVertexNVertex(F$e,F$F.normal,F$a,F$o),Collision.intersectsPlaneAndPoint(F$F,F$a)===F$FF.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(F$F,F$o)===F$FF.PlaneIntersectionType_Back&&(F$E=2)}return F$E},F$e.containsBoundSphere=function(F$e){for(var F$F=F$FF.PlaneIntersectionType_Front,F$a=F$FF.PlaneIntersectionType_Front,F$o=0;F$o<6;F$o++){switch(F$o){case 0:F$a=Collision.intersectsPlaneAndSphere(this._near,F$e);break;case 1:F$a=Collision.intersectsPlaneAndSphere(this._far,F$e);break;case 2:F$a=Collision.intersectsPlaneAndSphere(this._left,F$e);break;case 3:F$a=Collision.intersectsPlaneAndSphere(this._right,F$e);break;case 4:F$a=Collision.intersectsPlaneAndSphere(this._top,F$e);break;case 5:F$a=Collision.intersectsPlaneAndSphere(this._bottom,F$e)}switch(F$a){case F$FF.PlaneIntersectionType_Back:return 0;case F$FF.PlaneIntersectionType_Intersecting:F$F=F$FF.PlaneIntersectionType_Intersecting}}switch(F$F){case F$FF.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$e._getBoxToPlanePVertexNVertex=function(F$e,F$F,F$a,F$o){var F$E=F$e.min,F$s=F$E.elements,F$Y=F$e.max,F$_=F$Y.elements,F$R=F$F.elements,F$H=F$R[0],F$g=F$R[1],F$n=F$R[2];F$E.cloneTo(F$a);var F$O=F$a.elements;0<=F$H&&(F$O[0]=F$_[0]),0<=F$g&&(F$O[1]=F$_[1]),0<=F$n&&(F$O[2]=F$_[2]),F$Y.cloneTo(F$o);var F$q=F$o.elements;0<=F$H&&(F$q[0]=F$s[0]),0<=F$g&&(F$q[1]=F$s[1]),0<=F$n&&(F$q[2]=F$s[2])},F$I(0,F$e,"top",function(){return this._top}),F$I(0,F$e,"matrix",function(){return this._matrix},function(F$e){this._matrix=F$e,F$H._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),F$I(0,F$e,"near",function(){return this._near}),F$I(0,F$e,"far",function(){return this._far}),F$I(0,F$e,"left",function(){return this._left}),F$I(0,F$e,"right",function(){return this._right}),F$I(0,F$e,"bottom",function(){return this._bottom}),F$H._getPlanesFromMatrix=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_=F$e.elements,F$R=F$_[0],F$H=F$_[1],F$g=F$_[2],F$n=F$_[3],F$O=F$_[4],F$q=F$_[5],F$I=F$_[6],F$l=F$_[7],F$P=F$_[8],F$j=F$_[9],F$$=F$_[10],F$y=F$_[11],F$M=F$_[12],F$D=F$_[13],F$m=F$_[14],F$b=F$_[15],F$L=F$F.normal.elements;F$L[0]=F$n+F$g,F$L[1]=F$l+F$I,F$L[2]=F$y+F$$,F$F.distance=F$b+F$m,F$F.normalize();var F$B=F$a.normal.elements;F$B[0]=F$n-F$g,F$B[1]=F$l-F$I,F$B[2]=F$y-F$$,F$a.distance=F$b-F$m,F$a.normalize();var F$v=F$o.normal.elements;F$v[0]=F$n+F$R,F$v[1]=F$l+F$O,F$v[2]=F$y+F$P,F$o.distance=F$b+F$M,F$o.normalize();var F$K=F$E.normal.elements;F$K[0]=F$n-F$R,F$K[1]=F$l-F$O,F$K[2]=F$y-F$P,F$E.distance=F$b-F$M,F$E.normalize();var F$V=F$s.normal.elements;F$V[0]=F$n-F$H,F$V[1]=F$l-F$q,F$V[2]=F$y-F$j,F$s.distance=F$b-F$D,F$s.normalize();var F$G=F$Y.normal.elements;F$G[0]=F$n+F$H,F$G[1]=F$l+F$q,F$G[2]=F$y+F$j,F$Y.distance=F$b+F$D,F$Y.normalize()},F$H._get3PlaneInterPoint=function(F$e,F$F,F$a){var F$o=F$e.normal,F$E=F$F.normal,F$s=F$a.normal;F$YF.cross(F$E,F$s,F$H._tempV30),F$YF.cross(F$s,F$o,F$H._tempV31),F$YF.cross(F$o,F$E,F$H._tempV32);var F$Y=F$YF.dot(F$o,F$H._tempV30),F$_=F$YF.dot(F$E,F$H._tempV31),F$R=F$YF.dot(F$s,F$H._tempV32);return F$YF.scale(F$H._tempV30,-F$e.distance/F$Y,F$H._tempV33),F$YF.scale(F$H._tempV31,-F$F.distance/F$_,F$H._tempV34),F$YF.scale(F$H._tempV32,-F$a.distance/F$R,F$H._tempV35),F$YF.add(F$H._tempV33,F$H._tempV34,F$H._tempV36),F$YF.add(F$H._tempV35,F$H._tempV36,F$H._tempV37),F$H._tempV37},F$n(F$H,["_tempV30",function(){return this._tempV30=new F$YF},"_tempV31",function(){return this._tempV31=new F$YF},"_tempV32",function(){return this._tempV32=new F$YF},"_tempV33",function(){return this._tempV33=new F$YF},"_tempV34",function(){return this._tempV34=new F$YF},"_tempV35",function(){return this._tempV35=new F$YF},"_tempV36",function(){return this._tempV36=new F$YF},"_tempV37",function(){return this._tempV37=new F$YF}]),F$H}(),F$te=function(){function F$g(F$e,F$F){this.center=null,this.radius=NaN,this.center=F$e,this.radius=F$F}F$q(F$g,"laya.d3.math.BoundSphere");var F$e=F$g.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.toDefault=function(){this.center.toDefault(),this.radius=0},F$e.intersectsRayDistance=function(F$e){return Collision.intersectsRayAndSphereRD(F$e,this)},F$e.intersectsRayPoint=function(F$e,F$F){return Collision.intersectsRayAndSphereRP(F$e,this,F$F)},F$e.cloneTo=function(F$e){var F$F=F$e;this.center.cloneTo(F$F.center),F$F.radius=this.radius},F$e.clone=function(){var F$e=new this.constructor(new F$YF,new F$YF);return this.cloneTo(F$e),F$e},F$g.createFromSubPoints=function(F$e,F$F,F$a,F$o){if(null==F$e)throw new Error("points");if(F$F<0||F$F>=F$e.length)throw new Error("start"+F$F+"Must be in the range [0, "+(F$e.length-1)+"]");if(F$a<0||F$F+F$a>F$e.length)throw new Error("count"+F$a+"Must be in the range <= "+F$e.length+"}");var F$E=F$F+F$a,F$s=F$g._tempVector3;F$s.elements[0]=0,F$s.elements[1]=0,F$s.elements[2]=0;for(var F$Y=F$F;F$Y<F$E;++F$Y)F$YF.add(F$e[F$Y],F$s,F$s);var F$_=F$o.center;F$YF.scale(F$s,1/F$a,F$_);var F$R=0;for(F$Y=F$F;F$Y<F$E;++F$Y){var F$H=F$YF.distanceSquared(F$_,F$e[F$Y]);F$R<F$H&&(F$R=F$H)}F$o.radius=Math.sqrt(F$R)},F$g.createfromPoints=function(F$e,F$F){if(null==F$e)throw new Error("points");F$g.createFromSubPoints(F$e,0,F$e.length,F$F)},F$n(F$g,["_tempVector3",function(){return this._tempVector3=new F$YF}]),F$g}(),F$ce=(function(){function F$e(){}F$q(F$e,"laya.d3.math.ContainmentType"),F$e.Disjoint=0,F$e.Contains=1,F$e.Intersects=2}(),function(){function F$a(){}return F$q(F$a,"laya.d3.math.MathUtils3D"),F$a.isZero=function(F$e){return Math.abs(F$e)<F$a.zeroTolerance},F$a.nearEqual=function(F$e,F$F){return!!F$a.isZero(F$e-F$F)},F$a.fastInvSqrt=function(F$e){return F$a.isZero(F$e)?F$e:1/Math.sqrt(F$e)},F$n(F$a,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),F$a}()),F$he=function(){function F$R(){var F$e=this.elements=new Float32Array(9);F$e[0]=1,F$e[1]=0,F$e[2]=0,F$e[3]=0,F$e[4]=1,F$e[5]=0,F$e[6]=0,F$e[7]=0,F$e[8]=1}F$q(F$R,"laya.d3.math.Matrix3x3");var F$e=F$R.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.determinant=function(){var F$e=this.elements,F$F=F$e[0],F$a=F$e[1],F$o=F$e[2],F$E=F$e[3],F$s=F$e[4],F$Y=F$e[5],F$_=F$e[6],F$R=F$e[7],F$H=F$e[8];return F$F*(F$H*F$s-F$Y*F$R)+F$a*(-F$H*F$E+F$Y*F$_)+F$o*(F$R*F$E-F$s*F$_)},F$e.translate=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements,F$E=F$e.elements,F$s=F$o[0],F$Y=F$o[1],F$_=F$o[2],F$R=F$o[3],F$H=F$o[4],F$g=F$o[5],F$n=F$o[6],F$O=F$o[7],F$q=F$o[8],F$I=F$E[0],F$l=F$E[1];F$a[0]=F$s,F$a[1]=F$Y,F$a[2]=F$_,F$a[3]=F$R,F$a[4]=F$H,F$a[5]=F$g,F$a[6]=F$I*F$s+F$l*F$R+F$n,F$a[7]=F$I*F$Y+F$l*F$H+F$O,F$a[8]=F$I*F$_+F$l*F$g+F$q},F$e.rotate=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=F$o[4],F$H=F$o[5],F$g=F$o[6],F$n=F$o[7],F$O=F$o[8],F$q=Math.sin(F$e),F$I=Math.cos(F$e);F$a[0]=F$I*F$E+F$q*F$_,F$a[1]=F$I*F$s+F$q*F$R,F$a[2]=F$I*F$Y+F$q*F$H,F$a[3]=F$I*F$_-F$q*F$E,F$a[4]=F$I*F$R-F$q*F$s,F$a[5]=F$I*F$H-F$q*F$Y,F$a[6]=F$g,F$a[7]=F$n,F$a[8]=F$O},F$e.scale=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements,F$E=F$e.elements,F$s=F$E[0],F$Y=F$E[1];F$a[0]=F$s*F$o[0],F$a[1]=F$s*F$o[1],F$a[2]=F$s*F$o[2],F$a[3]=F$Y*F$o[3],F$a[4]=F$Y*F$o[4],F$a[5]=F$Y*F$o[5],F$a[6]=F$o[6],F$a[7]=F$o[7],F$a[8]=F$o[8]},F$e.invert=function(F$e){var F$F=F$e.elements,F$a=this.elements,F$o=F$a[0],F$E=F$a[1],F$s=F$a[2],F$Y=F$a[3],F$_=F$a[4],F$R=F$a[5],F$H=F$a[6],F$g=F$a[7],F$n=F$a[8],F$O=F$n*F$_-F$R*F$g,F$q=-F$n*F$Y+F$R*F$H,F$I=F$g*F$Y-F$_*F$H,F$l=F$o*F$O+F$E*F$q+F$s*F$I;F$l||(F$e=null),F$l=1/F$l,F$F[0]=F$O*F$l,F$F[1]=(-F$n*F$E+F$s*F$g)*F$l,F$F[2]=(F$R*F$E-F$s*F$_)*F$l,F$F[3]=F$q*F$l,F$F[4]=(F$n*F$o-F$s*F$H)*F$l,F$F[5]=(-F$R*F$o+F$s*F$Y)*F$l,F$F[6]=F$I*F$l,F$F[7]=(-F$g*F$o+F$E*F$H)*F$l,F$F[8]=(F$_*F$o-F$E*F$Y)*F$l},F$e.transpose=function(F$e){var F$F=F$e.elements,F$a=this.elements;if(F$e===this){var F$o=F$a[1],F$E=F$a[2],F$s=F$a[5];F$F[1]=F$a[3],F$F[2]=F$a[6],F$F[3]=F$o,F$F[5]=F$a[7],F$F[6]=F$E,F$F[7]=F$s}else F$F[0]=F$a[0],F$F[1]=F$a[3],F$F[2]=F$a[6],F$F[3]=F$a[1],F$F[4]=F$a[4],F$F[5]=F$a[7],F$F[6]=F$a[2],F$F[7]=F$a[5],F$F[8]=F$a[8]},F$e.identity=function(){var F$e=this.elements;F$e[0]=1,F$e[1]=0,F$e[2]=0,F$e[3]=0,F$e[4]=1,F$e[5]=0,F$e[6]=0,F$e[7]=0,F$e[8]=1},F$e.cloneTo=function(F$e){var F$F,F$a,F$o;if((F$a=this.elements)!==(F$o=F$e.elements))for(F$F=0;F$F<9;++F$F)F$o[F$F]=F$a[F$F]},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$R.createFromTranslation=function(F$e,F$F){F$F.elements;var F$a=F$e.elements;F$F[0]=1,F$F[1]=0,F$F[2]=0,F$F[3]=0,F$F[4]=1,F$F[5]=0,F$F[6]=F$a[0],F$F[7]=F$a[1],F$F[8]=1},F$R.createFromRotation=function(F$e,F$F){var F$a=F$F.elements,F$o=Math.sin(F$e),F$E=Math.cos(F$e);F$a[0]=F$E,F$a[1]=F$o,F$a[2]=0,F$a[3]=-F$o,F$a[4]=F$E,F$a[5]=0,F$a[6]=0,F$a[7]=0,F$a[8]=1},F$R.createFromScaling=function(F$e,F$F){var F$a=F$F.elements,F$o=F$e.elements;F$a[0]=F$o[0],F$a[1]=0,F$a[2]=0,F$a[3]=0,F$a[4]=F$o[1],F$a[5]=0,F$a[6]=0,F$a[7]=0,F$a[8]=1},F$R.createFromMatrix4x4=function(F$e,F$F){F$F[0]=F$e[0],F$F[1]=F$e[1],F$F[2]=F$e[2],F$F[3]=F$e[4],F$F[4]=F$e[5],F$F[5]=F$e[6],F$F[6]=F$e[8],F$F[7]=F$e[9],F$F[8]=F$e[10]},F$R.multiply=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements,F$Y=F$E[0],F$_=F$E[1],F$R=F$E[2],F$H=F$E[3],F$g=F$E[4],F$n=F$E[5],F$O=F$E[6],F$q=F$E[7],F$I=F$E[8],F$l=F$s[0],F$P=F$s[1],F$j=F$s[2],F$$=F$s[3],F$y=F$s[4],F$M=F$s[5],F$D=F$s[6],F$m=F$s[7],F$b=F$s[8];F$o[0]=F$l*F$Y+F$P*F$H+F$j*F$O,F$o[1]=F$l*F$_+F$P*F$g+F$j*F$q,F$o[2]=F$l*F$R+F$P*F$n+F$j*F$I,F$o[3]=F$$*F$Y+F$y*F$H+F$M*F$O,F$o[4]=F$$*F$_+F$y*F$g+F$M*F$q,F$o[5]=F$$*F$R+F$y*F$n+F$M*F$I,F$o[6]=F$D*F$Y+F$m*F$H+F$b*F$O,F$o[7]=F$D*F$_+F$m*F$g+F$b*F$q,F$o[8]=F$D*F$R+F$m*F$n+F$b*F$I},F$R.lookAt=function(F$e,F$F,F$a,F$o){F$YF.subtract(F$e,F$F,F$R._tempV30),F$YF.normalize(F$R._tempV30,F$R._tempV30),F$YF.cross(F$a,F$R._tempV30,F$R._tempV31),F$YF.normalize(F$R._tempV31,F$R._tempV31),F$YF.cross(F$R._tempV30,F$R._tempV31,F$R._tempV32);var F$E=F$R._tempV30.elements,F$s=F$R._tempV31.elements,F$Y=F$R._tempV32.elements,F$_=F$o.elements;F$_[0]=F$s[0],F$_[3]=F$s[1],F$_[6]=F$s[2],F$_[1]=F$Y[0],F$_[4]=F$Y[1],F$_[7]=F$Y[2],F$_[2]=F$E[0],F$_[5]=F$E[1],F$_[8]=F$E[2]},F$R.DEFAULT=new F$R,F$n(F$R,["_tempV30",function(){return this._tempV30=new F$YF},"_tempV31",function(){return this._tempV31=new F$YF},"_tempV32",function(){return this._tempV32=new F$YF}]),F$R}(),F$eF=function(){function F$B(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n,F$O,F$q,F$I,F$l){void 0===F$e&&(F$e=1),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=1),void 0===F$Y&&(F$Y=0),void 0===F$_&&(F$_=0),void 0===F$R&&(F$R=0),void 0===F$H&&(F$H=0),void 0===F$g&&(F$g=1),void 0===F$n&&(F$n=0),void 0===F$O&&(F$O=0),void 0===F$q&&(F$q=0),void 0===F$I&&(F$I=0),void 0===F$l&&(F$l=1);var F$P=this.elements=new Float32Array(16);F$P[0]=F$e,F$P[1]=F$F,F$P[2]=F$a,F$P[3]=F$o,F$P[4]=F$E,F$P[5]=F$s,F$P[6]=F$Y,F$P[7]=F$_,F$P[8]=F$R,F$P[9]=F$H,F$P[10]=F$g,F$P[11]=F$n,F$P[12]=F$O,F$P[13]=F$q,F$P[14]=F$I,F$P[15]=F$l}F$q(F$B,"laya.d3.math.Matrix4x4");var F$e=F$B.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.getElementByRowColumn=function(F$e,F$F){if(F$e<0||3<F$e)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$F<0||3<F$F)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*F$e+F$F]},F$e.setElementByRowColumn=function(F$e,F$F,F$a){if(F$e<0||3<F$e)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$F<0||3<F$F)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*F$e+F$F]=F$a},F$e.equalsOtherMatrix=function(F$e){var F$F=this.elements,F$a=F$e.elements;return F$ce.nearEqual(F$F[0],F$a[0])&&F$ce.nearEqual(F$F[1],F$a[1])&&F$ce.nearEqual(F$F[2],F$a[2])&&F$ce.nearEqual(F$F[3],F$a[3])&&F$ce.nearEqual(F$F[4],F$a[4])&&F$ce.nearEqual(F$F[5],F$a[5])&&F$ce.nearEqual(F$F[6],F$a[6])&&F$ce.nearEqual(F$F[7],F$a[7])&&F$ce.nearEqual(F$F[8],F$a[8])&&F$ce.nearEqual(F$F[9],F$a[9])&&F$ce.nearEqual(F$F[10],F$a[10])&&F$ce.nearEqual(F$F[11],F$a[11])&&F$ce.nearEqual(F$F[12],F$a[12])&&F$ce.nearEqual(F$F[13],F$a[13])&&F$ce.nearEqual(F$F[14],F$a[14])&&F$ce.nearEqual(F$F[15],F$a[15])},F$e.decomposeTransRotScale=function(F$e,F$F,F$a){var F$o=F$B._tempMatrix4x4;return this.decomposeTransRotMatScale(F$e,F$o,F$a)?(F$aF.createFromMatrix4x4(F$o,F$F),!0):(F$F.identity(),!1)},F$e.decomposeTransRotMatScale=function(F$e,F$F,F$a){var F$o=this.elements,F$E=F$e.elements,F$s=F$F.elements,F$Y=F$a.elements;F$E[0]=F$o[12],F$E[1]=F$o[13],F$E[2]=F$o[14];var F$_=F$o[0],F$R=F$o[1],F$H=F$o[2],F$g=F$o[4],F$n=F$o[5],F$O=F$o[6],F$q=F$o[8],F$I=F$o[9],F$l=F$o[10],F$P=F$Y[0]=Math.sqrt(F$_*F$_+F$R*F$R+F$H*F$H),F$j=F$Y[1]=Math.sqrt(F$g*F$g+F$n*F$n+F$O*F$O),F$$=F$Y[2]=Math.sqrt(F$q*F$q+F$I*F$I+F$l*F$l);if(F$ce.isZero(F$P)||F$ce.isZero(F$j)||F$ce.isZero(F$$))return F$s[1]=F$s[2]=F$s[3]=F$s[4]=F$s[6]=F$s[7]=F$s[8]=F$s[9]=F$s[11]=F$s[12]=F$s[13]=F$s[14]=0,F$s[0]=F$s[5]=F$s[10]=F$s[15]=1,!1;var F$y=F$B._tempVector0,F$M=F$y.elements;F$M[0]=F$q/F$$,F$M[1]=F$I/F$$,F$M[2]=F$l/F$$;var F$D=F$B._tempVector1,F$m=F$D.elements;F$m[0]=F$_/F$P,F$m[1]=F$R/F$P,F$m[2]=F$H/F$P;var F$b=F$B._tempVector2;F$YF.cross(F$y,F$D,F$b);var F$L=F$B._tempVector1;return F$YF.cross(F$b,F$y,F$L),F$s[3]=F$s[7]=F$s[11]=F$s[12]=F$s[13]=F$s[14]=0,F$s[15]=1,F$s[0]=F$L.x,F$s[1]=F$L.y,F$s[2]=F$L.z,F$s[4]=F$b.x,F$s[5]=F$b.y,F$s[6]=F$b.z,F$s[8]=F$y.x,F$s[9]=F$y.y,F$s[10]=F$y.z,F$s[0]*F$_+F$s[1]*F$R+F$s[2]*F$H<0&&(F$Y[0]=-F$P),F$s[4]*F$g+F$s[5]*F$n+F$s[6]*F$O<0&&(F$Y[1]=-F$j),F$s[8]*F$q+F$s[9]*F$I+F$s[10]*F$l<0&&(F$Y[2]=-F$$),!0},F$e.decomposeYawPitchRoll=function(F$e){var F$F=F$e.elements,F$a=Math.asin(-this.elements[9]);F$F[1]=F$a,Math.cos(F$a)>F$ce.zeroTolerance?(F$F[2]=Math.atan2(this.elements[1],this.elements[5]),F$F[0]=Math.atan2(this.elements[8],this.elements[10])):(F$F[2]=Math.atan2(-this.elements[4],this.elements[0]),F$F[0]=0)},F$e.normalize=function(){var F$e=this.elements,F$F=F$e[0],F$a=F$e[1],F$o=F$e[2],F$E=Math.sqrt(F$F*F$F+F$a*F$a+F$o*F$o);if(!F$E)return F$e[0]=0,F$e[1]=0,void(F$e[2]=0);1!=F$E&&(F$E=1/F$E,F$e[0]=F$F*F$E,F$e[1]=F$a*F$E,F$e[2]=F$o*F$E)},F$e.transpose=function(){var F$e,F$F;return F$F=(F$e=this.elements)[1],F$e[1]=F$e[4],F$e[4]=F$F,F$F=F$e[2],F$e[2]=F$e[8],F$e[8]=F$F,F$F=F$e[3],F$e[3]=F$e[12],F$e[12]=F$F,F$F=F$e[6],F$e[6]=F$e[9],F$e[9]=F$F,F$F=F$e[7],F$e[7]=F$e[13],F$e[13]=F$F,F$F=F$e[11],F$e[11]=F$e[14],F$e[14]=F$F,this},F$e.invert=function(F$e){var F$F=this.elements,F$a=F$e.elements,F$o=F$F[0],F$E=F$F[1],F$s=F$F[2],F$Y=F$F[3],F$_=F$F[4],F$R=F$F[5],F$H=F$F[6],F$g=F$F[7],F$n=F$F[8],F$O=F$F[9],F$q=F$F[10],F$I=F$F[11],F$l=F$F[12],F$P=F$F[13],F$j=F$F[14],F$$=F$F[15],F$y=F$o*F$R-F$E*F$_,F$M=F$o*F$H-F$s*F$_,F$D=F$o*F$g-F$Y*F$_,F$m=F$E*F$H-F$s*F$R,F$b=F$E*F$g-F$Y*F$R,F$L=F$s*F$g-F$Y*F$H,F$B=F$n*F$P-F$O*F$l,F$v=F$n*F$j-F$q*F$l,F$K=F$n*F$$-F$I*F$l,F$V=F$O*F$j-F$q*F$P,F$G=F$O*F$$-F$I*F$P,F$A=F$q*F$$-F$I*F$j,F$U=F$y*F$A-F$M*F$G+F$D*F$V+F$m*F$K-F$b*F$v+F$L*F$B;0!==Math.abs(F$U)&&(F$U=1/F$U,F$a[0]=(F$R*F$A-F$H*F$G+F$g*F$V)*F$U,F$a[1]=(F$s*F$G-F$E*F$A-F$Y*F$V)*F$U,F$a[2]=(F$P*F$L-F$j*F$b+F$$*F$m)*F$U,F$a[3]=(F$q*F$b-F$O*F$L-F$I*F$m)*F$U,F$a[4]=(F$H*F$K-F$_*F$A-F$g*F$v)*F$U,F$a[5]=(F$o*F$A-F$s*F$K+F$Y*F$v)*F$U,F$a[6]=(F$j*F$D-F$l*F$L-F$$*F$M)*F$U,F$a[7]=(F$n*F$L-F$q*F$D+F$I*F$M)*F$U,F$a[8]=(F$_*F$G-F$R*F$K+F$g*F$B)*F$U,F$a[9]=(F$E*F$K-F$o*F$G-F$Y*F$B)*F$U,F$a[10]=(F$l*F$b-F$P*F$D+F$$*F$y)*F$U,F$a[11]=(F$O*F$D-F$n*F$b-F$I*F$y)*F$U,F$a[12]=(F$R*F$v-F$_*F$V-F$H*F$B)*F$U,F$a[13]=(F$o*F$V-F$E*F$v+F$s*F$B)*F$U,F$a[14]=(F$P*F$M-F$l*F$m-F$j*F$y)*F$U,F$a[15]=(F$n*F$m-F$O*F$M+F$q*F$y)*F$U)},F$e.identity=function(){var F$e=this.elements;F$e[1]=F$e[2]=F$e[3]=F$e[4]=F$e[6]=F$e[7]=F$e[8]=F$e[9]=F$e[11]=F$e[12]=F$e[13]=F$e[14]=0,F$e[0]=F$e[5]=F$e[10]=F$e[15]=1},F$e.cloneTo=function(F$e){var F$F,F$a,F$o;if((F$a=this.elements)!==(F$o=F$e.elements))for(F$F=0;F$F<16;++F$F)F$o[F$F]=F$a[F$F]},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$e.getTranslationVector=function(F$e){var F$F=this.elements,F$a=F$e.elements;F$a[0]=F$F[12],F$a[1]=F$F[13],F$a[2]=F$F[14]},F$e.setTranslationVector=function(F$e){var F$F=this.elements,F$a=F$e.elements;F$F[12]=F$a[0],F$F[13]=F$a[1],F$F[14]=F$a[2]},F$e.getForward=function(F$e){var F$F=this.elements,F$a=F$e.elements;F$a[0]=-F$F[8],F$a[1]=-F$F[9],F$a[2]=-F$F[10]},F$e.setForward=function(F$e){var F$F=this.elements,F$a=F$e.elements;F$F[8]=-F$a[0],F$F[9]=-F$a[1],F$F[10]=-F$a[2]},F$B.createRotationX=function(F$e,F$F){var F$a=F$F.elements,F$o=Math.sin(F$e),F$E=Math.cos(F$e);F$a[1]=F$a[2]=F$a[3]=F$a[4]=F$a[7]=F$a[8]=F$a[11]=F$a[12]=F$a[13]=F$a[14]=0,F$a[0]=F$a[15]=1,F$a[5]=F$a[10]=F$E,F$a[6]=F$o,F$a[9]=-F$o},F$B.createRotationY=function(F$e,F$F){var F$a=F$F.elements,F$o=Math.sin(F$e),F$E=Math.cos(F$e);F$a[1]=F$a[3]=F$a[4]=F$a[6]=F$a[7]=F$a[9]=F$a[11]=F$a[12]=F$a[13]=F$a[14]=0,F$a[5]=F$a[15]=1,F$a[0]=F$a[10]=F$E,F$a[2]=-F$o,F$a[8]=F$o},F$B.createRotationZ=function(F$e,F$F){var F$a=F$F.elements,F$o=Math.sin(F$e),F$E=Math.cos(F$e);F$a[2]=F$a[3]=F$a[6]=F$a[7]=F$a[8]=F$a[9]=F$a[11]=F$a[12]=F$a[13]=F$a[14]=0,F$a[10]=F$a[15]=1,F$a[0]=F$a[5]=F$E,F$a[1]=F$o,F$a[4]=-F$o},F$B.createRotationYawPitchRoll=function(F$e,F$F,F$a,F$o){F$aF.createFromYawPitchRoll(F$e,F$F,F$a,F$B._tempQuaternion),F$B.createRotationQuaternion(F$B._tempQuaternion,F$o)},F$B.createRotationAxis=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=Math.cos(F$F),F$R=Math.sin(F$F),F$H=F$E*F$E,F$g=F$s*F$s,F$n=F$Y*F$Y,F$O=F$E*F$s,F$q=F$E*F$Y,F$I=F$s*F$Y,F$l=F$a.elements;F$l[3]=F$l[7]=F$l[11]=F$l[12]=F$l[13]=F$l[14]=0,F$l[15]=1,F$l[0]=F$H+F$_*(1-F$H),F$l[1]=F$O-F$_*F$O+F$R*F$Y,F$l[2]=F$q-F$_*F$q-F$R*F$s,F$l[4]=F$O-F$_*F$O-F$R*F$Y,F$l[5]=F$g+F$_*(1-F$g),F$l[6]=F$I-F$_*F$I+F$R*F$E,F$l[8]=F$q-F$_*F$q+F$R*F$s,F$l[9]=F$I-F$_*F$I-F$R*F$E,F$l[10]=F$n+F$_*(1-F$n)},F$B.createRotationQuaternion=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0],F$s=F$a[1],F$Y=F$a[2],F$_=F$a[3],F$R=F$E*F$E,F$H=F$s*F$s,F$g=F$Y*F$Y,F$n=F$E*F$s,F$O=F$Y*F$_,F$q=F$Y*F$E,F$I=F$s*F$_,F$l=F$s*F$Y,F$P=F$E*F$_;F$o[3]=F$o[7]=F$o[11]=F$o[12]=F$o[13]=F$o[14]=0,F$o[15]=1,F$o[0]=1-2*(F$H+F$g),F$o[1]=2*(F$n+F$O),F$o[2]=2*(F$q-F$I),F$o[4]=2*(F$n-F$O),F$o[5]=1-2*(F$g+F$R),F$o[6]=2*(F$l+F$P),F$o[8]=2*(F$q+F$I),F$o[9]=2*(F$l-F$P),F$o[10]=1-2*(F$H+F$R)},F$B.createTranslate=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;F$o[4]=F$o[8]=F$o[1]=F$o[9]=F$o[2]=F$o[6]=F$o[3]=F$o[7]=F$o[11]=0,F$o[0]=F$o[5]=F$o[10]=F$o[15]=1,F$o[12]=F$a[0],F$o[13]=F$a[1],F$o[14]=F$a[2]},F$B.createScaling=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;F$o[0]=F$a[0],F$o[5]=F$a[1],F$o[10]=F$a[2],F$o[1]=F$o[4]=F$o[8]=F$o[12]=F$o[9]=F$o[13]=F$o[2]=F$o[6]=F$o[14]=F$o[3]=F$o[7]=F$o[11]=0,F$o[15]=1},F$B.multiply=function(F$e,F$F,F$a){var F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g;for(F$E=F$a.elements,F$s=F$e.elements,F$E===(F$Y=F$F.elements)&&(F$Y=F$Y.slice()),F$o=0;F$o<4;F$o++)F$_=F$s[F$o],F$R=F$s[F$o+4],F$H=F$s[F$o+8],F$g=F$s[F$o+12],F$E[F$o]=F$_*F$Y[0]+F$R*F$Y[1]+F$H*F$Y[2]+F$g*F$Y[3],F$E[F$o+4]=F$_*F$Y[4]+F$R*F$Y[5]+F$H*F$Y[6]+F$g*F$Y[7],F$E[F$o+8]=F$_*F$Y[8]+F$R*F$Y[9]+F$H*F$Y[10]+F$g*F$Y[11],F$E[F$o+12]=F$_*F$Y[12]+F$R*F$Y[13]+F$H*F$Y[14]+F$g*F$Y[15]},F$B.createFromQuaternion=function(F$e,F$F){var F$a=F$F.elements,F$o=F$e.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=F$E+F$E,F$H=F$s+F$s,F$g=F$Y+F$Y,F$n=F$E*F$R,F$O=F$s*F$R,F$q=F$s*F$H,F$I=F$Y*F$R,F$l=F$Y*F$H,F$P=F$Y*F$g,F$j=F$_*F$R,F$$=F$_*F$H,F$y=F$_*F$g;F$a[0]=1-F$q-F$P,F$a[1]=F$O+F$y,F$a[2]=F$I-F$$,F$a[3]=0,F$a[4]=F$O-F$y,F$a[5]=1-F$n-F$P,F$a[6]=F$l+F$j,F$a[7]=0,F$a[8]=F$I+F$$,F$a[9]=F$l-F$j,F$a[10]=1-F$n-F$q,F$a[11]=0,F$a[12]=0,F$a[13]=0,F$a[14]=0,F$a[15]=1},F$B.createAffineTransformation=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements,F$s=F$F.elements,F$Y=F$a.elements,F$_=F$o.elements,F$R=F$s[0],F$H=F$s[1],F$g=F$s[2],F$n=F$s[3],F$O=F$R+F$R,F$q=F$H+F$H,F$I=F$g+F$g,F$l=F$R*F$O,F$P=F$R*F$q,F$j=F$R*F$I,F$$=F$H*F$q,F$y=F$H*F$I,F$M=F$g*F$I,F$D=F$n*F$O,F$m=F$n*F$q,F$b=F$n*F$I,F$L=F$Y[0],F$B=F$Y[1],F$v=F$Y[2];F$_[0]=(1-(F$$+F$M))*F$L,F$_[1]=(F$P+F$b)*F$L,F$_[2]=(F$j-F$m)*F$L,F$_[3]=0,F$_[4]=(F$P-F$b)*F$B,F$_[5]=(1-(F$l+F$M))*F$B,F$_[6]=(F$y+F$D)*F$B,F$_[7]=0,F$_[8]=(F$j+F$m)*F$v,F$_[9]=(F$y-F$D)*F$v,F$_[10]=(1-(F$l+F$$))*F$v,F$_[11]=0,F$_[12]=F$E[0],F$_[13]=F$E[1],F$_[14]=F$E[2],F$_[15]=1},F$B.createLookAt=function(F$e,F$F,F$a,F$o){var F$E=F$o.elements,F$s=F$B._tempVector0,F$Y=F$B._tempVector1,F$_=F$B._tempVector2;F$YF.subtract(F$e,F$F,F$_),F$YF.normalize(F$_,F$_),F$YF.cross(F$a,F$_,F$s),F$YF.normalize(F$s,F$s),F$YF.cross(F$_,F$s,F$Y),F$o.identity(),F$E[0]=F$s.x,F$E[4]=F$s.y,F$E[8]=F$s.z,F$E[1]=F$Y.x,F$E[5]=F$Y.y,F$E[9]=F$Y.z,F$E[2]=F$_.x,F$E[6]=F$_.y,F$E[10]=F$_.z,F$E[12]=-F$YF.dot(F$s,F$e),F$E[13]=-F$YF.dot(F$Y,F$e),F$E[14]=-F$YF.dot(F$_,F$e)},F$B.createPerspective=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$E.elements,F$Y=1/Math.tan(F$e/2),F$_=1/(F$a-F$o);F$s[0]=F$Y/F$F,F$s[5]=F$Y,F$s[10]=(F$o+F$a)*F$_,F$s[11]=-1,F$s[14]=2*F$o*F$a*F$_,F$s[1]=F$s[2]=F$s[3]=F$s[4]=F$s[6]=F$s[7]=F$s[8]=F$s[9]=F$s[12]=F$s[13]=F$s[15]=0},F$B.createOrthoOffCenterRH=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_=F$Y.elements,F$R=1/(F$e-F$F),F$H=1/(F$a-F$o),F$g=1/(F$E-F$s);F$_[1]=F$_[2]=F$_[3]=F$_[4]=F$_[6]=F$_[7]=F$_[8]=F$_[9]=F$_[11]=0,F$_[15]=1,F$_[0]=-2*F$R,F$_[5]=-2*F$H,F$_[10]=2*F$g,F$_[12]=(F$e+F$F)*F$R,F$_[13]=(F$o+F$a)*F$H,F$_[14]=(F$s+F$E)*F$g},F$B.translation=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;F$o[0]=F$o[5]=F$o[10]=F$o[15]=1,F$o[12]=F$a[0],F$o[13]=F$a[1],F$o[14]=F$a[2]},F$n(F$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$B},"_tempVector0",function(){return this._tempVector0=new F$YF},"_tempVector1",function(){return this._tempVector1=new F$YF},"_tempVector2",function(){return this._tempVector2=new F$YF},"_tempQuaternion",function(){return this._tempQuaternion=new F$aF},"DEFAULT",function(){return this.DEFAULT=new F$B},"ZERO",function(){return this.ZERO=new F$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),F$B}(),F$FF=(function(){function F$y(F$e,F$F){this.extents=null,this.transformation=null,this.extents=F$e,this.transformation=F$F}F$q(F$y,"laya.d3.math.OrientedBoundBox");var F$e=F$y.prototype;F$e.getCorners=function(F$e){var F$F=F$y._tempV30.elements,F$a=F$y._tempV31.elements,F$o=F$y._tempV32.elements,F$E=this.extents.elements;F$F[0]=F$E[0],F$F[1]=F$F[2]=0,F$a[1]=F$E[1],F$a[0]=F$a[2]=0,F$o[2]=F$E[2],F$o[0]=F$o[1]=0,F$YF.TransformNormal(F$y._tempV30,this.transformation,F$y._tempV30),F$YF.TransformNormal(F$y._tempV31,this.transformation,F$y._tempV31),F$YF.TransformNormal(F$y._tempV32,this.transformation,F$y._tempV32);var F$s=F$y._tempV33;this.transformation.getTranslationVector(F$s),F$e.length=8,F$YF.add(F$s,F$y._tempV30,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV32,F$e[0]),F$YF.add(F$s,F$y._tempV30,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV32,F$e[1]),F$YF.subtract(F$s,F$y._tempV30,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV32,F$e[2]),F$YF.subtract(F$s,F$y._tempV30,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV32,F$e[3]),F$YF.add(F$s,F$y._tempV30,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV32,F$e[4]),F$YF.add(F$s,F$y._tempV30,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV32,F$e[5]),F$YF.subtract(F$s,F$y._tempV30,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV32,F$e[6]),F$YF.subtract(F$s,F$y._tempV30,F$y._tempV34),F$YF.subtract(F$y._tempV34,F$y._tempV31,F$y._tempV34),F$YF.add(F$y._tempV34,F$y._tempV32,F$e[7])},F$e.transform=function(F$e){F$eF.multiply(this.transformation,F$e,this.transformation)},F$e.scale=function(F$e){F$YF.multiply(this.extents,F$e,this.extents)},F$e.translate=function(F$e){this.transformation.getTranslationVector(F$y._tempV30),F$YF.add(F$y._tempV30,F$e,F$y._tempV31),this.transformation.setTranslationVector(F$y._tempV31)},F$e.Size=function(F$e){F$YF.scale(this.extents,2,F$e)},F$e.getSize=function(F$e){var F$F=this.extents.elements;F$y._tempV30.x=F$F[0],F$y._tempV31.y=F$F[1],F$y._tempV32.z=F$F[2],F$YF.TransformNormal(F$y._tempV30,this.transformation,F$y._tempV30),F$YF.TransformNormal(F$y._tempV31,this.transformation,F$y._tempV31),F$YF.TransformNormal(F$y._tempV31,this.transformation,F$y._tempV32);var F$a=F$e.elements;F$a[0]=F$YF.scalarLength(F$y._tempV30),F$a[1]=F$YF.scalarLength(F$y._tempV31),F$a[2]=F$YF.scalarLength(F$y._tempV32)},F$e.getSizeSquared=function(F$e){var F$F=this.extents.elements;F$y._tempV30.x=F$F[0],F$y._tempV31.y=F$F[1],F$y._tempV32.z=F$F[2],F$YF.TransformNormal(F$y._tempV30,this.transformation,F$y._tempV30),F$YF.TransformNormal(F$y._tempV31,this.transformation,F$y._tempV31),F$YF.TransformNormal(F$y._tempV31,this.transformation,F$y._tempV32);var F$a=F$e.elements;F$a[0]=F$YF.scalarLengthSquared(F$y._tempV30),F$a[1]=F$YF.scalarLengthSquared(F$y._tempV31),F$a[2]=F$YF.scalarLengthSquared(F$y._tempV32)},F$e.getCenter=function(F$e){this.transformation.getTranslationVector(F$e)},F$e.containsPoint=function(F$e){var F$F=this.extents.elements,F$a=F$F[0],F$o=F$F[1],F$E=F$F[2];this.transformation.invert(F$y._tempM0),F$YF.transformCoordinate(F$e,F$y._tempM0,F$y._tempV30);var F$s=F$y._tempV30.elements,F$Y=Math.abs(F$s[0]),F$_=Math.abs(F$s[1]),F$R=Math.abs(F$s[2]);return F$ce.nearEqual(F$Y,F$a)&&F$ce.nearEqual(F$_,F$o)&&F$ce.nearEqual(F$R,F$E)?2:F$Y<F$a&&F$_<F$o&&F$R<F$E?1:0},F$e.containsPoints=function(F$e){var F$F=this.extents.elements,F$a=F$F[0],F$o=F$F[1],F$E=F$F[2];this.transformation.invert(F$y._tempM0);for(var F$s=!0,F$Y=!1,F$_=0;F$_<F$e.length;F$_++){F$YF.transformCoordinate(F$e[F$_],F$y._tempM0,F$y._tempV30);var F$R=F$y._tempV30.elements,F$H=Math.abs(F$R[0]),F$g=Math.abs(F$R[1]),F$n=Math.abs(F$R[2]);F$ce.nearEqual(F$H,F$a)&&F$ce.nearEqual(F$g,F$o)&&F$ce.nearEqual(F$n,F$E)&&(F$Y=!0),F$H<F$a&&F$g<F$o&&F$n<F$E?F$Y=!0:F$s=!1}return F$s?1:F$Y?2:0},F$e.containsSphere=function(F$e,F$F){void 0===F$F&&(F$F=!1);var F$a=this.extents.elements,F$o=F$a[0],F$E=F$a[1],F$s=F$a[2],F$Y=F$e.radius;this.transformation.invert(F$y._tempM0),F$YF.transformCoordinate(F$e.center,F$y._tempM0,F$y._tempV30);var F$_=NaN;if(F$_=F$F?F$Y:(F$YF.scale(F$YF.UnitX,F$Y,F$y._tempV31),F$YF.TransformNormal(F$y._tempV31,F$y._tempM0,F$y._tempV31),F$YF.scalarLength(F$y._tempV31)),F$YF.scale(this.extents,-1,F$y._tempV32),F$YF.Clamp(F$y._tempV30,F$y._tempV32,this.extents,F$y._tempV33),F$_*F$_<F$YF.distanceSquared(F$y._tempV30,F$y._tempV33))return 0;var F$R=F$y._tempV30.elements,F$H=F$R[0],F$g=F$R[1],F$n=F$R[2],F$O=F$y._tempV32.elements,F$q=F$O[0],F$I=F$O[1],F$l=F$O[2];return F$q+F$_<=F$H&&F$H<=F$o-F$_&&F$_<F$o-F$q&&F$I+F$_<=F$g&&F$g<=F$E-F$_&&F$_<F$E-F$I&&F$l+F$_<=F$n&&F$n<=F$s-F$_&&F$_<F$s-F$l?1:2},F$e.containsOrientedBoundBox=function(F$e){var F$F=0,F$a=0;F$e.getCorners(F$y._corners);var F$o=this.containsPoints(F$y._corners);if(0!=F$o)return F$o;var F$E=this.extents.elements;F$e.extents.cloneTo(F$y._tempV35);var F$s=F$y._tempV35.elements;F$y._getRows(this.transformation,F$y._rows1),F$y._getRows(F$e.transformation,F$y._rows2);var F$Y=NaN;for(F$F=0;F$F<4;F$F++)for(F$a=0;F$a<4;F$a++)3==F$F||3==F$a?(F$y._tempM0.setElementByRowColumn(F$F,F$a,0),F$y._tempM1.setElementByRowColumn(F$F,F$a,0)):(F$Y=F$YF.dot(F$y._rows1[F$F],F$y._rows2[F$a]),F$y._tempM0.setElementByRowColumn(F$F,F$a,F$Y),F$y._tempM1.setElementByRowColumn(F$F,F$a,Math.abs(F$Y)));F$e.getCenter(F$y._tempV34),this.getCenter(F$y._tempV36),F$YF.subtract(F$y._tempV34,F$y._tempV36,F$y._tempV30);var F$_=F$y._tempV31.elements;F$_[0]=F$YF.dot(F$y._tempV30,F$y._rows1[0]),F$_[1]=F$YF.dot(F$y._tempV30,F$y._rows1[1]),F$_[2]=F$YF.dot(F$y._tempV30,F$y._rows1[2]);var F$R=F$y._tempV32.elements,F$H=F$y._tempV33.elements;for(F$F=0;F$F<3;F$F++)if(F$R[0]=F$y._tempM1.getElementByRowColumn(F$F,0),F$R[1]=F$y._tempM1.getElementByRowColumn(F$F,1),F$R[2]=F$y._tempM1.getElementByRowColumn(F$F,2),F$E[F$F]+F$YF.dot(F$y._tempV35,F$y._tempV32)<Math.abs(F$_[F$F]))return 0;for(F$a=0;F$a<3;F$a++)if(F$R[0]=F$y._tempM1.getElementByRowColumn(0,F$a),F$R[1]=F$y._tempM1.getElementByRowColumn(1,F$a),F$R[2]=F$y._tempM1.getElementByRowColumn(2,F$a),F$H[0]=F$y._tempM0.getElementByRowColumn(0,F$a),F$H[1]=F$y._tempM0.getElementByRowColumn(1,F$a),F$H[2]=F$y._tempM0.getElementByRowColumn(2,F$a),F$YF.dot(this.extents,F$y._tempV32)+F$s[F$a]<Math.abs(F$YF.dot(F$y._tempV31,F$y._tempV33)))return 0;for(F$F=0;F$F<3;F$F++)for(F$a=0;F$a<3;F$a++){var F$g=(F$F+1)%3,F$n=(F$F+2)%3,F$O=(F$a+1)%3,F$q=(F$a+2)%3;if(F$E[F$g]*F$y._tempM1.getElementByRowColumn(F$n,F$a)+F$E[F$n]*F$y._tempM1.getElementByRowColumn(F$g,F$a)+(F$s[F$O]*F$y._tempM1.getElementByRowColumn(F$F,F$q)+F$s[F$q]*F$y._tempM1.getElementByRowColumn(F$F,F$O))<Math.abs(F$_[F$n]*F$y._tempM0.getElementByRowColumn(F$g,F$a)-F$_[F$g]*F$y._tempM0.getElementByRowColumn(F$n,F$a)))return 0}return 2},F$e.containsLine=function(F$e,F$F){F$y._corners[0]=F$e,F$y._corners[1]=F$F;var F$a=this.containsPoints(F$y._corners);if(0!=F$a)return F$a;var F$o=this.extents.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2];this.transformation.invert(F$y._tempM0),F$YF.transformCoordinate(F$e,F$y._tempM0,F$y._tempV30),F$YF.transformCoordinate(F$F,F$y._tempM0,F$y._tempV31),F$YF.add(F$y._tempV30,F$y._tempV31,F$y._tempV32),F$YF.scale(F$y._tempV32,.5,F$y._tempV32),F$YF.subtract(F$y._tempV30,F$y._tempV32,F$y._tempV33);var F$_=F$y._tempV33.elements,F$R=F$_[0],F$H=F$_[1],F$g=F$_[2],F$n=F$y._tempV34.elements,F$O=F$n[0]=Math.abs(F$_[0]),F$q=F$n[1]=Math.abs(F$_[1]),F$I=F$n[2]=Math.abs(F$_[2]),F$l=F$y._tempV32.elements,F$P=F$l[0],F$j=F$l[1],F$$=F$l[2];return Math.abs(F$P)>F$E+F$O?0:Math.abs(F$j)>F$s+F$q?0:Math.abs(F$$)>F$Y+F$I?0:Math.abs(F$j*F$g-F$$*F$H)>F$s*F$I+F$Y*F$q?0:Math.abs(F$P*F$g-F$$*F$R)>F$E*F$I+F$Y*F$O?0:Math.abs(F$P*F$H-F$j*F$R)>F$E*F$q+F$s*F$O?0:2},F$e.containsBoundBox=function(F$e){var F$F=0,F$a=0,F$o=F$e.min,F$E=F$e.max;F$e.getCorners(F$y._corners);var F$s=this.containsPoints(F$y._corners);if(0!=F$s)return F$s;F$YF.subtract(F$E,F$o,F$y._tempV30),F$YF.scale(F$y._tempV30,.5,F$y._tempV30),F$YF.add(F$o,F$y._tempV30,F$y._tempV30),F$YF.subtract(F$E,F$y._tempV30,F$y._tempV31);var F$Y=this.extents.elements,F$_=F$y._tempV31.elements;F$y._getRows(this.transformation,F$y._rows1),this.transformation.invert(F$y._tempM0);for(F$F=0;F$F<3;F$F++)for(F$a=0;F$a<3;F$a++)F$y._tempM1.setElementByRowColumn(F$F,F$a,Math.abs(F$y._tempM0.getElementByRowColumn(F$F,F$a)));this.getCenter(F$y._tempV35),F$YF.subtract(F$y._tempV30,F$y._tempV35,F$y._tempV32);var F$R=F$y._tempV31.elements;F$R[0]=F$YF.dot(F$y._tempV32,F$y._rows1[0]),F$R[1]=F$YF.dot(F$y._tempV32,F$y._rows1[1]),F$R[2]=F$YF.dot(F$y._tempV32,F$y._rows1[2]);var F$H=F$y._tempV33.elements,F$g=F$y._tempV34.elements;for(F$F=0;F$F<3;F$F++)if(F$H[0]=F$y._tempM1.getElementByRowColumn(F$F,0),F$H[1]=F$y._tempM1.getElementByRowColumn(F$F,1),F$H[2]=F$y._tempM1.getElementByRowColumn(F$F,2),F$Y[F$F]+F$YF.dot(F$y._tempV31,F$y._tempV33)<Math.abs(F$R[F$F]))return 0;for(F$a=0;F$a<3;F$a++)if(F$H[0]=F$y._tempM1.getElementByRowColumn(0,F$a),F$H[1]=F$y._tempM1.getElementByRowColumn(1,F$a),F$H[2]=F$y._tempM1.getElementByRowColumn(2,F$a),F$g[0]=F$y._tempM0.getElementByRowColumn(0,F$a),F$g[1]=F$y._tempM0.getElementByRowColumn(1,F$a),F$g[2]=F$y._tempM0.getElementByRowColumn(2,F$a),F$YF.dot(this.extents,F$y._tempV33)+F$_[F$a]<Math.abs(F$YF.dot(F$y._tempV31,F$y._tempV34)))return 0;for(F$F=0;F$F<3;F$F++)for(F$a=0;F$a<3;F$a++){var F$n=(F$F+1)%3,F$O=(F$F+2)%3,F$q=(F$a+1)%3,F$I=(F$a+2)%3;if(F$Y[F$n]*F$y._tempM1.getElementByRowColumn(F$O,F$a)+F$Y[F$O]*F$y._tempM1.getElementByRowColumn(F$n,F$a)+(F$_[F$q]*F$y._tempM1.getElementByRowColumn(F$F,F$I)+F$_[F$I]*F$y._tempM1.getElementByRowColumn(F$F,F$q))<Math.abs(F$R[F$O]*F$y._tempM0.getElementByRowColumn(F$n,F$a)-F$R[F$n]*F$y._tempM0.getElementByRowColumn(F$O,F$a)))return 0}return 2},F$e.intersectsRay=function(F$e,F$F){F$YF.scale(this.extents,-1,F$y._tempV30),this.transformation.invert(F$y._tempM0),F$YF.TransformNormal(F$e.direction,F$y._tempM0,F$y._ray.direction),F$YF.transformCoordinate(F$e.origin,F$y._tempM0,F$y._ray.origin),F$y._boxBound1.min=F$y._tempV30,F$y._boxBound1.max=this.extents;var F$a=Collision.intersectsRayAndBoxRP(F$y._ray,F$y._boxBound1,F$F);return-1!==F$a&&F$YF.transformCoordinate(F$F,this.transformation,F$F),F$a},F$e._getLocalCorners=function(F$e){F$e.length=8;var F$F=this.extents.elements;F$y._tempV30.x=F$F[0],F$y._tempV31.y=F$F[1],F$y._tempV32.z=F$F[2],F$YF.add(F$y._tempV30,F$y._tempV31,F$y._tempV33),F$YF.add(F$y._tempV33,F$y._tempV32,F$e[0]),F$YF.add(F$y._tempV30,F$y._tempV31,F$y._tempV33),F$YF.subtract(F$y._tempV33,F$y._tempV32,F$e[1]),F$YF.subtract(F$y._tempV31,F$y._tempV30,F$y._tempV33),F$YF.subtract(F$y._tempV33,F$y._tempV30,F$e[2]),F$YF.subtract(F$y._tempV31,F$y._tempV30,F$y._tempV33),F$YF.add(F$y._tempV33,F$y._tempV32,F$e[3]),F$YF.subtract(F$y._tempV30,F$y._tempV31,F$y._tempV33),F$YF.add(F$y._tempV33,F$y._tempV32,F$e[4]),F$YF.subtract(F$y._tempV30,F$y._tempV31,F$y._tempV33),F$YF.subtract(F$y._tempV33,F$y._tempV32,F$e[5]),F$YF.scale(F$e[0],-1,F$e[6]),F$YF.subtract(F$y._tempV32,F$y._tempV30,F$y._tempV33),F$YF.subtract(F$y._tempV33,F$y._tempV31,F$e[7])},F$e.equals=function(F$e){return this.extents==F$e.extents&&this.transformation==F$e.transformation},F$e.cloneTo=function(F$e){var F$F=F$e;this.extents.cloneTo(F$F.extents),this.transformation.cloneTo(F$F.transformation)},F$y.createByBoundBox=function(F$e,F$F){var F$a=F$e.min,F$o=F$e.max;F$YF.subtract(F$o,F$a,F$y._tempV30),F$YF.scale(F$y._tempV30,.5,F$y._tempV30),F$YF.add(F$a,F$y._tempV30,F$y._tempV31),F$YF.subtract(F$o,F$y._tempV31,F$y._tempV32),F$eF.translation(F$y._tempV31,F$y._tempM0);var F$E=F$y._tempV32.clone(),F$s=F$y._tempM0.clone();F$F.extents=F$E,F$F.transformation=F$s},F$y.createByMinAndMaxVertex=function(F$e,F$F){return F$YF.subtract(F$F,F$e,F$y._tempV30),F$YF.scale(F$y._tempV30,.5,F$y._tempV30),F$YF.add(F$e,F$y._tempV30,F$y._tempV31),F$YF.subtract(F$F,F$y._tempV31,F$y._tempV32),F$eF.translation(F$y._tempV31,F$y._tempM0),new F$y(F$y._tempV32,F$y._tempM0)},F$y._getRows=function(F$e,F$F){F$F.length=3;var F$a=F$e.elements,F$o=F$F[0].elements;F$o[0]=F$a[0],F$o[1]=F$a[1],F$o[2]=F$a[2];var F$E=F$F[1].elements;F$E[0]=F$a[4],F$E[1]=F$a[5],F$E[2]=F$a[6];var F$s=F$F[2].elements;F$s[0]=F$a[8],F$s[1]=F$a[9],F$s[2]=F$a[10]},F$y.getObbtoObbMatrix4x4=function(F$e,F$F,F$a,F$o){var F$E=F$e.transformation,F$s=F$F.transformation;if(F$a){F$y._getRows(F$E,F$y._rows1),F$y._getRows(F$s,F$y._rows2);for(var F$Y=0;F$Y<3;F$Y++)for(var F$_=0;F$_<3;F$_++)F$o.setElementByRowColumn(F$Y,F$_,F$YF.dot(F$y._rows2[F$Y],F$y._rows1[F$_]));F$F.getCenter(F$y._tempV30),F$e.getCenter(F$y._tempV31),F$YF.subtract(F$y._tempV30,F$y._tempV31,F$y._tempV32);var F$R=F$o.elements;F$R[12]=F$YF.dot(F$y._tempV32,F$y._rows1[0]),F$R[13]=F$YF.dot(F$y._tempV32,F$y._rows1[1]),F$R[14]=F$YF.dot(F$y._tempV32,F$y._rows1[2]),F$R[15]=1}else F$E.invert(F$y._tempM0),F$eF.multiply(F$s,F$y._tempM0,F$o)},F$y.merge=function(F$e,F$F,F$a){var F$o=F$e.extents,F$E=F$e.transformation;F$y.getObbtoObbMatrix4x4(F$e,F$F,F$a,F$y._tempM0),F$F._getLocalCorners(F$y._corners),F$YF.transformCoordinate(F$y._corners[0],F$y._tempM0,F$y._corners[0]),F$YF.transformCoordinate(F$y._corners[1],F$y._tempM0,F$y._corners[1]),F$YF.transformCoordinate(F$y._corners[2],F$y._tempM0,F$y._corners[2]),F$YF.transformCoordinate(F$y._corners[3],F$y._tempM0,F$y._corners[3]),F$YF.transformCoordinate(F$y._corners[4],F$y._tempM0,F$y._corners[4]),F$YF.transformCoordinate(F$y._corners[5],F$y._tempM0,F$y._corners[5]),F$YF.transformCoordinate(F$y._corners[6],F$y._tempM0,F$y._corners[6]),F$YF.transformCoordinate(F$y._corners[7],F$y._tempM0,F$y._corners[7]),F$YF.scale(F$o,-1,F$y._boxBound1.min),F$o.cloneTo(F$y._boxBound1.max),F$ie.createfromPoints(F$y._corners,F$y._boxBound2),F$ie.merge(F$y._boxBound2,F$y._boxBound1,F$y._boxBound3);var F$s=F$y._boxBound3.min,F$Y=F$y._boxBound3.max;F$YF.subtract(F$Y,F$s,F$y._tempV30),F$YF.scale(F$y._tempV30,.5,F$y._tempV30),F$YF.add(F$s,F$y._tempV30,F$y._tempV32),F$YF.subtract(F$Y,F$y._tempV32,F$o),F$YF.transformCoordinate(F$y._tempV32,F$E,F$y._tempV33)},F$n(F$y,["_tempV30",function(){return this._tempV30=new F$YF},"_tempV31",function(){return this._tempV31=new F$YF},"_tempV32",function(){return this._tempV32=new F$YF},"_tempV33",function(){return this._tempV33=new F$YF},"_tempV34",function(){return this._tempV34=new F$YF},"_tempV35",function(){return this._tempV35=new F$YF},"_tempV36",function(){return this._tempV36=new F$YF},"_tempM0",function(){return this._tempM0=new F$eF},"_tempM1",function(){return this._tempM1=new F$eF},"_corners",function(){return this._corners=[new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF]},"_rows1",function(){return this._rows1=[new F$YF,new F$YF,new F$YF]},"_rows2",function(){return this._rows2=[new F$YF,new F$YF,new F$YF]},"_ray",function(){return this._ray=new F$EF(new F$YF,new F$YF)},"_boxBound1",function(){return this._boxBound1=new F$ie(new F$YF,new F$YF)},"_boxBound2",function(){return this._boxBound2=new F$ie(new F$YF,new F$YF)},"_boxBound3",function(){return this._boxBound3=new F$ie(new F$YF,new F$YF)}])}(),function(){function F$D(F$e,F$F){this.normal=null,this.distance=NaN,void 0===F$F&&(F$F=0),this.normal=F$e,this.distance=F$F}return F$q(F$D,"laya.d3.math.Plane"),F$D.prototype.normalize=function(){var F$e=this.normal.elements,F$F=F$e[0],F$a=F$e[1],F$o=F$e[2],F$E=1/Math.sqrt(F$F*F$F+F$a*F$a+F$o*F$o);F$e[0]=F$F*F$E,F$e[1]=F$a*F$E,F$e[2]=F$o*F$E,this.distance*=F$E},F$D.createPlaneBy3P=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$F.elements,F$s=F$a.elements,F$Y=F$E[0]-F$o[0],F$_=F$E[1]-F$o[1],F$R=F$E[2]-F$o[2],F$H=F$s[0]-F$o[0],F$g=F$s[1]-F$o[1],F$n=F$s[2]-F$o[2],F$O=F$_*F$n-F$R*F$g,F$q=F$R*F$H-F$Y*F$n,F$I=F$Y*F$g-F$_*F$H,F$l=1/Math.sqrt(F$O*F$O+F$q*F$q+F$I*F$I),F$P=F$O*F$l,F$j=F$q*F$l,F$$=F$I*F$l,F$y=F$D._TEMPVec3.elements;F$y[0]=F$P,F$y[1]=F$j,F$y[2]=F$$;var F$M=-(F$P*F$o[0]+F$j*F$o[1]+F$$*F$o[2]);return new F$D(F$D._TEMPVec3,F$M)},F$D.PlaneIntersectionType_Back=0,F$D.PlaneIntersectionType_Front=1,F$D.PlaneIntersectionType_Intersecting=2,F$n(F$D,["_TEMPVec3",function(){return this._TEMPVec3=new F$YF}]),F$D}()),F$aF=function(){function F$E(F$e,F$F,F$a,F$o){this.elements=new Float32Array(4),void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=1),this.elements[0]=F$e,this.elements[1]=F$F,this.elements[2]=F$a,this.elements[3]=F$o}F$q(F$E,"laya.d3.math.Quaternion");var F$e=F$E.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.scaling=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements;F$a[0]=F$o[0]*F$e,F$a[1]=F$o[1]*F$e,F$a[2]=F$o[2]*F$e,F$a[3]=F$o[3]*F$e},F$e.normalize=function(F$e){var F$F=F$e.elements,F$a=this.elements,F$o=F$a[0],F$E=F$a[1],F$s=F$a[2],F$Y=F$a[3],F$_=F$o*F$o+F$E*F$E+F$s*F$s+F$Y*F$Y;0<F$_&&(F$_=1/Math.sqrt(F$_),F$F[0]=F$o*F$_,F$F[1]=F$E*F$_,F$F[2]=F$s*F$_,F$F[3]=F$Y*F$_)},F$e.length=function(){var F$e=this.elements,F$F=F$e[0],F$a=F$e[1],F$o=F$e[2],F$E=F$e[3];return Math.sqrt(F$F*F$F+F$a*F$a+F$o*F$o+F$E*F$E)},F$e.rotateX=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements;F$e*=.5;var F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=Math.sin(F$e),F$H=Math.cos(F$e);F$a[0]=F$E*F$H+F$_*F$R,F$a[1]=F$s*F$H+F$Y*F$R,F$a[2]=F$Y*F$H-F$s*F$R,F$a[3]=F$_*F$H-F$E*F$R},F$e.rotateY=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements;F$e*=.5;var F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=Math.sin(F$e),F$H=Math.cos(F$e);F$a[0]=F$E*F$H-F$Y*F$R,F$a[1]=F$s*F$H+F$_*F$R,F$a[2]=F$Y*F$H+F$E*F$R,F$a[3]=F$_*F$H-F$s*F$R},F$e.rotateZ=function(F$e,F$F){var F$a=F$F.elements,F$o=this.elements;F$e*=.5;var F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=Math.sin(F$e),F$H=Math.cos(F$e);F$a[0]=F$E*F$H+F$s*F$R,F$a[1]=F$s*F$H-F$E*F$R,F$a[2]=F$Y*F$H+F$_*F$R,F$a[3]=F$_*F$H-F$Y*F$R},F$e.getYawPitchRoll=function(F$e){F$YF.transformQuat(F$YF.ForwardRH,this,F$E.TEMPVector31),F$YF.transformQuat(F$YF.Up,this,F$E.TEMPVector32);var F$F=F$E.TEMPVector32.elements;F$E.angleTo(F$YF.ZERO,F$E.TEMPVector31,F$E.TEMPVector33);var F$a=F$E.TEMPVector33.elements;F$a[0]==Math.PI/2?(F$a[1]=F$E.arcTanAngle(F$F[2],F$F[0]),F$a[2]=0):F$a[0]==-Math.PI/2?(F$a[1]=F$E.arcTanAngle(-F$F[2],-F$F[0]),F$a[2]=0):(F$eF.createRotationY(-F$a[1],F$E.TEMPMatrix0),F$eF.createRotationX(-F$a[0],F$E.TEMPMatrix1),F$YF.transformCoordinate(F$E.TEMPVector32,F$E.TEMPMatrix0,F$E.TEMPVector32),F$YF.transformCoordinate(F$E.TEMPVector32,F$E.TEMPMatrix1,F$E.TEMPVector32),F$a[2]=F$E.arcTanAngle(F$F[1],-F$F[0])),F$a[1]<=-Math.PI&&(F$a[1]=Math.PI),F$a[2]<=-Math.PI&&(F$a[2]=Math.PI),F$a[1]>=Math.PI&&F$a[2]>=Math.PI&&(F$a[1]=0,F$a[2]=0,F$a[0]=Math.PI-F$a[0]);var F$o=F$e.elements;F$o[0]=F$a[1],F$o[1]=F$a[0],F$o[2]=F$a[2]},F$e.invert=function(F$e){var F$F=F$e.elements,F$a=this.elements,F$o=F$a[0],F$E=F$a[1],F$s=F$a[2],F$Y=F$a[3],F$_=F$o*F$o+F$E*F$E+F$s*F$s+F$Y*F$Y,F$R=F$_?1/F$_:0;F$F[0]=-F$o*F$R,F$F[1]=-F$E*F$R,F$F[2]=-F$s*F$R,F$F[3]=F$Y*F$R},F$e.identity=function(){var F$e=this.elements;F$e[0]=0,F$e[1]=0,F$e[2]=0,F$e[3]=1},F$e.fromArray=function(F$e,F$F){void 0===F$F&&(F$F=0),this.elements[0]=F$e[F$F+0],this.elements[1]=F$e[F$F+1],this.elements[2]=F$e[F$F+2],this.elements[3]=F$e[F$F+3]},F$e.cloneTo=function(F$e){var F$F,F$a,F$o;if((F$a=this.elements)!==(F$o=F$e.elements))for(F$F=0;F$F<4;++F$F)F$o[F$F]=F$a[F$F]},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$e.equals=function(F$e){var F$F=this.elements,F$a=F$e.elements;return F$ce.nearEqual(F$F[0],F$a[0])&&F$ce.nearEqual(F$F[1],F$a[1])&&F$ce.nearEqual(F$F[2],F$a[2])&&F$ce.nearEqual(F$F[3],F$a[3])},F$e.lengthSquared=function(){var F$e=this.elements[0],F$F=this.elements[1],F$a=this.elements[2],F$o=this.elements[3];return F$e*F$e+F$F*F$F+F$a*F$a+F$o*F$o},F$I(0,F$e,"x",function(){return this.elements[0]}),F$I(0,F$e,"y",function(){return this.elements[1]}),F$I(0,F$e,"z",function(){return this.elements[2]}),F$I(0,F$e,"w",function(){return this.elements[3]}),F$E.createFromYawPitchRoll=function(F$e,F$F,F$a,F$o){var F$E=.5*F$a,F$s=.5*F$F,F$Y=.5*F$e,F$_=Math.sin(F$E),F$R=Math.cos(F$E),F$H=Math.sin(F$s),F$g=Math.cos(F$s),F$n=Math.sin(F$Y),F$O=Math.cos(F$Y),F$q=F$o.elements;F$q[0]=F$O*F$H*F$R+F$n*F$g*F$_,F$q[1]=F$n*F$g*F$R-F$O*F$H*F$_,F$q[2]=F$O*F$g*F$_-F$n*F$H*F$R,F$q[3]=F$O*F$g*F$R+F$n*F$H*F$_},F$E.multiply=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$F.elements,F$s=F$a.elements,F$Y=F$o[0],F$_=F$o[1],F$R=F$o[2],F$H=F$o[3],F$g=F$E[0],F$n=F$E[1],F$O=F$E[2],F$q=F$E[3],F$I=F$_*F$O-F$R*F$n,F$l=F$R*F$g-F$Y*F$O,F$P=F$Y*F$n-F$_*F$g,F$j=F$Y*F$g+F$_*F$n+F$R*F$O;F$s[0]=F$Y*F$q+F$g*F$H+F$I,F$s[1]=F$_*F$q+F$n*F$H+F$l,F$s[2]=F$R*F$q+F$O*F$H+F$P,F$s[3]=F$H*F$q-F$j},F$E.arcTanAngle=function(F$e,F$F){return 0==F$e?1==F$F?Math.PI/2:-Math.PI/2:0<F$e?Math.atan(F$F/F$e):F$e<0?0<F$F?Math.atan(F$F/F$e)+Math.PI:Math.atan(F$F/F$e)-Math.PI:0},F$E.angleTo=function(F$e,F$F,F$a){F$YF.subtract(F$F,F$e,F$E.TEMPVector30),F$YF.normalize(F$E.TEMPVector30,F$E.TEMPVector30),F$a.elements[0]=Math.asin(F$E.TEMPVector30.y),F$a.elements[1]=F$E.arcTanAngle(-F$E.TEMPVector30.z,-F$E.TEMPVector30.x)},F$E.createFromAxisAngle=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements;F$F*=.5;var F$s=Math.sin(F$F);F$o[0]=F$s*F$E[0],F$o[1]=F$s*F$E[1],F$o[2]=F$s*F$E[2],F$o[3]=Math.cos(F$F)},F$E.createFromMatrix3x3=function(F$e,F$F){var F$a,F$o=F$F.elements,F$E=F$e.elements,F$s=F$E[0]+F$E[4]+F$E[8];if(0<F$s)F$a=Math.sqrt(F$s+1),F$o[3]=.5*F$a,F$a=.5/F$a,F$o[0]=(F$E[5]-F$E[7])*F$a,F$o[1]=(F$E[6]-F$E[2])*F$a,F$o[2]=(F$E[1]-F$E[3])*F$a;else{var F$Y=0;F$E[4]>F$E[0]&&(F$Y=1),F$E[8]>F$E[3*F$Y+F$Y]&&(F$Y=2);var F$_=(F$Y+1)%3,F$R=(F$Y+2)%3;F$a=Math.sqrt(F$E[3*F$Y+F$Y]-F$E[3*F$_+F$_]-F$E[3*F$R+F$R]+1),F$o[F$Y]=.5*F$a,F$a=.5/F$a,F$o[3]=(F$E[3*F$_+F$R]-F$E[3*F$R+F$_])*F$a,F$o[F$_]=(F$E[3*F$_+F$Y]+F$E[3*F$Y+F$_])*F$a,F$o[F$R]=(F$E[3*F$R+F$Y]+F$E[3*F$Y+F$R])*F$a}},F$E.createFromMatrix4x4=function(F$e,F$F){var F$a,F$o,F$E=F$e.elements,F$s=F$F.elements,F$Y=F$E[0]+F$E[5]+F$E[10];0<F$Y?(F$a=Math.sqrt(F$Y+1),F$s[3]=.5*F$a,F$a=.5/F$a,F$s[0]=(F$E[6]-F$E[9])*F$a,F$s[1]=(F$E[8]-F$E[2])*F$a,F$s[2]=(F$E[1]-F$E[4])*F$a):F$E[0]>=F$E[5]&&F$E[0]>=F$E[10]?(F$o=.5/(F$a=Math.sqrt(1+F$E[0]-F$E[5]-F$E[10])),F$s[0]=.5*F$a,F$s[1]=(F$E[1]+F$E[4])*F$o,F$s[2]=(F$E[2]+F$E[8])*F$o,F$s[3]=(F$E[6]-F$E[9])*F$o):F$E[5]>F$E[10]?(F$o=.5/(F$a=Math.sqrt(1+F$E[5]-F$E[0]-F$E[10])),F$s[0]=(F$E[4]+F$E[1])*F$o,F$s[1]=.5*F$a,F$s[2]=(F$E[9]+F$E[6])*F$o,F$s[3]=(F$E[8]-F$E[2])*F$o):(F$o=.5/(F$a=Math.sqrt(1+F$E[10]-F$E[0]-F$E[5])),F$s[0]=(F$E[8]+F$E[2])*F$o,F$s[1]=(F$E[9]+F$E[6])*F$o,F$s[2]=.5*F$a,F$s[3]=(F$E[1]-F$E[4])*F$o)},F$E.slerp=function(F$e,F$F,F$a,F$o){var F$E,F$s,F$Y,F$_,F$R,F$H=F$e.elements,F$g=F$F.elements,F$n=F$o.elements,F$O=F$H[0],F$q=F$H[1],F$I=F$H[2],F$l=F$H[3],F$P=F$g[0],F$j=F$g[1],F$$=F$g[2],F$y=F$g[3];return(F$s=F$O*F$P+F$q*F$j+F$I*F$$+F$l*F$y)<0&&(F$s=-F$s,F$P=-F$P,F$j=-F$j,F$$=-F$$,F$y=-F$y),F$R=1e-6<1-F$s?(F$E=Math.acos(F$s),F$Y=Math.sin(F$E),F$_=Math.sin((1-F$a)*F$E)/F$Y,Math.sin(F$a*F$E)/F$Y):(F$_=1-F$a,F$a),F$n[0]=F$_*F$O+F$R*F$P,F$n[1]=F$_*F$q+F$R*F$j,F$n[2]=F$_*F$I+F$R*F$$,F$n[3]=F$_*F$l+F$R*F$y,F$n},F$E.lerp=function(F$e,F$F,F$a,F$o){var F$E=F$o.elements,F$s=F$e.elements,F$Y=F$F.elements,F$_=F$s[0],F$R=F$s[1],F$H=F$s[2],F$g=F$s[3];F$E[0]=F$_+F$a*(F$Y[0]-F$_),F$E[1]=F$R+F$a*(F$Y[1]-F$R),F$E[2]=F$H+F$a*(F$Y[2]-F$H),F$E[3]=F$g+F$a*(F$Y[3]-F$g)},F$E.add=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]+F$s[0],F$o[1]=F$E[1]+F$s[1],F$o[2]=F$E[2]+F$s[2],F$o[3]=F$E[3]+F$s[3]},F$E.dot=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;return F$a[0]*F$o[0]+F$a[1]*F$o[1]+F$a[2]*F$o[2]+F$a[3]*F$o[3]},F$E.rotationLookAt=function(F$e,F$F,F$a){F$E.lookAt(F$YF.ZERO,F$e,F$F,F$a)},F$E.lookAt=function(F$e,F$F,F$a,F$o){F$he.lookAt(F$e,F$F,F$a,F$E._tempMatrix3x3),F$E.rotationMatrix(F$E._tempMatrix3x3,F$o)},F$E.invert=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$e.lengthSquared();F$ce.isZero(F$E)||(F$E=1/F$E,F$o[0]=-F$a[0]*F$E,F$o[1]=-F$a[1]*F$E,F$o[2]=-F$a[2]*F$E,F$o[3]=F$a[3]*F$E)},F$E.rotationMatrix=function(F$e,F$F){var F$a=F$e.elements,F$o=F$a[0],F$E=F$a[1],F$s=F$a[2],F$Y=F$a[3],F$_=F$a[4],F$R=F$a[5],F$H=F$a[6],F$g=F$a[7],F$n=F$a[8],F$O=F$F.elements,F$q=NaN,F$I=NaN,F$l=F$o+F$_+F$n;0<F$l?(F$q=Math.sqrt(F$l+1),F$O[3]=.5*F$q,F$q=.5/F$q,F$O[0]=(F$R-F$g)*F$q,F$O[1]=(F$H-F$s)*F$q,F$O[2]=(F$E-F$Y)*F$q):F$_<=F$o&&F$n<=F$o?(F$I=.5/(F$q=Math.sqrt(1+F$o-F$_-F$n)),F$O[0]=.5*F$q,F$O[1]=(F$E+F$Y)*F$I,F$O[2]=(F$s+F$H)*F$I,F$O[3]=(F$R-F$g)*F$I):F$n<F$_?(F$I=.5/(F$q=Math.sqrt(1+F$_-F$o-F$n)),F$O[0]=(F$Y+F$E)*F$I,F$O[1]=.5*F$q,F$O[2]=(F$g+F$R)*F$I,F$O[3]=(F$H-F$s)*F$I):(F$I=.5/(F$q=Math.sqrt(1+F$n-F$o-F$_)),F$O[0]=(F$H+F$s)*F$I,F$O[1]=(F$g+F$R)*F$I,F$O[2]=.5*F$q,F$O[3]=(F$E-F$Y)*F$I)},F$E.DEFAULT=new F$E,F$n(F$E,["TEMPVector30",function(){return this.TEMPVector30=new F$YF},"TEMPVector31",function(){return this.TEMPVector31=new F$YF},"TEMPVector32",function(){return this.TEMPVector32=new F$YF},"TEMPVector33",function(){return this.TEMPVector33=new F$YF},"TEMPMatrix0",function(){return this.TEMPMatrix0=new F$eF},"TEMPMatrix1",function(){return this.TEMPMatrix1=new F$eF},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new F$he},"NAN",function(){return this.NAN=new F$E(NaN,NaN,NaN,NaN)}]),F$E}(),F$oF=function(){function F$e(F$e){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=F$e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}F$q(F$e,"laya.d3.math.Rand");var F$F=F$e.prototype;return F$F.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},F$F.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},F$F.getSignedFloat=function(){return 2*this.getFloat()-1},F$I(0,F$F,"seed",function(){return this.seeds[0]},function(F$e){this.seeds[0]=F$e,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),F$e.getFloatFromInt=function(F$e){return 1/8388607*(8388607&F$e)},F$e.getByteFromInt=function(F$e){return(8388607&F$e)>>>15},F$e}(),F$EF=(function(){function F$E(F$e){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(F$e instanceof Array)||4!==F$e.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|F$e[0],this._state0L=0|F$e[1],this._state1U=0|F$e[2],this._state1L=0|F$e[3]}F$q(F$E,"laya.d3.math.RandX");var F$e=F$E.prototype;F$e.randomint=function(){var F$e=this._state0U,F$F=this._state0L,F$a=this._state1U,F$o=this._state1L,F$E=(F$o>>>0)+(F$F>>>0),F$s=F$a+F$e+(F$E/2>>>31)>>>0,F$Y=F$E>>>0,F$_=0,F$R=0;F$_=(F$e^=F$_=F$e<<23|(-512&F$F)>>>9)^(this._state0U=F$a),F$R=(F$F^=F$R=F$F<<23)^(this._state0L=F$o);F$_^=F$e>>>18,F$R^=F$F>>>18|(262143&F$e)<<14;return F$_^=F$a>>>5,F$R^=F$o>>>5|(31&F$a)<<27,this._state1U=F$_,this._state1L=F$R,[F$s,F$Y]},F$e.random=function(){var F$e=this.randomint(),F$F=F$e[0],F$a=1023<<20|F$F>>>12,F$o=0|(F$e[1]>>>12|(4095&F$F)<<20);return F$E._CONVERTION_BUFFER.setUint32(0,F$a,!1),F$E._CONVERTION_BUFFER.setUint32(4,F$o,!1),F$oF._CONVERTION_BUFFER.getFloat64(0,!1)-1},F$n(F$E,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new F$oF([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function F$e(F$e,F$F){this.origin=null,this.direction=null,this.origin=F$e,this.direction=F$F}return F$q(F$e,"laya.d3.math.Ray"),F$e}()),F$sF=function(){function F$e(F$e,F$F){this.elements=new Float32Array(2),void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0);var F$a=this.elements;F$a[0]=F$e,F$a[1]=F$F}F$q(F$e,"laya.d3.math.Vector2");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.fromArray=function(F$e,F$F){void 0===F$F&&(F$F=0),this.elements[0]=F$e[F$F+0],this.elements[1]=F$e[F$F+1]},F$F.cloneTo=function(F$e){var F$F=F$e.elements,F$a=this.elements;F$F[0]=F$a[0],F$F[1]=F$a[1]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"x",function(){return this.elements[0]},function(F$e){this.elements[0]=F$e}),F$I(0,F$F,"y",function(){return this.elements[1]},function(F$e){this.elements[1]=F$e}),F$e.scale=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements;F$o[0]=F$E[0]*F$F,F$o[1]=F$E[1]*F$F},F$n(F$e,["ZERO",function(){return this.ZERO=new F$e(0,0)},"ONE",function(){return this.ONE=new F$e(1,1)}]),F$e}(),F$YF=function(){function F$g(F$e,F$F,F$a){this.elements=new Float32Array(3),void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0);var F$o=this.elements;F$o[0]=F$e,F$o[1]=F$F,F$o[2]=F$a}F$q(F$g,"laya.d3.math.Vector3");var F$e=F$g.prototype;return F$D.imps(F$e,{"laya.d3.core.IClone":!0}),F$e.fromArray=function(F$e,F$F){void 0===F$F&&(F$F=0),this.elements[0]=F$e[F$F+0],this.elements[1]=F$e[F$F+1],this.elements[2]=F$e[F$F+2]},F$e.cloneTo=function(F$e){var F$F=F$e.elements,F$a=this.elements;F$F[0]=F$a[0],F$F[1]=F$a[1],F$F[2]=F$a[2]},F$e.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$e.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},F$e.reset=function(F$e,F$F,F$a){this.elements[0]=F$e,this.elements[1]=F$F,this.elements[2]=F$a},F$I(0,F$e,"x",function(){return this.elements[0]},function(F$e){this.elements[0]=F$e}),F$I(0,F$e,"y",function(){return this.elements[1]},function(F$e){this.elements[1]=F$e}),F$I(0,F$e,"z",function(){return this.elements[2]},function(F$e){this.elements[2]=F$e}),F$g.distanceSquared=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0]-F$o[0],F$s=F$a[1]-F$o[1],F$Y=F$a[2]-F$o[2];return F$E*F$E+F$s*F$s+F$Y*F$Y},F$g.distance=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0]-F$o[0],F$s=F$a[1]-F$o[1],F$Y=F$a[2]-F$o[2];return Math.sqrt(F$E*F$E+F$s*F$s+F$Y*F$Y)},F$g.min=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=Math.min(F$E[0],F$s[0]),F$o[1]=Math.min(F$E[1],F$s[1]),F$o[2]=Math.min(F$E[2],F$s[2])},F$g.max=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=Math.max(F$E[0],F$s[0]),F$o[1]=Math.max(F$E[1],F$s[1]),F$o[2]=Math.max(F$E[2],F$s[2])},F$g.transformQuat=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements,F$Y=F$E[0],F$_=F$E[1],F$R=F$E[2],F$H=F$s[0],F$g=F$s[1],F$n=F$s[2],F$O=F$s[3],F$q=F$O*F$Y+F$g*F$R-F$n*F$_,F$I=F$O*F$_+F$n*F$Y-F$H*F$R,F$l=F$O*F$R+F$H*F$_-F$g*F$Y,F$P=-F$H*F$Y-F$g*F$_-F$n*F$R;F$o[0]=F$q*F$O+F$P*-F$H+F$I*-F$n-F$l*-F$g,F$o[1]=F$I*F$O+F$P*-F$g+F$l*-F$H-F$q*-F$n,F$o[2]=F$l*F$O+F$P*-F$n+F$q*-F$g-F$I*-F$H},F$g.scalarLength=function(F$e){var F$F=F$e.elements,F$a=F$F[0],F$o=F$F[1],F$E=F$F[2];return Math.sqrt(F$a*F$a+F$o*F$o+F$E*F$E)},F$g.scalarLengthSquared=function(F$e){var F$F=F$e.elements,F$a=F$F[0],F$o=F$F[1],F$E=F$F[2];return F$a*F$a+F$o*F$o+F$E*F$E},F$g.normalize=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0],F$s=F$a[1],F$Y=F$a[2],F$_=F$E*F$E+F$s*F$s+F$Y*F$Y;0<F$_&&(F$_=1/Math.sqrt(F$_),F$o[0]=F$a[0]*F$_,F$o[1]=F$a[1]*F$_,F$o[2]=F$a[2]*F$_)},F$g.multiply=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]*F$s[0],F$o[1]=F$E[1]*F$s[1],F$o[2]=F$E[2]*F$s[2]},F$g.scale=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements;F$o[0]=F$E[0]*F$F,F$o[1]=F$E[1]*F$F,F$o[2]=F$E[2]*F$F},F$g.lerp=function(F$e,F$F,F$a,F$o){var F$E=F$o.elements,F$s=F$e.elements,F$Y=F$F.elements,F$_=F$s[0],F$R=F$s[1],F$H=F$s[2];F$E[0]=F$_+F$a*(F$Y[0]-F$_),F$E[1]=F$R+F$a*(F$Y[1]-F$R),F$E[2]=F$H+F$a*(F$Y[2]-F$H)},F$g.transformV3ToV3=function(F$e,F$F,F$a){var F$o=F$g._tempVector4;F$g.transformV3ToV4(F$e,F$F,F$o);var F$E=F$o.elements,F$s=F$a.elements;F$s[0]=F$E[0],F$s[1]=F$E[1],F$s[2]=F$E[2]},F$g.transformV3ToV4=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$F.elements,F$R=F$a.elements;F$R[0]=F$E*F$_[0]+F$s*F$_[4]+F$Y*F$_[8]+F$_[12],F$R[1]=F$E*F$_[1]+F$s*F$_[5]+F$Y*F$_[9]+F$_[13],F$R[2]=F$E*F$_[2]+F$s*F$_[6]+F$Y*F$_[10]+F$_[14],F$R[3]=F$E*F$_[3]+F$s*F$_[7]+F$Y*F$_[11]+F$_[15]},F$g.TransformNormal=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$F.elements,F$R=F$a.elements;F$R[0]=F$E*F$_[0]+F$s*F$_[4]+F$Y*F$_[8],F$R[1]=F$E*F$_[1]+F$s*F$_[5]+F$Y*F$_[9],F$R[2]=F$E*F$_[2]+F$s*F$_[6]+F$Y*F$_[10]},F$g.transformCoordinate=function(F$e,F$F,F$a){var F$o=F$g._tempVector4.elements,F$E=F$e.elements,F$s=F$E[0],F$Y=F$E[1],F$_=F$E[2],F$R=F$F.elements;F$o[0]=F$s*F$R[0]+F$Y*F$R[4]+F$_*F$R[8]+F$R[12],F$o[1]=F$s*F$R[1]+F$Y*F$R[5]+F$_*F$R[9]+F$R[13],F$o[2]=F$s*F$R[2]+F$Y*F$R[6]+F$_*F$R[10]+F$R[14],F$o[3]=1/(F$s*F$R[3]+F$Y*F$R[7]+F$_*F$R[11]+F$R[15]);var F$H=F$a.elements;F$H[0]=F$o[0]*F$o[3],F$H[1]=F$o[1]*F$o[3],F$H[2]=F$o[2]*F$o[3]},F$g.Clamp=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements,F$s=F$E[0],F$Y=F$E[1],F$_=F$E[2],F$R=F$F.elements,F$H=F$R[0],F$g=F$R[1],F$n=F$R[2],F$O=F$a.elements,F$q=F$O[0],F$I=F$O[1],F$l=F$O[2],F$P=F$o.elements;F$s=(F$s=F$q<F$s?F$q:F$s)<F$H?F$H:F$s,F$Y=(F$Y=F$I<F$Y?F$I:F$Y)<F$g?F$g:F$Y,F$_=(F$_=F$l<F$_?F$l:F$_)<F$n?F$n:F$_,F$P[0]=F$s,F$P[1]=F$Y,F$P[2]=F$_},F$g.add=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]+F$s[0],F$o[1]=F$E[1]+F$s[1],F$o[2]=F$E[2]+F$s[2]},F$g.subtract=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]-F$s[0],F$o[1]=F$E[1]-F$s[1],F$o[2]=F$E[2]-F$s[2]},F$g.cross=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$F.elements,F$s=F$a.elements,F$Y=F$o[0],F$_=F$o[1],F$R=F$o[2],F$H=F$E[0],F$g=F$E[1],F$n=F$E[2];F$s[0]=F$_*F$n-F$R*F$g,F$s[1]=F$R*F$H-F$Y*F$n,F$s[2]=F$Y*F$g-F$_*F$H},F$g.dot=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;return F$a[0]*F$o[0]+F$a[1]*F$o[1]+F$a[2]*F$o[2]},F$g.equals=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;return F$ce.nearEqual(Math.abs(F$a[0]),Math.abs(F$o[0]))&&F$ce.nearEqual(Math.abs(F$a[1]),Math.abs(F$o[1]))&&F$ce.nearEqual(Math.abs(F$a[2]),Math.abs(F$o[2]))},F$g.ZERO=new F$g(0,0,0),F$g.ONE=new F$g(1,1,1),F$g.NegativeUnitX=new F$g(-1,0,0),F$g.UnitX=new F$g(1,0,0),F$g.UnitY=new F$g(0,1,0),F$g.UnitZ=new F$g(0,0,1),F$g.ForwardRH=new F$g(0,0,-1),F$g.ForwardLH=new F$g(0,0,1),F$g.Up=new F$g(0,1,0),F$g.NAN=new F$g(NaN,NaN,NaN),F$n(F$g,["_tempVector4",function(){return this._tempVector4=new F$_F}]),F$g}(),F$_F=function(){function F$e(F$e,F$F,F$a,F$o){this.elements=new Float32Array(4),void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=0);var F$E=this.elements;F$E[0]=F$e,F$E[1]=F$F,F$E[2]=F$a,F$E[3]=F$o}F$q(F$e,"laya.d3.math.Vector4");var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F.fromArray=function(F$e,F$F){void 0===F$F&&(F$F=0),this.elements[0]=F$e[F$F+0],this.elements[1]=F$e[F$F+1],this.elements[2]=F$e[F$F+2],this.elements[3]=F$e[F$F+3]},F$F.cloneTo=function(F$e){var F$F=F$e.elements,F$a=this.elements;F$F[0]=F$a[0],F$F[1]=F$a[1],F$F[2]=F$a[2],F$F[3]=F$a[3]},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$F.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},F$F.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},F$I(0,F$F,"x",function(){return this.elements[0]},function(F$e){this.elements[0]=F$e}),F$I(0,F$F,"y",function(){return this.elements[1]},function(F$e){this.elements[1]=F$e}),F$I(0,F$F,"z",function(){return this.elements[2]},function(F$e){this.elements[2]=F$e}),F$I(0,F$F,"w",function(){return this.elements[3]},function(F$e){this.elements[3]=F$e}),F$e.lerp=function(F$e,F$F,F$a,F$o){var F$E=F$o.elements,F$s=F$e.elements,F$Y=F$F.elements,F$_=F$s[0],F$R=F$s[1],F$H=F$s[2],F$g=F$s[3];F$E[0]=F$_+F$a*(F$Y[0]-F$_),F$E[1]=F$R+F$a*(F$Y[1]-F$R),F$E[2]=F$H+F$a*(F$Y[2]-F$H),F$E[3]=F$g+F$a*(F$Y[3]-F$g)},F$e.transformByM4x4=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$o[0],F$s=F$o[1],F$Y=F$o[2],F$_=F$o[3],F$R=F$F.elements,F$H=F$a.elements;F$H[0]=F$E*F$R[0]+F$s*F$R[4]+F$Y*F$R[8]+F$_*F$R[12],F$H[1]=F$E*F$R[1]+F$s*F$R[5]+F$Y*F$R[9]+F$_*F$R[13],F$H[2]=F$E*F$R[2]+F$s*F$R[6]+F$Y*F$R[10]+F$_*F$R[14],F$H[3]=F$E*F$R[3]+F$s*F$R[7]+F$Y*F$R[11]+F$_*F$R[15]},F$e.equals=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;return F$ce.nearEqual(Math.abs(F$a[0]),Math.abs(F$o[0]))&&F$ce.nearEqual(Math.abs(F$a[1]),Math.abs(F$o[1]))&&F$ce.nearEqual(Math.abs(F$a[2]),Math.abs(F$o[2]))&&F$ce.nearEqual(Math.abs(F$a[3]),Math.abs(F$o[3]))},F$e.normalize=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$e.length();0<F$E&&(F$o[0]=F$a[0]*F$E,F$o[1]=F$a[1]*F$E,F$o[2]=F$a[2]*F$E,F$o[3]=F$a[3]*F$E)},F$e.add=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]+F$s[0],F$o[1]=F$E[1]+F$s[1],F$o[2]=F$E[2]+F$s[2],F$o[3]=F$E[3]+F$s[3]},F$e.subtract=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]-F$s[0],F$o[1]=F$E[1]-F$s[1],F$o[2]=F$E[2]-F$s[2],F$o[3]=F$E[3]-F$s[3]},F$e.multiply=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=F$E[0]*F$s[0],F$o[1]=F$E[1]*F$s[1],F$o[2]=F$E[2]*F$s[2],F$o[3]=F$E[3]*F$s[3]},F$e.scale=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements;F$o[0]=F$E[0]*F$F,F$o[1]=F$E[1]*F$F,F$o[2]=F$E[2]*F$F,F$o[3]=F$E[3]*F$F},F$e.Clamp=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements,F$s=F$E[0],F$Y=F$E[1],F$_=F$E[2],F$R=F$E[3],F$H=F$F.elements,F$g=F$H[0],F$n=F$H[1],F$O=F$H[2],F$q=F$H[3],F$I=F$a.elements,F$l=F$I[0],F$P=F$I[1],F$j=F$I[2],F$$=F$I[3],F$y=F$o.elements;F$s=(F$s=F$l<F$s?F$l:F$s)<F$g?F$g:F$s,F$Y=(F$Y=F$P<F$Y?F$P:F$Y)<F$n?F$n:F$Y,F$_=(F$_=F$j<F$_?F$j:F$_)<F$O?F$O:F$_,F$R=(F$R=F$$<F$R?F$$:F$R)<F$q?F$q:F$R,F$y[0]=F$s,F$y[1]=F$Y,F$y[2]=F$_,F$y[3]=F$R},F$e.distanceSquared=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0]-F$o[0],F$s=F$a[1]-F$o[1],F$Y=F$a[2]-F$o[2],F$_=F$a[3]-F$o[3];return F$E*F$E+F$s*F$s+F$Y*F$Y+F$_*F$_},F$e.distance=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements,F$E=F$a[0]-F$o[0],F$s=F$a[1]-F$o[1],F$Y=F$a[2]-F$o[2],F$_=F$a[3]-F$o[3];return Math.sqrt(F$E*F$E+F$s*F$s+F$Y*F$Y+F$_*F$_)},F$e.dot=function(F$e,F$F){var F$a=F$e.elements,F$o=F$F.elements;return F$a[0]*F$o[0]+F$a[1]*F$o[1]+F$a[2]*F$o[2]+F$a[3]*F$o[3]},F$e.min=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=Math.min(F$E[0],F$s[0]),F$o[1]=Math.min(F$E[1],F$s[1]),F$o[2]=Math.min(F$E[2],F$s[2]),F$o[3]=Math.min(F$E[3],F$s[3])},F$e.max=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F.elements;F$o[0]=Math.max(F$E[0],F$s[0]),F$o[1]=Math.max(F$E[1],F$s[1]),F$o[2]=Math.max(F$E[2],F$s[2]),F$o[3]=Math.max(F$E[3],F$s[3])},F$n(F$e,["ZERO",function(){return this.ZERO=new F$e},"ONE",function(){return this.ONE=new F$e(1,1,1,1)},"UnitX",function(){return this.UnitX=new F$e(1,0,0,0)},"UnitY",function(){return this.UnitY=new F$e(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new F$e(0,0,1,0)},"UnitW",function(){return this.UnitW=new F$e(0,0,0,1)}]),F$e}(),F$RF=function(){function F$s(F$e,F$F,F$a,F$o){this.minDepth=0,this.maxDepth=1,this.x=F$e,this.y=F$F,this.width=F$a,this.height=F$o}F$q(F$s,"laya.d3.math.Viewport");var F$e=F$s.prototype;return F$e.project=function(F$e,F$F,F$a){F$YF.transformV3ToV3(F$e,F$F,F$a);var F$o=F$e.elements,F$E=F$F.elements,F$s=F$a.elements,F$Y=F$o[0]*F$E[3]+F$o[1]*F$E[7]+F$o[2]*F$E[11]+F$E[15];1!==F$Y&&(F$s[0]=F$s[0]/F$Y,F$s[1]=F$s[1]/F$Y,F$s[2]=F$s[2]/F$Y),F$s[0]=.5*(F$s[0]+1)*this.width+this.x,F$s[1]=.5*(1-F$s[1])*this.height+this.y,F$s[2]=F$s[2]*(this.maxDepth-this.minDepth)+this.minDepth},F$e.unprojectFromMat=function(F$e,F$F,F$a){var F$o=F$e.elements,F$E=F$F.elements,F$s=F$a.elements;F$s[0]=(F$o[0]-this.x)/this.width*2-1,F$s[1]=-((F$o[1]-this.y)/this.height*2-1);var F$Y=(this.maxDepth-this.minDepth)/2;F$s[2]=(F$o[2]-this.minDepth-F$Y)/F$Y;var F$_=F$s[0]*F$E[3]+F$s[1]*F$E[7]+F$s[2]*F$E[11]+F$E[15];F$YF.transformV3ToV3(F$a,F$F,F$a),1!==F$_&&(F$s[0]=F$s[0]/F$_,F$s[1]=F$s[1]/F$_,F$s[2]=F$s[2]/F$_)},F$e.unprojectFromWVP=function(F$e,F$F,F$a,F$o,F$E){F$eF.multiply(F$F,F$a,F$s._tempMatrix4x4),F$o&&F$eF.multiply(F$s._tempMatrix4x4,F$o,F$s._tempMatrix4x4),F$s._tempMatrix4x4.invert(F$s._tempMatrix4x4),this.unprojectFromMat(F$e,F$s._tempMatrix4x4,F$E)},F$n(F$s,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$eF}]),F$s}(),F$HF=function(){function F$V(F$e){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=F$e,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}F$q(F$V,"laya.d3.resource.models.SubMesh");var F$e=F$V.prototype;return F$D.imps(F$e,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$e._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),0===F$e?this._vertexBuffer:null},F$e._getIndexBuffer=function(){return this._indexBuffer},F$e._getStaticBatchBakedVertexs=function(F$e,F$F){var F$a,F$o,F$E=this._vertexBuffer,F$s=F$E.vertexDeclaration,F$Y=F$s.getVertexElementByUsage(0).offset/4,F$_=F$s.getVertexElementByUsage(3).offset/4,F$R=F$F.meshRender.lightmapScaleOffset,F$H=0,F$g=0,F$n=0,F$O=0,F$q=0,F$I=0;if(F$R)if(F$o=F$s.getVertexElementByUsage(15))F$n=F$s.vertexStride/4,F$a=0<this._vertexCount?F$E.getData().slice(this._vertexStart*F$n,(this._vertexStart+this._vertexCount)*F$n):F$E.getData().slice(),F$O=F$o.offset/4;else{F$n=(F$I=F$s.vertexStride/4)+2,F$a=this._vertexCount?new Float32Array(this._vertexCount*(F$E.vertexDeclaration.vertexStride/4+2)):new Float32Array(F$E.vertexCount*(F$E.vertexDeclaration.vertexStride/4+2)),F$O=(F$q=F$s.getVertexElementByUsage(2).offset/4)+2;var F$l=F$E.getData();for(F$H=0,F$g=F$l.length/F$I;F$H<F$g;F$H++){var F$P=0;F$P=0<this._vertexCount?(this._vertexStart+F$H)*F$I:F$H*F$I;var F$j=F$H*F$n,F$$=0;for(F$$=0;F$$<F$O;F$$++)F$a[F$j+F$$]=F$l[F$P+F$$];for(F$$=F$O;F$$<F$I;F$$++)F$a[F$j+F$$+2]=F$l[F$P+F$$]}}else F$n=F$s.vertexStride/4,F$a=this._vertexCount?F$E.getData().slice(this._vertexStart*F$n,(this._vertexStart+this._vertexCount)*F$n):F$E.getData().slice();if(F$e){var F$y=F$e.worldMatrix,F$M=F$V._tempMatrix4x40;F$y.invert(F$M);var F$D=F$V._tempMatrix4x41,F$m=F$F.transform.worldMatrix;F$eF.multiply(F$M,F$m,F$D)}else F$D=F$F.transform.worldMatrix;var F$b=F$V._tempQuaternion0;for(F$D.decomposeTransRotScale(F$V._tempVector30,F$b,F$V._tempVector31),F$H=0,F$g=F$a.length/F$n;F$H<F$g;F$H++){var F$L=F$H*F$n+F$Y,F$B=F$H*F$n+F$_;if(F$PF.transformVector3ArrayToVector3ArrayCoordinate(F$a,F$L,F$D,F$a,F$L),F$PF.transformVector3ArrayByQuat(F$a,F$B,F$b,F$a,F$B),F$R){var F$v=F$H*F$n+F$O;if(F$o)F$PF.transformLightingMapTexcoordByUV1Array(F$a,F$v,F$R,F$a,F$v);else{var F$K=F$H*F$I+F$q;F$PF.transformLightingMapTexcoordByUV0Array(F$l,F$K,F$R,F$a,F$v)}}}return F$a},F$e._getVertexBuffers=function(){return null},F$e._beforeRender=function(F$e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$e._render=function(F$e){var F$F,F$a=0,F$o=F$e.renderElement;if(1<this._indexCount){var F$E=this._boneIndicesList.length;if(1<F$E){for(var F$s=0;F$s<F$E;F$s++)(F$F=F$o._skinAnimationDatas||this._skinAnimationDatas)&&(F$o._shaderValue.setValue(0,F$F[F$s]),F$e._shader.uploadRenderElementUniforms(F$o._shaderValue.data)),F$G.mainContext.drawElements(4,this._subIndexBufferCount[F$s],5123,2*this._subIndexBufferStart[F$s]);F$L.drawCall+=F$E}else(F$F=F$o._skinAnimationDatas||this._skinAnimationDatas)&&(F$o._shaderValue.setValue(0,F$F[0]),F$e._shader.uploadRenderElementUniforms(F$o._shaderValue.data)),F$G.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),F$L.drawCall++;F$a=this._indexCount}else F$a=this._indexBuffer.indexCount,(F$F=F$o._skinAnimationDatas||this._skinAnimationDatas)&&(F$o._shaderValue.setValue(0,F$F[0]),F$e._shader.uploadRenderElementUniforms(F$o._shaderValue.data)),F$G.mainContext.drawElements(4,F$a,5123,0),F$L.drawCall++;F$L.trianglesFaces+=F$a/3},F$e.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},F$e.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},F$I(0,F$e,"_vertexBufferCount",function(){return 1}),F$I(0,F$e,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$n(F$V,["_tempVector30",function(){return this._tempVector30=new F$YF},"_tempVector31",function(){return this._tempVector31=new F$YF},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$aF},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new F$eF},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new F$eF}]),F$V}(),F$gF=function(){function F$e(F$e){this.defineCounter=0,this.defines=null,F$e?(this.defineCounter=F$e.defineCounter,this.defines=F$e.defines.slice()):(this.defineCounter=0,this.defines=[])}return F$q(F$e,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),F$e.prototype.registerDefine=function(F$e){var F$F=Math.pow(2,this.defineCounter++);return this.defines[F$F]=F$e,F$F},F$e}(),F$nF=function(){function F$e(){}return F$q(F$e,"laya.d3.shader.ShaderInit3D"),F$e.__init__=function(){var F$e,F$F;F$LF._globalRegDefine("HIGHPRECISION",F$LF.SHADERDEFINE_HIGHPRECISION),F$LF._globalRegDefine("FOG",F$LF.SHADERDEFINE_FOG),F$LF._globalRegDefine("DIRECTIONLIGHT",F$LF.SHADERDEFINE_DIRECTIONLIGHT),F$LF._globalRegDefine("POINTLIGHT",F$LF.SHADERDEFINE_POINTLIGHT),F$LF._globalRegDefine("SPOTLIGHT",F$LF.SHADERDEFINE_SPOTLIGHT),F$LF._globalRegDefine("UV",F$LF.SHADERDEFINE_UV0),F$LF._globalRegDefine("COLOR",F$LF.SHADERDEFINE_COLOR),F$LF._globalRegDefine("UV1",F$LF.SHADERDEFINE_UV1),F$LF._globalRegDefine("CASTSHADOW",F$qF.SHADERDEFINE_CAST_SHADOW),F$LF._globalRegDefine("SHADOWMAP_PSSM1",F$qF.SHADERDEFINE_SHADOW_PSSM1),F$LF._globalRegDefine("SHADOWMAP_PSSM2",F$qF.SHADERDEFINE_SHADOW_PSSM2),F$LF._globalRegDefine("SHADOWMAP_PSSM3",F$qF.SHADERDEFINE_SHADOW_PSSM3),F$LF._globalRegDefine("SHADOWMAP_PCF_NO",F$qF.SHADERDEFINE_SHADOW_PCF_NO),F$LF._globalRegDefine("SHADOWMAP_PCF1",F$qF.SHADERDEFINE_SHADOW_PCF1),F$LF._globalRegDefine("SHADOWMAP_PCF2",F$qF.SHADERDEFINE_SHADOW_PCF2),F$LF._globalRegDefine("SHADOWMAP_PCF3",F$qF.SHADERDEFINE_SHADOW_PCF3),F$LF._globalRegDefine("DEPTHFOG",F$LF.SAHDERDEFINE_DEPTHFOG),F$TF.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),F$TF.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),F$e={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},F$F={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var F$a=F$TF.nameKey.add("SIMPLE");shaderCompile=F$LF.add(F$a,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',F$e,F$F),F$pF.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),F$pF.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),F$pF.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),F$pF.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),F$pF.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),F$pF.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),F$pF.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),F$pF.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),F$pF.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},F$e}(),F$OF=function(){function F$e(){this._data=null,this._data=[]}F$q(F$e,"laya.d3.shader.ValusArray");var F$F=F$e.prototype;return F$F.setValue=function(F$e,F$F){this._data[F$e]=F$F},F$I(0,F$F,"data",function(){return this._data}),F$e}(),F$qF=function(){function F$e(){}return F$e.SHADERDEFINE_RECEIVE_SHADOW=1,F$e.SHADERDEFINE_CAST_SHADOW=512,F$e.SHADERDEFINE_SHADOW_PSSM1=1024,F$e.SHADERDEFINE_SHADOW_PSSM2=2048,F$e.SHADERDEFINE_SHADOW_PSSM3=4096,F$e.SHADERDEFINE_SHADOW_PCF_NO=8192,F$e.SHADERDEFINE_SHADOW_PCF1=16384,F$e.SHADERDEFINE_SHADOW_PCF2=32768,F$e.SHADERDEFINE_SHADOW_PCF3=65536,F$e.MAX_PSSM_COUNT=3,F$e}(),F$IF=function(){function F$W(){}return F$q(F$W,"laya.d3.utils.Picker"),F$W.calculateCursorRay=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$e.elements[0],F$_=F$e.elements[1],F$R=F$W._tempVector30,F$H=F$R.elements;F$H[0]=F$Y,F$H[1]=F$_,F$H[2]=F$F.minDepth;var F$g=F$W._tempVector31,F$n=F$g.elements;F$n[0]=F$Y,F$n[1]=F$_,F$n[2]=F$F.maxDepth;var F$O=F$s.origin,F$q=F$W._tempVector32;F$F.unprojectFromWVP(F$R,F$a,F$o,F$E,F$O),F$F.unprojectFromWVP(F$g,F$a,F$o,F$E,F$q);var F$I=F$s.direction.elements;F$I[0]=F$q.x-F$O.x,F$I[1]=F$q.y-F$O.y,F$I[2]=F$q.z-F$O.z,F$YF.normalize(F$s.direction,F$s.direction)},F$W.rayIntersectsPositionsAndIndices=function(F$e,F$F,F$a,F$o,F$E){for(var F$s=F$a.vertexStride/4,F$Y=F$a.getVertexElementByUsage(0).offset/4,F$_=Number.MAX_VALUE,F$R=-1,F$H=-1,F$g=-1,F$n=0;F$n<F$o.length;F$n+=3){var F$O=F$W._tempVector35,F$q=F$O.elements,F$I=F$o[F$n]*F$s,F$l=F$I+F$Y;F$q[0]=F$F[F$l],F$q[1]=F$F[1+F$l],F$q[2]=F$F[2+F$l];var F$P=F$W._tempVector36,F$j=F$P.elements,F$$=F$o[F$n+1]*F$s,F$y=F$$+F$Y;F$j[0]=F$F[F$y],F$j[1]=F$F[1+F$y],F$j[2]=F$F[2+F$y];var F$M=F$W._tempVector37,F$D=F$M.elements,F$m=F$o[F$n+2]*F$s,F$b=F$m+F$Y;F$D[0]=F$F[F$b],F$D[1]=F$F[1+F$b],F$D[2]=F$F[2+F$b];var F$L=laya.d3.utils.Picker.rayIntersectsTriangle(F$e,F$O,F$P,F$M);!isNaN(F$L)&&F$L<F$_&&(F$_=F$L,F$R=F$I,F$H=F$$,F$g=F$m)}if(F$_===Number.MAX_VALUE)return F$E.position.toDefault(),F$E.distance=Number.MAX_VALUE,F$E.trianglePositions[0].toDefault(),F$E.trianglePositions[1].toDefault(),F$E.trianglePositions[2].toDefault(),F$E.triangleNormals[0].toDefault(),F$E.triangleNormals[1].toDefault(),F$E.triangleNormals[2].toDefault(),!1;F$E.distance=F$_,F$YF.scale(F$e.direction,F$_,F$E.position),F$YF.add(F$e.origin,F$E.position,F$E.position);var F$B=F$E.trianglePositions,F$v=F$B[0],F$K=F$B[1],F$V=F$B[2],F$G=F$v.elements,F$A=F$K.elements,F$U=F$V.elements,F$r=F$R+F$Y;F$G[0]=F$F[F$r],F$G[1]=F$F[F$r+1],F$G[2]=F$F[F$r+2];var F$Z=F$H+F$Y;F$A[0]=F$F[F$Z],F$A[1]=F$F[F$Z+1],F$A[2]=F$F[F$Z+2];var F$z=F$g+F$Y;F$U[0]=F$F[F$z],F$U[1]=F$F[F$z+1],F$U[2]=F$F[F$z+2];var F$T=F$a.getVertexElementByUsage(3);if(F$T){var F$p=F$T.offset/4,F$J=F$E.triangleNormals,F$k=F$J[0],F$d=F$J[1],F$w=F$J[2],F$S=F$k.elements,F$C=F$d.elements,F$u=F$w.elements,F$x=F$R+F$p;F$S[0]=F$F[F$x],F$S[1]=F$F[F$x+1],F$S[2]=F$F[F$x+2];var F$N=F$H+F$p;F$C[0]=F$F[F$N],F$C[1]=F$F[F$N+1],F$C[2]=F$F[F$N+2];var F$X=F$g+F$p;F$u[0]=F$F[F$X],F$u[1]=F$F[F$X+1],F$u[2]=F$F[F$X+2]}return!0},F$W.rayIntersectsTriangle=function(F$e,F$F,F$a,F$o){var F$E=F$W._tempVector30,F$s=F$W._tempVector31;F$YF.subtract(F$a,F$F,F$E),F$YF.subtract(F$o,F$F,F$s);var F$Y,F$_=F$W._tempVector32;if(F$YF.cross(F$e.direction,F$s,F$_),(F$Y=F$YF.dot(F$E,F$_))>-Number.MIN_VALUE&&F$Y<Number.MIN_VALUE)return Number.NaN;var F$R,F$H=1/F$Y,F$g=F$W._tempVector33;if(F$YF.subtract(F$e.origin,F$F,F$g),F$R=F$YF.dot(F$g,F$_),(F$R*=F$H)<0||1<F$R)return Number.NaN;var F$n,F$O,F$q=F$W._tempVector34;return F$YF.cross(F$g,F$E,F$q),F$n=F$YF.dot(F$e.direction,F$q),(F$n*=F$H)<0||1<F$R+F$n?Number.NaN:(F$O=F$YF.dot(F$s,F$q),(F$O*=F$H)<0?Number.NaN:F$O)},F$n(F$W,["_tempVector30",function(){return this._tempVector30=new F$YF},"_tempVector31",function(){return this._tempVector31=new F$YF},"_tempVector32",function(){return this._tempVector32=new F$YF},"_tempVector33",function(){return this._tempVector33=new F$YF},"_tempVector34",function(){return this._tempVector34=new F$YF},"_tempVector35",function(){return this._tempVector35=new F$YF},"_tempVector36",function(){return this._tempVector36=new F$YF},"_tempVector37",function(){return this._tempVector37=new F$YF}]),F$W}(),F$lF=(function(){function F$e(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new F$YF,new F$YF,new F$YF],this.trianglePositions.length=3,this.triangleNormals=[new F$YF,new F$YF,new F$YF],this.triangleNormals.length=3,this.position=new F$YF}F$q(F$e,"laya.d3.utils.RaycastHit"),F$e.prototype.cloneTo=function(F$e){F$e.distance=this.distance,this.trianglePositions[0].cloneTo(F$e.trianglePositions[0]),this.trianglePositions[1].cloneTo(F$e.trianglePositions[1]),this.trianglePositions[2].cloneTo(F$e.trianglePositions[2]),this.triangleNormals[0].cloneTo(F$e.triangleNormals[0]),this.triangleNormals[1].cloneTo(F$e.triangleNormals[1]),this.triangleNormals[2].cloneTo(F$e.triangleNormals[2]),this.position.cloneTo(F$e.position),F$e.sprite3D=this.sprite3D}}(),function(){function F$e(F$e,F$F){this._width=0,this._height=0,this._width=F$e,this._height=F$F}F$q(F$e,"laya.d3.utils.Size");var F$F=F$e.prototype;return F$I(0,F$F,"width",function(){return-1===this._width?F$f.clientWidth:this._width}),F$I(0,F$F,"height",function(){return-1===this._height?F$f.clientHeight:this._height}),F$I(1,F$e,"fullScreen",function(){return new F$e(-1,-1)}),F$e}()),F$PF=function(){function F$r(){}return F$q(F$r,"laya.d3.utils.Utils3D"),F$r._rotationTransformScaleSkinAnimation=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n){var F$O,F$q,F$I,F$l,F$P,F$j=F$r._tempArray16_0,F$$=F$r._tempArray16_1,F$y=F$r._tempArray16_2,F$M=F$o+F$o,F$D=F$E+F$E,F$m=F$s+F$s,F$b=F$o*F$M,F$L=F$E*F$M,F$B=F$E*F$D,F$v=F$s*F$M,F$K=F$s*F$D,F$V=F$s*F$m,F$G=F$Y*F$M,F$A=F$Y*F$D,F$U=F$Y*F$m;for(F$j[15]=1,F$j[0]=1-F$B-F$V,F$j[1]=F$L+F$U,F$j[2]=F$v-F$A,F$j[4]=F$L-F$U,F$j[5]=1-F$b-F$V,F$j[6]=F$K+F$G,F$j[8]=F$v+F$A,F$j[9]=F$K-F$G,F$j[10]=1-F$b-F$B,F$$[15]=1,F$$[0]=F$_,F$$[5]=F$R,F$$[10]=F$H,F$O=0;F$O<4;F$O++)F$q=F$j[F$O],F$I=F$j[F$O+4],F$l=F$j[F$O+8],F$P=F$j[F$O+12],F$y[F$O]=F$q,F$y[F$O+4]=F$I,F$y[F$O+8]=F$l,F$y[F$O+12]=F$q*F$e+F$I*F$F+F$l*F$a+F$P;for(F$O=0;F$O<4;F$O++)F$q=F$y[F$O],F$I=F$y[F$O+4],F$l=F$y[F$O+8],F$P=F$y[F$O+12],F$g[F$O+F$n]=F$q*F$$[0]+F$I*F$$[1]+F$l*F$$[2]+F$P*F$$[3],F$g[F$O+F$n+4]=F$q*F$$[4]+F$I*F$$[5]+F$l*F$$[6]+F$P*F$$[7],F$g[F$O+F$n+8]=F$q*F$$[8]+F$I*F$$[9]+F$l*F$$[10]+F$P*F$$[11],F$g[F$O+F$n+12]=F$q*F$$[12]+F$I*F$$[13]+F$l*F$$[14]+F$P*F$$[15]},F$r._createNodeByJson=function(F$e,F$F,F$a,F$o){if(!F$a)switch(F$F.type){case"Sprite3D":F$a=new F$zF;break;case"MeshSprite3D":F$a=new F$WF;break;case"SkinnedMeshSprite3D":F$a=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":F$a=new ShuriKenParticle3D;break;case"TrailSprite3D":F$a=new TrailSprite3D;break;case"Terrain":F$a=new Terrain;break;case"Camera":F$a=new F$XF;break;case"DirectionLight":F$a=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var F$E=F$F.props;if(F$E)for(var F$s in F$E)F$a[F$s]=F$E[F$s];var F$Y=F$F.customProps;F$Y&&(F$a instanceof laya.d3.core.Sprite3D?(F$a._parseBaseCustomProps(F$Y),F$a._parseCustomProps(F$e,F$o,F$Y,F$F),F$a._parseCustomComponent(F$e,F$o,F$F.components)):F$a._parseCustomProps(F$e,F$o,F$Y,F$F));var F$_=F$F.child;if(F$_)for(var F$R=0,F$H=F$_.length;F$R<F$H;F$R++){var F$g=F$r._createNodeByJson(F$e,F$_[F$R],null,F$o);F$a.addChild(F$g)}return F$a},F$r._computeBoneAndAnimationDatasByBindPoseMatrxix=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_,F$R=0,F$H=0,F$g=F$e.length;for(F$Y=0;F$Y<F$g;F$R+=F$e[F$Y].keyframeWidth,F$H+=16,F$Y++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$F[F$R+0],F$F[F$R+1],F$F[F$R+2],F$F[F$R+3],F$F[F$R+4],F$F[F$R+5],F$F[F$R+6],F$F[F$R+7],F$F[F$R+8],F$F[F$R+9],F$o,F$H),0!=F$Y&&(F$_=16*F$e[F$Y].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$o,F$_,F$o,F$H,F$o,F$H));var F$n=F$a.length;for(F$Y=0;F$Y<F$n;F$Y++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$o,16*F$s[F$Y],F$a[F$Y],F$E,16*F$Y)},F$r._computeAnimationDatasByArrayAndMatrixFast=function(F$e,F$F,F$a,F$o){for(var F$E=0,F$s=F$e.length;F$E<F$s;F$E++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$F,16*F$o[F$E],F$e[F$E],F$a,16*F$E)},F$r._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y,F$_=0,F$R=0,F$H=F$e.length;for(F$s=0;F$s<F$H;F$_+=F$e[F$s].keyframeWidth,F$R+=16,F$s++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$F[F$_+7],F$F[F$_+8],F$F[F$_+9],F$F[F$_+3],F$F[F$_+4],F$F[F$_+5],F$F[F$_+6],F$F[F$_+0],F$F[F$_+1],F$F[F$_+2],F$o,F$R),0!=F$s&&(F$Y=16*F$e[F$s].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$o,F$Y,F$o,F$R,F$o,F$R));var F$g=F$a.length;for(F$s=0;F$s<F$g;F$s++){var F$n=16*F$s;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$o,F$n,F$a[F$s],F$E,F$n)}},F$r._computeAnimationDatasByArrayAndMatrixFastOld=function(F$e,F$F,F$a){for(var F$o=F$e.length,F$E=0;F$E<F$o;F$E++){var F$s=16*F$E;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$F,F$s,F$e[F$E],F$a,F$s)}},F$r._computeRootAnimationData=function(F$e,F$F,F$a){for(var F$o=0,F$E=0,F$s=0,F$Y=F$e.length;F$o<F$Y;F$E+=F$e[F$o].keyframeWidth,F$s+=16,F$o++)laya.d3.utils.Utils3D.createAffineTransformationArray(F$F[F$E+0],F$F[F$E+1],F$F[F$E+2],F$F[F$E+3],F$F[F$E+4],F$F[F$E+5],F$F[F$E+6],F$F[F$E+7],F$F[F$E+8],F$F[F$E+9],F$a,F$s)},F$r.transformVector3ArrayByQuat=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$a.elements,F$Y=F$e[F$F],F$_=F$e[F$F+1],F$R=F$e[F$F+2],F$H=F$s[0],F$g=F$s[1],F$n=F$s[2],F$O=F$s[3],F$q=F$O*F$Y+F$g*F$R-F$n*F$_,F$I=F$O*F$_+F$n*F$Y-F$H*F$R,F$l=F$O*F$R+F$H*F$_-F$g*F$Y,F$P=-F$H*F$Y-F$g*F$_-F$n*F$R;F$o[F$E]=F$q*F$O+F$P*-F$H+F$I*-F$n-F$l*-F$g,F$o[F$E+1]=F$I*F$O+F$P*-F$g+F$l*-F$H-F$q*-F$n,F$o[F$E+2]=F$l*F$O+F$P*-F$n+F$q*-F$g-F$I*-F$H},F$r.mulMatrixByArray=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_,F$R,F$H,F$g;if(F$E===F$a){for(F$a=F$r._tempArray16_3,F$Y=0;F$Y<16;++F$Y)F$a[F$Y]=F$E[F$s+F$Y];F$o=0}for(F$Y=0;F$Y<4;F$Y++)F$_=F$e[F$F+F$Y],F$R=F$e[F$F+F$Y+4],F$H=F$e[F$F+F$Y+8],F$g=F$e[F$F+F$Y+12],F$E[F$s+F$Y]=F$_*F$a[F$o+0]+F$R*F$a[F$o+1]+F$H*F$a[F$o+2]+F$g*F$a[F$o+3],F$E[F$s+F$Y+4]=F$_*F$a[F$o+4]+F$R*F$a[F$o+5]+F$H*F$a[F$o+6]+F$g*F$a[F$o+7],F$E[F$s+F$Y+8]=F$_*F$a[F$o+8]+F$R*F$a[F$o+9]+F$H*F$a[F$o+10]+F$g*F$a[F$o+11],F$E[F$s+F$Y+12]=F$_*F$a[F$o+12]+F$R*F$a[F$o+13]+F$H*F$a[F$o+14]+F$g*F$a[F$o+15]},F$r.mulMatrixByArrayFast=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_,F$R,F$H,F$g;for(F$Y=0;F$Y<4;F$Y++)F$_=F$e[F$F+F$Y],F$R=F$e[F$F+F$Y+4],F$H=F$e[F$F+F$Y+8],F$g=F$e[F$F+F$Y+12],F$E[F$s+F$Y]=F$_*F$a[F$o+0]+F$R*F$a[F$o+1]+F$H*F$a[F$o+2]+F$g*F$a[F$o+3],F$E[F$s+F$Y+4]=F$_*F$a[F$o+4]+F$R*F$a[F$o+5]+F$H*F$a[F$o+6]+F$g*F$a[F$o+7],F$E[F$s+F$Y+8]=F$_*F$a[F$o+8]+F$R*F$a[F$o+9]+F$H*F$a[F$o+10]+F$g*F$a[F$o+11],F$E[F$s+F$Y+12]=F$_*F$a[F$o+12]+F$R*F$a[F$o+13]+F$H*F$a[F$o+14]+F$g*F$a[F$o+15]},F$r.mulMatrixByArrayAndMatrixFast=function(F$e,F$F,F$a,F$o,F$E){var F$s,F$Y,F$_,F$R,F$H,F$g=F$a.elements,F$n=F$g[0],F$O=F$g[1],F$q=F$g[2],F$I=F$g[3],F$l=F$g[4],F$P=F$g[5],F$j=F$g[6],F$$=F$g[7],F$y=F$g[8],F$M=F$g[9],F$D=F$g[10],F$m=F$g[11],F$b=F$g[12],F$L=F$g[13],F$B=F$g[14],F$v=F$g[15],F$K=F$F,F$V=F$F+4,F$G=F$F+8,F$A=F$F+12,F$U=F$E,F$r=F$E+4,F$Z=F$E+8,F$z=F$E+12;for(F$s=0;F$s<4;F$s++)F$Y=F$e[F$K+F$s],F$_=F$e[F$V+F$s],F$R=F$e[F$G+F$s],F$H=F$e[F$A+F$s],F$o[F$U+F$s]=F$Y*F$n+F$_*F$O+F$R*F$q+F$H*F$I,F$o[F$r+F$s]=F$Y*F$l+F$_*F$P+F$R*F$j+F$H*F$$,F$o[F$Z+F$s]=F$Y*F$y+F$_*F$M+F$R*F$D+F$H*F$m,F$o[F$z+F$s]=F$Y*F$b+F$_*F$L+F$R*F$B+F$H*F$v},F$r.createAffineTransformationArray=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n){var F$O=F$o+F$o,F$q=F$E+F$E,F$I=F$s+F$s,F$l=F$o*F$O,F$P=F$o*F$q,F$j=F$o*F$I,F$$=F$E*F$q,F$y=F$E*F$I,F$M=F$s*F$I,F$D=F$Y*F$O,F$m=F$Y*F$q,F$b=F$Y*F$I;F$g[F$n+0]=(1-(F$$+F$M))*F$_,F$g[F$n+1]=(F$P+F$b)*F$_,F$g[F$n+2]=(F$j-F$m)*F$_,F$g[F$n+3]=0,F$g[F$n+4]=(F$P-F$b)*F$R,F$g[F$n+5]=(1-(F$l+F$M))*F$R,F$g[F$n+6]=(F$y+F$D)*F$R,F$g[F$n+7]=0,F$g[F$n+8]=(F$j+F$m)*F$H,F$g[F$n+9]=(F$y-F$D)*F$H,F$g[F$n+10]=(1-(F$l+F$$))*F$H,F$g[F$n+11]=0,F$g[F$n+12]=F$e,F$g[F$n+13]=F$F,F$g[F$n+14]=F$a,F$g[F$n+15]=1},F$r.transformVector3ArrayToVector3ArrayCoordinate=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$r._tempArray4_0,F$Y=F$e[F$F+0],F$_=F$e[F$F+1],F$R=F$e[F$F+2],F$H=F$a.elements;F$s[0]=F$Y*F$H[0]+F$_*F$H[4]+F$R*F$H[8]+F$H[12],F$s[1]=F$Y*F$H[1]+F$_*F$H[5]+F$R*F$H[9]+F$H[13],F$s[2]=F$Y*F$H[2]+F$_*F$H[6]+F$R*F$H[10]+F$H[14],F$s[3]=1/(F$Y*F$H[3]+F$_*F$H[7]+F$R*F$H[11]+F$H[15]),F$o[F$E+0]=F$s[0]*F$s[3],F$o[F$E+1]=F$s[1]*F$s[3],F$o[F$E+2]=F$s[2]*F$s[3]},F$r.transformLightingMapTexcoordByUV0Array=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$a.elements;F$o[F$E+0]=F$e[F$F+0]*F$s[0]+F$s[2],F$o[F$E+1]=(F$e[F$F+1]-1)*F$s[1]+F$s[3]},F$r.transformLightingMapTexcoordByUV1Array=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$a.elements;F$o[F$E+0]=F$e[F$F+0]*F$s[0]+F$s[2],F$o[F$E+1]=1+F$e[F$F+1]*F$s[1]+F$s[3]},F$r.getURLVerion=function(F$e){var F$F=F$e.indexOf("?");return 0<=F$F?F$e.substr(F$F):null},F$r._quaternionCreateFromYawPitchRollArray=function(F$e,F$F,F$a,F$o){var F$E=.5*F$a,F$s=.5*F$F,F$Y=.5*F$e,F$_=Math.sin(F$E),F$R=Math.cos(F$E),F$H=Math.sin(F$s),F$g=Math.cos(F$s),F$n=Math.sin(F$Y),F$O=Math.cos(F$Y);F$o[0]=F$O*F$H*F$R+F$n*F$g*F$_,F$o[1]=F$n*F$g*F$R-F$O*F$H*F$_,F$o[2]=F$O*F$g*F$_-F$n*F$H*F$R,F$o[3]=F$O*F$g*F$R+F$n*F$H*F$_},F$r._createAffineTransformationArray=function(F$e,F$F,F$a,F$o){var F$E=F$F[0],F$s=F$F[1],F$Y=F$F[2],F$_=F$F[3],F$R=F$E+F$E,F$H=F$s+F$s,F$g=F$Y+F$Y,F$n=F$E*F$R,F$O=F$E*F$H,F$q=F$E*F$g,F$I=F$s*F$H,F$l=F$s*F$g,F$P=F$Y*F$g,F$j=F$_*F$R,F$$=F$_*F$H,F$y=F$_*F$g,F$M=F$a[0],F$D=F$a[1],F$m=F$a[2];F$o[0]=(1-(F$I+F$P))*F$M,F$o[1]=(F$O+F$y)*F$M,F$o[2]=(F$q-F$$)*F$M,F$o[3]=0,F$o[4]=(F$O-F$y)*F$D,F$o[5]=(1-(F$n+F$P))*F$D,F$o[6]=(F$l+F$j)*F$D,F$o[7]=0,F$o[8]=(F$q+F$$)*F$m,F$o[9]=(F$l-F$j)*F$m,F$o[10]=(1-(F$n+F$I))*F$m,F$o[11]=0,F$o[12]=F$e[0],F$o[13]=F$e[1],F$o[14]=F$e[2],F$o[15]=1},F$r._mulMatrixArray=function(F$e,F$F,F$a,F$o){var F$E,F$s,F$Y,F$_,F$R,F$H=F$F.elements,F$g=F$H[0],F$n=F$H[1],F$O=F$H[2],F$q=F$H[3],F$I=F$H[4],F$l=F$H[5],F$P=F$H[6],F$j=F$H[7],F$$=F$H[8],F$y=F$H[9],F$M=F$H[10],F$D=F$H[11],F$m=F$H[12],F$b=F$H[13],F$L=F$H[14],F$B=F$H[15],F$v=F$o,F$K=F$o+4,F$V=F$o+8,F$G=F$o+12;for(F$E=0;F$E<4;F$E++)F$s=F$e[F$E],F$Y=F$e[F$E+4],F$_=F$e[F$E+8],F$R=F$e[F$E+12],F$a[F$v+F$E]=F$s*F$g+F$Y*F$n+F$_*F$O+F$R*F$q,F$a[F$K+F$E]=F$s*F$I+F$Y*F$l+F$_*F$P+F$R*F$j,F$a[F$V+F$E]=F$s*F$$+F$Y*F$y+F$_*F$M+F$R*F$D,F$a[F$G+F$E]=F$s*F$m+F$Y*F$b+F$_*F$L+F$R*F$B},F$r.getYawPitchRoll=function(F$e,F$F){F$r.transformQuat(F$YF.ForwardRH,F$e,F$aF.TEMPVector31),F$r.transformQuat(F$YF.Up,F$e,F$aF.TEMPVector32);var F$a=F$aF.TEMPVector32.elements;F$r.angleTo(F$YF.ZERO,F$aF.TEMPVector31,F$aF.TEMPVector33);var F$o=F$aF.TEMPVector33.elements;F$o[0]==Math.PI/2?(F$o[1]=F$r.arcTanAngle(F$a[2],F$a[0]),F$o[2]=0):F$o[0]==-Math.PI/2?(F$o[1]=F$r.arcTanAngle(-F$a[2],-F$a[0]),F$o[2]=0):(F$eF.createRotationY(-F$o[1],F$aF.TEMPMatrix0),F$eF.createRotationX(-F$o[0],F$aF.TEMPMatrix1),F$YF.transformCoordinate(F$aF.TEMPVector32,F$aF.TEMPMatrix0,F$aF.TEMPVector32),F$YF.transformCoordinate(F$aF.TEMPVector32,F$aF.TEMPMatrix1,F$aF.TEMPVector32),F$o[2]=F$r.arcTanAngle(F$a[1],-F$a[0])),F$o[1]<=-Math.PI&&(F$o[1]=Math.PI),F$o[2]<=-Math.PI&&(F$o[2]=Math.PI),F$o[1]>=Math.PI&&F$o[2]>=Math.PI&&(F$o[1]=0,F$o[2]=0,F$o[0]=Math.PI-F$o[0]),F$F[0]=F$o[1],F$F[1]=F$o[0],F$F[2]=F$o[2]},F$r.arcTanAngle=function(F$e,F$F){return 0==F$e?1==F$F?Math.PI/2:-Math.PI/2:0<F$e?Math.atan(F$F/F$e):F$e<0?0<F$F?Math.atan(F$F/F$e)+Math.PI:Math.atan(F$F/F$e)-Math.PI:0},F$r.angleTo=function(F$e,F$F,F$a){F$YF.subtract(F$F,F$e,F$aF.TEMPVector30),F$YF.normalize(F$aF.TEMPVector30,F$aF.TEMPVector30),F$a.elements[0]=Math.asin(F$aF.TEMPVector30.y),F$a.elements[1]=F$r.arcTanAngle(-F$aF.TEMPVector30.z,-F$aF.TEMPVector30.x)},F$r.transformQuat=function(F$e,F$F,F$a){var F$o=F$a.elements,F$E=F$e.elements,F$s=F$F,F$Y=F$E[0],F$_=F$E[1],F$R=F$E[2],F$H=F$s[0],F$g=F$s[1],F$n=F$s[2],F$O=F$s[3],F$q=F$O*F$Y+F$g*F$R-F$n*F$_,F$I=F$O*F$_+F$n*F$Y-F$H*F$R,F$l=F$O*F$R+F$H*F$_-F$g*F$Y,F$P=-F$H*F$Y-F$g*F$_-F$n*F$R;F$o[0]=F$q*F$O+F$P*-F$H+F$I*-F$n-F$l*-F$g,F$o[1]=F$I*F$O+F$P*-F$g+F$l*-F$H-F$q*-F$n,F$o[2]=F$l*F$O+F$P*-F$n+F$q*-F$g-F$I*-F$H},F$r.quaterionNormalize=function(F$e,F$F){var F$a=F$e[0],F$o=F$e[1],F$E=F$e[2],F$s=F$e[3],F$Y=F$a*F$a+F$o*F$o+F$E*F$E+F$s*F$s;0<F$Y&&(F$Y=1/Math.sqrt(F$Y),F$F[0]=F$a*F$Y,F$F[1]=F$o*F$Y,F$F[2]=F$E*F$Y,F$F[3]=F$s*F$Y)},F$r.matrix4x4MultiplyFFF=function(F$e,F$F,F$a){var F$o,F$E,F$s,F$Y,F$_;if(F$a===F$F)for(F$F=new Float32Array(16),F$o=0;F$o<16;++F$o)F$F[F$o]=F$a[F$o];for(F$o=0;F$o<4;F$o++)F$E=F$e[F$o],F$s=F$e[F$o+4],F$Y=F$e[F$o+8],F$_=F$e[F$o+12],F$a[F$o]=F$E*F$F[0]+F$s*F$F[1]+F$Y*F$F[2]+F$_*F$F[3],F$a[F$o+4]=F$E*F$F[4]+F$s*F$F[5]+F$Y*F$F[6]+F$_*F$F[7],F$a[F$o+8]=F$E*F$F[8]+F$s*F$F[9]+F$Y*F$F[10]+F$_*F$F[11],F$a[F$o+12]=F$E*F$F[12]+F$s*F$F[13]+F$Y*F$F[14]+F$_*F$F[15]},F$r.matrix4x4MultiplyMFM=function(F$e,F$F,F$a){F$r.matrix4x4MultiplyFFF(F$e.elements,F$F,F$a.elements)},F$n(F$r,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new F$YF},"_tempVector3_1",function(){return this._tempVector3_1=new F$YF},"_tempVector3_2",function(){return this._tempVector3_2=new F$YF},"_tempVector3_3",function(){return this._tempVector3_3=new F$YF},"_tempVector3_4",function(){return this._tempVector3_4=new F$YF},"_tempVector3_5",function(){return this._tempVector3_5=new F$YF},"_tempVector3_6",function(){return this._tempVector3_6=new F$YF},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),F$r}(),F$jF=function(){function F$A(){}return F$q(F$A,"Laya3D"),F$A._cancelLoadByUrl=function(F$e){F$D.loader.cancelLoadByUrl(F$e),F$A._innerFirstLevelLoaderManager.cancelLoadByUrl(F$e),F$A._innerSecondLevelLoaderManager.cancelLoadByUrl(F$e),F$A._innerThirdLevelLoaderManager.cancelLoadByUrl(F$e),F$A._innerFourthLevelLoaderManager.cancelLoadByUrl(F$e)},F$A._changeWebGLSize=function(F$e,F$F){F$G.onStageResize(F$e,F$F),F$f.clientWidth=F$e,F$f.clientHeight=F$F},F$A.__init__=function(){var F$e=F$F.createMap;F$e.lh=[F$zF,"SPRITE3DHIERARCHY"],F$e.ls=[F$ZF,"SPRITE3DHIERARCHY"],F$e.lm=[F$SF,"MESH"],F$e.lmat=[F$pF,"MATERIAL"],F$e.jpg=[F$uF,"nativeimage"],F$e.jpeg=[F$uF,"nativeimage"],F$e.png=[F$uF,"nativeimage"],F$e.pkm=[F$uF,"arraybuffer"],F$e.raw=[F$dF,"arraybuffer"],F$e.mipmaps=[F$dF,"arraybuffer"],F$j.parserMap.SPRITE3DHIERARCHY=F$A._loadHierarchy,F$j.parserMap.MESH=F$A._loadMesh,F$j.parserMap.MATERIAL=F$A._loadMaterial,F$j.parserMap.TEXTURECUBE=F$A._loadTextureCube,F$j.parserMap.TERRAIN=F$A._loadTerrain,F$A._innerFirstLevelLoaderManager.on("error",null,F$A._eventLoadManagerError),F$A._innerSecondLevelLoaderManager.on("error",null,F$A._eventLoadManagerError),F$A._innerThirdLevelLoaderManager.on("error",null,F$A._eventLoadManagerError),F$A._innerFourthLevelLoaderManager.on("error",null,F$A._eventLoadManagerError)},F$A.READ_BLOCK=function(){return F$A._readData.pos+=4,!0},F$A.READ_DATA=function(){return F$A._DATA.offset=F$A._readData.getUint32(),F$A._DATA.size=F$A._readData.getUint32(),!0},F$A.READ_STRINGS=function(){var F$e=[],F$F={offset:0,size:0};F$F.offset=F$A._readData.getUint16(),F$F.size=F$A._readData.getUint16();F$A._readData.pos;F$A._readData.pos=F$F.offset+F$A._DATA.offset;for(var F$a=0;F$a<F$F.size;F$a++){var F$o=F$A._readData.readUTFString();-1===F$o.lastIndexOf(".lmat")&&-1===F$o.lastIndexOf(".lpbr")||F$e.push(F$o)}return F$e},F$A.formatRelativePath=function(F$e,F$F){var F$a;if("."===F$F.charAt(0)){for(var F$o=(F$e+F$F).split("/"),F$E=0,F$s=F$o.length;F$E<F$s;F$E++)if(".."==F$o[F$E]){var F$Y=F$E-1;0<F$Y&&".."!==F$o[F$Y]&&(F$o.splice(F$Y,2),F$E-=2)}F$a=F$o.join("/")}else F$a=F$e+F$F;return null!=F$V.customFormat&&(F$a=F$V.customFormat(F$a,null)),F$a},F$A._eventLoadManagerError=function(F$e){F$D.loader.event("error",F$e)},F$A._addHierarchyInnerUrls=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y=F$A.formatRelativePath(F$o,F$E);F$a&&(F$Y+=F$a),F$e.push({url:F$Y,clas:F$s}),F$F[F$E]=F$Y},F$A._getSprite3DHierarchyInnerUrls=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){var F$_,F$R=0,F$H=0;switch(F$e.type){case"Scene":var F$g=F$e.customProps.lightmaps;for(F$R=0,F$H=F$g.length;F$R<F$H;F$R++){var F$n=F$g[F$R].replace(".exr",".png");F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$n,F$uF)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var F$O;if(F$e.instanceParams)(F$O=F$e.instanceParams.loadPath)&&F$A._addHierarchyInnerUrls(F$F,F$E,F$s,F$Y,F$O,F$SF);else{(F$O=(F$_=F$e.customProps).meshPath)&&F$A._addHierarchyInnerUrls(F$F,F$E,F$s,F$Y,F$O,F$SF);var F$q=F$_.materials;if(F$q)for(F$R=0,F$H=F$q.length;F$R<F$H;F$R++){for(var F$I=F$q[F$R],F$l=F$I.type.split("."),F$P=F$U.window,F$j=0,F$$=F$l.length;F$j<F$$;++F$j){F$P=F$P[this.clasPaths[F$j]]}if("function"!=typeof F$P)throw"_getSprite3DHierarchyInnerUrls 错误: "+F$I.type+" 不是类";F$A._addHierarchyInnerUrls(F$a,F$E,F$s,F$Y,F$I.path,F$P)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var F$y=(F$_=F$e.customProps).meshPath;F$y&&F$A._addHierarchyInnerUrls(F$F,F$E,F$s,F$Y,F$y,F$SF);var F$M=F$_.material;if(F$M){F$l=F$M.type.split("."),F$P=F$U.window;for(F$j=0,F$$=F$l.length;F$j<F$$;++F$j){F$P=F$P[this.clasPaths[F$j]]}F$A._addHierarchyInnerUrls(F$a,F$E,F$s,F$Y,F$M.path,F$P)}else{var F$D=F$_.materialPath;if(F$D)F$A._addHierarchyInnerUrls(F$a,F$E,F$s,F$Y,F$D,ShurikenParticleMaterial);else{var F$m=F$_.texturePath;F$m&&F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$m,F$uF)}}break;case"Terrain":F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$e.customProps.dataPath,TerrainRes)}var F$b=F$e.components;for(var F$L in F$b){var F$B=F$b[F$L];switch(F$L){case"Animator":var F$v=F$B.avatarPath;if(F$v)F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$v,Avatar);else{var F$K=F$B.avatar;F$K&&F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$K.path,Avatar)}var F$V=F$B.clipPaths;for(F$R=0,F$H=F$V.length;F$R<F$H;F$R++)F$A._addHierarchyInnerUrls(F$o,F$E,F$s,F$Y,F$V[F$R],AnimationClip)}}var F$G=F$e.child;for(F$R=0,F$H=F$G.length;F$R<F$H;F$R++)F$A._getSprite3DHierarchyInnerUrls(F$G[F$R],F$F,F$a,F$o,F$E,F$s,F$Y)},F$A._loadHierarchy=function(F$e){F$e.on("loaded",null,F$A._onHierarchylhLoaded,[F$e,F$e._class._getGroup()]),F$e.load(F$e.url,"json",!1,null,!0)},F$A._onHierarchylhLoaded=function(F$e,F$F,F$a){if(F$e._class.destroyed)F$e.endLoad();else{var F$o=F$e.url,F$E=F$PF.getURLVerion(F$o),F$s=F$V.getPath(F$o),F$Y=[],F$_=[],F$R=[],F$H={};F$A._getSprite3DHierarchyInnerUrls(F$a,F$Y,F$_,F$R,F$H,F$E,F$s);var F$g=F$Y.length+F$_.length+F$R.length,F$n=F$g+1,F$O=1/F$n;if(F$A._onProcessChange(F$e,0,F$O,1),0<F$R.length){var F$q=F$g/F$n,F$I=F$K.create(null,F$A._onProcessChange,[F$e,F$O,F$q],!1);F$A._innerFourthLevelLoaderManager.create(F$R,F$K.create(null,F$A._onHierarchyInnerForthLevResouLoaded,[F$e,F$F,F$I,F$a,F$H,F$Y,F$_,F$O+F$q*F$R.length,F$q]),F$I,null,null,1,!0,F$F)}else F$A._onHierarchyInnerForthLevResouLoaded(F$e,F$F,null,F$a,F$H,F$Y,F$_,F$O,F$q)}},F$A._onHierarchyInnerForthLevResouLoaded=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){if(F$e._class.destroyed)F$e.endLoad();else if(F$a&&F$a.recover(),0<F$Y.length){var F$H=F$K.create(null,F$A._onProcessChange,[F$e,F$_,F$R],!1);F$A._innerSecondLevelLoaderManager.create(F$Y,F$K.create(null,F$A._onHierarchyInnerSecondLevResouLoaded,[F$e,F$F,F$H,F$o,F$E,F$s,F$_+F$R*F$Y.length,F$R]),F$a,null,null,1,!0,F$F)}else F$A._onHierarchyInnerSecondLevResouLoaded(F$e,F$F,null,F$o,F$E,F$s,F$_,F$R)},F$A._onHierarchyInnerSecondLevResouLoaded=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_){if(F$e._class.destroyed)F$e.endLoad();else if(F$a&&F$a.recover(),0<F$s.length){var F$R=F$K.create(null,F$A._onProcessChange,[F$e,F$Y,F$_],!1);F$A._innerFirstLevelLoaderManager.create(F$s,F$K.create(null,F$A._onHierarchyInnerFirstLevResouLoaded,[F$e,F$R,F$o,F$E]),F$a,null,null,1,!0,F$F)}else F$A._onHierarchyInnerFirstLevResouLoaded(F$e,null,F$o,F$E)},F$A._onHierarchyInnerFirstLevResouLoaded=function(F$e,F$F,F$a,F$o){F$F&&F$F.recover(),F$e.endLoad([F$a,F$o])},F$A._loadTerrain=function(F$e){F$e.on("loaded",null,F$A._onTerrainLtLoaded,[F$e,F$e._class._getGroup()]),F$e.load(F$e.url,"json",!1,null,!0)},F$A._onTerrainLtLoaded=function(F$e,F$F,F$a){if(F$e._class.destroyed)F$e.endLoad();else{var F$o,F$E,F$s=F$e.url,F$Y=F$PF.getURLVerion(F$s),F$_=F$V.getPath(F$s),F$R=[],F$H={},F$g=0,F$n=0,F$O=F$a.heightData;F$o=F$O.url,F$E=F$A.formatRelativePath(F$_,F$o),F$Y&&(F$E+=F$Y),F$o=F$H[F$o]=F$E;var F$q=F$a.detailTexture;for(F$g=0,F$n=F$q.length;F$g<F$n;F$g++)F$R.push({url:F$q[F$g].diffuse});var F$I=F$a.normalMap;for(F$g=0,F$n=F$I.length;F$g<F$n;F$g++)F$R.push({url:F$I[F$g]});var F$l=F$a.alphaMap;for(F$g=0,F$n=F$l.length;F$g<F$n;F$g++)F$R.push({url:F$l[F$g],params:[!1,!1,6408,!0]});for(F$g=0,F$n=F$R.length;F$g<F$n;F$g++){var F$P=F$R[F$g].url;F$E=F$A.formatRelativePath(F$_,F$P),F$Y&&(F$E+=F$Y),F$R[F$g].url=F$E,F$H[F$P]=F$E}var F$j=F$R.length,F$$=F$j+2,F$y=1/F$$;F$A._onProcessChange(F$e,0,F$y,1);var F$M={heightMapLoaded:!1,texturesLoaded:!1},F$D=F$K.create(null,F$A._onProcessChange,[F$e,F$y,F$y],!1);F$A._innerFourthLevelLoaderManager.create(F$o,F$K.create(null,F$A._onTerrainHeightMapLoaded,[F$e,F$D,F$a,F$H,F$M]),F$D,null,[F$O.numX,F$O.numZ,F$O.bitType,F$O.value],1,!0,F$F);var F$m=F$K.create(null,F$A._onProcessChange,[F$e,2*F$y,F$j/F$$],!1);F$A._innerFourthLevelLoaderManager.create(F$R,F$K.create(null,F$A._onTerrainTexturesLoaded,[F$e,F$m,F$a,F$H,F$M]),F$m,null,null,1,!0,F$F)}},F$A._onTerrainHeightMapLoaded=function(F$e,F$F,F$a,F$o,F$E){F$E.heightMapLoaded=!0,F$E.texturesLoaded&&(F$e.endLoad([F$a,F$o]),F$F.recover())},F$A._onTerrainTexturesLoaded=function(F$e,F$F,F$a,F$o,F$E){F$E.texturesLoaded=!0,F$E.heightMapLoaded&&(F$e.endLoad([F$a,F$o]),F$F.recover())},F$A._loadMesh=function(F$e){F$e.on("loaded",null,F$A._onMeshLmLoaded,[F$e,F$e._class._getGroup()]),F$e.load(F$e.url,"arraybuffer",!1,null,!0)},F$A._onMeshLmLoaded=function(F$e,F$F,F$a){if(F$e._class.destroyed)F$e.endLoad();else{var F$o,F$E,F$s,F$Y=F$e.url,F$_=F$PF.getURLVerion(F$Y),F$R=F$V.getPath(F$Y),F$H={},F$g=0,F$n=0;switch((F$A._readData=new F$m(F$a)).pos=0,F$A._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var F$O=F$A._readData.getUint32();F$A._readData.pos=F$A._readData.pos+4,F$n=F$A._readData.getUint16(),F$A._readData.pos=F$A._readData.pos+8*F$n;var F$q=F$A._readData.getUint32();for(F$n=F$A._readData.getUint16(),F$A._readData.pos=F$O+F$q,F$o=[],F$g=0;F$g<F$n;F$g++){var F$I=F$A._readData.readUTFString();-1!==F$I.lastIndexOf(".lmat")&&F$o.push(F$I)}break;default:for(F$A.READ_BLOCK(),F$g=0;F$g<2;F$g++){var F$l=F$A._readData.getUint16(),F$P=F$A._strings[F$l],F$j=F$A["READ_"+F$P];if(null==F$j)throw new Error("model file err,no this function:"+F$l+" "+F$P);1===F$g?F$o=F$j.call():F$j.call()}}for(F$g=0,F$s=F$o.length;F$g<F$s;F$g++){var F$$=F$o[F$g];F$E=F$A.formatRelativePath(F$R,F$$),F$_&&(F$E+=F$_),F$o[F$g]=F$E,F$H[F$$]=F$E}if(0<F$o.length){F$A._onProcessChange(F$e,0,.5,1);var F$y=F$K.create(null,F$A._onProcessChange,[F$e,.5,.5],!1);F$A._innerSecondLevelLoaderManager.create(F$o,F$K.create(null,F$A._onMeshMateialLoaded,[F$e,F$y,F$a,F$H]),F$y,null,null,1,!0,F$F)}else F$e.endLoad([F$a,F$H])}},F$A._onMeshMateialLoaded=function(F$e,F$F,F$a,F$o){F$e.endLoad([F$a,F$o]),F$F.recover()},F$A._getMaterialTexturePath=function(F$e,F$F,F$a){var F$o=F$e.length-4;return F$e.indexOf(".dds")!=F$o&&F$e.indexOf(".tga")!=F$o&&F$e.indexOf(".exr")!=F$o&&F$e.indexOf(".DDS")!=F$o&&F$e.indexOf(".TGA")!=F$o&&F$e.indexOf(".EXR")!=F$o||(F$e=F$e.substr(0,F$o)+".png"),F$e=F$A.formatRelativePath(F$a,F$e),F$F&&(F$e+=F$F),F$e},F$A._loadMaterial=function(F$e){F$e.on("loaded",null,F$A._onMaterilLmatLoaded,[F$e,F$e._class._getGroup()]),F$e.load(F$e.url,"json",!1,null,!0)},F$A._onMaterilLmatLoaded=function(F$e,F$F,F$a){if(F$e._class.destroyed)F$e.endLoad();else{var F$o,F$E=F$e.url,F$s=F$PF.getURLVerion(F$E),F$Y=F$V.getPath(F$E),F$_=[],F$R={},F$H=F$a.customProps,F$g=F$a.version;if(F$g)switch(F$g){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var F$n=F$a.props.textures,F$O=0,F$q=F$n.length;F$O<F$q;F$O++){var F$I=F$n[F$O],F$l=F$I.path;if(F$l){var F$P=F$l.length-4;F$l.indexOf(".exr")!=F$P&&F$l.indexOf(".EXR")!=F$P||(F$l=F$l.substr(0,F$P)+".png"),F$o=F$A.formatRelativePath(F$Y,F$l),F$s&&(F$o+=F$s),F$_.push({url:F$o,params:F$I.params}),F$R[F$l]=F$o}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var F$j=F$H.diffuseTexture.texture2D;if(F$j&&(F$o=F$A._getMaterialTexturePath(F$j,F$s,F$Y),F$_.push(F$o),F$R[F$j]=F$o),F$H.normalTexture){var F$$=F$H.normalTexture.texture2D;F$$&&(F$o=F$A._getMaterialTexturePath(F$$,F$s,F$Y),F$_.push(F$o),F$R[F$$]=F$o)}if(F$H.specularTexture){var F$y=F$H.specularTexture.texture2D;F$y&&(F$o=F$A._getMaterialTexturePath(F$y,F$s,F$Y),F$_.push(F$o),F$R[F$y]=F$o)}if(F$H.emissiveTexture){var F$M=F$H.emissiveTexture.texture2D;F$M&&(F$o=F$A._getMaterialTexturePath(F$M,F$s,F$Y),F$_.push(F$o),F$R[F$M]=F$o)}if(F$H.ambientTexture){var F$D=F$H.ambientTexture.texture2D;F$D&&(F$o=F$A._getMaterialTexturePath(F$D,F$s,F$Y),F$_.push(F$o),F$R[F$D]=F$o)}if(F$H.reflectTexture){var F$m=F$H.reflectTexture.texture2D;F$m&&(F$o=F$A._getMaterialTexturePath(F$m,F$s,F$Y),F$_.push(F$o),F$R[F$m]=F$o)}}var F$b=F$_.length,F$L=F$b+1,F$B=1/F$L;if(F$A._onProcessChange(F$e,0,F$B,1),0<F$b){var F$v=F$K.create(null,F$A._onProcessChange,[F$e,F$B,F$b/F$L],!1);F$A._innerFourthLevelLoaderManager.create(F$_,F$K.create(null,F$A._onMateialTexturesLoaded,[F$e,F$v,F$a,F$R]),F$v,F$uF,null,1,!0,F$F)}else F$A._onMateialTexturesLoaded(F$e,null,F$a,null)}},F$A._onMateialTexturesLoaded=function(F$e,F$F,F$a,F$o){F$e.endLoad([F$a,F$o]),F$F&&F$F.recover()},F$A._loadTextureCube=function(F$e){F$e.on("loaded",null,F$A._onTextureCubeLtcLoaded,[F$e]),F$e.load(F$e.url,"json",!1,null,!0)},F$A._onTextureCubeLtcLoaded=function(F$e,F$F){if(F$e._class.destroyed)F$e.endLoad();else{var F$a=F$V.getPath(F$e.url),F$o=[F$A.formatRelativePath(F$a,F$F.px),F$A.formatRelativePath(F$a,F$F.nx),F$A.formatRelativePath(F$a,F$F.py),F$A.formatRelativePath(F$a,F$F.ny),F$A.formatRelativePath(F$a,F$F.pz),F$A.formatRelativePath(F$a,F$F.nz)];F$A._onProcessChange(F$e,0,1/7,1);var F$E=F$K.create(null,F$A._onProcessChange,[F$e,1/7,6/7],!1);F$A._innerFourthLevelLoaderManager.load(F$o,F$K.create(null,F$A._onTextureCubeImagesLoaded,[F$e,F$o,F$E]),F$E,"nativeimage")}},F$A._onTextureCubeImagesLoaded=function(F$e,F$F,F$a){var F$o=[];F$o.length=6;for(var F$E=0;F$E<6;F$E++){var F$s=F$F[F$E];F$o[F$E]=F$j.getRes(F$s),F$j.clearRes(F$s)}F$e.endLoad(F$o),F$a.recover()},F$A._onProcessChange=function(F$e,F$F,F$a,F$o){(F$o=F$F+F$o*F$a)<1&&F$e.event("progress",F$o)},F$A.init=function(F$e,F$F,F$a,F$o,F$E,F$s){if(void 0===F$a&&(F$a=!1),void 0===F$o&&(F$o=!1),void 0===F$E&&(F$E=!0),void 0===F$s&&(F$s=!0),F$$.update3DLoop=function(){},F$$.cancelLoadByUrl=function(F$e){F$A._cancelLoadByUrl(F$e)},F$R.isAntialias=F$a,F$R.isAlpha=F$o,F$R.premultipliedAlpha=F$E,F$R.isStencil=F$s,!F$G.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");F$$.changeWebGLSize=F$A._changeWebGLSize,F$l.is3DMode=!0,F$D.init(F$e,F$F),F$r.__init__(),F$nF.__init__(),F$WF.__init__(),F$w.__init__(),F$A.__init__(),F$Y.maxTextureCount=2,(F$A.debugMode||F$i.debugMode)&&(F$A._debugPhasorSprite=new F$N)},F$A.HIERARCHY="SPRITE3DHIERARCHY",F$A.MESH="MESH",F$A.MATERIAL="MATERIAL",F$A.PBRMATERIAL="PBRMTL",F$A.TEXTURECUBE="TEXTURECUBE",F$A.TERRAIN="TERRAIN",F$A._readData=null,F$A._debugPhasorSprite=null,F$A.debugMode=!1,F$n(F$A,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new F$F},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new F$F},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new F$F},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new F$F}]),F$A}(),F$$F=function(F$e){function F$E(F$e){F$E.__super.call(this),this._owner=F$e,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}F$q(F$E,"laya.d3.animation.AnimationTransform3D",F$s);var F$F=F$E.prototype;return F$F._getlocalMatrix=function(){return this._localUpdate&&(F$PF._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},F$F._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldTransform()}},F$F._setWorldMatrixAndUpdate=function(F$e){if(this._worldMatrix=F$e,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var F$F=this._getlocalMatrix(),F$a=0;F$a<16;++F$a)this._worldMatrix[F$a]=F$F[F$a];else F$PF.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},F$F._setWorldMatrixNoUpdate=function(F$e){this._worldMatrix=F$e},F$F._setWorldMatrixIgnoreUpdate=function(F$e){this._worldMatrix=F$e,this._worldUpdate=!1},F$F.getLocalPosition=function(){return this._localPosition},F$F.setLocalPosition=function(F$e){if(this._parent)this._localPosition=F$e,this._localUpdate=!0,this._onWorldTransform();else{var F$F=this._entity.owner._transform,F$a=this._entity.localPosition,F$o=F$a.elements;F$o[0]=F$e[0],F$o[1]=F$e[1],F$o[2]=F$e[2],F$F.localPosition=F$a}},F$F.getLocalRotation=function(){if(this._localQuaternionUpdate){var F$e=this._localRotationEuler;F$PF._quaternionCreateFromYawPitchRollArray(F$e[1]/F$E._angleToRandin,F$e[0]/F$E._angleToRandin,F$e[2]/F$E._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},F$F.setLocalRotation=function(F$e){if(this._parent)this._localRotation=F$e,F$PF.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$F=this._entity.owner._transform,F$a=this._entity.localRotation,F$o=F$a.elements;F$o[0]=F$e[0],F$o[1]=F$e[1],F$o[2]=F$e[2],F$o[3]=F$e[3],F$F.localRotation=F$a}},F$F.getLocalScale=function(){return this._localScale},F$F.setLocalScale=function(F$e){if(this._parent)this._localScale=F$e,this._localUpdate=!0,this._onWorldTransform();else{var F$F=this._entity.owner._transform,F$a=this._entity.localScale,F$o=F$a.elements;F$o[0]=F$e[0],F$o[1]=F$e[1],F$o[2]=F$e[2],F$F.localScale=F$a}},F$F.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){F$PF.getYawPitchRoll(this._localRotation,F$E._tempVector3);var F$e=F$E._tempVector3,F$F=this._localRotationEuler;F$F[0]=F$e[1]*F$E._angleToRandin,F$F[1]=F$e[0]*F$E._angleToRandin,F$F[2]=F$e[2]*F$E._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},F$F.setLocalRotationEuler=function(F$e){if(this._parent)F$PF._quaternionCreateFromYawPitchRollArray(F$e[1]/F$E._angleToRandin,F$e[0]/F$E._angleToRandin,F$e[2]/F$E._angleToRandin,this._localRotation),this._localRotationEuler=F$e,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$F=this._entity.owner._transform,F$a=this._entity.localRotationEuler,F$o=F$a.elements;F$o[0]=F$e[0],F$o[1]=F$e[1],F$o[2]=F$e[2],F$F.localRotationEuler=F$a}},F$F.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)F$PF.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var F$e=this._getlocalMatrix(),F$F=0;F$F<16;++F$F)this._worldMatrix[F$F]=F$e[F$F];this._worldUpdate=!1}return this._worldMatrix},F$F.setParent=function(F$e){if(this._parent!==F$e){if(this._parent){var F$F=this._parent._childs,F$a=F$F.indexOf(this);F$F.splice(F$a,1)}F$e&&(F$e._childs.push(this),F$e&&this._onWorldTransform()),this._parent=F$e}},F$n(F$E,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$E}(),F$yF=function(F$e){function F$F(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,F$F.__super.call(this),this._destroyed=!1,this._id=F$F._uniqueIDCounter,F$F._uniqueIDCounter++}F$q(F$F,"laya.d3.component.Component3D",F$s);var F$a=F$F.prototype;return F$D.imps(F$a,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),F$a._initialize=function(F$e){this._owner=F$e,this._enable=!0,this.started=!1,this._load(F$e)},F$a._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},F$a._load=function(F$e){},F$a._start=function(F$e){},F$a._update=function(F$e){},F$a._lateUpdate=function(F$e){},F$a._preRenderUpdate=function(F$e){},F$a._postRenderUpdate=function(F$e){},F$a._unload=function(F$e){this.offAll()},F$a._cloneTo=function(F$e){},F$I(0,F$a,"id",function(){return this._id}),F$I(0,F$a,"destroyed",function(){return this._destroyed}),F$I(0,F$a,"owner",function(){return this._owner}),F$I(0,F$a,"enable",function(){return this._enable},function(F$e){this._enable!==F$e&&(this._enable=F$e,this.event("enablechanged",this._enable))}),F$I(0,F$a,"isSingleton",function(){return F$F._isSingleton}),F$F._isSingleton=!0,F$F._uniqueIDCounter=1,F$F}(),F$MF=function(F$e){function F$F(){this._destroyed=!1,F$F.__super.call(this),this._destroyed=!1}F$q(F$F,"laya.d3.core.GeometryFilter",F$s);var F$a=F$F.prototype;return F$D.imps(F$a,{"laya.resource.IDestroy":!0}),F$a._destroy=function(){this.offAll(),this._destroyed=!0},F$I(0,F$a,"_isAsyncLoaded",function(){return!0}),F$I(0,F$a,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),F$I(0,F$a,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),F$I(0,F$a,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),F$I(0,F$a,"destroyed",function(){return this._destroyed}),F$F}(),F$DF=function(F$e){function F$o(F$e){F$o.__super.call(this),this._id=++F$o._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new F$ie(new F$YF,new F$YF),this._boundingBoxCenter=new F$YF,this._boundingSphere=new F$te(new F$YF,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=F$e,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}F$q(F$o,"laya.d3.core.render.BaseRender",F$s);var F$F=F$o.prototype;return F$D.imps(F$F,{"laya.resource.IDestroy":!0}),F$F._changeMaterialReference=function(F$e,F$F){F$e&&F$e._removeReference(),F$F._addReference()},F$F._getInstanceMaterial=function(F$e,F$F){var F$a=new F$e.constructor;return F$e.cloneTo(F$a),F$a.name=F$a.name+"(Instance)",this._materialsInstance[F$F]=!0,this._changeMaterialReference(this._materials[F$F],F$a),this._materials[F$F]=F$a},F$F._setShaderValuelightMap=function(F$e){this._setShaderValueTexture(3,F$e)},F$F._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},F$F._renderRenderableBoundBox=function(){var F$e=F$jF._debugPhasorSprite,F$F=this.boundingBox,F$a=F$o._tempBoundBoxCorners;F$F.getCorners(F$a),F$e.line(F$a[0],F$o._greenColor,F$a[1],F$o._greenColor),F$e.line(F$a[2],F$o._greenColor,F$a[3],F$o._greenColor),F$e.line(F$a[4],F$o._greenColor,F$a[5],F$o._greenColor),F$e.line(F$a[6],F$o._greenColor,F$a[7],F$o._greenColor),F$e.line(F$a[0],F$o._greenColor,F$a[3],F$o._greenColor),F$e.line(F$a[1],F$o._greenColor,F$a[2],F$o._greenColor),F$e.line(F$a[2],F$o._greenColor,F$a[6],F$o._greenColor),F$e.line(F$a[3],F$o._greenColor,F$a[7],F$o._greenColor),F$e.line(F$a[0],F$o._greenColor,F$a[4],F$o._greenColor),F$e.line(F$a[1],F$o._greenColor,F$a[5],F$o._greenColor),F$e.line(F$a[4],F$o._greenColor,F$a[7],F$o._greenColor),F$e.line(F$a[5],F$o._greenColor,F$a[6],F$o._greenColor)},F$F._calculateBoundingSphere=function(){throw"BaseRender: must override it."},F$F._calculateBoundingBox=function(){throw"BaseRender: must override it."},F$F._setShaderValueTexture=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F)},F$F._setShaderValueMatrix4x4=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F?F$F.elements:null)},F$F._setShaderValueColor=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F?F$F.elements:null)},F$F._setShaderValueBuffer=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F)},F$F._setShaderValueInt=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F)},F$F._setShaderValueBool=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F)},F$F._setShaderValueNumber=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F)},F$F._setShaderValueVector2=function(F$e,F$F){this._owner._shaderValues.setValue(F$e,F$F?F$F.elements:null)},F$F._addShaderDefine=function(F$e){this._owner._shaderDefineValue|=F$e},F$F._removeShaderDefine=function(F$e){this._owner._shaderDefineValue&=~F$e},F$F._renderUpdate=function(F$e){return!0},F$F._applyLightMapParams=function(){if(0<=this._lightmapIndex){var F$e=this._owner.scene;if(F$e){var F$F=F$e.getlightmaps()[this._lightmapIndex];F$F?(this._addShaderDefine(F$NF.SAHDERDEFINE_LIGHTMAP),F$F.loaded?this._setShaderValuelightMap(F$F):F$F.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(F$NF.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$NF.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$NF.SAHDERDEFINE_LIGHTMAP)},F$F._updateOctreeNode=function(){var F$e=this._treeNode;F$e&&this._octreeNodeNeedChange&&(F$e.updateObject(this),this._octreeNodeNeedChange=!1)},F$F._destroy=function(){this.offAll();var F$e=0,F$F=0;for(F$e=0,F$F=this._renderElements.length;F$e<F$F;F$e++)this._renderElements[F$e]._destroy();for(F$e=0,F$F=this._materials.length;F$e<F$F;F$e++)this._materials[F$e]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},F$I(0,F$F,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),F$I(0,F$F,"id",function(){return this._id}),F$I(0,F$F,"material",function(){var F$e=this._materials[0];if(F$e&&!this._materialsInstance[0]){var F$F=this._getInstanceMaterial(F$e,0);this.event("materialchanged",[this,0,F$F])}return this._materials[0]},function(F$e){this.sharedMaterial=F$e}),F$I(0,F$F,"sharedMaterial",function(){return this._materials[0]},function(F$e){var F$F=this._materials[0];F$F!==F$e&&(this._materials[0]=F$e,this._materialsInstance[0]=!1,this._changeMaterialReference(F$F,F$e),this.event("materialchanged",[this,0,F$e]))}),F$I(0,F$F,"lightmapIndex",function(){return this._lightmapIndex},function(F$e){this._lightmapIndex=F$e,this._applyLightMapParams()}),F$I(0,F$F,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(F$e){this._lightmapScaleOffset=F$e,this._setShaderValueColor(2,F$e),this._addShaderDefine(F$NF.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),F$I(0,F$F,"enable",function(){return this._enable},function(F$e){this._enable=F$e,this.event("enablechanged",[this,F$e])}),F$I(0,F$F,"materials",function(){for(var F$e=0,F$F=this._materials.length;F$e<F$F;F$e++)if(!this._materialsInstance[F$e]){var F$a=this._getInstanceMaterial(this._materials[F$e],F$e);this.event("materialchanged",[this,F$e,F$a])}return this._materials.slice()},function(F$e){this.sharedMaterials=F$e}),F$I(0,F$F,"sharedMaterials",function(){return this._materials.slice()},function(F$e){if(!F$e)throw new Error("MeshRender: shadredMaterials value can't be null.");var F$F=F$e.length;this._materialsInstance.length=F$F;for(var F$a=0;F$a<F$F;F$a++){var F$o=this._materials[F$a];F$o!==F$e[F$a]&&(this._materialsInstance[F$a]=!1,this._changeMaterialReference(F$o,F$e[F$a]),this.event("materialchanged",[this,F$a,F$e[F$a]]))}this._materials=F$e}),F$I(0,F$F,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),F$I(0,F$F,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var F$e=this.boundingBox;F$YF.add(F$e.min,F$e.max,this._boundingBoxCenter),F$YF.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),F$I(0,F$F,"receiveShadow",function(){return this._receiveShadow},function(F$e){this._receiveShadow!==F$e&&((this._receiveShadow=F$e)?this._addShaderDefine(F$qF.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(F$qF.SHADERDEFINE_RECEIVE_SHADOW))}),F$I(0,F$F,"destroyed",function(){return this._destroyed}),F$o._uniqueIDCounter=0,F$n(F$o,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF,new F$YF]},"_greenColor",function(){return this._greenColor=new F$_F(0,1,0,1)}]),F$o}(),F$mF=function(F$e){function F$_(F$e){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,F$_.__super.call(this),this._localPosition=new F$YF,this._localRotation=new F$aF(0,0,0,1),this._localScale=new F$YF(1,1,1),this._localRotationEuler=new F$YF,this._localMatrix=new F$eF,this._position=new F$YF,this._rotation=new F$aF(0,0,0,1),this._scale=new F$YF(1,1,1),this._worldMatrix=new F$eF,this._forward=new F$YF,this._up=new F$YF,this._right=new F$YF,this._owner=F$e,this._childs=[]}F$q(F$_,"laya.d3.core.Transform3D",F$s);var F$F=F$_.prototype;return F$F._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)F$eF.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var F$e=F$_._tempVector30;F$YF.multiply(this.pivot,this._localScale,F$e);var F$F=F$_._tempVector31;F$YF.subtract(F$e,this.pivot,F$F);var F$a=F$_._tempVector32,F$o=this.localRotation;F$YF.transformQuat(F$e,F$o,F$a),F$YF.subtract(F$a,F$e,F$a);var F$E=F$_._tempVector33;F$YF.subtract(this._localPosition,F$F,F$E),F$YF.subtract(F$E,F$a,F$E),F$eF.createAffineTransformation(F$E,F$o,this._localScale,this._localMatrix)}},F$F._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldPositionRotationTransform()}},F$F._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldPositionScaleTransform()}},F$F._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldPositionTransform()}},F$F._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldPositionRotationTransform()}},F$F._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldPositionScaleTransform()}},F$F._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._onWorldTransform()}},F$F.translate=function(F$e,F$F){void 0===F$F&&(F$F=!0),F$F?(F$eF.createFromQuaternion(this.localRotation,F$_._tempMatrix0),F$YF.transformCoordinate(F$e,F$_._tempMatrix0,F$_._tempVector30),F$YF.add(this.localPosition,F$_._tempVector30,this._localPosition),this.localPosition=this._localPosition):(F$YF.add(this.position,F$e,this._position),this.position=this._position)},F$F.rotate=function(F$e,F$F,F$a){var F$o;void 0===F$F&&(F$F=!0),void 0===F$a&&(F$a=!0),F$o=F$a?F$e:(F$YF.scale(F$e,Math.PI/180,F$_._tempVector30),F$_._tempVector30),F$aF.createFromYawPitchRoll(F$o.y,F$o.x,F$o.z,F$_._tempQuaternion0),F$F?(F$aF.multiply(this._localRotation,F$_._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(F$aF.multiply(F$_._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},F$F.lookAt=function(F$e,F$F,F$a){void 0===F$a&&(F$a=!1);var F$o,F$E=F$e.elements;if(F$a){if(F$o=this._localPosition.elements,Math.abs(F$o[0]-F$E[0])<F$ce.zeroTolerance&&Math.abs(F$o[1]-F$E[1])<F$ce.zeroTolerance&&Math.abs(F$o[2]-F$E[2])<F$ce.zeroTolerance)return;F$aF.lookAt(this._localPosition,F$e,F$F,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var F$s=this.position;if(F$o=F$s.elements,Math.abs(F$o[0]-F$E[0])<F$ce.zeroTolerance&&Math.abs(F$o[1]-F$E[1])<F$ce.zeroTolerance&&Math.abs(F$o[2]-F$E[2])<F$ce.zeroTolerance)return;F$aF.lookAt(F$s,F$e,F$F,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},F$I(0,F$F,"_isFrontFaceInvert",function(){var F$e=this.scale,F$F=F$e.x<0;return F$e.y<0&&(F$F=!F$F),F$e.z<0&&(F$F=!F$F),F$F}),F$I(0,F$F,"owner",function(){return this._owner}),F$I(0,F$F,"localRotation",function(){if(this._localQuaternionUpdate){var F$e=this._localRotationEuler.elements;F$aF.createFromYawPitchRoll(F$e[1]/F$_._angleToRandin,F$e[0]/F$_._angleToRandin,F$e[2]/F$_._angleToRandin,this._localRotation)}return this._localRotation},function(F$e){this._localRotation=F$e,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$I(0,F$F,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?F$eF.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(F$e){null===this._parent?F$e.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),F$eF.multiply(this._localMatrix,F$e,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=F$e,this._worldUpdate=!1}),F$I(0,F$F,"worldNeedUpdate",function(){return this._worldUpdate}),F$I(0,F$F,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(F$e){this._localMatrix=F$e,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),F$I(0,F$F,"dummy",function(){return this._dummy},function(F$e){this._dummy!==F$e&&(this._dummy&&(this._dummy._entity=null),F$e&&(F$e._entity=this),this._dummy=F$e)}),F$I(0,F$F,"localPosition",function(){return this._localPosition},function(F$e){this._localPosition=F$e,this._localUpdate=!0,this._onWorldPositionTransform()}),F$I(0,F$F,"position",function(){if(this._positionUpdate){if(null!=this._parent){var F$e=this._parent.position;F$YF.multiply(this._localPosition,this._parent.scale,F$_._tempVector30),F$YF.transformQuat(F$_._tempVector30,this._parent.rotation,F$_._tempVector30),F$YF.add(F$e,F$_._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(F$e){if(null!=this._parent){F$YF.subtract(F$e,this._parent.position,this._localPosition);var F$F=this._parent.scale.elements,F$a=F$F[0],F$o=F$F[1],F$E=F$F[2];if(1!==F$a||1!==F$o||1!==F$E){var F$s=F$_._tempVector30,F$Y=F$s.elements;F$Y[0]=1/F$a,F$Y[1]=1/F$o,F$Y[2]=1/F$E,F$YF.multiply(this._localPosition,F$s,this._localPosition)}this._parent.rotation.invert(F$_._tempQuaternion0),F$YF.transformQuat(this._localPosition,F$_._tempQuaternion0,this._localPosition)}else F$e.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=F$e,this._positionUpdate=!1}),F$I(0,F$F,"localScale",function(){return this._localScale},function(F$e){this._localScale=F$e,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),F$I(0,F$F,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(F$_._tempVector30);var F$e=F$_._tempVector30.elements,F$F=this._localRotationEuler.elements;F$F[0]=F$e[1]*F$_._angleToRandin,F$F[1]=F$e[0]*F$_._angleToRandin,F$F[2]=F$e[2]*F$_._angleToRandin}return this._localRotationEuler},function(F$e){this._localRotationEuler=F$e,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$I(0,F$F,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?F$aF.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(F$e){null!=this._parent?(this._parent.rotation.invert(F$_._tempQuaternion0),F$aF.multiply(F$e,F$_._tempQuaternion0,this._localRotation)):F$e.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=F$e,this._rotationUpdate=!1}),F$I(0,F$F,"scale",function(){return this._scaleUpdate&&(null!==this._parent?F$YF.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(F$e){if(null!==this._parent){var F$F=this._parent.scale.elements,F$a=F$_._tempVector30.elements;F$a[0]=1/F$F[0],F$a[1]=1/F$F[1],F$a[2]=1/F$F[2],F$YF.multiply(F$e,F$_._tempVector30,this._localScale)}else F$e.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=F$e,this._scaleUpdate=!1}),F$I(0,F$F,"rotationEuler",null,function(F$e){F$aF.createFromYawPitchRoll(F$e.y,F$e.x,F$e.z,this._rotation),this.rotation=this._rotation}),F$I(0,F$F,"forward",function(){var F$e=this.worldMatrix.elements;return this._forward.elements[0]=-F$e[8],this._forward.elements[1]=-F$e[9],this._forward.elements[2]=-F$e[10],this._forward}),F$I(0,F$F,"up",function(){var F$e=this.worldMatrix.elements;return this._up.elements[0]=F$e[4],this._up.elements[1]=F$e[5],this._up.elements[2]=F$e[6],this._up}),F$I(0,F$F,"right",function(){var F$e=this.worldMatrix.elements;return this._right.elements[0]=F$e[0],this._right.elements[1]=F$e[1],this._right.elements[2]=F$e[2],this._right}),F$I(0,F$F,"parent",function(){return this._parent},function(F$e){if(this._parent!==F$e){if(this._parent){var F$F=this._parent._childs,F$a=F$F.indexOf(this);F$F.splice(F$a,1)}F$e&&(F$e._childs.push(this),F$e&&this._onWorldTransform()),this._parent=F$e}}),F$n(F$_,["_tempVector30",function(){return this._tempVector30=new F$YF},"_tempVector31",function(){return this._tempVector31=new F$YF},"_tempVector32",function(){return this._tempVector32=new F$YF},"_tempVector33",function(){return this._tempVector33=new F$YF},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$aF},"_tempMatrix0",function(){return this._tempMatrix0=new F$eF},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$_}(),F$bF=(function(F$e){function F$F(){this._rotation=0,this._matNeedUpdte=!1,F$F.__super.call(this),this._matrix=new F$eF,this._offset=new F$sF,this._tiling=new F$sF(1,1)}F$q(F$F,"laya.d3.core.TransformUV",F$s);var F$a=F$F.prototype;F$D.imps(F$a,{"laya.d3.core.IClone":!0}),F$a._updateMatrix=function(){F$F._tempOffsetV3.elements[0]=this._offset.x,F$F._tempOffsetV3.elements[1]=this._offset.y,F$aF.createFromYawPitchRoll(0,0,this._rotation,F$F._tempRotationQua),F$F._tempTitlingV3.elements[0]=this._tiling.x,F$F._tempTitlingV3.elements[1]=this._tiling.y,F$eF.createAffineTransformation(F$F._tempOffsetV3,F$F._tempRotationQua,F$F._tempTitlingV3,this._matrix)},F$a.cloneTo=function(F$e){F$e._matrix=this._matrix.clone(),F$e._offset=this._offset.clone(),F$e._rotation=this._rotation,F$e._tiling=this._tiling.clone()},F$a.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$a,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),F$I(0,F$a,"tiling",function(){return this._tiling},function(F$e){this._tiling=F$e,this._matNeedUpdte=!0}),F$I(0,F$a,"offset",function(){return this._offset},function(F$e){this._offset=F$e,this._matNeedUpdte=!0}),F$I(0,F$a,"rotation",function(){return this._rotation},function(F$e){this._rotation=F$e,this._matNeedUpdte=!0}),F$n(F$F,["_tempOffsetV3",function(){return this._tempOffsetV3=new F$YF(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new F$aF},"_tempTitlingV3",function(){return this._tempTitlingV3=new F$YF(1,1,1)}])}(),function(F$a){function F$e(){this.x=NaN,this.y=NaN,this.z=NaN,F$e.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}F$q(F$e,"laya.d3.core.particleShuriKen.module.shape.BoxShape",F$a);var F$F=F$e.prototype;F$F._getShapeBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=.5*-this.x,F$F[1]=.5*-this.y,F$F[2]=.5*-this.z;var F$a=F$e.max.elements;F$a[0]=.5*this.x,F$a[1]=.5*this.y,F$a[2]=.5*this.z},F$F._getSpeedBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=0,F$F[1]=0,F$F[2]=0;var F$a=F$e.max.elements;F$a[0]=0,F$a[1]=1,F$a[2]=0},F$F.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements,F$s=F$F.elements;F$a?(F$a.seed=F$o[16],F$u._randomPointInsideHalfUnitBox(F$e,F$a),F$o[16]=F$a.seed):F$u._randomPointInsideHalfUnitBox(F$e),F$E[0]=this.x*F$E[0],F$E[1]=this.y*F$E[1],F$E[2]=this.z*F$E[2],this.randomDirection?F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F):(F$s[0]=0,F$s[1]=0,F$s[2]=1)},F$F.cloneTo=function(F$e){F$a.prototype.cloneTo.call(this,F$e);var F$F=F$e;F$F.x=this.x,F$F.y=this.y,F$F.z=this.z,F$F.randomDirection=this.randomDirection}}(F$k),function(F$a){function F$Y(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,F$Y.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}F$q(F$Y,"laya.d3.core.particleShuriKen.module.shape.CircleShape",F$a);var F$e=F$Y.prototype;F$e._getShapeBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[2]=-this.radius,F$F[1]=0;var F$a=F$e.max.elements;F$a[0]=F$a[2]=this.radius,F$a[1]=0},F$e._getSpeedBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[1]=-1,F$F[2]=0;var F$a=F$e.max.elements;F$a[0]=F$a[1]=1,F$a[2]=0},F$e.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements,F$s=F$Y._tempPositionPoint.elements;F$a?(F$a.seed=F$o[16],this.emitFromEdge?F$u._randomPointUnitArcCircle(this.arc,F$Y._tempPositionPoint,F$a):F$u._randomPointInsideUnitArcCircle(this.arc,F$Y._tempPositionPoint,F$a),F$o[16]=F$a.seed):this.emitFromEdge?F$u._randomPointUnitArcCircle(this.arc,F$Y._tempPositionPoint):F$u._randomPointInsideUnitArcCircle(this.arc,F$Y._tempPositionPoint),F$E[0]=-F$s[0],F$E[1]=F$s[1],F$E[2]=0,F$YF.scale(F$e,this.radius,F$e),this.randomDirection?F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F):F$e.cloneTo(F$F)},F$e.cloneTo=function(F$e){F$a.prototype.cloneTo.call(this,F$e);var F$F=F$e;F$F.radius=this.radius,F$F.arc=this.arc,F$F.emitFromEdge=this.emitFromEdge,F$F.randomDirection=this.randomDirection},F$n(F$Y,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$sF}])}(F$k),function(F$a){function F$O(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,F$O.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}F$q(F$O,"laya.d3.core.particleShuriKen.module.shape.ConeShape",F$a);var F$e=F$O.prototype;F$e._getShapeBoundBox=function(F$e){var F$F=this.radius+this.length*Math.sin(this.angle),F$a=this.length*Math.cos(this.angle),F$o=F$e.min.elements;F$o[0]=F$o[1]=-F$F,F$o[2]=0;var F$E=F$e.max.elements;F$E[0]=F$E[1]=F$F,F$E[2]=F$a},F$e._getSpeedBoundBox=function(F$e){var F$F=Math.sin(this.angle),F$a=F$e.min.elements;F$a[0]=F$a[1]=-F$F,F$a[2]=0;var F$o=F$e.max.elements;F$o[0]=F$a[1]=F$F,F$o[2]=1},F$e.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){var F$E,F$s=F$e.elements,F$Y=F$F.elements,F$_=F$O._tempPositionPoint.elements,F$R=NaN,F$H=NaN,F$g=Math.cos(this.angle),F$n=Math.sin(this.angle);switch(this.emitType){case 0:F$a?(F$a.seed=F$o[16],F$u._randomPointInsideUnitCircle(F$O._tempPositionPoint,F$a),F$o[16]=F$a.seed):F$u._randomPointInsideUnitCircle(F$O._tempPositionPoint),F$R=F$_[0],F$H=F$_[1],F$s[0]=F$R*this.radius,F$s[1]=F$H*this.radius,F$s[2]=0,this.randomDirection?(F$a?(F$a.seed=F$o[17],F$u._randomPointInsideUnitCircle(F$O._tempDirectionPoint,F$a),F$o[17]=F$a.seed):F$u._randomPointInsideUnitCircle(F$O._tempDirectionPoint),F$E=F$O._tempDirectionPoint.elements,F$Y[0]=F$E[0]*F$n,F$Y[1]=F$E[1]*F$n):(F$Y[0]=F$R*F$n,F$Y[1]=F$H*F$n),F$Y[2]=F$g;break;case 1:F$a?(F$a.seed=F$o[16],F$u._randomPointUnitCircle(F$O._tempPositionPoint,F$a),F$o[16]=F$a.seed):F$u._randomPointUnitCircle(F$O._tempPositionPoint),F$R=F$_[0],F$H=F$_[1],F$s[0]=F$R*this.radius,F$s[1]=F$H*this.radius,F$s[2]=0,this.randomDirection?(F$a?(F$a.seed=F$o[17],F$u._randomPointInsideUnitCircle(F$O._tempDirectionPoint,F$a),F$o[17]=F$a.seed):F$u._randomPointInsideUnitCircle(F$O._tempDirectionPoint),F$E=F$O._tempDirectionPoint.elements,F$Y[0]=F$E[0]*F$n,F$Y[1]=F$E[1]*F$n):(F$Y[0]=F$R*F$n,F$Y[1]=F$H*F$n),F$Y[2]=F$g;break;case 2:F$a?(F$a.seed=F$o[16],F$u._randomPointInsideUnitCircle(F$O._tempPositionPoint,F$a)):F$u._randomPointInsideUnitCircle(F$O._tempPositionPoint),F$R=F$_[0],F$H=F$_[1],F$s[0]=F$R*this.radius,F$s[1]=F$H*this.radius,F$Y[F$s[2]=0]=F$R*F$n,F$Y[1]=F$H*F$n,F$Y[2]=F$g,F$YF.normalize(F$F,F$F),F$a?(F$YF.scale(F$F,this.length*F$a.getFloat(),F$F),F$o[16]=F$a.seed):F$YF.scale(F$F,this.length*Math.random(),F$F),F$YF.add(F$e,F$F,F$e),this.randomDirection&&(F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F));break;case 3:F$a?(F$a.seed=F$o[16],F$u._randomPointUnitCircle(F$O._tempPositionPoint,F$a)):F$u._randomPointUnitCircle(F$O._tempPositionPoint),F$R=F$_[0],F$H=F$_[1],F$s[0]=F$R*this.radius,F$s[1]=F$H*this.radius,F$Y[F$s[2]=0]=F$R*F$n,F$Y[1]=F$H*F$n,F$Y[2]=F$g,F$YF.normalize(F$F,F$F),F$a?(F$YF.scale(F$F,this.length*F$a.getFloat(),F$F),F$o[16]=F$a.seed):F$YF.scale(F$F,this.length*Math.random(),F$F),F$YF.add(F$e,F$F,F$e),this.randomDirection&&(F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F));break;default:throw new Error("ConeShape:emitType is invalid.")}},F$e.cloneTo=function(F$e){F$a.prototype.cloneTo.call(this,F$e);var F$F=F$e;F$F.angle=this.angle,F$F.radius=this.radius,F$F.length=this.length,F$F.emitType=this.emitType,F$F.randomDirection=this.randomDirection},F$n(F$O,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$sF},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new F$sF}])}(F$k),function(F$a){function F$e(){this.radius=NaN,this.emitFromShell=!1,F$e.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$q(F$e,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",F$a);var F$F=F$e.prototype;F$F._getShapeBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[1]=F$F[2]=-this.radius;var F$a=F$e.max.elements;F$a[0]=F$a[1]=this.radius,F$a[2]=0},F$F._getSpeedBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[1]=-1,F$F[2]=0;var F$a=F$e.max.elements;F$a[0]=F$a[1]=F$a[2]=1},F$F.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){var F$E=F$e.elements;F$a?(F$a.seed=F$o[16],this.emitFromShell?F$u._randomPointUnitSphere(F$e,F$a):F$u._randomPointInsideUnitSphere(F$e,F$a),F$o[16]=F$a.seed):this.emitFromShell?F$u._randomPointUnitSphere(F$e):F$u._randomPointInsideUnitSphere(F$e),F$YF.scale(F$e,this.radius,F$e);var F$s=F$E[2];F$s<0&&(F$E[2]=-1*F$s),this.randomDirection?F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F):F$e.cloneTo(F$F)},F$F.cloneTo=function(F$e){F$a.prototype.cloneTo.call(this,F$e);var F$F=F$e;F$F.radius=this.radius,F$F.emitFromShell=this.emitFromShell,F$F.randomDirection=this.randomDirection}}(F$k),function(F$a){function F$e(){this.radius=NaN,this.emitFromShell=!1,F$e.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$q(F$e,"laya.d3.core.particleShuriKen.module.shape.SphereShape",F$a);var F$F=F$e.prototype;F$F._getShapeBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[1]=F$F[2]=-this.radius;var F$a=F$e.max.elements;F$a[0]=F$a[1]=F$a[2]=this.radius},F$F._getSpeedBoundBox=function(F$e){var F$F=F$e.min.elements;F$F[0]=F$F[1]=F$F[2]=-1;var F$a=F$e.max.elements;F$a[0]=F$a[1]=F$a[2]=1},F$F.generatePositionAndDirection=function(F$e,F$F,F$a,F$o){F$a?(F$a.seed=F$o[16],this.emitFromShell?F$u._randomPointUnitSphere(F$e,F$a):F$u._randomPointInsideUnitSphere(F$e,F$a),F$o[16]=F$a.seed):this.emitFromShell?F$u._randomPointUnitSphere(F$e):F$u._randomPointInsideUnitSphere(F$e),F$YF.scale(F$e,this.radius,F$e),this.randomDirection?F$a?(F$a.seed=F$o[17],F$u._randomPointUnitSphere(F$F,F$a),F$o[17]=F$a.seed):F$u._randomPointUnitSphere(F$F):F$e.cloneTo(F$F)},F$F.cloneTo=function(F$e){F$a.prototype.cloneTo.call(this,F$e);var F$F=F$e;F$F.radius=this.radius,F$F.emitFromShell=this.emitFromShell,F$F.randomDirection=this.randomDirection}}(F$k),function(F$e){function F$F(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,F$F.__super.call(this)}return F$q(F$F,"laya.d3.core.render.SubMeshRenderElement",F$X),F$F}()),F$LF=function(F$e){function F$P(F$e,F$F,F$a,F$o,F$E,F$s){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=F$e,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[F$qF.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[F$NF.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[F$NF.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[F$VF.SHADERDEFINE_ALPHATEST]="ALPHATEST";F$P.__super.call(this,F$e,F$F,F$a,null,{}),this._attributeMap=F$o;var F$Y;for(F$Y in F$E){var F$_=F$E[F$Y];switch(F$_[1]){case 0:this._renderElementUniformMap[F$Y]=F$_[0];break;case 1:this._materialUniformMap[F$Y]=F$_[0];break;case 2:this._spriteUniformMap[F$Y]=F$_[0];break;case 3:this._cameraUniformMap[F$Y]=F$_[0];break;case 4:this._sceneUniformMap[F$Y]=F$_[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}F$q(F$P,"laya.d3.shader.ShaderCompile3D",F$y);var F$F=F$P.prototype;return F$F._definesToNameDic=function(F$e,F$F){for(var F$a={},F$o=1,F$E=0;F$E<32&&!(F$e<(F$o=1<<F$E));F$E++)if(F$e&F$o){var F$s=F$F[F$o];F$s&&(F$a[F$s]="")}return F$a},F$F.withCompile=function(F$e,F$F,F$a,F$o){var F$E,F$s,F$Y;if(F$s=this.sharders[F$e])if(F$Y=F$s[F$F]){if(F$E=F$Y[F$a])return F$E}else F$Y=F$s[F$F]=[];else F$Y=(F$s=this.sharders[F$e]=[])[F$F]=[];var F$_,F$R=this._definesToNameDic(F$e,F$P._globalInt2name),F$H=this._definesToNameDic(F$F,this._spriteInt2name),F$g=this._definesToNameDic(F$a,this._materialInt2name),F$n={},F$O="";if(F$R)for(F$_ in F$R)F$O+="#define "+F$_+"\n",F$n[F$_]=!0;if(F$H)for(F$_ in F$H)F$O+="#define "+F$_+"\n",F$n[F$_]=!0;if(F$g)for(F$_ in F$g)F$O+="#define "+F$_+"\n",F$n[F$_]=!0;var F$q=F$TF.nameKey.getName(this._name)+" compile ("+F$e+","+F$F+","+F$a+")",F$I=this._VS.toscript(F$n,[]),F$l=this._PS.toscript(F$n,[]);F$U.now();if(F$E=F$TF.create(F$O+F$I.join("\n"),F$O+F$l.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,F$o,F$q),F$Y[F$a]=F$E,laya.d3.shader.ShaderCompile3D.debugMode)F$U.now();return F$E},F$F.precompileShaderWithShaderDefine=function(F$e,F$F,F$a){this.withCompile(F$e,F$F,F$a,!0)},F$F.addMaterialDefines=function(F$e){var F$F=F$e.defines;for(var F$a in F$F){var F$o=F$F[F$a],F$E=parseInt(F$a);this._materialInt2name[F$E]=F$o,this._materialName2Int[F$o]=F$E}},F$F.addSpriteDefines=function(F$e){var F$F=F$e.defines;for(var F$a in F$F){var F$o=F$F[F$a],F$E=parseInt(F$a);this._spriteInt2name[F$E]=F$o,this._spriteName2Int[F$o]=F$E}},F$F.getMaterialDefineByName=function(F$e){return this._materialName2Int[F$e]},F$F.registerMaterialDefine=function(F$e){var F$F=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[F$F]=F$e,this._materialName2Int[F$e]=F$F},F$F.registerSpriteDefine=function(F$e){var F$F=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[F$F]=F$e,this._spriteName2Int[F$e]=F$F},F$P._globalRegDefine=function(F$e,F$F){F$P._globalInt2name[F$F]=F$e},F$P.add=function(F$e,F$F,F$a,F$o,F$E){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$e]=new F$P(F$e,F$F,F$a,F$o,F$E,F$y.includes)},F$P.get=function(F$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$TF.nameKey.getID(F$e)]},F$P._preCompileShader={},F$P._globalInt2name=[],F$P.debugMode=!1,F$P.SHADERDEFINE_HIGHPRECISION=1,F$P.SHADERDEFINE_FOG=4,F$P.SHADERDEFINE_DIRECTIONLIGHT=8,F$P.SHADERDEFINE_POINTLIGHT=16,F$P.SHADERDEFINE_SPOTLIGHT=32,F$P.SHADERDEFINE_UV0=64,F$P.SHADERDEFINE_COLOR=128,F$P.SHADERDEFINE_UV1=256,F$P.SAHDERDEFINE_DEPTHFOG=131072,F$P}(),F$BF=function(F$e){function F$I(){F$I.__super.call(this)}F$q(F$I,"laya.d3.graphics.MeshSprite3DStaticBatchManager",F$oe);var F$F=F$I.prototype;return F$F._getStaticBatch=function(F$e,F$F,F$a,F$o){var F$E,F$s;return F$s=F$e?F$e.id.toString()+F$a.id.toString()+F$F.id.toString()+F$o.toString():F$a.id.toString()+F$F.id.toString()+F$o.toString(),this._staticBatches[F$s]?F$E=this._staticBatches[F$s]:this._staticBatches[F$s]=F$E=new F$vF(F$s,this,F$e,F$F,F$a),F$E},F$F._initStaticBatchs=function(F$e){var F$F,F$a;this._initBatchRenderElements.sort(F$I._sortPrepareStaticBatch);for(var F$o,F$E=!1,F$s=0,F$Y=0,F$_=this._initBatchRenderElements.length;F$Y<F$_;F$Y++){var F$R,F$H=this._initBatchRenderElements[F$Y],F$g=F$H.renderObj._getVertexBuffer(0);F$H._sprite3D;if(F$a===F$g.vertexDeclaration&&F$F===F$H._material)if(F$E)F$o._addCombineBatchRenderObjTest(F$H)?(F$R=F$H._staticBatch)!==F$o&&(F$R&&F$R._deleteCombineBatchRenderObj(F$H),F$o._addCombineBatchRenderObj(F$H)):(F$E=!1,F$s++);else{var F$n=this._initBatchRenderElements[F$Y-1],F$O=F$n.renderObj,F$q=F$H.renderObj;F$E=!(65535<F$O._getVertexBuffer().vertexCount+F$q._getVertexBuffer().vertexCount)&&(F$o=this._getStaticBatch(F$e,F$a,F$F,F$s),(F$R=F$n._staticBatch)!==F$o&&(F$R&&F$R._deleteCombineBatchRenderObj(F$n),F$o._addCombineBatchRenderObj(F$n)),(F$R=F$H._staticBatch)!==F$o&&(F$R&&F$R._deleteCombineBatchRenderObj(F$H),F$o._addCombineBatchRenderObj(F$H)),!0)}else F$E=!1,F$s=0;F$F=F$H._material,F$a=F$g.vertexDeclaration}},F$I._sortPrepareStaticBatch=function(F$e,F$F){var F$a=F$e._render,F$o=F$F._render,F$E=F$a.lightmapIndex-F$o.lightmapIndex;if(0!=F$E)return F$E;var F$s=F$a.receiveShadow-F$o.receiveShadow;if(0!=F$s)return F$s;var F$Y=F$e._mainSortID-F$F._mainSortID;return 0==F$Y?F$e.renderObj.triangleCount-F$F.renderObj.triangleCount:F$Y},F$I}(),F$vF=function(F$e){function F$s(F$e,F$F,F$a,F$o,F$E){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,F$s.__super.call(this,F$e,F$F,F$a),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=F$o,this._material=F$E}F$q(F$s,"laya.d3.graphics.SubMeshStaticBatch",F$Ee);var F$F=F$s.prototype;return F$F._compareBatchRenderElement=function(F$e,F$F){return F$e._batchIndexStart>F$F._batchIndexStart},F$F._addCombineBatchRenderObjTest=function(F$e){var F$F=F$e.renderObj._vertexCount;return!(65535<(0<F$F?this._currentCombineVertexCount+F$F:this._currentCombineVertexCount+F$e.renderObj._getVertexBuffer().vertexCount))},F$F._addCombineBatchRenderObj=function(F$e){var F$F=F$e.renderObj,F$a=F$F._vertexCount;this._initBatchRenderElements.push(F$e),F$e._staticBatch=this,0<F$a?(this._currentCombineIndexCount+=F$F._indexCount,this._currentCombineVertexCount+=F$a):(this._currentCombineIndexCount=this._currentCombineIndexCount+F$F._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$F._getVertexBuffer().vertexCount),this._needFinishCombine=!0},F$F._deleteCombineBatchRenderObj=function(F$e){var F$F=F$e.renderObj,F$a=this._initBatchRenderElements.indexOf(F$e);if(-1!==F$a){this._initBatchRenderElements.splice(F$a,1),F$e._staticBatch=null;var F$o=F$F._vertexCount;0<F$o?(this._currentCombineIndexCount=this._currentCombineIndexCount-F$F._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$o):(this._currentCombineIndexCount=this._currentCombineIndexCount-F$F._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$F._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},F$F._finishInit=function(){if(this._needFinishCombine){var F$e=0,F$F=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var F$a=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),F$o=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=F$kF.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=F$JF.create("ushort",this._currentCombineIndexCount,35044);for(var F$E=0,F$s=this._initBatchRenderElements.length;F$E<F$s;F$E++){var F$Y=this._initBatchRenderElements[F$E],F$_=F$Y.renderObj,F$R=F$_._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,F$Y._sprite3D),F$H=F$_.getIndices(),F$g=F$Y._sprite3D.transform._isFrontFaceInvert,F$n=F$e/(this._vertexDeclaration.vertexStride/4)-F$_._vertexStart,F$O=F$F,F$q=F$O+F$H.length;F$Y._batchIndexStart=F$O,F$Y._batchIndexEnd=F$q,F$o.set(F$H,F$F);var F$I=0;if(F$g)for(F$I=F$O;F$I<F$q;F$I+=3){F$o[F$I]=F$n+F$o[F$I];var F$l=F$o[F$I+1],F$P=F$o[F$I+2];F$o[F$I+1]=F$n+F$P,F$o[F$I+2]=F$n+F$l}else for(F$I=F$O;F$I<F$q;F$I+=3)F$o[F$I]=F$n+F$o[F$I],F$o[F$I+1]=F$n+F$o[F$I+1],F$o[F$I+2]=F$n+F$o[F$I+2];F$F+=F$H.length,F$a.set(F$R,F$e),F$e+=F$R.length}this._vertexBuffer.setData(F$a),this._indexBuffer.setData(F$o),this._needFinishCombine=!1}},F$F._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new F$bF)},F$F._getRenderElement=function(F$e,F$F,F$a){for(var F$o,F$E,F$s=this._batchRenderElements.length,F$Y=!0,F$_=0;F$_<F$s;F$_++){var F$R,F$H,F$g=(F$E=this._batchRenderElements[F$_])._sprite3D._render;if(0!==F$_&&(F$Y=(F$R=(F$o=this._batchRenderElements[F$_-1])._sprite3D._render).lightmapIndex!==F$g.lightmapIndex||F$R.receiveShadow!==F$g.receiveShadow||F$o._batchIndexEnd!==F$E._batchIndexStart),F$Y){(F$H=this._getCombineRenderElementFromPool()).renderObj=this,F$H._material=this._material,F$H._batchIndexStart=F$E._batchIndexStart,F$H._batchIndexEnd=F$E._batchIndexEnd;var F$n=F$g.lightmapIndex,F$O=F$n+1,F$q=this._batchOwnerIndices[F$O];F$q||(F$q=this._batchOwnerIndices[F$O]=[]);var F$I,F$l=F$q[F$E._render.receiveShadow?1:0];void 0===F$l?(F$q[F$g.receiveShadow?1:0]=this._batchOwners.length,(F$I=new F$WF(null,"StaticBatchMeshSprite3D"))._scene=F$F,F$I._transform=this._rootOwner?this._rootOwner._transform:null,F$I._render.lightmapIndex=F$n,F$I._render.receiveShadow=F$E._render.receiveShadow,this._batchOwners.push(F$I)):F$I=this._batchOwners[F$l],F$I._render._renderUpdate(F$a),F$H._sprite3D=F$I,F$e.push(F$H)}else F$H._batchIndexEnd=F$E._batchIndexEnd}},F$F._beforeRender=function(F$e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$F._render=function(F$e){var F$F=F$e.renderElement,F$a=F$F._batchIndexStart,F$o=F$F._batchIndexEnd-F$a;F$G.mainContext.drawElements(4,F$o,5123,2*F$a),F$L.drawCall++,F$L.trianglesFaces+=F$o/3},F$F.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},F$F._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),this._vertexBuffer},F$s}(),F$KF=function(F$e){function F$F(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,F$F.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}F$q(F$F,"laya.d3.core.ComponentNode",F$H);var F$a=F$F.prototype;return F$a.addComponent=function(F$e){var F$F,F$a=this._componentsMap.indexOf(F$e);if(-1===F$a)F$F=[],this._componentsMap.push(F$e),this._typeComponentsIndices.push(F$F);else if(F$F=this._typeComponentsIndices[F$a],this._components[F$F[0]].isSingleton)throw new Error("无法单实例创建"+F$e+"组件，"+F$e+"组件已存在！");var F$o=F$E.getInstance(F$e);return F$F.push(this._components.length),this._components.push(F$o),F$o instanceof laya.d3.component.Script&&this._scripts.push(F$o),F$o._initialize(this),F$o},F$a._removeComponent=function(F$e,F$F){var F$a=this._typeComponentsIndices[F$e],F$o=F$a[F$F],F$E=this._components[F$o];this._components.splice(F$o,1),F$E instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$E),1),F$a.splice(F$F,1),0===F$a.length&&(this._typeComponentsIndices.splice(F$e,1),this._componentsMap.splice(F$e,1));for(var F$s=0,F$Y=this._componentsMap.length;F$s<F$Y;F$s++)for(var F$_=(F$a=this._typeComponentsIndices[F$s]).length-1;0<=F$_;F$_--){var F$R=F$a[F$_];if(!(F$o<F$R))break;F$a[F$_]=--F$R}F$E._destroy()},F$a.getComponentByType=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a=this._componentsMap.indexOf(F$e);return-1===F$a?null:this._components[this._typeComponentsIndices[F$a][F$F]]},F$a.getComponentsByType=function(F$e,F$F){var F$a=this._componentsMap.indexOf(F$e);if(-1!==F$a){var F$o=this._typeComponentsIndices[F$a],F$E=F$o.length;F$F.length=F$E;for(var F$s=0;F$s<F$E;F$s++)F$F[F$s]=this._components[F$o[F$s]]}else F$F.length=0},F$a.getComponentByIndex=function(F$e){return this._components[F$e]},F$a.removeComponentByType=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a=this._componentsMap.indexOf(F$e);-1!==F$a&&this._removeComponent(F$a,F$F)},F$a.removeComponentsByType=function(F$e){var F$F=this._componentsMap.indexOf(F$e);if(-1!==F$F)for(var F$a=this._typeComponentsIndices[F$F],F$o=0,F$E=F$a.length;F$o<F$E;F$a.length<F$E?F$E--:F$o++)this._removeComponent(F$F,F$o)},F$a.removeAllComponent=function(){for(var F$e=0,F$F=this._componentsMap.length;F$e<F$F;this._componentsMap.length<F$F?F$F--:F$e++)this.removeComponentsByType(this._componentsMap[F$e])},F$a._updateComponents=function(F$e){for(var F$F=0,F$a=this._components.length;F$F<F$a;F$F++){var F$o=this._components[F$F];!F$o.started&&(F$o._start(F$e),F$o.started=!0),F$o.enable&&F$o._update(F$e)}},F$a._lateUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._lateUpdate(F$e)}},F$a._preRenderUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._preRenderUpdate(F$e)}},F$a._postRenderUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._postRenderUpdate(F$e)}},F$F}(),F$VF=function(F$o){function F$e(){F$e.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new F$OF,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new F$_F(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}F$q(F$e,"laya.d3.core.material.BaseMaterial",F$o);var F$F=F$e.prototype;return F$D.imps(F$F,{"laya.d3.core.IClone":!0}),F$F._addShaderDefine=function(F$e){this._shaderDefineValue|=F$e},F$F._removeShaderDefine=function(F$e){this._shaderDefineValue&=~F$e},F$F._addDisablePublicShaderDefine=function(F$e){this._disablePublicShaderDefine|=F$e},F$F._removeDisablePublicShaderDefine=function(F$e){this._disablePublicShaderDefine&=~F$e},F$F._setBuffer=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F),this._values[F$e]=F$F},F$F._getBuffer=function(F$e){return this._values[F$e]},F$F._setMatrix4x4=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F?F$F.elements:null),this._values[F$e]=F$F},F$F._getMatrix4x4=function(F$e){return this._values[F$e]},F$F._setInt=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F),this._values[F$e]=F$F},F$F._getInt=function(F$e){return this._values[F$e]},F$F._setNumber=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F),this._values[F$e]=F$F},F$F._getNumber=function(F$e){return this._values[F$e]},F$F._setBool=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F),this._values[F$e]=F$F},F$F._getBool=function(F$e){return this._values[F$e]},F$F._setVector2=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F?F$F.elements:null),this._values[F$e]=F$F},F$F._getVector2=function(F$e){return this._values[F$e]},F$F._setColor=function(F$e,F$F){this._shaderValues.setValue(F$e,F$F?F$F.elements:null),this._values[F$e]=F$F},F$F._getColor=function(F$e){return this._values[F$e]},F$F._setTexture=function(F$e,F$F){var F$a=this._values[F$e];this._values[F$e]=F$F,this._shaderValues.setValue(F$e,F$F),0<this.referenceCount&&(F$a&&F$a._removeReference(),F$F&&F$F._addReference())},F$F._getTexture=function(F$e){return this._values[F$e]},F$F._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},F$F._getShader=function(F$e,F$F,F$a){var F$o=(F$e|F$F)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(F$o,F$a,this._shaderDefineValue),this._shader},F$F._setRenderStateBlendDepth=function(){var F$e=F$G.mainContext;switch(F$A.setDepthMask(F$e,this.depthWrite),0===this.depthTest?F$A.setDepthTest(F$e,!1):(F$A.setDepthTest(F$e,!0),F$A.setDepthFunc(F$e,this.depthTest)),this.blend){case 0:F$A.setBlend(F$e,!1);break;case 1:F$A.setBlend(F$e,!0),F$A.setBlendFunc(F$e,this.srcBlend,this.dstBlend);break;case 2:F$A.setBlend(F$e,!0)}},F$F._setRenderStateFrontFace=function(F$e,F$F){var F$a=F$G.mainContext,F$o=0;switch(this.cull){case 0:F$A.setCullFace(F$a,!1);break;case 1:F$A.setCullFace(F$a,!0),F$o=F$e?F$F&&F$F._isFrontFaceInvert?2305:2304:F$F&&F$F._isFrontFaceInvert?2304:2305,F$A.setFrontFace(F$a,F$o);break;case 2:F$A.setCullFace(F$a,!0),F$o=F$e?F$F&&F$F._isFrontFaceInvert?2304:2305:F$F&&F$F._isFrontFaceInvert?2305:2304,F$A.setFrontFace(F$a,F$o)}},F$F.onAsynLoaded=function(F$e,F$F,F$a){var F$o=F$F[0],F$E=F$F[1];switch(F$o.version){case"LAYAMATERIAL:01":var F$s=0,F$Y=0,F$_=F$o.props;for(var F$R in F$_)switch(F$R){case"vectors":var F$H=F$_[F$R];for(F$s=0,F$Y=F$H.length;F$s<F$Y;F$s++){var F$g=F$H[F$s],F$n=F$g.value;switch(F$n.length){case 2:this[F$g.name]=new F$sF(F$n[0],F$n[1]);break;case 3:this[F$g.name]=new F$YF(F$n[0],F$n[1],F$n[2]);break;case 4:this[F$g.name]=new F$_F(F$n[0],F$n[1],F$n[2],F$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var F$O=F$_[F$R];for(F$s=0,F$Y=F$O.length;F$s<F$Y;F$s++){var F$q=F$O[F$s],F$I=F$q.path;F$I&&(this[F$q.name]=F$j.getRes(F$E[F$I]))}break;case"defines":var F$l=F$_[F$R];for(F$s=0,F$Y=F$l.length;F$s<F$Y;F$s++){var F$P=this._shaderCompile.getMaterialDefineByName(F$l[F$s]);this._addShaderDefine(F$P)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[F$R]=F$_[F$R];break;case"renderQueue":switch(F$_[F$R]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[F$R]=F$_[F$R]}break;case"LAYAMATERIAL:02":for(F$R in F$_=F$o.props)switch(F$R){case"vectors":for(F$s=0,F$Y=(F$H=F$_[F$R]).length;F$s<F$Y;F$s++)switch((F$n=(F$g=F$H[F$s]).value).length){case 2:this[F$g.name]=new F$sF(F$n[0],F$n[1]);break;case 3:this[F$g.name]=new F$YF(F$n[0],F$n[1],F$n[2]);break;case 4:this[F$g.name]=new F$_F(F$n[0],F$n[1],F$n[2],F$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(F$s=0,F$Y=(F$O=F$_[F$R]).length;F$s<F$Y;F$s++)(F$I=(F$q=F$O[F$s]).path)&&(this[F$q.name]=F$j.getRes(F$E[F$I]));break;case"defines":for(F$s=0,F$Y=(F$l=F$_[F$R]).length;F$s<F$Y;F$s++)F$P=this._shaderCompile.getMaterialDefineByName(F$l[F$s]),this._addShaderDefine(F$P);break;default:this[F$R]=F$_[F$R]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},F$F._addReference=function(){F$o.prototype._addReference.call(this);for(var F$e=0,F$F=this._values.length;F$e<F$F;F$e++){var F$a=this._values[F$e];F$a&&F$a instanceof laya.d3.resource.BaseTexture&&F$a._addReference()}},F$F._removeReference=function(){F$o.prototype._removeReference.call(this);for(var F$e=0,F$F=this._values.length;F$e<F$F;F$e++){var F$a=this._values[F$e];F$a&&F$a instanceof laya.d3.resource.BaseTexture&&F$a._removeReference()}},F$F.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},F$F.setShaderName=function(F$e){var F$F=F$TF.nameKey.getID(F$e);if(-1===F$F)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=F$LF._preCompileShader[F$F]},F$F.cloneTo=function(F$e){var F$F=F$e;F$F.name=this.name,F$F.cull=this.cull,F$F.blend=this.blend,F$F.srcBlend=this.srcBlend,F$F.dstBlend=this.dstBlend,F$F.srcBlendRGB=this.srcBlendRGB,F$F.dstBlendRGB=this.dstBlendRGB,F$F.srcBlendAlpha=this.srcBlendAlpha,F$F.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(F$F.blendConstColor),F$F.blendEquation=this.blendEquation,F$F.blendEquationRGB=this.blendEquationRGB,F$F.blendEquationAlpha=this.blendEquationAlpha,F$F.depthTest=this.depthTest,F$F.depthWrite=this.depthWrite,F$F.renderQueue=this.renderQueue,F$F._shader=this._shader,F$F._disablePublicShaderDefine=this._disablePublicShaderDefine,F$F._shaderDefineValue=this._shaderDefineValue;var F$a,F$o=0,F$E=F$F._shaderValues;F$F._shaderValues.data.length=this._shaderValues.data.length;var F$s=this._values.length,F$Y=F$F._values;for(F$o=0,F$a=F$Y.length=F$s;F$o<F$a;F$o++){var F$_=this._values[F$o];if(F$_)if("number"==typeof F$_)F$Y[F$o]=F$_,F$E.data[F$o]=F$_;else if("number"==typeof F$_&&Math.floor(F$_)==F$_)F$Y[F$o]=F$_,F$E.data[F$o]=F$_;else if("boolean"==typeof F$_)F$Y[F$o]=F$_,F$E.data[F$o]=F$_;else if(F$_ instanceof laya.d3.math.Vector2){var F$R=F$Y[F$o]||(F$Y[F$o]=new F$sF);F$_.cloneTo(F$R),F$E.data[F$o]=F$R.elements}else if(F$_ instanceof laya.d3.math.Vector3){var F$H=F$Y[F$o]||(F$Y[F$o]=new F$YF);F$_.cloneTo(F$H),F$E.data[F$o]=F$H.elements}else if(F$_ instanceof laya.d3.math.Vector4){var F$g=F$Y[F$o]||(F$Y[F$o]=new F$_F);F$_.cloneTo(F$g),F$E.data[F$o]=F$g.elements}else if(F$_ instanceof laya.d3.math.Matrix4x4){var F$n=F$Y[F$o]||(F$Y[F$o]=new F$eF);F$_.cloneTo(F$n),F$E.data[F$o]=F$n.elements}else F$_ instanceof laya.d3.resource.BaseTexture&&(F$Y[F$o]=F$_,F$E.data[F$o]=F$_)}},F$F.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$I(0,F$F,"alphaTestValue",function(){return this._getNumber(0)},function(F$e){this._setNumber(0,F$e)}),F$I(0,F$F,"alphaTest",function(){return this._alphaTest},function(F$e){(this._alphaTest=F$e)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),F$e.__init__=function(){F$e.SHADERDEFINE_ALPHATEST=F$e.shaderDefines.registerDefine("ALPHATEST")},F$e.RENDERQUEUE_OPAQUE=2e3,F$e.RENDERQUEUE_ALPHATEST=2450,F$e.RENDERQUEUE_TRANSPARENT=3e3,F$e.CULL_NONE=0,F$e.CULL_FRONT=1,F$e.CULL_BACK=2,F$e.BLEND_DISABLE=0,F$e.BLEND_ENABLE_ALL=1,F$e.BLEND_ENABLE_SEPERATE=2,F$e.BLENDPARAM_ZERO=0,F$e.BLENDPARAM_ONE=1,F$e.BLENDPARAM_SRC_COLOR=768,F$e.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,F$e.BLENDPARAM_DST_COLOR=774,F$e.BLENDPARAM_ONE_MINUS_DST_COLOR=775,F$e.BLENDPARAM_SRC_ALPHA=770,F$e.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,F$e.BLENDPARAM_DST_ALPHA=772,F$e.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,F$e.BLENDPARAM_SRC_ALPHA_SATURATE=776,F$e.BLENDEQUATION_ADD=0,F$e.BLENDEQUATION_SUBTRACT=1,F$e.BLENDEQUATION_REVERSE_SUBTRACT=2,F$e.DEPTHTEST_OFF=0,F$e.DEPTHTEST_NEVER=512,F$e.DEPTHTEST_LESS=513,F$e.DEPTHTEST_EQUAL=514,F$e.DEPTHTEST_LEQUAL=515,F$e.DEPTHTEST_GREATER=516,F$e.DEPTHTEST_NOTEQUAL=517,F$e.DEPTHTEST_GEQUAL=518,F$e.DEPTHTEST_ALWAYS=519,F$e.SHADERDEFINE_ALPHATEST=1,F$e.ALPHATESTVALUE=0,F$n(F$e,["shaderDefines",function(){return this.shaderDefines=new F$gF}]),F$e}(F$P),F$GF=function(F$e){function F$F(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,F$F.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}F$q(F$F,"laya.d3.resource.BaseTexture",F$P);var F$a=F$F.prototype;return F$I(0,F$a,"width",function(){return this._width}),F$I(0,F$a,"repeat",function(){return this._repeat},function(F$e){if(this._repeat!==F$e&&(this._repeat=F$e,this._source)){var F$F=F$G.mainContext;F$A.bindTexture(F$F,this._type,this._source),F$M.isPOT(this._width,this._height)&&this._repeat?(F$F.texParameteri(this._type,10242,10497),F$F.texParameteri(this._type,10243,10497)):(F$F.texParameteri(this._type,10242,33071),F$F.texParameteri(this._type,10243,33071))}}),F$I(0,F$a,"height",function(){return this._height}),F$I(0,F$a,"magFifter",function(){return this._magFifter},function(F$e){(this._magFifter=F$e)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(F$e)}),F$I(0,F$a,"wrapModeV",function(){return this._wrapModeV}),F$I(0,F$a,"size",function(){return this._size}),F$I(0,F$a,"wrapModeU",function(){return this._wrapModeU}),F$I(0,F$a,"mipmap",function(){return this._mipmap},function(F$e){this._mipmap=F$e,this._mipmap!=F$e&&this._conchTexture&&this._conchTexture.setMipMap(F$e)}),F$I(0,F$a,"minFifter",function(){return this._minFifter},function(F$e){this._minFifter=F$e,this._minFifter!=F$e&&this._conchTexture&&this._conchTexture.setMinFifter(F$e)}),F$I(0,F$a,"format",function(){return this._format}),F$I(0,F$a,"source",function(){return this.activeResource(),this._source}),F$I(0,F$a,"defaulteTexture",function(){return F$CF.grayTexture}),F$F.WARPMODE_REPEAT=0,F$F.WARPMODE_CLAMP=1,F$F}(),F$AF=function(F$e){function F$F(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,F$F.__super.call(this),this._boundingBoxCorners=F$o(8,null)}F$q(F$F,"laya.d3.resource.models.BaseMesh",F$P);var F$a=F$F.prototype;return F$a._getPositions=function(){throw new Error("未Override,请重载该属性！")},F$a._generateBoundingObject=function(){this._boundingSphere=new F$te(new F$YF,0),F$te.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new F$ie(new F$YF,new F$YF),F$ie.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},F$a.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},F$a.getRenderElement=function(F$e){throw new Error("未Override,请重载该属性！")},F$I(0,F$a,"subMeshCount",function(){return this._subMeshCount}),F$I(0,F$a,"boundingBox",function(){return this._boundingBox}),F$I(0,F$a,"boundingBoxCorners",function(){return this._boundingBoxCorners}),F$I(0,F$a,"boundingSphere",function(){return this._boundingSphere}),F$F}(),F$UF=(function(F$e){function F$F(){F$F.__super.call(this)}F$q(F$F,"laya.d3.component.Script",F$yF);var F$a=F$F.prototype;F$a.onTriggerEnter=function(F$e){},F$a.onTriggerExit=function(F$e){},F$a.onTriggerStay=function(F$e){},F$I(0,F$a,"isSingleton",function(){return F$F._isSingleton}),F$F._isSingleton=!1}(),function(F$e){function F$F(F$e){this._owner=null,this._sharedMesh=null,F$F.__super.call(this),this._owner=F$e}F$q(F$F,"laya.d3.core.MeshFilter",F$e);var F$a=F$F.prototype;return F$a._sharedMeshLoaded=function(){this.event("loaded")},F$a._destroy=function(){F$e.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},F$I(0,F$a,"sharedMesh",function(){return this._sharedMesh},function(F$e){var F$F=this._sharedMesh;F$F&&F$F._removeReference(),(this._sharedMesh=F$e)._addReference(),this.event("meshchanged",[this,F$F,F$e]),F$e.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),F$I(0,F$a,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),F$I(0,F$a,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),F$I(0,F$a,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),F$I(0,F$a,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),F$F}(F$MF)),F$rF=function(F$e){function F$F(F$e){F$F.__super.call(this,F$e),F$e.meshFilter.on("meshchanged",this,this._onMeshChanged)}F$q(F$F,"laya.d3.core.MeshRender",F$DF);var F$a=F$F.prototype;return F$a._onMeshChanged=function(F$e,F$F,F$a){F$a.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:F$a.once("loaded",this,this._onMeshLoaed)},F$a._onMeshLoaed=function(F$e,F$F){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},F$a._calculateBoundingSphereByInitSphere=function(F$e){var F$F=NaN,F$a=this._owner.transform,F$o=F$a.scale.elements,F$E=Math.abs(F$o[0]),F$s=Math.abs(F$o[1]),F$Y=Math.abs(F$o[2]);F$F=F$s<=F$E&&F$Y<=F$E?F$E:F$Y<=F$s?F$s:F$Y,F$YF.transformCoordinate(F$e.center,F$a.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=F$e.radius*F$F},F$a._calculateBoundBoxByInitCorners=function(F$e){for(var F$F=this._owner.transform.worldMatrix,F$a=0;F$a<8;F$a++)F$YF.transformCoordinate(F$e[F$a],F$F,F$DF._tempBoundBoxCorners[F$a]);F$ie.createfromPoints(F$DF._tempBoundBoxCorners,this._boundingBox)},F$a._calculateBoundingSphere=function(){var F$e=this._owner.meshFilter.sharedMesh;null==F$e||null==F$e.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(F$e.boundingSphere)},F$a._calculateBoundingBox=function(){var F$e=this._owner.meshFilter.sharedMesh;null==F$e||null==F$e.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(F$e.boundingBoxCorners)},F$a._renderUpdate=function(F$e){var F$F=this._owner.transform;if(F$F){this._setShaderValueMatrix4x4(0,F$F.worldMatrix);var F$a=this._owner.getProjectionViewWorldMatrix(F$e);this._setShaderValueMatrix4x4(1,F$a)}else this._setShaderValueMatrix4x4(0,F$eF.DEFAULT),this._setShaderValueMatrix4x4(1,F$e);return F$jF.debugMode&&this._renderRenderableBoundBox(),!0},F$F}(),F$ZF=function(F$F){function F$o(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,F$o.__super.call(this),this._renderState=new F$f,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new F$OF,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new F$Fe,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new F$YF(.7,.7,.7),this.ambientColor=new F$YF(.212,.227,.259),F$G.shaderHighPrecision&&this.addShaderDefine(F$LF.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}F$q(F$o,"laya.d3.core.scene.Scene",F$F);var F$e=F$o.prototype;return F$D.imps(F$e,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),F$e._setUrl=function(F$e){this._url=F$e},F$e._getGroup=function(){return this._group},F$e._setGroup=function(F$e){this._group=F$e},F$e._display=function(){F$D.stage._scenes.push(this),F$D.stage._scenes.sort(F$o._sortScenes);for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++){var F$a=this._childs[F$e];F$a.active&&F$a._activeHierarchy()}},F$e._unDisplay=function(){var F$e=F$D.stage._scenes;F$e.splice(F$e.indexOf(this),1);for(var F$F=0,F$a=this._childs.length;F$F<F$a;F$F++){var F$o=this._childs[F$F];F$o.active&&F$o._inActiveHierarchy()}},F$e._addChild3D=function(F$e){F$e.transform._onWorldTransform(),F$e._setBelongScene(this),this.displayedInStage&&F$e.active&&F$e._activeHierarchy()},F$e._removeChild3D=function(F$e){F$e.transform.parent=null,this.displayedInStage&&F$e.active&&F$e._inActiveHierarchy(),F$e._setUnBelongScene()},F$e.initOctree=function(F$e,F$F,F$a,F$o,F$E){void 0===F$E&&(F$E=6),this.treeSize=new F$YF(F$e,F$F,F$a),this.treeLevel=F$E,this.treeRoot=new F$i(this,0),this.treeRoot.init(F$o,this.treeSize)},F$e._prepareUpdateToRenderState=function(F$e,F$F){F$F.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,F$F.scene=this},F$e._prepareSceneToRender=function(F$e){var F$F=this._lights.length;if(0<F$F)for(var F$a=0,F$o=0;F$o<F$F&&!(this._lights[F$o]._prepareToScene(F$e)&&++F$a>=this._enableLightCount);F$o++);},F$e._updateChilds=function(F$e){for(var F$F=0,F$a=this._childs.length;F$F<F$a;++F$F)this._childs[F$F]._update(F$e)},F$e._preRenderScene=function(F$e,F$F,F$a){var F$o,F$E=F$F._viewMatrix,F$s=F$F._projectionMatrix,F$Y=F$F._projectionViewMatrix,F$_=0,F$R=F$F.camera;for(F$R.useOcclusionCulling?this.treeRoot?F$ae.renderObjectCullingOctree(F$a,this,F$R,F$E,F$s,F$Y):F$ae.renderObjectCulling(F$a,this,F$R,F$E,F$s,F$Y):F$ae.renderObjectCullingNoBoundFrustum(this,F$R,F$E,F$s,F$Y),F$_=0,F$o=this._quenes.length;F$_<F$o;F$_++)this._quenes[F$_]&&this._quenes[F$_]._preRender(F$F)},F$e._clear=function(F$e,F$F){var F$a=F$F._viewport,F$o=F$F.camera,F$E=F$a.x,F$s=F$o.renderTargetSize.height-F$a.y-F$a.height,F$Y=F$a.width,F$_=F$a.height;F$e.viewport(F$E,F$s,F$Y,F$_);var F$R=256,F$H=F$o.renderTarget;switch(F$o.clearFlag){case 0:var F$g=F$o.clearColor;if(F$g){F$e.enable(3089),F$e.scissor(F$E,F$s,F$Y,F$_);var F$n=F$g.elements;F$e.clearColor(F$n[0],F$n[1],F$n[2],F$n[3]),F$R|=16384}if(F$H)switch(F$g||(F$R=16384),F$H.depthStencilFormat){case 33189:F$R|=256;break;case 36168:F$R|=1024;break;case 34041:F$R|=256,F$R|=1024}F$e.clear(F$R),F$g&&F$e.disable(3089);break;case 1:case 2:if(F$H)switch(F$R=16384,F$H.depthStencilFormat){case 33189:F$R|=256;break;case 36168:F$R|=1024;break;case 34041:F$R|=256,F$R|=1024}F$e.clear(F$R);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},F$e._renderScene=function(F$e,F$F){var F$a,F$o,F$E=F$F.camera,F$s=0;for(F$s=0;F$s<2;F$s++)(F$o=this._quenes[F$s])&&(F$E.renderTarget?F$o._render(F$F,!0):F$o._render(F$F,!1));if(1===F$E.clearFlag){var F$Y=F$E.sky;F$Y&&(F$A.setCullFace(F$e,!1),F$A.setDepthFunc(F$e,515),F$A.setDepthMask(F$e,!1),F$Y._render(F$F),F$A.setDepthFunc(F$e,513),F$A.setDepthMask(F$e,!0))}for(F$s=2,F$a=this._quenes.length;F$s<F$a;F$s++)(F$o=this._quenes[F$s])&&(F$o._sortAlpha(F$F.camera.transform.position),F$E.renderTarget?F$o._render(F$F,!0):F$o._render(F$F,!1))},F$e._set3DRenderConfig=function(F$e){F$e.disable(3042),F$A._blend=!1,F$e.blendFunc(770,771),F$A._sFactor=770,F$A._dFactor=771,F$e.disable(2929),F$A._depthTest=!1,F$e.enable(2884),F$A._cullFace=!0,F$e.depthMask(1),F$A._depthMask=!0,F$e.frontFace(2304),F$A._frontFace=2304},F$e._set2DRenderConfig=function(F$e){F$A.setBlend(F$e,!0),F$A.setBlendFunc(F$e,1,771),F$A.setDepthTest(F$e,!1),F$A.setCullFace(F$e,!1),F$A.setDepthMask(F$e,!0),F$A.setFrontFace(F$e,2305),F$e.viewport(0,0,F$g.width,F$g.height)},F$e._parseCustomProps=function(F$e,F$F,F$a,F$o){var F$E=F$o.customProps.lightmaps,F$s=F$E.length,F$Y=this._lightmaps;F$Y.length=F$s;for(var F$_=0;F$_<F$s;F$_++)F$Y[F$_]=F$j.getRes(F$F[F$E[F$_].replace(".exr",".png")]);this.setlightmaps(F$Y);var F$R=F$o.customProps.ambientColor;F$R&&(this.ambientColor=new F$YF(F$R[0],F$R[1],F$R[2]));var F$H=F$o.customProps.fogColor;F$H&&(this.fogColor=new F$YF(F$H[0],F$H[1],F$H[2]))},F$e._addLight=function(F$e){this._lights.indexOf(F$e)<0&&this._lights.push(F$e)},F$e._removeLight=function(F$e){var F$F=this._lights.indexOf(F$e);0<=F$F&&this._lights.splice(F$F,1)},F$e._updateScene=function(){var F$e=this._renderState;this._prepareUpdateToRenderState(F$G.mainContext,F$e),this._updateComponents(F$e),this._updateChilds(F$e),this._lateUpdateComponents(F$e),this._time+=F$e.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},F$e._updateSceneConch=function(){var F$e=this._renderState;this._prepareUpdateToRenderState(F$G.mainContext,F$e),this._updateComponents(F$e),this._lateUpdateComponents(F$e),this._prepareSceneToRender(F$e);for(var F$F=0,F$a=this._cameraPool.length;F$F<F$a;F$F++){var F$o=this._cameraPool[F$F];(F$e.camera=F$o)._prepareCameraToRender()}},F$e._preRenderShadow=function(F$e,F$F,F$a,F$o,F$E){this.treeRoot?F$ae.renderShadowObjectCullingOctree(this,F$F,F$a,F$o,F$E):F$ae.renderShadowObjectCulling(this,F$F,F$a,F$o,F$E);for(var F$s=0,F$Y=F$a.length;F$s<F$Y;F$s++)F$a[F$s]&&F$a[F$s]._preRender(F$e)},F$e._renderShadowMap=function(F$e,F$F,F$a){var F$o=this.parallelSplitShadowMaps[0];F$o._calcAllLightCameraInfo(F$a);var F$E,F$s,F$Y,F$_=F$o.PSSMNum;if(this._preRenderShadow(F$F,F$o._lightCulling,F$o._shadowQuenes,F$o._lightVPMatrix[0],F$_),this.addShaderDefine(F$qF.SHADERDEFINE_CAST_SHADOW),1<F$_)for(var F$R=0;F$R<F$_;F$R++)F$E=F$o.getRenderTarget(F$R+1),F$o.beginRenderTarget(F$R+1),F$e.clearColor(1,1,1,1),F$e.clear(16640),F$e.viewport(0,0,F$E.width,F$E.height),F$F.camera=F$Y=F$o.getLightCamera(F$R),F$Y._prepareCameraToRender(),F$Y._prepareCameraViewProject(F$Y.viewMatrix,F$Y.projectionMatrix),F$F._projectionViewMatrix=F$o._lightVPMatrix[F$R+1],(F$s=F$o._shadowQuenes[F$R])._preRender(F$F),F$s._renderShadow(F$F,!1),F$o.endRenderTarget(F$R+1);else F$E=F$o.getRenderTarget(1),F$o.beginRenderTarget(1),F$e.clearColor(1,1,1,1),F$e.clear(16640),F$e.viewport(0,0,F$E.width,F$E.height),F$F.camera=F$Y=F$o.getLightCamera(0),F$Y._prepareCameraToRender(),F$Y._prepareCameraViewProject(F$Y.viewMatrix,F$Y.projectionMatrix),F$F._projectionViewMatrix=F$o._lightVPMatrix[0],(F$s=F$o._shadowQuenes[0])._preRender(F$F),F$s._renderShadow(F$F,!0),F$o.endRenderTarget(1);this.removeShaderDefine(F$qF.SHADERDEFINE_CAST_SHADOW)},F$e.addTreeNode=function(F$e){this.treeRoot.addTreeNode(F$e)},F$e.removeTreeNode=function(F$e){this.treeSize&&F$e._treeNode&&F$e._treeNode.removeObject(F$e)},F$e.setlightmaps=function(F$e){this._lightmaps=F$e;for(var F$F=0,F$a=this._renderableSprite3Ds.length;F$F<F$a;F$F++)this._renderableSprite3Ds[F$F]._render._applyLightMapParams()},F$e.getlightmaps=function(){return this._lightmaps},F$e.addChildAt=function(F$e,F$F){if(!(F$e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(F$e&&F$e.__className));if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),0<=F$F&&F$F<=this._childs.length){if(F$e._parent===this){var F$a=this.getChildIndex(F$e);this._childs.splice(F$a,1),this._childs.splice(F$F,0,F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,F$F)),this._childChanged()}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$F,0,F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,F$F),(F$e.parent=this)._addChild3D(F$e);return F$e}throw new Error("appendChildAt:The index is out of bounds")},F$e.addChild=function(F$e){if(!(F$e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),F$e._parent===this){var F$F=this.getChildIndex(F$e);F$F!==this._childs.length-1&&(this._childs.splice(F$F,1),this._childs.push(F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1)),this._childChanged())}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1),(F$e.parent=this)._childChanged(),this._addChild3D(F$e);return F$e},F$e.removeChildAt=function(F$e){var F$F=this.getChildAt(F$e);return F$F&&(this._removeChild3D(F$F),this._childs.splice(F$e,1),this.conchModel&&this.conchModel.removeChild(F$F.conchModel),F$F.parent=null),F$F},F$e.removeChildren=function(F$e,F$F){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=2147483647),this._childs&&0<this._childs.length){var F$a=this._childs;if(0===F$e&&F$s<=F$F){var F$o=F$a;this._childs=F$H.ARRAY_EMPTY}else F$o=F$a.splice(F$e,F$F-F$e);for(var F$E=0,F$s=F$o.length;F$E<F$s;F$E++)this._removeChild3D(F$o[F$E]),F$o[F$E].parent=null,this.conchModel&&this.conchModel.removeChild(F$o[F$E].conchModel)}return this},F$e.addFrustumCullingObject=function(F$e){this.treeRoot?this.addTreeNode(F$e):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(F$e):this._cullingRenders[this._cullingRendersLength]=F$e,F$e._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},F$e.removeFrustumCullingObject=function(F$e){if(this.treeRoot)this.removeTreeNode(F$e);else{this._cullingRendersLength--;var F$F=F$e._indexInSceneFrustumCullingObjects;if(F$F!==this._cullingRendersLength){var F$a=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[F$F]=F$a)._indexInSceneFrustumCullingObjects=F$F,F$e._indexInSceneFrustumCullingObjects=-1}}},F$e.getRenderQueue=function(F$e){return F$e<3e3?this._quenes[1]||(this._quenes[1]=new F$W(this)):this._quenes[2]||(this._quenes[2]=new F$W(this))},F$e.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new F$W(this)},F$e.addShaderDefine=function(F$e){this._shaderDefineValue|=F$e},F$e.removeShaderDefine=function(F$e){this._shaderDefineValue&=~F$e},F$e.addScript=function(F$e){return this._addComponent(F$e)},F$e.getScriptByType=function(F$e,F$F){return void 0===F$F&&(F$F=0),this._getComponentByType(F$e,F$F)},F$e.getScriptsByType=function(F$e,F$F){this._getComponentsByType(F$e,F$F)},F$e.getScriptByIndex=function(F$e){return this._getComponentByIndex(F$e)},F$e.removeScriptByType=function(F$e,F$F){void 0===F$F&&(F$F=0),this._removeComponentByType(F$e,F$F)},F$e.removeScriptsByType=function(F$e){this._removeComponentByType(F$e)},F$e.removeAllScript=function(){this._removeAllComponent()},F$e.render=function(F$e,F$F,F$a){(F$l._context.ctx._renderKey=0)<this._childs.length&&F$e.addRenderObject(this)},F$e.renderSubmit=function(){var F$e=F$G.mainContext,F$F=this._renderState;this._set3DRenderConfig(F$e),this._prepareSceneToRender(this._renderState);var F$a,F$o=0,F$E=0;if(F$jF.debugMode||F$i.debugMode)for(F$o=0,F$E=this._cameraPool.length;F$o<F$E;F$o++)F$a=this._cameraPool[F$o],F$jF._debugPhasorSprite.begin(1,F$a),F$a.activeInHierarchy&&F$a._renderCamera(F$e,F$F,this),F$jF._debugPhasorSprite.end();else for(F$o=0,F$E=this._cameraPool.length;F$o<F$E;F$o++)(F$a=this._cameraPool[F$o]).activeInHierarchy&&F$a._renderCamera(F$e,F$F,this);return this._set2DRenderConfig(F$e),1},F$e.onAsynLoaded=function(F$e,F$F,F$a){var F$o=F$F[0];if("Scene"!==F$o.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var F$E=F$F[1];F$PF._createNodeByJson(this,F$o,this,F$E),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),this.destroyed||(F$F.prototype.destroy.call(this,F$e),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,F$j.clearRes(this.url),this.loaded||F$jF._cancelLoadByUrl(this.url))},F$e.getRenderType=function(){return 0},F$e.releaseRender=function(){},F$e._addComponent=function(F$e){var F$F,F$a=this._componentsMap.indexOf(F$e);if(-1===F$a)F$F=[],this._componentsMap.push(F$e),this._typeComponentsIndices.push(F$F);else if(F$F=this._typeComponentsIndices[F$a],this._components[F$F[0]].isSingleton)throw new Error("无法单实例创建"+F$e+"组件，"+F$e+"组件已存在！");var F$o=F$E.getInstance(F$e);F$F.push(this._components.length),this._components.push(F$o);return F$o._initialize(this),F$o},F$e._removeComponent=function(F$e,F$F){var F$a=this._typeComponentsIndices[F$e],F$o=F$a[F$F],F$E=this._components[F$o];this._components.splice(F$o,1),F$a.splice(F$F,1),0===F$a.length&&(this._typeComponentsIndices.splice(F$e,1),this._componentsMap.splice(F$e,1));for(var F$s=0,F$Y=this._componentsMap.length;F$s<F$Y;F$s++)for(var F$_=(F$a=this._typeComponentsIndices[F$s]).length-1;0<=F$_;F$_--){var F$R=F$a[F$_];if(!(F$o<F$R))break;F$a[F$_]=--F$R}F$E._destroy()},F$e._getComponentByType=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a=this._componentsMap.indexOf(F$e);return-1===F$a?null:this._components[this._typeComponentsIndices[F$a][F$F]]},F$e._getComponentsByType=function(F$e,F$F){var F$a=this._componentsMap.indexOf(F$e);if(-1!==F$a){var F$o=this._typeComponentsIndices[F$a],F$E=F$o.length;F$F.length=F$E;for(var F$s=0;F$s<F$E;F$s++)F$F[F$s]=this._components[F$o[F$s]]}else F$F.length=0},F$e._getComponentByIndex=function(F$e){return this._components[F$e]},F$e._removeComponentByType=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a=this._componentsMap.indexOf(F$e);-1!==F$a&&this._removeComponent(F$a,F$F)},F$e._removeComponentsByType=function(F$e){var F$F=this._componentsMap.indexOf(F$e);if(-1!==F$F)for(var F$a=this._typeComponentsIndices[F$F],F$o=0,F$E=F$a.length;F$o<F$E;F$a.length<F$E?F$E--:F$o++)this._removeComponent(F$F,F$o)},F$e._removeAllComponent=function(){for(var F$e=0,F$F=this._componentsMap.length;F$e<F$F;this._componentsMap.length<F$F?F$F--:F$e++)this._removeComponentsByType(this._componentsMap[F$e])},F$e._updateComponents=function(F$e){for(var F$F=0,F$a=this._components.length;F$F<F$a;F$F++){var F$o=this._components[F$F];!F$o.started&&(F$o._start(F$e),F$o.started=!0),F$o.enable&&F$o._update(F$e)}},F$e._lateUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._lateUpdate(F$e)}},F$e._preRenderUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._preRenderUpdate(F$e)}},F$e._postRenderUpdateComponents=function(F$e){for(var F$F=0;F$F<this._components.length;F$F++){var F$a=this._components[F$F];!F$a.started&&(F$a._start(F$e),F$a.started=!0),F$a.enable&&F$a._postRenderUpdate(F$e)}},F$I(0,F$e,"_loaded",null,function(F$e){this.__loaded=F$e}),F$I(0,F$e,"fogColor",function(){return this._fogColor},function(F$e){this._fogColor=F$e,this._shaderValues.setValue(0,F$e.elements)}),F$I(0,F$e,"enableFog",function(){return this._enableFog},function(F$e){this._enableFog!==F$e&&((this._enableFog=F$e)?(this.addShaderDefine(F$LF.SHADERDEFINE_FOG),this.removeShaderDefine(F$LF.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(F$LF.SHADERDEFINE_FOG))}),F$I(0,F$e,"url",function(){return this._url}),F$I(0,F$e,"loaded",function(){return this.__loaded}),F$I(0,F$e,"enableDepthFog",function(){return this._enableDepthFog},function(F$e){this._enableDepthFog!=F$e&&((this._enableDepthFog=F$e)?(this.addShaderDefine(F$LF.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(F$LF.SHADERDEFINE_FOG)):this.removeShaderDefine(F$LF.SAHDERDEFINE_DEPTHFOG))}),F$I(0,F$e,"fogStart",function(){return this._fogStart},function(F$e){this._fogStart=F$e,this._shaderValues.setValue(1,F$e)}),F$I(0,F$e,"fogRange",function(){return this._fogRange},function(F$e){this._fogRange=F$e,this._shaderValues.setValue(2,F$e)}),F$I(0,F$e,"ambientColor",function(){return this._ambientColor},function(F$e){this._ambientColor=F$e,this._shaderValues.setValue(21,F$e.elements)}),F$I(0,F$e,"scene",function(){return this}),F$I(0,F$e,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),F$o._sortScenes=function(F$e,F$F){if(F$e.parent!==F$D.stage||F$F.parent!==F$D.stage)return F$e.parent!==F$D.stage&&F$F.parent!==F$D.stage?F$o._sortScenes(F$e.parent,F$F.parent):F$e.parent===F$D.stage?-1:1;var F$a=F$D.stage._childs;return F$a.indexOf(F$e)-F$a.indexOf(F$F)},F$o.load=function(F$e){return F$D.loader.create(F$e,null,null,F$o)},F$o.FOGCOLOR=0,F$o.FOGSTART=1,F$o.FOGRANGE=2,F$o.LIGHTDIRECTION=3,F$o.LIGHTDIRCOLOR=4,F$o.POINTLIGHTPOS=5,F$o.POINTLIGHTRANGE=6,F$o.POINTLIGHTATTENUATION=7,F$o.POINTLIGHTCOLOR=8,F$o.SPOTLIGHTPOS=9,F$o.SPOTLIGHTDIRECTION=10,F$o.SPOTLIGHTSPOT=11,F$o.SPOTLIGHTRANGE=12,F$o.SPOTLIGHTATTENUATION=13,F$o.SPOTLIGHTCOLOR=14,F$o.SHADOWDISTANCE=15,F$o.SHADOWLIGHTVIEWPROJECT=16,F$o.SHADOWMAPPCFOFFSET=17,F$o.SHADOWMAPTEXTURE1=18,F$o.SHADOWMAPTEXTURE2=19,F$o.SHADOWMAPTEXTURE3=20,F$o.AMBIENTCOLOR=21,F$o.TIME=22,F$o}(F$b),F$zF=function(F$e){function F$F(F$e){F$F.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new F$eF,this._shaderValues=new F$OF,this._colliders=[],this._id=++F$F._uniqueIDCounter,this._transform=new F$mF(this),this.name=F$e||"Sprite3D-"+F$F._nameNumberCounter++,this.layer=F$r.currentCreationLayer,this.active=!0}F$q(F$F,"laya.d3.core.Sprite3D",F$KF);var F$a=F$F.prototype;return F$D.imps(F$a,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),F$a._setUrl=function(F$e){this._url=F$e},F$a._getGroup=function(){return this._group},F$a._setGroup=function(F$e){this._group=F$e},F$a._addChild3D=function(F$e){F$e.transform.parent=this.transform,this._hierarchyAnimator&&(!F$e._hierarchyAnimator&&F$e._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$e,!0,[F$e.name])),this._scene&&(F$e._setBelongScene(this._scene),this._activeInHierarchy&&F$e._active&&F$e._activeHierarchy())},F$a._removeChild3D=function(F$e){F$e.transform.parent=null,this._scene&&(this._activeInHierarchy&&F$e._active&&F$e._inActiveHierarchy(),F$e._setUnBelongScene()),this._hierarchyAnimator&&(F$e._hierarchyAnimator==this._hierarchyAnimator&&F$e._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$e,!1,[F$e.name]))},F$a._parseBaseCustomProps=function(F$e){var F$F=this.transform.localPosition;F$e.translate?(F$F.fromArray(F$e.translate),F$F.x*=100,F$F.y*=100,F$F.z*=100):F$F.elements.fill(0),this.transform.localPosition=F$F;var F$a=this.transform.localRotation;F$e.rotation?F$a.fromArray(F$e.rotation):F$a.fromArray([0,0,0,-1]),this.transform.localRotation=F$a;var F$o=this.transform.localScale;F$e.scale?F$o.fromArray(F$e.scale):F$o.elements.fill(1),this.transform.localScale=F$o;var F$E=F$e.layer;null!=F$E&&(this.layer=F$r.getLayerByNumber(F$E))},F$a._parseCustomComponent=function(F$e,F$F,F$a){for(var F$o in F$a){var F$E=F$a[F$o];switch(F$o){case"Animator":var F$s=this.addComponent(Animator);if(F$E.avatarPath)F$s.avatar=F$j.getRes(F$F[F$E.avatarPath]);else{var F$Y=F$E.avatar;if(F$Y){F$s.avatar=F$j.getRes(F$F[F$Y.path]);var F$_=F$Y.linkSprites;F$_&&F$e.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[F$s,F$_])}}for(var F$R=F$E.clipPaths,F$H=F$R.length,F$g=0;F$g<F$H;F$g++)F$s.addClip(F$j.getRes(F$F[F$R[F$g]]));F$s.clip=F$j.getRes(F$F[F$R[0]]);var F$n=F$E.playOnWake;void 0!==F$n&&(F$s.playOnWake=F$n);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var F$O=this.addComponent(SphereCollider);F$O.isTrigger=F$E.isTrigger;var F$q=F$O.center;F$q.fromArray(F$E.center),F$O.center=F$q,F$O.radius=F$E.radius;break;case"BoxCollider":var F$I=this.addComponent(BoxCollider);F$I.isTrigger=F$E.isTrigger,F$I.center.fromArray(F$E.center);var F$l=F$I.size;F$l.fromArray(F$E.size),F$I.size=F$l;break;case"MeshCollider":this.addComponent(MeshCollider)}}},F$a._onRootNodeHierarchyLoaded=function(F$e,F$F){for(var F$a in F$F){for(var F$o=this,F$E=F$F[F$a],F$s=0,F$Y=F$E.length;F$s<F$Y;F$s++){var F$_=F$E[F$s];if(""===F$_)break;if(!(F$o=F$o.getChildByName(F$_)))break}F$o&&F$e.linkSprite3DToAvatarNode(F$a,F$o)}},F$a._setHierarchyAnimator=function(F$e,F$F){this._changeHierarchyAnimator(F$e);for(var F$a=0,F$o=this._childs.length;F$a<F$o;F$a++){var F$E=this._childs[F$a];F$E._hierarchyAnimator==F$F&&F$E._setHierarchyAnimator(F$e,F$F)}},F$a._clearHierarchyAnimator=function(F$e,F$F){this._changeHierarchyAnimator(F$F);for(var F$a=0,F$o=this._childs.length;F$a<F$o;F$a++){var F$E=this._childs[F$a];F$E._hierarchyAnimator==F$e&&F$E._clearHierarchyAnimator(F$e,F$F)}},F$a._getAnimatorToLinkSprite3D=function(F$e,F$F,F$a){var F$o=this.getComponentByType(Animator);if(F$o&&(F$o.avatar?F$o.avatar._version||F$e._setAnimatorToLinkAvatar(F$o,F$F):F$e._setAnimatorToLinkSprite3DNoAvatar(F$o,F$F,F$a)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){F$a.unshift(this._parent.name);var F$E=this._parent;F$E._hierarchyAnimator&&F$E._getAnimatorToLinkSprite3D(F$e,F$F,F$a)}},F$a._setAnimatorToLinkSprite3DNoAvatar=function(F$e,F$F,F$a){var F$o=0,F$E=0;for(F$o=0,F$E=F$e.getClipCount();F$o<F$E;F$o++)F$e._handleSpriteOwnersBySprite(F$o,F$F,F$a,this);for(F$o=0,F$E=this._childs.length;F$o<F$E;F$o++){var F$s=this._childs[F$o],F$Y=F$a.length;F$a.push(F$s.name),F$s._setAnimatorToLinkSprite3DNoAvatar(F$e,F$F,F$a),F$a.splice(F$Y,1)}},F$a._changeHierarchyAnimator=function(F$e){this._hierarchyAnimator=F$e},F$a._isLinkSpriteToAnimationNode=function(F$e,F$F,F$a){var F$o=F$e._avatarNodes.indexOf(F$F),F$E=F$e._cacheSpriteToNodesMap;if(F$a)this._transform.dummy=F$F.transform,F$e._cacheNodesToSpriteMap[F$o]=F$E.length,F$E.push(F$o);else{this._transform.dummy=null;var F$s=F$e._cacheNodesToSpriteMap[F$o];F$e._cacheNodesToSpriteMap[F$o]=null,F$E.splice(F$s,1)}},F$a._setBelongScene=function(F$e){this._scene=F$e;for(var F$F=0,F$a=this._childs.length;F$F<F$a;F$F++)this._childs[F$F]._setBelongScene(F$e)},F$a._setUnBelongScene=function(){this._scene=null;for(var F$e=0,F$F=this._childs.length;F$e<F$F;F$e++)this._childs[F$e]._setUnBelongScene()},F$a._activeHierarchy=function(){var F$e=0,F$F=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),F$e=0,F$F=this._colliders.length;F$e<F$F;F$e++)this._layer._addCollider(this._colliders[F$e]);for(this.event("activeinhierarchychanged",!0),F$e=0,F$F=this._childs.length;F$e<F$F;F$e++){var F$a=this._childs[F$e];F$a._active&&F$a._activeHierarchy()}},F$a._inActiveHierarchy=function(){var F$e=0,F$F=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),F$e=0,F$F=this._colliders.length;F$e<F$F;F$e++){var F$a=this._colliders[F$e];F$a._clearCollsionMap(),this._layer._removeCollider(F$a)}for(this.event("activeinhierarchychanged",!1),F$e=0,F$F=this._childs.length;F$e<F$F;F$e++){var F$o=this._childs[F$e];F$o._active&&F$o._inActiveHierarchy()}},F$a.addComponent=function(F$e){var F$F,F$a=this._componentsMap.indexOf(F$e);if(-1===F$a)F$F=[],this._componentsMap.push(F$e),this._typeComponentsIndices.push(F$F);else if(F$F=this._typeComponentsIndices[F$a],this._components[F$F[0]].isSingleton)throw new Error("无法单实例创建"+F$e+"组件，"+F$e+"组件已存在！");var F$o=F$E.getInstance(F$e);return F$F.push(this._components.length),this._components.push(F$o),F$o instanceof laya.d3.component.Script&&this._scripts.push(F$o),F$o._initialize(this),F$o},F$a._removeComponent=function(F$e,F$F){var F$a,F$o=0,F$E=this._typeComponentsIndices[F$e],F$s=F$E[F$F],F$Y=this._components[F$s];for(F$Y instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$Y),1),F$E.splice(F$F,1),0===F$E.length&&(this._typeComponentsIndices.splice(F$e,1),this._componentsMap.splice(F$e,1)),F$o=0,F$a=this._componentsMap.length;F$o<F$a;F$o++)for(var F$_=(F$E=this._typeComponentsIndices[F$o]).length-1;0<=F$_;F$_--){var F$R=F$E[F$_];if(!(F$s<F$R))break;F$E[F$_]=--F$R}F$Y._destroy()},F$a._clearSelfRenderObjects=function(){},F$a._addSelfRenderObjects=function(){},F$a._parseCustomProps=function(F$e,F$F,F$a,F$o){},F$a._updateChilds=function(F$e){var F$F=this._childs.length;if(0!==F$F)for(var F$a=0;F$a<F$F;++F$a)this._childs[F$a]._update(F$e)},F$a._getSortID=function(F$e,F$F){return 1e3*F$F.id+F$e._getVertexBuffer().vertexDeclaration.id},F$a._update=function(F$e){(F$e.owner=this)._activeInHierarchy&&(this._updateComponents(F$e),this._lateUpdateComponents(F$e),F$L.spriteCount++,this._childs.length&&this._updateChilds(F$e))},F$a.getProjectionViewWorldMatrix=function(F$e){return F$eF.multiply(F$e,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},F$a.loadHierarchy=function(F$e){this.addChild(laya.d3.core.Sprite3D.load(F$e))},F$a.addChildAt=function(F$e,F$F){if(!(F$e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),0<=F$F&&F$F<=this._childs.length){if(F$e._parent===this){var F$a=this.getChildIndex(F$e);this._childs.splice(F$a,1),this._childs.splice(F$F,0,F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,F$F)),this._childChanged()}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$F,0,F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,F$F),(F$e.parent=this)._addChild3D(F$e);return F$e}throw new Error("appendChildAt:The index is out of bounds")},F$a.addChild=function(F$e){if(!(F$e instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$e||this.destroyed||F$e===this)return F$e;if(F$e.zOrder&&this._set$P("hasZorder",!0),F$e._parent===this){var F$F=this.getChildIndex(F$e);F$F!==this._childs.length-1&&(this._childs.splice(F$F,1),this._childs.push(F$e),this.conchModel&&(this.conchModel.removeChild(F$e.conchModel),this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1)),this._childChanged())}else F$e.parent&&F$e.parent.removeChild(F$e),this._childs===F$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$e),this.conchModel&&this.conchModel.addChildAt(F$e.conchModel,this._childs.length-1),(F$e.parent=this)._childChanged(),this._addChild3D(F$e);return F$e},F$a.removeChildAt=function(F$e){var F$F=this.getChildAt(F$e);return F$F&&(this._removeChild3D(F$F),this._childs.splice(F$e,1),this.conchModel&&this.conchModel.removeChild(F$F.conchModel),F$F.parent=null),F$F},F$a.removeChildren=function(F$e,F$F){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=2147483647),this._childs&&0<this._childs.length){var F$a=this._childs;if(0===F$e&&F$s<=F$F){var F$o=F$a;this._childs=F$H.ARRAY_EMPTY}else F$o=F$a.splice(F$e,F$F-F$e);for(var F$E=0,F$s=F$o.length;F$E<F$s;F$E++)this._removeChild3D(F$o[F$E]),F$o[F$E].parent=null,this.conchModel&&this.conchModel.removeChild(F$o[F$E].conchModel)}return this},F$a.onAsynLoaded=function(F$e,F$F,F$a){var F$o=F$F[0];if("Sprite3D"!==F$o.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var F$E=F$F[1];F$PF._createNodeByJson(this,F$o,this,F$E),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$a.cloneTo=function(F$e){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var F$F=F$e;F$F.name=this.name,F$F._destroyed=this._destroyed,F$F.timer=this.timer,F$F._$P=this._$P,F$F.active=this._active;var F$a=F$F.transform.localPosition;this.transform.localPosition.cloneTo(F$a),F$F.transform.localPosition=F$a;var F$o=F$F.transform.localRotation;this.transform.localRotation.cloneTo(F$o),F$F.transform.localRotation=F$o;var F$E=F$F.transform.localScale;this.transform.localScale.cloneTo(F$E),F$F.transform.localScale=F$E,F$F.isStatic=this.isStatic;var F$s=0,F$Y=0;for(F$s=0,F$Y=this._componentsMap.length;F$s<F$Y;F$s++){var F$_=F$F.addComponent(this._componentsMap[F$s]);this._components[F$s]._cloneTo(F$_)}for(F$s=0,F$Y=this._childs.length;F$s<F$Y;F$s++)F$F.addChild(this._childs[F$s].clone());var F$R=F$F.getComponentByType(Animator);if(F$R){var F$H=F$R._linkSpritesData;if(F$H)for(var F$g in F$H){for(var F$n=F$H[F$g],F$O=F$F,F$q=0,F$I=F$n.length;F$q<F$I&&(F$O=F$O.getChildByName(F$n[F$q]));F$q++);if(F$O){var F$l=F$R._avatarNodeMap[F$g];F$O._isLinkSpriteToAnimationNode(F$R,F$l,!0)}}}},F$a.clone=function(){var F$e=new this.constructor;return this.cloneTo(F$e),F$e},F$a.destroy=function(F$e){if(void 0===F$e&&(F$e=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,F$e);var F$F,F$a=0;for(F$a=0,F$F=this._components.length;F$a<F$F;F$a++)this._components[F$a]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,F$j.clearRes(this.url),this.loaded||F$jF._cancelLoadByUrl(this.url)}},F$a._handleSpriteToAvatar=function(F$e,F$F){F$e._avatarNodes;var F$a=F$e._avatarNodeMap[this.name];F$a&&F$a.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(F$e,F$a,F$F)},F$a._setAnimatorToLinkAvatar=function(F$e,F$F){this._handleSpriteToAvatar(F$e,F$F);for(var F$a=0,F$o=this._childs.length;F$a<F$o;F$a++){this._childs[F$a]._setAnimatorToLinkAvatar(F$e,F$F)}},F$I(0,F$a,"activeInHierarchy",function(){return this._activeInHierarchy}),F$I(0,F$a,"_loaded",null,function(F$e){this.__loaded=F$e}),F$I(0,F$a,"active",function(){return this._active},function(F$e){this._active!==F$e&&(this._active=F$e,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(F$e?this._activeHierarchy():this._inActiveHierarchy()))}),F$I(0,F$a,"componentsCount",function(){return this._components.length}),F$I(0,F$a,"loaded",function(){return this.__loaded}),F$I(0,F$a,"id",function(){return this._id}),F$I(0,F$a,"url",function(){return this._url}),F$I(0,F$a,"layer",function(){return this._layer},function(F$e){if(this._layer!==F$e){if(!F$e)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var F$F=0,F$a=this._colliders.length;if(this._layer)for(F$F=0;F$F<F$a;F$F++)this._layer._removeCollider(this._colliders[F$F]);for(F$F=0;F$F<F$a;F$F++)F$e._addCollider(this._colliders[F$F])}this._layer=F$e,this.event("layerchanged",F$e)}}),F$I(0,F$a,"scene",function(){return this._scene}),F$I(0,F$a,"transform",function(){return this._transform}),F$F.instantiate=function(F$e,F$F,F$a,F$o,F$E){void 0===F$a&&(F$a=!0);var F$s=F$e.clone();F$F&&F$F.addChild(F$s);var F$Y=F$s.transform;if(F$a){var F$_=F$Y.worldMatrix;F$e.transform.worldMatrix.cloneTo(F$_),F$Y.worldMatrix=F$_}else F$o&&(F$Y.position=F$o),F$E&&(F$Y.rotation=F$E);return F$s},F$F.load=function(F$e){return F$D.loader.create(F$e,null,null,F$F)},F$F.WORLDMATRIX=0,F$F.MVPMATRIX=1,F$F._uniqueIDCounter=0,F$F._nameNumberCounter=0,F$F}(),F$TF=function(F$e){function F$g(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],F$g.__super.call(this),!F$e||!F$F)throw"Shader Error";this._id=++F$g._count,this._vs=F$e,this._ps=F$F,this._attributeMap=F$a,this._sceneUniformMap=F$o,this._cameraUniformMap=F$E,this._spriteUniformMap=F$s,this._materialUniformMap=F$Y,this._renderElementUniformMap=F$_,this._precompile=F$R,this._define=F$H,this._precompile&&F$g.extCompileObj&&F$g.extCompileFunc?F$g.extCompileFunc.call(F$g.extCompileObj,F$e,F$F,F$H):this.recreateResource()}F$q(F$g,"laya.d3.shader.Shader3D",F$a);var F$F=F$g.prototype;return F$F.recreateResource=function(){F$U.now();this._compile(),this.completeCreate(),this.memorySize=0},F$F.disposeResource=function(){F$G.mainContext.deleteShader(this._vshader),F$G.mainContext.deleteShader(this._pshader),F$G.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},F$F._compile=function(){if(!F$G.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var F$e=[this._vs,this._ps],F$F=F$G.mainContext;if(this._program=F$F.createProgram(),this._vshader=F$g._createShader(F$F,F$e[0],35633),this._pshader=F$g._createShader(F$F,F$e[1],35632),F$F.attachShader(this._program,this._vshader),F$F.attachShader(this._program,this._pshader),F$F.linkProgram(this._program),!F$l.isConchApp&&F$LF.debugMode&&!F$F.getProgramParameter(this._program,35714))throw F$F.getProgramInfoLog(this._program);var F$a,F$o=0,F$E=0,F$s=0;for(F$s=F$l.isConchApp?F$F.getProgramParameterEx(this._vs,this._ps,"",35721):F$F.getProgramParameter(this._program,35721),F$o=0;F$o<F$s;F$o++){var F$Y=null;F$a={vartype:"attribute",ivartype:0,attrib:F$Y=F$l.isConchApp?F$F.getActiveAttribEx(this._vs,this._ps,"",F$o):F$F.getActiveAttrib(this._program,F$o),location:F$F.getAttribLocation(this._program,F$Y.name),name:F$Y.name,type:F$Y.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(F$a)}var F$_=0;for(F$_=F$l.isConchApp?F$F.getProgramParameterEx(this._vs,this._ps,"",35718):F$F.getProgramParameter(this._program,35718),F$o=0;F$o<F$_;F$o++){var F$R=null;F$R=F$l.isConchApp?F$F.getActiveUniformEx(this._vs,this._ps,"",F$o):F$F.getActiveUniform(this._program,F$o),0<(F$a={vartype:"uniform",ivartype:1,attrib:F$Y,location:F$F.getUniformLocation(this._program,F$R.name),name:F$R.name,type:F$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$a.name=F$a.name.substr(0,F$a.name.length-3),F$a.isArray=!0,F$a.location=F$F.getUniformLocation(this._program,F$a.name)),this._uniformParams.push(F$a)}for(F$o=0,F$E=this._attributeParams.length;F$o<F$E;F$o++)(F$a=this._attributeParams[F$o]).indexOfParams=F$o,F$a.index=1,F$a.value=[F$a.location,null],F$a.codename=F$a.name,F$a.name=null!=this._attributeMap[F$a.codename]?this._attributeMap[F$a.codename]:F$a.codename,this._attributeParamsMap.push(F$a.name),this._attributeParamsMap.push(F$a),F$a._this=this,F$a.uploadedValue=[],F$a.fun=this._attribute;for(F$o=0,F$E=this._uniformParams.length;F$o<F$E;F$o++)switch((F$a=this._uniformParams[F$o]).indexOfParams=F$o,F$a.index=1,F$a.value=[F$a.location,null],F$a.codename=F$a.name,null!=this._sceneUniformMap[F$a.codename]?(F$a.name=this._sceneUniformMap[F$a.codename],this._sceneUniformParamsMap.push(F$a.name),this._sceneUniformParamsMap.push(F$a)):null!=this._cameraUniformMap[F$a.codename]?(F$a.name=this._cameraUniformMap[F$a.codename],this._cameraUniformParamsMap.push(F$a.name),this._cameraUniformParamsMap.push(F$a)):null!=this._spriteUniformMap[F$a.codename]?(F$a.name=this._spriteUniformMap[F$a.codename],this._spriteUniformParamsMap.push(F$a.name),this._spriteUniformParamsMap.push(F$a)):null!=this._materialUniformMap[F$a.codename]?(F$a.name=this._materialUniformMap[F$a.codename],this._materialUniformParamsMap.push(F$a.name),this._materialUniformParamsMap.push(F$a)):null!=this._renderElementUniformMap[F$a.codename]?(F$a.name=this._renderElementUniformMap[F$a.codename],this._renderElementUniformParamsMap.push(F$a.name),this._renderElementUniformParamsMap.push(F$a)):console.log("Shader:can't find uinform name:"+F$a.codename+" in shader file."),F$a._this=this,F$a.uploadedValue=[],F$a.type){case 5124:F$a.fun=F$a.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$a.fun=F$a.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$a.fun=F$a.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$a.fun=F$a.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$a.fun=F$a.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$a.fun=this._uniform_sampler2D;break;case 35680:F$a.fun=this._uniform_samplerCube;break;case 35676:F$a.fun=this._uniformMatrix4fv;break;case 35670:F$a.fun=this._uniform1i;break;case 35674:F$a.fun=this._uinformMatrix2fv;break;case 35675:F$a.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},F$F._attribute=function(F$e,F$F){var F$a=F$G.mainContext,F$o=F$_._enableAtributes,F$E=F$e.location;return F$o[F$E]||F$a.enableVertexAttribArray(F$E),F$a.vertexAttribPointer(F$E,F$F[0],F$F[1],F$F[2],F$F[3],F$F[4]),F$o[F$E]=F$_._bindVertexBuffer,1},F$F._uniform1f=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F?(F$G.mainContext.uniform1f(F$e.location,F$a[0]=F$F),1):0},F$F._uniform1fv=function(F$e,F$F){if(F$F.length<4){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$G.mainContext.uniform1fv(F$e.location,F$F),F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3],1):0}return F$G.mainContext.uniform1fv(F$e.location,F$F),1},F$F._uniform_vec2=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]?(F$G.mainContext.uniform2f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1]),1):0},F$F._uniform_vec2v=function(F$e,F$F){if(F$F.length<2){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$G.mainContext.uniform2fv(F$e.location,F$F),F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3],1):0}return F$G.mainContext.uniform2fv(F$e.location,F$F),1},F$F._uniform_vec3=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]?(F$G.mainContext.uniform3f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2]),1):0},F$F._uniform_vec3v=function(F$e,F$F){return F$G.mainContext.uniform3fv(F$e.location,F$F),1},F$F._uniform_vec4=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$G.mainContext.uniform4f(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3]),1):0},F$F._uniform_vec4v=function(F$e,F$F){return F$G.mainContext.uniform4fv(F$e.location,F$F),1},F$F._uniformMatrix2fv=function(F$e,F$F){return F$G.mainContext.uniformMatrix2fv(F$e.location,!1,F$F),1},F$F._uniformMatrix3fv=function(F$e,F$F){return F$G.mainContext.uniformMatrix3fv(F$e.location,!1,F$F),1},F$F._uniformMatrix4fv=function(F$e,F$F){return F$G.mainContext.uniformMatrix4fv(F$e.location,!1,F$F),1},F$F._uinformMatrix2fv=function(F$e,F$F){return F$G.mainContext.uniformMatrix2fv(F$e.location,!1,F$F),1},F$F._uinformMatrix3fv=function(F$e,F$F){return F$G.mainContext.uniformMatrix3fv(F$e.location,!1,F$F),1},F$F._uniform1i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F?(F$G.mainContext.uniform1i(F$e.location,F$a[0]=F$F),1):0},F$F._uniform1iv=function(F$e,F$F){return F$G.mainContext.uniform1iv(F$e.location,F$F),1},F$F._uniform_ivec2=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]?(F$G.mainContext.uniform2i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1]),1):0},F$F._uniform_ivec2v=function(F$e,F$F){return F$G.mainContext.uniform2iv(F$e.location,F$F),1},F$F._uniform_vec3i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]?(F$G.mainContext.uniform3i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2]),1):0},F$F._uniform_vec3vi=function(F$e,F$F){return F$G.mainContext.uniform3iv(F$e.location,F$F),1},F$F._uniform_vec4i=function(F$e,F$F){var F$a=F$e.uploadedValue;return F$a[0]!==F$F[0]||F$a[1]!==F$F[1]||F$a[2]!==F$F[2]||F$a[3]!==F$F[3]?(F$G.mainContext.uniform4i(F$e.location,F$a[0]=F$F[0],F$a[1]=F$F[1],F$a[2]=F$F[2],F$a[3]=F$F[3]),1):0},F$F._uniform_vec4vi=function(F$e,F$F){return F$G.mainContext.uniform4iv(F$e.location,F$F),1},F$F._uniform_sampler2D=function(F$e,F$F){var F$a=F$F.source||F$F.defaulteTexture.source,F$o=F$G.mainContext,F$E=F$e.uploadedValue;if(null!=F$E[0])return F$o.activeTexture(F$g._TEXTURES[F$E[0]]),F$a&&F$A.bindTexture(F$o,3553,F$a),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$E[0]=this._curActTexIndex,F$o.uniform1i(F$e.location,this._curActTexIndex),F$o.activeTexture(F$g._TEXTURES[this._curActTexIndex]),F$a&&F$A.bindTexture(F$o,3553,F$a),this._curActTexIndex++,1},F$F._uniform_samplerCube=function(F$e,F$F){var F$a=F$F.source||F$F.defaulteTexture.source,F$o=F$G.mainContext,F$E=F$e.uploadedValue;if(null!=F$E[0])return F$o.activeTexture(F$g._TEXTURES[F$E[0]]),F$a?F$A.bindTexture(F$o,34067,F$a):F$A.bindTexture(F$o,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$E[0]=this._curActTexIndex,F$o.uniform1i(F$e.location,this._curActTexIndex),F$o.activeTexture(F$g._TEXTURES[this._curActTexIndex]),F$a?F$A.bindTexture(F$o,34067,F$a):F$A.bindTexture(F$o,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},F$F._noSetValue=function(F$e){console.log("no....:"+F$e.name)},F$F.bind=function(){return F$a.activeShader=this,(F$a.bindShader=this).activeResource(),F$A.UseProgram(this._program)},F$F.uploadAttributes=function(F$e,F$F){for(var F$a,F$o,F$E=0,F$s=0,F$Y=this._attributeParamsMap.length;F$s<F$Y;F$s+=2)F$o=this._attributeParamsMap[F$s+1],null!=(F$a=F$e[this._attributeParamsMap[F$s]])&&(F$F&&F$F[F$o.name]&&F$F[F$o.name].bind(),F$E+=F$o.fun.call(this,F$o,F$a));F$L.shaderCall+=F$E},F$F.uploadAttributesX=function(F$e,F$F){for(var F$a,F$o,F$E=0,F$s=0,F$Y=this._attributeParamsMap.length;F$s<F$Y;F$s+=2)F$o=this._attributeParamsMap[F$s+1],null!=(F$a=F$e[this._attributeParamsMap[F$s]])&&(F$F._bind(),F$E+=F$o.fun.call(this,F$o,F$a));F$L.shaderCall+=F$E},F$F.uploadSceneUniforms=function(F$e){for(var F$F,F$a,F$o=0,F$E=0,F$s=this._sceneUniformParamsMap.length;F$E<F$s;F$E+=2)F$a=this._sceneUniformParamsMap[F$E+1],null!=(F$F=F$e[this._sceneUniformParamsMap[F$E]])&&(F$o+=F$a.fun.call(this,F$a,F$F));F$L.shaderCall+=F$o},F$F.uploadCameraUniforms=function(F$e){for(var F$F,F$a,F$o=0,F$E=0,F$s=this._cameraUniformParamsMap.length;F$E<F$s;F$E+=2)F$a=this._cameraUniformParamsMap[F$E+1],null!=(F$F=F$e[this._cameraUniformParamsMap[F$E]])&&(F$o+=F$a.fun.call(this,F$a,F$F));F$L.shaderCall+=F$o},F$F.uploadSpriteUniforms=function(F$e){for(var F$F,F$a,F$o=0,F$E=0,F$s=this._spriteUniformParamsMap.length;F$E<F$s;F$E+=2)F$a=this._spriteUniformParamsMap[F$E+1],null!=(F$F=F$e[this._spriteUniformParamsMap[F$E]])&&(F$o+=F$a.fun.call(this,F$a,F$F));F$L.shaderCall+=F$o},F$F.uploadMaterialUniforms=function(F$e){for(var F$F,F$a,F$o=0,F$E=0,F$s=this._materialUniformParamsMap.length;F$E<F$s;F$E+=2)F$a=this._materialUniformParamsMap[F$E+1],null!=(F$F=F$e[this._materialUniformParamsMap[F$E]])&&(F$o+=F$a.fun.call(this,F$a,F$F));F$L.shaderCall+=F$o},F$F.uploadRenderElementUniforms=function(F$e){for(var F$F,F$a,F$o=0,F$E=0,F$s=this._renderElementUniformParamsMap.length;F$E<F$s;F$E+=2)F$a=this._renderElementUniformParamsMap[F$E+1],null!=(F$F=F$e[this._renderElementUniformParamsMap[F$E]])&&(F$o+=F$a.fun.call(this,F$a,F$F));F$L.shaderCall+=F$o},F$g.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return new F$g(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H)},F$g.addInclude=function(F$e,F$F){F$y.addInclude(F$e,F$F)},F$g._createShader=function(F$e,F$F,F$a){var F$o=F$e.createShader(F$a);if(F$e.shaderSource(F$o,F$F),F$e.compileShader(F$o),F$LF.debugMode&&!F$e.getShaderParameter(F$o,35713))throw F$e.getShaderInfoLog(F$o);return F$o},F$g.PERIOD_RENDERELEMENT=0,F$g.PERIOD_MATERIAL=1,F$g.PERIOD_SPRITE=2,F$g.PERIOD_CAMERA=3,F$g.PERIOD_SCENE=4,F$g._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],F$g._count=0,F$g._preCompile=!1,F$g.extCompileFunc=null,F$g.extCompileObj=null,F$n(F$g,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new F$B}]),F$g}(),F$pF=function(F$_){function F$R(){this._transformUV=null,F$R.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new F$YF(.6,.6,.6)),this._setColor(10,new F$YF(1,1,1)),this._setColor(11,new F$_F(1,1,1,8)),this._setColor(12,new F$YF(1,1,1)),this._setColor(7,new F$_F(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new F$_F(1,1,0,0)),this.renderMode=1}F$q(F$R,"laya.d3.core.material.StandardMaterial",F$_);var F$e=F$R.prototype;return F$e.disableLight=function(){this._addDisablePublicShaderDefine(F$LF.SHADERDEFINE_POINTLIGHT|F$LF.SHADERDEFINE_SPOTLIGHT|F$LF.SHADERDEFINE_DIRECTIONLIGHT)},F$e.disableFog=function(){this._addDisablePublicShaderDefine(F$LF.SHADERDEFINE_FOG)},F$e.onAsynLoaded=function(F$e,F$F,F$a){var F$o=F$F[0];if(F$o.version)F$_.prototype.onAsynLoaded.call(this,F$e,F$F,F$a);else{var F$E=F$F[1],F$s=F$o.props;for(var F$Y in F$s)this[F$Y]=F$s[F$Y];F$R._parseStandardMaterial(F$E,this,F$o),this._endLoaded()}},F$e.cloneTo=function(F$e){F$_.prototype.cloneTo.call(this,F$e);var F$F=F$e;this._transformUV&&(F$F._transformUV=this._transformUV.clone())},F$I(0,F$e,"ambientColor",function(){return this._getColor(9)},function(F$e){this._setColor(9,F$e)}),F$I(0,F$e,"ambientTexture",function(){return this._getTexture(5)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,F$e)}),F$I(0,F$e,"renderMode",null,function(F$e){switch(F$e){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$R.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(F$e)}),F$I(0,F$e,"reflectColor",function(){return this._getColor(12)},function(F$e){this._setColor(12,F$e)}),F$I(0,F$e,"tilingOffset",function(){return this._getColor(15)},function(F$e){if(F$e){var F$F=F$e.elements;1!=F$F[0]||1!=F$F[1]||0!=F$F[2]||0!=F$F[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,F$e)}),F$I(0,F$e,"albedo",function(){return this._getColor(7)},function(F$e){this._setColor(7,F$e)}),F$I(0,F$e,"diffuseColor",function(){return this._getColor(10)},function(F$e){this._setColor(10,F$e)}),F$I(0,F$e,"albedoColor",function(){return this._getColor(7)},function(F$e){this._setColor(7,F$e)}),F$I(0,F$e,"specularColor",function(){return this._getColor(11)},function(F$e){this._setColor(11,F$e)}),F$I(0,F$e,"diffuseTexture",function(){return this._getTexture(1)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,F$e)}),F$I(0,F$e,"normalTexture",function(){return this._getTexture(2)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,F$e)}),F$I(0,F$e,"specularTexture",function(){return this._getTexture(3)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,F$e)}),F$I(0,F$e,"emissiveTexture",function(){return this._getTexture(4)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,F$e)}),F$I(0,F$e,"reflectTexture",function(){return this._getTexture(6)},function(F$e){F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,F$e)}),F$I(0,F$e,"transformUV",function(){return this._transformUV},function(F$e){this._transformUV=F$e,this._setMatrix4x4(13,F$e.matrix),F$e?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,F$e.matrix.elements,0)}),F$R.__init__=function(){F$R.SHADERDEFINE_DIFFUSEMAP=F$R.shaderDefines.registerDefine("DIFFUSEMAP"),F$R.SHADERDEFINE_NORMALMAP=F$R.shaderDefines.registerDefine("NORMALMAP"),F$R.SHADERDEFINE_SPECULARMAP=F$R.shaderDefines.registerDefine("SPECULARMAP"),F$R.SHADERDEFINE_EMISSIVEMAP=F$R.shaderDefines.registerDefine("EMISSIVEMAP"),F$R.SHADERDEFINE_AMBIENTMAP=F$R.shaderDefines.registerDefine("AMBIENTMAP"),F$R.SHADERDEFINE_REFLECTMAP=F$R.shaderDefines.registerDefine("REFLECTMAP"),F$R.SHADERDEFINE_UVTRANSFORM=F$R.shaderDefines.registerDefine("UVTRANSFORM"),F$R.SHADERDEFINE_TILINGOFFSET=F$R.shaderDefines.registerDefine("TILINGOFFSET"),F$R.SHADERDEFINE_ADDTIVEFOG=F$R.shaderDefines.registerDefine("ADDTIVEFOG")},F$R.load=function(F$e){return F$D.loader.create(F$e,null,null,F$R)},F$R._parseStandardMaterial=function(F$e,F$F,F$a){var F$o=F$a.customProps,F$E=F$o.ambientColor;F$F.ambientColor=new F$YF(F$E[0],F$E[1],F$E[2]);var F$s=F$o.diffuseColor;F$F.diffuseColor=new F$YF(F$s[0],F$s[1],F$s[2]);var F$Y=F$o.specularColor;F$F.specularColor=new F$_F(F$Y[0],F$Y[1],F$Y[2],F$Y[3]);var F$_=F$o.reflectColor;F$F.reflectColor=new F$YF(F$_[0],F$_[1],F$_[2]);var F$R=F$o.albedoColor;F$R&&(F$F.albedo=new F$_F(F$R[0],F$R[1],F$R[2],F$R[3]));var F$H=F$o.diffuseTexture.texture2D;F$H&&(F$F.diffuseTexture=F$j.getRes(F$e[F$H]));var F$g=F$o.normalTexture.texture2D;F$g&&(F$F.normalTexture=F$j.getRes(F$e[F$g]));var F$n=F$o.specularTexture.texture2D;F$n&&(F$F.specularTexture=F$j.getRes(F$e[F$n]));var F$O=F$o.emissiveTexture.texture2D;F$O&&(F$F.emissiveTexture=F$j.getRes(F$e[F$O]));var F$q=F$o.ambientTexture.texture2D;F$q&&(F$F.ambientTexture=F$j.getRes(F$e[F$q]));var F$I=F$o.reflectTexture.texture2D;F$I&&(F$F.reflectTexture=F$j.getRes(F$e[F$I]))},F$R.RENDERMODE_OPAQUE=1,F$R.RENDERMODE_OPAQUEDOUBLEFACE=2,F$R.RENDERMODE_CUTOUT=3,F$R.RENDERMODE_CUTOUTDOUBLEFACE=4,F$R.RENDERMODE_TRANSPARENT=13,F$R.RENDERMODE_TRANSPARENTDOUBLEFACE=14,F$R.RENDERMODE_ADDTIVE=15,F$R.RENDERMODE_ADDTIVEDOUBLEFACE=16,F$R.RENDERMODE_DEPTHREAD_TRANSPARENT=5,F$R.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,F$R.RENDERMODE_DEPTHREAD_ADDTIVE=7,F$R.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,F$R.RENDERMODE_NONDEPTH_TRANSPARENT=9,F$R.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,F$R.RENDERMODE_NONDEPTH_ADDTIVE=11,F$R.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,F$R.SHADERDEFINE_DIFFUSEMAP=0,F$R.SHADERDEFINE_NORMALMAP=0,F$R.SHADERDEFINE_SPECULARMAP=0,F$R.SHADERDEFINE_EMISSIVEMAP=0,F$R.SHADERDEFINE_AMBIENTMAP=0,F$R.SHADERDEFINE_REFLECTMAP=0,F$R.SHADERDEFINE_UVTRANSFORM=0,F$R.SHADERDEFINE_TILINGOFFSET=0,F$R.SHADERDEFINE_ADDTIVEFOG=0,F$R.DIFFUSETEXTURE=1,F$R.NORMALTEXTURE=2,F$R.SPECULARTEXTURE=3,F$R.EMISSIVETEXTURE=4,F$R.AMBIENTTEXTURE=5,F$R.REFLECTTEXTURE=6,F$R.ALBEDO=7,F$R.UVANIAGE=8,F$R.MATERIALAMBIENT=9,F$R.MATERIALDIFFUSE=10,F$R.MATERIALSPECULAR=11,F$R.MATERIALREFLECT=12,F$R.UVMATRIX=13,F$R.UVAGE=14,F$R.TILINGOFFSET=15,F$n(F$R,["defaultMaterial",function(){var F$e=new F$R;return F$e.lock=!0,this.defaultMaterial=F$e},"shaderDefines",function(){return this.shaderDefines=new F$gF(F$VF.shaderDefines)}]),F$R}(F$VF),F$JF=function(F$e){function F$Y(F$e,F$F,F$a,F$o,F$E){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===F$a&&(F$a=35044),void 0===F$o&&(F$o=!1),F$Y.__super.call(this),this._indexType=F$e,this._indexCount=F$F,this._bufferUsage=F$a,this._bufferType=34963,this._canRead=F$o;var F$s;if("ushort"==F$e)this._indexTypeByteCount=2;else{if("ubyte"!=F$e)throw new Error("unidentification index type.");this._indexTypeByteCount=1}F$s=this._indexTypeByteCount*F$F,this._byteLength=F$s,this._bind(),F$_._gl.bufferData(this._bufferType,F$s,this._bufferUsage),this.uri=F$E,F$o?("ushort"==F$e?this._buffer=new Uint16Array(F$F):"ubyte"==F$e&&(this._buffer=new Uint8Array(F$F)),this.memorySize=2*F$s):this.memorySize=F$s}F$q(F$Y,"laya.d3.graphics.IndexBuffer3D",F$e);var F$F=F$Y.prototype;return F$F.setData=function(F$e,F$F,F$a,F$o){void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=4294967295);var F$E=0;if("ushort"==this._indexType?(F$E=2,0===F$a&&4294967295===F$o||(F$e=new Uint16Array(F$e.buffer,F$a*F$E,F$o))):"ubyte"==this._indexType&&(F$E=1,0===F$a&&4294967295===F$o||(F$e=new Uint8Array(F$e.buffer,F$a*F$E,F$o))),this._bind(),F$_._gl.bufferSubData(this._bufferType,F$F*F$E,F$e),this._canRead)if(0!==F$F||0!==F$a||4294967295!==F$o){var F$s=this._buffer.length-F$F;F$s<F$o&&(F$o=F$s);for(var F$Y=0;F$Y<F$o;F$Y++)this._buffer[F$F+F$Y]=F$e[F$Y]}else this._buffer=F$e},F$F.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$F.disposeResource=function(){F$e.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},F$I(0,F$F,"indexType",function(){return this._indexType}),F$I(0,F$F,"indexTypeByteCount",function(){return this._indexTypeByteCount}),F$I(0,F$F,"indexCount",function(){return this._indexCount}),F$I(0,F$F,"canRead",function(){return this._canRead}),F$Y.INDEXTYPE_UBYTE="ubyte",F$Y.INDEXTYPE_USHORT="ushort",F$Y.create=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$a&&(F$a=35044),void 0===F$o&&(F$o=!1),new F$Y(F$e,F$F,F$a,F$o,F$E)},F$Y}(F$_),F$kF=function(F$s){function F$Y(F$e,F$F,F$a,F$o,F$E){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===F$o&&(F$o=!1),F$Y.__super.call(this),this._vertexDeclaration=F$e,this._vertexCount=F$F,this._bufferUsage=F$a,this._bufferType=34962,this._canRead=F$o,this.uri=F$E,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*F$F,this._bind(),F$_._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),F$o&&(this._buffer=new Float32Array(this._byteLength/4))}F$q(F$Y,"laya.d3.graphics.VertexBuffer3D",F$s);var F$e=F$Y.prototype;return F$e.bindWithIndexBuffer=function(F$e){F$e&&F$e._bind(),this._bind()},F$e.setData=function(F$e,F$F,F$a,F$o){if(void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=4294967295),0===F$a&&4294967295===F$o||(F$e=new Float32Array(F$e.buffer,4*F$a,F$o)),this._bind(),F$_._gl.bufferSubData(this._bufferType,4*F$F,F$e),this._canRead)if(0!==F$F||0!==F$a||4294967295!==F$o){var F$E=this._buffer.length-F$F;F$E<F$o&&(F$o=F$E);for(var F$s=0;F$s<F$o;F$s++)this._buffer[F$F+F$s]=F$e[F$s]}else this._buffer=F$e},F$e.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$e.disposeResource=function(){for(var F$e=F$G.mainContext,F$F=this._vertexDeclaration.getVertexElements(),F$a=F$_._enableAtributes,F$o=0,F$E=F$F.length;F$o<F$E;F$o++)F$a[F$o]===this._glBuffer&&(F$e.disableVertexAttribArray(F$o),F$a[F$o]=null);F$s.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},F$I(0,F$e,"vertexDeclaration",function(){return this._vertexDeclaration}),F$I(0,F$e,"vertexCount",function(){return this._vertexCount}),F$I(0,F$e,"canRead",function(){return this._canRead}),F$Y.create=function(F$e,F$F,F$a,F$o,F$E){return void 0===F$a&&(F$a=35044),void 0===F$o&&(F$o=!1),new F$Y(F$e,F$F,F$a,F$o,F$E)},F$Y}(F$_),F$dF=function(F$e){function F$y(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,F$y.__super.call(this),this._type=3553}F$q(F$y,"laya.d3.resource.DataTexture2D",F$GF);var F$F=F$y.prototype;return F$F.genDebugMipmaps=function(){var F$e=[];return F$e.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),F$e.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),F$e.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),F$e.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),F$e.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),F$e.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),F$e.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),F$e.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),F$e.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),F$e.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),F$e},F$F._onTextureLoaded=function(F$e){},F$F._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var F$e=F$G.mainContext,F$F=this._source=F$e.createTexture(),F$a=this._width,F$o=this._height,F$E=F$A.curBindTexTarget,F$s=F$A.curBindTexValue,F$Y=!1;if(F$A.bindTexture(F$e,this._type,F$F),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var F$_=0;F$e.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var F$R=0;F$R<this._mipmaps.length;F$R++){if(this._mipmaps[F$R].byteLength!=F$H*F$g*4)throw"mipmap size error  level:"+F$R;F$e.texSubImage2D(this._type,0,F$y.simLodRect[F$_++],F$y.simLodRect[F$_++],F$y.simLodRect[F$_++],F$y.simLodRect[F$_++],6408,5121,new Uint8Array(this._mipmaps[F$R]))}this.minFifter=9729,this.magFifter=9729}else{var F$H=this._width,F$g=this._height;for(F$_=0,F$e.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),F$R=0;F$R<this._mipmaps.length;F$R++){if(this._mipmaps[F$R].byteLength!=F$H*F$g*4)throw"mipmap size error  level:"+F$R;F$e.texImage2D(this._type,F$R,6408,F$H,F$g,0,6408,5121,new Uint8Array(this._mipmaps[F$R])),(F$H/=2)<1&&(F$H=1),(F$g/=2)<1&&(F$g=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&F$e.pixelStorei(F$e.UNPACK_ALIGNMENT,1),F$e.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var F$n=0,F$O=!1,F$q=!1;this._buffer.byteLength==4*F$a*F$o?(F$n=6408,F$O=!0):this._buffer.byteLength==3*F$a*F$o?(F$n=6407,F$q=!0):F$n=this._format,F$O||F$q?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),F$q&&F$e.pixelStorei(F$e.UNPACK_ALIGNMENT,1),F$e.texImage2D(this._type,0,F$n,F$a,F$o,0,F$n,5121,this._buffer)):F$e&&F$n==F$e.ALPHA?(F$e.texImage2D(3553,0,F$n,F$a,F$o,0,F$n,F$e.UNSIGNED_BYTE,this._buffer),F$Y=!0):0!=F$n&&(F$e.compressedTexImage2D(3553,0,F$n,F$a,F$o,0,this._buffer),F$Y=!0)}var F$I=this._minFifter,F$l=this._magFifter,F$P=0==this._wrapModeU?10497:33071,F$j=0==this._wrapModeV?10497:33071,F$$=F$M.isPOT(F$a,F$o);F$$?(this._mipmap||this._mipmaps?-1!==F$I||(F$I=9987):-1!==F$I||(F$I=9729),-1!==F$l||(F$l=9729),F$e.texParameteri(this._type,10241,F$I),F$e.texParameteri(this._type,10240,F$l),F$e.texParameteri(this._type,10242,F$P),F$e.texParameteri(this._type,10243,F$j),this._mipmap&&F$e.generateMipmap(this._type)):(-1!==F$I||(F$I=9729),-1!==F$l||(F$l=9729),F$e.texParameteri(this._type,10241,F$I),F$e.texParameteri(this._type,10240,F$l),F$e.texParameteri(this._type,10242,33071),F$e.texParameteri(this._type,10243,33071)),F$E&&F$s&&F$A.bindTexture(F$e,F$E,F$s),this.memorySize=F$Y?this._buffer.length:F$$?F$a*F$o*4*(1+1/3):F$a*F$o*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},F$F.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},F$F.onAsynLoaded=function(F$e,F$F,F$a){var F$o;F$a&&(F$o=F$a[0].call(this,F$F)),F$o&&(this._width=F$o.width,this._height=F$o.height,this._buffer=F$o.data),this._src=F$e,this._size=new F$lF(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},F$F.getPixels=function(){return new Uint8Array(this._buffer)},F$F.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(F$G.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},F$I(0,F$F,"src",function(){return this._src}),F$y.create=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){if(void 0===F$o&&(F$o=9729),void 0===F$E&&(F$E=9729),void 0===F$s&&(F$s=!0),!F$e||F$e.byteLength<F$F*F$a*4)throw"DataTexture2D create error";var F$_=new F$y;return F$_.uri=F$Y,F$_._buffer=F$e,F$_._width=F$F,F$_._height=F$a,F$_._mipmap=F$s,F$_._magFifter=F$o,F$_._minFifter=F$E,F$_._size=new F$lF(F$_._width,F$_._height),F$_._conchTexture?alert("怎么给runtime传递datatexture数据"):F$_.activeResource(),F$_},F$y.load=function(F$e,F$F,F$a,F$o,F$E){if(void 0===F$F&&(F$F=0),void 0===F$a&&(F$a=0),void 0===F$o&&(F$o=9729),void 0===F$E&&(F$E=9729),"mipmaps"===F$v.getFileExtension(F$e)){var F$s=F$D.loader.create(F$e,null,null,F$y,[function(F$e){this._mipmaps=[];var F$F=new Uint32Array(F$e);this._width=F$F[0];var F$a=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,F$a=1024),this._width!=F$a)throw"现在只支持512x256的环境贴图。当前的是"+F$F[0];this._height=F$F[1];for(var F$o=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,F$E=this._height,F$s=8;;){var F$Y=F$o*F$E*4;if(F$s+F$Y>F$e.byteLength)throw"load mipmaps data size error ";var F$_=new Uint8Array(F$e,F$s,F$Y);if(this._mipmaps.push(F$_),F$s+=F$Y,1==F$o&&1==F$E)break;(F$o/=2)<1&&(F$o=1),(F$E/=2)<1&&(F$E=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){F$s.simLodInfo=new Float32Array(40);for(var F$Y=0;F$Y<F$s.simLodInfo.length;)F$s.simLodInfo[F$Y]=(F$y.simLodRect[F$Y]+.5)/1024,F$Y++,F$s.simLodInfo[F$Y]=(F$y.simLodRect[F$Y]+.5)/256,F$Y++,F$s.simLodInfo[F$Y]=Math.max(F$y.simLodRect[F$Y]-1,.1)/1024,F$Y++,F$s.simLodInfo[F$Y]=Math.max(F$y.simLodRect[F$Y]-1.5,.1)/256,F$Y++}return F$s}if("number"==typeof F$F)return F$D.loader.create(F$e,null,null,F$y,[function(F$e){return this._width=F$F,this._height=F$a,this._buffer=F$e,null}]);if("function"==typeof F$F)return F$D.loader.create(F$e,null,null,F$y,[F$F]);throw new Error("unknown params.")},F$y.lodasatlas=!1,F$n(F$y,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),F$y}(),F$wF=function(F$e){function F$F(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,F$F.__super.call(this)}F$q(F$F,"laya.d3.resource.models.PrimitiveMesh",F$AF);var F$a=F$F.prototype;return F$D.imps(F$a,{"laya.d3.core.render.IRenderable":!0}),F$a._getVertexBuffer=function(F$e){return void 0===F$e&&(F$e=0),0===F$e?this._vertexBuffer:null},F$a._getVertexBuffers=function(){return null},F$a._getIndexBuffer=function(){return this._indexBuffer},F$a._getPositions=function(){var F$e,F$F=[],F$a=this._vertexBuffer.vertexDeclaration.getVertexElements(),F$o=0;for(F$o=0;F$o<F$a.length;F$o++){var F$E=F$a[F$o];if("vector3"===F$E.elementFormat&&0===F$E.elementUsage){F$e=F$E;break}}var F$s=this._vertexBuffer.getData();for(F$o=0;F$o<F$s.length;F$o+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var F$Y=F$o+F$e.offset/4,F$_=new F$YF(F$s[F$Y+0],F$s[F$Y+1],F$s[F$Y+2]);F$F.push(F$_)}return F$F},F$a.getRenderElement=function(F$e){return this},F$a.getRenderElementsCount=function(){return 1},F$a.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},F$a._beforeRender=function(F$e){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$a._render=function(F$e){F$G.mainContext.drawElements(4,this._numberIndices,5123,0),F$L.drawCall++,F$L.trianglesFaces+=this._numberIndices/3},F$I(0,F$a,"_vertexBufferCount",function(){return 1}),F$I(0,F$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$F}(),F$SF=function(F$e){function F$F(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,F$F.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}F$q(F$F,"laya.d3.resource.models.Mesh",F$AF);var F$a=F$F.prototype;return F$a._getPositions=function(){var F$e,F$F,F$a,F$o,F$E,F$s=[],F$Y=0,F$_=0,F$R=0;if(0!==this._vertexBuffers.length){var F$H=this._vertexBuffers.length;for(F$Y=0;F$Y<F$H;F$Y++){for(F$a=(F$e=this._vertexBuffers[F$Y]).vertexDeclaration.getVertexElements(),F$_=0;F$_<F$a.length;F$_++)if("vector3"===(F$o=F$a[F$_]).elementFormat&&0===F$o.elementUsage){F$F=F$o;break}for(F$E=F$e.getData(),F$_=0;F$_<F$E.length;F$_+=F$e.vertexDeclaration.vertexStride/4)F$R=F$_+F$F.offset/4,F$s.push(new F$YF(F$E[F$R+0],F$E[F$R+1],F$E[F$R+2]))}}else{var F$g=this._subMeshes.length;for(F$Y=0;F$Y<F$g;F$Y++){for(F$a=(F$e=this._subMeshes[F$Y]._getVertexBuffer()).vertexDeclaration.getVertexElements(),F$_=0;F$_<F$a.length;F$_++)if("vector3"===(F$o=F$a[F$_]).elementFormat&&0===F$o.elementUsage){F$F=F$o;break}for(F$E=F$e.getData(),F$_=0;F$_<F$E.length;F$_+=F$e.vertexDeclaration.vertexStride/4)F$R=F$_+F$F.offset/4,F$s.push(new F$YF(F$E[F$R+0],F$E[F$R+1],F$E[F$R+2]))}}return F$s},F$a._setSubMeshes=function(F$e){this._subMeshes=F$e,this._subMeshCount=F$e.length;for(var F$F=0;F$F<this._subMeshCount;F$F++)F$e[F$F]._indexInMesh=F$F;this._positions=this._getPositions(),this._generateBoundingObject()},F$a.onAsynLoaded=function(F$e,F$F,F$a){var F$o=F$F[0],F$E=F$F[1];F$fe.read(F$o,this,this._materials,this._subMeshes,F$E),this.completeCreate(),this._endLoaded()},F$a.getSubMesh=function(F$e){return this._subMeshes[F$e]},F$a.getSubMeshCount=function(){return this._subMeshes.length},F$a.getRenderElementsCount=function(){return this._subMeshes.length},F$a.getRenderElement=function(F$e){return this._subMeshes[F$e]},F$a.disposeResource=function(){for(var F$e=0;F$e<this._subMeshes.length;F$e++)this._subMeshes[F$e].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},F$I(0,F$a,"materials",function(){return this._materials.slice()}),F$I(0,F$a,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),F$F.load=function(F$e){return F$D.loader.create(F$e,null,null,F$F)},F$F}(),F$CF=(function(F$e){function F$H(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===F$a&&(F$a=6408),void 0===F$o&&(F$o=5121),void 0===F$E&&(F$E=33189),void 0===F$s&&(F$s=!1),void 0===F$Y&&(F$Y=!1),void 0===F$_&&(F$_=-1),void 0===F$R&&(F$R=-1),F$H.__super.call(this),this._type=3553,this._width=F$e,this._height=F$F,this._size=new F$lF(F$e,F$F),this._surfaceFormat=F$a,this._surfaceType=F$o,this._depthStencilFormat=F$E,F$l.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=F$s,this._repeat=F$Y,this._minFifter=F$_,this._magFifter=F$R,this.activeResource(),this._alreadyResolved=!0}F$q(F$H,"laya.d3.resource.RenderTexture",F$GF);var F$F=F$H.prototype;F$F.recreateResource=function(){var F$e=F$G.mainContext;this._frameBuffer=F$e.createFramebuffer(),this._source=F$e.createTexture();var F$F=F$A.curBindTexTarget,F$a=F$A.curBindTexValue;F$A.bindTexture(F$e,this._type,this._source),F$e.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var F$o=this._minFifter,F$E=this._magFifter,F$s=this._repeat?10497:33071;if(F$M.isPOT(this._width,this._height)?(this._mipmap?-1!==F$o||(F$o=9987):-1!==F$o||(F$o=9729),-1!==F$E||(F$E=9729),F$e.texParameteri(this._type,10241,F$o),F$e.texParameteri(this._type,10240,F$E),F$e.texParameteri(this._type,10242,F$s),F$e.texParameteri(this._type,10243,F$s),this._mipmap&&F$e.generateMipmap(this._type)):(-1!==F$o||(F$o=9729),-1!==F$E||(F$E=9729),F$e.texParameteri(this._type,10241,F$o),F$e.texParameteri(this._type,10240,F$E),F$e.texParameteri(this._type,10242,33071),F$e.texParameteri(this._type,10243,33071)),F$F&&F$a&&F$A.bindTexture(F$e,F$F,F$a),F$e.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=F$e.createRenderbuffer(),F$e.bindRenderbuffer(36161,this._depthStencilBuffer),F$e.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),F$e.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:F$e.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$e.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$e.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$e.framebufferTexture2D(36160,36064,3553,this._source,0),F$e.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},F$F.start=function(){F$G.mainContext.bindFramebuffer(36160,this.frameBuffer),(F$H._currentRenderTarget=this)._alreadyResolved=!1},F$F.end=function(){F$G.mainContext.bindFramebuffer(36160,null),F$H._currentRenderTarget=null,this._alreadyResolved=!0},F$F.getData=function(F$e,F$F,F$a,F$o){var F$E=F$G.mainContext;if(F$E.bindFramebuffer(36160,this._frameBuffer),!(36053===F$E.checkFramebufferStatus(36160)))return F$E.bindFramebuffer(36160,null),null;var F$s=new Uint8Array(this._width*this._height*4);return F$E.readPixels(F$e,F$F,F$a,F$o,this._surfaceFormat,this._surfaceType,F$s),F$E.bindFramebuffer(36160,null),F$s},F$F.disposeResource=function(){if(this._frameBuffer){var F$e=F$G.mainContext;F$e.deleteTexture(this._source),F$e.deleteFramebuffer(this._frameBuffer),F$e.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},F$I(0,F$F,"surfaceFormat",function(){return this._surfaceFormat}),F$I(0,F$F,"surfaceType",function(){return this._surfaceType}),F$I(0,F$F,"depthStencilFormat",function(){return this._depthStencilFormat}),F$I(0,F$F,"source",function(){return this._alreadyResolved?F$D.superGet(F$GF,this,"source"):null}),F$I(0,F$F,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$I(0,F$F,"frameBuffer",function(){return this._frameBuffer}),F$H._currentRenderTarget=null}(),function(F$e){function F$F(F$e){this._color=null,this._pixels=null,F$F.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new F$lF(this.width,this.height),this._color=F$e,this._pixels=new Uint8Array([255*F$e.x,255*F$e.y,255*F$e.z,255*F$e.w]),this.uri="SolidColorTexture2D_"+this.id}F$q(F$F,"laya.d3.resource.SolidColorTexture2D",F$GF);var F$a=F$F.prototype;return F$a._createWebGlTexture=function(){var F$e=F$G.mainContext,F$F=this._source=F$e.createTexture(),F$a=this._width,F$o=this._height,F$E=F$A.curBindTexTarget,F$s=F$A.curBindTexValue;F$A.bindTexture(F$e,this._type,F$F),F$e.texImage2D(this._type,0,6408,F$a,F$o,0,6408,5121,this._pixels);var F$Y=this._minFifter,F$_=this._magFifter,F$R=this._repeat?10497:33071,F$H=F$M.isPOT(F$a,F$o);F$H?(this._mipmap?-1!==F$Y||(F$Y=9987):-1!==F$Y||(F$Y=9729),-1!==F$_||(F$_=9729),F$e.texParameteri(this._type,10241,F$Y),F$e.texParameteri(this._type,10240,F$_),F$e.texParameteri(this._type,10242,F$R),F$e.texParameteri(this._type,10243,F$R),this._mipmap&&F$e.generateMipmap(this._type)):(-1!==F$Y||(F$Y=9729),-1!==F$_||(F$_=9729),F$e.texParameteri(this._type,10241,F$Y),F$e.texParameteri(this._type,10240,F$_),F$e.texParameteri(this._type,10242,33071),F$e.texParameteri(this._type,10243,33071)),F$E&&F$s&&F$A.bindTexture(F$e,F$E,F$s),this.memorySize=F$H?F$a*F$o*4*(1+1/3):F$a*F$o*4},F$a.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$a.disposeResource=function(){this._source&&(F$G.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$n(F$F,["magentaTexture",function(){var F$e=new F$F(new F$_F(1,0,1,1));return F$e.lock=!0,this.magentaTexture=F$e},"grayTexture",function(){var F$e=new F$F(new F$_F(.5,.5,.5,1));return F$e.lock=!0,this.grayTexture=F$e}]),F$F}()),F$uF=function(F$e){function F$E(F$e,F$F,F$a,F$o){this._canRead=!1,this._image=null,this._pixels=null,void 0===F$e&&(F$e=!1),void 0===F$F&&(F$F=!0),void 0===F$a&&(F$a=6408),void 0===F$o&&(F$o=!0),F$E.__super.call(this),this._type=3553,this._repeat=F$F,this._canRead=F$e,this._format=F$a,this._mipmap=F$o}F$q(F$E,"laya.d3.resource.Texture2D",F$GF);var F$F=F$E.prototype;return F$F._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$e=F$G.mainContext,F$F=this._source=F$e.createTexture(),F$a=this._width,F$o=this._height,F$E=F$A.curBindTexTarget,F$s=F$A.curBindTexValue;switch(F$A.bindTexture(F$e,this._type,F$F),this._format){case 6407:case 6408:this._canRead?F$e.texImage2D(this._type,0,this._format,F$a,F$o,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?F$e.texImage2D(this._type,0,this._image._format,F$a,F$o,0,this._image._format,5121,this._image.atlasSource):F$e.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case F$G.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$e.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var F$Y=this._minFifter,F$_=this._magFifter,F$R=this._repeat?10497:33071,F$H=0==this._wrapModeU?10497:33071,F$g=0==this._wrapModeV?10497:33071,F$n=F$M.isPOT(F$a,F$o);F$n?(this._mipmap?-1!==F$Y||(F$Y=9987):-1!==F$Y||(F$Y=9729),-1!==F$_||(F$_=9729),F$e.texParameteri(this._type,10241,F$Y),F$e.texParameteri(this._type,10240,F$_),F$e.texParameteri(this._type,10242,F$R),F$e.texParameteri(this._type,10243,F$R),F$e.texParameteri(this._type,10242,F$H),F$e.texParameteri(this._type,10243,F$g),this._mipmap&&F$e.generateMipmap(this._type)):(-1!==F$Y||(F$Y=9729),-1!==F$_||(F$_=9729),F$e.texParameteri(this._type,10241,F$Y),F$e.texParameteri(this._type,10240,F$_),F$e.texParameteri(this._type,10242,33071),F$e.texParameteri(this._type,10243,33071)),F$E&&F$s&&F$A.bindTexture(F$e,F$E,F$s),this._image.onload=null,this._image=null,this.memorySize=F$n?F$a*F$o*4*(1+1/3):F$a*F$o*4},F$F.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$F.onAsynLoaded=function(F$e,F$F,F$a){if(F$a){var F$o=F$a[0];void 0!==F$o&&(this._canRead=F$o);var F$E=F$a[1];void 0!==F$E&&(this._repeat=F$E);var F$s=F$a[2];void 0!==F$s&&(this._format=F$s);var F$Y=F$a[3];void 0!==F$Y&&(this._mipmap=F$Y);var F$_=F$a.wrapModeU;void 0!==F$_&&(this._wrapModeU=F$_);var F$R=F$a.wrapModeV;void 0!==F$R&&(this._wrapModeV=F$R)}switch(this._format){case 6407:case 6408:var F$H=(this._image=F$F).width,F$g=F$F.height;this._width=F$H,this._height=F$g,this._size=new F$lF(F$H,F$g),this._canRead&&(F$l.isConchApp?F$F instanceof F$O.HTMLElement&&(this._pixels=new Uint8Array(F$F.getImageData(0,0,F$H,F$g))):(F$U.canvas.size(F$H,F$g),F$U.canvas.clear(),F$U.context.drawImage(F$F,0,0,F$H,F$g),this._pixels=new Uint8Array(F$U.context.getImageData(0,0,F$H,F$g).data.buffer)));break;case F$G.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var F$n=new F$m(F$F);F$n.readUTFBytes(4),F$n.readUTFBytes(2),F$n.getInt16();F$n.endian="bigEndian",this._width=F$n.getInt16(),this._height=F$n.getInt16(),this._size=new F$lF(this._width,this._height);F$n.getInt16(),F$n.getInt16();this._image=new Uint8Array(F$F,F$n.pos)}this.recreateResource(),this._endLoaded()},F$F.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},F$F.disposeResource=function(){this._source&&(F$G.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},F$I(0,F$F,"_src",function(){return this.url}),F$I(0,F$F,"src",function(){return this.url}),F$E.load=function(F$e){return F$D.loader.create(F$e,null,null,F$E)},F$E}(),F$xF=function(F$F){function F$a(F$e,F$F){F$a.__super.call(this),void 0===F$e&&(F$e=.3),void 0===F$F&&(F$F=1e3),this._tempVector3=new F$YF,this._position=new F$YF,this._up=new F$YF,this._forward=new F$YF,this._right=new F$YF,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=F$lF.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=F$e,this._farPlane=F$F,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),F$D.stage.on("resize",this,this._onScreenSizeChanged)}F$q(F$a,"laya.d3.core.BaseCamera",F$F);var F$e=F$a.prototype;return F$e._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var F$e=this.scene._cameraPool,F$F=F$e.length-1,F$a=0;F$a<F$F;F$a++)if(F$e[F$a].renderingOrder>F$e[F$F].renderingOrder){var F$o=F$e[F$a];F$e[F$a]=F$e[F$F],F$e[F$F]=F$o}},F$e._calculateProjectionMatrix=function(){},F$e._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},F$e._prepareCameraToRender=function(){F$r._currentCameraCullingMask=this.cullingMask;var F$e=this._shaderValues;F$e.setValue(0,this.transform.position.elements),F$e.setValue(5,this.forward.elements),F$e.setValue(6,this.up.elements)},F$e._prepareCameraViewProject=function(F$e,F$F){var F$a=this._shaderValues;F$a.setValue(1,F$e.elements),F$a.setValue(2,F$F.elements)},F$e._renderCamera=function(F$e,F$F,F$a){},F$e.addLayer=function(F$e){29!==F$e.number&&30!=F$e.number&&(this.cullingMask=this.cullingMask|F$e.mask)},F$e.removeLayer=function(F$e){29!==F$e.number&&30!=F$e.number&&(this.cullingMask=this.cullingMask&~F$e.mask)},F$e.addAllLayers=function(){this.cullingMask=2147483647},F$e.removeAllLayers=function(){this.cullingMask=0|F$r.getLayerByNumber(29).mask|F$r.getLayerByNumber(30).mask},F$e.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},F$e.moveForward=function(F$e){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=F$e,this.transform.translate(this._tempVector3)},F$e.moveRight=function(F$e){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=F$e,this.transform.translate(this._tempVector3)},F$e.moveVertical=function(F$e){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=F$e,this.transform.translate(this._tempVector3,!1)},F$e._addSelfRenderObjects=function(){var F$e=this.scene._cameraPool,F$F=F$e.length;if(0<F$F){for(var F$a=F$F-1;0<=F$a;F$a--)if(this.renderingOrder<=F$e[F$a].renderingOrder){F$e.splice(F$a+1,0,this);break}}else F$e.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},F$e._clearSelfRenderObjects=function(){var F$e=this.scene._cameraPool;F$e.splice(F$e.indexOf(this),1)},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,F$D.stage.off("resize",this,this._onScreenSizeChanged),F$F.prototype.destroy.call(this,F$e)},F$I(0,F$e,"sky",function(){return this._sky},function(F$e){(this._sky=F$e)._ownerCamera=this}),F$I(0,F$e,"forward",function(){var F$e=this.transform.worldMatrix.elements,F$F=this._forward.elements;return F$F[0]=-F$e[8],F$F[1]=-F$e[9],F$F[2]=-F$e[10],this._forward}),F$I(0,F$e,"position",function(){var F$e=this.transform.worldMatrix.elements,F$F=this._position.elements;return F$F[0]=F$e[12],F$F[1]=F$e[13],F$F[2]=F$e[14],this._position}),F$I(0,F$e,"renderTarget",function(){return this._renderTarget},function(F$e){null!=(this._renderTarget=F$e)&&(this._renderTargetSize=F$e.size)}),F$I(0,F$e,"up",function(){var F$e=this.transform.worldMatrix.elements,F$F=this._up.elements;return F$F[0]=F$e[4],F$F[1]=F$e[5],F$F[2]=F$e[6],this._up}),F$I(0,F$e,"right",function(){var F$e=this.transform.worldMatrix.elements,F$F=this._right.elements;return F$F[0]=F$e[0],F$F[1]=F$e[1],F$F[2]=F$e[2],this._right}),F$I(0,F$e,"renderTargetSize",function(){return this._renderTargetSize},function(F$e){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"fieldOfView",function(){return this._fieldOfView},function(F$e){this._fieldOfView=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"nearPlane",function(){return this._nearPlane},function(F$e){this._nearPlane=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"farPlane",function(){return this._farPlane},function(F$e){this._farPlane=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"orthographic",function(){return this._orthographic},function(F$e){this._orthographic=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(F$e){this._orthographicVerticalSize=F$e,this._calculateProjectionMatrix()}),F$I(0,F$e,"renderingOrder",function(){return this._renderingOrder},function(F$e){this._renderingOrder=F$e,this._sortCamerasByRenderingOrder()}),F$a.CAMERAPOS=0,F$a.VIEWMATRIX=1,F$a.PROJECTMATRIX=2,F$a.VPMATRIX=3,F$a.VPMATRIX_NO_TRANSLATE=4,F$a.CAMERADIRECTION=5,F$a.CAMERAUP=6,F$a.ENVIRONMENTDIFFUSE=7,F$a.ENVIRONMENTSPECULAR=8,F$a.SIMLODINFO=9,F$a.DIFFUSEIRRADMATR=10,F$a.DIFFUSEIRRADMATG=11,F$a.DIFFUSEIRRADMATB=12,F$a.HDREXPOSURE=13,F$a.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",F$a.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",F$a.CLEARFLAG_SOLIDCOLOR=0,F$a.CLEARFLAG_SKY=1,F$a.CLEARFLAG_DEPTHONLY=2,F$a.CLEARFLAG_NONE=3,F$n(F$a,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new F$eF(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new F$eF},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new F$eF}]),F$a}(F$zF),F$NF=function(F$a){function F$F(F$e){this._render=null,this._geometryFilter=null,F$F.__super.call(this,F$e)}F$q(F$F,"laya.d3.core.RenderableSprite3D",F$a);var F$e=F$F.prototype;return F$e._addToInitStaticBatchManager=function(){},F$e._setBelongScene=function(F$e){F$a.prototype._setBelongScene.call(this,F$e),F$e._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},F$e._setUnBelongScene=function(){var F$e=this._scene._renderableSprite3Ds,F$F=F$e.indexOf(this);F$e.splice(F$F,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),F$a.prototype._setUnBelongScene.call(this)},F$e._update=function(F$e){(F$e.owner=this)._activeInHierarchy&&(this._updateComponents(F$e),this._render._updateOctreeNode(),this._lateUpdateComponents(F$e),F$L.spriteCount++,this._childs.length&&this._updateChilds(F$e))},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$a.prototype.destroy.call(this,F$e),this._render._destroy(),this._render=null},F$F.__init__=function(){F$F.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=F$F.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),F$F.SAHDERDEFINE_LIGHTMAP=F$F.shaderDefines.registerDefine("LIGHTMAP")},F$F.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,F$F.SAHDERDEFINE_LIGHTMAP=4,F$F.LIGHTMAPSCALEOFFSET=2,F$F.LIGHTMAP=3,F$n(F$F,["shaderDefines",function(){return this.shaderDefines=new F$gF}]),F$F}(F$zF),F$XF=(function(F$e){function F$o(F$e,F$F,F$a){this._long=NaN,this._width=NaN,this._height=NaN,void 0===F$e&&(F$e=1),void 0===F$F&&(F$F=1),void 0===F$a&&(F$a=1),F$o.__super.call(this),this._long=F$e,this._width=F$F,this._height=F$a,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$q(F$o,"laya.d3.resource.models.BoxMesh",F$wF);var F$F=F$o.prototype;F$F.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var F$e=F$Ge.vertexDeclaration,F$F=(F$e.vertexStride,this._long/2),F$a=this._height/2,F$o=this._width/2,F$E=new Float32Array([-F$F,F$a,-F$o,0,1,0,0,0,F$F,F$a,-F$o,0,1,0,1,0,F$F,F$a,F$o,0,1,0,1,1,-F$F,F$a,F$o,0,1,0,0,1,-F$F,-F$a,-F$o,0,-1,0,0,1,F$F,-F$a,-F$o,0,-1,0,1,1,F$F,-F$a,F$o,0,-1,0,1,0,-F$F,-F$a,F$o,0,-1,0,0,0,-F$F,F$a,-F$o,-1,0,0,0,0,-F$F,F$a,F$o,-1,0,0,1,0,-F$F,-F$a,F$o,-1,0,0,1,1,-F$F,-F$a,-F$o,-1,0,0,0,1,F$F,F$a,-F$o,1,0,0,1,0,F$F,F$a,F$o,1,0,0,0,0,F$F,-F$a,F$o,1,0,0,0,1,F$F,-F$a,-F$o,1,0,0,1,1,-F$F,F$a,F$o,0,0,1,0,0,F$F,F$a,F$o,0,0,1,1,0,F$F,-F$a,F$o,0,0,1,1,1,-F$F,-F$a,F$o,0,0,1,0,1,-F$F,F$a,-F$o,0,0,-1,1,0,F$F,F$a,-F$o,0,0,-1,0,0,F$F,-F$a,-F$o,0,0,-1,0,1,-F$F,-F$a,-F$o,0,0,-1,1,1]),F$s=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new F$kF(F$e,this._numberVertices,35044,!0),this._indexBuffer=new F$JF("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$E),this._indexBuffer.setData(F$s),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$I(0,F$F,"long",function(){return this._long},function(F$e){this._long!==F$e&&(this._long=F$e,this.releaseResource(),this.activeResource())}),F$I(0,F$F,"width",function(){return this._width},function(F$e){this._width!==F$e&&(this._width=F$e,this.releaseResource(),this.activeResource())}),F$I(0,F$F,"height",function(){return this._height},function(F$e){this._height!==F$e&&(this._height=F$e,this.releaseResource(),this.activeResource())})}(),function(F$e){function F$E(F$e,F$F,F$a,F$o){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===F$e&&(F$e=10),void 0===F$F&&(F$F=10),void 0===F$a&&(F$a=10),void 0===F$o&&(F$o=10),F$E.__super.call(this),this._long=F$e,this._width=F$F,this._stacks=F$a,this._slices=F$o,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$q(F$E,"laya.d3.resource.models.PlaneMesh",F$wF);var F$F=F$E.prototype;F$F.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var F$e=new Uint16Array(this._numberIndices),F$F=F$Ge.vertexDeclaration,F$a=F$F.vertexStride/4,F$o=new Float32Array(this._numberVertices*F$a),F$E=this._long/2,F$s=this._width/2,F$Y=this._long/this._stacks,F$_=this._width/this._slices,F$R=0,F$H=0;F$H<=this._slices;F$H++)for(var F$g=0;F$g<=this._stacks;F$g++)F$o[F$R++]=F$g*F$Y-F$E,F$o[F$R++]=0,F$o[F$R++]=F$H*F$_-F$s,F$o[F$R++]=0,F$o[F$R++]=1,F$o[F$R++]=0,F$o[F$R++]=1*F$g/this._stacks,F$o[F$R++]=1*F$H/this._slices;var F$n=0;for(F$H=0;F$H<this._slices;F$H++)for(F$g=0;F$g<this._stacks;F$g++)F$e[F$n++]=(F$H+1)*(this._stacks+1)+F$g,F$e[F$n++]=F$H*(this._stacks+1)+F$g,F$e[F$n++]=(F$H+1)*(this._stacks+1)+F$g+1,F$e[F$n++]=F$H*(this._stacks+1)+F$g,F$e[F$n++]=F$H*(this._stacks+1)+F$g+1,F$e[F$n++]=(F$H+1)*(this._stacks+1)+F$g+1;this._vertexBuffer=new F$kF(F$F,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new F$JF("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$o),this._indexBuffer.setData(F$e),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$I(0,F$F,"long",function(){return this._long},function(F$e){this._long!==F$e&&(this._long=F$e,this.releaseResource(),this.activeResource())}),F$I(0,F$F,"width",function(){return this._width},function(F$e){this._width!==F$e&&(this._width=F$e,this.releaseResource(),this.activeResource())}),F$I(0,F$F,"stacks",function(){return this._stacks},function(F$e){this._stacks!==F$e&&(this._stacks=F$e,this.releaseResource(),this.activeResource())}),F$I(0,F$F,"slices",function(){return this._slices},function(F$e){this._slices!==F$e&&(this._slices=F$e,this.releaseResource(),this.activeResource())})}(),function(F$e){function F$Y(F$e,F$F,F$a){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=.3),void 0===F$a&&(F$a=1e3),this._viewMatrix=new F$eF,this._projectionMatrix=new F$eF,this._projectionViewMatrix=new F$eF,this._viewport=new F$RF(0,0,0,0),this._normalizedViewport=new F$RF(0,0,1,1),this._aspectRatio=F$e,this._boundFrustumUpdate=!0,this._boundFrustum=new F$Qe(F$eF.DEFAULT),F$Y.__super.call(this,F$F,F$a),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}F$q(F$Y,"laya.d3.core.Camera",F$xF);var F$F=F$Y.prototype;return F$F._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},F$F._parseCustomProps=function(F$e,F$F,F$a,F$o){var F$E=F$a.clearColor;this.clearColor=new F$_F(F$E[0],F$E[1],F$E[2],F$E[3]);var F$s=F$a.viewport;this.normalizedViewport=new F$RF(F$s[0],F$s[1],F$s[2],F$s[3])},F$F._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var F$e=this.orthographicVerticalSize*this.aspectRatio*.5,F$F=.5*this.orthographicVerticalSize;F$eF.createOrthoOffCenterRH(-F$e,F$e,-F$F,F$F,this.nearPlane,this.farPlane,this._projectionMatrix)}else F$eF.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},F$F._update=function(F$e){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,F$e)},F$F._renderCamera=function(F$e,F$F,F$a){var F$o,F$E;F$a.parallelSplitShadowMaps[0]&&F$a._renderShadowMap(F$e,F$F,this),(F$F.camera=this)._prepareCameraToRender(),F$a._preRenderUpdateComponents(F$F),F$o=F$F._viewMatrix=this.viewMatrix;var F$s=this._renderTarget;F$s?(F$s.start(),F$eF.multiply(F$xF._invertYScaleMatrix,this._projectionMatrix,F$xF._invertYProjectionMatrix),F$eF.multiply(F$xF._invertYScaleMatrix,this.projectionViewMatrix,F$xF._invertYProjectionViewMatrix),F$E=F$F._projectionMatrix=F$xF._invertYProjectionMatrix,F$F._projectionViewMatrix=F$xF._invertYProjectionViewMatrix):(F$E=F$F._projectionMatrix=this._projectionMatrix,F$F._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(F$o,F$E),F$F._viewport=this.viewport,F$a._preRenderScene(F$e,F$F,this.boundFrustum),F$a._clear(F$e,F$F),F$a._renderScene(F$e,F$F),F$a._postRenderUpdateComponents(F$F),F$s&&F$s.end()},F$F.viewportPointToRay=function(F$e,F$F){F$IF.calculateCursorRay(F$e,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$F)},F$F.normalizedViewportPointToRay=function(F$e,F$F){var F$a=F$Y._tempVector20,F$o=this.viewport,F$E=F$e.elements,F$s=F$a.elements;F$s[0]=F$E[0]*F$o.width,F$s[1]=F$E[1]*F$o.height,F$IF.calculateCursorRay(F$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$F)},F$F.worldToViewportPoint=function(F$e,F$F){F$eF.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(F$e,this._projectionViewMatrix,F$F);var F$a=F$F.elements;F$a[0]=F$a[0]/F$D.stage.clientScaleX,F$a[1]=F$a[1]/F$D.stage.clientScaleY},F$F.worldToNormalizedViewportPoint=function(F$e,F$F){F$eF.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(F$e,this._projectionViewMatrix,F$F);var F$a=F$F.elements;F$a[0]=F$a[0]/F$D.stage.clientScaleX,F$a[1]=F$a[1]/F$D.stage.clientScaleY},F$F.convertScreenCoordToOrthographicCoord=function(F$e,F$F){if(this._orthographic){var F$a=F$f.clientWidth,F$o=F$f.clientHeight,F$E=this.orthographicVerticalSize*this.aspectRatio/F$a,F$s=this.orthographicVerticalSize/F$o,F$Y=F$e.elements,F$_=F$F.elements;return F$_[0]=(-F$a/2+F$Y[0])*F$E,F$_[1]=(F$o/2-F$Y[1])*F$s,F$_[2]=(this.nearPlane-this.farPlane)*(F$Y[2]+1)/2-this.nearPlane,F$YF.transformCoordinate(F$F,this.transform.worldMatrix,F$F),!0}return!1},F$I(0,F$F,"projectionViewMatrix",function(){return F$eF.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),F$I(0,F$F,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var F$e=this.viewport;return F$e.width/F$e.height},function(F$e){if(F$e<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=F$e,this._calculateProjectionMatrix()}),F$I(0,F$F,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),F$I(0,F$F,"needViewport",function(){var F$e=this.normalizedViewport;return 0===F$e.x&&0===F$e.y&&1===F$e.width&&1===F$e.height}),F$I(0,F$F,"viewport",function(){if(this._viewportExpressedInClipSpace){var F$e=this._normalizedViewport,F$F=this.renderTargetSize,F$a=F$F.width,F$o=F$F.height;this._viewport.x=F$e.x*F$a,this._viewport.y=F$e.y*F$o,this._viewport.width=F$e.width*F$a,this._viewport.height=F$e.height*F$o}return this._viewport},function(F$e){if(null!=this.renderTarget&&(F$e.x<0||F$e.y<0||0==F$e.width||0==F$e.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=F$e,this._calculateProjectionMatrix()}),F$I(0,F$F,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var F$e=this._viewport,F$F=this.renderTargetSize,F$a=F$F.width,F$o=F$F.height;this._normalizedViewport.x=F$e.x/F$a,this._normalizedViewport.y=F$e.y/F$o,this._normalizedViewport.width=F$e.width/F$a,this._normalizedViewport.height=F$e.height/F$o}return this._normalizedViewport},function(F$e){F$e.x<0&&(F$e.x=0,console.warn("Camera: viewport.x must large than 0.0.")),F$e.y<0&&(F$e.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<F$e.x+F$e.width&&(F$e.width=1-F$e.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<F$e.y+F$e.height&&(F$e.height=1-F$e.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=F$e,this._calculateProjectionMatrix()}),F$I(0,F$F,"projectionMatrix",function(){return this._projectionMatrix},function(F$e){this._projectionMatrix=F$e,this._useUserProjectionMatrix=!0}),F$I(0,F$F,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),F$n(F$Y,["_tempVector20",function(){return this._tempVector20=new F$sF}]),F$Y}()),F$WF=function(F$a){function F$o(F$e,F$F){F$o.__super.call(this,F$F),this._geometryFilter=new F$UF(this),this._render=new F$rF(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),F$e&&(this._geometryFilter.sharedMesh=F$e)instanceof laya.d3.resource.models.Mesh&&(F$e.loaded?this._render.sharedMaterials=F$e.materials:F$e.once("loaded",this,this._applyMeshMaterials))}F$q(F$o,"laya.d3.core.MeshSprite3D",F$a);var F$e=F$o.prototype;return F$e._changeRenderObjectByMesh=function(F$e){var F$F=this._render._renderElements,F$a=F$F[F$e];F$a||(F$a=F$F[F$e]=new F$bF),F$a._render=this._render;var F$o=this._render.sharedMaterials[F$e];F$o||(F$o=F$pF.defaultMaterial);var F$E=this._geometryFilter.sharedMesh.getRenderElement(F$e);return F$a._mainSortID=this._getSortID(F$E,F$o),F$a._sprite3D=this,F$a.renderObj=F$E,F$a._material=F$o,F$a},F$e._changeRenderObjectByMaterial=function(F$e,F$F){var F$a=this._render._renderElements[F$e];F$F||(F$F=F$pF.defaultMaterial);var F$o=this._geometryFilter.sharedMesh.getRenderElement(F$e);return F$a._mainSortID=this._getSortID(F$o,F$F),F$a._sprite3D=this,F$a.renderObj=F$o,F$a._material=F$F,F$a},F$e._changeRenderObjectsByMesh=function(){var F$e=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=F$e;for(var F$F=0;F$F<F$e;F$F++)this._changeRenderObjectByMesh(F$F)},F$e._onMeshChanged=function(F$e){var F$F=F$e.sharedMesh;F$F.loaded?this._changeRenderObjectsByMesh():F$F.once("loaded",this,this._onMeshLoaded)},F$e._onMeshLoaded=function(F$e){F$e===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},F$e._onMaterialChanged=function(F$e,F$F,F$a){F$F<this._render._renderElements.length&&this._changeRenderObjectByMaterial(F$F,F$a)},F$e._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},F$e._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},F$e._parseCustomProps=function(F$e,F$F,F$a,F$o){var F$E=this.meshRender,F$s=F$a.lightmapIndex;null!=F$s&&(F$E.lightmapIndex=F$s);var F$Y,F$_,F$R=F$a.lightmapScaleOffset;if(F$R&&(F$E.lightmapScaleOffset=new F$_F(F$R[0],F$R[1],F$R[2],F$R[3])),F$o.instanceParams)(F$Y=F$o.instanceParams.loadPath)&&(F$_=F$j.getRes(F$F[F$Y]),(this.meshFilter.sharedMesh=F$_).loaded?F$E.sharedMaterials=F$_.materials:F$_.once("loaded",this,this._applyMeshMaterials));else{(F$Y=F$a.meshPath)&&(F$_=F$j.getRes(F$F[F$Y]),this.meshFilter.sharedMesh=F$_);var F$H=F$a.materials;if(F$H){var F$g=F$E.sharedMaterials,F$n=F$H.length;F$g.length=F$n;for(var F$O=0;F$O<F$n;F$O++)F$g[F$O]=F$j.getRes(F$F[F$H[F$O].path]);F$E.sharedMaterials=F$g}}},F$e._applyMeshMaterials=function(F$e){for(var F$F=this._render.sharedMaterials,F$a=F$e.materials,F$o=0,F$E=F$a.length;F$o<F$E;F$o++)F$F[F$o]||(F$F[F$o]=F$a[F$o]);this._render.sharedMaterials=F$F},F$e._addToInitStaticBatchManager=function(){F$o._staticBatchManager._addInitBatchSprite(this)},F$e.cloneTo=function(F$e){var F$F=F$e;F$F._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var F$a=this._render,F$o=F$F._render;F$o.enable=F$a.enable,F$o.sharedMaterials=F$a.sharedMaterials,F$o.castShadow=F$a.castShadow;var F$E=F$a.lightmapScaleOffset;F$E&&(F$o.lightmapScaleOffset=F$E.clone()),F$o.lightmapIndex=F$a.lightmapIndex,F$o.receiveShadow=F$a.receiveShadow,F$o.sortingFudge=F$a.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,F$e)},F$e.destroy=function(F$e){if(void 0===F$e&&(F$e=!0),!this.destroyed){var F$F=this.meshFilter.sharedMesh;null!=F$F&&(F$F.loaded||F$F.off("loaded",this,this._applyMeshMaterials)),F$a.prototype.destroy.call(this,F$e),this._geometryFilter._destroy()}},F$I(0,F$e,"meshFilter",function(){return this._geometryFilter}),F$I(0,F$e,"meshRender",function(){return this._render}),F$o.__init__=function(){F$oe._staticBatchManagers.push(F$o._staticBatchManager)},F$o.load=function(F$e){return F$D.loader.create(F$e,null,null,F$o)},F$n(F$o,["_staticBatchManager",function(){return this._staticBatchManager=new F$BF}]),F$o}(F$NF)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}}),function(F$e,F$F,F$Ee){F$Ee.un,F$Ee.uns;var F$a=F$Ee.static,F$o=F$Ee.class,F$s=F$Ee.getset,F$l=F$Ee.__newvec,F$_=laya.maths.Bezier,F$n=laya.utils.Browser,F$Ge=laya.utils.Byte,F$E=(laya.events.Event,laya.events.EventDispatcher),F$Y=laya.display.Graphics,F$R=(laya.resource.HTMLCanvas,laya.utils.Handler),F$H=laya.net.Loader,F$O=laya.maths.MathUtil,F$Ae=laya.maths.Matrix,F$P=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),F$g=(laya.renders.RenderContext,laya.resource.Resource),F$q=laya.utils.RunDriver,F$se=laya.display.Sprite,F$I=laya.utils.Stat,F$Ue=laya.resource.Texture,F$j=(laya.net.URL,laya.utils.Utils),F$A=function(){function F$e(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return F$o(F$e,"laya.ani.AnimationContent"),F$e}(),F$U=function(){function F$e(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return F$o(F$e,"laya.ani.AnimationNodeContent"),F$e}(),F$y=function(){function F$e(){}return F$o(F$e,"laya.ani.AnimationParser01"),F$e.parse=function(F$e,F$F){var F$a=F$F.__getBuffer(),F$o=0,F$E=0,F$s=0,F$Y=0,F$_=0,F$R=0,F$H=0,F$g=F$F.readUTFString();F$e._aniClassName=F$g;var F$n,F$O=F$F.readUTFString().split("\n"),F$q=F$F.getUint8(),F$I=F$F.getUint32(),F$l=F$F.getUint32();0<F$I&&(F$n=F$a.slice(F$I,F$l));var F$P=new F$Ge(F$n);for(0<F$l&&(F$e._publicExtData=F$a.slice(F$l,F$a.byteLength)),F$e._useParent=!!F$F.getUint8(),F$e._anis.length=F$q,F$o=0;F$o<F$q;F$o++){var F$j=F$e._anis[F$o]=new F$A;F$j.nodes=new Array;var F$$=F$j.name=F$O[F$F.getUint16()];F$e._aniMap[F$$]=F$o,F$j.bone3DMap={},F$j.playTime=F$F.getFloat32(),F$j.playTime<=0&&console.error("播放时间不能为0  url="+F$e.url+" name="+F$j.name);var F$y=F$j.nodes.length=F$F.getUint8();for(F$E=F$j.totalKeyframeDatasLength=0;F$E<F$y;F$E++){var F$M=F$j.nodes[F$E]=new F$U;F$M.childs=[];var F$D=F$F.getInt16();0<=F$D&&(F$M.name=F$O[F$D],F$j.bone3DMap[F$M.name]=F$E),F$M.keyFrame=new Array,F$M.parentIndex=F$F.getInt16(),-1==F$M.parentIndex?F$M.parent=null:F$M.parent=F$j.nodes[F$M.parentIndex],F$M.lerpType=F$F.getUint8();var F$m=F$F.getUint32();F$P.pos=F$m;var F$b=F$M.keyframeWidth=F$P.getUint16();if(F$j.totalKeyframeDatasLength+=F$b,0===F$M.lerpType||1===F$M.lerpType)for(F$M.interpolationMethod=[],F$M.interpolationMethod.length=F$b,F$s=0;F$s<F$b;F$s++)F$M.interpolationMethod[F$s]=F$z.interpolation[F$P.getUint8()];null!=F$M.parent&&F$M.parent.childs.push(F$M);var F$L=F$F.getUint16();0<F$L&&(F$M.extenData=F$a.slice(F$F.pos,F$F.pos+F$L),F$F.pos+=F$L);var F$B,F$v=F$F.getUint16(),F$K=0;for(F$s=0,F$Y=F$M.keyFrame.length=F$v;F$s<F$Y;F$s++){if((F$B=F$M.keyFrame[F$s]=new F$r).duration=F$F.getFloat32(),F$B.startTime=F$K,2===F$M.lerpType){F$B.interpolationData=[];var F$V,F$G=F$F.getUint8();switch(F$V=F$F.getFloat32()){case 254:for(F$B.interpolationData.length=F$b,F$H=0;F$H<F$b;F$H++)F$B.interpolationData[F$H]=0;break;case 255:for(F$B.interpolationData.length=F$b,F$H=0;F$H<F$b;F$H++)F$B.interpolationData[F$H]=5;break;default:for(F$B.interpolationData.push(F$V),F$R=1;F$R<F$G;F$R++)F$B.interpolationData.push(F$F.getFloat32())}}for(F$B.data=new Float32Array(F$b),F$_=0;F$_<F$b;F$_++)F$B.data[F$_]=F$F.getFloat32(),-1e-8<F$B.data[F$_]&&F$B.data[F$_]<1e-8&&(F$B.data[F$_]=0);F$K+=F$B.duration}F$B.startTime=F$j.playTime,F$M.playTime=F$j.playTime,F$e._calculateKeyFrame(F$M,F$v,F$b)}}},F$e}(),F$M=function(){function F$D(){}return F$o(F$D,"laya.ani.AnimationParser02"),F$D.READ_DATA=function(){F$D._DATA.offset=F$D._reader.getUint32(),F$D._DATA.size=F$D._reader.getUint32()},F$D.READ_BLOCK=function(){for(var F$e=F$D._BLOCK.count=F$D._reader.getUint16(),F$F=F$D._BLOCK.blockStarts=[],F$a=F$D._BLOCK.blockLengths=[],F$o=0;F$o<F$e;F$o++)F$F.push(F$D._reader.getUint32()),F$a.push(F$D._reader.getUint32())},F$D.READ_STRINGS=function(){var F$e=F$D._reader.getUint32(),F$F=F$D._reader.getUint16(),F$a=F$D._reader.pos;F$D._reader.pos=F$e+F$D._DATA.offset;for(var F$o=0;F$o<F$F;F$o++)F$D._strings[F$o]=F$D._reader.readUTFString();F$D._reader.pos=F$a},F$D.parse=function(F$e,F$F){F$D._templet=F$e;(F$D._reader=F$F).__getBuffer();F$D.READ_DATA(),F$D.READ_BLOCK(),F$D.READ_STRINGS();for(var F$a=0,F$o=F$D._BLOCK.count;F$a<F$o;F$a++){var F$E=F$F.getUint16(),F$s=F$D._strings[F$E],F$Y=F$D["READ_"+F$s];if(null==F$Y)throw new Error("model file err,no this function:"+F$E+" "+F$s);F$Y.call()}},F$D.READ_ANIMATIONS=function(){var F$e=F$D._reader,F$F=F$e.__getBuffer(),F$a=0,F$o=0,F$E=0,F$s=0,F$Y=F$e.getUint16(),F$_=[];for(F$_.length=F$Y,F$a=0;F$a<F$Y;F$a++)F$_[F$a]=F$z.interpolation[F$e.getByte()];var F$R=F$e.getUint8();for(F$D._templet._anis.length=F$R,F$a=0;F$a<F$R;F$a++){var F$H=F$D._templet._anis[F$a]={};F$H.nodes=new Array;var F$g=F$H.name=F$D._strings[F$e.getUint16()];F$D._templet._aniMap[F$g]=F$a,F$H.bone3DMap={},F$H.playTime=F$e.getFloat32();var F$n=F$H.nodes.length=F$e.getInt16();for(F$o=F$H.totalKeyframeDatasLength=0;F$o<F$n;F$o++){var F$O=F$H.nodes[F$o]={};F$O.keyframeWidth=F$Y,F$O.childs=[];var F$q=F$e.getUint16();0<=F$q&&(F$O.name=F$D._strings[F$q],F$H.bone3DMap[F$O.name]=F$o),F$O.keyFrame=new Array,F$O.parentIndex=F$e.getInt16(),-1==F$O.parentIndex?F$O.parent=null:F$O.parent=F$H.nodes[F$O.parentIndex],F$H.totalKeyframeDatasLength+=F$Y,F$O.interpolationMethod=F$_,null!=F$O.parent&&F$O.parent.childs.push(F$O);var F$I=F$e.getUint16(),F$l=null,F$P=null;for(F$E=0,F$s=F$O.keyFrame.length=F$I;F$E<F$s;F$E++){(F$l=F$O.keyFrame[F$E]={}).startTime=F$e.getFloat32(),F$P&&(F$P.duration=F$l.startTime-F$P.startTime);var F$j=F$D._DATA.offset,F$$=F$e.getUint32(),F$y=4*F$Y,F$M=F$F.slice(F$j+F$$,F$j+F$$+F$y);F$l.data=new Float32Array(F$M),F$P=F$l}F$l.duration=0,F$O.playTime=F$H.playTime,F$D._templet._calculateKeyFrame(F$O,F$I,F$Y)}}},F$D._templet=null,F$D._reader=null,F$D._strings=[],F$a(F$D,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$D}(),F$re=(function(){function F$e(){}F$o(F$e,"laya.ani.AnimationState"),F$e.stopped=0,F$e.paused=1,F$e.playing=2}(),function(){function F$E(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new F$Ne,this.resultMatrix=new F$Ae,this._children=[]}F$o(F$E,"laya.ani.bone.Bone");var F$e=F$E.prototype;return F$e.setTempMatrix=function(F$e){this._tempMatrix=F$e;var F$F,F$a=0;for(F$a=0,F$F=this._children.length;F$a<F$F;F$a++)this._children[F$a].setTempMatrix(this._tempMatrix)},F$e.update=function(F$e){var F$F;if(this.rotation=this.transform.skX,F$e)F$F=this.resultTransform.getMatrix(),F$Ae.mul(F$F,F$e,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)F$F=this.resultTransform.getMatrix(),F$Ae.mul(F$F,this.parentBone.resultMatrix,this.resultMatrix);else{var F$a=this.parentBone,F$o=NaN,F$E=NaN,F$s=NaN,F$Y=this.parentBone.resultMatrix;F$F=this.resultTransform.getMatrix();var F$_=F$Y.a*F$F.tx+F$Y.c*F$F.ty+F$Y.tx,F$R=F$Y.b*F$F.tx+F$Y.d*F$F.ty+F$Y.ty,F$H=new F$Ae;this.inheritRotation?(F$o=Math.atan2(F$a.resultMatrix.b,F$a.resultMatrix.a),F$E=Math.cos(F$o),F$s=Math.sin(F$o),F$H.setTo(F$E,F$s,-F$s,F$E,0,0),F$Ae.mul(this._tempMatrix,F$H,F$Ae.TEMP),F$Ae.TEMP.copyTo(F$H),F$F=this.resultTransform.getMatrix(),F$Ae.mul(F$F,F$H,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,F$F=this.resultTransform.getMatrix(),F$Ae.TEMP.identity(),F$Ae.TEMP.d=this.d,F$Ae.mul(F$F,F$Ae.TEMP,this.resultMatrix)),this.resultMatrix.tx=F$_,this.resultMatrix.ty=F$R}else(F$F=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var F$g,F$n=0;for(F$n=0,F$g=this._children.length;F$n<F$g;F$n++)this._children[F$n].update()},F$e.updateChild=function(){var F$e,F$F=0;for(F$F=0,F$e=this._children.length;F$F<F$e;F$F++)this._children[F$F].update()},F$e.setRotation=function(F$e){this._sprite&&(this._sprite.rotation=180*F$e/Math.PI)},F$e.updateDraw=function(F$e,F$F){F$E.ShowBones&&!F$E.ShowBones[this.name]||(this._sprite||(this._sprite=new F$se,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),F$Ee.stage.addChild(this._sprite)),this._sprite.x=F$e+this.resultMatrix.tx,this._sprite.y=F$F+this.resultMatrix.ty);var F$a,F$o=0;for(F$o=0,F$a=this._children.length;F$o<F$a;F$o++)this._children[F$o].updateDraw(F$e,F$F)},F$e.addChild=function(F$e){this._children.push(F$e),F$e.parentBone=this},F$e.findBone=function(F$e){if(this.name==F$e)return this;var F$F,F$a,F$o=0;for(F$o=0,F$F=this._children.length;F$o<F$F;F$o++)if(F$a=this._children[F$o].findBone(F$e))return F$a;return null},F$e.localToWorld=function(F$e){var F$F=F$e[0],F$a=F$e[1];F$e[0]=F$F*this.resultMatrix.a+F$a*this.resultMatrix.c+this.resultMatrix.tx,F$e[1]=F$F*this.resultMatrix.b+F$a*this.resultMatrix.d+this.resultMatrix.ty},F$E.ShowBones={},F$E}()),F$Ze=function(){function F$l(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}F$o(F$l,"laya.ani.bone.BoneSlot");var F$e=F$l.prototype;return F$e.showSlotData=function(F$e,F$F){void 0===F$F&&(F$F=!0),this.currSlotData=F$e,F$F&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},F$e.showDisplayByName=function(F$e){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(F$e))},F$e.replaceDisplayByName=function(F$e,F$F){if(this.currSlotData){var F$a;F$a=this.currSlotData.getDisplayByName(F$e);var F$o;F$o=this.currSlotData.getDisplayByName(F$F),this.replaceDisplayByIndex(F$a,F$o)}},F$e.replaceDisplayByIndex=function(F$e,F$F){this.currSlotData&&(this._replaceDic[F$e]=F$F,this.displayIndex==F$e&&this.showDisplayByIndex(F$e))},F$e.showDisplayByIndex=function(F$e){if(null!=this._replaceDic[F$e]&&(F$e=this._replaceDic[F$e]),this.currSlotData&&-1<F$e&&F$e<this.currSlotData.displayArr.length){if(this.displayIndex=F$e,this.currDisplayData=this.currSlotData.displayArr[F$e],this.currDisplayData){var F$F=this.currDisplayData.name;this.currTexture=this.templet.getTexture(F$F),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!F$P.isConchApp||F$P.isConchApp&&"0.9.15"<F$se.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},F$e.replaceSkin=function(F$e){this._diyTexture=F$e,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},F$e.setParentMatrix=function(F$e){this._parentMatrix=F$e},F$e.draw=function(F$e,F$F,F$a,F$o){if(void 0===F$a&&(F$a=!1),void 0===F$o&&(F$o=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var F$E,F$s=this.currTexture;switch(this._diyTexture&&(F$s=this._diyTexture),this.currDisplayData.type){case 0:if(F$e){var F$Y=this.getDisplayMatrix();if(this._parentMatrix){var F$_=!1;if(F$Y){var F$R;if(F$Ae.mul(F$Y,this._parentMatrix,F$Ae.TEMP),F$R=F$a?(null==this._resultMatrix&&(this._resultMatrix=new F$Ae),this._resultMatrix):new F$Ae,!F$P.isWebGL&&this.currDisplayData.uvs||F$P.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var F$H=F$l._tempMatrix;F$H.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$H.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$_=!0,F$H.rotate(-Math.PI/2)),F$Ae.mul(F$H,F$Ae.TEMP,F$R)}else F$Ae.TEMP.copyTo(F$R);F$_?F$e.drawTexture(F$s,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,F$R):F$e.drawTexture(F$s,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,F$R)}}}break;case 1:if(null==(F$E=F$a?(null==this._skinSprite&&(this._skinSprite=F$l.createSkinMesh()),this._skinSprite):F$l.createSkinMesh()))return;var F$g;if(null==this.currDisplayData.bones){var F$n,F$O=this.currDisplayData.weights;this.deformData&&(F$O=this.deformData),F$n=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$b.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$b.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=F$O;this.currDisplayData.triangles.length;F$g=this.currDisplayData.triangles,F$E.init2(F$s,null,F$g,this._mVerticleArr,F$n);var F$q,F$I=this.getDisplayMatrix();if(this._parentMatrix)if(F$I)F$Ae.mul(F$I,this._parentMatrix,F$Ae.TEMP),F$q=F$a?(null==this._resultMatrix&&(this._resultMatrix=new F$Ae),this._resultMatrix):new F$Ae,F$Ae.TEMP.copyTo(F$q),F$E.transform=F$q}else this.skinMesh(F$F,F$E,F$o);F$e.drawSkin(F$E);break;case 2:if(null==(F$E=F$a?(null==this._skinSprite&&(this._skinSprite=F$l.createSkinMesh()),this._skinSprite):F$l.createSkinMesh()))return;this.skinMesh(F$F,F$E,F$o),F$e.drawSkin(F$E)}}},F$e.skinMesh=function(F$e,F$F,F$a){var F$o,F$E=this.currTexture,F$s=this.currDisplayData.bones;F$o=this._diyTexture?(F$E=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$b.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$b.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var F$Y,F$_,F$R=this.currDisplayData.weights,F$H=this.currDisplayData.triangles,F$g=0,F$n=0,F$O=0,F$q=NaN,F$I=NaN,F$l=0,F$P=0,F$j=[],F$$=0,F$y=0;if(this.deformData&&0<this.deformData.length){var F$M=0;for(F$$=0,F$y=F$s.length;F$$<F$y;){for(F$O=F$s[F$$++]+F$$,F$n=F$g=0;F$$<F$O;F$$++)F$_=F$e[F$s[F$$]],F$q=F$R[F$l]+this.deformData[F$M++],F$I=F$R[F$l+1]+this.deformData[F$M++],F$P=F$R[F$l+2],F$g+=(F$q*F$_.a+F$I*F$_.c+F$_.tx)*F$P,F$n+=(F$q*F$_.b+F$I*F$_.d+F$_.ty)*F$P,F$l+=3;F$j.push(F$g,F$n)}}else for(F$$=0,F$y=F$s.length;F$$<F$y;){for(F$O=F$s[F$$++]+F$$,F$n=F$g=0;F$$<F$O;F$$++)F$_=F$e[F$s[F$$]],F$q=F$R[F$l],F$I=F$R[F$l+1],F$P=F$R[F$l+2],F$g+=(F$q*F$_.a+F$I*F$_.c+F$_.tx)*F$P,F$n+=(F$q*F$_.b+F$I*F$_.d+F$_.ty)*F$P,F$l+=3;F$j.push(F$g,F$n)}this._mVerticleArr=F$j,F$Y=F$H,F$F.init2(F$E,null,F$Y,this._mVerticleArr,F$o)},F$e.drawBonePoint=function(F$e){F$e&&this._parentMatrix&&F$e.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},F$e.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},F$e.getMatrix=function(){return this._resultMatrix},F$e.copy=function(){var F$e=new F$l;return F$e.type="copy",F$e.name=this.name,F$e.attachmentName=this.attachmentName,F$e.srcDisplayIndex=this.srcDisplayIndex,F$e.parent=this.parent,F$e.displayIndex=this.displayIndex,F$e.templet=this.templet,F$e.currSlotData=this.currSlotData,F$e.currTexture=this.currTexture,F$e.currDisplayData=this.currDisplayData,F$e},F$l.createSkinMesh=function(){return F$P.isWebGL||F$P.isConchApp?F$q.skinAniSprite():(F$P.isWebGL,null)},F$a(F$l,["_tempMatrix",function(){return this._tempMatrix=new F$Ae}]),F$l}(),F$ze=function(){function F$e(){this.skinName=null,this.deformSlotDataList=[]}return F$o(F$e,"laya.ani.bone.DeformAniData"),F$e}(),F$Te=function(){function F$e(){this.deformSlotDisplayList=[]}return F$o(F$e,"laya.ani.bone.DeformSlotData"),F$e}(),F$pe=function(){function F$e(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}F$o(F$e,"laya.ani.bone.DeformSlotDisplayData");var F$F=F$e.prototype;return F$F.binarySearch1=function(F$e,F$F){var F$a=0,F$o=F$e.length-2;if(0==F$o)return 1;for(var F$E=F$o>>>1;;){if(F$e[Math.floor(F$E+1)]<=F$F?F$a=F$E+1:F$o=F$E,F$a==F$o)return F$a+1;F$E=F$a+F$o>>>1}return 0},F$F.apply=function(F$e,F$F,F$a){if(void 0===F$a&&(F$a=1),F$e+=.05,!(this.timeList.length<=0)){var F$o=0;if(!(F$e<this.timeList[0])){var F$E=this.vectices[0].length,F$s=[],F$Y=this.binarySearch1(this.timeList,F$e);if(this.frameIndex=F$Y,F$e>=this.timeList[this.timeList.length-1]){var F$_=this.vectices[this.vectices.length-1];if(F$a<1)for(F$o=0;F$o<F$E;F$o++)F$s[F$o]+=(F$_[F$o]-F$s[F$o])*F$a;else for(F$o=0;F$o<F$E;F$o++)F$s[F$o]=F$_[F$o];this.deformData=F$s}else{this.tweenKeyList[this.frameIndex];var F$R=this.vectices[this.frameIndex-1],F$H=this.vectices[this.frameIndex],F$g=this.timeList[this.frameIndex-1],F$n=this.timeList[this.frameIndex];F$a=this.tweenKeyList[F$Y-1]?(F$e-F$g)/(F$n-F$g):0;var F$O=NaN;for(F$o=0;F$o<F$E;F$o++)F$O=F$R[F$o],F$s[F$o]=F$O+(F$H[F$o]-F$O)*F$a;this.deformData=F$s}}}},F$e}(),F$Je=function(){function F$e(){this.time=NaN,this.drawOrder=[]}return F$o(F$e,"laya.ani.bone.DrawOrderData"),F$e}(),F$ke=function(){function F$e(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return F$o(F$e,"laya.ani.bone.EventData"),F$e}(),F$$=function(){function F$oe(F$e,F$F){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=F$e,this._targetBone=F$F[F$e.targetBoneIndex],this.isSpine=F$e.isSpine,null==this._bones&&(this._bones=[]);for(var F$a=this._bones.length=0,F$o=F$e.boneIndexs.length;F$a<F$o;F$a++)this._bones.push(F$F[F$e.boneIndexs[F$a]]);this.name=F$e.name,this.mix=F$e.mix,this.bendDirection=F$e.bendDirection}F$o(F$oe,"laya.ani.bone.IkConstraint");var F$e=F$oe.prototype;return F$e.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},F$e._applyIk1=function(F$e,F$F,F$a,F$o){var F$E=F$e.parentBone,F$s=1/(F$E.resultMatrix.a*F$E.resultMatrix.d-F$E.resultMatrix.b*F$E.resultMatrix.c),F$Y=F$F-F$E.resultMatrix.tx,F$_=F$a-F$E.resultMatrix.ty,F$R=(F$Y*F$E.resultMatrix.d-F$_*F$E.resultMatrix.c)*F$s-F$e.transform.x,F$H=(F$_*F$E.resultMatrix.a-F$Y*F$E.resultMatrix.b)*F$s-F$e.transform.y,F$g=Math.atan2(F$H,F$R)*F$oe.radDeg-0-F$e.transform.skX;F$e.transform.scX<0&&(F$g+=180),180<F$g?F$g-=360:F$g<-180&&(F$g+=360),F$e.transform.skX=F$e.transform.skY=F$e.transform.skX+F$g*F$o,F$e.update()},F$e.updatePos=function(F$e,F$F){this._sp&&this._sp.pos(F$e,F$F)},F$e._applyIk2=function(F$e,F$F,F$a,F$o,F$E,F$s){if(0!=F$s){var F$Y=F$e.resultTransform.x,F$_=F$e.resultTransform.y,F$R=F$e.transform.scX,F$H=F$e.transform.scY,F$g=F$F.transform.scX,F$n=0,F$O=0,F$q=0;F$q=F$R<0?(F$R=-F$R,F$n=180,-1):(F$n=0,1),F$H<0&&(F$H=-F$H,F$q=-F$q),F$O=F$g<0?(F$g=-F$g,180):0;var F$I=F$F.resultTransform.x,F$l=NaN,F$P=NaN,F$j=NaN,F$$=F$e.resultMatrix.a,F$y=F$e.resultMatrix.c,F$M=F$e.resultMatrix.b,F$D=F$e.resultMatrix.d,F$m=Math.abs(F$R-F$H)<=1e-4;F$j=F$m?(F$P=F$$*F$I+F$y*(F$l=F$F.resultTransform.y)+F$e.resultMatrix.tx,F$M*F$I+F$D*F$l+F$e.resultMatrix.ty):(F$l=0,F$P=F$$*F$I+F$e.resultMatrix.tx,F$M*F$I+F$e.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new F$se,F$Ee.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$a,F$o,15,"#ffff00"),this._sp.graphics.drawCircle(F$P,F$j,15,"#ff00ff")),F$e.setRotation(Math.atan2(F$j-F$e.resultMatrix.ty,F$P-F$e.resultMatrix.tx));var F$b=F$e.parentBone;F$$=F$b.resultMatrix.a,F$y=F$b.resultMatrix.c,F$M=F$b.resultMatrix.b;var F$L=1/(F$$*(F$D=F$b.resultMatrix.d)-F$y*F$M),F$B=F$a-F$b.resultMatrix.tx,F$v=F$o-F$b.resultMatrix.ty,F$K=(F$B*F$D-F$v*F$y)*F$L-F$Y,F$V=(F$v*F$$-F$B*F$M)*F$L-F$_,F$G=((F$B=F$P-F$b.resultMatrix.tx)*F$D-(F$v=F$j-F$b.resultMatrix.ty)*F$y)*F$L-F$Y,F$A=(F$v*F$$-F$B*F$M)*F$L-F$_,F$U=Math.sqrt(F$G*F$G+F$A*F$A),F$r=F$F.length*F$g,F$Z=NaN,F$z=NaN;if(F$m){var F$T=(F$K*F$K+F$V*F$V-F$U*F$U-(F$r*=F$R)*F$r)/(2*F$U*F$r);F$T<-1?F$T=-1:1<F$T&&(F$T=1),F$z=Math.acos(F$T)*F$E,F$$=F$U+F$r*F$T,F$y=F$r*Math.sin(F$z),F$Z=Math.atan2(F$V*F$$-F$K*F$y,F$K*F$$+F$V*F$y)}else{var F$p=(F$$=F$R*F$r)*F$$,F$J=(F$y=F$H*F$r)*F$y,F$k=F$K*F$K+F$V*F$V,F$d=Math.atan2(F$V,F$K),F$w=-2*F$J*F$U,F$S=F$J-F$p;if(0<(F$D=F$w*F$w-4*F$S*(F$M=F$J*F$U*F$U+F$p*F$k-F$p*F$J))){var F$C=Math.sqrt(F$D);F$w<0&&(F$C=-F$C);var F$u=(F$C=-(F$w+F$C)/2)/F$S,F$x=F$M/F$C,F$N=Math.abs(F$u)<Math.abs(F$x)?F$u:F$x;F$N*F$N<=F$k&&(F$v=Math.sqrt(F$k-F$N*F$N)*F$E,F$Z=F$d-Math.atan2(F$v,F$N),F$z=Math.atan2(F$v/F$H,(F$N-F$U)/F$R))}var F$X=0,F$W=Number.MAX_VALUE,F$f=0,F$i=0,F$Q=0,F$t=0,F$c=0,F$h=0;F$t<(F$D=(F$B=F$U+F$$)*F$B)&&(F$Q=0,F$t=F$D,F$c=F$B),(F$D=(F$B=F$U-F$$)*F$B)<F$W&&(F$X=Math.PI,F$W=F$D,F$f=F$B);var F$ee=Math.acos(-F$$*F$U/(F$p-F$J));(F$D=(F$B=F$$*Math.cos(F$ee)+F$U)*F$B+(F$v=F$y*Math.sin(F$ee))*F$v)<F$W&&(F$X=F$ee,F$W=F$D,F$f=F$B,F$i=F$v),F$t<F$D&&(F$Q=F$ee,F$t=F$D,F$c=F$B,F$h=F$v),F$z=F$k<=(F$W+F$t)/2?(F$Z=F$d-Math.atan2(F$i*F$E,F$f),F$X*F$E):(F$Z=F$d-Math.atan2(F$h*F$E,F$c),F$Q*F$E)}var F$Fe=Math.atan2(F$l,F$I)*F$q,F$ae=F$e.resultTransform.skX;180<(F$Z=(F$Z-F$Fe)*F$oe.radDeg+F$n-F$ae)?F$Z-=360:F$Z<-180&&(F$Z+=360),F$e.resultTransform.x=F$Y,F$e.resultTransform.y=F$_,F$e.resultTransform.skX=F$e.resultTransform.skY=F$ae+F$Z*F$s,F$ae=F$F.resultTransform.skX,180<(F$z=((F$z+F$Fe)*F$oe.radDeg-0)*F$q+F$O-(F$ae%=360))?F$z-=360:F$z<-180&&(F$z+=360),F$F.resultTransform.x=F$I,F$F.resultTransform.y=F$l,F$F.resultTransform.skX=F$F.resultTransform.skY=F$F.resultTransform.skY+F$z*F$s,F$e.update()}},F$e._applyIk3=function(F$e,F$F,F$a,F$o,F$E,F$s){if(0!=F$s){var F$Y,F$_,F$R=F$F.resultMatrix.a*F$F.length,F$H=F$F.resultMatrix.b*F$F.length,F$g=F$R*F$R+F$H*F$H,F$n=Math.sqrt(F$g),F$O=F$e.resultMatrix.tx,F$q=F$e.resultMatrix.ty,F$I=F$F.resultMatrix.tx,F$l=F$F.resultMatrix.ty,F$P=F$I-F$O,F$j=F$l-F$q,F$$=F$P*F$P+F$j*F$j,F$y=Math.sqrt(F$$),F$M=(F$P=F$a-F$e.resultMatrix.tx)*F$P+(F$j=F$o-F$e.resultMatrix.ty)*F$j,F$D=Math.sqrt(F$M);if(F$n+F$y<=F$D||F$D+F$n<=F$y||F$D+F$y<=F$n){var F$m=NaN;F$I=F$O+(F$m=F$n+F$y<=F$D?1:-1)*(F$a-F$O)*F$y/F$D,F$l=F$q+F$m*(F$o-F$q)*F$y/F$D}else{var F$b=(F$$-F$g+F$M)/(2*F$M),F$L=Math.sqrt(F$$-F$b*F$b*F$M)/F$D,F$B=F$O+F$P*F$b,F$v=F$q+F$j*F$b,F$K=-F$j*F$L,F$V=F$P*F$L;F$l=0<F$E?(F$I=F$B-F$K,F$v-F$V):(F$I=F$B+F$K,F$v+F$V)}F$Y=F$I,F$_=F$l,this.isDebug&&(this._sp||(this._sp=new F$se,F$Ee.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$O,F$q,15,"#ff00ff"),this._sp.graphics.drawCircle(F$a,F$o,15,"#ffff00"),this._sp.graphics.drawCircle(F$Y,F$_,15,"#ff00ff"));var F$G,F$A;F$G=Math.atan2(F$_-F$e.resultMatrix.ty,F$Y-F$e.resultMatrix.tx),F$e.setRotation(F$G),(F$A=F$oe._tempMatrix).identity(),F$A.rotate(F$G),F$A.scale(F$e.resultMatrix.getScaleX(),F$e.resultMatrix.getScaleY()),F$A.translate(F$e.resultMatrix.tx,F$e.resultMatrix.ty),F$A.copyTo(F$e.resultMatrix),F$e.updateChild();var F$U,F$r;F$U=Math.atan2(F$o-F$_,F$a-F$Y),F$F.setRotation(F$U),(F$r=F$oe._tempMatrix).identity(),F$r.rotate(F$U),F$r.scale(F$F.resultMatrix.getScaleX(),F$F.resultMatrix.getScaleY()),F$r.translate(F$Y,F$_),F$A.copyTo(F$F.resultMatrix),F$F.updateChild()}},F$a(F$oe,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new F$Ae}]),F$oe}(),F$de=function(){function F$e(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return F$o(F$e,"laya.ani.bone.IkConstraintData"),F$e}(),F$D=function(){function F$r(F$e,F$F){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=F$e,this.position=F$e.position,this.spacing=F$e.spacing,this.rotateMix=F$e.rotateMix,this.translateMix=F$e.translateMix,this.bones=[];for(var F$a=this.data.bones,F$o=0,F$E=F$a.length;F$o<F$E;F$o++)this.bones.push(F$F[F$a[F$o]])}F$o(F$r,"laya.ani.bone.PathConstraint");var F$e=F$r.prototype;return F$e.apply=function(F$e,F$F){if(this.target){var F$a=this.translateMix,F$o=this.translateMix,F$E=0<F$o,F$s=this.data.spacingMode,F$Y="length"==F$s,F$_=this.data.rotateMode,F$R="tangent"==F$_,F$H="chainScale"==F$_,F$g=[],F$n=this.bones.length,F$O=F$R?F$n:F$n+1,F$q=[];(this._spaces=F$q)[0]=this.position;var F$I=this.spacing;if(F$H||F$Y)for(var F$l=0,F$P=F$O-1;F$l<F$P;){var F$j=this.bones[F$l],F$$=F$j.length,F$y=F$$*F$j.resultMatrix.a,F$M=F$$*F$j.resultMatrix.b;F$$=Math.sqrt(F$y*F$y+F$M*F$M),F$H&&(F$g[F$l]=F$$),F$q[++F$l]=F$Y?Math.max(0,F$$+F$I):F$I}else for(F$l=1;F$l<F$O;F$l++)F$q[F$l]=F$I;var F$D=this.computeWorldPositions(this.target,F$e,F$F,F$O,F$R,"percent"==this.data.positionMode,"percent"==F$s);if(this._debugKey){for(F$l=0;F$l<F$D.length;F$l++)F$F.drawCircle(F$D[F$l++],F$D[F$l++],5,"#00ff00");var F$m=[];for(F$l=0;F$l<F$D.length;F$l++)F$m.push(F$D[F$l++],F$D[F$l++]);F$F.drawLines(0,0,F$m,"#ff0000")}var F$b=F$D[0],F$L=F$D[1],F$B=this.data.offsetRotation,F$v="chain"==F$_&&0==F$B,F$K=NaN;for(F$l=0,F$K=3;F$l<F$n;F$l++,F$K+=3){(F$j=this.bones[F$l]).resultMatrix.tx+=(F$b-F$j.resultMatrix.tx)*F$a,F$j.resultMatrix.ty+=(F$L-F$j.resultMatrix.ty)*F$a;var F$V=(F$y=F$D[F$K])-F$b,F$G=(F$M=F$D[F$K+1])-F$L;if(F$H&&0!=(F$$=F$g[F$l])){var F$A=(Math.sqrt(F$V*F$V+F$G*F$G)/F$$-1)*F$o+1;F$j.resultMatrix.a*=F$A,F$j.resultMatrix.c*=F$A}if(F$b=F$y,F$L=F$M,F$E){var F$U=F$j.resultMatrix.a,F$r=F$j.resultMatrix.c,F$Z=F$j.resultMatrix.b,F$z=F$j.resultMatrix.d,F$T=NaN,F$p=NaN,F$J=NaN;F$T=F$R?F$D[F$K-1]:0==F$q[F$l+1]?F$D[F$K+2]:Math.atan2(F$G,F$V),F$T-=Math.atan2(F$Z,F$U)-F$B/180*Math.PI,F$v&&(F$p=Math.cos(F$T),F$J=Math.sin(F$T),F$b+=((F$$=F$j.length)*(F$p*F$U-F$J*F$Z)-F$V)*F$o,F$L+=(F$$*(F$J*F$U+F$p*F$Z)-F$G)*F$o),F$T>Math.PI?F$T-=2*Math.PI:F$T<-Math.PI&&(F$T+=2*Math.PI),F$T*=F$o,F$p=Math.cos(F$T),F$J=Math.sin(F$T),F$j.resultMatrix.a=F$p*F$U-F$J*F$Z,F$j.resultMatrix.c=F$p*F$r-F$J*F$z,F$j.resultMatrix.b=F$J*F$U+F$p*F$Z,F$j.resultMatrix.d=F$J*F$r+F$p*F$z}}}},F$e.computeWorldVertices2=function(F$e,F$F,F$a,F$o,F$E,F$s){var F$Y,F$_,F$R=F$e.currDisplayData.bones,F$H=F$e.currDisplayData.weights,F$g=F$e.currDisplayData.triangles,F$n=0,F$O=0,F$q=0,F$I=0,F$l=0,F$P=0,F$j=0,F$$=0,F$y=0,F$M=0,F$D=0;if(null!=F$R){for(F$n=0;F$n<F$a;F$n+=2)F$O+=(F$I=F$R[F$O])+1,F$q+=F$I;var F$m=F$F;for(F$l=F$s,F$P=3*F$q;F$l<F$o;F$l+=2){for(F$$=F$j=0,F$I=F$R[F$O++],F$I+=F$O;F$O<F$I;F$O++,F$P+=3){F$Y=F$m[F$R[F$O]].resultMatrix,F$y=F$H[F$P],F$M=F$H[F$P+1];var F$b=F$H[F$P+2];F$j+=(F$y*F$Y.a+F$M*F$Y.c+F$Y.tx)*F$b,F$$+=(F$y*F$Y.b+F$M*F$Y.d+F$Y.ty)*F$b}F$E[F$l]=F$j,F$E[F$l+1]=F$$}}else{var F$L,F$B;if(F$g||(F$g=F$H),F$e.deformData&&(F$g=F$e.deformData),F$L=F$e.parent,F$F)for(F$D=F$F.length,F$n=0;F$n<F$D;F$n++)if(F$F[F$n].name==F$L){F$_=F$F[F$n];break}F$_&&(F$B=F$_.resultMatrix),F$B||(F$B=F$r._tempMt);var F$v=F$B.tx,F$K=F$B.ty,F$V=F$B.a,F$G=F$B.b,F$A=F$B.c,F$U=F$B.d;for(F$_&&(F$U*=F$_.d),F$O=F$a,F$l=F$s;F$l<F$o;F$O+=2,F$l+=2)F$y=F$g[F$O],F$M=F$g[F$O+1],F$E[F$l]=F$y*F$V+F$M*F$G+F$v,F$E[F$l+1]=-(F$y*F$A+F$M*F$U+F$K)}},F$e.computeWorldPositions=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y){F$e.currDisplayData.bones,F$e.currDisplayData.weights,F$e.currDisplayData.triangles;var F$_=[],F$R=0,F$H=F$e.currDisplayData.verLen,F$g=this.position,F$n=this._spaces,F$O=[],F$q=[],F$I=F$H/6,F$l=-1,F$P=NaN,F$j=0,F$$=0,F$y=NaN,F$M=NaN,F$D=NaN,F$m=NaN;if(F$I--,F$H-=4,this.computeWorldVertices2(F$e,F$F,2,F$H,F$_,0),this._debugKey)for(F$R=0;F$R<F$_.length;)F$a.drawCircle(F$_[F$R++],F$_[F$R++],10,"#ff0000");F$O=F$_,this._curves.length=F$I;var F$b=this._curves,F$L=F$O[F$P=0],F$B=F$O[1],F$v=0,F$K=0,F$V=0,F$G=0,F$A=0,F$U=0,F$r=NaN,F$Z=NaN,F$z=NaN,F$T=NaN,F$p=NaN,F$J=NaN,F$k=NaN,F$d=NaN,F$w=0;for(F$R=0,F$w=2;F$R<F$I;F$R++,F$w+=6)F$v=F$O[F$w],F$K=F$O[F$w+1],F$V=F$O[F$w+2],F$G=F$O[F$w+3],F$p=2*(F$r=.1875*(F$L-2*F$v+F$V))+(F$z=.09375*(3*(F$v-F$V)-F$L+(F$A=F$O[F$w+4]))),F$J=2*(F$Z=.1875*(F$B-2*F$K+F$G))+(F$T=.09375*(3*(F$K-F$G)-F$B+(F$U=F$O[F$w+5]))),F$k=.75*(F$v-F$L)+F$r+.16666667*F$z,F$d=.75*(F$K-F$B)+F$Z+.16666667*F$T,F$P+=Math.sqrt(F$k*F$k+F$d*F$d),F$k+=F$p,F$d+=F$J,F$p+=F$z,F$J+=F$T,F$P+=Math.sqrt(F$k*F$k+F$d*F$d),F$k+=F$p,F$d+=F$J,F$P+=Math.sqrt(F$k*F$k+F$d*F$d),F$k+=F$p+F$z,F$d+=F$J+F$T,F$P+=Math.sqrt(F$k*F$k+F$d*F$d),F$b[F$R]=F$P,F$L=F$A,F$B=F$U;if(F$s&&(F$g*=F$P),F$Y)for(F$R=0;F$R<F$o;F$R++)F$n[F$R]*=F$P;var F$S=this._segments,F$C=0,F$u=0;for(F$u=F$$=F$j=F$R=0;F$R<F$o;F$R++,F$j+=3)if((F$y=F$g+=F$M=F$n[F$R])<0)this.addBeforePosition(F$y,F$O,0,F$q,F$j);else if(F$P<F$y)this.addAfterPosition(F$y-F$P,F$O,F$H-4,F$q,F$j);else{for(;;F$$++)if(!((F$m=F$b[F$$])<F$y)){0==F$$?F$y/=F$m:F$y=(F$y-(F$D=F$b[F$$-1]))/(F$m-F$D);break}if(F$$!=F$l){var F$x=6*(F$l=F$$);for(F$L=F$O[F$x],F$B=F$O[F$x+1],F$v=F$O[F$x+2],F$K=F$O[F$x+3],F$V=F$O[F$x+4],F$G=F$O[F$x+5],F$p=2*(F$r=.03*(F$L-2*F$v+F$V))+(F$z=.006*(3*(F$v-F$V)-F$L+(F$A=F$O[F$x+6]))),F$J=2*(F$Z=.03*(F$B-2*F$K+F$G))+(F$T=.006*(3*(F$K-F$G)-F$B+(F$U=F$O[F$x+7]))),F$k=.3*(F$v-F$L)+F$r+.16666667*F$z,F$d=.3*(F$K-F$B)+F$Z+.16666667*F$T,F$C=Math.sqrt(F$k*F$k+F$d*F$d),F$S[0]=F$C,F$x=1;F$x<8;F$x++)F$k+=F$p,F$d+=F$J,F$p+=F$z,F$J+=F$T,F$C+=Math.sqrt(F$k*F$k+F$d*F$d),F$S[F$x]=F$C;F$k+=F$p,F$d+=F$J,F$C+=Math.sqrt(F$k*F$k+F$d*F$d),F$S[8]=F$C,F$k+=F$p+F$z,F$d+=F$J+F$T,F$C+=Math.sqrt(F$k*F$k+F$d*F$d),F$S[9]=F$C,F$u=0}for(F$y*=F$C;;F$u++)if(!((F$m=F$S[F$u])<F$y)){0==F$u?F$y/=F$m:F$y=F$u+(F$y-(F$D=F$S[F$u-1]))/(F$m-F$D);break}this.addCurvePosition(.1*F$y,F$L,F$B,F$v,F$K,F$V,F$G,F$A,F$U,F$q,F$j,F$E||0<F$R&&0==F$M)}return F$q},F$e.addBeforePosition=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$F[F$a],F$Y=F$F[F$a+1],F$_=F$F[F$a+2]-F$s,F$R=F$F[F$a+3]-F$Y,F$H=Math.atan2(F$R,F$_);F$o[F$E]=F$s+F$e*Math.cos(F$H),F$o[F$E+1]=F$Y+F$e*Math.sin(F$H),F$o[F$E+2]=F$H},F$e.addAfterPosition=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$F[F$a+2],F$Y=F$F[F$a+3],F$_=F$s-F$F[F$a],F$R=F$Y-F$F[F$a+1],F$H=Math.atan2(F$R,F$_);F$o[F$E]=F$s+F$e*Math.cos(F$H),F$o[F$E+1]=F$Y+F$e*Math.sin(F$H),F$o[F$E+2]=F$H},F$e.addCurvePosition=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g,F$n){0==F$e&&(F$e=1e-4);var F$O=F$e*F$e,F$q=F$O*F$e,F$I=1-F$e,F$l=F$I*F$I,F$P=F$l*F$I,F$j=F$I*F$e,F$$=3*F$j,F$y=F$I*F$$,F$M=F$$*F$e,F$D=F$F*F$P+F$o*F$y+F$s*F$M+F$_*F$q,F$m=F$a*F$P+F$E*F$y+F$Y*F$M+F$R*F$q;F$H[F$g]=F$D,F$H[F$g+1]=F$m,F$H[F$g+2]=F$n?Math.atan2(F$m-(F$a*F$l+F$E*F$j*2+F$Y*F$O),F$D-(F$F*F$l+F$o*F$j*2+F$s*F$O)):0},F$r.NONE=-1,F$r.BEFORE=-2,F$r.AFTER=-3,F$a(F$r,["_tempMt",function(){return this._tempMt=new F$Ae}]),F$r}(),F$we=function(){function F$e(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return F$o(F$e,"laya.ani.bone.PathConstraintData"),F$e}(),F$Se=function(){function F$e(){this.name=null,this.slotArr=[]}return F$o(F$e,"laya.ani.bone.SkinData"),F$e}(),F$Ce=function(){function F$e(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}F$o(F$e,"laya.ani.bone.SkinSlotDisplayData");var F$F=F$e.prototype;return F$F.createTexture=function(F$e){return this.texture||(this.texture=new F$Ue(F$e.bitmap,this.uvs),F$e.bitmap.alphaTexture&&(this.texture.alphaTexture=new F$Ue(F$e.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=F$e.height,this.texture.height=F$e.width,this.texture.offsetX=-F$e.offsetX,this.texture.offsetY=-F$e.offsetY,this.texture.sourceWidth=F$e.sourceHeight,this.texture.sourceHeight=F$e.sourceWidth):(this.texture.width=F$e.width,this.texture.height=F$e.height,this.texture.offsetX=-F$e.offsetX,this.texture.offsetY=-F$e.offsetY,this.texture.sourceWidth=F$e.sourceWidth,this.texture.sourceHeight=F$e.sourceHeight),F$P.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},F$F.destory=function(){this.texture&&this.texture.destroy()},F$e}(),F$ue=function(){function F$e(){this.name=null,this.displayArr=[]}return F$o(F$e,"laya.ani.bone.SlotData"),F$e.prototype.getDisplayByName=function(F$e){for(var F$F=0,F$a=this.displayArr.length;F$F<F$a;F$F++)if(this.displayArr[F$F].attachmentName==F$e)return F$F;return-1},F$e}(),F$m=function(){function F$e(F$e,F$F){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=F$l(2,0),this._data=F$e,null==this._bones&&(this._bones=[]),this.target=F$F[F$e.targetIndex];var F$a,F$o=0;for(F$o=0,F$a=F$e.boneIndexs.length;F$o<F$a;F$o++)this._bones.push(F$F[F$e.boneIndexs[F$o]]);this.rotateMix=F$e.rotateMix,this.translateMix=F$e.translateMix,this.scaleMix=F$e.scaleMix,this.shearMix=F$e.shearMix}return F$o(F$e,"laya.ani.bone.TfConstraint"),F$e.prototype.apply=function(){for(var F$e,F$F=this.target.resultMatrix.a,F$a=this.target.resultMatrix.b,F$o=this.target.resultMatrix.c,F$E=this.target.resultMatrix.d,F$s=0,F$Y=this._bones.length;F$s<F$Y;F$s++){if(F$e=this._bones[F$s],0<this.rotateMix){var F$_=F$e.resultMatrix.a,F$R=F$e.resultMatrix.b,F$H=F$e.resultMatrix.c,F$g=F$e.resultMatrix.d,F$n=Math.atan2(F$o,F$F)-Math.atan2(F$H,F$_)+this._data.offsetRotation*Math.PI/180;F$n>Math.PI?F$n-=2*Math.PI:F$n<-Math.PI&&(F$n+=2*Math.PI),F$n*=this.rotateMix;var F$O=Math.cos(F$n),F$q=Math.sin(F$n);F$e.resultMatrix.a=F$O*F$_-F$q*F$H,F$e.resultMatrix.b=F$O*F$R-F$q*F$g,F$e.resultMatrix.c=F$q*F$_+F$O*F$H,F$e.resultMatrix.d=F$q*F$R+F$O*F$g}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),F$e.resultMatrix.tx+=(this._temp[0]-F$e.resultMatrix.tx)*this.translateMix,F$e.resultMatrix.ty+=(this._temp[1]-F$e.resultMatrix.ty)*this.translateMix,F$e.updateChild()),0<this.scaleMix){var F$I=Math.sqrt(F$e.resultMatrix.a*F$e.resultMatrix.a+F$e.resultMatrix.c*F$e.resultMatrix.c),F$l=Math.sqrt(F$F*F$F+F$o*F$o),F$P=1e-5<F$I?(F$I+(F$l-F$I+this._data.offsetScaleX)*this.scaleMix)/F$I:0;F$e.resultMatrix.a*=F$P,F$e.resultMatrix.c*=F$P,F$I=Math.sqrt(F$e.resultMatrix.b*F$e.resultMatrix.b+F$e.resultMatrix.d*F$e.resultMatrix.d),F$l=Math.sqrt(F$a*F$a+F$E*F$E),F$P=1e-5<F$I?(F$I+(F$l-F$I+this._data.offsetScaleY)*this.scaleMix)/F$I:0,F$e.resultMatrix.b*=F$P,F$e.resultMatrix.d*=F$P}if(0<this.shearMix){F$R=F$e.resultMatrix.b,F$g=F$e.resultMatrix.d;var F$j=Math.atan2(F$g,F$R);(F$n=Math.atan2(F$E,F$a)-Math.atan2(F$o,F$F)-(F$j-Math.atan2(F$e.resultMatrix.c,F$e.resultMatrix.a)))>Math.PI?F$n-=2*Math.PI:F$n<-Math.PI&&(F$n+=2*Math.PI),F$n=F$j+(F$n+this._data.offsetShearY*Math.PI/180)*this.shearMix,F$P=Math.sqrt(F$R*F$R+F$g*F$g),F$e.resultMatrix.b=Math.cos(F$n)*F$P,F$e.resultMatrix.d=Math.sin(F$n)*F$P}}},F$e}(),F$xe=function(){function F$e(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return F$o(F$e,"laya.ani.bone.TfConstraintData"),F$e}(),F$Ne=function(){function F$e(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}F$o(F$e,"laya.ani.bone.Transform");var F$F=F$e.prototype;return F$F.initData=function(F$e){null!=F$e.x&&(this.x=F$e.x),null!=F$e.y&&(this.y=F$e.y),null!=F$e.skX&&(this.skX=F$e.skX),null!=F$e.skY&&(this.skY=F$e.skY),null!=F$e.scX&&(this.scX=F$e.scX),null!=F$e.scY&&(this.scY=F$e.scY)},F$F.getMatrix=function(){var F$e;return(F$e=this.mMatrix?this.mMatrix:this.mMatrix=new F$Ae).identity(),F$e.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(F$e,this.skewX*Math.PI/180,this.skewY*Math.PI/180),F$e.rotate(this.skX*Math.PI/180),F$e.translate(this.x,this.y),F$e},F$F.skew=function(F$e,F$F,F$a){var F$o=Math.sin(F$a),F$E=Math.cos(F$a),F$s=Math.sin(F$F),F$Y=Math.cos(F$F);return F$e.setTo(F$e.a*F$Y-F$e.b*F$o,F$e.a*F$s+F$e.b*F$E,F$e.c*F$Y-F$e.d*F$o,F$e.c*F$s+F$e.d*F$E,F$e.tx*F$Y-F$e.ty*F$o,F$e.tx*F$s+F$e.ty*F$E),F$e},F$e}(),F$b=function(){function F$e(){}return F$o(F$e,"laya.ani.bone.UVTools"),F$e.getRelativeUV=function(F$e,F$F,F$a){var F$o=F$e[0],F$E=F$e[2]-F$e[0],F$s=F$e[1],F$Y=F$e[5]-F$e[1];F$a||(F$a=[]),F$a.length=F$F.length;var F$_,F$R=0;F$_=F$a.length;var F$H=1/F$E,F$g=1/F$Y;for(F$R=0;F$R<F$_;F$R+=2)F$a[F$R]=(F$F[F$R]-F$o)*F$H,F$a[F$R+1]=(F$F[F$R+1]-F$s)*F$g;return F$a},F$e.getAbsoluteUV=function(F$e,F$F,F$a){if(0==F$e[0]&&0==F$e[1]&&1==F$e[4]&&1==F$e[5])return F$a?(F$j.copyArray(F$a,F$F),F$a):F$F;var F$o=F$e[0],F$E=F$e[2]-F$e[0],F$s=F$e[1],F$Y=F$e[5]-F$e[1];F$a||(F$a=[]),F$a.length=F$F.length;var F$_,F$R=0;for(F$_=F$a.length,F$R=0;F$R<F$_;F$R+=2)F$a[F$R]=F$F[F$R]*F$E+F$o,F$a[F$R+1]=F$F[F$R+1]*F$Y+F$s;return F$a},F$e}(),F$r=function(){function F$e(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return F$o(F$e,"laya.ani.KeyFramesContent"),F$e}(),F$L=function(){function F$g(){}return F$o(F$g,"laya.ani.math.BezierLerp"),F$g.getBezierRate=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$g._getBezierParamKey(F$F,F$a,F$o,F$E),F$Y=100*F$s+F$e;if(F$g._bezierResultCache[F$Y])return F$g._bezierResultCache[F$Y];var F$_,F$R=F$g._getBezierPoints(F$F,F$a,F$o,F$E,F$s),F$H=0;for(F$_=F$R.length,F$H=0;F$H<F$_;F$H+=2)if(F$e<=F$R[F$H])return F$g._bezierResultCache[F$Y]=F$R[F$H+1],F$R[F$H+1];return F$g._bezierResultCache[F$Y]=1},F$g._getBezierParamKey=function(F$e,F$F,F$a,F$o){return 100*(100*(100*(100*F$e+F$F)+F$a)+F$o)},F$g._getBezierPoints=function(F$e,F$F,F$a,F$o,F$E){return F$g._bezierPointsCache[F$E]?F$g._bezierPointsCache[F$E]:(F$s=[0,0,F$e,F$F,F$a,F$o,1,1],F$Y=(new F$_).getBezierPoints(F$s,100,3),F$g._bezierPointsCache[F$E]=F$Y);var F$s,F$Y},F$g._bezierResultCache={},F$g._bezierPointsCache={},F$g}(),F$B=function(F$e){function F$F(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,F$F.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}F$o(F$F,"laya.ani.AnimationPlayer",F$E);var F$a=F$F.prototype;return F$Ee.imps(F$a,{"laya.resource.IDestroy":!0}),F$a._onTempletLoadedComputeFullKeyframeIndices=function(F$e,F$F,F$a){this._templet===F$a&&this._cachePlayRate===F$e&&this._cacheFrameRate===F$F&&this._computeFullKeyframeIndices()},F$a._computeFullKeyframeIndices=function(){for(var F$e=this._fullFrames=[],F$F=this._templet,F$a=this._cacheFrameRateInterval*this._cachePlayRate,F$o=0,F$E=F$F.getAnimationCount();F$o<F$E;F$o++){for(var F$s=[],F$Y=0,F$_=F$F.getAnimation(F$o).nodes.length;F$Y<F$_;F$Y++){for(var F$R=F$F.getAnimation(F$o).nodes[F$Y],F$H=Math.floor(F$R.playTime/F$a+.01),F$g=new Uint16Array(F$H+1),F$n=-1,F$O=0,F$q=F$R.keyFrame.length;F$O<F$q;F$O++){var F$I=F$R.keyFrame[F$O],F$l=F$I.startTime,F$P=F$l+F$I.duration+F$a;do{for(var F$j=Math.floor(F$l/F$a+.5),F$$=F$n+1;F$$<F$j;F$$++)F$g[F$$]=F$O;F$g[F$n=F$j]=F$O,F$l+=F$a}while(F$l<=F$P)}F$s.push(F$g)}F$e.push(F$s)}},F$a._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},F$a._calculatePlayDuration=function(){if(0!==this.state){var F$e=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=F$e),this._playEnd>F$e&&(this._playEnd=F$e),this._playDuration=this._playEnd-this._playStart}},F$a._setPlayParams=function(F$e,F$F){this._currentTime=F$e,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$F+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$F},F$a._setPlayParamsWhenStop=function(F$e,F$F){this._currentTime=F$e,this._currentKeyframeIndex=Math.max(Math.floor(F$e/F$F+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$F,this._currentAnimationClipIndex=-1},F$a._update=function(F$e){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var F$F=this._cacheFrameRateInterval*this._cachePlayRate,F$a=0;this._startUpdateLoopCount!==F$I.loopCount&&(F$a=F$e*this.playbackRate,this._elapsedPlaybackTime+=F$a);var F$o=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=F$o)return this._setPlayParamsWhenStop(F$o,F$F),void this.event("stopped");if(F$a+=this._currentTime,0<F$o)if(F$o<=F$a)do{if(F$a-=F$o,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$o,F$F),this._stopWhenCircleFinish=!1,void this.event("stopped");F$a<F$o&&(this._setPlayParams(F$a,F$F),this.event("complete"))}while(F$o<=F$a);else this._setPlayParams(F$a,F$F);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$o,F$F),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},F$a._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},F$a.play=function(F$e,F$F,F$a,F$o,F$E){if(void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=1),void 0===F$a&&(F$a=2147483647),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(F$a<0||F$o<0||F$E<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==F$E&&F$E<F$o)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=F$F,this._overallDuration=F$a,this._playStart=F$o,this._playEnd=F$E,this._paused=!1,this._currentAnimationClipIndex=F$e,this._currentKeyframeIndex=0,this._startUpdateLoopCount=F$I.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},F$a.playByFrame=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$e&&(F$e=0),void 0===F$F&&(F$F=1),void 0===F$a&&(F$a=2147483647),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=30);var F$Y=1e3/F$s;this.play(F$e,F$F,F$a,F$o*F$Y,F$E*F$Y)},F$a.stop=function(F$e){void 0===F$e&&(F$e=!0),F$e?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},F$s(0,F$a,"playEnd",function(){return this._playEnd}),F$s(0,F$a,"templet",function(){return this._templet},function(F$e){0===!this.state&&this.stop(!0),this._templet!==F$e&&((this._templet=F$e).loaded?this._computeFullKeyframeIndices():F$e.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),F$s(0,F$a,"playStart",function(){return this._playStart}),F$s(0,F$a,"playDuration",function(){return this._playDuration}),F$s(0,F$a,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),F$s(0,F$a,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),F$s(0,F$a,"overallDuration",function(){return this._overallDuration}),F$s(0,F$a,"currentFrameTime",function(){return this._currentFrameTime}),F$s(0,F$a,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),F$s(0,F$a,"currentPlayTime",function(){return this._currentTime+this._playStart}),F$s(0,F$a,"cachePlayRate",function(){return this._cachePlayRate},function(F$e){this._cachePlayRate!==F$e&&(this._cachePlayRate=F$e,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[F$e,this._cacheFrameRate])))}),F$s(0,F$a,"cacheFrameRate",function(){return this._cacheFrameRate},function(F$e){this._cacheFrameRate!==F$e&&(this._cacheFrameRate=F$e,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,F$e])))}),F$s(0,F$a,"currentTime",null,function(F$e){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(F$e<this._playStart||F$e>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=F$I.loopCount;var F$F=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=F$e,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$F),0),this._currentFrameTime=this._currentKeyframeIndex*F$F}}),F$s(0,F$a,"paused",function(){return this._paused},function(F$e){(this._paused=F$e)&&this.event("paused")}),F$s(0,F$a,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),F$s(0,F$a,"destroyed",function(){return this._destroyed}),F$F}(),F$Z=function(F$e){function F$F(){F$F.__super.call(this),F$P.isConchNode&&(this.drawSkin=function(F$e){F$e.transform||(F$e.transform=F$Ae.EMPTY),this._addCmd([F$e]),this.setSkinMesh&&this.setSkinMesh(F$e._ps,F$e.mVBData,F$e.mEleNum,0,F$e.mTexture,F$e.transform)})}return F$o(F$F,"laya.ani.GraphicsAni",F$Y),F$F.prototype.drawSkin=function(F$e){var F$F=[F$e];this._saveToCmd(F$P._context._drawSkin,F$F)},F$F.create=function(){return F$F._caches.pop()||new F$F},F$F.recycle=function(F$e){F$e.clear(),F$F._caches.push(F$e)},F$F._caches=[],F$F}(),F$z=function(F$e){function F$$(){this._aniMap={},this.unfixedLastAniIndex=-1,F$$.__super.call(this),this._anis=new Array}F$o(F$$,"laya.ani.AnimationTemplet",F$g);var F$F=F$$.prototype;return F$F.parse=function(F$e){var F$F=new F$Ge(F$e);this._aniVersion=F$F.readUTFString(),F$y.parse(this,F$F)},F$F._calculateKeyFrame=function(F$e,F$F,F$a){var F$o=F$e.keyFrame;F$o[F$F]=F$o[0];for(var F$E=0;F$E<F$F;F$E++){var F$s=F$o[F$E];F$s.nextData=0===F$s.duration?F$s.data:F$o[F$E+1].data}F$o.length--},F$F.onAsynLoaded=function(F$e,F$F,F$a){var F$o=new F$Ge(F$F);switch(this._aniVersion=F$o.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":F$M.parse(this,F$o);break;default:F$y.parse(this,F$o)}this._endLoaded()},F$F.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},F$F.getAnimationCount=function(){return this._anis.length},F$F.getAnimation=function(F$e){return this._anis[F$e]},F$F.getAniDuration=function(F$e){return this._anis[F$e].playTime},F$F.getNodes=function(F$e){return this._anis[F$e].nodes},F$F.getNodeIndexWithName=function(F$e,F$F){return this._anis[F$e].bone3DMap[F$F]},F$F.getNodeCount=function(F$e){return this._anis[F$e].nodes.length},F$F.getTotalkeyframesLength=function(F$e){return this._anis[F$e].totalKeyframeDatasLength},F$F.getPublicExtData=function(){return this._publicExtData},F$F.getAnimationDataWithCache=function(F$e,F$F,F$a,F$o){var F$E=F$F[F$a];if(F$E){var F$s=F$E[F$e];return F$s?F$s[F$o]:null}return null},F$F.setAnimationDataWithCache=function(F$e,F$F,F$a,F$o,F$E){var F$s=F$F[F$a]||(F$F[F$a]={});(F$s[F$e]||(F$s[F$e]=[]))[F$o]=F$E},F$F.getOriginalData=function(F$e,F$F,F$a,F$o,F$E){for(var F$s=this._anis[F$e].nodes,F$Y=0,F$_=0,F$R=F$s.length,F$H=0;F$_<F$R;F$_++){var F$g,F$n=F$s[F$_];F$g=F$n.keyFrame[F$a[F$_][F$o]],F$n.dataOffset=F$H;var F$O=F$E-F$g.startTime,F$q=F$n.lerpType;if(F$q)switch(F$q){case 0:case 1:for(F$Y=0;F$Y<F$n.keyframeWidth;)F$Y+=F$n.interpolationMethod[F$Y](F$n,F$Y,F$F,F$H+F$Y,F$g.data,F$O,null,F$g.duration,F$g.nextData);break;case 2:var F$I=F$g.interpolationData,F$l=F$I.length,F$P=0;for(F$Y=0;F$Y<F$l;){var F$j=F$I[F$Y];switch(F$j){case 6:case 7:F$Y+=F$$.interpolation[F$j](F$n,F$P,F$F,F$H+F$P,F$g.data,F$O,null,F$g.duration,F$g.nextData,F$I,F$Y+1);break;default:F$Y+=F$$.interpolation[F$j](F$n,F$P,F$F,F$H+F$P,F$g.data,F$O,null,F$g.duration,F$g.nextData)}F$P++}}else for(F$Y=0;F$Y<F$n.keyframeWidth;)F$Y+=F$n.interpolationMethod[F$Y](F$n,F$Y,F$F,F$H+F$Y,F$g.data,F$O,null,F$g.duration,F$g.nextData);F$H+=F$n.keyframeWidth}},F$F.getNodesCurrentFrameIndex=function(F$e,F$F){var F$a=this._anis[F$e].nodes;F$e!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$a.length),this.unfixedCurrentTimes=new Float32Array(F$a.length),this.unfixedLastAniIndex=F$e);for(var F$o=0,F$E=F$a.length;F$o<F$E;F$o++){var F$s=F$a[F$o];for(F$F<this.unfixedCurrentTimes[F$o]&&(this.unfixedCurrentFrameIndexes[F$o]=0),this.unfixedCurrentTimes[F$o]=F$F;this.unfixedCurrentFrameIndexes[F$o]<F$s.keyFrame.length&&!(F$s.keyFrame[this.unfixedCurrentFrameIndexes[F$o]].startTime>this.unfixedCurrentTimes[F$o]);)this.unfixedCurrentFrameIndexes[F$o]++;this.unfixedCurrentFrameIndexes[F$o]--}return this.unfixedCurrentFrameIndexes},F$F.getOriginalDataUnfixedRate=function(F$e,F$F,F$a){var F$o=this._anis[F$e].nodes;F$e!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$o.length),this.unfixedCurrentTimes=new Float32Array(F$o.length),this.unfixedKeyframes=F$l(F$o.length),this.unfixedLastAniIndex=F$e);for(var F$E=0,F$s=0,F$Y=F$o.length,F$_=0;F$s<F$Y;F$s++){var F$R=F$o[F$s];for(F$a<this.unfixedCurrentTimes[F$s]&&(this.unfixedCurrentFrameIndexes[F$s]=0),this.unfixedCurrentTimes[F$s]=F$a;this.unfixedCurrentFrameIndexes[F$s]<F$R.keyFrame.length&&!(F$R.keyFrame[this.unfixedCurrentFrameIndexes[F$s]].startTime>this.unfixedCurrentTimes[F$s]);)this.unfixedKeyframes[F$s]=F$R.keyFrame[this.unfixedCurrentFrameIndexes[F$s]],this.unfixedCurrentFrameIndexes[F$s]++;var F$H=this.unfixedKeyframes[F$s];F$R.dataOffset=F$_;var F$g=F$a-F$H.startTime;if(F$R.lerpType)switch(F$R.lerpType){case 0:case 1:for(F$E=0;F$E<F$R.keyframeWidth;)F$E+=F$R.interpolationMethod[F$E](F$R,F$E,F$F,F$_+F$E,F$H.data,F$g,null,F$H.duration,F$H.nextData);break;case 2:var F$n=F$H.interpolationData,F$O=F$n.length,F$q=0;for(F$E=0;F$E<F$O;){var F$I=F$n[F$E];switch(F$I){case 6:case 7:F$E+=F$$.interpolation[F$I](F$R,F$q,F$F,F$_+F$q,F$H.data,F$g,null,F$H.duration,F$H.nextData,F$n,F$E+1);break;default:F$E+=F$$.interpolation[F$I](F$R,F$q,F$F,F$_+F$q,F$H.data,F$g,null,F$H.duration,F$H.nextData)}F$q++}}else for(F$E=0;F$E<F$R.keyframeWidth;)F$E+=F$R.interpolationMethod[F$E](F$R,F$E,F$F,F$_+F$E,F$H.data,F$g,null,F$H.duration,F$H.nextData);F$_+=F$R.keyframeWidth}},F$$._LinearInterpolation_0=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){var F$g=0===F$_?0:F$s/F$_;return F$a[F$o]=(1-F$g)*F$E[F$F]+F$g*F$R[F$F],1},F$$._QuaternionInterpolation_1=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){var F$g=0===F$_?0:F$s/F$_;return F$O.slerpQuaternionArray(F$E,F$F,F$R,F$F,F$g,F$a,F$o),4},F$$._AngleInterpolation_2=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return 0},F$$._RadiansInterpolation_3=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return 0},F$$._Matrix4x4Interpolation_4=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){for(var F$g=0;F$g<16;F$g++,F$F++)F$a[F$o+F$g]=F$E[F$F]+F$s*F$Y[F$F];return 16},F$$._NoInterpolation_5=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H){return F$a[F$o]=F$E[F$F],1},F$$._BezierInterpolation_6=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g){return void 0===F$g&&(F$g=0),F$a[F$o]=F$E[F$F]+(F$R[F$F]-F$E[F$F])*F$L.getBezierRate(F$s/F$_,F$H[F$g],F$H[F$g+1],F$H[F$g+2],F$H[F$g+3]),5},F$$._BezierInterpolation_7=function(F$e,F$F,F$a,F$o,F$E,F$s,F$Y,F$_,F$R,F$H,F$g){return void 0===F$g&&(F$g=0),F$a[F$o]=F$H[F$g+4]+F$H[F$g+5]*F$L.getBezierRate((.001*F$s+F$H[F$g+6])/F$H[F$g+7],F$H[F$g],F$H[F$g+1],F$H[F$g+2],F$H[F$g+3]),9},F$$.load=function(F$e){return F$Ee.loader.create(F$e,null,null,F$$)},F$$.interpolation=[F$$._LinearInterpolation_0,F$$._QuaternionInterpolation_1,F$$._AngleInterpolation_2,F$$._RadiansInterpolation_3,F$$._Matrix4x4Interpolation_4,F$$._NoInterpolation_5,F$$._BezierInterpolation_6,F$$._BezierInterpolation_7],F$$}(),F$v=function(F$F){function F$a(F$e,F$F){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,F$a.__super.call(this),void 0===F$F&&(F$F=0),F$e&&this.init(F$e,F$F)}F$o(F$a,"laya.ani.bone.Skeleton",F$F);var F$e=F$a.prototype;return F$e.init=function(F$e,F$F){void 0===F$F&&(F$F=0);var F$a,F$o,F$E,F$s=0,F$Y=0;if(1==F$F)for(this._graphicsCache=[],F$s=0,F$Y=F$e.getAnimationCount();F$s<F$Y;F$s++)this._graphicsCache.push([]);if(this._yReverseMatrix=F$e.yReverseMatrix,this._aniMode=F$F,this._templet=F$e,this._player=new F$B,this._player.cacheFrameRate=F$e.rate,this._player.templet=F$e,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=F$e.mBoneArr,this._rootBone=F$e.mRootBone,this._aniSectionDic=F$e.aniSectionDic,0<F$e.ikArr.length)for(this._ikArr=[],F$s=0,F$Y=F$e.ikArr.length;F$s<F$Y;F$s++)this._ikArr.push(new F$$(F$e.ikArr[F$s],this._boneList));if(0<F$e.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),F$s=0,F$Y=F$e.pathArr.length;F$s<F$Y;F$s++)F$a=F$e.pathArr[F$s],F$o=new F$D(F$a,this._boneList),(F$E=this._boneSlotDic[F$a.name])&&((F$o=new F$D(F$a,this._boneList)).target=F$E),this._pathDic[F$a.name]=F$o;if(0<F$e.tfArr.length)for(this._tfArr=[],F$s=0,F$Y=F$e.tfArr.length;F$s<F$Y;F$s++)this._tfArr.push(new F$m(F$e.tfArr[F$s],this._boneList));if(0<F$e.skinDataArray.length){var F$_=this._templet.skinDataArray[this._skinIndex];this._skinName=F$_.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},F$e.load=function(F$e,F$F,F$a){},F$e._onLoaded=function(){},F$e._parseComplete=function(){var F$e=F$K.TEMPLET_DICTIONARY[this._aniPath];F$e&&(this.init(F$e,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},F$e._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},F$e._onPlay=function(){this.event("played")},F$e._onStop=function(){var F$e,F$F=this._templet.eventAniArr[this._aniClipIndex];if(F$F&&this._eventIndex<F$F.length)for(;this._eventIndex<F$F.length;this._eventIndex++)(F$e=F$F[this._eventIndex]).time>=this._player.playStart&&F$e.time<=this._player.playEnd&&this.event("label",F$e);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},F$e._onPause=function(){this.event("paused")},F$e._parseSrcBoneMatrix=function(){var F$e=0,F$F=0;for(F$F=this._templet.srcBoneMatrixArr.length,F$e=0;F$e<F$F;F$e++)this._boneMatrixArray.push(new F$Ae);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var F$a,F$o,F$E=this._templet.boneSlotArray;for(F$e=0,F$F=F$E.length;F$e<F$F;F$e++)F$a=F$E[F$e],null==(F$o=this._bindBoneBoneSlotDic[F$a.parent])&&(this._bindBoneBoneSlotDic[F$a.parent]=F$o=[]),this._boneSlotDic[F$a.name]=F$a=F$a.copy(),F$o.push(F$a),this._boneSlotArray.push(F$a)}},F$e._emitMissedEvents=function(F$e,F$F,F$a){void 0===F$a&&(F$a=0);var F$o=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(F$o){var F$E,F$s,F$Y=0;for(F$E=F$o.length,F$Y=F$a;F$Y<F$E;F$Y++)(F$s=F$o[F$Y]).time>=this._player.playStart&&F$s.time<=this._player.playEnd&&this.event("label",F$s)}},F$e._update=function(F$e){if(void 0===F$e&&(F$e=!0),!(this._pause||F$e&&this._indexControl)){var F$F=this.timer.currTimer,F$a=this._player.currentKeyframeIndex,F$o=F$F-this._lastTime;if(F$e?this._player._update(F$o):F$a=-1,this._lastTime=F$F,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<F$o&&this._clipIndex==F$a&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var F$E;this._lastUpdateAniClipIndex=this._aniClipIndex,F$a>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var F$s,F$Y=this._templet.eventAniArr[this._aniClipIndex];if(F$Y&&this._eventIndex<F$Y.length&&((F$E=F$Y[this._eventIndex]).time>=this._player.playStart&&F$E.time<=this._player.playEnd?this._player.currentPlayTime>=F$E.time&&(this.event("label",F$E),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(F$s=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$s&&(this.graphics=F$s));var F$_=0,F$R=0;for(F$R=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,F$R-1)&&0<F$R;)F$R--;if(F$R<this._clipIndex)for(F$_=F$R;F$_<this._clipIndex;F$_++)this._createGraphics(F$_)}else if(1==this._aniMode){if(F$s=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$s&&(this.graphics=F$s));for(F$R=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,F$R-1)&&0<F$R;)F$R--;if(F$R<this._clipIndex)for(F$_=F$R;F$_<this._clipIndex;F$_++)this._createGraphics(F$_)}this._createGraphics()}}},F$e._createGraphics=function(F$e){void 0===F$e&&(F$e=-1),-1==F$e&&(F$e=this._clipIndex);var F$F,F$a,F$o=F$e*this._player.cacheFrameRateInterval,F$E=this._templet.drawOrderAniArr[this._aniClipIndex];if(F$E&&0<F$E.length)for(this._drawOrderIndex=0,F$F=F$E[this._drawOrderIndex];F$o>=F$F.time&&(this._drawOrder=F$F.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=F$E.length));)F$F=F$E[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=F$Z.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=F$Z.create(),F$a=this.graphics;var F$s=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],F$e,F$o);var F$Y,F$_,F$R,F$H,F$g=this._aniSectionDic[this._aniClipIndex],F$n=0,F$O=0,F$q=0,F$I=0,F$l=0,F$P=this._templet.srcBoneMatrixArr.length;for(F$l=F$g[F$O=0];F$O<F$P;F$O++)F$H=this._boneList[F$O],F$R=this._templet.srcBoneMatrixArr[F$O],F$H.resultTransform.scX=F$R.scX*this._curOriginalData[F$n++],F$H.resultTransform.skX=F$R.skX+this._curOriginalData[F$n++],F$H.resultTransform.skY=F$R.skY+this._curOriginalData[F$n++],F$H.resultTransform.scY=F$R.scY*this._curOriginalData[F$n++],F$H.resultTransform.x=F$R.x+this._curOriginalData[F$n++],F$H.resultTransform.y=F$R.y+this._curOriginalData[F$n++],8===this._templet.tMatrixDataLen&&(F$H.resultTransform.skewX=F$R.skewX+this._curOriginalData[F$n++],F$H.resultTransform.skewY=F$R.skewY+this._curOriginalData[F$n++]);var F$j,F$$={},F$y={};for(F$l+=F$g[1];F$O<F$l;F$O++)F$$[(F$j=F$s[F$O]).name]=this._curOriginalData[F$n++],F$y[F$j.name]=this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++];var F$M,F$D,F$m={},F$b={};for(F$l+=F$g[2];F$O<F$l;F$O++)F$m[(F$j=F$s[F$O]).name]=this._curOriginalData[F$n++],F$b[F$j.name]=this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++],this._curOriginalData[F$n++];if(this._pathDic)for(F$l+=F$g[3];F$O<F$l;F$O++){if(F$j=F$s[F$O],F$M=this._pathDic[F$j.name])switch(new F$Ge(F$j.extenData).getByte()){case 1:F$M.position=this._curOriginalData[F$n++];break;case 2:F$M.spacing=this._curOriginalData[F$n++];break;case 3:F$M.rotateMix=this._curOriginalData[F$n++],F$M.translateMix=this._curOriginalData[F$n++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(F$Ae.TEMP.identity()),this._ikArr)for(F$O=0,F$l=this._ikArr.length;F$O<F$l;F$O++)F$D=this._ikArr[F$O],F$m.hasOwnProperty(F$D.name)&&(F$D.bendDirection=F$m[F$D.name]),F$b.hasOwnProperty(F$D.name)&&(F$D.mix=F$b[F$D.name]),F$D.apply();if(this._pathDic)for(var F$L in this._pathDic)(F$M=this._pathDic[F$L]).apply(this._boneList,F$a);if(this._tfArr)for(F$O=0,F$I=this._tfArr.length;F$O<F$I;F$O++)this._tfArr[F$O].apply();for(F$O=0,F$I=this._boneList.length;F$O<F$I;F$O++)if(F$H=this._boneList[F$O],F$_=this._bindBoneBoneSlotDic[F$H.name],F$H.resultMatrix.copyTo(this._boneMatrixArray[F$O]),F$_)for(F$q=0,F$l=F$_.length;F$q<F$l;F$q++)(F$Y=F$_[F$q])&&F$Y.setParentMatrix(F$H.resultMatrix);var F$B,F$v,F$K,F$V,F$G={},F$A=this._templet.deformAniArr;if(F$A&&0<F$A.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,F$O=0,F$l=this._boneSlotArray.length;F$O<F$l;F$O++)(F$Y=this._boneSlotArray[F$O]).deformData=null;var F$U,F$r=F$A[this._aniClipIndex];for(F$U in F$B=F$r.default,this._setDeform(F$B,F$G,this._boneSlotArray,F$o),F$r)"default"!=F$U&&F$U!=this._skinName&&(F$B=F$r[F$U],this._setDeform(F$B,F$G,this._boneSlotArray,F$o));F$B=F$r[this._skinName],this._setDeform(F$B,F$G,this._boneSlotArray,F$o)}if(this._drawOrder)for(F$O=0,F$l=this._drawOrder.length;F$O<F$l;F$O++)F$v=F$$[(F$Y=this._boneSlotArray[this._drawOrder[F$O]]).name],F$K=F$y[F$Y.name],isNaN(F$K)||(F$a.save(),F$a.alpha(F$K)),isNaN(F$v)||-2==F$v||(this._templet.attachmentNames?F$Y.showDisplayByName(this._templet.attachmentNames[F$v]):F$Y.showDisplayByIndex(F$v)),F$G[this._drawOrder[F$O]]?(F$V=F$G[this._drawOrder[F$O]],F$Y.currDisplayData&&F$V[F$Y.currDisplayData.attachmentName]?F$Y.deformData=F$V[F$Y.currDisplayData.attachmentName]:F$Y.deformData=null):F$Y.deformData=null,isNaN(F$K)?F$Y.draw(F$a,this._boneMatrixArray,2==this._aniMode):F$Y.draw(F$a,this._boneMatrixArray,2==this._aniMode,F$K),isNaN(F$K)||F$a.restore();else for(F$O=0,F$l=this._boneSlotArray.length;F$O<F$l;F$O++)F$v=F$$[(F$Y=this._boneSlotArray[F$O]).name],F$K=F$y[F$Y.name],isNaN(F$K)||(F$a.save(),F$a.alpha(F$K)),isNaN(F$v)||-2==F$v||(this._templet.attachmentNames?F$Y.showDisplayByName(this._templet.attachmentNames[F$v]):F$Y.showDisplayByIndex(F$v)),F$G[F$O]?(F$V=F$G[F$O],F$Y.currDisplayData&&F$V[F$Y.currDisplayData.attachmentName]?F$Y.deformData=F$V[F$Y.currDisplayData.attachmentName]:F$Y.deformData=null):F$Y.deformData=null,isNaN(F$K)?F$Y.draw(F$a,this._boneMatrixArray,2==this._aniMode):F$Y.draw(F$a,this._boneMatrixArray,2==this._aniMode,F$K),isNaN(F$K)||F$a.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,F$e,F$a):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,F$e,F$a)},F$e._setDeform=function(F$e,F$F,F$a,F$o){if(F$e){var F$E,F$s,F$Y,F$_=0,F$R=0,F$H=0;if(F$e)for(F$_=0,F$R=F$e.deformSlotDataList.length;F$_<F$R;F$_++)for(F$E=F$e.deformSlotDataList[F$_],F$H=0;F$H<F$E.deformSlotDisplayList.length;F$H++)F$Y=F$a[(F$s=F$E.deformSlotDisplayList[F$H]).slotIndex],F$s.apply(F$o,F$Y),F$F[F$s.slotIndex]||(F$F[F$s.slotIndex]={}),F$F[F$s.slotIndex][F$s.attachment]=F$s.deformData}},F$e.getAnimNum=function(){return this._templet.getAnimationCount()},F$e.getAniNameByIndex=function(F$e){return this._templet.getAniNameByIndex(F$e)},F$e.getSlotByName=function(F$e){return this._boneSlotDic[F$e]},F$e.showSkinByName=function(F$e,F$F){void 0===F$F&&(F$F=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(F$e),F$F)},F$e.showSkinByIndex=function(F$e,F$F){void 0===F$F&&(F$F=!0);for(var F$a=0;F$a<this._boneSlotArray.length;F$a++)this._boneSlotArray[F$a].showSlotData(null,F$F);if(this._templet.showSkinByIndex(this._boneSlotDic,F$e,F$F)){var F$o=this._templet.skinDataArray[F$e];this._skinIndex=F$e,this._skinName=F$o.name}this._clearCache()},F$e.showSlotSkinByIndex=function(F$e,F$F){if(0!=this._aniMode){var F$a=this.getSlotByName(F$e);F$a&&F$a.showDisplayByIndex(F$F),this._clearCache()}},F$e.showSlotSkinByName=function(F$e,F$F){if(0!=this._aniMode){var F$a=this.getSlotByName(F$e);F$a&&F$a.showDisplayByName(F$F),this._clearCache()}},F$e.replaceSlotSkinName=function(F$e,F$F,F$a){if(0!=this._aniMode){var F$o=this.getSlotByName(F$e);F$o&&F$o.replaceDisplayByName(F$F,F$a),this._clearCache()}},F$e.replaceSlotSkinByIndex=function(F$e,F$F,F$a){if(0!=this._aniMode){var F$o=this.getSlotByName(F$e);F$o&&F$o.replaceDisplayByIndex(F$F,F$a),this._clearCache()}},F$e.setSlotSkin=function(F$e,F$F){if(0!=this._aniMode){var F$a=this.getSlotByName(F$e);F$a&&F$a.replaceSkin(F$F),this._clearCache()}},F$e._clearCache=function(){if(1==this._aniMode)for(var F$e=0,F$F=this._graphicsCache.length;F$e<F$F;F$e++){for(var F$a=0,F$o=this._graphicsCache[F$e].length;F$a<F$o;F$a++){var F$E=this._graphicsCache[F$e][F$a];F$E!=this.graphics&&F$Z.recycle(F$E)}this._graphicsCache[F$e].length=0}},F$e.play=function(F$e,F$F,F$a,F$o,F$E,F$s){void 0===F$a&&(F$a=!0),void 0===F$o&&(F$o=0),void 0===F$E&&(F$E=0),void 0===F$s&&(F$s=!0),this._indexControl=!1;var F$Y=-1,F$_=NaN;if(F$_=F$F?2147483647:0,"string"==typeof F$e)for(var F$R=0,F$H=this._templet.getAnimationCount();F$R<F$H;F$R++){var F$g=this._templet.getAnimation(F$R);if(F$g&&F$e==F$g.name){F$Y=F$R;break}}else F$Y=F$e;-1<F$Y&&F$Y<this.getAnimNum()&&(this._aniClipIndex=F$Y,(F$a||this._pause||this._currAniIndex!=F$Y)&&(this._currAniIndex=F$Y,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(F$Y)),this._drawOrder=null,this._eventIndex=0,this._player.play(F$Y,this._player.playbackRate,F$_,F$o,F$E),F$s&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=F$n.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},F$e.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},F$e.playbackRate=function(F$e){this._player&&(this._player.playbackRate=F$e)},F$e.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},F$e.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=F$n.now(),this.timer.frameLoop(1,this,this._update,null,!0))},F$e._getGrahicsDataWithCache=function(F$e,F$F){return this._graphicsCache[F$e][F$F]},F$e._setGrahicsDataWithCache=function(F$e,F$F,F$a){this._graphicsCache[F$e][F$F]=F$a},F$e.destroy=function(F$e){void 0===F$e&&(F$e=!0),F$F.prototype.destroy.call(this,F$e),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},F$s(0,F$e,"url",function(){return this._aniPath},function(F$e){this.load(F$e)}),F$s(0,F$e,"index",function(){return this._index},function(F$e){this.player&&(this._index=F$e,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),F$s(0,F$e,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),F$s(0,F$e,"templet",function(){return this._templet}),F$s(0,F$e,"player",function(){return this._player}),F$a.useSimpleMeshInCanvas=!1,F$a}(F$se),F$K=function(F$F){function F$E(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,F$E.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}F$o(F$E,"laya.ani.bone.Templet",F$F);var F$e=F$E.prototype;return F$e.getLoadList=function(){return this._loadList},F$e.loadAni=function(F$e){this._skBufferUrl=F$e,F$Ee.loader.load(F$e,F$R.create(this,this.onComplete),null,"arraybuffer")},F$e.onComplete=function(F$e){if(this._isDestroyed)this.destroy();else{var F$F=F$H.getRes(this._skBufferUrl);F$F?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,F$F)):this.event("error","load failed:"+this._skBufferUrl)}},F$e.parseData=function(F$e,F$F,F$a){void 0===F$a&&(F$a=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=F$e,this._mainTexture&&F$P.isWebGL&&F$e.bitmap&&(F$e.bitmap.enableMerageInAtlas=!1),this._rate=F$a,this.parse(F$F)},F$e.buildArmature=function(F$e){return void 0===F$e&&(F$e=0),new F$v(this,F$e)},F$e.parse=function(F$e){F$F.prototype.parse.call(this,F$e),this._endLoaded(),this._aniVersion!=F$E.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+F$E.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},F$e._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var F$e=0;this._loadList=[];var F$F,F$a=new F$Ge(this.getPublicExtData()),F$o=0,F$E=0,F$s=0,F$Y=F$a.getInt32(),F$_=F$a.readUTFString(),F$R=F$_.split("\n");for(F$e=0;F$e<F$Y;F$e++)F$F=this._path+F$R[2*F$e],F$_=F$R[2*F$e+1],F$a.getFloat32(),F$a.getFloat32(),F$o=F$a.getFloat32(),F$E=F$a.getFloat32(),F$s=F$a.getFloat32(),isNaN(F$s)?0:F$s,F$s=F$a.getFloat32(),isNaN(F$s)?0:F$s,F$s=F$a.getFloat32(),isNaN(F$s)?F$o:F$s,F$s=F$a.getFloat32(),isNaN(F$s)?F$E:F$s,-1==this._loadList.indexOf(F$F)&&this._loadList.push(F$F);this.event("inited",this)}},F$e._textureComplete=function(){for(var F$e,F$F,F$a=0,F$o=this._loadList.length;F$a<F$o;F$a++)F$F=this._loadList[F$a],F$e=this._textureDic[F$F]=F$H.getRes(F$F),F$P.isWebGL&&F$e&&F$e.bitmap&&(F$e.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},F$e._parsePublicExtData=function(){var F$e=0,F$F=0,F$a=0,F$o=0,F$E=0;for(F$e=0,F$E=this.getAnimationCount();F$e<F$E;F$e++)this._graphicsCache.push([]);var F$s;F$s="Dragon"!=this._aniClassName;var F$Y,F$_,F$R=new F$Ge(this.getPublicExtData()),F$H=0,F$g=0,F$n=0,F$O=0,F$q=0,F$I=0,F$l=0,F$P=0,F$j=0,F$$=F$R.getInt32(),F$y=F$R.readUTFString(),F$M=F$y.split("\n");for(F$e=0;F$e<F$$;F$e++){if(F$Y=this._mainTexture,F$_=this._path+F$M[2*F$e],F$y=F$M[2*F$e+1],null==this._mainTexture&&(F$Y=this._textureDic[F$_]),!F$Y)return this.event("error",this),void(this.isParseFail=!0);F$H=F$R.getFloat32(),F$g=F$R.getFloat32(),F$n=F$R.getFloat32(),F$O=F$R.getFloat32(),F$j=F$R.getFloat32(),F$q=isNaN(F$j)?0:F$j,F$j=F$R.getFloat32(),F$I=isNaN(F$j)?0:F$j,F$j=F$R.getFloat32(),F$l=isNaN(F$j)?F$n:F$j,F$j=F$R.getFloat32(),F$P=isNaN(F$j)?F$O:F$j,this.subTextureDic[F$y]=F$Ue.create(F$Y,F$H,F$g,F$n,F$O,-F$q,-F$I,F$l,F$P),F$Y.alphaTexture&&(this.subTextureDic[F$y].alphaTexture=F$Ue.create(F$Y.alphaTexture,F$H,F$g,F$n,F$O,-F$q,-F$I,F$l,F$P))}this._mainTexture=F$Y;var F$D,F$m,F$b,F$L,F$B,F$v=F$R.getUint16();for(F$e=0;F$e<F$v;F$e++)(F$D=[]).push(F$R.getUint16()),F$D.push(F$R.getUint16()),F$D.push(F$R.getUint16()),F$D.push(F$R.getUint16()),this.aniSectionDic[F$e]=F$D;var F$K,F$V=F$R.getInt16(),F$G={};for(F$e=0;F$e<F$V;F$e++)F$m=new F$re,0==F$e?F$K=F$m:F$m.root=F$K,F$m.d=F$s?-1:1,F$L=F$R.readUTFString(),F$B=F$R.readUTFString(),F$m.length=F$R.getFloat32(),1==F$R.getByte()&&(F$m.inheritRotation=!1),1==F$R.getByte()&&(F$m.inheritScale=!1),F$m.name=F$L,F$B&&((F$b=F$G[F$B])?F$b.addChild(F$m):this.mRootBone=F$m),F$G[F$L]=F$m,this.mBoneArr.push(F$m);this.tMatrixDataLen=F$R.getUint16();var F$A,F$U,F$r=F$R.getUint16(),F$Z=Math.floor(F$r/this.tMatrixDataLen),F$z=this.srcBoneMatrixArr;for(F$e=0;F$e<F$Z;F$e++)(F$A=new F$Ne).scX=F$R.getFloat32(),F$A.skX=F$R.getFloat32(),F$A.skY=F$R.getFloat32(),F$A.scY=F$R.getFloat32(),F$A.x=F$R.getFloat32(),F$A.y=F$R.getFloat32(),8===this.tMatrixDataLen&&(F$A.skewX=F$R.getFloat32(),F$A.skewY=F$R.getFloat32()),F$z.push(F$A),(F$m=this.mBoneArr[F$e]).transform=F$A;var F$T,F$p=F$R.getUint16(),F$J=0;for(F$e=0;F$e<F$p;F$e++){for(F$U=new F$de,F$J=F$R.getUint16(),F$F=0;F$F<F$J;F$F++)F$U.boneNames.push(F$R.readUTFString()),F$U.boneIndexs.push(F$R.getInt16());F$U.name=F$R.readUTFString(),F$U.targetBoneName=F$R.readUTFString(),F$U.targetBoneIndex=F$R.getInt16(),F$U.bendDirection=F$R.getFloat32(),F$U.mix=F$R.getFloat32(),F$U.isSpine=F$s,this.ikArr.push(F$U)}var F$k,F$d=F$R.getUint16(),F$w=0;for(F$e=0;F$e<F$d;F$e++){for(F$T=new F$xe,F$w=F$R.getUint16(),F$F=0;F$F<F$w;F$F++)F$T.boneIndexs.push(F$R.getInt16());F$T.name=F$R.getUTFString(),F$T.targetIndex=F$R.getInt16(),F$T.rotateMix=F$R.getFloat32(),F$T.translateMix=F$R.getFloat32(),F$T.scaleMix=F$R.getFloat32(),F$T.shearMix=F$R.getFloat32(),F$T.offsetRotation=F$R.getFloat32(),F$T.offsetX=F$R.getFloat32(),F$T.offsetY=F$R.getFloat32(),F$T.offsetScaleX=F$R.getFloat32(),F$T.offsetScaleY=F$R.getFloat32(),F$T.offsetShearY=F$R.getFloat32(),this.tfArr.push(F$T)}var F$S=F$R.getUint16(),F$C=0;for(F$e=0;F$e<F$S;F$e++){for((F$k=new F$we).name=F$R.readUTFString(),F$C=F$R.getUint16(),F$F=0;F$F<F$C;F$F++)F$k.bones.push(F$R.getInt16());F$k.target=F$R.readUTFString(),F$k.positionMode=F$R.readUTFString(),F$k.spacingMode=F$R.readUTFString(),F$k.rotateMode=F$R.readUTFString(),F$k.offsetRotation=F$R.getFloat32(),F$k.position=F$R.getFloat32(),F$k.spacing=F$R.getFloat32(),F$k.rotateMix=F$R.getFloat32(),F$k.translateMix=F$R.getFloat32(),this.pathArr.push(F$k)}var F$u,F$x,F$N,F$X,F$W,F$f=0,F$i=0,F$Q=0,F$t=NaN,F$c=0,F$h=F$R.getInt16();for(F$e=0;F$e<F$h;F$e++){var F$ee=F$R.getUint8(),F$Fe={};this.deformAniArr.push(F$Fe);for(var F$ae=0;F$ae<F$ee;F$ae++)for((F$u=new F$ze).skinName=F$R.getUTFString(),F$Fe[F$u.skinName]=F$u,F$f=F$R.getInt16(),F$F=0;F$F<F$f;F$F++)for(F$x=new F$Te,F$u.deformSlotDataList.push(F$x),F$i=F$R.getInt16(),F$a=0;F$a<F$i;F$a++)for(F$N=new F$pe,F$x.deformSlotDisplayList.push(F$N),F$N.slotIndex=F$R.getInt16(),F$N.attachment=F$R.getUTFString(),F$Q=F$R.getInt16(),F$o=0;F$o<F$Q;F$o++)for(1==F$R.getByte()?F$N.tweenKeyList.push(!0):F$N.tweenKeyList.push(!1),F$t=F$R.getFloat32(),F$N.timeList.push(F$t),F$X=[],F$N.vectices.push(F$X),F$c=F$R.getInt16(),F$E=0;F$E<F$c;F$E++)F$X.push(F$R.getFloat32())}var F$oe,F$Ee,F$se=F$R.getInt16(),F$Ye=0,F$_e=0;for(F$e=0;F$e<F$se;F$e++){for(F$Ye=F$R.getInt16(),F$W=[],F$F=0;F$F<F$Ye;F$F++){for((F$oe=new F$Je).time=F$R.getFloat32(),F$_e=F$R.getInt16(),F$a=0;F$a<F$_e;F$a++)F$oe.drawOrder.push(F$R.getInt16());F$W.push(F$oe)}this.drawOrderAniArr.push(F$W)}var F$Re,F$He=F$R.getInt16(),F$ge=0;for(F$e=0;F$e<F$He;F$e++){for(F$ge=F$R.getInt16(),F$Ee=[],F$F=0;F$F<F$ge;F$F++)(F$Re=new F$ke).name=F$R.getUTFString(),F$Re.intValue=F$R.getInt32(),F$Re.floatValue=F$R.getFloat32(),F$Re.stringValue=F$R.getUTFString(),F$Re.time=F$R.getFloat32(),F$Ee.push(F$Re);this.eventAniArr.push(F$Ee)}var F$ne=F$R.getInt16();if(0<F$ne)for(this.attachmentNames=[],F$e=0;F$e<F$ne;F$e++)this.attachmentNames.push(F$R.getUTFString());var F$Oe,F$qe,F$Ie=F$R.getInt16();for(F$e=0;F$e<F$Ie;F$e++)(F$Oe=new F$Ze).name=F$R.readUTFString(),F$Oe.parent=F$R.readUTFString(),F$Oe.attachmentName=F$R.readUTFString(),F$Oe.srcDisplayIndex=F$Oe.displayIndex=F$R.getInt16(),(F$Oe.templet=this).boneSlotDic[F$Oe.name]=F$Oe,null==(F$qe=this.bindBoneBoneSlotDic[F$Oe.parent])&&(this.bindBoneBoneSlotDic[F$Oe.parent]=F$qe=[]),F$qe.push(F$Oe),this.boneSlotArray.push(F$Oe);var F$le,F$Pe,F$je,F$$e=F$R.readUTFString().split("\n"),F$ye=0,F$Me=F$R.getUint8(),F$De=0,F$me=0,F$be=0,F$Le=0,F$Be=0,F$ve=0,F$Ke=0;for(F$e=0;F$e<F$Me;F$e++){for((F$le=new F$Se).name=F$$e[F$ye++],F$De=F$R.getUint8(),F$F=0;F$F<F$De;F$F++){for((F$Pe=new F$ue).name=F$$e[F$ye++],F$Oe=this.boneSlotDic[F$Pe.name],F$me=F$R.getUint8(),F$a=0;F$a<F$me;F$a++){if(F$je=new F$Ce,this.skinSlotDisplayDataArr.push(F$je),F$je.name=F$$e[F$ye++],F$je.attachmentName=F$$e[F$ye++],F$je.transform=new F$Ne,F$je.transform.scX=F$R.getFloat32(),F$je.transform.skX=F$R.getFloat32(),F$je.transform.skY=F$R.getFloat32(),F$je.transform.scY=F$R.getFloat32(),F$je.transform.x=F$R.getFloat32(),F$je.transform.y=F$R.getFloat32(),F$Pe.displayArr.push(F$je),F$je.width=F$R.getFloat32(),F$je.height=F$R.getFloat32(),F$je.type=F$R.getUint8(),F$je.verLen=F$R.getUint16(),0<(F$V=F$R.getUint16()))for(F$je.bones=[],F$o=0;F$o<F$V;F$o++){var F$Ve=F$R.getUint16();F$je.bones.push(F$Ve)}if(0<(F$be=F$R.getUint16()))for(F$je.uvs=[],F$o=0;F$o<F$be;F$o++)F$je.uvs.push(F$R.getFloat32());if(0<(F$Le=F$R.getUint16()))for(F$je.weights=[],F$o=0;F$o<F$Le;F$o++)F$je.weights.push(F$R.getFloat32());if(0<(F$Be=F$R.getUint16()))for(F$je.triangles=[],F$o=0;F$o<F$Be;F$o++)F$je.triangles.push(F$R.getUint16());if(0<(F$ve=F$R.getUint16()))for(F$je.vertices=[],F$o=0;F$o<F$ve;F$o++)F$je.vertices.push(F$R.getFloat32());if(0<(F$Ke=F$R.getUint16()))for(F$je.lengths=[],F$o=0;F$o<F$Ke;F$o++)F$je.lengths.push(F$R.getFloat32())}F$le.slotArr.push(F$Pe)}this.skinDic[F$le.name]=F$le,this.skinDataArray.push(F$le)}1==F$R.getUint8()?(this.yReverseMatrix=new F$Ae(1,0,0,-1,0,0),F$K&&F$K.setTempMatrix(this.yReverseMatrix)):F$K&&F$K.setTempMatrix(new F$Ae),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},F$e.getTexture=function(F$e){var F$F=this.subTextureDic[F$e];return F$F||(F$F=this.subTextureDic[F$e.substr(0,F$e.length-1)]),null==F$F?this._mainTexture:F$F},F$e.showSkinByIndex=function(F$e,F$F,F$a){if(void 0===F$a&&(F$a=!0),F$F<0&&F$F>=this.skinDataArray.length)return!1;var F$o,F$E,F$s=0,F$Y=0,F$_=this.skinDataArray[F$F];if(F$_){for(F$s=0,F$Y=F$_.slotArr.length;F$s<F$Y;F$s++)(F$E=F$_.slotArr[F$s])&&(F$o=F$e[F$E.name])&&(F$o.showSlotData(F$E,F$a),F$a&&"undefined"!=F$o.attachmentName&&"null"!=F$o.attachmentName?F$o.showDisplayByName(F$o.attachmentName):F$o.showDisplayByIndex(F$o.displayIndex));return!0}return!1},F$e.getSkinIndexByName=function(F$e){for(var F$F=0,F$a=this.skinDataArray.length;F$F<F$a;F$F++)if(this.skinDataArray[F$F].name==F$e)return F$F;return-1},F$e.getGrahicsDataWithCache=function(F$e,F$F){return this._graphicsCache[F$e][F$F]},F$e.setGrahicsDataWithCache=function(F$e,F$F,F$a){this._graphicsCache[F$e][F$F]=F$a},F$e.destroy=function(){var F$e;for(var F$F in this._isDestroyed=!0,this.subTextureDic)(F$e=this.subTextureDic[F$F])&&F$e.destroy();for(F$F in this._textureDic)(F$e=this._textureDic[F$F])&&F$e.destroy();for(var F$a=0,F$o=this.skinSlotDisplayDataArr.length;F$a<F$o;F$a++)this.skinSlotDisplayDataArr[F$a].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete F$E.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},F$e.getAniNameByIndex=function(F$e){var F$F=this.getAnimation(F$e);return F$F?F$F.name:null},F$s(0,F$e,"rate",function(){return this._rate},function(F$e){this._rate=F$e}),F$E.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",F$E.TEMPLET_DICTIONARY=null,F$E}(F$z)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$e,F$F){"use strict";for(var F$a in Object.defineProperty(F$F,"__esModule",{value:!0}),Laya){var F$o=Laya[F$a];F$o&&F$o.__isclass&&(F$F[F$a]=F$o)}});