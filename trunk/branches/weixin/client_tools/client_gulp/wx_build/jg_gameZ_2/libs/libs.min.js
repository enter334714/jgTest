var Laya=window.Laya=function(A$I,A$C){var A$e={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(A$C,A$R){return 1==arguments.length?A$e.__presubstr.call(this,A$C):A$e.__presubstr.call(this,A$C,0<A$R?A$R:this.length+A$R)},__init:function(A$C){A$C.forEach(function(A$C){A$C.__init$&&A$C.__init$()})},__isClass:function(A$C){return A$C&&(A$C.__isclass||A$C==Object||A$C==String||A$C==Array)},__newvec:function(A$C,A$R){var A$j=[];A$j.length=A$C;for(var A$w=0;A$w<A$C;A$w++)A$j[A$w]=A$R;return A$j},__extend:function(A$C,A$R){for(var A$j in A$R)if(A$R.hasOwnProperty(A$j)){var A$w=Object.getOwnPropertyDescriptor(A$R,A$j),A$T=A$w.get,A$G=A$w.set;A$T||A$G?A$T&&A$G?Object.defineProperty(A$C,A$j,A$w):(A$T&&Object.defineProperty(A$C,A$j,A$T),A$G&&Object.defineProperty(A$C,A$j,A$G)):A$C[A$j]=A$R[A$j]}function A$o(){A$e.un(this,"constructor",A$C)}A$o.prototype=A$R.prototype,A$C.prototype=new A$o,A$e.un(A$C.prototype,"__imps",A$e.__copy({},A$R.prototype.__imps))},__copy:function(A$C,A$R){if(!A$R)return null;for(var A$j in A$C=A$C||{},A$R)A$C[A$j]=A$R[A$j];return A$C},__package:function(A$C,A$R){if(!A$e.__packages[A$C]){A$e.__packages[A$C]=!0;var A$j=A$I,A$w=A$C.split(".");if(1<A$w.length)for(var A$T=0,A$G=A$w.length-1;A$T<A$G;A$T++){var A$o=A$j[A$w[A$T]];A$j=A$o||(A$j[A$w[A$T]]={})}A$j[A$w[A$w.length-1]]||(A$j[A$w[A$w.length-1]]=A$R||{})}},__hasOwnProperty:function(A$C,A$R){return A$R=A$R||this,Object.hasOwnProperty.call(A$R,A$C)||function A$C(A$R,A$j){if(Object.hasOwnProperty.call(A$j.prototype,A$R))return!0;var A$w=A$j.prototype.__super;return null==A$w?null:A$C(A$R,A$w)}(A$C,A$R.__class)},__typeof:function(A$C,A$R){if(!A$C||!A$R)return!1;if(A$R===String)return"string"==typeof A$C;if(A$R===Number)return"number"==typeof A$C;if(A$R.__interface__)A$R=A$R.__interface__;else if("string"!=typeof A$R)return A$C instanceof A$R;return A$C.__imps&&A$C.__imps[A$R]||A$C.__class==A$R},__as:function(A$C,A$R){return this.__typeof(A$C,A$R)?A$C:null},__int:function(A$C){return A$C?parseInt(A$C):0},interface:function(A$C,A$R){A$e.__package(A$C,{});var A$j=A$e.__internals,A$w=A$j[A$C]=A$j[A$C]||{self:A$C};if(A$R){var A$T=A$R.split(",");A$w.extend=[];for(var A$G=0;A$G<A$T.length;A$G++){var A$o=A$T[A$G];A$j[A$o]=A$j[A$o]||{self:A$o},A$w.extend.push(A$j[A$o])}}var A$U=A$I,A$t=A$C.split(".");for(A$G=0;A$G<A$t.length-1;A$G++)A$U=A$U[A$t[A$G]];A$U[A$t[A$t.length-1]]={__interface__:A$C}},class:function(A$C,A$R,A$j,A$w){if(A$j&&A$e.__extend(A$C,A$j),A$R)if(A$e.__package(A$R,A$C),A$e.__classmap[A$R]=A$C,0<A$R.indexOf(".")){if(0==A$R.indexOf("laya.")){var A$T=A$R.split(".");A$w=A$w||A$T[A$T.length-1],A$e[A$w]&&console.log("Warning!,this class["+A$w+"] already exist:",A$e[A$w]),A$e[A$w]=A$C}}else"Main"==A$R?A$I.Main=A$C:"MainWX"==A$R?A$I.MainWX=A$C:(A$e[A$R]&&console.log("Error!,this class["+A$R+"] already exist:",A$e[A$R]),A$e[A$R]=A$C);var A$G=A$e.un,A$o=A$C.prototype;A$G(A$o,"hasOwnProperty",A$e.__hasOwnProperty),A$G(A$o,"__class",A$C),A$G(A$o,"__super",A$j),A$G(A$o,"__className",A$R),A$G(A$C,"__super",A$j),A$G(A$C,"__className",A$R),A$G(A$C,"__isclass",!0),A$G(A$C,"super",function(A$C){this.__super.call(A$C)})},imps:function(A$C,A$R){if(!A$R)return null;var A$T=A$C.__imps||A$e.un(A$C,"__imps",{});function A$G(A$C){var A$R,A$j;if((A$R=A$e.__internals[A$C])&&(A$T[A$C]=!0,A$j=A$R.extend))for(var A$w=0;A$w<A$j.length;A$w++)A$G(A$j[A$w].self)}for(var A$j in A$R)A$G(A$j)},superSet:function(A$C,A$R,A$j,A$w){var A$T=A$C.prototype["_$set_"+A$j];A$T&&A$T.call(A$R,A$w)},superGet:function(A$C,A$R,A$j){var A$w=A$C.prototype["_$get_"+A$j];return A$w?A$w.call(A$R):null},getset:function(A$C,A$R,A$j,A$w,A$T){A$C?(A$w&&(A$R["_$GET_"+A$j]=A$w),A$T&&(A$R["_$SET_"+A$j]=A$T)):(A$w&&A$e.un(A$R,"_$get_"+A$j,A$w),A$T&&A$e.un(A$R,"_$set_"+A$j,A$T)),A$w&&A$T?Object.defineProperty(A$R,A$j,{get:A$w,set:A$T,enumerable:!1,configurable:!0}):(A$w&&Object.defineProperty(A$R,A$j,{get:A$w,enumerable:!1,configurable:!0}),A$T&&Object.defineProperty(A$R,A$j,{set:A$T,enumerable:!1,configurable:!0}))},static:function(A$j,A$w){for(var A$T=0,A$C=A$w.length;A$T<A$C;A$T+=2)if("length"==A$w[A$T])A$j.length=A$w[A$T+1].call(A$j);else{function A$R(){var A$R=A$w[A$T],A$C=A$w[A$T+1];Object.defineProperty(A$j,A$R,{get:function(){return delete this[A$R],this[A$R]=A$C.call(this)},set:function(A$C){delete this[A$R],this[A$R]=A$C},enumerable:!0,configurable:!0})}A$R()}},un:function(A$C,A$R,A$j){return A$j||(A$j=A$C[A$R]),A$e.__propun.value=A$j,Object.defineProperty(A$C,A$R,A$e.__propun),A$j},uns:function(A$R,A$C){A$C.forEach(function(A$C){A$e.un(A$R,A$C)})}};return A$I.console=A$I.console||{log:function(){}},A$I.trace=A$I.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),A$e}(window,document);!function(A$C,A$R,A$j){A$j.un,A$j.uns,A$j.static,A$j.class,A$j.getset,A$j.__newvec}(window,document,Laya),function(A$o,A$R,A$h){A$h.un,A$h.uns;var A$t=A$h.static,A$e=A$h.class,A$F=A$h.getset;A$h.__newvec;A$h.interface("laya.runtime.IMarket"),A$h.interface("laya.filters.IFilter"),A$h.interface("laya.display.ILayout"),A$h.interface("laya.resource.IDispose"),A$h.interface("laya.runtime.IPlatform"),A$h.interface("laya.resource.IDestroy"),A$h.interface("laya.runtime.IConchNode"),A$h.interface("laya.filters.IFilterAction"),A$h.interface("laya.runtime.ICPlatformClass"),A$h.interface("laya.resource.ICreateResource"),A$h.interface("laya.runtime.IConchRenderObject"),A$h.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var A$E=function(){function A$G(){}return A$e(A$G,"laya.utils.RunDriver"),A$G.FILTER_ACTIONS=[],A$G.pixelRatio=-1,A$G._charSizeTestDiv=null,A$G.now=function(){return Date.now()},A$G.getWindow=function(){return A$o},A$G.getPixelRatio=function(){if(A$G.pixelRatio<0){var A$C=A$V.context,A$R=A$C.backingStorePixelRatio||A$C.webkitBackingStorePixelRatio||A$C.mozBackingStorePixelRatio||A$C.msBackingStorePixelRatio||A$C.oBackingStorePixelRatio||A$C.backingStorePixelRatio||1;(A$G.pixelRatio=(A$V.window.devicePixelRatio||1)/A$R)<1&&(A$G.pixelRatio=1)}return A$G.pixelRatio},A$G.getIncludeStr=function(A$C){return null},A$G.createShaderCondition=function(A$C){var A$R="(function() {return "+A$C+";})";return A$h._runScript(A$R)},A$G.fontMap=[],A$G.measureText=function(A$C,A$R){var A$j=A$G.hanzi.test(A$C);if(A$j&&A$G.fontMap[A$R])return A$G.fontMap[A$R];var A$w=A$V.context;A$w.font=A$R;var A$T=A$w.measureText(A$C);return A$j&&(A$G.fontMap[A$R]=A$T),A$T},A$G.getWebGLContext=function(A$C){},A$G.beginFlush=function(){},A$G.endFinish=function(){},A$G.addToAtlas=null,A$G.flashFlushImage=function(A$C){},A$G.drawToCanvas=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$SC.create("2D"),A$U=new A$n(A$j,A$w,A$o);return A$y.renders[A$R]._fun(A$C,A$U,A$T,A$G),A$o},A$G.createParticleTemplate2D=null,A$G.createGLTextur=null,A$G.createWebGLContext2D=null,A$G.changeWebGLSize=function(A$C,A$R){},A$G.createRenderSprite=function(A$C,A$R){return new A$y(A$C,A$R)},A$G.createFilterAction=function(A$C){return new A$S},A$G.createGraphics=function(){return new A$M},A$G.clear=function(A$C){A$a._context.ctx.clear()},A$G.cancelLoadByUrl=function(A$C){},A$G.clearAtlas=function(A$C){},A$G.isAtlas=function(A$C){return!1},A$G.addTextureToAtlas=function(A$C){},A$G.getTexturePixels=function(A$C,A$R,A$j,A$w,A$T){return null},A$G.skinAniSprite=function(){return null},A$G.update3DLoop=function(){},A$t(A$G,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),A$G}(),A$w=(A$F(1,A$h,"alertGlobalError",null,function(A$C){var A$G=0;A$V.window.onerror=A$C?function(A$C,A$R,A$j,A$w,A$T){A$G++<5&&A$T&&alert(A$T.stack||A$T)}:null}),A$h.init=function(A$C,A$R,A$j){for(var A$w=[],A$T=2,A$G=arguments.length;A$T<A$G;A$T++)A$w.push(arguments[A$T]);if(!A$h._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=A$h._arrayBufferSlice),A$h._isinit=!0,A$V.__init__(),A$m.__init__(),A$M.__init__(),A$h.timer=new A$X,A$h.scaleTimer=new A$X,A$h.loader=new A$tC,A$q.__init__(),A$T=0;for(var A$o=A$w.length;A$T<A$o;A$T++)A$w[A$T].enable&&A$w[A$T].enable();return A$K.__init__(),A$U.__init__(),A$k.__init__(),A$l.beginCheck(),A$h._currentStage=A$h.stage=new A$QC,A$h.stage.conchModel&&A$h.stage.conchModel.setRootNode(),A$h._getUrlPath(),A$h.render=new A$a(0,0),A$h.stage.size(A$C,A$R),A$y.__init__(),A$H.__init__(),A$L.instance.__init__(A$h.stage,A$a.canvas),A$fC.__init__(),A$r.autoStopMusic=!0,A$$.__init__(),A$a.canvas}},A$h._getUrlPath=function(){var A$C=A$V.window.location,A$R=A$C.pathname;A$R=A$R&&":"==A$R.charAt(2)?A$R.substring(1):A$R,A$N.rootPath=A$N.basePath=A$N.getPath("file:"==A$C.protocol?A$R:A$C.protocol+"//"+A$C.host+A$C.pathname)},A$h._arrayBufferSlice=function(A$C,A$R){var A$j=new Uint8Array(this,A$C,A$R-A$C),A$w=new Uint8Array(A$j.length);return A$w.set(A$j),A$w.buffer},A$h._runScript=function(A$C){return A$V.window[A$h._evcode](A$C)},A$h.stage=null,A$h.timer=null,A$h.scaleTimer=null,A$h.loader=null,A$h.version="1.8.6",A$h.render=null,A$h._currentStage=null,A$h._isinit=!1,A$h.isDebug=!1,A$h.MiniAdpter={init:function(){A$o.navigator&&A$o.navigator.userAgent&&-1<A$o.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},A$t(A$h,["conchMarket",function(){return this.conchMarket=A$o.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=A$o.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function A$C(){}return A$e(A$C,"Config"),A$C.WebGLTextCacheCount=500,A$C.atlasEnable=!1,A$C.showCanvasMark=!1,A$C.animationInterval=50,A$C.isAntialias=!1,A$C.isAlpha=!1,A$C.premultipliedAlpha=!0,A$C.isStencil=!0,A$C.preserveDrawingBuffer=!1,A$C}()),A$I=function(){function A$I(){this._events=null}A$e(A$I,"laya.events.EventDispatcher");var A$C=A$I.prototype;return A$C.hasListener=function(A$C){return!!(this._events&&this._events[A$C])},A$C.event=function(A$C,A$R){if(!this._events||!this._events[A$C])return!1;var A$j=this._events[A$C];if(A$j.lock)A$j.queue||(A$j.queue=[]),A$j.queue.push(A$R);else{var A$w;for(A$j.lock=!0,A$j.cursor=A$j.head;A$j.cursor;)A$w=A$j.cursor,A$j.cursor=A$w.next,A$w.once&&A$I.delNode(A$j,A$w),null!=A$R?A$w.args?A$w.method.apply(A$w.caller,A$w.args.concat(A$R)):A$R instanceof Array?A$w.method.apply(A$w.caller,A$R):A$w.method.call(A$w.caller,A$R):A$w.method.apply(A$w.caller,A$w.args),A$w.once&&A$I.recoverHandler(A$w);A$j.lock=!1,!A$j.head&&this._events&&this._events[A$C]==A$j&&delete this._events[A$C],A$j.queue&&A$j.queue.length&&this.event(A$C,A$j.queue.shift())}return!0},A$C.on=function(A$C,A$R,A$j,A$w){return this._createListener(A$C,A$R,A$j,A$w,!1)},A$C.once=function(A$C,A$R,A$j,A$w){return this._createListener(A$C,A$R,A$j,A$w,!0)},A$C._createListener=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=!0),A$G&&this.off(A$C,A$R,A$j,A$T);var A$o=A$I.createHandler(A$R||this,A$j,A$w,A$T);this._events||(this._events={});var A$U=this._events,A$t=A$U[A$C];return A$t?A$t.tail?(A$o.prev=A$t.tail,A$t.tail.next=A$o,A$t.tail=A$o):A$t.head=A$t.tail=A$o:A$U[A$C]={head:A$o,tail:A$o,cursor:null,lock:!1},this},A$C.off=function(A$C,A$R,A$j,A$w){if(void 0===A$w&&(A$w=!1),!this._events||!this._events[A$C])return this;for(var A$T=this._events[A$C],A$G=A$T.head;A$G;){if((!A$R||A$G.caller===A$R)&&A$G.method===A$j&&(!A$w||A$G.once)){A$I.delNode(A$T,A$G),A$T.cursor==A$G&&(A$T.cursor=A$G.next),A$I.recoverHandler(A$G);break}A$G=A$G.next}return this},A$C.offAll=function(A$C){var A$R=this._events;if(!A$R)return this;if(A$C)this._recoverHandlers(A$R[A$C]),delete A$R[A$C];else{for(var A$j in A$R)this._recoverHandlers(A$R[A$j]);this._events=null}return this},A$C._recoverHandlers=function(A$C){if(A$C){for(var A$R=A$C.head;A$R;){A$I.delNode(A$C,A$R);var A$j=A$R.next;A$I.recoverHandler(A$R),A$R=A$j}A$C.cursor=null}},A$C.isMouseEvent=function(A$C){return A$I.MOUSE_EVENTS[A$C]},A$I.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},A$I.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},A$I.delNode=function(A$C,A$R){A$R.prev?A$R.prev.next=A$R.next:A$C.head=A$R.next,A$R.next?A$R.next.prev=A$R.prev:A$C.tail=A$R.prev},A$I.createHandler=function(A$C,A$R,A$j,A$w){var A$T=A$I._freeHandler;return A$T?(A$I._freeCount--,A$I._freeHandler=A$T.next,A$T.caller=A$C,A$T.method=A$R,A$T.args=A$j,A$T.once=A$w):A$T={caller:A$C,method:A$R,args:A$j,once:A$w},A$T.prev=A$T.next=null,A$T},A$I.recoverHandler=function(A$C){A$C.caller=A$C.method=A$C.args=A$C.prev=null,A$C.next=A$I._freeHandler,A$I._freeHandler=A$C,A$I._freeCount++},A$I._freeHandler=null,A$I._freeCount=0,A$I}(),A$Z=function(){function A$T(A$C,A$R,A$j,A$w){this.once=!1,void(this._id=0)===A$w&&(A$w=!1),this.setTo(A$C,A$R,A$j,A$w)}A$e(A$T,"laya.utils.Handler");var A$C=A$T.prototype;return A$C.setTo=function(A$C,A$R,A$j,A$w){return this._id=A$T._gid++,this.caller=A$C,this.method=A$R,this.args=A$j,this.once=A$w,this},A$C.run=function(){if(null==this.method)return null;var A$C=this._id,A$R=this.method.apply(this.caller,this.args);return this._id===A$C&&this.once&&this.recover(),A$R},A$C.runWith=function(A$C){if(null==this.method)return null;var A$R=this._id;if(null==A$C)var A$j=this.method.apply(this.caller,this.args);else A$j=this.args||A$C.unshift?this.args?this.method.apply(this.caller,this.args.concat(A$C)):this.method.apply(this.caller,A$C):this.method.call(this.caller,A$C);return this._id===A$R&&this.once&&this.recover(),A$j},A$C.clear=function(){return this.caller=null,this.method=null,this.args=null,this},A$C.recover=function(){0<this._id&&(this._id=0,this.clear())},A$T.create=function(A$C,A$R,A$j,A$w){return void 0===A$w&&(A$w=!0),new A$T(A$C,A$R,A$j,A$w)},A$T._gid=1,A$T}(),A$A=function(){function A$C(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}A$e(A$C,"laya.display.BitmapFont");var A$R=A$C.prototype;return A$R.loadFont=function(A$C,A$R){this._path=A$C,this._complete=A$R,A$h.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],A$Z.create(this,this.onLoaded))},A$R.onLoaded=function(){this.parseFont(A$UC.getRes(this._path),A$UC.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},A$R.parseFont=function(A$C,A$R){if(null!=A$C&&null!=A$R){this._texture=A$R;var A$j=A$C.getElementsByTagName("info");if(!A$j[0].getAttributeNode)return this.parseFont2(A$C,A$R);this.fontSize=parseInt(A$j[0].getAttributeNode("size").nodeValue);var A$w,A$T=A$j[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(A$T[0]),parseInt(A$T[1]),parseInt(A$T[2]),parseInt(A$T[3])],A$w=A$C.getElementsByTagName("char");var A$G=0;for(A$G=0;A$G<A$w.length;A$G++){var A$o=A$w[A$G],A$U=parseInt(A$o.getAttributeNode("id").nodeValue),A$t=parseInt(A$o.getAttributeNode("xoffset").nodeValue)/1,A$I=parseInt(A$o.getAttributeNode("yoffset").nodeValue)/1,A$e=parseInt(A$o.getAttributeNode("xadvance").nodeValue)/1,A$H=new A$W;A$H.x=parseInt(A$o.getAttributeNode("x").nodeValue),A$H.y=parseInt(A$o.getAttributeNode("y").nodeValue),A$H.width=parseInt(A$o.getAttributeNode("width").nodeValue),A$H.height=parseInt(A$o.getAttributeNode("height").nodeValue);var A$M=A$eC.create(A$R,A$H.x,A$H.y,A$H.width,A$H.height,A$t,A$I);this._maxWidth=Math.max(this._maxWidth,A$e+this.letterSpacing),this._fontCharDic[A$U]=A$M,this._fontWidthMap[A$U]=A$e}}},A$R.parseFont2=function(A$C,A$R){if(null!=A$C&&null!=A$R){this._texture=A$R;var A$j=A$C.getElementsByTagName("info");this.fontSize=parseInt(A$j[0].attributes.size.nodeValue);var A$w=A$j[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(A$w[0]),parseInt(A$w[1]),parseInt(A$w[2]),parseInt(A$w[3])];var A$T=A$C.getElementsByTagName("char"),A$G=0;for(A$G=0;A$G<A$T.length;A$G++){var A$o=A$T[A$G].attributes,A$U=parseInt(A$o.id.nodeValue),A$t=parseInt(A$o.xoffset.nodeValue)/1,A$I=parseInt(A$o.yoffset.nodeValue)/1,A$e=parseInt(A$o.xadvance.nodeValue)/1,A$H=new A$W;A$H.x=parseInt(A$o.x.nodeValue),A$H.y=parseInt(A$o.y.nodeValue),A$H.width=parseInt(A$o.width.nodeValue),A$H.height=parseInt(A$o.height.nodeValue);var A$M=A$eC.create(A$R,A$H.x,A$H.y,A$H.width,A$H.height,A$t,A$I);this._maxWidth=Math.max(this._maxWidth,A$e+this.letterSpacing),this._fontCharDic[A$U]=A$M,this._fontWidthMap[A$U]=A$e}}},A$R.getCharTexture=function(A$C){return this._fontCharDic[A$C.charCodeAt(0)]},A$R.destroy=function(){if(this._texture){for(var A$C in this._fontCharDic){var A$R=this._fontCharDic[A$C];A$R&&A$R.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},A$R.setSpaceWidth=function(A$C){this._spaceWidth=A$C},A$R.getCharWidth=function(A$C){var A$R=A$C.charCodeAt(0);return this._fontWidthMap[A$R]?this._fontWidthMap[A$R]+this.letterSpacing:" "==A$C?this._spaceWidth+this.letterSpacing:0},A$R.getTextWidth=function(A$C){for(var A$R=0,A$j=0,A$w=A$C.length;A$j<A$w;A$j++)A$R+=this.getCharWidth(A$C.charAt(A$j));return A$R},A$R.getMaxWidth=function(){return this._maxWidth},A$R.getMaxHeight=function(){return this.fontSize},A$R.drawText=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U=this.getTextWidth(A$C),A$t=0;"center"===A$T&&(A$t=(A$G-A$U)/2),"right"===A$T&&(A$t=A$G-A$U);for(var A$I=0,A$e=0,A$H=A$C.length;A$e<A$H;A$e++)(A$o=this.getCharTexture(A$C.charAt(A$e)))&&(A$R.graphics.drawTexture(A$o,A$j+A$I+A$t,A$w),A$I+=this.getCharWidth(A$C.charAt(A$e)))},A$C}(),A$U=function(){function A$j(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=A$j._TF_EMPTY}A$e(A$j,"laya.display.css.Style");var A$C=A$j.prototype;return A$C.getTransform=function(){return this._tf},A$C.setTransform=function(A$C){this._tf="none"!==A$C&&A$C?A$C:A$j._TF_EMPTY},A$C.setTranslateX=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.translateX=A$C},A$C.setTranslateY=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.translateY=A$C},A$C.setScaleX=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.scaleX=A$C},A$C.setScale=function(A$C,A$R){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.scaleX=A$C,this._tf.scaleY=A$R},A$C.setScaleY=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.scaleY=A$C},A$C.setRotate=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.rotate=A$C},A$C.setSkewX=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.skewX=A$C},A$C.setSkewY=function(A$C){this._tf===A$j._TF_EMPTY&&(this._tf=new A$T),this._tf.skewY=A$C},A$C.destroy=function(){this.scrollRect=null},A$C.render=function(A$C,A$R,A$j,A$w){},A$C.getCSSStyle=function(){return A$RC.EMPTY},A$C._enableLayout=function(){return!1},A$F(0,A$C,"scaleX",function(){return this._tf.scaleX},function(A$C){this.setScaleX(A$C)}),A$F(0,A$C,"transform",function(){return this.getTransform()},function(A$C){this.setTransform(A$C)}),A$F(0,A$C,"translateX",function(){return this._tf.translateX},function(A$C){this.setTranslateX(A$C)}),A$F(0,A$C,"translateY",function(){return this._tf.translateY},function(A$C){this.setTranslateY(A$C)}),A$F(0,A$C,"scaleY",function(){return this._tf.scaleY},function(A$C){this.setScaleY(A$C)}),A$F(0,A$C,"block",function(){return 0!=(1&this._type)}),A$F(0,A$C,"skewY",function(){return this._tf.skewY},function(A$C){this.setSkewY(A$C)}),A$F(0,A$C,"rotate",function(){return this._tf.rotate},function(A$C){this.setRotate(A$C)}),A$F(0,A$C,"skewX",function(){return this._tf.skewX},function(A$C){this.setSkewX(A$C)}),A$F(0,A$C,"paddingLeft",function(){return 0}),A$F(0,A$C,"paddingTop",function(){return 0}),A$F(0,A$C,"absolute",function(){return!0}),A$j.__init__=function(){A$j._TF_EMPTY=new A$T,A$j.EMPTY=new A$j},A$j.EMPTY=null,A$j._TF_EMPTY=null,A$j}(),A$K=function(){function A$R(A$C){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=A$B.create(A$R.defaultColor),this.family=A$R.defaultFamily,this.stroke=A$R._STROKE,this.size=A$R.defaultSize,A$C&&A$C!==A$R.EMPTY&&A$C.copyTo(this)}A$e(A$R,"laya.display.css.Font");var A$C=A$R.prototype;return A$C.set=function(A$C){this._text=null;for(var A$R=A$C.split(" "),A$j=0,A$w=A$R.length;A$j<A$w;A$j++){var A$T=A$R[A$j];switch(A$T){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<A$T.indexOf("px")&&(this.size=parseInt(A$T),this.family=A$R[A$j+1],A$j++)}},A$C.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},A$C.copyTo=function(A$C){A$C._type=this._type,A$C._text=this._text,A$C._weight=this._weight,A$C._color=this._color,A$C.family=this.family,A$C.stroke=this.stroke!=A$R._STROKE?this.stroke.slice():A$R._STROKE,A$C.indent=this.indent,A$C.size=this.size},A$F(0,A$C,"password",function(){return 0!=(1024&this._type)},function(A$C){A$C?this._type|=1024:this._type&=-1025}),A$F(0,A$C,"color",function(){return this._color.strColor},function(A$C){this._color=A$B.create(A$C)}),A$F(0,A$C,"italic",function(){return 0!=(512&this._type)},function(A$C){A$C?this._type|=512:this._type&=-513}),A$F(0,A$C,"bold",function(){return 0!=(2048&this._type)},function(A$C){A$C?this._type|=2048:this._type&=-2049}),A$F(0,A$C,"weight",function(){return""+this._weight},function(A$C){var A$R=0;switch(A$C){case"normal":break;case"bold":this.bold=!0,A$R=700;break;case"bolder":A$R=800;break;case"lighter":A$R=100;break;default:A$R=parseInt(A$C)}this._weight=A$R,this._text=null}),A$F(0,A$C,"decoration",function(){return this._decoration?this._decoration.value:null},function(A$C){var A$R=A$C.split(" ");switch(this._decoration||(this._decoration={}),A$R[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=A$R[0]}A$R[1]&&(this._decoration.color=A$B.create(A$R)),this._decoration.value=A$C}),A$R.__init__=function(){A$R.EMPTY=new A$R(null)},A$R.EMPTY=null,A$R.defaultColor="#000000",A$R.defaultSize=12,A$R.defaultFamily="Arial",A$R.defaultFont="12px Arial",A$R._STROKE=[0,"#000000"],A$R._ITALIC=512,A$R._PASSWORD=1024,A$R._BOLD=2048,A$R}(),A$T=function(){function A$C(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return A$e(A$C,"laya.display.css.TransformInfo"),A$C}(),A$M=function(){function A$H(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,A$a.isConchNode){this._nativeObj=new A$o._conchGraphics,this.id=this._nativeObj.conchID}}A$e(A$H,"laya.display.Graphics");var A$C=A$H.prototype;return A$C.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},A$C.clear=function(A$C){void 0===A$C&&(A$C=!1);var A$R=0,A$j=0;if(A$C){var A$w=this._one;if(this._cmds){for(A$j=this._cmds.length,A$R=0;A$R<A$j;A$R++)!(A$w=this._cmds[A$R])||A$w.callee!==A$a._context._drawTexture&&A$w.callee!==A$a._context._drawTextureWithTransform||(A$w[0]=null,A$H._cache.push(A$w));this._cmds.length=0}else A$w&&(!A$w||A$w.callee!==A$a._context._drawTexture&&A$w.callee!==A$a._context._drawTextureWithTransform||(A$w[0]=null,A$H._cache.push(A$w)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(A$R=0,A$j=this._vectorgraphArray.length;A$R<A$j;A$R++)A$O.getInstance().deleteShape(this._vectorgraphArray[A$R]);this._vectorgraphArray.length=0}},A$C._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},A$C._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new A$j,this._graphicBounds._graphics=this)},A$C._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},A$C._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},A$C.getBounds=function(A$C){return void 0===A$C&&(A$C=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(A$C)},A$C.getBoundPoints=function(A$C){return void 0===A$C&&(A$C=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(A$C)},A$C._addCmd=function(A$C){this._cmds=this._cmds||[],A$C.callee=A$C.shift(),this._cmds.push(A$C)},A$C.setFilters=function(A$C){this._saveToCmd(A$a._context._setFilters,A$C)},A$C.drawTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$o&&(A$o=1),!A$C||A$o<.01)return null;A$w||(A$w=A$C.sourceWidth),A$T||(A$T=A$C.sourceHeight),A$o=A$o<0?0:1<A$o?1:A$o;var A$U,A$t=!A$a.isWebGL&&(A$V.onFirefox||A$V.onEdge||A$V.onIE||A$V.onSafari)?.5:0,A$I=A$w/A$C.sourceWidth,A$e=A$T/A$C.sourceHeight;return A$w=A$C.width*A$I,A$T=A$C.height*A$e,A$C.loaded&&(A$w<=0||A$T<=0)?null:(A$R+=A$C.offsetX*A$I,A$j+=A$C.offsetY*A$e,this._sp&&(this._sp._renderType|=512),A$R-=A$t,A$j-=A$t,A$w+=2*A$t,A$T+=2*A$t,A$H._cache.length?((A$U=A$H._cache.pop())[0]=A$C,A$U[1]=A$R,A$U[2]=A$j,A$U[3]=A$w,A$U[4]=A$T,A$U[5]=A$G,A$U[6]=A$o):A$U=[A$C,A$R,A$j,A$w,A$T,A$G,A$o],A$U.callee=A$G||1!=A$o?A$a._context._drawTextureWithTransform:A$a._context._drawTexture,null!=this._one||A$G||1!=A$o?this._saveToCmd(A$U.callee,A$U):(this._one=A$U,this._render=this._renderOneImg),A$C.loaded||A$C.once("loaded",this,this._textureLoaded,[A$C,A$U]),this._repaint(),A$U)},A$C.cleanByTexture=function(A$C,A$R,A$j,A$w,A$T){if(void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),!A$C)return this.clear();if(this._one&&this._render===this._renderOneImg){A$w||(A$w=A$C.sourceWidth),A$T||(A$T=A$C.sourceHeight);var A$G=A$w/A$C.sourceWidth,A$o=A$T/A$C.sourceHeight;A$w=A$C.width*A$G,A$T=A$C.height*A$o,A$R+=A$C.offsetX*A$G,A$j+=A$C.offsetY*A$o,this._one[0]=A$C,this._one[1]=A$R,this._one[2]=A$j,this._one[3]=A$w,this._one[4]=A$T,this._repaint()}else this.clear(),A$C&&this.drawTexture(A$C,A$R,A$j,A$w,A$T)},A$C.drawTextures=function(A$C,A$R){A$C&&this._saveToCmd(A$a._context._drawTextures,[A$C,A$R])},A$C.fillTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G="repeat"),A$C){var A$U=[A$C,A$R,A$j,A$w,A$T,A$G,A$o||A$x.EMPTY,{}];A$C.loaded||A$C.once("loaded",this,this._textureLoaded,[A$C,A$U]),this._saveToCmd(A$a._context._fillTexture,A$U)}},A$C._textureLoaded=function(A$C,A$R){A$R[3]=A$R[3]||A$C.width,A$R[4]=A$R[4]||A$C.height,this._repaint()},A$C.fillCircle=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$j.bitmap.enableMerageInAtlas=!1;var A$U=new Float32Array(2*(A$o+1)),A$t=new Float32Array(2*(A$o+1)),A$I=new Uint16Array(3*A$o),A$e=2*Math.PI/A$o,A$H=0;A$U[0]=A$w,A$U[1]=A$T,A$t[0]=A$w/A$j.width,A$t[1]=A$T/A$j.height;for(var A$M=2,A$K=0;A$K<A$o;A$K++){var A$F=A$G*Math.cos(A$H)+A$w,A$L=A$G*Math.sin(A$H)+A$T;A$U[A$M]=A$F,A$U[A$M+1]=A$L,A$t[A$M]=A$F/A$j.width,A$t[A$M+1]=A$L/A$j.height,A$H+=A$e,A$M+=2}for(A$K=A$M=0;A$K<A$o;A$K++)A$I[A$M++]=0,A$I[A$M++]=A$K+1,A$I[A$M++]=A$o+1<=A$K+2?1:A$K+2;this.drawTriangles(A$j,A$C,A$R,A$U,A$t,A$I)},A$C.drawTriangles=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){void 0===A$U&&(A$U=1),this._saveToCmd(A$a._context.drawTriangles,[A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I])},A$C._saveToCmd=function(A$C,A$R){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=A$R,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(A$R)),A$R.callee=A$C,this._repaint(),A$R},A$C.clipRect=function(A$C,A$R,A$j,A$w){this._saveToCmd(A$a._context._clipRect,[A$C,A$R,A$j,A$w])},A$C.fillText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){void 0===A$o&&(A$o=0),this._saveToCmd(A$a._context._fillText,[A$C,A$R,A$j,A$w||A$K.defaultFont,A$T,A$G])},A$C.fillBorderText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){this._saveToCmd(A$a._context._fillBorderText,[A$C,A$R,A$j,A$w||A$K.defaultFont,A$T,A$G,A$o,A$U])},A$C.strokeText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._saveToCmd(A$a._context._strokeText,[A$C,A$R,A$j,A$w||A$K.defaultFont,A$T,A$G,A$o])},A$C.alpha=function(A$C){A$C=A$C<0?0:1<A$C?1:A$C,this._saveToCmd(A$a._context._alpha,[A$C])},A$C.setAlpha=function(A$C){A$C=A$C<0?0:1<A$C?1:A$C,this._saveToCmd(A$a._context._setAlpha,[A$C])},A$C.transform=function(A$C,A$R,A$j){void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),this._saveToCmd(A$a._context._transform,[A$C,A$R,A$j])},A$C.rotate=function(A$C,A$R,A$j){void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),this._saveToCmd(A$a._context._rotate,[A$C,A$R,A$j])},A$C.scale=function(A$C,A$R,A$j,A$w){void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),this._saveToCmd(A$a._context._scale,[A$C,A$R,A$j,A$w])},A$C.translate=function(A$C,A$R){this._saveToCmd(A$a._context._translate,[A$C,A$R])},A$C.save=function(){this._saveToCmd(A$a._context._save,[])},A$C.restore=function(){this._saveToCmd(A$a._context._restore,[])},A$C.replaceText=function(A$C){this._repaint();var A$R=this._cmds;if(A$R){for(var A$j=A$R.length-1;-1<A$j;A$j--)if(this._isTextCmd(A$R[A$j].callee))return A$R[A$j][0].toUpperCase?A$R[A$j][0]=A$C:A$R[A$j][0].setText(A$C),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=A$C:this._one[0].setText(A$C),!0;return!1},A$C._isTextCmd=function(A$C){return A$C===A$a._context._fillText||A$C===A$a._context._fillBorderText||A$C===A$a._context._strokeText},A$C.replaceTextColor=function(A$C){this._repaint();var A$R=this._cmds;if(A$R)for(var A$j=A$R.length-1;-1<A$j;A$j--)this._isTextCmd(A$R[A$j].callee)&&(A$R[A$j][4]=A$C,A$R[A$j][0].toUpperCase||(A$R[A$j][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=A$C,this._one[0].toUpperCase||(this._one[0].changed=!0))},A$C.loadImage=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=this;void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0);var A$U=A$UC.getRes(A$C);function A$t(A$C){A$C&&(A$o.drawTexture(A$C,A$R,A$j,A$w,A$T),null!=A$G&&A$G.call(A$o._sp,A$C))}A$U?A$t(A$U):A$h.loader.load(A$C,A$Z.create(null,A$t),null,"image")},A$C._renderEmpty=function(A$C,A$R,A$j,A$w){},A$C._renderAll=function(A$C,A$R,A$j,A$w){for(var A$T,A$G=this._cmds,A$o=0,A$U=A$G.length;A$o<A$U;A$o++)(A$T=A$G[A$o]).callee.call(A$R,A$j,A$w,A$T)},A$C._renderOne=function(A$C,A$R,A$j,A$w){this._one.callee.call(A$R,A$j,A$w,this._one)},A$C._renderOneImg=function(A$C,A$R,A$j,A$w){this._one.callee.call(A$R,A$j,A$w,this._one),2305!==A$C._renderType&&(A$C._renderType|=1)},A$C.drawLine=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=1);var A$o=0;A$a.isWebGL&&(A$o=A$O.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(A$o));var A$U=A$G%2==0?0:.5,A$t=[A$C+A$U,A$R+A$U,A$j+A$U,A$w+A$U,A$T,A$G,A$o];this._saveToCmd(A$a._context._drawLine,A$t)},A$C.drawLines=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=1);var A$G=0;if(A$j&&!(A$j.length<4)){A$a.isWebGL&&(A$G=A$O.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(A$G));var A$o=A$T%2==0?0:.5,A$U=[A$C+A$o,A$R+A$o,A$j,A$w,A$T,A$G];this._saveToCmd(A$a._context._drawLines,A$U)}},A$C.drawCurves=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=1);var A$G=[A$C,A$R,A$j,A$w,A$T];this._saveToCmd(A$a._context._drawCurves,A$G)},A$C.drawRect=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){void 0===A$o&&(A$o=1);var A$U=A$G?A$o/2:0,A$t=A$G?A$o:0,A$I=[A$C+A$U,A$R+A$U,A$j-A$t,A$w-A$t,A$T,A$G,A$o];this._saveToCmd(A$a._context._drawRect,A$I)},A$C.drawCircle=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=1);var A$o=A$T?A$G/2:0,A$U=0;A$a.isWebGL&&(A$U=A$O.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(A$U));var A$t=[A$C,A$R,A$j-A$o,A$w,A$T,A$G,A$U];this._saveToCmd(A$a._context._drawCircle,A$t)},A$C.drawPie=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){void 0===A$U&&(A$U=1);var A$t=A$o?A$U/2:0,A$I=A$o?A$U:0,A$e=0;A$a.isWebGL&&(A$e=A$O.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(A$e));var A$H=[A$C+A$t,A$R+A$t,A$j-A$I,A$w,A$T,A$G,A$o,A$U,A$e];A$H[3]=A$d.toRadian(A$w),A$H[4]=A$d.toRadian(A$T),this._saveToCmd(A$a._context._drawPie,A$H)},A$C.drawPoly=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=1);var A$o=0,A$U=!1;A$a.isWebGL&&(A$o=A$O.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(A$o),A$U=!(6<A$j.length));var A$t=A$T?A$G%2==0?0:.5:0,A$I=[A$C+A$t,A$R+A$t,A$j,A$w,A$T,A$G,A$o,A$U];this._saveToCmd(A$a._context._drawPoly,A$I)},A$C.drawPath=function(A$C,A$R,A$j,A$w,A$T){var A$G=[A$C,A$R,A$j,A$w,A$T];this._saveToCmd(A$a._context._drawPath,A$G)},A$F(0,A$C,"cmds",function(){return this._cmds},function(A$C){this._sp&&(this._sp._renderType|=512),this._cmds=A$C,this._render=this._renderAll,this._repaint()}),A$H.__init__=function(){if(A$a.isConchNode){for(var A$C=laya.display.Graphics.prototype,A$R=A$V.window.ConchGraphics.prototype,A$j=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],A$w=0,A$T=A$j.length;A$w<=A$T;A$w++){var A$G=A$j[A$w];A$C[A$G]=A$R[A$G]}A$C._saveToCmd=null,A$R.drawImageS&&(A$C.drawTextures=function(A$C,A$R){if(A$C&&A$C.loaded&&A$C.bitmap&&A$C.source){var A$j=A$C.uv,A$w=A$C.bitmap.width,A$T=A$C.bitmap.height;this.drawImageS(A$C.bitmap.source,A$j[0]*A$w,A$j[1]*A$T,(A$j[2]-A$j[0])*A$w,(A$j[5]-A$j[3])*A$T,A$C.offsetX,A$C.offsetY,A$C.width,A$C.height,A$R)}}),A$C.drawTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$o&&(A$o=1),A$C)if(A$C.loaded){if(A$C.loaded&&A$C.bitmap&&A$C.source&&(A$w||(A$w=A$C.sourceWidth),A$T||(A$T=A$C.sourceHeight),A$o=A$o<0?0:1<A$o?1:A$o,A$w=A$w-A$C.sourceWidth+A$C.width,A$T=A$T-A$C.sourceHeight+A$C.height,!(A$w<=0||A$T<=0))){A$R+=A$C.offsetX,A$j+=A$C.offsetY;var A$U=A$C.uv,A$t=A$C.bitmap.width,A$I=A$C.bitmap.height;A$U[4]<A$U[0]&&A$U[5]<A$U[1]?this.drawImageM(A$C.bitmap.source,A$U[4]*A$t,A$U[5]*A$I,(A$U[0]-A$U[4])*A$t,(A$U[1]-A$U[5])*A$I,A$R,A$j,A$w,A$T,A$G,A$o):this.drawImageM(A$C.bitmap.source,A$U[0]*A$t,A$U[1]*A$I,(A$U[2]-A$U[0])*A$t,(A$U[5]-A$U[3])*A$I,A$R,A$j,A$w,A$T,A$G,A$o),this._repaint()}}else A$C.once("loaded",this,function(){this.drawTexture(A$C,A$R,A$j,A$w,A$T,A$G)})},A$C.fillTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G="repeat"),A$C&&A$C.loaded){var A$U,A$t=A$a._context.ctx,A$I=A$C.bitmap.width,A$e=A$C.bitmap.height,A$H=A$C.uv;A$U=A$C.uv!=A$eC.DEF_UV?A$t.createPattern(A$C.bitmap.source,A$G,A$H[0]*A$I,A$H[1]*A$e,(A$H[2]-A$H[0])*A$I,(A$H[5]-A$H[3])*A$e):A$t.createPattern(A$C.bitmap.source,A$G);var A$M=0,A$K=0;A$o&&(A$R+=A$o.x%A$C.width,A$j+=A$o.y%A$C.height,A$M-=A$o.x%A$C.width,A$K-=A$o.y%A$C.height),this._fillImage(A$U,A$R,A$j,A$M,A$K,A$w,A$T)}}}},A$H._cache=[],A$H}(),A$j=function(){function A$S(){this._cacheBoundsType=!1}A$e(A$S,"laya.display.GraphicsBounds");var A$C=A$S.prototype;return A$C.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},A$C.reset=function(){this._temp&&(this._temp.length=0)},A$C.getBounds=function(A$C){return void 0===A$C&&(A$C=!1),(!this._bounds||!this._temp||this._temp.length<1||A$C!=this._cacheBoundsType)&&(this._bounds=A$W._getWrapRec(this.getBoundPoints(A$C),this._bounds)),this._cacheBoundsType=A$C,this._bounds},A$C.getBoundPoints=function(A$C){return void 0===A$C&&(A$C=!1),(!this._temp||this._temp.length<1||A$C!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(A$C)),this._cacheBoundsType=A$C,this._rstBoundPoints=A$d.copyArray(this._rstBoundPoints,this._temp)},A$C._getCmdPoints=function(A$C){void 0===A$C&&(A$C=!1);var A$R,A$j,A$w=A$a._context,A$T=this._graphics.cmds;if((A$R=this._temp||(this._temp=[])).length=0,A$T||null==this._graphics._one||(A$S._tempCmds.length=0,A$S._tempCmds.push(this._graphics._one),A$T=A$S._tempCmds),!A$T)return A$R;(A$j=A$S._tempMatrixArrays).length=0;var A$G=A$S._initMatrix;A$G.identity();for(var A$o,A$U,A$t=A$S._tempMatrix,A$I=NaN,A$e=NaN,A$H=NaN,A$M=NaN,A$K=NaN,A$F=NaN,A$L=0,A$D=A$T.length;A$L<A$D;A$L++)if((A$o=A$T[A$L]).callee)switch(A$o.callee){case A$w._save:case 7:A$j.push(A$G),A$G=A$G.clone();break;case A$w._restore:case 8:A$G=A$j.pop();break;case A$w._scale:case 5:A$t.identity(),A$t.translate(-A$o[2],-A$o[3]),A$t.scale(A$o[0],A$o[1]),A$t.translate(A$o[2],A$o[3]),this._switchMatrix(A$G,A$t);break;case A$w._rotate:case 3:A$t.identity(),A$t.translate(-A$o[1],-A$o[2]),A$t.rotate(A$o[0]),A$t.translate(A$o[1],A$o[2]),this._switchMatrix(A$G,A$t);break;case A$w._translate:case 6:A$t.identity(),A$t.translate(A$o[0],A$o[1]),this._switchMatrix(A$G,A$t);break;case A$w._transform:case 4:A$t.identity(),A$t.translate(-A$o[1],-A$o[2]),A$t.concat(A$o[0]),A$t.translate(A$o[1],A$o[2]),this._switchMatrix(A$G,A$t);break;case 16:case 24:A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[0],A$o[1],A$o[2],A$o[3]),A$G);break;case 17:A$G.copyTo(A$t),A$t.concat(A$o[4]),A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[0],A$o[1],A$o[2],A$o[3]),A$t);break;case A$w._drawTexture:A$U=A$o[0],A$C?A$o[3]&&A$o[4]?A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$o[3],A$o[4]),A$G):(A$U=A$o[0],A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$U.width,A$U.height),A$G)):(A$I=(A$o[3]||A$U.sourceWidth)/A$U.width,A$e=(A$o[4]||A$U.sourceHeight)/A$U.height,A$H=A$I*A$U.sourceWidth,A$M=A$e*A$U.sourceHeight,A$K=0<A$U.offsetX?A$U.offsetX:0,A$F=0<A$U.offsetY?A$U.offsetY:0,A$K*=A$I,A$F*=A$e,A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1]-A$K,A$o[2]-A$F,A$H,A$M),A$G));break;case A$w._fillTexture:A$o[3]&&A$o[4]?A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$o[3],A$o[4]),A$G):(A$U=A$o[0],A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$U.width,A$U.height),A$G));break;case A$w._drawTextureWithTransform:var A$Q;A$Q=A$o[5]?(A$G.copyTo(A$t),A$t.concat(A$o[5]),A$t):A$G,A$C?A$o[3]&&A$o[4]?A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$o[3],A$o[4]),A$Q):(A$U=A$o[0],A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1],A$o[2],A$U.width,A$U.height),A$Q)):(A$U=A$o[0],A$I=(A$o[3]||A$U.sourceWidth)/A$U.width,A$e=(A$o[4]||A$U.sourceHeight)/A$U.height,A$H=A$I*A$U.sourceWidth,A$M=A$e*A$U.sourceHeight,A$K=0<A$U.offsetX?A$U.offsetX:0,A$F=0<A$U.offsetY?A$U.offsetY:0,A$K*=A$I,A$F*=A$e,A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[1]-A$K,A$o[2]-A$F,A$H,A$M),A$Q));break;case A$w._drawRect:case 13:A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[0],A$o[1],A$o[2],A$o[3]),A$G);break;case A$w._drawCircle:case A$w._fillCircle:case 14:A$S._addPointArrToRst(A$R,A$W._getBoundPointS(A$o[0]-A$o[2],A$o[1]-A$o[2],A$o[2]+A$o[2],A$o[2]+A$o[2]),A$G);break;case A$w._drawLine:case 20:A$S._tempPoints.length=0;var A$Z;A$Z=.5*A$o[5],A$o[0]==A$o[2]?A$S._tempPoints.push(A$o[0]+A$Z,A$o[1],A$o[2]+A$Z,A$o[3],A$o[0]-A$Z,A$o[1],A$o[2]-A$Z,A$o[3]):A$o[1]==A$o[3]?A$S._tempPoints.push(A$o[0],A$o[1]+A$Z,A$o[2],A$o[3]+A$Z,A$o[0],A$o[1]-A$Z,A$o[2],A$o[3]-A$Z):A$S._tempPoints.push(A$o[0],A$o[1],A$o[2],A$o[3]),A$S._addPointArrToRst(A$R,A$S._tempPoints,A$G);break;case A$w._drawCurves:case 22:A$S._addPointArrToRst(A$R,A$b.I.getBezierPoints(A$o[2]),A$G,A$o[0],A$o[1]);break;case A$w._drawPoly:case A$w._drawLines:case 18:A$S._addPointArrToRst(A$R,A$o[2],A$G,A$o[0],A$o[1]);break;case A$w._drawPath:case 19:A$S._addPointArrToRst(A$R,this._getPathPoints(A$o[2]),A$G,A$o[0],A$o[1]);break;case A$w._drawPie:case 15:A$S._addPointArrToRst(A$R,this._getPiePoints(A$o[0],A$o[1],A$o[2],A$o[3],A$o[4]),A$G)}return 200<A$R.length?A$R=A$d.copyArray(A$R,A$W._getWrapRec(A$R)._getBoundPoints()):8<A$R.length&&(A$R=A$f.scanPList(A$R)),A$R},A$C._switchMatrix=function(A$C,A$R){A$R.concat(A$C),A$R.copyTo(A$C)},A$C._getPiePoints=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$S._tempPoints;A$S._tempPoints.length=0,A$G.push(A$C,A$R);var A$o=(A$T-A$w)%(2*Math.PI)/10,A$U=NaN,A$t=A$w;for(A$U=0;A$U<=10;A$U++)A$G.push(A$C+A$j*Math.cos(A$t),A$R+A$j*Math.sin(A$t)),A$t+=A$o;return A$G},A$C._getPathPoints=function(A$C){var A$R,A$j,A$w=0,A$T=A$S._tempPoints;for(A$T.length=0,A$R=A$C.length,A$w=0;A$w<A$R;A$w++)1<(A$j=A$C[A$w]).length&&(A$T.push(A$j[1],A$j[2]),3<A$j.length&&A$T.push(A$j[3],A$j[4]));return A$T},A$S._addPointArrToRst=function(A$C,A$R,A$j,A$w,A$T){void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0);var A$G,A$o=0;for(A$G=A$R.length,A$o=0;A$o<A$G;A$o+=2)A$S._addPointToRst(A$C,A$R[A$o]+A$w,A$R[A$o+1]+A$T,A$j)},A$S._addPointToRst=function(A$C,A$R,A$j,A$w){var A$T=A$x.TEMP;A$T.setTo(A$R||0,A$j||0),A$w.transformPoint(A$T),A$C.push(A$T.x,A$T.y)},A$S._tempPoints=[],A$S._tempMatrixArrays=[],A$S._tempCmds=[],A$t(A$S,["_tempMatrix",function(){return this._tempMatrix=new A$P},"_initMatrix",function(){return this._initMatrix=new A$P}]),A$S}(),A$G=function(){function A$C(){}A$e(A$C,"laya.events.Event");var A$R=A$C.prototype;return A$R.setTo=function(A$C,A$R,A$j){return this.type=A$C,this.currentTarget=A$R,this.target=A$j,this},A$R.stopPropagation=function(){this._stoped=!0},A$F(0,A$R,"stageY",function(){return A$h.stage.mouseY}),A$F(0,A$R,"charCode",function(){return this.nativeEvent.charCode}),A$F(0,A$R,"touches",function(){var A$C=this.nativeEvent.touches;if(A$C)for(var A$R=A$h.stage,A$j=0,A$w=A$C.length;A$j<A$w;A$j++){var A$T=A$C[A$j],A$G=A$x.TEMP;A$G.setTo(A$T.clientX,A$T.clientY),A$R._canvasTransform.invertTransformPoint(A$G),A$R.transform.invertTransformPoint(A$G),A$T.stageX=A$G.x,A$T.stageY=A$G.y}return A$C}),A$F(0,A$R,"keyLocation",function(){return this.nativeEvent.keyLocation}),A$F(0,A$R,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),A$F(0,A$R,"altKey",function(){return this.nativeEvent.altKey}),A$F(0,A$R,"shiftKey",function(){return this.nativeEvent.shiftKey}),A$F(0,A$R,"stageX",function(){return A$h.stage.mouseX}),A$C.EMPTY=new A$C,A$C.MOUSE_DOWN="mousedown",A$C.MOUSE_UP="mouseup",A$C.CLICK="click",A$C.RIGHT_MOUSE_DOWN="rightmousedown",A$C.RIGHT_MOUSE_UP="rightmouseup",A$C.RIGHT_CLICK="rightclick",A$C.MOUSE_MOVE="mousemove",A$C.MOUSE_OVER="mouseover",A$C.MOUSE_OUT="mouseout",A$C.MOUSE_WHEEL="mousewheel",A$C.ROLL_OVER="mouseover",A$C.ROLL_OUT="mouseout",A$C.DOUBLE_CLICK="doubleclick",A$C.CHANGE="change",A$C.CHANGED="changed",A$C.RESIZE="resize",A$C.ADDED="added",A$C.REMOVED="removed",A$C.DISPLAY="display",A$C.UNDISPLAY="undisplay",A$C.ERROR="error",A$C.COMPLETE="complete",A$C.LOADED="loaded",A$C.INITED="inited",A$C.PROGRESS="progress",A$C.INPUT="input",A$C.RENDER="render",A$C.OPEN="open",A$C.MESSAGE="message",A$C.CLOSE="close",A$C.KEY_DOWN="keydown",A$C.KEY_PRESS="keypress",A$C.KEY_UP="keyup",A$C.FRAME="enterframe",A$C.DRAG_START="dragstart",A$C.DRAG_MOVE="dragmove",A$C.DRAG_END="dragend",A$C.ENTER="enter",A$C.SELECT="select",A$C.BLUR="blur",A$C.FOCUS="focus",A$C.VISIBILITY_CHANGE="visibilitychange",A$C.FOCUS_CHANGE="focuschange",A$C.PLAYED="played",A$C.PAUSED="paused",A$C.STOPPED="stopped",A$C.START="start",A$C.END="end",A$C.ENABLE_CHANGED="enablechanged",A$C.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",A$C.COMPONENT_ADDED="componentadded",A$C.COMPONENT_REMOVED="componentremoved",A$C.LAYER_CHANGED="layerchanged",A$C.HIERARCHY_LOADED="hierarchyloaded",A$C.RECOVERED="recovered",A$C.RELEASED="released",A$C.LINK="link",A$C.LABEL="label",A$C.FULL_SCREEN_CHANGE="fullscreenchange",A$C.DEVICE_LOST="devicelost",A$C.MESH_CHANGED="meshchanged",A$C.MATERIAL_CHANGED="materialchanged",A$C.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",A$C.ANIMATION_CHANGED="animationchanged",A$C.TRIGGER_ENTER="triggerenter",A$C.TRIGGER_STAY="triggerstay",A$C.TRIGGER_EXIT="triggerexit",A$C.TRAIL_FILTER_CHANGE="trailfilterchange",A$C.DOMINO_FILTER_CHANGE="dominofilterchange",A$C}(),A$H=(function(){function A$C(){}A$e(A$C,"laya.events.Keyboard"),A$C.NUMBER_0=48,A$C.NUMBER_1=49,A$C.NUMBER_2=50,A$C.NUMBER_3=51,A$C.NUMBER_4=52,A$C.NUMBER_5=53,A$C.NUMBER_6=54,A$C.NUMBER_7=55,A$C.NUMBER_8=56,A$C.NUMBER_9=57,A$C.A=65,A$C.B=66,A$C.C=67,A$C.D=68,A$C.E=69,A$C.F=70,A$C.G=71,A$C.H=72,A$C.I=73,A$C.J=74,A$C.K=75,A$C.L=76,A$C.M=77,A$C.N=78,A$C.O=79,A$C.P=80,A$C.Q=81,A$C.R=82,A$C.S=83,A$C.T=84,A$C.U=85,A$C.V=86,A$C.W=87,A$C.X=88,A$C.Y=89,A$C.Z=90,A$C.F1=112,A$C.F2=113,A$C.F3=114,A$C.F4=115,A$C.F5=116,A$C.F6=117,A$C.F7=118,A$C.F8=119,A$C.F9=120,A$C.F10=121,A$C.F11=122,A$C.F12=123,A$C.F13=124,A$C.F14=125,A$C.F15=126,A$C.NUMPAD=21,A$C.NUMPAD_0=96,A$C.NUMPAD_1=97,A$C.NUMPAD_2=98,A$C.NUMPAD_3=99,A$C.NUMPAD_4=100,A$C.NUMPAD_5=101,A$C.NUMPAD_6=102,A$C.NUMPAD_7=103,A$C.NUMPAD_8=104,A$C.NUMPAD_9=105,A$C.NUMPAD_ADD=107,A$C.NUMPAD_DECIMAL=110,A$C.NUMPAD_DIVIDE=111,A$C.NUMPAD_ENTER=108,A$C.NUMPAD_MULTIPLY=106,A$C.NUMPAD_SUBTRACT=109,A$C.SEMICOLON=186,A$C.EQUAL=187,A$C.COMMA=188,A$C.MINUS=189,A$C.PERIOD=190,A$C.SLASH=191,A$C.BACKQUOTE=192,A$C.LEFTBRACKET=219,A$C.BACKSLASH=220,A$C.RIGHTBRACKET=221,A$C.QUOTE=222,A$C.ALTERNATE=18,A$C.BACKSPACE=8,A$C.CAPS_LOCK=20,A$C.COMMAND=15,A$C.CONTROL=17,A$C.DELETE=46,A$C.ENTER=13,A$C.ESCAPE=27,A$C.PAGE_UP=33,A$C.PAGE_DOWN=34,A$C.END=35,A$C.HOME=36,A$C.LEFT=37,A$C.UP=38,A$C.RIGHT=39,A$C.DOWN=40,A$C.SHIFT=16,A$C.SPACE=32,A$C.TAB=9,A$C.INSERT=45}(),function(){function A$T(){}return A$e(A$T,"laya.events.KeyBoardManager"),A$T.__init__=function(){A$T._addEvent("keydown"),A$T._addEvent("keypress"),A$T._addEvent("keyup")},A$T._addEvent=function(A$R){A$V.document.addEventListener(A$R,function(A$C){laya.events.KeyBoardManager._dispatch(A$C,A$R)},!0)},A$T._dispatch=function(A$C,A$R){if(A$T.enabled){A$T._event._stoped=!1,A$T._event.nativeEvent=A$C,A$T._event.keyCode=A$C.keyCode||A$C.which||A$C.charCode,"keydown"===A$R?A$T._pressKeys[A$T._event.keyCode]=!0:"keyup"===A$R&&(A$T._pressKeys[A$T._event.keyCode]=null);for(var A$j=A$h.stage.focus&&null!=A$h.stage.focus.event&&A$h.stage.focus.displayedInStage?A$h.stage.focus:A$h.stage,A$w=A$j;A$w;)A$w.event(A$R,A$T._event.setTo(A$R,A$w,A$j)),A$w=A$w.parent}},A$T.hasKeyDown=function(A$C){return A$T._pressKeys[A$C]},A$T._pressKeys={},A$T.enabled=!0,A$t(A$T,["_event",function(){return this._event=new A$G}]),A$T}()),A$L=(function(){function A$C(){}A$e(A$C,"laya.events.KeyLocation"),A$C.STANDARD=0,A$C.LEFT=1,A$C.RIGHT=2,A$C.NUM_PAD=3}(),function(){function A$I(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=A$V.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new A$G,this._matrix=new A$P,this._point=new A$x,this._rect=new A$W,this._prePoint=new A$x,this._curTouchID=NaN}A$e(A$I,"laya.events.MouseManager");var A$C=A$I.prototype;return A$C.__init__=function(A$C,A$R){var A$j=this;this._stage=A$C;var A$w=this,A$T=this._eventList;A$R.oncontextmenu=function(A$C){if(A$I.enabled)return!1},A$R.addEventListener("mousedown",function(A$C){A$I.enabled&&(A$V.onIE||A$C.preventDefault(),A$T.push(A$C),A$w.mouseDownTime=A$V.now())}),A$R.addEventListener("mouseup",function(A$C){A$I.enabled&&(A$C.preventDefault(),A$T.push(A$C),A$w.mouseDownTime=-A$V.now())},!0),A$R.addEventListener("mousemove",function(A$C){if(A$I.enabled){A$C.preventDefault();var A$R=A$V.now();if(A$R-A$w._lastMoveTimer<10)return;A$w._lastMoveTimer=A$R,A$T.push(A$C)}},!0),A$R.addEventListener("mouseout",function(A$C){A$I.enabled&&A$T.push(A$C)}),A$R.addEventListener("mouseover",function(A$C){A$I.enabled&&A$T.push(A$C)}),A$R.addEventListener("touchstart",function(A$C){A$I.enabled&&(A$T.push(A$C),A$I._isFirstTouch||A$fC.isInputting||A$C.preventDefault(),A$w.mouseDownTime=A$V.now())}),A$R.addEventListener("touchend",function(A$C){A$I.enabled?(A$I._isFirstTouch||A$fC.isInputting||A$C.preventDefault(),A$I._isFirstTouch=!1,A$T.push(A$C),A$w.mouseDownTime=-A$V.now()):A$j._curTouchID=NaN},!0),A$R.addEventListener("touchmove",function(A$C){A$I.enabled&&(A$C.preventDefault(),A$T.push(A$C))},!0),A$R.addEventListener("touchcancel",function(A$C){A$I.enabled?(A$C.preventDefault(),A$T.push(A$C)):A$j._curTouchID=NaN},!0),A$R.addEventListener("mousewheel",function(A$C){A$I.enabled&&A$T.push(A$C)}),A$R.addEventListener("DOMMouseScroll",function(A$C){A$I.enabled&&A$T.push(A$C)})},A$C.initEvent=function(A$C,A$R){var A$j;this._event._stoped=!1,this._event.nativeEvent=A$R||A$C,this._target=null,this._point.setTo(A$C.pageX||A$C.clientX,A$C.pageY||A$C.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=A$C.identifier||0,this._tTouchID=this._event.touchId,(A$j=A$D.I._event)._stoped=!1,A$j.nativeEvent=this._event.nativeEvent,A$j.touchId=this._event.touchId},A$C.checkMouseWheel=function(A$C){this._event.delta=A$C.wheelDelta?.025*A$C.wheelDelta:-A$C.detail;for(var A$R=A$D.I.getLastOvers(),A$j=0,A$w=A$R.length;A$j<A$w;A$j++){var A$T=A$R[A$j];A$T.event("mousewheel",this._event.setTo("mousewheel",A$T,this._target))}},A$C.onMouseMove=function(A$C){A$D.I.onMouseMove(A$C,this._tTouchID)},A$C.onMouseDown=function(A$C){if(A$fC.isInputting&&A$h.stage.focus&&A$h.stage.focus.focus&&!A$h.stage.focus.contains(this._target)){var A$R=A$h.stage.focus._tf||A$h.stage.focus,A$j=A$C._tf||A$C;A$j instanceof laya.display.Input&&A$j.multiline==A$R.multiline?A$R._focusOut():A$R.focus=!1}A$D.I.onMouseDown(A$C,this._tTouchID,this._isLeftMouse)},A$C.onMouseUp=function(A$C){A$D.I.onMouseUp(A$C,this._tTouchID,this._isLeftMouse)},A$C.check=function(A$C,A$R,A$j,A$w){this._point.setTo(A$R,A$j),A$C.fromParentPoint(this._point),A$R=this._point.x,A$j=this._point.y;var A$T=A$C.scrollRect;if(A$T&&(this._rect.setTo(A$T.x,A$T.y,A$T.width,A$T.height),!this._rect.contains(A$R,A$j)))return!1;if(!this.disableMouseEvent){if(A$C.hitTestPrior&&!A$C.mouseThrough&&!this.hitTest(A$C,A$R,A$j))return!1;for(var A$G=A$C._childs.length-1;-1<A$G;A$G--){var A$o=A$C._childs[A$G];if(!A$o.destroyed&&A$o.mouseEnabled&&A$o.visible&&this.check(A$o,A$R,A$j,A$w))return!0}}var A$U=!(!A$C.hitTestPrior||A$C.mouseThrough||this.disableMouseEvent)||this.hitTest(A$C,A$R,A$j);return A$U?(this._target=A$C,A$w.call(this,A$C)):A$w===this.onMouseUp&&A$C===this._stage&&(this._target=this._stage,A$w.call(this,this._target)),A$U},A$C.hitTest=function(A$C,A$R,A$j){var A$w=!1;if(A$C.scrollRect&&(A$R-=A$C.scrollRect.x,A$j-=A$C.scrollRect.y),A$C.hitArea instanceof laya.utils.HitArea)return A$C.hitArea.isHit(A$R,A$j);if(0<A$C.width&&0<A$C.height||A$C.mouseThrough||A$C.hitArea)if(A$C.mouseThrough)A$w=A$C.getGraphicBounds().contains(A$R,A$j);else{var A$T=this._rect;A$C.hitArea?A$T=A$C.hitArea:A$T.setTo(0,0,A$C.width,A$C.height),A$w=A$T.contains(A$R,A$j)}return A$w},A$C.runEvent=function(){var A$C=this._eventList.length;if(A$C){this.mouseEventTime=A$V.now();var A$R,A$j=0,A$w=0,A$T=0;try{for(;A$j<A$C;){var A$G=this._eventList[A$j];switch("mousemove"!==A$G.type&&(this._prePoint.x=this._prePoint.y=-1e6),A$G.type){case"mousedown":this._touchIDs[0]=this._id++,A$I._isTouchRespond?A$I._isTouchRespond=!1:(this._isLeftMouse=0===A$G.button,this.initEvent(A$G),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===A$G.button,this.initEvent(A$G),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-A$G.clientX)+Math.abs(this._prePoint.y-A$G.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=A$G.clientX,this._prePoint.y=A$G.clientY,this.initEvent(A$G),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":A$I._isTouchRespond=!0,this._isLeftMouse=!0;var A$o=A$G.changedTouches;for(A$w=0,A$T=A$o.length;A$w<A$T;A$w++)A$R=A$o[A$w],(A$I.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=A$R.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[A$R.identifier]=this._id++,this.initEvent(A$R,A$G),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":A$I._isTouchRespond=!0,this._isLeftMouse=!0;var A$U=A$G.changedTouches;for(A$w=0,A$T=A$U.length;A$w<A$T;A$w++)if(A$R=A$U[A$w],A$I.multiTouchEnabled||A$R.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(A$R,A$G);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var A$t=A$G.changedTouches;for(A$w=0,A$T=A$t.length;A$w<A$T;A$w++)A$R=A$t[A$w],(A$I.multiTouchEnabled||A$R.identifier==this._curTouchID)&&(this.initEvent(A$R,A$G),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(A$G);break;case"mouseout":A$D.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}A$j++}}catch(A$C){throw this._eventList.length=0,A$C}this._eventList.length=0}},A$I.enabled=!0,A$I.multiTouchEnabled=!0,A$I._isTouchRespond=!1,A$I._isFirstTouch=!0,A$t(A$I,["instance",function(){return this.instance=new A$I}]),A$I}()),A$D=function(){function A$F(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new A$G}A$e(A$F,"laya.events.TouchManager");var A$C=A$F.prototype;return A$C._clearTempArrs=function(){A$F._oldArr.length=0,A$F._newArr.length=0,A$F._tEleArr.length=0},A$C.getTouchFromArr=function(A$C,A$R){var A$j,A$w,A$T=0;for(A$j=A$R.length,A$T=0;A$T<A$j;A$T++)if((A$w=A$R[A$T]).id==A$C)return A$w;return null},A$C.removeTouchFromArr=function(A$C,A$R){var A$j=0;for(A$j=A$R.length-1;0<=A$j;A$j--)A$R[A$j].id==A$C&&A$R.splice(A$j,1)},A$C.createTouchO=function(A$C,A$R){var A$j;return(A$j=A$s.getItem("TouchData")||{}).id=A$R,A$j.tar=A$C,A$j},A$C.onMouseDown=function(A$C,A$R,A$j){var A$w,A$T,A$G,A$o;(void 0===A$j&&(A$j=!1),this.enable)&&(A$w=this.getTouchFromArr(A$R,this.preOvers),A$G=this.getEles(A$C,null,A$F._tEleArr),A$w?A$w.tar=A$C:(A$T=this.createTouchO(A$C,A$R),this.preOvers.push(A$T)),A$V.onMobile&&this.sendEvents(A$G,"mouseover",A$R),A$o=A$j?this.preDowns:this.preRightDowns,(A$w=this.getTouchFromArr(A$R,A$o))?A$w.tar=A$C:(A$T=this.createTouchO(A$C,A$R),A$o.push(A$T)),this.sendEvents(A$G,A$j?"mousedown":"rightmousedown",A$R),this._clearTempArrs())},A$C.sendEvents=function(A$C,A$R,A$j){void 0===A$j&&(A$j=0);var A$w,A$T,A$G,A$o=0;for(A$w=A$C.length,this._event._stoped=!1,A$T=A$C[0],A$o=0;A$o<A$w;A$o++){if((A$G=A$C[A$o]).destroyed)return;if(A$G.event(A$R,this._event.setTo(A$R,A$G,A$T)),this._event._stoped)break}},A$C.getEles=function(A$C,A$R,A$j){for(A$j?A$j.length=0:A$j=[];A$C&&A$C!=A$R;)A$j.push(A$C),A$C=A$C.parent;return A$j},A$C.checkMouseOutAndOverOfMove=function(A$C,A$R,A$j){if(void 0===A$j&&(A$j=0),A$R!=A$C){var A$w,A$T,A$G=0,A$o=0;if(A$R.contains(A$C))A$T=this.getEles(A$C,A$R,A$F._tEleArr),this.sendEvents(A$T,"mouseover",A$j);else if(A$C.contains(A$R))A$T=this.getEles(A$R,A$C,A$F._tEleArr),this.sendEvents(A$T,"mouseout",A$j);else{var A$U,A$t;(A$T=A$F._tEleArr).length=0,A$U=this.getEles(A$R,null,A$F._oldArr),A$t=this.getEles(A$C,null,A$F._newArr),A$o=A$U.length;var A$I=0;for(A$G=0;A$G<A$o;A$G++){if(A$w=A$U[A$G],0<=(A$I=A$t.indexOf(A$w))){A$t.splice(A$I,A$t.length-A$I);break}A$T.push(A$w)}0<A$T.length&&this.sendEvents(A$T,"mouseout",A$j),0<A$t.length&&this.sendEvents(A$t,"mouseover",A$j)}}},A$C.onMouseMove=function(A$C,A$R){var A$j,A$w;this.enable&&((A$j=this.getTouchFromArr(A$R,this.preOvers))?(this.checkMouseOutAndOverOfMove(A$C,A$j.tar),A$j.tar=A$C,A$w=this.getEles(A$C,null,A$F._tEleArr)):(A$w=this.getEles(A$C,null,A$F._tEleArr),this.sendEvents(A$w,"mouseover",A$R),this.preOvers.push(this.createTouchO(A$C,A$R))),this.sendEvents(A$w,"mousemove",A$R),this._clearTempArrs())},A$C.getLastOvers=function(){return(A$F._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,A$F._tEleArr):(A$F._tEleArr.push(A$h.stage),A$F._tEleArr)},A$C.stageMouseOut=function(){var A$C;A$C=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(A$C,"mouseout",0)},A$C.onMouseUp=function(A$C,A$R,A$j){if(void 0===A$j&&(A$j=!1),this.enable){var A$w,A$T,A$G,A$o,A$U,A$t,A$I=0,A$e=0,A$H=A$V.onMobile;if(A$T=this.getEles(A$C,null,A$F._tEleArr),this.sendEvents(A$T,A$j?"mouseup":"rightmouseup",A$R),A$t=A$j?this.preDowns:this.preRightDowns,A$w=this.getTouchFromArr(A$R,A$t)){var A$M,A$K=A$V.now();if(A$M=A$K-this._lastClickTime<300,this._lastClickTime=A$K,A$C==A$w.tar)A$U=A$T;else for(A$G=this.getEles(A$w.tar,null,A$F._oldArr),(A$U=A$F._newArr).length=0,A$e=A$G.length,A$I=0;A$I<A$e;A$I++)A$o=A$G[A$I],0<=A$T.indexOf(A$o)&&A$U.push(A$o);0<A$U.length&&this.sendEvents(A$U,A$j?"click":"rightclick",A$R),A$j&&A$M&&this.sendEvents(A$U,"doubleclick",A$R),this.removeTouchFromArr(A$R,A$t),A$w.tar=null,A$s.recover("TouchData",A$w)}else;(A$w=this.getTouchFromArr(A$R,this.preOvers))&&A$H&&((A$U=this.getEles(A$w.tar,null,A$U))&&0<A$U.length&&this.sendEvents(A$U,"mouseout",A$R),this.removeTouchFromArr(A$R,this.preOvers),A$w.tar=null,A$s.recover("TouchData",A$w)),this._clearTempArrs()}},A$F._oldArr=[],A$F._newArr=[],A$F._tEleArr=[],A$t(A$F,["I",function(){return this.I=new A$F}]),A$F}(),A$Q=function(){function A$C(){this._action=null}A$e(A$C,"laya.filters.Filter");var A$R=A$C.prototype;return A$h.imps(A$R,{"laya.filters.IFilter":!0}),A$R.callNative=function(A$C){},A$F(0,A$R,"type",function(){return-1}),A$F(0,A$R,"action",function(){return this._action}),A$C.BLUR=16,A$C.COLOR=32,A$C.GLOW=8,A$C._filterStart=null,A$C._filterEnd=null,A$C._EndTarget=null,A$C._recycleScope=null,A$C._filter=null,A$C._useSrc=null,A$C._endSrc=null,A$C._useOut=null,A$C._endOut=null,A$C}(),A$S=function(){function A$C(){this.data=null}A$e(A$C,"laya.filters.ColorFilterAction");var A$R=A$C.prototype;return A$h.imps(A$R,{"laya.filters.IFilterAction":!0}),A$R.apply=function(A$C){var A$R=A$C.ctx.ctx,A$j=A$C.ctx.ctx.canvas;if(0==A$j.width||0==A$j.height)return A$j;for(var A$w,A$T=A$R.getImageData(0,0,A$j.width,A$j.height),A$G=A$T.data,A$o=0,A$U=A$G.length;A$o<A$U;A$o+=4)A$w=this.getColor(A$G[A$o],A$G[A$o+1],A$G[A$o+2],A$G[A$o+3]),0!=A$G[A$o+3]&&(A$G[A$o]=A$w[0],A$G[A$o+1]=A$w[1],A$G[A$o+2]=A$w[2],A$G[A$o+3]=A$w[3]);return A$R.putImageData(A$T,0,0),A$C},A$R.getColor=function(A$C,A$R,A$j,A$w){var A$T=[];if(this.data._mat&&this.data._alpha){var A$G=this.data._mat,A$o=this.data._alpha;A$T[0]=A$G[0]*A$C+A$G[1]*A$R+A$G[2]*A$j+A$G[3]*A$w+A$o[0],A$T[1]=A$G[4]*A$C+A$G[5]*A$R+A$G[6]*A$j+A$G[7]*A$w+A$o[1],A$T[2]=A$G[8]*A$C+A$G[9]*A$R+A$G[10]*A$j+A$G[11]*A$w+A$o[2],A$T[3]=A$G[12]*A$C+A$G[13]*A$R+A$G[14]*A$j+A$G[15]*A$w+A$o[3]}return A$T},A$C}(),A$b=(function(){function A$C(){}A$e(A$C,"laya.maths.Arith"),A$C.formatR=function(A$C){return A$C>Math.PI&&(A$C-=2*Math.PI),A$C<-Math.PI&&(A$C+=2*Math.PI),A$C},A$C.isPOT=function(A$C,A$R){return 0<A$C&&0==(A$C&A$C-1)&&0<A$R&&0==(A$R&A$R-1)},A$C.setMatToArray=function(A$C,A$R){A$C.a,A$C.b,A$C.c,A$C.d,A$C.tx,A$C.ty,A$R[0]=A$C.a,A$R[1]=A$C.b,A$R[4]=A$C.c,A$R[5]=A$C.d,A$R[12]=A$C.tx,A$R[13]=A$C.ty}}(),function(){function A$C(){this._controlPoints=[new A$x,new A$x,new A$x],this._calFun=this.getPoint2}A$e(A$C,"laya.maths.Bezier");var A$R=A$C.prototype;return A$R._switchPoint=function(A$C,A$R){var A$j=this._controlPoints.shift();A$j.setTo(A$C,A$R),this._controlPoints.push(A$j)},A$R.getPoint2=function(A$C,A$R){var A$j=this._controlPoints[0],A$w=this._controlPoints[1],A$T=this._controlPoints[2],A$G=Math.pow(1-A$C,2)*A$j.x+2*A$C*(1-A$C)*A$w.x+Math.pow(A$C,2)*A$T.x,A$o=Math.pow(1-A$C,2)*A$j.y+2*A$C*(1-A$C)*A$w.y+Math.pow(A$C,2)*A$T.y;A$R.push(A$G,A$o)},A$R.getPoint3=function(A$C,A$R){var A$j=this._controlPoints[0],A$w=this._controlPoints[1],A$T=this._controlPoints[2],A$G=this._controlPoints[3],A$o=Math.pow(1-A$C,3)*A$j.x+3*A$w.x*A$C*(1-A$C)*(1-A$C)+3*A$T.x*A$C*A$C*(1-A$C)+A$G.x*Math.pow(A$C,3),A$U=Math.pow(1-A$C,3)*A$j.y+3*A$w.y*A$C*(1-A$C)*(1-A$C)+3*A$T.y*A$C*A$C*(1-A$C)+A$G.y*Math.pow(A$C,3);A$R.push(A$o,A$U)},A$R.insertPoints=function(A$C,A$R){var A$j,A$w=NaN;for(A$j=1/(A$C=0<A$C?A$C:5),A$w=0;A$w<=1;A$w+=A$j)this._calFun(A$w,A$R)},A$R.getBezierPoints=function(A$C,A$R,A$j){void 0===A$R&&(A$R=5),void 0===A$j&&(A$j=2);var A$w,A$T,A$G=0;if((A$w=A$C.length)<2*(A$j+1))return[];switch(A$T=[],A$j){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=A$j;)this._controlPoints.push(new A$x);for(A$G=0;A$G<2*A$j;A$G+=2)this._switchPoint(A$C[A$G],A$C[A$G+1]);for(A$G=2*A$j;A$G<A$w;A$G+=2)this._switchPoint(A$C[A$G],A$C[A$G+1]),A$G/2%A$j==0&&this.insertPoints(A$R,A$T);return A$T},A$t(A$C,["I",function(){return this.I=new A$C}]),A$C}()),A$f=function(){function A$I(){}return A$e(A$I,"laya.maths.GrahamScan"),A$I.multiply=function(A$C,A$R,A$j){return(A$C.x-A$j.x)*(A$R.y-A$j.y)-(A$R.x-A$j.x)*(A$C.y-A$j.y)},A$I.dis=function(A$C,A$R){return(A$C.x-A$R.x)*(A$C.x-A$R.x)+(A$C.y-A$R.y)*(A$C.y-A$R.y)},A$I._getPoints=function(A$C,A$R,A$j){for(void 0===A$R&&(A$R=!1),A$I._mPointList||(A$I._mPointList=[]);A$I._mPointList.length<A$C;)A$I._mPointList.push(new A$x);return A$j||(A$j=[]),A$j.length=0,A$R?A$I.getFrom(A$j,A$I._mPointList,A$C):A$I.getFromR(A$j,A$I._mPointList,A$C),A$j},A$I.getFrom=function(A$C,A$R,A$j){var A$w=0;for(A$w=0;A$w<A$j;A$w++)A$C.push(A$R[A$w]);return A$C},A$I.getFromR=function(A$C,A$R,A$j){var A$w=0;for(A$w=0;A$w<A$j;A$w++)A$C.push(A$R.pop());return A$C},A$I.pListToPointList=function(A$C,A$R){void 0===A$R&&(A$R=!1);var A$j=0,A$w=A$C.length/2,A$T=A$I._getPoints(A$w,A$R,A$I._tempPointList);for(A$j=0;A$j<A$w;A$j++)A$T[A$j].setTo(A$C[A$j+A$j],A$C[A$j+A$j+1]);return A$T},A$I.pointListToPlist=function(A$C){var A$R,A$j=0,A$w=A$C.length,A$T=A$I._temPList;for(A$j=A$T.length=0;A$j<A$w;A$j++)A$R=A$C[A$j],A$T.push(A$R.x,A$R.y);return A$T},A$I.scanPList=function(A$C){return A$d.copyArray(A$C,A$I.pointListToPlist(A$I.scan(A$I.pListToPointList(A$C,!0))))},A$I.scan=function(A$C){var A$R,A$j,A$w,A$T=0,A$G=0,A$o=0,A$U=A$C.length,A$t={};for((A$j=A$I._temArr).length=0,A$T=(A$U=A$C.length)-1;0<=A$T;A$T--)A$w=(A$R=A$C[A$T]).x+"_"+A$R.y,A$t.hasOwnProperty(A$w)||(A$t[A$w]=!0,A$j.push(A$R));for(A$U=A$j.length,A$d.copyArray(A$C,A$j),A$T=1;A$T<A$U;A$T++)(A$C[A$T].y<A$C[A$o].y||A$C[A$T].y==A$C[A$o].y&&A$C[A$T].x<A$C[A$o].x)&&(A$o=A$T);for(A$R=A$C[0],A$C[0]=A$C[A$o],A$C[A$o]=A$R,A$T=1;A$T<A$U-1;A$T++){for(A$G=(A$o=A$T)+1;A$G<A$U;A$G++)(0<A$I.multiply(A$C[A$G],A$C[A$o],A$C[0])||0==A$I.multiply(A$C[A$G],A$C[A$o],A$C[0])&&A$I.dis(A$C[0],A$C[A$G])<A$I.dis(A$C[0],A$C[A$o]))&&(A$o=A$G);A$R=A$C[A$T],A$C[A$T]=A$C[A$o],A$C[A$o]=A$R}if((A$j=A$I._temArr).length=0,A$C.length<3)return A$d.copyArray(A$j,A$C);for(A$j.push(A$C[0],A$C[1],A$C[2]),A$T=3;A$T<A$U;A$T++){for(;2<=A$j.length&&0<=A$I.multiply(A$C[A$T],A$j[A$j.length-1],A$j[A$j.length-2]);)A$j.pop();A$C[A$T]&&A$j.push(A$C[A$T])}return A$j},A$I._mPointList=null,A$I._tempPointList=[],A$I._temPList=[],A$I._temArr=[],A$I}(),A$p=function(){function A$T(){}return A$e(A$T,"laya.maths.MathUtil"),A$T.subtractVector3=function(A$C,A$R,A$j){A$j[0]=A$C[0]-A$R[0],A$j[1]=A$C[1]-A$R[1],A$j[2]=A$C[2]-A$R[2]},A$T.lerp=function(A$C,A$R,A$j){return A$C*(1-A$j)+A$R*A$j},A$T.scaleVector3=function(A$C,A$R,A$j){A$j[0]=A$C[0]*A$R,A$j[1]=A$C[1]*A$R,A$j[2]=A$C[2]*A$R},A$T.lerpVector3=function(A$C,A$R,A$j,A$w){var A$T=A$C[0],A$G=A$C[1],A$o=A$C[2];A$w[0]=A$T+A$j*(A$R[0]-A$T),A$w[1]=A$G+A$j*(A$R[1]-A$G),A$w[2]=A$o+A$j*(A$R[2]-A$o)},A$T.lerpVector4=function(A$C,A$R,A$j,A$w){var A$T=A$C[0],A$G=A$C[1],A$o=A$C[2],A$U=A$C[3];A$w[0]=A$T+A$j*(A$R[0]-A$T),A$w[1]=A$G+A$j*(A$R[1]-A$G),A$w[2]=A$o+A$j*(A$R[2]-A$o),A$w[3]=A$U+A$j*(A$R[3]-A$U)},A$T.slerpQuaternionArray=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U,A$t,A$I,A$e,A$H,A$M=A$C[A$R+0],A$K=A$C[A$R+1],A$F=A$C[A$R+2],A$L=A$C[A$R+3],A$D=A$j[A$w+0],A$Q=A$j[A$w+1],A$Z=A$j[A$w+2],A$S=A$j[A$w+3];return(A$t=A$M*A$D+A$K*A$Q+A$F*A$Z+A$L*A$S)<0&&(A$t=-A$t,A$D=-A$D,A$Q=-A$Q,A$Z=-A$Z,A$S=-A$S),A$H=1e-6<1-A$t?(A$U=Math.acos(A$t),A$I=Math.sin(A$U),A$e=Math.sin((1-A$T)*A$U)/A$I,Math.sin(A$T*A$U)/A$I):(A$e=1-A$T,A$T),A$G[A$o+0]=A$e*A$M+A$H*A$D,A$G[A$o+1]=A$e*A$K+A$H*A$Q,A$G[A$o+2]=A$e*A$F+A$H*A$Z,A$G[A$o+3]=A$e*A$L+A$H*A$S,A$G},A$T.getRotation=function(A$C,A$R,A$j,A$w){return Math.atan2(A$w-A$R,A$j-A$C)/Math.PI*180},A$T.sortBigFirst=function(A$C,A$R){return A$C==A$R?0:A$C<A$R?1:-1},A$T.sortSmallFirst=function(A$C,A$R){return A$C==A$R?0:A$C<A$R?-1:1},A$T.sortNumBigFirst=function(A$C,A$R){return parseFloat(A$R)-parseFloat(A$C)},A$T.sortNumSmallFirst=function(A$C,A$R){return parseFloat(A$C)-parseFloat(A$R)},A$T.sortByKey=function(A$j,A$C,A$R){var A$w;return void 0===A$C&&(A$C=!1),void 0===A$R&&(A$R=!0),A$w=A$C?A$R?A$T.sortNumBigFirst:A$T.sortBigFirst:A$R?A$T.sortNumSmallFirst:A$T.sortSmallFirst,function(A$C,A$R){return A$w(A$C[A$j],A$R[A$j])}},A$T}(),A$P=function(){function A$j(A$C,A$R,A$j,A$w,A$T,A$G){this.inPool=!1,this.bTransform=!1,void 0===A$C&&(A$C=1),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=1),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=0),this.a=A$C,this.b=A$R,this.c=A$j,this.d=A$w,this.tx=A$T,this.ty=A$G,this._checkTransform()}A$e(A$j,"laya.maths.Matrix");var A$C=A$j.prototype;return A$C.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},A$C._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},A$C.setTranslate=function(A$C,A$R){return this.tx=A$C,this.ty=A$R,this},A$C.translate=function(A$C,A$R){return this.tx+=A$C,this.ty+=A$R,this},A$C.scale=function(A$C,A$R){this.a*=A$C,this.d*=A$R,this.c*=A$C,this.b*=A$R,this.tx*=A$C,this.ty*=A$R,this.bTransform=!0},A$C.rotate=function(A$C){var A$R=Math.cos(A$C),A$j=Math.sin(A$C),A$w=this.a,A$T=this.c,A$G=this.tx;this.a=A$w*A$R-this.b*A$j,this.b=A$w*A$j+this.b*A$R,this.c=A$T*A$R-this.d*A$j,this.d=A$T*A$j+this.d*A$R,this.tx=A$G*A$R-this.ty*A$j,this.ty=A$G*A$j+this.ty*A$R,this.bTransform=!0},A$C.skew=function(A$C,A$R){var A$j=Math.tan(A$C),A$w=Math.tan(A$R),A$T=this.a,A$G=this.b;return this.a+=A$w*this.c,this.b+=A$w*this.d,this.c+=A$j*A$T,this.d+=A$j*A$G,this},A$C.invertTransformPoint=function(A$C){var A$R=this.a,A$j=this.b,A$w=this.c,A$T=this.d,A$G=this.tx,A$o=A$R*A$T-A$j*A$w,A$U=A$T/A$o,A$t=-A$j/A$o,A$I=-A$w/A$o,A$e=A$R/A$o,A$H=(A$w*this.ty-A$T*A$G)/A$o,A$M=-(A$R*this.ty-A$j*A$G)/A$o;return A$C.setTo(A$U*A$C.x+A$I*A$C.y+A$H,A$t*A$C.x+A$e*A$C.y+A$M)},A$C.transformPoint=function(A$C){return A$C.setTo(this.a*A$C.x+this.c*A$C.y+this.tx,this.b*A$C.x+this.d*A$C.y+this.ty)},A$C.transformPointN=function(A$C){return A$C.setTo(this.a*A$C.x+this.c*A$C.y,this.b*A$C.x+this.d*A$C.y)},A$C.transformPointArray=function(A$C,A$R){for(var A$j=A$C.length,A$w=0;A$w<A$j;A$w+=2){var A$T=A$C[A$w],A$G=A$C[A$w+1];A$R[A$w]=this.a*A$T+this.c*A$G+this.tx,A$R[A$w+1]=this.b*A$T+this.d*A$G+this.ty}return A$R},A$C.transformPointArrayScale=function(A$C,A$R){for(var A$j=A$C.length,A$w=0;A$w<A$j;A$w+=2){var A$T=A$C[A$w],A$G=A$C[A$w+1];A$R[A$w]=this.a*A$T+this.c*A$G,A$R[A$w+1]=this.b*A$T+this.d*A$G}return A$R},A$C.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},A$C.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},A$C.invert=function(){var A$C=this.a,A$R=this.b,A$j=this.c,A$w=this.d,A$T=this.tx,A$G=A$C*A$w-A$R*A$j;return this.a=A$w/A$G,this.b=-A$R/A$G,this.c=-A$j/A$G,this.d=A$C/A$G,this.tx=(A$j*this.ty-A$w*A$T)/A$G,this.ty=-(A$C*this.ty-A$R*A$T)/A$G,this},A$C.setTo=function(A$C,A$R,A$j,A$w,A$T,A$G){return this.a=A$C,this.b=A$R,this.c=A$j,this.d=A$w,this.tx=A$T,this.ty=A$G,this},A$C.concat=function(A$C){var A$R=this.a,A$j=this.c,A$w=this.tx;return this.a=A$R*A$C.a+this.b*A$C.c,this.b=A$R*A$C.b+this.b*A$C.d,this.c=A$j*A$C.a+this.d*A$C.c,this.d=A$j*A$C.b+this.d*A$C.d,this.tx=A$w*A$C.a+this.ty*A$C.c+A$C.tx,this.ty=A$w*A$C.b+this.ty*A$C.d+A$C.ty,this},A$C.scaleEx=function(A$C,A$R){var A$j=this.a,A$w=this.b,A$T=this.c,A$G=this.d;0!==A$w||0!==A$T?(this.a=A$C*A$j,this.b=A$C*A$w,this.c=A$R*A$T):(this.a=A$C*A$j,this.b=0*A$G,this.c=0*A$j),this.d=A$R*A$G,this.bTransform=!0},A$C.rotateEx=function(A$C){var A$R=Math.cos(A$C),A$j=Math.sin(A$C),A$w=this.a,A$T=this.b,A$G=this.c,A$o=this.d;0!==A$T||0!==A$G?(this.a=A$R*A$w+A$j*A$G,this.b=A$R*A$T+A$j*A$o,this.c=-A$j*A$w+A$R*A$G,this.d=-A$j*A$T+A$R*A$o):(this.a=A$R*A$w,this.b=A$j*A$o,this.c=-A$j*A$w,this.d=A$R*A$o),this.bTransform=!0},A$C.clone=function(){var A$C=A$j.create();return A$C.a=this.a,A$C.b=this.b,A$C.c=this.c,A$C.d=this.d,A$C.tx=this.tx,A$C.ty=this.ty,A$C.bTransform=this.bTransform,A$C},A$C.copyTo=function(A$C){return A$C.a=this.a,A$C.b=this.b,A$C.c=this.c,A$C.d=this.d,A$C.tx=this.tx,A$C.ty=this.ty,A$C.bTransform=this.bTransform,A$C},A$C.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},A$C.destroy=function(){if(!this.inPool){var A$C=A$j._cache;this.inPool=!0,A$C._length||(A$C._length=0),(A$C[A$C._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},A$j.mul=function(A$C,A$R,A$j){var A$w=A$C.a,A$T=A$C.b,A$G=A$C.c,A$o=A$C.d,A$U=A$C.tx,A$t=A$C.ty,A$I=A$R.a,A$e=A$R.b,A$H=A$R.c,A$M=A$R.d,A$K=A$R.tx,A$F=A$R.ty;return 0!==A$e||0!==A$H?(A$j.a=A$w*A$I+A$T*A$H,A$j.b=A$w*A$e+A$T*A$M,A$j.c=A$G*A$I+A$o*A$H,A$j.d=A$G*A$e+A$o*A$M,A$j.tx=A$I*A$U+A$H*A$t+A$K,A$j.ty=A$e*A$U+A$M*A$t+A$F):(A$j.a=A$w*A$I,A$j.b=A$T*A$M,A$j.c=A$G*A$I,A$j.d=A$o*A$M,A$j.tx=A$I*A$U+A$K,A$j.ty=A$M*A$t+A$F),A$j},A$j.mul16=function(A$C,A$R,A$j){var A$w=A$C.a,A$T=A$C.b,A$G=A$C.c,A$o=A$C.d,A$U=A$C.tx,A$t=A$C.ty,A$I=A$R.a,A$e=A$R.b,A$H=A$R.c,A$M=A$R.d,A$K=A$R.tx,A$F=A$R.ty;return 0!==A$e||0!==A$H?(A$j[0]=A$w*A$I+A$T*A$H,A$j[1]=A$w*A$e+A$T*A$M,A$j[4]=A$G*A$I+A$o*A$H,A$j[5]=A$G*A$e+A$o*A$M,A$j[12]=A$I*A$U+A$H*A$t+A$K,A$j[13]=A$e*A$U+A$M*A$t+A$F):(A$j[0]=A$w*A$I,A$j[1]=A$T*A$M,A$j[4]=A$G*A$I,A$j[5]=A$o*A$M,A$j[12]=A$I*A$U+A$K,A$j[13]=A$M*A$t+A$F),A$j},A$j.mulPre=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=A$C.a,A$I=A$C.b,A$e=A$C.c,A$H=A$C.d,A$M=A$C.tx,A$K=A$C.ty;return 0!==A$j||0!==A$w?(A$U.a=A$t*A$R+A$I*A$w,A$U.b=A$t*A$j+A$I*A$T,A$U.c=A$e*A$R+A$H*A$w,A$U.d=A$e*A$j+A$H*A$T,A$U.tx=A$R*A$M+A$w*A$K+A$G,A$U.ty=A$j*A$M+A$T*A$K+A$o):(A$U.a=A$t*A$R,A$U.b=A$I*A$T,A$U.c=A$e*A$R,A$U.d=A$H*A$T,A$U.tx=A$R*A$M+A$G,A$U.ty=A$T*A$K+A$o),A$U},A$j.mulPos=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=A$C.a,A$I=A$C.b,A$e=A$C.c,A$H=A$C.d,A$M=A$C.tx,A$K=A$C.ty;return 0!==A$I||0!==A$e?(A$U.a=A$R*A$t+A$j*A$e,A$U.b=A$R*A$I+A$j*A$H,A$U.c=A$w*A$t+A$T*A$e,A$U.d=A$w*A$I+A$T*A$H,A$U.tx=A$t*A$G+A$e*A$o+A$M,A$U.ty=A$I*A$G+A$H*A$o+A$K):(A$U.a=A$R*A$t,A$U.b=A$j*A$H,A$U.c=A$w*A$t,A$U.d=A$T*A$H,A$U.tx=A$t*A$G+A$M,A$U.ty=A$H*A$o+A$K),A$U},A$j.preMul=function(A$C,A$R,A$j){var A$w=A$C.a,A$T=A$C.b,A$G=A$C.c,A$o=A$C.d,A$U=A$R.a,A$t=A$R.b,A$I=A$R.c,A$e=A$R.d,A$H=A$R.tx,A$M=A$R.ty;return A$j.a=A$U*A$w,A$j.b=A$j.c=0,A$j.d=A$e*A$o,A$j.tx=A$H*A$w+A$C.tx,A$j.ty=A$M*A$o+A$C.ty,0===A$t&&0===A$I&&0===A$T&&0===A$G||(A$j.a+=A$t*A$G,A$j.d+=A$I*A$T,A$j.b+=A$U*A$T+A$t*A$o,A$j.c+=A$I*A$w+A$e*A$G,A$j.tx+=A$M*A$G,A$j.ty+=A$H*A$T),A$j},A$j.preMulXY=function(A$C,A$R,A$j,A$w){var A$T=A$C.a,A$G=A$C.b,A$o=A$C.c,A$U=A$C.d;return A$w.a=A$T,A$w.b=A$G,A$w.c=A$o,A$w.d=A$U,A$w.tx=A$R*A$T+A$C.tx+A$j*A$o,A$w.ty=A$j*A$U+A$C.ty+A$R*A$G,A$w},A$j.create=function(){var A$C=A$j._cache,A$R=A$C._length?A$C[--A$C._length]:new A$j;return A$R.inPool=!1,A$R},A$j.EMPTY=new A$j,A$j.TEMP=new A$j,A$j._cache=[],A$j}(),A$x=function(){function A$C(A$C,A$R){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),this.x=A$C,this.y=A$R}A$e(A$C,"laya.maths.Point");var A$R=A$C.prototype;return A$R.setTo=function(A$C,A$R){return this.x=A$C,this.y=A$R,this},A$R.distance=function(A$C,A$R){return Math.sqrt((this.x-A$C)*(this.x-A$C)+(this.y-A$R)*(this.y-A$R))},A$R.toString=function(){return this.x+","+this.y},A$R.normalize=function(){var A$C=Math.sqrt(this.x*this.x+this.y*this.y);if(0<A$C){var A$R=1/A$C;this.x*=A$R,this.y*=A$R}},A$C.TEMP=new A$C,A$C.EMPTY=new A$C,A$C}(),A$W=function(){function A$I(A$C,A$R,A$j,A$w){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),this.x=A$C,this.y=A$R,this.width=A$j,this.height=A$w}A$e(A$I,"laya.maths.Rectangle");var A$C=A$I.prototype;return A$C.setTo=function(A$C,A$R,A$j,A$w){return this.x=A$C,this.y=A$R,this.width=A$j,this.height=A$w,this},A$C.copyFrom=function(A$C){return this.x=A$C.x,this.y=A$C.y,this.width=A$C.width,this.height=A$C.height,this},A$C.contains=function(A$C,A$R){return!(this.width<=0||this.height<=0)&&(A$C>=this.x&&A$C<this.right&&A$R>=this.y&&A$R<this.bottom)},A$C.intersects=function(A$C){return!(A$C.x>this.x+this.width||A$C.x+A$C.width<this.x||A$C.y>this.y+this.height||A$C.y+A$C.height<this.y)},A$C.intersection=function(A$C,A$R){return this.intersects(A$C)?(A$R||(A$R=new A$I),A$R.x=Math.max(this.x,A$C.x),A$R.y=Math.max(this.y,A$C.y),A$R.width=Math.min(this.right,A$C.right)-A$R.x,A$R.height=Math.min(this.bottom,A$C.bottom)-A$R.y,A$R):null},A$C.union=function(A$C,A$R){return A$R||(A$R=new A$I),this.clone(A$R),A$C.width<=0||A$C.height<=0?A$R:(A$R.addPoint(A$C.x,A$C.y),A$R.addPoint(A$C.right,A$C.bottom),this)},A$C.clone=function(A$C){return A$C||(A$C=new A$I),A$C.x=this.x,A$C.y=this.y,A$C.width=this.width,A$C.height=this.height,A$C},A$C.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},A$C.equals=function(A$C){return!(!A$C||A$C.x!==this.x||A$C.y!==this.y||A$C.width!==this.width||A$C.height!==this.height)},A$C.addPoint=function(A$C,A$R){return this.x>A$C&&(this.width+=this.x-A$C,this.x=A$C),this.y>A$R&&(this.height+=this.y-A$R,this.y=A$R),this.width<A$C-this.x&&(this.width=A$C-this.x),this.height<A$R-this.y&&(this.height=A$R-this.y),this},A$C._getBoundPoints=function(){var A$C=A$I._temB;return(A$C.length=0)==this.width||0==this.height||A$C.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),A$C},A$C.isEmpty=function(){return this.width<=0||this.height<=0},A$F(0,A$C,"right",function(){return this.x+this.width}),A$F(0,A$C,"bottom",function(){return this.y+this.height}),A$I._getBoundPointS=function(A$C,A$R,A$j,A$w){var A$T=A$I._temA;return(A$T.length=0)==A$j||0==A$w||A$T.push(A$C,A$R,A$C+A$j,A$R,A$C,A$R+A$w,A$C+A$j,A$R+A$w),A$T},A$I._getWrapRec=function(A$C,A$R){if(!A$C||A$C.length<1)return A$R?A$R.setTo(0,0,0,0):A$I.TEMP.setTo(0,0,0,0);A$R=A$R||new A$I;var A$j,A$w,A$T,A$G,A$o,A$U=A$C.length,A$t=A$x.TEMP;for(A$T=A$o=-(A$w=A$G=99999),A$j=0;A$j<A$U;A$j+=2)A$t.x=A$C[A$j],A$t.y=A$C[A$j+1],A$w=A$w<A$t.x?A$w:A$t.x,A$G=A$G<A$t.y?A$G:A$t.y,A$T=A$T>A$t.x?A$T:A$t.x,A$o=A$o>A$t.y?A$o:A$t.y;return A$R.setTo(A$w,A$G,A$T-A$w,A$o-A$G)},A$I.EMPTY=new A$I,A$I.TEMP=new A$I,A$I._temB=[],A$I._temA=[],A$I}(),A$r=function(){function A$t(){}return A$e(A$t,"laya.media.SoundManager"),A$F(1,A$t,"useAudioMusic",function(){return A$t._useAudioMusic},function(A$C){A$t._useAudioMusic=A$C,A$t._musicClass=A$C?A$jC:null}),A$F(1,A$t,"autoStopMusic",function(){return A$t._autoStopMusic},function(A$C){A$h.stage.off("blur",null,A$t._stageOnBlur),A$h.stage.off("focus",null,A$t._stageOnFocus),A$h.stage.off("visibilitychange",null,A$t._visibilityChange),(A$t._autoStopMusic=A$C)&&(A$h.stage.on("blur",null,A$t._stageOnBlur),A$h.stage.on("focus",null,A$t._stageOnFocus),A$h.stage.on("visibilitychange",null,A$t._visibilityChange))}),A$F(1,A$t,"muted",function(){return A$t._muted},function(A$C){A$C!=A$t._muted&&(A$C&&A$t.stopAllSound(),A$t.musicMuted=A$C,A$t._muted=A$C)}),A$F(1,A$t,"musicMuted",function(){return A$t._musicMuted},function(A$C){A$C!=A$t._musicMuted&&(A$C?(A$t._tMusic&&A$t._musicChannel&&!A$t._musicChannel.isStopped?A$t._musicChannel.pause():A$t._musicChannel=null,A$t._musicMuted=A$C):(A$t._musicMuted=A$C,A$t._tMusic&&A$t._musicChannel&&A$t._musicChannel.resume()))}),A$F(1,A$t,"soundMuted",function(){return A$t._soundMuted},function(A$C){A$t._soundMuted=A$C}),A$t.addChannel=function(A$C){0<=A$t._channels.indexOf(A$C)||(A$t._channels.push(A$C),A$t.autoReleaseSound&&0!=A$t._notUsedCount&&A$t._notUsedUrls[A$C.url]&&(delete A$t._notUsedUrls[A$C.url],0==--A$t._notUsedCount&&A$h.timer.clear(A$t,A$t.disposeSoundIfNotUsed)))},A$t.removeChannel=function(A$C){var A$R=A$t._channels,A$j=A$R.indexOf(A$C);if(-1!=A$j&&(A$R.splice(A$j,1),A$t.autoReleaseSound)){var A$w=A$C.url,A$T=A$t.defaultIntervals[A$w]||2e4;if(0<A$T){var A$G=!0;for(A$j=A$R.length-1;0<=A$j;A$j--)if(A$R[A$j].url==A$w){A$G=!1;break}A$G&&(A$t._notUsedUrls[A$w]=Date.now()+A$T,0==A$t._notUsedCount++&&A$h.timer.loop(1e4,A$t,A$t.disposeSoundIfNotUsed))}}},A$t.disposeSoundIfNotUsed=function(){var A$C=A$t._notUsedUrls;if(0!=A$t._notUsedCount){var A$R=Date.now();for(var A$j in A$C)A$R>=A$C[A$j]&&(delete A$C[A$j],--A$t._notUsedCount,A$t.destroySound(A$j));if(0!=A$t._notUsedCount)return}A$h.timer.clear(A$t,A$t.disposeSoundIfNotUsed)},A$t._visibilityChange=function(){A$h.stage.isVisibility?A$t._stageOnFocus():A$t._stageOnBlur()},A$t._stageOnBlur=function(){A$t._isActive=!1,A$t._musicChannel&&(A$t._musicChannel.isStopped||(A$t._blurPaused=!0,A$t._musicChannel.pause())),A$t.stopAllSound(),A$h.stage.once("mousedown",null,A$t._stageOnFocus)},A$t._recoverWebAudio=function(){A$GC.ctx&&"running"!=A$GC.ctx.state&&A$GC.ctx.resume&&A$GC.ctx.resume()},A$t._stageOnFocus=function(){if(A$t._isActive=!0,A$t._recoverWebAudio(),A$h.stage.off("mousedown",null,A$t._stageOnFocus),A$t._blurPaused){var A$C=A$t._musicChannel;A$C&&A$t._music&&A$C.isStopped&&(A$t._blurPaused=!1,A$t._music._disposed?A$t.playMusic(A$C.url,A$C.loops,A$C.startHandler,A$C.completeHandler,A$C.startTime):A$C.audioBuffer?A$C.resume():A$t._music.play(A$C.startTime,A$C.loops,A$C.startHandler,A$C))}},A$t.playSound=function(A$C,A$R,A$j,A$w,A$T,A$G){if(void 0===A$R&&(A$R=1),void 0===A$G&&(A$G=0),!A$C)return null;if(A$t._muted)return null;if(A$t._recoverWebAudio(),A$C==A$t._tMusic){if(A$t._musicMuted)return null}else{if(!A$t._isActive)return null;if(A$t._soundMuted)return null}var A$o,A$U=A$t._pool[A$C];return A$T||(A$T=A$t._soundClass),A$U||((A$U=new A$T).load(A$C),A$t._pool[A$C]=A$U),(A$o=A$U.play(A$G,A$R,A$j))?(A$C==A$t._tMusic&&(A$t._music=A$U,A$t._isActive||(A$t._blurPaused=!0,A$o.pause())),A$o.url=A$C,A$o.volume=A$C==A$t._tMusic?A$t.musicVolume:A$t.soundVolume,A$o.completeHandler=A$w,A$o):null},A$t.destroySound=function(A$C){var A$R=A$t._pool[A$C];A$R&&(delete A$t._pool[A$C],A$R.dispose())},A$t.playMusic=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$R&&(A$R=0),void 0===A$T&&(A$T=0),A$t._tMusic=A$C,A$t._musicChannel&&A$t._musicChannel.stop(),A$t._musicChannel=A$t.playSound(A$C,A$R,A$j,A$w,null,A$T)},A$t.stopSound=function(A$C){for(var A$R,A$j=A$t._channels.length-1;0<=A$j;A$j--)(A$R=A$t._channels[A$j]).url==A$C&&A$R.stop()},A$t.stopAll=function(){A$t._tMusic=null;var A$C=0;for(A$C=A$t._channels.length-1;0<=A$C;A$C--)A$t._channels[A$C].stop()},A$t.stopAllSound=function(){var A$C,A$R=0;for(A$R=A$t._channels.length-1;0<=A$R;A$R--)(A$C=A$t._channels[A$R]).url!=A$t._tMusic&&A$C.stop()},A$t.stopMusic=function(){A$t._musicChannel&&A$t._musicChannel.stop(),A$t._tMusic=null},A$t.setSoundVolume=function(A$C,A$R){if(A$R)A$t._setVolume(A$R,A$C);else{A$t.soundVolume=A$C;var A$j,A$w=0;for(A$w=A$t._channels.length-1;0<=A$w;A$w--)(A$j=A$t._channels[A$w]).url!=A$t._tMusic&&(A$j.volume=A$C)}},A$t.setMusicVolume=function(A$C){A$t.musicVolume=A$C,A$t._setVolume(A$t._tMusic,A$C)},A$t._setVolume=function(A$C,A$R){for(var A$j,A$w=A$t._channels.length-1;0<=A$w;A$w--)(A$j=A$t._channels[A$w]).url==A$C&&(A$j.volume=A$R)},A$t.musicVolume=1,A$t.soundVolume=1,A$t.playbackRate=1,A$t._useAudioMusic=!0,A$t._muted=!1,A$t._soundMuted=!1,A$t._musicMuted=!1,A$t._tMusic=null,A$t._musicChannel=null,A$t._music=null,A$t._channels=[],A$t._autoStopMusic=!1,A$t._blurPaused=!1,A$t._isActive=!0,A$t._soundClass=null,A$t._musicClass=null,A$t.autoReleaseSound=!0,A$t._pool={},A$t.defaultIntervals={},A$t._notUsedUrls={},A$t._notUsedCount=0,A$t}(),A$$=function(){var A$C;function A$j(){}return A$e(A$j,"laya.net.LocalStorage"),A$j.__init__=function(){A$j._baseClass||(A$j._baseClass=A$C).init(),A$j.items=A$j._baseClass.items,A$j.support=A$j._baseClass.support},A$j.setItem=function(A$C,A$R){A$j._baseClass.setItem(A$C,A$R)},A$j.getItem=function(A$C){return A$j._baseClass.getItem(A$C)},A$j.setJSON=function(A$C,A$R){A$j._baseClass.setJSON(A$C,A$R)},A$j.getJSON=function(A$C){return A$j._baseClass.getJSON(A$C)},A$j.removeItem=function(A$C){A$j._baseClass.removeItem(A$C)},A$j.clear=function(){A$j._baseClass.clear()},A$j._baseClass=null,A$j.items=null,A$j.support=!1,A$j.__init$=function(){A$C=function(){function A$j(){}return A$e(A$j,""),A$j.init=function(){try{A$j.support=!0,A$j.items=A$o.localStorage,A$j.setItem("laya","1"),A$j.removeItem("laya")}catch(A$C){A$j.support=!1}A$j.support||console.log("LocalStorage is not supprot or browser is private mode.")},A$j.setItem=function(A$C,A$R){try{A$j.support&&A$j.items.setItem(A$C,A$R)}catch(A$C){console.warn("set localStorage failed",A$C)}},A$j.getItem=function(A$C){return A$j.support?A$j.items.getItem(A$C):null},A$j.setJSON=function(A$C,A$R){try{A$j.support&&A$j.items.setItem(A$C,JSON.stringify(A$R))}catch(A$C){console.warn("set localStorage failed",A$C)}},A$j.getJSON=function(A$C){return JSON.parse(A$j.support?A$j.items.getItem(A$C):null)},A$j.removeItem=function(A$C){A$j.support&&A$j.items.removeItem(A$C)},A$j.clear=function(){A$j.support&&A$j.items.clear()},A$j.items=null,A$j.support=!1,A$j}()},A$j}(),A$J=(function(){function A$w(){}A$e(A$w,"laya.net.ResourceVersion"),A$w.enable=function(A$C,A$R,A$j){void 0===A$j&&(A$j=2),laya.net.ResourceVersion.type=A$j,A$h.loader.load(A$C,A$Z.create(null,A$w.onManifestLoaded,[A$R]),null,"json"),A$N.customFormat=A$w.addVersionPrefix},A$w.onManifestLoaded=function(A$C,A$R){A$w.manifest=A$R,A$C.run(),A$R||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},A$w.addVersionPrefix=function(A$C){return A$w.manifest&&A$w.manifest[A$C]?2==A$w.type?A$w.manifest[A$C]:A$w.manifest[A$C]+"/"+A$C:A$C},A$w.FOLDER_VERSION=1,A$w.FILENAME_VERSION=2,A$w.manifest=null,A$w.type=1}(),function(){function A$C(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}A$e(A$C,"laya.net.TTFLoader");var A$R=A$C.prototype;return A$R.load=function(A$C){var A$R=(this._url=A$C).split(".ttf")[0].split("/");this.fontName=A$R[A$R.length-1],A$V.window.conch?this._loadConch():A$V.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},A$R._loadConch=function(){this._http=new A$oC,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},A$R._onHttpLoaded=function(A$C){A$V.window.conch.setFontFaceFromBuffer(this.fontName,A$C),this._clearHttp(),this._complete()},A$R._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},A$R._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},A$R._complete=function(){A$h.timer.clear(this,this._complete),A$h.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},A$R._checkComplete=function(){A$E.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},A$R._loadWithFontFace=function(){var A$C=new A$V.window.FontFace(this.fontName,"url('"+this._url+"')");A$V.window.document.fonts.add(A$C);var A$R=this;A$C.loaded.then(function(){A$R._complete()}),A$C.load()},A$R._createDiv=function(){this._div=A$V.createElement("div"),this._div.innerHTML="laya";var A$C=this._div.style;A$C.fontFamily=this.fontName,A$C.position="absolute",A$C.left="-100px",A$C.top="-100px",A$V.document.body.appendChild(this._div)},A$R._loadWithCSS=function(){var A$C=this,A$R=A$V.createElement("style");A$R.type="text/css",A$V.document.body.appendChild(A$R),A$R.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=A$E.measureText("LayaTTFFont",this._fontTxt).width;var A$j=this;A$R.onload=function(){A$h.timer.once(1e4,A$j,A$C._complete)},A$h.timer.loop(20,this,this._checkComplete),this._createDiv()},A$C._testString="LayaTTFFont",A$C}()),A$N=function(){function A$w(A$C){this._url=null,this._path=null,this._url=A$w.formatURL(A$C),this._path=A$w.getPath(A$C)}A$e(A$w,"laya.net.URL");var A$C=A$w.prototype;return A$F(0,A$C,"path",function(){return this._path}),A$F(0,A$C,"url",function(){return this._url}),A$w.formatURL=function(A$C,A$R){if(!A$C)return"null path";if(0<A$C.indexOf(":"))return A$C;null!=A$w.customFormat&&(A$C=A$w.customFormat(A$C,A$R));var A$j=A$C.charAt(0);if("."===A$j)return A$w.formatRelativePath((A$R||A$w.basePath)+A$C);if("~"===A$j)return A$w.rootPath+A$C.substring(1);if("d"===A$j){if(0===A$C.indexOf("data:image"))return A$C}else if("/"===A$j)return A$C;return(A$R||A$w.basePath)+A$C},A$w.formatRelativePath=function(A$C){for(var A$R=A$C.split("/"),A$j=0,A$w=A$R.length;A$j<A$w;A$j++)".."==A$R[A$j]&&(A$R.splice(A$j-1,2),A$j-=2);return A$R.join("/")},A$w.isAbsolute=function(A$C){return 0<A$C.indexOf(":")||"/"==A$C.charAt(0)},A$w.getPath=function(A$C){var A$R=A$C.lastIndexOf("/");return 0<A$R?A$C.substr(0,A$R+1):""},A$w.getFileName=function(A$C){var A$R=A$C.lastIndexOf("/");return 0<A$R?A$C.substr(A$R+1):A$C},A$w.version={},A$w.basePath="",A$w.rootPath="",A$w.customFormat=function(A$C){var A$R=A$w.version[A$C];return!A$a.isConchApp&&A$R&&(A$C+="?v="+A$R),A$C},A$w}(),A$a=function(){function A$T(A$C,A$R){this._timeId=0;var A$j=A$T._mainCanvas.source.style;A$j.position="absolute",A$j.top=A$j.left="0px",A$j.background="#000000",A$T._mainCanvas.source.id="layaCanvas";var A$w=laya.renders.Render.isWebGL;A$T._mainCanvas.source.width=A$C,A$T._mainCanvas.source.height=A$R,A$w&&A$T.WebGL.init(A$T._mainCanvas,A$C,A$R),A$V.container.appendChild(A$T._mainCanvas.source),(A$T._context=new A$n(A$C,A$R,A$w?null:A$T._mainCanvas)).ctx.setIsMainContext(),A$V.window.requestAnimationFrame(function A$C(A$R){A$V.window.requestAnimationFrame(A$C);A$h.stage._loop()}),A$h.stage.on("visibilitychange",this,this._onVisibilitychange)}A$e(A$T,"laya.renders.Render");var A$C=A$T.prototype;return A$C._onVisibilitychange=function(){A$h.stage.isVisibility?0!=this._timeId&&A$V.window.clearInterval(this._timeId):this._timeId=A$V.window.setInterval(this._enterFrame,1e3)},A$C._enterFrame=function(A$C){A$h.stage._loop()},A$F(1,A$T,"context",function(){return A$T._context}),A$F(1,A$T,"canvas",function(){return A$T._mainCanvas.source}),A$T._context=null,A$T._mainCanvas=null,A$T.WebGL=null,A$T.isConchNode=!1,A$T.isConchApp=!1,A$T.isConchWebGL=!1,A$T.isWebGL=!1,A$T.is3DMode=!1,A$T.optimizeTextureMemory=function(A$C,A$R){return!0},A$T.__init$=function(){A$o.ConchRenderType=A$o.ConchRenderType||1,A$o.ConchRenderType|=A$o.conch?4:0,A$T.isConchNode=5==(5&A$o.ConchRenderType),A$T.isConchApp=4==(4&A$o.ConchRenderType),A$T.isConchWebGL=6==A$o.ConchRenderType},A$T}(),A$n=function(){function A$o(A$C,A$R,A$j){this.x=0,this.y=0,this._drawTexture=function(A$C,A$R,A$j){A$j[0].loaded&&this.ctx.drawTexture(A$j[0],A$j[1],A$j[2],A$j[3],A$j[4],A$C,A$R)},this._fillTexture=function(A$C,A$R,A$j){A$j[0].loaded&&this.ctx.fillTexture(A$j[0],A$j[1]+A$C,A$j[2]+A$R,A$j[3],A$j[4],A$j[5],A$j[6],A$j[7])},this._drawTextureWithTransform=function(A$C,A$R,A$j){A$j[0].loaded&&this.ctx.drawTextureWithTransform(A$j[0],A$j[1],A$j[2],A$j[3],A$j[4],A$j[5],A$C,A$R,A$j[6])},this._fillQuadrangle=function(A$C,A$R,A$j){this.ctx.fillQuadrangle(A$j[0],A$j[1],A$j[2],A$j[3],A$j[4])},this._drawRect=function(A$C,A$R,A$j){var A$w=this.ctx;null!=A$j[4]&&(A$w.fillStyle=A$j[4],A$w.fillRect(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3],null)),null!=A$j[5]&&(A$w.strokeStyle=A$j[5],A$w.lineWidth=A$j[6],A$w.strokeRect(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3],A$j[6]))},this._drawPie=function(A$C,A$R,A$j){var A$w=this.ctx;A$a.isWebGL&&A$w.setPathId(A$j[8]),A$w.beginPath(),A$a.isWebGL?(A$w.movePath(A$j[0]+A$C,A$j[1]+A$R),A$w.moveTo(0,0)):A$w.moveTo(A$C+A$j[0],A$R+A$j[1]),A$w.arc(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3],A$j[4]),A$w.closePath(),this._fillAndStroke(A$j[5],A$j[6],A$j[7],!0)},this._clipRect=function(A$C,A$R,A$j){this.ctx.clipRect(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3])},this._fillRect=function(A$C,A$R,A$j){this.ctx.fillRect(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3],A$j[4])},this._drawCircle=function(A$C,A$R,A$j){var A$w=this.ctx;A$a.isWebGL&&A$w.setPathId(A$j[6]),A$c.drawCall++,A$w.beginPath(),A$a.isWebGL&&A$w.movePath(A$j[0]+A$C,A$j[1]+A$R),A$w.arc(A$j[0]+A$C,A$j[1]+A$R,A$j[2],0,A$o.PI2),A$w.closePath(),this._fillAndStroke(A$j[3],A$j[4],A$j[5],!0)},this._fillCircle=function(A$C,A$R,A$j){A$c.drawCall++;var A$w=this.ctx;A$w.beginPath(),A$w.fillStyle=A$j[3],A$w.arc(A$j[0]+A$C,A$j[1]+A$R,A$j[2],0,A$o.PI2),A$w.fill()},this._setShader=function(A$C,A$R,A$j){this.ctx.setShader(A$j[0])},this._drawLine=function(A$C,A$R,A$j){var A$w=this.ctx;A$a.isWebGL&&A$w.setPathId(A$j[6]),A$w.beginPath(),A$w.strokeStyle=A$j[4],A$w.lineWidth=A$j[5],A$a.isWebGL?(A$w.movePath(A$C,A$R),A$w.moveTo(A$j[0],A$j[1]),A$w.lineTo(A$j[2],A$j[3])):(A$w.moveTo(A$C+A$j[0],A$R+A$j[1]),A$w.lineTo(A$C+A$j[2],A$R+A$j[3])),A$w.stroke()},this._drawLines=function(A$C,A$R,A$j){var A$w=this.ctx;A$a.isWebGL&&A$w.setPathId(A$j[5]),A$w.beginPath(),A$C+=A$j[0],A$R+=A$j[1],A$a.isWebGL&&A$w.movePath(A$C,A$R),A$w.strokeStyle=A$j[3],A$w.lineWidth=A$j[4];var A$T=A$j[2],A$G=2,A$o=A$T.length;if(A$a.isWebGL)for(A$w.moveTo(A$T[0],A$T[1]);A$G<A$o;)A$w.lineTo(A$T[A$G++],A$T[A$G++]);else for(A$w.moveTo(A$C+A$T[0],A$R+A$T[1]);A$G<A$o;)A$w.lineTo(A$C+A$T[A$G++],A$R+A$T[A$G++]);A$w.stroke()},this._drawLinesWebGL=function(A$C,A$R,A$j){this.ctx.drawLines(A$C+this.x+A$j[0],A$R+this.y+A$j[1],A$j[2],A$j[3],A$j[4])},this._drawCurves=function(A$C,A$R,A$j){this.ctx.drawCurves(A$C,A$R,A$j)},this._draw=function(A$C,A$R,A$j){A$j[0].call(null,this,A$C,A$R)},this._transformByMatrix=function(A$C,A$R,A$j){this.ctx.transformByMatrix(A$j[0])},this._setTransform=function(A$C,A$R,A$j){this.ctx.setTransform(A$j[0],A$j[1],A$j[2],A$j[3],A$j[4],A$j[5])},this._setTransformByMatrix=function(A$C,A$R,A$j){this.ctx.setTransformByMatrix(A$j[0])},this._save=function(A$C,A$R,A$j){this.ctx.save()},this._restore=function(A$C,A$R,A$j){this.ctx.restore()},this._translate=function(A$C,A$R,A$j){this.ctx.translate(A$j[0],A$j[1])},this._transform=function(A$C,A$R,A$j){this.ctx.translate(A$j[1]+A$C,A$j[2]+A$R);var A$w=A$j[0];this.ctx.transform(A$w.a,A$w.b,A$w.c,A$w.d,A$w.tx,A$w.ty),this.ctx.translate(-A$C-A$j[1],-A$R-A$j[2])},this._rotate=function(A$C,A$R,A$j){this.ctx.translate(A$j[1]+A$C,A$j[2]+A$R),this.ctx.rotate(A$j[0]),this.ctx.translate(-A$C-A$j[1],-A$R-A$j[2])},this._scale=function(A$C,A$R,A$j){this.ctx.translate(A$j[2]+A$C,A$j[3]+A$R),this.ctx.scale(A$j[0],A$j[1]),this.ctx.translate(-A$C-A$j[2],-A$R-A$j[3])},this._alpha=function(A$C,A$R,A$j){this.ctx.globalAlpha*=A$j[0]},this._setAlpha=function(A$C,A$R,A$j){this.ctx.globalAlpha=A$j[0]},this._fillText=function(A$C,A$R,A$j){this.ctx.fillText(A$j[0],A$j[1]+A$C,A$j[2]+A$R,A$j[3],A$j[4],A$j[5])},this._strokeText=function(A$C,A$R,A$j){this.ctx.strokeText(A$j[0],A$j[1]+A$C,A$j[2]+A$R,A$j[3],A$j[4],A$j[5],A$j[6])},this._fillBorderText=function(A$C,A$R,A$j){this.ctx.fillBorderText(A$j[0],A$j[1]+A$C,A$j[2]+A$R,A$j[3],A$j[4],A$j[5],A$j[6],A$j[7])},this._blendMode=function(A$C,A$R,A$j){this.ctx.globalCompositeOperation=A$j[0]},this._beginClip=function(A$C,A$R,A$j){this.ctx.beginClip&&this.ctx.beginClip(A$C+A$j[0],A$R+A$j[1],A$j[2],A$j[3])},this._setIBVB=function(A$C,A$R,A$j){this.ctx.setIBVB(A$j[0]+A$C,A$j[1]+A$R,A$j[2],A$j[3],A$j[4],A$j[5],A$j[6],A$j[7])},this._fillTrangles=function(A$C,A$R,A$j){this.ctx.fillTrangles(A$j[0],A$j[1]+A$C,A$j[2]+A$R,A$j[3],A$j[4])},this._drawPath=function(A$C,A$R,A$j){var A$w=this.ctx;A$a.isWebGL&&A$w.setPathId(-1),A$w.beginPath(),A$C+=A$j[0],A$R+=A$j[1],A$a.isWebGL&&A$w.movePath(A$C,A$R);for(var A$T=A$j[2],A$G=0,A$o=A$T.length;A$G<A$o;A$G++){var A$U=A$T[A$G];switch(A$U[0]){case"moveTo":A$a.isWebGL?A$w.moveTo(A$U[1],A$U[2]):A$w.moveTo(A$C+A$U[1],A$R+A$U[2]);break;case"lineTo":A$a.isWebGL?A$w.lineTo(A$U[1],A$U[2]):A$w.lineTo(A$C+A$U[1],A$R+A$U[2]);break;case"arcTo":A$a.isWebGL?A$w.arcTo(A$U[1],A$U[2],A$U[3],A$U[4],A$U[5]):A$w.arcTo(A$C+A$U[1],A$R+A$U[2],A$C+A$U[3],A$R+A$U[4],A$U[5]);break;case"closePath":A$w.closePath()}}var A$t=A$j[3];null!=A$t&&(A$w.fillStyle=A$t.fillStyle,A$w.fill());var A$I=A$j[4];null!=A$I&&(A$w.strokeStyle=A$I.strokeStyle,A$w.lineWidth=A$I.lineWidth||1,A$w.lineJoin=A$I.lineJoin,A$w.lineCap=A$I.lineCap,A$w.miterLimit=A$I.miterLimit,A$w.stroke())},this.drawPoly=function(A$C,A$R,A$j){this.ctx.drawPoly(A$C+this.x+A$j[0],A$R+this.y+A$j[1],A$j[2],A$j[3],A$j[4],A$j[5],A$j[6])},this._drawPoly=function(A$C,A$R,A$j){var A$w=this.ctx,A$T=A$j[2],A$G=2,A$o=A$T.length;if(A$a.isWebGL)for(A$w.setPathId(A$j[6]),A$w.beginPath(),A$C+=A$j[0],A$R+=A$j[1],A$w.movePath(A$C,A$R),A$w.moveTo(A$T[0],A$T[1]);A$G<A$o;)A$w.lineTo(A$T[A$G++],A$T[A$G++]);else for(A$w.beginPath(),A$C+=A$j[0],A$R+=A$j[1],A$w.moveTo(A$C+A$T[0],A$R+A$T[1]);A$G<A$o;)A$w.lineTo(A$C+A$T[A$G++],A$R+A$T[A$G++]);A$w.closePath(),this._fillAndStroke(A$j[3],A$j[4],A$j[5],A$j[7])},this._drawSkin=function(A$C,A$R,A$j){var A$w=A$j[0];if(A$w){var A$T=this.ctx;A$w.render(A$T,A$C,A$R)}},this._drawParticle=function(A$C,A$R,A$j){this.ctx.drawParticle(A$C+this.x,A$R+this.y,A$j[0])},this._setFilters=function(A$C,A$R,A$j){this.ctx.setFilters(A$j)},A$j?this.ctx=A$j.getContext("2d"):(A$j=A$SC.create("3D"),this.ctx=A$E.createWebGLContext2D(A$j),A$j._setContext(this.ctx)),A$j.size(A$C,A$R),this.canvas=A$j}A$e(A$o,"laya.renders.RenderContext");var A$C=A$o.prototype;return A$C.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},A$C.drawTexture=function(A$C,A$R,A$j,A$w,A$T){A$C.loaded&&this.ctx.drawTexture(A$C,A$R,A$j,A$w,A$T,this.x,this.y)},A$C._drawTextures=function(A$C,A$R,A$j){A$j[0].loaded&&this.ctx.drawTextures(A$j[0],A$j[1],A$C+this.x,A$R+this.y)},A$C.drawTextureWithTransform=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$C.loaded&&this.ctx.drawTextureWithTransform(A$C,A$R,A$j,A$w,A$T,A$G,this.x,this.y,A$o)},A$C.fillQuadrangle=function(A$C,A$R,A$j,A$w,A$T){this.ctx.fillQuadrangle(A$C,A$R,A$j,A$w,A$T)},A$C.drawCanvas=function(A$C,A$R,A$j,A$w,A$T){this.ctx.drawCanvas(A$C,A$R+this.x,A$j+this.y,A$w,A$T)},A$C.drawRect=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=1);var A$o=this.ctx;A$o.strokeStyle=A$T,A$o.lineWidth=A$G,A$o.strokeRect(A$C+this.x,A$R+this.y,A$j,A$w,A$G)},A$C._fillAndStroke=function(A$C,A$R,A$j,A$w){void 0===A$w&&(A$w=!1);var A$T=this.ctx;null!=A$C&&(A$T.fillStyle=A$C,A$a.isWebGL?A$T.fill(A$w):A$T.fill()),null!=A$R&&0<A$j&&(A$T.strokeStyle=A$R,A$T.lineWidth=A$j,A$T.stroke())},A$C.clipRect=function(A$C,A$R,A$j,A$w){this.ctx.clipRect(A$C+this.x,A$R+this.y,A$j,A$w)},A$C.fillRect=function(A$C,A$R,A$j,A$w,A$T){this.ctx.fillRect(A$C+this.x,A$R+this.y,A$j,A$w,A$T)},A$C.drawCircle=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=1),A$c.drawCall++;var A$G=this.ctx;A$G.beginPath(),A$G.strokeStyle=A$w,A$G.lineWidth=A$T,A$G.arc(A$C+this.x,A$R+this.y,A$j,0,A$o.PI2),A$G.stroke()},A$C.drawTriangles=function(A$C,A$R,A$j){if(A$a.isWebGL)this.ctx.drawTriangles(A$j[0],A$C+A$j[1],A$R+A$j[2],A$j[3],A$j[4],A$j[5],A$j[6],A$j[7],A$j[8],A$j[9]);else{var A$w=A$j[5],A$T=0,A$G=A$w.length,A$o=this.ctx;for(A$T=0;A$T<A$G;A$T+=3){var A$U=2*A$w[A$T],A$t=2*A$w[A$T+1],A$I=2*A$w[A$T+2];A$o.drawTriangle(A$j[0],A$j[3],A$j[4],A$U,A$t,A$I,A$j[6],!0)}}},A$C.fillCircle=function(A$C,A$R,A$j,A$w){A$c.drawCall++;var A$T=this.ctx;A$T.beginPath(),A$T.fillStyle=A$w,A$T.arc(A$C+this.x,A$R+this.y,A$j,0,A$o.PI2),A$T.fill()},A$C.setShader=function(A$C){this.ctx.setShader(A$C)},A$C.drawLine=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=1);var A$o=this.ctx;A$o.beginPath(),A$o.strokeStyle=A$T,A$o.lineWidth=A$G,A$o.moveTo(this.x+A$C,this.y+A$R),A$o.lineTo(this.x+A$j,this.y+A$w),A$o.stroke()},A$C.clear=function(){this.ctx.clear()},A$C.transformByMatrix=function(A$C){this.ctx.transformByMatrix(A$C)},A$C.setTransform=function(A$C,A$R,A$j,A$w,A$T,A$G){this.ctx.setTransform(A$C,A$R,A$j,A$w,A$T,A$G)},A$C.setTransformByMatrix=function(A$C){this.ctx.setTransformByMatrix(A$C)},A$C.save=function(){this.ctx.save()},A$C.restore=function(){this.ctx.restore()},A$C.translate=function(A$C,A$R){this.ctx.translate(A$C,A$R)},A$C.transform=function(A$C,A$R,A$j,A$w,A$T,A$G){this.ctx.transform(A$C,A$R,A$j,A$w,A$T,A$G)},A$C.rotate=function(A$C){this.ctx.rotate(A$C)},A$C.scale=function(A$C,A$R){this.ctx.scale(A$C,A$R)},A$C.alpha=function(A$C){this.ctx.globalAlpha*=A$C},A$C.setAlpha=function(A$C){this.ctx.globalAlpha=A$C},A$C.fillWords=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$G&&(A$G=0),this.ctx.fillWords(A$C,A$R,A$j,A$w,A$T,A$G)},A$C.fillBorderWords=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this.ctx.fillBorderWords(A$C,A$R,A$j,A$w,A$T,A$G,A$o)},A$C.fillText=function(A$C,A$R,A$j,A$w,A$T,A$G){this.ctx.fillText(A$C,A$R+this.x,A$j+this.y,A$w,A$T,A$G)},A$C.strokeText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this.ctx.strokeText(A$C,A$R+this.x,A$j+this.y,A$w,A$T,A$G,A$o)},A$C.blendMode=function(A$C){this.ctx.globalCompositeOperation=A$C},A$C.flush=function(){this.ctx.flush&&this.ctx.flush()},A$C.addRenderObject=function(A$C){this.ctx.addRenderObject(A$C)},A$C.beginClip=function(A$C,A$R,A$j,A$w){this.ctx.beginClip&&this.ctx.beginClip(A$C,A$R,A$j,A$w)},A$C.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},A$C.fillTrangles=function(A$C,A$R,A$j){this.ctx.fillTrangles(A$j[0],A$j[1],A$j[2],A$j[3],4<A$j.length?A$j[4]:null)},A$o.PI2=2*Math.PI,A$o}(),A$y=function(){function A$o(A$C,A$R){switch(this._next=A$R||A$o.NORENDER,A$C){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=A$Q._filter);case 69905:return void(this._fun=A$o._initRenderFun)}this.onCreate(A$C)}A$e(A$o,"laya.renders.RenderSprite");var A$C=A$o.prototype;return A$C.onCreate=function(A$C){},A$C._style=function(A$C,A$R,A$j,A$w){A$C._style.render(A$C,A$R,A$j,A$w);var A$T=this._next;A$T._fun.call(A$T,A$C,A$R,A$j,A$w)},A$C._no=function(A$C,A$R,A$j,A$w){},A$C._custom=function(A$C,A$R,A$j,A$w){A$C.customRender(A$R,A$j,A$w);var A$T=A$C._style._tf;this._next._fun.call(this._next,A$C,A$R,A$j-A$T.translateX,A$w-A$T.translateY)},A$C._clip=function(A$C,A$R,A$j,A$w){var A$T=this._next;if(A$T!=A$o.NORENDER){var A$G=A$C._style.scrollRect;A$R.ctx.save(),A$R.ctx.clipRect(A$j,A$w,A$G.width,A$G.height),A$T._fun.call(A$T,A$C,A$R,A$j-A$G.x,A$w-A$G.y),A$R.ctx.restore()}},A$C._blend=function(A$C,A$R,A$j,A$w){var A$T=A$C._style;A$T.blendMode&&(A$R.ctx.globalCompositeOperation=A$T.blendMode);var A$G=this._next;A$G._fun.call(A$G,A$C,A$R,A$j,A$w),A$R.ctx.globalCompositeOperation="source-over"},A$C._mask=function(A$C,A$R,A$j,A$w){var A$T=this._next;A$T._fun.call(A$T,A$C,A$R,A$j,A$w);var A$G=A$C.mask;A$G&&(A$R.ctx.globalCompositeOperation="destination-in",(0<A$G.numChildren||!A$G.graphics._isOnlyOne())&&(A$G.cacheAsBitmap=!0),A$G.render(A$R,A$j-A$C.pivotX,A$w-A$C.pivotY)),A$R.ctx.globalCompositeOperation="source-over"},A$C._graphics=function(A$C,A$R,A$j,A$w){var A$T=A$C._style._tf;A$C._graphics&&A$C._graphics._render(A$C,A$R,A$j-A$T.translateX,A$w-A$T.translateY);var A$G=this._next;A$G._fun.call(A$G,A$C,A$R,A$j,A$w)},A$C._image=function(A$C,A$R,A$j,A$w){var A$T=A$C._style;A$R.ctx.drawTexture2(A$j,A$w,A$T._tf.translateX,A$T._tf.translateY,A$C.transform,A$T.alpha,A$T.blendMode,A$C._graphics._one)},A$C._image2=function(A$C,A$R,A$j,A$w){var A$T=A$C._style._tf;A$R.ctx.drawTexture2(A$j,A$w,A$T.translateX,A$T.translateY,A$C.transform,1,null,A$C._graphics._one)},A$C._alpha=function(A$C,A$R,A$j,A$w){var A$T;if(.01<(A$T=A$C._style.alpha)||A$C._needRepaint()){var A$G=A$R.ctx.globalAlpha;A$R.ctx.globalAlpha*=A$T;var A$o=this._next;A$o._fun.call(A$o,A$C,A$R,A$j,A$w),A$R.ctx.globalAlpha=A$G}},A$C._transform=function(A$C,A$R,A$j,A$w){var A$T=A$C.transform,A$G=this._next;A$T&&A$G!=A$o.NORENDER?(A$R.save(),A$R.transform(A$T.a,A$T.b,A$T.c,A$T.d,A$T.tx+A$j,A$T.ty+A$w),A$G._fun.call(A$G,A$C,A$R,0,0),A$R.restore()):A$G._fun.call(A$G,A$C,A$R,A$j,A$w)},A$C._childs=function(A$C,A$R,A$j,A$w){var A$T=A$C._style,A$G=A$T._tf;if(A$j=A$j-A$G.translateX+A$T.paddingLeft,A$w=A$w-A$G.translateY+A$T.paddingTop,A$T._calculation){var A$o=A$C._getWords();if(A$o){var A$U=A$T;A$U&&(A$U.stroke?A$R.fillBorderWords(A$o,A$j,A$w,A$U.font,A$U.color,A$U.strokeColor,A$U.stroke):A$R.fillWords(A$o,A$j,A$w,A$U.font,A$U.color,"none"!=A$U.textDecoration&&A$U.underLine?1:0))}}var A$t,A$I=A$C._childs,A$e=A$I.length;if(A$C.viewport||A$C.optimizeScrollRect&&A$C._style.scrollRect){var A$H=A$C.viewport||A$C._style.scrollRect,A$M=A$H.x,A$K=A$H.y,A$F=A$H.right,A$L=A$H.bottom,A$D=NaN,A$Q=NaN;for(A$Z=0;A$Z<A$e;++A$Z)(A$t=A$I[A$Z]).visible&&(A$D=A$t._x)<A$F&&A$D+A$t.width>A$M&&(A$Q=A$t._y)<A$L&&A$Q+A$t.height>A$K&&A$t.render(A$R,A$j,A$w)}else for(var A$Z=0;A$Z<A$e;++A$Z)(A$t=A$I[A$Z])._style.visible&&A$t.render(A$R,A$j,A$w)},A$C._canvas=function(A$C,A$R,A$j,A$w){var A$T=A$C._$P.cacheCanvas;if(A$T){"bitmap"===A$T.type?A$c.canvasBitmap++:A$c.canvasNormal++;var A$G=A$T.ctx;if(A$C._needRepaint()||!A$G)this._canvas_repaint(A$C,A$R,A$j,A$w);else{var A$o=A$T._cacheRec;A$R.drawCanvas(A$G.canvas,A$j+A$o.x,A$w+A$o.y,A$o.width,A$o.height)}}else this._next._fun.call(this._next,A$C,A$R,A$j,A$w)},A$C._canvas_repaint=function(A$C,A$R,A$j,A$w){var A$T=A$C._$P.cacheCanvas,A$G=this._next;if(A$T){var A$o,A$U,A$t,A$I,A$e=A$T.ctx,A$H=A$C._needRepaint()||!A$e,A$M=A$T.type;if("bitmap"===A$M?A$c.canvasBitmap++:A$c.canvasNormal++,A$H){var A$K,A$F;A$T._cacheRec||(A$T._cacheRec=new A$W),A$a.isWebGL&&"bitmap"!==A$M?A$T._cacheRec.setTo(-A$C.pivotX,-A$C.pivotY,1,1):((A$I=A$C.getSelfBounds()).x=A$I.x-A$C.pivotX,A$I.y=A$I.y-A$C.pivotY,A$I.x=A$I.x-16,A$I.y=A$I.y-16,A$I.width=A$I.width+32,A$I.height=A$I.height+32,A$I.x=Math.floor(A$I.x+A$j)-A$j,A$I.y=Math.floor(A$I.y+A$w)-A$w,A$I.width=Math.floor(A$I.width),A$I.height=Math.floor(A$I.height),A$T._cacheRec.copyFrom(A$I)),A$I=A$T._cacheRec;var A$L,A$D=A$a.isWebGL?1:A$V.pixelRatio*A$h.stage.clientScaleX,A$Q=A$a.isWebGL?1:A$V.pixelRatio*A$h.stage.clientScaleY;if(!A$a.isWebGL){var A$Z,A$S=1,A$b=1;for(A$Z=A$C;A$Z&&A$Z!=A$h.stage;)A$S*=A$Z.scaleX,A$b*=A$Z.scaleY,A$Z=A$Z.parent;A$a.isWebGL?(A$S<1&&(A$D*=A$S),A$b<1&&(A$Q*=A$b)):(1<A$S&&(A$D*=A$S),1<A$b&&(A$Q*=A$b))}if(A$C.scrollRect){var A$f=A$C.scrollRect;A$I.x-=A$f.x,A$I.y-=A$f.y}if(A$K=A$I.width*A$D,A$F=A$I.height*A$Q,A$U=A$I.x,A$t=A$I.y,A$a.isWebGL&&"bitmap"===A$M&&(2048<A$K||2048<A$F))return console.warn("cache bitmap size larger than 2048,cache ignored"),A$T.ctx&&(A$s.recover("RenderContext",A$T.ctx),A$T.ctx.canvas.size(0,0),A$T.ctx=null),void A$G._fun.call(A$G,A$C,A$R,A$j,A$w);if(A$e||(A$e=A$T.ctx=A$s.getItem("RenderContext")||new A$n(A$K,A$F,A$SC.create("AUTO"))),A$e.ctx.sprite=A$C,(A$o=A$e.canvas).clear(),(A$o.width!=A$K||A$o.height!=A$F)&&A$o.size(A$K,A$F),"bitmap"===A$M?A$o.context.asBitmap=!0:"normal"===A$M&&(A$o.context.asBitmap=!1),1!=A$D||1!=A$Q){var A$p=A$e.ctx;A$p.save(),A$p.scale(A$D,A$Q),!A$a.isConchWebGL&&A$a.isConchApp&&(A$L=A$C._$P.cf)&&A$p.setFilterMatrix&&A$p.setFilterMatrix(A$L._mat,A$L._alpha),A$G._fun.call(A$G,A$C,A$e,-A$U,-A$t),A$p.restore(),A$a.isConchApp&&!A$a.isConchWebGL||A$C._applyFilters()}else A$p=A$e.ctx,!A$a.isConchWebGL&&A$a.isConchApp&&(A$L=A$C._$P.cf)&&A$p.setFilterMatrix&&A$p.setFilterMatrix(A$L._mat,A$L._alpha),A$G._fun.call(A$G,A$C,A$e,-A$U,-A$t),A$a.isConchApp&&!A$a.isConchWebGL||A$C._applyFilters();A$C._$P.staticCache&&(A$T.reCache=!1),A$c.canvasReCache++}else A$U=(A$I=A$T._cacheRec).x,A$t=A$I.y,A$o=A$e.canvas;A$R.drawCanvas(A$o,A$j+A$U,A$w+A$t,A$I.width,A$I.height)}else A$G._fun.call(A$G,A$C,A$e,A$j,A$w)},A$o.__init__=function(){var A$C,A$R,A$j=0;for(A$R=A$E.createRenderSprite(69905,null),A$C=A$o.renders.length=4096,A$j=0;A$j<A$C;A$j++)A$o.renders[A$j]=A$R;A$o.renders[0]=A$E.createRenderSprite(0,null),function(A$C,A$R){for(var A$j=0,A$w=0;A$w<A$C.length;A$w++)A$j|=A$C[A$w],A$o.renders[A$j]=A$R}([1,512,4,2],new A$o(1,null)),A$o.renders[513]=A$E.createRenderSprite(513,null),A$o.renders[517]=new A$o(517,null)},A$o._initRenderFun=function(A$C,A$R,A$j,A$w){var A$T=A$C._renderType;(A$o.renders[A$T]=A$o._getTypeRender(A$T))._fun(A$C,A$R,A$j,A$w)},A$o._getTypeRender=function(A$C){for(var A$R=null,A$j=2048;1<A$j;)A$j&A$C&&(A$R=A$E.createRenderSprite(A$j,A$R)),A$j>>=1;return A$R},A$o.IMAGE=1,A$o.ALPHA=2,A$o.TRANSFORM=4,A$o.BLEND=8,A$o.CANVAS=16,A$o.FILTERS=32,A$o.MASK=64,A$o.CLIP=128,A$o.STYLE=256,A$o.GRAPHICS=512,A$o.CUSTOM=1024,A$o.CHILDS=2048,A$o.INIT=69905,A$o.renders=[],A$o.NORENDER=new A$o(0,null),A$o}(),A$m=function(){function A$U(){this._repaint=!1}A$e(A$U,"laya.resource.Context");var A$C=A$U.prototype;return A$C.replaceReset=function(){var A$C,A$R,A$j=0;for(A$C=A$U.replaceKeys.length,A$j=0;A$j<A$C;A$j++)A$R=A$U.replaceKeys[A$j],this[A$U.newKeys[A$j]]=this[A$R]},A$C.replaceResotre=function(){this.__restore(),this.__reset()},A$C.setIsMainContext=function(){},A$C.drawTextures=function(A$C,A$R,A$j,A$w){A$c.drawCall+=A$R.length/2;for(var A$T=A$C.width,A$G=A$C.height,A$o=0,A$U=A$R.length;A$o<A$U;A$o+=2)this.drawTexture(A$C,A$R[A$o],A$R[A$o+1],A$T,A$G,A$j,A$w)},A$C.drawCanvas=function(A$C,A$R,A$j,A$w,A$T){A$c.drawCall++,this.drawImage(A$C.source,A$R,A$j,A$w,A$T)},A$C.fillRect=function(A$C,A$R,A$j,A$w,A$T){A$c.drawCall++,A$T&&(this.fillStyle=A$T),this.__fillRect(A$C,A$R,A$j,A$w)},A$C.fillText=function(A$C,A$R,A$j,A$w,A$T,A$G){A$c.drawCall++,3<arguments.length&&null!=A$w&&(this.font=A$w,this.fillStyle=A$T,this.textAlign=A$G,this.textBaseline="top"),this.__fillText(A$C,A$R,A$j)},A$C.fillBorderText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){A$c.drawCall++,this.font=A$w,this.fillStyle=A$T,this.textBaseline="top",this.strokeStyle=A$G,this.lineWidth=A$o,this.textAlign=A$U,this.__strokeText(A$C,A$R,A$j),this.__fillText(A$C,A$R,A$j)},A$C.strokeText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$c.drawCall++,3<arguments.length&&null!=A$w&&(this.font=A$w,this.strokeStyle=A$T,this.lineWidth=A$G,this.textAlign=A$o,this.textBaseline="top"),this.__strokeText(A$C,A$R,A$j)},A$C.transformByMatrix=function(A$C){this.transform(A$C.a,A$C.b,A$C.c,A$C.d,A$C.tx,A$C.ty)},A$C.setTransformByMatrix=function(A$C){this.setTransform(A$C.a,A$C.b,A$C.c,A$C.d,A$C.tx,A$C.ty)},A$C.clipRect=function(A$C,A$R,A$j,A$w){A$c.drawCall++,this.beginPath(),this.rect(A$C,A$R,A$j,A$w),this.clip()},A$C.drawTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$c.drawCall++;var A$U=A$C.uv,A$t=A$C.bitmap.width,A$I=A$C.bitmap.height;this.drawImage(A$C.source,A$U[0]*A$t,A$U[1]*A$I,(A$U[2]-A$U[0])*A$t,(A$U[5]-A$U[3])*A$I,A$R+A$G,A$j+A$o,A$w,A$T)},A$C.drawTextureWithTransform=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){A$c.drawCall++;var A$I=A$C.uv,A$e=A$C.bitmap.width,A$H=A$C.bitmap.height;this.save(),1!=A$t&&(this.globalAlpha*=A$t),A$G?(this.transform(A$G.a,A$G.b,A$G.c,A$G.d,A$G.tx+A$o,A$G.ty+A$U),this.drawImage(A$C.source,A$I[0]*A$e,A$I[1]*A$H,(A$I[2]-A$I[0])*A$e,(A$I[5]-A$I[3])*A$H,A$R,A$j,A$w,A$T)):this.drawImage(A$C.source,A$I[0]*A$e,A$I[1]*A$H,(A$I[2]-A$I[0])*A$e,(A$I[5]-A$I[3])*A$H,A$R+A$o,A$j+A$U,A$w,A$T),this.restore()},A$C.drawTexture2=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=A$U[0];if(A$t.loaded&&A$t.bitmap&&A$t.source){A$c.drawCall++;var A$I=1!==A$G;if(A$I){var A$e=this.globalAlpha;this.globalAlpha*=A$G}var A$H=A$t.uv,A$M=A$t.bitmap.width,A$K=A$t.bitmap.height;A$T?(this.save(),this.transform(A$T.a,A$T.b,A$T.c,A$T.d,A$T.tx+A$C,A$T.ty+A$R),this.drawImage(A$t.source,A$H[0]*A$M,A$H[1]*A$K,(A$H[2]-A$H[0])*A$M,(A$H[5]-A$H[3])*A$K,A$U[1]-A$j,A$U[2]-A$w,A$U[3],A$U[4]),this.restore()):this.drawImage(A$t.source,A$H[0]*A$M,A$H[1]*A$K,(A$H[2]-A$H[0])*A$M,(A$H[5]-A$H[3])*A$K,A$U[1]-A$j+A$C,A$U[2]-A$w+A$R,A$U[3],A$U[4]),A$I&&(this.globalAlpha=A$e)}},A$C.fillTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){if(!A$U.pat){if(A$C.uv!=A$eC.DEF_UV){var A$t=new A$SC("2D");A$t.getContext("2d"),A$t.size(A$C.width,A$C.height),A$t.context.drawTexture(A$C,0,0,A$C.width,A$C.height,0,0),A$C=new A$eC(A$t)}A$U.pat=this.createPattern(A$C.bitmap.source,A$G)}var A$I=A$R,A$e=A$j,A$H=0,A$M=0;A$o&&(A$I+=A$o.x%A$C.width,A$e+=A$o.y%A$C.height,A$H-=A$o.x%A$C.width,A$M-=A$o.y%A$C.height),this.translate(A$I,A$e),this.fillRect(A$H,A$M,A$w,A$T,A$U.pat),this.translate(-A$I,-A$e)},A$C.drawTriangle=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=A$C.bitmap,A$I=A$t.source,A$e=A$C.width,A$H=A$C.height,A$M=A$t.width,A$K=A$t.height,A$F=A$j[A$w]*A$M,A$L=A$j[A$T]*A$M,A$D=A$j[A$G]*A$M,A$Q=A$j[A$w+1]*A$K,A$Z=A$j[A$T+1]*A$K,A$S=A$j[A$G+1]*A$K,A$b=A$R[A$w],A$f=A$R[A$T],A$p=A$R[A$G],A$h=A$R[A$w+1],A$x=A$R[A$T+1],A$W=A$R[A$G+1];if(A$U){var A$$=(A$b+A$f+A$p)/3,A$A=(A$h+A$x+A$W)/3,A$r=A$b-A$$,A$E=A$h-A$A,A$P=Math.sqrt(A$r*A$r+A$E*A$E);A$b=A$$+A$r/A$P*(A$P+1),A$h=A$A+A$E/A$P*(A$P+1),A$E=A$x-A$A,A$f=A$$+(A$r=A$f-A$$)/(A$P=Math.sqrt(A$r*A$r+A$E*A$E))*(A$P+1),A$x=A$A+A$E/A$P*(A$P+1),A$E=A$W-A$A,A$p=A$$+(A$r=A$p-A$$)/(A$P=Math.sqrt(A$r*A$r+A$E*A$E))*(A$P+1),A$W=A$A+A$E/A$P*(A$P+1)}this.save(),A$o&&this.transform(A$o.a,A$o.b,A$o.c,A$o.d,A$o.tx,A$o.ty),this.beginPath(),this.moveTo(A$b,A$h),this.lineTo(A$f,A$x),this.lineTo(A$p,A$W),this.closePath(),this.clip();var A$J=1/(A$F*A$Z+A$Q*A$D+A$L*A$S-A$Z*A$D-A$Q*A$L-A$F*A$S),A$N=A$b*A$Z+A$Q*A$p+A$f*A$S-A$Z*A$p-A$Q*A$f-A$b*A$S,A$a=A$F*A$f+A$b*A$D+A$L*A$p-A$f*A$D-A$b*A$L-A$F*A$p,A$n=A$F*A$Z*A$p+A$Q*A$f*A$D+A$b*A$L*A$S-A$b*A$Z*A$D-A$Q*A$L*A$p-A$F*A$f*A$S,A$y=A$h*A$Z+A$Q*A$W+A$x*A$S-A$Z*A$W-A$Q*A$x-A$h*A$S,A$m=A$F*A$x+A$h*A$D+A$L*A$W-A$x*A$D-A$h*A$L-A$F*A$W,A$k=A$F*A$Z*A$W+A$Q*A$x*A$D+A$h*A$L*A$S-A$h*A$Z*A$D-A$Q*A$L*A$W-A$F*A$x*A$S;this.transform(A$N*A$J,A$y*A$J,A$a*A$J,A$m*A$J,A$n*A$J,A$k*A$J),this.drawImage(A$I,A$C.uv[0]*A$M,A$C.uv[1]*A$K,A$e,A$H,A$C.uv[0]*A$M,A$C.uv[1]*A$K,A$e,A$H),this.restore()},A$C.flush=function(){return 0},A$C.fillWords=function(A$C,A$R,A$j,A$w,A$T,A$G){A$w&&(this.font=A$w),A$T&&(this.fillStyle=A$T);this.textBaseline="top",this.textAlign="left";for(var A$o=0,A$U=A$C.length;A$o<A$U;A$o++){var A$t=A$C[A$o];if(this.__fillText(A$t.char,A$t.x+A$R,A$t.y+A$j),1===A$G){var A$I=A$t.height,A$e=.5*A$t.style.letterSpacing;A$e||(A$e=0),this.beginPath(),this.strokeStyle=A$T,this.lineWidth=1,this.moveTo(A$R+A$t.x-A$e+.5,A$j+A$t.y+A$I+.5),this.lineTo(A$R+A$t.x+A$t.width+A$e+.5,A$j+A$t.y+A$I+.5),this.stroke()}}},A$C.fillBorderWords=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$w&&(this.font=A$w),A$T&&(this.fillStyle=A$T),this.textBaseline="top",this.lineWidth=A$o,this.textAlign="left",this.strokeStyle=A$G;for(var A$U=0,A$t=A$C.length;A$U<A$t;A$U++){var A$I=A$C[A$U];this.__strokeText(A$I.char,A$I.x+A$R,A$I.y+A$j),this.__fillText(A$I.char,A$I.x+A$R,A$I.y+A$j)}},A$C.destroy=function(){this.canvas.width=this.canvas.height=0},A$C.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},A$C.drawCurves=function(A$C,A$R,A$j){this.beginPath(),this.strokeStyle=A$j[3],this.lineWidth=A$j[4];var A$w=A$j[2];A$C+=A$j[0],A$R+=A$j[1],this.moveTo(A$C+A$w[0],A$R+A$w[1]);for(var A$T=2,A$G=A$w.length;A$T<A$G;)this.quadraticCurveTo(A$C+A$w[A$T++],A$R+A$w[A$T++],A$C+A$w[A$T++],A$R+A$w[A$T++]);this.stroke()},A$U.__init__=function(A$R){var A$j=laya.resource.Context.prototype;if(!(A$R=A$R||CanvasRenderingContext2D.prototype).inited){A$R.inited=!0,A$R.__fillText=A$R.fillText,A$R.__fillRect=A$R.fillRect,A$R.__strokeText=A$R.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(A$C){A$R[A$C]=A$j[A$C]})}},A$U.replaceCanvasGetSet=function(A$C,A$R){var A$j=Object.getOwnPropertyDescriptor(A$C,A$R);if(!A$j||!A$j.configurable)return!1;var A$w,A$T={};for(A$w in A$j)"set"!=A$w&&(A$T[A$w]=A$j[A$w]);var A$G=A$j.set;return A$T.set=function(A$C){A$G.call(this,A$C);var A$R=this.getContext("2d");A$R&&"__reset"in A$R&&A$R.__reset()},Object.defineProperty(A$C,A$R,A$T),!0},A$U.replaceGetSet=function(A$C,A$R){var A$j=Object.getOwnPropertyDescriptor(A$C,A$R);if(!A$j||!A$j.configurable)return!1;var A$w,A$T={};for(A$w in A$j)"set"!=A$w&&(A$T[A$w]=A$j[A$w]);var A$G=A$j.set,A$o="___"+A$R+"__";return A$U.newKeys.push(A$o),A$T.set=function(A$C){A$C!=this[A$o]&&(this[A$o]=A$C,A$G.call(this,A$C))},Object.defineProperty(A$C,A$R,A$T),!0},A$U._default=new A$U,A$U.newKeys=[],A$t(A$U,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),A$U}(),A$k=function(){function A$G(A$C){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++A$G._uniqueIDCounter,this._name=A$C||"Content Manager",A$G._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,A$G._resourceManagers.push(this),this._resources=[],this._records={}}A$e(A$G,"laya.resource.ResourceManager");var A$C=A$G.prototype;return A$h.imps(A$C,{"laya.resource.IDispose":!0}),A$C.getResourceByIndex=function(A$C){return this._resources[A$C]},A$C.getResourcesLength=function(){return this._resources.length},A$C.addResource=function(A$C){return A$C.resourceManager&&A$C.resourceManager.removeResource(A$C),-1===this._resources.indexOf(A$C)&&((A$C._resourceManager=this)._resources.push(A$C),this.addRecord(A$C.uri,A$C.__className,A$C.memorySize),this.addSize(A$C.memorySize),!0)},A$C.removeResource=function(A$C){var A$R=this._resources.indexOf(A$C);return-1!==A$R&&(this._resources.splice(A$R,1),A$C._resourceManager=null,this._memorySize-=A$C.memorySize,this.addRecord(A$C.uri,A$C.__className,-A$C.memorySize),!0)},A$C.unload=function(){for(var A$C=this._resources.slice(0,this._resources.length),A$R=0;A$R<A$C.length;A$R++){A$C[A$R].destroy()}A$C.length=0},A$C.dispose=function(){if(this===A$G._systemResourceManager)throw new Error("systemResourceManager不能被释放！");A$G._resourceManagers.splice(A$G._resourceManagers.indexOf(this),1),A$G._isResourceManagersSorted=!1;for(var A$C=this._resources.slice(0,this._resources.length),A$R=0;A$R<A$C.length;A$R++){var A$j=A$C[A$R];A$j.resourceManager.removeResource(A$j),A$j.destroy()}A$C.length=0},A$C.addSize=function(A$C){A$C&&(this.autoRelease&&0<A$C&&this._memorySize+A$C>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=A$C)},A$C.addRecord=function(A$C,A$R,A$j){DEBUG&&A$j&&!A$C&&console.error(A$C,A$R,A$j),A$C&&(this._records.hasOwnProperty(A$R+"|"+A$C)||(this._records[A$R+"|"+A$C]=0),this._records[A$R+"|"+A$C]+=A$j,DEBUG&&this._records[A$R+"|"+A$C]<0&&console.error(A$C,A$R,this._records[A$R+"|"+A$C]))},A$C.garbageCollection=function(A$C){var A$R=this._resources;(A$R=A$R.slice()).sort(function(A$C,A$R){if(!A$C||!A$R)throw new Error("a或b不能为空！");return A$C.released&&A$R.released?0:A$C.released?1:A$R.released?-1:A$C._lastUseFrameCount-A$R._lastUseFrameCount});for(var A$j=A$c.loopCount,A$w=0,A$T=A$R.length;A$w<A$T;A$w++){var A$G=A$R[A$w];if(!(1<A$j-A$G._lastUseFrameCount))return void(this._memorySize>=A$C&&(this._isOverflow=!0));if(A$G.releaseResource(),this._memorySize<A$C)return void(this._isOverflow=!1)}},A$F(0,A$C,"id",function(){return this._id}),A$F(0,A$C,"name",function(){return this._name},function(A$C){!A$C&&""===A$C||this._name===A$C||(this._name=A$C,A$G._isResourceManagersSorted=!1)}),A$F(0,A$C,"memorySize",function(){return this._memorySize}),A$F(0,A$C,"records",function(){return this._records}),A$F(1,A$G,"systemResourceManager",function(){return A$G._systemResourceManager}),A$G.__init__=function(){A$G.currentResourceManager=A$G.systemResourceManager},A$G.getLoadedResourceManagerByIndex=function(A$C){return A$G._resourceManagers[A$C]},A$G.getLoadedResourceManagersCount=function(){return A$G._resourceManagers.length},A$G.recreateContentManagers=function(A$C){void 0===A$C&&(A$C=!1);for(var A$R=A$G.currentResourceManager,A$j=0;A$j<A$G._resourceManagers.length;A$j++){A$G.currentResourceManager=A$G._resourceManagers[A$j];for(var A$w=0;A$w<A$G.currentResourceManager._resources.length;A$w++)A$G.currentResourceManager._resources[A$w].releaseResource(A$C),A$G.currentResourceManager._resources[A$w].activeResource(A$C)}A$G.currentResourceManager=A$R},A$G.releaseContentManagers=function(A$C){void 0===A$C&&(A$C=!1);for(var A$R=A$G.currentResourceManager,A$j=0;A$j<A$G._resourceManagers.length;A$j++){A$G.currentResourceManager=A$G._resourceManagers[A$j];for(var A$w=0;A$w<A$G.currentResourceManager._resources.length;A$w++){var A$T=A$G.currentResourceManager._resources[A$w];!A$T.released&&A$T.releaseResource(A$C)}}A$G.currentResourceManager=A$R},A$G._uniqueIDCounter=0,A$G._isResourceManagersSorted=!1,A$G._resourceManagers=[],A$t(A$G,["_systemResourceManager",function(){return this._systemResourceManager=new A$G("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=A$G._systemResourceManager}]),A$G}(),A$V=(function(){function A$C(){}A$e(A$C,"laya.system.System"),A$C.changeDefinition=function(A$C,A$R){A$h[A$C]=A$R;var A$j=A$C+"=classObj";A$h._runScript(A$j)},A$C.__init__=function(){A$a.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function A$j(){}return A$e(A$j,"laya.utils.Browser"),A$F(1,A$j,"pixelRatio",function(){return A$j.__init__(),-1<A$j.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:A$E.getPixelRatio()}),A$F(1,A$j,"height",function(){return A$j.__init__(),(A$h.stage&&A$h.stage.canvasRotation?A$j.clientWidth:A$j.clientHeight)*A$j.pixelRatio}),A$F(1,A$j,"clientWidth",function(){return A$j.__init__(),A$j.window.innerWidth||A$j.document.body.clientWidth}),A$F(1,A$j,"window",function(){return A$j.__init__(),A$j._window}),A$F(1,A$j,"clientHeight",function(){return A$j.__init__(),A$j.window.innerHeight||A$j.document.body.clientHeight||A$j.document.documentElement.clientHeight}),A$F(1,A$j,"width",function(){return A$j.__init__(),(A$h.stage&&A$h.stage.canvasRotation?A$j.clientHeight:A$j.clientWidth)*A$j.pixelRatio}),A$F(1,A$j,"container",function(){return A$j.__init__(),A$j._container||((A$j._container=A$j.createElement("div")).id="layaContainer",A$j.document.body.appendChild(A$j._container)),A$j._container},function(A$C){A$j._container=A$C}),A$F(1,A$j,"document",function(){return A$j.__init__(),A$j._document}),A$j.__init__=function(){if(!A$j._window){A$j._window=A$E.getWindow(),A$j._document=A$j.window.document,A$j._window.addEventListener("message",function(A$C){laya.utils.Browser._onMessage(A$C)},!1),A$j.document.__createElement=A$j.document.createElement,A$o.requestAnimationFrame=A$o.requestAnimationFrame||A$o.webkitRequestAnimationFrame||A$o.mozRequestAnimationFrame||A$o.oRequestAnimationFrame||A$o.msRequestAnimationFrame||function(A$C){return A$o.setTimeout(A$C,1e3/60)};var A$C=A$o.document.body.style;A$C["-webkit-user-select"]="none",A$C["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",A$j.userAgent=A$j.window.navigator.userAgent,A$j.onIOS=!!(A$j.u=A$j.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),A$j.onMobile=-1<A$j.u.indexOf("Mobile"),A$j.onIPhone=-1<A$j.u.indexOf("iPhone"),A$j.onMac=-1<A$j.u.indexOf("Mac OS X"),A$j.onIPad=-1<A$j.u.indexOf("iPad"),A$j.onAndroid=-1<A$j.u.indexOf("Android")||-1<A$j.u.indexOf("Adr"),A$j.onWP=-1<A$j.u.indexOf("Windows Phone"),A$j.onQQBrowser=-1<A$j.u.indexOf("QQBrowser"),A$j.onMQQBrowser=-1<A$j.u.indexOf("MQQBrowser")||-1<A$j.u.indexOf("Mobile")&&-1<A$j.u.indexOf("QQ"),A$j.onIE=!!A$j.window.ActiveXObject||"ActiveXObject"in A$j.window,A$j.onWeiXin=-1<A$j.u.indexOf("MicroMessenger"),A$j.onPC=!A$j.onMobile,A$j.onSafari=-1<A$j.u.indexOf("Safari"),A$j.onFirefox=-1<A$j.u.indexOf("Firefox"),A$j.onEdge=-1<A$j.u.indexOf("Edge"),A$j.onMiniGame=-1<A$j.u.indexOf("MiniGame"),A$j.onLimixiu=-1<A$j.u.indexOf("limixiu"),A$j.httpProtocol="http:"==A$j.window.location.protocol,A$j.onMiniGame&&null==A$j.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),A$j.webAudioEnabled=!!(A$j.window.AudioContext||A$j.window.webkitAudioContext||A$j.window.mozAudioContext),A$j.soundType=A$j.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",A$TC=A$j.webAudioEnabled?A$GC:A$jC,A$j.webAudioEnabled&&A$GC.initWebAudio(),A$jC._initMusicAudio(),A$j.enableTouch="ontouchstart"in A$o||A$o.DocumentTouch&&A$R instanceof DocumentTouch,A$o.focus(),A$r._soundClass=A$TC,A$r._musicClass=A$jC,A$a._mainCanvas=A$a._mainCanvas||A$SC.create("2D"),A$j.canvas||(A$j.canvas=A$SC.create("2D"),A$j.context=A$j.canvas.getContext("2d"))}},A$j._onMessage=function(A$C){if(A$C.data&&"size"==A$C.data.name){if(A$j.window.innerWidth=A$C.data.width,A$j.window.innerHeight=A$C.data.height,A$j.window.__innerHeight=A$C.data.clientHeight,!A$j.document.createEvent)return void console.warn("no document.createEvent");var A$R=A$j.document.createEvent("HTMLEvents");return A$R.initEvent("resize",!1,!1),void A$j.window.dispatchEvent(A$R)}},A$j.createElement=function(A$C){return A$j.__init__(),A$j.document.__createElement(A$C)},A$j.getElementById=function(A$C){return A$j.__init__(),A$j.document.getElementById(A$C)},A$j.removeElement=function(A$C){A$C&&A$C.parentNode&&A$C.parentNode.removeChild(A$C)},A$j.now=function(){return A$E.now()},A$j._window=null,A$j._document=null,A$j._container=null,A$j.userAgent=null,A$j.u=null,A$j.onIOS=!1,A$j.onMac=!1,A$j.onMobile=!1,A$j.onIPhone=!1,A$j.onIPad=!1,A$j.onAndroid=!1,A$j.onWP=!1,A$j.onQQBrowser=!1,A$j.onMQQBrowser=!1,A$j.onSafari=!1,A$j.onFirefox=!1,A$j.onEdge=!1,A$j.onIE=!1,A$j.onWeiXin=!1,A$j.onMiniGame=!1,A$j.onLimixiu=!1,A$j.onPC=!1,A$j.httpProtocol=!1,A$j.webAudioEnabled=!1,A$j.soundType=null,A$j.enableTouch=!1,A$j.canvas=null,A$j.context=null,A$j.__init$=function(){},A$j}()),A$z=function(){function A$R(A$C){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,A$C?(this._u8d_=new Uint8Array(A$C),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}A$e(A$R,"laya.utils.Byte");var A$C=A$R.prototype;return A$C.___resizeBuffer=function(A$R){try{var A$C=new Uint8Array(A$R);null!=this._u8d_&&(this._u8d_.length<=A$R?A$C.set(this._u8d_):A$C.set(this._u8d_.subarray(0,A$R))),this._u8d_=A$C,this._d_=new DataView(A$C.buffer)}catch(A$C){throw"___resizeBuffer err:"+A$R}},A$C.getString=function(){return this.rUTF(this.getUint16())},A$C.getFloat32Array=function(A$C,A$R){var A$j=A$C+A$R;A$j=A$j>this._length?this._length:A$j;var A$w=new Float32Array(this._d_.buffer.slice(A$C,A$j));return this._pos_=A$j,A$w},A$C.getUint8Array=function(A$C,A$R){var A$j=A$C+A$R;A$j=A$j>this._length?this._length:A$j;var A$w=new Uint8Array(this._d_.buffer.slice(A$C,A$j));return this._pos_=A$j,A$w},A$C.getInt16Array=function(A$C,A$R){var A$j=A$C+A$R;A$j=A$j>this._length?this._length:A$j;var A$w=new Int16Array(this._d_.buffer.slice(A$C,A$j));return this._pos_=A$j,A$w},A$C.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var A$C=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,A$C},A$C.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var A$C=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,A$C},A$C.writeFloat32=function(A$C){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,A$C,this._xd_),this._pos_+=4},A$C.writeFloat64=function(A$C){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,A$C,this._xd_),this._pos_+=8},A$C.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var A$C=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,A$C},A$C.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var A$C=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,A$C},A$C.writeInt32=function(A$C){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,A$C,this._xd_),this._pos_+=4},A$C.writeUint32=function(A$C){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,A$C,this._xd_),this._pos_+=4},A$C.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var A$C=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,A$C},A$C.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var A$C=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,A$C},A$C.writeUint16=function(A$C){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,A$C,this._xd_),this._pos_+=2},A$C.writeInt16=function(A$C){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,A$C,this._xd_),this._pos_+=2},A$C.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},A$C.writeUint8=function(A$C){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,A$C),this._pos_++},A$C._getUInt8=function(A$C){return this._d_.getUint8(A$C)},A$C._getUint16=function(A$C){return this._d_.getUint16(A$C,this._xd_)},A$C._getMatrix=function(){return new A$P(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},A$C.rUTF=function(A$C){for(var A$R=[],A$j=this._pos_+A$C,A$w=0,A$T=0,A$G=0,A$o=String.fromCharCode,A$U=this._u8d_;this._pos_<A$j;)(A$w=A$U[this._pos_++])<128?0!=A$w&&A$R.push(A$o(A$w)):A$w<224?A$R.push(A$o((63&A$w)<<6|127&A$U[this._pos_++])):A$w<240?(A$T=A$U[this._pos_++],A$R.push(A$o((31&A$w)<<12|(127&A$T)<<6|127&A$U[this._pos_++]))):(A$T=A$U[this._pos_++],A$G=A$U[this._pos_++],A$R.push(A$o((15&A$w)<<18|(127&A$T)<<12|A$G<<6&127|127&A$U[this._pos_++]))),0;return A$R.join("")},A$C.getCustomString=function(A$C){for(var A$R=[],A$j=0,A$w=0,A$T=0,A$G=String.fromCharCode,A$o=this._u8d_;0<A$C;)if((A$w=A$o[this._pos_])<128)A$R.push(A$G(A$w)),this._pos_++,A$C--;else for(A$j=A$w-128,this._pos_++,A$C-=A$j;0<A$j;)A$w=A$o[this._pos_++],A$T=A$o[this._pos_++],A$R.push(A$G(A$T<<8|A$w)),A$j--;return A$R.join("")},A$C.clear=function(){this._pos_=0,this.length=0},A$C.__getBuffer=function(){return this._d_.buffer},A$C.writeUTFBytes=function(A$C){for(var A$R=0,A$j=(A$C+="").length;A$R<A$j;A$R++){var A$w=A$C.charCodeAt(A$R);A$w<=127?this.writeByte(A$w):A$w<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|A$w>>6,128|63&A$w],this._pos_),this._pos_+=2):A$w<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|A$w>>12,128|A$w>>6&63,128|63&A$w],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|A$w>>18,128|A$w>>12&63,128|A$w>>6&63,128|63&A$w],this._pos_),this._pos_+=4)}},A$C.writeUTFString=function(A$C){var A$R=this.pos;this.writeUint16(1),this.writeUTFBytes(A$C);var A$j=this.pos-A$R-2;if(65536<=A$j)throw"writeUTFString byte len more than 65536";this._d_.setUint16(A$R,A$j,this._xd_)},A$C.readUTFString=function(){return this.readUTFBytes(this.getUint16())},A$C.getUTFString=function(){return this.readUTFString()},A$C.readUTFBytes=function(A$C){if(void 0===A$C&&(A$C=-1),0==A$C)return"";var A$R=this.bytesAvailable;if(A$R<A$C)throw"readUTFBytes error - Out of bounds";return A$C=0<A$C?A$C:A$R,this.rUTF(A$C)},A$C.getUTFBytes=function(A$C){return void 0===A$C&&(A$C=-1),this.readUTFBytes(A$C)},A$C.writeByte=function(A$C){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,A$C),this._pos_+=1},A$C.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},A$C.getByte=function(){return this.readByte()},A$C.ensureWrite=function(A$C){this._length<A$C&&(this._length=A$C),this._allocated_<A$C&&(this.length=A$C)},A$C.writeArrayBuffer=function(A$C,A$R,A$j){if(void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),A$R<0||A$j<0)throw"writeArrayBuffer error - Out of bounds";0==A$j&&(A$j=A$C.byteLength-A$R),this.ensureWrite(this._pos_+A$j);var A$w=new Uint8Array(A$C);this._u8d_.set(A$w.subarray(A$R,A$R+A$j),this._pos_),this._pos_+=A$j},A$F(0,A$C,"buffer",function(){var A$C=this._d_.buffer;return A$C.byteLength==this.length?A$C:A$C.slice(0,this.length)}),A$F(0,A$C,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(A$C){this._xd_="littleEndian"==A$C}),A$F(0,A$C,"length",function(){return this._length},function(A$C){this._allocated_<A$C?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(A$C,2*this._allocated_))):this._allocated_>A$C&&this.___resizeBuffer(this._allocated_=A$C),this._length=A$C}),A$F(0,A$C,"pos",function(){return this._pos_},function(A$C){this._pos_=A$C}),A$F(0,A$C,"bytesAvailable",function(){return this._length-this._pos_}),A$R.getSystemEndian=function(){if(!A$R._sysEndian){var A$C=new ArrayBuffer(2);new DataView(A$C).setInt16(0,256,!0),A$R._sysEndian=256===new Int16Array(A$C)[0]?"littleEndian":"bigEndian"}return A$R._sysEndian},A$R.BIG_ENDIAN="bigEndian",A$R.LITTLE_ENDIAN="littleEndian",A$R._sysEndian=null,A$R}(),A$l=function(){function A$T(){}return A$e(A$T,"laya.utils.CacheManager"),A$T.regCacheByFunction=function(A$C,A$R){var A$j;A$T.unRegCacheByFunction(A$C,A$R),A$j={tryDispose:A$C,getCacheList:A$R},A$T._cacheList.push(A$j)},A$T.unRegCacheByFunction=function(A$C,A$R){var A$j,A$w=0;for(A$j=A$T._cacheList.length,A$w=0;A$w<A$j;A$w++)if(A$T._cacheList[A$w].tryDispose==A$C&&A$T._cacheList[A$w].getCacheList==A$R)return void A$T._cacheList.splice(A$w,1)},A$T.forceDispose=function(){var A$C=0,A$R=A$T._cacheList.length;for(A$C=0;A$C<A$R;A$C++)A$T._cacheList[A$C].tryDispose(!0)},A$T.beginCheck=function(A$C){void 0===A$C&&(A$C=15e3),A$h.timer.loop(A$C,null,A$T._checkLoop)},A$T.stopCheck=function(){A$h.timer.clear(null,A$T._checkLoop)},A$T._checkLoop=function(){var A$C=A$T._cacheList;if(!(A$C.length<1)){var A$R,A$j=A$V.now(),A$w=0;for(A$R=A$w=A$C.length;0<A$w&&(A$C[A$T._index=++A$T._index%A$R].tryDispose(!1),!(A$V.now()-A$j>A$T.loopTimeLimit));)A$w--}},A$T.loopTimeLimit=2,A$T._cacheList=[],A$T._index=0,A$T}(),A$g=function(){function A$K(){}return A$e(A$K,"laya.utils.ClassUtils"),A$K.regClass=function(A$C,A$R){A$K._classMap[A$C]=A$R},A$K.getRegClass=function(A$C){return A$K._classMap[A$C]},A$K.getInstance=function(A$C){var A$R=A$K.getClass(A$C);return A$R?new A$R:(console.warn("[error] Undefined class:",A$C),null)},A$K.createByJson=function(A$C,A$R,A$j,A$w,A$T){"string"==typeof A$C&&(A$C=JSON.parse(A$C));var A$G=A$C.props;if(!A$R&&!(A$R=A$T?A$T.runWith(A$C):A$K.getInstance(A$G.runtime||A$C.type)))return null;var A$o=A$C.child;if(A$o)for(var A$U=0,A$t=A$o.length;A$U<A$t;A$U++){var A$I=A$o[A$U];if("render"!==A$I.props.name&&"render"!==A$I.props.renderType||!A$R._$set_itemRender)if("Graphic"==A$I.type)A$K.addGraphicsToSprite(A$I,A$R);else if(A$K.isDrawType(A$I.type))A$K.addGraphicToSprite(A$I,A$R,!0);else{var A$e=A$K.createByJson(A$I,null,A$j,A$w,A$T);"Script"==A$I.type?A$e.hasOwnProperty("owner")?A$e.owner=A$R:A$e.hasOwnProperty("target")&&(A$e.target=A$R):"mask"==A$I.props.renderType?A$R.mask=A$e:A$R.addChild(A$e)}else A$R.itemRender=A$I}if(A$G)for(var A$H in A$G){var A$M=A$G[A$H];"var"===A$H&&A$j?A$j[A$M]=A$R:A$M instanceof Array&&"function"==typeof A$R[A$H]?A$R[A$H].apply(A$R,A$M):A$R[A$H]=A$M}return A$w&&A$C.customProps&&A$w.runWith([A$R,A$C]),A$R.created&&A$R.created(),A$R},A$K.addGraphicsToSprite=function(A$C,A$R){var A$j;if((A$j=A$C.child)&&!(A$j.length<1)){var A$w;A$w=A$K._getGraphicsFromSprite(A$C,A$R);var A$T=0,A$G=0;A$C.props&&(A$T=A$K._getObjVar(A$C.props,"x",0),A$G=A$K._getObjVar(A$C.props,"y",0)),0!=A$T&&0!=A$G&&A$w.translate(A$T,A$G);var A$o,A$U=0;for(A$o=A$j.length,A$U=0;A$U<A$o;A$U++)A$K._addGraphicToGraphics(A$j[A$U],A$w);0!=A$T&&0!=A$G&&A$w.translate(-A$T,-A$G)}},A$K.addGraphicToSprite=function(A$C,A$R,A$j){var A$w;void 0===A$j&&(A$j=!1),A$w=A$j?A$K._getGraphicsFromSprite(A$C,A$R):A$R.graphics,A$K._addGraphicToGraphics(A$C,A$w)},A$K._getGraphicsFromSprite=function(A$C,A$R){var A$j,A$w;if(!A$C||!A$C.props)return A$R.graphics;switch(A$w=A$C.props.renderType){case"hit":case"unHit":var A$T;A$R.hitArea||(A$R.hitArea=new A$u),(A$T=A$R.hitArea)[A$w]||(A$T[A$w]=new A$M),A$j=A$T[A$w]}return A$j||(A$j=A$R.graphics),A$j},A$K._getTransformData=function(A$C){var A$R;(A$C.hasOwnProperty("pivotX")||A$C.hasOwnProperty("pivotY"))&&(A$R=A$R||new A$P).translate(-A$K._getObjVar(A$C,"pivotX",0),-A$K._getObjVar(A$C,"pivotY",0));var A$j=A$K._getObjVar(A$C,"scaleX",1),A$w=A$K._getObjVar(A$C,"scaleY",1),A$T=A$K._getObjVar(A$C,"rotation",0);A$K._getObjVar(A$C,"skewX",0),A$K._getObjVar(A$C,"skewY",0);return 1==A$j&&1==A$w&&0==A$T||((A$R=A$R||new A$P).scale(A$j,A$w),A$R.rotate(.0174532922222222*A$T)),A$R},A$K._addGraphicToGraphics=function(A$C,A$R){var A$j,A$w;if((A$j=A$C.props)&&(A$w=A$K.DrawTypeDic[A$C.type])){var A$T,A$G;A$T=A$R;var A$o=A$K._getParams(A$j,A$w[1],A$w[2],A$w[3]);((A$G=A$K._tM)||1!=A$K._alpha)&&(A$T.save(),A$G&&A$T.transform(A$G),1!=A$K._alpha&&A$T.alpha(A$K._alpha)),A$T[A$w[0]].apply(A$T,A$o),(A$G||1!=A$K._alpha)&&A$T.restore()}},A$K._adptLineData=function(A$C){return A$C[2]=parseFloat(A$C[0])+parseFloat(A$C[2]),A$C[3]=parseFloat(A$C[1])+parseFloat(A$C[3]),A$C},A$K._adptTextureData=function(A$C){return A$C[0]=A$UC.getRes(A$C[0]),A$C},A$K._adptLinesData=function(A$C){return A$C[2]=A$K._getPointListByStr(A$C[2]),A$C},A$K.isDrawType=function(A$C){return"Image"!=A$C&&A$K.DrawTypeDic.hasOwnProperty(A$C)},A$K._getParams=function(A$C,A$R,A$j,A$w){var A$T;void 0===A$j&&(A$j=0),(A$T=A$K._temParam).length=A$R.length;var A$G,A$o,A$U=0;for(A$G=A$R.length,A$U=0;A$U<A$G;A$U++)A$T[A$U]=A$K._getObjVar(A$C,A$R[A$U][0],A$R[A$U][1]);return A$K._alpha=A$K._getObjVar(A$C,"alpha",1),A$o=A$K._getTransformData(A$C),A$K._tM=A$o?(A$j||(A$j=0),A$o.translate(A$T[A$j],A$T[A$j+1]),A$T[A$j]=A$T[A$j+1]=0,A$o):null,A$w&&A$K[A$w]&&(A$T=A$K[A$w](A$T)),A$T},A$K._getPointListByStr=function(A$C){var A$R,A$j,A$w=0;for(A$j=(A$R=A$C.split(",")).length,A$w=0;A$w<A$j;A$w++)A$R[A$w]=parseFloat(A$R[A$w]);return A$R},A$K._getObjVar=function(A$C,A$R,A$j){return A$C.hasOwnProperty(A$R)?A$C[A$R]:A$j},A$K._temParam=[],A$K._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},A$K.getClass=function(A$C){var A$R=A$K._classMap[A$C]||A$C;return"string"==typeof A$R?A$h.__classmap[A$R]:A$R},A$K._tM=null,A$K._alpha=NaN,A$t(A$K,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),A$K}(),A$B=function(){function A$G(A$C){if(this._color=[],"string"==typeof A$C){null===(this.strColor=A$C)&&(A$C="#000000"),"#"==A$C.charAt(0)&&(A$C=A$C.substr(1));var A$R=A$C.length;if(3==A$R||4==A$R){for(var A$j="",A$w=0;A$w<A$R;A$w++)A$j+=A$C[A$w]+A$C[A$w];A$C=A$j}var A$T=this.numColor=parseInt(A$C,16);if(8==A$C.length)return void(this._color=[parseInt(A$C.substr(0,2),16)/255,((16711680&A$T)>>16)/255,((65280&A$T)>>8)/255,(255&A$T)/255])}else A$T=this.numColor=A$C,this.strColor=A$d.toHexColor(A$T);this._color=[((16711680&A$T)>>16)/255,((65280&A$T)>>8)/255,(255&A$T)/255,1],this._color.__id=++A$G._COLODID}return A$e(A$G,"laya.utils.Color"),A$G._initDefault=function(){for(var A$C in A$G._DEFAULT={},A$G._COLOR_MAP)A$G._SAVE[A$C]=A$G._DEFAULT[A$C]=new A$G(A$G._COLOR_MAP[A$C]);return A$G._DEFAULT},A$G._initSaveMap=function(){for(var A$C in A$G._SAVE_SIZE=0,A$G._SAVE={},A$G._DEFAULT)A$G._SAVE[A$C]=A$G._DEFAULT[A$C]},A$G.create=function(A$C){var A$R=A$G._SAVE[A$C+""];return null!=A$R?A$R:(A$G._SAVE_SIZE<1e3||A$G._initSaveMap(),A$G._SAVE[A$C+""]=new A$G(A$C))},A$G._SAVE={},A$G._SAVE_SIZE=0,A$G._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},A$G._DEFAULT=A$G._initDefault(),A$G._COLODID=1,A$G}(),A$i=(function(){function A$C(){this._values=[],this._keys=[]}A$e(A$C,"laya.utils.Dictionary");var A$R=A$C.prototype;A$R.set=function(A$C,A$R){var A$j=this.indexOf(A$C);0<=A$j?this._values[A$j]=A$R:(this._keys.push(A$C),this._values.push(A$R))},A$R.indexOf=function(A$C){var A$R=this._keys.indexOf(A$C);return 0<=A$R?A$R:(A$C="string"==typeof A$C?Number(A$C):"number"==typeof A$C?A$C.toString():A$C,this._keys.indexOf(A$C))},A$R.get=function(A$C){var A$R=this.indexOf(A$C);return A$R<0?null:this._values[A$R]},A$R.remove=function(A$C){var A$R=this.indexOf(A$C);return 0<=A$R&&(this._keys.splice(A$R,1),this._values.splice(A$R,1),!0)},A$R.clear=function(){this._values.length=0,this._keys.length=0},A$F(0,A$R,"values",function(){return this._values}),A$F(0,A$R,"keys",function(){return this._keys})}(),function(){function A$C(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}A$e(A$C,"laya.utils.Dragging");var A$R=A$C.prototype;return A$R.start=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){void 0===A$U&&(A$U=.92),this.clearTimer(),this.target=A$C,this.area=A$R,this.hasInertia=A$j,this.elasticDistance=A$R?A$w:0,this.elasticBackTime=A$T,this.data=A$G,this._disableMouseEvent=A$o,this.ratio=A$U,1!=A$C.globalScaleX||1!=A$C.globalScaleY?this._parent=A$C.parent:this._parent=A$h.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,A$h.stage.on("mouseup",this,this.onStageMouseUp),A$h.stage.on("mouseout",this,this.onStageMouseUp),A$h.timer.frameLoop(1,this,this.loop)},A$R.clearTimer=function(){A$h.timer.clear(this,this.loop),A$h.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},A$R.stop=function(){this._dragging&&(A$L.instance.disableMouseEvent=!1,A$h.stage.off("mouseup",this,this.onStageMouseUp),A$h.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},A$R.loop=function(){var A$C=this._parent.getMousePoint(),A$R=A$C.x,A$j=A$C.y,A$w=A$R-this._lastX,A$T=A$j-this._lastY;if(this._clickOnly){if(!(1<Math.abs(A$w*A$h.stage._canvasTransform.getScaleX())||1<Math.abs(A$T*A$h.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),A$L.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(A$w,A$T);0==A$w&&0==A$T||(this._lastX=A$R,this._lastY=A$j,this.target.x+=A$w*this._elasticRateX,this.target.y+=A$T*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},A$R.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var A$C=this.area.x-this.target.x;else A$C=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-A$C/this.elasticDistance),this.target.y<this.area.y)var A$R=this.area.y-this.target.y;else A$R=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-A$R/this.elasticDistance)}},A$R.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},A$R.onStageMouseUp=function(A$C){if(A$L.instance.disableMouseEvent=!1,A$h.stage.off("mouseup",this,this.onStageMouseUp),A$h.stage.off("mouseout",this,this.onStageMouseUp),A$h.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var A$R=this._offsets.length,A$j=Math.min(A$R,6),A$w=this._offsets.length-A$j,A$T=A$R-1;A$w<A$T;A$T--)this._offsetY+=this._offsets[A$T--],this._offsetX+=this._offsets[A$T];this._offsetX=this._offsetX/A$j*2,this._offsetY=this._offsetY/A$j*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),A$h.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},A$R.checkElastic=function(){var A$C=NaN,A$R=NaN;if(this.target.x<this.area.x?A$C=this.area.x:this.target.x>this.area.x+this.area.width&&(A$C=this.area.x+this.area.width),this.target.y<this.area.y?A$R=this.area.y:this.target.y>this.area.y+this.area.height&&(A$R=this.area.y+this.area.height),isNaN(A$C)&&isNaN(A$R))this.clear();else{var A$j={};isNaN(A$C)||(A$j.x=A$C),isNaN(A$R)||(A$j.y=A$R),this._tween=A$Y.to(this.target,A$j,this.elasticBackTime,A$_.sineOut,A$Z.create(this,this.clear),0,!1,!1)}},A$R.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(A$h.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},A$R.clear=function(){if(this.target){this.clearTimer();var A$C=this.target;this.target=null,this._parent=null,A$C.event("dragend",this.data)}},A$C}()),A$_=function(){function A$U(){}return A$e(A$U,"laya.utils.Ease"),A$U.linearNone=function(A$C,A$R,A$j,A$w){return A$j*A$C/A$w+A$R},A$U.linearIn=function(A$C,A$R,A$j,A$w){return A$j*A$C/A$w+A$R},A$U.linearInOut=function(A$C,A$R,A$j,A$w){return A$j*A$C/A$w+A$R},A$U.linearOut=function(A$C,A$R,A$j,A$w){return A$j*A$C/A$w+A$R},A$U.bounceIn=function(A$C,A$R,A$j,A$w){return A$j-A$U.bounceOut(A$w-A$C,0,A$j,A$w)+A$R},A$U.bounceInOut=function(A$C,A$R,A$j,A$w){return A$C<.5*A$w?.5*A$U.bounceIn(2*A$C,0,A$j,A$w)+A$R:.5*A$U.bounceOut(2*A$C-A$w,0,A$j,A$w)+.5*A$j+A$R},A$U.bounceOut=function(A$C,A$R,A$j,A$w){return(A$C/=A$w)<1/2.75?A$j*(7.5625*A$C*A$C)+A$R:A$C<2/2.75?A$j*(7.5625*(A$C-=1.5/2.75)*A$C+.75)+A$R:A$C<2.5/2.75?A$j*(7.5625*(A$C-=2.25/2.75)*A$C+.9375)+A$R:A$j*(7.5625*(A$C-=2.625/2.75)*A$C+.984375)+A$R},A$U.backIn=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=1.70158),A$j*(A$C/=A$w)*A$C*((A$T+1)*A$C-A$T)+A$R},A$U.backInOut=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=1.70158),(A$C/=.5*A$w)<1?.5*A$j*(A$C*A$C*((1+(A$T*=1.525))*A$C-A$T))+A$R:A$j/2*((A$C-=2)*A$C*((1+(A$T*=1.525))*A$C+A$T)+2)+A$R},A$U.backOut=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=1.70158),A$j*((A$C=A$C/A$w-1)*A$C*((A$T+1)*A$C+A$T)+1)+A$R},A$U.elasticIn=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o;return void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=0),0==A$C?A$R:1==(A$C/=A$w)?A$R+A$j:(A$G||(A$G=.3*A$w),A$o=!A$T||0<A$j&&A$T<A$j||A$j<0&&A$T<-A$j?(A$T=A$j,A$G/4):A$G/A$U.PI2*Math.asin(A$j/A$T),-A$T*Math.pow(2,10*(A$C-=1))*Math.sin((A$C*A$w-A$o)*A$U.PI2/A$G)+A$R)},A$U.elasticInOut=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o;return void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=0),0==A$C?A$R:2==(A$C/=.5*A$w)?A$R+A$j:(A$G||(A$G=A$w*(.3*1.5)),A$o=!A$T||0<A$j&&A$T<A$j||A$j<0&&A$T<-A$j?(A$T=A$j,A$G/4):A$G/A$U.PI2*Math.asin(A$j/A$T),A$C<1?A$T*Math.pow(2,10*(A$C-=1))*Math.sin((A$C*A$w-A$o)*A$U.PI2/A$G)*-.5+A$R:A$T*Math.pow(2,-10*(A$C-=1))*Math.sin((A$C*A$w-A$o)*A$U.PI2/A$G)*.5+A$j+A$R)},A$U.elasticOut=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o;return void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=0),0==A$C?A$R:1==(A$C/=A$w)?A$R+A$j:(A$G||(A$G=.3*A$w),A$o=!A$T||0<A$j&&A$T<A$j||A$j<0&&A$T<-A$j?(A$T=A$j,A$G/4):A$G/A$U.PI2*Math.asin(A$j/A$T),A$T*Math.pow(2,-10*A$C)*Math.sin((A$C*A$w-A$o)*A$U.PI2/A$G)+A$j+A$R)},A$U.strongIn=function(A$C,A$R,A$j,A$w){return A$j*(A$C/=A$w)*A$C*A$C*A$C*A$C+A$R},A$U.strongInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*A$j*A$C*A$C*A$C*A$C*A$C+A$R:.5*A$j*((A$C-=2)*A$C*A$C*A$C*A$C+2)+A$R},A$U.strongOut=function(A$C,A$R,A$j,A$w){return A$j*((A$C=A$C/A$w-1)*A$C*A$C*A$C*A$C+1)+A$R},A$U.sineInOut=function(A$C,A$R,A$j,A$w){return.5*-A$j*(Math.cos(Math.PI*A$C/A$w)-1)+A$R},A$U.sineIn=function(A$C,A$R,A$j,A$w){return-A$j*Math.cos(A$C/A$w*A$U.HALF_PI)+A$j+A$R},A$U.sineOut=function(A$C,A$R,A$j,A$w){return A$j*Math.sin(A$C/A$w*A$U.HALF_PI)+A$R},A$U.quintIn=function(A$C,A$R,A$j,A$w){return A$j*(A$C/=A$w)*A$C*A$C*A$C*A$C+A$R},A$U.quintInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*A$j*A$C*A$C*A$C*A$C*A$C+A$R:.5*A$j*((A$C-=2)*A$C*A$C*A$C*A$C+2)+A$R},A$U.quintOut=function(A$C,A$R,A$j,A$w){return A$j*((A$C=A$C/A$w-1)*A$C*A$C*A$C*A$C+1)+A$R},A$U.quartIn=function(A$C,A$R,A$j,A$w){return A$j*(A$C/=A$w)*A$C*A$C*A$C+A$R},A$U.quartInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*A$j*A$C*A$C*A$C*A$C+A$R:.5*-A$j*((A$C-=2)*A$C*A$C*A$C-2)+A$R},A$U.quartOut=function(A$C,A$R,A$j,A$w){return-A$j*((A$C=A$C/A$w-1)*A$C*A$C*A$C-1)+A$R},A$U.cubicIn=function(A$C,A$R,A$j,A$w){return A$j*(A$C/=A$w)*A$C*A$C+A$R},A$U.cubicInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*A$j*A$C*A$C*A$C+A$R:.5*A$j*((A$C-=2)*A$C*A$C+2)+A$R},A$U.cubicOut=function(A$C,A$R,A$j,A$w){return A$j*((A$C=A$C/A$w-1)*A$C*A$C+1)+A$R},A$U.quadIn=function(A$C,A$R,A$j,A$w){return A$j*(A$C/=A$w)*A$C+A$R},A$U.quadInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*A$j*A$C*A$C+A$R:.5*-A$j*(--A$C*(A$C-2)-1)+A$R},A$U.quadOut=function(A$C,A$R,A$j,A$w){return-A$j*(A$C/=A$w)*(A$C-2)+A$R},A$U.expoIn=function(A$C,A$R,A$j,A$w){return 0==A$C?A$R:A$j*Math.pow(2,10*(A$C/A$w-1))+A$R-.001*A$j},A$U.expoInOut=function(A$C,A$R,A$j,A$w){return 0==A$C?A$R:A$C==A$w?A$R+A$j:(A$C/=.5*A$w)<1?.5*A$j*Math.pow(2,10*(A$C-1))+A$R:.5*A$j*(2-Math.pow(2,-10*--A$C))+A$R},A$U.expoOut=function(A$C,A$R,A$j,A$w){return A$C==A$w?A$R+A$j:A$j*(1-Math.pow(2,-10*A$C/A$w))+A$R},A$U.circIn=function(A$C,A$R,A$j,A$w){return-A$j*(Math.sqrt(1-(A$C/=A$w)*A$C)-1)+A$R},A$U.circInOut=function(A$C,A$R,A$j,A$w){return(A$C/=.5*A$w)<1?.5*-A$j*(Math.sqrt(1-A$C*A$C)-1)+A$R:.5*A$j*(Math.sqrt(1-(A$C-=2)*A$C)+1)+A$R},A$U.circOut=function(A$C,A$R,A$j,A$w){return A$j*Math.sqrt(1-(A$C=A$C/A$w-1)*A$C)+A$R},A$U.HALF_PI=.5*Math.PI,A$U.PI2=2*Math.PI,A$U}(),A$u=function(){function A$H(){this._hit=null,this._unHit=null}A$e(A$H,"laya.utils.HitArea");var A$C=A$H.prototype;return A$C.isHit=function(A$C,A$R){return!!A$H.isHitGraphic(A$C,A$R,this.hit)&&!A$H.isHitGraphic(A$C,A$R,this.unHit)},A$C.contains=function(A$C,A$R){return this.isHit(A$C,A$R)},A$F(0,A$C,"hit",function(){return this._hit||(this._hit=new A$M),this._hit},function(A$C){this._hit=A$C}),A$F(0,A$C,"unHit",function(){return this._unHit||(this._unHit=new A$M),this._unHit},function(A$C){this._unHit=A$C}),A$H.isHitGraphic=function(A$C,A$R,A$j){if(!A$j)return!1;var A$w;if(!(A$w=A$j.cmds)&&A$j._one&&((A$w=A$H._cmds).length=1,A$w[0]=A$j._one),!A$w)return!1;var A$T,A$G,A$o=0;for(A$T=A$w.length,A$o=0;A$o<A$T;A$o++)if(A$G=A$w[A$o]){var A$U=A$a._context;switch(A$G.callee){case A$U._translate:case 6:A$C-=A$G[0],A$R-=A$G[1]}if(A$H.isHitCmd(A$C,A$R,A$G))return!0}return!1},A$H.isHitCmd=function(A$C,A$R,A$j){if(!A$j)return!1;var A$w=A$a._context,A$T=!1;switch(A$j.callee){case A$w._drawRect:case 13:A$H._rec.setTo(A$j[0],A$j[1],A$j[2],A$j[3]),A$T=A$H._rec.contains(A$C,A$R);break;case A$w._drawCircle:case A$w._fillCircle:case 14:A$T=(A$C-=A$j[0])*A$C+(A$R-=A$j[1])*A$R<A$j[2]*A$j[2];break;case A$w._drawPoly:case 18:A$C-=A$j[0],A$R-=A$j[1],A$T=A$H.ptInPolygon(A$C,A$R,A$j[2])}return A$T},A$H.ptInPolygon=function(A$C,A$R,A$j){var A$w;(A$w=A$H._ptPoint).setTo(A$C,A$R);var A$T,A$G=0,A$o=NaN,A$U=NaN,A$t=NaN,A$I=NaN;A$T=A$j.length;for(var A$e=0;A$e<A$T;A$e+=2){if(A$o=A$j[A$e],A$U=A$j[A$e+1],A$t=A$j[(A$e+2)%A$T],A$U!=(A$I=A$j[(A$e+3)%A$T]))if(!(A$w.y<Math.min(A$U,A$I)))if(!(A$w.y>=Math.max(A$U,A$I)))(A$w.y-A$U)*(A$t-A$o)/(A$I-A$U)+A$o>A$w.x&&A$G++}return A$G%2==1},A$H._cmds=[],A$t(A$H,["_rec",function(){return this._rec=new A$W},"_ptPoint",function(){return this._ptPoint=new A$x}]),A$H}(),A$s=(function(){function A$T(A$C,A$R,A$j,A$w){this.char=A$C,this.charNum=A$C.charCodeAt(0),this._x=this._y=0,this.width=A$R,this.height=A$j,this.style=A$w,this.isWord=!A$T._isWordRegExp.test(A$C)}A$e(A$T,"laya.utils.HTMLChar");var A$C=A$T.prototype;A$h.imps(A$C,{"laya.display.ILayout":!0}),A$C.setSprite=function(A$C){this._sprite=A$C},A$C.getSprite=function(){return this._sprite},A$C._isChar=function(){return!0},A$C._getCSSStyle=function(){return this.style},A$F(0,A$C,"width",function(){return this._w},function(A$C){this._w=A$C}),A$F(0,A$C,"x",function(){return this._x},function(A$C){this._sprite&&(this._sprite.x=A$C),this._x=A$C}),A$F(0,A$C,"y",function(){return this._y},function(A$C){this._sprite&&(this._sprite.y=A$C),this._y=A$C}),A$F(0,A$C,"height",function(){return this._h},function(A$C){this._h=A$C}),A$T._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function A$R(){}A$e(A$R,"laya.utils.Log"),A$R.enable=function(){A$R._logdiv||(A$R._logdiv=A$V.window.document.createElement("div"),A$V.window.document.body.appendChild(A$R._logdiv),A$R._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},A$R.toggle=function(){var A$C=A$R._logdiv.style;"1px"==A$C.width?A$C.width=A$C.height="50%":A$C.width=A$C.height="1px"},A$R.print=function(A$C){A$R._logdiv&&(A$R.maxCount<=A$R._count&&A$R.clear(),A$R._count++,A$R._logdiv.innerText+=A$C+"\n",A$R._logdiv.scrollTop=A$R._logdiv.scrollHeight)},A$R.clear=function(){A$R._logdiv.innerText="",A$R._count=0},A$R._logdiv=null,A$R._count=0,A$R.maxCount=20}(),function(){function A$R(){}A$e(A$R,"laya.utils.Mouse"),A$F(1,A$R,"cursor",function(){return A$R._style.cursor},function(A$C){A$R._style.cursor=A$C}),A$R.hide=function(){"none"!=A$R.cursor&&(A$R._preCursor=A$R.cursor,A$R.cursor="none")},A$R.show=function(){"none"==A$R.cursor&&(A$R.cursor=A$R._preCursor?A$R._preCursor:"auto")},A$R._preCursor=null,A$t(A$R,["_style",function(){return this._style=A$V.document.body.style}])}(),function(){function A$G(){}return A$e(A$G,"laya.utils.Pool"),A$G.getPoolBySign=function(A$C){return A$G._poolDic[A$C]||(A$G._poolDic[A$C]=[])},A$G.clearBySign=function(A$C){A$G._poolDic[A$C]&&(A$G._poolDic[A$C].length=0)},A$G.recover=function(A$C,A$R){A$R.__InPool||(A$R.__InPool=!0,A$G.getPoolBySign(A$C).push(A$R))},A$G.getItemByClass=function(A$C,A$R){var A$j=A$G.getPoolBySign(A$C),A$w=A$j.length?A$j.pop():new A$R;return A$w.__InPool=!1,A$w},A$G.getItemByCreateFun=function(A$C,A$R,A$j){var A$w=A$G.getPoolBySign(A$C),A$T=A$w.length?A$w.pop():A$R.call(A$j);return A$T.__InPool=!1,A$T},A$G.getItem=function(A$C){var A$R=A$G.getPoolBySign(A$C),A$j=A$R.length?A$R.pop():null;return A$j&&(A$j.__InPool=!1),A$j},A$G._poolDic={},A$G.InPoolSign="__InPool",A$G}()),A$c=function(){function A$t(){}return A$e(A$t,"laya.utils.Stat"),A$F(1,A$t,"onclick",null,function(A$C){A$t._sp&&A$t._sp.on("click",A$t._sp,A$C),A$t._canvas&&(A$t._canvas.source.onclick=A$C,A$t._canvas.source.style.pointerEvents="")}),A$t.show=function(A$C,A$R,A$j){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),!A$a.isConchApp||A$a.isConchWebGL){if(A$a.isConchWebGL||A$V.onMiniGame||A$V.onLimixiu||(A$t._useCanvas=!0),A$t._show=!0,A$t._fpsData.length=60,A$t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},A$t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},A$t._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},A$t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},A$a.isWebGL)if(A$t._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},A$a.is3DMode){if(A$t._view[0].title="FPS(3D)",A$t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},A$t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},A$t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==A$j){var A$w=8;A$t._view[A$w++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},A$t._view[A$w++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},A$t._view[A$w++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==A$j){A$w=8;A$t._view[A$w++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},A$t._view[A$w++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else A$t._view[0].title="FPS(WebGL)",A$t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else A$t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};A$t._useCanvas?A$t.createUIPre(A$C,A$R):A$t.createUI(A$C,A$R),A$t.enable()}else A$V.window.conch.showFPS&&A$V.window.conch.showFPS(A$C,A$R)},A$t.createUIPre=function(A$C,A$R){var A$j=A$V.pixelRatio;A$t._width=170*A$j,A$t._vx=75*A$j,A$t._height=A$j*(12*A$t._view.length+3*A$j)+4,A$t._fontSize=12*A$j;for(var A$w=0;A$w<A$t._view.length;A$w++)A$t._view[A$w].x=4,A$t._view[A$w].y=A$w*A$t._fontSize+2*A$j;A$t._canvas||((A$t._canvas=new A$SC("2D")).size(A$t._width,A$t._height),(A$t._ctx=A$t._canvas.getContext("2d")).textBaseline="top",A$t._ctx.font=A$t._fontSize+"px Sans-serif",A$t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+A$C+"px;top:"+A$R+"px;width:"+A$t._width/A$j+"px;height:"+A$t._height/A$j+"px;"),A$t._first=!0,A$t.loop(),A$t._first=!1,A$V.container.appendChild(A$t._canvas.source)},A$t.createUI=function(A$C,A$R){var A$j=A$t._sp,A$w=A$V.pixelRatio;A$j||(A$j=new A$HC,(A$t._leftText=new A$DC).pos(5,5),A$t._leftText.color="#ffffff",A$j.addChild(A$t._leftText),(A$t._txt=new A$DC).pos(80*A$w,5),A$t._txt.color="#ffffff",A$j.addChild(A$t._txt),A$t._sp=A$j),A$j.pos(A$C,A$R);for(var A$T="",A$G=0;A$G<A$t._view.length;A$G++){A$T+=A$t._view[A$G].title+"\n"}A$t._leftText.text=A$T;var A$o=170*A$w,A$U=A$w*(12*A$t._view.length+3*A$w)+4;A$t._txt.fontSize=A$t._fontSize*A$w,A$t._leftText.fontSize=A$t._fontSize*A$w,A$j.size(A$o,A$U),A$j.graphics.clear(),A$j.graphics.setAlpha(.5),A$j.graphics.drawRect(0,0,A$o,A$U,"#999999"),A$j.graphics.setAlpha(1),A$t.loop()},A$t.enable=function(){A$h.timer.frameLoop(1,A$t,A$t.loop)},A$t.hide=function(){A$t._show=!1,A$h.timer.clear(A$t,A$t.loop),A$t._canvas&&A$V.removeElement(A$t._canvas.source)},A$t.clear=function(){A$t.trianglesFaces=A$t.drawCall=A$t.shaderCall=A$t.spriteCount=A$t.spriteRenderUseCacheCount=A$t.treeNodeCollision=A$t.treeSpriteCollision=A$t.canvasNormal=A$t.canvasBitmap=A$t.canvasReCache=0},A$t.loop=function(){A$t._count++;var A$C=A$V.now();if(!(A$C-A$t._timer<1e3)){var A$R=A$t._count;if(A$t.FPS=Math.round(1e3*A$R/(A$C-A$t._timer)),A$t._show){A$t.trianglesFaces=Math.round(A$t.trianglesFaces/A$R),A$t.spriteCount=A$t._useCanvas?(A$t.drawCall=Math.round(A$t.drawCall/A$R)-2,A$t.shaderCall=Math.round(A$t.shaderCall/A$R),Math.round(A$t.spriteCount/A$R)-1):(A$t.drawCall=Math.round(A$t.drawCall/A$R)-2,A$t.shaderCall=Math.round(A$t.shaderCall/A$R)-4,Math.round(A$t.spriteCount/A$R)-4),A$t.spriteRenderUseCacheCount=Math.round(A$t.spriteRenderUseCacheCount/A$R),A$t.canvasNormal=Math.round(A$t.canvasNormal/A$R),A$t.canvasBitmap=Math.round(A$t.canvasBitmap/A$R),A$t.canvasReCache=Math.ceil(A$t.canvasReCache/A$R),A$t.treeNodeCollision=Math.round(A$t.treeNodeCollision/A$R),A$t.treeSpriteCollision=Math.round(A$t.treeSpriteCollision/A$R);var A$j=0<A$t.FPS?Math.floor(1e3/A$t.FPS).toString():" ";A$t._fpsStr=A$t.FPS+(A$t.renderSlow?" slow":"")+" "+A$j,A$t._spriteStr=A$t.spriteCount+(A$t.spriteRenderUseCacheCount?"/"+A$t.spriteRenderUseCacheCount:""),A$t._canvasStr=A$t.canvasReCache+"/"+A$t.canvasNormal+"/"+A$t.canvasBitmap,A$t.currentMemorySize=A$k.systemResourceManager.memorySize,A$t._useCanvas?A$t.renderInfoPre():A$t.renderInfo(),A$t.clear()}A$t._count=0,A$t._timer=A$C}},A$t.renderInfoPre=function(){if(A$t._canvas){var A$C=A$t._ctx;A$C.clearRect(A$t._first?0:A$t._vx,0,A$t._width,A$t._height);for(var A$R=A$a.WebGL.mainContext,A$j=0;A$j<A$t._view.length;A$j++){var A$w=A$t._view[A$j];A$t._first&&(A$C.fillStyle="white",A$C.fillText(A$w.title,A$w.x,A$w.y,null,null,null)),A$C.fillStyle=A$w.color;var A$T=-1;if((A$w=A$t._view[A$j]).varying){if(A$R)switch(A$w.varying){case 1:A$T=A$R.getParameter(A$R[A$w.value]);break;case 2:A$T=A$R.getExtension(A$w.value)}}else A$T=A$t[A$w.value];"M"==A$w.units&&(A$T=Math.floor(A$T/1048576*100)/100+" M"),"K"==A$w.units&&(A$T=Math.floor(A$T/1024*100)/100+" K"),"string"==A$w.units&&(A$T=A$T.match(/\d+\.?\d/i)),A$C.fillText(A$T+"",A$w.x+A$t._vx,A$w.y,null,null,null)}}},A$t.renderInfo=function(){for(var A$C="",A$R=A$a.WebGL.mainContext,A$j=0;A$j<A$t._view.length;A$j++){var A$w=A$t._view[A$j],A$T=-1;if(A$w.varying){if(A$R)switch(A$w.varying){case 1:A$T=A$R.getParameter(A$R[A$w.value]);break;case 2:A$T=A$R.getExtension(A$w.value)}}else A$T=A$t[A$w.value];"M"==A$w.units&&(A$T=Math.floor(A$T/1048576*100)/100+" M"),"K"==A$w.units&&(A$T=Math.floor(A$T/1024*100)/100+" K"),"string"==A$w.units&&(A$T=A$T.match(/\d+\.?\d/i)),A$C+=A$T+"\n"}A$t._txt.text=A$C},A$t.FPS=0,A$t.loopCount=0,A$t.shaderCall=0,A$t.drawCall=0,A$t.trianglesFaces=0,A$t.spriteCount=0,A$t.spriteRenderUseCacheCount=0,A$t.treeNodeCollision=0,A$t.treeSpriteCollision=0,A$t.canvasNormal=0,A$t.canvasBitmap=0,A$t.canvasReCache=0,A$t.renderSlow=!1,A$t.currentMemorySize=0,A$t._fpsStr=null,A$t._canvasStr=null,A$t._spriteStr=null,A$t._fpsData=[],A$t._timer=0,A$t._count=0,A$t._view=[],A$t._fontSize=12,A$t._txt=null,A$t._leftText=null,A$t._sp=null,A$t._show=!1,A$t._useCanvas=!1,A$t._canvas=null,A$t._ctx=null,A$t._first=!1,A$t._vx=NaN,A$t._width=0,A$t._height=100,A$t}(),A$X=(function(){function A$C(){this._strsToID={},this._idToStrs=[],this._length=0}A$e(A$C,"laya.utils.StringKey");var A$R=A$C.prototype;A$R.add=function(A$C){var A$R=this._strsToID[A$C];return null!=A$R?A$R:(this._idToStrs[this._length]=A$C,this._strsToID[A$C]=this._length++)},A$R.getID=function(A$C){var A$R=this._strsToID[A$C];return null==A$R?-1:A$R},A$R.getName=function(A$C){var A$R=this._idToStrs[A$C];return null==A$R?void 0:A$R}}(),function(){var A$I;function A$C(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}A$e(A$C,"laya.utils.Timer");var A$R=A$C.prototype;return A$R._init=function(){A$h.timer&&A$h.timer.frameLoop(1,this,this._update)},A$R._now=function(){return Date.now()},A$R._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var A$C=this.currFrame=this.currFrame+this.scale,A$R=this._now();this._delta=(A$R-this._lastTimer)*this.scale;var A$j=this.currTimer=this.currTimer+this._delta;A$h.isDebug&&6e4<Math.abs(A$R-this._lastTimer)&&console.error("系统时间错误！"+(A$R-this._lastTimer)),this._lastTimer=A$R;var A$w=this._handlers;for(A$o=this._count=0,A$U=A$w.length;A$o<A$U;A$o++)if(null!==(A$t=A$w[A$o]).method){var A$T=A$t.userFrame?A$C:A$j;if(A$T>=A$t.exeTime)if(A$t.repeat)if(A$t.jumpFrame)for(;A$T>=A$t.exeTime;)A$t.exeTime+=A$t.delay,A$t.run(!1);else A$t.exeTime+=A$t.delay,A$t.run(!1),A$T>A$t.exeTime&&(A$t.exeTime+=Math.ceil((A$T-A$t.exeTime)/A$t.delay)*A$t.delay);else A$t.run(!0)}else this._count++;(30<this._count||A$C%200==0)&&this._clearHandlers();for(var A$G=this._laters,A$o=0,A$U=A$G.length-1;A$o<=A$U;A$o++){var A$t=A$G[A$o];this._isIgnoreRecover(A$t)||(null!==A$t.method&&(delete this._map[A$t.key],A$t.run(!1)),this._recoverHandler(A$t)),A$o===A$U&&(A$U=A$G.length-1)}A$G.length=0}},A$R._clearHandlers=function(){for(var A$C=this._handlers,A$R=0,A$j=A$C.length;A$R<A$j;A$R++){var A$w=A$C[A$R];null!==A$w.method?this._temp.push(A$w):this._isIgnoreRecover(A$w)?this._temp.push(A$w):this._recoverHandler(A$w)}this._handlers=this._temp,this._temp=A$C,this._temp.length=0},A$R._recoverHandler=function(A$C){this._map[A$C.key]==A$C&&delete this._map[A$C.key],A$C.recover()},A$R._create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){if(!A$j)return A$T.apply(A$w,A$G),null;if(A$o){var A$t=this._getHandler(A$w,A$T);if(A$t)return A$t.repeat=A$R,A$t.userFrame=A$C,A$t.delay=A$j,A$t.ignoreRecover=A$U,A$t.caller=A$w,A$t.method=A$T,A$t.args=A$G,A$t.exeTime=A$j+(A$C?this.currFrame:this.currTimer+this._now()-this._lastTimer),A$t}return(A$t=A$I.create()).repeat=A$R,A$t.userFrame=A$C,A$t.delay=A$j,A$t.ignoreRecover=A$U,A$t.caller=A$w,A$t.method=A$T,A$t.args=A$G,A$t.exeTime=A$j+(A$C?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(A$t),this._handlers.push(A$t),A$t},A$R._indexHandler=function(A$C){var A$R=A$C.caller,A$j=A$C.method,A$w=A$R?A$R.$_GID||(A$R.$_GID=A$d.getGID()):0,A$T=A$j.$_TID||(A$j.$_TID=this._mid++);A$C.key=A$w+"_"+A$T,this._map[A$C.key]=A$C},A$R.once=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=!0),this._create(!1,!1,A$C,A$R,A$j,A$w,A$T,!1)},A$R.loop=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){void 0===A$T&&(A$T=!0),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!1);var A$U=this._create(!1,!0,A$C,A$R,A$j,A$w,A$T,A$o);A$U&&(A$U.jumpFrame=A$G)},A$R.frameOnce=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=!0),this._create(!0,!1,A$C,A$R,A$j,A$w,A$T,!1)},A$R.frameLoop=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$T&&(A$T=!0),void 0===A$G&&(A$G=!1),this._create(!0,!0,A$C,A$R,A$j,A$w,A$T,A$G)},A$R.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+A$I._freeCount},A$R.clear=function(A$C,A$R){var A$j=this._getHandler(A$C,A$R);return!(!A$j||this._isIgnoreRecover(A$j))&&(delete this._map[A$j.key],A$j.key=null,A$j.clear(),!0)},A$R.clearAll=function(A$C){if(A$C)for(var A$R=0,A$j=this._handlers.length;A$R<A$j;A$R++){var A$w=this._handlers[A$R];A$w.caller===A$C&&(this._isIgnoreRecover(A$w)||(delete this._map[A$w.key],A$w.key=null,A$w.clear()))}},A$R._getHandler=function(A$C,A$R){var A$j=A$C?A$C.$_GID||(A$C.$_GID=A$d.getGID()):0,A$w=A$R.$_TID||(A$R.$_TID=this._mid++);return this._map[A$j+"_"+A$w]},A$R._isIgnoreRecover=function(A$C){if(A$C.ignoreRecover||A$C.caller&&"IgnoreRecover"==A$C.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var A$R="";try{arguments.propertyIsEnumerable.caller}catch(A$C){A$R=A$C.stack}A$h.recordError("报错：核心定时器销毁忽略  "+A$R)}return!0}return!1},A$R.hasHandler=function(A$C,A$R){return this._map[A$C.$_GID+"_"+A$R.$_TID]},A$R.callLater=function(A$C,A$R,A$j){if(null==this._getHandler(A$C,A$R)){var A$w=A$I.create();A$w.caller=A$C,A$w.method=A$R,A$w.args=A$j,this._indexHandler(A$w),this._laters.push(A$w)}},A$R.runCallLater=function(A$C,A$R){var A$j=this._getHandler(A$C,A$R);A$j&&null!=A$j.method&&(this._isIgnoreRecover(A$j)||(delete this._map[A$j.key],A$j.run(!0)))},A$R.runTimer=function(A$C,A$R){this.runCallLater(A$C,A$R)},A$F(0,A$R,"delta",function(){return this._delta}),A$C.__init$=function(){A$I=function(){function A$R(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}A$e(A$R,"");var A$C=A$R.prototype;return A$C.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},A$C.recover=function(){this.clear(),this.args=A$R._freeHandler,A$R._freeHandler=this,A$R._freeCount++},A$C.run=function(A$C){var A$R=this.caller;if(A$R&&A$R.destroyed)return this.clear();var A$j=this.method,A$w=this.args;A$C&&this.clear(),null!=A$j&&(A$w?A$j.apply(A$R,A$w):A$j.call(A$R))},A$R._freeHandler=null,A$R._freeCount=0,A$R.create=function(){var A$C=A$R._freeHandler;return A$C?(A$R._freeHandler=A$C.args,--A$R._freeCount,A$C.args=null,A$C):new A$R},A$R}()},A$C}()),A$Y=function(){function A$H(){this.gid=0}A$e(A$H,"laya.utils.Tween");var A$C=A$H.prototype;return A$C.to=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){return void 0===A$G&&(A$G=0),void 0===A$o&&(A$o=!1),this._create(A$C,A$R,A$j,A$w,A$T,A$G,A$o,!0,!1,!0)},A$C.from=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){return void 0===A$G&&(A$G=0),void 0===A$o&&(A$o=!1),this._create(A$C,A$R,A$j,A$w,A$T,A$G,A$o,!1,!1,!0)},A$C._create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){if(!A$C)throw new Error("Tween:target is null");this._target=A$C,this._duration=A$j,this._ease=A$w||A$R.ease||A$H.easeNone,this._complete=A$T||A$R.complete,this._delay=A$G,this._props=[],this._usedTimer=0,this._startTimer=A$V.now(),this._usedPool=A$t,this._delayParam=null,this.update=A$R.update;var A$e=A$C.$_GID||(A$C.$_GID=A$d.getGID());return A$H.tweenMap[A$e]?(A$o&&A$H.clearTween(A$C),A$H.tweenMap[A$e].push(this)):A$H.tweenMap[A$e]=[this],A$I?A$G<=0?this.firstStart(A$C,A$R,A$U):(this._delayParam=[A$C,A$R,A$U],A$h.scaleTimer.once(A$G,this,this.firstStart,this._delayParam)):this._initProps(A$C,A$R,A$U),this},A$C.firstStart=function(A$C,A$R,A$j){this._delayParam=null,A$C.destroyed?this.clear():(this._initProps(A$C,A$R,A$j),this._beginLoop())},A$C._initProps=function(A$C,A$R,A$j){for(var A$w in A$R)if("number"==typeof A$C[A$w]){var A$T=A$j?A$C[A$w]:A$R[A$w],A$G=A$j?A$R[A$w]:A$C[A$w];this._props.push([A$w,A$T,A$G-A$T]),A$j||(A$C[A$w]=A$T)}},A$C._beginLoop=function(){A$h.scaleTimer.frameLoop(1,this,this._doEase)},A$C._doEase=function(){this._updateEase(A$V.now())},A$C._updateEase=function(A$C){var A$R=this._target;if(A$R){if(A$R.destroyed)return A$H.clearTween(A$R);var A$j=this._usedTimer=A$C-this._startTimer-this._delay;if(!(A$j<0)){if(A$j>=this._duration)return this.complete();for(var A$w=0<A$j?this._ease(A$j,0,1,this._duration):0,A$T=this._props,A$G=0,A$o=A$T.length;A$G<A$o;A$G++){var A$U=A$T[A$G];A$R[A$U[0]]=A$U[1]+A$w*A$U[2]}this.update&&this.update.run()}}},A$C.complete=function(){if(this._target){A$h.scaleTimer.runTimer(this,this.firstStart);for(var A$C=this._target,A$R=this._props,A$j=this._complete,A$w=0,A$T=A$R.length;A$w<A$T;A$w++){var A$G=A$R[A$w];A$C[A$G[0]]=A$G[1]+A$G[2]}this.update&&this.update.run(),this.clear(),A$j&&A$j.run()}},A$C.pause=function(){A$h.scaleTimer.clear(this,this._beginLoop),A$h.scaleTimer.clear(this,this._doEase),A$h.scaleTimer.clear(this,this.firstStart);var A$C;(A$C=A$V.now()-this._startTimer-this._delay)<0&&(this._usedTimer=A$C)},A$C.setStartTime=function(A$C){this._startTimer=A$C},A$C.clear=function(){this._target&&(this._remove(),this._clear())},A$C._clear=function(){this.pause(),A$h.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,A$s.recover("tween",this))},A$C.recover=function(){this._usedPool=!0,this._clear()},A$C._remove=function(){var A$C=A$H.tweenMap[this._target.$_GID];if(A$C)for(var A$R=0,A$j=A$C.length;A$R<A$j;A$R++)if(A$C[A$R]===this){A$C.splice(A$R,1);break}},A$C.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=A$V.now(),this._delayParam)A$h.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var A$C=this._props,A$R=0,A$j=A$C.length;A$R<A$j;A$R++){var A$w=A$C[A$R];this._target[A$w[0]]=A$w[1]}A$h.scaleTimer.once(this._delay,this,this._beginLoop)}},A$C.resume=function(){this._usedTimer>=this._duration||(this._startTimer=A$V.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?A$h.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},A$F(0,A$C,"progress",null,function(A$C){var A$R=A$C*this._duration;this._startTimer=A$V.now()-this._delay-A$R}),A$H.to=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){return void 0===A$G&&(A$G=0),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=!0),A$s.getItemByClass("tween",A$H)._create(A$C,A$R,A$j,A$w,A$T,A$G,A$o,!0,A$U,!0)},A$H.from=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){return void 0===A$G&&(A$G=0),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=!0),A$s.getItemByClass("tween",A$H)._create(A$C,A$R,A$j,A$w,A$T,A$G,A$o,!1,A$U,!0)},A$H.clearAll=function(A$C){if(A$C&&A$C.$_GID){var A$R=A$H.tweenMap[A$C.$_GID];if(A$R){for(var A$j=0,A$w=A$R.length;A$j<A$w;A$j++)A$R[A$j]._clear();A$R.length=0}}},A$H.clear=function(A$C){A$C.clear()},A$H.clearTween=function(A$C){A$H.clearAll(A$C)},A$H.easeNone=function(A$C,A$R,A$j,A$w){return A$j*A$C/A$w+A$R},A$H.tweenMap={},A$H}(),A$d=function(){function A$U(){}return A$e(A$U,"laya.utils.Utils"),A$U.toRadian=function(A$C){return A$C*A$U._pi2},A$U.toAngle=function(A$C){return A$C*A$U._pi},A$U.toHexColor=function(A$C){if(A$C<0||isNaN(A$C))return null;for(var A$R=A$C.toString(16);A$R.length<6;)A$R="0"+A$R;return"#"+A$R},A$U.getGID=function(){return A$U._gid++},A$U.concatArray=function(A$C,A$R){if(!A$R)return A$C;if(!A$C)return A$R;var A$j=0,A$w=A$R.length;for(A$j=0;A$j<A$w;A$j++)A$C.push(A$R[A$j]);return A$C},A$U.clearArray=function(A$C){return A$C&&(A$C.length=0),A$C},A$U.copyArray=function(A$C,A$R){if(A$C||(A$C=[]),!A$R)return A$C;A$C.length=A$R.length;var A$j=0,A$w=A$R.length;for(A$j=0;A$j<A$w;A$j++)A$C[A$j]=A$R[A$j];return A$C},A$U.getGlobalRecByPoints=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o;return A$G=new A$x(A$R,A$j),A$G=A$C.localToGlobal(A$G),A$o=new A$x(A$w,A$T),A$o=A$C.localToGlobal(A$o),A$W._getWrapRec([A$G.x,A$G.y,A$o.x,A$o.y])},A$U.getGlobalPosAndScale=function(A$C){return A$U.getGlobalRecByPoints(A$C,0,0,1,1)},A$U.bind=function(A$C,A$R){return A$C.bind(A$R)},A$U.measureText=function(A$C,A$R){return A$E.measureText(A$C,A$R)},A$U.updateOrder=function(A$C){if(!A$C||A$C.length<2)return!1;for(var A$R,A$j=1,A$w=0,A$T=A$C.length,A$G=NaN;A$j<A$T;){for(A$R=A$C[A$w=A$j],A$G=A$C[A$w]._zOrder;-1<--A$w&&A$C[A$w]._zOrder>A$G;)A$C[A$w+1]=A$C[A$w];A$C[A$w+1]=A$R,A$j++}var A$o=A$R.parent.conchModel;if(A$o)if(null!=A$o.updateZOrder)A$o.updateZOrder();else{for(A$j=0;A$j<A$T;A$j++)A$o.removeChild(A$C[A$j].conchModel);for(A$j=0;A$j<A$T;A$j++)A$o.addChildAt(A$C[A$j].conchModel,A$j)}return!0},A$U.transPointList=function(A$C,A$R,A$j){var A$w=0,A$T=A$C.length;for(A$w=0;A$w<A$T;A$w+=2)A$C[A$w]+=A$R,A$C[A$w+1]+=A$j},A$U.parseInt=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j=A$V.window.parseInt(A$C,A$R);return isNaN(A$j)?0:A$j},A$U.getFileExtension=function(A$C){A$U._extReg.lastIndex=A$C.lastIndexOf(".");var A$R=A$U._extReg.exec(A$C);return A$R&&1<A$R.length?A$R[1].toLowerCase():null},A$U.getTransformRelativeToWindow=function(A$C,A$R,A$j){var A$w=A$h.stage,A$T=laya.utils.Utils.getGlobalPosAndScale(A$C),A$G=A$w._canvasTransform.clone(),A$o=A$G.tx,A$U=A$G.ty;A$G.rotate(-Math.PI/180*A$h.stage.canvasDegree),A$G.scale(A$h.stage.clientScaleX,A$h.stage.clientScaleY);var A$t=A$h.stage.canvasDegree%180!=0,A$I=NaN,A$e=NaN;A$t?(A$I=A$j+A$T.y,A$e=A$R+A$T.x,A$I*=A$G.d,A$e*=A$G.a,90==A$h.stage.canvasDegree?(A$I=A$o-A$I,A$e+=A$U):(A$I+=A$o,A$e=A$U-A$e)):(A$I=A$R+A$T.x,A$e=A$j+A$T.y,A$I*=A$G.a,A$e*=A$G.d,A$I+=A$o,A$e+=A$U);var A$H=NaN,A$M=NaN;return A$M=A$t?(A$H=A$G.d*A$T.height,A$G.a*A$T.width):(A$H=A$G.a*A$T.width,A$G.d*A$T.height),{x:A$I,y:A$e,scaleX:A$H,scaleY:A$M}},A$U.fitDOMElementInArea=function(A$C,A$R,A$j,A$w,A$T,A$G){A$C._fitLayaAirInitialized||(A$C._fitLayaAirInitialized=!0,A$C.style.transformOrigin=A$C.style.webKittransformOrigin="left top",A$C.style.position="absolute");var A$o=A$U.getTransformRelativeToWindow(A$R,A$j,A$w);A$C.style.transform=A$C.style.webkitTransform="scale("+A$o.scaleX+","+A$o.scaleY+") rotate("+A$h.stage.canvasDegree+"deg)",A$C.style.width=A$T+"px",A$C.style.height=A$G+"px",A$C.style.left=A$o.x+"px",A$C.style.top=A$o.y+"px"},A$U.isOkTextureList=function(A$C){if(!A$C)return!1;var A$R,A$j=0,A$w=A$C.length;for(A$j=0;A$j<A$w;A$j++)if(!(A$R=A$C[A$j])||!A$R.source)return!1;return!0},A$U.isOKCmdList=function(A$C){if(!A$C)return!1;var A$R,A$j,A$w=0,A$T=A$C.length,A$G=A$a._context;for(A$w=0;A$w<A$T;A$w++)switch((A$R=A$C[A$w]).callee){case A$G._drawTexture:case A$G._fillTexture:case A$G._drawTextureWithTransform:if(!(A$j=A$R[0])||!A$j.source)return!1}return!0},A$U._gid=1,A$U._pi=180/Math.PI,A$U._pi2=Math.PI/180,A$U._extReg=/\.(\w+)\??/g,A$U.parseXMLFromString=function(A$C){var A$R;if(A$C=A$C.replace(/>\s+</g,"><"),-1<(A$R=(new DOMParser).parseFromString(A$C,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(A$R.firstChild.firstChild.textContent);return A$R},A$U}(),A$O=function(){function A$C(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],A$a.isWebGL&&A$l.regCacheByFunction(A$d.bind(this.startDispose,this),A$d.bind(this.getCacheList,this))}A$e(A$C,"laya.utils.VectorGraphManager");var A$R=A$C.prototype;return A$R.getId=function(){return this._id++},A$R.addShape=function(A$C,A$R){this.shapeDic[A$C]=A$R,this.useDic[A$C]||(this.useDic[A$C]=!0)},A$R.addLine=function(A$C,A$R){this.shapeLineDic[A$C]=A$R,this.shapeLineDic[A$C]||(this.shapeLineDic[A$C]=!0)},A$R.getShape=function(A$C){this._checkKey&&null!=this.useDic[A$C]&&(this.useDic[A$C]=!0)},A$R.deleteShape=function(A$C){this.shapeDic[A$C]&&(this.shapeDic[A$C]=null,delete this.shapeDic[A$C]),this.shapeLineDic[A$C]&&(this.shapeLineDic[A$C]=null,delete this.shapeLineDic[A$C]),null!=this.useDic[A$C]&&delete this.useDic[A$C]},A$R.getCacheList=function(){var A$C,A$R=[];for(A$C in this.shapeDic)A$R.push(this.shapeDic[A$C]);for(A$C in this.shapeLineDic)A$R.push(this.shapeLineDic[A$C]);return A$R},A$R.startDispose=function(A$C){var A$R;for(A$R in this.useDic)this.useDic[A$R]=!1;this._checkKey=!0},A$R.endDispose=function(){if(this._checkKey){var A$C;for(A$C in this.useDic)this.useDic[A$C]||this.deleteShape(A$C);this._checkKey=!1}},A$C.getInstance=function(){return A$C.instance=A$C.instance||new A$C},A$C.instance=null,A$C}(),A$q=function(){function A$w(){this._obj=null,this._obj=A$w.supportWeakMap?new A$V.window.WeakMap:{},A$w.supportWeakMap||A$w._maps.push(this)}A$e(A$w,"laya.utils.WeakObject");var A$C=A$w.prototype;return A$C.set=function(A$C,A$R){if(null!=A$C)if(A$w.supportWeakMap){var A$j=A$C;"string"!=typeof A$C&&"number"!=typeof A$C||(A$j=A$w._keys[A$C])||(A$j=A$w._keys[A$C]={k:A$C}),this._obj.set(A$j,A$R)}else"string"==typeof A$C||"number"==typeof A$C?this._obj[A$C]=A$R:(A$C.$_GID||(A$C.$_GID=A$d.getGID()),this._obj[A$C.$_GID]=A$R)},A$C.get=function(A$C){if(null==A$C)return null;if(A$w.supportWeakMap){var A$R="string"==typeof A$C||"number"==typeof A$C?A$w._keys[A$C]:A$C;return A$R?this._obj.get(A$R):null}return"string"==typeof A$C||"number"==typeof A$C?this._obj[A$C]:this._obj[A$C.$_GID]},A$C.del=function(A$C){if(null!=A$C)if(A$w.supportWeakMap){var A$R="string"==typeof A$C||"number"==typeof A$C?A$w._keys[A$C]:A$C;if(!A$R)return;this._obj.delete(A$R)}else"string"==typeof A$C||"number"==typeof A$C?delete this._obj[A$C]:delete this._obj[this._obj.$_GID]},A$C.has=function(A$C){if(null==A$C)return!1;if(A$w.supportWeakMap){var A$R="string"==typeof A$C||"number"==typeof A$C?A$w._keys[A$C]:A$C;return this._obj.has(A$R)}return"string"==typeof A$C||"number"==typeof A$C?null!=this._obj[A$C]:null!=this._obj[this._obj.$_GID]},A$w.__init__=function(){(A$w.supportWeakMap=null!=A$V.window.WeakMap)||A$h.timer.loop(A$w.delInterval,null,A$w.clearCache)},A$w.clearCache=function(){for(var A$C=0,A$R=A$w._maps.length;A$C<A$R;A$C++){A$w._maps[A$C]._obj={}}},A$w.supportWeakMap=!1,A$w.delInterval=3e5,A$w._keys={},A$w._maps=[],A$t(A$w,["I",function(){return this.I=new A$w}]),A$w}(),A$v=function(){function A$C(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}A$e(A$C,"laya.utils.WordText");var A$R=A$C.prototype;return A$R.setText=function(A$C){this.changed=!0,this._text=A$C},A$R.toString=function(){return this._text},A$R.charCodeAt=function(A$C){return this._text?this._text.charCodeAt(A$C):NaN},A$R.charAt=function(A$C){return this._text?this._text.charAt(A$C):null},A$F(0,A$R,"length",function(){return this._text?this._text.length:0}),A$C}(),A$CC=function(A$C){function A$o(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,A$o.__super.call(this),this._childs=A$o.ARRAY_EMPTY,this._$P=A$o.PROP_EMPTY,this.timer=A$h.scaleTimer,this.conchModel=A$a.isConchNode?this.createConchModel():null}A$e(A$o,"laya.display.Node",A$I);var A$R=A$o.prototype;return A$R._setBit=function(A$C,A$R){1==A$C&&(this._getBit(A$C)!=A$R&&this._updateDisplayedInstage());A$R?this._bits|=A$C:this._bits&=~A$C},A$R._getBit=function(A$C){return 0!=(this._bits&A$C)},A$R._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},A$R._setUpNoticeType=function(A$C){var A$R=this;for(A$R._setBit(A$C,!0),A$R=A$R.parent;A$R;){if(A$R._getBit(A$C))return;A$R._setBit(A$C,!0),A$R=A$R.parent}},A$R.on=function(A$C,A$R,A$j,A$w){return"display"!==A$C&&"undisplay"!==A$C||this._getBit(1)||this._setUpNoticeType(1),this._createListener(A$C,A$R,A$j,A$w,!1)},A$R.once=function(A$C,A$R,A$j,A$w){return"display"!==A$C&&"undisplay"!==A$C||this._getBit(1)||this._setUpNoticeType(1),this._createListener(A$C,A$R,A$j,A$w,!0)},A$R.createConchModel=function(){return null},A$R.destroy=function(A$C){void 0===A$C&&(A$C=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(A$C?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},A$R.destroyChildren=function(){if(this._childs)for(var A$C=this._childs.length-1;-1<A$C;A$C--)this._childs[A$C].destroy(!0)},A$R.addChild=function(A$C){if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),A$C._parent===this){var A$R=this.getChildIndex(A$C);A$R!==this._childs.length-1&&(this._childs.splice(A$R,1),this._childs.push(A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1)),this._childChanged())}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1),(A$C.parent=this)._childChanged();return A$C},A$R.addChildren=function(A$C){for(var A$R=arguments,A$j=0,A$w=A$R.length;A$j<A$w;)this.addChild(A$R[A$j++])},A$R.addChildAt=function(A$C,A$R){if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),0<=A$R&&A$R<=this._childs.length){if(A$C._parent===this){var A$j=this.getChildIndex(A$C);this._childs.splice(A$j,1),this._childs.splice(A$R,0,A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,A$R)),this._childChanged()}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(A$R,0,A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,A$R),A$C.parent=this;return A$C}throw new Error("appendChildAt:The index is out of bounds")},A$R.getChildIndex=function(A$C){return this._childs.indexOf(A$C)},A$R.getChildByName=function(A$C){var A$R=this._childs;if(A$R)for(var A$j=0,A$w=A$R.length;A$j<A$w;A$j++){var A$T=A$R[A$j];if(A$T.name===A$C)return A$T}return null},A$R._get$P=function(A$C){return this._$P[A$C]},A$R._set$P=function(A$C,A$R){return this.destroyed||(this._$P===A$o.PROP_EMPTY&&(this._$P={}),this._$P[A$C]=A$R),A$R},A$R.getChildAt=function(A$C){return this._childs[A$C]},A$R.setChildIndex=function(A$C,A$R){var A$j=this._childs;if(A$R<0||A$R>=A$j.length)throw new Error("setChildIndex:The index is out of bounds.");var A$w=this.getChildIndex(A$C);if(A$w<0)throw new Error("setChildIndex:node is must child of this object.");return A$j.splice(A$w,1),A$j.splice(A$R,0,A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,A$R)),this._childChanged(),A$C},A$R._childChanged=function(A$C){},A$R.removeChild=function(A$C){if(!this._childs)return A$C;var A$R=this._childs.indexOf(A$C);return this.removeChildAt(A$R)},A$R.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},A$R.removeChildByName=function(A$C){var A$R=this.getChildByName(A$C);return A$R&&this.removeChild(A$R),A$R},A$R.removeChildAt=function(A$C){var A$R=this.getChildAt(A$C);if(A$R){for(var A$j=this._childs.length-1,A$w=A$C;A$w<A$j;++A$w)this._childs[A$w]=this._childs[A$w+1];this._childs.length=A$j,this.conchModel&&this.conchModel.removeChild(A$R.conchModel),A$R.parent=null}return A$R},A$R.removeChildren=function(A$C,A$R){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=2147483647),this._childs&&0<this._childs.length){var A$j=this._childs;if(0===A$C&&A$G<=A$R){var A$w=A$j;this._childs=A$o.ARRAY_EMPTY}else A$w=A$j.splice(A$C,A$R-A$C);for(var A$T=0,A$G=A$w.length;A$T<A$G;A$T++)A$w[A$T].parent=null,this.conchModel&&this.conchModel.removeChild(A$w[A$T].conchModel)}return this},A$R.replaceChild=function(A$C,A$R){var A$j=this._childs.indexOf(A$R);return-1<A$j?(this._childs.splice(A$j,1,A$C),this.conchModel&&(this.conchModel.removeChild(A$R.conchModel),this.conchModel.addChildAt(A$C.conchModel,A$j)),A$R.parent=null,A$C.parent=this,A$C):null},A$R._updateDisplayedInstage=function(){var A$C;A$C=this;var A$R=A$h.stage;for(this._displayedInStage=!1;A$C;){if(A$C._getBit(1)){this._displayedInStage=A$C._displayedInStage;break}if(A$C==A$R||A$C._displayedInStage){this._displayedInStage=!0;break}A$C=A$C.parent}},A$R._setDisplay=function(A$C){this._displayedInStage!==A$C&&((this._displayedInStage=A$C)?this.event("display"):this.event("undisplay"))},A$R._displayChild=function(A$C,A$R){var A$j=A$C._childs;if(A$j)for(var A$w=0;A$w<A$j.length;A$w++){var A$T=A$j[A$w];A$T&&A$T._getBit(1)&&(0<A$T._childs.length?this._displayChild(A$T,A$R):A$T._setDisplay(A$R))}A$C._setDisplay(A$R)},A$R.contains=function(A$C){if(A$C===this)return!0;for(;A$C;){if(A$C.parent===this)return!0;A$C=A$C.parent}return!1},A$R.timerLoop=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$T&&(A$T=!0),void 0===A$G&&(A$G=!1),this.timer.loop(A$C,A$R,A$j,A$w,A$T,A$G)},A$R.timerOnce=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=!0),this.timer._create(!1,!1,A$C,A$R,A$j,A$w,A$T)},A$R.frameLoop=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=!0),this.timer._create(!0,!0,A$C,A$R,A$j,A$w,A$T)},A$R.frameOnce=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=!0),this.timer._create(!0,!1,A$C,A$R,A$j,A$w,A$T)},A$R.clearTimer=function(A$C,A$R){this.timer.clear(A$C,A$R)},A$F(0,A$R,"numChildren",function(){return this._childs.length}),A$F(0,A$R,"destroyed",function(){return this._destroyed}),A$F(0,A$R,"parent",function(){return this._parent},function(A$C){this._parent!==A$C&&(A$C?(this._parent=A$C,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),A$C.displayedInStage&&this._displayChild(this,!0)),A$C._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=A$C))}),A$F(0,A$R,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),A$o.ARRAY_EMPTY=[],A$o.PROP_EMPTY={},A$o.NOTICE_DISPLAY=1,A$o.MOUSEENABLE=2,A$o}(),A$RC=function(A$C){function A$M(A$C){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,A$M.__super.call(this),this._padding=A$M._PADDING,this._spacing=A$M._SPACING,this._aligns=A$M._ALIGNS,this._font=A$K.EMPTY,this._ower=A$C}A$e(A$M,"laya.display.css.CSSStyle",A$C);var A$R=A$M.prototype;return A$R.destroy=function(){this._ower=null,this._font=null,this._rect=null},A$R.inherit=function(A$C){this._font=A$C._font,this._spacing=A$C._spacing===A$M._SPACING?A$M._SPACING:A$C._spacing.slice(),this.lineHeight=A$C.lineHeight},A$R._widthAuto=function(){return 0!=(262144&this._type)},A$R.widthed=function(A$C){return 0!=(8&this._type)},A$R._calculation=function(A$C,A$R){if(A$R.indexOf("%")<0)return!1;var A$w=this._ower,A$T=A$w.parent,A$G=this._rect;function A$o(A$C,A$R,A$j){return A$C*A$j[0]+A$R*A$j[1]+A$j[2]}function A$j(A$C){var A$R=A$T.width,A$j=A$w.width;A$G.width&&(A$w.width=A$o(A$R,A$j,A$G.width)),A$G.height&&(A$w.height=A$o(A$R,A$j,A$G.height)),A$G.left&&(A$w.x=A$o(A$R,A$j,A$G.left)),A$G.top&&(A$w.y=A$o(A$R,A$j,A$G.top))}null===A$G&&(A$T._getCSSStyle()._type|=524288,A$T.on("resize",this,A$j),this._rect=A$G={input:{}});var A$U=A$R.split(" ");return A$U[0]=parseFloat(A$U[0])/100,1==A$U.length?A$U[1]=A$U[2]=0:(A$U[1]=parseFloat(A$U[1])/100,A$U[2]=parseFloat(A$U[2])),A$G[A$C]=A$U,A$G.input[A$C]=A$R,A$j(),!0},A$R.heighted=function(A$C){return 0!=(8192&this._type)},A$R.size=function(A$C,A$R){var A$j=this._ower,A$w=!1;-1!==A$C&&A$C!=this._ower.width&&(this._type|=8,this._ower.width=A$C,A$w=!0),-1!==A$R&&A$R!=this._ower.height&&(this._type|=8192,this._ower.height=A$R,A$w=!0),A$w&&(A$j._layoutLater(),524288&this._type&&A$j.event("resize",this))},A$R._getAlign=function(){return this._aligns[0]},A$R._getValign=function(){return this._aligns[1]},A$R._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},A$R._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new A$K(this._font))},A$R.render=function(A$C,A$R,A$j,A$w){var A$T=A$C.width,A$G=A$C.height;A$j-=A$C.pivotX,A$w-=A$C.pivotY,this._bgground&&null!=this._bgground.color&&A$R.ctx.fillRect(A$j,A$w,A$T,A$G,this._bgground.color),this._border&&this._border.color&&A$R.drawRect(A$j,A$w,A$T,A$G,this._border.color.strColor,this._border.size)},A$R.getCSSStyle=function(){return this},A$R.cssText=function(A$C){this.attrs(A$M.parseOneCSS(A$C,";"))},A$R.attrs=function(A$C){if(A$C)for(var A$R=0,A$j=A$C.length;A$R<A$j;A$R++){var A$w=A$C[A$R];this[A$w[0]]=A$w[1]}},A$R.setTransform=function(A$C){"none"===A$C?this._tf=A$U._TF_EMPTY:this.attrs(A$M.parseOneCSS(A$C,","))},A$R.translate=function(A$C,A$R){this._tf===A$U._TF_EMPTY&&(this._tf=new A$T),this._tf.translateX=A$C,this._tf.translateY=A$R},A$R.scale=function(A$C,A$R){this._tf===A$U._TF_EMPTY&&(this._tf=new A$T),this._tf.scaleX=A$C,this._tf.scaleY=A$R},A$R._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},A$F(0,A$R,"block",A$C.prototype._$get_block,function(A$C){A$C?this._type|=1:this._type&=-2}),A$F(0,A$R,"valign",function(){return A$M._valigndef[this._aligns[1]]},function(A$C){this._aligns===A$M._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=A$M._valigndef[A$C]}),A$F(0,A$R,"height",null,function(A$C){if(this._type|=8192,"string"==typeof A$C){if(this._calculation("height",A$C))return;A$C=parseInt(A$C)}this.size(-1,A$C)}),A$F(0,A$R,"width",null,function(A$C){if(this._type|=8,"string"==typeof A$C){var A$R=A$C.indexOf("auto");if(0<=A$R&&(this._type|=262144,A$C=A$C.substr(0,A$R)),this._calculation("width",A$C))return;A$C=parseInt(A$C)}this.size(A$C,-1)}),A$F(0,A$R,"fontWeight",function(){return this._font.weight},function(A$C){this._createFont().weight=A$C}),A$F(0,A$R,"left",null,function(A$C){var A$R=this._ower;if("string"==typeof A$C){if("center"===A$C?A$C="50% -50% 0":"right"===A$C&&(A$C="100% -100% 0"),this._calculation("left",A$C))return;A$C=parseInt(A$C)}A$R.x=A$C}),A$F(0,A$R,"_translate",null,function(A$C){this.translate(A$C[0],A$C[1])}),A$F(0,A$R,"absolute",function(){return 0!=(4&this._type)}),A$F(0,A$R,"top",null,function(A$C){var A$R=this._ower;if("string"==typeof A$C){if("middle"===A$C?A$C="50% -50% 0":"bottom"===A$C&&(A$C="100% -100% 0"),this._calculation("top",A$C))return;A$C=parseInt(A$C)}A$R.y=A$C}),A$F(0,A$R,"align",function(){return A$M._aligndef[this._aligns[0]]},function(A$C){this._aligns===A$M._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=A$M._aligndef[A$C]}),A$F(0,A$R,"bold",function(){return this._font.bold},function(A$C){this._createFont().bold=A$C}),A$F(0,A$R,"padding",function(){return this._padding},function(A$C){this._padding=A$C}),A$F(0,A$R,"leading",function(){return this._spacing[1]},function(A$C){"string"==typeof A$C&&(A$C=parseInt(A$C+"")),this._spacing===A$M._SPACING&&(this._spacing=[0,0]),this._spacing[1]=A$C}),A$F(0,A$R,"lineElement",function(){return 0!=(65536&this._type)},function(A$C){A$C?this._type|=65536:this._type&=-65537}),A$F(0,A$R,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(A$C){this.lineElement=!1,"right"===A$C?this._type|=32768:this._type&=-32769}),A$F(0,A$R,"textDecoration",function(){return this._font.decoration},function(A$C){this._createFont().decoration=A$C}),A$F(0,A$R,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(A$C){"nowrap"===A$C&&(this._type|=131072),"none"===A$C&&(this._type&=-131073)}),A$F(0,A$R,"background",null,function(A$C){A$C?(this._bgground||(this._bgground={}),this._bgground.color=A$C,this._ower.conchModel&&this._ower.conchModel.bgColor(A$C),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),A$F(0,A$R,"wordWrap",function(){return 0==(131072&this._type)},function(A$C){A$C?this._type&=-131073:this._type|=131072}),A$F(0,A$R,"color",function(){return this._font.color},function(A$C){this._createFont().color=A$C}),A$F(0,A$R,"password",function(){return this._font.password},function(A$C){this._createFont().password=A$C}),A$F(0,A$R,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(A$C){"none"===A$C?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=A$C),this._ower.conchModel&&this._ower.conchModel.bgColor(A$C),this._ower._renderType|=256}),A$F(0,A$R,"font",function(){return this._font.toString()},function(A$C){this._createFont().set(A$C)}),A$F(0,A$R,"weight",null,function(A$C){this._createFont().weight=A$C}),A$F(0,A$R,"letterSpacing",function(){return this._spacing[0]},function(A$C){"string"==typeof A$C&&(A$C=parseInt(A$C+"")),this._spacing===A$M._SPACING&&(this._spacing=[0,0]),this._spacing[0]=A$C}),A$F(0,A$R,"fontSize",function(){return this._font.size},function(A$C){this._createFont().size=A$C}),A$F(0,A$R,"italic",function(){return this._font.italic},function(A$C){this._createFont().italic=A$C}),A$F(0,A$R,"fontFamily",function(){return this._font.family},function(A$C){this._createFont().family=A$C}),A$F(0,A$R,"stroke",function(){return this._font.stroke[0]},function(A$C){this._createFont().stroke===A$K._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=A$C}),A$F(0,A$R,"strokeColor",function(){return this._font.stroke[1]},function(A$C){this._createFont().stroke===A$K._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=A$C}),A$F(0,A$R,"border",function(){return this._border?this._border.value:""},function(A$C){if("none"!=A$C){this._border||(this._border={});var A$R=(this._border.value=A$C).split(" ");if(this._border.color=A$B.create(A$R[A$R.length-1]),1==A$R.length)return this._border.size=1,void(this._border.type="solid");var A$j=0;0<A$R[0].indexOf("px")?(this._border.size=parseInt(A$R[0]),A$j++):this._border.size=1,this._border.type=A$R[A$j],this._ower._renderType|=256}else this._border=null}),A$F(0,A$R,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(A$C){A$C?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==A$C?null:A$B.create(A$C),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),A$F(0,A$R,"position",function(){return 4&this._type?"absolute":""},function(A$C){"absolute"==A$C?this._type|=4:this._type&=-5}),A$F(0,A$R,"display",null,function(A$C){switch(A$C){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),A$F(0,A$R,"paddingLeft",function(){return this.padding[3]}),A$F(0,A$R,"paddingTop",function(){return this.padding[0]}),A$F(0,A$R,"_scale",null,function(A$C){this._ower.scale(A$C[0],A$C[1])}),A$F(0,A$R,"_rotate",null,function(A$C){this._ower.rotation=A$C}),A$M.parseOneCSS=function(A$C,A$R){for(var A$j,A$w=[],A$T=A$C.split(A$R),A$G=0,A$o=A$T.length;A$G<A$o;A$G++){var A$U=A$T[A$G],A$t=A$U.indexOf(":"),A$I=A$U.substr(0,A$t).replace(/^\s+|\s+$/g,"");if(0!=A$I.length){var A$e=A$U.substr(A$t+1).replace(/^\s+|\s+$/g,""),A$H=[A$I,A$e];switch(A$I){case"italic":case"bold":A$H[1]="true"==A$e;break;case"line-height":A$H[0]="lineHeight",A$H[1]=parseInt(A$e);break;case"font-size":A$H[0]="fontSize",A$H[1]=parseInt(A$e);break;case"padding":1<(A$j=A$e.split(" ")).length||(A$j[1]=A$j[2]=A$j[3]=A$j[0]),A$H[1]=[parseInt(A$j[0]),parseInt(A$j[1]),parseInt(A$j[2]),parseInt(A$j[3])];break;case"rotate":A$H[0]="_rotate",A$H[1]=parseFloat(A$e);break;case"scale":A$j=A$e.split(" "),A$H[0]="_scale",A$H[1]=[parseFloat(A$j[0]),parseFloat(A$j[1])];break;case"translate":A$j=A$e.split(" "),A$H[0]="_translate",A$H[1]=[parseInt(A$j[0]),parseInt(A$j[1])];break;default:(A$H[0]=A$M._CSSTOVALUE[A$I])||(A$H[0]=A$I)}A$w.push(A$H)}}return A$w},A$M.parseCSS=function(A$C,A$R){for(var A$j;null!=(A$j=A$M._parseCSSRegExp.exec(A$C));)A$M.styleSheets[A$j[1]]=A$M.parseOneCSS(A$j[2],";")},A$M.EMPTY=new A$M(null),A$M._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},A$M._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),A$M._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},A$M._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},A$M.styleSheets={},A$M.ALIGN_CENTER=1,A$M.ALIGN_RIGHT=2,A$M.VALIGN_MIDDLE=1,A$M.VALIGN_BOTTOM=2,A$M._CSS_BLOCK=1,A$M._DISPLAY_NONE=2,A$M._ABSOLUTE=4,A$M._WIDTH_SET=8,A$M._PADDING=[0,0,0,0],A$M._RECT=[-1,-1,-1,-1],A$M._SPACING=[0,0],A$M._ALIGNS=[0,0,0],A$M.ADDLAYOUTED=512,A$M._NEWFONT=4096,A$M._HEIGHT_SET=8192,A$M._BACKGROUND_SET=16384,A$M._FLOAT_RIGHT=32768,A$M._LINE_ELEMENT=65536,A$M._NOWARP=131072,A$M._WIDTHAUTO=262144,A$M._LISTERRESZIE=524288,A$M}(A$U),A$jC=function(A$C){function A$o(){this.url=null,this.audio=null,this.loaded=!1,A$o.__super.call(this)}A$e(A$o,"laya.media.h5audio.AudioSound",A$I);var A$R=A$o.prototype;return A$R.dispose=function(){var A$C=A$o._audioCache[this.url];A$C&&(A$C.src="",delete A$o._audioCache[this.url])},A$R.load=function(A$C){var A$R;if(A$C=A$N.formatURL(A$C),(this.url=A$C)==A$r._tMusic?(A$o._initMusicAudio(),(A$R=A$o._musicAudio).src!=A$C&&(A$o._audioCache[A$R.src]=null,A$R=null)):A$R=A$o._audioCache[A$C],A$R&&2<=A$R.readyState)this.event("complete");else{A$R||(A$R=A$C==A$r._tMusic?(A$o._initMusicAudio(),A$o._musicAudio):A$V.createElement("audio"),(A$o._audioCache[A$C]=A$R).src=A$C),A$R.addEventListener("canplaythrough",A$w),A$R.addEventListener("error",A$T);var A$j=this;(this.audio=A$R).load?A$R.load():A$T()}function A$w(){A$G(),A$j.loaded=!0,A$j.event("complete")}function A$T(){A$R.load=null,A$G(),A$j.event("error")}function A$G(){A$R.removeEventListener("canplaythrough",A$w),A$R.removeEventListener("error",A$T)}},A$R.play=function(A$C,A$R,A$j){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),!this.url)return null;var A$w,A$T;if(!(A$w=this.url==A$r._tMusic?A$o._musicAudio:A$o._audioCache[this.url]))return null;A$T=A$s.getItem("audio:"+this.url),A$a.isConchApp?A$T||((A$T=A$V.createElement("audio")).src=this.url):this.url==A$r._tMusic?(A$o._initMusicAudio(),(A$T=A$o._musicAudio).src=this.url):A$T=A$T||A$w.cloneNode(!0);var A$G=new A$MC(A$T);return A$G.url=this.url,A$G.loops=A$R,A$G.startTime=A$C,A$G.startHandler=A$j,A$G.play(!1),A$r.addChannel(A$G),A$G},A$F(0,A$R,"duration",function(){var A$C;return(A$C=A$o._audioCache[this.url])?A$C.duration:0}),A$o._initMusicAudio=function(){A$o._musicAudio||(A$o._musicAudio||(A$o._musicAudio=A$V.createElement("audio")),A$a.isConchApp||A$V.document.addEventListener("mousedown",A$o._makeMusicOK))},A$o._makeMusicOK=function(){A$V.document.removeEventListener("mousedown",A$o._makeMusicOK),A$o._musicAudio.src?A$o._musicAudio.play():(A$o._musicAudio.src="",A$o._musicAudio.load())},A$o._audioCache={},A$o._musicAudio=null,A$o}(),A$wC=function(A$C){function A$R(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,A$R.__super.call(this)}A$e(A$R,"laya.media.SoundChannel",A$I);var A$j=A$R.prototype;return A$j.play=function(){},A$j.stop=function(){},A$j.pause=function(){},A$j.resume=function(){},A$j.__runComplete=function(A$C){A$C&&A$C.run()},A$F(0,A$j,"volume",function(){return 1},function(A$C){}),A$F(0,A$j,"position",function(){return 0}),A$F(0,A$j,"duration",function(){return 0}),A$R}(),A$TC=function(A$C){function A$R(){A$R.__super.call(this)}A$e(A$R,"laya.media.Sound",A$I);var A$j=A$R.prototype;return A$j.load=function(A$C){},A$j.play=function(A$C,A$R,A$j){return void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),null},A$j.dispose=function(){},A$F(0,A$j,"duration",function(){return 0}),A$R}(),A$GC=function(A$C){function A$T(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,A$T.__super.call(this)}A$e(A$T,"laya.media.webaudio.WebAudioSound",A$I);var A$R=A$T.prototype;return A$R.load=function(A$C){this.url=A$C,this.audioBuffer=A$T._dataCache[A$C],this.audioBuffer?this._loaded(this.audioBuffer):(A$T.e.on("loaded:"+A$C,this,this._loaded),A$T.e.on("err:"+A$C,this,this._err),A$T.__loadingSound[A$C]||(A$T.__loadingSound[A$C]=!0,A$h.loader.load(A$C,A$Z.create(this,this.onloaded),null,A$UC.BUFFER,4,!1,null,!0)))},A$R.onloaded=function(A$C){A$C||this._err(),this._disposed?this._removeLoadEvents():(this.data=A$C,A$T.buffs.push({buffer:this.data,url:this.url}),A$T.decode())},A$R._err=function(){if(this._removeLoadEvents(),A$T.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var A$C,A$R,A$j,A$w=0;for(A$C=(A$R=this.__toPlays).length,A$w=0;A$w<A$C;A$w++)(A$j=A$R[A$w])[3]&&!A$j[3].isStopped&&A$j[3].event("error");this.__toPlays.length=0}},A$R._loaded=function(A$C){this._removeLoadEvents(),this._disposed||(this.audioBuffer=A$C,this.loaded=!0,this.event("complete"))},A$R._removeLoadEvents=function(){A$T.e.off("loaded:"+this.url,this,this._loaded),A$T.e.off("err:"+this.url,this,this._err)},A$R.__playAfterLoaded=function(){if(this.__toPlays){var A$C,A$R,A$j,A$w=0;for(A$C=(A$R=this.__toPlays).length,A$w=0;A$w<A$C;A$w++)(A$j=A$R[A$w])[3]&&!A$j[3].isStopped&&this.play(A$j[0],A$j[1],A$j[2],A$j[3]);this.__toPlays.length=0}},A$R.play=function(A$C,A$R,A$j,A$w){return void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),A$w=A$w||new A$KC,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([A$C,A$R,A$j,A$w]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),A$w.url=this.url,A$w.loops=A$R,A$w.audioBuffer=this.audioBuffer,A$w.startTime=A$C,A$w.startHandler=A$j,A$w.play(!1),A$r.addChannel(A$w),A$w},A$R.dispose=function(){this._disposed=!0,delete A$T._dataCache[this.url],delete A$T.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},A$F(0,A$R,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),A$T.decode=function(){if(!(A$T.buffs.length<=0||A$T.isDecoding))if(A$T.isDecoding=!0,(A$T.tInfo=A$T.buffs.shift())&&A$T.tInfo.buffer&&A$T.tInfo.buffer.byteLength)try{A$T.ctx.decodeAudioData(A$T.tInfo.buffer,A$T._done,A$T._fail)}catch(A$C){console.error("decodeAudioData error  byteLength:"+A$T.tInfo.buffer.byteLength+"  url:"+A$T.tInfo.url)}else A$T._fail()},A$T._done=function(A$C){A$T.e.event("loaded:"+A$T.tInfo.url,A$C),A$T._dataCache[A$T.tInfo.url]=A$C,A$T.isDecoding=!1,A$T.decode()},A$T._fail=function(){A$T.e.event("err:"+A$T.tInfo.url,null),A$T.isDecoding=!1,A$T.decode()},A$T._playEmptySound=function(){if(null!=A$T.ctx){if(A$T._emptySource&&(A$T._emptySource.stop(),A$T._emptySource.disconnect(0),!A$KC._tryCleanFailed))try{A$T._emptySource.buffer=null}catch(A$C){A$KC._tryCleanFailed=!0}var A$C=A$T.ctx.createBufferSource();A$C.buffer=A$T._miniBuffer,A$C.connect(A$T.ctx.destination),A$C.start(0,0,0),A$T._emptySource=A$C}},A$T._unlock=function(){A$T._unlocked||(A$T._playEmptySound(),"running"==A$T.ctx.state?(A$V.document.removeEventListener("mousedown",A$T._unlock,!0),A$V.document.removeEventListener("touchend",A$T._unlock,!0),A$V.document.removeEventListener("touchstart",A$T._unlock,!0),A$T._unlocked=!0):"suspended"==A$T.ctx.state&&A$r._recoverWebAudio())},A$T.initWebAudio=function(){"running"!=A$T.ctx.state&&(A$T._unlock(),A$V.document.addEventListener("mousedown",A$T._unlock,!0),A$V.document.addEventListener("touchend",A$T._unlock,!0),A$V.document.addEventListener("touchstart",A$T._unlock,!0))},A$T._emptySource=null,A$T._dataCache={},A$T.buffs=[],A$T.isDecoding=!1,A$T._unlocked=!1,A$T.tInfo=null,A$T.__loadingSound={},A$t(A$T,["window",function(){return this.window=A$V.window},"webAudioEnabled",function(){return this.webAudioEnabled=A$T.window.AudioContext||A$T.window.webkitAudioContext||A$T.window.mozAudioContext},"ctx",function(){return this.ctx=A$T.webAudioEnabled?new(A$T.window.AudioContext||A$T.window.webkitAudioContext||A$T.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=A$T.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new A$I}]),A$T}(),A$oC=function(A$C){function A$R(){this._responseType=null,this._data=null,A$R.__super.call(this),this._http=new A$V.window.XMLHttpRequest}A$e(A$R,"laya.net.HttpRequest",A$I);var A$j=A$R.prototype;return A$j.send=function(A$C,A$R,A$j,A$w,A$T){void 0===A$j&&(A$j="get"),void 0===A$w&&(A$w="text"),this._responseType=A$w,this._data=null;var A$G=this,A$o=this._http;if(A$o.open(A$j,A$C,!0),A$T)for(var A$U=0;A$U<A$T.length;A$U++)A$o.setRequestHeader(A$T[A$U++],A$T[A$U]);else A$a.isConchApp||(A$R&&"string"!=typeof A$R?A$o.setRequestHeader("Content-Type","application/json"):A$o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));A$o.responseType="arraybuffer"!==A$w?"text":"arraybuffer",A$o.onerror=function(A$C){A$G._onError(A$C)},A$o.onabort=function(A$C){A$G._onAbort(A$C)},A$o.onprogress=function(A$C){A$G._onProgress(A$C)},A$o.onload=function(A$C){A$G._onLoad(A$C)},A$o.send(A$R)},A$j._onProgress=function(A$C){A$C&&A$C.lengthComputable&&this.event("progress",A$C.loaded/A$C.total)},A$j._onAbort=function(A$C){this.error("Request was aborted by user")},A$j._onError=function(A$C){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},A$j._onLoad=function(A$C){var A$R=this._http,A$j=void 0!==A$R.status?A$R.status:200;200===A$j||204===A$j||0===A$j?this.complete():this.error("["+A$R.status+"]"+A$R.statusText+":"+A$R.responseURL)},A$j.error=function(A$C){this.clear(),this.event("error",A$C)},A$j.complete=function(){this.clear();var A$R=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=A$d.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(A$C){A$R=!1,this.error(A$C.message)}A$R&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},A$j.clear=function(){var A$C=this._http;A$C.onerror=A$C.onabort=A$C.onprogress=A$C.onload=null},A$F(0,A$j,"url",function(){return this._http.responseURL}),A$F(0,A$j,"http",function(){return this._http}),A$F(0,A$j,"data",function(){return this._data}),A$R}(),A$UC=function(A$C){function A$$(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,A$$.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}A$e(A$$,"laya.net.Loader",A$I);var A$R=A$$.prototype;return A$R.load=function(A$C,A$R,A$j,A$w,A$T){if(A$C&&""!=A$C||console.error("Loader 加载的url不合法 "+A$C),void 0===A$j&&(A$j=!0),void 0===A$T&&(A$T=!1),0===(this._url=A$C).indexOf("data:image")?this._type=A$R="image":this._type=A$R||(A$R=this.getTypeFromUrl(A$C)),this._cache=A$j,this._data=null,!A$T&&A$$.loadedMap[A$C])return this._data=A$$.loadedMap[A$C],this.event("progress",1),void this.event("complete",this._data);if(A$w&&A$$.setGroup(A$C,A$w),null!=A$$.parserMap[A$R])return this._customParse=!0,void(A$$.parserMap[A$R]instanceof laya.utils.Handler?A$$.parserMap[A$R].runWith(this):A$$.parserMap[A$R].call(null,this));if("image"===A$R||"htmlimage"===A$R||"nativeimage"===A$R)return this._loadImage(A$C);if("ttf"===A$R)return this._loadTTF(A$C);switch(A$R){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:A$R}A$$.preLoadedMap[A$C]?this.onLoaded(A$$.preLoadedMap[A$C]):A$o.resMgrLoad(A$C,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},A$R.getTypeFromUrl=function(A$C){var A$R=A$d.getFileExtension(A$C);return A$R?A$$.typeMap[A$R]:(console.warn("Not recognize the resources suffix",A$C),"text")},A$R._loadTTF=function(A$C){A$C=A$N.formatURL(A$C);var A$R=new A$J;A$R.complete=A$Z.create(this,this.onLoaded),A$R.load(A$C)},A$R._loadImage=function(A$C){A$o.imgMgrLoad(A$C,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},A$R._loadImageComplete=function(A$C,A$R,A$j){if(null!=A$j)if(A$j instanceof ArrayBuffer){var A$w=new DataView(A$j),A$T=new laya.webgl.resource.WebGLImage(new Uint8Array(A$j,8),A$C,0,!1,A$w.getUint32(0),A$w.getUint32(4));this.onLoaded(A$T)}else if(A$j instanceof A$eC)A$$.imgMgrSet[A$C]=A$R,A$o.imgMgrLock(A$C,A$$.imgMgrSet[A$C]),this._url=A$C,this.complete(A$j);else{var A$G=-1!=A$C.indexOf(".png",A$C.length-4)?6408:6407;A$T=new laya.webgl.resource.WebGLImage(A$j,A$C,A$G,!1,A$j.width,A$j.height);this.onLoaded(A$T)}else this.event("error","Load image failed")},A$R._loadSound=function(A$C){var A$R=new A$r._soundClass,A$j=this;function A$w(){A$R.offAll()}A$R.on("complete",this,function(){A$w(),A$j.onLoaded(A$R)}),A$R.on("error",this,function(){A$w(),A$R.dispose(),A$j.event("error","Load sound failed")}),A$R.load(A$C)},A$R.onProgress=function(A$C){"atlas"===this._type?this.event("progress",.3*A$C):this.event("progress",A$C)},A$R.onError=function(A$C){this.event("error",A$C)},A$R._loadedComplete=function(A$C,A$R,A$j){if(null!=A$j)switch(this._type){case"atlas":case"plf":case"json":var A$w=new A$z(A$j);this.onLoaded(JSON.parse(A$w.readUTFBytes()));break;case"font":A$w=new A$z(A$j);this.onLoaded(A$d.parseXMLFromString(A$w.readUTFBytes()));break;default:this.onLoaded(A$j)}else this.event("error",A$C)},A$R.onLoaded=function(A$C){var A$R=this._type;if("plf"==A$R)this.parsePLFData(A$C),this.complete(A$C);else if("image"===A$R){var A$j=new A$eC(A$C);A$j.url=this._url,this.complete(A$j)}else if("sound"===A$R||"htmlimage"===A$R||"nativeimage"===A$R)this.complete(A$C);else if("atlas"===A$R){if(!A$C.src&&!A$C._setContext){if(!this._data){if((this._data=A$C).meta&&A$C.meta.image)for(var A$w=A$C.meta.image.split(","),A$T=0<=this._url.indexOf("/")?"/":"\\",A$G=this._url.lastIndexOf(A$T),A$o=0<=A$G?this._url.substr(0,A$G+1):"",A$U=0,A$t=A$w.length;A$U<A$t;A$U++)A$w[A$U]=A$o+A$w[A$U];else A$w=[this._url.replace(".json",".png")];A$w.reverse(),A$C.toLoads=A$w,A$C.pics=[]}return this.event("progress",.3+1/A$w.length*.6),this._loadImage(A$w.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(A$C),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var A$I=this._data.frames,A$e=this._url.split("?")[0],A$H=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:A$e.substring(0,A$e.lastIndexOf("."))+"/",A$M=this._data.pics,A$K=A$N.formatURL(this._url),A$F=A$$.atlasMap[A$K]||(A$$.atlasMap[A$K]=[]);A$F.dir=A$H;var A$L=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var A$D in A$L=parseFloat(this._data.meta.scale),A$I){var A$Q,A$Z=A$I[A$D],A$S=A$M[A$Z.frame.idx?A$Z.frame.idx:0],A$b=A$N.formatURL(A$H+A$D);A$S.scaleRate=A$L,A$Q=A$eC.create(A$S,A$Z.frame.x,A$Z.frame.y,A$Z.frame.w,A$Z.frame.h,A$Z.spriteSourceSize.x,A$Z.spriteSourceSize.y,A$Z.sourceSize.w,A$Z.sourceSize.h),A$$.cacheRes(A$b,A$Q),A$$.keepCache(this._url,A$H+A$D),A$Q.url=A$b,A$F.push(A$b)}else for(A$D in A$I)A$S=A$M[(A$Z=A$I[A$D]).frame.idx?A$Z.frame.idx:0],A$b=A$N.formatURL(A$H+A$D),A$$.cacheRes(A$b,A$eC.create(A$S,A$Z.frame.x,A$Z.frame.y,A$Z.frame.w,A$Z.frame.h,A$Z.spriteSourceSize.x,A$Z.spriteSourceSize.y,A$Z.sourceSize.w,A$Z.sourceSize.h)),A$$.loadedMap[A$b].url=A$b,A$$.keepCache(this._url,A$H+A$D),A$F.push(A$b);delete this._data.pics,this.complete(this._data)}else if("font"==A$R){if(!A$C.src)return this._data=A$C,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var A$f=new A$A;A$f.parseFont(this._data,A$C);var A$p=this._url.split(".fnt")[0].split("/"),A$h=A$p[A$p.length-1];A$DC.registerBitmapFont(A$h,A$f),this._data=A$f,this.complete(this._data)}else if("pkm"==A$R){var A$x=A$pC.create(A$C,this._url),A$W=new A$eC(A$x);A$W.url=this._url,this.complete(A$W)}else this.complete(A$C)},A$R.parsePLFData=function(A$C){var A$R,A$j,A$w;for(A$R in A$C)switch(A$w=A$C[A$R],A$R){case"json":case"text":for(A$j in A$w)A$$.preLoadedMap[A$N.formatURL(A$j)]=A$w[A$j];break;default:for(A$j in A$w)A$$.preLoadedMap[A$N.formatURL(A$j)]=A$w[A$j]}},A$R.complete=function(A$C){this._data=A$C,this._customParse?this.event("loaded",A$C instanceof Array?[A$C]:A$C):(A$$._loaders.push(this),A$$._isWorking||A$$.checkNext())},A$R.endLoad=function(A$C){A$C&&(this._data=A$C),this._cache&&A$$.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},A$F(0,A$R,"url",function(){return this._url}),A$F(0,A$R,"data",function(){return this._data}),A$F(0,A$R,"cache",function(){return this._cache}),A$F(0,A$R,"type",function(){return this._type}),A$$.checkNext=function(){A$$._isWorking=!0;for(var A$C=A$V.now();A$$._startIndex<A$$._loaders.length;)if(A$V.now(),A$$._loaders[A$$._startIndex].endLoad(),A$$._startIndex++,A$V.now()-A$C>A$$.maxTimeOut)return console.warn("loader callback cost a long time:"+(A$V.now()-A$C)+" url="+A$$._loaders[A$$._startIndex-1].url),void A$h.timer.frameOnce(1,null,A$$.checkNext);A$$._loaders.length=0,A$$._startIndex=0,A$$._isWorking=!1},A$$.clearRes=function(A$C,A$R){if(null!=A$C){void 0===A$R&&(A$R=!1),A$C=A$N.formatURL(A$C);var A$j=A$$.getAtlas(A$C);if(A$j){for(var A$w=0,A$T=A$j.length;A$w<A$T;A$w++){var A$G=A$j[A$w],A$o=A$$.getRes(A$G);delete A$$.loadedMap[A$G],A$$.clearCache(A$C.substring(A$N.basePath.length),A$G.substring(A$N.basePath.length)),A$o&&A$o.destroy(A$R)}A$j.length=0,delete A$$.atlasMap[A$C],delete A$$.loadedMap[A$C]}else{var A$U=A$$.loadedMap[A$C];A$U&&(delete A$$.loadedMap[A$C],A$U instanceof laya.resource.Texture&&A$U.bitmap&&A$U.destroy(A$R))}}},A$$.clearTextureRes=function(A$C){A$C=A$N.formatURL(A$C);var A$R=laya.net.Loader.getAtlas(A$C),A$j=A$R&&0<A$R.length?laya.net.Loader.getRes(A$R[0]):laya.net.Loader.getRes(A$C);A$j&&A$j.bitmap&&(A$a.isConchApp&&!A$a.isConchWebGL?A$j.bitmap.source.releaseTexture&&A$j.bitmap.source.releaseTexture():null==A$j.bitmap._atlaser&&A$j.bitmap.releaseResource(!0))},A$$.getRes=function(A$C){return A$$.loadedMap[A$N.formatURL(A$C)]},A$$.getAtlas=function(A$C){return A$$.atlasMap[A$N.formatURL(A$C)]},A$$.cacheRes=function(A$C,A$R){A$C=A$N.formatURL(A$C),null!=A$$.loadedMap[A$C]?console.warn("Resources already exist,is repeated loading:",A$C):A$$.loadedMap[A$C]=A$R},A$$.setGroup=function(A$C,A$R){A$$.groupMap[A$R]||(A$$.groupMap[A$R]=[]),A$$.groupMap[A$R].push(A$C)},A$$.clearResByGroup=function(A$C){if(A$$.groupMap[A$C]){var A$R=A$$.groupMap[A$C],A$j=0,A$w=A$R.length;for(A$j=0;A$j<A$w;A$j++)A$$.clearRes(A$R[A$j]);A$R.length=0}},A$$.keepCache=function(A$C,A$R){if(A$C&&A$R){var A$j=A$$.cacheSet[A$R];A$j?-1==A$j.indexOf(A$C)&&A$j.push(A$C):A$$.cacheSet[A$R]=[A$C]}},A$$.clearCache=function(A$C,A$R){if(A$C&&A$R){var A$j=A$$.cacheSet[A$R];if(A$j){var A$w=A$j.indexOf(A$C);if(-1!==A$w){var A$T=A$j.length-1;0==A$T?(delete A$$.cacheSet[A$R],0<A$$.imgMgrSet[A$R]?A$o.imgMgrFree(A$R,A$$.imgMgrSet[A$R]):A$$.clearRes(A$R,!0)):(A$j[A$w]=A$j[A$T],A$j.length=A$T)}}}},A$$.saveObject=function(A$C,A$R,A$j){if(A$R&&A$C){var A$w=A$$.objectSet[A$C];A$w?(console.warn("Loader.saveObject: "+A$C),A$w[0]=A$R,A$w[1]=A$j):A$$.objectSet[A$C]=[A$R,A$j,[]]}},A$$.findObject=function(A$C){if(A$C){var A$R=A$$.objectSet[A$C];if(A$R)return A$R[0]}return null},A$$.keepObject=function(A$C,A$R){if(A$C&&A$R){var A$j=A$$.objectSet[A$R];A$j&&-1===A$j[2].indexOf(A$C)&&A$j[2].push(A$C)}},A$$.clearObject=function(A$C,A$R){if(A$C&&A$R){var A$j=A$$.objectSet[A$R];if(A$j){var A$w=A$j[2],A$T=A$w.indexOf(A$C);if(-1!==A$T){var A$G=A$w.length-1;0==A$G?(delete A$$.objectSet[A$R],A$j[1]&&A$j[1].call(null,A$j[0])):(A$w[A$T]=A$w[A$G],A$w.length=A$G)}}}},A$$.TEXT="text",A$$.JSON="json",A$$.XML="xml",A$$.BUFFER="arraybuffer",A$$.IMAGE="image",A$$.SOUND="sound",A$$.ATLAS="atlas",A$$.FONT="font",A$$.TTF="ttf",A$$.PLF="plf",A$$.PKM="pkm",A$$.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},A$$.parserMap={},A$$.groupMap={},A$$.maxTimeOut=100,A$$.loadedMap={},A$$.preLoadedMap={},A$$.atlasMap={},A$$._loaders=[],A$$._isWorking=!1,A$$._startIndex=0,A$$.imgCache={},A$$.cacheSet={},A$$.objectSet={},A$$.imgMgrSet={},A$$}(),A$tC=function(A$C){var A$M;function A$K(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},A$K.__super.call(this);for(var A$C=0;A$C<this._maxPriority;A$C++)this._resInfos[A$C]=[]}A$e(A$K,"laya.net.LoaderManager",A$I);var A$R=A$K.prototype;return A$R.create=function(A$C,A$j,A$R,A$w,A$T,A$G,A$o,A$U){if(null==A$G&&(A$G=2),null==A$o&&(A$o=!0),A$C instanceof Array){var A$t=A$C,A$I=A$t.length,A$e=0;if(A$R)var A$H=A$Z.create(A$R.caller,A$R.method,A$R.args,!1);for(var A$M=0;A$M<A$I;A$M++){var A$K=A$t[A$M];"string"==typeof A$K&&(A$K=A$t[A$M]={url:A$K}),A$K.progress=0}for(A$M=0;A$M<A$I;A$M++){A$K=A$t[A$M];var A$F=A$R?A$Z.create(null,A$Q,[A$K],!1):null,A$L=A$R||A$j?A$Z.create(null,A$D,[A$K]):null;this._create(A$K.url,A$L,A$F,A$K.clas||A$w,A$K.params||A$T,null!=A$K.priority&&0<=A$K.priority?A$K.priority:A$G,A$o,A$K.group||A$U)}function A$D(A$C,A$R){A$e++,A$C.progress=1,A$e===A$I&&A$j&&A$j.run()}function A$Q(A$C,A$R){A$C.progress=A$R;for(var A$j=0,A$w=0;A$w<A$I;A$w++){A$j+=A$t[A$w].progress}var A$T=A$j/A$I;A$H.runWith(A$T)}return!0}return this._create(A$C,A$j,A$R,A$w,A$T,A$G,A$o,A$U)},A$R._create=function(A$R,A$j,A$C,A$w,A$T,A$G,A$o,A$U){A$R&&""!=A$R||console.error("加载的url不合法 "+A$R),null==A$G&&(A$G=2),null==A$o&&(A$o=!0);var A$t=A$N.formatURL(A$R),A$I=this.getRes(A$t);if(A$I)!A$I.hasOwnProperty("loaded")||A$I.loaded?(A$C&&A$C.runWith(1),A$j&&A$j.run()):A$j&&A$h.loader._createListener(A$R,A$j.caller,A$j.method,A$j.args,!0,!1);else{var A$e=A$d.getFileExtension(A$R),A$H=A$K.createMap[A$e];if(!A$H)throw new Error("LoaderManager:unknown file("+A$R+") extension with: "+A$e+".");A$w||(A$w=A$H[0]);var A$M=A$H[1];if("atlas"==A$e)this.load(A$R,A$j,A$C,A$M,A$G,A$o);else{A$w===A$eC&&(A$M="htmlimage"),(A$I=A$w?new A$w:null).hasOwnProperty("_loaded")&&(A$I._loaded=!1),A$I._setUrl(A$R),A$U&&A$I._setGroup(A$U),this._createLoad(A$I,A$R,A$Z.create(null,function(A$C){A$I&&!A$I.destroyed&&A$C&&A$I.onAsynLoaded.call(A$I,A$R,A$C,A$T),A$j&&A$j.run();A$h.loader.event(A$R)}),A$C,A$M,A$G,!1,A$U,!0),A$o&&this.cacheRes(A$t,A$I)}}return A$I},A$R.load=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){A$C&&""!=A$C||console.error("加载的url不合法 "+A$C);var A$t=this;if(null==A$T&&(A$T=2),null==A$G&&(A$G=!0),void 0===A$U&&(A$U=!1),A$C instanceof Array)return this._loadAssets(A$C,A$R,A$j,A$w,A$T,A$G,A$o);var A$I=A$UC.getRes(A$C);if(null!=A$I)A$h.timer.frameOnce(1,null,function(){A$j&&A$j.runWith(1),A$R&&A$R.runWith(A$I),A$t._loaderCount||A$t.event("complete")});else{var A$e=A$K._resMap[A$C];A$e?(A$R&&A$e._createListener("complete",A$R.caller,A$R.method,A$R.args,!1,!1),A$j&&A$e._createListener("progress",A$j.caller,A$j.method,A$j.args,!1,!1)):((A$e=this._infoPool.length?this._infoPool.pop():new A$M).url=A$C,A$e.type=A$w,A$e.cache=A$G,A$e.group=A$o,A$e.ignoreCache=A$U,A$e.priority=A$T,A$R&&A$e.on("complete",A$R.caller,A$R.method,A$R.args),A$j&&A$e.on("progress",A$j.caller,A$j.method,A$j.args),A$K._resMap[A$C]=A$e,A$T=A$T<this._maxPriority?0<=A$T?A$T:0:this._maxPriority-1,this._resInfos[A$T].push(A$e),this._next())}return this},A$R._createLoad=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){var A$I=this;if(null==A$G&&(A$G=2),null==A$o&&(A$o=!0),void 0===A$t&&(A$t=!1),A$R instanceof Array)return this._loadAssets(A$R,A$j,A$w,A$T,A$G,A$o,A$U);var A$e=A$UC.getRes(A$R);if(null!=A$e)A$h.timer.frameOnce(1,null,function(){A$w&&A$w.runWith(1),A$j&&A$j.runWith(A$e),A$I._loaderCount||A$I.event("complete")});else{var A$H=A$K._resMap[A$R];A$H?(A$j&&A$H._createListener("complete",A$j.caller,A$j.method,A$j.args,!1,!1),A$w&&A$H._createListener("progress",A$w.caller,A$w.method,A$w.args,!1,!1)):((A$H=this._infoPool.length?this._infoPool.pop():new A$M).url=A$R,A$H.clas=A$C,A$H.type=A$T,A$H.cache=A$o,A$H.group=A$U,A$H.ignoreCache=A$t,A$H.priority=A$G,A$j&&A$H.on("complete",A$j.caller,A$j.method,A$j.args),A$w&&A$H.on("progress",A$w.caller,A$w.method,A$w.args),A$K._resMap[A$R]=A$H,A$G=A$G<this._maxPriority?0<=A$G?A$G:0:this._maxPriority-1,this._resInfos[A$G].push(A$H),this._next())}return this},A$R._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var A$C=0;A$C<this._maxPriority;A$C++)for(var A$R=this._resInfos[A$C];0<A$R.length;){var A$j=A$R.shift();if(A$j)return this._doLoad(A$j)}this._loaderCount||this.event("complete")}},A$R._doLoad=function(A$R){this._loaderCount++;var A$j=this._loaders.length?this._loaders.pop():new A$UC;A$j.on("complete",null,A$T),A$j.on("progress",null,function(A$C){A$R.event("progress",A$C)}),A$j.on("error",null,function(A$C){A$T(null)});var A$w=this;function A$T(A$C){A$j.offAll(),A$j._data=null,A$j._customParse=!1,A$w._loaders.push(A$j),A$w._endLoad(A$R,A$C instanceof Array?[A$C]:A$C),A$w._loaderCount--,A$w._next()}A$j._class=A$R.clas,1<=A$R.priority?(A$j.priority=A$R.priority,A$j.realTime=!1):(A$j.priority=0,A$j.realTime=!0),A$j.load(A$R.url,A$R.type,A$R.cache,A$R.group,A$R.ignoreCache)},A$R._endLoad=function(A$C,A$R){var A$j=A$C.url;if(null==A$R){var A$w=this._failRes[A$j]||0;if(A$w<this.retryNum)return console.warn("[warn]Retry to load:",A$j),this._failRes[A$j]=A$w+1,void A$h.timer.once(this.retryDelay,this,this._addReTry,[A$C],!1);console.warn("[error]Failed to load:",A$j),this.event("error",A$j)}this._failRes[A$j]&&(this._failRes[A$j]=0),delete A$K._resMap[A$j],A$C.event("complete",A$R),A$C.offAll(),this._infoPool.push(A$C)},A$R._addReTry=function(A$C){this._resInfos[this._maxPriority-1].push(A$C),this._next()},A$R.clearRes=function(A$C,A$R){void 0===A$R&&(A$R=!1),A$UC.clearRes(A$C,A$R)},A$R.getRes=function(A$C){return A$UC.getRes(A$C)},A$R.cacheRes=function(A$C,A$R){A$UC.cacheRes(A$C,A$R)},A$R.clearTextureRes=function(A$C){A$UC.clearTextureRes(A$C)},A$R.setGroup=function(A$C,A$R){A$UC.setGroup(A$C,A$R)},A$R.clearResByGroup=function(A$C){A$UC.clearResByGroup(A$C)},A$R.clearUnLoaded=function(){for(var A$C=0;A$C<this._maxPriority;A$C++){for(var A$R=this._resInfos[A$C],A$j=A$R.length-1;-1<A$j;A$j--){var A$w=A$R[A$j];A$w&&(A$w.offAll(),this._infoPool.push(A$w))}A$R.length=0}this._loaderCount=0,A$K._resMap={}},A$R.cancelLoadByUrls=function(A$C){if(A$C)for(var A$R=0,A$j=A$C.length;A$R<A$j;A$R++)this.cancelLoadByUrl(A$C[A$R])},A$R.cancelLoadByUrl=function(A$C){for(var A$R=0;A$R<this._maxPriority;A$R++)for(var A$j=this._resInfos[A$R],A$w=A$j.length-1;-1<A$w;A$w--){var A$T=A$j[A$w];A$T&&A$T.url===A$C&&(A$j[A$w]=null,A$T.offAll(),this._infoPool.push(A$T))}A$K._resMap[A$C]&&delete A$K._resMap[A$C]},A$R._loadAssets=function(A$C,A$j,A$o,A$R,A$w,A$T,A$G){null==A$w&&(A$w=2),null==A$T&&(A$T=!0);for(var A$U=A$C.length,A$t=0,A$I=0,A$e=[],A$H=!0,A$M=0;A$M<A$U;A$M++){var A$K=A$C[A$M];if(!A$K)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+A$C);"string"==typeof A$K&&(A$K={url:A$K,type:A$R,size:1,priority:A$w}),A$K.size||(A$K.size=1),A$K.progress=0,A$I+=A$K.size,A$e.push(A$K);var A$F=A$o?A$Z.create(null,A$Q,[A$K],!1):null,A$L=A$j||A$o?A$Z.create(null,A$D,[A$K]):null;this.load(A$K.url,A$L,A$F,A$K.type,null!=A$K.priority&&0<=A$K.priority?A$K.priority:2,A$T,A$K.group||A$G)}function A$D(A$C,A$R){A$t++,A$C.progress=1,A$R||(A$H=!1),A$t===A$U&&A$j&&A$j.runWith(A$H)}function A$Q(A$C,A$R){if(null!=A$o){A$C.progress=A$R;for(var A$j=0,A$w=0;A$w<A$e.length;A$w++){var A$T=A$e[A$w];A$j+=A$T.size*A$T.progress}var A$G=A$j/A$I;A$o.runWith(A$G)}}return this},A$K.cacheRes=function(A$C,A$R){A$UC.cacheRes(A$C,A$R)},A$K._resMap={},A$t(A$K,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),A$K.__init$=function(){A$M=function(A$C){function A$R(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,A$R.__super.call(this)}return A$e(A$R,"",A$I),A$R}()},A$K}(),A$IC=(function(A$C){function A$T(A$C){A$T.__super.call(this),A$C||(A$C=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var A$R=0,A$j=0,A$w=0;A$w<20;A$w++)A$w%5!=4?this._mat[A$R++]=A$C[A$w]:this._alpha[A$j++]=A$C[A$w];this._action=A$E.createFilterAction(32),this._action.data=this}A$e(A$T,"laya.filters.ColorFilter",A$Q);var A$R=A$T.prototype;A$h.imps(A$R,{"laya.filters.IFilter":!0}),A$R.callNative=function(A$C){A$C._$P.cf=this;A$C.conchModel&&A$C.conchModel.setFilterMatrix&&A$C.conchModel.setFilterMatrix(this._mat,this._alpha)},A$F(0,A$R,"type",function(){return 32}),A$F(0,A$R,"action",function(){return this._action})}(),function(A$C){function A$w(A$C,A$R,A$j){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===A$R&&(A$R=0),A$w.__super.call(this),this._byteClass=A$j||A$z,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,A$C&&0<A$R&&A$R<65535&&this.connect(A$C,A$R)}A$e(A$w,"laya.net.Socket",A$I);var A$R=A$w.prototype;A$R.connect=function(A$C,A$R){var A$j="ws://"+A$C+":"+A$R;A$j="https:"==A$V.window.location.protocol?"wss://"+A$C+":"+A$R:"ws://"+A$C+":"+A$R,this.connectByUrl(A$j)},A$R.connectByUrl=function(A$C){var A$R=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new A$V.window.WebSocket(A$C,this.protocols):this._socket=new A$V.window.WebSocket(A$C),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(A$C){A$R._onOpen(A$C)},this._socket.onmessage=function(A$C){A$R._onMessage(A$C)},this._socket.onclose=function(A$C){A$R._onClose(A$C)},this._socket.onerror=function(A$C){A$R._onError(A$C)}},A$R.cleanSocket=function(){try{this._socket.close()}catch(A$C){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},A$R.close=function(){if(null!=this._socket)try{this._socket.close()}catch(A$C){}},A$R._onOpen=function(A$C){this._connected=!0,this.event("open",A$C)},A$R._onMessage=function(A$C){if(A$C&&A$C.data){var A$R=A$C.data;if(this.disableInput&&A$R)this.event("message",A$R);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var A$j=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,A$R&&("string"==typeof A$R?this._input.writeUTFBytes(A$R):this._input.writeArrayBuffer(A$R),this._addInputPosition=this._input.pos,this._input.pos=A$j),this.event("message",A$R)}}},A$R._onClose=function(A$C){this._connected=!1,this.event("close",A$C)},A$R._onError=function(A$C){this.event("error",A$C)},A$R.send=function(A$C){this._socket.send(A$C)},A$R.flush=function(){if(this._output&&0<this._output.length){var A$R;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(A$C){A$R=A$C}this._output.endian=this.endian,this._output.clear(),A$R&&this.event("error",A$R)}},A$F(0,A$R,"input",function(){return this._input}),A$F(0,A$R,"output",function(){return this._output}),A$F(0,A$R,"connected",function(){return this._connected}),A$F(0,A$R,"endian",function(){return this._endian},function(A$C){this._endian=A$C,null!=this._input&&(this._input.endian=A$C),null!=this._output&&(this._output.endian=A$C)}),A$w.LITTLE_ENDIAN="littleEndian",A$w.BIG_ENDIAN="bigEndian"}(),function(A$C){function A$U(){A$U.__super.call(this),this._$1__id=++A$U._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(A$U._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,A$k.currentResourceManager&&A$k.currentResourceManager.addResource(this)}A$e(A$U,"laya.resource.Resource",A$I);var A$R=A$U.prototype;return A$h.imps(A$R,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),A$R._setUrl=function(A$C){var A$R;this._url!==A$C&&(this._url&&((A$R=A$U._urlResourcesMap[this._url]).splice(A$R.indexOf(this),1),0===A$R.length&&delete A$U._urlResourcesMap[this._url]),A$C&&((A$R=A$U._urlResourcesMap[A$C])||(A$U._urlResourcesMap[A$C]=A$R=[]),A$R.push(this)),this._url=A$C)},A$R._getGroup=function(){return this._group},A$R._setGroup=function(A$C){var A$R;this._group!==A$C&&(this._group&&((A$R=A$U._groupResourcesMap[this._group]).splice(A$R.indexOf(this),1),0===A$R.length&&delete A$U._groupResourcesMap[this._group]),A$C&&((A$R=A$U._groupResourcesMap[A$C])||(A$U._groupResourcesMap[A$C]=A$R=[]),A$R.push(this)),this._group=A$C)},A$R._addReference=function(){this._referenceCount++},A$R._removeReference=function(){this._referenceCount--},A$R._clearReference=function(){this._referenceCount=0},A$R._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},A$R.recreateResource=function(){this.completeCreate()},A$R.disposeResource=function(){},A$R.activeResource=function(A$C){void 0===A$C&&(A$C=!1),this._lastUseFrameCount=A$c.loopCount,!this._destroyed&&this.__loaded&&(this._released||A$C)&&this.recreateResource()},A$R.releaseResource=function(A$C){return void 0===A$C&&(A$C=!0),!(!A$C&&this.lock)&&(!(this._released&&!A$C)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},A$R.onAsynLoaded=function(A$C,A$R,A$j){throw new Error("Resource: must override this function!")},A$R.destroy=function(){var A$C;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete A$U._idResourcesMap[this.id],this._url&&((A$C=A$U._urlResourcesMap[this._url])&&(A$C.splice(A$C.indexOf(this),1),0===A$C.length&&delete A$U._urlResourcesMap[this.url]),A$UC.clearRes(this._url),this.__loaded||A$E.cancelLoadByUrl(this._url)),this._group&&((A$C=A$U._groupResourcesMap[this._group]).splice(A$C.indexOf(this),1),0===A$C.length&&delete A$U._groupResourcesMap[this.url]))},A$R.completeCreate=function(){this._released=!1,this.event("recovered",this)},A$R.dispose=function(){this.destroy()},A$F(0,A$R,"memorySize",function(){return this._memorySize},function(A$C){var A$R=A$C-this._memorySize;this._memorySize=A$C,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,A$R),this.resourceManager&&this.resourceManager.addSize(A$R)}),A$F(0,A$R,"_loaded",null,function(A$C){this.__loaded=A$C}),A$F(0,A$R,"loaded",function(){return this.__loaded}),A$F(0,A$R,"id",function(){return this._$1__id}),A$F(0,A$R,"destroyed",function(){return this._destroyed}),A$F(0,A$R,"group",function(){return this._getGroup()},function(A$C){this._setGroup(A$C)}),A$F(0,A$R,"resourceManager",function(){return this._resourceManager}),A$F(0,A$R,"url",function(){return this._url}),A$F(0,A$R,"released",function(){return this._released}),A$F(0,A$R,"referenceCount",function(){return this._referenceCount}),A$U.getResourceByID=function(A$C){return A$U._idResourcesMap[A$C]},A$U.getResourceByURL=function(A$C,A$R){return void 0===A$R&&(A$R=0),null==A$U._urlResourcesMap[A$C]?null:A$U._urlResourcesMap[A$C][A$R]},A$U.getResourceCountByURL=function(A$C){return A$U._urlResourcesMap[A$C].length},A$U.destroyUnusedResources=function(A$C){var A$R;if(A$C){var A$j=A$U._groupResourcesMap[A$C];if(A$j)for(var A$w=A$j.slice(),A$T=0,A$G=A$w.length;A$T<A$G;A$T++)(A$R=A$w[A$T]).lock||0!==A$R._referenceCount||A$R.destroy()}else for(var A$o in A$U._idResourcesMap)(A$R=A$U._idResourcesMap[A$o]).lock||0!==A$R._referenceCount||A$R.destroy()},A$U._uniqueIDCounter=0,A$U._idResourcesMap={},A$U._urlResourcesMap={},A$U._groupResourcesMap={},A$U}()),A$eC=function(A$C){function A$$(A$C,A$R){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,A$$.__super.call(this),A$C&&null!=A$C._addReference&&A$C._addReference(),this.setTo(A$C,A$R)}A$e(A$$,"laya.resource.Texture",A$I);var A$R=A$$.prototype;return A$R._setUrl=function(A$C){this.url=A$C},A$R.setTo=function(A$C,A$R){if(A$C instanceof A$o.HTMLElement){var A$j=A$SC.create("2D",A$C);this.bitmap=A$j}else this.bitmap=A$C;if(this.uv=A$R||A$$.DEF_UV,A$C){this._w=A$C.width,this._h=A$C.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var A$w=this;if(this._loaded)A$E.addToAtlas&&A$E.addToAtlas(A$w);else{var A$T=A$C;A$T instanceof laya.resource.HTMLImage&&A$T.image&&A$T.image.addEventListener("load",function(A$C){A$E.addToAtlas&&A$E.addToAtlas(A$w)},!1)}}},A$R.active=function(){this.bitmap&&this.bitmap.activeResource()},A$R.destroy=function(A$C){if(void 0===A$C&&(A$C=!1),this.alphaTexture&&(this.alphaTexture.destroy(A$C),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var A$R=this.bitmap;A$C?(A$a.isConchApp&&A$R.source&&A$R.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,A$R.dispose(),A$R._clearReference()):(A$R._removeReference(),0==A$R.referenceCount&&(A$a.isConchApp&&A$R.source&&A$R.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,A$R.dispose())),this.url&&this===A$h.loader.getRes(this.url)&&A$h.loader.clearRes(this.url,A$C),this._loaded=!1}},A$R.load=function(A$C){var A$R=this;this._loaded=!1,A$C=A$N.customFormat(A$C);var A$j=this.bitmap||(this.bitmap=A$pC.create(A$C));A$j.uri=A$C,A$j&&A$j._addReference();var A$w=this;A$j.onload=function(){A$j.onload=null,A$w._loaded=!0,A$R.sourceWidth=A$R._w=A$j.width,A$R.sourceHeight=A$R._h=A$j.height,A$w.event("loaded",this),A$E.addToAtlas&&A$E.addToAtlas(A$w)}},A$R.addTextureToAtlas=function(A$C){A$E.addTextureToAtlas(this)},A$R.getPixels=function(A$C,A$R,A$j,A$w){if(A$a.isConchApp){var A$T=this.bitmap;if(A$T.source&&A$T.source.getImageData){var A$G=A$T.source.getImageData(A$C,A$R,A$j,A$w),A$o=new Uint8Array(A$G);return Array.from(A$o)}return null}return A$a.isWebGL?A$E.getTexturePixels(this,A$C,A$R,A$j,A$w):(A$V.canvas.size(A$j,A$w),A$V.canvas.clear(),A$V.context.drawTexture(this,-A$C,-A$R,this.width,this.height,0,0),A$V.context.getImageData(0,0,A$j,A$w).data)},A$R.onAsynLoaded=function(A$C,A$R){if(A$R){if("function"!=typeof A$R._addReference)throw new Error("bitmap._addReference is not a function. "+A$R.className+" "+typeof A$R._addReference+" "+A$R.constructor);A$R._addReference()}this.setTo(A$R,this.uv),this._loaded&&this.event("loaded",this)},A$F(0,A$R,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),A$F(0,A$R,"loaded",function(){return this._loaded}),A$F(0,A$R,"released",function(){return!this.bitmap||this.bitmap.released}),A$F(0,A$R,"width",function(){return this._w?this._w:this.uv&&this.uv!==A$$.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(A$C){this._w=A$C,this.sourceWidth||(this.sourceWidth=A$C)}),A$F(0,A$R,"repeat",function(){return!A$a.isWebGL||!this.bitmap||this.bitmap.repeat},function(A$C){A$C&&A$a.isWebGL&&this.bitmap&&(this.bitmap.repeat=A$C)&&(this.bitmap.enableMerageInAtlas=!1)}),A$F(0,A$R,"height",function(){return this._h?this._h:this.uv&&this.uv!==A$$.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(A$C){this._h=A$C,this.sourceHeight||(this.sourceHeight=A$C)}),A$F(0,A$R,"isLinearSampling",function(){return!A$a.isWebGL||9728!=this.bitmap.minFifter},function(A$C){!A$C&&A$a.isWebGL&&(A$C||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),A$$.moveUV=function(A$C,A$R,A$j){for(var A$w=0;A$w<8;A$w+=2)A$j[A$w]+=A$C,A$j[A$w+1]+=A$R;return A$j},A$$.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){void 0===A$G&&(A$G=0),void 0===A$o&&(A$o=0),void 0===A$U&&(A$U=0),void 0===A$t&&(A$t=0);var A$I=A$C instanceof laya.resource.Texture,A$e=A$I?A$C.uv:A$$.DEF_UV,A$H=A$I?A$C.bitmap:A$C,A$M=A$E.isAtlas(A$H);if(A$M){var A$K=A$H._atlaser,A$F=A$C._atlasID;if(-1==A$F)throw new Error("create texture error");A$H=A$K._inAtlasTextureBitmapValue[A$F],A$e=A$K._inAtlasTextureOriUVValue[A$F]}var A$L=new A$$(A$H,null);A$H.width&&A$R+A$w>A$H.width&&(A$w=A$H.width-A$R),A$H.height&&A$j+A$T>A$H.height&&(A$T=A$H.height-A$j),A$L.width=A$w,A$L.height=A$T,A$L.offsetX=A$G,A$L.offsetY=A$o,A$L.sourceWidth=A$U||A$w,A$L.sourceHeight=A$t||A$T;var A$D=1/A$H.width,A$Q=1/A$H.height;A$R*=A$D,A$j*=A$Q,A$w*=A$D,A$T*=A$Q;var A$Z=A$L.uv[0],A$S=A$L.uv[1],A$b=A$L.uv[4],A$f=A$L.uv[5],A$p=A$b-A$Z,A$h=A$f-A$S,A$x=A$$.moveUV(A$e[0],A$e[1],[A$R,A$j,A$R+A$w,A$j,A$R+A$w,A$j+A$T,A$R,A$j+A$T]);A$L.uv=[A$Z+A$x[0]*A$p,A$S+A$x[1]*A$h,A$b-(1-A$x[2])*A$p,A$S+A$x[3]*A$h,A$b-(1-A$x[4])*A$p,A$f-(1-A$x[5])*A$h,A$Z+A$x[6]*A$p,A$f-(1-A$x[7])*A$h],A$M&&A$L.addTextureToAtlas();var A$W=A$H.scaleRate;return A$W&&1!=A$W?(A$L.sourceWidth/=A$W,A$L.sourceHeight/=A$W,A$L.width/=A$W,A$L.height/=A$W,A$L.scaleRate=A$W,A$L.offsetX/=A$W,A$L.offsetY/=A$W):A$L.scaleRate=1,A$L},A$$.createFromTexture=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$C.scaleRate;1!=A$G&&(A$R*=A$G,A$j*=A$G,A$w*=A$G,A$T*=A$G);var A$o=A$W.TEMP.setTo(A$R-A$C.offsetX,A$j-A$C.offsetY,A$w,A$T),A$U=A$o.intersection(A$$._rect1.setTo(0,0,A$C.width,A$C.height),A$$._rect2);if(!A$U)return null;var A$t=A$$.create(A$C,A$U.x,A$U.y,A$U.width,A$U.height,A$U.x-A$o.x,A$U.y-A$o.y,A$w,A$T);if(A$t.bitmap&&A$t.bitmap._removeReference)return A$t.bitmap._removeReference(),A$t;var A$I="bitmap:"+(A$t.bitmap?A$t.bitmap.constructor?A$t.bitmap.constructor.name:A$t.bitmap.__className:"")+", url:"+(A$C.url+" | "+(A$t.bitmap?A$t.bitmap.url:A$C.url))+", x="+A$R+",y="+A$j+",width="+A$w+",height="+A$T+", result="+(A$U?A$U.x+","+A$U.y+","+A$U.width+","+A$U.height:"null")+", rect="+A$o.x+","+A$o.y+","+A$o.width+","+A$o.height;throw new Error("报错：bitmap._removeReference is not a function  "+A$I)},A$$.DEF_UV=[0,0,1,0,1,1,0,1],A$$.INV_UV=[0,1,1,1,1,0,0,0],A$$._rect1=new A$W,A$$._rect2=new A$W,A$$}(),A$C=function(A$C){var A$U;function A$G(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,A$G.__super.call(this)}A$e(A$G,"laya.utils.TimeLine",A$I);var A$R=A$G.prototype;return A$R.to=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=0),this._create(A$C,A$R,A$j,A$w,A$T,!0)},A$R.from=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=0),this._create(A$C,A$R,A$j,A$w,A$T,!1)},A$R._create=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$s.getItemByClass("tweenData",A$U);return A$o.isTo=A$G,A$o.type=0,A$o.target=A$C,A$o.duration=A$j,A$o.data=A$R,A$o.startTime=this._startTime+A$T,A$o.endTime=A$o.startTime+A$o.duration,A$o.ease=A$w,this._startTime=Math.max(A$o.endTime,this._startTime),this._tweenDataList.push(A$o),this._startTimeSort=!0,this._endTimeSort=!0,this},A$R.addLabel=function(A$C,A$R){var A$j=A$s.getItemByClass("tweenData",A$U);return A$j.type=1,A$j.data=A$C,A$j.endTime=A$j.startTime=this._startTime+A$R,this._labelDic||(this._labelDic={}),this._labelDic[A$C]=A$j,this._tweenDataList.push(A$j),this},A$R.removeLabel=function(A$C){if(this._labelDic&&this._labelDic[A$C]){var A$R=this._labelDic[A$C];if(A$R){var A$j=this._tweenDataList.indexOf(A$R);-1<A$j&&this._tweenDataList.splice(A$j,1)}delete this._labelDic[A$C]}},A$R.gotoTime=function(A$C){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var A$R,A$j,A$w,A$T;for(var A$G in this._firstTweenDic)if(A$j=this._firstTweenDic[A$G])for(var A$o in A$j)A$j.diyTarget.hasOwnProperty(A$o)&&(A$j.diyTarget[A$o]=A$j[A$o]);for(A$G in this._tweenDic)(A$R=this._tweenDic[A$G]).clear(),delete this._tweenDic[A$G];if(this._index=0,this._gidIndex=0,this._currTime=A$C,this._lastTime=A$V.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=A$w=this._tweenDataList.concat(),A$w.sort(function(A$C,A$R){return A$C.endTime>A$R.endTime?1:A$C.endTime<A$R.endTime?-1:0})}else A$w=this._endTweenDataList;for(var A$U=0,A$t=A$w.length;A$U<A$t;A$U++)if(0==(A$T=A$w[A$U]).type){if(!(A$C>=A$T.endTime))break;this._index=Math.max(this._index,A$U+1);var A$I=A$T.data;if(A$T.isTo)for(var A$e in A$I)A$T.target[A$e]=A$I[A$e]}for(A$U=0,A$t=this._tweenDataList.length;A$U<A$t;A$U++)0==(A$T=this._tweenDataList[A$U]).type&&A$C>=A$T.startTime&&A$C<A$T.endTime&&(this._index=Math.max(this._index,A$U+1),this._gidIndex++,(A$R=A$s.getItemByClass("tween",A$Y))._create(A$T.target,A$T.data,A$T.duration,A$T.ease,A$Z.create(this,this._animComplete,[this._gidIndex]),0,!1,A$T.isTo,!0,!1),A$R.setStartTime(this._currTime-(A$C-A$T.startTime)),A$R._updateEase(this._currTime),A$R.gid=this._gidIndex,this._tweenDic[this._gidIndex]=A$R)}},A$R.gotoLabel=function(A$C){if(null!=this._labelDic){var A$R=this._labelDic[A$C];A$R&&this.gotoTime(A$R.startTime)}},A$R.pause=function(){A$h.timer.clear(this,this._update)},A$R.resume=function(){this.play(this._currTime,this._loopKey)},A$R.play=function(A$C,A$R){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(A$C,A$R){return A$C.startTime>A$R.startTime?1:A$C.startTime<A$R.startTime?-1:0});for(var A$j=0,A$w=this._tweenDataList.length;A$j<A$w;A$j++){var A$T=this._tweenDataList[A$j];if(null!=A$T&&0==A$T.type){var A$G=A$T.target,A$o=A$G.$_GID||(A$G.$_GID=A$d.getGID()),A$U=null;for(var A$t in null==this._firstTweenDic[A$o]?((A$U={}).diyTarget=A$G,this._firstTweenDic[A$o]=A$U):A$U=this._firstTweenDic[A$o],A$T.data)null==A$U[A$t]&&(A$U[A$t]=A$G[A$t])}}}"string"==typeof A$C?this.gotoLabel(A$C):this.gotoTime(A$C),this._loopKey=A$R,this._lastTime=A$V.now(),A$h.timer.frameLoop(1,this,this._update)}},A$R._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var A$C in this._tweenDic)(A$R=this._tweenDic[A$C]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var A$R,A$j=A$V.now(),A$w=A$j-this._lastTime,A$T=this._currTime+=A$w*this.scale;for(A$C in this._lastTime=A$j,this._tweenDic)(A$R=this._tweenDic[A$C])._updateEase(A$T);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var A$G=this._tweenDataList[this._index];A$T>=A$G.startTime&&(this._index++,0==A$G.type?(this._gidIndex++,(A$R=A$s.getItemByClass("tween",A$Y))._create(A$G.target,A$G.data,A$G.duration,A$G.ease,A$Z.create(this,this._animComplete,[this._gidIndex]),0,!1,A$G.isTo,!0,!1),A$R.setStartTime(A$T),A$R.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=A$R)._updateEase(A$T)):this.event("label",A$G.data))}},A$R._animComplete=function(A$C){this._tweenDic[A$C]&&delete this._tweenDic[A$C]},A$R._complete=function(){this.event("complete")},A$R.reset=function(){var A$C;if(this._labelDic)for(A$C in this._labelDic)delete this._labelDic[A$C];for(A$C in this._tweenDic)this._tweenDic[A$C].clear(),delete this._tweenDic[A$C];for(A$C in this._firstTweenDic)delete this._firstTweenDic[A$C];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var A$R,A$j=0;for(A$R=this._tweenDataList.length,A$j=0;A$j<A$R;A$j++)this._tweenDataList[A$j]&&this._tweenDataList[A$j].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,A$h.timer.clear(this,this._update)},A$R.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},A$F(0,A$R,"index",function(){return this._frameIndex},function(A$C){this._frameIndex=A$C,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),A$F(0,A$R,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),A$G.to=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=0),(new A$G).to(A$C,A$R,A$j,A$w,A$T)},A$G.from=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$T&&(A$T=0),(new A$G).from(A$C,A$R,A$j,A$w,A$T)},A$G.__init$=function(){A$U=function(){function A$C(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return A$e(A$C,""),A$C.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,A$s.recover("tweenData",this)},A$C}()},A$G}(),A$HC=function(A$T){function A$j(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,A$j.__super.call(this),this._style=A$U.EMPTY}A$e(A$j,"laya.display.Sprite",A$T);var A$C=A$j.prototype;return A$h.imps(A$C,{"laya.display.ILayout":!0}),A$C.createConchModel=function(){return new ConchNode},A$C.destroy=function(A$C){if(void 0===A$C&&(A$C=!0),this._releaseMem(),!this._destroyed){this.filters=null;var A$R=this.mask;A$R&&(this.mask=null,A$R.destroy(A$C))}A$T.prototype.destroy.call(this,A$C),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},A$C.updateZOrder=function(){A$d.updateOrder(this._childs)&&this.repaint()},A$C.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},A$C.setBounds=function(A$C){this._set$P("uBounds",A$C)},A$C.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new A$W),A$W._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},A$C.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new A$W),A$W._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},A$C._boundPointsToParent=function(A$C){void 0===A$C&&(A$C=!1);var A$R=0,A$j=0;this._style&&(A$R=this._style._tf.translateX,A$j=this._style._tf.translateY,A$C=A$C||0!==this._style._tf.rotate,this._style.scrollRect&&(A$R+=this._style.scrollRect.x,A$j+=this._style.scrollRect.y));var A$w=this._getBoundPointsM(A$C);if(!A$w||A$w.length<1)return A$w;if(8!=A$w.length&&(A$w=A$C?A$f.scanPList(A$w):A$W._getWrapRec(A$w,A$W.TEMP)._getBoundPoints()),!this.transform)return A$d.transPointList(A$w,this._x-A$R,this._y-A$j),A$w;var A$T=A$x.TEMP,A$G=0,A$o=A$w.length;for(A$G=0;A$G<A$o;A$G+=2)A$T.x=A$w[A$G],A$T.y=A$w[A$G+1],this.toParentPoint(A$T),A$w[A$G]=A$T.x,A$w[A$G+1]=A$T.y;return A$w},A$C.getGraphicBounds=function(A$C){return void 0===A$C&&(A$C=!1),this._graphics?this._graphics.getBounds(A$C):A$W.TEMP.setTo(0,0,0,0)},A$C._getBoundPointsM=function(A$C){if(void 0===A$C&&(A$C=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var A$R=A$d.clearArray(this._$P.temBM),A$j=A$W.TEMP;return A$j.copyFrom(this.scrollRect),A$d.concatArray(A$R,A$j._getBoundPoints()),A$R}for(var A$w,A$T,A$G,A$o=this._graphics?this._graphics.getBoundPoints():A$d.clearArray(this._$P.temBM),A$U=0,A$t=(A$G=this._childs).length;A$U<A$t;A$U++)(A$w=A$G[A$U])instanceof laya.display.Sprite&&1==A$w.visible&&(A$T=A$w._boundPointsToParent(A$C))&&(A$o=A$o?A$d.concatArray(A$o,A$T):A$T);return A$o},A$C.getStyle=function(){return this._style===A$U.EMPTY&&(this._style=new A$U),this._style},A$C.setStyle=function(A$C){this._style=A$C},A$C._adjustTransform=function(){this._tfChanged=!1;var A$C,A$R=this._style._tf,A$j=A$R.scaleX,A$w=A$R.scaleY;if(A$R.rotate||1!==A$j||1!==A$w||A$R.skewX||A$R.skewY){(A$C=this._transform||(this._transform=A$P.create())).bTransform=!0;var A$T=.0174532922222222*(A$R.rotate-A$R.skewX),A$G=.0174532922222222*(A$R.rotate+A$R.skewY),A$o=Math.cos(A$G),A$U=Math.sin(A$G),A$t=Math.sin(A$T),A$I=Math.cos(A$T);return A$C.a=A$j*A$o,A$C.b=A$j*A$U,A$C.c=-A$w*A$t,A$C.d=A$w*A$I,A$C.tx=A$C.ty=0,A$C}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,A$C},A$C.pos=function(A$C,A$R,A$j){if(void 0===A$j&&(A$j=!1),this._x!==A$C||this._y!==A$R){if(this.destroyed)return this;if(A$j){this._x=A$C,this._y=A$R,this.conchModel&&this.conchModel.pos(this._x,this._y);var A$w=this._parent;A$w&&0===A$w._repaint&&(A$w._repaint=1,A$w.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=A$C,this.y=A$R}return this},A$C.pivot=function(A$C,A$R){return this.pivotX=A$C,this.pivotY=A$R,this},A$C.size=function(A$C,A$R){return this.width=A$C,this.height=A$R,this},A$C.scale=function(A$C,A$R,A$j){void 0===A$j&&(A$j=!1);var A$w=this.getStyle(),A$T=A$w._tf;if(A$T.scaleX!=A$C||A$T.scaleY!=A$R){if(this.destroyed)return this;if(A$j){A$w.setScale(A$C,A$R),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(A$C,A$R),this._renderType|=4;var A$G=this._parent;A$G&&0===A$G._repaint&&(A$G._repaint=1,A$G.parentRepaint())}else this.scaleX=A$C,this.scaleY=A$R}return this},A$C.skew=function(A$C,A$R){return this.skewX=A$C,this.skewY=A$R,this},A$C.render=function(A$C,A$R,A$j){A$c.spriteCount++,A$y.renders[this._renderType]._fun(this,A$C,A$R+this._x,A$j+this._y),this._repaint=0},A$C.drawToCanvas=function(A$C,A$R,A$j,A$w){if(A$a.isConchNode){var A$T=A$SC.create("2D");return new A$n(A$C,A$R,A$T).ctx.setCanvasType(1),this.conchModel.drawToCanvas(A$T.source,A$j,A$w),A$T}return A$E.drawToCanvas(this,this._renderType,A$C,A$R,A$j,A$w)},A$C.customRender=function(A$C,A$R,A$j){this._renderType|=1024},A$C._applyFilters=function(){var A$C;if(!A$a.isWebGL&&((A$C=this._$P.filters)&&!(A$C.length<1)))for(var A$R=0,A$j=A$C.length;A$R<A$j;A$R++)A$C[A$R].action.apply(this._$P.cacheCanvas)},A$C._isHaveGlowFilter=function(){var A$C,A$R=0;if(this.filters)for(A$R=0;A$R<this.filters.length;A$R++)if(8==this.filters[A$R].type)return!0;for(A$R=0,A$C=this._childs.length;A$R<A$C;A$R++)if(this._childs[A$R]._isHaveGlowFilter())return!0;return!1},A$C.localToGlobal=function(A$C,A$R){void 0===A$R&&(A$R=!1),!0===A$R&&(A$C=new A$x(A$C.x,A$C.y));for(var A$j=this;A$j&&A$j!=A$h.stage;)A$C=A$j.toParentPoint(A$C),A$j=A$j.parent;return A$C},A$C.globalToLocal=function(A$C,A$R){void 0===A$R&&(A$R=!1),A$R&&(A$C=new A$x(A$C.x,A$C.y));for(var A$j=this,A$w=[];A$j&&A$j!=A$h.stage;)A$w.push(A$j),A$j=A$j.parent;for(var A$T=A$w.length-1;0<=A$T;)A$C=(A$j=A$w[A$T]).fromParentPoint(A$C),A$T--;return A$C},A$C.toParentPoint=function(A$C){if(!A$C)return A$C;A$C.x-=this.pivotX,A$C.y-=this.pivotY,this.transform&&this._transform.transformPoint(A$C),A$C.x+=this._x,A$C.y+=this._y;var A$R=this._style.scrollRect;return A$R&&(A$C.x-=A$R.x,A$C.y-=A$R.y),A$C},A$C.fromParentPoint=function(A$C){if(!A$C)return A$C;A$C.x-=this._x,A$C.y-=this._y;var A$R=this._style.scrollRect;return A$R&&(A$C.x+=A$R.x,A$C.y+=A$R.y),this.transform&&this._transform.invertTransformPoint(A$C),A$C.x+=this.pivotX,A$C.y+=this.pivotY,A$C},A$C.on=function(A$C,A$R,A$j,A$w){return 1!==this._mouseEnableState&&this.isMouseEvent(A$C)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(A$C,A$R,A$j,A$w,!1)):A$T.prototype.on.call(this,A$C,A$R,A$j,A$w)},A$C.once=function(A$C,A$R,A$j,A$w){return 1!==this._mouseEnableState&&this.isMouseEvent(A$C)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(A$C,A$R,A$j,A$w,!0)):A$T.prototype.once.call(this,A$C,A$R,A$j,A$w)},A$C._$2__onDisplay=function(){if(1!==this._mouseEnableState){var A$C=this;for(A$C=A$C.parent;A$C&&1!==A$C._mouseEnableState&&!A$C._getBit(2);)A$C.mouseEnabled=!0,A$C._setBit(2,!0),A$C=A$C.parent}},A$C.loadImage=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=this;return void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),this.graphics.loadImage(A$C,A$R,A$j,A$w,A$T,function(A$C){A$o.destroyed||(A$o.size(A$R+(A$w||A$C.width),A$j+(A$T||A$C.height)),A$o.repaint(),A$G&&A$G.runWith(A$C))}),this},A$C.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},A$C._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},A$C._childChanged=function(A$C){this._childs.length?this._renderType|=2048:this._renderType&=-2049,A$C&&this._get$P("hasZorder")&&A$h.timer.callLater(this,this.updateZOrder),this.repaint()},A$C.parentRepaint=function(){var A$C=this._parent;A$C&&0===A$C._repaint&&(A$C._repaint=1,A$C.parentRepaint())},A$C.startDrag=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){void 0===A$R&&(A$R=!1),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=300),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=.92),this._$P.dragging||this._set$P("dragging",new A$i),this._$P.dragging.start(this,A$C,A$R,A$j,A$w,A$T,A$G,A$o)},A$C.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},A$C._releaseMem=function(){if(this._$P){var A$C=this._$P.cacheCanvas;A$C&&A$C.ctx&&(A$s.recover("RenderContext",A$C.ctx),A$C.ctx.canvas.size(0,0),A$C.ctx=null);var A$R=this._$P._filterCache;A$R&&(A$R.destroy(),A$R.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},A$C._setDisplay=function(A$C){A$C||this._releaseMem(),A$T.prototype._setDisplay.call(this,A$C)},A$C.hitTestPoint=function(A$C,A$R){var A$j=this.globalToLocal(A$x.TEMP.setTo(A$C,A$R));return A$C=A$j.x,A$R=A$j.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?A$W.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(A$C,A$R)},A$C.getMousePoint=function(){return this.globalToLocal(A$x.TEMP.setTo(A$h.stage.mouseX,A$h.stage.mouseY))},A$C._getWords=function(){return null},A$C._addChildsToLayout=function(A$C){var A$R=this._getWords();if(null==A$R&&0==this._childs.length)return!1;if(A$R)for(var A$j=0,A$w=A$R.length;A$j<A$w;A$j++)A$C.push(A$R[A$j]);A$j=0;for(var A$T=this._childs.length;A$j<A$T;++A$j){var A$G=this._childs[A$j];A$G._style._enableLayout()&&A$G._addToLayout(A$C)}return!0},A$C._addToLayout=function(A$C){this._style.absolute||(this._style.block?A$C.push(this):this._addChildsToLayout(A$C)&&(this.x=this.y=0))},A$C._isChar=function(){return!1},A$C._getCSSStyle=function(){return this._style.getCSSStyle()},A$C._setAttributes=function(A$C,A$R){switch(A$C){case"x":this.x=parseFloat(A$R);break;case"y":this.y=parseFloat(A$R);break;case"width":this.width=parseFloat(A$R);break;case"height":this.height=parseFloat(A$R);break;default:this[A$C]=A$R}},A$C._layoutLater=function(){this.parent&&this.parent._layoutLater()},A$F(0,A$C,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(A$C){this._optimizeScrollRect!=A$C&&(this._optimizeScrollRect=A$C,this.conchModel&&this.conchModel.optimizeScrollRect(A$C))}),A$F(0,A$C,"customRenderEnable",null,function(A$C){if(A$C&&(this._renderType|=1024,A$a.isConchNode)){A$j.CustomList.push(this);var A$R=new A$SC("2d");A$R._setContext(new CanvasRenderingContext2D),this.customContext=new A$n(0,0,A$R),A$R.context.setCanvasType&&A$R.context.setCanvasType(2),this.conchModel.custom(A$R.context)}}),A$F(0,A$C,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(A$C){this.cacheAs=A$C?this._$P.hasFilter?"none":"normal":"none"}),A$F(0,A$C,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(A$C){var A$R=this._$P.cacheCanvas;if(A$C!==(A$R?A$R.type:"none")){if("none"!==A$C)this._getBit(1)||this._setUpNoticeType(1),A$R||(A$R=this._set$P("cacheCanvas",A$s.getItemByClass("cacheCanvas",Object))),A$R.type=A$C,A$R.reCache=!0,this._renderType|=16,"bitmap"==A$C&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(A$R){var A$j=A$R;A$j&&A$j.ctx&&(A$s.recover("RenderContext",A$j.ctx),A$j.ctx.canvas.size(0,0),A$j.ctx=null),A$s.recover("cacheCanvas",A$R)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),A$F(0,A$C,"zOrder",function(){return this._zOrder},function(A$C){this._zOrder!=A$C&&(this._zOrder=A$C,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(A$C),this._parent&&(A$C&&this._parent._set$P("hasZorder",!0),A$h.timer.callLater(this._parent,this.updateZOrder)))}),A$F(0,A$C,"rotation",function(){return this._style._tf.rotate},function(A$C){var A$R=this.getStyle();if(A$R._tf.rotate!==A$C){A$R.setRotate(A$C),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(A$C),this._renderType|=4;var A$j=this._parent;A$j&&0===A$j._repaint&&(A$j._repaint=1,A$j.parentRepaint())}}),A$F(0,A$C,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(A$C){this._width!==A$C&&(this._width=A$C,this.conchModel&&this.conchModel.size(A$C,this._height),this.repaint())}),A$F(0,A$C,"x",function(){return this._x},function(A$C){if(this._x!==A$C){if(this.destroyed)return;this._x=A$C,this.conchModel&&this.conchModel.pos(A$C,this._y);var A$R=this._parent;A$R&&0===A$R._repaint&&(A$R._repaint=1,A$R.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),A$F(0,A$C,"globalScaleY",function(){for(var A$C=1,A$R=this;A$R&&A$R!==A$h.stage;)A$C*=A$R.scaleY,A$R=A$R.parent;return A$C}),A$F(0,A$C,"hitArea",function(){return this._$P.hitArea},function(A$C){this._set$P("hitArea",A$C)}),A$F(0,A$C,"staticCache",function(){return this._$P.staticCache},function(A$C){this._set$P("staticCache",A$C),A$C||this.reCache()}),A$F(0,A$C,"texture",function(){return this._texture},function(A$C){this._texture!=A$C&&(this._texture=A$C,this.graphics.cleanByTexture(A$C,0,0))}),A$F(0,A$C,"y",function(){return this._y},function(A$C){if(this._y!==A$C){if(this.destroyed)return;this._y=A$C,this.conchModel&&this.conchModel.pos(this._x,A$C);var A$R=this._parent;A$R&&0===A$R._repaint&&(A$R._repaint=1,A$R.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),A$F(0,A$C,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(A$C){this._height!==A$C&&(this._height=A$C,this.conchModel&&this.conchModel.size(this._width,A$C),this.repaint())}),A$F(0,A$C,"blendMode",function(){return this._style.blendMode},function(A$C){this.getStyle().blendMode=A$C,this.conchModel&&this.conchModel.blendMode(A$C),A$C&&"source-over"!=A$C?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),A$F(0,A$C,"scaleX",function(){return this._style._tf.scaleX},function(A$C){var A$R=this.getStyle();if(A$R._tf.scaleX!==A$C){A$R.setScaleX(A$C),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(A$C,A$R._tf.scaleY),this._renderType|=4;var A$j=this._parent;A$j&&0===A$j._repaint&&(A$j._repaint=1,A$j.parentRepaint())}}),A$F(0,A$C,"scaleY",function(){return this._style._tf.scaleY},function(A$C){var A$R=this.getStyle();if(A$R._tf.scaleY!==A$C){A$R.setScaleY(A$C),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(A$R._tf.scaleX,A$C),this._renderType|=4;var A$j=this._parent;A$j&&0===A$j._repaint&&(A$j._repaint=1,A$j.parentRepaint())}}),A$F(0,A$C,"stage",function(){return A$h.stage}),A$F(0,A$C,"skewX",function(){return this._style._tf.skewX},function(A$C){var A$R=this.getStyle();if(A$R._tf.skewX!==A$C){A$R.setSkewX(A$C),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(A$C,A$R._tf.skewY),this._renderType|=4;var A$j=this._parent;A$j&&0===A$j._repaint&&(A$j._repaint=1,A$j.parentRepaint())}}),A$F(0,A$C,"scrollRect",function(){return this._style.scrollRect},function(A$C){this.getStyle().scrollRect=A$C,this.repaint(),A$C?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(A$C.x,A$C.y,A$C.width,A$C.height)):(this._renderType&=-129,this.conchModel&&(A$j.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),A$F(0,A$C,"skewY",function(){return this._style._tf.skewY},function(A$C){var A$R=this.getStyle();if(A$R._tf.skewY!==A$C){A$R.setSkewY(A$C),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(A$R._tf.skewX,A$C),this._renderType|=4;var A$j=this._parent;A$j&&0===A$j._repaint&&(A$j._repaint=1,A$j.parentRepaint())}}),A$F(0,A$C,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(A$C){this._tfChanged=!1,(this._transform=A$C)&&(this._x=A$C.tx,this._y=A$C.ty,A$C.tx=A$C.ty=0,this.conchModel&&this.conchModel.transform(A$C.a,A$C.b,A$C.c,A$C.d,this._x,this._y)),A$C?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),A$F(0,A$C,"pivotX",function(){return this._style._tf.translateX},function(A$C){this.getStyle().setTranslateX(A$C),this.conchModel&&this.conchModel.pivot(A$C,this._style._tf.translateY),this.repaint()}),A$F(0,A$C,"pivotY",function(){return this._style._tf.translateY},function(A$C){this.getStyle().setTranslateY(A$C),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,A$C),this.repaint()}),A$F(0,A$C,"alpha",function(){return this._style.alpha},function(A$C){this._style&&this._style.alpha!==A$C&&(A$C=A$C<0?0:1<A$C?1:A$C,this.getStyle().alpha=A$C,this.conchModel&&this.conchModel.alpha(A$C),1!==A$C?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),A$F(0,A$C,"visible",function(){return this._style.visible},function(A$C){this._style&&this._style.visible!==A$C&&(this.getStyle().visible=A$C,this.conchModel&&this.conchModel.visible(A$C),this.parentRepaint())}),A$F(0,A$C,"graphics",function(){return this._graphics||(this.graphics=A$E.createGraphics())},function(A$C){this._graphics&&(this._graphics._sp=null),(this._graphics=A$C)?(this._renderType&=-2,this._renderType|=512,(A$C._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(A$j.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),A$F(0,A$C,"filters",function(){return this._$P.filters},function(A$C){A$C&&0===A$C.length&&(A$C=null),this._$P.filters!=A$C&&(this._set$P("filters",A$C?A$C.slice():null),A$a.isConchApp&&(this.conchModel&&(A$j.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),A$a.isWebGL&&(A$C&&A$C.length?this._renderType|=32:this._renderType&=-33),A$C&&0<A$C.length?(this._getBit(1)||this._setUpNoticeType(1),A$a.isWebGL&&1==A$C.length&&A$C[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(A$a.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),A$F(0,A$C,"parent",A$T.prototype._$get_parent,function(A$C){A$h.superSet(A$CC,this,"parent",A$C),A$C&&this._getBit(2)&&this._$2__onDisplay()}),A$F(0,A$C,"mask",function(){return this._$P._mask},function(A$C){A$C&&this.mask&&this.mask._$P.maskParent||(A$C?(this.cacheAs="bitmap",this._set$P("_mask",A$C),A$C._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",A$C),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(A$C?A$C.conchModel:null),this._renderType|=64,this.parentRepaint())}),A$F(0,A$C,"mouseEnabled",function(){return 1<this._mouseEnableState},function(A$C){this._mouseEnableState=A$C?2:1}),A$F(0,A$C,"globalScaleX",function(){for(var A$C=1,A$R=this;A$R&&A$R!==A$h.stage;)A$C*=A$R.scaleX,A$R=A$R.parent;return A$C}),A$F(0,A$C,"mouseX",function(){return this.getMousePoint().x}),A$F(0,A$C,"mouseY",function(){return this.getMousePoint().y}),A$j.fromImage=function(A$C){return(new A$j).loadImage(A$C)},A$j._cachePool=[],A$j.CustomList=[],A$t(A$j,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=A$o.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),A$j}(A$CC),A$MC=function(A$C){function A$R(A$C){this._audio=null,this._onEnd=null,this._resumePlay=null,A$R.__super.call(this),this._onEnd=A$d.bind(this.__onEnd,this),this._resumePlay=A$d.bind(this.__resumePlay,this),A$C.addEventListener("ended",this._onEnd),this._audio=A$C}A$e(A$R,"laya.media.h5audio.AudioSoundChannel",A$wC);var A$j=A$R.prototype;return A$j.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(A$h.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},A$j.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,A$V.container.appendChild(this._audio),this._audio.play()}catch(A$C){this.event("error")}},A$j.play=function(A$C){this.isStopped=!1;try{this._audio.playbackRate=A$r.playbackRate,this._audio.currentTime=this.startTime}catch(A$C){return void this._audio.addEventListener("canplay",this._resumePlay)}A$r.addChannel(this),A$V.container.appendChild(this._audio),!A$C&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},A$j.stop=function(){this.isStopped=!0,A$r.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&A$a.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),A$V.onIE||this._audio!=A$jC._musicAudio&&A$s.recover("audio:"+this.url,this._audio),A$V.removeElement(this._audio),this._audio=null)},A$j.pause=function(){this.isStopped=!0,A$r.removeChannel(this),"pause"in this._audio&&this._audio.pause()},A$j.resume=function(){this._audio&&(this.isStopped=!1,A$r.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},A$F(0,A$j,"position",function(){return this._audio?this._audio.currentTime:0}),A$F(0,A$j,"duration",function(){return this._audio?this._audio.duration:0}),A$F(0,A$j,"volume",function(){return this._audio?this._audio.volume:1},function(A$C){this._audio&&(this._audio.volume=A$C)}),A$R}(),A$KC=function(A$C){function A$R(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=A$GC.ctx,A$R.__super.call(this),this._onPlayEnd=A$d.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}A$e(A$R,"laya.media.webaudio.WebAudioSoundChannel",A$wC);var A$j=A$R.prototype;return A$j.play=function(A$C){if(A$r.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var A$R=this.context,A$j=this.gain,A$w=A$R.createBufferSource();(this.bufferSource=A$w).buffer=this.audioBuffer,A$w.connect(A$j),A$j&&A$j.disconnect(),A$j.connect(A$R.destination),A$w.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=A$V.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(A$w.loop=!0),A$w.playbackRate.setTargetAtTime?A$w.playbackRate.setTargetAtTime(A$r.playbackRate,this.context.currentTime,.1):A$w.playbackRate.value=A$r.playbackRate,A$w.start(0,this.startTime),!A$C&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},A$j.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(A$h.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},A$j._clearBufferSource=function(){if(this.bufferSource){var A$C=this.bufferSource;A$C.stop?A$C.stop(0):A$C.noteOff(0),A$C.disconnect(0),A$C.onended=null,A$R._tryCleanFailed||this._tryClearBuffer(A$C),this.bufferSource=null}},A$j._tryClearBuffer=function(A$C){try{A$C.buffer=null}catch(A$C){A$R._tryCleanFailed=!0}},A$j.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,A$r.removeChannel(this),this.startHandler=null,this.completeHandler=null},A$j.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,A$r.removeChannel(this)},A$j.resume=function(){this.startTime=this._pauseTime,this.play(!1)},A$F(0,A$j,"position",function(){return this.bufferSource?(A$V.now()-this._startTime)/1e3+this.startTime:0}),A$F(0,A$j,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),A$F(0,A$j,"volume",function(){return this._volume},function(A$C){this.isStopped||(this._volume=A$C,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(A$C,this.context.currentTime,.1):this.gain.gain.value=A$C)}),A$R._tryCleanFailed=!1,A$R}(),A$FC=function(A$C){function A$R(){A$R.__super.call(this),this._w=0,this._h=0}A$e(A$R,"laya.resource.Bitmap",A$IC);var A$j=A$R.prototype;return A$F(0,A$j,"width",function(){return this._w}),A$F(0,A$j,"height",function(){return this._h}),A$F(0,A$j,"source",function(){return this._source}),A$R}(),A$LC=function(A$R){function A$C(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,A$C.__super.call(this),this._interval=A$w.animationInterval,this._setUpNoticeType(1)}A$e(A$C,"laya.display.AnimationPlayerBase",A$R);var A$j=A$C.prototype;return A$j.play=function(A$C,A$R,A$j,A$w){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=!0),void 0===A$j&&(A$j=""),void 0===A$w&&(A$w=!0),this._isPlaying=!0,this.index="string"==typeof A$C?this._getFrameByLabel(A$C):A$C,this.loop=A$R,this._actionName=A$j,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},A$j._getFrameByLabel=function(A$C){var A$R=0;for(A$R=0;A$R<this._count;A$R++)if(this._labels[A$R]&&0<=this._labels[A$R].indexOf(A$C))return A$R;return 0},A$j._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},A$j._setControlNode=function(A$C){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=A$C)&&A$C!=this&&(A$C.on("display",this,this._checkResumePlaying),A$C.on("undisplay",this,this._checkResumePlaying))},A$j._setDisplay=function(A$C){A$R.prototype._setDisplay.call(this,A$C),this._checkResumePlaying()},A$j._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},A$j.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},A$j.addLabel=function(A$C,A$R){this._labels||(this._labels={}),this._labels[A$R]||(this._labels[A$R]=[]),this._labels[A$R].push(A$C)},A$j.removeLabel=function(A$C){if(A$C){if(this._labels)for(var A$R in this._labels)this._removeLabelFromLabelList(this._labels[A$R],A$C)}else this._labels=null},A$j._removeLabelFromLabelList=function(A$C,A$R){if(A$C)for(var A$j=A$C.length-1;0<=A$j;A$j--)A$C[A$j]==A$R&&A$C.splice(A$j,1)},A$j.gotoAndStop=function(A$C){this.index="string"==typeof A$C?this._getFrameByLabel(A$C):A$C,this.stop()},A$j._displayToIndex=function(A$C){},A$j.clear=function(){this.stop(),this._labels=null},A$F(0,A$j,"interval",function(){return this._interval},function(A$C){this._interval!=A$C&&(this._frameRateChanged=!0,this._interval=A$C,this._isPlaying&&0<A$C&&this.timerLoop(A$C,this,this._frameLoop,null,!0,!0))}),A$F(0,A$j,"isPlaying",function(){return this._isPlaying}),A$F(0,A$j,"index",function(){return this._index},function(A$C){if(this._index=A$C,this._displayToIndex(A$C),this._labels&&this._labels[A$C])for(var A$R=this._labels[A$C],A$j=0,A$w=A$R.length;A$j<A$w;A$j++)this.event("label",A$R[A$j])}),A$F(0,A$j,"count",function(){return this._count}),A$C.WRAP_POSITIVE=0,A$C.WRAP_REVERSE=1,A$C.WRAP_PINGPONG=2,A$C}(A$HC),A$DC=function(A$R){function A$K(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,A$K.__super.call(this),this.overflow=A$K.VISIBLE,this._style=new A$RC(this),this._style.wordWrap=!1}A$e(A$K,"laya.display.Text",A$R);var A$C=A$K.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._lines=null,this._words&&(this._words.length=0,this._words=null)},A$C._getBoundPointsM=function(A$C){void 0===A$C&&(A$C=!1);var A$R=A$W.TEMP;return A$R.setTo(0,0,this.width,this.height),A$R._getBoundPoints()},A$C.getGraphicBounds=function(A$C){void 0===A$C&&(A$C=!1);var A$R=A$W.TEMP;return A$R.setTo(0,0,this.width,this.height),A$R},A$C._getCSSStyle=function(){return this._style},A$C.lang=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e){if(A$C=A$K.langPacks&&A$K.langPacks[A$C]?A$K.langPacks[A$C]:A$C,arguments.length<2)this._text=A$C;else{for(var A$H=0,A$M=arguments.length;A$H<A$M;A$H++)A$C=A$C.replace("{"+A$H+"}",arguments[A$H+1]);this._text=A$C}},A$C._isPassWordMode=function(){var A$C=this._style.password;return"prompt"in this&&this.prompt==this._text&&(A$C=!1),A$C},A$C._getPassWordTxt=function(A$C){var A$R;A$R="";for(var A$j=A$C.length;0<A$j;A$j--)A$R+="●";return A$R},A$C.renderText=function(A$C,A$R){var A$j=this.graphics;A$j.clear(!0);var A$w=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(A$V.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);A$V.context.font=A$w;var A$T=this.padding,A$G=A$T[3],A$o="left",A$U=this._lines,A$t=this.leading+this._charSize.height,A$I=this._currBitmapFont;A$I&&(A$t=this.leading+A$I.getMaxHeight());var A$e=A$T[0];if(!A$I&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(A$o="right",A$G=this._width-A$T[1]):"center"==this.align&&(A$o="center",A$G=.5*this._width+A$T[3]-A$T[1])),0<this._height){var A$H=this._textHeight>this._height?"top":this.valign;"middle"===A$H?A$e=.5*(this._height-A$R*A$t)+A$T[0]-A$T[2]:"bottom"===A$H&&(A$e=this._height-A$R*A$t-A$T[2])}var A$M=this._style;if(A$I&&A$I.autoScaleSize)var A$K=A$I.fontSize/this.fontSize;if(this._clipPoint)if(A$j.save(),A$I&&A$I.autoScaleSize){var A$F=0,A$L=0;A$F=this._width?this._width-A$T[3]-A$T[1]:this._textWidth,A$L=this._height?this._height-A$T[0]-A$T[2]:this._textHeight,A$F*=A$K,A$L*=A$K,A$j.clipRect(A$T[3],A$T[0],A$F,A$L)}else A$j.clipRect(A$T[3],A$T[0],this._width?this._width-A$T[3]-A$T[1]:this._textWidth,this._height?this._height-A$T[0]-A$T[2]:this._textHeight);var A$D=A$M.password;"prompt"in this&&this.prompt==this._text&&(A$D=!1);for(var A$Q=0,A$Z=0,A$S=Math.min(this._lines.length,A$R+A$C)||1,A$b=A$C;A$b<A$S;A$b++){var A$f,A$p=A$U[A$b];if(A$D){var A$h=A$p.length;A$p="";for(var A$x=A$h;0<A$x;A$x--)A$p+="●"}if(A$Q=A$G-(this._clipPoint?this._clipPoint.x:0),A$Z=A$e+A$t*A$b-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(A$o,A$Q,A$Z,A$b),A$I){var A$W=this.width;A$I.autoScaleSize&&(A$W=this.width*A$K),A$I.drawText(A$p,this,A$Q,A$Z,this.align,A$W)}else A$a.isWebGL?(this._words||(this._words=[]),(A$f=this._words.length>A$b-A$C?this._words[A$b-A$C]:new A$v).setText(A$p)):A$f=A$p,A$M.stroke?A$j.fillBorderText(A$f,A$Q,A$Z,A$w,this.color,A$M.strokeColor,A$M.stroke,A$o):A$j.fillText(A$f,A$Q,A$Z,A$w,this.color,A$o)}if(A$I&&A$I.autoScaleSize){var A$$=1/A$K;this.scale(A$$,A$$)}this._clipPoint&&A$j.restore(),this._startX=A$G,this._startY=A$e},A$C.drawUnderline=function(A$C,A$R,A$j,A$w){var A$T=this._lineWidths[A$w];switch(A$C){case"center":A$R-=A$T/2;break;case"right":A$R-=A$T}A$j+=this._charSize.height,this._graphics.drawLine(A$R,A$j,A$R+A$T,A$j,this.underlineColor||this.color,1)},A$C.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);A$V.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new A$x(0,0)):this._clipPoint=null;var A$C=this._lines.length;if(this.overflow!=A$K.VISIBLE){var A$R=this.overflow==A$K.HIDDEN?Math.floor:Math.ceil;A$C=Math.min(A$C,A$R((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var A$j=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(A$j,A$C),this.repaint()},A$C.evalTextSize=function(){var A$C,A$R=NaN;A$C=Math.max.apply(this,this._lineWidths),A$R=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],A$C==this._textWidth&&A$R==this._textHeight||(this._textWidth=A$C,this._textHeight=A$R,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},A$C.checkEnabledViewportOrNot=function(){return this.overflow==A$K.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},A$C.changeText=function(A$C){this._text!==A$C&&(this.lang(A$C+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},A$C.parseLines=function(A$C){var A$R=this.wordWrap||this.overflow==A$K.HIDDEN;if(A$R)var A$j=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var A$w=A$V.context.measureText(A$K._testWord);A$a.isConchApp&&0===A$w.width&&0===A$w.height&&(A$w=A$V.context.measureText("W")),this._charSize.width=A$w.width,this._charSize.height=A$w.height||this.fontSize}for(var A$T=A$C.replace(/\r\n/g,"\n").split("\n"),A$G=0,A$o=A$T.length;A$G<A$o;A$G++){var A$U=A$T[A$G];A$R?this.parseLine(A$U,A$j):(this._lineWidths.push(this.getTextWidth(A$U)),this._lines.push(A$U))}},A$C.parseLine=function(A$C,A$R){A$V.context;var A$j,A$w=this._lines,A$T=0,A$G=NaN,A$o=NaN,A$U=0;if((A$G=this.getTextWidth(A$C))<=A$R)return A$w.push(A$C),void this._lineWidths.push(A$G);A$G=this._charSize.width,0==(A$T=Math.floor(A$R/A$G))&&(A$T=1),A$o=A$G=this.getTextWidth(A$C.substring(0,A$T));for(var A$t=A$T,A$I=A$C.length;A$t<A$I;A$t++)if(A$R<(A$o+=A$G=this.getTextWidth(A$C.charAt(A$t))))if(this.wordWrap){var A$e=A$C.substring(A$U,A$t);if(A$e.charCodeAt(A$e.length-1)<255?(A$j=/(?:\w|-)+$/.exec(A$e))&&(A$t=A$j.index+A$U,0==A$j.index?A$t+=A$e.length:A$e=A$C.substring(A$U,A$t)):A$K.RightToLeft&&(A$j=/([\u0600-\u06FF])+$/.exec(A$e))&&(A$t=A$j.index+A$U,0==A$j.index?A$t+=A$e.length:A$e=A$C.substring(A$U,A$t)),A$w.push(A$e),this._lineWidths.push(A$o-A$G),!((A$U=A$t)+A$T<A$I)){A$w.push(A$C.substring(A$U,A$I)),this._lineWidths.push(this.getTextWidth(A$w[A$w.length-1])),A$U=-1;break}A$t+=A$T,A$o=A$G=this.getTextWidth(A$C.substring(A$U,A$t)),A$t--}else if(this.overflow==A$K.HIDDEN)return A$w.push(A$C.substring(0,A$t)),void this._lineWidths.push(this.getTextWidth(A$w[A$w.length-1]));this.wordWrap&&-1!=A$U&&(A$w.push(A$C.substring(A$U,A$I)),this._lineWidths.push(this.getTextWidth(A$w[A$w.length-1])))},A$C.getTextWidth=function(A$C){return this._currBitmapFont?this._currBitmapFont.getTextWidth(A$C):A$V.context.measureText(A$C).width},A$C.getWordWrapWidth=function(){var A$C=this.padding,A$R=NaN;return(A$R=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(A$R=this.wordWrap?100:A$V.width),A$R<=0&&(A$R=100),A$R-A$C[3]-A$C[1]},A$C.getCharPoint=function(A$C,A$R){this._isChanged&&A$h.timer.runCallLater(this,this.typeset);for(var A$j=0,A$w=this._lines,A$T=0,A$G=0,A$o=A$w.length;A$G<A$o;A$G++){if(A$C<(A$j+=A$w[A$G].length)){var A$U=A$G;break}A$T=A$j}var A$t=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;A$V.context.font=A$t;var A$I=this.getTextWidth(this._text.substring(A$T,A$C));return(A$R||new A$x).setTo(this._startX+A$I-(this._clipPoint?this._clipPoint.x:0),this._startY+A$U*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},A$F(0,A$C,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(A$C){A$C!=this._width&&(A$h.superSet(A$HC,this,"width",A$C),this.isChanged=!0)}),A$F(0,A$C,"textWidth",function(){return this._isChanged&&A$h.timer.runCallLater(this,this.typeset),this._textWidth}),A$F(0,A$C,"height",function(){return this._height?this._height:this.textHeight},function(A$C){A$C!=this._height&&(A$h.superSet(A$HC,this,"height",A$C),this.isChanged=!0)}),A$F(0,A$C,"textHeight",function(){return this._isChanged&&A$h.timer.runCallLater(this,this.typeset),this._textHeight}),A$F(0,A$C,"padding",function(){return this._getCSSStyle().padding},function(A$C){this._getCSSStyle().padding=A$C,this.isChanged=!0}),A$F(0,A$C,"bold",function(){return this._getCSSStyle().bold},function(A$C){this._getCSSStyle().bold=A$C,this.isChanged=!0}),A$F(0,A$C,"text",function(){return this._text||""},function(A$C){this._text!==A$C&&(this.lang(A$C+""),this.isChanged=!0,this.event("change"))}),A$F(0,A$C,"color",function(){return this._getCSSStyle().color},function(A$C){this._getCSSStyle().color!=A$C&&(this._getCSSStyle().color=A$C,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),A$F(0,A$C,"font",function(){return this._getCSSStyle().fontFamily},function(A$C){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),A$K._bitmapFonts&&A$K._bitmapFonts[A$C]&&(this._currBitmapFont=A$K._bitmapFonts[A$C]),this._getCSSStyle().fontFamily=A$C,this.isChanged=!0}),A$F(0,A$C,"fontSize",function(){return this._getCSSStyle().fontSize},function(A$C){this._getCSSStyle().fontSize=A$C,this.isChanged=!0}),A$F(0,A$C,"italic",function(){return this._getCSSStyle().italic},function(A$C){this._getCSSStyle().italic=A$C,this.isChanged=!0}),A$F(0,A$C,"align",function(){return this._getCSSStyle().align},function(A$C){this._getCSSStyle().align=A$C,this.isChanged=!0}),A$F(0,A$C,"valign",function(){return this._getCSSStyle().valign},function(A$C){this._getCSSStyle().valign=A$C,this.isChanged=!0}),A$F(0,A$C,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(A$C){this._getCSSStyle().wordWrap=A$C,this.isChanged=!0}),A$F(0,A$C,"leading",function(){return this._getCSSStyle().leading},function(A$C){this._getCSSStyle().leading=A$C,this.isChanged=!0}),A$F(0,A$C,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(A$C){this._getCSSStyle().backgroundColor=A$C,this.isChanged=!0}),A$F(0,A$C,"borderColor",function(){return this._getCSSStyle().borderColor},function(A$C){this._getCSSStyle().borderColor=A$C,this.isChanged=!0}),A$F(0,A$C,"stroke",function(){return this._getCSSStyle().stroke},function(A$C){this._getCSSStyle().stroke=A$C,this.isChanged=!0}),A$F(0,A$C,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(A$C){this._getCSSStyle().strokeColor=A$C,this.isChanged=!0}),A$F(0,A$C,"isChanged",null,function(A$C){this._isChanged!==A$C&&(this._isChanged=A$C)&&A$h.timer.callLater(this,this.typeset)}),A$F(0,A$C,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(A$C){if(!(this.overflow!=A$K.SCROLL||this.textWidth<this._width)&&this._clipPoint){A$C=A$C<this.padding[3]?this.padding[3]:A$C;var A$R=this._textWidth-this._width;A$C=A$R<A$C?A$R:A$C;var A$j=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=A$C,this.renderText(this._lastVisibleLineIndex,A$j)}}),A$F(0,A$C,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(A$C){if(!(this.overflow!=A$K.SCROLL||this.textHeight<this._height)&&this._clipPoint){A$C=A$C<this.padding[0]?this.padding[0]:A$C;var A$R=this._textHeight-this._height,A$j=(A$C=A$R<A$C?A$R:A$C)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=A$j;var A$w=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=A$C,this.renderText(A$j,A$w)}}),A$F(0,A$C,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),A$F(0,A$C,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),A$F(0,A$C,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),A$F(0,A$C,"underlineColor",function(){return this._underlineColor},function(A$C){this._underlineColor=A$C,this._isChanged=!0,this.typeset()}),A$K.registerBitmapFont=function(A$C,A$R){A$K._bitmapFonts||(A$K._bitmapFonts={}),A$K._bitmapFonts[A$C]=A$R},A$K.unregisterBitmapFont=function(A$C,A$R){if(void 0===A$R&&(A$R=!0),A$K._bitmapFonts&&A$K._bitmapFonts[A$C]){var A$j=A$K._bitmapFonts[A$C];A$R&&A$j.destroy(),delete A$K._bitmapFonts[A$C]}},A$K.setTextRightToLeft=function(){var A$C;(A$C=A$V.canvas.source.style).display="none",A$C.position="absolute",A$C.direction="rtl",A$a._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,A$V.document.body.appendChild(A$V.canvas.source)},A$K.supportFont=function(A$C){A$V.context.font="10px sans-serif";var A$R=A$V.context.measureText("abcji").width;A$V.context.font="10px "+A$C;var A$j=A$V.context.measureText("abcji").width;return console.log(A$R,A$j),A$R!==A$j},A$K._testWord="游",A$K.langPacks=null,A$K.VISIBLE="visible",A$K.SCROLL="scroll",A$K.HIDDEN="hidden",A$K.CharacterCache=!0,A$K.RightToLeft=!1,A$K._bitmapFonts=null,A$t(A$K,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),A$K}(A$HC),A$QC=function(A$H){function A$o(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",A$o.__super.call(this),this.offset=new A$x,this._canvasTransform=new A$P,this._previousOrientation=A$V.window.orientation;var A$R=this;this.transform=A$P.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var A$C=A$V.window,A$j=this;A$C.addEventListener("focus",function(){A$R._isFocused=!0,A$j.event("focus"),A$j.event("focuschange")}),A$C.addEventListener("blur",function(){A$R._isFocused=!1,A$j.event("blur"),A$j.event("focuschange"),A$j._isInputting()&&(A$fC.inputElement.target.focus=!1)});var A$w="visibilityState",A$T="visibilitychange",A$G=A$C.document;void 0!==A$G.hidden?(A$T="visibilitychange",A$w="visibilityState"):void 0!==A$G.mozHidden?(A$T="mozvisibilitychange",A$w="mozVisibilityState"):void 0!==A$G.msHidden?(A$T="msvisibilitychange",A$w="msVisibilityState"):void 0!==A$G.webkitHidden&&(A$T="webkitvisibilitychange",A$w="webkitVisibilityState"),A$C.document.addEventListener(A$T,function(){"hidden"==A$V.document[A$w]?A$j._setStageVisible(!1):A$j._setStageVisible(!0)}),A$C.document.addEventListener("qbrowserVisibilityChange",function(A$C){A$j._setStageVisible(!A$C.hidden)}),A$C.addEventListener("resize",function(){var A$C=A$V.window.orientation;null!=A$C&&A$C!=A$R._previousOrientation&&A$j._isInputting()&&(A$fC.inputElement.target.focus=!1),A$R._previousOrientation=A$C,A$j._isInputting()||A$j._resetCanvas()}),A$C.addEventListener("orientationchange",function(A$C){A$j._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),A$V.onMobile&&this.on("mousedown",this,this._onmouseMove)}A$e(A$o,"laya.display.Stage",A$H);var A$C=A$o.prototype;return A$C._setStageVisible=function(A$C){this._isVisibility!=A$C&&(this._isVisibility=A$C,this._isVisibility||this._isInputting()&&(A$fC.inputElement.target.focus=!1),this.event("visibilitychange"))},A$C._isInputting=function(){return A$V.onMobile&&A$fC.isInputting},A$C._changeCanvasSize=function(){this.setScreenSize(A$V.clientWidth*A$V.pixelRatio,A$V.clientHeight*A$V.pixelRatio)},A$C._resetCanvas=function(){if(this.screenAdaptationEnabled){var A$C=A$a._mainCanvas;A$C.source.style;A$C.size(1,1),A$h.timer.once(100,this,this._changeCanvasSize)}},A$C.setScreenSize=function(A$C,A$R){var A$j=!1;if("none"!==this._screenMode&&(A$j=(A$C/A$R<1?"vertical":"horizontal")!==this._screenMode)){var A$w=A$R;A$R=A$C,A$C=A$w}this.canvasRotation=A$j;var A$T=A$a._mainCanvas,A$G=A$T.source.style,A$o=this._canvasTransform.identity(),A$U=this._scaleMode,A$t=A$C/this.designWidth,A$I=A$R/this.designHeight,A$e=this.designWidth,A$H=this.designHeight,A$M=A$C,A$K=A$R,A$F=A$V.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,A$U){case"noscale":A$t=A$I=1,A$M=this.designWidth,A$K=this.designHeight;break;case"showall":A$t=A$I=Math.min(A$t,A$I),A$e=A$M=Math.round(this.designWidth*A$t),A$H=A$K=Math.round(this.designHeight*A$I);break;case"noborder":A$t=A$I=Math.max(A$t,A$I),A$M=Math.round(this.designWidth*A$t),A$K=Math.round(this.designHeight*A$I);break;case"full":A$t=A$I=1,this._width=A$e=A$C,this._height=A$H=A$R;break;case"fixedwidth":A$I=A$t,this._height=A$H=Math.round(A$R/A$t);break;case"fixedheight":A$t=A$I,this._width=A$e=Math.round(A$C/A$I);break;case"fixedauto":A$C/A$R<this.designWidth/this.designHeight?(A$I=A$t,this._height=A$H=Math.round(A$R/A$t)):(A$t=A$I,this._width=A$e=Math.round(A$C/A$I))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,A$e=A$e+1&2147483646,A$H=A$H+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),A$t*=this.scaleX,A$I*=this.scaleY,1===A$t&&1===A$I?this.transform.identity():(this.transform.a=this._formatData(A$t/(A$M/A$e)),this.transform.d=this._formatData(A$I/(A$K/A$H)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),A$T.size(A$e,A$H),A$E.changeWebGLSize(A$e,A$H),A$o.scale(A$M/A$e/A$F,A$K/A$H/A$F),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(A$C-A$M)/A$F:this.offset.x=.5*(A$C-A$M)/A$F,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(A$R-A$K)/A$F:this.offset.y=.5*(A$R-A$K)/A$F,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),A$o.translate(this.offset.x,this.offset.y),this.canvasDegree=0,A$j&&("horizontal"===this._screenMode?(A$o.rotate(Math.PI/2),A$o.translate(A$R/A$F,0),this.canvasDegree=90):(A$o.rotate(-Math.PI/2),A$o.translate(0,A$C/A$F),this.canvasDegree=-90)),A$o.a=this._formatData(A$o.a),A$o.d=this._formatData(A$o.d),A$o.tx=this._formatData(A$o.tx),A$o.ty=this._formatData(A$o.ty),A$G.transformOrigin=A$G.webkitTransformOrigin=A$G.msTransformOrigin=A$G.mozTransformOrigin=A$G.oTransformOrigin="0px 0px 0px",A$G.transform=A$G.webkitTransform=A$G.msTransform=A$G.mozTransform=A$G.oTransform="matrix("+A$o.toString()+")",A$o.translate(parseInt(A$G.left)||0,parseInt(A$G.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},A$C._formatData=function(A$C){return Math.abs(A$C)<1e-6?0:Math.abs(1-A$C)<.001?0<A$C?1:-1:A$C},A$C.getMousePoint=function(){return A$x.TEMP.setTo(this.mouseX,this.mouseY)},A$C.repaint=function(){this._repaint=1},A$C.parentRepaint=function(){},A$C._loop=function(){return this.render(A$a.context,0,0),!0},A$C._onmouseMove=function(A$C){this._mouseMoveTime=A$V.now()},A$C.getTimeFromFrameStart=function(){return A$V.now()-this._frameStartTime},A$C.render=function(A$C,A$R,A$j){if("sleep"===this._frameRate&&!A$a.isConchApp){var A$w=A$V.now();if(!(1e3<=A$w-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(A$c.loopCount++,A$L.instance.runEvent(),A$h.timer._update()));this._frameStartTime=A$w}if(this._renderCount++,A$a.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=A$V.now();var A$T="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),A$G=this._renderCount%2==0;if(A$c.renderSlow=!A$T,A$T||A$G||A$a.isConchApp){var A$o;A$c.loopCount++,A$L.instance.runEvent(),A$h.timer._update(),A$E.update3DLoop();var A$U=0,A$t=0;if(A$a.isConchNode)for(A$U=0,A$t=this._scenes.length;A$U<A$t;A$U++)(A$o=this._scenes[A$U])&&A$o._updateSceneConch();else for(A$U=0,A$t=this._scenes.length;A$U<A$t;A$U++)(A$o=this._scenes[A$U])&&A$o._updateScene();if(A$a.isConchNode){var A$I=A$HC.CustomList;for(A$U=0,A$t=A$I.length;A$U<A$t;A$U++){var A$e=A$I[A$U];A$e.customRender(A$e.customContext,0,0)}return}}A$a.isConchNode||this.renderingEnabled&&(A$T||!A$G||A$a.isConchWebGL)&&(A$a.isWebGL?A$a.WebGL.mainContext&&!A$a.WebGL.mainContext.isContextLost()&&(A$C.clear(),A$H.prototype.render.call(this,A$C,A$R,A$j),A$c._show&&A$c._sp&&A$c._sp.render(A$C,A$R,A$j),A$E.clear(this._bgColor),A$E.beginFlush(),A$C.flush(),A$E.endFinish(),A$O.instance&&A$O.getInstance().endDispose()):(A$E.clear(this._bgColor),A$H.prototype.render.call(this,A$C,A$R,A$j),A$c._show&&A$c._sp&&A$c._sp.render(A$C,A$R,A$j)))}else this._renderCount%5==0&&(A$c.loopCount++,A$L.instance.runEvent(),A$h.timer._update())},A$C._requestFullscreen=function(){var A$C=A$V.document.documentElement;A$C.requestFullscreen?A$C.requestFullscreen():A$C.mozRequestFullScreen?A$C.mozRequestFullScreen():A$C.webkitRequestFullscreen?A$C.webkitRequestFullscreen():A$C.msRequestFullscreen&&A$C.msRequestFullscreen()},A$C._fullScreenChanged=function(){A$h.stage.event("fullscreenchange")},A$C.exitFullscreen=function(){var A$C=A$V.document;A$C.exitFullscreen?A$C.exitFullscreen():A$C.mozCancelFullScreen?A$C.mozCancelFullScreen():A$C.webkitExitFullscreen&&A$C.webkitExitFullscreen()},A$F(0,A$C,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),A$F(0,A$C,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),A$F(0,A$C,"frameRate",function(){return this._frameRate},function(A$C){if(this._frameRate=A$C,A$a.isConchApp)switch(this._frameRate){case"slow":A$V.window.conch&&A$V.window.conchConfig.setSlowFrame&&A$V.window.conchConfig.setSlowFrame(!0);break;case"fast":A$V.window.conch&&A$V.window.conchConfig.setSlowFrame&&A$V.window.conchConfig.setSlowFrame(!1);break;case"mouse":A$V.window.conch&&A$V.window.conchConfig.setMouseFrame&&A$V.window.conchConfig.setMouseFrame(2e3);break;case"sleep":A$V.window.conch&&A$V.window.conchConfig.setLimitFPS&&A$V.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),A$F(0,A$C,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),A$F(0,A$C,"width",A$H.prototype._$get_width,function(A$C){this.designWidth=A$C,A$h.superSet(A$HC,this,"width",A$C),A$h.timer.callLater(this,this._changeCanvasSize)}),A$F(0,A$C,"alignH",function(){return this._alignH},function(A$C){this._alignH=A$C,A$h.timer.callLater(this,this._changeCanvasSize)}),A$F(0,A$C,"isFocused",function(){return this._isFocused}),A$F(0,A$C,"height",A$H.prototype._$get_height,function(A$C){this.designHeight=A$C,A$h.superSet(A$HC,this,"height",A$C),A$h.timer.callLater(this,this._changeCanvasSize)}),A$F(0,A$C,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||A$P.create()},A$H.prototype._$set_transform),A$F(0,A$C,"isVisibility",function(){return this._isVisibility}),A$F(0,A$C,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),A$F(0,A$C,"scaleMode",function(){return this._scaleMode},function(A$C){this._scaleMode=A$C,A$h.timer.callLater(this,this._changeCanvasSize)}),A$F(0,A$C,"alignV",function(){return this._alignV},function(A$C){this._alignV=A$C,A$h.timer.callLater(this,this._changeCanvasSize)}),A$F(0,A$C,"bgColor",function(){return this._bgColor},function(A$C){this._bgColor=A$C,this.conchModel&&this.conchModel.bgColor(A$C),A$a.isWebGL&&(A$C?A$o._wgColor=A$B.create(A$C)._color:A$V.onMiniGame||(A$o._wgColor=null)),A$V.onLimixiu?A$o._wgColor=A$B.create(A$C)._color:A$a.canvas.style.background=A$C||"none"}),A$F(0,A$C,"mouseX",function(){return Math.round(A$L.instance.mouseX/this.clientScaleX)}),A$F(0,A$C,"mouseY",function(){return Math.round(A$L.instance.mouseY/this.clientScaleY)}),A$F(0,A$C,"screenMode",function(){return this._screenMode},function(A$C){this._screenMode=A$C}),A$F(0,A$C,"visible",A$H.prototype._$get_visible,function(A$C){this.visible!==A$C&&(A$h.superSet(A$HC,this,"visible",A$C),A$a._mainCanvas.source.style.visibility=A$C?"visible":"hidden")}),A$F(0,A$C,"fullScreenEnabled",null,function(A$C){var A$R=A$V.document,A$j=A$a.canvas;A$C?(A$j.addEventListener("mousedown",this._requestFullscreen),A$j.addEventListener("touchstart",this._requestFullscreen),A$R.addEventListener("fullscreenchange",this._fullScreenChanged),A$R.addEventListener("mozfullscreenchange",this._fullScreenChanged),A$R.addEventListener("webkitfullscreenchange",this._fullScreenChanged),A$R.addEventListener("msfullscreenchange",this._fullScreenChanged)):(A$j.removeEventListener("mousedown",this._requestFullscreen),A$j.removeEventListener("touchstart",this._requestFullscreen),A$R.removeEventListener("fullscreenchange",this._fullScreenChanged),A$R.removeEventListener("mozfullscreenchange",this._fullScreenChanged),A$R.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),A$R.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),A$o.SCALE_NOSCALE="noscale",A$o.SCALE_EXACTFIT="exactfit",A$o.SCALE_SHOWALL="showall",A$o.SCALE_NOBORDER="noborder",A$o.SCALE_FULL="full",A$o.SCALE_FIXED_WIDTH="fixedwidth",A$o.SCALE_FIXED_HEIGHT="fixedheight",A$o.SCALE_FIXED_AUTO="fixedauto",A$o.ALIGN_LEFT="left",A$o.ALIGN_RIGHT="right",A$o.ALIGN_CENTER="center",A$o.ALIGN_TOP="top",A$o.ALIGN_MIDDLE="middle",A$o.ALIGN_BOTTOM="bottom",A$o.SCREEN_NONE="none",A$o.SCREEN_HORIZONTAL="horizontal",A$o.SCREEN_VERTICAL="vertical",A$o.FRAME_FAST="fast",A$o.FRAME_SLOW="slow",A$o.FRAME_MOUSE="mouse",A$o.FRAME_SLEEP="sleep",A$o.FRAME_MOUSE_THREDHOLD=2e3,A$t(A$o,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),A$o}(A$HC),A$ZC=(function(A$C){function A$R(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,A$R.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}A$e(A$R,"laya.media.SoundNode",A$HC);var A$j=A$R.prototype;A$j._onParentChange=function(){this.target=this.parent},A$j.play=function(A$C,A$R){void 0===A$C&&(A$C=1),isNaN(A$C)&&(A$C=1),this.url&&(this.stop(),this._channel=A$r.playSound(this.url,A$C,null,A$R))},A$j.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},A$j._setPlayAction=function(A$C,A$R,A$j,A$w){void 0===A$w&&(A$w=!0),this[A$j]&&A$C&&(A$w?A$C.on(A$R,this,this[A$j]):A$C.off(A$R,this,this[A$j]))},A$j._setPlayActions=function(A$C,A$R,A$j,A$w){if(void 0===A$w&&(A$w=!0),A$C&&A$R){var A$T,A$G=A$R.split(","),A$o=0;for(A$T=A$G.length,A$o=0;A$o<A$T;A$o++)this._setPlayAction(A$C,A$G[A$o],A$j,A$w)}},A$F(0,A$j,"playEvent",null,function(A$C){(this._playEvents=A$C)&&this._tar&&this._setPlayActions(this._tar,A$C,"play")}),A$F(0,A$j,"target",null,function(A$C){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=A$C,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),A$F(0,A$j,"stopEvent",null,function(A$C){(this._stopEvents=A$C)&&this._tar&&this._setPlayActions(this._tar,A$C,"stop")})}(),function(A$C){function A$R(){this._src=null,this._onload=null,this._onerror=null,A$R.__super.call(this)}A$e(A$R,"laya.resource.FileBitmap",A$FC);var A$j=A$R.prototype;return A$F(0,A$j,"src",function(){return this._src},function(A$C){this._src=A$C}),A$F(0,A$j,"onload",null,function(A$C){}),A$F(0,A$j,"onerror",null,function(A$C){}),A$R}()),A$SC=function(A$C){function A$j(A$C,A$R){this._is2D=!1,A$j.__super.call(this);var A$w=this;if(this._source=this,"2D"===A$C||"AUTO"===A$C&&!A$a.isWebGL){this._is2D=!0,this._source=A$R||A$V.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var A$T=this;A$T.getContext=function(A$C,A$R){if(A$w._ctx)return A$w._ctx;var A$j=A$w._ctx=A$w._source.getContext(A$C,A$R);return A$j&&(A$j._canvas=A$T,A$a.isFlash||A$V.onLimixiu||(A$j.size=function(A$C,A$R){})),A$j}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}A$e(A$j,"laya.resource.HTMLCanvas",A$FC);var A$R=A$j.prototype;return A$R.clear=function(){this._ctx&&this._ctx.clear()},A$R.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},A$R.release=function(){},A$R._setContext=function(A$C){this._ctx=A$C},A$R.getContext=function(A$C,A$R){return this._ctx?this._ctx:this._ctx=A$j._createContext(this)},A$R.getMemSize=function(){return 0},A$R.size=function(A$C,A$R){(this._w!=A$C||this._h!=A$R||this._source&&(this._source.width!=A$C||this._source.height!=A$R))&&(this._w=A$C,this._h=A$R,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(A$C,A$R),this._source&&(this._source.height=A$R,this._source.width=A$C))},A$R.getCanvas=function(){return this._source},A$R.toBase64=function(A$C,A$R,A$j){if(this._source)if(A$a.isConchApp&&this._source.toBase64)this._source.toBase64(A$C,A$R,A$j);else{var A$w=this._source.toDataURL(A$C,A$R);A$j.call(this,A$w)}},A$F(0,A$R,"context",function(){return this._ctx}),A$F(0,A$R,"asBitmap",null,function(A$C){}),A$j.create=function(A$C,A$R){return new A$j(A$C,A$R)},A$j.TYPE2D="2D",A$j.TYPE3D="3D",A$j.TYPEAUTO="AUTO",A$j._createContext=null,A$j}(),A$bC=(function(A$C){function A$t(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){throw A$t.__super.call(this),new Error("不允许new！")}A$e(A$t,"laya.resource.HTMLSubImage",A$FC),A$t.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){return void 0===A$U&&(A$U=!1),new A$t(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U)}}(),function(A$C){function A$H(){this._frames=null,this._url=null,A$H.__super.call(this),this._setControlNode(this)}A$e(A$H,"laya.display.Animation",A$C);var A$R=A$H.prototype;A$R.destroy=function(A$C){void 0===A$C&&(A$C=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,A$C),this._frames=null,this._labels=null},A$R.play=function(A$C,A$R,A$j,A$w){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=!0),void 0===A$j&&(A$j=""),void 0===A$w&&(A$w=!0),A$j&&this._setFramesFromCache(A$j,A$w),this._isPlaying=!0,this.index="string"==typeof A$C?this._getFrameByLabel(A$C):A$C,this.loop=A$R,this._actionName=A$j,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},A$R._setFramesFromCache=function(A$C,A$R){var A$j;return void 0===A$R&&(A$R=!1),this._url&&(A$C=this._url+"#"+A$C),A$C&&A$H.framesMap[A$C]?((A$j=A$H.framesMap[A$C])instanceof Array?(this._frames=A$H.framesMap[A$C],this._count=this._frames.length):(A$j.nodeRoot&&(A$H.framesMap[A$C]=this._parseGraphicAnimationByData(A$j),A$j=A$H.framesMap[A$C]),this._frames=A$j.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=A$j.interval),this._labels=this._copyLabels(A$j.labels)),!0):(A$R&&console.log("ani not found:",A$C),!1)},A$R._copyLabels=function(A$C){if(!A$C)return null;var A$R,A$j;for(A$j in A$R={},A$C)A$R[A$j]=A$d.copyArray([],A$C[A$j]);return A$R},A$R._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&A$C.prototype._frameLoop.call(this)},A$R._displayToIndex=function(A$C){this._frames&&(this.graphics=this._frames[A$C])},A$R.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},A$R.loadImages=function(A$C,A$R){return void 0===A$R&&(A$R=""),this._url="",this._setFramesFromCache(A$R)||(this.frames=A$H.framesMap[A$R]?A$H.framesMap[A$R]:A$H.createFrames(A$C,A$R)),this},A$R.loadAtlas=function(A$R,A$j,A$w){void 0===A$w&&(A$w=""),this._url="";var A$T=this;function A$C(A$C){A$R===A$C&&(A$T.frames=A$H.framesMap[A$w]?A$H.framesMap[A$w]:A$H.createFrames(A$R,A$w),A$j&&A$j.run())}return A$T._setFramesFromCache(A$w)||(A$UC.getAtlas(A$R)?A$C(A$R):A$h.loader.load(A$R,A$Z.create(null,A$C,[A$R]),null,"atlas")),this},A$R.loadAnimation=function(A$C,A$R,A$j){this._url=A$C;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,A$R&&A$R.run()):!A$j||A$UC.getAtlas(A$j)?this._loadAnimationData(A$C,A$R,A$j):A$h.loader.load(A$j,A$Z.create(this,this._loadAnimationData,[A$C,A$R,A$j]),null,"atlas"),this},A$R._loadAnimationData=function(A$U,A$t,A$C){var A$I=this;if(!A$C||A$UC.getAtlas(A$C)){var A$e=this;A$UC.getRes(A$U)?A$R(A$U):A$h.loader.load(A$U,A$Z.create(null,A$R,[A$U]),null,"json"),A$UC.clearRes(A$U)}else console.warn("atlas load fail:"+A$C);function A$R(A$C){if(A$UC.getRes(A$C)&&A$U===A$C){var A$R;if(A$H.framesMap[A$U+"#"])A$e._setFramesFromCache(A$I._actionName,!0),A$I.index=0,A$I._checkResumePlaying();else{var A$j=A$e._parseGraphicAnimation(A$UC.getRes(A$U));if(!A$j)return;var A$w,A$T=A$j.animationList,A$G=0,A$o=A$T.length;for(A$G=0;A$G<A$o;A$G++)A$R=A$T[A$G],A$H.framesMap[A$U+"#"+A$R.name]=A$R,A$w||(A$w=A$R);A$w&&(A$H.framesMap[A$U+"#"]=A$w,A$e._setFramesFromCache(A$I._actionName,!0),A$I.index=0),A$I._checkResumePlaying()}A$t&&A$t.run()}}},A$R._parseGraphicAnimation=function(A$C){return A$hC.parseAnimationData(A$C)},A$R._parseGraphicAnimationByData=function(A$C){return A$hC.parseAnimationByData(A$C)},A$F(0,A$R,"frames",function(){return this._frames},function(A$C){(this._frames=A$C)&&(this._count=A$C.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),A$F(0,A$R,"autoPlay",null,function(A$C){A$C?this.play():this.stop()}),A$F(0,A$R,"source",null,function(A$C){-1<A$C.indexOf(".ani")?this.loadAnimation(A$C):-1<A$C.indexOf(".json")||-1<A$C.indexOf("als")||-1<A$C.indexOf("atlas")?this.loadAtlas(A$C):this.loadImages(A$C.split(","))}),A$F(0,A$R,"autoAnimation",null,function(A$C){this.play(0,!0,A$C,!1)}),A$H.createFrames=function(A$C,A$R){var A$j,A$w,A$T=0,A$G=0;if("string"==typeof A$C){var A$o=A$UC.getAtlas(A$C);if(A$o&&A$o.length)for(A$j=[],A$T=0,A$G=A$o.length;A$T<A$G;A$T++)(A$w=new A$E.createGraphics).drawTexture(A$UC.getRes(A$o[A$T]),0,0),A$j.push(A$w)}else if(A$C instanceof Array)for(A$j=[],A$T=0,A$G=A$C.length;A$T<A$G;A$T++)(A$w=new A$E.createGraphics).loadImage(A$C[A$T],0,0),A$j.push(A$w);return A$R&&(A$H.framesMap[A$R]=A$j),A$j},A$H.clearCache=function(A$C){var A$R,A$j=A$H.framesMap,A$w=A$C+"#";for(A$R in A$j)A$R!==A$C&&0!=A$R.indexOf(A$w)||delete A$H.framesMap[A$R]},A$H.framesMap={}}(A$LC),function(A$C){function A$G(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,A$G.__super.call(this),null==A$G._sortIndexFun&&(A$G._sortIndexFun=A$p.sortByKey("index",!1,!0))}A$e(A$G,"laya.display.FrameAnimation",A$C);var A$R=A$G.prototype;return A$R._setUp=function(A$C,A$R){this._labels=null,this._animationNewFrames=null,this._targetDic=A$C,this._animationData=A$R,this.interval=1e3/A$R.frameRate,A$R.parsed?(this._count=A$R.count,this._labels=A$R.labels,this._animationNewFrames=A$R.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),A$R.parsed=!0,A$R.labels=this._labels,A$R.count=this._count,A$R.animationNewFrames=this._animationNewFrames},A$R.clear=function(){A$C.prototype.clear.call(this),this._targetDic=null,this._animationData=null},A$R._displayToIndex=function(A$C){if(this._animationData){A$C<0&&(A$C=0),A$C>this._count&&(A$C=this._count);var A$R=this._animationData.nodes,A$j=0,A$w=A$R.length;for(A$j=0;A$j<A$w;A$j++)this._displayNodeToFrame(A$R[A$j],A$C)}},A$R._displayNodeToFrame=function(A$C,A$R,A$j){A$j||(A$j=this._targetDic);var A$w=A$j[A$C.target];if(A$w){var A$T,A$G,A$o,A$U=A$C.frames,A$t=A$C.keys,A$I=0,A$e=A$t.length;for(A$I=0;A$I<A$e;A$I++)A$o=(A$G=A$U[A$T=A$t[A$I]]).length>A$R?A$G[A$R]:A$G[A$G.length-1],A$w[A$T]=A$o}},A$R._calculateDatas=function(){if(this._animationData){var A$C,A$R=this._animationData.nodes,A$j=0,A$w=A$R.length;for(A$j=this._count=0;A$j<A$w;A$j++)A$C=A$R[A$j],this._calculateNodeKeyFrames(A$C);this._count+=1}},A$R._calculateNodeKeyFrames=function(A$C){var A$R,A$j,A$w=A$C.keyframes,A$T=A$C.target;for(A$R in A$C.frames||(A$C.frames={}),A$C.keys?A$C.keys.length=0:A$C.keys=[],A$C.initValues||(A$C.initValues={}),A$w)A$j=A$w[A$R],A$C.frames[A$R]||(A$C.frames[A$R]=[]),this._targetDic&&this._targetDic[A$T]&&(A$C.initValues[A$R]=this._targetDic[A$T][A$R]),A$j.sort(A$G._sortIndexFun),A$C.keys.push(A$R),this._calculateNodePropFrames(A$j,A$C.frames[A$R],A$R,A$T)},A$R.resetToInitState=function(){if(this._targetDic&&this._animationData){var A$C,A$R,A$j=this._animationData.nodes,A$w=0,A$T=A$j.length;for(A$w=0;A$w<A$T;A$w++)if(A$R=(A$C=A$j[A$w]).initValues){var A$G,A$o=this._targetDic[A$C.target];if(A$o)for(A$G in A$R)A$o[A$G]=A$R[A$G]}}},A$R._calculateNodePropFrames=function(A$C,A$R,A$j,A$w){var A$T=0,A$G=A$C.length-1;if(0<A$G){for(A$R.length=A$C[A$G].index+1,A$T=0;A$T<A$G;A$T++)this._dealKeyFrame(A$C[A$T]),this._calculateFrameValues(A$C[A$T],A$C[A$T+1],A$R);this._dealKeyFrame(A$C[A$T])}0==A$G&&(A$R[A$C[0].index]=A$C[0].value,this._animationNewFrames&&(this._animationNewFrames[A$C[0].index]=!0))},A$R._dealKeyFrame=function(A$C){A$C.label&&""!=A$C.label&&this.addLabel(A$C.label,A$C.index)},A$R._calculateFrameValues=function(A$C,A$R,A$j){var A$w,A$T=0,A$G=A$C.index,A$o=A$R.index,A$U=A$C.value,A$t=A$R.value-A$C.value,A$I=A$o-A$G;if(A$o>this._count&&(this._count=A$o),A$C.tween)for(null==(A$w=A$_[A$C.tweenMethod])&&(A$w=A$_.linearNone),A$T=A$G;A$T<A$o;A$T++)A$j[A$T]=A$w(A$T-A$G,A$U,A$t,A$I),this._animationNewFrames&&(this._animationNewFrames[A$T]=!0);else for(A$T=A$G;A$T<A$o;A$T++)A$j[A$T]=A$U;this._animationNewFrames&&(this._animationNewFrames[A$C.index]=!0,this._animationNewFrames[A$R.index]=!0),A$j[A$R.index]=A$R.value},A$G._sortIndexFun=null,A$G}(A$LC)),A$fC=function(A$R){function A$T(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",A$T.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=A$DC.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}A$e(A$T,"laya.display.Input",A$R);var A$C=A$T.prototype;return A$C.setSelection=function(A$C,A$R){this.focus=!0,laya.display.Input.inputElement.selectionStart=A$C,laya.display.Input.inputElement.selectionEnd=A$R},A$C._onUnDisplay=function(A$C){this.focus=!1},A$C._onMouseDown=function(A$C){this.focus=!0},A$C._syncInputTransform=function(){var A$C=this.nativeInput,A$R=A$d.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),A$j=this._width-this.padding[1]-this.padding[3],A$w=this._height-this.padding[0]-this.padding[2];A$a.isConchApp?(A$C.setScale(A$R.scaleX,A$R.scaleY),A$C.setSize(A$j,A$w),A$C.setPos(A$R.x,A$R.y)):(A$T.inputContainer.style.transform=A$T.inputContainer.style.webkitTransform="scale("+A$R.scaleX+","+A$R.scaleY+") rotate("+A$h.stage.canvasDegree+"deg)",A$C.style.width=A$j+"px",A$C.style.height=A$w+"px",A$T.inputContainer.style.left=A$R.x+"px",A$T.inputContainer.style.top=A$R.y+"px")},A$C.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},A$C._setInputMethod=function(){A$T.input.parentElement&&A$T.inputContainer.removeChild(A$T.input),A$T.area.parentElement&&A$T.inputContainer.removeChild(A$T.area),A$T.inputElement=this._multiline?A$T.area:A$T.input,A$T.inputContainer.appendChild(A$T.inputElement),A$DC.RightToLeft&&(A$T.inputElement.style.direction="rtl")},A$C._focusIn=function(){laya.display.Input.isInputting=!0;var A$C=this.nativeInput;this._focus=!0;var A$R=A$C.style;A$R.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),A$C.readOnly=!this._editable,A$a.isConchApp&&(A$C.setType(this._type),A$C.setForbidEdit(!this._editable)),A$C.maxLength=this._maxChars;this.padding;if(A$C.type=this._type,A$C.value=this._content,A$C.placeholder=this._prompt,A$h.stage.off("keydown",this,this._onKeyDown),A$h.stage.on("keydown",this,this._onKeyDown),(A$h.stage.focus=this).event("focus"),A$V.onPC&&A$C.focus(),!A$V.onMiniGame){this._text;this._text=null}this.typeset(),A$C.setColor(this._originColor),A$C.setFontSize(this.fontSize),A$C.setFontFace(A$V.onIPhone&&A$DC._fontFamilyMap[this.font]||this.font),A$a.isConchApp&&A$C.setMultiAble&&A$C.setMultiAble(this._multiline),A$R.lineHeight=this.leading+this.fontSize+"px",A$R.fontStyle=this.italic?"italic":"normal",A$R.fontWeight=this.bold?"bold":"normal",A$R.textAlign=this.align,A$R.padding="0 0",this._syncInputTransform(),!A$a.isConchApp&&A$V.onPC&&A$h.timer.frameLoop(1,this,this._syncInputTransform)},A$C._setPromptColor=function(){(A$T.promptStyleDOM=A$V.getElementById("promptStyle"))||((A$T.promptStyleDOM=A$V.createElement("style")).setAttribute("id","promptStyle"),A$V.document.head.appendChild(A$T.promptStyleDOM)),A$T.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},A$C._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(A$h.superSet(A$DC,this,"text",this._content),A$h.superSet(A$DC,this,"color",this._originColor)):(A$h.superSet(A$DC,this,"text",this._prompt),A$h.superSet(A$DC,this,"color",this._promptColor)),A$h.stage.off("keydown",this,this._onKeyDown),A$h.stage.focus=null,this.event("blur"),A$a.isConchApp&&this.nativeInput.blur(),A$V.onPC&&A$h.timer.clear(this,this._syncInputTransform)},A$C._onKeyDown=function(A$C){13===A$C.keyCode&&(A$V.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},A$C.changeText=function(A$C){this._content=A$C,this._focus?(this.nativeInput.value=A$C||"",this.event("change")):A$R.prototype.changeText.call(this,A$C)},A$F(0,A$C,"color",A$R.prototype._$get_color,function(A$C){this._focus&&this.nativeInput.setColor(A$C),A$h.superSet(A$DC,this,"color",this._content?A$C:this._promptColor),this._originColor=A$C}),A$F(0,A$C,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(A$C){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),A$F(0,A$C,"multiline",function(){return this._multiline},function(A$C){this._multiline=A$C,this.valign=A$C?"top":"middle"}),A$F(0,A$C,"maxChars",function(){return this._maxChars},function(A$C){A$C<=0&&(A$C=1e5),this._maxChars=A$C}),A$F(0,A$C,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(A$C){A$h.superSet(A$DC,this,"color",this._originColor),A$C+="",this._focus?(this.nativeInput.value=A$C||"",this.event("change")):(this._multiline||(A$C=A$C.replace(/\r?\n/g,"")),(this._content=A$C)?A$h.superSet(A$DC,this,"text",A$C):(A$h.superSet(A$DC,this,"text",this._prompt),A$h.superSet(A$DC,this,"color",this.promptColor)))}),A$F(0,A$C,"nativeInput",function(){return this._multiline?A$T.area:A$T.input}),A$F(0,A$C,"prompt",function(){return this._prompt},function(A$C){!this._text&&A$C&&A$h.superSet(A$DC,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?A$h.superSet(A$DC,this,"text",this._text==this._prompt?A$C:this._text):A$h.superSet(A$DC,this,"text",A$C),this._prompt=A$DC.langPacks&&A$DC.langPacks[A$C]?A$DC.langPacks[A$C]:A$C}),A$F(0,A$C,"focus",function(){return this._focus},function(A$C){var A$R=this.nativeInput;this._focus!==A$C&&(A$C?(A$R.target?A$R.target._focusOut():this._setInputMethod(),(A$R.target=this)._focusIn()):(A$R.target=null,this._focusOut(),A$V.document.body.scrollTop=0,A$R.blur(),A$a.isConchApp?A$R.setPos(-1e4,-1e4):A$T.inputContainer.contains(A$R)&&A$T.inputContainer.removeChild(A$R)))}),A$F(0,A$C,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(A$C){A$C?(-1<(A$C="[^"+A$C+"]").indexOf("^^")&&(A$C=A$C.replace("^^","")),this._restrictPattern=new RegExp(A$C,"g")):this._restrictPattern=null}),A$F(0,A$C,"editable",function(){return this._editable},function(A$C){this._editable=A$C,A$a.isConchApp&&A$T.input.setForbidEdit(!A$C)}),A$F(0,A$C,"promptColor",function(){return this._promptColor},function(A$C){this._promptColor=A$C,this._content||A$h.superSet(A$DC,this,"color",A$C)}),A$F(0,A$C,"type",function(){return this._type},function(A$C){this._getCSSStyle().password="password"==A$C,this._type=A$C,A$a.isConchApp&&this.nativeInput.setType(A$C)}),A$F(0,A$C,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(A$C){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),A$F(0,A$C,"asPassword",function(){return this._getCSSStyle().password},function(A$C){this._getCSSStyle().password=A$C,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),A$T.__init__=function(){A$T._createInputElement(),A$V.onMobile&&A$a.canvas.addEventListener(A$T.IOS_IFRAME?A$V.onMiniGame?"touchend":"click":"touchend",A$T._popupInputMethod)},A$T._popupInputMethod=function(A$C){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},A$T._createInputElement=function(){A$T._initInput(A$T.area=A$V.createElement("textarea")),A$T._initInput(A$T.input=A$V.createElement("input")),(A$T.inputContainer=A$V.createElement("div")).style.position="absolute",A$T.inputContainer.style.zIndex=1e5,A$V.container.appendChild(A$T.inputContainer),A$T.inputContainer.setPos=function(A$C,A$R){A$T.inputContainer.style.left=A$C+"px",A$T.inputContainer.style.top=A$R+"px"}},A$T._initInput=function(A$R){var A$C=A$R.style;A$C.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",A$C.resize="none",A$C.backgroundColor="transparent",A$C.border="none",A$C.outline="none",A$C.zIndex=1,A$R.addEventListener("input",A$T._processInputting),A$R.addEventListener("mousemove",A$T._stopEvent),A$R.addEventListener("mousedown",A$T._stopEvent),A$R.addEventListener("touchmove",A$T._stopEvent),A$R.setFontFace=function(A$C){A$R.style.fontFamily=A$C},A$a.isConchApp||(A$R.setColor=function(A$C){A$R.style.color=A$C},A$R.setFontSize=function(A$C){A$R.style.fontSize=A$C+"px"})},A$T._processInputting=function(A$C){var A$R=laya.display.Input.inputElement.target;if(A$R){var A$j=laya.display.Input.inputElement.value;A$R._restrictPattern&&(A$j=A$j.replace(/\u2006|\x27/g,""),A$R._restrictPattern.test(A$j)&&(A$j=A$j.replace(A$R._restrictPattern,""),laya.display.Input.inputElement.value=A$j)),A$R._text=A$j,A$R.event("input")}},A$T._stopEvent=function(A$C){"touchmove"==A$C.type&&A$C.preventDefault(),A$C.stopPropagation&&A$C.stopPropagation()},A$T.TYPE_TEXT="text",A$T.TYPE_PASSWORD="password",A$T.TYPE_EMAIL="email",A$T.TYPE_URL="url",A$T.TYPE_NUMBER="number",A$T.TYPE_RANGE="range",A$T.TYPE_DATE="date",A$T.TYPE_MONTH="month",A$T.TYPE_WEEK="week",A$T.TYPE_TIME="time",A$T.TYPE_DATE_TIME="datetime",A$T.TYPE_DATE_TIME_LOCAL="datetime-local",A$T.TYPE_SEARCH="search",A$T.input=null,A$T.area=null,A$T.inputElement=null,A$T.inputContainer=null,A$T.confirmButton=null,A$T.promptStyleDOM=null,A$T.inputHeight=45,A$T.isInputting=!1,A$T.stageMatrix=null,A$t(A$T,["IOS_IFRAME",function(){return this.IOS_IFRAME=A$V.onIOS&&A$V.window.top!=A$V.window.self}]),A$T}(A$DC),A$pC=function(A$C){function A$j(A$C,A$R){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,A$j.__super.call(this),A$C&&this._init_(A$C,A$R)}A$e(A$j,"laya.resource.HTMLImage",A$ZC);var A$R=A$j.prototype;return A$R._init_=function(A$C,A$R){this._src=A$C,this._source=new A$V.window.Image,A$R&&(A$R.onload&&(this.onload=A$R.onload),A$R.onerror&&(this.onerror=A$R.onerror),A$R.onCreate&&A$R.onCreate(this)),0!=A$C.indexOf("data:image")&&(this._source.crossOrigin=""),A$C&&(this._source.src=A$C)},A$R.recreateResource=function(){var A$C=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var A$R=this;this._source=new A$V.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(A$R._needReleaseAgain)return A$R._needReleaseAgain=!1,A$R._source.onload=null,void(A$R._source=null);A$R._source.onload=null,A$R.memorySize=A$C._w*A$C._h*4,A$R._recreateLock=!1,A$R.completeCreate()},this._source.src=this._src}},A$R.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},A$R.onresize=function(){this._w=this._source.width,this._h=this._source.height},A$F(0,A$R,"onload",null,function(A$C){var A$R=this;this._onload=A$C,this._source&&(this._source.onload=null!=this._onload?function(){A$R.onresize(),A$R._onload()}:null)}),A$F(0,A$R,"onerror",null,function(A$C){var A$R=this;this._onerror=A$C,this._source&&(this._source.onerror=null!=this._onerror?function(){A$R._onerror()}:null)}),A$F(0,A$R,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(A$C){this._enableMerageInAtlas=A$C,A$a.isConchApp&&this._source&&(this._source.enableMerageInAtlas=A$C)}),A$j.create=function(A$C,A$R){return new A$j(A$C,A$R)},A$j}(),A$hC=(function(A$G){function A$C(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,A$C.__super.call(this)}A$e(A$C,"laya.display.EffectAnimation",A$G);var A$R=A$C.prototype;A$R._onOtherBegin=function(A$C){A$C!=this&&this.stop()},A$R.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},A$R._onPlayAction=function(){this.play(0,!1)},A$R.play=function(A$C,A$R,A$j,A$w){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=!0),void 0===A$j&&(A$j=""),void 0===A$w&&(A$w=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,A$C,A$R,A$j,A$w))},A$R._recordInitData=function(){if(this._aniKeys){var A$C,A$R,A$j=0;for(A$C=this._aniKeys.length,A$j=0;A$j<A$C;A$j++)A$R=this._aniKeys[A$j],this._initData[A$R]=this._target[A$R]}},A$R._displayToIndex=function(A$C){if(this._animationData){A$C<0&&(A$C=0),A$C>this._count&&(A$C=this._count);var A$R=this._animationData.nodes,A$j=0,A$w=A$R.length;for(A$w=1<A$w?1:A$w,A$j=0;A$j<A$w;A$j++)this._displayNodeToFrame(A$R[A$j],A$C)}},A$R._displayNodeToFrame=function(A$C,A$R,A$j){if(this._target){var A$w;A$w=this._target;var A$T,A$G,A$o,A$U,A$t=A$C.frames,A$I=A$C.keys,A$e=0,A$H=A$I.length;A$U=A$C.secondFrames;var A$M,A$K,A$F,A$L,A$D=0;for(A$e=0;A$e<A$H;A$e++)A$G=A$t[A$T=A$I[A$e]],A$o=-1==(A$D=A$U[A$T])?this._initData[A$T]:A$R<A$D?(A$F=(A$K=A$C.keyframes[A$T])[0]).tween?(null==(A$M=A$_[A$F.tweenMethod])&&(A$M=A$_.linearNone),A$L=A$K[1],A$M(A$R,this._initData[A$T],A$L.value-this._initData[A$T],A$L.index)):this._initData[A$T]:A$G.length>A$R?A$G[A$R]:A$G[A$G.length-1],A$w[A$T]=A$o}},A$R._calculateNodeKeyFrames=function(A$C){A$G.prototype._calculateNodeKeyFrames.call(this,A$C);var A$R,A$j,A$w,A$T=A$C.keyframes;A$C.target;for(A$R in A$w={},A$C.secondFrames=A$w,A$T)(A$j=A$T[A$R]).length<=1?A$w[A$R]=-1:A$w[A$R]=A$j[1].index},A$F(0,A$R,"target",function(){return this._target},function(A$C){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=A$C,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),A$F(0,A$R,"playEvent",null,function(A$C){(this._playEvents=A$C)&&this.addEvent()}),A$F(0,A$R,"effectData",null,function(A$C){var A$R;A$C&&((A$R=A$C.animations)&&A$R[0]&&(this._setUp({},A$R[0]),A$R[0].nodes&&A$R[0].nodes[0]&&(this._aniKeys=A$R[0].nodes[0].keys)))}),A$F(0,A$R,"effectClass",null,function(A$C){var A$R,A$j;(this._effectClass=A$g.getClass(A$C),this._effectClass)&&((A$R=this._effectClass.uiView)&&(A$j=A$R.animations)&&A$j[0]&&(this._setUp({},A$j[0]),A$j[0].nodes&&A$j[0].nodes[0]&&(this._aniKeys=A$j[0].nodes[0].keys)))}),A$C.EffectAnimationBegin="effectanimationbegin"}(A$bC),function(A$R){var A$A;function A$r(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,A$r.__super.call(this)}A$e(A$r,"laya.utils.GraphicAnimation",A$R);var A$C=A$r.prototype;return A$C._parseNodeList=function(A$C){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[A$C.compId]=A$C.props,A$C.compId&&this._nodeList.push(A$C.compId);var A$R=A$C.child;if(A$R){var A$j=0,A$w=A$R.length;for(A$j=0;A$j<A$w;A$j++)this._parseNodeList(A$R[A$j])}},A$C._calGraphicData=function(A$C){var A$R;if(this._setUp(null,A$C),this._createGraphicData(),this._nodeIDAniDic)for(A$R in this._nodeIDAniDic)this._nodeIDAniDic[A$R]=null},A$C._createGraphicData=function(){var A$C,A$R=[],A$j=0,A$w=this.count,A$T=this._animationNewFrames;for(A$T||(A$T=[]),A$j=0;A$j<A$w;A$j++)!A$T[A$j]&&A$C||(A$C=this._createFrameGraphic(A$j)),A$R.push(A$C);this._gList=A$R},A$C._createFrameGraphic=function(A$C){var A$R=A$E.createGraphics();return A$r._rootMatrix||(A$r._rootMatrix=new A$P),this._updateNodeGraphic(this._rootNode,A$C,A$r._rootMatrix,A$R),A$R},A$C._updateNodeGraphic=function(A$C,A$R,A$j,A$w,A$T){var A$G;void 0===A$T&&(A$T=1);var A$o,A$U,A$t,A$I=(A$G=this._nodeGDic[A$C.compId]=this._getNodeGraphicData(A$C.compId,A$R,this._nodeGDic[A$C.compId])).alpha*A$T;if(!(A$I<.01)&&(A$G.resultTransform||(A$G.resultTransform=A$P.create()),A$o=A$G.resultTransform,A$P.mul(A$G.transform,A$j,A$o),A$G.skin&&(A$U=this._getTextureByUrl(A$G.skin))&&(A$o._checkTransform()?(A$w.drawTexture(A$U,0,0,A$G.width,A$G.height,A$o,A$I),A$G.resultTransform=null):A$w.drawTexture(A$U,A$o.tx,A$o.ty,A$G.width,A$G.height,null,A$I)),A$t=A$C.child)){var A$e,A$H=0;for(A$e=A$t.length,A$H=0;A$H<A$e;A$H++)this._updateNodeGraphic(A$t[A$H],A$R,A$o,A$w,A$I)}},A$C._updateNoChilds=function(A$C,A$R){if(A$C.skin){var A$j=this._getTextureByUrl(A$C.skin);if(A$j){var A$w=A$C.transform;A$w._checkTransform();!A$w.bTransform?A$R.drawTexture(A$j,A$w.tx,A$w.ty,A$C.width,A$C.height,null,A$C.alpha):A$R.drawTexture(A$j,0,0,A$C.width,A$C.height,A$w.clone(),A$C.alpha)}}},A$C._updateNodeGraphic2=function(A$C,A$R,A$j){var A$w;if(A$w=this._nodeGDic[A$C.compId]=this._getNodeGraphicData(A$C.compId,A$R,this._nodeGDic[A$C.compId]),A$C.child){var A$T=A$w.transform;A$T._checkTransform();var A$G,A$o;A$o=(A$G=!A$T.bTransform)&&(0!=A$T.tx||0!=A$T.ty);var A$U,A$t,A$I;if((A$U=A$T.bTransform||1!=A$w.alpha)&&A$j.save(),1!=A$w.alpha&&A$j.alpha(A$w.alpha),A$G?A$o&&A$j.translate(A$T.tx,A$T.ty):A$j.transform(A$T.clone()),A$t=A$C.child,A$w.skin&&(A$I=this._getTextureByUrl(A$w.skin))&&A$j.drawTexture(A$I,0,0,A$w.width,A$w.height),A$t){var A$e,A$H=0;for(A$e=A$t.length,A$H=0;A$H<A$e;A$H++)this._updateNodeGraphic2(A$t[A$H],A$R,A$j)}A$U?A$j.restore():A$G?A$o&&A$j.translate(-A$T.tx,-A$T.ty):A$j.transform(A$T.clone().invert())}else this._updateNoChilds(A$w,A$j)},A$C._calculateNodeKeyFrames=function(A$C){A$R.prototype._calculateNodeKeyFrames.call(this,A$C),this._nodeIDAniDic[A$C.target]=A$C},A$C.getNodeDataByID=function(A$C){return this._nodeIDAniDic[A$C]},A$C._getParams=function(A$C,A$R,A$j,A$w){var A$T=A$r._temParam;A$T.length=A$R.length;var A$G=0,A$o=A$R.length;for(A$G=0;A$G<A$o;A$G++)A$T[A$G]=this._getObjVar(A$C,A$R[A$G][0],A$j,A$R[A$G][1],A$w);return A$T},A$C._getObjVar=function(A$C,A$R,A$j,A$w,A$T){if(A$C.hasOwnProperty(A$R)){var A$G=A$C[A$R];if(A$j>=A$G.length&&(A$j=A$G.length-1),null!=A$C[A$R][A$j])return A$C[A$R][A$j]}return A$T.hasOwnProperty(A$R)?A$T[A$R]:A$w},A$C._getNodeGraphicData=function(A$C,A$R,A$j){A$j||(A$j=A$A.create()),A$j.transform?A$j.transform.identity():A$j.transform=A$P.create();var A$w=this.getNodeDataByID(A$C);if(!A$w)return A$j;var A$T,A$G,A$o=A$w.frames,A$U=this._getParams(A$o,A$r._drawTextureCmd,A$R,this._nodeDefaultProps[A$C]),A$t=A$U[0],A$I=NaN,A$e=NaN,A$H=A$U[5],A$M=A$U[6],A$K=A$U[13],A$F=A$U[14],A$L=A$U[7],A$D=A$U[8],A$Q=A$U[9],A$Z=A$U[11],A$S=A$U[12];A$I=A$U[3],A$e=A$U[4],0!=A$I&&0!=A$e||(A$t=null),-1==A$I&&(A$I=0),-1==A$e&&(A$e=0),A$j.skin=A$t,A$j.width=A$I,A$j.height=A$e,A$t&&((A$T=this._getTextureByUrl(A$t))?(A$I||(A$I=A$T.sourceWidth),A$e||(A$e=A$T.sourceHeight)):console.warn("lost skin:",A$t,",you may load pics first")),A$j.alpha=A$U[10],A$G=A$j.transform,0!=A$K&&(A$H=A$K*A$I),0!=A$F&&(A$M=A$F*A$e),0==A$H&&0==A$M||A$G.translate(-A$H,-A$M);var A$b=null;if(A$Q||1!==A$L||1!==A$D||A$Z||A$S){(A$b=A$r._tempMt).identity(),A$b.bTransform=!0;var A$f=.0174532922222222*(A$Q-A$Z),A$p=.0174532922222222*(A$Q+A$S),A$h=Math.cos(A$p),A$x=Math.sin(A$p),A$W=Math.sin(A$f),A$$=Math.cos(A$f);A$b.a=A$L*A$h,A$b.b=A$L*A$x,A$b.c=-A$D*A$W,A$b.d=A$D*A$$,A$b.tx=A$b.ty=0}return A$b&&(A$G=A$P.mul(A$G,A$b,A$G)),A$G.translate(A$U[1],A$U[2]),A$j},A$C._getTextureByUrl=function(A$C){return A$UC.getRes(A$C)},A$C.setAniData=function(A$C,A$R){if(A$C.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=A$C,this._parseNodeList(A$C);var A$j,A$w={},A$T=[],A$G=A$C.animations,A$o=0,A$U=A$G.length;for(A$o=0;A$o<A$U;A$o++)if(A$j=A$G[A$o],this._labels=null,(!A$R||A$R==A$j.name)&&A$j){try{this._calGraphicData(A$j)}catch(A$C){console.warn("parse animation fail:"+A$j.name+",empty animation created"),this._gList=[]}var A$t={};A$t.interval=1e3/A$j.frameRate,A$t.frames=this._gList,A$t.labels=this._labels,A$t.name=A$j.name,A$T.push(A$t),A$w[A$j.name]=A$t}this.animationList=A$T,this.animationDic=A$w}A$r._temParam.length=0},A$C.parseByData=function(A$C){var A$R,A$j;A$R=A$C.nodeRoot,A$j=A$C.aniO,delete A$C.nodeRoot,delete A$C.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=A$R,this._parseNodeList(A$R),this._labels=null;try{this._calGraphicData(A$j)}catch(A$C){console.warn("parse animation fail:"+A$j.name+",empty animation created"),this._gList=[]}var A$w=A$C;return A$w.interval=1e3/A$j.frameRate,A$w.frames=this._gList,A$w.labels=this._labels,A$w.name=A$j.name,A$w},A$C.setUpAniData=function(A$C){if(A$C.animations){var A$R,A$j={},A$w=[],A$T=A$C.animations,A$G=0,A$o=A$T.length;for(A$G=0;A$G<A$o;A$G++)if(A$R=A$T[A$G]){var A$U={};A$U.name=A$R.name,A$U.aniO=A$R,A$U.nodeRoot=A$C,A$w.push(A$U),A$j[A$R.name]=A$U}this.animationList=A$w,this.animationDic=A$j}},A$C._clear=function(){var A$C,A$R;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(A$C in this._nodeGDic)(A$R=this._nodeGDic[A$C])&&A$R.recover();this._nodeGDic=null},A$r.parseAnimationByData=function(A$C){var A$R;return A$r._I||(A$r._I=new A$r),A$R=A$r._I.parseByData(A$C),A$r._I._clear(),A$R},A$r.parseAnimationData=function(A$C){var A$R;return A$r._I||(A$r._I=new A$r),A$r._I.setUpAniData(A$C),(A$R={}).animationList=A$r._I.animationList,A$R.animationDic=A$r._I.animationDic,A$r._I._clear(),A$R},A$r._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],A$r._temParam=[],A$r._I=null,A$r._rootMatrix=null,A$t(A$r,["_tempMt",function(){return this._tempMt=new A$P}]),A$r.__init$=function(){A$A=function(){function A$C(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return A$e(A$C,""),A$C.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),A$s.recover("GraphicNode",this)},A$C.create=function(){return A$s.getItemByClass("GraphicNode",A$C)},A$C}()},A$r}(A$bC));A$h.__init([A$I,A$tC,A$a,A$V,A$X,A$$,A$C,A$hC])}(window,document,Laya),function(A$C,A$R,A$j){A$j.un,A$j.uns,A$j.static;var A$w=A$j.class;A$j.getset,A$j.__newvec;new(function(){function A$C(){}return A$w(A$C,"LayaMain"),A$C}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}}),function(A$C,A$R,A$p){A$p.un,A$p.uns;var A$o=A$p.static,A$M=A$p.class,A$w=A$p.getset,A$G=A$p.__newvec,A$e=laya.maths.Arith,A$H=laya.maths.Bezier,A$j=laya.resource.Bitmap,A$K=laya.utils.Browser,A$t=laya.utils.Byte,A$F=laya.utils.Color,A$h=(laya.filters.ColorFilter,A$p.Config),A$T=laya.resource.Context,A$x=(laya.events.Event,laya.filters.Filter),A$U=laya.display.Graphics,A$I=laya.resource.HTMLCanvas,A$L=(laya.utils.HTMLChar,laya.resource.HTMLImage),A$D=laya.resource.HTMLSubImage,A$W=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),A$$=laya.maths.Point,A$A=laya.maths.Rectangle,A$Q=laya.renders.Render,A$Z=(laya.renders.RenderContext,laya.renders.RenderSprite),A$S=laya.resource.Resource,A$b=laya.resource.ResourceManager,A$f=laya.utils.RunDriver,A$r=laya.display.Sprite,A$E=laya.display.Stage,A$P=laya.utils.Stat,A$J=laya.utils.StringKey,A$N=(laya.display.css.Style,laya.system.System),A$a=laya.display.Text,A$n=laya.resource.Texture,A$y=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),A$m=laya.utils.VectorGraphManager;laya.utils.WordText;A$p.interface("laya.webgl.shapes.IShape"),A$p.interface("laya.webgl.submit.ISubmit"),A$p.interface("laya.webgl.text.ICharSegment"),A$p.interface("laya.webgl.canvas.save.ISaveData"),A$p.interface("laya.webgl.resource.IMergeAtlasBitmap"),A$p.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var A$k=function(){function A$C(){}A$M(A$C,"laya.filters.webgl.FilterActionGL");var A$R=A$C.prototype;return A$p.imps(A$R,{"laya.filters.IFilterActionGL":!0}),A$R.setValue=function(A$C){},A$R.setValueMix=function(A$C){},A$R.apply3d=function(A$C,A$R,A$j,A$w,A$T){return null},A$R.apply=function(A$C){return null},A$w(0,A$R,"typeMix",function(){return 0}),A$C}(),A$V=function(){function A$C(){}return A$M(A$C,"laya.webgl.shader.ShaderValue"),A$C}(),A$z=function(){var A$w,A$T;function A$C(A$C,A$R,A$j){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new A$T,void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),this._cells=null,this._rowInfo=null,this._init(A$C,A$R),this._atlasID=A$j}A$M(A$C,"laya.webgl.atlas.AtlasGrid");var A$R=A$C.prototype;return A$R.getAltasID=function(){return this._atlasID},A$R.setAltasID=function(A$C){0<=A$C&&(this._atlasID=A$C)},A$R.addTex=function(A$C,A$R,A$j){var A$w=this._get(A$R,A$j);return 0==A$w.ret||(this._fill(A$w.x,A$w.y,A$R,A$j,A$C),this._texCount++),A$w},A$R._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},A$R._init=function(A$C,A$R){if(this._width=A$C,this._height=A$R,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=A$G(this._height);for(var A$j=0;A$j<this._height;A$j++)this._rowInfo[A$j]=new A$w;return this._clear(),!0},A$R._get=function(A$C,A$R){var A$j=new A$g;if(A$C>=this._failSize.width&&A$R>=this._failSize.height)return A$j;for(var A$w=-1,A$T=-1,A$G=this._width,A$o=this._height,A$U=this._cells,A$t=0;A$t<A$o;A$t++)if(!(this._rowInfo[A$t].spaceCount<A$C))for(var A$I=0;A$I<A$G;){var A$e=3*(A$t*A$G+A$I);if(0!=A$U[A$e]||A$U[1+A$e]<A$C||A$U[2+A$e]<A$R)A$I+=A$U[1+A$e];else{A$w=A$I,A$T=A$t;for(var A$H=0;A$H<A$C;A$H++)if(A$U[3*A$H+A$e+2]<A$R){A$w=-1;break}if(!(A$w<0))return A$j.ret=!0,A$j.x=A$w,A$j.y=A$T,A$j;A$I+=A$U[1+A$e]}}return A$j},A$R._fill=function(A$C,A$R,A$j,A$w,A$T){var A$G=this._width,A$o=this._height;this._check(A$C+A$j<=A$G&&A$R+A$w<=A$o);for(var A$U=A$R;A$U<A$w+A$R;++A$U){this._check(this._rowInfo[A$U].spaceCount>=A$j),this._rowInfo[A$U].spaceCount-=A$j;for(var A$t=0;A$t<A$j;A$t++){var A$I=3*(A$C+A$U*A$G+A$t);this._check(0==this._cells[A$I]),this._cells[A$I]=A$T,this._cells[1+A$I]=A$j,this._cells[2+A$I]=A$w}}if(0<A$C)for(A$U=0;A$U<A$w;++A$U){var A$e=0;for(A$t=A$C-1;0<=A$t&&0==this._cells[3*((A$R+A$U)*A$G+A$t)];--A$t,++A$e);for(A$t=A$e;0<A$t;--A$t)this._cells[3*((A$R+A$U)*A$G+A$C-A$t)+1]=A$t,this._check(0<A$t)}if(0<A$R)for(A$t=A$C;A$t<A$C+A$j;++A$t){for(A$e=0,A$U=A$R-1;0<=A$U&&0==this._cells[3*(A$t+A$U*A$G)];--A$U,A$e++);for(A$U=A$e;0<A$U;--A$U)this._cells[3*(A$t+(A$R-A$U)*A$G)+2]=A$U,this._check(0<A$U)}},A$R._check=function(A$C){0==A$C&&console.log("xtexMerger 错误啦")},A$R._clear=function(){for(var A$C=this._texCount=0;A$C<this._height;A$C++)this._rowInfo[A$C].spaceCount=this._width;for(var A$R=0;A$R<this._height;A$R++)for(var A$j=0;A$j<this._width;A$j++){var A$w=3*(A$R*this._width+A$j);this._cells[A$w]=0,this._cells[1+A$w]=this._width-A$j,this._cells[2+A$w]=this._width-A$R}this._failSize.width=this._width+1,this._failSize.height=this._height+1},A$C.__init$=function(){A$w=function(){function A$C(){this.spaceCount=0}return A$M(A$C,""),A$C}(),A$T=function(){function A$C(){this.width=0,this.height=0}return A$M(A$C,""),A$C}()},A$C}(),A$l=function(){function A$Q(A$C,A$R,A$j,A$w){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=A$C,this._height=A$R,this._gridSize=A$j,this._maxAtlaserCount=A$w,this._gridNumX=A$C/A$j,this._gridNumY=A$R/A$j,this._curAtlasIndex=0,this._atlaserArray=[]}A$M(A$Q,"laya.webgl.atlas.AtlasResourceManager");var A$C=A$Q.prototype;return A$C.setAtlasParam=function(A$C,A$R,A$j,A$w){if(1==this._setAtlasParam)return A$Q._sid_=0,this._width=A$C,this._height=A$R,this._gridSize=A$j,this._maxAtlaserCount=A$w,this._gridNumX=A$C/A$j,this._gridNumY=A$R/A$j,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},A$C.pushData=function(A$C){var A$R,A$j=A$C.bitmap,A$w=-1,A$T=null,A$G=0,A$o=0;for(A$G=0,A$R=this._atlaserArray.length;A$G<A$R&&(A$o=(this._curAtlasIndex+A$G)%A$R,-1==(A$w=(A$T=this._atlaserArray[A$o]).findBitmapIsExist(A$j)));A$G++);if(-1!=A$w){var A$U=A$T.InAtlasWebGLImagesOffsetValue[A$w];return A$F=A$U[0],A$L=A$U[1],A$T.addToAtlas(A$C,A$F,A$L),!0}this._setAtlasParam=!1;for(var A$t=Math.ceil((A$C.bitmap.width+2)/this._gridSize),A$I=Math.ceil((A$C.bitmap.height+2)/this._gridSize),A$e=!1,A$H=0;A$H<2;A$H++){var A$M=this._maxAtlaserCount;for(A$G=0;A$G<A$M;A$G++){A$o=(this._curAtlasIndex+A$G)%A$M,this._atlaserArray.length-1>=A$o||this._atlaserArray.push(new A$AC(this._gridNumX,this._gridNumY,this._width,this._height,A$Q._sid_++));var A$K=this._atlaserArray[A$o],A$F=0,A$L=0,A$D=A$K.addTex(1,A$t,A$I);if(A$D.ret){A$F=A$D.x*this._gridSize+1,A$L=A$D.y*this._gridSize+1,A$j.lock=!0,A$K.addToAtlasTexture(A$j,A$F,A$L),A$K.addToAtlas(A$C,A$F,A$L),A$e=!0,this._curAtlasIndex=A$o;break}}if(A$e)break;this._atlaserArray.push(new A$AC(this._gridNumX,this._gridNumY,this._width,this._height,A$Q._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return A$e||console.log(">>>AtlasManager pushData error"),A$e},A$C.addToAtlas=function(A$C){laya.webgl.atlas.AtlasResourceManager.instance.pushData(A$C)},A$C.garbageCollection=function(){if(!0===this._needGC){for(var A$C=this._atlaserArray.length-this._maxAtlaserCount,A$R=0;A$R<A$C;A$R++)this._atlaserArray[A$R].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+A$C),this._atlaserArray.splice(0,A$C),this._needGC=!1}return!0},A$C.freeAll=function(){for(var A$C=0,A$R=this._atlaserArray.length;A$C<A$R;A$C++)this._atlaserArray[A$C].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},A$C.getAtlaserCount=function(){return this._atlaserArray.length},A$C.getAtlaserByIndex=function(A$C){return this._atlaserArray[A$C]},A$w(1,A$Q,"instance",function(){return A$Q._Instance||(A$Q._Instance=new A$Q(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),A$Q._Instance}),A$w(1,A$Q,"enabled",function(){return A$h.atlasEnable}),A$w(1,A$Q,"atlasLimitWidth",function(){return A$Q._atlasLimitWidth},function(A$C){A$Q._atlasLimitWidth=A$C}),A$w(1,A$Q,"atlasLimitHeight",function(){return A$Q._atlasLimitHeight},function(A$C){A$Q._atlasLimitHeight=A$C}),A$Q._enable=function(){A$h.atlasEnable=!0},A$Q._disable=function(){A$h.atlasEnable=!1},A$Q.__init__=function(){A$Q.atlasTextureWidth=2048,A$Q.atlasTextureHeight=2048,A$Q.maxTextureCount=6,A$Q.atlasLimitWidth=512,A$Q.atlasLimitHeight=512},A$Q._atlasLimitWidth=0,A$Q._atlasLimitHeight=0,A$Q.gridSize=16,A$Q.atlasTextureWidth=0,A$Q.atlasTextureHeight=0,A$Q.maxTextureCount=0,A$Q._atlasRestore=0,A$Q.BOARDER_TYPE_NO=0,A$Q.BOARDER_TYPE_RIGHT=1,A$Q.BOARDER_TYPE_LEFT=2,A$Q.BOARDER_TYPE_BOTTOM=4,A$Q.BOARDER_TYPE_TOP=8,A$Q.BOARDER_TYPE_ALL=15,A$Q._sid_=0,A$Q._Instance=null,A$Q}(),A$g=function(){function A$C(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return A$M(A$C,"laya.webgl.atlas.MergeFillInfo"),A$C}(),A$B=function(){function A$R(){}return A$M(A$R,"laya.webgl.canvas.BlendMode"),A$R._init_=function(A$C){A$R.fns=[A$R.BlendNormal,A$R.BlendAdd,A$R.BlendMultiply,A$R.BlendScreen,A$R.BlendOverlay,A$R.BlendLight,A$R.BlendMask,A$R.BlendDestinationOut],A$R.targetFns=[A$R.BlendNormalTarget,A$R.BlendAddTarget,A$R.BlendMultiplyTarget,A$R.BlendScreenTarget,A$R.BlendOverlayTarget,A$R.BlendLightTarget,A$R.BlendMask,A$R.BlendDestinationOut]},A$R.BlendNormal=function(A$C){A$C.blendFunc(1,771)},A$R.BlendAdd=function(A$C){A$C.blendFunc(1,772)},A$R.BlendMultiply=function(A$C){A$C.blendFunc(774,771)},A$R.BlendScreen=function(A$C){A$C.blendFunc(1,1)},A$R.BlendOverlay=function(A$C){A$C.blendFunc(1,769)},A$R.BlendLight=function(A$C){A$C.blendFunc(1,1)},A$R.BlendNormalTarget=function(A$C){A$C.blendFunc(1,771)},A$R.BlendAddTarget=function(A$C){A$C.blendFunc(1,772)},A$R.BlendMultiplyTarget=function(A$C){A$C.blendFunc(774,771)},A$R.BlendScreenTarget=function(A$C){A$C.blendFunc(1,1)},A$R.BlendOverlayTarget=function(A$C){A$C.blendFunc(1,769)},A$R.BlendLightTarget=function(A$C){A$C.blendFunc(1,1)},A$R.BlendMask=function(A$C){A$C.blendFunc(0,770)},A$R.BlendDestinationOut=function(A$C){A$C.blendFunc(0,0)},A$R.activeBlendFunction=null,A$R.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],A$R.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},A$R.NORMAL="normal",A$R.ADD="add",A$R.MULTIPLY="multiply",A$R.SCREEN="screen",A$R.LIGHT="light",A$R.OVERLAY="overlay",A$R.DESTINATIONOUT="destination-out",A$R.fns=[],A$R.targetFns=[],A$R}(),A$i=function(){function A$j(A$C){this._color=A$F.create("black"),this.setValue(A$C)}A$M(A$j,"laya.webgl.canvas.DrawStyle");var A$C=A$j.prototype;return A$C.setValue=function(A$C){if(A$C){if("string"==typeof A$C)return void(this._color=A$F.create(A$C));if(A$C instanceof laya.utils.Color)return void(this._color=A$C)}},A$C.reset=function(){this._color=A$F.create("black")},A$C.equal=function(A$C){return"string"==typeof A$C?this._color.strColor===A$C:A$C instanceof laya.utils.Color&&this._color.numColor===A$C.numColor},A$C.toColorStr=function(){return this._color.strColor},A$j.create=function(A$C){var A$R;if(A$C&&("string"==typeof A$C?A$R=A$F.create(A$C):A$C instanceof laya.utils.Color&&(A$R=A$C),A$R))return A$R._drawStyle||(A$R._drawStyle=new A$j(A$C));return laya.webgl.canvas.DrawStyle.DEFAULT},A$o(A$j,["DEFAULT",function(){return this.DEFAULT=new A$j("#000000")}]),A$j}(),A$_=function(){function A$C(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];A$bC.mainContext;this.ib=A$qC.create(35048),this.vb=A$vC.create(5)}A$M(A$C,"laya.webgl.canvas.Path");var A$R=A$C.prototype;return A$R.addPoint=function(A$C,A$R){this.tempArray.push(A$C,A$R)},A$R.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},A$R.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},A$R.polygon=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o;return this.geomatrys.push(this._curGeomatry=A$o=new A$JC(A$C,A$R,A$j,A$w,A$T,A$G)),A$w||(A$o.fill=!1),null==A$G&&(A$o.borderWidth=0),A$o},A$R.setGeomtry=function(A$C){this.geomatrys.push(this._curGeomatry=A$C)},A$R.drawLine=function(A$C,A$R,A$j,A$w,A$T){var A$G;return this.closePath?this.geomatrys.push(this._curGeomatry=A$G=new A$PC(A$C,A$R,A$j,A$w,A$T)):this.geomatrys.push(this._curGeomatry=A$G=new A$EC(A$C,A$R,A$j,A$w,A$T)),A$G.fill=!1,A$G},A$R.update=function(){var A$C=this.ib._byteLength,A$R=this.geomatrys.length;this.offset=A$C;for(var A$j=this.geoStart;A$j<A$R;A$j++)this.geomatrys[A$j].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=A$R,this.count=(this.ib._byteLength-A$C)/A$LC.BYTES_PIDX},A$R.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},A$R.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},A$C}(),A$u=function(){function A$U(){}A$M(A$U,"laya.webgl.canvas.save.SaveBase");var A$C=A$U.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!1},A$C.restore=function(A$C){this._dataObj[this._valueName]=this._value,(A$U._cache[A$U._cache._length++]=this)._newSubmit&&(A$C._curSubmit=A$GC.RENDERBASE,A$C._renderKey=0)},A$U._createArray=function(){var A$C=[];return A$C._length=0,A$C},A$U._init=function(){var A$C=A$U._namemap={};return A$C[1]="ALPHA",A$C[2]="fillStyle",A$C[8]="font",A$C[256]="lineWidth",A$C[512]="strokeStyle",A$C[8192]="_mergeID",A$C[1024]=A$C[2048]=A$C[4096]=[],A$C[16384]="textBaseline",A$C[32768]="textAlign",A$C[65536]="_nBlendType",A$C[1048576]="shader",A$C[2097152]="filters",A$C},A$U.save=function(A$C,A$R,A$j,A$w){if((A$C._saveMark._saveuse&A$R)!==A$R){A$C._saveMark._saveuse|=A$R;var A$T=A$U._cache,A$G=0<A$T._length?A$T[--A$T._length]:new A$U;A$G._value=A$j[A$G._valueName=A$U._namemap[A$R]],A$G._dataObj=A$j,A$G._newSubmit=A$w;var A$o=A$C._save;A$o[A$o._length++]=A$G}},A$U._cache=laya.webgl.canvas.save.SaveBase._createArray(),A$U._namemap=A$U._init(),A$U}(),A$s=function(){function A$G(){this._clipRect=new A$A}A$M(A$G,"laya.webgl.canvas.save.SaveClipRect");var A$C=A$G.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!1},A$C.restore=function(A$C){A$C._clipRect=this._clipSaveRect,(A$G._cache[A$G._cache._length++]=this)._submitScissor.submitLength=A$C._submits._length-this._submitScissor.submitIndex,A$C._curSubmit=A$GC.RENDERBASE,A$C._renderKey=0},A$G.save=function(A$C,A$R){if(131072!=(131072&A$C._saveMark._saveuse)){A$C._saveMark._saveuse|=131072;var A$j=A$G._cache,A$w=0<A$j._length?A$j[--A$j._length]:new A$G;A$w._clipSaveRect=A$C._clipRect,A$C._clipRect=A$w._clipRect.copyFrom(A$C._clipRect),A$w._submitScissor=A$R;var A$T=A$C._save;A$T[A$T._length++]=A$w}},A$o(A$G,["_cache",function(){return this._cache=A$u._createArray()}]),A$G}(),A$c=function(){function A$K(){this._contextX=0,this._contextY=0,this._clipRect=new A$A,this._rect=new A$A,this._matrix=new A$W}A$M(A$K,"laya.webgl.canvas.save.SaveClipRectStencil");var A$C=A$K.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!1},A$C.restore=function(A$C){A$eC.restore(A$C,this._rect,this._saveMatrix,this._contextX,this._contextY),A$C._clipRect=this._clipSaveRect,A$C._curMat=this._saveMatrix,A$C._x=this._contextX,A$C._y=this._contextY,A$K._cache[A$K._cache._length++]=this,A$C._curSubmit=A$GC.RENDERBASE},A$K.save=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){if(262144!=(262144&A$C._saveMark._saveuse)){A$C._saveMark._saveuse|=262144;var A$e=A$K._cache,A$H=0<A$e._length?A$e[--A$e._length]:new A$K;A$H._clipSaveRect=A$C._clipRect,A$H._clipRect.setTo(A$o,A$U,A$t,A$I),A$C._clipRect=A$H._clipRect,A$H._rect.x=A$j,A$H._rect.y=A$w,A$H._rect.width=A$T,A$H._rect.height=A$G,A$H._contextX=A$C._x,A$H._contextY=A$C._y,A$H._saveMatrix=A$C._curMat,A$C._curMat.copyTo(A$H._matrix),A$C._curMat=A$H._matrix,A$H._submitStencil=A$R;var A$M=A$C._save;A$M[A$M._length++]=A$H}},A$o(A$K,["_cache",function(){return this._cache=A$u._createArray()}]),A$K}(),A$X=function(){function A$w(){this._saveuse=0}A$M(A$w,"laya.webgl.canvas.save.SaveMark");var A$C=A$w.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!0},A$C.restore=function(A$C){A$C._saveMark=this._preSaveMark,A$w._no[A$w._no._length++]=this},A$w.Create=function(A$C){var A$R=A$w._no,A$j=0<A$R._length?A$R[--A$R._length]:new A$w;return A$j._saveuse=0,A$j._preSaveMark=A$C._saveMark,A$C._saveMark=A$j},A$o(A$w,["_no",function(){return this._no=A$u._createArray()}]),A$w}(),A$Y=function(){function A$G(){this._matrix=new A$W}A$M(A$G,"laya.webgl.canvas.save.SaveTransform");var A$C=A$G.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!1},A$C.restore=function(A$C){A$C._curMat=this._savematrix,A$G._no[A$G._no._length++]=this},A$G.save=function(A$C){var A$R=A$C._saveMark;if(2048!=(2048&A$R._saveuse)){A$R._saveuse|=2048;var A$j=A$G._no,A$w=0<A$j._length?A$j[--A$j._length]:new A$G;A$w._savematrix=A$C._curMat,A$C._curMat=A$C._curMat.copyTo(A$w._matrix);var A$T=A$C._save;A$T[A$T._length++]=A$w}},A$o(A$G,["_no",function(){return this._no=A$u._createArray()}]),A$G}(),A$d=function(){function A$T(){}A$M(A$T,"laya.webgl.canvas.save.SaveTranslate");var A$C=A$T.prototype;return A$p.imps(A$C,{"laya.webgl.canvas.save.ISaveData":!0}),A$C.isSaveMark=function(){return!1},A$C.restore=function(A$C){A$C._curMat;A$C._x=this._x,A$C._y=this._y,A$T._no[A$T._no._length++]=this},A$T.save=function(A$C){var A$R=A$T._no,A$j=0<A$R._length?A$R[--A$R._length]:new A$T;A$j._x=A$C._x,A$j._y=A$C._y;var A$w=A$C._save;A$w[A$w._length++]=A$j},A$o(A$T,["_no",function(){return this._no=A$u._createArray()}]),A$T}(),A$O=function(){function A$C(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new A$A}A$M(A$C,"laya.webgl.resource.RenderTargetMAX");var A$R=A$C.prototype;return A$R.setSP=function(A$C){this._sp=A$C},A$R.size=function(A$C,A$R){var A$j=this;this._width!==A$C||this._height!==A$R?(this.repaint=!0,this._width=A$C,this._height=A$R,this.target?this.target.size(A$C,A$R):this.target=A$mC.create(A$C,A$R),this.target.hasListener("recovered")||this.target.on("recovered",this,function(A$C){A$p.timer.callLater(A$j._sp,A$j._sp.repaint)})):this.target.size(A$C,A$R)},A$R._flushToTarget=function(A$C,A$R){if(!A$R._destroy){var A$j=A$ZC.worldScissorTest,A$w=A$ZC.worldClipRect;A$ZC.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,A$ZC.worldScissorTest=!1,A$bC.mainContext.disable(3089);var A$T=A$ZC.worldAlpha,A$G=A$ZC.worldMatrix4,A$o=A$ZC.worldMatrix,A$U=A$ZC.worldFilters,A$t=A$ZC.worldShaderDefines;if(A$ZC.worldMatrix=A$W.EMPTY,A$ZC.restoreTempArray(),A$ZC.worldMatrix4=A$ZC.TEMPMAT4_ARRAY,A$ZC.worldAlpha=1,A$ZC.worldFilters=null,A$ZC.worldShaderDefines=null,A$yC.activeShader=null,A$R.start(),A$h.showCanvasMark?A$R.clear(0,1,0,.3):A$R.clear(0,0,0,0),A$C.flush(),A$R.end(),A$yC.activeShader=null,A$ZC.worldAlpha=A$T,A$ZC.worldMatrix4=A$G,A$ZC.worldMatrix=A$o,A$ZC.worldFilters=A$U,A$ZC.worldShaderDefines=A$t,A$ZC.worldScissorTest=A$j){var A$I=A$ZC.height-A$w.y-A$w.height;A$bC.mainContext.scissor(A$w.x,A$I,A$w.width,A$w.height),A$bC.mainContext.enable(3089)}A$ZC.worldClipRect=A$w}},A$R.flush=function(A$C){this.repaint&&(this._flushToTarget(A$C,this.target),this.repaint=!1)},A$R.drawTo=function(A$C,A$R,A$j,A$w,A$T){A$C.drawTexture(this.target.getTexture(),A$R,A$j,A$w,A$T,0,0)},A$R.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},A$C}(),A$q=function(){function A$C(){this.ALPHA=1,this.shaderType=0,this.defines=new A$rC}return A$M(A$C,"laya.webgl.shader.d2.Shader2D"),A$C.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},A$C.__init__=function(){var A$C,A$R;A$XC.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),A$XC.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),A$XC.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),A$XC.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),A$XC.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),A$XC.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),A$XC.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),A$XC.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),A$C="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",A$R='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',A$XC.preCompile2D(0,1,A$C,A$R,null),A$C="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",A$R='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',A$XC.preCompile2D(0,2,A$C,A$R,null),A$C="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",A$R="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",A$XC.preCompile2D(0,4,A$C,A$R,null),A$C="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",A$R='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',A$XC.preCompile2D(0,256,A$C,A$R,null),A$C="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",A$R="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",A$XC.preCompile2D(0,512,A$C,A$R,null)},A$C}(),A$v=function(){function A$R(A$C,A$R,A$j){this._value=0,this._name2int=A$C,this._int2name=A$R,this._int2nameMap=A$j}A$M(A$R,"laya.webgl.shader.ShaderDefines");var A$C=A$R.prototype;return A$C.add=function(A$C){return"string"==typeof A$C&&(A$C=this._name2int[A$C]),this._value|=A$C,this._value},A$C.addInt=function(A$C){return this._value|=A$C,this._value},A$C.remove=function(A$C){return"string"==typeof A$C&&(A$C=this._name2int[A$C]),this._value&=~A$C,this._value},A$C.isDefine=function(A$C){return(this._value&A$C)===A$C},A$C.getValue=function(){return this._value},A$C.setValue=function(A$C){this._value=A$C},A$C.toNameDic=function(){var A$C=this._int2nameMap[this._value];return A$C||A$R._toText(this._value,this._int2name,this._int2nameMap)},A$R._reg=function(A$C,A$R,A$j,A$w){A$w[A$j[A$C]=A$R]=A$C},A$R._toText=function(A$C,A$R,A$j){var A$w=A$j[A$C];if(A$w)return A$w;for(var A$T={},A$G=1,A$o=0;A$o<32&&!(A$C<(A$G=1<<A$o));A$o++)if(A$C&A$G){var A$U=A$R[A$G];A$U&&(A$T[A$U]="")}return A$j[A$C]=A$T},A$R._toInt=function(A$C,A$R){for(var A$j=A$C.split("."),A$w=0,A$T=0,A$G=A$j.length;A$T<A$G;A$T++){var A$o=A$R[A$j[A$T]];if(!A$o)throw new Error("Defines to int err:"+A$C+"/"+A$j[A$T]);A$w|=A$o}return A$w},A$R}(),A$CC=function(){function A$o(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new A$W}A$M(A$o,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var A$C=A$o.prototype;return A$C.init=function(A$C,A$R,A$j){if(A$R)this._vs=A$R;else{this._vs=[];var A$w=A$C.width,A$T=A$C.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(A$w,0,1,0,1,1,1,1),this._vs.push(A$w,A$T,1,1,1,1,1,1),this._vs.push(0,A$T,0,1,1,1,1,1)}A$j?this._ps=A$j:(A$o._defaultPS||(A$o._defaultPS=[]).push(0,1,3,3,1,2),this._ps=A$o._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=A$C},A$C.init2=function(A$C,A$R,A$j,A$w,A$T){this.transform&&(this.transform=null),A$j?this._ps=A$j:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=A$w,this._uvs=A$T,this.mEleNum=this._ps.length,this.mTexture=A$C,(A$Q.isConchNode||A$Q.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},A$C._initMyData=function(){var A$C=0,A$R=0,A$j=4*this._verticles.length;this._vs=A$o._tempVS;var A$w=!1;if(A$Q.isConchNode||A$Q.isConchApp?(this._vs.length=A$j,A$w=!0):this._vs.length<A$j&&(this._vs.length=A$j,A$w=!0),A$o._tVSLen=A$j,A$w)for(;A$C<A$j;)this._vs[A$C]=this._verticles[A$R],this._vs[A$C+1]=this._verticles[A$R+1],this._vs[A$C+2]=this._uvs[A$R],this._vs[A$C+3]=this._uvs[A$R+1],this._vs[A$C+4]=1,this._vs[A$C+5]=1,this._vs[A$C+6]=1,this._vs[A$C+7]=1,A$C+=8,A$R+=2;else for(;A$C<A$j;)this._vs[A$C]=this._verticles[A$R],this._vs[A$C+1]=this._verticles[A$R+1],this._vs[A$C+2]=this._uvs[A$R],this._vs[A$C+3]=this._uvs[A$R+1],A$C+=8,A$R+=2},A$C.getData2=function(A$C,A$R,A$j){var A$w;this.mVBBuffer=A$C,this.mIBBuffer=A$R,this._initMyData(),A$C.appendEx2(this._vs,Float32Array,A$o._tVSLen,4),this._indexStart=A$R._byteLength,(A$w=A$o._tempIB).length<this._ps.length&&(A$w.length=this._ps.length);for(var A$T=0,A$G=this._ps.length;A$T<A$G;A$T++)A$w[A$T]=this._ps[A$T]+A$j;A$R.appendEx2(A$w,Uint16Array,this._ps.length,2)},A$C.getData=function(A$C,A$R,A$j){if(this.mVBBuffer=A$C,this.mIBBuffer=A$R,A$C.append(this.mVBData),this._indexStart=A$R._byteLength,this.mIBData.start!=A$j){for(var A$w=0,A$T=this._ps.length;A$w<A$T;A$w++)this.mIBData[A$w]=this._ps[A$w]+A$j;this.mIBData.start=A$j}A$R.append(this.mIBData)},A$C.render=function(A$C,A$R,A$j){if(A$Q.isWebGL&&this.mTexture){A$C._renderKey=0,A$C._shader2D.glTexture=null,A$RC.getInstance().addSkinMesh(this);var A$w=A$GC.createShape(A$C,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,A$xC.create(512,0));this.transform||(this.transform=A$W.EMPTY),this.transform.translate(A$R,A$j),A$W.mul(this.transform,A$C._curMat,this._tempMatrix),this.transform.translate(-A$R,-A$j);var A$T=A$w.shaderValue,A$G=A$T.u_mmat2||A$ZC.getMatrArray();A$ZC.mat2MatArray(this._tempMatrix,A$G),A$T.textureHost=this.mTexture,A$T.offsetX=0,A$T.offsetY=0,A$T.u_mmat2=A$G,A$T.ALPHA=A$C._shader2D.ALPHA,A$C._submits[A$C._submits._length++]=A$w}else A$Q.isConchApp&&this.mTexture&&(this.transform||(this.transform=A$W.EMPTY),A$C.setSkinMesh&&A$C.setSkinMesh(A$R,A$j,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},A$o._tempVS=[],A$o._tempIB=[],A$o._defaultPS=null,A$o._tVSLen=0,A$o}(),A$RC=function(){function A$C(){this.ib=null,this.vb=null;A$bC.mainContext;this.ib=A$qC.create(35048),this.vb=A$vC.create(8)}A$M(A$C,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var A$R=A$C.prototype;return A$R.addSkinMesh=function(A$C){A$C.getData2(this.vb,this.ib,this.vb._byteLength/32)},A$R.reset=function(){this.vb.clear(),this.ib.clear()},A$C.getInstance=function(){return A$C.instance=A$C.instance||new A$C},A$C.instance=null,A$C}(),A$jC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===A$t&&(A$t=0),this.x=A$C,this.y=A$R,this.width=A$j,this.height=A$w,this.edges=A$T,this.color=A$G,this.borderWidth=A$o,this.borderColor=A$U}A$M(A$C,"laya.webgl.shapes.BasePoly");var A$R=A$C.prototype;return A$p.imps(A$R,{"laya.webgl.shapes.IShape":!0}),A$R.getData=function(A$C,A$R,A$j){},A$R.rebuild=function(A$C){},A$R.setMatrix=function(A$C){},A$R.needUpdate=function(A$C){return!0},A$R.sector=function(A$C,A$R,A$j){var A$w=this.x,A$T=this.y,A$G=this.edges,A$o=(this.r1-this.r0)/A$G,A$U=this.width,A$t=this.height,A$I=this.color,A$e=(A$I>>16&255)/255,A$H=(A$I>>8&255)/255,A$M=(255&A$I)/255;A$C.push(A$w,A$T,A$e,A$H,A$M);for(var A$K=0;A$K<A$G+1;A$K++)A$C.push(A$w+Math.sin(A$o*A$K+this.r0)*A$U,A$T+Math.cos(A$o*A$K+this.r0)*A$t),A$C.push(A$e,A$H,A$M);for(A$K=0;A$K<A$G;A$K++)A$R.push(A$j,A$j+A$K+1,A$j+A$K+2)},A$R.createLine2=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U,A$t,A$I,A$e,A$H,A$M,A$K,A$F,A$L,A$D,A$Q,A$Z,A$S,A$b,A$f,A$p,A$h,A$x,A$W,A$$=A$C.concat(),A$A=A$T,A$r=this.borderColor,A$E=(A$r>>16&255)/255,A$P=(A$r>>8&255)/255,A$J=(255&A$r)/255,A$N=A$$.length/2,A$a=A$w,A$n=A$j/2;A$t=A$$[0],A$I=A$$[1],A$L=A$t-(A$e=A$$[2]),A$F=(A$F=-(A$I-(A$H=A$$[3])))/(A$W=Math.sqrt(A$F*A$F+A$L*A$L))*A$n,A$L=A$L/A$W*A$n,A$A.push(A$t-A$F+this.x,A$I-A$L+this.y,A$E,A$P,A$J,A$t+A$F+this.x,A$I+A$L+this.y,A$E,A$P,A$J);for(var A$y=1;A$y<A$N-1;A$y++)A$t=A$$[2*(A$y-1)],A$I=A$$[2*(A$y-1)+1],A$e=A$$[2*A$y],A$H=A$$[2*A$y+1],A$M=A$$[2*(A$y+1)],A$K=A$$[2*(A$y+1)+1],A$L=A$t-A$e,A$Q=A$e-A$M,A$b=(-(A$F=(A$F=-(A$I-A$H))/(A$W=Math.sqrt(A$F*A$F+A$L*A$L))*A$n)+A$t)*(-(A$L=A$L/A$W*A$n)+A$H)-(-A$F+A$e)*(-A$L+A$I),A$h=(-(A$D=(A$D=-(A$H-A$K))/(A$W=Math.sqrt(A$D*A$D+A$Q*A$Q))*A$n)+A$M)*(-(A$Q=A$Q/A$W*A$n)+A$H)-(-A$D+A$e)*(-A$Q+A$K),A$x=(A$Z=-A$L+A$I-(-A$L+A$H))*(A$p=-A$D+A$e-(-A$D+A$M))-(A$f=-A$Q+A$K-(-A$Q+A$H))*(A$S=-A$F+A$e-(-A$F+A$t)),Math.abs(A$x)<.1?(A$x+=10.1,A$A.push(A$e-A$F+this.x,A$H-A$L+this.y,A$E,A$P,A$J,A$e+A$F+this.x,A$H+A$L+this.y,A$E,A$P,A$J)):(((A$o=(A$S*A$h-A$p*A$b)/A$x)-A$e)*(A$o-A$e)+((A$U=(A$f*A$b-A$Z*A$h)/A$x)-A$H)+(A$U-A$H),A$A.push(A$o+this.x,A$U+this.y,A$E,A$P,A$J,A$e-(A$o-A$e)+this.x,A$H-(A$U-A$H)+this.y,A$E,A$P,A$J));A$t=A$$[A$$.length-4],A$I=A$$[A$$.length-3],A$L=A$t-(A$e=A$$[A$$.length-2]),A$F=(A$F=-(A$I-(A$H=A$$[A$$.length-1])))/(A$W=Math.sqrt(A$F*A$F+A$L*A$L))*A$n,A$L=A$L/A$W*A$n,A$A.push(A$e-A$F+this.x,A$H-A$L+this.y,A$E,A$P,A$J,A$e+A$F+this.x,A$H+A$L+this.y,A$E,A$P,A$J);var A$m=A$G;for(A$y=1;A$y<A$m;A$y++)A$R.push(A$a+2*(A$y-1),A$a+2*(A$y-1)+1,A$a+2*A$y+1,A$a+2*A$y+1,A$a+2*A$y,A$a+2*(A$y-1));return A$A},A$R.createLine=function(A$C,A$R,A$j,A$w){var A$T=A$C.concat(),A$G=A$C,A$o=this.borderColor,A$U=(A$o>>16&255)/255,A$t=(A$o>>8&255)/255,A$I=(255&A$o)/255;A$T.splice(0,5);var A$e,A$H,A$M,A$K,A$F,A$L,A$D,A$Q,A$Z,A$S,A$b,A$f,A$p,A$h,A$x,A$W,A$$,A$A,A$r,A$E,A$P=A$T.length/5,A$J=A$w,A$N=A$j/2;A$M=A$T[0],A$K=A$T[1],A$S=A$M-(A$F=A$T[5]),A$Z=(A$Z=-(A$K-(A$L=A$T[6])))/(A$E=Math.sqrt(A$Z*A$Z+A$S*A$S))*A$N,A$S=A$S/A$E*A$N,A$G.push(A$M-A$Z,A$K-A$S,A$U,A$t,A$I,A$M+A$Z,A$K+A$S,A$U,A$t,A$I);for(var A$a=1;A$a<A$P-1;A$a++)A$M=A$T[5*(A$a-1)],A$K=A$T[5*(A$a-1)+1],A$F=A$T[5*A$a],A$L=A$T[5*A$a+1],A$D=A$T[5*(A$a+1)],A$Q=A$T[5*(A$a+1)+1],A$S=A$M-A$F,A$f=A$F-A$D,A$x=(-(A$Z=(A$Z=-(A$K-A$L))/(A$E=Math.sqrt(A$Z*A$Z+A$S*A$S))*A$N)+A$M)*(-(A$S=A$S/A$E*A$N)+A$L)-(-A$Z+A$F)*(-A$S+A$K),A$A=(-(A$b=(A$b=-(A$L-A$Q))/(A$E=Math.sqrt(A$b*A$b+A$f*A$f))*A$N)+A$D)*(-(A$f=A$f/A$E*A$N)+A$L)-(-A$b+A$F)*(-A$f+A$Q),A$r=(A$p=-A$S+A$K-(-A$S+A$L))*(A$$=-A$b+A$F-(-A$b+A$D))-(A$W=-A$f+A$Q-(-A$f+A$L))*(A$h=-A$Z+A$F-(-A$Z+A$M)),Math.abs(A$r)<.1?(A$r+=10.1,A$G.push(A$F-A$Z,A$L-A$S,A$U,A$t,A$I,A$F+A$Z,A$L+A$S,A$U,A$t,A$I)):(((A$e=(A$h*A$A-A$$*A$x)/A$r)-A$F)*(A$e-A$F)+((A$H=(A$W*A$x-A$p*A$A)/A$r)-A$L)+(A$H-A$L),A$G.push(A$e,A$H,A$U,A$t,A$I,A$F-(A$e-A$F),A$L-(A$H-A$L),A$U,A$t,A$I));A$M=A$T[A$T.length-10],A$K=A$T[A$T.length-9],A$S=A$M-(A$F=A$T[A$T.length-5]),A$Z=(A$Z=-(A$K-(A$L=A$T[A$T.length-4])))/(A$E=Math.sqrt(A$Z*A$Z+A$S*A$S))*A$N,A$S=A$S/A$E*A$N,A$G.push(A$F-A$Z,A$L-A$S,A$U,A$t,A$I,A$F+A$Z,A$L+A$S,A$U,A$t,A$I);var A$n=this.edges+1;for(A$a=1;A$a<A$n;A$a++)A$R.push(A$J+2*(A$a-1),A$J+2*(A$a-1)+1,A$J+2*A$a+1,A$J+2*A$a+1,A$J+2*A$a,A$J+2*(A$a-1));return A$G},A$R.createLoopLine=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$C.concat(),A$U=A$T||A$C,A$t=this.borderColor,A$I=(A$t>>16&255)/255,A$e=(A$t>>8&255)/255,A$H=(255&A$t)/255;A$o.splice(0,5);var A$M=[A$o[0],A$o[1]],A$K=[A$o[A$o.length-5],A$o[A$o.length-4]],A$F=A$K[0]+.5*(A$M[0]-A$K[0]),A$L=A$K[1]+.5*(A$M[1]-A$K[1]);A$o.unshift(A$F,A$L,0,0,0),A$o.push(A$F,A$L,0,0,0);var A$D,A$Q,A$Z,A$S,A$b,A$f,A$p,A$h,A$x,A$W,A$$,A$A,A$r,A$E,A$P,A$J,A$N,A$a,A$n,A$y,A$m=A$o.length/5,A$k=A$w,A$V=A$j/2;A$Z=A$o[0],A$S=A$o[1],A$W=A$Z-(A$b=A$o[5]),A$x=(A$x=-(A$S-(A$f=A$o[6])))/(A$y=Math.sqrt(A$x*A$x+A$W*A$W))*A$V,A$W=A$W/A$y*A$V,A$U.push(A$Z-A$x,A$S-A$W,A$I,A$e,A$H,A$Z+A$x,A$S+A$W,A$I,A$e,A$H);for(var A$z=1;A$z<A$m-1;A$z++)A$Z=A$o[5*(A$z-1)],A$S=A$o[5*(A$z-1)+1],A$b=A$o[5*A$z],A$f=A$o[5*A$z+1],A$p=A$o[5*(A$z+1)],A$h=A$o[5*(A$z+1)+1],A$W=A$Z-A$b,A$A=A$b-A$p,A$P=(-(A$x=(A$x=-(A$S-A$f))/(A$y=Math.sqrt(A$x*A$x+A$W*A$W))*A$V)+A$Z)*(-(A$W=A$W/A$y*A$V)+A$f)-(-A$x+A$b)*(-A$W+A$S),A$a=(-(A$$=(A$$=-(A$f-A$h))/(A$y=Math.sqrt(A$$*A$$+A$A*A$A))*A$V)+A$p)*(-(A$A=A$A/A$y*A$V)+A$f)-(-A$$+A$b)*(-A$A+A$h),A$n=(A$r=-A$W+A$S-(-A$W+A$f))*(A$N=-A$$+A$b-(-A$$+A$p))-(A$J=-A$A+A$h-(-A$A+A$f))*(A$E=-A$x+A$b-(-A$x+A$Z)),Math.abs(A$n)<.1?(A$n+=10.1,A$U.push(A$b-A$x,A$f-A$W,A$I,A$e,A$H,A$b+A$x,A$f+A$W,A$I,A$e,A$H)):(((A$D=(A$E*A$a-A$N*A$P)/A$n)-A$b)*(A$D-A$b)+((A$Q=(A$J*A$P-A$r*A$a)/A$n)-A$f)+(A$Q-A$f),A$U.push(A$D,A$Q,A$I,A$e,A$H,A$b-(A$D-A$b),A$f-(A$Q-A$f),A$I,A$e,A$H));A$G&&(A$R=A$G);var A$l=this.edges+1;for(A$z=1;A$z<A$l;A$z++)A$R.push(A$k+2*(A$z-1),A$k+2*(A$z-1)+1,A$k+2*A$z+1,A$k+2*A$z+1,A$k+2*A$z,A$k+2*(A$z-1));return A$R.push(A$k+2*(A$z-1),A$k+2*(A$z-1)+1,A$k+1,A$k+1,A$k,A$k+2*(A$z-1)),A$U},A$C}(),A$wC=function(){function A$L(){}return A$M(A$L,"laya.webgl.shapes.Earcut"),A$L.earcut=function(A$C,A$R,A$j){A$j=A$j||2;var A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e=A$R&&A$R.length,A$H=A$e?A$R[0]*A$j:A$C.length,A$M=A$L.linkedList(A$C,0,A$H,A$j,!0),A$K=[];if(!A$M)return A$K;if(A$e&&(A$M=A$L.eliminateHoles(A$C,A$R,A$M,A$j)),A$C.length>80*A$j){A$w=A$G=A$C[0],A$T=A$o=A$C[1];for(var A$F=A$j;A$F<A$H;A$F+=A$j)(A$U=A$C[A$F])<A$w&&(A$w=A$U),(A$t=A$C[A$F+1])<A$T&&(A$T=A$t),A$G<A$U&&(A$G=A$U),A$o<A$t&&(A$o=A$t);A$I=0!==(A$I=Math.max(A$G-A$w,A$o-A$T))?1/A$I:0}return A$L.earcutLinked(A$M,A$K,A$j,A$w,A$T,A$I),A$K},A$L.linkedList=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o;if(A$T===0<A$L.signedArea(A$C,A$R,A$j,A$w))for(A$G=A$R;A$G<A$j;A$G+=A$w)A$o=A$L.insertNode(A$G,A$C[A$G],A$C[A$G+1],A$o);else for(A$G=A$j-A$w;A$R<=A$G;A$G-=A$w)A$o=A$L.insertNode(A$G,A$C[A$G],A$C[A$G+1],A$o);return A$o&&A$L.equals(A$o,A$o.next)&&(A$L.removeNode(A$o),A$o=A$o.next),A$o},A$L.filterPoints=function(A$C,A$R){if(!A$C)return A$C;A$R||(A$R=A$C);var A$j,A$w=A$C;do{if(A$j=!1,A$w.steiner||!A$L.equals(A$w,A$w.next)&&0!==A$L.area(A$w.prev,A$w,A$w.next))A$w=A$w.next;else{if(A$L.removeNode(A$w),(A$w=A$R=A$w.prev)===A$w.next)break;A$j=!0}}while(A$j||A$w!==A$R);return A$R},A$L.earcutLinked=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(A$C){!A$o&&A$G&&A$L.indexCurve(A$C,A$w,A$T,A$G);for(var A$U,A$t,A$I=A$C;A$C.prev!==A$C.next;)if(A$U=A$C.prev,A$t=A$C.next,A$G?A$L.isEarHashed(A$C,A$w,A$T,A$G):A$L.isEar(A$C))A$R.push(A$U.i/A$j),A$R.push(A$C.i/A$j),A$R.push(A$t.i/A$j),A$L.removeNode(A$C),A$C=A$t.next,A$I=A$t.next;else if((A$C=A$t)===A$I){A$o?1===A$o?(A$C=A$L.cureLocalIntersections(A$C,A$R,A$j),A$L.earcutLinked(A$C,A$R,A$j,A$w,A$T,A$G,2)):2===A$o&&A$L.splitEarcut(A$C,A$R,A$j,A$w,A$T,A$G):A$L.earcutLinked(A$L.filterPoints(A$C,null),A$R,A$j,A$w,A$T,A$G,1);break}}},A$L.isEar=function(A$C){var A$R=A$C.prev,A$j=A$C,A$w=A$C.next;if(0<=A$L.area(A$R,A$j,A$w))return!1;for(var A$T=A$C.next.next;A$T!==A$C.prev;){if(A$L.pointInTriangle(A$R.x,A$R.y,A$j.x,A$j.y,A$w.x,A$w.y,A$T.x,A$T.y)&&0<=A$L.area(A$T.prev,A$T,A$T.next))return!1;A$T=A$T.next}return!0},A$L.isEarHashed=function(A$C,A$R,A$j,A$w){var A$T=A$C.prev,A$G=A$C,A$o=A$C.next;if(0<=A$L.area(A$T,A$G,A$o))return!1;for(var A$U=A$T.x<A$G.x?A$T.x<A$o.x?A$T.x:A$o.x:A$G.x<A$o.x?A$G.x:A$o.x,A$t=A$T.y<A$G.y?A$T.y<A$o.y?A$T.y:A$o.y:A$G.y<A$o.y?A$G.y:A$o.y,A$I=A$T.x>A$G.x?A$T.x>A$o.x?A$T.x:A$o.x:A$G.x>A$o.x?A$G.x:A$o.x,A$e=A$T.y>A$G.y?A$T.y>A$o.y?A$T.y:A$o.y:A$G.y>A$o.y?A$G.y:A$o.y,A$H=A$L.zOrder(A$U,A$t,A$R,A$j,A$w),A$M=A$L.zOrder(A$I,A$e,A$R,A$j,A$w),A$K=A$C.nextZ;A$K&&A$K.z<=A$M;){if(A$K!==A$C.prev&&A$K!==A$C.next&&A$L.pointInTriangle(A$T.x,A$T.y,A$G.x,A$G.y,A$o.x,A$o.y,A$K.x,A$K.y)&&0<=A$L.area(A$K.prev,A$K,A$K.next))return!1;A$K=A$K.nextZ}for(A$K=A$C.prevZ;A$K&&A$K.z>=A$H;){if(A$K!==A$C.prev&&A$K!==A$C.next&&A$L.pointInTriangle(A$T.x,A$T.y,A$G.x,A$G.y,A$o.x,A$o.y,A$K.x,A$K.y)&&0<=A$L.area(A$K.prev,A$K,A$K.next))return!1;A$K=A$K.prevZ}return!0},A$L.cureLocalIntersections=function(A$C,A$R,A$j){var A$w=A$C;do{var A$T=A$w.prev,A$G=A$w.next.next;!A$L.equals(A$T,A$G)&&A$L.intersects(A$T,A$w,A$w.next,A$G)&&A$L.locallyInside(A$T,A$G)&&A$L.locallyInside(A$G,A$T)&&(A$R.push(A$T.i/A$j),A$R.push(A$w.i/A$j),A$R.push(A$G.i/A$j),A$L.removeNode(A$w),A$L.removeNode(A$w.next),A$w=A$C=A$G),A$w=A$w.next}while(A$w!==A$C);return A$w},A$L.splitEarcut=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$C;do{for(var A$U=A$o.next.next;A$U!==A$o.prev;){if(A$o.i!==A$U.i&&A$L.isValidDiagonal(A$o,A$U)){var A$t=A$L.splitPolygon(A$o,A$U);return A$o=A$L.filterPoints(A$o,A$o.next),A$t=A$L.filterPoints(A$t,A$t.next),A$L.earcutLinked(A$o,A$R,A$j,A$w,A$T,A$G),void A$L.earcutLinked(A$t,A$R,A$j,A$w,A$T,A$G)}A$U=A$U.next}A$o=A$o.next}while(A$o!==A$C)},A$L.eliminateHoles=function(A$C,A$R,A$j,A$w){var A$T,A$G,A$o,A$U,A$t,A$I=[];for(A$T=0,A$G=A$R.length;A$T<A$G;A$T++)A$o=A$R[A$T]*A$w,A$U=A$T<A$G-1?A$R[A$T+1]*A$w:A$C.length,(A$t=A$L.linkedList(A$C,A$o,A$U,A$w,!1))===A$t.next&&(A$t.steiner=!0),A$I.push(A$L.getLeftmost(A$t));for(A$I.sort(A$L.compareX),A$T=0;A$T<A$I.length;A$T++)A$L.eliminateHole(A$I[A$T],A$j),A$j=A$L.filterPoints(A$j,A$j.next);return A$j},A$L.compareX=function(A$C,A$R){return A$C.x-A$R.x},A$L.eliminateHole=function(A$C,A$R){if(A$R=A$L.findHoleBridge(A$C,A$R)){var A$j=A$L.splitPolygon(A$R,A$C);A$L.filterPoints(A$j,A$j.next)}},A$L.findHoleBridge=function(A$C,A$R){var A$j,A$w=A$R,A$T=A$C.x,A$G=A$C.y,A$o=-1/0;do{if(A$G<=A$w.y&&A$G>=A$w.next.y&&A$w.next.y!==A$w.y){var A$U=A$w.x+(A$G-A$w.y)*(A$w.next.x-A$w.x)/(A$w.next.y-A$w.y);if(A$U<=A$T&&A$o<A$U){if((A$o=A$U)===A$T){if(A$G===A$w.y)return A$w;if(A$G===A$w.next.y)return A$w.next}A$j=A$w.x<A$w.next.x?A$w:A$w.next}}A$w=A$w.next}while(A$w!==A$R);if(!A$j)return null;if(A$T===A$o)return A$j.prev;var A$t,A$I=A$j,A$e=A$j.x,A$H=A$j.y,A$M=1/0;for(A$w=A$j.next;A$w!==A$I;)A$T>=A$w.x&&A$w.x>=A$e&&A$T!==A$w.x&&A$L.pointInTriangle(A$G<A$H?A$T:A$o,A$G,A$e,A$H,A$G<A$H?A$o:A$T,A$G,A$w.x,A$w.y)&&((A$t=Math.abs(A$G-A$w.y)/(A$T-A$w.x))<A$M||A$t===A$M&&A$w.x>A$j.x)&&A$L.locallyInside(A$w,A$C)&&(A$j=A$w,A$M=A$t),A$w=A$w.next;return A$j},A$L.indexCurve=function(A$C,A$R,A$j,A$w){for(var A$T=A$C;null===A$T.z&&(A$T.z=A$L.zOrder(A$T.x,A$T.y,A$R,A$j,A$w)),A$T.prevZ=A$T.prev,A$T.nextZ=A$T.next,(A$T=A$T.next)!==A$C;);A$T.prevZ.nextZ=null,A$T.prevZ=null,A$L.sortLinked(A$T)},A$L.sortLinked=function(A$C){var A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I=1;do{for(A$j=A$C,A$G=A$C=null,A$o=0;A$j;){for(A$o++,A$w=A$j,A$R=A$U=0;A$R<A$I&&(A$U++,A$w=A$w.nextZ);A$R++);for(A$t=A$I;0<A$U||0<A$t&&A$w;)0!==A$U&&(0===A$t||!A$w||A$j.z<=A$w.z)?(A$j=(A$T=A$j).nextZ,A$U--):(A$w=(A$T=A$w).nextZ,A$t--),A$G?A$G.nextZ=A$T:A$C=A$T,A$T.prevZ=A$G,A$G=A$T;A$j=A$w}A$G.nextZ=null,A$I*=2}while(1<A$o);return A$C},A$L.zOrder=function(A$C,A$R,A$j,A$w,A$T){return(A$C=1431655765&((A$C=858993459&((A$C=252645135&((A$C=16711935&((A$C=32767*(A$C-A$j)*A$T)|A$C<<8))|A$C<<4))|A$C<<2))|A$C<<1))|(A$R=1431655765&((A$R=858993459&((A$R=252645135&((A$R=16711935&((A$R=32767*(A$R-A$w)*A$T)|A$R<<8))|A$R<<4))|A$R<<2))|A$R<<1))<<1},A$L.getLeftmost=function(A$C){for(var A$R=A$C,A$j=A$C;A$R.x<A$j.x&&(A$j=A$R),(A$R=A$R.next)!==A$C;);return A$j},A$L.pointInTriangle=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){return 0<=(A$T-A$o)*(A$R-A$U)-(A$C-A$o)*(A$G-A$U)&&0<=(A$C-A$o)*(A$w-A$U)-(A$j-A$o)*(A$R-A$U)&&0<=(A$j-A$o)*(A$G-A$U)-(A$T-A$o)*(A$w-A$U)},A$L.isValidDiagonal=function(A$C,A$R){return A$C.next.i!==A$R.i&&A$C.prev.i!==A$R.i&&!A$L.intersectsPolygon(A$C,A$R)&&A$L.locallyInside(A$C,A$R)&&A$L.locallyInside(A$R,A$C)&&A$L.middleInside(A$C,A$R)},A$L.area=function(A$C,A$R,A$j){return(A$R.y-A$C.y)*(A$j.x-A$R.x)-(A$R.x-A$C.x)*(A$j.y-A$R.y)},A$L.equals=function(A$C,A$R){return A$C.x===A$R.x&&A$C.y===A$R.y},A$L.intersects=function(A$C,A$R,A$j,A$w){return!!(A$L.equals(A$C,A$R)&&A$L.equals(A$j,A$w)||A$L.equals(A$C,A$w)&&A$L.equals(A$j,A$R))||0<A$L.area(A$C,A$R,A$j)!=0<A$L.area(A$C,A$R,A$w)&&0<A$L.area(A$j,A$w,A$C)!=0<A$L.area(A$j,A$w,A$R)},A$L.intersectsPolygon=function(A$C,A$R){var A$j=A$C;do{if(A$j.i!==A$C.i&&A$j.next.i!==A$C.i&&A$j.i!==A$R.i&&A$j.next.i!==A$R.i&&A$L.intersects(A$j,A$j.next,A$C,A$R))return!0;A$j=A$j.next}while(A$j!==A$C);return!1},A$L.locallyInside=function(A$C,A$R){return A$L.area(A$C.prev,A$C,A$C.next)<0?0<=A$L.area(A$C,A$R,A$C.next)&&0<=A$L.area(A$C,A$C.prev,A$R):A$L.area(A$C,A$R,A$C.prev)<0||A$L.area(A$C,A$C.next,A$R)<0},A$L.middleInside=function(A$C,A$R){for(var A$j=A$C,A$w=!1,A$T=(A$C.x+A$R.x)/2,A$G=(A$C.y+A$R.y)/2;A$j.y>A$G!=A$j.next.y>A$G&&A$j.next.y!==A$j.y&&A$T<(A$j.next.x-A$j.x)*(A$G-A$j.y)/(A$j.next.y-A$j.y)+A$j.x&&(A$w=!A$w),(A$j=A$j.next)!==A$C;);return A$w},A$L.splitPolygon=function(A$C,A$R){var A$j=new A$TC(A$C.i,A$C.x,A$C.y),A$w=new A$TC(A$R.i,A$R.x,A$R.y),A$T=A$C.next,A$G=A$R.prev;return(A$C.next=A$R).prev=A$C,(A$j.next=A$T).prev=A$j,(A$w.next=A$j).prev=A$w,(A$G.next=A$w).prev=A$G,A$w},A$L.insertNode=function(A$C,A$R,A$j,A$w){var A$T=new A$TC(A$C,A$R,A$j);return A$w?(A$T.next=A$w.next,(A$T.prev=A$w).next.prev=A$T,A$w.next=A$T):(A$T.prev=A$T).next=A$T,A$T},A$L.removeNode=function(A$C){A$C.next.prev=A$C.prev,A$C.prev.next=A$C.next,A$C.prevZ&&(A$C.prevZ.nextZ=A$C.nextZ),A$C.nextZ&&(A$C.nextZ.prevZ=A$C.prevZ)},A$L.signedArea=function(A$C,A$R,A$j,A$w){for(var A$T=0,A$G=A$R,A$o=A$j-A$w;A$G<A$j;A$G+=A$w)A$T+=(A$C[A$o]-A$C[A$G])*(A$C[A$G+1]+A$C[A$o+1]),A$o=A$G;return A$T},A$L}(),A$TC=function(){function A$C(A$C,A$R,A$j){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=A$C,this.x=A$R,this.y=A$j,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return A$M(A$C,"laya.webgl.shapes.EarcutNode"),A$C}(),A$GC=(function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this.lineWidth=A$C,this.lineColor=A$R,this.lineAlpha=A$j,this.fillColor=A$w,this.fillAlpha=A$T,this.shape=A$o,this.fill=A$G}A$M(A$C,"laya.webgl.shapes.GeometryData");var A$R=A$C.prototype;A$R.clone=function(){return new A$C(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},A$R.getIndexData=function(){return null},A$R.getVertexData=function(){return null},A$R.destroy=function(){this.shape=null}}(),function(){function A$C(A$C){if(A$C instanceof Float32Array)this.points=A$C;else if(A$C instanceof Array){A$C.length;this.points=new Float32Array(A$C)}}A$M(A$C,"laya.webgl.shapes.Vertex");var A$R=A$C.prototype;A$p.imps(A$R,{"laya.webgl.shapes.IShape":!0}),A$R.getData=function(A$C,A$R,A$j){},A$R.needUpdate=function(A$C){return!1},A$R.rebuild=function(A$C){},A$R.setMatrix=function(A$C){}}(),function(){function A$t(A$C){void 0===A$C&&(A$C=1e4),this._renderType=A$C}A$M(A$t,"laya.webgl.submit.Submit");var A$C=A$t.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C.releaseRender=function(){var A$C=A$t._cache;(A$C[A$C._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},A$C.getRenderType=function(){return this._renderType},A$C.renderSubmit=function(){if(0===this._numEle)return 1;var A$C=this.shaderValue.textureHost;if(A$C){var A$R=A$C.source;if(!A$C.bitmap||!A$R)return 1;this.shaderValue.texture=A$R,A$C.alphaTexture&&A$C.alphaTexture.source&&(this.shaderValue.texture1=A$C.alphaTexture.source)}this._vb.bind_upload(this._ib);var A$j=A$bC.mainContext;return this.shaderValue.upload(),A$B.activeBlendFunction!==this._blendFn&&(A$j.enable(3042),this._blendFn(A$j),A$B.activeBlendFunction=this._blendFn),A$P.drawCall++,A$P.trianglesFaces+=this._numEle/3,A$j.drawElements(4,this._numEle,5123,this._startIdx),1},A$t.__init__=function(){var A$C=A$t.RENDERBASE=new A$t(-1);A$C.shaderValue=new A$xC(0,0),A$C.shaderValue.ALPHA=-1234},A$t.createSubmit=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$t._cache._length?A$t._cache[--A$t._cache._length]:new A$t;null==A$j&&((A$j=A$G._selfVb||(A$G._selfVb=A$vC.create(-1))).clear(),A$w=0),A$G._ib=A$R,A$G._vb=A$j,A$G._startIdx=A$w*A$LC.BYTES_PIDX,A$G._numEle=0;var A$o=A$C._nBlendType;A$G._blendFn=A$C._targets?A$B.targetFns[A$o]:A$B.fns[A$o],A$G.shaderValue=A$T,A$G.shaderValue.setValue(A$C._shader2D);var A$U=A$C._shader2D.filters;return A$U&&A$G.shaderValue.setFilters(A$U),A$G},A$t.createShape=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$t._cache._length?A$t._cache[--A$t._cache._length]:new A$t;A$o._ib=A$R,A$o._vb=A$j,A$o._numEle=A$w,A$o._startIdx=A$T,A$o.shaderValue=A$G,A$o.shaderValue.setValue(A$C._shader2D);var A$U=A$C._nBlendType;return A$o._blendFn=A$C._targets?A$B.targetFns[A$U]:A$B.fns[A$U],A$o},A$t.TYPE_2D=1e4,A$t.TYPE_CANVAS=10003,A$t.TYPE_CMDSETRT=10004,A$t.TYPE_CUSTOM=10005,A$t.TYPE_BLURRT=10006,A$t.TYPE_CMDDESTORYPRERT=10007,A$t.TYPE_DISABLESTENCIL=10008,A$t.TYPE_OTHERIBVB=10009,A$t.TYPE_PRIMITIVE=10010,A$t.TYPE_RT=10011,A$t.TYPE_BLUR_RT=10012,A$t.TYPE_TARGET=10013,A$t.TYPE_CHANGE_VALUE=10014,A$t.TYPE_SHAPE=10015,A$t.TYPE_TEXTURE=10016,A$t.TYPE_FILLTEXTURE=10017,A$t.RENDERBASE=null,A$t._cache=((A$t._cache=[])._length=0,A$t._cache),A$t}()),A$oC=function(){function A$w(){this.fun=null,this.args=null}A$M(A$w,"laya.webgl.submit.SubmitCMD");var A$C=A$w.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C.renderSubmit=function(){return this.fun.apply(null,this.args),1},A$C.getRenderType=function(){return 0},A$C.releaseRender=function(){var A$C=A$w._cache;A$C[A$C._length++]=this},A$w.create=function(A$C,A$R){var A$j=A$w._cache._length?A$w._cache[--A$w._cache._length]:new A$w;return A$j.fun=A$R,A$j.args=A$C,A$j},A$w._cache=((A$w._cache=[])._length=0,A$w._cache),A$w}(),A$UC=function(){function A$R(){this.variables={}}A$M(A$R,"laya.webgl.submit.SubmitCMDScope");var A$C=A$R.prototype;return A$C.getValue=function(A$C){return this.variables[A$C]},A$C.addValue=function(A$C,A$R){return this.variables[A$C]=A$R},A$C.setValue=function(A$C,A$R){return this.variables.hasOwnProperty(A$C)?this.variables[A$C]=A$R:null},A$C.clear=function(){for(var A$C in this.variables)delete this.variables[A$C]},A$C.recycle=function(){this.clear(),A$R.POOL.push(this)},A$R.create=function(){var A$C=A$R.POOL.pop();return A$C||(A$C=new A$R),A$C},A$R.POOL=[],A$R}(),A$tC=function(){function A$H(){this.offset=0,this.startIndex=0,this._mat=A$W.create()}A$M(A$H,"laya.webgl.submit.SubmitOtherIBVB");var A$C=A$H.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C.releaseRender=function(){var A$C=A$H._cache;(A$C[A$C._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},A$C.getRenderType=function(){return 10009},A$C.renderSubmit=function(){var A$C=this._shaderValue.textureHost;if(A$C){var A$R=A$C.source;if(!A$C.bitmap||!A$R)return 1;this._shaderValue.texture=A$R}this._vb.bind_upload(this._ib);var A$j=A$ZC.worldMatrix4,A$w=A$W.TEMP;A$W.mulPre(this._mat,A$j[0],A$j[1],A$j[4],A$j[5],A$j[12],A$j[13],A$w);var A$T=A$ZC.worldMatrix4=A$H.tempMatrix4;A$T[0]=A$w.a,A$T[1]=A$w.b,A$T[4]=A$w.c,A$T[5]=A$w.d,A$T[12]=A$w.tx,A$T[13]=A$w.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var A$G=A$bC.mainContext;return A$B.activeBlendFunction!==this._blendFn&&(A$G.enable(3042),this._blendFn(A$G),A$B.activeBlendFunction=this._blendFn),A$P.drawCall++,A$P.trianglesFaces+=this._numEle/3,A$G.drawElements(4,this._numEle,5123,this.startIndex),A$ZC.worldMatrix4=A$j,A$yC.activeShader=null,1},A$H.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){void 0===A$t&&(A$t=0);var A$I=A$H._cache._length?A$H._cache[--A$H._cache._length]:new A$H;A$I._ib=A$j,A$I._vb=A$R,A$I._numEle=A$w,A$I._shader=A$T,A$I._shaderValue=A$G;var A$e=A$C._nBlendType;switch(A$I._blendFn=A$C._targets?A$B.targetFns[A$e]:A$B.fns[A$e],A$t){case 0:A$I.offset=0,A$I.startIndex=A$U/(A$LC.BYTES_PE*A$R.vertexStride)*1.5,A$I.startIndex*=A$LC.BYTES_PIDX;break;case 1:A$I.startIndex=A$o,A$I.offset=A$U}return A$I},A$H._cache=((A$H._cache=[])._length=0,A$H._cache),A$H.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A$H}(),A$IC=function(){function A$j(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new A$A,this.screenRect=new A$A}A$M(A$j,"laya.webgl.submit.SubmitScissor");var A$C=A$j.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C._scissor=function(A$C,A$R,A$j,A$w){var A$T=A$ZC.worldMatrix4,A$G=A$T[0],A$o=A$T[5],A$U=A$T[12],A$t=A$T[13];if(A$w*=A$o,(A$j*=A$G)<1||A$w<1)return!1;var A$I=(A$C=A$C*A$G+A$U)+A$j,A$e=(A$R=A$R*A$o+A$t)+A$w;A$C<0&&(A$j=A$I-(A$C=0)),A$R<0&&(A$w=A$e-(A$R=0));var A$H=A$ZC.worldClipRect;if(A$C=Math.max(A$C,A$H.x),A$R=Math.max(A$R,A$H.y),A$j=Math.min(A$I,A$H.right)-A$C,A$w=Math.min(A$e,A$H.bottom)-A$R,A$j<1||A$w<1)return!1;var A$M=A$ZC.worldScissorTest;return this.screenRect.copyFrom(A$H),A$H.x=A$C,A$H.y=A$R,A$H.width=A$j,A$H.height=A$w,A$ZC.worldScissorTest=!0,A$R=A$ZC.height-A$R-A$w,A$bC.mainContext.scissor(A$C,A$R,A$j,A$w),A$bC.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),A$M?(A$R=A$ZC.height-this.screenRect.y-this.screenRect.height,A$bC.mainContext.scissor(this.screenRect.x,A$R,this.screenRect.width,this.screenRect.height),A$bC.mainContext.enable(3089)):(A$bC.mainContext.disable(3089),A$ZC.worldScissorTest=!1),A$H.copyFrom(this.screenRect),!0},A$C._scissorWithTagart=function(A$C,A$R,A$j,A$w){if(A$j<1||A$w<1)return!1;var A$T=A$C+A$j,A$G=A$R+A$w;A$C<0&&(A$j=A$T-(A$C=0)),A$R<0&&(A$w=A$G-(A$R=0));var A$o=A$ZC.worldClipRect;if(A$C=Math.max(A$C,A$o.x),A$R=Math.max(A$R,A$o.y),A$j=Math.min(A$T,A$o.right)-A$C,A$w=Math.min(A$G,A$o.bottom)-A$R,A$j<1||A$w<1)return!1;var A$U=A$ZC.worldScissorTest;return this.screenRect.copyFrom(A$o),A$ZC.worldScissorTest=!0,A$o.x=A$C,A$o.y=A$R,A$o.width=A$j,A$o.height=A$w,A$R=A$ZC.height-A$R-A$w,A$bC.mainContext.scissor(A$C,A$R,A$j,A$w),A$bC.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),A$U?(A$R=A$ZC.height-this.screenRect.y-this.screenRect.height,A$bC.mainContext.scissor(this.screenRect.x,A$R,this.screenRect.width,this.screenRect.height),A$bC.mainContext.enable(3089)):(A$bC.mainContext.disable(3089),A$ZC.worldScissorTest=!1),A$o.copyFrom(this.screenRect),!0},A$C.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},A$C.getRenderType=function(){return 0},A$C.releaseRender=function(){var A$C=A$j._cache;(A$C[A$C._length++]=this).context=null},A$j.create=function(A$C){var A$R=A$j._cache._length?A$j._cache[--A$j._cache._length]:new A$j;return A$R.context=A$C,A$R},A$j._cache=((A$j._cache=[])._length=0,A$j._cache),A$j}(),A$eC=function(){function A$t(){this.step=0,this.blendMode=null,this.level=0}A$M(A$t,"laya.webgl.submit.SubmitStencil");var A$C=A$t.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},A$C.getRenderType=function(){return 0},A$C.releaseRender=function(){var A$C=A$t._cache;A$C[A$C._length++]=this},A$C.do1=function(){var A$C=A$bC.mainContext;A$C.enable(2960),A$C.clear(1024),A$C.colorMask(!1,!1,!1,!1),A$C.stencilFunc(514,this.level,255),A$C.stencilOp(7680,7680,7682)},A$C.do2=function(){var A$C=A$bC.mainContext;A$C.stencilFunc(514,this.level+1,255),A$C.colorMask(!0,!0,!0,!0),A$C.stencilOp(7680,7680,7680)},A$C.do3=function(){var A$C=A$bC.mainContext;A$C.colorMask(!0,!0,!0,!0),A$C.stencilOp(7680,7680,7680),A$C.clear(1024),A$C.disable(2960)},A$C.do4=function(){var A$C=A$bC.mainContext;0==this.level&&(A$C.enable(2960),A$C.clear(1024)),A$C.colorMask(!1,!1,!1,!1),A$C.stencilFunc(519,0,255),A$C.stencilOp(7680,7680,7682)},A$C.do5=function(){var A$C=A$bC.mainContext;A$C.stencilFunc(514,this.level,255),A$C.colorMask(!0,!0,!0,!0),A$C.stencilOp(7680,7680,7680)},A$C.do6=function(){var A$C=A$bC.mainContext;A$B.targetFns[A$B.TOINT[this.blendMode]](A$C)},A$C.do7=function(){var A$C=A$bC.mainContext;A$C.colorMask(!1,!1,!1,!1),A$C.stencilOp(7680,7680,7683)},A$C.do8=function(){var A$C=A$bC.mainContext;A$C.colorMask(!0,!0,!0,!0),A$C.stencilFunc(514,this.level,255),A$C.stencilOp(7680,7680,7680)},A$t.restore=function(A$C,A$R,A$j,A$w,A$T){var A$G;if((A$C._renderKey=0)<A$t._mask&&A$t._mask--,0==A$t._mask)A$G=laya.webgl.submit.SubmitStencil.create(3),A$C.addRenderObject(A$G),A$C._curSubmit=A$GC.RENDERBASE;else{A$G=laya.webgl.submit.SubmitStencil.create(7),A$C.addRenderObject(A$G);var A$o=A$C._vb;A$o._byteLength;if(A$DC.fillRectImgVb(A$o,null,A$R.x,A$R.y,A$R.width,A$R.height,A$n.DEF_UV,A$j,A$w,A$T,0,0)){A$C._shader2D.glTexture=null;var A$U=A$C._curSubmit=A$GC.createSubmit(A$C,A$C._ib,A$o,(A$o._byteLength-64)/32*3,A$xC.create(2,0));A$U.shaderValue.ALPHA=1,A$C._submits[A$C._submits._length++]=A$U,A$C._curSubmit._numEle+=6,A$C._curSubmit=A$GC.RENDERBASE}else alert("clipRect calc stencil rect error");A$G=laya.webgl.submit.SubmitStencil.create(8),A$C.addRenderObject(A$G)}},A$t.restore2=function(A$C,A$R){var A$j;(A$C._renderKey=0)<A$t._mask&&A$t._mask--,0==A$t._mask?(A$j=laya.webgl.submit.SubmitStencil.create(3),A$C.addRenderObject(A$j),A$C._curSubmit=A$GC.RENDERBASE):(A$j=laya.webgl.submit.SubmitStencil.create(7),A$C.addRenderObject(A$j),A$C._submits[A$C._submits._length++]=A$R,A$j=laya.webgl.submit.SubmitStencil.create(8),A$C.addRenderObject(A$j))},A$t.create=function(A$C){var A$R=A$t._cache._length?A$t._cache[--A$t._cache._length]:new A$t;return 5==(A$R.step=A$C)&&++A$t._mask,A$R.level=A$t._mask,A$R},A$t._cache=((A$t._cache=[])._length=0,A$t._cache),A$t._mask=0,A$t}(),A$HC=function(){function A$U(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}A$M(A$U,"laya.webgl.submit.SubmitTarget");var A$C=A$U.prototype;return A$p.imps(A$C,{"laya.webgl.submit.ISubmit":!0}),A$C.renderSubmit=function(){this._vb.bind_upload(this._ib);var A$C=this.scope.getValue(this.proName);return A$C&&(this.shaderValue.texture=A$C.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[A$C.width,A$C.height]),this.shaderValue.upload(),this.blend(),A$P.drawCall++,A$P.trianglesFaces+=this._numEle/3,A$bC.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},A$C.blend=function(){if(A$B.activeBlendFunction!==A$B.fns[this.blendType]){var A$C=A$bC.mainContext;A$C.enable(3042),A$B.fns[this.blendType](A$C),A$B.activeBlendFunction=A$B.fns[this.blendType]}},A$C.getRenderType=function(){return 0},A$C.releaseRender=function(){var A$C=A$U._cache;(A$C[A$C._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},A$U.create=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$U._cache._length?A$U._cache[--A$U._cache._length]:new A$U;return A$o._ib=A$R,A$o._vb=A$j,A$o.proName=A$G,A$o._startIdx=A$w*A$LC.BYTES_PIDX,A$o._numEle=0,A$o.blendType=A$C._nBlendType,A$o.shaderValue=A$T,A$o.shaderValue.setValue(A$C._shader2D),A$o},A$U._cache=((A$U._cache=[])._length=0,A$U._cache),A$U}(),A$MC=function(){function A$C(){this._sourceStr=null}A$M(A$C,"laya.webgl.text.CharSegment");var A$R=A$C.prototype;return A$p.imps(A$R,{"laya.webgl.text.ICharSegment":!0}),A$R.textToSpit=function(A$C){this._sourceStr=A$C},A$R.getChar=function(A$C){return this._sourceStr.charAt(A$C)},A$R.getCharCode=function(A$C){return this._sourceStr.charCodeAt(A$C)},A$R.length=function(){return this._sourceStr.length},A$C}(),A$KC=function(){var A$C;function A$P(){}return A$M(A$P,"laya.webgl.text.DrawText"),A$P.__init__=function(){A$P._charsTemp=new Array,A$P._drawValue=new A$C,A$P._charSeg=new A$MC},A$P.customCharSeg=function(A$C){A$P._charSeg=A$C},A$P.getChar=function(A$C,A$R,A$j){var A$w=A$uC.createOneChar(A$C,A$j);return-1!=A$R&&(A$P._charsCache[A$R]=A$w),A$w},A$P._drawSlow=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M,A$K,A$F){var A$L,A$D,A$Q=A$P._drawValue.value(A$G,A$U,A$t,A$I,A$M,A$K,A$F),A$Z=0,A$S=0,A$b=A$P._charsTemp,A$f=0,A$p=NaN;if(A$w)for(A$b.length=A$w.length,A$Z=0,A$S=A$w.length;A$Z<A$S;A$Z++)(A$D=A$w[A$Z])&&(A$p=A$D.charNum+A$Q.txtID,A$b[A$Z]=A$L=A$P._charsCache[A$p]||A$P.getChar(A$D.char,A$p,A$Q),A$L.active());else{var A$h=A$j instanceof laya.utils.WordText?A$j.toString():A$j;if(A$a.CharacterCache){A$P._charSeg.textToSpit(A$h);var A$x=A$P._charSeg.length();for(A$Z=0,A$S=A$b.length=A$x;A$Z<A$S;A$Z++)A$p=A$P._charSeg.getCharCode(A$Z)+A$Q.txtID,A$b[A$Z]=A$L=A$P._charsCache[A$p]||A$P.getChar(A$P._charSeg.getChar(A$Z),A$p,A$Q),A$L.active(),A$f+=A$L.cw}else A$b.length=0,(A$L=A$P.getChar(A$h,-1,A$Q)).active(),A$f+=A$L.cw,A$b[0]=A$L}var A$W=0;null!==A$o&&"left"!==A$o&&(A$W=-("center"==A$o?A$f/2:A$f));var A$$,A$A,A$r=NaN,A$E=0;if(A$w)for(A$Z=0,A$S=A$b.length;A$Z<A$S;A$Z++)A$L=A$b[A$Z],A$D=A$w[A$Z],A$L&&A$D&&!A$L.isSpace&&(A$r=A$L.borderSize,A$$=A$L.texture,A$R._drawText(A$$,A$e+A$W+A$D.x*A$M-A$r,A$H+A$D.y*A$K-A$r,A$$.width,A$$.height,A$T,0,0,0,0));else{for(A$Z=0,A$S=A$b.length;A$Z<A$S;A$Z++)(A$L=A$b[A$Z])&&!A$L.isSpace&&(A$r=A$L.borderSize,A$$=A$L.texture,A$R._drawText(A$$,A$e+A$W-A$r,A$H-A$r,A$$.width,A$$.height,A$T,0,0,0,0),A$C&&((A$A=A$C[A$E++])||(A$A=A$C[A$E-1]=[]),A$A[0]=A$$,A$A[1]=A$W-A$r,A$A[2]=-A$r)),A$W+=A$L.cw;A$C&&(A$C.length=A$E)}},A$P._drawFast=function(A$C,A$R,A$j,A$w,A$T){for(var A$G,A$o,A$U=0,A$t=A$C.length;A$U<A$t;A$U++)(A$G=(A$o=A$C[A$U])[0]).active(),A$R._drawText(A$G,A$w+A$o[1],A$T+A$o[2],A$G.width,A$G.height,A$j,0,0,0,0)},A$P.drawText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H){if(void 0===A$H&&(A$H=0),!(A$R&&0===A$R.length||A$j&&0===A$j.length)){var A$M=A$w.a,A$K=A$w.d;(0!==A$w.b||0!==A$w.c)&&(A$M=A$K=1);var A$F=1!==A$M||1!==A$K;if(A$F&&A$p.stage.transform){var A$L=A$p.stage.transform;A$F=A$L.a===A$M&&A$L.d===A$K}else A$F=!1;if(A$F){var A$D=(A$w=A$w.copyTo(A$hC._tmpMatrix)).tx,A$Q=A$w.ty;A$w.scale(1/A$M,1/A$K),A$w._checkTransform(),A$I*=A$M,A$e*=A$K,A$I+=A$D-A$w.tx,A$e+=A$Q-A$w.ty}else A$M=A$K=1;if(A$j)A$P._drawSlow(null,A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$M,A$K,A$H);else{if(null===A$R.toUpperCase){var A$Z=A$M+1e5*A$K,A$S=A$R;return void(A$S.changed||A$S.id!==A$Z?(A$S.id=A$Z,A$S.changed=!1,A$P._drawSlow(A$S.save,A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$M,A$K,A$H)):A$P._drawFast(A$S.save,A$C,A$w,A$I,A$e))}var A$b=A$R+A$T.toString()+A$o+A$U+A$t+A$M+A$K+A$G,A$f=A$P._textsCache[A$b];A$a.CharacterCache?A$f?A$P._drawFast(A$f,A$C,A$w,A$I,A$e):(A$P._textsCache.__length||(A$P._textsCache.__length=0),A$P._textsCache.__length>A$h.WebGLTextCacheCount&&((A$P._textsCache={}).__length=0,A$P._curPoolIndex=0),A$P._textCachesPool[A$P._curPoolIndex]?(A$f=A$P._textsCache[A$b]=A$P._textCachesPool[A$P._curPoolIndex]).length=0:A$P._textCachesPool[A$P._curPoolIndex]=A$f=A$P._textsCache[A$b]=[],A$P._textsCache.__length++,A$P._curPoolIndex++,A$P._drawSlow(A$f,A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$M,A$K,A$H)):A$P._drawSlow(A$f,A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$M,A$K,A$H)}}},A$P._charsTemp=null,A$P._textCachesPool=[],A$P._curPoolIndex=0,A$P._charsCache={},A$P._textsCache={},A$P._drawValue=null,A$P.d=[],A$P._charSeg=null,A$P.__init$=function(){A$C=function(){function A$t(){}return A$M(A$t,""),A$t.prototype.value=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this.font=A$C,this.fillColor=A$R,this.borderColor=A$j,this.lineWidth=A$w,this.scaleX=A$T,this.scaleY=A$G,this.underLine=A$o;var A$U=A$C.toString()+A$T+A$G+A$w+(A$R?A$R.toLowerCase():" ")+(A$j?A$j.toLowerCase():" ")+A$o;return this.txtID=A$t._keymap[A$U],this.txtID||(this.txtID=1e-7*++A$t._keymapCount,A$t._keymap[A$U]=this.txtID),this},A$t.clear=function(){A$t._keymap={},A$t._keymapCount=1},A$t._keymap={},A$t._keymapCount=1,A$t}()},A$P}(),A$FC=function(){function A$T(A$C){this._index=0,this._size=14,this._italic=-2,A$T._cache2=A$T._cache2||[],this.setFont(A$C||"14px Arial")}A$M(A$T,"laya.webgl.text.FontInContext");var A$C=A$T.prototype;return A$C.setFont=function(A$C){var A$R=A$T._cache2[A$C];if(A$R)this._words=A$R[0],this._size=A$R[1];else{this._words=A$C.split(" ");for(var A$j=0,A$w=this._words.length;A$j<A$w;A$j++)if(0<this._words[A$j].indexOf("px")){this._index=A$j;break}this._size=parseInt(this._words[this._index]),A$T._cache2[A$C]=[this._words,this._size]}this._text=null,this._italic=-2},A$C.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},A$C.hasType=function(A$C){for(var A$R=0,A$j=this._words.length;A$R<A$j;A$R++)if(this._words[A$R]===A$C)return A$R;return-1},A$C.removeType=function(A$C){for(var A$R=0,A$j=this._words.length;A$R<A$j;A$R++)if(this._words[A$R]===A$C){this._words.splice(A$R,1),this._index>A$R&&this._index--;break}this._text=null,this._italic=-2},A$C.copyTo=function(A$C){return A$C._text=this._text,A$C._size=this._size,A$C._index=this._index,A$C._words=this._words.slice(),A$C._italic=-2,A$C},A$C.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},A$w(0,A$C,"size",function(){return this._size},function(A$C){this._size=A$C,this._words[this._index]=A$C+"px",this._text=null}),A$T.create=function(A$C){var A$R=A$T._cache[A$C];return A$R||(A$R=A$T._cache[A$C]=new A$T(A$C))},A$T.EMPTY=new A$T,A$T._cache={},A$T._cache2=null,A$T}(),A$LC=function(){function A$C(){}return A$M(A$C,"laya.webgl.utils.CONST3D2D"),A$C.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A$C.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],A$C.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],A$C._TMPARRAY=[],A$C._OFFSETX=0,A$C._OFFSETY=0,A$o(A$C,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),A$C}(),A$DC=function(){function A$F(){}return A$M(A$F,"laya.webgl.utils.GlUtils"),A$F.make2DProjection=function(A$C,A$R,A$j){return[2/A$C,0,0,0,0,-2/A$R,0,0,0,0,2/A$j,0,-1,1,0,1]},A$F.fillIBQuadrangle=function(A$C,A$R){if(65535/4<A$R)throw Error("IBQuadrangle count:"+A$R+" must<:"+Math.floor(65535/4));A$R=Math.floor(A$R),A$C._resizeBuffer(6*(A$R+1)*2,!1),A$C.byteLength=A$C.bufferLength;for(var A$j=A$C.getUint16Array(),A$w=0,A$T=0;A$T<A$R;A$T++)A$j[A$w++]=4*A$T,A$j[A$w++]=4*A$T+2,A$j[A$w++]=4*A$T+1,A$j[A$w++]=4*A$T,A$j[A$w++]=4*A$T+3,A$j[A$w++]=4*A$T+2;return A$C.setNeedUpload(),!0},A$F.expandIBQuadrangle=function(A$C,A$R){A$C.bufferLength>=6*A$R*2||A$F.fillIBQuadrangle(A$C,A$R)},A$F.mathCeilPowerOfTwo=function(A$C){return A$C--,A$C|=A$C>>1,A$C|=A$C>>2,A$C|=A$C>>4,A$C|=A$C>>8,A$C|=A$C>>16,++A$C},A$F.fillQuadrangleImgVb=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=16+(A$C._byteLength>>2);A$C.byteLength=A$t<<2;var A$I=A$C.getFloat32Array();A$I[(A$t-=16)+2]=A$T[0],A$I[A$t+3]=A$T[1],A$I[A$t+6]=A$T[2],A$I[A$t+7]=A$T[3],A$I[A$t+10]=A$T[4],A$I[A$t+11]=A$T[5],A$I[A$t+14]=A$T[6],A$I[A$t+15]=A$T[7];var A$e=A$G.a,A$H=A$G.b,A$M=A$G.c,A$K=A$G.d;if(1!==A$e||0!==A$H||0!==A$M||1!==A$K){A$G.bTransform=!0;var A$F=A$G.tx+A$o,A$L=A$G.ty+A$U;A$I[A$t]=(A$w[0]+A$R)*A$e+(A$w[1]+A$j)*A$M+A$F,A$I[A$t+1]=(A$w[0]+A$R)*A$H+(A$w[1]+A$j)*A$K+A$L,A$I[A$t+4]=(A$w[2]+A$R)*A$e+(A$w[3]+A$j)*A$M+A$F,A$I[A$t+5]=(A$w[2]+A$R)*A$H+(A$w[3]+A$j)*A$K+A$L,A$I[A$t+8]=(A$w[4]+A$R)*A$e+(A$w[5]+A$j)*A$M+A$F,A$I[A$t+9]=(A$w[4]+A$R)*A$H+(A$w[5]+A$j)*A$K+A$L,A$I[A$t+12]=(A$w[6]+A$R)*A$e+(A$w[7]+A$j)*A$M+A$F,A$I[A$t+13]=(A$w[6]+A$R)*A$H+(A$w[7]+A$j)*A$K+A$L}else A$G.bTransform=!1,A$R+=A$G.tx+A$o,A$j+=A$G.ty+A$U,A$I[A$t]=A$R+A$w[0],A$I[A$t+1]=A$j+A$w[1],A$I[A$t+4]=A$R+A$w[2],A$I[A$t+5]=A$j+A$w[3],A$I[A$t+8]=A$R+A$w[4],A$I[A$t+9]=A$j+A$w[5],A$I[A$t+12]=A$R+A$w[6],A$I[A$t+13]=A$j+A$w[7];return A$C._upload=!0},A$F.fillTranglesVB=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U=(A$C._byteLength>>2)+A$w.length;A$C.byteLength=A$U<<2;var A$t=A$C.getFloat32Array();A$U-=A$w.length;for(var A$I=A$w.length,A$e=A$T.a,A$H=A$T.b,A$M=A$T.c,A$K=A$T.d,A$F=0;A$F<A$I;A$F+=4)if(A$t[A$U+A$F+2]=A$w[A$F+2],A$t[A$U+A$F+3]=A$w[A$F+3],1!==A$e||0!==A$H||0!==A$M||1!==A$K){A$T.bTransform=!0;var A$L=A$T.tx+A$G,A$D=A$T.ty+A$o;A$t[A$U+A$F]=(A$w[A$F]+A$R)*A$e+(A$w[A$F+1]+A$j)*A$M+A$L,A$t[A$U+A$F+1]=(A$w[A$F]+A$R)*A$H+(A$w[A$F+1]+A$j)*A$K+A$D}else A$T.bTransform=!1,A$R+=A$T.tx+A$G,A$j+=A$T.ty+A$o,A$t[A$U+A$F]=A$R+A$w[A$F],A$t[A$U+A$F+1]=A$j+A$w[A$F+1];return A$C._upload=!0},A$F.copyPreImgVb=function(A$C,A$R,A$j){var A$w=A$C._byteLength>>2;A$C.byteLength=A$w+16<<2;for(var A$T=A$C.getFloat32Array(),A$G=0,A$o=A$w-16;A$G<4;A$G++)A$T[A$w]=A$T[A$o]+A$R,++A$o,A$T[++A$w]=A$T[A$o]+A$j,++A$o,A$T[++A$w]=A$T[A$o],++A$o,A$T[++A$w]=A$T[A$o],++A$w,++A$o;A$C._upload=!0},A$F.fillRectImgVb=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M){void 0===A$M&&(A$M=!1);var A$K,A$F,A$L,A$D,A$Q,A$Z,A$S,A$b,A$f,A$p,A$h,A$x,A$W,A$$,A$A,A$r,A$E=1,A$P=A$U.a,A$J=A$U.b,A$N=A$U.c,A$a=A$U.d,A$n=A$R&&A$R.width<99999999;if(1!==A$P||0!==A$J||0!==A$N||1!==A$a?(A$U.bTransform=!0,0===A$J&&0===A$N&&(A$E=23,A$f=A$T+A$j,A$p=A$G+A$w,A$K=A$P*A$j+(A$h=A$U.tx+A$t),A$L=A$P*A$f+A$h,A$F=A$a*A$w+(A$x=A$U.ty+A$I),A$D=A$a*A$p+A$x)):(A$E=23,A$U.bTransform=!1,A$L=(A$K=A$j+A$U.tx+A$t)+A$T,A$D=(A$F=A$w+A$U.ty+A$I)+A$G),A$n&&(A$Q=A$R.x,A$Z=A$R.y,A$S=A$R.width+A$Q,A$b=A$R.height+A$Z),1!==A$E){if(Math.min(A$K,A$L)>=A$S)return!1;if(Math.min(A$F,A$D)>=A$b)return!1;if(Math.max(A$L,A$K)<=A$Q)return!1;if(Math.max(A$D,A$F)<=A$Z)return!1}var A$y=A$C._byteLength>>2;A$C.byteLength=16+A$y<<2;var A$m=A$C.getFloat32Array();switch(A$m[2+A$y]=A$o[0],A$m[3+A$y]=A$o[1],A$m[6+A$y]=A$o[2],A$m[7+A$y]=A$o[3],A$m[10+A$y]=A$o[4],A$m[11+A$y]=A$o[5],A$m[14+A$y]=A$o[6],A$m[15+A$y]=A$o[7],A$E){case 1:A$h=A$U.tx+A$t,A$x=A$U.ty+A$I;var A$k=A$P*A$j,A$V=A$N*A$w,A$z=A$a*A$w,A$l=A$J*A$j,A$g=A$P*(A$f=A$T+A$j),A$B=A$N*(A$p=A$G+A$w),A$i=A$a*A$p,A$_=A$J*A$f;A$M?(A$W=A$k+A$V+A$h,A$A=Math.round(A$W)-A$W,A$$=A$z+A$l+A$x,A$r=Math.round(A$$)-A$$,A$m[A$y]=A$W+A$A,A$m[1+A$y]=A$$+A$r,A$m[4+A$y]=A$g+A$V+A$h+A$A,A$m[5+A$y]=A$z+A$_+A$x+A$r,A$m[8+A$y]=A$g+A$B+A$h+A$A,A$m[9+A$y]=A$i+A$_+A$x+A$r,A$m[12+A$y]=A$k+A$B+A$h+A$A,A$m[13+A$y]=A$i+A$l+A$x+A$r):(A$m[A$y]=A$k+A$V+A$h,A$m[1+A$y]=A$z+A$l+A$x,A$m[4+A$y]=A$g+A$V+A$h,A$m[5+A$y]=A$z+A$_+A$x,A$m[8+A$y]=A$g+A$B+A$h,A$m[9+A$y]=A$i+A$_+A$x,A$m[12+A$y]=A$k+A$B+A$h,A$m[13+A$y]=A$i+A$l+A$x);break;case 23:A$M?(A$W=A$K+A$e,A$A=Math.round(A$W)-A$W,A$$=A$F,A$r=Math.round(A$$)-A$$,A$m[A$y]=A$W+A$A,A$m[1+A$y]=A$$+A$r,A$m[4+A$y]=A$L+A$e+A$A,A$m[5+A$y]=A$F+A$r,A$m[8+A$y]=A$L+A$A,A$m[9+A$y]=A$D+A$r,A$m[12+A$y]=A$K+A$A,A$m[13+A$y]=A$D+A$r):(A$m[A$y]=A$K+A$e,A$m[1+A$y]=A$F,A$m[4+A$y]=A$L+A$e,A$m[5+A$y]=A$F,A$m[8+A$y]=A$L,A$m[9+A$y]=A$D,A$m[12+A$y]=A$K,A$m[13+A$y]=A$D)}return A$C._upload=!0},A$F.fillLineVb=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=.5*A$o,A$I=A$F._fillLineArray,A$e=-(A$w-A$G),A$H=A$j-A$T,A$M=Math.sqrt(A$e*A$e+A$H*A$H);A$e/=A$M,A$H/=A$M,A$e*=A$t,A$H*=A$t,A$I[0]=A$j-A$e,A$I[1]=A$w-A$H,A$I[4]=A$j+A$e,A$I[5]=A$w+A$H,A$I[8]=A$T+A$e,A$I[9]=A$G+A$H,A$I[12]=A$T-A$e,A$I[13]=A$G-A$H,A$U&&A$U.transformPointArray(A$I,A$I);var A$K=16+(A$C._byteLength>>2);return A$C.byteLength=A$K<<2,A$C.insertData(A$I,A$K-16),!0},A$F._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A$F}(),A$QC=(function(){function A$t(){}A$M(A$t,"laya.webgl.utils.MatirxArray"),A$t.ArrayMul=function(A$C,A$R,A$j){if(A$C)if(A$R)for(var A$w=NaN,A$T=NaN,A$G=NaN,A$o=NaN,A$U=0;A$U<4;A$U++)A$w=A$C[A$U],A$T=A$C[A$U+4],A$G=A$C[A$U+8],A$o=A$C[A$U+12],A$j[A$U]=A$w*A$R[0]+A$T*A$R[1]+A$G*A$R[2]+A$o*A$R[3],A$j[A$U+4]=A$w*A$R[4]+A$T*A$R[5]+A$G*A$R[6]+A$o*A$R[7],A$j[A$U+8]=A$w*A$R[8]+A$T*A$R[9]+A$G*A$R[10]+A$o*A$R[11],A$j[A$U+12]=A$w*A$R[12]+A$T*A$R[13]+A$G*A$R[14]+A$o*A$R[15];else A$t.copyArray(A$C,A$j);else A$t.copyArray(A$R,A$j)},A$t.copyArray=function(A$C,A$R){if(A$C&&A$R)for(var A$j=0;A$j<A$C.length;A$j++)A$R[A$j]=A$C[A$j]}}(),function(){function A$R(A$C,A$R,A$j){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=A$C,this._vb=new A$vC(A$C,35048),A$R&&this._vb._resizeBuffer(A$R,!1),this._ib=new A$qC,A$j&&this._ib._resizeBuffer(A$j,!1)}A$M(A$R,"laya.webgl.utils.Mesh2D");var A$C=A$R.prototype;return A$C.cloneWithNewVB=function(){var A$C=new A$R(this._stride,0,0);return A$C._ib=this._ib,A$C._quadNum=this._quadNum,A$C._attribInfo=this._attribInfo,A$C},A$C.cloneWithNewVBIB=function(){var A$C=new A$R(this._stride,0,0);return A$C._attribInfo=this._attribInfo,A$C},A$C.getVBW=function(){return this._vb.setNeedUpload(),this._vb},A$C.getVBR=function(){return this._vb},A$C.getIBR=function(){return this._ib},A$C.getIBW=function(){return this._ib.setNeedUpload(),this._ib},A$C.createQuadIB=function(A$C){this._quadNum=A$C,this._ib._resizeBuffer(6*A$C*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var A$R=this._ib.getUint16Array(),A$j=0,A$w=0,A$T=0;A$T<A$C;A$T++)A$R[A$j++]=A$w,A$R[A$j++]=A$w+2,A$R[A$j++]=A$w+1,A$R[A$j++]=A$w,A$R[A$j++]=A$w+3,A$R[A$j++]=A$w+2,A$w+=4;this._ib.setNeedUpload()},A$C.setAttributes=function(A$C){if(this._attribInfo=A$C,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},A$C.getEleNum=function(){return this._ib.getBuffer().byteLength/2},A$C.releaseMesh=function(){},A$C.destroy=function(){},A$C.clearVB=function(){this._vb.clear()},A$R._gvaoid=0,A$R}()),A$ZC=function(){function A$T(){}return A$M(A$T,"laya.webgl.utils.RenderState2D"),A$T.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},A$T.mat2MatArray=function(A$C,A$R){var A$j=A$C,A$w=A$R;return A$w[0]=A$j.a,A$w[1]=A$j.b,A$w[2]=A$T.EMPTYMAT4_ARRAY[2],A$w[3]=A$T.EMPTYMAT4_ARRAY[3],A$w[4]=A$j.c,A$w[5]=A$j.d,A$w[6]=A$T.EMPTYMAT4_ARRAY[6],A$w[7]=A$T.EMPTYMAT4_ARRAY[7],A$w[8]=A$T.EMPTYMAT4_ARRAY[8],A$w[9]=A$T.EMPTYMAT4_ARRAY[9],A$w[10]=A$T.EMPTYMAT4_ARRAY[10],A$w[11]=A$T.EMPTYMAT4_ARRAY[11],A$w[12]=A$j.tx,A$w[13]=A$j.ty,A$w[14]=A$T.EMPTYMAT4_ARRAY[14],A$w[15]=A$T.EMPTYMAT4_ARRAY[15],A$R},A$T.restoreTempArray=function(){A$T.TEMPMAT4_ARRAY[0]=1,A$T.TEMPMAT4_ARRAY[1]=0,A$T.TEMPMAT4_ARRAY[4]=0,A$T.TEMPMAT4_ARRAY[5]=1,A$T.TEMPMAT4_ARRAY[12]=0,A$T.TEMPMAT4_ARRAY[13]=0},A$T.clear=function(){A$T.worldScissorTest=!1,A$T.worldShaderDefines=null,A$T.worldFilters=null,A$T.worldAlpha=1,A$T.worldClipRect.x=A$T.worldClipRect.y=0,A$T.worldClipRect.width=A$T.width,A$T.worldClipRect.height=A$T.height,A$T.curRenderTarget=null},A$T._MAXSIZE=99999999,A$T.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A$T.worldMatrix4=A$T.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A$T.worldAlpha=1,A$T.worldScissorTest=!1,A$T.worldFilters=null,A$T.worldShaderDefines=null,A$T.curRenderTarget=null,A$T.width=0,A$T.height=0,A$o(A$T,["worldMatrix",function(){return this.worldMatrix=new A$W},"worldClipRect",function(){return this.worldClipRect=new A$A(0,0,99999999,99999999)}]),A$T}(),A$SC=function(){var A$Z,A$j;function A$S(A$C,A$R,A$j,A$w,A$T){var A$G=this;function A$o(A$C){var A$R=[],A$j=new A$Z(A$R);return A$G._compileToTree(A$j,A$C.split("\n"),0,A$R,A$T),A$j}var A$U=A$K.now();this._VS=A$o(A$R),this._PS=A$o(A$j),this._nameMap=A$w,2<A$K.now()-A$U&&console.log("ShaderCompile use time:"+(A$K.now()-A$U)+"  size:"+A$R.length+"/"+A$j.length)}A$M(A$S,"laya.webgl.utils.ShaderCompile");var A$C=A$S.prototype;return A$C._compileToTree=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M=0,A$K=0,A$F=0,A$L=0;for(A$K=A$j;A$K<A$R.length;A$K++)if(!((A$U=A$R[A$K]).length<1)&&0!==(A$M=A$U.indexOf("//"))){if(0<=A$M&&(A$U=A$U.substr(0,A$M)),A$G=A$H||new A$Z(A$w),A$H=null,A$G.text=A$U,A$G.noCompile=!0,0<=(A$M=A$U.indexOf("#"))){for(A$t="#",A$L=A$M+1,A$F=A$U.length;A$L<A$F;A$L++){var A$D=A$U.charAt(A$L);if(" "===A$D||"\t"===A$D||"\r"===A$D||"\n"===A$D||"?"===A$D)break;A$t+=A$D}switch(A$G.name=A$t){case"#ifdef":case"#ifndef":if(A$G.src=A$U,A$G.noCompile=null!=A$U.match(/[!&|()=<>]/),A$G.noCompile?console.log("function():Boolean{return "+A$U.substr(A$M+A$G.name.length)+"}"):(A$e=A$U.replace(/^\s*/,"").split(/\s+/),A$G.setCondition(A$e[1],"#ifdef"===A$t?1:2),A$G.text="//"+A$G.text),A$G.setParent(A$C),A$C=A$G,A$T)for(A$e=A$U.substr(A$L).split(A$S._splitToWordExps3),A$L=0;A$L<A$e.length;A$L++)(A$U=A$e[A$L]).length&&(A$T[A$U]=!0);continue;case"#if":if(A$G.src=A$U,A$G.noCompile=!0,A$G.setParent(A$C),A$C=A$G,A$T)for(A$e=A$U.substr(A$L).split(A$S._splitToWordExps3),A$L=0;A$L<A$e.length;A$L++)(A$U=A$e[A$L]).length&&"defined"!=A$U&&(A$T[A$U]=!0);continue;case"#else":A$G.src=A$U,A$o=(A$C=A$C.parent).childs[A$C.childs.length-1],A$G.noCompile=A$o.noCompile,A$G.noCompile||(A$G.condition=A$o.condition,A$G.conditionType=1==A$o.conditionType?2:1,A$G.text="//"+A$G.text+" "+A$o.text+" "+A$G.conditionType),A$G.setParent(A$C),A$C=A$G;continue;case"#endif":A$o=(A$C=A$C.parent).childs[A$C.childs.length-1],A$G.noCompile=A$o.noCompile,A$G.noCompile||(A$G.text="//"+A$G.text),A$G.setParent(A$C);continue;case"#include":A$e=A$S.splitToWords(A$U,null);var A$Q=A$S.includes[A$e[1]];if(!A$Q)throw"ShaderCompile error no this include file:"+A$e[1];if((A$M=A$e[0].indexOf("?"))<0){A$G.setParent(A$C),A$U=A$Q.getWith("with"==A$e[2]?A$e[3]:null),this._compileToTree(A$G,A$U.split("\n"),0,A$w,A$T),A$G.text="";continue}A$G.setCondition(A$e[0].substr(A$M+1),1),A$G.text=A$Q.getWith("with"==A$e[2]?A$e[3]:null);break;case"#import":A$I=(A$e=A$S.splitToWords(A$U,null))[1],A$w.push({node:A$G,file:A$S.includes[A$I],ofs:A$G.text.length});continue}}else{if((A$o=A$C.childs[A$C.childs.length-1])&&!A$o.name){0<A$w.length&&A$S.splitToWords(A$U,A$o),A$H=A$G,A$o.text+="\n"+A$U;continue}0<A$w.length&&A$S.splitToWords(A$U,A$G)}A$G.setParent(A$C)}},A$C.createShader=function(A$C,A$R,A$j){var A$w={},A$T="";if(A$C)for(var A$G in A$C)A$T+="#define "+A$G+"\n",A$w[A$G]=!0;var A$o=this._VS.toscript(A$w,[]),A$U=this._PS.toscript(A$w,[]);return(A$j||A$XC.create)(A$T+A$o.join("\n"),A$T+A$U.join("\n"),A$R,this._nameMap)},A$S._parseOne=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o={type:A$S.shaderParamsMap[A$j[A$w+1]],name:A$j[A$w+2],size:isNaN(parseInt(A$j[A$w+3]))?1:parseInt(A$j[A$w+3])};return A$G&&("attribute"==A$T?A$C.push(A$o):A$R.push(A$o)),":"==A$j[A$w+3]&&(A$o.type=A$j[A$w+4],A$w+=2),A$w+=2},A$S.addInclude=function(A$C,A$R){if(!A$R||0===A$R.length)throw new Error("add shader include file err:"+A$C);if(A$S.includes[A$C])throw new Error("add shader include file err, has add:"+A$C);A$S.includes[A$C]=new A$j(A$R)},A$S.preGetParams=function(A$C,A$R){var A$j=[A$C,A$R],A$w={},A$T=[],A$G=[],A$o={},A$U=[];A$w.attributes=A$T,A$w.uniforms=A$G,A$w.defines=A$o;for(var A$t=0,A$I=0,A$e=0;A$e<2;A$e++){A$j[A$e]=A$j[A$e].replace(A$S._removeAnnotation,"");var A$H,A$M=A$j[A$e].match(A$S._reg);for(A$t=0,A$I=A$M.length;A$t<A$I;A$t++){var A$K=A$M[A$t];if("attribute"==A$K||"uniform"==A$K)A$t=A$S._parseOne(A$T,A$G,A$M,A$t,A$K,!0);else{if("#define"==A$K){A$U[A$K=A$M[++A$t]]=1;continue}if("#ifdef"==A$K){A$o[A$H=A$M[++A$t]]=A$o[A$H]||[];for(A$t++;A$t<A$I;A$t++)if("attribute"==(A$K=A$M[A$t])||"uniform"==A$K)A$t=A$S._parseOne(A$T,A$G,A$M,A$t,A$K,A$U[A$H]);else if("#else"==A$K)for(A$t++;A$t<A$I;A$t++)if("attribute"==(A$K=A$M[A$t])||"uniform"==A$K)A$t=A$S._parseOne(A$T,A$G,A$M,A$t,A$K,!A$U[A$H]);else if("#endif"==A$K)break}}}}return A$w},A$S.splitToWords=function(A$C,A$R){for(var A$j,A$w,A$T=[],A$G=-1,A$o=0,A$U=A$C.length;A$o<A$U;A$o++)if(A$j=A$C.charAt(A$o),0<=" \t=+-*/&%!<>()'\",;".indexOf(A$j)){if(0<=A$G&&1<A$o-A$G&&(A$w=A$C.substr(A$G,A$o-A$G),A$T.push(A$w)),'"'==A$j||"'"==A$j){var A$t=A$C.indexOf(A$j,A$o+1);if(A$t<0)throw"Sharder err:"+A$C;A$T.push(A$C.substr(A$o+1,A$t-A$o-1)),A$o=A$t,A$G=-1;continue}"("==A$j&&A$R&&0<A$T.length&&(A$w=A$T[A$T.length-1]+";","vec4;main;".indexOf(A$w)<0&&(A$R.useFuns+=A$w)),A$G=-1}else A$G<0&&(A$G=A$o);return A$G<A$U&&1<A$U-A$G&&(A$w=A$C.substr(A$G,A$U-A$G),A$T.push(A$w)),A$T},A$S.IFDEF_NO=0,A$S.IFDEF_YES=1,A$S.IFDEF_ELSE=2,A$S.IFDEF_PARENT=3,A$S._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),A$S._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),A$S._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),A$S.includes={},A$o(A$S,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),A$S.__init$=function(){A$Z=function(){function A$j(A$C){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=A$C}A$M(A$j,"");var A$C=A$j.prototype;return A$C.setParent=function(A$C){A$C.childs.push(this),this.z=A$C.z+1,this.parent=A$C},A$C.setCondition=function(A$C,A$R){A$C&&(this.conditionType=A$R,A$C=A$C.replace(/(\s*$)/g,""),this.condition=function(){return this[A$C]},this.condition.__condition=A$C)},A$C.toscript=function(A$C,A$R){return this._toscript(A$C,A$R,++A$j.__id)},A$C._toscript=function(A$w,A$T,A$G){if(this.childs.length<1&&!this.text)return A$T;A$T.length;if(this.condition){var A$C=!!this.condition.call(A$w);if(2===this.conditionType&&(A$C=!A$C),!A$C)return A$T}if(this.text&&A$T.push(this.text),0<this.childs.length&&this.childs.forEach(function(A$C,A$R,A$j){A$C._toscript(A$w,A$T,A$G)}),0<this.includefiles.length&&0<this.useFuns.length)for(var A$R,A$j=0,A$o=this.includefiles.length;A$j<A$o;A$j++)this.includefiles[A$j].curUseID!=A$G&&0<(A$R=this.includefiles[A$j].file.getFunsScript(this.useFuns)).length&&(this.includefiles[A$j].curUseID=A$G,A$T[0]=A$R+A$T[0]);return A$T},A$j.__id=1,A$j}(),A$j=function(){function A$C(A$C){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=A$C;for(var A$R=0,A$j=0,A$w=0;!((A$R=A$C.indexOf("#begin",A$R))<0);){for(A$w=A$R+5;!((A$w=A$C.indexOf("#end",A$w))<0)&&"i"===A$C.charAt(A$w+4);)A$w+=5;if(A$w<0)throw"add include err,no #end:"+A$C;A$j=A$C.indexOf("\n",A$R);var A$T=A$S.splitToWords(A$C.substr(A$R,A$j-A$R),null);"code"==A$T[1]?this.codes[A$T[2]]=A$C.substr(A$j+1,A$w-A$j-1):"function"==A$T[1]&&(A$j=A$C.indexOf("function",A$R),A$j+="function".length,this.funs[A$T[3]]=A$C.substr(A$j+1,A$w-A$j-1),this.funnames+=A$T[3]+";"),A$R=A$w+1}}A$M(A$C,"");var A$R=A$C.prototype;return A$R.getWith=function(A$C){var A$R=A$C?this.codes[A$C]:this.script;if(!A$R)throw"get with error:"+A$C;return A$R},A$R.getFunsScript=function(A$C){var A$R="";for(var A$j in this.funs)0<=A$C.indexOf(A$j+";")&&(A$R+=this.funs[A$j]);return A$R},A$C}()},A$S}(),A$bC=function(){function A$o(){}return A$M(A$o,"laya.webgl.WebGL"),A$o._uint8ArraySlice=function(){for(var A$C=this.length,A$R=new Uint8Array(this.length),A$j=0;A$j<A$C;A$j++)A$R[A$j]=this[A$j];return A$R},A$o._float32ArraySlice=function(){for(var A$C=this.length,A$R=new Float32Array(this.length),A$j=0;A$j<A$C;A$j++)A$R[A$j]=this[A$j];return A$R},A$o._uint16ArraySlice=function(A$C){var A$R,A$j=arguments,A$w=0,A$T=0;if(0===A$j.length)for(A$w=this.length,A$R=new Uint16Array(A$w),A$T=0;A$T<A$w;A$T++)A$R[A$T]=this[A$T];else if(2===A$j.length){var A$G=A$j[0],A$o=A$j[1];if(A$G<A$o)for(A$w=A$o-A$G,A$R=new Uint16Array(A$w),A$T=A$G;A$T<A$o;A$T++)A$R[A$T-A$G]=this[A$T];else A$R=new Uint16Array(0)}return A$R},A$o.expandContext=function(){var A$C=A$T.prototype,A$R=CanvasRenderingContext2D.prototype;A$R.fillTrangles=A$C.fillTrangles,A$YC.__int__(null),A$R.setIBVB=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){void 0===A$t&&(A$t=0),void 0===A$I&&(A$I=0),null===A$j&&(this._ib=this._ib||A$qC.QuadrangleIB,A$j=this._ib,A$DC.expandIBQuadrangle(A$j,A$w._byteLength/64+8)),this._setIBVB(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I)},A$R.fillTrangles=function(A$C,A$R,A$j,A$w,A$T){this._curMat=this._curMat||A$W.create(),this._vb=this._vb||A$vC.create(),this._ib||(this._ib=A$qC.create(),A$DC.fillIBQuadrangle(this._ib,A$o/4));var A$G=this._vb,A$o=A$w.length>>4;A$DC.fillTranglesVB(A$G,A$R,A$j,A$w,A$T||this._curMat,0,0),A$DC.expandIBQuadrangle(this._ib,A$G._byteLength/64+8);var A$U=new A$xC(1,0);A$U.textureHost=A$C;var A$t=new A$OC("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");A$G._vertType=3,this._setIBVB(A$R,A$j,this._ib,A$G,6*A$o,A$T,A$t,A$U,0,0)}},A$o.enable=function(){if(A$K.__init__(),A$Q.isConchApp&&!A$Q.isConchWebGL)return A$f.skinAniSprite=function(){return new A$CC},A$o.expandContext(),!1;if(A$f.getWebGLContext=function(A$C){for(var A$R,A$j=["webgl","experimental-webgl","webkit-3d","moz-webgl"],A$w=0;A$w<A$j.length;A$w++){try{A$R=A$C.getContext(A$j[A$w],{stencil:A$h.isStencil,alpha:A$h.isAlpha,antialias:A$h.isAntialias,premultipliedAlpha:A$h.premultipliedAlpha,preserveDrawingBuffer:A$h.preserveDrawingBuffer})}catch(A$C){}if(A$R)return A$R}return null},null==(A$o.mainContext=A$f.getWebGLContext(A$Q._mainCanvas)))return!1;if(A$Q.isWebGL)return!0;A$L.create=function(A$C,A$R){return new A$CR(A$C,A$R)},A$D.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){return new A$cC(A$C,A$R,A$j,A$w,A$T,A$G,A$o)},A$Q.WebGL=A$o,A$Q.isWebGL=!0,A$KC.__init__(),A$f.createRenderSprite=function(A$C,A$R){return new A$WC(A$C,A$R)},A$f.createWebGLContext2D=function(A$C){return new A$hC(A$C)},A$f.changeWebGLSize=function(A$C,A$R){laya.webgl.WebGL.onStageResize(A$C,A$R)},A$f.createGraphics=function(){return new A$pC};var A$C=A$f.createFilterAction;return A$f.createFilterAction=A$C||function(A$C){return new A$$C},A$f.clear=function(A$C){A$ZC.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var A$R=A$Q.context.ctx,A$j=0==A$R._submits._length||A$h.preserveDrawingBuffer?A$F.create(A$C)._color:A$E._wgColor;A$j&&A$R.clearBG(A$j[0],A$j[1],A$j[2],A$j[3]),A$ZC.clear()},A$f.addToAtlas=function(A$C,A$R){void 0===A$R&&(A$R=!1);var A$j=A$C.bitmap;A$Q.optimizeTextureMemory(A$C.url,A$C)?A$p.__typeof(A$j,"laya.webgl.resource.IMergeAtlasBitmap")&&A$j.allowMerageInAtlas&&A$j.on("recovered",A$C,A$C.addTextureToAtlas):A$j.enableMerageInAtlas=!1},A$f.isAtlas=function(A$C){return A$C instanceof laya.webgl.atlas.AtlasWebGLCanvas},A$l._enable(),A$f.beginFlush=function(){for(var A$C=A$l.instance,A$R=A$C.getAtlaserCount(),A$j=0;A$j<A$R;A$j++){var A$w=A$C.getAtlaserByIndex(A$j).texture;A$w._flashCacheImageNeedFlush&&A$f.flashFlushImage(A$w)}},A$f.drawToCanvas=function(A$C,A$R,A$j,A$w,A$T,A$G){(A$j<=0||A$w<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),A$j|=0,A$w|=0,A$T|=0,A$G|=0;var A$o=A$mC.create(A$j,A$w,6408,5121,0,!1);A$o.start(),A$o.clear(0,0,0,0),A$Q.context.clear(),A$Z.renders[A$R]._fun(A$C,A$Q.context,A$T,A$ZC.height-A$w+A$G),A$Q.context.flush(),A$o.end();var A$U=A$o.getData(0,0,A$j,A$w);if(A$o.recycle(),A$U.byteLength==A$j*A$w*4){var A$t=new A$_C;A$t._canvas=A$K.createElement("canvas"),A$t.size(A$j,A$w);var A$I=A$t._canvas.getContext("2d");A$K.canvas.size(A$j,A$w);var A$e=A$K.context,A$H=A$e.createImageData(A$j,A$w);return A$H.data.set(new Uint8ClampedArray(A$U.buffer)),A$t._imgData=A$H,A$e.putImageData(A$H,0,0),A$I.save(),A$I.translate(0,A$w),A$I.scale(1,-1),A$I.drawImage(A$K.canvas.source,0,0),A$I.restore(),A$t}console.log("drawToCanvas error: w:"+A$j+",h:"+A$w+",datalen:"+A$U.byteLength)},A$f.createFilterAction=function(A$C){var A$R;switch(A$C){case 32:A$R=new A$$C}return A$R},A$f.addTextureToAtlas=function(A$C){A$C._uvID++,A$l._atlasRestore++,A$C.bitmap.enableMerageInAtlas&&A$l.instance.addToAtlas(A$C)},A$f.getTexturePixels=function(A$C,A$R,A$j,A$w,A$T){A$Q.context.ctx.clear();var A$G=new A$r;A$G.graphics.drawTexture(A$C,-A$R,-A$j);var A$o=A$mC.create(A$w,A$T);A$o.start(),A$o.clear(0,0,0,0),A$G.render(A$Q.context,0,0),A$Q.context.ctx.flush(),A$o.end();for(var A$U=A$o.getData(0,0,A$w,A$T),A$t=[],A$I=0,A$e=A$T-1;0<=A$e;A$e--)for(var A$H=0;A$H<A$w;A$H++)A$I=4*(A$e*A$w+A$H),A$t.push(A$U[A$I]),A$t.push(A$U[A$I+1]),A$t.push(A$U[A$I+2]),A$t.push(A$U[A$I+3]);return A$t},A$f.skinAniSprite=function(){return new A$CC},A$I.create=function(A$C,A$R){var A$j=new A$_C;return A$j._imgData=A$R,A$j.flipY=!1,A$j},A$x._filterStart=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$C.getValue("bounds"),A$o=A$mC.create(A$G.width,A$G.height);if(A$o.start(),A$o.clear(0,0,0,0),A$C.addValue("src",A$o),A$C.addValue("ScissorTest",A$ZC.worldScissorTest),A$ZC.worldScissorTest){var A$U=new A$A;A$U.copyFrom(A$j.ctx._clipRect),A$C.addValue("clipRect",A$U),A$ZC.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},A$x._filterEnd=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$C.getValue("bounds");A$C.getValue("src").end();var A$o=A$mC.create(A$G.width,A$G.height);A$o.start(),A$o.clear(0,0,0,0),A$C.addValue("out",A$o),A$R._set$P("_filterCache",A$o),A$R._set$P("_isHaveGlowFilter",A$C.getValue("_isHaveGlowFilter"))},A$x._EndTarget=function(A$C,A$R){if(A$C.getValue("src").recycle(),A$C.getValue("out").end(),A$C.getValue("ScissorTest")){A$ZC.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),A$R.ctx.save();var A$j=A$C.getValue("clipRect");A$R.ctx.clipRect(A$j.x,A$j.y,A$j.width,A$j.height)}},A$x._useSrc=function(A$C){var A$R=A$C.getValue("out");A$R.end(),(A$R=A$C.getValue("src")).start(),A$R.clear(0,0,0,0)},A$x._endSrc=function(A$C){A$C.getValue("src").end()},A$x._useOut=function(A$C){var A$R=A$C.getValue("src");A$R.end(),(A$R=A$C.getValue("out")).start(),A$R.clear(0,0,0,0)},A$x._endOut=function(A$C){A$C.getValue("out").end()},A$x._recycleScope=function(A$C){A$C.recycle()},A$x._filter=function(A$C,A$R,A$j,A$w){var A$T=this._next;if(A$T){var A$G,A$o,A$U=A$C.filters,A$t=A$U.length;if(1==A$t&&32==A$U[0].type)return A$R.ctx.save(),A$R.ctx.setFilters([A$U[0]]),A$T._fun.call(A$T,A$C,A$R,A$j,A$w),void A$R.ctx.restore();var A$I=A$UC.create(),A$e=A$$.TEMP,A$H=A$R.ctx._getTransformMatrix(),A$M=A$W.create();A$H.copyTo(A$M);var A$K=0,A$F=0,A$L=!1,A$D=A$C._$P._filterCache?A$C._$P._filterCache:null;if(!A$D||A$C._repaint){A$L=A$C._isHaveGlowFilter(),A$I.addValue("_isHaveGlowFilter",A$L),A$L&&(A$K=50,A$F=25),(A$o=new A$A).copyFrom(A$C.getSelfBounds()),A$o.x+=A$C.x,A$o.y+=A$C.y,A$o.x-=A$C.pivotX+4,A$o.y-=A$C.pivotY+4;var A$Q=A$o.x,A$Z=A$o.y;if(A$o.width+=A$K+8,A$o.height+=A$K+8,A$e.x=A$o.x*A$M.a+A$o.y*A$M.c,A$e.y=A$o.y*A$M.d+A$o.x*A$M.b,A$o.x=A$e.x,A$o.y=A$e.y,A$e.x=A$o.width*A$M.a+A$o.height*A$M.c,A$e.y=A$o.height*A$M.d+A$o.width*A$M.b,A$o.width=A$e.x,A$o.height=A$e.y,A$o.width<=0||A$o.height<=0)return;A$D&&A$D.recycle(),A$I.addValue("bounds",A$o);var A$S=A$oC.create([A$I,A$C,A$R,0,0],A$x._filterStart);A$R.addRenderObject(A$S),A$R.ctx._renderKey=0,A$R.ctx._shader2D.glTexture=null;var A$b=A$C.x-A$Q+A$F,A$f=A$C.y-A$Z+A$F;A$T._fun.call(A$T,A$C,A$R,A$b,A$f),A$S=A$oC.create([A$I,A$C,A$R,0,0],A$x._filterEnd),A$R.addRenderObject(A$S);for(var A$p=0;A$p<A$t;A$p++){0!=A$p&&(A$S=A$oC.create([A$I],A$x._useSrc),A$R.addRenderObject(A$S),A$G=A$xC.create(1,0),A$W.TEMP.identity(),A$R.ctx.drawTarget(A$I,0,0,A$o.width,A$o.height,A$W.TEMP,"out",A$G,null,A$B.TOINT.overlay),A$S=A$oC.create([A$I],A$x._useOut),A$R.addRenderObject(A$S)),A$U[A$p].action.apply3d(A$I,A$C,A$R,0,0)}A$S=A$oC.create([A$I,A$R],A$x._EndTarget),A$R.addRenderObject(A$S)}else{if((A$L=!!A$C._$P._isHaveGlowFilter&&A$C._$P._isHaveGlowFilter)&&(A$K=50,A$F=25),(A$o=A$C.getBounds()).width<=0||A$o.height<=0)return;A$o.width+=A$K,A$o.height+=A$K,A$e.x=A$o.x*A$M.a+A$o.y*A$M.c,A$e.y=A$o.y*A$M.d+A$o.x*A$M.b,A$o.x=A$e.x,A$o.y=A$e.y,A$e.x=A$o.width*A$M.a+A$o.height*A$M.c,A$e.y=A$o.height*A$M.d+A$o.width*A$M.b,A$o.width=A$e.x,A$o.height=A$e.y,A$I.addValue("out",A$D)}A$j=A$j-A$F-A$C.x,A$w=A$w-A$F-A$C.y,A$e.setTo(A$j,A$w),A$M.transformPoint(A$e),A$j=A$e.x+A$o.x,A$w=A$e.y+A$o.y,A$G=A$xC.create(1,0),A$W.TEMP.identity(),A$R.ctx.drawTarget(A$I,A$j,A$w,A$o.width,A$o.height,A$W.TEMP,"out",A$G,null,A$B.TOINT.overlay),A$S=A$oC.create([A$I],A$x._recycleScope),A$R.addRenderObject(A$S),A$M.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=A$o._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=A$o._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=A$o._uint8ArraySlice),!0},A$o.onStageResize=function(A$C,A$R){null!=A$o.mainContext&&(A$o.mainContext.viewport(0,0,A$C,A$R),A$ZC.width=A$C,A$ZC.height=A$R)},A$o.onInvalidGLRes=function(){A$l.instance.freeAll(),A$b.releaseContentManagers(!0),A$o.doNodeRepaint(A$p.stage),A$o.mainContext.viewport(0,0,A$ZC.width,A$ZC.height),A$p.stage.event("devicelost")},A$o.doNodeRepaint=function(A$C){0==A$C.numChildren&&A$C.repaint();for(var A$R=0;A$R<A$C.numChildren;A$R++)A$o.doNodeRepaint(A$C.getChildAt(A$R))},A$o.init=function(A$C,A$R,A$j){A$o.mainCanvas=A$C,A$I._createContext=function(A$C){return new A$hC(A$C)},A$_C._createContext=function(A$C){return new A$hC(A$C)};var A$w=laya.webgl.WebGL.mainContext;if(null!=A$w.getShaderPrecisionFormat){var A$T=A$w.getShaderPrecisionFormat(35633,36338),A$G=A$w.getShaderPrecisionFormat(35632,36338);A$o.shaderHighPrecision=!(!A$T.precision||!A$G.precision)}else A$o.shaderHighPrecision=!1;if(A$w.deleteTexture1=A$w.deleteTexture,A$w.deleteTexture=function(A$C){A$C==A$fC.curBindTexValue&&(A$fC.curBindTexValue=null),A$w.deleteTexture1(A$C)},A$o.onStageResize(A$R,A$j),null==A$o.mainContext)throw new Error("webGL getContext err!");A$N.__init__(),A$l.__init__(),A$rC.__init__(),A$GC.__init__(),A$hC.__init__(),A$xC.__init__(),A$q.__init__(),A$YC.__int__(A$w),A$B._init_(A$w),A$Q.isConchApp&&conch.setOnInvalidGLRes(A$o.onInvalidGLRes)},A$o.mainCanvas=null,A$o.mainContext=null,A$o.antialias=!0,A$o.shaderHighPrecision=!1,A$o._bg_null=[0,0,0,0],A$o}(),A$fC=function(){function A$w(){}return A$M(A$w,"laya.webgl.WebGLContext"),A$w.UseProgram=function(A$C){return A$w._useProgram!==A$C&&(A$bC.mainContext.useProgram(A$C),A$w._useProgram=A$C,!0)},A$w.setDepthTest=function(A$C,A$R){A$R!==A$w._depthTest&&((A$w._depthTest=A$R)?A$C.enable(2929):A$C.disable(2929))},A$w.setDepthMask=function(A$C,A$R){A$R!==A$w._depthMask&&(A$w._depthMask=A$R,A$C.depthMask(A$R))},A$w.setDepthFunc=function(A$C,A$R){A$R!==A$w._depthFunc&&(A$w._depthFunc=A$R,A$C.depthFunc(A$R))},A$w.setBlend=function(A$C,A$R){A$R!==A$w._blend&&((A$w._blend=A$R)?A$C.enable(3042):A$C.disable(3042))},A$w.setBlendFunc=function(A$C,A$R,A$j){(A$R!==A$w._sFactor||A$j!==A$w._dFactor)&&(A$w._sFactor=A$R,A$w._dFactor=A$j,A$C.blendFunc(A$R,A$j))},A$w.setCullFace=function(A$C,A$R){A$R!==A$w._cullFace&&((A$w._cullFace=A$R)?A$C.enable(2884):A$C.disable(2884))},A$w.setFrontFace=function(A$C,A$R){A$R!==A$w._frontFace&&(A$w._frontFace=A$R,A$C.frontFace(A$R))},A$w.bindTexture=function(A$C,A$R,A$j){A$C.bindTexture(A$R,A$j),A$w.curBindTexTarget=A$R,A$w.curBindTexValue=A$j},A$w.DEPTH_BUFFER_BIT=256,A$w.STENCIL_BUFFER_BIT=1024,A$w.COLOR_BUFFER_BIT=16384,A$w.POINTS=0,A$w.LINES=1,A$w.LINE_LOOP=2,A$w.LINE_STRIP=3,A$w.TRIANGLES=4,A$w.TRIANGLE_STRIP=5,A$w.TRIANGLE_FAN=6,A$w.ZERO=0,A$w.ONE=1,A$w.SRC_COLOR=768,A$w.ONE_MINUS_SRC_COLOR=769,A$w.SRC_ALPHA=770,A$w.ONE_MINUS_SRC_ALPHA=771,A$w.DST_ALPHA=772,A$w.ONE_MINUS_DST_ALPHA=773,A$w.DST_COLOR=774,A$w.ONE_MINUS_DST_COLOR=775,A$w.SRC_ALPHA_SATURATE=776,A$w.FUNC_ADD=32774,A$w.BLEND_EQUATION=32777,A$w.BLEND_EQUATION_RGB=32777,A$w.BLEND_EQUATION_ALPHA=34877,A$w.FUNC_SUBTRACT=32778,A$w.FUNC_REVERSE_SUBTRACT=32779,A$w.BLEND_DST_RGB=32968,A$w.BLEND_SRC_RGB=32969,A$w.BLEND_DST_ALPHA=32970,A$w.BLEND_SRC_ALPHA=32971,A$w.CONSTANT_COLOR=32769,A$w.ONE_MINUS_CONSTANT_COLOR=32770,A$w.CONSTANT_ALPHA=32771,A$w.ONE_MINUS_CONSTANT_ALPHA=32772,A$w.BLEND_COLOR=32773,A$w.ARRAY_BUFFER=34962,A$w.ELEMENT_ARRAY_BUFFER=34963,A$w.ARRAY_BUFFER_BINDING=34964,A$w.ELEMENT_ARRAY_BUFFER_BINDING=34965,A$w.STREAM_DRAW=35040,A$w.STATIC_DRAW=35044,A$w.DYNAMIC_DRAW=35048,A$w.BUFFER_SIZE=34660,A$w.BUFFER_USAGE=34661,A$w.CURRENT_VERTEX_ATTRIB=34342,A$w.FRONT=1028,A$w.BACK=1029,A$w.CULL_FACE=2884,A$w.FRONT_AND_BACK=1032,A$w.BLEND=3042,A$w.DITHER=3024,A$w.STENCIL_TEST=2960,A$w.DEPTH_TEST=2929,A$w.SCISSOR_TEST=3089,A$w.POLYGON_OFFSET_FILL=32823,A$w.SAMPLE_ALPHA_TO_COVERAGE=32926,A$w.SAMPLE_COVERAGE=32928,A$w.NO_ERROR=0,A$w.INVALID_ENUM=1280,A$w.INVALID_VALUE=1281,A$w.INVALID_OPERATION=1282,A$w.OUT_OF_MEMORY=1285,A$w.CW=2304,A$w.CCW=2305,A$w.LINE_WIDTH=2849,A$w.ALIASED_POINT_SIZE_RANGE=33901,A$w.ALIASED_LINE_WIDTH_RANGE=33902,A$w.CULL_FACE_MODE=2885,A$w.FRONT_FACE=2886,A$w.DEPTH_RANGE=2928,A$w.DEPTH_WRITEMASK=2930,A$w.DEPTH_CLEAR_VALUE=2931,A$w.DEPTH_FUNC=2932,A$w.STENCIL_CLEAR_VALUE=2961,A$w.STENCIL_FUNC=2962,A$w.STENCIL_FAIL=2964,A$w.STENCIL_PASS_DEPTH_FAIL=2965,A$w.STENCIL_PASS_DEPTH_PASS=2966,A$w.STENCIL_REF=2967,A$w.STENCIL_VALUE_MASK=2963,A$w.STENCIL_WRITEMASK=2968,A$w.STENCIL_BACK_FUNC=34816,A$w.STENCIL_BACK_FAIL=34817,A$w.STENCIL_BACK_PASS_DEPTH_FAIL=34818,A$w.STENCIL_BACK_PASS_DEPTH_PASS=34819,A$w.STENCIL_BACK_REF=36003,A$w.STENCIL_BACK_VALUE_MASK=36004,A$w.STENCIL_BACK_WRITEMASK=36005,A$w.VIEWPORT=2978,A$w.SCISSOR_BOX=3088,A$w.COLOR_CLEAR_VALUE=3106,A$w.COLOR_WRITEMASK=3107,A$w.UNPACK_ALIGNMENT=3317,A$w.PACK_ALIGNMENT=3333,A$w.MAX_TEXTURE_SIZE=3379,A$w.MAX_VIEWPORT_DIMS=3386,A$w.SUBPIXEL_BITS=3408,A$w.RED_BITS=3410,A$w.GREEN_BITS=3411,A$w.BLUE_BITS=3412,A$w.ALPHA_BITS=3413,A$w.DEPTH_BITS=3414,A$w.STENCIL_BITS=3415,A$w.POLYGON_OFFSET_UNITS=10752,A$w.POLYGON_OFFSET_FACTOR=32824,A$w.TEXTURE_BINDING_2D=32873,A$w.SAMPLE_BUFFERS=32936,A$w.SAMPLES=32937,A$w.SAMPLE_COVERAGE_VALUE=32938,A$w.SAMPLE_COVERAGE_INVERT=32939,A$w.NUM_COMPRESSED_TEXTURE_FORMATS=34466,A$w.COMPRESSED_TEXTURE_FORMATS=34467,A$w.DONT_CARE=4352,A$w.FASTEST=4353,A$w.NICEST=4354,A$w.GENERATE_MIPMAP_HINT=33170,A$w.BYTE=5120,A$w.UNSIGNED_BYTE=5121,A$w.SHORT=5122,A$w.UNSIGNED_SHORT=5123,A$w.INT=5124,A$w.UNSIGNED_INT=5125,A$w.FLOAT=5126,A$w.DEPTH_COMPONENT=6402,A$w.ALPHA=6406,A$w.RGB=6407,A$w.RGBA=6408,A$w.LUMINANCE=6409,A$w.LUMINANCE_ALPHA=6410,A$w.UNSIGNED_SHORT_4_4_4_4=32819,A$w.UNSIGNED_SHORT_5_5_5_1=32820,A$w.UNSIGNED_SHORT_5_6_5=33635,A$w.FRAGMENT_SHADER=35632,A$w.VERTEX_SHADER=35633,A$w.MAX_VERTEX_ATTRIBS=34921,A$w.MAX_VERTEX_UNIFORM_VECTORS=36347,A$w.MAX_VARYING_VECTORS=36348,A$w.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,A$w.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,A$w.MAX_TEXTURE_IMAGE_UNITS=34930,A$w.MAX_FRAGMENT_UNIFORM_VECTORS=36349,A$w.SHADER_TYPE=35663,A$w.DELETE_STATUS=35712,A$w.LINK_STATUS=35714,A$w.VALIDATE_STATUS=35715,A$w.ATTACHED_SHADERS=35717,A$w.ACTIVE_UNIFORMS=35718,A$w.ACTIVE_ATTRIBUTES=35721,A$w.SHADING_LANGUAGE_VERSION=35724,A$w.CURRENT_PROGRAM=35725,A$w.NEVER=512,A$w.LESS=513,A$w.EQUAL=514,A$w.LEQUAL=515,A$w.GREATER=516,A$w.NOTEQUAL=517,A$w.GEQUAL=518,A$w.ALWAYS=519,A$w.KEEP=7680,A$w.REPLACE=7681,A$w.INCR=7682,A$w.DECR=7683,A$w.INVERT=5386,A$w.INCR_WRAP=34055,A$w.DECR_WRAP=34056,A$w.VENDOR=7936,A$w.RENDERER=7937,A$w.VERSION=7938,A$w.NEAREST=9728,A$w.LINEAR=9729,A$w.NEAREST_MIPMAP_NEAREST=9984,A$w.LINEAR_MIPMAP_NEAREST=9985,A$w.NEAREST_MIPMAP_LINEAR=9986,A$w.LINEAR_MIPMAP_LINEAR=9987,A$w.TEXTURE_MAG_FILTER=10240,A$w.TEXTURE_MIN_FILTER=10241,A$w.TEXTURE_WRAP_S=10242,A$w.TEXTURE_WRAP_T=10243,A$w.TEXTURE_2D=3553,A$w.TEXTURE=5890,A$w.TEXTURE_CUBE_MAP=34067,A$w.TEXTURE_BINDING_CUBE_MAP=34068,A$w.TEXTURE_CUBE_MAP_POSITIVE_X=34069,A$w.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,A$w.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,A$w.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,A$w.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,A$w.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,A$w.MAX_CUBE_MAP_TEXTURE_SIZE=34076,A$w.TEXTURE0=33984,A$w.TEXTURE1=33985,A$w.TEXTURE2=33986,A$w.TEXTURE3=33987,A$w.TEXTURE4=33988,A$w.TEXTURE5=33989,A$w.TEXTURE6=33990,A$w.TEXTURE7=33991,A$w.TEXTURE8=33992,A$w.TEXTURE9=33993,A$w.TEXTURE10=33994,A$w.TEXTURE11=33995,A$w.TEXTURE12=33996,A$w.TEXTURE13=33997,A$w.TEXTURE14=33998,A$w.TEXTURE15=33999,A$w.TEXTURE16=34e3,A$w.TEXTURE17=34001,A$w.TEXTURE18=34002,A$w.TEXTURE19=34003,A$w.TEXTURE20=34004,A$w.TEXTURE21=34005,A$w.TEXTURE22=34006,A$w.TEXTURE23=34007,A$w.TEXTURE24=34008,A$w.TEXTURE25=34009,A$w.TEXTURE26=34010,A$w.TEXTURE27=34011,A$w.TEXTURE28=34012,A$w.TEXTURE29=34013,A$w.TEXTURE30=34014,A$w.TEXTURE31=34015,A$w.ACTIVE_TEXTURE=34016,A$w.REPEAT=10497,A$w.CLAMP_TO_EDGE=33071,A$w.MIRRORED_REPEAT=33648,A$w.FLOAT_VEC2=35664,A$w.FLOAT_VEC3=35665,A$w.FLOAT_VEC4=35666,A$w.INT_VEC2=35667,A$w.INT_VEC3=35668,A$w.INT_VEC4=35669,A$w.BOOL=35670,A$w.BOOL_VEC2=35671,A$w.BOOL_VEC3=35672,A$w.BOOL_VEC4=35673,A$w.FLOAT_MAT2=35674,A$w.FLOAT_MAT3=35675,A$w.FLOAT_MAT4=35676,A$w.SAMPLER_2D=35678,A$w.SAMPLER_CUBE=35680,A$w.VERTEX_ATTRIB_ARRAY_ENABLED=34338,A$w.VERTEX_ATTRIB_ARRAY_SIZE=34339,A$w.VERTEX_ATTRIB_ARRAY_STRIDE=34340,A$w.VERTEX_ATTRIB_ARRAY_TYPE=34341,A$w.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,A$w.VERTEX_ATTRIB_ARRAY_POINTER=34373,A$w.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,A$w.COMPILE_STATUS=35713,A$w.LOW_FLOAT=36336,A$w.MEDIUM_FLOAT=36337,A$w.HIGH_FLOAT=36338,A$w.LOW_INT=36339,A$w.MEDIUM_INT=36340,A$w.HIGH_INT=36341,A$w.FRAMEBUFFER=36160,A$w.RENDERBUFFER=36161,A$w.RGBA4=32854,A$w.RGB5_A1=32855,A$w.RGB565=36194,A$w.DEPTH_COMPONENT16=33189,A$w.STENCIL_INDEX=6401,A$w.STENCIL_INDEX8=36168,A$w.DEPTH_STENCIL=34041,A$w.RENDERBUFFER_WIDTH=36162,A$w.RENDERBUFFER_HEIGHT=36163,A$w.RENDERBUFFER_INTERNAL_FORMAT=36164,A$w.RENDERBUFFER_RED_SIZE=36176,A$w.RENDERBUFFER_GREEN_SIZE=36177,A$w.RENDERBUFFER_BLUE_SIZE=36178,A$w.RENDERBUFFER_ALPHA_SIZE=36179,A$w.RENDERBUFFER_DEPTH_SIZE=36180,A$w.RENDERBUFFER_STENCIL_SIZE=36181,A$w.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,A$w.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,A$w.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,A$w.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,A$w.COLOR_ATTACHMENT0=36064,A$w.DEPTH_ATTACHMENT=36096,A$w.STENCIL_ATTACHMENT=36128,A$w.DEPTH_STENCIL_ATTACHMENT=33306,A$w.NONE=0,A$w.FRAMEBUFFER_COMPLETE=36053,A$w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,A$w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,A$w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,A$w.FRAMEBUFFER_UNSUPPORTED=36061,A$w.FRAMEBUFFER_BINDING=36006,A$w.RENDERBUFFER_BINDING=36007,A$w.MAX_RENDERBUFFER_SIZE=34024,A$w.INVALID_FRAMEBUFFER_OPERATION=1286,A$w.UNPACK_FLIP_Y_WEBGL=37440,A$w.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,A$w.CONTEXT_LOST_WEBGL=37442,A$w.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,A$w.BROWSER_DEFAULT_WEBGL=37444,A$w._useProgram=null,A$w._depthTest=!0,A$w._depthMask=!0,A$w._blend=!1,A$w._cullFace=!1,A$w.curBindTexTarget=null,A$w.curBindTexValue=null,A$o(A$w,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),A$w}(),A$pC=function(A$C){function A$R(){A$R.__super.call(this)}A$M(A$R,"laya.webgl.display.GraphicsGL",A$U);var A$j=A$R.prototype;return A$j.setShader=function(A$C){this._saveToCmd(A$Q.context._setShader,[A$C])},A$j.setIBVB=function(A$C,A$R,A$j,A$w,A$T,A$G){this._saveToCmd(A$Q.context._setIBVB,[A$C,A$R,A$j,A$w,A$T,A$G])},A$j.drawParticle=function(A$C,A$R,A$j){var A$w=A$f.createParticleTemplate2D(A$j);A$w.x=A$C,A$w.y=A$R,this._saveToCmd(A$Q.context._drawParticle,[A$w])},A$R}(),A$hC=function(A$C){var A$j;function A$z(A$C){this._x=0,this._y=0,this._id=++A$z._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,A$z.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=A$z.MAXCLIPRECT,this.mOutPoint,this._canvas=A$C,this._canvas._addReference(),A$z._contextcount++,A$Q.isFlash?(this._ib=A$qC.create(35044),A$DC.fillIBQuadrangle(this._ib,16)):this._ib=A$qC.QuadrangleIB,this.clear()}A$M(A$z,"laya.webgl.canvas.WebGLContext2D",A$T);var A$R=A$z.prototype;return A$R.setIsMainContext=function(){this._isMain=!0},A$R.clearBG=function(A$C,A$R,A$j,A$w){var A$T=A$bC.mainContext;A$T.clearColor(A$C,A$R,A$j,A$w),A$T.clear(16384)},A$R._getSubmits=function(){return this._submits},A$R._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var A$C=0,A$R=this._submits._length;A$C<A$R;A$C++)this._submits[A$C].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},A$R.destroy=function(){--A$z._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=A$qC.QuadrangleIB&&this._ib.releaseResource()},A$R.clear=function(){this._submits||(this._other=A$j.DEFAULT,this._curMat=A$W.create(),this._vb=A$vC.create(-1),this._submits=[],this._save=[A$X.Create(this)],this._save.length=10,this._shader2D=new A$q,this._triangleMesh=A$nC.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=A$j.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=A$z.MAXCLIPRECT,this._curSubmit=A$GC.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=A$i.DEFAULT;for(var A$C=0,A$R=this._submits._length;A$C<A$R;A$C++)this._submits[A$C].releaseRender(),this._submits[A$C]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},A$R.size=function(A$C,A$R){if(this._width!=A$C||this._height!=A$R)if(0==A$C||0==A$R){0!=this._vb._byteLength&&(this._width=A$C,this._height=A$R,this._vb.clear(),this._vb.upload());for(var A$j=0,A$w=this._submits._length;A$j<A$w;A$j++)this._submits[A$j].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=A$C,this._height=A$R,this._targets&&this._targets.size(A$C,A$R),this._canvas.memorySize-=this._canvas.memorySize;0===A$C&&0===A$R&&this._releaseMem()},A$R._getTransformMatrix=function(){return this._curMat},A$R.translate=function(A$C,A$R){0===A$C&&0===A$R||(A$d.save(this),this._curMat.bTransform&&(A$Y.save(this),this._curMat.transformPointN(A$$.TEMP.setTo(A$C,A$R)),A$C=A$$.TEMP.x,A$R=A$$.TEMP.y),this._x+=A$C,this._y+=A$R)},A$R.save=function(){this._save[this._save._length++]=A$X.Create(this)},A$R.restore=function(){var A$C=this._save._length;if(!(A$C<1))for(var A$R=A$C-1;0<=A$R;A$R--){var A$j=this._save[A$R];if(A$j.restore(this),A$j.isSaveMark())return void(this._save._length=A$R)}},A$R._fillText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){void 0===A$I&&(A$I=0);var A$e=this._shader2D,A$H=this._curSubmit.shaderValue,A$M=A$T?A$FC.create(A$T):this._other.font;if(A$l.enabled)A$e.ALPHA!==A$H.ALPHA&&(A$e.glTexture=null),A$KC.drawText(this,A$C,A$R,this._curMat,A$M,A$t||this._other.textAlign,A$G,A$o,A$U,A$j,A$w,A$I);else{this._shader2D.defines.getValue();var A$K=A$G?A$F.create(A$G)._color:A$e.colorAdd;A$e.ALPHA===A$H.ALPHA&&A$K===A$e.colorAdd&&A$H.colorAdd===A$e.colorAdd||(A$e.glTexture=null,A$e.colorAdd=A$K),A$KC.drawText(this,A$C,A$R,this._curMat,A$M,A$t||this._other.textAlign,A$G,A$o,A$U,A$j,A$w,A$I)}},A$R.fillWords=function(A$C,A$R,A$j,A$w,A$T,A$G){this._fillText(null,A$C,A$R,A$j,A$w,A$T,null,-1,null,A$G)},A$R.fillBorderWords=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._fillBorderText(null,A$C,A$R,A$j,A$w,A$T,A$G,A$o,null)},A$R.fillText=function(A$C,A$R,A$j,A$w,A$T,A$G){this._fillText(A$C,null,A$R,A$j,A$w,A$T,null,-1,A$G)},A$R.strokeText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._fillText(A$C,null,A$R,A$j,A$w,null,A$T,A$G||1,A$o)},A$R.fillBorderText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){this._fillBorderText(A$C,null,A$R,A$j,A$w,A$T,A$G,A$o,A$U)},A$R._fillBorderText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){if(!A$l.enabled)return this._fillText(A$C,A$R,A$j,A$w,A$T,null,A$o,A$U||1,A$t),void this._fillText(A$C,A$R,A$j,A$w,A$T,A$G,null,-1,A$t);var A$I=this._shader2D,A$e=this._curSubmit.shaderValue;A$I.ALPHA!==A$e.ALPHA&&(A$I.glTexture=null);var A$H=A$T?(A$z._fontTemp.setFont(A$T),A$z._fontTemp):this._other.font;A$KC.drawText(this,A$C,A$R,this._curMat,A$H,A$t||this._other.textAlign,A$G,A$o,A$U||1,A$j,A$w,0)},A$R.fillRect=function(A$C,A$R,A$j,A$w,A$T){var A$G=this._vb;if(A$DC.fillRectImgVb(A$G,this._clipRect,A$C,A$R,A$j,A$w,A$n.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var A$o=this._shader2D.fillStyle;A$T&&(this._shader2D.fillStyle=A$i.create(A$T));var A$U=this._shader2D,A$t=this._curSubmit.shaderValue;if(A$U.fillStyle!==A$t.fillStyle||A$U.ALPHA!==A$t.ALPHA){A$U.glTexture=null;var A$I=this._curSubmit=A$GC.createSubmit(this,this._ib,A$G,(A$G._byteLength-64)/32*3,A$xC.create(2,0));A$I.shaderValue.color=A$U.fillStyle._color._color,A$I.shaderValue.ALPHA=A$U.ALPHA,this._submits[this._submits._length++]=A$I}this._curSubmit._numEle+=6,this._shader2D.fillStyle=A$o}},A$R.fillTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){if(A$C.loaded&&A$C.bitmap&&A$C.source){var A$t=this._vb,A$I=A$C.bitmap.width,A$e=A$C.bitmap.height,A$H=A$C.uv,A$M=A$o.x%A$C.width,A$K=A$o.y%A$C.height;if(A$I!=A$U.w||A$e!=A$U.h){if(!A$U.w&&!A$U.h)switch(A$U.oy=A$U.ox=0,A$G){case"repeat":A$U.width=A$w,A$U.height=A$T;break;case"repeat-x":A$U.width=A$w,A$K<0?A$C.height+A$K>A$T?A$U.height=A$T:A$U.height=A$C.height+A$K:(A$U.oy=A$K,A$C.height+A$K>A$T?A$U.height=A$T-A$K:A$U.height=A$C.height);break;case"repeat-y":A$M<0?A$C.width+A$M>A$w?A$U.width=A$w:A$U.width=A$C.width+A$M:(A$U.ox=A$M,A$C.width+A$M>A$w?A$U.width=A$w-A$M:A$U.width=A$C.width),A$U.height=A$T;break;case"no-repeat":A$M<0?A$C.width+A$M>A$w?A$U.width=A$w:A$U.width=A$C.width+A$M:(A$U.ox=A$M,A$C.width+A$M>A$w?A$U.width=A$w-A$M:A$U.width=A$C.width),A$K<0?A$C.height+A$K>A$T?A$U.height=A$T:A$U.height=A$C.height+A$K:(A$U.oy=A$K,A$C.height+A$K>A$T?A$U.height=A$T-A$K:A$U.height=A$C.height);break;default:A$U.width=A$w,A$U.height=A$T}A$U.w=A$I,A$U.h=A$e,A$U.uv=[0,0,A$U.width/A$I,0,A$U.width/A$I,A$U.height/A$e,0,A$U.height/A$e]}if(A$R+=A$U.ox,A$j+=A$U.oy,A$M-=A$U.ox,A$K-=A$U.oy,A$DC.fillRectImgVb(A$t,this._clipRect,A$R,A$j,A$U.width,A$U.height,A$U.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var A$F=A$aC.create(this,this._ib,A$t,(A$t._byteLength-64)/32*3,A$xC.create(256,0)),A$L=(this._submits[this._submits._length++]=A$F).shaderValue;A$L.textureHost=A$C;var A$D=A$H[0]*A$I,A$Q=A$H[1]*A$e,A$Z=(A$H[2]-A$H[0])*A$I,A$S=(A$H[5]-A$H[3])*A$e,A$b=-A$M/A$I,A$f=-A$K/A$e;A$L.u_TexRange[0]=A$D/A$I,A$L.u_TexRange[1]=A$Z/A$I,A$L.u_TexRange[2]=A$Q/A$e,A$L.u_TexRange[3]=A$S/A$e,A$L.u_offset[0]=A$b,A$L.u_offset[1]=A$f,A$l.enabled&&!this._isMain&&A$F.addTexture(A$C,(A$t._byteLength>>2)-16),(this._curSubmit=A$F)._renderType=10017,A$F._numEle+=6}}else this.sprite&&A$p.timer.callLater(this,this._repaintSprite)},A$R.setShader=function(A$C){A$u.save(this,1048576,this._shader2D,!0),this._shader2D.shader=A$C},A$R.setFilters=function(A$C){A$u.save(this,2097152,this._shader2D,!0),this._shader2D.filters=A$C,this._curSubmit=A$GC.RENDERBASE,this._renderKey=0,this._drawCount++},A$R.drawTexture=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._drawTextureM(A$C,A$R,A$j,A$w,A$T,A$G,A$o,null,1)},A$R.addTextureVb=function(A$C,A$R,A$j){var A$w=this._curSubmit._vb||this._vb,A$T=A$w._byteLength>>2;A$w.byteLength=A$T+16<<2;for(var A$G=A$w.getFloat32Array(),A$o=0;A$o<16;A$o+=4)A$G[A$T++]=A$C[A$o]+A$R,A$G[A$T++]=A$C[A$o+1]+A$j,A$G[A$T++]=A$C[A$o+2],A$G[A$T++]=A$C[A$o+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),A$w._upload=!0},A$R.willDrawTexture=function(A$C,A$R){if(!(A$C.loaded&&A$C.bitmap&&A$C.source))return this.sprite&&A$p.timer.callLater(this,this._repaintSprite),0;var A$j=A$C.bitmap,A$w=A$j.id+this._shader2D.ALPHA*A$R+10016;if(A$w==this._renderKey)return A$w;var A$T=this._shader2D,A$G=A$T.ALPHA,A$o=this._curSubmit.shaderValue;A$T.ALPHA*=A$R,this._renderKey=A$w,this._drawCount++,A$T.glTexture=A$j;var A$U=this._vb,A$t=null,A$I=A$U._byteLength/32*3,A$e=A$o.textureHost&&A$o.textureHost==A$C&&A$o.textureHost.alphaTexture==A$C.alphaTexture;return A$t=A$aC.create(this,this._ib,A$U,A$I,A$xC.create(1,0)),(this._submits[this._submits._length++]=A$t).shaderValue.textureHost=A$C,A$t._renderType=10016,A$t._preIsSameTextureShader=10016===this._curSubmit._renderType&&A$T.ALPHA===A$o.ALPHA&&A$e,this._curSubmit=A$t,A$T.ALPHA=A$G,A$w},A$R.drawTextures=function(A$C,A$R,A$j,A$w){if(A$C.loaded&&A$C.bitmap&&A$C.source){var A$T=this._clipRect;if(this._clipRect=A$z.MAXCLIPRECT,this._drawTextureM(A$C,A$R[0],A$R[1],A$C.width,A$C.height,A$j,A$w,null,1)){if(this._clipRect=A$T,A$P.drawCall++,!(A$R.length<4)){for(var A$G=this._curSubmit._vb||this._vb,A$o=this._curMat.a,A$U=this._curMat.d,A$t=2,A$I=A$R.length;A$t<A$I;A$t+=2)A$DC.copyPreImgVb(A$G,(A$R[A$t]-A$R[A$t-2])*A$o,(A$R[A$t+1]-A$R[A$t-1])*A$U),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&A$p.timer.callLater(this,this._repaintSprite)},A$R._drawTextureM=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){if(!A$C.loaded||!A$C.source)return this.sprite&&A$p.timer.callLater(this,this._repaintSprite),!1;var A$I=this._curSubmit._vb||this._vb,A$e=A$C.bitmap;A$R+=A$G,A$j+=A$o,this._drawCount++;var A$H=A$e.id+this._shader2D.ALPHA*A$t+10016;if(A$H!=this._renderKey){this._renderKey=A$H;var A$M=this._curSubmit.shaderValue,A$K=this._shader2D,A$F=A$K.ALPHA;A$K.ALPHA*=A$t,A$K.glTexture=A$e;var A$L=this._vb,A$D=null,A$Q=A$L._byteLength/32*3,A$Z=A$M.textureHost&&A$M.textureHost==A$C&&A$M.textureHost.alphaTexture==A$C.alphaTexture;A$D=A$aC.create(this,this._ib,A$L,A$Q,A$xC.create(1,0)),(this._submits[this._submits._length++]=A$D).shaderValue.textureHost=A$C,A$D._renderType=10016,A$D._preIsSameTextureShader=10016===this._curSubmit._renderType&&A$K.ALPHA===A$M.ALPHA&&A$Z,this._curSubmit=A$D,A$I=this._curSubmit._vb||this._vb,A$K.ALPHA=A$F}return!!A$DC.fillRectImgVb(A$I,this._clipRect,A$R,A$j,A$w||A$C.width,A$T||A$C.height,A$C.uv,A$U||this._curMat,this._x,this._y,0,0)&&(A$l.enabled&&!this._isMain&&this._curSubmit.addTexture(A$C,(A$I._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},A$R._repaintSprite=function(){this.sprite&&this.sprite.repaint()},A$R._drawText=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){var A$e=A$C.bitmap;this._drawCount++;var A$H=A$e.id+this._shader2D.ALPHA+10016;if(A$H!=this._renderKey){this._renderKey=A$H;var A$M=this._curSubmit.shaderValue,A$K=this._shader2D;A$K.glTexture=A$e;var A$F=this._vb,A$L=null,A$D=A$F._byteLength/32*3,A$Q=A$M.textureHost&&A$M.textureHost==A$C&&A$M.textureHost.alphaTexture==A$C.alphaTexture;(A$L=A$l.enabled?A$aC.create(this,this._ib,A$F,A$D,A$xC.create(1,0)):A$aC.create(this,this._ib,A$F,A$D,A$dC.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&A$K.ALPHA===A$M.ALPHA&&A$Q,(this._submits[this._submits._length++]=A$L).shaderValue.textureHost=A$C,A$L._renderType=10016,this._curSubmit=A$L}A$C.active();var A$Z=this._curSubmit._vb||this._vb;A$DC.fillRectImgVb(A$Z,this._clipRect,A$R+A$o,A$j+A$U,A$w||A$C.width,A$T||A$C.height,A$C.uv,A$G||this._curMat,this._x,this._y,A$t,A$I,!0)&&(A$l.enabled&&!this._isMain&&this._curSubmit.addTexture(A$C,(A$Z._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},A$R.drawTextureWithTransform=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){if(A$G){var A$I=this._curMat,A$e=this._x,A$H=this._y;(0!==A$o||0!==A$U)&&(this._x=A$o*A$I.a+A$U*A$I.c,this._y=A$U*A$I.d+A$o*A$I.b),A$G&&A$I.bTransform?(A$W.mul(A$G,A$I,A$z._tmpMatrix),(A$G=A$z._tmpMatrix)._checkTransform()):(this._x+=A$I.tx,this._y+=A$I.ty),this._drawTextureM(A$C,A$R,A$j,A$w,A$T,0,0,A$G,A$t),this._x=A$e,this._y=A$H}else this._drawTextureM(A$C,A$R,A$j,A$w,A$T,A$o,A$U,null,A$t)},A$R.fillQuadrangle=function(A$C,A$R,A$j,A$w,A$T){var A$G=this._curSubmit,A$o=this._vb,A$U=this._shader2D,A$t=A$G.shaderValue;if(this._renderKey=0,A$C.bitmap){var A$I=A$C.bitmap;A$U.glTexture==A$I&&A$U.ALPHA===A$t.ALPHA||(A$U.glTexture=A$I,(A$G=this._curSubmit=A$GC.createSubmit(this,this._ib,A$o,A$o._byteLength/32*3,A$xC.create(1,0))).shaderValue.glTexture=A$I,this._submits[this._submits._length++]=A$G),A$DC.fillQuadrangleImgVb(A$o,A$R,A$j,A$w,A$C.uv,A$T||this._curMat,this._x,this._y)}else A$G.shaderValue.fillStyle&&A$G.shaderValue.fillStyle.equal(A$C)&&A$U.ALPHA===A$t.ALPHA||(A$U.glTexture=null,(A$G=this._curSubmit=A$GC.createSubmit(this,this._ib,A$o,A$o._byteLength/32*3,A$xC.create(2,0))).shaderValue.defines.add(2),A$G.shaderValue.fillStyle=A$i.create(A$C),this._submits[this._submits._length++]=A$G),A$DC.fillQuadrangleImgVb(A$o,A$R,A$j,A$w,A$n.DEF_UV,A$T||this._curMat,this._x,this._y);A$G._numEle+=6},A$R.drawTexture2=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){if(0!=A$G){var A$t=this._curMat;if(this._x=A$C*A$t.a+A$R*A$t.c,this._y=A$R*A$t.d+A$C*A$t.b,A$T&&(A$T=A$t.bTransform||A$T.bTransform?(A$W.mul(A$T,A$t,A$z._tmpMatrix),A$z._tmpMatrix):(this._x+=A$T.tx+A$t.tx,this._y+=A$T.ty+A$t.ty,A$W.EMPTY)),1!==A$G||A$o){var A$I=this._shader2D.ALPHA,A$e=this._nBlendType;this._shader2D.ALPHA=A$G,A$o&&(this._nBlendType=A$B.TOINT(A$o)),this._drawTextureM(A$U[0],A$U[1]-A$j,A$U[2]-A$w,A$U[3],A$U[4],0,0,A$T,1),this._shader2D.ALPHA=A$I,this._nBlendType=A$e}else this._drawTextureM(A$U[0],A$U[1]-A$j,A$U[2]-A$w,A$U[3],A$U[4],0,0,A$T,1);this._x=this._y=0}},A$R.drawCanvas=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$C.context;if(this._renderKey=0,A$G._targets)this._submits[this._submits._length++]=A$NC.create(A$G,0,null),this._curSubmit=A$GC.RENDERBASE,A$G._targets.drawTo(this,A$R,A$j,A$w,A$T);else{var A$o=this._submits[this._submits._length++]=A$NC.create(A$G,this._shader2D.ALPHA,this._shader2D.filters),A$U=A$w/A$C.width,A$t=A$T/A$C.height,A$I=A$o._matrix;this._curMat.copyTo(A$I),1!=A$U&&1!=A$t&&A$I.scale(A$U,A$t);var A$e=A$I.tx,A$H=A$I.ty;A$I.tx=A$I.ty=0,A$I.transformPoint(A$$.TEMP.setTo(A$R,A$j)),A$I.translate(A$$.TEMP.x+A$e,A$$.TEMP.y+A$H),this._curSubmit=A$GC.RENDERBASE}A$h.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=A$G._targets?"yellow":"green",this.strokeRect(A$R-1,A$j-1,A$w+2,A$T+2,1),this.strokeRect(A$R,A$j,A$w,A$T,1),this.restore())},A$R.drawTarget=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){void 0===A$I&&(A$I=-1);var A$e=this._vb;if(A$DC.fillRectImgVb(A$e,this._clipRect,A$R,A$j,A$w,A$T,A$t||A$n.DEF_UV,A$G||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var A$H=this._curSubmit=A$HC.create(this,this._ib,A$e,(A$e._byteLength-64)/32*3,A$U,A$o);A$H.blendType=-1==A$I?this._nBlendType:A$I,A$H.scope=A$C,this._submits[this._submits._length++]=A$H,this._curSubmit._numEle+=6}},A$R.mixRGBandAlpha=function(A$C){return this._mixRGBandAlpha(A$C,this._shader2D.ALPHA)},A$R._mixRGBandAlpha=function(A$C,A$R){var A$j=(4278190080&A$C)>>>24;return 0!=A$j?A$j*=A$R:A$j=255*A$R,16777215&A$C|A$j<<24},A$R.drawTriangles=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){if(!A$C.loaded||!A$C.source)return this.sprite&&A$p.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;A$C.bitmap;var A$e=this._mixRGBandAlpha(4294967295,A$U),A$H=(A$w.length,A$G.length);this._renderKey=-1;var A$M=this._curSubmit=A$aC.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,A$xC.create(1,0));return A$M.shaderValue.textureHost=A$C,A$M._renderType=10016,this._submits[this._submits._length++]=A$M,A$o?(A$z._tmpMatrix.a=A$o.a,A$z._tmpMatrix.b=A$o.b,A$z._tmpMatrix.c=A$o.c,A$z._tmpMatrix.d=A$o.d,A$z._tmpMatrix.tx=A$o.tx+A$R,A$z._tmpMatrix.ty=A$o.ty+A$j,A$W.mul(A$z._tmpMatrix,this._curMat,A$z._tmpMatrix)):(A$z._tmpMatrix.a=this._curMat.a,A$z._tmpMatrix.b=this._curMat.b,A$z._tmpMatrix.c=this._curMat.c,A$z._tmpMatrix.d=this._curMat.d,A$z._tmpMatrix.tx=this._curMat.tx+A$R,A$z._tmpMatrix.ty=this._curMat.ty+A$j),this._triangleMesh.addData(A$w,A$T,A$G,A$z._tmpMatrix,A$e,this),this._curSubmit._numEle+=A$H,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},A$R.transform=function(A$C,A$R,A$j,A$w,A$T,A$G){A$Y.save(this),A$W.mul(A$W.TEMP.setTo(A$C,A$R,A$j,A$w,A$T,A$G),this._curMat,this._curMat),this._curMat._checkTransform()},A$R.setTransformByMatrix=function(A$C){A$C.copyTo(this._curMat)},A$R.transformByMatrix=function(A$C){A$Y.save(this),A$W.mul(A$C,this._curMat,this._curMat),this._curMat._checkTransform()},A$R.rotate=function(A$C){A$Y.save(this),this._curMat.rotateEx(A$C)},A$R.scale=function(A$C,A$R){A$Y.save(this),this._curMat.scaleEx(A$C,A$R)},A$R.clipRect=function(A$C,A$R,A$j,A$w){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var A$T=A$eC.create(4);this.addRenderObject(A$T);var A$G=this._vb,A$o=A$G._byteLength>>2;if(A$DC.fillRectImgVb(A$G,null,A$C,A$R,A$j,A$w,A$n.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var A$U=this._curSubmit=A$GC.createSubmit(this,this._ib,A$G,(A$G._byteLength-64)/32*3,A$xC.create(2,0));A$U.shaderValue.ALPHA=1,this._submits[this._submits._length++]=A$U,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var A$t=A$eC.create(5);this.addRenderObject(A$t);var A$I=A$G.getFloat32Array(),A$e=Math.min(Math.min(Math.min(A$I[0+A$o],A$I[4+A$o]),A$I[8+A$o]),A$I[12+A$o]),A$H=Math.max(Math.max(Math.max(A$I[0+A$o],A$I[4+A$o]),A$I[8+A$o]),A$I[12+A$o]),A$M=Math.min(Math.min(Math.min(A$I[1+A$o],A$I[5+A$o]),A$I[9+A$o]),A$I[13+A$o]),A$K=Math.max(Math.max(Math.max(A$I[1+A$o],A$I[5+A$o]),A$I[9+A$o]),A$I[13+A$o]);A$c.save(this,A$t,A$C,A$R,A$j,A$w,A$e,A$M,A$H-A$e,A$K-A$M),this._curSubmit=A$GC.RENDERBASE}else{A$j*=this._curMat.a,A$w*=this._curMat.d;var A$F=A$$.TEMP;this._curMat.transformPoint(A$F.setTo(A$C,A$R)),A$j<0&&(A$F.x=A$F.x+A$j,A$j=-A$j),A$w<0&&(A$F.y=A$F.y+A$w,A$w=-A$w),this._renderKey=0;var A$L=this._curSubmit=A$IC.create(this);(this._submits[this._submits._length++]=A$L).submitIndex=this._submits._length,A$L.submitLength=9999999,A$s.save(this,A$L);var A$D=this._clipRect,A$Q=A$D.x,A$Z=A$D.y,A$S=A$F.x+A$j,A$b=A$F.y+A$w;A$Q<A$F.x&&(A$D.x=A$F.x),A$Z<A$F.y&&(A$D.y=A$F.y),A$D.width=Math.min(A$S,A$Q+A$D.width)-A$D.x,A$D.height=Math.min(A$b,A$Z+A$D.height)-A$D.y,this._shader2D.glTexture=null,A$L.clipRect.copyFrom(A$D),this._curSubmit=A$GC.RENDERBASE}},A$R.setIBVB=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e){if(void 0===A$t&&(A$t=0),void 0===A$I&&(A$I=0),void 0===A$e&&(A$e=0),null===A$j){if(A$Q.isFlash){var A$H=A$w;A$H._selfIB||(A$H._selfIB=A$qC.create(35044)),A$H._selfIB.clear(),A$j=A$H._selfIB}else A$j=this._ib;A$DC.expandIBQuadrangle(A$j,A$w._byteLength/(4*A$w.vertexStride*4))}if(!A$U||!A$o)throw Error("setIBVB must input:shader shaderValues");var A$M=A$tC.create(this,A$w,A$j,A$T,A$o,A$U,A$t,A$I,A$e);A$G||(A$G=A$W.EMPTY),A$G.translate(A$C,A$R),A$W.mul(A$G,this._curMat,A$M._mat),A$G.translate(-A$C,-A$R),this._submits[this._submits._length++]=A$M,this._curSubmit=A$GC.RENDERBASE,this._renderKey=0},A$R.addRenderObject=function(A$C){this._submits[this._submits._length++]=A$C},A$R.fillTrangles=function(A$C,A$R,A$j,A$w,A$T){var A$G=this._curSubmit,A$o=this._vb,A$U=this._shader2D,A$t=A$G.shaderValue,A$I=A$w.length>>4,A$e=A$C.bitmap;this._renderKey=0,A$U.glTexture==A$e&&A$U.ALPHA===A$t.ALPHA||((A$G=this._curSubmit=A$GC.createSubmit(this,this._ib,A$o,A$o._byteLength/32*3,A$xC.create(1,0))).shaderValue.textureHost=A$C,this._submits[this._submits._length++]=A$G),A$DC.fillTranglesVB(A$o,A$R,A$j,A$w,A$T||this._curMat,this._x,this._y),A$G._numEle+=6*A$I},A$R.submitElement=function(A$C,A$R){var A$j=this._submits;for(A$R<0&&(A$R=A$j._length);A$C<A$R;)A$C+=A$j[A$C].renderSubmit()},A$R.finish=function(){A$bC.mainContext.finish()},A$R.flush=function(){var A$C=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(A$C>this._ib.bufferLength/12&&A$DC.expandIBQuadrangle(this._ib,A$C),!this._isMain&&A$l.enabled&&A$l._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=A$l._atlasRestore;for(var A$R=this._submits,A$j=0,A$w=A$R._length;A$j<A$w;A$j++){var A$T=A$R[A$j];10016===A$T.getRenderType()&&A$T.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),A$RC.instance&&A$RC.getInstance().reset();var A$G;for(A$j=0,A$G=this.meshlist.length;A$j<A$G;A$j++){var A$o=this.meshlist[A$j];A$o.canReuse?A$o.releaseMesh():A$o.destroy()}return this.meshlist.length=0,this._curSubmit=A$GC.RENDERBASE,this._renderKey=0,this._triangleMesh=A$nC.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},A$R.setPathId=function(A$C){if(this.mId=A$C,-1!=this.mId){this.mHaveKey=!1;var A$R=A$m.getInstance();A$R.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,A$R.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},A$R.movePath=function(A$C,A$R){var A$j=A$C,A$w=A$R;A$C=this._curMat.a*A$j+this._curMat.c*A$w+this._curMat.tx,A$R=this._curMat.b*A$j+this._curMat.d*A$w+this._curMat.ty,this.mX+=A$C,this.mY+=A$R},A$R.beginPath=function(){var A$C=this._getPath();A$C.tempArray.length=0,A$C.closePath=!1,this.mX=0,this.mY=0},A$R.closePath=function(){this._path.closePath=!0},A$R.fill=function(A$C){void 0===A$C&&(A$C=!1);var A$R=this._getPath();this.drawPoly(0,0,A$R.tempArray,this.fillStyle._color.numColor,0,0,A$C)},A$R.stroke=function(){var A$C=this._getPath();if(0<this.lineWidth){if(-1==this.mId)A$C.drawLine(0,0,A$C.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var A$R=A$m.getInstance().shapeLineDic[this.mId];A$R.rebuild(A$C.tempArray),A$C.setGeomtry(A$R)}else A$m.getInstance().addLine(this.mId,A$C.drawLine(0,0,A$C.tempArray,this.lineWidth,this.strokeStyle._color.numColor));A$C.update();var A$j=[this.mX,this.mY],A$w=A$GC.createShape(this,A$C.ib,A$C.vb,A$C.count,A$C.offset,A$xC.create(4,0));A$w.shaderValue.ALPHA=this._shader2D.ALPHA,A$w.shaderValue.u_pos=A$j,A$w.shaderValue.u_mmat2=A$ZC.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=A$w,this._renderKey=-1}},A$R.line=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=this._curSubmit,A$U=this._vb;if(A$DC.fillLineVb(A$U,this._clipRect,A$C,A$R,A$j,A$w,A$T,A$G)){this._renderKey=0;var A$t=this._shader2D,A$I=A$o.shaderValue;A$t.strokeStyle===A$I.strokeStyle&&A$t.ALPHA===A$I.ALPHA||(A$t.glTexture=null,(A$o=this._curSubmit=A$GC.createSubmit(this,this._ib,A$U,(A$U._byteLength-64)/32*3,A$xC.create(2,0))).shaderValue.strokeStyle=A$t.strokeStyle,A$o.shaderValue.mainID=2,A$o.shaderValue.ALPHA=A$t.ALPHA,this._submits[this._submits._length++]=A$o),A$o._numEle+=6}},A$R.moveTo=function(A$C,A$R,A$j){void 0===A$j&&(A$j=!0);var A$w=this._getPath();if(A$j){var A$T=A$C,A$G=A$R;A$C=this._curMat.a*A$T+this._curMat.c*A$G,A$R=this._curMat.b*A$T+this._curMat.d*A$G}A$w.addPoint(A$C,A$R)},A$R.lineTo=function(A$C,A$R,A$j){void 0===A$j&&(A$j=!0);var A$w=this._getPath();if(A$j){var A$T=A$C,A$G=A$R;A$C=this._curMat.a*A$T+this._curMat.c*A$G,A$R=this._curMat.b*A$T+this._curMat.d*A$G}A$w.addPoint(A$C,A$R)},A$R.drawCurves=function(A$C,A$R,A$j){this.setPathId(-1),this.beginPath(),this.strokeStyle=A$j[3],this.lineWidth=A$j[4];var A$w=A$j[2];A$C+=A$j[0],A$R+=A$j[1],this.movePath(A$C,A$R),this.moveTo(A$w[0],A$w[1]);for(var A$T=2,A$G=A$w.length;A$T<A$G;)this.quadraticCurveTo(A$w[A$T++],A$w[A$T++],A$w[A$T++],A$w[A$T++]);this.stroke()},A$R.arcTo=function(A$C,A$R,A$j,A$w,A$T){if(-1==this.mId||!this.mHaveKey){var A$G=0,A$o=0,A$U=0,A$t=this._getPath();this._curMat.copyTo(A$z._tmpMatrix),A$z._tmpMatrix.tx=A$z._tmpMatrix.ty=0,A$z._tempPoint.setTo(A$t.getEndPointX(),A$t.getEndPointY()),A$z._tmpMatrix.invertTransformPoint(A$z._tempPoint);var A$I=A$z._tempPoint.x-A$C,A$e=A$z._tempPoint.y-A$R,A$H=Math.sqrt(A$I*A$I+A$e*A$e);if(!(A$H<=1e-6)){var A$M=A$I/A$H,A$K=A$e/A$H,A$F=A$j-A$C,A$L=A$w-A$R,A$D=A$F*A$F+A$L*A$L,A$Q=Math.sqrt(A$D);if(!(A$Q<=1e-6)){var A$Z=A$F/A$Q,A$S=A$L/A$Q,A$b=A$M+A$Z,A$f=A$K+A$S,A$p=Math.sqrt(A$b*A$b+A$f*A$f);if(!(A$p<=1e-6)){var A$h=A$b/A$p,A$x=A$f/A$p,A$W=Math.acos(A$h*A$M+A$x*A$K),A$$=Math.PI/2-A$W,A$A=(A$H=A$T/Math.tan(A$$))*A$M+A$C,A$r=A$H*A$K+A$R,A$E=Math.sqrt(A$H*A$H+A$T*A$T),A$P=A$C+A$h*A$E,A$J=A$R+A$x*A$E,A$N=0,A$a=0;if(0<=A$M*A$S-A$K*A$Z){var A$n=2*A$$/A$z.SEGNUM;A$N=Math.sin(A$n),A$a=Math.cos(A$n)}else A$n=2*-A$$/A$z.SEGNUM,A$N=Math.sin(A$n),A$a=Math.cos(A$n);A$o=this._curMat.a*A$A+this._curMat.c*A$r,A$U=this._curMat.b*A$A+this._curMat.d*A$r,A$o==this._path.getEndPointX()&&A$U==this._path.getEndPointY()||A$t.addPoint(A$o,A$U);var A$y=A$A-A$P,A$m=A$r-A$J;for(A$G=0;A$G<A$z.SEGNUM;A$G++){var A$k=A$y*A$a+A$m*A$N,A$V=-A$y*A$N+A$m*A$a;A$o=A$k+A$P,A$U=A$V+A$J,A$C=this._curMat.a*A$o+this._curMat.c*A$U,A$U=A$R=this._curMat.b*A$o+this._curMat.d*A$U,(A$o=A$C)==this._path.getEndPointX()&&A$U==this._path.getEndPointY()||A$t.addPoint(A$o,A$U),A$y=A$k,A$m=A$V}}}}}},A$R.arc=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!0),-1!=this.mId){var A$U=A$m.getInstance().shapeDic[this.mId];if(A$U&&this.mHaveKey&&!A$U.needUpdate(this._curMat))return;A$R=A$C=0}var A$t,A$I=0,A$e=0,A$H=0,A$M=0,A$K=0,A$F=0,A$L=0;if(A$e=A$T-A$w,A$G)if(Math.abs(A$e)>=2*Math.PI)A$e=2*-Math.PI;else for(;0<A$e;)A$e-=2*Math.PI;else if(Math.abs(A$e)>=2*Math.PI)A$e=2*Math.PI;else for(;A$e<0;)A$e+=2*Math.PI;A$t=A$e/(A$L=A$j<101?Math.max(10,A$e*A$j/5):A$j<201?Math.max(10,A$e*A$j/20):Math.max(10,A$e*A$j/40))/2,A$H=Math.abs(4/3*(1-Math.cos(A$t))/Math.sin(A$t)),A$G&&(A$H=-A$H);var A$D=this._getPath(),A$Q=NaN,A$Z=NaN;for(A$F=0;A$F<=A$L;A$F++)A$I=A$w+A$e*(A$F/A$L),A$M=A$C+Math.cos(A$I)*A$j,A$K=A$R+Math.sin(A$I)*A$j,A$o&&(A$Q=A$M,A$Z=A$K,A$M=this._curMat.a*A$Q+this._curMat.c*A$Z,A$K=this._curMat.b*A$Q+this._curMat.d*A$Z),A$M==this._path.getEndPointX()&&A$K==this._path.getEndPointY()||A$D.addPoint(A$M,A$K);A$M=A$C+Math.cos(A$T)*A$j,A$K=A$R+Math.sin(A$T)*A$j,A$o&&(A$Q=A$M,A$Z=A$K,A$M=this._curMat.a*A$Q+this._curMat.c*A$Z,A$K=this._curMat.b*A$Q+this._curMat.d*A$Z),A$M==this._path.getEndPointX()&&A$K==this._path.getEndPointY()||A$D.addPoint(A$M,A$K)},A$R.quadraticCurveTo=function(A$C,A$R,A$j,A$w){var A$T=A$H.I,A$G=A$j,A$o=A$w;A$j=this._curMat.a*A$G+this._curMat.c*A$o,A$w=this._curMat.b*A$G+this._curMat.d*A$o,A$G=A$C,A$o=A$R,A$C=this._curMat.a*A$G+this._curMat.c*A$o,A$R=this._curMat.b*A$G+this._curMat.d*A$o;for(var A$U=A$T.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),A$C,A$R,A$j,A$w],30,2),A$t=0,A$I=A$U.length/2;A$t<A$I;A$t++)this.lineTo(A$U[2*A$t],A$U[2*A$t+1],!1);this.lineTo(A$j,A$w,!1)},A$R.rect=function(A$C,A$R,A$j,A$w){this._other=this._other.make(),this._other.path||(this._other.path=new A$_),this._other.path.rect(A$C,A$R,A$j,A$w)},A$R.strokeRect=function(A$C,A$R,A$j,A$w,A$T){var A$G=.5*A$T;this.line(A$C-A$G,A$R,A$C+A$j+A$G,A$R,A$T,this._curMat),this.line(A$C+A$j,A$R,A$C+A$j,A$R+A$w,A$T,this._curMat),this.line(A$C,A$R,A$C,A$R+A$w,A$T,this._curMat),this.line(A$C-A$G,A$R+A$w,A$C+A$j+A$G,A$R+A$w,A$T,this._curMat)},A$R.clip=function(){},A$R.drawPoly=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){void 0===A$o&&(A$o=!1),this._renderKey=0,this._shader2D.glTexture=null;var A$U=this._getPath();if(-1==this.mId)A$U.polygon(A$C,A$R,A$j,A$w,A$T||1,A$G);else if(this.mHaveKey){var A$t=A$m.getInstance().shapeDic[this.mId];A$t.setMatrix(this._curMat),A$t.rebuild(A$U.tempArray),A$U.setGeomtry(A$t)}else{var A$I=A$U.polygon(A$C,A$R,A$j,A$w,A$T||1,A$G);A$m.getInstance().addShape(this.mId,A$I),A$I.setMatrix(this._curMat)}A$U.update();var A$e,A$H=[this.mX,this.mY];if((A$e=A$GC.createShape(this,A$U.ib,A$U.vb,A$U.count,A$U.offset,A$xC.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,A$e.shaderValue.u_pos=A$H,A$e.shaderValue.u_mmat2=A$ZC.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=A$e,0<A$T){if(this.mHaveLineKey){var A$M=A$m.getInstance().shapeLineDic[this.mId];A$M.rebuild(A$U.tempArray),A$U.setGeomtry(A$M)}else A$m.getInstance().addShape(this.mId,A$U.drawLine(A$C,A$R,A$j,A$T,A$G));A$U.update(),(A$e=A$GC.createShape(this,A$U.ib,A$U.vb,A$U.count,A$U.offset,A$xC.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,A$e.shaderValue.u_mmat2=A$ZC.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=A$e}},A$R.drawParticle=function(A$C,A$R,A$j){A$j.x=A$C,A$j.y=A$R,this._submits[this._submits._length++]=A$j},A$R._getPath=function(){return this._path||(this._path=new A$_)},A$w(0,A$R,"globalCompositeOperation",function(){return A$B.NAMES[this._nBlendType]},function(A$C){var A$R=A$B.TOINT[A$C];null==A$R||this._nBlendType===A$R||(A$u.save(this,65536,this,!0),this._curSubmit=A$GC.RENDERBASE,this._renderKey=0,this._nBlendType=A$R)}),A$w(0,A$R,"strokeStyle",function(){return this._shader2D.strokeStyle},function(A$C){this._shader2D.strokeStyle.equal(A$C)||(A$u.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=A$i.create(A$C))}),A$w(0,A$R,"globalAlpha",function(){return this._shader2D.ALPHA},function(A$C){(A$C=Math.floor(1e3*A$C)/1e3)!=this._shader2D.ALPHA&&(A$u.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=A$C)}),A$w(0,A$R,"asBitmap",null,function(A$C){if(A$C){if(this._targets||(this._targets=new A$O),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),A$w(0,A$R,"fillStyle",function(){return this._shader2D.fillStyle},function(A$C){this._shader2D.fillStyle.equal(A$C)||(A$u.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=A$i.create(A$C))}),A$w(0,A$R,"textAlign",function(){return this._other.textAlign},function(A$C){this._other.textAlign===A$C||(this._other=this._other.make(),A$u.save(this,32768,this._other,!1),this._other.textAlign=A$C)}),A$w(0,A$R,"lineWidth",function(){return this._other.lineWidth},function(A$C){this._other.lineWidth===A$C||(this._other=this._other.make(),A$u.save(this,256,this._other,!1),this._other.lineWidth=A$C)}),A$w(0,A$R,"textBaseline",function(){return this._other.textBaseline},function(A$C){this._other.textBaseline===A$C||(this._other=this._other.make(),A$u.save(this,16384,this._other,!1),this._other.textBaseline=A$C)}),A$w(0,A$R,"font",null,function(A$C){A$C!=this._other.font.toString()&&(this._other=this._other.make(),A$u.save(this,8,this._other,!1),this._other.font===A$FC.EMPTY?this._other.font=new A$FC(A$C):this._other.font.setFont(A$C))}),A$z.__init__=function(){A$j.DEFAULT=new A$j},A$z._tempPoint=new A$$,A$z._SUBMITVBSIZE=32e3,A$z._MAXSIZE=99999999,A$z._RECTVBSIZE=16,A$z.MAXCLIPRECT=new A$A(0,0,99999999,99999999),A$z._COUNT=0,A$z._tmpMatrix=new A$W,A$z.SEGNUM=32,A$z._contextcount=0,A$o(A$z,["_fontTemp",function(){return this._fontTemp=new A$FC},"_drawStyleTemp",function(){return this._drawStyleTemp=new A$i(null)}]),A$z.__init$=function(){A$j=function(){function A$C(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=A$FC.EMPTY}A$M(A$C,"");var A$R=A$C.prototype;return A$R.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=A$FC.EMPTY},A$R.make=function(){return this===A$C.DEFAULT?new A$C:this},A$C.DEFAULT=null,A$C}()},A$z}(),A$xC=function(A$C){function A$w(A$C,A$R){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,A$w.__super.call(this),this.defines=new A$rC,this.position=A$w._POSITION,this.mainID=A$C,this.subID=A$R,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=A$C|A$R,this._inClassCache=A$w._cache[this._cacheID],0<A$C&&!this._inClassCache&&(this._inClassCache=A$w._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}A$M(A$w,"laya.webgl.shader.d2.value.Value2D",A$V);var A$R=A$w.prototype;return A$R.setValue=function(A$C){},A$R.refresh=function(){var A$C=this.size;return A$C[0]=A$ZC.width,A$C[1]=A$ZC.height,this.alpha=this.ALPHA*A$ZC.worldAlpha,this.mmat=A$ZC.worldMatrix4,this},A$R._ShaderWithCompile=function(){return A$XC.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,A$OC.create)},A$R._withWorldShaderDefines=function(){var A$C=A$ZC.worldShaderDefines,A$R=A$XC.sharders[this.mainID|this.defines._value|A$C.getValue()];if(!A$R){var A$j,A$w={};for(A$j in this.defines.toNameDic())A$w[A$j]="";for(A$j in A$C.toNameDic())A$w[A$j]="";A$R=A$XC.withCompile2D(0,this.mainID,A$w,this.mainID|this.defines._value|A$C.getValue(),A$OC.create)}var A$T=A$ZC.worldFilters;if(!A$T)return A$R;for(var A$G,A$o=A$T.length,A$U=0;A$U<A$o;A$U++)(A$G=A$T[A$U])&&A$G.action.setValue(this);return A$R},A$R.upload=function(){var A$C=A$ZC;this.alpha=this.ALPHA*A$C.worldAlpha,A$ZC.worldMatrix4!==A$ZC.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),A$bC.shaderHighPrecision&&this.defines.add(1024);var A$R,A$j=A$C.worldShaderDefines?this._withWorldShaderDefines():A$XC.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=A$C.width,this.size[1]=A$C.height,this.mmat=A$C.worldMatrix4,A$yC.activeShader!==A$j?A$j._shaderValueWidth!==A$C.width||A$j._shaderValueHeight!==A$C.height?(A$j._shaderValueWidth=A$C.width,A$j._shaderValueHeight=A$C.height):A$R=A$j._params2dQuick2||A$j._make2dQuick2():A$j._shaderValueWidth!==A$C.width||A$j._shaderValueHeight!==A$C.height?(A$j._shaderValueWidth=A$C.width,A$j._shaderValueHeight=A$C.height):A$R=A$j._params2dQuick1||A$j._make2dQuick1(),A$j.upload(this,A$R)},A$R.setFilters=function(A$C){if(this.filters=A$C)for(var A$R,A$j=A$C.length,A$w=0;A$w<A$j;A$w++)(A$R=A$C[A$w])&&(this.defines.add(A$R.type),A$R.action.setValue(this))},A$R.clear=function(){this.defines.setValue(this.subID)},A$R.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},A$w._initone=function(A$C,A$R){A$w._typeClass[A$C]=A$R,A$w._cache[A$C]=[],A$w._cache[A$C]._length=0},A$w.__init__=function(){A$w._POSITION=[2,5126,!1,4*A$LC.BYTES_PE,0],A$w._TEXCOORD=[2,5126,!1,4*A$LC.BYTES_PE,2*A$LC.BYTES_PE],A$w._initone(2,A$zC),A$w._initone(4,A$BC),A$w._initone(256,A$lC),A$w._initone(512,A$VC),A$w._initone(1,A$gC),A$w._initone(65,A$dC),A$w._initone(9,A$gC)},A$w.create=function(A$C,A$R){var A$j=A$w._cache[A$C|A$R];return A$j._length?A$j[--A$j._length]:new A$w._typeClass[A$C|A$R](A$R)},A$w._POSITION=null,A$w._TEXCOORD=null,A$w._cache=[],A$w._typeClass=[],A$w.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A$w}(),A$WC=function(A$C){function A$D(A$C,A$R){A$D.__super.call(this,A$C,A$R)}A$M(A$D,"laya.webgl.utils.RenderSprite3D",A$Z);var A$R=A$D.prototype;return A$R.onCreate=function(A$C){switch(A$C){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},A$R._mask=function(A$C,A$R,A$j,A$w){var A$T,A$G,A$o=this._next,A$U=A$C.mask;if(A$U){A$R.ctx.save();var A$t=A$R.ctx.globalCompositeOperation,A$I=new A$A;if(A$I.copyFrom(A$U.getBounds()),A$I.width=Math.round(A$I.width),A$I.height=Math.round(A$I.height),A$I.x=Math.round(A$I.x),A$I.y=Math.round(A$I.y),0<A$I.width&&0<A$I.height){var A$e=A$C._style._tf,A$H=A$UC.create();A$H.addValue("bounds",A$I),A$T=A$oC.create([A$H,A$R],laya.webgl.utils.RenderSprite3D.tmpTarget),A$R.addRenderObject(A$T),A$U.render(A$R,-A$I.x,-A$I.y),A$T=A$oC.create([A$H],laya.webgl.utils.RenderSprite3D.endTmpTarget),A$R.addRenderObject(A$T),A$R.ctx.save(),A$R.clipRect(A$j-A$e.translateX+A$I.x,A$w-A$e.translateY+A$I.y,A$I.width,A$I.height),A$o._fun.call(A$o,A$C,A$R,A$j,A$w),A$R.ctx.restore(),A$G=A$eC.create(6),A$t=A$R.ctx.globalCompositeOperation,A$G.blendMode="mask",A$R.addRenderObject(A$G),A$W.TEMP.identity();var A$M=A$xC.create(1,0),A$K=A$n.INV_UV,A$F=A$I.width,A$L=A$I.height;(A$I.width<32||A$I.height<32)&&((A$K=A$D.tempUV)[0]=0,A$K[1]=0,A$K[2]=32<=A$I.width?1:A$I.width/32,A$K[3]=0,A$K[4]=32<=A$I.width?1:A$I.width/32,A$K[5]=32<=A$I.height?1:A$I.height/32,A$K[6]=0,A$K[7]=32<=A$I.height?1:A$I.height/32,A$I.width=32<=A$I.width?A$I.width:32,A$I.height=32<=A$I.height?A$I.height:32,A$K[1]*=-1,A$K[3]*=-1,A$K[5]*=-1,A$K[7]*=-1,A$K[1]+=1,A$K[3]+=1,A$K[5]+=1,A$K[7]+=1),A$R.ctx.drawTarget(A$H,A$j+A$I.x-A$e.translateX,A$w+A$I.y-A$e.translateY,A$F,A$L,A$W.TEMP,"tmpTarget",A$M,A$K,6),A$T=A$oC.create([A$H],laya.webgl.utils.RenderSprite3D.recycleTarget),A$R.addRenderObject(A$T),(A$G=A$eC.create(6)).blendMode=A$t,A$R.addRenderObject(A$G)}A$R.ctx.restore()}else A$o._fun.call(A$o,A$C,A$R,A$j,A$w)},A$R._blend=function(A$C,A$R,A$j,A$w){var A$T=A$C._style,A$G=this._next;A$T.blendMode?(A$R.ctx.save(),A$R.ctx.globalCompositeOperation=A$T.blendMode,A$G._fun.call(A$G,A$C,A$R,A$j,A$w),A$R.ctx.restore()):A$G._fun.call(A$G,A$C,A$R,A$j,A$w)},A$R._transform=function(A$C,A$R,A$j,A$w){var A$T=A$C.transform,A$G=this._next;if(A$T&&A$G!=A$Z.NORENDER){var A$o=A$R.ctx;A$C._style;A$T.tx=A$j,A$T.ty=A$w;var A$U=A$o._getTransformMatrix(),A$t=A$U.clone();A$W.mul(A$T,A$U,A$U),A$U._checkTransform(),A$T.tx=A$T.ty=0,A$G._fun.call(A$G,A$C,A$R,0,0),A$t.copyTo(A$U),A$t.destroy()}else A$G._fun.call(A$G,A$C,A$R,A$j,A$w)},A$D.tmpTarget=function(A$C,A$R){var A$j=A$C.getValue("bounds"),A$w=A$mC.create(A$j.width,A$j.height);A$w.start(),A$w.clear(0,0,0,0),A$C.addValue("tmpTarget",A$w)},A$D.endTmpTarget=function(A$C){A$C.getValue("tmpTarget").end()},A$D.recycleTarget=function(A$C){A$C.getValue("tmpTarget").recycle(),A$C.recycle()},A$o(A$D,["tempUV",function(){return this.tempUV=new Array(8)}]),A$D}(),A$$C=function(A$C){function A$R(){this.data=null,A$R.__super.call(this)}A$M(A$R,"laya.filters.webgl.ColorFilterActionGL",A$k);var A$j=A$R.prototype;return A$p.imps(A$j,{"laya.filters.IFilterActionGL":!0}),A$j.setValue=function(A$C){A$C.colorMat=this.data._mat,A$C.colorAlpha=this.data._alpha},A$j.apply3d=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$C.getValue("bounds"),A$o=A$xC.create(1,0);A$o.setFilters([this.data]);var A$U=A$W.TEMP;A$U.identity(),A$j.ctx.drawTarget(A$C,0,0,A$G.width,A$G.height,A$U,"src",A$o)},A$R}(),A$AC=function(A$C){function A$G(A$C,A$R,A$j,A$w,A$T){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,A$G.__super.call(this,A$C,A$R,A$T),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new A$iC,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=A$j,this._atlasCanvas.height=A$w,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}A$M(A$G,"laya.webgl.atlas.Atlaser",A$z);var A$R=A$G.prototype;return A$R.computeUVinAtlasTexture=function(A$C,A$R,A$j,A$w){var A$T=A$l.atlasTextureWidth,A$G=A$l.atlasTextureHeight,A$o=A$j/A$T,A$U=A$w/A$G,A$t=(A$j+A$C.bitmap.width)/A$T,A$I=(A$w+A$C.bitmap.height)/A$G,A$e=A$C.bitmap.width/A$T,A$H=A$C.bitmap.height/A$G;A$C.uv=[A$o+A$R[0]*A$e,A$U+A$R[1]*A$H,A$t-(1-A$R[2])*A$e,A$U+A$R[3]*A$H,A$t-(1-A$R[4])*A$e,A$I-(1-A$R[5])*A$H,A$o+A$R[6]*A$e,A$I-(1-A$R[7])*A$H]},A$R.findBitmapIsExist=function(A$C){if(A$C instanceof laya.webgl.resource.WebGLImage){var A$R=A$C,A$j=A$R.url,A$w=this._InAtlasWebGLImagesKey[A$j||A$R.id];if(A$w)return A$w.offsetInfoID}return-1},A$R.addToAtlasTexture=function(A$C,A$R,A$j){if(A$C instanceof laya.webgl.resource.WebGLImage){var A$w=A$C,A$T=A$w.url;this._InAtlasWebGLImagesKey[A$T||A$w.id]={bitmap:A$C,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([A$R,A$j])}this._atlasCanvas.texSubImage2D(A$R,A$j,A$C.atlasSource),A$C.clearAtlasSource()},A$R.addToAtlas=function(A$C,A$R,A$j){A$C._atlasID=this._inAtlasTextureKey.length;var A$w=A$C.uv.slice(),A$T=A$C.bitmap;this._inAtlasTextureKey.push(A$C),this._inAtlasTextureOriUVValue.push(A$w),this._inAtlasTextureBitmapValue.push(A$T),this.computeUVinAtlasTexture(A$C,A$w,A$R,A$j),A$C.bitmap=this._atlasCanvas},A$R.clear=function(){for(var A$C=0,A$R=this._inAtlasTextureKey.length;A$C<A$R;A$C++)this._inAtlasTextureKey[A$C].bitmap=this._inAtlasTextureBitmapValue[A$C],this._inAtlasTextureKey[A$C].uv=this._inAtlasTextureOriUVValue[A$C],this._inAtlasTextureKey[A$C]._atlasID=-1,this._inAtlasTextureKey[A$C].bitmap.lock=!1,this._inAtlasTextureKey[A$C].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},A$R.dispose=function(){this.clear(),this._atlasCanvas.destroy()},A$w(0,A$R,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),A$w(0,A$R,"texture",function(){return this._atlasCanvas}),A$w(0,A$R,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),A$G}(),A$rC=function(A$C){function A$j(){A$j.__super.call(this,A$j.__name2int,A$j.__int2name,A$j.__int2nameMap)}return A$M(A$j,"laya.webgl.shader.d2.ShaderDefines2D",A$v),A$j.__init__=function(){A$j.reg("TEXTURE2D",1),A$j.reg("COLOR2D",2),A$j.reg("PRIMITIVE",4),A$j.reg("GLOW_FILTER",8),A$j.reg("BLUR_FILTER",16),A$j.reg("COLOR_FILTER",32),A$j.reg("COLOR_ADD",64),A$j.reg("WORLDMAT",128),A$j.reg("FILLTEXTURE",256),A$j.reg("FSHIGHPRECISION",1024),A$j.reg("TXTALPHA",2048),A$j.reg("TXTCOMPRESS",4096)},A$j.reg=function(A$C,A$R){A$v._reg(A$C,A$R,A$j.__name2int,A$j.__int2name)},A$j.toText=function(A$C,A$R,A$j){return A$v._toText(A$C,A$R,A$j)},A$j.toInt=function(A$C){return A$v._toInt(A$C,A$j.__name2int)},A$j.TEXTURE2D=1,A$j.COLOR2D=2,A$j.PRIMITIVE=4,A$j.FILTERGLOW=8,A$j.FILTERBLUR=16,A$j.FILTERCOLOR=32,A$j.COLORADD=64,A$j.WORLDMAT=128,A$j.FILLTEXTURE=256,A$j.SKINMESH=512,A$j.SHADERDEFINE_FSHIGHPRECISION=1024,A$j.TXTALPHA=2048,A$j.TXTCOMPRESS=4096,A$j.__name2int={},A$j.__int2name=[],A$j.__int2nameMap=[],A$j}(),A$EC=(function(A$C){function A$U(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$U.__super.call(this,A$C,A$R,A$j,A$w,40,A$T,A$G,A$o)}A$M(A$U,"laya.webgl.shapes.Ellipse",A$jC)}(),function(A$C){function A$G(A$C,A$R,A$j,A$w,A$T){this._points=[],this.rebuild(A$j),A$G.__super.call(this,A$C,A$R,0,0,0,A$T,A$w,A$T,0)}A$M(A$G,"laya.webgl.shapes.Line",A$jC);var A$R=A$G.prototype;return A$R.rebuild=function(A$C){var A$R=A$C.length;A$R!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(A$R/2-1)),this.mFloat32Array=new Float32Array(5*A$R)),this._points.length=0;for(var A$j=NaN,A$w=NaN,A$T=-1,A$G=-1,A$o=A$C.length/2,A$U=0;A$U<A$o;A$U++)A$j=A$C[2*A$U],A$w=A$C[2*A$U+1],(.01<Math.abs(A$T-A$j)||.01<Math.abs(A$G-A$w))&&this._points.push(A$j,A$w),A$T=A$j,A$G=A$w},A$R.getData=function(A$C,A$R,A$j){var A$w=[],A$T=[];0<this.borderWidth&&this.createLine2(this._points,A$w,this.borderWidth,A$j,A$T,this._points.length/2),this.mUint16Array.set(A$w,0),this.mFloat32Array.set(A$T,0),A$C.append(this.mUint16Array),A$R.append(this.mFloat32Array)},A$G}()),A$PC=function(A$C){function A$H(A$C,A$R,A$j,A$w,A$T){this._points=[];for(var A$G=NaN,A$o=NaN,A$U=-1,A$t=-1,A$I=A$j.length/2-1,A$e=0;A$e<A$I;A$e++)A$G=A$j[2*A$e],A$o=A$j[2*A$e+1],(.01<Math.abs(A$U-A$G)||.01<Math.abs(A$t-A$o))&&this._points.push(A$G,A$o),A$U=A$G,A$t=A$o;A$G=A$j[2*A$I],A$o=A$j[2*A$I+1],A$U=this._points[0],A$t=this._points[1],(.01<Math.abs(A$U-A$G)||.01<Math.abs(A$t-A$o))&&this._points.push(A$G,A$o),A$H.__super.call(this,A$C,A$R,0,0,this._points.length/2,0,A$w,A$T)}A$M(A$H,"laya.webgl.shapes.LoopLine",A$jC);var A$R=A$H.prototype;return A$R.getData=function(A$C,A$R,A$j){if(0<this.borderWidth){for(var A$w=this.color,A$T=(A$w>>16&255)/255,A$G=(A$w>>8&255)/255,A$o=(255&A$w)/255,A$U=[],A$t=0,A$I=0,A$e=[],A$H=Math.floor(this._points.length/2),A$M=0;A$M<A$H;A$M++)A$t=this._points[2*A$M],A$I=this._points[2*A$M+1],A$U.push(this.x+A$t,this.y+A$I,A$T,A$G,A$o);this.createLoopLine(A$U,A$e,this.borderWidth,A$j+A$U.length/5),A$C.append(new Uint16Array(A$e)),A$R.append(new Float32Array(A$U))}},A$R.createLoopLine=function(A$C,A$R,A$j,A$w,A$T,A$G){A$C.length;var A$o=A$C.concat(),A$U=A$T||A$C,A$t=this.borderColor,A$I=(A$t>>16&255)/255,A$e=(A$t>>8&255)/255,A$H=(255&A$t)/255,A$M=[A$o[0],A$o[1]],A$K=[A$o[A$o.length-5],A$o[A$o.length-4]],A$F=A$K[0]+.5*(A$M[0]-A$K[0]),A$L=A$K[1]+.5*(A$M[1]-A$K[1]);A$o.unshift(A$F,A$L,0,0,0),A$o.push(A$F,A$L,0,0,0);var A$D,A$Q,A$Z,A$S,A$b,A$f,A$p,A$h,A$x,A$W,A$$,A$A,A$r,A$E,A$P,A$J,A$N,A$a,A$n,A$y,A$m=A$o.length/5,A$k=A$w,A$V=A$j/2;A$Z=A$o[0],A$S=A$o[1],A$W=A$Z-(A$b=A$o[5]),A$x=(A$x=-(A$S-(A$f=A$o[6])))/(A$y=Math.sqrt(A$x*A$x+A$W*A$W))*A$V,A$W=A$W/A$y*A$V,A$U.push(A$Z-A$x,A$S-A$W,A$I,A$e,A$H,A$Z+A$x,A$S+A$W,A$I,A$e,A$H);for(var A$z=1;A$z<A$m-1;A$z++)A$Z=A$o[5*(A$z-1)],A$S=A$o[5*(A$z-1)+1],A$b=A$o[5*A$z],A$f=A$o[5*A$z+1],A$p=A$o[5*(A$z+1)],A$h=A$o[5*(A$z+1)+1],A$W=A$Z-A$b,A$A=A$b-A$p,A$P=(-(A$x=(A$x=-(A$S-A$f))/(A$y=Math.sqrt(A$x*A$x+A$W*A$W))*A$V)+A$Z)*(-(A$W=A$W/A$y*A$V)+A$f)-(-A$x+A$b)*(-A$W+A$S),A$a=(-(A$$=(A$$=-(A$f-A$h))/(A$y=Math.sqrt(A$$*A$$+A$A*A$A))*A$V)+A$p)*(-(A$A=A$A/A$y*A$V)+A$f)-(-A$$+A$b)*(-A$A+A$h),A$n=(A$r=-A$W+A$S-(-A$W+A$f))*(A$N=-A$$+A$b-(-A$$+A$p))-(A$J=-A$A+A$h-(-A$A+A$f))*(A$E=-A$x+A$b-(-A$x+A$Z)),Math.abs(A$n)<.1?(A$n+=10.1,A$U.push(A$b-A$x,A$f-A$W,A$I,A$e,A$H,A$b+A$x,A$f+A$W,A$I,A$e,A$H)):(((A$D=(A$E*A$a-A$N*A$P)/A$n)-A$b)*(A$D-A$b)+((A$Q=(A$J*A$P-A$r*A$a)/A$n)-A$f)+(A$Q-A$f),A$U.push(A$D,A$Q,A$I,A$e,A$H,A$b-(A$D-A$b),A$f-(A$Q-A$f),A$I,A$e,A$H));A$G&&(A$R=A$G);var A$l=this.edges+1;for(A$z=1;A$z<A$l;A$z++)A$R.push(A$k+2*(A$z-1),A$k+2*(A$z-1)+1,A$k+2*A$z+1,A$k+2*A$z+1,A$k+2*A$z,A$k+2*(A$z-1));return A$R.push(A$k+2*(A$z-1),A$k+2*(A$z-1)+1,A$k+1,A$k+1,A$k,A$k+2*(A$z-1)),A$U},A$H}(),A$JC=function(A$C){function A$o(A$C,A$R,A$j,A$w,A$T,A$G){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=A$W.create(),this._points=A$j.slice(0,A$j.length),A$o.__super.call(this,A$C,A$R,0,0,this._points.length/2,A$w,A$T,A$G)}A$M(A$o,"laya.webgl.shapes.Polygon",A$jC);var A$R=A$o.prototype;return A$R.rebuild=function(A$C){this._repaint||(this._points.length=0,this._points=this._points.concat(A$C))},A$R.setMatrix=function(A$C){A$C.copyTo(this._mat)},A$R.needUpdate=function(A$C){return this._repaint=this._mat.a==A$C.a&&this._mat.b==A$C.b&&this._mat.c==A$C.c&&this._mat.d==A$C.d&&this._mat.tx==A$C.tx&&this._mat.ty==A$C.ty,!this._repaint},A$R.getData=function(A$C,A$R,A$j){var A$w,A$T=0,A$G=this._points,A$o=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=A$j){for(this._start=A$j,A$w=[],A$o=this.earcutTriangles.length,A$T=0;A$T<A$o;A$T++)A$w.push(this.earcutTriangles[A$T]+A$j);this.mUint16Array=new Uint16Array(A$w)}}else{this._start=A$j,A$w=[];var A$U=[],A$t=[],A$I=this.color,A$e=(A$I>>16&255)/255,A$H=(A$I>>8&255)/255,A$M=(255&A$I)/255;for(A$o=Math.floor(A$G.length/2),A$T=0;A$T<A$o;A$T++)A$U.push(this.x+A$G[2*A$T],this.y+A$G[2*A$T+1],A$e,A$H,A$M),A$t.push(this.x+A$G[2*A$T],this.y+A$G[2*A$T+1]);for(this.earcutTriangles=A$wC.earcut(A$t,null,2),A$o=this.earcutTriangles.length,A$T=0;A$T<A$o;A$T++)A$w.push(this.earcutTriangles[A$T]+A$j);this.mUint16Array=new Uint16Array(A$w),this.mFloat32Array=new Float32Array(A$U)}A$C.append(this.mUint16Array),A$R.append(this.mFloat32Array)},A$o}(),A$NC=function(A$C){function A$G(){this._matrix=new A$W,this._matrix4=A$LC.defaultMatrix4.concat(),A$G.__super.call(this,1e4),this.shaderValue=new A$xC(0,0)}A$M(A$G,"laya.webgl.submit.SubmitCanvas",A$GC);var A$R=A$G.prototype;return A$R.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var A$C=A$ZC.worldAlpha,A$R=A$ZC.worldMatrix4,A$j=A$ZC.worldMatrix,A$w=A$ZC.worldFilters,A$T=A$ZC.worldShaderDefines,A$G=this.shaderValue,A$o=this._matrix,A$U=this._matrix4,A$t=A$W.TEMP;return A$W.mul(A$o,A$j,A$t),A$U[0]=A$t.a,A$U[1]=A$t.b,A$U[4]=A$t.c,A$U[5]=A$t.d,A$U[12]=A$t.tx,A$U[13]=A$t.ty,A$ZC.worldMatrix=A$t.clone(),A$ZC.worldMatrix4=A$U,A$ZC.worldAlpha=A$ZC.worldAlpha*A$G.alpha,A$G.filters&&A$G.filters.length&&(A$ZC.worldFilters=A$G.filters,A$ZC.worldShaderDefines=A$G.defines),this._ctx_src.flush(),A$ZC.worldAlpha=A$C,A$ZC.worldMatrix4=A$R,A$ZC.worldMatrix.destroy(),A$ZC.worldMatrix=A$j,A$ZC.worldFilters=A$w,A$ZC.worldShaderDefines=A$T,1},A$R.releaseRender=function(){var A$C=A$G._cache;this._ctx_src=null,A$C[A$C._length++]=this},A$R.getRenderType=function(){return 10003},A$G.create=function(A$C,A$R,A$j){var A$w=A$G._cache._length?A$G._cache[--A$G._cache._length]:new A$G;A$w._ctx_src=A$C;var A$T=A$w.shaderValue;return A$T.alpha=A$R,A$T.defines.setValue(0),A$j&&A$j.length&&A$T.setFilters(A$j),A$w},A$G._cache=((A$G._cache=[])._length=0,A$G._cache),A$G}(),A$aC=function(A$C){function A$I(A$C){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===A$C&&(A$C=1e4),A$I.__super.call(this,A$C)}A$M(A$I,"laya.webgl.submit.SubmitTexture",A$GC);var A$R=A$I.prototype;return A$R.releaseRender=function(){var A$C=A$I._cache;(A$C[A$C._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},A$R.addTexture=function(A$C,A$R){this._texsID[this._texs.length]=A$C._uvID,this._texs.push(A$C),this._vbPos.push(A$R)},A$R.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var A$C=this.shaderValue.textureHost.bitmap;if(null!==A$C)for(var A$R=this._vb.getFloat32Array(),A$j=0,A$w=this._texs.length;A$j<A$w;A$j++){var A$T=this._texs[A$j];A$T.active();var A$G=A$T.uv;if(this._texsID[A$j]!==A$T._uvID){this._texsID[A$j]=A$T._uvID;var A$o=this._vbPos[A$j];A$R[A$o+2]=A$G[0],A$R[A$o+3]=A$G[1],A$R[A$o+6]=A$G[2],A$R[A$o+7]=A$G[3],A$R[A$o+10]=A$G[4],A$R[A$o+11]=A$G[5],A$R[A$o+14]=A$G[6],A$R[A$o+15]=A$G[7],this._vb.setNeedUpload()}A$T.bitmap!==A$C&&(this._isSameTexture=!1)}}},A$R.renderSubmit=function(){if(0===this._numEle)return A$I._shaderSet=!1,1;var A$C=this.shaderValue.textureHost;if(A$C){var A$R=A$C.source;if(!A$C.bitmap||!A$R)return A$I._shaderSet=!1,1;this.shaderValue.texture=A$R,A$C.alphaTexture&&A$C.alphaTexture.source&&(this.shaderValue.texture1=A$C.alphaTexture.source)}this._vb.bind_upload(this._ib);var A$j=A$bC.mainContext;if(A$B.activeBlendFunction!==this._blendFn&&(A$j.enable(3042),this._blendFn(A$j),A$B.activeBlendFunction=this._blendFn),A$P.drawCall++,A$P.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&A$yC.activeShader&&A$I._shaderSet?(A$yC.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&A$yC.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),A$I._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var A$w=A$C.bitmap,A$T=0,A$G=A$yC.activeShader,A$o=0,A$U=this._texs.length;A$o<A$U;A$o++){var A$t=this._texs[A$o];A$t.bitmap===A$w&&A$o+1!==A$U||(A$G.uploadTexture2D(A$t.source),A$j.drawElements(4,6*(A$o-A$T+1),5123,this._startIdx+6*A$T*A$LC.BYTES_PIDX),A$w=A$t.bitmap,A$T=A$o)}else A$j.drawElements(4,this._numEle,5123,this._startIdx);return 1},A$I.create=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$I._cache._length?A$I._cache[--A$I._cache._length]:new A$I;null==A$j&&((A$j=A$G._selfVb||(A$G._selfVb=A$vC.create(-1))).clear(),A$w=0),A$G._ib=A$R,A$G._vb=A$j,A$G._startIdx=A$w*A$LC.BYTES_PIDX,A$G._numEle=0;var A$o=A$C._nBlendType;A$G._blendFn=A$C._targets?A$B.targetFns[A$o]:A$B.fns[A$o],A$G.shaderValue=A$T,A$G.shaderValue.setValue(A$C._shader2D);var A$U=A$C._shader2D.filters;return A$U&&A$G.shaderValue.setFilters(A$U),A$G},A$I._cache=((A$I._cache=[])._length=0,A$I._cache),A$I._shaderSet=!0,A$I}(),A$nC=function(A$C){function A$Q(){A$Q.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}A$M(A$Q,"laya.webgl.utils.MeshTexture",A$QC);var A$R=A$Q.prototype;return A$R.addData=function(A$C,A$R,A$j,A$w,A$T,A$G){for(var A$o=A$C.length/2,A$U=this._vb.needSize(A$o*A$Q.const_stride)>>2,A$t=this._vb.getFloat32Array(),A$I=0,A$e=0;A$e<A$o;A$e++){var A$H=A$C[A$I],A$M=A$C[A$I+1],A$K=A$H*A$w.a+A$M*A$w.c+A$w.tx,A$F=A$H*A$w.b+A$M*A$w.d+A$w.ty;A$t[A$U++]=A$K,A$t[A$U++]=A$F,A$t[A$U++]=A$R[A$I],A$t[A$U++]=A$R[A$I+1],A$I+=2}this._vb.setNeedUpload();var A$L=this.vertNum;if(0<A$L){(A$o=A$j.length)>A$Q.tmpIdx.length&&(A$Q.tmpIdx=new Uint16Array(A$o));for(var A$D=0;A$D<A$o;A$D++)A$Q.tmpIdx[A$D]=A$j[A$D]+A$L;this._ib.appendU16Array(A$Q.tmpIdx,A$j.length)}else this._ib.append(A$j);this._ib.setNeedUpload(),this.vertNum+=A$o,this.indexNum+=A$j.length},A$R.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},A$R.destroy=function(){this._ib.destroy(),this._vb.destroy()},A$Q.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new A$Q},A$Q.const_stride=16,A$Q._POOL=[],A$o(A$Q,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),A$Q}(),A$yC=function(A$C){function A$R(){A$R.__super.call(this),this.lock=!0}return A$M(A$R,"laya.webgl.shader.BaseShader",A$S),A$R.activeShader=null,A$R.bindShader=null,A$R}(),A$mC=function(A$R){function A$e(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===A$j&&(A$j=6408),void 0===A$w&&(A$w=5121),void 0===A$T&&(A$T=34041),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=-1),void 0===A$t&&(A$t=-1),this._type=1,this._w=A$C,this._h=A$R,this._surfaceFormat=A$j,this._surfaceType=A$w,this._depthStencilFormat=A$T,A$Q.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=A$G,this._repeat=A$o,this._minFifter=A$U,this._magFifter=A$t,this._createWebGLRenderTarget(),this.bitmap.lock=!0,A$e.__super.call(this,this.bitmap,A$n.INV_UV)}A$M(A$e,"laya.webgl.resource.RenderTarget2D",A$R);var A$C=A$e.prototype;return A$p.imps(A$C,{"laya.resource.IDispose":!0}),A$C.getType=function(){return this._type},A$C.getTexture=function(){return this},A$C.size=function(A$C,A$R){this._w==A$C&&this._h==A$R||(this._w=A$C,this._h=A$R,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},A$C.release=function(){this.destroy()},A$C.recycle=function(){A$e.POOL.push(this)},A$C.start=function(){var A$C=A$bC.mainContext;return this._preRenderTarget=A$ZC.curRenderTarget,A$ZC.curRenderTarget=this,A$C.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(A$C.viewport(0,0,this._w,this._h),this._svWidth=A$ZC.width,this._svHeight=A$ZC.height,A$ZC.width=this._w,A$ZC.height=this._h,A$yC.activeShader=null),this},A$C.clear=function(A$C,A$R,A$j,A$w){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=1);var A$T=A$bC.mainContext;A$T.clearColor(A$C,A$R,A$j,A$w);var A$G=16384;switch(this._depthStencilFormat){case 33189:A$G|=256;break;case 36168:A$G|=1024;break;case 34041:A$G|=256,A$G|=1024}A$T.clear(A$G)},A$C.end=function(){var A$C=A$bC.mainContext;A$C.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,A$ZC.curRenderTarget=this._preRenderTarget,1==this._type?(A$C.viewport(0,0,this._svWidth,this._svHeight),A$ZC.width=this._svWidth,A$ZC.height=this._svHeight,A$yC.activeShader=null):A$C.viewport(0,0,A$p.stage.width,A$p.stage.height)},A$C.getData=function(A$C,A$R,A$j,A$w){var A$T=A$bC.mainContext;if(A$T.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===A$T.checkFramebufferStatus(36160)))return A$T.bindFramebuffer(36160,null),null;var A$G=new Uint8Array(this._w*this._h*4);return A$T.readPixels(A$C,A$R,A$j,A$w,this._surfaceFormat,this._surfaceType,A$G),A$T.bindFramebuffer(36160,null),A$G},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,A$R.prototype.destroy.call(this))},A$C.dispose=function(){},A$C._createWebGLRenderTarget=function(){this.bitmap=new A$sC(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(A$C){this.event("recovered")})},A$w(0,A$C,"surfaceFormat",function(){return this._surfaceFormat}),A$w(0,A$C,"magFifter",function(){return this._magFifter}),A$w(0,A$C,"surfaceType",function(){return this._surfaceType}),A$w(0,A$C,"mipMap",function(){return this._mipMap}),A$w(0,A$C,"depthStencilFormat",function(){return this._depthStencilFormat}),A$w(0,A$C,"minFifter",function(){return this._minFifter}),A$w(0,A$C,"source",function(){return this._alreadyResolved?A$p.superGet(A$n,this,"source"):null}),A$e.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){void 0===A$j&&(A$j=6408),void 0===A$w&&(A$w=5121),void 0===A$T&&(A$T=34041),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=-1),void 0===A$t&&(A$t=-1);var A$I=A$e.POOL.pop();return A$I||(A$I=new A$e(A$C,A$R)),A$I.bitmap&&A$I._w==A$C&&A$I._h==A$R&&A$I._surfaceFormat==A$j&&A$I._surfaceType==A$w&&A$I._depthStencilFormat==A$T&&A$I._mipMap==A$G&&A$I._repeat==A$o&&A$I._minFifter==A$U&&A$I._magFifter==A$t||(A$I._w=A$C,A$I._h=A$R,A$I._surfaceFormat=A$j,A$I._surfaceType=A$w,A$I._depthStencilFormat=A$T,A$Q.isConchWebGL&&34041===A$I._depthStencilFormat&&(A$I._depthStencilFormat=33189),A$I._mipMap=A$G,A$I._repeat=A$o,A$I._minFifter=A$U,A$I._magFifter=A$t,A$I.release(),A$I._createWebGLRenderTarget()),A$I},A$e.TYPE2D=1,A$e.TYPE3D=2,A$e.POOL=[],A$e}(A$n),A$kC=function(A$C){function A$R(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,A$R.__super.call(this),A$R._gl=A$bC.mainContext}A$M(A$R,"laya.webgl.utils.Buffer",A$S);var A$j=A$R.prototype;return A$j._bind=function(){this.activeResource(),A$R._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(A$R._bindVertexBuffer=this._glBuffer),A$R._gl.bindBuffer(this._bufferType,A$R._bindActive[this._bufferType]=this._glBuffer),A$yC.activeShader=null)},A$j.recreateResource=function(){this._glBuffer||(this._glBuffer=A$R._gl.createBuffer()),this.completeCreate()},A$j.disposeResource=function(){this._glBuffer&&(A$bC.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},A$w(0,A$j,"bufferUsage",function(){return this._bufferUsage}),A$R._gl=null,A$R._bindActive={},A$R._bindVertexBuffer=null,A$R._enableAtributes=[],A$R}(),A$VC=function(A$C){function A$j(A$C){this.texcoord=null,this.offsetX=300,this.offsetY=0,A$j.__super.call(this,512,0);var A$R=8*A$LC.BYTES_PE;this.position=[2,5126,!1,A$R,0],this.texcoord=[2,5126,!1,A$R,2*A$LC.BYTES_PE],this.color=[4,5126,!1,A$R,4*A$LC.BYTES_PE]}return A$M(A$j,"laya.webgl.shader.d2.skinAnishader.SkinSV",A$xC),A$j}(),A$zC=function(A$C){function A$R(A$C){A$R.__super.call(this,2,0),this.color=[]}return A$M(A$R,"laya.webgl.shader.d2.value.Color2dSV",A$xC),A$R.prototype.setValue=function(A$C){A$C.fillStyle&&(this.color=A$C.fillStyle._color._color),A$C.strokeStyle&&(this.color=A$C.strokeStyle._color._color)},A$R}(),A$lC=function(A$C){function A$R(A$C){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=A$xC._TEXCOORD,A$R.__super.call(this,256,0)}A$M(A$R,"laya.webgl.shader.d2.value.FillTextureSV",A$xC);var A$j=A$R.prototype;return A$j.setValue=function(A$C){this.ALPHA=A$C.ALPHA,A$C.filters&&this.setFilters(A$C.filters)},A$j.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},A$R}(),A$gC=function(A$C){function A$R(A$C){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=A$xC._TEXCOORD,void 0===A$C&&(A$C=0),A$R.__super.call(this,1,A$C)}A$M(A$R,"laya.webgl.shader.d2.value.TextureSV",A$xC);var A$j=A$R.prototype;return A$j.setValue=function(A$C){this.ALPHA=A$C.ALPHA,A$C.filters&&this.setFilters(A$C.filters)},A$j.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},A$R}(),A$BC=function(A$C){function A$R(A$C){this.a_color=null,this.u_pos=[0,0],A$R.__super.call(this,4,0),this.position=[2,5126,!1,5*A$LC.BYTES_PE,0],this.a_color=[3,5126,!1,5*A$LC.BYTES_PE,2*A$LC.BYTES_PE]}return A$M(A$R,"laya.webgl.shader.d2.value.PrimitiveSV",A$xC),A$R}(),A$iC=function(A$C){function A$R(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,A$R.__super.call(this)}A$M(A$R,"laya.webgl.atlas.AtlasWebGLCanvas",A$C);var A$j=A$R.prototype;return A$j.recreateResource=function(){var A$C=A$bC.mainContext,A$R=this._source=A$C.createTexture(),A$j=A$fC.curBindTexTarget,A$w=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,A$R),A$C.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),A$C.texParameteri(3553,10241,9729),A$C.texParameteri(3553,10240,9729),A$C.texParameteri(3553,10242,33071),A$C.texParameteri(3553,10243,33071),A$j&&A$w&&A$fC.bindTexture(A$C,A$j,A$w),this.memorySize=this._w*this._h*4,this.completeCreate()},A$j.disposeResource=function(){this._source&&(A$bC.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},A$j.texSubImage2D=function(A$C,A$R,A$j){if(A$Q.isFlash){this._flashCacheImage||(this._flashCacheImage=A$L.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var A$w=A$j.bitmapdata;this._flashCacheImage._image.copyPixels(A$w,0,0,A$w.width,A$w.height,A$C,A$R),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var A$T=A$bC.mainContext,A$G=A$fC.curBindTexTarget,A$o=A$fC.curBindTexValue;A$fC.bindTexture(A$T,3553,this._source),A$T.pixelStorei(37441,!0),0<=A$C-1&&A$T.texSubImage2D(3553,0,A$C-1,A$R,6408,5121,A$j),A$C+1<=this._w&&A$T.texSubImage2D(3553,0,A$C+1,A$R,6408,5121,A$j),0<=A$R-1&&A$T.texSubImage2D(3553,0,A$C,A$R-1,6408,5121,A$j),A$R+1<=this._h&&A$T.texSubImage2D(3553,0,A$C,A$R+1,6408,5121,A$j),A$T.texSubImage2D(3553,0,A$C,A$R,6408,5121,A$j),A$T.pixelStorei(37441,!1),A$G&&A$o&&A$fC.bindTexture(A$T,A$G,A$o)}},A$j.texSubImage2DPixel=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$bC.mainContext,A$o=A$fC.curBindTexTarget,A$U=A$fC.curBindTexValue;A$fC.bindTexture(A$G,3553,this._source);var A$t=new Uint8Array(A$T.data);A$G.pixelStorei(37441,!0),A$G.texSubImage2D(3553,0,A$C,A$R,A$j,A$w,6408,5121,A$t),A$G.pixelStorei(37441,!1),A$o&&A$U&&A$fC.bindTexture(A$G,A$o,A$U)},A$w(0,A$j,"width",A$C.prototype._$get_width,function(A$C){this._w=A$C}),A$w(0,A$j,"height",A$C.prototype._$get_height,function(A$C){this._h=A$C}),A$R}(A$j),A$_C=function(A$C){function A$T(){this.flipY=!0,this.alwaysChange=!1,A$T.__super.call(this)}A$M(A$T,"laya.webgl.resource.WebGLCanvas",A$j);var A$R=A$T.prototype;return A$R.getCanvas=function(){return this._canvas},A$R.clear=function(){this._ctx&&this._ctx.clear()},A$R.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},A$R._setContext=function(A$C){this._ctx=A$C},A$R.getContext=function(A$C,A$R){return this._ctx?this._ctx:this._ctx=A$T._createContext(this)},A$R.size=function(A$C,A$R){this._w==A$C&&this._h==A$R||(this._w=A$C,this._h=A$R,this._ctx&&this._ctx.size(A$C,A$R),this._canvas&&(this._canvas.height=A$R,this._canvas.width=A$C))},A$R.activeResource=function(A$C){void 0===A$C&&(A$C=!1),this._source||this.recreateResource()},A$R.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},A$R.disposeResource=function(){this._source&&!this.iscpuSource&&(A$bC.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},A$R.createWebGlTexture=function(){var A$C=A$bC.mainContext;this._canvas;var A$R=this._source=A$C.createTexture();this.iscpuSource=!1;var A$j=A$fC.curBindTexTarget,A$w=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,A$R),A$C.pixelStorei(37440,this.flipY?1:0),A$T.premulAlpha&&A$C.pixelStorei(37441,!0),A$C.texImage2D(3553,0,6408,6408,5121,this._imgData),A$T.premulAlpha&&A$C.pixelStorei(37441,!1),A$C.texParameteri(3553,10240,9729),A$C.texParameteri(3553,10241,9729),A$C.texParameteri(3553,10242,33071),A$C.texParameteri(3553,10243,33071),A$C.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,A$j&&A$w&&A$fC.bindTexture(A$C,A$j,A$w)},A$R.reloadCanvasData=function(){var A$C=A$bC.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var A$R=A$fC.curBindTexTarget,A$j=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,this._source),A$T.premulAlpha&&A$C.pixelStorei(37441,!0),A$C.texImage2D(3553,0,6408,6408,5121,this._imgData),A$T.premulAlpha&&A$C.pixelStorei(37441,!1),A$C.pixelStorei(37440,0),A$R&&A$j&&A$fC.bindTexture(A$C,A$R,A$j)},A$R.texSubImage2D=function(A$C,A$R,A$j){var A$w=A$bC.mainContext,A$T=A$fC.curBindTexTarget,A$G=A$fC.curBindTexValue;A$fC.bindTexture(A$w,3553,this._source),A$w.pixelStorei(37441,!0),A$w.texSubImage2D(3553,0,A$R,A$j,6408,5121,A$C._source),A$w.pixelStorei(37441,!1),A$T&&A$G&&A$fC.bindTexture(A$w,A$T,A$G)},A$R.toBase64=function(A$C,A$R,A$j){var A$w=null;this._canvas&&(A$w=this._canvas.toDataURL(A$C,A$R)),A$j.call(this,A$w)},A$w(0,A$R,"context",function(){return this._ctx}),A$w(0,A$R,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),A$w(0,A$R,"asBitmap",null,function(A$C){this._ctx&&(this._ctx.asBitmap=A$C)}),A$T._createContext=null,A$T.premulAlpha=!1,A$T}(),A$uC=function(A$C){function A$G(A$C,A$R){this.CborderSize=12,A$G.__super.call(this),this.char=A$C,this.isSpace=" "===A$C,this.xs=A$R.scaleX,this.ys=A$R.scaleY,this.font=A$R.font.toString(),this.fontSize=A$R.font.size,this.fillColor=A$R.fillColor,this.borderColor=A$R.borderColor,this.lineWidth=A$R.lineWidth,this.underLine=A$R.underLine;var A$j,A$w=A$Q.isConchApp;A$w?((A$j=ConchTextCanvas)._source=ConchTextCanvas,A$j._source.canvas=ConchTextCanvas):A$j=A$K.canvas.source,this.canvas=A$j,this._enableMerageInAtlas=!0,this._ctx=A$w?A$j:this.canvas.getContext("2d",void 0);var A$T=A$y.measureText(this.char,this.font);this.cw=A$T.width*this.xs,this.ch=(A$T.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new A$n(this)}A$M(A$G,"laya.webgl.resource.WebGLCharImage",A$j);var A$R=A$G.prototype;return A$p.imps(A$R,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),A$R.active=function(){this.texture.active()},A$R.recreateResource=function(){var A$C=A$Q.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),A$C){var A$R=this.fontSize;1==this.xs&&1==this.ys||(A$R=parseInt(A$R*(this.xs>this.ys?this.xs:this.ys)+""));var A$j="normal 100 "+this.font;A$j=A$j.replace(A$G._fontSizeReg,A$R),this.borderColor&&(A$j+=" 1 "+this.borderColor),this._ctx.font=A$j,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,A$a.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var A$w=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(A$w,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},A$R.onresize=function(A$C,A$R){this._w=A$C,this._h=A$R,this._allowMerageInAtlas=!0},A$R.clearAtlasSource=function(){},A$w(0,A$R,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),A$w(0,A$R,"atlasSource",function(){return this.canvas}),A$w(0,A$R,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(A$C){this._enableMerageInAtlas=A$C}),A$G.createOneChar=function(A$C,A$R){return new A$G(A$C,A$R)},A$G._fontSizeReg=new RegExp("\\d+(?=px)","g"),A$G}(),A$sC=function(A$C){function A$I(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){void 0===A$j&&(A$j=6408),void 0===A$w&&(A$w=5121),void 0===A$T&&(A$T=34041),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=-1),void 0===A$t&&(A$t=1),A$I.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=A$C,this._h=A$R,this._surfaceFormat=A$j,this._surfaceType=A$w,this._depthStencilFormat=A$T,this._mipMap=A$G,this._repeat=A$o,this._minFifter=A$U,this._magFifter=A$t}A$M(A$I,"laya.webgl.resource.WebGLRenderTarget",A$j);var A$R=A$I.prototype;return A$R.recreateResource=function(){var A$C=A$bC.mainContext;this._frameBuffer||(this._frameBuffer=A$C.createFramebuffer()),this._source||(this._source=A$C.createTexture());var A$R=A$fC.curBindTexTarget,A$j=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,this._source),A$C.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var A$w=this._minFifter,A$T=this._magFifter,A$G=this._repeat?10497:33071,A$o=A$e.isPOT(this._w,this._h);if(A$o?(this._mipMap?-1!==A$w||(A$w=9987):-1!==A$w||(A$w=9729),-1!==A$T||(A$T=9729),A$C.texParameteri(3553,10241,A$w),A$C.texParameteri(3553,10240,A$T),A$C.texParameteri(3553,10242,A$G),A$C.texParameteri(3553,10243,A$G),this._mipMap&&A$C.generateMipmap(3553)):(-1!==A$w||(A$w=9729),-1!==A$T||(A$T=9729),A$C.texParameteri(3553,10241,A$w),A$C.texParameteri(3553,10240,A$T),A$C.texParameteri(3553,10242,33071),A$C.texParameteri(3553,10243,33071)),A$C.bindFramebuffer(36160,this._frameBuffer),A$C.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=A$C.createRenderbuffer()),A$C.bindRenderbuffer(36161,this._depthStencilBuffer),A$C.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:A$C.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:A$C.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:A$C.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}A$C.bindFramebuffer(36160,null),A$R&&A$j&&A$fC.bindTexture(A$C,A$R,A$j),A$C.bindRenderbuffer(36161,null),A$o&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},A$R.disposeResource=function(){this._frameBuffer&&(A$bC.mainContext.deleteTexture(this._source),A$bC.mainContext.deleteFramebuffer(this._frameBuffer),A$bC.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},A$w(0,A$R,"depthStencilBuffer",function(){return this._depthStencilBuffer}),A$w(0,A$R,"frameBuffer",function(){return this._frameBuffer}),A$I}(),A$cC=function(A$C){function A$U(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this.offsetX=0,this.offsetY=0,A$U.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=A$G,this.canvas=A$C,this._ctx=A$C.getContext("2d",void 0),this._w=A$w,this._h=A$T,this.offsetX=A$R,this.offsetY=A$j,this.src=A$o,this._enableMerageInAtlas=!0,A$l.enabled&&this._w<A$l.atlasLimitWidth&&this._h<A$l.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}A$M(A$U,"laya.webgl.resource.WebGLSubImage",A$j);var A$R=A$U.prototype;return A$p.imps(A$R,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),A$R.size=function(A$C,A$R){this._w=A$C,this._h=A$R,this._ctx&&this._ctx.size(A$C,A$R),this.canvas&&(this.canvas.height=A$R,this.canvas.width=A$C)},A$R.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},A$R.createWebGlTexture=function(){var A$C=A$bC.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var A$R=this._source=A$C.createTexture(),A$j=A$fC.curBindTexTarget,A$w=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,A$R),A$C.pixelStorei(37441,!0),A$C.texImage2D(3553,0,6408,6408,5121,this.canvas),A$C.pixelStorei(37441,!1);var A$T=this.minFifter,A$G=this.magFifter,A$o=this.repeat?10497:33071,A$U=A$e.isPOT(this.width,this.height);A$U?(this.mipmap?-1!==A$T||(A$T=9987):-1!==A$T||(A$T=9729),-1!==A$G||(A$G=9729),A$C.texParameteri(3553,10240,A$G),A$C.texParameteri(3553,10241,A$T),A$C.texParameteri(3553,10242,A$o),A$C.texParameteri(3553,10243,A$o),this.mipmap&&A$C.generateMipmap(3553)):(-1!==A$T||(A$T=9729),-1!==A$G||(A$G=9729),A$C.texParameteri(3553,10241,A$T),A$C.texParameteri(3553,10240,A$G),A$C.texParameteri(3553,10242,33071),A$C.texParameteri(3553,10243,33071)),A$j&&A$w&&A$fC.bindTexture(A$C,A$j,A$w),this.canvas=null,A$U&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},A$R.disposeResource=function(){A$l.enabled&&this._allowMerageInAtlas||!this._source||(A$bC.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},A$R.clearAtlasSource=function(){},A$w(0,A$R,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),A$w(0,A$R,"atlasSource",function(){return this.canvas}),A$w(0,A$R,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(A$C){this._allowMerageInAtlas=A$C}),A$U}(),A$XC=function(A$C){function A$I(A$C,A$R,A$j,A$w){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,A$I.__super.call(this),!A$C||!A$R)throw"Shader Error";this._id=++A$I._count,this._vs=A$C,this._ps=A$R,this._nameMap=A$w||{},null!=A$j&&(A$I.sharders[A$j]=this)}A$M(A$I,"laya.webgl.shader.Shader",A$yC);var A$R=A$I.prototype;return A$R.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},A$R.disposeResource=function(){A$bC.mainContext.deleteShader(this._vshader),A$bC.mainContext.deleteShader(this._pshader),A$bC.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},A$R._compile=function(){if(!A$bC.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var A$C=[this._vs,this._ps],A$R=A$bC.mainContext;if(this._program=A$R.createProgram(),this._vshader=A$I._createShader(A$R,A$C[0],35633),this._pshader=A$I._createShader(A$R,A$C[1],35632),A$R.attachShader(this._program,this._vshader),A$R.attachShader(this._program,this._pshader),A$R.linkProgram(this._program),!A$Q.isConchApp&&!A$R.getProgramParameter(this._program,35714))throw A$R.getProgramInfoLog(this._program);var A$j,A$w,A$T=0,A$G=0;for(A$G=A$Q.isConchApp?A$R.getProgramParameterEx(this._vs,this._ps,"",35721):A$R.getProgramParameter(this._program,35721),A$T=0;A$T<A$G;A$T++){var A$o=null;A$j={vartype:"attribute",glfun:null,ivartype:0,attrib:A$o=A$Q.isConchApp?A$R.getActiveAttribEx(this._vs,this._ps,"",A$T):A$R.getActiveAttrib(this._program,A$T),location:A$R.getAttribLocation(this._program,A$o.name),name:A$o.name,type:A$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(A$j)}var A$U=0;for(A$U=A$Q.isConchApp?A$R.getProgramParameterEx(this._vs,this._ps,"",35718):A$R.getProgramParameter(this._program,35718),A$T=0;A$T<A$U;A$T++){var A$t=null;A$t=A$Q.isConchApp?A$R.getActiveUniformEx(this._vs,this._ps,"",A$T):A$R.getActiveUniform(this._program,A$T),0<(A$j={vartype:"uniform",glfun:null,ivartype:1,attrib:A$o,location:A$R.getUniformLocation(this._program,A$t.name),name:A$t.name,type:A$t.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(A$j.name=A$j.name.substr(0,A$j.name.length-3),A$j.isArray=!0,A$j.location=A$R.getUniformLocation(this._program,A$j.name)),this._params.push(A$j)}for(A$T=0,A$w=this._params.length;A$T<A$w;A$T++)if((A$j=this._params[A$T]).indexOfParams=A$T,A$j.index=1,A$j.value=[A$j.location,null],A$j.codename=A$j.name,A$j.name=this._nameMap[A$j.codename]?this._nameMap[A$j.codename]:A$j.codename,(this._paramsMap[A$j.name]=A$j)._this=this,A$j.uploadedValue=[],"attribute"!==A$j.vartype)switch(A$j.type){case 5124:A$j.fun=A$j.isArray?this._uniform1iv:this._uniform1i;break;case 5126:A$j.fun=A$j.isArray?this._uniform1fv:this._uniform1f;break;case 35664:A$j.fun=A$j.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:A$j.fun=A$j.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:A$j.fun=A$j.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:A$j.fun=this._uniform_sampler2D;break;case 35680:A$j.fun=this._uniform_samplerCube;break;case 35676:A$j.glfun=A$R.uniformMatrix4fv,A$j.fun=this._uniformMatrix4fv;break;case 35670:A$j.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else A$j.fun=this._attribute}},A$R.getUniform=function(A$C){return this._paramsMap[A$C]},A$R._attribute=function(A$C,A$R){var A$j=A$bC.mainContext,A$w=A$kC._enableAtributes,A$T=A$C.location;return A$w[A$T]||A$j.enableVertexAttribArray(A$T),A$j.vertexAttribPointer(A$T,A$R[0],A$R[1],A$R[2],A$R[3],A$R[4]+this._offset),A$w[A$T]=A$kC._bindVertexBuffer,1},A$R._uniform1f=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R?(A$bC.mainContext.uniform1f(A$C.location,A$j[0]=A$R),1):0},A$R._uniform1fv=function(A$C,A$R){if(A$R.length<4){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$bC.mainContext.uniform1fv(A$C.location,A$R),A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3],1):0}return A$bC.mainContext.uniform1fv(A$C.location,A$R),1},A$R._uniform_vec2=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]?(A$bC.mainContext.uniform2f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1]),1):0},A$R._uniform_vec2v=function(A$C,A$R){if(A$R.length<2){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$bC.mainContext.uniform2fv(A$C.location,A$R),A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3],1):0}return A$bC.mainContext.uniform2fv(A$C.location,A$R),1},A$R._uniform_vec3=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]?(A$bC.mainContext.uniform3f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2]),1):0},A$R._uniform_vec3v=function(A$C,A$R){return A$bC.mainContext.uniform3fv(A$C.location,A$R),1},A$R._uniform_vec4=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$bC.mainContext.uniform4f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3]),1):0},A$R._uniform_vec4v=function(A$C,A$R){return A$bC.mainContext.uniform4fv(A$C.location,A$R),1},A$R._uniformMatrix2fv=function(A$C,A$R){return A$bC.mainContext.uniformMatrix2fv(A$C.location,!1,A$R),1},A$R._uniformMatrix3fv=function(A$C,A$R){return A$bC.mainContext.uniformMatrix3fv(A$C.location,!1,A$R),1},A$R._uniformMatrix4fv=function(A$C,A$R){return A$bC.mainContext.uniformMatrix4fv(A$C.location,!1,A$R),1},A$R._uniform1i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R?(A$bC.mainContext.uniform1i(A$C.location,A$j[0]=A$R),1):0},A$R._uniform1iv=function(A$C,A$R){return A$bC.mainContext.uniform1iv(A$C.location,A$R),1},A$R._uniform_ivec2=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]?(A$bC.mainContext.uniform2i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1]),1):0},A$R._uniform_ivec2v=function(A$C,A$R){return A$bC.mainContext.uniform2iv(A$C.location,A$R),1},A$R._uniform_vec3i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]?(A$bC.mainContext.uniform3i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2]),1):0},A$R._uniform_vec3vi=function(A$C,A$R){return A$bC.mainContext.uniform3iv(A$C.location,A$R),1},A$R._uniform_vec4i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$bC.mainContext.uniform4i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3]),1):0},A$R._uniform_vec4vi=function(A$C,A$R){return A$bC.mainContext.uniform4iv(A$C.location,A$R),1},A$R._uniform_sampler2D=function(A$C,A$R){var A$j=A$bC.mainContext,A$w=A$C.uploadedValue;return null==A$w[0]?(A$w[0]=this._curActTexIndex,A$j.uniform1i(A$C.location,this._curActTexIndex),A$j.activeTexture(A$I._TEXTURES[this._curActTexIndex]),A$fC.bindTexture(A$j,3553,A$R),this._curActTexIndex++,1):(A$j.activeTexture(A$I._TEXTURES[A$w[0]]),A$fC.bindTexture(A$j,3553,A$R),0)},A$R._uniform_samplerCube=function(A$C,A$R){var A$j=A$bC.mainContext,A$w=A$C.uploadedValue;return null==A$w[0]?(A$w[0]=this._curActTexIndex,A$j.uniform1i(A$C.location,this._curActTexIndex),A$j.activeTexture(A$I._TEXTURES[this._curActTexIndex]),A$fC.bindTexture(A$j,34067,A$R),this._curActTexIndex++,1):(A$j.activeTexture(A$I._TEXTURES[A$w[0]]),A$fC.bindTexture(A$j,34067,A$R),0)},A$R._noSetValue=function(A$C){console.log("no....:"+A$C.name)},A$R.uploadOne=function(A$C,A$R){this.activeResource(),A$fC.UseProgram(this._program);var A$j=this._paramsMap[A$C];A$j.fun.call(this,A$j,A$R)},A$R.uploadTexture2D=function(A$C){A$P.shaderCall++;var A$R=A$bC.mainContext;A$R.activeTexture(33984),A$fC.bindTexture(A$R,3553,A$C)},A$R.uploadTexture2D1=function(A$C){A$P.shaderCall++;var A$R=A$bC.mainContext;A$R.activeTexture(33985),A$fC.bindTexture(A$R,3553,A$C)},A$R.upload=function(A$C,A$R){A$yC.activeShader=A$yC.bindShader=this,this._lastUseFrameCount===A$P.loopCount||this.activeResource(),A$fC.UseProgram(this._program),this._reCompile?(A$R=this._params,this._reCompile=!1):A$R=A$R||this._params;A$bC.mainContext;for(var A$j,A$w,A$T=A$R.length,A$G=0,A$o=0;A$o<A$T;A$o++)null!==(A$w=A$C[(A$j=A$R[A$o]).name])&&(A$G+=A$j.fun.call(this,A$j,A$w));A$P.shaderCall+=A$G},A$R.uploadArray=function(A$C,A$R,A$j){A$yC.activeShader=this,(A$yC.bindShader=this).activeResource(),A$fC.UseProgram(this._program);this._params;for(var A$w,A$T,A$G=0,A$o=A$R-2;0<=A$o;A$o-=2)(A$T=this._paramsMap[A$C[A$o]])&&null!=(A$w=A$C[A$o+1])&&(A$j&&A$j[A$T.name]&&A$j[A$T.name].bind(),A$G+=A$T.fun.call(this,A$T,A$w));A$P.shaderCall+=A$G},A$R.getParams=function(){return this._params},A$I.getShader=function(A$C){return A$I.sharders[A$C]},A$I.create=function(A$C,A$R,A$j,A$w){return new A$I(A$C,A$R,A$j,A$w)},A$I.withCompile=function(A$C,A$R,A$j,A$w){if(A$j&&A$I.sharders[A$j])return A$I.sharders[A$j];var A$T=A$I._preCompileShader[2e-4*A$C];if(!A$T)throw new Error("withCompile shader err!"+A$C);return A$T.createShader(A$R,A$j,A$w)},A$I.withCompile2D=function(A$C,A$R,A$j,A$w,A$T){if(A$w&&A$I.sharders[A$w])return A$I.sharders[A$w];var A$G=A$I._preCompileShader[2e-4*A$C+A$R];if(!A$G)throw new Error("withCompile shader err!"+A$C+" "+A$R);return A$G.createShader(A$j,A$w,A$T)},A$I.addInclude=function(A$C,A$R){A$SC.addInclude(A$C,A$R)},A$I.preCompile=function(A$C,A$R,A$j,A$w){var A$T=2e-4*A$C;A$I._preCompileShader[A$T]=new A$SC(A$T,A$R,A$j,A$w)},A$I.preCompile2D=function(A$C,A$R,A$j,A$w,A$T){var A$G=2e-4*A$C+A$R;A$I._preCompileShader[A$G]=new A$SC(A$G,A$j,A$w,A$T)},A$I._createShader=function(A$C,A$R,A$j){var A$w=A$C.createShader(A$j);return A$C.shaderSource(A$w,A$R),A$C.compileShader(A$w),A$w},A$I._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],A$I._count=0,A$I._preCompileShader={},A$I.SHADERNAME2ID=2e-4,A$I.sharders=((A$I.sharders=[]).length=32,A$I.sharders),A$o(A$I,["nameKey",function(){return this.nameKey=new A$J}]),A$I}(),A$YC=function(A$C){function A$R(){this._maxsize=0,this._upload=!0,this._uploadSize=0,A$R.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}A$M(A$R,"laya.webgl.utils.Buffer2D",A$C);var A$j=A$R.prototype;return A$j.needSize=function(A$C){var A$R=this._byteLength;if(A$C){var A$j=this._byteLength+A$C;A$j<=this._buffer.byteLength||this._resizeBuffer(A$j<<1,!0),this._byteLength=A$j}return A$R},A$j._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),A$P.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,A$kC._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),A$kC._gl.bufferSubData(this._bufferType,0,this._buffer)},A$j._bufferSubData=function(A$C,A$R,A$j){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),this._maxsize=Math.max(this._maxsize,this._byteLength),A$P.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,A$kC._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),A$R||A$j){var A$w=this._buffer.slice(A$R,A$j);A$kC._gl.bufferSubData(this._bufferType,A$C,A$w)}else A$kC._gl.bufferSubData(this._bufferType,A$C,this._buffer)},A$j._checkArrayUse=function(){},A$j._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},A$j._bind_subUpload=function(A$C,A$R,A$j){return void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(A$C,A$R,A$j),!0)},A$j._resizeBuffer=function(A$C,A$R){if(A$C<this._buffer.byteLength)return this;if(this.memorySize=A$C,A$R&&this._buffer&&0<this._buffer.byteLength){var A$j=new ArrayBuffer(A$C);new Uint8Array(A$j).set(new Uint8Array(this._buffer),0),this._buffer=A$j}else this._buffer=new ArrayBuffer(A$C);return this._checkArrayUse(),this._upload=!0,this},A$j.append=function(A$C){this._upload=!0;var A$R,A$j;A$R=A$C.byteLength,A$C instanceof Uint8Array?(this._resizeBuffer(this._byteLength+A$R,!0),A$j=new Uint8Array(this._buffer,this._byteLength)):A$C instanceof Uint16Array?(this._resizeBuffer(this._byteLength+A$R,!0),A$j=new Uint16Array(this._buffer,this._byteLength)):A$C instanceof Float32Array&&(this._resizeBuffer(this._byteLength+A$R,!0),A$j=new Float32Array(this._buffer,this._byteLength)),A$j.set(A$C,0),this._byteLength+=A$R,this._checkArrayUse()},A$j.appendU16Array=function(A$C,A$R){this._resizeBuffer(this._byteLength+2*A$R,!0);for(var A$j=new Uint16Array(this._buffer,this._byteLength,A$R),A$w=0;A$w<A$R;A$w++)A$j[A$w]=A$C[A$w];this._byteLength+=2*A$R,this._checkArrayUse()},A$j.appendEx=function(A$C,A$R){this._upload=!0;var A$j;A$j=A$C.byteLength,this._resizeBuffer(this._byteLength+A$j,!0),new A$R(this._buffer,this._byteLength).set(A$C,0),this._byteLength+=A$j,this._checkArrayUse()},A$j.appendEx2=function(A$C,A$R,A$j,A$w){void 0===A$w&&(A$w=1),this._upload=!0;var A$T,A$G;A$T=A$j*A$w,this._resizeBuffer(this._byteLength+A$T,!0),A$G=new A$R(this._buffer,this._byteLength);var A$o=0;for(A$o=0;A$o<A$j;A$o++)A$G[A$o]=A$C[A$o];this._byteLength+=A$T,this._checkArrayUse()},A$j.getBuffer=function(){return this._buffer},A$j.setNeedUpload=function(){this._upload=!0},A$j.getNeedUpload=function(){return this._upload},A$j.upload=function(){var A$C=this._bind_upload();return A$kC._gl.bindBuffer(this._bufferType,null),A$kC._bindActive[this._bufferType]=null,A$yC.activeShader=null,A$C},A$j.subUpload=function(A$C,A$R,A$j){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0);var A$w=this._bind_subUpload();return A$kC._gl.bindBuffer(this._bufferType,null),A$kC._bindActive[this._bufferType]=null,A$yC.activeShader=null,A$w},A$j.disposeResource=function(){A$C.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},A$j.clear=function(){this._byteLength=0,this._upload=!0},A$w(0,A$j,"bufferLength",function(){return this._buffer.byteLength}),A$w(0,A$j,"byteLength",null,function(A$C){this._byteLength!==A$C&&(A$C<=this._buffer.byteLength||this._resizeBuffer(2*A$C+256,!0),this._byteLength=A$C)}),A$R.__int__=function(A$C){A$qC.QuadrangleIB=A$qC.create(35044),A$DC.fillIBQuadrangle(A$qC.QuadrangleIB,16)},A$R.FLOAT32=4,A$R.SHORT=2,A$R}(A$kC),A$dC=(function(A$R){function A$j(A$C){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,A$j.__super.call(this,9)}A$M(A$j,"laya.webgl.shader.d2.value.GlowSV",A$R);var A$C=A$j.prototype;A$C.setValue=function(A$C){A$R.prototype.setValue.call(this,A$C)},A$C.clear=function(){A$R.prototype.clear.call(this)}}(A$gC),function(A$C){function A$R(A$C){A$R.__super.call(this,64),this.defines.add(64)}A$M(A$R,"laya.webgl.shader.d2.value.TextSV",A$C);var A$j=A$R.prototype;return A$j.release=function(){(A$R.pool[A$R._length++]=this).clear()},A$j.clear=function(){A$C.prototype.clear.call(this)},A$R.create=function(){return A$R._length?A$R.pool[--A$R._length]:new A$R(null)},A$R.pool=[],A$R._length=0,A$R}(A$gC)),A$OC=function(A$C){function A$T(A$C,A$R,A$j,A$w){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,A$T.__super.call(this,A$C,A$R,A$j,A$w)}A$M(A$T,"laya.webgl.shader.d2.Shader2X",A$C);var A$R=A$T.prototype;return A$R.upload2dQuick1=function(A$C){this.upload(A$C,this._params2dQuick1||this._make2dQuick1())},A$R._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var A$C,A$R=this._params,A$j=0,A$w=A$R.length;A$j<A$w;A$j++)A$C=A$R[A$j],(A$Q.isFlash||"size"!==A$C.name&&"position"!==A$C.name&&"texcoord"!==A$C.name)&&this._params2dQuick1.push(A$C)}return this._params2dQuick1},A$R.disposeResource=function(){A$C.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},A$R.upload2dQuick2=function(A$C){this.upload(A$C,this._params2dQuick2||this._make2dQuick2())},A$R._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var A$C,A$R=this._params,A$j=0,A$w=A$R.length;A$j<A$w;A$j++)A$C=A$R[A$j],(A$Q.isFlash||"size"!==A$C.name)&&this._params2dQuick2.push(A$C)}return this._params2dQuick2},A$T.create=function(A$C,A$R,A$j,A$w){return new A$T(A$C,A$R,A$j,A$w)},A$T}(A$XC),A$qC=function(A$C){function A$R(A$C){this._uint8Array=null,this._uint16Array=null,void 0===A$C&&(A$C=35044),A$R.__super.call(this),this._bufferUsage=A$C,this._bufferType=34963,A$Q.isFlash||(this._buffer=new ArrayBuffer(8))}A$M(A$R,"laya.webgl.utils.IndexBuffer2D",A$YC);var A$j=A$R.prototype;return A$j._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},A$j.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},A$j.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},A$j.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},A$R.QuadrangleIB=null,A$R.create=function(A$C){return void 0===A$C&&(A$C=35044),new A$R(A$C)},A$R}(),A$vC=function(A$C){function A$j(A$C,A$R){this._floatArray32=null,this._vertexStride=0,A$j.__super.call(this),this._vertexStride=A$C,this._bufferUsage=A$R,this._bufferType=34962,A$Q.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}A$M(A$j,"laya.webgl.utils.VertexBuffer2D",A$C);var A$R=A$j.prototype;return A$R.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},A$R.bind=function(A$C){A$C&&A$C._bind(),this._bind()},A$R.insertData=function(A$C,A$R){this.getFloat32Array().set(A$C,A$R),this._upload=!0},A$R.bind_upload=function(A$C){A$C._bind_upload()||A$C._bind(),this._bind_upload()||this._bind()},A$R._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},A$R.disposeResource=function(){A$C.prototype.disposeResource.call(this)},A$R.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},A$w(0,A$R,"vertexStride",function(){return this._vertexStride}),A$j.create=function(A$C,A$R){return void 0===A$R&&(A$R=35048),new A$j(A$C,A$R)},A$j}(A$YC),A$CR=function(A$C){function A$U(A$C,A$R,A$j,A$w,A$T,A$G){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===A$j&&(A$j=6408),void 0===A$w&&(A$w=!0),A$U.__super.call(this,A$C,A$R),A$C){if(this._format=A$j,this._mipmap=A$w,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof A$C)this._url=A$C,this._src=A$C,this._image=new A$K.window.Image,A$R&&(A$R.onload&&(this.onload=A$R.onload),A$R.onerror&&(this.onerror=A$R.onerror),A$R.onCreate&&A$R.onCreate(this)),this._image.crossOrigin=A$C&&0==A$C.indexOf("data:")?null:"",A$C&&(this._image.src=A$C);else if(A$C instanceof ArrayBuffer){this._src=A$R,this._url=this._src;var A$o=new A$t(A$C);A$o.readUTFBytes(4),A$o.readUTFBytes(2),A$o.getInt16();A$o.endian="bigEndian",this._w=A$o.getInt16(),this._h=A$o.getInt16();A$o.getInt16(),A$o.getInt16();this._image=new Uint8Array(A$C,A$o.pos),this._format=A$bC.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,A$l.enabled&&this._w<A$l.atlasLimitWidth&&this._h<A$l.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(A$C instanceof Uint8Array))return this._src=A$R,this._url=this._src,this._image=A$C.source||A$C,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=A$R,this._url=this._src,this._w=A$T,this._h=A$G,this._image=A$C,this._format=0===A$j?A$C.byteLength/(A$T*A$G)==4?6408:6407:A$j}this._$5__enableMerageInAtlas=!0}}A$M(A$U,"laya.webgl.resource.WebGLImage",A$L);var A$R=A$U.prototype;return A$p.imps(A$R,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),A$R._init_=function(A$C,A$R){},A$R._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var A$C=A$bC.mainContext,A$R=this._source=A$C.createTexture(),A$j=A$fC.curBindTexTarget,A$w=A$fC.curBindTexValue;A$fC.bindTexture(A$C,3553,A$R);var A$T=this.minFifter,A$G=this.magFifter,A$o=this.repeat?10497:33071,A$U=A$e.isPOT(this._w,this._h),A$t=!1;switch(A$U?(this.mipmap?-1!==A$T||(A$T=9987):-1!==A$T||(A$T=9729),-1!==A$G||(A$G=9729),A$C.texParameteri(3553,10241,A$T),A$C.texParameteri(3553,10240,A$G),A$C.texParameteri(3553,10242,A$o),A$C.texParameteri(3553,10243,A$o),this.mipmap&&A$C.generateMipmap(3553)):(-1!==A$T||(A$T=9729),-1!==A$G||(A$G=9729),A$C.texParameteri(3553,10241,A$T),A$C.texParameteri(3553,10240,A$G),A$C.texParameteri(3553,10242,33071),A$C.texParameteri(3553,10243,33071)),A$C.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&A$C.pixelStorei(A$C.UNPACK_ALIGNMENT,1),A$C.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&A$C.pixelStorei(A$C.UNPACK_ALIGNMENT,1),A$C.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:A$t=!0,A$C.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case A$bC.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:A$t=!0,A$C.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}A$C.pixelStorei(37441,!1),A$j&&A$w&&A$fC.bindTexture(A$C,A$j,A$w),this.uri||(this.uri=this._url),A$t?this.memorySize=this._image.length:A$U&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},A$R.recreateResource=function(){var A$C=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var A$R=this;this._image=new A$K.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(A$R._needReleaseAgain)return A$R._needReleaseAgain=!1,A$R._image.onload=null,void(A$R._image=null);A$R._allowMerageInAtlas&&A$R._enableMerageInAtlas?(A$C.memorySize=0,A$C._recreateLock=!1):A$R._createWebGlTexture(),A$R.completeCreate()},this._image.src=this._src}},A$R.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&A$bC.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},A$R.onresize=function(){this._w=this._image.width,this._h=this._image.height,A$l.enabled&&this._w<A$l.atlasLimitWidth&&this._h<A$l.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},A$R.clearAtlasSource=function(){this._image=null},A$w(0,A$R,"format",function(){return this._format}),A$w(0,A$R,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(A$C){this._$5__enableMerageInAtlas=A$C}),A$w(0,A$R,"mipmap",function(){return this._mipmap}),A$w(0,A$R,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),A$w(0,A$R,"atlasSource",function(){return this._image}),A$w(0,A$R,"onload",null,function(A$C){var A$R=this;this._onload=A$C,this._image&&(this._image.onload=null!=this._onload?function(){A$R.onresize(),A$R._onload()}:null)}),A$w(0,A$R,"onerror",null,function(A$C){var A$R=this;this._onerror=A$C,this._image&&(this._image.onerror=null!=this._onerror?function(){A$R._onerror()}:null)}),A$U}();A$p.__init([A$KC,A$z,A$hC,A$SC])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}}),function(A$G,A$C,A$w){A$w.un,A$w.uns;var A$T=A$w.static,A$o=A$w.class,A$U=A$w.getset,A$t=(A$w.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),A$F=laya.utils.ClassUtils,A$H=(laya.events.Event,laya.utils.HTMLChar),A$I=laya.net.Loader,A$e=(laya.display.Node,laya.maths.Rectangle),A$M=laya.renders.Render,A$K=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),A$L=laya.utils.Stat,A$y=laya.display.Text,A$D=laya.resource.Texture,A$Q=laya.net.URL,A$Z=laya.utils.Utils,A$S=function(){function A$K(){}return A$o(A$K,"laya.html.utils.HTMLParse"),A$K.parse=function(A$C,A$R,A$j){A$R=(A$R="<root>"+(A$R=A$R.replace(/<br>/g,"<br/>"))+"</root>").replace(A$K.spacePattern,A$K.char255);var A$w=A$Z.parseXMLFromString(A$R);A$K._parseXML(A$C,A$w.childNodes[0].childNodes,A$j)},A$K._parseXML=function(A$C,A$R,A$j,A$w){var A$T=0,A$G=0;if(A$R.join||A$R.item)for(A$T=0,A$G=A$R.length;A$T<A$G;++A$T)A$K._parseXML(A$C,A$R[A$T],A$j,A$w);else{var A$o,A$U,A$t;if(3==A$R.nodeType)return void(A$C instanceof laya.html.dom.HTMLDivElement?(null==A$R.nodeName&&(A$R.nodeName="#text"),A$U=A$R.nodeName.toLowerCase(),0<(A$t=A$R.textContent.replace(/^\s+|\s+$/g,"")).length&&(A$o=A$F.getInstance(A$U))&&(A$C.addChild(A$o),A$o.innerTEXT=A$t.replace(A$K.char255AndOneSpacePattern," "))):0<(A$t=A$R.textContent.replace(/^\s+|\s+$/g,"")).length&&(A$C.innerTEXT=A$t.replace(A$K.char255AndOneSpacePattern," ")));if("#comment"==(A$U=A$R.nodeName.toLowerCase()))return;if(A$o=A$F.getInstance(A$U)){(A$o=A$C.addChild(A$o)).URI=A$j,A$o.href=A$w;var A$I=A$R.attributes;if(A$I&&0<A$I.length)for(A$T=0,A$G=A$I.length;A$T<A$G;++A$T){var A$e=A$I[A$T],A$H=A$e.nodeName,A$M=A$e.value;A$o._setAttributes(A$H,A$M)}A$K._parseXML(A$o,A$R.childNodes,A$j,A$o.href)}else A$K._parseXML(A$C,A$R.childNodes,A$j,A$w)}},A$K.char255=String.fromCharCode(255),A$K.spacePattern=/&nbsp;|&#160;/g,A$K.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),A$K}(),A$b=function(){function A$n(){}return A$o(A$n,"laya.html.utils.Layout"),A$n.later=function(A$C){null==A$n._will&&(A$n._will=[],A$w.stage.frameLoop(1,null,function(){if(!(A$n._will.length<1)){for(var A$C=0;A$C<A$n._will.length;A$C++)laya.html.utils.Layout.layout(A$n._will[A$C]);A$n._will.length=0}})),A$n._will.push(A$C)},A$n.layout=function(A$C){if(!A$C||!A$C._style)return null;if(0==(512&A$C._style._type))return null;A$C.getStyle()._type&=-513;var A$R=A$n._multiLineLayout(A$C);return A$M.isConchApp&&A$C.layaoutCallNative&&A$C.layaoutCallNative(),A$R},A$n._multiLineLayout=function(A$C){if(A$y.RightToLeft)return A$n._multiLineLayout2(A$C);var A$R=new Array;A$C._addChildsToLayout(A$R);var A$j,A$w,A$T,A$G,A$o,A$U=0,A$t=A$R.length,A$I=A$C._getCSSStyle(),A$e=A$I.letterSpacing,A$H=A$I.leading,A$M=A$I.lineHeight,A$K=A$I._widthAuto()||!A$I.wordWrap,A$F=A$K?999999:A$C.width,A$L=(A$C.height,0),A$D=A$I.italic?A$I.fontSize/3:0,A$Q=A$I._getAlign(),A$Z=A$I._getValign(),A$S=0!==A$Z||0!==A$Q||0!=A$M,A$b=0,A$f=0,A$p=0,A$h=0,A$x=new Array,A$W=A$x[0]=new A$m,A$$=!1,A$A=!1;A$W.h=0,A$I.italic&&(A$F-=A$I.fontSize/3);var A$r=0,A$E=!0;function A$P(){A$W.y=A$f,A$f+=A$W.h+A$H,0==A$W.h&&(A$f+=A$M),A$W.mWidth=A$r,A$r=0,A$W=new A$m,A$x.push(A$W),A$W.h=0,A$$=!(A$E=!(A$b=0))}for(A$U=0;A$U<A$t;A$U++)if(null!=(A$j=A$R[A$U]))if(A$E=!1,A$j instanceof laya.html.dom.HTMLBrElement)A$P(),A$W.y=A$f;else{if(A$j._isChar()){if((A$G=A$j).isWord)A$$=A$A||"\n"===A$G.char,A$W.wordStartIndex=A$W.elements.length;else{if(A$p=A$G.width+A$G.style.letterSpacin,0<A$x.length&&A$F<A$b+A$p&&0<A$W.wordStartIndex){var A$J;A$J=A$W.elements.length-A$W.wordStartIndex+1,A$W.elements.length=A$W.wordStartIndex,A$U-=A$J,A$P();continue}A$$=!1,A$r+=A$G.width}A$p=A$G.width+A$e,A$h=A$G.height,A$A=!1,(A$$=A$$||A$F<A$b+A$p)&&A$P(),A$W.minTextHeight=Math.min(A$W.minTextHeight,A$j.height)}else A$w=A$j._getCSSStyle(),A$o=A$j,A$T=A$w.padding,0===A$w._getCssFloat()||(A$S=!0),A$$=A$A||A$w.lineElement,A$p=A$o.width*A$o._style._tf.scaleX+A$T[1]+A$T[3]+A$e,A$h=A$o.height*A$o._style._tf.scaleY+A$T[0]+A$T[2],A$A=A$w.lineElement,(A$$=A$$||A$F<A$b+A$p&&A$w.wordWrap)&&A$P();A$W.elements.push(A$j),A$W.h=Math.max(A$W.h,A$h),A$j.x=A$b,A$j.y=A$f,A$b+=A$p,A$W.w=A$b-A$e,A$W.y=A$f,A$L=Math.max(A$b+A$D,A$L)}else A$E||(A$b+=A$n.DIV_ELEMENT_PADDING),A$W.wordStartIndex=A$W.elements.length;if(A$f=A$W.y+A$W.h,A$S){var A$N=0,A$a=A$F;for(A$K&&0<A$C.width&&(A$a=A$C.width),A$U=0,A$t=A$x.length;A$U<A$t;A$U++)A$x[A$U].updatePos(0,A$a,A$U,A$N,A$Q,A$Z,A$M),A$N+=Math.max(A$M,A$x[A$U].h+A$H);A$f=A$N}return A$K&&(A$C.width=A$L),A$f>A$C.height&&(A$C.height=A$f),[A$L,A$f]},A$n._multiLineLayout2=function(A$C){var A$R=new Array;A$C._addChildsToLayout(A$R);var A$j,A$w,A$T,A$G,A$o,A$U=0,A$t=A$R.length,A$I=A$C._getCSSStyle(),A$e=A$I.letterSpacing,A$H=A$I.leading,A$M=A$I.lineHeight,A$K=A$I._widthAuto()||!A$I.wordWrap,A$F=A$K?999999:A$C.width,A$L=(A$C.height,0),A$D=A$I.italic?A$I.fontSize/3:0,A$Q=2-A$I._getAlign(),A$Z=A$I._getValign(),A$S=0!==A$Z||0!=A$Q||0!=A$M,A$b=0,A$f=0,A$p=0,A$h=0,A$x=new Array,A$W=A$x[0]=new A$m,A$$=!1,A$A=!1;A$W.h=0,A$I.italic&&(A$F-=A$I.fontSize/3);var A$r=0,A$E=!0;function A$P(){A$W.y=A$f,A$f+=A$W.h+A$H,0==A$W.h&&(A$f+=A$M),A$W.mWidth=A$r,A$r=0,A$W=new A$m,A$x.push(A$W),A$W.h=0,A$$=!(A$E=!(A$b=0))}for(A$U=0;A$U<A$t;A$U++)if(null!=(A$j=A$R[A$U]))if(A$E=!1,A$j instanceof laya.html.dom.HTMLBrElement)A$P(),A$W.y=A$f;else{if(A$j._isChar()){if((A$G=A$j).isWord)A$$=A$A||"\n"===A$G.char,A$W.wordStartIndex=A$W.elements.length;else{if(0<A$x.length&&A$F<A$b+A$p&&0<A$W.wordStartIndex){var A$J;A$J=A$W.elements.length-A$W.wordStartIndex+1,A$W.elements.length=A$W.wordStartIndex,A$U-=A$J,A$P();continue}A$$=!1,A$r+=A$G.width}A$p=A$G.width+A$e,A$h=A$G.height,A$A=!1,(A$$=A$$||A$F<A$b+A$p)&&A$P(),A$W.minTextHeight=Math.min(A$W.minTextHeight,A$j.height)}else A$w=A$j._getCSSStyle(),A$o=A$j,A$T=A$w.padding,0===A$w._getCssFloat()||(A$S=!0),A$$=A$A||A$w.lineElement,A$p=A$o.width*A$o._style._tf.scaleX+A$T[1]+A$T[3]+A$e,A$h=A$o.height*A$o._style._tf.scaleY+A$T[0]+A$T[2],A$A=A$w.lineElement,(A$$=A$$||A$F<A$b+A$p&&A$w.wordWrap)&&A$P();A$W.elements.push(A$j),A$W.h=Math.max(A$W.h,A$h),A$j.x=A$b,A$j.y=A$f,A$b+=A$p,A$W.w=A$b-A$e,A$W.y=A$f,A$L=Math.max(A$b+A$D,A$L)}else A$E||(A$b+=A$n.DIV_ELEMENT_PADDING),A$W.wordStartIndex=A$W.elements.length;if(A$f=A$W.y+A$W.h,A$S){var A$N=0,A$a=A$F;for(A$U=0,A$t=A$x.length;A$U<A$t;A$U++)A$x[A$U].updatePos(0,A$a,A$U,A$N,A$Q,A$Z,A$M),A$N+=Math.max(A$M,A$x[A$U].h+A$H);A$f=A$N}for(A$K&&(A$C.width=A$L),A$f>A$C.height&&(A$C.height=A$f),A$U=0,A$t=A$x.length;A$U<A$t;A$U++)A$x[A$U].revertOrder(A$F);return[A$L,A$f]},A$n._will=null,A$n.DIV_ELEMENT_PADDING=0,A$n}(),A$m=function(){function A$C(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}A$o(A$C,"laya.html.utils.LayoutLine");var A$R=A$C.prototype;return A$R.updatePos=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U,A$t=0;0<this.elements.length&&(A$t=(A$U=this.elements[this.elements.length-1]).x+A$U.width-this.elements[0].x);var A$I=0,A$e=NaN;1===A$T&&(A$I=(A$R-A$t)/2),2===A$T&&(A$I=A$R-A$t),0===A$o||0!=A$G||(A$G=1);for(var A$H=0,A$M=this.elements.length;A$H<A$M;A$H++){var A$K=(A$U=this.elements[A$H])._getCSSStyle();switch(0!==A$I&&(A$U.x+=A$I),A$K._getValign()){case 0:A$U.y=A$w;break;case 1:var A$F=0;99999!=this.minTextHeight&&(A$F=this.minTextHeight);var A$L=(A$F+A$o)/2;A$L=Math.max(A$L,this.h),A$e=(laya.html.dom.HTMLImageElement,A$w+A$L-A$U.height),A$U.y=A$e;break;case 2:A$U.y=A$w+(A$o-A$U.height)}}},A$R.revertOrder=function(A$C){var A$R;if(0<this.elements.length){var A$j,A$w=0;for(A$j=this.elements.length,A$w=0;A$w<A$j;A$w++)(A$R=this.elements[A$w]).x=A$C-A$R.x-A$R.width}},A$C}(),A$f=function(A$j){function A$R(){this.URI=null,this._href=null,A$R.__super.call(this),this._text=A$R._EMPTYTEXT,this.setStyle(new A$t(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}A$o(A$R,"laya.html.dom.HTMLElement",A$j);var A$C=A$R.prototype;return A$C.layaoutCallNative=function(){var A$C=0;if(this._childs&&0<(A$C=this._childs.length))for(var A$R=0;A$R<A$C;A$R++)this._childs[A$R].layaoutCallNative&&this._childs[A$R].layaoutCallNative();var A$j=this._getWords();A$j?laya.html.dom.HTMLElement.fillWords(this,A$j,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},A$C.appendChild=function(A$C){return this.addChild(A$C)},A$C._getWords2=function(){var A$C=this._text.text;if(!A$C||0===A$C.length)return null;var A$R,A$j,A$w=0,A$T=0;if(this._text.drawWords)A$j=this._text.drawWords;else{for(A$T=(A$R=A$C.split(" ")).length-1,A$j=[],A$w=0;A$w<A$T;A$w++)A$j.push(A$R[A$w]," ");0<=A$T&&A$j.push(A$R[A$T]),this._text.drawWords=A$j}var A$G,A$o=this._text.words;if(A$o&&A$o.length===A$j.length)return A$o;null===A$o&&(this._text.words=A$o=[]),A$o.length=A$j.length;var A$U=this.style,A$t=A$U.font;for(A$w=0,A$T=A$j.length;A$w<A$T;A$w++){A$G=A$Z.measureText(A$j[A$w],A$t);var A$I=A$o[A$w]=new A$H(A$j[A$w],A$G.width,A$G.height||A$U.fontSize,A$U);if(1<A$I.char.length&&(A$I.charNum=A$I.char),this.href){var A$e=new A$K;this.addChild(A$e),A$I.setSprite(A$e)}}return A$o},A$C._getWords=function(){if(!A$y.CharacterCache)return this._getWords2();var A$C=this._text.text;if(!A$C||0===A$C.length)return null;var A$R,A$j=this._text.words;if(A$j&&A$j.length===A$C.length)return A$j;null===A$j&&(this._text.words=A$j=[]),A$j.length=A$C.length;for(var A$w=this.style,A$T=A$w.font,A$G=0,A$o=A$C.length;A$G<A$o;A$G++)if(A$R=A$Z.measureText(A$C.charAt(A$G),A$T)){var A$U=A$j[A$G]=new A$H(A$C.charAt(A$G),A$R.width,A$R.height||A$w.fontSize,A$w);if(this.href){var A$t=new A$K;this.addChild(A$t),A$U.setSprite(A$t)}}else console.warn("_getWords size is null"+A$C.charAt(A$G),A$T);return A$j},A$C.showLinkSprite=function(){var A$C=this._text.words;if(A$C)for(var A$R,A$j,A$w=[],A$T=0;A$T<A$C.length;A$T++)A$j=A$C[A$T],(A$R=new A$K).graphics.drawRect(0,0,A$j.width,A$j.height,"#ff0000"),A$R.width=A$j.width,A$R.height=A$j.height,this.addChild(A$R),A$w.push(A$R)},A$C._layoutLater=function(){var A$C=this.style;512&A$C._type||(A$C.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&A$C.block?(A$b.later(this),A$C._type|=512):this.parent&&this.parent._layoutLater())},A$C._setAttributes=function(A$C,A$R){switch(A$C){case"style":return void this.style.cssText(A$R);case"class":return void(this.className=A$R)}A$j.prototype._setAttributes.call(this,A$C,A$R)},A$C.updateHref=function(){if(null!=this._href){var A$C=this._getWords();if(A$C)for(var A$R,A$j,A$w=0;A$w<A$C.length;A$w++)(A$j=(A$R=A$C[A$w]).getSprite())&&(A$j.size(A$R.width,A$R.height),A$j.on("click",this,this.onLinkHandler))}},A$C.onLinkHandler=function(A$C){switch(A$C.type){case"click":for(var A$R=this;A$R;)A$R.event("link",[this.href]),A$R=A$R.parent}},A$C.formatURL=function(A$C){return this.URI?A$Q.formatURL(A$C,this.URI?this.URI.path:null):A$C},A$U(0,A$C,"href",function(){return this._href},function(A$C){null!=(this._href=A$C)&&(this._getCSSStyle().underLine=1,this.updateHref())}),A$U(0,A$C,"color",null,function(A$C){this.style.color=A$C}),A$U(0,A$C,"onClick",null,function(A$C){A$w._runScript("fn=function(event){"+A$C+";}"),this.on("click",this,void 0)}),A$U(0,A$C,"id",null,function(A$C){A$p.document.setElementById(A$C,this)}),A$U(0,A$C,"innerTEXT",function(){return this._text.text},function(A$C){this.text=A$C}),A$U(0,A$C,"style",function(){return this._style}),A$U(0,A$C,"text",function(){return this._text.text},function(A$C){this._text==A$R._EMPTYTEXT?this._text={text:A$C,words:null}:(this._text.text=A$C,this._text.words&&(this._text.words.length=0)),A$M.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),A$U(0,A$C,"parent",A$j.prototype._$get_parent,function(A$C){if(A$C instanceof laya.html.dom.HTMLElement){var A$R=A$C;this.URI||(this.URI=A$R.URI),this.style.inherit(A$R.style)}A$w.superSet(A$K,this,"parent",A$C)}),A$U(0,A$C,"className",null,function(A$C){this.style.attrs(A$p.document.styleSheets["."+A$C])}),A$R.fillWords=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$C.graphics.clear();for(var A$U=0,A$t=A$R.length;A$U<A$t;A$U++){var A$I=A$R[A$U];A$C.graphics.fillText(A$I.char,A$I.x+A$j,A$I.y+A$w,A$T,A$G,"left",A$o)}},A$R._EMPTYTEXT={text:null,words:null},A$R}(A$K),A$R=(function(A$C){function A$R(){A$R.__super.call(this),this.style.lineElement=!0,this.style.block=!0}A$o(A$R,"laya.html.dom.HTMLBrElement",A$f)}(),function(A$C){function A$R(){this.contextHeight=NaN,this.contextWidth=NaN,A$R.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}A$o(A$R,"laya.html.dom.HTMLDivElement",A$C);var A$j=A$R.prototype;return A$j.appendHTML=function(A$C){A$S.parse(this,A$C,this.URI),this.layout()},A$j._addChildsToLayout=function(A$R){var A$C=this._getWords();if(null==A$C&&0==this._childs.length)return!1;A$C&&A$C.forEach(function(A$C){A$R.push(A$C)});for(var A$j=!0,A$w=0,A$T=this._childs.length;A$w<A$T;A$w++){var A$G=this._childs[A$w];A$j?A$j=!1:A$R.push(null),A$G._addToLayout(A$R)}return!0},A$j._addToLayout=function(A$C){this.layout()},A$j.layout=function(){if(this.style){this.style._type|=512;var A$C=A$b.layout(this);if(A$C){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new A$e);var A$R=this._$P.mHtmlBounds;A$R.x=A$R.y=0,A$R.width=this.contextWidth=A$C[0],A$R.height=this.contextHeight=A$C[1],this.setBounds(A$R)}}},A$U(0,A$j,"height",function(){return this._height?this._height:this.contextHeight},A$C.prototype._$set_height),A$U(0,A$j,"innerHTML",null,function(A$C){this.destroyChildren(),this.appendHTML(A$C)}),A$U(0,A$j,"width",function(){return this._width?this._width:this.contextWidth},function(A$C){var A$R=!1;A$R=0===A$C?A$C!=this._width:A$C!=this.width,A$w.superSet(A$f,this,"width",A$C),A$R&&this.layout()}),A$R}(A$f)),A$p=function(A$C){function A$R(){this.all=new Array,this.styleSheets=A$t.styleSheets,A$R.__super.call(this)}A$o(A$R,"laya.html.dom.HTMLDocument",A$f);var A$j=A$R.prototype;return A$j.getElementById=function(A$C){return this.all[A$C]},A$j.setElementById=function(A$C,A$R){this.all[A$C]=A$R},A$T(A$R,["document",function(){return this.document=new A$R}]),A$R}();(function(A$C){function A$R(){this._tex=null,this._url=null,this._renderArgs=[],A$R.__super.call(this),this.style.block=!0}A$o(A$R,"laya.html.dom.HTMLImageElement",A$f);var A$j=A$R.prototype;A$j._addToLayout=function(A$C){!this._style.absolute&&A$C.push(this)},A$j.render=function(A$C,A$R,A$j){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(A$L.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,A$C.ctx.drawTexture2(A$R,A$j,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},A$j.layaoutCallNative=function(){var A$C=0;if(this._childs&&0<(A$C=this._childs.length))for(var A$R=0;A$R<A$C;A$R++)this._childs[A$R].layaoutCallNative&&this._childs[A$R].layaoutCallNative()},A$U(0,A$j,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(A$C){this._width!==A$C&&(this._width=A$C,this._style.width=A$C,this.repaint())}),A$U(0,A$j,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(A$C){this._height!==A$C&&(this._height=A$C,this._style.height=A$C,this.repaint())}),A$j.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),A$I.clearCache(this,this._url),this._tex=null),A$f.prototype.destroy.call(this)},A$j.onloaded=function(){var A$C=this._style;A$C&&!A$C.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),A$C&&!A$C.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),A$M.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},A$j._loadImageComplete=function(A$C,A$R,A$j){if(!this._destroyed)if(null!=A$j)if(A$j instanceof ArrayBuffer){var A$w=new DataView(A$j);new laya.webgl.resource.WebGLImage(new Uint8Array(A$j,8),A$C,0,!1,A$w.getUint32(0),A$w.getUint32(4));this.onloaded()}else if(A$j instanceof A$D)A$I.imgMgrSet[A$C]=A$R,A$G.imgMgrLock(A$C,A$I.imgMgrSet[A$C]),this._url=A$C,this._tex=A$j,A$I.keepCache(this,A$C),A$I.cacheRes(A$C,this._tex),this.onloaded();else{var A$T=-1!=A$C.indexOf(".png",A$C.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(A$j,A$C,A$T,!1,A$j.width,A$j.height);this.onloaded()}else this.event("error","Load image failed")},A$U(0,A$j,"src",null,function(A$C){(A$C=this.formatURL(A$C),this._url!=A$C)&&(null!=this._tex&&(A$I.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=A$C,(this._tex=A$I.getRes(A$C))?(A$I.keepCache(this,A$C),this.onloaded()):A$G.imgMgrLoad(A$C,this._loadImageComplete.bind(this),2,!1))})})(),function(A$C){function A$R(){this.type=null,A$R.__super.call(this),this.visible=!1}A$o(A$R,"laya.html.dom.HTMLLinkElement",A$C);var A$j=A$R.prototype;A$j._onload=function(A$C){switch(this.type){case"text/css":A$t.parseCSS(A$C,this.URI)}},A$U(0,A$j,"href",A$C.prototype._$get_href,function(A$C){var A$R=this;A$C=this.formatURL(A$C),this.URI=new A$Q(A$C);var A$j=new A$I;A$j.once("complete",null,function(A$C){A$R._onload(A$C)}),A$j.load(A$C,"text")}),A$R._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(A$f),function(A$C){function A$R(){A$R.__super.call(this),this.visible=!1}A$o(A$R,"laya.html.dom.HTMLStyleElement",A$C),A$U(0,A$R.prototype,"text",A$C.prototype._$get_text,function(A$C){A$t.parseCSS(A$C,null)})}(A$f),function(A$C){function A$R(){A$R.__super.call(this),this._getCSSStyle().valign="middle"}A$o(A$R,"laya.html.dom.HTMLIframeElement",A$C),A$U(0,A$R.prototype,"href",A$C.prototype._$get_href,function(A$j){var A$w=this;A$j=this.formatURL(A$j);var A$C=new A$I;A$C.once("complete",null,function(A$C){var A$R=A$w.URI;A$w.URI=new A$Q(A$j),A$w.innerHTML=A$C,!A$R||(A$w.URI=A$R)}),A$C.load(A$j,"text")})}(A$R)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}}),function(A$C,A$R,A$L){A$L.un,A$L.uns;var A$w=A$L.static,A$G=A$L.class,A$T=A$L.getset,A$j=(A$L.__newvec,laya.display.Animation),A$D=(laya.utils.Browser,laya.utils.ClassUtils),A$o=laya.filters.ColorFilter,A$U=laya.utils.Ease,A$t=laya.events.Event,A$I=(laya.events.EventDispatcher,laya.display.css.Font),A$e=laya.display.FrameAnimation,A$H=laya.display.Graphics,A$M=laya.utils.Handler,A$K=laya.display.Input,A$Z=laya.net.Loader,A$F=(laya.display.Node,laya.maths.Point),A$Q=laya.maths.Rectangle,A$S=laya.renders.Render,A$b=laya.display.Sprite,A$f=laya.display.Text,A$p=laya.resource.Texture,A$h=laya.utils.Tween,A$x=laya.utils.Utils,A$W=laya.utils.WeakObject;A$L.interface("laya.ui.IItem"),A$L.interface("laya.ui.ISelect"),A$L.interface("laya.ui.IRender"),A$L.interface("laya.ui.IComponent"),A$L.interface("laya.ui.IBox","IComponent");var A$$=function(){function A$C(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return A$G(A$C,"laya.ui.LayoutStyle"),A$w(A$C,["EMPTY",function(){return this.EMPTY=new A$C}]),A$C}(),A$A=function(){function A$C(){}return A$G(A$C,"laya.ui.Styles"),A$C.labelColor="#000000",A$C.buttonStateNum=3,A$C.scrollBarMinNum=15,A$C.scrollBarDelayTime=500,A$w(A$C,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),A$C}(),A$r=function(){function A$T(){}return A$G(A$T,"laya.ui.UIUtils"),A$T.fillArray=function(A$C,A$R,A$j){var A$w=A$C.concat();if(A$R)for(var A$T=A$R.split(","),A$G=0,A$o=Math.min(A$w.length,A$T.length);A$G<A$o;A$G++){var A$U=A$T[A$G];A$w[A$G]="true"==A$U||"false"!=A$U&&A$U,null!=A$j&&(A$w[A$G]=A$j(A$U))}return A$w},A$T.toColor=function(A$C){return A$x.toHexColor(A$C)},A$T.gray=function(A$C,A$R){void 0===A$R&&(A$R=!0),A$R?A$T.addFilter(A$C,A$T.grayFilter):A$T.clearFilter(A$C,A$o)},A$T.addFilter=function(A$C,A$R){var A$j=A$C.filters||[];A$j.push(A$R),A$C.filters=A$j},A$T.clearFilter=function(A$C,A$R){var A$j=A$C.filters;if(null!=A$j&&0<A$j.length){for(var A$w=A$j.length-1;-1<A$w;A$w--){var A$T=A$j[A$w];A$L.__typeof(A$T,A$R)&&A$j.splice(A$w,1)}A$C.filters=A$j}},A$T._getReplaceStr=function(A$C){return A$T.escapeSequence[A$C]},A$T.adptString=function(A$C){return A$C.replace(/\\(\w)/g,A$T._getReplaceStr)},A$T.getBindFun=function(A$C){var A$R=A$T._funMap.get(A$C);if(null==A$R){var A$j='"'+A$C+'"',A$w="(function(data){if(data==null)return;with(data){try{\nreturn "+(A$j=A$j.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";A$R=A$L._runScript(A$w),A$T._funMap.set(A$C,A$R)}return A$R},A$w(A$T,["grayFilter",function(){return this.grayFilter=new A$o([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new A$W}]),A$T}(),A$E=function(){function A$C(){}return A$G(A$C,"UIConfig"),A$C.touchScrollEnable=!0,A$C.mouseWheelEnable=!0,A$C.showButtons=!0,A$C.popupBgColor="#000000",A$C.popupBgAlpha=.5,A$C.closeDialogOnSide=!0,A$C}(),A$P=function(A$j){function A$Q(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,A$Q.__super.call(this),this._weakKeys=[]}A$G(A$Q,"laya.ui.AutoBitmap",A$j);var A$C=A$Q.prototype;return A$C.destroy=function(){if(A$Z.clearObject(this,this._weakKey),this._weakKeys){for(var A$C=0,A$R=this._weakKeys.length;A$C<A$R;++A$C)A$Z.clearObject(this,this._weakKeys[A$C]);this._weakKeys=null}A$j.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},A$C._setChanged=function(){this._isChanged||(this._isChanged=!0,A$L.timer.callLater(this,this.changeSource))},A$C.changeSource=function(){this._isChanged=!1;var A$C=this._source;if(A$C&&A$C.bitmap){var A$R=this.width,A$j=this.height,A$w=this._sizeGrid,A$T=A$C.sourceWidth,A$G=A$C.sourceHeight;if(!A$w||A$T===A$R&&A$G===A$j)this.cleanByTexture(A$C,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,A$R,A$j);else{A$Z.clearObject(this,this._weakKey),A$C.$_GID||(A$C.$_GID=A$x.getGID());var A$o=A$C.$_GID+"."+A$R+"."+A$j+"."+A$w.join("."),A$U=A$Z.findObject(A$o);if(A$x.isOKCmdList(A$U))return this._weakKey=A$o,A$Z.keepObject(this,this._weakKey),void(this.cmds=A$U);this.clear();var A$t,A$I,A$e=A$w[0],A$H=A$w[1],A$M=A$w[2],A$K=A$w[3],A$F=A$w[4],A$L=!1;if(A$R==A$T&&(A$K=A$H=0),A$j==A$G&&(A$e=A$M=0),A$R<A$K+A$H){var A$D=A$R;A$L=!0,A$R=A$K+A$H,this.save(),this.clipRect(0,0,A$D,A$j)}A$K&&A$e&&(A$t=A$Q.getTexture(A$C,0,0,A$K,A$e),A$I=this._weakKeys[0],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[0]=A$t.weakKey),this.drawTexture(A$t,0,0,A$K,A$e)):(A$Z.clearObject(this,A$I),this._weakKeys[0]="")),A$H&&A$e&&(A$t=A$Q.getTexture(A$C,A$T-A$H,0,A$H,A$e),A$I=this._weakKeys[1],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[1]=A$t.weakKey),this.drawTexture(A$t,A$R-A$H,0,A$H,A$e)):(A$Z.clearObject(this,A$I),this._weakKeys[1]="")),A$K&&A$M&&(A$t=A$Q.getTexture(A$C,0,A$G-A$M,A$K,A$M),A$I=this._weakKeys[2],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[2]=A$t.weakKey),this.drawTexture(A$t,0,A$j-A$M,A$K,A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[2]="")),A$H&&A$M&&(A$t=A$Q.getTexture(A$C,A$T-A$H,A$G-A$M,A$H,A$M),A$I=this._weakKeys[3],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[3]=A$t.weakKey),this.drawTexture(A$t,A$R-A$H,A$j-A$M,A$H,A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[3]="")),A$e&&(A$t=A$Q.getTexture(A$C,A$K,0,A$T-A$K-A$H,A$e),A$I=this._weakKeys[4],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[4]=A$t.weakKey),this.drawBitmap(A$F,A$t,A$K,0,A$R-A$K-A$H,A$e)):(A$Z.clearObject(this,A$I),this._weakKeys[4]="")),A$M&&(A$t=A$Q.getTexture(A$C,A$K,A$G-A$M,A$T-A$K-A$H,A$M),A$I=this._weakKeys[5],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[5]=A$t.weakKey),this.drawBitmap(A$F,A$t,A$K,A$j-A$M,A$R-A$K-A$H,A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[5]="")),A$K&&(A$t=A$Q.getTexture(A$C,0,A$e,A$K,A$G-A$e-A$M),A$I=this._weakKeys[6],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[6]=A$t.weakKey),this.drawBitmap(A$F,A$t,0,A$e,A$K,A$j-A$e-A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[6]="")),A$H&&(A$t=A$Q.getTexture(A$C,A$T-A$H,A$e,A$H,A$G-A$e-A$M),A$I=this._weakKeys[7],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[7]=A$t.weakKey),this.drawBitmap(A$F,A$t,A$R-A$H,A$e,A$H,A$j-A$e-A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[7]="")),A$t=A$Q.getTexture(A$C,A$K,A$e,A$T-A$K-A$H,A$G-A$e-A$M),A$I=this._weakKeys[8],A$t?(A$I!=A$t.weakKey&&(A$Z.clearObject(this,A$I),A$Z.keepObject(this,A$t.weakKey),this._weakKeys[8]=A$t.weakKey),this.drawBitmap(A$F,A$t,A$K,A$e,A$R-A$K-A$H,A$j-A$e-A$M)):(A$Z.clearObject(this,A$I),this._weakKeys[8]=""),A$L&&this.restore(),this.autoCacheCmd&&!A$S.isConchApp&&(A$Z.saveObject(A$o,this.cmds,null),this._weakKey=A$o,A$Z.keepObject(this,this._weakKey))}this._repaint()}},A$C.drawBitmap=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=0),A$T<.1||A$G<.1||(!A$C||A$R.width==A$T&&A$R.height==A$G?this.drawTexture(A$R,A$j,A$w,A$T,A$G):this.fillTexture(A$R,A$j,A$w,A$T,A$G))},A$C.clear=function(A$C){void 0===A$C&&(A$C=!0),A$j.prototype.clear.call(this,!1)},A$T(0,A$C,"sizeGrid",function(){return this._sizeGrid},function(A$C){this._sizeGrid=A$C,this._setChanged()}),A$T(0,A$C,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(A$C){this._width!=A$C&&(this._width=A$C,this._setChanged())}),A$T(0,A$C,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(A$C){this._height!=A$C&&(this._height=A$C,this._setChanged())}),A$T(0,A$C,"source",function(){return this._source},function(A$C){A$C?(this._source=A$C,this._setChanged()):(this._source=null,this.clear())}),A$Q.getTexture=function(A$C,A$R,A$j,A$w,A$T){A$w<=0&&(A$w=1),A$T<=0&&(A$T=1),A$C.$_GID||(A$C.$_GID=A$x.getGID());var A$G=A$C.$_GID+"."+A$R+"."+A$j+"."+A$w+"."+A$T,A$o=A$Z.findObject(A$G);if((!A$o||!A$o.source)&&(A$o=A$p.createFromTexture(A$C,A$R,A$j,A$w,A$T))){if(A$C.alphaTexture){var A$U=A$C.width/A$C.alphaTexture.width;A$o.alphaTexture=A$p.createFromTexture(A$C.alphaTexture,A$R/A$U,A$j/A$U,A$w/A$U,A$T/A$U)}A$Z.saveObject(A$G,A$o),A$o.weakKey=A$G}return A$o},A$Q}(A$H),A$J=(function(A$C){function A$R(){A$R.__super.call(this)}A$G(A$R,"laya.ui.UIEvent",A$t),A$R.SHOW_TIP="showtip",A$R.HIDE_TIP="hidetip"}(),function(A$R){function A$C(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,A$C.__super.call(this),this._layout=A$$.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}A$G(A$C,"laya.ui.Component",A$R);var A$j=A$C.prototype;return A$L.imps(A$j,{"laya.ui.IComponent":!0}),A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},A$j.preinitialize=function(){},A$j.createChildren=function(){},A$j.initialize=function(){},A$j.callLater=function(A$C,A$R){A$L.timer.callLater(this,A$C,A$R)},A$j.runCallLater=function(A$C){A$L.timer.runCallLater(this,A$C)},A$j.commitMeasure=function(){},A$j.changeSize=function(){this.event("resize")},A$j.getLayout=function(){return this._layout===A$$.EMPTY&&(this._layout=new A$$),this._layout},A$j._setLayoutEnabled=function(A$C){this._layout&&this._layout.enable!=A$C&&(this._layout.enable=A$C,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},A$j.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},A$j.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},A$j.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},A$j.resetLayoutX=function(){var A$C=this._layout;if(isNaN(A$C.anchorX)||(this.pivotX=A$C.anchorX*this.width),this.layoutEnabled){var A$R=this.parent;A$R&&(isNaN(A$C.centerX)?isNaN(A$C.left)?isNaN(A$C.right)||(this.x=Math.round(A$R.width-this.displayWidth-A$C.right+this.pivotX*this.scaleX)):(this.x=Math.round(A$C.left+this.pivotX*this.scaleX),isNaN(A$C.right)||(this.width=(A$R._width-A$C.left-A$C.right)/(this.scaleX||.01))):this.x=Math.round(.5*(A$R.width-this.displayWidth)+A$C.centerX+this.pivotX*this.scaleX))}},A$j.resetLayoutY=function(){var A$C=this._layout;if(isNaN(A$C.anchorY)||(this.pivotY=A$C.anchorY*this.height),this.layoutEnabled){var A$R=this.parent;A$R&&(isNaN(A$C.centerY)?isNaN(A$C.top)?isNaN(A$C.bottom)||(this.y=Math.round(A$R.height-this.displayHeight-A$C.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(A$C.top+this.pivotY*this.scaleY),isNaN(A$C.bottom)||(this.height=(A$R._height-A$C.top-A$C.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(A$R.height-this.displayHeight)+A$C.centerY+this.pivotY*this.scaleY))}},A$j.onMouseOver=function(A$C){A$L.stage.event("showtip",this._toolTip)},A$j.onMouseOut=function(A$C){A$L.stage.event("hidetip",this._toolTip)},A$T(0,A$j,"displayWidth",function(){return this.width*this.scaleX}),A$T(0,A$j,"width",function(){return this._width?this._width:this.measureWidth},function(A$C){this._width!=A$C&&(this._width=A$C,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),A$T(0,A$j,"measureWidth",function(){var A$C=0;this.commitMeasure();for(var A$R=this.numChildren-1;-1<A$R;A$R--){var A$j=this.getChildAt(A$R);A$j.visible&&(A$C=Math.max(A$j.x+A$j.width*A$j.scaleX,A$C))}return A$C}),A$T(0,A$j,"displayHeight",function(){return this.height*this.scaleY}),A$T(0,A$j,"height",function(){return this._height?this._height:this.measureHeight},function(A$C){this._height!=A$C&&(this._height=A$C,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),A$T(0,A$j,"dataSource",function(){return this._dataSource},function(A$C){for(var A$R in this._dataSource=A$C,this._dataSource)this.hasOwnProperty(A$R)&&"function"!=typeof this[A$R]&&(this[A$R]=this._dataSource[A$R])}),A$T(0,A$j,"scaleY",A$R.prototype._$get_scaleY,function(A$C){A$L.superGet(A$b,this,"scaleY")!=A$C&&(A$L.superSet(A$b,this,"scaleY",A$C),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),A$T(0,A$j,"measureHeight",function(){var A$C=0;this.commitMeasure();for(var A$R=this.numChildren-1;-1<A$R;A$R--){var A$j=this.getChildAt(A$R);A$j.visible&&(A$C=Math.max(A$j.y+A$j.height*A$j.scaleY,A$C))}return A$C}),A$T(0,A$j,"scaleX",A$R.prototype._$get_scaleX,function(A$C){A$L.superGet(A$b,this,"scaleX")!=A$C&&(A$L.superSet(A$b,this,"scaleX",A$C),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),A$T(0,A$j,"top",function(){return this._layout.top},function(A$C){A$C!=this._layout.top&&(this.getLayout().top=A$C,this._setLayoutEnabled(!0)),this.resetLayoutY()}),A$T(0,A$j,"bottom",function(){return this._layout.bottom},function(A$C){A$C!=this._layout.bottom&&(this.getLayout().bottom=A$C,this._setLayoutEnabled(!0)),this.resetLayoutY()}),A$T(0,A$j,"left",function(){return this._layout.left},function(A$C){A$C!=this._layout.left&&(this.getLayout().left=A$C,this._setLayoutEnabled(!0)),this.resetLayoutX()}),A$T(0,A$j,"right",function(){return this._layout.right},function(A$C){A$C!=this._layout.right&&(this.getLayout().right=A$C,this._setLayoutEnabled(!0)),this.resetLayoutX()}),A$T(0,A$j,"centerX",function(){return this._layout.centerX},function(A$C){A$C!=this._layout.centerX&&(this.getLayout().centerX=A$C,this._setLayoutEnabled(!0)),this.resetLayoutX()}),A$T(0,A$j,"centerY",function(){return this._layout.centerY},function(A$C){A$C!=this._layout.centerY&&(this.getLayout().centerY=A$C,this._setLayoutEnabled(!0)),this.resetLayoutY()}),A$T(0,A$j,"anchorX",function(){return this._layout.anchorX},function(A$C){A$C!=this._layout.anchorX&&(this.getLayout().anchorX=A$C,this._setLayoutEnabled(!0)),this.resetLayoutX()}),A$T(0,A$j,"anchorY",function(){return this._layout.anchorY},function(A$C){A$C!=this._layout.anchorY&&(this.getLayout().anchorY=A$C,this._setLayoutEnabled(!0)),this.resetLayoutY()}),A$T(0,A$j,"tag",function(){return this._tag},function(A$C){this._tag=A$C}),A$T(0,A$j,"toolTip",function(){return this._toolTip},function(A$C){this._toolTip!=A$C&&(null!=(this._toolTip=A$C)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),A$T(0,A$j,"comXml",function(){return this._comXml},function(A$C){this._comXml=A$C}),A$T(0,A$j,"gray",function(){return this._gray},function(A$C){A$C!==this._gray&&(this._gray=A$C,A$r.gray(this,A$C))}),A$T(0,A$j,"disabled",function(){return this._disabled},function(A$C){A$C!==this._disabled&&(this.gray=this._disabled=A$C,this.mouseEnabled=!A$C)}),A$C}(A$b)),A$N=function(A$C){function A$R(){this.lockLayer=null,this.popupEffect=function(A$C){A$C.scale(1,1),A$h.from(A$C,{x:A$L.stage.width/2,y:A$L.stage.height/2,scaleX:0,scaleY:0},300,A$U.backOut,A$M.create(this,this.doOpen,[A$C]))},this.closeEffect=function(A$C,A$R){A$h.to(A$C,{x:A$L.stage.width/2,y:A$L.stage.height/2,scaleX:0,scaleY:0},300,A$U.strongOut,A$M.create(this,this.doClose,[A$C,A$R]))},A$R.__super.call(this),this.maskLayer=new A$b,this.popupEffectHandler=A$M.create(this,this.popupEffect,null,!1),this.closeEffectHandler=A$M.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,A$L.stage.addChild(this),A$L.stage.on("resize",this,this._onResize),A$E.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}A$G(A$R,"laya.ui.DialogManager",A$b);var A$j=A$R.prototype;return A$j._closeOnSide=function(){var A$C=this.getChildAt(this.numChildren-1);A$C instanceof laya.ui.Dialog&&A$C.close("side")},A$j.setLockView=function(A$C){this.lockLayer||(this.lockLayer=new A$a,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(A$L.stage.width,A$L.stage.height)),this.lockLayer.removeChildren(),A$C&&(A$C.centerX=A$C.centerY=0,this.lockLayer.addChild(A$C))},A$j._onResize=function(A$C){var A$R=this.maskLayer.width=A$L.stage.width,A$j=this.maskLayer.height=A$L.stage.height;this.lockLayer&&this.lockLayer.size(A$R,A$j),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,A$R,A$j,A$E.popupBgColor),this.maskLayer.alpha=A$E.popupBgAlpha;for(var A$w=this.numChildren-1;-1<A$w;A$w--){var A$T=this.getChildAt(A$w);A$T.popupCenter&&this._centerDialog(A$T)}},A$j._centerDialog=function(A$C){A$C.x=Math.round((A$L.stage.width-A$C.width>>1)+A$C.pivotX),A$C.y=Math.round((A$L.stage.height-A$C.height>>1)+A$C.pivotY)},A$j.open=function(A$C,A$R,A$j){void 0===A$R&&(A$R=!1),void 0===A$j&&(A$j=!1),A$R&&this._closeAll(),A$C.popupCenter&&this._centerDialog(A$C),this.addChild(A$C),(A$C.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),A$j&&null!=A$C.popupEffect?A$C.popupEffect.runWith(A$C):this.doOpen(A$C),this.event("open")},A$j.doOpen=function(A$C){A$C.onOpened()},A$j.lock=function(A$C){this.lockLayer&&(A$C?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},A$j.close=function(A$C,A$R,A$j){void 0===A$j&&(A$j=!1),A$j&&null!=A$C.closeEffect?A$C.closeEffect.runWith([A$C,A$R]):this.doClose(A$C,A$R),this.event("close")},A$j.doClose=function(A$C,A$R){A$C.removeSelf(),A$C.isModal&&this._checkMask(),A$C.closeHandler&&A$C.closeHandler.runWith(A$R),A$C.onClosed(A$R)},A$j.closeAll=function(){this._closeAll(),this.event("close")},A$j._closeAll=function(){for(var A$C=this.numChildren-1;-1<A$C;A$C--){var A$R=this.getChildAt(A$C);A$R&&null!=A$R.close&&this.doClose(A$R)}},A$j.getDialogsByGroup=function(A$C){for(var A$R=[],A$j=this.numChildren-1;-1<A$j;A$j--){var A$w=this.getChildAt(A$j);A$w&&A$w.group===A$C&&A$R.push(A$w)}return A$R},A$j.closeByGroup=function(A$C){for(var A$R=[],A$j=this.numChildren-1;-1<A$j;A$j--){var A$w=this.getChildAt(A$j);A$w&&A$w.group===A$C&&(A$w.close(),A$R.push(A$w))}return A$R},A$j._checkMask=function(){this.maskLayer.removeSelf();for(var A$C=this.numChildren-1;-1<A$C;A$C--){var A$R=this.getChildAt(A$C);if(A$R&&A$R.isModal)return void this.addChildAt(this.maskLayer,A$C)}},A$R}(),A$a=function(A$C){function A$R(){A$R.__super.call(this)}A$G(A$R,"laya.ui.Box",A$C);var A$j=A$R.prototype;return A$L.imps(A$j,{"laya.ui.IBox":!0}),A$T(0,A$j,"dataSource",A$C.prototype._$get_dataSource,function(A$C){for(var A$R in this._dataSource=A$C){var A$j=this.getChildByName(A$R);A$j?A$j.dataSource=A$C[A$R]:this.hasOwnProperty(A$R)&&"function"!=typeof this[A$R]&&(this[A$R]=A$C[A$R])}}),A$R}(A$J),A$n=function(A$R){function A$j(A$C,A$R){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,A$j.__super.call(this),this._labelColors=A$A.buttonLabelColors,this._stateNum=A$A.buttonStateNum,void 0===A$R&&(A$R=""),this.skin=A$C,this.label=A$R}A$G(A$j,"laya.ui.Button",A$R);var A$C=A$j.prototype;return A$L.imps(A$C,{"laya.ui.ISelect":!0}),A$C.destroy=function(A$C){A$Z.clearCache(this,this._skin),A$Z.clearObject(this,this._weakKey),void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(A$C),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},A$C.createChildren=function(){this.graphics=this._bitmap=new A$P},A$C.createText=function(){this._text||(this._text=new A$f,this._text.overflow=A$f.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},A$C.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},A$C.onMouse=function(A$C){if(!1!==this.toggle||!this._selected)return"click"===A$C.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=A$j.stateMap[A$C.type]))},A$C.changeClips=function(){var A$C=A$Z.getRes(this._skin);if(A$C&&this._skin&&""!=this._skin){A$Z.clearObject(this,this._weakKey);var A$R=A$C.sourceWidth,A$j=A$C.sourceHeight/this._stateNum;A$C.$_GID||(A$C.$_GID=A$x.getGID());var A$w=A$C.$_GID+"-"+this._stateNum,A$T=A$Z.findObject(A$w);if(A$x.isOkTextureList(A$T)||(A$T=null),A$T)this._weakKey=A$w,A$Z.keepObject(this,this._weakKey),this._sources=A$T;else{if(this._sources=[],1===this._stateNum)this._sources.push(A$C);else for(var A$G=0;A$G<this._stateNum;A$G++){var A$o=A$p.createFromTexture(A$C,0,A$j*A$G,A$R,A$j);if(A$C.alphaTexture){var A$U=A$C.width/A$C.alphaTexture.width;A$o.alphaTexture=A$p.createFromTexture(A$C.alphaTexture,0/A$U,A$j*A$G/A$U,A$R/A$U,A$j/A$U)}this._sources.push(A$o)}A$Z.saveObject(A$w,this._sources),this._weakKey=A$w,A$Z.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||A$R,this._bitmap.height=this._height||A$j,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=A$R)}else console.warn("lose skin ",this._skin,this.name,this.__className)},A$C.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var A$C=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[A$C]),this.label&&(this._text.color=this._labelColors[A$C],this._strokeColors&&(this._text.strokeColor=this._strokeColors[A$C]))},A$C._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},A$T(0,A$C,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(A$C){this.createText(),this._text.strokeColor=A$C}),A$T(0,A$C,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(A$Z.clearCache(this,this._skin),this._skin=A$C,A$Z.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),A$T(0,A$C,"state",function(){return this._state},function(A$C){this._state!=A$C&&(this._state=A$C,this._setStateChanged())}),A$T(0,A$C,"text",function(){return this.createText(),this._text}),A$T(0,A$C,"stateNum",function(){return this._stateNum},function(A$C){"string"==typeof A$C&&(A$C=parseInt(A$C)),this._stateNum!=A$C&&(this._stateNum=A$C<1?1:3<A$C?3:A$C,this.callLater(this.changeClips))}),A$T(0,A$C,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(A$C){this._strokeColors=A$r.fillArray(A$A.buttonLabelColors,A$C,String),this._setStateChanged()}),A$T(0,A$C,"labelColors",function(){return this._labelColors.join(",")},function(A$C){this._labelColors=A$r.fillArray(A$A.buttonLabelColors,A$C,String),this._setStateChanged()}),A$T(0,A$C,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),A$T(0,A$C,"label",function(){return this._text?this._text.text:null},function(A$C){(this._text||A$C)&&(this.createText(),this._text.text!=A$C&&(A$C&&!this._text.parent&&this.addChild(this._text),this._text.text=(A$C+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),A$T(0,A$C,"selected",function(){return this._selected},function(A$C){this._selected!=A$C&&(this._selected=A$C,this.state=this._selected?2:0,this.event("change"))}),A$T(0,A$C,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(A$C){this.createText(),this._text.padding=A$r.fillArray(A$A.labelPadding,A$C,Number)}),A$T(0,A$C,"labelSize",function(){return this.createText(),this._text.fontSize},function(A$C){this.createText(),this._text.fontSize=A$C}),A$T(0,A$C,"labelStroke",function(){return this.createText(),this._text.stroke},function(A$C){this.createText(),this._text.stroke=A$C}),A$T(0,A$C,"labelBold",function(){return this.createText(),this._text.bold},function(A$C){this.createText(),this._text.bold=A$C}),A$T(0,A$C,"labelFont",function(){return this.createText(),this._text.font},function(A$C){this.createText(),this._text.font=A$C}),A$T(0,A$C,"labelAlign",function(){return this.createText(),this._text.align},function(A$C){this.createText(),this._text.align=A$C}),A$T(0,A$C,"clickHandler",function(){return this._clickHandler},function(A$C){this._clickHandler=A$C}),A$T(0,A$C,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(A$C){this._bitmap.sizeGrid=A$r.fillArray(A$A.defaultSizeGrid,A$C,Number)}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$J,this,"width",A$C),this._autoSize&&(this._bitmap.width=A$C,this._text&&(this._text.width=A$C))}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$J,this,"height",A$C),this._autoSize&&(this._bitmap.height=A$C,this._text&&(this._text.height=A$C))}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)||"string"==typeof A$C?this.label=A$C+"":A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(A$C){this._bitmap._offset=A$C?A$r.fillArray([1,1],A$C,Number):[]}),A$w(A$j,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),A$j}(A$J),A$y=function(A$R){function A$w(A$C,A$R,A$j){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,A$w.__super.call(this),void 0===A$R&&(A$R=1),void 0===A$j&&(A$j=1),this._clipX=A$R,this._clipY=A$j,this.skin=A$C}A$G(A$w,"laya.ui.Clip",A$R);var A$C=A$w.prototype;return A$C.destroy=function(A$C){A$Z.clearCache(this,this._skin),A$Z.clearObject(this,this._weakKey),void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},A$C.dispose=function(){this.destroy(!0),A$L.loader.clearRes(this._skin)},A$C.createChildren=function(){this.graphics=this._bitmap=new A$P},A$C._onDisplay=function(A$C){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},A$C.changeClip=function(){if(this._clipChanged=!1,this._skin){var A$C=A$Z.getRes(this._skin);A$C?this.loadComplete(this._skin,A$C):A$L.loader.load(this._skin,A$M.create(this,this.loadComplete,[this._skin]))}},A$C.loadComplete=function(A$C,A$R){if(A$C===this._skin&&A$R){A$Z.clearObject(this,this._weakKey);var A$j=this._clipWidth||Math.ceil(A$R.sourceWidth/this._clipX),A$w=this._clipHeight||Math.ceil(A$R.sourceHeight/this._clipY),A$T=this._skin+A$j+A$w,A$G=A$Z.findObject(A$T);if(A$x.isOkTextureList(A$G)||(A$G=null),A$G)this._weakKey=A$T,A$Z.keepObject(this,this._weakKey),this._sources=A$G;else{this._sources=[];for(var A$o=0;A$o<this._clipY;A$o++)for(var A$U=0;A$U<this._clipX;A$U++){var A$t=A$p.createFromTexture(A$R,A$j*A$U,A$w*A$o,A$j,A$w);if(A$R.alphaTexture){var A$I=A$R.width/A$R.alphaTexture.width;A$t.alphaTexture=A$p.createFromTexture(A$R.alphaTexture,A$j*A$U/A$I,A$w*A$o/A$I,A$j/A$I,A$w/A$I)}this._sources.push(A$t)}A$Z.saveObject(A$T,this._sources),this._weakKey=A$T,A$Z.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},A$C.play=function(A$C,A$R){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=-1),this._isPlaying=!0,this.index=A$C,this._toIndex=A$R,this._index++,A$L.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},A$C._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},A$C.stop=function(){this._isPlaying=!1,A$L.timer.clear(this,this._loop),this.event("complete")},A$C._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},A$T(0,A$C,"interval",function(){return this._interval},function(A$C){this._interval!=A$C&&(this._interval=A$C,this._isPlaying&&this.play())}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(A$Z.clearCache(this,this._skin),(this._skin=A$C)?(A$Z.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),A$T(0,A$C,"sources",function(){return this._sources},function(A$C){this._sources=A$C,this.index=this._index,this.event("loaded")}),A$T(0,A$C,"clipX",function(){return this._clipX},function(A$C){this._clipX=A$C||1,this._setClipChanged()}),A$T(0,A$C,"clipY",function(){return this._clipY},function(A$C){this._clipY=A$C||1,this._setClipChanged()}),A$T(0,A$C,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),A$T(0,A$C,"clipWidth",function(){return this._clipWidth},function(A$C){this._clipWidth=A$C,this._setClipChanged()}),A$T(0,A$C,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(A$C){this._bitmap.sizeGrid=A$r.fillArray(A$A.defaultSizeGrid,A$C,Number)}),A$T(0,A$C,"group",function(){return this._group},function(A$C){A$C&&this._skin&&A$Z.setGroup(this._skin,A$C),this._group=A$C}),A$T(0,A$C,"clipHeight",function(){return this._clipHeight},function(A$C){this._clipHeight=A$C,this._setClipChanged()}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$J,this,"width",A$C),this._bitmap.width=A$C}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$J,this,"height",A$C),this._bitmap.height=A$C}),A$T(0,A$C,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),A$T(0,A$C,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),A$T(0,A$C,"index",function(){return this._index},function(A$C){this._index=A$C,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[A$C]),this.event("change")}),A$T(0,A$C,"autoPlay",function(){return this._autoPlay},function(A$C){this._autoPlay!=A$C&&((this._autoPlay=A$C)?this.play():this.stop())}),A$T(0,A$C,"isPlaying",function(){return this._isPlaying},function(A$C){this._isPlaying=A$C}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)&&Math.floor(A$C)==A$C||"string"==typeof A$C?this.index=parseInt(A$C):A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"bitmap",function(){return this._bitmap}),A$w}(A$J),A$m=function(A$R){function A$C(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,A$C.__super.call(this)}A$G(A$C,"laya.ui.ColorPicker",A$R);var A$j=A$C.prototype;return A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._colorPanel&&this._colorPanel.destroy(A$C),this._colorButton&&this._colorButton.destroy(A$C),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},A$j.createChildren=function(){this.addChild(this._colorButton=new A$n),this._colorPanel=new A$a,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new A$b),this._colorPanel.addChild(this._colorBlock=new A$b),this._colorPanel.addChild(this._colorInput=new A$K)},A$j.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},A$j.onPanelMouseDown=function(A$C){A$C.stopPropagation()},A$j.changePanel=function(){this._panelChanged=!1;var A$C=this._colorPanel.graphics;A$C.clear(),A$C.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(A$C=this._colorTiles.graphics).clear();for(var A$R=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],A$j=0;A$j<12;A$j++)for(var A$w=0;A$w<20;A$w++){var A$T=0;A$T=0===A$w?A$R[A$j]:1===A$w?0:51*(((3*A$j+A$w/6)%3<<0)+3*(A$j/6<<0))<<16|A$w%6*51<<8|(A$j<<0)%6*51;var A$G=A$r.toColor(A$T);this._colors.push(A$G);var A$o=A$w*this._gridSize,A$U=A$j*this._gridSize;A$C.drawRect(A$o,A$U,this._gridSize,this._gridSize,A$G,"#000000")}},A$j.onColorButtonClick=function(A$C){this._colorPanel.parent?this.close():this.open()},A$j.open=function(){var A$C=this.localToGlobal(new A$F),A$R=A$C.x+this._colorPanel.width<=A$L.stage.width?A$C.x:A$L.stage.width-this._colorPanel.width,A$j=A$C.y+this._colorButton.height;A$j=A$j+this._colorPanel.height<=A$L.stage.height?A$j:A$C.y-this._colorPanel.height,this._colorPanel.pos(A$R,A$j),this._colorPanel.zOrder=1001,A$L._currentStage.addChild(this._colorPanel),A$L.stage.on("mousedown",this,this.removeColorBox)},A$j.close=function(){A$L.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},A$j.removeColorBox=function(A$C){this.close()},A$j.onColorFieldKeyDown=function(A$C){13==A$C.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),A$C.stopPropagation())},A$j.onColorInputChange=function(A$C){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},A$j.onColorTilesClick=function(A$C){this.selectedColor=this.getColorByMouse(),this.close()},A$j.onColorTilesMouseMove=function(A$C){this._colorInput.focus=!1;var A$R=this.getColorByMouse();this._colorInput.text=A$R,this.drawBlock(A$R)},A$j.getColorByMouse=function(){var A$C=this._colorTiles.getMousePoint(),A$R=Math.floor(A$C.x/this._gridSize),A$j=Math.floor(A$C.y/this._gridSize);return this._colors[20*A$j+A$R]},A$j.drawBlock=function(A$C){var A$R=this._colorBlock.graphics;A$R.clear();var A$j=A$C||"#ffffff";A$R.drawRect(0,0,50,20,A$j,this._borderColor),A$C||A$R.drawLine(0,0,50,20,"#ff0000")},A$j.changeColor=function(){var A$C=this.graphics;A$C.clear();var A$R=this._selectedColor||"#000000";A$C.drawRect(0,0,this._colorButton.width,this._colorButton.height,A$R)},A$j._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},A$T(0,A$j,"inputBgColor",function(){return this._inputBgColor},function(A$C){this._inputBgColor=A$C,this._setPanelChanged()}),A$T(0,A$j,"selectedColor",function(){return this._selectedColor},function(A$C){this._selectedColor!=A$C&&(this._selectedColor=this._colorInput.text=A$C,this.drawBlock(A$C),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",A$t.EMPTY.setTo("change",this,this)))}),A$T(0,A$j,"skin",function(){return this._colorButton.skin},function(A$C){this._colorButton.skin=A$C,this.changeColor()}),A$T(0,A$j,"bgColor",function(){return this._bgColor},function(A$C){this._bgColor=A$C,this._setPanelChanged()}),A$T(0,A$j,"borderColor",function(){return this._borderColor},function(A$C){this._borderColor=A$C,this._setPanelChanged()}),A$T(0,A$j,"inputColor",function(){return this._inputColor},function(A$C){this._inputColor=A$C,this._setPanelChanged()}),A$C}(A$J),A$k=function(A$R){function A$j(A$C,A$R){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,A$j.__super.call(this),this._itemColors=A$A.comboBoxItemColors,this.skin=A$C,this.labels=A$R}A$G(A$j,"laya.ui.ComboBox",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._button&&this._button.destroy(A$C),this._list&&this._list.destroy(A$C),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},A$C.createChildren=function(){this.addChild(this._button=new A$n),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},A$C._createList=function(){this._list=new A$c,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},A$C._setListEvent=function(A$C){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=A$M.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},A$C.onListDown=function(A$C){A$C.stopPropagation()},A$C.onScrollBarDown=function(A$C){A$C.stopPropagation()},A$C.onButtonMouseDown=function(A$C){this.callLater(this.switchTo,[!this._isOpen])},A$C.changeList=function(){this._listChanged=!1;var A$C=this.width-2,A$R=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:A$C,height:this._itemHeight,fontSize:this._itemSize,color:A$R}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},A$C.onlistItemMouse=function(A$C,A$R){var A$j=A$C.type;if("mouseover"===A$j||"mouseout"===A$j){if(this._isCustomList)return;var A$w=this._list.getCell(A$R);if(!A$w)return;var A$T=A$w.getChildByName("label");A$T&&("mouseover"===A$j?(A$T.bgColor=this._itemColors[0],A$T.color=this._itemColors[1]):(A$T.bgColor=null,A$T.color=this._itemColors[2]))}else"click"===A$j&&(this.selectedIndex=A$R,this.isOpen=!1)},A$C.switchTo=function(A$C){this.isOpen=A$C},A$C.changeOpen=function(){this.isOpen=!this._isOpen},A$C.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var A$C=this._list.graphics;A$C.clear(),A$C.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var A$R=this._list.array||[],A$j=A$R.length=0,A$w=this._labels.length;A$j<A$w;A$j++)A$R.push({label:this._labels[A$j]});this._list.height=this._listHeight,this._list.array=A$R},A$C.changeSelected=function(){this._button.label=this.selectedLabel},A$C._onStageMouseWheel=function(A$C){this._list&&!this._list.contains(A$C.target)&&this.removeList(null)},A$C.removeList=function(A$C){A$L.stage.off("mousedown",this,this.removeList),A$L.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},A$T(0,A$C,"selectedIndex",function(){return this._selectedIndex},function(A$C){this._selectedIndex!=A$C&&(this._selectedIndex=A$C,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[A$t.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),A$T(0,A$C,"measureHeight",function(){return this._button.height}),A$T(0,A$C,"skin",function(){return this._button.skin},function(A$C){this._button.skin!=A$C&&(this._button.skin=A$C,this._listChanged=!0)}),A$T(0,A$C,"measureWidth",function(){return this._button.width}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$J,this,"width",A$C),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),A$T(0,A$C,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(A$C){this.selectedIndex=this._labels.indexOf(A$C)}),A$T(0,A$C,"labels",function(){return this._labels.join(",")},function(A$C){0<this._labels.length&&(this.selectedIndex=-1),A$C?this._labels=A$C.split(","):this._labels.length=0,this._itemChanged=!0}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$J,this,"height",A$C),this._button.height=this._height}),A$T(0,A$C,"selectHandler",function(){return this._selectHandler},function(A$C){this._selectHandler=A$C}),A$T(0,A$C,"visibleNum",function(){return this._visibleNum},function(A$C){this._visibleNum=A$C,this._listChanged=!0}),A$T(0,A$C,"labelBold",function(){return this._button.text.bold},function(A$C){this._button.text.bold=A$C}),A$T(0,A$C,"itemColors",function(){return String(this._itemColors)},function(A$C){this._itemColors=A$r.fillArray(this._itemColors,A$C,String),this._listChanged=!0}),A$T(0,A$C,"itemSize",function(){return this._itemSize},function(A$C){this._itemSize=A$C,this._listChanged=!0}),A$T(0,A$C,"scrollBar",function(){return this.list.scrollBar}),A$T(0,A$C,"isOpen",function(){return this._isOpen},function(A$C){if(this._isOpen!=A$C)if(this._isOpen=A$C,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var A$R=this.localToGlobal(A$F.TEMP.setTo(0,0)),A$j=A$R.y+this._button.height;A$j=A$j+this._listHeight<=A$L.stage.height?A$j:A$R.y-this._listHeight,this._list.pos(A$R.x,A$j),this._list.zOrder=1001,A$L._currentStage.addChild(this._list),A$L.stage.once("mousedown",this,this.removeList),A$L.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),A$T(0,A$C,"scrollBarSkin",function(){return this._scrollBarSkin},function(A$C){this._scrollBarSkin=A$C}),A$T(0,A$C,"sizeGrid",function(){return this._button.sizeGrid},function(A$C){this._button.sizeGrid=A$C}),A$T(0,A$C,"button",function(){return this._button}),A$T(0,A$C,"list",function(){return this._list||this._createList(),this._list},function(A$C){A$C&&(A$C.removeSelf(),this._isCustomList=!0,this._list=A$C,this._setListEvent(A$C),this._itemHeight=A$C.getCell(0).height+A$C.spaceY)}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)&&Math.floor(A$C)==A$C||"string"==typeof A$C?this.selectedIndex=parseInt(A$C):A$C instanceof Array?this.labels=A$C.join(","):A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"labelColors",function(){return this._button.labelColors},function(A$C){this._button.labelColors!=A$C&&(this._button.labelColors=A$C)}),A$T(0,A$C,"labelPadding",function(){return this._button.text.padding.join(",")},function(A$C){this._button.text.padding=A$r.fillArray(A$A.labelPadding,A$C,Number)}),A$T(0,A$C,"labelSize",function(){return this._button.text.fontSize},function(A$C){this._button.text.fontSize=A$C}),A$T(0,A$C,"labelFont",function(){return this._button.text.font},function(A$C){this._button.text.font=A$C}),A$T(0,A$C,"stateNum",function(){return this._button.stateNum},function(A$C){this._button.stateNum=A$C}),A$j}(A$J),A$V=function(A$R){function A$j(A$C){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,A$j.__super.call(this),this._showButtons=A$E.showButtons,this._touchScrollEnable=A$E.touchScrollEnable,this._mouseWheelEnable=A$E.mouseWheelEnable,this.skin=A$C,this.max=1}A$G(A$j,"laya.ui.ScrollBar",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),this.stopScroll(),this.target=null,A$R.prototype.destroy.call(this,A$C),this.upButton&&this.upButton.destroy(A$C),this.downButton&&this.downButton.destroy(A$C),this.slider&&this.slider.destroy(A$C),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},A$C.createChildren=function(){this.addChild(this.slider=new A$z),this.addChild(this.upButton=new A$n),this.addChild(this.downButton=new A$n)},A$C.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},A$C.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},A$C.onButtonMouseDown=function(A$C){var A$R=A$C.currentTarget===this.upButton;this.slide(A$R),A$L.timer.once(A$A.scrollBarDelayTime,this,this.startLoop,[A$R]),A$L.stage.once("mouseup",this,this.onStageMouseUp)},A$C.startLoop=function(A$C){A$L.timer.frameLoop(1,this,this.slide,[A$C])},A$C.slide=function(A$C){A$C?this.value-=this._scrollSize:this.value+=this._scrollSize},A$C.onStageMouseUp=function(A$C){A$L.timer.clear(this,this.startLoop),A$L.timer.clear(this,this.slide)},A$C.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},A$C.changeSize=function(){A$R.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},A$C.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},A$C.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},A$C.setScroll=function(A$C,A$R,A$j){this.runCallLater(this.changeSize),this.slider.setSlider(A$C,A$R,A$j),this.slider.bar.visible=0<A$R,!this._hide&&this.autoHide&&(this.visible=!1)},A$C.onTargetMouseWheel=function(A$C){this.value-=A$C.delta*this._scrollSize,this.target=this._target},A$C.onTargetMouseDown=function(A$C){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new A$F),this._lastPoint.setTo(A$L.stage.mouseX,A$L.stage.mouseY),A$L.timer.clear(this,this.tweenMove),A$h.clearTween(this),A$L.stage.once("mouseup",this,this.onStageMouseUp2),A$L.stage.once("mouseout",this,this.onStageMouseUp2),A$L.timer.frameLoop(1,this,this.loop)},A$C.loop=function(){var A$C=A$L.stage.mouseY,A$R=A$L.stage.mouseX;if(this._lastOffset=this.isVertical?A$C-this._lastPoint.y:A$R-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?A$L.stage._canvasTransform.getScaleY():A$L.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=A$R,this._lastPoint.y=A$C,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},A$C.onStageMouseUp2=function(A$C){if(A$L.stage.off("mouseup",this,this.onStageMouseUp2),A$L.stage.off("mouseout",this,this.onStageMouseUp2),A$L.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?A$h.to(this,{value:this.min},this.elasticBackTime,A$U.sineOut,A$M.create(this,this.elasticOver)):this._value>this.max&&A$h.to(this,{value:this.max},this.elasticBackTime,A$U.sineOut,A$M.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?A$L.stage.mouseY-this._lastPoint.y:A$L.stage.mouseX-this._lastPoint.x);for(var A$R=0,A$j=Math.min(this._offsets.length,3),A$w=0;A$w<A$j;A$w++)A$R+=this._offsets[this._offsets.length-1-A$w];if(this._lastOffset=A$R/A$j,(A$R=Math.abs(this._lastOffset))<2)return void this.event("end");60<A$R&&(this._lastOffset=0<this._lastOffset?60:-60);var A$T=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));A$L.timer.frameLoop(1,this,this.tweenMove,[A$T])}},A$C.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&A$h.to(this,{alpha:0},500),this.event("end")},A$C.tweenMove=function(A$C){this._lastOffset*=this.rollRatio;var A$R=NaN;if(0<A$C&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,A$R=.5*-(this.min-A$C-this.value),this._lastOffset>A$R&&(this._lastOffset=A$R)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,A$R=.5*-(this.max+A$C-this.value),this._lastOffset<A$R&&(this._lastOffset=A$R))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(A$L.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?A$h.to(this,{value:this.min},this.elasticBackTime,A$U.sineOut,A$M.create(this,this.elasticOver)):this._value>this.max?A$h.to(this,{value:this.max},this.elasticBackTime,A$U.sineOut,A$M.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&A$h.to(this,{alpha:0},500)}},A$C.stopScroll=function(){this.onStageMouseUp2(null),A$L.timer.clear(this,this.tweenMove),A$h.clearTween(this)},A$T(0,A$C,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(this._skin=A$C,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),A$T(0,A$C,"max",function(){return this.slider.max},function(A$C){this.slider.max=A$C}),A$T(0,A$C,"showButtons",function(){return this._showButtons},function(A$C){this._showButtons=A$C,this.callLater(this.changeScrollBar)}),A$T(0,A$C,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),A$T(0,A$C,"min",function(){return this.slider.min},function(A$C){this.slider.min=A$C}),A$T(0,A$C,"value",function(){return this._value},function(A$C){A$C!==this._value&&(this._value=A$C,this._isElastic||(this.slider._value!=A$C&&(this.slider._value=A$C,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),A$T(0,A$C,"isVertical",function(){return this.slider.isVertical},function(A$C){this.slider.isVertical=A$C}),A$T(0,A$C,"sizeGrid",function(){return this.slider.sizeGrid},function(A$C){this.slider.sizeGrid=A$C}),A$T(0,A$C,"scrollSize",function(){return this._scrollSize},function(A$C){this._scrollSize=A$C}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)||"string"==typeof A$C?this.value=Number(A$C):A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"thumbPercent",function(){return this._thumbPercent},function(A$C){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),A$C=1<=A$C?.99:A$C,this._thumbPercent=A$C,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*A$C,A$A.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*A$C,A$A.scrollBarMinNum))}),A$T(0,A$C,"target",function(){return this._target},function(A$C){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=A$C)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),A$T(0,A$C,"hide",function(){return this._hide},function(A$C){this._hide=A$C,this.visible=!A$C}),A$T(0,A$C,"touchScrollEnable",function(){return this._touchScrollEnable},function(A$C){this._touchScrollEnable=A$C,this.target=this._target}),A$T(0,A$C,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(A$C){this._mouseWheelEnable=A$C,this.target=this._target}),A$T(0,A$C,"tick",function(){return this.slider.tick},function(A$C){this.slider.tick=A$C}),A$j}(A$J),A$z=function(A$R){function A$j(A$C){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,A$j.__super.call(this),this.skin=A$C}A$G(A$j,"laya.ui.Slider",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._bg&&this._bg.destroy(A$C),this._bar&&this._bar.destroy(A$C),this._progress&&this._progress.destroy(A$C),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},A$C.createChildren=function(){this.addChild(this._bg=new A$l),this.addChild(this._bar=new A$n)},A$C.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},A$C.onBarMouseDown=function(A$C){this._globalSacle||(this._globalSacle=new A$F),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=A$L.stage.mouseX,this._ty=A$L.stage.mouseY,A$L.stage.on("mousemove",this,this.mouseMove),A$L.stage.once("mouseup",this,this.mouseUp),A$L.stage.once("mouseout",this,this.mouseUp),this.showValueText()},A$C.showValueText=function(){if(this.showLabel){var A$C=laya.ui.Slider.label;this.addChild(A$C),A$C.textField.changeText(this._value+""),this.isVertical?(A$C.x=this._bar.x+20,A$C.y=.5*(this._bar.height-A$C.height)+this._bar.y):(A$C.y=this._bar.y-20,A$C.x=.5*(this._bar.width-A$C.width)+this._bar.x)}},A$C.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},A$C.mouseUp=function(A$C){A$L.stage.off("mousemove",this,this.mouseMove),A$L.stage.off("mouseup",this,this.mouseUp),A$L.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},A$C.mouseMove=function(A$C){var A$R=this._value;this.isVertical?(this._bar.y+=(A$L.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(A$L.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=A$L.stage.mouseX,this._ty=A$L.stage.mouseY;var A$j=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*A$j)/A$j,this._value!=A$R&&this.sendChangeEvent(),this.showValueText()},A$C.sendChangeEvent=function(A$C){void 0===A$C&&(A$C="change"),this.event(A$C),this.changeHandler&&this.changeHandler.runWith(this._value)},A$C.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},A$C.changeSize=function(){A$R.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},A$C.setSlider=function(A$C,A$R,A$j){this._value=-1,this._min=A$C,this._max=A$C<A$R?A$R:A$C,this.value=A$j<A$C?A$C:A$R<A$j?A$R:A$j},A$C.changeValue=function(){var A$C=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*A$C)/A$C,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var A$R=this._max-this._min;0===A$R&&(A$R=1),this.isVertical?(this._bar.y=(this._value-this._min)/A$R*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/A$R*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},A$C.onBgMouseDown=function(A$C){var A$R=this._bg.getMousePoint();this.isVertical?this.value=A$R.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=A$R.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},A$T(0,A$C,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){if(this._skin!=A$C){this._skin=A$C,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var A$R=this._skin.replace(".png","$progress.png");A$Z.getRes(A$R)&&(this._progress||(this.addChild(this._progress=new A$l),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=A$R),this.setBarPoint(),this.callLater(this.changeValue)}}),A$T(0,A$C,"allowClickBack",function(){return this._allowClickBack},function(A$C){this._allowClickBack!=A$C&&((this._allowClickBack=A$C)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),A$T(0,A$C,"max",function(){return this._max},function(A$C){this._max!=A$C&&(this._max=A$C,this.callLater(this.changeValue))}),A$T(0,A$C,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),A$T(0,A$C,"tick",function(){return this._tick},function(A$C){this._tick!=A$C&&(this._tick=A$C,this.callLater(this.changeValue))}),A$T(0,A$C,"sizeGrid",function(){return this._bg.sizeGrid},function(A$C){this._bg.sizeGrid=A$C,this._bar.sizeGrid=A$C,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),A$T(0,A$C,"min",function(){return this._min},function(A$C){this._min!=A$C&&(this._min=A$C,this.callLater(this.changeValue))}),A$T(0,A$C,"value",function(){return this._value},function(A$C){if(this._value!=A$C){var A$R=this._value;this._value=A$C,this.changeValue(),this._value!=A$R&&this.sendChangeEvent()}}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)||"string"==typeof A$C?this.value=Number(A$C):A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"bar",function(){return this._bar}),A$w(A$j,["label",function(){return this.label=new A$g}]),A$j}(A$J),A$l=function(A$R){function A$j(A$C){this._bitmap=null,this._skin=null,this._group=null,A$j.__super.call(this),this.skin=A$C}A$G(A$j,"laya.ui.Image",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,A$Z.clearCache(this,this._skin)},A$C.dispose=function(){this.destroy(!0),A$Z.clearCache(this,this._skin)},A$C.createChildren=function(){this.graphics=this._bitmap=new A$P},A$C.setSource=function(A$C,A$R){A$C===this._skin&&A$R&&(this.source=A$R,this.onCompResize())},A$T(0,A$C,"source",function(){return this._bitmap.source},function(A$C){this._bitmap&&(this._bitmap.source=A$C,this.event("loaded"),this.repaint())}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"string"==typeof(this._dataSource=A$C)?this.skin=A$C:A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"measureHeight",function(){return this._bitmap.height}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){if(this._skin!=A$C)if(A$Z.clearCache(this,this._skin),this._skin=A$C){A$Z.keepCache(this,this._skin);var A$R=A$Z.getRes(A$C);A$R?(this.source=A$R,this.onCompResize()):A$L.loader.load(this._skin,A$M.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),A$T(0,A$C,"group",function(){return this._group},function(A$C){A$C&&this._skin&&A$Z.setGroup(this._skin,A$C),this._group=A$C}),A$T(0,A$C,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(A$C){this._bitmap.sizeGrid=A$r.fillArray(A$A.defaultSizeGrid,A$C,Number)}),A$T(0,A$C,"measureWidth",function(){return this._bitmap.width}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$J,this,"width",A$C),this._bitmap.width=0==A$C?1e-7:A$C}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$J,this,"height",A$C),this._bitmap.height=0==A$C?1e-7:A$C}),A$j}(A$J),A$g=function(A$R){function A$j(A$C){this._tf=null,A$j.__super.call(this),void 0===A$C&&(A$C=""),A$I.defaultColor=A$A.labelColor,this.text=A$C}A$G(A$j,"laya.ui.Label",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._tf=null},A$C.createChildren=function(){this.addChild(this._tf=new A$f)},A$C.changeText=function(A$C){this._tf.changeText(A$C)},A$T(0,A$C,"padding",function(){return this._tf.padding.join(",")},function(A$C){this._tf.padding=A$r.fillArray(A$A.labelPadding,A$C,Number)}),A$T(0,A$C,"bold",function(){return this._tf.bold},function(A$C){this._tf.bold=A$C}),A$T(0,A$C,"align",function(){return this._tf.align},function(A$C){this._tf.align=A$C}),A$T(0,A$C,"text",function(){return this._tf.text},function(A$C){this._tf.text!=A$C&&(A$C&&(A$C=A$r.adptString(A$C+"")),this._tf.text=A$C,this.event("change"),this._width&&this._height||this.onCompResize())}),A$T(0,A$C,"italic",function(){return this._tf.italic},function(A$C){this._tf.italic=A$C}),A$T(0,A$C,"wordWrap",function(){return this._tf.wordWrap},function(A$C){this._tf.wordWrap=A$C}),A$T(0,A$C,"font",function(){return this._tf.font},function(A$C){this._tf.font=A$C}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)||"string"==typeof A$C?this.text=A$C+"":A$L.superSet(A$J,this,"dataSource",A$C)}),A$T(0,A$C,"color",function(){return this._tf.color},function(A$C){this._tf.color=A$C}),A$T(0,A$C,"valign",function(){return this._tf.valign},function(A$C){this._tf.valign=A$C}),A$T(0,A$C,"leading",function(){return this._tf.leading},function(A$C){this._tf.leading=A$C}),A$T(0,A$C,"fontSize",function(){return this._tf.fontSize},function(A$C){this._tf.fontSize=A$C}),A$T(0,A$C,"bgColor",function(){return this._tf.bgColor},function(A$C){this._tf.bgColor=A$C}),A$T(0,A$C,"borderColor",function(){return this._tf.borderColor},function(A$C){this._tf.borderColor=A$C}),A$T(0,A$C,"stroke",function(){return this._tf.stroke},function(A$C){this._tf.stroke=A$C}),A$T(0,A$C,"strokeColor",function(){return this._tf.strokeColor},function(A$C){this._tf.strokeColor=A$C}),A$T(0,A$C,"textField",function(){return this._tf}),A$T(0,A$C,"measureWidth",function(){return this._tf.width}),A$T(0,A$C,"measureHeight",function(){return this._tf.height}),A$T(0,A$C,"width",function(){return this._width||this._tf.text?A$L.superGet(A$J,this,"width"):0},function(A$C){A$L.superSet(A$J,this,"width",A$C),this._tf.width=A$C}),A$T(0,A$C,"height",function(){return this._height||this._tf.text?A$L.superGet(A$J,this,"height"):0},function(A$C){A$L.superSet(A$J,this,"height",A$C),this._tf.height=A$C}),A$T(0,A$C,"overflow",function(){return this._tf.overflow},function(A$C){this._tf.overflow=A$C}),A$T(0,A$C,"underline",function(){return this._tf.underline},function(A$C){this._tf.underline=A$C}),A$T(0,A$C,"underlineColor",function(){return this._tf.underlineColor},function(A$C){this._tf.underlineColor=A$C}),A$j}(A$J),A$B=function(A$R){function A$j(A$C){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,A$j.__super.call(this),this.skin=A$C}A$G(A$j,"laya.ui.ProgressBar",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._bg&&this._bg.destroy(A$C),this._bar&&this._bar.destroy(A$C),this._bg=this._bar=null,this.changeHandler=null},A$C.createChildren=function(){this.addChild(this._bg=new A$l),this.addChild(this._bar=new A$l)},A$C.changeValue=function(){if(this.sizeGrid){var A$C=this.sizeGrid.split(","),A$R=Number(A$C[3]),A$j=Number(A$C[1]),A$w=(this.width-A$R-A$j)*this._value;this._bar.width=A$R+A$j+A$w,this._bar.visible=this._bar.width>A$R+A$j}else this._bar.width=this.width*this._value},A$T(0,A$C,"measureHeight",function(){return this._bg.height}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(this._skin=A$C,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),A$T(0,A$C,"measureWidth",function(){return this._bg.width}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$J,this,"height",A$C),this._bg.height=this._height,this._bar.height=this._height}),A$T(0,A$C,"bar",function(){return this._bar}),A$T(0,A$C,"value",function(){return this._value},function(A$C){this._value!=A$C&&(A$C=1<A$C?1:A$C<0?0:A$C,this._value=A$C,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(A$C))}),A$T(0,A$C,"bg",function(){return this._bg}),A$T(0,A$C,"sizeGrid",function(){return this._bg.sizeGrid},function(A$C){this._bg.sizeGrid=this._bar.sizeGrid=A$C}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$J,this,"width",A$C),this._bg.width=this._width,this.callLater(this.changeValue)}),A$T(0,A$C,"dataSource",A$R.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)||"string"==typeof A$C?this.value=Number(A$C):A$L.superSet(A$J,this,"dataSource",A$C)}),A$j}(A$J),A$i=(function(A$C){function A$j(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,A$j.__super.call(this),this._tipBox=new A$J,this._tipBox.addChild(this._tipText=new A$f),this._tipText.x=this._tipText.y=5,this._tipText.color=A$j.tipTextColor,this._defaultTipHandler=this._showDefaultTip,A$L.stage.on("showtip",this,this._onStageShowTip),A$L.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}A$G(A$j,"laya.ui.TipManager",A$J);var A$R=A$j.prototype;A$R._onStageHideTip=function(A$C){A$L.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},A$R._onStageShowTip=function(A$C){A$L.timer.once(A$j.tipDelay,this,this._showTip,[A$C],!0)},A$R._showTip=function(A$C){if("string"==typeof A$C){var A$R=String(A$C);Boolean(A$R)&&this._defaultTipHandler(A$R)}else A$C instanceof laya.utils.Handler?A$C.run():"function"==typeof A$C&&A$C.apply();A$L.stage.on("mousemove",this,this._onStageMouseMove),A$L.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},A$R._onStageMouseDown=function(A$C){this.closeAll()},A$R._onStageMouseMove=function(A$C){this._showToStage(this,A$j.offsetX,A$j.offsetY)},A$R._showToStage=function(A$C,A$R,A$j){void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0);var A$w=A$C.getBounds();A$C.x=A$L.stage.mouseX+A$R,A$C.y=A$L.stage.mouseY+A$j,A$C.x+A$w.width>A$L.stage.width&&(A$C.x-=A$w.width+A$R),A$C.y+A$w.height>A$L.stage.height&&(A$C.y-=A$w.height+A$j)},A$R.closeAll=function(){A$L.timer.clear(this,this._showTip),A$L.stage.off("mousemove",this,this._onStageMouseMove),A$L.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},A$R.showDislayTip=function(A$C){this.addChild(A$C),this._showToStage(this),A$L._currentStage.addChild(this)},A$R._showDefaultTip=function(A$C){this._tipText.text=A$C;var A$R=this._tipBox.graphics;A$R.clear(),A$R.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,A$j.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),A$L._currentStage.addChild(this)},A$T(0,A$R,"defaultTipHandler",function(){return this._defaultTipHandler},function(A$C){this._defaultTipHandler=A$C}),A$j.offsetX=10,A$j.offsetY=15,A$j.tipTextColor="#ffffff",A$j.tipBackColor="#111111",A$j.tipDelay=200}(),function(A$C){var A$K;function A$F(){this._idMap=null,this._aniList=null,this._watchMap={},A$F.__super.call(this)}A$G(A$F,"laya.ui.View",A$a);var A$R=A$F.prototype;return A$R.createView=function(A$C){if(A$C.animations&&!this._idMap&&(this._idMap={}),A$F.createComp(A$C,this,this),A$C.animations){var A$R,A$j,A$w=[],A$T=A$C.animations,A$G=0,A$o=A$T.length;for(A$G=0;A$G<A$o;A$G++){switch(A$R=new A$e,A$j=A$T[A$G],A$R._setUp(this._idMap,A$j),(this[A$j.name]=A$R)._setControlNode(this),A$j.action){case 1:A$R.play(0,!1);break;case 2:A$R.play(0,!0)}A$w.push(A$R)}this._aniList=A$w}0<this._width&&null==A$C.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},A$R.onEvent=function(A$C,A$R){},A$R.loadUI=function(A$C){var A$R=A$F.uiMap[A$C];A$R&&this.createView(A$R)},A$R.destroy=function(A$C){void 0===A$C&&(A$C=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,A$C)},A$R.changeData=function(A$C){var A$R=this._watchMap[A$C];if(A$R){console.log("change",A$C);for(var A$j=0,A$w=A$R.length;A$j<A$w;A$j++){A$R[A$j].exe(this)}}},A$F._regs=function(){for(var A$C in A$F.uiClassMap)A$D.regClass(A$C,A$F.uiClassMap[A$C])},A$F.createComp=function(A$C,A$R,A$j,A$w){if(!(A$R=A$R||A$F.getCompInstance(A$C)))return console.warn("can not create:"+A$C.type),null;var A$T=A$C.child;if(A$T)for(var A$G=A$R instanceof laya.ui.List,A$o=0,A$U=A$T.length;A$o<A$U;A$o++){var A$t=A$T[A$o];if(!A$R.hasOwnProperty("itemRender")||"render"!=A$t.props.name&&"render"!==A$t.props.renderType)if("Graphic"==A$t.type)A$D.addGraphicsToSprite(A$t,A$R);else if(A$D.isDrawType(A$t.type))A$D.addGraphicToSprite(A$t,A$R,!0);else{if(A$G){var A$I=[],A$e=A$F.createComp(A$t,null,A$j,A$I);A$I.length&&(A$e._$bindData=A$I)}else A$e=A$F.createComp(A$t,null,A$j,A$w);"Script"==A$t.type?"owner"in A$e?A$e.owner=A$R:"target"in A$e&&(A$e.target=A$R):"mask"==A$t.props.renderType||"mask"==A$t.props.name?A$R.mask=A$e:A$e instanceof laya.display.Sprite&&A$R.addChild(A$e)}else A$R.itemRender=A$t}var A$H=A$C.props;for(var A$M in A$H){var A$K=A$H[A$M];A$F.eventDic[A$M]?A$K&&A$j&&A$R.on(A$M,A$j,A$j.onEvent,[A$K]):A$F.setCompValue(A$R,A$M,A$K,A$j,A$w)}return A$L.__typeof(A$R,"laya.ui.IItem")&&A$R.initItems(),A$C.compId&&A$j&&A$j._idMap&&(A$j._idMap[A$C.compId]=A$R),A$R},A$F.setCompValue=function(A$C,A$R,A$j,A$w,A$T){if("string"==typeof A$j&&-1<A$j.indexOf("${")){if(A$F._sheet||(A$F._sheet=A$D.getClass("laya.data.Table")),!A$F._sheet)return void console.warn("Can not find class Sheet");if(A$T)A$T.push(A$C,A$R,A$j);else if(A$w){-1==A$j.indexOf("].")&&(A$j=A$j.replace(".","[0]."));var A$G,A$o,A$U=new A$K(A$C,A$R,A$j);A$U.exe(A$w);for(var A$t=A$j.replace(/\[.*?\]\./g,".");null!=(A$G=A$F._parseWatchData.exec(A$t));){for(var A$I=A$G[1];null!=(A$o=A$F._parseKeyWord.exec(A$I));){var A$e=A$o[0],A$H=A$w._watchMap[A$e]||(A$w._watchMap[A$e]=[]);A$H.push(A$U),A$F._sheet.I.notifer.on(A$e,A$w,A$w.changeData,[A$e])}(A$H=A$w._watchMap[A$I]||(A$w._watchMap[A$I]=[])).push(A$U),A$F._sheet.I.notifer.on(A$I,A$w,A$w.changeData,[A$I])}}}else if("var"===A$R&&A$w)A$w[A$j]=A$C;else if("onClick"==A$R){var A$M=A$L._runScript("(function(){"+A$j+"})");A$C.on("click",A$w,A$M)}else A$C[A$R]="true"===A$j||"false"!==A$j&&A$j},A$F.getCompInstance=function(A$C){var A$R,A$j=A$C.props?A$C.props.runtime:null;return A$R=A$j?A$F.viewClassMap[A$j]||A$F.uiClassMap[A$j]||A$L.__classmap[A$j]:A$F.uiClassMap[A$C.type],A$C.props&&A$C.props.hasOwnProperty("renderType")&&"instance"==A$C.props.renderType?A$R.instance:A$R?new A$R:null},A$F.regComponent=function(A$C,A$R){A$F.uiClassMap[A$C]=A$R,A$D.regClass(A$C,A$R)},A$F.regViewRuntime=function(A$C,A$R){A$F.viewClassMap[A$C]=A$R},A$F.uiMap={},A$F.viewClassMap={},A$F._sheet=null,A$w(A$F,["uiClassMap",function(){return this.uiClassMap={ViewStack:A$CC,LinkButton:A$n,TextArea:A$IC,ColorPicker:A$m,Box:A$a,Button:A$n,CheckBox:A$_,Clip:A$y,ComboBox:A$k,Component:A$J,HScrollBar:A$X,HSlider:A$d,Image:A$l,Label:A$g,List:A$c,Panel:A$Y,ProgressBar:A$B,Radio:A$q,RadioGroup:A$UC,ScrollBar:A$V,Slider:A$z,Tab:A$tC,TextInput:A$jC,View:A$F,VScrollBar:A$RC,VSlider:A$wC,Tree:A$v,HBox:A$GC,VBox:A$oC,Sprite:A$b,Animation:A$j,Text:A$f,FontClip:A$s}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),A$F.__init$=function(){A$F._regs(),A$K=function(){function A$C(A$C,A$R,A$j){this.comp=null,this.prop=null,this.value=null,this.comp=A$C,this.prop=A$R,this.value=A$j}return A$G(A$C,""),A$C.prototype.exe=function(A$C){var A$R=A$r.getBindFun(this.value);this.comp[this.prop]=A$R.call(this,A$C)},A$C}()},A$F}()),A$_=function(A$C){function A$j(A$C,A$R){void 0===A$R&&(A$R=""),A$j.__super.call(this,A$C,A$R)}A$G(A$j,"laya.ui.CheckBox",A$C);var A$R=A$j.prototype;return A$R.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},A$R.initialize=function(){A$C.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},A$T(0,A$R,"dataSource",A$C.prototype._$get_dataSource,function(A$C){"boolean"==typeof(this._dataSource=A$C)?this.selected=A$C:"string"==typeof A$C?this.selected="true"===A$C:A$L.superSet(A$n,this,"dataSource",A$C)}),A$j}(A$n),A$u=function(A$C){function A$R(){this._space=0,this._align="none",this._itemChanged=!1,A$R.__super.call(this)}A$G(A$R,"laya.ui.LayoutBox",A$a);var A$j=A$R.prototype;return A$j.addChild=function(A$C){return A$C.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,A$C)},A$j.onResize=function(A$C){this._setItemChanged()},A$j.addChildAt=function(A$C,A$R){return A$C.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,A$C,A$R)},A$j.removeChild=function(A$C){return A$C.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,A$C)},A$j.removeChildAt=function(A$C){return this.getChildAt(A$C).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,A$C)},A$j.refresh=function(){this._setItemChanged()},A$j.changeItems=function(){this._itemChanged=!1},A$j.sortItem=function(A$C){A$C&&A$C.sort(function(A$C,A$R){return A$C.y-A$R.y})},A$j._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},A$T(0,A$j,"space",function(){return this._space},function(A$C){this._space=A$C,this._setItemChanged()}),A$T(0,A$j,"align",function(){return this._align},function(A$C){this._align=A$C,this._setItemChanged()}),A$R}(),A$s=function(A$R){function A$j(A$C,A$R){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,A$j.__super.call(this),A$C&&(this.skin=A$C),A$R&&(this.sheet=A$R)}A$G(A$j,"laya.ui.FontClip",A$R);var A$C=A$j.prototype;return A$C.createChildren=function(){this._bitmap=new A$P,this.on("loaded",this,this._onClipLoaded)},A$C._onClipLoaded=function(){this.callLater(this.changeValue)},A$C.changeValue=function(){var A$C;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),A$C=this._sources[0]))){var A$R="horizontal"===this._direction;A$R?(this._wordsW=this._valueArr.length*(A$C.sourceWidth+this.spaceX),this._wordsH=A$C.sourceHeight):(this._wordsW=A$C.sourceWidth,this._wordsH=(A$C.sourceHeight+this.spaceY)*this._valueArr.length);var A$j=0;if(this._width)switch(this._align){case"center":A$j=.5*(this._width-this._wordsW);break;case"right":A$j=this._width-this._wordsW;break;default:A$j=0}for(var A$w=0,A$T=this._valueArr.length;A$w<A$T;A$w++){var A$G=this._indexMap[this._valueArr.charAt(A$w)];this.sources[A$G]&&(A$C=this.sources[A$G],A$R?this.graphics.drawTexture(A$C,A$j+A$w*(A$C.sourceWidth+this.spaceX),0,A$C.sourceWidth,A$C.sourceHeight):this.graphics.drawTexture(A$C,0+A$j,A$w*(A$C.sourceHeight+this.spaceY),A$C.sourceWidth,A$C.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),A$R.prototype.destroy.call(this,A$C)},A$T(0,A$C,"sheet",function(){return this._sheet},function(A$C){A$C+="";var A$R=(this._sheet=A$C).split(" ");this._clipX=String(A$R[0]).length,this.clipY=A$R.length,this._indexMap={};for(var A$j=0;A$j<this._clipY;A$j++)for(var A$w=A$R[A$j].split(""),A$T=0,A$G=A$w.length;A$T<A$G;A$T++)this._indexMap[A$w[A$T]]=A$j*this._clipX+A$T}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$y,this,"height",A$C),this.callLater(this.changeValue)}),A$T(0,A$C,"direction",function(){return this._direction},function(A$C){this._direction=A$C,this.callLater(this.changeValue)}),A$T(0,A$C,"value",function(){return this._valueArr?this._valueArr:""},function(A$C){A$C+="",this._valueArr=A$C,this.callLater(this.changeValue)}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$y,this,"width",A$C),this.callLater(this.changeValue)}),A$T(0,A$C,"spaceX",function(){return this._spaceX},function(A$C){this._spaceX=A$C,"horizontal"===this._direction&&this.callLater(this.changeValue)}),A$T(0,A$C,"spaceY",function(){return this._spaceY},function(A$C){this._spaceY=A$C,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),A$T(0,A$C,"align",function(){return this._align},function(A$C){this._align=A$C,this.callLater(this.changeValue)}),A$T(0,A$C,"measureWidth",function(){return this._wordsW}),A$T(0,A$C,"measureHeight",function(){return this._wordsH}),A$j}(A$y),A$c=function(A$C){function A$R(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new A$F,A$R.__super.call(this)}A$G(A$R,"laya.ui.List",A$C);var A$j=A$R.prototype;return A$L.imps(A$j,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),this._content&&this._content.destroy(A$C),this._scrollBar&&this._scrollBar.destroy(A$C),laya.ui.Component.prototype.destroy.call(this,A$C),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},A$j.createChildren=function(){this.addChild(this._content=new A$a)},A$j.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=A$L.superGet(A$a,this,"cacheAs")),A$L.superSet(A$a,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},A$j.onScrollEnd=function(){A$L.superSet(A$a,this,"cacheAs",this._$P.cacheAs)},A$j._removePreScrollBar=function(){var A$C=this.removeChildByName("scrollBar");A$C&&A$C.destroy(!0)},A$j.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var A$C=this._getOneCell(),A$R=A$C.width+this._spaceX||1,A$j=A$C.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/A$R):Math.ceil(this._width/A$R)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/A$j):Math.round(this._height/A$j));var A$w=this._width?this._width:A$R*this.repeatX-this._spaceX,A$T=this._height?this._height:A$j*this.repeatY-this._spaceY;this._cellSize=this._isVertical?A$j:A$R,this._cellOffset=this._isVertical?A$j*Math.max(this._repeatY2,this._repeatY)-A$T-this._spaceY:A$R*Math.max(this._repeatX2,this._repeatX)-A$w-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=A$T:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=A$w),this.setContentSize(A$w,A$T);var A$G=this._isVertical?this.repeatX:this.repeatY,A$o=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,A$G,A$o),this._createdLine=A$o,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},A$j._getOneCell=function(){if(0===this._cells.length){var A$C=this.createItem();if(this._offset.setTo(A$C.x,A$C.y),this.cacheContent)return A$C;this._cells.push(A$C)}return this._cells[0]},A$j._createItems=function(A$C,A$R,A$j){var A$w=this._content,A$T=this._getOneCell(),A$G=A$T.width+this._spaceX,A$o=A$T.height+this._spaceY;if(this.cacheContent){var A$U=new A$a;A$U.cacheAsBitmap=!0,A$U.pos((this._isVertical?0:A$C)*A$G,(this._isVertical?A$C:0)*A$o),this._content.addChild(A$U),this._content.optimizeScrollRect=!0,A$w=A$U}else{for(var A$t=[],A$I=this._cells.length-1;-1<A$I;A$I--){var A$e=this._cells[A$I];A$e.removeSelf(),A$t.push(A$e)}this._cells.length=0}for(var A$H=A$C;A$H<A$j;A$H++)for(var A$M=0;A$M<A$R;A$M++)(A$T=A$t&&A$t.length?A$t.pop():this.createItem()).x=(this._isVertical?A$M:A$H)*A$G-A$w.x,A$T.y=(this._isVertical?A$H:A$M)*A$o-A$w.y,A$T.name="item"+(A$H*A$R+A$M),A$w.addChild(A$T),this.addCell(A$T)},A$j.createItem=function(){var A$C=[];if("function"==typeof this._itemRender)var A$R=new this._itemRender;else A$R=A$i.createComp(this._itemRender,null,null,A$C);if(0==A$C.length&&A$R._watchMap){var A$j=A$R._watchMap;for(var A$w in A$j)for(var A$T=A$j[A$w],A$G=0;A$G<A$T.length;A$G++){var A$o=A$T[A$G];A$C.push(A$o.comp,A$o.prop,A$o.value)}}return A$C.length&&(A$R._$bindData=A$C),A$R},A$j.addCell=function(A$C){A$C.on("click",this,this.onCellMouse),A$C.on("rightclick",this,this.onCellMouse),A$C.on("mouseover",this,this.onCellMouse),A$C.on("mouseout",this,this.onCellMouse),A$C.on("mousedown",this,this.onCellMouse),A$C.on("mouseup",this,this.onCellMouse),this._cells.push(A$C)},A$j.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var A$C=0,A$R=A$C=0;A$R<1e4;A$R++){var A$j=this.getChildByName("item"+A$R);if(!A$j)break;this.addCell(A$j),A$C++}this.repeatY=A$C}},A$j.setContentSize=function(A$C,A$R){this._content.width=A$C,this._content.height=A$R,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new A$Q),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,A$C,A$R),this._content.scrollRect=this._content.scrollRect),this.event("resize")},A$j.onCellMouse=function(A$C){"mousedown"===A$C.type&&(this._isMoved=!1);var A$R=A$C.currentTarget,A$j=this._startIndex+this._cells.indexOf(A$R);A$j<0||("click"===A$C.type||"rightclick"===A$C.type?this.selectEnable&&!this._isMoved?this.selectedIndex=A$j:this.changeCellState(A$R,!0,0):"mouseover"!==A$C.type&&"mouseout"!==A$C.type||this._selectedIndex===A$j||this.changeCellState(A$R,"mouseover"===A$C.type,0),this.mouseHandler&&this.mouseHandler.runWith([A$C,A$j]))},A$j.changeCellState=function(A$C,A$R,A$j){var A$w=A$C.getChildByName("selectBox");A$w&&(this.selectEnable=!0,A$w.visible=A$R,A$w.index=A$j)},A$j.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},A$j.onScrollBarChange=function(A$C){this.runCallLater(this.changeCells);var A$R=this._scrollBar.value,A$j=this._isVertical?this.repeatX:this.repeatY,A$w=this._isVertical?this.repeatY:this.repeatX,A$T=Math.floor(A$R/this._cellSize);if(this.cacheContent)A$o=A$w+1,this._createdLine-A$T<A$o&&(this._createItems(this._createdLine,A$j,this._createdLine+A$o),this.renderItems(this._createdLine*A$j,0),this._createdLine+=A$o);else{var A$G=A$T*A$j,A$o=0;if(A$G>this._startIndex){A$o=A$G-this._startIndex;var A$U=!0,A$t=this._startIndex+A$j*(A$w+1);this._isMoved=!0}else A$G<this._startIndex&&(A$o=this._startIndex-A$G,A$U=!1,A$t=this._startIndex-1,this._isMoved=!0);for(var A$I=0;A$I<A$o;A$I++){if(A$U){var A$e=this._cells.shift();this._cells[this._cells.length]=A$e;var A$H=A$t+A$I}else A$e=this._cells.pop(),this._cells.unshift(A$e),A$H=A$t-A$I;var A$M=Math.floor(A$H/A$j)*this._cellSize;this._isVertical?A$e.y=A$M:A$e.x=A$M,this.renderItem(A$e,A$H)}this._startIndex=A$G,this.changeSelectStatus()}var A$K=this._content.scrollRect;this._isVertical?(A$K.y=A$R-this._offset.y,A$K.x=-this._offset.x):(A$K.y=-this._offset.y,A$K.x=A$R-this._offset.x),this._content.scrollRect=A$K},A$j.posCell=function(A$C,A$R){if(this._scrollBar){var A$j=this._isVertical?this.repeatX:this.repeatY,A$w=(this._isVertical?this.repeatY:this.repeatX,Math.floor(A$R/A$j)*this._cellSize);this._isVertical?A$C.y=A$w:A$C.x=A$w}},A$j.changeSelectStatus=function(){for(var A$C=0,A$R=this._cells.length;A$C<A$R;A$C++)this.changeCellState(this._cells[A$C],this._selectedIndex===this._startIndex+A$C,1)},A$j.renderItems=function(A$C,A$R){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0);for(var A$j=A$C,A$w=A$R||this._cells.length;A$j<A$w;A$j++)this.renderItem(this._cells[A$j],this._startIndex+A$j);this.changeSelectStatus()},A$j.renderItem=function(A$C,A$R){this._array&&0<=A$R&&A$R<this._array.length?(A$C.visible=!0,A$C._$bindData?(A$C._dataSource=this._array[A$R],this._bindData(A$C,this._array[A$R])):A$C.dataSource=this._array[A$R],this.cacheContent||this.posCell(A$C,A$R),this.hasListener("render")&&this.event("render",[A$C,A$R]),this.renderHandler&&this.renderHandler.runWith([A$C,A$R])):(A$C.visible=!1,A$C.dataSource=null)},A$j._bindData=function(A$C,A$R){for(var A$j=A$C._$bindData,A$w=0,A$T=A$j.length;A$w<A$T;A$w++){var A$G=A$j[A$w++],A$o=A$j[A$w++],A$U=A$j[A$w],A$t=A$r.getBindFun(A$U);A$G[A$o]=A$t.call(this,A$R)}},A$j.refresh=function(){this.array=this._array},A$j.getItem=function(A$C){return-1<A$C&&A$C<this._array.length?this._array[A$C]:null},A$j.changeItem=function(A$C,A$R){-1<A$C&&A$C<this._array.length&&(this._array[A$C]=A$R,A$C>=this._startIndex&&A$C<this._startIndex+this._cells.length&&this.renderItem(this.getCell(A$C),A$C))},A$j.setItem=function(A$C,A$R){this.changeItem(A$C,A$R)},A$j.addItem=function(A$C){this._array.push(A$C),this.array=this._array},A$j.addItemAt=function(A$C,A$R){this._array.splice(A$R,0,A$C),this.array=this._array},A$j.deleteItem=function(A$C){this._array.splice(A$C,1),this.array=this._array},A$j.getCell=function(A$C){return this.runCallLater(this.changeCells),-1<A$C&&this._cells?this._cells[(A$C-this._startIndex)%this._cells.length]:null},A$j.scrollTo=function(A$C){if(this._scrollBar){var A$R=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(A$C/A$R)*this._cellSize}else this.startIndex=A$C},A$j.tweenTo=function(A$C,A$R,A$j){if(void 0===A$R&&(A$R=200),this._scrollBar){var A$w=this._isVertical?this.repeatX:this.repeatY;A$h.to(this._scrollBar,{value:Math.floor(A$C/A$w)*this._cellSize},A$R,null,A$j,0,!0)}else this.startIndex=A$C,A$j&&A$j.run()},A$j._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},A$j.commitMeasure=function(){this.runCallLater(this.changeCells)},A$T(0,A$j,"cacheAs",A$C.prototype._$get_cacheAs,function(A$C){A$L.superSet(A$a,this,"cacheAs",A$C),this._scrollBar&&(this._$P.cacheAs=null,"none"!==A$C?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),A$T(0,A$j,"content",function(){return this._content}),A$T(0,A$j,"height",A$C.prototype._$get_height,function(A$C){A$C!=this._height&&(A$L.superSet(A$a,this,"height",A$C),this._setCellChanged())}),A$T(0,A$j,"itemRender",function(){return this._itemRender},function(A$C){if(this._itemRender!=A$C){this._itemRender=A$C;for(var A$R=this._cells.length-1;-1<A$R;A$R--)this._cells[A$R].destroy();this._cells.length=0,this._setCellChanged()}}),A$T(0,A$j,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(A$C){this._removePreScrollBar();var A$R=new A$RC;A$R.name="scrollBar",A$R.right=0,A$C&&" "!=A$C&&(A$R.skin=A$C),this.scrollBar=A$R,this.addChild(A$R),this._setCellChanged()}),A$T(0,A$j,"page",function(){return this._page},function(A$C){this._page=A$C,this._array&&(this._page=0<A$C?A$C:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),A$T(0,A$j,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(A$C){this._removePreScrollBar();var A$R=new A$X;A$R.name="scrollBar",A$R.bottom=0,A$C&&" "!=A$C&&(A$R.skin=A$C),this.scrollBar=A$R,this.addChild(A$R),this._setCellChanged()}),A$T(0,A$j,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(A$C){this._repeatX=A$C,this._setCellChanged()}),A$T(0,A$j,"scrollBar",function(){return this._scrollBar},function(A$C){this._scrollBar!=A$C&&(this._scrollBar=A$C)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),A$T(0,A$j,"width",A$C.prototype._$get_width,function(A$C){A$C!=this._width&&(A$L.superSet(A$a,this,"width",A$C),this._setCellChanged())}),A$T(0,A$j,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(A$C){this._repeatY=A$C,this._setCellChanged()}),A$T(0,A$j,"spaceX",function(){return this._spaceX},function(A$C){this._spaceX=A$C,this._setCellChanged()}),A$T(0,A$j,"spaceY",function(){return this._spaceY},function(A$C){this._spaceY=A$C,this._setCellChanged()}),A$T(0,A$j,"selectedIndex",function(){return this._selectedIndex},function(A$C){this._selectedIndex!=A$C&&(this._selectedIndex=A$C,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(A$C),this.startIndex=this._startIndex)}),A$T(0,A$j,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(A$C){this.selectedIndex=this._array.indexOf(A$C)}),A$T(0,A$j,"length",function(){return this._array?this._array.length:0}),A$T(0,A$j,"selection",function(){return this.getCell(this._selectedIndex)},function(A$C){this.selectedIndex=this._startIndex+this._cells.indexOf(A$C)}),A$T(0,A$j,"startIndex",function(){return this._startIndex},function(A$C){this._startIndex=0<A$C?A$C:0,this.callLater(this.renderItems)}),A$T(0,A$j,"array",function(){return this._array},function(A$C){this.runCallLater(this.changeCells),this._array=A$C||[];var A$R=this._array.length;if(this.totalPage=Math.ceil(A$R/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<A$R?this._selectedIndex:A$R-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var A$j=this._isVertical?this.repeatX:this.repeatY,A$w=this._isVertical?this.repeatY:this.repeatX,A$T=Math.ceil(A$R/A$j);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=A$w/A$T,this._scrollBar.setScroll(0,(A$T-A$w)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),A$T(0,A$j,"dataSource",A$C.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)&&Math.floor(A$C)==A$C||"string"==typeof A$C?this.selectedIndex=parseInt(A$C):A$C instanceof Array?this.array=A$C:A$L.superSet(A$a,this,"dataSource",A$C)}),A$T(0,A$j,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),A$R}(A$a),A$X=function(A$C){function A$R(){A$R.__super.call(this)}return A$G(A$R,"laya.ui.HScrollBar",A$C),A$R.prototype.initialize=function(){A$C.prototype.initialize.call(this),this.slider.isVertical=!1},A$R}(A$V),A$Y=function(A$C){function A$R(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,A$R.__super.call(this),this.width=this.height=100}A$G(A$R,"laya.ui.Panel",A$C);var A$j=A$R.prototype;return A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),laya.ui.Component.prototype.destroy.call(this,A$C),this._content&&this._content.destroy(A$C),this._vScrollBar&&this._vScrollBar.destroy(A$C),this._hScrollBar&&this._hScrollBar.destroy(A$C),this._vScrollBar=null,this._hScrollBar=null,this._content=null},A$j.destroyChildren=function(){this._content.destroyChildren()},A$j.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new A$a)},A$j.addChild=function(A$C){return A$C.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(A$C)},A$j.onResize=function(){this._setScrollChanged()},A$j.addChildAt=function(A$C,A$R){return A$C.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(A$C,A$R)},A$j.removeChild=function(A$C){return A$C.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(A$C)},A$j.removeChildAt=function(A$C){return this.getChildAt(A$C).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(A$C)},A$j.removeChildren=function(A$C,A$R){return void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=2147483647),this._content.removeChildren(A$C,A$R),this._setScrollChanged(),this},A$j.getChildAt=function(A$C){return this._content.getChildAt(A$C)},A$j.getChildByName=function(A$C){return this._content.getChildByName(A$C)},A$j.getChildIndex=function(A$C){return this._content.getChildIndex(A$C)},A$j.changeScroll=function(){this._scrollChanged=!1;var A$C=this.contentWidth||1,A$R=this.contentHeight||1,A$j=this._vScrollBar,A$w=this._hScrollBar,A$T=A$j&&A$R>this._height,A$G=A$w&&A$C>this._width,A$o=A$T?this._width-A$j.width:this._width,A$U=A$G?this._height-A$w.height:this._height;A$j&&(A$j.x=this._width-A$j.width,A$j.y=0,A$j.height=this._height-(A$G?A$w.height:0),A$j.scrollSize=Math.max(.033*this._height,1),A$j.thumbPercent=A$U/A$R,A$j.setScroll(0,A$R-A$U,A$j.value)),A$w&&(A$w.x=0,A$w.y=this._height-A$w.height,A$w.width=this._width-(A$T?A$j.width:0),A$w.scrollSize=Math.max(.033*this._width,1),A$w.thumbPercent=A$o/A$C,A$w.setScroll(0,A$C-A$o,A$w.value))},A$j.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},A$j.setContentSize=function(A$C,A$R){var A$j=this._content;A$j.width=A$C,A$j.height=A$R,A$j.scrollRect||(A$j.scrollRect=new A$Q),A$j.scrollRect.setTo(0,0,A$C,A$R),A$j.scrollRect=A$j.scrollRect},A$j.onScrollBarChange=function(A$C){var A$R=this._content.scrollRect;if(A$R){var A$j=Math.round(A$C.value);A$C.isVertical?A$R.y=A$j:A$R.x=A$j,this._content.scrollRect=A$R}},A$j.scrollTo=function(A$C,A$R){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),this.vScrollBar&&(this.vScrollBar.value=A$R),this.hScrollBar&&(this.hScrollBar.value=A$C)},A$j.refresh=function(){this.changeScroll()},A$j.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=A$L.superGet(A$a,this,"cacheAs")),A$L.superSet(A$a,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},A$j.onScrollEnd=function(){A$L.superSet(A$a,this,"cacheAs",this._$P.cacheAs)},A$j._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},A$T(0,A$j,"numChildren",function(){return this._content.numChildren}),A$T(0,A$j,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(A$C){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new A$X),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=A$C}),A$T(0,A$j,"contentWidth",function(){for(var A$C=0,A$R=this._content.numChildren-1;-1<A$R;A$R--){var A$j=this._content.getChildAt(A$R);A$C=Math.max(A$j.x+A$j.width*A$j.scaleX,A$C)}return A$C}),A$T(0,A$j,"contentHeight",function(){for(var A$C=0,A$R=this._content.numChildren-1;-1<A$R;A$R--){var A$j=this._content.getChildAt(A$R);A$C=Math.max(A$j.y+A$j.height*A$j.scaleY,A$C)}return A$C}),A$T(0,A$j,"width",A$C.prototype._$get_width,function(A$C){A$L.superSet(A$a,this,"width",A$C),this._setScrollChanged()}),A$T(0,A$j,"hScrollBar",function(){return this._hScrollBar}),A$T(0,A$j,"content",function(){return this._content}),A$T(0,A$j,"height",A$C.prototype._$get_height,function(A$C){A$L.superSet(A$a,this,"height",A$C),this._setScrollChanged()}),A$T(0,A$j,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(A$C){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new A$RC),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=A$C}),A$T(0,A$j,"vScrollBar",function(){return this._vScrollBar}),A$T(0,A$j,"cacheAs",A$C.prototype._$get_cacheAs,function(A$C){A$L.superSet(A$a,this,"cacheAs",A$C),this._$P.cacheAs=null,"none"!==A$C?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),A$R}(A$a),A$d=function(A$C){function A$R(A$C){A$R.__super.call(this,A$C),this.isVertical=!1}return A$G(A$R,"laya.ui.HSlider",A$z),A$R}(),A$O=function(A$C){function A$j(A$C,A$R){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,A$j.__super.call(this),this.skin=A$R,this.labels=A$C}A$G(A$j,"laya.ui.UIGroup",A$C);var A$R=A$j.prototype;return A$L.imps(A$R,{"laya.ui.IItem":!0}),A$R.preinitialize=function(){this.mouseEnabled=!0},A$R.destroy=function(A$C){void 0===A$C&&(A$C=!0),laya.ui.Component.prototype.destroy.call(this,A$C),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},A$R.addItem=function(A$C,A$R){void 0===A$R&&(A$R=!0);var A$j=A$C,A$w=this._items.length;if(A$j.name="item"+A$w,this.addChild(A$j),this.initItems(),A$R&&0<A$w){var A$T=this._items[A$w-1];"horizontal"==this._direction?A$j.x=A$T.x+A$T.width+this._space:A$j.y=A$T.y+A$T.height+this._space}else A$R&&(A$j.x=0,A$j.y=0);return A$w},A$R.delItem=function(A$C,A$R){void 0===A$R&&(A$R=!0);var A$j=this._items.indexOf(A$C);if(-1!=A$j){var A$w=A$C;this.removeChild(A$w);for(var A$T=A$j+1,A$G=this._items.length;A$T<A$G;A$T++){var A$o=this._items[A$T];A$o.name="item"+(A$T-1),A$R&&("horizontal"==this._direction?A$o.x-=A$w.width+this._space:A$o.y-=A$w.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var A$U;A$U=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=A$U}}},A$R.initItems=function(){this._items||(this._items=[]);for(var A$C=this._items.length=0;A$C<1e4;A$C++){var A$R=this.getChildByName("item"+A$C);if(null==A$R)break;this._items.push(A$R),A$R.selected=A$C===this._selectedIndex,A$R.clickHandler=A$M.create(this,this.itemClick,[A$C],!1)}},A$R.itemClick=function(A$C){this.selectedIndex=A$C},A$R.setSelect=function(A$C,A$R){this._items&&-1<A$C&&A$C<this._items.length&&(this._items[A$C].selected=A$R)},A$R.createItem=function(A$C,A$R){return null},A$R.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var A$C=0,A$R=0,A$j=this._items.length;A$R<A$j;A$R++){var A$w=this._items[A$R];this._skin&&(A$w.skin=this._skin),this._labelColors&&(A$w.labelColors=this._labelColors),this._labelSize&&(A$w.labelSize=this._labelSize),this._labelStroke&&(A$w.labelStroke=this._labelStroke),this._labelStrokeColor&&(A$w.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(A$w.strokeColors=this._strokeColors),this._labelBold&&(A$w.labelBold=this._labelBold),this._labelPadding&&(A$w.labelPadding=this._labelPadding),this._labelAlign&&(A$w.labelAlign=this._labelAlign),this._stateNum&&(A$w.stateNum=this._stateNum),this._labelFont&&(A$w.labelFont=this._labelFont),"horizontal"===this._direction?(A$w.y=0,A$w.x=A$C,A$C+=A$w.width+this._space):(A$w.x=0,A$w.y=A$C,A$C+=A$w.height+this._space)}this.changeSize()},A$R.commitMeasure=function(){this.runCallLater(this.changeLabels)},A$R._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},A$T(0,A$R,"labelStrokeColor",function(){return this._labelStrokeColor},function(A$C){this._labelStrokeColor!=A$C&&(this._labelStrokeColor=A$C,this._setLabelChanged())}),A$T(0,A$R,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(this._skin=A$C,this._setLabelChanged())}),A$T(0,A$R,"selectedIndex",function(){return this._selectedIndex},function(A$C){this._selectedIndex!=A$C&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=A$C,this.setSelect(A$C,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),A$T(0,A$R,"labels",function(){return this._labels},function(A$C){if(this._labels!=A$C){if(this._labels=A$C,this.removeChildren(),this._setLabelChanged(),this._labels)for(var A$R=this._labels.split(","),A$j=0,A$w=A$R.length;A$j<A$w;A$j++){var A$T=this.createItem(this._skin,A$R[A$j]);A$T.name="item"+A$j,this.addChild(A$T)}this.initItems()}}),A$T(0,A$R,"strokeColors",function(){return this._strokeColors},function(A$C){this._strokeColors!=A$C&&(this._strokeColors=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelColors",function(){return this._labelColors},function(A$C){this._labelColors!=A$C&&(this._labelColors=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelStroke",function(){return this._labelStroke},function(A$C){this._labelStroke!=A$C&&(this._labelStroke=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelSize",function(){return this._labelSize},function(A$C){this._labelSize!=A$C&&(this._labelSize=A$C,this._setLabelChanged())}),A$T(0,A$R,"stateNum",function(){return this._stateNum},function(A$C){this._stateNum!=A$C&&(this._stateNum=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelBold",function(){return this._labelBold},function(A$C){this._labelBold!=A$C&&(this._labelBold=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelFont",function(){return this._labelFont},function(A$C){this._labelFont!=A$C&&(this._labelFont=A$C,this._setLabelChanged())}),A$T(0,A$R,"labelPadding",function(){return this._labelPadding},function(A$C){this._labelPadding!=A$C&&(this._labelPadding=A$C,this._setLabelChanged())}),A$T(0,A$R,"direction",function(){return this._direction},function(A$C){this._direction=A$C,this._setLabelChanged()}),A$T(0,A$R,"space",function(){return this._space},function(A$C){this._space=A$C,this._setLabelChanged()}),A$T(0,A$R,"items",function(){return this._items}),A$T(0,A$R,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(A$C){this.selectedIndex=this._items.indexOf(A$C)}),A$T(0,A$R,"dataSource",A$C.prototype._$get_dataSource,function(A$C){"number"==typeof(this._dataSource=A$C)&&Math.floor(A$C)==A$C||"string"==typeof A$C?this.selectedIndex=parseInt(A$C):A$C instanceof Array?this.labels=A$C.join(","):A$L.superSet(A$a,this,"dataSource",A$C)}),A$j}(A$a),A$q=function(A$R){function A$j(A$C,A$R){this._value=null,void 0===A$R&&(A$R=""),A$j.__super.call(this,A$C,A$R)}A$G(A$j,"laya.ui.Radio",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._value=null},A$C.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},A$C.initialize=function(){A$R.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},A$C.onClick=function(A$C){this.selected=!0},A$T(0,A$C,"value",function(){return null!=this._value?this._value:this.label},function(A$C){this._value=A$C}),A$j}(A$n),A$v=function(A$C){function A$R(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,A$R.__super.call(this),this.width=this.height=200}A$G(A$R,"laya.ui.Tree",A$C);var A$j=A$R.prototype;return A$L.imps(A$j,{"laya.ui.IRender":!0}),A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),laya.ui.Component.prototype.destroy.call(this,A$C),this._list&&this._list.destroy(A$C),this._list=null,this._source=null,this._renderHandler=null},A$j.createChildren=function(){this.addChild(this._list=new A$c),this._list.renderHandler=A$M.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},A$j.onListChange=function(A$C){this.event("change")},A$j.getArray=function(){var A$C,A$R=[];for(var A$j in this._source)A$C=this._source[A$j],this.getParentOpenStatus(A$C)&&(A$C.x=this._spaceLeft*this.getDepth(A$C),A$R.push(A$C));return A$R},A$j.getDepth=function(A$C,A$R){return void 0===A$R&&(A$R=0),null==A$C.nodeParent?A$R:this.getDepth(A$C.nodeParent,A$R+1)},A$j.getParentOpenStatus=function(A$C){var A$R=A$C.nodeParent;return null==A$R||!!A$R.isOpen&&(null==A$R.nodeParent||this.getParentOpenStatus(A$R))},A$j.renderItem=function(A$C,A$R){var A$j=A$C.dataSource;if(A$j){A$C.left=A$j.x;var A$w=A$C.getChildByName("arrow");A$w&&(A$j.hasChild?(A$w.visible=!0,A$w.index=A$j.isOpen?1:0,A$w.tag=A$R,A$w.off("click",this,this.onArrowClick),A$w.on("click",this,this.onArrowClick)):A$w.visible=!1);var A$T=A$C.getChildByName("folder");A$T&&(2==A$T.clipY?A$T.index=A$j.isDirectory?0:1:A$T.index=A$j.isDirectory?A$j.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([A$C,A$R])}},A$j.onArrowClick=function(A$C){var A$R=A$C.currentTarget.tag;this._list.array[A$R].isOpen=!this._list.array[A$R].isOpen,this.event("open"),this._list.array=this.getArray()},A$j.setItemState=function(A$C,A$R){this._list.array[A$C]&&(this._list.array[A$C].isOpen=A$R,this._list.array=this.getArray())},A$j.fresh=function(){this._list.array=this.getArray(),this.repaint()},A$j.parseXml=function(A$C,A$R,A$j,A$w){var A$T,A$G=A$C.childNodes,A$o=A$G.length;if(!A$w){A$T={};var A$U,A$t=A$C.attributes;for(var A$I in A$t){var A$e=(A$U=A$t[A$I]).nodeName,A$H=A$U.nodeValue;A$T[A$e]="true"==A$H||"false"!=A$H&&A$H}A$T.nodeParent=A$j,0<A$o&&(A$T.isDirectory=!0),A$T.hasChild=0<A$o,A$R.push(A$T)}for(var A$M=0;A$M<A$o;A$M++){var A$K=A$G[A$M];this.parseXml(A$K,A$R,A$T,!1)}},A$j.parseOpenStatus=function(A$C,A$R){for(var A$j=0,A$w=A$R.length;A$j<A$w;A$j++){var A$T=A$R[A$j];if(A$T.isDirectory)for(var A$G=0,A$o=A$C.length;A$G<A$o;A$G++){var A$U=A$C[A$G];if(A$U.isDirectory&&this.isSameParent(A$U,A$T)&&A$T.label==A$U.label){A$T.isOpen=A$U.isOpen;break}}}},A$j.isSameParent=function(A$C,A$R){return null==A$C.nodeParent&&null==A$R.nodeParent||null!=A$C.nodeParent&&null!=A$R.nodeParent&&(A$C.nodeParent.label==A$R.nodeParent.label&&this.isSameParent(A$C.nodeParent,A$R.nodeParent))},A$j.filter=function(A$C){if(Boolean(A$C)){var A$R=[];this.getFilterSource(this._source,A$R,A$C),this._list.array=A$R}else this._list.array=this.getArray()},A$j.getFilterSource=function(A$C,A$R,A$j){var A$w;for(var A$T in A$j=A$j.toLocaleLowerCase(),A$C)!(A$w=A$C[A$T]).isDirectory&&-1<String(A$w.label).toLowerCase().indexOf(A$j)&&(A$w.x=0,A$R.push(A$w)),A$w.child&&0<A$w.child.length&&this.getFilterSource(A$w.child,A$R,A$j)},A$T(0,A$j,"spaceBottom",function(){return this._list.spaceY},function(A$C){this._list.spaceY=A$C}),A$T(0,A$j,"keepStatus",function(){return this._keepStatus},function(A$C){this._keepStatus=A$C}),A$T(0,A$j,"itemRender",function(){return this._list.itemRender},function(A$C){this._list.itemRender=A$C}),A$T(0,A$j,"array",function(){return this._list.array},function(A$C){this._keepStatus&&this._list.array&&A$C&&this.parseOpenStatus(this._list.array,A$C),this._source=A$C,this._list.array=this.getArray()}),A$T(0,A$j,"mouseHandler",function(){return this._list.mouseHandler},function(A$C){this._list.mouseHandler=A$C}),A$T(0,A$j,"dataSource",A$C.prototype._$get_dataSource,function(A$C){this._dataSource=A$C,A$L.superSet(A$a,this,"dataSource",A$C)}),A$T(0,A$j,"source",function(){return this._source}),A$T(0,A$j,"scrollBar",function(){return this._list.scrollBar}),A$T(0,A$j,"list",function(){return this._list}),A$T(0,A$j,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(A$C){this._list.vScrollBarSkin=A$C}),A$T(0,A$j,"renderHandler",function(){return this._renderHandler},function(A$C){this._renderHandler=A$C}),A$T(0,A$j,"selectedIndex",function(){return this._list.selectedIndex},function(A$C){this._list.selectedIndex=A$C}),A$T(0,A$j,"spaceLeft",function(){return this._spaceLeft},function(A$C){this._spaceLeft=A$C}),A$T(0,A$j,"selectedItem",function(){return this._list.selectedItem},function(A$C){this._list.selectedItem=A$C}),A$T(0,A$j,"width",A$C.prototype._$get_width,function(A$C){A$L.superSet(A$a,this,"width",A$C),this._list.width=A$C}),A$T(0,A$j,"height",A$C.prototype._$get_height,function(A$C){A$L.superSet(A$a,this,"height",A$C),this._list.height=A$C}),A$T(0,A$j,"xml",null,function(A$C){var A$R=[];this.parseXml(A$C.childNodes[0],A$R,null,!0),this.array=A$R}),A$T(0,A$j,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),A$R}(A$a),A$CC=function(A$C){function A$R(){this._items=null,this._selectedIndex=0,A$R.__super.call(this),this._setIndexHandler=A$M.create(this,this.setIndex,null,!1)}A$G(A$R,"laya.ui.ViewStack",A$C);var A$j=A$R.prototype;return A$L.imps(A$j,{"laya.ui.IItem":!0}),A$j.setItems=function(A$C){this.removeChildren();for(var A$R=0,A$j=0,A$w=A$C.length;A$j<A$w;A$j++){var A$T=A$C[A$j];A$T&&(A$T.name="item"+A$R,this.addChild(A$T),A$R++)}this.initItems()},A$j.addItem=function(A$C){A$C.name="item"+this._items.length,this.addChild(A$C),this.initItems()},A$j.initItems=function(){this._items=[];for(var A$C=0;A$C<1e4;A$C++){var A$R=this.getChildByName("item"+A$C);if(null==A$R)break;this._items.push(A$R),A$R.visible=A$C==this._selectedIndex}},A$j.setSelect=function(A$C,A$R){this._items&&-1<A$C&&A$C<this._items.length&&(this._items[A$C].visible=A$R)},A$j.setIndex=function(A$C){this.selectedIndex=A$C},A$T(0,A$j,"dataSource",A$C.prototype._$get_dataSource,function(A$C){if("number"==typeof(this._dataSource=A$C)&&Math.floor(A$C)==A$C||"string"==typeof A$C)this.selectedIndex=parseInt(A$C);else for(var A$R in this._dataSource)this.hasOwnProperty(A$R)&&(this[A$R]=this._dataSource[A$R])}),A$T(0,A$j,"selectedIndex",function(){return this._selectedIndex},function(A$C){this._selectedIndex!=A$C&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=A$C,this.setSelect(this._selectedIndex,!0))}),A$T(0,A$j,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(A$C){this.selectedIndex=this._items.indexOf(A$C)}),A$T(0,A$j,"items",function(){return this._items}),A$T(0,A$j,"setIndexHandler",function(){return this._setIndexHandler},function(A$C){this._setIndexHandler=A$C}),A$R}(A$a),A$RC=function(A$C){function A$R(){A$R.__super.call(this)}return A$G(A$R,"laya.ui.VScrollBar",A$V),A$R}(),A$jC=function(A$R){function A$j(A$C){this._bg=null,this._skin=null,A$j.__super.call(this),void 0===A$C&&(A$C=""),this.text=A$C,this.skin=this.skin}A$G(A$j,"laya.ui.TextInput",A$R);var A$C=A$j.prototype;return A$C.preinitialize=function(){this.mouseEnabled=!0},A$C.destroy=function(A$C){A$Z.clearCache(this,this._skin),void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._bg&&this._bg.destroy(),this._bg=null},A$C.createChildren=function(){this.addChild(this._tf=new A$K),this._tf.padding=A$A.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},A$C._onFocus=function(){this.event("focus",this)},A$C._onBlur=function(){this.event("blur",this)},A$C._onInput=function(){this.event("input",this)},A$C._onEnter=function(){this.event("enter",this)},A$C.initialize=function(){this.width=128,this.height=22},A$C.select=function(){this._tf.select()},A$C.setSelection=function(A$C,A$R){this._tf.setSelection(A$C,A$R)},A$T(0,A$C,"text",A$R.prototype._$get_text,function(A$C){this._tf.text!=A$C&&(A$C+="",this._tf.text=A$C,this.event("change"))}),A$T(0,A$C,"bg",function(){return this._bg},function(A$C){this.graphics=this._bg=A$C}),A$T(0,A$C,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(A$C){this._tf.inputElementYAdjuster=A$C}),A$T(0,A$C,"multiline",function(){return this._tf.multiline},function(A$C){this._tf.multiline=A$C}),A$T(0,A$C,"skin",function(){return this._skin},function(A$C){this._skin!=A$C&&(A$Z.clearCache(this,this._skin),this._skin=A$C,this._bg||(this.graphics=this._bg=new A$P),A$Z.keepCache(this,this._skin),this._bg.source=A$Z.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),A$T(0,A$C,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(A$C){this._bg||(this.graphics=this._bg=new A$P),this._bg.sizeGrid=A$r.fillArray(A$A.defaultSizeGrid,A$C,Number)}),A$T(0,A$C,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(A$C){this._tf.inputElementXAdjuster=A$C}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$g,this,"width",A$C),this._bg&&(this._bg.width=A$C)}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$g,this,"height",A$C),this._bg&&(this._bg.height=A$C)}),A$T(0,A$C,"editable",function(){return this._tf.editable},function(A$C){this._tf.editable=A$C}),A$T(0,A$C,"restrict",function(){return this._tf.restrict},function(A$C){this._tf.restrict=A$C}),A$T(0,A$C,"prompt",function(){return this._tf.prompt},function(A$C){this._tf.prompt=A$C}),A$T(0,A$C,"promptColor",function(){return this._tf.promptColor},function(A$C){this._tf.promptColor=A$C}),A$T(0,A$C,"maxChars",function(){return this._tf.maxChars},function(A$C){this._tf.maxChars=A$C}),A$T(0,A$C,"focus",function(){return this._tf.focus},function(A$C){this._tf.focus=A$C}),A$T(0,A$C,"type",function(){return this._tf.type},function(A$C){this._tf.type=A$C}),A$T(0,A$C,"asPassword",function(){return this._tf.asPassword},function(A$C){this._tf.asPassword=A$C}),A$j}(A$g),A$wC=function(A$C){function A$R(){A$R.__super.call(this)}return A$G(A$R,"laya.ui.VSlider",A$z),A$R}(),A$TC=function(A$C){function A$w(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,A$w.__super.call(this)}A$G(A$w,"laya.ui.Dialog",A$C);var A$R=A$w.prototype;return A$R.initialize=function(){this.popupEffect=A$w.manager.popupEffectHandler,this.closeEffect=A$w.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},A$R._dealDragArea=function(){var A$C=this.getChildByName("drag");A$C&&(this.dragArea=A$C.x+","+A$C.y+","+A$C.width+","+A$C.height,A$C.removeSelf())},A$R._onClick=function(A$C){var A$R=A$C.target;if(A$R)switch(A$R.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(A$R.name)}},A$R.show=function(A$C,A$R){void 0===A$C&&(A$C=!1),void 0===A$R&&(A$R=!0),this._open(!1,A$C,A$R)},A$R.popup=function(A$C,A$R){void 0===A$C&&(A$C=!1),void 0===A$R&&(A$R=!0),this._open(!0,A$C,A$R)},A$R._open=function(A$C,A$R,A$j){A$w.manager.lock(!1),this.isModal=A$C,A$w.manager.open(this,A$R,A$j)},A$R.onOpened=function(){},A$R.close=function(A$C,A$R){void 0===A$R&&(A$R=!0),A$w.manager.close(this,A$C,A$R)},A$R.onClosed=function(A$C){},A$R._onMouseDown=function(A$C){var A$R=this.getMousePoint();this._dragArea.contains(A$R.x,A$R.y)?this.startDrag():this.stopDrag()},A$T(0,A$R,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(A$C){if(A$C){var A$R=A$r.fillArray([0,0,0,0],A$C,Number);this._dragArea=new A$Q(A$R[0],A$R[1],A$R[2],A$R[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),A$T(0,A$R,"isPopup",function(){return null!=this.parent}),A$T(0,A$R,"zOrder",A$C.prototype._$get_zOrder,function(A$C){A$L.superSet(A$i,this,"zOrder",A$C),A$w.manager._checkMask()}),A$T(1,A$w,"manager",function(){return A$w._manager=A$w._manager||new A$N},function(A$C){A$w._manager=A$C}),A$w.setLockView=function(A$C){A$w.manager.setLockView(A$C)},A$w.lock=function(A$C){A$w.manager.lock(A$C)},A$w.closeAll=function(){A$w.manager.closeAll()},A$w.getDialogsByGroup=function(A$C){return A$w.manager.getDialogsByGroup(A$C)},A$w.closeByGroup=function(A$C){return A$w.manager.closeByGroup(A$C)},A$w.CLOSE="close",A$w.CANCEL="cancel",A$w.SURE="sure",A$w.NO="no",A$w.OK="ok",A$w.YES="yes",A$w._manager=null,A$w}(A$i),A$GC=function(A$C){function A$R(){A$R.__super.call(this)}A$G(A$R,"laya.ui.HBox",A$C);var A$j=A$R.prototype;return A$j.sortItem=function(A$C){A$C&&A$C.sort(function(A$C,A$R){return A$C.x-A$R.x})},A$j.changeItems=function(){this._itemChanged=!1;for(var A$C=[],A$R=0,A$j=0,A$w=this.numChildren;A$j<A$w;A$j++){var A$T=this.getChildAt(A$j);A$T&&A$T.layoutEnabled&&(A$C.push(A$T),A$R=this._height?this._height:Math.max(A$R,A$T.height*A$T.scaleY))}this.sortItem(A$C);var A$G=0;for(A$j=0,A$w=A$C.length;A$j<A$w;A$j++)(A$T=A$C[A$j]).x=A$G,A$G+=A$T.width*A$T.scaleX+this._space,"top"==this._align?A$T.y=0:"middle"==this._align?A$T.y=.5*(A$R-A$T.height*A$T.scaleY):"bottom"==this._align&&(A$T.y=A$R-A$T.height*A$T.scaleY);this.changeSize()},A$T(0,A$j,"height",A$C.prototype._$get_height,function(A$C){this._height!=A$C&&(A$L.superSet(A$u,this,"height",A$C),this.callLater(this.changeItems))}),A$R.NONE="none",A$R.TOP="top",A$R.MIDDLE="middle",A$R.BOTTOM="bottom",A$R}(A$u),A$oC=function(A$C){function A$R(){A$R.__super.call(this)}A$G(A$R,"laya.ui.VBox",A$C);var A$j=A$R.prototype;return A$j.changeItems=function(){this._itemChanged=!1;for(var A$C=[],A$R=0,A$j=0,A$w=this.numChildren;A$j<A$w;A$j++){var A$T=this.getChildAt(A$j);A$T&&A$T.layoutEnabled&&(A$C.push(A$T),A$R=this._width?this._width:Math.max(A$R,A$T.width*A$T.scaleX))}this.sortItem(A$C);var A$G=0;for(A$j=0,A$w=A$C.length;A$j<A$w;A$j++)(A$T=A$C[A$j]).y=A$G,A$G+=A$T.height*A$T.scaleY+this._space,"left"==this._align?A$T.x=0:"center"==this._align?A$T.x=.5*(A$R-A$T.width*A$T.scaleX):"right"==this._align&&(A$T.x=A$R-A$T.width*A$T.scaleX);this.changeSize()},A$T(0,A$j,"width",A$C.prototype._$get_width,function(A$C){this._width!=A$C&&(A$L.superSet(A$u,this,"width",A$C),this.callLater(this.changeItems))}),A$R.NONE="none",A$R.LEFT="left",A$R.CENTER="center",A$R.RIGHT="right",A$R}(A$u),A$UC=function(A$C){function A$R(){A$R.__super.call(this)}return A$G(A$R,"laya.ui.RadioGroup",A$O),A$R.prototype.createItem=function(A$C,A$R){return new A$q(A$C,A$R)},A$R}(),A$tC=function(A$C){function A$R(){A$R.__super.call(this)}return A$G(A$R,"laya.ui.Tab",A$O),A$R.prototype.createItem=function(A$C,A$R){return new A$n(A$C,A$R)},A$R}(),A$IC=function(A$R){function A$j(A$C){this._vScrollBar=null,this._hScrollBar=null,void 0===A$C&&(A$C=""),A$j.__super.call(this,A$C)}A$G(A$j,"laya.ui.TextArea",A$R);var A$C=A$j.prototype;return A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},A$C.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},A$C.onVBarChanged=function(A$C){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},A$C.onHBarChanged=function(A$C){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},A$C.changeScroll=function(){var A$C=this._vScrollBar&&0<this._tf.maxScrollY,A$R=this._hScrollBar&&0<this._tf.maxScrollX,A$j=A$C?this._width-this._vScrollBar.width:this._width,A$w=A$R?this._height-this._hScrollBar.height:this._height,A$T=this._tf.padding||A$A.labelPadding;this._tf.width=A$j,this._tf.height=A$w,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-A$T[2],this._vScrollBar.y=A$T[1],this._vScrollBar.height=this._height-(A$R?this._hScrollBar.height:0)-A$T[1]-A$T[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=A$w/Math.max(this._tf.textHeight,A$w),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=A$C),this._hScrollBar&&(this._hScrollBar.x=A$T[0],this._hScrollBar.y=this._height-this._hScrollBar.height-A$T[3],this._hScrollBar.width=this._width-(A$C?this._vScrollBar.width:0)-A$T[0]-A$T[2],this._hScrollBar.scrollSize=Math.max(.033*A$j,1),this._hScrollBar.thumbPercent=A$j/Math.max(this._tf.textWidth,A$j),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=A$R)},A$C.scrollTo=function(A$C){this.commitMeasure(),this._tf.scrollY=A$C},A$T(0,A$C,"scrollY",function(){return this._tf.scrollY}),A$T(0,A$C,"width",A$R.prototype._$get_width,function(A$C){A$L.superSet(A$jC,this,"width",A$C),this.callLater(this.changeScroll)}),A$T(0,A$C,"hScrollBar",function(){return this._hScrollBar}),A$T(0,A$C,"height",A$R.prototype._$get_height,function(A$C){A$L.superSet(A$jC,this,"height",A$C),this.callLater(this.changeScroll)}),A$T(0,A$C,"maxScrollX",function(){return this._tf.maxScrollX}),A$T(0,A$C,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(A$C){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new A$RC),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=A$C}),A$T(0,A$C,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(A$C){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new A$X),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=A$C}),A$T(0,A$C,"vScrollBar",function(){return this._vScrollBar}),A$T(0,A$C,"maxScrollY",function(){return this._tf.maxScrollY}),A$T(0,A$C,"scrollX",function(){return this._tf.scrollX}),A$j}(A$jC);!function(A$C){function A$R(){this._uiView=null,this.isCloseOther=!1,A$R.__super.call(this)}A$G(A$R,"laya.ui.AsynDialog",A$TC);var A$j=A$R.prototype;A$j.createView=function(A$C){this._uiView=A$C},A$j._open=function(A$C,A$R,A$j){this.isModal=A$C,this.isCloseOther=A$R,A$TC.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},A$j.onCreated=function(){this.createUI(),this.onOpen()},A$j.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},A$j.onOpen=function(){A$TC.manager.open(this,this.isCloseOther),A$TC.manager.lock(!1)},A$j.close=function(A$C,A$R){void 0===A$R&&(A$R=!0),A$TC.manager.close(this),this.onClose()},A$j.onClose=function(){},A$j.destroy=function(A$C){void 0===A$C&&(A$C=!0),laya.ui.View.prototype.destroy.call(this,A$C),this._uiView=null,this.onDestroy()},A$j.onDestroy=function(){}}();A$L.__init([A$i])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}}),function(A$M,A$C,A$f){A$f.un,A$f.uns;var A$H=A$f.static,A$K=A$f.class,A$F=A$f.getset,A$w=A$f.__newvec,A$b=laya.maths.Arith,A$o=laya.webgl.atlas.AtlasResourceManager,A$j=laya.webgl.shader.BaseShader,A$J=laya.utils.Browser,A$U=laya.webgl.utils.Buffer,A$p=laya.utils.Byte,A$T=laya.utils.ClassUtils,A$t=A$f.Config,A$G=(laya.events.Event,laya.events.EventDispatcher),A$A=laya.utils.Handler,A$Q=laya.net.Loader,A$R=laya.net.LoaderManager,A$I=(laya.maths.MathUtil,laya.display.Node),A$L=laya.renders.Render,A$e=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),A$D=laya.resource.Resource,A$Z=laya.utils.RunDriver,A$S=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),A$h=laya.display.Sprite,A$x=laya.utils.Stat,A$W=laya.utils.StringKey,A$r=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),A$$=laya.utils.Utils,A$E=laya.webgl.WebGL,A$P=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;A$f.interface("laya.d3.core.IClone"),A$f.interface("laya.d3.graphics.IVertex"),A$f.interface("laya.d3.core.render.IUpdate"),A$f.interface("laya.d3.core.scene.ITreeNode"),A$f.interface("laya.d3.core.render.IRenderable");(function(){function A$n(){}A$K(A$n,"laya.d3.animation.AnimationClipParser01"),A$n.READ_DATA=function(){A$n._DATA.offset=A$n._reader.getUint32(),A$n._DATA.size=A$n._reader.getUint32()},A$n.READ_BLOCK=function(){for(var A$C=A$n._BLOCK.count=A$n._reader.getUint16(),A$R=A$n._BLOCK.blockStarts=[],A$j=A$n._BLOCK.blockLengths=[],A$w=0;A$w<A$C;A$w++)A$R.push(A$n._reader.getUint32()),A$j.push(A$n._reader.getUint32())},A$n.READ_STRINGS=function(){var A$C=A$n._reader.getUint32(),A$R=A$n._reader.getUint16(),A$j=A$n._reader.pos;A$n._reader.pos=A$C+A$n._DATA.offset;for(var A$w=0;A$w<A$R;A$w++)A$n._strings[A$w]=A$n._reader.readUTFString();A$n._reader.pos=A$j},A$n.parse=function(A$C,A$R){A$n._animationClip=A$C;(A$n._reader=A$R).__getBuffer();A$n.READ_DATA(),A$n.READ_BLOCK(),A$n.READ_STRINGS();for(var A$j=0,A$w=A$n._BLOCK.count;A$j<A$w;A$j++){var A$T=A$R.getUint16(),A$G=A$n._strings[A$T],A$o=A$n["READ_"+A$G];if(null==A$o)throw new Error("model file err,no this function:"+A$T+" "+A$G);A$o.call()}},A$n.READ_ANIMATIONS=function(){var A$C,A$R=0,A$j=0,A$w=A$n._reader,A$T=A$w.__getBuffer(),A$G=[],A$o=A$w.getUint8();for(A$G.length=A$o,A$R=0;A$R<A$o;A$R++)A$G[A$R]=A$w.getUint16();var A$U=[],A$t=A$w.getUint16();for(A$U.length=A$t,A$R=0;A$R<A$t;A$R++)A$U[A$R]=A$w.getFloat32();var A$I=A$n._animationClip;A$I.name=A$n._strings[A$w.getUint16()];var A$e=A$I._duration=A$w.getFloat32();A$I.islooping=!!A$w.getByte(),A$I._frameRate=A$w.getInt16();var A$H=A$w.getInt16(),A$M=A$I._nodes=new Array;A$M.length=A$H,(A$I._publicClipDatas=[]).length=A$H;var A$K=A$I._nodesMap={},A$F=0,A$L=0;for(A$R=0;A$R<A$H;A$R++){A$C=A$M[A$R]=new A$B;var A$D=A$w.getUint16(),A$Q=A$C.path=[];for(A$Q.length=A$D,A$j=0;A$j<A$D;A$j++)A$Q[A$j]=A$n._strings[A$w.getUint16()];var A$Z=A$Q.join("/"),A$S=A$K[A$Z];A$S||(A$K[A$Z]=A$S=[]),A$S.push(A$C);var A$b=A$w.getInt16();-1!==A$b&&(A$C.componentType=A$n._strings[A$b]);var A$f=A$l._propertyIndexDic[A$n._strings[A$w.getUint16()]];if(null==A$f)throw new Error("AnimationClipParser01:unknown property name.");var A$p=A$f<4,A$h=!A$p||A$p&&""===A$Q[0];(A$C._cacheProperty=A$h)?A$F++:A$L++,A$C.propertyNameID=A$f;var A$x=A$G[A$w.getUint8()];A$C.keyFrameWidth=A$x/4;var A$W=A$C.keyFrames=[],A$$=A$W.length=A$w.getUint16(),A$A=null,A$r=NaN;for(A$j=0;A$j<A$$;A$j++){var A$E=A$W[A$j]=new A$g;A$r=A$E.startTime=A$U[A$w.getUint16()];var A$P=A$w.pos;A$E.inTangent=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$P=A$w.pos,A$E.outTangent=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$P=A$w.pos,A$E.data=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$A&&(A$A.next=A$E,A$A.duration=A$r-A$A.startTime),A$A=A$E}A$E.next=null,A$E.duration=A$e-A$r}var A$J=A$I._nodeToCachePropertyMap=new Int32Array(A$H),A$N=A$I._cachePropertyMap=new Int32Array(A$F),A$a=A$I._unCachePropertyMap=new Int32Array(A$L);for(A$F=A$L=0,A$R=0;A$R<A$H;A$R++)(A$C=A$M[A$R])._cacheProperty?(A$J[A$R]=A$F,A$N[A$F++]=A$R):A$a[A$L++]=A$R},A$n._animationClip=null,A$n._reader=null,A$n._strings=[],A$H(A$n,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function A$V(){}A$K(A$V,"laya.d3.animation.AnimationClipParser02"),A$V.READ_DATA=function(){A$V._DATA.offset=A$V._reader.getUint32(),A$V._DATA.size=A$V._reader.getUint32()},A$V.READ_BLOCK=function(){for(var A$C=A$V._BLOCK.count=A$V._reader.getUint16(),A$R=A$V._BLOCK.blockStarts=[],A$j=A$V._BLOCK.blockLengths=[],A$w=0;A$w<A$C;A$w++)A$R.push(A$V._reader.getUint32()),A$j.push(A$V._reader.getUint32())},A$V.READ_STRINGS=function(){var A$C=A$V._reader.getUint32(),A$R=A$V._reader.getUint16(),A$j=A$V._reader.pos;A$V._reader.pos=A$C+A$V._DATA.offset;for(var A$w=0;A$w<A$R;A$w++)A$V._strings[A$w]=A$V._reader.readUTFString();A$V._reader.pos=A$j},A$V.parse=function(A$C,A$R){A$V._animationClip=A$C;(A$V._reader=A$R).__getBuffer();A$V.READ_DATA(),A$V.READ_BLOCK(),A$V.READ_STRINGS();for(var A$j=0,A$w=A$V._BLOCK.count;A$j<A$w;A$j++){var A$T=A$R.getUint16(),A$G=A$V._strings[A$T],A$o=A$V["READ_"+A$G];if(null==A$o)throw new Error("model file err,no this function:"+A$T+" "+A$G);A$o.call()}},A$V.READ_ANIMATIONS=function(){var A$C,A$R=0,A$j=0,A$w=A$V._reader,A$T=A$w.__getBuffer(),A$G=[],A$o=A$w.getUint8();for(A$G.length=A$o,A$R=0;A$R<A$o;A$R++)A$G[A$R]=A$w.getUint16();var A$U=[],A$t=A$w.getUint16();for(A$U.length=A$t,A$R=0;A$R<A$t;A$R++)A$U[A$R]=A$w.getFloat32();var A$I=A$V._animationClip;A$I.name=A$V._strings[A$w.getUint16()];var A$e=A$I._duration=A$w.getFloat32();A$I.islooping=!!A$w.getByte(),A$I._frameRate=A$w.getInt16();var A$H=A$w.getInt16(),A$M=A$I._nodes=new Array;A$M.length=A$H,(A$I._publicClipDatas=[]).length=A$H;var A$K=A$I._nodesMap={},A$F=0,A$L=0;for(A$R=0;A$R<A$H;A$R++){A$C=A$M[A$R]=new A$B;var A$D=A$w.getUint16(),A$Q=A$C.path=[];for(A$Q.length=A$D,A$j=0;A$j<A$D;A$j++)A$Q[A$j]=A$V._strings[A$w.getUint16()];var A$Z=A$Q.join("/"),A$S=A$K[A$Z];A$S||(A$K[A$Z]=A$S=[]),A$S.push(A$C);var A$b=A$w.getInt16();-1!==A$b&&(A$C.componentType=A$V._strings[A$b]);var A$f=A$l._propertyIndexDic[A$V._strings[A$w.getUint16()]];if(null==A$f)throw new Error("AnimationClipParser02:unknown property name.");var A$p=A$f<4,A$h=!A$p||A$p&&""===A$Q[0];(A$C._cacheProperty=A$h)?A$F++:A$L++,A$C.propertyNameID=A$f;var A$x=A$G[A$w.getUint8()];A$C.keyFrameWidth=A$x/4;var A$W=A$C.keyFrames=[],A$$=A$W.length=A$w.getUint16(),A$A=null,A$r=NaN;for(A$j=0;A$j<A$$;A$j++){var A$E=A$W[A$j]=new A$g;A$r=A$E.startTime=A$U[A$w.getUint16()];var A$P=A$w.pos;A$E.inTangent=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$P=A$w.pos,A$E.outTangent=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$P=A$w.pos,A$E.data=new Float32Array(A$T.slice(A$P,A$P+A$x)),A$w.pos+=A$x,A$A&&(A$A.next=A$E,A$A.duration=A$r-A$A.startTime),A$A=A$E}A$E.next=null,A$E.duration=A$e-A$r}var A$J=A$w.getUint16();for(A$R=0;A$R<A$J;A$R++){var A$N,A$a=new A$z;A$a.time=A$w.getFloat32(),A$a.eventName=A$V._strings[A$w.getUint16()];var A$n=A$w.getUint16();for(0<A$n&&(A$a.params=A$N=[]),A$j=0;A$j<A$n;A$j++){switch(A$w.getByte()){case 0:A$N.push(!!A$w.getByte());break;case 1:A$N.push(A$w.getInt32());break;case 2:A$N.push(A$w.getFloat32());break;case 3:A$N.push(A$V._strings[A$w.getUint16()]);break;default:throw new Error("unknown type.")}}A$I.addEvent(A$a)}var A$y=A$I._nodeToCachePropertyMap=new Int32Array(A$H),A$m=A$I._cachePropertyMap=new Int32Array(A$F),A$k=A$I._unCachePropertyMap=new Int32Array(A$L);for(A$F=A$L=0,A$R=0;A$R<A$H;A$R++)(A$C=A$M[A$R])._cacheProperty?(A$y[A$R]=A$F,A$m[A$F++]=A$R):A$k[A$L++]=A$R},A$V._animationClip=null,A$V._reader=null,A$V._strings=[],A$H(A$V,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var A$z=function(){function A$C(){this.time=NaN,this.eventName=null,this.params=null}return A$K(A$C,"laya.d3.animation.AnimationEvent"),A$C}(),A$l=function(){function A$w(){this._childs=[],this.transform=new A$ZR(this)}A$K(A$w,"laya.d3.animation.AnimationNode");var A$C=A$w.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.addChild=function(A$C){A$C._parent=this,A$C.transform.setParent(this.transform),this._childs.push(A$C)},A$C.removeChild=function(A$C){var A$R=this._childs.indexOf(A$C);-1!==A$R&&this._childs.splice(A$R,1)},A$C.getChildByName=function(A$C){for(var A$R=0,A$j=this._childs.length;A$R<A$j;A$R++){var A$w=this._childs[A$R];if(A$w.name===A$C)return A$w}return null},A$C.getChildByIndex=function(A$C){return this._childs[A$C]},A$C.getChildCount=function(){return this._childs.length},A$C.cloneTo=function(A$C){var A$R=A$C;A$R.name=this.name;for(var A$j=0,A$w=this._childs.length;A$j<A$w;A$j++){var A$T=this._childs[A$j],A$G=A$T.clone();A$R.addChild(A$G);var A$o=A$T.transform,A$U=A$G.transform;A$U.setLocalPosition(A$o.getLocalPosition()),A$U.setLocalRotation(A$o.getLocalRotation()),A$U.setLocalScale(A$o.getLocalScale()),A$U._localRotationEuler=A$o._localRotationEuler,A$U._setWorldMatrixIgnoreUpdate(A$o.getWorldMatrix())}},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$w.__init__=function(){A$w.registerAnimationNodeProperty("localPosition",A$w._getLocalPosition,A$w._setLocalPosition),A$w.registerAnimationNodeProperty("localRotation",A$w._getLocalRotation,A$w._setLocalRotation),A$w.registerAnimationNodeProperty("localScale",A$w._getLocalScale,A$w._setLocalScale),A$w.registerAnimationNodeProperty("localRotationEuler",A$w._getLocalRotationEuler,A$w._setLocalRotationEuler),A$w.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",A$w._getParticleRenderSharedMaterialTintColor,A$w._setParticleRenderSharedMaterialTintColor),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",A$w._getMeshRenderSharedMaterialTilingOffset,A$w._setMeshRenderSharedMaterialTilingOffset),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",A$w._getMeshRenderSharedMaterialAlbedo,A$w._setMeshRenderSharedMaterialAlbedo),A$w.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",A$w._getSkinnedMeshRenderSharedMaterialTilingOffset,A$w._setSkinnedMeshRenderSharedMaterialTilingOffset),A$w.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",A$w._getSkinnedMeshRenderSharedMaterialAlbedo,A$w._setSkinnedMeshRenderSharedMaterialAlbedo),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",A$w._getMeshRenderSharedMaterialAlbedo,A$w._setMeshRenderSharedMaterialAlbedo),A$w.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",A$w._getSkinnedMeshRenderSharedMaterialAlbedo,A$w._setSkinnedMeshRenderSharedMaterialAlbedo),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",A$w._getMeshRenderSharedMaterialIntensity,A$w._setMeshRenderSharedMaterialIntensity),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",A$w._getMeshRenderSharedMaterialAlpha,A$w._setMeshRenderSharedMaterialAlpha),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",A$w._getMeshRenderSharedMaterialAlphaColor,A$w._setMeshRenderSharedMaterialAlphaColor),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",A$w._getMeshRenderSharedMaterialBaseColor,A$w._setMeshRenderSharedMaterialBaseColor),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",A$w._getMeshRenderSharedMaterialDissolve,A$w._setMeshRenderSharedMaterialDissolve),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",A$w._getMeshRenderSharedMaterialDissolveSpeed,A$w._setMeshRenderSharedMaterialDissolveSpeed),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",A$w._getMeshRenderSharedMaterialMMultiplier,A$w._setMeshRenderSharedMaterialMMultiplier),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",A$w._getMeshRenderSharedMaterialBaseScrollSpeedX,A$w._setMeshRenderSharedMaterialBaseScrollSpeedX),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",A$w._getMeshRenderSharedMaterialBaseScrollSpeedY,A$w._setMeshRenderSharedMaterialBaseScrollSpeedY),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",A$w._getMeshRenderSharedMaterialSecondScrollSpeedX,A$w._setMeshRenderSharedMaterialSecondScrollSpeedX),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",A$w._getMeshRenderSharedMaterialSecondScrollSpeedY,A$w._setMeshRenderSharedMaterialSecondScrollSpeedY),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",A$w._getMeshRenderSharedMaterialDetailTilingOffset,A$w._setMeshRenderSharedMaterialDetailTilingOffset),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",A$w._getMeshRenderSharedMaterialDissolveTilingOffset,A$w._setMeshRenderSharedMaterialDissolveTilingOffset),A$w.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",A$w._getMeshRenderSharedMaterialMaskTilingOffset,A$w._setMeshRenderSharedMaterialMaskTilingOffset)},A$w.registerAnimationNodeProperty=function(A$C,A$R,A$j){if(A$w._propertyIndexDic[A$C])throw new Error("AnimationNode: this propertyName has registered.");A$w._propertyIndexDic[A$C]=A$w._propertyIDCounter,A$w._propertyGetFuncs[A$w._propertyIDCounter]=A$R,A$w._propertySetFuncs[A$w._propertyIDCounter]=A$j,A$w._propertyIDCounter++},A$w._getLocalPosition=function(A$C,A$R){return A$C?A$C.transform.getLocalPosition():A$R._transform.localPosition.elements},A$w._setLocalPosition=function(A$C,A$R,A$j){if(A$C)A$C.transform.setLocalPosition(A$j);else{var A$w=A$R._transform,A$T=A$w.localPosition;A$T.elements=A$j,A$w.localPosition=A$T}},A$w._getLocalRotation=function(A$C,A$R){return A$C?A$C.transform.getLocalRotation():A$R._transform.localRotation.elements},A$w._setLocalRotation=function(A$C,A$R,A$j){if(A$C)A$C.transform.setLocalRotation(A$j);else{var A$w=A$R._transform,A$T=A$w.localRotation;A$T.elements=A$j,A$w.localRotation=A$T}},A$w._getLocalScale=function(A$C,A$R){return A$C?A$C.transform.getLocalScale():A$R._transform.localScale.elements},A$w._setLocalScale=function(A$C,A$R,A$j){if(A$C)A$C.transform.setLocalScale(A$j);else{var A$w=A$R._transform,A$T=A$w.localScale;A$T.elements=A$j,A$w.localScale=A$T}},A$w._getLocalRotationEuler=function(A$C,A$R){return A$C?A$C.transform.getLocalRotationEuler():A$R._transform.localRotationEuler.elements},A$w._setLocalRotationEuler=function(A$C,A$R,A$j){if(A$C)A$C.transform.setLocalRotationEuler(A$j);else{var A$w=A$R._transform,A$T=A$w.localRotationEuler;A$T.elements=A$j,A$w.localRotationEuler=A$T}},A$w._getMeshRenderSharedMaterialTilingOffset=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return A$R.meshRender.sharedMaterial.tilingOffset.elements},A$w._setMeshRenderSharedMaterialTilingOffset=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).tilingOffset).elements=A$j,A$w.tilingOffset=A$T)}else(A$T=(A$w=A$R.meshRender.material).tilingOffset).elements=A$j,A$w.tilingOffset=A$T},A$w._getMeshRenderSharedMaterialAlbedo=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.albedoColor.elements:null}return A$R.meshRender.sharedMaterial.albedoColor.elements},A$w._setMeshRenderSharedMaterialAlbedo=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).albedoColor).elements=A$j,A$w.albedoColor=A$T)}else(A$T=(A$w=A$R.meshRender.material).albedoColor).elements=A$j,A$w.albedoColor=A$T},A$w._getSkinnedMeshRenderSharedMaterialTilingOffset=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return A$R.skinnedMeshRender.sharedMaterial.tilingOffset.elements},A$w._setSkinnedMeshRenderSharedMaterialTilingOffset=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.skinnedMeshRender.material).tilingOffset).elements=A$j,A$w.tilingOffset=A$T)}else(A$T=(A$w=A$R.skinnedMeshRender.material).tilingOffset).elements=A$j,A$w.tilingOffset=A$T},A$w._getSkinnedMeshRenderSharedMaterialAlbedo=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return A$R.skinnedMeshRender.sharedMaterial.albedoColor.elements},A$w._setSkinnedMeshRenderSharedMaterialAlbedo=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.skinnedMeshRender.material).albedoColor).elements=A$j,A$w.albedoColor=A$T)}else(A$T=(A$w=A$R.skinnedMeshRender.material).albedoColor).elements=A$j,A$w.albedoColor=A$T},A$w._getParticleRenderSharedMaterialTintColor=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.particleRender.sharedMaterial.tintColor.elements:null}return A$R.particleRender.sharedMaterial.tintColor.elements},A$w._setParticleRenderSharedMaterialTintColor=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.particleRender.material).tintColor).elements=A$j,A$w.tintColor=A$T)}else(A$T=(A$w=A$R.particleRender.material).tintColor).elements=A$j,A$w.tintColor=A$T},A$w._getMeshRenderSharedMaterialAlphaColor=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.alphaColor.elements:null}return A$R.meshRender.sharedMaterial.alphaColor.elements},A$w._setMeshRenderSharedMaterialAlphaColor=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).alphaColor).elements=A$j,A$w.alphaColor=A$T)}else(A$T=(A$w=A$R.meshRender.material).alphaColor).elements=A$j,A$w.alphaColor=A$T},A$w._getMeshRenderSharedMaterialBaseColor=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.baseColor.elements:null}return A$R.meshRender.sharedMaterial.baseColor.elements},A$w._setMeshRenderSharedMaterialBaseColor=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).baseColor).elements=A$j,A$w.baseColor=A$T)}else(A$T=(A$w=A$R.meshRender.material).baseColor).elements=A$j,A$w.baseColor=A$T},A$w._getMeshRenderSharedMaterialDissolve=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.dissolve:0}return A$R.meshRender.sharedMaterial.dissolve},A$w._setMeshRenderSharedMaterialDissolve=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.dissolve=A$j[0])}else A$R.meshRender.material.dissolve=A$j[0]},A$w._getMeshRenderSharedMaterialDissolveSpeed=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.dissolveSpeed:0}return A$R.meshRender.sharedMaterial.dissolveSpeed},A$w._setMeshRenderSharedMaterialDissolveSpeed=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.dissolveSpeed=A$j[0])}else A$R.meshRender.material.dissolveSpeed=A$j[0]},A$w._getMeshRenderSharedMaterialMMultiplier=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.mMultiplier:0}return A$R.meshRender.sharedMaterial.mMultiplier},A$w._setMeshRenderSharedMaterialMMultiplier=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.mMultiplier=A$j[0])}else A$R.meshRender.material.mMultiplier=A$j[0]},A$w._getMeshRenderSharedMaterialBaseScrollSpeedX=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return A$R.meshRender.sharedMaterial.baseScrollSpeedX},A$w._setMeshRenderSharedMaterialBaseScrollSpeedX=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.baseScrollSpeedX=A$j[0])}else A$R.meshRender.material.baseScrollSpeedX=A$j[0]},A$w._getMeshRenderSharedMaterialBaseScrollSpeedY=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return A$R.meshRender.sharedMaterial.baseScrollSpeedY},A$w._setMeshRenderSharedMaterialBaseScrollSpeedY=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.baseScrollSpeedY=A$j[0])}else A$R.meshRender.material.baseScrollSpeedY=A$j[0]},A$w._getMeshRenderSharedMaterialSecondScrollSpeedX=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return A$R.meshRender.sharedMaterial.secondScrollSpeedX},A$w._setMeshRenderSharedMaterialSecondScrollSpeedX=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.secondScrollSpeedX=A$j[0])}else A$R.meshRender.material.secondScrollSpeedX=A$j[0]},A$w._getMeshRenderSharedMaterialSecondScrollSpeedY=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return A$R.meshRender.sharedMaterial.secondScrollSpeedY},A$w._setMeshRenderSharedMaterialSecondScrollSpeedY=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.secondScrollSpeedY=A$j[0])}else A$R.meshRender.material.secondScrollSpeedY=A$j[0]},A$w._getMeshRenderSharedMaterialAlpha=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.alpha:0}return A$R.meshRender.sharedMaterial.alpha},A$w._setMeshRenderSharedMaterialAlpha=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.alpha=A$j[0])}else A$R.meshRender.material.alpha=A$j[0]},A$w._getMeshRenderSharedMaterialIntensity=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.intensity:0}return A$R.meshRender.sharedMaterial.intensity},A$w._setMeshRenderSharedMaterialIntensity=function(A$C,A$R,A$j){if(A$C){var A$w=A$C.transform._entity;A$w&&(A$w.owner.meshRender.material.intensity=A$j[0])}else A$R.meshRender.material.intensity=A$j[0]},A$w._getMeshRenderSharedMaterialDetailTilingOffset=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return A$R.meshRender.sharedMaterial.detailTilingOffset.elements},A$w._setMeshRenderSharedMaterialDetailTilingOffset=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).detailTilingOffset).elements=A$j,A$w.detailTilingOffset=A$T)}else(A$T=(A$w=A$R.meshRender.material).detailTilingOffset).elements=A$j,A$w.detailTilingOffset=A$T},A$w._getMeshRenderSharedMaterialDissolveTilingOffset=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return A$R.meshRender.sharedMaterial.dissolveTilingOffset.elements},A$w._setMeshRenderSharedMaterialDissolveTilingOffset=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).dissolveTilingOffset).elements=A$j,A$w.dissolveTilingOffset=A$T)}else(A$T=(A$w=A$R.meshRender.material).dissolveTilingOffset).elements=A$j,A$w.dissolveTilingOffset=A$T},A$w._getMeshRenderSharedMaterialMaskTilingOffset=function(A$C,A$R){if(A$C){var A$j=A$C.transform._entity;return A$j?A$j.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return A$R.meshRender.sharedMaterial.maskTilingOffset.elements},A$w._setMeshRenderSharedMaterialMaskTilingOffset=function(A$C,A$R,A$j){var A$w,A$T;if(A$C){var A$G=A$C.transform._entity;A$G&&((A$T=(A$w=A$G.owner.meshRender.material).maskTilingOffset).elements=A$j,A$w.maskTilingOffset=A$T)}else(A$T=(A$w=A$R.meshRender.material).maskTilingOffset).elements=A$j,A$w.maskTilingOffset=A$T},A$w._propertyIDCounter=0,A$w._propertyIndexDic={},A$w._propertySetFuncs=[],A$w._propertyGetFuncs=[],A$w}(),A$g=function(){function A$C(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return A$K(A$C,"laya.d3.animation.Keyframe"),A$C}(),A$B=function(){function A$C(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return A$K(A$C,"laya.d3.animation.KeyframeNode"),A$C}(),A$N=(function(){function A$C(){this._tempVector30=new A$oR,this._tempVector31=new A$oR,this._tempVector32=new A$oR,this._a=new A$oR,this._b=new A$oR,this._c=new A$oR,this._d=new A$oR}A$K(A$C,"laya.d3.core.glitter.SplineCurvePositionVelocity");var A$R=A$C.prototype;A$R.Init=function(A$C,A$R,A$j,A$w){A$C.cloneTo(this._d),A$R.cloneTo(this._c),A$oR.scale(A$C,2,this._a),A$oR.scale(A$j,2,this._tempVector30),A$oR.subtract(this._a,this._tempVector30,this._a),A$oR.add(this._a,A$R,this._a),A$oR.add(this._a,A$w,this._a),A$oR.scale(A$j,3,this._b),A$oR.scale(A$C,3,this._tempVector30),A$oR.subtract(this._b,this._tempVector30,this._b),A$oR.subtract(this._b,A$w,this._b),A$oR.scale(A$R,2,this._tempVector30),A$oR.subtract(this._b,this._tempVector30,this._b)},A$R.Slerp=function(A$C,A$R){A$oR.scale(this._a,A$C*A$C*A$C,this._tempVector30),A$oR.scale(this._b,A$C*A$C,this._tempVector31),A$oR.scale(this._c,A$C,this._tempVector32),A$oR.add(this._tempVector30,this._tempVector31,A$R),A$oR.add(A$R,this._tempVector32,A$R),A$oR.add(A$R,this._d,A$R)}}(),function(){function A$m(A$C,A$R,A$j,A$w){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=A$C,this._h=A$R,this._minHeight=A$j,this._maxHeight=A$w}A$K(A$m,"laya.d3.core.HeightMap");var A$C=A$m.prototype;A$C._inBounds=function(A$C,A$R){return 0<=A$C&&A$C<this._h&&0<=A$R&&A$R<this._w},A$C.getHeight=function(A$C,A$R){return this._inBounds(A$C,A$R)?this._datas[A$C][A$R]:NaN},A$F(0,A$C,"width",function(){return this._w}),A$F(0,A$C,"height",function(){return this._h}),A$F(0,A$C,"maxHeight",function(){return this._maxHeight}),A$F(0,A$C,"minHeight",function(){return this._minHeight}),A$m.creatFromMesh=function(A$C,A$R,A$j,A$w){for(var A$T=[],A$G=[],A$o=A$C.getSubMeshCount(),A$U=0;A$U<A$o;A$U++){for(var A$t=A$C.getSubMesh(A$U),A$I=A$t._getVertexBuffer(),A$e=A$I.getData(),A$H=[],A$M=0;A$M<A$e.length;A$M+=A$I.vertexDeclaration.vertexStride/4){var A$K=new A$oR(A$e[A$M+0],A$e[A$M+1],A$e[A$M+2]);A$H.push(A$K)}A$T.push(A$H);var A$F=A$t._getIndexBuffer();A$G.push(A$F.getData())}var A$L=A$C.boundingBox,A$D=A$L.min.x,A$Q=A$L.min.z,A$Z=A$L.max.x,A$S=A$L.max.z,A$b=A$L.min.y,A$f=A$L.max.y,A$p=A$Z-A$D,A$h=A$S-A$Q,A$x=A$w.elements[0]=A$p/(A$R-1),A$W=A$w.elements[1]=A$h/(A$j-1),A$$=new A$m(A$R,A$j,A$b,A$f),A$A=A$m._tempRay,A$r=A$A.direction.elements;A$r[0]=0,A$r[1]=-1,A$r[2]=0;var A$E=A$f+.1;A$A.origin.elements[1]=A$E;for(var A$P=0;A$P<A$j;A$P++){var A$J=A$Q+A$P*A$W;A$$._datas[A$P]=[];for(var A$N=0;A$N<A$R;A$N++){var A$a=A$D+A$N*A$x,A$n=A$A.origin.elements;A$n[0]=A$a,A$n[2]=A$J;var A$y=A$m._getPosition(A$A,A$T,A$G);A$$._datas[A$P][A$N]=A$y===Number.MAX_VALUE?NaN:A$E-A$y}}return A$$},A$m.createFromImage=function(A$C,A$R,A$j){for(var A$w=A$C.width,A$T=A$C.height,A$G=new A$m(A$w,A$T,A$R,A$j),A$o=(A$j-A$R)/254,A$U=A$C.getPixels(),A$t=0,A$I=0;A$I<A$T;A$I++)for(var A$e=A$G._datas[A$I]=[],A$H=0;A$H<A$w;A$H++){var A$M=A$U[A$t++],A$K=A$U[A$t++],A$F=A$U[A$t++],A$L=A$U[A$t++];A$e[A$H]=255==A$M&&255==A$K&&255==A$F&&255==A$L?NaN:(A$M+A$K+A$F)/3*A$o+A$R}return A$G},A$m._getPosition=function(A$C,A$R,A$j){for(var A$w=Number.MAX_VALUE,A$T=0;A$T<A$R.length;A$T++)for(var A$G=A$R[A$T],A$o=A$j[A$T],A$U=0;A$U<A$o.length;A$U+=3){var A$t=A$G[A$o[A$U+0]],A$I=A$G[A$o[A$U+1]],A$e=A$G[A$o[A$U+2]],A$H=A$FR.rayIntersectsTriangle(A$C,A$t,A$I,A$e);!isNaN(A$H)&&A$H<A$w&&(A$w=A$H)}return A$w},A$H(A$m,["_tempRay",function(){return this._tempRay=new A$TR(new A$oR,new A$oR)}])}(),function(){function A$T(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}A$K(A$T,"laya.d3.core.Layer");var A$C=A$T.prototype;return A$C._binarySearchIndex=function(){for(var A$C=0,A$R=A$T._collsionTestList.length-1,A$j=0;A$C<=A$R;){A$j=Math.floor((A$C+A$R)/2);var A$w=A$T._collsionTestList[A$j];if(A$w==this._number)return A$j;A$w>this._number?A$R=A$j-1:A$C=A$j+1}return A$C},A$C._addCollider=function(A$C){0===this._colliders.length&&A$T._collsionTestList.splice(this._binarySearchIndex(),0,this._number),A$C._isRigidbody?(this._colliders.unshift(A$C),this._nonRigidbodyOffset++):this._colliders.push(A$C)},A$C._removeCollider=function(A$C){var A$R=this._colliders.indexOf(A$C);A$R<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(A$R,1),0===this._colliders.length&&A$T._collsionTestList.splice(A$T._collsionTestList.indexOf(this._number),1)},A$F(0,A$C,"number",function(){return this._number}),A$F(0,A$C,"visible",function(){return this._visible},function(A$C){this._visible=A$C,A$T._visibleLayers=A$C?A$T._visibleLayers|this.mask:A$T._visibleLayers&~this.mask}),A$F(0,A$C,"mask",function(){return this._mask}),A$F(1,A$T,"visibleLayers",function(){return A$T._visibleLayers},function(A$C){A$T._visibleLayers=A$C;for(var A$R=0,A$j=A$T._layerList.length;A$R<A$j;A$R++){var A$w=A$T._layerList[A$R];A$w._visible=0!=(A$w._mask&A$T._visibleLayers)}}),A$T.__init__=function(){A$T._layerList.length=31;for(var A$C=0;A$C<31;A$C++){var A$R=new A$T;A$T._layerList[A$C]=A$R,0===A$C?(A$R.name="Default Layer",A$R.visible=!0):(A$R.name="Layer-"+A$C,A$R.visible=!1),A$R._number=A$C,A$R._mask=Math.pow(2,A$C)}A$T.currentCreationLayer=A$T._layerList[0]},A$T.getLayerByNumber=function(A$C){if(A$C<0||30<A$C)throw new Error("无法返回指定Layer，该number超出范围！");return A$T._layerList[A$C]},A$T.getLayerByName=function(A$C){for(var A$R=0;A$R<31;A$R++)if(A$T._layerList[A$R].name===A$C)return A$T._layerList[A$R];throw new Error("无法返回指定Layer,该name不存在")},A$T.isVisible=function(A$C){return 0!=(A$C&A$T._currentCameraCullingMask&A$T._visibleLayers)},A$T._layerList=[],A$T._visibleLayers=2147483647,A$T._collsionTestList=[],A$T._currentCameraCullingMask=2147483647,A$T.maxCount=31,A$T.currentCreationLayer=null,A$T}()),A$a=(function(){function A$C(A$C,A$R,A$j){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=A$C,this._minCount=A$R,this._maxCount=A$j}A$K(A$C,"laya.d3.core.particleShuriKen.module.Burst");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.cloneTo=function(A$C){var A$R=A$C;A$R._time=this._time,A$R._minCount=this._minCount,A$R._maxCount=this._maxCount},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"time",function(){return this._time}),A$F(0,A$R,"minCount",function(){return this._minCount}),A$F(0,A$R,"maxCount",function(){return this._maxCount})}(),function(){function A$C(A$C){this._color=null,this.enbale=!1,this._color=A$C}A$K(A$C,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var A$R=A$C.prototype;A$R.cloneTo=function(A$C){var A$R=A$C;this._color.cloneTo(A$R._color),A$R.enbale=this.enbale},A$R.clone=function(){var A$C;switch(this._color.type){case 0:A$C=A$y.createByConstant(this._color.constant.clone());break;case 1:A$C=A$y.createByGradient(this._color.gradient.clone());break;case 2:A$C=A$y.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:A$C=A$y.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var A$R=new this.constructor(A$C);return A$R.enbale=this.enbale,A$R},A$F(0,A$R,"color",function(){return this._color})}(),function(){function A$C(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}A$K(A$C,"laya.d3.core.particleShuriKen.module.Emission");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),A$R._destroy=function(){this._bursts=null,this._destroyed=!0},A$R.getBurstsCount=function(){return this._bursts.length},A$R.getBurstByIndex=function(A$C){return this._bursts[A$C]},A$R.addBurst=function(A$C){var A$R=this._bursts.length;if(0<A$R)for(var A$j=0;A$j<A$R;A$j++)this._bursts[A$j].time>A$C.time&&this._bursts.splice(A$j,0,A$C);this._bursts.push(A$C)},A$R.removeBurst=function(A$C){var A$R=this._bursts.indexOf(A$C);-1!==A$R&&this._bursts.splice(A$R,1)},A$R.removeBurstByIndex=function(A$C){this._bursts.splice(A$C,1)},A$R.clearBurst=function(){this._bursts.length=0},A$R.cloneTo=function(A$C){var A$R=A$C,A$j=A$R._bursts;A$j.length=this._bursts.length;for(var A$w=0,A$T=this._bursts.length;A$w<A$T;A$w++){var A$G=A$j[A$w];A$G?this._bursts[A$w].cloneTo(A$G):A$j[A$w]=this._bursts[A$w].clone()}A$R._emissionRate=this._emissionRate,A$R.enbale=this.enbale},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"destroyed",function(){return this._destroyed}),A$F(0,A$R,"emissionRate",function(){return this._emissionRate},function(A$C){if(A$C<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=A$C})}(),function(){function A$w(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}A$K(A$w,"laya.d3.core.particleShuriKen.module.FrameOverTime");var A$C=A$w.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,A$R._constant=this._constant,this._overTime.cloneTo(A$R._overTime),A$R._constantMin=this._constantMin,A$R._constantMax=this._constantMax,this._overTimeMin.cloneTo(A$R._overTimeMin),this._overTimeMax.cloneTo(A$R._overTimeMax)},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"frameOverTimeData",function(){return this._overTime}),A$F(0,A$C,"constant",function(){return this._constant}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"frameOverTimeDataMin",function(){return this._overTimeMin}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"frameOverTimeDataMax",function(){return this._overTimeMax}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$w.createByConstant=function(A$C){var A$R=new A$w;return A$R._type=0,A$R._constant=A$C,A$R},A$w.createByOverTime=function(A$C){var A$R=new A$w;return A$R._type=1,A$R._overTime=A$C,A$R},A$w.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$w;return A$j._type=2,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$w.createByRandomTwoOverTime=function(A$C,A$R){var A$j=new A$w;return A$j._type=3,A$j._overTimeMin=A$C,A$j._overTimeMax=A$R,A$j},A$w}()),A$n=function(){function A$I(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}A$K(A$I,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var A$C=A$I.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,A$R._separateAxes=this._separateAxes,A$R._constant=this._constant,this._constantSeparate.cloneTo(A$R._constantSeparate),this._gradient.cloneTo(A$R._gradient),this._gradientX.cloneTo(A$R._gradientX),this._gradientY.cloneTo(A$R._gradientY),this._gradientZ.cloneTo(A$R._gradientZ),A$R._constantMin=this._constantMin,A$R._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(A$R._constantMinSeparate),this._constantMaxSeparate.cloneTo(A$R._constantMaxSeparate),this._gradientMin.cloneTo(A$R._gradientMin),this._gradientMax.cloneTo(A$R._gradientMax),this._gradientXMin.cloneTo(A$R._gradientXMin),this._gradientXMax.cloneTo(A$R._gradientXMax),this._gradientYMin.cloneTo(A$R._gradientYMin),this._gradientYMax.cloneTo(A$R._gradientYMax),this._gradientZMin.cloneTo(A$R._gradientZMin),this._gradientZMax.cloneTo(A$R._gradientZMax)},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"gradientZ",function(){return this._gradientZ}),A$F(0,A$C,"constant",function(){return this._constant}),A$F(0,A$C,"gradient",function(){return this._gradient}),A$F(0,A$C,"separateAxes",function(){return this._separateAxes}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"constantSeparate",function(){return this._constantSeparate}),A$F(0,A$C,"gradientX",function(){return this._gradientX}),A$F(0,A$C,"gradientY",function(){return this._gradientY}),A$F(0,A$C,"gradientW",function(){return this._gradientW}),A$F(0,A$C,"gradientMin",function(){return this._gradientMin}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"gradientMax",function(){return this._gradientMax}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$F(0,A$C,"gradientWMin",function(){return this._gradientWMin}),A$F(0,A$C,"constantMinSeparate",function(){return this._constantMinSeparate}),A$F(0,A$C,"constantMaxSeparate",function(){return this._constantMaxSeparate}),A$F(0,A$C,"gradientXMin",function(){return this._gradientXMin}),A$F(0,A$C,"gradientXMax",function(){return this._gradientXMax}),A$F(0,A$C,"gradientWMax",function(){return this._gradientWMax}),A$F(0,A$C,"gradientYMin",function(){return this._gradientYMin}),A$F(0,A$C,"gradientYMax",function(){return this._gradientYMax}),A$F(0,A$C,"gradientZMin",function(){return this._gradientZMin}),A$F(0,A$C,"gradientZMax",function(){return this._gradientZMax}),A$I.createByConstant=function(A$C){var A$R=new A$I;return A$R._type=0,A$R._separateAxes=!1,A$R._constant=A$C,A$R},A$I.createByConstantSeparate=function(A$C){var A$R=new A$I;return A$R._type=0,A$R._separateAxes=!0,A$R._constantSeparate=A$C,A$R},A$I.createByGradient=function(A$C){var A$R=new A$I;return A$R._type=1,A$R._separateAxes=!1,A$R._gradient=A$C,A$R},A$I.createByGradientSeparate=function(A$C,A$R,A$j,A$w){var A$T=new A$I;return A$T._type=1,A$T._separateAxes=!0,A$T._gradientX=A$C,A$T._gradientY=A$R,A$T._gradientZ=A$j,A$T._gradientW=A$w,A$T},A$I.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$I;return A$j._type=2,A$j._separateAxes=!1,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$I.createByRandomTwoConstantSeparate=function(A$C,A$R){var A$j=new A$I;return A$j._type=2,A$j._separateAxes=!0,A$j._constantMinSeparate=A$C,A$j._constantMaxSeparate=A$R,A$j},A$I.createByRandomTwoGradient=function(A$C,A$R){var A$j=new A$I;return A$j._type=3,A$j._separateAxes=!1,A$j._gradientMin=A$C,A$j._gradientMax=A$R,A$j},A$I.createByRandomTwoGradientSeparate=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){var A$t=new A$I;return A$t._type=3,A$t._separateAxes=!0,A$t._gradientXMin=A$C,A$t._gradientXMax=A$R,A$t._gradientYMin=A$j,A$t._gradientYMax=A$w,A$t._gradientZMin=A$T,A$t._gradientZMax=A$G,A$t._gradientWMin=A$o,A$t._gradientWMax=A$U,A$t},A$I}(),A$y=function(){function A$w(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}A$K(A$w,"laya.d3.core.particleShuriKen.module.GradientColor");var A$C=A$w.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,this._constant.cloneTo(A$R._constant),this._constantMin.cloneTo(A$R._constantMin),this._constantMax.cloneTo(A$R._constantMax),this._gradient.cloneTo(A$R._gradient),this._gradientMin.cloneTo(A$R._gradientMin),this._gradientMax.cloneTo(A$R._gradientMax)},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"gradient",function(){return this._gradient}),A$F(0,A$C,"constant",function(){return this._constant}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"gradientMin",function(){return this._gradientMin}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"gradientMax",function(){return this._gradientMax}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$w.createByConstant=function(A$C){var A$R=new A$w;return A$R._type=0,A$R._constant=A$C,A$R},A$w.createByGradient=function(A$C){var A$R=new A$w;return A$R._type=1,A$R._gradient=A$C,A$R},A$w.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$w;return A$j._type=2,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$w.createByRandomTwoGradient=function(A$C,A$R){var A$j=new A$w;return A$j._type=3,A$j._gradientMin=A$C,A$j._gradientMax=A$R,A$j},A$w}(),A$m=(function(){function A$C(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}A$K(A$C,"laya.d3.core.particleShuriKen.module.GradientDataColor");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.addAlpha=function(A$C,A$R){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==A$C&&(A$C=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=A$C,this._alphaElements[this._alphaCurrentLength++]=A$R):DEBUG},A$R.addRGB=function(A$C,A$R){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==A$C&&(A$C=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=A$C,this._rgbElements[this._rgbCurrentLength++]=A$R.x,this._rgbElements[this._rgbCurrentLength++]=A$R.y,this._rgbElements[this._rgbCurrentLength++]=A$R.z):DEBUG},A$R.cloneTo=function(A$C){var A$R=A$C,A$j=0,A$w=0;A$R._alphaCurrentLength=this._alphaCurrentLength;var A$T=A$R._alphaElements;for(A$T.length=this._alphaElements.length,A$j=0,A$w=this._alphaElements.length;A$j<A$w;A$j++)A$T[A$j]=this._alphaElements[A$j];A$R._rgbCurrentLength=this._rgbCurrentLength;var A$G=A$R._rgbElements;for(A$G.length=this._rgbElements.length,A$j=0,A$w=this._rgbElements.length;A$j<A$w;A$j++)A$G[A$j]=this._rgbElements[A$j]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),A$F(0,A$R,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function A$C(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}A$K(A$C,"laya.d3.core.particleShuriKen.module.GradientDataInt");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.add=function(A$C,A$R){this._currentLength<8?(6===this._currentLength&&1!==A$C&&(A$C=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=A$C,this._elements[this._currentLength++]=A$R):console.log("Warning:data count must lessEqual than 4")},A$R.cloneTo=function(A$C){var A$R=A$C;A$R._currentLength=this._currentLength;var A$j=A$R._elements;A$j.length=this._elements.length;for(var A$w=0,A$T=this._elements.length;A$w<A$T;A$w++)A$j[A$w]=this._elements[A$w]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"gradientCount",function(){return this._currentLength/2})}(),function(){function A$C(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}A$K(A$C,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.add=function(A$C,A$R){this._currentLength<8?(6===this._currentLength&&1!==A$C&&(A$C=1,DEBUG),this._elements[this._currentLength++]=A$C,this._elements[this._currentLength++]=A$R):DEBUG},A$R.getKeyByIndex=function(A$C){return this._elements[2*A$C]},A$R.getValueByIndex=function(A$C){return this._elements[2*A$C+1]},A$R.getAverageValue=function(){for(var A$C=0,A$R=this._currentLength-2;A$C<A$R;A$C+=2){this._elements[A$C+1];this._elements[A$C+3],this._elements[A$C+2]-this._elements[A$C]}return 0},A$R.cloneTo=function(A$C){var A$R=A$C;A$R._currentLength=this._currentLength;var A$j=A$R._elements;A$j.length=this._elements.length;for(var A$w=0,A$T=this._elements.length;A$w<A$T;A$w++)A$j[A$w]=this._elements[A$w]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"gradientCount",function(){return this._currentLength/2})}(),function(){function A$C(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}A$K(A$C,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.add=function(A$C,A$R){this._currentLength<8?(6===this._currentLength&&1!==A$C&&(A$C=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=A$C,this._elements[this._currentLength++]=A$R.x,this._elements[this._currentLength++]=A$R.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},A$R.cloneTo=function(A$C){var A$R=A$C;A$R._currentLength=this._currentLength;var A$j=A$R._elements;A$j.length=this._elements.length;for(var A$w=0,A$T=this._elements.length;A$w<A$T;A$w++)A$j[A$w]=this._elements[A$w]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"gradientCount",function(){return this._currentLength/3})}(),function(){function A$U(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}A$K(A$U,"laya.d3.core.particleShuriKen.module.GradientSize");var A$C=A$U.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.getMaxSizeInGradient=function(){var A$C=0,A$R=0,A$j=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(A$C=0,A$R=this._gradientX.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientX.getValueByIndex(A$C));for(A$C=0,A$R=this._gradientY.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientY.getValueByIndex(A$C))}else for(A$C=0,A$R=this._gradient.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradient.getValueByIndex(A$C));break;case 1:A$j=this._separateAxes?(A$j=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),A$j=Math.max(A$j,this._constantMinSeparate.y),Math.max(A$j,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(A$C=0,A$R=this._gradientXMin.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientXMin.getValueByIndex(A$C));for(A$C=0,A$R=this._gradientXMax.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientXMax.getValueByIndex(A$C));for(A$C=0,A$R=this._gradientYMin.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientYMin.getValueByIndex(A$C));for(A$C=0,A$R=this._gradientZMax.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientZMax.getValueByIndex(A$C))}else{for(A$C=0,A$R=this._gradientMin.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientMin.getValueByIndex(A$C));for(A$C=0,A$R=this._gradientMax.gradientCount;A$C<A$R;A$C++)A$j=Math.max(A$j,this._gradientMax.getValueByIndex(A$C))}}return A$j},A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,A$R._separateAxes=this._separateAxes,this._gradient.cloneTo(A$R._gradient),this._gradientX.cloneTo(A$R._gradientX),this._gradientY.cloneTo(A$R._gradientY),this._gradientZ.cloneTo(A$R._gradientZ),A$R._constantMin=this._constantMin,A$R._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(A$R._constantMinSeparate),this._constantMaxSeparate.cloneTo(A$R._constantMaxSeparate),this._gradientMin.cloneTo(A$R._gradientMin),this._gradientMax.cloneTo(A$R._gradientMax),this._gradientXMin.cloneTo(A$R._gradientXMin),this._gradientXMax.cloneTo(A$R._gradientXMax),this._gradientYMin.cloneTo(A$R._gradientYMin),this._gradientYMax.cloneTo(A$R._gradientYMax),this._gradientZMin.cloneTo(A$R._gradientZMin),this._gradientZMax.cloneTo(A$R._gradientZMax)},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"gradientZ",function(){return this._gradientZ}),A$F(0,A$C,"gradient",function(){return this._gradient}),A$F(0,A$C,"separateAxes",function(){return this._separateAxes}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"gradientMin",function(){return this._gradientMin}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"gradientX",function(){return this._gradientX}),A$F(0,A$C,"gradientY",function(){return this._gradientY}),A$F(0,A$C,"gradientMax",function(){return this._gradientMax}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$F(0,A$C,"constantMinSeparate",function(){return this._constantMinSeparate}),A$F(0,A$C,"constantMaxSeparate",function(){return this._constantMaxSeparate}),A$F(0,A$C,"gradientXMin",function(){return this._gradientXMin}),A$F(0,A$C,"gradientXMax",function(){return this._gradientXMax}),A$F(0,A$C,"gradientYMin",function(){return this._gradientYMin}),A$F(0,A$C,"gradientYMax",function(){return this._gradientYMax}),A$F(0,A$C,"gradientZMin",function(){return this._gradientZMin}),A$F(0,A$C,"gradientZMax",function(){return this._gradientZMax}),A$U.createByGradient=function(A$C){var A$R=new A$U;return A$R._type=0,A$R._separateAxes=!1,A$R._gradient=A$C,A$R},A$U.createByGradientSeparate=function(A$C,A$R,A$j){var A$w=new A$U;return A$w._type=0,A$w._separateAxes=!0,A$w._gradientX=A$C,A$w._gradientY=A$R,A$w._gradientZ=A$j,A$w},A$U.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$U;return A$j._type=1,A$j._separateAxes=!1,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$U.createByRandomTwoConstantSeparate=function(A$C,A$R){var A$j=new A$U;return A$j._type=1,A$j._separateAxes=!0,A$j._constantMinSeparate=A$C,A$j._constantMaxSeparate=A$R,A$j},A$U.createByRandomTwoGradient=function(A$C,A$R){var A$j=new A$U;return A$j._type=2,A$j._separateAxes=!1,A$j._gradientMin=A$C,A$j._gradientMax=A$R,A$j},A$U.createByRandomTwoGradientSeparate=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=new A$U;return A$o._type=2,A$o._separateAxes=!0,A$o._gradientXMin=A$C,A$o._gradientXMax=A$R,A$o._gradientYMin=A$j,A$o._gradientYMax=A$w,A$o._gradientZMin=A$T,A$o._gradientZMax=A$G,A$o},A$U}()),A$k=function(){function A$U(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}A$K(A$U,"laya.d3.core.particleShuriKen.module.GradientVelocity");var A$C=A$U.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,this._constant.cloneTo(A$R._constant),this._gradientX.cloneTo(A$R._gradientX),this._gradientY.cloneTo(A$R._gradientY),this._gradientZ.cloneTo(A$R._gradientZ),this._constantMin.cloneTo(A$R._constantMin),this._constantMax.cloneTo(A$R._constantMax),this._gradientXMin.cloneTo(A$R._gradientXMin),this._gradientXMax.cloneTo(A$R._gradientXMax),this._gradientYMin.cloneTo(A$R._gradientYMin),this._gradientYMax.cloneTo(A$R._gradientYMax),this._gradientZMin.cloneTo(A$R._gradientZMin),this._gradientZMax.cloneTo(A$R._gradientZMax)},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"gradientZ",function(){return this._gradientZ}),A$F(0,A$C,"constant",function(){return this._constant}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"gradientXMax",function(){return this._gradientXMax}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"gradientX",function(){return this._gradientX}),A$F(0,A$C,"gradientY",function(){return this._gradientY}),A$F(0,A$C,"gradientXMin",function(){return this._gradientXMin}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$F(0,A$C,"gradientYMin",function(){return this._gradientYMin}),A$F(0,A$C,"gradientYMax",function(){return this._gradientYMax}),A$F(0,A$C,"gradientZMin",function(){return this._gradientZMin}),A$F(0,A$C,"gradientZMax",function(){return this._gradientZMax}),A$U.createByConstant=function(A$C){var A$R=new A$U;return A$R._type=0,A$R._constant=A$C,A$R},A$U.createByGradient=function(A$C,A$R,A$j){var A$w=new A$U;return A$w._type=1,A$w._gradientX=A$C,A$w._gradientY=A$R,A$w._gradientZ=A$j,A$w},A$U.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$U;return A$j._type=2,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$U.createByRandomTwoGradient=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=new A$U;return A$o._type=3,A$o._gradientXMin=A$C,A$o._gradientXMax=A$R,A$o._gradientYMin=A$j,A$o._gradientYMax=A$w,A$o._gradientZMin=A$T,A$o._gradientZMax=A$G,A$o},A$U}(),A$V=(function(){function A$C(A$C){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=A$C}A$K(A$C,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.cloneTo=function(A$C){var A$R=A$C;this._angularVelocity.cloneTo(A$R._angularVelocity),A$R.enbale=this.enbale},A$R.clone=function(){var A$C;switch(this._angularVelocity.type){case 0:A$C=this._angularVelocity.separateAxes?A$n.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):A$n.createByConstant(this._angularVelocity.constant);break;case 1:A$C=this._angularVelocity.separateAxes?A$n.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):A$n.createByGradient(this._angularVelocity.gradient.clone());break;case 2:A$C=this._angularVelocity.separateAxes?A$n.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):A$n.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:A$C=this._angularVelocity.separateAxes?A$n.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):A$n.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var A$R=new this.constructor(A$C);return A$R.enbale=this.enbale,A$R},A$F(0,A$R,"angularVelocity",function(){return this._angularVelocity})}(),function(){function A$C(){this.enable=!1,this.randomDirection=!1}A$K(A$C,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R._getShapeBoundBox=function(A$C){throw new Error("BaseShape: must override it.")},A$R._getSpeedBoundBox=function(A$C){throw new Error("BaseShape: must override it.")},A$R.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){throw new Error("BaseShape: must override it.")},A$R._calculateProceduralBounds=function(A$C,A$R,A$j){this._getShapeBoundBox(A$C);var A$w=A$C.min,A$T=A$C.max;A$oR.multiply(A$w,A$R,A$w),A$oR.multiply(A$T,A$R,A$T);var A$G=new A$YC(new A$oR,new A$oR);this.randomDirection?(A$G.min=new A$oR(-1,-1,-1),A$G.max=new A$oR(1,1,1)):this._getSpeedBoundBox(A$G);var A$o=new A$YC(new A$oR,new A$oR),A$U=A$o.min,A$t=A$o.max;A$oR.scale(A$G.min,A$j.y,A$U),A$oR.scale(A$G.max,A$j.y,A$t),A$oR.add(A$C.min,A$U,A$U),A$oR.add(A$C.max,A$t,A$t),A$oR.min(A$C.min,A$U,A$C.min),A$oR.max(A$C.max,A$U,A$C.max);var A$I=new A$YC(new A$oR,new A$oR),A$e=A$I.min,A$H=A$I.max;A$oR.scale(A$G.min,A$j.x,A$e),A$oR.scale(A$G.max,A$j.x,A$H),A$oR.min(A$I.min,A$H,A$U),A$oR.max(A$I.min,A$H,A$t),A$oR.min(A$C.min,A$U,A$C.min),A$oR.max(A$C.max,A$U,A$C.max)},A$R.cloneTo=function(A$C){A$C.enable=this.enable},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$C}()),A$i=function(){function A$G(){}return A$K(A$G,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),A$G._randomPointUnitArcCircle=function(A$C,A$R,A$j){var A$w=A$R.elements,A$T=NaN;A$T=A$j?A$j.getFloat()*A$C:Math.random()*A$C,A$w[0]=Math.cos(A$T),A$w[1]=Math.sin(A$T)},A$G._randomPointInsideUnitArcCircle=function(A$C,A$R,A$j){var A$w=A$R.elements;A$G._randomPointUnitArcCircle(A$C,A$R,A$j);var A$T=NaN;A$T=A$j?Math.pow(A$j.getFloat(),.5):Math.pow(Math.random(),.5),A$w[0]=A$w[0]*A$T,A$w[1]=A$w[1]*A$T},A$G._randomPointUnitCircle=function(A$C,A$R){var A$j=A$C.elements,A$w=NaN;A$w=A$R?A$R.getFloat()*Math.PI*2:Math.random()*Math.PI*2,A$j[0]=Math.cos(A$w),A$j[1]=Math.sin(A$w)},A$G._randomPointInsideUnitCircle=function(A$C,A$R){var A$j=A$C.elements;A$G._randomPointUnitCircle(A$C);var A$w=NaN;A$w=A$R?Math.pow(A$R.getFloat(),.5):Math.pow(Math.random(),.5),A$j[0]=A$j[0]*A$w,A$j[1]=A$j[1]*A$w},A$G._randomPointUnitSphere=function(A$C,A$R){var A$j=A$C.elements,A$w=NaN,A$T=NaN;A$T=A$R?(A$w=A$j[2]=2*A$R.getFloat()-1,A$R.getFloat()*Math.PI*2):(A$w=A$j[2]=2*Math.random()-1,Math.random()*Math.PI*2);var A$G=Math.sqrt(1-A$w*A$w);A$j[0]=A$G*Math.cos(A$T),A$j[1]=A$G*Math.sin(A$T)},A$G._randomPointInsideUnitSphere=function(A$C,A$R){var A$j=A$C.elements;A$G._randomPointUnitSphere(A$C);var A$w=NaN;A$w=A$R?Math.pow(A$R.getFloat(),1/3):Math.pow(Math.random(),1/3),A$j[0]=A$j[0]*A$w,A$j[1]=A$j[1]*A$w,A$j[2]=A$j[2]*A$w},A$G._randomPointInsideHalfUnitBox=function(A$C,A$R){var A$j=A$C.elements;A$R?(A$j[0]=A$R.getFloat()-.5,A$j[1]=A$R.getFloat()-.5,A$j[2]=A$R.getFloat()-.5):(A$j[0]=Math.random()-.5,A$j[1]=Math.random()-.5,A$j[2]=Math.random()-.5)},A$G}(),A$_=(function(){function A$C(A$C){this._size=null,this.enbale=!1,this._size=A$C}A$K(A$C,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.cloneTo=function(A$C){var A$R=A$C;this._size.cloneTo(A$R._size),A$R.enbale=this.enbale},A$R.clone=function(){var A$C;switch(this._size.type){case 0:A$C=this._size.separateAxes?A$m.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):A$m.createByGradient(this._size.gradient.clone());break;case 1:A$C=this._size.separateAxes?A$m.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):A$m.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:A$C=this._size.separateAxes?A$m.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):A$m.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var A$R=new this.constructor(A$C);return A$R.enbale=this.enbale,A$R},A$F(0,A$R,"size",function(){return this._size})}(),function(){function A$w(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}A$K(A$w,"laya.d3.core.particleShuriKen.module.StartFrame");var A$C=A$w.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.cloneTo=function(A$C){var A$R=A$C;A$R._type=this._type,A$R._constant=this._constant,A$R._constantMin=this._constantMin,A$R._constantMax=this._constantMax},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$C,"constant",function(){return this._constant}),A$F(0,A$C,"type",function(){return this._type}),A$F(0,A$C,"constantMin",function(){return this._constantMin}),A$F(0,A$C,"constantMax",function(){return this._constantMax}),A$w.createByConstant=function(A$C){var A$R=new A$w;return A$R._type=0,A$R._constant=A$C,A$R},A$w.createByRandomTwoConstant=function(A$C,A$R){var A$j=new A$w;return A$j._type=1,A$j._constantMin=A$C,A$j._constantMax=A$R,A$j},A$w}()),A$u=(function(){function A$C(A$C,A$R){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new A$GR(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=A$C,this._startFrame=A$R}A$K(A$C,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.cloneTo=function(A$C){var A$R=A$C;this.tiles.cloneTo(A$R.tiles),A$R.type=this.type,A$R.randomRow=this.randomRow,this._frame.cloneTo(A$R._frame),this._startFrame.cloneTo(A$R._startFrame),A$R.cycles=this.cycles,A$R.enableUVChannels=this.enableUVChannels,A$R.enable=this.enable},A$R.clone=function(){var A$C,A$R;switch(this._frame.type){case 0:A$C=A$a.createByConstant(this._frame.constant);break;case 1:A$C=A$a.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:A$C=A$a.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:A$C=A$a.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:A$R=A$_.createByConstant(this._startFrame.constant);break;case 1:A$R=A$_.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var A$j=new this.constructor(A$C,A$R);return this.tiles.cloneTo(A$j.tiles),A$j.type=this.type,A$j.randomRow=this.randomRow,A$j.cycles=this.cycles,A$j.enableUVChannels=this.enableUVChannels,A$j.enable=this.enable,A$j},A$F(0,A$R,"frame",function(){return this._frame}),A$F(0,A$R,"startFrame",function(){return this._startFrame})}(),function(){function A$C(A$C){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=A$C}A$K(A$C,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.cloneTo=function(A$C){var A$R=A$C;this._velocity.cloneTo(A$R._velocity),A$R.enbale=this.enbale,A$R.space=this.space},A$R.clone=function(){var A$C;switch(this._velocity.type){case 0:A$C=A$k.createByConstant(this._velocity.constant.clone());break;case 1:A$C=A$k.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:A$C=A$k.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:A$C=A$k.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var A$R=new this.constructor(A$C);return A$R.enbale=this.enbale,A$R.space=this.space,A$R},A$F(0,A$R,"velocity",function(){return this._velocity})}(),function(){function A$C(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new A$MR,this._vb=A$VR.create(A$C._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=A$kR.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=A$yR.nameKey.getID("LINE"),this._shaderCompile=A$xR._preCompileShader[this._sharderNameID]}A$K(A$C,"laya.d3.core.PhasorSpriter3D");var A$R=A$C.prototype;return A$R.line=function(A$C,A$R,A$j,A$w){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(A$C.x,A$C.y,A$C.z,A$R.x,A$R.y,A$R.z,A$R.w),this.addVertex(A$j.x,A$j.y,A$j.z,A$w.x,A$w.y,A$w.z,A$w.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},A$R.circle=function(A$C,A$R,A$j,A$w,A$T,A$G){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*A$R,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/A$R,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*A$C,Math.cos(this._tempNumver0)*A$C,0,A$j,A$w,A$T,A$G),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},A$R.plane=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=A$w/2,this._tempNumver1=A$T/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(A$C-this._tempNumver0,A$R+this._tempNumver1,A$j,A$G,A$o,A$U,A$t),this.addVertex(A$C+this._tempNumver0,A$R+this._tempNumver1,A$j,A$G,A$o,A$U,A$t),this.addVertex(A$C-this._tempNumver0,A$R-this._tempNumver1,A$j,A$G,A$o,A$U,A$t),this.addVertex(A$C+this._tempNumver0,A$R-this._tempNumver1,A$j,A$G,A$o,A$U,A$t),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},A$R.box=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=A$w/2,this._tempNumver1=A$T/2,this._tempNumver2=A$G/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(A$C-this._tempNumver0,A$R+this._tempNumver1,A$j+this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C+this._tempNumver0,A$R+this._tempNumver1,A$j+this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C-this._tempNumver0,A$R-this._tempNumver1,A$j+this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C+this._tempNumver0,A$R-this._tempNumver1,A$j+this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C+this._tempNumver0,A$R+this._tempNumver1,A$j-this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C-this._tempNumver0,A$R+this._tempNumver1,A$j-this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C+this._tempNumver0,A$R-this._tempNumver1,A$j-this._tempNumver2,A$o,A$U,A$t,A$I),this.addVertex(A$C-this._tempNumver0,A$R-this._tempNumver1,A$j-this._tempNumver2,A$o,A$U,A$t,A$I),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},A$R.cone=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*A$j+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*A$j>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/A$j,this.addVertexIndex(0,A$R,0,A$w,A$T,A$G,A$o,this._tempUint0),this.addVertexIndex(0,0,0,A$w,A$T,A$G,A$o,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<A$j;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(A$C*this._tempNumver2,0,A$C*this._tempNumver3,A$w,A$T,A$G,A$o,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==A$j-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(A$C*this._tempNumver2,0,A$C*this._tempNumver3,A$w,A$T,A$G,A$o,this._tempUint0+(this._tempInt0+A$j)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==A$j-1?this.addIndexes(this._tempUint1+A$j+2):this.addIndexes(this._tempUint1+this._tempInt0+A$j+1),this.addIndexes(this._tempUint1+this._tempInt0+A$j),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},A$R.boundingBoxLine=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(A$C,A$T,A$G,A$o,A$U,A$t,A$I),this.addVertex(A$w,A$T,A$G,A$o,A$U,A$t,A$I),this.addVertex(A$C,A$R,A$G,A$o,A$U,A$t,A$I),this.addVertex(A$w,A$R,A$G,A$o,A$U,A$t,A$I),this.addVertex(A$w,A$T,A$j,A$o,A$U,A$t,A$I),this.addVertex(A$C,A$T,A$j,A$o,A$U,A$t,A$I),this.addVertex(A$w,A$R,A$j,A$o,A$U,A$t,A$I),this.addVertex(A$C,A$R,A$j,A$o,A$U,A$t,A$I),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},A$R.addVertex=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=A$C,this._vbData[this._posInVBData+1]=A$R,this._vbData[this._posInVBData+2]=A$j,this._vbData[this._posInVBData+3]=A$w,this._vbData[this._posInVBData+4]=A$T,this._vbData[this._posInVBData+5]=A$G,this._vbData[this._posInVBData+6]=A$o,this._posInVBData+=this._floatSizePerVer,this},A$R.addVertexIndex=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){return this._hasBegun||this.addVertexIndexException(),this._vbData[A$U]=A$C,this._vbData[A$U+1]=A$R,this._vbData[A$U+2]=A$j,this._vbData[A$U+3]=A$w,this._vbData[A$U+4]=A$T,this._vbData[A$U+5]=A$G,this._vbData[A$U+6]=A$o,(A$U+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=A$U),this},A$R.addIndexes=function(A$C){var A$R=arguments;this._hasBegun||this.addVertexIndexException();for(var A$j=0;A$j<A$R.length;A$j++)this._ibData[this._posInIBData]=A$R[A$j],this._posInIBData++;return this},A$R.begin=function(A$C,A$R){return this._hasBegun&&this.beginException0(),1!==A$C&&4!==A$C&&this.beginException1(),this._primitiveType=A$C,this._camera=A$R,this._hasBegun=!0,this},A$R.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},A$R.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(A$C._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),A$x.drawCall++,A$E.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},A$R.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},A$R.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},A$R.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},A$R.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},A$R.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},A$R.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(28,[new A$oC(0,"vector3",0),new A$oC(12,"vector4",1)])}]),A$C}()),A$s=function(){function A$C(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++A$C._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new A$MR}A$K(A$C,"laya.d3.core.render.RenderElement");var A$R=A$C.prototype;return A$R.getDynamicBatchBakedVertexs=function(A$C){for(var A$R=this._renderObj._getVertexBuffer(A$C),A$j=A$R.getData().slice(),A$w=A$R.vertexDeclaration,A$T=A$w.getVertexElementByUsage(0).offset/4,A$G=A$w.getVertexElementByUsage(3).offset/4,A$o=this._sprite3D.transform,A$U=A$o.worldMatrix,A$t=A$o.rotation,A$I=A$w.vertexStride/4,A$e=0,A$H=A$j.length;A$e<A$H;A$e+=A$I){var A$M=A$e+A$T,A$K=A$e+A$G;A$DR.transformVector3ArrayToVector3ArrayCoordinate(A$j,A$M,A$U,A$j,A$M),A$DR.transformVector3ArrayByQuat(A$j,A$K,A$t,A$j,A$K)}return A$j},A$R.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},A$R._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},A$F(0,A$R,"id",function(){return this._id}),A$F(0,A$R,"renderObj",function(){return this._renderObj},function(A$C){this._renderObj!==A$C&&(this._renderObj=A$C)}),A$C._uniqueIDCounter=0,A$C}(),A$c=function(){function A$R(A$C){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++A$R._uniqueIDCounter,this._needSort=!1,this._scene=A$C,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}A$K(A$R,"laya.d3.core.render.RenderQueue");var A$C=A$R.prototype;return A$C._sortOpaqueFunc=function(A$C,A$R){if(A$C._render&&A$R._render){var A$j=A$C._material.renderQueue-A$R._material.renderQueue;return 0==A$j?A$C._render._distanceForSort-A$R._render._distanceForSort:A$j}return 0},A$C._sortAlphaFunc=function(A$C,A$R){if(A$C._render&&A$R._render){var A$j=A$C._material.renderQueue-A$R._material.renderQueue;return 0==A$j?A$R._render._distanceForSort-A$C._render._distanceForSort:A$j}return 0},A$C._begainRenderElement=function(A$C,A$R,A$j){return!!A$R._beforeRender(A$C)},A$C._sortAlpha=function(A$C){A$R._cameraPosition=A$C,this._finalElements.sort(this._sortAlphaFunc)},A$C._sortOpaque=function(A$C){A$R._cameraPosition=A$C,this._finalElements.sort(this._sortOpaqueFunc)},A$C._preRender=function(A$C){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},A$C._render=function(A$C,A$R){for(var A$j,A$w,A$T,A$G,A$o,A$U,A$t=A$x.loopCount,A$I=this._scene,A$e=A$C.camera,A$H=(A$e.id,!1),A$M=0,A$K=this._finalElements.length;A$M<A$K;A$M++){var A$F,A$L,A$D,A$Q=this._finalElements[A$M];if(null!=A$Q._onPreRenderFunction&&A$Q._onPreRenderFunction.call(A$Q._sprite3D,A$C),0===A$Q._type){if(A$C.owner=A$D=A$Q._sprite3D,A$C.renderElement=A$Q,A$D._preRenderUpdateComponents(A$C),A$F=A$Q.renderObj,A$L=A$Q._material,this._begainRenderElement(A$C,A$F,A$L)){if(A$j=A$F._getVertexBuffers(),!(A$T=(A$w=A$F._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[A$w.id]){this._errorRecord[A$w.id]=1;var A$Z="vertexBuffer:"+("("+A$w._destroyed+","+A$w._released+","+A$w._referenceCount+","+A$w._buffer+")")+", material:"+(A$L?A$L.__className+"("+A$L._destroyed+","+A$L._released+")":"null")+", owner:"+(A$D?A$D.__className+"("+A$D._destroyed+","+A$D._activeInHierarchy+","+A$D._displayedInStage+")":"null")+", renderObj:"+(A$F?A$F.__className+"("+A$F._destroyed+","+A$F._released+","+A$F._referenceCount+")":"")+", parent:, url:"+(A$D?A$D.url:"")+", disposeStack:"+A$w.disposeStack;A$f.recordError("报错：unknown vertexDeclaration  "+A$Z)}continue}if(A$H=(A$G=A$C._shader=A$L._getShader(A$I._shaderDefineValue,A$T.shaderDefineValue,A$D._shaderDefineValue)).bind()||A$t!==A$G._uploadLoopCount,A$j){if(A$G._uploadVertexBuffer!==A$j||A$H){for(var A$S=0;A$S<A$j.length;A$S++){var A$b=A$j[A$S];A$G.uploadAttributesX(A$b.vertexDeclaration.shaderValues.data,A$b)}A$G._uploadVertexBuffer=A$j}}else(A$G._uploadVertexBuffer!==A$w||A$H)&&(A$G.uploadAttributes(A$T.shaderValues.data,null),A$G._uploadVertexBuffer=A$w);(A$G._uploadScene!==A$I||A$H)&&(A$G.uploadSceneUniforms(A$I._shaderValues.data),A$G._uploadScene=A$I),(A$e!==A$G._uploadCamera||A$G._uploadSprite3D!==A$D||A$H)&&(A$G.uploadSpriteUniforms(A$D._shaderValues.data),A$G._uploadSprite3D=A$D),(A$e!==A$G._uploadCamera||A$H)&&(A$G.uploadCameraUniforms(A$e._shaderValues.data),A$G._uploadCamera=A$e),(A$G._uploadMaterial!==A$L||A$H)&&(A$L._upload(),A$G._uploadMaterial=A$L),A$o!==A$L?(A$L._setRenderStateBlendDepth(),A$L._setRenderStateFrontFace(A$R,A$D.transform),A$o=A$L,A$U=A$D):A$U!==A$D&&(A$L._setRenderStateFrontFace(A$R,A$D.transform),A$U=A$D),A$F._render(A$C),A$G._uploadLoopCount=A$t}A$D._postRenderUpdateComponents(A$C)}else if(2===A$Q._type){A$Q.renderObj;A$C.owner=A$D=A$Q._sprite3D,A$C.renderElement=A$Q,A$C._batchIndexStart=A$Q._tempBatchIndexStart,A$C._batchIndexEnd=A$Q._tempBatchIndexEnd,A$F=A$Q.renderObj,A$L=A$Q._material,this._begainRenderElement(A$C,A$F,A$L)&&(A$T=(A$w=A$F._getVertexBuffer(0)).vertexDeclaration,A$H=(A$G=A$C._shader=A$L._getShader(A$I._shaderDefineValue,A$T.shaderDefineValue,A$D._shaderDefineValue)).bind()||A$t!==A$G._uploadLoopCount,(A$G._uploadVertexBuffer!==A$w||A$H)&&(A$G.uploadAttributes(A$T.shaderValues.data,null),A$G._uploadVertexBuffer=A$w),(A$G._uploadScene!==A$I||A$H)&&(A$G.uploadSceneUniforms(A$I._shaderValues.data),A$G._uploadScene=A$I),(A$e!==A$G._uploadCamera||A$G._uploadSprite3D!==A$D||A$H)&&(A$G.uploadSpriteUniforms(A$D._shaderValues.data),A$G._uploadSprite3D=A$D),(A$e!==A$G._uploadCamera||A$H)&&(A$G.uploadCameraUniforms(A$e._shaderValues.data),A$G._uploadCamera=A$e),(A$G._uploadMaterial!==A$L||A$H)&&(A$L._upload(),A$G._uploadMaterial=A$L),A$o!==A$L?(A$L._setRenderStateBlendDepth(),A$L._setRenderStateFrontFace(A$R,A$D.transform),A$o=A$L,A$U=A$D):A$U!==A$D&&(A$L._setRenderStateFrontFace(A$R,A$D.transform),A$U=A$D),A$F._render(A$C),A$G._uploadLoopCount=A$t)}}},A$C._renderShadow=function(A$C,A$R){for(var A$j,A$w,A$T,A$G,A$o,A$U=A$x.loopCount,A$t=this._scene,A$I=A$C.camera,A$e=!1,A$H=0,A$M=this._finalElements.length;A$H<A$M;A$H++){var A$K,A$F,A$L,A$D=this._finalElements[A$H];0===A$D._type&&(A$C.owner=A$L=A$D._sprite3D,A$R||A$L._projectionViewWorldUpdateCamera===A$I&&A$L._projectionViewWorldUpdateLoopCount===A$x.loopCount||(A$L._render._renderUpdate(A$C._projectionViewMatrix),A$L._projectionViewWorldUpdateLoopCount=A$x.loopCount,A$L._projectionViewWorldUpdateCamera=A$I),A$C.renderElement=A$D,A$L._preRenderUpdateComponents(A$C),A$K=A$D.renderObj,A$F=A$D._material,this._begainRenderElement(A$C,A$K,null)&&(A$w=(A$j=A$K._getVertexBuffer(0)).vertexDeclaration,A$e=(A$T=A$C._shader=A$F._getShader(A$t._shaderDefineValue,A$w.shaderDefineValue,A$L._shaderDefineValue)).bind()||A$U!==A$T._uploadLoopCount,(A$T._uploadVertexBuffer!==A$j||A$e)&&(A$T.uploadAttributes(A$w.shaderValues.data,null),A$T._uploadVertexBuffer=A$j),(A$I!==A$T._uploadCamera||A$T._uploadSprite3D!==A$L||A$e)&&(A$T.uploadSpriteUniforms(A$L._shaderValues.data),A$T._uploadSprite3D=A$L),(A$I!==A$T._uploadCamera||A$e)&&(A$T.uploadCameraUniforms(A$I._shaderValues.data),A$T._uploadCamera=A$I),(A$T._uploadMaterial!==A$F||A$e)&&(A$F._upload(),A$T._uploadMaterial=A$F),A$T._uploadRenderElement,A$G!==A$F?(A$F._setRenderStateFrontFace(!1,A$L.transform),A$G=A$F,A$o=A$L):A$o!==A$L&&(A$F._setRenderStateFrontFace(!1,A$L.transform),A$o=A$L),A$K._render(A$C),A$T._uploadLoopCount=A$U),A$L._postRenderUpdateComponents(A$C))}},A$C._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},A$C._addRenderElement=function(A$C){this._renderElements.push(A$C),this._needSort=!0},A$C._addDynamicBatchElement=function(A$C){this._dynamicBatchCombineRenderElements.push(A$C)},A$F(0,A$C,"id",function(){return this._id}),A$R._uniqueIDCounter=0,A$R._cameraPosition=null,A$R}(),A$X=function(){function A$C(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return A$K(A$C,"laya.d3.core.render.RenderState"),A$C.clientWidth=0,A$C.clientHeight=0,A$C}(),A$Y=function(){function A$o(A$C,A$R){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new A$OC(new A$oR,0),this._corners=[new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR],this._boundingBoxCenter=new A$oR,this._children=A$w(8),this._objects=[],this._tempBoundBoxCorners=[new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR],this._scene=A$C,this._currentDepth=A$R}A$K(A$o,"laya.d3.core.scene.OctreeNode");var A$C=A$o.prototype;return A$f.imps(A$C,{"laya.d3.core.scene.ITreeNode":!0}),A$C.init=function(A$C,A$R){var A$j=new A$oR,A$w=new A$oR;A$oR.scale(A$R,-.5,A$j),A$oR.scale(A$R,.5,A$w),A$oR.add(A$j,A$C,A$j),A$oR.add(A$w,A$C,A$w),this.exactBox=new A$YC(A$j,A$w),this.relaxBox=new A$YC(A$j,A$w)},A$C.addTreeNode=function(A$C){1===Collision.boxContainsBox(this._relaxBox,A$C.boundingBox)?this.addNodeDown(A$C,0):this.addObject(A$C)},A$C.addChild=function(A$C){var A$R=this._children[A$C];if(null==A$R){A$R=new A$o(this._scene,this._currentDepth+1),(this._children[A$C]=A$R)._parent=this,A$oR.subtract(this._exactBox.max,this._exactBox.min,A$o.tempSize),A$oR.multiply(A$o.tempSize,A$o._octreeSplit[A$C],A$o.tempCenter),A$oR.add(this._exactBox.min,A$o.tempCenter,A$o.tempCenter),A$oR.scale(A$o.tempSize,.25,A$o.tempSize);var A$j=new A$oR,A$w=new A$oR;A$oR.subtract(A$o.tempCenter,A$o.tempSize,A$j),A$oR.add(A$o.tempCenter,A$o.tempSize,A$w),A$R.exactBox=new A$YC(A$j,A$w),A$oR.scale(A$o.tempSize,A$o.relax,A$o.tempSize);var A$T=new A$oR,A$G=new A$oR;A$oR.subtract(A$o.tempCenter,A$o.tempSize,A$T),A$oR.add(A$o.tempCenter,A$o.tempSize,A$G),A$R.relaxBox=new A$YC(A$T,A$G)}return A$R},A$C.addObject=function(A$C){(A$C._treeNode=this)._objects.push(A$C)},A$C.removeObject=function(A$C){if(A$C._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var A$R=this._objects.indexOf(A$C);return-1!==A$R&&(this._objects.splice(A$R,1),!0)},A$C.clearObject=function(){this._objects.length=0},A$C.addNodeUp=function(A$C,A$R){this._parent&&1!==Collision.boxContainsBox(this._exactBox,A$C.boundingBox)?this._parent.addNodeUp(A$C,A$R-1):this.addNodeDown(A$C,A$R)},A$C.addNodeDown=function(A$C,A$R){if(A$R<this._scene.treeLevel){var A$j=this.inChildIndex(A$C.boundingBoxCenter),A$w=this.addChild(A$j);1===Collision.boxContainsBox(A$w._relaxBox,A$C.boundingBox)?A$w.addNodeDown(A$C,++A$R):this.addObject(A$C)}else this.addObject(A$C)},A$C.inChildIndex=function(A$C){return 4*(A$C.z<this._boundingBoxCenter.z?0:1)+2*(A$C.y<this._boundingBoxCenter.y?0:1)+(A$C.x<this._boundingBoxCenter.x?0:1)},A$C.updateObject=function(A$C){1===Collision.boxContainsBox(this._relaxBox,A$C.boundingBox)?(this.removeObject(A$C),A$C._treeNode=null,this.addNodeDown(A$C,this._currentDepth)):this._parent&&(this.removeObject(A$C),A$C._treeNode=null,this._parent.addNodeUp(A$C,this._currentDepth-1))},A$C.cullingObjects=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o=0,A$U=0,A$t=0,A$I=this._scene._dynamicBatchManager;for(A$o=0,A$G=this._objects.length;A$o<A$G;A$o++){var A$e=this._objects[A$o];if(A$N.isVisible(A$e._owner.layer.mask)&&A$e.enable){if(A$R&&(A$x.treeSpriteCollision+=1,0===A$C.containsBoundSphere(A$e.boundingSphere)))continue;A$e._renderUpdate(A$T),A$e._distanceForSort=A$oR.distance(A$e.boundingSphere.center,A$w)+A$e.sortingFudge;var A$H=A$e._renderElements;for(A$U=0,A$t=A$H.length;A$U<A$t;A$U++){var A$M=A$H[A$U],A$K=A$M._staticBatch;if(A$K&&A$K._material===A$M._material)A$K._addBatchRenderElement(A$M);else{var A$F=A$M.renderObj;A$F.triangleCount<10&&1===A$F._vertexBufferCount&&A$F._getIndexBuffer()&&A$M._material.renderQueue<2&&A$M._canDynamicBatch&&!A$e._owner.isStatic?A$I._addPrepareRenderElement(A$M):this._scene.getRenderQueue(A$M._material.renderQueue)._addRenderElement(A$M)}}}}for(A$o=0;A$o<8;A$o++){var A$L=this._children[A$o];if(null!=A$L){var A$D=A$R;if(A$R){var A$Q=A$C.containsBoundBox(A$L._relaxBox);if(A$x.treeNodeCollision+=1,0===A$Q)continue;A$D=2===A$Q}A$L.cullingObjects(A$C,A$D,A$j,A$w,A$T)}}},A$C.cullingShadowObjects=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o=0,A$U=0,A$t=0;this._scene._dynamicBatchManager;for(A$o=0,A$G=this._objects.length;A$o<A$G;A$o++){var A$I=this._objects[A$o];if(A$I.castShadow&&A$N.isVisible(A$I._owner.layer.mask)&&A$I.enable){if(A$j&&0===A$C[0].containsBoundSphere(A$I.boundingSphere))continue;for(var A$e=1,A$H=A$C.length;A$e<A$H;A$e++){var A$M=A$R[A$e-1];if(0!==A$C[A$e].containsBoundSphere(A$I.boundingSphere)){var A$K=A$I._renderElements;for(A$U=0,A$t=A$K.length;A$U<A$t;A$U++)A$M._addRenderElement(A$K[A$U])}}}}for(A$o=0;A$o<8;A$o++){var A$F=this._children[A$o];if(null!=A$F){var A$L=A$j;if(A$j){var A$D=A$C[0].containsBoundBox(A$F._relaxBox);if(0===A$D)continue;A$L=2===A$D}A$F.cullingShadowObjects(A$C,A$R,A$L,A$w,A$T)}}},A$C.cullingShadowObjectsOnePSSM=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U=A$R[0],A$t=0,A$I=0,A$e=0;for(A$t=0,A$o=this._objects.length;A$t<A$o;A$t++){var A$H=this._objects[A$t];if(A$H.castShadow&&A$N.isVisible(A$H._owner.layer.mask)&&A$H.enable){if(A$w&&0===A$C.containsBoundSphere(A$H.boundingSphere))continue;A$H._renderUpdate(A$j);var A$M=A$H._renderElements;for(A$I=0,A$e=A$M.length;A$I<A$e;A$I++)A$U._addRenderElement(A$M[A$I])}}for(A$t=0;A$t<8;A$t++){var A$K=this._children[A$t];if(null!=A$K){var A$F=A$w;if(A$w){var A$L=A$C.containsBoundBox(A$K._relaxBox);if(0===A$L)continue;A$F=2===A$L}A$K.cullingShadowObjectsOnePSSM(A$C,A$R,A$j,A$F,A$T,A$G)}}},A$C.renderBoudingBox=function(A$C){this._renderBoudingBox(A$C);for(var A$R=0;A$R<8;++A$R){var A$j=this._children[A$R];A$j&&A$j.renderBoudingBox(A$C)}},A$C.buildAllChild=function(A$C){if(A$C<this._scene.treeLevel)for(var A$R=0;A$R<8;A$R++){this.addChild(A$R).buildAllChild(A$C+1)}},A$C._renderBoudingBox=function(A$C){},A$F(0,A$C,"exactBox",function(){return this._exactBox},function(A$C){this._exactBox=A$C,A$oR.add(A$C.min,A$C.max,this._boundingBoxCenter),A$oR.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),A$F(0,A$C,"relaxBox",function(){return this._relaxBox},function(A$C){(this._relaxBox=A$C).getCorners(this._corners),A$OC.createfromPoints(this._corners,this._boundingSphere)}),A$o.debugMode=!1,A$o.relax=1.15,A$o.CHILDNUM=8,A$H(A$o,["tempVector0",function(){return this.tempVector0=new A$oR},"tempSize",function(){return this.tempSize=new A$oR},"tempCenter",function(){return this.tempCenter=new A$oR},"_octreeSplit",function(){return this._octreeSplit=[new A$oR(.25,.25,.25),new A$oR(.75,.25,.25),new A$oR(.25,.75,.25),new A$oR(.75,.75,.25),new A$oR(.25,.25,.75),new A$oR(.75,.25,.75),new A$oR(.25,.75,.75),new A$oR(.75,.75,.75)]}]),A$o}(),A$d=(function(){function A$C(){}A$K(A$C,"laya.d3.core.scene.SceneManager")}(),function(){function A$C(A$C,A$R,A$j,A$w){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===A$C&&(A$C=1),void 0===A$R&&(A$R=1),void 0===A$j&&(A$j=1),void 0===A$w&&(A$w=1),this._r=A$C,this._g=A$R,this._b=A$j,this._a=A$w}return A$K(A$C,"laya.d3.core.trail.module.Color",null,"Color$1"),A$C.prototype.cloneTo=function(A$C){A$C._r=this._r,A$C._g=this._g,A$C._b=this._b,A$C._a=this._a},A$H(A$C,["RED",function(){return this.RED=new A$C(1,0,0,1)},"GREEN",function(){return this.GREEN=new A$C(0,1,0,1)},"BLUE",function(){return this.BLUE=new A$C(0,0,1,1)},"CYAN",function(){return this.CYAN=new A$C(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new A$C(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new A$C(1,0,1,1)},"GRAY",function(){return this.GRAY=new A$C(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new A$C(1,1,1,1)},"BLACK",function(){return this.BLACK=new A$C(0,0,0,1)}]),A$C}()),A$O=(function(){function A$C(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}A$K(A$C,"laya.d3.core.trail.module.Gradient");var A$R=A$C.prototype;A$R.setKeys=function(A$C,A$R){var A$j,A$w;this._colorKeys=A$C;for(var A$T=this.index=0;A$T<A$C.length;A$T++){var A$G=(A$j=A$C[A$T]).color;this._colorKeyData[this.index++]=A$G._r,this._colorKeyData[this.index++]=A$G._g,this._colorKeyData[this.index++]=A$G._b,this._colorKeyData[this.index++]=A$j.time}this._alphaKeys=A$R;for(var A$o=this.index=0;A$o<A$R.length;A$o++)A$w=A$R[A$o],this._alphaKeyData[this.index++]=A$w.alpha,this._alphaKeyData[this.index++]=A$w.time},A$R.cloneTo=function(A$C){var A$R=0,A$j=0,A$w=this.colorKeys,A$T=[];for(A$R=0,A$j=A$w.length;A$R<A$j;A$R++){var A$G=new A$q;A$w[A$R].cloneTo(A$G),A$T.push(A$G)}var A$o=this.alphaKeys,A$U=[];for(A$R=0,A$j=A$o.length;A$R<A$j;A$R++){var A$t=new A$O;A$o[A$R].cloneTo(A$t),A$U.push(A$t)}A$C.setKeys(A$T,A$U)},A$F(0,A$R,"mode",function(){return this._mode},function(A$C){this._mode=A$C}),A$F(0,A$R,"colorKeys",function(){return this._colorKeys},function(A$C){this._colorKeys=A$C;for(var A$R=this.index=0;A$R<A$C.length;A$R++){var A$j=A$C[A$R],A$w=A$j.color;this._colorKeyData[this.index++]=A$w._r,this._colorKeyData[this.index++]=A$w._g,this._colorKeyData[this.index++]=A$w._b,this._colorKeyData[this.index++]=A$j.time}}),A$F(0,A$R,"alphaKeys",function(){return this._alphaKeys},function(A$C){this._alphaKeys=A$C;for(var A$R=this.index=0;A$R<A$C.length;A$R++){var A$j=A$C[A$R];this._alphaKeyData[this.index++]=A$j.alpha,this._alphaKeyData[this.index++]=A$j.time}})}(),function(){function A$C(A$C,A$R){this._alpha=NaN,this._time=NaN,void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),this._alpha=A$C,this._time=A$R}A$K(A$C,"laya.d3.core.trail.module.GradientAlphaKey");var A$R=A$C.prototype;return A$R.cloneTo=function(A$C){A$C.alpha=this.alpha,A$C.time=this.time},A$F(0,A$R,"alpha",function(){return this._alpha},function(A$C){this._alpha=A$C}),A$F(0,A$R,"time",function(){return this._time},function(A$C){this._time=A$C}),A$C}()),A$q=function(){function A$C(A$C,A$R){this._color=null,this._time=NaN,void 0===A$R&&(A$R=0),this._color=A$C||new A$d,this._time=A$R}A$K(A$C,"laya.d3.core.trail.module.GradientColorKey");var A$R=A$C.prototype;return A$R.cloneTo=function(A$C){this.color.cloneTo(A$C.color),A$C.time=this.time},A$F(0,A$R,"color",function(){return this._color},function(A$C){this._color=A$C}),A$F(0,A$R,"time",function(){return this._time},function(A$C){this._time=A$C}),A$C}(),A$v=(function(){function A$C(){}A$K(A$C,"laya.d3.core.trail.module.GradientMode"),A$C.Blend=0,A$C.Fixed=1}(),function(){function A$C(){}A$K(A$C,"laya.d3.core.trail.module.TextureMode"),A$C.Stretch=0,A$C.Tile=1}(),function(){function A$C(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}A$K(A$C,"laya.d3.core.trail.module.TrailKeyFrame"),A$C.prototype.cloneTo=function(A$C){A$C.time=this.time,A$C.inTangent=this.inTangent,A$C.outTangent=this.outTangent,A$C.value=this.value}}(),function(){function A$R(A$C){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new A$oR,this._curPosition=new A$oR,this._delVector3=new A$oR,this._lastFixedVertexPosition=new A$oR,this._pointAtoBVector3=new A$oR,this._pointA=new A$oR,this._pointB=new A$oR,this._owner=A$C,this._id=A$R.renderElementCount++,0==this._id?A$C._owner.transform.position.cloneTo(this._lastPosition):A$C._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new A$VR(A$v.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new A$VR(A$v.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}A$K(A$R,"laya.d3.core.trail.TrailRenderElement");var A$C=A$R.prototype;A$f.imps(A$C,{"laya.d3.core.render.IRenderable":!0}),A$C._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},A$C._addTrailByFirstPosition=function(A$C,A$R){A$oR.subtract(A$R,A$C,this._delVector3),A$oR.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),A$oR.normalize(this._pointAtoBVector3,this._pointAtoBVector3),A$oR.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(A$C),A$C.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},A$C._addTrailByNextPosition=function(A$C){A$oR.subtract(A$C,this._lastFixedVertexPosition,this._delVector3),A$oR.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),A$oR.normalize(this._pointAtoBVector3,this._pointAtoBVector3),A$oR.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=A$oR.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=A$qC.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(A$C),A$C.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(A$C),this._virtualVerticesCount=2)},A$C._updateVerticesByPosition=function(A$C){this._pointe=A$C.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},A$C._updateVertexBuffer2=function(){var A$C,A$R=0,A$j=0,A$w=0;for(A$w=0,A$C=(this._verticesCount+this._virtualVerticesCount)/2;A$w<A$C;A$w++)A$j=0==this._owner.textureMode?(this._VerticesToTailLength[A$w]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[A$w],this._vertices2[A$R++]=1-A$j,this._vertices2[A$R++]=1-A$j;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},A$C._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},A$C._updateDisappear=function(){var A$C,A$R=0;for(A$R=this._curDisappearIndex,A$C=(this._verticesCount+this._virtualVerticesCount)/2;A$R<A$C;A$R++)this._owner._curtime-this._everyGroupVertexBirthTime[A$R]>=this._owner.time+A$qC.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},A$C._beforeRender=function(A$C){return this._camera=A$C.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),A$oR.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},A$C._render=function(A$C){this._isDead||(A$E.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),A$x.drawCall++,A$x.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},A$C._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),0===A$C?this._vertexBuffer1:1===A$C?this._vertexBuffer2:null},A$C._getVertexBuffers=function(){return this._vertexBuffers},A$C._getIndexBuffer=function(){return null},A$C.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},A$C._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},A$F(0,A$C,"_vertexBufferCount",function(){return this._vertexBuffers.length}),A$F(0,A$C,"triangleCount",function(){return 0}),A$R.renderElementCount=0}(),function(){function A$C(){}A$K(A$C,"laya.d3.core.trail.VertexTrail");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration1}),A$F(1,A$C,"vertexDeclaration1",function(){return A$C._vertexDeclaration1}),A$F(1,A$C,"vertexDeclaration2",function(){return A$C._vertexDeclaration2}),A$H(A$C,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new A$GC(32,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",41),new A$oC(24,"single",33),new A$oC(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new A$GC(4,[new A$oC(0,"single",38)])}]),A$C}()),A$CC=function(){function A$b(A$C){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=A$C}A$K(A$b,"laya.d3.graphics.DynamicBatch");var A$C=A$b.prototype;return A$f.imps(A$C,{"laya.d3.core.render.IRenderable":!0}),A$C._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),0===A$C?this._vertexBuffer:null},A$C._getIndexBuffer=function(){return this._indexBuffer},A$C._getCombineRenderElementFromPool=function(A$C,A$R,A$j){var A$w=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return A$w||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=A$w=new A$s,A$w._sprite3D=new A$cR),A$w._sprite3D._render._renderUpdate(A$j),A$w},A$C._getRenderElement=function(A$C,A$R,A$j){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*A$b.maxVertexCount),this._indexDatas=new Uint16Array(A$b.maxIndexCount),this._vertexBuffer=A$VR.create(this._vertexDeclaration,A$b.maxVertexCount,35048),this._indexBuffer=A$kR.create("ushort",A$b.maxIndexCount,35048));for(var A$w=this._merageElements.length=0,A$T=0,A$G=0,A$o=this._combineRenderElements.length;A$G<A$o;A$G++){var A$U=this._combineRenderElements[A$G],A$t=A$U.getDynamicBatchBakedVertexs(0),A$I=A$U.getBakedIndices(),A$e=A$U._sprite3D.transform._isFrontFaceInvert,A$H=A$w/(this._vertexDeclaration.vertexStride/4),A$M=A$T,A$K=A$M+A$I.length;A$U._tempBatchIndexStart=A$M,A$U._tempBatchIndexEnd=A$K,this._indexDatas.set(A$I,A$T);var A$F=0;if(A$e)for(A$F=A$M;A$F<A$K;A$F+=3){this._indexDatas[A$F]=A$H+this._indexDatas[A$F];var A$L=this._indexDatas[A$F+1],A$D=this._indexDatas[A$F+2];this._indexDatas[A$F+1]=A$H+A$D,this._indexDatas[A$F+2]=A$H+A$L}else for(A$F=A$M;A$F<A$K;A$F+=3)this._indexDatas[A$F]=A$H+this._indexDatas[A$F],this._indexDatas[A$F+1]=A$H+this._indexDatas[A$F+1],this._indexDatas[A$F+2]=A$H+this._indexDatas[A$F+2];A$T+=A$I.length,this._vertexDatas.set(A$t,A$w),A$w+=A$t.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),A$G=this._combineRenderElementPoolIndex=0,A$o=this._materials.length;A$G<A$o;A$G++){var A$Q=this._getCombineRenderElementFromPool(A$C,A$R,A$j);A$Q._type=2,A$Q._staticBatch=null;var A$Z=(A$Q.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[A$G]]._tempBatchIndexStart,A$S=A$G+1===this._materialToRenderElementsOffsets.length?A$T:this._combineRenderElements[this._materialToRenderElementsOffsets[A$G+1]]._tempBatchIndexStart;A$Q._tempBatchIndexStart=A$Z,A$Q._tempBatchIndexEnd=A$S,A$Q._material=this._materials[A$G],this._merageElements.push(A$Q)}},A$C._addCombineRenderObjTest=function(A$C){var A$R=A$C.renderObj,A$j=this._currentCombineIndexCount+A$R._getIndexBuffer().indexCount,A$w=this._currentCombineVertexCount+A$R._getVertexBuffer().vertexCount;return!(A$b.maxVertexCount<A$w||A$b.maxIndexCount<A$j)},A$C._addCombineRenderObj=function(A$C){var A$R=A$C.renderObj;this._combineRenderElements.push(A$C),this._currentCombineIndexCount=this._currentCombineIndexCount+A$R._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+A$R._getVertexBuffer().vertexCount},A$C._addCombineMaterial=function(A$C){this._materials.push(A$C)},A$C._addMaterialToRenderElementOffset=function(A$C){this._materialToRenderElementsOffsets.push(A$C)},A$C._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},A$C._addToRenderQueue=function(A$C,A$R,A$j,A$w){this._getRenderElement(A$R,A$j,A$w);for(var A$T=0,A$G=this._materials.length;A$T<A$G;A$T++)A$C.getRenderQueue(this._materials[A$T].renderQueue)._addDynamicBatchElement(this._merageElements[A$T])},A$C._beforeRender=function(A$C){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},A$C._render=function(A$C){var A$R=A$C._batchIndexEnd-A$C._batchIndexStart;A$E.mainContext.drawElements(4,A$R,5123,2*A$C._batchIndexStart),A$x.drawCall++,A$x.trianglesFaces+=A$R/3},A$C._getVertexBuffers=function(){return null},A$F(0,A$C,"_vertexBufferCount",function(){return 1}),A$F(0,A$C,"triangleCount",function(){return this._indexBuffer.indexCount/3}),A$F(0,A$C,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),A$b.maxVertexCount=2e4,A$b.maxIndexCount=4e4,A$b.maxCombineTriangleCount=10,A$b}(),A$RC=function(){function A$b(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}A$K(A$b,"laya.d3.graphics.DynamicBatchManager");var A$C=A$b.prototype;return A$C.getDynamicBatch=function(A$C,A$R){var A$j,A$w=A$C.id.toString()+A$R;return this._dynamicBatches[A$w]?A$j=this._dynamicBatches[A$w]:this._dynamicBatches[A$w]=A$j=new A$CC(A$C),A$j},A$C._garbageCollection=function(){for(var A$C in this._dynamicBatches)0===this._dynamicBatches[A$C].combineRenderElementsCount&&delete this._dynamicBatches[A$C]},A$C._addPrepareRenderElement=function(A$C){this._prepareDynamicBatchCombineElements.push(A$C)},A$C._finishCombineDynamicBatch=function(A$C){var A$R,A$j,A$w;this._prepareDynamicBatchCombineElements.sort(A$b._sortPrepareDynamicBatch);for(var A$T,A$G,A$o,A$U,A$t,A$I=-1,A$e=!0,A$H=0,A$M=-1,A$K=0,A$F=this._prepareDynamicBatchCombineElements.length;A$K<A$F;A$K++){var A$L=(A$G=this._prepareDynamicBatchCombineElements[A$K]).renderObj._getVertexBuffer(0).vertexDeclaration,A$D=A$j!==A$L;A$D&&(A$H=0,A$j=A$L);var A$Q=A$H!==A$I;if(A$Q&&(A$I=A$H),(A$D||A$Q)&&(A$o=this.getDynamicBatch(A$L,A$H),A$R=null),A$e)if(A$o._addCombineRenderObjTest(A$G)){if(A$R!==(A$T=A$G._material))A$U&&(A$C.getRenderQueue(A$t._material.renderQueue)._addRenderElement(A$t),A$t=A$U=null,A$M=-1),A$U=A$T,A$M=A$o.combineRenderElementsCount,A$t=A$G,A$R=A$T;else if(A$U){var A$Z=A$t.renderObj,A$S=A$G.renderObj;A$Z._getVertexBuffer().vertexCount+A$S._getVertexBuffer().vertexCount>A$CC.maxVertexCount||A$Z._getIndexBuffer().indexCount+A$S._getIndexBuffer().indexCount>A$CC.maxIndexCount?(A$C.getRenderQueue(A$t._material.renderQueue)._addRenderElement(A$t),A$U=A$T,A$M=A$o.combineRenderElementsCount,A$t=A$G):(A$o._addCombineMaterial(A$U),A$o._addMaterialToRenderElementOffset(A$M),A$o._addCombineRenderObj(A$t),A$t=A$U=null,A$M=-1,A$o._addCombineRenderObj(A$G))}else A$o._addCombineRenderObj(A$G);A$e=!0}else A$U&&(A$C.getRenderQueue(A$t._material.renderQueue)._addRenderElement(A$t),A$t=A$U=null,A$M=-1),A$H++,A$e=!1;else A$w=this._prepareDynamicBatchCombineElements[A$K-1],A$o._addMaterialToRenderElementOffset(A$o.combineRenderElementsCount),A$R=A$w._material,A$o._addCombineMaterial(A$R),A$o._addCombineRenderObj(A$w),A$e=!0,A$R!==(A$T=A$G._material)?(A$U=A$T,A$M=A$o.combineRenderElementsCount,A$t=A$G):A$o._addCombineRenderObj(A$G),A$R=A$T}A$U&&(A$C.getRenderQueue(A$t._material.renderQueue)._addRenderElement(A$t),A$t=A$U=null,A$M=-1),this._prepareDynamicBatchCombineElements.length=0},A$C._clearRenderElements=function(){for(var A$C in this._dynamicBatches)this._dynamicBatches[A$C]._clearRenderElements()},A$C._addToRenderQueue=function(A$C,A$R,A$j,A$w){for(var A$T in this._dynamicBatches){var A$G=this._dynamicBatches[A$T];0<A$G.combineRenderElementsCount&&A$G._addToRenderQueue(A$C,A$R,A$j,A$w)}},A$C.dispose=function(){this._dynamicBatches=null},A$b._sortPrepareDynamicBatch=function(A$C,A$R){return A$C._mainSortID-A$R._mainSortID},A$b}(),A$jC=function(){function A$C(){}return A$K(A$C,"laya.d3.graphics.FrustumCulling"),A$C.renderShadowObjectCulling=function(A$C,A$R,A$j,A$w,A$T){var A$G=0,A$o=0,A$U=0,A$t=0;for(A$G=0,A$U=A$j.length;A$G<A$U;A$G++){var A$I=A$j[A$G];A$I&&A$I._clearRenderElements()}var A$e,A$H,A$M,A$K=A$C._cullingRenders;if(1<A$T){for(A$G=0,A$U=A$C._cullingRendersLength;A$G<A$U;A$G++)if((A$e=A$K[A$G]).castShadow&&A$N.isVisible(A$e._owner.layer.mask)&&A$e.enable)for(var A$F=1,A$L=A$R.length;A$F<A$L;A$F++)if(A$H=A$j[A$F-1],0!==A$R[A$F].containsBoundSphere(A$e.boundingSphere))for(A$o=0,A$t=(A$M=A$e._renderElements).length;A$o<A$t;A$o++)A$H._addRenderElement(A$M[A$o])}else for(A$G=0,A$U=A$C._cullingRendersLength;A$G<A$U;A$G++)if((A$e=A$K[A$G]).castShadow&&A$N.isVisible(A$e._owner.layer.mask)&&A$e.enable&&0!==A$R[0].containsBoundSphere(A$e.boundingSphere))for(A$e._renderUpdate(A$w),A$H=A$j[0],A$o=0,A$t=(A$M=A$e._renderElements).length;A$o<A$t;A$o++)A$H._addRenderElement(A$M[A$o])},A$C.renderShadowObjectCullingOctree=function(A$C,A$R,A$j,A$w,A$T){for(var A$G=0,A$o=A$j.length;A$G<A$o;A$G++){var A$U=A$j[A$G];A$U&&A$U._clearRenderElements()}1<A$T?A$C.treeRoot.cullingShadowObjects(A$R,A$j,!0,0,A$C):A$C.treeRoot.cullingShadowObjectsOnePSSM(A$R[0],A$j,A$w,!0,0,A$C)},A$C.renderObjectCulling=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=0,A$U=0,A$t=0,A$I=0,A$e=A$R._quenes,A$H=A$R._dynamicBatchManager,A$M=A$R._cullingRenders;for(A$o=0,A$U=A$e.length;A$o<A$U;A$o++){var A$K=A$e[A$o];A$K&&A$K._clearRenderElements()}var A$F=A$wC._staticBatchManagers;for(A$o=0,A$U=A$F.length;A$o<A$U;A$o++)A$F[A$o]._clearRenderElements();A$H._clearRenderElements();var A$L=A$j.transform.position;for(A$o=0,A$U=A$R._cullingRendersLength;A$o<A$U;A$o++){var A$D=A$M[A$o];if(A$N.isVisible(A$D._owner.layer.mask)&&A$D.enable&&0!==A$C.containsBoundSphere(A$D.boundingSphere)&&A$D._renderUpdate(A$G)){A$D._distanceForSort=A$oR.distance(A$D.boundingSphere.center,A$L)+A$D.sortingFudge;var A$Q=A$D._renderElements;for(A$t=0,A$I=A$Q.length;A$t<A$I;A$t++){var A$Z=A$Q[A$t],A$S=A$Z._staticBatch;if(A$S&&A$S._material===A$Z._material)A$S._addBatchRenderElement(A$Z);else{var A$b=A$Z.renderObj;A$b.triangleCount<10&&1===A$b._vertexBufferCount&&A$b._getIndexBuffer()&&A$Z._material.renderQueue<2&&A$Z._canDynamicBatch&&!A$D._owner.isStatic?A$H._addPrepareRenderElement(A$Z):A$R.getRenderQueue(A$Z._material.renderQueue)._addRenderElement(A$Z)}}}}for(A$o=0,A$U=A$F.length;A$o<A$U;A$o++)A$F[A$o]._addToRenderQueue(A$R,A$w,A$T,A$G);A$H._finishCombineDynamicBatch(A$R),A$H._addToRenderQueue(A$R,A$w,A$T,A$G)},A$C.renderObjectCullingOctree=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=0,A$U=0,A$t=A$R._quenes,A$I=A$R._dynamicBatchManager;for(A$o=0,A$U=A$t.length;A$o<A$U;A$o++){var A$e=A$t[A$o];A$e&&A$e._clearRenderElements()}var A$H=A$wC._staticBatchManagers;for(A$o=0,A$U=A$H.length;A$o<A$U;A$o++)A$H[A$o]._clearRenderElements();for(A$I._clearRenderElements(),A$R._cullingRenders.length=0,A$R.treeRoot.cullingObjects(A$C,!0,0,A$j.transform.position,A$G),A$o=0,A$U=A$H.length;A$o<A$U;A$o++)A$H[A$o]._addToRenderQueue(A$R,A$w,A$T,A$G);A$I._finishCombineDynamicBatch(A$R),A$I._addToRenderQueue(A$R,A$w,A$T,A$G)},A$C.renderObjectCullingNoBoundFrustum=function(A$C,A$R,A$j,A$w,A$T){var A$G=0,A$o=0,A$U=0,A$t=0,A$I=A$C._quenes,A$e=A$C._dynamicBatchManager,A$H=A$C._cullingRenders;for(A$G=0,A$o=A$I.length;A$G<A$o;A$G++){var A$M=A$I[A$G];A$M&&A$M._clearRenderElements()}var A$K=A$wC._staticBatchManagers;for(A$G=0,A$o=A$K.length;A$G<A$o;A$G++)A$K[A$G]._clearRenderElements();A$e._clearRenderElements();var A$F=A$R.transform.position;for(A$G=0,A$o=A$C._cullingRendersLength;A$G<A$o;A$G++){var A$L=A$H[A$G];if(A$N.isVisible(A$L._owner.layer.mask)&&A$L.enable){A$L._renderUpdate(A$T),A$L._distanceForSort=A$oR.distance(A$L.boundingSphere.center,A$F)+A$L.sortingFudge;var A$D=A$L._renderElements;for(A$U=0,A$t=A$D.length;A$U<A$t;A$U++){var A$Q=A$D[A$U],A$Z=A$Q._staticBatch;if(A$Z&&A$Z._material===A$Q._material)A$Z._addBatchRenderElement(A$Q);else{var A$S=A$Q.renderObj;A$S.triangleCount<10&&1===A$S._vertexBufferCount&&A$S._getIndexBuffer()&&A$Q._material.renderQueue<2&&A$Q._canDynamicBatch&&!A$L._owner.isStatic?A$e._addPrepareRenderElement(A$Q):A$C.getRenderQueue(A$Q._material.renderQueue)._addRenderElement(A$Q)}}}}for(A$G=0,A$o=A$K.length;A$G<A$o;A$G++)A$K[A$G]._addToRenderQueue(A$C,A$j,A$w,A$T);A$e._finishCombineDynamicBatch(A$C),A$e._addToRenderQueue(A$C,A$j,A$w,A$T)},A$C}(),A$wC=function(){function A$G(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}A$K(A$G,"laya.d3.graphics.StaticBatchManager");var A$C=A$G.prototype;return A$C._finishInit=function(){for(var A$C in this._staticBatches)this._staticBatches[A$C]._finishInit();this._initBatchRenderElements.length=0},A$C._initStaticBatchs=function(A$C){throw new Error("StaticBatchManager:must override this function.")},A$C._addInitBatchSprite=function(A$C){for(var A$R=A$C._render._renderElements,A$j=0,A$w=A$R.length;A$j<A$w;A$j++)this._initBatchRenderElements.push(A$R[A$j])},A$C._clearRenderElements=function(){for(var A$C in this._staticBatches)this._staticBatches[A$C]._clearRenderElements()},A$C._garbageCollection=function(A$C){var A$R=A$C._staticBatch,A$j=A$R._initBatchRenderElements,A$w=A$j.indexOf(A$C);A$j.splice(A$w,1),0===A$j.length&&(A$R.dispose(),delete this._staticBatches[A$R._key])},A$C._addToRenderQueue=function(A$C,A$R,A$j,A$w){for(var A$T in this._staticBatches){var A$G=this._staticBatches[A$T];0<A$G._batchRenderElements.length&&A$G._updateToRenderQueue(A$C,A$w)}},A$C.dispose=function(){this._staticBatches=null},A$G._addToStaticBatchQueue=function(A$C){A$C instanceof laya.d3.core.RenderableSprite3D&&A$C._addToInitStaticBatchManager();for(var A$R=0,A$j=A$C.numChildren;A$R<A$j;A$R++)A$G._addToStaticBatchQueue(A$C._childs[A$R])},A$G.combine=function(A$C,A$R){var A$j,A$w=0,A$T=0;if(A$R)for(A$w=0,A$T=A$R.length;A$w<A$T;A$w++){A$R[A$w]._addToInitStaticBatchManager()}else A$C&&A$G._addToStaticBatchQueue(A$C);for(A$w=0,A$T=A$G._staticBatchManagers.length;A$w<A$T;A$w++)(A$j=A$G._staticBatchManagers[A$w])._initStaticBatchs(A$C),A$j._finishInit()},A$G._staticBatchManagers=[],A$G}(),A$TC=function(){function A$C(A$C,A$R,A$j){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=A$C,this._manager=A$R,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=A$j}A$K(A$C,"laya.d3.graphics.StaticBatch");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),A$R._binarySearch=function(A$C){for(var A$R=0,A$j=this._batchRenderElements.length-1,A$w=0;A$R<=A$j;)A$w=Math.floor((A$R+A$j)/2),this._compareBatchRenderElement(this._batchRenderElements[A$w],A$C)?A$j=A$w-1:A$R=A$w+1;return A$R},A$R._compareBatchRenderElement=function(A$C,A$R){throw new Error("StaticBatch:must override this function.")},A$R._getVertexDecLightMap=function(A$C){return A$C===A$kC.vertexDeclaration?A$NC.vertexDeclaration:A$C===A$mC.vertexDeclaration?A$JC.vertexDeclaration:A$C===A$WC.vertexDeclaration?A$bC.vertexDeclaration:A$C===A$gC.vertexDeclaration?null:A$C===A$LC.vertexDeclaration?A$DC.vertexDeclaration:A$C===A$zC.vertexDeclaration?A$nC.vertexDeclaration:A$C===A$EC.vertexDeclaration?A$PC.vertexDeclaration:A$C===A$VC.vertexDeclaration?A$aC.vertexDeclaration:A$C===A$mC.vertexDeclaration?A$JC.vertexDeclaration:A$C===A$$C.vertexDeclaration?A$fC.vertexDeclaration:A$C===A$gC.vertexDeclaration?null:A$C===A$LC.vertexDeclaration?A$DC.vertexDeclaration:A$C===A$lC.vertexDeclaration?A$yC.vertexDeclaration:A$C===A$EC.vertexDeclaration?A$PC.vertexDeclaration:A$C},A$R._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},A$R._addBatchRenderElement=function(A$C){this._batchRenderElements.splice(this._binarySearch(A$C),0,A$C)},A$R._updateToRenderQueue=function(A$C,A$R){this._combineRenderElementPoolIndex=0,this._getRenderElement(A$C.getRenderQueue(this._material.renderQueue)._renderElements,A$C,A$R)},A$R._getRenderElement=function(A$C,A$R,A$j){throw new Error("StaticBatch:must override this function.")},A$R._finishInit=function(){throw new Error("StaticBatch:must override this function.")},A$R._clearRenderElements=function(){this._batchRenderElements.length=0},A$R.dispose=function(){},A$R._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),null},A$R._getIndexBuffer=function(){return null},A$R._beforeRender=function(A$C){return!0},A$R._render=function(A$C){},A$R._getVertexBuffers=function(){return null},A$F(0,A$R,"_vertexBufferCount",function(){return 1}),A$F(0,A$R,"triangleCount",function(){return 0}),A$C.combine=function(A$C){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),A$wC.combine(A$C)},A$C.maxBatchVertexCount=65535,A$C}(),A$GC=function(){function A$o(A$C,A$R){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++A$o._uniqueIDCounter,this._id>A$o.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",A$o.maxVertexDeclaration);this._shaderValues=new A$MR,this._vertexElementsDic={},this._vertexStride=A$C,this._vertexElements=A$R;for(var A$j=0;A$j<A$R.length;A$j++){var A$w=A$R[A$j],A$T=A$w.elementUsage;this._vertexElementsDic[A$T]=A$w;var A$G=[A$o._getTypeSize(A$w.elementFormat)/4,5126,!1,this._vertexStride,A$w.offset];switch(this._shaderValues.setValue(A$T,A$G),A$T){case 1:this._addShaderDefine(A$xR.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(A$xR.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(A$xR.SHADERDEFINE_UV1)}}}A$K(A$o,"laya.d3.graphics.VertexDeclaration");var A$C=A$o.prototype;return A$C._addShaderDefine=function(A$C){this._shaderDefineValue|=A$C},A$C._removeShaderDefine=function(A$C){this._shaderDefineValue&=~A$C},A$C.getVertexElements=function(){return this._vertexElements.slice()},A$C.getVertexElementByUsage=function(A$C){return this._vertexElementsDic[A$C]},A$C.unBinding=function(){},A$F(0,A$C,"shaderDefineValue",function(){return this._shaderDefineValue}),A$F(0,A$C,"id",function(){return this._id}),A$F(0,A$C,"vertexStride",function(){return this._vertexStride}),A$F(0,A$C,"shaderValues",function(){return this._shaderValues}),A$o._getTypeSize=function(A$C){switch(A$C){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},A$o.getVertexStride=function(A$C){for(var A$R=0,A$j=0;A$j<A$C.Length;A$j++){var A$w=A$C[A$j],A$T=A$w.offset+A$o._getTypeSize(A$w.elementFormat);A$R<A$T&&(A$R=A$T)}return A$R},A$o._maxVertexDeclarationBit=1e3,A$o._uniqueIDCounter=1,A$H(A$o,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),A$o}(),A$oC=function(){function A$C(A$C,A$R,A$j){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=A$C,this.elementFormat=A$R,this.elementUsage=A$j}return A$K(A$C,"laya.d3.graphics.VertexElement"),A$C}(),A$UC=(function(){function A$C(){}A$K(A$C,"laya.d3.graphics.VertexElementFormat"),A$C.Single="single",A$C.Vector2="vector2",A$C.Vector3="vector3",A$C.Vector4="vector4",A$C.Color="color",A$C.Byte4="byte4",A$C.Short2="short2",A$C.Short4="short4",A$C.NormalizedShort2="normalizedshort2",A$C.NormalizedShort4="normalizedshort4",A$C.HalfVector2="halfvector2",A$C.HalfVector4="halfvector4"}(),function(){function A$C(){}A$K(A$C,"laya.d3.graphics.VertexElementUsage"),A$C.POSITION0=0,A$C.COLOR0=1,A$C.TEXTURECOORDINATE0=2,A$C.NORMAL0=3,A$C.BINORMAL0=4,A$C.TANGENT0=5,A$C.BLENDINDICES0=6,A$C.BLENDWEIGHT0=7,A$C.DEPTH0=8,A$C.FOG0=9,A$C.POINTSIZE0=10,A$C.SAMPLE0=11,A$C.TESSELLATEFACTOR0=12,A$C.COLOR1=13,A$C.NEXTTEXTURECOORDINATE0=14,A$C.TEXTURECOORDINATE1=15,A$C.NEXTTEXTURECOORDINATE1=16,A$C.CORNERTEXTURECOORDINATE0=17,A$C.VELOCITY0=18,A$C.STARTCOLOR0=19,A$C.STARTSIZE=20,A$C.AGEADDSCALE0=21,A$C.STARTROTATION=22,A$C.ENDCOLOR0=23,A$C.STARTLIFETIME=24,A$C.TIME0=33,A$C.SHAPEPOSITIONSTARTLIFETIME=30,A$C.DIRECTIONTIME=32,A$C.SIZEROTATION0=27,A$C.RADIUS0=28,A$C.RADIAN0=29,A$C.STARTSPEED=31,A$C.RANDOM0=34,A$C.RANDOM1=35,A$C.SIMULATIONWORLDPOSTION=36,A$C.SIMULATIONWORLDROTATION=37,A$C.TEXTURECOORDINATE0X=38,A$C.TEXTURECOORDINATE0X1=39,A$C.TEXTURECOORDINATE0Y=40,A$C.OFFSETVECTOR=41}(),function(){function A$C(A$C,A$R,A$j){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=A$C,this._textureCoordinate0=A$R,this._time=A$j}A$K(A$C,"laya.d3.graphics.VertexGlitter");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate0}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"time",function(){return this._time}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(24,[new A$oC(0,"vector3",0),new A$oC(12,"vector2",2),new A$oC(20,"single",33)])}])}(),function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=A$C,this._position=A$R,this._velocity=A$j,this._startColor=A$w,this._endColor=A$T,this._sizeRotation=A$G,this._radius=A$o,this._radian=A$U,this._ageAddScale=A$t,this._time=A$I}A$K(A$C,"laya.d3.graphics.VertexParticle");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"endColor",function(){return this._endColor}),A$F(0,A$R,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),A$F(0,A$R,"sizeRotation",function(){return this._sizeRotation}),A$F(0,A$R,"velocity",function(){return this._velocity}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"startColor",function(){return this._startColor}),A$F(0,A$R,"radius",function(){return this._radius}),A$F(0,A$R,"radian",function(){return this._radian}),A$F(0,A$R,"ageAddScale",function(){return this._ageAddScale}),A$F(0,A$R,"time",function(){return this._time}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(116,[new A$oC(0,"vector4",17),new A$oC(16,"vector3",0),new A$oC(28,"vector3",18),new A$oC(40,"vector4",19),new A$oC(56,"vector4",23),new A$oC(72,"vector3",27),new A$oC(84,"vector2",28),new A$oC(92,"vector4",29),new A$oC(108,"single",24),new A$oC(112,"single",33)])}])}(),function(){function A$C(A$C){this._position=null,this._position=A$C}A$K(A$C,"laya.d3.graphics.VertexPosition");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(12,[new A$oC(0,"vector3",0)])}]),A$C}()),A$tC=function(){function A$C(A$C,A$R){this._position=null,this._normal=null,this._position=A$C,this._normal=A$R}A$K(A$C,"laya.d3.graphics.VertexPositionNormal");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(24,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3)])}]),A$C}(),A$IC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._color=null,this._position=A$C,this._normal=A$R,this._color=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColor");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(40,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1)])}]),A$C}(),A$eC=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._blendIndex=A$w,this._blendWeight=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorSkin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(72,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6)])}]),A$C}(),A$HC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._tangent=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(88,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6),new A$oC(72,"vector4",5)])}]),A$C}(),A$MC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._tangent=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(84,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6),new A$oC(72,"vector3",5)])}]),A$C}(),A$KC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._tangent=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(56,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector4",5)])}]),A$C}(),A$FC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._tangent=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(52,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector3",5)])}]),A$C}(),A$LC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(48,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2)])}]),A$C}(),A$DC=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(56,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15)])}]),A$C}(),A$QC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._blendIndex=A$G,this._blendWeight=A$o}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(88,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15),new A$oC(56,"vector4",7),new A$oC(72,"vector4",6)])}]),A$C}(),A$ZC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._tangent=A$G,this._blendIndex=A$o,this._blendWeight=A$U}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(104,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15),new A$oC(56,"vector4",7),new A$oC(72,"vector4",6),new A$oC(88,"vector4",5)])}]),A$C}(),A$SC=function(){function A$C(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$R.VertexPositionNormalColorTexture0SkinTangent=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._tangent=A$G,this._blendIndex=A$o,this._blendWeight=A$U},A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(100,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15),new A$oC(56,"vector4",7),new A$oC(72,"vector4",6),new A$oC(88,"vector3",5)])}]),A$C}(),A$bC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._tangent=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(72,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15),new A$oC(56,"vector4",5)])}]),A$C}(),A$fC=function(){function A$C(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$R.VertexPositionNormalColorTexture0Tangent=function(A$C,A$R,A$j,A$w,A$T,A$G){this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._tangent=A$G},A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(68,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector2",15),new A$oC(56,"vector3",5)])}]),A$C}(),A$pC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(80,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector4",7),new A$oC(64,"vector4",6)])}]),A$C}(),A$hC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w,this._tangent=A$T,this._blendIndex=A$G,this._blendWeight=A$o}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(96,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector4",7),new A$oC(64,"vector4",6),new A$oC(80,"vector4",5)])}]),A$C}(),A$xC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w,this._tangent=A$T,this._blendIndex=A$G,this._blendWeight=A$o}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(92,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector4",7),new A$oC(64,"vector4",6),new A$oC(80,"vector3",5)])}]),A$C}(),A$WC=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w,this._tangent=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(64,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector4",5)])}]),A$C}(),A$$C=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._color=A$j,this._textureCoordinate=A$w,this._tangent=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"color",function(){return this._color}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(60,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",1),new A$oC(40,"vector2",2),new A$oC(48,"vector3",5)])}]),A$C}(),A$AC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._tangent=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNormalSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(40,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector4",5)])}]),A$C}(),A$rC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._tangent=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(36,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector3",5)])}]),A$C}(),A$EC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(32,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2)])}]),A$C}(),A$PC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(40,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15)])}]),A$C}(),A$JC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(72,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6)])}]),A$C}(),A$NC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w,this._tangent=A$T,this._blendIndex=A$G,this._blendWeight=A$o}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(88,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6),new A$oC(72,"vector4",5)])}]),A$C}(),A$aC=function(){function A$C(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$R.VertexPositionNormalTexture0SkinTangent=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w,this._tangent=A$T,this._blendIndex=A$G,this._blendWeight=A$o},A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(84,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15),new A$oC(40,"vector4",7),new A$oC(56,"vector4",6),new A$oC(72,"vector3",5)])}]),A$C}(),A$nC=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w,this._tangent=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(56,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15),new A$oC(40,"vector4",5)])}]),A$C}(),A$yC=function(){function A$C(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$R.VertexPositionNormalTexture0Tangent=function(A$C,A$R,A$j,A$w,A$T){this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$j,this._textureCoordinate1=A$w,this._tangent=A$T},A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(52,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15),new A$oC(40,"vector3",5)])}]),A$C}(),A$mC=function(){function A$C(A$C,A$R,A$j,A$w,A$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j,this._blendIndex=A$w,this._blendWeight=A$T}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTextureSkin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(64,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector4",7),new A$oC(48,"vector4",6)])}]),A$C}(),A$kC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j,this._tangent=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(80,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector4",7),new A$oC(48,"vector4",6),new A$oC(64,"vector4",5)])}]),A$C}(),A$VC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j,this._tangent=A$w,this._blendIndex=A$T,this._blendWeight=A$G}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(76,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector4",7),new A$oC(48,"vector4",6),new A$oC(64,"vector3",5)])}]),A$C}(),A$zC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j,this._tangent=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(48,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector4",5)])}]),A$C}(),A$lC=function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j,this._tangent=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionNormalTextureTangent");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(44,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector3",5)])}]),A$C}(),A$gC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNTBTexture");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(56,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector3",5),new A$oC(36,"vector3",4),new A$oC(48,"vector2",2)])}]),A$C}(),A$BC=function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=A$C,this._normal=A$R,this._textureCoordinate0=A$w,this._textureCoordinate1=A$T,this._tangent=A$G,A$j=A$j,this._blendIndex=A$o,this._blendWeight=A$U}A$K(A$C,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"tangent",function(){return this._tangent}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(0,A$R,"textureCoordinate1",function(){return this._textureCoordinate1}),A$F(0,A$R,"blendIndex",function(){return this._blendIndex}),A$F(0,A$R,"blendWeight",function(){return this._blendWeight}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(96,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector3",5),new A$oC(36,"vector3",4),new A$oC(48,"vector2",2),new A$oC(56,"vector2",15),new A$oC(64,"vector4",7),new A$oC(80,"vector4",6)])}]),A$C}(),A$iC=function(){function A$C(A$C,A$R,A$j){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=A$C,this._normal=A$R,this._textureCoordinate=A$j}A$K(A$C,"laya.d3.graphics.VertexPositionNTBTextureSkin");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"textureCoordinate",function(){return this._textureCoordinate}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(88,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector3",5),new A$oC(36,"vector3",4),new A$oC(48,"vector2",2),new A$oC(56,"vector4",7),new A$oC(72,"vector4",6)])}]),A$C}(),A$_C=(function(){function A$C(A$C,A$R,A$j,A$w){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=A$C,this._normal=A$R,this._textureCoord0=A$j,this._textureCoord1=A$w}A$K(A$C,"laya.d3.graphics.VertexPositionTerrain");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"normal",function(){return this._normal}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoord0",function(){return this._textureCoord0}),A$F(0,A$R,"textureCoord1",function(){return this._textureCoord1}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(40,[new A$oC(0,"vector3",0),new A$oC(12,"vector3",3),new A$oC(24,"vector2",2),new A$oC(32,"vector2",15)])}])}(),function(){function A$C(A$C,A$R){this._position=null,this._textureCoordinate0=null,this._position=A$C,this._textureCoordinate0=A$R}A$K(A$C,"laya.d3.graphics.VertexPositionTexture0");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"position",function(){return this._position}),A$F(0,A$R,"textureCoordinate0",function(){return this._textureCoordinate0}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(20,[new A$oC(0,"vector3",0),new A$oC(12,"vector2",2)])}]),A$C}()),A$uC=(function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M,A$K){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=A$C,this._positionStartLifeTime=A$R,this._velocity=A$j,this._startColor=A$w,this._startSize=A$T,this._startRotation0=A$G,this._startRotation1=A$o,this._startRotation2=A$U,this._startLifeTime=A$t,this._time=A$I,this._startSpeed=A$e,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=A$K}A$K(A$C,"laya.d3.graphics.VertexShurikenParticleBillboard");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),A$F(0,A$R,"random1",function(){return this._randoms1}),A$F(0,A$R,"startRotation2",function(){return this._startRotation2}),A$F(0,A$R,"positionStartLifeTime",function(){return this._positionStartLifeTime}),A$F(0,A$R,"velocity",function(){return this._velocity}),A$F(0,A$R,"random0",function(){return this._randoms0}),A$F(0,A$R,"startSize",function(){return this._startSize}),A$F(0,A$R,"startColor",function(){return this._startColor}),A$F(0,A$R,"startRotation0",function(){return this._startRotation0}),A$F(0,A$R,"startRotation1",function(){return this._startRotation1}),A$F(0,A$R,"startLifeTime",function(){return this._startLifeTime}),A$F(0,A$R,"time",function(){return this._time}),A$F(0,A$R,"startSpeed",function(){return this._startSpeed}),A$F(0,A$R,"simulationWorldPostion",function(){return this._simulationWorldPostion}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(152,[new A$oC(0,"vector4",17),new A$oC(16,"vector4",30),new A$oC(32,"vector4",32),new A$oC(48,"vector4",19),new A$oC(64,"vector3",20),new A$oC(76,"vector3",22),new A$oC(88,"single",31),new A$oC(92,"vector4",34),new A$oC(108,"vector4",35),new A$oC(124,"vector3",36),new A$oC(136,"vector4",37)])}])}(),function(){function A$C(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M,A$K){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=A$C,this._positionStartLifeTime=A$R,this._velocity=A$j,this._startColor=A$w,this._startSize=A$T,this._startRotation0=A$G,this._startRotation1=A$o,this._startRotation2=A$U,this._startLifeTime=A$t,this._time=A$I,this._startSpeed=A$e,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=A$K}A$K(A$C,"laya.d3.graphics.VertexShurikenParticleMesh");var A$R=A$C.prototype;A$f.imps(A$R,{"laya.d3.graphics.IVertex":!0}),A$F(0,A$R,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),A$F(0,A$R,"velocity",function(){return this._velocity}),A$F(0,A$R,"position",function(){return this._positionStartLifeTime}),A$F(0,A$R,"random0",function(){return this._randoms0}),A$F(0,A$R,"startSize",function(){return this._startSize}),A$F(0,A$R,"startColor",function(){return this._startColor}),A$F(0,A$R,"startRotation0",function(){return this._startRotation0}),A$F(0,A$R,"startRotation1",function(){return this._startRotation1}),A$F(0,A$R,"random1",function(){return this._randoms1}),A$F(0,A$R,"startRotation2",function(){return this._startRotation2}),A$F(0,A$R,"startLifeTime",function(){return this._startLifeTime}),A$F(0,A$R,"time",function(){return this._time}),A$F(0,A$R,"startSpeed",function(){return this._startSpeed}),A$F(0,A$R,"simulationWorldPostion",function(){return this._simulationWorldPostion}),A$F(0,A$R,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$F(1,A$C,"vertexDeclaration",function(){return A$C._vertexDeclaration}),A$H(A$C,["_vertexDeclaration",function(){return this._vertexDeclaration=new A$GC(172,[new A$oC(0,"vector3",0),new A$oC(12,"vector4",1),new A$oC(28,"vector2",2),new A$oC(36,"vector4",30),new A$oC(52,"vector4",32),new A$oC(68,"vector4",19),new A$oC(84,"vector3",20),new A$oC(96,"vector3",22),new A$oC(108,"single",31),new A$oC(112,"vector4",34),new A$oC(128,"vector4",35),new A$oC(144,"vector3",36),new A$oC(156,"vector4",37)])}])}(),function(){function A$S(A$C,A$R,A$j,A$w,A$T,A$G){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=A$j,this._materials=A$w,this._subMeshes=A$T,this._materialMap=A$G,this._version=A$R,this._onLoaded(A$C)}A$K(A$S,"laya.d3.loaders.LoadModelV01");var A$C=A$S.prototype;return A$C._onLoaded=function(A$C){this._readData=A$C,this.READ_BLOCK();for(var A$R=0;A$R<this._BLOCK.count;A$R++){var A$j=this._readData.getUint16(),A$w=this._strings[A$j],A$T=this["READ_"+A$w];if(null==A$T)throw new Error("model file err,no this function:"+A$j+" "+A$w);if(!A$T.call(this))break}return this._mesh},A$C.onError=function(){},A$C._readString=function(){return this._strings[this._readData.getUint16()]},A$C.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},A$C.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},A$C.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var A$C=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var A$R=0;A$R<this._STRINGS.size;A$R++)this._strings[A$R]=this._readData.readUTFString();return this._readData.pos=A$C,!0},A$C.READ_MATERIAL=function(){var A$C=this._readData.getUint16(),A$R=(this._readString(),this._readString());return this._materials[A$C]="null"!==A$R?A$Q.getRes(this._materialMap[A$R]):new A$rR,!0},A$C.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var A$C,A$R=this._readData.__getBuffer(),A$j=0,A$w=this._readData.getUint32(),A$T=this._readData.getUint32(),A$G=(new Float32Array(A$R.slice(A$w+this._DATA.offset,A$w+this._DATA.offset+A$T)),this._readData.getUint32()),A$o=this._readData.getUint32(),A$U=new Float32Array(A$R.slice(A$G+this._DATA.offset,A$G+this._DATA.offset+A$o));for(this.mesh._inverseBindPoses=[],A$j=0,A$C=A$U.length;A$j<A$C;A$j+=16){var A$t=new A$CR(A$U[A$j+0],A$U[A$j+1],A$U[A$j+2],A$U[A$j+3],A$U[A$j+4],A$U[A$j+5],A$U[A$j+6],A$U[A$j+7],A$U[A$j+8],A$U[A$j+9],A$U[A$j+10],A$U[A$j+11],A$U[A$j+12],A$U[A$j+13],A$U[A$j+14],A$U[A$j+15]);this.mesh._inverseBindPoses.push(A$t)}break;default:throw new Error("LoadModel:unknown version.")}return!0},A$C.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var A$C=this._readString();this._shaderAttributes=A$C.match(A$S._attrReg);var A$R=this._readData.getUint32(),A$j=this._readData.getUint32(),A$w=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),A$T=this._readData.getUint32(),A$G=this._readData.getUint32(),A$o=this._readData.getUint32(),A$U=this._readData.__getBuffer(),A$t=new A$IR(this._mesh),A$I=this._getVertexDeclaration(),A$e=A$VR.create(A$I,A$T/A$I.vertexStride,35044,!0),A$H=A$w+this._DATA.offset,A$M=A$U.slice(A$H,A$H+A$T);A$e.setData(new Float32Array(A$M));for(var A$K=(A$t._vertexBuffer=A$e).vertexDeclaration.getVertexElements(),A$F=0;A$F<A$K.length;A$F++)A$t._bufferUsage[A$K[A$F].elementUsage]=A$e;var A$L=A$kR.create("ushort",A$j/2,35044,!0),A$D=A$R+this._DATA.offset,A$Q=A$U.slice(A$D,A$D+A$j);A$L.setData(new Uint16Array(A$Q)),A$t._indexBuffer=A$L;var A$Z=A$U.slice(A$G+this._DATA.offset,A$G+this._DATA.offset+A$o);return A$t._boneIndicesList[0]=new Uint8Array(A$Z),this._subMeshes.push(A$t),!0},A$C.READ_DATAAREA=function(){return!1},A$C._getVertexDeclaration=function(){for(var A$C,A$R=!1,A$j=!1,A$w=!1,A$T=!1,A$G=!1,A$o=!1,A$U=!1,A$t=!1,A$I=!1,A$e=0;A$e<this._shaderAttributes.length;A$e+=8)switch(this._shaderAttributes[A$e]){case"POSITION":A$R=!0;break;case"NORMAL":A$j=!0;break;case"COLOR":A$w=!0;break;case"UV":A$T=!0;break;case"UV1":A$G=!0;break;case"BLENDWEIGHT":A$U=!0;break;case"BLENDINDICES":A$t=!0;break;case"TANGENT":A$o=!0;break;case"BINORMAL":A$I=!0}return A$R&&A$j&&A$w&&A$T&&A$G&&A$U&&A$t&&A$o?A$C=A$SC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$G&&A$U&&A$t?A$C=A$QC.vertexDeclaration:A$R&&A$j&&A$T&&A$G&&A$U&&A$t&&A$o?A$C=A$aC.vertexDeclaration:A$R&&A$j&&A$T&&A$G&&A$U&&A$t?A$C=A$JC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$U&&A$t&&A$o?A$C=A$xC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$U&&A$t?A$C=A$pC.vertexDeclaration:A$R&&A$j&&A$o&&A$I&&A$T&&A$U&&A$t?A$C=A$iC.vertexDeclaration:A$R&&A$j&&A$T&&A$U&&A$t&&A$o?A$C=A$VC.vertexDeclaration:A$R&&A$j&&A$T&&A$U&&A$t?A$C=A$mC.vertexDeclaration:A$R&&A$j&&A$w&&A$U&&A$t&&A$o?A$C=A$MC.vertexDeclaration:A$R&&A$j&&A$w&&A$U&&A$t?A$C=A$eC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$G&&A$o?A$C=A$fC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$G?A$C=A$DC.vertexDeclaration:A$R&&A$j&&A$T&&A$G&&A$o?A$C=A$yC.vertexDeclaration:A$R&&A$j&&A$T&&A$G?A$C=A$PC.vertexDeclaration:A$R&&A$j&&A$w&&A$T&&A$o?A$C=A$$C.vertexDeclaration:A$R&&A$j&&A$T&&A$o&&A$I?A$C=A$gC.vertexDeclaration:A$R&&A$j&&A$w&&A$T?A$C=A$LC.vertexDeclaration:A$R&&A$j&&A$T&&A$o?A$C=A$lC.vertexDeclaration:A$R&&A$j&&A$T?A$C=A$EC.vertexDeclaration:A$R&&A$j&&A$w&&A$o?A$C=A$FC.vertexDeclaration:A$R&&A$j&&A$w&&(A$C=A$IC.vertexDeclaration),A$C},A$F(0,A$C,"mesh",function(){return this._mesh}),A$S._attrReg=new RegExp("(\\w+)|([:,;])","g"),A$S}()),A$sC=function(){function A$h(){}return A$K(A$h,"laya.d3.loaders.LoadModelV02"),A$h.parse=function(A$C,A$R,A$j,A$w,A$T,A$G){A$h._mesh=A$j,A$h._materials=A$w,A$h._subMeshes=A$T,A$h._materialMap=A$G,A$h._version=A$R,A$h._readData=A$C,A$h.READ_DATA(),A$h.READ_BLOCK(),A$h.READ_STRINGS();for(var A$o=0,A$U=A$h._BLOCK.count;A$o<A$U;A$o++){A$h._readData.pos=A$h._BLOCK.blockStarts[A$o];var A$t=A$h._readData.getUint16(),A$I=A$h._strings[A$t],A$e=A$h["READ_"+A$I];if(null==A$e)throw new Error("model file err,no this function:"+A$t+" "+A$I);A$e.call()}A$h._strings.length=0,A$h._readData=null,A$h._version=null,A$h._mesh=null,A$h._materials=null,A$h._subMeshes=null,A$h._materialMap=null},A$h._readString=function(){return A$h._strings[A$h._readData.getUint16()]},A$h.READ_DATA=function(){A$h._DATA.offset=A$h._readData.getUint32(),A$h._DATA.size=A$h._readData.getUint32()},A$h.READ_BLOCK=function(){for(var A$C=A$h._BLOCK.count=A$h._readData.getUint16(),A$R=A$h._BLOCK.blockStarts=[],A$j=A$h._BLOCK.blockLengths=[],A$w=0;A$w<A$C;A$w++)A$R.push(A$h._readData.getUint32()),A$j.push(A$h._readData.getUint32())},A$h.READ_STRINGS=function(){var A$C=A$h._readData.getUint32(),A$R=A$h._readData.getUint16(),A$j=A$h._readData.pos;A$h._readData.pos=A$C+A$h._DATA.offset;for(var A$w=0;A$w<A$R;A$w++)A$h._strings[A$w]=A$h._readData.readUTFString();A$h._readData.pos=A$j},A$h.READ_MATERIAL=function(){A$h._readString(),A$h._readString();var A$C=A$h._readString();return""!==A$C&&A$h._materials.push(A$Q.getRes(A$h._materialMap[A$C])),!0},A$h.READ_MESH=function(){A$h._readString();var A$C,A$R=A$h._readData.__getBuffer(),A$j=0,A$w=A$h._readData.getInt16(),A$T=A$h._DATA.offset;for(A$j=0;A$j<A$w;A$j++){var A$G=A$T+A$h._readData.getUint32(),A$o=A$h._readData.getUint32(),A$U=new Float32Array(A$R.slice(A$G,A$G+A$o)),A$t=A$h._readString().match(A$h._attrReg),A$I=A$h._getVertexDeclaration(A$t),A$e=A$VR.create(A$I,4*A$U.length/A$I.vertexStride,35044,!0);A$e.setData(A$U),A$h._mesh._vertexBuffers.push(A$e)}var A$H=A$T+A$h._readData.getUint32(),A$M=A$h._readData.getUint32(),A$K=new Uint16Array(A$R.slice(A$H,A$H+A$M)),A$F=A$kR.create("ushort",A$M/2,35044,!0);A$F.setData(A$K),A$h._mesh._indexBuffer=A$F;var A$L=A$h._mesh._boneNames=[],A$D=A$h._readData.getUint16();for(A$L.length=A$D,A$j=0;A$j<A$D;A$j++)A$L[A$j]=A$h._strings[A$h._readData.getUint16()];var A$Q=A$h._readData.getUint32(),A$Z=A$h._readData.getUint32(),A$S=(new Float32Array(A$R.slice(A$T+A$Q,A$T+A$Q+A$Z)),A$h._readData.getUint32()),A$b=A$h._readData.getUint32(),A$f=new Float32Array(A$R.slice(A$T+A$S,A$T+A$S+A$b));for(A$h._mesh._inverseBindPoses=[],A$j=0,A$C=A$f.length;A$j<A$C;A$j+=16){var A$p=new A$CR(A$f[A$j+0],A$f[A$j+1],A$f[A$j+2],A$f[A$j+3],A$f[A$j+4],A$f[A$j+5],A$f[A$j+6],A$f[A$j+7],A$f[A$j+8],A$f[A$j+9],A$f[A$j+10],A$f[A$j+11],A$f[A$j+12],A$f[A$j+13],A$f[A$j+14],A$f[A$j+15]);A$h._mesh._inverseBindPoses.push(A$p)}return A$h._mesh._skinnedDatas=new Float32Array(16*A$f.length),!0},A$h.READ_SUBMESH=function(){var A$C=A$h._readData.__getBuffer(),A$R=new A$IR(A$h._mesh),A$j=A$h._readData.getInt16(),A$w=A$h._readData.getUint32(),A$T=A$h._readData.getUint32();A$R._vertexBuffer=A$h._mesh._vertexBuffers[A$j],A$R._vertexStart=A$w,A$R._vertexCount=A$T;var A$G=A$h._readData.getUint32(),A$o=A$h._readData.getUint32(),A$U=A$h._mesh._indexBuffer;A$R._indexBuffer=A$U,A$R._indexStart=A$G,A$R._indexCount=A$o,A$R._indices=new Uint16Array(A$U.getData().buffer,2*A$G,A$o);var A$t=A$h._DATA.offset,A$I=A$R._subIndexBufferStart,A$e=A$R._subIndexBufferCount,A$H=A$R._boneIndicesList,A$M=A$h._readData.getUint16();A$I.length=A$M,A$e.length=A$M,A$H.length=A$M;for(var A$K=0;A$K<A$M;A$K++){A$I[A$K]=A$h._readData.getUint32(),A$e[A$K]=A$h._readData.getUint32();var A$F=A$h._readData.getUint32(),A$L=A$h._readData.getUint32();A$R._boneIndicesList[A$K]=new Uint8Array(A$C.slice(A$t+A$F,A$t+A$F+A$L))}return A$h._subMeshes.push(A$R),!0},A$h._getVertexDeclaration=function(A$C){for(var A$R,A$j=!1,A$w=!1,A$T=!1,A$G=!1,A$o=!1,A$U=!1,A$t=!1,A$I=!1,A$e=!1,A$H=0;A$H<A$C.length;A$H++)switch(A$C[A$H]){case"POSITION":A$j=!0;break;case"NORMAL":A$w=!0;break;case"COLOR":A$T=!0;break;case"UV":A$G=!0;break;case"UV1":A$o=!0;break;case"BLENDWEIGHT":A$t=!0;break;case"BLENDINDICES":A$I=!0;break;case"TANGENT":A$U=!0;break;case"BINORMAL":A$e=!0}return A$j&&A$w&&A$T&&A$G&&A$o&&A$t&&A$I&&A$U?A$R=A$SC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$o&&A$t&&A$I?A$R=A$QC.vertexDeclaration:A$j&&A$w&&A$G&&A$o&&A$t&&A$I&&A$U?A$R=A$aC.vertexDeclaration:A$j&&A$w&&A$G&&A$o&&A$t&&A$I?A$R=A$JC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$t&&A$I&&A$U?A$R=A$xC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$t&&A$I?A$R=A$pC.vertexDeclaration:A$j&&A$w&&A$G&&A$t&&A$I&&A$U?A$R=A$VC.vertexDeclaration:A$j&&A$w&&A$G&&A$t&&A$I?A$R=A$mC.vertexDeclaration:A$j&&A$w&&A$T&&A$t&&A$I&&A$U?A$R=A$MC.vertexDeclaration:A$j&&A$w&&A$T&&A$t&&A$I?A$R=A$eC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$o&&A$U?A$R=A$fC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$o?A$R=A$DC.vertexDeclaration:A$j&&A$w&&A$G&&A$o&&A$U?A$R=A$yC.vertexDeclaration:A$j&&A$w&&A$G&&A$o?A$R=A$PC.vertexDeclaration:A$j&&A$w&&A$T&&A$G&&A$U?A$R=A$$C.vertexDeclaration:A$j&&A$w&&A$G&&A$U&&A$e?A$R=A$gC.vertexDeclaration:A$j&&A$w&&A$T&&A$G?A$R=A$LC.vertexDeclaration:A$j&&A$w&&A$G&&A$U?A$R=A$lC.vertexDeclaration:A$j&&A$w&&A$G?A$R=A$EC.vertexDeclaration:A$j&&A$w&&A$T&&A$U?A$R=A$FC.vertexDeclaration:A$j&&A$w&&A$T&&(A$R=A$IC.vertexDeclaration),A$R},A$h._attrReg=new RegExp("(\\w+)|([:,;])","g"),A$h._strings=[],A$h._readData=null,A$h._version=null,A$h._mesh=null,A$h._materials=null,A$h._subMeshes=null,A$h._materialMap=null,A$H(A$h,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),A$h}(),A$cC=function(){function A$p(){}return A$K(A$p,"laya.d3.loaders.LoadModelV03"),A$p.parse=function(A$C,A$R,A$j,A$w,A$T){A$p._mesh=A$j,A$p._subMeshes=A$w,A$p._materialMap=A$T,A$p._version=A$R,A$p._readData=A$C,A$p.READ_DATA(),A$p.READ_BLOCK(),A$p.READ_STRINGS();for(var A$G=0,A$o=A$p._BLOCK.count;A$G<A$o;A$G++){A$p._readData.pos=A$p._BLOCK.blockStarts[A$G];var A$U=A$p._readData.getUint16(),A$t=A$p._strings[A$U],A$I=A$p["READ_"+A$t];if(null==A$I)throw new Error("model file err,no this function:"+A$U+" "+A$t);A$I.call()}A$p._strings.length=0,A$p._readData=null,A$p._version=null,A$p._mesh=null,A$p._subMeshes=null,A$p._materialMap=null},A$p._readString=function(){return A$p._strings[A$p._readData.getUint16()]},A$p.READ_DATA=function(){A$p._DATA.offset=A$p._readData.getUint32(),A$p._DATA.size=A$p._readData.getUint32()},A$p.READ_BLOCK=function(){for(var A$C=A$p._BLOCK.count=A$p._readData.getUint16(),A$R=A$p._BLOCK.blockStarts=[],A$j=A$p._BLOCK.blockLengths=[],A$w=0;A$w<A$C;A$w++)A$R.push(A$p._readData.getUint32()),A$j.push(A$p._readData.getUint32())},A$p.READ_STRINGS=function(){var A$C=A$p._readData.getUint32(),A$R=A$p._readData.getUint16(),A$j=A$p._readData.pos;A$p._readData.pos=A$C+A$p._DATA.offset;for(var A$w=0;A$w<A$R;A$w++)A$p._strings[A$w]=A$p._readData.readUTFString();A$p._readData.pos=A$j},A$p.READ_MESH=function(){var A$C,A$R=A$p._readString(),A$j=A$p._readData.__getBuffer(),A$w=0,A$T=A$p._readData.getInt16(),A$G=A$p._DATA.offset;for(A$w=0;A$w<A$T;A$w++){var A$o,A$U=A$G+A$p._readData.getUint32(),A$t=A$p._readData.getUint32(),A$I=new Float32Array(A$j.slice(A$U,A$U+A$t)),A$e=A$p._readString();switch(A$p._version){case"LAYAMODEL:03":A$o=A$p._vertexDeclarationMap_Discard[A$e];break;case"LAYAMODEL:0301":A$o=A$p._vertexDeclarationMap[A$e];break;default:throw new Error("LoadModelV03: unknown version.")}if(!A$o)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+A$p._version+"  bufferAttribute="+A$e+"  name="+A$R+"  url="+(A$p._mesh?A$p._mesh.url:"null"));var A$H=A$VR.create(A$o,4*A$I.length/A$o.vertexStride,35044,!0,A$p._mesh._url+"_"+A$w);A$H.setData(A$I),A$p._mesh._vertexBuffers.push(A$H)}var A$M=A$G+A$p._readData.getUint32(),A$K=A$p._readData.getUint32(),A$F=new Uint16Array(A$j.slice(A$M,A$M+A$K)),A$L=A$kR.create("ushort",A$K/2,35044,!0,A$p._mesh._url);A$L.setData(A$F),A$p._mesh._indexBuffer=A$L;var A$D=A$p._mesh._boneNames=[],A$Q=A$p._readData.getUint16();for(A$D.length=A$Q,A$w=0;A$w<A$Q;A$w++)A$D[A$w]=A$p._strings[A$p._readData.getUint16()];A$p._readData.pos+=8;var A$Z=A$p._readData.getUint32(),A$S=A$p._readData.getUint32(),A$b=new Float32Array(A$j.slice(A$G+A$Z,A$G+A$Z+A$S));for(A$p._mesh._inverseBindPoses=[],A$w=0,A$C=A$b.length;A$w<A$C;A$w+=16){var A$f=new A$CR(A$b[A$w+0],A$b[A$w+1],A$b[A$w+2],A$b[A$w+3],A$b[A$w+4],A$b[A$w+5],A$b[A$w+6],A$b[A$w+7],A$b[A$w+8],A$b[A$w+9],A$b[A$w+10],A$b[A$w+11],A$b[A$w+12],A$b[A$w+13],A$b[A$w+14],A$b[A$w+15]);A$p._mesh._inverseBindPoses.push(A$f)}return A$p._mesh._skinnedDatas=new Float32Array(16*A$b.length),!0},A$p.READ_SUBMESH=function(){var A$C=A$p._readData.__getBuffer(),A$R=new A$IR(A$p._mesh),A$j=A$p._readData.getInt16(),A$w=A$p._readData.getUint32(),A$T=A$p._readData.getUint32();A$R._vertexBuffer=A$p._mesh._vertexBuffers[A$j],A$R._vertexStart=A$w,A$R._vertexCount=A$T;var A$G=A$p._readData.getUint32(),A$o=A$p._readData.getUint32(),A$U=A$p._mesh._indexBuffer;A$R._indexBuffer=A$U,A$R._indexStart=A$G,A$R._indexCount=A$o,A$R._indices=new Uint16Array(A$U.getData().buffer,2*A$G,A$o);var A$t=A$p._DATA.offset,A$I=A$R._subIndexBufferStart,A$e=A$R._subIndexBufferCount,A$H=A$R._boneIndicesList,A$M=A$p._readData.getUint16();A$I.length=A$M,A$e.length=A$M,A$H.length=A$M;for(var A$K=0;A$K<A$M;A$K++){A$I[A$K]=A$p._readData.getUint32(),A$e[A$K]=A$p._readData.getUint32();var A$F=A$p._readData.getUint32(),A$L=A$p._readData.getUint32();A$H[A$K]=new Uint8Array(A$C.slice(A$t+A$F,A$t+A$F+A$L))}return A$p._subMeshes.push(A$R),!0},A$p._strings=[],A$p._readData=null,A$p._version=null,A$p._mesh=null,A$p._subMeshes=null,A$p._materialMap=null,A$H(A$p,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":A$SC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":A$QC.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":A$BC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":A$aC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":A$JC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":A$xC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":A$pC.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":A$VC.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":A$mC.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":A$MC.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":A$eC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":A$fC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":A$DC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":A$yC.vertexDeclaration,"POSITION,NORMAL,UV,UV1":A$PC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":A$$C.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":A$gC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":A$LC.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":A$lC.vertexDeclaration,"POSITION,NORMAL,UV":A$EC.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":A$FC.vertexDeclaration,"POSITION,NORMAL,COLOR":A$IC.vertexDeclaration,"POSITION,NORMAL,TANGENT":A$rC.vertexDeclaration,"POSITION,NORMAL":A$tC.vertexDeclaration,"POSITION,UV":A$_C.vertexDeclaration,POSITION:A$UC.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":A$ZC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":A$QC.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":A$BC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":A$NC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":A$JC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":A$hC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":A$pC.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":A$kC.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":A$mC.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":A$HC.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":A$eC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":A$bC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":A$DC.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":A$nC.vertexDeclaration,"POSITION,NORMAL,UV,UV1":A$PC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":A$WC.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":A$gC.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":A$LC.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":A$zC.vertexDeclaration,"POSITION,NORMAL,UV":A$EC.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":A$KC.vertexDeclaration,"POSITION,NORMAL,COLOR":A$IC.vertexDeclaration,"POSITION,NORMAL,TANGENT":A$AC.vertexDeclaration,"POSITION,NORMAL":A$tC.vertexDeclaration,"POSITION,UV":A$_C.vertexDeclaration,POSITION:A$UC.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),A$p}(),A$XC=function(){function A$U(){}return A$K(A$U,"laya.d3.loaders.MeshReader"),A$U.read=function(A$C,A$R,A$j,A$w,A$T){var A$G=new A$p(A$C);A$G.pos=0;var A$o=A$G.readUTFString();switch(A$o){case"LAYAMODEL:01":case"LAYASKINANI:01":A$U._readVersion01(A$G,A$o,A$R,A$j,A$w,A$T);break;case"LAYAMODEL:02":A$sC.parse(A$G,A$o,A$R,A$j,A$w,A$T);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":A$cC.parse(A$G,A$o,A$R,A$w,A$T);break;default:throw new Error("MeshReader: unknown mesh version.")}A$R._setSubMeshes(A$w)},A$U._readVersion01=function(A$C,A$R,A$j,A$w,A$T,A$G){new A$uC(A$C,A$R,A$j,A$w,A$T,A$G)},A$U}(),A$YC=function(){function A$C(A$C,A$R){this.min=null,this.max=null,this.min=A$C,this.max=A$R}A$K(A$C,"laya.d3.math.BoundBox");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.getCorners=function(A$C){A$C.length=8;var A$R=this.min.elements,A$j=this.max.elements,A$w=A$R[0],A$T=A$R[1],A$G=A$R[2],A$o=A$j[0],A$U=A$j[1],A$t=A$j[2];A$C[0]=new A$oR(A$w,A$U,A$t),A$C[1]=new A$oR(A$o,A$U,A$t),A$C[2]=new A$oR(A$o,A$T,A$t),A$C[3]=new A$oR(A$w,A$T,A$t),A$C[4]=new A$oR(A$w,A$U,A$G),A$C[5]=new A$oR(A$o,A$U,A$G),A$C[6]=new A$oR(A$o,A$T,A$G),A$C[7]=new A$oR(A$w,A$T,A$G)},A$R.toDefault=function(){this.min.toDefault(),this.max.toDefault()},A$R.cloneTo=function(A$C){var A$R=A$C;this.min.cloneTo(A$R.min),this.max.cloneTo(A$R.max)},A$R.clone=function(){var A$C=new this.constructor(new A$oR,new A$oR);return this.cloneTo(A$C),A$C},A$C.createfromPoints=function(A$C,A$R){if(null==A$C)throw new Error("points");var A$j=A$R.min,A$w=A$R.max,A$T=A$j.elements;A$T[0]=Number.MAX_VALUE,A$T[1]=Number.MAX_VALUE,A$T[2]=Number.MAX_VALUE;var A$G=A$w.elements;A$G[0]=-Number.MAX_VALUE,A$G[1]=-Number.MAX_VALUE,A$G[2]=-Number.MAX_VALUE;for(var A$o=0,A$U=A$C.length;A$o<A$U;++A$o)A$oR.min(A$j,A$C[A$o],A$j),A$oR.max(A$w,A$C[A$o],A$w)},A$C.merge=function(A$C,A$R,A$j){A$oR.min(A$C.min,A$R.min,A$j.min),A$oR.max(A$C.max,A$R.max,A$j.max)},A$C}(),A$dC=function(){function A$I(A$C){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=A$C,this._near=new A$RR(new A$oR),this._far=new A$RR(new A$oR),this._left=new A$RR(new A$oR),this._right=new A$RR(new A$oR),this._top=new A$RR(new A$oR),this._bottom=new A$RR(new A$oR),A$I._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}A$K(A$I,"laya.d3.math.BoundFrustum");var A$C=A$I.prototype;return A$C.equalsBoundFrustum=function(A$C){return this._matrix.equalsOtherMatrix(A$C.matrix)},A$C.equalsObj=function(A$C){if(A$C instanceof laya.d3.math.BoundFrustum){var A$R=A$C;return this.equalsBoundFrustum(A$R)}return!1},A$C.getPlane=function(A$C){switch(A$C){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},A$C.getCorners=function(A$C){A$I._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(A$C[0]),A$I._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(A$C[1]),A$I._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(A$C[2]),A$I._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(A$C[3]),A$I._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(A$C[4]),A$I._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(A$C[5]),A$I._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(A$C[6]),A$I._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(A$C[7])},A$C.containsPoint=function(A$C){for(var A$R=A$RR.PlaneIntersectionType_Front,A$j=A$RR.PlaneIntersectionType_Front,A$w=0;A$w<6;A$w++){switch(A$w){case 0:A$j=Collision.intersectsPlaneAndPoint(this._near,A$C);break;case 1:A$j=Collision.intersectsPlaneAndPoint(this._far,A$C);break;case 2:A$j=Collision.intersectsPlaneAndPoint(this._left,A$C);break;case 3:A$j=Collision.intersectsPlaneAndPoint(this._right,A$C);break;case 4:A$j=Collision.intersectsPlaneAndPoint(this._top,A$C);break;case 5:A$j=Collision.intersectsPlaneAndPoint(this._bottom,A$C)}switch(A$j){case A$RR.PlaneIntersectionType_Back:return 0;case A$RR.PlaneIntersectionType_Intersecting:A$R=A$RR.PlaneIntersectionType_Intersecting}}switch(A$R){case A$RR.PlaneIntersectionType_Intersecting:return 2;default:return 1}},A$C.containsBoundBox=function(A$C){for(var A$R,A$j=A$I._tempV30,A$w=A$I._tempV31,A$T=1,A$G=0;A$G<6;A$G++){if(A$R=this.getPlane(A$G),this._getBoxToPlanePVertexNVertex(A$C,A$R.normal,A$j,A$w),Collision.intersectsPlaneAndPoint(A$R,A$j)===A$RR.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(A$R,A$w)===A$RR.PlaneIntersectionType_Back&&(A$T=2)}return A$T},A$C.containsBoundSphere=function(A$C){for(var A$R=A$RR.PlaneIntersectionType_Front,A$j=A$RR.PlaneIntersectionType_Front,A$w=0;A$w<6;A$w++){switch(A$w){case 0:A$j=Collision.intersectsPlaneAndSphere(this._near,A$C);break;case 1:A$j=Collision.intersectsPlaneAndSphere(this._far,A$C);break;case 2:A$j=Collision.intersectsPlaneAndSphere(this._left,A$C);break;case 3:A$j=Collision.intersectsPlaneAndSphere(this._right,A$C);break;case 4:A$j=Collision.intersectsPlaneAndSphere(this._top,A$C);break;case 5:A$j=Collision.intersectsPlaneAndSphere(this._bottom,A$C)}switch(A$j){case A$RR.PlaneIntersectionType_Back:return 0;case A$RR.PlaneIntersectionType_Intersecting:A$R=A$RR.PlaneIntersectionType_Intersecting}}switch(A$R){case A$RR.PlaneIntersectionType_Intersecting:return 2;default:return 1}},A$C._getBoxToPlanePVertexNVertex=function(A$C,A$R,A$j,A$w){var A$T=A$C.min,A$G=A$T.elements,A$o=A$C.max,A$U=A$o.elements,A$t=A$R.elements,A$I=A$t[0],A$e=A$t[1],A$H=A$t[2];A$T.cloneTo(A$j);var A$M=A$j.elements;0<=A$I&&(A$M[0]=A$U[0]),0<=A$e&&(A$M[1]=A$U[1]),0<=A$H&&(A$M[2]=A$U[2]),A$o.cloneTo(A$w);var A$K=A$w.elements;0<=A$I&&(A$K[0]=A$G[0]),0<=A$e&&(A$K[1]=A$G[1]),0<=A$H&&(A$K[2]=A$G[2])},A$F(0,A$C,"top",function(){return this._top}),A$F(0,A$C,"matrix",function(){return this._matrix},function(A$C){this._matrix=A$C,A$I._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),A$F(0,A$C,"near",function(){return this._near}),A$F(0,A$C,"far",function(){return this._far}),A$F(0,A$C,"left",function(){return this._left}),A$F(0,A$C,"right",function(){return this._right}),A$F(0,A$C,"bottom",function(){return this._bottom}),A$I._getPlanesFromMatrix=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U=A$C.elements,A$t=A$U[0],A$I=A$U[1],A$e=A$U[2],A$H=A$U[3],A$M=A$U[4],A$K=A$U[5],A$F=A$U[6],A$L=A$U[7],A$D=A$U[8],A$Q=A$U[9],A$Z=A$U[10],A$S=A$U[11],A$b=A$U[12],A$f=A$U[13],A$p=A$U[14],A$h=A$U[15],A$x=A$R.normal.elements;A$x[0]=A$H+A$e,A$x[1]=A$L+A$F,A$x[2]=A$S+A$Z,A$R.distance=A$h+A$p,A$R.normalize();var A$W=A$j.normal.elements;A$W[0]=A$H-A$e,A$W[1]=A$L-A$F,A$W[2]=A$S-A$Z,A$j.distance=A$h-A$p,A$j.normalize();var A$$=A$w.normal.elements;A$$[0]=A$H+A$t,A$$[1]=A$L+A$M,A$$[2]=A$S+A$D,A$w.distance=A$h+A$b,A$w.normalize();var A$A=A$T.normal.elements;A$A[0]=A$H-A$t,A$A[1]=A$L-A$M,A$A[2]=A$S-A$D,A$T.distance=A$h-A$b,A$T.normalize();var A$r=A$G.normal.elements;A$r[0]=A$H-A$I,A$r[1]=A$L-A$K,A$r[2]=A$S-A$Q,A$G.distance=A$h-A$f,A$G.normalize();var A$E=A$o.normal.elements;A$E[0]=A$H+A$I,A$E[1]=A$L+A$K,A$E[2]=A$S+A$Q,A$o.distance=A$h+A$f,A$o.normalize()},A$I._get3PlaneInterPoint=function(A$C,A$R,A$j){var A$w=A$C.normal,A$T=A$R.normal,A$G=A$j.normal;A$oR.cross(A$T,A$G,A$I._tempV30),A$oR.cross(A$G,A$w,A$I._tempV31),A$oR.cross(A$w,A$T,A$I._tempV32);var A$o=A$oR.dot(A$w,A$I._tempV30),A$U=A$oR.dot(A$T,A$I._tempV31),A$t=A$oR.dot(A$G,A$I._tempV32);return A$oR.scale(A$I._tempV30,-A$C.distance/A$o,A$I._tempV33),A$oR.scale(A$I._tempV31,-A$R.distance/A$U,A$I._tempV34),A$oR.scale(A$I._tempV32,-A$j.distance/A$t,A$I._tempV35),A$oR.add(A$I._tempV33,A$I._tempV34,A$I._tempV36),A$oR.add(A$I._tempV35,A$I._tempV36,A$I._tempV37),A$I._tempV37},A$H(A$I,["_tempV30",function(){return this._tempV30=new A$oR},"_tempV31",function(){return this._tempV31=new A$oR},"_tempV32",function(){return this._tempV32=new A$oR},"_tempV33",function(){return this._tempV33=new A$oR},"_tempV34",function(){return this._tempV34=new A$oR},"_tempV35",function(){return this._tempV35=new A$oR},"_tempV36",function(){return this._tempV36=new A$oR},"_tempV37",function(){return this._tempV37=new A$oR}]),A$I}(),A$OC=function(){function A$e(A$C,A$R){this.center=null,this.radius=NaN,this.center=A$C,this.radius=A$R}A$K(A$e,"laya.d3.math.BoundSphere");var A$C=A$e.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.toDefault=function(){this.center.toDefault(),this.radius=0},A$C.intersectsRayDistance=function(A$C){return Collision.intersectsRayAndSphereRD(A$C,this)},A$C.intersectsRayPoint=function(A$C,A$R){return Collision.intersectsRayAndSphereRP(A$C,this,A$R)},A$C.cloneTo=function(A$C){var A$R=A$C;this.center.cloneTo(A$R.center),A$R.radius=this.radius},A$C.clone=function(){var A$C=new this.constructor(new A$oR,new A$oR);return this.cloneTo(A$C),A$C},A$e.createFromSubPoints=function(A$C,A$R,A$j,A$w){if(null==A$C)throw new Error("points");if(A$R<0||A$R>=A$C.length)throw new Error("start"+A$R+"Must be in the range [0, "+(A$C.length-1)+"]");if(A$j<0||A$R+A$j>A$C.length)throw new Error("count"+A$j+"Must be in the range <= "+A$C.length+"}");var A$T=A$R+A$j,A$G=A$e._tempVector3;A$G.elements[0]=0,A$G.elements[1]=0,A$G.elements[2]=0;for(var A$o=A$R;A$o<A$T;++A$o)A$oR.add(A$C[A$o],A$G,A$G);var A$U=A$w.center;A$oR.scale(A$G,1/A$j,A$U);var A$t=0;for(A$o=A$R;A$o<A$T;++A$o){var A$I=A$oR.distanceSquared(A$U,A$C[A$o]);A$t<A$I&&(A$t=A$I)}A$w.radius=Math.sqrt(A$t)},A$e.createfromPoints=function(A$C,A$R){if(null==A$C)throw new Error("points");A$e.createFromSubPoints(A$C,0,A$C.length,A$R)},A$H(A$e,["_tempVector3",function(){return this._tempVector3=new A$oR}]),A$e}(),A$qC=(function(){function A$C(){}A$K(A$C,"laya.d3.math.ContainmentType"),A$C.Disjoint=0,A$C.Contains=1,A$C.Intersects=2}(),function(){function A$j(){}return A$K(A$j,"laya.d3.math.MathUtils3D"),A$j.isZero=function(A$C){return Math.abs(A$C)<A$j.zeroTolerance},A$j.nearEqual=function(A$C,A$R){return!!A$j.isZero(A$C-A$R)},A$j.fastInvSqrt=function(A$C){return A$j.isZero(A$C)?A$C:1/Math.sqrt(A$C)},A$H(A$j,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),A$j}()),A$vC=function(){function A$t(){var A$C=this.elements=new Float32Array(9);A$C[0]=1,A$C[1]=0,A$C[2]=0,A$C[3]=0,A$C[4]=1,A$C[5]=0,A$C[6]=0,A$C[7]=0,A$C[8]=1}A$K(A$t,"laya.d3.math.Matrix3x3");var A$C=A$t.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.determinant=function(){var A$C=this.elements,A$R=A$C[0],A$j=A$C[1],A$w=A$C[2],A$T=A$C[3],A$G=A$C[4],A$o=A$C[5],A$U=A$C[6],A$t=A$C[7],A$I=A$C[8];return A$R*(A$I*A$G-A$o*A$t)+A$j*(-A$I*A$T+A$o*A$U)+A$w*(A$t*A$T-A$G*A$U)},A$C.translate=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements,A$T=A$C.elements,A$G=A$w[0],A$o=A$w[1],A$U=A$w[2],A$t=A$w[3],A$I=A$w[4],A$e=A$w[5],A$H=A$w[6],A$M=A$w[7],A$K=A$w[8],A$F=A$T[0],A$L=A$T[1];A$j[0]=A$G,A$j[1]=A$o,A$j[2]=A$U,A$j[3]=A$t,A$j[4]=A$I,A$j[5]=A$e,A$j[6]=A$F*A$G+A$L*A$t+A$H,A$j[7]=A$F*A$o+A$L*A$I+A$M,A$j[8]=A$F*A$U+A$L*A$e+A$K},A$C.rotate=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=A$w[4],A$I=A$w[5],A$e=A$w[6],A$H=A$w[7],A$M=A$w[8],A$K=Math.sin(A$C),A$F=Math.cos(A$C);A$j[0]=A$F*A$T+A$K*A$U,A$j[1]=A$F*A$G+A$K*A$t,A$j[2]=A$F*A$o+A$K*A$I,A$j[3]=A$F*A$U-A$K*A$T,A$j[4]=A$F*A$t-A$K*A$G,A$j[5]=A$F*A$I-A$K*A$o,A$j[6]=A$e,A$j[7]=A$H,A$j[8]=A$M},A$C.scale=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements,A$T=A$C.elements,A$G=A$T[0],A$o=A$T[1];A$j[0]=A$G*A$w[0],A$j[1]=A$G*A$w[1],A$j[2]=A$G*A$w[2],A$j[3]=A$o*A$w[3],A$j[4]=A$o*A$w[4],A$j[5]=A$o*A$w[5],A$j[6]=A$w[6],A$j[7]=A$w[7],A$j[8]=A$w[8]},A$C.invert=function(A$C){var A$R=A$C.elements,A$j=this.elements,A$w=A$j[0],A$T=A$j[1],A$G=A$j[2],A$o=A$j[3],A$U=A$j[4],A$t=A$j[5],A$I=A$j[6],A$e=A$j[7],A$H=A$j[8],A$M=A$H*A$U-A$t*A$e,A$K=-A$H*A$o+A$t*A$I,A$F=A$e*A$o-A$U*A$I,A$L=A$w*A$M+A$T*A$K+A$G*A$F;A$L||(A$C=null),A$L=1/A$L,A$R[0]=A$M*A$L,A$R[1]=(-A$H*A$T+A$G*A$e)*A$L,A$R[2]=(A$t*A$T-A$G*A$U)*A$L,A$R[3]=A$K*A$L,A$R[4]=(A$H*A$w-A$G*A$I)*A$L,A$R[5]=(-A$t*A$w+A$G*A$o)*A$L,A$R[6]=A$F*A$L,A$R[7]=(-A$e*A$w+A$T*A$I)*A$L,A$R[8]=(A$U*A$w-A$T*A$o)*A$L},A$C.transpose=function(A$C){var A$R=A$C.elements,A$j=this.elements;if(A$C===this){var A$w=A$j[1],A$T=A$j[2],A$G=A$j[5];A$R[1]=A$j[3],A$R[2]=A$j[6],A$R[3]=A$w,A$R[5]=A$j[7],A$R[6]=A$T,A$R[7]=A$G}else A$R[0]=A$j[0],A$R[1]=A$j[3],A$R[2]=A$j[6],A$R[3]=A$j[1],A$R[4]=A$j[4],A$R[5]=A$j[7],A$R[6]=A$j[2],A$R[7]=A$j[5],A$R[8]=A$j[8]},A$C.identity=function(){var A$C=this.elements;A$C[0]=1,A$C[1]=0,A$C[2]=0,A$C[3]=0,A$C[4]=1,A$C[5]=0,A$C[6]=0,A$C[7]=0,A$C[8]=1},A$C.cloneTo=function(A$C){var A$R,A$j,A$w;if((A$j=this.elements)!==(A$w=A$C.elements))for(A$R=0;A$R<9;++A$R)A$w[A$R]=A$j[A$R]},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$t.createFromTranslation=function(A$C,A$R){A$R.elements;var A$j=A$C.elements;A$R[0]=1,A$R[1]=0,A$R[2]=0,A$R[3]=0,A$R[4]=1,A$R[5]=0,A$R[6]=A$j[0],A$R[7]=A$j[1],A$R[8]=1},A$t.createFromRotation=function(A$C,A$R){var A$j=A$R.elements,A$w=Math.sin(A$C),A$T=Math.cos(A$C);A$j[0]=A$T,A$j[1]=A$w,A$j[2]=0,A$j[3]=-A$w,A$j[4]=A$T,A$j[5]=0,A$j[6]=0,A$j[7]=0,A$j[8]=1},A$t.createFromScaling=function(A$C,A$R){var A$j=A$R.elements,A$w=A$C.elements;A$j[0]=A$w[0],A$j[1]=0,A$j[2]=0,A$j[3]=0,A$j[4]=A$w[1],A$j[5]=0,A$j[6]=0,A$j[7]=0,A$j[8]=1},A$t.createFromMatrix4x4=function(A$C,A$R){A$R[0]=A$C[0],A$R[1]=A$C[1],A$R[2]=A$C[2],A$R[3]=A$C[4],A$R[4]=A$C[5],A$R[5]=A$C[6],A$R[6]=A$C[8],A$R[7]=A$C[9],A$R[8]=A$C[10]},A$t.multiply=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements,A$o=A$T[0],A$U=A$T[1],A$t=A$T[2],A$I=A$T[3],A$e=A$T[4],A$H=A$T[5],A$M=A$T[6],A$K=A$T[7],A$F=A$T[8],A$L=A$G[0],A$D=A$G[1],A$Q=A$G[2],A$Z=A$G[3],A$S=A$G[4],A$b=A$G[5],A$f=A$G[6],A$p=A$G[7],A$h=A$G[8];A$w[0]=A$L*A$o+A$D*A$I+A$Q*A$M,A$w[1]=A$L*A$U+A$D*A$e+A$Q*A$K,A$w[2]=A$L*A$t+A$D*A$H+A$Q*A$F,A$w[3]=A$Z*A$o+A$S*A$I+A$b*A$M,A$w[4]=A$Z*A$U+A$S*A$e+A$b*A$K,A$w[5]=A$Z*A$t+A$S*A$H+A$b*A$F,A$w[6]=A$f*A$o+A$p*A$I+A$h*A$M,A$w[7]=A$f*A$U+A$p*A$e+A$h*A$K,A$w[8]=A$f*A$t+A$p*A$H+A$h*A$F},A$t.lookAt=function(A$C,A$R,A$j,A$w){A$oR.subtract(A$C,A$R,A$t._tempV30),A$oR.normalize(A$t._tempV30,A$t._tempV30),A$oR.cross(A$j,A$t._tempV30,A$t._tempV31),A$oR.normalize(A$t._tempV31,A$t._tempV31),A$oR.cross(A$t._tempV30,A$t._tempV31,A$t._tempV32);var A$T=A$t._tempV30.elements,A$G=A$t._tempV31.elements,A$o=A$t._tempV32.elements,A$U=A$w.elements;A$U[0]=A$G[0],A$U[3]=A$G[1],A$U[6]=A$G[2],A$U[1]=A$o[0],A$U[4]=A$o[1],A$U[7]=A$o[2],A$U[2]=A$T[0],A$U[5]=A$T[1],A$U[8]=A$T[2]},A$t.DEFAULT=new A$t,A$H(A$t,["_tempV30",function(){return this._tempV30=new A$oR},"_tempV31",function(){return this._tempV31=new A$oR},"_tempV32",function(){return this._tempV32=new A$oR}]),A$t}(),A$CR=function(){function A$W(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H,A$M,A$K,A$F,A$L){void 0===A$C&&(A$C=1),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=1),void 0===A$o&&(A$o=0),void 0===A$U&&(A$U=0),void 0===A$t&&(A$t=0),void 0===A$I&&(A$I=0),void 0===A$e&&(A$e=1),void 0===A$H&&(A$H=0),void 0===A$M&&(A$M=0),void 0===A$K&&(A$K=0),void 0===A$F&&(A$F=0),void 0===A$L&&(A$L=1);var A$D=this.elements=new Float32Array(16);A$D[0]=A$C,A$D[1]=A$R,A$D[2]=A$j,A$D[3]=A$w,A$D[4]=A$T,A$D[5]=A$G,A$D[6]=A$o,A$D[7]=A$U,A$D[8]=A$t,A$D[9]=A$I,A$D[10]=A$e,A$D[11]=A$H,A$D[12]=A$M,A$D[13]=A$K,A$D[14]=A$F,A$D[15]=A$L}A$K(A$W,"laya.d3.math.Matrix4x4");var A$C=A$W.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.getElementByRowColumn=function(A$C,A$R){if(A$C<0||3<A$C)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(A$R<0||3<A$R)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*A$C+A$R]},A$C.setElementByRowColumn=function(A$C,A$R,A$j){if(A$C<0||3<A$C)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(A$R<0||3<A$R)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*A$C+A$R]=A$j},A$C.equalsOtherMatrix=function(A$C){var A$R=this.elements,A$j=A$C.elements;return A$qC.nearEqual(A$R[0],A$j[0])&&A$qC.nearEqual(A$R[1],A$j[1])&&A$qC.nearEqual(A$R[2],A$j[2])&&A$qC.nearEqual(A$R[3],A$j[3])&&A$qC.nearEqual(A$R[4],A$j[4])&&A$qC.nearEqual(A$R[5],A$j[5])&&A$qC.nearEqual(A$R[6],A$j[6])&&A$qC.nearEqual(A$R[7],A$j[7])&&A$qC.nearEqual(A$R[8],A$j[8])&&A$qC.nearEqual(A$R[9],A$j[9])&&A$qC.nearEqual(A$R[10],A$j[10])&&A$qC.nearEqual(A$R[11],A$j[11])&&A$qC.nearEqual(A$R[12],A$j[12])&&A$qC.nearEqual(A$R[13],A$j[13])&&A$qC.nearEqual(A$R[14],A$j[14])&&A$qC.nearEqual(A$R[15],A$j[15])},A$C.decomposeTransRotScale=function(A$C,A$R,A$j){var A$w=A$W._tempMatrix4x4;return this.decomposeTransRotMatScale(A$C,A$w,A$j)?(A$jR.createFromMatrix4x4(A$w,A$R),!0):(A$R.identity(),!1)},A$C.decomposeTransRotMatScale=function(A$C,A$R,A$j){var A$w=this.elements,A$T=A$C.elements,A$G=A$R.elements,A$o=A$j.elements;A$T[0]=A$w[12],A$T[1]=A$w[13],A$T[2]=A$w[14];var A$U=A$w[0],A$t=A$w[1],A$I=A$w[2],A$e=A$w[4],A$H=A$w[5],A$M=A$w[6],A$K=A$w[8],A$F=A$w[9],A$L=A$w[10],A$D=A$o[0]=Math.sqrt(A$U*A$U+A$t*A$t+A$I*A$I),A$Q=A$o[1]=Math.sqrt(A$e*A$e+A$H*A$H+A$M*A$M),A$Z=A$o[2]=Math.sqrt(A$K*A$K+A$F*A$F+A$L*A$L);if(A$qC.isZero(A$D)||A$qC.isZero(A$Q)||A$qC.isZero(A$Z))return A$G[1]=A$G[2]=A$G[3]=A$G[4]=A$G[6]=A$G[7]=A$G[8]=A$G[9]=A$G[11]=A$G[12]=A$G[13]=A$G[14]=0,A$G[0]=A$G[5]=A$G[10]=A$G[15]=1,!1;var A$S=A$W._tempVector0,A$b=A$S.elements;A$b[0]=A$K/A$Z,A$b[1]=A$F/A$Z,A$b[2]=A$L/A$Z;var A$f=A$W._tempVector1,A$p=A$f.elements;A$p[0]=A$U/A$D,A$p[1]=A$t/A$D,A$p[2]=A$I/A$D;var A$h=A$W._tempVector2;A$oR.cross(A$S,A$f,A$h);var A$x=A$W._tempVector1;return A$oR.cross(A$h,A$S,A$x),A$G[3]=A$G[7]=A$G[11]=A$G[12]=A$G[13]=A$G[14]=0,A$G[15]=1,A$G[0]=A$x.x,A$G[1]=A$x.y,A$G[2]=A$x.z,A$G[4]=A$h.x,A$G[5]=A$h.y,A$G[6]=A$h.z,A$G[8]=A$S.x,A$G[9]=A$S.y,A$G[10]=A$S.z,A$G[0]*A$U+A$G[1]*A$t+A$G[2]*A$I<0&&(A$o[0]=-A$D),A$G[4]*A$e+A$G[5]*A$H+A$G[6]*A$M<0&&(A$o[1]=-A$Q),A$G[8]*A$K+A$G[9]*A$F+A$G[10]*A$L<0&&(A$o[2]=-A$Z),!0},A$C.decomposeYawPitchRoll=function(A$C){var A$R=A$C.elements,A$j=Math.asin(-this.elements[9]);A$R[1]=A$j,Math.cos(A$j)>A$qC.zeroTolerance?(A$R[2]=Math.atan2(this.elements[1],this.elements[5]),A$R[0]=Math.atan2(this.elements[8],this.elements[10])):(A$R[2]=Math.atan2(-this.elements[4],this.elements[0]),A$R[0]=0)},A$C.normalize=function(){var A$C=this.elements,A$R=A$C[0],A$j=A$C[1],A$w=A$C[2],A$T=Math.sqrt(A$R*A$R+A$j*A$j+A$w*A$w);if(!A$T)return A$C[0]=0,A$C[1]=0,void(A$C[2]=0);1!=A$T&&(A$T=1/A$T,A$C[0]=A$R*A$T,A$C[1]=A$j*A$T,A$C[2]=A$w*A$T)},A$C.transpose=function(){var A$C,A$R;return A$R=(A$C=this.elements)[1],A$C[1]=A$C[4],A$C[4]=A$R,A$R=A$C[2],A$C[2]=A$C[8],A$C[8]=A$R,A$R=A$C[3],A$C[3]=A$C[12],A$C[12]=A$R,A$R=A$C[6],A$C[6]=A$C[9],A$C[9]=A$R,A$R=A$C[7],A$C[7]=A$C[13],A$C[13]=A$R,A$R=A$C[11],A$C[11]=A$C[14],A$C[14]=A$R,this},A$C.invert=function(A$C){var A$R=this.elements,A$j=A$C.elements,A$w=A$R[0],A$T=A$R[1],A$G=A$R[2],A$o=A$R[3],A$U=A$R[4],A$t=A$R[5],A$I=A$R[6],A$e=A$R[7],A$H=A$R[8],A$M=A$R[9],A$K=A$R[10],A$F=A$R[11],A$L=A$R[12],A$D=A$R[13],A$Q=A$R[14],A$Z=A$R[15],A$S=A$w*A$t-A$T*A$U,A$b=A$w*A$I-A$G*A$U,A$f=A$w*A$e-A$o*A$U,A$p=A$T*A$I-A$G*A$t,A$h=A$T*A$e-A$o*A$t,A$x=A$G*A$e-A$o*A$I,A$W=A$H*A$D-A$M*A$L,A$$=A$H*A$Q-A$K*A$L,A$A=A$H*A$Z-A$F*A$L,A$r=A$M*A$Q-A$K*A$D,A$E=A$M*A$Z-A$F*A$D,A$P=A$K*A$Z-A$F*A$Q,A$J=A$S*A$P-A$b*A$E+A$f*A$r+A$p*A$A-A$h*A$$+A$x*A$W;0!==Math.abs(A$J)&&(A$J=1/A$J,A$j[0]=(A$t*A$P-A$I*A$E+A$e*A$r)*A$J,A$j[1]=(A$G*A$E-A$T*A$P-A$o*A$r)*A$J,A$j[2]=(A$D*A$x-A$Q*A$h+A$Z*A$p)*A$J,A$j[3]=(A$K*A$h-A$M*A$x-A$F*A$p)*A$J,A$j[4]=(A$I*A$A-A$U*A$P-A$e*A$$)*A$J,A$j[5]=(A$w*A$P-A$G*A$A+A$o*A$$)*A$J,A$j[6]=(A$Q*A$f-A$L*A$x-A$Z*A$b)*A$J,A$j[7]=(A$H*A$x-A$K*A$f+A$F*A$b)*A$J,A$j[8]=(A$U*A$E-A$t*A$A+A$e*A$W)*A$J,A$j[9]=(A$T*A$A-A$w*A$E-A$o*A$W)*A$J,A$j[10]=(A$L*A$h-A$D*A$f+A$Z*A$S)*A$J,A$j[11]=(A$M*A$f-A$H*A$h-A$F*A$S)*A$J,A$j[12]=(A$t*A$$-A$U*A$r-A$I*A$W)*A$J,A$j[13]=(A$w*A$r-A$T*A$$+A$G*A$W)*A$J,A$j[14]=(A$D*A$b-A$L*A$p-A$Q*A$S)*A$J,A$j[15]=(A$H*A$p-A$M*A$b+A$K*A$S)*A$J)},A$C.identity=function(){var A$C=this.elements;A$C[1]=A$C[2]=A$C[3]=A$C[4]=A$C[6]=A$C[7]=A$C[8]=A$C[9]=A$C[11]=A$C[12]=A$C[13]=A$C[14]=0,A$C[0]=A$C[5]=A$C[10]=A$C[15]=1},A$C.cloneTo=function(A$C){var A$R,A$j,A$w;if((A$j=this.elements)!==(A$w=A$C.elements))for(A$R=0;A$R<16;++A$R)A$w[A$R]=A$j[A$R]},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$C.getTranslationVector=function(A$C){var A$R=this.elements,A$j=A$C.elements;A$j[0]=A$R[12],A$j[1]=A$R[13],A$j[2]=A$R[14]},A$C.setTranslationVector=function(A$C){var A$R=this.elements,A$j=A$C.elements;A$R[12]=A$j[0],A$R[13]=A$j[1],A$R[14]=A$j[2]},A$C.getForward=function(A$C){var A$R=this.elements,A$j=A$C.elements;A$j[0]=-A$R[8],A$j[1]=-A$R[9],A$j[2]=-A$R[10]},A$C.setForward=function(A$C){var A$R=this.elements,A$j=A$C.elements;A$R[8]=-A$j[0],A$R[9]=-A$j[1],A$R[10]=-A$j[2]},A$W.createRotationX=function(A$C,A$R){var A$j=A$R.elements,A$w=Math.sin(A$C),A$T=Math.cos(A$C);A$j[1]=A$j[2]=A$j[3]=A$j[4]=A$j[7]=A$j[8]=A$j[11]=A$j[12]=A$j[13]=A$j[14]=0,A$j[0]=A$j[15]=1,A$j[5]=A$j[10]=A$T,A$j[6]=A$w,A$j[9]=-A$w},A$W.createRotationY=function(A$C,A$R){var A$j=A$R.elements,A$w=Math.sin(A$C),A$T=Math.cos(A$C);A$j[1]=A$j[3]=A$j[4]=A$j[6]=A$j[7]=A$j[9]=A$j[11]=A$j[12]=A$j[13]=A$j[14]=0,A$j[5]=A$j[15]=1,A$j[0]=A$j[10]=A$T,A$j[2]=-A$w,A$j[8]=A$w},A$W.createRotationZ=function(A$C,A$R){var A$j=A$R.elements,A$w=Math.sin(A$C),A$T=Math.cos(A$C);A$j[2]=A$j[3]=A$j[6]=A$j[7]=A$j[8]=A$j[9]=A$j[11]=A$j[12]=A$j[13]=A$j[14]=0,A$j[10]=A$j[15]=1,A$j[0]=A$j[5]=A$T,A$j[1]=A$w,A$j[4]=-A$w},A$W.createRotationYawPitchRoll=function(A$C,A$R,A$j,A$w){A$jR.createFromYawPitchRoll(A$C,A$R,A$j,A$W._tempQuaternion),A$W.createRotationQuaternion(A$W._tempQuaternion,A$w)},A$W.createRotationAxis=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=Math.cos(A$R),A$t=Math.sin(A$R),A$I=A$T*A$T,A$e=A$G*A$G,A$H=A$o*A$o,A$M=A$T*A$G,A$K=A$T*A$o,A$F=A$G*A$o,A$L=A$j.elements;A$L[3]=A$L[7]=A$L[11]=A$L[12]=A$L[13]=A$L[14]=0,A$L[15]=1,A$L[0]=A$I+A$U*(1-A$I),A$L[1]=A$M-A$U*A$M+A$t*A$o,A$L[2]=A$K-A$U*A$K-A$t*A$G,A$L[4]=A$M-A$U*A$M-A$t*A$o,A$L[5]=A$e+A$U*(1-A$e),A$L[6]=A$F-A$U*A$F+A$t*A$T,A$L[8]=A$K-A$U*A$K+A$t*A$G,A$L[9]=A$F-A$U*A$F-A$t*A$T,A$L[10]=A$H+A$U*(1-A$H)},A$W.createRotationQuaternion=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0],A$G=A$j[1],A$o=A$j[2],A$U=A$j[3],A$t=A$T*A$T,A$I=A$G*A$G,A$e=A$o*A$o,A$H=A$T*A$G,A$M=A$o*A$U,A$K=A$o*A$T,A$F=A$G*A$U,A$L=A$G*A$o,A$D=A$T*A$U;A$w[3]=A$w[7]=A$w[11]=A$w[12]=A$w[13]=A$w[14]=0,A$w[15]=1,A$w[0]=1-2*(A$I+A$e),A$w[1]=2*(A$H+A$M),A$w[2]=2*(A$K-A$F),A$w[4]=2*(A$H-A$M),A$w[5]=1-2*(A$e+A$t),A$w[6]=2*(A$L+A$D),A$w[8]=2*(A$K+A$F),A$w[9]=2*(A$L-A$D),A$w[10]=1-2*(A$I+A$t)},A$W.createTranslate=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;A$w[4]=A$w[8]=A$w[1]=A$w[9]=A$w[2]=A$w[6]=A$w[3]=A$w[7]=A$w[11]=0,A$w[0]=A$w[5]=A$w[10]=A$w[15]=1,A$w[12]=A$j[0],A$w[13]=A$j[1],A$w[14]=A$j[2]},A$W.createScaling=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;A$w[0]=A$j[0],A$w[5]=A$j[1],A$w[10]=A$j[2],A$w[1]=A$w[4]=A$w[8]=A$w[12]=A$w[9]=A$w[13]=A$w[2]=A$w[6]=A$w[14]=A$w[3]=A$w[7]=A$w[11]=0,A$w[15]=1},A$W.multiply=function(A$C,A$R,A$j){var A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e;for(A$T=A$j.elements,A$G=A$C.elements,A$T===(A$o=A$R.elements)&&(A$o=A$o.slice()),A$w=0;A$w<4;A$w++)A$U=A$G[A$w],A$t=A$G[A$w+4],A$I=A$G[A$w+8],A$e=A$G[A$w+12],A$T[A$w]=A$U*A$o[0]+A$t*A$o[1]+A$I*A$o[2]+A$e*A$o[3],A$T[A$w+4]=A$U*A$o[4]+A$t*A$o[5]+A$I*A$o[6]+A$e*A$o[7],A$T[A$w+8]=A$U*A$o[8]+A$t*A$o[9]+A$I*A$o[10]+A$e*A$o[11],A$T[A$w+12]=A$U*A$o[12]+A$t*A$o[13]+A$I*A$o[14]+A$e*A$o[15]},A$W.createFromQuaternion=function(A$C,A$R){var A$j=A$R.elements,A$w=A$C.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=A$T+A$T,A$I=A$G+A$G,A$e=A$o+A$o,A$H=A$T*A$t,A$M=A$G*A$t,A$K=A$G*A$I,A$F=A$o*A$t,A$L=A$o*A$I,A$D=A$o*A$e,A$Q=A$U*A$t,A$Z=A$U*A$I,A$S=A$U*A$e;A$j[0]=1-A$K-A$D,A$j[1]=A$M+A$S,A$j[2]=A$F-A$Z,A$j[3]=0,A$j[4]=A$M-A$S,A$j[5]=1-A$H-A$D,A$j[6]=A$L+A$Q,A$j[7]=0,A$j[8]=A$F+A$Z,A$j[9]=A$L-A$Q,A$j[10]=1-A$H-A$K,A$j[11]=0,A$j[12]=0,A$j[13]=0,A$j[14]=0,A$j[15]=1},A$W.createAffineTransformation=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements,A$G=A$R.elements,A$o=A$j.elements,A$U=A$w.elements,A$t=A$G[0],A$I=A$G[1],A$e=A$G[2],A$H=A$G[3],A$M=A$t+A$t,A$K=A$I+A$I,A$F=A$e+A$e,A$L=A$t*A$M,A$D=A$t*A$K,A$Q=A$t*A$F,A$Z=A$I*A$K,A$S=A$I*A$F,A$b=A$e*A$F,A$f=A$H*A$M,A$p=A$H*A$K,A$h=A$H*A$F,A$x=A$o[0],A$W=A$o[1],A$$=A$o[2];A$U[0]=(1-(A$Z+A$b))*A$x,A$U[1]=(A$D+A$h)*A$x,A$U[2]=(A$Q-A$p)*A$x,A$U[3]=0,A$U[4]=(A$D-A$h)*A$W,A$U[5]=(1-(A$L+A$b))*A$W,A$U[6]=(A$S+A$f)*A$W,A$U[7]=0,A$U[8]=(A$Q+A$p)*A$$,A$U[9]=(A$S-A$f)*A$$,A$U[10]=(1-(A$L+A$Z))*A$$,A$U[11]=0,A$U[12]=A$T[0],A$U[13]=A$T[1],A$U[14]=A$T[2],A$U[15]=1},A$W.createLookAt=function(A$C,A$R,A$j,A$w){var A$T=A$w.elements,A$G=A$W._tempVector0,A$o=A$W._tempVector1,A$U=A$W._tempVector2;A$oR.subtract(A$C,A$R,A$U),A$oR.normalize(A$U,A$U),A$oR.cross(A$j,A$U,A$G),A$oR.normalize(A$G,A$G),A$oR.cross(A$U,A$G,A$o),A$w.identity(),A$T[0]=A$G.x,A$T[4]=A$G.y,A$T[8]=A$G.z,A$T[1]=A$o.x,A$T[5]=A$o.y,A$T[9]=A$o.z,A$T[2]=A$U.x,A$T[6]=A$U.y,A$T[10]=A$U.z,A$T[12]=-A$oR.dot(A$G,A$C),A$T[13]=-A$oR.dot(A$o,A$C),A$T[14]=-A$oR.dot(A$U,A$C)},A$W.createPerspective=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$T.elements,A$o=1/Math.tan(A$C/2),A$U=1/(A$j-A$w);A$G[0]=A$o/A$R,A$G[5]=A$o,A$G[10]=(A$w+A$j)*A$U,A$G[11]=-1,A$G[14]=2*A$w*A$j*A$U,A$G[1]=A$G[2]=A$G[3]=A$G[4]=A$G[6]=A$G[7]=A$G[8]=A$G[9]=A$G[12]=A$G[13]=A$G[15]=0},A$W.createOrthoOffCenterRH=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U=A$o.elements,A$t=1/(A$C-A$R),A$I=1/(A$j-A$w),A$e=1/(A$T-A$G);A$U[1]=A$U[2]=A$U[3]=A$U[4]=A$U[6]=A$U[7]=A$U[8]=A$U[9]=A$U[11]=0,A$U[15]=1,A$U[0]=-2*A$t,A$U[5]=-2*A$I,A$U[10]=2*A$e,A$U[12]=(A$C+A$R)*A$t,A$U[13]=(A$w+A$j)*A$I,A$U[14]=(A$G+A$T)*A$e},A$W.translation=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;A$w[0]=A$w[5]=A$w[10]=A$w[15]=1,A$w[12]=A$j[0],A$w[13]=A$j[1],A$w[14]=A$j[2]},A$H(A$W,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new A$W},"_tempVector0",function(){return this._tempVector0=new A$oR},"_tempVector1",function(){return this._tempVector1=new A$oR},"_tempVector2",function(){return this._tempVector2=new A$oR},"_tempQuaternion",function(){return this._tempQuaternion=new A$jR},"DEFAULT",function(){return this.DEFAULT=new A$W},"ZERO",function(){return this.ZERO=new A$W(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),A$W}(),A$RR=(function(){function A$S(A$C,A$R){this.extents=null,this.transformation=null,this.extents=A$C,this.transformation=A$R}A$K(A$S,"laya.d3.math.OrientedBoundBox");var A$C=A$S.prototype;A$C.getCorners=function(A$C){var A$R=A$S._tempV30.elements,A$j=A$S._tempV31.elements,A$w=A$S._tempV32.elements,A$T=this.extents.elements;A$R[0]=A$T[0],A$R[1]=A$R[2]=0,A$j[1]=A$T[1],A$j[0]=A$j[2]=0,A$w[2]=A$T[2],A$w[0]=A$w[1]=0,A$oR.TransformNormal(A$S._tempV30,this.transformation,A$S._tempV30),A$oR.TransformNormal(A$S._tempV31,this.transformation,A$S._tempV31),A$oR.TransformNormal(A$S._tempV32,this.transformation,A$S._tempV32);var A$G=A$S._tempV33;this.transformation.getTranslationVector(A$G),A$C.length=8,A$oR.add(A$G,A$S._tempV30,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV32,A$C[0]),A$oR.add(A$G,A$S._tempV30,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV32,A$C[1]),A$oR.subtract(A$G,A$S._tempV30,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV32,A$C[2]),A$oR.subtract(A$G,A$S._tempV30,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV32,A$C[3]),A$oR.add(A$G,A$S._tempV30,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV32,A$C[4]),A$oR.add(A$G,A$S._tempV30,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV32,A$C[5]),A$oR.subtract(A$G,A$S._tempV30,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV32,A$C[6]),A$oR.subtract(A$G,A$S._tempV30,A$S._tempV34),A$oR.subtract(A$S._tempV34,A$S._tempV31,A$S._tempV34),A$oR.add(A$S._tempV34,A$S._tempV32,A$C[7])},A$C.transform=function(A$C){A$CR.multiply(this.transformation,A$C,this.transformation)},A$C.scale=function(A$C){A$oR.multiply(this.extents,A$C,this.extents)},A$C.translate=function(A$C){this.transformation.getTranslationVector(A$S._tempV30),A$oR.add(A$S._tempV30,A$C,A$S._tempV31),this.transformation.setTranslationVector(A$S._tempV31)},A$C.Size=function(A$C){A$oR.scale(this.extents,2,A$C)},A$C.getSize=function(A$C){var A$R=this.extents.elements;A$S._tempV30.x=A$R[0],A$S._tempV31.y=A$R[1],A$S._tempV32.z=A$R[2],A$oR.TransformNormal(A$S._tempV30,this.transformation,A$S._tempV30),A$oR.TransformNormal(A$S._tempV31,this.transformation,A$S._tempV31),A$oR.TransformNormal(A$S._tempV31,this.transformation,A$S._tempV32);var A$j=A$C.elements;A$j[0]=A$oR.scalarLength(A$S._tempV30),A$j[1]=A$oR.scalarLength(A$S._tempV31),A$j[2]=A$oR.scalarLength(A$S._tempV32)},A$C.getSizeSquared=function(A$C){var A$R=this.extents.elements;A$S._tempV30.x=A$R[0],A$S._tempV31.y=A$R[1],A$S._tempV32.z=A$R[2],A$oR.TransformNormal(A$S._tempV30,this.transformation,A$S._tempV30),A$oR.TransformNormal(A$S._tempV31,this.transformation,A$S._tempV31),A$oR.TransformNormal(A$S._tempV31,this.transformation,A$S._tempV32);var A$j=A$C.elements;A$j[0]=A$oR.scalarLengthSquared(A$S._tempV30),A$j[1]=A$oR.scalarLengthSquared(A$S._tempV31),A$j[2]=A$oR.scalarLengthSquared(A$S._tempV32)},A$C.getCenter=function(A$C){this.transformation.getTranslationVector(A$C)},A$C.containsPoint=function(A$C){var A$R=this.extents.elements,A$j=A$R[0],A$w=A$R[1],A$T=A$R[2];this.transformation.invert(A$S._tempM0),A$oR.transformCoordinate(A$C,A$S._tempM0,A$S._tempV30);var A$G=A$S._tempV30.elements,A$o=Math.abs(A$G[0]),A$U=Math.abs(A$G[1]),A$t=Math.abs(A$G[2]);return A$qC.nearEqual(A$o,A$j)&&A$qC.nearEqual(A$U,A$w)&&A$qC.nearEqual(A$t,A$T)?2:A$o<A$j&&A$U<A$w&&A$t<A$T?1:0},A$C.containsPoints=function(A$C){var A$R=this.extents.elements,A$j=A$R[0],A$w=A$R[1],A$T=A$R[2];this.transformation.invert(A$S._tempM0);for(var A$G=!0,A$o=!1,A$U=0;A$U<A$C.length;A$U++){A$oR.transformCoordinate(A$C[A$U],A$S._tempM0,A$S._tempV30);var A$t=A$S._tempV30.elements,A$I=Math.abs(A$t[0]),A$e=Math.abs(A$t[1]),A$H=Math.abs(A$t[2]);A$qC.nearEqual(A$I,A$j)&&A$qC.nearEqual(A$e,A$w)&&A$qC.nearEqual(A$H,A$T)&&(A$o=!0),A$I<A$j&&A$e<A$w&&A$H<A$T?A$o=!0:A$G=!1}return A$G?1:A$o?2:0},A$C.containsSphere=function(A$C,A$R){void 0===A$R&&(A$R=!1);var A$j=this.extents.elements,A$w=A$j[0],A$T=A$j[1],A$G=A$j[2],A$o=A$C.radius;this.transformation.invert(A$S._tempM0),A$oR.transformCoordinate(A$C.center,A$S._tempM0,A$S._tempV30);var A$U=NaN;if(A$U=A$R?A$o:(A$oR.scale(A$oR.UnitX,A$o,A$S._tempV31),A$oR.TransformNormal(A$S._tempV31,A$S._tempM0,A$S._tempV31),A$oR.scalarLength(A$S._tempV31)),A$oR.scale(this.extents,-1,A$S._tempV32),A$oR.Clamp(A$S._tempV30,A$S._tempV32,this.extents,A$S._tempV33),A$U*A$U<A$oR.distanceSquared(A$S._tempV30,A$S._tempV33))return 0;var A$t=A$S._tempV30.elements,A$I=A$t[0],A$e=A$t[1],A$H=A$t[2],A$M=A$S._tempV32.elements,A$K=A$M[0],A$F=A$M[1],A$L=A$M[2];return A$K+A$U<=A$I&&A$I<=A$w-A$U&&A$U<A$w-A$K&&A$F+A$U<=A$e&&A$e<=A$T-A$U&&A$U<A$T-A$F&&A$L+A$U<=A$H&&A$H<=A$G-A$U&&A$U<A$G-A$L?1:2},A$C.containsOrientedBoundBox=function(A$C){var A$R=0,A$j=0;A$C.getCorners(A$S._corners);var A$w=this.containsPoints(A$S._corners);if(0!=A$w)return A$w;var A$T=this.extents.elements;A$C.extents.cloneTo(A$S._tempV35);var A$G=A$S._tempV35.elements;A$S._getRows(this.transformation,A$S._rows1),A$S._getRows(A$C.transformation,A$S._rows2);var A$o=NaN;for(A$R=0;A$R<4;A$R++)for(A$j=0;A$j<4;A$j++)3==A$R||3==A$j?(A$S._tempM0.setElementByRowColumn(A$R,A$j,0),A$S._tempM1.setElementByRowColumn(A$R,A$j,0)):(A$o=A$oR.dot(A$S._rows1[A$R],A$S._rows2[A$j]),A$S._tempM0.setElementByRowColumn(A$R,A$j,A$o),A$S._tempM1.setElementByRowColumn(A$R,A$j,Math.abs(A$o)));A$C.getCenter(A$S._tempV34),this.getCenter(A$S._tempV36),A$oR.subtract(A$S._tempV34,A$S._tempV36,A$S._tempV30);var A$U=A$S._tempV31.elements;A$U[0]=A$oR.dot(A$S._tempV30,A$S._rows1[0]),A$U[1]=A$oR.dot(A$S._tempV30,A$S._rows1[1]),A$U[2]=A$oR.dot(A$S._tempV30,A$S._rows1[2]);var A$t=A$S._tempV32.elements,A$I=A$S._tempV33.elements;for(A$R=0;A$R<3;A$R++)if(A$t[0]=A$S._tempM1.getElementByRowColumn(A$R,0),A$t[1]=A$S._tempM1.getElementByRowColumn(A$R,1),A$t[2]=A$S._tempM1.getElementByRowColumn(A$R,2),A$T[A$R]+A$oR.dot(A$S._tempV35,A$S._tempV32)<Math.abs(A$U[A$R]))return 0;for(A$j=0;A$j<3;A$j++)if(A$t[0]=A$S._tempM1.getElementByRowColumn(0,A$j),A$t[1]=A$S._tempM1.getElementByRowColumn(1,A$j),A$t[2]=A$S._tempM1.getElementByRowColumn(2,A$j),A$I[0]=A$S._tempM0.getElementByRowColumn(0,A$j),A$I[1]=A$S._tempM0.getElementByRowColumn(1,A$j),A$I[2]=A$S._tempM0.getElementByRowColumn(2,A$j),A$oR.dot(this.extents,A$S._tempV32)+A$G[A$j]<Math.abs(A$oR.dot(A$S._tempV31,A$S._tempV33)))return 0;for(A$R=0;A$R<3;A$R++)for(A$j=0;A$j<3;A$j++){var A$e=(A$R+1)%3,A$H=(A$R+2)%3,A$M=(A$j+1)%3,A$K=(A$j+2)%3;if(A$T[A$e]*A$S._tempM1.getElementByRowColumn(A$H,A$j)+A$T[A$H]*A$S._tempM1.getElementByRowColumn(A$e,A$j)+(A$G[A$M]*A$S._tempM1.getElementByRowColumn(A$R,A$K)+A$G[A$K]*A$S._tempM1.getElementByRowColumn(A$R,A$M))<Math.abs(A$U[A$H]*A$S._tempM0.getElementByRowColumn(A$e,A$j)-A$U[A$e]*A$S._tempM0.getElementByRowColumn(A$H,A$j)))return 0}return 2},A$C.containsLine=function(A$C,A$R){A$S._corners[0]=A$C,A$S._corners[1]=A$R;var A$j=this.containsPoints(A$S._corners);if(0!=A$j)return A$j;var A$w=this.extents.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2];this.transformation.invert(A$S._tempM0),A$oR.transformCoordinate(A$C,A$S._tempM0,A$S._tempV30),A$oR.transformCoordinate(A$R,A$S._tempM0,A$S._tempV31),A$oR.add(A$S._tempV30,A$S._tempV31,A$S._tempV32),A$oR.scale(A$S._tempV32,.5,A$S._tempV32),A$oR.subtract(A$S._tempV30,A$S._tempV32,A$S._tempV33);var A$U=A$S._tempV33.elements,A$t=A$U[0],A$I=A$U[1],A$e=A$U[2],A$H=A$S._tempV34.elements,A$M=A$H[0]=Math.abs(A$U[0]),A$K=A$H[1]=Math.abs(A$U[1]),A$F=A$H[2]=Math.abs(A$U[2]),A$L=A$S._tempV32.elements,A$D=A$L[0],A$Q=A$L[1],A$Z=A$L[2];return Math.abs(A$D)>A$T+A$M?0:Math.abs(A$Q)>A$G+A$K?0:Math.abs(A$Z)>A$o+A$F?0:Math.abs(A$Q*A$e-A$Z*A$I)>A$G*A$F+A$o*A$K?0:Math.abs(A$D*A$e-A$Z*A$t)>A$T*A$F+A$o*A$M?0:Math.abs(A$D*A$I-A$Q*A$t)>A$T*A$K+A$G*A$M?0:2},A$C.containsBoundBox=function(A$C){var A$R=0,A$j=0,A$w=A$C.min,A$T=A$C.max;A$C.getCorners(A$S._corners);var A$G=this.containsPoints(A$S._corners);if(0!=A$G)return A$G;A$oR.subtract(A$T,A$w,A$S._tempV30),A$oR.scale(A$S._tempV30,.5,A$S._tempV30),A$oR.add(A$w,A$S._tempV30,A$S._tempV30),A$oR.subtract(A$T,A$S._tempV30,A$S._tempV31);var A$o=this.extents.elements,A$U=A$S._tempV31.elements;A$S._getRows(this.transformation,A$S._rows1),this.transformation.invert(A$S._tempM0);for(A$R=0;A$R<3;A$R++)for(A$j=0;A$j<3;A$j++)A$S._tempM1.setElementByRowColumn(A$R,A$j,Math.abs(A$S._tempM0.getElementByRowColumn(A$R,A$j)));this.getCenter(A$S._tempV35),A$oR.subtract(A$S._tempV30,A$S._tempV35,A$S._tempV32);var A$t=A$S._tempV31.elements;A$t[0]=A$oR.dot(A$S._tempV32,A$S._rows1[0]),A$t[1]=A$oR.dot(A$S._tempV32,A$S._rows1[1]),A$t[2]=A$oR.dot(A$S._tempV32,A$S._rows1[2]);var A$I=A$S._tempV33.elements,A$e=A$S._tempV34.elements;for(A$R=0;A$R<3;A$R++)if(A$I[0]=A$S._tempM1.getElementByRowColumn(A$R,0),A$I[1]=A$S._tempM1.getElementByRowColumn(A$R,1),A$I[2]=A$S._tempM1.getElementByRowColumn(A$R,2),A$o[A$R]+A$oR.dot(A$S._tempV31,A$S._tempV33)<Math.abs(A$t[A$R]))return 0;for(A$j=0;A$j<3;A$j++)if(A$I[0]=A$S._tempM1.getElementByRowColumn(0,A$j),A$I[1]=A$S._tempM1.getElementByRowColumn(1,A$j),A$I[2]=A$S._tempM1.getElementByRowColumn(2,A$j),A$e[0]=A$S._tempM0.getElementByRowColumn(0,A$j),A$e[1]=A$S._tempM0.getElementByRowColumn(1,A$j),A$e[2]=A$S._tempM0.getElementByRowColumn(2,A$j),A$oR.dot(this.extents,A$S._tempV33)+A$U[A$j]<Math.abs(A$oR.dot(A$S._tempV31,A$S._tempV34)))return 0;for(A$R=0;A$R<3;A$R++)for(A$j=0;A$j<3;A$j++){var A$H=(A$R+1)%3,A$M=(A$R+2)%3,A$K=(A$j+1)%3,A$F=(A$j+2)%3;if(A$o[A$H]*A$S._tempM1.getElementByRowColumn(A$M,A$j)+A$o[A$M]*A$S._tempM1.getElementByRowColumn(A$H,A$j)+(A$U[A$K]*A$S._tempM1.getElementByRowColumn(A$R,A$F)+A$U[A$F]*A$S._tempM1.getElementByRowColumn(A$R,A$K))<Math.abs(A$t[A$M]*A$S._tempM0.getElementByRowColumn(A$H,A$j)-A$t[A$H]*A$S._tempM0.getElementByRowColumn(A$M,A$j)))return 0}return 2},A$C.intersectsRay=function(A$C,A$R){A$oR.scale(this.extents,-1,A$S._tempV30),this.transformation.invert(A$S._tempM0),A$oR.TransformNormal(A$C.direction,A$S._tempM0,A$S._ray.direction),A$oR.transformCoordinate(A$C.origin,A$S._tempM0,A$S._ray.origin),A$S._boxBound1.min=A$S._tempV30,A$S._boxBound1.max=this.extents;var A$j=Collision.intersectsRayAndBoxRP(A$S._ray,A$S._boxBound1,A$R);return-1!==A$j&&A$oR.transformCoordinate(A$R,this.transformation,A$R),A$j},A$C._getLocalCorners=function(A$C){A$C.length=8;var A$R=this.extents.elements;A$S._tempV30.x=A$R[0],A$S._tempV31.y=A$R[1],A$S._tempV32.z=A$R[2],A$oR.add(A$S._tempV30,A$S._tempV31,A$S._tempV33),A$oR.add(A$S._tempV33,A$S._tempV32,A$C[0]),A$oR.add(A$S._tempV30,A$S._tempV31,A$S._tempV33),A$oR.subtract(A$S._tempV33,A$S._tempV32,A$C[1]),A$oR.subtract(A$S._tempV31,A$S._tempV30,A$S._tempV33),A$oR.subtract(A$S._tempV33,A$S._tempV30,A$C[2]),A$oR.subtract(A$S._tempV31,A$S._tempV30,A$S._tempV33),A$oR.add(A$S._tempV33,A$S._tempV32,A$C[3]),A$oR.subtract(A$S._tempV30,A$S._tempV31,A$S._tempV33),A$oR.add(A$S._tempV33,A$S._tempV32,A$C[4]),A$oR.subtract(A$S._tempV30,A$S._tempV31,A$S._tempV33),A$oR.subtract(A$S._tempV33,A$S._tempV32,A$C[5]),A$oR.scale(A$C[0],-1,A$C[6]),A$oR.subtract(A$S._tempV32,A$S._tempV30,A$S._tempV33),A$oR.subtract(A$S._tempV33,A$S._tempV31,A$C[7])},A$C.equals=function(A$C){return this.extents==A$C.extents&&this.transformation==A$C.transformation},A$C.cloneTo=function(A$C){var A$R=A$C;this.extents.cloneTo(A$R.extents),this.transformation.cloneTo(A$R.transformation)},A$S.createByBoundBox=function(A$C,A$R){var A$j=A$C.min,A$w=A$C.max;A$oR.subtract(A$w,A$j,A$S._tempV30),A$oR.scale(A$S._tempV30,.5,A$S._tempV30),A$oR.add(A$j,A$S._tempV30,A$S._tempV31),A$oR.subtract(A$w,A$S._tempV31,A$S._tempV32),A$CR.translation(A$S._tempV31,A$S._tempM0);var A$T=A$S._tempV32.clone(),A$G=A$S._tempM0.clone();A$R.extents=A$T,A$R.transformation=A$G},A$S.createByMinAndMaxVertex=function(A$C,A$R){return A$oR.subtract(A$R,A$C,A$S._tempV30),A$oR.scale(A$S._tempV30,.5,A$S._tempV30),A$oR.add(A$C,A$S._tempV30,A$S._tempV31),A$oR.subtract(A$R,A$S._tempV31,A$S._tempV32),A$CR.translation(A$S._tempV31,A$S._tempM0),new A$S(A$S._tempV32,A$S._tempM0)},A$S._getRows=function(A$C,A$R){A$R.length=3;var A$j=A$C.elements,A$w=A$R[0].elements;A$w[0]=A$j[0],A$w[1]=A$j[1],A$w[2]=A$j[2];var A$T=A$R[1].elements;A$T[0]=A$j[4],A$T[1]=A$j[5],A$T[2]=A$j[6];var A$G=A$R[2].elements;A$G[0]=A$j[8],A$G[1]=A$j[9],A$G[2]=A$j[10]},A$S.getObbtoObbMatrix4x4=function(A$C,A$R,A$j,A$w){var A$T=A$C.transformation,A$G=A$R.transformation;if(A$j){A$S._getRows(A$T,A$S._rows1),A$S._getRows(A$G,A$S._rows2);for(var A$o=0;A$o<3;A$o++)for(var A$U=0;A$U<3;A$U++)A$w.setElementByRowColumn(A$o,A$U,A$oR.dot(A$S._rows2[A$o],A$S._rows1[A$U]));A$R.getCenter(A$S._tempV30),A$C.getCenter(A$S._tempV31),A$oR.subtract(A$S._tempV30,A$S._tempV31,A$S._tempV32);var A$t=A$w.elements;A$t[12]=A$oR.dot(A$S._tempV32,A$S._rows1[0]),A$t[13]=A$oR.dot(A$S._tempV32,A$S._rows1[1]),A$t[14]=A$oR.dot(A$S._tempV32,A$S._rows1[2]),A$t[15]=1}else A$T.invert(A$S._tempM0),A$CR.multiply(A$G,A$S._tempM0,A$w)},A$S.merge=function(A$C,A$R,A$j){var A$w=A$C.extents,A$T=A$C.transformation;A$S.getObbtoObbMatrix4x4(A$C,A$R,A$j,A$S._tempM0),A$R._getLocalCorners(A$S._corners),A$oR.transformCoordinate(A$S._corners[0],A$S._tempM0,A$S._corners[0]),A$oR.transformCoordinate(A$S._corners[1],A$S._tempM0,A$S._corners[1]),A$oR.transformCoordinate(A$S._corners[2],A$S._tempM0,A$S._corners[2]),A$oR.transformCoordinate(A$S._corners[3],A$S._tempM0,A$S._corners[3]),A$oR.transformCoordinate(A$S._corners[4],A$S._tempM0,A$S._corners[4]),A$oR.transformCoordinate(A$S._corners[5],A$S._tempM0,A$S._corners[5]),A$oR.transformCoordinate(A$S._corners[6],A$S._tempM0,A$S._corners[6]),A$oR.transformCoordinate(A$S._corners[7],A$S._tempM0,A$S._corners[7]),A$oR.scale(A$w,-1,A$S._boxBound1.min),A$w.cloneTo(A$S._boxBound1.max),A$YC.createfromPoints(A$S._corners,A$S._boxBound2),A$YC.merge(A$S._boxBound2,A$S._boxBound1,A$S._boxBound3);var A$G=A$S._boxBound3.min,A$o=A$S._boxBound3.max;A$oR.subtract(A$o,A$G,A$S._tempV30),A$oR.scale(A$S._tempV30,.5,A$S._tempV30),A$oR.add(A$G,A$S._tempV30,A$S._tempV32),A$oR.subtract(A$o,A$S._tempV32,A$w),A$oR.transformCoordinate(A$S._tempV32,A$T,A$S._tempV33)},A$H(A$S,["_tempV30",function(){return this._tempV30=new A$oR},"_tempV31",function(){return this._tempV31=new A$oR},"_tempV32",function(){return this._tempV32=new A$oR},"_tempV33",function(){return this._tempV33=new A$oR},"_tempV34",function(){return this._tempV34=new A$oR},"_tempV35",function(){return this._tempV35=new A$oR},"_tempV36",function(){return this._tempV36=new A$oR},"_tempM0",function(){return this._tempM0=new A$CR},"_tempM1",function(){return this._tempM1=new A$CR},"_corners",function(){return this._corners=[new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR]},"_rows1",function(){return this._rows1=[new A$oR,new A$oR,new A$oR]},"_rows2",function(){return this._rows2=[new A$oR,new A$oR,new A$oR]},"_ray",function(){return this._ray=new A$TR(new A$oR,new A$oR)},"_boxBound1",function(){return this._boxBound1=new A$YC(new A$oR,new A$oR)},"_boxBound2",function(){return this._boxBound2=new A$YC(new A$oR,new A$oR)},"_boxBound3",function(){return this._boxBound3=new A$YC(new A$oR,new A$oR)}])}(),function(){function A$f(A$C,A$R){this.normal=null,this.distance=NaN,void 0===A$R&&(A$R=0),this.normal=A$C,this.distance=A$R}return A$K(A$f,"laya.d3.math.Plane"),A$f.prototype.normalize=function(){var A$C=this.normal.elements,A$R=A$C[0],A$j=A$C[1],A$w=A$C[2],A$T=1/Math.sqrt(A$R*A$R+A$j*A$j+A$w*A$w);A$C[0]=A$R*A$T,A$C[1]=A$j*A$T,A$C[2]=A$w*A$T,this.distance*=A$T},A$f.createPlaneBy3P=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$R.elements,A$G=A$j.elements,A$o=A$T[0]-A$w[0],A$U=A$T[1]-A$w[1],A$t=A$T[2]-A$w[2],A$I=A$G[0]-A$w[0],A$e=A$G[1]-A$w[1],A$H=A$G[2]-A$w[2],A$M=A$U*A$H-A$t*A$e,A$K=A$t*A$I-A$o*A$H,A$F=A$o*A$e-A$U*A$I,A$L=1/Math.sqrt(A$M*A$M+A$K*A$K+A$F*A$F),A$D=A$M*A$L,A$Q=A$K*A$L,A$Z=A$F*A$L,A$S=A$f._TEMPVec3.elements;A$S[0]=A$D,A$S[1]=A$Q,A$S[2]=A$Z;var A$b=-(A$D*A$w[0]+A$Q*A$w[1]+A$Z*A$w[2]);return new A$f(A$f._TEMPVec3,A$b)},A$f.PlaneIntersectionType_Back=0,A$f.PlaneIntersectionType_Front=1,A$f.PlaneIntersectionType_Intersecting=2,A$H(A$f,["_TEMPVec3",function(){return this._TEMPVec3=new A$oR}]),A$f}()),A$jR=function(){function A$T(A$C,A$R,A$j,A$w){this.elements=new Float32Array(4),void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=1),this.elements[0]=A$C,this.elements[1]=A$R,this.elements[2]=A$j,this.elements[3]=A$w}A$K(A$T,"laya.d3.math.Quaternion");var A$C=A$T.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.scaling=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements;A$j[0]=A$w[0]*A$C,A$j[1]=A$w[1]*A$C,A$j[2]=A$w[2]*A$C,A$j[3]=A$w[3]*A$C},A$C.normalize=function(A$C){var A$R=A$C.elements,A$j=this.elements,A$w=A$j[0],A$T=A$j[1],A$G=A$j[2],A$o=A$j[3],A$U=A$w*A$w+A$T*A$T+A$G*A$G+A$o*A$o;0<A$U&&(A$U=1/Math.sqrt(A$U),A$R[0]=A$w*A$U,A$R[1]=A$T*A$U,A$R[2]=A$G*A$U,A$R[3]=A$o*A$U)},A$C.length=function(){var A$C=this.elements,A$R=A$C[0],A$j=A$C[1],A$w=A$C[2],A$T=A$C[3];return Math.sqrt(A$R*A$R+A$j*A$j+A$w*A$w+A$T*A$T)},A$C.rotateX=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements;A$C*=.5;var A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=Math.sin(A$C),A$I=Math.cos(A$C);A$j[0]=A$T*A$I+A$U*A$t,A$j[1]=A$G*A$I+A$o*A$t,A$j[2]=A$o*A$I-A$G*A$t,A$j[3]=A$U*A$I-A$T*A$t},A$C.rotateY=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements;A$C*=.5;var A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=Math.sin(A$C),A$I=Math.cos(A$C);A$j[0]=A$T*A$I-A$o*A$t,A$j[1]=A$G*A$I+A$U*A$t,A$j[2]=A$o*A$I+A$T*A$t,A$j[3]=A$U*A$I-A$G*A$t},A$C.rotateZ=function(A$C,A$R){var A$j=A$R.elements,A$w=this.elements;A$C*=.5;var A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=Math.sin(A$C),A$I=Math.cos(A$C);A$j[0]=A$T*A$I+A$G*A$t,A$j[1]=A$G*A$I-A$T*A$t,A$j[2]=A$o*A$I+A$U*A$t,A$j[3]=A$U*A$I-A$o*A$t},A$C.getYawPitchRoll=function(A$C){A$oR.transformQuat(A$oR.ForwardRH,this,A$T.TEMPVector31),A$oR.transformQuat(A$oR.Up,this,A$T.TEMPVector32);var A$R=A$T.TEMPVector32.elements;A$T.angleTo(A$oR.ZERO,A$T.TEMPVector31,A$T.TEMPVector33);var A$j=A$T.TEMPVector33.elements;A$j[0]==Math.PI/2?(A$j[1]=A$T.arcTanAngle(A$R[2],A$R[0]),A$j[2]=0):A$j[0]==-Math.PI/2?(A$j[1]=A$T.arcTanAngle(-A$R[2],-A$R[0]),A$j[2]=0):(A$CR.createRotationY(-A$j[1],A$T.TEMPMatrix0),A$CR.createRotationX(-A$j[0],A$T.TEMPMatrix1),A$oR.transformCoordinate(A$T.TEMPVector32,A$T.TEMPMatrix0,A$T.TEMPVector32),A$oR.transformCoordinate(A$T.TEMPVector32,A$T.TEMPMatrix1,A$T.TEMPVector32),A$j[2]=A$T.arcTanAngle(A$R[1],-A$R[0])),A$j[1]<=-Math.PI&&(A$j[1]=Math.PI),A$j[2]<=-Math.PI&&(A$j[2]=Math.PI),A$j[1]>=Math.PI&&A$j[2]>=Math.PI&&(A$j[1]=0,A$j[2]=0,A$j[0]=Math.PI-A$j[0]);var A$w=A$C.elements;A$w[0]=A$j[1],A$w[1]=A$j[0],A$w[2]=A$j[2]},A$C.invert=function(A$C){var A$R=A$C.elements,A$j=this.elements,A$w=A$j[0],A$T=A$j[1],A$G=A$j[2],A$o=A$j[3],A$U=A$w*A$w+A$T*A$T+A$G*A$G+A$o*A$o,A$t=A$U?1/A$U:0;A$R[0]=-A$w*A$t,A$R[1]=-A$T*A$t,A$R[2]=-A$G*A$t,A$R[3]=A$o*A$t},A$C.identity=function(){var A$C=this.elements;A$C[0]=0,A$C[1]=0,A$C[2]=0,A$C[3]=1},A$C.fromArray=function(A$C,A$R){void 0===A$R&&(A$R=0),this.elements[0]=A$C[A$R+0],this.elements[1]=A$C[A$R+1],this.elements[2]=A$C[A$R+2],this.elements[3]=A$C[A$R+3]},A$C.cloneTo=function(A$C){var A$R,A$j,A$w;if((A$j=this.elements)!==(A$w=A$C.elements))for(A$R=0;A$R<4;++A$R)A$w[A$R]=A$j[A$R]},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$C.equals=function(A$C){var A$R=this.elements,A$j=A$C.elements;return A$qC.nearEqual(A$R[0],A$j[0])&&A$qC.nearEqual(A$R[1],A$j[1])&&A$qC.nearEqual(A$R[2],A$j[2])&&A$qC.nearEqual(A$R[3],A$j[3])},A$C.lengthSquared=function(){var A$C=this.elements[0],A$R=this.elements[1],A$j=this.elements[2],A$w=this.elements[3];return A$C*A$C+A$R*A$R+A$j*A$j+A$w*A$w},A$F(0,A$C,"x",function(){return this.elements[0]}),A$F(0,A$C,"y",function(){return this.elements[1]}),A$F(0,A$C,"z",function(){return this.elements[2]}),A$F(0,A$C,"w",function(){return this.elements[3]}),A$T.createFromYawPitchRoll=function(A$C,A$R,A$j,A$w){var A$T=.5*A$j,A$G=.5*A$R,A$o=.5*A$C,A$U=Math.sin(A$T),A$t=Math.cos(A$T),A$I=Math.sin(A$G),A$e=Math.cos(A$G),A$H=Math.sin(A$o),A$M=Math.cos(A$o),A$K=A$w.elements;A$K[0]=A$M*A$I*A$t+A$H*A$e*A$U,A$K[1]=A$H*A$e*A$t-A$M*A$I*A$U,A$K[2]=A$M*A$e*A$U-A$H*A$I*A$t,A$K[3]=A$M*A$e*A$t+A$H*A$I*A$U},A$T.multiply=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$R.elements,A$G=A$j.elements,A$o=A$w[0],A$U=A$w[1],A$t=A$w[2],A$I=A$w[3],A$e=A$T[0],A$H=A$T[1],A$M=A$T[2],A$K=A$T[3],A$F=A$U*A$M-A$t*A$H,A$L=A$t*A$e-A$o*A$M,A$D=A$o*A$H-A$U*A$e,A$Q=A$o*A$e+A$U*A$H+A$t*A$M;A$G[0]=A$o*A$K+A$e*A$I+A$F,A$G[1]=A$U*A$K+A$H*A$I+A$L,A$G[2]=A$t*A$K+A$M*A$I+A$D,A$G[3]=A$I*A$K-A$Q},A$T.arcTanAngle=function(A$C,A$R){return 0==A$C?1==A$R?Math.PI/2:-Math.PI/2:0<A$C?Math.atan(A$R/A$C):A$C<0?0<A$R?Math.atan(A$R/A$C)+Math.PI:Math.atan(A$R/A$C)-Math.PI:0},A$T.angleTo=function(A$C,A$R,A$j){A$oR.subtract(A$R,A$C,A$T.TEMPVector30),A$oR.normalize(A$T.TEMPVector30,A$T.TEMPVector30),A$j.elements[0]=Math.asin(A$T.TEMPVector30.y),A$j.elements[1]=A$T.arcTanAngle(-A$T.TEMPVector30.z,-A$T.TEMPVector30.x)},A$T.createFromAxisAngle=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements;A$R*=.5;var A$G=Math.sin(A$R);A$w[0]=A$G*A$T[0],A$w[1]=A$G*A$T[1],A$w[2]=A$G*A$T[2],A$w[3]=Math.cos(A$R)},A$T.createFromMatrix3x3=function(A$C,A$R){var A$j,A$w=A$R.elements,A$T=A$C.elements,A$G=A$T[0]+A$T[4]+A$T[8];if(0<A$G)A$j=Math.sqrt(A$G+1),A$w[3]=.5*A$j,A$j=.5/A$j,A$w[0]=(A$T[5]-A$T[7])*A$j,A$w[1]=(A$T[6]-A$T[2])*A$j,A$w[2]=(A$T[1]-A$T[3])*A$j;else{var A$o=0;A$T[4]>A$T[0]&&(A$o=1),A$T[8]>A$T[3*A$o+A$o]&&(A$o=2);var A$U=(A$o+1)%3,A$t=(A$o+2)%3;A$j=Math.sqrt(A$T[3*A$o+A$o]-A$T[3*A$U+A$U]-A$T[3*A$t+A$t]+1),A$w[A$o]=.5*A$j,A$j=.5/A$j,A$w[3]=(A$T[3*A$U+A$t]-A$T[3*A$t+A$U])*A$j,A$w[A$U]=(A$T[3*A$U+A$o]+A$T[3*A$o+A$U])*A$j,A$w[A$t]=(A$T[3*A$t+A$o]+A$T[3*A$o+A$t])*A$j}},A$T.createFromMatrix4x4=function(A$C,A$R){var A$j,A$w,A$T=A$C.elements,A$G=A$R.elements,A$o=A$T[0]+A$T[5]+A$T[10];0<A$o?(A$j=Math.sqrt(A$o+1),A$G[3]=.5*A$j,A$j=.5/A$j,A$G[0]=(A$T[6]-A$T[9])*A$j,A$G[1]=(A$T[8]-A$T[2])*A$j,A$G[2]=(A$T[1]-A$T[4])*A$j):A$T[0]>=A$T[5]&&A$T[0]>=A$T[10]?(A$w=.5/(A$j=Math.sqrt(1+A$T[0]-A$T[5]-A$T[10])),A$G[0]=.5*A$j,A$G[1]=(A$T[1]+A$T[4])*A$w,A$G[2]=(A$T[2]+A$T[8])*A$w,A$G[3]=(A$T[6]-A$T[9])*A$w):A$T[5]>A$T[10]?(A$w=.5/(A$j=Math.sqrt(1+A$T[5]-A$T[0]-A$T[10])),A$G[0]=(A$T[4]+A$T[1])*A$w,A$G[1]=.5*A$j,A$G[2]=(A$T[9]+A$T[6])*A$w,A$G[3]=(A$T[8]-A$T[2])*A$w):(A$w=.5/(A$j=Math.sqrt(1+A$T[10]-A$T[0]-A$T[5])),A$G[0]=(A$T[8]+A$T[2])*A$w,A$G[1]=(A$T[9]+A$T[6])*A$w,A$G[2]=.5*A$j,A$G[3]=(A$T[1]-A$T[4])*A$w)},A$T.slerp=function(A$C,A$R,A$j,A$w){var A$T,A$G,A$o,A$U,A$t,A$I=A$C.elements,A$e=A$R.elements,A$H=A$w.elements,A$M=A$I[0],A$K=A$I[1],A$F=A$I[2],A$L=A$I[3],A$D=A$e[0],A$Q=A$e[1],A$Z=A$e[2],A$S=A$e[3];return(A$G=A$M*A$D+A$K*A$Q+A$F*A$Z+A$L*A$S)<0&&(A$G=-A$G,A$D=-A$D,A$Q=-A$Q,A$Z=-A$Z,A$S=-A$S),A$t=1e-6<1-A$G?(A$T=Math.acos(A$G),A$o=Math.sin(A$T),A$U=Math.sin((1-A$j)*A$T)/A$o,Math.sin(A$j*A$T)/A$o):(A$U=1-A$j,A$j),A$H[0]=A$U*A$M+A$t*A$D,A$H[1]=A$U*A$K+A$t*A$Q,A$H[2]=A$U*A$F+A$t*A$Z,A$H[3]=A$U*A$L+A$t*A$S,A$H},A$T.lerp=function(A$C,A$R,A$j,A$w){var A$T=A$w.elements,A$G=A$C.elements,A$o=A$R.elements,A$U=A$G[0],A$t=A$G[1],A$I=A$G[2],A$e=A$G[3];A$T[0]=A$U+A$j*(A$o[0]-A$U),A$T[1]=A$t+A$j*(A$o[1]-A$t),A$T[2]=A$I+A$j*(A$o[2]-A$I),A$T[3]=A$e+A$j*(A$o[3]-A$e)},A$T.add=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]+A$G[0],A$w[1]=A$T[1]+A$G[1],A$w[2]=A$T[2]+A$G[2],A$w[3]=A$T[3]+A$G[3]},A$T.dot=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;return A$j[0]*A$w[0]+A$j[1]*A$w[1]+A$j[2]*A$w[2]+A$j[3]*A$w[3]},A$T.rotationLookAt=function(A$C,A$R,A$j){A$T.lookAt(A$oR.ZERO,A$C,A$R,A$j)},A$T.lookAt=function(A$C,A$R,A$j,A$w){A$vC.lookAt(A$C,A$R,A$j,A$T._tempMatrix3x3),A$T.rotationMatrix(A$T._tempMatrix3x3,A$w)},A$T.invert=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$C.lengthSquared();A$qC.isZero(A$T)||(A$T=1/A$T,A$w[0]=-A$j[0]*A$T,A$w[1]=-A$j[1]*A$T,A$w[2]=-A$j[2]*A$T,A$w[3]=A$j[3]*A$T)},A$T.rotationMatrix=function(A$C,A$R){var A$j=A$C.elements,A$w=A$j[0],A$T=A$j[1],A$G=A$j[2],A$o=A$j[3],A$U=A$j[4],A$t=A$j[5],A$I=A$j[6],A$e=A$j[7],A$H=A$j[8],A$M=A$R.elements,A$K=NaN,A$F=NaN,A$L=A$w+A$U+A$H;0<A$L?(A$K=Math.sqrt(A$L+1),A$M[3]=.5*A$K,A$K=.5/A$K,A$M[0]=(A$t-A$e)*A$K,A$M[1]=(A$I-A$G)*A$K,A$M[2]=(A$T-A$o)*A$K):A$U<=A$w&&A$H<=A$w?(A$F=.5/(A$K=Math.sqrt(1+A$w-A$U-A$H)),A$M[0]=.5*A$K,A$M[1]=(A$T+A$o)*A$F,A$M[2]=(A$G+A$I)*A$F,A$M[3]=(A$t-A$e)*A$F):A$H<A$U?(A$F=.5/(A$K=Math.sqrt(1+A$U-A$w-A$H)),A$M[0]=(A$o+A$T)*A$F,A$M[1]=.5*A$K,A$M[2]=(A$e+A$t)*A$F,A$M[3]=(A$I-A$G)*A$F):(A$F=.5/(A$K=Math.sqrt(1+A$H-A$w-A$U)),A$M[0]=(A$I+A$G)*A$F,A$M[1]=(A$e+A$t)*A$F,A$M[2]=.5*A$K,A$M[3]=(A$T-A$o)*A$F)},A$T.DEFAULT=new A$T,A$H(A$T,["TEMPVector30",function(){return this.TEMPVector30=new A$oR},"TEMPVector31",function(){return this.TEMPVector31=new A$oR},"TEMPVector32",function(){return this.TEMPVector32=new A$oR},"TEMPVector33",function(){return this.TEMPVector33=new A$oR},"TEMPMatrix0",function(){return this.TEMPMatrix0=new A$CR},"TEMPMatrix1",function(){return this.TEMPMatrix1=new A$CR},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new A$vC},"NAN",function(){return this.NAN=new A$T(NaN,NaN,NaN,NaN)}]),A$T}(),A$wR=function(){function A$C(A$C){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=A$C,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}A$K(A$C,"laya.d3.math.Rand");var A$R=A$C.prototype;return A$R.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},A$R.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},A$R.getSignedFloat=function(){return 2*this.getFloat()-1},A$F(0,A$R,"seed",function(){return this.seeds[0]},function(A$C){this.seeds[0]=A$C,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),A$C.getFloatFromInt=function(A$C){return 1/8388607*(8388607&A$C)},A$C.getByteFromInt=function(A$C){return(8388607&A$C)>>>15},A$C}(),A$TR=(function(){function A$T(A$C){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(A$C instanceof Array)||4!==A$C.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|A$C[0],this._state0L=0|A$C[1],this._state1U=0|A$C[2],this._state1L=0|A$C[3]}A$K(A$T,"laya.d3.math.RandX");var A$C=A$T.prototype;A$C.randomint=function(){var A$C=this._state0U,A$R=this._state0L,A$j=this._state1U,A$w=this._state1L,A$T=(A$w>>>0)+(A$R>>>0),A$G=A$j+A$C+(A$T/2>>>31)>>>0,A$o=A$T>>>0,A$U=0,A$t=0;A$U=(A$C^=A$U=A$C<<23|(-512&A$R)>>>9)^(this._state0U=A$j),A$t=(A$R^=A$t=A$R<<23)^(this._state0L=A$w);A$U^=A$C>>>18,A$t^=A$R>>>18|(262143&A$C)<<14;return A$U^=A$j>>>5,A$t^=A$w>>>5|(31&A$j)<<27,this._state1U=A$U,this._state1L=A$t,[A$G,A$o]},A$C.random=function(){var A$C=this.randomint(),A$R=A$C[0],A$j=1023<<20|A$R>>>12,A$w=0|(A$C[1]>>>12|(4095&A$R)<<20);return A$T._CONVERTION_BUFFER.setUint32(0,A$j,!1),A$T._CONVERTION_BUFFER.setUint32(4,A$w,!1),A$wR._CONVERTION_BUFFER.getFloat64(0,!1)-1},A$H(A$T,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new A$wR([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function A$C(A$C,A$R){this.origin=null,this.direction=null,this.origin=A$C,this.direction=A$R}return A$K(A$C,"laya.d3.math.Ray"),A$C}()),A$GR=function(){function A$C(A$C,A$R){this.elements=new Float32Array(2),void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0);var A$j=this.elements;A$j[0]=A$C,A$j[1]=A$R}A$K(A$C,"laya.d3.math.Vector2");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.fromArray=function(A$C,A$R){void 0===A$R&&(A$R=0),this.elements[0]=A$C[A$R+0],this.elements[1]=A$C[A$R+1]},A$R.cloneTo=function(A$C){var A$R=A$C.elements,A$j=this.elements;A$R[0]=A$j[0],A$R[1]=A$j[1]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"x",function(){return this.elements[0]},function(A$C){this.elements[0]=A$C}),A$F(0,A$R,"y",function(){return this.elements[1]},function(A$C){this.elements[1]=A$C}),A$C.scale=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements;A$w[0]=A$T[0]*A$R,A$w[1]=A$T[1]*A$R},A$H(A$C,["ZERO",function(){return this.ZERO=new A$C(0,0)},"ONE",function(){return this.ONE=new A$C(1,1)}]),A$C}(),A$oR=function(){function A$e(A$C,A$R,A$j){this.elements=new Float32Array(3),void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0);var A$w=this.elements;A$w[0]=A$C,A$w[1]=A$R,A$w[2]=A$j}A$K(A$e,"laya.d3.math.Vector3");var A$C=A$e.prototype;return A$f.imps(A$C,{"laya.d3.core.IClone":!0}),A$C.fromArray=function(A$C,A$R){void 0===A$R&&(A$R=0),this.elements[0]=A$C[A$R+0],this.elements[1]=A$C[A$R+1],this.elements[2]=A$C[A$R+2]},A$C.cloneTo=function(A$C){var A$R=A$C.elements,A$j=this.elements;A$R[0]=A$j[0],A$R[1]=A$j[1],A$R[2]=A$j[2]},A$C.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$C.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},A$C.reset=function(A$C,A$R,A$j){this.elements[0]=A$C,this.elements[1]=A$R,this.elements[2]=A$j},A$F(0,A$C,"x",function(){return this.elements[0]},function(A$C){this.elements[0]=A$C}),A$F(0,A$C,"y",function(){return this.elements[1]},function(A$C){this.elements[1]=A$C}),A$F(0,A$C,"z",function(){return this.elements[2]},function(A$C){this.elements[2]=A$C}),A$e.distanceSquared=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0]-A$w[0],A$G=A$j[1]-A$w[1],A$o=A$j[2]-A$w[2];return A$T*A$T+A$G*A$G+A$o*A$o},A$e.distance=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0]-A$w[0],A$G=A$j[1]-A$w[1],A$o=A$j[2]-A$w[2];return Math.sqrt(A$T*A$T+A$G*A$G+A$o*A$o)},A$e.min=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=Math.min(A$T[0],A$G[0]),A$w[1]=Math.min(A$T[1],A$G[1]),A$w[2]=Math.min(A$T[2],A$G[2])},A$e.max=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=Math.max(A$T[0],A$G[0]),A$w[1]=Math.max(A$T[1],A$G[1]),A$w[2]=Math.max(A$T[2],A$G[2])},A$e.transformQuat=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements,A$o=A$T[0],A$U=A$T[1],A$t=A$T[2],A$I=A$G[0],A$e=A$G[1],A$H=A$G[2],A$M=A$G[3],A$K=A$M*A$o+A$e*A$t-A$H*A$U,A$F=A$M*A$U+A$H*A$o-A$I*A$t,A$L=A$M*A$t+A$I*A$U-A$e*A$o,A$D=-A$I*A$o-A$e*A$U-A$H*A$t;A$w[0]=A$K*A$M+A$D*-A$I+A$F*-A$H-A$L*-A$e,A$w[1]=A$F*A$M+A$D*-A$e+A$L*-A$I-A$K*-A$H,A$w[2]=A$L*A$M+A$D*-A$H+A$K*-A$e-A$F*-A$I},A$e.scalarLength=function(A$C){var A$R=A$C.elements,A$j=A$R[0],A$w=A$R[1],A$T=A$R[2];return Math.sqrt(A$j*A$j+A$w*A$w+A$T*A$T)},A$e.scalarLengthSquared=function(A$C){var A$R=A$C.elements,A$j=A$R[0],A$w=A$R[1],A$T=A$R[2];return A$j*A$j+A$w*A$w+A$T*A$T},A$e.normalize=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0],A$G=A$j[1],A$o=A$j[2],A$U=A$T*A$T+A$G*A$G+A$o*A$o;0<A$U&&(A$U=1/Math.sqrt(A$U),A$w[0]=A$j[0]*A$U,A$w[1]=A$j[1]*A$U,A$w[2]=A$j[2]*A$U)},A$e.multiply=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]*A$G[0],A$w[1]=A$T[1]*A$G[1],A$w[2]=A$T[2]*A$G[2]},A$e.scale=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements;A$w[0]=A$T[0]*A$R,A$w[1]=A$T[1]*A$R,A$w[2]=A$T[2]*A$R},A$e.lerp=function(A$C,A$R,A$j,A$w){var A$T=A$w.elements,A$G=A$C.elements,A$o=A$R.elements,A$U=A$G[0],A$t=A$G[1],A$I=A$G[2];A$T[0]=A$U+A$j*(A$o[0]-A$U),A$T[1]=A$t+A$j*(A$o[1]-A$t),A$T[2]=A$I+A$j*(A$o[2]-A$I)},A$e.transformV3ToV3=function(A$C,A$R,A$j){var A$w=A$e._tempVector4;A$e.transformV3ToV4(A$C,A$R,A$w);var A$T=A$w.elements,A$G=A$j.elements;A$G[0]=A$T[0],A$G[1]=A$T[1],A$G[2]=A$T[2]},A$e.transformV3ToV4=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$R.elements,A$t=A$j.elements;A$t[0]=A$T*A$U[0]+A$G*A$U[4]+A$o*A$U[8]+A$U[12],A$t[1]=A$T*A$U[1]+A$G*A$U[5]+A$o*A$U[9]+A$U[13],A$t[2]=A$T*A$U[2]+A$G*A$U[6]+A$o*A$U[10]+A$U[14],A$t[3]=A$T*A$U[3]+A$G*A$U[7]+A$o*A$U[11]+A$U[15]},A$e.TransformNormal=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$R.elements,A$t=A$j.elements;A$t[0]=A$T*A$U[0]+A$G*A$U[4]+A$o*A$U[8],A$t[1]=A$T*A$U[1]+A$G*A$U[5]+A$o*A$U[9],A$t[2]=A$T*A$U[2]+A$G*A$U[6]+A$o*A$U[10]},A$e.transformCoordinate=function(A$C,A$R,A$j){var A$w=A$e._tempVector4.elements,A$T=A$C.elements,A$G=A$T[0],A$o=A$T[1],A$U=A$T[2],A$t=A$R.elements;A$w[0]=A$G*A$t[0]+A$o*A$t[4]+A$U*A$t[8]+A$t[12],A$w[1]=A$G*A$t[1]+A$o*A$t[5]+A$U*A$t[9]+A$t[13],A$w[2]=A$G*A$t[2]+A$o*A$t[6]+A$U*A$t[10]+A$t[14],A$w[3]=1/(A$G*A$t[3]+A$o*A$t[7]+A$U*A$t[11]+A$t[15]);var A$I=A$j.elements;A$I[0]=A$w[0]*A$w[3],A$I[1]=A$w[1]*A$w[3],A$I[2]=A$w[2]*A$w[3]},A$e.Clamp=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements,A$G=A$T[0],A$o=A$T[1],A$U=A$T[2],A$t=A$R.elements,A$I=A$t[0],A$e=A$t[1],A$H=A$t[2],A$M=A$j.elements,A$K=A$M[0],A$F=A$M[1],A$L=A$M[2],A$D=A$w.elements;A$G=(A$G=A$K<A$G?A$K:A$G)<A$I?A$I:A$G,A$o=(A$o=A$F<A$o?A$F:A$o)<A$e?A$e:A$o,A$U=(A$U=A$L<A$U?A$L:A$U)<A$H?A$H:A$U,A$D[0]=A$G,A$D[1]=A$o,A$D[2]=A$U},A$e.add=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]+A$G[0],A$w[1]=A$T[1]+A$G[1],A$w[2]=A$T[2]+A$G[2]},A$e.subtract=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]-A$G[0],A$w[1]=A$T[1]-A$G[1],A$w[2]=A$T[2]-A$G[2]},A$e.cross=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$R.elements,A$G=A$j.elements,A$o=A$w[0],A$U=A$w[1],A$t=A$w[2],A$I=A$T[0],A$e=A$T[1],A$H=A$T[2];A$G[0]=A$U*A$H-A$t*A$e,A$G[1]=A$t*A$I-A$o*A$H,A$G[2]=A$o*A$e-A$U*A$I},A$e.dot=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;return A$j[0]*A$w[0]+A$j[1]*A$w[1]+A$j[2]*A$w[2]},A$e.equals=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;return A$qC.nearEqual(Math.abs(A$j[0]),Math.abs(A$w[0]))&&A$qC.nearEqual(Math.abs(A$j[1]),Math.abs(A$w[1]))&&A$qC.nearEqual(Math.abs(A$j[2]),Math.abs(A$w[2]))},A$e.ZERO=new A$e(0,0,0),A$e.ONE=new A$e(1,1,1),A$e.NegativeUnitX=new A$e(-1,0,0),A$e.UnitX=new A$e(1,0,0),A$e.UnitY=new A$e(0,1,0),A$e.UnitZ=new A$e(0,0,1),A$e.ForwardRH=new A$e(0,0,-1),A$e.ForwardLH=new A$e(0,0,1),A$e.Up=new A$e(0,1,0),A$e.NAN=new A$e(NaN,NaN,NaN),A$H(A$e,["_tempVector4",function(){return this._tempVector4=new A$UR}]),A$e}(),A$UR=function(){function A$C(A$C,A$R,A$j,A$w){this.elements=new Float32Array(4),void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=0);var A$T=this.elements;A$T[0]=A$C,A$T[1]=A$R,A$T[2]=A$j,A$T[3]=A$w}A$K(A$C,"laya.d3.math.Vector4");var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R.fromArray=function(A$C,A$R){void 0===A$R&&(A$R=0),this.elements[0]=A$C[A$R+0],this.elements[1]=A$C[A$R+1],this.elements[2]=A$C[A$R+2],this.elements[3]=A$C[A$R+3]},A$R.cloneTo=function(A$C){var A$R=A$C.elements,A$j=this.elements;A$R[0]=A$j[0],A$R[1]=A$j[1],A$R[2]=A$j[2],A$R[3]=A$j[3]},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$R.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},A$R.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},A$F(0,A$R,"x",function(){return this.elements[0]},function(A$C){this.elements[0]=A$C}),A$F(0,A$R,"y",function(){return this.elements[1]},function(A$C){this.elements[1]=A$C}),A$F(0,A$R,"z",function(){return this.elements[2]},function(A$C){this.elements[2]=A$C}),A$F(0,A$R,"w",function(){return this.elements[3]},function(A$C){this.elements[3]=A$C}),A$C.lerp=function(A$C,A$R,A$j,A$w){var A$T=A$w.elements,A$G=A$C.elements,A$o=A$R.elements,A$U=A$G[0],A$t=A$G[1],A$I=A$G[2],A$e=A$G[3];A$T[0]=A$U+A$j*(A$o[0]-A$U),A$T[1]=A$t+A$j*(A$o[1]-A$t),A$T[2]=A$I+A$j*(A$o[2]-A$I),A$T[3]=A$e+A$j*(A$o[3]-A$e)},A$C.transformByM4x4=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$w[0],A$G=A$w[1],A$o=A$w[2],A$U=A$w[3],A$t=A$R.elements,A$I=A$j.elements;A$I[0]=A$T*A$t[0]+A$G*A$t[4]+A$o*A$t[8]+A$U*A$t[12],A$I[1]=A$T*A$t[1]+A$G*A$t[5]+A$o*A$t[9]+A$U*A$t[13],A$I[2]=A$T*A$t[2]+A$G*A$t[6]+A$o*A$t[10]+A$U*A$t[14],A$I[3]=A$T*A$t[3]+A$G*A$t[7]+A$o*A$t[11]+A$U*A$t[15]},A$C.equals=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;return A$qC.nearEqual(Math.abs(A$j[0]),Math.abs(A$w[0]))&&A$qC.nearEqual(Math.abs(A$j[1]),Math.abs(A$w[1]))&&A$qC.nearEqual(Math.abs(A$j[2]),Math.abs(A$w[2]))&&A$qC.nearEqual(Math.abs(A$j[3]),Math.abs(A$w[3]))},A$C.normalize=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$C.length();0<A$T&&(A$w[0]=A$j[0]*A$T,A$w[1]=A$j[1]*A$T,A$w[2]=A$j[2]*A$T,A$w[3]=A$j[3]*A$T)},A$C.add=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]+A$G[0],A$w[1]=A$T[1]+A$G[1],A$w[2]=A$T[2]+A$G[2],A$w[3]=A$T[3]+A$G[3]},A$C.subtract=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]-A$G[0],A$w[1]=A$T[1]-A$G[1],A$w[2]=A$T[2]-A$G[2],A$w[3]=A$T[3]-A$G[3]},A$C.multiply=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=A$T[0]*A$G[0],A$w[1]=A$T[1]*A$G[1],A$w[2]=A$T[2]*A$G[2],A$w[3]=A$T[3]*A$G[3]},A$C.scale=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements;A$w[0]=A$T[0]*A$R,A$w[1]=A$T[1]*A$R,A$w[2]=A$T[2]*A$R,A$w[3]=A$T[3]*A$R},A$C.Clamp=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements,A$G=A$T[0],A$o=A$T[1],A$U=A$T[2],A$t=A$T[3],A$I=A$R.elements,A$e=A$I[0],A$H=A$I[1],A$M=A$I[2],A$K=A$I[3],A$F=A$j.elements,A$L=A$F[0],A$D=A$F[1],A$Q=A$F[2],A$Z=A$F[3],A$S=A$w.elements;A$G=(A$G=A$L<A$G?A$L:A$G)<A$e?A$e:A$G,A$o=(A$o=A$D<A$o?A$D:A$o)<A$H?A$H:A$o,A$U=(A$U=A$Q<A$U?A$Q:A$U)<A$M?A$M:A$U,A$t=(A$t=A$Z<A$t?A$Z:A$t)<A$K?A$K:A$t,A$S[0]=A$G,A$S[1]=A$o,A$S[2]=A$U,A$S[3]=A$t},A$C.distanceSquared=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0]-A$w[0],A$G=A$j[1]-A$w[1],A$o=A$j[2]-A$w[2],A$U=A$j[3]-A$w[3];return A$T*A$T+A$G*A$G+A$o*A$o+A$U*A$U},A$C.distance=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements,A$T=A$j[0]-A$w[0],A$G=A$j[1]-A$w[1],A$o=A$j[2]-A$w[2],A$U=A$j[3]-A$w[3];return Math.sqrt(A$T*A$T+A$G*A$G+A$o*A$o+A$U*A$U)},A$C.dot=function(A$C,A$R){var A$j=A$C.elements,A$w=A$R.elements;return A$j[0]*A$w[0]+A$j[1]*A$w[1]+A$j[2]*A$w[2]+A$j[3]*A$w[3]},A$C.min=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=Math.min(A$T[0],A$G[0]),A$w[1]=Math.min(A$T[1],A$G[1]),A$w[2]=Math.min(A$T[2],A$G[2]),A$w[3]=Math.min(A$T[3],A$G[3])},A$C.max=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R.elements;A$w[0]=Math.max(A$T[0],A$G[0]),A$w[1]=Math.max(A$T[1],A$G[1]),A$w[2]=Math.max(A$T[2],A$G[2]),A$w[3]=Math.max(A$T[3],A$G[3])},A$H(A$C,["ZERO",function(){return this.ZERO=new A$C},"ONE",function(){return this.ONE=new A$C(1,1,1,1)},"UnitX",function(){return this.UnitX=new A$C(1,0,0,0)},"UnitY",function(){return this.UnitY=new A$C(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new A$C(0,0,1,0)},"UnitW",function(){return this.UnitW=new A$C(0,0,0,1)}]),A$C}(),A$tR=function(){function A$G(A$C,A$R,A$j,A$w){this.minDepth=0,this.maxDepth=1,this.x=A$C,this.y=A$R,this.width=A$j,this.height=A$w}A$K(A$G,"laya.d3.math.Viewport");var A$C=A$G.prototype;return A$C.project=function(A$C,A$R,A$j){A$oR.transformV3ToV3(A$C,A$R,A$j);var A$w=A$C.elements,A$T=A$R.elements,A$G=A$j.elements,A$o=A$w[0]*A$T[3]+A$w[1]*A$T[7]+A$w[2]*A$T[11]+A$T[15];1!==A$o&&(A$G[0]=A$G[0]/A$o,A$G[1]=A$G[1]/A$o,A$G[2]=A$G[2]/A$o),A$G[0]=.5*(A$G[0]+1)*this.width+this.x,A$G[1]=.5*(1-A$G[1])*this.height+this.y,A$G[2]=A$G[2]*(this.maxDepth-this.minDepth)+this.minDepth},A$C.unprojectFromMat=function(A$C,A$R,A$j){var A$w=A$C.elements,A$T=A$R.elements,A$G=A$j.elements;A$G[0]=(A$w[0]-this.x)/this.width*2-1,A$G[1]=-((A$w[1]-this.y)/this.height*2-1);var A$o=(this.maxDepth-this.minDepth)/2;A$G[2]=(A$w[2]-this.minDepth-A$o)/A$o;var A$U=A$G[0]*A$T[3]+A$G[1]*A$T[7]+A$G[2]*A$T[11]+A$T[15];A$oR.transformV3ToV3(A$j,A$R,A$j),1!==A$U&&(A$G[0]=A$G[0]/A$U,A$G[1]=A$G[1]/A$U,A$G[2]=A$G[2]/A$U)},A$C.unprojectFromWVP=function(A$C,A$R,A$j,A$w,A$T){A$CR.multiply(A$R,A$j,A$G._tempMatrix4x4),A$w&&A$CR.multiply(A$G._tempMatrix4x4,A$w,A$G._tempMatrix4x4),A$G._tempMatrix4x4.invert(A$G._tempMatrix4x4),this.unprojectFromMat(A$C,A$G._tempMatrix4x4,A$T)},A$H(A$G,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new A$CR}]),A$G}(),A$IR=function(){function A$r(A$C){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=A$C,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}A$K(A$r,"laya.d3.resource.models.SubMesh");var A$C=A$r.prototype;return A$f.imps(A$C,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),A$C._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),0===A$C?this._vertexBuffer:null},A$C._getIndexBuffer=function(){return this._indexBuffer},A$C._getStaticBatchBakedVertexs=function(A$C,A$R){var A$j,A$w,A$T=this._vertexBuffer,A$G=A$T.vertexDeclaration,A$o=A$G.getVertexElementByUsage(0).offset/4,A$U=A$G.getVertexElementByUsage(3).offset/4,A$t=A$R.meshRender.lightmapScaleOffset,A$I=0,A$e=0,A$H=0,A$M=0,A$K=0,A$F=0;if(A$t)if(A$w=A$G.getVertexElementByUsage(15))A$H=A$G.vertexStride/4,A$j=0<this._vertexCount?A$T.getData().slice(this._vertexStart*A$H,(this._vertexStart+this._vertexCount)*A$H):A$T.getData().slice(),A$M=A$w.offset/4;else{A$H=(A$F=A$G.vertexStride/4)+2,A$j=this._vertexCount?new Float32Array(this._vertexCount*(A$T.vertexDeclaration.vertexStride/4+2)):new Float32Array(A$T.vertexCount*(A$T.vertexDeclaration.vertexStride/4+2)),A$M=(A$K=A$G.getVertexElementByUsage(2).offset/4)+2;var A$L=A$T.getData();for(A$I=0,A$e=A$L.length/A$F;A$I<A$e;A$I++){var A$D=0;A$D=0<this._vertexCount?(this._vertexStart+A$I)*A$F:A$I*A$F;var A$Q=A$I*A$H,A$Z=0;for(A$Z=0;A$Z<A$M;A$Z++)A$j[A$Q+A$Z]=A$L[A$D+A$Z];for(A$Z=A$M;A$Z<A$F;A$Z++)A$j[A$Q+A$Z+2]=A$L[A$D+A$Z]}}else A$H=A$G.vertexStride/4,A$j=this._vertexCount?A$T.getData().slice(this._vertexStart*A$H,(this._vertexStart+this._vertexCount)*A$H):A$T.getData().slice();if(A$C){var A$S=A$C.worldMatrix,A$b=A$r._tempMatrix4x40;A$S.invert(A$b);var A$f=A$r._tempMatrix4x41,A$p=A$R.transform.worldMatrix;A$CR.multiply(A$b,A$p,A$f)}else A$f=A$R.transform.worldMatrix;var A$h=A$r._tempQuaternion0;for(A$f.decomposeTransRotScale(A$r._tempVector30,A$h,A$r._tempVector31),A$I=0,A$e=A$j.length/A$H;A$I<A$e;A$I++){var A$x=A$I*A$H+A$o,A$W=A$I*A$H+A$U;if(A$DR.transformVector3ArrayToVector3ArrayCoordinate(A$j,A$x,A$f,A$j,A$x),A$DR.transformVector3ArrayByQuat(A$j,A$W,A$h,A$j,A$W),A$t){var A$$=A$I*A$H+A$M;if(A$w)A$DR.transformLightingMapTexcoordByUV1Array(A$j,A$$,A$t,A$j,A$$);else{var A$A=A$I*A$F+A$K;A$DR.transformLightingMapTexcoordByUV0Array(A$L,A$A,A$t,A$j,A$$)}}}return A$j},A$C._getVertexBuffers=function(){return null},A$C._beforeRender=function(A$C){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},A$C._render=function(A$C){var A$R,A$j=0,A$w=A$C.renderElement;if(1<this._indexCount){var A$T=this._boneIndicesList.length;if(1<A$T){for(var A$G=0;A$G<A$T;A$G++)(A$R=A$w._skinAnimationDatas||this._skinAnimationDatas)&&(A$w._shaderValue.setValue(0,A$R[A$G]),A$C._shader.uploadRenderElementUniforms(A$w._shaderValue.data)),A$E.mainContext.drawElements(4,this._subIndexBufferCount[A$G],5123,2*this._subIndexBufferStart[A$G]);A$x.drawCall+=A$T}else(A$R=A$w._skinAnimationDatas||this._skinAnimationDatas)&&(A$w._shaderValue.setValue(0,A$R[0]),A$C._shader.uploadRenderElementUniforms(A$w._shaderValue.data)),A$E.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),A$x.drawCall++;A$j=this._indexCount}else A$j=this._indexBuffer.indexCount,(A$R=A$w._skinAnimationDatas||this._skinAnimationDatas)&&(A$w._shaderValue.setValue(0,A$R[0]),A$C._shader.uploadRenderElementUniforms(A$w._shaderValue.data)),A$E.mainContext.drawElements(4,A$j,5123,0),A$x.drawCall++;A$x.trianglesFaces+=A$j/3},A$C.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},A$C.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},A$F(0,A$C,"_vertexBufferCount",function(){return 1}),A$F(0,A$C,"triangleCount",function(){return this._indexBuffer.indexCount/3}),A$H(A$r,["_tempVector30",function(){return this._tempVector30=new A$oR},"_tempVector31",function(){return this._tempVector31=new A$oR},"_tempQuaternion0",function(){return this._tempQuaternion0=new A$jR},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new A$CR},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new A$CR}]),A$r}(),A$eR=function(){function A$C(A$C){this.defineCounter=0,this.defines=null,A$C?(this.defineCounter=A$C.defineCounter,this.defines=A$C.defines.slice()):(this.defineCounter=0,this.defines=[])}return A$K(A$C,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),A$C.prototype.registerDefine=function(A$C){var A$R=Math.pow(2,this.defineCounter++);return this.defines[A$R]=A$C,A$R},A$C}(),A$HR=function(){function A$C(){}return A$K(A$C,"laya.d3.shader.ShaderInit3D"),A$C.__init__=function(){var A$C,A$R;A$xR._globalRegDefine("HIGHPRECISION",A$xR.SHADERDEFINE_HIGHPRECISION),A$xR._globalRegDefine("FOG",A$xR.SHADERDEFINE_FOG),A$xR._globalRegDefine("DIRECTIONLIGHT",A$xR.SHADERDEFINE_DIRECTIONLIGHT),A$xR._globalRegDefine("POINTLIGHT",A$xR.SHADERDEFINE_POINTLIGHT),A$xR._globalRegDefine("SPOTLIGHT",A$xR.SHADERDEFINE_SPOTLIGHT),A$xR._globalRegDefine("UV",A$xR.SHADERDEFINE_UV0),A$xR._globalRegDefine("COLOR",A$xR.SHADERDEFINE_COLOR),A$xR._globalRegDefine("UV1",A$xR.SHADERDEFINE_UV1),A$xR._globalRegDefine("CASTSHADOW",A$KR.SHADERDEFINE_CAST_SHADOW),A$xR._globalRegDefine("SHADOWMAP_PSSM1",A$KR.SHADERDEFINE_SHADOW_PSSM1),A$xR._globalRegDefine("SHADOWMAP_PSSM2",A$KR.SHADERDEFINE_SHADOW_PSSM2),A$xR._globalRegDefine("SHADOWMAP_PSSM3",A$KR.SHADERDEFINE_SHADOW_PSSM3),A$xR._globalRegDefine("SHADOWMAP_PCF_NO",A$KR.SHADERDEFINE_SHADOW_PCF_NO),A$xR._globalRegDefine("SHADOWMAP_PCF1",A$KR.SHADERDEFINE_SHADOW_PCF1),A$xR._globalRegDefine("SHADOWMAP_PCF2",A$KR.SHADERDEFINE_SHADOW_PCF2),A$xR._globalRegDefine("SHADOWMAP_PCF3",A$KR.SHADERDEFINE_SHADOW_PCF3),A$xR._globalRegDefine("DEPTHFOG",A$xR.SAHDERDEFINE_DEPTHFOG),A$yR.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),A$yR.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),A$C={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},A$R={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var A$j=A$yR.nameKey.add("SIMPLE");shaderCompile=A$xR.add(A$j,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',A$C,A$R),A$mR.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),A$mR.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),A$mR.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),A$mR.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),A$mR.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),A$mR.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),A$mR.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),A$mR.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),A$mR.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},A$C}(),A$MR=function(){function A$C(){this._data=null,this._data=[]}A$K(A$C,"laya.d3.shader.ValusArray");var A$R=A$C.prototype;return A$R.setValue=function(A$C,A$R){this._data[A$C]=A$R},A$F(0,A$R,"data",function(){return this._data}),A$C}(),A$KR=function(){function A$C(){}return A$C.SHADERDEFINE_RECEIVE_SHADOW=1,A$C.SHADERDEFINE_CAST_SHADOW=512,A$C.SHADERDEFINE_SHADOW_PSSM1=1024,A$C.SHADERDEFINE_SHADOW_PSSM2=2048,A$C.SHADERDEFINE_SHADOW_PSSM3=4096,A$C.SHADERDEFINE_SHADOW_PCF_NO=8192,A$C.SHADERDEFINE_SHADOW_PCF1=16384,A$C.SHADERDEFINE_SHADOW_PCF2=32768,A$C.SHADERDEFINE_SHADOW_PCF3=65536,A$C.MAX_PSSM_COUNT=3,A$C}(),A$FR=function(){function A$c(){}return A$K(A$c,"laya.d3.utils.Picker"),A$c.calculateCursorRay=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$C.elements[0],A$U=A$C.elements[1],A$t=A$c._tempVector30,A$I=A$t.elements;A$I[0]=A$o,A$I[1]=A$U,A$I[2]=A$R.minDepth;var A$e=A$c._tempVector31,A$H=A$e.elements;A$H[0]=A$o,A$H[1]=A$U,A$H[2]=A$R.maxDepth;var A$M=A$G.origin,A$K=A$c._tempVector32;A$R.unprojectFromWVP(A$t,A$j,A$w,A$T,A$M),A$R.unprojectFromWVP(A$e,A$j,A$w,A$T,A$K);var A$F=A$G.direction.elements;A$F[0]=A$K.x-A$M.x,A$F[1]=A$K.y-A$M.y,A$F[2]=A$K.z-A$M.z,A$oR.normalize(A$G.direction,A$G.direction)},A$c.rayIntersectsPositionsAndIndices=function(A$C,A$R,A$j,A$w,A$T){for(var A$G=A$j.vertexStride/4,A$o=A$j.getVertexElementByUsage(0).offset/4,A$U=Number.MAX_VALUE,A$t=-1,A$I=-1,A$e=-1,A$H=0;A$H<A$w.length;A$H+=3){var A$M=A$c._tempVector35,A$K=A$M.elements,A$F=A$w[A$H]*A$G,A$L=A$F+A$o;A$K[0]=A$R[A$L],A$K[1]=A$R[1+A$L],A$K[2]=A$R[2+A$L];var A$D=A$c._tempVector36,A$Q=A$D.elements,A$Z=A$w[A$H+1]*A$G,A$S=A$Z+A$o;A$Q[0]=A$R[A$S],A$Q[1]=A$R[1+A$S],A$Q[2]=A$R[2+A$S];var A$b=A$c._tempVector37,A$f=A$b.elements,A$p=A$w[A$H+2]*A$G,A$h=A$p+A$o;A$f[0]=A$R[A$h],A$f[1]=A$R[1+A$h],A$f[2]=A$R[2+A$h];var A$x=laya.d3.utils.Picker.rayIntersectsTriangle(A$C,A$M,A$D,A$b);!isNaN(A$x)&&A$x<A$U&&(A$U=A$x,A$t=A$F,A$I=A$Z,A$e=A$p)}if(A$U===Number.MAX_VALUE)return A$T.position.toDefault(),A$T.distance=Number.MAX_VALUE,A$T.trianglePositions[0].toDefault(),A$T.trianglePositions[1].toDefault(),A$T.trianglePositions[2].toDefault(),A$T.triangleNormals[0].toDefault(),A$T.triangleNormals[1].toDefault(),A$T.triangleNormals[2].toDefault(),!1;A$T.distance=A$U,A$oR.scale(A$C.direction,A$U,A$T.position),A$oR.add(A$C.origin,A$T.position,A$T.position);var A$W=A$T.trianglePositions,A$$=A$W[0],A$A=A$W[1],A$r=A$W[2],A$E=A$$.elements,A$P=A$A.elements,A$J=A$r.elements,A$N=A$t+A$o;A$E[0]=A$R[A$N],A$E[1]=A$R[A$N+1],A$E[2]=A$R[A$N+2];var A$a=A$I+A$o;A$P[0]=A$R[A$a],A$P[1]=A$R[A$a+1],A$P[2]=A$R[A$a+2];var A$n=A$e+A$o;A$J[0]=A$R[A$n],A$J[1]=A$R[A$n+1],A$J[2]=A$R[A$n+2];var A$y=A$j.getVertexElementByUsage(3);if(A$y){var A$m=A$y.offset/4,A$k=A$T.triangleNormals,A$V=A$k[0],A$z=A$k[1],A$l=A$k[2],A$g=A$V.elements,A$B=A$z.elements,A$i=A$l.elements,A$_=A$t+A$m;A$g[0]=A$R[A$_],A$g[1]=A$R[A$_+1],A$g[2]=A$R[A$_+2];var A$u=A$I+A$m;A$B[0]=A$R[A$u],A$B[1]=A$R[A$u+1],A$B[2]=A$R[A$u+2];var A$s=A$e+A$m;A$i[0]=A$R[A$s],A$i[1]=A$R[A$s+1],A$i[2]=A$R[A$s+2]}return!0},A$c.rayIntersectsTriangle=function(A$C,A$R,A$j,A$w){var A$T=A$c._tempVector30,A$G=A$c._tempVector31;A$oR.subtract(A$j,A$R,A$T),A$oR.subtract(A$w,A$R,A$G);var A$o,A$U=A$c._tempVector32;if(A$oR.cross(A$C.direction,A$G,A$U),(A$o=A$oR.dot(A$T,A$U))>-Number.MIN_VALUE&&A$o<Number.MIN_VALUE)return Number.NaN;var A$t,A$I=1/A$o,A$e=A$c._tempVector33;if(A$oR.subtract(A$C.origin,A$R,A$e),A$t=A$oR.dot(A$e,A$U),(A$t*=A$I)<0||1<A$t)return Number.NaN;var A$H,A$M,A$K=A$c._tempVector34;return A$oR.cross(A$e,A$T,A$K),A$H=A$oR.dot(A$C.direction,A$K),(A$H*=A$I)<0||1<A$t+A$H?Number.NaN:(A$M=A$oR.dot(A$G,A$K),(A$M*=A$I)<0?Number.NaN:A$M)},A$H(A$c,["_tempVector30",function(){return this._tempVector30=new A$oR},"_tempVector31",function(){return this._tempVector31=new A$oR},"_tempVector32",function(){return this._tempVector32=new A$oR},"_tempVector33",function(){return this._tempVector33=new A$oR},"_tempVector34",function(){return this._tempVector34=new A$oR},"_tempVector35",function(){return this._tempVector35=new A$oR},"_tempVector36",function(){return this._tempVector36=new A$oR},"_tempVector37",function(){return this._tempVector37=new A$oR}]),A$c}(),A$LR=(function(){function A$C(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new A$oR,new A$oR,new A$oR],this.trianglePositions.length=3,this.triangleNormals=[new A$oR,new A$oR,new A$oR],this.triangleNormals.length=3,this.position=new A$oR}A$K(A$C,"laya.d3.utils.RaycastHit"),A$C.prototype.cloneTo=function(A$C){A$C.distance=this.distance,this.trianglePositions[0].cloneTo(A$C.trianglePositions[0]),this.trianglePositions[1].cloneTo(A$C.trianglePositions[1]),this.trianglePositions[2].cloneTo(A$C.trianglePositions[2]),this.triangleNormals[0].cloneTo(A$C.triangleNormals[0]),this.triangleNormals[1].cloneTo(A$C.triangleNormals[1]),this.triangleNormals[2].cloneTo(A$C.triangleNormals[2]),this.position.cloneTo(A$C.position),A$C.sprite3D=this.sprite3D}}(),function(){function A$C(A$C,A$R){this._width=0,this._height=0,this._width=A$C,this._height=A$R}A$K(A$C,"laya.d3.utils.Size");var A$R=A$C.prototype;return A$F(0,A$R,"width",function(){return-1===this._width?A$X.clientWidth:this._width}),A$F(0,A$R,"height",function(){return-1===this._height?A$X.clientHeight:this._height}),A$F(1,A$C,"fullScreen",function(){return new A$C(-1,-1)}),A$C}()),A$DR=function(){function A$N(){}return A$K(A$N,"laya.d3.utils.Utils3D"),A$N._rotationTransformScaleSkinAnimation=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H){var A$M,A$K,A$F,A$L,A$D,A$Q=A$N._tempArray16_0,A$Z=A$N._tempArray16_1,A$S=A$N._tempArray16_2,A$b=A$w+A$w,A$f=A$T+A$T,A$p=A$G+A$G,A$h=A$w*A$b,A$x=A$T*A$b,A$W=A$T*A$f,A$$=A$G*A$b,A$A=A$G*A$f,A$r=A$G*A$p,A$E=A$o*A$b,A$P=A$o*A$f,A$J=A$o*A$p;for(A$Q[15]=1,A$Q[0]=1-A$W-A$r,A$Q[1]=A$x+A$J,A$Q[2]=A$$-A$P,A$Q[4]=A$x-A$J,A$Q[5]=1-A$h-A$r,A$Q[6]=A$A+A$E,A$Q[8]=A$$+A$P,A$Q[9]=A$A-A$E,A$Q[10]=1-A$h-A$W,A$Z[15]=1,A$Z[0]=A$U,A$Z[5]=A$t,A$Z[10]=A$I,A$M=0;A$M<4;A$M++)A$K=A$Q[A$M],A$F=A$Q[A$M+4],A$L=A$Q[A$M+8],A$D=A$Q[A$M+12],A$S[A$M]=A$K,A$S[A$M+4]=A$F,A$S[A$M+8]=A$L,A$S[A$M+12]=A$K*A$C+A$F*A$R+A$L*A$j+A$D;for(A$M=0;A$M<4;A$M++)A$K=A$S[A$M],A$F=A$S[A$M+4],A$L=A$S[A$M+8],A$D=A$S[A$M+12],A$e[A$M+A$H]=A$K*A$Z[0]+A$F*A$Z[1]+A$L*A$Z[2]+A$D*A$Z[3],A$e[A$M+A$H+4]=A$K*A$Z[4]+A$F*A$Z[5]+A$L*A$Z[6]+A$D*A$Z[7],A$e[A$M+A$H+8]=A$K*A$Z[8]+A$F*A$Z[9]+A$L*A$Z[10]+A$D*A$Z[11],A$e[A$M+A$H+12]=A$K*A$Z[12]+A$F*A$Z[13]+A$L*A$Z[14]+A$D*A$Z[15]},A$N._createNodeByJson=function(A$C,A$R,A$j,A$w){if(!A$j)switch(A$R.type){case"Sprite3D":A$j=new A$nR;break;case"MeshSprite3D":A$j=new A$cR;break;case"SkinnedMeshSprite3D":A$j=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":A$j=new ShuriKenParticle3D;break;case"TrailSprite3D":A$j=new TrailSprite3D;break;case"Terrain":A$j=new Terrain;break;case"Camera":A$j=new A$sR;break;case"DirectionLight":A$j=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var A$T=A$R.props;if(A$T)for(var A$G in A$T)A$j[A$G]=A$T[A$G];var A$o=A$R.customProps;A$o&&(A$j instanceof laya.d3.core.Sprite3D?(A$j._parseBaseCustomProps(A$o),A$j._parseCustomProps(A$C,A$w,A$o,A$R),A$j._parseCustomComponent(A$C,A$w,A$R.components)):A$j._parseCustomProps(A$C,A$w,A$o,A$R));var A$U=A$R.child;if(A$U)for(var A$t=0,A$I=A$U.length;A$t<A$I;A$t++){var A$e=A$N._createNodeByJson(A$C,A$U[A$t],null,A$w);A$j.addChild(A$e)}return A$j},A$N._computeBoneAndAnimationDatasByBindPoseMatrxix=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U,A$t=0,A$I=0,A$e=A$C.length;for(A$o=0;A$o<A$e;A$t+=A$C[A$o].keyframeWidth,A$I+=16,A$o++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(A$R[A$t+0],A$R[A$t+1],A$R[A$t+2],A$R[A$t+3],A$R[A$t+4],A$R[A$t+5],A$R[A$t+6],A$R[A$t+7],A$R[A$t+8],A$R[A$t+9],A$w,A$I),0!=A$o&&(A$U=16*A$C[A$o].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(A$w,A$U,A$w,A$I,A$w,A$I));var A$H=A$j.length;for(A$o=0;A$o<A$H;A$o++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(A$w,16*A$G[A$o],A$j[A$o],A$T,16*A$o)},A$N._computeAnimationDatasByArrayAndMatrixFast=function(A$C,A$R,A$j,A$w){for(var A$T=0,A$G=A$C.length;A$T<A$G;A$T++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(A$R,16*A$w[A$T],A$C[A$T],A$j,16*A$T)},A$N._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o,A$U=0,A$t=0,A$I=A$C.length;for(A$G=0;A$G<A$I;A$U+=A$C[A$G].keyframeWidth,A$t+=16,A$G++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(A$R[A$U+7],A$R[A$U+8],A$R[A$U+9],A$R[A$U+3],A$R[A$U+4],A$R[A$U+5],A$R[A$U+6],A$R[A$U+0],A$R[A$U+1],A$R[A$U+2],A$w,A$t),0!=A$G&&(A$o=16*A$C[A$G].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(A$w,A$o,A$w,A$t,A$w,A$t));var A$e=A$j.length;for(A$G=0;A$G<A$e;A$G++){var A$H=16*A$G;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(A$w,A$H,A$j[A$G],A$T,A$H)}},A$N._computeAnimationDatasByArrayAndMatrixFastOld=function(A$C,A$R,A$j){for(var A$w=A$C.length,A$T=0;A$T<A$w;A$T++){var A$G=16*A$T;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(A$R,A$G,A$C[A$T],A$j,A$G)}},A$N._computeRootAnimationData=function(A$C,A$R,A$j){for(var A$w=0,A$T=0,A$G=0,A$o=A$C.length;A$w<A$o;A$T+=A$C[A$w].keyframeWidth,A$G+=16,A$w++)laya.d3.utils.Utils3D.createAffineTransformationArray(A$R[A$T+0],A$R[A$T+1],A$R[A$T+2],A$R[A$T+3],A$R[A$T+4],A$R[A$T+5],A$R[A$T+6],A$R[A$T+7],A$R[A$T+8],A$R[A$T+9],A$j,A$G)},A$N.transformVector3ArrayByQuat=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$j.elements,A$o=A$C[A$R],A$U=A$C[A$R+1],A$t=A$C[A$R+2],A$I=A$G[0],A$e=A$G[1],A$H=A$G[2],A$M=A$G[3],A$K=A$M*A$o+A$e*A$t-A$H*A$U,A$F=A$M*A$U+A$H*A$o-A$I*A$t,A$L=A$M*A$t+A$I*A$U-A$e*A$o,A$D=-A$I*A$o-A$e*A$U-A$H*A$t;A$w[A$T]=A$K*A$M+A$D*-A$I+A$F*-A$H-A$L*-A$e,A$w[A$T+1]=A$F*A$M+A$D*-A$e+A$L*-A$I-A$K*-A$H,A$w[A$T+2]=A$L*A$M+A$D*-A$H+A$K*-A$e-A$F*-A$I},A$N.mulMatrixByArray=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U,A$t,A$I,A$e;if(A$T===A$j){for(A$j=A$N._tempArray16_3,A$o=0;A$o<16;++A$o)A$j[A$o]=A$T[A$G+A$o];A$w=0}for(A$o=0;A$o<4;A$o++)A$U=A$C[A$R+A$o],A$t=A$C[A$R+A$o+4],A$I=A$C[A$R+A$o+8],A$e=A$C[A$R+A$o+12],A$T[A$G+A$o]=A$U*A$j[A$w+0]+A$t*A$j[A$w+1]+A$I*A$j[A$w+2]+A$e*A$j[A$w+3],A$T[A$G+A$o+4]=A$U*A$j[A$w+4]+A$t*A$j[A$w+5]+A$I*A$j[A$w+6]+A$e*A$j[A$w+7],A$T[A$G+A$o+8]=A$U*A$j[A$w+8]+A$t*A$j[A$w+9]+A$I*A$j[A$w+10]+A$e*A$j[A$w+11],A$T[A$G+A$o+12]=A$U*A$j[A$w+12]+A$t*A$j[A$w+13]+A$I*A$j[A$w+14]+A$e*A$j[A$w+15]},A$N.mulMatrixByArrayFast=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U,A$t,A$I,A$e;for(A$o=0;A$o<4;A$o++)A$U=A$C[A$R+A$o],A$t=A$C[A$R+A$o+4],A$I=A$C[A$R+A$o+8],A$e=A$C[A$R+A$o+12],A$T[A$G+A$o]=A$U*A$j[A$w+0]+A$t*A$j[A$w+1]+A$I*A$j[A$w+2]+A$e*A$j[A$w+3],A$T[A$G+A$o+4]=A$U*A$j[A$w+4]+A$t*A$j[A$w+5]+A$I*A$j[A$w+6]+A$e*A$j[A$w+7],A$T[A$G+A$o+8]=A$U*A$j[A$w+8]+A$t*A$j[A$w+9]+A$I*A$j[A$w+10]+A$e*A$j[A$w+11],A$T[A$G+A$o+12]=A$U*A$j[A$w+12]+A$t*A$j[A$w+13]+A$I*A$j[A$w+14]+A$e*A$j[A$w+15]},A$N.mulMatrixByArrayAndMatrixFast=function(A$C,A$R,A$j,A$w,A$T){var A$G,A$o,A$U,A$t,A$I,A$e=A$j.elements,A$H=A$e[0],A$M=A$e[1],A$K=A$e[2],A$F=A$e[3],A$L=A$e[4],A$D=A$e[5],A$Q=A$e[6],A$Z=A$e[7],A$S=A$e[8],A$b=A$e[9],A$f=A$e[10],A$p=A$e[11],A$h=A$e[12],A$x=A$e[13],A$W=A$e[14],A$$=A$e[15],A$A=A$R,A$r=A$R+4,A$E=A$R+8,A$P=A$R+12,A$J=A$T,A$N=A$T+4,A$a=A$T+8,A$n=A$T+12;for(A$G=0;A$G<4;A$G++)A$o=A$C[A$A+A$G],A$U=A$C[A$r+A$G],A$t=A$C[A$E+A$G],A$I=A$C[A$P+A$G],A$w[A$J+A$G]=A$o*A$H+A$U*A$M+A$t*A$K+A$I*A$F,A$w[A$N+A$G]=A$o*A$L+A$U*A$D+A$t*A$Q+A$I*A$Z,A$w[A$a+A$G]=A$o*A$S+A$U*A$b+A$t*A$f+A$I*A$p,A$w[A$n+A$G]=A$o*A$h+A$U*A$x+A$t*A$W+A$I*A$$},A$N.createAffineTransformationArray=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H){var A$M=A$w+A$w,A$K=A$T+A$T,A$F=A$G+A$G,A$L=A$w*A$M,A$D=A$w*A$K,A$Q=A$w*A$F,A$Z=A$T*A$K,A$S=A$T*A$F,A$b=A$G*A$F,A$f=A$o*A$M,A$p=A$o*A$K,A$h=A$o*A$F;A$e[A$H+0]=(1-(A$Z+A$b))*A$U,A$e[A$H+1]=(A$D+A$h)*A$U,A$e[A$H+2]=(A$Q-A$p)*A$U,A$e[A$H+3]=0,A$e[A$H+4]=(A$D-A$h)*A$t,A$e[A$H+5]=(1-(A$L+A$b))*A$t,A$e[A$H+6]=(A$S+A$f)*A$t,A$e[A$H+7]=0,A$e[A$H+8]=(A$Q+A$p)*A$I,A$e[A$H+9]=(A$S-A$f)*A$I,A$e[A$H+10]=(1-(A$L+A$Z))*A$I,A$e[A$H+11]=0,A$e[A$H+12]=A$C,A$e[A$H+13]=A$R,A$e[A$H+14]=A$j,A$e[A$H+15]=1},A$N.transformVector3ArrayToVector3ArrayCoordinate=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$N._tempArray4_0,A$o=A$C[A$R+0],A$U=A$C[A$R+1],A$t=A$C[A$R+2],A$I=A$j.elements;A$G[0]=A$o*A$I[0]+A$U*A$I[4]+A$t*A$I[8]+A$I[12],A$G[1]=A$o*A$I[1]+A$U*A$I[5]+A$t*A$I[9]+A$I[13],A$G[2]=A$o*A$I[2]+A$U*A$I[6]+A$t*A$I[10]+A$I[14],A$G[3]=1/(A$o*A$I[3]+A$U*A$I[7]+A$t*A$I[11]+A$I[15]),A$w[A$T+0]=A$G[0]*A$G[3],A$w[A$T+1]=A$G[1]*A$G[3],A$w[A$T+2]=A$G[2]*A$G[3]},A$N.transformLightingMapTexcoordByUV0Array=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$j.elements;A$w[A$T+0]=A$C[A$R+0]*A$G[0]+A$G[2],A$w[A$T+1]=(A$C[A$R+1]-1)*A$G[1]+A$G[3]},A$N.transformLightingMapTexcoordByUV1Array=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$j.elements;A$w[A$T+0]=A$C[A$R+0]*A$G[0]+A$G[2],A$w[A$T+1]=1+A$C[A$R+1]*A$G[1]+A$G[3]},A$N.getURLVerion=function(A$C){var A$R=A$C.indexOf("?");return 0<=A$R?A$C.substr(A$R):null},A$N._quaternionCreateFromYawPitchRollArray=function(A$C,A$R,A$j,A$w){var A$T=.5*A$j,A$G=.5*A$R,A$o=.5*A$C,A$U=Math.sin(A$T),A$t=Math.cos(A$T),A$I=Math.sin(A$G),A$e=Math.cos(A$G),A$H=Math.sin(A$o),A$M=Math.cos(A$o);A$w[0]=A$M*A$I*A$t+A$H*A$e*A$U,A$w[1]=A$H*A$e*A$t-A$M*A$I*A$U,A$w[2]=A$M*A$e*A$U-A$H*A$I*A$t,A$w[3]=A$M*A$e*A$t+A$H*A$I*A$U},A$N._createAffineTransformationArray=function(A$C,A$R,A$j,A$w){var A$T=A$R[0],A$G=A$R[1],A$o=A$R[2],A$U=A$R[3],A$t=A$T+A$T,A$I=A$G+A$G,A$e=A$o+A$o,A$H=A$T*A$t,A$M=A$T*A$I,A$K=A$T*A$e,A$F=A$G*A$I,A$L=A$G*A$e,A$D=A$o*A$e,A$Q=A$U*A$t,A$Z=A$U*A$I,A$S=A$U*A$e,A$b=A$j[0],A$f=A$j[1],A$p=A$j[2];A$w[0]=(1-(A$F+A$D))*A$b,A$w[1]=(A$M+A$S)*A$b,A$w[2]=(A$K-A$Z)*A$b,A$w[3]=0,A$w[4]=(A$M-A$S)*A$f,A$w[5]=(1-(A$H+A$D))*A$f,A$w[6]=(A$L+A$Q)*A$f,A$w[7]=0,A$w[8]=(A$K+A$Z)*A$p,A$w[9]=(A$L-A$Q)*A$p,A$w[10]=(1-(A$H+A$F))*A$p,A$w[11]=0,A$w[12]=A$C[0],A$w[13]=A$C[1],A$w[14]=A$C[2],A$w[15]=1},A$N._mulMatrixArray=function(A$C,A$R,A$j,A$w){var A$T,A$G,A$o,A$U,A$t,A$I=A$R.elements,A$e=A$I[0],A$H=A$I[1],A$M=A$I[2],A$K=A$I[3],A$F=A$I[4],A$L=A$I[5],A$D=A$I[6],A$Q=A$I[7],A$Z=A$I[8],A$S=A$I[9],A$b=A$I[10],A$f=A$I[11],A$p=A$I[12],A$h=A$I[13],A$x=A$I[14],A$W=A$I[15],A$$=A$w,A$A=A$w+4,A$r=A$w+8,A$E=A$w+12;for(A$T=0;A$T<4;A$T++)A$G=A$C[A$T],A$o=A$C[A$T+4],A$U=A$C[A$T+8],A$t=A$C[A$T+12],A$j[A$$+A$T]=A$G*A$e+A$o*A$H+A$U*A$M+A$t*A$K,A$j[A$A+A$T]=A$G*A$F+A$o*A$L+A$U*A$D+A$t*A$Q,A$j[A$r+A$T]=A$G*A$Z+A$o*A$S+A$U*A$b+A$t*A$f,A$j[A$E+A$T]=A$G*A$p+A$o*A$h+A$U*A$x+A$t*A$W},A$N.getYawPitchRoll=function(A$C,A$R){A$N.transformQuat(A$oR.ForwardRH,A$C,A$jR.TEMPVector31),A$N.transformQuat(A$oR.Up,A$C,A$jR.TEMPVector32);var A$j=A$jR.TEMPVector32.elements;A$N.angleTo(A$oR.ZERO,A$jR.TEMPVector31,A$jR.TEMPVector33);var A$w=A$jR.TEMPVector33.elements;A$w[0]==Math.PI/2?(A$w[1]=A$N.arcTanAngle(A$j[2],A$j[0]),A$w[2]=0):A$w[0]==-Math.PI/2?(A$w[1]=A$N.arcTanAngle(-A$j[2],-A$j[0]),A$w[2]=0):(A$CR.createRotationY(-A$w[1],A$jR.TEMPMatrix0),A$CR.createRotationX(-A$w[0],A$jR.TEMPMatrix1),A$oR.transformCoordinate(A$jR.TEMPVector32,A$jR.TEMPMatrix0,A$jR.TEMPVector32),A$oR.transformCoordinate(A$jR.TEMPVector32,A$jR.TEMPMatrix1,A$jR.TEMPVector32),A$w[2]=A$N.arcTanAngle(A$j[1],-A$j[0])),A$w[1]<=-Math.PI&&(A$w[1]=Math.PI),A$w[2]<=-Math.PI&&(A$w[2]=Math.PI),A$w[1]>=Math.PI&&A$w[2]>=Math.PI&&(A$w[1]=0,A$w[2]=0,A$w[0]=Math.PI-A$w[0]),A$R[0]=A$w[1],A$R[1]=A$w[0],A$R[2]=A$w[2]},A$N.arcTanAngle=function(A$C,A$R){return 0==A$C?1==A$R?Math.PI/2:-Math.PI/2:0<A$C?Math.atan(A$R/A$C):A$C<0?0<A$R?Math.atan(A$R/A$C)+Math.PI:Math.atan(A$R/A$C)-Math.PI:0},A$N.angleTo=function(A$C,A$R,A$j){A$oR.subtract(A$R,A$C,A$jR.TEMPVector30),A$oR.normalize(A$jR.TEMPVector30,A$jR.TEMPVector30),A$j.elements[0]=Math.asin(A$jR.TEMPVector30.y),A$j.elements[1]=A$N.arcTanAngle(-A$jR.TEMPVector30.z,-A$jR.TEMPVector30.x)},A$N.transformQuat=function(A$C,A$R,A$j){var A$w=A$j.elements,A$T=A$C.elements,A$G=A$R,A$o=A$T[0],A$U=A$T[1],A$t=A$T[2],A$I=A$G[0],A$e=A$G[1],A$H=A$G[2],A$M=A$G[3],A$K=A$M*A$o+A$e*A$t-A$H*A$U,A$F=A$M*A$U+A$H*A$o-A$I*A$t,A$L=A$M*A$t+A$I*A$U-A$e*A$o,A$D=-A$I*A$o-A$e*A$U-A$H*A$t;A$w[0]=A$K*A$M+A$D*-A$I+A$F*-A$H-A$L*-A$e,A$w[1]=A$F*A$M+A$D*-A$e+A$L*-A$I-A$K*-A$H,A$w[2]=A$L*A$M+A$D*-A$H+A$K*-A$e-A$F*-A$I},A$N.quaterionNormalize=function(A$C,A$R){var A$j=A$C[0],A$w=A$C[1],A$T=A$C[2],A$G=A$C[3],A$o=A$j*A$j+A$w*A$w+A$T*A$T+A$G*A$G;0<A$o&&(A$o=1/Math.sqrt(A$o),A$R[0]=A$j*A$o,A$R[1]=A$w*A$o,A$R[2]=A$T*A$o,A$R[3]=A$G*A$o)},A$N.matrix4x4MultiplyFFF=function(A$C,A$R,A$j){var A$w,A$T,A$G,A$o,A$U;if(A$j===A$R)for(A$R=new Float32Array(16),A$w=0;A$w<16;++A$w)A$R[A$w]=A$j[A$w];for(A$w=0;A$w<4;A$w++)A$T=A$C[A$w],A$G=A$C[A$w+4],A$o=A$C[A$w+8],A$U=A$C[A$w+12],A$j[A$w]=A$T*A$R[0]+A$G*A$R[1]+A$o*A$R[2]+A$U*A$R[3],A$j[A$w+4]=A$T*A$R[4]+A$G*A$R[5]+A$o*A$R[6]+A$U*A$R[7],A$j[A$w+8]=A$T*A$R[8]+A$G*A$R[9]+A$o*A$R[10]+A$U*A$R[11],A$j[A$w+12]=A$T*A$R[12]+A$G*A$R[13]+A$o*A$R[14]+A$U*A$R[15]},A$N.matrix4x4MultiplyMFM=function(A$C,A$R,A$j){A$N.matrix4x4MultiplyFFF(A$C.elements,A$R,A$j.elements)},A$H(A$N,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new A$oR},"_tempVector3_1",function(){return this._tempVector3_1=new A$oR},"_tempVector3_2",function(){return this._tempVector3_2=new A$oR},"_tempVector3_3",function(){return this._tempVector3_3=new A$oR},"_tempVector3_4",function(){return this._tempVector3_4=new A$oR},"_tempVector3_5",function(){return this._tempVector3_5=new A$oR},"_tempVector3_6",function(){return this._tempVector3_6=new A$oR},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),A$N}(),A$QR=function(){function A$P(){}return A$K(A$P,"Laya3D"),A$P._cancelLoadByUrl=function(A$C){A$f.loader.cancelLoadByUrl(A$C),A$P._innerFirstLevelLoaderManager.cancelLoadByUrl(A$C),A$P._innerSecondLevelLoaderManager.cancelLoadByUrl(A$C),A$P._innerThirdLevelLoaderManager.cancelLoadByUrl(A$C),A$P._innerFourthLevelLoaderManager.cancelLoadByUrl(A$C)},A$P._changeWebGLSize=function(A$C,A$R){A$E.onStageResize(A$C,A$R),A$X.clientWidth=A$C,A$X.clientHeight=A$R},A$P.__init__=function(){var A$C=A$R.createMap;A$C.lh=[A$nR,"SPRITE3DHIERARCHY"],A$C.ls=[A$aR,"SPRITE3DHIERARCHY"],A$C.lm=[A$gR,"MESH"],A$C.lmat=[A$mR,"MATERIAL"],A$C.jpg=[A$iR,"nativeimage"],A$C.jpeg=[A$iR,"nativeimage"],A$C.png=[A$iR,"nativeimage"],A$C.pkm=[A$iR,"arraybuffer"],A$C.raw=[A$zR,"arraybuffer"],A$C.mipmaps=[A$zR,"arraybuffer"],A$Q.parserMap.SPRITE3DHIERARCHY=A$P._loadHierarchy,A$Q.parserMap.MESH=A$P._loadMesh,A$Q.parserMap.MATERIAL=A$P._loadMaterial,A$Q.parserMap.TEXTURECUBE=A$P._loadTextureCube,A$Q.parserMap.TERRAIN=A$P._loadTerrain,A$P._innerFirstLevelLoaderManager.on("error",null,A$P._eventLoadManagerError),A$P._innerSecondLevelLoaderManager.on("error",null,A$P._eventLoadManagerError),A$P._innerThirdLevelLoaderManager.on("error",null,A$P._eventLoadManagerError),A$P._innerFourthLevelLoaderManager.on("error",null,A$P._eventLoadManagerError)},A$P.READ_BLOCK=function(){return A$P._readData.pos+=4,!0},A$P.READ_DATA=function(){return A$P._DATA.offset=A$P._readData.getUint32(),A$P._DATA.size=A$P._readData.getUint32(),!0},A$P.READ_STRINGS=function(){var A$C=[],A$R={offset:0,size:0};A$R.offset=A$P._readData.getUint16(),A$R.size=A$P._readData.getUint16();A$P._readData.pos;A$P._readData.pos=A$R.offset+A$P._DATA.offset;for(var A$j=0;A$j<A$R.size;A$j++){var A$w=A$P._readData.readUTFString();-1===A$w.lastIndexOf(".lmat")&&-1===A$w.lastIndexOf(".lpbr")||A$C.push(A$w)}return A$C},A$P.formatRelativePath=function(A$C,A$R){var A$j;if("."===A$R.charAt(0)){for(var A$w=(A$C+A$R).split("/"),A$T=0,A$G=A$w.length;A$T<A$G;A$T++)if(".."==A$w[A$T]){var A$o=A$T-1;0<A$o&&".."!==A$w[A$o]&&(A$w.splice(A$o,2),A$T-=2)}A$j=A$w.join("/")}else A$j=A$C+A$R;return null!=A$r.customFormat&&(A$j=A$r.customFormat(A$j,null)),A$j},A$P._eventLoadManagerError=function(A$C){A$f.loader.event("error",A$C)},A$P._addHierarchyInnerUrls=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o=A$P.formatRelativePath(A$w,A$T);A$j&&(A$o+=A$j),A$C.push({url:A$o,clas:A$G}),A$R[A$T]=A$o},A$P._getSprite3DHierarchyInnerUrls=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){var A$U,A$t=0,A$I=0;switch(A$C.type){case"Scene":var A$e=A$C.customProps.lightmaps;for(A$t=0,A$I=A$e.length;A$t<A$I;A$t++){var A$H=A$e[A$t].replace(".exr",".png");A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$H,A$iR)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var A$M;if(A$C.instanceParams)(A$M=A$C.instanceParams.loadPath)&&A$P._addHierarchyInnerUrls(A$R,A$T,A$G,A$o,A$M,A$gR);else{(A$M=(A$U=A$C.customProps).meshPath)&&A$P._addHierarchyInnerUrls(A$R,A$T,A$G,A$o,A$M,A$gR);var A$K=A$U.materials;if(A$K)for(A$t=0,A$I=A$K.length;A$t<A$I;A$t++){for(var A$F=A$K[A$t],A$L=A$F.type.split("."),A$D=A$J.window,A$Q=0,A$Z=A$L.length;A$Q<A$Z;++A$Q){A$D=A$D[this.clasPaths[A$Q]]}if("function"!=typeof A$D)throw"_getSprite3DHierarchyInnerUrls 错误: "+A$F.type+" 不是类";A$P._addHierarchyInnerUrls(A$j,A$T,A$G,A$o,A$F.path,A$D)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var A$S=(A$U=A$C.customProps).meshPath;A$S&&A$P._addHierarchyInnerUrls(A$R,A$T,A$G,A$o,A$S,A$gR);var A$b=A$U.material;if(A$b){A$L=A$b.type.split("."),A$D=A$J.window;for(A$Q=0,A$Z=A$L.length;A$Q<A$Z;++A$Q){A$D=A$D[this.clasPaths[A$Q]]}A$P._addHierarchyInnerUrls(A$j,A$T,A$G,A$o,A$b.path,A$D)}else{var A$f=A$U.materialPath;if(A$f)A$P._addHierarchyInnerUrls(A$j,A$T,A$G,A$o,A$f,ShurikenParticleMaterial);else{var A$p=A$U.texturePath;A$p&&A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$p,A$iR)}}break;case"Terrain":A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$C.customProps.dataPath,TerrainRes)}var A$h=A$C.components;for(var A$x in A$h){var A$W=A$h[A$x];switch(A$x){case"Animator":var A$$=A$W.avatarPath;if(A$$)A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$$,Avatar);else{var A$A=A$W.avatar;A$A&&A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$A.path,Avatar)}var A$r=A$W.clipPaths;for(A$t=0,A$I=A$r.length;A$t<A$I;A$t++)A$P._addHierarchyInnerUrls(A$w,A$T,A$G,A$o,A$r[A$t],AnimationClip)}}var A$E=A$C.child;for(A$t=0,A$I=A$E.length;A$t<A$I;A$t++)A$P._getSprite3DHierarchyInnerUrls(A$E[A$t],A$R,A$j,A$w,A$T,A$G,A$o)},A$P._loadHierarchy=function(A$C){A$C.on("loaded",null,A$P._onHierarchylhLoaded,[A$C,A$C._class._getGroup()]),A$C.load(A$C.url,"json",!1,null,!0)},A$P._onHierarchylhLoaded=function(A$C,A$R,A$j){if(A$C._class.destroyed)A$C.endLoad();else{var A$w=A$C.url,A$T=A$DR.getURLVerion(A$w),A$G=A$r.getPath(A$w),A$o=[],A$U=[],A$t=[],A$I={};A$P._getSprite3DHierarchyInnerUrls(A$j,A$o,A$U,A$t,A$I,A$T,A$G);var A$e=A$o.length+A$U.length+A$t.length,A$H=A$e+1,A$M=1/A$H;if(A$P._onProcessChange(A$C,0,A$M,1),0<A$t.length){var A$K=A$e/A$H,A$F=A$A.create(null,A$P._onProcessChange,[A$C,A$M,A$K],!1);A$P._innerFourthLevelLoaderManager.create(A$t,A$A.create(null,A$P._onHierarchyInnerForthLevResouLoaded,[A$C,A$R,A$F,A$j,A$I,A$o,A$U,A$M+A$K*A$t.length,A$K]),A$F,null,null,1,!0,A$R)}else A$P._onHierarchyInnerForthLevResouLoaded(A$C,A$R,null,A$j,A$I,A$o,A$U,A$M,A$K)}},A$P._onHierarchyInnerForthLevResouLoaded=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){if(A$C._class.destroyed)A$C.endLoad();else if(A$j&&A$j.recover(),0<A$o.length){var A$I=A$A.create(null,A$P._onProcessChange,[A$C,A$U,A$t],!1);A$P._innerSecondLevelLoaderManager.create(A$o,A$A.create(null,A$P._onHierarchyInnerSecondLevResouLoaded,[A$C,A$R,A$I,A$w,A$T,A$G,A$U+A$t*A$o.length,A$t]),A$j,null,null,1,!0,A$R)}else A$P._onHierarchyInnerSecondLevResouLoaded(A$C,A$R,null,A$w,A$T,A$G,A$U,A$t)},A$P._onHierarchyInnerSecondLevResouLoaded=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U){if(A$C._class.destroyed)A$C.endLoad();else if(A$j&&A$j.recover(),0<A$G.length){var A$t=A$A.create(null,A$P._onProcessChange,[A$C,A$o,A$U],!1);A$P._innerFirstLevelLoaderManager.create(A$G,A$A.create(null,A$P._onHierarchyInnerFirstLevResouLoaded,[A$C,A$t,A$w,A$T]),A$j,null,null,1,!0,A$R)}else A$P._onHierarchyInnerFirstLevResouLoaded(A$C,null,A$w,A$T)},A$P._onHierarchyInnerFirstLevResouLoaded=function(A$C,A$R,A$j,A$w){A$R&&A$R.recover(),A$C.endLoad([A$j,A$w])},A$P._loadTerrain=function(A$C){A$C.on("loaded",null,A$P._onTerrainLtLoaded,[A$C,A$C._class._getGroup()]),A$C.load(A$C.url,"json",!1,null,!0)},A$P._onTerrainLtLoaded=function(A$C,A$R,A$j){if(A$C._class.destroyed)A$C.endLoad();else{var A$w,A$T,A$G=A$C.url,A$o=A$DR.getURLVerion(A$G),A$U=A$r.getPath(A$G),A$t=[],A$I={},A$e=0,A$H=0,A$M=A$j.heightData;A$w=A$M.url,A$T=A$P.formatRelativePath(A$U,A$w),A$o&&(A$T+=A$o),A$w=A$I[A$w]=A$T;var A$K=A$j.detailTexture;for(A$e=0,A$H=A$K.length;A$e<A$H;A$e++)A$t.push({url:A$K[A$e].diffuse});var A$F=A$j.normalMap;for(A$e=0,A$H=A$F.length;A$e<A$H;A$e++)A$t.push({url:A$F[A$e]});var A$L=A$j.alphaMap;for(A$e=0,A$H=A$L.length;A$e<A$H;A$e++)A$t.push({url:A$L[A$e],params:[!1,!1,6408,!0]});for(A$e=0,A$H=A$t.length;A$e<A$H;A$e++){var A$D=A$t[A$e].url;A$T=A$P.formatRelativePath(A$U,A$D),A$o&&(A$T+=A$o),A$t[A$e].url=A$T,A$I[A$D]=A$T}var A$Q=A$t.length,A$Z=A$Q+2,A$S=1/A$Z;A$P._onProcessChange(A$C,0,A$S,1);var A$b={heightMapLoaded:!1,texturesLoaded:!1},A$f=A$A.create(null,A$P._onProcessChange,[A$C,A$S,A$S],!1);A$P._innerFourthLevelLoaderManager.create(A$w,A$A.create(null,A$P._onTerrainHeightMapLoaded,[A$C,A$f,A$j,A$I,A$b]),A$f,null,[A$M.numX,A$M.numZ,A$M.bitType,A$M.value],1,!0,A$R);var A$p=A$A.create(null,A$P._onProcessChange,[A$C,2*A$S,A$Q/A$Z],!1);A$P._innerFourthLevelLoaderManager.create(A$t,A$A.create(null,A$P._onTerrainTexturesLoaded,[A$C,A$p,A$j,A$I,A$b]),A$p,null,null,1,!0,A$R)}},A$P._onTerrainHeightMapLoaded=function(A$C,A$R,A$j,A$w,A$T){A$T.heightMapLoaded=!0,A$T.texturesLoaded&&(A$C.endLoad([A$j,A$w]),A$R.recover())},A$P._onTerrainTexturesLoaded=function(A$C,A$R,A$j,A$w,A$T){A$T.texturesLoaded=!0,A$T.heightMapLoaded&&(A$C.endLoad([A$j,A$w]),A$R.recover())},A$P._loadMesh=function(A$C){A$C.on("loaded",null,A$P._onMeshLmLoaded,[A$C,A$C._class._getGroup()]),A$C.load(A$C.url,"arraybuffer",!1,null,!0)},A$P._onMeshLmLoaded=function(A$C,A$R,A$j){if(A$C._class.destroyed)A$C.endLoad();else{var A$w,A$T,A$G,A$o=A$C.url,A$U=A$DR.getURLVerion(A$o),A$t=A$r.getPath(A$o),A$I={},A$e=0,A$H=0;switch((A$P._readData=new A$p(A$j)).pos=0,A$P._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var A$M=A$P._readData.getUint32();A$P._readData.pos=A$P._readData.pos+4,A$H=A$P._readData.getUint16(),A$P._readData.pos=A$P._readData.pos+8*A$H;var A$K=A$P._readData.getUint32();for(A$H=A$P._readData.getUint16(),A$P._readData.pos=A$M+A$K,A$w=[],A$e=0;A$e<A$H;A$e++){var A$F=A$P._readData.readUTFString();-1!==A$F.lastIndexOf(".lmat")&&A$w.push(A$F)}break;default:for(A$P.READ_BLOCK(),A$e=0;A$e<2;A$e++){var A$L=A$P._readData.getUint16(),A$D=A$P._strings[A$L],A$Q=A$P["READ_"+A$D];if(null==A$Q)throw new Error("model file err,no this function:"+A$L+" "+A$D);1===A$e?A$w=A$Q.call():A$Q.call()}}for(A$e=0,A$G=A$w.length;A$e<A$G;A$e++){var A$Z=A$w[A$e];A$T=A$P.formatRelativePath(A$t,A$Z),A$U&&(A$T+=A$U),A$w[A$e]=A$T,A$I[A$Z]=A$T}if(0<A$w.length){A$P._onProcessChange(A$C,0,.5,1);var A$S=A$A.create(null,A$P._onProcessChange,[A$C,.5,.5],!1);A$P._innerSecondLevelLoaderManager.create(A$w,A$A.create(null,A$P._onMeshMateialLoaded,[A$C,A$S,A$j,A$I]),A$S,null,null,1,!0,A$R)}else A$C.endLoad([A$j,A$I])}},A$P._onMeshMateialLoaded=function(A$C,A$R,A$j,A$w){A$C.endLoad([A$j,A$w]),A$R.recover()},A$P._getMaterialTexturePath=function(A$C,A$R,A$j){var A$w=A$C.length-4;return A$C.indexOf(".dds")!=A$w&&A$C.indexOf(".tga")!=A$w&&A$C.indexOf(".exr")!=A$w&&A$C.indexOf(".DDS")!=A$w&&A$C.indexOf(".TGA")!=A$w&&A$C.indexOf(".EXR")!=A$w||(A$C=A$C.substr(0,A$w)+".png"),A$C=A$P.formatRelativePath(A$j,A$C),A$R&&(A$C+=A$R),A$C},A$P._loadMaterial=function(A$C){A$C.on("loaded",null,A$P._onMaterilLmatLoaded,[A$C,A$C._class._getGroup()]),A$C.load(A$C.url,"json",!1,null,!0)},A$P._onMaterilLmatLoaded=function(A$C,A$R,A$j){if(A$C._class.destroyed)A$C.endLoad();else{var A$w,A$T=A$C.url,A$G=A$DR.getURLVerion(A$T),A$o=A$r.getPath(A$T),A$U=[],A$t={},A$I=A$j.customProps,A$e=A$j.version;if(A$e)switch(A$e){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var A$H=A$j.props.textures,A$M=0,A$K=A$H.length;A$M<A$K;A$M++){var A$F=A$H[A$M],A$L=A$F.path;if(A$L){var A$D=A$L.length-4;A$L.indexOf(".exr")!=A$D&&A$L.indexOf(".EXR")!=A$D||(A$L=A$L.substr(0,A$D)+".png"),A$w=A$P.formatRelativePath(A$o,A$L),A$G&&(A$w+=A$G),A$U.push({url:A$w,params:A$F.params}),A$t[A$L]=A$w}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var A$Q=A$I.diffuseTexture.texture2D;if(A$Q&&(A$w=A$P._getMaterialTexturePath(A$Q,A$G,A$o),A$U.push(A$w),A$t[A$Q]=A$w),A$I.normalTexture){var A$Z=A$I.normalTexture.texture2D;A$Z&&(A$w=A$P._getMaterialTexturePath(A$Z,A$G,A$o),A$U.push(A$w),A$t[A$Z]=A$w)}if(A$I.specularTexture){var A$S=A$I.specularTexture.texture2D;A$S&&(A$w=A$P._getMaterialTexturePath(A$S,A$G,A$o),A$U.push(A$w),A$t[A$S]=A$w)}if(A$I.emissiveTexture){var A$b=A$I.emissiveTexture.texture2D;A$b&&(A$w=A$P._getMaterialTexturePath(A$b,A$G,A$o),A$U.push(A$w),A$t[A$b]=A$w)}if(A$I.ambientTexture){var A$f=A$I.ambientTexture.texture2D;A$f&&(A$w=A$P._getMaterialTexturePath(A$f,A$G,A$o),A$U.push(A$w),A$t[A$f]=A$w)}if(A$I.reflectTexture){var A$p=A$I.reflectTexture.texture2D;A$p&&(A$w=A$P._getMaterialTexturePath(A$p,A$G,A$o),A$U.push(A$w),A$t[A$p]=A$w)}}var A$h=A$U.length,A$x=A$h+1,A$W=1/A$x;if(A$P._onProcessChange(A$C,0,A$W,1),0<A$h){var A$$=A$A.create(null,A$P._onProcessChange,[A$C,A$W,A$h/A$x],!1);A$P._innerFourthLevelLoaderManager.create(A$U,A$A.create(null,A$P._onMateialTexturesLoaded,[A$C,A$$,A$j,A$t]),A$$,A$iR,null,1,!0,A$R)}else A$P._onMateialTexturesLoaded(A$C,null,A$j,null)}},A$P._onMateialTexturesLoaded=function(A$C,A$R,A$j,A$w){A$C.endLoad([A$j,A$w]),A$R&&A$R.recover()},A$P._loadTextureCube=function(A$C){A$C.on("loaded",null,A$P._onTextureCubeLtcLoaded,[A$C]),A$C.load(A$C.url,"json",!1,null,!0)},A$P._onTextureCubeLtcLoaded=function(A$C,A$R){if(A$C._class.destroyed)A$C.endLoad();else{var A$j=A$r.getPath(A$C.url),A$w=[A$P.formatRelativePath(A$j,A$R.px),A$P.formatRelativePath(A$j,A$R.nx),A$P.formatRelativePath(A$j,A$R.py),A$P.formatRelativePath(A$j,A$R.ny),A$P.formatRelativePath(A$j,A$R.pz),A$P.formatRelativePath(A$j,A$R.nz)];A$P._onProcessChange(A$C,0,1/7,1);var A$T=A$A.create(null,A$P._onProcessChange,[A$C,1/7,6/7],!1);A$P._innerFourthLevelLoaderManager.load(A$w,A$A.create(null,A$P._onTextureCubeImagesLoaded,[A$C,A$w,A$T]),A$T,"nativeimage")}},A$P._onTextureCubeImagesLoaded=function(A$C,A$R,A$j){var A$w=[];A$w.length=6;for(var A$T=0;A$T<6;A$T++){var A$G=A$R[A$T];A$w[A$T]=A$Q.getRes(A$G),A$Q.clearRes(A$G)}A$C.endLoad(A$w),A$j.recover()},A$P._onProcessChange=function(A$C,A$R,A$j,A$w){(A$w=A$R+A$w*A$j)<1&&A$C.event("progress",A$w)},A$P.init=function(A$C,A$R,A$j,A$w,A$T,A$G){if(void 0===A$j&&(A$j=!1),void 0===A$w&&(A$w=!1),void 0===A$T&&(A$T=!0),void 0===A$G&&(A$G=!0),A$Z.update3DLoop=function(){},A$Z.cancelLoadByUrl=function(A$C){A$P._cancelLoadByUrl(A$C)},A$t.isAntialias=A$j,A$t.isAlpha=A$w,A$t.premultipliedAlpha=A$T,A$t.isStencil=A$G,!A$E.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");A$Z.changeWebGLSize=A$P._changeWebGLSize,A$L.is3DMode=!0,A$f.init(A$C,A$R),A$N.__init__(),A$HR.__init__(),A$cR.__init__(),A$l.__init__(),A$P.__init__(),A$o.maxTextureCount=2,(A$P.debugMode||A$Y.debugMode)&&(A$P._debugPhasorSprite=new A$u)},A$P.HIERARCHY="SPRITE3DHIERARCHY",A$P.MESH="MESH",A$P.MATERIAL="MATERIAL",A$P.PBRMATERIAL="PBRMTL",A$P.TEXTURECUBE="TEXTURECUBE",A$P.TERRAIN="TERRAIN",A$P._readData=null,A$P._debugPhasorSprite=null,A$P.debugMode=!1,A$H(A$P,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new A$R},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new A$R},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new A$R},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new A$R}]),A$P}(),A$ZR=function(A$C){function A$T(A$C){A$T.__super.call(this),this._owner=A$C,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}A$K(A$T,"laya.d3.animation.AnimationTransform3D",A$G);var A$R=A$T.prototype;return A$R._getlocalMatrix=function(){return this._localUpdate&&(A$DR._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},A$R._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldTransform()}},A$R._setWorldMatrixAndUpdate=function(A$C){if(this._worldMatrix=A$C,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var A$R=this._getlocalMatrix(),A$j=0;A$j<16;++A$j)this._worldMatrix[A$j]=A$R[A$j];else A$DR.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},A$R._setWorldMatrixNoUpdate=function(A$C){this._worldMatrix=A$C},A$R._setWorldMatrixIgnoreUpdate=function(A$C){this._worldMatrix=A$C,this._worldUpdate=!1},A$R.getLocalPosition=function(){return this._localPosition},A$R.setLocalPosition=function(A$C){if(this._parent)this._localPosition=A$C,this._localUpdate=!0,this._onWorldTransform();else{var A$R=this._entity.owner._transform,A$j=this._entity.localPosition,A$w=A$j.elements;A$w[0]=A$C[0],A$w[1]=A$C[1],A$w[2]=A$C[2],A$R.localPosition=A$j}},A$R.getLocalRotation=function(){if(this._localQuaternionUpdate){var A$C=this._localRotationEuler;A$DR._quaternionCreateFromYawPitchRollArray(A$C[1]/A$T._angleToRandin,A$C[0]/A$T._angleToRandin,A$C[2]/A$T._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},A$R.setLocalRotation=function(A$C){if(this._parent)this._localRotation=A$C,A$DR.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var A$R=this._entity.owner._transform,A$j=this._entity.localRotation,A$w=A$j.elements;A$w[0]=A$C[0],A$w[1]=A$C[1],A$w[2]=A$C[2],A$w[3]=A$C[3],A$R.localRotation=A$j}},A$R.getLocalScale=function(){return this._localScale},A$R.setLocalScale=function(A$C){if(this._parent)this._localScale=A$C,this._localUpdate=!0,this._onWorldTransform();else{var A$R=this._entity.owner._transform,A$j=this._entity.localScale,A$w=A$j.elements;A$w[0]=A$C[0],A$w[1]=A$C[1],A$w[2]=A$C[2],A$R.localScale=A$j}},A$R.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){A$DR.getYawPitchRoll(this._localRotation,A$T._tempVector3);var A$C=A$T._tempVector3,A$R=this._localRotationEuler;A$R[0]=A$C[1]*A$T._angleToRandin,A$R[1]=A$C[0]*A$T._angleToRandin,A$R[2]=A$C[2]*A$T._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},A$R.setLocalRotationEuler=function(A$C){if(this._parent)A$DR._quaternionCreateFromYawPitchRollArray(A$C[1]/A$T._angleToRandin,A$C[0]/A$T._angleToRandin,A$C[2]/A$T._angleToRandin,this._localRotation),this._localRotationEuler=A$C,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var A$R=this._entity.owner._transform,A$j=this._entity.localRotationEuler,A$w=A$j.elements;A$w[0]=A$C[0],A$w[1]=A$C[1],A$w[2]=A$C[2],A$R.localRotationEuler=A$j}},A$R.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)A$DR.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var A$C=this._getlocalMatrix(),A$R=0;A$R<16;++A$R)this._worldMatrix[A$R]=A$C[A$R];this._worldUpdate=!1}return this._worldMatrix},A$R.setParent=function(A$C){if(this._parent!==A$C){if(this._parent){var A$R=this._parent._childs,A$j=A$R.indexOf(this);A$R.splice(A$j,1)}A$C&&(A$C._childs.push(this),A$C&&this._onWorldTransform()),this._parent=A$C}},A$H(A$T,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),A$T}(),A$SR=function(A$C){function A$R(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,A$R.__super.call(this),this._destroyed=!1,this._id=A$R._uniqueIDCounter,A$R._uniqueIDCounter++}A$K(A$R,"laya.d3.component.Component3D",A$G);var A$j=A$R.prototype;return A$f.imps(A$j,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),A$j._initialize=function(A$C){this._owner=A$C,this._enable=!0,this.started=!1,this._load(A$C)},A$j._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},A$j._load=function(A$C){},A$j._start=function(A$C){},A$j._update=function(A$C){},A$j._lateUpdate=function(A$C){},A$j._preRenderUpdate=function(A$C){},A$j._postRenderUpdate=function(A$C){},A$j._unload=function(A$C){this.offAll()},A$j._cloneTo=function(A$C){},A$F(0,A$j,"id",function(){return this._id}),A$F(0,A$j,"destroyed",function(){return this._destroyed}),A$F(0,A$j,"owner",function(){return this._owner}),A$F(0,A$j,"enable",function(){return this._enable},function(A$C){this._enable!==A$C&&(this._enable=A$C,this.event("enablechanged",this._enable))}),A$F(0,A$j,"isSingleton",function(){return A$R._isSingleton}),A$R._isSingleton=!0,A$R._uniqueIDCounter=1,A$R}(),A$bR=function(A$C){function A$R(){this._destroyed=!1,A$R.__super.call(this),this._destroyed=!1}A$K(A$R,"laya.d3.core.GeometryFilter",A$G);var A$j=A$R.prototype;return A$f.imps(A$j,{"laya.resource.IDestroy":!0}),A$j._destroy=function(){this.offAll(),this._destroyed=!0},A$F(0,A$j,"_isAsyncLoaded",function(){return!0}),A$F(0,A$j,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),A$F(0,A$j,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),A$F(0,A$j,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),A$F(0,A$j,"destroyed",function(){return this._destroyed}),A$R}(),A$fR=function(A$C){function A$w(A$C){A$w.__super.call(this),this._id=++A$w._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new A$YC(new A$oR,new A$oR),this._boundingBoxCenter=new A$oR,this._boundingSphere=new A$OC(new A$oR,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=A$C,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}A$K(A$w,"laya.d3.core.render.BaseRender",A$G);var A$R=A$w.prototype;return A$f.imps(A$R,{"laya.resource.IDestroy":!0}),A$R._changeMaterialReference=function(A$C,A$R){A$C&&A$C._removeReference(),A$R._addReference()},A$R._getInstanceMaterial=function(A$C,A$R){var A$j=new A$C.constructor;return A$C.cloneTo(A$j),A$j.name=A$j.name+"(Instance)",this._materialsInstance[A$R]=!0,this._changeMaterialReference(this._materials[A$R],A$j),this._materials[A$R]=A$j},A$R._setShaderValuelightMap=function(A$C){this._setShaderValueTexture(3,A$C)},A$R._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},A$R._renderRenderableBoundBox=function(){var A$C=A$QR._debugPhasorSprite,A$R=this.boundingBox,A$j=A$w._tempBoundBoxCorners;A$R.getCorners(A$j),A$C.line(A$j[0],A$w._greenColor,A$j[1],A$w._greenColor),A$C.line(A$j[2],A$w._greenColor,A$j[3],A$w._greenColor),A$C.line(A$j[4],A$w._greenColor,A$j[5],A$w._greenColor),A$C.line(A$j[6],A$w._greenColor,A$j[7],A$w._greenColor),A$C.line(A$j[0],A$w._greenColor,A$j[3],A$w._greenColor),A$C.line(A$j[1],A$w._greenColor,A$j[2],A$w._greenColor),A$C.line(A$j[2],A$w._greenColor,A$j[6],A$w._greenColor),A$C.line(A$j[3],A$w._greenColor,A$j[7],A$w._greenColor),A$C.line(A$j[0],A$w._greenColor,A$j[4],A$w._greenColor),A$C.line(A$j[1],A$w._greenColor,A$j[5],A$w._greenColor),A$C.line(A$j[4],A$w._greenColor,A$j[7],A$w._greenColor),A$C.line(A$j[5],A$w._greenColor,A$j[6],A$w._greenColor)},A$R._calculateBoundingSphere=function(){throw"BaseRender: must override it."},A$R._calculateBoundingBox=function(){throw"BaseRender: must override it."},A$R._setShaderValueTexture=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R)},A$R._setShaderValueMatrix4x4=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R?A$R.elements:null)},A$R._setShaderValueColor=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R?A$R.elements:null)},A$R._setShaderValueBuffer=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R)},A$R._setShaderValueInt=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R)},A$R._setShaderValueBool=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R)},A$R._setShaderValueNumber=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R)},A$R._setShaderValueVector2=function(A$C,A$R){this._owner._shaderValues.setValue(A$C,A$R?A$R.elements:null)},A$R._addShaderDefine=function(A$C){this._owner._shaderDefineValue|=A$C},A$R._removeShaderDefine=function(A$C){this._owner._shaderDefineValue&=~A$C},A$R._renderUpdate=function(A$C){return!0},A$R._applyLightMapParams=function(){if(0<=this._lightmapIndex){var A$C=this._owner.scene;if(A$C){var A$R=A$C.getlightmaps()[this._lightmapIndex];A$R?(this._addShaderDefine(A$uR.SAHDERDEFINE_LIGHTMAP),A$R.loaded?this._setShaderValuelightMap(A$R):A$R.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(A$uR.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(A$uR.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(A$uR.SAHDERDEFINE_LIGHTMAP)},A$R._updateOctreeNode=function(){var A$C=this._treeNode;A$C&&this._octreeNodeNeedChange&&(A$C.updateObject(this),this._octreeNodeNeedChange=!1)},A$R._destroy=function(){this.offAll();var A$C=0,A$R=0;for(A$C=0,A$R=this._renderElements.length;A$C<A$R;A$C++)this._renderElements[A$C]._destroy();for(A$C=0,A$R=this._materials.length;A$C<A$R;A$C++)this._materials[A$C]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},A$F(0,A$R,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),A$F(0,A$R,"id",function(){return this._id}),A$F(0,A$R,"material",function(){var A$C=this._materials[0];if(A$C&&!this._materialsInstance[0]){var A$R=this._getInstanceMaterial(A$C,0);this.event("materialchanged",[this,0,A$R])}return this._materials[0]},function(A$C){this.sharedMaterial=A$C}),A$F(0,A$R,"sharedMaterial",function(){return this._materials[0]},function(A$C){var A$R=this._materials[0];A$R!==A$C&&(this._materials[0]=A$C,this._materialsInstance[0]=!1,this._changeMaterialReference(A$R,A$C),this.event("materialchanged",[this,0,A$C]))}),A$F(0,A$R,"lightmapIndex",function(){return this._lightmapIndex},function(A$C){this._lightmapIndex=A$C,this._applyLightMapParams()}),A$F(0,A$R,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(A$C){this._lightmapScaleOffset=A$C,this._setShaderValueColor(2,A$C),this._addShaderDefine(A$uR.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),A$F(0,A$R,"enable",function(){return this._enable},function(A$C){this._enable=A$C,this.event("enablechanged",[this,A$C])}),A$F(0,A$R,"materials",function(){for(var A$C=0,A$R=this._materials.length;A$C<A$R;A$C++)if(!this._materialsInstance[A$C]){var A$j=this._getInstanceMaterial(this._materials[A$C],A$C);this.event("materialchanged",[this,A$C,A$j])}return this._materials.slice()},function(A$C){this.sharedMaterials=A$C}),A$F(0,A$R,"sharedMaterials",function(){return this._materials.slice()},function(A$C){if(!A$C)throw new Error("MeshRender: shadredMaterials value can't be null.");var A$R=A$C.length;this._materialsInstance.length=A$R;for(var A$j=0;A$j<A$R;A$j++){var A$w=this._materials[A$j];A$w!==A$C[A$j]&&(this._materialsInstance[A$j]=!1,this._changeMaterialReference(A$w,A$C[A$j]),this.event("materialchanged",[this,A$j,A$C[A$j]]))}this._materials=A$C}),A$F(0,A$R,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),A$F(0,A$R,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var A$C=this.boundingBox;A$oR.add(A$C.min,A$C.max,this._boundingBoxCenter),A$oR.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),A$F(0,A$R,"receiveShadow",function(){return this._receiveShadow},function(A$C){this._receiveShadow!==A$C&&((this._receiveShadow=A$C)?this._addShaderDefine(A$KR.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(A$KR.SHADERDEFINE_RECEIVE_SHADOW))}),A$F(0,A$R,"destroyed",function(){return this._destroyed}),A$w._uniqueIDCounter=0,A$H(A$w,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR,new A$oR]},"_greenColor",function(){return this._greenColor=new A$UR(0,1,0,1)}]),A$w}(),A$pR=function(A$C){function A$U(A$C){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,A$U.__super.call(this),this._localPosition=new A$oR,this._localRotation=new A$jR(0,0,0,1),this._localScale=new A$oR(1,1,1),this._localRotationEuler=new A$oR,this._localMatrix=new A$CR,this._position=new A$oR,this._rotation=new A$jR(0,0,0,1),this._scale=new A$oR(1,1,1),this._worldMatrix=new A$CR,this._forward=new A$oR,this._up=new A$oR,this._right=new A$oR,this._owner=A$C,this._childs=[]}A$K(A$U,"laya.d3.core.Transform3D",A$G);var A$R=A$U.prototype;return A$R._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)A$CR.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var A$C=A$U._tempVector30;A$oR.multiply(this.pivot,this._localScale,A$C);var A$R=A$U._tempVector31;A$oR.subtract(A$C,this.pivot,A$R);var A$j=A$U._tempVector32,A$w=this.localRotation;A$oR.transformQuat(A$C,A$w,A$j),A$oR.subtract(A$j,A$C,A$j);var A$T=A$U._tempVector33;A$oR.subtract(this._localPosition,A$R,A$T),A$oR.subtract(A$T,A$j,A$T),A$CR.createAffineTransformation(A$T,A$w,this._localScale,this._localMatrix)}},A$R._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldPositionRotationTransform()}},A$R._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldPositionScaleTransform()}},A$R._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldPositionTransform()}},A$R._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldPositionRotationTransform()}},A$R._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldPositionScaleTransform()}},A$R._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._onWorldTransform()}},A$R.translate=function(A$C,A$R){void 0===A$R&&(A$R=!0),A$R?(A$CR.createFromQuaternion(this.localRotation,A$U._tempMatrix0),A$oR.transformCoordinate(A$C,A$U._tempMatrix0,A$U._tempVector30),A$oR.add(this.localPosition,A$U._tempVector30,this._localPosition),this.localPosition=this._localPosition):(A$oR.add(this.position,A$C,this._position),this.position=this._position)},A$R.rotate=function(A$C,A$R,A$j){var A$w;void 0===A$R&&(A$R=!0),void 0===A$j&&(A$j=!0),A$w=A$j?A$C:(A$oR.scale(A$C,Math.PI/180,A$U._tempVector30),A$U._tempVector30),A$jR.createFromYawPitchRoll(A$w.y,A$w.x,A$w.z,A$U._tempQuaternion0),A$R?(A$jR.multiply(this._localRotation,A$U._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(A$jR.multiply(A$U._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},A$R.lookAt=function(A$C,A$R,A$j){void 0===A$j&&(A$j=!1);var A$w,A$T=A$C.elements;if(A$j){if(A$w=this._localPosition.elements,Math.abs(A$w[0]-A$T[0])<A$qC.zeroTolerance&&Math.abs(A$w[1]-A$T[1])<A$qC.zeroTolerance&&Math.abs(A$w[2]-A$T[2])<A$qC.zeroTolerance)return;A$jR.lookAt(this._localPosition,A$C,A$R,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var A$G=this.position;if(A$w=A$G.elements,Math.abs(A$w[0]-A$T[0])<A$qC.zeroTolerance&&Math.abs(A$w[1]-A$T[1])<A$qC.zeroTolerance&&Math.abs(A$w[2]-A$T[2])<A$qC.zeroTolerance)return;A$jR.lookAt(A$G,A$C,A$R,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},A$F(0,A$R,"_isFrontFaceInvert",function(){var A$C=this.scale,A$R=A$C.x<0;return A$C.y<0&&(A$R=!A$R),A$C.z<0&&(A$R=!A$R),A$R}),A$F(0,A$R,"owner",function(){return this._owner}),A$F(0,A$R,"localRotation",function(){if(this._localQuaternionUpdate){var A$C=this._localRotationEuler.elements;A$jR.createFromYawPitchRoll(A$C[1]/A$U._angleToRandin,A$C[0]/A$U._angleToRandin,A$C[2]/A$U._angleToRandin,this._localRotation)}return this._localRotation},function(A$C){this._localRotation=A$C,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),A$F(0,A$R,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?A$CR.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(A$C){null===this._parent?A$C.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),A$CR.multiply(this._localMatrix,A$C,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=A$C,this._worldUpdate=!1}),A$F(0,A$R,"worldNeedUpdate",function(){return this._worldUpdate}),A$F(0,A$R,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(A$C){this._localMatrix=A$C,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),A$F(0,A$R,"dummy",function(){return this._dummy},function(A$C){this._dummy!==A$C&&(this._dummy&&(this._dummy._entity=null),A$C&&(A$C._entity=this),this._dummy=A$C)}),A$F(0,A$R,"localPosition",function(){return this._localPosition},function(A$C){this._localPosition=A$C,this._localUpdate=!0,this._onWorldPositionTransform()}),A$F(0,A$R,"position",function(){if(this._positionUpdate){if(null!=this._parent){var A$C=this._parent.position;A$oR.multiply(this._localPosition,this._parent.scale,A$U._tempVector30),A$oR.transformQuat(A$U._tempVector30,this._parent.rotation,A$U._tempVector30),A$oR.add(A$C,A$U._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(A$C){if(null!=this._parent){A$oR.subtract(A$C,this._parent.position,this._localPosition);var A$R=this._parent.scale.elements,A$j=A$R[0],A$w=A$R[1],A$T=A$R[2];if(1!==A$j||1!==A$w||1!==A$T){var A$G=A$U._tempVector30,A$o=A$G.elements;A$o[0]=1/A$j,A$o[1]=1/A$w,A$o[2]=1/A$T,A$oR.multiply(this._localPosition,A$G,this._localPosition)}this._parent.rotation.invert(A$U._tempQuaternion0),A$oR.transformQuat(this._localPosition,A$U._tempQuaternion0,this._localPosition)}else A$C.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=A$C,this._positionUpdate=!1}),A$F(0,A$R,"localScale",function(){return this._localScale},function(A$C){this._localScale=A$C,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),A$F(0,A$R,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(A$U._tempVector30);var A$C=A$U._tempVector30.elements,A$R=this._localRotationEuler.elements;A$R[0]=A$C[1]*A$U._angleToRandin,A$R[1]=A$C[0]*A$U._angleToRandin,A$R[2]=A$C[2]*A$U._angleToRandin}return this._localRotationEuler},function(A$C){this._localRotationEuler=A$C,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),A$F(0,A$R,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?A$jR.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(A$C){null!=this._parent?(this._parent.rotation.invert(A$U._tempQuaternion0),A$jR.multiply(A$C,A$U._tempQuaternion0,this._localRotation)):A$C.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=A$C,this._rotationUpdate=!1}),A$F(0,A$R,"scale",function(){return this._scaleUpdate&&(null!==this._parent?A$oR.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(A$C){if(null!==this._parent){var A$R=this._parent.scale.elements,A$j=A$U._tempVector30.elements;A$j[0]=1/A$R[0],A$j[1]=1/A$R[1],A$j[2]=1/A$R[2],A$oR.multiply(A$C,A$U._tempVector30,this._localScale)}else A$C.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=A$C,this._scaleUpdate=!1}),A$F(0,A$R,"rotationEuler",null,function(A$C){A$jR.createFromYawPitchRoll(A$C.y,A$C.x,A$C.z,this._rotation),this.rotation=this._rotation}),A$F(0,A$R,"forward",function(){var A$C=this.worldMatrix.elements;return this._forward.elements[0]=-A$C[8],this._forward.elements[1]=-A$C[9],this._forward.elements[2]=-A$C[10],this._forward}),A$F(0,A$R,"up",function(){var A$C=this.worldMatrix.elements;return this._up.elements[0]=A$C[4],this._up.elements[1]=A$C[5],this._up.elements[2]=A$C[6],this._up}),A$F(0,A$R,"right",function(){var A$C=this.worldMatrix.elements;return this._right.elements[0]=A$C[0],this._right.elements[1]=A$C[1],this._right.elements[2]=A$C[2],this._right}),A$F(0,A$R,"parent",function(){return this._parent},function(A$C){if(this._parent!==A$C){if(this._parent){var A$R=this._parent._childs,A$j=A$R.indexOf(this);A$R.splice(A$j,1)}A$C&&(A$C._childs.push(this),A$C&&this._onWorldTransform()),this._parent=A$C}}),A$H(A$U,["_tempVector30",function(){return this._tempVector30=new A$oR},"_tempVector31",function(){return this._tempVector31=new A$oR},"_tempVector32",function(){return this._tempVector32=new A$oR},"_tempVector33",function(){return this._tempVector33=new A$oR},"_tempQuaternion0",function(){return this._tempQuaternion0=new A$jR},"_tempMatrix0",function(){return this._tempMatrix0=new A$CR},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),A$U}(),A$hR=(function(A$C){function A$R(){this._rotation=0,this._matNeedUpdte=!1,A$R.__super.call(this),this._matrix=new A$CR,this._offset=new A$GR,this._tiling=new A$GR(1,1)}A$K(A$R,"laya.d3.core.TransformUV",A$G);var A$j=A$R.prototype;A$f.imps(A$j,{"laya.d3.core.IClone":!0}),A$j._updateMatrix=function(){A$R._tempOffsetV3.elements[0]=this._offset.x,A$R._tempOffsetV3.elements[1]=this._offset.y,A$jR.createFromYawPitchRoll(0,0,this._rotation,A$R._tempRotationQua),A$R._tempTitlingV3.elements[0]=this._tiling.x,A$R._tempTitlingV3.elements[1]=this._tiling.y,A$CR.createAffineTransformation(A$R._tempOffsetV3,A$R._tempRotationQua,A$R._tempTitlingV3,this._matrix)},A$j.cloneTo=function(A$C){A$C._matrix=this._matrix.clone(),A$C._offset=this._offset.clone(),A$C._rotation=this._rotation,A$C._tiling=this._tiling.clone()},A$j.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$j,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),A$F(0,A$j,"tiling",function(){return this._tiling},function(A$C){this._tiling=A$C,this._matNeedUpdte=!0}),A$F(0,A$j,"offset",function(){return this._offset},function(A$C){this._offset=A$C,this._matNeedUpdte=!0}),A$F(0,A$j,"rotation",function(){return this._rotation},function(A$C){this._rotation=A$C,this._matNeedUpdte=!0}),A$H(A$R,["_tempOffsetV3",function(){return this._tempOffsetV3=new A$oR(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new A$jR},"_tempTitlingV3",function(){return this._tempTitlingV3=new A$oR(1,1,1)}])}(),function(A$j){function A$C(){this.x=NaN,this.y=NaN,this.z=NaN,A$C.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}A$K(A$C,"laya.d3.core.particleShuriKen.module.shape.BoxShape",A$j);var A$R=A$C.prototype;A$R._getShapeBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=.5*-this.x,A$R[1]=.5*-this.y,A$R[2]=.5*-this.z;var A$j=A$C.max.elements;A$j[0]=.5*this.x,A$j[1]=.5*this.y,A$j[2]=.5*this.z},A$R._getSpeedBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=0,A$R[1]=0,A$R[2]=0;var A$j=A$C.max.elements;A$j[0]=0,A$j[1]=1,A$j[2]=0},A$R.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements,A$G=A$R.elements;A$j?(A$j.seed=A$w[16],A$i._randomPointInsideHalfUnitBox(A$C,A$j),A$w[16]=A$j.seed):A$i._randomPointInsideHalfUnitBox(A$C),A$T[0]=this.x*A$T[0],A$T[1]=this.y*A$T[1],A$T[2]=this.z*A$T[2],this.randomDirection?A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R):(A$G[0]=0,A$G[1]=0,A$G[2]=1)},A$R.cloneTo=function(A$C){A$j.prototype.cloneTo.call(this,A$C);var A$R=A$C;A$R.x=this.x,A$R.y=this.y,A$R.z=this.z,A$R.randomDirection=this.randomDirection}}(A$V),function(A$j){function A$o(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,A$o.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}A$K(A$o,"laya.d3.core.particleShuriKen.module.shape.CircleShape",A$j);var A$C=A$o.prototype;A$C._getShapeBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[2]=-this.radius,A$R[1]=0;var A$j=A$C.max.elements;A$j[0]=A$j[2]=this.radius,A$j[1]=0},A$C._getSpeedBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[1]=-1,A$R[2]=0;var A$j=A$C.max.elements;A$j[0]=A$j[1]=1,A$j[2]=0},A$C.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements,A$G=A$o._tempPositionPoint.elements;A$j?(A$j.seed=A$w[16],this.emitFromEdge?A$i._randomPointUnitArcCircle(this.arc,A$o._tempPositionPoint,A$j):A$i._randomPointInsideUnitArcCircle(this.arc,A$o._tempPositionPoint,A$j),A$w[16]=A$j.seed):this.emitFromEdge?A$i._randomPointUnitArcCircle(this.arc,A$o._tempPositionPoint):A$i._randomPointInsideUnitArcCircle(this.arc,A$o._tempPositionPoint),A$T[0]=-A$G[0],A$T[1]=A$G[1],A$T[2]=0,A$oR.scale(A$C,this.radius,A$C),this.randomDirection?A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R):A$C.cloneTo(A$R)},A$C.cloneTo=function(A$C){A$j.prototype.cloneTo.call(this,A$C);var A$R=A$C;A$R.radius=this.radius,A$R.arc=this.arc,A$R.emitFromEdge=this.emitFromEdge,A$R.randomDirection=this.randomDirection},A$H(A$o,["_tempPositionPoint",function(){return this._tempPositionPoint=new A$GR}])}(A$V),function(A$j){function A$M(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,A$M.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}A$K(A$M,"laya.d3.core.particleShuriKen.module.shape.ConeShape",A$j);var A$C=A$M.prototype;A$C._getShapeBoundBox=function(A$C){var A$R=this.radius+this.length*Math.sin(this.angle),A$j=this.length*Math.cos(this.angle),A$w=A$C.min.elements;A$w[0]=A$w[1]=-A$R,A$w[2]=0;var A$T=A$C.max.elements;A$T[0]=A$T[1]=A$R,A$T[2]=A$j},A$C._getSpeedBoundBox=function(A$C){var A$R=Math.sin(this.angle),A$j=A$C.min.elements;A$j[0]=A$j[1]=-A$R,A$j[2]=0;var A$w=A$C.max.elements;A$w[0]=A$j[1]=A$R,A$w[2]=1},A$C.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){var A$T,A$G=A$C.elements,A$o=A$R.elements,A$U=A$M._tempPositionPoint.elements,A$t=NaN,A$I=NaN,A$e=Math.cos(this.angle),A$H=Math.sin(this.angle);switch(this.emitType){case 0:A$j?(A$j.seed=A$w[16],A$i._randomPointInsideUnitCircle(A$M._tempPositionPoint,A$j),A$w[16]=A$j.seed):A$i._randomPointInsideUnitCircle(A$M._tempPositionPoint),A$t=A$U[0],A$I=A$U[1],A$G[0]=A$t*this.radius,A$G[1]=A$I*this.radius,A$G[2]=0,this.randomDirection?(A$j?(A$j.seed=A$w[17],A$i._randomPointInsideUnitCircle(A$M._tempDirectionPoint,A$j),A$w[17]=A$j.seed):A$i._randomPointInsideUnitCircle(A$M._tempDirectionPoint),A$T=A$M._tempDirectionPoint.elements,A$o[0]=A$T[0]*A$H,A$o[1]=A$T[1]*A$H):(A$o[0]=A$t*A$H,A$o[1]=A$I*A$H),A$o[2]=A$e;break;case 1:A$j?(A$j.seed=A$w[16],A$i._randomPointUnitCircle(A$M._tempPositionPoint,A$j),A$w[16]=A$j.seed):A$i._randomPointUnitCircle(A$M._tempPositionPoint),A$t=A$U[0],A$I=A$U[1],A$G[0]=A$t*this.radius,A$G[1]=A$I*this.radius,A$G[2]=0,this.randomDirection?(A$j?(A$j.seed=A$w[17],A$i._randomPointInsideUnitCircle(A$M._tempDirectionPoint,A$j),A$w[17]=A$j.seed):A$i._randomPointInsideUnitCircle(A$M._tempDirectionPoint),A$T=A$M._tempDirectionPoint.elements,A$o[0]=A$T[0]*A$H,A$o[1]=A$T[1]*A$H):(A$o[0]=A$t*A$H,A$o[1]=A$I*A$H),A$o[2]=A$e;break;case 2:A$j?(A$j.seed=A$w[16],A$i._randomPointInsideUnitCircle(A$M._tempPositionPoint,A$j)):A$i._randomPointInsideUnitCircle(A$M._tempPositionPoint),A$t=A$U[0],A$I=A$U[1],A$G[0]=A$t*this.radius,A$G[1]=A$I*this.radius,A$o[A$G[2]=0]=A$t*A$H,A$o[1]=A$I*A$H,A$o[2]=A$e,A$oR.normalize(A$R,A$R),A$j?(A$oR.scale(A$R,this.length*A$j.getFloat(),A$R),A$w[16]=A$j.seed):A$oR.scale(A$R,this.length*Math.random(),A$R),A$oR.add(A$C,A$R,A$C),this.randomDirection&&(A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R));break;case 3:A$j?(A$j.seed=A$w[16],A$i._randomPointUnitCircle(A$M._tempPositionPoint,A$j)):A$i._randomPointUnitCircle(A$M._tempPositionPoint),A$t=A$U[0],A$I=A$U[1],A$G[0]=A$t*this.radius,A$G[1]=A$I*this.radius,A$o[A$G[2]=0]=A$t*A$H,A$o[1]=A$I*A$H,A$o[2]=A$e,A$oR.normalize(A$R,A$R),A$j?(A$oR.scale(A$R,this.length*A$j.getFloat(),A$R),A$w[16]=A$j.seed):A$oR.scale(A$R,this.length*Math.random(),A$R),A$oR.add(A$C,A$R,A$C),this.randomDirection&&(A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R));break;default:throw new Error("ConeShape:emitType is invalid.")}},A$C.cloneTo=function(A$C){A$j.prototype.cloneTo.call(this,A$C);var A$R=A$C;A$R.angle=this.angle,A$R.radius=this.radius,A$R.length=this.length,A$R.emitType=this.emitType,A$R.randomDirection=this.randomDirection},A$H(A$M,["_tempPositionPoint",function(){return this._tempPositionPoint=new A$GR},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new A$GR}])}(A$V),function(A$j){function A$C(){this.radius=NaN,this.emitFromShell=!1,A$C.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}A$K(A$C,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",A$j);var A$R=A$C.prototype;A$R._getShapeBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[1]=A$R[2]=-this.radius;var A$j=A$C.max.elements;A$j[0]=A$j[1]=this.radius,A$j[2]=0},A$R._getSpeedBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[1]=-1,A$R[2]=0;var A$j=A$C.max.elements;A$j[0]=A$j[1]=A$j[2]=1},A$R.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){var A$T=A$C.elements;A$j?(A$j.seed=A$w[16],this.emitFromShell?A$i._randomPointUnitSphere(A$C,A$j):A$i._randomPointInsideUnitSphere(A$C,A$j),A$w[16]=A$j.seed):this.emitFromShell?A$i._randomPointUnitSphere(A$C):A$i._randomPointInsideUnitSphere(A$C),A$oR.scale(A$C,this.radius,A$C);var A$G=A$T[2];A$G<0&&(A$T[2]=-1*A$G),this.randomDirection?A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R):A$C.cloneTo(A$R)},A$R.cloneTo=function(A$C){A$j.prototype.cloneTo.call(this,A$C);var A$R=A$C;A$R.radius=this.radius,A$R.emitFromShell=this.emitFromShell,A$R.randomDirection=this.randomDirection}}(A$V),function(A$j){function A$C(){this.radius=NaN,this.emitFromShell=!1,A$C.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}A$K(A$C,"laya.d3.core.particleShuriKen.module.shape.SphereShape",A$j);var A$R=A$C.prototype;A$R._getShapeBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[1]=A$R[2]=-this.radius;var A$j=A$C.max.elements;A$j[0]=A$j[1]=A$j[2]=this.radius},A$R._getSpeedBoundBox=function(A$C){var A$R=A$C.min.elements;A$R[0]=A$R[1]=A$R[2]=-1;var A$j=A$C.max.elements;A$j[0]=A$j[1]=A$j[2]=1},A$R.generatePositionAndDirection=function(A$C,A$R,A$j,A$w){A$j?(A$j.seed=A$w[16],this.emitFromShell?A$i._randomPointUnitSphere(A$C,A$j):A$i._randomPointInsideUnitSphere(A$C,A$j),A$w[16]=A$j.seed):this.emitFromShell?A$i._randomPointUnitSphere(A$C):A$i._randomPointInsideUnitSphere(A$C),A$oR.scale(A$C,this.radius,A$C),this.randomDirection?A$j?(A$j.seed=A$w[17],A$i._randomPointUnitSphere(A$R,A$j),A$w[17]=A$j.seed):A$i._randomPointUnitSphere(A$R):A$C.cloneTo(A$R)},A$R.cloneTo=function(A$C){A$j.prototype.cloneTo.call(this,A$C);var A$R=A$C;A$R.radius=this.radius,A$R.emitFromShell=this.emitFromShell,A$R.randomDirection=this.randomDirection}}(A$V),function(A$C){function A$R(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,A$R.__super.call(this)}return A$K(A$R,"laya.d3.core.render.SubMeshRenderElement",A$s),A$R}()),A$xR=function(A$C){function A$D(A$C,A$R,A$j,A$w,A$T,A$G){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=A$C,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[A$KR.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[A$uR.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[A$uR.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[A$rR.SHADERDEFINE_ALPHATEST]="ALPHATEST";A$D.__super.call(this,A$C,A$R,A$j,null,{}),this._attributeMap=A$w;var A$o;for(A$o in A$T){var A$U=A$T[A$o];switch(A$U[1]){case 0:this._renderElementUniformMap[A$o]=A$U[0];break;case 1:this._materialUniformMap[A$o]=A$U[0];break;case 2:this._spriteUniformMap[A$o]=A$U[0];break;case 3:this._cameraUniformMap[A$o]=A$U[0];break;case 4:this._sceneUniformMap[A$o]=A$U[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}A$K(A$D,"laya.d3.shader.ShaderCompile3D",A$S);var A$R=A$D.prototype;return A$R._definesToNameDic=function(A$C,A$R){for(var A$j={},A$w=1,A$T=0;A$T<32&&!(A$C<(A$w=1<<A$T));A$T++)if(A$C&A$w){var A$G=A$R[A$w];A$G&&(A$j[A$G]="")}return A$j},A$R.withCompile=function(A$C,A$R,A$j,A$w){var A$T,A$G,A$o;if(A$G=this.sharders[A$C])if(A$o=A$G[A$R]){if(A$T=A$o[A$j])return A$T}else A$o=A$G[A$R]=[];else A$o=(A$G=this.sharders[A$C]=[])[A$R]=[];var A$U,A$t=this._definesToNameDic(A$C,A$D._globalInt2name),A$I=this._definesToNameDic(A$R,this._spriteInt2name),A$e=this._definesToNameDic(A$j,this._materialInt2name),A$H={},A$M="";if(A$t)for(A$U in A$t)A$M+="#define "+A$U+"\n",A$H[A$U]=!0;if(A$I)for(A$U in A$I)A$M+="#define "+A$U+"\n",A$H[A$U]=!0;if(A$e)for(A$U in A$e)A$M+="#define "+A$U+"\n",A$H[A$U]=!0;var A$K=A$yR.nameKey.getName(this._name)+" compile ("+A$C+","+A$R+","+A$j+")",A$F=this._VS.toscript(A$H,[]),A$L=this._PS.toscript(A$H,[]);A$J.now();if(A$T=A$yR.create(A$M+A$F.join("\n"),A$M+A$L.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,A$w,A$K),A$o[A$j]=A$T,laya.d3.shader.ShaderCompile3D.debugMode)A$J.now();return A$T},A$R.precompileShaderWithShaderDefine=function(A$C,A$R,A$j){this.withCompile(A$C,A$R,A$j,!0)},A$R.addMaterialDefines=function(A$C){var A$R=A$C.defines;for(var A$j in A$R){var A$w=A$R[A$j],A$T=parseInt(A$j);this._materialInt2name[A$T]=A$w,this._materialName2Int[A$w]=A$T}},A$R.addSpriteDefines=function(A$C){var A$R=A$C.defines;for(var A$j in A$R){var A$w=A$R[A$j],A$T=parseInt(A$j);this._spriteInt2name[A$T]=A$w,this._spriteName2Int[A$w]=A$T}},A$R.getMaterialDefineByName=function(A$C){return this._materialName2Int[A$C]},A$R.registerMaterialDefine=function(A$C){var A$R=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[A$R]=A$C,this._materialName2Int[A$C]=A$R},A$R.registerSpriteDefine=function(A$C){var A$R=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[A$R]=A$C,this._spriteName2Int[A$C]=A$R},A$D._globalRegDefine=function(A$C,A$R){A$D._globalInt2name[A$R]=A$C},A$D.add=function(A$C,A$R,A$j,A$w,A$T){return laya.d3.shader.ShaderCompile3D._preCompileShader[A$C]=new A$D(A$C,A$R,A$j,A$w,A$T,A$S.includes)},A$D.get=function(A$C){return laya.d3.shader.ShaderCompile3D._preCompileShader[A$yR.nameKey.getID(A$C)]},A$D._preCompileShader={},A$D._globalInt2name=[],A$D.debugMode=!1,A$D.SHADERDEFINE_HIGHPRECISION=1,A$D.SHADERDEFINE_FOG=4,A$D.SHADERDEFINE_DIRECTIONLIGHT=8,A$D.SHADERDEFINE_POINTLIGHT=16,A$D.SHADERDEFINE_SPOTLIGHT=32,A$D.SHADERDEFINE_UV0=64,A$D.SHADERDEFINE_COLOR=128,A$D.SHADERDEFINE_UV1=256,A$D.SAHDERDEFINE_DEPTHFOG=131072,A$D}(),A$WR=function(A$C){function A$F(){A$F.__super.call(this)}A$K(A$F,"laya.d3.graphics.MeshSprite3DStaticBatchManager",A$wC);var A$R=A$F.prototype;return A$R._getStaticBatch=function(A$C,A$R,A$j,A$w){var A$T,A$G;return A$G=A$C?A$C.id.toString()+A$j.id.toString()+A$R.id.toString()+A$w.toString():A$j.id.toString()+A$R.id.toString()+A$w.toString(),this._staticBatches[A$G]?A$T=this._staticBatches[A$G]:this._staticBatches[A$G]=A$T=new A$$R(A$G,this,A$C,A$R,A$j),A$T},A$R._initStaticBatchs=function(A$C){var A$R,A$j;this._initBatchRenderElements.sort(A$F._sortPrepareStaticBatch);for(var A$w,A$T=!1,A$G=0,A$o=0,A$U=this._initBatchRenderElements.length;A$o<A$U;A$o++){var A$t,A$I=this._initBatchRenderElements[A$o],A$e=A$I.renderObj._getVertexBuffer(0);A$I._sprite3D;if(A$j===A$e.vertexDeclaration&&A$R===A$I._material)if(A$T)A$w._addCombineBatchRenderObjTest(A$I)?(A$t=A$I._staticBatch)!==A$w&&(A$t&&A$t._deleteCombineBatchRenderObj(A$I),A$w._addCombineBatchRenderObj(A$I)):(A$T=!1,A$G++);else{var A$H=this._initBatchRenderElements[A$o-1],A$M=A$H.renderObj,A$K=A$I.renderObj;A$T=!(65535<A$M._getVertexBuffer().vertexCount+A$K._getVertexBuffer().vertexCount)&&(A$w=this._getStaticBatch(A$C,A$j,A$R,A$G),(A$t=A$H._staticBatch)!==A$w&&(A$t&&A$t._deleteCombineBatchRenderObj(A$H),A$w._addCombineBatchRenderObj(A$H)),(A$t=A$I._staticBatch)!==A$w&&(A$t&&A$t._deleteCombineBatchRenderObj(A$I),A$w._addCombineBatchRenderObj(A$I)),!0)}else A$T=!1,A$G=0;A$R=A$I._material,A$j=A$e.vertexDeclaration}},A$F._sortPrepareStaticBatch=function(A$C,A$R){var A$j=A$C._render,A$w=A$R._render,A$T=A$j.lightmapIndex-A$w.lightmapIndex;if(0!=A$T)return A$T;var A$G=A$j.receiveShadow-A$w.receiveShadow;if(0!=A$G)return A$G;var A$o=A$C._mainSortID-A$R._mainSortID;return 0==A$o?A$C.renderObj.triangleCount-A$R.renderObj.triangleCount:A$o},A$F}(),A$$R=function(A$C){function A$G(A$C,A$R,A$j,A$w,A$T){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,A$G.__super.call(this,A$C,A$R,A$j),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=A$w,this._material=A$T}A$K(A$G,"laya.d3.graphics.SubMeshStaticBatch",A$TC);var A$R=A$G.prototype;return A$R._compareBatchRenderElement=function(A$C,A$R){return A$C._batchIndexStart>A$R._batchIndexStart},A$R._addCombineBatchRenderObjTest=function(A$C){var A$R=A$C.renderObj._vertexCount;return!(65535<(0<A$R?this._currentCombineVertexCount+A$R:this._currentCombineVertexCount+A$C.renderObj._getVertexBuffer().vertexCount))},A$R._addCombineBatchRenderObj=function(A$C){var A$R=A$C.renderObj,A$j=A$R._vertexCount;this._initBatchRenderElements.push(A$C),A$C._staticBatch=this,0<A$j?(this._currentCombineIndexCount+=A$R._indexCount,this._currentCombineVertexCount+=A$j):(this._currentCombineIndexCount=this._currentCombineIndexCount+A$R._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+A$R._getVertexBuffer().vertexCount),this._needFinishCombine=!0},A$R._deleteCombineBatchRenderObj=function(A$C){var A$R=A$C.renderObj,A$j=this._initBatchRenderElements.indexOf(A$C);if(-1!==A$j){this._initBatchRenderElements.splice(A$j,1),A$C._staticBatch=null;var A$w=A$R._vertexCount;0<A$w?(this._currentCombineIndexCount=this._currentCombineIndexCount-A$R._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-A$w):(this._currentCombineIndexCount=this._currentCombineIndexCount-A$R._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-A$R._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},A$R._finishInit=function(){if(this._needFinishCombine){var A$C=0,A$R=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var A$j=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),A$w=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=A$VR.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=A$kR.create("ushort",this._currentCombineIndexCount,35044);for(var A$T=0,A$G=this._initBatchRenderElements.length;A$T<A$G;A$T++){var A$o=this._initBatchRenderElements[A$T],A$U=A$o.renderObj,A$t=A$U._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,A$o._sprite3D),A$I=A$U.getIndices(),A$e=A$o._sprite3D.transform._isFrontFaceInvert,A$H=A$C/(this._vertexDeclaration.vertexStride/4)-A$U._vertexStart,A$M=A$R,A$K=A$M+A$I.length;A$o._batchIndexStart=A$M,A$o._batchIndexEnd=A$K,A$w.set(A$I,A$R);var A$F=0;if(A$e)for(A$F=A$M;A$F<A$K;A$F+=3){A$w[A$F]=A$H+A$w[A$F];var A$L=A$w[A$F+1],A$D=A$w[A$F+2];A$w[A$F+1]=A$H+A$D,A$w[A$F+2]=A$H+A$L}else for(A$F=A$M;A$F<A$K;A$F+=3)A$w[A$F]=A$H+A$w[A$F],A$w[A$F+1]=A$H+A$w[A$F+1],A$w[A$F+2]=A$H+A$w[A$F+2];A$R+=A$I.length,A$j.set(A$t,A$C),A$C+=A$t.length}this._vertexBuffer.setData(A$j),this._indexBuffer.setData(A$w),this._needFinishCombine=!1}},A$R._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new A$hR)},A$R._getRenderElement=function(A$C,A$R,A$j){for(var A$w,A$T,A$G=this._batchRenderElements.length,A$o=!0,A$U=0;A$U<A$G;A$U++){var A$t,A$I,A$e=(A$T=this._batchRenderElements[A$U])._sprite3D._render;if(0!==A$U&&(A$o=(A$t=(A$w=this._batchRenderElements[A$U-1])._sprite3D._render).lightmapIndex!==A$e.lightmapIndex||A$t.receiveShadow!==A$e.receiveShadow||A$w._batchIndexEnd!==A$T._batchIndexStart),A$o){(A$I=this._getCombineRenderElementFromPool()).renderObj=this,A$I._material=this._material,A$I._batchIndexStart=A$T._batchIndexStart,A$I._batchIndexEnd=A$T._batchIndexEnd;var A$H=A$e.lightmapIndex,A$M=A$H+1,A$K=this._batchOwnerIndices[A$M];A$K||(A$K=this._batchOwnerIndices[A$M]=[]);var A$F,A$L=A$K[A$T._render.receiveShadow?1:0];void 0===A$L?(A$K[A$e.receiveShadow?1:0]=this._batchOwners.length,(A$F=new A$cR(null,"StaticBatchMeshSprite3D"))._scene=A$R,A$F._transform=this._rootOwner?this._rootOwner._transform:null,A$F._render.lightmapIndex=A$H,A$F._render.receiveShadow=A$T._render.receiveShadow,this._batchOwners.push(A$F)):A$F=this._batchOwners[A$L],A$F._render._renderUpdate(A$j),A$I._sprite3D=A$F,A$C.push(A$I)}else A$I._batchIndexEnd=A$T._batchIndexEnd}},A$R._beforeRender=function(A$C){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},A$R._render=function(A$C){var A$R=A$C.renderElement,A$j=A$R._batchIndexStart,A$w=A$R._batchIndexEnd-A$j;A$E.mainContext.drawElements(4,A$w,5123,2*A$j),A$x.drawCall++,A$x.trianglesFaces+=A$w/3},A$R.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},A$R._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),this._vertexBuffer},A$G}(),A$AR=function(A$C){function A$R(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,A$R.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}A$K(A$R,"laya.d3.core.ComponentNode",A$I);var A$j=A$R.prototype;return A$j.addComponent=function(A$C){var A$R,A$j=this._componentsMap.indexOf(A$C);if(-1===A$j)A$R=[],this._componentsMap.push(A$C),this._typeComponentsIndices.push(A$R);else if(A$R=this._typeComponentsIndices[A$j],this._components[A$R[0]].isSingleton)throw new Error("无法单实例创建"+A$C+"组件，"+A$C+"组件已存在！");var A$w=A$T.getInstance(A$C);return A$R.push(this._components.length),this._components.push(A$w),A$w instanceof laya.d3.component.Script&&this._scripts.push(A$w),A$w._initialize(this),A$w},A$j._removeComponent=function(A$C,A$R){var A$j=this._typeComponentsIndices[A$C],A$w=A$j[A$R],A$T=this._components[A$w];this._components.splice(A$w,1),A$T instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(A$T),1),A$j.splice(A$R,1),0===A$j.length&&(this._typeComponentsIndices.splice(A$C,1),this._componentsMap.splice(A$C,1));for(var A$G=0,A$o=this._componentsMap.length;A$G<A$o;A$G++)for(var A$U=(A$j=this._typeComponentsIndices[A$G]).length-1;0<=A$U;A$U--){var A$t=A$j[A$U];if(!(A$w<A$t))break;A$j[A$U]=--A$t}A$T._destroy()},A$j.getComponentByType=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j=this._componentsMap.indexOf(A$C);return-1===A$j?null:this._components[this._typeComponentsIndices[A$j][A$R]]},A$j.getComponentsByType=function(A$C,A$R){var A$j=this._componentsMap.indexOf(A$C);if(-1!==A$j){var A$w=this._typeComponentsIndices[A$j],A$T=A$w.length;A$R.length=A$T;for(var A$G=0;A$G<A$T;A$G++)A$R[A$G]=this._components[A$w[A$G]]}else A$R.length=0},A$j.getComponentByIndex=function(A$C){return this._components[A$C]},A$j.removeComponentByType=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j=this._componentsMap.indexOf(A$C);-1!==A$j&&this._removeComponent(A$j,A$R)},A$j.removeComponentsByType=function(A$C){var A$R=this._componentsMap.indexOf(A$C);if(-1!==A$R)for(var A$j=this._typeComponentsIndices[A$R],A$w=0,A$T=A$j.length;A$w<A$T;A$j.length<A$T?A$T--:A$w++)this._removeComponent(A$R,A$w)},A$j.removeAllComponent=function(){for(var A$C=0,A$R=this._componentsMap.length;A$C<A$R;this._componentsMap.length<A$R?A$R--:A$C++)this.removeComponentsByType(this._componentsMap[A$C])},A$j._updateComponents=function(A$C){for(var A$R=0,A$j=this._components.length;A$R<A$j;A$R++){var A$w=this._components[A$R];!A$w.started&&(A$w._start(A$C),A$w.started=!0),A$w.enable&&A$w._update(A$C)}},A$j._lateUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._lateUpdate(A$C)}},A$j._preRenderUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._preRenderUpdate(A$C)}},A$j._postRenderUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._postRenderUpdate(A$C)}},A$R}(),A$rR=function(A$w){function A$C(){A$C.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new A$MR,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new A$UR(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}A$K(A$C,"laya.d3.core.material.BaseMaterial",A$w);var A$R=A$C.prototype;return A$f.imps(A$R,{"laya.d3.core.IClone":!0}),A$R._addShaderDefine=function(A$C){this._shaderDefineValue|=A$C},A$R._removeShaderDefine=function(A$C){this._shaderDefineValue&=~A$C},A$R._addDisablePublicShaderDefine=function(A$C){this._disablePublicShaderDefine|=A$C},A$R._removeDisablePublicShaderDefine=function(A$C){this._disablePublicShaderDefine&=~A$C},A$R._setBuffer=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R),this._values[A$C]=A$R},A$R._getBuffer=function(A$C){return this._values[A$C]},A$R._setMatrix4x4=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R?A$R.elements:null),this._values[A$C]=A$R},A$R._getMatrix4x4=function(A$C){return this._values[A$C]},A$R._setInt=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R),this._values[A$C]=A$R},A$R._getInt=function(A$C){return this._values[A$C]},A$R._setNumber=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R),this._values[A$C]=A$R},A$R._getNumber=function(A$C){return this._values[A$C]},A$R._setBool=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R),this._values[A$C]=A$R},A$R._getBool=function(A$C){return this._values[A$C]},A$R._setVector2=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R?A$R.elements:null),this._values[A$C]=A$R},A$R._getVector2=function(A$C){return this._values[A$C]},A$R._setColor=function(A$C,A$R){this._shaderValues.setValue(A$C,A$R?A$R.elements:null),this._values[A$C]=A$R},A$R._getColor=function(A$C){return this._values[A$C]},A$R._setTexture=function(A$C,A$R){var A$j=this._values[A$C];this._values[A$C]=A$R,this._shaderValues.setValue(A$C,A$R),0<this.referenceCount&&(A$j&&A$j._removeReference(),A$R&&A$R._addReference())},A$R._getTexture=function(A$C){return this._values[A$C]},A$R._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},A$R._getShader=function(A$C,A$R,A$j){var A$w=(A$C|A$R)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(A$w,A$j,this._shaderDefineValue),this._shader},A$R._setRenderStateBlendDepth=function(){var A$C=A$E.mainContext;switch(A$P.setDepthMask(A$C,this.depthWrite),0===this.depthTest?A$P.setDepthTest(A$C,!1):(A$P.setDepthTest(A$C,!0),A$P.setDepthFunc(A$C,this.depthTest)),this.blend){case 0:A$P.setBlend(A$C,!1);break;case 1:A$P.setBlend(A$C,!0),A$P.setBlendFunc(A$C,this.srcBlend,this.dstBlend);break;case 2:A$P.setBlend(A$C,!0)}},A$R._setRenderStateFrontFace=function(A$C,A$R){var A$j=A$E.mainContext,A$w=0;switch(this.cull){case 0:A$P.setCullFace(A$j,!1);break;case 1:A$P.setCullFace(A$j,!0),A$w=A$C?A$R&&A$R._isFrontFaceInvert?2305:2304:A$R&&A$R._isFrontFaceInvert?2304:2305,A$P.setFrontFace(A$j,A$w);break;case 2:A$P.setCullFace(A$j,!0),A$w=A$C?A$R&&A$R._isFrontFaceInvert?2304:2305:A$R&&A$R._isFrontFaceInvert?2305:2304,A$P.setFrontFace(A$j,A$w)}},A$R.onAsynLoaded=function(A$C,A$R,A$j){var A$w=A$R[0],A$T=A$R[1];switch(A$w.version){case"LAYAMATERIAL:01":var A$G=0,A$o=0,A$U=A$w.props;for(var A$t in A$U)switch(A$t){case"vectors":var A$I=A$U[A$t];for(A$G=0,A$o=A$I.length;A$G<A$o;A$G++){var A$e=A$I[A$G],A$H=A$e.value;switch(A$H.length){case 2:this[A$e.name]=new A$GR(A$H[0],A$H[1]);break;case 3:this[A$e.name]=new A$oR(A$H[0],A$H[1],A$H[2]);break;case 4:this[A$e.name]=new A$UR(A$H[0],A$H[1],A$H[2],A$H[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var A$M=A$U[A$t];for(A$G=0,A$o=A$M.length;A$G<A$o;A$G++){var A$K=A$M[A$G],A$F=A$K.path;A$F&&(this[A$K.name]=A$Q.getRes(A$T[A$F]))}break;case"defines":var A$L=A$U[A$t];for(A$G=0,A$o=A$L.length;A$G<A$o;A$G++){var A$D=this._shaderCompile.getMaterialDefineByName(A$L[A$G]);this._addShaderDefine(A$D)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[A$t]=A$U[A$t];break;case"renderQueue":switch(A$U[A$t]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[A$t]=A$U[A$t]}break;case"LAYAMATERIAL:02":for(A$t in A$U=A$w.props)switch(A$t){case"vectors":for(A$G=0,A$o=(A$I=A$U[A$t]).length;A$G<A$o;A$G++)switch((A$H=(A$e=A$I[A$G]).value).length){case 2:this[A$e.name]=new A$GR(A$H[0],A$H[1]);break;case 3:this[A$e.name]=new A$oR(A$H[0],A$H[1],A$H[2]);break;case 4:this[A$e.name]=new A$UR(A$H[0],A$H[1],A$H[2],A$H[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(A$G=0,A$o=(A$M=A$U[A$t]).length;A$G<A$o;A$G++)(A$F=(A$K=A$M[A$G]).path)&&(this[A$K.name]=A$Q.getRes(A$T[A$F]));break;case"defines":for(A$G=0,A$o=(A$L=A$U[A$t]).length;A$G<A$o;A$G++)A$D=this._shaderCompile.getMaterialDefineByName(A$L[A$G]),this._addShaderDefine(A$D);break;default:this[A$t]=A$U[A$t]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},A$R._addReference=function(){A$w.prototype._addReference.call(this);for(var A$C=0,A$R=this._values.length;A$C<A$R;A$C++){var A$j=this._values[A$C];A$j&&A$j instanceof laya.d3.resource.BaseTexture&&A$j._addReference()}},A$R._removeReference=function(){A$w.prototype._removeReference.call(this);for(var A$C=0,A$R=this._values.length;A$C<A$R;A$C++){var A$j=this._values[A$C];A$j&&A$j instanceof laya.d3.resource.BaseTexture&&A$j._removeReference()}},A$R.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},A$R.setShaderName=function(A$C){var A$R=A$yR.nameKey.getID(A$C);if(-1===A$R)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=A$xR._preCompileShader[A$R]},A$R.cloneTo=function(A$C){var A$R=A$C;A$R.name=this.name,A$R.cull=this.cull,A$R.blend=this.blend,A$R.srcBlend=this.srcBlend,A$R.dstBlend=this.dstBlend,A$R.srcBlendRGB=this.srcBlendRGB,A$R.dstBlendRGB=this.dstBlendRGB,A$R.srcBlendAlpha=this.srcBlendAlpha,A$R.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(A$R.blendConstColor),A$R.blendEquation=this.blendEquation,A$R.blendEquationRGB=this.blendEquationRGB,A$R.blendEquationAlpha=this.blendEquationAlpha,A$R.depthTest=this.depthTest,A$R.depthWrite=this.depthWrite,A$R.renderQueue=this.renderQueue,A$R._shader=this._shader,A$R._disablePublicShaderDefine=this._disablePublicShaderDefine,A$R._shaderDefineValue=this._shaderDefineValue;var A$j,A$w=0,A$T=A$R._shaderValues;A$R._shaderValues.data.length=this._shaderValues.data.length;var A$G=this._values.length,A$o=A$R._values;for(A$w=0,A$j=A$o.length=A$G;A$w<A$j;A$w++){var A$U=this._values[A$w];if(A$U)if("number"==typeof A$U)A$o[A$w]=A$U,A$T.data[A$w]=A$U;else if("number"==typeof A$U&&Math.floor(A$U)==A$U)A$o[A$w]=A$U,A$T.data[A$w]=A$U;else if("boolean"==typeof A$U)A$o[A$w]=A$U,A$T.data[A$w]=A$U;else if(A$U instanceof laya.d3.math.Vector2){var A$t=A$o[A$w]||(A$o[A$w]=new A$GR);A$U.cloneTo(A$t),A$T.data[A$w]=A$t.elements}else if(A$U instanceof laya.d3.math.Vector3){var A$I=A$o[A$w]||(A$o[A$w]=new A$oR);A$U.cloneTo(A$I),A$T.data[A$w]=A$I.elements}else if(A$U instanceof laya.d3.math.Vector4){var A$e=A$o[A$w]||(A$o[A$w]=new A$UR);A$U.cloneTo(A$e),A$T.data[A$w]=A$e.elements}else if(A$U instanceof laya.d3.math.Matrix4x4){var A$H=A$o[A$w]||(A$o[A$w]=new A$CR);A$U.cloneTo(A$H),A$T.data[A$w]=A$H.elements}else A$U instanceof laya.d3.resource.BaseTexture&&(A$o[A$w]=A$U,A$T.data[A$w]=A$U)}},A$R.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$F(0,A$R,"alphaTestValue",function(){return this._getNumber(0)},function(A$C){this._setNumber(0,A$C)}),A$F(0,A$R,"alphaTest",function(){return this._alphaTest},function(A$C){(this._alphaTest=A$C)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),A$C.__init__=function(){A$C.SHADERDEFINE_ALPHATEST=A$C.shaderDefines.registerDefine("ALPHATEST")},A$C.RENDERQUEUE_OPAQUE=2e3,A$C.RENDERQUEUE_ALPHATEST=2450,A$C.RENDERQUEUE_TRANSPARENT=3e3,A$C.CULL_NONE=0,A$C.CULL_FRONT=1,A$C.CULL_BACK=2,A$C.BLEND_DISABLE=0,A$C.BLEND_ENABLE_ALL=1,A$C.BLEND_ENABLE_SEPERATE=2,A$C.BLENDPARAM_ZERO=0,A$C.BLENDPARAM_ONE=1,A$C.BLENDPARAM_SRC_COLOR=768,A$C.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,A$C.BLENDPARAM_DST_COLOR=774,A$C.BLENDPARAM_ONE_MINUS_DST_COLOR=775,A$C.BLENDPARAM_SRC_ALPHA=770,A$C.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,A$C.BLENDPARAM_DST_ALPHA=772,A$C.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,A$C.BLENDPARAM_SRC_ALPHA_SATURATE=776,A$C.BLENDEQUATION_ADD=0,A$C.BLENDEQUATION_SUBTRACT=1,A$C.BLENDEQUATION_REVERSE_SUBTRACT=2,A$C.DEPTHTEST_OFF=0,A$C.DEPTHTEST_NEVER=512,A$C.DEPTHTEST_LESS=513,A$C.DEPTHTEST_EQUAL=514,A$C.DEPTHTEST_LEQUAL=515,A$C.DEPTHTEST_GREATER=516,A$C.DEPTHTEST_NOTEQUAL=517,A$C.DEPTHTEST_GEQUAL=518,A$C.DEPTHTEST_ALWAYS=519,A$C.SHADERDEFINE_ALPHATEST=1,A$C.ALPHATESTVALUE=0,A$H(A$C,["shaderDefines",function(){return this.shaderDefines=new A$eR}]),A$C}(A$D),A$ER=function(A$C){function A$R(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,A$R.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}A$K(A$R,"laya.d3.resource.BaseTexture",A$D);var A$j=A$R.prototype;return A$F(0,A$j,"width",function(){return this._width}),A$F(0,A$j,"repeat",function(){return this._repeat},function(A$C){if(this._repeat!==A$C&&(this._repeat=A$C,this._source)){var A$R=A$E.mainContext;A$P.bindTexture(A$R,this._type,this._source),A$b.isPOT(this._width,this._height)&&this._repeat?(A$R.texParameteri(this._type,10242,10497),A$R.texParameteri(this._type,10243,10497)):(A$R.texParameteri(this._type,10242,33071),A$R.texParameteri(this._type,10243,33071))}}),A$F(0,A$j,"height",function(){return this._height}),A$F(0,A$j,"magFifter",function(){return this._magFifter},function(A$C){(this._magFifter=A$C)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(A$C)}),A$F(0,A$j,"wrapModeV",function(){return this._wrapModeV}),A$F(0,A$j,"size",function(){return this._size}),A$F(0,A$j,"wrapModeU",function(){return this._wrapModeU}),A$F(0,A$j,"mipmap",function(){return this._mipmap},function(A$C){this._mipmap=A$C,this._mipmap!=A$C&&this._conchTexture&&this._conchTexture.setMipMap(A$C)}),A$F(0,A$j,"minFifter",function(){return this._minFifter},function(A$C){this._minFifter=A$C,this._minFifter!=A$C&&this._conchTexture&&this._conchTexture.setMinFifter(A$C)}),A$F(0,A$j,"format",function(){return this._format}),A$F(0,A$j,"source",function(){return this.activeResource(),this._source}),A$F(0,A$j,"defaulteTexture",function(){return A$BR.grayTexture}),A$R.WARPMODE_REPEAT=0,A$R.WARPMODE_CLAMP=1,A$R}(),A$PR=function(A$C){function A$R(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,A$R.__super.call(this),this._boundingBoxCorners=A$w(8,null)}A$K(A$R,"laya.d3.resource.models.BaseMesh",A$D);var A$j=A$R.prototype;return A$j._getPositions=function(){throw new Error("未Override,请重载该属性！")},A$j._generateBoundingObject=function(){this._boundingSphere=new A$OC(new A$oR,0),A$OC.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new A$YC(new A$oR,new A$oR),A$YC.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},A$j.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},A$j.getRenderElement=function(A$C){throw new Error("未Override,请重载该属性！")},A$F(0,A$j,"subMeshCount",function(){return this._subMeshCount}),A$F(0,A$j,"boundingBox",function(){return this._boundingBox}),A$F(0,A$j,"boundingBoxCorners",function(){return this._boundingBoxCorners}),A$F(0,A$j,"boundingSphere",function(){return this._boundingSphere}),A$R}(),A$JR=(function(A$C){function A$R(){A$R.__super.call(this)}A$K(A$R,"laya.d3.component.Script",A$SR);var A$j=A$R.prototype;A$j.onTriggerEnter=function(A$C){},A$j.onTriggerExit=function(A$C){},A$j.onTriggerStay=function(A$C){},A$F(0,A$j,"isSingleton",function(){return A$R._isSingleton}),A$R._isSingleton=!1}(),function(A$C){function A$R(A$C){this._owner=null,this._sharedMesh=null,A$R.__super.call(this),this._owner=A$C}A$K(A$R,"laya.d3.core.MeshFilter",A$C);var A$j=A$R.prototype;return A$j._sharedMeshLoaded=function(){this.event("loaded")},A$j._destroy=function(){A$C.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},A$F(0,A$j,"sharedMesh",function(){return this._sharedMesh},function(A$C){var A$R=this._sharedMesh;A$R&&A$R._removeReference(),(this._sharedMesh=A$C)._addReference(),this.event("meshchanged",[this,A$R,A$C]),A$C.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),A$F(0,A$j,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),A$F(0,A$j,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),A$F(0,A$j,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),A$F(0,A$j,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),A$R}(A$bR)),A$NR=function(A$C){function A$R(A$C){A$R.__super.call(this,A$C),A$C.meshFilter.on("meshchanged",this,this._onMeshChanged)}A$K(A$R,"laya.d3.core.MeshRender",A$fR);var A$j=A$R.prototype;return A$j._onMeshChanged=function(A$C,A$R,A$j){A$j.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:A$j.once("loaded",this,this._onMeshLoaed)},A$j._onMeshLoaed=function(A$C,A$R){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},A$j._calculateBoundingSphereByInitSphere=function(A$C){var A$R=NaN,A$j=this._owner.transform,A$w=A$j.scale.elements,A$T=Math.abs(A$w[0]),A$G=Math.abs(A$w[1]),A$o=Math.abs(A$w[2]);A$R=A$G<=A$T&&A$o<=A$T?A$T:A$o<=A$G?A$G:A$o,A$oR.transformCoordinate(A$C.center,A$j.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=A$C.radius*A$R},A$j._calculateBoundBoxByInitCorners=function(A$C){for(var A$R=this._owner.transform.worldMatrix,A$j=0;A$j<8;A$j++)A$oR.transformCoordinate(A$C[A$j],A$R,A$fR._tempBoundBoxCorners[A$j]);A$YC.createfromPoints(A$fR._tempBoundBoxCorners,this._boundingBox)},A$j._calculateBoundingSphere=function(){var A$C=this._owner.meshFilter.sharedMesh;null==A$C||null==A$C.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(A$C.boundingSphere)},A$j._calculateBoundingBox=function(){var A$C=this._owner.meshFilter.sharedMesh;null==A$C||null==A$C.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(A$C.boundingBoxCorners)},A$j._renderUpdate=function(A$C){var A$R=this._owner.transform;if(A$R){this._setShaderValueMatrix4x4(0,A$R.worldMatrix);var A$j=this._owner.getProjectionViewWorldMatrix(A$C);this._setShaderValueMatrix4x4(1,A$j)}else this._setShaderValueMatrix4x4(0,A$CR.DEFAULT),this._setShaderValueMatrix4x4(1,A$C);return A$QR.debugMode&&this._renderRenderableBoundBox(),!0},A$R}(),A$aR=function(A$R){function A$w(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,A$w.__super.call(this),this._renderState=new A$X,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new A$MR,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new A$RC,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new A$oR(.7,.7,.7),this.ambientColor=new A$oR(.212,.227,.259),A$E.shaderHighPrecision&&this.addShaderDefine(A$xR.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}A$K(A$w,"laya.d3.core.scene.Scene",A$R);var A$C=A$w.prototype;return A$f.imps(A$C,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),A$C._setUrl=function(A$C){this._url=A$C},A$C._getGroup=function(){return this._group},A$C._setGroup=function(A$C){this._group=A$C},A$C._display=function(){A$f.stage._scenes.push(this),A$f.stage._scenes.sort(A$w._sortScenes);for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++){var A$j=this._childs[A$C];A$j.active&&A$j._activeHierarchy()}},A$C._unDisplay=function(){var A$C=A$f.stage._scenes;A$C.splice(A$C.indexOf(this),1);for(var A$R=0,A$j=this._childs.length;A$R<A$j;A$R++){var A$w=this._childs[A$R];A$w.active&&A$w._inActiveHierarchy()}},A$C._addChild3D=function(A$C){A$C.transform._onWorldTransform(),A$C._setBelongScene(this),this.displayedInStage&&A$C.active&&A$C._activeHierarchy()},A$C._removeChild3D=function(A$C){A$C.transform.parent=null,this.displayedInStage&&A$C.active&&A$C._inActiveHierarchy(),A$C._setUnBelongScene()},A$C.initOctree=function(A$C,A$R,A$j,A$w,A$T){void 0===A$T&&(A$T=6),this.treeSize=new A$oR(A$C,A$R,A$j),this.treeLevel=A$T,this.treeRoot=new A$Y(this,0),this.treeRoot.init(A$w,this.treeSize)},A$C._prepareUpdateToRenderState=function(A$C,A$R){A$R.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,A$R.scene=this},A$C._prepareSceneToRender=function(A$C){var A$R=this._lights.length;if(0<A$R)for(var A$j=0,A$w=0;A$w<A$R&&!(this._lights[A$w]._prepareToScene(A$C)&&++A$j>=this._enableLightCount);A$w++);},A$C._updateChilds=function(A$C){for(var A$R=0,A$j=this._childs.length;A$R<A$j;++A$R)this._childs[A$R]._update(A$C)},A$C._preRenderScene=function(A$C,A$R,A$j){var A$w,A$T=A$R._viewMatrix,A$G=A$R._projectionMatrix,A$o=A$R._projectionViewMatrix,A$U=0,A$t=A$R.camera;for(A$t.useOcclusionCulling?this.treeRoot?A$jC.renderObjectCullingOctree(A$j,this,A$t,A$T,A$G,A$o):A$jC.renderObjectCulling(A$j,this,A$t,A$T,A$G,A$o):A$jC.renderObjectCullingNoBoundFrustum(this,A$t,A$T,A$G,A$o),A$U=0,A$w=this._quenes.length;A$U<A$w;A$U++)this._quenes[A$U]&&this._quenes[A$U]._preRender(A$R)},A$C._clear=function(A$C,A$R){var A$j=A$R._viewport,A$w=A$R.camera,A$T=A$j.x,A$G=A$w.renderTargetSize.height-A$j.y-A$j.height,A$o=A$j.width,A$U=A$j.height;A$C.viewport(A$T,A$G,A$o,A$U);var A$t=256,A$I=A$w.renderTarget;switch(A$w.clearFlag){case 0:var A$e=A$w.clearColor;if(A$e){A$C.enable(3089),A$C.scissor(A$T,A$G,A$o,A$U);var A$H=A$e.elements;A$C.clearColor(A$H[0],A$H[1],A$H[2],A$H[3]),A$t|=16384}if(A$I)switch(A$e||(A$t=16384),A$I.depthStencilFormat){case 33189:A$t|=256;break;case 36168:A$t|=1024;break;case 34041:A$t|=256,A$t|=1024}A$C.clear(A$t),A$e&&A$C.disable(3089);break;case 1:case 2:if(A$I)switch(A$t=16384,A$I.depthStencilFormat){case 33189:A$t|=256;break;case 36168:A$t|=1024;break;case 34041:A$t|=256,A$t|=1024}A$C.clear(A$t);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},A$C._renderScene=function(A$C,A$R){var A$j,A$w,A$T=A$R.camera,A$G=0;for(A$G=0;A$G<2;A$G++)(A$w=this._quenes[A$G])&&(A$T.renderTarget?A$w._render(A$R,!0):A$w._render(A$R,!1));if(1===A$T.clearFlag){var A$o=A$T.sky;A$o&&(A$P.setCullFace(A$C,!1),A$P.setDepthFunc(A$C,515),A$P.setDepthMask(A$C,!1),A$o._render(A$R),A$P.setDepthFunc(A$C,513),A$P.setDepthMask(A$C,!0))}for(A$G=2,A$j=this._quenes.length;A$G<A$j;A$G++)(A$w=this._quenes[A$G])&&(A$w._sortAlpha(A$R.camera.transform.position),A$T.renderTarget?A$w._render(A$R,!0):A$w._render(A$R,!1))},A$C._set3DRenderConfig=function(A$C){A$C.disable(3042),A$P._blend=!1,A$C.blendFunc(770,771),A$P._sFactor=770,A$P._dFactor=771,A$C.disable(2929),A$P._depthTest=!1,A$C.enable(2884),A$P._cullFace=!0,A$C.depthMask(1),A$P._depthMask=!0,A$C.frontFace(2304),A$P._frontFace=2304},A$C._set2DRenderConfig=function(A$C){A$P.setBlend(A$C,!0),A$P.setBlendFunc(A$C,1,771),A$P.setDepthTest(A$C,!1),A$P.setCullFace(A$C,!1),A$P.setDepthMask(A$C,!0),A$P.setFrontFace(A$C,2305),A$C.viewport(0,0,A$e.width,A$e.height)},A$C._parseCustomProps=function(A$C,A$R,A$j,A$w){var A$T=A$w.customProps.lightmaps,A$G=A$T.length,A$o=this._lightmaps;A$o.length=A$G;for(var A$U=0;A$U<A$G;A$U++)A$o[A$U]=A$Q.getRes(A$R[A$T[A$U].replace(".exr",".png")]);this.setlightmaps(A$o);var A$t=A$w.customProps.ambientColor;A$t&&(this.ambientColor=new A$oR(A$t[0],A$t[1],A$t[2]));var A$I=A$w.customProps.fogColor;A$I&&(this.fogColor=new A$oR(A$I[0],A$I[1],A$I[2]))},A$C._addLight=function(A$C){this._lights.indexOf(A$C)<0&&this._lights.push(A$C)},A$C._removeLight=function(A$C){var A$R=this._lights.indexOf(A$C);0<=A$R&&this._lights.splice(A$R,1)},A$C._updateScene=function(){var A$C=this._renderState;this._prepareUpdateToRenderState(A$E.mainContext,A$C),this._updateComponents(A$C),this._updateChilds(A$C),this._lateUpdateComponents(A$C),this._time+=A$C.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},A$C._updateSceneConch=function(){var A$C=this._renderState;this._prepareUpdateToRenderState(A$E.mainContext,A$C),this._updateComponents(A$C),this._lateUpdateComponents(A$C),this._prepareSceneToRender(A$C);for(var A$R=0,A$j=this._cameraPool.length;A$R<A$j;A$R++){var A$w=this._cameraPool[A$R];(A$C.camera=A$w)._prepareCameraToRender()}},A$C._preRenderShadow=function(A$C,A$R,A$j,A$w,A$T){this.treeRoot?A$jC.renderShadowObjectCullingOctree(this,A$R,A$j,A$w,A$T):A$jC.renderShadowObjectCulling(this,A$R,A$j,A$w,A$T);for(var A$G=0,A$o=A$j.length;A$G<A$o;A$G++)A$j[A$G]&&A$j[A$G]._preRender(A$C)},A$C._renderShadowMap=function(A$C,A$R,A$j){var A$w=this.parallelSplitShadowMaps[0];A$w._calcAllLightCameraInfo(A$j);var A$T,A$G,A$o,A$U=A$w.PSSMNum;if(this._preRenderShadow(A$R,A$w._lightCulling,A$w._shadowQuenes,A$w._lightVPMatrix[0],A$U),this.addShaderDefine(A$KR.SHADERDEFINE_CAST_SHADOW),1<A$U)for(var A$t=0;A$t<A$U;A$t++)A$T=A$w.getRenderTarget(A$t+1),A$w.beginRenderTarget(A$t+1),A$C.clearColor(1,1,1,1),A$C.clear(16640),A$C.viewport(0,0,A$T.width,A$T.height),A$R.camera=A$o=A$w.getLightCamera(A$t),A$o._prepareCameraToRender(),A$o._prepareCameraViewProject(A$o.viewMatrix,A$o.projectionMatrix),A$R._projectionViewMatrix=A$w._lightVPMatrix[A$t+1],(A$G=A$w._shadowQuenes[A$t])._preRender(A$R),A$G._renderShadow(A$R,!1),A$w.endRenderTarget(A$t+1);else A$T=A$w.getRenderTarget(1),A$w.beginRenderTarget(1),A$C.clearColor(1,1,1,1),A$C.clear(16640),A$C.viewport(0,0,A$T.width,A$T.height),A$R.camera=A$o=A$w.getLightCamera(0),A$o._prepareCameraToRender(),A$o._prepareCameraViewProject(A$o.viewMatrix,A$o.projectionMatrix),A$R._projectionViewMatrix=A$w._lightVPMatrix[0],(A$G=A$w._shadowQuenes[0])._preRender(A$R),A$G._renderShadow(A$R,!0),A$w.endRenderTarget(1);this.removeShaderDefine(A$KR.SHADERDEFINE_CAST_SHADOW)},A$C.addTreeNode=function(A$C){this.treeRoot.addTreeNode(A$C)},A$C.removeTreeNode=function(A$C){this.treeSize&&A$C._treeNode&&A$C._treeNode.removeObject(A$C)},A$C.setlightmaps=function(A$C){this._lightmaps=A$C;for(var A$R=0,A$j=this._renderableSprite3Ds.length;A$R<A$j;A$R++)this._renderableSprite3Ds[A$R]._render._applyLightMapParams()},A$C.getlightmaps=function(){return this._lightmaps},A$C.addChildAt=function(A$C,A$R){if(!(A$C instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(A$C&&A$C.__className));if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),0<=A$R&&A$R<=this._childs.length){if(A$C._parent===this){var A$j=this.getChildIndex(A$C);this._childs.splice(A$j,1),this._childs.splice(A$R,0,A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,A$R)),this._childChanged()}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(A$R,0,A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,A$R),(A$C.parent=this)._addChild3D(A$C);return A$C}throw new Error("appendChildAt:The index is out of bounds")},A$C.addChild=function(A$C){if(!(A$C instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),A$C._parent===this){var A$R=this.getChildIndex(A$C);A$R!==this._childs.length-1&&(this._childs.splice(A$R,1),this._childs.push(A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1)),this._childChanged())}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1),(A$C.parent=this)._childChanged(),this._addChild3D(A$C);return A$C},A$C.removeChildAt=function(A$C){var A$R=this.getChildAt(A$C);return A$R&&(this._removeChild3D(A$R),this._childs.splice(A$C,1),this.conchModel&&this.conchModel.removeChild(A$R.conchModel),A$R.parent=null),A$R},A$C.removeChildren=function(A$C,A$R){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=2147483647),this._childs&&0<this._childs.length){var A$j=this._childs;if(0===A$C&&A$G<=A$R){var A$w=A$j;this._childs=A$I.ARRAY_EMPTY}else A$w=A$j.splice(A$C,A$R-A$C);for(var A$T=0,A$G=A$w.length;A$T<A$G;A$T++)this._removeChild3D(A$w[A$T]),A$w[A$T].parent=null,this.conchModel&&this.conchModel.removeChild(A$w[A$T].conchModel)}return this},A$C.addFrustumCullingObject=function(A$C){this.treeRoot?this.addTreeNode(A$C):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(A$C):this._cullingRenders[this._cullingRendersLength]=A$C,A$C._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},A$C.removeFrustumCullingObject=function(A$C){if(this.treeRoot)this.removeTreeNode(A$C);else{this._cullingRendersLength--;var A$R=A$C._indexInSceneFrustumCullingObjects;if(A$R!==this._cullingRendersLength){var A$j=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[A$R]=A$j)._indexInSceneFrustumCullingObjects=A$R,A$C._indexInSceneFrustumCullingObjects=-1}}},A$C.getRenderQueue=function(A$C){return A$C<3e3?this._quenes[1]||(this._quenes[1]=new A$c(this)):this._quenes[2]||(this._quenes[2]=new A$c(this))},A$C.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new A$c(this)},A$C.addShaderDefine=function(A$C){this._shaderDefineValue|=A$C},A$C.removeShaderDefine=function(A$C){this._shaderDefineValue&=~A$C},A$C.addScript=function(A$C){return this._addComponent(A$C)},A$C.getScriptByType=function(A$C,A$R){return void 0===A$R&&(A$R=0),this._getComponentByType(A$C,A$R)},A$C.getScriptsByType=function(A$C,A$R){this._getComponentsByType(A$C,A$R)},A$C.getScriptByIndex=function(A$C){return this._getComponentByIndex(A$C)},A$C.removeScriptByType=function(A$C,A$R){void 0===A$R&&(A$R=0),this._removeComponentByType(A$C,A$R)},A$C.removeScriptsByType=function(A$C){this._removeComponentByType(A$C)},A$C.removeAllScript=function(){this._removeAllComponent()},A$C.render=function(A$C,A$R,A$j){(A$L._context.ctx._renderKey=0)<this._childs.length&&A$C.addRenderObject(this)},A$C.renderSubmit=function(){var A$C=A$E.mainContext,A$R=this._renderState;this._set3DRenderConfig(A$C),this._prepareSceneToRender(this._renderState);var A$j,A$w=0,A$T=0;if(A$QR.debugMode||A$Y.debugMode)for(A$w=0,A$T=this._cameraPool.length;A$w<A$T;A$w++)A$j=this._cameraPool[A$w],A$QR._debugPhasorSprite.begin(1,A$j),A$j.activeInHierarchy&&A$j._renderCamera(A$C,A$R,this),A$QR._debugPhasorSprite.end();else for(A$w=0,A$T=this._cameraPool.length;A$w<A$T;A$w++)(A$j=this._cameraPool[A$w]).activeInHierarchy&&A$j._renderCamera(A$C,A$R,this);return this._set2DRenderConfig(A$C),1},A$C.onAsynLoaded=function(A$C,A$R,A$j){var A$w=A$R[0];if("Scene"!==A$w.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var A$T=A$R[1];A$DR._createNodeByJson(this,A$w,this,A$T),this.event("hierarchyloaded",[this]),this.__loaded=!0},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),this.destroyed||(A$R.prototype.destroy.call(this,A$C),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,A$Q.clearRes(this.url),this.loaded||A$QR._cancelLoadByUrl(this.url))},A$C.getRenderType=function(){return 0},A$C.releaseRender=function(){},A$C._addComponent=function(A$C){var A$R,A$j=this._componentsMap.indexOf(A$C);if(-1===A$j)A$R=[],this._componentsMap.push(A$C),this._typeComponentsIndices.push(A$R);else if(A$R=this._typeComponentsIndices[A$j],this._components[A$R[0]].isSingleton)throw new Error("无法单实例创建"+A$C+"组件，"+A$C+"组件已存在！");var A$w=A$T.getInstance(A$C);A$R.push(this._components.length),this._components.push(A$w);return A$w._initialize(this),A$w},A$C._removeComponent=function(A$C,A$R){var A$j=this._typeComponentsIndices[A$C],A$w=A$j[A$R],A$T=this._components[A$w];this._components.splice(A$w,1),A$j.splice(A$R,1),0===A$j.length&&(this._typeComponentsIndices.splice(A$C,1),this._componentsMap.splice(A$C,1));for(var A$G=0,A$o=this._componentsMap.length;A$G<A$o;A$G++)for(var A$U=(A$j=this._typeComponentsIndices[A$G]).length-1;0<=A$U;A$U--){var A$t=A$j[A$U];if(!(A$w<A$t))break;A$j[A$U]=--A$t}A$T._destroy()},A$C._getComponentByType=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j=this._componentsMap.indexOf(A$C);return-1===A$j?null:this._components[this._typeComponentsIndices[A$j][A$R]]},A$C._getComponentsByType=function(A$C,A$R){var A$j=this._componentsMap.indexOf(A$C);if(-1!==A$j){var A$w=this._typeComponentsIndices[A$j],A$T=A$w.length;A$R.length=A$T;for(var A$G=0;A$G<A$T;A$G++)A$R[A$G]=this._components[A$w[A$G]]}else A$R.length=0},A$C._getComponentByIndex=function(A$C){return this._components[A$C]},A$C._removeComponentByType=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j=this._componentsMap.indexOf(A$C);-1!==A$j&&this._removeComponent(A$j,A$R)},A$C._removeComponentsByType=function(A$C){var A$R=this._componentsMap.indexOf(A$C);if(-1!==A$R)for(var A$j=this._typeComponentsIndices[A$R],A$w=0,A$T=A$j.length;A$w<A$T;A$j.length<A$T?A$T--:A$w++)this._removeComponent(A$R,A$w)},A$C._removeAllComponent=function(){for(var A$C=0,A$R=this._componentsMap.length;A$C<A$R;this._componentsMap.length<A$R?A$R--:A$C++)this._removeComponentsByType(this._componentsMap[A$C])},A$C._updateComponents=function(A$C){for(var A$R=0,A$j=this._components.length;A$R<A$j;A$R++){var A$w=this._components[A$R];!A$w.started&&(A$w._start(A$C),A$w.started=!0),A$w.enable&&A$w._update(A$C)}},A$C._lateUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._lateUpdate(A$C)}},A$C._preRenderUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._preRenderUpdate(A$C)}},A$C._postRenderUpdateComponents=function(A$C){for(var A$R=0;A$R<this._components.length;A$R++){var A$j=this._components[A$R];!A$j.started&&(A$j._start(A$C),A$j.started=!0),A$j.enable&&A$j._postRenderUpdate(A$C)}},A$F(0,A$C,"_loaded",null,function(A$C){this.__loaded=A$C}),A$F(0,A$C,"fogColor",function(){return this._fogColor},function(A$C){this._fogColor=A$C,this._shaderValues.setValue(0,A$C.elements)}),A$F(0,A$C,"enableFog",function(){return this._enableFog},function(A$C){this._enableFog!==A$C&&((this._enableFog=A$C)?(this.addShaderDefine(A$xR.SHADERDEFINE_FOG),this.removeShaderDefine(A$xR.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(A$xR.SHADERDEFINE_FOG))}),A$F(0,A$C,"url",function(){return this._url}),A$F(0,A$C,"loaded",function(){return this.__loaded}),A$F(0,A$C,"enableDepthFog",function(){return this._enableDepthFog},function(A$C){this._enableDepthFog!=A$C&&((this._enableDepthFog=A$C)?(this.addShaderDefine(A$xR.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(A$xR.SHADERDEFINE_FOG)):this.removeShaderDefine(A$xR.SAHDERDEFINE_DEPTHFOG))}),A$F(0,A$C,"fogStart",function(){return this._fogStart},function(A$C){this._fogStart=A$C,this._shaderValues.setValue(1,A$C)}),A$F(0,A$C,"fogRange",function(){return this._fogRange},function(A$C){this._fogRange=A$C,this._shaderValues.setValue(2,A$C)}),A$F(0,A$C,"ambientColor",function(){return this._ambientColor},function(A$C){this._ambientColor=A$C,this._shaderValues.setValue(21,A$C.elements)}),A$F(0,A$C,"scene",function(){return this}),A$F(0,A$C,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),A$w._sortScenes=function(A$C,A$R){if(A$C.parent!==A$f.stage||A$R.parent!==A$f.stage)return A$C.parent!==A$f.stage&&A$R.parent!==A$f.stage?A$w._sortScenes(A$C.parent,A$R.parent):A$C.parent===A$f.stage?-1:1;var A$j=A$f.stage._childs;return A$j.indexOf(A$C)-A$j.indexOf(A$R)},A$w.load=function(A$C){return A$f.loader.create(A$C,null,null,A$w)},A$w.FOGCOLOR=0,A$w.FOGSTART=1,A$w.FOGRANGE=2,A$w.LIGHTDIRECTION=3,A$w.LIGHTDIRCOLOR=4,A$w.POINTLIGHTPOS=5,A$w.POINTLIGHTRANGE=6,A$w.POINTLIGHTATTENUATION=7,A$w.POINTLIGHTCOLOR=8,A$w.SPOTLIGHTPOS=9,A$w.SPOTLIGHTDIRECTION=10,A$w.SPOTLIGHTSPOT=11,A$w.SPOTLIGHTRANGE=12,A$w.SPOTLIGHTATTENUATION=13,A$w.SPOTLIGHTCOLOR=14,A$w.SHADOWDISTANCE=15,A$w.SHADOWLIGHTVIEWPROJECT=16,A$w.SHADOWMAPPCFOFFSET=17,A$w.SHADOWMAPTEXTURE1=18,A$w.SHADOWMAPTEXTURE2=19,A$w.SHADOWMAPTEXTURE3=20,A$w.AMBIENTCOLOR=21,A$w.TIME=22,A$w}(A$h),A$nR=function(A$C){function A$R(A$C){A$R.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new A$CR,this._shaderValues=new A$MR,this._colliders=[],this._id=++A$R._uniqueIDCounter,this._transform=new A$pR(this),this.name=A$C||"Sprite3D-"+A$R._nameNumberCounter++,this.layer=A$N.currentCreationLayer,this.active=!0}A$K(A$R,"laya.d3.core.Sprite3D",A$AR);var A$j=A$R.prototype;return A$f.imps(A$j,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),A$j._setUrl=function(A$C){this._url=A$C},A$j._getGroup=function(){return this._group},A$j._setGroup=function(A$C){this._group=A$C},A$j._addChild3D=function(A$C){A$C.transform.parent=this.transform,this._hierarchyAnimator&&(!A$C._hierarchyAnimator&&A$C._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(A$C,!0,[A$C.name])),this._scene&&(A$C._setBelongScene(this._scene),this._activeInHierarchy&&A$C._active&&A$C._activeHierarchy())},A$j._removeChild3D=function(A$C){A$C.transform.parent=null,this._scene&&(this._activeInHierarchy&&A$C._active&&A$C._inActiveHierarchy(),A$C._setUnBelongScene()),this._hierarchyAnimator&&(A$C._hierarchyAnimator==this._hierarchyAnimator&&A$C._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(A$C,!1,[A$C.name]))},A$j._parseBaseCustomProps=function(A$C){var A$R=this.transform.localPosition;A$C.translate?(A$R.fromArray(A$C.translate),A$R.x*=100,A$R.y*=100,A$R.z*=100):A$R.elements.fill(0),this.transform.localPosition=A$R;var A$j=this.transform.localRotation;A$C.rotation?A$j.fromArray(A$C.rotation):A$j.fromArray([0,0,0,-1]),this.transform.localRotation=A$j;var A$w=this.transform.localScale;A$C.scale?A$w.fromArray(A$C.scale):A$w.elements.fill(1),this.transform.localScale=A$w;var A$T=A$C.layer;null!=A$T&&(this.layer=A$N.getLayerByNumber(A$T))},A$j._parseCustomComponent=function(A$C,A$R,A$j){for(var A$w in A$j){var A$T=A$j[A$w];switch(A$w){case"Animator":var A$G=this.addComponent(Animator);if(A$T.avatarPath)A$G.avatar=A$Q.getRes(A$R[A$T.avatarPath]);else{var A$o=A$T.avatar;if(A$o){A$G.avatar=A$Q.getRes(A$R[A$o.path]);var A$U=A$o.linkSprites;A$U&&A$C.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[A$G,A$U])}}for(var A$t=A$T.clipPaths,A$I=A$t.length,A$e=0;A$e<A$I;A$e++)A$G.addClip(A$Q.getRes(A$R[A$t[A$e]]));A$G.clip=A$Q.getRes(A$R[A$t[0]]);var A$H=A$T.playOnWake;void 0!==A$H&&(A$G.playOnWake=A$H);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var A$M=this.addComponent(SphereCollider);A$M.isTrigger=A$T.isTrigger;var A$K=A$M.center;A$K.fromArray(A$T.center),A$M.center=A$K,A$M.radius=A$T.radius;break;case"BoxCollider":var A$F=this.addComponent(BoxCollider);A$F.isTrigger=A$T.isTrigger,A$F.center.fromArray(A$T.center);var A$L=A$F.size;A$L.fromArray(A$T.size),A$F.size=A$L;break;case"MeshCollider":this.addComponent(MeshCollider)}}},A$j._onRootNodeHierarchyLoaded=function(A$C,A$R){for(var A$j in A$R){for(var A$w=this,A$T=A$R[A$j],A$G=0,A$o=A$T.length;A$G<A$o;A$G++){var A$U=A$T[A$G];if(""===A$U)break;if(!(A$w=A$w.getChildByName(A$U)))break}A$w&&A$C.linkSprite3DToAvatarNode(A$j,A$w)}},A$j._setHierarchyAnimator=function(A$C,A$R){this._changeHierarchyAnimator(A$C);for(var A$j=0,A$w=this._childs.length;A$j<A$w;A$j++){var A$T=this._childs[A$j];A$T._hierarchyAnimator==A$R&&A$T._setHierarchyAnimator(A$C,A$R)}},A$j._clearHierarchyAnimator=function(A$C,A$R){this._changeHierarchyAnimator(A$R);for(var A$j=0,A$w=this._childs.length;A$j<A$w;A$j++){var A$T=this._childs[A$j];A$T._hierarchyAnimator==A$C&&A$T._clearHierarchyAnimator(A$C,A$R)}},A$j._getAnimatorToLinkSprite3D=function(A$C,A$R,A$j){var A$w=this.getComponentByType(Animator);if(A$w&&(A$w.avatar?A$w.avatar._version||A$C._setAnimatorToLinkAvatar(A$w,A$R):A$C._setAnimatorToLinkSprite3DNoAvatar(A$w,A$R,A$j)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){A$j.unshift(this._parent.name);var A$T=this._parent;A$T._hierarchyAnimator&&A$T._getAnimatorToLinkSprite3D(A$C,A$R,A$j)}},A$j._setAnimatorToLinkSprite3DNoAvatar=function(A$C,A$R,A$j){var A$w=0,A$T=0;for(A$w=0,A$T=A$C.getClipCount();A$w<A$T;A$w++)A$C._handleSpriteOwnersBySprite(A$w,A$R,A$j,this);for(A$w=0,A$T=this._childs.length;A$w<A$T;A$w++){var A$G=this._childs[A$w],A$o=A$j.length;A$j.push(A$G.name),A$G._setAnimatorToLinkSprite3DNoAvatar(A$C,A$R,A$j),A$j.splice(A$o,1)}},A$j._changeHierarchyAnimator=function(A$C){this._hierarchyAnimator=A$C},A$j._isLinkSpriteToAnimationNode=function(A$C,A$R,A$j){var A$w=A$C._avatarNodes.indexOf(A$R),A$T=A$C._cacheSpriteToNodesMap;if(A$j)this._transform.dummy=A$R.transform,A$C._cacheNodesToSpriteMap[A$w]=A$T.length,A$T.push(A$w);else{this._transform.dummy=null;var A$G=A$C._cacheNodesToSpriteMap[A$w];A$C._cacheNodesToSpriteMap[A$w]=null,A$T.splice(A$G,1)}},A$j._setBelongScene=function(A$C){this._scene=A$C;for(var A$R=0,A$j=this._childs.length;A$R<A$j;A$R++)this._childs[A$R]._setBelongScene(A$C)},A$j._setUnBelongScene=function(){this._scene=null;for(var A$C=0,A$R=this._childs.length;A$C<A$R;A$C++)this._childs[A$C]._setUnBelongScene()},A$j._activeHierarchy=function(){var A$C=0,A$R=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),A$C=0,A$R=this._colliders.length;A$C<A$R;A$C++)this._layer._addCollider(this._colliders[A$C]);for(this.event("activeinhierarchychanged",!0),A$C=0,A$R=this._childs.length;A$C<A$R;A$C++){var A$j=this._childs[A$C];A$j._active&&A$j._activeHierarchy()}},A$j._inActiveHierarchy=function(){var A$C=0,A$R=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),A$C=0,A$R=this._colliders.length;A$C<A$R;A$C++){var A$j=this._colliders[A$C];A$j._clearCollsionMap(),this._layer._removeCollider(A$j)}for(this.event("activeinhierarchychanged",!1),A$C=0,A$R=this._childs.length;A$C<A$R;A$C++){var A$w=this._childs[A$C];A$w._active&&A$w._inActiveHierarchy()}},A$j.addComponent=function(A$C){var A$R,A$j=this._componentsMap.indexOf(A$C);if(-1===A$j)A$R=[],this._componentsMap.push(A$C),this._typeComponentsIndices.push(A$R);else if(A$R=this._typeComponentsIndices[A$j],this._components[A$R[0]].isSingleton)throw new Error("无法单实例创建"+A$C+"组件，"+A$C+"组件已存在！");var A$w=A$T.getInstance(A$C);return A$R.push(this._components.length),this._components.push(A$w),A$w instanceof laya.d3.component.Script&&this._scripts.push(A$w),A$w._initialize(this),A$w},A$j._removeComponent=function(A$C,A$R){var A$j,A$w=0,A$T=this._typeComponentsIndices[A$C],A$G=A$T[A$R],A$o=this._components[A$G];for(A$o instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(A$o),1),A$T.splice(A$R,1),0===A$T.length&&(this._typeComponentsIndices.splice(A$C,1),this._componentsMap.splice(A$C,1)),A$w=0,A$j=this._componentsMap.length;A$w<A$j;A$w++)for(var A$U=(A$T=this._typeComponentsIndices[A$w]).length-1;0<=A$U;A$U--){var A$t=A$T[A$U];if(!(A$G<A$t))break;A$T[A$U]=--A$t}A$o._destroy()},A$j._clearSelfRenderObjects=function(){},A$j._addSelfRenderObjects=function(){},A$j._parseCustomProps=function(A$C,A$R,A$j,A$w){},A$j._updateChilds=function(A$C){var A$R=this._childs.length;if(0!==A$R)for(var A$j=0;A$j<A$R;++A$j)this._childs[A$j]._update(A$C)},A$j._getSortID=function(A$C,A$R){return 1e3*A$R.id+A$C._getVertexBuffer().vertexDeclaration.id},A$j._update=function(A$C){(A$C.owner=this)._activeInHierarchy&&(this._updateComponents(A$C),this._lateUpdateComponents(A$C),A$x.spriteCount++,this._childs.length&&this._updateChilds(A$C))},A$j.getProjectionViewWorldMatrix=function(A$C){return A$CR.multiply(A$C,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},A$j.loadHierarchy=function(A$C){this.addChild(laya.d3.core.Sprite3D.load(A$C))},A$j.addChildAt=function(A$C,A$R){if(!(A$C instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),0<=A$R&&A$R<=this._childs.length){if(A$C._parent===this){var A$j=this.getChildIndex(A$C);this._childs.splice(A$j,1),this._childs.splice(A$R,0,A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,A$R)),this._childChanged()}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(A$R,0,A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,A$R),(A$C.parent=this)._addChild3D(A$C);return A$C}throw new Error("appendChildAt:The index is out of bounds")},A$j.addChild=function(A$C){if(!(A$C instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!A$C||this.destroyed||A$C===this)return A$C;if(A$C.zOrder&&this._set$P("hasZorder",!0),A$C._parent===this){var A$R=this.getChildIndex(A$C);A$R!==this._childs.length-1&&(this._childs.splice(A$R,1),this._childs.push(A$C),this.conchModel&&(this.conchModel.removeChild(A$C.conchModel),this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1)),this._childChanged())}else A$C.parent&&A$C.parent.removeChild(A$C),this._childs===A$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(A$C),this.conchModel&&this.conchModel.addChildAt(A$C.conchModel,this._childs.length-1),(A$C.parent=this)._childChanged(),this._addChild3D(A$C);return A$C},A$j.removeChildAt=function(A$C){var A$R=this.getChildAt(A$C);return A$R&&(this._removeChild3D(A$R),this._childs.splice(A$C,1),this.conchModel&&this.conchModel.removeChild(A$R.conchModel),A$R.parent=null),A$R},A$j.removeChildren=function(A$C,A$R){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=2147483647),this._childs&&0<this._childs.length){var A$j=this._childs;if(0===A$C&&A$G<=A$R){var A$w=A$j;this._childs=A$I.ARRAY_EMPTY}else A$w=A$j.splice(A$C,A$R-A$C);for(var A$T=0,A$G=A$w.length;A$T<A$G;A$T++)this._removeChild3D(A$w[A$T]),A$w[A$T].parent=null,this.conchModel&&this.conchModel.removeChild(A$w[A$T].conchModel)}return this},A$j.onAsynLoaded=function(A$C,A$R,A$j){var A$w=A$R[0];if("Sprite3D"!==A$w.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var A$T=A$R[1];A$DR._createNodeByJson(this,A$w,this,A$T),this.event("hierarchyloaded",[this]),this.__loaded=!0},A$j.cloneTo=function(A$C){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var A$R=A$C;A$R.name=this.name,A$R._destroyed=this._destroyed,A$R.timer=this.timer,A$R._$P=this._$P,A$R.active=this._active;var A$j=A$R.transform.localPosition;this.transform.localPosition.cloneTo(A$j),A$R.transform.localPosition=A$j;var A$w=A$R.transform.localRotation;this.transform.localRotation.cloneTo(A$w),A$R.transform.localRotation=A$w;var A$T=A$R.transform.localScale;this.transform.localScale.cloneTo(A$T),A$R.transform.localScale=A$T,A$R.isStatic=this.isStatic;var A$G=0,A$o=0;for(A$G=0,A$o=this._componentsMap.length;A$G<A$o;A$G++){var A$U=A$R.addComponent(this._componentsMap[A$G]);this._components[A$G]._cloneTo(A$U)}for(A$G=0,A$o=this._childs.length;A$G<A$o;A$G++)A$R.addChild(this._childs[A$G].clone());var A$t=A$R.getComponentByType(Animator);if(A$t){var A$I=A$t._linkSpritesData;if(A$I)for(var A$e in A$I){for(var A$H=A$I[A$e],A$M=A$R,A$K=0,A$F=A$H.length;A$K<A$F&&(A$M=A$M.getChildByName(A$H[A$K]));A$K++);if(A$M){var A$L=A$t._avatarNodeMap[A$e];A$M._isLinkSpriteToAnimationNode(A$t,A$L,!0)}}}},A$j.clone=function(){var A$C=new this.constructor;return this.cloneTo(A$C),A$C},A$j.destroy=function(A$C){if(void 0===A$C&&(A$C=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,A$C);var A$R,A$j=0;for(A$j=0,A$R=this._components.length;A$j<A$R;A$j++)this._components[A$j]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,A$Q.clearRes(this.url),this.loaded||A$QR._cancelLoadByUrl(this.url)}},A$j._handleSpriteToAvatar=function(A$C,A$R){A$C._avatarNodes;var A$j=A$C._avatarNodeMap[this.name];A$j&&A$j.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(A$C,A$j,A$R)},A$j._setAnimatorToLinkAvatar=function(A$C,A$R){this._handleSpriteToAvatar(A$C,A$R);for(var A$j=0,A$w=this._childs.length;A$j<A$w;A$j++){this._childs[A$j]._setAnimatorToLinkAvatar(A$C,A$R)}},A$F(0,A$j,"activeInHierarchy",function(){return this._activeInHierarchy}),A$F(0,A$j,"_loaded",null,function(A$C){this.__loaded=A$C}),A$F(0,A$j,"active",function(){return this._active},function(A$C){this._active!==A$C&&(this._active=A$C,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(A$C?this._activeHierarchy():this._inActiveHierarchy()))}),A$F(0,A$j,"componentsCount",function(){return this._components.length}),A$F(0,A$j,"loaded",function(){return this.__loaded}),A$F(0,A$j,"id",function(){return this._id}),A$F(0,A$j,"url",function(){return this._url}),A$F(0,A$j,"layer",function(){return this._layer},function(A$C){if(this._layer!==A$C){if(!A$C)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var A$R=0,A$j=this._colliders.length;if(this._layer)for(A$R=0;A$R<A$j;A$R++)this._layer._removeCollider(this._colliders[A$R]);for(A$R=0;A$R<A$j;A$R++)A$C._addCollider(this._colliders[A$R])}this._layer=A$C,this.event("layerchanged",A$C)}}),A$F(0,A$j,"scene",function(){return this._scene}),A$F(0,A$j,"transform",function(){return this._transform}),A$R.instantiate=function(A$C,A$R,A$j,A$w,A$T){void 0===A$j&&(A$j=!0);var A$G=A$C.clone();A$R&&A$R.addChild(A$G);var A$o=A$G.transform;if(A$j){var A$U=A$o.worldMatrix;A$C.transform.worldMatrix.cloneTo(A$U),A$o.worldMatrix=A$U}else A$w&&(A$o.position=A$w),A$T&&(A$o.rotation=A$T);return A$G},A$R.load=function(A$C){return A$f.loader.create(A$C,null,null,A$R)},A$R.WORLDMATRIX=0,A$R.MVPMATRIX=1,A$R._uniqueIDCounter=0,A$R._nameNumberCounter=0,A$R}(),A$yR=function(A$C){function A$e(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],A$e.__super.call(this),!A$C||!A$R)throw"Shader Error";this._id=++A$e._count,this._vs=A$C,this._ps=A$R,this._attributeMap=A$j,this._sceneUniformMap=A$w,this._cameraUniformMap=A$T,this._spriteUniformMap=A$G,this._materialUniformMap=A$o,this._renderElementUniformMap=A$U,this._precompile=A$t,this._define=A$I,this._precompile&&A$e.extCompileObj&&A$e.extCompileFunc?A$e.extCompileFunc.call(A$e.extCompileObj,A$C,A$R,A$I):this.recreateResource()}A$K(A$e,"laya.d3.shader.Shader3D",A$j);var A$R=A$e.prototype;return A$R.recreateResource=function(){A$J.now();this._compile(),this.completeCreate(),this.memorySize=0},A$R.disposeResource=function(){A$E.mainContext.deleteShader(this._vshader),A$E.mainContext.deleteShader(this._pshader),A$E.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},A$R._compile=function(){if(!A$E.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var A$C=[this._vs,this._ps],A$R=A$E.mainContext;if(this._program=A$R.createProgram(),this._vshader=A$e._createShader(A$R,A$C[0],35633),this._pshader=A$e._createShader(A$R,A$C[1],35632),A$R.attachShader(this._program,this._vshader),A$R.attachShader(this._program,this._pshader),A$R.linkProgram(this._program),!A$L.isConchApp&&A$xR.debugMode&&!A$R.getProgramParameter(this._program,35714))throw A$R.getProgramInfoLog(this._program);var A$j,A$w=0,A$T=0,A$G=0;for(A$G=A$L.isConchApp?A$R.getProgramParameterEx(this._vs,this._ps,"",35721):A$R.getProgramParameter(this._program,35721),A$w=0;A$w<A$G;A$w++){var A$o=null;A$j={vartype:"attribute",ivartype:0,attrib:A$o=A$L.isConchApp?A$R.getActiveAttribEx(this._vs,this._ps,"",A$w):A$R.getActiveAttrib(this._program,A$w),location:A$R.getAttribLocation(this._program,A$o.name),name:A$o.name,type:A$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(A$j)}var A$U=0;for(A$U=A$L.isConchApp?A$R.getProgramParameterEx(this._vs,this._ps,"",35718):A$R.getProgramParameter(this._program,35718),A$w=0;A$w<A$U;A$w++){var A$t=null;A$t=A$L.isConchApp?A$R.getActiveUniformEx(this._vs,this._ps,"",A$w):A$R.getActiveUniform(this._program,A$w),0<(A$j={vartype:"uniform",ivartype:1,attrib:A$o,location:A$R.getUniformLocation(this._program,A$t.name),name:A$t.name,type:A$t.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(A$j.name=A$j.name.substr(0,A$j.name.length-3),A$j.isArray=!0,A$j.location=A$R.getUniformLocation(this._program,A$j.name)),this._uniformParams.push(A$j)}for(A$w=0,A$T=this._attributeParams.length;A$w<A$T;A$w++)(A$j=this._attributeParams[A$w]).indexOfParams=A$w,A$j.index=1,A$j.value=[A$j.location,null],A$j.codename=A$j.name,A$j.name=null!=this._attributeMap[A$j.codename]?this._attributeMap[A$j.codename]:A$j.codename,this._attributeParamsMap.push(A$j.name),this._attributeParamsMap.push(A$j),A$j._this=this,A$j.uploadedValue=[],A$j.fun=this._attribute;for(A$w=0,A$T=this._uniformParams.length;A$w<A$T;A$w++)switch((A$j=this._uniformParams[A$w]).indexOfParams=A$w,A$j.index=1,A$j.value=[A$j.location,null],A$j.codename=A$j.name,null!=this._sceneUniformMap[A$j.codename]?(A$j.name=this._sceneUniformMap[A$j.codename],this._sceneUniformParamsMap.push(A$j.name),this._sceneUniformParamsMap.push(A$j)):null!=this._cameraUniformMap[A$j.codename]?(A$j.name=this._cameraUniformMap[A$j.codename],this._cameraUniformParamsMap.push(A$j.name),this._cameraUniformParamsMap.push(A$j)):null!=this._spriteUniformMap[A$j.codename]?(A$j.name=this._spriteUniformMap[A$j.codename],this._spriteUniformParamsMap.push(A$j.name),this._spriteUniformParamsMap.push(A$j)):null!=this._materialUniformMap[A$j.codename]?(A$j.name=this._materialUniformMap[A$j.codename],this._materialUniformParamsMap.push(A$j.name),this._materialUniformParamsMap.push(A$j)):null!=this._renderElementUniformMap[A$j.codename]?(A$j.name=this._renderElementUniformMap[A$j.codename],this._renderElementUniformParamsMap.push(A$j.name),this._renderElementUniformParamsMap.push(A$j)):console.log("Shader:can't find uinform name:"+A$j.codename+" in shader file."),A$j._this=this,A$j.uploadedValue=[],A$j.type){case 5124:A$j.fun=A$j.isArray?this._uniform1iv:this._uniform1i;break;case 5126:A$j.fun=A$j.isArray?this._uniform1fv:this._uniform1f;break;case 35664:A$j.fun=A$j.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:A$j.fun=A$j.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:A$j.fun=A$j.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:A$j.fun=this._uniform_sampler2D;break;case 35680:A$j.fun=this._uniform_samplerCube;break;case 35676:A$j.fun=this._uniformMatrix4fv;break;case 35670:A$j.fun=this._uniform1i;break;case 35674:A$j.fun=this._uinformMatrix2fv;break;case 35675:A$j.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},A$R._attribute=function(A$C,A$R){var A$j=A$E.mainContext,A$w=A$U._enableAtributes,A$T=A$C.location;return A$w[A$T]||A$j.enableVertexAttribArray(A$T),A$j.vertexAttribPointer(A$T,A$R[0],A$R[1],A$R[2],A$R[3],A$R[4]),A$w[A$T]=A$U._bindVertexBuffer,1},A$R._uniform1f=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R?(A$E.mainContext.uniform1f(A$C.location,A$j[0]=A$R),1):0},A$R._uniform1fv=function(A$C,A$R){if(A$R.length<4){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$E.mainContext.uniform1fv(A$C.location,A$R),A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3],1):0}return A$E.mainContext.uniform1fv(A$C.location,A$R),1},A$R._uniform_vec2=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]?(A$E.mainContext.uniform2f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1]),1):0},A$R._uniform_vec2v=function(A$C,A$R){if(A$R.length<2){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$E.mainContext.uniform2fv(A$C.location,A$R),A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3],1):0}return A$E.mainContext.uniform2fv(A$C.location,A$R),1},A$R._uniform_vec3=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]?(A$E.mainContext.uniform3f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2]),1):0},A$R._uniform_vec3v=function(A$C,A$R){return A$E.mainContext.uniform3fv(A$C.location,A$R),1},A$R._uniform_vec4=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$E.mainContext.uniform4f(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3]),1):0},A$R._uniform_vec4v=function(A$C,A$R){return A$E.mainContext.uniform4fv(A$C.location,A$R),1},A$R._uniformMatrix2fv=function(A$C,A$R){return A$E.mainContext.uniformMatrix2fv(A$C.location,!1,A$R),1},A$R._uniformMatrix3fv=function(A$C,A$R){return A$E.mainContext.uniformMatrix3fv(A$C.location,!1,A$R),1},A$R._uniformMatrix4fv=function(A$C,A$R){return A$E.mainContext.uniformMatrix4fv(A$C.location,!1,A$R),1},A$R._uinformMatrix2fv=function(A$C,A$R){return A$E.mainContext.uniformMatrix2fv(A$C.location,!1,A$R),1},A$R._uinformMatrix3fv=function(A$C,A$R){return A$E.mainContext.uniformMatrix3fv(A$C.location,!1,A$R),1},A$R._uniform1i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R?(A$E.mainContext.uniform1i(A$C.location,A$j[0]=A$R),1):0},A$R._uniform1iv=function(A$C,A$R){return A$E.mainContext.uniform1iv(A$C.location,A$R),1},A$R._uniform_ivec2=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]?(A$E.mainContext.uniform2i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1]),1):0},A$R._uniform_ivec2v=function(A$C,A$R){return A$E.mainContext.uniform2iv(A$C.location,A$R),1},A$R._uniform_vec3i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]?(A$E.mainContext.uniform3i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2]),1):0},A$R._uniform_vec3vi=function(A$C,A$R){return A$E.mainContext.uniform3iv(A$C.location,A$R),1},A$R._uniform_vec4i=function(A$C,A$R){var A$j=A$C.uploadedValue;return A$j[0]!==A$R[0]||A$j[1]!==A$R[1]||A$j[2]!==A$R[2]||A$j[3]!==A$R[3]?(A$E.mainContext.uniform4i(A$C.location,A$j[0]=A$R[0],A$j[1]=A$R[1],A$j[2]=A$R[2],A$j[3]=A$R[3]),1):0},A$R._uniform_vec4vi=function(A$C,A$R){return A$E.mainContext.uniform4iv(A$C.location,A$R),1},A$R._uniform_sampler2D=function(A$C,A$R){var A$j=A$R.source||A$R.defaulteTexture.source,A$w=A$E.mainContext,A$T=A$C.uploadedValue;if(null!=A$T[0])return A$w.activeTexture(A$e._TEXTURES[A$T[0]]),A$j&&A$P.bindTexture(A$w,3553,A$j),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return A$T[0]=this._curActTexIndex,A$w.uniform1i(A$C.location,this._curActTexIndex),A$w.activeTexture(A$e._TEXTURES[this._curActTexIndex]),A$j&&A$P.bindTexture(A$w,3553,A$j),this._curActTexIndex++,1},A$R._uniform_samplerCube=function(A$C,A$R){var A$j=A$R.source||A$R.defaulteTexture.source,A$w=A$E.mainContext,A$T=A$C.uploadedValue;if(null!=A$T[0])return A$w.activeTexture(A$e._TEXTURES[A$T[0]]),A$j?A$P.bindTexture(A$w,34067,A$j):A$P.bindTexture(A$w,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return A$T[0]=this._curActTexIndex,A$w.uniform1i(A$C.location,this._curActTexIndex),A$w.activeTexture(A$e._TEXTURES[this._curActTexIndex]),A$j?A$P.bindTexture(A$w,34067,A$j):A$P.bindTexture(A$w,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},A$R._noSetValue=function(A$C){console.log("no....:"+A$C.name)},A$R.bind=function(){return A$j.activeShader=this,(A$j.bindShader=this).activeResource(),A$P.UseProgram(this._program)},A$R.uploadAttributes=function(A$C,A$R){for(var A$j,A$w,A$T=0,A$G=0,A$o=this._attributeParamsMap.length;A$G<A$o;A$G+=2)A$w=this._attributeParamsMap[A$G+1],null!=(A$j=A$C[this._attributeParamsMap[A$G]])&&(A$R&&A$R[A$w.name]&&A$R[A$w.name].bind(),A$T+=A$w.fun.call(this,A$w,A$j));A$x.shaderCall+=A$T},A$R.uploadAttributesX=function(A$C,A$R){for(var A$j,A$w,A$T=0,A$G=0,A$o=this._attributeParamsMap.length;A$G<A$o;A$G+=2)A$w=this._attributeParamsMap[A$G+1],null!=(A$j=A$C[this._attributeParamsMap[A$G]])&&(A$R._bind(),A$T+=A$w.fun.call(this,A$w,A$j));A$x.shaderCall+=A$T},A$R.uploadSceneUniforms=function(A$C){for(var A$R,A$j,A$w=0,A$T=0,A$G=this._sceneUniformParamsMap.length;A$T<A$G;A$T+=2)A$j=this._sceneUniformParamsMap[A$T+1],null!=(A$R=A$C[this._sceneUniformParamsMap[A$T]])&&(A$w+=A$j.fun.call(this,A$j,A$R));A$x.shaderCall+=A$w},A$R.uploadCameraUniforms=function(A$C){for(var A$R,A$j,A$w=0,A$T=0,A$G=this._cameraUniformParamsMap.length;A$T<A$G;A$T+=2)A$j=this._cameraUniformParamsMap[A$T+1],null!=(A$R=A$C[this._cameraUniformParamsMap[A$T]])&&(A$w+=A$j.fun.call(this,A$j,A$R));A$x.shaderCall+=A$w},A$R.uploadSpriteUniforms=function(A$C){for(var A$R,A$j,A$w=0,A$T=0,A$G=this._spriteUniformParamsMap.length;A$T<A$G;A$T+=2)A$j=this._spriteUniformParamsMap[A$T+1],null!=(A$R=A$C[this._spriteUniformParamsMap[A$T]])&&(A$w+=A$j.fun.call(this,A$j,A$R));A$x.shaderCall+=A$w},A$R.uploadMaterialUniforms=function(A$C){for(var A$R,A$j,A$w=0,A$T=0,A$G=this._materialUniformParamsMap.length;A$T<A$G;A$T+=2)A$j=this._materialUniformParamsMap[A$T+1],null!=(A$R=A$C[this._materialUniformParamsMap[A$T]])&&(A$w+=A$j.fun.call(this,A$j,A$R));A$x.shaderCall+=A$w},A$R.uploadRenderElementUniforms=function(A$C){for(var A$R,A$j,A$w=0,A$T=0,A$G=this._renderElementUniformParamsMap.length;A$T<A$G;A$T+=2)A$j=this._renderElementUniformParamsMap[A$T+1],null!=(A$R=A$C[this._renderElementUniformParamsMap[A$T]])&&(A$w+=A$j.fun.call(this,A$j,A$R));A$x.shaderCall+=A$w},A$e.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return new A$e(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I)},A$e.addInclude=function(A$C,A$R){A$S.addInclude(A$C,A$R)},A$e._createShader=function(A$C,A$R,A$j){var A$w=A$C.createShader(A$j);if(A$C.shaderSource(A$w,A$R),A$C.compileShader(A$w),A$xR.debugMode&&!A$C.getShaderParameter(A$w,35713))throw A$C.getShaderInfoLog(A$w);return A$w},A$e.PERIOD_RENDERELEMENT=0,A$e.PERIOD_MATERIAL=1,A$e.PERIOD_SPRITE=2,A$e.PERIOD_CAMERA=3,A$e.PERIOD_SCENE=4,A$e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],A$e._count=0,A$e._preCompile=!1,A$e.extCompileFunc=null,A$e.extCompileObj=null,A$H(A$e,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new A$W}]),A$e}(),A$mR=function(A$U){function A$t(){this._transformUV=null,A$t.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new A$oR(.6,.6,.6)),this._setColor(10,new A$oR(1,1,1)),this._setColor(11,new A$UR(1,1,1,8)),this._setColor(12,new A$oR(1,1,1)),this._setColor(7,new A$UR(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new A$UR(1,1,0,0)),this.renderMode=1}A$K(A$t,"laya.d3.core.material.StandardMaterial",A$U);var A$C=A$t.prototype;return A$C.disableLight=function(){this._addDisablePublicShaderDefine(A$xR.SHADERDEFINE_POINTLIGHT|A$xR.SHADERDEFINE_SPOTLIGHT|A$xR.SHADERDEFINE_DIRECTIONLIGHT)},A$C.disableFog=function(){this._addDisablePublicShaderDefine(A$xR.SHADERDEFINE_FOG)},A$C.onAsynLoaded=function(A$C,A$R,A$j){var A$w=A$R[0];if(A$w.version)A$U.prototype.onAsynLoaded.call(this,A$C,A$R,A$j);else{var A$T=A$R[1],A$G=A$w.props;for(var A$o in A$G)this[A$o]=A$G[A$o];A$t._parseStandardMaterial(A$T,this,A$w),this._endLoaded()}},A$C.cloneTo=function(A$C){A$U.prototype.cloneTo.call(this,A$C);var A$R=A$C;this._transformUV&&(A$R._transformUV=this._transformUV.clone())},A$F(0,A$C,"ambientColor",function(){return this._getColor(9)},function(A$C){this._setColor(9,A$C)}),A$F(0,A$C,"ambientTexture",function(){return this._getTexture(5)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,A$C)}),A$F(0,A$C,"renderMode",null,function(A$C){switch(A$C){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(A$t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(A$C)}),A$F(0,A$C,"reflectColor",function(){return this._getColor(12)},function(A$C){this._setColor(12,A$C)}),A$F(0,A$C,"tilingOffset",function(){return this._getColor(15)},function(A$C){if(A$C){var A$R=A$C.elements;1!=A$R[0]||1!=A$R[1]||0!=A$R[2]||0!=A$R[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,A$C)}),A$F(0,A$C,"albedo",function(){return this._getColor(7)},function(A$C){this._setColor(7,A$C)}),A$F(0,A$C,"diffuseColor",function(){return this._getColor(10)},function(A$C){this._setColor(10,A$C)}),A$F(0,A$C,"albedoColor",function(){return this._getColor(7)},function(A$C){this._setColor(7,A$C)}),A$F(0,A$C,"specularColor",function(){return this._getColor(11)},function(A$C){this._setColor(11,A$C)}),A$F(0,A$C,"diffuseTexture",function(){return this._getTexture(1)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,A$C)}),A$F(0,A$C,"normalTexture",function(){return this._getTexture(2)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,A$C)}),A$F(0,A$C,"specularTexture",function(){return this._getTexture(3)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,A$C)}),A$F(0,A$C,"emissiveTexture",function(){return this._getTexture(4)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,A$C)}),A$F(0,A$C,"reflectTexture",function(){return this._getTexture(6)},function(A$C){A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,A$C)}),A$F(0,A$C,"transformUV",function(){return this._transformUV},function(A$C){this._transformUV=A$C,this._setMatrix4x4(13,A$C.matrix),A$C?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,A$C.matrix.elements,0)}),A$t.__init__=function(){A$t.SHADERDEFINE_DIFFUSEMAP=A$t.shaderDefines.registerDefine("DIFFUSEMAP"),A$t.SHADERDEFINE_NORMALMAP=A$t.shaderDefines.registerDefine("NORMALMAP"),A$t.SHADERDEFINE_SPECULARMAP=A$t.shaderDefines.registerDefine("SPECULARMAP"),A$t.SHADERDEFINE_EMISSIVEMAP=A$t.shaderDefines.registerDefine("EMISSIVEMAP"),A$t.SHADERDEFINE_AMBIENTMAP=A$t.shaderDefines.registerDefine("AMBIENTMAP"),A$t.SHADERDEFINE_REFLECTMAP=A$t.shaderDefines.registerDefine("REFLECTMAP"),A$t.SHADERDEFINE_UVTRANSFORM=A$t.shaderDefines.registerDefine("UVTRANSFORM"),A$t.SHADERDEFINE_TILINGOFFSET=A$t.shaderDefines.registerDefine("TILINGOFFSET"),A$t.SHADERDEFINE_ADDTIVEFOG=A$t.shaderDefines.registerDefine("ADDTIVEFOG")},A$t.load=function(A$C){return A$f.loader.create(A$C,null,null,A$t)},A$t._parseStandardMaterial=function(A$C,A$R,A$j){var A$w=A$j.customProps,A$T=A$w.ambientColor;A$R.ambientColor=new A$oR(A$T[0],A$T[1],A$T[2]);var A$G=A$w.diffuseColor;A$R.diffuseColor=new A$oR(A$G[0],A$G[1],A$G[2]);var A$o=A$w.specularColor;A$R.specularColor=new A$UR(A$o[0],A$o[1],A$o[2],A$o[3]);var A$U=A$w.reflectColor;A$R.reflectColor=new A$oR(A$U[0],A$U[1],A$U[2]);var A$t=A$w.albedoColor;A$t&&(A$R.albedo=new A$UR(A$t[0],A$t[1],A$t[2],A$t[3]));var A$I=A$w.diffuseTexture.texture2D;A$I&&(A$R.diffuseTexture=A$Q.getRes(A$C[A$I]));var A$e=A$w.normalTexture.texture2D;A$e&&(A$R.normalTexture=A$Q.getRes(A$C[A$e]));var A$H=A$w.specularTexture.texture2D;A$H&&(A$R.specularTexture=A$Q.getRes(A$C[A$H]));var A$M=A$w.emissiveTexture.texture2D;A$M&&(A$R.emissiveTexture=A$Q.getRes(A$C[A$M]));var A$K=A$w.ambientTexture.texture2D;A$K&&(A$R.ambientTexture=A$Q.getRes(A$C[A$K]));var A$F=A$w.reflectTexture.texture2D;A$F&&(A$R.reflectTexture=A$Q.getRes(A$C[A$F]))},A$t.RENDERMODE_OPAQUE=1,A$t.RENDERMODE_OPAQUEDOUBLEFACE=2,A$t.RENDERMODE_CUTOUT=3,A$t.RENDERMODE_CUTOUTDOUBLEFACE=4,A$t.RENDERMODE_TRANSPARENT=13,A$t.RENDERMODE_TRANSPARENTDOUBLEFACE=14,A$t.RENDERMODE_ADDTIVE=15,A$t.RENDERMODE_ADDTIVEDOUBLEFACE=16,A$t.RENDERMODE_DEPTHREAD_TRANSPARENT=5,A$t.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,A$t.RENDERMODE_DEPTHREAD_ADDTIVE=7,A$t.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,A$t.RENDERMODE_NONDEPTH_TRANSPARENT=9,A$t.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,A$t.RENDERMODE_NONDEPTH_ADDTIVE=11,A$t.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,A$t.SHADERDEFINE_DIFFUSEMAP=0,A$t.SHADERDEFINE_NORMALMAP=0,A$t.SHADERDEFINE_SPECULARMAP=0,A$t.SHADERDEFINE_EMISSIVEMAP=0,A$t.SHADERDEFINE_AMBIENTMAP=0,A$t.SHADERDEFINE_REFLECTMAP=0,A$t.SHADERDEFINE_UVTRANSFORM=0,A$t.SHADERDEFINE_TILINGOFFSET=0,A$t.SHADERDEFINE_ADDTIVEFOG=0,A$t.DIFFUSETEXTURE=1,A$t.NORMALTEXTURE=2,A$t.SPECULARTEXTURE=3,A$t.EMISSIVETEXTURE=4,A$t.AMBIENTTEXTURE=5,A$t.REFLECTTEXTURE=6,A$t.ALBEDO=7,A$t.UVANIAGE=8,A$t.MATERIALAMBIENT=9,A$t.MATERIALDIFFUSE=10,A$t.MATERIALSPECULAR=11,A$t.MATERIALREFLECT=12,A$t.UVMATRIX=13,A$t.UVAGE=14,A$t.TILINGOFFSET=15,A$H(A$t,["defaultMaterial",function(){var A$C=new A$t;return A$C.lock=!0,this.defaultMaterial=A$C},"shaderDefines",function(){return this.shaderDefines=new A$eR(A$rR.shaderDefines)}]),A$t}(A$rR),A$kR=function(A$C){function A$o(A$C,A$R,A$j,A$w,A$T){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===A$j&&(A$j=35044),void 0===A$w&&(A$w=!1),A$o.__super.call(this),this._indexType=A$C,this._indexCount=A$R,this._bufferUsage=A$j,this._bufferType=34963,this._canRead=A$w;var A$G;if("ushort"==A$C)this._indexTypeByteCount=2;else{if("ubyte"!=A$C)throw new Error("unidentification index type.");this._indexTypeByteCount=1}A$G=this._indexTypeByteCount*A$R,this._byteLength=A$G,this._bind(),A$U._gl.bufferData(this._bufferType,A$G,this._bufferUsage),this.uri=A$T,A$w?("ushort"==A$C?this._buffer=new Uint16Array(A$R):"ubyte"==A$C&&(this._buffer=new Uint8Array(A$R)),this.memorySize=2*A$G):this.memorySize=A$G}A$K(A$o,"laya.d3.graphics.IndexBuffer3D",A$C);var A$R=A$o.prototype;return A$R.setData=function(A$C,A$R,A$j,A$w){void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=4294967295);var A$T=0;if("ushort"==this._indexType?(A$T=2,0===A$j&&4294967295===A$w||(A$C=new Uint16Array(A$C.buffer,A$j*A$T,A$w))):"ubyte"==this._indexType&&(A$T=1,0===A$j&&4294967295===A$w||(A$C=new Uint8Array(A$C.buffer,A$j*A$T,A$w))),this._bind(),A$U._gl.bufferSubData(this._bufferType,A$R*A$T,A$C),this._canRead)if(0!==A$R||0!==A$j||4294967295!==A$w){var A$G=this._buffer.length-A$R;A$G<A$w&&(A$w=A$G);for(var A$o=0;A$o<A$w;A$o++)this._buffer[A$R+A$o]=A$C[A$o]}else this._buffer=A$C},A$R.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},A$R.disposeResource=function(){A$C.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},A$F(0,A$R,"indexType",function(){return this._indexType}),A$F(0,A$R,"indexTypeByteCount",function(){return this._indexTypeByteCount}),A$F(0,A$R,"indexCount",function(){return this._indexCount}),A$F(0,A$R,"canRead",function(){return this._canRead}),A$o.INDEXTYPE_UBYTE="ubyte",A$o.INDEXTYPE_USHORT="ushort",A$o.create=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$j&&(A$j=35044),void 0===A$w&&(A$w=!1),new A$o(A$C,A$R,A$j,A$w,A$T)},A$o}(A$U),A$VR=function(A$G){function A$o(A$C,A$R,A$j,A$w,A$T){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===A$w&&(A$w=!1),A$o.__super.call(this),this._vertexDeclaration=A$C,this._vertexCount=A$R,this._bufferUsage=A$j,this._bufferType=34962,this._canRead=A$w,this.uri=A$T,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*A$R,this._bind(),A$U._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),A$w&&(this._buffer=new Float32Array(this._byteLength/4))}A$K(A$o,"laya.d3.graphics.VertexBuffer3D",A$G);var A$C=A$o.prototype;return A$C.bindWithIndexBuffer=function(A$C){A$C&&A$C._bind(),this._bind()},A$C.setData=function(A$C,A$R,A$j,A$w){if(void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=4294967295),0===A$j&&4294967295===A$w||(A$C=new Float32Array(A$C.buffer,4*A$j,A$w)),this._bind(),A$U._gl.bufferSubData(this._bufferType,4*A$R,A$C),this._canRead)if(0!==A$R||0!==A$j||4294967295!==A$w){var A$T=this._buffer.length-A$R;A$T<A$w&&(A$w=A$T);for(var A$G=0;A$G<A$w;A$G++)this._buffer[A$R+A$G]=A$C[A$G]}else this._buffer=A$C},A$C.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},A$C.disposeResource=function(){for(var A$C=A$E.mainContext,A$R=this._vertexDeclaration.getVertexElements(),A$j=A$U._enableAtributes,A$w=0,A$T=A$R.length;A$w<A$T;A$w++)A$j[A$w]===this._glBuffer&&(A$C.disableVertexAttribArray(A$w),A$j[A$w]=null);A$G.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},A$F(0,A$C,"vertexDeclaration",function(){return this._vertexDeclaration}),A$F(0,A$C,"vertexCount",function(){return this._vertexCount}),A$F(0,A$C,"canRead",function(){return this._canRead}),A$o.create=function(A$C,A$R,A$j,A$w,A$T){return void 0===A$j&&(A$j=35044),void 0===A$w&&(A$w=!1),new A$o(A$C,A$R,A$j,A$w,A$T)},A$o}(A$U),A$zR=function(A$C){function A$S(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,A$S.__super.call(this),this._type=3553}A$K(A$S,"laya.d3.resource.DataTexture2D",A$ER);var A$R=A$S.prototype;return A$R.genDebugMipmaps=function(){var A$C=[];return A$C.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),A$C.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),A$C.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),A$C.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),A$C.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),A$C.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),A$C.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),A$C.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),A$C.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),A$C.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),A$C},A$R._onTextureLoaded=function(A$C){},A$R._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var A$C=A$E.mainContext,A$R=this._source=A$C.createTexture(),A$j=this._width,A$w=this._height,A$T=A$P.curBindTexTarget,A$G=A$P.curBindTexValue,A$o=!1;if(A$P.bindTexture(A$C,this._type,A$R),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var A$U=0;A$C.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var A$t=0;A$t<this._mipmaps.length;A$t++){if(this._mipmaps[A$t].byteLength!=A$I*A$e*4)throw"mipmap size error  level:"+A$t;A$C.texSubImage2D(this._type,0,A$S.simLodRect[A$U++],A$S.simLodRect[A$U++],A$S.simLodRect[A$U++],A$S.simLodRect[A$U++],6408,5121,new Uint8Array(this._mipmaps[A$t]))}this.minFifter=9729,this.magFifter=9729}else{var A$I=this._width,A$e=this._height;for(A$U=0,A$C.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),A$t=0;A$t<this._mipmaps.length;A$t++){if(this._mipmaps[A$t].byteLength!=A$I*A$e*4)throw"mipmap size error  level:"+A$t;A$C.texImage2D(this._type,A$t,6408,A$I,A$e,0,6408,5121,new Uint8Array(this._mipmaps[A$t])),(A$I/=2)<1&&(A$I=1),(A$e/=2)<1&&(A$e=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&A$C.pixelStorei(A$C.UNPACK_ALIGNMENT,1),A$C.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var A$H=0,A$M=!1,A$K=!1;this._buffer.byteLength==4*A$j*A$w?(A$H=6408,A$M=!0):this._buffer.byteLength==3*A$j*A$w?(A$H=6407,A$K=!0):A$H=this._format,A$M||A$K?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),A$K&&A$C.pixelStorei(A$C.UNPACK_ALIGNMENT,1),A$C.texImage2D(this._type,0,A$H,A$j,A$w,0,A$H,5121,this._buffer)):A$C&&A$H==A$C.ALPHA?(A$C.texImage2D(3553,0,A$H,A$j,A$w,0,A$H,A$C.UNSIGNED_BYTE,this._buffer),A$o=!0):0!=A$H&&(A$C.compressedTexImage2D(3553,0,A$H,A$j,A$w,0,this._buffer),A$o=!0)}var A$F=this._minFifter,A$L=this._magFifter,A$D=0==this._wrapModeU?10497:33071,A$Q=0==this._wrapModeV?10497:33071,A$Z=A$b.isPOT(A$j,A$w);A$Z?(this._mipmap||this._mipmaps?-1!==A$F||(A$F=9987):-1!==A$F||(A$F=9729),-1!==A$L||(A$L=9729),A$C.texParameteri(this._type,10241,A$F),A$C.texParameteri(this._type,10240,A$L),A$C.texParameteri(this._type,10242,A$D),A$C.texParameteri(this._type,10243,A$Q),this._mipmap&&A$C.generateMipmap(this._type)):(-1!==A$F||(A$F=9729),-1!==A$L||(A$L=9729),A$C.texParameteri(this._type,10241,A$F),A$C.texParameteri(this._type,10240,A$L),A$C.texParameteri(this._type,10242,33071),A$C.texParameteri(this._type,10243,33071)),A$T&&A$G&&A$P.bindTexture(A$C,A$T,A$G),this.memorySize=A$o?this._buffer.length:A$Z?A$j*A$w*4*(1+1/3):A$j*A$w*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},A$R.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},A$R.onAsynLoaded=function(A$C,A$R,A$j){var A$w;A$j&&(A$w=A$j[0].call(this,A$R)),A$w&&(this._width=A$w.width,this._height=A$w.height,this._buffer=A$w.data),this._src=A$C,this._size=new A$LR(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},A$R.getPixels=function(){return new Uint8Array(this._buffer)},A$R.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(A$E.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},A$F(0,A$R,"src",function(){return this._src}),A$S.create=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){if(void 0===A$w&&(A$w=9729),void 0===A$T&&(A$T=9729),void 0===A$G&&(A$G=!0),!A$C||A$C.byteLength<A$R*A$j*4)throw"DataTexture2D create error";var A$U=new A$S;return A$U.uri=A$o,A$U._buffer=A$C,A$U._width=A$R,A$U._height=A$j,A$U._mipmap=A$G,A$U._magFifter=A$w,A$U._minFifter=A$T,A$U._size=new A$LR(A$U._width,A$U._height),A$U._conchTexture?alert("怎么给runtime传递datatexture数据"):A$U.activeResource(),A$U},A$S.load=function(A$C,A$R,A$j,A$w,A$T){if(void 0===A$R&&(A$R=0),void 0===A$j&&(A$j=0),void 0===A$w&&(A$w=9729),void 0===A$T&&(A$T=9729),"mipmaps"===A$$.getFileExtension(A$C)){var A$G=A$f.loader.create(A$C,null,null,A$S,[function(A$C){this._mipmaps=[];var A$R=new Uint32Array(A$C);this._width=A$R[0];var A$j=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,A$j=1024),this._width!=A$j)throw"现在只支持512x256的环境贴图。当前的是"+A$R[0];this._height=A$R[1];for(var A$w=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,A$T=this._height,A$G=8;;){var A$o=A$w*A$T*4;if(A$G+A$o>A$C.byteLength)throw"load mipmaps data size error ";var A$U=new Uint8Array(A$C,A$G,A$o);if(this._mipmaps.push(A$U),A$G+=A$o,1==A$w&&1==A$T)break;(A$w/=2)<1&&(A$w=1),(A$T/=2)<1&&(A$T=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){A$G.simLodInfo=new Float32Array(40);for(var A$o=0;A$o<A$G.simLodInfo.length;)A$G.simLodInfo[A$o]=(A$S.simLodRect[A$o]+.5)/1024,A$o++,A$G.simLodInfo[A$o]=(A$S.simLodRect[A$o]+.5)/256,A$o++,A$G.simLodInfo[A$o]=Math.max(A$S.simLodRect[A$o]-1,.1)/1024,A$o++,A$G.simLodInfo[A$o]=Math.max(A$S.simLodRect[A$o]-1.5,.1)/256,A$o++}return A$G}if("number"==typeof A$R)return A$f.loader.create(A$C,null,null,A$S,[function(A$C){return this._width=A$R,this._height=A$j,this._buffer=A$C,null}]);if("function"==typeof A$R)return A$f.loader.create(A$C,null,null,A$S,[A$R]);throw new Error("unknown params.")},A$S.lodasatlas=!1,A$H(A$S,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),A$S}(),A$lR=function(A$C){function A$R(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,A$R.__super.call(this)}A$K(A$R,"laya.d3.resource.models.PrimitiveMesh",A$PR);var A$j=A$R.prototype;return A$f.imps(A$j,{"laya.d3.core.render.IRenderable":!0}),A$j._getVertexBuffer=function(A$C){return void 0===A$C&&(A$C=0),0===A$C?this._vertexBuffer:null},A$j._getVertexBuffers=function(){return null},A$j._getIndexBuffer=function(){return this._indexBuffer},A$j._getPositions=function(){var A$C,A$R=[],A$j=this._vertexBuffer.vertexDeclaration.getVertexElements(),A$w=0;for(A$w=0;A$w<A$j.length;A$w++){var A$T=A$j[A$w];if("vector3"===A$T.elementFormat&&0===A$T.elementUsage){A$C=A$T;break}}var A$G=this._vertexBuffer.getData();for(A$w=0;A$w<A$G.length;A$w+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var A$o=A$w+A$C.offset/4,A$U=new A$oR(A$G[A$o+0],A$G[A$o+1],A$G[A$o+2]);A$R.push(A$U)}return A$R},A$j.getRenderElement=function(A$C){return this},A$j.getRenderElementsCount=function(){return 1},A$j.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},A$j._beforeRender=function(A$C){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},A$j._render=function(A$C){A$E.mainContext.drawElements(4,this._numberIndices,5123,0),A$x.drawCall++,A$x.trianglesFaces+=this._numberIndices/3},A$F(0,A$j,"_vertexBufferCount",function(){return 1}),A$F(0,A$j,"triangleCount",function(){return this._indexBuffer.indexCount/3}),A$R}(),A$gR=function(A$C){function A$R(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,A$R.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}A$K(A$R,"laya.d3.resource.models.Mesh",A$PR);var A$j=A$R.prototype;return A$j._getPositions=function(){var A$C,A$R,A$j,A$w,A$T,A$G=[],A$o=0,A$U=0,A$t=0;if(0!==this._vertexBuffers.length){var A$I=this._vertexBuffers.length;for(A$o=0;A$o<A$I;A$o++){for(A$j=(A$C=this._vertexBuffers[A$o]).vertexDeclaration.getVertexElements(),A$U=0;A$U<A$j.length;A$U++)if("vector3"===(A$w=A$j[A$U]).elementFormat&&0===A$w.elementUsage){A$R=A$w;break}for(A$T=A$C.getData(),A$U=0;A$U<A$T.length;A$U+=A$C.vertexDeclaration.vertexStride/4)A$t=A$U+A$R.offset/4,A$G.push(new A$oR(A$T[A$t+0],A$T[A$t+1],A$T[A$t+2]))}}else{var A$e=this._subMeshes.length;for(A$o=0;A$o<A$e;A$o++){for(A$j=(A$C=this._subMeshes[A$o]._getVertexBuffer()).vertexDeclaration.getVertexElements(),A$U=0;A$U<A$j.length;A$U++)if("vector3"===(A$w=A$j[A$U]).elementFormat&&0===A$w.elementUsage){A$R=A$w;break}for(A$T=A$C.getData(),A$U=0;A$U<A$T.length;A$U+=A$C.vertexDeclaration.vertexStride/4)A$t=A$U+A$R.offset/4,A$G.push(new A$oR(A$T[A$t+0],A$T[A$t+1],A$T[A$t+2]))}}return A$G},A$j._setSubMeshes=function(A$C){this._subMeshes=A$C,this._subMeshCount=A$C.length;for(var A$R=0;A$R<this._subMeshCount;A$R++)A$C[A$R]._indexInMesh=A$R;this._positions=this._getPositions(),this._generateBoundingObject()},A$j.onAsynLoaded=function(A$C,A$R,A$j){var A$w=A$R[0],A$T=A$R[1];A$XC.read(A$w,this,this._materials,this._subMeshes,A$T),this.completeCreate(),this._endLoaded()},A$j.getSubMesh=function(A$C){return this._subMeshes[A$C]},A$j.getSubMeshCount=function(){return this._subMeshes.length},A$j.getRenderElementsCount=function(){return this._subMeshes.length},A$j.getRenderElement=function(A$C){return this._subMeshes[A$C]},A$j.disposeResource=function(){for(var A$C=0;A$C<this._subMeshes.length;A$C++)this._subMeshes[A$C].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},A$F(0,A$j,"materials",function(){return this._materials.slice()}),A$F(0,A$j,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),A$R.load=function(A$C){return A$f.loader.create(A$C,null,null,A$R)},A$R}(),A$BR=(function(A$C){function A$I(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===A$j&&(A$j=6408),void 0===A$w&&(A$w=5121),void 0===A$T&&(A$T=33189),void 0===A$G&&(A$G=!1),void 0===A$o&&(A$o=!1),void 0===A$U&&(A$U=-1),void 0===A$t&&(A$t=-1),A$I.__super.call(this),this._type=3553,this._width=A$C,this._height=A$R,this._size=new A$LR(A$C,A$R),this._surfaceFormat=A$j,this._surfaceType=A$w,this._depthStencilFormat=A$T,A$L.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=A$G,this._repeat=A$o,this._minFifter=A$U,this._magFifter=A$t,this.activeResource(),this._alreadyResolved=!0}A$K(A$I,"laya.d3.resource.RenderTexture",A$ER);var A$R=A$I.prototype;A$R.recreateResource=function(){var A$C=A$E.mainContext;this._frameBuffer=A$C.createFramebuffer(),this._source=A$C.createTexture();var A$R=A$P.curBindTexTarget,A$j=A$P.curBindTexValue;A$P.bindTexture(A$C,this._type,this._source),A$C.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var A$w=this._minFifter,A$T=this._magFifter,A$G=this._repeat?10497:33071;if(A$b.isPOT(this._width,this._height)?(this._mipmap?-1!==A$w||(A$w=9987):-1!==A$w||(A$w=9729),-1!==A$T||(A$T=9729),A$C.texParameteri(this._type,10241,A$w),A$C.texParameteri(this._type,10240,A$T),A$C.texParameteri(this._type,10242,A$G),A$C.texParameteri(this._type,10243,A$G),this._mipmap&&A$C.generateMipmap(this._type)):(-1!==A$w||(A$w=9729),-1!==A$T||(A$T=9729),A$C.texParameteri(this._type,10241,A$w),A$C.texParameteri(this._type,10240,A$T),A$C.texParameteri(this._type,10242,33071),A$C.texParameteri(this._type,10243,33071)),A$R&&A$j&&A$P.bindTexture(A$C,A$R,A$j),A$C.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=A$C.createRenderbuffer(),A$C.bindRenderbuffer(36161,this._depthStencilBuffer),A$C.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),A$C.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:A$C.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:A$C.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:A$C.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}A$C.framebufferTexture2D(36160,36064,3553,this._source,0),A$C.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},A$R.start=function(){A$E.mainContext.bindFramebuffer(36160,this.frameBuffer),(A$I._currentRenderTarget=this)._alreadyResolved=!1},A$R.end=function(){A$E.mainContext.bindFramebuffer(36160,null),A$I._currentRenderTarget=null,this._alreadyResolved=!0},A$R.getData=function(A$C,A$R,A$j,A$w){var A$T=A$E.mainContext;if(A$T.bindFramebuffer(36160,this._frameBuffer),!(36053===A$T.checkFramebufferStatus(36160)))return A$T.bindFramebuffer(36160,null),null;var A$G=new Uint8Array(this._width*this._height*4);return A$T.readPixels(A$C,A$R,A$j,A$w,this._surfaceFormat,this._surfaceType,A$G),A$T.bindFramebuffer(36160,null),A$G},A$R.disposeResource=function(){if(this._frameBuffer){var A$C=A$E.mainContext;A$C.deleteTexture(this._source),A$C.deleteFramebuffer(this._frameBuffer),A$C.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},A$F(0,A$R,"surfaceFormat",function(){return this._surfaceFormat}),A$F(0,A$R,"surfaceType",function(){return this._surfaceType}),A$F(0,A$R,"depthStencilFormat",function(){return this._depthStencilFormat}),A$F(0,A$R,"source",function(){return this._alreadyResolved?A$f.superGet(A$ER,this,"source"):null}),A$F(0,A$R,"depthStencilBuffer",function(){return this._depthStencilBuffer}),A$F(0,A$R,"frameBuffer",function(){return this._frameBuffer}),A$I._currentRenderTarget=null}(),function(A$C){function A$R(A$C){this._color=null,this._pixels=null,A$R.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new A$LR(this.width,this.height),this._color=A$C,this._pixels=new Uint8Array([255*A$C.x,255*A$C.y,255*A$C.z,255*A$C.w]),this.uri="SolidColorTexture2D_"+this.id}A$K(A$R,"laya.d3.resource.SolidColorTexture2D",A$ER);var A$j=A$R.prototype;return A$j._createWebGlTexture=function(){var A$C=A$E.mainContext,A$R=this._source=A$C.createTexture(),A$j=this._width,A$w=this._height,A$T=A$P.curBindTexTarget,A$G=A$P.curBindTexValue;A$P.bindTexture(A$C,this._type,A$R),A$C.texImage2D(this._type,0,6408,A$j,A$w,0,6408,5121,this._pixels);var A$o=this._minFifter,A$U=this._magFifter,A$t=this._repeat?10497:33071,A$I=A$b.isPOT(A$j,A$w);A$I?(this._mipmap?-1!==A$o||(A$o=9987):-1!==A$o||(A$o=9729),-1!==A$U||(A$U=9729),A$C.texParameteri(this._type,10241,A$o),A$C.texParameteri(this._type,10240,A$U),A$C.texParameteri(this._type,10242,A$t),A$C.texParameteri(this._type,10243,A$t),this._mipmap&&A$C.generateMipmap(this._type)):(-1!==A$o||(A$o=9729),-1!==A$U||(A$U=9729),A$C.texParameteri(this._type,10241,A$o),A$C.texParameteri(this._type,10240,A$U),A$C.texParameteri(this._type,10242,33071),A$C.texParameteri(this._type,10243,33071)),A$T&&A$G&&A$P.bindTexture(A$C,A$T,A$G),this.memorySize=A$I?A$j*A$w*4*(1+1/3):A$j*A$w*4},A$j.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},A$j.disposeResource=function(){this._source&&(A$E.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},A$H(A$R,["magentaTexture",function(){var A$C=new A$R(new A$UR(1,0,1,1));return A$C.lock=!0,this.magentaTexture=A$C},"grayTexture",function(){var A$C=new A$R(new A$UR(.5,.5,.5,1));return A$C.lock=!0,this.grayTexture=A$C}]),A$R}()),A$iR=function(A$C){function A$T(A$C,A$R,A$j,A$w){this._canRead=!1,this._image=null,this._pixels=null,void 0===A$C&&(A$C=!1),void 0===A$R&&(A$R=!0),void 0===A$j&&(A$j=6408),void 0===A$w&&(A$w=!0),A$T.__super.call(this),this._type=3553,this._repeat=A$R,this._canRead=A$C,this._format=A$j,this._mipmap=A$w}A$K(A$T,"laya.d3.resource.Texture2D",A$ER);var A$R=A$T.prototype;return A$R._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var A$C=A$E.mainContext,A$R=this._source=A$C.createTexture(),A$j=this._width,A$w=this._height,A$T=A$P.curBindTexTarget,A$G=A$P.curBindTexValue;switch(A$P.bindTexture(A$C,this._type,A$R),this._format){case 6407:case 6408:this._canRead?A$C.texImage2D(this._type,0,this._format,A$j,A$w,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?A$C.texImage2D(this._type,0,this._image._format,A$j,A$w,0,this._image._format,5121,this._image.atlasSource):A$C.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case A$E.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:A$C.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var A$o=this._minFifter,A$U=this._magFifter,A$t=this._repeat?10497:33071,A$I=0==this._wrapModeU?10497:33071,A$e=0==this._wrapModeV?10497:33071,A$H=A$b.isPOT(A$j,A$w);A$H?(this._mipmap?-1!==A$o||(A$o=9987):-1!==A$o||(A$o=9729),-1!==A$U||(A$U=9729),A$C.texParameteri(this._type,10241,A$o),A$C.texParameteri(this._type,10240,A$U),A$C.texParameteri(this._type,10242,A$t),A$C.texParameteri(this._type,10243,A$t),A$C.texParameteri(this._type,10242,A$I),A$C.texParameteri(this._type,10243,A$e),this._mipmap&&A$C.generateMipmap(this._type)):(-1!==A$o||(A$o=9729),-1!==A$U||(A$U=9729),A$C.texParameteri(this._type,10241,A$o),A$C.texParameteri(this._type,10240,A$U),A$C.texParameteri(this._type,10242,33071),A$C.texParameteri(this._type,10243,33071)),A$T&&A$G&&A$P.bindTexture(A$C,A$T,A$G),this._image.onload=null,this._image=null,this.memorySize=A$H?A$j*A$w*4*(1+1/3):A$j*A$w*4},A$R.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},A$R.onAsynLoaded=function(A$C,A$R,A$j){if(A$j){var A$w=A$j[0];void 0!==A$w&&(this._canRead=A$w);var A$T=A$j[1];void 0!==A$T&&(this._repeat=A$T);var A$G=A$j[2];void 0!==A$G&&(this._format=A$G);var A$o=A$j[3];void 0!==A$o&&(this._mipmap=A$o);var A$U=A$j.wrapModeU;void 0!==A$U&&(this._wrapModeU=A$U);var A$t=A$j.wrapModeV;void 0!==A$t&&(this._wrapModeV=A$t)}switch(this._format){case 6407:case 6408:var A$I=(this._image=A$R).width,A$e=A$R.height;this._width=A$I,this._height=A$e,this._size=new A$LR(A$I,A$e),this._canRead&&(A$L.isConchApp?A$R instanceof A$M.HTMLElement&&(this._pixels=new Uint8Array(A$R.getImageData(0,0,A$I,A$e))):(A$J.canvas.size(A$I,A$e),A$J.canvas.clear(),A$J.context.drawImage(A$R,0,0,A$I,A$e),this._pixels=new Uint8Array(A$J.context.getImageData(0,0,A$I,A$e).data.buffer)));break;case A$E.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var A$H=new A$p(A$R);A$H.readUTFBytes(4),A$H.readUTFBytes(2),A$H.getInt16();A$H.endian="bigEndian",this._width=A$H.getInt16(),this._height=A$H.getInt16(),this._size=new A$LR(this._width,this._height);A$H.getInt16(),A$H.getInt16();this._image=new Uint8Array(A$R,A$H.pos)}this.recreateResource(),this._endLoaded()},A$R.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},A$R.disposeResource=function(){this._source&&(A$E.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},A$F(0,A$R,"_src",function(){return this.url}),A$F(0,A$R,"src",function(){return this.url}),A$T.load=function(A$C){return A$f.loader.create(A$C,null,null,A$T)},A$T}(),A$_R=function(A$R){function A$j(A$C,A$R){A$j.__super.call(this),void 0===A$C&&(A$C=.3),void 0===A$R&&(A$R=1e3),this._tempVector3=new A$oR,this._position=new A$oR,this._up=new A$oR,this._forward=new A$oR,this._right=new A$oR,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=A$LR.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=A$C,this._farPlane=A$R,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),A$f.stage.on("resize",this,this._onScreenSizeChanged)}A$K(A$j,"laya.d3.core.BaseCamera",A$R);var A$C=A$j.prototype;return A$C._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var A$C=this.scene._cameraPool,A$R=A$C.length-1,A$j=0;A$j<A$R;A$j++)if(A$C[A$j].renderingOrder>A$C[A$R].renderingOrder){var A$w=A$C[A$j];A$C[A$j]=A$C[A$R],A$C[A$R]=A$w}},A$C._calculateProjectionMatrix=function(){},A$C._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},A$C._prepareCameraToRender=function(){A$N._currentCameraCullingMask=this.cullingMask;var A$C=this._shaderValues;A$C.setValue(0,this.transform.position.elements),A$C.setValue(5,this.forward.elements),A$C.setValue(6,this.up.elements)},A$C._prepareCameraViewProject=function(A$C,A$R){var A$j=this._shaderValues;A$j.setValue(1,A$C.elements),A$j.setValue(2,A$R.elements)},A$C._renderCamera=function(A$C,A$R,A$j){},A$C.addLayer=function(A$C){29!==A$C.number&&30!=A$C.number&&(this.cullingMask=this.cullingMask|A$C.mask)},A$C.removeLayer=function(A$C){29!==A$C.number&&30!=A$C.number&&(this.cullingMask=this.cullingMask&~A$C.mask)},A$C.addAllLayers=function(){this.cullingMask=2147483647},A$C.removeAllLayers=function(){this.cullingMask=0|A$N.getLayerByNumber(29).mask|A$N.getLayerByNumber(30).mask},A$C.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},A$C.moveForward=function(A$C){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=A$C,this.transform.translate(this._tempVector3)},A$C.moveRight=function(A$C){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=A$C,this.transform.translate(this._tempVector3)},A$C.moveVertical=function(A$C){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=A$C,this.transform.translate(this._tempVector3,!1)},A$C._addSelfRenderObjects=function(){var A$C=this.scene._cameraPool,A$R=A$C.length;if(0<A$R){for(var A$j=A$R-1;0<=A$j;A$j--)if(this.renderingOrder<=A$C[A$j].renderingOrder){A$C.splice(A$j+1,0,this);break}}else A$C.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},A$C._clearSelfRenderObjects=function(){var A$C=this.scene._cameraPool;A$C.splice(A$C.indexOf(this),1)},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,A$f.stage.off("resize",this,this._onScreenSizeChanged),A$R.prototype.destroy.call(this,A$C)},A$F(0,A$C,"sky",function(){return this._sky},function(A$C){(this._sky=A$C)._ownerCamera=this}),A$F(0,A$C,"forward",function(){var A$C=this.transform.worldMatrix.elements,A$R=this._forward.elements;return A$R[0]=-A$C[8],A$R[1]=-A$C[9],A$R[2]=-A$C[10],this._forward}),A$F(0,A$C,"position",function(){var A$C=this.transform.worldMatrix.elements,A$R=this._position.elements;return A$R[0]=A$C[12],A$R[1]=A$C[13],A$R[2]=A$C[14],this._position}),A$F(0,A$C,"renderTarget",function(){return this._renderTarget},function(A$C){null!=(this._renderTarget=A$C)&&(this._renderTargetSize=A$C.size)}),A$F(0,A$C,"up",function(){var A$C=this.transform.worldMatrix.elements,A$R=this._up.elements;return A$R[0]=A$C[4],A$R[1]=A$C[5],A$R[2]=A$C[6],this._up}),A$F(0,A$C,"right",function(){var A$C=this.transform.worldMatrix.elements,A$R=this._right.elements;return A$R[0]=A$C[0],A$R[1]=A$C[1],A$R[2]=A$C[2],this._right}),A$F(0,A$C,"renderTargetSize",function(){return this._renderTargetSize},function(A$C){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"fieldOfView",function(){return this._fieldOfView},function(A$C){this._fieldOfView=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"nearPlane",function(){return this._nearPlane},function(A$C){this._nearPlane=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"farPlane",function(){return this._farPlane},function(A$C){this._farPlane=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"orthographic",function(){return this._orthographic},function(A$C){this._orthographic=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(A$C){this._orthographicVerticalSize=A$C,this._calculateProjectionMatrix()}),A$F(0,A$C,"renderingOrder",function(){return this._renderingOrder},function(A$C){this._renderingOrder=A$C,this._sortCamerasByRenderingOrder()}),A$j.CAMERAPOS=0,A$j.VIEWMATRIX=1,A$j.PROJECTMATRIX=2,A$j.VPMATRIX=3,A$j.VPMATRIX_NO_TRANSLATE=4,A$j.CAMERADIRECTION=5,A$j.CAMERAUP=6,A$j.ENVIRONMENTDIFFUSE=7,A$j.ENVIRONMENTSPECULAR=8,A$j.SIMLODINFO=9,A$j.DIFFUSEIRRADMATR=10,A$j.DIFFUSEIRRADMATG=11,A$j.DIFFUSEIRRADMATB=12,A$j.HDREXPOSURE=13,A$j.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",A$j.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",A$j.CLEARFLAG_SOLIDCOLOR=0,A$j.CLEARFLAG_SKY=1,A$j.CLEARFLAG_DEPTHONLY=2,A$j.CLEARFLAG_NONE=3,A$H(A$j,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new A$CR(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new A$CR},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new A$CR}]),A$j}(A$nR),A$uR=function(A$j){function A$R(A$C){this._render=null,this._geometryFilter=null,A$R.__super.call(this,A$C)}A$K(A$R,"laya.d3.core.RenderableSprite3D",A$j);var A$C=A$R.prototype;return A$C._addToInitStaticBatchManager=function(){},A$C._setBelongScene=function(A$C){A$j.prototype._setBelongScene.call(this,A$C),A$C._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},A$C._setUnBelongScene=function(){var A$C=this._scene._renderableSprite3Ds,A$R=A$C.indexOf(this);A$C.splice(A$R,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),A$j.prototype._setUnBelongScene.call(this)},A$C._update=function(A$C){(A$C.owner=this)._activeInHierarchy&&(this._updateComponents(A$C),this._render._updateOctreeNode(),this._lateUpdateComponents(A$C),A$x.spriteCount++,this._childs.length&&this._updateChilds(A$C))},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$j.prototype.destroy.call(this,A$C),this._render._destroy(),this._render=null},A$R.__init__=function(){A$R.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=A$R.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),A$R.SAHDERDEFINE_LIGHTMAP=A$R.shaderDefines.registerDefine("LIGHTMAP")},A$R.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,A$R.SAHDERDEFINE_LIGHTMAP=4,A$R.LIGHTMAPSCALEOFFSET=2,A$R.LIGHTMAP=3,A$H(A$R,["shaderDefines",function(){return this.shaderDefines=new A$eR}]),A$R}(A$nR),A$sR=(function(A$C){function A$w(A$C,A$R,A$j){this._long=NaN,this._width=NaN,this._height=NaN,void 0===A$C&&(A$C=1),void 0===A$R&&(A$R=1),void 0===A$j&&(A$j=1),A$w.__super.call(this),this._long=A$C,this._width=A$R,this._height=A$j,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}A$K(A$w,"laya.d3.resource.models.BoxMesh",A$lR);var A$R=A$w.prototype;A$R.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var A$C=A$EC.vertexDeclaration,A$R=(A$C.vertexStride,this._long/2),A$j=this._height/2,A$w=this._width/2,A$T=new Float32Array([-A$R,A$j,-A$w,0,1,0,0,0,A$R,A$j,-A$w,0,1,0,1,0,A$R,A$j,A$w,0,1,0,1,1,-A$R,A$j,A$w,0,1,0,0,1,-A$R,-A$j,-A$w,0,-1,0,0,1,A$R,-A$j,-A$w,0,-1,0,1,1,A$R,-A$j,A$w,0,-1,0,1,0,-A$R,-A$j,A$w,0,-1,0,0,0,-A$R,A$j,-A$w,-1,0,0,0,0,-A$R,A$j,A$w,-1,0,0,1,0,-A$R,-A$j,A$w,-1,0,0,1,1,-A$R,-A$j,-A$w,-1,0,0,0,1,A$R,A$j,-A$w,1,0,0,1,0,A$R,A$j,A$w,1,0,0,0,0,A$R,-A$j,A$w,1,0,0,0,1,A$R,-A$j,-A$w,1,0,0,1,1,-A$R,A$j,A$w,0,0,1,0,0,A$R,A$j,A$w,0,0,1,1,0,A$R,-A$j,A$w,0,0,1,1,1,-A$R,-A$j,A$w,0,0,1,0,1,-A$R,A$j,-A$w,0,0,-1,1,0,A$R,A$j,-A$w,0,0,-1,0,0,A$R,-A$j,-A$w,0,0,-1,0,1,-A$R,-A$j,-A$w,0,0,-1,1,1]),A$G=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new A$VR(A$C,this._numberVertices,35044,!0),this._indexBuffer=new A$kR("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(A$T),this._indexBuffer.setData(A$G),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},A$F(0,A$R,"long",function(){return this._long},function(A$C){this._long!==A$C&&(this._long=A$C,this.releaseResource(),this.activeResource())}),A$F(0,A$R,"width",function(){return this._width},function(A$C){this._width!==A$C&&(this._width=A$C,this.releaseResource(),this.activeResource())}),A$F(0,A$R,"height",function(){return this._height},function(A$C){this._height!==A$C&&(this._height=A$C,this.releaseResource(),this.activeResource())})}(),function(A$C){function A$o(A$C,A$R,A$j){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=.3),void 0===A$j&&(A$j=1e3),this._viewMatrix=new A$CR,this._projectionMatrix=new A$CR,this._projectionViewMatrix=new A$CR,this._viewport=new A$tR(0,0,0,0),this._normalizedViewport=new A$tR(0,0,1,1),this._aspectRatio=A$C,this._boundFrustumUpdate=!0,this._boundFrustum=new A$dC(A$CR.DEFAULT),A$o.__super.call(this,A$R,A$j),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}A$K(A$o,"laya.d3.core.Camera",A$_R);var A$R=A$o.prototype;return A$R._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},A$R._parseCustomProps=function(A$C,A$R,A$j,A$w){var A$T=A$j.clearColor;this.clearColor=new A$UR(A$T[0],A$T[1],A$T[2],A$T[3]);var A$G=A$j.viewport;this.normalizedViewport=new A$tR(A$G[0],A$G[1],A$G[2],A$G[3])},A$R._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var A$C=this.orthographicVerticalSize*this.aspectRatio*.5,A$R=.5*this.orthographicVerticalSize;A$CR.createOrthoOffCenterRH(-A$C,A$C,-A$R,A$R,this.nearPlane,this.farPlane,this._projectionMatrix)}else A$CR.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},A$R._update=function(A$C){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,A$C)},A$R._renderCamera=function(A$C,A$R,A$j){var A$w,A$T;A$j.parallelSplitShadowMaps[0]&&A$j._renderShadowMap(A$C,A$R,this),(A$R.camera=this)._prepareCameraToRender(),A$j._preRenderUpdateComponents(A$R),A$w=A$R._viewMatrix=this.viewMatrix;var A$G=this._renderTarget;A$G?(A$G.start(),A$CR.multiply(A$_R._invertYScaleMatrix,this._projectionMatrix,A$_R._invertYProjectionMatrix),A$CR.multiply(A$_R._invertYScaleMatrix,this.projectionViewMatrix,A$_R._invertYProjectionViewMatrix),A$T=A$R._projectionMatrix=A$_R._invertYProjectionMatrix,A$R._projectionViewMatrix=A$_R._invertYProjectionViewMatrix):(A$T=A$R._projectionMatrix=this._projectionMatrix,A$R._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(A$w,A$T),A$R._viewport=this.viewport,A$j._preRenderScene(A$C,A$R,this.boundFrustum),A$j._clear(A$C,A$R),A$j._renderScene(A$C,A$R),A$j._postRenderUpdateComponents(A$R),A$G&&A$G.end()},A$R.viewportPointToRay=function(A$C,A$R){A$FR.calculateCursorRay(A$C,this.viewport,this._projectionMatrix,this.viewMatrix,null,A$R)},A$R.normalizedViewportPointToRay=function(A$C,A$R){var A$j=A$o._tempVector20,A$w=this.viewport,A$T=A$C.elements,A$G=A$j.elements;A$G[0]=A$T[0]*A$w.width,A$G[1]=A$T[1]*A$w.height,A$FR.calculateCursorRay(A$j,this.viewport,this._projectionMatrix,this.viewMatrix,null,A$R)},A$R.worldToViewportPoint=function(A$C,A$R){A$CR.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(A$C,this._projectionViewMatrix,A$R);var A$j=A$R.elements;A$j[0]=A$j[0]/A$f.stage.clientScaleX,A$j[1]=A$j[1]/A$f.stage.clientScaleY},A$R.worldToNormalizedViewportPoint=function(A$C,A$R){A$CR.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(A$C,this._projectionViewMatrix,A$R);var A$j=A$R.elements;A$j[0]=A$j[0]/A$f.stage.clientScaleX,A$j[1]=A$j[1]/A$f.stage.clientScaleY},A$R.convertScreenCoordToOrthographicCoord=function(A$C,A$R){if(this._orthographic){var A$j=A$X.clientWidth,A$w=A$X.clientHeight,A$T=this.orthographicVerticalSize*this.aspectRatio/A$j,A$G=this.orthographicVerticalSize/A$w,A$o=A$C.elements,A$U=A$R.elements;return A$U[0]=(-A$j/2+A$o[0])*A$T,A$U[1]=(A$w/2-A$o[1])*A$G,A$U[2]=(this.nearPlane-this.farPlane)*(A$o[2]+1)/2-this.nearPlane,A$oR.transformCoordinate(A$R,this.transform.worldMatrix,A$R),!0}return!1},A$F(0,A$R,"projectionViewMatrix",function(){return A$CR.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),A$F(0,A$R,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var A$C=this.viewport;return A$C.width/A$C.height},function(A$C){if(A$C<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=A$C,this._calculateProjectionMatrix()}),A$F(0,A$R,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),A$F(0,A$R,"needViewport",function(){var A$C=this.normalizedViewport;return 0===A$C.x&&0===A$C.y&&1===A$C.width&&1===A$C.height}),A$F(0,A$R,"viewport",function(){if(this._viewportExpressedInClipSpace){var A$C=this._normalizedViewport,A$R=this.renderTargetSize,A$j=A$R.width,A$w=A$R.height;this._viewport.x=A$C.x*A$j,this._viewport.y=A$C.y*A$w,this._viewport.width=A$C.width*A$j,this._viewport.height=A$C.height*A$w}return this._viewport},function(A$C){if(null!=this.renderTarget&&(A$C.x<0||A$C.y<0||0==A$C.width||0==A$C.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=A$C,this._calculateProjectionMatrix()}),A$F(0,A$R,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var A$C=this._viewport,A$R=this.renderTargetSize,A$j=A$R.width,A$w=A$R.height;this._normalizedViewport.x=A$C.x/A$j,this._normalizedViewport.y=A$C.y/A$w,this._normalizedViewport.width=A$C.width/A$j,this._normalizedViewport.height=A$C.height/A$w}return this._normalizedViewport},function(A$C){A$C.x<0&&(A$C.x=0,console.warn("Camera: viewport.x must large than 0.0.")),A$C.y<0&&(A$C.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<A$C.x+A$C.width&&(A$C.width=1-A$C.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<A$C.y+A$C.height&&(A$C.height=1-A$C.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=A$C,this._calculateProjectionMatrix()}),A$F(0,A$R,"projectionMatrix",function(){return this._projectionMatrix},function(A$C){this._projectionMatrix=A$C,this._useUserProjectionMatrix=!0}),A$F(0,A$R,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),A$H(A$o,["_tempVector20",function(){return this._tempVector20=new A$GR}]),A$o}()),A$cR=function(A$j){function A$w(A$C,A$R){A$w.__super.call(this,A$R),this._geometryFilter=new A$JR(this),this._render=new A$NR(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),A$C&&(this._geometryFilter.sharedMesh=A$C)instanceof laya.d3.resource.models.Mesh&&(A$C.loaded?this._render.sharedMaterials=A$C.materials:A$C.once("loaded",this,this._applyMeshMaterials))}A$K(A$w,"laya.d3.core.MeshSprite3D",A$j);var A$C=A$w.prototype;return A$C._changeRenderObjectByMesh=function(A$C){var A$R=this._render._renderElements,A$j=A$R[A$C];A$j||(A$j=A$R[A$C]=new A$hR),A$j._render=this._render;var A$w=this._render.sharedMaterials[A$C];A$w||(A$w=A$mR.defaultMaterial);var A$T=this._geometryFilter.sharedMesh.getRenderElement(A$C);return A$j._mainSortID=this._getSortID(A$T,A$w),A$j._sprite3D=this,A$j.renderObj=A$T,A$j._material=A$w,A$j},A$C._changeRenderObjectByMaterial=function(A$C,A$R){var A$j=this._render._renderElements[A$C];A$R||(A$R=A$mR.defaultMaterial);var A$w=this._geometryFilter.sharedMesh.getRenderElement(A$C);return A$j._mainSortID=this._getSortID(A$w,A$R),A$j._sprite3D=this,A$j.renderObj=A$w,A$j._material=A$R,A$j},A$C._changeRenderObjectsByMesh=function(){var A$C=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=A$C;for(var A$R=0;A$R<A$C;A$R++)this._changeRenderObjectByMesh(A$R)},A$C._onMeshChanged=function(A$C){var A$R=A$C.sharedMesh;A$R.loaded?this._changeRenderObjectsByMesh():A$R.once("loaded",this,this._onMeshLoaded)},A$C._onMeshLoaded=function(A$C){A$C===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},A$C._onMaterialChanged=function(A$C,A$R,A$j){A$R<this._render._renderElements.length&&this._changeRenderObjectByMaterial(A$R,A$j)},A$C._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},A$C._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},A$C._parseCustomProps=function(A$C,A$R,A$j,A$w){var A$T=this.meshRender,A$G=A$j.lightmapIndex;null!=A$G&&(A$T.lightmapIndex=A$G);var A$o,A$U,A$t=A$j.lightmapScaleOffset;if(A$t&&(A$T.lightmapScaleOffset=new A$UR(A$t[0],A$t[1],A$t[2],A$t[3])),A$w.instanceParams)(A$o=A$w.instanceParams.loadPath)&&(A$U=A$Q.getRes(A$R[A$o]),(this.meshFilter.sharedMesh=A$U).loaded?A$T.sharedMaterials=A$U.materials:A$U.once("loaded",this,this._applyMeshMaterials));else{(A$o=A$j.meshPath)&&(A$U=A$Q.getRes(A$R[A$o]),this.meshFilter.sharedMesh=A$U);var A$I=A$j.materials;if(A$I){var A$e=A$T.sharedMaterials,A$H=A$I.length;A$e.length=A$H;for(var A$M=0;A$M<A$H;A$M++)A$e[A$M]=A$Q.getRes(A$R[A$I[A$M].path]);A$T.sharedMaterials=A$e}}},A$C._applyMeshMaterials=function(A$C){for(var A$R=this._render.sharedMaterials,A$j=A$C.materials,A$w=0,A$T=A$j.length;A$w<A$T;A$w++)A$R[A$w]||(A$R[A$w]=A$j[A$w]);this._render.sharedMaterials=A$R},A$C._addToInitStaticBatchManager=function(){A$w._staticBatchManager._addInitBatchSprite(this)},A$C.cloneTo=function(A$C){var A$R=A$C;A$R._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var A$j=this._render,A$w=A$R._render;A$w.enable=A$j.enable,A$w.sharedMaterials=A$j.sharedMaterials,A$w.castShadow=A$j.castShadow;var A$T=A$j.lightmapScaleOffset;A$T&&(A$w.lightmapScaleOffset=A$T.clone()),A$w.lightmapIndex=A$j.lightmapIndex,A$w.receiveShadow=A$j.receiveShadow,A$w.sortingFudge=A$j.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,A$C)},A$C.destroy=function(A$C){if(void 0===A$C&&(A$C=!0),!this.destroyed){var A$R=this.meshFilter.sharedMesh;null!=A$R&&(A$R.loaded||A$R.off("loaded",this,this._applyMeshMaterials)),A$j.prototype.destroy.call(this,A$C),this._geometryFilter._destroy()}},A$F(0,A$C,"meshFilter",function(){return this._geometryFilter}),A$F(0,A$C,"meshRender",function(){return this._render}),A$w.__init__=function(){A$wC._staticBatchManagers.push(A$w._staticBatchManager)},A$w.load=function(A$C){return A$f.loader.create(A$C,null,null,A$w)},A$H(A$w,["_staticBatchManager",function(){return this._staticBatchManager=new A$WR}]),A$w}(A$uR)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}}),function(A$C,A$R,A$TC){A$TC.un,A$TC.uns;var A$j=A$TC.static,A$w=A$TC.class,A$G=A$TC.getset,A$L=A$TC.__newvec,A$U=laya.maths.Bezier,A$H=laya.utils.Browser,A$EC=laya.utils.Byte,A$T=(laya.events.Event,laya.events.EventDispatcher),A$o=laya.display.Graphics,A$t=(laya.resource.HTMLCanvas,laya.utils.Handler),A$I=laya.net.Loader,A$M=laya.maths.MathUtil,A$PC=laya.maths.Matrix,A$D=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),A$e=(laya.renders.RenderContext,laya.resource.Resource),A$K=laya.utils.RunDriver,A$GC=laya.display.Sprite,A$F=laya.utils.Stat,A$JC=laya.resource.Texture,A$Q=(laya.net.URL,laya.utils.Utils),A$P=function(){function A$C(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return A$w(A$C,"laya.ani.AnimationContent"),A$C}(),A$J=function(){function A$C(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return A$w(A$C,"laya.ani.AnimationNodeContent"),A$C}(),A$S=function(){function A$C(){}return A$w(A$C,"laya.ani.AnimationParser01"),A$C.parse=function(A$C,A$R){var A$j=A$R.__getBuffer(),A$w=0,A$T=0,A$G=0,A$o=0,A$U=0,A$t=0,A$I=0,A$e=A$R.readUTFString();A$C._aniClassName=A$e;var A$H,A$M=A$R.readUTFString().split("\n"),A$K=A$R.getUint8(),A$F=A$R.getUint32(),A$L=A$R.getUint32();0<A$F&&(A$H=A$j.slice(A$F,A$L));var A$D=new A$EC(A$H);for(0<A$L&&(A$C._publicExtData=A$j.slice(A$L,A$j.byteLength)),A$C._useParent=!!A$R.getUint8(),A$C._anis.length=A$K,A$w=0;A$w<A$K;A$w++){var A$Q=A$C._anis[A$w]=new A$P;A$Q.nodes=new Array;var A$Z=A$Q.name=A$M[A$R.getUint16()];A$C._aniMap[A$Z]=A$w,A$Q.bone3DMap={},A$Q.playTime=A$R.getFloat32(),A$Q.playTime<=0&&console.error("播放时间不能为0  url="+A$C.url+" name="+A$Q.name);var A$S=A$Q.nodes.length=A$R.getUint8();for(A$T=A$Q.totalKeyframeDatasLength=0;A$T<A$S;A$T++){var A$b=A$Q.nodes[A$T]=new A$J;A$b.childs=[];var A$f=A$R.getInt16();0<=A$f&&(A$b.name=A$M[A$f],A$Q.bone3DMap[A$b.name]=A$T),A$b.keyFrame=new Array,A$b.parentIndex=A$R.getInt16(),-1==A$b.parentIndex?A$b.parent=null:A$b.parent=A$Q.nodes[A$b.parentIndex],A$b.lerpType=A$R.getUint8();var A$p=A$R.getUint32();A$D.pos=A$p;var A$h=A$b.keyframeWidth=A$D.getUint16();if(A$Q.totalKeyframeDatasLength+=A$h,0===A$b.lerpType||1===A$b.lerpType)for(A$b.interpolationMethod=[],A$b.interpolationMethod.length=A$h,A$G=0;A$G<A$h;A$G++)A$b.interpolationMethod[A$G]=A$n.interpolation[A$D.getUint8()];null!=A$b.parent&&A$b.parent.childs.push(A$b);var A$x=A$R.getUint16();0<A$x&&(A$b.extenData=A$j.slice(A$R.pos,A$R.pos+A$x),A$R.pos+=A$x);var A$W,A$$=A$R.getUint16(),A$A=0;for(A$G=0,A$o=A$b.keyFrame.length=A$$;A$G<A$o;A$G++){if((A$W=A$b.keyFrame[A$G]=new A$N).duration=A$R.getFloat32(),A$W.startTime=A$A,2===A$b.lerpType){A$W.interpolationData=[];var A$r,A$E=A$R.getUint8();switch(A$r=A$R.getFloat32()){case 254:for(A$W.interpolationData.length=A$h,A$I=0;A$I<A$h;A$I++)A$W.interpolationData[A$I]=0;break;case 255:for(A$W.interpolationData.length=A$h,A$I=0;A$I<A$h;A$I++)A$W.interpolationData[A$I]=5;break;default:for(A$W.interpolationData.push(A$r),A$t=1;A$t<A$E;A$t++)A$W.interpolationData.push(A$R.getFloat32())}}for(A$W.data=new Float32Array(A$h),A$U=0;A$U<A$h;A$U++)A$W.data[A$U]=A$R.getFloat32(),-1e-8<A$W.data[A$U]&&A$W.data[A$U]<1e-8&&(A$W.data[A$U]=0);A$A+=A$W.duration}A$W.startTime=A$Q.playTime,A$b.playTime=A$Q.playTime,A$C._calculateKeyFrame(A$b,A$$,A$h)}}},A$C}(),A$b=function(){function A$f(){}return A$w(A$f,"laya.ani.AnimationParser02"),A$f.READ_DATA=function(){A$f._DATA.offset=A$f._reader.getUint32(),A$f._DATA.size=A$f._reader.getUint32()},A$f.READ_BLOCK=function(){for(var A$C=A$f._BLOCK.count=A$f._reader.getUint16(),A$R=A$f._BLOCK.blockStarts=[],A$j=A$f._BLOCK.blockLengths=[],A$w=0;A$w<A$C;A$w++)A$R.push(A$f._reader.getUint32()),A$j.push(A$f._reader.getUint32())},A$f.READ_STRINGS=function(){var A$C=A$f._reader.getUint32(),A$R=A$f._reader.getUint16(),A$j=A$f._reader.pos;A$f._reader.pos=A$C+A$f._DATA.offset;for(var A$w=0;A$w<A$R;A$w++)A$f._strings[A$w]=A$f._reader.readUTFString();A$f._reader.pos=A$j},A$f.parse=function(A$C,A$R){A$f._templet=A$C;(A$f._reader=A$R).__getBuffer();A$f.READ_DATA(),A$f.READ_BLOCK(),A$f.READ_STRINGS();for(var A$j=0,A$w=A$f._BLOCK.count;A$j<A$w;A$j++){var A$T=A$R.getUint16(),A$G=A$f._strings[A$T],A$o=A$f["READ_"+A$G];if(null==A$o)throw new Error("model file err,no this function:"+A$T+" "+A$G);A$o.call()}},A$f.READ_ANIMATIONS=function(){var A$C=A$f._reader,A$R=A$C.__getBuffer(),A$j=0,A$w=0,A$T=0,A$G=0,A$o=A$C.getUint16(),A$U=[];for(A$U.length=A$o,A$j=0;A$j<A$o;A$j++)A$U[A$j]=A$n.interpolation[A$C.getByte()];var A$t=A$C.getUint8();for(A$f._templet._anis.length=A$t,A$j=0;A$j<A$t;A$j++){var A$I=A$f._templet._anis[A$j]={};A$I.nodes=new Array;var A$e=A$I.name=A$f._strings[A$C.getUint16()];A$f._templet._aniMap[A$e]=A$j,A$I.bone3DMap={},A$I.playTime=A$C.getFloat32();var A$H=A$I.nodes.length=A$C.getInt16();for(A$w=A$I.totalKeyframeDatasLength=0;A$w<A$H;A$w++){var A$M=A$I.nodes[A$w]={};A$M.keyframeWidth=A$o,A$M.childs=[];var A$K=A$C.getUint16();0<=A$K&&(A$M.name=A$f._strings[A$K],A$I.bone3DMap[A$M.name]=A$w),A$M.keyFrame=new Array,A$M.parentIndex=A$C.getInt16(),-1==A$M.parentIndex?A$M.parent=null:A$M.parent=A$I.nodes[A$M.parentIndex],A$I.totalKeyframeDatasLength+=A$o,A$M.interpolationMethod=A$U,null!=A$M.parent&&A$M.parent.childs.push(A$M);var A$F=A$C.getUint16(),A$L=null,A$D=null;for(A$T=0,A$G=A$M.keyFrame.length=A$F;A$T<A$G;A$T++){(A$L=A$M.keyFrame[A$T]={}).startTime=A$C.getFloat32(),A$D&&(A$D.duration=A$L.startTime-A$D.startTime);var A$Q=A$f._DATA.offset,A$Z=A$C.getUint32(),A$S=4*A$o,A$b=A$R.slice(A$Q+A$Z,A$Q+A$Z+A$S);A$L.data=new Float32Array(A$b),A$D=A$L}A$L.duration=0,A$M.playTime=A$I.playTime,A$f._templet._calculateKeyFrame(A$M,A$F,A$o)}}},A$f._templet=null,A$f._reader=null,A$f._strings=[],A$j(A$f,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),A$f}(),A$NC=(function(){function A$C(){}A$w(A$C,"laya.ani.AnimationState"),A$C.stopped=0,A$C.paused=1,A$C.playing=2}(),function(){function A$T(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new A$uC,this.resultMatrix=new A$PC,this._children=[]}A$w(A$T,"laya.ani.bone.Bone");var A$C=A$T.prototype;return A$C.setTempMatrix=function(A$C){this._tempMatrix=A$C;var A$R,A$j=0;for(A$j=0,A$R=this._children.length;A$j<A$R;A$j++)this._children[A$j].setTempMatrix(this._tempMatrix)},A$C.update=function(A$C){var A$R;if(this.rotation=this.transform.skX,A$C)A$R=this.resultTransform.getMatrix(),A$PC.mul(A$R,A$C,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)A$R=this.resultTransform.getMatrix(),A$PC.mul(A$R,this.parentBone.resultMatrix,this.resultMatrix);else{var A$j=this.parentBone,A$w=NaN,A$T=NaN,A$G=NaN,A$o=this.parentBone.resultMatrix;A$R=this.resultTransform.getMatrix();var A$U=A$o.a*A$R.tx+A$o.c*A$R.ty+A$o.tx,A$t=A$o.b*A$R.tx+A$o.d*A$R.ty+A$o.ty,A$I=new A$PC;this.inheritRotation?(A$w=Math.atan2(A$j.resultMatrix.b,A$j.resultMatrix.a),A$T=Math.cos(A$w),A$G=Math.sin(A$w),A$I.setTo(A$T,A$G,-A$G,A$T,0,0),A$PC.mul(this._tempMatrix,A$I,A$PC.TEMP),A$PC.TEMP.copyTo(A$I),A$R=this.resultTransform.getMatrix(),A$PC.mul(A$R,A$I,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,A$R=this.resultTransform.getMatrix(),A$PC.TEMP.identity(),A$PC.TEMP.d=this.d,A$PC.mul(A$R,A$PC.TEMP,this.resultMatrix)),this.resultMatrix.tx=A$U,this.resultMatrix.ty=A$t}else(A$R=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var A$e,A$H=0;for(A$H=0,A$e=this._children.length;A$H<A$e;A$H++)this._children[A$H].update()},A$C.updateChild=function(){var A$C,A$R=0;for(A$R=0,A$C=this._children.length;A$R<A$C;A$R++)this._children[A$R].update()},A$C.setRotation=function(A$C){this._sprite&&(this._sprite.rotation=180*A$C/Math.PI)},A$C.updateDraw=function(A$C,A$R){A$T.ShowBones&&!A$T.ShowBones[this.name]||(this._sprite||(this._sprite=new A$GC,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),A$TC.stage.addChild(this._sprite)),this._sprite.x=A$C+this.resultMatrix.tx,this._sprite.y=A$R+this.resultMatrix.ty);var A$j,A$w=0;for(A$w=0,A$j=this._children.length;A$w<A$j;A$w++)this._children[A$w].updateDraw(A$C,A$R)},A$C.addChild=function(A$C){this._children.push(A$C),A$C.parentBone=this},A$C.findBone=function(A$C){if(this.name==A$C)return this;var A$R,A$j,A$w=0;for(A$w=0,A$R=this._children.length;A$w<A$R;A$w++)if(A$j=this._children[A$w].findBone(A$C))return A$j;return null},A$C.localToWorld=function(A$C){var A$R=A$C[0],A$j=A$C[1];A$C[0]=A$R*this.resultMatrix.a+A$j*this.resultMatrix.c+this.resultMatrix.tx,A$C[1]=A$R*this.resultMatrix.b+A$j*this.resultMatrix.d+this.resultMatrix.ty},A$T.ShowBones={},A$T}()),A$aC=function(){function A$L(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}A$w(A$L,"laya.ani.bone.BoneSlot");var A$C=A$L.prototype;return A$C.showSlotData=function(A$C,A$R){void 0===A$R&&(A$R=!0),this.currSlotData=A$C,A$R&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},A$C.showDisplayByName=function(A$C){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(A$C))},A$C.replaceDisplayByName=function(A$C,A$R){if(this.currSlotData){var A$j;A$j=this.currSlotData.getDisplayByName(A$C);var A$w;A$w=this.currSlotData.getDisplayByName(A$R),this.replaceDisplayByIndex(A$j,A$w)}},A$C.replaceDisplayByIndex=function(A$C,A$R){this.currSlotData&&(this._replaceDic[A$C]=A$R,this.displayIndex==A$C&&this.showDisplayByIndex(A$C))},A$C.showDisplayByIndex=function(A$C){if(null!=this._replaceDic[A$C]&&(A$C=this._replaceDic[A$C]),this.currSlotData&&-1<A$C&&A$C<this.currSlotData.displayArr.length){if(this.displayIndex=A$C,this.currDisplayData=this.currSlotData.displayArr[A$C],this.currDisplayData){var A$R=this.currDisplayData.name;this.currTexture=this.templet.getTexture(A$R),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!A$D.isConchApp||A$D.isConchApp&&"0.9.15"<A$GC.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},A$C.replaceSkin=function(A$C){this._diyTexture=A$C,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},A$C.setParentMatrix=function(A$C){this._parentMatrix=A$C},A$C.draw=function(A$C,A$R,A$j,A$w){if(void 0===A$j&&(A$j=!1),void 0===A$w&&(A$w=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var A$T,A$G=this.currTexture;switch(this._diyTexture&&(A$G=this._diyTexture),this.currDisplayData.type){case 0:if(A$C){var A$o=this.getDisplayMatrix();if(this._parentMatrix){var A$U=!1;if(A$o){var A$t;if(A$PC.mul(A$o,this._parentMatrix,A$PC.TEMP),A$t=A$j?(null==this._resultMatrix&&(this._resultMatrix=new A$PC),this._resultMatrix):new A$PC,!A$D.isWebGL&&this.currDisplayData.uvs||A$D.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var A$I=A$L._tempMatrix;A$I.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(A$I.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(A$U=!0,A$I.rotate(-Math.PI/2)),A$PC.mul(A$I,A$PC.TEMP,A$t)}else A$PC.TEMP.copyTo(A$t);A$U?A$C.drawTexture(A$G,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,A$t):A$C.drawTexture(A$G,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,A$t)}}}break;case 1:if(null==(A$T=A$j?(null==this._skinSprite&&(this._skinSprite=A$L.createSkinMesh()),this._skinSprite):A$L.createSkinMesh()))return;var A$e;if(null==this.currDisplayData.bones){var A$H,A$M=this.currDisplayData.weights;this.deformData&&(A$M=this.deformData),A$H=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=A$h.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=A$h.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=A$M;this.currDisplayData.triangles.length;A$e=this.currDisplayData.triangles,A$T.init2(A$G,null,A$e,this._mVerticleArr,A$H);var A$K,A$F=this.getDisplayMatrix();if(this._parentMatrix)if(A$F)A$PC.mul(A$F,this._parentMatrix,A$PC.TEMP),A$K=A$j?(null==this._resultMatrix&&(this._resultMatrix=new A$PC),this._resultMatrix):new A$PC,A$PC.TEMP.copyTo(A$K),A$T.transform=A$K}else this.skinMesh(A$R,A$T,A$w);A$C.drawSkin(A$T);break;case 2:if(null==(A$T=A$j?(null==this._skinSprite&&(this._skinSprite=A$L.createSkinMesh()),this._skinSprite):A$L.createSkinMesh()))return;this.skinMesh(A$R,A$T,A$w),A$C.drawSkin(A$T)}}},A$C.skinMesh=function(A$C,A$R,A$j){var A$w,A$T=this.currTexture,A$G=this.currDisplayData.bones;A$w=this._diyTexture?(A$T=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=A$h.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=A$h.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var A$o,A$U,A$t=this.currDisplayData.weights,A$I=this.currDisplayData.triangles,A$e=0,A$H=0,A$M=0,A$K=NaN,A$F=NaN,A$L=0,A$D=0,A$Q=[],A$Z=0,A$S=0;if(this.deformData&&0<this.deformData.length){var A$b=0;for(A$Z=0,A$S=A$G.length;A$Z<A$S;){for(A$M=A$G[A$Z++]+A$Z,A$H=A$e=0;A$Z<A$M;A$Z++)A$U=A$C[A$G[A$Z]],A$K=A$t[A$L]+this.deformData[A$b++],A$F=A$t[A$L+1]+this.deformData[A$b++],A$D=A$t[A$L+2],A$e+=(A$K*A$U.a+A$F*A$U.c+A$U.tx)*A$D,A$H+=(A$K*A$U.b+A$F*A$U.d+A$U.ty)*A$D,A$L+=3;A$Q.push(A$e,A$H)}}else for(A$Z=0,A$S=A$G.length;A$Z<A$S;){for(A$M=A$G[A$Z++]+A$Z,A$H=A$e=0;A$Z<A$M;A$Z++)A$U=A$C[A$G[A$Z]],A$K=A$t[A$L],A$F=A$t[A$L+1],A$D=A$t[A$L+2],A$e+=(A$K*A$U.a+A$F*A$U.c+A$U.tx)*A$D,A$H+=(A$K*A$U.b+A$F*A$U.d+A$U.ty)*A$D,A$L+=3;A$Q.push(A$e,A$H)}this._mVerticleArr=A$Q,A$o=A$I,A$R.init2(A$T,null,A$o,this._mVerticleArr,A$w)},A$C.drawBonePoint=function(A$C){A$C&&this._parentMatrix&&A$C.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},A$C.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},A$C.getMatrix=function(){return this._resultMatrix},A$C.copy=function(){var A$C=new A$L;return A$C.type="copy",A$C.name=this.name,A$C.attachmentName=this.attachmentName,A$C.srcDisplayIndex=this.srcDisplayIndex,A$C.parent=this.parent,A$C.displayIndex=this.displayIndex,A$C.templet=this.templet,A$C.currSlotData=this.currSlotData,A$C.currTexture=this.currTexture,A$C.currDisplayData=this.currDisplayData,A$C},A$L.createSkinMesh=function(){return A$D.isWebGL||A$D.isConchApp?A$K.skinAniSprite():(A$D.isWebGL,null)},A$j(A$L,["_tempMatrix",function(){return this._tempMatrix=new A$PC}]),A$L}(),A$nC=function(){function A$C(){this.skinName=null,this.deformSlotDataList=[]}return A$w(A$C,"laya.ani.bone.DeformAniData"),A$C}(),A$yC=function(){function A$C(){this.deformSlotDisplayList=[]}return A$w(A$C,"laya.ani.bone.DeformSlotData"),A$C}(),A$mC=function(){function A$C(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}A$w(A$C,"laya.ani.bone.DeformSlotDisplayData");var A$R=A$C.prototype;return A$R.binarySearch1=function(A$C,A$R){var A$j=0,A$w=A$C.length-2;if(0==A$w)return 1;for(var A$T=A$w>>>1;;){if(A$C[Math.floor(A$T+1)]<=A$R?A$j=A$T+1:A$w=A$T,A$j==A$w)return A$j+1;A$T=A$j+A$w>>>1}return 0},A$R.apply=function(A$C,A$R,A$j){if(void 0===A$j&&(A$j=1),A$C+=.05,!(this.timeList.length<=0)){var A$w=0;if(!(A$C<this.timeList[0])){var A$T=this.vectices[0].length,A$G=[],A$o=this.binarySearch1(this.timeList,A$C);if(this.frameIndex=A$o,A$C>=this.timeList[this.timeList.length-1]){var A$U=this.vectices[this.vectices.length-1];if(A$j<1)for(A$w=0;A$w<A$T;A$w++)A$G[A$w]+=(A$U[A$w]-A$G[A$w])*A$j;else for(A$w=0;A$w<A$T;A$w++)A$G[A$w]=A$U[A$w];this.deformData=A$G}else{this.tweenKeyList[this.frameIndex];var A$t=this.vectices[this.frameIndex-1],A$I=this.vectices[this.frameIndex],A$e=this.timeList[this.frameIndex-1],A$H=this.timeList[this.frameIndex];A$j=this.tweenKeyList[A$o-1]?(A$C-A$e)/(A$H-A$e):0;var A$M=NaN;for(A$w=0;A$w<A$T;A$w++)A$M=A$t[A$w],A$G[A$w]=A$M+(A$I[A$w]-A$M)*A$j;this.deformData=A$G}}}},A$C}(),A$kC=function(){function A$C(){this.time=NaN,this.drawOrder=[]}return A$w(A$C,"laya.ani.bone.DrawOrderData"),A$C}(),A$VC=function(){function A$C(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return A$w(A$C,"laya.ani.bone.EventData"),A$C}(),A$Z=function(){function A$wC(A$C,A$R){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=A$C,this._targetBone=A$R[A$C.targetBoneIndex],this.isSpine=A$C.isSpine,null==this._bones&&(this._bones=[]);for(var A$j=this._bones.length=0,A$w=A$C.boneIndexs.length;A$j<A$w;A$j++)this._bones.push(A$R[A$C.boneIndexs[A$j]]);this.name=A$C.name,this.mix=A$C.mix,this.bendDirection=A$C.bendDirection}A$w(A$wC,"laya.ani.bone.IkConstraint");var A$C=A$wC.prototype;return A$C.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},A$C._applyIk1=function(A$C,A$R,A$j,A$w){var A$T=A$C.parentBone,A$G=1/(A$T.resultMatrix.a*A$T.resultMatrix.d-A$T.resultMatrix.b*A$T.resultMatrix.c),A$o=A$R-A$T.resultMatrix.tx,A$U=A$j-A$T.resultMatrix.ty,A$t=(A$o*A$T.resultMatrix.d-A$U*A$T.resultMatrix.c)*A$G-A$C.transform.x,A$I=(A$U*A$T.resultMatrix.a-A$o*A$T.resultMatrix.b)*A$G-A$C.transform.y,A$e=Math.atan2(A$I,A$t)*A$wC.radDeg-0-A$C.transform.skX;A$C.transform.scX<0&&(A$e+=180),180<A$e?A$e-=360:A$e<-180&&(A$e+=360),A$C.transform.skX=A$C.transform.skY=A$C.transform.skX+A$e*A$w,A$C.update()},A$C.updatePos=function(A$C,A$R){this._sp&&this._sp.pos(A$C,A$R)},A$C._applyIk2=function(A$C,A$R,A$j,A$w,A$T,A$G){if(0!=A$G){var A$o=A$C.resultTransform.x,A$U=A$C.resultTransform.y,A$t=A$C.transform.scX,A$I=A$C.transform.scY,A$e=A$R.transform.scX,A$H=0,A$M=0,A$K=0;A$K=A$t<0?(A$t=-A$t,A$H=180,-1):(A$H=0,1),A$I<0&&(A$I=-A$I,A$K=-A$K),A$M=A$e<0?(A$e=-A$e,180):0;var A$F=A$R.resultTransform.x,A$L=NaN,A$D=NaN,A$Q=NaN,A$Z=A$C.resultMatrix.a,A$S=A$C.resultMatrix.c,A$b=A$C.resultMatrix.b,A$f=A$C.resultMatrix.d,A$p=Math.abs(A$t-A$I)<=1e-4;A$Q=A$p?(A$D=A$Z*A$F+A$S*(A$L=A$R.resultTransform.y)+A$C.resultMatrix.tx,A$b*A$F+A$f*A$L+A$C.resultMatrix.ty):(A$L=0,A$D=A$Z*A$F+A$C.resultMatrix.tx,A$b*A$F+A$C.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new A$GC,A$TC.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(A$j,A$w,15,"#ffff00"),this._sp.graphics.drawCircle(A$D,A$Q,15,"#ff00ff")),A$C.setRotation(Math.atan2(A$Q-A$C.resultMatrix.ty,A$D-A$C.resultMatrix.tx));var A$h=A$C.parentBone;A$Z=A$h.resultMatrix.a,A$S=A$h.resultMatrix.c,A$b=A$h.resultMatrix.b;var A$x=1/(A$Z*(A$f=A$h.resultMatrix.d)-A$S*A$b),A$W=A$j-A$h.resultMatrix.tx,A$$=A$w-A$h.resultMatrix.ty,A$A=(A$W*A$f-A$$*A$S)*A$x-A$o,A$r=(A$$*A$Z-A$W*A$b)*A$x-A$U,A$E=((A$W=A$D-A$h.resultMatrix.tx)*A$f-(A$$=A$Q-A$h.resultMatrix.ty)*A$S)*A$x-A$o,A$P=(A$$*A$Z-A$W*A$b)*A$x-A$U,A$J=Math.sqrt(A$E*A$E+A$P*A$P),A$N=A$R.length*A$e,A$a=NaN,A$n=NaN;if(A$p){var A$y=(A$A*A$A+A$r*A$r-A$J*A$J-(A$N*=A$t)*A$N)/(2*A$J*A$N);A$y<-1?A$y=-1:1<A$y&&(A$y=1),A$n=Math.acos(A$y)*A$T,A$Z=A$J+A$N*A$y,A$S=A$N*Math.sin(A$n),A$a=Math.atan2(A$r*A$Z-A$A*A$S,A$A*A$Z+A$r*A$S)}else{var A$m=(A$Z=A$t*A$N)*A$Z,A$k=(A$S=A$I*A$N)*A$S,A$V=A$A*A$A+A$r*A$r,A$z=Math.atan2(A$r,A$A),A$l=-2*A$k*A$J,A$g=A$k-A$m;if(0<(A$f=A$l*A$l-4*A$g*(A$b=A$k*A$J*A$J+A$m*A$V-A$m*A$k))){var A$B=Math.sqrt(A$f);A$l<0&&(A$B=-A$B);var A$i=(A$B=-(A$l+A$B)/2)/A$g,A$_=A$b/A$B,A$u=Math.abs(A$i)<Math.abs(A$_)?A$i:A$_;A$u*A$u<=A$V&&(A$$=Math.sqrt(A$V-A$u*A$u)*A$T,A$a=A$z-Math.atan2(A$$,A$u),A$n=Math.atan2(A$$/A$I,(A$u-A$J)/A$t))}var A$s=0,A$c=Number.MAX_VALUE,A$X=0,A$Y=0,A$d=0,A$O=0,A$q=0,A$v=0;A$O<(A$f=(A$W=A$J+A$Z)*A$W)&&(A$d=0,A$O=A$f,A$q=A$W),(A$f=(A$W=A$J-A$Z)*A$W)<A$c&&(A$s=Math.PI,A$c=A$f,A$X=A$W);var A$CC=Math.acos(-A$Z*A$J/(A$m-A$k));(A$f=(A$W=A$Z*Math.cos(A$CC)+A$J)*A$W+(A$$=A$S*Math.sin(A$CC))*A$$)<A$c&&(A$s=A$CC,A$c=A$f,A$X=A$W,A$Y=A$$),A$O<A$f&&(A$d=A$CC,A$O=A$f,A$q=A$W,A$v=A$$),A$n=A$V<=(A$c+A$O)/2?(A$a=A$z-Math.atan2(A$Y*A$T,A$X),A$s*A$T):(A$a=A$z-Math.atan2(A$v*A$T,A$q),A$d*A$T)}var A$RC=Math.atan2(A$L,A$F)*A$K,A$jC=A$C.resultTransform.skX;180<(A$a=(A$a-A$RC)*A$wC.radDeg+A$H-A$jC)?A$a-=360:A$a<-180&&(A$a+=360),A$C.resultTransform.x=A$o,A$C.resultTransform.y=A$U,A$C.resultTransform.skX=A$C.resultTransform.skY=A$jC+A$a*A$G,A$jC=A$R.resultTransform.skX,180<(A$n=((A$n+A$RC)*A$wC.radDeg-0)*A$K+A$M-(A$jC%=360))?A$n-=360:A$n<-180&&(A$n+=360),A$R.resultTransform.x=A$F,A$R.resultTransform.y=A$L,A$R.resultTransform.skX=A$R.resultTransform.skY=A$R.resultTransform.skY+A$n*A$G,A$C.update()}},A$C._applyIk3=function(A$C,A$R,A$j,A$w,A$T,A$G){if(0!=A$G){var A$o,A$U,A$t=A$R.resultMatrix.a*A$R.length,A$I=A$R.resultMatrix.b*A$R.length,A$e=A$t*A$t+A$I*A$I,A$H=Math.sqrt(A$e),A$M=A$C.resultMatrix.tx,A$K=A$C.resultMatrix.ty,A$F=A$R.resultMatrix.tx,A$L=A$R.resultMatrix.ty,A$D=A$F-A$M,A$Q=A$L-A$K,A$Z=A$D*A$D+A$Q*A$Q,A$S=Math.sqrt(A$Z),A$b=(A$D=A$j-A$C.resultMatrix.tx)*A$D+(A$Q=A$w-A$C.resultMatrix.ty)*A$Q,A$f=Math.sqrt(A$b);if(A$H+A$S<=A$f||A$f+A$H<=A$S||A$f+A$S<=A$H){var A$p=NaN;A$F=A$M+(A$p=A$H+A$S<=A$f?1:-1)*(A$j-A$M)*A$S/A$f,A$L=A$K+A$p*(A$w-A$K)*A$S/A$f}else{var A$h=(A$Z-A$e+A$b)/(2*A$b),A$x=Math.sqrt(A$Z-A$h*A$h*A$b)/A$f,A$W=A$M+A$D*A$h,A$$=A$K+A$Q*A$h,A$A=-A$Q*A$x,A$r=A$D*A$x;A$L=0<A$T?(A$F=A$W-A$A,A$$-A$r):(A$F=A$W+A$A,A$$+A$r)}A$o=A$F,A$U=A$L,this.isDebug&&(this._sp||(this._sp=new A$GC,A$TC.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(A$M,A$K,15,"#ff00ff"),this._sp.graphics.drawCircle(A$j,A$w,15,"#ffff00"),this._sp.graphics.drawCircle(A$o,A$U,15,"#ff00ff"));var A$E,A$P;A$E=Math.atan2(A$U-A$C.resultMatrix.ty,A$o-A$C.resultMatrix.tx),A$C.setRotation(A$E),(A$P=A$wC._tempMatrix).identity(),A$P.rotate(A$E),A$P.scale(A$C.resultMatrix.getScaleX(),A$C.resultMatrix.getScaleY()),A$P.translate(A$C.resultMatrix.tx,A$C.resultMatrix.ty),A$P.copyTo(A$C.resultMatrix),A$C.updateChild();var A$J,A$N;A$J=Math.atan2(A$w-A$U,A$j-A$o),A$R.setRotation(A$J),(A$N=A$wC._tempMatrix).identity(),A$N.rotate(A$J),A$N.scale(A$R.resultMatrix.getScaleX(),A$R.resultMatrix.getScaleY()),A$N.translate(A$o,A$U),A$P.copyTo(A$R.resultMatrix),A$R.updateChild()}},A$j(A$wC,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new A$PC}]),A$wC}(),A$zC=function(){function A$C(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return A$w(A$C,"laya.ani.bone.IkConstraintData"),A$C}(),A$f=function(){function A$N(A$C,A$R){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=A$C,this.position=A$C.position,this.spacing=A$C.spacing,this.rotateMix=A$C.rotateMix,this.translateMix=A$C.translateMix,this.bones=[];for(var A$j=this.data.bones,A$w=0,A$T=A$j.length;A$w<A$T;A$w++)this.bones.push(A$R[A$j[A$w]])}A$w(A$N,"laya.ani.bone.PathConstraint");var A$C=A$N.prototype;return A$C.apply=function(A$C,A$R){if(this.target){var A$j=this.translateMix,A$w=this.translateMix,A$T=0<A$w,A$G=this.data.spacingMode,A$o="length"==A$G,A$U=this.data.rotateMode,A$t="tangent"==A$U,A$I="chainScale"==A$U,A$e=[],A$H=this.bones.length,A$M=A$t?A$H:A$H+1,A$K=[];(this._spaces=A$K)[0]=this.position;var A$F=this.spacing;if(A$I||A$o)for(var A$L=0,A$D=A$M-1;A$L<A$D;){var A$Q=this.bones[A$L],A$Z=A$Q.length,A$S=A$Z*A$Q.resultMatrix.a,A$b=A$Z*A$Q.resultMatrix.b;A$Z=Math.sqrt(A$S*A$S+A$b*A$b),A$I&&(A$e[A$L]=A$Z),A$K[++A$L]=A$o?Math.max(0,A$Z+A$F):A$F}else for(A$L=1;A$L<A$M;A$L++)A$K[A$L]=A$F;var A$f=this.computeWorldPositions(this.target,A$C,A$R,A$M,A$t,"percent"==this.data.positionMode,"percent"==A$G);if(this._debugKey){for(A$L=0;A$L<A$f.length;A$L++)A$R.drawCircle(A$f[A$L++],A$f[A$L++],5,"#00ff00");var A$p=[];for(A$L=0;A$L<A$f.length;A$L++)A$p.push(A$f[A$L++],A$f[A$L++]);A$R.drawLines(0,0,A$p,"#ff0000")}var A$h=A$f[0],A$x=A$f[1],A$W=this.data.offsetRotation,A$$="chain"==A$U&&0==A$W,A$A=NaN;for(A$L=0,A$A=3;A$L<A$H;A$L++,A$A+=3){(A$Q=this.bones[A$L]).resultMatrix.tx+=(A$h-A$Q.resultMatrix.tx)*A$j,A$Q.resultMatrix.ty+=(A$x-A$Q.resultMatrix.ty)*A$j;var A$r=(A$S=A$f[A$A])-A$h,A$E=(A$b=A$f[A$A+1])-A$x;if(A$I&&0!=(A$Z=A$e[A$L])){var A$P=(Math.sqrt(A$r*A$r+A$E*A$E)/A$Z-1)*A$w+1;A$Q.resultMatrix.a*=A$P,A$Q.resultMatrix.c*=A$P}if(A$h=A$S,A$x=A$b,A$T){var A$J=A$Q.resultMatrix.a,A$N=A$Q.resultMatrix.c,A$a=A$Q.resultMatrix.b,A$n=A$Q.resultMatrix.d,A$y=NaN,A$m=NaN,A$k=NaN;A$y=A$t?A$f[A$A-1]:0==A$K[A$L+1]?A$f[A$A+2]:Math.atan2(A$E,A$r),A$y-=Math.atan2(A$a,A$J)-A$W/180*Math.PI,A$$&&(A$m=Math.cos(A$y),A$k=Math.sin(A$y),A$h+=((A$Z=A$Q.length)*(A$m*A$J-A$k*A$a)-A$r)*A$w,A$x+=(A$Z*(A$k*A$J+A$m*A$a)-A$E)*A$w),A$y>Math.PI?A$y-=2*Math.PI:A$y<-Math.PI&&(A$y+=2*Math.PI),A$y*=A$w,A$m=Math.cos(A$y),A$k=Math.sin(A$y),A$Q.resultMatrix.a=A$m*A$J-A$k*A$a,A$Q.resultMatrix.c=A$m*A$N-A$k*A$n,A$Q.resultMatrix.b=A$k*A$J+A$m*A$a,A$Q.resultMatrix.d=A$k*A$N+A$m*A$n}}}},A$C.computeWorldVertices2=function(A$C,A$R,A$j,A$w,A$T,A$G){var A$o,A$U,A$t=A$C.currDisplayData.bones,A$I=A$C.currDisplayData.weights,A$e=A$C.currDisplayData.triangles,A$H=0,A$M=0,A$K=0,A$F=0,A$L=0,A$D=0,A$Q=0,A$Z=0,A$S=0,A$b=0,A$f=0;if(null!=A$t){for(A$H=0;A$H<A$j;A$H+=2)A$M+=(A$F=A$t[A$M])+1,A$K+=A$F;var A$p=A$R;for(A$L=A$G,A$D=3*A$K;A$L<A$w;A$L+=2){for(A$Z=A$Q=0,A$F=A$t[A$M++],A$F+=A$M;A$M<A$F;A$M++,A$D+=3){A$o=A$p[A$t[A$M]].resultMatrix,A$S=A$I[A$D],A$b=A$I[A$D+1];var A$h=A$I[A$D+2];A$Q+=(A$S*A$o.a+A$b*A$o.c+A$o.tx)*A$h,A$Z+=(A$S*A$o.b+A$b*A$o.d+A$o.ty)*A$h}A$T[A$L]=A$Q,A$T[A$L+1]=A$Z}}else{var A$x,A$W;if(A$e||(A$e=A$I),A$C.deformData&&(A$e=A$C.deformData),A$x=A$C.parent,A$R)for(A$f=A$R.length,A$H=0;A$H<A$f;A$H++)if(A$R[A$H].name==A$x){A$U=A$R[A$H];break}A$U&&(A$W=A$U.resultMatrix),A$W||(A$W=A$N._tempMt);var A$$=A$W.tx,A$A=A$W.ty,A$r=A$W.a,A$E=A$W.b,A$P=A$W.c,A$J=A$W.d;for(A$U&&(A$J*=A$U.d),A$M=A$j,A$L=A$G;A$L<A$w;A$M+=2,A$L+=2)A$S=A$e[A$M],A$b=A$e[A$M+1],A$T[A$L]=A$S*A$r+A$b*A$E+A$$,A$T[A$L+1]=-(A$S*A$P+A$b*A$J+A$A)}},A$C.computeWorldPositions=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o){A$C.currDisplayData.bones,A$C.currDisplayData.weights,A$C.currDisplayData.triangles;var A$U=[],A$t=0,A$I=A$C.currDisplayData.verLen,A$e=this.position,A$H=this._spaces,A$M=[],A$K=[],A$F=A$I/6,A$L=-1,A$D=NaN,A$Q=0,A$Z=0,A$S=NaN,A$b=NaN,A$f=NaN,A$p=NaN;if(A$F--,A$I-=4,this.computeWorldVertices2(A$C,A$R,2,A$I,A$U,0),this._debugKey)for(A$t=0;A$t<A$U.length;)A$j.drawCircle(A$U[A$t++],A$U[A$t++],10,"#ff0000");A$M=A$U,this._curves.length=A$F;var A$h=this._curves,A$x=A$M[A$D=0],A$W=A$M[1],A$$=0,A$A=0,A$r=0,A$E=0,A$P=0,A$J=0,A$N=NaN,A$a=NaN,A$n=NaN,A$y=NaN,A$m=NaN,A$k=NaN,A$V=NaN,A$z=NaN,A$l=0;for(A$t=0,A$l=2;A$t<A$F;A$t++,A$l+=6)A$$=A$M[A$l],A$A=A$M[A$l+1],A$r=A$M[A$l+2],A$E=A$M[A$l+3],A$m=2*(A$N=.1875*(A$x-2*A$$+A$r))+(A$n=.09375*(3*(A$$-A$r)-A$x+(A$P=A$M[A$l+4]))),A$k=2*(A$a=.1875*(A$W-2*A$A+A$E))+(A$y=.09375*(3*(A$A-A$E)-A$W+(A$J=A$M[A$l+5]))),A$V=.75*(A$$-A$x)+A$N+.16666667*A$n,A$z=.75*(A$A-A$W)+A$a+.16666667*A$y,A$D+=Math.sqrt(A$V*A$V+A$z*A$z),A$V+=A$m,A$z+=A$k,A$m+=A$n,A$k+=A$y,A$D+=Math.sqrt(A$V*A$V+A$z*A$z),A$V+=A$m,A$z+=A$k,A$D+=Math.sqrt(A$V*A$V+A$z*A$z),A$V+=A$m+A$n,A$z+=A$k+A$y,A$D+=Math.sqrt(A$V*A$V+A$z*A$z),A$h[A$t]=A$D,A$x=A$P,A$W=A$J;if(A$G&&(A$e*=A$D),A$o)for(A$t=0;A$t<A$w;A$t++)A$H[A$t]*=A$D;var A$g=this._segments,A$B=0,A$i=0;for(A$i=A$Z=A$Q=A$t=0;A$t<A$w;A$t++,A$Q+=3)if((A$S=A$e+=A$b=A$H[A$t])<0)this.addBeforePosition(A$S,A$M,0,A$K,A$Q);else if(A$D<A$S)this.addAfterPosition(A$S-A$D,A$M,A$I-4,A$K,A$Q);else{for(;;A$Z++)if(!((A$p=A$h[A$Z])<A$S)){0==A$Z?A$S/=A$p:A$S=(A$S-(A$f=A$h[A$Z-1]))/(A$p-A$f);break}if(A$Z!=A$L){var A$_=6*(A$L=A$Z);for(A$x=A$M[A$_],A$W=A$M[A$_+1],A$$=A$M[A$_+2],A$A=A$M[A$_+3],A$r=A$M[A$_+4],A$E=A$M[A$_+5],A$m=2*(A$N=.03*(A$x-2*A$$+A$r))+(A$n=.006*(3*(A$$-A$r)-A$x+(A$P=A$M[A$_+6]))),A$k=2*(A$a=.03*(A$W-2*A$A+A$E))+(A$y=.006*(3*(A$A-A$E)-A$W+(A$J=A$M[A$_+7]))),A$V=.3*(A$$-A$x)+A$N+.16666667*A$n,A$z=.3*(A$A-A$W)+A$a+.16666667*A$y,A$B=Math.sqrt(A$V*A$V+A$z*A$z),A$g[0]=A$B,A$_=1;A$_<8;A$_++)A$V+=A$m,A$z+=A$k,A$m+=A$n,A$k+=A$y,A$B+=Math.sqrt(A$V*A$V+A$z*A$z),A$g[A$_]=A$B;A$V+=A$m,A$z+=A$k,A$B+=Math.sqrt(A$V*A$V+A$z*A$z),A$g[8]=A$B,A$V+=A$m+A$n,A$z+=A$k+A$y,A$B+=Math.sqrt(A$V*A$V+A$z*A$z),A$g[9]=A$B,A$i=0}for(A$S*=A$B;;A$i++)if(!((A$p=A$g[A$i])<A$S)){0==A$i?A$S/=A$p:A$S=A$i+(A$S-(A$f=A$g[A$i-1]))/(A$p-A$f);break}this.addCurvePosition(.1*A$S,A$x,A$W,A$$,A$A,A$r,A$E,A$P,A$J,A$K,A$Q,A$T||0<A$t&&0==A$b)}return A$K},A$C.addBeforePosition=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$R[A$j],A$o=A$R[A$j+1],A$U=A$R[A$j+2]-A$G,A$t=A$R[A$j+3]-A$o,A$I=Math.atan2(A$t,A$U);A$w[A$T]=A$G+A$C*Math.cos(A$I),A$w[A$T+1]=A$o+A$C*Math.sin(A$I),A$w[A$T+2]=A$I},A$C.addAfterPosition=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$R[A$j+2],A$o=A$R[A$j+3],A$U=A$G-A$R[A$j],A$t=A$o-A$R[A$j+1],A$I=Math.atan2(A$t,A$U);A$w[A$T]=A$G+A$C*Math.cos(A$I),A$w[A$T+1]=A$o+A$C*Math.sin(A$I),A$w[A$T+2]=A$I},A$C.addCurvePosition=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e,A$H){0==A$C&&(A$C=1e-4);var A$M=A$C*A$C,A$K=A$M*A$C,A$F=1-A$C,A$L=A$F*A$F,A$D=A$L*A$F,A$Q=A$F*A$C,A$Z=3*A$Q,A$S=A$F*A$Z,A$b=A$Z*A$C,A$f=A$R*A$D+A$w*A$S+A$G*A$b+A$U*A$K,A$p=A$j*A$D+A$T*A$S+A$o*A$b+A$t*A$K;A$I[A$e]=A$f,A$I[A$e+1]=A$p,A$I[A$e+2]=A$H?Math.atan2(A$p-(A$j*A$L+A$T*A$Q*2+A$o*A$M),A$f-(A$R*A$L+A$w*A$Q*2+A$G*A$M)):0},A$N.NONE=-1,A$N.BEFORE=-2,A$N.AFTER=-3,A$j(A$N,["_tempMt",function(){return this._tempMt=new A$PC}]),A$N}(),A$lC=function(){function A$C(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return A$w(A$C,"laya.ani.bone.PathConstraintData"),A$C}(),A$gC=function(){function A$C(){this.name=null,this.slotArr=[]}return A$w(A$C,"laya.ani.bone.SkinData"),A$C}(),A$BC=function(){function A$C(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}A$w(A$C,"laya.ani.bone.SkinSlotDisplayData");var A$R=A$C.prototype;return A$R.createTexture=function(A$C){return this.texture||(this.texture=new A$JC(A$C.bitmap,this.uvs),A$C.bitmap.alphaTexture&&(this.texture.alphaTexture=new A$JC(A$C.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=A$C.height,this.texture.height=A$C.width,this.texture.offsetX=-A$C.offsetX,this.texture.offsetY=-A$C.offsetY,this.texture.sourceWidth=A$C.sourceHeight,this.texture.sourceHeight=A$C.sourceWidth):(this.texture.width=A$C.width,this.texture.height=A$C.height,this.texture.offsetX=-A$C.offsetX,this.texture.offsetY=-A$C.offsetY,this.texture.sourceWidth=A$C.sourceWidth,this.texture.sourceHeight=A$C.sourceHeight),A$D.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},A$R.destory=function(){this.texture&&this.texture.destroy()},A$C}(),A$iC=function(){function A$C(){this.name=null,this.displayArr=[]}return A$w(A$C,"laya.ani.bone.SlotData"),A$C.prototype.getDisplayByName=function(A$C){for(var A$R=0,A$j=this.displayArr.length;A$R<A$j;A$R++)if(this.displayArr[A$R].attachmentName==A$C)return A$R;return-1},A$C}(),A$p=function(){function A$C(A$C,A$R){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=A$L(2,0),this._data=A$C,null==this._bones&&(this._bones=[]),this.target=A$R[A$C.targetIndex];var A$j,A$w=0;for(A$w=0,A$j=A$C.boneIndexs.length;A$w<A$j;A$w++)this._bones.push(A$R[A$C.boneIndexs[A$w]]);this.rotateMix=A$C.rotateMix,this.translateMix=A$C.translateMix,this.scaleMix=A$C.scaleMix,this.shearMix=A$C.shearMix}return A$w(A$C,"laya.ani.bone.TfConstraint"),A$C.prototype.apply=function(){for(var A$C,A$R=this.target.resultMatrix.a,A$j=this.target.resultMatrix.b,A$w=this.target.resultMatrix.c,A$T=this.target.resultMatrix.d,A$G=0,A$o=this._bones.length;A$G<A$o;A$G++){if(A$C=this._bones[A$G],0<this.rotateMix){var A$U=A$C.resultMatrix.a,A$t=A$C.resultMatrix.b,A$I=A$C.resultMatrix.c,A$e=A$C.resultMatrix.d,A$H=Math.atan2(A$w,A$R)-Math.atan2(A$I,A$U)+this._data.offsetRotation*Math.PI/180;A$H>Math.PI?A$H-=2*Math.PI:A$H<-Math.PI&&(A$H+=2*Math.PI),A$H*=this.rotateMix;var A$M=Math.cos(A$H),A$K=Math.sin(A$H);A$C.resultMatrix.a=A$M*A$U-A$K*A$I,A$C.resultMatrix.b=A$M*A$t-A$K*A$e,A$C.resultMatrix.c=A$K*A$U+A$M*A$I,A$C.resultMatrix.d=A$K*A$t+A$M*A$e}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),A$C.resultMatrix.tx+=(this._temp[0]-A$C.resultMatrix.tx)*this.translateMix,A$C.resultMatrix.ty+=(this._temp[1]-A$C.resultMatrix.ty)*this.translateMix,A$C.updateChild()),0<this.scaleMix){var A$F=Math.sqrt(A$C.resultMatrix.a*A$C.resultMatrix.a+A$C.resultMatrix.c*A$C.resultMatrix.c),A$L=Math.sqrt(A$R*A$R+A$w*A$w),A$D=1e-5<A$F?(A$F+(A$L-A$F+this._data.offsetScaleX)*this.scaleMix)/A$F:0;A$C.resultMatrix.a*=A$D,A$C.resultMatrix.c*=A$D,A$F=Math.sqrt(A$C.resultMatrix.b*A$C.resultMatrix.b+A$C.resultMatrix.d*A$C.resultMatrix.d),A$L=Math.sqrt(A$j*A$j+A$T*A$T),A$D=1e-5<A$F?(A$F+(A$L-A$F+this._data.offsetScaleY)*this.scaleMix)/A$F:0,A$C.resultMatrix.b*=A$D,A$C.resultMatrix.d*=A$D}if(0<this.shearMix){A$t=A$C.resultMatrix.b,A$e=A$C.resultMatrix.d;var A$Q=Math.atan2(A$e,A$t);(A$H=Math.atan2(A$T,A$j)-Math.atan2(A$w,A$R)-(A$Q-Math.atan2(A$C.resultMatrix.c,A$C.resultMatrix.a)))>Math.PI?A$H-=2*Math.PI:A$H<-Math.PI&&(A$H+=2*Math.PI),A$H=A$Q+(A$H+this._data.offsetShearY*Math.PI/180)*this.shearMix,A$D=Math.sqrt(A$t*A$t+A$e*A$e),A$C.resultMatrix.b=Math.cos(A$H)*A$D,A$C.resultMatrix.d=Math.sin(A$H)*A$D}}},A$C}(),A$_C=function(){function A$C(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return A$w(A$C,"laya.ani.bone.TfConstraintData"),A$C}(),A$uC=function(){function A$C(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}A$w(A$C,"laya.ani.bone.Transform");var A$R=A$C.prototype;return A$R.initData=function(A$C){null!=A$C.x&&(this.x=A$C.x),null!=A$C.y&&(this.y=A$C.y),null!=A$C.skX&&(this.skX=A$C.skX),null!=A$C.skY&&(this.skY=A$C.skY),null!=A$C.scX&&(this.scX=A$C.scX),null!=A$C.scY&&(this.scY=A$C.scY)},A$R.getMatrix=function(){var A$C;return(A$C=this.mMatrix?this.mMatrix:this.mMatrix=new A$PC).identity(),A$C.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(A$C,this.skewX*Math.PI/180,this.skewY*Math.PI/180),A$C.rotate(this.skX*Math.PI/180),A$C.translate(this.x,this.y),A$C},A$R.skew=function(A$C,A$R,A$j){var A$w=Math.sin(A$j),A$T=Math.cos(A$j),A$G=Math.sin(A$R),A$o=Math.cos(A$R);return A$C.setTo(A$C.a*A$o-A$C.b*A$w,A$C.a*A$G+A$C.b*A$T,A$C.c*A$o-A$C.d*A$w,A$C.c*A$G+A$C.d*A$T,A$C.tx*A$o-A$C.ty*A$w,A$C.tx*A$G+A$C.ty*A$T),A$C},A$C}(),A$h=function(){function A$C(){}return A$w(A$C,"laya.ani.bone.UVTools"),A$C.getRelativeUV=function(A$C,A$R,A$j){var A$w=A$C[0],A$T=A$C[2]-A$C[0],A$G=A$C[1],A$o=A$C[5]-A$C[1];A$j||(A$j=[]),A$j.length=A$R.length;var A$U,A$t=0;A$U=A$j.length;var A$I=1/A$T,A$e=1/A$o;for(A$t=0;A$t<A$U;A$t+=2)A$j[A$t]=(A$R[A$t]-A$w)*A$I,A$j[A$t+1]=(A$R[A$t+1]-A$G)*A$e;return A$j},A$C.getAbsoluteUV=function(A$C,A$R,A$j){if(0==A$C[0]&&0==A$C[1]&&1==A$C[4]&&1==A$C[5])return A$j?(A$Q.copyArray(A$j,A$R),A$j):A$R;var A$w=A$C[0],A$T=A$C[2]-A$C[0],A$G=A$C[1],A$o=A$C[5]-A$C[1];A$j||(A$j=[]),A$j.length=A$R.length;var A$U,A$t=0;for(A$U=A$j.length,A$t=0;A$t<A$U;A$t+=2)A$j[A$t]=A$R[A$t]*A$T+A$w,A$j[A$t+1]=A$R[A$t+1]*A$o+A$G;return A$j},A$C}(),A$N=function(){function A$C(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return A$w(A$C,"laya.ani.KeyFramesContent"),A$C}(),A$x=function(){function A$e(){}return A$w(A$e,"laya.ani.math.BezierLerp"),A$e.getBezierRate=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$e._getBezierParamKey(A$R,A$j,A$w,A$T),A$o=100*A$G+A$C;if(A$e._bezierResultCache[A$o])return A$e._bezierResultCache[A$o];var A$U,A$t=A$e._getBezierPoints(A$R,A$j,A$w,A$T,A$G),A$I=0;for(A$U=A$t.length,A$I=0;A$I<A$U;A$I+=2)if(A$C<=A$t[A$I])return A$e._bezierResultCache[A$o]=A$t[A$I+1],A$t[A$I+1];return A$e._bezierResultCache[A$o]=1},A$e._getBezierParamKey=function(A$C,A$R,A$j,A$w){return 100*(100*(100*(100*A$C+A$R)+A$j)+A$w)},A$e._getBezierPoints=function(A$C,A$R,A$j,A$w,A$T){return A$e._bezierPointsCache[A$T]?A$e._bezierPointsCache[A$T]:(A$G=[0,0,A$C,A$R,A$j,A$w,1,1],A$o=(new A$U).getBezierPoints(A$G,100,3),A$e._bezierPointsCache[A$T]=A$o);var A$G,A$o},A$e._bezierResultCache={},A$e._bezierPointsCache={},A$e}(),A$W=function(A$C){function A$R(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,A$R.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}A$w(A$R,"laya.ani.AnimationPlayer",A$T);var A$j=A$R.prototype;return A$TC.imps(A$j,{"laya.resource.IDestroy":!0}),A$j._onTempletLoadedComputeFullKeyframeIndices=function(A$C,A$R,A$j){this._templet===A$j&&this._cachePlayRate===A$C&&this._cacheFrameRate===A$R&&this._computeFullKeyframeIndices()},A$j._computeFullKeyframeIndices=function(){for(var A$C=this._fullFrames=[],A$R=this._templet,A$j=this._cacheFrameRateInterval*this._cachePlayRate,A$w=0,A$T=A$R.getAnimationCount();A$w<A$T;A$w++){for(var A$G=[],A$o=0,A$U=A$R.getAnimation(A$w).nodes.length;A$o<A$U;A$o++){for(var A$t=A$R.getAnimation(A$w).nodes[A$o],A$I=Math.floor(A$t.playTime/A$j+.01),A$e=new Uint16Array(A$I+1),A$H=-1,A$M=0,A$K=A$t.keyFrame.length;A$M<A$K;A$M++){var A$F=A$t.keyFrame[A$M],A$L=A$F.startTime,A$D=A$L+A$F.duration+A$j;do{for(var A$Q=Math.floor(A$L/A$j+.5),A$Z=A$H+1;A$Z<A$Q;A$Z++)A$e[A$Z]=A$M;A$e[A$H=A$Q]=A$M,A$L+=A$j}while(A$L<=A$D)}A$G.push(A$e)}A$C.push(A$G)}},A$j._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},A$j._calculatePlayDuration=function(){if(0!==this.state){var A$C=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=A$C),this._playEnd>A$C&&(this._playEnd=A$C),this._playDuration=this._playEnd-this._playStart}},A$j._setPlayParams=function(A$C,A$R){this._currentTime=A$C,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/A$R+.01),0),this._currentFrameTime=this._currentKeyframeIndex*A$R},A$j._setPlayParamsWhenStop=function(A$C,A$R){this._currentTime=A$C,this._currentKeyframeIndex=Math.max(Math.floor(A$C/A$R+.01),0),this._currentFrameTime=this._currentKeyframeIndex*A$R,this._currentAnimationClipIndex=-1},A$j._update=function(A$C){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var A$R=this._cacheFrameRateInterval*this._cachePlayRate,A$j=0;this._startUpdateLoopCount!==A$F.loopCount&&(A$j=A$C*this.playbackRate,this._elapsedPlaybackTime+=A$j);var A$w=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=A$w)return this._setPlayParamsWhenStop(A$w,A$R),void this.event("stopped");if(A$j+=this._currentTime,0<A$w)if(A$w<=A$j)do{if(A$j-=A$w,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(A$w,A$R),this._stopWhenCircleFinish=!1,void this.event("stopped");A$j<A$w&&(this._setPlayParams(A$j,A$R),this.event("complete"))}while(A$w<=A$j);else this._setPlayParams(A$j,A$R);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(A$w,A$R),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},A$j._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},A$j.play=function(A$C,A$R,A$j,A$w,A$T){if(void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=1),void 0===A$j&&(A$j=2147483647),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(A$j<0||A$w<0||A$T<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==A$T&&A$T<A$w)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=A$R,this._overallDuration=A$j,this._playStart=A$w,this._playEnd=A$T,this._paused=!1,this._currentAnimationClipIndex=A$C,this._currentKeyframeIndex=0,this._startUpdateLoopCount=A$F.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},A$j.playByFrame=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$C&&(A$C=0),void 0===A$R&&(A$R=1),void 0===A$j&&(A$j=2147483647),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=30);var A$o=1e3/A$G;this.play(A$C,A$R,A$j,A$w*A$o,A$T*A$o)},A$j.stop=function(A$C){void 0===A$C&&(A$C=!0),A$C?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},A$G(0,A$j,"playEnd",function(){return this._playEnd}),A$G(0,A$j,"templet",function(){return this._templet},function(A$C){0===!this.state&&this.stop(!0),this._templet!==A$C&&((this._templet=A$C).loaded?this._computeFullKeyframeIndices():A$C.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),A$G(0,A$j,"playStart",function(){return this._playStart}),A$G(0,A$j,"playDuration",function(){return this._playDuration}),A$G(0,A$j,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),A$G(0,A$j,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),A$G(0,A$j,"overallDuration",function(){return this._overallDuration}),A$G(0,A$j,"currentFrameTime",function(){return this._currentFrameTime}),A$G(0,A$j,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),A$G(0,A$j,"currentPlayTime",function(){return this._currentTime+this._playStart}),A$G(0,A$j,"cachePlayRate",function(){return this._cachePlayRate},function(A$C){this._cachePlayRate!==A$C&&(this._cachePlayRate=A$C,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[A$C,this._cacheFrameRate])))}),A$G(0,A$j,"cacheFrameRate",function(){return this._cacheFrameRate},function(A$C){this._cacheFrameRate!==A$C&&(this._cacheFrameRate=A$C,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,A$C])))}),A$G(0,A$j,"currentTime",null,function(A$C){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(A$C<this._playStart||A$C>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=A$F.loopCount;var A$R=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=A$C,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/A$R),0),this._currentFrameTime=this._currentKeyframeIndex*A$R}}),A$G(0,A$j,"paused",function(){return this._paused},function(A$C){(this._paused=A$C)&&this.event("paused")}),A$G(0,A$j,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),A$G(0,A$j,"destroyed",function(){return this._destroyed}),A$R}(),A$a=function(A$C){function A$R(){A$R.__super.call(this),A$D.isConchNode&&(this.drawSkin=function(A$C){A$C.transform||(A$C.transform=A$PC.EMPTY),this._addCmd([A$C]),this.setSkinMesh&&this.setSkinMesh(A$C._ps,A$C.mVBData,A$C.mEleNum,0,A$C.mTexture,A$C.transform)})}return A$w(A$R,"laya.ani.GraphicsAni",A$o),A$R.prototype.drawSkin=function(A$C){var A$R=[A$C];this._saveToCmd(A$D._context._drawSkin,A$R)},A$R.create=function(){return A$R._caches.pop()||new A$R},A$R.recycle=function(A$C){A$C.clear(),A$R._caches.push(A$C)},A$R._caches=[],A$R}(),A$n=function(A$C){function A$Z(){this._aniMap={},this.unfixedLastAniIndex=-1,A$Z.__super.call(this),this._anis=new Array}A$w(A$Z,"laya.ani.AnimationTemplet",A$e);var A$R=A$Z.prototype;return A$R.parse=function(A$C){var A$R=new A$EC(A$C);this._aniVersion=A$R.readUTFString(),A$S.parse(this,A$R)},A$R._calculateKeyFrame=function(A$C,A$R,A$j){var A$w=A$C.keyFrame;A$w[A$R]=A$w[0];for(var A$T=0;A$T<A$R;A$T++){var A$G=A$w[A$T];A$G.nextData=0===A$G.duration?A$G.data:A$w[A$T+1].data}A$w.length--},A$R.onAsynLoaded=function(A$C,A$R,A$j){var A$w=new A$EC(A$R);switch(this._aniVersion=A$w.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":A$b.parse(this,A$w);break;default:A$S.parse(this,A$w)}this._endLoaded()},A$R.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},A$R.getAnimationCount=function(){return this._anis.length},A$R.getAnimation=function(A$C){return this._anis[A$C]},A$R.getAniDuration=function(A$C){return this._anis[A$C].playTime},A$R.getNodes=function(A$C){return this._anis[A$C].nodes},A$R.getNodeIndexWithName=function(A$C,A$R){return this._anis[A$C].bone3DMap[A$R]},A$R.getNodeCount=function(A$C){return this._anis[A$C].nodes.length},A$R.getTotalkeyframesLength=function(A$C){return this._anis[A$C].totalKeyframeDatasLength},A$R.getPublicExtData=function(){return this._publicExtData},A$R.getAnimationDataWithCache=function(A$C,A$R,A$j,A$w){var A$T=A$R[A$j];if(A$T){var A$G=A$T[A$C];return A$G?A$G[A$w]:null}return null},A$R.setAnimationDataWithCache=function(A$C,A$R,A$j,A$w,A$T){var A$G=A$R[A$j]||(A$R[A$j]={});(A$G[A$C]||(A$G[A$C]=[]))[A$w]=A$T},A$R.getOriginalData=function(A$C,A$R,A$j,A$w,A$T){for(var A$G=this._anis[A$C].nodes,A$o=0,A$U=0,A$t=A$G.length,A$I=0;A$U<A$t;A$U++){var A$e,A$H=A$G[A$U];A$e=A$H.keyFrame[A$j[A$U][A$w]],A$H.dataOffset=A$I;var A$M=A$T-A$e.startTime,A$K=A$H.lerpType;if(A$K)switch(A$K){case 0:case 1:for(A$o=0;A$o<A$H.keyframeWidth;)A$o+=A$H.interpolationMethod[A$o](A$H,A$o,A$R,A$I+A$o,A$e.data,A$M,null,A$e.duration,A$e.nextData);break;case 2:var A$F=A$e.interpolationData,A$L=A$F.length,A$D=0;for(A$o=0;A$o<A$L;){var A$Q=A$F[A$o];switch(A$Q){case 6:case 7:A$o+=A$Z.interpolation[A$Q](A$H,A$D,A$R,A$I+A$D,A$e.data,A$M,null,A$e.duration,A$e.nextData,A$F,A$o+1);break;default:A$o+=A$Z.interpolation[A$Q](A$H,A$D,A$R,A$I+A$D,A$e.data,A$M,null,A$e.duration,A$e.nextData)}A$D++}}else for(A$o=0;A$o<A$H.keyframeWidth;)A$o+=A$H.interpolationMethod[A$o](A$H,A$o,A$R,A$I+A$o,A$e.data,A$M,null,A$e.duration,A$e.nextData);A$I+=A$H.keyframeWidth}},A$R.getNodesCurrentFrameIndex=function(A$C,A$R){var A$j=this._anis[A$C].nodes;A$C!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(A$j.length),this.unfixedCurrentTimes=new Float32Array(A$j.length),this.unfixedLastAniIndex=A$C);for(var A$w=0,A$T=A$j.length;A$w<A$T;A$w++){var A$G=A$j[A$w];for(A$R<this.unfixedCurrentTimes[A$w]&&(this.unfixedCurrentFrameIndexes[A$w]=0),this.unfixedCurrentTimes[A$w]=A$R;this.unfixedCurrentFrameIndexes[A$w]<A$G.keyFrame.length&&!(A$G.keyFrame[this.unfixedCurrentFrameIndexes[A$w]].startTime>this.unfixedCurrentTimes[A$w]);)this.unfixedCurrentFrameIndexes[A$w]++;this.unfixedCurrentFrameIndexes[A$w]--}return this.unfixedCurrentFrameIndexes},A$R.getOriginalDataUnfixedRate=function(A$C,A$R,A$j){var A$w=this._anis[A$C].nodes;A$C!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(A$w.length),this.unfixedCurrentTimes=new Float32Array(A$w.length),this.unfixedKeyframes=A$L(A$w.length),this.unfixedLastAniIndex=A$C);for(var A$T=0,A$G=0,A$o=A$w.length,A$U=0;A$G<A$o;A$G++){var A$t=A$w[A$G];for(A$j<this.unfixedCurrentTimes[A$G]&&(this.unfixedCurrentFrameIndexes[A$G]=0),this.unfixedCurrentTimes[A$G]=A$j;this.unfixedCurrentFrameIndexes[A$G]<A$t.keyFrame.length&&!(A$t.keyFrame[this.unfixedCurrentFrameIndexes[A$G]].startTime>this.unfixedCurrentTimes[A$G]);)this.unfixedKeyframes[A$G]=A$t.keyFrame[this.unfixedCurrentFrameIndexes[A$G]],this.unfixedCurrentFrameIndexes[A$G]++;var A$I=this.unfixedKeyframes[A$G];A$t.dataOffset=A$U;var A$e=A$j-A$I.startTime;if(A$t.lerpType)switch(A$t.lerpType){case 0:case 1:for(A$T=0;A$T<A$t.keyframeWidth;)A$T+=A$t.interpolationMethod[A$T](A$t,A$T,A$R,A$U+A$T,A$I.data,A$e,null,A$I.duration,A$I.nextData);break;case 2:var A$H=A$I.interpolationData,A$M=A$H.length,A$K=0;for(A$T=0;A$T<A$M;){var A$F=A$H[A$T];switch(A$F){case 6:case 7:A$T+=A$Z.interpolation[A$F](A$t,A$K,A$R,A$U+A$K,A$I.data,A$e,null,A$I.duration,A$I.nextData,A$H,A$T+1);break;default:A$T+=A$Z.interpolation[A$F](A$t,A$K,A$R,A$U+A$K,A$I.data,A$e,null,A$I.duration,A$I.nextData)}A$K++}}else for(A$T=0;A$T<A$t.keyframeWidth;)A$T+=A$t.interpolationMethod[A$T](A$t,A$T,A$R,A$U+A$T,A$I.data,A$e,null,A$I.duration,A$I.nextData);A$U+=A$t.keyframeWidth}},A$Z._LinearInterpolation_0=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){var A$e=0===A$U?0:A$G/A$U;return A$j[A$w]=(1-A$e)*A$T[A$R]+A$e*A$t[A$R],1},A$Z._QuaternionInterpolation_1=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){var A$e=0===A$U?0:A$G/A$U;return A$M.slerpQuaternionArray(A$T,A$R,A$t,A$R,A$e,A$j,A$w),4},A$Z._AngleInterpolation_2=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return 0},A$Z._RadiansInterpolation_3=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return 0},A$Z._Matrix4x4Interpolation_4=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){for(var A$e=0;A$e<16;A$e++,A$R++)A$j[A$w+A$e]=A$T[A$R]+A$G*A$o[A$R];return 16},A$Z._NoInterpolation_5=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I){return A$j[A$w]=A$T[A$R],1},A$Z._BezierInterpolation_6=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e){return void 0===A$e&&(A$e=0),A$j[A$w]=A$T[A$R]+(A$t[A$R]-A$T[A$R])*A$x.getBezierRate(A$G/A$U,A$I[A$e],A$I[A$e+1],A$I[A$e+2],A$I[A$e+3]),5},A$Z._BezierInterpolation_7=function(A$C,A$R,A$j,A$w,A$T,A$G,A$o,A$U,A$t,A$I,A$e){return void 0===A$e&&(A$e=0),A$j[A$w]=A$I[A$e+4]+A$I[A$e+5]*A$x.getBezierRate((.001*A$G+A$I[A$e+6])/A$I[A$e+7],A$I[A$e],A$I[A$e+1],A$I[A$e+2],A$I[A$e+3]),9},A$Z.load=function(A$C){return A$TC.loader.create(A$C,null,null,A$Z)},A$Z.interpolation=[A$Z._LinearInterpolation_0,A$Z._QuaternionInterpolation_1,A$Z._AngleInterpolation_2,A$Z._RadiansInterpolation_3,A$Z._Matrix4x4Interpolation_4,A$Z._NoInterpolation_5,A$Z._BezierInterpolation_6,A$Z._BezierInterpolation_7],A$Z}(),A$$=function(A$R){function A$j(A$C,A$R){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,A$j.__super.call(this),void 0===A$R&&(A$R=0),A$C&&this.init(A$C,A$R)}A$w(A$j,"laya.ani.bone.Skeleton",A$R);var A$C=A$j.prototype;return A$C.init=function(A$C,A$R){void 0===A$R&&(A$R=0);var A$j,A$w,A$T,A$G=0,A$o=0;if(1==A$R)for(this._graphicsCache=[],A$G=0,A$o=A$C.getAnimationCount();A$G<A$o;A$G++)this._graphicsCache.push([]);if(this._yReverseMatrix=A$C.yReverseMatrix,this._aniMode=A$R,this._templet=A$C,this._player=new A$W,this._player.cacheFrameRate=A$C.rate,this._player.templet=A$C,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=A$C.mBoneArr,this._rootBone=A$C.mRootBone,this._aniSectionDic=A$C.aniSectionDic,0<A$C.ikArr.length)for(this._ikArr=[],A$G=0,A$o=A$C.ikArr.length;A$G<A$o;A$G++)this._ikArr.push(new A$Z(A$C.ikArr[A$G],this._boneList));if(0<A$C.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),A$G=0,A$o=A$C.pathArr.length;A$G<A$o;A$G++)A$j=A$C.pathArr[A$G],A$w=new A$f(A$j,this._boneList),(A$T=this._boneSlotDic[A$j.name])&&((A$w=new A$f(A$j,this._boneList)).target=A$T),this._pathDic[A$j.name]=A$w;if(0<A$C.tfArr.length)for(this._tfArr=[],A$G=0,A$o=A$C.tfArr.length;A$G<A$o;A$G++)this._tfArr.push(new A$p(A$C.tfArr[A$G],this._boneList));if(0<A$C.skinDataArray.length){var A$U=this._templet.skinDataArray[this._skinIndex];this._skinName=A$U.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},A$C.load=function(A$C,A$R,A$j){},A$C._onLoaded=function(){},A$C._parseComplete=function(){var A$C=A$A.TEMPLET_DICTIONARY[this._aniPath];A$C&&(this.init(A$C,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},A$C._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},A$C._onPlay=function(){this.event("played")},A$C._onStop=function(){var A$C,A$R=this._templet.eventAniArr[this._aniClipIndex];if(A$R&&this._eventIndex<A$R.length)for(;this._eventIndex<A$R.length;this._eventIndex++)(A$C=A$R[this._eventIndex]).time>=this._player.playStart&&A$C.time<=this._player.playEnd&&this.event("label",A$C);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},A$C._onPause=function(){this.event("paused")},A$C._parseSrcBoneMatrix=function(){var A$C=0,A$R=0;for(A$R=this._templet.srcBoneMatrixArr.length,A$C=0;A$C<A$R;A$C++)this._boneMatrixArray.push(new A$PC);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var A$j,A$w,A$T=this._templet.boneSlotArray;for(A$C=0,A$R=A$T.length;A$C<A$R;A$C++)A$j=A$T[A$C],null==(A$w=this._bindBoneBoneSlotDic[A$j.parent])&&(this._bindBoneBoneSlotDic[A$j.parent]=A$w=[]),this._boneSlotDic[A$j.name]=A$j=A$j.copy(),A$w.push(A$j),this._boneSlotArray.push(A$j)}},A$C._emitMissedEvents=function(A$C,A$R,A$j){void 0===A$j&&(A$j=0);var A$w=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(A$w){var A$T,A$G,A$o=0;for(A$T=A$w.length,A$o=A$j;A$o<A$T;A$o++)(A$G=A$w[A$o]).time>=this._player.playStart&&A$G.time<=this._player.playEnd&&this.event("label",A$G)}},A$C._update=function(A$C){if(void 0===A$C&&(A$C=!0),!(this._pause||A$C&&this._indexControl)){var A$R=this.timer.currTimer,A$j=this._player.currentKeyframeIndex,A$w=A$R-this._lastTime;if(A$C?this._player._update(A$w):A$j=-1,this._lastTime=A$R,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<A$w&&this._clipIndex==A$j&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var A$T;this._lastUpdateAniClipIndex=this._aniClipIndex,A$j>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var A$G,A$o=this._templet.eventAniArr[this._aniClipIndex];if(A$o&&this._eventIndex<A$o.length&&((A$T=A$o[this._eventIndex]).time>=this._player.playStart&&A$T.time<=this._player.playEnd?this._player.currentPlayTime>=A$T.time&&(this.event("label",A$T),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(A$G=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=A$G&&(this.graphics=A$G));var A$U=0,A$t=0;for(A$t=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,A$t-1)&&0<A$t;)A$t--;if(A$t<this._clipIndex)for(A$U=A$t;A$U<this._clipIndex;A$U++)this._createGraphics(A$U)}else if(1==this._aniMode){if(A$G=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=A$G&&(this.graphics=A$G));for(A$t=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,A$t-1)&&0<A$t;)A$t--;if(A$t<this._clipIndex)for(A$U=A$t;A$U<this._clipIndex;A$U++)this._createGraphics(A$U)}this._createGraphics()}}},A$C._createGraphics=function(A$C){void 0===A$C&&(A$C=-1),-1==A$C&&(A$C=this._clipIndex);var A$R,A$j,A$w=A$C*this._player.cacheFrameRateInterval,A$T=this._templet.drawOrderAniArr[this._aniClipIndex];if(A$T&&0<A$T.length)for(this._drawOrderIndex=0,A$R=A$T[this._drawOrderIndex];A$w>=A$R.time&&(this._drawOrder=A$R.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=A$T.length));)A$R=A$T[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=A$a.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=A$a.create(),A$j=this.graphics;var A$G=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],A$C,A$w);var A$o,A$U,A$t,A$I,A$e=this._aniSectionDic[this._aniClipIndex],A$H=0,A$M=0,A$K=0,A$F=0,A$L=0,A$D=this._templet.srcBoneMatrixArr.length;for(A$L=A$e[A$M=0];A$M<A$D;A$M++)A$I=this._boneList[A$M],A$t=this._templet.srcBoneMatrixArr[A$M],A$I.resultTransform.scX=A$t.scX*this._curOriginalData[A$H++],A$I.resultTransform.skX=A$t.skX+this._curOriginalData[A$H++],A$I.resultTransform.skY=A$t.skY+this._curOriginalData[A$H++],A$I.resultTransform.scY=A$t.scY*this._curOriginalData[A$H++],A$I.resultTransform.x=A$t.x+this._curOriginalData[A$H++],A$I.resultTransform.y=A$t.y+this._curOriginalData[A$H++],8===this._templet.tMatrixDataLen&&(A$I.resultTransform.skewX=A$t.skewX+this._curOriginalData[A$H++],A$I.resultTransform.skewY=A$t.skewY+this._curOriginalData[A$H++]);var A$Q,A$Z={},A$S={};for(A$L+=A$e[1];A$M<A$L;A$M++)A$Z[(A$Q=A$G[A$M]).name]=this._curOriginalData[A$H++],A$S[A$Q.name]=this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++];var A$b,A$f,A$p={},A$h={};for(A$L+=A$e[2];A$M<A$L;A$M++)A$p[(A$Q=A$G[A$M]).name]=this._curOriginalData[A$H++],A$h[A$Q.name]=this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++],this._curOriginalData[A$H++];if(this._pathDic)for(A$L+=A$e[3];A$M<A$L;A$M++){if(A$Q=A$G[A$M],A$b=this._pathDic[A$Q.name])switch(new A$EC(A$Q.extenData).getByte()){case 1:A$b.position=this._curOriginalData[A$H++];break;case 2:A$b.spacing=this._curOriginalData[A$H++];break;case 3:A$b.rotateMix=this._curOriginalData[A$H++],A$b.translateMix=this._curOriginalData[A$H++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(A$PC.TEMP.identity()),this._ikArr)for(A$M=0,A$L=this._ikArr.length;A$M<A$L;A$M++)A$f=this._ikArr[A$M],A$p.hasOwnProperty(A$f.name)&&(A$f.bendDirection=A$p[A$f.name]),A$h.hasOwnProperty(A$f.name)&&(A$f.mix=A$h[A$f.name]),A$f.apply();if(this._pathDic)for(var A$x in this._pathDic)(A$b=this._pathDic[A$x]).apply(this._boneList,A$j);if(this._tfArr)for(A$M=0,A$F=this._tfArr.length;A$M<A$F;A$M++)this._tfArr[A$M].apply();for(A$M=0,A$F=this._boneList.length;A$M<A$F;A$M++)if(A$I=this._boneList[A$M],A$U=this._bindBoneBoneSlotDic[A$I.name],A$I.resultMatrix.copyTo(this._boneMatrixArray[A$M]),A$U)for(A$K=0,A$L=A$U.length;A$K<A$L;A$K++)(A$o=A$U[A$K])&&A$o.setParentMatrix(A$I.resultMatrix);var A$W,A$$,A$A,A$r,A$E={},A$P=this._templet.deformAniArr;if(A$P&&0<A$P.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,A$M=0,A$L=this._boneSlotArray.length;A$M<A$L;A$M++)(A$o=this._boneSlotArray[A$M]).deformData=null;var A$J,A$N=A$P[this._aniClipIndex];for(A$J in A$W=A$N.default,this._setDeform(A$W,A$E,this._boneSlotArray,A$w),A$N)"default"!=A$J&&A$J!=this._skinName&&(A$W=A$N[A$J],this._setDeform(A$W,A$E,this._boneSlotArray,A$w));A$W=A$N[this._skinName],this._setDeform(A$W,A$E,this._boneSlotArray,A$w)}if(this._drawOrder)for(A$M=0,A$L=this._drawOrder.length;A$M<A$L;A$M++)A$$=A$Z[(A$o=this._boneSlotArray[this._drawOrder[A$M]]).name],A$A=A$S[A$o.name],isNaN(A$A)||(A$j.save(),A$j.alpha(A$A)),isNaN(A$$)||-2==A$$||(this._templet.attachmentNames?A$o.showDisplayByName(this._templet.attachmentNames[A$$]):A$o.showDisplayByIndex(A$$)),A$E[this._drawOrder[A$M]]?(A$r=A$E[this._drawOrder[A$M]],A$o.currDisplayData&&A$r[A$o.currDisplayData.attachmentName]?A$o.deformData=A$r[A$o.currDisplayData.attachmentName]:A$o.deformData=null):A$o.deformData=null,isNaN(A$A)?A$o.draw(A$j,this._boneMatrixArray,2==this._aniMode):A$o.draw(A$j,this._boneMatrixArray,2==this._aniMode,A$A),isNaN(A$A)||A$j.restore();else for(A$M=0,A$L=this._boneSlotArray.length;A$M<A$L;A$M++)A$$=A$Z[(A$o=this._boneSlotArray[A$M]).name],A$A=A$S[A$o.name],isNaN(A$A)||(A$j.save(),A$j.alpha(A$A)),isNaN(A$$)||-2==A$$||(this._templet.attachmentNames?A$o.showDisplayByName(this._templet.attachmentNames[A$$]):A$o.showDisplayByIndex(A$$)),A$E[A$M]?(A$r=A$E[A$M],A$o.currDisplayData&&A$r[A$o.currDisplayData.attachmentName]?A$o.deformData=A$r[A$o.currDisplayData.attachmentName]:A$o.deformData=null):A$o.deformData=null,isNaN(A$A)?A$o.draw(A$j,this._boneMatrixArray,2==this._aniMode):A$o.draw(A$j,this._boneMatrixArray,2==this._aniMode,A$A),isNaN(A$A)||A$j.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,A$C,A$j):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,A$C,A$j)},A$C._setDeform=function(A$C,A$R,A$j,A$w){if(A$C){var A$T,A$G,A$o,A$U=0,A$t=0,A$I=0;if(A$C)for(A$U=0,A$t=A$C.deformSlotDataList.length;A$U<A$t;A$U++)for(A$T=A$C.deformSlotDataList[A$U],A$I=0;A$I<A$T.deformSlotDisplayList.length;A$I++)A$o=A$j[(A$G=A$T.deformSlotDisplayList[A$I]).slotIndex],A$G.apply(A$w,A$o),A$R[A$G.slotIndex]||(A$R[A$G.slotIndex]={}),A$R[A$G.slotIndex][A$G.attachment]=A$G.deformData}},A$C.getAnimNum=function(){return this._templet.getAnimationCount()},A$C.getAniNameByIndex=function(A$C){return this._templet.getAniNameByIndex(A$C)},A$C.getSlotByName=function(A$C){return this._boneSlotDic[A$C]},A$C.showSkinByName=function(A$C,A$R){void 0===A$R&&(A$R=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(A$C),A$R)},A$C.showSkinByIndex=function(A$C,A$R){void 0===A$R&&(A$R=!0);for(var A$j=0;A$j<this._boneSlotArray.length;A$j++)this._boneSlotArray[A$j].showSlotData(null,A$R);if(this._templet.showSkinByIndex(this._boneSlotDic,A$C,A$R)){var A$w=this._templet.skinDataArray[A$C];this._skinIndex=A$C,this._skinName=A$w.name}this._clearCache()},A$C.showSlotSkinByIndex=function(A$C,A$R){if(0!=this._aniMode){var A$j=this.getSlotByName(A$C);A$j&&A$j.showDisplayByIndex(A$R),this._clearCache()}},A$C.showSlotSkinByName=function(A$C,A$R){if(0!=this._aniMode){var A$j=this.getSlotByName(A$C);A$j&&A$j.showDisplayByName(A$R),this._clearCache()}},A$C.replaceSlotSkinName=function(A$C,A$R,A$j){if(0!=this._aniMode){var A$w=this.getSlotByName(A$C);A$w&&A$w.replaceDisplayByName(A$R,A$j),this._clearCache()}},A$C.replaceSlotSkinByIndex=function(A$C,A$R,A$j){if(0!=this._aniMode){var A$w=this.getSlotByName(A$C);A$w&&A$w.replaceDisplayByIndex(A$R,A$j),this._clearCache()}},A$C.setSlotSkin=function(A$C,A$R){if(0!=this._aniMode){var A$j=this.getSlotByName(A$C);A$j&&A$j.replaceSkin(A$R),this._clearCache()}},A$C._clearCache=function(){if(1==this._aniMode)for(var A$C=0,A$R=this._graphicsCache.length;A$C<A$R;A$C++){for(var A$j=0,A$w=this._graphicsCache[A$C].length;A$j<A$w;A$j++){var A$T=this._graphicsCache[A$C][A$j];A$T!=this.graphics&&A$a.recycle(A$T)}this._graphicsCache[A$C].length=0}},A$C.play=function(A$C,A$R,A$j,A$w,A$T,A$G){void 0===A$j&&(A$j=!0),void 0===A$w&&(A$w=0),void 0===A$T&&(A$T=0),void 0===A$G&&(A$G=!0),this._indexControl=!1;var A$o=-1,A$U=NaN;if(A$U=A$R?2147483647:0,"string"==typeof A$C)for(var A$t=0,A$I=this._templet.getAnimationCount();A$t<A$I;A$t++){var A$e=this._templet.getAnimation(A$t);if(A$e&&A$C==A$e.name){A$o=A$t;break}}else A$o=A$C;-1<A$o&&A$o<this.getAnimNum()&&(this._aniClipIndex=A$o,(A$j||this._pause||this._currAniIndex!=A$o)&&(this._currAniIndex=A$o,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(A$o)),this._drawOrder=null,this._eventIndex=0,this._player.play(A$o,this._player.playbackRate,A$U,A$w,A$T),A$G&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=A$H.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},A$C.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},A$C.playbackRate=function(A$C){this._player&&(this._player.playbackRate=A$C)},A$C.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},A$C.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=A$H.now(),this.timer.frameLoop(1,this,this._update,null,!0))},A$C._getGrahicsDataWithCache=function(A$C,A$R){return this._graphicsCache[A$C][A$R]},A$C._setGrahicsDataWithCache=function(A$C,A$R,A$j){this._graphicsCache[A$C][A$R]=A$j},A$C.destroy=function(A$C){void 0===A$C&&(A$C=!0),A$R.prototype.destroy.call(this,A$C),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},A$G(0,A$C,"url",function(){return this._aniPath},function(A$C){this.load(A$C)}),A$G(0,A$C,"index",function(){return this._index},function(A$C){this.player&&(this._index=A$C,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),A$G(0,A$C,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),A$G(0,A$C,"templet",function(){return this._templet}),A$G(0,A$C,"player",function(){return this._player}),A$j.useSimpleMeshInCanvas=!1,A$j}(A$GC),A$A=function(A$R){function A$T(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,A$T.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}A$w(A$T,"laya.ani.bone.Templet",A$R);var A$C=A$T.prototype;return A$C.getLoadList=function(){return this._loadList},A$C.loadAni=function(A$C){this._skBufferUrl=A$C,A$TC.loader.load(A$C,A$t.create(this,this.onComplete),null,"arraybuffer")},A$C.onComplete=function(A$C){if(this._isDestroyed)this.destroy();else{var A$R=A$I.getRes(this._skBufferUrl);A$R?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,A$R)):this.event("error","load failed:"+this._skBufferUrl)}},A$C.parseData=function(A$C,A$R,A$j){void 0===A$j&&(A$j=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=A$C,this._mainTexture&&A$D.isWebGL&&A$C.bitmap&&(A$C.bitmap.enableMerageInAtlas=!1),this._rate=A$j,this.parse(A$R)},A$C.buildArmature=function(A$C){return void 0===A$C&&(A$C=0),new A$$(this,A$C)},A$C.parse=function(A$C){A$R.prototype.parse.call(this,A$C),this._endLoaded(),this._aniVersion!=A$T.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+A$T.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},A$C._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var A$C=0;this._loadList=[];var A$R,A$j=new A$EC(this.getPublicExtData()),A$w=0,A$T=0,A$G=0,A$o=A$j.getInt32(),A$U=A$j.readUTFString(),A$t=A$U.split("\n");for(A$C=0;A$C<A$o;A$C++)A$R=this._path+A$t[2*A$C],A$U=A$t[2*A$C+1],A$j.getFloat32(),A$j.getFloat32(),A$w=A$j.getFloat32(),A$T=A$j.getFloat32(),A$G=A$j.getFloat32(),isNaN(A$G)?0:A$G,A$G=A$j.getFloat32(),isNaN(A$G)?0:A$G,A$G=A$j.getFloat32(),isNaN(A$G)?A$w:A$G,A$G=A$j.getFloat32(),isNaN(A$G)?A$T:A$G,-1==this._loadList.indexOf(A$R)&&this._loadList.push(A$R);this.event("inited",this)}},A$C._textureComplete=function(){for(var A$C,A$R,A$j=0,A$w=this._loadList.length;A$j<A$w;A$j++)A$R=this._loadList[A$j],A$C=this._textureDic[A$R]=A$I.getRes(A$R),A$D.isWebGL&&A$C&&A$C.bitmap&&(A$C.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},A$C._parsePublicExtData=function(){var A$C=0,A$R=0,A$j=0,A$w=0,A$T=0;for(A$C=0,A$T=this.getAnimationCount();A$C<A$T;A$C++)this._graphicsCache.push([]);var A$G;A$G="Dragon"!=this._aniClassName;var A$o,A$U,A$t=new A$EC(this.getPublicExtData()),A$I=0,A$e=0,A$H=0,A$M=0,A$K=0,A$F=0,A$L=0,A$D=0,A$Q=0,A$Z=A$t.getInt32(),A$S=A$t.readUTFString(),A$b=A$S.split("\n");for(A$C=0;A$C<A$Z;A$C++){if(A$o=this._mainTexture,A$U=this._path+A$b[2*A$C],A$S=A$b[2*A$C+1],null==this._mainTexture&&(A$o=this._textureDic[A$U]),!A$o)return this.event("error",this),void(this.isParseFail=!0);A$I=A$t.getFloat32(),A$e=A$t.getFloat32(),A$H=A$t.getFloat32(),A$M=A$t.getFloat32(),A$Q=A$t.getFloat32(),A$K=isNaN(A$Q)?0:A$Q,A$Q=A$t.getFloat32(),A$F=isNaN(A$Q)?0:A$Q,A$Q=A$t.getFloat32(),A$L=isNaN(A$Q)?A$H:A$Q,A$Q=A$t.getFloat32(),A$D=isNaN(A$Q)?A$M:A$Q,this.subTextureDic[A$S]=A$JC.create(A$o,A$I,A$e,A$H,A$M,-A$K,-A$F,A$L,A$D),A$o.alphaTexture&&(this.subTextureDic[A$S].alphaTexture=A$JC.create(A$o.alphaTexture,A$I,A$e,A$H,A$M,-A$K,-A$F,A$L,A$D))}this._mainTexture=A$o;var A$f,A$p,A$h,A$x,A$W,A$$=A$t.getUint16();for(A$C=0;A$C<A$$;A$C++)(A$f=[]).push(A$t.getUint16()),A$f.push(A$t.getUint16()),A$f.push(A$t.getUint16()),A$f.push(A$t.getUint16()),this.aniSectionDic[A$C]=A$f;var A$A,A$r=A$t.getInt16(),A$E={};for(A$C=0;A$C<A$r;A$C++)A$p=new A$NC,0==A$C?A$A=A$p:A$p.root=A$A,A$p.d=A$G?-1:1,A$x=A$t.readUTFString(),A$W=A$t.readUTFString(),A$p.length=A$t.getFloat32(),1==A$t.getByte()&&(A$p.inheritRotation=!1),1==A$t.getByte()&&(A$p.inheritScale=!1),A$p.name=A$x,A$W&&((A$h=A$E[A$W])?A$h.addChild(A$p):this.mRootBone=A$p),A$E[A$x]=A$p,this.mBoneArr.push(A$p);this.tMatrixDataLen=A$t.getUint16();var A$P,A$J,A$N=A$t.getUint16(),A$a=Math.floor(A$N/this.tMatrixDataLen),A$n=this.srcBoneMatrixArr;for(A$C=0;A$C<A$a;A$C++)(A$P=new A$uC).scX=A$t.getFloat32(),A$P.skX=A$t.getFloat32(),A$P.skY=A$t.getFloat32(),A$P.scY=A$t.getFloat32(),A$P.x=A$t.getFloat32(),A$P.y=A$t.getFloat32(),8===this.tMatrixDataLen&&(A$P.skewX=A$t.getFloat32(),A$P.skewY=A$t.getFloat32()),A$n.push(A$P),(A$p=this.mBoneArr[A$C]).transform=A$P;var A$y,A$m=A$t.getUint16(),A$k=0;for(A$C=0;A$C<A$m;A$C++){for(A$J=new A$zC,A$k=A$t.getUint16(),A$R=0;A$R<A$k;A$R++)A$J.boneNames.push(A$t.readUTFString()),A$J.boneIndexs.push(A$t.getInt16());A$J.name=A$t.readUTFString(),A$J.targetBoneName=A$t.readUTFString(),A$J.targetBoneIndex=A$t.getInt16(),A$J.bendDirection=A$t.getFloat32(),A$J.mix=A$t.getFloat32(),A$J.isSpine=A$G,this.ikArr.push(A$J)}var A$V,A$z=A$t.getUint16(),A$l=0;for(A$C=0;A$C<A$z;A$C++){for(A$y=new A$_C,A$l=A$t.getUint16(),A$R=0;A$R<A$l;A$R++)A$y.boneIndexs.push(A$t.getInt16());A$y.name=A$t.getUTFString(),A$y.targetIndex=A$t.getInt16(),A$y.rotateMix=A$t.getFloat32(),A$y.translateMix=A$t.getFloat32(),A$y.scaleMix=A$t.getFloat32(),A$y.shearMix=A$t.getFloat32(),A$y.offsetRotation=A$t.getFloat32(),A$y.offsetX=A$t.getFloat32(),A$y.offsetY=A$t.getFloat32(),A$y.offsetScaleX=A$t.getFloat32(),A$y.offsetScaleY=A$t.getFloat32(),A$y.offsetShearY=A$t.getFloat32(),this.tfArr.push(A$y)}var A$g=A$t.getUint16(),A$B=0;for(A$C=0;A$C<A$g;A$C++){for((A$V=new A$lC).name=A$t.readUTFString(),A$B=A$t.getUint16(),A$R=0;A$R<A$B;A$R++)A$V.bones.push(A$t.getInt16());A$V.target=A$t.readUTFString(),A$V.positionMode=A$t.readUTFString(),A$V.spacingMode=A$t.readUTFString(),A$V.rotateMode=A$t.readUTFString(),A$V.offsetRotation=A$t.getFloat32(),A$V.position=A$t.getFloat32(),A$V.spacing=A$t.getFloat32(),A$V.rotateMix=A$t.getFloat32(),A$V.translateMix=A$t.getFloat32(),this.pathArr.push(A$V)}var A$i,A$_,A$u,A$s,A$c,A$X=0,A$Y=0,A$d=0,A$O=NaN,A$q=0,A$v=A$t.getInt16();for(A$C=0;A$C<A$v;A$C++){var A$CC=A$t.getUint8(),A$RC={};this.deformAniArr.push(A$RC);for(var A$jC=0;A$jC<A$CC;A$jC++)for((A$i=new A$nC).skinName=A$t.getUTFString(),A$RC[A$i.skinName]=A$i,A$X=A$t.getInt16(),A$R=0;A$R<A$X;A$R++)for(A$_=new A$yC,A$i.deformSlotDataList.push(A$_),A$Y=A$t.getInt16(),A$j=0;A$j<A$Y;A$j++)for(A$u=new A$mC,A$_.deformSlotDisplayList.push(A$u),A$u.slotIndex=A$t.getInt16(),A$u.attachment=A$t.getUTFString(),A$d=A$t.getInt16(),A$w=0;A$w<A$d;A$w++)for(1==A$t.getByte()?A$u.tweenKeyList.push(!0):A$u.tweenKeyList.push(!1),A$O=A$t.getFloat32(),A$u.timeList.push(A$O),A$s=[],A$u.vectices.push(A$s),A$q=A$t.getInt16(),A$T=0;A$T<A$q;A$T++)A$s.push(A$t.getFloat32())}var A$wC,A$TC,A$GC=A$t.getInt16(),A$oC=0,A$UC=0;for(A$C=0;A$C<A$GC;A$C++){for(A$oC=A$t.getInt16(),A$c=[],A$R=0;A$R<A$oC;A$R++){for((A$wC=new A$kC).time=A$t.getFloat32(),A$UC=A$t.getInt16(),A$j=0;A$j<A$UC;A$j++)A$wC.drawOrder.push(A$t.getInt16());A$c.push(A$wC)}this.drawOrderAniArr.push(A$c)}var A$tC,A$IC=A$t.getInt16(),A$eC=0;for(A$C=0;A$C<A$IC;A$C++){for(A$eC=A$t.getInt16(),A$TC=[],A$R=0;A$R<A$eC;A$R++)(A$tC=new A$VC).name=A$t.getUTFString(),A$tC.intValue=A$t.getInt32(),A$tC.floatValue=A$t.getFloat32(),A$tC.stringValue=A$t.getUTFString(),A$tC.time=A$t.getFloat32(),A$TC.push(A$tC);this.eventAniArr.push(A$TC)}var A$HC=A$t.getInt16();if(0<A$HC)for(this.attachmentNames=[],A$C=0;A$C<A$HC;A$C++)this.attachmentNames.push(A$t.getUTFString());var A$MC,A$KC,A$FC=A$t.getInt16();for(A$C=0;A$C<A$FC;A$C++)(A$MC=new A$aC).name=A$t.readUTFString(),A$MC.parent=A$t.readUTFString(),A$MC.attachmentName=A$t.readUTFString(),A$MC.srcDisplayIndex=A$MC.displayIndex=A$t.getInt16(),(A$MC.templet=this).boneSlotDic[A$MC.name]=A$MC,null==(A$KC=this.bindBoneBoneSlotDic[A$MC.parent])&&(this.bindBoneBoneSlotDic[A$MC.parent]=A$KC=[]),A$KC.push(A$MC),this.boneSlotArray.push(A$MC);var A$LC,A$DC,A$QC,A$ZC=A$t.readUTFString().split("\n"),A$SC=0,A$bC=A$t.getUint8(),A$fC=0,A$pC=0,A$hC=0,A$xC=0,A$WC=0,A$$C=0,A$AC=0;for(A$C=0;A$C<A$bC;A$C++){for((A$LC=new A$gC).name=A$ZC[A$SC++],A$fC=A$t.getUint8(),A$R=0;A$R<A$fC;A$R++){for((A$DC=new A$iC).name=A$ZC[A$SC++],A$MC=this.boneSlotDic[A$DC.name],A$pC=A$t.getUint8(),A$j=0;A$j<A$pC;A$j++){if(A$QC=new A$BC,this.skinSlotDisplayDataArr.push(A$QC),A$QC.name=A$ZC[A$SC++],A$QC.attachmentName=A$ZC[A$SC++],A$QC.transform=new A$uC,A$QC.transform.scX=A$t.getFloat32(),A$QC.transform.skX=A$t.getFloat32(),A$QC.transform.skY=A$t.getFloat32(),A$QC.transform.scY=A$t.getFloat32(),A$QC.transform.x=A$t.getFloat32(),A$QC.transform.y=A$t.getFloat32(),A$DC.displayArr.push(A$QC),A$QC.width=A$t.getFloat32(),A$QC.height=A$t.getFloat32(),A$QC.type=A$t.getUint8(),A$QC.verLen=A$t.getUint16(),0<(A$r=A$t.getUint16()))for(A$QC.bones=[],A$w=0;A$w<A$r;A$w++){var A$rC=A$t.getUint16();A$QC.bones.push(A$rC)}if(0<(A$hC=A$t.getUint16()))for(A$QC.uvs=[],A$w=0;A$w<A$hC;A$w++)A$QC.uvs.push(A$t.getFloat32());if(0<(A$xC=A$t.getUint16()))for(A$QC.weights=[],A$w=0;A$w<A$xC;A$w++)A$QC.weights.push(A$t.getFloat32());if(0<(A$WC=A$t.getUint16()))for(A$QC.triangles=[],A$w=0;A$w<A$WC;A$w++)A$QC.triangles.push(A$t.getUint16());if(0<(A$$C=A$t.getUint16()))for(A$QC.vertices=[],A$w=0;A$w<A$$C;A$w++)A$QC.vertices.push(A$t.getFloat32());if(0<(A$AC=A$t.getUint16()))for(A$QC.lengths=[],A$w=0;A$w<A$AC;A$w++)A$QC.lengths.push(A$t.getFloat32())}A$LC.slotArr.push(A$DC)}this.skinDic[A$LC.name]=A$LC,this.skinDataArray.push(A$LC)}1==A$t.getUint8()?(this.yReverseMatrix=new A$PC(1,0,0,-1,0,0),A$A&&A$A.setTempMatrix(this.yReverseMatrix)):A$A&&A$A.setTempMatrix(new A$PC),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},A$C.getTexture=function(A$C){var A$R=this.subTextureDic[A$C];return A$R||(A$R=this.subTextureDic[A$C.substr(0,A$C.length-1)]),null==A$R?this._mainTexture:A$R},A$C.showSkinByIndex=function(A$C,A$R,A$j){if(void 0===A$j&&(A$j=!0),A$R<0&&A$R>=this.skinDataArray.length)return!1;var A$w,A$T,A$G=0,A$o=0,A$U=this.skinDataArray[A$R];if(A$U){for(A$G=0,A$o=A$U.slotArr.length;A$G<A$o;A$G++)(A$T=A$U.slotArr[A$G])&&(A$w=A$C[A$T.name])&&(A$w.showSlotData(A$T,A$j),A$j&&"undefined"!=A$w.attachmentName&&"null"!=A$w.attachmentName?A$w.showDisplayByName(A$w.attachmentName):A$w.showDisplayByIndex(A$w.displayIndex));return!0}return!1},A$C.getSkinIndexByName=function(A$C){for(var A$R=0,A$j=this.skinDataArray.length;A$R<A$j;A$R++)if(this.skinDataArray[A$R].name==A$C)return A$R;return-1},A$C.getGrahicsDataWithCache=function(A$C,A$R){return this._graphicsCache[A$C][A$R]},A$C.setGrahicsDataWithCache=function(A$C,A$R,A$j){this._graphicsCache[A$C][A$R]=A$j},A$C.destroy=function(){var A$C;for(var A$R in this._isDestroyed=!0,this.subTextureDic)(A$C=this.subTextureDic[A$R])&&A$C.destroy();for(A$R in this._textureDic)(A$C=this._textureDic[A$R])&&A$C.destroy();for(var A$j=0,A$w=this.skinSlotDisplayDataArr.length;A$j<A$w;A$j++)this.skinSlotDisplayDataArr[A$j].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete A$T.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},A$C.getAniNameByIndex=function(A$C){var A$R=this.getAnimation(A$C);return A$R?A$R.name:null},A$G(0,A$C,"rate",function(){return this._rate},function(A$C){this._rate=A$C}),A$T.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",A$T.TEMPLET_DICTIONARY=null,A$T}(A$n)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(A$C,A$R){"use strict";for(var A$j in Object.defineProperty(A$R,"__esModule",{value:!0}),Laya){var A$w=Laya[A$j];A$w&&A$w.__isclass&&(A$R[A$j]=A$w)}});