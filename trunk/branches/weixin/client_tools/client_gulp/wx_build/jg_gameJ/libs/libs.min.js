var Laya=window.Laya=function(J_j,J_a){var J_k={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(J_a,J_b){return 1==arguments.length?J_k.__presubstr.call(this,J_a):J_k.__presubstr.call(this,J_a,0<J_b?J_b:this.length+J_b)},__init:function(J_a){J_a.forEach(function(J_a){J_a.__init$&&J_a.__init$()})},__isClass:function(J_a){return J_a&&(J_a.__isclass||J_a==Object||J_a==String||J_a==Array)},__newvec:function(J_a,J_b){var J_c=[];J_c.length=J_a;for(var J_d=0;J_d<J_a;J_d++)J_c[J_d]=J_b;return J_c},__extend:function(J_a,J_b){for(var J_c in J_b)if(J_b.hasOwnProperty(J_c)){var J_d=Object.getOwnPropertyDescriptor(J_b,J_c),J_e=J_d.get,J_f=J_d.set;J_e||J_f?J_e&&J_f?Object.defineProperty(J_a,J_c,J_d):(J_e&&Object.defineProperty(J_a,J_c,J_e),J_f&&Object.defineProperty(J_a,J_c,J_f)):J_a[J_c]=J_b[J_c]}function J_g(){J_k.un(this,"constructor",J_a)}J_g.prototype=J_b.prototype,J_a.prototype=new J_g,J_k.un(J_a.prototype,"__imps",J_k.__copy({},J_b.prototype.__imps))},__copy:function(J_a,J_b){if(!J_b)return null;for(var J_c in J_a=J_a||{},J_b)J_a[J_c]=J_b[J_c];return J_a},__package:function(J_a,J_b){if(!J_k.__packages[J_a]){J_k.__packages[J_a]=!0;var J_c=J_j,J_d=J_a.split(".");if(1<J_d.length)for(var J_e=0,J_f=J_d.length-1;J_e<J_f;J_e++){var J_g=J_c[J_d[J_e]];J_c=J_g||(J_c[J_d[J_e]]={})}J_c[J_d[J_d.length-1]]||(J_c[J_d[J_d.length-1]]=J_b||{})}},__hasOwnProperty:function(J_a,J_b){return J_b=J_b||this,Object.hasOwnProperty.call(J_b,J_a)||function J_a(J_b,J_c){if(Object.hasOwnProperty.call(J_c.prototype,J_b))return!0;var J_d=J_c.prototype.__super;return null==J_d?null:J_a(J_b,J_d)}(J_a,J_b.__class)},__typeof:function(J_a,J_b){if(!J_a||!J_b)return!1;if(J_b===String)return"string"==typeof J_a;if(J_b===Number)return"number"==typeof J_a;if(J_b.__interface__)J_b=J_b.__interface__;else if("string"!=typeof J_b)return J_a instanceof J_b;return J_a.__imps&&J_a.__imps[J_b]||J_a.__class==J_b},__as:function(J_a,J_b){return this.__typeof(J_a,J_b)?J_a:null},__int:function(J_a){return J_a?parseInt(J_a):0},interface:function(J_a,J_b){J_k.__package(J_a,{});var J_c=J_k.__internals,J_d=J_c[J_a]=J_c[J_a]||{self:J_a};if(J_b){var J_e=J_b.split(",");J_d.extend=[];for(var J_f=0;J_f<J_e.length;J_f++){var J_g=J_e[J_f];J_c[J_g]=J_c[J_g]||{self:J_g},J_d.extend.push(J_c[J_g])}}var J_h=J_j,J_i=J_a.split(".");for(J_f=0;J_f<J_i.length-1;J_f++)J_h=J_h[J_i[J_f]];J_h[J_i[J_i.length-1]]={__interface__:J_a}},class:function(J_a,J_b,J_c,J_d){if(J_c&&J_k.__extend(J_a,J_c),J_b)if(J_k.__package(J_b,J_a),J_k.__classmap[J_b]=J_a,0<J_b.indexOf(".")){if(0==J_b.indexOf("laya.")){var J_e=J_b.split(".");J_d=J_d||J_e[J_e.length-1],J_k[J_d]&&console.log("Warning!,this class["+J_d+"] already exist:",J_k[J_d]),J_k[J_d]=J_a}}else"Main"==J_b?J_j.Main=J_a:"MainWX"==J_b?J_j.MainWX=J_a:(J_k[J_b]&&console.log("Error!,this class["+J_b+"] already exist:",J_k[J_b]),J_k[J_b]=J_a);var J_f=J_k.un,J_g=J_a.prototype;J_f(J_g,"hasOwnProperty",J_k.__hasOwnProperty),J_f(J_g,"__class",J_a),J_f(J_g,"__super",J_c),J_f(J_g,"__className",J_b),J_f(J_a,"__super",J_c),J_f(J_a,"__className",J_b),J_f(J_a,"__isclass",!0),J_f(J_a,"super",function(J_a){this.__super.call(J_a)})},imps:function(J_a,J_b){if(!J_b)return null;var J_e=J_a.__imps||J_k.un(J_a,"__imps",{});function J_f(J_a){var J_b,J_c;if((J_b=J_k.__internals[J_a])&&(J_e[J_a]=!0,J_c=J_b.extend))for(var J_d=0;J_d<J_c.length;J_d++)J_f(J_c[J_d].self)}for(var J_c in J_b)J_f(J_c)},superSet:function(J_a,J_b,J_c,J_d){var J_e=J_a.prototype["_$set_"+J_c];J_e&&J_e.call(J_b,J_d)},superGet:function(J_a,J_b,J_c){var J_d=J_a.prototype["_$get_"+J_c];return J_d?J_d.call(J_b):null},getset:function(J_a,J_b,J_c,J_d,J_e){J_a?(J_d&&(J_b["_$GET_"+J_c]=J_d),J_e&&(J_b["_$SET_"+J_c]=J_e)):(J_d&&J_k.un(J_b,"_$get_"+J_c,J_d),J_e&&J_k.un(J_b,"_$set_"+J_c,J_e)),J_d&&J_e?Object.defineProperty(J_b,J_c,{get:J_d,set:J_e,enumerable:!1,configurable:!0}):(J_d&&Object.defineProperty(J_b,J_c,{get:J_d,enumerable:!1,configurable:!0}),J_e&&Object.defineProperty(J_b,J_c,{set:J_e,enumerable:!1,configurable:!0}))},static:function(J_c,J_d){for(var J_e=0,J_a=J_d.length;J_e<J_a;J_e+=2)if("length"==J_d[J_e])J_c.length=J_d[J_e+1].call(J_c);else{function J_b(){var J_b=J_d[J_e],J_a=J_d[J_e+1];Object.defineProperty(J_c,J_b,{get:function(){return delete this[J_b],this[J_b]=J_a.call(this)},set:function(J_a){delete this[J_b],this[J_b]=J_a},enumerable:!0,configurable:!0})}J_b()}},un:function(J_a,J_b,J_c){return J_c||(J_c=J_a[J_b]),J_k.__propun.value=J_c,Object.defineProperty(J_a,J_b,J_k.__propun),J_c},uns:function(J_b,J_a){J_a.forEach(function(J_a){J_k.un(J_b,J_a)})}};return J_j.console=J_j.console||{log:function(){}},J_j.trace=J_j.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),J_k}(window,document);!function(J_a,J_b,J_c){J_c.un,J_c.uns,J_c.static,J_c.class,J_c.getset,J_c.__newvec}(window,document,Laya),function(J_g,J_b,J_z){J_z.un,J_z.uns;var J_i=J_z.static,J_k=J_z.class,J_o=J_z.getset;J_z.__newvec;J_z.interface("laya.runtime.IMarket"),J_z.interface("laya.filters.IFilter"),J_z.interface("laya.display.ILayout"),J_z.interface("laya.resource.IDispose"),J_z.interface("laya.runtime.IPlatform"),J_z.interface("laya.resource.IDestroy"),J_z.interface("laya.runtime.IConchNode"),J_z.interface("laya.filters.IFilterAction"),J_z.interface("laya.runtime.ICPlatformClass"),J_z.interface("laya.resource.ICreateResource"),J_z.interface("laya.runtime.IConchRenderObject"),J_z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var J_F=function(){function J_f(){}return J_k(J_f,"laya.utils.RunDriver"),J_f.FILTER_ACTIONS=[],J_f.pixelRatio=-1,J_f._charSizeTestDiv=null,J_f.now=function(){return Date.now()},J_f.getWindow=function(){return J_g},J_f.getPixelRatio=function(){if(J_f.pixelRatio<0){var J_a=J_O.context,J_b=J_a.backingStorePixelRatio||J_a.webkitBackingStorePixelRatio||J_a.mozBackingStorePixelRatio||J_a.msBackingStorePixelRatio||J_a.oBackingStorePixelRatio||J_a.backingStorePixelRatio||1;(J_f.pixelRatio=(J_O.window.devicePixelRatio||1)/J_b)<1&&(J_f.pixelRatio=1)}return J_f.pixelRatio},J_f.getIncludeStr=function(J_a){return null},J_f.createShaderCondition=function(J_a){var J_b="(function() {return "+J_a+";})";return J_z._runScript(J_b)},J_f.fontMap=[],J_f.measureText=function(J_a,J_b){var J_c=J_f.hanzi.test(J_a);if(J_c&&J_f.fontMap[J_b])return J_f.fontMap[J_b];var J_d=J_O.context;J_d.font=J_b;var J_e=J_d.measureText(J_a);return J_c&&(J_f.fontMap[J_b]=J_e),J_e},J_f.getWebGLContext=function(J_a){},J_f.beginFlush=function(){},J_f.endFinish=function(){},J_f.addToAtlas=null,J_f.flashFlushImage=function(J_a){},J_f.drawToCanvas=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_va.create("2D"),J_h=new J_K(J_c,J_d,J_g);return J_L.renders[J_b]._fun(J_a,J_h,J_e,J_f),J_g},J_f.createParticleTemplate2D=null,J_f.createGLTextur=null,J_f.createWebGLContext2D=null,J_f.changeWebGLSize=function(J_a,J_b){},J_f.createRenderSprite=function(J_a,J_b){return new J_L(J_a,J_b)},J_f.createFilterAction=function(J_a){return new J_v},J_f.createGraphics=function(){return new J_m},J_f.clear=function(J_a){J_J._context.ctx.clear()},J_f.cancelLoadByUrl=function(J_a){},J_f.clearAtlas=function(J_a){},J_f.isAtlas=function(J_a){return!1},J_f.addTextureToAtlas=function(J_a){},J_f.getTexturePixels=function(J_a,J_b,J_c,J_d,J_e){return null},J_f.skinAniSprite=function(){return null},J_f.update3DLoop=function(){},J_i(J_f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),J_f}(),J_d=(J_o(1,J_z,"alertGlobalError",null,function(J_a){var J_f=0;J_O.window.onerror=J_a?function(J_a,J_b,J_c,J_d,J_e){J_f++<5&&J_e&&alert(J_e.stack||J_e)}:null}),J_z.init=function(J_a,J_b,J_c){for(var J_d=[],J_e=2,J_f=arguments.length;J_e<J_f;J_e++)J_d.push(arguments[J_e]);if(!J_z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=J_z._arrayBufferSlice),J_z._isinit=!0,J_O.__init__(),J_M.__init__(),J_m.__init__(),J_z.timer=new J_Y,J_z.scaleTimer=new J_Y,J_z.loader=new J_ia,J_s.__init__(),J_e=0;for(var J_g=J_d.length;J_e<J_g;J_e++)J_d[J_e].enable&&J_d[J_e].enable();return J_n.__init__(),J_h.__init__(),J_N.__init__(),J_Q.beginCheck(),J_z._currentStage=J_z.stage=new J_ra,J_z.stage.conchModel&&J_z.stage.conchModel.setRootNode(),J_z._getUrlPath(),J_z.render=new J_J(0,0),J_z.stage.size(J_a,J_b),J_L.__init__(),J_l.__init__(),J_p.instance.__init__(J_z.stage,J_J.canvas),J_xa.__init__(),J_E.autoStopMusic=!0,J_C.__init__(),J_J.canvas}},J_z._getUrlPath=function(){var J_a=J_O.window.location,J_b=J_a.pathname;J_b=J_b&&":"==J_b.charAt(2)?J_b.substring(1):J_b,J_I.rootPath=J_I.basePath=J_I.getPath("file:"==J_a.protocol?J_b:J_a.protocol+"//"+J_a.host+J_a.pathname)},J_z._arrayBufferSlice=function(J_a,J_b){var J_c=new Uint8Array(this,J_a,J_b-J_a),J_d=new Uint8Array(J_c.length);return J_d.set(J_c),J_d.buffer},J_z._runScript=function(J_a){return J_O.window[J_z._evcode](J_a)},J_z.stage=null,J_z.timer=null,J_z.scaleTimer=null,J_z.loader=null,J_z.version="1.8.6",J_z.render=null,J_z._currentStage=null,J_z._isinit=!1,J_z.isDebug=!1,J_z.MiniAdpter={init:function(){J_g.navigator&&J_g.navigator.userAgent&&-1<J_g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},J_i(J_z,["conchMarket",function(){return this.conchMarket=J_g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=J_g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function J_a(){}return J_k(J_a,"Config"),J_a.WebGLTextCacheCount=500,J_a.atlasEnable=!1,J_a.showCanvasMark=!1,J_a.animationInterval=50,J_a.isAntialias=!1,J_a.isAlpha=!1,J_a.premultipliedAlpha=!0,J_a.isStencil=!0,J_a.preserveDrawingBuffer=!1,J_a}()),J_j=function(){function J_j(){this._events=null}J_k(J_j,"laya.events.EventDispatcher");var J_a=J_j.prototype;return J_a.hasListener=function(J_a){return!!(this._events&&this._events[J_a])},J_a.event=function(J_a,J_b){if(!this._events||!this._events[J_a])return!1;var J_c=this._events[J_a];if(J_c.lock)J_c.queue||(J_c.queue=[]),J_c.queue.push(J_b);else{var J_d;for(J_c.lock=!0,J_c.cursor=J_c.head;J_c.cursor;)J_d=J_c.cursor,J_c.cursor=J_d.next,J_d.once&&J_j.delNode(J_c,J_d),null!=J_b?J_d.args?J_d.method.apply(J_d.caller,J_d.args.concat(J_b)):J_b instanceof Array?J_d.method.apply(J_d.caller,J_b):J_d.method.call(J_d.caller,J_b):J_d.method.apply(J_d.caller,J_d.args),J_d.once&&J_j.recoverHandler(J_d);J_c.lock=!1,!J_c.head&&this._events&&this._events[J_a]==J_c&&delete this._events[J_a],J_c.queue&&J_c.queue.length&&this.event(J_a,J_c.queue.shift())}return!0},J_a.on=function(J_a,J_b,J_c,J_d){return this._createListener(J_a,J_b,J_c,J_d,!1)},J_a.once=function(J_a,J_b,J_c,J_d){return this._createListener(J_a,J_b,J_c,J_d,!0)},J_a._createListener=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=!0),J_f&&this.off(J_a,J_b,J_c,J_e);var J_g=J_j.createHandler(J_b||this,J_c,J_d,J_e);this._events||(this._events={});var J_h=this._events,J_i=J_h[J_a];return J_i?J_i.tail?(J_g.prev=J_i.tail,J_i.tail.next=J_g,J_i.tail=J_g):J_i.head=J_i.tail=J_g:J_h[J_a]={head:J_g,tail:J_g,cursor:null,lock:!1},this},J_a.off=function(J_a,J_b,J_c,J_d){if(void 0===J_d&&(J_d=!1),!this._events||!this._events[J_a])return this;for(var J_e=this._events[J_a],J_f=J_e.head;J_f;){if((!J_b||J_f.caller===J_b)&&J_f.method===J_c&&(!J_d||J_f.once)){J_j.delNode(J_e,J_f),J_e.cursor==J_f&&(J_e.cursor=J_f.next),J_j.recoverHandler(J_f);break}J_f=J_f.next}return this},J_a.offAll=function(J_a){var J_b=this._events;if(!J_b)return this;if(J_a)this._recoverHandlers(J_b[J_a]),delete J_b[J_a];else{for(var J_c in J_b)this._recoverHandlers(J_b[J_c]);this._events=null}return this},J_a._recoverHandlers=function(J_a){if(J_a){for(var J_b=J_a.head;J_b;){J_j.delNode(J_a,J_b);var J_c=J_b.next;J_j.recoverHandler(J_b),J_b=J_c}J_a.cursor=null}},J_a.isMouseEvent=function(J_a){return J_j.MOUSE_EVENTS[J_a]},J_j.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},J_j.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},J_j.delNode=function(J_a,J_b){J_b.prev?J_b.prev.next=J_b.next:J_a.head=J_b.next,J_b.next?J_b.next.prev=J_b.prev:J_a.tail=J_b.prev},J_j.createHandler=function(J_a,J_b,J_c,J_d){var J_e=J_j._freeHandler;return J_e?(J_j._freeCount--,J_j._freeHandler=J_e.next,J_e.caller=J_a,J_e.method=J_b,J_e.args=J_c,J_e.once=J_d):J_e={caller:J_a,method:J_b,args:J_c,once:J_d},J_e.prev=J_e.next=null,J_e},J_j.recoverHandler=function(J_a){J_a.caller=J_a.method=J_a.args=J_a.prev=null,J_a.next=J_j._freeHandler,J_j._freeHandler=J_a,J_j._freeCount++},J_j._freeHandler=null,J_j._freeCount=0,J_j}(),J_u=function(){function J_e(J_a,J_b,J_c,J_d){this.once=!1,void(this._id=0)===J_d&&(J_d=!1),this.setTo(J_a,J_b,J_c,J_d)}J_k(J_e,"laya.utils.Handler");var J_a=J_e.prototype;return J_a.setTo=function(J_a,J_b,J_c,J_d){return this._id=J_e._gid++,this.caller=J_a,this.method=J_b,this.args=J_c,this.once=J_d,this},J_a.run=function(){if(null==this.method)return null;var J_a=this._id,J_b=this.method.apply(this.caller,this.args);return this._id===J_a&&this.once&&this.recover(),J_b},J_a.runWith=function(J_a){if(null==this.method)return null;var J_b=this._id;if(null==J_a)var J_c=this.method.apply(this.caller,this.args);else J_c=this.args||J_a.unshift?this.args?this.method.apply(this.caller,this.args.concat(J_a)):this.method.apply(this.caller,J_a):this.method.call(this.caller,J_a);return this._id===J_b&&this.once&&this.recover(),J_c},J_a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},J_a.recover=function(){0<this._id&&(this._id=0,this.clear())},J_e.create=function(J_a,J_b,J_c,J_d){return void 0===J_d&&(J_d=!0),new J_e(J_a,J_b,J_c,J_d)},J_e._gid=1,J_e}(),J_D=function(){function J_a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}J_k(J_a,"laya.display.BitmapFont");var J_b=J_a.prototype;return J_b.loadFont=function(J_a,J_b){this._path=J_a,this._complete=J_b,J_z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],J_u.create(this,this.onLoaded))},J_b.onLoaded=function(){this.parseFont(J_ha.getRes(this._path),J_ha.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},J_b.parseFont=function(J_a,J_b){if(null!=J_a&&null!=J_b){this._texture=J_b;var J_c=J_a.getElementsByTagName("info");if(!J_c[0].getAttributeNode)return this.parseFont2(J_a,J_b);this.fontSize=parseInt(J_c[0].getAttributeNode("size").nodeValue);var J_d,J_e=J_c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(J_e[0]),parseInt(J_e[1]),parseInt(J_e[2]),parseInt(J_e[3])],J_d=J_a.getElementsByTagName("char");var J_f=0;for(J_f=0;J_f<J_d.length;J_f++){var J_g=J_d[J_f],J_h=parseInt(J_g.getAttributeNode("id").nodeValue),J_i=parseInt(J_g.getAttributeNode("xoffset").nodeValue)/1,J_j=parseInt(J_g.getAttributeNode("yoffset").nodeValue)/1,J_k=parseInt(J_g.getAttributeNode("xadvance").nodeValue)/1,J_l=new J_B;J_l.x=parseInt(J_g.getAttributeNode("x").nodeValue),J_l.y=parseInt(J_g.getAttributeNode("y").nodeValue),J_l.width=parseInt(J_g.getAttributeNode("width").nodeValue),J_l.height=parseInt(J_g.getAttributeNode("height").nodeValue);var J_m=J_ka.create(J_b,J_l.x,J_l.y,J_l.width,J_l.height,J_i,J_j);this._maxWidth=Math.max(this._maxWidth,J_k+this.letterSpacing),this._fontCharDic[J_h]=J_m,this._fontWidthMap[J_h]=J_k}}},J_b.parseFont2=function(J_a,J_b){if(null!=J_a&&null!=J_b){this._texture=J_b;var J_c=J_a.getElementsByTagName("info");this.fontSize=parseInt(J_c[0].attributes.size.nodeValue);var J_d=J_c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(J_d[0]),parseInt(J_d[1]),parseInt(J_d[2]),parseInt(J_d[3])];var J_e=J_a.getElementsByTagName("char"),J_f=0;for(J_f=0;J_f<J_e.length;J_f++){var J_g=J_e[J_f].attributes,J_h=parseInt(J_g.id.nodeValue),J_i=parseInt(J_g.xoffset.nodeValue)/1,J_j=parseInt(J_g.yoffset.nodeValue)/1,J_k=parseInt(J_g.xadvance.nodeValue)/1,J_l=new J_B;J_l.x=parseInt(J_g.x.nodeValue),J_l.y=parseInt(J_g.y.nodeValue),J_l.width=parseInt(J_g.width.nodeValue),J_l.height=parseInt(J_g.height.nodeValue);var J_m=J_ka.create(J_b,J_l.x,J_l.y,J_l.width,J_l.height,J_i,J_j);this._maxWidth=Math.max(this._maxWidth,J_k+this.letterSpacing),this._fontCharDic[J_h]=J_m,this._fontWidthMap[J_h]=J_k}}},J_b.getCharTexture=function(J_a){return this._fontCharDic[J_a.charCodeAt(0)]},J_b.destroy=function(){if(this._texture){for(var J_a in this._fontCharDic){var J_b=this._fontCharDic[J_a];J_b&&J_b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},J_b.setSpaceWidth=function(J_a){this._spaceWidth=J_a},J_b.getCharWidth=function(J_a){var J_b=J_a.charCodeAt(0);return this._fontWidthMap[J_b]?this._fontWidthMap[J_b]+this.letterSpacing:" "==J_a?this._spaceWidth+this.letterSpacing:0},J_b.getTextWidth=function(J_a){for(var J_b=0,J_c=0,J_d=J_a.length;J_c<J_d;J_c++)J_b+=this.getCharWidth(J_a.charAt(J_c));return J_b},J_b.getMaxWidth=function(){return this._maxWidth},J_b.getMaxHeight=function(){return this.fontSize},J_b.drawText=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h=this.getTextWidth(J_a),J_i=0;"center"===J_e&&(J_i=(J_f-J_h)/2),"right"===J_e&&(J_i=J_f-J_h);for(var J_j=0,J_k=0,J_l=J_a.length;J_k<J_l;J_k++)(J_g=this.getCharTexture(J_a.charAt(J_k)))&&(J_b.graphics.drawTexture(J_g,J_c+J_j+J_i,J_d),J_j+=this.getCharWidth(J_a.charAt(J_k)))},J_a}(),J_h=function(){function J_c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=J_c._TF_EMPTY}J_k(J_c,"laya.display.css.Style");var J_a=J_c.prototype;return J_a.getTransform=function(){return this._tf},J_a.setTransform=function(J_a){this._tf="none"!==J_a&&J_a?J_a:J_c._TF_EMPTY},J_a.setTranslateX=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.translateX=J_a},J_a.setTranslateY=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.translateY=J_a},J_a.setScaleX=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.scaleX=J_a},J_a.setScale=function(J_a,J_b){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.scaleX=J_a,this._tf.scaleY=J_b},J_a.setScaleY=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.scaleY=J_a},J_a.setRotate=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.rotate=J_a},J_a.setSkewX=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.skewX=J_a},J_a.setSkewY=function(J_a){this._tf===J_c._TF_EMPTY&&(this._tf=new J_e),this._tf.skewY=J_a},J_a.destroy=function(){this.scrollRect=null},J_a.render=function(J_a,J_b,J_c,J_d){},J_a.getCSSStyle=function(){return J_ba.EMPTY},J_a._enableLayout=function(){return!1},J_o(0,J_a,"scaleX",function(){return this._tf.scaleX},function(J_a){this.setScaleX(J_a)}),J_o(0,J_a,"transform",function(){return this.getTransform()},function(J_a){this.setTransform(J_a)}),J_o(0,J_a,"translateX",function(){return this._tf.translateX},function(J_a){this.setTranslateX(J_a)}),J_o(0,J_a,"translateY",function(){return this._tf.translateY},function(J_a){this.setTranslateY(J_a)}),J_o(0,J_a,"scaleY",function(){return this._tf.scaleY},function(J_a){this.setScaleY(J_a)}),J_o(0,J_a,"block",function(){return 0!=(1&this._type)}),J_o(0,J_a,"skewY",function(){return this._tf.skewY},function(J_a){this.setSkewY(J_a)}),J_o(0,J_a,"rotate",function(){return this._tf.rotate},function(J_a){this.setRotate(J_a)}),J_o(0,J_a,"skewX",function(){return this._tf.skewX},function(J_a){this.setSkewX(J_a)}),J_o(0,J_a,"paddingLeft",function(){return 0}),J_o(0,J_a,"paddingTop",function(){return 0}),J_o(0,J_a,"absolute",function(){return!0}),J_c.__init__=function(){J_c._TF_EMPTY=new J_e,J_c.EMPTY=new J_c},J_c.EMPTY=null,J_c._TF_EMPTY=null,J_c}(),J_n=function(){function J_b(J_a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=J_S.create(J_b.defaultColor),this.family=J_b.defaultFamily,this.stroke=J_b._STROKE,this.size=J_b.defaultSize,J_a&&J_a!==J_b.EMPTY&&J_a.copyTo(this)}J_k(J_b,"laya.display.css.Font");var J_a=J_b.prototype;return J_a.set=function(J_a){this._text=null;for(var J_b=J_a.split(" "),J_c=0,J_d=J_b.length;J_c<J_d;J_c++){var J_e=J_b[J_c];switch(J_e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<J_e.indexOf("px")&&(this.size=parseInt(J_e),this.family=J_b[J_c+1],J_c++)}},J_a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},J_a.copyTo=function(J_a){J_a._type=this._type,J_a._text=this._text,J_a._weight=this._weight,J_a._color=this._color,J_a.family=this.family,J_a.stroke=this.stroke!=J_b._STROKE?this.stroke.slice():J_b._STROKE,J_a.indent=this.indent,J_a.size=this.size},J_o(0,J_a,"password",function(){return 0!=(1024&this._type)},function(J_a){J_a?this._type|=1024:this._type&=-1025}),J_o(0,J_a,"color",function(){return this._color.strColor},function(J_a){this._color=J_S.create(J_a)}),J_o(0,J_a,"italic",function(){return 0!=(512&this._type)},function(J_a){J_a?this._type|=512:this._type&=-513}),J_o(0,J_a,"bold",function(){return 0!=(2048&this._type)},function(J_a){J_a?this._type|=2048:this._type&=-2049}),J_o(0,J_a,"weight",function(){return""+this._weight},function(J_a){var J_b=0;switch(J_a){case"normal":break;case"bold":this.bold=!0,J_b=700;break;case"bolder":J_b=800;break;case"lighter":J_b=100;break;default:J_b=parseInt(J_a)}this._weight=J_b,this._text=null}),J_o(0,J_a,"decoration",function(){return this._decoration?this._decoration.value:null},function(J_a){var J_b=J_a.split(" ");switch(this._decoration||(this._decoration={}),J_b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=J_b[0]}J_b[1]&&(this._decoration.color=J_S.create(J_b)),this._decoration.value=J_a}),J_b.__init__=function(){J_b.EMPTY=new J_b(null)},J_b.EMPTY=null,J_b.defaultColor="#000000",J_b.defaultSize=12,J_b.defaultFamily="Arial",J_b.defaultFont="12px Arial",J_b._STROKE=[0,"#000000"],J_b._ITALIC=512,J_b._PASSWORD=1024,J_b._BOLD=2048,J_b}(),J_e=function(){function J_a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return J_k(J_a,"laya.display.css.TransformInfo"),J_a}(),J_m=function(){function J_l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,J_J.isConchNode){this._nativeObj=new J_g._conchGraphics,this.id=this._nativeObj.conchID}}J_k(J_l,"laya.display.Graphics");var J_a=J_l.prototype;return J_a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},J_a.clear=function(J_a){void 0===J_a&&(J_a=!1);var J_b=0,J_c=0;if(J_a){var J_d=this._one;if(this._cmds){for(J_c=this._cmds.length,J_b=0;J_b<J_c;J_b++)!(J_d=this._cmds[J_b])||J_d.callee!==J_J._context._drawTexture&&J_d.callee!==J_J._context._drawTextureWithTransform||(J_d[0]=null,J_l._cache.push(J_d));this._cmds.length=0}else J_d&&(!J_d||J_d.callee!==J_J._context._drawTexture&&J_d.callee!==J_J._context._drawTextureWithTransform||(J_d[0]=null,J_l._cache.push(J_d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(J_b=0,J_c=this._vectorgraphArray.length;J_b<J_c;J_b++)J__.getInstance().deleteShape(this._vectorgraphArray[J_b]);this._vectorgraphArray.length=0}},J_a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},J_a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new J_c,this._graphicBounds._graphics=this)},J_a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},J_a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},J_a.getBounds=function(J_a){return void 0===J_a&&(J_a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(J_a)},J_a.getBoundPoints=function(J_a){return void 0===J_a&&(J_a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(J_a)},J_a._addCmd=function(J_a){this._cmds=this._cmds||[],J_a.callee=J_a.shift(),this._cmds.push(J_a)},J_a.setFilters=function(J_a){this._saveToCmd(J_J._context._setFilters,J_a)},J_a.drawTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_g&&(J_g=1),!J_a||J_g<.01)return null;J_d||(J_d=J_a.sourceWidth),J_e||(J_e=J_a.sourceHeight),J_g=J_g<0?0:1<J_g?1:J_g;var J_h,J_i=!J_J.isWebGL&&(J_O.onFirefox||J_O.onEdge||J_O.onIE||J_O.onSafari)?.5:0,J_j=J_d/J_a.sourceWidth,J_k=J_e/J_a.sourceHeight;return J_d=J_a.width*J_j,J_e=J_a.height*J_k,J_a.loaded&&(J_d<=0||J_e<=0)?null:(J_b+=J_a.offsetX*J_j,J_c+=J_a.offsetY*J_k,this._sp&&(this._sp._renderType|=512),J_b-=J_i,J_c-=J_i,J_d+=2*J_i,J_e+=2*J_i,J_l._cache.length?((J_h=J_l._cache.pop())[0]=J_a,J_h[1]=J_b,J_h[2]=J_c,J_h[3]=J_d,J_h[4]=J_e,J_h[5]=J_f,J_h[6]=J_g):J_h=[J_a,J_b,J_c,J_d,J_e,J_f,J_g],J_h.callee=J_f||1!=J_g?J_J._context._drawTextureWithTransform:J_J._context._drawTexture,null!=this._one||J_f||1!=J_g?this._saveToCmd(J_h.callee,J_h):(this._one=J_h,this._render=this._renderOneImg),J_a.loaded||J_a.once("loaded",this,this._textureLoaded,[J_a,J_h]),this._repaint(),J_h)},J_a.cleanByTexture=function(J_a,J_b,J_c,J_d,J_e){if(void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),!J_a)return this.clear();if(this._one&&this._render===this._renderOneImg){J_d||(J_d=J_a.sourceWidth),J_e||(J_e=J_a.sourceHeight);var J_f=J_d/J_a.sourceWidth,J_g=J_e/J_a.sourceHeight;J_d=J_a.width*J_f,J_e=J_a.height*J_g,J_b+=J_a.offsetX*J_f,J_c+=J_a.offsetY*J_g,this._one[0]=J_a,this._one[1]=J_b,this._one[2]=J_c,this._one[3]=J_d,this._one[4]=J_e,this._repaint()}else this.clear(),J_a&&this.drawTexture(J_a,J_b,J_c,J_d,J_e)},J_a.drawTextures=function(J_a,J_b){J_a&&this._saveToCmd(J_J._context._drawTextures,[J_a,J_b])},J_a.fillTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f="repeat"),J_a){var J_h=[J_a,J_b,J_c,J_d,J_e,J_f,J_g||J_A.EMPTY,{}];J_a.loaded||J_a.once("loaded",this,this._textureLoaded,[J_a,J_h]),this._saveToCmd(J_J._context._fillTexture,J_h)}},J_a._textureLoaded=function(J_a,J_b){J_b[3]=J_b[3]||J_a.width,J_b[4]=J_b[4]||J_a.height,this._repaint()},J_a.fillCircle=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_c.bitmap.enableMerageInAtlas=!1;var J_h=new Float32Array(2*(J_g+1)),J_i=new Float32Array(2*(J_g+1)),J_j=new Uint16Array(3*J_g),J_k=2*Math.PI/J_g,J_l=0;J_h[0]=J_d,J_h[1]=J_e,J_i[0]=J_d/J_c.width,J_i[1]=J_e/J_c.height;for(var J_m=2,J_n=0;J_n<J_g;J_n++){var J_o=J_f*Math.cos(J_l)+J_d,J_p=J_f*Math.sin(J_l)+J_e;J_h[J_m]=J_o,J_h[J_m+1]=J_p,J_i[J_m]=J_o/J_c.width,J_i[J_m+1]=J_p/J_c.height,J_l+=J_k,J_m+=2}for(J_n=J_m=0;J_n<J_g;J_n++)J_j[J_m++]=0,J_j[J_m++]=J_n+1,J_j[J_m++]=J_g+1<=J_n+2?1:J_n+2;this.drawTriangles(J_c,J_a,J_b,J_h,J_i,J_j)},J_a.drawTriangles=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){void 0===J_h&&(J_h=1),this._saveToCmd(J_J._context.drawTriangles,[J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j])},J_a._saveToCmd=function(J_a,J_b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=J_b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(J_b)),J_b.callee=J_a,this._repaint(),J_b},J_a.clipRect=function(J_a,J_b,J_c,J_d){this._saveToCmd(J_J._context._clipRect,[J_a,J_b,J_c,J_d])},J_a.fillText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){void 0===J_g&&(J_g=0),this._saveToCmd(J_J._context._fillText,[J_a,J_b,J_c,J_d||J_n.defaultFont,J_e,J_f])},J_a.fillBorderText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){this._saveToCmd(J_J._context._fillBorderText,[J_a,J_b,J_c,J_d||J_n.defaultFont,J_e,J_f,J_g,J_h])},J_a.strokeText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._saveToCmd(J_J._context._strokeText,[J_a,J_b,J_c,J_d||J_n.defaultFont,J_e,J_f,J_g])},J_a.alpha=function(J_a){J_a=J_a<0?0:1<J_a?1:J_a,this._saveToCmd(J_J._context._alpha,[J_a])},J_a.setAlpha=function(J_a){J_a=J_a<0?0:1<J_a?1:J_a,this._saveToCmd(J_J._context._setAlpha,[J_a])},J_a.transform=function(J_a,J_b,J_c){void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),this._saveToCmd(J_J._context._transform,[J_a,J_b,J_c])},J_a.rotate=function(J_a,J_b,J_c){void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),this._saveToCmd(J_J._context._rotate,[J_a,J_b,J_c])},J_a.scale=function(J_a,J_b,J_c,J_d){void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),this._saveToCmd(J_J._context._scale,[J_a,J_b,J_c,J_d])},J_a.translate=function(J_a,J_b){this._saveToCmd(J_J._context._translate,[J_a,J_b])},J_a.save=function(){this._saveToCmd(J_J._context._save,[])},J_a.restore=function(){this._saveToCmd(J_J._context._restore,[])},J_a.replaceText=function(J_a){this._repaint();var J_b=this._cmds;if(J_b){for(var J_c=J_b.length-1;-1<J_c;J_c--)if(this._isTextCmd(J_b[J_c].callee))return J_b[J_c][0].toUpperCase?J_b[J_c][0]=J_a:J_b[J_c][0].setText(J_a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=J_a:this._one[0].setText(J_a),!0;return!1},J_a._isTextCmd=function(J_a){return J_a===J_J._context._fillText||J_a===J_J._context._fillBorderText||J_a===J_J._context._strokeText},J_a.replaceTextColor=function(J_a){this._repaint();var J_b=this._cmds;if(J_b)for(var J_c=J_b.length-1;-1<J_c;J_c--)this._isTextCmd(J_b[J_c].callee)&&(J_b[J_c][4]=J_a,J_b[J_c][0].toUpperCase||(J_b[J_c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=J_a,this._one[0].toUpperCase||(this._one[0].changed=!0))},J_a.loadImage=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=this;void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0);var J_h=J_ha.getRes(J_a);function J_i(J_a){J_a&&(J_g.drawTexture(J_a,J_b,J_c,J_d,J_e),null!=J_f&&J_f.call(J_g._sp,J_a))}J_h?J_i(J_h):J_z.loader.load(J_a,J_u.create(null,J_i),null,"image")},J_a._renderEmpty=function(J_a,J_b,J_c,J_d){},J_a._renderAll=function(J_a,J_b,J_c,J_d){for(var J_e,J_f=this._cmds,J_g=0,J_h=J_f.length;J_g<J_h;J_g++)(J_e=J_f[J_g]).callee.call(J_b,J_c,J_d,J_e)},J_a._renderOne=function(J_a,J_b,J_c,J_d){this._one.callee.call(J_b,J_c,J_d,this._one)},J_a._renderOneImg=function(J_a,J_b,J_c,J_d){this._one.callee.call(J_b,J_c,J_d,this._one),2305!==J_a._renderType&&(J_a._renderType|=1)},J_a.drawLine=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=1);var J_g=0;J_J.isWebGL&&(J_g=J__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J_g));var J_h=J_f%2==0?0:.5,J_i=[J_a+J_h,J_b+J_h,J_c+J_h,J_d+J_h,J_e,J_f,J_g];this._saveToCmd(J_J._context._drawLine,J_i)},J_a.drawLines=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=1);var J_f=0;if(J_c&&!(J_c.length<4)){J_J.isWebGL&&(J_f=J__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J_f));var J_g=J_e%2==0?0:.5,J_h=[J_a+J_g,J_b+J_g,J_c,J_d,J_e,J_f];this._saveToCmd(J_J._context._drawLines,J_h)}},J_a.drawCurves=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=1);var J_f=[J_a,J_b,J_c,J_d,J_e];this._saveToCmd(J_J._context._drawCurves,J_f)},J_a.drawRect=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){void 0===J_g&&(J_g=1);var J_h=J_f?J_g/2:0,J_i=J_f?J_g:0,J_j=[J_a+J_h,J_b+J_h,J_c-J_i,J_d-J_i,J_e,J_f,J_g];this._saveToCmd(J_J._context._drawRect,J_j)},J_a.drawCircle=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=1);var J_g=J_e?J_f/2:0,J_h=0;J_J.isWebGL&&(J_h=J__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J_h));var J_i=[J_a,J_b,J_c-J_g,J_d,J_e,J_f,J_h];this._saveToCmd(J_J._context._drawCircle,J_i)},J_a.drawPie=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){void 0===J_h&&(J_h=1);var J_i=J_g?J_h/2:0,J_j=J_g?J_h:0,J_k=0;J_J.isWebGL&&(J_k=J__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J_k));var J_l=[J_a+J_i,J_b+J_i,J_c-J_j,J_d,J_e,J_f,J_g,J_h,J_k];J_l[3]=J_$.toRadian(J_d),J_l[4]=J_$.toRadian(J_e),this._saveToCmd(J_J._context._drawPie,J_l)},J_a.drawPoly=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=1);var J_g=0,J_h=!1;J_J.isWebGL&&(J_g=J__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J_g),J_h=!(6<J_c.length));var J_i=J_e?J_f%2==0?0:.5:0,J_j=[J_a+J_i,J_b+J_i,J_c,J_d,J_e,J_f,J_g,J_h];this._saveToCmd(J_J._context._drawPoly,J_j)},J_a.drawPath=function(J_a,J_b,J_c,J_d,J_e){var J_f=[J_a,J_b,J_c,J_d,J_e];this._saveToCmd(J_J._context._drawPath,J_f)},J_o(0,J_a,"cmds",function(){return this._cmds},function(J_a){this._sp&&(this._sp._renderType|=512),this._cmds=J_a,this._render=this._renderAll,this._repaint()}),J_l.__init__=function(){if(J_J.isConchNode){for(var J_a=laya.display.Graphics.prototype,J_b=J_O.window.ConchGraphics.prototype,J_c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],J_d=0,J_e=J_c.length;J_d<=J_e;J_d++){var J_f=J_c[J_d];J_a[J_f]=J_b[J_f]}J_a._saveToCmd=null,J_b.drawImageS&&(J_a.drawTextures=function(J_a,J_b){if(J_a&&J_a.loaded&&J_a.bitmap&&J_a.source){var J_c=J_a.uv,J_d=J_a.bitmap.width,J_e=J_a.bitmap.height;this.drawImageS(J_a.bitmap.source,J_c[0]*J_d,J_c[1]*J_e,(J_c[2]-J_c[0])*J_d,(J_c[5]-J_c[3])*J_e,J_a.offsetX,J_a.offsetY,J_a.width,J_a.height,J_b)}}),J_a.drawTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_g&&(J_g=1),J_a)if(J_a.loaded){if(J_a.loaded&&J_a.bitmap&&J_a.source&&(J_d||(J_d=J_a.sourceWidth),J_e||(J_e=J_a.sourceHeight),J_g=J_g<0?0:1<J_g?1:J_g,J_d=J_d-J_a.sourceWidth+J_a.width,J_e=J_e-J_a.sourceHeight+J_a.height,!(J_d<=0||J_e<=0))){J_b+=J_a.offsetX,J_c+=J_a.offsetY;var J_h=J_a.uv,J_i=J_a.bitmap.width,J_j=J_a.bitmap.height;J_h[4]<J_h[0]&&J_h[5]<J_h[1]?this.drawImageM(J_a.bitmap.source,J_h[4]*J_i,J_h[5]*J_j,(J_h[0]-J_h[4])*J_i,(J_h[1]-J_h[5])*J_j,J_b,J_c,J_d,J_e,J_f,J_g):this.drawImageM(J_a.bitmap.source,J_h[0]*J_i,J_h[1]*J_j,(J_h[2]-J_h[0])*J_i,(J_h[5]-J_h[3])*J_j,J_b,J_c,J_d,J_e,J_f,J_g),this._repaint()}}else J_a.once("loaded",this,function(){this.drawTexture(J_a,J_b,J_c,J_d,J_e,J_f)})},J_a.fillTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f="repeat"),J_a&&J_a.loaded){var J_h,J_i=J_J._context.ctx,J_j=J_a.bitmap.width,J_k=J_a.bitmap.height,J_l=J_a.uv;J_h=J_a.uv!=J_ka.DEF_UV?J_i.createPattern(J_a.bitmap.source,J_f,J_l[0]*J_j,J_l[1]*J_k,(J_l[2]-J_l[0])*J_j,(J_l[5]-J_l[3])*J_k):J_i.createPattern(J_a.bitmap.source,J_f);var J_m=0,J_n=0;J_g&&(J_b+=J_g.x%J_a.width,J_c+=J_g.y%J_a.height,J_m-=J_g.x%J_a.width,J_n-=J_g.y%J_a.height),this._fillImage(J_h,J_b,J_c,J_m,J_n,J_d,J_e)}}}},J_l._cache=[],J_l}(),J_c=function(){function J_v(){this._cacheBoundsType=!1}J_k(J_v,"laya.display.GraphicsBounds");var J_a=J_v.prototype;return J_a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},J_a.reset=function(){this._temp&&(this._temp.length=0)},J_a.getBounds=function(J_a){return void 0===J_a&&(J_a=!1),(!this._bounds||!this._temp||this._temp.length<1||J_a!=this._cacheBoundsType)&&(this._bounds=J_B._getWrapRec(this.getBoundPoints(J_a),this._bounds)),this._cacheBoundsType=J_a,this._bounds},J_a.getBoundPoints=function(J_a){return void 0===J_a&&(J_a=!1),(!this._temp||this._temp.length<1||J_a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(J_a)),this._cacheBoundsType=J_a,this._rstBoundPoints=J_$.copyArray(this._rstBoundPoints,this._temp)},J_a._getCmdPoints=function(J_a){void 0===J_a&&(J_a=!1);var J_b,J_c,J_d=J_J._context,J_e=this._graphics.cmds;if((J_b=this._temp||(this._temp=[])).length=0,J_e||null==this._graphics._one||(J_v._tempCmds.length=0,J_v._tempCmds.push(this._graphics._one),J_e=J_v._tempCmds),!J_e)return J_b;(J_c=J_v._tempMatrixArrays).length=0;var J_f=J_v._initMatrix;J_f.identity();for(var J_g,J_h,J_i=J_v._tempMatrix,J_j=NaN,J_k=NaN,J_l=NaN,J_m=NaN,J_n=NaN,J_o=NaN,J_p=0,J_q=J_e.length;J_p<J_q;J_p++)if((J_g=J_e[J_p]).callee)switch(J_g.callee){case J_d._save:case 7:J_c.push(J_f),J_f=J_f.clone();break;case J_d._restore:case 8:J_f=J_c.pop();break;case J_d._scale:case 5:J_i.identity(),J_i.translate(-J_g[2],-J_g[3]),J_i.scale(J_g[0],J_g[1]),J_i.translate(J_g[2],J_g[3]),this._switchMatrix(J_f,J_i);break;case J_d._rotate:case 3:J_i.identity(),J_i.translate(-J_g[1],-J_g[2]),J_i.rotate(J_g[0]),J_i.translate(J_g[1],J_g[2]),this._switchMatrix(J_f,J_i);break;case J_d._translate:case 6:J_i.identity(),J_i.translate(J_g[0],J_g[1]),this._switchMatrix(J_f,J_i);break;case J_d._transform:case 4:J_i.identity(),J_i.translate(-J_g[1],-J_g[2]),J_i.concat(J_g[0]),J_i.translate(J_g[1],J_g[2]),this._switchMatrix(J_f,J_i);break;case 16:case 24:J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[0],J_g[1],J_g[2],J_g[3]),J_f);break;case 17:J_f.copyTo(J_i),J_i.concat(J_g[4]),J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[0],J_g[1],J_g[2],J_g[3]),J_i);break;case J_d._drawTexture:J_h=J_g[0],J_a?J_g[3]&&J_g[4]?J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_g[3],J_g[4]),J_f):(J_h=J_g[0],J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_h.width,J_h.height),J_f)):(J_j=(J_g[3]||J_h.sourceWidth)/J_h.width,J_k=(J_g[4]||J_h.sourceHeight)/J_h.height,J_l=J_j*J_h.sourceWidth,J_m=J_k*J_h.sourceHeight,J_n=0<J_h.offsetX?J_h.offsetX:0,J_o=0<J_h.offsetY?J_h.offsetY:0,J_n*=J_j,J_o*=J_k,J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1]-J_n,J_g[2]-J_o,J_l,J_m),J_f));break;case J_d._fillTexture:J_g[3]&&J_g[4]?J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_g[3],J_g[4]),J_f):(J_h=J_g[0],J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_h.width,J_h.height),J_f));break;case J_d._drawTextureWithTransform:var J_r;J_r=J_g[5]?(J_f.copyTo(J_i),J_i.concat(J_g[5]),J_i):J_f,J_a?J_g[3]&&J_g[4]?J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_g[3],J_g[4]),J_r):(J_h=J_g[0],J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1],J_g[2],J_h.width,J_h.height),J_r)):(J_h=J_g[0],J_j=(J_g[3]||J_h.sourceWidth)/J_h.width,J_k=(J_g[4]||J_h.sourceHeight)/J_h.height,J_l=J_j*J_h.sourceWidth,J_m=J_k*J_h.sourceHeight,J_n=0<J_h.offsetX?J_h.offsetX:0,J_o=0<J_h.offsetY?J_h.offsetY:0,J_n*=J_j,J_o*=J_k,J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[1]-J_n,J_g[2]-J_o,J_l,J_m),J_r));break;case J_d._drawRect:case 13:J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[0],J_g[1],J_g[2],J_g[3]),J_f);break;case J_d._drawCircle:case J_d._fillCircle:case 14:J_v._addPointArrToRst(J_b,J_B._getBoundPointS(J_g[0]-J_g[2],J_g[1]-J_g[2],J_g[2]+J_g[2],J_g[2]+J_g[2]),J_f);break;case J_d._drawLine:case 20:J_v._tempPoints.length=0;var J_u;J_u=.5*J_g[5],J_g[0]==J_g[2]?J_v._tempPoints.push(J_g[0]+J_u,J_g[1],J_g[2]+J_u,J_g[3],J_g[0]-J_u,J_g[1],J_g[2]-J_u,J_g[3]):J_g[1]==J_g[3]?J_v._tempPoints.push(J_g[0],J_g[1]+J_u,J_g[2],J_g[3]+J_u,J_g[0],J_g[1]-J_u,J_g[2],J_g[3]-J_u):J_v._tempPoints.push(J_g[0],J_g[1],J_g[2],J_g[3]),J_v._addPointArrToRst(J_b,J_v._tempPoints,J_f);break;case J_d._drawCurves:case 22:J_v._addPointArrToRst(J_b,J_w.I.getBezierPoints(J_g[2]),J_f,J_g[0],J_g[1]);break;case J_d._drawPoly:case J_d._drawLines:case 18:J_v._addPointArrToRst(J_b,J_g[2],J_f,J_g[0],J_g[1]);break;case J_d._drawPath:case 19:J_v._addPointArrToRst(J_b,this._getPathPoints(J_g[2]),J_f,J_g[0],J_g[1]);break;case J_d._drawPie:case 15:J_v._addPointArrToRst(J_b,this._getPiePoints(J_g[0],J_g[1],J_g[2],J_g[3],J_g[4]),J_f)}return 200<J_b.length?J_b=J_$.copyArray(J_b,J_B._getWrapRec(J_b)._getBoundPoints()):8<J_b.length&&(J_b=J_x.scanPList(J_b)),J_b},J_a._switchMatrix=function(J_a,J_b){J_b.concat(J_a),J_b.copyTo(J_a)},J_a._getPiePoints=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_v._tempPoints;J_v._tempPoints.length=0,J_f.push(J_a,J_b);var J_g=(J_e-J_d)%(2*Math.PI)/10,J_h=NaN,J_i=J_d;for(J_h=0;J_h<=10;J_h++)J_f.push(J_a+J_c*Math.cos(J_i),J_b+J_c*Math.sin(J_i)),J_i+=J_g;return J_f},J_a._getPathPoints=function(J_a){var J_b,J_c,J_d=0,J_e=J_v._tempPoints;for(J_e.length=0,J_b=J_a.length,J_d=0;J_d<J_b;J_d++)1<(J_c=J_a[J_d]).length&&(J_e.push(J_c[1],J_c[2]),3<J_c.length&&J_e.push(J_c[3],J_c[4]));return J_e},J_v._addPointArrToRst=function(J_a,J_b,J_c,J_d,J_e){void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0);var J_f,J_g=0;for(J_f=J_b.length,J_g=0;J_g<J_f;J_g+=2)J_v._addPointToRst(J_a,J_b[J_g]+J_d,J_b[J_g+1]+J_e,J_c)},J_v._addPointToRst=function(J_a,J_b,J_c,J_d){var J_e=J_A.TEMP;J_e.setTo(J_b||0,J_c||0),J_d.transformPoint(J_e),J_a.push(J_e.x,J_e.y)},J_v._tempPoints=[],J_v._tempMatrixArrays=[],J_v._tempCmds=[],J_i(J_v,["_tempMatrix",function(){return this._tempMatrix=new J_G},"_initMatrix",function(){return this._initMatrix=new J_G}]),J_v}(),J_f=function(){function J_a(){}J_k(J_a,"laya.events.Event");var J_b=J_a.prototype;return J_b.setTo=function(J_a,J_b,J_c){return this.type=J_a,this.currentTarget=J_b,this.target=J_c,this},J_b.stopPropagation=function(){this._stoped=!0},J_o(0,J_b,"stageY",function(){return J_z.stage.mouseY}),J_o(0,J_b,"charCode",function(){return this.nativeEvent.charCode}),J_o(0,J_b,"touches",function(){var J_a=this.nativeEvent.touches;if(J_a)for(var J_b=J_z.stage,J_c=0,J_d=J_a.length;J_c<J_d;J_c++){var J_e=J_a[J_c],J_f=J_A.TEMP;J_f.setTo(J_e.clientX,J_e.clientY),J_b._canvasTransform.invertTransformPoint(J_f),J_b.transform.invertTransformPoint(J_f),J_e.stageX=J_f.x,J_e.stageY=J_f.y}return J_a}),J_o(0,J_b,"keyLocation",function(){return this.nativeEvent.keyLocation}),J_o(0,J_b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),J_o(0,J_b,"altKey",function(){return this.nativeEvent.altKey}),J_o(0,J_b,"shiftKey",function(){return this.nativeEvent.shiftKey}),J_o(0,J_b,"stageX",function(){return J_z.stage.mouseX}),J_a.EMPTY=new J_a,J_a.MOUSE_DOWN="mousedown",J_a.MOUSE_UP="mouseup",J_a.CLICK="click",J_a.RIGHT_MOUSE_DOWN="rightmousedown",J_a.RIGHT_MOUSE_UP="rightmouseup",J_a.RIGHT_CLICK="rightclick",J_a.MOUSE_MOVE="mousemove",J_a.MOUSE_OVER="mouseover",J_a.MOUSE_OUT="mouseout",J_a.MOUSE_WHEEL="mousewheel",J_a.ROLL_OVER="mouseover",J_a.ROLL_OUT="mouseout",J_a.DOUBLE_CLICK="doubleclick",J_a.CHANGE="change",J_a.CHANGED="changed",J_a.RESIZE="resize",J_a.ADDED="added",J_a.REMOVED="removed",J_a.DISPLAY="display",J_a.UNDISPLAY="undisplay",J_a.ERROR="error",J_a.COMPLETE="complete",J_a.LOADED="loaded",J_a.INITED="inited",J_a.PROGRESS="progress",J_a.INPUT="input",J_a.RENDER="render",J_a.OPEN="open",J_a.MESSAGE="message",J_a.CLOSE="close",J_a.KEY_DOWN="keydown",J_a.KEY_PRESS="keypress",J_a.KEY_UP="keyup",J_a.FRAME="enterframe",J_a.DRAG_START="dragstart",J_a.DRAG_MOVE="dragmove",J_a.DRAG_END="dragend",J_a.ENTER="enter",J_a.SELECT="select",J_a.BLUR="blur",J_a.FOCUS="focus",J_a.VISIBILITY_CHANGE="visibilitychange",J_a.FOCUS_CHANGE="focuschange",J_a.PLAYED="played",J_a.PAUSED="paused",J_a.STOPPED="stopped",J_a.START="start",J_a.END="end",J_a.ENABLE_CHANGED="enablechanged",J_a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",J_a.COMPONENT_ADDED="componentadded",J_a.COMPONENT_REMOVED="componentremoved",J_a.LAYER_CHANGED="layerchanged",J_a.HIERARCHY_LOADED="hierarchyloaded",J_a.RECOVERED="recovered",J_a.RELEASED="released",J_a.LINK="link",J_a.LABEL="label",J_a.FULL_SCREEN_CHANGE="fullscreenchange",J_a.DEVICE_LOST="devicelost",J_a.MESH_CHANGED="meshchanged",J_a.MATERIAL_CHANGED="materialchanged",J_a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",J_a.ANIMATION_CHANGED="animationchanged",J_a.TRIGGER_ENTER="triggerenter",J_a.TRIGGER_STAY="triggerstay",J_a.TRIGGER_EXIT="triggerexit",J_a.TRAIL_FILTER_CHANGE="trailfilterchange",J_a.DOMINO_FILTER_CHANGE="dominofilterchange",J_a}(),J_l=(function(){function J_a(){}J_k(J_a,"laya.events.Keyboard"),J_a.NUMBER_0=48,J_a.NUMBER_1=49,J_a.NUMBER_2=50,J_a.NUMBER_3=51,J_a.NUMBER_4=52,J_a.NUMBER_5=53,J_a.NUMBER_6=54,J_a.NUMBER_7=55,J_a.NUMBER_8=56,J_a.NUMBER_9=57,J_a.A=65,J_a.B=66,J_a.C=67,J_a.D=68,J_a.E=69,J_a.F=70,J_a.G=71,J_a.H=72,J_a.I=73,J_a.J=74,J_a.K=75,J_a.L=76,J_a.M=77,J_a.N=78,J_a.O=79,J_a.P=80,J_a.Q=81,J_a.R=82,J_a.S=83,J_a.T=84,J_a.U=85,J_a.V=86,J_a.W=87,J_a.X=88,J_a.Y=89,J_a.Z=90,J_a.F1=112,J_a.F2=113,J_a.F3=114,J_a.F4=115,J_a.F5=116,J_a.F6=117,J_a.F7=118,J_a.F8=119,J_a.F9=120,J_a.F10=121,J_a.F11=122,J_a.F12=123,J_a.F13=124,J_a.F14=125,J_a.F15=126,J_a.NUMPAD=21,J_a.NUMPAD_0=96,J_a.NUMPAD_1=97,J_a.NUMPAD_2=98,J_a.NUMPAD_3=99,J_a.NUMPAD_4=100,J_a.NUMPAD_5=101,J_a.NUMPAD_6=102,J_a.NUMPAD_7=103,J_a.NUMPAD_8=104,J_a.NUMPAD_9=105,J_a.NUMPAD_ADD=107,J_a.NUMPAD_DECIMAL=110,J_a.NUMPAD_DIVIDE=111,J_a.NUMPAD_ENTER=108,J_a.NUMPAD_MULTIPLY=106,J_a.NUMPAD_SUBTRACT=109,J_a.SEMICOLON=186,J_a.EQUAL=187,J_a.COMMA=188,J_a.MINUS=189,J_a.PERIOD=190,J_a.SLASH=191,J_a.BACKQUOTE=192,J_a.LEFTBRACKET=219,J_a.BACKSLASH=220,J_a.RIGHTBRACKET=221,J_a.QUOTE=222,J_a.ALTERNATE=18,J_a.BACKSPACE=8,J_a.CAPS_LOCK=20,J_a.COMMAND=15,J_a.CONTROL=17,J_a.DELETE=46,J_a.ENTER=13,J_a.ESCAPE=27,J_a.PAGE_UP=33,J_a.PAGE_DOWN=34,J_a.END=35,J_a.HOME=36,J_a.LEFT=37,J_a.UP=38,J_a.RIGHT=39,J_a.DOWN=40,J_a.SHIFT=16,J_a.SPACE=32,J_a.TAB=9,J_a.INSERT=45}(),function(){function J_e(){}return J_k(J_e,"laya.events.KeyBoardManager"),J_e.__init__=function(){J_e._addEvent("keydown"),J_e._addEvent("keypress"),J_e._addEvent("keyup")},J_e._addEvent=function(J_b){J_O.document.addEventListener(J_b,function(J_a){laya.events.KeyBoardManager._dispatch(J_a,J_b)},!0)},J_e._dispatch=function(J_a,J_b){if(J_e.enabled){J_e._event._stoped=!1,J_e._event.nativeEvent=J_a,J_e._event.keyCode=J_a.keyCode||J_a.which||J_a.charCode,"keydown"===J_b?J_e._pressKeys[J_e._event.keyCode]=!0:"keyup"===J_b&&(J_e._pressKeys[J_e._event.keyCode]=null);for(var J_c=J_z.stage.focus&&null!=J_z.stage.focus.event&&J_z.stage.focus.displayedInStage?J_z.stage.focus:J_z.stage,J_d=J_c;J_d;)J_d.event(J_b,J_e._event.setTo(J_b,J_d,J_c)),J_d=J_d.parent}},J_e.hasKeyDown=function(J_a){return J_e._pressKeys[J_a]},J_e._pressKeys={},J_e.enabled=!0,J_i(J_e,["_event",function(){return this._event=new J_f}]),J_e}()),J_p=(function(){function J_a(){}J_k(J_a,"laya.events.KeyLocation"),J_a.STANDARD=0,J_a.LEFT=1,J_a.RIGHT=2,J_a.NUM_PAD=3}(),function(){function J_j(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=J_O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new J_f,this._matrix=new J_G,this._point=new J_A,this._rect=new J_B,this._prePoint=new J_A,this._curTouchID=NaN}J_k(J_j,"laya.events.MouseManager");var J_a=J_j.prototype;return J_a.__init__=function(J_a,J_b){var J_c=this;this._stage=J_a;var J_d=this,J_e=this._eventList;J_b.oncontextmenu=function(J_a){if(J_j.enabled)return!1},J_b.addEventListener("mousedown",function(J_a){J_j.enabled&&(J_O.onIE||J_a.preventDefault(),J_e.push(J_a),J_d.mouseDownTime=J_O.now())}),J_b.addEventListener("mouseup",function(J_a){J_j.enabled&&(J_a.preventDefault(),J_e.push(J_a),J_d.mouseDownTime=-J_O.now())},!0),J_b.addEventListener("mousemove",function(J_a){if(J_j.enabled){J_a.preventDefault();var J_b=J_O.now();if(J_b-J_d._lastMoveTimer<10)return;J_d._lastMoveTimer=J_b,J_e.push(J_a)}},!0),J_b.addEventListener("mouseout",function(J_a){J_j.enabled&&J_e.push(J_a)}),J_b.addEventListener("mouseover",function(J_a){J_j.enabled&&J_e.push(J_a)}),J_b.addEventListener("touchstart",function(J_a){J_j.enabled&&(J_e.push(J_a),J_j._isFirstTouch||J_xa.isInputting||J_a.preventDefault(),J_d.mouseDownTime=J_O.now())}),J_b.addEventListener("touchend",function(J_a){J_j.enabled?(J_j._isFirstTouch||J_xa.isInputting||J_a.preventDefault(),J_j._isFirstTouch=!1,J_e.push(J_a),J_d.mouseDownTime=-J_O.now()):J_c._curTouchID=NaN},!0),J_b.addEventListener("touchmove",function(J_a){J_j.enabled&&(J_a.preventDefault(),J_e.push(J_a))},!0),J_b.addEventListener("touchcancel",function(J_a){J_j.enabled?(J_a.preventDefault(),J_e.push(J_a)):J_c._curTouchID=NaN},!0),J_b.addEventListener("mousewheel",function(J_a){J_j.enabled&&J_e.push(J_a)}),J_b.addEventListener("DOMMouseScroll",function(J_a){J_j.enabled&&J_e.push(J_a)})},J_a.initEvent=function(J_a,J_b){var J_c;this._event._stoped=!1,this._event.nativeEvent=J_b||J_a,this._target=null,this._point.setTo(J_a.pageX||J_a.clientX,J_a.pageY||J_a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=J_a.identifier||0,this._tTouchID=this._event.touchId,(J_c=J_q.I._event)._stoped=!1,J_c.nativeEvent=this._event.nativeEvent,J_c.touchId=this._event.touchId},J_a.checkMouseWheel=function(J_a){this._event.delta=J_a.wheelDelta?.025*J_a.wheelDelta:-J_a.detail;for(var J_b=J_q.I.getLastOvers(),J_c=0,J_d=J_b.length;J_c<J_d;J_c++){var J_e=J_b[J_c];J_e.event("mousewheel",this._event.setTo("mousewheel",J_e,this._target))}},J_a.onMouseMove=function(J_a){J_q.I.onMouseMove(J_a,this._tTouchID)},J_a.onMouseDown=function(J_a){if(J_xa.isInputting&&J_z.stage.focus&&J_z.stage.focus.focus&&!J_z.stage.focus.contains(this._target)){var J_b=J_z.stage.focus._tf||J_z.stage.focus,J_c=J_a._tf||J_a;J_c instanceof laya.display.Input&&J_c.multiline==J_b.multiline?J_b._focusOut():J_b.focus=!1}J_q.I.onMouseDown(J_a,this._tTouchID,this._isLeftMouse)},J_a.onMouseUp=function(J_a){J_q.I.onMouseUp(J_a,this._tTouchID,this._isLeftMouse)},J_a.check=function(J_a,J_b,J_c,J_d){this._point.setTo(J_b,J_c),J_a.fromParentPoint(this._point),J_b=this._point.x,J_c=this._point.y;var J_e=J_a.scrollRect;if(J_e&&(this._rect.setTo(J_e.x,J_e.y,J_e.width,J_e.height),!this._rect.contains(J_b,J_c)))return!1;if(!this.disableMouseEvent){if(J_a.hitTestPrior&&!J_a.mouseThrough&&!this.hitTest(J_a,J_b,J_c))return!1;for(var J_f=J_a._childs.length-1;-1<J_f;J_f--){var J_g=J_a._childs[J_f];if(!J_g.destroyed&&J_g.mouseEnabled&&J_g.visible&&this.check(J_g,J_b,J_c,J_d))return!0}}var J_h=!(!J_a.hitTestPrior||J_a.mouseThrough||this.disableMouseEvent)||this.hitTest(J_a,J_b,J_c);return J_h?(this._target=J_a,J_d.call(this,J_a)):J_d===this.onMouseUp&&J_a===this._stage&&(this._target=this._stage,J_d.call(this,this._target)),J_h},J_a.hitTest=function(J_a,J_b,J_c){var J_d=!1;if(J_a.scrollRect&&(J_b-=J_a.scrollRect.x,J_c-=J_a.scrollRect.y),J_a.hitArea instanceof laya.utils.HitArea)return J_a.hitArea.isHit(J_b,J_c);if(0<J_a.width&&0<J_a.height||J_a.mouseThrough||J_a.hitArea)if(J_a.mouseThrough)J_d=J_a.getGraphicBounds().contains(J_b,J_c);else{var J_e=this._rect;J_a.hitArea?J_e=J_a.hitArea:J_e.setTo(0,0,J_a.width,J_a.height),J_d=J_e.contains(J_b,J_c)}return J_d},J_a.runEvent=function(){var J_a=this._eventList.length;if(J_a){this.mouseEventTime=J_O.now();var J_b,J_c=0,J_d=0,J_e=0;try{for(;J_c<J_a;){var J_f=this._eventList[J_c];switch("mousemove"!==J_f.type&&(this._prePoint.x=this._prePoint.y=-1e6),J_f.type){case"mousedown":this._touchIDs[0]=this._id++,J_j._isTouchRespond?J_j._isTouchRespond=!1:(this._isLeftMouse=0===J_f.button,this.initEvent(J_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===J_f.button,this.initEvent(J_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-J_f.clientX)+Math.abs(this._prePoint.y-J_f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=J_f.clientX,this._prePoint.y=J_f.clientY,this.initEvent(J_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":J_j._isTouchRespond=!0,this._isLeftMouse=!0;var J_g=J_f.changedTouches;for(J_d=0,J_e=J_g.length;J_d<J_e;J_d++)J_b=J_g[J_d],(J_j.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=J_b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[J_b.identifier]=this._id++,this.initEvent(J_b,J_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":J_j._isTouchRespond=!0,this._isLeftMouse=!0;var J_h=J_f.changedTouches;for(J_d=0,J_e=J_h.length;J_d<J_e;J_d++)if(J_b=J_h[J_d],J_j.multiTouchEnabled||J_b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(J_b,J_f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var J_i=J_f.changedTouches;for(J_d=0,J_e=J_i.length;J_d<J_e;J_d++)J_b=J_i[J_d],(J_j.multiTouchEnabled||J_b.identifier==this._curTouchID)&&(this.initEvent(J_b,J_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(J_f);break;case"mouseout":J_q.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}J_c++}}catch(J_a){throw this._eventList.length=0,J_a}this._eventList.length=0}},J_j.enabled=!0,J_j.multiTouchEnabled=!0,J_j._isTouchRespond=!1,J_j._isFirstTouch=!0,J_i(J_j,["instance",function(){return this.instance=new J_j}]),J_j}()),J_q=function(){function J_o(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new J_f}J_k(J_o,"laya.events.TouchManager");var J_a=J_o.prototype;return J_a._clearTempArrs=function(){J_o._oldArr.length=0,J_o._newArr.length=0,J_o._tEleArr.length=0},J_a.getTouchFromArr=function(J_a,J_b){var J_c,J_d,J_e=0;for(J_c=J_b.length,J_e=0;J_e<J_c;J_e++)if((J_d=J_b[J_e]).id==J_a)return J_d;return null},J_a.removeTouchFromArr=function(J_a,J_b){var J_c=0;for(J_c=J_b.length-1;0<=J_c;J_c--)J_b[J_c].id==J_a&&J_b.splice(J_c,1)},J_a.createTouchO=function(J_a,J_b){var J_c;return(J_c=J_W.getItem("TouchData")||{}).id=J_b,J_c.tar=J_a,J_c},J_a.onMouseDown=function(J_a,J_b,J_c){var J_d,J_e,J_f,J_g;(void 0===J_c&&(J_c=!1),this.enable)&&(J_d=this.getTouchFromArr(J_b,this.preOvers),J_f=this.getEles(J_a,null,J_o._tEleArr),J_d?J_d.tar=J_a:(J_e=this.createTouchO(J_a,J_b),this.preOvers.push(J_e)),J_O.onMobile&&this.sendEvents(J_f,"mouseover",J_b),J_g=J_c?this.preDowns:this.preRightDowns,(J_d=this.getTouchFromArr(J_b,J_g))?J_d.tar=J_a:(J_e=this.createTouchO(J_a,J_b),J_g.push(J_e)),this.sendEvents(J_f,J_c?"mousedown":"rightmousedown",J_b),this._clearTempArrs())},J_a.sendEvents=function(J_a,J_b,J_c){void 0===J_c&&(J_c=0);var J_d,J_e,J_f,J_g=0;for(J_d=J_a.length,this._event._stoped=!1,J_e=J_a[0],J_g=0;J_g<J_d;J_g++){if((J_f=J_a[J_g]).destroyed)return;if(J_f.event(J_b,this._event.setTo(J_b,J_f,J_e)),this._event._stoped)break}},J_a.getEles=function(J_a,J_b,J_c){for(J_c?J_c.length=0:J_c=[];J_a&&J_a!=J_b;)J_c.push(J_a),J_a=J_a.parent;return J_c},J_a.checkMouseOutAndOverOfMove=function(J_a,J_b,J_c){if(void 0===J_c&&(J_c=0),J_b!=J_a){var J_d,J_e,J_f=0,J_g=0;if(J_b.contains(J_a))J_e=this.getEles(J_a,J_b,J_o._tEleArr),this.sendEvents(J_e,"mouseover",J_c);else if(J_a.contains(J_b))J_e=this.getEles(J_b,J_a,J_o._tEleArr),this.sendEvents(J_e,"mouseout",J_c);else{var J_h,J_i;(J_e=J_o._tEleArr).length=0,J_h=this.getEles(J_b,null,J_o._oldArr),J_i=this.getEles(J_a,null,J_o._newArr),J_g=J_h.length;var J_j=0;for(J_f=0;J_f<J_g;J_f++){if(J_d=J_h[J_f],0<=(J_j=J_i.indexOf(J_d))){J_i.splice(J_j,J_i.length-J_j);break}J_e.push(J_d)}0<J_e.length&&this.sendEvents(J_e,"mouseout",J_c),0<J_i.length&&this.sendEvents(J_i,"mouseover",J_c)}}},J_a.onMouseMove=function(J_a,J_b){var J_c,J_d;this.enable&&((J_c=this.getTouchFromArr(J_b,this.preOvers))?(this.checkMouseOutAndOverOfMove(J_a,J_c.tar),J_c.tar=J_a,J_d=this.getEles(J_a,null,J_o._tEleArr)):(J_d=this.getEles(J_a,null,J_o._tEleArr),this.sendEvents(J_d,"mouseover",J_b),this.preOvers.push(this.createTouchO(J_a,J_b))),this.sendEvents(J_d,"mousemove",J_b),this._clearTempArrs())},J_a.getLastOvers=function(){return(J_o._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,J_o._tEleArr):(J_o._tEleArr.push(J_z.stage),J_o._tEleArr)},J_a.stageMouseOut=function(){var J_a;J_a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(J_a,"mouseout",0)},J_a.onMouseUp=function(J_a,J_b,J_c){if(void 0===J_c&&(J_c=!1),this.enable){var J_d,J_e,J_f,J_g,J_h,J_i,J_j=0,J_k=0,J_l=J_O.onMobile;if(J_e=this.getEles(J_a,null,J_o._tEleArr),this.sendEvents(J_e,J_c?"mouseup":"rightmouseup",J_b),J_i=J_c?this.preDowns:this.preRightDowns,J_d=this.getTouchFromArr(J_b,J_i)){var J_m,J_n=J_O.now();if(J_m=J_n-this._lastClickTime<300,this._lastClickTime=J_n,J_a==J_d.tar)J_h=J_e;else for(J_f=this.getEles(J_d.tar,null,J_o._oldArr),(J_h=J_o._newArr).length=0,J_k=J_f.length,J_j=0;J_j<J_k;J_j++)J_g=J_f[J_j],0<=J_e.indexOf(J_g)&&J_h.push(J_g);0<J_h.length&&this.sendEvents(J_h,J_c?"click":"rightclick",J_b),J_c&&J_m&&this.sendEvents(J_h,"doubleclick",J_b),this.removeTouchFromArr(J_b,J_i),J_d.tar=null,J_W.recover("TouchData",J_d)}else;(J_d=this.getTouchFromArr(J_b,this.preOvers))&&J_l&&((J_h=this.getEles(J_d.tar,null,J_h))&&0<J_h.length&&this.sendEvents(J_h,"mouseout",J_b),this.removeTouchFromArr(J_b,this.preOvers),J_d.tar=null,J_W.recover("TouchData",J_d)),this._clearTempArrs()}},J_o._oldArr=[],J_o._newArr=[],J_o._tEleArr=[],J_i(J_o,["I",function(){return this.I=new J_o}]),J_o}(),J_r=function(){function J_a(){this._action=null}J_k(J_a,"laya.filters.Filter");var J_b=J_a.prototype;return J_z.imps(J_b,{"laya.filters.IFilter":!0}),J_b.callNative=function(J_a){},J_o(0,J_b,"type",function(){return-1}),J_o(0,J_b,"action",function(){return this._action}),J_a.BLUR=16,J_a.COLOR=32,J_a.GLOW=8,J_a._filterStart=null,J_a._filterEnd=null,J_a._EndTarget=null,J_a._recycleScope=null,J_a._filter=null,J_a._useSrc=null,J_a._endSrc=null,J_a._useOut=null,J_a._endOut=null,J_a}(),J_v=function(){function J_a(){this.data=null}J_k(J_a,"laya.filters.ColorFilterAction");var J_b=J_a.prototype;return J_z.imps(J_b,{"laya.filters.IFilterAction":!0}),J_b.apply=function(J_a){var J_b=J_a.ctx.ctx,J_c=J_a.ctx.ctx.canvas;if(0==J_c.width||0==J_c.height)return J_c;for(var J_d,J_e=J_b.getImageData(0,0,J_c.width,J_c.height),J_f=J_e.data,J_g=0,J_h=J_f.length;J_g<J_h;J_g+=4)J_d=this.getColor(J_f[J_g],J_f[J_g+1],J_f[J_g+2],J_f[J_g+3]),0!=J_f[J_g+3]&&(J_f[J_g]=J_d[0],J_f[J_g+1]=J_d[1],J_f[J_g+2]=J_d[2],J_f[J_g+3]=J_d[3]);return J_b.putImageData(J_e,0,0),J_a},J_b.getColor=function(J_a,J_b,J_c,J_d){var J_e=[];if(this.data._mat&&this.data._alpha){var J_f=this.data._mat,J_g=this.data._alpha;J_e[0]=J_f[0]*J_a+J_f[1]*J_b+J_f[2]*J_c+J_f[3]*J_d+J_g[0],J_e[1]=J_f[4]*J_a+J_f[5]*J_b+J_f[6]*J_c+J_f[7]*J_d+J_g[1],J_e[2]=J_f[8]*J_a+J_f[9]*J_b+J_f[10]*J_c+J_f[11]*J_d+J_g[2],J_e[3]=J_f[12]*J_a+J_f[13]*J_b+J_f[14]*J_c+J_f[15]*J_d+J_g[3]}return J_e},J_a}(),J_w=(function(){function J_a(){}J_k(J_a,"laya.maths.Arith"),J_a.formatR=function(J_a){return J_a>Math.PI&&(J_a-=2*Math.PI),J_a<-Math.PI&&(J_a+=2*Math.PI),J_a},J_a.isPOT=function(J_a,J_b){return 0<J_a&&0==(J_a&J_a-1)&&0<J_b&&0==(J_b&J_b-1)},J_a.setMatToArray=function(J_a,J_b){J_a.a,J_a.b,J_a.c,J_a.d,J_a.tx,J_a.ty,J_b[0]=J_a.a,J_b[1]=J_a.b,J_b[4]=J_a.c,J_b[5]=J_a.d,J_b[12]=J_a.tx,J_b[13]=J_a.ty}}(),function(){function J_a(){this._controlPoints=[new J_A,new J_A,new J_A],this._calFun=this.getPoint2}J_k(J_a,"laya.maths.Bezier");var J_b=J_a.prototype;return J_b._switchPoint=function(J_a,J_b){var J_c=this._controlPoints.shift();J_c.setTo(J_a,J_b),this._controlPoints.push(J_c)},J_b.getPoint2=function(J_a,J_b){var J_c=this._controlPoints[0],J_d=this._controlPoints[1],J_e=this._controlPoints[2],J_f=Math.pow(1-J_a,2)*J_c.x+2*J_a*(1-J_a)*J_d.x+Math.pow(J_a,2)*J_e.x,J_g=Math.pow(1-J_a,2)*J_c.y+2*J_a*(1-J_a)*J_d.y+Math.pow(J_a,2)*J_e.y;J_b.push(J_f,J_g)},J_b.getPoint3=function(J_a,J_b){var J_c=this._controlPoints[0],J_d=this._controlPoints[1],J_e=this._controlPoints[2],J_f=this._controlPoints[3],J_g=Math.pow(1-J_a,3)*J_c.x+3*J_d.x*J_a*(1-J_a)*(1-J_a)+3*J_e.x*J_a*J_a*(1-J_a)+J_f.x*Math.pow(J_a,3),J_h=Math.pow(1-J_a,3)*J_c.y+3*J_d.y*J_a*(1-J_a)*(1-J_a)+3*J_e.y*J_a*J_a*(1-J_a)+J_f.y*Math.pow(J_a,3);J_b.push(J_g,J_h)},J_b.insertPoints=function(J_a,J_b){var J_c,J_d=NaN;for(J_c=1/(J_a=0<J_a?J_a:5),J_d=0;J_d<=1;J_d+=J_c)this._calFun(J_d,J_b)},J_b.getBezierPoints=function(J_a,J_b,J_c){void 0===J_b&&(J_b=5),void 0===J_c&&(J_c=2);var J_d,J_e,J_f=0;if((J_d=J_a.length)<2*(J_c+1))return[];switch(J_e=[],J_c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=J_c;)this._controlPoints.push(new J_A);for(J_f=0;J_f<2*J_c;J_f+=2)this._switchPoint(J_a[J_f],J_a[J_f+1]);for(J_f=2*J_c;J_f<J_d;J_f+=2)this._switchPoint(J_a[J_f],J_a[J_f+1]),J_f/2%J_c==0&&this.insertPoints(J_b,J_e);return J_e},J_i(J_a,["I",function(){return this.I=new J_a}]),J_a}()),J_x=function(){function J_j(){}return J_k(J_j,"laya.maths.GrahamScan"),J_j.multiply=function(J_a,J_b,J_c){return(J_a.x-J_c.x)*(J_b.y-J_c.y)-(J_b.x-J_c.x)*(J_a.y-J_c.y)},J_j.dis=function(J_a,J_b){return(J_a.x-J_b.x)*(J_a.x-J_b.x)+(J_a.y-J_b.y)*(J_a.y-J_b.y)},J_j._getPoints=function(J_a,J_b,J_c){for(void 0===J_b&&(J_b=!1),J_j._mPointList||(J_j._mPointList=[]);J_j._mPointList.length<J_a;)J_j._mPointList.push(new J_A);return J_c||(J_c=[]),J_c.length=0,J_b?J_j.getFrom(J_c,J_j._mPointList,J_a):J_j.getFromR(J_c,J_j._mPointList,J_a),J_c},J_j.getFrom=function(J_a,J_b,J_c){var J_d=0;for(J_d=0;J_d<J_c;J_d++)J_a.push(J_b[J_d]);return J_a},J_j.getFromR=function(J_a,J_b,J_c){var J_d=0;for(J_d=0;J_d<J_c;J_d++)J_a.push(J_b.pop());return J_a},J_j.pListToPointList=function(J_a,J_b){void 0===J_b&&(J_b=!1);var J_c=0,J_d=J_a.length/2,J_e=J_j._getPoints(J_d,J_b,J_j._tempPointList);for(J_c=0;J_c<J_d;J_c++)J_e[J_c].setTo(J_a[J_c+J_c],J_a[J_c+J_c+1]);return J_e},J_j.pointListToPlist=function(J_a){var J_b,J_c=0,J_d=J_a.length,J_e=J_j._temPList;for(J_c=J_e.length=0;J_c<J_d;J_c++)J_b=J_a[J_c],J_e.push(J_b.x,J_b.y);return J_e},J_j.scanPList=function(J_a){return J_$.copyArray(J_a,J_j.pointListToPlist(J_j.scan(J_j.pListToPointList(J_a,!0))))},J_j.scan=function(J_a){var J_b,J_c,J_d,J_e=0,J_f=0,J_g=0,J_h=J_a.length,J_i={};for((J_c=J_j._temArr).length=0,J_e=(J_h=J_a.length)-1;0<=J_e;J_e--)J_d=(J_b=J_a[J_e]).x+"_"+J_b.y,J_i.hasOwnProperty(J_d)||(J_i[J_d]=!0,J_c.push(J_b));for(J_h=J_c.length,J_$.copyArray(J_a,J_c),J_e=1;J_e<J_h;J_e++)(J_a[J_e].y<J_a[J_g].y||J_a[J_e].y==J_a[J_g].y&&J_a[J_e].x<J_a[J_g].x)&&(J_g=J_e);for(J_b=J_a[0],J_a[0]=J_a[J_g],J_a[J_g]=J_b,J_e=1;J_e<J_h-1;J_e++){for(J_f=(J_g=J_e)+1;J_f<J_h;J_f++)(0<J_j.multiply(J_a[J_f],J_a[J_g],J_a[0])||0==J_j.multiply(J_a[J_f],J_a[J_g],J_a[0])&&J_j.dis(J_a[0],J_a[J_f])<J_j.dis(J_a[0],J_a[J_g]))&&(J_g=J_f);J_b=J_a[J_e],J_a[J_e]=J_a[J_g],J_a[J_g]=J_b}if((J_c=J_j._temArr).length=0,J_a.length<3)return J_$.copyArray(J_c,J_a);for(J_c.push(J_a[0],J_a[1],J_a[2]),J_e=3;J_e<J_h;J_e++){for(;2<=J_c.length&&0<=J_j.multiply(J_a[J_e],J_c[J_c.length-1],J_c[J_c.length-2]);)J_c.pop();J_a[J_e]&&J_c.push(J_a[J_e])}return J_c},J_j._mPointList=null,J_j._tempPointList=[],J_j._temPList=[],J_j._temArr=[],J_j}(),J_y=function(){function J_e(){}return J_k(J_e,"laya.maths.MathUtil"),J_e.subtractVector3=function(J_a,J_b,J_c){J_c[0]=J_a[0]-J_b[0],J_c[1]=J_a[1]-J_b[1],J_c[2]=J_a[2]-J_b[2]},J_e.lerp=function(J_a,J_b,J_c){return J_a*(1-J_c)+J_b*J_c},J_e.scaleVector3=function(J_a,J_b,J_c){J_c[0]=J_a[0]*J_b,J_c[1]=J_a[1]*J_b,J_c[2]=J_a[2]*J_b},J_e.lerpVector3=function(J_a,J_b,J_c,J_d){var J_e=J_a[0],J_f=J_a[1],J_g=J_a[2];J_d[0]=J_e+J_c*(J_b[0]-J_e),J_d[1]=J_f+J_c*(J_b[1]-J_f),J_d[2]=J_g+J_c*(J_b[2]-J_g)},J_e.lerpVector4=function(J_a,J_b,J_c,J_d){var J_e=J_a[0],J_f=J_a[1],J_g=J_a[2],J_h=J_a[3];J_d[0]=J_e+J_c*(J_b[0]-J_e),J_d[1]=J_f+J_c*(J_b[1]-J_f),J_d[2]=J_g+J_c*(J_b[2]-J_g),J_d[3]=J_h+J_c*(J_b[3]-J_h)},J_e.slerpQuaternionArray=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h,J_i,J_j,J_k,J_l,J_m=J_a[J_b+0],J_n=J_a[J_b+1],J_o=J_a[J_b+2],J_p=J_a[J_b+3],J_q=J_c[J_d+0],J_r=J_c[J_d+1],J_u=J_c[J_d+2],J_v=J_c[J_d+3];return(J_i=J_m*J_q+J_n*J_r+J_o*J_u+J_p*J_v)<0&&(J_i=-J_i,J_q=-J_q,J_r=-J_r,J_u=-J_u,J_v=-J_v),J_l=1e-6<1-J_i?(J_h=Math.acos(J_i),J_j=Math.sin(J_h),J_k=Math.sin((1-J_e)*J_h)/J_j,Math.sin(J_e*J_h)/J_j):(J_k=1-J_e,J_e),J_f[J_g+0]=J_k*J_m+J_l*J_q,J_f[J_g+1]=J_k*J_n+J_l*J_r,J_f[J_g+2]=J_k*J_o+J_l*J_u,J_f[J_g+3]=J_k*J_p+J_l*J_v,J_f},J_e.getRotation=function(J_a,J_b,J_c,J_d){return Math.atan2(J_d-J_b,J_c-J_a)/Math.PI*180},J_e.sortBigFirst=function(J_a,J_b){return J_a==J_b?0:J_a<J_b?1:-1},J_e.sortSmallFirst=function(J_a,J_b){return J_a==J_b?0:J_a<J_b?-1:1},J_e.sortNumBigFirst=function(J_a,J_b){return parseFloat(J_b)-parseFloat(J_a)},J_e.sortNumSmallFirst=function(J_a,J_b){return parseFloat(J_a)-parseFloat(J_b)},J_e.sortByKey=function(J_c,J_a,J_b){var J_d;return void 0===J_a&&(J_a=!1),void 0===J_b&&(J_b=!0),J_d=J_a?J_b?J_e.sortNumBigFirst:J_e.sortBigFirst:J_b?J_e.sortNumSmallFirst:J_e.sortSmallFirst,function(J_a,J_b){return J_d(J_a[J_c],J_b[J_c])}},J_e}(),J_G=function(){function J_c(J_a,J_b,J_c,J_d,J_e,J_f){this.inPool=!1,this.bTransform=!1,void 0===J_a&&(J_a=1),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=1),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=0),this.a=J_a,this.b=J_b,this.c=J_c,this.d=J_d,this.tx=J_e,this.ty=J_f,this._checkTransform()}J_k(J_c,"laya.maths.Matrix");var J_a=J_c.prototype;return J_a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},J_a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},J_a.setTranslate=function(J_a,J_b){return this.tx=J_a,this.ty=J_b,this},J_a.translate=function(J_a,J_b){return this.tx+=J_a,this.ty+=J_b,this},J_a.scale=function(J_a,J_b){this.a*=J_a,this.d*=J_b,this.c*=J_a,this.b*=J_b,this.tx*=J_a,this.ty*=J_b,this.bTransform=!0},J_a.rotate=function(J_a){var J_b=Math.cos(J_a),J_c=Math.sin(J_a),J_d=this.a,J_e=this.c,J_f=this.tx;this.a=J_d*J_b-this.b*J_c,this.b=J_d*J_c+this.b*J_b,this.c=J_e*J_b-this.d*J_c,this.d=J_e*J_c+this.d*J_b,this.tx=J_f*J_b-this.ty*J_c,this.ty=J_f*J_c+this.ty*J_b,this.bTransform=!0},J_a.skew=function(J_a,J_b){var J_c=Math.tan(J_a),J_d=Math.tan(J_b),J_e=this.a,J_f=this.b;return this.a+=J_d*this.c,this.b+=J_d*this.d,this.c+=J_c*J_e,this.d+=J_c*J_f,this},J_a.invertTransformPoint=function(J_a){var J_b=this.a,J_c=this.b,J_d=this.c,J_e=this.d,J_f=this.tx,J_g=J_b*J_e-J_c*J_d,J_h=J_e/J_g,J_i=-J_c/J_g,J_j=-J_d/J_g,J_k=J_b/J_g,J_l=(J_d*this.ty-J_e*J_f)/J_g,J_m=-(J_b*this.ty-J_c*J_f)/J_g;return J_a.setTo(J_h*J_a.x+J_j*J_a.y+J_l,J_i*J_a.x+J_k*J_a.y+J_m)},J_a.transformPoint=function(J_a){return J_a.setTo(this.a*J_a.x+this.c*J_a.y+this.tx,this.b*J_a.x+this.d*J_a.y+this.ty)},J_a.transformPointN=function(J_a){return J_a.setTo(this.a*J_a.x+this.c*J_a.y,this.b*J_a.x+this.d*J_a.y)},J_a.transformPointArray=function(J_a,J_b){for(var J_c=J_a.length,J_d=0;J_d<J_c;J_d+=2){var J_e=J_a[J_d],J_f=J_a[J_d+1];J_b[J_d]=this.a*J_e+this.c*J_f+this.tx,J_b[J_d+1]=this.b*J_e+this.d*J_f+this.ty}return J_b},J_a.transformPointArrayScale=function(J_a,J_b){for(var J_c=J_a.length,J_d=0;J_d<J_c;J_d+=2){var J_e=J_a[J_d],J_f=J_a[J_d+1];J_b[J_d]=this.a*J_e+this.c*J_f,J_b[J_d+1]=this.b*J_e+this.d*J_f}return J_b},J_a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},J_a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},J_a.invert=function(){var J_a=this.a,J_b=this.b,J_c=this.c,J_d=this.d,J_e=this.tx,J_f=J_a*J_d-J_b*J_c;return this.a=J_d/J_f,this.b=-J_b/J_f,this.c=-J_c/J_f,this.d=J_a/J_f,this.tx=(J_c*this.ty-J_d*J_e)/J_f,this.ty=-(J_a*this.ty-J_b*J_e)/J_f,this},J_a.setTo=function(J_a,J_b,J_c,J_d,J_e,J_f){return this.a=J_a,this.b=J_b,this.c=J_c,this.d=J_d,this.tx=J_e,this.ty=J_f,this},J_a.concat=function(J_a){var J_b=this.a,J_c=this.c,J_d=this.tx;return this.a=J_b*J_a.a+this.b*J_a.c,this.b=J_b*J_a.b+this.b*J_a.d,this.c=J_c*J_a.a+this.d*J_a.c,this.d=J_c*J_a.b+this.d*J_a.d,this.tx=J_d*J_a.a+this.ty*J_a.c+J_a.tx,this.ty=J_d*J_a.b+this.ty*J_a.d+J_a.ty,this},J_a.scaleEx=function(J_a,J_b){var J_c=this.a,J_d=this.b,J_e=this.c,J_f=this.d;0!==J_d||0!==J_e?(this.a=J_a*J_c,this.b=J_a*J_d,this.c=J_b*J_e):(this.a=J_a*J_c,this.b=0*J_f,this.c=0*J_c),this.d=J_b*J_f,this.bTransform=!0},J_a.rotateEx=function(J_a){var J_b=Math.cos(J_a),J_c=Math.sin(J_a),J_d=this.a,J_e=this.b,J_f=this.c,J_g=this.d;0!==J_e||0!==J_f?(this.a=J_b*J_d+J_c*J_f,this.b=J_b*J_e+J_c*J_g,this.c=-J_c*J_d+J_b*J_f,this.d=-J_c*J_e+J_b*J_g):(this.a=J_b*J_d,this.b=J_c*J_g,this.c=-J_c*J_d,this.d=J_b*J_g),this.bTransform=!0},J_a.clone=function(){var J_a=J_c.create();return J_a.a=this.a,J_a.b=this.b,J_a.c=this.c,J_a.d=this.d,J_a.tx=this.tx,J_a.ty=this.ty,J_a.bTransform=this.bTransform,J_a},J_a.copyTo=function(J_a){return J_a.a=this.a,J_a.b=this.b,J_a.c=this.c,J_a.d=this.d,J_a.tx=this.tx,J_a.ty=this.ty,J_a.bTransform=this.bTransform,J_a},J_a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},J_a.destroy=function(){if(!this.inPool){var J_a=J_c._cache;this.inPool=!0,J_a._length||(J_a._length=0),(J_a[J_a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},J_c.mul=function(J_a,J_b,J_c){var J_d=J_a.a,J_e=J_a.b,J_f=J_a.c,J_g=J_a.d,J_h=J_a.tx,J_i=J_a.ty,J_j=J_b.a,J_k=J_b.b,J_l=J_b.c,J_m=J_b.d,J_n=J_b.tx,J_o=J_b.ty;return 0!==J_k||0!==J_l?(J_c.a=J_d*J_j+J_e*J_l,J_c.b=J_d*J_k+J_e*J_m,J_c.c=J_f*J_j+J_g*J_l,J_c.d=J_f*J_k+J_g*J_m,J_c.tx=J_j*J_h+J_l*J_i+J_n,J_c.ty=J_k*J_h+J_m*J_i+J_o):(J_c.a=J_d*J_j,J_c.b=J_e*J_m,J_c.c=J_f*J_j,J_c.d=J_g*J_m,J_c.tx=J_j*J_h+J_n,J_c.ty=J_m*J_i+J_o),J_c},J_c.mul16=function(J_a,J_b,J_c){var J_d=J_a.a,J_e=J_a.b,J_f=J_a.c,J_g=J_a.d,J_h=J_a.tx,J_i=J_a.ty,J_j=J_b.a,J_k=J_b.b,J_l=J_b.c,J_m=J_b.d,J_n=J_b.tx,J_o=J_b.ty;return 0!==J_k||0!==J_l?(J_c[0]=J_d*J_j+J_e*J_l,J_c[1]=J_d*J_k+J_e*J_m,J_c[4]=J_f*J_j+J_g*J_l,J_c[5]=J_f*J_k+J_g*J_m,J_c[12]=J_j*J_h+J_l*J_i+J_n,J_c[13]=J_k*J_h+J_m*J_i+J_o):(J_c[0]=J_d*J_j,J_c[1]=J_e*J_m,J_c[4]=J_f*J_j,J_c[5]=J_g*J_m,J_c[12]=J_j*J_h+J_n,J_c[13]=J_m*J_i+J_o),J_c},J_c.mulPre=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=J_a.a,J_j=J_a.b,J_k=J_a.c,J_l=J_a.d,J_m=J_a.tx,J_n=J_a.ty;return 0!==J_c||0!==J_d?(J_h.a=J_i*J_b+J_j*J_d,J_h.b=J_i*J_c+J_j*J_e,J_h.c=J_k*J_b+J_l*J_d,J_h.d=J_k*J_c+J_l*J_e,J_h.tx=J_b*J_m+J_d*J_n+J_f,J_h.ty=J_c*J_m+J_e*J_n+J_g):(J_h.a=J_i*J_b,J_h.b=J_j*J_e,J_h.c=J_k*J_b,J_h.d=J_l*J_e,J_h.tx=J_b*J_m+J_f,J_h.ty=J_e*J_n+J_g),J_h},J_c.mulPos=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=J_a.a,J_j=J_a.b,J_k=J_a.c,J_l=J_a.d,J_m=J_a.tx,J_n=J_a.ty;return 0!==J_j||0!==J_k?(J_h.a=J_b*J_i+J_c*J_k,J_h.b=J_b*J_j+J_c*J_l,J_h.c=J_d*J_i+J_e*J_k,J_h.d=J_d*J_j+J_e*J_l,J_h.tx=J_i*J_f+J_k*J_g+J_m,J_h.ty=J_j*J_f+J_l*J_g+J_n):(J_h.a=J_b*J_i,J_h.b=J_c*J_l,J_h.c=J_d*J_i,J_h.d=J_e*J_l,J_h.tx=J_i*J_f+J_m,J_h.ty=J_l*J_g+J_n),J_h},J_c.preMul=function(J_a,J_b,J_c){var J_d=J_a.a,J_e=J_a.b,J_f=J_a.c,J_g=J_a.d,J_h=J_b.a,J_i=J_b.b,J_j=J_b.c,J_k=J_b.d,J_l=J_b.tx,J_m=J_b.ty;return J_c.a=J_h*J_d,J_c.b=J_c.c=0,J_c.d=J_k*J_g,J_c.tx=J_l*J_d+J_a.tx,J_c.ty=J_m*J_g+J_a.ty,0===J_i&&0===J_j&&0===J_e&&0===J_f||(J_c.a+=J_i*J_f,J_c.d+=J_j*J_e,J_c.b+=J_h*J_e+J_i*J_g,J_c.c+=J_j*J_d+J_k*J_f,J_c.tx+=J_m*J_f,J_c.ty+=J_l*J_e),J_c},J_c.preMulXY=function(J_a,J_b,J_c,J_d){var J_e=J_a.a,J_f=J_a.b,J_g=J_a.c,J_h=J_a.d;return J_d.a=J_e,J_d.b=J_f,J_d.c=J_g,J_d.d=J_h,J_d.tx=J_b*J_e+J_a.tx+J_c*J_g,J_d.ty=J_c*J_h+J_a.ty+J_b*J_f,J_d},J_c.create=function(){var J_a=J_c._cache,J_b=J_a._length?J_a[--J_a._length]:new J_c;return J_b.inPool=!1,J_b},J_c.EMPTY=new J_c,J_c.TEMP=new J_c,J_c._cache=[],J_c}(),J_A=function(){function J_a(J_a,J_b){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),this.x=J_a,this.y=J_b}J_k(J_a,"laya.maths.Point");var J_b=J_a.prototype;return J_b.setTo=function(J_a,J_b){return this.x=J_a,this.y=J_b,this},J_b.distance=function(J_a,J_b){return Math.sqrt((this.x-J_a)*(this.x-J_a)+(this.y-J_b)*(this.y-J_b))},J_b.toString=function(){return this.x+","+this.y},J_b.normalize=function(){var J_a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<J_a){var J_b=1/J_a;this.x*=J_b,this.y*=J_b}},J_a.TEMP=new J_a,J_a.EMPTY=new J_a,J_a}(),J_B=function(){function J_j(J_a,J_b,J_c,J_d){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),this.x=J_a,this.y=J_b,this.width=J_c,this.height=J_d}J_k(J_j,"laya.maths.Rectangle");var J_a=J_j.prototype;return J_a.setTo=function(J_a,J_b,J_c,J_d){return this.x=J_a,this.y=J_b,this.width=J_c,this.height=J_d,this},J_a.copyFrom=function(J_a){return this.x=J_a.x,this.y=J_a.y,this.width=J_a.width,this.height=J_a.height,this},J_a.contains=function(J_a,J_b){return!(this.width<=0||this.height<=0)&&(J_a>=this.x&&J_a<this.right&&J_b>=this.y&&J_b<this.bottom)},J_a.intersects=function(J_a){return!(J_a.x>this.x+this.width||J_a.x+J_a.width<this.x||J_a.y>this.y+this.height||J_a.y+J_a.height<this.y)},J_a.intersection=function(J_a,J_b){return this.intersects(J_a)?(J_b||(J_b=new J_j),J_b.x=Math.max(this.x,J_a.x),J_b.y=Math.max(this.y,J_a.y),J_b.width=Math.min(this.right,J_a.right)-J_b.x,J_b.height=Math.min(this.bottom,J_a.bottom)-J_b.y,J_b):null},J_a.union=function(J_a,J_b){return J_b||(J_b=new J_j),this.clone(J_b),J_a.width<=0||J_a.height<=0?J_b:(J_b.addPoint(J_a.x,J_a.y),J_b.addPoint(J_a.right,J_a.bottom),this)},J_a.clone=function(J_a){return J_a||(J_a=new J_j),J_a.x=this.x,J_a.y=this.y,J_a.width=this.width,J_a.height=this.height,J_a},J_a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},J_a.equals=function(J_a){return!(!J_a||J_a.x!==this.x||J_a.y!==this.y||J_a.width!==this.width||J_a.height!==this.height)},J_a.addPoint=function(J_a,J_b){return this.x>J_a&&(this.width+=this.x-J_a,this.x=J_a),this.y>J_b&&(this.height+=this.y-J_b,this.y=J_b),this.width<J_a-this.x&&(this.width=J_a-this.x),this.height<J_b-this.y&&(this.height=J_b-this.y),this},J_a._getBoundPoints=function(){var J_a=J_j._temB;return(J_a.length=0)==this.width||0==this.height||J_a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),J_a},J_a.isEmpty=function(){return this.width<=0||this.height<=0},J_o(0,J_a,"right",function(){return this.x+this.width}),J_o(0,J_a,"bottom",function(){return this.y+this.height}),J_j._getBoundPointS=function(J_a,J_b,J_c,J_d){var J_e=J_j._temA;return(J_e.length=0)==J_c||0==J_d||J_e.push(J_a,J_b,J_a+J_c,J_b,J_a,J_b+J_d,J_a+J_c,J_b+J_d),J_e},J_j._getWrapRec=function(J_a,J_b){if(!J_a||J_a.length<1)return J_b?J_b.setTo(0,0,0,0):J_j.TEMP.setTo(0,0,0,0);J_b=J_b||new J_j;var J_c,J_d,J_e,J_f,J_g,J_h=J_a.length,J_i=J_A.TEMP;for(J_e=J_g=-(J_d=J_f=99999),J_c=0;J_c<J_h;J_c+=2)J_i.x=J_a[J_c],J_i.y=J_a[J_c+1],J_d=J_d<J_i.x?J_d:J_i.x,J_f=J_f<J_i.y?J_f:J_i.y,J_e=J_e>J_i.x?J_e:J_i.x,J_g=J_g>J_i.y?J_g:J_i.y;return J_b.setTo(J_d,J_f,J_e-J_d,J_g-J_f)},J_j.EMPTY=new J_j,J_j.TEMP=new J_j,J_j._temB=[],J_j._temA=[],J_j}(),J_E=function(){function J_i(){}return J_k(J_i,"laya.media.SoundManager"),J_o(1,J_i,"useAudioMusic",function(){return J_i._useAudioMusic},function(J_a){J_i._useAudioMusic=J_a,J_i._musicClass=J_a?J_ca:null}),J_o(1,J_i,"autoStopMusic",function(){return J_i._autoStopMusic},function(J_a){J_z.stage.off("blur",null,J_i._stageOnBlur),J_z.stage.off("focus",null,J_i._stageOnFocus),J_z.stage.off("visibilitychange",null,J_i._visibilityChange),(J_i._autoStopMusic=J_a)&&(J_z.stage.on("blur",null,J_i._stageOnBlur),J_z.stage.on("focus",null,J_i._stageOnFocus),J_z.stage.on("visibilitychange",null,J_i._visibilityChange))}),J_o(1,J_i,"muted",function(){return J_i._muted},function(J_a){J_a!=J_i._muted&&(J_a&&J_i.stopAllSound(),J_i.musicMuted=J_a,J_i._muted=J_a)}),J_o(1,J_i,"musicMuted",function(){return J_i._musicMuted},function(J_a){J_a!=J_i._musicMuted&&(J_a?(J_i._tMusic&&J_i._musicChannel&&!J_i._musicChannel.isStopped?J_i._musicChannel.pause():J_i._musicChannel=null,J_i._musicMuted=J_a):(J_i._musicMuted=J_a,J_i._tMusic&&J_i._musicChannel&&J_i._musicChannel.resume()))}),J_o(1,J_i,"soundMuted",function(){return J_i._soundMuted},function(J_a){J_i._soundMuted=J_a}),J_i.addChannel=function(J_a){0<=J_i._channels.indexOf(J_a)||(J_i._channels.push(J_a),J_i.autoReleaseSound&&0!=J_i._notUsedCount&&J_i._notUsedUrls[J_a.url]&&(delete J_i._notUsedUrls[J_a.url],0==--J_i._notUsedCount&&J_z.timer.clear(J_i,J_i.disposeSoundIfNotUsed)))},J_i.removeChannel=function(J_a){var J_b=J_i._channels,J_c=J_b.indexOf(J_a);if(-1!=J_c&&(J_b.splice(J_c,1),J_i.autoReleaseSound)){var J_d=J_a.url,J_e=J_i.defaultIntervals[J_d]||2e4;if(0<J_e){var J_f=!0;for(J_c=J_b.length-1;0<=J_c;J_c--)if(J_b[J_c].url==J_d){J_f=!1;break}J_f&&(J_i._notUsedUrls[J_d]=Date.now()+J_e,0==J_i._notUsedCount++&&J_z.timer.loop(1e4,J_i,J_i.disposeSoundIfNotUsed))}}},J_i.disposeSoundIfNotUsed=function(){var J_a=J_i._notUsedUrls;if(0!=J_i._notUsedCount){var J_b=Date.now();for(var J_c in J_a)J_b>=J_a[J_c]&&(delete J_a[J_c],--J_i._notUsedCount,J_i.destroySound(J_c));if(0!=J_i._notUsedCount)return}J_z.timer.clear(J_i,J_i.disposeSoundIfNotUsed)},J_i._visibilityChange=function(){J_z.stage.isVisibility?J_i._stageOnFocus():J_i._stageOnBlur()},J_i._stageOnBlur=function(){J_i._isActive=!1,J_i._musicChannel&&(J_i._musicChannel.isStopped||(J_i._blurPaused=!0,J_i._musicChannel.pause())),J_i.stopAllSound(),J_z.stage.once("mousedown",null,J_i._stageOnFocus)},J_i._recoverWebAudio=function(){J_fa.ctx&&"running"!=J_fa.ctx.state&&J_fa.ctx.resume&&J_fa.ctx.resume()},J_i._stageOnFocus=function(){if(J_i._isActive=!0,J_i._recoverWebAudio(),J_z.stage.off("mousedown",null,J_i._stageOnFocus),J_i._blurPaused){var J_a=J_i._musicChannel;J_a&&J_i._music&&J_a.isStopped&&(J_i._blurPaused=!1,J_i._music._disposed?J_i.playMusic(J_a.url,J_a.loops,J_a.startHandler,J_a.completeHandler,J_a.startTime):J_a.audioBuffer?J_a.resume():J_i._music.play(J_a.startTime,J_a.loops,J_a.startHandler,J_a))}},J_i.playSound=function(J_a,J_b,J_c,J_d,J_e,J_f){if(void 0===J_b&&(J_b=1),void 0===J_f&&(J_f=0),!J_a)return null;if(J_i._muted)return null;if(J_i._recoverWebAudio(),J_a==J_i._tMusic){if(J_i._musicMuted)return null}else{if(!J_i._isActive)return null;if(J_i._soundMuted)return null}var J_g,J_h=J_i._pool[J_a];return J_e||(J_e=J_i._soundClass),J_h||((J_h=new J_e).load(J_a),J_i._pool[J_a]=J_h),(J_g=J_h.play(J_f,J_b,J_c))?(J_a==J_i._tMusic&&(J_i._music=J_h,J_i._isActive||(J_i._blurPaused=!0,J_g.pause())),J_g.url=J_a,J_g.volume=J_a==J_i._tMusic?J_i.musicVolume:J_i.soundVolume,J_g.completeHandler=J_d,J_g):null},J_i.destroySound=function(J_a){var J_b=J_i._pool[J_a];J_b&&(delete J_i._pool[J_a],J_b.dispose())},J_i.playMusic=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_b&&(J_b=0),void 0===J_e&&(J_e=0),J_i._tMusic=J_a,J_i._musicChannel&&J_i._musicChannel.stop(),J_i._musicChannel=J_i.playSound(J_a,J_b,J_c,J_d,null,J_e)},J_i.stopSound=function(J_a){for(var J_b,J_c=J_i._channels.length-1;0<=J_c;J_c--)(J_b=J_i._channels[J_c]).url==J_a&&J_b.stop()},J_i.stopAll=function(){J_i._tMusic=null;var J_a=0;for(J_a=J_i._channels.length-1;0<=J_a;J_a--)J_i._channels[J_a].stop()},J_i.stopAllSound=function(){var J_a,J_b=0;for(J_b=J_i._channels.length-1;0<=J_b;J_b--)(J_a=J_i._channels[J_b]).url!=J_i._tMusic&&J_a.stop()},J_i.stopMusic=function(){J_i._musicChannel&&J_i._musicChannel.stop(),J_i._tMusic=null},J_i.setSoundVolume=function(J_a,J_b){if(J_b)J_i._setVolume(J_b,J_a);else{J_i.soundVolume=J_a;var J_c,J_d=0;for(J_d=J_i._channels.length-1;0<=J_d;J_d--)(J_c=J_i._channels[J_d]).url!=J_i._tMusic&&(J_c.volume=J_a)}},J_i.setMusicVolume=function(J_a){J_i.musicVolume=J_a,J_i._setVolume(J_i._tMusic,J_a)},J_i._setVolume=function(J_a,J_b){for(var J_c,J_d=J_i._channels.length-1;0<=J_d;J_d--)(J_c=J_i._channels[J_d]).url==J_a&&(J_c.volume=J_b)},J_i.musicVolume=1,J_i.soundVolume=1,J_i.playbackRate=1,J_i._useAudioMusic=!0,J_i._muted=!1,J_i._soundMuted=!1,J_i._musicMuted=!1,J_i._tMusic=null,J_i._musicChannel=null,J_i._music=null,J_i._channels=[],J_i._autoStopMusic=!1,J_i._blurPaused=!1,J_i._isActive=!0,J_i._soundClass=null,J_i._musicClass=null,J_i.autoReleaseSound=!0,J_i._pool={},J_i.defaultIntervals={},J_i._notUsedUrls={},J_i._notUsedCount=0,J_i}(),J_C=function(){var J_a;function J_c(){}return J_k(J_c,"laya.net.LocalStorage"),J_c.__init__=function(){J_c._baseClass||(J_c._baseClass=J_a).init(),J_c.items=J_c._baseClass.items,J_c.support=J_c._baseClass.support},J_c.setItem=function(J_a,J_b){J_c._baseClass.setItem(J_a,J_b)},J_c.getItem=function(J_a){return J_c._baseClass.getItem(J_a)},J_c.setJSON=function(J_a,J_b){J_c._baseClass.setJSON(J_a,J_b)},J_c.getJSON=function(J_a){return J_c._baseClass.getJSON(J_a)},J_c.removeItem=function(J_a){J_c._baseClass.removeItem(J_a)},J_c.clear=function(){J_c._baseClass.clear()},J_c._baseClass=null,J_c.items=null,J_c.support=!1,J_c.__init$=function(){J_a=function(){function J_c(){}return J_k(J_c,""),J_c.init=function(){try{J_c.support=!0,J_c.items=J_g.localStorage,J_c.setItem("laya","1"),J_c.removeItem("laya")}catch(J_a){J_c.support=!1}J_c.support||console.log("LocalStorage is not supprot or browser is private mode.")},J_c.setItem=function(J_a,J_b){try{J_c.support&&J_c.items.setItem(J_a,J_b)}catch(J_a){console.warn("set localStorage failed",J_a)}},J_c.getItem=function(J_a){return J_c.support?J_c.items.getItem(J_a):null},J_c.setJSON=function(J_a,J_b){try{J_c.support&&J_c.items.setItem(J_a,JSON.stringify(J_b))}catch(J_a){console.warn("set localStorage failed",J_a)}},J_c.getJSON=function(J_a){return JSON.parse(J_c.support?J_c.items.getItem(J_a):null)},J_c.removeItem=function(J_a){J_c.support&&J_c.items.removeItem(J_a)},J_c.clear=function(){J_c.support&&J_c.items.clear()},J_c.items=null,J_c.support=!1,J_c}()},J_c}(),J_H=(function(){function J_d(){}J_k(J_d,"laya.net.ResourceVersion"),J_d.enable=function(J_a,J_b,J_c){void 0===J_c&&(J_c=2),laya.net.ResourceVersion.type=J_c,J_z.loader.load(J_a,J_u.create(null,J_d.onManifestLoaded,[J_b]),null,"json"),J_I.customFormat=J_d.addVersionPrefix},J_d.onManifestLoaded=function(J_a,J_b){J_d.manifest=J_b,J_a.run(),J_b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},J_d.addVersionPrefix=function(J_a){return J_d.manifest&&J_d.manifest[J_a]?2==J_d.type?J_d.manifest[J_a]:J_d.manifest[J_a]+"/"+J_a:J_a},J_d.FOLDER_VERSION=1,J_d.FILENAME_VERSION=2,J_d.manifest=null,J_d.type=1}(),function(){function J_a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}J_k(J_a,"laya.net.TTFLoader");var J_b=J_a.prototype;return J_b.load=function(J_a){var J_b=(this._url=J_a).split(".ttf")[0].split("/");this.fontName=J_b[J_b.length-1],J_O.window.conch?this._loadConch():J_O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},J_b._loadConch=function(){this._http=new J_ga,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},J_b._onHttpLoaded=function(J_a){J_O.window.conch.setFontFaceFromBuffer(this.fontName,J_a),this._clearHttp(),this._complete()},J_b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},J_b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},J_b._complete=function(){J_z.timer.clear(this,this._complete),J_z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},J_b._checkComplete=function(){J_F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},J_b._loadWithFontFace=function(){var J_a=new J_O.window.FontFace(this.fontName,"url('"+this._url+"')");J_O.window.document.fonts.add(J_a);var J_b=this;J_a.loaded.then(function(){J_b._complete()}),J_a.load()},J_b._createDiv=function(){this._div=J_O.createElement("div"),this._div.innerHTML="laya";var J_a=this._div.style;J_a.fontFamily=this.fontName,J_a.position="absolute",J_a.left="-100px",J_a.top="-100px",J_O.document.body.appendChild(this._div)},J_b._loadWithCSS=function(){var J_a=this,J_b=J_O.createElement("style");J_b.type="text/css",J_O.document.body.appendChild(J_b),J_b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=J_F.measureText("LayaTTFFont",this._fontTxt).width;var J_c=this;J_b.onload=function(){J_z.timer.once(1e4,J_c,J_a._complete)},J_z.timer.loop(20,this,this._checkComplete),this._createDiv()},J_a._testString="LayaTTFFont",J_a}()),J_I=function(){function J_d(J_a){this._url=null,this._path=null,this._url=J_d.formatURL(J_a),this._path=J_d.getPath(J_a)}J_k(J_d,"laya.net.URL");var J_a=J_d.prototype;return J_o(0,J_a,"path",function(){return this._path}),J_o(0,J_a,"url",function(){return this._url}),J_d.formatURL=function(J_a,J_b){if(!J_a)return"null path";if(0<J_a.indexOf(":"))return J_a;null!=J_d.customFormat&&(J_a=J_d.customFormat(J_a,J_b));var J_c=J_a.charAt(0);if("."===J_c)return J_d.formatRelativePath((J_b||J_d.basePath)+J_a);if("~"===J_c)return J_d.rootPath+J_a.substring(1);if("d"===J_c){if(0===J_a.indexOf("data:image"))return J_a}else if("/"===J_c)return J_a;return(J_b||J_d.basePath)+J_a},J_d.formatRelativePath=function(J_a){for(var J_b=J_a.split("/"),J_c=0,J_d=J_b.length;J_c<J_d;J_c++)".."==J_b[J_c]&&(J_b.splice(J_c-1,2),J_c-=2);return J_b.join("/")},J_d.isAbsolute=function(J_a){return 0<J_a.indexOf(":")||"/"==J_a.charAt(0)},J_d.getPath=function(J_a){var J_b=J_a.lastIndexOf("/");return 0<J_b?J_a.substr(0,J_b+1):""},J_d.getFileName=function(J_a){var J_b=J_a.lastIndexOf("/");return 0<J_b?J_a.substr(J_b+1):J_a},J_d.version={},J_d.basePath="",J_d.rootPath="",J_d.customFormat=function(J_a){var J_b=J_d.version[J_a];return!J_J.isConchApp&&J_b&&(J_a+="?v="+J_b),J_a},J_d}(),J_J=function(){function J_e(J_a,J_b){this._timeId=0;var J_c=J_e._mainCanvas.source.style;J_c.position="absolute",J_c.top=J_c.left="0px",J_c.background="#000000",J_e._mainCanvas.source.id="layaCanvas";var J_d=laya.renders.Render.isWebGL;J_e._mainCanvas.source.width=J_a,J_e._mainCanvas.source.height=J_b,J_d&&J_e.WebGL.init(J_e._mainCanvas,J_a,J_b),J_O.container.appendChild(J_e._mainCanvas.source),(J_e._context=new J_K(J_a,J_b,J_d?null:J_e._mainCanvas)).ctx.setIsMainContext(),J_O.window.requestAnimationFrame(function J_a(J_b){J_O.window.requestAnimationFrame(J_a);J_z.stage._loop()}),J_z.stage.on("visibilitychange",this,this._onVisibilitychange)}J_k(J_e,"laya.renders.Render");var J_a=J_e.prototype;return J_a._onVisibilitychange=function(){J_z.stage.isVisibility?0!=this._timeId&&J_O.window.clearInterval(this._timeId):this._timeId=J_O.window.setInterval(this._enterFrame,1e3)},J_a._enterFrame=function(J_a){J_z.stage._loop()},J_o(1,J_e,"context",function(){return J_e._context}),J_o(1,J_e,"canvas",function(){return J_e._mainCanvas.source}),J_e._context=null,J_e._mainCanvas=null,J_e.WebGL=null,J_e.isConchNode=!1,J_e.isConchApp=!1,J_e.isConchWebGL=!1,J_e.isWebGL=!1,J_e.is3DMode=!1,J_e.optimizeTextureMemory=function(J_a,J_b){return!0},J_e.__init$=function(){J_g.ConchRenderType=J_g.ConchRenderType||1,J_g.ConchRenderType|=J_g.conch?4:0,J_e.isConchNode=5==(5&J_g.ConchRenderType),J_e.isConchApp=4==(4&J_g.ConchRenderType),J_e.isConchWebGL=6==J_g.ConchRenderType},J_e}(),J_K=function(){function J_g(J_a,J_b,J_c){this.x=0,this.y=0,this._drawTexture=function(J_a,J_b,J_c){J_c[0].loaded&&this.ctx.drawTexture(J_c[0],J_c[1],J_c[2],J_c[3],J_c[4],J_a,J_b)},this._fillTexture=function(J_a,J_b,J_c){J_c[0].loaded&&this.ctx.fillTexture(J_c[0],J_c[1]+J_a,J_c[2]+J_b,J_c[3],J_c[4],J_c[5],J_c[6],J_c[7])},this._drawTextureWithTransform=function(J_a,J_b,J_c){J_c[0].loaded&&this.ctx.drawTextureWithTransform(J_c[0],J_c[1],J_c[2],J_c[3],J_c[4],J_c[5],J_a,J_b,J_c[6])},this._fillQuadrangle=function(J_a,J_b,J_c){this.ctx.fillQuadrangle(J_c[0],J_c[1],J_c[2],J_c[3],J_c[4])},this._drawRect=function(J_a,J_b,J_c){var J_d=this.ctx;null!=J_c[4]&&(J_d.fillStyle=J_c[4],J_d.fillRect(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3],null)),null!=J_c[5]&&(J_d.strokeStyle=J_c[5],J_d.lineWidth=J_c[6],J_d.strokeRect(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3],J_c[6]))},this._drawPie=function(J_a,J_b,J_c){var J_d=this.ctx;J_J.isWebGL&&J_d.setPathId(J_c[8]),J_d.beginPath(),J_J.isWebGL?(J_d.movePath(J_c[0]+J_a,J_c[1]+J_b),J_d.moveTo(0,0)):J_d.moveTo(J_a+J_c[0],J_b+J_c[1]),J_d.arc(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3],J_c[4]),J_d.closePath(),this._fillAndStroke(J_c[5],J_c[6],J_c[7],!0)},this._clipRect=function(J_a,J_b,J_c){this.ctx.clipRect(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3])},this._fillRect=function(J_a,J_b,J_c){this.ctx.fillRect(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3],J_c[4])},this._drawCircle=function(J_a,J_b,J_c){var J_d=this.ctx;J_J.isWebGL&&J_d.setPathId(J_c[6]),J_X.drawCall++,J_d.beginPath(),J_J.isWebGL&&J_d.movePath(J_c[0]+J_a,J_c[1]+J_b),J_d.arc(J_c[0]+J_a,J_c[1]+J_b,J_c[2],0,J_g.PI2),J_d.closePath(),this._fillAndStroke(J_c[3],J_c[4],J_c[5],!0)},this._fillCircle=function(J_a,J_b,J_c){J_X.drawCall++;var J_d=this.ctx;J_d.beginPath(),J_d.fillStyle=J_c[3],J_d.arc(J_c[0]+J_a,J_c[1]+J_b,J_c[2],0,J_g.PI2),J_d.fill()},this._setShader=function(J_a,J_b,J_c){this.ctx.setShader(J_c[0])},this._drawLine=function(J_a,J_b,J_c){var J_d=this.ctx;J_J.isWebGL&&J_d.setPathId(J_c[6]),J_d.beginPath(),J_d.strokeStyle=J_c[4],J_d.lineWidth=J_c[5],J_J.isWebGL?(J_d.movePath(J_a,J_b),J_d.moveTo(J_c[0],J_c[1]),J_d.lineTo(J_c[2],J_c[3])):(J_d.moveTo(J_a+J_c[0],J_b+J_c[1]),J_d.lineTo(J_a+J_c[2],J_b+J_c[3])),J_d.stroke()},this._drawLines=function(J_a,J_b,J_c){var J_d=this.ctx;J_J.isWebGL&&J_d.setPathId(J_c[5]),J_d.beginPath(),J_a+=J_c[0],J_b+=J_c[1],J_J.isWebGL&&J_d.movePath(J_a,J_b),J_d.strokeStyle=J_c[3],J_d.lineWidth=J_c[4];var J_e=J_c[2],J_f=2,J_g=J_e.length;if(J_J.isWebGL)for(J_d.moveTo(J_e[0],J_e[1]);J_f<J_g;)J_d.lineTo(J_e[J_f++],J_e[J_f++]);else for(J_d.moveTo(J_a+J_e[0],J_b+J_e[1]);J_f<J_g;)J_d.lineTo(J_a+J_e[J_f++],J_b+J_e[J_f++]);J_d.stroke()},this._drawLinesWebGL=function(J_a,J_b,J_c){this.ctx.drawLines(J_a+this.x+J_c[0],J_b+this.y+J_c[1],J_c[2],J_c[3],J_c[4])},this._drawCurves=function(J_a,J_b,J_c){this.ctx.drawCurves(J_a,J_b,J_c)},this._draw=function(J_a,J_b,J_c){J_c[0].call(null,this,J_a,J_b)},this._transformByMatrix=function(J_a,J_b,J_c){this.ctx.transformByMatrix(J_c[0])},this._setTransform=function(J_a,J_b,J_c){this.ctx.setTransform(J_c[0],J_c[1],J_c[2],J_c[3],J_c[4],J_c[5])},this._setTransformByMatrix=function(J_a,J_b,J_c){this.ctx.setTransformByMatrix(J_c[0])},this._save=function(J_a,J_b,J_c){this.ctx.save()},this._restore=function(J_a,J_b,J_c){this.ctx.restore()},this._translate=function(J_a,J_b,J_c){this.ctx.translate(J_c[0],J_c[1])},this._transform=function(J_a,J_b,J_c){this.ctx.translate(J_c[1]+J_a,J_c[2]+J_b);var J_d=J_c[0];this.ctx.transform(J_d.a,J_d.b,J_d.c,J_d.d,J_d.tx,J_d.ty),this.ctx.translate(-J_a-J_c[1],-J_b-J_c[2])},this._rotate=function(J_a,J_b,J_c){this.ctx.translate(J_c[1]+J_a,J_c[2]+J_b),this.ctx.rotate(J_c[0]),this.ctx.translate(-J_a-J_c[1],-J_b-J_c[2])},this._scale=function(J_a,J_b,J_c){this.ctx.translate(J_c[2]+J_a,J_c[3]+J_b),this.ctx.scale(J_c[0],J_c[1]),this.ctx.translate(-J_a-J_c[2],-J_b-J_c[3])},this._alpha=function(J_a,J_b,J_c){this.ctx.globalAlpha*=J_c[0]},this._setAlpha=function(J_a,J_b,J_c){this.ctx.globalAlpha=J_c[0]},this._fillText=function(J_a,J_b,J_c){this.ctx.fillText(J_c[0],J_c[1]+J_a,J_c[2]+J_b,J_c[3],J_c[4],J_c[5])},this._strokeText=function(J_a,J_b,J_c){this.ctx.strokeText(J_c[0],J_c[1]+J_a,J_c[2]+J_b,J_c[3],J_c[4],J_c[5],J_c[6])},this._fillBorderText=function(J_a,J_b,J_c){this.ctx.fillBorderText(J_c[0],J_c[1]+J_a,J_c[2]+J_b,J_c[3],J_c[4],J_c[5],J_c[6],J_c[7])},this._blendMode=function(J_a,J_b,J_c){this.ctx.globalCompositeOperation=J_c[0]},this._beginClip=function(J_a,J_b,J_c){this.ctx.beginClip&&this.ctx.beginClip(J_a+J_c[0],J_b+J_c[1],J_c[2],J_c[3])},this._setIBVB=function(J_a,J_b,J_c){this.ctx.setIBVB(J_c[0]+J_a,J_c[1]+J_b,J_c[2],J_c[3],J_c[4],J_c[5],J_c[6],J_c[7])},this._fillTrangles=function(J_a,J_b,J_c){this.ctx.fillTrangles(J_c[0],J_c[1]+J_a,J_c[2]+J_b,J_c[3],J_c[4])},this._drawPath=function(J_a,J_b,J_c){var J_d=this.ctx;J_J.isWebGL&&J_d.setPathId(-1),J_d.beginPath(),J_a+=J_c[0],J_b+=J_c[1],J_J.isWebGL&&J_d.movePath(J_a,J_b);for(var J_e=J_c[2],J_f=0,J_g=J_e.length;J_f<J_g;J_f++){var J_h=J_e[J_f];switch(J_h[0]){case"moveTo":J_J.isWebGL?J_d.moveTo(J_h[1],J_h[2]):J_d.moveTo(J_a+J_h[1],J_b+J_h[2]);break;case"lineTo":J_J.isWebGL?J_d.lineTo(J_h[1],J_h[2]):J_d.lineTo(J_a+J_h[1],J_b+J_h[2]);break;case"arcTo":J_J.isWebGL?J_d.arcTo(J_h[1],J_h[2],J_h[3],J_h[4],J_h[5]):J_d.arcTo(J_a+J_h[1],J_b+J_h[2],J_a+J_h[3],J_b+J_h[4],J_h[5]);break;case"closePath":J_d.closePath()}}var J_i=J_c[3];null!=J_i&&(J_d.fillStyle=J_i.fillStyle,J_d.fill());var J_j=J_c[4];null!=J_j&&(J_d.strokeStyle=J_j.strokeStyle,J_d.lineWidth=J_j.lineWidth||1,J_d.lineJoin=J_j.lineJoin,J_d.lineCap=J_j.lineCap,J_d.miterLimit=J_j.miterLimit,J_d.stroke())},this.drawPoly=function(J_a,J_b,J_c){this.ctx.drawPoly(J_a+this.x+J_c[0],J_b+this.y+J_c[1],J_c[2],J_c[3],J_c[4],J_c[5],J_c[6])},this._drawPoly=function(J_a,J_b,J_c){var J_d=this.ctx,J_e=J_c[2],J_f=2,J_g=J_e.length;if(J_J.isWebGL)for(J_d.setPathId(J_c[6]),J_d.beginPath(),J_a+=J_c[0],J_b+=J_c[1],J_d.movePath(J_a,J_b),J_d.moveTo(J_e[0],J_e[1]);J_f<J_g;)J_d.lineTo(J_e[J_f++],J_e[J_f++]);else for(J_d.beginPath(),J_a+=J_c[0],J_b+=J_c[1],J_d.moveTo(J_a+J_e[0],J_b+J_e[1]);J_f<J_g;)J_d.lineTo(J_a+J_e[J_f++],J_b+J_e[J_f++]);J_d.closePath(),this._fillAndStroke(J_c[3],J_c[4],J_c[5],J_c[7])},this._drawSkin=function(J_a,J_b,J_c){var J_d=J_c[0];if(J_d){var J_e=this.ctx;J_d.render(J_e,J_a,J_b)}},this._drawParticle=function(J_a,J_b,J_c){this.ctx.drawParticle(J_a+this.x,J_b+this.y,J_c[0])},this._setFilters=function(J_a,J_b,J_c){this.ctx.setFilters(J_c)},J_c?this.ctx=J_c.getContext("2d"):(J_c=J_va.create("3D"),this.ctx=J_F.createWebGLContext2D(J_c),J_c._setContext(this.ctx)),J_c.size(J_a,J_b),this.canvas=J_c}J_k(J_g,"laya.renders.RenderContext");var J_a=J_g.prototype;return J_a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},J_a.drawTexture=function(J_a,J_b,J_c,J_d,J_e){J_a.loaded&&this.ctx.drawTexture(J_a,J_b,J_c,J_d,J_e,this.x,this.y)},J_a._drawTextures=function(J_a,J_b,J_c){J_c[0].loaded&&this.ctx.drawTextures(J_c[0],J_c[1],J_a+this.x,J_b+this.y)},J_a.drawTextureWithTransform=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_a.loaded&&this.ctx.drawTextureWithTransform(J_a,J_b,J_c,J_d,J_e,J_f,this.x,this.y,J_g)},J_a.fillQuadrangle=function(J_a,J_b,J_c,J_d,J_e){this.ctx.fillQuadrangle(J_a,J_b,J_c,J_d,J_e)},J_a.drawCanvas=function(J_a,J_b,J_c,J_d,J_e){this.ctx.drawCanvas(J_a,J_b+this.x,J_c+this.y,J_d,J_e)},J_a.drawRect=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=1);var J_g=this.ctx;J_g.strokeStyle=J_e,J_g.lineWidth=J_f,J_g.strokeRect(J_a+this.x,J_b+this.y,J_c,J_d,J_f)},J_a._fillAndStroke=function(J_a,J_b,J_c,J_d){void 0===J_d&&(J_d=!1);var J_e=this.ctx;null!=J_a&&(J_e.fillStyle=J_a,J_J.isWebGL?J_e.fill(J_d):J_e.fill()),null!=J_b&&0<J_c&&(J_e.strokeStyle=J_b,J_e.lineWidth=J_c,J_e.stroke())},J_a.clipRect=function(J_a,J_b,J_c,J_d){this.ctx.clipRect(J_a+this.x,J_b+this.y,J_c,J_d)},J_a.fillRect=function(J_a,J_b,J_c,J_d,J_e){this.ctx.fillRect(J_a+this.x,J_b+this.y,J_c,J_d,J_e)},J_a.drawCircle=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=1),J_X.drawCall++;var J_f=this.ctx;J_f.beginPath(),J_f.strokeStyle=J_d,J_f.lineWidth=J_e,J_f.arc(J_a+this.x,J_b+this.y,J_c,0,J_g.PI2),J_f.stroke()},J_a.drawTriangles=function(J_a,J_b,J_c){if(J_J.isWebGL)this.ctx.drawTriangles(J_c[0],J_a+J_c[1],J_b+J_c[2],J_c[3],J_c[4],J_c[5],J_c[6],J_c[7],J_c[8],J_c[9]);else{var J_d=J_c[5],J_e=0,J_f=J_d.length,J_g=this.ctx;for(J_e=0;J_e<J_f;J_e+=3){var J_h=2*J_d[J_e],J_i=2*J_d[J_e+1],J_j=2*J_d[J_e+2];J_g.drawTriangle(J_c[0],J_c[3],J_c[4],J_h,J_i,J_j,J_c[6],!0)}}},J_a.fillCircle=function(J_a,J_b,J_c,J_d){J_X.drawCall++;var J_e=this.ctx;J_e.beginPath(),J_e.fillStyle=J_d,J_e.arc(J_a+this.x,J_b+this.y,J_c,0,J_g.PI2),J_e.fill()},J_a.setShader=function(J_a){this.ctx.setShader(J_a)},J_a.drawLine=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=1);var J_g=this.ctx;J_g.beginPath(),J_g.strokeStyle=J_e,J_g.lineWidth=J_f,J_g.moveTo(this.x+J_a,this.y+J_b),J_g.lineTo(this.x+J_c,this.y+J_d),J_g.stroke()},J_a.clear=function(){this.ctx.clear()},J_a.transformByMatrix=function(J_a){this.ctx.transformByMatrix(J_a)},J_a.setTransform=function(J_a,J_b,J_c,J_d,J_e,J_f){this.ctx.setTransform(J_a,J_b,J_c,J_d,J_e,J_f)},J_a.setTransformByMatrix=function(J_a){this.ctx.setTransformByMatrix(J_a)},J_a.save=function(){this.ctx.save()},J_a.restore=function(){this.ctx.restore()},J_a.translate=function(J_a,J_b){this.ctx.translate(J_a,J_b)},J_a.transform=function(J_a,J_b,J_c,J_d,J_e,J_f){this.ctx.transform(J_a,J_b,J_c,J_d,J_e,J_f)},J_a.rotate=function(J_a){this.ctx.rotate(J_a)},J_a.scale=function(J_a,J_b){this.ctx.scale(J_a,J_b)},J_a.alpha=function(J_a){this.ctx.globalAlpha*=J_a},J_a.setAlpha=function(J_a){this.ctx.globalAlpha=J_a},J_a.fillWords=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_f&&(J_f=0),this.ctx.fillWords(J_a,J_b,J_c,J_d,J_e,J_f)},J_a.fillBorderWords=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this.ctx.fillBorderWords(J_a,J_b,J_c,J_d,J_e,J_f,J_g)},J_a.fillText=function(J_a,J_b,J_c,J_d,J_e,J_f){this.ctx.fillText(J_a,J_b+this.x,J_c+this.y,J_d,J_e,J_f)},J_a.strokeText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this.ctx.strokeText(J_a,J_b+this.x,J_c+this.y,J_d,J_e,J_f,J_g)},J_a.blendMode=function(J_a){this.ctx.globalCompositeOperation=J_a},J_a.flush=function(){this.ctx.flush&&this.ctx.flush()},J_a.addRenderObject=function(J_a){this.ctx.addRenderObject(J_a)},J_a.beginClip=function(J_a,J_b,J_c,J_d){this.ctx.beginClip&&this.ctx.beginClip(J_a,J_b,J_c,J_d)},J_a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},J_a.fillTrangles=function(J_a,J_b,J_c){this.ctx.fillTrangles(J_c[0],J_c[1],J_c[2],J_c[3],4<J_c.length?J_c[4]:null)},J_g.PI2=2*Math.PI,J_g}(),J_L=function(){function J_g(J_a,J_b){switch(this._next=J_b||J_g.NORENDER,J_a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=J_r._filter);case 69905:return void(this._fun=J_g._initRenderFun)}this.onCreate(J_a)}J_k(J_g,"laya.renders.RenderSprite");var J_a=J_g.prototype;return J_a.onCreate=function(J_a){},J_a._style=function(J_a,J_b,J_c,J_d){J_a._style.render(J_a,J_b,J_c,J_d);var J_e=this._next;J_e._fun.call(J_e,J_a,J_b,J_c,J_d)},J_a._no=function(J_a,J_b,J_c,J_d){},J_a._custom=function(J_a,J_b,J_c,J_d){J_a.customRender(J_b,J_c,J_d);var J_e=J_a._style._tf;this._next._fun.call(this._next,J_a,J_b,J_c-J_e.translateX,J_d-J_e.translateY)},J_a._clip=function(J_a,J_b,J_c,J_d){var J_e=this._next;if(J_e!=J_g.NORENDER){var J_f=J_a._style.scrollRect;J_b.ctx.save(),J_b.ctx.clipRect(J_c,J_d,J_f.width,J_f.height),J_e._fun.call(J_e,J_a,J_b,J_c-J_f.x,J_d-J_f.y),J_b.ctx.restore()}},J_a._blend=function(J_a,J_b,J_c,J_d){var J_e=J_a._style;J_e.blendMode&&(J_b.ctx.globalCompositeOperation=J_e.blendMode);var J_f=this._next;J_f._fun.call(J_f,J_a,J_b,J_c,J_d),J_b.ctx.globalCompositeOperation="source-over"},J_a._mask=function(J_a,J_b,J_c,J_d){var J_e=this._next;J_e._fun.call(J_e,J_a,J_b,J_c,J_d);var J_f=J_a.mask;J_f&&(J_b.ctx.globalCompositeOperation="destination-in",(0<J_f.numChildren||!J_f.graphics._isOnlyOne())&&(J_f.cacheAsBitmap=!0),J_f.render(J_b,J_c-J_a.pivotX,J_d-J_a.pivotY)),J_b.ctx.globalCompositeOperation="source-over"},J_a._graphics=function(J_a,J_b,J_c,J_d){var J_e=J_a._style._tf;J_a._graphics&&J_a._graphics._render(J_a,J_b,J_c-J_e.translateX,J_d-J_e.translateY);var J_f=this._next;J_f._fun.call(J_f,J_a,J_b,J_c,J_d)},J_a._image=function(J_a,J_b,J_c,J_d){var J_e=J_a._style;J_b.ctx.drawTexture2(J_c,J_d,J_e._tf.translateX,J_e._tf.translateY,J_a.transform,J_e.alpha,J_e.blendMode,J_a._graphics._one)},J_a._image2=function(J_a,J_b,J_c,J_d){var J_e=J_a._style._tf;J_b.ctx.drawTexture2(J_c,J_d,J_e.translateX,J_e.translateY,J_a.transform,1,null,J_a._graphics._one)},J_a._alpha=function(J_a,J_b,J_c,J_d){var J_e;if(.01<(J_e=J_a._style.alpha)||J_a._needRepaint()){var J_f=J_b.ctx.globalAlpha;J_b.ctx.globalAlpha*=J_e;var J_g=this._next;J_g._fun.call(J_g,J_a,J_b,J_c,J_d),J_b.ctx.globalAlpha=J_f}},J_a._transform=function(J_a,J_b,J_c,J_d){var J_e=J_a.transform,J_f=this._next;J_e&&J_f!=J_g.NORENDER?(J_b.save(),J_b.transform(J_e.a,J_e.b,J_e.c,J_e.d,J_e.tx+J_c,J_e.ty+J_d),J_f._fun.call(J_f,J_a,J_b,0,0),J_b.restore()):J_f._fun.call(J_f,J_a,J_b,J_c,J_d)},J_a._childs=function(J_a,J_b,J_c,J_d){var J_e=J_a._style,J_f=J_e._tf;if(J_c=J_c-J_f.translateX+J_e.paddingLeft,J_d=J_d-J_f.translateY+J_e.paddingTop,J_e._calculation){var J_g=J_a._getWords();if(J_g){var J_h=J_e;J_h&&(J_h.stroke?J_b.fillBorderWords(J_g,J_c,J_d,J_h.font,J_h.color,J_h.strokeColor,J_h.stroke):J_b.fillWords(J_g,J_c,J_d,J_h.font,J_h.color,"none"!=J_h.textDecoration&&J_h.underLine?1:0))}}var J_i,J_j=J_a._childs,J_k=J_j.length;if(J_a.viewport||J_a.optimizeScrollRect&&J_a._style.scrollRect){var J_l=J_a.viewport||J_a._style.scrollRect,J_m=J_l.x,J_n=J_l.y,J_o=J_l.right,J_p=J_l.bottom,J_q=NaN,J_r=NaN;for(J_u=0;J_u<J_k;++J_u)(J_i=J_j[J_u]).visible&&(J_q=J_i._x)<J_o&&J_q+J_i.width>J_m&&(J_r=J_i._y)<J_p&&J_r+J_i.height>J_n&&J_i.render(J_b,J_c,J_d)}else for(var J_u=0;J_u<J_k;++J_u)(J_i=J_j[J_u])._style.visible&&J_i.render(J_b,J_c,J_d)},J_a._canvas=function(J_a,J_b,J_c,J_d){var J_e=J_a._$P.cacheCanvas;if(J_e){"bitmap"===J_e.type?J_X.canvasBitmap++:J_X.canvasNormal++;var J_f=J_e.ctx;if(J_a._needRepaint()||!J_f)this._canvas_repaint(J_a,J_b,J_c,J_d);else{var J_g=J_e._cacheRec;J_b.drawCanvas(J_f.canvas,J_c+J_g.x,J_d+J_g.y,J_g.width,J_g.height)}}else this._next._fun.call(this._next,J_a,J_b,J_c,J_d)},J_a._canvas_repaint=function(J_a,J_b,J_c,J_d){var J_e=J_a._$P.cacheCanvas,J_f=this._next;if(J_e){var J_g,J_h,J_i,J_j,J_k=J_e.ctx,J_l=J_a._needRepaint()||!J_k,J_m=J_e.type;if("bitmap"===J_m?J_X.canvasBitmap++:J_X.canvasNormal++,J_l){var J_n,J_o;J_e._cacheRec||(J_e._cacheRec=new J_B),J_J.isWebGL&&"bitmap"!==J_m?J_e._cacheRec.setTo(-J_a.pivotX,-J_a.pivotY,1,1):((J_j=J_a.getSelfBounds()).x=J_j.x-J_a.pivotX,J_j.y=J_j.y-J_a.pivotY,J_j.x=J_j.x-16,J_j.y=J_j.y-16,J_j.width=J_j.width+32,J_j.height=J_j.height+32,J_j.x=Math.floor(J_j.x+J_c)-J_c,J_j.y=Math.floor(J_j.y+J_d)-J_d,J_j.width=Math.floor(J_j.width),J_j.height=Math.floor(J_j.height),J_e._cacheRec.copyFrom(J_j)),J_j=J_e._cacheRec;var J_p,J_q=J_J.isWebGL?1:J_O.pixelRatio*J_z.stage.clientScaleX,J_r=J_J.isWebGL?1:J_O.pixelRatio*J_z.stage.clientScaleY;if(!J_J.isWebGL){var J_u,J_v=1,J_w=1;for(J_u=J_a;J_u&&J_u!=J_z.stage;)J_v*=J_u.scaleX,J_w*=J_u.scaleY,J_u=J_u.parent;J_J.isWebGL?(J_v<1&&(J_q*=J_v),J_w<1&&(J_r*=J_w)):(1<J_v&&(J_q*=J_v),1<J_w&&(J_r*=J_w))}if(J_a.scrollRect){var J_x=J_a.scrollRect;J_j.x-=J_x.x,J_j.y-=J_x.y}if(J_n=J_j.width*J_q,J_o=J_j.height*J_r,J_h=J_j.x,J_i=J_j.y,J_J.isWebGL&&"bitmap"===J_m&&(2048<J_n||2048<J_o))return console.warn("cache bitmap size larger than 2048,cache ignored"),J_e.ctx&&(J_W.recover("RenderContext",J_e.ctx),J_e.ctx.canvas.size(0,0),J_e.ctx=null),void J_f._fun.call(J_f,J_a,J_b,J_c,J_d);if(J_k||(J_k=J_e.ctx=J_W.getItem("RenderContext")||new J_K(J_n,J_o,J_va.create("AUTO"))),J_k.ctx.sprite=J_a,(J_g=J_k.canvas).clear(),(J_g.width!=J_n||J_g.height!=J_o)&&J_g.size(J_n,J_o),"bitmap"===J_m?J_g.context.asBitmap=!0:"normal"===J_m&&(J_g.context.asBitmap=!1),1!=J_q||1!=J_r){var J_y=J_k.ctx;J_y.save(),J_y.scale(J_q,J_r),!J_J.isConchWebGL&&J_J.isConchApp&&(J_p=J_a._$P.cf)&&J_y.setFilterMatrix&&J_y.setFilterMatrix(J_p._mat,J_p._alpha),J_f._fun.call(J_f,J_a,J_k,-J_h,-J_i),J_y.restore(),J_J.isConchApp&&!J_J.isConchWebGL||J_a._applyFilters()}else J_y=J_k.ctx,!J_J.isConchWebGL&&J_J.isConchApp&&(J_p=J_a._$P.cf)&&J_y.setFilterMatrix&&J_y.setFilterMatrix(J_p._mat,J_p._alpha),J_f._fun.call(J_f,J_a,J_k,-J_h,-J_i),J_J.isConchApp&&!J_J.isConchWebGL||J_a._applyFilters();J_a._$P.staticCache&&(J_e.reCache=!1),J_X.canvasReCache++}else J_h=(J_j=J_e._cacheRec).x,J_i=J_j.y,J_g=J_k.canvas;J_b.drawCanvas(J_g,J_c+J_h,J_d+J_i,J_j.width,J_j.height)}else J_f._fun.call(J_f,J_a,J_k,J_c,J_d)},J_g.__init__=function(){var J_a,J_b,J_c=0;for(J_b=J_F.createRenderSprite(69905,null),J_a=J_g.renders.length=4096,J_c=0;J_c<J_a;J_c++)J_g.renders[J_c]=J_b;J_g.renders[0]=J_F.createRenderSprite(0,null),function(J_a,J_b){for(var J_c=0,J_d=0;J_d<J_a.length;J_d++)J_c|=J_a[J_d],J_g.renders[J_c]=J_b}([1,512,4,2],new J_g(1,null)),J_g.renders[513]=J_F.createRenderSprite(513,null),J_g.renders[517]=new J_g(517,null)},J_g._initRenderFun=function(J_a,J_b,J_c,J_d){var J_e=J_a._renderType;(J_g.renders[J_e]=J_g._getTypeRender(J_e))._fun(J_a,J_b,J_c,J_d)},J_g._getTypeRender=function(J_a){for(var J_b=null,J_c=2048;1<J_c;)J_c&J_a&&(J_b=J_F.createRenderSprite(J_c,J_b)),J_c>>=1;return J_b},J_g.IMAGE=1,J_g.ALPHA=2,J_g.TRANSFORM=4,J_g.BLEND=8,J_g.CANVAS=16,J_g.FILTERS=32,J_g.MASK=64,J_g.CLIP=128,J_g.STYLE=256,J_g.GRAPHICS=512,J_g.CUSTOM=1024,J_g.CHILDS=2048,J_g.INIT=69905,J_g.renders=[],J_g.NORENDER=new J_g(0,null),J_g}(),J_M=function(){function J_h(){this._repaint=!1}J_k(J_h,"laya.resource.Context");var J_a=J_h.prototype;return J_a.replaceReset=function(){var J_a,J_b,J_c=0;for(J_a=J_h.replaceKeys.length,J_c=0;J_c<J_a;J_c++)J_b=J_h.replaceKeys[J_c],this[J_h.newKeys[J_c]]=this[J_b]},J_a.replaceResotre=function(){this.__restore(),this.__reset()},J_a.setIsMainContext=function(){},J_a.drawTextures=function(J_a,J_b,J_c,J_d){J_X.drawCall+=J_b.length/2;for(var J_e=J_a.width,J_f=J_a.height,J_g=0,J_h=J_b.length;J_g<J_h;J_g+=2)this.drawTexture(J_a,J_b[J_g],J_b[J_g+1],J_e,J_f,J_c,J_d)},J_a.drawCanvas=function(J_a,J_b,J_c,J_d,J_e){J_X.drawCall++,this.drawImage(J_a.source,J_b,J_c,J_d,J_e)},J_a.fillRect=function(J_a,J_b,J_c,J_d,J_e){J_X.drawCall++,J_e&&(this.fillStyle=J_e),this.__fillRect(J_a,J_b,J_c,J_d)},J_a.fillText=function(J_a,J_b,J_c,J_d,J_e,J_f){J_X.drawCall++,3<arguments.length&&null!=J_d&&(this.font=J_d,this.fillStyle=J_e,this.textAlign=J_f,this.textBaseline="top"),this.__fillText(J_a,J_b,J_c)},J_a.fillBorderText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){J_X.drawCall++,this.font=J_d,this.fillStyle=J_e,this.textBaseline="top",this.strokeStyle=J_f,this.lineWidth=J_g,this.textAlign=J_h,this.__strokeText(J_a,J_b,J_c),this.__fillText(J_a,J_b,J_c)},J_a.strokeText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_X.drawCall++,3<arguments.length&&null!=J_d&&(this.font=J_d,this.strokeStyle=J_e,this.lineWidth=J_f,this.textAlign=J_g,this.textBaseline="top"),this.__strokeText(J_a,J_b,J_c)},J_a.transformByMatrix=function(J_a){this.transform(J_a.a,J_a.b,J_a.c,J_a.d,J_a.tx,J_a.ty)},J_a.setTransformByMatrix=function(J_a){this.setTransform(J_a.a,J_a.b,J_a.c,J_a.d,J_a.tx,J_a.ty)},J_a.clipRect=function(J_a,J_b,J_c,J_d){J_X.drawCall++,this.beginPath(),this.rect(J_a,J_b,J_c,J_d),this.clip()},J_a.drawTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_X.drawCall++;var J_h=J_a.uv,J_i=J_a.bitmap.width,J_j=J_a.bitmap.height;this.drawImage(J_a.source,J_h[0]*J_i,J_h[1]*J_j,(J_h[2]-J_h[0])*J_i,(J_h[5]-J_h[3])*J_j,J_b+J_f,J_c+J_g,J_d,J_e)},J_a.drawTextureWithTransform=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){J_X.drawCall++;var J_j=J_a.uv,J_k=J_a.bitmap.width,J_l=J_a.bitmap.height;this.save(),1!=J_i&&(this.globalAlpha*=J_i),J_f?(this.transform(J_f.a,J_f.b,J_f.c,J_f.d,J_f.tx+J_g,J_f.ty+J_h),this.drawImage(J_a.source,J_j[0]*J_k,J_j[1]*J_l,(J_j[2]-J_j[0])*J_k,(J_j[5]-J_j[3])*J_l,J_b,J_c,J_d,J_e)):this.drawImage(J_a.source,J_j[0]*J_k,J_j[1]*J_l,(J_j[2]-J_j[0])*J_k,(J_j[5]-J_j[3])*J_l,J_b+J_g,J_c+J_h,J_d,J_e),this.restore()},J_a.drawTexture2=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=J_h[0];if(J_i.loaded&&J_i.bitmap&&J_i.source){J_X.drawCall++;var J_j=1!==J_f;if(J_j){var J_k=this.globalAlpha;this.globalAlpha*=J_f}var J_l=J_i.uv,J_m=J_i.bitmap.width,J_n=J_i.bitmap.height;J_e?(this.save(),this.transform(J_e.a,J_e.b,J_e.c,J_e.d,J_e.tx+J_a,J_e.ty+J_b),this.drawImage(J_i.source,J_l[0]*J_m,J_l[1]*J_n,(J_l[2]-J_l[0])*J_m,(J_l[5]-J_l[3])*J_n,J_h[1]-J_c,J_h[2]-J_d,J_h[3],J_h[4]),this.restore()):this.drawImage(J_i.source,J_l[0]*J_m,J_l[1]*J_n,(J_l[2]-J_l[0])*J_m,(J_l[5]-J_l[3])*J_n,J_h[1]-J_c+J_a,J_h[2]-J_d+J_b,J_h[3],J_h[4]),J_j&&(this.globalAlpha=J_k)}},J_a.fillTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){if(!J_h.pat){if(J_a.uv!=J_ka.DEF_UV){var J_i=new J_va("2D");J_i.getContext("2d"),J_i.size(J_a.width,J_a.height),J_i.context.drawTexture(J_a,0,0,J_a.width,J_a.height,0,0),J_a=new J_ka(J_i)}J_h.pat=this.createPattern(J_a.bitmap.source,J_f)}var J_j=J_b,J_k=J_c,J_l=0,J_m=0;J_g&&(J_j+=J_g.x%J_a.width,J_k+=J_g.y%J_a.height,J_l-=J_g.x%J_a.width,J_m-=J_g.y%J_a.height),this.translate(J_j,J_k),this.fillRect(J_l,J_m,J_d,J_e,J_h.pat),this.translate(-J_j,-J_k)},J_a.drawTriangle=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=J_a.bitmap,J_j=J_i.source,J_k=J_a.width,J_l=J_a.height,J_m=J_i.width,J_n=J_i.height,J_o=J_c[J_d]*J_m,J_p=J_c[J_e]*J_m,J_q=J_c[J_f]*J_m,J_r=J_c[J_d+1]*J_n,J_u=J_c[J_e+1]*J_n,J_v=J_c[J_f+1]*J_n,J_w=J_b[J_d],J_x=J_b[J_e],J_y=J_b[J_f],J_z=J_b[J_d+1],J_A=J_b[J_e+1],J_B=J_b[J_f+1];if(J_h){var J_C=(J_w+J_x+J_y)/3,J_D=(J_z+J_A+J_B)/3,J_E=J_w-J_C,J_F=J_z-J_D,J_G=Math.sqrt(J_E*J_E+J_F*J_F);J_w=J_C+J_E/J_G*(J_G+1),J_z=J_D+J_F/J_G*(J_G+1),J_F=J_A-J_D,J_x=J_C+(J_E=J_x-J_C)/(J_G=Math.sqrt(J_E*J_E+J_F*J_F))*(J_G+1),J_A=J_D+J_F/J_G*(J_G+1),J_F=J_B-J_D,J_y=J_C+(J_E=J_y-J_C)/(J_G=Math.sqrt(J_E*J_E+J_F*J_F))*(J_G+1),J_B=J_D+J_F/J_G*(J_G+1)}this.save(),J_g&&this.transform(J_g.a,J_g.b,J_g.c,J_g.d,J_g.tx,J_g.ty),this.beginPath(),this.moveTo(J_w,J_z),this.lineTo(J_x,J_A),this.lineTo(J_y,J_B),this.closePath(),this.clip();var J_H=1/(J_o*J_u+J_r*J_q+J_p*J_v-J_u*J_q-J_r*J_p-J_o*J_v),J_I=J_w*J_u+J_r*J_y+J_x*J_v-J_u*J_y-J_r*J_x-J_w*J_v,J_J=J_o*J_x+J_w*J_q+J_p*J_y-J_x*J_q-J_w*J_p-J_o*J_y,J_K=J_o*J_u*J_y+J_r*J_x*J_q+J_w*J_p*J_v-J_w*J_u*J_q-J_r*J_p*J_y-J_o*J_x*J_v,J_L=J_z*J_u+J_r*J_B+J_A*J_v-J_u*J_B-J_r*J_A-J_z*J_v,J_M=J_o*J_A+J_z*J_q+J_p*J_B-J_A*J_q-J_z*J_p-J_o*J_B,J_N=J_o*J_u*J_B+J_r*J_A*J_q+J_z*J_p*J_v-J_z*J_u*J_q-J_r*J_p*J_B-J_o*J_A*J_v;this.transform(J_I*J_H,J_L*J_H,J_J*J_H,J_M*J_H,J_K*J_H,J_N*J_H),this.drawImage(J_j,J_a.uv[0]*J_m,J_a.uv[1]*J_n,J_k,J_l,J_a.uv[0]*J_m,J_a.uv[1]*J_n,J_k,J_l),this.restore()},J_a.flush=function(){return 0},J_a.fillWords=function(J_a,J_b,J_c,J_d,J_e,J_f){J_d&&(this.font=J_d),J_e&&(this.fillStyle=J_e);this.textBaseline="top",this.textAlign="left";for(var J_g=0,J_h=J_a.length;J_g<J_h;J_g++){var J_i=J_a[J_g];if(this.__fillText(J_i.char,J_i.x+J_b,J_i.y+J_c),1===J_f){var J_j=J_i.height,J_k=.5*J_i.style.letterSpacing;J_k||(J_k=0),this.beginPath(),this.strokeStyle=J_e,this.lineWidth=1,this.moveTo(J_b+J_i.x-J_k+.5,J_c+J_i.y+J_j+.5),this.lineTo(J_b+J_i.x+J_i.width+J_k+.5,J_c+J_i.y+J_j+.5),this.stroke()}}},J_a.fillBorderWords=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_d&&(this.font=J_d),J_e&&(this.fillStyle=J_e),this.textBaseline="top",this.lineWidth=J_g,this.textAlign="left",this.strokeStyle=J_f;for(var J_h=0,J_i=J_a.length;J_h<J_i;J_h++){var J_j=J_a[J_h];this.__strokeText(J_j.char,J_j.x+J_b,J_j.y+J_c),this.__fillText(J_j.char,J_j.x+J_b,J_j.y+J_c)}},J_a.destroy=function(){this.canvas.width=this.canvas.height=0},J_a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},J_a.drawCurves=function(J_a,J_b,J_c){this.beginPath(),this.strokeStyle=J_c[3],this.lineWidth=J_c[4];var J_d=J_c[2];J_a+=J_c[0],J_b+=J_c[1],this.moveTo(J_a+J_d[0],J_b+J_d[1]);for(var J_e=2,J_f=J_d.length;J_e<J_f;)this.quadraticCurveTo(J_a+J_d[J_e++],J_b+J_d[J_e++],J_a+J_d[J_e++],J_b+J_d[J_e++]);this.stroke()},J_h.__init__=function(J_b){var J_c=laya.resource.Context.prototype;if(!(J_b=J_b||CanvasRenderingContext2D.prototype).inited){J_b.inited=!0,J_b.__fillText=J_b.fillText,J_b.__fillRect=J_b.fillRect,J_b.__strokeText=J_b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(J_a){J_b[J_a]=J_c[J_a]})}},J_h.replaceCanvasGetSet=function(J_a,J_b){var J_c=Object.getOwnPropertyDescriptor(J_a,J_b);if(!J_c||!J_c.configurable)return!1;var J_d,J_e={};for(J_d in J_c)"set"!=J_d&&(J_e[J_d]=J_c[J_d]);var J_f=J_c.set;return J_e.set=function(J_a){J_f.call(this,J_a);var J_b=this.getContext("2d");J_b&&"__reset"in J_b&&J_b.__reset()},Object.defineProperty(J_a,J_b,J_e),!0},J_h.replaceGetSet=function(J_a,J_b){var J_c=Object.getOwnPropertyDescriptor(J_a,J_b);if(!J_c||!J_c.configurable)return!1;var J_d,J_e={};for(J_d in J_c)"set"!=J_d&&(J_e[J_d]=J_c[J_d]);var J_f=J_c.set,J_g="___"+J_b+"__";return J_h.newKeys.push(J_g),J_e.set=function(J_a){J_a!=this[J_g]&&(this[J_g]=J_a,J_f.call(this,J_a))},Object.defineProperty(J_a,J_b,J_e),!0},J_h._default=new J_h,J_h.newKeys=[],J_i(J_h,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),J_h}(),J_N=function(){function J_f(J_a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++J_f._uniqueIDCounter,this._name=J_a||"Content Manager",J_f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,J_f._resourceManagers.push(this),this._resources=[],this._records={}}J_k(J_f,"laya.resource.ResourceManager");var J_a=J_f.prototype;return J_z.imps(J_a,{"laya.resource.IDispose":!0}),J_a.getResourceByIndex=function(J_a){return this._resources[J_a]},J_a.getResourcesLength=function(){return this._resources.length},J_a.addResource=function(J_a){return J_a.resourceManager&&J_a.resourceManager.removeResource(J_a),-1===this._resources.indexOf(J_a)&&((J_a._resourceManager=this)._resources.push(J_a),this.addRecord(J_a.uri,J_a.__className,J_a.memorySize),this.addSize(J_a.memorySize),!0)},J_a.removeResource=function(J_a){var J_b=this._resources.indexOf(J_a);return-1!==J_b&&(this._resources.splice(J_b,1),J_a._resourceManager=null,this._memorySize-=J_a.memorySize,this.addRecord(J_a.uri,J_a.__className,-J_a.memorySize),!0)},J_a.unload=function(){for(var J_a=this._resources.slice(0,this._resources.length),J_b=0;J_b<J_a.length;J_b++){J_a[J_b].destroy()}J_a.length=0},J_a.dispose=function(){if(this===J_f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");J_f._resourceManagers.splice(J_f._resourceManagers.indexOf(this),1),J_f._isResourceManagersSorted=!1;for(var J_a=this._resources.slice(0,this._resources.length),J_b=0;J_b<J_a.length;J_b++){var J_c=J_a[J_b];J_c.resourceManager.removeResource(J_c),J_c.destroy()}J_a.length=0},J_a.addSize=function(J_a){J_a&&(this.autoRelease&&0<J_a&&this._memorySize+J_a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=J_a)},J_a.addRecord=function(J_a,J_b,J_c){DEBUG&&J_c&&!J_a&&console.error(J_a,J_b,J_c),J_a&&(this._records.hasOwnProperty(J_b+"|"+J_a)||(this._records[J_b+"|"+J_a]=0),this._records[J_b+"|"+J_a]+=J_c,DEBUG&&this._records[J_b+"|"+J_a]<0&&console.error(J_a,J_b,this._records[J_b+"|"+J_a]))},J_a.garbageCollection=function(J_a){var J_b=this._resources;(J_b=J_b.slice()).sort(function(J_a,J_b){if(!J_a||!J_b)throw new Error("a或b不能为空！");return J_a.released&&J_b.released?0:J_a.released?1:J_b.released?-1:J_a._lastUseFrameCount-J_b._lastUseFrameCount});for(var J_c=J_X.loopCount,J_d=0,J_e=J_b.length;J_d<J_e;J_d++){var J_f=J_b[J_d];if(!(1<J_c-J_f._lastUseFrameCount))return void(this._memorySize>=J_a&&(this._isOverflow=!0));if(J_f.releaseResource(),this._memorySize<J_a)return void(this._isOverflow=!1)}},J_o(0,J_a,"id",function(){return this._id}),J_o(0,J_a,"name",function(){return this._name},function(J_a){!J_a&&""===J_a||this._name===J_a||(this._name=J_a,J_f._isResourceManagersSorted=!1)}),J_o(0,J_a,"memorySize",function(){return this._memorySize}),J_o(0,J_a,"records",function(){return this._records}),J_o(1,J_f,"systemResourceManager",function(){return J_f._systemResourceManager}),J_f.__init__=function(){J_f.currentResourceManager=J_f.systemResourceManager},J_f.getLoadedResourceManagerByIndex=function(J_a){return J_f._resourceManagers[J_a]},J_f.getLoadedResourceManagersCount=function(){return J_f._resourceManagers.length},J_f.recreateContentManagers=function(J_a){void 0===J_a&&(J_a=!1);for(var J_b=J_f.currentResourceManager,J_c=0;J_c<J_f._resourceManagers.length;J_c++){J_f.currentResourceManager=J_f._resourceManagers[J_c];for(var J_d=0;J_d<J_f.currentResourceManager._resources.length;J_d++)J_f.currentResourceManager._resources[J_d].releaseResource(J_a),J_f.currentResourceManager._resources[J_d].activeResource(J_a)}J_f.currentResourceManager=J_b},J_f.releaseContentManagers=function(J_a){void 0===J_a&&(J_a=!1);for(var J_b=J_f.currentResourceManager,J_c=0;J_c<J_f._resourceManagers.length;J_c++){J_f.currentResourceManager=J_f._resourceManagers[J_c];for(var J_d=0;J_d<J_f.currentResourceManager._resources.length;J_d++){var J_e=J_f.currentResourceManager._resources[J_d];!J_e.released&&J_e.releaseResource(J_a)}}J_f.currentResourceManager=J_b},J_f._uniqueIDCounter=0,J_f._isResourceManagersSorted=!1,J_f._resourceManagers=[],J_i(J_f,["_systemResourceManager",function(){return this._systemResourceManager=new J_f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=J_f._systemResourceManager}]),J_f}(),J_O=(function(){function J_a(){}J_k(J_a,"laya.system.System"),J_a.changeDefinition=function(J_a,J_b){J_z[J_a]=J_b;var J_c=J_a+"=classObj";J_z._runScript(J_c)},J_a.__init__=function(){J_J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function J_c(){}return J_k(J_c,"laya.utils.Browser"),J_o(1,J_c,"pixelRatio",function(){return J_c.__init__(),-1<J_c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:J_F.getPixelRatio()}),J_o(1,J_c,"height",function(){return J_c.__init__(),(J_z.stage&&J_z.stage.canvasRotation?J_c.clientWidth:J_c.clientHeight)*J_c.pixelRatio}),J_o(1,J_c,"clientWidth",function(){return J_c.__init__(),J_c.window.innerWidth||J_c.document.body.clientWidth}),J_o(1,J_c,"window",function(){return J_c.__init__(),J_c._window}),J_o(1,J_c,"clientHeight",function(){return J_c.__init__(),J_c.window.innerHeight||J_c.document.body.clientHeight||J_c.document.documentElement.clientHeight}),J_o(1,J_c,"width",function(){return J_c.__init__(),(J_z.stage&&J_z.stage.canvasRotation?J_c.clientHeight:J_c.clientWidth)*J_c.pixelRatio}),J_o(1,J_c,"container",function(){return J_c.__init__(),J_c._container||((J_c._container=J_c.createElement("div")).id="layaContainer",J_c.document.body.appendChild(J_c._container)),J_c._container},function(J_a){J_c._container=J_a}),J_o(1,J_c,"document",function(){return J_c.__init__(),J_c._document}),J_c.__init__=function(){if(!J_c._window){J_c._window=J_F.getWindow(),J_c._document=J_c.window.document,J_c._window.addEventListener("message",function(J_a){laya.utils.Browser._onMessage(J_a)},!1),J_c.document.__createElement=J_c.document.createElement,J_g.requestAnimationFrame=J_g.requestAnimationFrame||J_g.webkitRequestAnimationFrame||J_g.mozRequestAnimationFrame||J_g.oRequestAnimationFrame||J_g.msRequestAnimationFrame||function(J_a){return J_g.setTimeout(J_a,1e3/60)};var J_a=J_g.document.body.style;J_a["-webkit-user-select"]="none",J_a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",J_c.userAgent=J_c.window.navigator.userAgent,J_c.onIOS=!!(J_c.u=J_c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),J_c.onMobile=-1<J_c.u.indexOf("Mobile"),J_c.onIPhone=-1<J_c.u.indexOf("iPhone"),J_c.onMac=-1<J_c.u.indexOf("Mac OS X"),J_c.onIPad=-1<J_c.u.indexOf("iPad"),J_c.onAndroid=-1<J_c.u.indexOf("Android")||-1<J_c.u.indexOf("Adr"),J_c.onWP=-1<J_c.u.indexOf("Windows Phone"),J_c.onQQBrowser=-1<J_c.u.indexOf("QQBrowser"),J_c.onMQQBrowser=-1<J_c.u.indexOf("MQQBrowser")||-1<J_c.u.indexOf("Mobile")&&-1<J_c.u.indexOf("QQ"),J_c.onIE=!!J_c.window.ActiveXObject||"ActiveXObject"in J_c.window,J_c.onWeiXin=-1<J_c.u.indexOf("MicroMessenger"),J_c.onPC=!J_c.onMobile,J_c.onSafari=-1<J_c.u.indexOf("Safari"),J_c.onFirefox=-1<J_c.u.indexOf("Firefox"),J_c.onEdge=-1<J_c.u.indexOf("Edge"),J_c.onMiniGame=-1<J_c.u.indexOf("MiniGame"),J_c.onLimixiu=-1<J_c.u.indexOf("limixiu"),J_c.httpProtocol="http:"==J_c.window.location.protocol,J_c.onMiniGame&&null==J_c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),J_c.webAudioEnabled=!!(J_c.window.AudioContext||J_c.window.webkitAudioContext||J_c.window.mozAudioContext),J_c.soundType=J_c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",J_ea=J_c.webAudioEnabled?J_fa:J_ca,J_c.webAudioEnabled&&J_fa.initWebAudio(),J_ca._initMusicAudio(),J_c.enableTouch="ontouchstart"in J_g||J_g.DocumentTouch&&J_b instanceof DocumentTouch,J_g.focus(),J_E._soundClass=J_ea,J_E._musicClass=J_ca,J_J._mainCanvas=J_J._mainCanvas||J_va.create("2D"),J_c.canvas||(J_c.canvas=J_va.create("2D"),J_c.context=J_c.canvas.getContext("2d"))}},J_c._onMessage=function(J_a){if(J_a.data&&"size"==J_a.data.name){if(J_c.window.innerWidth=J_a.data.width,J_c.window.innerHeight=J_a.data.height,J_c.window.__innerHeight=J_a.data.clientHeight,!J_c.document.createEvent)return void console.warn("no document.createEvent");var J_b=J_c.document.createEvent("HTMLEvents");return J_b.initEvent("resize",!1,!1),void J_c.window.dispatchEvent(J_b)}},J_c.createElement=function(J_a){return J_c.__init__(),J_c.document.__createElement(J_a)},J_c.getElementById=function(J_a){return J_c.__init__(),J_c.document.getElementById(J_a)},J_c.removeElement=function(J_a){J_a&&J_a.parentNode&&J_a.parentNode.removeChild(J_a)},J_c.now=function(){return J_F.now()},J_c._window=null,J_c._document=null,J_c._container=null,J_c.userAgent=null,J_c.u=null,J_c.onIOS=!1,J_c.onMac=!1,J_c.onMobile=!1,J_c.onIPhone=!1,J_c.onIPad=!1,J_c.onAndroid=!1,J_c.onWP=!1,J_c.onQQBrowser=!1,J_c.onMQQBrowser=!1,J_c.onSafari=!1,J_c.onFirefox=!1,J_c.onEdge=!1,J_c.onIE=!1,J_c.onWeiXin=!1,J_c.onMiniGame=!1,J_c.onLimixiu=!1,J_c.onPC=!1,J_c.httpProtocol=!1,J_c.webAudioEnabled=!1,J_c.soundType=null,J_c.enableTouch=!1,J_c.canvas=null,J_c.context=null,J_c.__init$=function(){},J_c}()),J_P=function(){function J_b(J_a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,J_a?(this._u8d_=new Uint8Array(J_a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}J_k(J_b,"laya.utils.Byte");var J_a=J_b.prototype;return J_a.___resizeBuffer=function(J_b){try{var J_a=new Uint8Array(J_b);null!=this._u8d_&&(this._u8d_.length<=J_b?J_a.set(this._u8d_):J_a.set(this._u8d_.subarray(0,J_b))),this._u8d_=J_a,this._d_=new DataView(J_a.buffer)}catch(J_a){throw"___resizeBuffer err:"+J_b}},J_a.getString=function(){return this.rUTF(this.getUint16())},J_a.getFloat32Array=function(J_a,J_b){var J_c=J_a+J_b;J_c=J_c>this._length?this._length:J_c;var J_d=new Float32Array(this._d_.buffer.slice(J_a,J_c));return this._pos_=J_c,J_d},J_a.getUint8Array=function(J_a,J_b){var J_c=J_a+J_b;J_c=J_c>this._length?this._length:J_c;var J_d=new Uint8Array(this._d_.buffer.slice(J_a,J_c));return this._pos_=J_c,J_d},J_a.getInt16Array=function(J_a,J_b){var J_c=J_a+J_b;J_c=J_c>this._length?this._length:J_c;var J_d=new Int16Array(this._d_.buffer.slice(J_a,J_c));return this._pos_=J_c,J_d},J_a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var J_a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,J_a},J_a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var J_a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,J_a},J_a.writeFloat32=function(J_a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,J_a,this._xd_),this._pos_+=4},J_a.writeFloat64=function(J_a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,J_a,this._xd_),this._pos_+=8},J_a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var J_a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,J_a},J_a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var J_a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,J_a},J_a.writeInt32=function(J_a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,J_a,this._xd_),this._pos_+=4},J_a.writeUint32=function(J_a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,J_a,this._xd_),this._pos_+=4},J_a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var J_a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,J_a},J_a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var J_a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,J_a},J_a.writeUint16=function(J_a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,J_a,this._xd_),this._pos_+=2},J_a.writeInt16=function(J_a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,J_a,this._xd_),this._pos_+=2},J_a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},J_a.writeUint8=function(J_a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,J_a),this._pos_++},J_a._getUInt8=function(J_a){return this._d_.getUint8(J_a)},J_a._getUint16=function(J_a){return this._d_.getUint16(J_a,this._xd_)},J_a._getMatrix=function(){return new J_G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},J_a.rUTF=function(J_a){for(var J_b=[],J_c=this._pos_+J_a,J_d=0,J_e=0,J_f=0,J_g=String.fromCharCode,J_h=this._u8d_;this._pos_<J_c;)(J_d=J_h[this._pos_++])<128?0!=J_d&&J_b.push(J_g(J_d)):J_d<224?J_b.push(J_g((63&J_d)<<6|127&J_h[this._pos_++])):J_d<240?(J_e=J_h[this._pos_++],J_b.push(J_g((31&J_d)<<12|(127&J_e)<<6|127&J_h[this._pos_++]))):(J_e=J_h[this._pos_++],J_f=J_h[this._pos_++],J_b.push(J_g((15&J_d)<<18|(127&J_e)<<12|J_f<<6&127|127&J_h[this._pos_++]))),0;return J_b.join("")},J_a.getCustomString=function(J_a){for(var J_b=[],J_c=0,J_d=0,J_e=0,J_f=String.fromCharCode,J_g=this._u8d_;0<J_a;)if((J_d=J_g[this._pos_])<128)J_b.push(J_f(J_d)),this._pos_++,J_a--;else for(J_c=J_d-128,this._pos_++,J_a-=J_c;0<J_c;)J_d=J_g[this._pos_++],J_e=J_g[this._pos_++],J_b.push(J_f(J_e<<8|J_d)),J_c--;return J_b.join("")},J_a.clear=function(){this._pos_=0,this.length=0},J_a.__getBuffer=function(){return this._d_.buffer},J_a.writeUTFBytes=function(J_a){for(var J_b=0,J_c=(J_a+="").length;J_b<J_c;J_b++){var J_d=J_a.charCodeAt(J_b);J_d<=127?this.writeByte(J_d):J_d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|J_d>>6,128|63&J_d],this._pos_),this._pos_+=2):J_d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|J_d>>12,128|J_d>>6&63,128|63&J_d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|J_d>>18,128|J_d>>12&63,128|J_d>>6&63,128|63&J_d],this._pos_),this._pos_+=4)}},J_a.writeUTFString=function(J_a){var J_b=this.pos;this.writeUint16(1),this.writeUTFBytes(J_a);var J_c=this.pos-J_b-2;if(65536<=J_c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(J_b,J_c,this._xd_)},J_a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},J_a.getUTFString=function(){return this.readUTFString()},J_a.readUTFBytes=function(J_a){if(void 0===J_a&&(J_a=-1),0==J_a)return"";var J_b=this.bytesAvailable;if(J_b<J_a)throw"readUTFBytes error - Out of bounds";return J_a=0<J_a?J_a:J_b,this.rUTF(J_a)},J_a.getUTFBytes=function(J_a){return void 0===J_a&&(J_a=-1),this.readUTFBytes(J_a)},J_a.writeByte=function(J_a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,J_a),this._pos_+=1},J_a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},J_a.getByte=function(){return this.readByte()},J_a.ensureWrite=function(J_a){this._length<J_a&&(this._length=J_a),this._allocated_<J_a&&(this.length=J_a)},J_a.writeArrayBuffer=function(J_a,J_b,J_c){if(void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),J_b<0||J_c<0)throw"writeArrayBuffer error - Out of bounds";0==J_c&&(J_c=J_a.byteLength-J_b),this.ensureWrite(this._pos_+J_c);var J_d=new Uint8Array(J_a);this._u8d_.set(J_d.subarray(J_b,J_b+J_c),this._pos_),this._pos_+=J_c},J_o(0,J_a,"buffer",function(){var J_a=this._d_.buffer;return J_a.byteLength==this.length?J_a:J_a.slice(0,this.length)}),J_o(0,J_a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(J_a){this._xd_="littleEndian"==J_a}),J_o(0,J_a,"length",function(){return this._length},function(J_a){this._allocated_<J_a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(J_a,2*this._allocated_))):this._allocated_>J_a&&this.___resizeBuffer(this._allocated_=J_a),this._length=J_a}),J_o(0,J_a,"pos",function(){return this._pos_},function(J_a){this._pos_=J_a}),J_o(0,J_a,"bytesAvailable",function(){return this._length-this._pos_}),J_b.getSystemEndian=function(){if(!J_b._sysEndian){var J_a=new ArrayBuffer(2);new DataView(J_a).setInt16(0,256,!0),J_b._sysEndian=256===new Int16Array(J_a)[0]?"littleEndian":"bigEndian"}return J_b._sysEndian},J_b.BIG_ENDIAN="bigEndian",J_b.LITTLE_ENDIAN="littleEndian",J_b._sysEndian=null,J_b}(),J_Q=function(){function J_e(){}return J_k(J_e,"laya.utils.CacheManager"),J_e.regCacheByFunction=function(J_a,J_b){var J_c;J_e.unRegCacheByFunction(J_a,J_b),J_c={tryDispose:J_a,getCacheList:J_b},J_e._cacheList.push(J_c)},J_e.unRegCacheByFunction=function(J_a,J_b){var J_c,J_d=0;for(J_c=J_e._cacheList.length,J_d=0;J_d<J_c;J_d++)if(J_e._cacheList[J_d].tryDispose==J_a&&J_e._cacheList[J_d].getCacheList==J_b)return void J_e._cacheList.splice(J_d,1)},J_e.forceDispose=function(){var J_a=0,J_b=J_e._cacheList.length;for(J_a=0;J_a<J_b;J_a++)J_e._cacheList[J_a].tryDispose(!0)},J_e.beginCheck=function(J_a){void 0===J_a&&(J_a=15e3),J_z.timer.loop(J_a,null,J_e._checkLoop)},J_e.stopCheck=function(){J_z.timer.clear(null,J_e._checkLoop)},J_e._checkLoop=function(){var J_a=J_e._cacheList;if(!(J_a.length<1)){var J_b,J_c=J_O.now(),J_d=0;for(J_b=J_d=J_a.length;0<J_d&&(J_a[J_e._index=++J_e._index%J_b].tryDispose(!1),!(J_O.now()-J_c>J_e.loopTimeLimit));)J_d--}},J_e.loopTimeLimit=2,J_e._cacheList=[],J_e._index=0,J_e}(),J_R=function(){function J_n(){}return J_k(J_n,"laya.utils.ClassUtils"),J_n.regClass=function(J_a,J_b){J_n._classMap[J_a]=J_b},J_n.getRegClass=function(J_a){return J_n._classMap[J_a]},J_n.getInstance=function(J_a){var J_b=J_n.getClass(J_a);return J_b?new J_b:(console.warn("[error] Undefined class:",J_a),null)},J_n.createByJson=function(J_a,J_b,J_c,J_d,J_e){"string"==typeof J_a&&(J_a=JSON.parse(J_a));var J_f=J_a.props;if(!J_b&&!(J_b=J_e?J_e.runWith(J_a):J_n.getInstance(J_f.runtime||J_a.type)))return null;var J_g=J_a.child;if(J_g)for(var J_h=0,J_i=J_g.length;J_h<J_i;J_h++){var J_j=J_g[J_h];if("render"!==J_j.props.name&&"render"!==J_j.props.renderType||!J_b._$set_itemRender)if("Graphic"==J_j.type)J_n.addGraphicsToSprite(J_j,J_b);else if(J_n.isDrawType(J_j.type))J_n.addGraphicToSprite(J_j,J_b,!0);else{var J_k=J_n.createByJson(J_j,null,J_c,J_d,J_e);"Script"==J_j.type?J_k.hasOwnProperty("owner")?J_k.owner=J_b:J_k.hasOwnProperty("target")&&(J_k.target=J_b):"mask"==J_j.props.renderType?J_b.mask=J_k:J_b.addChild(J_k)}else J_b.itemRender=J_j}if(J_f)for(var J_l in J_f){var J_m=J_f[J_l];"var"===J_l&&J_c?J_c[J_m]=J_b:J_m instanceof Array&&"function"==typeof J_b[J_l]?J_b[J_l].apply(J_b,J_m):J_b[J_l]=J_m}return J_d&&J_a.customProps&&J_d.runWith([J_b,J_a]),J_b.created&&J_b.created(),J_b},J_n.addGraphicsToSprite=function(J_a,J_b){var J_c;if((J_c=J_a.child)&&!(J_c.length<1)){var J_d;J_d=J_n._getGraphicsFromSprite(J_a,J_b);var J_e=0,J_f=0;J_a.props&&(J_e=J_n._getObjVar(J_a.props,"x",0),J_f=J_n._getObjVar(J_a.props,"y",0)),0!=J_e&&0!=J_f&&J_d.translate(J_e,J_f);var J_g,J_h=0;for(J_g=J_c.length,J_h=0;J_h<J_g;J_h++)J_n._addGraphicToGraphics(J_c[J_h],J_d);0!=J_e&&0!=J_f&&J_d.translate(-J_e,-J_f)}},J_n.addGraphicToSprite=function(J_a,J_b,J_c){var J_d;void 0===J_c&&(J_c=!1),J_d=J_c?J_n._getGraphicsFromSprite(J_a,J_b):J_b.graphics,J_n._addGraphicToGraphics(J_a,J_d)},J_n._getGraphicsFromSprite=function(J_a,J_b){var J_c,J_d;if(!J_a||!J_a.props)return J_b.graphics;switch(J_d=J_a.props.renderType){case"hit":case"unHit":var J_e;J_b.hitArea||(J_b.hitArea=new J_V),(J_e=J_b.hitArea)[J_d]||(J_e[J_d]=new J_m),J_c=J_e[J_d]}return J_c||(J_c=J_b.graphics),J_c},J_n._getTransformData=function(J_a){var J_b;(J_a.hasOwnProperty("pivotX")||J_a.hasOwnProperty("pivotY"))&&(J_b=J_b||new J_G).translate(-J_n._getObjVar(J_a,"pivotX",0),-J_n._getObjVar(J_a,"pivotY",0));var J_c=J_n._getObjVar(J_a,"scaleX",1),J_d=J_n._getObjVar(J_a,"scaleY",1),J_e=J_n._getObjVar(J_a,"rotation",0);J_n._getObjVar(J_a,"skewX",0),J_n._getObjVar(J_a,"skewY",0);return 1==J_c&&1==J_d&&0==J_e||((J_b=J_b||new J_G).scale(J_c,J_d),J_b.rotate(.0174532922222222*J_e)),J_b},J_n._addGraphicToGraphics=function(J_a,J_b){var J_c,J_d;if((J_c=J_a.props)&&(J_d=J_n.DrawTypeDic[J_a.type])){var J_e,J_f;J_e=J_b;var J_g=J_n._getParams(J_c,J_d[1],J_d[2],J_d[3]);((J_f=J_n._tM)||1!=J_n._alpha)&&(J_e.save(),J_f&&J_e.transform(J_f),1!=J_n._alpha&&J_e.alpha(J_n._alpha)),J_e[J_d[0]].apply(J_e,J_g),(J_f||1!=J_n._alpha)&&J_e.restore()}},J_n._adptLineData=function(J_a){return J_a[2]=parseFloat(J_a[0])+parseFloat(J_a[2]),J_a[3]=parseFloat(J_a[1])+parseFloat(J_a[3]),J_a},J_n._adptTextureData=function(J_a){return J_a[0]=J_ha.getRes(J_a[0]),J_a},J_n._adptLinesData=function(J_a){return J_a[2]=J_n._getPointListByStr(J_a[2]),J_a},J_n.isDrawType=function(J_a){return"Image"!=J_a&&J_n.DrawTypeDic.hasOwnProperty(J_a)},J_n._getParams=function(J_a,J_b,J_c,J_d){var J_e;void 0===J_c&&(J_c=0),(J_e=J_n._temParam).length=J_b.length;var J_f,J_g,J_h=0;for(J_f=J_b.length,J_h=0;J_h<J_f;J_h++)J_e[J_h]=J_n._getObjVar(J_a,J_b[J_h][0],J_b[J_h][1]);return J_n._alpha=J_n._getObjVar(J_a,"alpha",1),J_g=J_n._getTransformData(J_a),J_n._tM=J_g?(J_c||(J_c=0),J_g.translate(J_e[J_c],J_e[J_c+1]),J_e[J_c]=J_e[J_c+1]=0,J_g):null,J_d&&J_n[J_d]&&(J_e=J_n[J_d](J_e)),J_e},J_n._getPointListByStr=function(J_a){var J_b,J_c,J_d=0;for(J_c=(J_b=J_a.split(",")).length,J_d=0;J_d<J_c;J_d++)J_b[J_d]=parseFloat(J_b[J_d]);return J_b},J_n._getObjVar=function(J_a,J_b,J_c){return J_a.hasOwnProperty(J_b)?J_a[J_b]:J_c},J_n._temParam=[],J_n._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},J_n.getClass=function(J_a){var J_b=J_n._classMap[J_a]||J_a;return"string"==typeof J_b?J_z.__classmap[J_b]:J_b},J_n._tM=null,J_n._alpha=NaN,J_i(J_n,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),J_n}(),J_S=function(){function J_f(J_a){if(this._color=[],"string"==typeof J_a){null===(this.strColor=J_a)&&(J_a="#000000"),"#"==J_a.charAt(0)&&(J_a=J_a.substr(1));var J_b=J_a.length;if(3==J_b||4==J_b){for(var J_c="",J_d=0;J_d<J_b;J_d++)J_c+=J_a[J_d]+J_a[J_d];J_a=J_c}var J_e=this.numColor=parseInt(J_a,16);if(8==J_a.length)return void(this._color=[parseInt(J_a.substr(0,2),16)/255,((16711680&J_e)>>16)/255,((65280&J_e)>>8)/255,(255&J_e)/255])}else J_e=this.numColor=J_a,this.strColor=J_$.toHexColor(J_e);this._color=[((16711680&J_e)>>16)/255,((65280&J_e)>>8)/255,(255&J_e)/255,1],this._color.__id=++J_f._COLODID}return J_k(J_f,"laya.utils.Color"),J_f._initDefault=function(){for(var J_a in J_f._DEFAULT={},J_f._COLOR_MAP)J_f._SAVE[J_a]=J_f._DEFAULT[J_a]=new J_f(J_f._COLOR_MAP[J_a]);return J_f._DEFAULT},J_f._initSaveMap=function(){for(var J_a in J_f._SAVE_SIZE=0,J_f._SAVE={},J_f._DEFAULT)J_f._SAVE[J_a]=J_f._DEFAULT[J_a]},J_f.create=function(J_a){var J_b=J_f._SAVE[J_a+""];return null!=J_b?J_b:(J_f._SAVE_SIZE<1e3||J_f._initSaveMap(),J_f._SAVE[J_a+""]=new J_f(J_a))},J_f._SAVE={},J_f._SAVE_SIZE=0,J_f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},J_f._DEFAULT=J_f._initDefault(),J_f._COLODID=1,J_f}(),J_T=(function(){function J_a(){this._values=[],this._keys=[]}J_k(J_a,"laya.utils.Dictionary");var J_b=J_a.prototype;J_b.set=function(J_a,J_b){var J_c=this.indexOf(J_a);0<=J_c?this._values[J_c]=J_b:(this._keys.push(J_a),this._values.push(J_b))},J_b.indexOf=function(J_a){var J_b=this._keys.indexOf(J_a);return 0<=J_b?J_b:(J_a="string"==typeof J_a?Number(J_a):"number"==typeof J_a?J_a.toString():J_a,this._keys.indexOf(J_a))},J_b.get=function(J_a){var J_b=this.indexOf(J_a);return J_b<0?null:this._values[J_b]},J_b.remove=function(J_a){var J_b=this.indexOf(J_a);return 0<=J_b&&(this._keys.splice(J_b,1),this._values.splice(J_b,1),!0)},J_b.clear=function(){this._values.length=0,this._keys.length=0},J_o(0,J_b,"values",function(){return this._values}),J_o(0,J_b,"keys",function(){return this._keys})}(),function(){function J_a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}J_k(J_a,"laya.utils.Dragging");var J_b=J_a.prototype;return J_b.start=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){void 0===J_h&&(J_h=.92),this.clearTimer(),this.target=J_a,this.area=J_b,this.hasInertia=J_c,this.elasticDistance=J_b?J_d:0,this.elasticBackTime=J_e,this.data=J_f,this._disableMouseEvent=J_g,this.ratio=J_h,1!=J_a.globalScaleX||1!=J_a.globalScaleY?this._parent=J_a.parent:this._parent=J_z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,J_z.stage.on("mouseup",this,this.onStageMouseUp),J_z.stage.on("mouseout",this,this.onStageMouseUp),J_z.timer.frameLoop(1,this,this.loop)},J_b.clearTimer=function(){J_z.timer.clear(this,this.loop),J_z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},J_b.stop=function(){this._dragging&&(J_p.instance.disableMouseEvent=!1,J_z.stage.off("mouseup",this,this.onStageMouseUp),J_z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},J_b.loop=function(){var J_a=this._parent.getMousePoint(),J_b=J_a.x,J_c=J_a.y,J_d=J_b-this._lastX,J_e=J_c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(J_d*J_z.stage._canvasTransform.getScaleX())||1<Math.abs(J_e*J_z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),J_p.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(J_d,J_e);0==J_d&&0==J_e||(this._lastX=J_b,this._lastY=J_c,this.target.x+=J_d*this._elasticRateX,this.target.y+=J_e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},J_b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var J_a=this.area.x-this.target.x;else J_a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-J_a/this.elasticDistance),this.target.y<this.area.y)var J_b=this.area.y-this.target.y;else J_b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-J_b/this.elasticDistance)}},J_b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},J_b.onStageMouseUp=function(J_a){if(J_p.instance.disableMouseEvent=!1,J_z.stage.off("mouseup",this,this.onStageMouseUp),J_z.stage.off("mouseout",this,this.onStageMouseUp),J_z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var J_b=this._offsets.length,J_c=Math.min(J_b,6),J_d=this._offsets.length-J_c,J_e=J_b-1;J_d<J_e;J_e--)this._offsetY+=this._offsets[J_e--],this._offsetX+=this._offsets[J_e];this._offsetX=this._offsetX/J_c*2,this._offsetY=this._offsetY/J_c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),J_z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},J_b.checkElastic=function(){var J_a=NaN,J_b=NaN;if(this.target.x<this.area.x?J_a=this.area.x:this.target.x>this.area.x+this.area.width&&(J_a=this.area.x+this.area.width),this.target.y<this.area.y?J_b=this.area.y:this.target.y>this.area.y+this.area.height&&(J_b=this.area.y+this.area.height),isNaN(J_a)&&isNaN(J_b))this.clear();else{var J_c={};isNaN(J_a)||(J_c.x=J_a),isNaN(J_b)||(J_c.y=J_b),this._tween=J_Z.to(this.target,J_c,this.elasticBackTime,J_U.sineOut,J_u.create(this,this.clear),0,!1,!1)}},J_b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(J_z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},J_b.clear=function(){if(this.target){this.clearTimer();var J_a=this.target;this.target=null,this._parent=null,J_a.event("dragend",this.data)}},J_a}()),J_U=function(){function J_h(){}return J_k(J_h,"laya.utils.Ease"),J_h.linearNone=function(J_a,J_b,J_c,J_d){return J_c*J_a/J_d+J_b},J_h.linearIn=function(J_a,J_b,J_c,J_d){return J_c*J_a/J_d+J_b},J_h.linearInOut=function(J_a,J_b,J_c,J_d){return J_c*J_a/J_d+J_b},J_h.linearOut=function(J_a,J_b,J_c,J_d){return J_c*J_a/J_d+J_b},J_h.bounceIn=function(J_a,J_b,J_c,J_d){return J_c-J_h.bounceOut(J_d-J_a,0,J_c,J_d)+J_b},J_h.bounceInOut=function(J_a,J_b,J_c,J_d){return J_a<.5*J_d?.5*J_h.bounceIn(2*J_a,0,J_c,J_d)+J_b:.5*J_h.bounceOut(2*J_a-J_d,0,J_c,J_d)+.5*J_c+J_b},J_h.bounceOut=function(J_a,J_b,J_c,J_d){return(J_a/=J_d)<1/2.75?J_c*(7.5625*J_a*J_a)+J_b:J_a<2/2.75?J_c*(7.5625*(J_a-=1.5/2.75)*J_a+.75)+J_b:J_a<2.5/2.75?J_c*(7.5625*(J_a-=2.25/2.75)*J_a+.9375)+J_b:J_c*(7.5625*(J_a-=2.625/2.75)*J_a+.984375)+J_b},J_h.backIn=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=1.70158),J_c*(J_a/=J_d)*J_a*((J_e+1)*J_a-J_e)+J_b},J_h.backInOut=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=1.70158),(J_a/=.5*J_d)<1?.5*J_c*(J_a*J_a*((1+(J_e*=1.525))*J_a-J_e))+J_b:J_c/2*((J_a-=2)*J_a*((1+(J_e*=1.525))*J_a+J_e)+2)+J_b},J_h.backOut=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=1.70158),J_c*((J_a=J_a/J_d-1)*J_a*((J_e+1)*J_a+J_e)+1)+J_b},J_h.elasticIn=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g;return void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=0),0==J_a?J_b:1==(J_a/=J_d)?J_b+J_c:(J_f||(J_f=.3*J_d),J_g=!J_e||0<J_c&&J_e<J_c||J_c<0&&J_e<-J_c?(J_e=J_c,J_f/4):J_f/J_h.PI2*Math.asin(J_c/J_e),-J_e*Math.pow(2,10*(J_a-=1))*Math.sin((J_a*J_d-J_g)*J_h.PI2/J_f)+J_b)},J_h.elasticInOut=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g;return void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=0),0==J_a?J_b:2==(J_a/=.5*J_d)?J_b+J_c:(J_f||(J_f=J_d*(.3*1.5)),J_g=!J_e||0<J_c&&J_e<J_c||J_c<0&&J_e<-J_c?(J_e=J_c,J_f/4):J_f/J_h.PI2*Math.asin(J_c/J_e),J_a<1?J_e*Math.pow(2,10*(J_a-=1))*Math.sin((J_a*J_d-J_g)*J_h.PI2/J_f)*-.5+J_b:J_e*Math.pow(2,-10*(J_a-=1))*Math.sin((J_a*J_d-J_g)*J_h.PI2/J_f)*.5+J_c+J_b)},J_h.elasticOut=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g;return void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=0),0==J_a?J_b:1==(J_a/=J_d)?J_b+J_c:(J_f||(J_f=.3*J_d),J_g=!J_e||0<J_c&&J_e<J_c||J_c<0&&J_e<-J_c?(J_e=J_c,J_f/4):J_f/J_h.PI2*Math.asin(J_c/J_e),J_e*Math.pow(2,-10*J_a)*Math.sin((J_a*J_d-J_g)*J_h.PI2/J_f)+J_c+J_b)},J_h.strongIn=function(J_a,J_b,J_c,J_d){return J_c*(J_a/=J_d)*J_a*J_a*J_a*J_a+J_b},J_h.strongInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*J_c*J_a*J_a*J_a*J_a*J_a+J_b:.5*J_c*((J_a-=2)*J_a*J_a*J_a*J_a+2)+J_b},J_h.strongOut=function(J_a,J_b,J_c,J_d){return J_c*((J_a=J_a/J_d-1)*J_a*J_a*J_a*J_a+1)+J_b},J_h.sineInOut=function(J_a,J_b,J_c,J_d){return.5*-J_c*(Math.cos(Math.PI*J_a/J_d)-1)+J_b},J_h.sineIn=function(J_a,J_b,J_c,J_d){return-J_c*Math.cos(J_a/J_d*J_h.HALF_PI)+J_c+J_b},J_h.sineOut=function(J_a,J_b,J_c,J_d){return J_c*Math.sin(J_a/J_d*J_h.HALF_PI)+J_b},J_h.quintIn=function(J_a,J_b,J_c,J_d){return J_c*(J_a/=J_d)*J_a*J_a*J_a*J_a+J_b},J_h.quintInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*J_c*J_a*J_a*J_a*J_a*J_a+J_b:.5*J_c*((J_a-=2)*J_a*J_a*J_a*J_a+2)+J_b},J_h.quintOut=function(J_a,J_b,J_c,J_d){return J_c*((J_a=J_a/J_d-1)*J_a*J_a*J_a*J_a+1)+J_b},J_h.quartIn=function(J_a,J_b,J_c,J_d){return J_c*(J_a/=J_d)*J_a*J_a*J_a+J_b},J_h.quartInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*J_c*J_a*J_a*J_a*J_a+J_b:.5*-J_c*((J_a-=2)*J_a*J_a*J_a-2)+J_b},J_h.quartOut=function(J_a,J_b,J_c,J_d){return-J_c*((J_a=J_a/J_d-1)*J_a*J_a*J_a-1)+J_b},J_h.cubicIn=function(J_a,J_b,J_c,J_d){return J_c*(J_a/=J_d)*J_a*J_a+J_b},J_h.cubicInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*J_c*J_a*J_a*J_a+J_b:.5*J_c*((J_a-=2)*J_a*J_a+2)+J_b},J_h.cubicOut=function(J_a,J_b,J_c,J_d){return J_c*((J_a=J_a/J_d-1)*J_a*J_a+1)+J_b},J_h.quadIn=function(J_a,J_b,J_c,J_d){return J_c*(J_a/=J_d)*J_a+J_b},J_h.quadInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*J_c*J_a*J_a+J_b:.5*-J_c*(--J_a*(J_a-2)-1)+J_b},J_h.quadOut=function(J_a,J_b,J_c,J_d){return-J_c*(J_a/=J_d)*(J_a-2)+J_b},J_h.expoIn=function(J_a,J_b,J_c,J_d){return 0==J_a?J_b:J_c*Math.pow(2,10*(J_a/J_d-1))+J_b-.001*J_c},J_h.expoInOut=function(J_a,J_b,J_c,J_d){return 0==J_a?J_b:J_a==J_d?J_b+J_c:(J_a/=.5*J_d)<1?.5*J_c*Math.pow(2,10*(J_a-1))+J_b:.5*J_c*(2-Math.pow(2,-10*--J_a))+J_b},J_h.expoOut=function(J_a,J_b,J_c,J_d){return J_a==J_d?J_b+J_c:J_c*(1-Math.pow(2,-10*J_a/J_d))+J_b},J_h.circIn=function(J_a,J_b,J_c,J_d){return-J_c*(Math.sqrt(1-(J_a/=J_d)*J_a)-1)+J_b},J_h.circInOut=function(J_a,J_b,J_c,J_d){return(J_a/=.5*J_d)<1?.5*-J_c*(Math.sqrt(1-J_a*J_a)-1)+J_b:.5*J_c*(Math.sqrt(1-(J_a-=2)*J_a)+1)+J_b},J_h.circOut=function(J_a,J_b,J_c,J_d){return J_c*Math.sqrt(1-(J_a=J_a/J_d-1)*J_a)+J_b},J_h.HALF_PI=.5*Math.PI,J_h.PI2=2*Math.PI,J_h}(),J_V=function(){function J_l(){this._hit=null,this._unHit=null}J_k(J_l,"laya.utils.HitArea");var J_a=J_l.prototype;return J_a.isHit=function(J_a,J_b){return!!J_l.isHitGraphic(J_a,J_b,this.hit)&&!J_l.isHitGraphic(J_a,J_b,this.unHit)},J_a.contains=function(J_a,J_b){return this.isHit(J_a,J_b)},J_o(0,J_a,"hit",function(){return this._hit||(this._hit=new J_m),this._hit},function(J_a){this._hit=J_a}),J_o(0,J_a,"unHit",function(){return this._unHit||(this._unHit=new J_m),this._unHit},function(J_a){this._unHit=J_a}),J_l.isHitGraphic=function(J_a,J_b,J_c){if(!J_c)return!1;var J_d;if(!(J_d=J_c.cmds)&&J_c._one&&((J_d=J_l._cmds).length=1,J_d[0]=J_c._one),!J_d)return!1;var J_e,J_f,J_g=0;for(J_e=J_d.length,J_g=0;J_g<J_e;J_g++)if(J_f=J_d[J_g]){var J_h=J_J._context;switch(J_f.callee){case J_h._translate:case 6:J_a-=J_f[0],J_b-=J_f[1]}if(J_l.isHitCmd(J_a,J_b,J_f))return!0}return!1},J_l.isHitCmd=function(J_a,J_b,J_c){if(!J_c)return!1;var J_d=J_J._context,J_e=!1;switch(J_c.callee){case J_d._drawRect:case 13:J_l._rec.setTo(J_c[0],J_c[1],J_c[2],J_c[3]),J_e=J_l._rec.contains(J_a,J_b);break;case J_d._drawCircle:case J_d._fillCircle:case 14:J_e=(J_a-=J_c[0])*J_a+(J_b-=J_c[1])*J_b<J_c[2]*J_c[2];break;case J_d._drawPoly:case 18:J_a-=J_c[0],J_b-=J_c[1],J_e=J_l.ptInPolygon(J_a,J_b,J_c[2])}return J_e},J_l.ptInPolygon=function(J_a,J_b,J_c){var J_d;(J_d=J_l._ptPoint).setTo(J_a,J_b);var J_e,J_f=0,J_g=NaN,J_h=NaN,J_i=NaN,J_j=NaN;J_e=J_c.length;for(var J_k=0;J_k<J_e;J_k+=2){if(J_g=J_c[J_k],J_h=J_c[J_k+1],J_i=J_c[(J_k+2)%J_e],J_h!=(J_j=J_c[(J_k+3)%J_e]))if(!(J_d.y<Math.min(J_h,J_j)))if(!(J_d.y>=Math.max(J_h,J_j)))(J_d.y-J_h)*(J_i-J_g)/(J_j-J_h)+J_g>J_d.x&&J_f++}return J_f%2==1},J_l._cmds=[],J_i(J_l,["_rec",function(){return this._rec=new J_B},"_ptPoint",function(){return this._ptPoint=new J_A}]),J_l}(),J_W=(function(){function J_e(J_a,J_b,J_c,J_d){this.char=J_a,this.charNum=J_a.charCodeAt(0),this._x=this._y=0,this.width=J_b,this.height=J_c,this.style=J_d,this.isWord=!J_e._isWordRegExp.test(J_a)}J_k(J_e,"laya.utils.HTMLChar");var J_a=J_e.prototype;J_z.imps(J_a,{"laya.display.ILayout":!0}),J_a.setSprite=function(J_a){this._sprite=J_a},J_a.getSprite=function(){return this._sprite},J_a._isChar=function(){return!0},J_a._getCSSStyle=function(){return this.style},J_o(0,J_a,"width",function(){return this._w},function(J_a){this._w=J_a}),J_o(0,J_a,"x",function(){return this._x},function(J_a){this._sprite&&(this._sprite.x=J_a),this._x=J_a}),J_o(0,J_a,"y",function(){return this._y},function(J_a){this._sprite&&(this._sprite.y=J_a),this._y=J_a}),J_o(0,J_a,"height",function(){return this._h},function(J_a){this._h=J_a}),J_e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function J_b(){}J_k(J_b,"laya.utils.Log"),J_b.enable=function(){J_b._logdiv||(J_b._logdiv=J_O.window.document.createElement("div"),J_O.window.document.body.appendChild(J_b._logdiv),J_b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},J_b.toggle=function(){var J_a=J_b._logdiv.style;"1px"==J_a.width?J_a.width=J_a.height="50%":J_a.width=J_a.height="1px"},J_b.print=function(J_a){J_b._logdiv&&(J_b.maxCount<=J_b._count&&J_b.clear(),J_b._count++,J_b._logdiv.innerText+=J_a+"\n",J_b._logdiv.scrollTop=J_b._logdiv.scrollHeight)},J_b.clear=function(){J_b._logdiv.innerText="",J_b._count=0},J_b._logdiv=null,J_b._count=0,J_b.maxCount=20}(),function(){function J_b(){}J_k(J_b,"laya.utils.Mouse"),J_o(1,J_b,"cursor",function(){return J_b._style.cursor},function(J_a){J_b._style.cursor=J_a}),J_b.hide=function(){"none"!=J_b.cursor&&(J_b._preCursor=J_b.cursor,J_b.cursor="none")},J_b.show=function(){"none"==J_b.cursor&&(J_b.cursor=J_b._preCursor?J_b._preCursor:"auto")},J_b._preCursor=null,J_i(J_b,["_style",function(){return this._style=J_O.document.body.style}])}(),function(){function J_f(){}return J_k(J_f,"laya.utils.Pool"),J_f.getPoolBySign=function(J_a){return J_f._poolDic[J_a]||(J_f._poolDic[J_a]=[])},J_f.clearBySign=function(J_a){J_f._poolDic[J_a]&&(J_f._poolDic[J_a].length=0)},J_f.recover=function(J_a,J_b){J_b.__InPool||(J_b.__InPool=!0,J_f.getPoolBySign(J_a).push(J_b))},J_f.getItemByClass=function(J_a,J_b){var J_c=J_f.getPoolBySign(J_a),J_d=J_c.length?J_c.pop():new J_b;return J_d.__InPool=!1,J_d},J_f.getItemByCreateFun=function(J_a,J_b,J_c){var J_d=J_f.getPoolBySign(J_a),J_e=J_d.length?J_d.pop():J_b.call(J_c);return J_e.__InPool=!1,J_e},J_f.getItem=function(J_a){var J_b=J_f.getPoolBySign(J_a),J_c=J_b.length?J_b.pop():null;return J_c&&(J_c.__InPool=!1),J_c},J_f._poolDic={},J_f.InPoolSign="__InPool",J_f}()),J_X=function(){function J_i(){}return J_k(J_i,"laya.utils.Stat"),J_o(1,J_i,"onclick",null,function(J_a){J_i._sp&&J_i._sp.on("click",J_i._sp,J_a),J_i._canvas&&(J_i._canvas.source.onclick=J_a,J_i._canvas.source.style.pointerEvents="")}),J_i.show=function(J_a,J_b,J_c){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),!J_J.isConchApp||J_J.isConchWebGL){if(J_J.isConchWebGL||J_O.onMiniGame||J_O.onLimixiu||(J_i._useCanvas=!0),J_i._show=!0,J_i._fpsData.length=60,J_i._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},J_i._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},J_i._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},J_i._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},J_J.isWebGL)if(J_i._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},J_J.is3DMode){if(J_i._view[0].title="FPS(3D)",J_i._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},J_i._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},J_i._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==J_c){var J_d=8;J_i._view[J_d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},J_i._view[J_d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},J_i._view[J_d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==J_c){J_d=8;J_i._view[J_d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},J_i._view[J_d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else J_i._view[0].title="FPS(WebGL)",J_i._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else J_i._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};J_i._useCanvas?J_i.createUIPre(J_a,J_b):J_i.createUI(J_a,J_b),J_i.enable()}else J_O.window.conch.showFPS&&J_O.window.conch.showFPS(J_a,J_b)},J_i.createUIPre=function(J_a,J_b){var J_c=J_O.pixelRatio;J_i._width=170*J_c,J_i._vx=75*J_c,J_i._height=J_c*(12*J_i._view.length+3*J_c)+4,J_i._fontSize=12*J_c;for(var J_d=0;J_d<J_i._view.length;J_d++)J_i._view[J_d].x=4,J_i._view[J_d].y=J_d*J_i._fontSize+2*J_c;J_i._canvas||((J_i._canvas=new J_va("2D")).size(J_i._width,J_i._height),(J_i._ctx=J_i._canvas.getContext("2d")).textBaseline="top",J_i._ctx.font=J_i._fontSize+"px Sans-serif",J_i._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+J_a+"px;top:"+J_b+"px;width:"+J_i._width/J_c+"px;height:"+J_i._height/J_c+"px;"),J_i._first=!0,J_i.loop(),J_i._first=!1,J_O.container.appendChild(J_i._canvas.source)},J_i.createUI=function(J_a,J_b){var J_c=J_i._sp,J_d=J_O.pixelRatio;J_c||(J_c=new J_la,(J_i._leftText=new J_qa).pos(5,5),J_i._leftText.color="#ffffff",J_c.addChild(J_i._leftText),(J_i._txt=new J_qa).pos(80*J_d,5),J_i._txt.color="#ffffff",J_c.addChild(J_i._txt),J_i._sp=J_c),J_c.pos(J_a,J_b);for(var J_e="",J_f=0;J_f<J_i._view.length;J_f++){J_e+=J_i._view[J_f].title+"\n"}J_i._leftText.text=J_e;var J_g=170*J_d,J_h=J_d*(12*J_i._view.length+3*J_d)+4;J_i._txt.fontSize=J_i._fontSize*J_d,J_i._leftText.fontSize=J_i._fontSize*J_d,J_c.size(J_g,J_h),J_c.graphics.clear(),J_c.graphics.setAlpha(.5),J_c.graphics.drawRect(0,0,J_g,J_h,"#999999"),J_c.graphics.setAlpha(1),J_i.loop()},J_i.enable=function(){J_z.timer.frameLoop(1,J_i,J_i.loop)},J_i.hide=function(){J_i._show=!1,J_z.timer.clear(J_i,J_i.loop),J_i._canvas&&J_O.removeElement(J_i._canvas.source)},J_i.clear=function(){J_i.trianglesFaces=J_i.drawCall=J_i.shaderCall=J_i.spriteCount=J_i.spriteRenderUseCacheCount=J_i.treeNodeCollision=J_i.treeSpriteCollision=J_i.canvasNormal=J_i.canvasBitmap=J_i.canvasReCache=0},J_i.loop=function(){J_i._count++;var J_a=J_O.now();if(!(J_a-J_i._timer<1e3)){var J_b=J_i._count;if(J_i.FPS=Math.round(1e3*J_b/(J_a-J_i._timer)),J_i._show){J_i.trianglesFaces=Math.round(J_i.trianglesFaces/J_b),J_i.spriteCount=J_i._useCanvas?(J_i.drawCall=Math.round(J_i.drawCall/J_b)-2,J_i.shaderCall=Math.round(J_i.shaderCall/J_b),Math.round(J_i.spriteCount/J_b)-1):(J_i.drawCall=Math.round(J_i.drawCall/J_b)-2,J_i.shaderCall=Math.round(J_i.shaderCall/J_b)-4,Math.round(J_i.spriteCount/J_b)-4),J_i.spriteRenderUseCacheCount=Math.round(J_i.spriteRenderUseCacheCount/J_b),J_i.canvasNormal=Math.round(J_i.canvasNormal/J_b),J_i.canvasBitmap=Math.round(J_i.canvasBitmap/J_b),J_i.canvasReCache=Math.ceil(J_i.canvasReCache/J_b),J_i.treeNodeCollision=Math.round(J_i.treeNodeCollision/J_b),J_i.treeSpriteCollision=Math.round(J_i.treeSpriteCollision/J_b);var J_c=0<J_i.FPS?Math.floor(1e3/J_i.FPS).toString():" ";J_i._fpsStr=J_i.FPS+(J_i.renderSlow?" slow":"")+" "+J_c,J_i._spriteStr=J_i.spriteCount+(J_i.spriteRenderUseCacheCount?"/"+J_i.spriteRenderUseCacheCount:""),J_i._canvasStr=J_i.canvasReCache+"/"+J_i.canvasNormal+"/"+J_i.canvasBitmap,J_i.currentMemorySize=J_N.systemResourceManager.memorySize,J_i._useCanvas?J_i.renderInfoPre():J_i.renderInfo(),J_i.clear()}J_i._count=0,J_i._timer=J_a}},J_i.renderInfoPre=function(){if(J_i._canvas){var J_a=J_i._ctx;J_a.clearRect(J_i._first?0:J_i._vx,0,J_i._width,J_i._height);for(var J_b=J_J.WebGL.mainContext,J_c=0;J_c<J_i._view.length;J_c++){var J_d=J_i._view[J_c];J_i._first&&(J_a.fillStyle="white",J_a.fillText(J_d.title,J_d.x,J_d.y,null,null,null)),J_a.fillStyle=J_d.color;var J_e=-1;if((J_d=J_i._view[J_c]).varying){if(J_b)switch(J_d.varying){case 1:J_e=J_b.getParameter(J_b[J_d.value]);break;case 2:J_e=J_b.getExtension(J_d.value)}}else J_e=J_i[J_d.value];"M"==J_d.units&&(J_e=Math.floor(J_e/1048576*100)/100+" M"),"K"==J_d.units&&(J_e=Math.floor(J_e/1024*100)/100+" K"),"string"==J_d.units&&(J_e=J_e.match(/\d+\.?\d/i)),J_a.fillText(J_e+"",J_d.x+J_i._vx,J_d.y,null,null,null)}}},J_i.renderInfo=function(){for(var J_a="",J_b=J_J.WebGL.mainContext,J_c=0;J_c<J_i._view.length;J_c++){var J_d=J_i._view[J_c],J_e=-1;if(J_d.varying){if(J_b)switch(J_d.varying){case 1:J_e=J_b.getParameter(J_b[J_d.value]);break;case 2:J_e=J_b.getExtension(J_d.value)}}else J_e=J_i[J_d.value];"M"==J_d.units&&(J_e=Math.floor(J_e/1048576*100)/100+" M"),"K"==J_d.units&&(J_e=Math.floor(J_e/1024*100)/100+" K"),"string"==J_d.units&&(J_e=J_e.match(/\d+\.?\d/i)),J_a+=J_e+"\n"}J_i._txt.text=J_a},J_i.FPS=0,J_i.loopCount=0,J_i.shaderCall=0,J_i.drawCall=0,J_i.trianglesFaces=0,J_i.spriteCount=0,J_i.spriteRenderUseCacheCount=0,J_i.treeNodeCollision=0,J_i.treeSpriteCollision=0,J_i.canvasNormal=0,J_i.canvasBitmap=0,J_i.canvasReCache=0,J_i.renderSlow=!1,J_i.currentMemorySize=0,J_i._fpsStr=null,J_i._canvasStr=null,J_i._spriteStr=null,J_i._fpsData=[],J_i._timer=0,J_i._count=0,J_i._view=[],J_i._fontSize=12,J_i._txt=null,J_i._leftText=null,J_i._sp=null,J_i._show=!1,J_i._useCanvas=!1,J_i._canvas=null,J_i._ctx=null,J_i._first=!1,J_i._vx=NaN,J_i._width=0,J_i._height=100,J_i}(),J_Y=(function(){function J_a(){this._strsToID={},this._idToStrs=[],this._length=0}J_k(J_a,"laya.utils.StringKey");var J_b=J_a.prototype;J_b.add=function(J_a){var J_b=this._strsToID[J_a];return null!=J_b?J_b:(this._idToStrs[this._length]=J_a,this._strsToID[J_a]=this._length++)},J_b.getID=function(J_a){var J_b=this._strsToID[J_a];return null==J_b?-1:J_b},J_b.getName=function(J_a){var J_b=this._idToStrs[J_a];return null==J_b?void 0:J_b}}(),function(){var J_j;function J_a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}J_k(J_a,"laya.utils.Timer");var J_b=J_a.prototype;return J_b._init=function(){J_z.timer&&J_z.timer.frameLoop(1,this,this._update)},J_b._now=function(){return Date.now()},J_b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var J_a=this.currFrame=this.currFrame+this.scale,J_b=this._now();this._delta=(J_b-this._lastTimer)*this.scale;var J_c=this.currTimer=this.currTimer+this._delta;J_z.isDebug&&6e4<Math.abs(J_b-this._lastTimer)&&console.error("系统时间错误！"+(J_b-this._lastTimer)),this._lastTimer=J_b;var J_d=this._handlers;for(J_g=this._count=0,J_h=J_d.length;J_g<J_h;J_g++)if(null!==(J_i=J_d[J_g]).method){var J_e=J_i.userFrame?J_a:J_c;if(J_e>=J_i.exeTime)if(J_i.repeat)if(J_i.jumpFrame)for(;J_e>=J_i.exeTime;)J_i.exeTime+=J_i.delay,J_i.run(!1);else J_i.exeTime+=J_i.delay,J_i.run(!1),J_e>J_i.exeTime&&(J_i.exeTime+=Math.ceil((J_e-J_i.exeTime)/J_i.delay)*J_i.delay);else J_i.run(!0)}else this._count++;(30<this._count||J_a%200==0)&&this._clearHandlers();for(var J_f=this._laters,J_g=0,J_h=J_f.length-1;J_g<=J_h;J_g++){var J_i=J_f[J_g];this._isIgnoreRecover(J_i)||(null!==J_i.method&&(delete this._map[J_i.key],J_i.run(!1)),this._recoverHandler(J_i)),J_g===J_h&&(J_h=J_f.length-1)}J_f.length=0}},J_b._clearHandlers=function(){for(var J_a=this._handlers,J_b=0,J_c=J_a.length;J_b<J_c;J_b++){var J_d=J_a[J_b];null!==J_d.method?this._temp.push(J_d):this._isIgnoreRecover(J_d)?this._temp.push(J_d):this._recoverHandler(J_d)}this._handlers=this._temp,this._temp=J_a,this._temp.length=0},J_b._recoverHandler=function(J_a){this._map[J_a.key]==J_a&&delete this._map[J_a.key],J_a.recover()},J_b._create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){if(!J_c)return J_e.apply(J_d,J_f),null;if(J_g){var J_i=this._getHandler(J_d,J_e);if(J_i)return J_i.repeat=J_b,J_i.userFrame=J_a,J_i.delay=J_c,J_i.ignoreRecover=J_h,J_i.caller=J_d,J_i.method=J_e,J_i.args=J_f,J_i.exeTime=J_c+(J_a?this.currFrame:this.currTimer+this._now()-this._lastTimer),J_i}return(J_i=J_j.create()).repeat=J_b,J_i.userFrame=J_a,J_i.delay=J_c,J_i.ignoreRecover=J_h,J_i.caller=J_d,J_i.method=J_e,J_i.args=J_f,J_i.exeTime=J_c+(J_a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(J_i),this._handlers.push(J_i),J_i},J_b._indexHandler=function(J_a){var J_b=J_a.caller,J_c=J_a.method,J_d=J_b?J_b.$_GID||(J_b.$_GID=J_$.getGID()):0,J_e=J_c.$_TID||(J_c.$_TID=this._mid++);J_a.key=J_d+"_"+J_e,this._map[J_a.key]=J_a},J_b.once=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=!0),this._create(!1,!1,J_a,J_b,J_c,J_d,J_e,!1)},J_b.loop=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){void 0===J_e&&(J_e=!0),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!1);var J_h=this._create(!1,!0,J_a,J_b,J_c,J_d,J_e,J_g);J_h&&(J_h.jumpFrame=J_f)},J_b.frameOnce=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=!0),this._create(!0,!1,J_a,J_b,J_c,J_d,J_e,!1)},J_b.frameLoop=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_e&&(J_e=!0),void 0===J_f&&(J_f=!1),this._create(!0,!0,J_a,J_b,J_c,J_d,J_e,J_f)},J_b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+J_j._freeCount},J_b.clear=function(J_a,J_b){var J_c=this._getHandler(J_a,J_b);return!(!J_c||this._isIgnoreRecover(J_c))&&(delete this._map[J_c.key],J_c.key=null,J_c.clear(),!0)},J_b.clearAll=function(J_a){if(J_a)for(var J_b=0,J_c=this._handlers.length;J_b<J_c;J_b++){var J_d=this._handlers[J_b];J_d.caller===J_a&&(this._isIgnoreRecover(J_d)||(delete this._map[J_d.key],J_d.key=null,J_d.clear()))}},J_b._getHandler=function(J_a,J_b){var J_c=J_a?J_a.$_GID||(J_a.$_GID=J_$.getGID()):0,J_d=J_b.$_TID||(J_b.$_TID=this._mid++);return this._map[J_c+"_"+J_d]},J_b._isIgnoreRecover=function(J_a){if(J_a.ignoreRecover||J_a.caller&&"IgnoreRecover"==J_a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var J_b="";try{arguments.propertyIsEnumerable.caller}catch(J_a){J_b=J_a.stack}J_z.recordError("报错：核心定时器销毁忽略  "+J_b)}return!0}return!1},J_b.hasHandler=function(J_a,J_b){return this._map[J_a.$_GID+"_"+J_b.$_TID]},J_b.callLater=function(J_a,J_b,J_c){if(null==this._getHandler(J_a,J_b)){var J_d=J_j.create();J_d.caller=J_a,J_d.method=J_b,J_d.args=J_c,this._indexHandler(J_d),this._laters.push(J_d)}},J_b.runCallLater=function(J_a,J_b){var J_c=this._getHandler(J_a,J_b);J_c&&null!=J_c.method&&(this._isIgnoreRecover(J_c)||(delete this._map[J_c.key],J_c.run(!0)))},J_b.runTimer=function(J_a,J_b){this.runCallLater(J_a,J_b)},J_o(0,J_b,"delta",function(){return this._delta}),J_a.__init$=function(){J_j=function(){function J_b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}J_k(J_b,"");var J_a=J_b.prototype;return J_a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},J_a.recover=function(){this.clear(),this.args=J_b._freeHandler,J_b._freeHandler=this,J_b._freeCount++},J_a.run=function(J_a){var J_b=this.caller;if(J_b&&J_b.destroyed)return this.clear();var J_c=this.method,J_d=this.args;J_a&&this.clear(),null!=J_c&&(J_d?J_c.apply(J_b,J_d):J_c.call(J_b))},J_b._freeHandler=null,J_b._freeCount=0,J_b.create=function(){var J_a=J_b._freeHandler;return J_a?(J_b._freeHandler=J_a.args,--J_b._freeCount,J_a.args=null,J_a):new J_b},J_b}()},J_a}()),J_Z=function(){function J_l(){this.gid=0}J_k(J_l,"laya.utils.Tween");var J_a=J_l.prototype;return J_a.to=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){return void 0===J_f&&(J_f=0),void 0===J_g&&(J_g=!1),this._create(J_a,J_b,J_c,J_d,J_e,J_f,J_g,!0,!1,!0)},J_a.from=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){return void 0===J_f&&(J_f=0),void 0===J_g&&(J_g=!1),this._create(J_a,J_b,J_c,J_d,J_e,J_f,J_g,!1,!1,!0)},J_a._create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){if(!J_a)throw new Error("Tween:target is null");this._target=J_a,this._duration=J_c,this._ease=J_d||J_b.ease||J_l.easeNone,this._complete=J_e||J_b.complete,this._delay=J_f,this._props=[],this._usedTimer=0,this._startTimer=J_O.now(),this._usedPool=J_i,this._delayParam=null,this.update=J_b.update;var J_k=J_a.$_GID||(J_a.$_GID=J_$.getGID());return J_l.tweenMap[J_k]?(J_g&&J_l.clearTween(J_a),J_l.tweenMap[J_k].push(this)):J_l.tweenMap[J_k]=[this],J_j?J_f<=0?this.firstStart(J_a,J_b,J_h):(this._delayParam=[J_a,J_b,J_h],J_z.scaleTimer.once(J_f,this,this.firstStart,this._delayParam)):this._initProps(J_a,J_b,J_h),this},J_a.firstStart=function(J_a,J_b,J_c){this._delayParam=null,J_a.destroyed?this.clear():(this._initProps(J_a,J_b,J_c),this._beginLoop())},J_a._initProps=function(J_a,J_b,J_c){for(var J_d in J_b)if("number"==typeof J_a[J_d]){var J_e=J_c?J_a[J_d]:J_b[J_d],J_f=J_c?J_b[J_d]:J_a[J_d];this._props.push([J_d,J_e,J_f-J_e]),J_c||(J_a[J_d]=J_e)}},J_a._beginLoop=function(){J_z.scaleTimer.frameLoop(1,this,this._doEase)},J_a._doEase=function(){this._updateEase(J_O.now())},J_a._updateEase=function(J_a){var J_b=this._target;if(J_b){if(J_b.destroyed)return J_l.clearTween(J_b);var J_c=this._usedTimer=J_a-this._startTimer-this._delay;if(!(J_c<0)){if(J_c>=this._duration)return this.complete();for(var J_d=0<J_c?this._ease(J_c,0,1,this._duration):0,J_e=this._props,J_f=0,J_g=J_e.length;J_f<J_g;J_f++){var J_h=J_e[J_f];J_b[J_h[0]]=J_h[1]+J_d*J_h[2]}this.update&&this.update.run()}}},J_a.complete=function(){if(this._target){J_z.scaleTimer.runTimer(this,this.firstStart);for(var J_a=this._target,J_b=this._props,J_c=this._complete,J_d=0,J_e=J_b.length;J_d<J_e;J_d++){var J_f=J_b[J_d];J_a[J_f[0]]=J_f[1]+J_f[2]}this.update&&this.update.run(),this.clear(),J_c&&J_c.run()}},J_a.pause=function(){J_z.scaleTimer.clear(this,this._beginLoop),J_z.scaleTimer.clear(this,this._doEase),J_z.scaleTimer.clear(this,this.firstStart);var J_a;(J_a=J_O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=J_a)},J_a.setStartTime=function(J_a){this._startTimer=J_a},J_a.clear=function(){this._target&&(this._remove(),this._clear())},J_a._clear=function(){this.pause(),J_z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,J_W.recover("tween",this))},J_a.recover=function(){this._usedPool=!0,this._clear()},J_a._remove=function(){var J_a=J_l.tweenMap[this._target.$_GID];if(J_a)for(var J_b=0,J_c=J_a.length;J_b<J_c;J_b++)if(J_a[J_b]===this){J_a.splice(J_b,1);break}},J_a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=J_O.now(),this._delayParam)J_z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var J_a=this._props,J_b=0,J_c=J_a.length;J_b<J_c;J_b++){var J_d=J_a[J_b];this._target[J_d[0]]=J_d[1]}J_z.scaleTimer.once(this._delay,this,this._beginLoop)}},J_a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=J_O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?J_z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},J_o(0,J_a,"progress",null,function(J_a){var J_b=J_a*this._duration;this._startTimer=J_O.now()-this._delay-J_b}),J_l.to=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){return void 0===J_f&&(J_f=0),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=!0),J_W.getItemByClass("tween",J_l)._create(J_a,J_b,J_c,J_d,J_e,J_f,J_g,!0,J_h,!0)},J_l.from=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){return void 0===J_f&&(J_f=0),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=!0),J_W.getItemByClass("tween",J_l)._create(J_a,J_b,J_c,J_d,J_e,J_f,J_g,!1,J_h,!0)},J_l.clearAll=function(J_a){if(J_a&&J_a.$_GID){var J_b=J_l.tweenMap[J_a.$_GID];if(J_b){for(var J_c=0,J_d=J_b.length;J_c<J_d;J_c++)J_b[J_c]._clear();J_b.length=0}}},J_l.clear=function(J_a){J_a.clear()},J_l.clearTween=function(J_a){J_l.clearAll(J_a)},J_l.easeNone=function(J_a,J_b,J_c,J_d){return J_c*J_a/J_d+J_b},J_l.tweenMap={},J_l}(),J_$=function(){function J_h(){}return J_k(J_h,"laya.utils.Utils"),J_h.toRadian=function(J_a){return J_a*J_h._pi2},J_h.toAngle=function(J_a){return J_a*J_h._pi},J_h.toHexColor=function(J_a){if(J_a<0||isNaN(J_a))return null;for(var J_b=J_a.toString(16);J_b.length<6;)J_b="0"+J_b;return"#"+J_b},J_h.getGID=function(){return J_h._gid++},J_h.concatArray=function(J_a,J_b){if(!J_b)return J_a;if(!J_a)return J_b;var J_c=0,J_d=J_b.length;for(J_c=0;J_c<J_d;J_c++)J_a.push(J_b[J_c]);return J_a},J_h.clearArray=function(J_a){return J_a&&(J_a.length=0),J_a},J_h.copyArray=function(J_a,J_b){if(J_a||(J_a=[]),!J_b)return J_a;J_a.length=J_b.length;var J_c=0,J_d=J_b.length;for(J_c=0;J_c<J_d;J_c++)J_a[J_c]=J_b[J_c];return J_a},J_h.getGlobalRecByPoints=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g;return J_f=new J_A(J_b,J_c),J_f=J_a.localToGlobal(J_f),J_g=new J_A(J_d,J_e),J_g=J_a.localToGlobal(J_g),J_B._getWrapRec([J_f.x,J_f.y,J_g.x,J_g.y])},J_h.getGlobalPosAndScale=function(J_a){return J_h.getGlobalRecByPoints(J_a,0,0,1,1)},J_h.bind=function(J_a,J_b){return J_a.bind(J_b)},J_h.measureText=function(J_a,J_b){return J_F.measureText(J_a,J_b)},J_h.updateOrder=function(J_a){if(!J_a||J_a.length<2)return!1;for(var J_b,J_c=1,J_d=0,J_e=J_a.length,J_f=NaN;J_c<J_e;){for(J_b=J_a[J_d=J_c],J_f=J_a[J_d]._zOrder;-1<--J_d&&J_a[J_d]._zOrder>J_f;)J_a[J_d+1]=J_a[J_d];J_a[J_d+1]=J_b,J_c++}var J_g=J_b.parent.conchModel;if(J_g)if(null!=J_g.updateZOrder)J_g.updateZOrder();else{for(J_c=0;J_c<J_e;J_c++)J_g.removeChild(J_a[J_c].conchModel);for(J_c=0;J_c<J_e;J_c++)J_g.addChildAt(J_a[J_c].conchModel,J_c)}return!0},J_h.transPointList=function(J_a,J_b,J_c){var J_d=0,J_e=J_a.length;for(J_d=0;J_d<J_e;J_d+=2)J_a[J_d]+=J_b,J_a[J_d+1]+=J_c},J_h.parseInt=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c=J_O.window.parseInt(J_a,J_b);return isNaN(J_c)?0:J_c},J_h.getFileExtension=function(J_a){J_h._extReg.lastIndex=J_a.lastIndexOf(".");var J_b=J_h._extReg.exec(J_a);return J_b&&1<J_b.length?J_b[1].toLowerCase():null},J_h.getTransformRelativeToWindow=function(J_a,J_b,J_c){var J_d=J_z.stage,J_e=laya.utils.Utils.getGlobalPosAndScale(J_a),J_f=J_d._canvasTransform.clone(),J_g=J_f.tx,J_h=J_f.ty;J_f.rotate(-Math.PI/180*J_z.stage.canvasDegree),J_f.scale(J_z.stage.clientScaleX,J_z.stage.clientScaleY);var J_i=J_z.stage.canvasDegree%180!=0,J_j=NaN,J_k=NaN;J_i?(J_j=J_c+J_e.y,J_k=J_b+J_e.x,J_j*=J_f.d,J_k*=J_f.a,90==J_z.stage.canvasDegree?(J_j=J_g-J_j,J_k+=J_h):(J_j+=J_g,J_k=J_h-J_k)):(J_j=J_b+J_e.x,J_k=J_c+J_e.y,J_j*=J_f.a,J_k*=J_f.d,J_j+=J_g,J_k+=J_h);var J_l=NaN,J_m=NaN;return J_m=J_i?(J_l=J_f.d*J_e.height,J_f.a*J_e.width):(J_l=J_f.a*J_e.width,J_f.d*J_e.height),{x:J_j,y:J_k,scaleX:J_l,scaleY:J_m}},J_h.fitDOMElementInArea=function(J_a,J_b,J_c,J_d,J_e,J_f){J_a._fitLayaAirInitialized||(J_a._fitLayaAirInitialized=!0,J_a.style.transformOrigin=J_a.style.webKittransformOrigin="left top",J_a.style.position="absolute");var J_g=J_h.getTransformRelativeToWindow(J_b,J_c,J_d);J_a.style.transform=J_a.style.webkitTransform="scale("+J_g.scaleX+","+J_g.scaleY+") rotate("+J_z.stage.canvasDegree+"deg)",J_a.style.width=J_e+"px",J_a.style.height=J_f+"px",J_a.style.left=J_g.x+"px",J_a.style.top=J_g.y+"px"},J_h.isOkTextureList=function(J_a){if(!J_a)return!1;var J_b,J_c=0,J_d=J_a.length;for(J_c=0;J_c<J_d;J_c++)if(!(J_b=J_a[J_c])||!J_b.source)return!1;return!0},J_h.isOKCmdList=function(J_a){if(!J_a)return!1;var J_b,J_c,J_d=0,J_e=J_a.length,J_f=J_J._context;for(J_d=0;J_d<J_e;J_d++)switch((J_b=J_a[J_d]).callee){case J_f._drawTexture:case J_f._fillTexture:case J_f._drawTextureWithTransform:if(!(J_c=J_b[0])||!J_c.source)return!1}return!0},J_h._gid=1,J_h._pi=180/Math.PI,J_h._pi2=Math.PI/180,J_h._extReg=/\.(\w+)\??/g,J_h.parseXMLFromString=function(J_a){var J_b;if(J_a=J_a.replace(/>\s+</g,"><"),-1<(J_b=(new DOMParser).parseFromString(J_a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(J_b.firstChild.firstChild.textContent);return J_b},J_h}(),J__=function(){function J_a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],J_J.isWebGL&&J_Q.regCacheByFunction(J_$.bind(this.startDispose,this),J_$.bind(this.getCacheList,this))}J_k(J_a,"laya.utils.VectorGraphManager");var J_b=J_a.prototype;return J_b.getId=function(){return this._id++},J_b.addShape=function(J_a,J_b){this.shapeDic[J_a]=J_b,this.useDic[J_a]||(this.useDic[J_a]=!0)},J_b.addLine=function(J_a,J_b){this.shapeLineDic[J_a]=J_b,this.shapeLineDic[J_a]||(this.shapeLineDic[J_a]=!0)},J_b.getShape=function(J_a){this._checkKey&&null!=this.useDic[J_a]&&(this.useDic[J_a]=!0)},J_b.deleteShape=function(J_a){this.shapeDic[J_a]&&(this.shapeDic[J_a]=null,delete this.shapeDic[J_a]),this.shapeLineDic[J_a]&&(this.shapeLineDic[J_a]=null,delete this.shapeLineDic[J_a]),null!=this.useDic[J_a]&&delete this.useDic[J_a]},J_b.getCacheList=function(){var J_a,J_b=[];for(J_a in this.shapeDic)J_b.push(this.shapeDic[J_a]);for(J_a in this.shapeLineDic)J_b.push(this.shapeLineDic[J_a]);return J_b},J_b.startDispose=function(J_a){var J_b;for(J_b in this.useDic)this.useDic[J_b]=!1;this._checkKey=!0},J_b.endDispose=function(){if(this._checkKey){var J_a;for(J_a in this.useDic)this.useDic[J_a]||this.deleteShape(J_a);this._checkKey=!1}},J_a.getInstance=function(){return J_a.instance=J_a.instance||new J_a},J_a.instance=null,J_a}(),J_s=function(){function J_d(){this._obj=null,this._obj=J_d.supportWeakMap?new J_O.window.WeakMap:{},J_d.supportWeakMap||J_d._maps.push(this)}J_k(J_d,"laya.utils.WeakObject");var J_a=J_d.prototype;return J_a.set=function(J_a,J_b){if(null!=J_a)if(J_d.supportWeakMap){var J_c=J_a;"string"!=typeof J_a&&"number"!=typeof J_a||(J_c=J_d._keys[J_a])||(J_c=J_d._keys[J_a]={k:J_a}),this._obj.set(J_c,J_b)}else"string"==typeof J_a||"number"==typeof J_a?this._obj[J_a]=J_b:(J_a.$_GID||(J_a.$_GID=J_$.getGID()),this._obj[J_a.$_GID]=J_b)},J_a.get=function(J_a){if(null==J_a)return null;if(J_d.supportWeakMap){var J_b="string"==typeof J_a||"number"==typeof J_a?J_d._keys[J_a]:J_a;return J_b?this._obj.get(J_b):null}return"string"==typeof J_a||"number"==typeof J_a?this._obj[J_a]:this._obj[J_a.$_GID]},J_a.del=function(J_a){if(null!=J_a)if(J_d.supportWeakMap){var J_b="string"==typeof J_a||"number"==typeof J_a?J_d._keys[J_a]:J_a;if(!J_b)return;this._obj.delete(J_b)}else"string"==typeof J_a||"number"==typeof J_a?delete this._obj[J_a]:delete this._obj[this._obj.$_GID]},J_a.has=function(J_a){if(null==J_a)return!1;if(J_d.supportWeakMap){var J_b="string"==typeof J_a||"number"==typeof J_a?J_d._keys[J_a]:J_a;return this._obj.has(J_b)}return"string"==typeof J_a||"number"==typeof J_a?null!=this._obj[J_a]:null!=this._obj[this._obj.$_GID]},J_d.__init__=function(){(J_d.supportWeakMap=null!=J_O.window.WeakMap)||J_z.timer.loop(J_d.delInterval,null,J_d.clearCache)},J_d.clearCache=function(){for(var J_a=0,J_b=J_d._maps.length;J_a<J_b;J_a++){J_d._maps[J_a]._obj={}}},J_d.supportWeakMap=!1,J_d.delInterval=3e5,J_d._keys={},J_d._maps=[],J_i(J_d,["I",function(){return this.I=new J_d}]),J_d}(),J_t=function(){function J_a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}J_k(J_a,"laya.utils.WordText");var J_b=J_a.prototype;return J_b.setText=function(J_a){this.changed=!0,this._text=J_a},J_b.toString=function(){return this._text},J_b.charCodeAt=function(J_a){return this._text?this._text.charCodeAt(J_a):NaN},J_b.charAt=function(J_a){return this._text?this._text.charAt(J_a):null},J_o(0,J_b,"length",function(){return this._text?this._text.length:0}),J_a}(),J_aa=function(J_a){function J_g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,J_g.__super.call(this),this._childs=J_g.ARRAY_EMPTY,this._$P=J_g.PROP_EMPTY,this.timer=J_z.scaleTimer,this.conchModel=J_J.isConchNode?this.createConchModel():null}J_k(J_g,"laya.display.Node",J_j);var J_b=J_g.prototype;return J_b._setBit=function(J_a,J_b){1==J_a&&(this._getBit(J_a)!=J_b&&this._updateDisplayedInstage());J_b?this._bits|=J_a:this._bits&=~J_a},J_b._getBit=function(J_a){return 0!=(this._bits&J_a)},J_b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},J_b._setUpNoticeType=function(J_a){var J_b=this;for(J_b._setBit(J_a,!0),J_b=J_b.parent;J_b;){if(J_b._getBit(J_a))return;J_b._setBit(J_a,!0),J_b=J_b.parent}},J_b.on=function(J_a,J_b,J_c,J_d){return"display"!==J_a&&"undisplay"!==J_a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(J_a,J_b,J_c,J_d,!1)},J_b.once=function(J_a,J_b,J_c,J_d){return"display"!==J_a&&"undisplay"!==J_a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(J_a,J_b,J_c,J_d,!0)},J_b.createConchModel=function(){return null},J_b.destroy=function(J_a){void 0===J_a&&(J_a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(J_a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},J_b.destroyChildren=function(){if(this._childs)for(var J_a=this._childs.length-1;-1<J_a;J_a--)this._childs[J_a].destroy(!0)},J_b.addChild=function(J_a){if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),J_a._parent===this){var J_b=this.getChildIndex(J_a);J_b!==this._childs.length-1&&(this._childs.splice(J_b,1),this._childs.push(J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1)),this._childChanged())}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1),(J_a.parent=this)._childChanged();return J_a},J_b.addChildren=function(J_a){for(var J_b=arguments,J_c=0,J_d=J_b.length;J_c<J_d;)this.addChild(J_b[J_c++])},J_b.addChildAt=function(J_a,J_b){if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),0<=J_b&&J_b<=this._childs.length){if(J_a._parent===this){var J_c=this.getChildIndex(J_a);this._childs.splice(J_c,1),this._childs.splice(J_b,0,J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,J_b)),this._childChanged()}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J_b,0,J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,J_b),J_a.parent=this;return J_a}throw new Error("appendChildAt:The index is out of bounds")},J_b.getChildIndex=function(J_a){return this._childs.indexOf(J_a)},J_b.getChildByName=function(J_a){var J_b=this._childs;if(J_b)for(var J_c=0,J_d=J_b.length;J_c<J_d;J_c++){var J_e=J_b[J_c];if(J_e.name===J_a)return J_e}return null},J_b._get$P=function(J_a){return this._$P[J_a]},J_b._set$P=function(J_a,J_b){return this.destroyed||(this._$P===J_g.PROP_EMPTY&&(this._$P={}),this._$P[J_a]=J_b),J_b},J_b.getChildAt=function(J_a){return this._childs[J_a]},J_b.setChildIndex=function(J_a,J_b){var J_c=this._childs;if(J_b<0||J_b>=J_c.length)throw new Error("setChildIndex:The index is out of bounds.");var J_d=this.getChildIndex(J_a);if(J_d<0)throw new Error("setChildIndex:node is must child of this object.");return J_c.splice(J_d,1),J_c.splice(J_b,0,J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,J_b)),this._childChanged(),J_a},J_b._childChanged=function(J_a){},J_b.removeChild=function(J_a){if(!this._childs)return J_a;var J_b=this._childs.indexOf(J_a);return this.removeChildAt(J_b)},J_b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},J_b.removeChildByName=function(J_a){var J_b=this.getChildByName(J_a);return J_b&&this.removeChild(J_b),J_b},J_b.removeChildAt=function(J_a){var J_b=this.getChildAt(J_a);if(J_b){for(var J_c=this._childs.length-1,J_d=J_a;J_d<J_c;++J_d)this._childs[J_d]=this._childs[J_d+1];this._childs.length=J_c,this.conchModel&&this.conchModel.removeChild(J_b.conchModel),J_b.parent=null}return J_b},J_b.removeChildren=function(J_a,J_b){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=2147483647),this._childs&&0<this._childs.length){var J_c=this._childs;if(0===J_a&&J_f<=J_b){var J_d=J_c;this._childs=J_g.ARRAY_EMPTY}else J_d=J_c.splice(J_a,J_b-J_a);for(var J_e=0,J_f=J_d.length;J_e<J_f;J_e++)J_d[J_e].parent=null,this.conchModel&&this.conchModel.removeChild(J_d[J_e].conchModel)}return this},J_b.replaceChild=function(J_a,J_b){var J_c=this._childs.indexOf(J_b);return-1<J_c?(this._childs.splice(J_c,1,J_a),this.conchModel&&(this.conchModel.removeChild(J_b.conchModel),this.conchModel.addChildAt(J_a.conchModel,J_c)),J_b.parent=null,J_a.parent=this,J_a):null},J_b._updateDisplayedInstage=function(){var J_a;J_a=this;var J_b=J_z.stage;for(this._displayedInStage=!1;J_a;){if(J_a._getBit(1)){this._displayedInStage=J_a._displayedInStage;break}if(J_a==J_b||J_a._displayedInStage){this._displayedInStage=!0;break}J_a=J_a.parent}},J_b._setDisplay=function(J_a){this._displayedInStage!==J_a&&((this._displayedInStage=J_a)?this.event("display"):this.event("undisplay"))},J_b._displayChild=function(J_a,J_b){var J_c=J_a._childs;if(J_c)for(var J_d=0;J_d<J_c.length;J_d++){var J_e=J_c[J_d];J_e&&J_e._getBit(1)&&(0<J_e._childs.length?this._displayChild(J_e,J_b):J_e._setDisplay(J_b))}J_a._setDisplay(J_b)},J_b.contains=function(J_a){if(J_a===this)return!0;for(;J_a;){if(J_a.parent===this)return!0;J_a=J_a.parent}return!1},J_b.timerLoop=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_e&&(J_e=!0),void 0===J_f&&(J_f=!1),this.timer.loop(J_a,J_b,J_c,J_d,J_e,J_f)},J_b.timerOnce=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=!0),this.timer._create(!1,!1,J_a,J_b,J_c,J_d,J_e)},J_b.frameLoop=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=!0),this.timer._create(!0,!0,J_a,J_b,J_c,J_d,J_e)},J_b.frameOnce=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=!0),this.timer._create(!0,!1,J_a,J_b,J_c,J_d,J_e)},J_b.clearTimer=function(J_a,J_b){this.timer.clear(J_a,J_b)},J_o(0,J_b,"numChildren",function(){return this._childs.length}),J_o(0,J_b,"destroyed",function(){return this._destroyed}),J_o(0,J_b,"parent",function(){return this._parent},function(J_a){this._parent!==J_a&&(J_a?(this._parent=J_a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),J_a.displayedInStage&&this._displayChild(this,!0)),J_a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=J_a))}),J_o(0,J_b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),J_g.ARRAY_EMPTY=[],J_g.PROP_EMPTY={},J_g.NOTICE_DISPLAY=1,J_g.MOUSEENABLE=2,J_g}(),J_ba=function(J_a){function J_m(J_a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,J_m.__super.call(this),this._padding=J_m._PADDING,this._spacing=J_m._SPACING,this._aligns=J_m._ALIGNS,this._font=J_n.EMPTY,this._ower=J_a}J_k(J_m,"laya.display.css.CSSStyle",J_a);var J_b=J_m.prototype;return J_b.destroy=function(){this._ower=null,this._font=null,this._rect=null},J_b.inherit=function(J_a){this._font=J_a._font,this._spacing=J_a._spacing===J_m._SPACING?J_m._SPACING:J_a._spacing.slice(),this.lineHeight=J_a.lineHeight},J_b._widthAuto=function(){return 0!=(262144&this._type)},J_b.widthed=function(J_a){return 0!=(8&this._type)},J_b._calculation=function(J_a,J_b){if(J_b.indexOf("%")<0)return!1;var J_d=this._ower,J_e=J_d.parent,J_f=this._rect;function J_g(J_a,J_b,J_c){return J_a*J_c[0]+J_b*J_c[1]+J_c[2]}function J_c(J_a){var J_b=J_e.width,J_c=J_d.width;J_f.width&&(J_d.width=J_g(J_b,J_c,J_f.width)),J_f.height&&(J_d.height=J_g(J_b,J_c,J_f.height)),J_f.left&&(J_d.x=J_g(J_b,J_c,J_f.left)),J_f.top&&(J_d.y=J_g(J_b,J_c,J_f.top))}null===J_f&&(J_e._getCSSStyle()._type|=524288,J_e.on("resize",this,J_c),this._rect=J_f={input:{}});var J_h=J_b.split(" ");return J_h[0]=parseFloat(J_h[0])/100,1==J_h.length?J_h[1]=J_h[2]=0:(J_h[1]=parseFloat(J_h[1])/100,J_h[2]=parseFloat(J_h[2])),J_f[J_a]=J_h,J_f.input[J_a]=J_b,J_c(),!0},J_b.heighted=function(J_a){return 0!=(8192&this._type)},J_b.size=function(J_a,J_b){var J_c=this._ower,J_d=!1;-1!==J_a&&J_a!=this._ower.width&&(this._type|=8,this._ower.width=J_a,J_d=!0),-1!==J_b&&J_b!=this._ower.height&&(this._type|=8192,this._ower.height=J_b,J_d=!0),J_d&&(J_c._layoutLater(),524288&this._type&&J_c.event("resize",this))},J_b._getAlign=function(){return this._aligns[0]},J_b._getValign=function(){return this._aligns[1]},J_b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},J_b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new J_n(this._font))},J_b.render=function(J_a,J_b,J_c,J_d){var J_e=J_a.width,J_f=J_a.height;J_c-=J_a.pivotX,J_d-=J_a.pivotY,this._bgground&&null!=this._bgground.color&&J_b.ctx.fillRect(J_c,J_d,J_e,J_f,this._bgground.color),this._border&&this._border.color&&J_b.drawRect(J_c,J_d,J_e,J_f,this._border.color.strColor,this._border.size)},J_b.getCSSStyle=function(){return this},J_b.cssText=function(J_a){this.attrs(J_m.parseOneCSS(J_a,";"))},J_b.attrs=function(J_a){if(J_a)for(var J_b=0,J_c=J_a.length;J_b<J_c;J_b++){var J_d=J_a[J_b];this[J_d[0]]=J_d[1]}},J_b.setTransform=function(J_a){"none"===J_a?this._tf=J_h._TF_EMPTY:this.attrs(J_m.parseOneCSS(J_a,","))},J_b.translate=function(J_a,J_b){this._tf===J_h._TF_EMPTY&&(this._tf=new J_e),this._tf.translateX=J_a,this._tf.translateY=J_b},J_b.scale=function(J_a,J_b){this._tf===J_h._TF_EMPTY&&(this._tf=new J_e),this._tf.scaleX=J_a,this._tf.scaleY=J_b},J_b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},J_o(0,J_b,"block",J_a.prototype._$get_block,function(J_a){J_a?this._type|=1:this._type&=-2}),J_o(0,J_b,"valign",function(){return J_m._valigndef[this._aligns[1]]},function(J_a){this._aligns===J_m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=J_m._valigndef[J_a]}),J_o(0,J_b,"height",null,function(J_a){if(this._type|=8192,"string"==typeof J_a){if(this._calculation("height",J_a))return;J_a=parseInt(J_a)}this.size(-1,J_a)}),J_o(0,J_b,"width",null,function(J_a){if(this._type|=8,"string"==typeof J_a){var J_b=J_a.indexOf("auto");if(0<=J_b&&(this._type|=262144,J_a=J_a.substr(0,J_b)),this._calculation("width",J_a))return;J_a=parseInt(J_a)}this.size(J_a,-1)}),J_o(0,J_b,"fontWeight",function(){return this._font.weight},function(J_a){this._createFont().weight=J_a}),J_o(0,J_b,"left",null,function(J_a){var J_b=this._ower;if("string"==typeof J_a){if("center"===J_a?J_a="50% -50% 0":"right"===J_a&&(J_a="100% -100% 0"),this._calculation("left",J_a))return;J_a=parseInt(J_a)}J_b.x=J_a}),J_o(0,J_b,"_translate",null,function(J_a){this.translate(J_a[0],J_a[1])}),J_o(0,J_b,"absolute",function(){return 0!=(4&this._type)}),J_o(0,J_b,"top",null,function(J_a){var J_b=this._ower;if("string"==typeof J_a){if("middle"===J_a?J_a="50% -50% 0":"bottom"===J_a&&(J_a="100% -100% 0"),this._calculation("top",J_a))return;J_a=parseInt(J_a)}J_b.y=J_a}),J_o(0,J_b,"align",function(){return J_m._aligndef[this._aligns[0]]},function(J_a){this._aligns===J_m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=J_m._aligndef[J_a]}),J_o(0,J_b,"bold",function(){return this._font.bold},function(J_a){this._createFont().bold=J_a}),J_o(0,J_b,"padding",function(){return this._padding},function(J_a){this._padding=J_a}),J_o(0,J_b,"leading",function(){return this._spacing[1]},function(J_a){"string"==typeof J_a&&(J_a=parseInt(J_a+"")),this._spacing===J_m._SPACING&&(this._spacing=[0,0]),this._spacing[1]=J_a}),J_o(0,J_b,"lineElement",function(){return 0!=(65536&this._type)},function(J_a){J_a?this._type|=65536:this._type&=-65537}),J_o(0,J_b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(J_a){this.lineElement=!1,"right"===J_a?this._type|=32768:this._type&=-32769}),J_o(0,J_b,"textDecoration",function(){return this._font.decoration},function(J_a){this._createFont().decoration=J_a}),J_o(0,J_b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(J_a){"nowrap"===J_a&&(this._type|=131072),"none"===J_a&&(this._type&=-131073)}),J_o(0,J_b,"background",null,function(J_a){J_a?(this._bgground||(this._bgground={}),this._bgground.color=J_a,this._ower.conchModel&&this._ower.conchModel.bgColor(J_a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),J_o(0,J_b,"wordWrap",function(){return 0==(131072&this._type)},function(J_a){J_a?this._type&=-131073:this._type|=131072}),J_o(0,J_b,"color",function(){return this._font.color},function(J_a){this._createFont().color=J_a}),J_o(0,J_b,"password",function(){return this._font.password},function(J_a){this._createFont().password=J_a}),J_o(0,J_b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(J_a){"none"===J_a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=J_a),this._ower.conchModel&&this._ower.conchModel.bgColor(J_a),this._ower._renderType|=256}),J_o(0,J_b,"font",function(){return this._font.toString()},function(J_a){this._createFont().set(J_a)}),J_o(0,J_b,"weight",null,function(J_a){this._createFont().weight=J_a}),J_o(0,J_b,"letterSpacing",function(){return this._spacing[0]},function(J_a){"string"==typeof J_a&&(J_a=parseInt(J_a+"")),this._spacing===J_m._SPACING&&(this._spacing=[0,0]),this._spacing[0]=J_a}),J_o(0,J_b,"fontSize",function(){return this._font.size},function(J_a){this._createFont().size=J_a}),J_o(0,J_b,"italic",function(){return this._font.italic},function(J_a){this._createFont().italic=J_a}),J_o(0,J_b,"fontFamily",function(){return this._font.family},function(J_a){this._createFont().family=J_a}),J_o(0,J_b,"stroke",function(){return this._font.stroke[0]},function(J_a){this._createFont().stroke===J_n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=J_a}),J_o(0,J_b,"strokeColor",function(){return this._font.stroke[1]},function(J_a){this._createFont().stroke===J_n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=J_a}),J_o(0,J_b,"border",function(){return this._border?this._border.value:""},function(J_a){if("none"!=J_a){this._border||(this._border={});var J_b=(this._border.value=J_a).split(" ");if(this._border.color=J_S.create(J_b[J_b.length-1]),1==J_b.length)return this._border.size=1,void(this._border.type="solid");var J_c=0;0<J_b[0].indexOf("px")?(this._border.size=parseInt(J_b[0]),J_c++):this._border.size=1,this._border.type=J_b[J_c],this._ower._renderType|=256}else this._border=null}),J_o(0,J_b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(J_a){J_a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==J_a?null:J_S.create(J_a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),J_o(0,J_b,"position",function(){return 4&this._type?"absolute":""},function(J_a){"absolute"==J_a?this._type|=4:this._type&=-5}),J_o(0,J_b,"display",null,function(J_a){switch(J_a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),J_o(0,J_b,"paddingLeft",function(){return this.padding[3]}),J_o(0,J_b,"paddingTop",function(){return this.padding[0]}),J_o(0,J_b,"_scale",null,function(J_a){this._ower.scale(J_a[0],J_a[1])}),J_o(0,J_b,"_rotate",null,function(J_a){this._ower.rotation=J_a}),J_m.parseOneCSS=function(J_a,J_b){for(var J_c,J_d=[],J_e=J_a.split(J_b),J_f=0,J_g=J_e.length;J_f<J_g;J_f++){var J_h=J_e[J_f],J_i=J_h.indexOf(":"),J_j=J_h.substr(0,J_i).replace(/^\s+|\s+$/g,"");if(0!=J_j.length){var J_k=J_h.substr(J_i+1).replace(/^\s+|\s+$/g,""),J_l=[J_j,J_k];switch(J_j){case"italic":case"bold":J_l[1]="true"==J_k;break;case"line-height":J_l[0]="lineHeight",J_l[1]=parseInt(J_k);break;case"font-size":J_l[0]="fontSize",J_l[1]=parseInt(J_k);break;case"padding":1<(J_c=J_k.split(" ")).length||(J_c[1]=J_c[2]=J_c[3]=J_c[0]),J_l[1]=[parseInt(J_c[0]),parseInt(J_c[1]),parseInt(J_c[2]),parseInt(J_c[3])];break;case"rotate":J_l[0]="_rotate",J_l[1]=parseFloat(J_k);break;case"scale":J_c=J_k.split(" "),J_l[0]="_scale",J_l[1]=[parseFloat(J_c[0]),parseFloat(J_c[1])];break;case"translate":J_c=J_k.split(" "),J_l[0]="_translate",J_l[1]=[parseInt(J_c[0]),parseInt(J_c[1])];break;default:(J_l[0]=J_m._CSSTOVALUE[J_j])||(J_l[0]=J_j)}J_d.push(J_l)}}return J_d},J_m.parseCSS=function(J_a,J_b){for(var J_c;null!=(J_c=J_m._parseCSSRegExp.exec(J_a));)J_m.styleSheets[J_c[1]]=J_m.parseOneCSS(J_c[2],";")},J_m.EMPTY=new J_m(null),J_m._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},J_m._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),J_m._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},J_m._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},J_m.styleSheets={},J_m.ALIGN_CENTER=1,J_m.ALIGN_RIGHT=2,J_m.VALIGN_MIDDLE=1,J_m.VALIGN_BOTTOM=2,J_m._CSS_BLOCK=1,J_m._DISPLAY_NONE=2,J_m._ABSOLUTE=4,J_m._WIDTH_SET=8,J_m._PADDING=[0,0,0,0],J_m._RECT=[-1,-1,-1,-1],J_m._SPACING=[0,0],J_m._ALIGNS=[0,0,0],J_m.ADDLAYOUTED=512,J_m._NEWFONT=4096,J_m._HEIGHT_SET=8192,J_m._BACKGROUND_SET=16384,J_m._FLOAT_RIGHT=32768,J_m._LINE_ELEMENT=65536,J_m._NOWARP=131072,J_m._WIDTHAUTO=262144,J_m._LISTERRESZIE=524288,J_m}(J_h),J_ca=function(J_a){function J_g(){this.url=null,this.audio=null,this.loaded=!1,J_g.__super.call(this)}J_k(J_g,"laya.media.h5audio.AudioSound",J_j);var J_b=J_g.prototype;return J_b.dispose=function(){var J_a=J_g._audioCache[this.url];J_a&&(J_a.src="",delete J_g._audioCache[this.url])},J_b.load=function(J_a){var J_b;if(J_a=J_I.formatURL(J_a),(this.url=J_a)==J_E._tMusic?(J_g._initMusicAudio(),(J_b=J_g._musicAudio).src!=J_a&&(J_g._audioCache[J_b.src]=null,J_b=null)):J_b=J_g._audioCache[J_a],J_b&&2<=J_b.readyState)this.event("complete");else{J_b||(J_b=J_a==J_E._tMusic?(J_g._initMusicAudio(),J_g._musicAudio):J_O.createElement("audio"),(J_g._audioCache[J_a]=J_b).src=J_a),J_b.addEventListener("canplaythrough",J_d),J_b.addEventListener("error",J_e);var J_c=this;(this.audio=J_b).load?J_b.load():J_e()}function J_d(){J_f(),J_c.loaded=!0,J_c.event("complete")}function J_e(){J_b.load=null,J_f(),J_c.event("error")}function J_f(){J_b.removeEventListener("canplaythrough",J_d),J_b.removeEventListener("error",J_e)}},J_b.play=function(J_a,J_b,J_c){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),!this.url)return null;var J_d,J_e;if(!(J_d=this.url==J_E._tMusic?J_g._musicAudio:J_g._audioCache[this.url]))return null;J_e=J_W.getItem("audio:"+this.url),J_J.isConchApp?J_e||((J_e=J_O.createElement("audio")).src=this.url):this.url==J_E._tMusic?(J_g._initMusicAudio(),(J_e=J_g._musicAudio).src=this.url):J_e=J_e||J_d.cloneNode(!0);var J_f=new J_ma(J_e);return J_f.url=this.url,J_f.loops=J_b,J_f.startTime=J_a,J_f.startHandler=J_c,J_f.play(!1),J_E.addChannel(J_f),J_f},J_o(0,J_b,"duration",function(){var J_a;return(J_a=J_g._audioCache[this.url])?J_a.duration:0}),J_g._initMusicAudio=function(){J_g._musicAudio||(J_g._musicAudio||(J_g._musicAudio=J_O.createElement("audio")),J_J.isConchApp||J_O.document.addEventListener("mousedown",J_g._makeMusicOK))},J_g._makeMusicOK=function(){J_O.document.removeEventListener("mousedown",J_g._makeMusicOK),J_g._musicAudio.src?J_g._musicAudio.play():(J_g._musicAudio.src="",J_g._musicAudio.load())},J_g._audioCache={},J_g._musicAudio=null,J_g}(),J_da=function(J_a){function J_b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,J_b.__super.call(this)}J_k(J_b,"laya.media.SoundChannel",J_j);var J_c=J_b.prototype;return J_c.play=function(){},J_c.stop=function(){},J_c.pause=function(){},J_c.resume=function(){},J_c.__runComplete=function(J_a){J_a&&J_a.run()},J_o(0,J_c,"volume",function(){return 1},function(J_a){}),J_o(0,J_c,"position",function(){return 0}),J_o(0,J_c,"duration",function(){return 0}),J_b}(),J_ea=function(J_a){function J_b(){J_b.__super.call(this)}J_k(J_b,"laya.media.Sound",J_j);var J_c=J_b.prototype;return J_c.load=function(J_a){},J_c.play=function(J_a,J_b,J_c){return void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),null},J_c.dispose=function(){},J_o(0,J_c,"duration",function(){return 0}),J_b}(),J_fa=function(J_a){function J_e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,J_e.__super.call(this)}J_k(J_e,"laya.media.webaudio.WebAudioSound",J_j);var J_b=J_e.prototype;return J_b.load=function(J_a){this.url=J_a,this.audioBuffer=J_e._dataCache[J_a],this.audioBuffer?this._loaded(this.audioBuffer):(J_e.e.on("loaded:"+J_a,this,this._loaded),J_e.e.on("err:"+J_a,this,this._err),J_e.__loadingSound[J_a]||(J_e.__loadingSound[J_a]=!0,J_z.loader.load(J_a,J_u.create(this,this.onloaded),null,J_ha.BUFFER,4,!1,null,!0)))},J_b.onloaded=function(J_a){J_a||this._err(),this._disposed?this._removeLoadEvents():(this.data=J_a,J_e.buffs.push({buffer:this.data,url:this.url}),J_e.decode())},J_b._err=function(){if(this._removeLoadEvents(),J_e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var J_a,J_b,J_c,J_d=0;for(J_a=(J_b=this.__toPlays).length,J_d=0;J_d<J_a;J_d++)(J_c=J_b[J_d])[3]&&!J_c[3].isStopped&&J_c[3].event("error");this.__toPlays.length=0}},J_b._loaded=function(J_a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=J_a,this.loaded=!0,this.event("complete"))},J_b._removeLoadEvents=function(){J_e.e.off("loaded:"+this.url,this,this._loaded),J_e.e.off("err:"+this.url,this,this._err)},J_b.__playAfterLoaded=function(){if(this.__toPlays){var J_a,J_b,J_c,J_d=0;for(J_a=(J_b=this.__toPlays).length,J_d=0;J_d<J_a;J_d++)(J_c=J_b[J_d])[3]&&!J_c[3].isStopped&&this.play(J_c[0],J_c[1],J_c[2],J_c[3]);this.__toPlays.length=0}},J_b.play=function(J_a,J_b,J_c,J_d){return void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),J_d=J_d||new J_na,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([J_a,J_b,J_c,J_d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),J_d.url=this.url,J_d.loops=J_b,J_d.audioBuffer=this.audioBuffer,J_d.startTime=J_a,J_d.startHandler=J_c,J_d.play(!1),J_E.addChannel(J_d),J_d},J_b.dispose=function(){this._disposed=!0,delete J_e._dataCache[this.url],delete J_e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},J_o(0,J_b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),J_e.decode=function(){if(!(J_e.buffs.length<=0||J_e.isDecoding))if(J_e.isDecoding=!0,(J_e.tInfo=J_e.buffs.shift())&&J_e.tInfo.buffer&&J_e.tInfo.buffer.byteLength)try{J_e.ctx.decodeAudioData(J_e.tInfo.buffer,J_e._done,J_e._fail)}catch(J_a){console.error("decodeAudioData error  byteLength:"+J_e.tInfo.buffer.byteLength+"  url:"+J_e.tInfo.url)}else J_e._fail()},J_e._done=function(J_a){J_e.e.event("loaded:"+J_e.tInfo.url,J_a),J_e._dataCache[J_e.tInfo.url]=J_a,J_e.isDecoding=!1,J_e.decode()},J_e._fail=function(){J_e.e.event("err:"+J_e.tInfo.url,null),J_e.isDecoding=!1,J_e.decode()},J_e._playEmptySound=function(){if(null!=J_e.ctx){if(J_e._emptySource&&(J_e._emptySource.stop(),J_e._emptySource.disconnect(0),!J_na._tryCleanFailed))try{J_e._emptySource.buffer=null}catch(J_a){J_na._tryCleanFailed=!0}var J_a=J_e.ctx.createBufferSource();J_a.buffer=J_e._miniBuffer,J_a.connect(J_e.ctx.destination),J_a.start(0,0,0),J_e._emptySource=J_a}},J_e._unlock=function(){J_e._unlocked||(J_e._playEmptySound(),"running"==J_e.ctx.state?(J_O.document.removeEventListener("mousedown",J_e._unlock,!0),J_O.document.removeEventListener("touchend",J_e._unlock,!0),J_O.document.removeEventListener("touchstart",J_e._unlock,!0),J_e._unlocked=!0):"suspended"==J_e.ctx.state&&J_E._recoverWebAudio())},J_e.initWebAudio=function(){"running"!=J_e.ctx.state&&(J_e._unlock(),J_O.document.addEventListener("mousedown",J_e._unlock,!0),J_O.document.addEventListener("touchend",J_e._unlock,!0),J_O.document.addEventListener("touchstart",J_e._unlock,!0))},J_e._emptySource=null,J_e._dataCache={},J_e.buffs=[],J_e.isDecoding=!1,J_e._unlocked=!1,J_e.tInfo=null,J_e.__loadingSound={},J_i(J_e,["window",function(){return this.window=J_O.window},"webAudioEnabled",function(){return this.webAudioEnabled=J_e.window.AudioContext||J_e.window.webkitAudioContext||J_e.window.mozAudioContext},"ctx",function(){return this.ctx=J_e.webAudioEnabled?new(J_e.window.AudioContext||J_e.window.webkitAudioContext||J_e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=J_e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new J_j}]),J_e}(),J_ga=function(J_a){function J_b(){this._responseType=null,this._data=null,J_b.__super.call(this),this._http=new J_O.window.XMLHttpRequest}J_k(J_b,"laya.net.HttpRequest",J_j);var J_c=J_b.prototype;return J_c.send=function(J_a,J_b,J_c,J_d,J_e){void 0===J_c&&(J_c="get"),void 0===J_d&&(J_d="text"),this._responseType=J_d,this._data=null;var J_f=this,J_g=this._http;if(J_g.open(J_c,J_a,!0),J_e)for(var J_h=0;J_h<J_e.length;J_h++)J_g.setRequestHeader(J_e[J_h++],J_e[J_h]);else J_J.isConchApp||(J_b&&"string"!=typeof J_b?J_g.setRequestHeader("Content-Type","application/json"):J_g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));J_g.responseType="arraybuffer"!==J_d?"text":"arraybuffer",J_g.onerror=function(J_a){J_f._onError(J_a)},J_g.onabort=function(J_a){J_f._onAbort(J_a)},J_g.onprogress=function(J_a){J_f._onProgress(J_a)},J_g.onload=function(J_a){J_f._onLoad(J_a)},J_g.send(J_b)},J_c._onProgress=function(J_a){J_a&&J_a.lengthComputable&&this.event("progress",J_a.loaded/J_a.total)},J_c._onAbort=function(J_a){this.error("Request was aborted by user")},J_c._onError=function(J_a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},J_c._onLoad=function(J_a){var J_b=this._http,J_c=void 0!==J_b.status?J_b.status:200;200===J_c||204===J_c||0===J_c?this.complete():this.error("["+J_b.status+"]"+J_b.statusText+":"+J_b.responseURL)},J_c.error=function(J_a){this.clear(),this.event("error",J_a)},J_c.complete=function(){this.clear();var J_b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=J_$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(J_a){J_b=!1,this.error(J_a.message)}J_b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},J_c.clear=function(){var J_a=this._http;J_a.onerror=J_a.onabort=J_a.onprogress=J_a.onload=null},J_o(0,J_c,"url",function(){return this._http.responseURL}),J_o(0,J_c,"http",function(){return this._http}),J_o(0,J_c,"data",function(){return this._data}),J_b}(),J_ha=function(J_a){function J_C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,J_C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}J_k(J_C,"laya.net.Loader",J_j);var J_b=J_C.prototype;return J_b.load=function(J_a,J_b,J_c,J_d,J_e){if(J_a&&""!=J_a||console.error("Loader 加载的url不合法 "+J_a),void 0===J_c&&(J_c=!0),void 0===J_e&&(J_e=!1),0===(this._url=J_a).indexOf("data:image")?this._type=J_b="image":this._type=J_b||(J_b=this.getTypeFromUrl(J_a)),this._cache=J_c,this._data=null,!J_e&&J_C.loadedMap[J_a])return this._data=J_C.loadedMap[J_a],this.event("progress",1),void this.event("complete",this._data);if(J_d&&J_C.setGroup(J_a,J_d),null!=J_C.parserMap[J_b])return this._customParse=!0,void(J_C.parserMap[J_b]instanceof laya.utils.Handler?J_C.parserMap[J_b].runWith(this):J_C.parserMap[J_b].call(null,this));if("image"===J_b||"htmlimage"===J_b||"nativeimage"===J_b)return this._loadImage(J_a);if("ttf"===J_b)return this._loadTTF(J_a);switch(J_b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:J_b}J_C.preLoadedMap[J_a]?this.onLoaded(J_C.preLoadedMap[J_a]):J_g.resMgrLoad(J_a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},J_b.getTypeFromUrl=function(J_a){var J_b=J_$.getFileExtension(J_a);return J_b?J_C.typeMap[J_b]:(console.warn("Not recognize the resources suffix",J_a),"text")},J_b._loadTTF=function(J_a){J_a=J_I.formatURL(J_a);var J_b=new J_H;J_b.complete=J_u.create(this,this.onLoaded),J_b.load(J_a)},J_b._loadImage=function(J_a){J_g.imgMgrLoad(J_a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},J_b._loadImageComplete=function(J_a,J_b,J_c){if(null!=J_c)if(J_c instanceof ArrayBuffer){var J_d=new DataView(J_c),J_e=new laya.webgl.resource.WebGLImage(new Uint8Array(J_c,8),J_a,0,!1,J_d.getUint32(0),J_d.getUint32(4));this.onLoaded(J_e)}else if(J_c instanceof J_ka)J_C.imgMgrSet[J_a]=J_b,J_g.imgMgrLock(J_a,J_C.imgMgrSet[J_a]),this._url=J_a,this.complete(J_c);else{var J_f=-1!=J_a.indexOf(".png",J_a.length-4)?6408:6407;J_e=new laya.webgl.resource.WebGLImage(J_c,J_a,J_f,!1,J_c.width,J_c.height);this.onLoaded(J_e)}else this.event("error","Load image failed")},J_b._loadSound=function(J_a){var J_b=new J_E._soundClass,J_c=this;function J_d(){J_b.offAll()}J_b.on("complete",this,function(){J_d(),J_c.onLoaded(J_b)}),J_b.on("error",this,function(){J_d(),J_b.dispose(),J_c.event("error","Load sound failed")}),J_b.load(J_a)},J_b.onProgress=function(J_a){"atlas"===this._type?this.event("progress",.3*J_a):this.event("progress",J_a)},J_b.onError=function(J_a){this.event("error",J_a)},J_b._loadedComplete=function(J_a,J_b,J_c){if(null!=J_c)switch(this._type){case"atlas":case"plf":case"json":var J_d=new J_P(J_c);this.onLoaded(JSON.parse(J_d.readUTFBytes()));break;case"font":J_d=new J_P(J_c);this.onLoaded(J_$.parseXMLFromString(J_d.readUTFBytes()));break;default:this.onLoaded(J_c)}else this.event("error",J_a)},J_b.onLoaded=function(J_a){var J_b=this._type;if("plf"==J_b)this.parsePLFData(J_a),this.complete(J_a);else if("image"===J_b){var J_c=new J_ka(J_a);J_c.url=this._url,this.complete(J_c)}else if("sound"===J_b||"htmlimage"===J_b||"nativeimage"===J_b)this.complete(J_a);else if("atlas"===J_b){if(!J_a.src&&!J_a._setContext){if(!this._data){if((this._data=J_a).meta&&J_a.meta.image)for(var J_d=J_a.meta.image.split(","),J_e=0<=this._url.indexOf("/")?"/":"\\",J_f=this._url.lastIndexOf(J_e),J_g=0<=J_f?this._url.substr(0,J_f+1):"",J_h=0,J_i=J_d.length;J_h<J_i;J_h++)J_d[J_h]=J_g+J_d[J_h];else J_d=[this._url.replace(".json",".png")];J_d.reverse(),J_a.toLoads=J_d,J_a.pics=[]}return this.event("progress",.3+1/J_d.length*.6),this._loadImage(J_d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(J_a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var J_j=this._data.frames,J_k=this._url.split("?")[0],J_l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:J_k.substring(0,J_k.lastIndexOf("."))+"/",J_m=this._data.pics,J_n=J_I.formatURL(this._url),J_o=J_C.atlasMap[J_n]||(J_C.atlasMap[J_n]=[]);J_o.dir=J_l;var J_p=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var J_q in J_p=parseFloat(this._data.meta.scale),J_j){var J_r,J_u=J_j[J_q],J_v=J_m[J_u.frame.idx?J_u.frame.idx:0],J_w=J_I.formatURL(J_l+J_q);J_v.scaleRate=J_p,J_r=J_ka.create(J_v,J_u.frame.x,J_u.frame.y,J_u.frame.w,J_u.frame.h,J_u.spriteSourceSize.x,J_u.spriteSourceSize.y,J_u.sourceSize.w,J_u.sourceSize.h),J_C.cacheRes(J_w,J_r),J_C.keepCache(this._url,J_l+J_q),J_r.url=J_w,J_o.push(J_w)}else for(J_q in J_j)J_v=J_m[(J_u=J_j[J_q]).frame.idx?J_u.frame.idx:0],J_w=J_I.formatURL(J_l+J_q),J_C.cacheRes(J_w,J_ka.create(J_v,J_u.frame.x,J_u.frame.y,J_u.frame.w,J_u.frame.h,J_u.spriteSourceSize.x,J_u.spriteSourceSize.y,J_u.sourceSize.w,J_u.sourceSize.h)),J_C.loadedMap[J_w].url=J_w,J_C.keepCache(this._url,J_l+J_q),J_o.push(J_w);delete this._data.pics,this.complete(this._data)}else if("font"==J_b){if(!J_a.src)return this._data=J_a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var J_x=new J_D;J_x.parseFont(this._data,J_a);var J_y=this._url.split(".fnt")[0].split("/"),J_z=J_y[J_y.length-1];J_qa.registerBitmapFont(J_z,J_x),this._data=J_x,this.complete(this._data)}else if("pkm"==J_b){var J_A=J_ya.create(J_a,this._url),J_B=new J_ka(J_A);J_B.url=this._url,this.complete(J_B)}else this.complete(J_a)},J_b.parsePLFData=function(J_a){var J_b,J_c,J_d;for(J_b in J_a)switch(J_d=J_a[J_b],J_b){case"json":case"text":for(J_c in J_d)J_C.preLoadedMap[J_I.formatURL(J_c)]=J_d[J_c];break;default:for(J_c in J_d)J_C.preLoadedMap[J_I.formatURL(J_c)]=J_d[J_c]}},J_b.complete=function(J_a){this._data=J_a,this._customParse?this.event("loaded",J_a instanceof Array?[J_a]:J_a):(J_C._loaders.push(this),J_C._isWorking||J_C.checkNext())},J_b.endLoad=function(J_a){J_a&&(this._data=J_a),this._cache&&J_C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},J_o(0,J_b,"url",function(){return this._url}),J_o(0,J_b,"data",function(){return this._data}),J_o(0,J_b,"cache",function(){return this._cache}),J_o(0,J_b,"type",function(){return this._type}),J_C.checkNext=function(){J_C._isWorking=!0;for(var J_a=J_O.now();J_C._startIndex<J_C._loaders.length;)if(J_O.now(),J_C._loaders[J_C._startIndex].endLoad(),J_C._startIndex++,J_O.now()-J_a>J_C.maxTimeOut)return console.warn("loader callback cost a long time:"+(J_O.now()-J_a)+" url="+J_C._loaders[J_C._startIndex-1].url),void J_z.timer.frameOnce(1,null,J_C.checkNext);J_C._loaders.length=0,J_C._startIndex=0,J_C._isWorking=!1},J_C.clearRes=function(J_a,J_b){if(null!=J_a){void 0===J_b&&(J_b=!1),J_a=J_I.formatURL(J_a);var J_c=J_C.getAtlas(J_a);if(J_c){for(var J_d=0,J_e=J_c.length;J_d<J_e;J_d++){var J_f=J_c[J_d],J_g=J_C.getRes(J_f);delete J_C.loadedMap[J_f],J_C.clearCache(J_a.substring(J_I.basePath.length),J_f.substring(J_I.basePath.length)),J_g&&J_g.destroy(J_b)}J_c.length=0,delete J_C.atlasMap[J_a],delete J_C.loadedMap[J_a]}else{var J_h=J_C.loadedMap[J_a];J_h&&(delete J_C.loadedMap[J_a],J_h instanceof laya.resource.Texture&&J_h.bitmap&&J_h.destroy(J_b))}}},J_C.clearTextureRes=function(J_a){J_a=J_I.formatURL(J_a);var J_b=laya.net.Loader.getAtlas(J_a),J_c=J_b&&0<J_b.length?laya.net.Loader.getRes(J_b[0]):laya.net.Loader.getRes(J_a);J_c&&J_c.bitmap&&(J_J.isConchApp&&!J_J.isConchWebGL?J_c.bitmap.source.releaseTexture&&J_c.bitmap.source.releaseTexture():null==J_c.bitmap._atlaser&&J_c.bitmap.releaseResource(!0))},J_C.getRes=function(J_a){return J_C.loadedMap[J_I.formatURL(J_a)]},J_C.getAtlas=function(J_a){return J_C.atlasMap[J_I.formatURL(J_a)]},J_C.cacheRes=function(J_a,J_b){J_a=J_I.formatURL(J_a),null!=J_C.loadedMap[J_a]?console.warn("Resources already exist,is repeated loading:",J_a):J_C.loadedMap[J_a]=J_b},J_C.setGroup=function(J_a,J_b){J_C.groupMap[J_b]||(J_C.groupMap[J_b]=[]),J_C.groupMap[J_b].push(J_a)},J_C.clearResByGroup=function(J_a){if(J_C.groupMap[J_a]){var J_b=J_C.groupMap[J_a],J_c=0,J_d=J_b.length;for(J_c=0;J_c<J_d;J_c++)J_C.clearRes(J_b[J_c]);J_b.length=0}},J_C.keepCache=function(J_a,J_b){if(J_a&&J_b){var J_c=J_C.cacheSet[J_b];J_c?-1==J_c.indexOf(J_a)&&J_c.push(J_a):J_C.cacheSet[J_b]=[J_a]}},J_C.clearCache=function(J_a,J_b){if(J_a&&J_b){var J_c=J_C.cacheSet[J_b];if(J_c){var J_d=J_c.indexOf(J_a);if(-1!==J_d){var J_e=J_c.length-1;0==J_e?(delete J_C.cacheSet[J_b],0<J_C.imgMgrSet[J_b]?J_g.imgMgrFree(J_b,J_C.imgMgrSet[J_b]):J_C.clearRes(J_b,!0)):(J_c[J_d]=J_c[J_e],J_c.length=J_e)}}}},J_C.saveObject=function(J_a,J_b,J_c){if(J_b&&J_a){var J_d=J_C.objectSet[J_a];J_d?(console.warn("Loader.saveObject: "+J_a),J_d[0]=J_b,J_d[1]=J_c):J_C.objectSet[J_a]=[J_b,J_c,[]]}},J_C.findObject=function(J_a){if(J_a){var J_b=J_C.objectSet[J_a];if(J_b)return J_b[0]}return null},J_C.keepObject=function(J_a,J_b){if(J_a&&J_b){var J_c=J_C.objectSet[J_b];J_c&&-1===J_c[2].indexOf(J_a)&&J_c[2].push(J_a)}},J_C.clearObject=function(J_a,J_b){if(J_a&&J_b){var J_c=J_C.objectSet[J_b];if(J_c){var J_d=J_c[2],J_e=J_d.indexOf(J_a);if(-1!==J_e){var J_f=J_d.length-1;0==J_f?(delete J_C.objectSet[J_b],J_c[1]&&J_c[1].call(null,J_c[0])):(J_d[J_e]=J_d[J_f],J_d.length=J_f)}}}},J_C.TEXT="text",J_C.JSON="json",J_C.XML="xml",J_C.BUFFER="arraybuffer",J_C.IMAGE="image",J_C.SOUND="sound",J_C.ATLAS="atlas",J_C.FONT="font",J_C.TTF="ttf",J_C.PLF="plf",J_C.PKM="pkm",J_C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},J_C.parserMap={},J_C.groupMap={},J_C.maxTimeOut=100,J_C.loadedMap={},J_C.preLoadedMap={},J_C.atlasMap={},J_C._loaders=[],J_C._isWorking=!1,J_C._startIndex=0,J_C.imgCache={},J_C.cacheSet={},J_C.objectSet={},J_C.imgMgrSet={},J_C}(),J_ia=function(J_a){var J_m;function J_n(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},J_n.__super.call(this);for(var J_a=0;J_a<this._maxPriority;J_a++)this._resInfos[J_a]=[]}J_k(J_n,"laya.net.LoaderManager",J_j);var J_b=J_n.prototype;return J_b.create=function(J_a,J_c,J_b,J_d,J_e,J_f,J_g,J_h){if(null==J_f&&(J_f=2),null==J_g&&(J_g=!0),J_a instanceof Array){var J_i=J_a,J_j=J_i.length,J_k=0;if(J_b)var J_l=J_u.create(J_b.caller,J_b.method,J_b.args,!1);for(var J_m=0;J_m<J_j;J_m++){var J_n=J_i[J_m];"string"==typeof J_n&&(J_n=J_i[J_m]={url:J_n}),J_n.progress=0}for(J_m=0;J_m<J_j;J_m++){J_n=J_i[J_m];var J_o=J_b?J_u.create(null,J_r,[J_n],!1):null,J_p=J_b||J_c?J_u.create(null,J_q,[J_n]):null;this._create(J_n.url,J_p,J_o,J_n.clas||J_d,J_n.params||J_e,null!=J_n.priority&&0<=J_n.priority?J_n.priority:J_f,J_g,J_n.group||J_h)}function J_q(J_a,J_b){J_k++,J_a.progress=1,J_k===J_j&&J_c&&J_c.run()}function J_r(J_a,J_b){J_a.progress=J_b;for(var J_c=0,J_d=0;J_d<J_j;J_d++){J_c+=J_i[J_d].progress}var J_e=J_c/J_j;J_l.runWith(J_e)}return!0}return this._create(J_a,J_c,J_b,J_d,J_e,J_f,J_g,J_h)},J_b._create=function(J_b,J_c,J_a,J_d,J_e,J_f,J_g,J_h){J_b&&""!=J_b||console.error("加载的url不合法 "+J_b),null==J_f&&(J_f=2),null==J_g&&(J_g=!0);var J_i=J_I.formatURL(J_b),J_j=this.getRes(J_i);if(J_j)!J_j.hasOwnProperty("loaded")||J_j.loaded?(J_a&&J_a.runWith(1),J_c&&J_c.run()):J_c&&J_z.loader._createListener(J_b,J_c.caller,J_c.method,J_c.args,!0,!1);else{var J_k=J_$.getFileExtension(J_b),J_l=J_n.createMap[J_k];if(!J_l)throw new Error("LoaderManager:unknown file("+J_b+") extension with: "+J_k+".");J_d||(J_d=J_l[0]);var J_m=J_l[1];if("atlas"==J_k)this.load(J_b,J_c,J_a,J_m,J_f,J_g);else{J_d===J_ka&&(J_m="htmlimage"),(J_j=J_d?new J_d:null).hasOwnProperty("_loaded")&&(J_j._loaded=!1),J_j._setUrl(J_b),J_h&&J_j._setGroup(J_h),this._createLoad(J_j,J_b,J_u.create(null,function(J_a){J_j&&!J_j.destroyed&&J_a&&J_j.onAsynLoaded.call(J_j,J_b,J_a,J_e),J_c&&J_c.run();J_z.loader.event(J_b)}),J_a,J_m,J_f,!1,J_h,!0),J_g&&this.cacheRes(J_i,J_j)}}return J_j},J_b.load=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){J_a&&""!=J_a||console.error("加载的url不合法 "+J_a);var J_i=this;if(null==J_e&&(J_e=2),null==J_f&&(J_f=!0),void 0===J_h&&(J_h=!1),J_a instanceof Array)return this._loadAssets(J_a,J_b,J_c,J_d,J_e,J_f,J_g);var J_j=J_ha.getRes(J_a);if(null!=J_j)J_z.timer.frameOnce(1,null,function(){J_c&&J_c.runWith(1),J_b&&J_b.runWith(J_j),J_i._loaderCount||J_i.event("complete")});else{var J_k=J_n._resMap[J_a];J_k?(J_b&&J_k._createListener("complete",J_b.caller,J_b.method,J_b.args,!1,!1),J_c&&J_k._createListener("progress",J_c.caller,J_c.method,J_c.args,!1,!1)):((J_k=this._infoPool.length?this._infoPool.pop():new J_m).url=J_a,J_k.type=J_d,J_k.cache=J_f,J_k.group=J_g,J_k.ignoreCache=J_h,J_k.priority=J_e,J_b&&J_k.on("complete",J_b.caller,J_b.method,J_b.args),J_c&&J_k.on("progress",J_c.caller,J_c.method,J_c.args),J_n._resMap[J_a]=J_k,J_e=J_e<this._maxPriority?0<=J_e?J_e:0:this._maxPriority-1,this._resInfos[J_e].push(J_k),this._next())}return this},J_b._createLoad=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){var J_j=this;if(null==J_f&&(J_f=2),null==J_g&&(J_g=!0),void 0===J_i&&(J_i=!1),J_b instanceof Array)return this._loadAssets(J_b,J_c,J_d,J_e,J_f,J_g,J_h);var J_k=J_ha.getRes(J_b);if(null!=J_k)J_z.timer.frameOnce(1,null,function(){J_d&&J_d.runWith(1),J_c&&J_c.runWith(J_k),J_j._loaderCount||J_j.event("complete")});else{var J_l=J_n._resMap[J_b];J_l?(J_c&&J_l._createListener("complete",J_c.caller,J_c.method,J_c.args,!1,!1),J_d&&J_l._createListener("progress",J_d.caller,J_d.method,J_d.args,!1,!1)):((J_l=this._infoPool.length?this._infoPool.pop():new J_m).url=J_b,J_l.clas=J_a,J_l.type=J_e,J_l.cache=J_g,J_l.group=J_h,J_l.ignoreCache=J_i,J_l.priority=J_f,J_c&&J_l.on("complete",J_c.caller,J_c.method,J_c.args),J_d&&J_l.on("progress",J_d.caller,J_d.method,J_d.args),J_n._resMap[J_b]=J_l,J_f=J_f<this._maxPriority?0<=J_f?J_f:0:this._maxPriority-1,this._resInfos[J_f].push(J_l),this._next())}return this},J_b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var J_a=0;J_a<this._maxPriority;J_a++)for(var J_b=this._resInfos[J_a];0<J_b.length;){var J_c=J_b.shift();if(J_c)return this._doLoad(J_c)}this._loaderCount||this.event("complete")}},J_b._doLoad=function(J_b){this._loaderCount++;var J_c=this._loaders.length?this._loaders.pop():new J_ha;J_c.on("complete",null,J_e),J_c.on("progress",null,function(J_a){J_b.event("progress",J_a)}),J_c.on("error",null,function(J_a){J_e(null)});var J_d=this;function J_e(J_a){J_c.offAll(),J_c._data=null,J_c._customParse=!1,J_d._loaders.push(J_c),J_d._endLoad(J_b,J_a instanceof Array?[J_a]:J_a),J_d._loaderCount--,J_d._next()}J_c._class=J_b.clas,1<=J_b.priority?(J_c.priority=J_b.priority,J_c.realTime=!1):(J_c.priority=0,J_c.realTime=!0),J_c.load(J_b.url,J_b.type,J_b.cache,J_b.group,J_b.ignoreCache)},J_b._endLoad=function(J_a,J_b){var J_c=J_a.url;if(null==J_b){var J_d=this._failRes[J_c]||0;if(J_d<this.retryNum)return console.warn("[warn]Retry to load:",J_c),this._failRes[J_c]=J_d+1,void J_z.timer.once(this.retryDelay,this,this._addReTry,[J_a],!1);console.warn("[error]Failed to load:",J_c),this.event("error",J_c)}this._failRes[J_c]&&(this._failRes[J_c]=0),delete J_n._resMap[J_c],J_a.event("complete",J_b),J_a.offAll(),this._infoPool.push(J_a)},J_b._addReTry=function(J_a){this._resInfos[this._maxPriority-1].push(J_a),this._next()},J_b.clearRes=function(J_a,J_b){void 0===J_b&&(J_b=!1),J_ha.clearRes(J_a,J_b)},J_b.getRes=function(J_a){return J_ha.getRes(J_a)},J_b.cacheRes=function(J_a,J_b){J_ha.cacheRes(J_a,J_b)},J_b.clearTextureRes=function(J_a){J_ha.clearTextureRes(J_a)},J_b.setGroup=function(J_a,J_b){J_ha.setGroup(J_a,J_b)},J_b.clearResByGroup=function(J_a){J_ha.clearResByGroup(J_a)},J_b.clearUnLoaded=function(){for(var J_a=0;J_a<this._maxPriority;J_a++){for(var J_b=this._resInfos[J_a],J_c=J_b.length-1;-1<J_c;J_c--){var J_d=J_b[J_c];J_d&&(J_d.offAll(),this._infoPool.push(J_d))}J_b.length=0}this._loaderCount=0,J_n._resMap={}},J_b.cancelLoadByUrls=function(J_a){if(J_a)for(var J_b=0,J_c=J_a.length;J_b<J_c;J_b++)this.cancelLoadByUrl(J_a[J_b])},J_b.cancelLoadByUrl=function(J_a){for(var J_b=0;J_b<this._maxPriority;J_b++)for(var J_c=this._resInfos[J_b],J_d=J_c.length-1;-1<J_d;J_d--){var J_e=J_c[J_d];J_e&&J_e.url===J_a&&(J_c[J_d]=null,J_e.offAll(),this._infoPool.push(J_e))}J_n._resMap[J_a]&&delete J_n._resMap[J_a]},J_b._loadAssets=function(J_a,J_c,J_g,J_b,J_d,J_e,J_f){null==J_d&&(J_d=2),null==J_e&&(J_e=!0);for(var J_h=J_a.length,J_i=0,J_j=0,J_k=[],J_l=!0,J_m=0;J_m<J_h;J_m++){var J_n=J_a[J_m];if(!J_n)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+J_a);"string"==typeof J_n&&(J_n={url:J_n,type:J_b,size:1,priority:J_d}),J_n.size||(J_n.size=1),J_n.progress=0,J_j+=J_n.size,J_k.push(J_n);var J_o=J_g?J_u.create(null,J_r,[J_n],!1):null,J_p=J_c||J_g?J_u.create(null,J_q,[J_n]):null;this.load(J_n.url,J_p,J_o,J_n.type,null!=J_n.priority&&0<=J_n.priority?J_n.priority:2,J_e,J_n.group||J_f)}function J_q(J_a,J_b){J_i++,J_a.progress=1,J_b||(J_l=!1),J_i===J_h&&J_c&&J_c.runWith(J_l)}function J_r(J_a,J_b){if(null!=J_g){J_a.progress=J_b;for(var J_c=0,J_d=0;J_d<J_k.length;J_d++){var J_e=J_k[J_d];J_c+=J_e.size*J_e.progress}var J_f=J_c/J_j;J_g.runWith(J_f)}}return this},J_n.cacheRes=function(J_a,J_b){J_ha.cacheRes(J_a,J_b)},J_n._resMap={},J_i(J_n,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),J_n.__init$=function(){J_m=function(J_a){function J_b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,J_b.__super.call(this)}return J_k(J_b,"",J_j),J_b}()},J_n}(),J_ja=(function(J_a){function J_e(J_a){J_e.__super.call(this),J_a||(J_a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var J_b=0,J_c=0,J_d=0;J_d<20;J_d++)J_d%5!=4?this._mat[J_b++]=J_a[J_d]:this._alpha[J_c++]=J_a[J_d];this._action=J_F.createFilterAction(32),this._action.data=this}J_k(J_e,"laya.filters.ColorFilter",J_r);var J_b=J_e.prototype;J_z.imps(J_b,{"laya.filters.IFilter":!0}),J_b.callNative=function(J_a){J_a._$P.cf=this;J_a.conchModel&&J_a.conchModel.setFilterMatrix&&J_a.conchModel.setFilterMatrix(this._mat,this._alpha)},J_o(0,J_b,"type",function(){return 32}),J_o(0,J_b,"action",function(){return this._action})}(),function(J_a){function J_d(J_a,J_b,J_c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===J_b&&(J_b=0),J_d.__super.call(this),this._byteClass=J_c||J_P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,J_a&&0<J_b&&J_b<65535&&this.connect(J_a,J_b)}J_k(J_d,"laya.net.Socket",J_j);var J_b=J_d.prototype;J_b.connect=function(J_a,J_b){var J_c="ws://"+J_a+":"+J_b;J_c="https:"==J_O.window.location.protocol?"wss://"+J_a+":"+J_b:"ws://"+J_a+":"+J_b,this.connectByUrl(J_c)},J_b.connectByUrl=function(J_a){var J_b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new J_O.window.WebSocket(J_a,this.protocols):this._socket=new J_O.window.WebSocket(J_a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(J_a){J_b._onOpen(J_a)},this._socket.onmessage=function(J_a){J_b._onMessage(J_a)},this._socket.onclose=function(J_a){J_b._onClose(J_a)},this._socket.onerror=function(J_a){J_b._onError(J_a)}},J_b.cleanSocket=function(){try{this._socket.close()}catch(J_a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},J_b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(J_a){}},J_b._onOpen=function(J_a){this._connected=!0,this.event("open",J_a)},J_b._onMessage=function(J_a){if(J_a&&J_a.data){var J_b=J_a.data;if(this.disableInput&&J_b)this.event("message",J_b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var J_c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,J_b&&("string"==typeof J_b?this._input.writeUTFBytes(J_b):this._input.writeArrayBuffer(J_b),this._addInputPosition=this._input.pos,this._input.pos=J_c),this.event("message",J_b)}}},J_b._onClose=function(J_a){this._connected=!1,this.event("close",J_a)},J_b._onError=function(J_a){this.event("error",J_a)},J_b.send=function(J_a){this._socket.send(J_a)},J_b.flush=function(){if(this._output&&0<this._output.length){var J_b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(J_a){J_b=J_a}this._output.endian=this.endian,this._output.clear(),J_b&&this.event("error",J_b)}},J_o(0,J_b,"input",function(){return this._input}),J_o(0,J_b,"output",function(){return this._output}),J_o(0,J_b,"connected",function(){return this._connected}),J_o(0,J_b,"endian",function(){return this._endian},function(J_a){this._endian=J_a,null!=this._input&&(this._input.endian=J_a),null!=this._output&&(this._output.endian=J_a)}),J_d.LITTLE_ENDIAN="littleEndian",J_d.BIG_ENDIAN="bigEndian"}(),function(J_a){function J_h(){J_h.__super.call(this),this._$1__id=++J_h._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(J_h._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,J_N.currentResourceManager&&J_N.currentResourceManager.addResource(this)}J_k(J_h,"laya.resource.Resource",J_j);var J_b=J_h.prototype;return J_z.imps(J_b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),J_b._setUrl=function(J_a){var J_b;this._url!==J_a&&(this._url&&((J_b=J_h._urlResourcesMap[this._url]).splice(J_b.indexOf(this),1),0===J_b.length&&delete J_h._urlResourcesMap[this._url]),J_a&&((J_b=J_h._urlResourcesMap[J_a])||(J_h._urlResourcesMap[J_a]=J_b=[]),J_b.push(this)),this._url=J_a)},J_b._getGroup=function(){return this._group},J_b._setGroup=function(J_a){var J_b;this._group!==J_a&&(this._group&&((J_b=J_h._groupResourcesMap[this._group]).splice(J_b.indexOf(this),1),0===J_b.length&&delete J_h._groupResourcesMap[this._group]),J_a&&((J_b=J_h._groupResourcesMap[J_a])||(J_h._groupResourcesMap[J_a]=J_b=[]),J_b.push(this)),this._group=J_a)},J_b._addReference=function(){this._referenceCount++},J_b._removeReference=function(){this._referenceCount--},J_b._clearReference=function(){this._referenceCount=0},J_b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},J_b.recreateResource=function(){this.completeCreate()},J_b.disposeResource=function(){},J_b.activeResource=function(J_a){void 0===J_a&&(J_a=!1),this._lastUseFrameCount=J_X.loopCount,!this._destroyed&&this.__loaded&&(this._released||J_a)&&this.recreateResource()},J_b.releaseResource=function(J_a){return void 0===J_a&&(J_a=!0),!(!J_a&&this.lock)&&(!(this._released&&!J_a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},J_b.onAsynLoaded=function(J_a,J_b,J_c){throw new Error("Resource: must override this function!")},J_b.destroy=function(){var J_a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete J_h._idResourcesMap[this.id],this._url&&((J_a=J_h._urlResourcesMap[this._url])&&(J_a.splice(J_a.indexOf(this),1),0===J_a.length&&delete J_h._urlResourcesMap[this.url]),J_ha.clearRes(this._url),this.__loaded||J_F.cancelLoadByUrl(this._url)),this._group&&((J_a=J_h._groupResourcesMap[this._group]).splice(J_a.indexOf(this),1),0===J_a.length&&delete J_h._groupResourcesMap[this.url]))},J_b.completeCreate=function(){this._released=!1,this.event("recovered",this)},J_b.dispose=function(){this.destroy()},J_o(0,J_b,"memorySize",function(){return this._memorySize},function(J_a){var J_b=J_a-this._memorySize;this._memorySize=J_a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,J_b),this.resourceManager&&this.resourceManager.addSize(J_b)}),J_o(0,J_b,"_loaded",null,function(J_a){this.__loaded=J_a}),J_o(0,J_b,"loaded",function(){return this.__loaded}),J_o(0,J_b,"id",function(){return this._$1__id}),J_o(0,J_b,"destroyed",function(){return this._destroyed}),J_o(0,J_b,"group",function(){return this._getGroup()},function(J_a){this._setGroup(J_a)}),J_o(0,J_b,"resourceManager",function(){return this._resourceManager}),J_o(0,J_b,"url",function(){return this._url}),J_o(0,J_b,"released",function(){return this._released}),J_o(0,J_b,"referenceCount",function(){return this._referenceCount}),J_h.getResourceByID=function(J_a){return J_h._idResourcesMap[J_a]},J_h.getResourceByURL=function(J_a,J_b){return void 0===J_b&&(J_b=0),null==J_h._urlResourcesMap[J_a]?null:J_h._urlResourcesMap[J_a][J_b]},J_h.getResourceCountByURL=function(J_a){return J_h._urlResourcesMap[J_a].length},J_h.destroyUnusedResources=function(J_a){var J_b;if(J_a){var J_c=J_h._groupResourcesMap[J_a];if(J_c)for(var J_d=J_c.slice(),J_e=0,J_f=J_d.length;J_e<J_f;J_e++)(J_b=J_d[J_e]).lock||0!==J_b._referenceCount||J_b.destroy()}else for(var J_g in J_h._idResourcesMap)(J_b=J_h._idResourcesMap[J_g]).lock||0!==J_b._referenceCount||J_b.destroy()},J_h._uniqueIDCounter=0,J_h._idResourcesMap={},J_h._urlResourcesMap={},J_h._groupResourcesMap={},J_h}()),J_ka=function(J_a){function J_C(J_a,J_b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,J_C.__super.call(this),J_a&&null!=J_a._addReference&&J_a._addReference(),this.setTo(J_a,J_b)}J_k(J_C,"laya.resource.Texture",J_j);var J_b=J_C.prototype;return J_b._setUrl=function(J_a){this.url=J_a},J_b.setTo=function(J_a,J_b){if(J_a instanceof J_g.HTMLElement){var J_c=J_va.create("2D",J_a);this.bitmap=J_c}else this.bitmap=J_a;if(this.uv=J_b||J_C.DEF_UV,J_a){this._w=J_a.width,this._h=J_a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var J_d=this;if(this._loaded)J_F.addToAtlas&&J_F.addToAtlas(J_d);else{var J_e=J_a;J_e instanceof laya.resource.HTMLImage&&J_e.image&&J_e.image.addEventListener("load",function(J_a){J_F.addToAtlas&&J_F.addToAtlas(J_d)},!1)}}},J_b.active=function(){this.bitmap&&this.bitmap.activeResource()},J_b.destroy=function(J_a){if(void 0===J_a&&(J_a=!1),this.alphaTexture&&(this.alphaTexture.destroy(J_a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var J_b=this.bitmap;J_a?(J_J.isConchApp&&J_b.source&&J_b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,J_b.dispose(),J_b._clearReference()):(J_b._removeReference(),0==J_b.referenceCount&&(J_J.isConchApp&&J_b.source&&J_b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,J_b.dispose())),this.url&&this===J_z.loader.getRes(this.url)&&J_z.loader.clearRes(this.url,J_a),this._loaded=!1}},J_b.load=function(J_a){var J_b=this;this._loaded=!1,J_a=J_I.customFormat(J_a);var J_c=this.bitmap||(this.bitmap=J_ya.create(J_a));J_c.uri=J_a,J_c&&J_c._addReference();var J_d=this;J_c.onload=function(){J_c.onload=null,J_d._loaded=!0,J_b.sourceWidth=J_b._w=J_c.width,J_b.sourceHeight=J_b._h=J_c.height,J_d.event("loaded",this),J_F.addToAtlas&&J_F.addToAtlas(J_d)}},J_b.addTextureToAtlas=function(J_a){J_F.addTextureToAtlas(this)},J_b.getPixels=function(J_a,J_b,J_c,J_d){if(J_J.isConchApp){var J_e=this.bitmap;if(J_e.source&&J_e.source.getImageData){var J_f=J_e.source.getImageData(J_a,J_b,J_c,J_d),J_g=new Uint8Array(J_f);return Array.from(J_g)}return null}return J_J.isWebGL?J_F.getTexturePixels(this,J_a,J_b,J_c,J_d):(J_O.canvas.size(J_c,J_d),J_O.canvas.clear(),J_O.context.drawTexture(this,-J_a,-J_b,this.width,this.height,0,0),J_O.context.getImageData(0,0,J_c,J_d).data)},J_b.onAsynLoaded=function(J_a,J_b){if(J_b){if("function"!=typeof J_b._addReference)throw new Error("bitmap._addReference is not a function. "+J_b.className+" "+typeof J_b._addReference+" "+J_b.constructor);J_b._addReference()}this.setTo(J_b,this.uv),this._loaded&&this.event("loaded",this)},J_o(0,J_b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),J_o(0,J_b,"loaded",function(){return this._loaded}),J_o(0,J_b,"released",function(){return!this.bitmap||this.bitmap.released}),J_o(0,J_b,"width",function(){return this._w?this._w:this.uv&&this.uv!==J_C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(J_a){this._w=J_a,this.sourceWidth||(this.sourceWidth=J_a)}),J_o(0,J_b,"repeat",function(){return!J_J.isWebGL||!this.bitmap||this.bitmap.repeat},function(J_a){J_a&&J_J.isWebGL&&this.bitmap&&(this.bitmap.repeat=J_a)&&(this.bitmap.enableMerageInAtlas=!1)}),J_o(0,J_b,"height",function(){return this._h?this._h:this.uv&&this.uv!==J_C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(J_a){this._h=J_a,this.sourceHeight||(this.sourceHeight=J_a)}),J_o(0,J_b,"isLinearSampling",function(){return!J_J.isWebGL||9728!=this.bitmap.minFifter},function(J_a){!J_a&&J_J.isWebGL&&(J_a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),J_C.moveUV=function(J_a,J_b,J_c){for(var J_d=0;J_d<8;J_d+=2)J_c[J_d]+=J_a,J_c[J_d+1]+=J_b;return J_c},J_C.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){void 0===J_f&&(J_f=0),void 0===J_g&&(J_g=0),void 0===J_h&&(J_h=0),void 0===J_i&&(J_i=0);var J_j=J_a instanceof laya.resource.Texture,J_k=J_j?J_a.uv:J_C.DEF_UV,J_l=J_j?J_a.bitmap:J_a,J_m=J_F.isAtlas(J_l);if(J_m){var J_n=J_l._atlaser,J_o=J_a._atlasID;if(-1==J_o)throw new Error("create texture error");J_l=J_n._inAtlasTextureBitmapValue[J_o],J_k=J_n._inAtlasTextureOriUVValue[J_o]}var J_p=new J_C(J_l,null);J_l.width&&J_b+J_d>J_l.width&&(J_d=J_l.width-J_b),J_l.height&&J_c+J_e>J_l.height&&(J_e=J_l.height-J_c),J_p.width=J_d,J_p.height=J_e,J_p.offsetX=J_f,J_p.offsetY=J_g,J_p.sourceWidth=J_h||J_d,J_p.sourceHeight=J_i||J_e;var J_q=1/J_l.width,J_r=1/J_l.height;J_b*=J_q,J_c*=J_r,J_d*=J_q,J_e*=J_r;var J_u=J_p.uv[0],J_v=J_p.uv[1],J_w=J_p.uv[4],J_x=J_p.uv[5],J_y=J_w-J_u,J_z=J_x-J_v,J_A=J_C.moveUV(J_k[0],J_k[1],[J_b,J_c,J_b+J_d,J_c,J_b+J_d,J_c+J_e,J_b,J_c+J_e]);J_p.uv=[J_u+J_A[0]*J_y,J_v+J_A[1]*J_z,J_w-(1-J_A[2])*J_y,J_v+J_A[3]*J_z,J_w-(1-J_A[4])*J_y,J_x-(1-J_A[5])*J_z,J_u+J_A[6]*J_y,J_x-(1-J_A[7])*J_z],J_m&&J_p.addTextureToAtlas();var J_B=J_l.scaleRate;return J_B&&1!=J_B?(J_p.sourceWidth/=J_B,J_p.sourceHeight/=J_B,J_p.width/=J_B,J_p.height/=J_B,J_p.scaleRate=J_B,J_p.offsetX/=J_B,J_p.offsetY/=J_B):J_p.scaleRate=1,J_p},J_C.createFromTexture=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_a.scaleRate;1!=J_f&&(J_b*=J_f,J_c*=J_f,J_d*=J_f,J_e*=J_f);var J_g=J_B.TEMP.setTo(J_b-J_a.offsetX,J_c-J_a.offsetY,J_d,J_e),J_h=J_g.intersection(J_C._rect1.setTo(0,0,J_a.width,J_a.height),J_C._rect2);if(!J_h)return null;var J_i=J_C.create(J_a,J_h.x,J_h.y,J_h.width,J_h.height,J_h.x-J_g.x,J_h.y-J_g.y,J_d,J_e);if(J_i.bitmap&&J_i.bitmap._removeReference)return J_i.bitmap._removeReference(),J_i;var J_j="bitmap:"+(J_i.bitmap?J_i.bitmap.constructor?J_i.bitmap.constructor.name:J_i.bitmap.__className:"")+", url:"+(J_a.url+" | "+(J_i.bitmap?J_i.bitmap.url:J_a.url))+", x="+J_b+",y="+J_c+",width="+J_d+",height="+J_e+", result="+(J_h?J_h.x+","+J_h.y+","+J_h.width+","+J_h.height:"null")+", rect="+J_g.x+","+J_g.y+","+J_g.width+","+J_g.height;throw new Error("报错：bitmap._removeReference is not a function  "+J_j)},J_C.DEF_UV=[0,0,1,0,1,1,0,1],J_C.INV_UV=[0,1,1,1,1,0,0,0],J_C._rect1=new J_B,J_C._rect2=new J_B,J_C}(),J_a=function(J_a){var J_h;function J_f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,J_f.__super.call(this)}J_k(J_f,"laya.utils.TimeLine",J_j);var J_b=J_f.prototype;return J_b.to=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=0),this._create(J_a,J_b,J_c,J_d,J_e,!0)},J_b.from=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=0),this._create(J_a,J_b,J_c,J_d,J_e,!1)},J_b._create=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_W.getItemByClass("tweenData",J_h);return J_g.isTo=J_f,J_g.type=0,J_g.target=J_a,J_g.duration=J_c,J_g.data=J_b,J_g.startTime=this._startTime+J_e,J_g.endTime=J_g.startTime+J_g.duration,J_g.ease=J_d,this._startTime=Math.max(J_g.endTime,this._startTime),this._tweenDataList.push(J_g),this._startTimeSort=!0,this._endTimeSort=!0,this},J_b.addLabel=function(J_a,J_b){var J_c=J_W.getItemByClass("tweenData",J_h);return J_c.type=1,J_c.data=J_a,J_c.endTime=J_c.startTime=this._startTime+J_b,this._labelDic||(this._labelDic={}),this._labelDic[J_a]=J_c,this._tweenDataList.push(J_c),this},J_b.removeLabel=function(J_a){if(this._labelDic&&this._labelDic[J_a]){var J_b=this._labelDic[J_a];if(J_b){var J_c=this._tweenDataList.indexOf(J_b);-1<J_c&&this._tweenDataList.splice(J_c,1)}delete this._labelDic[J_a]}},J_b.gotoTime=function(J_a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var J_b,J_c,J_d,J_e;for(var J_f in this._firstTweenDic)if(J_c=this._firstTweenDic[J_f])for(var J_g in J_c)J_c.diyTarget.hasOwnProperty(J_g)&&(J_c.diyTarget[J_g]=J_c[J_g]);for(J_f in this._tweenDic)(J_b=this._tweenDic[J_f]).clear(),delete this._tweenDic[J_f];if(this._index=0,this._gidIndex=0,this._currTime=J_a,this._lastTime=J_O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=J_d=this._tweenDataList.concat(),J_d.sort(function(J_a,J_b){return J_a.endTime>J_b.endTime?1:J_a.endTime<J_b.endTime?-1:0})}else J_d=this._endTweenDataList;for(var J_h=0,J_i=J_d.length;J_h<J_i;J_h++)if(0==(J_e=J_d[J_h]).type){if(!(J_a>=J_e.endTime))break;this._index=Math.max(this._index,J_h+1);var J_j=J_e.data;if(J_e.isTo)for(var J_k in J_j)J_e.target[J_k]=J_j[J_k]}for(J_h=0,J_i=this._tweenDataList.length;J_h<J_i;J_h++)0==(J_e=this._tweenDataList[J_h]).type&&J_a>=J_e.startTime&&J_a<J_e.endTime&&(this._index=Math.max(this._index,J_h+1),this._gidIndex++,(J_b=J_W.getItemByClass("tween",J_Z))._create(J_e.target,J_e.data,J_e.duration,J_e.ease,J_u.create(this,this._animComplete,[this._gidIndex]),0,!1,J_e.isTo,!0,!1),J_b.setStartTime(this._currTime-(J_a-J_e.startTime)),J_b._updateEase(this._currTime),J_b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=J_b)}},J_b.gotoLabel=function(J_a){if(null!=this._labelDic){var J_b=this._labelDic[J_a];J_b&&this.gotoTime(J_b.startTime)}},J_b.pause=function(){J_z.timer.clear(this,this._update)},J_b.resume=function(){this.play(this._currTime,this._loopKey)},J_b.play=function(J_a,J_b){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(J_a,J_b){return J_a.startTime>J_b.startTime?1:J_a.startTime<J_b.startTime?-1:0});for(var J_c=0,J_d=this._tweenDataList.length;J_c<J_d;J_c++){var J_e=this._tweenDataList[J_c];if(null!=J_e&&0==J_e.type){var J_f=J_e.target,J_g=J_f.$_GID||(J_f.$_GID=J_$.getGID()),J_h=null;for(var J_i in null==this._firstTweenDic[J_g]?((J_h={}).diyTarget=J_f,this._firstTweenDic[J_g]=J_h):J_h=this._firstTweenDic[J_g],J_e.data)null==J_h[J_i]&&(J_h[J_i]=J_f[J_i])}}}"string"==typeof J_a?this.gotoLabel(J_a):this.gotoTime(J_a),this._loopKey=J_b,this._lastTime=J_O.now(),J_z.timer.frameLoop(1,this,this._update)}},J_b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var J_a in this._tweenDic)(J_b=this._tweenDic[J_a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var J_b,J_c=J_O.now(),J_d=J_c-this._lastTime,J_e=this._currTime+=J_d*this.scale;for(J_a in this._lastTime=J_c,this._tweenDic)(J_b=this._tweenDic[J_a])._updateEase(J_e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var J_f=this._tweenDataList[this._index];J_e>=J_f.startTime&&(this._index++,0==J_f.type?(this._gidIndex++,(J_b=J_W.getItemByClass("tween",J_Z))._create(J_f.target,J_f.data,J_f.duration,J_f.ease,J_u.create(this,this._animComplete,[this._gidIndex]),0,!1,J_f.isTo,!0,!1),J_b.setStartTime(J_e),J_b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=J_b)._updateEase(J_e)):this.event("label",J_f.data))}},J_b._animComplete=function(J_a){this._tweenDic[J_a]&&delete this._tweenDic[J_a]},J_b._complete=function(){this.event("complete")},J_b.reset=function(){var J_a;if(this._labelDic)for(J_a in this._labelDic)delete this._labelDic[J_a];for(J_a in this._tweenDic)this._tweenDic[J_a].clear(),delete this._tweenDic[J_a];for(J_a in this._firstTweenDic)delete this._firstTweenDic[J_a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var J_b,J_c=0;for(J_b=this._tweenDataList.length,J_c=0;J_c<J_b;J_c++)this._tweenDataList[J_c]&&this._tweenDataList[J_c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,J_z.timer.clear(this,this._update)},J_b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},J_o(0,J_b,"index",function(){return this._frameIndex},function(J_a){this._frameIndex=J_a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),J_o(0,J_b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),J_f.to=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=0),(new J_f).to(J_a,J_b,J_c,J_d,J_e)},J_f.from=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_e&&(J_e=0),(new J_f).from(J_a,J_b,J_c,J_d,J_e)},J_f.__init$=function(){J_h=function(){function J_a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return J_k(J_a,""),J_a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,J_W.recover("tweenData",this)},J_a}()},J_f}(),J_la=function(J_e){function J_c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,J_c.__super.call(this),this._style=J_h.EMPTY}J_k(J_c,"laya.display.Sprite",J_e);var J_a=J_c.prototype;return J_z.imps(J_a,{"laya.display.ILayout":!0}),J_a.createConchModel=function(){return new ConchNode},J_a.destroy=function(J_a){if(void 0===J_a&&(J_a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var J_b=this.mask;J_b&&(this.mask=null,J_b.destroy(J_a))}J_e.prototype.destroy.call(this,J_a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},J_a.updateZOrder=function(){J_$.updateOrder(this._childs)&&this.repaint()},J_a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},J_a.setBounds=function(J_a){this._set$P("uBounds",J_a)},J_a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new J_B),J_B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},J_a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new J_B),J_B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},J_a._boundPointsToParent=function(J_a){void 0===J_a&&(J_a=!1);var J_b=0,J_c=0;this._style&&(J_b=this._style._tf.translateX,J_c=this._style._tf.translateY,J_a=J_a||0!==this._style._tf.rotate,this._style.scrollRect&&(J_b+=this._style.scrollRect.x,J_c+=this._style.scrollRect.y));var J_d=this._getBoundPointsM(J_a);if(!J_d||J_d.length<1)return J_d;if(8!=J_d.length&&(J_d=J_a?J_x.scanPList(J_d):J_B._getWrapRec(J_d,J_B.TEMP)._getBoundPoints()),!this.transform)return J_$.transPointList(J_d,this._x-J_b,this._y-J_c),J_d;var J_e=J_A.TEMP,J_f=0,J_g=J_d.length;for(J_f=0;J_f<J_g;J_f+=2)J_e.x=J_d[J_f],J_e.y=J_d[J_f+1],this.toParentPoint(J_e),J_d[J_f]=J_e.x,J_d[J_f+1]=J_e.y;return J_d},J_a.getGraphicBounds=function(J_a){return void 0===J_a&&(J_a=!1),this._graphics?this._graphics.getBounds(J_a):J_B.TEMP.setTo(0,0,0,0)},J_a._getBoundPointsM=function(J_a){if(void 0===J_a&&(J_a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var J_b=J_$.clearArray(this._$P.temBM),J_c=J_B.TEMP;return J_c.copyFrom(this.scrollRect),J_$.concatArray(J_b,J_c._getBoundPoints()),J_b}for(var J_d,J_e,J_f,J_g=this._graphics?this._graphics.getBoundPoints():J_$.clearArray(this._$P.temBM),J_h=0,J_i=(J_f=this._childs).length;J_h<J_i;J_h++)(J_d=J_f[J_h])instanceof laya.display.Sprite&&1==J_d.visible&&(J_e=J_d._boundPointsToParent(J_a))&&(J_g=J_g?J_$.concatArray(J_g,J_e):J_e);return J_g},J_a.getStyle=function(){return this._style===J_h.EMPTY&&(this._style=new J_h),this._style},J_a.setStyle=function(J_a){this._style=J_a},J_a._adjustTransform=function(){this._tfChanged=!1;var J_a,J_b=this._style._tf,J_c=J_b.scaleX,J_d=J_b.scaleY;if(J_b.rotate||1!==J_c||1!==J_d||J_b.skewX||J_b.skewY){(J_a=this._transform||(this._transform=J_G.create())).bTransform=!0;var J_e=.0174532922222222*(J_b.rotate-J_b.skewX),J_f=.0174532922222222*(J_b.rotate+J_b.skewY),J_g=Math.cos(J_f),J_h=Math.sin(J_f),J_i=Math.sin(J_e),J_j=Math.cos(J_e);return J_a.a=J_c*J_g,J_a.b=J_c*J_h,J_a.c=-J_d*J_i,J_a.d=J_d*J_j,J_a.tx=J_a.ty=0,J_a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,J_a},J_a.pos=function(J_a,J_b,J_c){if(void 0===J_c&&(J_c=!1),this._x!==J_a||this._y!==J_b){if(this.destroyed)return this;if(J_c){this._x=J_a,this._y=J_b,this.conchModel&&this.conchModel.pos(this._x,this._y);var J_d=this._parent;J_d&&0===J_d._repaint&&(J_d._repaint=1,J_d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=J_a,this.y=J_b}return this},J_a.pivot=function(J_a,J_b){return this.pivotX=J_a,this.pivotY=J_b,this},J_a.size=function(J_a,J_b){return this.width=J_a,this.height=J_b,this},J_a.scale=function(J_a,J_b,J_c){void 0===J_c&&(J_c=!1);var J_d=this.getStyle(),J_e=J_d._tf;if(J_e.scaleX!=J_a||J_e.scaleY!=J_b){if(this.destroyed)return this;if(J_c){J_d.setScale(J_a,J_b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J_a,J_b),this._renderType|=4;var J_f=this._parent;J_f&&0===J_f._repaint&&(J_f._repaint=1,J_f.parentRepaint())}else this.scaleX=J_a,this.scaleY=J_b}return this},J_a.skew=function(J_a,J_b){return this.skewX=J_a,this.skewY=J_b,this},J_a.render=function(J_a,J_b,J_c){J_X.spriteCount++,J_L.renders[this._renderType]._fun(this,J_a,J_b+this._x,J_c+this._y),this._repaint=0},J_a.drawToCanvas=function(J_a,J_b,J_c,J_d){if(J_J.isConchNode){var J_e=J_va.create("2D");return new J_K(J_a,J_b,J_e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(J_e.source,J_c,J_d),J_e}return J_F.drawToCanvas(this,this._renderType,J_a,J_b,J_c,J_d)},J_a.customRender=function(J_a,J_b,J_c){this._renderType|=1024},J_a._applyFilters=function(){var J_a;if(!J_J.isWebGL&&((J_a=this._$P.filters)&&!(J_a.length<1)))for(var J_b=0,J_c=J_a.length;J_b<J_c;J_b++)J_a[J_b].action.apply(this._$P.cacheCanvas)},J_a._isHaveGlowFilter=function(){var J_a,J_b=0;if(this.filters)for(J_b=0;J_b<this.filters.length;J_b++)if(8==this.filters[J_b].type)return!0;for(J_b=0,J_a=this._childs.length;J_b<J_a;J_b++)if(this._childs[J_b]._isHaveGlowFilter())return!0;return!1},J_a.localToGlobal=function(J_a,J_b){void 0===J_b&&(J_b=!1),!0===J_b&&(J_a=new J_A(J_a.x,J_a.y));for(var J_c=this;J_c&&J_c!=J_z.stage;)J_a=J_c.toParentPoint(J_a),J_c=J_c.parent;return J_a},J_a.globalToLocal=function(J_a,J_b){void 0===J_b&&(J_b=!1),J_b&&(J_a=new J_A(J_a.x,J_a.y));for(var J_c=this,J_d=[];J_c&&J_c!=J_z.stage;)J_d.push(J_c),J_c=J_c.parent;for(var J_e=J_d.length-1;0<=J_e;)J_a=(J_c=J_d[J_e]).fromParentPoint(J_a),J_e--;return J_a},J_a.toParentPoint=function(J_a){if(!J_a)return J_a;J_a.x-=this.pivotX,J_a.y-=this.pivotY,this.transform&&this._transform.transformPoint(J_a),J_a.x+=this._x,J_a.y+=this._y;var J_b=this._style.scrollRect;return J_b&&(J_a.x-=J_b.x,J_a.y-=J_b.y),J_a},J_a.fromParentPoint=function(J_a){if(!J_a)return J_a;J_a.x-=this._x,J_a.y-=this._y;var J_b=this._style.scrollRect;return J_b&&(J_a.x+=J_b.x,J_a.y+=J_b.y),this.transform&&this._transform.invertTransformPoint(J_a),J_a.x+=this.pivotX,J_a.y+=this.pivotY,J_a},J_a.on=function(J_a,J_b,J_c,J_d){return 1!==this._mouseEnableState&&this.isMouseEvent(J_a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(J_a,J_b,J_c,J_d,!1)):J_e.prototype.on.call(this,J_a,J_b,J_c,J_d)},J_a.once=function(J_a,J_b,J_c,J_d){return 1!==this._mouseEnableState&&this.isMouseEvent(J_a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(J_a,J_b,J_c,J_d,!0)):J_e.prototype.once.call(this,J_a,J_b,J_c,J_d)},J_a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var J_a=this;for(J_a=J_a.parent;J_a&&1!==J_a._mouseEnableState&&!J_a._getBit(2);)J_a.mouseEnabled=!0,J_a._setBit(2,!0),J_a=J_a.parent}},J_a.loadImage=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=this;return void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),this.graphics.loadImage(J_a,J_b,J_c,J_d,J_e,function(J_a){J_g.destroyed||(J_g.size(J_b+(J_d||J_a.width),J_c+(J_e||J_a.height)),J_g.repaint(),J_f&&J_f.runWith(J_a))}),this},J_a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},J_a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},J_a._childChanged=function(J_a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,J_a&&this._get$P("hasZorder")&&J_z.timer.callLater(this,this.updateZOrder),this.repaint()},J_a.parentRepaint=function(){var J_a=this._parent;J_a&&0===J_a._repaint&&(J_a._repaint=1,J_a.parentRepaint())},J_a.startDrag=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){void 0===J_b&&(J_b=!1),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=300),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=.92),this._$P.dragging||this._set$P("dragging",new J_T),this._$P.dragging.start(this,J_a,J_b,J_c,J_d,J_e,J_f,J_g)},J_a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},J_a._releaseMem=function(){if(this._$P){var J_a=this._$P.cacheCanvas;J_a&&J_a.ctx&&(J_W.recover("RenderContext",J_a.ctx),J_a.ctx.canvas.size(0,0),J_a.ctx=null);var J_b=this._$P._filterCache;J_b&&(J_b.destroy(),J_b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},J_a._setDisplay=function(J_a){J_a||this._releaseMem(),J_e.prototype._setDisplay.call(this,J_a)},J_a.hitTestPoint=function(J_a,J_b){var J_c=this.globalToLocal(J_A.TEMP.setTo(J_a,J_b));return J_a=J_c.x,J_b=J_c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?J_B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(J_a,J_b)},J_a.getMousePoint=function(){return this.globalToLocal(J_A.TEMP.setTo(J_z.stage.mouseX,J_z.stage.mouseY))},J_a._getWords=function(){return null},J_a._addChildsToLayout=function(J_a){var J_b=this._getWords();if(null==J_b&&0==this._childs.length)return!1;if(J_b)for(var J_c=0,J_d=J_b.length;J_c<J_d;J_c++)J_a.push(J_b[J_c]);J_c=0;for(var J_e=this._childs.length;J_c<J_e;++J_c){var J_f=this._childs[J_c];J_f._style._enableLayout()&&J_f._addToLayout(J_a)}return!0},J_a._addToLayout=function(J_a){this._style.absolute||(this._style.block?J_a.push(this):this._addChildsToLayout(J_a)&&(this.x=this.y=0))},J_a._isChar=function(){return!1},J_a._getCSSStyle=function(){return this._style.getCSSStyle()},J_a._setAttributes=function(J_a,J_b){switch(J_a){case"x":this.x=parseFloat(J_b);break;case"y":this.y=parseFloat(J_b);break;case"width":this.width=parseFloat(J_b);break;case"height":this.height=parseFloat(J_b);break;default:this[J_a]=J_b}},J_a._layoutLater=function(){this.parent&&this.parent._layoutLater()},J_o(0,J_a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(J_a){this._optimizeScrollRect!=J_a&&(this._optimizeScrollRect=J_a,this.conchModel&&this.conchModel.optimizeScrollRect(J_a))}),J_o(0,J_a,"customRenderEnable",null,function(J_a){if(J_a&&(this._renderType|=1024,J_J.isConchNode)){J_c.CustomList.push(this);var J_b=new J_va("2d");J_b._setContext(new CanvasRenderingContext2D),this.customContext=new J_K(0,0,J_b),J_b.context.setCanvasType&&J_b.context.setCanvasType(2),this.conchModel.custom(J_b.context)}}),J_o(0,J_a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(J_a){this.cacheAs=J_a?this._$P.hasFilter?"none":"normal":"none"}),J_o(0,J_a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(J_a){var J_b=this._$P.cacheCanvas;if(J_a!==(J_b?J_b.type:"none")){if("none"!==J_a)this._getBit(1)||this._setUpNoticeType(1),J_b||(J_b=this._set$P("cacheCanvas",J_W.getItemByClass("cacheCanvas",Object))),J_b.type=J_a,J_b.reCache=!0,this._renderType|=16,"bitmap"==J_a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(J_b){var J_c=J_b;J_c&&J_c.ctx&&(J_W.recover("RenderContext",J_c.ctx),J_c.ctx.canvas.size(0,0),J_c.ctx=null),J_W.recover("cacheCanvas",J_b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),J_o(0,J_a,"zOrder",function(){return this._zOrder},function(J_a){this._zOrder!=J_a&&(this._zOrder=J_a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(J_a),this._parent&&(J_a&&this._parent._set$P("hasZorder",!0),J_z.timer.callLater(this._parent,this.updateZOrder)))}),J_o(0,J_a,"rotation",function(){return this._style._tf.rotate},function(J_a){var J_b=this.getStyle();if(J_b._tf.rotate!==J_a){J_b.setRotate(J_a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(J_a),this._renderType|=4;var J_c=this._parent;J_c&&0===J_c._repaint&&(J_c._repaint=1,J_c.parentRepaint())}}),J_o(0,J_a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(J_a){this._width!==J_a&&(this._width=J_a,this.conchModel&&this.conchModel.size(J_a,this._height),this.repaint())}),J_o(0,J_a,"x",function(){return this._x},function(J_a){if(this._x!==J_a){if(this.destroyed)return;this._x=J_a,this.conchModel&&this.conchModel.pos(J_a,this._y);var J_b=this._parent;J_b&&0===J_b._repaint&&(J_b._repaint=1,J_b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),J_o(0,J_a,"globalScaleY",function(){for(var J_a=1,J_b=this;J_b&&J_b!==J_z.stage;)J_a*=J_b.scaleY,J_b=J_b.parent;return J_a}),J_o(0,J_a,"hitArea",function(){return this._$P.hitArea},function(J_a){this._set$P("hitArea",J_a)}),J_o(0,J_a,"staticCache",function(){return this._$P.staticCache},function(J_a){this._set$P("staticCache",J_a),J_a||this.reCache()}),J_o(0,J_a,"texture",function(){return this._texture},function(J_a){this._texture!=J_a&&(this._texture=J_a,this.graphics.cleanByTexture(J_a,0,0))}),J_o(0,J_a,"y",function(){return this._y},function(J_a){if(this._y!==J_a){if(this.destroyed)return;this._y=J_a,this.conchModel&&this.conchModel.pos(this._x,J_a);var J_b=this._parent;J_b&&0===J_b._repaint&&(J_b._repaint=1,J_b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),J_o(0,J_a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(J_a){this._height!==J_a&&(this._height=J_a,this.conchModel&&this.conchModel.size(this._width,J_a),this.repaint())}),J_o(0,J_a,"blendMode",function(){return this._style.blendMode},function(J_a){this.getStyle().blendMode=J_a,this.conchModel&&this.conchModel.blendMode(J_a),J_a&&"source-over"!=J_a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),J_o(0,J_a,"scaleX",function(){return this._style._tf.scaleX},function(J_a){var J_b=this.getStyle();if(J_b._tf.scaleX!==J_a){J_b.setScaleX(J_a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J_a,J_b._tf.scaleY),this._renderType|=4;var J_c=this._parent;J_c&&0===J_c._repaint&&(J_c._repaint=1,J_c.parentRepaint())}}),J_o(0,J_a,"scaleY",function(){return this._style._tf.scaleY},function(J_a){var J_b=this.getStyle();if(J_b._tf.scaleY!==J_a){J_b.setScaleY(J_a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J_b._tf.scaleX,J_a),this._renderType|=4;var J_c=this._parent;J_c&&0===J_c._repaint&&(J_c._repaint=1,J_c.parentRepaint())}}),J_o(0,J_a,"stage",function(){return J_z.stage}),J_o(0,J_a,"skewX",function(){return this._style._tf.skewX},function(J_a){var J_b=this.getStyle();if(J_b._tf.skewX!==J_a){J_b.setSkewX(J_a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(J_a,J_b._tf.skewY),this._renderType|=4;var J_c=this._parent;J_c&&0===J_c._repaint&&(J_c._repaint=1,J_c.parentRepaint())}}),J_o(0,J_a,"scrollRect",function(){return this._style.scrollRect},function(J_a){this.getStyle().scrollRect=J_a,this.repaint(),J_a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(J_a.x,J_a.y,J_a.width,J_a.height)):(this._renderType&=-129,this.conchModel&&(J_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),J_o(0,J_a,"skewY",function(){return this._style._tf.skewY},function(J_a){var J_b=this.getStyle();if(J_b._tf.skewY!==J_a){J_b.setSkewY(J_a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(J_b._tf.skewX,J_a),this._renderType|=4;var J_c=this._parent;J_c&&0===J_c._repaint&&(J_c._repaint=1,J_c.parentRepaint())}}),J_o(0,J_a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(J_a){this._tfChanged=!1,(this._transform=J_a)&&(this._x=J_a.tx,this._y=J_a.ty,J_a.tx=J_a.ty=0,this.conchModel&&this.conchModel.transform(J_a.a,J_a.b,J_a.c,J_a.d,this._x,this._y)),J_a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),J_o(0,J_a,"pivotX",function(){return this._style._tf.translateX},function(J_a){this.getStyle().setTranslateX(J_a),this.conchModel&&this.conchModel.pivot(J_a,this._style._tf.translateY),this.repaint()}),J_o(0,J_a,"pivotY",function(){return this._style._tf.translateY},function(J_a){this.getStyle().setTranslateY(J_a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,J_a),this.repaint()}),J_o(0,J_a,"alpha",function(){return this._style.alpha},function(J_a){this._style&&this._style.alpha!==J_a&&(J_a=J_a<0?0:1<J_a?1:J_a,this.getStyle().alpha=J_a,this.conchModel&&this.conchModel.alpha(J_a),1!==J_a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),J_o(0,J_a,"visible",function(){return this._style.visible},function(J_a){this._style&&this._style.visible!==J_a&&(this.getStyle().visible=J_a,this.conchModel&&this.conchModel.visible(J_a),this.parentRepaint())}),J_o(0,J_a,"graphics",function(){return this._graphics||(this.graphics=J_F.createGraphics())},function(J_a){this._graphics&&(this._graphics._sp=null),(this._graphics=J_a)?(this._renderType&=-2,this._renderType|=512,(J_a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(J_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),J_o(0,J_a,"filters",function(){return this._$P.filters},function(J_a){J_a&&0===J_a.length&&(J_a=null),this._$P.filters!=J_a&&(this._set$P("filters",J_a?J_a.slice():null),J_J.isConchApp&&(this.conchModel&&(J_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),J_J.isWebGL&&(J_a&&J_a.length?this._renderType|=32:this._renderType&=-33),J_a&&0<J_a.length?(this._getBit(1)||this._setUpNoticeType(1),J_J.isWebGL&&1==J_a.length&&J_a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(J_J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),J_o(0,J_a,"parent",J_e.prototype._$get_parent,function(J_a){J_z.superSet(J_aa,this,"parent",J_a),J_a&&this._getBit(2)&&this._$2__onDisplay()}),J_o(0,J_a,"mask",function(){return this._$P._mask},function(J_a){J_a&&this.mask&&this.mask._$P.maskParent||(J_a?(this.cacheAs="bitmap",this._set$P("_mask",J_a),J_a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",J_a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(J_a?J_a.conchModel:null),this._renderType|=64,this.parentRepaint())}),J_o(0,J_a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(J_a){this._mouseEnableState=J_a?2:1}),J_o(0,J_a,"globalScaleX",function(){for(var J_a=1,J_b=this;J_b&&J_b!==J_z.stage;)J_a*=J_b.scaleX,J_b=J_b.parent;return J_a}),J_o(0,J_a,"mouseX",function(){return this.getMousePoint().x}),J_o(0,J_a,"mouseY",function(){return this.getMousePoint().y}),J_c.fromImage=function(J_a){return(new J_c).loadImage(J_a)},J_c._cachePool=[],J_c.CustomList=[],J_i(J_c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=J_g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),J_c}(J_aa),J_ma=function(J_a){function J_b(J_a){this._audio=null,this._onEnd=null,this._resumePlay=null,J_b.__super.call(this),this._onEnd=J_$.bind(this.__onEnd,this),this._resumePlay=J_$.bind(this.__resumePlay,this),J_a.addEventListener("ended",this._onEnd),this._audio=J_a}J_k(J_b,"laya.media.h5audio.AudioSoundChannel",J_da);var J_c=J_b.prototype;return J_c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(J_z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},J_c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,J_O.container.appendChild(this._audio),this._audio.play()}catch(J_a){this.event("error")}},J_c.play=function(J_a){this.isStopped=!1;try{this._audio.playbackRate=J_E.playbackRate,this._audio.currentTime=this.startTime}catch(J_a){return void this._audio.addEventListener("canplay",this._resumePlay)}J_E.addChannel(this),J_O.container.appendChild(this._audio),!J_a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},J_c.stop=function(){this.isStopped=!0,J_E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&J_J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),J_O.onIE||this._audio!=J_ca._musicAudio&&J_W.recover("audio:"+this.url,this._audio),J_O.removeElement(this._audio),this._audio=null)},J_c.pause=function(){this.isStopped=!0,J_E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},J_c.resume=function(){this._audio&&(this.isStopped=!1,J_E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},J_o(0,J_c,"position",function(){return this._audio?this._audio.currentTime:0}),J_o(0,J_c,"duration",function(){return this._audio?this._audio.duration:0}),J_o(0,J_c,"volume",function(){return this._audio?this._audio.volume:1},function(J_a){this._audio&&(this._audio.volume=J_a)}),J_b}(),J_na=function(J_a){function J_b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=J_fa.ctx,J_b.__super.call(this),this._onPlayEnd=J_$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}J_k(J_b,"laya.media.webaudio.WebAudioSoundChannel",J_da);var J_c=J_b.prototype;return J_c.play=function(J_a){if(J_E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var J_b=this.context,J_c=this.gain,J_d=J_b.createBufferSource();(this.bufferSource=J_d).buffer=this.audioBuffer,J_d.connect(J_c),J_c&&J_c.disconnect(),J_c.connect(J_b.destination),J_d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=J_O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(J_d.loop=!0),J_d.playbackRate.setTargetAtTime?J_d.playbackRate.setTargetAtTime(J_E.playbackRate,this.context.currentTime,.1):J_d.playbackRate.value=J_E.playbackRate,J_d.start(0,this.startTime),!J_a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},J_c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(J_z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},J_c._clearBufferSource=function(){if(this.bufferSource){var J_a=this.bufferSource;J_a.stop?J_a.stop(0):J_a.noteOff(0),J_a.disconnect(0),J_a.onended=null,J_b._tryCleanFailed||this._tryClearBuffer(J_a),this.bufferSource=null}},J_c._tryClearBuffer=function(J_a){try{J_a.buffer=null}catch(J_a){J_b._tryCleanFailed=!0}},J_c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,J_E.removeChannel(this),this.startHandler=null,this.completeHandler=null},J_c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,J_E.removeChannel(this)},J_c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},J_o(0,J_c,"position",function(){return this.bufferSource?(J_O.now()-this._startTime)/1e3+this.startTime:0}),J_o(0,J_c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),J_o(0,J_c,"volume",function(){return this._volume},function(J_a){this.isStopped||(this._volume=J_a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(J_a,this.context.currentTime,.1):this.gain.gain.value=J_a)}),J_b._tryCleanFailed=!1,J_b}(),J_oa=function(J_a){function J_b(){J_b.__super.call(this),this._w=0,this._h=0}J_k(J_b,"laya.resource.Bitmap",J_ja);var J_c=J_b.prototype;return J_o(0,J_c,"width",function(){return this._w}),J_o(0,J_c,"height",function(){return this._h}),J_o(0,J_c,"source",function(){return this._source}),J_b}(),J_pa=function(J_b){function J_a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,J_a.__super.call(this),this._interval=J_d.animationInterval,this._setUpNoticeType(1)}J_k(J_a,"laya.display.AnimationPlayerBase",J_b);var J_c=J_a.prototype;return J_c.play=function(J_a,J_b,J_c,J_d){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=!0),void 0===J_c&&(J_c=""),void 0===J_d&&(J_d=!0),this._isPlaying=!0,this.index="string"==typeof J_a?this._getFrameByLabel(J_a):J_a,this.loop=J_b,this._actionName=J_c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},J_c._getFrameByLabel=function(J_a){var J_b=0;for(J_b=0;J_b<this._count;J_b++)if(this._labels[J_b]&&0<=this._labels[J_b].indexOf(J_a))return J_b;return 0},J_c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},J_c._setControlNode=function(J_a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=J_a)&&J_a!=this&&(J_a.on("display",this,this._checkResumePlaying),J_a.on("undisplay",this,this._checkResumePlaying))},J_c._setDisplay=function(J_a){J_b.prototype._setDisplay.call(this,J_a),this._checkResumePlaying()},J_c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},J_c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},J_c.addLabel=function(J_a,J_b){this._labels||(this._labels={}),this._labels[J_b]||(this._labels[J_b]=[]),this._labels[J_b].push(J_a)},J_c.removeLabel=function(J_a){if(J_a){if(this._labels)for(var J_b in this._labels)this._removeLabelFromLabelList(this._labels[J_b],J_a)}else this._labels=null},J_c._removeLabelFromLabelList=function(J_a,J_b){if(J_a)for(var J_c=J_a.length-1;0<=J_c;J_c--)J_a[J_c]==J_b&&J_a.splice(J_c,1)},J_c.gotoAndStop=function(J_a){this.index="string"==typeof J_a?this._getFrameByLabel(J_a):J_a,this.stop()},J_c._displayToIndex=function(J_a){},J_c.clear=function(){this.stop(),this._labels=null},J_o(0,J_c,"interval",function(){return this._interval},function(J_a){this._interval!=J_a&&(this._frameRateChanged=!0,this._interval=J_a,this._isPlaying&&0<J_a&&this.timerLoop(J_a,this,this._frameLoop,null,!0,!0))}),J_o(0,J_c,"isPlaying",function(){return this._isPlaying}),J_o(0,J_c,"index",function(){return this._index},function(J_a){if(this._index=J_a,this._displayToIndex(J_a),this._labels&&this._labels[J_a])for(var J_b=this._labels[J_a],J_c=0,J_d=J_b.length;J_c<J_d;J_c++)this.event("label",J_b[J_c])}),J_o(0,J_c,"count",function(){return this._count}),J_a.WRAP_POSITIVE=0,J_a.WRAP_REVERSE=1,J_a.WRAP_PINGPONG=2,J_a}(J_la),J_qa=function(J_b){function J_n(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,J_n.__super.call(this),this.overflow=J_n.VISIBLE,this._style=new J_ba(this),this._style.wordWrap=!1}J_k(J_n,"laya.display.Text",J_b);var J_a=J_n.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},J_a._getBoundPointsM=function(J_a){void 0===J_a&&(J_a=!1);var J_b=J_B.TEMP;return J_b.setTo(0,0,this.width,this.height),J_b._getBoundPoints()},J_a.getGraphicBounds=function(J_a){void 0===J_a&&(J_a=!1);var J_b=J_B.TEMP;return J_b.setTo(0,0,this.width,this.height),J_b},J_a._getCSSStyle=function(){return this._style},J_a.lang=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k){if(J_a=J_n.langPacks&&J_n.langPacks[J_a]?J_n.langPacks[J_a]:J_a,arguments.length<2)this._text=J_a;else{for(var J_l=0,J_m=arguments.length;J_l<J_m;J_l++)J_a=J_a.replace("{"+J_l+"}",arguments[J_l+1]);this._text=J_a}},J_a._isPassWordMode=function(){var J_a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(J_a=!1),J_a},J_a._getPassWordTxt=function(J_a){var J_b;J_b="";for(var J_c=J_a.length;0<J_c;J_c--)J_b+="●";return J_b},J_a.renderText=function(J_a,J_b){var J_c=this.graphics;J_c.clear(!0);var J_d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(J_O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);J_O.context.font=J_d;var J_e=this.padding,J_f=J_e[3],J_g="left",J_h=this._lines,J_i=this.leading+this._charSize.height,J_j=this._currBitmapFont;J_j&&(J_i=this.leading+J_j.getMaxHeight());var J_k=J_e[0];if(!J_j&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(J_g="right",J_f=this._width-J_e[1]):"center"==this.align&&(J_g="center",J_f=.5*this._width+J_e[3]-J_e[1])),0<this._height){var J_l=this._textHeight>this._height?"top":this.valign;"middle"===J_l?J_k=.5*(this._height-J_b*J_i)+J_e[0]-J_e[2]:"bottom"===J_l&&(J_k=this._height-J_b*J_i-J_e[2])}var J_m=this._style;if(J_j&&J_j.autoScaleSize)var J_n=J_j.fontSize/this.fontSize;if(this._clipPoint)if(J_c.save(),J_j&&J_j.autoScaleSize){var J_o=0,J_p=0;J_o=this._width?this._width-J_e[3]-J_e[1]:this._textWidth,J_p=this._height?this._height-J_e[0]-J_e[2]:this._textHeight,J_o*=J_n,J_p*=J_n,J_c.clipRect(J_e[3],J_e[0],J_o,J_p)}else J_c.clipRect(J_e[3],J_e[0],this._width?this._width-J_e[3]-J_e[1]:this._textWidth,this._height?this._height-J_e[0]-J_e[2]:this._textHeight);var J_q=J_m.password;"prompt"in this&&this.prompt==this._text&&(J_q=!1);for(var J_r=0,J_u=0,J_v=Math.min(this._lines.length,J_b+J_a)||1,J_w=J_a;J_w<J_v;J_w++){var J_x,J_y=J_h[J_w];if(J_q){var J_z=J_y.length;J_y="";for(var J_A=J_z;0<J_A;J_A--)J_y+="●"}if(J_r=J_f-(this._clipPoint?this._clipPoint.x:0),J_u=J_k+J_i*J_w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(J_g,J_r,J_u,J_w),J_j){var J_B=this.width;J_j.autoScaleSize&&(J_B=this.width*J_n),J_j.drawText(J_y,this,J_r,J_u,this.align,J_B)}else J_J.isWebGL?(this._words||(this._words=[]),(J_x=this._words.length>J_w-J_a?this._words[J_w-J_a]:new J_t).setText(J_y)):J_x=J_y,J_m.stroke?J_c.fillBorderText(J_x,J_r,J_u,J_d,this.color,J_m.strokeColor,J_m.stroke,J_g):J_c.fillText(J_x,J_r,J_u,J_d,this.color,J_g)}if(J_j&&J_j.autoScaleSize){var J_C=1/J_n;this.scale(J_C,J_C)}this._clipPoint&&J_c.restore(),this._startX=J_f,this._startY=J_k},J_a.drawUnderline=function(J_a,J_b,J_c,J_d){var J_e=this._lineWidths[J_d];switch(J_a){case"center":J_b-=J_e/2;break;case"right":J_b-=J_e}J_c+=this._charSize.height,this._graphics.drawLine(J_b,J_c,J_b+J_e,J_c,this.underlineColor||this.color,1)},J_a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);J_O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new J_A(0,0)):this._clipPoint=null;var J_a=this._lines.length;if(this.overflow!=J_n.VISIBLE){var J_b=this.overflow==J_n.HIDDEN?Math.floor:Math.ceil;J_a=Math.min(J_a,J_b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var J_c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(J_c,J_a),this.repaint()},J_a.evalTextSize=function(){var J_a,J_b=NaN;J_a=Math.max.apply(this,this._lineWidths),J_b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],J_a==this._textWidth&&J_b==this._textHeight||(this._textWidth=J_a,this._textHeight=J_b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},J_a.checkEnabledViewportOrNot=function(){return this.overflow==J_n.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},J_a.changeText=function(J_a){this._text!==J_a&&(this.lang(J_a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},J_a.parseLines=function(J_a){var J_b=this.wordWrap||this.overflow==J_n.HIDDEN;if(J_b)var J_c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var J_d=J_O.context.measureText(J_n._testWord);J_J.isConchApp&&0===J_d.width&&0===J_d.height&&(J_d=J_O.context.measureText("W")),this._charSize.width=J_d.width,this._charSize.height=J_d.height||this.fontSize}for(var J_e=J_a.replace(/\r\n/g,"\n").split("\n"),J_f=0,J_g=J_e.length;J_f<J_g;J_f++){var J_h=J_e[J_f];J_b?this.parseLine(J_h,J_c):(this._lineWidths.push(this.getTextWidth(J_h)),this._lines.push(J_h))}},J_a.parseLine=function(J_a,J_b){J_O.context;var J_c,J_d=this._lines,J_e=0,J_f=NaN,J_g=NaN,J_h=0;if((J_f=this.getTextWidth(J_a))<=J_b)return J_d.push(J_a),void this._lineWidths.push(J_f);J_f=this._charSize.width,0==(J_e=Math.floor(J_b/J_f))&&(J_e=1),J_g=J_f=this.getTextWidth(J_a.substring(0,J_e));for(var J_i=J_e,J_j=J_a.length;J_i<J_j;J_i++)if(J_b<(J_g+=J_f=this.getTextWidth(J_a.charAt(J_i))))if(this.wordWrap){var J_k=J_a.substring(J_h,J_i);if(J_k.charCodeAt(J_k.length-1)<255?(J_c=/(?:\w|-)+$/.exec(J_k))&&(J_i=J_c.index+J_h,0==J_c.index?J_i+=J_k.length:J_k=J_a.substring(J_h,J_i)):J_n.RightToLeft&&(J_c=/([\u0600-\u06FF])+$/.exec(J_k))&&(J_i=J_c.index+J_h,0==J_c.index?J_i+=J_k.length:J_k=J_a.substring(J_h,J_i)),J_d.push(J_k),this._lineWidths.push(J_g-J_f),!((J_h=J_i)+J_e<J_j)){J_d.push(J_a.substring(J_h,J_j)),this._lineWidths.push(this.getTextWidth(J_d[J_d.length-1])),J_h=-1;break}J_i+=J_e,J_g=J_f=this.getTextWidth(J_a.substring(J_h,J_i)),J_i--}else if(this.overflow==J_n.HIDDEN)return J_d.push(J_a.substring(0,J_i)),void this._lineWidths.push(this.getTextWidth(J_d[J_d.length-1]));this.wordWrap&&-1!=J_h&&(J_d.push(J_a.substring(J_h,J_j)),this._lineWidths.push(this.getTextWidth(J_d[J_d.length-1])))},J_a.getTextWidth=function(J_a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(J_a):J_O.context.measureText(J_a).width},J_a.getWordWrapWidth=function(){var J_a=this.padding,J_b=NaN;return(J_b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(J_b=this.wordWrap?100:J_O.width),J_b<=0&&(J_b=100),J_b-J_a[3]-J_a[1]},J_a.getCharPoint=function(J_a,J_b){this._isChanged&&J_z.timer.runCallLater(this,this.typeset);for(var J_c=0,J_d=this._lines,J_e=0,J_f=0,J_g=J_d.length;J_f<J_g;J_f++){if(J_a<(J_c+=J_d[J_f].length)){var J_h=J_f;break}J_e=J_c}var J_i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;J_O.context.font=J_i;var J_j=this.getTextWidth(this._text.substring(J_e,J_a));return(J_b||new J_A).setTo(this._startX+J_j-(this._clipPoint?this._clipPoint.x:0),this._startY+J_h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},J_o(0,J_a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(J_a){J_a!=this._width&&(J_z.superSet(J_la,this,"width",J_a),this.isChanged=!0)}),J_o(0,J_a,"textWidth",function(){return this._isChanged&&J_z.timer.runCallLater(this,this.typeset),this._textWidth}),J_o(0,J_a,"height",function(){return this._height?this._height:this.textHeight},function(J_a){J_a!=this._height&&(J_z.superSet(J_la,this,"height",J_a),this.isChanged=!0)}),J_o(0,J_a,"textHeight",function(){return this._isChanged&&J_z.timer.runCallLater(this,this.typeset),this._textHeight}),J_o(0,J_a,"padding",function(){return this._getCSSStyle().padding},function(J_a){this._getCSSStyle().padding=J_a,this.isChanged=!0}),J_o(0,J_a,"bold",function(){return this._getCSSStyle().bold},function(J_a){this._getCSSStyle().bold=J_a,this.isChanged=!0}),J_o(0,J_a,"text",function(){return this._text||""},function(J_a){this._text!==J_a&&(this.lang(J_a+""),this.isChanged=!0,this.event("change"))}),J_o(0,J_a,"color",function(){return this._getCSSStyle().color},function(J_a){this._getCSSStyle().color!=J_a&&(this._getCSSStyle().color=J_a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),J_o(0,J_a,"font",function(){return this._getCSSStyle().fontFamily},function(J_a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),J_n._bitmapFonts&&J_n._bitmapFonts[J_a]&&(this._currBitmapFont=J_n._bitmapFonts[J_a]),this._getCSSStyle().fontFamily=J_a,this.isChanged=!0}),J_o(0,J_a,"fontSize",function(){return this._getCSSStyle().fontSize},function(J_a){this._getCSSStyle().fontSize=J_a,this.isChanged=!0}),J_o(0,J_a,"italic",function(){return this._getCSSStyle().italic},function(J_a){this._getCSSStyle().italic=J_a,this.isChanged=!0}),J_o(0,J_a,"align",function(){return this._getCSSStyle().align},function(J_a){this._getCSSStyle().align=J_a,this.isChanged=!0}),J_o(0,J_a,"valign",function(){return this._getCSSStyle().valign},function(J_a){this._getCSSStyle().valign=J_a,this.isChanged=!0}),J_o(0,J_a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(J_a){this._getCSSStyle().wordWrap=J_a,this.isChanged=!0}),J_o(0,J_a,"leading",function(){return this._getCSSStyle().leading},function(J_a){this._getCSSStyle().leading=J_a,this.isChanged=!0}),J_o(0,J_a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(J_a){this._getCSSStyle().backgroundColor=J_a,this.isChanged=!0}),J_o(0,J_a,"borderColor",function(){return this._getCSSStyle().borderColor},function(J_a){this._getCSSStyle().borderColor=J_a,this.isChanged=!0}),J_o(0,J_a,"stroke",function(){return this._getCSSStyle().stroke},function(J_a){this._getCSSStyle().stroke=J_a,this.isChanged=!0}),J_o(0,J_a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(J_a){this._getCSSStyle().strokeColor=J_a,this.isChanged=!0}),J_o(0,J_a,"isChanged",null,function(J_a){this._isChanged!==J_a&&(this._isChanged=J_a)&&J_z.timer.callLater(this,this.typeset)}),J_o(0,J_a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(J_a){if(!(this.overflow!=J_n.SCROLL||this.textWidth<this._width)&&this._clipPoint){J_a=J_a<this.padding[3]?this.padding[3]:J_a;var J_b=this._textWidth-this._width;J_a=J_b<J_a?J_b:J_a;var J_c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=J_a,this.renderText(this._lastVisibleLineIndex,J_c)}}),J_o(0,J_a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(J_a){if(!(this.overflow!=J_n.SCROLL||this.textHeight<this._height)&&this._clipPoint){J_a=J_a<this.padding[0]?this.padding[0]:J_a;var J_b=this._textHeight-this._height,J_c=(J_a=J_b<J_a?J_b:J_a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=J_c;var J_d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=J_a,this.renderText(J_c,J_d)}}),J_o(0,J_a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),J_o(0,J_a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),J_o(0,J_a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),J_o(0,J_a,"underlineColor",function(){return this._underlineColor},function(J_a){this._underlineColor=J_a,this._isChanged=!0,this.typeset()}),J_n.registerBitmapFont=function(J_a,J_b){J_n._bitmapFonts||(J_n._bitmapFonts={}),J_n._bitmapFonts[J_a]=J_b},J_n.unregisterBitmapFont=function(J_a,J_b){if(void 0===J_b&&(J_b=!0),J_n._bitmapFonts&&J_n._bitmapFonts[J_a]){var J_c=J_n._bitmapFonts[J_a];J_b&&J_c.destroy(),delete J_n._bitmapFonts[J_a]}},J_n.setTextRightToLeft=function(){var J_a;(J_a=J_O.canvas.source.style).display="none",J_a.position="absolute",J_a.direction="rtl",J_J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,J_O.document.body.appendChild(J_O.canvas.source)},J_n.supportFont=function(J_a){J_O.context.font="10px sans-serif";var J_b=J_O.context.measureText("abcji").width;J_O.context.font="10px "+J_a;var J_c=J_O.context.measureText("abcji").width;return console.log(J_b,J_c),J_b!==J_c},J_n._testWord="游",J_n.langPacks=null,J_n.VISIBLE="visible",J_n.SCROLL="scroll",J_n.HIDDEN="hidden",J_n.CharacterCache=!0,J_n.RightToLeft=!1,J_n._bitmapFonts=null,J_i(J_n,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),J_n}(J_la),J_ra=function(J_l){function J_g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",J_g.__super.call(this),this.offset=new J_A,this._canvasTransform=new J_G,this._previousOrientation=J_O.window.orientation;var J_b=this;this.transform=J_G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var J_a=J_O.window,J_c=this;J_a.addEventListener("focus",function(){J_b._isFocused=!0,J_c.event("focus"),J_c.event("focuschange")}),J_a.addEventListener("blur",function(){J_b._isFocused=!1,J_c.event("blur"),J_c.event("focuschange"),J_c._isInputting()&&(J_xa.inputElement.target.focus=!1)});var J_d="visibilityState",J_e="visibilitychange",J_f=J_a.document;void 0!==J_f.hidden?(J_e="visibilitychange",J_d="visibilityState"):void 0!==J_f.mozHidden?(J_e="mozvisibilitychange",J_d="mozVisibilityState"):void 0!==J_f.msHidden?(J_e="msvisibilitychange",J_d="msVisibilityState"):void 0!==J_f.webkitHidden&&(J_e="webkitvisibilitychange",J_d="webkitVisibilityState"),J_a.document.addEventListener(J_e,function(){"hidden"==J_O.document[J_d]?J_c._setStageVisible(!1):J_c._setStageVisible(!0)}),J_a.document.addEventListener("qbrowserVisibilityChange",function(J_a){J_c._setStageVisible(!J_a.hidden)}),J_a.addEventListener("resize",function(){var J_a=J_O.window.orientation;null!=J_a&&J_a!=J_b._previousOrientation&&J_c._isInputting()&&(J_xa.inputElement.target.focus=!1),J_b._previousOrientation=J_a,J_c._isInputting()||J_c._resetCanvas()}),J_a.addEventListener("orientationchange",function(J_a){J_c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),J_O.onMobile&&this.on("mousedown",this,this._onmouseMove)}J_k(J_g,"laya.display.Stage",J_l);var J_a=J_g.prototype;return J_a._setStageVisible=function(J_a){this._isVisibility!=J_a&&(this._isVisibility=J_a,this._isVisibility||this._isInputting()&&(J_xa.inputElement.target.focus=!1),this.event("visibilitychange"))},J_a._isInputting=function(){return J_O.onMobile&&J_xa.isInputting},J_a._changeCanvasSize=function(){this.setScreenSize(J_O.clientWidth*J_O.pixelRatio,J_O.clientHeight*J_O.pixelRatio)},J_a._resetCanvas=function(){if(this.screenAdaptationEnabled){var J_a=J_J._mainCanvas;J_a.source.style;J_a.size(1,1),J_z.timer.once(100,this,this._changeCanvasSize)}},J_a.setScreenSize=function(J_a,J_b){var J_c=!1;if("none"!==this._screenMode&&(J_c=(J_a/J_b<1?"vertical":"horizontal")!==this._screenMode)){var J_d=J_b;J_b=J_a,J_a=J_d}this.canvasRotation=J_c;var J_e=J_J._mainCanvas,J_f=J_e.source.style,J_g=this._canvasTransform.identity(),J_h=this._scaleMode,J_i=J_a/this.designWidth,J_j=J_b/this.designHeight,J_k=this.designWidth,J_l=this.designHeight,J_m=J_a,J_n=J_b,J_o=J_O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,J_h){case"noscale":J_i=J_j=1,J_m=this.designWidth,J_n=this.designHeight;break;case"showall":J_i=J_j=Math.min(J_i,J_j),J_k=J_m=Math.round(this.designWidth*J_i),J_l=J_n=Math.round(this.designHeight*J_j);break;case"noborder":J_i=J_j=Math.max(J_i,J_j),J_m=Math.round(this.designWidth*J_i),J_n=Math.round(this.designHeight*J_j);break;case"full":J_i=J_j=1,this._width=J_k=J_a,this._height=J_l=J_b;break;case"fixedwidth":J_j=J_i,this._height=J_l=Math.round(J_b/J_i);break;case"fixedheight":J_i=J_j,this._width=J_k=Math.round(J_a/J_j);break;case"fixedauto":J_a/J_b<this.designWidth/this.designHeight?(J_j=J_i,this._height=J_l=Math.round(J_b/J_i)):(J_i=J_j,this._width=J_k=Math.round(J_a/J_j))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,J_k=J_k+1&2147483646,J_l=J_l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),J_i*=this.scaleX,J_j*=this.scaleY,1===J_i&&1===J_j?this.transform.identity():(this.transform.a=this._formatData(J_i/(J_m/J_k)),this.transform.d=this._formatData(J_j/(J_n/J_l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),J_e.size(J_k,J_l),J_F.changeWebGLSize(J_k,J_l),J_g.scale(J_m/J_k/J_o,J_n/J_l/J_o),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(J_a-J_m)/J_o:this.offset.x=.5*(J_a-J_m)/J_o,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(J_b-J_n)/J_o:this.offset.y=.5*(J_b-J_n)/J_o,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),J_g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,J_c&&("horizontal"===this._screenMode?(J_g.rotate(Math.PI/2),J_g.translate(J_b/J_o,0),this.canvasDegree=90):(J_g.rotate(-Math.PI/2),J_g.translate(0,J_a/J_o),this.canvasDegree=-90)),J_g.a=this._formatData(J_g.a),J_g.d=this._formatData(J_g.d),J_g.tx=this._formatData(J_g.tx),J_g.ty=this._formatData(J_g.ty),J_f.transformOrigin=J_f.webkitTransformOrigin=J_f.msTransformOrigin=J_f.mozTransformOrigin=J_f.oTransformOrigin="0px 0px 0px",J_f.transform=J_f.webkitTransform=J_f.msTransform=J_f.mozTransform=J_f.oTransform="matrix("+J_g.toString()+")",J_g.translate(parseInt(J_f.left)||0,parseInt(J_f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},J_a._formatData=function(J_a){return Math.abs(J_a)<1e-6?0:Math.abs(1-J_a)<.001?0<J_a?1:-1:J_a},J_a.getMousePoint=function(){return J_A.TEMP.setTo(this.mouseX,this.mouseY)},J_a.repaint=function(){this._repaint=1},J_a.parentRepaint=function(){},J_a._loop=function(){return this.render(J_J.context,0,0),!0},J_a._onmouseMove=function(J_a){this._mouseMoveTime=J_O.now()},J_a.getTimeFromFrameStart=function(){return J_O.now()-this._frameStartTime},J_a.render=function(J_a,J_b,J_c){if("sleep"===this._frameRate&&!J_J.isConchApp){var J_d=J_O.now();if(!(1e3<=J_d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(J_X.loopCount++,J_p.instance.runEvent(),J_z.timer._update()));this._frameStartTime=J_d}if(this._renderCount++,J_J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=J_O.now();var J_e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),J_f=this._renderCount%2==0;if(J_X.renderSlow=!J_e,J_e||J_f||J_J.isConchApp){var J_g;J_X.loopCount++,J_p.instance.runEvent(),J_z.timer._update(),J_F.update3DLoop();var J_h=0,J_i=0;if(J_J.isConchNode)for(J_h=0,J_i=this._scenes.length;J_h<J_i;J_h++)(J_g=this._scenes[J_h])&&J_g._updateSceneConch();else for(J_h=0,J_i=this._scenes.length;J_h<J_i;J_h++)(J_g=this._scenes[J_h])&&J_g._updateScene();if(J_J.isConchNode){var J_j=J_la.CustomList;for(J_h=0,J_i=J_j.length;J_h<J_i;J_h++){var J_k=J_j[J_h];J_k.customRender(J_k.customContext,0,0)}return}}J_J.isConchNode||this.renderingEnabled&&(J_e||!J_f||J_J.isConchWebGL)&&(J_J.isWebGL?J_J.WebGL.mainContext&&!J_J.WebGL.mainContext.isContextLost()&&(J_a.clear(),J_l.prototype.render.call(this,J_a,J_b,J_c),J_X._show&&J_X._sp&&J_X._sp.render(J_a,J_b,J_c),J_F.clear(this._bgColor),J_F.beginFlush(),J_a.flush(),J_F.endFinish(),J__.instance&&J__.getInstance().endDispose()):(J_F.clear(this._bgColor),J_l.prototype.render.call(this,J_a,J_b,J_c),J_X._show&&J_X._sp&&J_X._sp.render(J_a,J_b,J_c)))}else this._renderCount%5==0&&(J_X.loopCount++,J_p.instance.runEvent(),J_z.timer._update())},J_a._requestFullscreen=function(){var J_a=J_O.document.documentElement;J_a.requestFullscreen?J_a.requestFullscreen():J_a.mozRequestFullScreen?J_a.mozRequestFullScreen():J_a.webkitRequestFullscreen?J_a.webkitRequestFullscreen():J_a.msRequestFullscreen&&J_a.msRequestFullscreen()},J_a._fullScreenChanged=function(){J_z.stage.event("fullscreenchange")},J_a.exitFullscreen=function(){var J_a=J_O.document;J_a.exitFullscreen?J_a.exitFullscreen():J_a.mozCancelFullScreen?J_a.mozCancelFullScreen():J_a.webkitExitFullscreen&&J_a.webkitExitFullscreen()},J_o(0,J_a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),J_o(0,J_a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),J_o(0,J_a,"frameRate",function(){return this._frameRate},function(J_a){if(this._frameRate=J_a,J_J.isConchApp)switch(this._frameRate){case"slow":J_O.window.conch&&J_O.window.conchConfig.setSlowFrame&&J_O.window.conchConfig.setSlowFrame(!0);break;case"fast":J_O.window.conch&&J_O.window.conchConfig.setSlowFrame&&J_O.window.conchConfig.setSlowFrame(!1);break;case"mouse":J_O.window.conch&&J_O.window.conchConfig.setMouseFrame&&J_O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":J_O.window.conch&&J_O.window.conchConfig.setLimitFPS&&J_O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),J_o(0,J_a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),J_o(0,J_a,"width",J_l.prototype._$get_width,function(J_a){this.designWidth=J_a,J_z.superSet(J_la,this,"width",J_a),J_z.timer.callLater(this,this._changeCanvasSize)}),J_o(0,J_a,"alignH",function(){return this._alignH},function(J_a){this._alignH=J_a,J_z.timer.callLater(this,this._changeCanvasSize)}),J_o(0,J_a,"isFocused",function(){return this._isFocused}),J_o(0,J_a,"height",J_l.prototype._$get_height,function(J_a){this.designHeight=J_a,J_z.superSet(J_la,this,"height",J_a),J_z.timer.callLater(this,this._changeCanvasSize)}),J_o(0,J_a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||J_G.create()},J_l.prototype._$set_transform),J_o(0,J_a,"isVisibility",function(){return this._isVisibility}),J_o(0,J_a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),J_o(0,J_a,"scaleMode",function(){return this._scaleMode},function(J_a){this._scaleMode=J_a,J_z.timer.callLater(this,this._changeCanvasSize)}),J_o(0,J_a,"alignV",function(){return this._alignV},function(J_a){this._alignV=J_a,J_z.timer.callLater(this,this._changeCanvasSize)}),J_o(0,J_a,"bgColor",function(){return this._bgColor},function(J_a){this._bgColor=J_a,this.conchModel&&this.conchModel.bgColor(J_a),J_J.isWebGL&&(J_a?J_g._wgColor=J_S.create(J_a)._color:J_O.onMiniGame||(J_g._wgColor=null)),J_O.onLimixiu?J_g._wgColor=J_S.create(J_a)._color:J_J.canvas.style.background=J_a||"none"}),J_o(0,J_a,"mouseX",function(){return Math.round(J_p.instance.mouseX/this.clientScaleX)}),J_o(0,J_a,"mouseY",function(){return Math.round(J_p.instance.mouseY/this.clientScaleY)}),J_o(0,J_a,"screenMode",function(){return this._screenMode},function(J_a){this._screenMode=J_a}),J_o(0,J_a,"visible",J_l.prototype._$get_visible,function(J_a){this.visible!==J_a&&(J_z.superSet(J_la,this,"visible",J_a),J_J._mainCanvas.source.style.visibility=J_a?"visible":"hidden")}),J_o(0,J_a,"fullScreenEnabled",null,function(J_a){var J_b=J_O.document,J_c=J_J.canvas;J_a?(J_c.addEventListener("mousedown",this._requestFullscreen),J_c.addEventListener("touchstart",this._requestFullscreen),J_b.addEventListener("fullscreenchange",this._fullScreenChanged),J_b.addEventListener("mozfullscreenchange",this._fullScreenChanged),J_b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),J_b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(J_c.removeEventListener("mousedown",this._requestFullscreen),J_c.removeEventListener("touchstart",this._requestFullscreen),J_b.removeEventListener("fullscreenchange",this._fullScreenChanged),J_b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),J_b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),J_b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),J_g.SCALE_NOSCALE="noscale",J_g.SCALE_EXACTFIT="exactfit",J_g.SCALE_SHOWALL="showall",J_g.SCALE_NOBORDER="noborder",J_g.SCALE_FULL="full",J_g.SCALE_FIXED_WIDTH="fixedwidth",J_g.SCALE_FIXED_HEIGHT="fixedheight",J_g.SCALE_FIXED_AUTO="fixedauto",J_g.ALIGN_LEFT="left",J_g.ALIGN_RIGHT="right",J_g.ALIGN_CENTER="center",J_g.ALIGN_TOP="top",J_g.ALIGN_MIDDLE="middle",J_g.ALIGN_BOTTOM="bottom",J_g.SCREEN_NONE="none",J_g.SCREEN_HORIZONTAL="horizontal",J_g.SCREEN_VERTICAL="vertical",J_g.FRAME_FAST="fast",J_g.FRAME_SLOW="slow",J_g.FRAME_MOUSE="mouse",J_g.FRAME_SLEEP="sleep",J_g.FRAME_MOUSE_THREDHOLD=2e3,J_i(J_g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),J_g}(J_la),J_ua=(function(J_a){function J_b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,J_b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}J_k(J_b,"laya.media.SoundNode",J_la);var J_c=J_b.prototype;J_c._onParentChange=function(){this.target=this.parent},J_c.play=function(J_a,J_b){void 0===J_a&&(J_a=1),isNaN(J_a)&&(J_a=1),this.url&&(this.stop(),this._channel=J_E.playSound(this.url,J_a,null,J_b))},J_c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},J_c._setPlayAction=function(J_a,J_b,J_c,J_d){void 0===J_d&&(J_d=!0),this[J_c]&&J_a&&(J_d?J_a.on(J_b,this,this[J_c]):J_a.off(J_b,this,this[J_c]))},J_c._setPlayActions=function(J_a,J_b,J_c,J_d){if(void 0===J_d&&(J_d=!0),J_a&&J_b){var J_e,J_f=J_b.split(","),J_g=0;for(J_e=J_f.length,J_g=0;J_g<J_e;J_g++)this._setPlayAction(J_a,J_f[J_g],J_c,J_d)}},J_o(0,J_c,"playEvent",null,function(J_a){(this._playEvents=J_a)&&this._tar&&this._setPlayActions(this._tar,J_a,"play")}),J_o(0,J_c,"target",null,function(J_a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=J_a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),J_o(0,J_c,"stopEvent",null,function(J_a){(this._stopEvents=J_a)&&this._tar&&this._setPlayActions(this._tar,J_a,"stop")})}(),function(J_a){function J_b(){this._src=null,this._onload=null,this._onerror=null,J_b.__super.call(this)}J_k(J_b,"laya.resource.FileBitmap",J_oa);var J_c=J_b.prototype;return J_o(0,J_c,"src",function(){return this._src},function(J_a){this._src=J_a}),J_o(0,J_c,"onload",null,function(J_a){}),J_o(0,J_c,"onerror",null,function(J_a){}),J_b}()),J_va=function(J_a){function J_c(J_a,J_b){this._is2D=!1,J_c.__super.call(this);var J_d=this;if(this._source=this,"2D"===J_a||"AUTO"===J_a&&!J_J.isWebGL){this._is2D=!0,this._source=J_b||J_O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var J_e=this;J_e.getContext=function(J_a,J_b){if(J_d._ctx)return J_d._ctx;var J_c=J_d._ctx=J_d._source.getContext(J_a,J_b);return J_c&&(J_c._canvas=J_e,J_J.isFlash||J_O.onLimixiu||(J_c.size=function(J_a,J_b){})),J_c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}J_k(J_c,"laya.resource.HTMLCanvas",J_oa);var J_b=J_c.prototype;return J_b.clear=function(){this._ctx&&this._ctx.clear()},J_b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},J_b.release=function(){},J_b._setContext=function(J_a){this._ctx=J_a},J_b.getContext=function(J_a,J_b){return this._ctx?this._ctx:this._ctx=J_c._createContext(this)},J_b.getMemSize=function(){return 0},J_b.size=function(J_a,J_b){(this._w!=J_a||this._h!=J_b||this._source&&(this._source.width!=J_a||this._source.height!=J_b))&&(this._w=J_a,this._h=J_b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(J_a,J_b),this._source&&(this._source.height=J_b,this._source.width=J_a))},J_b.getCanvas=function(){return this._source},J_b.toBase64=function(J_a,J_b,J_c){if(this._source)if(J_J.isConchApp&&this._source.toBase64)this._source.toBase64(J_a,J_b,J_c);else{var J_d=this._source.toDataURL(J_a,J_b);J_c.call(this,J_d)}},J_o(0,J_b,"context",function(){return this._ctx}),J_o(0,J_b,"asBitmap",null,function(J_a){}),J_c.create=function(J_a,J_b){return new J_c(J_a,J_b)},J_c.TYPE2D="2D",J_c.TYPE3D="3D",J_c.TYPEAUTO="AUTO",J_c._createContext=null,J_c}(),J_wa=(function(J_a){function J_i(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){throw J_i.__super.call(this),new Error("不允许new！")}J_k(J_i,"laya.resource.HTMLSubImage",J_oa),J_i.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){return void 0===J_h&&(J_h=!1),new J_i(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h)}}(),function(J_a){function J_l(){this._frames=null,this._url=null,J_l.__super.call(this),this._setControlNode(this)}J_k(J_l,"laya.display.Animation",J_a);var J_b=J_l.prototype;J_b.destroy=function(J_a){void 0===J_a&&(J_a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,J_a),this._frames=null,this._labels=null},J_b.play=function(J_a,J_b,J_c,J_d){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=!0),void 0===J_c&&(J_c=""),void 0===J_d&&(J_d=!0),J_c&&this._setFramesFromCache(J_c,J_d),this._isPlaying=!0,this.index="string"==typeof J_a?this._getFrameByLabel(J_a):J_a,this.loop=J_b,this._actionName=J_c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},J_b._setFramesFromCache=function(J_a,J_b){var J_c;return void 0===J_b&&(J_b=!1),this._url&&(J_a=this._url+"#"+J_a),J_a&&J_l.framesMap[J_a]?((J_c=J_l.framesMap[J_a])instanceof Array?(this._frames=J_l.framesMap[J_a],this._count=this._frames.length):(J_c.nodeRoot&&(J_l.framesMap[J_a]=this._parseGraphicAnimationByData(J_c),J_c=J_l.framesMap[J_a]),this._frames=J_c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=J_c.interval),this._labels=this._copyLabels(J_c.labels)),!0):(J_b&&console.log("ani not found:",J_a),!1)},J_b._copyLabels=function(J_a){if(!J_a)return null;var J_b,J_c;for(J_c in J_b={},J_a)J_b[J_c]=J_$.copyArray([],J_a[J_c]);return J_b},J_b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&J_a.prototype._frameLoop.call(this)},J_b._displayToIndex=function(J_a){this._frames&&(this.graphics=this._frames[J_a])},J_b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},J_b.loadImages=function(J_a,J_b){return void 0===J_b&&(J_b=""),this._url="",this._setFramesFromCache(J_b)||(this.frames=J_l.framesMap[J_b]?J_l.framesMap[J_b]:J_l.createFrames(J_a,J_b)),this},J_b.loadAtlas=function(J_b,J_c,J_d){void 0===J_d&&(J_d=""),this._url="";var J_e=this;function J_a(J_a){J_b===J_a&&(J_e.frames=J_l.framesMap[J_d]?J_l.framesMap[J_d]:J_l.createFrames(J_b,J_d),J_c&&J_c.run())}return J_e._setFramesFromCache(J_d)||(J_ha.getAtlas(J_b)?J_a(J_b):J_z.loader.load(J_b,J_u.create(null,J_a,[J_b]),null,"atlas")),this},J_b.loadAnimation=function(J_a,J_b,J_c){this._url=J_a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,J_b&&J_b.run()):!J_c||J_ha.getAtlas(J_c)?this._loadAnimationData(J_a,J_b,J_c):J_z.loader.load(J_c,J_u.create(this,this._loadAnimationData,[J_a,J_b,J_c]),null,"atlas"),this},J_b._loadAnimationData=function(J_h,J_i,J_a){var J_j=this;if(!J_a||J_ha.getAtlas(J_a)){var J_k=this;J_ha.getRes(J_h)?J_b(J_h):J_z.loader.load(J_h,J_u.create(null,J_b,[J_h]),null,"json"),J_ha.clearRes(J_h)}else console.warn("atlas load fail:"+J_a);function J_b(J_a){if(J_ha.getRes(J_a)&&J_h===J_a){var J_b;if(J_l.framesMap[J_h+"#"])J_k._setFramesFromCache(J_j._actionName,!0),J_j.index=0,J_j._checkResumePlaying();else{var J_c=J_k._parseGraphicAnimation(J_ha.getRes(J_h));if(!J_c)return;var J_d,J_e=J_c.animationList,J_f=0,J_g=J_e.length;for(J_f=0;J_f<J_g;J_f++)J_b=J_e[J_f],J_l.framesMap[J_h+"#"+J_b.name]=J_b,J_d||(J_d=J_b);J_d&&(J_l.framesMap[J_h+"#"]=J_d,J_k._setFramesFromCache(J_j._actionName,!0),J_j.index=0),J_j._checkResumePlaying()}J_i&&J_i.run()}}},J_b._parseGraphicAnimation=function(J_a){return J_za.parseAnimationData(J_a)},J_b._parseGraphicAnimationByData=function(J_a){return J_za.parseAnimationByData(J_a)},J_o(0,J_b,"frames",function(){return this._frames},function(J_a){(this._frames=J_a)&&(this._count=J_a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),J_o(0,J_b,"autoPlay",null,function(J_a){J_a?this.play():this.stop()}),J_o(0,J_b,"source",null,function(J_a){-1<J_a.indexOf(".ani")?this.loadAnimation(J_a):-1<J_a.indexOf(".json")||-1<J_a.indexOf("als")||-1<J_a.indexOf("atlas")?this.loadAtlas(J_a):this.loadImages(J_a.split(","))}),J_o(0,J_b,"autoAnimation",null,function(J_a){this.play(0,!0,J_a,!1)}),J_l.createFrames=function(J_a,J_b){var J_c,J_d,J_e=0,J_f=0;if("string"==typeof J_a){var J_g=J_ha.getAtlas(J_a);if(J_g&&J_g.length)for(J_c=[],J_e=0,J_f=J_g.length;J_e<J_f;J_e++)(J_d=new J_F.createGraphics).drawTexture(J_ha.getRes(J_g[J_e]),0,0),J_c.push(J_d)}else if(J_a instanceof Array)for(J_c=[],J_e=0,J_f=J_a.length;J_e<J_f;J_e++)(J_d=new J_F.createGraphics).loadImage(J_a[J_e],0,0),J_c.push(J_d);return J_b&&(J_l.framesMap[J_b]=J_c),J_c},J_l.clearCache=function(J_a){var J_b,J_c=J_l.framesMap,J_d=J_a+"#";for(J_b in J_c)J_b!==J_a&&0!=J_b.indexOf(J_d)||delete J_l.framesMap[J_b]},J_l.framesMap={}}(J_pa),function(J_a){function J_f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,J_f.__super.call(this),null==J_f._sortIndexFun&&(J_f._sortIndexFun=J_y.sortByKey("index",!1,!0))}J_k(J_f,"laya.display.FrameAnimation",J_a);var J_b=J_f.prototype;return J_b._setUp=function(J_a,J_b){this._labels=null,this._animationNewFrames=null,this._targetDic=J_a,this._animationData=J_b,this.interval=1e3/J_b.frameRate,J_b.parsed?(this._count=J_b.count,this._labels=J_b.labels,this._animationNewFrames=J_b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),J_b.parsed=!0,J_b.labels=this._labels,J_b.count=this._count,J_b.animationNewFrames=this._animationNewFrames},J_b.clear=function(){J_a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},J_b._displayToIndex=function(J_a){if(this._animationData){J_a<0&&(J_a=0),J_a>this._count&&(J_a=this._count);var J_b=this._animationData.nodes,J_c=0,J_d=J_b.length;for(J_c=0;J_c<J_d;J_c++)this._displayNodeToFrame(J_b[J_c],J_a)}},J_b._displayNodeToFrame=function(J_a,J_b,J_c){J_c||(J_c=this._targetDic);var J_d=J_c[J_a.target];if(J_d){var J_e,J_f,J_g,J_h=J_a.frames,J_i=J_a.keys,J_j=0,J_k=J_i.length;for(J_j=0;J_j<J_k;J_j++)J_g=(J_f=J_h[J_e=J_i[J_j]]).length>J_b?J_f[J_b]:J_f[J_f.length-1],J_d[J_e]=J_g}},J_b._calculateDatas=function(){if(this._animationData){var J_a,J_b=this._animationData.nodes,J_c=0,J_d=J_b.length;for(J_c=this._count=0;J_c<J_d;J_c++)J_a=J_b[J_c],this._calculateNodeKeyFrames(J_a);this._count+=1}},J_b._calculateNodeKeyFrames=function(J_a){var J_b,J_c,J_d=J_a.keyframes,J_e=J_a.target;for(J_b in J_a.frames||(J_a.frames={}),J_a.keys?J_a.keys.length=0:J_a.keys=[],J_a.initValues||(J_a.initValues={}),J_d)J_c=J_d[J_b],J_a.frames[J_b]||(J_a.frames[J_b]=[]),this._targetDic&&this._targetDic[J_e]&&(J_a.initValues[J_b]=this._targetDic[J_e][J_b]),J_c.sort(J_f._sortIndexFun),J_a.keys.push(J_b),this._calculateNodePropFrames(J_c,J_a.frames[J_b],J_b,J_e)},J_b.resetToInitState=function(){if(this._targetDic&&this._animationData){var J_a,J_b,J_c=this._animationData.nodes,J_d=0,J_e=J_c.length;for(J_d=0;J_d<J_e;J_d++)if(J_b=(J_a=J_c[J_d]).initValues){var J_f,J_g=this._targetDic[J_a.target];if(J_g)for(J_f in J_b)J_g[J_f]=J_b[J_f]}}},J_b._calculateNodePropFrames=function(J_a,J_b,J_c,J_d){var J_e=0,J_f=J_a.length-1;if(0<J_f){for(J_b.length=J_a[J_f].index+1,J_e=0;J_e<J_f;J_e++)this._dealKeyFrame(J_a[J_e]),this._calculateFrameValues(J_a[J_e],J_a[J_e+1],J_b);this._dealKeyFrame(J_a[J_e])}0==J_f&&(J_b[J_a[0].index]=J_a[0].value,this._animationNewFrames&&(this._animationNewFrames[J_a[0].index]=!0))},J_b._dealKeyFrame=function(J_a){J_a.label&&""!=J_a.label&&this.addLabel(J_a.label,J_a.index)},J_b._calculateFrameValues=function(J_a,J_b,J_c){var J_d,J_e=0,J_f=J_a.index,J_g=J_b.index,J_h=J_a.value,J_i=J_b.value-J_a.value,J_j=J_g-J_f;if(J_g>this._count&&(this._count=J_g),J_a.tween)for(null==(J_d=J_U[J_a.tweenMethod])&&(J_d=J_U.linearNone),J_e=J_f;J_e<J_g;J_e++)J_c[J_e]=J_d(J_e-J_f,J_h,J_i,J_j),this._animationNewFrames&&(this._animationNewFrames[J_e]=!0);else for(J_e=J_f;J_e<J_g;J_e++)J_c[J_e]=J_h;this._animationNewFrames&&(this._animationNewFrames[J_a.index]=!0,this._animationNewFrames[J_b.index]=!0),J_c[J_b.index]=J_b.value},J_f._sortIndexFun=null,J_f}(J_pa)),J_xa=function(J_b){function J_e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",J_e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=J_qa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}J_k(J_e,"laya.display.Input",J_b);var J_a=J_e.prototype;return J_a.setSelection=function(J_a,J_b){this.focus=!0,laya.display.Input.inputElement.selectionStart=J_a,laya.display.Input.inputElement.selectionEnd=J_b},J_a._onUnDisplay=function(J_a){this.focus=!1},J_a._onMouseDown=function(J_a){this.focus=!0},J_a._syncInputTransform=function(){var J_a=this.nativeInput,J_b=J_$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),J_c=this._width-this.padding[1]-this.padding[3],J_d=this._height-this.padding[0]-this.padding[2];J_J.isConchApp?(J_a.setScale(J_b.scaleX,J_b.scaleY),J_a.setSize(J_c,J_d),J_a.setPos(J_b.x,J_b.y)):(J_e.inputContainer.style.transform=J_e.inputContainer.style.webkitTransform="scale("+J_b.scaleX+","+J_b.scaleY+") rotate("+J_z.stage.canvasDegree+"deg)",J_a.style.width=J_c+"px",J_a.style.height=J_d+"px",J_e.inputContainer.style.left=J_b.x+"px",J_e.inputContainer.style.top=J_b.y+"px")},J_a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},J_a._setInputMethod=function(){J_e.input.parentElement&&J_e.inputContainer.removeChild(J_e.input),J_e.area.parentElement&&J_e.inputContainer.removeChild(J_e.area),J_e.inputElement=this._multiline?J_e.area:J_e.input,J_e.inputContainer.appendChild(J_e.inputElement),J_qa.RightToLeft&&(J_e.inputElement.style.direction="rtl")},J_a._focusIn=function(){laya.display.Input.isInputting=!0;var J_a=this.nativeInput;this._focus=!0;var J_b=J_a.style;J_b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),J_a.readOnly=!this._editable,J_J.isConchApp&&(J_a.setType(this._type),J_a.setForbidEdit(!this._editable)),J_a.maxLength=this._maxChars;this.padding;if(J_a.type=this._type,J_a.value=this._content,J_a.placeholder=this._prompt,J_z.stage.off("keydown",this,this._onKeyDown),J_z.stage.on("keydown",this,this._onKeyDown),(J_z.stage.focus=this).event("focus"),J_O.onPC&&J_a.focus(),!J_O.onMiniGame){this._text;this._text=null}this.typeset(),J_a.setColor(this._originColor),J_a.setFontSize(this.fontSize),J_a.setFontFace(J_O.onIPhone&&J_qa._fontFamilyMap[this.font]||this.font),J_J.isConchApp&&J_a.setMultiAble&&J_a.setMultiAble(this._multiline),J_b.lineHeight=this.leading+this.fontSize+"px",J_b.fontStyle=this.italic?"italic":"normal",J_b.fontWeight=this.bold?"bold":"normal",J_b.textAlign=this.align,J_b.padding="0 0",this._syncInputTransform(),!J_J.isConchApp&&J_O.onPC&&J_z.timer.frameLoop(1,this,this._syncInputTransform)},J_a._setPromptColor=function(){(J_e.promptStyleDOM=J_O.getElementById("promptStyle"))||((J_e.promptStyleDOM=J_O.createElement("style")).setAttribute("id","promptStyle"),J_O.document.head.appendChild(J_e.promptStyleDOM)),J_e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},J_a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(J_z.superSet(J_qa,this,"text",this._content),J_z.superSet(J_qa,this,"color",this._originColor)):(J_z.superSet(J_qa,this,"text",this._prompt),J_z.superSet(J_qa,this,"color",this._promptColor)),J_z.stage.off("keydown",this,this._onKeyDown),J_z.stage.focus=null,this.event("blur"),J_J.isConchApp&&this.nativeInput.blur(),J_O.onPC&&J_z.timer.clear(this,this._syncInputTransform)},J_a._onKeyDown=function(J_a){13===J_a.keyCode&&(J_O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},J_a.changeText=function(J_a){this._content=J_a,this._focus?(this.nativeInput.value=J_a||"",this.event("change")):J_b.prototype.changeText.call(this,J_a)},J_o(0,J_a,"color",J_b.prototype._$get_color,function(J_a){this._focus&&this.nativeInput.setColor(J_a),J_z.superSet(J_qa,this,"color",this._content?J_a:this._promptColor),this._originColor=J_a}),J_o(0,J_a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(J_a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),J_o(0,J_a,"multiline",function(){return this._multiline},function(J_a){this._multiline=J_a,this.valign=J_a?"top":"middle"}),J_o(0,J_a,"maxChars",function(){return this._maxChars},function(J_a){J_a<=0&&(J_a=1e5),this._maxChars=J_a}),J_o(0,J_a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(J_a){J_z.superSet(J_qa,this,"color",this._originColor),J_a+="",this._focus?(this.nativeInput.value=J_a||"",this.event("change")):(this._multiline||(J_a=J_a.replace(/\r?\n/g,"")),(this._content=J_a)?J_z.superSet(J_qa,this,"text",J_a):(J_z.superSet(J_qa,this,"text",this._prompt),J_z.superSet(J_qa,this,"color",this.promptColor)))}),J_o(0,J_a,"nativeInput",function(){return this._multiline?J_e.area:J_e.input}),J_o(0,J_a,"prompt",function(){return this._prompt},function(J_a){!this._text&&J_a&&J_z.superSet(J_qa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?J_z.superSet(J_qa,this,"text",this._text==this._prompt?J_a:this._text):J_z.superSet(J_qa,this,"text",J_a),this._prompt=J_qa.langPacks&&J_qa.langPacks[J_a]?J_qa.langPacks[J_a]:J_a}),J_o(0,J_a,"focus",function(){return this._focus},function(J_a){var J_b=this.nativeInput;this._focus!==J_a&&(J_a?(J_b.target?J_b.target._focusOut():this._setInputMethod(),(J_b.target=this)._focusIn()):(J_b.target=null,this._focusOut(),J_O.document.body.scrollTop=0,J_b.blur(),J_J.isConchApp?J_b.setPos(-1e4,-1e4):J_e.inputContainer.contains(J_b)&&J_e.inputContainer.removeChild(J_b)))}),J_o(0,J_a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(J_a){J_a?(-1<(J_a="[^"+J_a+"]").indexOf("^^")&&(J_a=J_a.replace("^^","")),this._restrictPattern=new RegExp(J_a,"g")):this._restrictPattern=null}),J_o(0,J_a,"editable",function(){return this._editable},function(J_a){this._editable=J_a,J_J.isConchApp&&J_e.input.setForbidEdit(!J_a)}),J_o(0,J_a,"promptColor",function(){return this._promptColor},function(J_a){this._promptColor=J_a,this._content||J_z.superSet(J_qa,this,"color",J_a)}),J_o(0,J_a,"type",function(){return this._type},function(J_a){this._getCSSStyle().password="password"==J_a,this._type=J_a,J_J.isConchApp&&this.nativeInput.setType(J_a)}),J_o(0,J_a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(J_a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),J_o(0,J_a,"asPassword",function(){return this._getCSSStyle().password},function(J_a){this._getCSSStyle().password=J_a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),J_e.__init__=function(){J_e._createInputElement(),J_O.onMobile&&J_J.canvas.addEventListener(J_e.IOS_IFRAME?J_O.onMiniGame?"touchend":"click":"touchend",J_e._popupInputMethod)},J_e._popupInputMethod=function(J_a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},J_e._createInputElement=function(){J_e._initInput(J_e.area=J_O.createElement("textarea")),J_e._initInput(J_e.input=J_O.createElement("input")),(J_e.inputContainer=J_O.createElement("div")).style.position="absolute",J_e.inputContainer.style.zIndex=1e5,J_O.container.appendChild(J_e.inputContainer),J_e.inputContainer.setPos=function(J_a,J_b){J_e.inputContainer.style.left=J_a+"px",J_e.inputContainer.style.top=J_b+"px"}},J_e._initInput=function(J_b){var J_a=J_b.style;J_a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",J_a.resize="none",J_a.backgroundColor="transparent",J_a.border="none",J_a.outline="none",J_a.zIndex=1,J_b.addEventListener("input",J_e._processInputting),J_b.addEventListener("mousemove",J_e._stopEvent),J_b.addEventListener("mousedown",J_e._stopEvent),J_b.addEventListener("touchmove",J_e._stopEvent),J_b.setFontFace=function(J_a){J_b.style.fontFamily=J_a},J_J.isConchApp||(J_b.setColor=function(J_a){J_b.style.color=J_a},J_b.setFontSize=function(J_a){J_b.style.fontSize=J_a+"px"})},J_e._processInputting=function(J_a){var J_b=laya.display.Input.inputElement.target;if(J_b){var J_c=laya.display.Input.inputElement.value;J_b._restrictPattern&&(J_c=J_c.replace(/\u2006|\x27/g,""),J_b._restrictPattern.test(J_c)&&(J_c=J_c.replace(J_b._restrictPattern,""),laya.display.Input.inputElement.value=J_c)),J_b._text=J_c,J_b.event("input")}},J_e._stopEvent=function(J_a){"touchmove"==J_a.type&&J_a.preventDefault(),J_a.stopPropagation&&J_a.stopPropagation()},J_e.TYPE_TEXT="text",J_e.TYPE_PASSWORD="password",J_e.TYPE_EMAIL="email",J_e.TYPE_URL="url",J_e.TYPE_NUMBER="number",J_e.TYPE_RANGE="range",J_e.TYPE_DATE="date",J_e.TYPE_MONTH="month",J_e.TYPE_WEEK="week",J_e.TYPE_TIME="time",J_e.TYPE_DATE_TIME="datetime",J_e.TYPE_DATE_TIME_LOCAL="datetime-local",J_e.TYPE_SEARCH="search",J_e.input=null,J_e.area=null,J_e.inputElement=null,J_e.inputContainer=null,J_e.confirmButton=null,J_e.promptStyleDOM=null,J_e.inputHeight=45,J_e.isInputting=!1,J_e.stageMatrix=null,J_i(J_e,["IOS_IFRAME",function(){return this.IOS_IFRAME=J_O.onIOS&&J_O.window.top!=J_O.window.self}]),J_e}(J_qa),J_ya=function(J_a){function J_c(J_a,J_b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,J_c.__super.call(this),J_a&&this._init_(J_a,J_b)}J_k(J_c,"laya.resource.HTMLImage",J_ua);var J_b=J_c.prototype;return J_b._init_=function(J_a,J_b){this._src=J_a,this._source=new J_O.window.Image,J_b&&(J_b.onload&&(this.onload=J_b.onload),J_b.onerror&&(this.onerror=J_b.onerror),J_b.onCreate&&J_b.onCreate(this)),0!=J_a.indexOf("data:image")&&(this._source.crossOrigin=""),J_a&&(this._source.src=J_a)},J_b.recreateResource=function(){var J_a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var J_b=this;this._source=new J_O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(J_b._needReleaseAgain)return J_b._needReleaseAgain=!1,J_b._source.onload=null,void(J_b._source=null);J_b._source.onload=null,J_b.memorySize=J_a._w*J_a._h*4,J_b._recreateLock=!1,J_b.completeCreate()},this._source.src=this._src}},J_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},J_b.onresize=function(){this._w=this._source.width,this._h=this._source.height},J_o(0,J_b,"onload",null,function(J_a){var J_b=this;this._onload=J_a,this._source&&(this._source.onload=null!=this._onload?function(){J_b.onresize(),J_b._onload()}:null)}),J_o(0,J_b,"onerror",null,function(J_a){var J_b=this;this._onerror=J_a,this._source&&(this._source.onerror=null!=this._onerror?function(){J_b._onerror()}:null)}),J_o(0,J_b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(J_a){this._enableMerageInAtlas=J_a,J_J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=J_a)}),J_c.create=function(J_a,J_b){return new J_c(J_a,J_b)},J_c}(),J_za=(function(J_f){function J_a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,J_a.__super.call(this)}J_k(J_a,"laya.display.EffectAnimation",J_f);var J_b=J_a.prototype;J_b._onOtherBegin=function(J_a){J_a!=this&&this.stop()},J_b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},J_b._onPlayAction=function(){this.play(0,!1)},J_b.play=function(J_a,J_b,J_c,J_d){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=!0),void 0===J_c&&(J_c=""),void 0===J_d&&(J_d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,J_a,J_b,J_c,J_d))},J_b._recordInitData=function(){if(this._aniKeys){var J_a,J_b,J_c=0;for(J_a=this._aniKeys.length,J_c=0;J_c<J_a;J_c++)J_b=this._aniKeys[J_c],this._initData[J_b]=this._target[J_b]}},J_b._displayToIndex=function(J_a){if(this._animationData){J_a<0&&(J_a=0),J_a>this._count&&(J_a=this._count);var J_b=this._animationData.nodes,J_c=0,J_d=J_b.length;for(J_d=1<J_d?1:J_d,J_c=0;J_c<J_d;J_c++)this._displayNodeToFrame(J_b[J_c],J_a)}},J_b._displayNodeToFrame=function(J_a,J_b,J_c){if(this._target){var J_d;J_d=this._target;var J_e,J_f,J_g,J_h,J_i=J_a.frames,J_j=J_a.keys,J_k=0,J_l=J_j.length;J_h=J_a.secondFrames;var J_m,J_n,J_o,J_p,J_q=0;for(J_k=0;J_k<J_l;J_k++)J_f=J_i[J_e=J_j[J_k]],J_g=-1==(J_q=J_h[J_e])?this._initData[J_e]:J_b<J_q?(J_o=(J_n=J_a.keyframes[J_e])[0]).tween?(null==(J_m=J_U[J_o.tweenMethod])&&(J_m=J_U.linearNone),J_p=J_n[1],J_m(J_b,this._initData[J_e],J_p.value-this._initData[J_e],J_p.index)):this._initData[J_e]:J_f.length>J_b?J_f[J_b]:J_f[J_f.length-1],J_d[J_e]=J_g}},J_b._calculateNodeKeyFrames=function(J_a){J_f.prototype._calculateNodeKeyFrames.call(this,J_a);var J_b,J_c,J_d,J_e=J_a.keyframes;J_a.target;for(J_b in J_d={},J_a.secondFrames=J_d,J_e)(J_c=J_e[J_b]).length<=1?J_d[J_b]=-1:J_d[J_b]=J_c[1].index},J_o(0,J_b,"target",function(){return this._target},function(J_a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=J_a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),J_o(0,J_b,"playEvent",null,function(J_a){(this._playEvents=J_a)&&this.addEvent()}),J_o(0,J_b,"effectData",null,function(J_a){var J_b;J_a&&((J_b=J_a.animations)&&J_b[0]&&(this._setUp({},J_b[0]),J_b[0].nodes&&J_b[0].nodes[0]&&(this._aniKeys=J_b[0].nodes[0].keys)))}),J_o(0,J_b,"effectClass",null,function(J_a){var J_b,J_c;(this._effectClass=J_R.getClass(J_a),this._effectClass)&&((J_b=this._effectClass.uiView)&&(J_c=J_b.animations)&&J_c[0]&&(this._setUp({},J_c[0]),J_c[0].nodes&&J_c[0].nodes[0]&&(this._aniKeys=J_c[0].nodes[0].keys)))}),J_a.EffectAnimationBegin="effectanimationbegin"}(J_wa),function(J_b){var J_D;function J_E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,J_E.__super.call(this)}J_k(J_E,"laya.utils.GraphicAnimation",J_b);var J_a=J_E.prototype;return J_a._parseNodeList=function(J_a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[J_a.compId]=J_a.props,J_a.compId&&this._nodeList.push(J_a.compId);var J_b=J_a.child;if(J_b){var J_c=0,J_d=J_b.length;for(J_c=0;J_c<J_d;J_c++)this._parseNodeList(J_b[J_c])}},J_a._calGraphicData=function(J_a){var J_b;if(this._setUp(null,J_a),this._createGraphicData(),this._nodeIDAniDic)for(J_b in this._nodeIDAniDic)this._nodeIDAniDic[J_b]=null},J_a._createGraphicData=function(){var J_a,J_b=[],J_c=0,J_d=this.count,J_e=this._animationNewFrames;for(J_e||(J_e=[]),J_c=0;J_c<J_d;J_c++)!J_e[J_c]&&J_a||(J_a=this._createFrameGraphic(J_c)),J_b.push(J_a);this._gList=J_b},J_a._createFrameGraphic=function(J_a){var J_b=J_F.createGraphics();return J_E._rootMatrix||(J_E._rootMatrix=new J_G),this._updateNodeGraphic(this._rootNode,J_a,J_E._rootMatrix,J_b),J_b},J_a._updateNodeGraphic=function(J_a,J_b,J_c,J_d,J_e){var J_f;void 0===J_e&&(J_e=1);var J_g,J_h,J_i,J_j=(J_f=this._nodeGDic[J_a.compId]=this._getNodeGraphicData(J_a.compId,J_b,this._nodeGDic[J_a.compId])).alpha*J_e;if(!(J_j<.01)&&(J_f.resultTransform||(J_f.resultTransform=J_G.create()),J_g=J_f.resultTransform,J_G.mul(J_f.transform,J_c,J_g),J_f.skin&&(J_h=this._getTextureByUrl(J_f.skin))&&(J_g._checkTransform()?(J_d.drawTexture(J_h,0,0,J_f.width,J_f.height,J_g,J_j),J_f.resultTransform=null):J_d.drawTexture(J_h,J_g.tx,J_g.ty,J_f.width,J_f.height,null,J_j)),J_i=J_a.child)){var J_k,J_l=0;for(J_k=J_i.length,J_l=0;J_l<J_k;J_l++)this._updateNodeGraphic(J_i[J_l],J_b,J_g,J_d,J_j)}},J_a._updateNoChilds=function(J_a,J_b){if(J_a.skin){var J_c=this._getTextureByUrl(J_a.skin);if(J_c){var J_d=J_a.transform;J_d._checkTransform();!J_d.bTransform?J_b.drawTexture(J_c,J_d.tx,J_d.ty,J_a.width,J_a.height,null,J_a.alpha):J_b.drawTexture(J_c,0,0,J_a.width,J_a.height,J_d.clone(),J_a.alpha)}}},J_a._updateNodeGraphic2=function(J_a,J_b,J_c){var J_d;if(J_d=this._nodeGDic[J_a.compId]=this._getNodeGraphicData(J_a.compId,J_b,this._nodeGDic[J_a.compId]),J_a.child){var J_e=J_d.transform;J_e._checkTransform();var J_f,J_g;J_g=(J_f=!J_e.bTransform)&&(0!=J_e.tx||0!=J_e.ty);var J_h,J_i,J_j;if((J_h=J_e.bTransform||1!=J_d.alpha)&&J_c.save(),1!=J_d.alpha&&J_c.alpha(J_d.alpha),J_f?J_g&&J_c.translate(J_e.tx,J_e.ty):J_c.transform(J_e.clone()),J_i=J_a.child,J_d.skin&&(J_j=this._getTextureByUrl(J_d.skin))&&J_c.drawTexture(J_j,0,0,J_d.width,J_d.height),J_i){var J_k,J_l=0;for(J_k=J_i.length,J_l=0;J_l<J_k;J_l++)this._updateNodeGraphic2(J_i[J_l],J_b,J_c)}J_h?J_c.restore():J_f?J_g&&J_c.translate(-J_e.tx,-J_e.ty):J_c.transform(J_e.clone().invert())}else this._updateNoChilds(J_d,J_c)},J_a._calculateNodeKeyFrames=function(J_a){J_b.prototype._calculateNodeKeyFrames.call(this,J_a),this._nodeIDAniDic[J_a.target]=J_a},J_a.getNodeDataByID=function(J_a){return this._nodeIDAniDic[J_a]},J_a._getParams=function(J_a,J_b,J_c,J_d){var J_e=J_E._temParam;J_e.length=J_b.length;var J_f=0,J_g=J_b.length;for(J_f=0;J_f<J_g;J_f++)J_e[J_f]=this._getObjVar(J_a,J_b[J_f][0],J_c,J_b[J_f][1],J_d);return J_e},J_a._getObjVar=function(J_a,J_b,J_c,J_d,J_e){if(J_a.hasOwnProperty(J_b)){var J_f=J_a[J_b];if(J_c>=J_f.length&&(J_c=J_f.length-1),null!=J_a[J_b][J_c])return J_a[J_b][J_c]}return J_e.hasOwnProperty(J_b)?J_e[J_b]:J_d},J_a._getNodeGraphicData=function(J_a,J_b,J_c){J_c||(J_c=J_D.create()),J_c.transform?J_c.transform.identity():J_c.transform=J_G.create();var J_d=this.getNodeDataByID(J_a);if(!J_d)return J_c;var J_e,J_f,J_g=J_d.frames,J_h=this._getParams(J_g,J_E._drawTextureCmd,J_b,this._nodeDefaultProps[J_a]),J_i=J_h[0],J_j=NaN,J_k=NaN,J_l=J_h[5],J_m=J_h[6],J_n=J_h[13],J_o=J_h[14],J_p=J_h[7],J_q=J_h[8],J_r=J_h[9],J_u=J_h[11],J_v=J_h[12];J_j=J_h[3],J_k=J_h[4],0!=J_j&&0!=J_k||(J_i=null),-1==J_j&&(J_j=0),-1==J_k&&(J_k=0),J_c.skin=J_i,J_c.width=J_j,J_c.height=J_k,J_i&&((J_e=this._getTextureByUrl(J_i))?(J_j||(J_j=J_e.sourceWidth),J_k||(J_k=J_e.sourceHeight)):console.warn("lost skin:",J_i,",you may load pics first")),J_c.alpha=J_h[10],J_f=J_c.transform,0!=J_n&&(J_l=J_n*J_j),0!=J_o&&(J_m=J_o*J_k),0==J_l&&0==J_m||J_f.translate(-J_l,-J_m);var J_w=null;if(J_r||1!==J_p||1!==J_q||J_u||J_v){(J_w=J_E._tempMt).identity(),J_w.bTransform=!0;var J_x=.0174532922222222*(J_r-J_u),J_y=.0174532922222222*(J_r+J_v),J_z=Math.cos(J_y),J_A=Math.sin(J_y),J_B=Math.sin(J_x),J_C=Math.cos(J_x);J_w.a=J_p*J_z,J_w.b=J_p*J_A,J_w.c=-J_q*J_B,J_w.d=J_q*J_C,J_w.tx=J_w.ty=0}return J_w&&(J_f=J_G.mul(J_f,J_w,J_f)),J_f.translate(J_h[1],J_h[2]),J_c},J_a._getTextureByUrl=function(J_a){return J_ha.getRes(J_a)},J_a.setAniData=function(J_a,J_b){if(J_a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=J_a,this._parseNodeList(J_a);var J_c,J_d={},J_e=[],J_f=J_a.animations,J_g=0,J_h=J_f.length;for(J_g=0;J_g<J_h;J_g++)if(J_c=J_f[J_g],this._labels=null,(!J_b||J_b==J_c.name)&&J_c){try{this._calGraphicData(J_c)}catch(J_a){console.warn("parse animation fail:"+J_c.name+",empty animation created"),this._gList=[]}var J_i={};J_i.interval=1e3/J_c.frameRate,J_i.frames=this._gList,J_i.labels=this._labels,J_i.name=J_c.name,J_e.push(J_i),J_d[J_c.name]=J_i}this.animationList=J_e,this.animationDic=J_d}J_E._temParam.length=0},J_a.parseByData=function(J_a){var J_b,J_c;J_b=J_a.nodeRoot,J_c=J_a.aniO,delete J_a.nodeRoot,delete J_a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=J_b,this._parseNodeList(J_b),this._labels=null;try{this._calGraphicData(J_c)}catch(J_a){console.warn("parse animation fail:"+J_c.name+",empty animation created"),this._gList=[]}var J_d=J_a;return J_d.interval=1e3/J_c.frameRate,J_d.frames=this._gList,J_d.labels=this._labels,J_d.name=J_c.name,J_d},J_a.setUpAniData=function(J_a){if(J_a.animations){var J_b,J_c={},J_d=[],J_e=J_a.animations,J_f=0,J_g=J_e.length;for(J_f=0;J_f<J_g;J_f++)if(J_b=J_e[J_f]){var J_h={};J_h.name=J_b.name,J_h.aniO=J_b,J_h.nodeRoot=J_a,J_d.push(J_h),J_c[J_b.name]=J_h}this.animationList=J_d,this.animationDic=J_c}},J_a._clear=function(){var J_a,J_b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(J_a in this._nodeGDic)(J_b=this._nodeGDic[J_a])&&J_b.recover();this._nodeGDic=null},J_E.parseAnimationByData=function(J_a){var J_b;return J_E._I||(J_E._I=new J_E),J_b=J_E._I.parseByData(J_a),J_E._I._clear(),J_b},J_E.parseAnimationData=function(J_a){var J_b;return J_E._I||(J_E._I=new J_E),J_E._I.setUpAniData(J_a),(J_b={}).animationList=J_E._I.animationList,J_b.animationDic=J_E._I.animationDic,J_E._I._clear(),J_b},J_E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],J_E._temParam=[],J_E._I=null,J_E._rootMatrix=null,J_i(J_E,["_tempMt",function(){return this._tempMt=new J_G}]),J_E.__init$=function(){J_D=function(){function J_a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return J_k(J_a,""),J_a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),J_W.recover("GraphicNode",this)},J_a.create=function(){return J_W.getItemByClass("GraphicNode",J_a)},J_a}()},J_E}(J_wa));J_z.__init([J_j,J_ia,J_J,J_O,J_Y,J_C,J_a,J_za])}(window,document,Laya),function(J_a,J_b,J_c){J_c.un,J_c.uns,J_c.static;var J_d=J_c.class;J_c.getset,J_c.__newvec;new(function(){function J_a(){}return J_d(J_a,"LayaMain"),J_a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}}),function(J_a,J_b,J_y){J_y.un,J_y.uns;var J_g=J_y.static,J_m=J_y.class,J_d=J_y.getset,J_f=J_y.__newvec,J_k=laya.maths.Arith,J_l=laya.maths.Bezier,J_c=laya.resource.Bitmap,J_n=laya.utils.Browser,J_i=laya.utils.Byte,J_o=laya.utils.Color,J_z=(laya.filters.ColorFilter,J_y.Config),J_e=laya.resource.Context,J_A=(laya.events.Event,laya.filters.Filter),J_h=laya.display.Graphics,J_j=laya.resource.HTMLCanvas,J_p=(laya.utils.HTMLChar,laya.resource.HTMLImage),J_q=laya.resource.HTMLSubImage,J_B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),J_C=laya.maths.Point,J_D=laya.maths.Rectangle,J_r=laya.renders.Render,J_u=(laya.renders.RenderContext,laya.renders.RenderSprite),J_v=laya.resource.Resource,J_w=laya.resource.ResourceManager,J_x=laya.utils.RunDriver,J_E=laya.display.Sprite,J_F=laya.display.Stage,J_G=laya.utils.Stat,J_H=laya.utils.StringKey,J_I=(laya.display.css.Style,laya.system.System),J_J=laya.display.Text,J_K=laya.resource.Texture,J_L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),J_M=laya.utils.VectorGraphManager;laya.utils.WordText;J_y.interface("laya.webgl.shapes.IShape"),J_y.interface("laya.webgl.submit.ISubmit"),J_y.interface("laya.webgl.text.ICharSegment"),J_y.interface("laya.webgl.canvas.save.ISaveData"),J_y.interface("laya.webgl.resource.IMergeAtlasBitmap"),J_y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var J_N=function(){function J_a(){}J_m(J_a,"laya.filters.webgl.FilterActionGL");var J_b=J_a.prototype;return J_y.imps(J_b,{"laya.filters.IFilterActionGL":!0}),J_b.setValue=function(J_a){},J_b.setValueMix=function(J_a){},J_b.apply3d=function(J_a,J_b,J_c,J_d,J_e){return null},J_b.apply=function(J_a){return null},J_d(0,J_b,"typeMix",function(){return 0}),J_a}(),J_O=function(){function J_a(){}return J_m(J_a,"laya.webgl.shader.ShaderValue"),J_a}(),J_P=function(){var J_d,J_e;function J_a(J_a,J_b,J_c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new J_e,void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),this._cells=null,this._rowInfo=null,this._init(J_a,J_b),this._atlasID=J_c}J_m(J_a,"laya.webgl.atlas.AtlasGrid");var J_b=J_a.prototype;return J_b.getAltasID=function(){return this._atlasID},J_b.setAltasID=function(J_a){0<=J_a&&(this._atlasID=J_a)},J_b.addTex=function(J_a,J_b,J_c){var J_d=this._get(J_b,J_c);return 0==J_d.ret||(this._fill(J_d.x,J_d.y,J_b,J_c,J_a),this._texCount++),J_d},J_b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},J_b._init=function(J_a,J_b){if(this._width=J_a,this._height=J_b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=J_f(this._height);for(var J_c=0;J_c<this._height;J_c++)this._rowInfo[J_c]=new J_d;return this._clear(),!0},J_b._get=function(J_a,J_b){var J_c=new J_R;if(J_a>=this._failSize.width&&J_b>=this._failSize.height)return J_c;for(var J_d=-1,J_e=-1,J_f=this._width,J_g=this._height,J_h=this._cells,J_i=0;J_i<J_g;J_i++)if(!(this._rowInfo[J_i].spaceCount<J_a))for(var J_j=0;J_j<J_f;){var J_k=3*(J_i*J_f+J_j);if(0!=J_h[J_k]||J_h[1+J_k]<J_a||J_h[2+J_k]<J_b)J_j+=J_h[1+J_k];else{J_d=J_j,J_e=J_i;for(var J_l=0;J_l<J_a;J_l++)if(J_h[3*J_l+J_k+2]<J_b){J_d=-1;break}if(!(J_d<0))return J_c.ret=!0,J_c.x=J_d,J_c.y=J_e,J_c;J_j+=J_h[1+J_k]}}return J_c},J_b._fill=function(J_a,J_b,J_c,J_d,J_e){var J_f=this._width,J_g=this._height;this._check(J_a+J_c<=J_f&&J_b+J_d<=J_g);for(var J_h=J_b;J_h<J_d+J_b;++J_h){this._check(this._rowInfo[J_h].spaceCount>=J_c),this._rowInfo[J_h].spaceCount-=J_c;for(var J_i=0;J_i<J_c;J_i++){var J_j=3*(J_a+J_h*J_f+J_i);this._check(0==this._cells[J_j]),this._cells[J_j]=J_e,this._cells[1+J_j]=J_c,this._cells[2+J_j]=J_d}}if(0<J_a)for(J_h=0;J_h<J_d;++J_h){var J_k=0;for(J_i=J_a-1;0<=J_i&&0==this._cells[3*((J_b+J_h)*J_f+J_i)];--J_i,++J_k);for(J_i=J_k;0<J_i;--J_i)this._cells[3*((J_b+J_h)*J_f+J_a-J_i)+1]=J_i,this._check(0<J_i)}if(0<J_b)for(J_i=J_a;J_i<J_a+J_c;++J_i){for(J_k=0,J_h=J_b-1;0<=J_h&&0==this._cells[3*(J_i+J_h*J_f)];--J_h,J_k++);for(J_h=J_k;0<J_h;--J_h)this._cells[3*(J_i+(J_b-J_h)*J_f)+2]=J_h,this._check(0<J_h)}},J_b._check=function(J_a){0==J_a&&console.log("xtexMerger 错误啦")},J_b._clear=function(){for(var J_a=this._texCount=0;J_a<this._height;J_a++)this._rowInfo[J_a].spaceCount=this._width;for(var J_b=0;J_b<this._height;J_b++)for(var J_c=0;J_c<this._width;J_c++){var J_d=3*(J_b*this._width+J_c);this._cells[J_d]=0,this._cells[1+J_d]=this._width-J_c,this._cells[2+J_d]=this._width-J_b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},J_a.__init$=function(){J_d=function(){function J_a(){this.spaceCount=0}return J_m(J_a,""),J_a}(),J_e=function(){function J_a(){this.width=0,this.height=0}return J_m(J_a,""),J_a}()},J_a}(),J_Q=function(){function J_r(J_a,J_b,J_c,J_d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=J_a,this._height=J_b,this._gridSize=J_c,this._maxAtlaserCount=J_d,this._gridNumX=J_a/J_c,this._gridNumY=J_b/J_c,this._curAtlasIndex=0,this._atlaserArray=[]}J_m(J_r,"laya.webgl.atlas.AtlasResourceManager");var J_a=J_r.prototype;return J_a.setAtlasParam=function(J_a,J_b,J_c,J_d){if(1==this._setAtlasParam)return J_r._sid_=0,this._width=J_a,this._height=J_b,this._gridSize=J_c,this._maxAtlaserCount=J_d,this._gridNumX=J_a/J_c,this._gridNumY=J_b/J_c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},J_a.pushData=function(J_a){var J_b,J_c=J_a.bitmap,J_d=-1,J_e=null,J_f=0,J_g=0;for(J_f=0,J_b=this._atlaserArray.length;J_f<J_b&&(J_g=(this._curAtlasIndex+J_f)%J_b,-1==(J_d=(J_e=this._atlaserArray[J_g]).findBitmapIsExist(J_c)));J_f++);if(-1!=J_d){var J_h=J_e.InAtlasWebGLImagesOffsetValue[J_d];return J_o=J_h[0],J_p=J_h[1],J_e.addToAtlas(J_a,J_o,J_p),!0}this._setAtlasParam=!1;for(var J_i=Math.ceil((J_a.bitmap.width+2)/this._gridSize),J_j=Math.ceil((J_a.bitmap.height+2)/this._gridSize),J_k=!1,J_l=0;J_l<2;J_l++){var J_m=this._maxAtlaserCount;for(J_f=0;J_f<J_m;J_f++){J_g=(this._curAtlasIndex+J_f)%J_m,this._atlaserArray.length-1>=J_g||this._atlaserArray.push(new J_Da(this._gridNumX,this._gridNumY,this._width,this._height,J_r._sid_++));var J_n=this._atlaserArray[J_g],J_o=0,J_p=0,J_q=J_n.addTex(1,J_i,J_j);if(J_q.ret){J_o=J_q.x*this._gridSize+1,J_p=J_q.y*this._gridSize+1,J_c.lock=!0,J_n.addToAtlasTexture(J_c,J_o,J_p),J_n.addToAtlas(J_a,J_o,J_p),J_k=!0,this._curAtlasIndex=J_g;break}}if(J_k)break;this._atlaserArray.push(new J_Da(this._gridNumX,this._gridNumY,this._width,this._height,J_r._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return J_k||console.log(">>>AtlasManager pushData error"),J_k},J_a.addToAtlas=function(J_a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(J_a)},J_a.garbageCollection=function(){if(!0===this._needGC){for(var J_a=this._atlaserArray.length-this._maxAtlaserCount,J_b=0;J_b<J_a;J_b++)this._atlaserArray[J_b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+J_a),this._atlaserArray.splice(0,J_a),this._needGC=!1}return!0},J_a.freeAll=function(){for(var J_a=0,J_b=this._atlaserArray.length;J_a<J_b;J_a++)this._atlaserArray[J_a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},J_a.getAtlaserCount=function(){return this._atlaserArray.length},J_a.getAtlaserByIndex=function(J_a){return this._atlaserArray[J_a]},J_d(1,J_r,"instance",function(){return J_r._Instance||(J_r._Instance=new J_r(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),J_r._Instance}),J_d(1,J_r,"enabled",function(){return J_z.atlasEnable}),J_d(1,J_r,"atlasLimitWidth",function(){return J_r._atlasLimitWidth},function(J_a){J_r._atlasLimitWidth=J_a}),J_d(1,J_r,"atlasLimitHeight",function(){return J_r._atlasLimitHeight},function(J_a){J_r._atlasLimitHeight=J_a}),J_r._enable=function(){J_z.atlasEnable=!0},J_r._disable=function(){J_z.atlasEnable=!1},J_r.__init__=function(){J_r.atlasTextureWidth=2048,J_r.atlasTextureHeight=2048,J_r.maxTextureCount=6,J_r.atlasLimitWidth=512,J_r.atlasLimitHeight=512},J_r._atlasLimitWidth=0,J_r._atlasLimitHeight=0,J_r.gridSize=16,J_r.atlasTextureWidth=0,J_r.atlasTextureHeight=0,J_r.maxTextureCount=0,J_r._atlasRestore=0,J_r.BOARDER_TYPE_NO=0,J_r.BOARDER_TYPE_RIGHT=1,J_r.BOARDER_TYPE_LEFT=2,J_r.BOARDER_TYPE_BOTTOM=4,J_r.BOARDER_TYPE_TOP=8,J_r.BOARDER_TYPE_ALL=15,J_r._sid_=0,J_r._Instance=null,J_r}(),J_R=function(){function J_a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return J_m(J_a,"laya.webgl.atlas.MergeFillInfo"),J_a}(),J_S=function(){function J_b(){}return J_m(J_b,"laya.webgl.canvas.BlendMode"),J_b._init_=function(J_a){J_b.fns=[J_b.BlendNormal,J_b.BlendAdd,J_b.BlendMultiply,J_b.BlendScreen,J_b.BlendOverlay,J_b.BlendLight,J_b.BlendMask,J_b.BlendDestinationOut],J_b.targetFns=[J_b.BlendNormalTarget,J_b.BlendAddTarget,J_b.BlendMultiplyTarget,J_b.BlendScreenTarget,J_b.BlendOverlayTarget,J_b.BlendLightTarget,J_b.BlendMask,J_b.BlendDestinationOut]},J_b.BlendNormal=function(J_a){J_a.blendFunc(1,771)},J_b.BlendAdd=function(J_a){J_a.blendFunc(1,772)},J_b.BlendMultiply=function(J_a){J_a.blendFunc(774,771)},J_b.BlendScreen=function(J_a){J_a.blendFunc(1,1)},J_b.BlendOverlay=function(J_a){J_a.blendFunc(1,769)},J_b.BlendLight=function(J_a){J_a.blendFunc(1,1)},J_b.BlendNormalTarget=function(J_a){J_a.blendFunc(1,771)},J_b.BlendAddTarget=function(J_a){J_a.blendFunc(1,772)},J_b.BlendMultiplyTarget=function(J_a){J_a.blendFunc(774,771)},J_b.BlendScreenTarget=function(J_a){J_a.blendFunc(1,1)},J_b.BlendOverlayTarget=function(J_a){J_a.blendFunc(1,769)},J_b.BlendLightTarget=function(J_a){J_a.blendFunc(1,1)},J_b.BlendMask=function(J_a){J_a.blendFunc(0,770)},J_b.BlendDestinationOut=function(J_a){J_a.blendFunc(0,0)},J_b.activeBlendFunction=null,J_b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],J_b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},J_b.NORMAL="normal",J_b.ADD="add",J_b.MULTIPLY="multiply",J_b.SCREEN="screen",J_b.LIGHT="light",J_b.OVERLAY="overlay",J_b.DESTINATIONOUT="destination-out",J_b.fns=[],J_b.targetFns=[],J_b}(),J_T=function(){function J_c(J_a){this._color=J_o.create("black"),this.setValue(J_a)}J_m(J_c,"laya.webgl.canvas.DrawStyle");var J_a=J_c.prototype;return J_a.setValue=function(J_a){if(J_a){if("string"==typeof J_a)return void(this._color=J_o.create(J_a));if(J_a instanceof laya.utils.Color)return void(this._color=J_a)}},J_a.reset=function(){this._color=J_o.create("black")},J_a.equal=function(J_a){return"string"==typeof J_a?this._color.strColor===J_a:J_a instanceof laya.utils.Color&&this._color.numColor===J_a.numColor},J_a.toColorStr=function(){return this._color.strColor},J_c.create=function(J_a){var J_b;if(J_a&&("string"==typeof J_a?J_b=J_o.create(J_a):J_a instanceof laya.utils.Color&&(J_b=J_a),J_b))return J_b._drawStyle||(J_b._drawStyle=new J_c(J_a));return laya.webgl.canvas.DrawStyle.DEFAULT},J_g(J_c,["DEFAULT",function(){return this.DEFAULT=new J_c("#000000")}]),J_c}(),J_U=function(){function J_a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];J_wa.mainContext;this.ib=J_sa.create(35048),this.vb=J_ta.create(5)}J_m(J_a,"laya.webgl.canvas.Path");var J_b=J_a.prototype;return J_b.addPoint=function(J_a,J_b){this.tempArray.push(J_a,J_b)},J_b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},J_b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},J_b.polygon=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g;return this.geomatrys.push(this._curGeomatry=J_g=new J_Ha(J_a,J_b,J_c,J_d,J_e,J_f)),J_d||(J_g.fill=!1),null==J_f&&(J_g.borderWidth=0),J_g},J_b.setGeomtry=function(J_a){this.geomatrys.push(this._curGeomatry=J_a)},J_b.drawLine=function(J_a,J_b,J_c,J_d,J_e){var J_f;return this.closePath?this.geomatrys.push(this._curGeomatry=J_f=new J_Ga(J_a,J_b,J_c,J_d,J_e)):this.geomatrys.push(this._curGeomatry=J_f=new J_Fa(J_a,J_b,J_c,J_d,J_e)),J_f.fill=!1,J_f},J_b.update=function(){var J_a=this.ib._byteLength,J_b=this.geomatrys.length;this.offset=J_a;for(var J_c=this.geoStart;J_c<J_b;J_c++)this.geomatrys[J_c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=J_b,this.count=(this.ib._byteLength-J_a)/J_pa.BYTES_PIDX},J_b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},J_b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},J_a}(),J_V=function(){function J_h(){}J_m(J_h,"laya.webgl.canvas.save.SaveBase");var J_a=J_h.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!1},J_a.restore=function(J_a){this._dataObj[this._valueName]=this._value,(J_h._cache[J_h._cache._length++]=this)._newSubmit&&(J_a._curSubmit=J_fa.RENDERBASE,J_a._renderKey=0)},J_h._createArray=function(){var J_a=[];return J_a._length=0,J_a},J_h._init=function(){var J_a=J_h._namemap={};return J_a[1]="ALPHA",J_a[2]="fillStyle",J_a[8]="font",J_a[256]="lineWidth",J_a[512]="strokeStyle",J_a[8192]="_mergeID",J_a[1024]=J_a[2048]=J_a[4096]=[],J_a[16384]="textBaseline",J_a[32768]="textAlign",J_a[65536]="_nBlendType",J_a[1048576]="shader",J_a[2097152]="filters",J_a},J_h.save=function(J_a,J_b,J_c,J_d){if((J_a._saveMark._saveuse&J_b)!==J_b){J_a._saveMark._saveuse|=J_b;var J_e=J_h._cache,J_f=0<J_e._length?J_e[--J_e._length]:new J_h;J_f._value=J_c[J_f._valueName=J_h._namemap[J_b]],J_f._dataObj=J_c,J_f._newSubmit=J_d;var J_g=J_a._save;J_g[J_g._length++]=J_f}},J_h._cache=laya.webgl.canvas.save.SaveBase._createArray(),J_h._namemap=J_h._init(),J_h}(),J_W=function(){function J_f(){this._clipRect=new J_D}J_m(J_f,"laya.webgl.canvas.save.SaveClipRect");var J_a=J_f.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!1},J_a.restore=function(J_a){J_a._clipRect=this._clipSaveRect,(J_f._cache[J_f._cache._length++]=this)._submitScissor.submitLength=J_a._submits._length-this._submitScissor.submitIndex,J_a._curSubmit=J_fa.RENDERBASE,J_a._renderKey=0},J_f.save=function(J_a,J_b){if(131072!=(131072&J_a._saveMark._saveuse)){J_a._saveMark._saveuse|=131072;var J_c=J_f._cache,J_d=0<J_c._length?J_c[--J_c._length]:new J_f;J_d._clipSaveRect=J_a._clipRect,J_a._clipRect=J_d._clipRect.copyFrom(J_a._clipRect),J_d._submitScissor=J_b;var J_e=J_a._save;J_e[J_e._length++]=J_d}},J_g(J_f,["_cache",function(){return this._cache=J_V._createArray()}]),J_f}(),J_X=function(){function J_n(){this._contextX=0,this._contextY=0,this._clipRect=new J_D,this._rect=new J_D,this._matrix=new J_B}J_m(J_n,"laya.webgl.canvas.save.SaveClipRectStencil");var J_a=J_n.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!1},J_a.restore=function(J_a){J_ka.restore(J_a,this._rect,this._saveMatrix,this._contextX,this._contextY),J_a._clipRect=this._clipSaveRect,J_a._curMat=this._saveMatrix,J_a._x=this._contextX,J_a._y=this._contextY,J_n._cache[J_n._cache._length++]=this,J_a._curSubmit=J_fa.RENDERBASE},J_n.save=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){if(262144!=(262144&J_a._saveMark._saveuse)){J_a._saveMark._saveuse|=262144;var J_k=J_n._cache,J_l=0<J_k._length?J_k[--J_k._length]:new J_n;J_l._clipSaveRect=J_a._clipRect,J_l._clipRect.setTo(J_g,J_h,J_i,J_j),J_a._clipRect=J_l._clipRect,J_l._rect.x=J_c,J_l._rect.y=J_d,J_l._rect.width=J_e,J_l._rect.height=J_f,J_l._contextX=J_a._x,J_l._contextY=J_a._y,J_l._saveMatrix=J_a._curMat,J_a._curMat.copyTo(J_l._matrix),J_a._curMat=J_l._matrix,J_l._submitStencil=J_b;var J_m=J_a._save;J_m[J_m._length++]=J_l}},J_g(J_n,["_cache",function(){return this._cache=J_V._createArray()}]),J_n}(),J_Y=function(){function J_d(){this._saveuse=0}J_m(J_d,"laya.webgl.canvas.save.SaveMark");var J_a=J_d.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!0},J_a.restore=function(J_a){J_a._saveMark=this._preSaveMark,J_d._no[J_d._no._length++]=this},J_d.Create=function(J_a){var J_b=J_d._no,J_c=0<J_b._length?J_b[--J_b._length]:new J_d;return J_c._saveuse=0,J_c._preSaveMark=J_a._saveMark,J_a._saveMark=J_c},J_g(J_d,["_no",function(){return this._no=J_V._createArray()}]),J_d}(),J_Z=function(){function J_f(){this._matrix=new J_B}J_m(J_f,"laya.webgl.canvas.save.SaveTransform");var J_a=J_f.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!1},J_a.restore=function(J_a){J_a._curMat=this._savematrix,J_f._no[J_f._no._length++]=this},J_f.save=function(J_a){var J_b=J_a._saveMark;if(2048!=(2048&J_b._saveuse)){J_b._saveuse|=2048;var J_c=J_f._no,J_d=0<J_c._length?J_c[--J_c._length]:new J_f;J_d._savematrix=J_a._curMat,J_a._curMat=J_a._curMat.copyTo(J_d._matrix);var J_e=J_a._save;J_e[J_e._length++]=J_d}},J_g(J_f,["_no",function(){return this._no=J_V._createArray()}]),J_f}(),J_$=function(){function J_e(){}J_m(J_e,"laya.webgl.canvas.save.SaveTranslate");var J_a=J_e.prototype;return J_y.imps(J_a,{"laya.webgl.canvas.save.ISaveData":!0}),J_a.isSaveMark=function(){return!1},J_a.restore=function(J_a){J_a._curMat;J_a._x=this._x,J_a._y=this._y,J_e._no[J_e._no._length++]=this},J_e.save=function(J_a){var J_b=J_e._no,J_c=0<J_b._length?J_b[--J_b._length]:new J_e;J_c._x=J_a._x,J_c._y=J_a._y;var J_d=J_a._save;J_d[J_d._length++]=J_c},J_g(J_e,["_no",function(){return this._no=J_V._createArray()}]),J_e}(),J__=function(){function J_a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new J_D}J_m(J_a,"laya.webgl.resource.RenderTargetMAX");var J_b=J_a.prototype;return J_b.setSP=function(J_a){this._sp=J_a},J_b.size=function(J_a,J_b){var J_c=this;this._width!==J_a||this._height!==J_b?(this.repaint=!0,this._width=J_a,this._height=J_b,this.target?this.target.size(J_a,J_b):this.target=J_Ma.create(J_a,J_b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(J_a){J_y.timer.callLater(J_c._sp,J_c._sp.repaint)})):this.target.size(J_a,J_b)},J_b._flushToTarget=function(J_a,J_b){if(!J_b._destroy){var J_c=J_ua.worldScissorTest,J_d=J_ua.worldClipRect;J_ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,J_ua.worldScissorTest=!1,J_wa.mainContext.disable(3089);var J_e=J_ua.worldAlpha,J_f=J_ua.worldMatrix4,J_g=J_ua.worldMatrix,J_h=J_ua.worldFilters,J_i=J_ua.worldShaderDefines;if(J_ua.worldMatrix=J_B.EMPTY,J_ua.restoreTempArray(),J_ua.worldMatrix4=J_ua.TEMPMAT4_ARRAY,J_ua.worldAlpha=1,J_ua.worldFilters=null,J_ua.worldShaderDefines=null,J_La.activeShader=null,J_b.start(),J_z.showCanvasMark?J_b.clear(0,1,0,.3):J_b.clear(0,0,0,0),J_a.flush(),J_b.end(),J_La.activeShader=null,J_ua.worldAlpha=J_e,J_ua.worldMatrix4=J_f,J_ua.worldMatrix=J_g,J_ua.worldFilters=J_h,J_ua.worldShaderDefines=J_i,J_ua.worldScissorTest=J_c){var J_j=J_ua.height-J_d.y-J_d.height;J_wa.mainContext.scissor(J_d.x,J_j,J_d.width,J_d.height),J_wa.mainContext.enable(3089)}J_ua.worldClipRect=J_d}},J_b.flush=function(J_a){this.repaint&&(this._flushToTarget(J_a,this.target),this.repaint=!1)},J_b.drawTo=function(J_a,J_b,J_c,J_d,J_e){J_a.drawTexture(this.target.getTexture(),J_b,J_c,J_d,J_e,0,0)},J_b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},J_a}(),J_s=function(){function J_a(){this.ALPHA=1,this.shaderType=0,this.defines=new J_Ea}return J_m(J_a,"laya.webgl.shader.d2.Shader2D"),J_a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},J_a.__init__=function(){var J_a,J_b;J_Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),J_Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),J_Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),J_Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),J_Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),J_Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),J_Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),J_Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),J_a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",J_b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',J_Ya.preCompile2D(0,1,J_a,J_b,null),J_a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",J_b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',J_Ya.preCompile2D(0,2,J_a,J_b,null),J_a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",J_b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",J_Ya.preCompile2D(0,4,J_a,J_b,null),J_a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",J_b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',J_Ya.preCompile2D(0,256,J_a,J_b,null),J_a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",J_b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",J_Ya.preCompile2D(0,512,J_a,J_b,null)},J_a}(),J_t=function(){function J_b(J_a,J_b,J_c){this._value=0,this._name2int=J_a,this._int2name=J_b,this._int2nameMap=J_c}J_m(J_b,"laya.webgl.shader.ShaderDefines");var J_a=J_b.prototype;return J_a.add=function(J_a){return"string"==typeof J_a&&(J_a=this._name2int[J_a]),this._value|=J_a,this._value},J_a.addInt=function(J_a){return this._value|=J_a,this._value},J_a.remove=function(J_a){return"string"==typeof J_a&&(J_a=this._name2int[J_a]),this._value&=~J_a,this._value},J_a.isDefine=function(J_a){return(this._value&J_a)===J_a},J_a.getValue=function(){return this._value},J_a.setValue=function(J_a){this._value=J_a},J_a.toNameDic=function(){var J_a=this._int2nameMap[this._value];return J_a||J_b._toText(this._value,this._int2name,this._int2nameMap)},J_b._reg=function(J_a,J_b,J_c,J_d){J_d[J_c[J_a]=J_b]=J_a},J_b._toText=function(J_a,J_b,J_c){var J_d=J_c[J_a];if(J_d)return J_d;for(var J_e={},J_f=1,J_g=0;J_g<32&&!(J_a<(J_f=1<<J_g));J_g++)if(J_a&J_f){var J_h=J_b[J_f];J_h&&(J_e[J_h]="")}return J_c[J_a]=J_e},J_b._toInt=function(J_a,J_b){for(var J_c=J_a.split("."),J_d=0,J_e=0,J_f=J_c.length;J_e<J_f;J_e++){var J_g=J_b[J_c[J_e]];if(!J_g)throw new Error("Defines to int err:"+J_a+"/"+J_c[J_e]);J_d|=J_g}return J_d},J_b}(),J_aa=function(){function J_g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new J_B}J_m(J_g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var J_a=J_g.prototype;return J_a.init=function(J_a,J_b,J_c){if(J_b)this._vs=J_b;else{this._vs=[];var J_d=J_a.width,J_e=J_a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(J_d,0,1,0,1,1,1,1),this._vs.push(J_d,J_e,1,1,1,1,1,1),this._vs.push(0,J_e,0,1,1,1,1,1)}J_c?this._ps=J_c:(J_g._defaultPS||(J_g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=J_g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=J_a},J_a.init2=function(J_a,J_b,J_c,J_d,J_e){this.transform&&(this.transform=null),J_c?this._ps=J_c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=J_d,this._uvs=J_e,this.mEleNum=this._ps.length,this.mTexture=J_a,(J_r.isConchNode||J_r.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},J_a._initMyData=function(){var J_a=0,J_b=0,J_c=4*this._verticles.length;this._vs=J_g._tempVS;var J_d=!1;if(J_r.isConchNode||J_r.isConchApp?(this._vs.length=J_c,J_d=!0):this._vs.length<J_c&&(this._vs.length=J_c,J_d=!0),J_g._tVSLen=J_c,J_d)for(;J_a<J_c;)this._vs[J_a]=this._verticles[J_b],this._vs[J_a+1]=this._verticles[J_b+1],this._vs[J_a+2]=this._uvs[J_b],this._vs[J_a+3]=this._uvs[J_b+1],this._vs[J_a+4]=1,this._vs[J_a+5]=1,this._vs[J_a+6]=1,this._vs[J_a+7]=1,J_a+=8,J_b+=2;else for(;J_a<J_c;)this._vs[J_a]=this._verticles[J_b],this._vs[J_a+1]=this._verticles[J_b+1],this._vs[J_a+2]=this._uvs[J_b],this._vs[J_a+3]=this._uvs[J_b+1],J_a+=8,J_b+=2},J_a.getData2=function(J_a,J_b,J_c){var J_d;this.mVBBuffer=J_a,this.mIBBuffer=J_b,this._initMyData(),J_a.appendEx2(this._vs,Float32Array,J_g._tVSLen,4),this._indexStart=J_b._byteLength,(J_d=J_g._tempIB).length<this._ps.length&&(J_d.length=this._ps.length);for(var J_e=0,J_f=this._ps.length;J_e<J_f;J_e++)J_d[J_e]=this._ps[J_e]+J_c;J_b.appendEx2(J_d,Uint16Array,this._ps.length,2)},J_a.getData=function(J_a,J_b,J_c){if(this.mVBBuffer=J_a,this.mIBBuffer=J_b,J_a.append(this.mVBData),this._indexStart=J_b._byteLength,this.mIBData.start!=J_c){for(var J_d=0,J_e=this._ps.length;J_d<J_e;J_d++)this.mIBData[J_d]=this._ps[J_d]+J_c;this.mIBData.start=J_c}J_b.append(this.mIBData)},J_a.render=function(J_a,J_b,J_c){if(J_r.isWebGL&&this.mTexture){J_a._renderKey=0,J_a._shader2D.glTexture=null,J_ba.getInstance().addSkinMesh(this);var J_d=J_fa.createShape(J_a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,J_Aa.create(512,0));this.transform||(this.transform=J_B.EMPTY),this.transform.translate(J_b,J_c),J_B.mul(this.transform,J_a._curMat,this._tempMatrix),this.transform.translate(-J_b,-J_c);var J_e=J_d.shaderValue,J_f=J_e.u_mmat2||J_ua.getMatrArray();J_ua.mat2MatArray(this._tempMatrix,J_f),J_e.textureHost=this.mTexture,J_e.offsetX=0,J_e.offsetY=0,J_e.u_mmat2=J_f,J_e.ALPHA=J_a._shader2D.ALPHA,J_a._submits[J_a._submits._length++]=J_d}else J_r.isConchApp&&this.mTexture&&(this.transform||(this.transform=J_B.EMPTY),J_a.setSkinMesh&&J_a.setSkinMesh(J_b,J_c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},J_g._tempVS=[],J_g._tempIB=[],J_g._defaultPS=null,J_g._tVSLen=0,J_g}(),J_ba=function(){function J_a(){this.ib=null,this.vb=null;J_wa.mainContext;this.ib=J_sa.create(35048),this.vb=J_ta.create(8)}J_m(J_a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var J_b=J_a.prototype;return J_b.addSkinMesh=function(J_a){J_a.getData2(this.vb,this.ib,this.vb._byteLength/32)},J_b.reset=function(){this.vb.clear(),this.ib.clear()},J_a.getInstance=function(){return J_a.instance=J_a.instance||new J_a},J_a.instance=null,J_a}(),J_ca=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===J_i&&(J_i=0),this.x=J_a,this.y=J_b,this.width=J_c,this.height=J_d,this.edges=J_e,this.color=J_f,this.borderWidth=J_g,this.borderColor=J_h}J_m(J_a,"laya.webgl.shapes.BasePoly");var J_b=J_a.prototype;return J_y.imps(J_b,{"laya.webgl.shapes.IShape":!0}),J_b.getData=function(J_a,J_b,J_c){},J_b.rebuild=function(J_a){},J_b.setMatrix=function(J_a){},J_b.needUpdate=function(J_a){return!0},J_b.sector=function(J_a,J_b,J_c){var J_d=this.x,J_e=this.y,J_f=this.edges,J_g=(this.r1-this.r0)/J_f,J_h=this.width,J_i=this.height,J_j=this.color,J_k=(J_j>>16&255)/255,J_l=(J_j>>8&255)/255,J_m=(255&J_j)/255;J_a.push(J_d,J_e,J_k,J_l,J_m);for(var J_n=0;J_n<J_f+1;J_n++)J_a.push(J_d+Math.sin(J_g*J_n+this.r0)*J_h,J_e+Math.cos(J_g*J_n+this.r0)*J_i),J_a.push(J_k,J_l,J_m);for(J_n=0;J_n<J_f;J_n++)J_b.push(J_c,J_c+J_n+1,J_c+J_n+2)},J_b.createLine2=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h,J_i,J_j,J_k,J_l,J_m,J_n,J_o,J_p,J_q,J_r,J_u,J_v,J_w,J_x,J_y,J_z,J_A,J_B,J_C=J_a.concat(),J_D=J_e,J_E=this.borderColor,J_F=(J_E>>16&255)/255,J_G=(J_E>>8&255)/255,J_H=(255&J_E)/255,J_I=J_C.length/2,J_J=J_d,J_K=J_c/2;J_i=J_C[0],J_j=J_C[1],J_p=J_i-(J_k=J_C[2]),J_o=(J_o=-(J_j-(J_l=J_C[3])))/(J_B=Math.sqrt(J_o*J_o+J_p*J_p))*J_K,J_p=J_p/J_B*J_K,J_D.push(J_i-J_o+this.x,J_j-J_p+this.y,J_F,J_G,J_H,J_i+J_o+this.x,J_j+J_p+this.y,J_F,J_G,J_H);for(var J_L=1;J_L<J_I-1;J_L++)J_i=J_C[2*(J_L-1)],J_j=J_C[2*(J_L-1)+1],J_k=J_C[2*J_L],J_l=J_C[2*J_L+1],J_m=J_C[2*(J_L+1)],J_n=J_C[2*(J_L+1)+1],J_p=J_i-J_k,J_r=J_k-J_m,J_w=(-(J_o=(J_o=-(J_j-J_l))/(J_B=Math.sqrt(J_o*J_o+J_p*J_p))*J_K)+J_i)*(-(J_p=J_p/J_B*J_K)+J_l)-(-J_o+J_k)*(-J_p+J_j),J_z=(-(J_q=(J_q=-(J_l-J_n))/(J_B=Math.sqrt(J_q*J_q+J_r*J_r))*J_K)+J_m)*(-(J_r=J_r/J_B*J_K)+J_l)-(-J_q+J_k)*(-J_r+J_n),J_A=(J_u=-J_p+J_j-(-J_p+J_l))*(J_y=-J_q+J_k-(-J_q+J_m))-(J_x=-J_r+J_n-(-J_r+J_l))*(J_v=-J_o+J_k-(-J_o+J_i)),Math.abs(J_A)<.1?(J_A+=10.1,J_D.push(J_k-J_o+this.x,J_l-J_p+this.y,J_F,J_G,J_H,J_k+J_o+this.x,J_l+J_p+this.y,J_F,J_G,J_H)):(((J_g=(J_v*J_z-J_y*J_w)/J_A)-J_k)*(J_g-J_k)+((J_h=(J_x*J_w-J_u*J_z)/J_A)-J_l)+(J_h-J_l),J_D.push(J_g+this.x,J_h+this.y,J_F,J_G,J_H,J_k-(J_g-J_k)+this.x,J_l-(J_h-J_l)+this.y,J_F,J_G,J_H));J_i=J_C[J_C.length-4],J_j=J_C[J_C.length-3],J_p=J_i-(J_k=J_C[J_C.length-2]),J_o=(J_o=-(J_j-(J_l=J_C[J_C.length-1])))/(J_B=Math.sqrt(J_o*J_o+J_p*J_p))*J_K,J_p=J_p/J_B*J_K,J_D.push(J_k-J_o+this.x,J_l-J_p+this.y,J_F,J_G,J_H,J_k+J_o+this.x,J_l+J_p+this.y,J_F,J_G,J_H);var J_M=J_f;for(J_L=1;J_L<J_M;J_L++)J_b.push(J_J+2*(J_L-1),J_J+2*(J_L-1)+1,J_J+2*J_L+1,J_J+2*J_L+1,J_J+2*J_L,J_J+2*(J_L-1));return J_D},J_b.createLine=function(J_a,J_b,J_c,J_d){var J_e=J_a.concat(),J_f=J_a,J_g=this.borderColor,J_h=(J_g>>16&255)/255,J_i=(J_g>>8&255)/255,J_j=(255&J_g)/255;J_e.splice(0,5);var J_k,J_l,J_m,J_n,J_o,J_p,J_q,J_r,J_u,J_v,J_w,J_x,J_y,J_z,J_A,J_B,J_C,J_D,J_E,J_F,J_G=J_e.length/5,J_H=J_d,J_I=J_c/2;J_m=J_e[0],J_n=J_e[1],J_v=J_m-(J_o=J_e[5]),J_u=(J_u=-(J_n-(J_p=J_e[6])))/(J_F=Math.sqrt(J_u*J_u+J_v*J_v))*J_I,J_v=J_v/J_F*J_I,J_f.push(J_m-J_u,J_n-J_v,J_h,J_i,J_j,J_m+J_u,J_n+J_v,J_h,J_i,J_j);for(var J_J=1;J_J<J_G-1;J_J++)J_m=J_e[5*(J_J-1)],J_n=J_e[5*(J_J-1)+1],J_o=J_e[5*J_J],J_p=J_e[5*J_J+1],J_q=J_e[5*(J_J+1)],J_r=J_e[5*(J_J+1)+1],J_v=J_m-J_o,J_x=J_o-J_q,J_A=(-(J_u=(J_u=-(J_n-J_p))/(J_F=Math.sqrt(J_u*J_u+J_v*J_v))*J_I)+J_m)*(-(J_v=J_v/J_F*J_I)+J_p)-(-J_u+J_o)*(-J_v+J_n),J_D=(-(J_w=(J_w=-(J_p-J_r))/(J_F=Math.sqrt(J_w*J_w+J_x*J_x))*J_I)+J_q)*(-(J_x=J_x/J_F*J_I)+J_p)-(-J_w+J_o)*(-J_x+J_r),J_E=(J_y=-J_v+J_n-(-J_v+J_p))*(J_C=-J_w+J_o-(-J_w+J_q))-(J_B=-J_x+J_r-(-J_x+J_p))*(J_z=-J_u+J_o-(-J_u+J_m)),Math.abs(J_E)<.1?(J_E+=10.1,J_f.push(J_o-J_u,J_p-J_v,J_h,J_i,J_j,J_o+J_u,J_p+J_v,J_h,J_i,J_j)):(((J_k=(J_z*J_D-J_C*J_A)/J_E)-J_o)*(J_k-J_o)+((J_l=(J_B*J_A-J_y*J_D)/J_E)-J_p)+(J_l-J_p),J_f.push(J_k,J_l,J_h,J_i,J_j,J_o-(J_k-J_o),J_p-(J_l-J_p),J_h,J_i,J_j));J_m=J_e[J_e.length-10],J_n=J_e[J_e.length-9],J_v=J_m-(J_o=J_e[J_e.length-5]),J_u=(J_u=-(J_n-(J_p=J_e[J_e.length-4])))/(J_F=Math.sqrt(J_u*J_u+J_v*J_v))*J_I,J_v=J_v/J_F*J_I,J_f.push(J_o-J_u,J_p-J_v,J_h,J_i,J_j,J_o+J_u,J_p+J_v,J_h,J_i,J_j);var J_K=this.edges+1;for(J_J=1;J_J<J_K;J_J++)J_b.push(J_H+2*(J_J-1),J_H+2*(J_J-1)+1,J_H+2*J_J+1,J_H+2*J_J+1,J_H+2*J_J,J_H+2*(J_J-1));return J_f},J_b.createLoopLine=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_a.concat(),J_h=J_e||J_a,J_i=this.borderColor,J_j=(J_i>>16&255)/255,J_k=(J_i>>8&255)/255,J_l=(255&J_i)/255;J_g.splice(0,5);var J_m=[J_g[0],J_g[1]],J_n=[J_g[J_g.length-5],J_g[J_g.length-4]],J_o=J_n[0]+.5*(J_m[0]-J_n[0]),J_p=J_n[1]+.5*(J_m[1]-J_n[1]);J_g.unshift(J_o,J_p,0,0,0),J_g.push(J_o,J_p,0,0,0);var J_q,J_r,J_u,J_v,J_w,J_x,J_y,J_z,J_A,J_B,J_C,J_D,J_E,J_F,J_G,J_H,J_I,J_J,J_K,J_L,J_M=J_g.length/5,J_N=J_d,J_O=J_c/2;J_u=J_g[0],J_v=J_g[1],J_B=J_u-(J_w=J_g[5]),J_A=(J_A=-(J_v-(J_x=J_g[6])))/(J_L=Math.sqrt(J_A*J_A+J_B*J_B))*J_O,J_B=J_B/J_L*J_O,J_h.push(J_u-J_A,J_v-J_B,J_j,J_k,J_l,J_u+J_A,J_v+J_B,J_j,J_k,J_l);for(var J_P=1;J_P<J_M-1;J_P++)J_u=J_g[5*(J_P-1)],J_v=J_g[5*(J_P-1)+1],J_w=J_g[5*J_P],J_x=J_g[5*J_P+1],J_y=J_g[5*(J_P+1)],J_z=J_g[5*(J_P+1)+1],J_B=J_u-J_w,J_D=J_w-J_y,J_G=(-(J_A=(J_A=-(J_v-J_x))/(J_L=Math.sqrt(J_A*J_A+J_B*J_B))*J_O)+J_u)*(-(J_B=J_B/J_L*J_O)+J_x)-(-J_A+J_w)*(-J_B+J_v),J_J=(-(J_C=(J_C=-(J_x-J_z))/(J_L=Math.sqrt(J_C*J_C+J_D*J_D))*J_O)+J_y)*(-(J_D=J_D/J_L*J_O)+J_x)-(-J_C+J_w)*(-J_D+J_z),J_K=(J_E=-J_B+J_v-(-J_B+J_x))*(J_I=-J_C+J_w-(-J_C+J_y))-(J_H=-J_D+J_z-(-J_D+J_x))*(J_F=-J_A+J_w-(-J_A+J_u)),Math.abs(J_K)<.1?(J_K+=10.1,J_h.push(J_w-J_A,J_x-J_B,J_j,J_k,J_l,J_w+J_A,J_x+J_B,J_j,J_k,J_l)):(((J_q=(J_F*J_J-J_I*J_G)/J_K)-J_w)*(J_q-J_w)+((J_r=(J_H*J_G-J_E*J_J)/J_K)-J_x)+(J_r-J_x),J_h.push(J_q,J_r,J_j,J_k,J_l,J_w-(J_q-J_w),J_x-(J_r-J_x),J_j,J_k,J_l));J_f&&(J_b=J_f);var J_Q=this.edges+1;for(J_P=1;J_P<J_Q;J_P++)J_b.push(J_N+2*(J_P-1),J_N+2*(J_P-1)+1,J_N+2*J_P+1,J_N+2*J_P+1,J_N+2*J_P,J_N+2*(J_P-1));return J_b.push(J_N+2*(J_P-1),J_N+2*(J_P-1)+1,J_N+1,J_N+1,J_N,J_N+2*(J_P-1)),J_h},J_a}(),J_da=function(){function J_p(){}return J_m(J_p,"laya.webgl.shapes.Earcut"),J_p.earcut=function(J_a,J_b,J_c){J_c=J_c||2;var J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k=J_b&&J_b.length,J_l=J_k?J_b[0]*J_c:J_a.length,J_m=J_p.linkedList(J_a,0,J_l,J_c,!0),J_n=[];if(!J_m)return J_n;if(J_k&&(J_m=J_p.eliminateHoles(J_a,J_b,J_m,J_c)),J_a.length>80*J_c){J_d=J_f=J_a[0],J_e=J_g=J_a[1];for(var J_o=J_c;J_o<J_l;J_o+=J_c)(J_h=J_a[J_o])<J_d&&(J_d=J_h),(J_i=J_a[J_o+1])<J_e&&(J_e=J_i),J_f<J_h&&(J_f=J_h),J_g<J_i&&(J_g=J_i);J_j=0!==(J_j=Math.max(J_f-J_d,J_g-J_e))?1/J_j:0}return J_p.earcutLinked(J_m,J_n,J_c,J_d,J_e,J_j),J_n},J_p.linkedList=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g;if(J_e===0<J_p.signedArea(J_a,J_b,J_c,J_d))for(J_f=J_b;J_f<J_c;J_f+=J_d)J_g=J_p.insertNode(J_f,J_a[J_f],J_a[J_f+1],J_g);else for(J_f=J_c-J_d;J_b<=J_f;J_f-=J_d)J_g=J_p.insertNode(J_f,J_a[J_f],J_a[J_f+1],J_g);return J_g&&J_p.equals(J_g,J_g.next)&&(J_p.removeNode(J_g),J_g=J_g.next),J_g},J_p.filterPoints=function(J_a,J_b){if(!J_a)return J_a;J_b||(J_b=J_a);var J_c,J_d=J_a;do{if(J_c=!1,J_d.steiner||!J_p.equals(J_d,J_d.next)&&0!==J_p.area(J_d.prev,J_d,J_d.next))J_d=J_d.next;else{if(J_p.removeNode(J_d),(J_d=J_b=J_d.prev)===J_d.next)break;J_c=!0}}while(J_c||J_d!==J_b);return J_b},J_p.earcutLinked=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(J_a){!J_g&&J_f&&J_p.indexCurve(J_a,J_d,J_e,J_f);for(var J_h,J_i,J_j=J_a;J_a.prev!==J_a.next;)if(J_h=J_a.prev,J_i=J_a.next,J_f?J_p.isEarHashed(J_a,J_d,J_e,J_f):J_p.isEar(J_a))J_b.push(J_h.i/J_c),J_b.push(J_a.i/J_c),J_b.push(J_i.i/J_c),J_p.removeNode(J_a),J_a=J_i.next,J_j=J_i.next;else if((J_a=J_i)===J_j){J_g?1===J_g?(J_a=J_p.cureLocalIntersections(J_a,J_b,J_c),J_p.earcutLinked(J_a,J_b,J_c,J_d,J_e,J_f,2)):2===J_g&&J_p.splitEarcut(J_a,J_b,J_c,J_d,J_e,J_f):J_p.earcutLinked(J_p.filterPoints(J_a,null),J_b,J_c,J_d,J_e,J_f,1);break}}},J_p.isEar=function(J_a){var J_b=J_a.prev,J_c=J_a,J_d=J_a.next;if(0<=J_p.area(J_b,J_c,J_d))return!1;for(var J_e=J_a.next.next;J_e!==J_a.prev;){if(J_p.pointInTriangle(J_b.x,J_b.y,J_c.x,J_c.y,J_d.x,J_d.y,J_e.x,J_e.y)&&0<=J_p.area(J_e.prev,J_e,J_e.next))return!1;J_e=J_e.next}return!0},J_p.isEarHashed=function(J_a,J_b,J_c,J_d){var J_e=J_a.prev,J_f=J_a,J_g=J_a.next;if(0<=J_p.area(J_e,J_f,J_g))return!1;for(var J_h=J_e.x<J_f.x?J_e.x<J_g.x?J_e.x:J_g.x:J_f.x<J_g.x?J_f.x:J_g.x,J_i=J_e.y<J_f.y?J_e.y<J_g.y?J_e.y:J_g.y:J_f.y<J_g.y?J_f.y:J_g.y,J_j=J_e.x>J_f.x?J_e.x>J_g.x?J_e.x:J_g.x:J_f.x>J_g.x?J_f.x:J_g.x,J_k=J_e.y>J_f.y?J_e.y>J_g.y?J_e.y:J_g.y:J_f.y>J_g.y?J_f.y:J_g.y,J_l=J_p.zOrder(J_h,J_i,J_b,J_c,J_d),J_m=J_p.zOrder(J_j,J_k,J_b,J_c,J_d),J_n=J_a.nextZ;J_n&&J_n.z<=J_m;){if(J_n!==J_a.prev&&J_n!==J_a.next&&J_p.pointInTriangle(J_e.x,J_e.y,J_f.x,J_f.y,J_g.x,J_g.y,J_n.x,J_n.y)&&0<=J_p.area(J_n.prev,J_n,J_n.next))return!1;J_n=J_n.nextZ}for(J_n=J_a.prevZ;J_n&&J_n.z>=J_l;){if(J_n!==J_a.prev&&J_n!==J_a.next&&J_p.pointInTriangle(J_e.x,J_e.y,J_f.x,J_f.y,J_g.x,J_g.y,J_n.x,J_n.y)&&0<=J_p.area(J_n.prev,J_n,J_n.next))return!1;J_n=J_n.prevZ}return!0},J_p.cureLocalIntersections=function(J_a,J_b,J_c){var J_d=J_a;do{var J_e=J_d.prev,J_f=J_d.next.next;!J_p.equals(J_e,J_f)&&J_p.intersects(J_e,J_d,J_d.next,J_f)&&J_p.locallyInside(J_e,J_f)&&J_p.locallyInside(J_f,J_e)&&(J_b.push(J_e.i/J_c),J_b.push(J_d.i/J_c),J_b.push(J_f.i/J_c),J_p.removeNode(J_d),J_p.removeNode(J_d.next),J_d=J_a=J_f),J_d=J_d.next}while(J_d!==J_a);return J_d},J_p.splitEarcut=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_a;do{for(var J_h=J_g.next.next;J_h!==J_g.prev;){if(J_g.i!==J_h.i&&J_p.isValidDiagonal(J_g,J_h)){var J_i=J_p.splitPolygon(J_g,J_h);return J_g=J_p.filterPoints(J_g,J_g.next),J_i=J_p.filterPoints(J_i,J_i.next),J_p.earcutLinked(J_g,J_b,J_c,J_d,J_e,J_f),void J_p.earcutLinked(J_i,J_b,J_c,J_d,J_e,J_f)}J_h=J_h.next}J_g=J_g.next}while(J_g!==J_a)},J_p.eliminateHoles=function(J_a,J_b,J_c,J_d){var J_e,J_f,J_g,J_h,J_i,J_j=[];for(J_e=0,J_f=J_b.length;J_e<J_f;J_e++)J_g=J_b[J_e]*J_d,J_h=J_e<J_f-1?J_b[J_e+1]*J_d:J_a.length,(J_i=J_p.linkedList(J_a,J_g,J_h,J_d,!1))===J_i.next&&(J_i.steiner=!0),J_j.push(J_p.getLeftmost(J_i));for(J_j.sort(J_p.compareX),J_e=0;J_e<J_j.length;J_e++)J_p.eliminateHole(J_j[J_e],J_c),J_c=J_p.filterPoints(J_c,J_c.next);return J_c},J_p.compareX=function(J_a,J_b){return J_a.x-J_b.x},J_p.eliminateHole=function(J_a,J_b){if(J_b=J_p.findHoleBridge(J_a,J_b)){var J_c=J_p.splitPolygon(J_b,J_a);J_p.filterPoints(J_c,J_c.next)}},J_p.findHoleBridge=function(J_a,J_b){var J_c,J_d=J_b,J_e=J_a.x,J_f=J_a.y,J_g=-1/0;do{if(J_f<=J_d.y&&J_f>=J_d.next.y&&J_d.next.y!==J_d.y){var J_h=J_d.x+(J_f-J_d.y)*(J_d.next.x-J_d.x)/(J_d.next.y-J_d.y);if(J_h<=J_e&&J_g<J_h){if((J_g=J_h)===J_e){if(J_f===J_d.y)return J_d;if(J_f===J_d.next.y)return J_d.next}J_c=J_d.x<J_d.next.x?J_d:J_d.next}}J_d=J_d.next}while(J_d!==J_b);if(!J_c)return null;if(J_e===J_g)return J_c.prev;var J_i,J_j=J_c,J_k=J_c.x,J_l=J_c.y,J_m=1/0;for(J_d=J_c.next;J_d!==J_j;)J_e>=J_d.x&&J_d.x>=J_k&&J_e!==J_d.x&&J_p.pointInTriangle(J_f<J_l?J_e:J_g,J_f,J_k,J_l,J_f<J_l?J_g:J_e,J_f,J_d.x,J_d.y)&&((J_i=Math.abs(J_f-J_d.y)/(J_e-J_d.x))<J_m||J_i===J_m&&J_d.x>J_c.x)&&J_p.locallyInside(J_d,J_a)&&(J_c=J_d,J_m=J_i),J_d=J_d.next;return J_c},J_p.indexCurve=function(J_a,J_b,J_c,J_d){for(var J_e=J_a;null===J_e.z&&(J_e.z=J_p.zOrder(J_e.x,J_e.y,J_b,J_c,J_d)),J_e.prevZ=J_e.prev,J_e.nextZ=J_e.next,(J_e=J_e.next)!==J_a;);J_e.prevZ.nextZ=null,J_e.prevZ=null,J_p.sortLinked(J_e)},J_p.sortLinked=function(J_a){var J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j=1;do{for(J_c=J_a,J_f=J_a=null,J_g=0;J_c;){for(J_g++,J_d=J_c,J_b=J_h=0;J_b<J_j&&(J_h++,J_d=J_d.nextZ);J_b++);for(J_i=J_j;0<J_h||0<J_i&&J_d;)0!==J_h&&(0===J_i||!J_d||J_c.z<=J_d.z)?(J_c=(J_e=J_c).nextZ,J_h--):(J_d=(J_e=J_d).nextZ,J_i--),J_f?J_f.nextZ=J_e:J_a=J_e,J_e.prevZ=J_f,J_f=J_e;J_c=J_d}J_f.nextZ=null,J_j*=2}while(1<J_g);return J_a},J_p.zOrder=function(J_a,J_b,J_c,J_d,J_e){return(J_a=1431655765&((J_a=858993459&((J_a=252645135&((J_a=16711935&((J_a=32767*(J_a-J_c)*J_e)|J_a<<8))|J_a<<4))|J_a<<2))|J_a<<1))|(J_b=1431655765&((J_b=858993459&((J_b=252645135&((J_b=16711935&((J_b=32767*(J_b-J_d)*J_e)|J_b<<8))|J_b<<4))|J_b<<2))|J_b<<1))<<1},J_p.getLeftmost=function(J_a){for(var J_b=J_a,J_c=J_a;J_b.x<J_c.x&&(J_c=J_b),(J_b=J_b.next)!==J_a;);return J_c},J_p.pointInTriangle=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){return 0<=(J_e-J_g)*(J_b-J_h)-(J_a-J_g)*(J_f-J_h)&&0<=(J_a-J_g)*(J_d-J_h)-(J_c-J_g)*(J_b-J_h)&&0<=(J_c-J_g)*(J_f-J_h)-(J_e-J_g)*(J_d-J_h)},J_p.isValidDiagonal=function(J_a,J_b){return J_a.next.i!==J_b.i&&J_a.prev.i!==J_b.i&&!J_p.intersectsPolygon(J_a,J_b)&&J_p.locallyInside(J_a,J_b)&&J_p.locallyInside(J_b,J_a)&&J_p.middleInside(J_a,J_b)},J_p.area=function(J_a,J_b,J_c){return(J_b.y-J_a.y)*(J_c.x-J_b.x)-(J_b.x-J_a.x)*(J_c.y-J_b.y)},J_p.equals=function(J_a,J_b){return J_a.x===J_b.x&&J_a.y===J_b.y},J_p.intersects=function(J_a,J_b,J_c,J_d){return!!(J_p.equals(J_a,J_b)&&J_p.equals(J_c,J_d)||J_p.equals(J_a,J_d)&&J_p.equals(J_c,J_b))||0<J_p.area(J_a,J_b,J_c)!=0<J_p.area(J_a,J_b,J_d)&&0<J_p.area(J_c,J_d,J_a)!=0<J_p.area(J_c,J_d,J_b)},J_p.intersectsPolygon=function(J_a,J_b){var J_c=J_a;do{if(J_c.i!==J_a.i&&J_c.next.i!==J_a.i&&J_c.i!==J_b.i&&J_c.next.i!==J_b.i&&J_p.intersects(J_c,J_c.next,J_a,J_b))return!0;J_c=J_c.next}while(J_c!==J_a);return!1},J_p.locallyInside=function(J_a,J_b){return J_p.area(J_a.prev,J_a,J_a.next)<0?0<=J_p.area(J_a,J_b,J_a.next)&&0<=J_p.area(J_a,J_a.prev,J_b):J_p.area(J_a,J_b,J_a.prev)<0||J_p.area(J_a,J_a.next,J_b)<0},J_p.middleInside=function(J_a,J_b){for(var J_c=J_a,J_d=!1,J_e=(J_a.x+J_b.x)/2,J_f=(J_a.y+J_b.y)/2;J_c.y>J_f!=J_c.next.y>J_f&&J_c.next.y!==J_c.y&&J_e<(J_c.next.x-J_c.x)*(J_f-J_c.y)/(J_c.next.y-J_c.y)+J_c.x&&(J_d=!J_d),(J_c=J_c.next)!==J_a;);return J_d},J_p.splitPolygon=function(J_a,J_b){var J_c=new J_ea(J_a.i,J_a.x,J_a.y),J_d=new J_ea(J_b.i,J_b.x,J_b.y),J_e=J_a.next,J_f=J_b.prev;return(J_a.next=J_b).prev=J_a,(J_c.next=J_e).prev=J_c,(J_d.next=J_c).prev=J_d,(J_f.next=J_d).prev=J_f,J_d},J_p.insertNode=function(J_a,J_b,J_c,J_d){var J_e=new J_ea(J_a,J_b,J_c);return J_d?(J_e.next=J_d.next,(J_e.prev=J_d).next.prev=J_e,J_d.next=J_e):(J_e.prev=J_e).next=J_e,J_e},J_p.removeNode=function(J_a){J_a.next.prev=J_a.prev,J_a.prev.next=J_a.next,J_a.prevZ&&(J_a.prevZ.nextZ=J_a.nextZ),J_a.nextZ&&(J_a.nextZ.prevZ=J_a.prevZ)},J_p.signedArea=function(J_a,J_b,J_c,J_d){for(var J_e=0,J_f=J_b,J_g=J_c-J_d;J_f<J_c;J_f+=J_d)J_e+=(J_a[J_g]-J_a[J_f])*(J_a[J_f+1]+J_a[J_g+1]),J_g=J_f;return J_e},J_p}(),J_ea=function(){function J_a(J_a,J_b,J_c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=J_a,this.x=J_b,this.y=J_c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return J_m(J_a,"laya.webgl.shapes.EarcutNode"),J_a}(),J_fa=(function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this.lineWidth=J_a,this.lineColor=J_b,this.lineAlpha=J_c,this.fillColor=J_d,this.fillAlpha=J_e,this.shape=J_g,this.fill=J_f}J_m(J_a,"laya.webgl.shapes.GeometryData");var J_b=J_a.prototype;J_b.clone=function(){return new J_a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},J_b.getIndexData=function(){return null},J_b.getVertexData=function(){return null},J_b.destroy=function(){this.shape=null}}(),function(){function J_a(J_a){if(J_a instanceof Float32Array)this.points=J_a;else if(J_a instanceof Array){J_a.length;this.points=new Float32Array(J_a)}}J_m(J_a,"laya.webgl.shapes.Vertex");var J_b=J_a.prototype;J_y.imps(J_b,{"laya.webgl.shapes.IShape":!0}),J_b.getData=function(J_a,J_b,J_c){},J_b.needUpdate=function(J_a){return!1},J_b.rebuild=function(J_a){},J_b.setMatrix=function(J_a){}}(),function(){function J_i(J_a){void 0===J_a&&(J_a=1e4),this._renderType=J_a}J_m(J_i,"laya.webgl.submit.Submit");var J_a=J_i.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a.releaseRender=function(){var J_a=J_i._cache;(J_a[J_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J_a.getRenderType=function(){return this._renderType},J_a.renderSubmit=function(){if(0===this._numEle)return 1;var J_a=this.shaderValue.textureHost;if(J_a){var J_b=J_a.source;if(!J_a.bitmap||!J_b)return 1;this.shaderValue.texture=J_b,J_a.alphaTexture&&J_a.alphaTexture.source&&(this.shaderValue.texture1=J_a.alphaTexture.source)}this._vb.bind_upload(this._ib);var J_c=J_wa.mainContext;return this.shaderValue.upload(),J_S.activeBlendFunction!==this._blendFn&&(J_c.enable(3042),this._blendFn(J_c),J_S.activeBlendFunction=this._blendFn),J_G.drawCall++,J_G.trianglesFaces+=this._numEle/3,J_c.drawElements(4,this._numEle,5123,this._startIdx),1},J_i.__init__=function(){var J_a=J_i.RENDERBASE=new J_i(-1);J_a.shaderValue=new J_Aa(0,0),J_a.shaderValue.ALPHA=-1234},J_i.createSubmit=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_i._cache._length?J_i._cache[--J_i._cache._length]:new J_i;null==J_c&&((J_c=J_f._selfVb||(J_f._selfVb=J_ta.create(-1))).clear(),J_d=0),J_f._ib=J_b,J_f._vb=J_c,J_f._startIdx=J_d*J_pa.BYTES_PIDX,J_f._numEle=0;var J_g=J_a._nBlendType;J_f._blendFn=J_a._targets?J_S.targetFns[J_g]:J_S.fns[J_g],J_f.shaderValue=J_e,J_f.shaderValue.setValue(J_a._shader2D);var J_h=J_a._shader2D.filters;return J_h&&J_f.shaderValue.setFilters(J_h),J_f},J_i.createShape=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_i._cache._length?J_i._cache[--J_i._cache._length]:new J_i;J_g._ib=J_b,J_g._vb=J_c,J_g._numEle=J_d,J_g._startIdx=J_e,J_g.shaderValue=J_f,J_g.shaderValue.setValue(J_a._shader2D);var J_h=J_a._nBlendType;return J_g._blendFn=J_a._targets?J_S.targetFns[J_h]:J_S.fns[J_h],J_g},J_i.TYPE_2D=1e4,J_i.TYPE_CANVAS=10003,J_i.TYPE_CMDSETRT=10004,J_i.TYPE_CUSTOM=10005,J_i.TYPE_BLURRT=10006,J_i.TYPE_CMDDESTORYPRERT=10007,J_i.TYPE_DISABLESTENCIL=10008,J_i.TYPE_OTHERIBVB=10009,J_i.TYPE_PRIMITIVE=10010,J_i.TYPE_RT=10011,J_i.TYPE_BLUR_RT=10012,J_i.TYPE_TARGET=10013,J_i.TYPE_CHANGE_VALUE=10014,J_i.TYPE_SHAPE=10015,J_i.TYPE_TEXTURE=10016,J_i.TYPE_FILLTEXTURE=10017,J_i.RENDERBASE=null,J_i._cache=((J_i._cache=[])._length=0,J_i._cache),J_i}()),J_ga=function(){function J_d(){this.fun=null,this.args=null}J_m(J_d,"laya.webgl.submit.SubmitCMD");var J_a=J_d.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a.renderSubmit=function(){return this.fun.apply(null,this.args),1},J_a.getRenderType=function(){return 0},J_a.releaseRender=function(){var J_a=J_d._cache;J_a[J_a._length++]=this},J_d.create=function(J_a,J_b){var J_c=J_d._cache._length?J_d._cache[--J_d._cache._length]:new J_d;return J_c.fun=J_b,J_c.args=J_a,J_c},J_d._cache=((J_d._cache=[])._length=0,J_d._cache),J_d}(),J_ha=function(){function J_b(){this.variables={}}J_m(J_b,"laya.webgl.submit.SubmitCMDScope");var J_a=J_b.prototype;return J_a.getValue=function(J_a){return this.variables[J_a]},J_a.addValue=function(J_a,J_b){return this.variables[J_a]=J_b},J_a.setValue=function(J_a,J_b){return this.variables.hasOwnProperty(J_a)?this.variables[J_a]=J_b:null},J_a.clear=function(){for(var J_a in this.variables)delete this.variables[J_a]},J_a.recycle=function(){this.clear(),J_b.POOL.push(this)},J_b.create=function(){var J_a=J_b.POOL.pop();return J_a||(J_a=new J_b),J_a},J_b.POOL=[],J_b}(),J_ia=function(){function J_l(){this.offset=0,this.startIndex=0,this._mat=J_B.create()}J_m(J_l,"laya.webgl.submit.SubmitOtherIBVB");var J_a=J_l.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a.releaseRender=function(){var J_a=J_l._cache;(J_a[J_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J_a.getRenderType=function(){return 10009},J_a.renderSubmit=function(){var J_a=this._shaderValue.textureHost;if(J_a){var J_b=J_a.source;if(!J_a.bitmap||!J_b)return 1;this._shaderValue.texture=J_b}this._vb.bind_upload(this._ib);var J_c=J_ua.worldMatrix4,J_d=J_B.TEMP;J_B.mulPre(this._mat,J_c[0],J_c[1],J_c[4],J_c[5],J_c[12],J_c[13],J_d);var J_e=J_ua.worldMatrix4=J_l.tempMatrix4;J_e[0]=J_d.a,J_e[1]=J_d.b,J_e[4]=J_d.c,J_e[5]=J_d.d,J_e[12]=J_d.tx,J_e[13]=J_d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var J_f=J_wa.mainContext;return J_S.activeBlendFunction!==this._blendFn&&(J_f.enable(3042),this._blendFn(J_f),J_S.activeBlendFunction=this._blendFn),J_G.drawCall++,J_G.trianglesFaces+=this._numEle/3,J_f.drawElements(4,this._numEle,5123,this.startIndex),J_ua.worldMatrix4=J_c,J_La.activeShader=null,1},J_l.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){void 0===J_i&&(J_i=0);var J_j=J_l._cache._length?J_l._cache[--J_l._cache._length]:new J_l;J_j._ib=J_c,J_j._vb=J_b,J_j._numEle=J_d,J_j._shader=J_e,J_j._shaderValue=J_f;var J_k=J_a._nBlendType;switch(J_j._blendFn=J_a._targets?J_S.targetFns[J_k]:J_S.fns[J_k],J_i){case 0:J_j.offset=0,J_j.startIndex=J_h/(J_pa.BYTES_PE*J_b.vertexStride)*1.5,J_j.startIndex*=J_pa.BYTES_PIDX;break;case 1:J_j.startIndex=J_g,J_j.offset=J_h}return J_j},J_l._cache=((J_l._cache=[])._length=0,J_l._cache),J_l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J_l}(),J_ja=function(){function J_c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new J_D,this.screenRect=new J_D}J_m(J_c,"laya.webgl.submit.SubmitScissor");var J_a=J_c.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a._scissor=function(J_a,J_b,J_c,J_d){var J_e=J_ua.worldMatrix4,J_f=J_e[0],J_g=J_e[5],J_h=J_e[12],J_i=J_e[13];if(J_d*=J_g,(J_c*=J_f)<1||J_d<1)return!1;var J_j=(J_a=J_a*J_f+J_h)+J_c,J_k=(J_b=J_b*J_g+J_i)+J_d;J_a<0&&(J_c=J_j-(J_a=0)),J_b<0&&(J_d=J_k-(J_b=0));var J_l=J_ua.worldClipRect;if(J_a=Math.max(J_a,J_l.x),J_b=Math.max(J_b,J_l.y),J_c=Math.min(J_j,J_l.right)-J_a,J_d=Math.min(J_k,J_l.bottom)-J_b,J_c<1||J_d<1)return!1;var J_m=J_ua.worldScissorTest;return this.screenRect.copyFrom(J_l),J_l.x=J_a,J_l.y=J_b,J_l.width=J_c,J_l.height=J_d,J_ua.worldScissorTest=!0,J_b=J_ua.height-J_b-J_d,J_wa.mainContext.scissor(J_a,J_b,J_c,J_d),J_wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),J_m?(J_b=J_ua.height-this.screenRect.y-this.screenRect.height,J_wa.mainContext.scissor(this.screenRect.x,J_b,this.screenRect.width,this.screenRect.height),J_wa.mainContext.enable(3089)):(J_wa.mainContext.disable(3089),J_ua.worldScissorTest=!1),J_l.copyFrom(this.screenRect),!0},J_a._scissorWithTagart=function(J_a,J_b,J_c,J_d){if(J_c<1||J_d<1)return!1;var J_e=J_a+J_c,J_f=J_b+J_d;J_a<0&&(J_c=J_e-(J_a=0)),J_b<0&&(J_d=J_f-(J_b=0));var J_g=J_ua.worldClipRect;if(J_a=Math.max(J_a,J_g.x),J_b=Math.max(J_b,J_g.y),J_c=Math.min(J_e,J_g.right)-J_a,J_d=Math.min(J_f,J_g.bottom)-J_b,J_c<1||J_d<1)return!1;var J_h=J_ua.worldScissorTest;return this.screenRect.copyFrom(J_g),J_ua.worldScissorTest=!0,J_g.x=J_a,J_g.y=J_b,J_g.width=J_c,J_g.height=J_d,J_b=J_ua.height-J_b-J_d,J_wa.mainContext.scissor(J_a,J_b,J_c,J_d),J_wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),J_h?(J_b=J_ua.height-this.screenRect.y-this.screenRect.height,J_wa.mainContext.scissor(this.screenRect.x,J_b,this.screenRect.width,this.screenRect.height),J_wa.mainContext.enable(3089)):(J_wa.mainContext.disable(3089),J_ua.worldScissorTest=!1),J_g.copyFrom(this.screenRect),!0},J_a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},J_a.getRenderType=function(){return 0},J_a.releaseRender=function(){var J_a=J_c._cache;(J_a[J_a._length++]=this).context=null},J_c.create=function(J_a){var J_b=J_c._cache._length?J_c._cache[--J_c._cache._length]:new J_c;return J_b.context=J_a,J_b},J_c._cache=((J_c._cache=[])._length=0,J_c._cache),J_c}(),J_ka=function(){function J_i(){this.step=0,this.blendMode=null,this.level=0}J_m(J_i,"laya.webgl.submit.SubmitStencil");var J_a=J_i.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},J_a.getRenderType=function(){return 0},J_a.releaseRender=function(){var J_a=J_i._cache;J_a[J_a._length++]=this},J_a.do1=function(){var J_a=J_wa.mainContext;J_a.enable(2960),J_a.clear(1024),J_a.colorMask(!1,!1,!1,!1),J_a.stencilFunc(514,this.level,255),J_a.stencilOp(7680,7680,7682)},J_a.do2=function(){var J_a=J_wa.mainContext;J_a.stencilFunc(514,this.level+1,255),J_a.colorMask(!0,!0,!0,!0),J_a.stencilOp(7680,7680,7680)},J_a.do3=function(){var J_a=J_wa.mainContext;J_a.colorMask(!0,!0,!0,!0),J_a.stencilOp(7680,7680,7680),J_a.clear(1024),J_a.disable(2960)},J_a.do4=function(){var J_a=J_wa.mainContext;0==this.level&&(J_a.enable(2960),J_a.clear(1024)),J_a.colorMask(!1,!1,!1,!1),J_a.stencilFunc(519,0,255),J_a.stencilOp(7680,7680,7682)},J_a.do5=function(){var J_a=J_wa.mainContext;J_a.stencilFunc(514,this.level,255),J_a.colorMask(!0,!0,!0,!0),J_a.stencilOp(7680,7680,7680)},J_a.do6=function(){var J_a=J_wa.mainContext;J_S.targetFns[J_S.TOINT[this.blendMode]](J_a)},J_a.do7=function(){var J_a=J_wa.mainContext;J_a.colorMask(!1,!1,!1,!1),J_a.stencilOp(7680,7680,7683)},J_a.do8=function(){var J_a=J_wa.mainContext;J_a.colorMask(!0,!0,!0,!0),J_a.stencilFunc(514,this.level,255),J_a.stencilOp(7680,7680,7680)},J_i.restore=function(J_a,J_b,J_c,J_d,J_e){var J_f;if((J_a._renderKey=0)<J_i._mask&&J_i._mask--,0==J_i._mask)J_f=laya.webgl.submit.SubmitStencil.create(3),J_a.addRenderObject(J_f),J_a._curSubmit=J_fa.RENDERBASE;else{J_f=laya.webgl.submit.SubmitStencil.create(7),J_a.addRenderObject(J_f);var J_g=J_a._vb;J_g._byteLength;if(J_qa.fillRectImgVb(J_g,null,J_b.x,J_b.y,J_b.width,J_b.height,J_K.DEF_UV,J_c,J_d,J_e,0,0)){J_a._shader2D.glTexture=null;var J_h=J_a._curSubmit=J_fa.createSubmit(J_a,J_a._ib,J_g,(J_g._byteLength-64)/32*3,J_Aa.create(2,0));J_h.shaderValue.ALPHA=1,J_a._submits[J_a._submits._length++]=J_h,J_a._curSubmit._numEle+=6,J_a._curSubmit=J_fa.RENDERBASE}else alert("clipRect calc stencil rect error");J_f=laya.webgl.submit.SubmitStencil.create(8),J_a.addRenderObject(J_f)}},J_i.restore2=function(J_a,J_b){var J_c;(J_a._renderKey=0)<J_i._mask&&J_i._mask--,0==J_i._mask?(J_c=laya.webgl.submit.SubmitStencil.create(3),J_a.addRenderObject(J_c),J_a._curSubmit=J_fa.RENDERBASE):(J_c=laya.webgl.submit.SubmitStencil.create(7),J_a.addRenderObject(J_c),J_a._submits[J_a._submits._length++]=J_b,J_c=laya.webgl.submit.SubmitStencil.create(8),J_a.addRenderObject(J_c))},J_i.create=function(J_a){var J_b=J_i._cache._length?J_i._cache[--J_i._cache._length]:new J_i;return 5==(J_b.step=J_a)&&++J_i._mask,J_b.level=J_i._mask,J_b},J_i._cache=((J_i._cache=[])._length=0,J_i._cache),J_i._mask=0,J_i}(),J_la=function(){function J_h(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}J_m(J_h,"laya.webgl.submit.SubmitTarget");var J_a=J_h.prototype;return J_y.imps(J_a,{"laya.webgl.submit.ISubmit":!0}),J_a.renderSubmit=function(){this._vb.bind_upload(this._ib);var J_a=this.scope.getValue(this.proName);return J_a&&(this.shaderValue.texture=J_a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[J_a.width,J_a.height]),this.shaderValue.upload(),this.blend(),J_G.drawCall++,J_G.trianglesFaces+=this._numEle/3,J_wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},J_a.blend=function(){if(J_S.activeBlendFunction!==J_S.fns[this.blendType]){var J_a=J_wa.mainContext;J_a.enable(3042),J_S.fns[this.blendType](J_a),J_S.activeBlendFunction=J_S.fns[this.blendType]}},J_a.getRenderType=function(){return 0},J_a.releaseRender=function(){var J_a=J_h._cache;(J_a[J_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J_h.create=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_h._cache._length?J_h._cache[--J_h._cache._length]:new J_h;return J_g._ib=J_b,J_g._vb=J_c,J_g.proName=J_f,J_g._startIdx=J_d*J_pa.BYTES_PIDX,J_g._numEle=0,J_g.blendType=J_a._nBlendType,J_g.shaderValue=J_e,J_g.shaderValue.setValue(J_a._shader2D),J_g},J_h._cache=((J_h._cache=[])._length=0,J_h._cache),J_h}(),J_ma=function(){function J_a(){this._sourceStr=null}J_m(J_a,"laya.webgl.text.CharSegment");var J_b=J_a.prototype;return J_y.imps(J_b,{"laya.webgl.text.ICharSegment":!0}),J_b.textToSpit=function(J_a){this._sourceStr=J_a},J_b.getChar=function(J_a){return this._sourceStr.charAt(J_a)},J_b.getCharCode=function(J_a){return this._sourceStr.charCodeAt(J_a)},J_b.length=function(){return this._sourceStr.length},J_a}(),J_na=function(){var J_a;function J_G(){}return J_m(J_G,"laya.webgl.text.DrawText"),J_G.__init__=function(){J_G._charsTemp=new Array,J_G._drawValue=new J_a,J_G._charSeg=new J_ma},J_G.customCharSeg=function(J_a){J_G._charSeg=J_a},J_G.getChar=function(J_a,J_b,J_c){var J_d=J_Va.createOneChar(J_a,J_c);return-1!=J_b&&(J_G._charsCache[J_b]=J_d),J_d},J_G._drawSlow=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m,J_n,J_o){var J_p,J_q,J_r=J_G._drawValue.value(J_f,J_h,J_i,J_j,J_m,J_n,J_o),J_u=0,J_v=0,J_w=J_G._charsTemp,J_x=0,J_y=NaN;if(J_d)for(J_w.length=J_d.length,J_u=0,J_v=J_d.length;J_u<J_v;J_u++)(J_q=J_d[J_u])&&(J_y=J_q.charNum+J_r.txtID,J_w[J_u]=J_p=J_G._charsCache[J_y]||J_G.getChar(J_q.char,J_y,J_r),J_p.active());else{var J_z=J_c instanceof laya.utils.WordText?J_c.toString():J_c;if(J_J.CharacterCache){J_G._charSeg.textToSpit(J_z);var J_A=J_G._charSeg.length();for(J_u=0,J_v=J_w.length=J_A;J_u<J_v;J_u++)J_y=J_G._charSeg.getCharCode(J_u)+J_r.txtID,J_w[J_u]=J_p=J_G._charsCache[J_y]||J_G.getChar(J_G._charSeg.getChar(J_u),J_y,J_r),J_p.active(),J_x+=J_p.cw}else J_w.length=0,(J_p=J_G.getChar(J_z,-1,J_r)).active(),J_x+=J_p.cw,J_w[0]=J_p}var J_B=0;null!==J_g&&"left"!==J_g&&(J_B=-("center"==J_g?J_x/2:J_x));var J_C,J_D,J_E=NaN,J_F=0;if(J_d)for(J_u=0,J_v=J_w.length;J_u<J_v;J_u++)J_p=J_w[J_u],J_q=J_d[J_u],J_p&&J_q&&!J_p.isSpace&&(J_E=J_p.borderSize,J_C=J_p.texture,J_b._drawText(J_C,J_k+J_B+J_q.x*J_m-J_E,J_l+J_q.y*J_n-J_E,J_C.width,J_C.height,J_e,0,0,0,0));else{for(J_u=0,J_v=J_w.length;J_u<J_v;J_u++)(J_p=J_w[J_u])&&!J_p.isSpace&&(J_E=J_p.borderSize,J_C=J_p.texture,J_b._drawText(J_C,J_k+J_B-J_E,J_l-J_E,J_C.width,J_C.height,J_e,0,0,0,0),J_a&&((J_D=J_a[J_F++])||(J_D=J_a[J_F-1]=[]),J_D[0]=J_C,J_D[1]=J_B-J_E,J_D[2]=-J_E)),J_B+=J_p.cw;J_a&&(J_a.length=J_F)}},J_G._drawFast=function(J_a,J_b,J_c,J_d,J_e){for(var J_f,J_g,J_h=0,J_i=J_a.length;J_h<J_i;J_h++)(J_f=(J_g=J_a[J_h])[0]).active(),J_b._drawText(J_f,J_d+J_g[1],J_e+J_g[2],J_f.width,J_f.height,J_c,0,0,0,0)},J_G.drawText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l){if(void 0===J_l&&(J_l=0),!(J_b&&0===J_b.length||J_c&&0===J_c.length)){var J_m=J_d.a,J_n=J_d.d;(0!==J_d.b||0!==J_d.c)&&(J_m=J_n=1);var J_o=1!==J_m||1!==J_n;if(J_o&&J_y.stage.transform){var J_p=J_y.stage.transform;J_o=J_p.a===J_m&&J_p.d===J_n}else J_o=!1;if(J_o){var J_q=(J_d=J_d.copyTo(J_za._tmpMatrix)).tx,J_r=J_d.ty;J_d.scale(1/J_m,1/J_n),J_d._checkTransform(),J_j*=J_m,J_k*=J_n,J_j+=J_q-J_d.tx,J_k+=J_r-J_d.ty}else J_m=J_n=1;if(J_c)J_G._drawSlow(null,J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_m,J_n,J_l);else{if(null===J_b.toUpperCase){var J_u=J_m+1e5*J_n,J_v=J_b;return void(J_v.changed||J_v.id!==J_u?(J_v.id=J_u,J_v.changed=!1,J_G._drawSlow(J_v.save,J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_m,J_n,J_l)):J_G._drawFast(J_v.save,J_a,J_d,J_j,J_k))}var J_w=J_b+J_e.toString()+J_g+J_h+J_i+J_m+J_n+J_f,J_x=J_G._textsCache[J_w];J_J.CharacterCache?J_x?J_G._drawFast(J_x,J_a,J_d,J_j,J_k):(J_G._textsCache.__length||(J_G._textsCache.__length=0),J_G._textsCache.__length>J_z.WebGLTextCacheCount&&((J_G._textsCache={}).__length=0,J_G._curPoolIndex=0),J_G._textCachesPool[J_G._curPoolIndex]?(J_x=J_G._textsCache[J_w]=J_G._textCachesPool[J_G._curPoolIndex]).length=0:J_G._textCachesPool[J_G._curPoolIndex]=J_x=J_G._textsCache[J_w]=[],J_G._textsCache.__length++,J_G._curPoolIndex++,J_G._drawSlow(J_x,J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_m,J_n,J_l)):J_G._drawSlow(J_x,J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_m,J_n,J_l)}}},J_G._charsTemp=null,J_G._textCachesPool=[],J_G._curPoolIndex=0,J_G._charsCache={},J_G._textsCache={},J_G._drawValue=null,J_G.d=[],J_G._charSeg=null,J_G.__init$=function(){J_a=function(){function J_i(){}return J_m(J_i,""),J_i.prototype.value=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this.font=J_a,this.fillColor=J_b,this.borderColor=J_c,this.lineWidth=J_d,this.scaleX=J_e,this.scaleY=J_f,this.underLine=J_g;var J_h=J_a.toString()+J_e+J_f+J_d+(J_b?J_b.toLowerCase():" ")+(J_c?J_c.toLowerCase():" ")+J_g;return this.txtID=J_i._keymap[J_h],this.txtID||(this.txtID=1e-7*++J_i._keymapCount,J_i._keymap[J_h]=this.txtID),this},J_i.clear=function(){J_i._keymap={},J_i._keymapCount=1},J_i._keymap={},J_i._keymapCount=1,J_i}()},J_G}(),J_oa=function(){function J_e(J_a){this._index=0,this._size=14,this._italic=-2,J_e._cache2=J_e._cache2||[],this.setFont(J_a||"14px Arial")}J_m(J_e,"laya.webgl.text.FontInContext");var J_a=J_e.prototype;return J_a.setFont=function(J_a){var J_b=J_e._cache2[J_a];if(J_b)this._words=J_b[0],this._size=J_b[1];else{this._words=J_a.split(" ");for(var J_c=0,J_d=this._words.length;J_c<J_d;J_c++)if(0<this._words[J_c].indexOf("px")){this._index=J_c;break}this._size=parseInt(this._words[this._index]),J_e._cache2[J_a]=[this._words,this._size]}this._text=null,this._italic=-2},J_a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},J_a.hasType=function(J_a){for(var J_b=0,J_c=this._words.length;J_b<J_c;J_b++)if(this._words[J_b]===J_a)return J_b;return-1},J_a.removeType=function(J_a){for(var J_b=0,J_c=this._words.length;J_b<J_c;J_b++)if(this._words[J_b]===J_a){this._words.splice(J_b,1),this._index>J_b&&this._index--;break}this._text=null,this._italic=-2},J_a.copyTo=function(J_a){return J_a._text=this._text,J_a._size=this._size,J_a._index=this._index,J_a._words=this._words.slice(),J_a._italic=-2,J_a},J_a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},J_d(0,J_a,"size",function(){return this._size},function(J_a){this._size=J_a,this._words[this._index]=J_a+"px",this._text=null}),J_e.create=function(J_a){var J_b=J_e._cache[J_a];return J_b||(J_b=J_e._cache[J_a]=new J_e(J_a))},J_e.EMPTY=new J_e,J_e._cache={},J_e._cache2=null,J_e}(),J_pa=function(){function J_a(){}return J_m(J_a,"laya.webgl.utils.CONST3D2D"),J_a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J_a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],J_a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],J_a._TMPARRAY=[],J_a._OFFSETX=0,J_a._OFFSETY=0,J_g(J_a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),J_a}(),J_qa=function(){function J_o(){}return J_m(J_o,"laya.webgl.utils.GlUtils"),J_o.make2DProjection=function(J_a,J_b,J_c){return[2/J_a,0,0,0,0,-2/J_b,0,0,0,0,2/J_c,0,-1,1,0,1]},J_o.fillIBQuadrangle=function(J_a,J_b){if(65535/4<J_b)throw Error("IBQuadrangle count:"+J_b+" must<:"+Math.floor(65535/4));J_b=Math.floor(J_b),J_a._resizeBuffer(6*(J_b+1)*2,!1),J_a.byteLength=J_a.bufferLength;for(var J_c=J_a.getUint16Array(),J_d=0,J_e=0;J_e<J_b;J_e++)J_c[J_d++]=4*J_e,J_c[J_d++]=4*J_e+2,J_c[J_d++]=4*J_e+1,J_c[J_d++]=4*J_e,J_c[J_d++]=4*J_e+3,J_c[J_d++]=4*J_e+2;return J_a.setNeedUpload(),!0},J_o.expandIBQuadrangle=function(J_a,J_b){J_a.bufferLength>=6*J_b*2||J_o.fillIBQuadrangle(J_a,J_b)},J_o.mathCeilPowerOfTwo=function(J_a){return J_a--,J_a|=J_a>>1,J_a|=J_a>>2,J_a|=J_a>>4,J_a|=J_a>>8,J_a|=J_a>>16,++J_a},J_o.fillQuadrangleImgVb=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=16+(J_a._byteLength>>2);J_a.byteLength=J_i<<2;var J_j=J_a.getFloat32Array();J_j[(J_i-=16)+2]=J_e[0],J_j[J_i+3]=J_e[1],J_j[J_i+6]=J_e[2],J_j[J_i+7]=J_e[3],J_j[J_i+10]=J_e[4],J_j[J_i+11]=J_e[5],J_j[J_i+14]=J_e[6],J_j[J_i+15]=J_e[7];var J_k=J_f.a,J_l=J_f.b,J_m=J_f.c,J_n=J_f.d;if(1!==J_k||0!==J_l||0!==J_m||1!==J_n){J_f.bTransform=!0;var J_o=J_f.tx+J_g,J_p=J_f.ty+J_h;J_j[J_i]=(J_d[0]+J_b)*J_k+(J_d[1]+J_c)*J_m+J_o,J_j[J_i+1]=(J_d[0]+J_b)*J_l+(J_d[1]+J_c)*J_n+J_p,J_j[J_i+4]=(J_d[2]+J_b)*J_k+(J_d[3]+J_c)*J_m+J_o,J_j[J_i+5]=(J_d[2]+J_b)*J_l+(J_d[3]+J_c)*J_n+J_p,J_j[J_i+8]=(J_d[4]+J_b)*J_k+(J_d[5]+J_c)*J_m+J_o,J_j[J_i+9]=(J_d[4]+J_b)*J_l+(J_d[5]+J_c)*J_n+J_p,J_j[J_i+12]=(J_d[6]+J_b)*J_k+(J_d[7]+J_c)*J_m+J_o,J_j[J_i+13]=(J_d[6]+J_b)*J_l+(J_d[7]+J_c)*J_n+J_p}else J_f.bTransform=!1,J_b+=J_f.tx+J_g,J_c+=J_f.ty+J_h,J_j[J_i]=J_b+J_d[0],J_j[J_i+1]=J_c+J_d[1],J_j[J_i+4]=J_b+J_d[2],J_j[J_i+5]=J_c+J_d[3],J_j[J_i+8]=J_b+J_d[4],J_j[J_i+9]=J_c+J_d[5],J_j[J_i+12]=J_b+J_d[6],J_j[J_i+13]=J_c+J_d[7];return J_a._upload=!0},J_o.fillTranglesVB=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h=(J_a._byteLength>>2)+J_d.length;J_a.byteLength=J_h<<2;var J_i=J_a.getFloat32Array();J_h-=J_d.length;for(var J_j=J_d.length,J_k=J_e.a,J_l=J_e.b,J_m=J_e.c,J_n=J_e.d,J_o=0;J_o<J_j;J_o+=4)if(J_i[J_h+J_o+2]=J_d[J_o+2],J_i[J_h+J_o+3]=J_d[J_o+3],1!==J_k||0!==J_l||0!==J_m||1!==J_n){J_e.bTransform=!0;var J_p=J_e.tx+J_f,J_q=J_e.ty+J_g;J_i[J_h+J_o]=(J_d[J_o]+J_b)*J_k+(J_d[J_o+1]+J_c)*J_m+J_p,J_i[J_h+J_o+1]=(J_d[J_o]+J_b)*J_l+(J_d[J_o+1]+J_c)*J_n+J_q}else J_e.bTransform=!1,J_b+=J_e.tx+J_f,J_c+=J_e.ty+J_g,J_i[J_h+J_o]=J_b+J_d[J_o],J_i[J_h+J_o+1]=J_c+J_d[J_o+1];return J_a._upload=!0},J_o.copyPreImgVb=function(J_a,J_b,J_c){var J_d=J_a._byteLength>>2;J_a.byteLength=J_d+16<<2;for(var J_e=J_a.getFloat32Array(),J_f=0,J_g=J_d-16;J_f<4;J_f++)J_e[J_d]=J_e[J_g]+J_b,++J_g,J_e[++J_d]=J_e[J_g]+J_c,++J_g,J_e[++J_d]=J_e[J_g],++J_g,J_e[++J_d]=J_e[J_g],++J_d,++J_g;J_a._upload=!0},J_o.fillRectImgVb=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m){void 0===J_m&&(J_m=!1);var J_n,J_o,J_p,J_q,J_r,J_u,J_v,J_w,J_x,J_y,J_z,J_A,J_B,J_C,J_D,J_E,J_F=1,J_G=J_h.a,J_H=J_h.b,J_I=J_h.c,J_J=J_h.d,J_K=J_b&&J_b.width<99999999;if(1!==J_G||0!==J_H||0!==J_I||1!==J_J?(J_h.bTransform=!0,0===J_H&&0===J_I&&(J_F=23,J_x=J_e+J_c,J_y=J_f+J_d,J_n=J_G*J_c+(J_z=J_h.tx+J_i),J_p=J_G*J_x+J_z,J_o=J_J*J_d+(J_A=J_h.ty+J_j),J_q=J_J*J_y+J_A)):(J_F=23,J_h.bTransform=!1,J_p=(J_n=J_c+J_h.tx+J_i)+J_e,J_q=(J_o=J_d+J_h.ty+J_j)+J_f),J_K&&(J_r=J_b.x,J_u=J_b.y,J_v=J_b.width+J_r,J_w=J_b.height+J_u),1!==J_F){if(Math.min(J_n,J_p)>=J_v)return!1;if(Math.min(J_o,J_q)>=J_w)return!1;if(Math.max(J_p,J_n)<=J_r)return!1;if(Math.max(J_q,J_o)<=J_u)return!1}var J_L=J_a._byteLength>>2;J_a.byteLength=16+J_L<<2;var J_M=J_a.getFloat32Array();switch(J_M[2+J_L]=J_g[0],J_M[3+J_L]=J_g[1],J_M[6+J_L]=J_g[2],J_M[7+J_L]=J_g[3],J_M[10+J_L]=J_g[4],J_M[11+J_L]=J_g[5],J_M[14+J_L]=J_g[6],J_M[15+J_L]=J_g[7],J_F){case 1:J_z=J_h.tx+J_i,J_A=J_h.ty+J_j;var J_N=J_G*J_c,J_O=J_I*J_d,J_P=J_J*J_d,J_Q=J_H*J_c,J_R=J_G*(J_x=J_e+J_c),J_S=J_I*(J_y=J_f+J_d),J_T=J_J*J_y,J_U=J_H*J_x;J_m?(J_B=J_N+J_O+J_z,J_D=Math.round(J_B)-J_B,J_C=J_P+J_Q+J_A,J_E=Math.round(J_C)-J_C,J_M[J_L]=J_B+J_D,J_M[1+J_L]=J_C+J_E,J_M[4+J_L]=J_R+J_O+J_z+J_D,J_M[5+J_L]=J_P+J_U+J_A+J_E,J_M[8+J_L]=J_R+J_S+J_z+J_D,J_M[9+J_L]=J_T+J_U+J_A+J_E,J_M[12+J_L]=J_N+J_S+J_z+J_D,J_M[13+J_L]=J_T+J_Q+J_A+J_E):(J_M[J_L]=J_N+J_O+J_z,J_M[1+J_L]=J_P+J_Q+J_A,J_M[4+J_L]=J_R+J_O+J_z,J_M[5+J_L]=J_P+J_U+J_A,J_M[8+J_L]=J_R+J_S+J_z,J_M[9+J_L]=J_T+J_U+J_A,J_M[12+J_L]=J_N+J_S+J_z,J_M[13+J_L]=J_T+J_Q+J_A);break;case 23:J_m?(J_B=J_n+J_k,J_D=Math.round(J_B)-J_B,J_C=J_o,J_E=Math.round(J_C)-J_C,J_M[J_L]=J_B+J_D,J_M[1+J_L]=J_C+J_E,J_M[4+J_L]=J_p+J_k+J_D,J_M[5+J_L]=J_o+J_E,J_M[8+J_L]=J_p+J_D,J_M[9+J_L]=J_q+J_E,J_M[12+J_L]=J_n+J_D,J_M[13+J_L]=J_q+J_E):(J_M[J_L]=J_n+J_k,J_M[1+J_L]=J_o,J_M[4+J_L]=J_p+J_k,J_M[5+J_L]=J_o,J_M[8+J_L]=J_p,J_M[9+J_L]=J_q,J_M[12+J_L]=J_n,J_M[13+J_L]=J_q)}return J_a._upload=!0},J_o.fillLineVb=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=.5*J_g,J_j=J_o._fillLineArray,J_k=-(J_d-J_f),J_l=J_c-J_e,J_m=Math.sqrt(J_k*J_k+J_l*J_l);J_k/=J_m,J_l/=J_m,J_k*=J_i,J_l*=J_i,J_j[0]=J_c-J_k,J_j[1]=J_d-J_l,J_j[4]=J_c+J_k,J_j[5]=J_d+J_l,J_j[8]=J_e+J_k,J_j[9]=J_f+J_l,J_j[12]=J_e-J_k,J_j[13]=J_f-J_l,J_h&&J_h.transformPointArray(J_j,J_j);var J_n=16+(J_a._byteLength>>2);return J_a.byteLength=J_n<<2,J_a.insertData(J_j,J_n-16),!0},J_o._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J_o}(),J_ra=(function(){function J_i(){}J_m(J_i,"laya.webgl.utils.MatirxArray"),J_i.ArrayMul=function(J_a,J_b,J_c){if(J_a)if(J_b)for(var J_d=NaN,J_e=NaN,J_f=NaN,J_g=NaN,J_h=0;J_h<4;J_h++)J_d=J_a[J_h],J_e=J_a[J_h+4],J_f=J_a[J_h+8],J_g=J_a[J_h+12],J_c[J_h]=J_d*J_b[0]+J_e*J_b[1]+J_f*J_b[2]+J_g*J_b[3],J_c[J_h+4]=J_d*J_b[4]+J_e*J_b[5]+J_f*J_b[6]+J_g*J_b[7],J_c[J_h+8]=J_d*J_b[8]+J_e*J_b[9]+J_f*J_b[10]+J_g*J_b[11],J_c[J_h+12]=J_d*J_b[12]+J_e*J_b[13]+J_f*J_b[14]+J_g*J_b[15];else J_i.copyArray(J_a,J_c);else J_i.copyArray(J_b,J_c)},J_i.copyArray=function(J_a,J_b){if(J_a&&J_b)for(var J_c=0;J_c<J_a.length;J_c++)J_b[J_c]=J_a[J_c]}}(),function(){function J_b(J_a,J_b,J_c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=J_a,this._vb=new J_ta(J_a,35048),J_b&&this._vb._resizeBuffer(J_b,!1),this._ib=new J_sa,J_c&&this._ib._resizeBuffer(J_c,!1)}J_m(J_b,"laya.webgl.utils.Mesh2D");var J_a=J_b.prototype;return J_a.cloneWithNewVB=function(){var J_a=new J_b(this._stride,0,0);return J_a._ib=this._ib,J_a._quadNum=this._quadNum,J_a._attribInfo=this._attribInfo,J_a},J_a.cloneWithNewVBIB=function(){var J_a=new J_b(this._stride,0,0);return J_a._attribInfo=this._attribInfo,J_a},J_a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},J_a.getVBR=function(){return this._vb},J_a.getIBR=function(){return this._ib},J_a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},J_a.createQuadIB=function(J_a){this._quadNum=J_a,this._ib._resizeBuffer(6*J_a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var J_b=this._ib.getUint16Array(),J_c=0,J_d=0,J_e=0;J_e<J_a;J_e++)J_b[J_c++]=J_d,J_b[J_c++]=J_d+2,J_b[J_c++]=J_d+1,J_b[J_c++]=J_d,J_b[J_c++]=J_d+3,J_b[J_c++]=J_d+2,J_d+=4;this._ib.setNeedUpload()},J_a.setAttributes=function(J_a){if(this._attribInfo=J_a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},J_a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},J_a.releaseMesh=function(){},J_a.destroy=function(){},J_a.clearVB=function(){this._vb.clear()},J_b._gvaoid=0,J_b}()),J_ua=function(){function J_e(){}return J_m(J_e,"laya.webgl.utils.RenderState2D"),J_e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},J_e.mat2MatArray=function(J_a,J_b){var J_c=J_a,J_d=J_b;return J_d[0]=J_c.a,J_d[1]=J_c.b,J_d[2]=J_e.EMPTYMAT4_ARRAY[2],J_d[3]=J_e.EMPTYMAT4_ARRAY[3],J_d[4]=J_c.c,J_d[5]=J_c.d,J_d[6]=J_e.EMPTYMAT4_ARRAY[6],J_d[7]=J_e.EMPTYMAT4_ARRAY[7],J_d[8]=J_e.EMPTYMAT4_ARRAY[8],J_d[9]=J_e.EMPTYMAT4_ARRAY[9],J_d[10]=J_e.EMPTYMAT4_ARRAY[10],J_d[11]=J_e.EMPTYMAT4_ARRAY[11],J_d[12]=J_c.tx,J_d[13]=J_c.ty,J_d[14]=J_e.EMPTYMAT4_ARRAY[14],J_d[15]=J_e.EMPTYMAT4_ARRAY[15],J_b},J_e.restoreTempArray=function(){J_e.TEMPMAT4_ARRAY[0]=1,J_e.TEMPMAT4_ARRAY[1]=0,J_e.TEMPMAT4_ARRAY[4]=0,J_e.TEMPMAT4_ARRAY[5]=1,J_e.TEMPMAT4_ARRAY[12]=0,J_e.TEMPMAT4_ARRAY[13]=0},J_e.clear=function(){J_e.worldScissorTest=!1,J_e.worldShaderDefines=null,J_e.worldFilters=null,J_e.worldAlpha=1,J_e.worldClipRect.x=J_e.worldClipRect.y=0,J_e.worldClipRect.width=J_e.width,J_e.worldClipRect.height=J_e.height,J_e.curRenderTarget=null},J_e._MAXSIZE=99999999,J_e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J_e.worldMatrix4=J_e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J_e.worldAlpha=1,J_e.worldScissorTest=!1,J_e.worldFilters=null,J_e.worldShaderDefines=null,J_e.curRenderTarget=null,J_e.width=0,J_e.height=0,J_g(J_e,["worldMatrix",function(){return this.worldMatrix=new J_B},"worldClipRect",function(){return this.worldClipRect=new J_D(0,0,99999999,99999999)}]),J_e}(),J_va=function(){var J_u,J_c;function J_v(J_a,J_b,J_c,J_d,J_e){var J_f=this;function J_g(J_a){var J_b=[],J_c=new J_u(J_b);return J_f._compileToTree(J_c,J_a.split("\n"),0,J_b,J_e),J_c}var J_h=J_n.now();this._VS=J_g(J_b),this._PS=J_g(J_c),this._nameMap=J_d,2<J_n.now()-J_h&&console.log("ShaderCompile use time:"+(J_n.now()-J_h)+"  size:"+J_b.length+"/"+J_c.length)}J_m(J_v,"laya.webgl.utils.ShaderCompile");var J_a=J_v.prototype;return J_a._compileToTree=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m=0,J_n=0,J_o=0,J_p=0;for(J_n=J_c;J_n<J_b.length;J_n++)if(!((J_h=J_b[J_n]).length<1)&&0!==(J_m=J_h.indexOf("//"))){if(0<=J_m&&(J_h=J_h.substr(0,J_m)),J_f=J_l||new J_u(J_d),J_l=null,J_f.text=J_h,J_f.noCompile=!0,0<=(J_m=J_h.indexOf("#"))){for(J_i="#",J_p=J_m+1,J_o=J_h.length;J_p<J_o;J_p++){var J_q=J_h.charAt(J_p);if(" "===J_q||"\t"===J_q||"\r"===J_q||"\n"===J_q||"?"===J_q)break;J_i+=J_q}switch(J_f.name=J_i){case"#ifdef":case"#ifndef":if(J_f.src=J_h,J_f.noCompile=null!=J_h.match(/[!&|()=<>]/),J_f.noCompile?console.log("function():Boolean{return "+J_h.substr(J_m+J_f.name.length)+"}"):(J_k=J_h.replace(/^\s*/,"").split(/\s+/),J_f.setCondition(J_k[1],"#ifdef"===J_i?1:2),J_f.text="//"+J_f.text),J_f.setParent(J_a),J_a=J_f,J_e)for(J_k=J_h.substr(J_p).split(J_v._splitToWordExps3),J_p=0;J_p<J_k.length;J_p++)(J_h=J_k[J_p]).length&&(J_e[J_h]=!0);continue;case"#if":if(J_f.src=J_h,J_f.noCompile=!0,J_f.setParent(J_a),J_a=J_f,J_e)for(J_k=J_h.substr(J_p).split(J_v._splitToWordExps3),J_p=0;J_p<J_k.length;J_p++)(J_h=J_k[J_p]).length&&"defined"!=J_h&&(J_e[J_h]=!0);continue;case"#else":J_f.src=J_h,J_g=(J_a=J_a.parent).childs[J_a.childs.length-1],J_f.noCompile=J_g.noCompile,J_f.noCompile||(J_f.condition=J_g.condition,J_f.conditionType=1==J_g.conditionType?2:1,J_f.text="//"+J_f.text+" "+J_g.text+" "+J_f.conditionType),J_f.setParent(J_a),J_a=J_f;continue;case"#endif":J_g=(J_a=J_a.parent).childs[J_a.childs.length-1],J_f.noCompile=J_g.noCompile,J_f.noCompile||(J_f.text="//"+J_f.text),J_f.setParent(J_a);continue;case"#include":J_k=J_v.splitToWords(J_h,null);var J_r=J_v.includes[J_k[1]];if(!J_r)throw"ShaderCompile error no this include file:"+J_k[1];if((J_m=J_k[0].indexOf("?"))<0){J_f.setParent(J_a),J_h=J_r.getWith("with"==J_k[2]?J_k[3]:null),this._compileToTree(J_f,J_h.split("\n"),0,J_d,J_e),J_f.text="";continue}J_f.setCondition(J_k[0].substr(J_m+1),1),J_f.text=J_r.getWith("with"==J_k[2]?J_k[3]:null);break;case"#import":J_j=(J_k=J_v.splitToWords(J_h,null))[1],J_d.push({node:J_f,file:J_v.includes[J_j],ofs:J_f.text.length});continue}}else{if((J_g=J_a.childs[J_a.childs.length-1])&&!J_g.name){0<J_d.length&&J_v.splitToWords(J_h,J_g),J_l=J_f,J_g.text+="\n"+J_h;continue}0<J_d.length&&J_v.splitToWords(J_h,J_f)}J_f.setParent(J_a)}},J_a.createShader=function(J_a,J_b,J_c){var J_d={},J_e="";if(J_a)for(var J_f in J_a)J_e+="#define "+J_f+"\n",J_d[J_f]=!0;var J_g=this._VS.toscript(J_d,[]),J_h=this._PS.toscript(J_d,[]);return(J_c||J_Ya.create)(J_e+J_g.join("\n"),J_e+J_h.join("\n"),J_b,this._nameMap)},J_v._parseOne=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g={type:J_v.shaderParamsMap[J_c[J_d+1]],name:J_c[J_d+2],size:isNaN(parseInt(J_c[J_d+3]))?1:parseInt(J_c[J_d+3])};return J_f&&("attribute"==J_e?J_a.push(J_g):J_b.push(J_g)),":"==J_c[J_d+3]&&(J_g.type=J_c[J_d+4],J_d+=2),J_d+=2},J_v.addInclude=function(J_a,J_b){if(!J_b||0===J_b.length)throw new Error("add shader include file err:"+J_a);if(J_v.includes[J_a])throw new Error("add shader include file err, has add:"+J_a);J_v.includes[J_a]=new J_c(J_b)},J_v.preGetParams=function(J_a,J_b){var J_c=[J_a,J_b],J_d={},J_e=[],J_f=[],J_g={},J_h=[];J_d.attributes=J_e,J_d.uniforms=J_f,J_d.defines=J_g;for(var J_i=0,J_j=0,J_k=0;J_k<2;J_k++){J_c[J_k]=J_c[J_k].replace(J_v._removeAnnotation,"");var J_l,J_m=J_c[J_k].match(J_v._reg);for(J_i=0,J_j=J_m.length;J_i<J_j;J_i++){var J_n=J_m[J_i];if("attribute"==J_n||"uniform"==J_n)J_i=J_v._parseOne(J_e,J_f,J_m,J_i,J_n,!0);else{if("#define"==J_n){J_h[J_n=J_m[++J_i]]=1;continue}if("#ifdef"==J_n){J_g[J_l=J_m[++J_i]]=J_g[J_l]||[];for(J_i++;J_i<J_j;J_i++)if("attribute"==(J_n=J_m[J_i])||"uniform"==J_n)J_i=J_v._parseOne(J_e,J_f,J_m,J_i,J_n,J_h[J_l]);else if("#else"==J_n)for(J_i++;J_i<J_j;J_i++)if("attribute"==(J_n=J_m[J_i])||"uniform"==J_n)J_i=J_v._parseOne(J_e,J_f,J_m,J_i,J_n,!J_h[J_l]);else if("#endif"==J_n)break}}}}return J_d},J_v.splitToWords=function(J_a,J_b){for(var J_c,J_d,J_e=[],J_f=-1,J_g=0,J_h=J_a.length;J_g<J_h;J_g++)if(J_c=J_a.charAt(J_g),0<=" \t=+-*/&%!<>()'\",;".indexOf(J_c)){if(0<=J_f&&1<J_g-J_f&&(J_d=J_a.substr(J_f,J_g-J_f),J_e.push(J_d)),'"'==J_c||"'"==J_c){var J_i=J_a.indexOf(J_c,J_g+1);if(J_i<0)throw"Sharder err:"+J_a;J_e.push(J_a.substr(J_g+1,J_i-J_g-1)),J_g=J_i,J_f=-1;continue}"("==J_c&&J_b&&0<J_e.length&&(J_d=J_e[J_e.length-1]+";","vec4;main;".indexOf(J_d)<0&&(J_b.useFuns+=J_d)),J_f=-1}else J_f<0&&(J_f=J_g);return J_f<J_h&&1<J_h-J_f&&(J_d=J_a.substr(J_f,J_h-J_f),J_e.push(J_d)),J_e},J_v.IFDEF_NO=0,J_v.IFDEF_YES=1,J_v.IFDEF_ELSE=2,J_v.IFDEF_PARENT=3,J_v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),J_v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),J_v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),J_v.includes={},J_g(J_v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),J_v.__init$=function(){J_u=function(){function J_c(J_a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=J_a}J_m(J_c,"");var J_a=J_c.prototype;return J_a.setParent=function(J_a){J_a.childs.push(this),this.z=J_a.z+1,this.parent=J_a},J_a.setCondition=function(J_a,J_b){J_a&&(this.conditionType=J_b,J_a=J_a.replace(/(\s*$)/g,""),this.condition=function(){return this[J_a]},this.condition.__condition=J_a)},J_a.toscript=function(J_a,J_b){return this._toscript(J_a,J_b,++J_c.__id)},J_a._toscript=function(J_d,J_e,J_f){if(this.childs.length<1&&!this.text)return J_e;J_e.length;if(this.condition){var J_a=!!this.condition.call(J_d);if(2===this.conditionType&&(J_a=!J_a),!J_a)return J_e}if(this.text&&J_e.push(this.text),0<this.childs.length&&this.childs.forEach(function(J_a,J_b,J_c){J_a._toscript(J_d,J_e,J_f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var J_b,J_c=0,J_g=this.includefiles.length;J_c<J_g;J_c++)this.includefiles[J_c].curUseID!=J_f&&0<(J_b=this.includefiles[J_c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[J_c].curUseID=J_f,J_e[0]=J_b+J_e[0]);return J_e},J_c.__id=1,J_c}(),J_c=function(){function J_a(J_a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=J_a;for(var J_b=0,J_c=0,J_d=0;!((J_b=J_a.indexOf("#begin",J_b))<0);){for(J_d=J_b+5;!((J_d=J_a.indexOf("#end",J_d))<0)&&"i"===J_a.charAt(J_d+4);)J_d+=5;if(J_d<0)throw"add include err,no #end:"+J_a;J_c=J_a.indexOf("\n",J_b);var J_e=J_v.splitToWords(J_a.substr(J_b,J_c-J_b),null);"code"==J_e[1]?this.codes[J_e[2]]=J_a.substr(J_c+1,J_d-J_c-1):"function"==J_e[1]&&(J_c=J_a.indexOf("function",J_b),J_c+="function".length,this.funs[J_e[3]]=J_a.substr(J_c+1,J_d-J_c-1),this.funnames+=J_e[3]+";"),J_b=J_d+1}}J_m(J_a,"");var J_b=J_a.prototype;return J_b.getWith=function(J_a){var J_b=J_a?this.codes[J_a]:this.script;if(!J_b)throw"get with error:"+J_a;return J_b},J_b.getFunsScript=function(J_a){var J_b="";for(var J_c in this.funs)0<=J_a.indexOf(J_c+";")&&(J_b+=this.funs[J_c]);return J_b},J_a}()},J_v}(),J_wa=function(){function J_g(){}return J_m(J_g,"laya.webgl.WebGL"),J_g._uint8ArraySlice=function(){for(var J_a=this.length,J_b=new Uint8Array(this.length),J_c=0;J_c<J_a;J_c++)J_b[J_c]=this[J_c];return J_b},J_g._float32ArraySlice=function(){for(var J_a=this.length,J_b=new Float32Array(this.length),J_c=0;J_c<J_a;J_c++)J_b[J_c]=this[J_c];return J_b},J_g._uint16ArraySlice=function(J_a){var J_b,J_c=arguments,J_d=0,J_e=0;if(0===J_c.length)for(J_d=this.length,J_b=new Uint16Array(J_d),J_e=0;J_e<J_d;J_e++)J_b[J_e]=this[J_e];else if(2===J_c.length){var J_f=J_c[0],J_g=J_c[1];if(J_f<J_g)for(J_d=J_g-J_f,J_b=new Uint16Array(J_d),J_e=J_f;J_e<J_g;J_e++)J_b[J_e-J_f]=this[J_e];else J_b=new Uint16Array(0)}return J_b},J_g.expandContext=function(){var J_a=J_e.prototype,J_b=CanvasRenderingContext2D.prototype;J_b.fillTrangles=J_a.fillTrangles,J_Za.__int__(null),J_b.setIBVB=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){void 0===J_i&&(J_i=0),void 0===J_j&&(J_j=0),null===J_c&&(this._ib=this._ib||J_sa.QuadrangleIB,J_c=this._ib,J_qa.expandIBQuadrangle(J_c,J_d._byteLength/64+8)),this._setIBVB(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j)},J_b.fillTrangles=function(J_a,J_b,J_c,J_d,J_e){this._curMat=this._curMat||J_B.create(),this._vb=this._vb||J_ta.create(),this._ib||(this._ib=J_sa.create(),J_qa.fillIBQuadrangle(this._ib,J_g/4));var J_f=this._vb,J_g=J_d.length>>4;J_qa.fillTranglesVB(J_f,J_b,J_c,J_d,J_e||this._curMat,0,0),J_qa.expandIBQuadrangle(this._ib,J_f._byteLength/64+8);var J_h=new J_Aa(1,0);J_h.textureHost=J_a;var J_i=new J__a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");J_f._vertType=3,this._setIBVB(J_b,J_c,this._ib,J_f,6*J_g,J_e,J_i,J_h,0,0)}},J_g.enable=function(){if(J_n.__init__(),J_r.isConchApp&&!J_r.isConchWebGL)return J_x.skinAniSprite=function(){return new J_aa},J_g.expandContext(),!1;if(J_x.getWebGLContext=function(J_a){for(var J_b,J_c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],J_d=0;J_d<J_c.length;J_d++){try{J_b=J_a.getContext(J_c[J_d],{stencil:J_z.isStencil,alpha:J_z.isAlpha,antialias:J_z.isAntialias,premultipliedAlpha:J_z.premultipliedAlpha,preserveDrawingBuffer:J_z.preserveDrawingBuffer})}catch(J_a){}if(J_b)return J_b}return null},null==(J_g.mainContext=J_x.getWebGLContext(J_r._mainCanvas)))return!1;if(J_r.isWebGL)return!0;J_p.create=function(J_a,J_b){return new J_ab(J_a,J_b)},J_q.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){return new J_Xa(J_a,J_b,J_c,J_d,J_e,J_f,J_g)},J_r.WebGL=J_g,J_r.isWebGL=!0,J_na.__init__(),J_x.createRenderSprite=function(J_a,J_b){return new J_Ba(J_a,J_b)},J_x.createWebGLContext2D=function(J_a){return new J_za(J_a)},J_x.changeWebGLSize=function(J_a,J_b){laya.webgl.WebGL.onStageResize(J_a,J_b)},J_x.createGraphics=function(){return new J_ya};var J_a=J_x.createFilterAction;return J_x.createFilterAction=J_a||function(J_a){return new J_Ca},J_x.clear=function(J_a){J_ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var J_b=J_r.context.ctx,J_c=0==J_b._submits._length||J_z.preserveDrawingBuffer?J_o.create(J_a)._color:J_F._wgColor;J_c&&J_b.clearBG(J_c[0],J_c[1],J_c[2],J_c[3]),J_ua.clear()},J_x.addToAtlas=function(J_a,J_b){void 0===J_b&&(J_b=!1);var J_c=J_a.bitmap;J_r.optimizeTextureMemory(J_a.url,J_a)?J_y.__typeof(J_c,"laya.webgl.resource.IMergeAtlasBitmap")&&J_c.allowMerageInAtlas&&J_c.on("recovered",J_a,J_a.addTextureToAtlas):J_c.enableMerageInAtlas=!1},J_x.isAtlas=function(J_a){return J_a instanceof laya.webgl.atlas.AtlasWebGLCanvas},J_Q._enable(),J_x.beginFlush=function(){for(var J_a=J_Q.instance,J_b=J_a.getAtlaserCount(),J_c=0;J_c<J_b;J_c++){var J_d=J_a.getAtlaserByIndex(J_c).texture;J_d._flashCacheImageNeedFlush&&J_x.flashFlushImage(J_d)}},J_x.drawToCanvas=function(J_a,J_b,J_c,J_d,J_e,J_f){(J_c<=0||J_d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),J_c|=0,J_d|=0,J_e|=0,J_f|=0;var J_g=J_Ma.create(J_c,J_d,6408,5121,0,!1);J_g.start(),J_g.clear(0,0,0,0),J_r.context.clear(),J_u.renders[J_b]._fun(J_a,J_r.context,J_e,J_ua.height-J_d+J_f),J_r.context.flush(),J_g.end();var J_h=J_g.getData(0,0,J_c,J_d);if(J_g.recycle(),J_h.byteLength==J_c*J_d*4){var J_i=new J_Ua;J_i._canvas=J_n.createElement("canvas"),J_i.size(J_c,J_d);var J_j=J_i._canvas.getContext("2d");J_n.canvas.size(J_c,J_d);var J_k=J_n.context,J_l=J_k.createImageData(J_c,J_d);return J_l.data.set(new Uint8ClampedArray(J_h.buffer)),J_i._imgData=J_l,J_k.putImageData(J_l,0,0),J_j.save(),J_j.translate(0,J_d),J_j.scale(1,-1),J_j.drawImage(J_n.canvas.source,0,0),J_j.restore(),J_i}console.log("drawToCanvas error: w:"+J_c+",h:"+J_d+",datalen:"+J_h.byteLength)},J_x.createFilterAction=function(J_a){var J_b;switch(J_a){case 32:J_b=new J_Ca}return J_b},J_x.addTextureToAtlas=function(J_a){J_a._uvID++,J_Q._atlasRestore++,J_a.bitmap.enableMerageInAtlas&&J_Q.instance.addToAtlas(J_a)},J_x.getTexturePixels=function(J_a,J_b,J_c,J_d,J_e){J_r.context.ctx.clear();var J_f=new J_E;J_f.graphics.drawTexture(J_a,-J_b,-J_c);var J_g=J_Ma.create(J_d,J_e);J_g.start(),J_g.clear(0,0,0,0),J_f.render(J_r.context,0,0),J_r.context.ctx.flush(),J_g.end();for(var J_h=J_g.getData(0,0,J_d,J_e),J_i=[],J_j=0,J_k=J_e-1;0<=J_k;J_k--)for(var J_l=0;J_l<J_d;J_l++)J_j=4*(J_k*J_d+J_l),J_i.push(J_h[J_j]),J_i.push(J_h[J_j+1]),J_i.push(J_h[J_j+2]),J_i.push(J_h[J_j+3]);return J_i},J_x.skinAniSprite=function(){return new J_aa},J_j.create=function(J_a,J_b){var J_c=new J_Ua;return J_c._imgData=J_b,J_c.flipY=!1,J_c},J_A._filterStart=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_a.getValue("bounds"),J_g=J_Ma.create(J_f.width,J_f.height);if(J_g.start(),J_g.clear(0,0,0,0),J_a.addValue("src",J_g),J_a.addValue("ScissorTest",J_ua.worldScissorTest),J_ua.worldScissorTest){var J_h=new J_D;J_h.copyFrom(J_c.ctx._clipRect),J_a.addValue("clipRect",J_h),J_ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},J_A._filterEnd=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_a.getValue("bounds");J_a.getValue("src").end();var J_g=J_Ma.create(J_f.width,J_f.height);J_g.start(),J_g.clear(0,0,0,0),J_a.addValue("out",J_g),J_b._set$P("_filterCache",J_g),J_b._set$P("_isHaveGlowFilter",J_a.getValue("_isHaveGlowFilter"))},J_A._EndTarget=function(J_a,J_b){if(J_a.getValue("src").recycle(),J_a.getValue("out").end(),J_a.getValue("ScissorTest")){J_ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),J_b.ctx.save();var J_c=J_a.getValue("clipRect");J_b.ctx.clipRect(J_c.x,J_c.y,J_c.width,J_c.height)}},J_A._useSrc=function(J_a){var J_b=J_a.getValue("out");J_b.end(),(J_b=J_a.getValue("src")).start(),J_b.clear(0,0,0,0)},J_A._endSrc=function(J_a){J_a.getValue("src").end()},J_A._useOut=function(J_a){var J_b=J_a.getValue("src");J_b.end(),(J_b=J_a.getValue("out")).start(),J_b.clear(0,0,0,0)},J_A._endOut=function(J_a){J_a.getValue("out").end()},J_A._recycleScope=function(J_a){J_a.recycle()},J_A._filter=function(J_a,J_b,J_c,J_d){var J_e=this._next;if(J_e){var J_f,J_g,J_h=J_a.filters,J_i=J_h.length;if(1==J_i&&32==J_h[0].type)return J_b.ctx.save(),J_b.ctx.setFilters([J_h[0]]),J_e._fun.call(J_e,J_a,J_b,J_c,J_d),void J_b.ctx.restore();var J_j=J_ha.create(),J_k=J_C.TEMP,J_l=J_b.ctx._getTransformMatrix(),J_m=J_B.create();J_l.copyTo(J_m);var J_n=0,J_o=0,J_p=!1,J_q=J_a._$P._filterCache?J_a._$P._filterCache:null;if(!J_q||J_a._repaint){J_p=J_a._isHaveGlowFilter(),J_j.addValue("_isHaveGlowFilter",J_p),J_p&&(J_n=50,J_o=25),(J_g=new J_D).copyFrom(J_a.getSelfBounds()),J_g.x+=J_a.x,J_g.y+=J_a.y,J_g.x-=J_a.pivotX+4,J_g.y-=J_a.pivotY+4;var J_r=J_g.x,J_u=J_g.y;if(J_g.width+=J_n+8,J_g.height+=J_n+8,J_k.x=J_g.x*J_m.a+J_g.y*J_m.c,J_k.y=J_g.y*J_m.d+J_g.x*J_m.b,J_g.x=J_k.x,J_g.y=J_k.y,J_k.x=J_g.width*J_m.a+J_g.height*J_m.c,J_k.y=J_g.height*J_m.d+J_g.width*J_m.b,J_g.width=J_k.x,J_g.height=J_k.y,J_g.width<=0||J_g.height<=0)return;J_q&&J_q.recycle(),J_j.addValue("bounds",J_g);var J_v=J_ga.create([J_j,J_a,J_b,0,0],J_A._filterStart);J_b.addRenderObject(J_v),J_b.ctx._renderKey=0,J_b.ctx._shader2D.glTexture=null;var J_w=J_a.x-J_r+J_o,J_x=J_a.y-J_u+J_o;J_e._fun.call(J_e,J_a,J_b,J_w,J_x),J_v=J_ga.create([J_j,J_a,J_b,0,0],J_A._filterEnd),J_b.addRenderObject(J_v);for(var J_y=0;J_y<J_i;J_y++){0!=J_y&&(J_v=J_ga.create([J_j],J_A._useSrc),J_b.addRenderObject(J_v),J_f=J_Aa.create(1,0),J_B.TEMP.identity(),J_b.ctx.drawTarget(J_j,0,0,J_g.width,J_g.height,J_B.TEMP,"out",J_f,null,J_S.TOINT.overlay),J_v=J_ga.create([J_j],J_A._useOut),J_b.addRenderObject(J_v)),J_h[J_y].action.apply3d(J_j,J_a,J_b,0,0)}J_v=J_ga.create([J_j,J_b],J_A._EndTarget),J_b.addRenderObject(J_v)}else{if((J_p=!!J_a._$P._isHaveGlowFilter&&J_a._$P._isHaveGlowFilter)&&(J_n=50,J_o=25),(J_g=J_a.getBounds()).width<=0||J_g.height<=0)return;J_g.width+=J_n,J_g.height+=J_n,J_k.x=J_g.x*J_m.a+J_g.y*J_m.c,J_k.y=J_g.y*J_m.d+J_g.x*J_m.b,J_g.x=J_k.x,J_g.y=J_k.y,J_k.x=J_g.width*J_m.a+J_g.height*J_m.c,J_k.y=J_g.height*J_m.d+J_g.width*J_m.b,J_g.width=J_k.x,J_g.height=J_k.y,J_j.addValue("out",J_q)}J_c=J_c-J_o-J_a.x,J_d=J_d-J_o-J_a.y,J_k.setTo(J_c,J_d),J_m.transformPoint(J_k),J_c=J_k.x+J_g.x,J_d=J_k.y+J_g.y,J_f=J_Aa.create(1,0),J_B.TEMP.identity(),J_b.ctx.drawTarget(J_j,J_c,J_d,J_g.width,J_g.height,J_B.TEMP,"out",J_f,null,J_S.TOINT.overlay),J_v=J_ga.create([J_j],J_A._recycleScope),J_b.addRenderObject(J_v),J_m.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=J_g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=J_g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=J_g._uint8ArraySlice),!0},J_g.onStageResize=function(J_a,J_b){null!=J_g.mainContext&&(J_g.mainContext.viewport(0,0,J_a,J_b),J_ua.width=J_a,J_ua.height=J_b)},J_g.onInvalidGLRes=function(){J_Q.instance.freeAll(),J_w.releaseContentManagers(!0),J_g.doNodeRepaint(J_y.stage),J_g.mainContext.viewport(0,0,J_ua.width,J_ua.height),J_y.stage.event("devicelost")},J_g.doNodeRepaint=function(J_a){0==J_a.numChildren&&J_a.repaint();for(var J_b=0;J_b<J_a.numChildren;J_b++)J_g.doNodeRepaint(J_a.getChildAt(J_b))},J_g.init=function(J_a,J_b,J_c){J_g.mainCanvas=J_a,J_j._createContext=function(J_a){return new J_za(J_a)},J_Ua._createContext=function(J_a){return new J_za(J_a)};var J_d=laya.webgl.WebGL.mainContext;if(null!=J_d.getShaderPrecisionFormat){var J_e=J_d.getShaderPrecisionFormat(35633,36338),J_f=J_d.getShaderPrecisionFormat(35632,36338);J_g.shaderHighPrecision=!(!J_e.precision||!J_f.precision)}else J_g.shaderHighPrecision=!1;if(J_d.deleteTexture1=J_d.deleteTexture,J_d.deleteTexture=function(J_a){J_a==J_xa.curBindTexValue&&(J_xa.curBindTexValue=null),J_d.deleteTexture1(J_a)},J_g.onStageResize(J_b,J_c),null==J_g.mainContext)throw new Error("webGL getContext err!");J_I.__init__(),J_Q.__init__(),J_Ea.__init__(),J_fa.__init__(),J_za.__init__(),J_Aa.__init__(),J_s.__init__(),J_Za.__int__(J_d),J_S._init_(J_d),J_r.isConchApp&&conch.setOnInvalidGLRes(J_g.onInvalidGLRes)},J_g.mainCanvas=null,J_g.mainContext=null,J_g.antialias=!0,J_g.shaderHighPrecision=!1,J_g._bg_null=[0,0,0,0],J_g}(),J_xa=function(){function J_d(){}return J_m(J_d,"laya.webgl.WebGLContext"),J_d.UseProgram=function(J_a){return J_d._useProgram!==J_a&&(J_wa.mainContext.useProgram(J_a),J_d._useProgram=J_a,!0)},J_d.setDepthTest=function(J_a,J_b){J_b!==J_d._depthTest&&((J_d._depthTest=J_b)?J_a.enable(2929):J_a.disable(2929))},J_d.setDepthMask=function(J_a,J_b){J_b!==J_d._depthMask&&(J_d._depthMask=J_b,J_a.depthMask(J_b))},J_d.setDepthFunc=function(J_a,J_b){J_b!==J_d._depthFunc&&(J_d._depthFunc=J_b,J_a.depthFunc(J_b))},J_d.setBlend=function(J_a,J_b){J_b!==J_d._blend&&((J_d._blend=J_b)?J_a.enable(3042):J_a.disable(3042))},J_d.setBlendFunc=function(J_a,J_b,J_c){(J_b!==J_d._sFactor||J_c!==J_d._dFactor)&&(J_d._sFactor=J_b,J_d._dFactor=J_c,J_a.blendFunc(J_b,J_c))},J_d.setCullFace=function(J_a,J_b){J_b!==J_d._cullFace&&((J_d._cullFace=J_b)?J_a.enable(2884):J_a.disable(2884))},J_d.setFrontFace=function(J_a,J_b){J_b!==J_d._frontFace&&(J_d._frontFace=J_b,J_a.frontFace(J_b))},J_d.bindTexture=function(J_a,J_b,J_c){J_a.bindTexture(J_b,J_c),J_d.curBindTexTarget=J_b,J_d.curBindTexValue=J_c},J_d.DEPTH_BUFFER_BIT=256,J_d.STENCIL_BUFFER_BIT=1024,J_d.COLOR_BUFFER_BIT=16384,J_d.POINTS=0,J_d.LINES=1,J_d.LINE_LOOP=2,J_d.LINE_STRIP=3,J_d.TRIANGLES=4,J_d.TRIANGLE_STRIP=5,J_d.TRIANGLE_FAN=6,J_d.ZERO=0,J_d.ONE=1,J_d.SRC_COLOR=768,J_d.ONE_MINUS_SRC_COLOR=769,J_d.SRC_ALPHA=770,J_d.ONE_MINUS_SRC_ALPHA=771,J_d.DST_ALPHA=772,J_d.ONE_MINUS_DST_ALPHA=773,J_d.DST_COLOR=774,J_d.ONE_MINUS_DST_COLOR=775,J_d.SRC_ALPHA_SATURATE=776,J_d.FUNC_ADD=32774,J_d.BLEND_EQUATION=32777,J_d.BLEND_EQUATION_RGB=32777,J_d.BLEND_EQUATION_ALPHA=34877,J_d.FUNC_SUBTRACT=32778,J_d.FUNC_REVERSE_SUBTRACT=32779,J_d.BLEND_DST_RGB=32968,J_d.BLEND_SRC_RGB=32969,J_d.BLEND_DST_ALPHA=32970,J_d.BLEND_SRC_ALPHA=32971,J_d.CONSTANT_COLOR=32769,J_d.ONE_MINUS_CONSTANT_COLOR=32770,J_d.CONSTANT_ALPHA=32771,J_d.ONE_MINUS_CONSTANT_ALPHA=32772,J_d.BLEND_COLOR=32773,J_d.ARRAY_BUFFER=34962,J_d.ELEMENT_ARRAY_BUFFER=34963,J_d.ARRAY_BUFFER_BINDING=34964,J_d.ELEMENT_ARRAY_BUFFER_BINDING=34965,J_d.STREAM_DRAW=35040,J_d.STATIC_DRAW=35044,J_d.DYNAMIC_DRAW=35048,J_d.BUFFER_SIZE=34660,J_d.BUFFER_USAGE=34661,J_d.CURRENT_VERTEX_ATTRIB=34342,J_d.FRONT=1028,J_d.BACK=1029,J_d.CULL_FACE=2884,J_d.FRONT_AND_BACK=1032,J_d.BLEND=3042,J_d.DITHER=3024,J_d.STENCIL_TEST=2960,J_d.DEPTH_TEST=2929,J_d.SCISSOR_TEST=3089,J_d.POLYGON_OFFSET_FILL=32823,J_d.SAMPLE_ALPHA_TO_COVERAGE=32926,J_d.SAMPLE_COVERAGE=32928,J_d.NO_ERROR=0,J_d.INVALID_ENUM=1280,J_d.INVALID_VALUE=1281,J_d.INVALID_OPERATION=1282,J_d.OUT_OF_MEMORY=1285,J_d.CW=2304,J_d.CCW=2305,J_d.LINE_WIDTH=2849,J_d.ALIASED_POINT_SIZE_RANGE=33901,J_d.ALIASED_LINE_WIDTH_RANGE=33902,J_d.CULL_FACE_MODE=2885,J_d.FRONT_FACE=2886,J_d.DEPTH_RANGE=2928,J_d.DEPTH_WRITEMASK=2930,J_d.DEPTH_CLEAR_VALUE=2931,J_d.DEPTH_FUNC=2932,J_d.STENCIL_CLEAR_VALUE=2961,J_d.STENCIL_FUNC=2962,J_d.STENCIL_FAIL=2964,J_d.STENCIL_PASS_DEPTH_FAIL=2965,J_d.STENCIL_PASS_DEPTH_PASS=2966,J_d.STENCIL_REF=2967,J_d.STENCIL_VALUE_MASK=2963,J_d.STENCIL_WRITEMASK=2968,J_d.STENCIL_BACK_FUNC=34816,J_d.STENCIL_BACK_FAIL=34817,J_d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,J_d.STENCIL_BACK_PASS_DEPTH_PASS=34819,J_d.STENCIL_BACK_REF=36003,J_d.STENCIL_BACK_VALUE_MASK=36004,J_d.STENCIL_BACK_WRITEMASK=36005,J_d.VIEWPORT=2978,J_d.SCISSOR_BOX=3088,J_d.COLOR_CLEAR_VALUE=3106,J_d.COLOR_WRITEMASK=3107,J_d.UNPACK_ALIGNMENT=3317,J_d.PACK_ALIGNMENT=3333,J_d.MAX_TEXTURE_SIZE=3379,J_d.MAX_VIEWPORT_DIMS=3386,J_d.SUBPIXEL_BITS=3408,J_d.RED_BITS=3410,J_d.GREEN_BITS=3411,J_d.BLUE_BITS=3412,J_d.ALPHA_BITS=3413,J_d.DEPTH_BITS=3414,J_d.STENCIL_BITS=3415,J_d.POLYGON_OFFSET_UNITS=10752,J_d.POLYGON_OFFSET_FACTOR=32824,J_d.TEXTURE_BINDING_2D=32873,J_d.SAMPLE_BUFFERS=32936,J_d.SAMPLES=32937,J_d.SAMPLE_COVERAGE_VALUE=32938,J_d.SAMPLE_COVERAGE_INVERT=32939,J_d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,J_d.COMPRESSED_TEXTURE_FORMATS=34467,J_d.DONT_CARE=4352,J_d.FASTEST=4353,J_d.NICEST=4354,J_d.GENERATE_MIPMAP_HINT=33170,J_d.BYTE=5120,J_d.UNSIGNED_BYTE=5121,J_d.SHORT=5122,J_d.UNSIGNED_SHORT=5123,J_d.INT=5124,J_d.UNSIGNED_INT=5125,J_d.FLOAT=5126,J_d.DEPTH_COMPONENT=6402,J_d.ALPHA=6406,J_d.RGB=6407,J_d.RGBA=6408,J_d.LUMINANCE=6409,J_d.LUMINANCE_ALPHA=6410,J_d.UNSIGNED_SHORT_4_4_4_4=32819,J_d.UNSIGNED_SHORT_5_5_5_1=32820,J_d.UNSIGNED_SHORT_5_6_5=33635,J_d.FRAGMENT_SHADER=35632,J_d.VERTEX_SHADER=35633,J_d.MAX_VERTEX_ATTRIBS=34921,J_d.MAX_VERTEX_UNIFORM_VECTORS=36347,J_d.MAX_VARYING_VECTORS=36348,J_d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,J_d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,J_d.MAX_TEXTURE_IMAGE_UNITS=34930,J_d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,J_d.SHADER_TYPE=35663,J_d.DELETE_STATUS=35712,J_d.LINK_STATUS=35714,J_d.VALIDATE_STATUS=35715,J_d.ATTACHED_SHADERS=35717,J_d.ACTIVE_UNIFORMS=35718,J_d.ACTIVE_ATTRIBUTES=35721,J_d.SHADING_LANGUAGE_VERSION=35724,J_d.CURRENT_PROGRAM=35725,J_d.NEVER=512,J_d.LESS=513,J_d.EQUAL=514,J_d.LEQUAL=515,J_d.GREATER=516,J_d.NOTEQUAL=517,J_d.GEQUAL=518,J_d.ALWAYS=519,J_d.KEEP=7680,J_d.REPLACE=7681,J_d.INCR=7682,J_d.DECR=7683,J_d.INVERT=5386,J_d.INCR_WRAP=34055,J_d.DECR_WRAP=34056,J_d.VENDOR=7936,J_d.RENDERER=7937,J_d.VERSION=7938,J_d.NEAREST=9728,J_d.LINEAR=9729,J_d.NEAREST_MIPMAP_NEAREST=9984,J_d.LINEAR_MIPMAP_NEAREST=9985,J_d.NEAREST_MIPMAP_LINEAR=9986,J_d.LINEAR_MIPMAP_LINEAR=9987,J_d.TEXTURE_MAG_FILTER=10240,J_d.TEXTURE_MIN_FILTER=10241,J_d.TEXTURE_WRAP_S=10242,J_d.TEXTURE_WRAP_T=10243,J_d.TEXTURE_2D=3553,J_d.TEXTURE=5890,J_d.TEXTURE_CUBE_MAP=34067,J_d.TEXTURE_BINDING_CUBE_MAP=34068,J_d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,J_d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,J_d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,J_d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,J_d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,J_d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,J_d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,J_d.TEXTURE0=33984,J_d.TEXTURE1=33985,J_d.TEXTURE2=33986,J_d.TEXTURE3=33987,J_d.TEXTURE4=33988,J_d.TEXTURE5=33989,J_d.TEXTURE6=33990,J_d.TEXTURE7=33991,J_d.TEXTURE8=33992,J_d.TEXTURE9=33993,J_d.TEXTURE10=33994,J_d.TEXTURE11=33995,J_d.TEXTURE12=33996,J_d.TEXTURE13=33997,J_d.TEXTURE14=33998,J_d.TEXTURE15=33999,J_d.TEXTURE16=34e3,J_d.TEXTURE17=34001,J_d.TEXTURE18=34002,J_d.TEXTURE19=34003,J_d.TEXTURE20=34004,J_d.TEXTURE21=34005,J_d.TEXTURE22=34006,J_d.TEXTURE23=34007,J_d.TEXTURE24=34008,J_d.TEXTURE25=34009,J_d.TEXTURE26=34010,J_d.TEXTURE27=34011,J_d.TEXTURE28=34012,J_d.TEXTURE29=34013,J_d.TEXTURE30=34014,J_d.TEXTURE31=34015,J_d.ACTIVE_TEXTURE=34016,J_d.REPEAT=10497,J_d.CLAMP_TO_EDGE=33071,J_d.MIRRORED_REPEAT=33648,J_d.FLOAT_VEC2=35664,J_d.FLOAT_VEC3=35665,J_d.FLOAT_VEC4=35666,J_d.INT_VEC2=35667,J_d.INT_VEC3=35668,J_d.INT_VEC4=35669,J_d.BOOL=35670,J_d.BOOL_VEC2=35671,J_d.BOOL_VEC3=35672,J_d.BOOL_VEC4=35673,J_d.FLOAT_MAT2=35674,J_d.FLOAT_MAT3=35675,J_d.FLOAT_MAT4=35676,J_d.SAMPLER_2D=35678,J_d.SAMPLER_CUBE=35680,J_d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,J_d.VERTEX_ATTRIB_ARRAY_SIZE=34339,J_d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,J_d.VERTEX_ATTRIB_ARRAY_TYPE=34341,J_d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,J_d.VERTEX_ATTRIB_ARRAY_POINTER=34373,J_d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,J_d.COMPILE_STATUS=35713,J_d.LOW_FLOAT=36336,J_d.MEDIUM_FLOAT=36337,J_d.HIGH_FLOAT=36338,J_d.LOW_INT=36339,J_d.MEDIUM_INT=36340,J_d.HIGH_INT=36341,J_d.FRAMEBUFFER=36160,J_d.RENDERBUFFER=36161,J_d.RGBA4=32854,J_d.RGB5_A1=32855,J_d.RGB565=36194,J_d.DEPTH_COMPONENT16=33189,J_d.STENCIL_INDEX=6401,J_d.STENCIL_INDEX8=36168,J_d.DEPTH_STENCIL=34041,J_d.RENDERBUFFER_WIDTH=36162,J_d.RENDERBUFFER_HEIGHT=36163,J_d.RENDERBUFFER_INTERNAL_FORMAT=36164,J_d.RENDERBUFFER_RED_SIZE=36176,J_d.RENDERBUFFER_GREEN_SIZE=36177,J_d.RENDERBUFFER_BLUE_SIZE=36178,J_d.RENDERBUFFER_ALPHA_SIZE=36179,J_d.RENDERBUFFER_DEPTH_SIZE=36180,J_d.RENDERBUFFER_STENCIL_SIZE=36181,J_d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,J_d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,J_d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,J_d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,J_d.COLOR_ATTACHMENT0=36064,J_d.DEPTH_ATTACHMENT=36096,J_d.STENCIL_ATTACHMENT=36128,J_d.DEPTH_STENCIL_ATTACHMENT=33306,J_d.NONE=0,J_d.FRAMEBUFFER_COMPLETE=36053,J_d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,J_d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,J_d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,J_d.FRAMEBUFFER_UNSUPPORTED=36061,J_d.FRAMEBUFFER_BINDING=36006,J_d.RENDERBUFFER_BINDING=36007,J_d.MAX_RENDERBUFFER_SIZE=34024,J_d.INVALID_FRAMEBUFFER_OPERATION=1286,J_d.UNPACK_FLIP_Y_WEBGL=37440,J_d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,J_d.CONTEXT_LOST_WEBGL=37442,J_d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,J_d.BROWSER_DEFAULT_WEBGL=37444,J_d._useProgram=null,J_d._depthTest=!0,J_d._depthMask=!0,J_d._blend=!1,J_d._cullFace=!1,J_d.curBindTexTarget=null,J_d.curBindTexValue=null,J_g(J_d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),J_d}(),J_ya=function(J_a){function J_b(){J_b.__super.call(this)}J_m(J_b,"laya.webgl.display.GraphicsGL",J_h);var J_c=J_b.prototype;return J_c.setShader=function(J_a){this._saveToCmd(J_r.context._setShader,[J_a])},J_c.setIBVB=function(J_a,J_b,J_c,J_d,J_e,J_f){this._saveToCmd(J_r.context._setIBVB,[J_a,J_b,J_c,J_d,J_e,J_f])},J_c.drawParticle=function(J_a,J_b,J_c){var J_d=J_x.createParticleTemplate2D(J_c);J_d.x=J_a,J_d.y=J_b,this._saveToCmd(J_r.context._drawParticle,[J_d])},J_b}(),J_za=function(J_a){var J_c;function J_P(J_a){this._x=0,this._y=0,this._id=++J_P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,J_P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=J_P.MAXCLIPRECT,this.mOutPoint,this._canvas=J_a,this._canvas._addReference(),J_P._contextcount++,J_r.isFlash?(this._ib=J_sa.create(35044),J_qa.fillIBQuadrangle(this._ib,16)):this._ib=J_sa.QuadrangleIB,this.clear()}J_m(J_P,"laya.webgl.canvas.WebGLContext2D",J_e);var J_b=J_P.prototype;return J_b.setIsMainContext=function(){this._isMain=!0},J_b.clearBG=function(J_a,J_b,J_c,J_d){var J_e=J_wa.mainContext;J_e.clearColor(J_a,J_b,J_c,J_d),J_e.clear(16384)},J_b._getSubmits=function(){return this._submits},J_b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var J_a=0,J_b=this._submits._length;J_a<J_b;J_a++)this._submits[J_a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},J_b.destroy=function(){--J_P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=J_sa.QuadrangleIB&&this._ib.releaseResource()},J_b.clear=function(){this._submits||(this._other=J_c.DEFAULT,this._curMat=J_B.create(),this._vb=J_ta.create(-1),this._submits=[],this._save=[J_Y.Create(this)],this._save.length=10,this._shader2D=new J_s,this._triangleMesh=J_Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=J_c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=J_P.MAXCLIPRECT,this._curSubmit=J_fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=J_T.DEFAULT;for(var J_a=0,J_b=this._submits._length;J_a<J_b;J_a++)this._submits[J_a].releaseRender(),this._submits[J_a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},J_b.size=function(J_a,J_b){if(this._width!=J_a||this._height!=J_b)if(0==J_a||0==J_b){0!=this._vb._byteLength&&(this._width=J_a,this._height=J_b,this._vb.clear(),this._vb.upload());for(var J_c=0,J_d=this._submits._length;J_c<J_d;J_c++)this._submits[J_c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=J_a,this._height=J_b,this._targets&&this._targets.size(J_a,J_b),this._canvas.memorySize-=this._canvas.memorySize;0===J_a&&0===J_b&&this._releaseMem()},J_b._getTransformMatrix=function(){return this._curMat},J_b.translate=function(J_a,J_b){0===J_a&&0===J_b||(J_$.save(this),this._curMat.bTransform&&(J_Z.save(this),this._curMat.transformPointN(J_C.TEMP.setTo(J_a,J_b)),J_a=J_C.TEMP.x,J_b=J_C.TEMP.y),this._x+=J_a,this._y+=J_b)},J_b.save=function(){this._save[this._save._length++]=J_Y.Create(this)},J_b.restore=function(){var J_a=this._save._length;if(!(J_a<1))for(var J_b=J_a-1;0<=J_b;J_b--){var J_c=this._save[J_b];if(J_c.restore(this),J_c.isSaveMark())return void(this._save._length=J_b)}},J_b._fillText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){void 0===J_j&&(J_j=0);var J_k=this._shader2D,J_l=this._curSubmit.shaderValue,J_m=J_e?J_oa.create(J_e):this._other.font;if(J_Q.enabled)J_k.ALPHA!==J_l.ALPHA&&(J_k.glTexture=null),J_na.drawText(this,J_a,J_b,this._curMat,J_m,J_i||this._other.textAlign,J_f,J_g,J_h,J_c,J_d,J_j);else{this._shader2D.defines.getValue();var J_n=J_f?J_o.create(J_f)._color:J_k.colorAdd;J_k.ALPHA===J_l.ALPHA&&J_n===J_k.colorAdd&&J_l.colorAdd===J_k.colorAdd||(J_k.glTexture=null,J_k.colorAdd=J_n),J_na.drawText(this,J_a,J_b,this._curMat,J_m,J_i||this._other.textAlign,J_f,J_g,J_h,J_c,J_d,J_j)}},J_b.fillWords=function(J_a,J_b,J_c,J_d,J_e,J_f){this._fillText(null,J_a,J_b,J_c,J_d,J_e,null,-1,null,J_f)},J_b.fillBorderWords=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._fillBorderText(null,J_a,J_b,J_c,J_d,J_e,J_f,J_g,null)},J_b.fillText=function(J_a,J_b,J_c,J_d,J_e,J_f){this._fillText(J_a,null,J_b,J_c,J_d,J_e,null,-1,J_f)},J_b.strokeText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._fillText(J_a,null,J_b,J_c,J_d,null,J_e,J_f||1,J_g)},J_b.fillBorderText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){this._fillBorderText(J_a,null,J_b,J_c,J_d,J_e,J_f,J_g,J_h)},J_b._fillBorderText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){if(!J_Q.enabled)return this._fillText(J_a,J_b,J_c,J_d,J_e,null,J_g,J_h||1,J_i),void this._fillText(J_a,J_b,J_c,J_d,J_e,J_f,null,-1,J_i);var J_j=this._shader2D,J_k=this._curSubmit.shaderValue;J_j.ALPHA!==J_k.ALPHA&&(J_j.glTexture=null);var J_l=J_e?(J_P._fontTemp.setFont(J_e),J_P._fontTemp):this._other.font;J_na.drawText(this,J_a,J_b,this._curMat,J_l,J_i||this._other.textAlign,J_f,J_g,J_h||1,J_c,J_d,0)},J_b.fillRect=function(J_a,J_b,J_c,J_d,J_e){var J_f=this._vb;if(J_qa.fillRectImgVb(J_f,this._clipRect,J_a,J_b,J_c,J_d,J_K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var J_g=this._shader2D.fillStyle;J_e&&(this._shader2D.fillStyle=J_T.create(J_e));var J_h=this._shader2D,J_i=this._curSubmit.shaderValue;if(J_h.fillStyle!==J_i.fillStyle||J_h.ALPHA!==J_i.ALPHA){J_h.glTexture=null;var J_j=this._curSubmit=J_fa.createSubmit(this,this._ib,J_f,(J_f._byteLength-64)/32*3,J_Aa.create(2,0));J_j.shaderValue.color=J_h.fillStyle._color._color,J_j.shaderValue.ALPHA=J_h.ALPHA,this._submits[this._submits._length++]=J_j}this._curSubmit._numEle+=6,this._shader2D.fillStyle=J_g}},J_b.fillTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){if(J_a.loaded&&J_a.bitmap&&J_a.source){var J_i=this._vb,J_j=J_a.bitmap.width,J_k=J_a.bitmap.height,J_l=J_a.uv,J_m=J_g.x%J_a.width,J_n=J_g.y%J_a.height;if(J_j!=J_h.w||J_k!=J_h.h){if(!J_h.w&&!J_h.h)switch(J_h.oy=J_h.ox=0,J_f){case"repeat":J_h.width=J_d,J_h.height=J_e;break;case"repeat-x":J_h.width=J_d,J_n<0?J_a.height+J_n>J_e?J_h.height=J_e:J_h.height=J_a.height+J_n:(J_h.oy=J_n,J_a.height+J_n>J_e?J_h.height=J_e-J_n:J_h.height=J_a.height);break;case"repeat-y":J_m<0?J_a.width+J_m>J_d?J_h.width=J_d:J_h.width=J_a.width+J_m:(J_h.ox=J_m,J_a.width+J_m>J_d?J_h.width=J_d-J_m:J_h.width=J_a.width),J_h.height=J_e;break;case"no-repeat":J_m<0?J_a.width+J_m>J_d?J_h.width=J_d:J_h.width=J_a.width+J_m:(J_h.ox=J_m,J_a.width+J_m>J_d?J_h.width=J_d-J_m:J_h.width=J_a.width),J_n<0?J_a.height+J_n>J_e?J_h.height=J_e:J_h.height=J_a.height+J_n:(J_h.oy=J_n,J_a.height+J_n>J_e?J_h.height=J_e-J_n:J_h.height=J_a.height);break;default:J_h.width=J_d,J_h.height=J_e}J_h.w=J_j,J_h.h=J_k,J_h.uv=[0,0,J_h.width/J_j,0,J_h.width/J_j,J_h.height/J_k,0,J_h.height/J_k]}if(J_b+=J_h.ox,J_c+=J_h.oy,J_m-=J_h.ox,J_n-=J_h.oy,J_qa.fillRectImgVb(J_i,this._clipRect,J_b,J_c,J_h.width,J_h.height,J_h.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var J_o=J_Ja.create(this,this._ib,J_i,(J_i._byteLength-64)/32*3,J_Aa.create(256,0)),J_p=(this._submits[this._submits._length++]=J_o).shaderValue;J_p.textureHost=J_a;var J_q=J_l[0]*J_j,J_r=J_l[1]*J_k,J_u=(J_l[2]-J_l[0])*J_j,J_v=(J_l[5]-J_l[3])*J_k,J_w=-J_m/J_j,J_x=-J_n/J_k;J_p.u_TexRange[0]=J_q/J_j,J_p.u_TexRange[1]=J_u/J_j,J_p.u_TexRange[2]=J_r/J_k,J_p.u_TexRange[3]=J_v/J_k,J_p.u_offset[0]=J_w,J_p.u_offset[1]=J_x,J_Q.enabled&&!this._isMain&&J_o.addTexture(J_a,(J_i._byteLength>>2)-16),(this._curSubmit=J_o)._renderType=10017,J_o._numEle+=6}}else this.sprite&&J_y.timer.callLater(this,this._repaintSprite)},J_b.setShader=function(J_a){J_V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=J_a},J_b.setFilters=function(J_a){J_V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=J_a,this._curSubmit=J_fa.RENDERBASE,this._renderKey=0,this._drawCount++},J_b.drawTexture=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._drawTextureM(J_a,J_b,J_c,J_d,J_e,J_f,J_g,null,1)},J_b.addTextureVb=function(J_a,J_b,J_c){var J_d=this._curSubmit._vb||this._vb,J_e=J_d._byteLength>>2;J_d.byteLength=J_e+16<<2;for(var J_f=J_d.getFloat32Array(),J_g=0;J_g<16;J_g+=4)J_f[J_e++]=J_a[J_g]+J_b,J_f[J_e++]=J_a[J_g+1]+J_c,J_f[J_e++]=J_a[J_g+2],J_f[J_e++]=J_a[J_g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),J_d._upload=!0},J_b.willDrawTexture=function(J_a,J_b){if(!(J_a.loaded&&J_a.bitmap&&J_a.source))return this.sprite&&J_y.timer.callLater(this,this._repaintSprite),0;var J_c=J_a.bitmap,J_d=J_c.id+this._shader2D.ALPHA*J_b+10016;if(J_d==this._renderKey)return J_d;var J_e=this._shader2D,J_f=J_e.ALPHA,J_g=this._curSubmit.shaderValue;J_e.ALPHA*=J_b,this._renderKey=J_d,this._drawCount++,J_e.glTexture=J_c;var J_h=this._vb,J_i=null,J_j=J_h._byteLength/32*3,J_k=J_g.textureHost&&J_g.textureHost==J_a&&J_g.textureHost.alphaTexture==J_a.alphaTexture;return J_i=J_Ja.create(this,this._ib,J_h,J_j,J_Aa.create(1,0)),(this._submits[this._submits._length++]=J_i).shaderValue.textureHost=J_a,J_i._renderType=10016,J_i._preIsSameTextureShader=10016===this._curSubmit._renderType&&J_e.ALPHA===J_g.ALPHA&&J_k,this._curSubmit=J_i,J_e.ALPHA=J_f,J_d},J_b.drawTextures=function(J_a,J_b,J_c,J_d){if(J_a.loaded&&J_a.bitmap&&J_a.source){var J_e=this._clipRect;if(this._clipRect=J_P.MAXCLIPRECT,this._drawTextureM(J_a,J_b[0],J_b[1],J_a.width,J_a.height,J_c,J_d,null,1)){if(this._clipRect=J_e,J_G.drawCall++,!(J_b.length<4)){for(var J_f=this._curSubmit._vb||this._vb,J_g=this._curMat.a,J_h=this._curMat.d,J_i=2,J_j=J_b.length;J_i<J_j;J_i+=2)J_qa.copyPreImgVb(J_f,(J_b[J_i]-J_b[J_i-2])*J_g,(J_b[J_i+1]-J_b[J_i-1])*J_h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&J_y.timer.callLater(this,this._repaintSprite)},J_b._drawTextureM=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){if(!J_a.loaded||!J_a.source)return this.sprite&&J_y.timer.callLater(this,this._repaintSprite),!1;var J_j=this._curSubmit._vb||this._vb,J_k=J_a.bitmap;J_b+=J_f,J_c+=J_g,this._drawCount++;var J_l=J_k.id+this._shader2D.ALPHA*J_i+10016;if(J_l!=this._renderKey){this._renderKey=J_l;var J_m=this._curSubmit.shaderValue,J_n=this._shader2D,J_o=J_n.ALPHA;J_n.ALPHA*=J_i,J_n.glTexture=J_k;var J_p=this._vb,J_q=null,J_r=J_p._byteLength/32*3,J_u=J_m.textureHost&&J_m.textureHost==J_a&&J_m.textureHost.alphaTexture==J_a.alphaTexture;J_q=J_Ja.create(this,this._ib,J_p,J_r,J_Aa.create(1,0)),(this._submits[this._submits._length++]=J_q).shaderValue.textureHost=J_a,J_q._renderType=10016,J_q._preIsSameTextureShader=10016===this._curSubmit._renderType&&J_n.ALPHA===J_m.ALPHA&&J_u,this._curSubmit=J_q,J_j=this._curSubmit._vb||this._vb,J_n.ALPHA=J_o}return!!J_qa.fillRectImgVb(J_j,this._clipRect,J_b,J_c,J_d||J_a.width,J_e||J_a.height,J_a.uv,J_h||this._curMat,this._x,this._y,0,0)&&(J_Q.enabled&&!this._isMain&&this._curSubmit.addTexture(J_a,(J_j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},J_b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},J_b._drawText=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){var J_k=J_a.bitmap;this._drawCount++;var J_l=J_k.id+this._shader2D.ALPHA+10016;if(J_l!=this._renderKey){this._renderKey=J_l;var J_m=this._curSubmit.shaderValue,J_n=this._shader2D;J_n.glTexture=J_k;var J_o=this._vb,J_p=null,J_q=J_o._byteLength/32*3,J_r=J_m.textureHost&&J_m.textureHost==J_a&&J_m.textureHost.alphaTexture==J_a.alphaTexture;(J_p=J_Q.enabled?J_Ja.create(this,this._ib,J_o,J_q,J_Aa.create(1,0)):J_Ja.create(this,this._ib,J_o,J_q,J_$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&J_n.ALPHA===J_m.ALPHA&&J_r,(this._submits[this._submits._length++]=J_p).shaderValue.textureHost=J_a,J_p._renderType=10016,this._curSubmit=J_p}J_a.active();var J_u=this._curSubmit._vb||this._vb;J_qa.fillRectImgVb(J_u,this._clipRect,J_b+J_g,J_c+J_h,J_d||J_a.width,J_e||J_a.height,J_a.uv,J_f||this._curMat,this._x,this._y,J_i,J_j,!0)&&(J_Q.enabled&&!this._isMain&&this._curSubmit.addTexture(J_a,(J_u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},J_b.drawTextureWithTransform=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){if(J_f){var J_j=this._curMat,J_k=this._x,J_l=this._y;(0!==J_g||0!==J_h)&&(this._x=J_g*J_j.a+J_h*J_j.c,this._y=J_h*J_j.d+J_g*J_j.b),J_f&&J_j.bTransform?(J_B.mul(J_f,J_j,J_P._tmpMatrix),(J_f=J_P._tmpMatrix)._checkTransform()):(this._x+=J_j.tx,this._y+=J_j.ty),this._drawTextureM(J_a,J_b,J_c,J_d,J_e,0,0,J_f,J_i),this._x=J_k,this._y=J_l}else this._drawTextureM(J_a,J_b,J_c,J_d,J_e,J_g,J_h,null,J_i)},J_b.fillQuadrangle=function(J_a,J_b,J_c,J_d,J_e){var J_f=this._curSubmit,J_g=this._vb,J_h=this._shader2D,J_i=J_f.shaderValue;if(this._renderKey=0,J_a.bitmap){var J_j=J_a.bitmap;J_h.glTexture==J_j&&J_h.ALPHA===J_i.ALPHA||(J_h.glTexture=J_j,(J_f=this._curSubmit=J_fa.createSubmit(this,this._ib,J_g,J_g._byteLength/32*3,J_Aa.create(1,0))).shaderValue.glTexture=J_j,this._submits[this._submits._length++]=J_f),J_qa.fillQuadrangleImgVb(J_g,J_b,J_c,J_d,J_a.uv,J_e||this._curMat,this._x,this._y)}else J_f.shaderValue.fillStyle&&J_f.shaderValue.fillStyle.equal(J_a)&&J_h.ALPHA===J_i.ALPHA||(J_h.glTexture=null,(J_f=this._curSubmit=J_fa.createSubmit(this,this._ib,J_g,J_g._byteLength/32*3,J_Aa.create(2,0))).shaderValue.defines.add(2),J_f.shaderValue.fillStyle=J_T.create(J_a),this._submits[this._submits._length++]=J_f),J_qa.fillQuadrangleImgVb(J_g,J_b,J_c,J_d,J_K.DEF_UV,J_e||this._curMat,this._x,this._y);J_f._numEle+=6},J_b.drawTexture2=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){if(0!=J_f){var J_i=this._curMat;if(this._x=J_a*J_i.a+J_b*J_i.c,this._y=J_b*J_i.d+J_a*J_i.b,J_e&&(J_e=J_i.bTransform||J_e.bTransform?(J_B.mul(J_e,J_i,J_P._tmpMatrix),J_P._tmpMatrix):(this._x+=J_e.tx+J_i.tx,this._y+=J_e.ty+J_i.ty,J_B.EMPTY)),1!==J_f||J_g){var J_j=this._shader2D.ALPHA,J_k=this._nBlendType;this._shader2D.ALPHA=J_f,J_g&&(this._nBlendType=J_S.TOINT(J_g)),this._drawTextureM(J_h[0],J_h[1]-J_c,J_h[2]-J_d,J_h[3],J_h[4],0,0,J_e,1),this._shader2D.ALPHA=J_j,this._nBlendType=J_k}else this._drawTextureM(J_h[0],J_h[1]-J_c,J_h[2]-J_d,J_h[3],J_h[4],0,0,J_e,1);this._x=this._y=0}},J_b.drawCanvas=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_a.context;if(this._renderKey=0,J_f._targets)this._submits[this._submits._length++]=J_Ia.create(J_f,0,null),this._curSubmit=J_fa.RENDERBASE,J_f._targets.drawTo(this,J_b,J_c,J_d,J_e);else{var J_g=this._submits[this._submits._length++]=J_Ia.create(J_f,this._shader2D.ALPHA,this._shader2D.filters),J_h=J_d/J_a.width,J_i=J_e/J_a.height,J_j=J_g._matrix;this._curMat.copyTo(J_j),1!=J_h&&1!=J_i&&J_j.scale(J_h,J_i);var J_k=J_j.tx,J_l=J_j.ty;J_j.tx=J_j.ty=0,J_j.transformPoint(J_C.TEMP.setTo(J_b,J_c)),J_j.translate(J_C.TEMP.x+J_k,J_C.TEMP.y+J_l),this._curSubmit=J_fa.RENDERBASE}J_z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=J_f._targets?"yellow":"green",this.strokeRect(J_b-1,J_c-1,J_d+2,J_e+2,1),this.strokeRect(J_b,J_c,J_d,J_e,1),this.restore())},J_b.drawTarget=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){void 0===J_j&&(J_j=-1);var J_k=this._vb;if(J_qa.fillRectImgVb(J_k,this._clipRect,J_b,J_c,J_d,J_e,J_i||J_K.DEF_UV,J_f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var J_l=this._curSubmit=J_la.create(this,this._ib,J_k,(J_k._byteLength-64)/32*3,J_h,J_g);J_l.blendType=-1==J_j?this._nBlendType:J_j,J_l.scope=J_a,this._submits[this._submits._length++]=J_l,this._curSubmit._numEle+=6}},J_b.mixRGBandAlpha=function(J_a){return this._mixRGBandAlpha(J_a,this._shader2D.ALPHA)},J_b._mixRGBandAlpha=function(J_a,J_b){var J_c=(4278190080&J_a)>>>24;return 0!=J_c?J_c*=J_b:J_c=255*J_b,16777215&J_a|J_c<<24},J_b.drawTriangles=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){if(!J_a.loaded||!J_a.source)return this.sprite&&J_y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;J_a.bitmap;var J_k=this._mixRGBandAlpha(4294967295,J_h),J_l=(J_d.length,J_f.length);this._renderKey=-1;var J_m=this._curSubmit=J_Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,J_Aa.create(1,0));return J_m.shaderValue.textureHost=J_a,J_m._renderType=10016,this._submits[this._submits._length++]=J_m,J_g?(J_P._tmpMatrix.a=J_g.a,J_P._tmpMatrix.b=J_g.b,J_P._tmpMatrix.c=J_g.c,J_P._tmpMatrix.d=J_g.d,J_P._tmpMatrix.tx=J_g.tx+J_b,J_P._tmpMatrix.ty=J_g.ty+J_c,J_B.mul(J_P._tmpMatrix,this._curMat,J_P._tmpMatrix)):(J_P._tmpMatrix.a=this._curMat.a,J_P._tmpMatrix.b=this._curMat.b,J_P._tmpMatrix.c=this._curMat.c,J_P._tmpMatrix.d=this._curMat.d,J_P._tmpMatrix.tx=this._curMat.tx+J_b,J_P._tmpMatrix.ty=this._curMat.ty+J_c),this._triangleMesh.addData(J_d,J_e,J_f,J_P._tmpMatrix,J_k,this),this._curSubmit._numEle+=J_l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},J_b.transform=function(J_a,J_b,J_c,J_d,J_e,J_f){J_Z.save(this),J_B.mul(J_B.TEMP.setTo(J_a,J_b,J_c,J_d,J_e,J_f),this._curMat,this._curMat),this._curMat._checkTransform()},J_b.setTransformByMatrix=function(J_a){J_a.copyTo(this._curMat)},J_b.transformByMatrix=function(J_a){J_Z.save(this),J_B.mul(J_a,this._curMat,this._curMat),this._curMat._checkTransform()},J_b.rotate=function(J_a){J_Z.save(this),this._curMat.rotateEx(J_a)},J_b.scale=function(J_a,J_b){J_Z.save(this),this._curMat.scaleEx(J_a,J_b)},J_b.clipRect=function(J_a,J_b,J_c,J_d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var J_e=J_ka.create(4);this.addRenderObject(J_e);var J_f=this._vb,J_g=J_f._byteLength>>2;if(J_qa.fillRectImgVb(J_f,null,J_a,J_b,J_c,J_d,J_K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var J_h=this._curSubmit=J_fa.createSubmit(this,this._ib,J_f,(J_f._byteLength-64)/32*3,J_Aa.create(2,0));J_h.shaderValue.ALPHA=1,this._submits[this._submits._length++]=J_h,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var J_i=J_ka.create(5);this.addRenderObject(J_i);var J_j=J_f.getFloat32Array(),J_k=Math.min(Math.min(Math.min(J_j[0+J_g],J_j[4+J_g]),J_j[8+J_g]),J_j[12+J_g]),J_l=Math.max(Math.max(Math.max(J_j[0+J_g],J_j[4+J_g]),J_j[8+J_g]),J_j[12+J_g]),J_m=Math.min(Math.min(Math.min(J_j[1+J_g],J_j[5+J_g]),J_j[9+J_g]),J_j[13+J_g]),J_n=Math.max(Math.max(Math.max(J_j[1+J_g],J_j[5+J_g]),J_j[9+J_g]),J_j[13+J_g]);J_X.save(this,J_i,J_a,J_b,J_c,J_d,J_k,J_m,J_l-J_k,J_n-J_m),this._curSubmit=J_fa.RENDERBASE}else{J_c*=this._curMat.a,J_d*=this._curMat.d;var J_o=J_C.TEMP;this._curMat.transformPoint(J_o.setTo(J_a,J_b)),J_c<0&&(J_o.x=J_o.x+J_c,J_c=-J_c),J_d<0&&(J_o.y=J_o.y+J_d,J_d=-J_d),this._renderKey=0;var J_p=this._curSubmit=J_ja.create(this);(this._submits[this._submits._length++]=J_p).submitIndex=this._submits._length,J_p.submitLength=9999999,J_W.save(this,J_p);var J_q=this._clipRect,J_r=J_q.x,J_u=J_q.y,J_v=J_o.x+J_c,J_w=J_o.y+J_d;J_r<J_o.x&&(J_q.x=J_o.x),J_u<J_o.y&&(J_q.y=J_o.y),J_q.width=Math.min(J_v,J_r+J_q.width)-J_q.x,J_q.height=Math.min(J_w,J_u+J_q.height)-J_q.y,this._shader2D.glTexture=null,J_p.clipRect.copyFrom(J_q),this._curSubmit=J_fa.RENDERBASE}},J_b.setIBVB=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k){if(void 0===J_i&&(J_i=0),void 0===J_j&&(J_j=0),void 0===J_k&&(J_k=0),null===J_c){if(J_r.isFlash){var J_l=J_d;J_l._selfIB||(J_l._selfIB=J_sa.create(35044)),J_l._selfIB.clear(),J_c=J_l._selfIB}else J_c=this._ib;J_qa.expandIBQuadrangle(J_c,J_d._byteLength/(4*J_d.vertexStride*4))}if(!J_h||!J_g)throw Error("setIBVB must input:shader shaderValues");var J_m=J_ia.create(this,J_d,J_c,J_e,J_g,J_h,J_i,J_j,J_k);J_f||(J_f=J_B.EMPTY),J_f.translate(J_a,J_b),J_B.mul(J_f,this._curMat,J_m._mat),J_f.translate(-J_a,-J_b),this._submits[this._submits._length++]=J_m,this._curSubmit=J_fa.RENDERBASE,this._renderKey=0},J_b.addRenderObject=function(J_a){this._submits[this._submits._length++]=J_a},J_b.fillTrangles=function(J_a,J_b,J_c,J_d,J_e){var J_f=this._curSubmit,J_g=this._vb,J_h=this._shader2D,J_i=J_f.shaderValue,J_j=J_d.length>>4,J_k=J_a.bitmap;this._renderKey=0,J_h.glTexture==J_k&&J_h.ALPHA===J_i.ALPHA||((J_f=this._curSubmit=J_fa.createSubmit(this,this._ib,J_g,J_g._byteLength/32*3,J_Aa.create(1,0))).shaderValue.textureHost=J_a,this._submits[this._submits._length++]=J_f),J_qa.fillTranglesVB(J_g,J_b,J_c,J_d,J_e||this._curMat,this._x,this._y),J_f._numEle+=6*J_j},J_b.submitElement=function(J_a,J_b){var J_c=this._submits;for(J_b<0&&(J_b=J_c._length);J_a<J_b;)J_a+=J_c[J_a].renderSubmit()},J_b.finish=function(){J_wa.mainContext.finish()},J_b.flush=function(){var J_a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(J_a>this._ib.bufferLength/12&&J_qa.expandIBQuadrangle(this._ib,J_a),!this._isMain&&J_Q.enabled&&J_Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=J_Q._atlasRestore;for(var J_b=this._submits,J_c=0,J_d=J_b._length;J_c<J_d;J_c++){var J_e=J_b[J_c];10016===J_e.getRenderType()&&J_e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),J_ba.instance&&J_ba.getInstance().reset();var J_f;for(J_c=0,J_f=this.meshlist.length;J_c<J_f;J_c++){var J_g=this.meshlist[J_c];J_g.canReuse?J_g.releaseMesh():J_g.destroy()}return this.meshlist.length=0,this._curSubmit=J_fa.RENDERBASE,this._renderKey=0,this._triangleMesh=J_Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},J_b.setPathId=function(J_a){if(this.mId=J_a,-1!=this.mId){this.mHaveKey=!1;var J_b=J_M.getInstance();J_b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,J_b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},J_b.movePath=function(J_a,J_b){var J_c=J_a,J_d=J_b;J_a=this._curMat.a*J_c+this._curMat.c*J_d+this._curMat.tx,J_b=this._curMat.b*J_c+this._curMat.d*J_d+this._curMat.ty,this.mX+=J_a,this.mY+=J_b},J_b.beginPath=function(){var J_a=this._getPath();J_a.tempArray.length=0,J_a.closePath=!1,this.mX=0,this.mY=0},J_b.closePath=function(){this._path.closePath=!0},J_b.fill=function(J_a){void 0===J_a&&(J_a=!1);var J_b=this._getPath();this.drawPoly(0,0,J_b.tempArray,this.fillStyle._color.numColor,0,0,J_a)},J_b.stroke=function(){var J_a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)J_a.drawLine(0,0,J_a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var J_b=J_M.getInstance().shapeLineDic[this.mId];J_b.rebuild(J_a.tempArray),J_a.setGeomtry(J_b)}else J_M.getInstance().addLine(this.mId,J_a.drawLine(0,0,J_a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));J_a.update();var J_c=[this.mX,this.mY],J_d=J_fa.createShape(this,J_a.ib,J_a.vb,J_a.count,J_a.offset,J_Aa.create(4,0));J_d.shaderValue.ALPHA=this._shader2D.ALPHA,J_d.shaderValue.u_pos=J_c,J_d.shaderValue.u_mmat2=J_ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=J_d,this._renderKey=-1}},J_b.line=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=this._curSubmit,J_h=this._vb;if(J_qa.fillLineVb(J_h,this._clipRect,J_a,J_b,J_c,J_d,J_e,J_f)){this._renderKey=0;var J_i=this._shader2D,J_j=J_g.shaderValue;J_i.strokeStyle===J_j.strokeStyle&&J_i.ALPHA===J_j.ALPHA||(J_i.glTexture=null,(J_g=this._curSubmit=J_fa.createSubmit(this,this._ib,J_h,(J_h._byteLength-64)/32*3,J_Aa.create(2,0))).shaderValue.strokeStyle=J_i.strokeStyle,J_g.shaderValue.mainID=2,J_g.shaderValue.ALPHA=J_i.ALPHA,this._submits[this._submits._length++]=J_g),J_g._numEle+=6}},J_b.moveTo=function(J_a,J_b,J_c){void 0===J_c&&(J_c=!0);var J_d=this._getPath();if(J_c){var J_e=J_a,J_f=J_b;J_a=this._curMat.a*J_e+this._curMat.c*J_f,J_b=this._curMat.b*J_e+this._curMat.d*J_f}J_d.addPoint(J_a,J_b)},J_b.lineTo=function(J_a,J_b,J_c){void 0===J_c&&(J_c=!0);var J_d=this._getPath();if(J_c){var J_e=J_a,J_f=J_b;J_a=this._curMat.a*J_e+this._curMat.c*J_f,J_b=this._curMat.b*J_e+this._curMat.d*J_f}J_d.addPoint(J_a,J_b)},J_b.drawCurves=function(J_a,J_b,J_c){this.setPathId(-1),this.beginPath(),this.strokeStyle=J_c[3],this.lineWidth=J_c[4];var J_d=J_c[2];J_a+=J_c[0],J_b+=J_c[1],this.movePath(J_a,J_b),this.moveTo(J_d[0],J_d[1]);for(var J_e=2,J_f=J_d.length;J_e<J_f;)this.quadraticCurveTo(J_d[J_e++],J_d[J_e++],J_d[J_e++],J_d[J_e++]);this.stroke()},J_b.arcTo=function(J_a,J_b,J_c,J_d,J_e){if(-1==this.mId||!this.mHaveKey){var J_f=0,J_g=0,J_h=0,J_i=this._getPath();this._curMat.copyTo(J_P._tmpMatrix),J_P._tmpMatrix.tx=J_P._tmpMatrix.ty=0,J_P._tempPoint.setTo(J_i.getEndPointX(),J_i.getEndPointY()),J_P._tmpMatrix.invertTransformPoint(J_P._tempPoint);var J_j=J_P._tempPoint.x-J_a,J_k=J_P._tempPoint.y-J_b,J_l=Math.sqrt(J_j*J_j+J_k*J_k);if(!(J_l<=1e-6)){var J_m=J_j/J_l,J_n=J_k/J_l,J_o=J_c-J_a,J_p=J_d-J_b,J_q=J_o*J_o+J_p*J_p,J_r=Math.sqrt(J_q);if(!(J_r<=1e-6)){var J_u=J_o/J_r,J_v=J_p/J_r,J_w=J_m+J_u,J_x=J_n+J_v,J_y=Math.sqrt(J_w*J_w+J_x*J_x);if(!(J_y<=1e-6)){var J_z=J_w/J_y,J_A=J_x/J_y,J_B=Math.acos(J_z*J_m+J_A*J_n),J_C=Math.PI/2-J_B,J_D=(J_l=J_e/Math.tan(J_C))*J_m+J_a,J_E=J_l*J_n+J_b,J_F=Math.sqrt(J_l*J_l+J_e*J_e),J_G=J_a+J_z*J_F,J_H=J_b+J_A*J_F,J_I=0,J_J=0;if(0<=J_m*J_v-J_n*J_u){var J_K=2*J_C/J_P.SEGNUM;J_I=Math.sin(J_K),J_J=Math.cos(J_K)}else J_K=2*-J_C/J_P.SEGNUM,J_I=Math.sin(J_K),J_J=Math.cos(J_K);J_g=this._curMat.a*J_D+this._curMat.c*J_E,J_h=this._curMat.b*J_D+this._curMat.d*J_E,J_g==this._path.getEndPointX()&&J_h==this._path.getEndPointY()||J_i.addPoint(J_g,J_h);var J_L=J_D-J_G,J_M=J_E-J_H;for(J_f=0;J_f<J_P.SEGNUM;J_f++){var J_N=J_L*J_J+J_M*J_I,J_O=-J_L*J_I+J_M*J_J;J_g=J_N+J_G,J_h=J_O+J_H,J_a=this._curMat.a*J_g+this._curMat.c*J_h,J_h=J_b=this._curMat.b*J_g+this._curMat.d*J_h,(J_g=J_a)==this._path.getEndPointX()&&J_h==this._path.getEndPointY()||J_i.addPoint(J_g,J_h),J_L=J_N,J_M=J_O}}}}}},J_b.arc=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!0),-1!=this.mId){var J_h=J_M.getInstance().shapeDic[this.mId];if(J_h&&this.mHaveKey&&!J_h.needUpdate(this._curMat))return;J_b=J_a=0}var J_i,J_j=0,J_k=0,J_l=0,J_m=0,J_n=0,J_o=0,J_p=0;if(J_k=J_e-J_d,J_f)if(Math.abs(J_k)>=2*Math.PI)J_k=2*-Math.PI;else for(;0<J_k;)J_k-=2*Math.PI;else if(Math.abs(J_k)>=2*Math.PI)J_k=2*Math.PI;else for(;J_k<0;)J_k+=2*Math.PI;J_i=J_k/(J_p=J_c<101?Math.max(10,J_k*J_c/5):J_c<201?Math.max(10,J_k*J_c/20):Math.max(10,J_k*J_c/40))/2,J_l=Math.abs(4/3*(1-Math.cos(J_i))/Math.sin(J_i)),J_f&&(J_l=-J_l);var J_q=this._getPath(),J_r=NaN,J_u=NaN;for(J_o=0;J_o<=J_p;J_o++)J_j=J_d+J_k*(J_o/J_p),J_m=J_a+Math.cos(J_j)*J_c,J_n=J_b+Math.sin(J_j)*J_c,J_g&&(J_r=J_m,J_u=J_n,J_m=this._curMat.a*J_r+this._curMat.c*J_u,J_n=this._curMat.b*J_r+this._curMat.d*J_u),J_m==this._path.getEndPointX()&&J_n==this._path.getEndPointY()||J_q.addPoint(J_m,J_n);J_m=J_a+Math.cos(J_e)*J_c,J_n=J_b+Math.sin(J_e)*J_c,J_g&&(J_r=J_m,J_u=J_n,J_m=this._curMat.a*J_r+this._curMat.c*J_u,J_n=this._curMat.b*J_r+this._curMat.d*J_u),J_m==this._path.getEndPointX()&&J_n==this._path.getEndPointY()||J_q.addPoint(J_m,J_n)},J_b.quadraticCurveTo=function(J_a,J_b,J_c,J_d){var J_e=J_l.I,J_f=J_c,J_g=J_d;J_c=this._curMat.a*J_f+this._curMat.c*J_g,J_d=this._curMat.b*J_f+this._curMat.d*J_g,J_f=J_a,J_g=J_b,J_a=this._curMat.a*J_f+this._curMat.c*J_g,J_b=this._curMat.b*J_f+this._curMat.d*J_g;for(var J_h=J_e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),J_a,J_b,J_c,J_d],30,2),J_i=0,J_j=J_h.length/2;J_i<J_j;J_i++)this.lineTo(J_h[2*J_i],J_h[2*J_i+1],!1);this.lineTo(J_c,J_d,!1)},J_b.rect=function(J_a,J_b,J_c,J_d){this._other=this._other.make(),this._other.path||(this._other.path=new J_U),this._other.path.rect(J_a,J_b,J_c,J_d)},J_b.strokeRect=function(J_a,J_b,J_c,J_d,J_e){var J_f=.5*J_e;this.line(J_a-J_f,J_b,J_a+J_c+J_f,J_b,J_e,this._curMat),this.line(J_a+J_c,J_b,J_a+J_c,J_b+J_d,J_e,this._curMat),this.line(J_a,J_b,J_a,J_b+J_d,J_e,this._curMat),this.line(J_a-J_f,J_b+J_d,J_a+J_c+J_f,J_b+J_d,J_e,this._curMat)},J_b.clip=function(){},J_b.drawPoly=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){void 0===J_g&&(J_g=!1),this._renderKey=0,this._shader2D.glTexture=null;var J_h=this._getPath();if(-1==this.mId)J_h.polygon(J_a,J_b,J_c,J_d,J_e||1,J_f);else if(this.mHaveKey){var J_i=J_M.getInstance().shapeDic[this.mId];J_i.setMatrix(this._curMat),J_i.rebuild(J_h.tempArray),J_h.setGeomtry(J_i)}else{var J_j=J_h.polygon(J_a,J_b,J_c,J_d,J_e||1,J_f);J_M.getInstance().addShape(this.mId,J_j),J_j.setMatrix(this._curMat)}J_h.update();var J_k,J_l=[this.mX,this.mY];if((J_k=J_fa.createShape(this,J_h.ib,J_h.vb,J_h.count,J_h.offset,J_Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,J_k.shaderValue.u_pos=J_l,J_k.shaderValue.u_mmat2=J_ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=J_k,0<J_e){if(this.mHaveLineKey){var J_m=J_M.getInstance().shapeLineDic[this.mId];J_m.rebuild(J_h.tempArray),J_h.setGeomtry(J_m)}else J_M.getInstance().addShape(this.mId,J_h.drawLine(J_a,J_b,J_c,J_e,J_f));J_h.update(),(J_k=J_fa.createShape(this,J_h.ib,J_h.vb,J_h.count,J_h.offset,J_Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,J_k.shaderValue.u_mmat2=J_ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=J_k}},J_b.drawParticle=function(J_a,J_b,J_c){J_c.x=J_a,J_c.y=J_b,this._submits[this._submits._length++]=J_c},J_b._getPath=function(){return this._path||(this._path=new J_U)},J_d(0,J_b,"globalCompositeOperation",function(){return J_S.NAMES[this._nBlendType]},function(J_a){var J_b=J_S.TOINT[J_a];null==J_b||this._nBlendType===J_b||(J_V.save(this,65536,this,!0),this._curSubmit=J_fa.RENDERBASE,this._renderKey=0,this._nBlendType=J_b)}),J_d(0,J_b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(J_a){this._shader2D.strokeStyle.equal(J_a)||(J_V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=J_T.create(J_a))}),J_d(0,J_b,"globalAlpha",function(){return this._shader2D.ALPHA},function(J_a){(J_a=Math.floor(1e3*J_a)/1e3)!=this._shader2D.ALPHA&&(J_V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=J_a)}),J_d(0,J_b,"asBitmap",null,function(J_a){if(J_a){if(this._targets||(this._targets=new J__),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),J_d(0,J_b,"fillStyle",function(){return this._shader2D.fillStyle},function(J_a){this._shader2D.fillStyle.equal(J_a)||(J_V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=J_T.create(J_a))}),J_d(0,J_b,"textAlign",function(){return this._other.textAlign},function(J_a){this._other.textAlign===J_a||(this._other=this._other.make(),J_V.save(this,32768,this._other,!1),this._other.textAlign=J_a)}),J_d(0,J_b,"lineWidth",function(){return this._other.lineWidth},function(J_a){this._other.lineWidth===J_a||(this._other=this._other.make(),J_V.save(this,256,this._other,!1),this._other.lineWidth=J_a)}),J_d(0,J_b,"textBaseline",function(){return this._other.textBaseline},function(J_a){this._other.textBaseline===J_a||(this._other=this._other.make(),J_V.save(this,16384,this._other,!1),this._other.textBaseline=J_a)}),J_d(0,J_b,"font",null,function(J_a){J_a!=this._other.font.toString()&&(this._other=this._other.make(),J_V.save(this,8,this._other,!1),this._other.font===J_oa.EMPTY?this._other.font=new J_oa(J_a):this._other.font.setFont(J_a))}),J_P.__init__=function(){J_c.DEFAULT=new J_c},J_P._tempPoint=new J_C,J_P._SUBMITVBSIZE=32e3,J_P._MAXSIZE=99999999,J_P._RECTVBSIZE=16,J_P.MAXCLIPRECT=new J_D(0,0,99999999,99999999),J_P._COUNT=0,J_P._tmpMatrix=new J_B,J_P.SEGNUM=32,J_P._contextcount=0,J_g(J_P,["_fontTemp",function(){return this._fontTemp=new J_oa},"_drawStyleTemp",function(){return this._drawStyleTemp=new J_T(null)}]),J_P.__init$=function(){J_c=function(){function J_a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=J_oa.EMPTY}J_m(J_a,"");var J_b=J_a.prototype;return J_b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=J_oa.EMPTY},J_b.make=function(){return this===J_a.DEFAULT?new J_a:this},J_a.DEFAULT=null,J_a}()},J_P}(),J_Aa=function(J_a){function J_d(J_a,J_b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,J_d.__super.call(this),this.defines=new J_Ea,this.position=J_d._POSITION,this.mainID=J_a,this.subID=J_b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=J_a|J_b,this._inClassCache=J_d._cache[this._cacheID],0<J_a&&!this._inClassCache&&(this._inClassCache=J_d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}J_m(J_d,"laya.webgl.shader.d2.value.Value2D",J_O);var J_b=J_d.prototype;return J_b.setValue=function(J_a){},J_b.refresh=function(){var J_a=this.size;return J_a[0]=J_ua.width,J_a[1]=J_ua.height,this.alpha=this.ALPHA*J_ua.worldAlpha,this.mmat=J_ua.worldMatrix4,this},J_b._ShaderWithCompile=function(){return J_Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,J__a.create)},J_b._withWorldShaderDefines=function(){var J_a=J_ua.worldShaderDefines,J_b=J_Ya.sharders[this.mainID|this.defines._value|J_a.getValue()];if(!J_b){var J_c,J_d={};for(J_c in this.defines.toNameDic())J_d[J_c]="";for(J_c in J_a.toNameDic())J_d[J_c]="";J_b=J_Ya.withCompile2D(0,this.mainID,J_d,this.mainID|this.defines._value|J_a.getValue(),J__a.create)}var J_e=J_ua.worldFilters;if(!J_e)return J_b;for(var J_f,J_g=J_e.length,J_h=0;J_h<J_g;J_h++)(J_f=J_e[J_h])&&J_f.action.setValue(this);return J_b},J_b.upload=function(){var J_a=J_ua;this.alpha=this.ALPHA*J_a.worldAlpha,J_ua.worldMatrix4!==J_ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),J_wa.shaderHighPrecision&&this.defines.add(1024);var J_b,J_c=J_a.worldShaderDefines?this._withWorldShaderDefines():J_Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=J_a.width,this.size[1]=J_a.height,this.mmat=J_a.worldMatrix4,J_La.activeShader!==J_c?J_c._shaderValueWidth!==J_a.width||J_c._shaderValueHeight!==J_a.height?(J_c._shaderValueWidth=J_a.width,J_c._shaderValueHeight=J_a.height):J_b=J_c._params2dQuick2||J_c._make2dQuick2():J_c._shaderValueWidth!==J_a.width||J_c._shaderValueHeight!==J_a.height?(J_c._shaderValueWidth=J_a.width,J_c._shaderValueHeight=J_a.height):J_b=J_c._params2dQuick1||J_c._make2dQuick1(),J_c.upload(this,J_b)},J_b.setFilters=function(J_a){if(this.filters=J_a)for(var J_b,J_c=J_a.length,J_d=0;J_d<J_c;J_d++)(J_b=J_a[J_d])&&(this.defines.add(J_b.type),J_b.action.setValue(this))},J_b.clear=function(){this.defines.setValue(this.subID)},J_b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},J_d._initone=function(J_a,J_b){J_d._typeClass[J_a]=J_b,J_d._cache[J_a]=[],J_d._cache[J_a]._length=0},J_d.__init__=function(){J_d._POSITION=[2,5126,!1,4*J_pa.BYTES_PE,0],J_d._TEXCOORD=[2,5126,!1,4*J_pa.BYTES_PE,2*J_pa.BYTES_PE],J_d._initone(2,J_Pa),J_d._initone(4,J_Sa),J_d._initone(256,J_Qa),J_d._initone(512,J_Oa),J_d._initone(1,J_Ra),J_d._initone(65,J_$a),J_d._initone(9,J_Ra)},J_d.create=function(J_a,J_b){var J_c=J_d._cache[J_a|J_b];return J_c._length?J_c[--J_c._length]:new J_d._typeClass[J_a|J_b](J_b)},J_d._POSITION=null,J_d._TEXCOORD=null,J_d._cache=[],J_d._typeClass=[],J_d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J_d}(),J_Ba=function(J_a){function J_q(J_a,J_b){J_q.__super.call(this,J_a,J_b)}J_m(J_q,"laya.webgl.utils.RenderSprite3D",J_u);var J_b=J_q.prototype;return J_b.onCreate=function(J_a){switch(J_a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},J_b._mask=function(J_a,J_b,J_c,J_d){var J_e,J_f,J_g=this._next,J_h=J_a.mask;if(J_h){J_b.ctx.save();var J_i=J_b.ctx.globalCompositeOperation,J_j=new J_D;if(J_j.copyFrom(J_h.getBounds()),J_j.width=Math.round(J_j.width),J_j.height=Math.round(J_j.height),J_j.x=Math.round(J_j.x),J_j.y=Math.round(J_j.y),0<J_j.width&&0<J_j.height){var J_k=J_a._style._tf,J_l=J_ha.create();J_l.addValue("bounds",J_j),J_e=J_ga.create([J_l,J_b],laya.webgl.utils.RenderSprite3D.tmpTarget),J_b.addRenderObject(J_e),J_h.render(J_b,-J_j.x,-J_j.y),J_e=J_ga.create([J_l],laya.webgl.utils.RenderSprite3D.endTmpTarget),J_b.addRenderObject(J_e),J_b.ctx.save(),J_b.clipRect(J_c-J_k.translateX+J_j.x,J_d-J_k.translateY+J_j.y,J_j.width,J_j.height),J_g._fun.call(J_g,J_a,J_b,J_c,J_d),J_b.ctx.restore(),J_f=J_ka.create(6),J_i=J_b.ctx.globalCompositeOperation,J_f.blendMode="mask",J_b.addRenderObject(J_f),J_B.TEMP.identity();var J_m=J_Aa.create(1,0),J_n=J_K.INV_UV,J_o=J_j.width,J_p=J_j.height;(J_j.width<32||J_j.height<32)&&((J_n=J_q.tempUV)[0]=0,J_n[1]=0,J_n[2]=32<=J_j.width?1:J_j.width/32,J_n[3]=0,J_n[4]=32<=J_j.width?1:J_j.width/32,J_n[5]=32<=J_j.height?1:J_j.height/32,J_n[6]=0,J_n[7]=32<=J_j.height?1:J_j.height/32,J_j.width=32<=J_j.width?J_j.width:32,J_j.height=32<=J_j.height?J_j.height:32,J_n[1]*=-1,J_n[3]*=-1,J_n[5]*=-1,J_n[7]*=-1,J_n[1]+=1,J_n[3]+=1,J_n[5]+=1,J_n[7]+=1),J_b.ctx.drawTarget(J_l,J_c+J_j.x-J_k.translateX,J_d+J_j.y-J_k.translateY,J_o,J_p,J_B.TEMP,"tmpTarget",J_m,J_n,6),J_e=J_ga.create([J_l],laya.webgl.utils.RenderSprite3D.recycleTarget),J_b.addRenderObject(J_e),(J_f=J_ka.create(6)).blendMode=J_i,J_b.addRenderObject(J_f)}J_b.ctx.restore()}else J_g._fun.call(J_g,J_a,J_b,J_c,J_d)},J_b._blend=function(J_a,J_b,J_c,J_d){var J_e=J_a._style,J_f=this._next;J_e.blendMode?(J_b.ctx.save(),J_b.ctx.globalCompositeOperation=J_e.blendMode,J_f._fun.call(J_f,J_a,J_b,J_c,J_d),J_b.ctx.restore()):J_f._fun.call(J_f,J_a,J_b,J_c,J_d)},J_b._transform=function(J_a,J_b,J_c,J_d){var J_e=J_a.transform,J_f=this._next;if(J_e&&J_f!=J_u.NORENDER){var J_g=J_b.ctx;J_a._style;J_e.tx=J_c,J_e.ty=J_d;var J_h=J_g._getTransformMatrix(),J_i=J_h.clone();J_B.mul(J_e,J_h,J_h),J_h._checkTransform(),J_e.tx=J_e.ty=0,J_f._fun.call(J_f,J_a,J_b,0,0),J_i.copyTo(J_h),J_i.destroy()}else J_f._fun.call(J_f,J_a,J_b,J_c,J_d)},J_q.tmpTarget=function(J_a,J_b){var J_c=J_a.getValue("bounds"),J_d=J_Ma.create(J_c.width,J_c.height);J_d.start(),J_d.clear(0,0,0,0),J_a.addValue("tmpTarget",J_d)},J_q.endTmpTarget=function(J_a){J_a.getValue("tmpTarget").end()},J_q.recycleTarget=function(J_a){J_a.getValue("tmpTarget").recycle(),J_a.recycle()},J_g(J_q,["tempUV",function(){return this.tempUV=new Array(8)}]),J_q}(),J_Ca=function(J_a){function J_b(){this.data=null,J_b.__super.call(this)}J_m(J_b,"laya.filters.webgl.ColorFilterActionGL",J_N);var J_c=J_b.prototype;return J_y.imps(J_c,{"laya.filters.IFilterActionGL":!0}),J_c.setValue=function(J_a){J_a.colorMat=this.data._mat,J_a.colorAlpha=this.data._alpha},J_c.apply3d=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_a.getValue("bounds"),J_g=J_Aa.create(1,0);J_g.setFilters([this.data]);var J_h=J_B.TEMP;J_h.identity(),J_c.ctx.drawTarget(J_a,0,0,J_f.width,J_f.height,J_h,"src",J_g)},J_b}(),J_Da=function(J_a){function J_f(J_a,J_b,J_c,J_d,J_e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,J_f.__super.call(this,J_a,J_b,J_e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new J_Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=J_c,this._atlasCanvas.height=J_d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}J_m(J_f,"laya.webgl.atlas.Atlaser",J_P);var J_b=J_f.prototype;return J_b.computeUVinAtlasTexture=function(J_a,J_b,J_c,J_d){var J_e=J_Q.atlasTextureWidth,J_f=J_Q.atlasTextureHeight,J_g=J_c/J_e,J_h=J_d/J_f,J_i=(J_c+J_a.bitmap.width)/J_e,J_j=(J_d+J_a.bitmap.height)/J_f,J_k=J_a.bitmap.width/J_e,J_l=J_a.bitmap.height/J_f;J_a.uv=[J_g+J_b[0]*J_k,J_h+J_b[1]*J_l,J_i-(1-J_b[2])*J_k,J_h+J_b[3]*J_l,J_i-(1-J_b[4])*J_k,J_j-(1-J_b[5])*J_l,J_g+J_b[6]*J_k,J_j-(1-J_b[7])*J_l]},J_b.findBitmapIsExist=function(J_a){if(J_a instanceof laya.webgl.resource.WebGLImage){var J_b=J_a,J_c=J_b.url,J_d=this._InAtlasWebGLImagesKey[J_c||J_b.id];if(J_d)return J_d.offsetInfoID}return-1},J_b.addToAtlasTexture=function(J_a,J_b,J_c){if(J_a instanceof laya.webgl.resource.WebGLImage){var J_d=J_a,J_e=J_d.url;this._InAtlasWebGLImagesKey[J_e||J_d.id]={bitmap:J_a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([J_b,J_c])}this._atlasCanvas.texSubImage2D(J_b,J_c,J_a.atlasSource),J_a.clearAtlasSource()},J_b.addToAtlas=function(J_a,J_b,J_c){J_a._atlasID=this._inAtlasTextureKey.length;var J_d=J_a.uv.slice(),J_e=J_a.bitmap;this._inAtlasTextureKey.push(J_a),this._inAtlasTextureOriUVValue.push(J_d),this._inAtlasTextureBitmapValue.push(J_e),this.computeUVinAtlasTexture(J_a,J_d,J_b,J_c),J_a.bitmap=this._atlasCanvas},J_b.clear=function(){for(var J_a=0,J_b=this._inAtlasTextureKey.length;J_a<J_b;J_a++)this._inAtlasTextureKey[J_a].bitmap=this._inAtlasTextureBitmapValue[J_a],this._inAtlasTextureKey[J_a].uv=this._inAtlasTextureOriUVValue[J_a],this._inAtlasTextureKey[J_a]._atlasID=-1,this._inAtlasTextureKey[J_a].bitmap.lock=!1,this._inAtlasTextureKey[J_a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},J_b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},J_d(0,J_b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),J_d(0,J_b,"texture",function(){return this._atlasCanvas}),J_d(0,J_b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),J_f}(),J_Ea=function(J_a){function J_c(){J_c.__super.call(this,J_c.__name2int,J_c.__int2name,J_c.__int2nameMap)}return J_m(J_c,"laya.webgl.shader.d2.ShaderDefines2D",J_t),J_c.__init__=function(){J_c.reg("TEXTURE2D",1),J_c.reg("COLOR2D",2),J_c.reg("PRIMITIVE",4),J_c.reg("GLOW_FILTER",8),J_c.reg("BLUR_FILTER",16),J_c.reg("COLOR_FILTER",32),J_c.reg("COLOR_ADD",64),J_c.reg("WORLDMAT",128),J_c.reg("FILLTEXTURE",256),J_c.reg("FSHIGHPRECISION",1024),J_c.reg("TXTALPHA",2048),J_c.reg("TXTCOMPRESS",4096)},J_c.reg=function(J_a,J_b){J_t._reg(J_a,J_b,J_c.__name2int,J_c.__int2name)},J_c.toText=function(J_a,J_b,J_c){return J_t._toText(J_a,J_b,J_c)},J_c.toInt=function(J_a){return J_t._toInt(J_a,J_c.__name2int)},J_c.TEXTURE2D=1,J_c.COLOR2D=2,J_c.PRIMITIVE=4,J_c.FILTERGLOW=8,J_c.FILTERBLUR=16,J_c.FILTERCOLOR=32,J_c.COLORADD=64,J_c.WORLDMAT=128,J_c.FILLTEXTURE=256,J_c.SKINMESH=512,J_c.SHADERDEFINE_FSHIGHPRECISION=1024,J_c.TXTALPHA=2048,J_c.TXTCOMPRESS=4096,J_c.__name2int={},J_c.__int2name=[],J_c.__int2nameMap=[],J_c}(),J_Fa=(function(J_a){function J_h(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_h.__super.call(this,J_a,J_b,J_c,J_d,40,J_e,J_f,J_g)}J_m(J_h,"laya.webgl.shapes.Ellipse",J_ca)}(),function(J_a){function J_f(J_a,J_b,J_c,J_d,J_e){this._points=[],this.rebuild(J_c),J_f.__super.call(this,J_a,J_b,0,0,0,J_e,J_d,J_e,0)}J_m(J_f,"laya.webgl.shapes.Line",J_ca);var J_b=J_f.prototype;return J_b.rebuild=function(J_a){var J_b=J_a.length;J_b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(J_b/2-1)),this.mFloat32Array=new Float32Array(5*J_b)),this._points.length=0;for(var J_c=NaN,J_d=NaN,J_e=-1,J_f=-1,J_g=J_a.length/2,J_h=0;J_h<J_g;J_h++)J_c=J_a[2*J_h],J_d=J_a[2*J_h+1],(.01<Math.abs(J_e-J_c)||.01<Math.abs(J_f-J_d))&&this._points.push(J_c,J_d),J_e=J_c,J_f=J_d},J_b.getData=function(J_a,J_b,J_c){var J_d=[],J_e=[];0<this.borderWidth&&this.createLine2(this._points,J_d,this.borderWidth,J_c,J_e,this._points.length/2),this.mUint16Array.set(J_d,0),this.mFloat32Array.set(J_e,0),J_a.append(this.mUint16Array),J_b.append(this.mFloat32Array)},J_f}()),J_Ga=function(J_a){function J_l(J_a,J_b,J_c,J_d,J_e){this._points=[];for(var J_f=NaN,J_g=NaN,J_h=-1,J_i=-1,J_j=J_c.length/2-1,J_k=0;J_k<J_j;J_k++)J_f=J_c[2*J_k],J_g=J_c[2*J_k+1],(.01<Math.abs(J_h-J_f)||.01<Math.abs(J_i-J_g))&&this._points.push(J_f,J_g),J_h=J_f,J_i=J_g;J_f=J_c[2*J_j],J_g=J_c[2*J_j+1],J_h=this._points[0],J_i=this._points[1],(.01<Math.abs(J_h-J_f)||.01<Math.abs(J_i-J_g))&&this._points.push(J_f,J_g),J_l.__super.call(this,J_a,J_b,0,0,this._points.length/2,0,J_d,J_e)}J_m(J_l,"laya.webgl.shapes.LoopLine",J_ca);var J_b=J_l.prototype;return J_b.getData=function(J_a,J_b,J_c){if(0<this.borderWidth){for(var J_d=this.color,J_e=(J_d>>16&255)/255,J_f=(J_d>>8&255)/255,J_g=(255&J_d)/255,J_h=[],J_i=0,J_j=0,J_k=[],J_l=Math.floor(this._points.length/2),J_m=0;J_m<J_l;J_m++)J_i=this._points[2*J_m],J_j=this._points[2*J_m+1],J_h.push(this.x+J_i,this.y+J_j,J_e,J_f,J_g);this.createLoopLine(J_h,J_k,this.borderWidth,J_c+J_h.length/5),J_a.append(new Uint16Array(J_k)),J_b.append(new Float32Array(J_h))}},J_b.createLoopLine=function(J_a,J_b,J_c,J_d,J_e,J_f){J_a.length;var J_g=J_a.concat(),J_h=J_e||J_a,J_i=this.borderColor,J_j=(J_i>>16&255)/255,J_k=(J_i>>8&255)/255,J_l=(255&J_i)/255,J_m=[J_g[0],J_g[1]],J_n=[J_g[J_g.length-5],J_g[J_g.length-4]],J_o=J_n[0]+.5*(J_m[0]-J_n[0]),J_p=J_n[1]+.5*(J_m[1]-J_n[1]);J_g.unshift(J_o,J_p,0,0,0),J_g.push(J_o,J_p,0,0,0);var J_q,J_r,J_u,J_v,J_w,J_x,J_y,J_z,J_A,J_B,J_C,J_D,J_E,J_F,J_G,J_H,J_I,J_J,J_K,J_L,J_M=J_g.length/5,J_N=J_d,J_O=J_c/2;J_u=J_g[0],J_v=J_g[1],J_B=J_u-(J_w=J_g[5]),J_A=(J_A=-(J_v-(J_x=J_g[6])))/(J_L=Math.sqrt(J_A*J_A+J_B*J_B))*J_O,J_B=J_B/J_L*J_O,J_h.push(J_u-J_A,J_v-J_B,J_j,J_k,J_l,J_u+J_A,J_v+J_B,J_j,J_k,J_l);for(var J_P=1;J_P<J_M-1;J_P++)J_u=J_g[5*(J_P-1)],J_v=J_g[5*(J_P-1)+1],J_w=J_g[5*J_P],J_x=J_g[5*J_P+1],J_y=J_g[5*(J_P+1)],J_z=J_g[5*(J_P+1)+1],J_B=J_u-J_w,J_D=J_w-J_y,J_G=(-(J_A=(J_A=-(J_v-J_x))/(J_L=Math.sqrt(J_A*J_A+J_B*J_B))*J_O)+J_u)*(-(J_B=J_B/J_L*J_O)+J_x)-(-J_A+J_w)*(-J_B+J_v),J_J=(-(J_C=(J_C=-(J_x-J_z))/(J_L=Math.sqrt(J_C*J_C+J_D*J_D))*J_O)+J_y)*(-(J_D=J_D/J_L*J_O)+J_x)-(-J_C+J_w)*(-J_D+J_z),J_K=(J_E=-J_B+J_v-(-J_B+J_x))*(J_I=-J_C+J_w-(-J_C+J_y))-(J_H=-J_D+J_z-(-J_D+J_x))*(J_F=-J_A+J_w-(-J_A+J_u)),Math.abs(J_K)<.1?(J_K+=10.1,J_h.push(J_w-J_A,J_x-J_B,J_j,J_k,J_l,J_w+J_A,J_x+J_B,J_j,J_k,J_l)):(((J_q=(J_F*J_J-J_I*J_G)/J_K)-J_w)*(J_q-J_w)+((J_r=(J_H*J_G-J_E*J_J)/J_K)-J_x)+(J_r-J_x),J_h.push(J_q,J_r,J_j,J_k,J_l,J_w-(J_q-J_w),J_x-(J_r-J_x),J_j,J_k,J_l));J_f&&(J_b=J_f);var J_Q=this.edges+1;for(J_P=1;J_P<J_Q;J_P++)J_b.push(J_N+2*(J_P-1),J_N+2*(J_P-1)+1,J_N+2*J_P+1,J_N+2*J_P+1,J_N+2*J_P,J_N+2*(J_P-1));return J_b.push(J_N+2*(J_P-1),J_N+2*(J_P-1)+1,J_N+1,J_N+1,J_N,J_N+2*(J_P-1)),J_h},J_l}(),J_Ha=function(J_a){function J_g(J_a,J_b,J_c,J_d,J_e,J_f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=J_B.create(),this._points=J_c.slice(0,J_c.length),J_g.__super.call(this,J_a,J_b,0,0,this._points.length/2,J_d,J_e,J_f)}J_m(J_g,"laya.webgl.shapes.Polygon",J_ca);var J_b=J_g.prototype;return J_b.rebuild=function(J_a){this._repaint||(this._points.length=0,this._points=this._points.concat(J_a))},J_b.setMatrix=function(J_a){J_a.copyTo(this._mat)},J_b.needUpdate=function(J_a){return this._repaint=this._mat.a==J_a.a&&this._mat.b==J_a.b&&this._mat.c==J_a.c&&this._mat.d==J_a.d&&this._mat.tx==J_a.tx&&this._mat.ty==J_a.ty,!this._repaint},J_b.getData=function(J_a,J_b,J_c){var J_d,J_e=0,J_f=this._points,J_g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=J_c){for(this._start=J_c,J_d=[],J_g=this.earcutTriangles.length,J_e=0;J_e<J_g;J_e++)J_d.push(this.earcutTriangles[J_e]+J_c);this.mUint16Array=new Uint16Array(J_d)}}else{this._start=J_c,J_d=[];var J_h=[],J_i=[],J_j=this.color,J_k=(J_j>>16&255)/255,J_l=(J_j>>8&255)/255,J_m=(255&J_j)/255;for(J_g=Math.floor(J_f.length/2),J_e=0;J_e<J_g;J_e++)J_h.push(this.x+J_f[2*J_e],this.y+J_f[2*J_e+1],J_k,J_l,J_m),J_i.push(this.x+J_f[2*J_e],this.y+J_f[2*J_e+1]);for(this.earcutTriangles=J_da.earcut(J_i,null,2),J_g=this.earcutTriangles.length,J_e=0;J_e<J_g;J_e++)J_d.push(this.earcutTriangles[J_e]+J_c);this.mUint16Array=new Uint16Array(J_d),this.mFloat32Array=new Float32Array(J_h)}J_a.append(this.mUint16Array),J_b.append(this.mFloat32Array)},J_g}(),J_Ia=function(J_a){function J_f(){this._matrix=new J_B,this._matrix4=J_pa.defaultMatrix4.concat(),J_f.__super.call(this,1e4),this.shaderValue=new J_Aa(0,0)}J_m(J_f,"laya.webgl.submit.SubmitCanvas",J_fa);var J_b=J_f.prototype;return J_b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var J_a=J_ua.worldAlpha,J_b=J_ua.worldMatrix4,J_c=J_ua.worldMatrix,J_d=J_ua.worldFilters,J_e=J_ua.worldShaderDefines,J_f=this.shaderValue,J_g=this._matrix,J_h=this._matrix4,J_i=J_B.TEMP;return J_B.mul(J_g,J_c,J_i),J_h[0]=J_i.a,J_h[1]=J_i.b,J_h[4]=J_i.c,J_h[5]=J_i.d,J_h[12]=J_i.tx,J_h[13]=J_i.ty,J_ua.worldMatrix=J_i.clone(),J_ua.worldMatrix4=J_h,J_ua.worldAlpha=J_ua.worldAlpha*J_f.alpha,J_f.filters&&J_f.filters.length&&(J_ua.worldFilters=J_f.filters,J_ua.worldShaderDefines=J_f.defines),this._ctx_src.flush(),J_ua.worldAlpha=J_a,J_ua.worldMatrix4=J_b,J_ua.worldMatrix.destroy(),J_ua.worldMatrix=J_c,J_ua.worldFilters=J_d,J_ua.worldShaderDefines=J_e,1},J_b.releaseRender=function(){var J_a=J_f._cache;this._ctx_src=null,J_a[J_a._length++]=this},J_b.getRenderType=function(){return 10003},J_f.create=function(J_a,J_b,J_c){var J_d=J_f._cache._length?J_f._cache[--J_f._cache._length]:new J_f;J_d._ctx_src=J_a;var J_e=J_d.shaderValue;return J_e.alpha=J_b,J_e.defines.setValue(0),J_c&&J_c.length&&J_e.setFilters(J_c),J_d},J_f._cache=((J_f._cache=[])._length=0,J_f._cache),J_f}(),J_Ja=function(J_a){function J_j(J_a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===J_a&&(J_a=1e4),J_j.__super.call(this,J_a)}J_m(J_j,"laya.webgl.submit.SubmitTexture",J_fa);var J_b=J_j.prototype;return J_b.releaseRender=function(){var J_a=J_j._cache;(J_a[J_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},J_b.addTexture=function(J_a,J_b){this._texsID[this._texs.length]=J_a._uvID,this._texs.push(J_a),this._vbPos.push(J_b)},J_b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var J_a=this.shaderValue.textureHost.bitmap;if(null!==J_a)for(var J_b=this._vb.getFloat32Array(),J_c=0,J_d=this._texs.length;J_c<J_d;J_c++){var J_e=this._texs[J_c];J_e.active();var J_f=J_e.uv;if(this._texsID[J_c]!==J_e._uvID){this._texsID[J_c]=J_e._uvID;var J_g=this._vbPos[J_c];J_b[J_g+2]=J_f[0],J_b[J_g+3]=J_f[1],J_b[J_g+6]=J_f[2],J_b[J_g+7]=J_f[3],J_b[J_g+10]=J_f[4],J_b[J_g+11]=J_f[5],J_b[J_g+14]=J_f[6],J_b[J_g+15]=J_f[7],this._vb.setNeedUpload()}J_e.bitmap!==J_a&&(this._isSameTexture=!1)}}},J_b.renderSubmit=function(){if(0===this._numEle)return J_j._shaderSet=!1,1;var J_a=this.shaderValue.textureHost;if(J_a){var J_b=J_a.source;if(!J_a.bitmap||!J_b)return J_j._shaderSet=!1,1;this.shaderValue.texture=J_b,J_a.alphaTexture&&J_a.alphaTexture.source&&(this.shaderValue.texture1=J_a.alphaTexture.source)}this._vb.bind_upload(this._ib);var J_c=J_wa.mainContext;if(J_S.activeBlendFunction!==this._blendFn&&(J_c.enable(3042),this._blendFn(J_c),J_S.activeBlendFunction=this._blendFn),J_G.drawCall++,J_G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&J_La.activeShader&&J_j._shaderSet?(J_La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&J_La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),J_j._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var J_d=J_a.bitmap,J_e=0,J_f=J_La.activeShader,J_g=0,J_h=this._texs.length;J_g<J_h;J_g++){var J_i=this._texs[J_g];J_i.bitmap===J_d&&J_g+1!==J_h||(J_f.uploadTexture2D(J_i.source),J_c.drawElements(4,6*(J_g-J_e+1),5123,this._startIdx+6*J_e*J_pa.BYTES_PIDX),J_d=J_i.bitmap,J_e=J_g)}else J_c.drawElements(4,this._numEle,5123,this._startIdx);return 1},J_j.create=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_j._cache._length?J_j._cache[--J_j._cache._length]:new J_j;null==J_c&&((J_c=J_f._selfVb||(J_f._selfVb=J_ta.create(-1))).clear(),J_d=0),J_f._ib=J_b,J_f._vb=J_c,J_f._startIdx=J_d*J_pa.BYTES_PIDX,J_f._numEle=0;var J_g=J_a._nBlendType;J_f._blendFn=J_a._targets?J_S.targetFns[J_g]:J_S.fns[J_g],J_f.shaderValue=J_e,J_f.shaderValue.setValue(J_a._shader2D);var J_h=J_a._shader2D.filters;return J_h&&J_f.shaderValue.setFilters(J_h),J_f},J_j._cache=((J_j._cache=[])._length=0,J_j._cache),J_j._shaderSet=!0,J_j}(),J_Ka=function(J_a){function J_r(){J_r.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}J_m(J_r,"laya.webgl.utils.MeshTexture",J_ra);var J_b=J_r.prototype;return J_b.addData=function(J_a,J_b,J_c,J_d,J_e,J_f){for(var J_g=J_a.length/2,J_h=this._vb.needSize(J_g*J_r.const_stride)>>2,J_i=this._vb.getFloat32Array(),J_j=0,J_k=0;J_k<J_g;J_k++){var J_l=J_a[J_j],J_m=J_a[J_j+1],J_n=J_l*J_d.a+J_m*J_d.c+J_d.tx,J_o=J_l*J_d.b+J_m*J_d.d+J_d.ty;J_i[J_h++]=J_n,J_i[J_h++]=J_o,J_i[J_h++]=J_b[J_j],J_i[J_h++]=J_b[J_j+1],J_j+=2}this._vb.setNeedUpload();var J_p=this.vertNum;if(0<J_p){(J_g=J_c.length)>J_r.tmpIdx.length&&(J_r.tmpIdx=new Uint16Array(J_g));for(var J_q=0;J_q<J_g;J_q++)J_r.tmpIdx[J_q]=J_c[J_q]+J_p;this._ib.appendU16Array(J_r.tmpIdx,J_c.length)}else this._ib.append(J_c);this._ib.setNeedUpload(),this.vertNum+=J_g,this.indexNum+=J_c.length},J_b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},J_b.destroy=function(){this._ib.destroy(),this._vb.destroy()},J_r.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new J_r},J_r.const_stride=16,J_r._POOL=[],J_g(J_r,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),J_r}(),J_La=function(J_a){function J_b(){J_b.__super.call(this),this.lock=!0}return J_m(J_b,"laya.webgl.shader.BaseShader",J_v),J_b.activeShader=null,J_b.bindShader=null,J_b}(),J_Ma=function(J_b){function J_k(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===J_c&&(J_c=6408),void 0===J_d&&(J_d=5121),void 0===J_e&&(J_e=34041),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=-1),void 0===J_i&&(J_i=-1),this._type=1,this._w=J_a,this._h=J_b,this._surfaceFormat=J_c,this._surfaceType=J_d,this._depthStencilFormat=J_e,J_r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=J_f,this._repeat=J_g,this._minFifter=J_h,this._magFifter=J_i,this._createWebGLRenderTarget(),this.bitmap.lock=!0,J_k.__super.call(this,this.bitmap,J_K.INV_UV)}J_m(J_k,"laya.webgl.resource.RenderTarget2D",J_b);var J_a=J_k.prototype;return J_y.imps(J_a,{"laya.resource.IDispose":!0}),J_a.getType=function(){return this._type},J_a.getTexture=function(){return this},J_a.size=function(J_a,J_b){this._w==J_a&&this._h==J_b||(this._w=J_a,this._h=J_b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},J_a.release=function(){this.destroy()},J_a.recycle=function(){J_k.POOL.push(this)},J_a.start=function(){var J_a=J_wa.mainContext;return this._preRenderTarget=J_ua.curRenderTarget,J_ua.curRenderTarget=this,J_a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(J_a.viewport(0,0,this._w,this._h),this._svWidth=J_ua.width,this._svHeight=J_ua.height,J_ua.width=this._w,J_ua.height=this._h,J_La.activeShader=null),this},J_a.clear=function(J_a,J_b,J_c,J_d){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=1);var J_e=J_wa.mainContext;J_e.clearColor(J_a,J_b,J_c,J_d);var J_f=16384;switch(this._depthStencilFormat){case 33189:J_f|=256;break;case 36168:J_f|=1024;break;case 34041:J_f|=256,J_f|=1024}J_e.clear(J_f)},J_a.end=function(){var J_a=J_wa.mainContext;J_a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,J_ua.curRenderTarget=this._preRenderTarget,1==this._type?(J_a.viewport(0,0,this._svWidth,this._svHeight),J_ua.width=this._svWidth,J_ua.height=this._svHeight,J_La.activeShader=null):J_a.viewport(0,0,J_y.stage.width,J_y.stage.height)},J_a.getData=function(J_a,J_b,J_c,J_d){var J_e=J_wa.mainContext;if(J_e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===J_e.checkFramebufferStatus(36160)))return J_e.bindFramebuffer(36160,null),null;var J_f=new Uint8Array(this._w*this._h*4);return J_e.readPixels(J_a,J_b,J_c,J_d,this._surfaceFormat,this._surfaceType,J_f),J_e.bindFramebuffer(36160,null),J_f},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,J_b.prototype.destroy.call(this))},J_a.dispose=function(){},J_a._createWebGLRenderTarget=function(){this.bitmap=new J_Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(J_a){this.event("recovered")})},J_d(0,J_a,"surfaceFormat",function(){return this._surfaceFormat}),J_d(0,J_a,"magFifter",function(){return this._magFifter}),J_d(0,J_a,"surfaceType",function(){return this._surfaceType}),J_d(0,J_a,"mipMap",function(){return this._mipMap}),J_d(0,J_a,"depthStencilFormat",function(){return this._depthStencilFormat}),J_d(0,J_a,"minFifter",function(){return this._minFifter}),J_d(0,J_a,"source",function(){return this._alreadyResolved?J_y.superGet(J_K,this,"source"):null}),J_k.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){void 0===J_c&&(J_c=6408),void 0===J_d&&(J_d=5121),void 0===J_e&&(J_e=34041),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=-1),void 0===J_i&&(J_i=-1);var J_j=J_k.POOL.pop();return J_j||(J_j=new J_k(J_a,J_b)),J_j.bitmap&&J_j._w==J_a&&J_j._h==J_b&&J_j._surfaceFormat==J_c&&J_j._surfaceType==J_d&&J_j._depthStencilFormat==J_e&&J_j._mipMap==J_f&&J_j._repeat==J_g&&J_j._minFifter==J_h&&J_j._magFifter==J_i||(J_j._w=J_a,J_j._h=J_b,J_j._surfaceFormat=J_c,J_j._surfaceType=J_d,J_j._depthStencilFormat=J_e,J_r.isConchWebGL&&34041===J_j._depthStencilFormat&&(J_j._depthStencilFormat=33189),J_j._mipMap=J_f,J_j._repeat=J_g,J_j._minFifter=J_h,J_j._magFifter=J_i,J_j.release(),J_j._createWebGLRenderTarget()),J_j},J_k.TYPE2D=1,J_k.TYPE3D=2,J_k.POOL=[],J_k}(J_K),J_Na=function(J_a){function J_b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,J_b.__super.call(this),J_b._gl=J_wa.mainContext}J_m(J_b,"laya.webgl.utils.Buffer",J_v);var J_c=J_b.prototype;return J_c._bind=function(){this.activeResource(),J_b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(J_b._bindVertexBuffer=this._glBuffer),J_b._gl.bindBuffer(this._bufferType,J_b._bindActive[this._bufferType]=this._glBuffer),J_La.activeShader=null)},J_c.recreateResource=function(){this._glBuffer||(this._glBuffer=J_b._gl.createBuffer()),this.completeCreate()},J_c.disposeResource=function(){this._glBuffer&&(J_wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},J_d(0,J_c,"bufferUsage",function(){return this._bufferUsage}),J_b._gl=null,J_b._bindActive={},J_b._bindVertexBuffer=null,J_b._enableAtributes=[],J_b}(),J_Oa=function(J_a){function J_c(J_a){this.texcoord=null,this.offsetX=300,this.offsetY=0,J_c.__super.call(this,512,0);var J_b=8*J_pa.BYTES_PE;this.position=[2,5126,!1,J_b,0],this.texcoord=[2,5126,!1,J_b,2*J_pa.BYTES_PE],this.color=[4,5126,!1,J_b,4*J_pa.BYTES_PE]}return J_m(J_c,"laya.webgl.shader.d2.skinAnishader.SkinSV",J_Aa),J_c}(),J_Pa=function(J_a){function J_b(J_a){J_b.__super.call(this,2,0),this.color=[]}return J_m(J_b,"laya.webgl.shader.d2.value.Color2dSV",J_Aa),J_b.prototype.setValue=function(J_a){J_a.fillStyle&&(this.color=J_a.fillStyle._color._color),J_a.strokeStyle&&(this.color=J_a.strokeStyle._color._color)},J_b}(),J_Qa=function(J_a){function J_b(J_a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=J_Aa._TEXCOORD,J_b.__super.call(this,256,0)}J_m(J_b,"laya.webgl.shader.d2.value.FillTextureSV",J_Aa);var J_c=J_b.prototype;return J_c.setValue=function(J_a){this.ALPHA=J_a.ALPHA,J_a.filters&&this.setFilters(J_a.filters)},J_c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},J_b}(),J_Ra=function(J_a){function J_b(J_a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=J_Aa._TEXCOORD,void 0===J_a&&(J_a=0),J_b.__super.call(this,1,J_a)}J_m(J_b,"laya.webgl.shader.d2.value.TextureSV",J_Aa);var J_c=J_b.prototype;return J_c.setValue=function(J_a){this.ALPHA=J_a.ALPHA,J_a.filters&&this.setFilters(J_a.filters)},J_c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},J_b}(),J_Sa=function(J_a){function J_b(J_a){this.a_color=null,this.u_pos=[0,0],J_b.__super.call(this,4,0),this.position=[2,5126,!1,5*J_pa.BYTES_PE,0],this.a_color=[3,5126,!1,5*J_pa.BYTES_PE,2*J_pa.BYTES_PE]}return J_m(J_b,"laya.webgl.shader.d2.value.PrimitiveSV",J_Aa),J_b}(),J_Ta=function(J_a){function J_b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,J_b.__super.call(this)}J_m(J_b,"laya.webgl.atlas.AtlasWebGLCanvas",J_a);var J_c=J_b.prototype;return J_c.recreateResource=function(){var J_a=J_wa.mainContext,J_b=this._source=J_a.createTexture(),J_c=J_xa.curBindTexTarget,J_d=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,J_b),J_a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),J_a.texParameteri(3553,10241,9729),J_a.texParameteri(3553,10240,9729),J_a.texParameteri(3553,10242,33071),J_a.texParameteri(3553,10243,33071),J_c&&J_d&&J_xa.bindTexture(J_a,J_c,J_d),this.memorySize=this._w*this._h*4,this.completeCreate()},J_c.disposeResource=function(){this._source&&(J_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J_c.texSubImage2D=function(J_a,J_b,J_c){if(J_r.isFlash){this._flashCacheImage||(this._flashCacheImage=J_p.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var J_d=J_c.bitmapdata;this._flashCacheImage._image.copyPixels(J_d,0,0,J_d.width,J_d.height,J_a,J_b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var J_e=J_wa.mainContext,J_f=J_xa.curBindTexTarget,J_g=J_xa.curBindTexValue;J_xa.bindTexture(J_e,3553,this._source),J_e.pixelStorei(37441,!0),0<=J_a-1&&J_e.texSubImage2D(3553,0,J_a-1,J_b,6408,5121,J_c),J_a+1<=this._w&&J_e.texSubImage2D(3553,0,J_a+1,J_b,6408,5121,J_c),0<=J_b-1&&J_e.texSubImage2D(3553,0,J_a,J_b-1,6408,5121,J_c),J_b+1<=this._h&&J_e.texSubImage2D(3553,0,J_a,J_b+1,6408,5121,J_c),J_e.texSubImage2D(3553,0,J_a,J_b,6408,5121,J_c),J_e.pixelStorei(37441,!1),J_f&&J_g&&J_xa.bindTexture(J_e,J_f,J_g)}},J_c.texSubImage2DPixel=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_wa.mainContext,J_g=J_xa.curBindTexTarget,J_h=J_xa.curBindTexValue;J_xa.bindTexture(J_f,3553,this._source);var J_i=new Uint8Array(J_e.data);J_f.pixelStorei(37441,!0),J_f.texSubImage2D(3553,0,J_a,J_b,J_c,J_d,6408,5121,J_i),J_f.pixelStorei(37441,!1),J_g&&J_h&&J_xa.bindTexture(J_f,J_g,J_h)},J_d(0,J_c,"width",J_a.prototype._$get_width,function(J_a){this._w=J_a}),J_d(0,J_c,"height",J_a.prototype._$get_height,function(J_a){this._h=J_a}),J_b}(J_c),J_Ua=function(J_a){function J_e(){this.flipY=!0,this.alwaysChange=!1,J_e.__super.call(this)}J_m(J_e,"laya.webgl.resource.WebGLCanvas",J_c);var J_b=J_e.prototype;return J_b.getCanvas=function(){return this._canvas},J_b.clear=function(){this._ctx&&this._ctx.clear()},J_b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},J_b._setContext=function(J_a){this._ctx=J_a},J_b.getContext=function(J_a,J_b){return this._ctx?this._ctx:this._ctx=J_e._createContext(this)},J_b.size=function(J_a,J_b){this._w==J_a&&this._h==J_b||(this._w=J_a,this._h=J_b,this._ctx&&this._ctx.size(J_a,J_b),this._canvas&&(this._canvas.height=J_b,this._canvas.width=J_a))},J_b.activeResource=function(J_a){void 0===J_a&&(J_a=!1),this._source||this.recreateResource()},J_b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},J_b.disposeResource=function(){this._source&&!this.iscpuSource&&(J_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J_b.createWebGlTexture=function(){var J_a=J_wa.mainContext;this._canvas;var J_b=this._source=J_a.createTexture();this.iscpuSource=!1;var J_c=J_xa.curBindTexTarget,J_d=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,J_b),J_a.pixelStorei(37440,this.flipY?1:0),J_e.premulAlpha&&J_a.pixelStorei(37441,!0),J_a.texImage2D(3553,0,6408,6408,5121,this._imgData),J_e.premulAlpha&&J_a.pixelStorei(37441,!1),J_a.texParameteri(3553,10240,9729),J_a.texParameteri(3553,10241,9729),J_a.texParameteri(3553,10242,33071),J_a.texParameteri(3553,10243,33071),J_a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,J_c&&J_d&&J_xa.bindTexture(J_a,J_c,J_d)},J_b.reloadCanvasData=function(){var J_a=J_wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var J_b=J_xa.curBindTexTarget,J_c=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,this._source),J_e.premulAlpha&&J_a.pixelStorei(37441,!0),J_a.texImage2D(3553,0,6408,6408,5121,this._imgData),J_e.premulAlpha&&J_a.pixelStorei(37441,!1),J_a.pixelStorei(37440,0),J_b&&J_c&&J_xa.bindTexture(J_a,J_b,J_c)},J_b.texSubImage2D=function(J_a,J_b,J_c){var J_d=J_wa.mainContext,J_e=J_xa.curBindTexTarget,J_f=J_xa.curBindTexValue;J_xa.bindTexture(J_d,3553,this._source),J_d.pixelStorei(37441,!0),J_d.texSubImage2D(3553,0,J_b,J_c,6408,5121,J_a._source),J_d.pixelStorei(37441,!1),J_e&&J_f&&J_xa.bindTexture(J_d,J_e,J_f)},J_b.toBase64=function(J_a,J_b,J_c){var J_d=null;this._canvas&&(J_d=this._canvas.toDataURL(J_a,J_b)),J_c.call(this,J_d)},J_d(0,J_b,"context",function(){return this._ctx}),J_d(0,J_b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),J_d(0,J_b,"asBitmap",null,function(J_a){this._ctx&&(this._ctx.asBitmap=J_a)}),J_e._createContext=null,J_e.premulAlpha=!1,J_e}(),J_Va=function(J_a){function J_f(J_a,J_b){this.CborderSize=12,J_f.__super.call(this),this.char=J_a,this.isSpace=" "===J_a,this.xs=J_b.scaleX,this.ys=J_b.scaleY,this.font=J_b.font.toString(),this.fontSize=J_b.font.size,this.fillColor=J_b.fillColor,this.borderColor=J_b.borderColor,this.lineWidth=J_b.lineWidth,this.underLine=J_b.underLine;var J_c,J_d=J_r.isConchApp;J_d?((J_c=ConchTextCanvas)._source=ConchTextCanvas,J_c._source.canvas=ConchTextCanvas):J_c=J_n.canvas.source,this.canvas=J_c,this._enableMerageInAtlas=!0,this._ctx=J_d?J_c:this.canvas.getContext("2d",void 0);var J_e=J_L.measureText(this.char,this.font);this.cw=J_e.width*this.xs,this.ch=(J_e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new J_K(this)}J_m(J_f,"laya.webgl.resource.WebGLCharImage",J_c);var J_b=J_f.prototype;return J_y.imps(J_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J_b.active=function(){this.texture.active()},J_b.recreateResource=function(){var J_a=J_r.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),J_a){var J_b=this.fontSize;1==this.xs&&1==this.ys||(J_b=parseInt(J_b*(this.xs>this.ys?this.xs:this.ys)+""));var J_c="normal 100 "+this.font;J_c=J_c.replace(J_f._fontSizeReg,J_b),this.borderColor&&(J_c+=" 1 "+this.borderColor),this._ctx.font=J_c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,J_J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var J_d=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(J_d,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},J_b.onresize=function(J_a,J_b){this._w=J_a,this._h=J_b,this._allowMerageInAtlas=!0},J_b.clearAtlasSource=function(){},J_d(0,J_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J_d(0,J_b,"atlasSource",function(){return this.canvas}),J_d(0,J_b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(J_a){this._enableMerageInAtlas=J_a}),J_f.createOneChar=function(J_a,J_b){return new J_f(J_a,J_b)},J_f._fontSizeReg=new RegExp("\\d+(?=px)","g"),J_f}(),J_Wa=function(J_a){function J_j(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){void 0===J_c&&(J_c=6408),void 0===J_d&&(J_d=5121),void 0===J_e&&(J_e=34041),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=-1),void 0===J_i&&(J_i=1),J_j.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=J_a,this._h=J_b,this._surfaceFormat=J_c,this._surfaceType=J_d,this._depthStencilFormat=J_e,this._mipMap=J_f,this._repeat=J_g,this._minFifter=J_h,this._magFifter=J_i}J_m(J_j,"laya.webgl.resource.WebGLRenderTarget",J_c);var J_b=J_j.prototype;return J_b.recreateResource=function(){var J_a=J_wa.mainContext;this._frameBuffer||(this._frameBuffer=J_a.createFramebuffer()),this._source||(this._source=J_a.createTexture());var J_b=J_xa.curBindTexTarget,J_c=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,this._source),J_a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var J_d=this._minFifter,J_e=this._magFifter,J_f=this._repeat?10497:33071,J_g=J_k.isPOT(this._w,this._h);if(J_g?(this._mipMap?-1!==J_d||(J_d=9987):-1!==J_d||(J_d=9729),-1!==J_e||(J_e=9729),J_a.texParameteri(3553,10241,J_d),J_a.texParameteri(3553,10240,J_e),J_a.texParameteri(3553,10242,J_f),J_a.texParameteri(3553,10243,J_f),this._mipMap&&J_a.generateMipmap(3553)):(-1!==J_d||(J_d=9729),-1!==J_e||(J_e=9729),J_a.texParameteri(3553,10241,J_d),J_a.texParameteri(3553,10240,J_e),J_a.texParameteri(3553,10242,33071),J_a.texParameteri(3553,10243,33071)),J_a.bindFramebuffer(36160,this._frameBuffer),J_a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=J_a.createRenderbuffer()),J_a.bindRenderbuffer(36161,this._depthStencilBuffer),J_a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:J_a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:J_a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:J_a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}J_a.bindFramebuffer(36160,null),J_b&&J_c&&J_xa.bindTexture(J_a,J_b,J_c),J_a.bindRenderbuffer(36161,null),J_g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},J_b.disposeResource=function(){this._frameBuffer&&(J_wa.mainContext.deleteTexture(this._source),J_wa.mainContext.deleteFramebuffer(this._frameBuffer),J_wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},J_d(0,J_b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),J_d(0,J_b,"frameBuffer",function(){return this._frameBuffer}),J_j}(),J_Xa=function(J_a){function J_h(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this.offsetX=0,this.offsetY=0,J_h.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=J_f,this.canvas=J_a,this._ctx=J_a.getContext("2d",void 0),this._w=J_d,this._h=J_e,this.offsetX=J_b,this.offsetY=J_c,this.src=J_g,this._enableMerageInAtlas=!0,J_Q.enabled&&this._w<J_Q.atlasLimitWidth&&this._h<J_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}J_m(J_h,"laya.webgl.resource.WebGLSubImage",J_c);var J_b=J_h.prototype;return J_y.imps(J_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J_b.size=function(J_a,J_b){this._w=J_a,this._h=J_b,this._ctx&&this._ctx.size(J_a,J_b),this.canvas&&(this.canvas.height=J_b,this.canvas.width=J_a)},J_b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},J_b.createWebGlTexture=function(){var J_a=J_wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var J_b=this._source=J_a.createTexture(),J_c=J_xa.curBindTexTarget,J_d=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,J_b),J_a.pixelStorei(37441,!0),J_a.texImage2D(3553,0,6408,6408,5121,this.canvas),J_a.pixelStorei(37441,!1);var J_e=this.minFifter,J_f=this.magFifter,J_g=this.repeat?10497:33071,J_h=J_k.isPOT(this.width,this.height);J_h?(this.mipmap?-1!==J_e||(J_e=9987):-1!==J_e||(J_e=9729),-1!==J_f||(J_f=9729),J_a.texParameteri(3553,10240,J_f),J_a.texParameteri(3553,10241,J_e),J_a.texParameteri(3553,10242,J_g),J_a.texParameteri(3553,10243,J_g),this.mipmap&&J_a.generateMipmap(3553)):(-1!==J_e||(J_e=9729),-1!==J_f||(J_f=9729),J_a.texParameteri(3553,10241,J_e),J_a.texParameteri(3553,10240,J_f),J_a.texParameteri(3553,10242,33071),J_a.texParameteri(3553,10243,33071)),J_c&&J_d&&J_xa.bindTexture(J_a,J_c,J_d),this.canvas=null,J_h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},J_b.disposeResource=function(){J_Q.enabled&&this._allowMerageInAtlas||!this._source||(J_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J_b.clearAtlasSource=function(){},J_d(0,J_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J_d(0,J_b,"atlasSource",function(){return this.canvas}),J_d(0,J_b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(J_a){this._allowMerageInAtlas=J_a}),J_h}(),J_Ya=function(J_a){function J_j(J_a,J_b,J_c,J_d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,J_j.__super.call(this),!J_a||!J_b)throw"Shader Error";this._id=++J_j._count,this._vs=J_a,this._ps=J_b,this._nameMap=J_d||{},null!=J_c&&(J_j.sharders[J_c]=this)}J_m(J_j,"laya.webgl.shader.Shader",J_La);var J_b=J_j.prototype;return J_b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},J_b.disposeResource=function(){J_wa.mainContext.deleteShader(this._vshader),J_wa.mainContext.deleteShader(this._pshader),J_wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},J_b._compile=function(){if(!J_wa.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var J_a=[this._vs,this._ps],J_b=J_wa.mainContext;if(this._program=J_b.createProgram(),this._vshader=J_j._createShader(J_b,J_a[0],35633),this._pshader=J_j._createShader(J_b,J_a[1],35632),J_b.attachShader(this._program,this._vshader),J_b.attachShader(this._program,this._pshader),J_b.linkProgram(this._program),!J_r.isConchApp&&!J_b.getProgramParameter(this._program,35714))throw J_b.getProgramInfoLog(this._program);var J_c,J_d,J_e=0,J_f=0;for(J_f=J_r.isConchApp?J_b.getProgramParameterEx(this._vs,this._ps,"",35721):J_b.getProgramParameter(this._program,35721),J_e=0;J_e<J_f;J_e++){var J_g=null;J_c={vartype:"attribute",glfun:null,ivartype:0,attrib:J_g=J_r.isConchApp?J_b.getActiveAttribEx(this._vs,this._ps,"",J_e):J_b.getActiveAttrib(this._program,J_e),location:J_b.getAttribLocation(this._program,J_g.name),name:J_g.name,type:J_g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(J_c)}var J_h=0;for(J_h=J_r.isConchApp?J_b.getProgramParameterEx(this._vs,this._ps,"",35718):J_b.getProgramParameter(this._program,35718),J_e=0;J_e<J_h;J_e++){var J_i=null;J_i=J_r.isConchApp?J_b.getActiveUniformEx(this._vs,this._ps,"",J_e):J_b.getActiveUniform(this._program,J_e),0<(J_c={vartype:"uniform",glfun:null,ivartype:1,attrib:J_g,location:J_b.getUniformLocation(this._program,J_i.name),name:J_i.name,type:J_i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(J_c.name=J_c.name.substr(0,J_c.name.length-3),J_c.isArray=!0,J_c.location=J_b.getUniformLocation(this._program,J_c.name)),this._params.push(J_c)}for(J_e=0,J_d=this._params.length;J_e<J_d;J_e++)if((J_c=this._params[J_e]).indexOfParams=J_e,J_c.index=1,J_c.value=[J_c.location,null],J_c.codename=J_c.name,J_c.name=this._nameMap[J_c.codename]?this._nameMap[J_c.codename]:J_c.codename,(this._paramsMap[J_c.name]=J_c)._this=this,J_c.uploadedValue=[],"attribute"!==J_c.vartype)switch(J_c.type){case 5124:J_c.fun=J_c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:J_c.fun=J_c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:J_c.fun=J_c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:J_c.fun=J_c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:J_c.fun=J_c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:J_c.fun=this._uniform_sampler2D;break;case 35680:J_c.fun=this._uniform_samplerCube;break;case 35676:J_c.glfun=J_b.uniformMatrix4fv,J_c.fun=this._uniformMatrix4fv;break;case 35670:J_c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else J_c.fun=this._attribute}},J_b.getUniform=function(J_a){return this._paramsMap[J_a]},J_b._attribute=function(J_a,J_b){var J_c=J_wa.mainContext,J_d=J_Na._enableAtributes,J_e=J_a.location;return J_d[J_e]||J_c.enableVertexAttribArray(J_e),J_c.vertexAttribPointer(J_e,J_b[0],J_b[1],J_b[2],J_b[3],J_b[4]+this._offset),J_d[J_e]=J_Na._bindVertexBuffer,1},J_b._uniform1f=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b?(J_wa.mainContext.uniform1f(J_a.location,J_c[0]=J_b),1):0},J_b._uniform1fv=function(J_a,J_b){if(J_b.length<4){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_wa.mainContext.uniform1fv(J_a.location,J_b),J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3],1):0}return J_wa.mainContext.uniform1fv(J_a.location,J_b),1},J_b._uniform_vec2=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]?(J_wa.mainContext.uniform2f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1]),1):0},J_b._uniform_vec2v=function(J_a,J_b){if(J_b.length<2){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_wa.mainContext.uniform2fv(J_a.location,J_b),J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3],1):0}return J_wa.mainContext.uniform2fv(J_a.location,J_b),1},J_b._uniform_vec3=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]?(J_wa.mainContext.uniform3f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2]),1):0},J_b._uniform_vec3v=function(J_a,J_b){return J_wa.mainContext.uniform3fv(J_a.location,J_b),1},J_b._uniform_vec4=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_wa.mainContext.uniform4f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3]),1):0},J_b._uniform_vec4v=function(J_a,J_b){return J_wa.mainContext.uniform4fv(J_a.location,J_b),1},J_b._uniformMatrix2fv=function(J_a,J_b){return J_wa.mainContext.uniformMatrix2fv(J_a.location,!1,J_b),1},J_b._uniformMatrix3fv=function(J_a,J_b){return J_wa.mainContext.uniformMatrix3fv(J_a.location,!1,J_b),1},J_b._uniformMatrix4fv=function(J_a,J_b){return J_wa.mainContext.uniformMatrix4fv(J_a.location,!1,J_b),1},J_b._uniform1i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b?(J_wa.mainContext.uniform1i(J_a.location,J_c[0]=J_b),1):0},J_b._uniform1iv=function(J_a,J_b){return J_wa.mainContext.uniform1iv(J_a.location,J_b),1},J_b._uniform_ivec2=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]?(J_wa.mainContext.uniform2i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1]),1):0},J_b._uniform_ivec2v=function(J_a,J_b){return J_wa.mainContext.uniform2iv(J_a.location,J_b),1},J_b._uniform_vec3i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]?(J_wa.mainContext.uniform3i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2]),1):0},J_b._uniform_vec3vi=function(J_a,J_b){return J_wa.mainContext.uniform3iv(J_a.location,J_b),1},J_b._uniform_vec4i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_wa.mainContext.uniform4i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3]),1):0},J_b._uniform_vec4vi=function(J_a,J_b){return J_wa.mainContext.uniform4iv(J_a.location,J_b),1},J_b._uniform_sampler2D=function(J_a,J_b){var J_c=J_wa.mainContext,J_d=J_a.uploadedValue;return null==J_d[0]?(J_d[0]=this._curActTexIndex,J_c.uniform1i(J_a.location,this._curActTexIndex),J_c.activeTexture(J_j._TEXTURES[this._curActTexIndex]),J_xa.bindTexture(J_c,3553,J_b),this._curActTexIndex++,1):(J_c.activeTexture(J_j._TEXTURES[J_d[0]]),J_xa.bindTexture(J_c,3553,J_b),0)},J_b._uniform_samplerCube=function(J_a,J_b){var J_c=J_wa.mainContext,J_d=J_a.uploadedValue;return null==J_d[0]?(J_d[0]=this._curActTexIndex,J_c.uniform1i(J_a.location,this._curActTexIndex),J_c.activeTexture(J_j._TEXTURES[this._curActTexIndex]),J_xa.bindTexture(J_c,34067,J_b),this._curActTexIndex++,1):(J_c.activeTexture(J_j._TEXTURES[J_d[0]]),J_xa.bindTexture(J_c,34067,J_b),0)},J_b._noSetValue=function(J_a){console.log("no....:"+J_a.name)},J_b.uploadOne=function(J_a,J_b){this.activeResource(),J_xa.UseProgram(this._program);var J_c=this._paramsMap[J_a];J_c.fun.call(this,J_c,J_b)},J_b.uploadTexture2D=function(J_a){J_G.shaderCall++;var J_b=J_wa.mainContext;J_b.activeTexture(33984),J_xa.bindTexture(J_b,3553,J_a)},J_b.uploadTexture2D1=function(J_a){J_G.shaderCall++;var J_b=J_wa.mainContext;J_b.activeTexture(33985),J_xa.bindTexture(J_b,3553,J_a)},J_b.upload=function(J_a,J_b){J_La.activeShader=J_La.bindShader=this,this._lastUseFrameCount===J_G.loopCount||this.activeResource(),J_xa.UseProgram(this._program),this._reCompile?(J_b=this._params,this._reCompile=!1):J_b=J_b||this._params;J_wa.mainContext;for(var J_c,J_d,J_e=J_b.length,J_f=0,J_g=0;J_g<J_e;J_g++)null!==(J_d=J_a[(J_c=J_b[J_g]).name])&&(J_f+=J_c.fun.call(this,J_c,J_d));J_G.shaderCall+=J_f},J_b.uploadArray=function(J_a,J_b,J_c){J_La.activeShader=this,(J_La.bindShader=this).activeResource(),J_xa.UseProgram(this._program);this._params;for(var J_d,J_e,J_f=0,J_g=J_b-2;0<=J_g;J_g-=2)(J_e=this._paramsMap[J_a[J_g]])&&null!=(J_d=J_a[J_g+1])&&(J_c&&J_c[J_e.name]&&J_c[J_e.name].bind(),J_f+=J_e.fun.call(this,J_e,J_d));J_G.shaderCall+=J_f},J_b.getParams=function(){return this._params},J_j.getShader=function(J_a){return J_j.sharders[J_a]},J_j.create=function(J_a,J_b,J_c,J_d){return new J_j(J_a,J_b,J_c,J_d)},J_j.withCompile=function(J_a,J_b,J_c,J_d){if(J_c&&J_j.sharders[J_c])return J_j.sharders[J_c];var J_e=J_j._preCompileShader[2e-4*J_a];if(!J_e)throw new Error("withCompile shader err!"+J_a);return J_e.createShader(J_b,J_c,J_d)},J_j.withCompile2D=function(J_a,J_b,J_c,J_d,J_e){if(J_d&&J_j.sharders[J_d])return J_j.sharders[J_d];var J_f=J_j._preCompileShader[2e-4*J_a+J_b];if(!J_f)throw new Error("withCompile shader err!"+J_a+" "+J_b);return J_f.createShader(J_c,J_d,J_e)},J_j.addInclude=function(J_a,J_b){J_va.addInclude(J_a,J_b)},J_j.preCompile=function(J_a,J_b,J_c,J_d){var J_e=2e-4*J_a;J_j._preCompileShader[J_e]=new J_va(J_e,J_b,J_c,J_d)},J_j.preCompile2D=function(J_a,J_b,J_c,J_d,J_e){var J_f=2e-4*J_a+J_b;J_j._preCompileShader[J_f]=new J_va(J_f,J_c,J_d,J_e)},J_j._createShader=function(J_a,J_b,J_c){var J_d=J_a.createShader(J_c);return J_a.shaderSource(J_d,J_b),J_a.compileShader(J_d),J_d},J_j._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],J_j._count=0,J_j._preCompileShader={},J_j.SHADERNAME2ID=2e-4,J_j.sharders=((J_j.sharders=[]).length=32,J_j.sharders),J_g(J_j,["nameKey",function(){return this.nameKey=new J_H}]),J_j}(),J_Za=function(J_a){function J_b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,J_b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}J_m(J_b,"laya.webgl.utils.Buffer2D",J_a);var J_c=J_b.prototype;return J_c.needSize=function(J_a){var J_b=this._byteLength;if(J_a){var J_c=this._byteLength+J_a;J_c<=this._buffer.byteLength||this._resizeBuffer(J_c<<1,!0),this._byteLength=J_c}return J_b},J_c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),J_G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,J_Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),J_Na._gl.bufferSubData(this._bufferType,0,this._buffer)},J_c._bufferSubData=function(J_a,J_b,J_c){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),J_G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,J_Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),J_b||J_c){var J_d=this._buffer.slice(J_b,J_c);J_Na._gl.bufferSubData(this._bufferType,J_a,J_d)}else J_Na._gl.bufferSubData(this._bufferType,J_a,this._buffer)},J_c._checkArrayUse=function(){},J_c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},J_c._bind_subUpload=function(J_a,J_b,J_c){return void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(J_a,J_b,J_c),!0)},J_c._resizeBuffer=function(J_a,J_b){if(J_a<this._buffer.byteLength)return this;if(this.memorySize=J_a,J_b&&this._buffer&&0<this._buffer.byteLength){var J_c=new ArrayBuffer(J_a);new Uint8Array(J_c).set(new Uint8Array(this._buffer),0),this._buffer=J_c}else this._buffer=new ArrayBuffer(J_a);return this._checkArrayUse(),this._upload=!0,this},J_c.append=function(J_a){this._upload=!0;var J_b,J_c;J_b=J_a.byteLength,J_a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+J_b,!0),J_c=new Uint8Array(this._buffer,this._byteLength)):J_a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+J_b,!0),J_c=new Uint16Array(this._buffer,this._byteLength)):J_a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+J_b,!0),J_c=new Float32Array(this._buffer,this._byteLength)),J_c.set(J_a,0),this._byteLength+=J_b,this._checkArrayUse()},J_c.appendU16Array=function(J_a,J_b){this._resizeBuffer(this._byteLength+2*J_b,!0);for(var J_c=new Uint16Array(this._buffer,this._byteLength,J_b),J_d=0;J_d<J_b;J_d++)J_c[J_d]=J_a[J_d];this._byteLength+=2*J_b,this._checkArrayUse()},J_c.appendEx=function(J_a,J_b){this._upload=!0;var J_c;J_c=J_a.byteLength,this._resizeBuffer(this._byteLength+J_c,!0),new J_b(this._buffer,this._byteLength).set(J_a,0),this._byteLength+=J_c,this._checkArrayUse()},J_c.appendEx2=function(J_a,J_b,J_c,J_d){void 0===J_d&&(J_d=1),this._upload=!0;var J_e,J_f;J_e=J_c*J_d,this._resizeBuffer(this._byteLength+J_e,!0),J_f=new J_b(this._buffer,this._byteLength);var J_g=0;for(J_g=0;J_g<J_c;J_g++)J_f[J_g]=J_a[J_g];this._byteLength+=J_e,this._checkArrayUse()},J_c.getBuffer=function(){return this._buffer},J_c.setNeedUpload=function(){this._upload=!0},J_c.getNeedUpload=function(){return this._upload},J_c.upload=function(){var J_a=this._bind_upload();return J_Na._gl.bindBuffer(this._bufferType,null),J_Na._bindActive[this._bufferType]=null,J_La.activeShader=null,J_a},J_c.subUpload=function(J_a,J_b,J_c){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0);var J_d=this._bind_subUpload();return J_Na._gl.bindBuffer(this._bufferType,null),J_Na._bindActive[this._bufferType]=null,J_La.activeShader=null,J_d},J_c.disposeResource=function(){J_a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},J_c.clear=function(){this._byteLength=0,this._upload=!0},J_d(0,J_c,"bufferLength",function(){return this._buffer.byteLength}),J_d(0,J_c,"byteLength",null,function(J_a){this._byteLength!==J_a&&(J_a<=this._buffer.byteLength||this._resizeBuffer(2*J_a+256,!0),this._byteLength=J_a)}),J_b.__int__=function(J_a){J_sa.QuadrangleIB=J_sa.create(35044),J_qa.fillIBQuadrangle(J_sa.QuadrangleIB,16)},J_b.FLOAT32=4,J_b.SHORT=2,J_b}(J_Na),J_$a=(function(J_b){function J_c(J_a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,J_c.__super.call(this,9)}J_m(J_c,"laya.webgl.shader.d2.value.GlowSV",J_b);var J_a=J_c.prototype;J_a.setValue=function(J_a){J_b.prototype.setValue.call(this,J_a)},J_a.clear=function(){J_b.prototype.clear.call(this)}}(J_Ra),function(J_a){function J_b(J_a){J_b.__super.call(this,64),this.defines.add(64)}J_m(J_b,"laya.webgl.shader.d2.value.TextSV",J_a);var J_c=J_b.prototype;return J_c.release=function(){(J_b.pool[J_b._length++]=this).clear()},J_c.clear=function(){J_a.prototype.clear.call(this)},J_b.create=function(){return J_b._length?J_b.pool[--J_b._length]:new J_b(null)},J_b.pool=[],J_b._length=0,J_b}(J_Ra)),J__a=function(J_a){function J_e(J_a,J_b,J_c,J_d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,J_e.__super.call(this,J_a,J_b,J_c,J_d)}J_m(J_e,"laya.webgl.shader.d2.Shader2X",J_a);var J_b=J_e.prototype;return J_b.upload2dQuick1=function(J_a){this.upload(J_a,this._params2dQuick1||this._make2dQuick1())},J_b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var J_a,J_b=this._params,J_c=0,J_d=J_b.length;J_c<J_d;J_c++)J_a=J_b[J_c],(J_r.isFlash||"size"!==J_a.name&&"position"!==J_a.name&&"texcoord"!==J_a.name)&&this._params2dQuick1.push(J_a)}return this._params2dQuick1},J_b.disposeResource=function(){J_a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},J_b.upload2dQuick2=function(J_a){this.upload(J_a,this._params2dQuick2||this._make2dQuick2())},J_b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var J_a,J_b=this._params,J_c=0,J_d=J_b.length;J_c<J_d;J_c++)J_a=J_b[J_c],(J_r.isFlash||"size"!==J_a.name)&&this._params2dQuick2.push(J_a)}return this._params2dQuick2},J_e.create=function(J_a,J_b,J_c,J_d){return new J_e(J_a,J_b,J_c,J_d)},J_e}(J_Ya),J_sa=function(J_a){function J_b(J_a){this._uint8Array=null,this._uint16Array=null,void 0===J_a&&(J_a=35044),J_b.__super.call(this),this._bufferUsage=J_a,this._bufferType=34963,J_r.isFlash||(this._buffer=new ArrayBuffer(8))}J_m(J_b,"laya.webgl.utils.IndexBuffer2D",J_Za);var J_c=J_b.prototype;return J_c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},J_c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},J_c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},J_c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},J_b.QuadrangleIB=null,J_b.create=function(J_a){return void 0===J_a&&(J_a=35044),new J_b(J_a)},J_b}(),J_ta=function(J_a){function J_c(J_a,J_b){this._floatArray32=null,this._vertexStride=0,J_c.__super.call(this),this._vertexStride=J_a,this._bufferUsage=J_b,this._bufferType=34962,J_r.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}J_m(J_c,"laya.webgl.utils.VertexBuffer2D",J_a);var J_b=J_c.prototype;return J_b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},J_b.bind=function(J_a){J_a&&J_a._bind(),this._bind()},J_b.insertData=function(J_a,J_b){this.getFloat32Array().set(J_a,J_b),this._upload=!0},J_b.bind_upload=function(J_a){J_a._bind_upload()||J_a._bind(),this._bind_upload()||this._bind()},J_b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},J_b.disposeResource=function(){J_a.prototype.disposeResource.call(this)},J_b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},J_d(0,J_b,"vertexStride",function(){return this._vertexStride}),J_c.create=function(J_a,J_b){return void 0===J_b&&(J_b=35048),new J_c(J_a,J_b)},J_c}(J_Za),J_ab=function(J_a){function J_h(J_a,J_b,J_c,J_d,J_e,J_f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===J_c&&(J_c=6408),void 0===J_d&&(J_d=!0),J_h.__super.call(this,J_a,J_b),J_a){if(this._format=J_c,this._mipmap=J_d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof J_a)this._url=J_a,this._src=J_a,this._image=new J_n.window.Image,J_b&&(J_b.onload&&(this.onload=J_b.onload),J_b.onerror&&(this.onerror=J_b.onerror),J_b.onCreate&&J_b.onCreate(this)),this._image.crossOrigin=J_a&&0==J_a.indexOf("data:")?null:"",J_a&&(this._image.src=J_a);else if(J_a instanceof ArrayBuffer){this._src=J_b,this._url=this._src;var J_g=new J_i(J_a);J_g.readUTFBytes(4),J_g.readUTFBytes(2),J_g.getInt16();J_g.endian="bigEndian",this._w=J_g.getInt16(),this._h=J_g.getInt16();J_g.getInt16(),J_g.getInt16();this._image=new Uint8Array(J_a,J_g.pos),this._format=J_wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,J_Q.enabled&&this._w<J_Q.atlasLimitWidth&&this._h<J_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(J_a instanceof Uint8Array))return this._src=J_b,this._url=this._src,this._image=J_a.source||J_a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=J_b,this._url=this._src,this._w=J_e,this._h=J_f,this._image=J_a,this._format=0===J_c?J_a.byteLength/(J_e*J_f)==4?6408:6407:J_c}this._$5__enableMerageInAtlas=!0}}J_m(J_h,"laya.webgl.resource.WebGLImage",J_p);var J_b=J_h.prototype;return J_y.imps(J_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J_b._init_=function(J_a,J_b){},J_b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var J_a=J_wa.mainContext,J_b=this._source=J_a.createTexture(),J_c=J_xa.curBindTexTarget,J_d=J_xa.curBindTexValue;J_xa.bindTexture(J_a,3553,J_b);var J_e=this.minFifter,J_f=this.magFifter,J_g=this.repeat?10497:33071,J_h=J_k.isPOT(this._w,this._h),J_i=!1;switch(J_h?(this.mipmap?-1!==J_e||(J_e=9987):-1!==J_e||(J_e=9729),-1!==J_f||(J_f=9729),J_a.texParameteri(3553,10241,J_e),J_a.texParameteri(3553,10240,J_f),J_a.texParameteri(3553,10242,J_g),J_a.texParameteri(3553,10243,J_g),this.mipmap&&J_a.generateMipmap(3553)):(-1!==J_e||(J_e=9729),-1!==J_f||(J_f=9729),J_a.texParameteri(3553,10241,J_e),J_a.texParameteri(3553,10240,J_f),J_a.texParameteri(3553,10242,33071),J_a.texParameteri(3553,10243,33071)),J_a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&J_a.pixelStorei(J_a.UNPACK_ALIGNMENT,1),J_a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&J_a.pixelStorei(J_a.UNPACK_ALIGNMENT,1),J_a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:J_i=!0,J_a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case J_wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:J_i=!0,J_a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}J_a.pixelStorei(37441,!1),J_c&&J_d&&J_xa.bindTexture(J_a,J_c,J_d),this.uri||(this.uri=this._url),J_i?this.memorySize=this._image.length:J_h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},J_b.recreateResource=function(){var J_a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var J_b=this;this._image=new J_n.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(J_b._needReleaseAgain)return J_b._needReleaseAgain=!1,J_b._image.onload=null,void(J_b._image=null);J_b._allowMerageInAtlas&&J_b._enableMerageInAtlas?(J_a.memorySize=0,J_a._recreateLock=!1):J_b._createWebGlTexture(),J_b.completeCreate()},this._image.src=this._src}},J_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&J_wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},J_b.onresize=function(){this._w=this._image.width,this._h=this._image.height,J_Q.enabled&&this._w<J_Q.atlasLimitWidth&&this._h<J_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},J_b.clearAtlasSource=function(){this._image=null},J_d(0,J_b,"format",function(){return this._format}),J_d(0,J_b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(J_a){this._$5__enableMerageInAtlas=J_a}),J_d(0,J_b,"mipmap",function(){return this._mipmap}),J_d(0,J_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J_d(0,J_b,"atlasSource",function(){return this._image}),J_d(0,J_b,"onload",null,function(J_a){var J_b=this;this._onload=J_a,this._image&&(this._image.onload=null!=this._onload?function(){J_b.onresize(),J_b._onload()}:null)}),J_d(0,J_b,"onerror",null,function(J_a){var J_b=this;this._onerror=J_a,this._image&&(this._image.onerror=null!=this._onerror?function(){J_b._onerror()}:null)}),J_h}();J_y.__init([J_na,J_P,J_za,J_va])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}}),function(J_f,J_a,J_d){J_d.un,J_d.uns;var J_e=J_d.static,J_g=J_d.class,J_h=J_d.getset,J_i=(J_d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),J_o=laya.utils.ClassUtils,J_l=(laya.events.Event,laya.utils.HTMLChar),J_j=laya.net.Loader,J_k=(laya.display.Node,laya.maths.Rectangle),J_m=laya.renders.Render,J_n=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),J_p=laya.utils.Stat,J_L=laya.display.Text,J_q=laya.resource.Texture,J_r=laya.net.URL,J_u=laya.utils.Utils,J_v=function(){function J_n(){}return J_g(J_n,"laya.html.utils.HTMLParse"),J_n.parse=function(J_a,J_b,J_c){J_b=(J_b="<root>"+(J_b=J_b.replace(/<br>/g,"<br/>"))+"</root>").replace(J_n.spacePattern,J_n.char255);var J_d=J_u.parseXMLFromString(J_b);J_n._parseXML(J_a,J_d.childNodes[0].childNodes,J_c)},J_n._parseXML=function(J_a,J_b,J_c,J_d){var J_e=0,J_f=0;if(J_b.join||J_b.item)for(J_e=0,J_f=J_b.length;J_e<J_f;++J_e)J_n._parseXML(J_a,J_b[J_e],J_c,J_d);else{var J_g,J_h,J_i;if(3==J_b.nodeType)return void(J_a instanceof laya.html.dom.HTMLDivElement?(null==J_b.nodeName&&(J_b.nodeName="#text"),J_h=J_b.nodeName.toLowerCase(),0<(J_i=J_b.textContent.replace(/^\s+|\s+$/g,"")).length&&(J_g=J_o.getInstance(J_h))&&(J_a.addChild(J_g),J_g.innerTEXT=J_i.replace(J_n.char255AndOneSpacePattern," "))):0<(J_i=J_b.textContent.replace(/^\s+|\s+$/g,"")).length&&(J_a.innerTEXT=J_i.replace(J_n.char255AndOneSpacePattern," ")));if("#comment"==(J_h=J_b.nodeName.toLowerCase()))return;if(J_g=J_o.getInstance(J_h)){(J_g=J_a.addChild(J_g)).URI=J_c,J_g.href=J_d;var J_j=J_b.attributes;if(J_j&&0<J_j.length)for(J_e=0,J_f=J_j.length;J_e<J_f;++J_e){var J_k=J_j[J_e],J_l=J_k.nodeName,J_m=J_k.value;J_g._setAttributes(J_l,J_m)}J_n._parseXML(J_g,J_b.childNodes,J_c,J_g.href)}else J_n._parseXML(J_a,J_b.childNodes,J_c,J_d)}},J_n.char255=String.fromCharCode(255),J_n.spacePattern=/&nbsp;|&#160;/g,J_n.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),J_n}(),J_w=function(){function J_K(){}return J_g(J_K,"laya.html.utils.Layout"),J_K.later=function(J_a){null==J_K._will&&(J_K._will=[],J_d.stage.frameLoop(1,null,function(){if(!(J_K._will.length<1)){for(var J_a=0;J_a<J_K._will.length;J_a++)laya.html.utils.Layout.layout(J_K._will[J_a]);J_K._will.length=0}})),J_K._will.push(J_a)},J_K.layout=function(J_a){if(!J_a||!J_a._style)return null;if(0==(512&J_a._style._type))return null;J_a.getStyle()._type&=-513;var J_b=J_K._multiLineLayout(J_a);return J_m.isConchApp&&J_a.layaoutCallNative&&J_a.layaoutCallNative(),J_b},J_K._multiLineLayout=function(J_a){if(J_L.RightToLeft)return J_K._multiLineLayout2(J_a);var J_b=new Array;J_a._addChildsToLayout(J_b);var J_c,J_d,J_e,J_f,J_g,J_h=0,J_i=J_b.length,J_j=J_a._getCSSStyle(),J_k=J_j.letterSpacing,J_l=J_j.leading,J_m=J_j.lineHeight,J_n=J_j._widthAuto()||!J_j.wordWrap,J_o=J_n?999999:J_a.width,J_p=(J_a.height,0),J_q=J_j.italic?J_j.fontSize/3:0,J_r=J_j._getAlign(),J_u=J_j._getValign(),J_v=0!==J_u||0!==J_r||0!=J_m,J_w=0,J_x=0,J_y=0,J_z=0,J_A=new Array,J_B=J_A[0]=new J_M,J_C=!1,J_D=!1;J_B.h=0,J_j.italic&&(J_o-=J_j.fontSize/3);var J_E=0,J_F=!0;function J_G(){J_B.y=J_x,J_x+=J_B.h+J_l,0==J_B.h&&(J_x+=J_m),J_B.mWidth=J_E,J_E=0,J_B=new J_M,J_A.push(J_B),J_B.h=0,J_C=!(J_F=!(J_w=0))}for(J_h=0;J_h<J_i;J_h++)if(null!=(J_c=J_b[J_h]))if(J_F=!1,J_c instanceof laya.html.dom.HTMLBrElement)J_G(),J_B.y=J_x;else{if(J_c._isChar()){if((J_f=J_c).isWord)J_C=J_D||"\n"===J_f.char,J_B.wordStartIndex=J_B.elements.length;else{if(J_y=J_f.width+J_f.style.letterSpacin,0<J_A.length&&J_o<J_w+J_y&&0<J_B.wordStartIndex){var J_H;J_H=J_B.elements.length-J_B.wordStartIndex+1,J_B.elements.length=J_B.wordStartIndex,J_h-=J_H,J_G();continue}J_C=!1,J_E+=J_f.width}J_y=J_f.width+J_k,J_z=J_f.height,J_D=!1,(J_C=J_C||J_o<J_w+J_y)&&J_G(),J_B.minTextHeight=Math.min(J_B.minTextHeight,J_c.height)}else J_d=J_c._getCSSStyle(),J_g=J_c,J_e=J_d.padding,0===J_d._getCssFloat()||(J_v=!0),J_C=J_D||J_d.lineElement,J_y=J_g.width*J_g._style._tf.scaleX+J_e[1]+J_e[3]+J_k,J_z=J_g.height*J_g._style._tf.scaleY+J_e[0]+J_e[2],J_D=J_d.lineElement,(J_C=J_C||J_o<J_w+J_y&&J_d.wordWrap)&&J_G();J_B.elements.push(J_c),J_B.h=Math.max(J_B.h,J_z),J_c.x=J_w,J_c.y=J_x,J_w+=J_y,J_B.w=J_w-J_k,J_B.y=J_x,J_p=Math.max(J_w+J_q,J_p)}else J_F||(J_w+=J_K.DIV_ELEMENT_PADDING),J_B.wordStartIndex=J_B.elements.length;if(J_x=J_B.y+J_B.h,J_v){var J_I=0,J_J=J_o;for(J_n&&0<J_a.width&&(J_J=J_a.width),J_h=0,J_i=J_A.length;J_h<J_i;J_h++)J_A[J_h].updatePos(0,J_J,J_h,J_I,J_r,J_u,J_m),J_I+=Math.max(J_m,J_A[J_h].h+J_l);J_x=J_I}return J_n&&(J_a.width=J_p),J_x>J_a.height&&(J_a.height=J_x),[J_p,J_x]},J_K._multiLineLayout2=function(J_a){var J_b=new Array;J_a._addChildsToLayout(J_b);var J_c,J_d,J_e,J_f,J_g,J_h=0,J_i=J_b.length,J_j=J_a._getCSSStyle(),J_k=J_j.letterSpacing,J_l=J_j.leading,J_m=J_j.lineHeight,J_n=J_j._widthAuto()||!J_j.wordWrap,J_o=J_n?999999:J_a.width,J_p=(J_a.height,0),J_q=J_j.italic?J_j.fontSize/3:0,J_r=2-J_j._getAlign(),J_u=J_j._getValign(),J_v=0!==J_u||0!=J_r||0!=J_m,J_w=0,J_x=0,J_y=0,J_z=0,J_A=new Array,J_B=J_A[0]=new J_M,J_C=!1,J_D=!1;J_B.h=0,J_j.italic&&(J_o-=J_j.fontSize/3);var J_E=0,J_F=!0;function J_G(){J_B.y=J_x,J_x+=J_B.h+J_l,0==J_B.h&&(J_x+=J_m),J_B.mWidth=J_E,J_E=0,J_B=new J_M,J_A.push(J_B),J_B.h=0,J_C=!(J_F=!(J_w=0))}for(J_h=0;J_h<J_i;J_h++)if(null!=(J_c=J_b[J_h]))if(J_F=!1,J_c instanceof laya.html.dom.HTMLBrElement)J_G(),J_B.y=J_x;else{if(J_c._isChar()){if((J_f=J_c).isWord)J_C=J_D||"\n"===J_f.char,J_B.wordStartIndex=J_B.elements.length;else{if(0<J_A.length&&J_o<J_w+J_y&&0<J_B.wordStartIndex){var J_H;J_H=J_B.elements.length-J_B.wordStartIndex+1,J_B.elements.length=J_B.wordStartIndex,J_h-=J_H,J_G();continue}J_C=!1,J_E+=J_f.width}J_y=J_f.width+J_k,J_z=J_f.height,J_D=!1,(J_C=J_C||J_o<J_w+J_y)&&J_G(),J_B.minTextHeight=Math.min(J_B.minTextHeight,J_c.height)}else J_d=J_c._getCSSStyle(),J_g=J_c,J_e=J_d.padding,0===J_d._getCssFloat()||(J_v=!0),J_C=J_D||J_d.lineElement,J_y=J_g.width*J_g._style._tf.scaleX+J_e[1]+J_e[3]+J_k,J_z=J_g.height*J_g._style._tf.scaleY+J_e[0]+J_e[2],J_D=J_d.lineElement,(J_C=J_C||J_o<J_w+J_y&&J_d.wordWrap)&&J_G();J_B.elements.push(J_c),J_B.h=Math.max(J_B.h,J_z),J_c.x=J_w,J_c.y=J_x,J_w+=J_y,J_B.w=J_w-J_k,J_B.y=J_x,J_p=Math.max(J_w+J_q,J_p)}else J_F||(J_w+=J_K.DIV_ELEMENT_PADDING),J_B.wordStartIndex=J_B.elements.length;if(J_x=J_B.y+J_B.h,J_v){var J_I=0,J_J=J_o;for(J_h=0,J_i=J_A.length;J_h<J_i;J_h++)J_A[J_h].updatePos(0,J_J,J_h,J_I,J_r,J_u,J_m),J_I+=Math.max(J_m,J_A[J_h].h+J_l);J_x=J_I}for(J_n&&(J_a.width=J_p),J_x>J_a.height&&(J_a.height=J_x),J_h=0,J_i=J_A.length;J_h<J_i;J_h++)J_A[J_h].revertOrder(J_o);return[J_p,J_x]},J_K._will=null,J_K.DIV_ELEMENT_PADDING=0,J_K}(),J_M=function(){function J_a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}J_g(J_a,"laya.html.utils.LayoutLine");var J_b=J_a.prototype;return J_b.updatePos=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h,J_i=0;0<this.elements.length&&(J_i=(J_h=this.elements[this.elements.length-1]).x+J_h.width-this.elements[0].x);var J_j=0,J_k=NaN;1===J_e&&(J_j=(J_b-J_i)/2),2===J_e&&(J_j=J_b-J_i),0===J_g||0!=J_f||(J_f=1);for(var J_l=0,J_m=this.elements.length;J_l<J_m;J_l++){var J_n=(J_h=this.elements[J_l])._getCSSStyle();switch(0!==J_j&&(J_h.x+=J_j),J_n._getValign()){case 0:J_h.y=J_d;break;case 1:var J_o=0;99999!=this.minTextHeight&&(J_o=this.minTextHeight);var J_p=(J_o+J_g)/2;J_p=Math.max(J_p,this.h),J_k=(laya.html.dom.HTMLImageElement,J_d+J_p-J_h.height),J_h.y=J_k;break;case 2:J_h.y=J_d+(J_g-J_h.height)}}},J_b.revertOrder=function(J_a){var J_b;if(0<this.elements.length){var J_c,J_d=0;for(J_c=this.elements.length,J_d=0;J_d<J_c;J_d++)(J_b=this.elements[J_d]).x=J_a-J_b.x-J_b.width}},J_a}(),J_x=function(J_c){function J_b(){this.URI=null,this._href=null,J_b.__super.call(this),this._text=J_b._EMPTYTEXT,this.setStyle(new J_i(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}J_g(J_b,"laya.html.dom.HTMLElement",J_c);var J_a=J_b.prototype;return J_a.layaoutCallNative=function(){var J_a=0;if(this._childs&&0<(J_a=this._childs.length))for(var J_b=0;J_b<J_a;J_b++)this._childs[J_b].layaoutCallNative&&this._childs[J_b].layaoutCallNative();var J_c=this._getWords();J_c?laya.html.dom.HTMLElement.fillWords(this,J_c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},J_a.appendChild=function(J_a){return this.addChild(J_a)},J_a._getWords2=function(){var J_a=this._text.text;if(!J_a||0===J_a.length)return null;var J_b,J_c,J_d=0,J_e=0;if(this._text.drawWords)J_c=this._text.drawWords;else{for(J_e=(J_b=J_a.split(" ")).length-1,J_c=[],J_d=0;J_d<J_e;J_d++)J_c.push(J_b[J_d]," ");0<=J_e&&J_c.push(J_b[J_e]),this._text.drawWords=J_c}var J_f,J_g=this._text.words;if(J_g&&J_g.length===J_c.length)return J_g;null===J_g&&(this._text.words=J_g=[]),J_g.length=J_c.length;var J_h=this.style,J_i=J_h.font;for(J_d=0,J_e=J_c.length;J_d<J_e;J_d++){J_f=J_u.measureText(J_c[J_d],J_i);var J_j=J_g[J_d]=new J_l(J_c[J_d],J_f.width,J_f.height||J_h.fontSize,J_h);if(1<J_j.char.length&&(J_j.charNum=J_j.char),this.href){var J_k=new J_n;this.addChild(J_k),J_j.setSprite(J_k)}}return J_g},J_a._getWords=function(){if(!J_L.CharacterCache)return this._getWords2();var J_a=this._text.text;if(!J_a||0===J_a.length)return null;var J_b,J_c=this._text.words;if(J_c&&J_c.length===J_a.length)return J_c;null===J_c&&(this._text.words=J_c=[]),J_c.length=J_a.length;for(var J_d=this.style,J_e=J_d.font,J_f=0,J_g=J_a.length;J_f<J_g;J_f++)if(J_b=J_u.measureText(J_a.charAt(J_f),J_e)){var J_h=J_c[J_f]=new J_l(J_a.charAt(J_f),J_b.width,J_b.height||J_d.fontSize,J_d);if(this.href){var J_i=new J_n;this.addChild(J_i),J_h.setSprite(J_i)}}else console.warn("_getWords size is null"+J_a.charAt(J_f),J_e);return J_c},J_a.showLinkSprite=function(){var J_a=this._text.words;if(J_a)for(var J_b,J_c,J_d=[],J_e=0;J_e<J_a.length;J_e++)J_c=J_a[J_e],(J_b=new J_n).graphics.drawRect(0,0,J_c.width,J_c.height,"#ff0000"),J_b.width=J_c.width,J_b.height=J_c.height,this.addChild(J_b),J_d.push(J_b)},J_a._layoutLater=function(){var J_a=this.style;512&J_a._type||(J_a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&J_a.block?(J_w.later(this),J_a._type|=512):this.parent&&this.parent._layoutLater())},J_a._setAttributes=function(J_a,J_b){switch(J_a){case"style":return void this.style.cssText(J_b);case"class":return void(this.className=J_b)}J_c.prototype._setAttributes.call(this,J_a,J_b)},J_a.updateHref=function(){if(null!=this._href){var J_a=this._getWords();if(J_a)for(var J_b,J_c,J_d=0;J_d<J_a.length;J_d++)(J_c=(J_b=J_a[J_d]).getSprite())&&(J_c.size(J_b.width,J_b.height),J_c.on("click",this,this.onLinkHandler))}},J_a.onLinkHandler=function(J_a){switch(J_a.type){case"click":for(var J_b=this;J_b;)J_b.event("link",[this.href]),J_b=J_b.parent}},J_a.formatURL=function(J_a){return this.URI?J_r.formatURL(J_a,this.URI?this.URI.path:null):J_a},J_h(0,J_a,"href",function(){return this._href},function(J_a){null!=(this._href=J_a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),J_h(0,J_a,"color",null,function(J_a){this.style.color=J_a}),J_h(0,J_a,"onClick",null,function(J_a){J_d._runScript("fn=function(event){"+J_a+";}"),this.on("click",this,void 0)}),J_h(0,J_a,"id",null,function(J_a){J_y.document.setElementById(J_a,this)}),J_h(0,J_a,"innerTEXT",function(){return this._text.text},function(J_a){this.text=J_a}),J_h(0,J_a,"style",function(){return this._style}),J_h(0,J_a,"text",function(){return this._text.text},function(J_a){this._text==J_b._EMPTYTEXT?this._text={text:J_a,words:null}:(this._text.text=J_a,this._text.words&&(this._text.words.length=0)),J_m.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),J_h(0,J_a,"parent",J_c.prototype._$get_parent,function(J_a){if(J_a instanceof laya.html.dom.HTMLElement){var J_b=J_a;this.URI||(this.URI=J_b.URI),this.style.inherit(J_b.style)}J_d.superSet(J_n,this,"parent",J_a)}),J_h(0,J_a,"className",null,function(J_a){this.style.attrs(J_y.document.styleSheets["."+J_a])}),J_b.fillWords=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_a.graphics.clear();for(var J_h=0,J_i=J_b.length;J_h<J_i;J_h++){var J_j=J_b[J_h];J_a.graphics.fillText(J_j.char,J_j.x+J_c,J_j.y+J_d,J_e,J_f,"left",J_g)}},J_b._EMPTYTEXT={text:null,words:null},J_b}(J_n),J_b=(function(J_a){function J_b(){J_b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}J_g(J_b,"laya.html.dom.HTMLBrElement",J_x)}(),function(J_a){function J_b(){this.contextHeight=NaN,this.contextWidth=NaN,J_b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}J_g(J_b,"laya.html.dom.HTMLDivElement",J_a);var J_c=J_b.prototype;return J_c.appendHTML=function(J_a){J_v.parse(this,J_a,this.URI),this.layout()},J_c._addChildsToLayout=function(J_b){var J_a=this._getWords();if(null==J_a&&0==this._childs.length)return!1;J_a&&J_a.forEach(function(J_a){J_b.push(J_a)});for(var J_c=!0,J_d=0,J_e=this._childs.length;J_d<J_e;J_d++){var J_f=this._childs[J_d];J_c?J_c=!1:J_b.push(null),J_f._addToLayout(J_b)}return!0},J_c._addToLayout=function(J_a){this.layout()},J_c.layout=function(){if(this.style){this.style._type|=512;var J_a=J_w.layout(this);if(J_a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new J_k);var J_b=this._$P.mHtmlBounds;J_b.x=J_b.y=0,J_b.width=this.contextWidth=J_a[0],J_b.height=this.contextHeight=J_a[1],this.setBounds(J_b)}}},J_h(0,J_c,"height",function(){return this._height?this._height:this.contextHeight},J_a.prototype._$set_height),J_h(0,J_c,"innerHTML",null,function(J_a){this.destroyChildren(),this.appendHTML(J_a)}),J_h(0,J_c,"width",function(){return this._width?this._width:this.contextWidth},function(J_a){var J_b=!1;J_b=0===J_a?J_a!=this._width:J_a!=this.width,J_d.superSet(J_x,this,"width",J_a),J_b&&this.layout()}),J_b}(J_x)),J_y=function(J_a){function J_b(){this.all=new Array,this.styleSheets=J_i.styleSheets,J_b.__super.call(this)}J_g(J_b,"laya.html.dom.HTMLDocument",J_x);var J_c=J_b.prototype;return J_c.getElementById=function(J_a){return this.all[J_a]},J_c.setElementById=function(J_a,J_b){this.all[J_a]=J_b},J_e(J_b,["document",function(){return this.document=new J_b}]),J_b}();(function(J_a){function J_b(){this._tex=null,this._url=null,this._renderArgs=[],J_b.__super.call(this),this.style.block=!0}J_g(J_b,"laya.html.dom.HTMLImageElement",J_x);var J_c=J_b.prototype;J_c._addToLayout=function(J_a){!this._style.absolute&&J_a.push(this)},J_c.render=function(J_a,J_b,J_c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(J_p.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,J_a.ctx.drawTexture2(J_b,J_c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},J_c.layaoutCallNative=function(){var J_a=0;if(this._childs&&0<(J_a=this._childs.length))for(var J_b=0;J_b<J_a;J_b++)this._childs[J_b].layaoutCallNative&&this._childs[J_b].layaoutCallNative()},J_h(0,J_c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(J_a){this._width!==J_a&&(this._width=J_a,this._style.width=J_a,this.repaint())}),J_h(0,J_c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(J_a){this._height!==J_a&&(this._height=J_a,this._style.height=J_a,this.repaint())}),J_c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),J_j.clearCache(this,this._url),this._tex=null),J_x.prototype.destroy.call(this)},J_c.onloaded=function(){var J_a=this._style;J_a&&!J_a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),J_a&&!J_a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),J_m.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},J_c._loadImageComplete=function(J_a,J_b,J_c){if(!this._destroyed)if(null!=J_c)if(J_c instanceof ArrayBuffer){var J_d=new DataView(J_c);new laya.webgl.resource.WebGLImage(new Uint8Array(J_c,8),J_a,0,!1,J_d.getUint32(0),J_d.getUint32(4));this.onloaded()}else if(J_c instanceof J_q)J_j.imgMgrSet[J_a]=J_b,J_f.imgMgrLock(J_a,J_j.imgMgrSet[J_a]),this._url=J_a,this._tex=J_c,J_j.keepCache(this,J_a),J_j.cacheRes(J_a,this._tex),this.onloaded();else{var J_e=-1!=J_a.indexOf(".png",J_a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(J_c,J_a,J_e,!1,J_c.width,J_c.height);this.onloaded()}else this.event("error","Load image failed")},J_h(0,J_c,"src",null,function(J_a){(J_a=this.formatURL(J_a),this._url!=J_a)&&(null!=this._tex&&(J_j.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=J_a,(this._tex=J_j.getRes(J_a))?(J_j.keepCache(this,J_a),this.onloaded()):J_f.imgMgrLoad(J_a,this._loadImageComplete.bind(this),2,!1))})})(),function(J_a){function J_b(){this.type=null,J_b.__super.call(this),this.visible=!1}J_g(J_b,"laya.html.dom.HTMLLinkElement",J_a);var J_c=J_b.prototype;J_c._onload=function(J_a){switch(this.type){case"text/css":J_i.parseCSS(J_a,this.URI)}},J_h(0,J_c,"href",J_a.prototype._$get_href,function(J_a){var J_b=this;J_a=this.formatURL(J_a),this.URI=new J_r(J_a);var J_c=new J_j;J_c.once("complete",null,function(J_a){J_b._onload(J_a)}),J_c.load(J_a,"text")}),J_b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(J_x),function(J_a){function J_b(){J_b.__super.call(this),this.visible=!1}J_g(J_b,"laya.html.dom.HTMLStyleElement",J_a),J_h(0,J_b.prototype,"text",J_a.prototype._$get_text,function(J_a){J_i.parseCSS(J_a,null)})}(J_x),function(J_a){function J_b(){J_b.__super.call(this),this._getCSSStyle().valign="middle"}J_g(J_b,"laya.html.dom.HTMLIframeElement",J_a),J_h(0,J_b.prototype,"href",J_a.prototype._$get_href,function(J_c){var J_d=this;J_c=this.formatURL(J_c);var J_a=new J_j;J_a.once("complete",null,function(J_a){var J_b=J_d.URI;J_d.URI=new J_r(J_c),J_d.innerHTML=J_a,!J_b||(J_d.URI=J_b)}),J_a.load(J_c,"text")})}(J_b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}}),function(J_a,J_b,J_p){J_p.un,J_p.uns;var J_d=J_p.static,J_f=J_p.class,J_e=J_p.getset,J_c=(J_p.__newvec,laya.display.Animation),J_q=(laya.utils.Browser,laya.utils.ClassUtils),J_g=laya.filters.ColorFilter,J_h=laya.utils.Ease,J_i=laya.events.Event,J_j=(laya.events.EventDispatcher,laya.display.css.Font),J_k=laya.display.FrameAnimation,J_l=laya.display.Graphics,J_m=laya.utils.Handler,J_n=laya.display.Input,J_u=laya.net.Loader,J_o=(laya.display.Node,laya.maths.Point),J_r=laya.maths.Rectangle,J_v=laya.renders.Render,J_w=laya.display.Sprite,J_x=laya.display.Text,J_y=laya.resource.Texture,J_z=laya.utils.Tween,J_A=laya.utils.Utils,J_B=laya.utils.WeakObject;J_p.interface("laya.ui.IItem"),J_p.interface("laya.ui.ISelect"),J_p.interface("laya.ui.IRender"),J_p.interface("laya.ui.IComponent"),J_p.interface("laya.ui.IBox","IComponent");var J_C=function(){function J_a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return J_f(J_a,"laya.ui.LayoutStyle"),J_d(J_a,["EMPTY",function(){return this.EMPTY=new J_a}]),J_a}(),J_D=function(){function J_a(){}return J_f(J_a,"laya.ui.Styles"),J_a.labelColor="#000000",J_a.buttonStateNum=3,J_a.scrollBarMinNum=15,J_a.scrollBarDelayTime=500,J_d(J_a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),J_a}(),J_E=function(){function J_e(){}return J_f(J_e,"laya.ui.UIUtils"),J_e.fillArray=function(J_a,J_b,J_c){var J_d=J_a.concat();if(J_b)for(var J_e=J_b.split(","),J_f=0,J_g=Math.min(J_d.length,J_e.length);J_f<J_g;J_f++){var J_h=J_e[J_f];J_d[J_f]="true"==J_h||"false"!=J_h&&J_h,null!=J_c&&(J_d[J_f]=J_c(J_h))}return J_d},J_e.toColor=function(J_a){return J_A.toHexColor(J_a)},J_e.gray=function(J_a,J_b){void 0===J_b&&(J_b=!0),J_b?J_e.addFilter(J_a,J_e.grayFilter):J_e.clearFilter(J_a,J_g)},J_e.addFilter=function(J_a,J_b){var J_c=J_a.filters||[];J_c.push(J_b),J_a.filters=J_c},J_e.clearFilter=function(J_a,J_b){var J_c=J_a.filters;if(null!=J_c&&0<J_c.length){for(var J_d=J_c.length-1;-1<J_d;J_d--){var J_e=J_c[J_d];J_p.__typeof(J_e,J_b)&&J_c.splice(J_d,1)}J_a.filters=J_c}},J_e._getReplaceStr=function(J_a){return J_e.escapeSequence[J_a]},J_e.adptString=function(J_a){return J_a.replace(/\\(\w)/g,J_e._getReplaceStr)},J_e.getBindFun=function(J_a){var J_b=J_e._funMap.get(J_a);if(null==J_b){var J_c='"'+J_a+'"',J_d="(function(data){if(data==null)return;with(data){try{\nreturn "+(J_c=J_c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";J_b=J_p._runScript(J_d),J_e._funMap.set(J_a,J_b)}return J_b},J_d(J_e,["grayFilter",function(){return this.grayFilter=new J_g([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new J_B}]),J_e}(),J_F=function(){function J_a(){}return J_f(J_a,"UIConfig"),J_a.touchScrollEnable=!0,J_a.mouseWheelEnable=!0,J_a.showButtons=!0,J_a.popupBgColor="#000000",J_a.popupBgAlpha=.5,J_a.closeDialogOnSide=!0,J_a}(),J_G=function(J_c){function J_r(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,J_r.__super.call(this),this._weakKeys=[]}J_f(J_r,"laya.ui.AutoBitmap",J_c);var J_a=J_r.prototype;return J_a.destroy=function(){if(J_u.clearObject(this,this._weakKey),this._weakKeys){for(var J_a=0,J_b=this._weakKeys.length;J_a<J_b;++J_a)J_u.clearObject(this,this._weakKeys[J_a]);this._weakKeys=null}J_c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},J_a._setChanged=function(){this._isChanged||(this._isChanged=!0,J_p.timer.callLater(this,this.changeSource))},J_a.changeSource=function(){this._isChanged=!1;var J_a=this._source;if(J_a&&J_a.bitmap){var J_b=this.width,J_c=this.height,J_d=this._sizeGrid,J_e=J_a.sourceWidth,J_f=J_a.sourceHeight;if(!J_d||J_e===J_b&&J_f===J_c)this.cleanByTexture(J_a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,J_b,J_c);else{J_u.clearObject(this,this._weakKey),J_a.$_GID||(J_a.$_GID=J_A.getGID());var J_g=J_a.$_GID+"."+J_b+"."+J_c+"."+J_d.join("."),J_h=J_u.findObject(J_g);if(J_A.isOKCmdList(J_h))return this._weakKey=J_g,J_u.keepObject(this,this._weakKey),void(this.cmds=J_h);this.clear();var J_i,J_j,J_k=J_d[0],J_l=J_d[1],J_m=J_d[2],J_n=J_d[3],J_o=J_d[4],J_p=!1;if(J_b==J_e&&(J_n=J_l=0),J_c==J_f&&(J_k=J_m=0),J_b<J_n+J_l){var J_q=J_b;J_p=!0,J_b=J_n+J_l,this.save(),this.clipRect(0,0,J_q,J_c)}J_n&&J_k&&(J_i=J_r.getTexture(J_a,0,0,J_n,J_k),J_j=this._weakKeys[0],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[0]=J_i.weakKey),this.drawTexture(J_i,0,0,J_n,J_k)):(J_u.clearObject(this,J_j),this._weakKeys[0]="")),J_l&&J_k&&(J_i=J_r.getTexture(J_a,J_e-J_l,0,J_l,J_k),J_j=this._weakKeys[1],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[1]=J_i.weakKey),this.drawTexture(J_i,J_b-J_l,0,J_l,J_k)):(J_u.clearObject(this,J_j),this._weakKeys[1]="")),J_n&&J_m&&(J_i=J_r.getTexture(J_a,0,J_f-J_m,J_n,J_m),J_j=this._weakKeys[2],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[2]=J_i.weakKey),this.drawTexture(J_i,0,J_c-J_m,J_n,J_m)):(J_u.clearObject(this,J_j),this._weakKeys[2]="")),J_l&&J_m&&(J_i=J_r.getTexture(J_a,J_e-J_l,J_f-J_m,J_l,J_m),J_j=this._weakKeys[3],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[3]=J_i.weakKey),this.drawTexture(J_i,J_b-J_l,J_c-J_m,J_l,J_m)):(J_u.clearObject(this,J_j),this._weakKeys[3]="")),J_k&&(J_i=J_r.getTexture(J_a,J_n,0,J_e-J_n-J_l,J_k),J_j=this._weakKeys[4],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[4]=J_i.weakKey),this.drawBitmap(J_o,J_i,J_n,0,J_b-J_n-J_l,J_k)):(J_u.clearObject(this,J_j),this._weakKeys[4]="")),J_m&&(J_i=J_r.getTexture(J_a,J_n,J_f-J_m,J_e-J_n-J_l,J_m),J_j=this._weakKeys[5],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[5]=J_i.weakKey),this.drawBitmap(J_o,J_i,J_n,J_c-J_m,J_b-J_n-J_l,J_m)):(J_u.clearObject(this,J_j),this._weakKeys[5]="")),J_n&&(J_i=J_r.getTexture(J_a,0,J_k,J_n,J_f-J_k-J_m),J_j=this._weakKeys[6],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[6]=J_i.weakKey),this.drawBitmap(J_o,J_i,0,J_k,J_n,J_c-J_k-J_m)):(J_u.clearObject(this,J_j),this._weakKeys[6]="")),J_l&&(J_i=J_r.getTexture(J_a,J_e-J_l,J_k,J_l,J_f-J_k-J_m),J_j=this._weakKeys[7],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[7]=J_i.weakKey),this.drawBitmap(J_o,J_i,J_b-J_l,J_k,J_l,J_c-J_k-J_m)):(J_u.clearObject(this,J_j),this._weakKeys[7]="")),J_i=J_r.getTexture(J_a,J_n,J_k,J_e-J_n-J_l,J_f-J_k-J_m),J_j=this._weakKeys[8],J_i?(J_j!=J_i.weakKey&&(J_u.clearObject(this,J_j),J_u.keepObject(this,J_i.weakKey),this._weakKeys[8]=J_i.weakKey),this.drawBitmap(J_o,J_i,J_n,J_k,J_b-J_n-J_l,J_c-J_k-J_m)):(J_u.clearObject(this,J_j),this._weakKeys[8]=""),J_p&&this.restore(),this.autoCacheCmd&&!J_v.isConchApp&&(J_u.saveObject(J_g,this.cmds,null),this._weakKey=J_g,J_u.keepObject(this,this._weakKey))}this._repaint()}},J_a.drawBitmap=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=0),J_e<.1||J_f<.1||(!J_a||J_b.width==J_e&&J_b.height==J_f?this.drawTexture(J_b,J_c,J_d,J_e,J_f):this.fillTexture(J_b,J_c,J_d,J_e,J_f))},J_a.clear=function(J_a){void 0===J_a&&(J_a=!0),J_c.prototype.clear.call(this,!1)},J_e(0,J_a,"sizeGrid",function(){return this._sizeGrid},function(J_a){this._sizeGrid=J_a,this._setChanged()}),J_e(0,J_a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(J_a){this._width!=J_a&&(this._width=J_a,this._setChanged())}),J_e(0,J_a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(J_a){this._height!=J_a&&(this._height=J_a,this._setChanged())}),J_e(0,J_a,"source",function(){return this._source},function(J_a){J_a?(this._source=J_a,this._setChanged()):(this._source=null,this.clear())}),J_r.getTexture=function(J_a,J_b,J_c,J_d,J_e){J_d<=0&&(J_d=1),J_e<=0&&(J_e=1),J_a.$_GID||(J_a.$_GID=J_A.getGID());var J_f=J_a.$_GID+"."+J_b+"."+J_c+"."+J_d+"."+J_e,J_g=J_u.findObject(J_f);if((!J_g||!J_g.source)&&(J_g=J_y.createFromTexture(J_a,J_b,J_c,J_d,J_e))){if(J_a.alphaTexture){var J_h=J_a.width/J_a.alphaTexture.width;J_g.alphaTexture=J_y.createFromTexture(J_a.alphaTexture,J_b/J_h,J_c/J_h,J_d/J_h,J_e/J_h)}J_u.saveObject(J_f,J_g),J_g.weakKey=J_f}return J_g},J_r}(J_l),J_H=(function(J_a){function J_b(){J_b.__super.call(this)}J_f(J_b,"laya.ui.UIEvent",J_i),J_b.SHOW_TIP="showtip",J_b.HIDE_TIP="hidetip"}(),function(J_b){function J_a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,J_a.__super.call(this),this._layout=J_C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}J_f(J_a,"laya.ui.Component",J_b);var J_c=J_a.prototype;return J_p.imps(J_c,{"laya.ui.IComponent":!0}),J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},J_c.preinitialize=function(){},J_c.createChildren=function(){},J_c.initialize=function(){},J_c.callLater=function(J_a,J_b){J_p.timer.callLater(this,J_a,J_b)},J_c.runCallLater=function(J_a){J_p.timer.runCallLater(this,J_a)},J_c.commitMeasure=function(){},J_c.changeSize=function(){this.event("resize")},J_c.getLayout=function(){return this._layout===J_C.EMPTY&&(this._layout=new J_C),this._layout},J_c._setLayoutEnabled=function(J_a){this._layout&&this._layout.enable!=J_a&&(this._layout.enable=J_a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},J_c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},J_c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},J_c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},J_c.resetLayoutX=function(){var J_a=this._layout;if(isNaN(J_a.anchorX)||(this.pivotX=J_a.anchorX*this.width),this.layoutEnabled){var J_b=this.parent;J_b&&(isNaN(J_a.centerX)?isNaN(J_a.left)?isNaN(J_a.right)||(this.x=Math.round(J_b.width-this.displayWidth-J_a.right+this.pivotX*this.scaleX)):(this.x=Math.round(J_a.left+this.pivotX*this.scaleX),isNaN(J_a.right)||(this.width=(J_b._width-J_a.left-J_a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(J_b.width-this.displayWidth)+J_a.centerX+this.pivotX*this.scaleX))}},J_c.resetLayoutY=function(){var J_a=this._layout;if(isNaN(J_a.anchorY)||(this.pivotY=J_a.anchorY*this.height),this.layoutEnabled){var J_b=this.parent;J_b&&(isNaN(J_a.centerY)?isNaN(J_a.top)?isNaN(J_a.bottom)||(this.y=Math.round(J_b.height-this.displayHeight-J_a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(J_a.top+this.pivotY*this.scaleY),isNaN(J_a.bottom)||(this.height=(J_b._height-J_a.top-J_a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(J_b.height-this.displayHeight)+J_a.centerY+this.pivotY*this.scaleY))}},J_c.onMouseOver=function(J_a){J_p.stage.event("showtip",this._toolTip)},J_c.onMouseOut=function(J_a){J_p.stage.event("hidetip",this._toolTip)},J_e(0,J_c,"displayWidth",function(){return this.width*this.scaleX}),J_e(0,J_c,"width",function(){return this._width?this._width:this.measureWidth},function(J_a){this._width!=J_a&&(this._width=J_a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),J_e(0,J_c,"measureWidth",function(){var J_a=0;this.commitMeasure();for(var J_b=this.numChildren-1;-1<J_b;J_b--){var J_c=this.getChildAt(J_b);J_c.visible&&(J_a=Math.max(J_c.x+J_c.width*J_c.scaleX,J_a))}return J_a}),J_e(0,J_c,"displayHeight",function(){return this.height*this.scaleY}),J_e(0,J_c,"height",function(){return this._height?this._height:this.measureHeight},function(J_a){this._height!=J_a&&(this._height=J_a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),J_e(0,J_c,"dataSource",function(){return this._dataSource},function(J_a){for(var J_b in this._dataSource=J_a,this._dataSource)this.hasOwnProperty(J_b)&&"function"!=typeof this[J_b]&&(this[J_b]=this._dataSource[J_b])}),J_e(0,J_c,"scaleY",J_b.prototype._$get_scaleY,function(J_a){J_p.superGet(J_w,this,"scaleY")!=J_a&&(J_p.superSet(J_w,this,"scaleY",J_a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),J_e(0,J_c,"measureHeight",function(){var J_a=0;this.commitMeasure();for(var J_b=this.numChildren-1;-1<J_b;J_b--){var J_c=this.getChildAt(J_b);J_c.visible&&(J_a=Math.max(J_c.y+J_c.height*J_c.scaleY,J_a))}return J_a}),J_e(0,J_c,"scaleX",J_b.prototype._$get_scaleX,function(J_a){J_p.superGet(J_w,this,"scaleX")!=J_a&&(J_p.superSet(J_w,this,"scaleX",J_a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),J_e(0,J_c,"top",function(){return this._layout.top},function(J_a){J_a!=this._layout.top&&(this.getLayout().top=J_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J_e(0,J_c,"bottom",function(){return this._layout.bottom},function(J_a){J_a!=this._layout.bottom&&(this.getLayout().bottom=J_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J_e(0,J_c,"left",function(){return this._layout.left},function(J_a){J_a!=this._layout.left&&(this.getLayout().left=J_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J_e(0,J_c,"right",function(){return this._layout.right},function(J_a){J_a!=this._layout.right&&(this.getLayout().right=J_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J_e(0,J_c,"centerX",function(){return this._layout.centerX},function(J_a){J_a!=this._layout.centerX&&(this.getLayout().centerX=J_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J_e(0,J_c,"centerY",function(){return this._layout.centerY},function(J_a){J_a!=this._layout.centerY&&(this.getLayout().centerY=J_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J_e(0,J_c,"anchorX",function(){return this._layout.anchorX},function(J_a){J_a!=this._layout.anchorX&&(this.getLayout().anchorX=J_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J_e(0,J_c,"anchorY",function(){return this._layout.anchorY},function(J_a){J_a!=this._layout.anchorY&&(this.getLayout().anchorY=J_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J_e(0,J_c,"tag",function(){return this._tag},function(J_a){this._tag=J_a}),J_e(0,J_c,"toolTip",function(){return this._toolTip},function(J_a){this._toolTip!=J_a&&(null!=(this._toolTip=J_a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),J_e(0,J_c,"comXml",function(){return this._comXml},function(J_a){this._comXml=J_a}),J_e(0,J_c,"gray",function(){return this._gray},function(J_a){J_a!==this._gray&&(this._gray=J_a,J_E.gray(this,J_a))}),J_e(0,J_c,"disabled",function(){return this._disabled},function(J_a){J_a!==this._disabled&&(this.gray=this._disabled=J_a,this.mouseEnabled=!J_a)}),J_a}(J_w)),J_I=function(J_a){function J_b(){this.lockLayer=null,this.popupEffect=function(J_a){J_a.scale(1,1),J_z.from(J_a,{x:J_p.stage.width/2,y:J_p.stage.height/2,scaleX:0,scaleY:0},300,J_h.backOut,J_m.create(this,this.doOpen,[J_a]))},this.closeEffect=function(J_a,J_b){J_z.to(J_a,{x:J_p.stage.width/2,y:J_p.stage.height/2,scaleX:0,scaleY:0},300,J_h.strongOut,J_m.create(this,this.doClose,[J_a,J_b]))},J_b.__super.call(this),this.maskLayer=new J_w,this.popupEffectHandler=J_m.create(this,this.popupEffect,null,!1),this.closeEffectHandler=J_m.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,J_p.stage.addChild(this),J_p.stage.on("resize",this,this._onResize),J_F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}J_f(J_b,"laya.ui.DialogManager",J_w);var J_c=J_b.prototype;return J_c._closeOnSide=function(){var J_a=this.getChildAt(this.numChildren-1);J_a instanceof laya.ui.Dialog&&J_a.close("side")},J_c.setLockView=function(J_a){this.lockLayer||(this.lockLayer=new J_J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(J_p.stage.width,J_p.stage.height)),this.lockLayer.removeChildren(),J_a&&(J_a.centerX=J_a.centerY=0,this.lockLayer.addChild(J_a))},J_c._onResize=function(J_a){var J_b=this.maskLayer.width=J_p.stage.width,J_c=this.maskLayer.height=J_p.stage.height;this.lockLayer&&this.lockLayer.size(J_b,J_c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,J_b,J_c,J_F.popupBgColor),this.maskLayer.alpha=J_F.popupBgAlpha;for(var J_d=this.numChildren-1;-1<J_d;J_d--){var J_e=this.getChildAt(J_d);J_e.popupCenter&&this._centerDialog(J_e)}},J_c._centerDialog=function(J_a){J_a.x=Math.round((J_p.stage.width-J_a.width>>1)+J_a.pivotX),J_a.y=Math.round((J_p.stage.height-J_a.height>>1)+J_a.pivotY)},J_c.open=function(J_a,J_b,J_c){void 0===J_b&&(J_b=!1),void 0===J_c&&(J_c=!1),J_b&&this._closeAll(),J_a.popupCenter&&this._centerDialog(J_a),this.addChild(J_a),(J_a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),J_c&&null!=J_a.popupEffect?J_a.popupEffect.runWith(J_a):this.doOpen(J_a),this.event("open")},J_c.doOpen=function(J_a){J_a.onOpened()},J_c.lock=function(J_a){this.lockLayer&&(J_a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},J_c.close=function(J_a,J_b,J_c){void 0===J_c&&(J_c=!1),J_c&&null!=J_a.closeEffect?J_a.closeEffect.runWith([J_a,J_b]):this.doClose(J_a,J_b),this.event("close")},J_c.doClose=function(J_a,J_b){J_a.removeSelf(),J_a.isModal&&this._checkMask(),J_a.closeHandler&&J_a.closeHandler.runWith(J_b),J_a.onClosed(J_b)},J_c.closeAll=function(){this._closeAll(),this.event("close")},J_c._closeAll=function(){for(var J_a=this.numChildren-1;-1<J_a;J_a--){var J_b=this.getChildAt(J_a);J_b&&null!=J_b.close&&this.doClose(J_b)}},J_c.getDialogsByGroup=function(J_a){for(var J_b=[],J_c=this.numChildren-1;-1<J_c;J_c--){var J_d=this.getChildAt(J_c);J_d&&J_d.group===J_a&&J_b.push(J_d)}return J_b},J_c.closeByGroup=function(J_a){for(var J_b=[],J_c=this.numChildren-1;-1<J_c;J_c--){var J_d=this.getChildAt(J_c);J_d&&J_d.group===J_a&&(J_d.close(),J_b.push(J_d))}return J_b},J_c._checkMask=function(){this.maskLayer.removeSelf();for(var J_a=this.numChildren-1;-1<J_a;J_a--){var J_b=this.getChildAt(J_a);if(J_b&&J_b.isModal)return void this.addChildAt(this.maskLayer,J_a)}},J_b}(),J_J=function(J_a){function J_b(){J_b.__super.call(this)}J_f(J_b,"laya.ui.Box",J_a);var J_c=J_b.prototype;return J_p.imps(J_c,{"laya.ui.IBox":!0}),J_e(0,J_c,"dataSource",J_a.prototype._$get_dataSource,function(J_a){for(var J_b in this._dataSource=J_a){var J_c=this.getChildByName(J_b);J_c?J_c.dataSource=J_a[J_b]:this.hasOwnProperty(J_b)&&"function"!=typeof this[J_b]&&(this[J_b]=J_a[J_b])}}),J_b}(J_H),J_K=function(J_b){function J_c(J_a,J_b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,J_c.__super.call(this),this._labelColors=J_D.buttonLabelColors,this._stateNum=J_D.buttonStateNum,void 0===J_b&&(J_b=""),this.skin=J_a,this.label=J_b}J_f(J_c,"laya.ui.Button",J_b);var J_a=J_c.prototype;return J_p.imps(J_a,{"laya.ui.ISelect":!0}),J_a.destroy=function(J_a){J_u.clearCache(this,this._skin),J_u.clearObject(this,this._weakKey),void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(J_a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},J_a.createChildren=function(){this.graphics=this._bitmap=new J_G},J_a.createText=function(){this._text||(this._text=new J_x,this._text.overflow=J_x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},J_a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},J_a.onMouse=function(J_a){if(!1!==this.toggle||!this._selected)return"click"===J_a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=J_c.stateMap[J_a.type]))},J_a.changeClips=function(){var J_a=J_u.getRes(this._skin);if(J_a&&this._skin&&""!=this._skin){J_u.clearObject(this,this._weakKey);var J_b=J_a.sourceWidth,J_c=J_a.sourceHeight/this._stateNum;J_a.$_GID||(J_a.$_GID=J_A.getGID());var J_d=J_a.$_GID+"-"+this._stateNum,J_e=J_u.findObject(J_d);if(J_A.isOkTextureList(J_e)||(J_e=null),J_e)this._weakKey=J_d,J_u.keepObject(this,this._weakKey),this._sources=J_e;else{if(this._sources=[],1===this._stateNum)this._sources.push(J_a);else for(var J_f=0;J_f<this._stateNum;J_f++){var J_g=J_y.createFromTexture(J_a,0,J_c*J_f,J_b,J_c);if(J_a.alphaTexture){var J_h=J_a.width/J_a.alphaTexture.width;J_g.alphaTexture=J_y.createFromTexture(J_a.alphaTexture,0/J_h,J_c*J_f/J_h,J_b/J_h,J_c/J_h)}this._sources.push(J_g)}J_u.saveObject(J_d,this._sources),this._weakKey=J_d,J_u.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||J_b,this._bitmap.height=this._height||J_c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=J_b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},J_a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var J_a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[J_a]),this.label&&(this._text.color=this._labelColors[J_a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[J_a]))},J_a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},J_e(0,J_a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(J_a){this.createText(),this._text.strokeColor=J_a}),J_e(0,J_a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(J_u.clearCache(this,this._skin),this._skin=J_a,J_u.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),J_e(0,J_a,"state",function(){return this._state},function(J_a){this._state!=J_a&&(this._state=J_a,this._setStateChanged())}),J_e(0,J_a,"text",function(){return this.createText(),this._text}),J_e(0,J_a,"stateNum",function(){return this._stateNum},function(J_a){"string"==typeof J_a&&(J_a=parseInt(J_a)),this._stateNum!=J_a&&(this._stateNum=J_a<1?1:3<J_a?3:J_a,this.callLater(this.changeClips))}),J_e(0,J_a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(J_a){this._strokeColors=J_E.fillArray(J_D.buttonLabelColors,J_a,String),this._setStateChanged()}),J_e(0,J_a,"labelColors",function(){return this._labelColors.join(",")},function(J_a){this._labelColors=J_E.fillArray(J_D.buttonLabelColors,J_a,String),this._setStateChanged()}),J_e(0,J_a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),J_e(0,J_a,"label",function(){return this._text?this._text.text:null},function(J_a){(this._text||J_a)&&(this.createText(),this._text.text!=J_a&&(J_a&&!this._text.parent&&this.addChild(this._text),this._text.text=(J_a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),J_e(0,J_a,"selected",function(){return this._selected},function(J_a){this._selected!=J_a&&(this._selected=J_a,this.state=this._selected?2:0,this.event("change"))}),J_e(0,J_a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(J_a){this.createText(),this._text.padding=J_E.fillArray(J_D.labelPadding,J_a,Number)}),J_e(0,J_a,"labelSize",function(){return this.createText(),this._text.fontSize},function(J_a){this.createText(),this._text.fontSize=J_a}),J_e(0,J_a,"labelStroke",function(){return this.createText(),this._text.stroke},function(J_a){this.createText(),this._text.stroke=J_a}),J_e(0,J_a,"labelBold",function(){return this.createText(),this._text.bold},function(J_a){this.createText(),this._text.bold=J_a}),J_e(0,J_a,"labelFont",function(){return this.createText(),this._text.font},function(J_a){this.createText(),this._text.font=J_a}),J_e(0,J_a,"labelAlign",function(){return this.createText(),this._text.align},function(J_a){this.createText(),this._text.align=J_a}),J_e(0,J_a,"clickHandler",function(){return this._clickHandler},function(J_a){this._clickHandler=J_a}),J_e(0,J_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J_a){this._bitmap.sizeGrid=J_E.fillArray(J_D.defaultSizeGrid,J_a,Number)}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_H,this,"width",J_a),this._autoSize&&(this._bitmap.width=J_a,this._text&&(this._text.width=J_a))}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_H,this,"height",J_a),this._autoSize&&(this._bitmap.height=J_a,this._text&&(this._text.height=J_a))}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)||"string"==typeof J_a?this.label=J_a+"":J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(J_a){this._bitmap._offset=J_a?J_E.fillArray([1,1],J_a,Number):[]}),J_d(J_c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),J_c}(J_H),J_L=function(J_b){function J_d(J_a,J_b,J_c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,J_d.__super.call(this),void 0===J_b&&(J_b=1),void 0===J_c&&(J_c=1),this._clipX=J_b,this._clipY=J_c,this.skin=J_a}J_f(J_d,"laya.ui.Clip",J_b);var J_a=J_d.prototype;return J_a.destroy=function(J_a){J_u.clearCache(this,this._skin),J_u.clearObject(this,this._weakKey),void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},J_a.dispose=function(){this.destroy(!0),J_p.loader.clearRes(this._skin)},J_a.createChildren=function(){this.graphics=this._bitmap=new J_G},J_a._onDisplay=function(J_a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},J_a.changeClip=function(){if(this._clipChanged=!1,this._skin){var J_a=J_u.getRes(this._skin);J_a?this.loadComplete(this._skin,J_a):J_p.loader.load(this._skin,J_m.create(this,this.loadComplete,[this._skin]))}},J_a.loadComplete=function(J_a,J_b){if(J_a===this._skin&&J_b){J_u.clearObject(this,this._weakKey);var J_c=this._clipWidth||Math.ceil(J_b.sourceWidth/this._clipX),J_d=this._clipHeight||Math.ceil(J_b.sourceHeight/this._clipY),J_e=this._skin+J_c+J_d,J_f=J_u.findObject(J_e);if(J_A.isOkTextureList(J_f)||(J_f=null),J_f)this._weakKey=J_e,J_u.keepObject(this,this._weakKey),this._sources=J_f;else{this._sources=[];for(var J_g=0;J_g<this._clipY;J_g++)for(var J_h=0;J_h<this._clipX;J_h++){var J_i=J_y.createFromTexture(J_b,J_c*J_h,J_d*J_g,J_c,J_d);if(J_b.alphaTexture){var J_j=J_b.width/J_b.alphaTexture.width;J_i.alphaTexture=J_y.createFromTexture(J_b.alphaTexture,J_c*J_h/J_j,J_d*J_g/J_j,J_c/J_j,J_d/J_j)}this._sources.push(J_i)}J_u.saveObject(J_e,this._sources),this._weakKey=J_e,J_u.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},J_a.play=function(J_a,J_b){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=-1),this._isPlaying=!0,this.index=J_a,this._toIndex=J_b,this._index++,J_p.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},J_a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},J_a.stop=function(){this._isPlaying=!1,J_p.timer.clear(this,this._loop),this.event("complete")},J_a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},J_e(0,J_a,"interval",function(){return this._interval},function(J_a){this._interval!=J_a&&(this._interval=J_a,this._isPlaying&&this.play())}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(J_u.clearCache(this,this._skin),(this._skin=J_a)?(J_u.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),J_e(0,J_a,"sources",function(){return this._sources},function(J_a){this._sources=J_a,this.index=this._index,this.event("loaded")}),J_e(0,J_a,"clipX",function(){return this._clipX},function(J_a){this._clipX=J_a||1,this._setClipChanged()}),J_e(0,J_a,"clipY",function(){return this._clipY},function(J_a){this._clipY=J_a||1,this._setClipChanged()}),J_e(0,J_a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),J_e(0,J_a,"clipWidth",function(){return this._clipWidth},function(J_a){this._clipWidth=J_a,this._setClipChanged()}),J_e(0,J_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J_a){this._bitmap.sizeGrid=J_E.fillArray(J_D.defaultSizeGrid,J_a,Number)}),J_e(0,J_a,"group",function(){return this._group},function(J_a){J_a&&this._skin&&J_u.setGroup(this._skin,J_a),this._group=J_a}),J_e(0,J_a,"clipHeight",function(){return this._clipHeight},function(J_a){this._clipHeight=J_a,this._setClipChanged()}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_H,this,"width",J_a),this._bitmap.width=J_a}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_H,this,"height",J_a),this._bitmap.height=J_a}),J_e(0,J_a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),J_e(0,J_a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),J_e(0,J_a,"index",function(){return this._index},function(J_a){this._index=J_a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[J_a]),this.event("change")}),J_e(0,J_a,"autoPlay",function(){return this._autoPlay},function(J_a){this._autoPlay!=J_a&&((this._autoPlay=J_a)?this.play():this.stop())}),J_e(0,J_a,"isPlaying",function(){return this._isPlaying},function(J_a){this._isPlaying=J_a}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)&&Math.floor(J_a)==J_a||"string"==typeof J_a?this.index=parseInt(J_a):J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"bitmap",function(){return this._bitmap}),J_d}(J_H),J_M=function(J_b){function J_a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,J_a.__super.call(this)}J_f(J_a,"laya.ui.ColorPicker",J_b);var J_c=J_a.prototype;return J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._colorPanel&&this._colorPanel.destroy(J_a),this._colorButton&&this._colorButton.destroy(J_a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},J_c.createChildren=function(){this.addChild(this._colorButton=new J_K),this._colorPanel=new J_J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new J_w),this._colorPanel.addChild(this._colorBlock=new J_w),this._colorPanel.addChild(this._colorInput=new J_n)},J_c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},J_c.onPanelMouseDown=function(J_a){J_a.stopPropagation()},J_c.changePanel=function(){this._panelChanged=!1;var J_a=this._colorPanel.graphics;J_a.clear(),J_a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(J_a=this._colorTiles.graphics).clear();for(var J_b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],J_c=0;J_c<12;J_c++)for(var J_d=0;J_d<20;J_d++){var J_e=0;J_e=0===J_d?J_b[J_c]:1===J_d?0:51*(((3*J_c+J_d/6)%3<<0)+3*(J_c/6<<0))<<16|J_d%6*51<<8|(J_c<<0)%6*51;var J_f=J_E.toColor(J_e);this._colors.push(J_f);var J_g=J_d*this._gridSize,J_h=J_c*this._gridSize;J_a.drawRect(J_g,J_h,this._gridSize,this._gridSize,J_f,"#000000")}},J_c.onColorButtonClick=function(J_a){this._colorPanel.parent?this.close():this.open()},J_c.open=function(){var J_a=this.localToGlobal(new J_o),J_b=J_a.x+this._colorPanel.width<=J_p.stage.width?J_a.x:J_p.stage.width-this._colorPanel.width,J_c=J_a.y+this._colorButton.height;J_c=J_c+this._colorPanel.height<=J_p.stage.height?J_c:J_a.y-this._colorPanel.height,this._colorPanel.pos(J_b,J_c),this._colorPanel.zOrder=1001,J_p._currentStage.addChild(this._colorPanel),J_p.stage.on("mousedown",this,this.removeColorBox)},J_c.close=function(){J_p.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},J_c.removeColorBox=function(J_a){this.close()},J_c.onColorFieldKeyDown=function(J_a){13==J_a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),J_a.stopPropagation())},J_c.onColorInputChange=function(J_a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},J_c.onColorTilesClick=function(J_a){this.selectedColor=this.getColorByMouse(),this.close()},J_c.onColorTilesMouseMove=function(J_a){this._colorInput.focus=!1;var J_b=this.getColorByMouse();this._colorInput.text=J_b,this.drawBlock(J_b)},J_c.getColorByMouse=function(){var J_a=this._colorTiles.getMousePoint(),J_b=Math.floor(J_a.x/this._gridSize),J_c=Math.floor(J_a.y/this._gridSize);return this._colors[20*J_c+J_b]},J_c.drawBlock=function(J_a){var J_b=this._colorBlock.graphics;J_b.clear();var J_c=J_a||"#ffffff";J_b.drawRect(0,0,50,20,J_c,this._borderColor),J_a||J_b.drawLine(0,0,50,20,"#ff0000")},J_c.changeColor=function(){var J_a=this.graphics;J_a.clear();var J_b=this._selectedColor||"#000000";J_a.drawRect(0,0,this._colorButton.width,this._colorButton.height,J_b)},J_c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},J_e(0,J_c,"inputBgColor",function(){return this._inputBgColor},function(J_a){this._inputBgColor=J_a,this._setPanelChanged()}),J_e(0,J_c,"selectedColor",function(){return this._selectedColor},function(J_a){this._selectedColor!=J_a&&(this._selectedColor=this._colorInput.text=J_a,this.drawBlock(J_a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",J_i.EMPTY.setTo("change",this,this)))}),J_e(0,J_c,"skin",function(){return this._colorButton.skin},function(J_a){this._colorButton.skin=J_a,this.changeColor()}),J_e(0,J_c,"bgColor",function(){return this._bgColor},function(J_a){this._bgColor=J_a,this._setPanelChanged()}),J_e(0,J_c,"borderColor",function(){return this._borderColor},function(J_a){this._borderColor=J_a,this._setPanelChanged()}),J_e(0,J_c,"inputColor",function(){return this._inputColor},function(J_a){this._inputColor=J_a,this._setPanelChanged()}),J_a}(J_H),J_N=function(J_b){function J_c(J_a,J_b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,J_c.__super.call(this),this._itemColors=J_D.comboBoxItemColors,this.skin=J_a,this.labels=J_b}J_f(J_c,"laya.ui.ComboBox",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._button&&this._button.destroy(J_a),this._list&&this._list.destroy(J_a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},J_a.createChildren=function(){this.addChild(this._button=new J_K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},J_a._createList=function(){this._list=new J_X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},J_a._setListEvent=function(J_a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=J_m.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},J_a.onListDown=function(J_a){J_a.stopPropagation()},J_a.onScrollBarDown=function(J_a){J_a.stopPropagation()},J_a.onButtonMouseDown=function(J_a){this.callLater(this.switchTo,[!this._isOpen])},J_a.changeList=function(){this._listChanged=!1;var J_a=this.width-2,J_b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:J_a,height:this._itemHeight,fontSize:this._itemSize,color:J_b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},J_a.onlistItemMouse=function(J_a,J_b){var J_c=J_a.type;if("mouseover"===J_c||"mouseout"===J_c){if(this._isCustomList)return;var J_d=this._list.getCell(J_b);if(!J_d)return;var J_e=J_d.getChildByName("label");J_e&&("mouseover"===J_c?(J_e.bgColor=this._itemColors[0],J_e.color=this._itemColors[1]):(J_e.bgColor=null,J_e.color=this._itemColors[2]))}else"click"===J_c&&(this.selectedIndex=J_b,this.isOpen=!1)},J_a.switchTo=function(J_a){this.isOpen=J_a},J_a.changeOpen=function(){this.isOpen=!this._isOpen},J_a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var J_a=this._list.graphics;J_a.clear(),J_a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var J_b=this._list.array||[],J_c=J_b.length=0,J_d=this._labels.length;J_c<J_d;J_c++)J_b.push({label:this._labels[J_c]});this._list.height=this._listHeight,this._list.array=J_b},J_a.changeSelected=function(){this._button.label=this.selectedLabel},J_a._onStageMouseWheel=function(J_a){this._list&&!this._list.contains(J_a.target)&&this.removeList(null)},J_a.removeList=function(J_a){J_p.stage.off("mousedown",this,this.removeList),J_p.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},J_e(0,J_a,"selectedIndex",function(){return this._selectedIndex},function(J_a){this._selectedIndex!=J_a&&(this._selectedIndex=J_a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[J_i.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),J_e(0,J_a,"measureHeight",function(){return this._button.height}),J_e(0,J_a,"skin",function(){return this._button.skin},function(J_a){this._button.skin!=J_a&&(this._button.skin=J_a,this._listChanged=!0)}),J_e(0,J_a,"measureWidth",function(){return this._button.width}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_H,this,"width",J_a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),J_e(0,J_a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(J_a){this.selectedIndex=this._labels.indexOf(J_a)}),J_e(0,J_a,"labels",function(){return this._labels.join(",")},function(J_a){0<this._labels.length&&(this.selectedIndex=-1),J_a?this._labels=J_a.split(","):this._labels.length=0,this._itemChanged=!0}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_H,this,"height",J_a),this._button.height=this._height}),J_e(0,J_a,"selectHandler",function(){return this._selectHandler},function(J_a){this._selectHandler=J_a}),J_e(0,J_a,"visibleNum",function(){return this._visibleNum},function(J_a){this._visibleNum=J_a,this._listChanged=!0}),J_e(0,J_a,"labelBold",function(){return this._button.text.bold},function(J_a){this._button.text.bold=J_a}),J_e(0,J_a,"itemColors",function(){return String(this._itemColors)},function(J_a){this._itemColors=J_E.fillArray(this._itemColors,J_a,String),this._listChanged=!0}),J_e(0,J_a,"itemSize",function(){return this._itemSize},function(J_a){this._itemSize=J_a,this._listChanged=!0}),J_e(0,J_a,"scrollBar",function(){return this.list.scrollBar}),J_e(0,J_a,"isOpen",function(){return this._isOpen},function(J_a){if(this._isOpen!=J_a)if(this._isOpen=J_a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var J_b=this.localToGlobal(J_o.TEMP.setTo(0,0)),J_c=J_b.y+this._button.height;J_c=J_c+this._listHeight<=J_p.stage.height?J_c:J_b.y-this._listHeight,this._list.pos(J_b.x,J_c),this._list.zOrder=1001,J_p._currentStage.addChild(this._list),J_p.stage.once("mousedown",this,this.removeList),J_p.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),J_e(0,J_a,"scrollBarSkin",function(){return this._scrollBarSkin},function(J_a){this._scrollBarSkin=J_a}),J_e(0,J_a,"sizeGrid",function(){return this._button.sizeGrid},function(J_a){this._button.sizeGrid=J_a}),J_e(0,J_a,"button",function(){return this._button}),J_e(0,J_a,"list",function(){return this._list||this._createList(),this._list},function(J_a){J_a&&(J_a.removeSelf(),this._isCustomList=!0,this._list=J_a,this._setListEvent(J_a),this._itemHeight=J_a.getCell(0).height+J_a.spaceY)}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)&&Math.floor(J_a)==J_a||"string"==typeof J_a?this.selectedIndex=parseInt(J_a):J_a instanceof Array?this.labels=J_a.join(","):J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"labelColors",function(){return this._button.labelColors},function(J_a){this._button.labelColors!=J_a&&(this._button.labelColors=J_a)}),J_e(0,J_a,"labelPadding",function(){return this._button.text.padding.join(",")},function(J_a){this._button.text.padding=J_E.fillArray(J_D.labelPadding,J_a,Number)}),J_e(0,J_a,"labelSize",function(){return this._button.text.fontSize},function(J_a){this._button.text.fontSize=J_a}),J_e(0,J_a,"labelFont",function(){return this._button.text.font},function(J_a){this._button.text.font=J_a}),J_e(0,J_a,"stateNum",function(){return this._button.stateNum},function(J_a){this._button.stateNum=J_a}),J_c}(J_H),J_O=function(J_b){function J_c(J_a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,J_c.__super.call(this),this._showButtons=J_F.showButtons,this._touchScrollEnable=J_F.touchScrollEnable,this._mouseWheelEnable=J_F.mouseWheelEnable,this.skin=J_a,this.max=1}J_f(J_c,"laya.ui.ScrollBar",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),this.stopScroll(),this.target=null,J_b.prototype.destroy.call(this,J_a),this.upButton&&this.upButton.destroy(J_a),this.downButton&&this.downButton.destroy(J_a),this.slider&&this.slider.destroy(J_a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},J_a.createChildren=function(){this.addChild(this.slider=new J_P),this.addChild(this.upButton=new J_K),this.addChild(this.downButton=new J_K)},J_a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},J_a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},J_a.onButtonMouseDown=function(J_a){var J_b=J_a.currentTarget===this.upButton;this.slide(J_b),J_p.timer.once(J_D.scrollBarDelayTime,this,this.startLoop,[J_b]),J_p.stage.once("mouseup",this,this.onStageMouseUp)},J_a.startLoop=function(J_a){J_p.timer.frameLoop(1,this,this.slide,[J_a])},J_a.slide=function(J_a){J_a?this.value-=this._scrollSize:this.value+=this._scrollSize},J_a.onStageMouseUp=function(J_a){J_p.timer.clear(this,this.startLoop),J_p.timer.clear(this,this.slide)},J_a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},J_a.changeSize=function(){J_b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},J_a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},J_a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},J_a.setScroll=function(J_a,J_b,J_c){this.runCallLater(this.changeSize),this.slider.setSlider(J_a,J_b,J_c),this.slider.bar.visible=0<J_b,!this._hide&&this.autoHide&&(this.visible=!1)},J_a.onTargetMouseWheel=function(J_a){this.value-=J_a.delta*this._scrollSize,this.target=this._target},J_a.onTargetMouseDown=function(J_a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new J_o),this._lastPoint.setTo(J_p.stage.mouseX,J_p.stage.mouseY),J_p.timer.clear(this,this.tweenMove),J_z.clearTween(this),J_p.stage.once("mouseup",this,this.onStageMouseUp2),J_p.stage.once("mouseout",this,this.onStageMouseUp2),J_p.timer.frameLoop(1,this,this.loop)},J_a.loop=function(){var J_a=J_p.stage.mouseY,J_b=J_p.stage.mouseX;if(this._lastOffset=this.isVertical?J_a-this._lastPoint.y:J_b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?J_p.stage._canvasTransform.getScaleY():J_p.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=J_b,this._lastPoint.y=J_a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},J_a.onStageMouseUp2=function(J_a){if(J_p.stage.off("mouseup",this,this.onStageMouseUp2),J_p.stage.off("mouseout",this,this.onStageMouseUp2),J_p.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?J_z.to(this,{value:this.min},this.elasticBackTime,J_h.sineOut,J_m.create(this,this.elasticOver)):this._value>this.max&&J_z.to(this,{value:this.max},this.elasticBackTime,J_h.sineOut,J_m.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?J_p.stage.mouseY-this._lastPoint.y:J_p.stage.mouseX-this._lastPoint.x);for(var J_b=0,J_c=Math.min(this._offsets.length,3),J_d=0;J_d<J_c;J_d++)J_b+=this._offsets[this._offsets.length-1-J_d];if(this._lastOffset=J_b/J_c,(J_b=Math.abs(this._lastOffset))<2)return void this.event("end");60<J_b&&(this._lastOffset=0<this._lastOffset?60:-60);var J_e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));J_p.timer.frameLoop(1,this,this.tweenMove,[J_e])}},J_a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&J_z.to(this,{alpha:0},500),this.event("end")},J_a.tweenMove=function(J_a){this._lastOffset*=this.rollRatio;var J_b=NaN;if(0<J_a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,J_b=.5*-(this.min-J_a-this.value),this._lastOffset>J_b&&(this._lastOffset=J_b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,J_b=.5*-(this.max+J_a-this.value),this._lastOffset<J_b&&(this._lastOffset=J_b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(J_p.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?J_z.to(this,{value:this.min},this.elasticBackTime,J_h.sineOut,J_m.create(this,this.elasticOver)):this._value>this.max?J_z.to(this,{value:this.max},this.elasticBackTime,J_h.sineOut,J_m.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&J_z.to(this,{alpha:0},500)}},J_a.stopScroll=function(){this.onStageMouseUp2(null),J_p.timer.clear(this,this.tweenMove),J_z.clearTween(this)},J_e(0,J_a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(this._skin=J_a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),J_e(0,J_a,"max",function(){return this.slider.max},function(J_a){this.slider.max=J_a}),J_e(0,J_a,"showButtons",function(){return this._showButtons},function(J_a){this._showButtons=J_a,this.callLater(this.changeScrollBar)}),J_e(0,J_a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),J_e(0,J_a,"min",function(){return this.slider.min},function(J_a){this.slider.min=J_a}),J_e(0,J_a,"value",function(){return this._value},function(J_a){J_a!==this._value&&(this._value=J_a,this._isElastic||(this.slider._value!=J_a&&(this.slider._value=J_a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),J_e(0,J_a,"isVertical",function(){return this.slider.isVertical},function(J_a){this.slider.isVertical=J_a}),J_e(0,J_a,"sizeGrid",function(){return this.slider.sizeGrid},function(J_a){this.slider.sizeGrid=J_a}),J_e(0,J_a,"scrollSize",function(){return this._scrollSize},function(J_a){this._scrollSize=J_a}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)||"string"==typeof J_a?this.value=Number(J_a):J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"thumbPercent",function(){return this._thumbPercent},function(J_a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),J_a=1<=J_a?.99:J_a,this._thumbPercent=J_a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*J_a,J_D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*J_a,J_D.scrollBarMinNum))}),J_e(0,J_a,"target",function(){return this._target},function(J_a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=J_a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),J_e(0,J_a,"hide",function(){return this._hide},function(J_a){this._hide=J_a,this.visible=!J_a}),J_e(0,J_a,"touchScrollEnable",function(){return this._touchScrollEnable},function(J_a){this._touchScrollEnable=J_a,this.target=this._target}),J_e(0,J_a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(J_a){this._mouseWheelEnable=J_a,this.target=this._target}),J_e(0,J_a,"tick",function(){return this.slider.tick},function(J_a){this.slider.tick=J_a}),J_c}(J_H),J_P=function(J_b){function J_c(J_a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,J_c.__super.call(this),this.skin=J_a}J_f(J_c,"laya.ui.Slider",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._bg&&this._bg.destroy(J_a),this._bar&&this._bar.destroy(J_a),this._progress&&this._progress.destroy(J_a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},J_a.createChildren=function(){this.addChild(this._bg=new J_Q),this.addChild(this._bar=new J_K)},J_a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},J_a.onBarMouseDown=function(J_a){this._globalSacle||(this._globalSacle=new J_o),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=J_p.stage.mouseX,this._ty=J_p.stage.mouseY,J_p.stage.on("mousemove",this,this.mouseMove),J_p.stage.once("mouseup",this,this.mouseUp),J_p.stage.once("mouseout",this,this.mouseUp),this.showValueText()},J_a.showValueText=function(){if(this.showLabel){var J_a=laya.ui.Slider.label;this.addChild(J_a),J_a.textField.changeText(this._value+""),this.isVertical?(J_a.x=this._bar.x+20,J_a.y=.5*(this._bar.height-J_a.height)+this._bar.y):(J_a.y=this._bar.y-20,J_a.x=.5*(this._bar.width-J_a.width)+this._bar.x)}},J_a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},J_a.mouseUp=function(J_a){J_p.stage.off("mousemove",this,this.mouseMove),J_p.stage.off("mouseup",this,this.mouseUp),J_p.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},J_a.mouseMove=function(J_a){var J_b=this._value;this.isVertical?(this._bar.y+=(J_p.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(J_p.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=J_p.stage.mouseX,this._ty=J_p.stage.mouseY;var J_c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*J_c)/J_c,this._value!=J_b&&this.sendChangeEvent(),this.showValueText()},J_a.sendChangeEvent=function(J_a){void 0===J_a&&(J_a="change"),this.event(J_a),this.changeHandler&&this.changeHandler.runWith(this._value)},J_a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},J_a.changeSize=function(){J_b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},J_a.setSlider=function(J_a,J_b,J_c){this._value=-1,this._min=J_a,this._max=J_a<J_b?J_b:J_a,this.value=J_c<J_a?J_a:J_b<J_c?J_b:J_c},J_a.changeValue=function(){var J_a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*J_a)/J_a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var J_b=this._max-this._min;0===J_b&&(J_b=1),this.isVertical?(this._bar.y=(this._value-this._min)/J_b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/J_b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},J_a.onBgMouseDown=function(J_a){var J_b=this._bg.getMousePoint();this.isVertical?this.value=J_b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=J_b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},J_e(0,J_a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){if(this._skin!=J_a){this._skin=J_a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var J_b=this._skin.replace(".png","$progress.png");J_u.getRes(J_b)&&(this._progress||(this.addChild(this._progress=new J_Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=J_b),this.setBarPoint(),this.callLater(this.changeValue)}}),J_e(0,J_a,"allowClickBack",function(){return this._allowClickBack},function(J_a){this._allowClickBack!=J_a&&((this._allowClickBack=J_a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),J_e(0,J_a,"max",function(){return this._max},function(J_a){this._max!=J_a&&(this._max=J_a,this.callLater(this.changeValue))}),J_e(0,J_a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),J_e(0,J_a,"tick",function(){return this._tick},function(J_a){this._tick!=J_a&&(this._tick=J_a,this.callLater(this.changeValue))}),J_e(0,J_a,"sizeGrid",function(){return this._bg.sizeGrid},function(J_a){this._bg.sizeGrid=J_a,this._bar.sizeGrid=J_a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),J_e(0,J_a,"min",function(){return this._min},function(J_a){this._min!=J_a&&(this._min=J_a,this.callLater(this.changeValue))}),J_e(0,J_a,"value",function(){return this._value},function(J_a){if(this._value!=J_a){var J_b=this._value;this._value=J_a,this.changeValue(),this._value!=J_b&&this.sendChangeEvent()}}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)||"string"==typeof J_a?this.value=Number(J_a):J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"bar",function(){return this._bar}),J_d(J_c,["label",function(){return this.label=new J_R}]),J_c}(J_H),J_Q=function(J_b){function J_c(J_a){this._bitmap=null,this._skin=null,this._group=null,J_c.__super.call(this),this.skin=J_a}J_f(J_c,"laya.ui.Image",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,J_u.clearCache(this,this._skin)},J_a.dispose=function(){this.destroy(!0),J_u.clearCache(this,this._skin)},J_a.createChildren=function(){this.graphics=this._bitmap=new J_G},J_a.setSource=function(J_a,J_b){J_a===this._skin&&J_b&&(this.source=J_b,this.onCompResize())},J_e(0,J_a,"source",function(){return this._bitmap.source},function(J_a){this._bitmap&&(this._bitmap.source=J_a,this.event("loaded"),this.repaint())}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"string"==typeof(this._dataSource=J_a)?this.skin=J_a:J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"measureHeight",function(){return this._bitmap.height}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){if(this._skin!=J_a)if(J_u.clearCache(this,this._skin),this._skin=J_a){J_u.keepCache(this,this._skin);var J_b=J_u.getRes(J_a);J_b?(this.source=J_b,this.onCompResize()):J_p.loader.load(this._skin,J_m.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),J_e(0,J_a,"group",function(){return this._group},function(J_a){J_a&&this._skin&&J_u.setGroup(this._skin,J_a),this._group=J_a}),J_e(0,J_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J_a){this._bitmap.sizeGrid=J_E.fillArray(J_D.defaultSizeGrid,J_a,Number)}),J_e(0,J_a,"measureWidth",function(){return this._bitmap.width}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_H,this,"width",J_a),this._bitmap.width=0==J_a?1e-7:J_a}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_H,this,"height",J_a),this._bitmap.height=0==J_a?1e-7:J_a}),J_c}(J_H),J_R=function(J_b){function J_c(J_a){this._tf=null,J_c.__super.call(this),void 0===J_a&&(J_a=""),J_j.defaultColor=J_D.labelColor,this.text=J_a}J_f(J_c,"laya.ui.Label",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._tf=null},J_a.createChildren=function(){this.addChild(this._tf=new J_x)},J_a.changeText=function(J_a){this._tf.changeText(J_a)},J_e(0,J_a,"padding",function(){return this._tf.padding.join(",")},function(J_a){this._tf.padding=J_E.fillArray(J_D.labelPadding,J_a,Number)}),J_e(0,J_a,"bold",function(){return this._tf.bold},function(J_a){this._tf.bold=J_a}),J_e(0,J_a,"align",function(){return this._tf.align},function(J_a){this._tf.align=J_a}),J_e(0,J_a,"text",function(){return this._tf.text},function(J_a){this._tf.text!=J_a&&(J_a&&(J_a=J_E.adptString(J_a+"")),this._tf.text=J_a,this.event("change"),this._width&&this._height||this.onCompResize())}),J_e(0,J_a,"italic",function(){return this._tf.italic},function(J_a){this._tf.italic=J_a}),J_e(0,J_a,"wordWrap",function(){return this._tf.wordWrap},function(J_a){this._tf.wordWrap=J_a}),J_e(0,J_a,"font",function(){return this._tf.font},function(J_a){this._tf.font=J_a}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)||"string"==typeof J_a?this.text=J_a+"":J_p.superSet(J_H,this,"dataSource",J_a)}),J_e(0,J_a,"color",function(){return this._tf.color},function(J_a){this._tf.color=J_a}),J_e(0,J_a,"valign",function(){return this._tf.valign},function(J_a){this._tf.valign=J_a}),J_e(0,J_a,"leading",function(){return this._tf.leading},function(J_a){this._tf.leading=J_a}),J_e(0,J_a,"fontSize",function(){return this._tf.fontSize},function(J_a){this._tf.fontSize=J_a}),J_e(0,J_a,"bgColor",function(){return this._tf.bgColor},function(J_a){this._tf.bgColor=J_a}),J_e(0,J_a,"borderColor",function(){return this._tf.borderColor},function(J_a){this._tf.borderColor=J_a}),J_e(0,J_a,"stroke",function(){return this._tf.stroke},function(J_a){this._tf.stroke=J_a}),J_e(0,J_a,"strokeColor",function(){return this._tf.strokeColor},function(J_a){this._tf.strokeColor=J_a}),J_e(0,J_a,"textField",function(){return this._tf}),J_e(0,J_a,"measureWidth",function(){return this._tf.width}),J_e(0,J_a,"measureHeight",function(){return this._tf.height}),J_e(0,J_a,"width",function(){return this._width||this._tf.text?J_p.superGet(J_H,this,"width"):0},function(J_a){J_p.superSet(J_H,this,"width",J_a),this._tf.width=J_a}),J_e(0,J_a,"height",function(){return this._height||this._tf.text?J_p.superGet(J_H,this,"height"):0},function(J_a){J_p.superSet(J_H,this,"height",J_a),this._tf.height=J_a}),J_e(0,J_a,"overflow",function(){return this._tf.overflow},function(J_a){this._tf.overflow=J_a}),J_e(0,J_a,"underline",function(){return this._tf.underline},function(J_a){this._tf.underline=J_a}),J_e(0,J_a,"underlineColor",function(){return this._tf.underlineColor},function(J_a){this._tf.underlineColor=J_a}),J_c}(J_H),J_S=function(J_b){function J_c(J_a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,J_c.__super.call(this),this.skin=J_a}J_f(J_c,"laya.ui.ProgressBar",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._bg&&this._bg.destroy(J_a),this._bar&&this._bar.destroy(J_a),this._bg=this._bar=null,this.changeHandler=null},J_a.createChildren=function(){this.addChild(this._bg=new J_Q),this.addChild(this._bar=new J_Q)},J_a.changeValue=function(){if(this.sizeGrid){var J_a=this.sizeGrid.split(","),J_b=Number(J_a[3]),J_c=Number(J_a[1]),J_d=(this.width-J_b-J_c)*this._value;this._bar.width=J_b+J_c+J_d,this._bar.visible=this._bar.width>J_b+J_c}else this._bar.width=this.width*this._value},J_e(0,J_a,"measureHeight",function(){return this._bg.height}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(this._skin=J_a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),J_e(0,J_a,"measureWidth",function(){return this._bg.width}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_H,this,"height",J_a),this._bg.height=this._height,this._bar.height=this._height}),J_e(0,J_a,"bar",function(){return this._bar}),J_e(0,J_a,"value",function(){return this._value},function(J_a){this._value!=J_a&&(J_a=1<J_a?1:J_a<0?0:J_a,this._value=J_a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(J_a))}),J_e(0,J_a,"bg",function(){return this._bg}),J_e(0,J_a,"sizeGrid",function(){return this._bg.sizeGrid},function(J_a){this._bg.sizeGrid=this._bar.sizeGrid=J_a}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_H,this,"width",J_a),this._bg.width=this._width,this.callLater(this.changeValue)}),J_e(0,J_a,"dataSource",J_b.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)||"string"==typeof J_a?this.value=Number(J_a):J_p.superSet(J_H,this,"dataSource",J_a)}),J_c}(J_H),J_T=(function(J_a){function J_c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,J_c.__super.call(this),this._tipBox=new J_H,this._tipBox.addChild(this._tipText=new J_x),this._tipText.x=this._tipText.y=5,this._tipText.color=J_c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,J_p.stage.on("showtip",this,this._onStageShowTip),J_p.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}J_f(J_c,"laya.ui.TipManager",J_H);var J_b=J_c.prototype;J_b._onStageHideTip=function(J_a){J_p.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},J_b._onStageShowTip=function(J_a){J_p.timer.once(J_c.tipDelay,this,this._showTip,[J_a],!0)},J_b._showTip=function(J_a){if("string"==typeof J_a){var J_b=String(J_a);Boolean(J_b)&&this._defaultTipHandler(J_b)}else J_a instanceof laya.utils.Handler?J_a.run():"function"==typeof J_a&&J_a.apply();J_p.stage.on("mousemove",this,this._onStageMouseMove),J_p.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},J_b._onStageMouseDown=function(J_a){this.closeAll()},J_b._onStageMouseMove=function(J_a){this._showToStage(this,J_c.offsetX,J_c.offsetY)},J_b._showToStage=function(J_a,J_b,J_c){void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0);var J_d=J_a.getBounds();J_a.x=J_p.stage.mouseX+J_b,J_a.y=J_p.stage.mouseY+J_c,J_a.x+J_d.width>J_p.stage.width&&(J_a.x-=J_d.width+J_b),J_a.y+J_d.height>J_p.stage.height&&(J_a.y-=J_d.height+J_c)},J_b.closeAll=function(){J_p.timer.clear(this,this._showTip),J_p.stage.off("mousemove",this,this._onStageMouseMove),J_p.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},J_b.showDislayTip=function(J_a){this.addChild(J_a),this._showToStage(this),J_p._currentStage.addChild(this)},J_b._showDefaultTip=function(J_a){this._tipText.text=J_a;var J_b=this._tipBox.graphics;J_b.clear(),J_b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,J_c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),J_p._currentStage.addChild(this)},J_e(0,J_b,"defaultTipHandler",function(){return this._defaultTipHandler},function(J_a){this._defaultTipHandler=J_a}),J_c.offsetX=10,J_c.offsetY=15,J_c.tipTextColor="#ffffff",J_c.tipBackColor="#111111",J_c.tipDelay=200}(),function(J_a){var J_n;function J_o(){this._idMap=null,this._aniList=null,this._watchMap={},J_o.__super.call(this)}J_f(J_o,"laya.ui.View",J_J);var J_b=J_o.prototype;return J_b.createView=function(J_a){if(J_a.animations&&!this._idMap&&(this._idMap={}),J_o.createComp(J_a,this,this),J_a.animations){var J_b,J_c,J_d=[],J_e=J_a.animations,J_f=0,J_g=J_e.length;for(J_f=0;J_f<J_g;J_f++){switch(J_b=new J_k,J_c=J_e[J_f],J_b._setUp(this._idMap,J_c),(this[J_c.name]=J_b)._setControlNode(this),J_c.action){case 1:J_b.play(0,!1);break;case 2:J_b.play(0,!0)}J_d.push(J_b)}this._aniList=J_d}0<this._width&&null==J_a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},J_b.onEvent=function(J_a,J_b){},J_b.loadUI=function(J_a){var J_b=J_o.uiMap[J_a];J_b&&this.createView(J_b)},J_b.destroy=function(J_a){void 0===J_a&&(J_a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,J_a)},J_b.changeData=function(J_a){var J_b=this._watchMap[J_a];if(J_b){console.log("change",J_a);for(var J_c=0,J_d=J_b.length;J_c<J_d;J_c++){J_b[J_c].exe(this)}}},J_o._regs=function(){for(var J_a in J_o.uiClassMap)J_q.regClass(J_a,J_o.uiClassMap[J_a])},J_o.createComp=function(J_a,J_b,J_c,J_d){if(!(J_b=J_b||J_o.getCompInstance(J_a)))return console.warn("can not create:"+J_a.type),null;var J_e=J_a.child;if(J_e)for(var J_f=J_b instanceof laya.ui.List,J_g=0,J_h=J_e.length;J_g<J_h;J_g++){var J_i=J_e[J_g];if(!J_b.hasOwnProperty("itemRender")||"render"!=J_i.props.name&&"render"!==J_i.props.renderType)if("Graphic"==J_i.type)J_q.addGraphicsToSprite(J_i,J_b);else if(J_q.isDrawType(J_i.type))J_q.addGraphicToSprite(J_i,J_b,!0);else{if(J_f){var J_j=[],J_k=J_o.createComp(J_i,null,J_c,J_j);J_j.length&&(J_k._$bindData=J_j)}else J_k=J_o.createComp(J_i,null,J_c,J_d);"Script"==J_i.type?"owner"in J_k?J_k.owner=J_b:"target"in J_k&&(J_k.target=J_b):"mask"==J_i.props.renderType||"mask"==J_i.props.name?J_b.mask=J_k:J_k instanceof laya.display.Sprite&&J_b.addChild(J_k)}else J_b.itemRender=J_i}var J_l=J_a.props;for(var J_m in J_l){var J_n=J_l[J_m];J_o.eventDic[J_m]?J_n&&J_c&&J_b.on(J_m,J_c,J_c.onEvent,[J_n]):J_o.setCompValue(J_b,J_m,J_n,J_c,J_d)}return J_p.__typeof(J_b,"laya.ui.IItem")&&J_b.initItems(),J_a.compId&&J_c&&J_c._idMap&&(J_c._idMap[J_a.compId]=J_b),J_b},J_o.setCompValue=function(J_a,J_b,J_c,J_d,J_e){if("string"==typeof J_c&&-1<J_c.indexOf("${")){if(J_o._sheet||(J_o._sheet=J_q.getClass("laya.data.Table")),!J_o._sheet)return void console.warn("Can not find class Sheet");if(J_e)J_e.push(J_a,J_b,J_c);else if(J_d){-1==J_c.indexOf("].")&&(J_c=J_c.replace(".","[0]."));var J_f,J_g,J_h=new J_n(J_a,J_b,J_c);J_h.exe(J_d);for(var J_i=J_c.replace(/\[.*?\]\./g,".");null!=(J_f=J_o._parseWatchData.exec(J_i));){for(var J_j=J_f[1];null!=(J_g=J_o._parseKeyWord.exec(J_j));){var J_k=J_g[0],J_l=J_d._watchMap[J_k]||(J_d._watchMap[J_k]=[]);J_l.push(J_h),J_o._sheet.I.notifer.on(J_k,J_d,J_d.changeData,[J_k])}(J_l=J_d._watchMap[J_j]||(J_d._watchMap[J_j]=[])).push(J_h),J_o._sheet.I.notifer.on(J_j,J_d,J_d.changeData,[J_j])}}}else if("var"===J_b&&J_d)J_d[J_c]=J_a;else if("onClick"==J_b){var J_m=J_p._runScript("(function(){"+J_c+"})");J_a.on("click",J_d,J_m)}else J_a[J_b]="true"===J_c||"false"!==J_c&&J_c},J_o.getCompInstance=function(J_a){var J_b,J_c=J_a.props?J_a.props.runtime:null;return J_b=J_c?J_o.viewClassMap[J_c]||J_o.uiClassMap[J_c]||J_p.__classmap[J_c]:J_o.uiClassMap[J_a.type],J_a.props&&J_a.props.hasOwnProperty("renderType")&&"instance"==J_a.props.renderType?J_b.instance:J_b?new J_b:null},J_o.regComponent=function(J_a,J_b){J_o.uiClassMap[J_a]=J_b,J_q.regClass(J_a,J_b)},J_o.regViewRuntime=function(J_a,J_b){J_o.viewClassMap[J_a]=J_b},J_o.uiMap={},J_o.viewClassMap={},J_o._sheet=null,J_d(J_o,["uiClassMap",function(){return this.uiClassMap={ViewStack:J_aa,LinkButton:J_K,TextArea:J_ja,ColorPicker:J_M,Box:J_J,Button:J_K,CheckBox:J_U,Clip:J_L,ComboBox:J_N,Component:J_H,HScrollBar:J_Y,HSlider:J_$,Image:J_Q,Label:J_R,List:J_X,Panel:J_Z,ProgressBar:J_S,Radio:J_s,RadioGroup:J_ha,ScrollBar:J_O,Slider:J_P,Tab:J_ia,TextInput:J_ca,View:J_o,VScrollBar:J_ba,VSlider:J_da,Tree:J_t,HBox:J_fa,VBox:J_ga,Sprite:J_w,Animation:J_c,Text:J_x,FontClip:J_W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),J_o.__init$=function(){J_o._regs(),J_n=function(){function J_a(J_a,J_b,J_c){this.comp=null,this.prop=null,this.value=null,this.comp=J_a,this.prop=J_b,this.value=J_c}return J_f(J_a,""),J_a.prototype.exe=function(J_a){var J_b=J_E.getBindFun(this.value);this.comp[this.prop]=J_b.call(this,J_a)},J_a}()},J_o}()),J_U=function(J_a){function J_c(J_a,J_b){void 0===J_b&&(J_b=""),J_c.__super.call(this,J_a,J_b)}J_f(J_c,"laya.ui.CheckBox",J_a);var J_b=J_c.prototype;return J_b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},J_b.initialize=function(){J_a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},J_e(0,J_b,"dataSource",J_a.prototype._$get_dataSource,function(J_a){"boolean"==typeof(this._dataSource=J_a)?this.selected=J_a:"string"==typeof J_a?this.selected="true"===J_a:J_p.superSet(J_K,this,"dataSource",J_a)}),J_c}(J_K),J_V=function(J_a){function J_b(){this._space=0,this._align="none",this._itemChanged=!1,J_b.__super.call(this)}J_f(J_b,"laya.ui.LayoutBox",J_J);var J_c=J_b.prototype;return J_c.addChild=function(J_a){return J_a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,J_a)},J_c.onResize=function(J_a){this._setItemChanged()},J_c.addChildAt=function(J_a,J_b){return J_a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,J_a,J_b)},J_c.removeChild=function(J_a){return J_a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,J_a)},J_c.removeChildAt=function(J_a){return this.getChildAt(J_a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,J_a)},J_c.refresh=function(){this._setItemChanged()},J_c.changeItems=function(){this._itemChanged=!1},J_c.sortItem=function(J_a){J_a&&J_a.sort(function(J_a,J_b){return J_a.y-J_b.y})},J_c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},J_e(0,J_c,"space",function(){return this._space},function(J_a){this._space=J_a,this._setItemChanged()}),J_e(0,J_c,"align",function(){return this._align},function(J_a){this._align=J_a,this._setItemChanged()}),J_b}(),J_W=function(J_b){function J_c(J_a,J_b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,J_c.__super.call(this),J_a&&(this.skin=J_a),J_b&&(this.sheet=J_b)}J_f(J_c,"laya.ui.FontClip",J_b);var J_a=J_c.prototype;return J_a.createChildren=function(){this._bitmap=new J_G,this.on("loaded",this,this._onClipLoaded)},J_a._onClipLoaded=function(){this.callLater(this.changeValue)},J_a.changeValue=function(){var J_a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),J_a=this._sources[0]))){var J_b="horizontal"===this._direction;J_b?(this._wordsW=this._valueArr.length*(J_a.sourceWidth+this.spaceX),this._wordsH=J_a.sourceHeight):(this._wordsW=J_a.sourceWidth,this._wordsH=(J_a.sourceHeight+this.spaceY)*this._valueArr.length);var J_c=0;if(this._width)switch(this._align){case"center":J_c=.5*(this._width-this._wordsW);break;case"right":J_c=this._width-this._wordsW;break;default:J_c=0}for(var J_d=0,J_e=this._valueArr.length;J_d<J_e;J_d++){var J_f=this._indexMap[this._valueArr.charAt(J_d)];this.sources[J_f]&&(J_a=this.sources[J_f],J_b?this.graphics.drawTexture(J_a,J_c+J_d*(J_a.sourceWidth+this.spaceX),0,J_a.sourceWidth,J_a.sourceHeight):this.graphics.drawTexture(J_a,0+J_c,J_d*(J_a.sourceHeight+this.spaceY),J_a.sourceWidth,J_a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),J_b.prototype.destroy.call(this,J_a)},J_e(0,J_a,"sheet",function(){return this._sheet},function(J_a){J_a+="";var J_b=(this._sheet=J_a).split(" ");this._clipX=String(J_b[0]).length,this.clipY=J_b.length,this._indexMap={};for(var J_c=0;J_c<this._clipY;J_c++)for(var J_d=J_b[J_c].split(""),J_e=0,J_f=J_d.length;J_e<J_f;J_e++)this._indexMap[J_d[J_e]]=J_c*this._clipX+J_e}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_L,this,"height",J_a),this.callLater(this.changeValue)}),J_e(0,J_a,"direction",function(){return this._direction},function(J_a){this._direction=J_a,this.callLater(this.changeValue)}),J_e(0,J_a,"value",function(){return this._valueArr?this._valueArr:""},function(J_a){J_a+="",this._valueArr=J_a,this.callLater(this.changeValue)}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_L,this,"width",J_a),this.callLater(this.changeValue)}),J_e(0,J_a,"spaceX",function(){return this._spaceX},function(J_a){this._spaceX=J_a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),J_e(0,J_a,"spaceY",function(){return this._spaceY},function(J_a){this._spaceY=J_a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),J_e(0,J_a,"align",function(){return this._align},function(J_a){this._align=J_a,this.callLater(this.changeValue)}),J_e(0,J_a,"measureWidth",function(){return this._wordsW}),J_e(0,J_a,"measureHeight",function(){return this._wordsH}),J_c}(J_L),J_X=function(J_a){function J_b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new J_o,J_b.__super.call(this)}J_f(J_b,"laya.ui.List",J_a);var J_c=J_b.prototype;return J_p.imps(J_c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),this._content&&this._content.destroy(J_a),this._scrollBar&&this._scrollBar.destroy(J_a),laya.ui.Component.prototype.destroy.call(this,J_a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},J_c.createChildren=function(){this.addChild(this._content=new J_J)},J_c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=J_p.superGet(J_J,this,"cacheAs")),J_p.superSet(J_J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},J_c.onScrollEnd=function(){J_p.superSet(J_J,this,"cacheAs",this._$P.cacheAs)},J_c._removePreScrollBar=function(){var J_a=this.removeChildByName("scrollBar");J_a&&J_a.destroy(!0)},J_c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var J_a=this._getOneCell(),J_b=J_a.width+this._spaceX||1,J_c=J_a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/J_b):Math.ceil(this._width/J_b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/J_c):Math.round(this._height/J_c));var J_d=this._width?this._width:J_b*this.repeatX-this._spaceX,J_e=this._height?this._height:J_c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?J_c:J_b,this._cellOffset=this._isVertical?J_c*Math.max(this._repeatY2,this._repeatY)-J_e-this._spaceY:J_b*Math.max(this._repeatX2,this._repeatX)-J_d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=J_e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=J_d),this.setContentSize(J_d,J_e);var J_f=this._isVertical?this.repeatX:this.repeatY,J_g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,J_f,J_g),this._createdLine=J_g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},J_c._getOneCell=function(){if(0===this._cells.length){var J_a=this.createItem();if(this._offset.setTo(J_a.x,J_a.y),this.cacheContent)return J_a;this._cells.push(J_a)}return this._cells[0]},J_c._createItems=function(J_a,J_b,J_c){var J_d=this._content,J_e=this._getOneCell(),J_f=J_e.width+this._spaceX,J_g=J_e.height+this._spaceY;if(this.cacheContent){var J_h=new J_J;J_h.cacheAsBitmap=!0,J_h.pos((this._isVertical?0:J_a)*J_f,(this._isVertical?J_a:0)*J_g),this._content.addChild(J_h),this._content.optimizeScrollRect=!0,J_d=J_h}else{for(var J_i=[],J_j=this._cells.length-1;-1<J_j;J_j--){var J_k=this._cells[J_j];J_k.removeSelf(),J_i.push(J_k)}this._cells.length=0}for(var J_l=J_a;J_l<J_c;J_l++)for(var J_m=0;J_m<J_b;J_m++)(J_e=J_i&&J_i.length?J_i.pop():this.createItem()).x=(this._isVertical?J_m:J_l)*J_f-J_d.x,J_e.y=(this._isVertical?J_l:J_m)*J_g-J_d.y,J_e.name="item"+(J_l*J_b+J_m),J_d.addChild(J_e),this.addCell(J_e)},J_c.createItem=function(){var J_a=[];if("function"==typeof this._itemRender)var J_b=new this._itemRender;else J_b=J_T.createComp(this._itemRender,null,null,J_a);if(0==J_a.length&&J_b._watchMap){var J_c=J_b._watchMap;for(var J_d in J_c)for(var J_e=J_c[J_d],J_f=0;J_f<J_e.length;J_f++){var J_g=J_e[J_f];J_a.push(J_g.comp,J_g.prop,J_g.value)}}return J_a.length&&(J_b._$bindData=J_a),J_b},J_c.addCell=function(J_a){J_a.on("click",this,this.onCellMouse),J_a.on("rightclick",this,this.onCellMouse),J_a.on("mouseover",this,this.onCellMouse),J_a.on("mouseout",this,this.onCellMouse),J_a.on("mousedown",this,this.onCellMouse),J_a.on("mouseup",this,this.onCellMouse),this._cells.push(J_a)},J_c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var J_a=0,J_b=J_a=0;J_b<1e4;J_b++){var J_c=this.getChildByName("item"+J_b);if(!J_c)break;this.addCell(J_c),J_a++}this.repeatY=J_a}},J_c.setContentSize=function(J_a,J_b){this._content.width=J_a,this._content.height=J_b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new J_r),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,J_a,J_b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},J_c.onCellMouse=function(J_a){"mousedown"===J_a.type&&(this._isMoved=!1);var J_b=J_a.currentTarget,J_c=this._startIndex+this._cells.indexOf(J_b);J_c<0||("click"===J_a.type||"rightclick"===J_a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=J_c:this.changeCellState(J_b,!0,0):"mouseover"!==J_a.type&&"mouseout"!==J_a.type||this._selectedIndex===J_c||this.changeCellState(J_b,"mouseover"===J_a.type,0),this.mouseHandler&&this.mouseHandler.runWith([J_a,J_c]))},J_c.changeCellState=function(J_a,J_b,J_c){var J_d=J_a.getChildByName("selectBox");J_d&&(this.selectEnable=!0,J_d.visible=J_b,J_d.index=J_c)},J_c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},J_c.onScrollBarChange=function(J_a){this.runCallLater(this.changeCells);var J_b=this._scrollBar.value,J_c=this._isVertical?this.repeatX:this.repeatY,J_d=this._isVertical?this.repeatY:this.repeatX,J_e=Math.floor(J_b/this._cellSize);if(this.cacheContent)J_g=J_d+1,this._createdLine-J_e<J_g&&(this._createItems(this._createdLine,J_c,this._createdLine+J_g),this.renderItems(this._createdLine*J_c,0),this._createdLine+=J_g);else{var J_f=J_e*J_c,J_g=0;if(J_f>this._startIndex){J_g=J_f-this._startIndex;var J_h=!0,J_i=this._startIndex+J_c*(J_d+1);this._isMoved=!0}else J_f<this._startIndex&&(J_g=this._startIndex-J_f,J_h=!1,J_i=this._startIndex-1,this._isMoved=!0);for(var J_j=0;J_j<J_g;J_j++){if(J_h){var J_k=this._cells.shift();this._cells[this._cells.length]=J_k;var J_l=J_i+J_j}else J_k=this._cells.pop(),this._cells.unshift(J_k),J_l=J_i-J_j;var J_m=Math.floor(J_l/J_c)*this._cellSize;this._isVertical?J_k.y=J_m:J_k.x=J_m,this.renderItem(J_k,J_l)}this._startIndex=J_f,this.changeSelectStatus()}var J_n=this._content.scrollRect;this._isVertical?(J_n.y=J_b-this._offset.y,J_n.x=-this._offset.x):(J_n.y=-this._offset.y,J_n.x=J_b-this._offset.x),this._content.scrollRect=J_n},J_c.posCell=function(J_a,J_b){if(this._scrollBar){var J_c=this._isVertical?this.repeatX:this.repeatY,J_d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(J_b/J_c)*this._cellSize);this._isVertical?J_a.y=J_d:J_a.x=J_d}},J_c.changeSelectStatus=function(){for(var J_a=0,J_b=this._cells.length;J_a<J_b;J_a++)this.changeCellState(this._cells[J_a],this._selectedIndex===this._startIndex+J_a,1)},J_c.renderItems=function(J_a,J_b){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0);for(var J_c=J_a,J_d=J_b||this._cells.length;J_c<J_d;J_c++)this.renderItem(this._cells[J_c],this._startIndex+J_c);this.changeSelectStatus()},J_c.renderItem=function(J_a,J_b){this._array&&0<=J_b&&J_b<this._array.length?(J_a.visible=!0,J_a._$bindData?(J_a._dataSource=this._array[J_b],this._bindData(J_a,this._array[J_b])):J_a.dataSource=this._array[J_b],this.cacheContent||this.posCell(J_a,J_b),this.hasListener("render")&&this.event("render",[J_a,J_b]),this.renderHandler&&this.renderHandler.runWith([J_a,J_b])):(J_a.visible=!1,J_a.dataSource=null)},J_c._bindData=function(J_a,J_b){for(var J_c=J_a._$bindData,J_d=0,J_e=J_c.length;J_d<J_e;J_d++){var J_f=J_c[J_d++],J_g=J_c[J_d++],J_h=J_c[J_d],J_i=J_E.getBindFun(J_h);J_f[J_g]=J_i.call(this,J_b)}},J_c.refresh=function(){this.array=this._array},J_c.getItem=function(J_a){return-1<J_a&&J_a<this._array.length?this._array[J_a]:null},J_c.changeItem=function(J_a,J_b){-1<J_a&&J_a<this._array.length&&(this._array[J_a]=J_b,J_a>=this._startIndex&&J_a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(J_a),J_a))},J_c.setItem=function(J_a,J_b){this.changeItem(J_a,J_b)},J_c.addItem=function(J_a){this._array.push(J_a),this.array=this._array},J_c.addItemAt=function(J_a,J_b){this._array.splice(J_b,0,J_a),this.array=this._array},J_c.deleteItem=function(J_a){this._array.splice(J_a,1),this.array=this._array},J_c.getCell=function(J_a){return this.runCallLater(this.changeCells),-1<J_a&&this._cells?this._cells[(J_a-this._startIndex)%this._cells.length]:null},J_c.scrollTo=function(J_a){if(this._scrollBar){var J_b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(J_a/J_b)*this._cellSize}else this.startIndex=J_a},J_c.tweenTo=function(J_a,J_b,J_c){if(void 0===J_b&&(J_b=200),this._scrollBar){var J_d=this._isVertical?this.repeatX:this.repeatY;J_z.to(this._scrollBar,{value:Math.floor(J_a/J_d)*this._cellSize},J_b,null,J_c,0,!0)}else this.startIndex=J_a,J_c&&J_c.run()},J_c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},J_c.commitMeasure=function(){this.runCallLater(this.changeCells)},J_e(0,J_c,"cacheAs",J_a.prototype._$get_cacheAs,function(J_a){J_p.superSet(J_J,this,"cacheAs",J_a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==J_a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),J_e(0,J_c,"content",function(){return this._content}),J_e(0,J_c,"height",J_a.prototype._$get_height,function(J_a){J_a!=this._height&&(J_p.superSet(J_J,this,"height",J_a),this._setCellChanged())}),J_e(0,J_c,"itemRender",function(){return this._itemRender},function(J_a){if(this._itemRender!=J_a){this._itemRender=J_a;for(var J_b=this._cells.length-1;-1<J_b;J_b--)this._cells[J_b].destroy();this._cells.length=0,this._setCellChanged()}}),J_e(0,J_c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(J_a){this._removePreScrollBar();var J_b=new J_ba;J_b.name="scrollBar",J_b.right=0,J_a&&" "!=J_a&&(J_b.skin=J_a),this.scrollBar=J_b,this.addChild(J_b),this._setCellChanged()}),J_e(0,J_c,"page",function(){return this._page},function(J_a){this._page=J_a,this._array&&(this._page=0<J_a?J_a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),J_e(0,J_c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(J_a){this._removePreScrollBar();var J_b=new J_Y;J_b.name="scrollBar",J_b.bottom=0,J_a&&" "!=J_a&&(J_b.skin=J_a),this.scrollBar=J_b,this.addChild(J_b),this._setCellChanged()}),J_e(0,J_c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(J_a){this._repeatX=J_a,this._setCellChanged()}),J_e(0,J_c,"scrollBar",function(){return this._scrollBar},function(J_a){this._scrollBar!=J_a&&(this._scrollBar=J_a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),J_e(0,J_c,"width",J_a.prototype._$get_width,function(J_a){J_a!=this._width&&(J_p.superSet(J_J,this,"width",J_a),this._setCellChanged())}),J_e(0,J_c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(J_a){this._repeatY=J_a,this._setCellChanged()}),J_e(0,J_c,"spaceX",function(){return this._spaceX},function(J_a){this._spaceX=J_a,this._setCellChanged()}),J_e(0,J_c,"spaceY",function(){return this._spaceY},function(J_a){this._spaceY=J_a,this._setCellChanged()}),J_e(0,J_c,"selectedIndex",function(){return this._selectedIndex},function(J_a){this._selectedIndex!=J_a&&(this._selectedIndex=J_a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(J_a),this.startIndex=this._startIndex)}),J_e(0,J_c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(J_a){this.selectedIndex=this._array.indexOf(J_a)}),J_e(0,J_c,"length",function(){return this._array?this._array.length:0}),J_e(0,J_c,"selection",function(){return this.getCell(this._selectedIndex)},function(J_a){this.selectedIndex=this._startIndex+this._cells.indexOf(J_a)}),J_e(0,J_c,"startIndex",function(){return this._startIndex},function(J_a){this._startIndex=0<J_a?J_a:0,this.callLater(this.renderItems)}),J_e(0,J_c,"array",function(){return this._array},function(J_a){this.runCallLater(this.changeCells),this._array=J_a||[];var J_b=this._array.length;if(this.totalPage=Math.ceil(J_b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<J_b?this._selectedIndex:J_b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var J_c=this._isVertical?this.repeatX:this.repeatY,J_d=this._isVertical?this.repeatY:this.repeatX,J_e=Math.ceil(J_b/J_c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=J_d/J_e,this._scrollBar.setScroll(0,(J_e-J_d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),J_e(0,J_c,"dataSource",J_a.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)&&Math.floor(J_a)==J_a||"string"==typeof J_a?this.selectedIndex=parseInt(J_a):J_a instanceof Array?this.array=J_a:J_p.superSet(J_J,this,"dataSource",J_a)}),J_e(0,J_c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),J_b}(J_J),J_Y=function(J_a){function J_b(){J_b.__super.call(this)}return J_f(J_b,"laya.ui.HScrollBar",J_a),J_b.prototype.initialize=function(){J_a.prototype.initialize.call(this),this.slider.isVertical=!1},J_b}(J_O),J_Z=function(J_a){function J_b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,J_b.__super.call(this),this.width=this.height=100}J_f(J_b,"laya.ui.Panel",J_a);var J_c=J_b.prototype;return J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),laya.ui.Component.prototype.destroy.call(this,J_a),this._content&&this._content.destroy(J_a),this._vScrollBar&&this._vScrollBar.destroy(J_a),this._hScrollBar&&this._hScrollBar.destroy(J_a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},J_c.destroyChildren=function(){this._content.destroyChildren()},J_c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new J_J)},J_c.addChild=function(J_a){return J_a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(J_a)},J_c.onResize=function(){this._setScrollChanged()},J_c.addChildAt=function(J_a,J_b){return J_a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(J_a,J_b)},J_c.removeChild=function(J_a){return J_a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(J_a)},J_c.removeChildAt=function(J_a){return this.getChildAt(J_a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(J_a)},J_c.removeChildren=function(J_a,J_b){return void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=2147483647),this._content.removeChildren(J_a,J_b),this._setScrollChanged(),this},J_c.getChildAt=function(J_a){return this._content.getChildAt(J_a)},J_c.getChildByName=function(J_a){return this._content.getChildByName(J_a)},J_c.getChildIndex=function(J_a){return this._content.getChildIndex(J_a)},J_c.changeScroll=function(){this._scrollChanged=!1;var J_a=this.contentWidth||1,J_b=this.contentHeight||1,J_c=this._vScrollBar,J_d=this._hScrollBar,J_e=J_c&&J_b>this._height,J_f=J_d&&J_a>this._width,J_g=J_e?this._width-J_c.width:this._width,J_h=J_f?this._height-J_d.height:this._height;J_c&&(J_c.x=this._width-J_c.width,J_c.y=0,J_c.height=this._height-(J_f?J_d.height:0),J_c.scrollSize=Math.max(.033*this._height,1),J_c.thumbPercent=J_h/J_b,J_c.setScroll(0,J_b-J_h,J_c.value)),J_d&&(J_d.x=0,J_d.y=this._height-J_d.height,J_d.width=this._width-(J_e?J_c.width:0),J_d.scrollSize=Math.max(.033*this._width,1),J_d.thumbPercent=J_g/J_a,J_d.setScroll(0,J_a-J_g,J_d.value))},J_c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},J_c.setContentSize=function(J_a,J_b){var J_c=this._content;J_c.width=J_a,J_c.height=J_b,J_c.scrollRect||(J_c.scrollRect=new J_r),J_c.scrollRect.setTo(0,0,J_a,J_b),J_c.scrollRect=J_c.scrollRect},J_c.onScrollBarChange=function(J_a){var J_b=this._content.scrollRect;if(J_b){var J_c=Math.round(J_a.value);J_a.isVertical?J_b.y=J_c:J_b.x=J_c,this._content.scrollRect=J_b}},J_c.scrollTo=function(J_a,J_b){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),this.vScrollBar&&(this.vScrollBar.value=J_b),this.hScrollBar&&(this.hScrollBar.value=J_a)},J_c.refresh=function(){this.changeScroll()},J_c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=J_p.superGet(J_J,this,"cacheAs")),J_p.superSet(J_J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},J_c.onScrollEnd=function(){J_p.superSet(J_J,this,"cacheAs",this._$P.cacheAs)},J_c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},J_e(0,J_c,"numChildren",function(){return this._content.numChildren}),J_e(0,J_c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(J_a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new J_Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=J_a}),J_e(0,J_c,"contentWidth",function(){for(var J_a=0,J_b=this._content.numChildren-1;-1<J_b;J_b--){var J_c=this._content.getChildAt(J_b);J_a=Math.max(J_c.x+J_c.width*J_c.scaleX,J_a)}return J_a}),J_e(0,J_c,"contentHeight",function(){for(var J_a=0,J_b=this._content.numChildren-1;-1<J_b;J_b--){var J_c=this._content.getChildAt(J_b);J_a=Math.max(J_c.y+J_c.height*J_c.scaleY,J_a)}return J_a}),J_e(0,J_c,"width",J_a.prototype._$get_width,function(J_a){J_p.superSet(J_J,this,"width",J_a),this._setScrollChanged()}),J_e(0,J_c,"hScrollBar",function(){return this._hScrollBar}),J_e(0,J_c,"content",function(){return this._content}),J_e(0,J_c,"height",J_a.prototype._$get_height,function(J_a){J_p.superSet(J_J,this,"height",J_a),this._setScrollChanged()}),J_e(0,J_c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(J_a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new J_ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=J_a}),J_e(0,J_c,"vScrollBar",function(){return this._vScrollBar}),J_e(0,J_c,"cacheAs",J_a.prototype._$get_cacheAs,function(J_a){J_p.superSet(J_J,this,"cacheAs",J_a),this._$P.cacheAs=null,"none"!==J_a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),J_b}(J_J),J_$=function(J_a){function J_b(J_a){J_b.__super.call(this,J_a),this.isVertical=!1}return J_f(J_b,"laya.ui.HSlider",J_P),J_b}(),J__=function(J_a){function J_c(J_a,J_b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,J_c.__super.call(this),this.skin=J_b,this.labels=J_a}J_f(J_c,"laya.ui.UIGroup",J_a);var J_b=J_c.prototype;return J_p.imps(J_b,{"laya.ui.IItem":!0}),J_b.preinitialize=function(){this.mouseEnabled=!0},J_b.destroy=function(J_a){void 0===J_a&&(J_a=!0),laya.ui.Component.prototype.destroy.call(this,J_a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},J_b.addItem=function(J_a,J_b){void 0===J_b&&(J_b=!0);var J_c=J_a,J_d=this._items.length;if(J_c.name="item"+J_d,this.addChild(J_c),this.initItems(),J_b&&0<J_d){var J_e=this._items[J_d-1];"horizontal"==this._direction?J_c.x=J_e.x+J_e.width+this._space:J_c.y=J_e.y+J_e.height+this._space}else J_b&&(J_c.x=0,J_c.y=0);return J_d},J_b.delItem=function(J_a,J_b){void 0===J_b&&(J_b=!0);var J_c=this._items.indexOf(J_a);if(-1!=J_c){var J_d=J_a;this.removeChild(J_d);for(var J_e=J_c+1,J_f=this._items.length;J_e<J_f;J_e++){var J_g=this._items[J_e];J_g.name="item"+(J_e-1),J_b&&("horizontal"==this._direction?J_g.x-=J_d.width+this._space:J_g.y-=J_d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var J_h;J_h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=J_h}}},J_b.initItems=function(){this._items||(this._items=[]);for(var J_a=this._items.length=0;J_a<1e4;J_a++){var J_b=this.getChildByName("item"+J_a);if(null==J_b)break;this._items.push(J_b),J_b.selected=J_a===this._selectedIndex,J_b.clickHandler=J_m.create(this,this.itemClick,[J_a],!1)}},J_b.itemClick=function(J_a){this.selectedIndex=J_a},J_b.setSelect=function(J_a,J_b){this._items&&-1<J_a&&J_a<this._items.length&&(this._items[J_a].selected=J_b)},J_b.createItem=function(J_a,J_b){return null},J_b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var J_a=0,J_b=0,J_c=this._items.length;J_b<J_c;J_b++){var J_d=this._items[J_b];this._skin&&(J_d.skin=this._skin),this._labelColors&&(J_d.labelColors=this._labelColors),this._labelSize&&(J_d.labelSize=this._labelSize),this._labelStroke&&(J_d.labelStroke=this._labelStroke),this._labelStrokeColor&&(J_d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(J_d.strokeColors=this._strokeColors),this._labelBold&&(J_d.labelBold=this._labelBold),this._labelPadding&&(J_d.labelPadding=this._labelPadding),this._labelAlign&&(J_d.labelAlign=this._labelAlign),this._stateNum&&(J_d.stateNum=this._stateNum),this._labelFont&&(J_d.labelFont=this._labelFont),"horizontal"===this._direction?(J_d.y=0,J_d.x=J_a,J_a+=J_d.width+this._space):(J_d.x=0,J_d.y=J_a,J_a+=J_d.height+this._space)}this.changeSize()},J_b.commitMeasure=function(){this.runCallLater(this.changeLabels)},J_b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},J_e(0,J_b,"labelStrokeColor",function(){return this._labelStrokeColor},function(J_a){this._labelStrokeColor!=J_a&&(this._labelStrokeColor=J_a,this._setLabelChanged())}),J_e(0,J_b,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(this._skin=J_a,this._setLabelChanged())}),J_e(0,J_b,"selectedIndex",function(){return this._selectedIndex},function(J_a){this._selectedIndex!=J_a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=J_a,this.setSelect(J_a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),J_e(0,J_b,"labels",function(){return this._labels},function(J_a){if(this._labels!=J_a){if(this._labels=J_a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var J_b=this._labels.split(","),J_c=0,J_d=J_b.length;J_c<J_d;J_c++){var J_e=this.createItem(this._skin,J_b[J_c]);J_e.name="item"+J_c,this.addChild(J_e)}this.initItems()}}),J_e(0,J_b,"strokeColors",function(){return this._strokeColors},function(J_a){this._strokeColors!=J_a&&(this._strokeColors=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelColors",function(){return this._labelColors},function(J_a){this._labelColors!=J_a&&(this._labelColors=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelStroke",function(){return this._labelStroke},function(J_a){this._labelStroke!=J_a&&(this._labelStroke=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelSize",function(){return this._labelSize},function(J_a){this._labelSize!=J_a&&(this._labelSize=J_a,this._setLabelChanged())}),J_e(0,J_b,"stateNum",function(){return this._stateNum},function(J_a){this._stateNum!=J_a&&(this._stateNum=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelBold",function(){return this._labelBold},function(J_a){this._labelBold!=J_a&&(this._labelBold=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelFont",function(){return this._labelFont},function(J_a){this._labelFont!=J_a&&(this._labelFont=J_a,this._setLabelChanged())}),J_e(0,J_b,"labelPadding",function(){return this._labelPadding},function(J_a){this._labelPadding!=J_a&&(this._labelPadding=J_a,this._setLabelChanged())}),J_e(0,J_b,"direction",function(){return this._direction},function(J_a){this._direction=J_a,this._setLabelChanged()}),J_e(0,J_b,"space",function(){return this._space},function(J_a){this._space=J_a,this._setLabelChanged()}),J_e(0,J_b,"items",function(){return this._items}),J_e(0,J_b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(J_a){this.selectedIndex=this._items.indexOf(J_a)}),J_e(0,J_b,"dataSource",J_a.prototype._$get_dataSource,function(J_a){"number"==typeof(this._dataSource=J_a)&&Math.floor(J_a)==J_a||"string"==typeof J_a?this.selectedIndex=parseInt(J_a):J_a instanceof Array?this.labels=J_a.join(","):J_p.superSet(J_J,this,"dataSource",J_a)}),J_c}(J_J),J_s=function(J_b){function J_c(J_a,J_b){this._value=null,void 0===J_b&&(J_b=""),J_c.__super.call(this,J_a,J_b)}J_f(J_c,"laya.ui.Radio",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._value=null},J_a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},J_a.initialize=function(){J_b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},J_a.onClick=function(J_a){this.selected=!0},J_e(0,J_a,"value",function(){return null!=this._value?this._value:this.label},function(J_a){this._value=J_a}),J_c}(J_K),J_t=function(J_a){function J_b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,J_b.__super.call(this),this.width=this.height=200}J_f(J_b,"laya.ui.Tree",J_a);var J_c=J_b.prototype;return J_p.imps(J_c,{"laya.ui.IRender":!0}),J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),laya.ui.Component.prototype.destroy.call(this,J_a),this._list&&this._list.destroy(J_a),this._list=null,this._source=null,this._renderHandler=null},J_c.createChildren=function(){this.addChild(this._list=new J_X),this._list.renderHandler=J_m.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},J_c.onListChange=function(J_a){this.event("change")},J_c.getArray=function(){var J_a,J_b=[];for(var J_c in this._source)J_a=this._source[J_c],this.getParentOpenStatus(J_a)&&(J_a.x=this._spaceLeft*this.getDepth(J_a),J_b.push(J_a));return J_b},J_c.getDepth=function(J_a,J_b){return void 0===J_b&&(J_b=0),null==J_a.nodeParent?J_b:this.getDepth(J_a.nodeParent,J_b+1)},J_c.getParentOpenStatus=function(J_a){var J_b=J_a.nodeParent;return null==J_b||!!J_b.isOpen&&(null==J_b.nodeParent||this.getParentOpenStatus(J_b))},J_c.renderItem=function(J_a,J_b){var J_c=J_a.dataSource;if(J_c){J_a.left=J_c.x;var J_d=J_a.getChildByName("arrow");J_d&&(J_c.hasChild?(J_d.visible=!0,J_d.index=J_c.isOpen?1:0,J_d.tag=J_b,J_d.off("click",this,this.onArrowClick),J_d.on("click",this,this.onArrowClick)):J_d.visible=!1);var J_e=J_a.getChildByName("folder");J_e&&(2==J_e.clipY?J_e.index=J_c.isDirectory?0:1:J_e.index=J_c.isDirectory?J_c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([J_a,J_b])}},J_c.onArrowClick=function(J_a){var J_b=J_a.currentTarget.tag;this._list.array[J_b].isOpen=!this._list.array[J_b].isOpen,this.event("open"),this._list.array=this.getArray()},J_c.setItemState=function(J_a,J_b){this._list.array[J_a]&&(this._list.array[J_a].isOpen=J_b,this._list.array=this.getArray())},J_c.fresh=function(){this._list.array=this.getArray(),this.repaint()},J_c.parseXml=function(J_a,J_b,J_c,J_d){var J_e,J_f=J_a.childNodes,J_g=J_f.length;if(!J_d){J_e={};var J_h,J_i=J_a.attributes;for(var J_j in J_i){var J_k=(J_h=J_i[J_j]).nodeName,J_l=J_h.nodeValue;J_e[J_k]="true"==J_l||"false"!=J_l&&J_l}J_e.nodeParent=J_c,0<J_g&&(J_e.isDirectory=!0),J_e.hasChild=0<J_g,J_b.push(J_e)}for(var J_m=0;J_m<J_g;J_m++){var J_n=J_f[J_m];this.parseXml(J_n,J_b,J_e,!1)}},J_c.parseOpenStatus=function(J_a,J_b){for(var J_c=0,J_d=J_b.length;J_c<J_d;J_c++){var J_e=J_b[J_c];if(J_e.isDirectory)for(var J_f=0,J_g=J_a.length;J_f<J_g;J_f++){var J_h=J_a[J_f];if(J_h.isDirectory&&this.isSameParent(J_h,J_e)&&J_e.label==J_h.label){J_e.isOpen=J_h.isOpen;break}}}},J_c.isSameParent=function(J_a,J_b){return null==J_a.nodeParent&&null==J_b.nodeParent||null!=J_a.nodeParent&&null!=J_b.nodeParent&&(J_a.nodeParent.label==J_b.nodeParent.label&&this.isSameParent(J_a.nodeParent,J_b.nodeParent))},J_c.filter=function(J_a){if(Boolean(J_a)){var J_b=[];this.getFilterSource(this._source,J_b,J_a),this._list.array=J_b}else this._list.array=this.getArray()},J_c.getFilterSource=function(J_a,J_b,J_c){var J_d;for(var J_e in J_c=J_c.toLocaleLowerCase(),J_a)!(J_d=J_a[J_e]).isDirectory&&-1<String(J_d.label).toLowerCase().indexOf(J_c)&&(J_d.x=0,J_b.push(J_d)),J_d.child&&0<J_d.child.length&&this.getFilterSource(J_d.child,J_b,J_c)},J_e(0,J_c,"spaceBottom",function(){return this._list.spaceY},function(J_a){this._list.spaceY=J_a}),J_e(0,J_c,"keepStatus",function(){return this._keepStatus},function(J_a){this._keepStatus=J_a}),J_e(0,J_c,"itemRender",function(){return this._list.itemRender},function(J_a){this._list.itemRender=J_a}),J_e(0,J_c,"array",function(){return this._list.array},function(J_a){this._keepStatus&&this._list.array&&J_a&&this.parseOpenStatus(this._list.array,J_a),this._source=J_a,this._list.array=this.getArray()}),J_e(0,J_c,"mouseHandler",function(){return this._list.mouseHandler},function(J_a){this._list.mouseHandler=J_a}),J_e(0,J_c,"dataSource",J_a.prototype._$get_dataSource,function(J_a){this._dataSource=J_a,J_p.superSet(J_J,this,"dataSource",J_a)}),J_e(0,J_c,"source",function(){return this._source}),J_e(0,J_c,"scrollBar",function(){return this._list.scrollBar}),J_e(0,J_c,"list",function(){return this._list}),J_e(0,J_c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(J_a){this._list.vScrollBarSkin=J_a}),J_e(0,J_c,"renderHandler",function(){return this._renderHandler},function(J_a){this._renderHandler=J_a}),J_e(0,J_c,"selectedIndex",function(){return this._list.selectedIndex},function(J_a){this._list.selectedIndex=J_a}),J_e(0,J_c,"spaceLeft",function(){return this._spaceLeft},function(J_a){this._spaceLeft=J_a}),J_e(0,J_c,"selectedItem",function(){return this._list.selectedItem},function(J_a){this._list.selectedItem=J_a}),J_e(0,J_c,"width",J_a.prototype._$get_width,function(J_a){J_p.superSet(J_J,this,"width",J_a),this._list.width=J_a}),J_e(0,J_c,"height",J_a.prototype._$get_height,function(J_a){J_p.superSet(J_J,this,"height",J_a),this._list.height=J_a}),J_e(0,J_c,"xml",null,function(J_a){var J_b=[];this.parseXml(J_a.childNodes[0],J_b,null,!0),this.array=J_b}),J_e(0,J_c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),J_b}(J_J),J_aa=function(J_a){function J_b(){this._items=null,this._selectedIndex=0,J_b.__super.call(this),this._setIndexHandler=J_m.create(this,this.setIndex,null,!1)}J_f(J_b,"laya.ui.ViewStack",J_a);var J_c=J_b.prototype;return J_p.imps(J_c,{"laya.ui.IItem":!0}),J_c.setItems=function(J_a){this.removeChildren();for(var J_b=0,J_c=0,J_d=J_a.length;J_c<J_d;J_c++){var J_e=J_a[J_c];J_e&&(J_e.name="item"+J_b,this.addChild(J_e),J_b++)}this.initItems()},J_c.addItem=function(J_a){J_a.name="item"+this._items.length,this.addChild(J_a),this.initItems()},J_c.initItems=function(){this._items=[];for(var J_a=0;J_a<1e4;J_a++){var J_b=this.getChildByName("item"+J_a);if(null==J_b)break;this._items.push(J_b),J_b.visible=J_a==this._selectedIndex}},J_c.setSelect=function(J_a,J_b){this._items&&-1<J_a&&J_a<this._items.length&&(this._items[J_a].visible=J_b)},J_c.setIndex=function(J_a){this.selectedIndex=J_a},J_e(0,J_c,"dataSource",J_a.prototype._$get_dataSource,function(J_a){if("number"==typeof(this._dataSource=J_a)&&Math.floor(J_a)==J_a||"string"==typeof J_a)this.selectedIndex=parseInt(J_a);else for(var J_b in this._dataSource)this.hasOwnProperty(J_b)&&(this[J_b]=this._dataSource[J_b])}),J_e(0,J_c,"selectedIndex",function(){return this._selectedIndex},function(J_a){this._selectedIndex!=J_a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=J_a,this.setSelect(this._selectedIndex,!0))}),J_e(0,J_c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(J_a){this.selectedIndex=this._items.indexOf(J_a)}),J_e(0,J_c,"items",function(){return this._items}),J_e(0,J_c,"setIndexHandler",function(){return this._setIndexHandler},function(J_a){this._setIndexHandler=J_a}),J_b}(J_J),J_ba=function(J_a){function J_b(){J_b.__super.call(this)}return J_f(J_b,"laya.ui.VScrollBar",J_O),J_b}(),J_ca=function(J_b){function J_c(J_a){this._bg=null,this._skin=null,J_c.__super.call(this),void 0===J_a&&(J_a=""),this.text=J_a,this.skin=this.skin}J_f(J_c,"laya.ui.TextInput",J_b);var J_a=J_c.prototype;return J_a.preinitialize=function(){this.mouseEnabled=!0},J_a.destroy=function(J_a){J_u.clearCache(this,this._skin),void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._bg&&this._bg.destroy(),this._bg=null},J_a.createChildren=function(){this.addChild(this._tf=new J_n),this._tf.padding=J_D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},J_a._onFocus=function(){this.event("focus",this)},J_a._onBlur=function(){this.event("blur",this)},J_a._onInput=function(){this.event("input",this)},J_a._onEnter=function(){this.event("enter",this)},J_a.initialize=function(){this.width=128,this.height=22},J_a.select=function(){this._tf.select()},J_a.setSelection=function(J_a,J_b){this._tf.setSelection(J_a,J_b)},J_e(0,J_a,"text",J_b.prototype._$get_text,function(J_a){this._tf.text!=J_a&&(J_a+="",this._tf.text=J_a,this.event("change"))}),J_e(0,J_a,"bg",function(){return this._bg},function(J_a){this.graphics=this._bg=J_a}),J_e(0,J_a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(J_a){this._tf.inputElementYAdjuster=J_a}),J_e(0,J_a,"multiline",function(){return this._tf.multiline},function(J_a){this._tf.multiline=J_a}),J_e(0,J_a,"skin",function(){return this._skin},function(J_a){this._skin!=J_a&&(J_u.clearCache(this,this._skin),this._skin=J_a,this._bg||(this.graphics=this._bg=new J_G),J_u.keepCache(this,this._skin),this._bg.source=J_u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),J_e(0,J_a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(J_a){this._bg||(this.graphics=this._bg=new J_G),this._bg.sizeGrid=J_E.fillArray(J_D.defaultSizeGrid,J_a,Number)}),J_e(0,J_a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(J_a){this._tf.inputElementXAdjuster=J_a}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_R,this,"width",J_a),this._bg&&(this._bg.width=J_a)}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_R,this,"height",J_a),this._bg&&(this._bg.height=J_a)}),J_e(0,J_a,"editable",function(){return this._tf.editable},function(J_a){this._tf.editable=J_a}),J_e(0,J_a,"restrict",function(){return this._tf.restrict},function(J_a){this._tf.restrict=J_a}),J_e(0,J_a,"prompt",function(){return this._tf.prompt},function(J_a){this._tf.prompt=J_a}),J_e(0,J_a,"promptColor",function(){return this._tf.promptColor},function(J_a){this._tf.promptColor=J_a}),J_e(0,J_a,"maxChars",function(){return this._tf.maxChars},function(J_a){this._tf.maxChars=J_a}),J_e(0,J_a,"focus",function(){return this._tf.focus},function(J_a){this._tf.focus=J_a}),J_e(0,J_a,"type",function(){return this._tf.type},function(J_a){this._tf.type=J_a}),J_e(0,J_a,"asPassword",function(){return this._tf.asPassword},function(J_a){this._tf.asPassword=J_a}),J_c}(J_R),J_da=function(J_a){function J_b(){J_b.__super.call(this)}return J_f(J_b,"laya.ui.VSlider",J_P),J_b}(),J_ea=function(J_a){function J_d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,J_d.__super.call(this)}J_f(J_d,"laya.ui.Dialog",J_a);var J_b=J_d.prototype;return J_b.initialize=function(){this.popupEffect=J_d.manager.popupEffectHandler,this.closeEffect=J_d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},J_b._dealDragArea=function(){var J_a=this.getChildByName("drag");J_a&&(this.dragArea=J_a.x+","+J_a.y+","+J_a.width+","+J_a.height,J_a.removeSelf())},J_b._onClick=function(J_a){var J_b=J_a.target;if(J_b)switch(J_b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(J_b.name)}},J_b.show=function(J_a,J_b){void 0===J_a&&(J_a=!1),void 0===J_b&&(J_b=!0),this._open(!1,J_a,J_b)},J_b.popup=function(J_a,J_b){void 0===J_a&&(J_a=!1),void 0===J_b&&(J_b=!0),this._open(!0,J_a,J_b)},J_b._open=function(J_a,J_b,J_c){J_d.manager.lock(!1),this.isModal=J_a,J_d.manager.open(this,J_b,J_c)},J_b.onOpened=function(){},J_b.close=function(J_a,J_b){void 0===J_b&&(J_b=!0),J_d.manager.close(this,J_a,J_b)},J_b.onClosed=function(J_a){},J_b._onMouseDown=function(J_a){var J_b=this.getMousePoint();this._dragArea.contains(J_b.x,J_b.y)?this.startDrag():this.stopDrag()},J_e(0,J_b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(J_a){if(J_a){var J_b=J_E.fillArray([0,0,0,0],J_a,Number);this._dragArea=new J_r(J_b[0],J_b[1],J_b[2],J_b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),J_e(0,J_b,"isPopup",function(){return null!=this.parent}),J_e(0,J_b,"zOrder",J_a.prototype._$get_zOrder,function(J_a){J_p.superSet(J_T,this,"zOrder",J_a),J_d.manager._checkMask()}),J_e(1,J_d,"manager",function(){return J_d._manager=J_d._manager||new J_I},function(J_a){J_d._manager=J_a}),J_d.setLockView=function(J_a){J_d.manager.setLockView(J_a)},J_d.lock=function(J_a){J_d.manager.lock(J_a)},J_d.closeAll=function(){J_d.manager.closeAll()},J_d.getDialogsByGroup=function(J_a){return J_d.manager.getDialogsByGroup(J_a)},J_d.closeByGroup=function(J_a){return J_d.manager.closeByGroup(J_a)},J_d.CLOSE="close",J_d.CANCEL="cancel",J_d.SURE="sure",J_d.NO="no",J_d.OK="ok",J_d.YES="yes",J_d._manager=null,J_d}(J_T),J_fa=function(J_a){function J_b(){J_b.__super.call(this)}J_f(J_b,"laya.ui.HBox",J_a);var J_c=J_b.prototype;return J_c.sortItem=function(J_a){J_a&&J_a.sort(function(J_a,J_b){return J_a.x-J_b.x})},J_c.changeItems=function(){this._itemChanged=!1;for(var J_a=[],J_b=0,J_c=0,J_d=this.numChildren;J_c<J_d;J_c++){var J_e=this.getChildAt(J_c);J_e&&J_e.layoutEnabled&&(J_a.push(J_e),J_b=this._height?this._height:Math.max(J_b,J_e.height*J_e.scaleY))}this.sortItem(J_a);var J_f=0;for(J_c=0,J_d=J_a.length;J_c<J_d;J_c++)(J_e=J_a[J_c]).x=J_f,J_f+=J_e.width*J_e.scaleX+this._space,"top"==this._align?J_e.y=0:"middle"==this._align?J_e.y=.5*(J_b-J_e.height*J_e.scaleY):"bottom"==this._align&&(J_e.y=J_b-J_e.height*J_e.scaleY);this.changeSize()},J_e(0,J_c,"height",J_a.prototype._$get_height,function(J_a){this._height!=J_a&&(J_p.superSet(J_V,this,"height",J_a),this.callLater(this.changeItems))}),J_b.NONE="none",J_b.TOP="top",J_b.MIDDLE="middle",J_b.BOTTOM="bottom",J_b}(J_V),J_ga=function(J_a){function J_b(){J_b.__super.call(this)}J_f(J_b,"laya.ui.VBox",J_a);var J_c=J_b.prototype;return J_c.changeItems=function(){this._itemChanged=!1;for(var J_a=[],J_b=0,J_c=0,J_d=this.numChildren;J_c<J_d;J_c++){var J_e=this.getChildAt(J_c);J_e&&J_e.layoutEnabled&&(J_a.push(J_e),J_b=this._width?this._width:Math.max(J_b,J_e.width*J_e.scaleX))}this.sortItem(J_a);var J_f=0;for(J_c=0,J_d=J_a.length;J_c<J_d;J_c++)(J_e=J_a[J_c]).y=J_f,J_f+=J_e.height*J_e.scaleY+this._space,"left"==this._align?J_e.x=0:"center"==this._align?J_e.x=.5*(J_b-J_e.width*J_e.scaleX):"right"==this._align&&(J_e.x=J_b-J_e.width*J_e.scaleX);this.changeSize()},J_e(0,J_c,"width",J_a.prototype._$get_width,function(J_a){this._width!=J_a&&(J_p.superSet(J_V,this,"width",J_a),this.callLater(this.changeItems))}),J_b.NONE="none",J_b.LEFT="left",J_b.CENTER="center",J_b.RIGHT="right",J_b}(J_V),J_ha=function(J_a){function J_b(){J_b.__super.call(this)}return J_f(J_b,"laya.ui.RadioGroup",J__),J_b.prototype.createItem=function(J_a,J_b){return new J_s(J_a,J_b)},J_b}(),J_ia=function(J_a){function J_b(){J_b.__super.call(this)}return J_f(J_b,"laya.ui.Tab",J__),J_b.prototype.createItem=function(J_a,J_b){return new J_K(J_a,J_b)},J_b}(),J_ja=function(J_b){function J_c(J_a){this._vScrollBar=null,this._hScrollBar=null,void 0===J_a&&(J_a=""),J_c.__super.call(this,J_a)}J_f(J_c,"laya.ui.TextArea",J_b);var J_a=J_c.prototype;return J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},J_a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},J_a.onVBarChanged=function(J_a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},J_a.onHBarChanged=function(J_a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},J_a.changeScroll=function(){var J_a=this._vScrollBar&&0<this._tf.maxScrollY,J_b=this._hScrollBar&&0<this._tf.maxScrollX,J_c=J_a?this._width-this._vScrollBar.width:this._width,J_d=J_b?this._height-this._hScrollBar.height:this._height,J_e=this._tf.padding||J_D.labelPadding;this._tf.width=J_c,this._tf.height=J_d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-J_e[2],this._vScrollBar.y=J_e[1],this._vScrollBar.height=this._height-(J_b?this._hScrollBar.height:0)-J_e[1]-J_e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=J_d/Math.max(this._tf.textHeight,J_d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=J_a),this._hScrollBar&&(this._hScrollBar.x=J_e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-J_e[3],this._hScrollBar.width=this._width-(J_a?this._vScrollBar.width:0)-J_e[0]-J_e[2],this._hScrollBar.scrollSize=Math.max(.033*J_c,1),this._hScrollBar.thumbPercent=J_c/Math.max(this._tf.textWidth,J_c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=J_b)},J_a.scrollTo=function(J_a){this.commitMeasure(),this._tf.scrollY=J_a},J_e(0,J_a,"scrollY",function(){return this._tf.scrollY}),J_e(0,J_a,"width",J_b.prototype._$get_width,function(J_a){J_p.superSet(J_ca,this,"width",J_a),this.callLater(this.changeScroll)}),J_e(0,J_a,"hScrollBar",function(){return this._hScrollBar}),J_e(0,J_a,"height",J_b.prototype._$get_height,function(J_a){J_p.superSet(J_ca,this,"height",J_a),this.callLater(this.changeScroll)}),J_e(0,J_a,"maxScrollX",function(){return this._tf.maxScrollX}),J_e(0,J_a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(J_a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new J_ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=J_a}),J_e(0,J_a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(J_a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new J_Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=J_a}),J_e(0,J_a,"vScrollBar",function(){return this._vScrollBar}),J_e(0,J_a,"maxScrollY",function(){return this._tf.maxScrollY}),J_e(0,J_a,"scrollX",function(){return this._tf.scrollX}),J_c}(J_ca);!function(J_a){function J_b(){this._uiView=null,this.isCloseOther=!1,J_b.__super.call(this)}J_f(J_b,"laya.ui.AsynDialog",J_ea);var J_c=J_b.prototype;J_c.createView=function(J_a){this._uiView=J_a},J_c._open=function(J_a,J_b,J_c){this.isModal=J_a,this.isCloseOther=J_b,J_ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},J_c.onCreated=function(){this.createUI(),this.onOpen()},J_c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},J_c.onOpen=function(){J_ea.manager.open(this,this.isCloseOther),J_ea.manager.lock(!1)},J_c.close=function(J_a,J_b){void 0===J_b&&(J_b=!0),J_ea.manager.close(this),this.onClose()},J_c.onClose=function(){},J_c.destroy=function(J_a){void 0===J_a&&(J_a=!0),laya.ui.View.prototype.destroy.call(this,J_a),this._uiView=null,this.onDestroy()},J_c.onDestroy=function(){}}();J_p.__init([J_T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}}),function(J_m,J_a,J_x){J_x.un,J_x.uns;var J_l=J_x.static,J_n=J_x.class,J_o=J_x.getset,J_d=J_x.__newvec,J_w=laya.maths.Arith,J_g=laya.webgl.atlas.AtlasResourceManager,J_c=laya.webgl.shader.BaseShader,J_H=laya.utils.Browser,J_h=laya.webgl.utils.Buffer,J_y=laya.utils.Byte,J_e=laya.utils.ClassUtils,J_i=J_x.Config,J_f=(laya.events.Event,laya.events.EventDispatcher),J_D=laya.utils.Handler,J_r=laya.net.Loader,J_b=laya.net.LoaderManager,J_j=(laya.maths.MathUtil,laya.display.Node),J_p=laya.renders.Render,J_k=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),J_q=laya.resource.Resource,J_u=laya.utils.RunDriver,J_v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),J_z=laya.display.Sprite,J_A=laya.utils.Stat,J_B=laya.utils.StringKey,J_E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),J_C=laya.utils.Utils,J_F=laya.webgl.WebGL,J_G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;J_x.interface("laya.d3.core.IClone"),J_x.interface("laya.d3.graphics.IVertex"),J_x.interface("laya.d3.core.render.IUpdate"),J_x.interface("laya.d3.core.scene.ITreeNode"),J_x.interface("laya.d3.core.render.IRenderable");(function(){function J_K(){}J_n(J_K,"laya.d3.animation.AnimationClipParser01"),J_K.READ_DATA=function(){J_K._DATA.offset=J_K._reader.getUint32(),J_K._DATA.size=J_K._reader.getUint32()},J_K.READ_BLOCK=function(){for(var J_a=J_K._BLOCK.count=J_K._reader.getUint16(),J_b=J_K._BLOCK.blockStarts=[],J_c=J_K._BLOCK.blockLengths=[],J_d=0;J_d<J_a;J_d++)J_b.push(J_K._reader.getUint32()),J_c.push(J_K._reader.getUint32())},J_K.READ_STRINGS=function(){var J_a=J_K._reader.getUint32(),J_b=J_K._reader.getUint16(),J_c=J_K._reader.pos;J_K._reader.pos=J_a+J_K._DATA.offset;for(var J_d=0;J_d<J_b;J_d++)J_K._strings[J_d]=J_K._reader.readUTFString();J_K._reader.pos=J_c},J_K.parse=function(J_a,J_b){J_K._animationClip=J_a;(J_K._reader=J_b).__getBuffer();J_K.READ_DATA(),J_K.READ_BLOCK(),J_K.READ_STRINGS();for(var J_c=0,J_d=J_K._BLOCK.count;J_c<J_d;J_c++){var J_e=J_b.getUint16(),J_f=J_K._strings[J_e],J_g=J_K["READ_"+J_f];if(null==J_g)throw new Error("model file err,no this function:"+J_e+" "+J_f);J_g.call()}},J_K.READ_ANIMATIONS=function(){var J_a,J_b=0,J_c=0,J_d=J_K._reader,J_e=J_d.__getBuffer(),J_f=[],J_g=J_d.getUint8();for(J_f.length=J_g,J_b=0;J_b<J_g;J_b++)J_f[J_b]=J_d.getUint16();var J_h=[],J_i=J_d.getUint16();for(J_h.length=J_i,J_b=0;J_b<J_i;J_b++)J_h[J_b]=J_d.getFloat32();var J_j=J_K._animationClip;J_j.name=J_K._strings[J_d.getUint16()];var J_k=J_j._duration=J_d.getFloat32();J_j.islooping=!!J_d.getByte(),J_j._frameRate=J_d.getInt16();var J_l=J_d.getInt16(),J_m=J_j._nodes=new Array;J_m.length=J_l,(J_j._publicClipDatas=[]).length=J_l;var J_n=J_j._nodesMap={},J_o=0,J_p=0;for(J_b=0;J_b<J_l;J_b++){J_a=J_m[J_b]=new J_S;var J_q=J_d.getUint16(),J_r=J_a.path=[];for(J_r.length=J_q,J_c=0;J_c<J_q;J_c++)J_r[J_c]=J_K._strings[J_d.getUint16()];var J_u=J_r.join("/"),J_v=J_n[J_u];J_v||(J_n[J_u]=J_v=[]),J_v.push(J_a);var J_w=J_d.getInt16();-1!==J_w&&(J_a.componentType=J_K._strings[J_w]);var J_x=J_Q._propertyIndexDic[J_K._strings[J_d.getUint16()]];if(null==J_x)throw new Error("AnimationClipParser01:unknown property name.");var J_y=J_x<4,J_z=!J_y||J_y&&""===J_r[0];(J_a._cacheProperty=J_z)?J_o++:J_p++,J_a.propertyNameID=J_x;var J_A=J_f[J_d.getUint8()];J_a.keyFrameWidth=J_A/4;var J_B=J_a.keyFrames=[],J_C=J_B.length=J_d.getUint16(),J_D=null,J_E=NaN;for(J_c=0;J_c<J_C;J_c++){var J_F=J_B[J_c]=new J_R;J_E=J_F.startTime=J_h[J_d.getUint16()];var J_G=J_d.pos;J_F.inTangent=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_G=J_d.pos,J_F.outTangent=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_G=J_d.pos,J_F.data=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_D&&(J_D.next=J_F,J_D.duration=J_E-J_D.startTime),J_D=J_F}J_F.next=null,J_F.duration=J_k-J_E}var J_H=J_j._nodeToCachePropertyMap=new Int32Array(J_l),J_I=J_j._cachePropertyMap=new Int32Array(J_o),J_J=J_j._unCachePropertyMap=new Int32Array(J_p);for(J_o=J_p=0,J_b=0;J_b<J_l;J_b++)(J_a=J_m[J_b])._cacheProperty?(J_H[J_b]=J_o,J_I[J_o++]=J_b):J_J[J_p++]=J_b},J_K._animationClip=null,J_K._reader=null,J_K._strings=[],J_l(J_K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function J_O(){}J_n(J_O,"laya.d3.animation.AnimationClipParser02"),J_O.READ_DATA=function(){J_O._DATA.offset=J_O._reader.getUint32(),J_O._DATA.size=J_O._reader.getUint32()},J_O.READ_BLOCK=function(){for(var J_a=J_O._BLOCK.count=J_O._reader.getUint16(),J_b=J_O._BLOCK.blockStarts=[],J_c=J_O._BLOCK.blockLengths=[],J_d=0;J_d<J_a;J_d++)J_b.push(J_O._reader.getUint32()),J_c.push(J_O._reader.getUint32())},J_O.READ_STRINGS=function(){var J_a=J_O._reader.getUint32(),J_b=J_O._reader.getUint16(),J_c=J_O._reader.pos;J_O._reader.pos=J_a+J_O._DATA.offset;for(var J_d=0;J_d<J_b;J_d++)J_O._strings[J_d]=J_O._reader.readUTFString();J_O._reader.pos=J_c},J_O.parse=function(J_a,J_b){J_O._animationClip=J_a;(J_O._reader=J_b).__getBuffer();J_O.READ_DATA(),J_O.READ_BLOCK(),J_O.READ_STRINGS();for(var J_c=0,J_d=J_O._BLOCK.count;J_c<J_d;J_c++){var J_e=J_b.getUint16(),J_f=J_O._strings[J_e],J_g=J_O["READ_"+J_f];if(null==J_g)throw new Error("model file err,no this function:"+J_e+" "+J_f);J_g.call()}},J_O.READ_ANIMATIONS=function(){var J_a,J_b=0,J_c=0,J_d=J_O._reader,J_e=J_d.__getBuffer(),J_f=[],J_g=J_d.getUint8();for(J_f.length=J_g,J_b=0;J_b<J_g;J_b++)J_f[J_b]=J_d.getUint16();var J_h=[],J_i=J_d.getUint16();for(J_h.length=J_i,J_b=0;J_b<J_i;J_b++)J_h[J_b]=J_d.getFloat32();var J_j=J_O._animationClip;J_j.name=J_O._strings[J_d.getUint16()];var J_k=J_j._duration=J_d.getFloat32();J_j.islooping=!!J_d.getByte(),J_j._frameRate=J_d.getInt16();var J_l=J_d.getInt16(),J_m=J_j._nodes=new Array;J_m.length=J_l,(J_j._publicClipDatas=[]).length=J_l;var J_n=J_j._nodesMap={},J_o=0,J_p=0;for(J_b=0;J_b<J_l;J_b++){J_a=J_m[J_b]=new J_S;var J_q=J_d.getUint16(),J_r=J_a.path=[];for(J_r.length=J_q,J_c=0;J_c<J_q;J_c++)J_r[J_c]=J_O._strings[J_d.getUint16()];var J_u=J_r.join("/"),J_v=J_n[J_u];J_v||(J_n[J_u]=J_v=[]),J_v.push(J_a);var J_w=J_d.getInt16();-1!==J_w&&(J_a.componentType=J_O._strings[J_w]);var J_x=J_Q._propertyIndexDic[J_O._strings[J_d.getUint16()]];if(null==J_x)throw new Error("AnimationClipParser02:unknown property name.");var J_y=J_x<4,J_z=!J_y||J_y&&""===J_r[0];(J_a._cacheProperty=J_z)?J_o++:J_p++,J_a.propertyNameID=J_x;var J_A=J_f[J_d.getUint8()];J_a.keyFrameWidth=J_A/4;var J_B=J_a.keyFrames=[],J_C=J_B.length=J_d.getUint16(),J_D=null,J_E=NaN;for(J_c=0;J_c<J_C;J_c++){var J_F=J_B[J_c]=new J_R;J_E=J_F.startTime=J_h[J_d.getUint16()];var J_G=J_d.pos;J_F.inTangent=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_G=J_d.pos,J_F.outTangent=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_G=J_d.pos,J_F.data=new Float32Array(J_e.slice(J_G,J_G+J_A)),J_d.pos+=J_A,J_D&&(J_D.next=J_F,J_D.duration=J_E-J_D.startTime),J_D=J_F}J_F.next=null,J_F.duration=J_k-J_E}var J_H=J_d.getUint16();for(J_b=0;J_b<J_H;J_b++){var J_I,J_J=new J_P;J_J.time=J_d.getFloat32(),J_J.eventName=J_O._strings[J_d.getUint16()];var J_K=J_d.getUint16();for(0<J_K&&(J_J.params=J_I=[]),J_c=0;J_c<J_K;J_c++){switch(J_d.getByte()){case 0:J_I.push(!!J_d.getByte());break;case 1:J_I.push(J_d.getInt32());break;case 2:J_I.push(J_d.getFloat32());break;case 3:J_I.push(J_O._strings[J_d.getUint16()]);break;default:throw new Error("unknown type.")}}J_j.addEvent(J_J)}var J_L=J_j._nodeToCachePropertyMap=new Int32Array(J_l),J_M=J_j._cachePropertyMap=new Int32Array(J_o),J_N=J_j._unCachePropertyMap=new Int32Array(J_p);for(J_o=J_p=0,J_b=0;J_b<J_l;J_b++)(J_a=J_m[J_b])._cacheProperty?(J_L[J_b]=J_o,J_M[J_o++]=J_b):J_N[J_p++]=J_b},J_O._animationClip=null,J_O._reader=null,J_O._strings=[],J_l(J_O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var J_P=function(){function J_a(){this.time=NaN,this.eventName=null,this.params=null}return J_n(J_a,"laya.d3.animation.AnimationEvent"),J_a}(),J_Q=function(){function J_d(){this._childs=[],this.transform=new J_ub(this)}J_n(J_d,"laya.d3.animation.AnimationNode");var J_a=J_d.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.addChild=function(J_a){J_a._parent=this,J_a.transform.setParent(this.transform),this._childs.push(J_a)},J_a.removeChild=function(J_a){var J_b=this._childs.indexOf(J_a);-1!==J_b&&this._childs.splice(J_b,1)},J_a.getChildByName=function(J_a){for(var J_b=0,J_c=this._childs.length;J_b<J_c;J_b++){var J_d=this._childs[J_b];if(J_d.name===J_a)return J_d}return null},J_a.getChildByIndex=function(J_a){return this._childs[J_a]},J_a.getChildCount=function(){return this._childs.length},J_a.cloneTo=function(J_a){var J_b=J_a;J_b.name=this.name;for(var J_c=0,J_d=this._childs.length;J_c<J_d;J_c++){var J_e=this._childs[J_c],J_f=J_e.clone();J_b.addChild(J_f);var J_g=J_e.transform,J_h=J_f.transform;J_h.setLocalPosition(J_g.getLocalPosition()),J_h.setLocalRotation(J_g.getLocalRotation()),J_h.setLocalScale(J_g.getLocalScale()),J_h._localRotationEuler=J_g._localRotationEuler,J_h._setWorldMatrixIgnoreUpdate(J_g.getWorldMatrix())}},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_d.__init__=function(){J_d.registerAnimationNodeProperty("localPosition",J_d._getLocalPosition,J_d._setLocalPosition),J_d.registerAnimationNodeProperty("localRotation",J_d._getLocalRotation,J_d._setLocalRotation),J_d.registerAnimationNodeProperty("localScale",J_d._getLocalScale,J_d._setLocalScale),J_d.registerAnimationNodeProperty("localRotationEuler",J_d._getLocalRotationEuler,J_d._setLocalRotationEuler),J_d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",J_d._getParticleRenderSharedMaterialTintColor,J_d._setParticleRenderSharedMaterialTintColor),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",J_d._getMeshRenderSharedMaterialTilingOffset,J_d._setMeshRenderSharedMaterialTilingOffset),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",J_d._getMeshRenderSharedMaterialAlbedo,J_d._setMeshRenderSharedMaterialAlbedo),J_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",J_d._getSkinnedMeshRenderSharedMaterialTilingOffset,J_d._setSkinnedMeshRenderSharedMaterialTilingOffset),J_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",J_d._getSkinnedMeshRenderSharedMaterialAlbedo,J_d._setSkinnedMeshRenderSharedMaterialAlbedo),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",J_d._getMeshRenderSharedMaterialAlbedo,J_d._setMeshRenderSharedMaterialAlbedo),J_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",J_d._getSkinnedMeshRenderSharedMaterialAlbedo,J_d._setSkinnedMeshRenderSharedMaterialAlbedo),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",J_d._getMeshRenderSharedMaterialIntensity,J_d._setMeshRenderSharedMaterialIntensity),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",J_d._getMeshRenderSharedMaterialAlpha,J_d._setMeshRenderSharedMaterialAlpha),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",J_d._getMeshRenderSharedMaterialAlphaColor,J_d._setMeshRenderSharedMaterialAlphaColor),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",J_d._getMeshRenderSharedMaterialBaseColor,J_d._setMeshRenderSharedMaterialBaseColor),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",J_d._getMeshRenderSharedMaterialDissolve,J_d._setMeshRenderSharedMaterialDissolve),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",J_d._getMeshRenderSharedMaterialDissolveSpeed,J_d._setMeshRenderSharedMaterialDissolveSpeed),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",J_d._getMeshRenderSharedMaterialMMultiplier,J_d._setMeshRenderSharedMaterialMMultiplier),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",J_d._getMeshRenderSharedMaterialBaseScrollSpeedX,J_d._setMeshRenderSharedMaterialBaseScrollSpeedX),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",J_d._getMeshRenderSharedMaterialBaseScrollSpeedY,J_d._setMeshRenderSharedMaterialBaseScrollSpeedY),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",J_d._getMeshRenderSharedMaterialSecondScrollSpeedX,J_d._setMeshRenderSharedMaterialSecondScrollSpeedX),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",J_d._getMeshRenderSharedMaterialSecondScrollSpeedY,J_d._setMeshRenderSharedMaterialSecondScrollSpeedY),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",J_d._getMeshRenderSharedMaterialDetailTilingOffset,J_d._setMeshRenderSharedMaterialDetailTilingOffset),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",J_d._getMeshRenderSharedMaterialDissolveTilingOffset,J_d._setMeshRenderSharedMaterialDissolveTilingOffset),J_d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",J_d._getMeshRenderSharedMaterialMaskTilingOffset,J_d._setMeshRenderSharedMaterialMaskTilingOffset)},J_d.registerAnimationNodeProperty=function(J_a,J_b,J_c){if(J_d._propertyIndexDic[J_a])throw new Error("AnimationNode: this propertyName has registered.");J_d._propertyIndexDic[J_a]=J_d._propertyIDCounter,J_d._propertyGetFuncs[J_d._propertyIDCounter]=J_b,J_d._propertySetFuncs[J_d._propertyIDCounter]=J_c,J_d._propertyIDCounter++},J_d._getLocalPosition=function(J_a,J_b){return J_a?J_a.transform.getLocalPosition():J_b._transform.localPosition.elements},J_d._setLocalPosition=function(J_a,J_b,J_c){if(J_a)J_a.transform.setLocalPosition(J_c);else{var J_d=J_b._transform,J_e=J_d.localPosition;J_e.elements=J_c,J_d.localPosition=J_e}},J_d._getLocalRotation=function(J_a,J_b){return J_a?J_a.transform.getLocalRotation():J_b._transform.localRotation.elements},J_d._setLocalRotation=function(J_a,J_b,J_c){if(J_a)J_a.transform.setLocalRotation(J_c);else{var J_d=J_b._transform,J_e=J_d.localRotation;J_e.elements=J_c,J_d.localRotation=J_e}},J_d._getLocalScale=function(J_a,J_b){return J_a?J_a.transform.getLocalScale():J_b._transform.localScale.elements},J_d._setLocalScale=function(J_a,J_b,J_c){if(J_a)J_a.transform.setLocalScale(J_c);else{var J_d=J_b._transform,J_e=J_d.localScale;J_e.elements=J_c,J_d.localScale=J_e}},J_d._getLocalRotationEuler=function(J_a,J_b){return J_a?J_a.transform.getLocalRotationEuler():J_b._transform.localRotationEuler.elements},J_d._setLocalRotationEuler=function(J_a,J_b,J_c){if(J_a)J_a.transform.setLocalRotationEuler(J_c);else{var J_d=J_b._transform,J_e=J_d.localRotationEuler;J_e.elements=J_c,J_d.localRotationEuler=J_e}},J_d._getMeshRenderSharedMaterialTilingOffset=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return J_b.meshRender.sharedMaterial.tilingOffset.elements},J_d._setMeshRenderSharedMaterialTilingOffset=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).tilingOffset).elements=J_c,J_d.tilingOffset=J_e)}else(J_e=(J_d=J_b.meshRender.material).tilingOffset).elements=J_c,J_d.tilingOffset=J_e},J_d._getMeshRenderSharedMaterialAlbedo=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return J_b.meshRender.sharedMaterial.albedoColor.elements},J_d._setMeshRenderSharedMaterialAlbedo=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).albedoColor).elements=J_c,J_d.albedoColor=J_e)}else(J_e=(J_d=J_b.meshRender.material).albedoColor).elements=J_c,J_d.albedoColor=J_e},J_d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return J_b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},J_d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.skinnedMeshRender.material).tilingOffset).elements=J_c,J_d.tilingOffset=J_e)}else(J_e=(J_d=J_b.skinnedMeshRender.material).tilingOffset).elements=J_c,J_d.tilingOffset=J_e},J_d._getSkinnedMeshRenderSharedMaterialAlbedo=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return J_b.skinnedMeshRender.sharedMaterial.albedoColor.elements},J_d._setSkinnedMeshRenderSharedMaterialAlbedo=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.skinnedMeshRender.material).albedoColor).elements=J_c,J_d.albedoColor=J_e)}else(J_e=(J_d=J_b.skinnedMeshRender.material).albedoColor).elements=J_c,J_d.albedoColor=J_e},J_d._getParticleRenderSharedMaterialTintColor=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.particleRender.sharedMaterial.tintColor.elements:null}return J_b.particleRender.sharedMaterial.tintColor.elements},J_d._setParticleRenderSharedMaterialTintColor=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.particleRender.material).tintColor).elements=J_c,J_d.tintColor=J_e)}else(J_e=(J_d=J_b.particleRender.material).tintColor).elements=J_c,J_d.tintColor=J_e},J_d._getMeshRenderSharedMaterialAlphaColor=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return J_b.meshRender.sharedMaterial.alphaColor.elements},J_d._setMeshRenderSharedMaterialAlphaColor=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).alphaColor).elements=J_c,J_d.alphaColor=J_e)}else(J_e=(J_d=J_b.meshRender.material).alphaColor).elements=J_c,J_d.alphaColor=J_e},J_d._getMeshRenderSharedMaterialBaseColor=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.baseColor.elements:null}return J_b.meshRender.sharedMaterial.baseColor.elements},J_d._setMeshRenderSharedMaterialBaseColor=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).baseColor).elements=J_c,J_d.baseColor=J_e)}else(J_e=(J_d=J_b.meshRender.material).baseColor).elements=J_c,J_d.baseColor=J_e},J_d._getMeshRenderSharedMaterialDissolve=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.dissolve:0}return J_b.meshRender.sharedMaterial.dissolve},J_d._setMeshRenderSharedMaterialDissolve=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.dissolve=J_c[0])}else J_b.meshRender.material.dissolve=J_c[0]},J_d._getMeshRenderSharedMaterialDissolveSpeed=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return J_b.meshRender.sharedMaterial.dissolveSpeed},J_d._setMeshRenderSharedMaterialDissolveSpeed=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.dissolveSpeed=J_c[0])}else J_b.meshRender.material.dissolveSpeed=J_c[0]},J_d._getMeshRenderSharedMaterialMMultiplier=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.mMultiplier:0}return J_b.meshRender.sharedMaterial.mMultiplier},J_d._setMeshRenderSharedMaterialMMultiplier=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.mMultiplier=J_c[0])}else J_b.meshRender.material.mMultiplier=J_c[0]},J_d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return J_b.meshRender.sharedMaterial.baseScrollSpeedX},J_d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.baseScrollSpeedX=J_c[0])}else J_b.meshRender.material.baseScrollSpeedX=J_c[0]},J_d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return J_b.meshRender.sharedMaterial.baseScrollSpeedY},J_d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.baseScrollSpeedY=J_c[0])}else J_b.meshRender.material.baseScrollSpeedY=J_c[0]},J_d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return J_b.meshRender.sharedMaterial.secondScrollSpeedX},J_d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.secondScrollSpeedX=J_c[0])}else J_b.meshRender.material.secondScrollSpeedX=J_c[0]},J_d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return J_b.meshRender.sharedMaterial.secondScrollSpeedY},J_d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.secondScrollSpeedY=J_c[0])}else J_b.meshRender.material.secondScrollSpeedY=J_c[0]},J_d._getMeshRenderSharedMaterialAlpha=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.alpha:0}return J_b.meshRender.sharedMaterial.alpha},J_d._setMeshRenderSharedMaterialAlpha=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.alpha=J_c[0])}else J_b.meshRender.material.alpha=J_c[0]},J_d._getMeshRenderSharedMaterialIntensity=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.intensity:0}return J_b.meshRender.sharedMaterial.intensity},J_d._setMeshRenderSharedMaterialIntensity=function(J_a,J_b,J_c){if(J_a){var J_d=J_a.transform._entity;J_d&&(J_d.owner.meshRender.material.intensity=J_c[0])}else J_b.meshRender.material.intensity=J_c[0]},J_d._getMeshRenderSharedMaterialDetailTilingOffset=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return J_b.meshRender.sharedMaterial.detailTilingOffset.elements},J_d._setMeshRenderSharedMaterialDetailTilingOffset=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).detailTilingOffset).elements=J_c,J_d.detailTilingOffset=J_e)}else(J_e=(J_d=J_b.meshRender.material).detailTilingOffset).elements=J_c,J_d.detailTilingOffset=J_e},J_d._getMeshRenderSharedMaterialDissolveTilingOffset=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return J_b.meshRender.sharedMaterial.dissolveTilingOffset.elements},J_d._setMeshRenderSharedMaterialDissolveTilingOffset=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).dissolveTilingOffset).elements=J_c,J_d.dissolveTilingOffset=J_e)}else(J_e=(J_d=J_b.meshRender.material).dissolveTilingOffset).elements=J_c,J_d.dissolveTilingOffset=J_e},J_d._getMeshRenderSharedMaterialMaskTilingOffset=function(J_a,J_b){if(J_a){var J_c=J_a.transform._entity;return J_c?J_c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return J_b.meshRender.sharedMaterial.maskTilingOffset.elements},J_d._setMeshRenderSharedMaterialMaskTilingOffset=function(J_a,J_b,J_c){var J_d,J_e;if(J_a){var J_f=J_a.transform._entity;J_f&&((J_e=(J_d=J_f.owner.meshRender.material).maskTilingOffset).elements=J_c,J_d.maskTilingOffset=J_e)}else(J_e=(J_d=J_b.meshRender.material).maskTilingOffset).elements=J_c,J_d.maskTilingOffset=J_e},J_d._propertyIDCounter=0,J_d._propertyIndexDic={},J_d._propertySetFuncs=[],J_d._propertyGetFuncs=[],J_d}(),J_R=function(){function J_a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return J_n(J_a,"laya.d3.animation.Keyframe"),J_a}(),J_S=function(){function J_a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return J_n(J_a,"laya.d3.animation.KeyframeNode"),J_a}(),J_I=(function(){function J_a(){this._tempVector30=new J_gb,this._tempVector31=new J_gb,this._tempVector32=new J_gb,this._a=new J_gb,this._b=new J_gb,this._c=new J_gb,this._d=new J_gb}J_n(J_a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var J_b=J_a.prototype;J_b.Init=function(J_a,J_b,J_c,J_d){J_a.cloneTo(this._d),J_b.cloneTo(this._c),J_gb.scale(J_a,2,this._a),J_gb.scale(J_c,2,this._tempVector30),J_gb.subtract(this._a,this._tempVector30,this._a),J_gb.add(this._a,J_b,this._a),J_gb.add(this._a,J_d,this._a),J_gb.scale(J_c,3,this._b),J_gb.scale(J_a,3,this._tempVector30),J_gb.subtract(this._b,this._tempVector30,this._b),J_gb.subtract(this._b,J_d,this._b),J_gb.scale(J_b,2,this._tempVector30),J_gb.subtract(this._b,this._tempVector30,this._b)},J_b.Slerp=function(J_a,J_b){J_gb.scale(this._a,J_a*J_a*J_a,this._tempVector30),J_gb.scale(this._b,J_a*J_a,this._tempVector31),J_gb.scale(this._c,J_a,this._tempVector32),J_gb.add(this._tempVector30,this._tempVector31,J_b),J_gb.add(J_b,this._tempVector32,J_b),J_gb.add(J_b,this._d,J_b)}}(),function(){function J_M(J_a,J_b,J_c,J_d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=J_a,this._h=J_b,this._minHeight=J_c,this._maxHeight=J_d}J_n(J_M,"laya.d3.core.HeightMap");var J_a=J_M.prototype;J_a._inBounds=function(J_a,J_b){return 0<=J_a&&J_a<this._h&&0<=J_b&&J_b<this._w},J_a.getHeight=function(J_a,J_b){return this._inBounds(J_a,J_b)?this._datas[J_a][J_b]:NaN},J_o(0,J_a,"width",function(){return this._w}),J_o(0,J_a,"height",function(){return this._h}),J_o(0,J_a,"maxHeight",function(){return this._maxHeight}),J_o(0,J_a,"minHeight",function(){return this._minHeight}),J_M.creatFromMesh=function(J_a,J_b,J_c,J_d){for(var J_e=[],J_f=[],J_g=J_a.getSubMeshCount(),J_h=0;J_h<J_g;J_h++){for(var J_i=J_a.getSubMesh(J_h),J_j=J_i._getVertexBuffer(),J_k=J_j.getData(),J_l=[],J_m=0;J_m<J_k.length;J_m+=J_j.vertexDeclaration.vertexStride/4){var J_n=new J_gb(J_k[J_m+0],J_k[J_m+1],J_k[J_m+2]);J_l.push(J_n)}J_e.push(J_l);var J_o=J_i._getIndexBuffer();J_f.push(J_o.getData())}var J_p=J_a.boundingBox,J_q=J_p.min.x,J_r=J_p.min.z,J_u=J_p.max.x,J_v=J_p.max.z,J_w=J_p.min.y,J_x=J_p.max.y,J_y=J_u-J_q,J_z=J_v-J_r,J_A=J_d.elements[0]=J_y/(J_b-1),J_B=J_d.elements[1]=J_z/(J_c-1),J_C=new J_M(J_b,J_c,J_w,J_x),J_D=J_M._tempRay,J_E=J_D.direction.elements;J_E[0]=0,J_E[1]=-1,J_E[2]=0;var J_F=J_x+.1;J_D.origin.elements[1]=J_F;for(var J_G=0;J_G<J_c;J_G++){var J_H=J_r+J_G*J_B;J_C._datas[J_G]=[];for(var J_I=0;J_I<J_b;J_I++){var J_J=J_q+J_I*J_A,J_K=J_D.origin.elements;J_K[0]=J_J,J_K[2]=J_H;var J_L=J_M._getPosition(J_D,J_e,J_f);J_C._datas[J_G][J_I]=J_L===Number.MAX_VALUE?NaN:J_F-J_L}}return J_C},J_M.createFromImage=function(J_a,J_b,J_c){for(var J_d=J_a.width,J_e=J_a.height,J_f=new J_M(J_d,J_e,J_b,J_c),J_g=(J_c-J_b)/254,J_h=J_a.getPixels(),J_i=0,J_j=0;J_j<J_e;J_j++)for(var J_k=J_f._datas[J_j]=[],J_l=0;J_l<J_d;J_l++){var J_m=J_h[J_i++],J_n=J_h[J_i++],J_o=J_h[J_i++],J_p=J_h[J_i++];J_k[J_l]=255==J_m&&255==J_n&&255==J_o&&255==J_p?NaN:(J_m+J_n+J_o)/3*J_g+J_b}return J_f},J_M._getPosition=function(J_a,J_b,J_c){for(var J_d=Number.MAX_VALUE,J_e=0;J_e<J_b.length;J_e++)for(var J_f=J_b[J_e],J_g=J_c[J_e],J_h=0;J_h<J_g.length;J_h+=3){var J_i=J_f[J_g[J_h+0]],J_j=J_f[J_g[J_h+1]],J_k=J_f[J_g[J_h+2]],J_l=J_ob.rayIntersectsTriangle(J_a,J_i,J_j,J_k);!isNaN(J_l)&&J_l<J_d&&(J_d=J_l)}return J_d},J_l(J_M,["_tempRay",function(){return this._tempRay=new J_eb(new J_gb,new J_gb)}])}(),function(){function J_e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}J_n(J_e,"laya.d3.core.Layer");var J_a=J_e.prototype;return J_a._binarySearchIndex=function(){for(var J_a=0,J_b=J_e._collsionTestList.length-1,J_c=0;J_a<=J_b;){J_c=Math.floor((J_a+J_b)/2);var J_d=J_e._collsionTestList[J_c];if(J_d==this._number)return J_c;J_d>this._number?J_b=J_c-1:J_a=J_c+1}return J_a},J_a._addCollider=function(J_a){0===this._colliders.length&&J_e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),J_a._isRigidbody?(this._colliders.unshift(J_a),this._nonRigidbodyOffset++):this._colliders.push(J_a)},J_a._removeCollider=function(J_a){var J_b=this._colliders.indexOf(J_a);J_b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(J_b,1),0===this._colliders.length&&J_e._collsionTestList.splice(J_e._collsionTestList.indexOf(this._number),1)},J_o(0,J_a,"number",function(){return this._number}),J_o(0,J_a,"visible",function(){return this._visible},function(J_a){this._visible=J_a,J_e._visibleLayers=J_a?J_e._visibleLayers|this.mask:J_e._visibleLayers&~this.mask}),J_o(0,J_a,"mask",function(){return this._mask}),J_o(1,J_e,"visibleLayers",function(){return J_e._visibleLayers},function(J_a){J_e._visibleLayers=J_a;for(var J_b=0,J_c=J_e._layerList.length;J_b<J_c;J_b++){var J_d=J_e._layerList[J_b];J_d._visible=0!=(J_d._mask&J_e._visibleLayers)}}),J_e.__init__=function(){J_e._layerList.length=31;for(var J_a=0;J_a<31;J_a++){var J_b=new J_e;J_e._layerList[J_a]=J_b,0===J_a?(J_b.name="Default Layer",J_b.visible=!0):(J_b.name="Layer-"+J_a,J_b.visible=!1),J_b._number=J_a,J_b._mask=Math.pow(2,J_a)}J_e.currentCreationLayer=J_e._layerList[0]},J_e.getLayerByNumber=function(J_a){if(J_a<0||30<J_a)throw new Error("无法返回指定Layer，该number超出范围！");return J_e._layerList[J_a]},J_e.getLayerByName=function(J_a){for(var J_b=0;J_b<31;J_b++)if(J_e._layerList[J_b].name===J_a)return J_e._layerList[J_b];throw new Error("无法返回指定Layer,该name不存在")},J_e.isVisible=function(J_a){return 0!=(J_a&J_e._currentCameraCullingMask&J_e._visibleLayers)},J_e._layerList=[],J_e._visibleLayers=2147483647,J_e._collsionTestList=[],J_e._currentCameraCullingMask=2147483647,J_e.maxCount=31,J_e.currentCreationLayer=null,J_e}()),J_J=(function(){function J_a(J_a,J_b,J_c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=J_a,this._minCount=J_b,this._maxCount=J_c}J_n(J_a,"laya.d3.core.particleShuriKen.module.Burst");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.cloneTo=function(J_a){var J_b=J_a;J_b._time=this._time,J_b._minCount=this._minCount,J_b._maxCount=this._maxCount},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"time",function(){return this._time}),J_o(0,J_b,"minCount",function(){return this._minCount}),J_o(0,J_b,"maxCount",function(){return this._maxCount})}(),function(){function J_a(J_a){this._color=null,this.enbale=!1,this._color=J_a}J_n(J_a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var J_b=J_a.prototype;J_b.cloneTo=function(J_a){var J_b=J_a;this._color.cloneTo(J_b._color),J_b.enbale=this.enbale},J_b.clone=function(){var J_a;switch(this._color.type){case 0:J_a=J_L.createByConstant(this._color.constant.clone());break;case 1:J_a=J_L.createByGradient(this._color.gradient.clone());break;case 2:J_a=J_L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:J_a=J_L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var J_b=new this.constructor(J_a);return J_b.enbale=this.enbale,J_b},J_o(0,J_b,"color",function(){return this._color})}(),function(){function J_a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}J_n(J_a,"laya.d3.core.particleShuriKen.module.Emission");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),J_b._destroy=function(){this._bursts=null,this._destroyed=!0},J_b.getBurstsCount=function(){return this._bursts.length},J_b.getBurstByIndex=function(J_a){return this._bursts[J_a]},J_b.addBurst=function(J_a){var J_b=this._bursts.length;if(0<J_b)for(var J_c=0;J_c<J_b;J_c++)this._bursts[J_c].time>J_a.time&&this._bursts.splice(J_c,0,J_a);this._bursts.push(J_a)},J_b.removeBurst=function(J_a){var J_b=this._bursts.indexOf(J_a);-1!==J_b&&this._bursts.splice(J_b,1)},J_b.removeBurstByIndex=function(J_a){this._bursts.splice(J_a,1)},J_b.clearBurst=function(){this._bursts.length=0},J_b.cloneTo=function(J_a){var J_b=J_a,J_c=J_b._bursts;J_c.length=this._bursts.length;for(var J_d=0,J_e=this._bursts.length;J_d<J_e;J_d++){var J_f=J_c[J_d];J_f?this._bursts[J_d].cloneTo(J_f):J_c[J_d]=this._bursts[J_d].clone()}J_b._emissionRate=this._emissionRate,J_b.enbale=this.enbale},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"destroyed",function(){return this._destroyed}),J_o(0,J_b,"emissionRate",function(){return this._emissionRate},function(J_a){if(J_a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=J_a})}(),function(){function J_d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}J_n(J_d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var J_a=J_d.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,J_b._constant=this._constant,this._overTime.cloneTo(J_b._overTime),J_b._constantMin=this._constantMin,J_b._constantMax=this._constantMax,this._overTimeMin.cloneTo(J_b._overTimeMin),this._overTimeMax.cloneTo(J_b._overTimeMax)},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"frameOverTimeData",function(){return this._overTime}),J_o(0,J_a,"constant",function(){return this._constant}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"frameOverTimeDataMin",function(){return this._overTimeMin}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"frameOverTimeDataMax",function(){return this._overTimeMax}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_d.createByConstant=function(J_a){var J_b=new J_d;return J_b._type=0,J_b._constant=J_a,J_b},J_d.createByOverTime=function(J_a){var J_b=new J_d;return J_b._type=1,J_b._overTime=J_a,J_b},J_d.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_d;return J_c._type=2,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_d.createByRandomTwoOverTime=function(J_a,J_b){var J_c=new J_d;return J_c._type=3,J_c._overTimeMin=J_a,J_c._overTimeMax=J_b,J_c},J_d}()),J_K=function(){function J_j(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}J_n(J_j,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var J_a=J_j.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,J_b._separateAxes=this._separateAxes,J_b._constant=this._constant,this._constantSeparate.cloneTo(J_b._constantSeparate),this._gradient.cloneTo(J_b._gradient),this._gradientX.cloneTo(J_b._gradientX),this._gradientY.cloneTo(J_b._gradientY),this._gradientZ.cloneTo(J_b._gradientZ),J_b._constantMin=this._constantMin,J_b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(J_b._constantMinSeparate),this._constantMaxSeparate.cloneTo(J_b._constantMaxSeparate),this._gradientMin.cloneTo(J_b._gradientMin),this._gradientMax.cloneTo(J_b._gradientMax),this._gradientXMin.cloneTo(J_b._gradientXMin),this._gradientXMax.cloneTo(J_b._gradientXMax),this._gradientYMin.cloneTo(J_b._gradientYMin),this._gradientYMax.cloneTo(J_b._gradientYMax),this._gradientZMin.cloneTo(J_b._gradientZMin),this._gradientZMax.cloneTo(J_b._gradientZMax)},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"gradientZ",function(){return this._gradientZ}),J_o(0,J_a,"constant",function(){return this._constant}),J_o(0,J_a,"gradient",function(){return this._gradient}),J_o(0,J_a,"separateAxes",function(){return this._separateAxes}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"constantSeparate",function(){return this._constantSeparate}),J_o(0,J_a,"gradientX",function(){return this._gradientX}),J_o(0,J_a,"gradientY",function(){return this._gradientY}),J_o(0,J_a,"gradientW",function(){return this._gradientW}),J_o(0,J_a,"gradientMin",function(){return this._gradientMin}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"gradientMax",function(){return this._gradientMax}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_o(0,J_a,"gradientWMin",function(){return this._gradientWMin}),J_o(0,J_a,"constantMinSeparate",function(){return this._constantMinSeparate}),J_o(0,J_a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),J_o(0,J_a,"gradientXMin",function(){return this._gradientXMin}),J_o(0,J_a,"gradientXMax",function(){return this._gradientXMax}),J_o(0,J_a,"gradientWMax",function(){return this._gradientWMax}),J_o(0,J_a,"gradientYMin",function(){return this._gradientYMin}),J_o(0,J_a,"gradientYMax",function(){return this._gradientYMax}),J_o(0,J_a,"gradientZMin",function(){return this._gradientZMin}),J_o(0,J_a,"gradientZMax",function(){return this._gradientZMax}),J_j.createByConstant=function(J_a){var J_b=new J_j;return J_b._type=0,J_b._separateAxes=!1,J_b._constant=J_a,J_b},J_j.createByConstantSeparate=function(J_a){var J_b=new J_j;return J_b._type=0,J_b._separateAxes=!0,J_b._constantSeparate=J_a,J_b},J_j.createByGradient=function(J_a){var J_b=new J_j;return J_b._type=1,J_b._separateAxes=!1,J_b._gradient=J_a,J_b},J_j.createByGradientSeparate=function(J_a,J_b,J_c,J_d){var J_e=new J_j;return J_e._type=1,J_e._separateAxes=!0,J_e._gradientX=J_a,J_e._gradientY=J_b,J_e._gradientZ=J_c,J_e._gradientW=J_d,J_e},J_j.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_j;return J_c._type=2,J_c._separateAxes=!1,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_j.createByRandomTwoConstantSeparate=function(J_a,J_b){var J_c=new J_j;return J_c._type=2,J_c._separateAxes=!0,J_c._constantMinSeparate=J_a,J_c._constantMaxSeparate=J_b,J_c},J_j.createByRandomTwoGradient=function(J_a,J_b){var J_c=new J_j;return J_c._type=3,J_c._separateAxes=!1,J_c._gradientMin=J_a,J_c._gradientMax=J_b,J_c},J_j.createByRandomTwoGradientSeparate=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){var J_i=new J_j;return J_i._type=3,J_i._separateAxes=!0,J_i._gradientXMin=J_a,J_i._gradientXMax=J_b,J_i._gradientYMin=J_c,J_i._gradientYMax=J_d,J_i._gradientZMin=J_e,J_i._gradientZMax=J_f,J_i._gradientWMin=J_g,J_i._gradientWMax=J_h,J_i},J_j}(),J_L=function(){function J_d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}J_n(J_d,"laya.d3.core.particleShuriKen.module.GradientColor");var J_a=J_d.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,this._constant.cloneTo(J_b._constant),this._constantMin.cloneTo(J_b._constantMin),this._constantMax.cloneTo(J_b._constantMax),this._gradient.cloneTo(J_b._gradient),this._gradientMin.cloneTo(J_b._gradientMin),this._gradientMax.cloneTo(J_b._gradientMax)},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"gradient",function(){return this._gradient}),J_o(0,J_a,"constant",function(){return this._constant}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"gradientMin",function(){return this._gradientMin}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"gradientMax",function(){return this._gradientMax}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_d.createByConstant=function(J_a){var J_b=new J_d;return J_b._type=0,J_b._constant=J_a,J_b},J_d.createByGradient=function(J_a){var J_b=new J_d;return J_b._type=1,J_b._gradient=J_a,J_b},J_d.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_d;return J_c._type=2,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_d.createByRandomTwoGradient=function(J_a,J_b){var J_c=new J_d;return J_c._type=3,J_c._gradientMin=J_a,J_c._gradientMax=J_b,J_c},J_d}(),J_M=(function(){function J_a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}J_n(J_a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.addAlpha=function(J_a,J_b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==J_a&&(J_a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=J_a,this._alphaElements[this._alphaCurrentLength++]=J_b):DEBUG},J_b.addRGB=function(J_a,J_b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==J_a&&(J_a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=J_a,this._rgbElements[this._rgbCurrentLength++]=J_b.x,this._rgbElements[this._rgbCurrentLength++]=J_b.y,this._rgbElements[this._rgbCurrentLength++]=J_b.z):DEBUG},J_b.cloneTo=function(J_a){var J_b=J_a,J_c=0,J_d=0;J_b._alphaCurrentLength=this._alphaCurrentLength;var J_e=J_b._alphaElements;for(J_e.length=this._alphaElements.length,J_c=0,J_d=this._alphaElements.length;J_c<J_d;J_c++)J_e[J_c]=this._alphaElements[J_c];J_b._rgbCurrentLength=this._rgbCurrentLength;var J_f=J_b._rgbElements;for(J_f.length=this._rgbElements.length,J_c=0,J_d=this._rgbElements.length;J_c<J_d;J_c++)J_f[J_c]=this._rgbElements[J_c]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),J_o(0,J_b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function J_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}J_n(J_a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.add=function(J_a,J_b){this._currentLength<8?(6===this._currentLength&&1!==J_a&&(J_a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=J_a,this._elements[this._currentLength++]=J_b):console.log("Warning:data count must lessEqual than 4")},J_b.cloneTo=function(J_a){var J_b=J_a;J_b._currentLength=this._currentLength;var J_c=J_b._elements;J_c.length=this._elements.length;for(var J_d=0,J_e=this._elements.length;J_d<J_e;J_d++)J_c[J_d]=this._elements[J_d]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"gradientCount",function(){return this._currentLength/2})}(),function(){function J_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}J_n(J_a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.add=function(J_a,J_b){this._currentLength<8?(6===this._currentLength&&1!==J_a&&(J_a=1,DEBUG),this._elements[this._currentLength++]=J_a,this._elements[this._currentLength++]=J_b):DEBUG},J_b.getKeyByIndex=function(J_a){return this._elements[2*J_a]},J_b.getValueByIndex=function(J_a){return this._elements[2*J_a+1]},J_b.getAverageValue=function(){for(var J_a=0,J_b=this._currentLength-2;J_a<J_b;J_a+=2){this._elements[J_a+1];this._elements[J_a+3],this._elements[J_a+2]-this._elements[J_a]}return 0},J_b.cloneTo=function(J_a){var J_b=J_a;J_b._currentLength=this._currentLength;var J_c=J_b._elements;J_c.length=this._elements.length;for(var J_d=0,J_e=this._elements.length;J_d<J_e;J_d++)J_c[J_d]=this._elements[J_d]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"gradientCount",function(){return this._currentLength/2})}(),function(){function J_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}J_n(J_a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.add=function(J_a,J_b){this._currentLength<8?(6===this._currentLength&&1!==J_a&&(J_a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=J_a,this._elements[this._currentLength++]=J_b.x,this._elements[this._currentLength++]=J_b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},J_b.cloneTo=function(J_a){var J_b=J_a;J_b._currentLength=this._currentLength;var J_c=J_b._elements;J_c.length=this._elements.length;for(var J_d=0,J_e=this._elements.length;J_d<J_e;J_d++)J_c[J_d]=this._elements[J_d]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"gradientCount",function(){return this._currentLength/3})}(),function(){function J_h(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}J_n(J_h,"laya.d3.core.particleShuriKen.module.GradientSize");var J_a=J_h.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.getMaxSizeInGradient=function(){var J_a=0,J_b=0,J_c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(J_a=0,J_b=this._gradientX.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientX.getValueByIndex(J_a));for(J_a=0,J_b=this._gradientY.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientY.getValueByIndex(J_a))}else for(J_a=0,J_b=this._gradient.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradient.getValueByIndex(J_a));break;case 1:J_c=this._separateAxes?(J_c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),J_c=Math.max(J_c,this._constantMinSeparate.y),Math.max(J_c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(J_a=0,J_b=this._gradientXMin.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientXMin.getValueByIndex(J_a));for(J_a=0,J_b=this._gradientXMax.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientXMax.getValueByIndex(J_a));for(J_a=0,J_b=this._gradientYMin.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientYMin.getValueByIndex(J_a));for(J_a=0,J_b=this._gradientZMax.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientZMax.getValueByIndex(J_a))}else{for(J_a=0,J_b=this._gradientMin.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientMin.getValueByIndex(J_a));for(J_a=0,J_b=this._gradientMax.gradientCount;J_a<J_b;J_a++)J_c=Math.max(J_c,this._gradientMax.getValueByIndex(J_a))}}return J_c},J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,J_b._separateAxes=this._separateAxes,this._gradient.cloneTo(J_b._gradient),this._gradientX.cloneTo(J_b._gradientX),this._gradientY.cloneTo(J_b._gradientY),this._gradientZ.cloneTo(J_b._gradientZ),J_b._constantMin=this._constantMin,J_b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(J_b._constantMinSeparate),this._constantMaxSeparate.cloneTo(J_b._constantMaxSeparate),this._gradientMin.cloneTo(J_b._gradientMin),this._gradientMax.cloneTo(J_b._gradientMax),this._gradientXMin.cloneTo(J_b._gradientXMin),this._gradientXMax.cloneTo(J_b._gradientXMax),this._gradientYMin.cloneTo(J_b._gradientYMin),this._gradientYMax.cloneTo(J_b._gradientYMax),this._gradientZMin.cloneTo(J_b._gradientZMin),this._gradientZMax.cloneTo(J_b._gradientZMax)},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"gradientZ",function(){return this._gradientZ}),J_o(0,J_a,"gradient",function(){return this._gradient}),J_o(0,J_a,"separateAxes",function(){return this._separateAxes}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"gradientMin",function(){return this._gradientMin}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"gradientX",function(){return this._gradientX}),J_o(0,J_a,"gradientY",function(){return this._gradientY}),J_o(0,J_a,"gradientMax",function(){return this._gradientMax}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_o(0,J_a,"constantMinSeparate",function(){return this._constantMinSeparate}),J_o(0,J_a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),J_o(0,J_a,"gradientXMin",function(){return this._gradientXMin}),J_o(0,J_a,"gradientXMax",function(){return this._gradientXMax}),J_o(0,J_a,"gradientYMin",function(){return this._gradientYMin}),J_o(0,J_a,"gradientYMax",function(){return this._gradientYMax}),J_o(0,J_a,"gradientZMin",function(){return this._gradientZMin}),J_o(0,J_a,"gradientZMax",function(){return this._gradientZMax}),J_h.createByGradient=function(J_a){var J_b=new J_h;return J_b._type=0,J_b._separateAxes=!1,J_b._gradient=J_a,J_b},J_h.createByGradientSeparate=function(J_a,J_b,J_c){var J_d=new J_h;return J_d._type=0,J_d._separateAxes=!0,J_d._gradientX=J_a,J_d._gradientY=J_b,J_d._gradientZ=J_c,J_d},J_h.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_h;return J_c._type=1,J_c._separateAxes=!1,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_h.createByRandomTwoConstantSeparate=function(J_a,J_b){var J_c=new J_h;return J_c._type=1,J_c._separateAxes=!0,J_c._constantMinSeparate=J_a,J_c._constantMaxSeparate=J_b,J_c},J_h.createByRandomTwoGradient=function(J_a,J_b){var J_c=new J_h;return J_c._type=2,J_c._separateAxes=!1,J_c._gradientMin=J_a,J_c._gradientMax=J_b,J_c},J_h.createByRandomTwoGradientSeparate=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=new J_h;return J_g._type=2,J_g._separateAxes=!0,J_g._gradientXMin=J_a,J_g._gradientXMax=J_b,J_g._gradientYMin=J_c,J_g._gradientYMax=J_d,J_g._gradientZMin=J_e,J_g._gradientZMax=J_f,J_g},J_h}()),J_N=function(){function J_h(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}J_n(J_h,"laya.d3.core.particleShuriKen.module.GradientVelocity");var J_a=J_h.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,this._constant.cloneTo(J_b._constant),this._gradientX.cloneTo(J_b._gradientX),this._gradientY.cloneTo(J_b._gradientY),this._gradientZ.cloneTo(J_b._gradientZ),this._constantMin.cloneTo(J_b._constantMin),this._constantMax.cloneTo(J_b._constantMax),this._gradientXMin.cloneTo(J_b._gradientXMin),this._gradientXMax.cloneTo(J_b._gradientXMax),this._gradientYMin.cloneTo(J_b._gradientYMin),this._gradientYMax.cloneTo(J_b._gradientYMax),this._gradientZMin.cloneTo(J_b._gradientZMin),this._gradientZMax.cloneTo(J_b._gradientZMax)},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"gradientZ",function(){return this._gradientZ}),J_o(0,J_a,"constant",function(){return this._constant}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"gradientXMax",function(){return this._gradientXMax}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"gradientX",function(){return this._gradientX}),J_o(0,J_a,"gradientY",function(){return this._gradientY}),J_o(0,J_a,"gradientXMin",function(){return this._gradientXMin}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_o(0,J_a,"gradientYMin",function(){return this._gradientYMin}),J_o(0,J_a,"gradientYMax",function(){return this._gradientYMax}),J_o(0,J_a,"gradientZMin",function(){return this._gradientZMin}),J_o(0,J_a,"gradientZMax",function(){return this._gradientZMax}),J_h.createByConstant=function(J_a){var J_b=new J_h;return J_b._type=0,J_b._constant=J_a,J_b},J_h.createByGradient=function(J_a,J_b,J_c){var J_d=new J_h;return J_d._type=1,J_d._gradientX=J_a,J_d._gradientY=J_b,J_d._gradientZ=J_c,J_d},J_h.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_h;return J_c._type=2,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_h.createByRandomTwoGradient=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=new J_h;return J_g._type=3,J_g._gradientXMin=J_a,J_g._gradientXMax=J_b,J_g._gradientYMin=J_c,J_g._gradientYMax=J_d,J_g._gradientZMin=J_e,J_g._gradientZMax=J_f,J_g},J_h}(),J_O=(function(){function J_a(J_a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=J_a}J_n(J_a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.cloneTo=function(J_a){var J_b=J_a;this._angularVelocity.cloneTo(J_b._angularVelocity),J_b.enbale=this.enbale},J_b.clone=function(){var J_a;switch(this._angularVelocity.type){case 0:J_a=this._angularVelocity.separateAxes?J_K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):J_K.createByConstant(this._angularVelocity.constant);break;case 1:J_a=this._angularVelocity.separateAxes?J_K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):J_K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:J_a=this._angularVelocity.separateAxes?J_K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):J_K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:J_a=this._angularVelocity.separateAxes?J_K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):J_K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var J_b=new this.constructor(J_a);return J_b.enbale=this.enbale,J_b},J_o(0,J_b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function J_a(){this.enable=!1,this.randomDirection=!1}J_n(J_a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b._getShapeBoundBox=function(J_a){throw new Error("BaseShape: must override it.")},J_b._getSpeedBoundBox=function(J_a){throw new Error("BaseShape: must override it.")},J_b.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){throw new Error("BaseShape: must override it.")},J_b._calculateProceduralBounds=function(J_a,J_b,J_c){this._getShapeBoundBox(J_a);var J_d=J_a.min,J_e=J_a.max;J_gb.multiply(J_d,J_b,J_d),J_gb.multiply(J_e,J_b,J_e);var J_f=new J_Za(new J_gb,new J_gb);this.randomDirection?(J_f.min=new J_gb(-1,-1,-1),J_f.max=new J_gb(1,1,1)):this._getSpeedBoundBox(J_f);var J_g=new J_Za(new J_gb,new J_gb),J_h=J_g.min,J_i=J_g.max;J_gb.scale(J_f.min,J_c.y,J_h),J_gb.scale(J_f.max,J_c.y,J_i),J_gb.add(J_a.min,J_h,J_h),J_gb.add(J_a.max,J_i,J_i),J_gb.min(J_a.min,J_h,J_a.min),J_gb.max(J_a.max,J_h,J_a.max);var J_j=new J_Za(new J_gb,new J_gb),J_k=J_j.min,J_l=J_j.max;J_gb.scale(J_f.min,J_c.x,J_k),J_gb.scale(J_f.max,J_c.x,J_l),J_gb.min(J_j.min,J_l,J_h),J_gb.max(J_j.min,J_l,J_i),J_gb.min(J_a.min,J_h,J_a.min),J_gb.max(J_a.max,J_h,J_a.max)},J_b.cloneTo=function(J_a){J_a.enable=this.enable},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_a}()),J_T=function(){function J_f(){}return J_n(J_f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),J_f._randomPointUnitArcCircle=function(J_a,J_b,J_c){var J_d=J_b.elements,J_e=NaN;J_e=J_c?J_c.getFloat()*J_a:Math.random()*J_a,J_d[0]=Math.cos(J_e),J_d[1]=Math.sin(J_e)},J_f._randomPointInsideUnitArcCircle=function(J_a,J_b,J_c){var J_d=J_b.elements;J_f._randomPointUnitArcCircle(J_a,J_b,J_c);var J_e=NaN;J_e=J_c?Math.pow(J_c.getFloat(),.5):Math.pow(Math.random(),.5),J_d[0]=J_d[0]*J_e,J_d[1]=J_d[1]*J_e},J_f._randomPointUnitCircle=function(J_a,J_b){var J_c=J_a.elements,J_d=NaN;J_d=J_b?J_b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,J_c[0]=Math.cos(J_d),J_c[1]=Math.sin(J_d)},J_f._randomPointInsideUnitCircle=function(J_a,J_b){var J_c=J_a.elements;J_f._randomPointUnitCircle(J_a);var J_d=NaN;J_d=J_b?Math.pow(J_b.getFloat(),.5):Math.pow(Math.random(),.5),J_c[0]=J_c[0]*J_d,J_c[1]=J_c[1]*J_d},J_f._randomPointUnitSphere=function(J_a,J_b){var J_c=J_a.elements,J_d=NaN,J_e=NaN;J_e=J_b?(J_d=J_c[2]=2*J_b.getFloat()-1,J_b.getFloat()*Math.PI*2):(J_d=J_c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var J_f=Math.sqrt(1-J_d*J_d);J_c[0]=J_f*Math.cos(J_e),J_c[1]=J_f*Math.sin(J_e)},J_f._randomPointInsideUnitSphere=function(J_a,J_b){var J_c=J_a.elements;J_f._randomPointUnitSphere(J_a);var J_d=NaN;J_d=J_b?Math.pow(J_b.getFloat(),1/3):Math.pow(Math.random(),1/3),J_c[0]=J_c[0]*J_d,J_c[1]=J_c[1]*J_d,J_c[2]=J_c[2]*J_d},J_f._randomPointInsideHalfUnitBox=function(J_a,J_b){var J_c=J_a.elements;J_b?(J_c[0]=J_b.getFloat()-.5,J_c[1]=J_b.getFloat()-.5,J_c[2]=J_b.getFloat()-.5):(J_c[0]=Math.random()-.5,J_c[1]=Math.random()-.5,J_c[2]=Math.random()-.5)},J_f}(),J_U=(function(){function J_a(J_a){this._size=null,this.enbale=!1,this._size=J_a}J_n(J_a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.cloneTo=function(J_a){var J_b=J_a;this._size.cloneTo(J_b._size),J_b.enbale=this.enbale},J_b.clone=function(){var J_a;switch(this._size.type){case 0:J_a=this._size.separateAxes?J_M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):J_M.createByGradient(this._size.gradient.clone());break;case 1:J_a=this._size.separateAxes?J_M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):J_M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:J_a=this._size.separateAxes?J_M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):J_M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var J_b=new this.constructor(J_a);return J_b.enbale=this.enbale,J_b},J_o(0,J_b,"size",function(){return this._size})}(),function(){function J_d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}J_n(J_d,"laya.d3.core.particleShuriKen.module.StartFrame");var J_a=J_d.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.cloneTo=function(J_a){var J_b=J_a;J_b._type=this._type,J_b._constant=this._constant,J_b._constantMin=this._constantMin,J_b._constantMax=this._constantMax},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_a,"constant",function(){return this._constant}),J_o(0,J_a,"type",function(){return this._type}),J_o(0,J_a,"constantMin",function(){return this._constantMin}),J_o(0,J_a,"constantMax",function(){return this._constantMax}),J_d.createByConstant=function(J_a){var J_b=new J_d;return J_b._type=0,J_b._constant=J_a,J_b},J_d.createByRandomTwoConstant=function(J_a,J_b){var J_c=new J_d;return J_c._type=1,J_c._constantMin=J_a,J_c._constantMax=J_b,J_c},J_d}()),J_V=(function(){function J_a(J_a,J_b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new J_fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=J_a,this._startFrame=J_b}J_n(J_a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.cloneTo=function(J_a){var J_b=J_a;this.tiles.cloneTo(J_b.tiles),J_b.type=this.type,J_b.randomRow=this.randomRow,this._frame.cloneTo(J_b._frame),this._startFrame.cloneTo(J_b._startFrame),J_b.cycles=this.cycles,J_b.enableUVChannels=this.enableUVChannels,J_b.enable=this.enable},J_b.clone=function(){var J_a,J_b;switch(this._frame.type){case 0:J_a=J_J.createByConstant(this._frame.constant);break;case 1:J_a=J_J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:J_a=J_J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:J_a=J_J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:J_b=J_U.createByConstant(this._startFrame.constant);break;case 1:J_b=J_U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var J_c=new this.constructor(J_a,J_b);return this.tiles.cloneTo(J_c.tiles),J_c.type=this.type,J_c.randomRow=this.randomRow,J_c.cycles=this.cycles,J_c.enableUVChannels=this.enableUVChannels,J_c.enable=this.enable,J_c},J_o(0,J_b,"frame",function(){return this._frame}),J_o(0,J_b,"startFrame",function(){return this._startFrame})}(),function(){function J_a(J_a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=J_a}J_n(J_a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.cloneTo=function(J_a){var J_b=J_a;this._velocity.cloneTo(J_b._velocity),J_b.enbale=this.enbale,J_b.space=this.space},J_b.clone=function(){var J_a;switch(this._velocity.type){case 0:J_a=J_N.createByConstant(this._velocity.constant.clone());break;case 1:J_a=J_N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:J_a=J_N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:J_a=J_N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var J_b=new this.constructor(J_a);return J_b.enbale=this.enbale,J_b.space=this.space,J_b},J_o(0,J_b,"velocity",function(){return this._velocity})}(),function(){function J_a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new J_mb,this._vb=J_Ob.create(J_a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=J_Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=J_Lb.nameKey.getID("LINE"),this._shaderCompile=J_Ab._preCompileShader[this._sharderNameID]}J_n(J_a,"laya.d3.core.PhasorSpriter3D");var J_b=J_a.prototype;return J_b.line=function(J_a,J_b,J_c,J_d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J_a.x,J_a.y,J_a.z,J_b.x,J_b.y,J_b.z,J_b.w),this.addVertex(J_c.x,J_c.y,J_c.z,J_d.x,J_d.y,J_d.z,J_d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},J_b.circle=function(J_a,J_b,J_c,J_d,J_e,J_f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*J_b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/J_b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*J_a,Math.cos(this._tempNumver0)*J_a,0,J_c,J_d,J_e,J_f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},J_b.plane=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=J_d/2,this._tempNumver1=J_e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J_a-this._tempNumver0,J_b+this._tempNumver1,J_c,J_f,J_g,J_h,J_i),this.addVertex(J_a+this._tempNumver0,J_b+this._tempNumver1,J_c,J_f,J_g,J_h,J_i),this.addVertex(J_a-this._tempNumver0,J_b-this._tempNumver1,J_c,J_f,J_g,J_h,J_i),this.addVertex(J_a+this._tempNumver0,J_b-this._tempNumver1,J_c,J_f,J_g,J_h,J_i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},J_b.box=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=J_d/2,this._tempNumver1=J_e/2,this._tempNumver2=J_f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J_a-this._tempNumver0,J_b+this._tempNumver1,J_c+this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a+this._tempNumver0,J_b+this._tempNumver1,J_c+this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a-this._tempNumver0,J_b-this._tempNumver1,J_c+this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a+this._tempNumver0,J_b-this._tempNumver1,J_c+this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a+this._tempNumver0,J_b+this._tempNumver1,J_c-this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a-this._tempNumver0,J_b+this._tempNumver1,J_c-this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a+this._tempNumver0,J_b-this._tempNumver1,J_c-this._tempNumver2,J_g,J_h,J_i,J_j),this.addVertex(J_a-this._tempNumver0,J_b-this._tempNumver1,J_c-this._tempNumver2,J_g,J_h,J_i,J_j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},J_b.cone=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*J_c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*J_c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/J_c,this.addVertexIndex(0,J_b,0,J_d,J_e,J_f,J_g,this._tempUint0),this.addVertexIndex(0,0,0,J_d,J_e,J_f,J_g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<J_c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(J_a*this._tempNumver2,0,J_a*this._tempNumver3,J_d,J_e,J_f,J_g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==J_c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(J_a*this._tempNumver2,0,J_a*this._tempNumver3,J_d,J_e,J_f,J_g,this._tempUint0+(this._tempInt0+J_c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==J_c-1?this.addIndexes(this._tempUint1+J_c+2):this.addIndexes(this._tempUint1+this._tempInt0+J_c+1),this.addIndexes(this._tempUint1+this._tempInt0+J_c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},J_b.boundingBoxLine=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J_a,J_e,J_f,J_g,J_h,J_i,J_j),this.addVertex(J_d,J_e,J_f,J_g,J_h,J_i,J_j),this.addVertex(J_a,J_b,J_f,J_g,J_h,J_i,J_j),this.addVertex(J_d,J_b,J_f,J_g,J_h,J_i,J_j),this.addVertex(J_d,J_e,J_c,J_g,J_h,J_i,J_j),this.addVertex(J_a,J_e,J_c,J_g,J_h,J_i,J_j),this.addVertex(J_d,J_b,J_c,J_g,J_h,J_i,J_j),this.addVertex(J_a,J_b,J_c,J_g,J_h,J_i,J_j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},J_b.addVertex=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=J_a,this._vbData[this._posInVBData+1]=J_b,this._vbData[this._posInVBData+2]=J_c,this._vbData[this._posInVBData+3]=J_d,this._vbData[this._posInVBData+4]=J_e,this._vbData[this._posInVBData+5]=J_f,this._vbData[this._posInVBData+6]=J_g,this._posInVBData+=this._floatSizePerVer,this},J_b.addVertexIndex=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){return this._hasBegun||this.addVertexIndexException(),this._vbData[J_h]=J_a,this._vbData[J_h+1]=J_b,this._vbData[J_h+2]=J_c,this._vbData[J_h+3]=J_d,this._vbData[J_h+4]=J_e,this._vbData[J_h+5]=J_f,this._vbData[J_h+6]=J_g,(J_h+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=J_h),this},J_b.addIndexes=function(J_a){var J_b=arguments;this._hasBegun||this.addVertexIndexException();for(var J_c=0;J_c<J_b.length;J_c++)this._ibData[this._posInIBData]=J_b[J_c],this._posInIBData++;return this},J_b.begin=function(J_a,J_b){return this._hasBegun&&this.beginException0(),1!==J_a&&4!==J_a&&this.beginException1(),this._primitiveType=J_a,this._camera=J_b,this._hasBegun=!0,this},J_b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},J_b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(J_a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),J_A.drawCall++,J_F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},J_b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},J_b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},J_b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},J_b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},J_b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},J_b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(28,[new J_ga(0,"vector3",0),new J_ga(12,"vector4",1)])}]),J_a}()),J_W=function(){function J_a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++J_a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new J_mb}J_n(J_a,"laya.d3.core.render.RenderElement");var J_b=J_a.prototype;return J_b.getDynamicBatchBakedVertexs=function(J_a){for(var J_b=this._renderObj._getVertexBuffer(J_a),J_c=J_b.getData().slice(),J_d=J_b.vertexDeclaration,J_e=J_d.getVertexElementByUsage(0).offset/4,J_f=J_d.getVertexElementByUsage(3).offset/4,J_g=this._sprite3D.transform,J_h=J_g.worldMatrix,J_i=J_g.rotation,J_j=J_d.vertexStride/4,J_k=0,J_l=J_c.length;J_k<J_l;J_k+=J_j){var J_m=J_k+J_e,J_n=J_k+J_f;J_qb.transformVector3ArrayToVector3ArrayCoordinate(J_c,J_m,J_h,J_c,J_m),J_qb.transformVector3ArrayByQuat(J_c,J_n,J_i,J_c,J_n)}return J_c},J_b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},J_b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},J_o(0,J_b,"id",function(){return this._id}),J_o(0,J_b,"renderObj",function(){return this._renderObj},function(J_a){this._renderObj!==J_a&&(this._renderObj=J_a)}),J_a._uniqueIDCounter=0,J_a}(),J_X=function(){function J_b(J_a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++J_b._uniqueIDCounter,this._needSort=!1,this._scene=J_a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}J_n(J_b,"laya.d3.core.render.RenderQueue");var J_a=J_b.prototype;return J_a._sortOpaqueFunc=function(J_a,J_b){if(J_a._render&&J_b._render){var J_c=J_a._material.renderQueue-J_b._material.renderQueue;return 0==J_c?J_a._render._distanceForSort-J_b._render._distanceForSort:J_c}return 0},J_a._sortAlphaFunc=function(J_a,J_b){if(J_a._render&&J_b._render){var J_c=J_a._material.renderQueue-J_b._material.renderQueue;return 0==J_c?J_b._render._distanceForSort-J_a._render._distanceForSort:J_c}return 0},J_a._begainRenderElement=function(J_a,J_b,J_c){return!!J_b._beforeRender(J_a)},J_a._sortAlpha=function(J_a){J_b._cameraPosition=J_a,this._finalElements.sort(this._sortAlphaFunc)},J_a._sortOpaque=function(J_a){J_b._cameraPosition=J_a,this._finalElements.sort(this._sortOpaqueFunc)},J_a._preRender=function(J_a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},J_a._render=function(J_a,J_b){for(var J_c,J_d,J_e,J_f,J_g,J_h,J_i=J_A.loopCount,J_j=this._scene,J_k=J_a.camera,J_l=(J_k.id,!1),J_m=0,J_n=this._finalElements.length;J_m<J_n;J_m++){var J_o,J_p,J_q,J_r=this._finalElements[J_m];if(null!=J_r._onPreRenderFunction&&J_r._onPreRenderFunction.call(J_r._sprite3D,J_a),0===J_r._type){if(J_a.owner=J_q=J_r._sprite3D,J_a.renderElement=J_r,J_q._preRenderUpdateComponents(J_a),J_o=J_r.renderObj,J_p=J_r._material,this._begainRenderElement(J_a,J_o,J_p)){if(J_c=J_o._getVertexBuffers(),!(J_e=(J_d=J_o._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[J_d.id]){this._errorRecord[J_d.id]=1;var J_u="vertexBuffer:"+("("+J_d._destroyed+","+J_d._released+","+J_d._referenceCount+","+J_d._buffer+")")+", material:"+(J_p?J_p.__className+"("+J_p._destroyed+","+J_p._released+")":"null")+", owner:"+(J_q?J_q.__className+"("+J_q._destroyed+","+J_q._activeInHierarchy+","+J_q._displayedInStage+")":"null")+", renderObj:"+(J_o?J_o.__className+"("+J_o._destroyed+","+J_o._released+","+J_o._referenceCount+")":"")+", parent:, url:"+(J_q?J_q.url:"")+", disposeStack:"+J_d.disposeStack;J_x.recordError("报错：unknown vertexDeclaration  "+J_u)}continue}if(J_l=(J_f=J_a._shader=J_p._getShader(J_j._shaderDefineValue,J_e.shaderDefineValue,J_q._shaderDefineValue)).bind()||J_i!==J_f._uploadLoopCount,J_c){if(J_f._uploadVertexBuffer!==J_c||J_l){for(var J_v=0;J_v<J_c.length;J_v++){var J_w=J_c[J_v];J_f.uploadAttributesX(J_w.vertexDeclaration.shaderValues.data,J_w)}J_f._uploadVertexBuffer=J_c}}else(J_f._uploadVertexBuffer!==J_d||J_l)&&(J_f.uploadAttributes(J_e.shaderValues.data,null),J_f._uploadVertexBuffer=J_d);(J_f._uploadScene!==J_j||J_l)&&(J_f.uploadSceneUniforms(J_j._shaderValues.data),J_f._uploadScene=J_j),(J_k!==J_f._uploadCamera||J_f._uploadSprite3D!==J_q||J_l)&&(J_f.uploadSpriteUniforms(J_q._shaderValues.data),J_f._uploadSprite3D=J_q),(J_k!==J_f._uploadCamera||J_l)&&(J_f.uploadCameraUniforms(J_k._shaderValues.data),J_f._uploadCamera=J_k),(J_f._uploadMaterial!==J_p||J_l)&&(J_p._upload(),J_f._uploadMaterial=J_p),J_g!==J_p?(J_p._setRenderStateBlendDepth(),J_p._setRenderStateFrontFace(J_b,J_q.transform),J_g=J_p,J_h=J_q):J_h!==J_q&&(J_p._setRenderStateFrontFace(J_b,J_q.transform),J_h=J_q),J_o._render(J_a),J_f._uploadLoopCount=J_i}J_q._postRenderUpdateComponents(J_a)}else if(2===J_r._type){J_r.renderObj;J_a.owner=J_q=J_r._sprite3D,J_a.renderElement=J_r,J_a._batchIndexStart=J_r._tempBatchIndexStart,J_a._batchIndexEnd=J_r._tempBatchIndexEnd,J_o=J_r.renderObj,J_p=J_r._material,this._begainRenderElement(J_a,J_o,J_p)&&(J_e=(J_d=J_o._getVertexBuffer(0)).vertexDeclaration,J_l=(J_f=J_a._shader=J_p._getShader(J_j._shaderDefineValue,J_e.shaderDefineValue,J_q._shaderDefineValue)).bind()||J_i!==J_f._uploadLoopCount,(J_f._uploadVertexBuffer!==J_d||J_l)&&(J_f.uploadAttributes(J_e.shaderValues.data,null),J_f._uploadVertexBuffer=J_d),(J_f._uploadScene!==J_j||J_l)&&(J_f.uploadSceneUniforms(J_j._shaderValues.data),J_f._uploadScene=J_j),(J_k!==J_f._uploadCamera||J_f._uploadSprite3D!==J_q||J_l)&&(J_f.uploadSpriteUniforms(J_q._shaderValues.data),J_f._uploadSprite3D=J_q),(J_k!==J_f._uploadCamera||J_l)&&(J_f.uploadCameraUniforms(J_k._shaderValues.data),J_f._uploadCamera=J_k),(J_f._uploadMaterial!==J_p||J_l)&&(J_p._upload(),J_f._uploadMaterial=J_p),J_g!==J_p?(J_p._setRenderStateBlendDepth(),J_p._setRenderStateFrontFace(J_b,J_q.transform),J_g=J_p,J_h=J_q):J_h!==J_q&&(J_p._setRenderStateFrontFace(J_b,J_q.transform),J_h=J_q),J_o._render(J_a),J_f._uploadLoopCount=J_i)}}},J_a._renderShadow=function(J_a,J_b){for(var J_c,J_d,J_e,J_f,J_g,J_h=J_A.loopCount,J_i=this._scene,J_j=J_a.camera,J_k=!1,J_l=0,J_m=this._finalElements.length;J_l<J_m;J_l++){var J_n,J_o,J_p,J_q=this._finalElements[J_l];0===J_q._type&&(J_a.owner=J_p=J_q._sprite3D,J_b||J_p._projectionViewWorldUpdateCamera===J_j&&J_p._projectionViewWorldUpdateLoopCount===J_A.loopCount||(J_p._render._renderUpdate(J_a._projectionViewMatrix),J_p._projectionViewWorldUpdateLoopCount=J_A.loopCount,J_p._projectionViewWorldUpdateCamera=J_j),J_a.renderElement=J_q,J_p._preRenderUpdateComponents(J_a),J_n=J_q.renderObj,J_o=J_q._material,this._begainRenderElement(J_a,J_n,null)&&(J_d=(J_c=J_n._getVertexBuffer(0)).vertexDeclaration,J_k=(J_e=J_a._shader=J_o._getShader(J_i._shaderDefineValue,J_d.shaderDefineValue,J_p._shaderDefineValue)).bind()||J_h!==J_e._uploadLoopCount,(J_e._uploadVertexBuffer!==J_c||J_k)&&(J_e.uploadAttributes(J_d.shaderValues.data,null),J_e._uploadVertexBuffer=J_c),(J_j!==J_e._uploadCamera||J_e._uploadSprite3D!==J_p||J_k)&&(J_e.uploadSpriteUniforms(J_p._shaderValues.data),J_e._uploadSprite3D=J_p),(J_j!==J_e._uploadCamera||J_k)&&(J_e.uploadCameraUniforms(J_j._shaderValues.data),J_e._uploadCamera=J_j),(J_e._uploadMaterial!==J_o||J_k)&&(J_o._upload(),J_e._uploadMaterial=J_o),J_e._uploadRenderElement,J_f!==J_o?(J_o._setRenderStateFrontFace(!1,J_p.transform),J_f=J_o,J_g=J_p):J_g!==J_p&&(J_o._setRenderStateFrontFace(!1,J_p.transform),J_g=J_p),J_n._render(J_a),J_e._uploadLoopCount=J_h),J_p._postRenderUpdateComponents(J_a))}},J_a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},J_a._addRenderElement=function(J_a){this._renderElements.push(J_a),this._needSort=!0},J_a._addDynamicBatchElement=function(J_a){this._dynamicBatchCombineRenderElements.push(J_a)},J_o(0,J_a,"id",function(){return this._id}),J_b._uniqueIDCounter=0,J_b._cameraPosition=null,J_b}(),J_Y=function(){function J_a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return J_n(J_a,"laya.d3.core.render.RenderState"),J_a.clientWidth=0,J_a.clientHeight=0,J_a}(),J_Z=function(){function J_g(J_a,J_b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new J__a(new J_gb,0),this._corners=[new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb],this._boundingBoxCenter=new J_gb,this._children=J_d(8),this._objects=[],this._tempBoundBoxCorners=[new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb],this._scene=J_a,this._currentDepth=J_b}J_n(J_g,"laya.d3.core.scene.OctreeNode");var J_a=J_g.prototype;return J_x.imps(J_a,{"laya.d3.core.scene.ITreeNode":!0}),J_a.init=function(J_a,J_b){var J_c=new J_gb,J_d=new J_gb;J_gb.scale(J_b,-.5,J_c),J_gb.scale(J_b,.5,J_d),J_gb.add(J_c,J_a,J_c),J_gb.add(J_d,J_a,J_d),this.exactBox=new J_Za(J_c,J_d),this.relaxBox=new J_Za(J_c,J_d)},J_a.addTreeNode=function(J_a){1===Collision.boxContainsBox(this._relaxBox,J_a.boundingBox)?this.addNodeDown(J_a,0):this.addObject(J_a)},J_a.addChild=function(J_a){var J_b=this._children[J_a];if(null==J_b){J_b=new J_g(this._scene,this._currentDepth+1),(this._children[J_a]=J_b)._parent=this,J_gb.subtract(this._exactBox.max,this._exactBox.min,J_g.tempSize),J_gb.multiply(J_g.tempSize,J_g._octreeSplit[J_a],J_g.tempCenter),J_gb.add(this._exactBox.min,J_g.tempCenter,J_g.tempCenter),J_gb.scale(J_g.tempSize,.25,J_g.tempSize);var J_c=new J_gb,J_d=new J_gb;J_gb.subtract(J_g.tempCenter,J_g.tempSize,J_c),J_gb.add(J_g.tempCenter,J_g.tempSize,J_d),J_b.exactBox=new J_Za(J_c,J_d),J_gb.scale(J_g.tempSize,J_g.relax,J_g.tempSize);var J_e=new J_gb,J_f=new J_gb;J_gb.subtract(J_g.tempCenter,J_g.tempSize,J_e),J_gb.add(J_g.tempCenter,J_g.tempSize,J_f),J_b.relaxBox=new J_Za(J_e,J_f)}return J_b},J_a.addObject=function(J_a){(J_a._treeNode=this)._objects.push(J_a)},J_a.removeObject=function(J_a){if(J_a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var J_b=this._objects.indexOf(J_a);return-1!==J_b&&(this._objects.splice(J_b,1),!0)},J_a.clearObject=function(){this._objects.length=0},J_a.addNodeUp=function(J_a,J_b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,J_a.boundingBox)?this._parent.addNodeUp(J_a,J_b-1):this.addNodeDown(J_a,J_b)},J_a.addNodeDown=function(J_a,J_b){if(J_b<this._scene.treeLevel){var J_c=this.inChildIndex(J_a.boundingBoxCenter),J_d=this.addChild(J_c);1===Collision.boxContainsBox(J_d._relaxBox,J_a.boundingBox)?J_d.addNodeDown(J_a,++J_b):this.addObject(J_a)}else this.addObject(J_a)},J_a.inChildIndex=function(J_a){return 4*(J_a.z<this._boundingBoxCenter.z?0:1)+2*(J_a.y<this._boundingBoxCenter.y?0:1)+(J_a.x<this._boundingBoxCenter.x?0:1)},J_a.updateObject=function(J_a){1===Collision.boxContainsBox(this._relaxBox,J_a.boundingBox)?(this.removeObject(J_a),J_a._treeNode=null,this.addNodeDown(J_a,this._currentDepth)):this._parent&&(this.removeObject(J_a),J_a._treeNode=null,this._parent.addNodeUp(J_a,this._currentDepth-1))},J_a.cullingObjects=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g=0,J_h=0,J_i=0,J_j=this._scene._dynamicBatchManager;for(J_g=0,J_f=this._objects.length;J_g<J_f;J_g++){var J_k=this._objects[J_g];if(J_I.isVisible(J_k._owner.layer.mask)&&J_k.enable){if(J_b&&(J_A.treeSpriteCollision+=1,0===J_a.containsBoundSphere(J_k.boundingSphere)))continue;J_k._renderUpdate(J_e),J_k._distanceForSort=J_gb.distance(J_k.boundingSphere.center,J_d)+J_k.sortingFudge;var J_l=J_k._renderElements;for(J_h=0,J_i=J_l.length;J_h<J_i;J_h++){var J_m=J_l[J_h],J_n=J_m._staticBatch;if(J_n&&J_n._material===J_m._material)J_n._addBatchRenderElement(J_m);else{var J_o=J_m.renderObj;J_o.triangleCount<10&&1===J_o._vertexBufferCount&&J_o._getIndexBuffer()&&J_m._material.renderQueue<2&&J_m._canDynamicBatch&&!J_k._owner.isStatic?J_j._addPrepareRenderElement(J_m):this._scene.getRenderQueue(J_m._material.renderQueue)._addRenderElement(J_m)}}}}for(J_g=0;J_g<8;J_g++){var J_p=this._children[J_g];if(null!=J_p){var J_q=J_b;if(J_b){var J_r=J_a.containsBoundBox(J_p._relaxBox);if(J_A.treeNodeCollision+=1,0===J_r)continue;J_q=2===J_r}J_p.cullingObjects(J_a,J_q,J_c,J_d,J_e)}}},J_a.cullingShadowObjects=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g=0,J_h=0,J_i=0;this._scene._dynamicBatchManager;for(J_g=0,J_f=this._objects.length;J_g<J_f;J_g++){var J_j=this._objects[J_g];if(J_j.castShadow&&J_I.isVisible(J_j._owner.layer.mask)&&J_j.enable){if(J_c&&0===J_a[0].containsBoundSphere(J_j.boundingSphere))continue;for(var J_k=1,J_l=J_a.length;J_k<J_l;J_k++){var J_m=J_b[J_k-1];if(0!==J_a[J_k].containsBoundSphere(J_j.boundingSphere)){var J_n=J_j._renderElements;for(J_h=0,J_i=J_n.length;J_h<J_i;J_h++)J_m._addRenderElement(J_n[J_h])}}}}for(J_g=0;J_g<8;J_g++){var J_o=this._children[J_g];if(null!=J_o){var J_p=J_c;if(J_c){var J_q=J_a[0].containsBoundBox(J_o._relaxBox);if(0===J_q)continue;J_p=2===J_q}J_o.cullingShadowObjects(J_a,J_b,J_p,J_d,J_e)}}},J_a.cullingShadowObjectsOnePSSM=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h=J_b[0],J_i=0,J_j=0,J_k=0;for(J_i=0,J_g=this._objects.length;J_i<J_g;J_i++){var J_l=this._objects[J_i];if(J_l.castShadow&&J_I.isVisible(J_l._owner.layer.mask)&&J_l.enable){if(J_d&&0===J_a.containsBoundSphere(J_l.boundingSphere))continue;J_l._renderUpdate(J_c);var J_m=J_l._renderElements;for(J_j=0,J_k=J_m.length;J_j<J_k;J_j++)J_h._addRenderElement(J_m[J_j])}}for(J_i=0;J_i<8;J_i++){var J_n=this._children[J_i];if(null!=J_n){var J_o=J_d;if(J_d){var J_p=J_a.containsBoundBox(J_n._relaxBox);if(0===J_p)continue;J_o=2===J_p}J_n.cullingShadowObjectsOnePSSM(J_a,J_b,J_c,J_o,J_e,J_f)}}},J_a.renderBoudingBox=function(J_a){this._renderBoudingBox(J_a);for(var J_b=0;J_b<8;++J_b){var J_c=this._children[J_b];J_c&&J_c.renderBoudingBox(J_a)}},J_a.buildAllChild=function(J_a){if(J_a<this._scene.treeLevel)for(var J_b=0;J_b<8;J_b++){this.addChild(J_b).buildAllChild(J_a+1)}},J_a._renderBoudingBox=function(J_a){},J_o(0,J_a,"exactBox",function(){return this._exactBox},function(J_a){this._exactBox=J_a,J_gb.add(J_a.min,J_a.max,this._boundingBoxCenter),J_gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),J_o(0,J_a,"relaxBox",function(){return this._relaxBox},function(J_a){(this._relaxBox=J_a).getCorners(this._corners),J__a.createfromPoints(this._corners,this._boundingSphere)}),J_g.debugMode=!1,J_g.relax=1.15,J_g.CHILDNUM=8,J_l(J_g,["tempVector0",function(){return this.tempVector0=new J_gb},"tempSize",function(){return this.tempSize=new J_gb},"tempCenter",function(){return this.tempCenter=new J_gb},"_octreeSplit",function(){return this._octreeSplit=[new J_gb(.25,.25,.25),new J_gb(.75,.25,.25),new J_gb(.25,.75,.25),new J_gb(.75,.75,.25),new J_gb(.25,.25,.75),new J_gb(.75,.25,.75),new J_gb(.25,.75,.75),new J_gb(.75,.75,.75)]}]),J_g}(),J_$=(function(){function J_a(){}J_n(J_a,"laya.d3.core.scene.SceneManager")}(),function(){function J_a(J_a,J_b,J_c,J_d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===J_a&&(J_a=1),void 0===J_b&&(J_b=1),void 0===J_c&&(J_c=1),void 0===J_d&&(J_d=1),this._r=J_a,this._g=J_b,this._b=J_c,this._a=J_d}return J_n(J_a,"laya.d3.core.trail.module.Color",null,"Color$1"),J_a.prototype.cloneTo=function(J_a){J_a._r=this._r,J_a._g=this._g,J_a._b=this._b,J_a._a=this._a},J_l(J_a,["RED",function(){return this.RED=new J_a(1,0,0,1)},"GREEN",function(){return this.GREEN=new J_a(0,1,0,1)},"BLUE",function(){return this.BLUE=new J_a(0,0,1,1)},"CYAN",function(){return this.CYAN=new J_a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new J_a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new J_a(1,0,1,1)},"GRAY",function(){return this.GRAY=new J_a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new J_a(1,1,1,1)},"BLACK",function(){return this.BLACK=new J_a(0,0,0,1)}]),J_a}()),J__=(function(){function J_a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}J_n(J_a,"laya.d3.core.trail.module.Gradient");var J_b=J_a.prototype;J_b.setKeys=function(J_a,J_b){var J_c,J_d;this._colorKeys=J_a;for(var J_e=this.index=0;J_e<J_a.length;J_e++){var J_f=(J_c=J_a[J_e]).color;this._colorKeyData[this.index++]=J_f._r,this._colorKeyData[this.index++]=J_f._g,this._colorKeyData[this.index++]=J_f._b,this._colorKeyData[this.index++]=J_c.time}this._alphaKeys=J_b;for(var J_g=this.index=0;J_g<J_b.length;J_g++)J_d=J_b[J_g],this._alphaKeyData[this.index++]=J_d.alpha,this._alphaKeyData[this.index++]=J_d.time},J_b.cloneTo=function(J_a){var J_b=0,J_c=0,J_d=this.colorKeys,J_e=[];for(J_b=0,J_c=J_d.length;J_b<J_c;J_b++){var J_f=new J_s;J_d[J_b].cloneTo(J_f),J_e.push(J_f)}var J_g=this.alphaKeys,J_h=[];for(J_b=0,J_c=J_g.length;J_b<J_c;J_b++){var J_i=new J__;J_g[J_b].cloneTo(J_i),J_h.push(J_i)}J_a.setKeys(J_e,J_h)},J_o(0,J_b,"mode",function(){return this._mode},function(J_a){this._mode=J_a}),J_o(0,J_b,"colorKeys",function(){return this._colorKeys},function(J_a){this._colorKeys=J_a;for(var J_b=this.index=0;J_b<J_a.length;J_b++){var J_c=J_a[J_b],J_d=J_c.color;this._colorKeyData[this.index++]=J_d._r,this._colorKeyData[this.index++]=J_d._g,this._colorKeyData[this.index++]=J_d._b,this._colorKeyData[this.index++]=J_c.time}}),J_o(0,J_b,"alphaKeys",function(){return this._alphaKeys},function(J_a){this._alphaKeys=J_a;for(var J_b=this.index=0;J_b<J_a.length;J_b++){var J_c=J_a[J_b];this._alphaKeyData[this.index++]=J_c.alpha,this._alphaKeyData[this.index++]=J_c.time}})}(),function(){function J_a(J_a,J_b){this._alpha=NaN,this._time=NaN,void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),this._alpha=J_a,this._time=J_b}J_n(J_a,"laya.d3.core.trail.module.GradientAlphaKey");var J_b=J_a.prototype;return J_b.cloneTo=function(J_a){J_a.alpha=this.alpha,J_a.time=this.time},J_o(0,J_b,"alpha",function(){return this._alpha},function(J_a){this._alpha=J_a}),J_o(0,J_b,"time",function(){return this._time},function(J_a){this._time=J_a}),J_a}()),J_s=function(){function J_a(J_a,J_b){this._color=null,this._time=NaN,void 0===J_b&&(J_b=0),this._color=J_a||new J_$,this._time=J_b}J_n(J_a,"laya.d3.core.trail.module.GradientColorKey");var J_b=J_a.prototype;return J_b.cloneTo=function(J_a){this.color.cloneTo(J_a.color),J_a.time=this.time},J_o(0,J_b,"color",function(){return this._color},function(J_a){this._color=J_a}),J_o(0,J_b,"time",function(){return this._time},function(J_a){this._time=J_a}),J_a}(),J_t=(function(){function J_a(){}J_n(J_a,"laya.d3.core.trail.module.GradientMode"),J_a.Blend=0,J_a.Fixed=1}(),function(){function J_a(){}J_n(J_a,"laya.d3.core.trail.module.TextureMode"),J_a.Stretch=0,J_a.Tile=1}(),function(){function J_a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}J_n(J_a,"laya.d3.core.trail.module.TrailKeyFrame"),J_a.prototype.cloneTo=function(J_a){J_a.time=this.time,J_a.inTangent=this.inTangent,J_a.outTangent=this.outTangent,J_a.value=this.value}}(),function(){function J_b(J_a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new J_gb,this._curPosition=new J_gb,this._delVector3=new J_gb,this._lastFixedVertexPosition=new J_gb,this._pointAtoBVector3=new J_gb,this._pointA=new J_gb,this._pointB=new J_gb,this._owner=J_a,this._id=J_b.renderElementCount++,0==this._id?J_a._owner.transform.position.cloneTo(this._lastPosition):J_a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new J_Ob(J_t.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new J_Ob(J_t.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}J_n(J_b,"laya.d3.core.trail.TrailRenderElement");var J_a=J_b.prototype;J_x.imps(J_a,{"laya.d3.core.render.IRenderable":!0}),J_a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},J_a._addTrailByFirstPosition=function(J_a,J_b){J_gb.subtract(J_b,J_a,this._delVector3),J_gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),J_gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),J_gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(J_a),J_a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},J_a._addTrailByNextPosition=function(J_a){J_gb.subtract(J_a,this._lastFixedVertexPosition,this._delVector3),J_gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),J_gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),J_gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=J_gb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=J_sa.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(J_a),J_a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(J_a),this._virtualVerticesCount=2)},J_a._updateVerticesByPosition=function(J_a){this._pointe=J_a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},J_a._updateVertexBuffer2=function(){var J_a,J_b=0,J_c=0,J_d=0;for(J_d=0,J_a=(this._verticesCount+this._virtualVerticesCount)/2;J_d<J_a;J_d++)J_c=0==this._owner.textureMode?(this._VerticesToTailLength[J_d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[J_d],this._vertices2[J_b++]=1-J_c,this._vertices2[J_b++]=1-J_c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},J_a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},J_a._updateDisappear=function(){var J_a,J_b=0;for(J_b=this._curDisappearIndex,J_a=(this._verticesCount+this._virtualVerticesCount)/2;J_b<J_a;J_b++)this._owner._curtime-this._everyGroupVertexBirthTime[J_b]>=this._owner.time+J_sa.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},J_a._beforeRender=function(J_a){return this._camera=J_a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),J_gb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},J_a._render=function(J_a){this._isDead||(J_F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),J_A.drawCall++,J_A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},J_a._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),0===J_a?this._vertexBuffer1:1===J_a?this._vertexBuffer2:null},J_a._getVertexBuffers=function(){return this._vertexBuffers},J_a._getIndexBuffer=function(){return null},J_a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},J_a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},J_o(0,J_a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),J_o(0,J_a,"triangleCount",function(){return 0}),J_b.renderElementCount=0}(),function(){function J_a(){}J_n(J_a,"laya.d3.core.trail.VertexTrail");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration1}),J_o(1,J_a,"vertexDeclaration1",function(){return J_a._vertexDeclaration1}),J_o(1,J_a,"vertexDeclaration2",function(){return J_a._vertexDeclaration2}),J_l(J_a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new J_fa(32,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",41),new J_ga(24,"single",33),new J_ga(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new J_fa(4,[new J_ga(0,"single",38)])}]),J_a}()),J_aa=function(){function J_w(J_a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=J_a}J_n(J_w,"laya.d3.graphics.DynamicBatch");var J_a=J_w.prototype;return J_x.imps(J_a,{"laya.d3.core.render.IRenderable":!0}),J_a._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),0===J_a?this._vertexBuffer:null},J_a._getIndexBuffer=function(){return this._indexBuffer},J_a._getCombineRenderElementFromPool=function(J_a,J_b,J_c){var J_d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return J_d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=J_d=new J_W,J_d._sprite3D=new J_Xb),J_d._sprite3D._render._renderUpdate(J_c),J_d},J_a._getRenderElement=function(J_a,J_b,J_c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*J_w.maxVertexCount),this._indexDatas=new Uint16Array(J_w.maxIndexCount),this._vertexBuffer=J_Ob.create(this._vertexDeclaration,J_w.maxVertexCount,35048),this._indexBuffer=J_Nb.create("ushort",J_w.maxIndexCount,35048));for(var J_d=this._merageElements.length=0,J_e=0,J_f=0,J_g=this._combineRenderElements.length;J_f<J_g;J_f++){var J_h=this._combineRenderElements[J_f],J_i=J_h.getDynamicBatchBakedVertexs(0),J_j=J_h.getBakedIndices(),J_k=J_h._sprite3D.transform._isFrontFaceInvert,J_l=J_d/(this._vertexDeclaration.vertexStride/4),J_m=J_e,J_n=J_m+J_j.length;J_h._tempBatchIndexStart=J_m,J_h._tempBatchIndexEnd=J_n,this._indexDatas.set(J_j,J_e);var J_o=0;if(J_k)for(J_o=J_m;J_o<J_n;J_o+=3){this._indexDatas[J_o]=J_l+this._indexDatas[J_o];var J_p=this._indexDatas[J_o+1],J_q=this._indexDatas[J_o+2];this._indexDatas[J_o+1]=J_l+J_q,this._indexDatas[J_o+2]=J_l+J_p}else for(J_o=J_m;J_o<J_n;J_o+=3)this._indexDatas[J_o]=J_l+this._indexDatas[J_o],this._indexDatas[J_o+1]=J_l+this._indexDatas[J_o+1],this._indexDatas[J_o+2]=J_l+this._indexDatas[J_o+2];J_e+=J_j.length,this._vertexDatas.set(J_i,J_d),J_d+=J_i.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),J_f=this._combineRenderElementPoolIndex=0,J_g=this._materials.length;J_f<J_g;J_f++){var J_r=this._getCombineRenderElementFromPool(J_a,J_b,J_c);J_r._type=2,J_r._staticBatch=null;var J_u=(J_r.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[J_f]]._tempBatchIndexStart,J_v=J_f+1===this._materialToRenderElementsOffsets.length?J_e:this._combineRenderElements[this._materialToRenderElementsOffsets[J_f+1]]._tempBatchIndexStart;J_r._tempBatchIndexStart=J_u,J_r._tempBatchIndexEnd=J_v,J_r._material=this._materials[J_f],this._merageElements.push(J_r)}},J_a._addCombineRenderObjTest=function(J_a){var J_b=J_a.renderObj,J_c=this._currentCombineIndexCount+J_b._getIndexBuffer().indexCount,J_d=this._currentCombineVertexCount+J_b._getVertexBuffer().vertexCount;return!(J_w.maxVertexCount<J_d||J_w.maxIndexCount<J_c)},J_a._addCombineRenderObj=function(J_a){var J_b=J_a.renderObj;this._combineRenderElements.push(J_a),this._currentCombineIndexCount=this._currentCombineIndexCount+J_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+J_b._getVertexBuffer().vertexCount},J_a._addCombineMaterial=function(J_a){this._materials.push(J_a)},J_a._addMaterialToRenderElementOffset=function(J_a){this._materialToRenderElementsOffsets.push(J_a)},J_a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},J_a._addToRenderQueue=function(J_a,J_b,J_c,J_d){this._getRenderElement(J_b,J_c,J_d);for(var J_e=0,J_f=this._materials.length;J_e<J_f;J_e++)J_a.getRenderQueue(this._materials[J_e].renderQueue)._addDynamicBatchElement(this._merageElements[J_e])},J_a._beforeRender=function(J_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J_a._render=function(J_a){var J_b=J_a._batchIndexEnd-J_a._batchIndexStart;J_F.mainContext.drawElements(4,J_b,5123,2*J_a._batchIndexStart),J_A.drawCall++,J_A.trianglesFaces+=J_b/3},J_a._getVertexBuffers=function(){return null},J_o(0,J_a,"_vertexBufferCount",function(){return 1}),J_o(0,J_a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J_o(0,J_a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),J_w.maxVertexCount=2e4,J_w.maxIndexCount=4e4,J_w.maxCombineTriangleCount=10,J_w}(),J_ba=function(){function J_w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}J_n(J_w,"laya.d3.graphics.DynamicBatchManager");var J_a=J_w.prototype;return J_a.getDynamicBatch=function(J_a,J_b){var J_c,J_d=J_a.id.toString()+J_b;return this._dynamicBatches[J_d]?J_c=this._dynamicBatches[J_d]:this._dynamicBatches[J_d]=J_c=new J_aa(J_a),J_c},J_a._garbageCollection=function(){for(var J_a in this._dynamicBatches)0===this._dynamicBatches[J_a].combineRenderElementsCount&&delete this._dynamicBatches[J_a]},J_a._addPrepareRenderElement=function(J_a){this._prepareDynamicBatchCombineElements.push(J_a)},J_a._finishCombineDynamicBatch=function(J_a){var J_b,J_c,J_d;this._prepareDynamicBatchCombineElements.sort(J_w._sortPrepareDynamicBatch);for(var J_e,J_f,J_g,J_h,J_i,J_j=-1,J_k=!0,J_l=0,J_m=-1,J_n=0,J_o=this._prepareDynamicBatchCombineElements.length;J_n<J_o;J_n++){var J_p=(J_f=this._prepareDynamicBatchCombineElements[J_n]).renderObj._getVertexBuffer(0).vertexDeclaration,J_q=J_c!==J_p;J_q&&(J_l=0,J_c=J_p);var J_r=J_l!==J_j;if(J_r&&(J_j=J_l),(J_q||J_r)&&(J_g=this.getDynamicBatch(J_p,J_l),J_b=null),J_k)if(J_g._addCombineRenderObjTest(J_f)){if(J_b!==(J_e=J_f._material))J_h&&(J_a.getRenderQueue(J_i._material.renderQueue)._addRenderElement(J_i),J_i=J_h=null,J_m=-1),J_h=J_e,J_m=J_g.combineRenderElementsCount,J_i=J_f,J_b=J_e;else if(J_h){var J_u=J_i.renderObj,J_v=J_f.renderObj;J_u._getVertexBuffer().vertexCount+J_v._getVertexBuffer().vertexCount>J_aa.maxVertexCount||J_u._getIndexBuffer().indexCount+J_v._getIndexBuffer().indexCount>J_aa.maxIndexCount?(J_a.getRenderQueue(J_i._material.renderQueue)._addRenderElement(J_i),J_h=J_e,J_m=J_g.combineRenderElementsCount,J_i=J_f):(J_g._addCombineMaterial(J_h),J_g._addMaterialToRenderElementOffset(J_m),J_g._addCombineRenderObj(J_i),J_i=J_h=null,J_m=-1,J_g._addCombineRenderObj(J_f))}else J_g._addCombineRenderObj(J_f);J_k=!0}else J_h&&(J_a.getRenderQueue(J_i._material.renderQueue)._addRenderElement(J_i),J_i=J_h=null,J_m=-1),J_l++,J_k=!1;else J_d=this._prepareDynamicBatchCombineElements[J_n-1],J_g._addMaterialToRenderElementOffset(J_g.combineRenderElementsCount),J_b=J_d._material,J_g._addCombineMaterial(J_b),J_g._addCombineRenderObj(J_d),J_k=!0,J_b!==(J_e=J_f._material)?(J_h=J_e,J_m=J_g.combineRenderElementsCount,J_i=J_f):J_g._addCombineRenderObj(J_f),J_b=J_e}J_h&&(J_a.getRenderQueue(J_i._material.renderQueue)._addRenderElement(J_i),J_i=J_h=null,J_m=-1),this._prepareDynamicBatchCombineElements.length=0},J_a._clearRenderElements=function(){for(var J_a in this._dynamicBatches)this._dynamicBatches[J_a]._clearRenderElements()},J_a._addToRenderQueue=function(J_a,J_b,J_c,J_d){for(var J_e in this._dynamicBatches){var J_f=this._dynamicBatches[J_e];0<J_f.combineRenderElementsCount&&J_f._addToRenderQueue(J_a,J_b,J_c,J_d)}},J_a.dispose=function(){this._dynamicBatches=null},J_w._sortPrepareDynamicBatch=function(J_a,J_b){return J_a._mainSortID-J_b._mainSortID},J_w}(),J_ca=function(){function J_a(){}return J_n(J_a,"laya.d3.graphics.FrustumCulling"),J_a.renderShadowObjectCulling=function(J_a,J_b,J_c,J_d,J_e){var J_f=0,J_g=0,J_h=0,J_i=0;for(J_f=0,J_h=J_c.length;J_f<J_h;J_f++){var J_j=J_c[J_f];J_j&&J_j._clearRenderElements()}var J_k,J_l,J_m,J_n=J_a._cullingRenders;if(1<J_e){for(J_f=0,J_h=J_a._cullingRendersLength;J_f<J_h;J_f++)if((J_k=J_n[J_f]).castShadow&&J_I.isVisible(J_k._owner.layer.mask)&&J_k.enable)for(var J_o=1,J_p=J_b.length;J_o<J_p;J_o++)if(J_l=J_c[J_o-1],0!==J_b[J_o].containsBoundSphere(J_k.boundingSphere))for(J_g=0,J_i=(J_m=J_k._renderElements).length;J_g<J_i;J_g++)J_l._addRenderElement(J_m[J_g])}else for(J_f=0,J_h=J_a._cullingRendersLength;J_f<J_h;J_f++)if((J_k=J_n[J_f]).castShadow&&J_I.isVisible(J_k._owner.layer.mask)&&J_k.enable&&0!==J_b[0].containsBoundSphere(J_k.boundingSphere))for(J_k._renderUpdate(J_d),J_l=J_c[0],J_g=0,J_i=(J_m=J_k._renderElements).length;J_g<J_i;J_g++)J_l._addRenderElement(J_m[J_g])},J_a.renderShadowObjectCullingOctree=function(J_a,J_b,J_c,J_d,J_e){for(var J_f=0,J_g=J_c.length;J_f<J_g;J_f++){var J_h=J_c[J_f];J_h&&J_h._clearRenderElements()}1<J_e?J_a.treeRoot.cullingShadowObjects(J_b,J_c,!0,0,J_a):J_a.treeRoot.cullingShadowObjectsOnePSSM(J_b[0],J_c,J_d,!0,0,J_a)},J_a.renderObjectCulling=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=0,J_h=0,J_i=0,J_j=0,J_k=J_b._quenes,J_l=J_b._dynamicBatchManager,J_m=J_b._cullingRenders;for(J_g=0,J_h=J_k.length;J_g<J_h;J_g++){var J_n=J_k[J_g];J_n&&J_n._clearRenderElements()}var J_o=J_da._staticBatchManagers;for(J_g=0,J_h=J_o.length;J_g<J_h;J_g++)J_o[J_g]._clearRenderElements();J_l._clearRenderElements();var J_p=J_c.transform.position;for(J_g=0,J_h=J_b._cullingRendersLength;J_g<J_h;J_g++){var J_q=J_m[J_g];if(J_I.isVisible(J_q._owner.layer.mask)&&J_q.enable&&0!==J_a.containsBoundSphere(J_q.boundingSphere)&&J_q._renderUpdate(J_f)){J_q._distanceForSort=J_gb.distance(J_q.boundingSphere.center,J_p)+J_q.sortingFudge;var J_r=J_q._renderElements;for(J_i=0,J_j=J_r.length;J_i<J_j;J_i++){var J_u=J_r[J_i],J_v=J_u._staticBatch;if(J_v&&J_v._material===J_u._material)J_v._addBatchRenderElement(J_u);else{var J_w=J_u.renderObj;J_w.triangleCount<10&&1===J_w._vertexBufferCount&&J_w._getIndexBuffer()&&J_u._material.renderQueue<2&&J_u._canDynamicBatch&&!J_q._owner.isStatic?J_l._addPrepareRenderElement(J_u):J_b.getRenderQueue(J_u._material.renderQueue)._addRenderElement(J_u)}}}}for(J_g=0,J_h=J_o.length;J_g<J_h;J_g++)J_o[J_g]._addToRenderQueue(J_b,J_d,J_e,J_f);J_l._finishCombineDynamicBatch(J_b),J_l._addToRenderQueue(J_b,J_d,J_e,J_f)},J_a.renderObjectCullingOctree=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=0,J_h=0,J_i=J_b._quenes,J_j=J_b._dynamicBatchManager;for(J_g=0,J_h=J_i.length;J_g<J_h;J_g++){var J_k=J_i[J_g];J_k&&J_k._clearRenderElements()}var J_l=J_da._staticBatchManagers;for(J_g=0,J_h=J_l.length;J_g<J_h;J_g++)J_l[J_g]._clearRenderElements();for(J_j._clearRenderElements(),J_b._cullingRenders.length=0,J_b.treeRoot.cullingObjects(J_a,!0,0,J_c.transform.position,J_f),J_g=0,J_h=J_l.length;J_g<J_h;J_g++)J_l[J_g]._addToRenderQueue(J_b,J_d,J_e,J_f);J_j._finishCombineDynamicBatch(J_b),J_j._addToRenderQueue(J_b,J_d,J_e,J_f)},J_a.renderObjectCullingNoBoundFrustum=function(J_a,J_b,J_c,J_d,J_e){var J_f=0,J_g=0,J_h=0,J_i=0,J_j=J_a._quenes,J_k=J_a._dynamicBatchManager,J_l=J_a._cullingRenders;for(J_f=0,J_g=J_j.length;J_f<J_g;J_f++){var J_m=J_j[J_f];J_m&&J_m._clearRenderElements()}var J_n=J_da._staticBatchManagers;for(J_f=0,J_g=J_n.length;J_f<J_g;J_f++)J_n[J_f]._clearRenderElements();J_k._clearRenderElements();var J_o=J_b.transform.position;for(J_f=0,J_g=J_a._cullingRendersLength;J_f<J_g;J_f++){var J_p=J_l[J_f];if(J_I.isVisible(J_p._owner.layer.mask)&&J_p.enable){J_p._renderUpdate(J_e),J_p._distanceForSort=J_gb.distance(J_p.boundingSphere.center,J_o)+J_p.sortingFudge;var J_q=J_p._renderElements;for(J_h=0,J_i=J_q.length;J_h<J_i;J_h++){var J_r=J_q[J_h],J_u=J_r._staticBatch;if(J_u&&J_u._material===J_r._material)J_u._addBatchRenderElement(J_r);else{var J_v=J_r.renderObj;J_v.triangleCount<10&&1===J_v._vertexBufferCount&&J_v._getIndexBuffer()&&J_r._material.renderQueue<2&&J_r._canDynamicBatch&&!J_p._owner.isStatic?J_k._addPrepareRenderElement(J_r):J_a.getRenderQueue(J_r._material.renderQueue)._addRenderElement(J_r)}}}}for(J_f=0,J_g=J_n.length;J_f<J_g;J_f++)J_n[J_f]._addToRenderQueue(J_a,J_c,J_d,J_e);J_k._finishCombineDynamicBatch(J_a),J_k._addToRenderQueue(J_a,J_c,J_d,J_e)},J_a}(),J_da=function(){function J_f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}J_n(J_f,"laya.d3.graphics.StaticBatchManager");var J_a=J_f.prototype;return J_a._finishInit=function(){for(var J_a in this._staticBatches)this._staticBatches[J_a]._finishInit();this._initBatchRenderElements.length=0},J_a._initStaticBatchs=function(J_a){throw new Error("StaticBatchManager:must override this function.")},J_a._addInitBatchSprite=function(J_a){for(var J_b=J_a._render._renderElements,J_c=0,J_d=J_b.length;J_c<J_d;J_c++)this._initBatchRenderElements.push(J_b[J_c])},J_a._clearRenderElements=function(){for(var J_a in this._staticBatches)this._staticBatches[J_a]._clearRenderElements()},J_a._garbageCollection=function(J_a){var J_b=J_a._staticBatch,J_c=J_b._initBatchRenderElements,J_d=J_c.indexOf(J_a);J_c.splice(J_d,1),0===J_c.length&&(J_b.dispose(),delete this._staticBatches[J_b._key])},J_a._addToRenderQueue=function(J_a,J_b,J_c,J_d){for(var J_e in this._staticBatches){var J_f=this._staticBatches[J_e];0<J_f._batchRenderElements.length&&J_f._updateToRenderQueue(J_a,J_d)}},J_a.dispose=function(){this._staticBatches=null},J_f._addToStaticBatchQueue=function(J_a){J_a instanceof laya.d3.core.RenderableSprite3D&&J_a._addToInitStaticBatchManager();for(var J_b=0,J_c=J_a.numChildren;J_b<J_c;J_b++)J_f._addToStaticBatchQueue(J_a._childs[J_b])},J_f.combine=function(J_a,J_b){var J_c,J_d=0,J_e=0;if(J_b)for(J_d=0,J_e=J_b.length;J_d<J_e;J_d++){J_b[J_d]._addToInitStaticBatchManager()}else J_a&&J_f._addToStaticBatchQueue(J_a);for(J_d=0,J_e=J_f._staticBatchManagers.length;J_d<J_e;J_d++)(J_c=J_f._staticBatchManagers[J_d])._initStaticBatchs(J_a),J_c._finishInit()},J_f._staticBatchManagers=[],J_f}(),J_ea=function(){function J_a(J_a,J_b,J_c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=J_a,this._manager=J_b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=J_c}J_n(J_a,"laya.d3.graphics.StaticBatch");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),J_b._binarySearch=function(J_a){for(var J_b=0,J_c=this._batchRenderElements.length-1,J_d=0;J_b<=J_c;)J_d=Math.floor((J_b+J_c)/2),this._compareBatchRenderElement(this._batchRenderElements[J_d],J_a)?J_c=J_d-1:J_b=J_d+1;return J_b},J_b._compareBatchRenderElement=function(J_a,J_b){throw new Error("StaticBatch:must override this function.")},J_b._getVertexDecLightMap=function(J_a){return J_a===J_Na.vertexDeclaration?J_Ia.vertexDeclaration:J_a===J_Ma.vertexDeclaration?J_Ha.vertexDeclaration:J_a===J_Ba.vertexDeclaration?J_wa.vertexDeclaration:J_a===J_Ra.vertexDeclaration?null:J_a===J_pa.vertexDeclaration?J_qa.vertexDeclaration:J_a===J_Pa.vertexDeclaration?J_Ka.vertexDeclaration:J_a===J_Fa.vertexDeclaration?J_Ga.vertexDeclaration:J_a===J_Oa.vertexDeclaration?J_Ja.vertexDeclaration:J_a===J_Ma.vertexDeclaration?J_Ha.vertexDeclaration:J_a===J_Ca.vertexDeclaration?J_xa.vertexDeclaration:J_a===J_Ra.vertexDeclaration?null:J_a===J_pa.vertexDeclaration?J_qa.vertexDeclaration:J_a===J_Qa.vertexDeclaration?J_La.vertexDeclaration:J_a===J_Fa.vertexDeclaration?J_Ga.vertexDeclaration:J_a},J_b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},J_b._addBatchRenderElement=function(J_a){this._batchRenderElements.splice(this._binarySearch(J_a),0,J_a)},J_b._updateToRenderQueue=function(J_a,J_b){this._combineRenderElementPoolIndex=0,this._getRenderElement(J_a.getRenderQueue(this._material.renderQueue)._renderElements,J_a,J_b)},J_b._getRenderElement=function(J_a,J_b,J_c){throw new Error("StaticBatch:must override this function.")},J_b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},J_b._clearRenderElements=function(){this._batchRenderElements.length=0},J_b.dispose=function(){},J_b._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),null},J_b._getIndexBuffer=function(){return null},J_b._beforeRender=function(J_a){return!0},J_b._render=function(J_a){},J_b._getVertexBuffers=function(){return null},J_o(0,J_b,"_vertexBufferCount",function(){return 1}),J_o(0,J_b,"triangleCount",function(){return 0}),J_a.combine=function(J_a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),J_da.combine(J_a)},J_a.maxBatchVertexCount=65535,J_a}(),J_fa=function(){function J_g(J_a,J_b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++J_g._uniqueIDCounter,this._id>J_g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",J_g.maxVertexDeclaration);this._shaderValues=new J_mb,this._vertexElementsDic={},this._vertexStride=J_a,this._vertexElements=J_b;for(var J_c=0;J_c<J_b.length;J_c++){var J_d=J_b[J_c],J_e=J_d.elementUsage;this._vertexElementsDic[J_e]=J_d;var J_f=[J_g._getTypeSize(J_d.elementFormat)/4,5126,!1,this._vertexStride,J_d.offset];switch(this._shaderValues.setValue(J_e,J_f),J_e){case 1:this._addShaderDefine(J_Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(J_Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(J_Ab.SHADERDEFINE_UV1)}}}J_n(J_g,"laya.d3.graphics.VertexDeclaration");var J_a=J_g.prototype;return J_a._addShaderDefine=function(J_a){this._shaderDefineValue|=J_a},J_a._removeShaderDefine=function(J_a){this._shaderDefineValue&=~J_a},J_a.getVertexElements=function(){return this._vertexElements.slice()},J_a.getVertexElementByUsage=function(J_a){return this._vertexElementsDic[J_a]},J_a.unBinding=function(){},J_o(0,J_a,"shaderDefineValue",function(){return this._shaderDefineValue}),J_o(0,J_a,"id",function(){return this._id}),J_o(0,J_a,"vertexStride",function(){return this._vertexStride}),J_o(0,J_a,"shaderValues",function(){return this._shaderValues}),J_g._getTypeSize=function(J_a){switch(J_a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},J_g.getVertexStride=function(J_a){for(var J_b=0,J_c=0;J_c<J_a.Length;J_c++){var J_d=J_a[J_c],J_e=J_d.offset+J_g._getTypeSize(J_d.elementFormat);J_b<J_e&&(J_b=J_e)}return J_b},J_g._maxVertexDeclarationBit=1e3,J_g._uniqueIDCounter=1,J_l(J_g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),J_g}(),J_ga=function(){function J_a(J_a,J_b,J_c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=J_a,this.elementFormat=J_b,this.elementUsage=J_c}return J_n(J_a,"laya.d3.graphics.VertexElement"),J_a}(),J_ha=(function(){function J_a(){}J_n(J_a,"laya.d3.graphics.VertexElementFormat"),J_a.Single="single",J_a.Vector2="vector2",J_a.Vector3="vector3",J_a.Vector4="vector4",J_a.Color="color",J_a.Byte4="byte4",J_a.Short2="short2",J_a.Short4="short4",J_a.NormalizedShort2="normalizedshort2",J_a.NormalizedShort4="normalizedshort4",J_a.HalfVector2="halfvector2",J_a.HalfVector4="halfvector4"}(),function(){function J_a(){}J_n(J_a,"laya.d3.graphics.VertexElementUsage"),J_a.POSITION0=0,J_a.COLOR0=1,J_a.TEXTURECOORDINATE0=2,J_a.NORMAL0=3,J_a.BINORMAL0=4,J_a.TANGENT0=5,J_a.BLENDINDICES0=6,J_a.BLENDWEIGHT0=7,J_a.DEPTH0=8,J_a.FOG0=9,J_a.POINTSIZE0=10,J_a.SAMPLE0=11,J_a.TESSELLATEFACTOR0=12,J_a.COLOR1=13,J_a.NEXTTEXTURECOORDINATE0=14,J_a.TEXTURECOORDINATE1=15,J_a.NEXTTEXTURECOORDINATE1=16,J_a.CORNERTEXTURECOORDINATE0=17,J_a.VELOCITY0=18,J_a.STARTCOLOR0=19,J_a.STARTSIZE=20,J_a.AGEADDSCALE0=21,J_a.STARTROTATION=22,J_a.ENDCOLOR0=23,J_a.STARTLIFETIME=24,J_a.TIME0=33,J_a.SHAPEPOSITIONSTARTLIFETIME=30,J_a.DIRECTIONTIME=32,J_a.SIZEROTATION0=27,J_a.RADIUS0=28,J_a.RADIAN0=29,J_a.STARTSPEED=31,J_a.RANDOM0=34,J_a.RANDOM1=35,J_a.SIMULATIONWORLDPOSTION=36,J_a.SIMULATIONWORLDROTATION=37,J_a.TEXTURECOORDINATE0X=38,J_a.TEXTURECOORDINATE0X1=39,J_a.TEXTURECOORDINATE0Y=40,J_a.OFFSETVECTOR=41}(),function(){function J_a(J_a,J_b,J_c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=J_a,this._textureCoordinate0=J_b,this._time=J_c}J_n(J_a,"laya.d3.graphics.VertexGlitter");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate0}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"time",function(){return this._time}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(24,[new J_ga(0,"vector3",0),new J_ga(12,"vector2",2),new J_ga(20,"single",33)])}])}(),function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=J_a,this._position=J_b,this._velocity=J_c,this._startColor=J_d,this._endColor=J_e,this._sizeRotation=J_f,this._radius=J_g,this._radian=J_h,this._ageAddScale=J_i,this._time=J_j}J_n(J_a,"laya.d3.graphics.VertexParticle");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"endColor",function(){return this._endColor}),J_o(0,J_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J_o(0,J_b,"sizeRotation",function(){return this._sizeRotation}),J_o(0,J_b,"velocity",function(){return this._velocity}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"startColor",function(){return this._startColor}),J_o(0,J_b,"radius",function(){return this._radius}),J_o(0,J_b,"radian",function(){return this._radian}),J_o(0,J_b,"ageAddScale",function(){return this._ageAddScale}),J_o(0,J_b,"time",function(){return this._time}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(116,[new J_ga(0,"vector4",17),new J_ga(16,"vector3",0),new J_ga(28,"vector3",18),new J_ga(40,"vector4",19),new J_ga(56,"vector4",23),new J_ga(72,"vector3",27),new J_ga(84,"vector2",28),new J_ga(92,"vector4",29),new J_ga(108,"single",24),new J_ga(112,"single",33)])}])}(),function(){function J_a(J_a){this._position=null,this._position=J_a}J_n(J_a,"laya.d3.graphics.VertexPosition");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(12,[new J_ga(0,"vector3",0)])}]),J_a}()),J_ia=function(){function J_a(J_a,J_b){this._position=null,this._normal=null,this._position=J_a,this._normal=J_b}J_n(J_a,"laya.d3.graphics.VertexPositionNormal");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(24,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3)])}]),J_a}(),J_ja=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._color=null,this._position=J_a,this._normal=J_b,this._color=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColor");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(40,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1)])}]),J_a}(),J_ka=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._blendIndex=J_d,this._blendWeight=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorSkin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(72,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6)])}]),J_a}(),J_la=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._tangent=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(88,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6),new J_ga(72,"vector4",5)])}]),J_a}(),J_ma=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._tangent=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(84,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6),new J_ga(72,"vector3",5)])}]),J_a}(),J_na=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._tangent=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(56,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector4",5)])}]),J_a}(),J_oa=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._tangent=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(52,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector3",5)])}]),J_a}(),J_pa=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(48,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2)])}]),J_a}(),J_qa=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(56,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15)])}]),J_a}(),J_ra=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._blendIndex=J_f,this._blendWeight=J_g}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(88,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15),new J_ga(56,"vector4",7),new J_ga(72,"vector4",6)])}]),J_a}(),J_ua=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._tangent=J_f,this._blendIndex=J_g,this._blendWeight=J_h}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(104,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15),new J_ga(56,"vector4",7),new J_ga(72,"vector4",6),new J_ga(88,"vector4",5)])}]),J_a}(),J_va=function(){function J_a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_b.VertexPositionNormalColorTexture0SkinTangent=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._tangent=J_f,this._blendIndex=J_g,this._blendWeight=J_h},J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(100,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15),new J_ga(56,"vector4",7),new J_ga(72,"vector4",6),new J_ga(88,"vector3",5)])}]),J_a}(),J_wa=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._tangent=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(72,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15),new J_ga(56,"vector4",5)])}]),J_a}(),J_xa=function(){function J_a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_b.VertexPositionNormalColorTexture0Tangent=function(J_a,J_b,J_c,J_d,J_e,J_f){this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._tangent=J_f},J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(68,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector2",15),new J_ga(56,"vector3",5)])}]),J_a}(),J_ya=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(80,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector4",7),new J_ga(64,"vector4",6)])}]),J_a}(),J_za=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d,this._tangent=J_e,this._blendIndex=J_f,this._blendWeight=J_g}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(96,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector4",7),new J_ga(64,"vector4",6),new J_ga(80,"vector4",5)])}]),J_a}(),J_Aa=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d,this._tangent=J_e,this._blendIndex=J_f,this._blendWeight=J_g}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(92,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector4",7),new J_ga(64,"vector4",6),new J_ga(80,"vector3",5)])}]),J_a}(),J_Ba=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d,this._tangent=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(64,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector4",5)])}]),J_a}(),J_Ca=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._color=J_c,this._textureCoordinate=J_d,this._tangent=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"color",function(){return this._color}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(60,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",1),new J_ga(40,"vector2",2),new J_ga(48,"vector3",5)])}]),J_a}(),J_Da=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._tangent=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNormalSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(40,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector4",5)])}]),J_a}(),J_Ea=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._tangent=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(36,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector3",5)])}]),J_a}(),J_Fa=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(32,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2)])}]),J_a}(),J_Ga=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(40,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15)])}]),J_a}(),J_Ha=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(72,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6)])}]),J_a}(),J_Ia=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d,this._tangent=J_e,this._blendIndex=J_f,this._blendWeight=J_g}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(88,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6),new J_ga(72,"vector4",5)])}]),J_a}(),J_Ja=function(){function J_a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_b.VertexPositionNormalTexture0SkinTangent=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d,this._tangent=J_e,this._blendIndex=J_f,this._blendWeight=J_g},J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(84,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15),new J_ga(40,"vector4",7),new J_ga(56,"vector4",6),new J_ga(72,"vector3",5)])}]),J_a}(),J_Ka=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d,this._tangent=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(56,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15),new J_ga(40,"vector4",5)])}]),J_a}(),J_La=function(){function J_a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_b.VertexPositionNormalTexture0Tangent=function(J_a,J_b,J_c,J_d,J_e){this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_c,this._textureCoordinate1=J_d,this._tangent=J_e},J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(52,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15),new J_ga(40,"vector3",5)])}]),J_a}(),J_Ma=function(){function J_a(J_a,J_b,J_c,J_d,J_e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c,this._blendIndex=J_d,this._blendWeight=J_e}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(64,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector4",7),new J_ga(48,"vector4",6)])}]),J_a}(),J_Na=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c,this._tangent=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(80,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector4",7),new J_ga(48,"vector4",6),new J_ga(64,"vector4",5)])}]),J_a}(),J_Oa=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c,this._tangent=J_d,this._blendIndex=J_e,this._blendWeight=J_f}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(76,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector4",7),new J_ga(48,"vector4",6),new J_ga(64,"vector3",5)])}]),J_a}(),J_Pa=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c,this._tangent=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(48,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector4",5)])}]),J_a}(),J_Qa=function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c,this._tangent=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(44,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector3",5)])}]),J_a}(),J_Ra=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNTBTexture");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(56,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector3",5),new J_ga(36,"vector3",4),new J_ga(48,"vector2",2)])}]),J_a}(),J_Sa=function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=J_a,this._normal=J_b,this._textureCoordinate0=J_d,this._textureCoordinate1=J_e,this._tangent=J_f,J_c=J_c,this._blendIndex=J_g,this._blendWeight=J_h}J_n(J_a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"tangent",function(){return this._tangent}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(0,J_b,"textureCoordinate1",function(){return this._textureCoordinate1}),J_o(0,J_b,"blendIndex",function(){return this._blendIndex}),J_o(0,J_b,"blendWeight",function(){return this._blendWeight}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(96,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector3",5),new J_ga(36,"vector3",4),new J_ga(48,"vector2",2),new J_ga(56,"vector2",15),new J_ga(64,"vector4",7),new J_ga(80,"vector4",6)])}]),J_a}(),J_Ta=function(){function J_a(J_a,J_b,J_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J_a,this._normal=J_b,this._textureCoordinate=J_c}J_n(J_a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"textureCoordinate",function(){return this._textureCoordinate}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(88,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector3",5),new J_ga(36,"vector3",4),new J_ga(48,"vector2",2),new J_ga(56,"vector4",7),new J_ga(72,"vector4",6)])}]),J_a}(),J_Ua=(function(){function J_a(J_a,J_b,J_c,J_d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=J_a,this._normal=J_b,this._textureCoord0=J_c,this._textureCoord1=J_d}J_n(J_a,"laya.d3.graphics.VertexPositionTerrain");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"normal",function(){return this._normal}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoord0",function(){return this._textureCoord0}),J_o(0,J_b,"textureCoord1",function(){return this._textureCoord1}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(40,[new J_ga(0,"vector3",0),new J_ga(12,"vector3",3),new J_ga(24,"vector2",2),new J_ga(32,"vector2",15)])}])}(),function(){function J_a(J_a,J_b){this._position=null,this._textureCoordinate0=null,this._position=J_a,this._textureCoordinate0=J_b}J_n(J_a,"laya.d3.graphics.VertexPositionTexture0");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"position",function(){return this._position}),J_o(0,J_b,"textureCoordinate0",function(){return this._textureCoordinate0}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(20,[new J_ga(0,"vector3",0),new J_ga(12,"vector2",2)])}]),J_a}()),J_Va=(function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m,J_n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=J_a,this._positionStartLifeTime=J_b,this._velocity=J_c,this._startColor=J_d,this._startSize=J_e,this._startRotation0=J_f,this._startRotation1=J_g,this._startRotation2=J_h,this._startLifeTime=J_i,this._time=J_j,this._startSpeed=J_k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=J_n}J_n(J_a,"laya.d3.graphics.VertexShurikenParticleBillboard");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J_o(0,J_b,"random1",function(){return this._randoms1}),J_o(0,J_b,"startRotation2",function(){return this._startRotation2}),J_o(0,J_b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),J_o(0,J_b,"velocity",function(){return this._velocity}),J_o(0,J_b,"random0",function(){return this._randoms0}),J_o(0,J_b,"startSize",function(){return this._startSize}),J_o(0,J_b,"startColor",function(){return this._startColor}),J_o(0,J_b,"startRotation0",function(){return this._startRotation0}),J_o(0,J_b,"startRotation1",function(){return this._startRotation1}),J_o(0,J_b,"startLifeTime",function(){return this._startLifeTime}),J_o(0,J_b,"time",function(){return this._time}),J_o(0,J_b,"startSpeed",function(){return this._startSpeed}),J_o(0,J_b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(152,[new J_ga(0,"vector4",17),new J_ga(16,"vector4",30),new J_ga(32,"vector4",32),new J_ga(48,"vector4",19),new J_ga(64,"vector3",20),new J_ga(76,"vector3",22),new J_ga(88,"single",31),new J_ga(92,"vector4",34),new J_ga(108,"vector4",35),new J_ga(124,"vector3",36),new J_ga(136,"vector4",37)])}])}(),function(){function J_a(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m,J_n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=J_a,this._positionStartLifeTime=J_b,this._velocity=J_c,this._startColor=J_d,this._startSize=J_e,this._startRotation0=J_f,this._startRotation1=J_g,this._startRotation2=J_h,this._startLifeTime=J_i,this._time=J_j,this._startSpeed=J_k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=J_n}J_n(J_a,"laya.d3.graphics.VertexShurikenParticleMesh");var J_b=J_a.prototype;J_x.imps(J_b,{"laya.d3.graphics.IVertex":!0}),J_o(0,J_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J_o(0,J_b,"velocity",function(){return this._velocity}),J_o(0,J_b,"position",function(){return this._positionStartLifeTime}),J_o(0,J_b,"random0",function(){return this._randoms0}),J_o(0,J_b,"startSize",function(){return this._startSize}),J_o(0,J_b,"startColor",function(){return this._startColor}),J_o(0,J_b,"startRotation0",function(){return this._startRotation0}),J_o(0,J_b,"startRotation1",function(){return this._startRotation1}),J_o(0,J_b,"random1",function(){return this._randoms1}),J_o(0,J_b,"startRotation2",function(){return this._startRotation2}),J_o(0,J_b,"startLifeTime",function(){return this._startLifeTime}),J_o(0,J_b,"time",function(){return this._time}),J_o(0,J_b,"startSpeed",function(){return this._startSpeed}),J_o(0,J_b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),J_o(0,J_b,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_o(1,J_a,"vertexDeclaration",function(){return J_a._vertexDeclaration}),J_l(J_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J_fa(172,[new J_ga(0,"vector3",0),new J_ga(12,"vector4",1),new J_ga(28,"vector2",2),new J_ga(36,"vector4",30),new J_ga(52,"vector4",32),new J_ga(68,"vector4",19),new J_ga(84,"vector3",20),new J_ga(96,"vector3",22),new J_ga(108,"single",31),new J_ga(112,"vector4",34),new J_ga(128,"vector4",35),new J_ga(144,"vector3",36),new J_ga(156,"vector4",37)])}])}(),function(){function J_v(J_a,J_b,J_c,J_d,J_e,J_f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=J_c,this._materials=J_d,this._subMeshes=J_e,this._materialMap=J_f,this._version=J_b,this._onLoaded(J_a)}J_n(J_v,"laya.d3.loaders.LoadModelV01");var J_a=J_v.prototype;return J_a._onLoaded=function(J_a){this._readData=J_a,this.READ_BLOCK();for(var J_b=0;J_b<this._BLOCK.count;J_b++){var J_c=this._readData.getUint16(),J_d=this._strings[J_c],J_e=this["READ_"+J_d];if(null==J_e)throw new Error("model file err,no this function:"+J_c+" "+J_d);if(!J_e.call(this))break}return this._mesh},J_a.onError=function(){},J_a._readString=function(){return this._strings[this._readData.getUint16()]},J_a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},J_a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},J_a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var J_a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var J_b=0;J_b<this._STRINGS.size;J_b++)this._strings[J_b]=this._readData.readUTFString();return this._readData.pos=J_a,!0},J_a.READ_MATERIAL=function(){var J_a=this._readData.getUint16(),J_b=(this._readString(),this._readString());return this._materials[J_a]="null"!==J_b?J_r.getRes(this._materialMap[J_b]):new J_Eb,!0},J_a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var J_a,J_b=this._readData.__getBuffer(),J_c=0,J_d=this._readData.getUint32(),J_e=this._readData.getUint32(),J_f=(new Float32Array(J_b.slice(J_d+this._DATA.offset,J_d+this._DATA.offset+J_e)),this._readData.getUint32()),J_g=this._readData.getUint32(),J_h=new Float32Array(J_b.slice(J_f+this._DATA.offset,J_f+this._DATA.offset+J_g));for(this.mesh._inverseBindPoses=[],J_c=0,J_a=J_h.length;J_c<J_a;J_c+=16){var J_i=new J_ab(J_h[J_c+0],J_h[J_c+1],J_h[J_c+2],J_h[J_c+3],J_h[J_c+4],J_h[J_c+5],J_h[J_c+6],J_h[J_c+7],J_h[J_c+8],J_h[J_c+9],J_h[J_c+10],J_h[J_c+11],J_h[J_c+12],J_h[J_c+13],J_h[J_c+14],J_h[J_c+15]);this.mesh._inverseBindPoses.push(J_i)}break;default:throw new Error("LoadModel:unknown version.")}return!0},J_a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var J_a=this._readString();this._shaderAttributes=J_a.match(J_v._attrReg);var J_b=this._readData.getUint32(),J_c=this._readData.getUint32(),J_d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),J_e=this._readData.getUint32(),J_f=this._readData.getUint32(),J_g=this._readData.getUint32(),J_h=this._readData.__getBuffer(),J_i=new J_jb(this._mesh),J_j=this._getVertexDeclaration(),J_k=J_Ob.create(J_j,J_e/J_j.vertexStride,35044,!0),J_l=J_d+this._DATA.offset,J_m=J_h.slice(J_l,J_l+J_e);J_k.setData(new Float32Array(J_m));for(var J_n=(J_i._vertexBuffer=J_k).vertexDeclaration.getVertexElements(),J_o=0;J_o<J_n.length;J_o++)J_i._bufferUsage[J_n[J_o].elementUsage]=J_k;var J_p=J_Nb.create("ushort",J_c/2,35044,!0),J_q=J_b+this._DATA.offset,J_r=J_h.slice(J_q,J_q+J_c);J_p.setData(new Uint16Array(J_r)),J_i._indexBuffer=J_p;var J_u=J_h.slice(J_f+this._DATA.offset,J_f+this._DATA.offset+J_g);return J_i._boneIndicesList[0]=new Uint8Array(J_u),this._subMeshes.push(J_i),!0},J_a.READ_DATAAREA=function(){return!1},J_a._getVertexDeclaration=function(){for(var J_a,J_b=!1,J_c=!1,J_d=!1,J_e=!1,J_f=!1,J_g=!1,J_h=!1,J_i=!1,J_j=!1,J_k=0;J_k<this._shaderAttributes.length;J_k+=8)switch(this._shaderAttributes[J_k]){case"POSITION":J_b=!0;break;case"NORMAL":J_c=!0;break;case"COLOR":J_d=!0;break;case"UV":J_e=!0;break;case"UV1":J_f=!0;break;case"BLENDWEIGHT":J_h=!0;break;case"BLENDINDICES":J_i=!0;break;case"TANGENT":J_g=!0;break;case"BINORMAL":J_j=!0}return J_b&&J_c&&J_d&&J_e&&J_f&&J_h&&J_i&&J_g?J_a=J_va.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_f&&J_h&&J_i?J_a=J_ra.vertexDeclaration:J_b&&J_c&&J_e&&J_f&&J_h&&J_i&&J_g?J_a=J_Ja.vertexDeclaration:J_b&&J_c&&J_e&&J_f&&J_h&&J_i?J_a=J_Ha.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_h&&J_i&&J_g?J_a=J_Aa.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_h&&J_i?J_a=J_ya.vertexDeclaration:J_b&&J_c&&J_g&&J_j&&J_e&&J_h&&J_i?J_a=J_Ta.vertexDeclaration:J_b&&J_c&&J_e&&J_h&&J_i&&J_g?J_a=J_Oa.vertexDeclaration:J_b&&J_c&&J_e&&J_h&&J_i?J_a=J_Ma.vertexDeclaration:J_b&&J_c&&J_d&&J_h&&J_i&&J_g?J_a=J_ma.vertexDeclaration:J_b&&J_c&&J_d&&J_h&&J_i?J_a=J_ka.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_f&&J_g?J_a=J_xa.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_f?J_a=J_qa.vertexDeclaration:J_b&&J_c&&J_e&&J_f&&J_g?J_a=J_La.vertexDeclaration:J_b&&J_c&&J_e&&J_f?J_a=J_Ga.vertexDeclaration:J_b&&J_c&&J_d&&J_e&&J_g?J_a=J_Ca.vertexDeclaration:J_b&&J_c&&J_e&&J_g&&J_j?J_a=J_Ra.vertexDeclaration:J_b&&J_c&&J_d&&J_e?J_a=J_pa.vertexDeclaration:J_b&&J_c&&J_e&&J_g?J_a=J_Qa.vertexDeclaration:J_b&&J_c&&J_e?J_a=J_Fa.vertexDeclaration:J_b&&J_c&&J_d&&J_g?J_a=J_oa.vertexDeclaration:J_b&&J_c&&J_d&&(J_a=J_ja.vertexDeclaration),J_a},J_o(0,J_a,"mesh",function(){return this._mesh}),J_v._attrReg=new RegExp("(\\w+)|([:,;])","g"),J_v}()),J_Wa=function(){function J_z(){}return J_n(J_z,"laya.d3.loaders.LoadModelV02"),J_z.parse=function(J_a,J_b,J_c,J_d,J_e,J_f){J_z._mesh=J_c,J_z._materials=J_d,J_z._subMeshes=J_e,J_z._materialMap=J_f,J_z._version=J_b,J_z._readData=J_a,J_z.READ_DATA(),J_z.READ_BLOCK(),J_z.READ_STRINGS();for(var J_g=0,J_h=J_z._BLOCK.count;J_g<J_h;J_g++){J_z._readData.pos=J_z._BLOCK.blockStarts[J_g];var J_i=J_z._readData.getUint16(),J_j=J_z._strings[J_i],J_k=J_z["READ_"+J_j];if(null==J_k)throw new Error("model file err,no this function:"+J_i+" "+J_j);J_k.call()}J_z._strings.length=0,J_z._readData=null,J_z._version=null,J_z._mesh=null,J_z._materials=null,J_z._subMeshes=null,J_z._materialMap=null},J_z._readString=function(){return J_z._strings[J_z._readData.getUint16()]},J_z.READ_DATA=function(){J_z._DATA.offset=J_z._readData.getUint32(),J_z._DATA.size=J_z._readData.getUint32()},J_z.READ_BLOCK=function(){for(var J_a=J_z._BLOCK.count=J_z._readData.getUint16(),J_b=J_z._BLOCK.blockStarts=[],J_c=J_z._BLOCK.blockLengths=[],J_d=0;J_d<J_a;J_d++)J_b.push(J_z._readData.getUint32()),J_c.push(J_z._readData.getUint32())},J_z.READ_STRINGS=function(){var J_a=J_z._readData.getUint32(),J_b=J_z._readData.getUint16(),J_c=J_z._readData.pos;J_z._readData.pos=J_a+J_z._DATA.offset;for(var J_d=0;J_d<J_b;J_d++)J_z._strings[J_d]=J_z._readData.readUTFString();J_z._readData.pos=J_c},J_z.READ_MATERIAL=function(){J_z._readString(),J_z._readString();var J_a=J_z._readString();return""!==J_a&&J_z._materials.push(J_r.getRes(J_z._materialMap[J_a])),!0},J_z.READ_MESH=function(){J_z._readString();var J_a,J_b=J_z._readData.__getBuffer(),J_c=0,J_d=J_z._readData.getInt16(),J_e=J_z._DATA.offset;for(J_c=0;J_c<J_d;J_c++){var J_f=J_e+J_z._readData.getUint32(),J_g=J_z._readData.getUint32(),J_h=new Float32Array(J_b.slice(J_f,J_f+J_g)),J_i=J_z._readString().match(J_z._attrReg),J_j=J_z._getVertexDeclaration(J_i),J_k=J_Ob.create(J_j,4*J_h.length/J_j.vertexStride,35044,!0);J_k.setData(J_h),J_z._mesh._vertexBuffers.push(J_k)}var J_l=J_e+J_z._readData.getUint32(),J_m=J_z._readData.getUint32(),J_n=new Uint16Array(J_b.slice(J_l,J_l+J_m)),J_o=J_Nb.create("ushort",J_m/2,35044,!0);J_o.setData(J_n),J_z._mesh._indexBuffer=J_o;var J_p=J_z._mesh._boneNames=[],J_q=J_z._readData.getUint16();for(J_p.length=J_q,J_c=0;J_c<J_q;J_c++)J_p[J_c]=J_z._strings[J_z._readData.getUint16()];var J_r=J_z._readData.getUint32(),J_u=J_z._readData.getUint32(),J_v=(new Float32Array(J_b.slice(J_e+J_r,J_e+J_r+J_u)),J_z._readData.getUint32()),J_w=J_z._readData.getUint32(),J_x=new Float32Array(J_b.slice(J_e+J_v,J_e+J_v+J_w));for(J_z._mesh._inverseBindPoses=[],J_c=0,J_a=J_x.length;J_c<J_a;J_c+=16){var J_y=new J_ab(J_x[J_c+0],J_x[J_c+1],J_x[J_c+2],J_x[J_c+3],J_x[J_c+4],J_x[J_c+5],J_x[J_c+6],J_x[J_c+7],J_x[J_c+8],J_x[J_c+9],J_x[J_c+10],J_x[J_c+11],J_x[J_c+12],J_x[J_c+13],J_x[J_c+14],J_x[J_c+15]);J_z._mesh._inverseBindPoses.push(J_y)}return J_z._mesh._skinnedDatas=new Float32Array(16*J_x.length),!0},J_z.READ_SUBMESH=function(){var J_a=J_z._readData.__getBuffer(),J_b=new J_jb(J_z._mesh),J_c=J_z._readData.getInt16(),J_d=J_z._readData.getUint32(),J_e=J_z._readData.getUint32();J_b._vertexBuffer=J_z._mesh._vertexBuffers[J_c],J_b._vertexStart=J_d,J_b._vertexCount=J_e;var J_f=J_z._readData.getUint32(),J_g=J_z._readData.getUint32(),J_h=J_z._mesh._indexBuffer;J_b._indexBuffer=J_h,J_b._indexStart=J_f,J_b._indexCount=J_g,J_b._indices=new Uint16Array(J_h.getData().buffer,2*J_f,J_g);var J_i=J_z._DATA.offset,J_j=J_b._subIndexBufferStart,J_k=J_b._subIndexBufferCount,J_l=J_b._boneIndicesList,J_m=J_z._readData.getUint16();J_j.length=J_m,J_k.length=J_m,J_l.length=J_m;for(var J_n=0;J_n<J_m;J_n++){J_j[J_n]=J_z._readData.getUint32(),J_k[J_n]=J_z._readData.getUint32();var J_o=J_z._readData.getUint32(),J_p=J_z._readData.getUint32();J_b._boneIndicesList[J_n]=new Uint8Array(J_a.slice(J_i+J_o,J_i+J_o+J_p))}return J_z._subMeshes.push(J_b),!0},J_z._getVertexDeclaration=function(J_a){for(var J_b,J_c=!1,J_d=!1,J_e=!1,J_f=!1,J_g=!1,J_h=!1,J_i=!1,J_j=!1,J_k=!1,J_l=0;J_l<J_a.length;J_l++)switch(J_a[J_l]){case"POSITION":J_c=!0;break;case"NORMAL":J_d=!0;break;case"COLOR":J_e=!0;break;case"UV":J_f=!0;break;case"UV1":J_g=!0;break;case"BLENDWEIGHT":J_i=!0;break;case"BLENDINDICES":J_j=!0;break;case"TANGENT":J_h=!0;break;case"BINORMAL":J_k=!0}return J_c&&J_d&&J_e&&J_f&&J_g&&J_i&&J_j&&J_h?J_b=J_va.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_g&&J_i&&J_j?J_b=J_ra.vertexDeclaration:J_c&&J_d&&J_f&&J_g&&J_i&&J_j&&J_h?J_b=J_Ja.vertexDeclaration:J_c&&J_d&&J_f&&J_g&&J_i&&J_j?J_b=J_Ha.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_i&&J_j&&J_h?J_b=J_Aa.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_i&&J_j?J_b=J_ya.vertexDeclaration:J_c&&J_d&&J_f&&J_i&&J_j&&J_h?J_b=J_Oa.vertexDeclaration:J_c&&J_d&&J_f&&J_i&&J_j?J_b=J_Ma.vertexDeclaration:J_c&&J_d&&J_e&&J_i&&J_j&&J_h?J_b=J_ma.vertexDeclaration:J_c&&J_d&&J_e&&J_i&&J_j?J_b=J_ka.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_g&&J_h?J_b=J_xa.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_g?J_b=J_qa.vertexDeclaration:J_c&&J_d&&J_f&&J_g&&J_h?J_b=J_La.vertexDeclaration:J_c&&J_d&&J_f&&J_g?J_b=J_Ga.vertexDeclaration:J_c&&J_d&&J_e&&J_f&&J_h?J_b=J_Ca.vertexDeclaration:J_c&&J_d&&J_f&&J_h&&J_k?J_b=J_Ra.vertexDeclaration:J_c&&J_d&&J_e&&J_f?J_b=J_pa.vertexDeclaration:J_c&&J_d&&J_f&&J_h?J_b=J_Qa.vertexDeclaration:J_c&&J_d&&J_f?J_b=J_Fa.vertexDeclaration:J_c&&J_d&&J_e&&J_h?J_b=J_oa.vertexDeclaration:J_c&&J_d&&J_e&&(J_b=J_ja.vertexDeclaration),J_b},J_z._attrReg=new RegExp("(\\w+)|([:,;])","g"),J_z._strings=[],J_z._readData=null,J_z._version=null,J_z._mesh=null,J_z._materials=null,J_z._subMeshes=null,J_z._materialMap=null,J_l(J_z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J_z}(),J_Xa=function(){function J_y(){}return J_n(J_y,"laya.d3.loaders.LoadModelV03"),J_y.parse=function(J_a,J_b,J_c,J_d,J_e){J_y._mesh=J_c,J_y._subMeshes=J_d,J_y._materialMap=J_e,J_y._version=J_b,J_y._readData=J_a,J_y.READ_DATA(),J_y.READ_BLOCK(),J_y.READ_STRINGS();for(var J_f=0,J_g=J_y._BLOCK.count;J_f<J_g;J_f++){J_y._readData.pos=J_y._BLOCK.blockStarts[J_f];var J_h=J_y._readData.getUint16(),J_i=J_y._strings[J_h],J_j=J_y["READ_"+J_i];if(null==J_j)throw new Error("model file err,no this function:"+J_h+" "+J_i);J_j.call()}J_y._strings.length=0,J_y._readData=null,J_y._version=null,J_y._mesh=null,J_y._subMeshes=null,J_y._materialMap=null},J_y._readString=function(){return J_y._strings[J_y._readData.getUint16()]},J_y.READ_DATA=function(){J_y._DATA.offset=J_y._readData.getUint32(),J_y._DATA.size=J_y._readData.getUint32()},J_y.READ_BLOCK=function(){for(var J_a=J_y._BLOCK.count=J_y._readData.getUint16(),J_b=J_y._BLOCK.blockStarts=[],J_c=J_y._BLOCK.blockLengths=[],J_d=0;J_d<J_a;J_d++)J_b.push(J_y._readData.getUint32()),J_c.push(J_y._readData.getUint32())},J_y.READ_STRINGS=function(){var J_a=J_y._readData.getUint32(),J_b=J_y._readData.getUint16(),J_c=J_y._readData.pos;J_y._readData.pos=J_a+J_y._DATA.offset;for(var J_d=0;J_d<J_b;J_d++)J_y._strings[J_d]=J_y._readData.readUTFString();J_y._readData.pos=J_c},J_y.READ_MESH=function(){var J_a,J_b=J_y._readString(),J_c=J_y._readData.__getBuffer(),J_d=0,J_e=J_y._readData.getInt16(),J_f=J_y._DATA.offset;for(J_d=0;J_d<J_e;J_d++){var J_g,J_h=J_f+J_y._readData.getUint32(),J_i=J_y._readData.getUint32(),J_j=new Float32Array(J_c.slice(J_h,J_h+J_i)),J_k=J_y._readString();switch(J_y._version){case"LAYAMODEL:03":J_g=J_y._vertexDeclarationMap_Discard[J_k];break;case"LAYAMODEL:0301":J_g=J_y._vertexDeclarationMap[J_k];break;default:throw new Error("LoadModelV03: unknown version.")}if(!J_g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+J_y._version+"  bufferAttribute="+J_k+"  name="+J_b+"  url="+(J_y._mesh?J_y._mesh.url:"null"));var J_l=J_Ob.create(J_g,4*J_j.length/J_g.vertexStride,35044,!0,J_y._mesh._url+"_"+J_d);J_l.setData(J_j),J_y._mesh._vertexBuffers.push(J_l)}var J_m=J_f+J_y._readData.getUint32(),J_n=J_y._readData.getUint32(),J_o=new Uint16Array(J_c.slice(J_m,J_m+J_n)),J_p=J_Nb.create("ushort",J_n/2,35044,!0,J_y._mesh._url);J_p.setData(J_o),J_y._mesh._indexBuffer=J_p;var J_q=J_y._mesh._boneNames=[],J_r=J_y._readData.getUint16();for(J_q.length=J_r,J_d=0;J_d<J_r;J_d++)J_q[J_d]=J_y._strings[J_y._readData.getUint16()];J_y._readData.pos+=8;var J_u=J_y._readData.getUint32(),J_v=J_y._readData.getUint32(),J_w=new Float32Array(J_c.slice(J_f+J_u,J_f+J_u+J_v));for(J_y._mesh._inverseBindPoses=[],J_d=0,J_a=J_w.length;J_d<J_a;J_d+=16){var J_x=new J_ab(J_w[J_d+0],J_w[J_d+1],J_w[J_d+2],J_w[J_d+3],J_w[J_d+4],J_w[J_d+5],J_w[J_d+6],J_w[J_d+7],J_w[J_d+8],J_w[J_d+9],J_w[J_d+10],J_w[J_d+11],J_w[J_d+12],J_w[J_d+13],J_w[J_d+14],J_w[J_d+15]);J_y._mesh._inverseBindPoses.push(J_x)}return J_y._mesh._skinnedDatas=new Float32Array(16*J_w.length),!0},J_y.READ_SUBMESH=function(){var J_a=J_y._readData.__getBuffer(),J_b=new J_jb(J_y._mesh),J_c=J_y._readData.getInt16(),J_d=J_y._readData.getUint32(),J_e=J_y._readData.getUint32();J_b._vertexBuffer=J_y._mesh._vertexBuffers[J_c],J_b._vertexStart=J_d,J_b._vertexCount=J_e;var J_f=J_y._readData.getUint32(),J_g=J_y._readData.getUint32(),J_h=J_y._mesh._indexBuffer;J_b._indexBuffer=J_h,J_b._indexStart=J_f,J_b._indexCount=J_g,J_b._indices=new Uint16Array(J_h.getData().buffer,2*J_f,J_g);var J_i=J_y._DATA.offset,J_j=J_b._subIndexBufferStart,J_k=J_b._subIndexBufferCount,J_l=J_b._boneIndicesList,J_m=J_y._readData.getUint16();J_j.length=J_m,J_k.length=J_m,J_l.length=J_m;for(var J_n=0;J_n<J_m;J_n++){J_j[J_n]=J_y._readData.getUint32(),J_k[J_n]=J_y._readData.getUint32();var J_o=J_y._readData.getUint32(),J_p=J_y._readData.getUint32();J_l[J_n]=new Uint8Array(J_a.slice(J_i+J_o,J_i+J_o+J_p))}return J_y._subMeshes.push(J_b),!0},J_y._strings=[],J_y._readData=null,J_y._version=null,J_y._mesh=null,J_y._subMeshes=null,J_y._materialMap=null,J_l(J_y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J_va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":J_ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":J_Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J_Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":J_Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J_Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":J_ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J_Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":J_Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":J_ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":J_ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":J_xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":J_qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":J_La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":J_Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":J_Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":J_Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":J_pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":J_Qa.vertexDeclaration,"POSITION,NORMAL,UV":J_Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":J_oa.vertexDeclaration,"POSITION,NORMAL,COLOR":J_ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":J_Ea.vertexDeclaration,"POSITION,NORMAL":J_ia.vertexDeclaration,"POSITION,UV":J_Ua.vertexDeclaration,POSITION:J_ha.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J_ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":J_ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":J_Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J_Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":J_Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J_za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":J_ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J_Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":J_Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":J_la.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":J_ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":J_wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":J_qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":J_Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":J_Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":J_Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":J_Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":J_pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":J_Pa.vertexDeclaration,"POSITION,NORMAL,UV":J_Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":J_na.vertexDeclaration,"POSITION,NORMAL,COLOR":J_ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":J_Da.vertexDeclaration,"POSITION,NORMAL":J_ia.vertexDeclaration,"POSITION,UV":J_Ua.vertexDeclaration,POSITION:J_ha.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J_y}(),J_Ya=function(){function J_h(){}return J_n(J_h,"laya.d3.loaders.MeshReader"),J_h.read=function(J_a,J_b,J_c,J_d,J_e){var J_f=new J_y(J_a);J_f.pos=0;var J_g=J_f.readUTFString();switch(J_g){case"LAYAMODEL:01":case"LAYASKINANI:01":J_h._readVersion01(J_f,J_g,J_b,J_c,J_d,J_e);break;case"LAYAMODEL:02":J_Wa.parse(J_f,J_g,J_b,J_c,J_d,J_e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":J_Xa.parse(J_f,J_g,J_b,J_d,J_e);break;default:throw new Error("MeshReader: unknown mesh version.")}J_b._setSubMeshes(J_d)},J_h._readVersion01=function(J_a,J_b,J_c,J_d,J_e,J_f){new J_Va(J_a,J_b,J_c,J_d,J_e,J_f)},J_h}(),J_Za=function(){function J_a(J_a,J_b){this.min=null,this.max=null,this.min=J_a,this.max=J_b}J_n(J_a,"laya.d3.math.BoundBox");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.getCorners=function(J_a){J_a.length=8;var J_b=this.min.elements,J_c=this.max.elements,J_d=J_b[0],J_e=J_b[1],J_f=J_b[2],J_g=J_c[0],J_h=J_c[1],J_i=J_c[2];J_a[0]=new J_gb(J_d,J_h,J_i),J_a[1]=new J_gb(J_g,J_h,J_i),J_a[2]=new J_gb(J_g,J_e,J_i),J_a[3]=new J_gb(J_d,J_e,J_i),J_a[4]=new J_gb(J_d,J_h,J_f),J_a[5]=new J_gb(J_g,J_h,J_f),J_a[6]=new J_gb(J_g,J_e,J_f),J_a[7]=new J_gb(J_d,J_e,J_f)},J_b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},J_b.cloneTo=function(J_a){var J_b=J_a;this.min.cloneTo(J_b.min),this.max.cloneTo(J_b.max)},J_b.clone=function(){var J_a=new this.constructor(new J_gb,new J_gb);return this.cloneTo(J_a),J_a},J_a.createfromPoints=function(J_a,J_b){if(null==J_a)throw new Error("points");var J_c=J_b.min,J_d=J_b.max,J_e=J_c.elements;J_e[0]=Number.MAX_VALUE,J_e[1]=Number.MAX_VALUE,J_e[2]=Number.MAX_VALUE;var J_f=J_d.elements;J_f[0]=-Number.MAX_VALUE,J_f[1]=-Number.MAX_VALUE,J_f[2]=-Number.MAX_VALUE;for(var J_g=0,J_h=J_a.length;J_g<J_h;++J_g)J_gb.min(J_c,J_a[J_g],J_c),J_gb.max(J_d,J_a[J_g],J_d)},J_a.merge=function(J_a,J_b,J_c){J_gb.min(J_a.min,J_b.min,J_c.min),J_gb.max(J_a.max,J_b.max,J_c.max)},J_a}(),J_$a=function(){function J_j(J_a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=J_a,this._near=new J_bb(new J_gb),this._far=new J_bb(new J_gb),this._left=new J_bb(new J_gb),this._right=new J_bb(new J_gb),this._top=new J_bb(new J_gb),this._bottom=new J_bb(new J_gb),J_j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}J_n(J_j,"laya.d3.math.BoundFrustum");var J_a=J_j.prototype;return J_a.equalsBoundFrustum=function(J_a){return this._matrix.equalsOtherMatrix(J_a.matrix)},J_a.equalsObj=function(J_a){if(J_a instanceof laya.d3.math.BoundFrustum){var J_b=J_a;return this.equalsBoundFrustum(J_b)}return!1},J_a.getPlane=function(J_a){switch(J_a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},J_a.getCorners=function(J_a){J_j._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(J_a[0]),J_j._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(J_a[1]),J_j._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(J_a[2]),J_j._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(J_a[3]),J_j._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(J_a[4]),J_j._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(J_a[5]),J_j._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(J_a[6]),J_j._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(J_a[7])},J_a.containsPoint=function(J_a){for(var J_b=J_bb.PlaneIntersectionType_Front,J_c=J_bb.PlaneIntersectionType_Front,J_d=0;J_d<6;J_d++){switch(J_d){case 0:J_c=Collision.intersectsPlaneAndPoint(this._near,J_a);break;case 1:J_c=Collision.intersectsPlaneAndPoint(this._far,J_a);break;case 2:J_c=Collision.intersectsPlaneAndPoint(this._left,J_a);break;case 3:J_c=Collision.intersectsPlaneAndPoint(this._right,J_a);break;case 4:J_c=Collision.intersectsPlaneAndPoint(this._top,J_a);break;case 5:J_c=Collision.intersectsPlaneAndPoint(this._bottom,J_a)}switch(J_c){case J_bb.PlaneIntersectionType_Back:return 0;case J_bb.PlaneIntersectionType_Intersecting:J_b=J_bb.PlaneIntersectionType_Intersecting}}switch(J_b){case J_bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},J_a.containsBoundBox=function(J_a){for(var J_b,J_c=J_j._tempV30,J_d=J_j._tempV31,J_e=1,J_f=0;J_f<6;J_f++){if(J_b=this.getPlane(J_f),this._getBoxToPlanePVertexNVertex(J_a,J_b.normal,J_c,J_d),Collision.intersectsPlaneAndPoint(J_b,J_c)===J_bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(J_b,J_d)===J_bb.PlaneIntersectionType_Back&&(J_e=2)}return J_e},J_a.containsBoundSphere=function(J_a){for(var J_b=J_bb.PlaneIntersectionType_Front,J_c=J_bb.PlaneIntersectionType_Front,J_d=0;J_d<6;J_d++){switch(J_d){case 0:J_c=Collision.intersectsPlaneAndSphere(this._near,J_a);break;case 1:J_c=Collision.intersectsPlaneAndSphere(this._far,J_a);break;case 2:J_c=Collision.intersectsPlaneAndSphere(this._left,J_a);break;case 3:J_c=Collision.intersectsPlaneAndSphere(this._right,J_a);break;case 4:J_c=Collision.intersectsPlaneAndSphere(this._top,J_a);break;case 5:J_c=Collision.intersectsPlaneAndSphere(this._bottom,J_a)}switch(J_c){case J_bb.PlaneIntersectionType_Back:return 0;case J_bb.PlaneIntersectionType_Intersecting:J_b=J_bb.PlaneIntersectionType_Intersecting}}switch(J_b){case J_bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},J_a._getBoxToPlanePVertexNVertex=function(J_a,J_b,J_c,J_d){var J_e=J_a.min,J_f=J_e.elements,J_g=J_a.max,J_h=J_g.elements,J_i=J_b.elements,J_j=J_i[0],J_k=J_i[1],J_l=J_i[2];J_e.cloneTo(J_c);var J_m=J_c.elements;0<=J_j&&(J_m[0]=J_h[0]),0<=J_k&&(J_m[1]=J_h[1]),0<=J_l&&(J_m[2]=J_h[2]),J_g.cloneTo(J_d);var J_n=J_d.elements;0<=J_j&&(J_n[0]=J_f[0]),0<=J_k&&(J_n[1]=J_f[1]),0<=J_l&&(J_n[2]=J_f[2])},J_o(0,J_a,"top",function(){return this._top}),J_o(0,J_a,"matrix",function(){return this._matrix},function(J_a){this._matrix=J_a,J_j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),J_o(0,J_a,"near",function(){return this._near}),J_o(0,J_a,"far",function(){return this._far}),J_o(0,J_a,"left",function(){return this._left}),J_o(0,J_a,"right",function(){return this._right}),J_o(0,J_a,"bottom",function(){return this._bottom}),J_j._getPlanesFromMatrix=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h=J_a.elements,J_i=J_h[0],J_j=J_h[1],J_k=J_h[2],J_l=J_h[3],J_m=J_h[4],J_n=J_h[5],J_o=J_h[6],J_p=J_h[7],J_q=J_h[8],J_r=J_h[9],J_u=J_h[10],J_v=J_h[11],J_w=J_h[12],J_x=J_h[13],J_y=J_h[14],J_z=J_h[15],J_A=J_b.normal.elements;J_A[0]=J_l+J_k,J_A[1]=J_p+J_o,J_A[2]=J_v+J_u,J_b.distance=J_z+J_y,J_b.normalize();var J_B=J_c.normal.elements;J_B[0]=J_l-J_k,J_B[1]=J_p-J_o,J_B[2]=J_v-J_u,J_c.distance=J_z-J_y,J_c.normalize();var J_C=J_d.normal.elements;J_C[0]=J_l+J_i,J_C[1]=J_p+J_m,J_C[2]=J_v+J_q,J_d.distance=J_z+J_w,J_d.normalize();var J_D=J_e.normal.elements;J_D[0]=J_l-J_i,J_D[1]=J_p-J_m,J_D[2]=J_v-J_q,J_e.distance=J_z-J_w,J_e.normalize();var J_E=J_f.normal.elements;J_E[0]=J_l-J_j,J_E[1]=J_p-J_n,J_E[2]=J_v-J_r,J_f.distance=J_z-J_x,J_f.normalize();var J_F=J_g.normal.elements;J_F[0]=J_l+J_j,J_F[1]=J_p+J_n,J_F[2]=J_v+J_r,J_g.distance=J_z+J_x,J_g.normalize()},J_j._get3PlaneInterPoint=function(J_a,J_b,J_c){var J_d=J_a.normal,J_e=J_b.normal,J_f=J_c.normal;J_gb.cross(J_e,J_f,J_j._tempV30),J_gb.cross(J_f,J_d,J_j._tempV31),J_gb.cross(J_d,J_e,J_j._tempV32);var J_g=J_gb.dot(J_d,J_j._tempV30),J_h=J_gb.dot(J_e,J_j._tempV31),J_i=J_gb.dot(J_f,J_j._tempV32);return J_gb.scale(J_j._tempV30,-J_a.distance/J_g,J_j._tempV33),J_gb.scale(J_j._tempV31,-J_b.distance/J_h,J_j._tempV34),J_gb.scale(J_j._tempV32,-J_c.distance/J_i,J_j._tempV35),J_gb.add(J_j._tempV33,J_j._tempV34,J_j._tempV36),J_gb.add(J_j._tempV35,J_j._tempV36,J_j._tempV37),J_j._tempV37},J_l(J_j,["_tempV30",function(){return this._tempV30=new J_gb},"_tempV31",function(){return this._tempV31=new J_gb},"_tempV32",function(){return this._tempV32=new J_gb},"_tempV33",function(){return this._tempV33=new J_gb},"_tempV34",function(){return this._tempV34=new J_gb},"_tempV35",function(){return this._tempV35=new J_gb},"_tempV36",function(){return this._tempV36=new J_gb},"_tempV37",function(){return this._tempV37=new J_gb}]),J_j}(),J__a=function(){function J_k(J_a,J_b){this.center=null,this.radius=NaN,this.center=J_a,this.radius=J_b}J_n(J_k,"laya.d3.math.BoundSphere");var J_a=J_k.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.toDefault=function(){this.center.toDefault(),this.radius=0},J_a.intersectsRayDistance=function(J_a){return Collision.intersectsRayAndSphereRD(J_a,this)},J_a.intersectsRayPoint=function(J_a,J_b){return Collision.intersectsRayAndSphereRP(J_a,this,J_b)},J_a.cloneTo=function(J_a){var J_b=J_a;this.center.cloneTo(J_b.center),J_b.radius=this.radius},J_a.clone=function(){var J_a=new this.constructor(new J_gb,new J_gb);return this.cloneTo(J_a),J_a},J_k.createFromSubPoints=function(J_a,J_b,J_c,J_d){if(null==J_a)throw new Error("points");if(J_b<0||J_b>=J_a.length)throw new Error("start"+J_b+"Must be in the range [0, "+(J_a.length-1)+"]");if(J_c<0||J_b+J_c>J_a.length)throw new Error("count"+J_c+"Must be in the range <= "+J_a.length+"}");var J_e=J_b+J_c,J_f=J_k._tempVector3;J_f.elements[0]=0,J_f.elements[1]=0,J_f.elements[2]=0;for(var J_g=J_b;J_g<J_e;++J_g)J_gb.add(J_a[J_g],J_f,J_f);var J_h=J_d.center;J_gb.scale(J_f,1/J_c,J_h);var J_i=0;for(J_g=J_b;J_g<J_e;++J_g){var J_j=J_gb.distanceSquared(J_h,J_a[J_g]);J_i<J_j&&(J_i=J_j)}J_d.radius=Math.sqrt(J_i)},J_k.createfromPoints=function(J_a,J_b){if(null==J_a)throw new Error("points");J_k.createFromSubPoints(J_a,0,J_a.length,J_b)},J_l(J_k,["_tempVector3",function(){return this._tempVector3=new J_gb}]),J_k}(),J_sa=(function(){function J_a(){}J_n(J_a,"laya.d3.math.ContainmentType"),J_a.Disjoint=0,J_a.Contains=1,J_a.Intersects=2}(),function(){function J_c(){}return J_n(J_c,"laya.d3.math.MathUtils3D"),J_c.isZero=function(J_a){return Math.abs(J_a)<J_c.zeroTolerance},J_c.nearEqual=function(J_a,J_b){return!!J_c.isZero(J_a-J_b)},J_c.fastInvSqrt=function(J_a){return J_c.isZero(J_a)?J_a:1/Math.sqrt(J_a)},J_l(J_c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),J_c}()),J_ta=function(){function J_i(){var J_a=this.elements=new Float32Array(9);J_a[0]=1,J_a[1]=0,J_a[2]=0,J_a[3]=0,J_a[4]=1,J_a[5]=0,J_a[6]=0,J_a[7]=0,J_a[8]=1}J_n(J_i,"laya.d3.math.Matrix3x3");var J_a=J_i.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.determinant=function(){var J_a=this.elements,J_b=J_a[0],J_c=J_a[1],J_d=J_a[2],J_e=J_a[3],J_f=J_a[4],J_g=J_a[5],J_h=J_a[6],J_i=J_a[7],J_j=J_a[8];return J_b*(J_j*J_f-J_g*J_i)+J_c*(-J_j*J_e+J_g*J_h)+J_d*(J_i*J_e-J_f*J_h)},J_a.translate=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements,J_e=J_a.elements,J_f=J_d[0],J_g=J_d[1],J_h=J_d[2],J_i=J_d[3],J_j=J_d[4],J_k=J_d[5],J_l=J_d[6],J_m=J_d[7],J_n=J_d[8],J_o=J_e[0],J_p=J_e[1];J_c[0]=J_f,J_c[1]=J_g,J_c[2]=J_h,J_c[3]=J_i,J_c[4]=J_j,J_c[5]=J_k,J_c[6]=J_o*J_f+J_p*J_i+J_l,J_c[7]=J_o*J_g+J_p*J_j+J_m,J_c[8]=J_o*J_h+J_p*J_k+J_n},J_a.rotate=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=J_d[4],J_j=J_d[5],J_k=J_d[6],J_l=J_d[7],J_m=J_d[8],J_n=Math.sin(J_a),J_o=Math.cos(J_a);J_c[0]=J_o*J_e+J_n*J_h,J_c[1]=J_o*J_f+J_n*J_i,J_c[2]=J_o*J_g+J_n*J_j,J_c[3]=J_o*J_h-J_n*J_e,J_c[4]=J_o*J_i-J_n*J_f,J_c[5]=J_o*J_j-J_n*J_g,J_c[6]=J_k,J_c[7]=J_l,J_c[8]=J_m},J_a.scale=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements,J_e=J_a.elements,J_f=J_e[0],J_g=J_e[1];J_c[0]=J_f*J_d[0],J_c[1]=J_f*J_d[1],J_c[2]=J_f*J_d[2],J_c[3]=J_g*J_d[3],J_c[4]=J_g*J_d[4],J_c[5]=J_g*J_d[5],J_c[6]=J_d[6],J_c[7]=J_d[7],J_c[8]=J_d[8]},J_a.invert=function(J_a){var J_b=J_a.elements,J_c=this.elements,J_d=J_c[0],J_e=J_c[1],J_f=J_c[2],J_g=J_c[3],J_h=J_c[4],J_i=J_c[5],J_j=J_c[6],J_k=J_c[7],J_l=J_c[8],J_m=J_l*J_h-J_i*J_k,J_n=-J_l*J_g+J_i*J_j,J_o=J_k*J_g-J_h*J_j,J_p=J_d*J_m+J_e*J_n+J_f*J_o;J_p||(J_a=null),J_p=1/J_p,J_b[0]=J_m*J_p,J_b[1]=(-J_l*J_e+J_f*J_k)*J_p,J_b[2]=(J_i*J_e-J_f*J_h)*J_p,J_b[3]=J_n*J_p,J_b[4]=(J_l*J_d-J_f*J_j)*J_p,J_b[5]=(-J_i*J_d+J_f*J_g)*J_p,J_b[6]=J_o*J_p,J_b[7]=(-J_k*J_d+J_e*J_j)*J_p,J_b[8]=(J_h*J_d-J_e*J_g)*J_p},J_a.transpose=function(J_a){var J_b=J_a.elements,J_c=this.elements;if(J_a===this){var J_d=J_c[1],J_e=J_c[2],J_f=J_c[5];J_b[1]=J_c[3],J_b[2]=J_c[6],J_b[3]=J_d,J_b[5]=J_c[7],J_b[6]=J_e,J_b[7]=J_f}else J_b[0]=J_c[0],J_b[1]=J_c[3],J_b[2]=J_c[6],J_b[3]=J_c[1],J_b[4]=J_c[4],J_b[5]=J_c[7],J_b[6]=J_c[2],J_b[7]=J_c[5],J_b[8]=J_c[8]},J_a.identity=function(){var J_a=this.elements;J_a[0]=1,J_a[1]=0,J_a[2]=0,J_a[3]=0,J_a[4]=1,J_a[5]=0,J_a[6]=0,J_a[7]=0,J_a[8]=1},J_a.cloneTo=function(J_a){var J_b,J_c,J_d;if((J_c=this.elements)!==(J_d=J_a.elements))for(J_b=0;J_b<9;++J_b)J_d[J_b]=J_c[J_b]},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_i.createFromTranslation=function(J_a,J_b){J_b.elements;var J_c=J_a.elements;J_b[0]=1,J_b[1]=0,J_b[2]=0,J_b[3]=0,J_b[4]=1,J_b[5]=0,J_b[6]=J_c[0],J_b[7]=J_c[1],J_b[8]=1},J_i.createFromRotation=function(J_a,J_b){var J_c=J_b.elements,J_d=Math.sin(J_a),J_e=Math.cos(J_a);J_c[0]=J_e,J_c[1]=J_d,J_c[2]=0,J_c[3]=-J_d,J_c[4]=J_e,J_c[5]=0,J_c[6]=0,J_c[7]=0,J_c[8]=1},J_i.createFromScaling=function(J_a,J_b){var J_c=J_b.elements,J_d=J_a.elements;J_c[0]=J_d[0],J_c[1]=0,J_c[2]=0,J_c[3]=0,J_c[4]=J_d[1],J_c[5]=0,J_c[6]=0,J_c[7]=0,J_c[8]=1},J_i.createFromMatrix4x4=function(J_a,J_b){J_b[0]=J_a[0],J_b[1]=J_a[1],J_b[2]=J_a[2],J_b[3]=J_a[4],J_b[4]=J_a[5],J_b[5]=J_a[6],J_b[6]=J_a[8],J_b[7]=J_a[9],J_b[8]=J_a[10]},J_i.multiply=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements,J_g=J_e[0],J_h=J_e[1],J_i=J_e[2],J_j=J_e[3],J_k=J_e[4],J_l=J_e[5],J_m=J_e[6],J_n=J_e[7],J_o=J_e[8],J_p=J_f[0],J_q=J_f[1],J_r=J_f[2],J_u=J_f[3],J_v=J_f[4],J_w=J_f[5],J_x=J_f[6],J_y=J_f[7],J_z=J_f[8];J_d[0]=J_p*J_g+J_q*J_j+J_r*J_m,J_d[1]=J_p*J_h+J_q*J_k+J_r*J_n,J_d[2]=J_p*J_i+J_q*J_l+J_r*J_o,J_d[3]=J_u*J_g+J_v*J_j+J_w*J_m,J_d[4]=J_u*J_h+J_v*J_k+J_w*J_n,J_d[5]=J_u*J_i+J_v*J_l+J_w*J_o,J_d[6]=J_x*J_g+J_y*J_j+J_z*J_m,J_d[7]=J_x*J_h+J_y*J_k+J_z*J_n,J_d[8]=J_x*J_i+J_y*J_l+J_z*J_o},J_i.lookAt=function(J_a,J_b,J_c,J_d){J_gb.subtract(J_a,J_b,J_i._tempV30),J_gb.normalize(J_i._tempV30,J_i._tempV30),J_gb.cross(J_c,J_i._tempV30,J_i._tempV31),J_gb.normalize(J_i._tempV31,J_i._tempV31),J_gb.cross(J_i._tempV30,J_i._tempV31,J_i._tempV32);var J_e=J_i._tempV30.elements,J_f=J_i._tempV31.elements,J_g=J_i._tempV32.elements,J_h=J_d.elements;J_h[0]=J_f[0],J_h[3]=J_f[1],J_h[6]=J_f[2],J_h[1]=J_g[0],J_h[4]=J_g[1],J_h[7]=J_g[2],J_h[2]=J_e[0],J_h[5]=J_e[1],J_h[8]=J_e[2]},J_i.DEFAULT=new J_i,J_l(J_i,["_tempV30",function(){return this._tempV30=new J_gb},"_tempV31",function(){return this._tempV31=new J_gb},"_tempV32",function(){return this._tempV32=new J_gb}]),J_i}(),J_ab=function(){function J_B(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l,J_m,J_n,J_o,J_p){void 0===J_a&&(J_a=1),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=1),void 0===J_g&&(J_g=0),void 0===J_h&&(J_h=0),void 0===J_i&&(J_i=0),void 0===J_j&&(J_j=0),void 0===J_k&&(J_k=1),void 0===J_l&&(J_l=0),void 0===J_m&&(J_m=0),void 0===J_n&&(J_n=0),void 0===J_o&&(J_o=0),void 0===J_p&&(J_p=1);var J_q=this.elements=new Float32Array(16);J_q[0]=J_a,J_q[1]=J_b,J_q[2]=J_c,J_q[3]=J_d,J_q[4]=J_e,J_q[5]=J_f,J_q[6]=J_g,J_q[7]=J_h,J_q[8]=J_i,J_q[9]=J_j,J_q[10]=J_k,J_q[11]=J_l,J_q[12]=J_m,J_q[13]=J_n,J_q[14]=J_o,J_q[15]=J_p}J_n(J_B,"laya.d3.math.Matrix4x4");var J_a=J_B.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.getElementByRowColumn=function(J_a,J_b){if(J_a<0||3<J_a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(J_b<0||3<J_b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*J_a+J_b]},J_a.setElementByRowColumn=function(J_a,J_b,J_c){if(J_a<0||3<J_a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(J_b<0||3<J_b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*J_a+J_b]=J_c},J_a.equalsOtherMatrix=function(J_a){var J_b=this.elements,J_c=J_a.elements;return J_sa.nearEqual(J_b[0],J_c[0])&&J_sa.nearEqual(J_b[1],J_c[1])&&J_sa.nearEqual(J_b[2],J_c[2])&&J_sa.nearEqual(J_b[3],J_c[3])&&J_sa.nearEqual(J_b[4],J_c[4])&&J_sa.nearEqual(J_b[5],J_c[5])&&J_sa.nearEqual(J_b[6],J_c[6])&&J_sa.nearEqual(J_b[7],J_c[7])&&J_sa.nearEqual(J_b[8],J_c[8])&&J_sa.nearEqual(J_b[9],J_c[9])&&J_sa.nearEqual(J_b[10],J_c[10])&&J_sa.nearEqual(J_b[11],J_c[11])&&J_sa.nearEqual(J_b[12],J_c[12])&&J_sa.nearEqual(J_b[13],J_c[13])&&J_sa.nearEqual(J_b[14],J_c[14])&&J_sa.nearEqual(J_b[15],J_c[15])},J_a.decomposeTransRotScale=function(J_a,J_b,J_c){var J_d=J_B._tempMatrix4x4;return this.decomposeTransRotMatScale(J_a,J_d,J_c)?(J_cb.createFromMatrix4x4(J_d,J_b),!0):(J_b.identity(),!1)},J_a.decomposeTransRotMatScale=function(J_a,J_b,J_c){var J_d=this.elements,J_e=J_a.elements,J_f=J_b.elements,J_g=J_c.elements;J_e[0]=J_d[12],J_e[1]=J_d[13],J_e[2]=J_d[14];var J_h=J_d[0],J_i=J_d[1],J_j=J_d[2],J_k=J_d[4],J_l=J_d[5],J_m=J_d[6],J_n=J_d[8],J_o=J_d[9],J_p=J_d[10],J_q=J_g[0]=Math.sqrt(J_h*J_h+J_i*J_i+J_j*J_j),J_r=J_g[1]=Math.sqrt(J_k*J_k+J_l*J_l+J_m*J_m),J_u=J_g[2]=Math.sqrt(J_n*J_n+J_o*J_o+J_p*J_p);if(J_sa.isZero(J_q)||J_sa.isZero(J_r)||J_sa.isZero(J_u))return J_f[1]=J_f[2]=J_f[3]=J_f[4]=J_f[6]=J_f[7]=J_f[8]=J_f[9]=J_f[11]=J_f[12]=J_f[13]=J_f[14]=0,J_f[0]=J_f[5]=J_f[10]=J_f[15]=1,!1;var J_v=J_B._tempVector0,J_w=J_v.elements;J_w[0]=J_n/J_u,J_w[1]=J_o/J_u,J_w[2]=J_p/J_u;var J_x=J_B._tempVector1,J_y=J_x.elements;J_y[0]=J_h/J_q,J_y[1]=J_i/J_q,J_y[2]=J_j/J_q;var J_z=J_B._tempVector2;J_gb.cross(J_v,J_x,J_z);var J_A=J_B._tempVector1;return J_gb.cross(J_z,J_v,J_A),J_f[3]=J_f[7]=J_f[11]=J_f[12]=J_f[13]=J_f[14]=0,J_f[15]=1,J_f[0]=J_A.x,J_f[1]=J_A.y,J_f[2]=J_A.z,J_f[4]=J_z.x,J_f[5]=J_z.y,J_f[6]=J_z.z,J_f[8]=J_v.x,J_f[9]=J_v.y,J_f[10]=J_v.z,J_f[0]*J_h+J_f[1]*J_i+J_f[2]*J_j<0&&(J_g[0]=-J_q),J_f[4]*J_k+J_f[5]*J_l+J_f[6]*J_m<0&&(J_g[1]=-J_r),J_f[8]*J_n+J_f[9]*J_o+J_f[10]*J_p<0&&(J_g[2]=-J_u),!0},J_a.decomposeYawPitchRoll=function(J_a){var J_b=J_a.elements,J_c=Math.asin(-this.elements[9]);J_b[1]=J_c,Math.cos(J_c)>J_sa.zeroTolerance?(J_b[2]=Math.atan2(this.elements[1],this.elements[5]),J_b[0]=Math.atan2(this.elements[8],this.elements[10])):(J_b[2]=Math.atan2(-this.elements[4],this.elements[0]),J_b[0]=0)},J_a.normalize=function(){var J_a=this.elements,J_b=J_a[0],J_c=J_a[1],J_d=J_a[2],J_e=Math.sqrt(J_b*J_b+J_c*J_c+J_d*J_d);if(!J_e)return J_a[0]=0,J_a[1]=0,void(J_a[2]=0);1!=J_e&&(J_e=1/J_e,J_a[0]=J_b*J_e,J_a[1]=J_c*J_e,J_a[2]=J_d*J_e)},J_a.transpose=function(){var J_a,J_b;return J_b=(J_a=this.elements)[1],J_a[1]=J_a[4],J_a[4]=J_b,J_b=J_a[2],J_a[2]=J_a[8],J_a[8]=J_b,J_b=J_a[3],J_a[3]=J_a[12],J_a[12]=J_b,J_b=J_a[6],J_a[6]=J_a[9],J_a[9]=J_b,J_b=J_a[7],J_a[7]=J_a[13],J_a[13]=J_b,J_b=J_a[11],J_a[11]=J_a[14],J_a[14]=J_b,this},J_a.invert=function(J_a){var J_b=this.elements,J_c=J_a.elements,J_d=J_b[0],J_e=J_b[1],J_f=J_b[2],J_g=J_b[3],J_h=J_b[4],J_i=J_b[5],J_j=J_b[6],J_k=J_b[7],J_l=J_b[8],J_m=J_b[9],J_n=J_b[10],J_o=J_b[11],J_p=J_b[12],J_q=J_b[13],J_r=J_b[14],J_u=J_b[15],J_v=J_d*J_i-J_e*J_h,J_w=J_d*J_j-J_f*J_h,J_x=J_d*J_k-J_g*J_h,J_y=J_e*J_j-J_f*J_i,J_z=J_e*J_k-J_g*J_i,J_A=J_f*J_k-J_g*J_j,J_B=J_l*J_q-J_m*J_p,J_C=J_l*J_r-J_n*J_p,J_D=J_l*J_u-J_o*J_p,J_E=J_m*J_r-J_n*J_q,J_F=J_m*J_u-J_o*J_q,J_G=J_n*J_u-J_o*J_r,J_H=J_v*J_G-J_w*J_F+J_x*J_E+J_y*J_D-J_z*J_C+J_A*J_B;0!==Math.abs(J_H)&&(J_H=1/J_H,J_c[0]=(J_i*J_G-J_j*J_F+J_k*J_E)*J_H,J_c[1]=(J_f*J_F-J_e*J_G-J_g*J_E)*J_H,J_c[2]=(J_q*J_A-J_r*J_z+J_u*J_y)*J_H,J_c[3]=(J_n*J_z-J_m*J_A-J_o*J_y)*J_H,J_c[4]=(J_j*J_D-J_h*J_G-J_k*J_C)*J_H,J_c[5]=(J_d*J_G-J_f*J_D+J_g*J_C)*J_H,J_c[6]=(J_r*J_x-J_p*J_A-J_u*J_w)*J_H,J_c[7]=(J_l*J_A-J_n*J_x+J_o*J_w)*J_H,J_c[8]=(J_h*J_F-J_i*J_D+J_k*J_B)*J_H,J_c[9]=(J_e*J_D-J_d*J_F-J_g*J_B)*J_H,J_c[10]=(J_p*J_z-J_q*J_x+J_u*J_v)*J_H,J_c[11]=(J_m*J_x-J_l*J_z-J_o*J_v)*J_H,J_c[12]=(J_i*J_C-J_h*J_E-J_j*J_B)*J_H,J_c[13]=(J_d*J_E-J_e*J_C+J_f*J_B)*J_H,J_c[14]=(J_q*J_w-J_p*J_y-J_r*J_v)*J_H,J_c[15]=(J_l*J_y-J_m*J_w+J_n*J_v)*J_H)},J_a.identity=function(){var J_a=this.elements;J_a[1]=J_a[2]=J_a[3]=J_a[4]=J_a[6]=J_a[7]=J_a[8]=J_a[9]=J_a[11]=J_a[12]=J_a[13]=J_a[14]=0,J_a[0]=J_a[5]=J_a[10]=J_a[15]=1},J_a.cloneTo=function(J_a){var J_b,J_c,J_d;if((J_c=this.elements)!==(J_d=J_a.elements))for(J_b=0;J_b<16;++J_b)J_d[J_b]=J_c[J_b]},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_a.getTranslationVector=function(J_a){var J_b=this.elements,J_c=J_a.elements;J_c[0]=J_b[12],J_c[1]=J_b[13],J_c[2]=J_b[14]},J_a.setTranslationVector=function(J_a){var J_b=this.elements,J_c=J_a.elements;J_b[12]=J_c[0],J_b[13]=J_c[1],J_b[14]=J_c[2]},J_a.getForward=function(J_a){var J_b=this.elements,J_c=J_a.elements;J_c[0]=-J_b[8],J_c[1]=-J_b[9],J_c[2]=-J_b[10]},J_a.setForward=function(J_a){var J_b=this.elements,J_c=J_a.elements;J_b[8]=-J_c[0],J_b[9]=-J_c[1],J_b[10]=-J_c[2]},J_B.createRotationX=function(J_a,J_b){var J_c=J_b.elements,J_d=Math.sin(J_a),J_e=Math.cos(J_a);J_c[1]=J_c[2]=J_c[3]=J_c[4]=J_c[7]=J_c[8]=J_c[11]=J_c[12]=J_c[13]=J_c[14]=0,J_c[0]=J_c[15]=1,J_c[5]=J_c[10]=J_e,J_c[6]=J_d,J_c[9]=-J_d},J_B.createRotationY=function(J_a,J_b){var J_c=J_b.elements,J_d=Math.sin(J_a),J_e=Math.cos(J_a);J_c[1]=J_c[3]=J_c[4]=J_c[6]=J_c[7]=J_c[9]=J_c[11]=J_c[12]=J_c[13]=J_c[14]=0,J_c[5]=J_c[15]=1,J_c[0]=J_c[10]=J_e,J_c[2]=-J_d,J_c[8]=J_d},J_B.createRotationZ=function(J_a,J_b){var J_c=J_b.elements,J_d=Math.sin(J_a),J_e=Math.cos(J_a);J_c[2]=J_c[3]=J_c[6]=J_c[7]=J_c[8]=J_c[9]=J_c[11]=J_c[12]=J_c[13]=J_c[14]=0,J_c[10]=J_c[15]=1,J_c[0]=J_c[5]=J_e,J_c[1]=J_d,J_c[4]=-J_d},J_B.createRotationYawPitchRoll=function(J_a,J_b,J_c,J_d){J_cb.createFromYawPitchRoll(J_a,J_b,J_c,J_B._tempQuaternion),J_B.createRotationQuaternion(J_B._tempQuaternion,J_d)},J_B.createRotationAxis=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=Math.cos(J_b),J_i=Math.sin(J_b),J_j=J_e*J_e,J_k=J_f*J_f,J_l=J_g*J_g,J_m=J_e*J_f,J_n=J_e*J_g,J_o=J_f*J_g,J_p=J_c.elements;J_p[3]=J_p[7]=J_p[11]=J_p[12]=J_p[13]=J_p[14]=0,J_p[15]=1,J_p[0]=J_j+J_h*(1-J_j),J_p[1]=J_m-J_h*J_m+J_i*J_g,J_p[2]=J_n-J_h*J_n-J_i*J_f,J_p[4]=J_m-J_h*J_m-J_i*J_g,J_p[5]=J_k+J_h*(1-J_k),J_p[6]=J_o-J_h*J_o+J_i*J_e,J_p[8]=J_n-J_h*J_n+J_i*J_f,J_p[9]=J_o-J_h*J_o-J_i*J_e,J_p[10]=J_l+J_h*(1-J_l)},J_B.createRotationQuaternion=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0],J_f=J_c[1],J_g=J_c[2],J_h=J_c[3],J_i=J_e*J_e,J_j=J_f*J_f,J_k=J_g*J_g,J_l=J_e*J_f,J_m=J_g*J_h,J_n=J_g*J_e,J_o=J_f*J_h,J_p=J_f*J_g,J_q=J_e*J_h;J_d[3]=J_d[7]=J_d[11]=J_d[12]=J_d[13]=J_d[14]=0,J_d[15]=1,J_d[0]=1-2*(J_j+J_k),J_d[1]=2*(J_l+J_m),J_d[2]=2*(J_n-J_o),J_d[4]=2*(J_l-J_m),J_d[5]=1-2*(J_k+J_i),J_d[6]=2*(J_p+J_q),J_d[8]=2*(J_n+J_o),J_d[9]=2*(J_p-J_q),J_d[10]=1-2*(J_j+J_i)},J_B.createTranslate=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;J_d[4]=J_d[8]=J_d[1]=J_d[9]=J_d[2]=J_d[6]=J_d[3]=J_d[7]=J_d[11]=0,J_d[0]=J_d[5]=J_d[10]=J_d[15]=1,J_d[12]=J_c[0],J_d[13]=J_c[1],J_d[14]=J_c[2]},J_B.createScaling=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;J_d[0]=J_c[0],J_d[5]=J_c[1],J_d[10]=J_c[2],J_d[1]=J_d[4]=J_d[8]=J_d[12]=J_d[9]=J_d[13]=J_d[2]=J_d[6]=J_d[14]=J_d[3]=J_d[7]=J_d[11]=0,J_d[15]=1},J_B.multiply=function(J_a,J_b,J_c){var J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k;for(J_e=J_c.elements,J_f=J_a.elements,J_e===(J_g=J_b.elements)&&(J_g=J_g.slice()),J_d=0;J_d<4;J_d++)J_h=J_f[J_d],J_i=J_f[J_d+4],J_j=J_f[J_d+8],J_k=J_f[J_d+12],J_e[J_d]=J_h*J_g[0]+J_i*J_g[1]+J_j*J_g[2]+J_k*J_g[3],J_e[J_d+4]=J_h*J_g[4]+J_i*J_g[5]+J_j*J_g[6]+J_k*J_g[7],J_e[J_d+8]=J_h*J_g[8]+J_i*J_g[9]+J_j*J_g[10]+J_k*J_g[11],J_e[J_d+12]=J_h*J_g[12]+J_i*J_g[13]+J_j*J_g[14]+J_k*J_g[15]},J_B.createFromQuaternion=function(J_a,J_b){var J_c=J_b.elements,J_d=J_a.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=J_e+J_e,J_j=J_f+J_f,J_k=J_g+J_g,J_l=J_e*J_i,J_m=J_f*J_i,J_n=J_f*J_j,J_o=J_g*J_i,J_p=J_g*J_j,J_q=J_g*J_k,J_r=J_h*J_i,J_u=J_h*J_j,J_v=J_h*J_k;J_c[0]=1-J_n-J_q,J_c[1]=J_m+J_v,J_c[2]=J_o-J_u,J_c[3]=0,J_c[4]=J_m-J_v,J_c[5]=1-J_l-J_q,J_c[6]=J_p+J_r,J_c[7]=0,J_c[8]=J_o+J_u,J_c[9]=J_p-J_r,J_c[10]=1-J_l-J_n,J_c[11]=0,J_c[12]=0,J_c[13]=0,J_c[14]=0,J_c[15]=1},J_B.createAffineTransformation=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements,J_f=J_b.elements,J_g=J_c.elements,J_h=J_d.elements,J_i=J_f[0],J_j=J_f[1],J_k=J_f[2],J_l=J_f[3],J_m=J_i+J_i,J_n=J_j+J_j,J_o=J_k+J_k,J_p=J_i*J_m,J_q=J_i*J_n,J_r=J_i*J_o,J_u=J_j*J_n,J_v=J_j*J_o,J_w=J_k*J_o,J_x=J_l*J_m,J_y=J_l*J_n,J_z=J_l*J_o,J_A=J_g[0],J_B=J_g[1],J_C=J_g[2];J_h[0]=(1-(J_u+J_w))*J_A,J_h[1]=(J_q+J_z)*J_A,J_h[2]=(J_r-J_y)*J_A,J_h[3]=0,J_h[4]=(J_q-J_z)*J_B,J_h[5]=(1-(J_p+J_w))*J_B,J_h[6]=(J_v+J_x)*J_B,J_h[7]=0,J_h[8]=(J_r+J_y)*J_C,J_h[9]=(J_v-J_x)*J_C,J_h[10]=(1-(J_p+J_u))*J_C,J_h[11]=0,J_h[12]=J_e[0],J_h[13]=J_e[1],J_h[14]=J_e[2],J_h[15]=1},J_B.createLookAt=function(J_a,J_b,J_c,J_d){var J_e=J_d.elements,J_f=J_B._tempVector0,J_g=J_B._tempVector1,J_h=J_B._tempVector2;J_gb.subtract(J_a,J_b,J_h),J_gb.normalize(J_h,J_h),J_gb.cross(J_c,J_h,J_f),J_gb.normalize(J_f,J_f),J_gb.cross(J_h,J_f,J_g),J_d.identity(),J_e[0]=J_f.x,J_e[4]=J_f.y,J_e[8]=J_f.z,J_e[1]=J_g.x,J_e[5]=J_g.y,J_e[9]=J_g.z,J_e[2]=J_h.x,J_e[6]=J_h.y,J_e[10]=J_h.z,J_e[12]=-J_gb.dot(J_f,J_a),J_e[13]=-J_gb.dot(J_g,J_a),J_e[14]=-J_gb.dot(J_h,J_a)},J_B.createPerspective=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_e.elements,J_g=1/Math.tan(J_a/2),J_h=1/(J_c-J_d);J_f[0]=J_g/J_b,J_f[5]=J_g,J_f[10]=(J_d+J_c)*J_h,J_f[11]=-1,J_f[14]=2*J_d*J_c*J_h,J_f[1]=J_f[2]=J_f[3]=J_f[4]=J_f[6]=J_f[7]=J_f[8]=J_f[9]=J_f[12]=J_f[13]=J_f[15]=0},J_B.createOrthoOffCenterRH=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h=J_g.elements,J_i=1/(J_a-J_b),J_j=1/(J_c-J_d),J_k=1/(J_e-J_f);J_h[1]=J_h[2]=J_h[3]=J_h[4]=J_h[6]=J_h[7]=J_h[8]=J_h[9]=J_h[11]=0,J_h[15]=1,J_h[0]=-2*J_i,J_h[5]=-2*J_j,J_h[10]=2*J_k,J_h[12]=(J_a+J_b)*J_i,J_h[13]=(J_d+J_c)*J_j,J_h[14]=(J_f+J_e)*J_k},J_B.translation=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;J_d[0]=J_d[5]=J_d[10]=J_d[15]=1,J_d[12]=J_c[0],J_d[13]=J_c[1],J_d[14]=J_c[2]},J_l(J_B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new J_B},"_tempVector0",function(){return this._tempVector0=new J_gb},"_tempVector1",function(){return this._tempVector1=new J_gb},"_tempVector2",function(){return this._tempVector2=new J_gb},"_tempQuaternion",function(){return this._tempQuaternion=new J_cb},"DEFAULT",function(){return this.DEFAULT=new J_B},"ZERO",function(){return this.ZERO=new J_B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),J_B}(),J_bb=(function(){function J_v(J_a,J_b){this.extents=null,this.transformation=null,this.extents=J_a,this.transformation=J_b}J_n(J_v,"laya.d3.math.OrientedBoundBox");var J_a=J_v.prototype;J_a.getCorners=function(J_a){var J_b=J_v._tempV30.elements,J_c=J_v._tempV31.elements,J_d=J_v._tempV32.elements,J_e=this.extents.elements;J_b[0]=J_e[0],J_b[1]=J_b[2]=0,J_c[1]=J_e[1],J_c[0]=J_c[2]=0,J_d[2]=J_e[2],J_d[0]=J_d[1]=0,J_gb.TransformNormal(J_v._tempV30,this.transformation,J_v._tempV30),J_gb.TransformNormal(J_v._tempV31,this.transformation,J_v._tempV31),J_gb.TransformNormal(J_v._tempV32,this.transformation,J_v._tempV32);var J_f=J_v._tempV33;this.transformation.getTranslationVector(J_f),J_a.length=8,J_gb.add(J_f,J_v._tempV30,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV32,J_a[0]),J_gb.add(J_f,J_v._tempV30,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV32,J_a[1]),J_gb.subtract(J_f,J_v._tempV30,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV32,J_a[2]),J_gb.subtract(J_f,J_v._tempV30,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV32,J_a[3]),J_gb.add(J_f,J_v._tempV30,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV32,J_a[4]),J_gb.add(J_f,J_v._tempV30,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV32,J_a[5]),J_gb.subtract(J_f,J_v._tempV30,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV32,J_a[6]),J_gb.subtract(J_f,J_v._tempV30,J_v._tempV34),J_gb.subtract(J_v._tempV34,J_v._tempV31,J_v._tempV34),J_gb.add(J_v._tempV34,J_v._tempV32,J_a[7])},J_a.transform=function(J_a){J_ab.multiply(this.transformation,J_a,this.transformation)},J_a.scale=function(J_a){J_gb.multiply(this.extents,J_a,this.extents)},J_a.translate=function(J_a){this.transformation.getTranslationVector(J_v._tempV30),J_gb.add(J_v._tempV30,J_a,J_v._tempV31),this.transformation.setTranslationVector(J_v._tempV31)},J_a.Size=function(J_a){J_gb.scale(this.extents,2,J_a)},J_a.getSize=function(J_a){var J_b=this.extents.elements;J_v._tempV30.x=J_b[0],J_v._tempV31.y=J_b[1],J_v._tempV32.z=J_b[2],J_gb.TransformNormal(J_v._tempV30,this.transformation,J_v._tempV30),J_gb.TransformNormal(J_v._tempV31,this.transformation,J_v._tempV31),J_gb.TransformNormal(J_v._tempV31,this.transformation,J_v._tempV32);var J_c=J_a.elements;J_c[0]=J_gb.scalarLength(J_v._tempV30),J_c[1]=J_gb.scalarLength(J_v._tempV31),J_c[2]=J_gb.scalarLength(J_v._tempV32)},J_a.getSizeSquared=function(J_a){var J_b=this.extents.elements;J_v._tempV30.x=J_b[0],J_v._tempV31.y=J_b[1],J_v._tempV32.z=J_b[2],J_gb.TransformNormal(J_v._tempV30,this.transformation,J_v._tempV30),J_gb.TransformNormal(J_v._tempV31,this.transformation,J_v._tempV31),J_gb.TransformNormal(J_v._tempV31,this.transformation,J_v._tempV32);var J_c=J_a.elements;J_c[0]=J_gb.scalarLengthSquared(J_v._tempV30),J_c[1]=J_gb.scalarLengthSquared(J_v._tempV31),J_c[2]=J_gb.scalarLengthSquared(J_v._tempV32)},J_a.getCenter=function(J_a){this.transformation.getTranslationVector(J_a)},J_a.containsPoint=function(J_a){var J_b=this.extents.elements,J_c=J_b[0],J_d=J_b[1],J_e=J_b[2];this.transformation.invert(J_v._tempM0),J_gb.transformCoordinate(J_a,J_v._tempM0,J_v._tempV30);var J_f=J_v._tempV30.elements,J_g=Math.abs(J_f[0]),J_h=Math.abs(J_f[1]),J_i=Math.abs(J_f[2]);return J_sa.nearEqual(J_g,J_c)&&J_sa.nearEqual(J_h,J_d)&&J_sa.nearEqual(J_i,J_e)?2:J_g<J_c&&J_h<J_d&&J_i<J_e?1:0},J_a.containsPoints=function(J_a){var J_b=this.extents.elements,J_c=J_b[0],J_d=J_b[1],J_e=J_b[2];this.transformation.invert(J_v._tempM0);for(var J_f=!0,J_g=!1,J_h=0;J_h<J_a.length;J_h++){J_gb.transformCoordinate(J_a[J_h],J_v._tempM0,J_v._tempV30);var J_i=J_v._tempV30.elements,J_j=Math.abs(J_i[0]),J_k=Math.abs(J_i[1]),J_l=Math.abs(J_i[2]);J_sa.nearEqual(J_j,J_c)&&J_sa.nearEqual(J_k,J_d)&&J_sa.nearEqual(J_l,J_e)&&(J_g=!0),J_j<J_c&&J_k<J_d&&J_l<J_e?J_g=!0:J_f=!1}return J_f?1:J_g?2:0},J_a.containsSphere=function(J_a,J_b){void 0===J_b&&(J_b=!1);var J_c=this.extents.elements,J_d=J_c[0],J_e=J_c[1],J_f=J_c[2],J_g=J_a.radius;this.transformation.invert(J_v._tempM0),J_gb.transformCoordinate(J_a.center,J_v._tempM0,J_v._tempV30);var J_h=NaN;if(J_h=J_b?J_g:(J_gb.scale(J_gb.UnitX,J_g,J_v._tempV31),J_gb.TransformNormal(J_v._tempV31,J_v._tempM0,J_v._tempV31),J_gb.scalarLength(J_v._tempV31)),J_gb.scale(this.extents,-1,J_v._tempV32),J_gb.Clamp(J_v._tempV30,J_v._tempV32,this.extents,J_v._tempV33),J_h*J_h<J_gb.distanceSquared(J_v._tempV30,J_v._tempV33))return 0;var J_i=J_v._tempV30.elements,J_j=J_i[0],J_k=J_i[1],J_l=J_i[2],J_m=J_v._tempV32.elements,J_n=J_m[0],J_o=J_m[1],J_p=J_m[2];return J_n+J_h<=J_j&&J_j<=J_d-J_h&&J_h<J_d-J_n&&J_o+J_h<=J_k&&J_k<=J_e-J_h&&J_h<J_e-J_o&&J_p+J_h<=J_l&&J_l<=J_f-J_h&&J_h<J_f-J_p?1:2},J_a.containsOrientedBoundBox=function(J_a){var J_b=0,J_c=0;J_a.getCorners(J_v._corners);var J_d=this.containsPoints(J_v._corners);if(0!=J_d)return J_d;var J_e=this.extents.elements;J_a.extents.cloneTo(J_v._tempV35);var J_f=J_v._tempV35.elements;J_v._getRows(this.transformation,J_v._rows1),J_v._getRows(J_a.transformation,J_v._rows2);var J_g=NaN;for(J_b=0;J_b<4;J_b++)for(J_c=0;J_c<4;J_c++)3==J_b||3==J_c?(J_v._tempM0.setElementByRowColumn(J_b,J_c,0),J_v._tempM1.setElementByRowColumn(J_b,J_c,0)):(J_g=J_gb.dot(J_v._rows1[J_b],J_v._rows2[J_c]),J_v._tempM0.setElementByRowColumn(J_b,J_c,J_g),J_v._tempM1.setElementByRowColumn(J_b,J_c,Math.abs(J_g)));J_a.getCenter(J_v._tempV34),this.getCenter(J_v._tempV36),J_gb.subtract(J_v._tempV34,J_v._tempV36,J_v._tempV30);var J_h=J_v._tempV31.elements;J_h[0]=J_gb.dot(J_v._tempV30,J_v._rows1[0]),J_h[1]=J_gb.dot(J_v._tempV30,J_v._rows1[1]),J_h[2]=J_gb.dot(J_v._tempV30,J_v._rows1[2]);var J_i=J_v._tempV32.elements,J_j=J_v._tempV33.elements;for(J_b=0;J_b<3;J_b++)if(J_i[0]=J_v._tempM1.getElementByRowColumn(J_b,0),J_i[1]=J_v._tempM1.getElementByRowColumn(J_b,1),J_i[2]=J_v._tempM1.getElementByRowColumn(J_b,2),J_e[J_b]+J_gb.dot(J_v._tempV35,J_v._tempV32)<Math.abs(J_h[J_b]))return 0;for(J_c=0;J_c<3;J_c++)if(J_i[0]=J_v._tempM1.getElementByRowColumn(0,J_c),J_i[1]=J_v._tempM1.getElementByRowColumn(1,J_c),J_i[2]=J_v._tempM1.getElementByRowColumn(2,J_c),J_j[0]=J_v._tempM0.getElementByRowColumn(0,J_c),J_j[1]=J_v._tempM0.getElementByRowColumn(1,J_c),J_j[2]=J_v._tempM0.getElementByRowColumn(2,J_c),J_gb.dot(this.extents,J_v._tempV32)+J_f[J_c]<Math.abs(J_gb.dot(J_v._tempV31,J_v._tempV33)))return 0;for(J_b=0;J_b<3;J_b++)for(J_c=0;J_c<3;J_c++){var J_k=(J_b+1)%3,J_l=(J_b+2)%3,J_m=(J_c+1)%3,J_n=(J_c+2)%3;if(J_e[J_k]*J_v._tempM1.getElementByRowColumn(J_l,J_c)+J_e[J_l]*J_v._tempM1.getElementByRowColumn(J_k,J_c)+(J_f[J_m]*J_v._tempM1.getElementByRowColumn(J_b,J_n)+J_f[J_n]*J_v._tempM1.getElementByRowColumn(J_b,J_m))<Math.abs(J_h[J_l]*J_v._tempM0.getElementByRowColumn(J_k,J_c)-J_h[J_k]*J_v._tempM0.getElementByRowColumn(J_l,J_c)))return 0}return 2},J_a.containsLine=function(J_a,J_b){J_v._corners[0]=J_a,J_v._corners[1]=J_b;var J_c=this.containsPoints(J_v._corners);if(0!=J_c)return J_c;var J_d=this.extents.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2];this.transformation.invert(J_v._tempM0),J_gb.transformCoordinate(J_a,J_v._tempM0,J_v._tempV30),J_gb.transformCoordinate(J_b,J_v._tempM0,J_v._tempV31),J_gb.add(J_v._tempV30,J_v._tempV31,J_v._tempV32),J_gb.scale(J_v._tempV32,.5,J_v._tempV32),J_gb.subtract(J_v._tempV30,J_v._tempV32,J_v._tempV33);var J_h=J_v._tempV33.elements,J_i=J_h[0],J_j=J_h[1],J_k=J_h[2],J_l=J_v._tempV34.elements,J_m=J_l[0]=Math.abs(J_h[0]),J_n=J_l[1]=Math.abs(J_h[1]),J_o=J_l[2]=Math.abs(J_h[2]),J_p=J_v._tempV32.elements,J_q=J_p[0],J_r=J_p[1],J_u=J_p[2];return Math.abs(J_q)>J_e+J_m?0:Math.abs(J_r)>J_f+J_n?0:Math.abs(J_u)>J_g+J_o?0:Math.abs(J_r*J_k-J_u*J_j)>J_f*J_o+J_g*J_n?0:Math.abs(J_q*J_k-J_u*J_i)>J_e*J_o+J_g*J_m?0:Math.abs(J_q*J_j-J_r*J_i)>J_e*J_n+J_f*J_m?0:2},J_a.containsBoundBox=function(J_a){var J_b=0,J_c=0,J_d=J_a.min,J_e=J_a.max;J_a.getCorners(J_v._corners);var J_f=this.containsPoints(J_v._corners);if(0!=J_f)return J_f;J_gb.subtract(J_e,J_d,J_v._tempV30),J_gb.scale(J_v._tempV30,.5,J_v._tempV30),J_gb.add(J_d,J_v._tempV30,J_v._tempV30),J_gb.subtract(J_e,J_v._tempV30,J_v._tempV31);var J_g=this.extents.elements,J_h=J_v._tempV31.elements;J_v._getRows(this.transformation,J_v._rows1),this.transformation.invert(J_v._tempM0);for(J_b=0;J_b<3;J_b++)for(J_c=0;J_c<3;J_c++)J_v._tempM1.setElementByRowColumn(J_b,J_c,Math.abs(J_v._tempM0.getElementByRowColumn(J_b,J_c)));this.getCenter(J_v._tempV35),J_gb.subtract(J_v._tempV30,J_v._tempV35,J_v._tempV32);var J_i=J_v._tempV31.elements;J_i[0]=J_gb.dot(J_v._tempV32,J_v._rows1[0]),J_i[1]=J_gb.dot(J_v._tempV32,J_v._rows1[1]),J_i[2]=J_gb.dot(J_v._tempV32,J_v._rows1[2]);var J_j=J_v._tempV33.elements,J_k=J_v._tempV34.elements;for(J_b=0;J_b<3;J_b++)if(J_j[0]=J_v._tempM1.getElementByRowColumn(J_b,0),J_j[1]=J_v._tempM1.getElementByRowColumn(J_b,1),J_j[2]=J_v._tempM1.getElementByRowColumn(J_b,2),J_g[J_b]+J_gb.dot(J_v._tempV31,J_v._tempV33)<Math.abs(J_i[J_b]))return 0;for(J_c=0;J_c<3;J_c++)if(J_j[0]=J_v._tempM1.getElementByRowColumn(0,J_c),J_j[1]=J_v._tempM1.getElementByRowColumn(1,J_c),J_j[2]=J_v._tempM1.getElementByRowColumn(2,J_c),J_k[0]=J_v._tempM0.getElementByRowColumn(0,J_c),J_k[1]=J_v._tempM0.getElementByRowColumn(1,J_c),J_k[2]=J_v._tempM0.getElementByRowColumn(2,J_c),J_gb.dot(this.extents,J_v._tempV33)+J_h[J_c]<Math.abs(J_gb.dot(J_v._tempV31,J_v._tempV34)))return 0;for(J_b=0;J_b<3;J_b++)for(J_c=0;J_c<3;J_c++){var J_l=(J_b+1)%3,J_m=(J_b+2)%3,J_n=(J_c+1)%3,J_o=(J_c+2)%3;if(J_g[J_l]*J_v._tempM1.getElementByRowColumn(J_m,J_c)+J_g[J_m]*J_v._tempM1.getElementByRowColumn(J_l,J_c)+(J_h[J_n]*J_v._tempM1.getElementByRowColumn(J_b,J_o)+J_h[J_o]*J_v._tempM1.getElementByRowColumn(J_b,J_n))<Math.abs(J_i[J_m]*J_v._tempM0.getElementByRowColumn(J_l,J_c)-J_i[J_l]*J_v._tempM0.getElementByRowColumn(J_m,J_c)))return 0}return 2},J_a.intersectsRay=function(J_a,J_b){J_gb.scale(this.extents,-1,J_v._tempV30),this.transformation.invert(J_v._tempM0),J_gb.TransformNormal(J_a.direction,J_v._tempM0,J_v._ray.direction),J_gb.transformCoordinate(J_a.origin,J_v._tempM0,J_v._ray.origin),J_v._boxBound1.min=J_v._tempV30,J_v._boxBound1.max=this.extents;var J_c=Collision.intersectsRayAndBoxRP(J_v._ray,J_v._boxBound1,J_b);return-1!==J_c&&J_gb.transformCoordinate(J_b,this.transformation,J_b),J_c},J_a._getLocalCorners=function(J_a){J_a.length=8;var J_b=this.extents.elements;J_v._tempV30.x=J_b[0],J_v._tempV31.y=J_b[1],J_v._tempV32.z=J_b[2],J_gb.add(J_v._tempV30,J_v._tempV31,J_v._tempV33),J_gb.add(J_v._tempV33,J_v._tempV32,J_a[0]),J_gb.add(J_v._tempV30,J_v._tempV31,J_v._tempV33),J_gb.subtract(J_v._tempV33,J_v._tempV32,J_a[1]),J_gb.subtract(J_v._tempV31,J_v._tempV30,J_v._tempV33),J_gb.subtract(J_v._tempV33,J_v._tempV30,J_a[2]),J_gb.subtract(J_v._tempV31,J_v._tempV30,J_v._tempV33),J_gb.add(J_v._tempV33,J_v._tempV32,J_a[3]),J_gb.subtract(J_v._tempV30,J_v._tempV31,J_v._tempV33),J_gb.add(J_v._tempV33,J_v._tempV32,J_a[4]),J_gb.subtract(J_v._tempV30,J_v._tempV31,J_v._tempV33),J_gb.subtract(J_v._tempV33,J_v._tempV32,J_a[5]),J_gb.scale(J_a[0],-1,J_a[6]),J_gb.subtract(J_v._tempV32,J_v._tempV30,J_v._tempV33),J_gb.subtract(J_v._tempV33,J_v._tempV31,J_a[7])},J_a.equals=function(J_a){return this.extents==J_a.extents&&this.transformation==J_a.transformation},J_a.cloneTo=function(J_a){var J_b=J_a;this.extents.cloneTo(J_b.extents),this.transformation.cloneTo(J_b.transformation)},J_v.createByBoundBox=function(J_a,J_b){var J_c=J_a.min,J_d=J_a.max;J_gb.subtract(J_d,J_c,J_v._tempV30),J_gb.scale(J_v._tempV30,.5,J_v._tempV30),J_gb.add(J_c,J_v._tempV30,J_v._tempV31),J_gb.subtract(J_d,J_v._tempV31,J_v._tempV32),J_ab.translation(J_v._tempV31,J_v._tempM0);var J_e=J_v._tempV32.clone(),J_f=J_v._tempM0.clone();J_b.extents=J_e,J_b.transformation=J_f},J_v.createByMinAndMaxVertex=function(J_a,J_b){return J_gb.subtract(J_b,J_a,J_v._tempV30),J_gb.scale(J_v._tempV30,.5,J_v._tempV30),J_gb.add(J_a,J_v._tempV30,J_v._tempV31),J_gb.subtract(J_b,J_v._tempV31,J_v._tempV32),J_ab.translation(J_v._tempV31,J_v._tempM0),new J_v(J_v._tempV32,J_v._tempM0)},J_v._getRows=function(J_a,J_b){J_b.length=3;var J_c=J_a.elements,J_d=J_b[0].elements;J_d[0]=J_c[0],J_d[1]=J_c[1],J_d[2]=J_c[2];var J_e=J_b[1].elements;J_e[0]=J_c[4],J_e[1]=J_c[5],J_e[2]=J_c[6];var J_f=J_b[2].elements;J_f[0]=J_c[8],J_f[1]=J_c[9],J_f[2]=J_c[10]},J_v.getObbtoObbMatrix4x4=function(J_a,J_b,J_c,J_d){var J_e=J_a.transformation,J_f=J_b.transformation;if(J_c){J_v._getRows(J_e,J_v._rows1),J_v._getRows(J_f,J_v._rows2);for(var J_g=0;J_g<3;J_g++)for(var J_h=0;J_h<3;J_h++)J_d.setElementByRowColumn(J_g,J_h,J_gb.dot(J_v._rows2[J_g],J_v._rows1[J_h]));J_b.getCenter(J_v._tempV30),J_a.getCenter(J_v._tempV31),J_gb.subtract(J_v._tempV30,J_v._tempV31,J_v._tempV32);var J_i=J_d.elements;J_i[12]=J_gb.dot(J_v._tempV32,J_v._rows1[0]),J_i[13]=J_gb.dot(J_v._tempV32,J_v._rows1[1]),J_i[14]=J_gb.dot(J_v._tempV32,J_v._rows1[2]),J_i[15]=1}else J_e.invert(J_v._tempM0),J_ab.multiply(J_f,J_v._tempM0,J_d)},J_v.merge=function(J_a,J_b,J_c){var J_d=J_a.extents,J_e=J_a.transformation;J_v.getObbtoObbMatrix4x4(J_a,J_b,J_c,J_v._tempM0),J_b._getLocalCorners(J_v._corners),J_gb.transformCoordinate(J_v._corners[0],J_v._tempM0,J_v._corners[0]),J_gb.transformCoordinate(J_v._corners[1],J_v._tempM0,J_v._corners[1]),J_gb.transformCoordinate(J_v._corners[2],J_v._tempM0,J_v._corners[2]),J_gb.transformCoordinate(J_v._corners[3],J_v._tempM0,J_v._corners[3]),J_gb.transformCoordinate(J_v._corners[4],J_v._tempM0,J_v._corners[4]),J_gb.transformCoordinate(J_v._corners[5],J_v._tempM0,J_v._corners[5]),J_gb.transformCoordinate(J_v._corners[6],J_v._tempM0,J_v._corners[6]),J_gb.transformCoordinate(J_v._corners[7],J_v._tempM0,J_v._corners[7]),J_gb.scale(J_d,-1,J_v._boxBound1.min),J_d.cloneTo(J_v._boxBound1.max),J_Za.createfromPoints(J_v._corners,J_v._boxBound2),J_Za.merge(J_v._boxBound2,J_v._boxBound1,J_v._boxBound3);var J_f=J_v._boxBound3.min,J_g=J_v._boxBound3.max;J_gb.subtract(J_g,J_f,J_v._tempV30),J_gb.scale(J_v._tempV30,.5,J_v._tempV30),J_gb.add(J_f,J_v._tempV30,J_v._tempV32),J_gb.subtract(J_g,J_v._tempV32,J_d),J_gb.transformCoordinate(J_v._tempV32,J_e,J_v._tempV33)},J_l(J_v,["_tempV30",function(){return this._tempV30=new J_gb},"_tempV31",function(){return this._tempV31=new J_gb},"_tempV32",function(){return this._tempV32=new J_gb},"_tempV33",function(){return this._tempV33=new J_gb},"_tempV34",function(){return this._tempV34=new J_gb},"_tempV35",function(){return this._tempV35=new J_gb},"_tempV36",function(){return this._tempV36=new J_gb},"_tempM0",function(){return this._tempM0=new J_ab},"_tempM1",function(){return this._tempM1=new J_ab},"_corners",function(){return this._corners=[new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb]},"_rows1",function(){return this._rows1=[new J_gb,new J_gb,new J_gb]},"_rows2",function(){return this._rows2=[new J_gb,new J_gb,new J_gb]},"_ray",function(){return this._ray=new J_eb(new J_gb,new J_gb)},"_boxBound1",function(){return this._boxBound1=new J_Za(new J_gb,new J_gb)},"_boxBound2",function(){return this._boxBound2=new J_Za(new J_gb,new J_gb)},"_boxBound3",function(){return this._boxBound3=new J_Za(new J_gb,new J_gb)}])}(),function(){function J_x(J_a,J_b){this.normal=null,this.distance=NaN,void 0===J_b&&(J_b=0),this.normal=J_a,this.distance=J_b}return J_n(J_x,"laya.d3.math.Plane"),J_x.prototype.normalize=function(){var J_a=this.normal.elements,J_b=J_a[0],J_c=J_a[1],J_d=J_a[2],J_e=1/Math.sqrt(J_b*J_b+J_c*J_c+J_d*J_d);J_a[0]=J_b*J_e,J_a[1]=J_c*J_e,J_a[2]=J_d*J_e,this.distance*=J_e},J_x.createPlaneBy3P=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_b.elements,J_f=J_c.elements,J_g=J_e[0]-J_d[0],J_h=J_e[1]-J_d[1],J_i=J_e[2]-J_d[2],J_j=J_f[0]-J_d[0],J_k=J_f[1]-J_d[1],J_l=J_f[2]-J_d[2],J_m=J_h*J_l-J_i*J_k,J_n=J_i*J_j-J_g*J_l,J_o=J_g*J_k-J_h*J_j,J_p=1/Math.sqrt(J_m*J_m+J_n*J_n+J_o*J_o),J_q=J_m*J_p,J_r=J_n*J_p,J_u=J_o*J_p,J_v=J_x._TEMPVec3.elements;J_v[0]=J_q,J_v[1]=J_r,J_v[2]=J_u;var J_w=-(J_q*J_d[0]+J_r*J_d[1]+J_u*J_d[2]);return new J_x(J_x._TEMPVec3,J_w)},J_x.PlaneIntersectionType_Back=0,J_x.PlaneIntersectionType_Front=1,J_x.PlaneIntersectionType_Intersecting=2,J_l(J_x,["_TEMPVec3",function(){return this._TEMPVec3=new J_gb}]),J_x}()),J_cb=function(){function J_e(J_a,J_b,J_c,J_d){this.elements=new Float32Array(4),void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=1),this.elements[0]=J_a,this.elements[1]=J_b,this.elements[2]=J_c,this.elements[3]=J_d}J_n(J_e,"laya.d3.math.Quaternion");var J_a=J_e.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.scaling=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements;J_c[0]=J_d[0]*J_a,J_c[1]=J_d[1]*J_a,J_c[2]=J_d[2]*J_a,J_c[3]=J_d[3]*J_a},J_a.normalize=function(J_a){var J_b=J_a.elements,J_c=this.elements,J_d=J_c[0],J_e=J_c[1],J_f=J_c[2],J_g=J_c[3],J_h=J_d*J_d+J_e*J_e+J_f*J_f+J_g*J_g;0<J_h&&(J_h=1/Math.sqrt(J_h),J_b[0]=J_d*J_h,J_b[1]=J_e*J_h,J_b[2]=J_f*J_h,J_b[3]=J_g*J_h)},J_a.length=function(){var J_a=this.elements,J_b=J_a[0],J_c=J_a[1],J_d=J_a[2],J_e=J_a[3];return Math.sqrt(J_b*J_b+J_c*J_c+J_d*J_d+J_e*J_e)},J_a.rotateX=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements;J_a*=.5;var J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=Math.sin(J_a),J_j=Math.cos(J_a);J_c[0]=J_e*J_j+J_h*J_i,J_c[1]=J_f*J_j+J_g*J_i,J_c[2]=J_g*J_j-J_f*J_i,J_c[3]=J_h*J_j-J_e*J_i},J_a.rotateY=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements;J_a*=.5;var J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=Math.sin(J_a),J_j=Math.cos(J_a);J_c[0]=J_e*J_j-J_g*J_i,J_c[1]=J_f*J_j+J_h*J_i,J_c[2]=J_g*J_j+J_e*J_i,J_c[3]=J_h*J_j-J_f*J_i},J_a.rotateZ=function(J_a,J_b){var J_c=J_b.elements,J_d=this.elements;J_a*=.5;var J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=Math.sin(J_a),J_j=Math.cos(J_a);J_c[0]=J_e*J_j+J_f*J_i,J_c[1]=J_f*J_j-J_e*J_i,J_c[2]=J_g*J_j+J_h*J_i,J_c[3]=J_h*J_j-J_g*J_i},J_a.getYawPitchRoll=function(J_a){J_gb.transformQuat(J_gb.ForwardRH,this,J_e.TEMPVector31),J_gb.transformQuat(J_gb.Up,this,J_e.TEMPVector32);var J_b=J_e.TEMPVector32.elements;J_e.angleTo(J_gb.ZERO,J_e.TEMPVector31,J_e.TEMPVector33);var J_c=J_e.TEMPVector33.elements;J_c[0]==Math.PI/2?(J_c[1]=J_e.arcTanAngle(J_b[2],J_b[0]),J_c[2]=0):J_c[0]==-Math.PI/2?(J_c[1]=J_e.arcTanAngle(-J_b[2],-J_b[0]),J_c[2]=0):(J_ab.createRotationY(-J_c[1],J_e.TEMPMatrix0),J_ab.createRotationX(-J_c[0],J_e.TEMPMatrix1),J_gb.transformCoordinate(J_e.TEMPVector32,J_e.TEMPMatrix0,J_e.TEMPVector32),J_gb.transformCoordinate(J_e.TEMPVector32,J_e.TEMPMatrix1,J_e.TEMPVector32),J_c[2]=J_e.arcTanAngle(J_b[1],-J_b[0])),J_c[1]<=-Math.PI&&(J_c[1]=Math.PI),J_c[2]<=-Math.PI&&(J_c[2]=Math.PI),J_c[1]>=Math.PI&&J_c[2]>=Math.PI&&(J_c[1]=0,J_c[2]=0,J_c[0]=Math.PI-J_c[0]);var J_d=J_a.elements;J_d[0]=J_c[1],J_d[1]=J_c[0],J_d[2]=J_c[2]},J_a.invert=function(J_a){var J_b=J_a.elements,J_c=this.elements,J_d=J_c[0],J_e=J_c[1],J_f=J_c[2],J_g=J_c[3],J_h=J_d*J_d+J_e*J_e+J_f*J_f+J_g*J_g,J_i=J_h?1/J_h:0;J_b[0]=-J_d*J_i,J_b[1]=-J_e*J_i,J_b[2]=-J_f*J_i,J_b[3]=J_g*J_i},J_a.identity=function(){var J_a=this.elements;J_a[0]=0,J_a[1]=0,J_a[2]=0,J_a[3]=1},J_a.fromArray=function(J_a,J_b){void 0===J_b&&(J_b=0),this.elements[0]=J_a[J_b+0],this.elements[1]=J_a[J_b+1],this.elements[2]=J_a[J_b+2],this.elements[3]=J_a[J_b+3]},J_a.cloneTo=function(J_a){var J_b,J_c,J_d;if((J_c=this.elements)!==(J_d=J_a.elements))for(J_b=0;J_b<4;++J_b)J_d[J_b]=J_c[J_b]},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_a.equals=function(J_a){var J_b=this.elements,J_c=J_a.elements;return J_sa.nearEqual(J_b[0],J_c[0])&&J_sa.nearEqual(J_b[1],J_c[1])&&J_sa.nearEqual(J_b[2],J_c[2])&&J_sa.nearEqual(J_b[3],J_c[3])},J_a.lengthSquared=function(){var J_a=this.elements[0],J_b=this.elements[1],J_c=this.elements[2],J_d=this.elements[3];return J_a*J_a+J_b*J_b+J_c*J_c+J_d*J_d},J_o(0,J_a,"x",function(){return this.elements[0]}),J_o(0,J_a,"y",function(){return this.elements[1]}),J_o(0,J_a,"z",function(){return this.elements[2]}),J_o(0,J_a,"w",function(){return this.elements[3]}),J_e.createFromYawPitchRoll=function(J_a,J_b,J_c,J_d){var J_e=.5*J_c,J_f=.5*J_b,J_g=.5*J_a,J_h=Math.sin(J_e),J_i=Math.cos(J_e),J_j=Math.sin(J_f),J_k=Math.cos(J_f),J_l=Math.sin(J_g),J_m=Math.cos(J_g),J_n=J_d.elements;J_n[0]=J_m*J_j*J_i+J_l*J_k*J_h,J_n[1]=J_l*J_k*J_i-J_m*J_j*J_h,J_n[2]=J_m*J_k*J_h-J_l*J_j*J_i,J_n[3]=J_m*J_k*J_i+J_l*J_j*J_h},J_e.multiply=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_b.elements,J_f=J_c.elements,J_g=J_d[0],J_h=J_d[1],J_i=J_d[2],J_j=J_d[3],J_k=J_e[0],J_l=J_e[1],J_m=J_e[2],J_n=J_e[3],J_o=J_h*J_m-J_i*J_l,J_p=J_i*J_k-J_g*J_m,J_q=J_g*J_l-J_h*J_k,J_r=J_g*J_k+J_h*J_l+J_i*J_m;J_f[0]=J_g*J_n+J_k*J_j+J_o,J_f[1]=J_h*J_n+J_l*J_j+J_p,J_f[2]=J_i*J_n+J_m*J_j+J_q,J_f[3]=J_j*J_n-J_r},J_e.arcTanAngle=function(J_a,J_b){return 0==J_a?1==J_b?Math.PI/2:-Math.PI/2:0<J_a?Math.atan(J_b/J_a):J_a<0?0<J_b?Math.atan(J_b/J_a)+Math.PI:Math.atan(J_b/J_a)-Math.PI:0},J_e.angleTo=function(J_a,J_b,J_c){J_gb.subtract(J_b,J_a,J_e.TEMPVector30),J_gb.normalize(J_e.TEMPVector30,J_e.TEMPVector30),J_c.elements[0]=Math.asin(J_e.TEMPVector30.y),J_c.elements[1]=J_e.arcTanAngle(-J_e.TEMPVector30.z,-J_e.TEMPVector30.x)},J_e.createFromAxisAngle=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements;J_b*=.5;var J_f=Math.sin(J_b);J_d[0]=J_f*J_e[0],J_d[1]=J_f*J_e[1],J_d[2]=J_f*J_e[2],J_d[3]=Math.cos(J_b)},J_e.createFromMatrix3x3=function(J_a,J_b){var J_c,J_d=J_b.elements,J_e=J_a.elements,J_f=J_e[0]+J_e[4]+J_e[8];if(0<J_f)J_c=Math.sqrt(J_f+1),J_d[3]=.5*J_c,J_c=.5/J_c,J_d[0]=(J_e[5]-J_e[7])*J_c,J_d[1]=(J_e[6]-J_e[2])*J_c,J_d[2]=(J_e[1]-J_e[3])*J_c;else{var J_g=0;J_e[4]>J_e[0]&&(J_g=1),J_e[8]>J_e[3*J_g+J_g]&&(J_g=2);var J_h=(J_g+1)%3,J_i=(J_g+2)%3;J_c=Math.sqrt(J_e[3*J_g+J_g]-J_e[3*J_h+J_h]-J_e[3*J_i+J_i]+1),J_d[J_g]=.5*J_c,J_c=.5/J_c,J_d[3]=(J_e[3*J_h+J_i]-J_e[3*J_i+J_h])*J_c,J_d[J_h]=(J_e[3*J_h+J_g]+J_e[3*J_g+J_h])*J_c,J_d[J_i]=(J_e[3*J_i+J_g]+J_e[3*J_g+J_i])*J_c}},J_e.createFromMatrix4x4=function(J_a,J_b){var J_c,J_d,J_e=J_a.elements,J_f=J_b.elements,J_g=J_e[0]+J_e[5]+J_e[10];0<J_g?(J_c=Math.sqrt(J_g+1),J_f[3]=.5*J_c,J_c=.5/J_c,J_f[0]=(J_e[6]-J_e[9])*J_c,J_f[1]=(J_e[8]-J_e[2])*J_c,J_f[2]=(J_e[1]-J_e[4])*J_c):J_e[0]>=J_e[5]&&J_e[0]>=J_e[10]?(J_d=.5/(J_c=Math.sqrt(1+J_e[0]-J_e[5]-J_e[10])),J_f[0]=.5*J_c,J_f[1]=(J_e[1]+J_e[4])*J_d,J_f[2]=(J_e[2]+J_e[8])*J_d,J_f[3]=(J_e[6]-J_e[9])*J_d):J_e[5]>J_e[10]?(J_d=.5/(J_c=Math.sqrt(1+J_e[5]-J_e[0]-J_e[10])),J_f[0]=(J_e[4]+J_e[1])*J_d,J_f[1]=.5*J_c,J_f[2]=(J_e[9]+J_e[6])*J_d,J_f[3]=(J_e[8]-J_e[2])*J_d):(J_d=.5/(J_c=Math.sqrt(1+J_e[10]-J_e[0]-J_e[5])),J_f[0]=(J_e[8]+J_e[2])*J_d,J_f[1]=(J_e[9]+J_e[6])*J_d,J_f[2]=.5*J_c,J_f[3]=(J_e[1]-J_e[4])*J_d)},J_e.slerp=function(J_a,J_b,J_c,J_d){var J_e,J_f,J_g,J_h,J_i,J_j=J_a.elements,J_k=J_b.elements,J_l=J_d.elements,J_m=J_j[0],J_n=J_j[1],J_o=J_j[2],J_p=J_j[3],J_q=J_k[0],J_r=J_k[1],J_u=J_k[2],J_v=J_k[3];return(J_f=J_m*J_q+J_n*J_r+J_o*J_u+J_p*J_v)<0&&(J_f=-J_f,J_q=-J_q,J_r=-J_r,J_u=-J_u,J_v=-J_v),J_i=1e-6<1-J_f?(J_e=Math.acos(J_f),J_g=Math.sin(J_e),J_h=Math.sin((1-J_c)*J_e)/J_g,Math.sin(J_c*J_e)/J_g):(J_h=1-J_c,J_c),J_l[0]=J_h*J_m+J_i*J_q,J_l[1]=J_h*J_n+J_i*J_r,J_l[2]=J_h*J_o+J_i*J_u,J_l[3]=J_h*J_p+J_i*J_v,J_l},J_e.lerp=function(J_a,J_b,J_c,J_d){var J_e=J_d.elements,J_f=J_a.elements,J_g=J_b.elements,J_h=J_f[0],J_i=J_f[1],J_j=J_f[2],J_k=J_f[3];J_e[0]=J_h+J_c*(J_g[0]-J_h),J_e[1]=J_i+J_c*(J_g[1]-J_i),J_e[2]=J_j+J_c*(J_g[2]-J_j),J_e[3]=J_k+J_c*(J_g[3]-J_k)},J_e.add=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]+J_f[0],J_d[1]=J_e[1]+J_f[1],J_d[2]=J_e[2]+J_f[2],J_d[3]=J_e[3]+J_f[3]},J_e.dot=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;return J_c[0]*J_d[0]+J_c[1]*J_d[1]+J_c[2]*J_d[2]+J_c[3]*J_d[3]},J_e.rotationLookAt=function(J_a,J_b,J_c){J_e.lookAt(J_gb.ZERO,J_a,J_b,J_c)},J_e.lookAt=function(J_a,J_b,J_c,J_d){J_ta.lookAt(J_a,J_b,J_c,J_e._tempMatrix3x3),J_e.rotationMatrix(J_e._tempMatrix3x3,J_d)},J_e.invert=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_a.lengthSquared();J_sa.isZero(J_e)||(J_e=1/J_e,J_d[0]=-J_c[0]*J_e,J_d[1]=-J_c[1]*J_e,J_d[2]=-J_c[2]*J_e,J_d[3]=J_c[3]*J_e)},J_e.rotationMatrix=function(J_a,J_b){var J_c=J_a.elements,J_d=J_c[0],J_e=J_c[1],J_f=J_c[2],J_g=J_c[3],J_h=J_c[4],J_i=J_c[5],J_j=J_c[6],J_k=J_c[7],J_l=J_c[8],J_m=J_b.elements,J_n=NaN,J_o=NaN,J_p=J_d+J_h+J_l;0<J_p?(J_n=Math.sqrt(J_p+1),J_m[3]=.5*J_n,J_n=.5/J_n,J_m[0]=(J_i-J_k)*J_n,J_m[1]=(J_j-J_f)*J_n,J_m[2]=(J_e-J_g)*J_n):J_h<=J_d&&J_l<=J_d?(J_o=.5/(J_n=Math.sqrt(1+J_d-J_h-J_l)),J_m[0]=.5*J_n,J_m[1]=(J_e+J_g)*J_o,J_m[2]=(J_f+J_j)*J_o,J_m[3]=(J_i-J_k)*J_o):J_l<J_h?(J_o=.5/(J_n=Math.sqrt(1+J_h-J_d-J_l)),J_m[0]=(J_g+J_e)*J_o,J_m[1]=.5*J_n,J_m[2]=(J_k+J_i)*J_o,J_m[3]=(J_j-J_f)*J_o):(J_o=.5/(J_n=Math.sqrt(1+J_l-J_d-J_h)),J_m[0]=(J_j+J_f)*J_o,J_m[1]=(J_k+J_i)*J_o,J_m[2]=.5*J_n,J_m[3]=(J_e-J_g)*J_o)},J_e.DEFAULT=new J_e,J_l(J_e,["TEMPVector30",function(){return this.TEMPVector30=new J_gb},"TEMPVector31",function(){return this.TEMPVector31=new J_gb},"TEMPVector32",function(){return this.TEMPVector32=new J_gb},"TEMPVector33",function(){return this.TEMPVector33=new J_gb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new J_ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new J_ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new J_ta},"NAN",function(){return this.NAN=new J_e(NaN,NaN,NaN,NaN)}]),J_e}(),J_db=function(){function J_a(J_a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=J_a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}J_n(J_a,"laya.d3.math.Rand");var J_b=J_a.prototype;return J_b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},J_b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},J_b.getSignedFloat=function(){return 2*this.getFloat()-1},J_o(0,J_b,"seed",function(){return this.seeds[0]},function(J_a){this.seeds[0]=J_a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),J_a.getFloatFromInt=function(J_a){return 1/8388607*(8388607&J_a)},J_a.getByteFromInt=function(J_a){return(8388607&J_a)>>>15},J_a}(),J_eb=(function(){function J_e(J_a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(J_a instanceof Array)||4!==J_a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|J_a[0],this._state0L=0|J_a[1],this._state1U=0|J_a[2],this._state1L=0|J_a[3]}J_n(J_e,"laya.d3.math.RandX");var J_a=J_e.prototype;J_a.randomint=function(){var J_a=this._state0U,J_b=this._state0L,J_c=this._state1U,J_d=this._state1L,J_e=(J_d>>>0)+(J_b>>>0),J_f=J_c+J_a+(J_e/2>>>31)>>>0,J_g=J_e>>>0,J_h=0,J_i=0;J_h=(J_a^=J_h=J_a<<23|(-512&J_b)>>>9)^(this._state0U=J_c),J_i=(J_b^=J_i=J_b<<23)^(this._state0L=J_d);J_h^=J_a>>>18,J_i^=J_b>>>18|(262143&J_a)<<14;return J_h^=J_c>>>5,J_i^=J_d>>>5|(31&J_c)<<27,this._state1U=J_h,this._state1L=J_i,[J_f,J_g]},J_a.random=function(){var J_a=this.randomint(),J_b=J_a[0],J_c=1023<<20|J_b>>>12,J_d=0|(J_a[1]>>>12|(4095&J_b)<<20);return J_e._CONVERTION_BUFFER.setUint32(0,J_c,!1),J_e._CONVERTION_BUFFER.setUint32(4,J_d,!1),J_db._CONVERTION_BUFFER.getFloat64(0,!1)-1},J_l(J_e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new J_db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function J_a(J_a,J_b){this.origin=null,this.direction=null,this.origin=J_a,this.direction=J_b}return J_n(J_a,"laya.d3.math.Ray"),J_a}()),J_fb=function(){function J_a(J_a,J_b){this.elements=new Float32Array(2),void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0);var J_c=this.elements;J_c[0]=J_a,J_c[1]=J_b}J_n(J_a,"laya.d3.math.Vector2");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.fromArray=function(J_a,J_b){void 0===J_b&&(J_b=0),this.elements[0]=J_a[J_b+0],this.elements[1]=J_a[J_b+1]},J_b.cloneTo=function(J_a){var J_b=J_a.elements,J_c=this.elements;J_b[0]=J_c[0],J_b[1]=J_c[1]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"x",function(){return this.elements[0]},function(J_a){this.elements[0]=J_a}),J_o(0,J_b,"y",function(){return this.elements[1]},function(J_a){this.elements[1]=J_a}),J_a.scale=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements;J_d[0]=J_e[0]*J_b,J_d[1]=J_e[1]*J_b},J_l(J_a,["ZERO",function(){return this.ZERO=new J_a(0,0)},"ONE",function(){return this.ONE=new J_a(1,1)}]),J_a}(),J_gb=function(){function J_k(J_a,J_b,J_c){this.elements=new Float32Array(3),void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0);var J_d=this.elements;J_d[0]=J_a,J_d[1]=J_b,J_d[2]=J_c}J_n(J_k,"laya.d3.math.Vector3");var J_a=J_k.prototype;return J_x.imps(J_a,{"laya.d3.core.IClone":!0}),J_a.fromArray=function(J_a,J_b){void 0===J_b&&(J_b=0),this.elements[0]=J_a[J_b+0],this.elements[1]=J_a[J_b+1],this.elements[2]=J_a[J_b+2]},J_a.cloneTo=function(J_a){var J_b=J_a.elements,J_c=this.elements;J_b[0]=J_c[0],J_b[1]=J_c[1],J_b[2]=J_c[2]},J_a.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},J_a.reset=function(J_a,J_b,J_c){this.elements[0]=J_a,this.elements[1]=J_b,this.elements[2]=J_c},J_o(0,J_a,"x",function(){return this.elements[0]},function(J_a){this.elements[0]=J_a}),J_o(0,J_a,"y",function(){return this.elements[1]},function(J_a){this.elements[1]=J_a}),J_o(0,J_a,"z",function(){return this.elements[2]},function(J_a){this.elements[2]=J_a}),J_k.distanceSquared=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0]-J_d[0],J_f=J_c[1]-J_d[1],J_g=J_c[2]-J_d[2];return J_e*J_e+J_f*J_f+J_g*J_g},J_k.distance=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0]-J_d[0],J_f=J_c[1]-J_d[1],J_g=J_c[2]-J_d[2];return Math.sqrt(J_e*J_e+J_f*J_f+J_g*J_g)},J_k.min=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=Math.min(J_e[0],J_f[0]),J_d[1]=Math.min(J_e[1],J_f[1]),J_d[2]=Math.min(J_e[2],J_f[2])},J_k.max=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=Math.max(J_e[0],J_f[0]),J_d[1]=Math.max(J_e[1],J_f[1]),J_d[2]=Math.max(J_e[2],J_f[2])},J_k.transformQuat=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements,J_g=J_e[0],J_h=J_e[1],J_i=J_e[2],J_j=J_f[0],J_k=J_f[1],J_l=J_f[2],J_m=J_f[3],J_n=J_m*J_g+J_k*J_i-J_l*J_h,J_o=J_m*J_h+J_l*J_g-J_j*J_i,J_p=J_m*J_i+J_j*J_h-J_k*J_g,J_q=-J_j*J_g-J_k*J_h-J_l*J_i;J_d[0]=J_n*J_m+J_q*-J_j+J_o*-J_l-J_p*-J_k,J_d[1]=J_o*J_m+J_q*-J_k+J_p*-J_j-J_n*-J_l,J_d[2]=J_p*J_m+J_q*-J_l+J_n*-J_k-J_o*-J_j},J_k.scalarLength=function(J_a){var J_b=J_a.elements,J_c=J_b[0],J_d=J_b[1],J_e=J_b[2];return Math.sqrt(J_c*J_c+J_d*J_d+J_e*J_e)},J_k.scalarLengthSquared=function(J_a){var J_b=J_a.elements,J_c=J_b[0],J_d=J_b[1],J_e=J_b[2];return J_c*J_c+J_d*J_d+J_e*J_e},J_k.normalize=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0],J_f=J_c[1],J_g=J_c[2],J_h=J_e*J_e+J_f*J_f+J_g*J_g;0<J_h&&(J_h=1/Math.sqrt(J_h),J_d[0]=J_c[0]*J_h,J_d[1]=J_c[1]*J_h,J_d[2]=J_c[2]*J_h)},J_k.multiply=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]*J_f[0],J_d[1]=J_e[1]*J_f[1],J_d[2]=J_e[2]*J_f[2]},J_k.scale=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements;J_d[0]=J_e[0]*J_b,J_d[1]=J_e[1]*J_b,J_d[2]=J_e[2]*J_b},J_k.lerp=function(J_a,J_b,J_c,J_d){var J_e=J_d.elements,J_f=J_a.elements,J_g=J_b.elements,J_h=J_f[0],J_i=J_f[1],J_j=J_f[2];J_e[0]=J_h+J_c*(J_g[0]-J_h),J_e[1]=J_i+J_c*(J_g[1]-J_i),J_e[2]=J_j+J_c*(J_g[2]-J_j)},J_k.transformV3ToV3=function(J_a,J_b,J_c){var J_d=J_k._tempVector4;J_k.transformV3ToV4(J_a,J_b,J_d);var J_e=J_d.elements,J_f=J_c.elements;J_f[0]=J_e[0],J_f[1]=J_e[1],J_f[2]=J_e[2]},J_k.transformV3ToV4=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_b.elements,J_i=J_c.elements;J_i[0]=J_e*J_h[0]+J_f*J_h[4]+J_g*J_h[8]+J_h[12],J_i[1]=J_e*J_h[1]+J_f*J_h[5]+J_g*J_h[9]+J_h[13],J_i[2]=J_e*J_h[2]+J_f*J_h[6]+J_g*J_h[10]+J_h[14],J_i[3]=J_e*J_h[3]+J_f*J_h[7]+J_g*J_h[11]+J_h[15]},J_k.TransformNormal=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_b.elements,J_i=J_c.elements;J_i[0]=J_e*J_h[0]+J_f*J_h[4]+J_g*J_h[8],J_i[1]=J_e*J_h[1]+J_f*J_h[5]+J_g*J_h[9],J_i[2]=J_e*J_h[2]+J_f*J_h[6]+J_g*J_h[10]},J_k.transformCoordinate=function(J_a,J_b,J_c){var J_d=J_k._tempVector4.elements,J_e=J_a.elements,J_f=J_e[0],J_g=J_e[1],J_h=J_e[2],J_i=J_b.elements;J_d[0]=J_f*J_i[0]+J_g*J_i[4]+J_h*J_i[8]+J_i[12],J_d[1]=J_f*J_i[1]+J_g*J_i[5]+J_h*J_i[9]+J_i[13],J_d[2]=J_f*J_i[2]+J_g*J_i[6]+J_h*J_i[10]+J_i[14],J_d[3]=1/(J_f*J_i[3]+J_g*J_i[7]+J_h*J_i[11]+J_i[15]);var J_j=J_c.elements;J_j[0]=J_d[0]*J_d[3],J_j[1]=J_d[1]*J_d[3],J_j[2]=J_d[2]*J_d[3]},J_k.Clamp=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements,J_f=J_e[0],J_g=J_e[1],J_h=J_e[2],J_i=J_b.elements,J_j=J_i[0],J_k=J_i[1],J_l=J_i[2],J_m=J_c.elements,J_n=J_m[0],J_o=J_m[1],J_p=J_m[2],J_q=J_d.elements;J_f=(J_f=J_n<J_f?J_n:J_f)<J_j?J_j:J_f,J_g=(J_g=J_o<J_g?J_o:J_g)<J_k?J_k:J_g,J_h=(J_h=J_p<J_h?J_p:J_h)<J_l?J_l:J_h,J_q[0]=J_f,J_q[1]=J_g,J_q[2]=J_h},J_k.add=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]+J_f[0],J_d[1]=J_e[1]+J_f[1],J_d[2]=J_e[2]+J_f[2]},J_k.subtract=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]-J_f[0],J_d[1]=J_e[1]-J_f[1],J_d[2]=J_e[2]-J_f[2]},J_k.cross=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_b.elements,J_f=J_c.elements,J_g=J_d[0],J_h=J_d[1],J_i=J_d[2],J_j=J_e[0],J_k=J_e[1],J_l=J_e[2];J_f[0]=J_h*J_l-J_i*J_k,J_f[1]=J_i*J_j-J_g*J_l,J_f[2]=J_g*J_k-J_h*J_j},J_k.dot=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;return J_c[0]*J_d[0]+J_c[1]*J_d[1]+J_c[2]*J_d[2]},J_k.equals=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;return J_sa.nearEqual(Math.abs(J_c[0]),Math.abs(J_d[0]))&&J_sa.nearEqual(Math.abs(J_c[1]),Math.abs(J_d[1]))&&J_sa.nearEqual(Math.abs(J_c[2]),Math.abs(J_d[2]))},J_k.ZERO=new J_k(0,0,0),J_k.ONE=new J_k(1,1,1),J_k.NegativeUnitX=new J_k(-1,0,0),J_k.UnitX=new J_k(1,0,0),J_k.UnitY=new J_k(0,1,0),J_k.UnitZ=new J_k(0,0,1),J_k.ForwardRH=new J_k(0,0,-1),J_k.ForwardLH=new J_k(0,0,1),J_k.Up=new J_k(0,1,0),J_k.NAN=new J_k(NaN,NaN,NaN),J_l(J_k,["_tempVector4",function(){return this._tempVector4=new J_hb}]),J_k}(),J_hb=function(){function J_a(J_a,J_b,J_c,J_d){this.elements=new Float32Array(4),void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=0);var J_e=this.elements;J_e[0]=J_a,J_e[1]=J_b,J_e[2]=J_c,J_e[3]=J_d}J_n(J_a,"laya.d3.math.Vector4");var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b.fromArray=function(J_a,J_b){void 0===J_b&&(J_b=0),this.elements[0]=J_a[J_b+0],this.elements[1]=J_a[J_b+1],this.elements[2]=J_a[J_b+2],this.elements[3]=J_a[J_b+3]},J_b.cloneTo=function(J_a){var J_b=J_a.elements,J_c=this.elements;J_b[0]=J_c[0],J_b[1]=J_c[1],J_b[2]=J_c[2],J_b[3]=J_c[3]},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},J_b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},J_o(0,J_b,"x",function(){return this.elements[0]},function(J_a){this.elements[0]=J_a}),J_o(0,J_b,"y",function(){return this.elements[1]},function(J_a){this.elements[1]=J_a}),J_o(0,J_b,"z",function(){return this.elements[2]},function(J_a){this.elements[2]=J_a}),J_o(0,J_b,"w",function(){return this.elements[3]},function(J_a){this.elements[3]=J_a}),J_a.lerp=function(J_a,J_b,J_c,J_d){var J_e=J_d.elements,J_f=J_a.elements,J_g=J_b.elements,J_h=J_f[0],J_i=J_f[1],J_j=J_f[2],J_k=J_f[3];J_e[0]=J_h+J_c*(J_g[0]-J_h),J_e[1]=J_i+J_c*(J_g[1]-J_i),J_e[2]=J_j+J_c*(J_g[2]-J_j),J_e[3]=J_k+J_c*(J_g[3]-J_k)},J_a.transformByM4x4=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_d[0],J_f=J_d[1],J_g=J_d[2],J_h=J_d[3],J_i=J_b.elements,J_j=J_c.elements;J_j[0]=J_e*J_i[0]+J_f*J_i[4]+J_g*J_i[8]+J_h*J_i[12],J_j[1]=J_e*J_i[1]+J_f*J_i[5]+J_g*J_i[9]+J_h*J_i[13],J_j[2]=J_e*J_i[2]+J_f*J_i[6]+J_g*J_i[10]+J_h*J_i[14],J_j[3]=J_e*J_i[3]+J_f*J_i[7]+J_g*J_i[11]+J_h*J_i[15]},J_a.equals=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;return J_sa.nearEqual(Math.abs(J_c[0]),Math.abs(J_d[0]))&&J_sa.nearEqual(Math.abs(J_c[1]),Math.abs(J_d[1]))&&J_sa.nearEqual(Math.abs(J_c[2]),Math.abs(J_d[2]))&&J_sa.nearEqual(Math.abs(J_c[3]),Math.abs(J_d[3]))},J_a.normalize=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_a.length();0<J_e&&(J_d[0]=J_c[0]*J_e,J_d[1]=J_c[1]*J_e,J_d[2]=J_c[2]*J_e,J_d[3]=J_c[3]*J_e)},J_a.add=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]+J_f[0],J_d[1]=J_e[1]+J_f[1],J_d[2]=J_e[2]+J_f[2],J_d[3]=J_e[3]+J_f[3]},J_a.subtract=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]-J_f[0],J_d[1]=J_e[1]-J_f[1],J_d[2]=J_e[2]-J_f[2],J_d[3]=J_e[3]-J_f[3]},J_a.multiply=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=J_e[0]*J_f[0],J_d[1]=J_e[1]*J_f[1],J_d[2]=J_e[2]*J_f[2],J_d[3]=J_e[3]*J_f[3]},J_a.scale=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements;J_d[0]=J_e[0]*J_b,J_d[1]=J_e[1]*J_b,J_d[2]=J_e[2]*J_b,J_d[3]=J_e[3]*J_b},J_a.Clamp=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements,J_f=J_e[0],J_g=J_e[1],J_h=J_e[2],J_i=J_e[3],J_j=J_b.elements,J_k=J_j[0],J_l=J_j[1],J_m=J_j[2],J_n=J_j[3],J_o=J_c.elements,J_p=J_o[0],J_q=J_o[1],J_r=J_o[2],J_u=J_o[3],J_v=J_d.elements;J_f=(J_f=J_p<J_f?J_p:J_f)<J_k?J_k:J_f,J_g=(J_g=J_q<J_g?J_q:J_g)<J_l?J_l:J_g,J_h=(J_h=J_r<J_h?J_r:J_h)<J_m?J_m:J_h,J_i=(J_i=J_u<J_i?J_u:J_i)<J_n?J_n:J_i,J_v[0]=J_f,J_v[1]=J_g,J_v[2]=J_h,J_v[3]=J_i},J_a.distanceSquared=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0]-J_d[0],J_f=J_c[1]-J_d[1],J_g=J_c[2]-J_d[2],J_h=J_c[3]-J_d[3];return J_e*J_e+J_f*J_f+J_g*J_g+J_h*J_h},J_a.distance=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements,J_e=J_c[0]-J_d[0],J_f=J_c[1]-J_d[1],J_g=J_c[2]-J_d[2],J_h=J_c[3]-J_d[3];return Math.sqrt(J_e*J_e+J_f*J_f+J_g*J_g+J_h*J_h)},J_a.dot=function(J_a,J_b){var J_c=J_a.elements,J_d=J_b.elements;return J_c[0]*J_d[0]+J_c[1]*J_d[1]+J_c[2]*J_d[2]+J_c[3]*J_d[3]},J_a.min=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=Math.min(J_e[0],J_f[0]),J_d[1]=Math.min(J_e[1],J_f[1]),J_d[2]=Math.min(J_e[2],J_f[2]),J_d[3]=Math.min(J_e[3],J_f[3])},J_a.max=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b.elements;J_d[0]=Math.max(J_e[0],J_f[0]),J_d[1]=Math.max(J_e[1],J_f[1]),J_d[2]=Math.max(J_e[2],J_f[2]),J_d[3]=Math.max(J_e[3],J_f[3])},J_l(J_a,["ZERO",function(){return this.ZERO=new J_a},"ONE",function(){return this.ONE=new J_a(1,1,1,1)},"UnitX",function(){return this.UnitX=new J_a(1,0,0,0)},"UnitY",function(){return this.UnitY=new J_a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new J_a(0,0,1,0)},"UnitW",function(){return this.UnitW=new J_a(0,0,0,1)}]),J_a}(),J_ib=function(){function J_f(J_a,J_b,J_c,J_d){this.minDepth=0,this.maxDepth=1,this.x=J_a,this.y=J_b,this.width=J_c,this.height=J_d}J_n(J_f,"laya.d3.math.Viewport");var J_a=J_f.prototype;return J_a.project=function(J_a,J_b,J_c){J_gb.transformV3ToV3(J_a,J_b,J_c);var J_d=J_a.elements,J_e=J_b.elements,J_f=J_c.elements,J_g=J_d[0]*J_e[3]+J_d[1]*J_e[7]+J_d[2]*J_e[11]+J_e[15];1!==J_g&&(J_f[0]=J_f[0]/J_g,J_f[1]=J_f[1]/J_g,J_f[2]=J_f[2]/J_g),J_f[0]=.5*(J_f[0]+1)*this.width+this.x,J_f[1]=.5*(1-J_f[1])*this.height+this.y,J_f[2]=J_f[2]*(this.maxDepth-this.minDepth)+this.minDepth},J_a.unprojectFromMat=function(J_a,J_b,J_c){var J_d=J_a.elements,J_e=J_b.elements,J_f=J_c.elements;J_f[0]=(J_d[0]-this.x)/this.width*2-1,J_f[1]=-((J_d[1]-this.y)/this.height*2-1);var J_g=(this.maxDepth-this.minDepth)/2;J_f[2]=(J_d[2]-this.minDepth-J_g)/J_g;var J_h=J_f[0]*J_e[3]+J_f[1]*J_e[7]+J_f[2]*J_e[11]+J_e[15];J_gb.transformV3ToV3(J_c,J_b,J_c),1!==J_h&&(J_f[0]=J_f[0]/J_h,J_f[1]=J_f[1]/J_h,J_f[2]=J_f[2]/J_h)},J_a.unprojectFromWVP=function(J_a,J_b,J_c,J_d,J_e){J_ab.multiply(J_b,J_c,J_f._tempMatrix4x4),J_d&&J_ab.multiply(J_f._tempMatrix4x4,J_d,J_f._tempMatrix4x4),J_f._tempMatrix4x4.invert(J_f._tempMatrix4x4),this.unprojectFromMat(J_a,J_f._tempMatrix4x4,J_e)},J_l(J_f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new J_ab}]),J_f}(),J_jb=function(){function J_E(J_a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=J_a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}J_n(J_E,"laya.d3.resource.models.SubMesh");var J_a=J_E.prototype;return J_x.imps(J_a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),J_a._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),0===J_a?this._vertexBuffer:null},J_a._getIndexBuffer=function(){return this._indexBuffer},J_a._getStaticBatchBakedVertexs=function(J_a,J_b){var J_c,J_d,J_e=this._vertexBuffer,J_f=J_e.vertexDeclaration,J_g=J_f.getVertexElementByUsage(0).offset/4,J_h=J_f.getVertexElementByUsage(3).offset/4,J_i=J_b.meshRender.lightmapScaleOffset,J_j=0,J_k=0,J_l=0,J_m=0,J_n=0,J_o=0;if(J_i)if(J_d=J_f.getVertexElementByUsage(15))J_l=J_f.vertexStride/4,J_c=0<this._vertexCount?J_e.getData().slice(this._vertexStart*J_l,(this._vertexStart+this._vertexCount)*J_l):J_e.getData().slice(),J_m=J_d.offset/4;else{J_l=(J_o=J_f.vertexStride/4)+2,J_c=this._vertexCount?new Float32Array(this._vertexCount*(J_e.vertexDeclaration.vertexStride/4+2)):new Float32Array(J_e.vertexCount*(J_e.vertexDeclaration.vertexStride/4+2)),J_m=(J_n=J_f.getVertexElementByUsage(2).offset/4)+2;var J_p=J_e.getData();for(J_j=0,J_k=J_p.length/J_o;J_j<J_k;J_j++){var J_q=0;J_q=0<this._vertexCount?(this._vertexStart+J_j)*J_o:J_j*J_o;var J_r=J_j*J_l,J_u=0;for(J_u=0;J_u<J_m;J_u++)J_c[J_r+J_u]=J_p[J_q+J_u];for(J_u=J_m;J_u<J_o;J_u++)J_c[J_r+J_u+2]=J_p[J_q+J_u]}}else J_l=J_f.vertexStride/4,J_c=this._vertexCount?J_e.getData().slice(this._vertexStart*J_l,(this._vertexStart+this._vertexCount)*J_l):J_e.getData().slice();if(J_a){var J_v=J_a.worldMatrix,J_w=J_E._tempMatrix4x40;J_v.invert(J_w);var J_x=J_E._tempMatrix4x41,J_y=J_b.transform.worldMatrix;J_ab.multiply(J_w,J_y,J_x)}else J_x=J_b.transform.worldMatrix;var J_z=J_E._tempQuaternion0;for(J_x.decomposeTransRotScale(J_E._tempVector30,J_z,J_E._tempVector31),J_j=0,J_k=J_c.length/J_l;J_j<J_k;J_j++){var J_A=J_j*J_l+J_g,J_B=J_j*J_l+J_h;if(J_qb.transformVector3ArrayToVector3ArrayCoordinate(J_c,J_A,J_x,J_c,J_A),J_qb.transformVector3ArrayByQuat(J_c,J_B,J_z,J_c,J_B),J_i){var J_C=J_j*J_l+J_m;if(J_d)J_qb.transformLightingMapTexcoordByUV1Array(J_c,J_C,J_i,J_c,J_C);else{var J_D=J_j*J_o+J_n;J_qb.transformLightingMapTexcoordByUV0Array(J_p,J_D,J_i,J_c,J_C)}}}return J_c},J_a._getVertexBuffers=function(){return null},J_a._beforeRender=function(J_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J_a._render=function(J_a){var J_b,J_c=0,J_d=J_a.renderElement;if(1<this._indexCount){var J_e=this._boneIndicesList.length;if(1<J_e){for(var J_f=0;J_f<J_e;J_f++)(J_b=J_d._skinAnimationDatas||this._skinAnimationDatas)&&(J_d._shaderValue.setValue(0,J_b[J_f]),J_a._shader.uploadRenderElementUniforms(J_d._shaderValue.data)),J_F.mainContext.drawElements(4,this._subIndexBufferCount[J_f],5123,2*this._subIndexBufferStart[J_f]);J_A.drawCall+=J_e}else(J_b=J_d._skinAnimationDatas||this._skinAnimationDatas)&&(J_d._shaderValue.setValue(0,J_b[0]),J_a._shader.uploadRenderElementUniforms(J_d._shaderValue.data)),J_F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),J_A.drawCall++;J_c=this._indexCount}else J_c=this._indexBuffer.indexCount,(J_b=J_d._skinAnimationDatas||this._skinAnimationDatas)&&(J_d._shaderValue.setValue(0,J_b[0]),J_a._shader.uploadRenderElementUniforms(J_d._shaderValue.data)),J_F.mainContext.drawElements(4,J_c,5123,0),J_A.drawCall++;J_A.trianglesFaces+=J_c/3},J_a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},J_a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},J_o(0,J_a,"_vertexBufferCount",function(){return 1}),J_o(0,J_a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J_l(J_E,["_tempVector30",function(){return this._tempVector30=new J_gb},"_tempVector31",function(){return this._tempVector31=new J_gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new J_cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new J_ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new J_ab}]),J_E}(),J_kb=function(){function J_a(J_a){this.defineCounter=0,this.defines=null,J_a?(this.defineCounter=J_a.defineCounter,this.defines=J_a.defines.slice()):(this.defineCounter=0,this.defines=[])}return J_n(J_a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),J_a.prototype.registerDefine=function(J_a){var J_b=Math.pow(2,this.defineCounter++);return this.defines[J_b]=J_a,J_b},J_a}(),J_lb=function(){function J_a(){}return J_n(J_a,"laya.d3.shader.ShaderInit3D"),J_a.__init__=function(){var J_a,J_b;J_Ab._globalRegDefine("HIGHPRECISION",J_Ab.SHADERDEFINE_HIGHPRECISION),J_Ab._globalRegDefine("FOG",J_Ab.SHADERDEFINE_FOG),J_Ab._globalRegDefine("DIRECTIONLIGHT",J_Ab.SHADERDEFINE_DIRECTIONLIGHT),J_Ab._globalRegDefine("POINTLIGHT",J_Ab.SHADERDEFINE_POINTLIGHT),J_Ab._globalRegDefine("SPOTLIGHT",J_Ab.SHADERDEFINE_SPOTLIGHT),J_Ab._globalRegDefine("UV",J_Ab.SHADERDEFINE_UV0),J_Ab._globalRegDefine("COLOR",J_Ab.SHADERDEFINE_COLOR),J_Ab._globalRegDefine("UV1",J_Ab.SHADERDEFINE_UV1),J_Ab._globalRegDefine("CASTSHADOW",J_nb.SHADERDEFINE_CAST_SHADOW),J_Ab._globalRegDefine("SHADOWMAP_PSSM1",J_nb.SHADERDEFINE_SHADOW_PSSM1),J_Ab._globalRegDefine("SHADOWMAP_PSSM2",J_nb.SHADERDEFINE_SHADOW_PSSM2),J_Ab._globalRegDefine("SHADOWMAP_PSSM3",J_nb.SHADERDEFINE_SHADOW_PSSM3),J_Ab._globalRegDefine("SHADOWMAP_PCF_NO",J_nb.SHADERDEFINE_SHADOW_PCF_NO),J_Ab._globalRegDefine("SHADOWMAP_PCF1",J_nb.SHADERDEFINE_SHADOW_PCF1),J_Ab._globalRegDefine("SHADOWMAP_PCF2",J_nb.SHADERDEFINE_SHADOW_PCF2),J_Ab._globalRegDefine("SHADOWMAP_PCF3",J_nb.SHADERDEFINE_SHADOW_PCF3),J_Ab._globalRegDefine("DEPTHFOG",J_Ab.SAHDERDEFINE_DEPTHFOG),J_Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),J_Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),J_a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},J_b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var J_c=J_Lb.nameKey.add("SIMPLE");shaderCompile=J_Ab.add(J_c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',J_a,J_b),J_Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),J_Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),J_Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),J_Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),J_Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),J_Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),J_Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),J_Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),J_Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},J_a}(),J_mb=function(){function J_a(){this._data=null,this._data=[]}J_n(J_a,"laya.d3.shader.ValusArray");var J_b=J_a.prototype;return J_b.setValue=function(J_a,J_b){this._data[J_a]=J_b},J_o(0,J_b,"data",function(){return this._data}),J_a}(),J_nb=function(){function J_a(){}return J_a.SHADERDEFINE_RECEIVE_SHADOW=1,J_a.SHADERDEFINE_CAST_SHADOW=512,J_a.SHADERDEFINE_SHADOW_PSSM1=1024,J_a.SHADERDEFINE_SHADOW_PSSM2=2048,J_a.SHADERDEFINE_SHADOW_PSSM3=4096,J_a.SHADERDEFINE_SHADOW_PCF_NO=8192,J_a.SHADERDEFINE_SHADOW_PCF1=16384,J_a.SHADERDEFINE_SHADOW_PCF2=32768,J_a.SHADERDEFINE_SHADOW_PCF3=65536,J_a.MAX_PSSM_COUNT=3,J_a}(),J_ob=function(){function J_X(){}return J_n(J_X,"laya.d3.utils.Picker"),J_X.calculateCursorRay=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_a.elements[0],J_h=J_a.elements[1],J_i=J_X._tempVector30,J_j=J_i.elements;J_j[0]=J_g,J_j[1]=J_h,J_j[2]=J_b.minDepth;var J_k=J_X._tempVector31,J_l=J_k.elements;J_l[0]=J_g,J_l[1]=J_h,J_l[2]=J_b.maxDepth;var J_m=J_f.origin,J_n=J_X._tempVector32;J_b.unprojectFromWVP(J_i,J_c,J_d,J_e,J_m),J_b.unprojectFromWVP(J_k,J_c,J_d,J_e,J_n);var J_o=J_f.direction.elements;J_o[0]=J_n.x-J_m.x,J_o[1]=J_n.y-J_m.y,J_o[2]=J_n.z-J_m.z,J_gb.normalize(J_f.direction,J_f.direction)},J_X.rayIntersectsPositionsAndIndices=function(J_a,J_b,J_c,J_d,J_e){for(var J_f=J_c.vertexStride/4,J_g=J_c.getVertexElementByUsage(0).offset/4,J_h=Number.MAX_VALUE,J_i=-1,J_j=-1,J_k=-1,J_l=0;J_l<J_d.length;J_l+=3){var J_m=J_X._tempVector35,J_n=J_m.elements,J_o=J_d[J_l]*J_f,J_p=J_o+J_g;J_n[0]=J_b[J_p],J_n[1]=J_b[1+J_p],J_n[2]=J_b[2+J_p];var J_q=J_X._tempVector36,J_r=J_q.elements,J_u=J_d[J_l+1]*J_f,J_v=J_u+J_g;J_r[0]=J_b[J_v],J_r[1]=J_b[1+J_v],J_r[2]=J_b[2+J_v];var J_w=J_X._tempVector37,J_x=J_w.elements,J_y=J_d[J_l+2]*J_f,J_z=J_y+J_g;J_x[0]=J_b[J_z],J_x[1]=J_b[1+J_z],J_x[2]=J_b[2+J_z];var J_A=laya.d3.utils.Picker.rayIntersectsTriangle(J_a,J_m,J_q,J_w);!isNaN(J_A)&&J_A<J_h&&(J_h=J_A,J_i=J_o,J_j=J_u,J_k=J_y)}if(J_h===Number.MAX_VALUE)return J_e.position.toDefault(),J_e.distance=Number.MAX_VALUE,J_e.trianglePositions[0].toDefault(),J_e.trianglePositions[1].toDefault(),J_e.trianglePositions[2].toDefault(),J_e.triangleNormals[0].toDefault(),J_e.triangleNormals[1].toDefault(),J_e.triangleNormals[2].toDefault(),!1;J_e.distance=J_h,J_gb.scale(J_a.direction,J_h,J_e.position),J_gb.add(J_a.origin,J_e.position,J_e.position);var J_B=J_e.trianglePositions,J_C=J_B[0],J_D=J_B[1],J_E=J_B[2],J_F=J_C.elements,J_G=J_D.elements,J_H=J_E.elements,J_I=J_i+J_g;J_F[0]=J_b[J_I],J_F[1]=J_b[J_I+1],J_F[2]=J_b[J_I+2];var J_J=J_j+J_g;J_G[0]=J_b[J_J],J_G[1]=J_b[J_J+1],J_G[2]=J_b[J_J+2];var J_K=J_k+J_g;J_H[0]=J_b[J_K],J_H[1]=J_b[J_K+1],J_H[2]=J_b[J_K+2];var J_L=J_c.getVertexElementByUsage(3);if(J_L){var J_M=J_L.offset/4,J_N=J_e.triangleNormals,J_O=J_N[0],J_P=J_N[1],J_Q=J_N[2],J_R=J_O.elements,J_S=J_P.elements,J_T=J_Q.elements,J_U=J_i+J_M;J_R[0]=J_b[J_U],J_R[1]=J_b[J_U+1],J_R[2]=J_b[J_U+2];var J_V=J_j+J_M;J_S[0]=J_b[J_V],J_S[1]=J_b[J_V+1],J_S[2]=J_b[J_V+2];var J_W=J_k+J_M;J_T[0]=J_b[J_W],J_T[1]=J_b[J_W+1],J_T[2]=J_b[J_W+2]}return!0},J_X.rayIntersectsTriangle=function(J_a,J_b,J_c,J_d){var J_e=J_X._tempVector30,J_f=J_X._tempVector31;J_gb.subtract(J_c,J_b,J_e),J_gb.subtract(J_d,J_b,J_f);var J_g,J_h=J_X._tempVector32;if(J_gb.cross(J_a.direction,J_f,J_h),(J_g=J_gb.dot(J_e,J_h))>-Number.MIN_VALUE&&J_g<Number.MIN_VALUE)return Number.NaN;var J_i,J_j=1/J_g,J_k=J_X._tempVector33;if(J_gb.subtract(J_a.origin,J_b,J_k),J_i=J_gb.dot(J_k,J_h),(J_i*=J_j)<0||1<J_i)return Number.NaN;var J_l,J_m,J_n=J_X._tempVector34;return J_gb.cross(J_k,J_e,J_n),J_l=J_gb.dot(J_a.direction,J_n),(J_l*=J_j)<0||1<J_i+J_l?Number.NaN:(J_m=J_gb.dot(J_f,J_n),(J_m*=J_j)<0?Number.NaN:J_m)},J_l(J_X,["_tempVector30",function(){return this._tempVector30=new J_gb},"_tempVector31",function(){return this._tempVector31=new J_gb},"_tempVector32",function(){return this._tempVector32=new J_gb},"_tempVector33",function(){return this._tempVector33=new J_gb},"_tempVector34",function(){return this._tempVector34=new J_gb},"_tempVector35",function(){return this._tempVector35=new J_gb},"_tempVector36",function(){return this._tempVector36=new J_gb},"_tempVector37",function(){return this._tempVector37=new J_gb}]),J_X}(),J_pb=(function(){function J_a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new J_gb,new J_gb,new J_gb],this.trianglePositions.length=3,this.triangleNormals=[new J_gb,new J_gb,new J_gb],this.triangleNormals.length=3,this.position=new J_gb}J_n(J_a,"laya.d3.utils.RaycastHit"),J_a.prototype.cloneTo=function(J_a){J_a.distance=this.distance,this.trianglePositions[0].cloneTo(J_a.trianglePositions[0]),this.trianglePositions[1].cloneTo(J_a.trianglePositions[1]),this.trianglePositions[2].cloneTo(J_a.trianglePositions[2]),this.triangleNormals[0].cloneTo(J_a.triangleNormals[0]),this.triangleNormals[1].cloneTo(J_a.triangleNormals[1]),this.triangleNormals[2].cloneTo(J_a.triangleNormals[2]),this.position.cloneTo(J_a.position),J_a.sprite3D=this.sprite3D}}(),function(){function J_a(J_a,J_b){this._width=0,this._height=0,this._width=J_a,this._height=J_b}J_n(J_a,"laya.d3.utils.Size");var J_b=J_a.prototype;return J_o(0,J_b,"width",function(){return-1===this._width?J_Y.clientWidth:this._width}),J_o(0,J_b,"height",function(){return-1===this._height?J_Y.clientHeight:this._height}),J_o(1,J_a,"fullScreen",function(){return new J_a(-1,-1)}),J_a}()),J_qb=function(){function J_I(){}return J_n(J_I,"laya.d3.utils.Utils3D"),J_I._rotationTransformScaleSkinAnimation=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l){var J_m,J_n,J_o,J_p,J_q,J_r=J_I._tempArray16_0,J_u=J_I._tempArray16_1,J_v=J_I._tempArray16_2,J_w=J_d+J_d,J_x=J_e+J_e,J_y=J_f+J_f,J_z=J_d*J_w,J_A=J_e*J_w,J_B=J_e*J_x,J_C=J_f*J_w,J_D=J_f*J_x,J_E=J_f*J_y,J_F=J_g*J_w,J_G=J_g*J_x,J_H=J_g*J_y;for(J_r[15]=1,J_r[0]=1-J_B-J_E,J_r[1]=J_A+J_H,J_r[2]=J_C-J_G,J_r[4]=J_A-J_H,J_r[5]=1-J_z-J_E,J_r[6]=J_D+J_F,J_r[8]=J_C+J_G,J_r[9]=J_D-J_F,J_r[10]=1-J_z-J_B,J_u[15]=1,J_u[0]=J_h,J_u[5]=J_i,J_u[10]=J_j,J_m=0;J_m<4;J_m++)J_n=J_r[J_m],J_o=J_r[J_m+4],J_p=J_r[J_m+8],J_q=J_r[J_m+12],J_v[J_m]=J_n,J_v[J_m+4]=J_o,J_v[J_m+8]=J_p,J_v[J_m+12]=J_n*J_a+J_o*J_b+J_p*J_c+J_q;for(J_m=0;J_m<4;J_m++)J_n=J_v[J_m],J_o=J_v[J_m+4],J_p=J_v[J_m+8],J_q=J_v[J_m+12],J_k[J_m+J_l]=J_n*J_u[0]+J_o*J_u[1]+J_p*J_u[2]+J_q*J_u[3],J_k[J_m+J_l+4]=J_n*J_u[4]+J_o*J_u[5]+J_p*J_u[6]+J_q*J_u[7],J_k[J_m+J_l+8]=J_n*J_u[8]+J_o*J_u[9]+J_p*J_u[10]+J_q*J_u[11],J_k[J_m+J_l+12]=J_n*J_u[12]+J_o*J_u[13]+J_p*J_u[14]+J_q*J_u[15]},J_I._createNodeByJson=function(J_a,J_b,J_c,J_d){if(!J_c)switch(J_b.type){case"Sprite3D":J_c=new J_Kb;break;case"MeshSprite3D":J_c=new J_Xb;break;case"SkinnedMeshSprite3D":J_c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":J_c=new ShuriKenParticle3D;break;case"TrailSprite3D":J_c=new TrailSprite3D;break;case"Terrain":J_c=new Terrain;break;case"Camera":J_c=new J_Wb;break;case"DirectionLight":J_c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var J_e=J_b.props;if(J_e)for(var J_f in J_e)J_c[J_f]=J_e[J_f];var J_g=J_b.customProps;J_g&&(J_c instanceof laya.d3.core.Sprite3D?(J_c._parseBaseCustomProps(J_g),J_c._parseCustomProps(J_a,J_d,J_g,J_b),J_c._parseCustomComponent(J_a,J_d,J_b.components)):J_c._parseCustomProps(J_a,J_d,J_g,J_b));var J_h=J_b.child;if(J_h)for(var J_i=0,J_j=J_h.length;J_i<J_j;J_i++){var J_k=J_I._createNodeByJson(J_a,J_h[J_i],null,J_d);J_c.addChild(J_k)}return J_c},J_I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h,J_i=0,J_j=0,J_k=J_a.length;for(J_g=0;J_g<J_k;J_i+=J_a[J_g].keyframeWidth,J_j+=16,J_g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(J_b[J_i+0],J_b[J_i+1],J_b[J_i+2],J_b[J_i+3],J_b[J_i+4],J_b[J_i+5],J_b[J_i+6],J_b[J_i+7],J_b[J_i+8],J_b[J_i+9],J_d,J_j),0!=J_g&&(J_h=16*J_a[J_g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(J_d,J_h,J_d,J_j,J_d,J_j));var J_l=J_c.length;for(J_g=0;J_g<J_l;J_g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J_d,16*J_f[J_g],J_c[J_g],J_e,16*J_g)},J_I._computeAnimationDatasByArrayAndMatrixFast=function(J_a,J_b,J_c,J_d){for(var J_e=0,J_f=J_a.length;J_e<J_f;J_e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J_b,16*J_d[J_e],J_a[J_e],J_c,16*J_e)},J_I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g,J_h=0,J_i=0,J_j=J_a.length;for(J_f=0;J_f<J_j;J_h+=J_a[J_f].keyframeWidth,J_i+=16,J_f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(J_b[J_h+7],J_b[J_h+8],J_b[J_h+9],J_b[J_h+3],J_b[J_h+4],J_b[J_h+5],J_b[J_h+6],J_b[J_h+0],J_b[J_h+1],J_b[J_h+2],J_d,J_i),0!=J_f&&(J_g=16*J_a[J_f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(J_d,J_g,J_d,J_i,J_d,J_i));var J_k=J_c.length;for(J_f=0;J_f<J_k;J_f++){var J_l=16*J_f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J_d,J_l,J_c[J_f],J_e,J_l)}},J_I._computeAnimationDatasByArrayAndMatrixFastOld=function(J_a,J_b,J_c){for(var J_d=J_a.length,J_e=0;J_e<J_d;J_e++){var J_f=16*J_e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J_b,J_f,J_a[J_e],J_c,J_f)}},J_I._computeRootAnimationData=function(J_a,J_b,J_c){for(var J_d=0,J_e=0,J_f=0,J_g=J_a.length;J_d<J_g;J_e+=J_a[J_d].keyframeWidth,J_f+=16,J_d++)laya.d3.utils.Utils3D.createAffineTransformationArray(J_b[J_e+0],J_b[J_e+1],J_b[J_e+2],J_b[J_e+3],J_b[J_e+4],J_b[J_e+5],J_b[J_e+6],J_b[J_e+7],J_b[J_e+8],J_b[J_e+9],J_c,J_f)},J_I.transformVector3ArrayByQuat=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_c.elements,J_g=J_a[J_b],J_h=J_a[J_b+1],J_i=J_a[J_b+2],J_j=J_f[0],J_k=J_f[1],J_l=J_f[2],J_m=J_f[3],J_n=J_m*J_g+J_k*J_i-J_l*J_h,J_o=J_m*J_h+J_l*J_g-J_j*J_i,J_p=J_m*J_i+J_j*J_h-J_k*J_g,J_q=-J_j*J_g-J_k*J_h-J_l*J_i;J_d[J_e]=J_n*J_m+J_q*-J_j+J_o*-J_l-J_p*-J_k,J_d[J_e+1]=J_o*J_m+J_q*-J_k+J_p*-J_j-J_n*-J_l,J_d[J_e+2]=J_p*J_m+J_q*-J_l+J_n*-J_k-J_o*-J_j},J_I.mulMatrixByArray=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h,J_i,J_j,J_k;if(J_e===J_c){for(J_c=J_I._tempArray16_3,J_g=0;J_g<16;++J_g)J_c[J_g]=J_e[J_f+J_g];J_d=0}for(J_g=0;J_g<4;J_g++)J_h=J_a[J_b+J_g],J_i=J_a[J_b+J_g+4],J_j=J_a[J_b+J_g+8],J_k=J_a[J_b+J_g+12],J_e[J_f+J_g]=J_h*J_c[J_d+0]+J_i*J_c[J_d+1]+J_j*J_c[J_d+2]+J_k*J_c[J_d+3],J_e[J_f+J_g+4]=J_h*J_c[J_d+4]+J_i*J_c[J_d+5]+J_j*J_c[J_d+6]+J_k*J_c[J_d+7],J_e[J_f+J_g+8]=J_h*J_c[J_d+8]+J_i*J_c[J_d+9]+J_j*J_c[J_d+10]+J_k*J_c[J_d+11],J_e[J_f+J_g+12]=J_h*J_c[J_d+12]+J_i*J_c[J_d+13]+J_j*J_c[J_d+14]+J_k*J_c[J_d+15]},J_I.mulMatrixByArrayFast=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h,J_i,J_j,J_k;for(J_g=0;J_g<4;J_g++)J_h=J_a[J_b+J_g],J_i=J_a[J_b+J_g+4],J_j=J_a[J_b+J_g+8],J_k=J_a[J_b+J_g+12],J_e[J_f+J_g]=J_h*J_c[J_d+0]+J_i*J_c[J_d+1]+J_j*J_c[J_d+2]+J_k*J_c[J_d+3],J_e[J_f+J_g+4]=J_h*J_c[J_d+4]+J_i*J_c[J_d+5]+J_j*J_c[J_d+6]+J_k*J_c[J_d+7],J_e[J_f+J_g+8]=J_h*J_c[J_d+8]+J_i*J_c[J_d+9]+J_j*J_c[J_d+10]+J_k*J_c[J_d+11],J_e[J_f+J_g+12]=J_h*J_c[J_d+12]+J_i*J_c[J_d+13]+J_j*J_c[J_d+14]+J_k*J_c[J_d+15]},J_I.mulMatrixByArrayAndMatrixFast=function(J_a,J_b,J_c,J_d,J_e){var J_f,J_g,J_h,J_i,J_j,J_k=J_c.elements,J_l=J_k[0],J_m=J_k[1],J_n=J_k[2],J_o=J_k[3],J_p=J_k[4],J_q=J_k[5],J_r=J_k[6],J_u=J_k[7],J_v=J_k[8],J_w=J_k[9],J_x=J_k[10],J_y=J_k[11],J_z=J_k[12],J_A=J_k[13],J_B=J_k[14],J_C=J_k[15],J_D=J_b,J_E=J_b+4,J_F=J_b+8,J_G=J_b+12,J_H=J_e,J_I=J_e+4,J_J=J_e+8,J_K=J_e+12;for(J_f=0;J_f<4;J_f++)J_g=J_a[J_D+J_f],J_h=J_a[J_E+J_f],J_i=J_a[J_F+J_f],J_j=J_a[J_G+J_f],J_d[J_H+J_f]=J_g*J_l+J_h*J_m+J_i*J_n+J_j*J_o,J_d[J_I+J_f]=J_g*J_p+J_h*J_q+J_i*J_r+J_j*J_u,J_d[J_J+J_f]=J_g*J_v+J_h*J_w+J_i*J_x+J_j*J_y,J_d[J_K+J_f]=J_g*J_z+J_h*J_A+J_i*J_B+J_j*J_C},J_I.createAffineTransformationArray=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l){var J_m=J_d+J_d,J_n=J_e+J_e,J_o=J_f+J_f,J_p=J_d*J_m,J_q=J_d*J_n,J_r=J_d*J_o,J_u=J_e*J_n,J_v=J_e*J_o,J_w=J_f*J_o,J_x=J_g*J_m,J_y=J_g*J_n,J_z=J_g*J_o;J_k[J_l+0]=(1-(J_u+J_w))*J_h,J_k[J_l+1]=(J_q+J_z)*J_h,J_k[J_l+2]=(J_r-J_y)*J_h,J_k[J_l+3]=0,J_k[J_l+4]=(J_q-J_z)*J_i,J_k[J_l+5]=(1-(J_p+J_w))*J_i,J_k[J_l+6]=(J_v+J_x)*J_i,J_k[J_l+7]=0,J_k[J_l+8]=(J_r+J_y)*J_j,J_k[J_l+9]=(J_v-J_x)*J_j,J_k[J_l+10]=(1-(J_p+J_u))*J_j,J_k[J_l+11]=0,J_k[J_l+12]=J_a,J_k[J_l+13]=J_b,J_k[J_l+14]=J_c,J_k[J_l+15]=1},J_I.transformVector3ArrayToVector3ArrayCoordinate=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_I._tempArray4_0,J_g=J_a[J_b+0],J_h=J_a[J_b+1],J_i=J_a[J_b+2],J_j=J_c.elements;J_f[0]=J_g*J_j[0]+J_h*J_j[4]+J_i*J_j[8]+J_j[12],J_f[1]=J_g*J_j[1]+J_h*J_j[5]+J_i*J_j[9]+J_j[13],J_f[2]=J_g*J_j[2]+J_h*J_j[6]+J_i*J_j[10]+J_j[14],J_f[3]=1/(J_g*J_j[3]+J_h*J_j[7]+J_i*J_j[11]+J_j[15]),J_d[J_e+0]=J_f[0]*J_f[3],J_d[J_e+1]=J_f[1]*J_f[3],J_d[J_e+2]=J_f[2]*J_f[3]},J_I.transformLightingMapTexcoordByUV0Array=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_c.elements;J_d[J_e+0]=J_a[J_b+0]*J_f[0]+J_f[2],J_d[J_e+1]=(J_a[J_b+1]-1)*J_f[1]+J_f[3]},J_I.transformLightingMapTexcoordByUV1Array=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_c.elements;J_d[J_e+0]=J_a[J_b+0]*J_f[0]+J_f[2],J_d[J_e+1]=1+J_a[J_b+1]*J_f[1]+J_f[3]},J_I.getURLVerion=function(J_a){var J_b=J_a.indexOf("?");return 0<=J_b?J_a.substr(J_b):null},J_I._quaternionCreateFromYawPitchRollArray=function(J_a,J_b,J_c,J_d){var J_e=.5*J_c,J_f=.5*J_b,J_g=.5*J_a,J_h=Math.sin(J_e),J_i=Math.cos(J_e),J_j=Math.sin(J_f),J_k=Math.cos(J_f),J_l=Math.sin(J_g),J_m=Math.cos(J_g);J_d[0]=J_m*J_j*J_i+J_l*J_k*J_h,J_d[1]=J_l*J_k*J_i-J_m*J_j*J_h,J_d[2]=J_m*J_k*J_h-J_l*J_j*J_i,J_d[3]=J_m*J_k*J_i+J_l*J_j*J_h},J_I._createAffineTransformationArray=function(J_a,J_b,J_c,J_d){var J_e=J_b[0],J_f=J_b[1],J_g=J_b[2],J_h=J_b[3],J_i=J_e+J_e,J_j=J_f+J_f,J_k=J_g+J_g,J_l=J_e*J_i,J_m=J_e*J_j,J_n=J_e*J_k,J_o=J_f*J_j,J_p=J_f*J_k,J_q=J_g*J_k,J_r=J_h*J_i,J_u=J_h*J_j,J_v=J_h*J_k,J_w=J_c[0],J_x=J_c[1],J_y=J_c[2];J_d[0]=(1-(J_o+J_q))*J_w,J_d[1]=(J_m+J_v)*J_w,J_d[2]=(J_n-J_u)*J_w,J_d[3]=0,J_d[4]=(J_m-J_v)*J_x,J_d[5]=(1-(J_l+J_q))*J_x,J_d[6]=(J_p+J_r)*J_x,J_d[7]=0,J_d[8]=(J_n+J_u)*J_y,J_d[9]=(J_p-J_r)*J_y,J_d[10]=(1-(J_l+J_o))*J_y,J_d[11]=0,J_d[12]=J_a[0],J_d[13]=J_a[1],J_d[14]=J_a[2],J_d[15]=1},J_I._mulMatrixArray=function(J_a,J_b,J_c,J_d){var J_e,J_f,J_g,J_h,J_i,J_j=J_b.elements,J_k=J_j[0],J_l=J_j[1],J_m=J_j[2],J_n=J_j[3],J_o=J_j[4],J_p=J_j[5],J_q=J_j[6],J_r=J_j[7],J_u=J_j[8],J_v=J_j[9],J_w=J_j[10],J_x=J_j[11],J_y=J_j[12],J_z=J_j[13],J_A=J_j[14],J_B=J_j[15],J_C=J_d,J_D=J_d+4,J_E=J_d+8,J_F=J_d+12;for(J_e=0;J_e<4;J_e++)J_f=J_a[J_e],J_g=J_a[J_e+4],J_h=J_a[J_e+8],J_i=J_a[J_e+12],J_c[J_C+J_e]=J_f*J_k+J_g*J_l+J_h*J_m+J_i*J_n,J_c[J_D+J_e]=J_f*J_o+J_g*J_p+J_h*J_q+J_i*J_r,J_c[J_E+J_e]=J_f*J_u+J_g*J_v+J_h*J_w+J_i*J_x,J_c[J_F+J_e]=J_f*J_y+J_g*J_z+J_h*J_A+J_i*J_B},J_I.getYawPitchRoll=function(J_a,J_b){J_I.transformQuat(J_gb.ForwardRH,J_a,J_cb.TEMPVector31),J_I.transformQuat(J_gb.Up,J_a,J_cb.TEMPVector32);var J_c=J_cb.TEMPVector32.elements;J_I.angleTo(J_gb.ZERO,J_cb.TEMPVector31,J_cb.TEMPVector33);var J_d=J_cb.TEMPVector33.elements;J_d[0]==Math.PI/2?(J_d[1]=J_I.arcTanAngle(J_c[2],J_c[0]),J_d[2]=0):J_d[0]==-Math.PI/2?(J_d[1]=J_I.arcTanAngle(-J_c[2],-J_c[0]),J_d[2]=0):(J_ab.createRotationY(-J_d[1],J_cb.TEMPMatrix0),J_ab.createRotationX(-J_d[0],J_cb.TEMPMatrix1),J_gb.transformCoordinate(J_cb.TEMPVector32,J_cb.TEMPMatrix0,J_cb.TEMPVector32),J_gb.transformCoordinate(J_cb.TEMPVector32,J_cb.TEMPMatrix1,J_cb.TEMPVector32),J_d[2]=J_I.arcTanAngle(J_c[1],-J_c[0])),J_d[1]<=-Math.PI&&(J_d[1]=Math.PI),J_d[2]<=-Math.PI&&(J_d[2]=Math.PI),J_d[1]>=Math.PI&&J_d[2]>=Math.PI&&(J_d[1]=0,J_d[2]=0,J_d[0]=Math.PI-J_d[0]),J_b[0]=J_d[1],J_b[1]=J_d[0],J_b[2]=J_d[2]},J_I.arcTanAngle=function(J_a,J_b){return 0==J_a?1==J_b?Math.PI/2:-Math.PI/2:0<J_a?Math.atan(J_b/J_a):J_a<0?0<J_b?Math.atan(J_b/J_a)+Math.PI:Math.atan(J_b/J_a)-Math.PI:0},J_I.angleTo=function(J_a,J_b,J_c){J_gb.subtract(J_b,J_a,J_cb.TEMPVector30),J_gb.normalize(J_cb.TEMPVector30,J_cb.TEMPVector30),J_c.elements[0]=Math.asin(J_cb.TEMPVector30.y),J_c.elements[1]=J_I.arcTanAngle(-J_cb.TEMPVector30.z,-J_cb.TEMPVector30.x)},J_I.transformQuat=function(J_a,J_b,J_c){var J_d=J_c.elements,J_e=J_a.elements,J_f=J_b,J_g=J_e[0],J_h=J_e[1],J_i=J_e[2],J_j=J_f[0],J_k=J_f[1],J_l=J_f[2],J_m=J_f[3],J_n=J_m*J_g+J_k*J_i-J_l*J_h,J_o=J_m*J_h+J_l*J_g-J_j*J_i,J_p=J_m*J_i+J_j*J_h-J_k*J_g,J_q=-J_j*J_g-J_k*J_h-J_l*J_i;J_d[0]=J_n*J_m+J_q*-J_j+J_o*-J_l-J_p*-J_k,J_d[1]=J_o*J_m+J_q*-J_k+J_p*-J_j-J_n*-J_l,J_d[2]=J_p*J_m+J_q*-J_l+J_n*-J_k-J_o*-J_j},J_I.quaterionNormalize=function(J_a,J_b){var J_c=J_a[0],J_d=J_a[1],J_e=J_a[2],J_f=J_a[3],J_g=J_c*J_c+J_d*J_d+J_e*J_e+J_f*J_f;0<J_g&&(J_g=1/Math.sqrt(J_g),J_b[0]=J_c*J_g,J_b[1]=J_d*J_g,J_b[2]=J_e*J_g,J_b[3]=J_f*J_g)},J_I.matrix4x4MultiplyFFF=function(J_a,J_b,J_c){var J_d,J_e,J_f,J_g,J_h;if(J_c===J_b)for(J_b=new Float32Array(16),J_d=0;J_d<16;++J_d)J_b[J_d]=J_c[J_d];for(J_d=0;J_d<4;J_d++)J_e=J_a[J_d],J_f=J_a[J_d+4],J_g=J_a[J_d+8],J_h=J_a[J_d+12],J_c[J_d]=J_e*J_b[0]+J_f*J_b[1]+J_g*J_b[2]+J_h*J_b[3],J_c[J_d+4]=J_e*J_b[4]+J_f*J_b[5]+J_g*J_b[6]+J_h*J_b[7],J_c[J_d+8]=J_e*J_b[8]+J_f*J_b[9]+J_g*J_b[10]+J_h*J_b[11],J_c[J_d+12]=J_e*J_b[12]+J_f*J_b[13]+J_g*J_b[14]+J_h*J_b[15]},J_I.matrix4x4MultiplyMFM=function(J_a,J_b,J_c){J_I.matrix4x4MultiplyFFF(J_a.elements,J_b,J_c.elements)},J_l(J_I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new J_gb},"_tempVector3_1",function(){return this._tempVector3_1=new J_gb},"_tempVector3_2",function(){return this._tempVector3_2=new J_gb},"_tempVector3_3",function(){return this._tempVector3_3=new J_gb},"_tempVector3_4",function(){return this._tempVector3_4=new J_gb},"_tempVector3_5",function(){return this._tempVector3_5=new J_gb},"_tempVector3_6",function(){return this._tempVector3_6=new J_gb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),J_I}(),J_rb=function(){function J_G(){}return J_n(J_G,"Laya3D"),J_G._cancelLoadByUrl=function(J_a){J_x.loader.cancelLoadByUrl(J_a),J_G._innerFirstLevelLoaderManager.cancelLoadByUrl(J_a),J_G._innerSecondLevelLoaderManager.cancelLoadByUrl(J_a),J_G._innerThirdLevelLoaderManager.cancelLoadByUrl(J_a),J_G._innerFourthLevelLoaderManager.cancelLoadByUrl(J_a)},J_G._changeWebGLSize=function(J_a,J_b){J_F.onStageResize(J_a,J_b),J_Y.clientWidth=J_a,J_Y.clientHeight=J_b},J_G.__init__=function(){var J_a=J_b.createMap;J_a.lh=[J_Kb,"SPRITE3DHIERARCHY"],J_a.ls=[J_Jb,"SPRITE3DHIERARCHY"],J_a.lm=[J_Rb,"MESH"],J_a.lmat=[J_Mb,"MATERIAL"],J_a.jpg=[J_Tb,"nativeimage"],J_a.jpeg=[J_Tb,"nativeimage"],J_a.png=[J_Tb,"nativeimage"],J_a.pkm=[J_Tb,"arraybuffer"],J_a.raw=[J_Pb,"arraybuffer"],J_a.mipmaps=[J_Pb,"arraybuffer"],J_r.parserMap.SPRITE3DHIERARCHY=J_G._loadHierarchy,J_r.parserMap.MESH=J_G._loadMesh,J_r.parserMap.MATERIAL=J_G._loadMaterial,J_r.parserMap.TEXTURECUBE=J_G._loadTextureCube,J_r.parserMap.TERRAIN=J_G._loadTerrain,J_G._innerFirstLevelLoaderManager.on("error",null,J_G._eventLoadManagerError),J_G._innerSecondLevelLoaderManager.on("error",null,J_G._eventLoadManagerError),J_G._innerThirdLevelLoaderManager.on("error",null,J_G._eventLoadManagerError),J_G._innerFourthLevelLoaderManager.on("error",null,J_G._eventLoadManagerError)},J_G.READ_BLOCK=function(){return J_G._readData.pos+=4,!0},J_G.READ_DATA=function(){return J_G._DATA.offset=J_G._readData.getUint32(),J_G._DATA.size=J_G._readData.getUint32(),!0},J_G.READ_STRINGS=function(){var J_a=[],J_b={offset:0,size:0};J_b.offset=J_G._readData.getUint16(),J_b.size=J_G._readData.getUint16();J_G._readData.pos;J_G._readData.pos=J_b.offset+J_G._DATA.offset;for(var J_c=0;J_c<J_b.size;J_c++){var J_d=J_G._readData.readUTFString();-1===J_d.lastIndexOf(".lmat")&&-1===J_d.lastIndexOf(".lpbr")||J_a.push(J_d)}return J_a},J_G.formatRelativePath=function(J_a,J_b){var J_c;if("."===J_b.charAt(0)){for(var J_d=(J_a+J_b).split("/"),J_e=0,J_f=J_d.length;J_e<J_f;J_e++)if(".."==J_d[J_e]){var J_g=J_e-1;0<J_g&&".."!==J_d[J_g]&&(J_d.splice(J_g,2),J_e-=2)}J_c=J_d.join("/")}else J_c=J_a+J_b;return null!=J_E.customFormat&&(J_c=J_E.customFormat(J_c,null)),J_c},J_G._eventLoadManagerError=function(J_a){J_x.loader.event("error",J_a)},J_G._addHierarchyInnerUrls=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g=J_G.formatRelativePath(J_d,J_e);J_c&&(J_g+=J_c),J_a.push({url:J_g,clas:J_f}),J_b[J_e]=J_g},J_G._getSprite3DHierarchyInnerUrls=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){var J_h,J_i=0,J_j=0;switch(J_a.type){case"Scene":var J_k=J_a.customProps.lightmaps;for(J_i=0,J_j=J_k.length;J_i<J_j;J_i++){var J_l=J_k[J_i].replace(".exr",".png");J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_l,J_Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var J_m;if(J_a.instanceParams)(J_m=J_a.instanceParams.loadPath)&&J_G._addHierarchyInnerUrls(J_b,J_e,J_f,J_g,J_m,J_Rb);else{(J_m=(J_h=J_a.customProps).meshPath)&&J_G._addHierarchyInnerUrls(J_b,J_e,J_f,J_g,J_m,J_Rb);var J_n=J_h.materials;if(J_n)for(J_i=0,J_j=J_n.length;J_i<J_j;J_i++){for(var J_o=J_n[J_i],J_p=J_o.type.split("."),J_q=J_H.window,J_r=0,J_u=J_p.length;J_r<J_u;++J_r){J_q=J_q[this.clasPaths[J_r]]}if("function"!=typeof J_q)throw"_getSprite3DHierarchyInnerUrls 错误: "+J_o.type+" 不是类";J_G._addHierarchyInnerUrls(J_c,J_e,J_f,J_g,J_o.path,J_q)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var J_v=(J_h=J_a.customProps).meshPath;J_v&&J_G._addHierarchyInnerUrls(J_b,J_e,J_f,J_g,J_v,J_Rb);var J_w=J_h.material;if(J_w){J_p=J_w.type.split("."),J_q=J_H.window;for(J_r=0,J_u=J_p.length;J_r<J_u;++J_r){J_q=J_q[this.clasPaths[J_r]]}J_G._addHierarchyInnerUrls(J_c,J_e,J_f,J_g,J_w.path,J_q)}else{var J_x=J_h.materialPath;if(J_x)J_G._addHierarchyInnerUrls(J_c,J_e,J_f,J_g,J_x,ShurikenParticleMaterial);else{var J_y=J_h.texturePath;J_y&&J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_y,J_Tb)}}break;case"Terrain":J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_a.customProps.dataPath,TerrainRes)}var J_z=J_a.components;for(var J_A in J_z){var J_B=J_z[J_A];switch(J_A){case"Animator":var J_C=J_B.avatarPath;if(J_C)J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_C,Avatar);else{var J_D=J_B.avatar;J_D&&J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_D.path,Avatar)}var J_E=J_B.clipPaths;for(J_i=0,J_j=J_E.length;J_i<J_j;J_i++)J_G._addHierarchyInnerUrls(J_d,J_e,J_f,J_g,J_E[J_i],AnimationClip)}}var J_F=J_a.child;for(J_i=0,J_j=J_F.length;J_i<J_j;J_i++)J_G._getSprite3DHierarchyInnerUrls(J_F[J_i],J_b,J_c,J_d,J_e,J_f,J_g)},J_G._loadHierarchy=function(J_a){J_a.on("loaded",null,J_G._onHierarchylhLoaded,[J_a,J_a._class._getGroup()]),J_a.load(J_a.url,"json",!1,null,!0)},J_G._onHierarchylhLoaded=function(J_a,J_b,J_c){if(J_a._class.destroyed)J_a.endLoad();else{var J_d=J_a.url,J_e=J_qb.getURLVerion(J_d),J_f=J_E.getPath(J_d),J_g=[],J_h=[],J_i=[],J_j={};J_G._getSprite3DHierarchyInnerUrls(J_c,J_g,J_h,J_i,J_j,J_e,J_f);var J_k=J_g.length+J_h.length+J_i.length,J_l=J_k+1,J_m=1/J_l;if(J_G._onProcessChange(J_a,0,J_m,1),0<J_i.length){var J_n=J_k/J_l,J_o=J_D.create(null,J_G._onProcessChange,[J_a,J_m,J_n],!1);J_G._innerFourthLevelLoaderManager.create(J_i,J_D.create(null,J_G._onHierarchyInnerForthLevResouLoaded,[J_a,J_b,J_o,J_c,J_j,J_g,J_h,J_m+J_n*J_i.length,J_n]),J_o,null,null,1,!0,J_b)}else J_G._onHierarchyInnerForthLevResouLoaded(J_a,J_b,null,J_c,J_j,J_g,J_h,J_m,J_n)}},J_G._onHierarchyInnerForthLevResouLoaded=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){if(J_a._class.destroyed)J_a.endLoad();else if(J_c&&J_c.recover(),0<J_g.length){var J_j=J_D.create(null,J_G._onProcessChange,[J_a,J_h,J_i],!1);J_G._innerSecondLevelLoaderManager.create(J_g,J_D.create(null,J_G._onHierarchyInnerSecondLevResouLoaded,[J_a,J_b,J_j,J_d,J_e,J_f,J_h+J_i*J_g.length,J_i]),J_c,null,null,1,!0,J_b)}else J_G._onHierarchyInnerSecondLevResouLoaded(J_a,J_b,null,J_d,J_e,J_f,J_h,J_i)},J_G._onHierarchyInnerSecondLevResouLoaded=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h){if(J_a._class.destroyed)J_a.endLoad();else if(J_c&&J_c.recover(),0<J_f.length){var J_i=J_D.create(null,J_G._onProcessChange,[J_a,J_g,J_h],!1);J_G._innerFirstLevelLoaderManager.create(J_f,J_D.create(null,J_G._onHierarchyInnerFirstLevResouLoaded,[J_a,J_i,J_d,J_e]),J_c,null,null,1,!0,J_b)}else J_G._onHierarchyInnerFirstLevResouLoaded(J_a,null,J_d,J_e)},J_G._onHierarchyInnerFirstLevResouLoaded=function(J_a,J_b,J_c,J_d){J_b&&J_b.recover(),J_a.endLoad([J_c,J_d])},J_G._loadTerrain=function(J_a){J_a.on("loaded",null,J_G._onTerrainLtLoaded,[J_a,J_a._class._getGroup()]),J_a.load(J_a.url,"json",!1,null,!0)},J_G._onTerrainLtLoaded=function(J_a,J_b,J_c){if(J_a._class.destroyed)J_a.endLoad();else{var J_d,J_e,J_f=J_a.url,J_g=J_qb.getURLVerion(J_f),J_h=J_E.getPath(J_f),J_i=[],J_j={},J_k=0,J_l=0,J_m=J_c.heightData;J_d=J_m.url,J_e=J_G.formatRelativePath(J_h,J_d),J_g&&(J_e+=J_g),J_d=J_j[J_d]=J_e;var J_n=J_c.detailTexture;for(J_k=0,J_l=J_n.length;J_k<J_l;J_k++)J_i.push({url:J_n[J_k].diffuse});var J_o=J_c.normalMap;for(J_k=0,J_l=J_o.length;J_k<J_l;J_k++)J_i.push({url:J_o[J_k]});var J_p=J_c.alphaMap;for(J_k=0,J_l=J_p.length;J_k<J_l;J_k++)J_i.push({url:J_p[J_k],params:[!1,!1,6408,!0]});for(J_k=0,J_l=J_i.length;J_k<J_l;J_k++){var J_q=J_i[J_k].url;J_e=J_G.formatRelativePath(J_h,J_q),J_g&&(J_e+=J_g),J_i[J_k].url=J_e,J_j[J_q]=J_e}var J_r=J_i.length,J_u=J_r+2,J_v=1/J_u;J_G._onProcessChange(J_a,0,J_v,1);var J_w={heightMapLoaded:!1,texturesLoaded:!1},J_x=J_D.create(null,J_G._onProcessChange,[J_a,J_v,J_v],!1);J_G._innerFourthLevelLoaderManager.create(J_d,J_D.create(null,J_G._onTerrainHeightMapLoaded,[J_a,J_x,J_c,J_j,J_w]),J_x,null,[J_m.numX,J_m.numZ,J_m.bitType,J_m.value],1,!0,J_b);var J_y=J_D.create(null,J_G._onProcessChange,[J_a,2*J_v,J_r/J_u],!1);J_G._innerFourthLevelLoaderManager.create(J_i,J_D.create(null,J_G._onTerrainTexturesLoaded,[J_a,J_y,J_c,J_j,J_w]),J_y,null,null,1,!0,J_b)}},J_G._onTerrainHeightMapLoaded=function(J_a,J_b,J_c,J_d,J_e){J_e.heightMapLoaded=!0,J_e.texturesLoaded&&(J_a.endLoad([J_c,J_d]),J_b.recover())},J_G._onTerrainTexturesLoaded=function(J_a,J_b,J_c,J_d,J_e){J_e.texturesLoaded=!0,J_e.heightMapLoaded&&(J_a.endLoad([J_c,J_d]),J_b.recover())},J_G._loadMesh=function(J_a){J_a.on("loaded",null,J_G._onMeshLmLoaded,[J_a,J_a._class._getGroup()]),J_a.load(J_a.url,"arraybuffer",!1,null,!0)},J_G._onMeshLmLoaded=function(J_a,J_b,J_c){if(J_a._class.destroyed)J_a.endLoad();else{var J_d,J_e,J_f,J_g=J_a.url,J_h=J_qb.getURLVerion(J_g),J_i=J_E.getPath(J_g),J_j={},J_k=0,J_l=0;switch((J_G._readData=new J_y(J_c)).pos=0,J_G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var J_m=J_G._readData.getUint32();J_G._readData.pos=J_G._readData.pos+4,J_l=J_G._readData.getUint16(),J_G._readData.pos=J_G._readData.pos+8*J_l;var J_n=J_G._readData.getUint32();for(J_l=J_G._readData.getUint16(),J_G._readData.pos=J_m+J_n,J_d=[],J_k=0;J_k<J_l;J_k++){var J_o=J_G._readData.readUTFString();-1!==J_o.lastIndexOf(".lmat")&&J_d.push(J_o)}break;default:for(J_G.READ_BLOCK(),J_k=0;J_k<2;J_k++){var J_p=J_G._readData.getUint16(),J_q=J_G._strings[J_p],J_r=J_G["READ_"+J_q];if(null==J_r)throw new Error("model file err,no this function:"+J_p+" "+J_q);1===J_k?J_d=J_r.call():J_r.call()}}for(J_k=0,J_f=J_d.length;J_k<J_f;J_k++){var J_u=J_d[J_k];J_e=J_G.formatRelativePath(J_i,J_u),J_h&&(J_e+=J_h),J_d[J_k]=J_e,J_j[J_u]=J_e}if(0<J_d.length){J_G._onProcessChange(J_a,0,.5,1);var J_v=J_D.create(null,J_G._onProcessChange,[J_a,.5,.5],!1);J_G._innerSecondLevelLoaderManager.create(J_d,J_D.create(null,J_G._onMeshMateialLoaded,[J_a,J_v,J_c,J_j]),J_v,null,null,1,!0,J_b)}else J_a.endLoad([J_c,J_j])}},J_G._onMeshMateialLoaded=function(J_a,J_b,J_c,J_d){J_a.endLoad([J_c,J_d]),J_b.recover()},J_G._getMaterialTexturePath=function(J_a,J_b,J_c){var J_d=J_a.length-4;return J_a.indexOf(".dds")!=J_d&&J_a.indexOf(".tga")!=J_d&&J_a.indexOf(".exr")!=J_d&&J_a.indexOf(".DDS")!=J_d&&J_a.indexOf(".TGA")!=J_d&&J_a.indexOf(".EXR")!=J_d||(J_a=J_a.substr(0,J_d)+".png"),J_a=J_G.formatRelativePath(J_c,J_a),J_b&&(J_a+=J_b),J_a},J_G._loadMaterial=function(J_a){J_a.on("loaded",null,J_G._onMaterilLmatLoaded,[J_a,J_a._class._getGroup()]),J_a.load(J_a.url,"json",!1,null,!0)},J_G._onMaterilLmatLoaded=function(J_a,J_b,J_c){if(J_a._class.destroyed)J_a.endLoad();else{var J_d,J_e=J_a.url,J_f=J_qb.getURLVerion(J_e),J_g=J_E.getPath(J_e),J_h=[],J_i={},J_j=J_c.customProps,J_k=J_c.version;if(J_k)switch(J_k){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var J_l=J_c.props.textures,J_m=0,J_n=J_l.length;J_m<J_n;J_m++){var J_o=J_l[J_m],J_p=J_o.path;if(J_p){var J_q=J_p.length-4;J_p.indexOf(".exr")!=J_q&&J_p.indexOf(".EXR")!=J_q||(J_p=J_p.substr(0,J_q)+".png"),J_d=J_G.formatRelativePath(J_g,J_p),J_f&&(J_d+=J_f),J_h.push({url:J_d,params:J_o.params}),J_i[J_p]=J_d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var J_r=J_j.diffuseTexture.texture2D;if(J_r&&(J_d=J_G._getMaterialTexturePath(J_r,J_f,J_g),J_h.push(J_d),J_i[J_r]=J_d),J_j.normalTexture){var J_u=J_j.normalTexture.texture2D;J_u&&(J_d=J_G._getMaterialTexturePath(J_u,J_f,J_g),J_h.push(J_d),J_i[J_u]=J_d)}if(J_j.specularTexture){var J_v=J_j.specularTexture.texture2D;J_v&&(J_d=J_G._getMaterialTexturePath(J_v,J_f,J_g),J_h.push(J_d),J_i[J_v]=J_d)}if(J_j.emissiveTexture){var J_w=J_j.emissiveTexture.texture2D;J_w&&(J_d=J_G._getMaterialTexturePath(J_w,J_f,J_g),J_h.push(J_d),J_i[J_w]=J_d)}if(J_j.ambientTexture){var J_x=J_j.ambientTexture.texture2D;J_x&&(J_d=J_G._getMaterialTexturePath(J_x,J_f,J_g),J_h.push(J_d),J_i[J_x]=J_d)}if(J_j.reflectTexture){var J_y=J_j.reflectTexture.texture2D;J_y&&(J_d=J_G._getMaterialTexturePath(J_y,J_f,J_g),J_h.push(J_d),J_i[J_y]=J_d)}}var J_z=J_h.length,J_A=J_z+1,J_B=1/J_A;if(J_G._onProcessChange(J_a,0,J_B,1),0<J_z){var J_C=J_D.create(null,J_G._onProcessChange,[J_a,J_B,J_z/J_A],!1);J_G._innerFourthLevelLoaderManager.create(J_h,J_D.create(null,J_G._onMateialTexturesLoaded,[J_a,J_C,J_c,J_i]),J_C,J_Tb,null,1,!0,J_b)}else J_G._onMateialTexturesLoaded(J_a,null,J_c,null)}},J_G._onMateialTexturesLoaded=function(J_a,J_b,J_c,J_d){J_a.endLoad([J_c,J_d]),J_b&&J_b.recover()},J_G._loadTextureCube=function(J_a){J_a.on("loaded",null,J_G._onTextureCubeLtcLoaded,[J_a]),J_a.load(J_a.url,"json",!1,null,!0)},J_G._onTextureCubeLtcLoaded=function(J_a,J_b){if(J_a._class.destroyed)J_a.endLoad();else{var J_c=J_E.getPath(J_a.url),J_d=[J_G.formatRelativePath(J_c,J_b.px),J_G.formatRelativePath(J_c,J_b.nx),J_G.formatRelativePath(J_c,J_b.py),J_G.formatRelativePath(J_c,J_b.ny),J_G.formatRelativePath(J_c,J_b.pz),J_G.formatRelativePath(J_c,J_b.nz)];J_G._onProcessChange(J_a,0,1/7,1);var J_e=J_D.create(null,J_G._onProcessChange,[J_a,1/7,6/7],!1);J_G._innerFourthLevelLoaderManager.load(J_d,J_D.create(null,J_G._onTextureCubeImagesLoaded,[J_a,J_d,J_e]),J_e,"nativeimage")}},J_G._onTextureCubeImagesLoaded=function(J_a,J_b,J_c){var J_d=[];J_d.length=6;for(var J_e=0;J_e<6;J_e++){var J_f=J_b[J_e];J_d[J_e]=J_r.getRes(J_f),J_r.clearRes(J_f)}J_a.endLoad(J_d),J_c.recover()},J_G._onProcessChange=function(J_a,J_b,J_c,J_d){(J_d=J_b+J_d*J_c)<1&&J_a.event("progress",J_d)},J_G.init=function(J_a,J_b,J_c,J_d,J_e,J_f){if(void 0===J_c&&(J_c=!1),void 0===J_d&&(J_d=!1),void 0===J_e&&(J_e=!0),void 0===J_f&&(J_f=!0),J_u.update3DLoop=function(){},J_u.cancelLoadByUrl=function(J_a){J_G._cancelLoadByUrl(J_a)},J_i.isAntialias=J_c,J_i.isAlpha=J_d,J_i.premultipliedAlpha=J_e,J_i.isStencil=J_f,!J_F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");J_u.changeWebGLSize=J_G._changeWebGLSize,J_p.is3DMode=!0,J_x.init(J_a,J_b),J_I.__init__(),J_lb.__init__(),J_Xb.__init__(),J_Q.__init__(),J_G.__init__(),J_g.maxTextureCount=2,(J_G.debugMode||J_Z.debugMode)&&(J_G._debugPhasorSprite=new J_V)},J_G.HIERARCHY="SPRITE3DHIERARCHY",J_G.MESH="MESH",J_G.MATERIAL="MATERIAL",J_G.PBRMATERIAL="PBRMTL",J_G.TEXTURECUBE="TEXTURECUBE",J_G.TERRAIN="TERRAIN",J_G._readData=null,J_G._debugPhasorSprite=null,J_G.debugMode=!1,J_l(J_G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new J_b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new J_b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new J_b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new J_b}]),J_G}(),J_ub=function(J_a){function J_e(J_a){J_e.__super.call(this),this._owner=J_a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}J_n(J_e,"laya.d3.animation.AnimationTransform3D",J_f);var J_b=J_e.prototype;return J_b._getlocalMatrix=function(){return this._localUpdate&&(J_qb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},J_b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldTransform()}},J_b._setWorldMatrixAndUpdate=function(J_a){if(this._worldMatrix=J_a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var J_b=this._getlocalMatrix(),J_c=0;J_c<16;++J_c)this._worldMatrix[J_c]=J_b[J_c];else J_qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},J_b._setWorldMatrixNoUpdate=function(J_a){this._worldMatrix=J_a},J_b._setWorldMatrixIgnoreUpdate=function(J_a){this._worldMatrix=J_a,this._worldUpdate=!1},J_b.getLocalPosition=function(){return this._localPosition},J_b.setLocalPosition=function(J_a){if(this._parent)this._localPosition=J_a,this._localUpdate=!0,this._onWorldTransform();else{var J_b=this._entity.owner._transform,J_c=this._entity.localPosition,J_d=J_c.elements;J_d[0]=J_a[0],J_d[1]=J_a[1],J_d[2]=J_a[2],J_b.localPosition=J_c}},J_b.getLocalRotation=function(){if(this._localQuaternionUpdate){var J_a=this._localRotationEuler;J_qb._quaternionCreateFromYawPitchRollArray(J_a[1]/J_e._angleToRandin,J_a[0]/J_e._angleToRandin,J_a[2]/J_e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},J_b.setLocalRotation=function(J_a){if(this._parent)this._localRotation=J_a,J_qb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var J_b=this._entity.owner._transform,J_c=this._entity.localRotation,J_d=J_c.elements;J_d[0]=J_a[0],J_d[1]=J_a[1],J_d[2]=J_a[2],J_d[3]=J_a[3],J_b.localRotation=J_c}},J_b.getLocalScale=function(){return this._localScale},J_b.setLocalScale=function(J_a){if(this._parent)this._localScale=J_a,this._localUpdate=!0,this._onWorldTransform();else{var J_b=this._entity.owner._transform,J_c=this._entity.localScale,J_d=J_c.elements;J_d[0]=J_a[0],J_d[1]=J_a[1],J_d[2]=J_a[2],J_b.localScale=J_c}},J_b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){J_qb.getYawPitchRoll(this._localRotation,J_e._tempVector3);var J_a=J_e._tempVector3,J_b=this._localRotationEuler;J_b[0]=J_a[1]*J_e._angleToRandin,J_b[1]=J_a[0]*J_e._angleToRandin,J_b[2]=J_a[2]*J_e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},J_b.setLocalRotationEuler=function(J_a){if(this._parent)J_qb._quaternionCreateFromYawPitchRollArray(J_a[1]/J_e._angleToRandin,J_a[0]/J_e._angleToRandin,J_a[2]/J_e._angleToRandin,this._localRotation),this._localRotationEuler=J_a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var J_b=this._entity.owner._transform,J_c=this._entity.localRotationEuler,J_d=J_c.elements;J_d[0]=J_a[0],J_d[1]=J_a[1],J_d[2]=J_a[2],J_b.localRotationEuler=J_c}},J_b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)J_qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var J_a=this._getlocalMatrix(),J_b=0;J_b<16;++J_b)this._worldMatrix[J_b]=J_a[J_b];this._worldUpdate=!1}return this._worldMatrix},J_b.setParent=function(J_a){if(this._parent!==J_a){if(this._parent){var J_b=this._parent._childs,J_c=J_b.indexOf(this);J_b.splice(J_c,1)}J_a&&(J_a._childs.push(this),J_a&&this._onWorldTransform()),this._parent=J_a}},J_l(J_e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),J_e}(),J_vb=function(J_a){function J_b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,J_b.__super.call(this),this._destroyed=!1,this._id=J_b._uniqueIDCounter,J_b._uniqueIDCounter++}J_n(J_b,"laya.d3.component.Component3D",J_f);var J_c=J_b.prototype;return J_x.imps(J_c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),J_c._initialize=function(J_a){this._owner=J_a,this._enable=!0,this.started=!1,this._load(J_a)},J_c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},J_c._load=function(J_a){},J_c._start=function(J_a){},J_c._update=function(J_a){},J_c._lateUpdate=function(J_a){},J_c._preRenderUpdate=function(J_a){},J_c._postRenderUpdate=function(J_a){},J_c._unload=function(J_a){this.offAll()},J_c._cloneTo=function(J_a){},J_o(0,J_c,"id",function(){return this._id}),J_o(0,J_c,"destroyed",function(){return this._destroyed}),J_o(0,J_c,"owner",function(){return this._owner}),J_o(0,J_c,"enable",function(){return this._enable},function(J_a){this._enable!==J_a&&(this._enable=J_a,this.event("enablechanged",this._enable))}),J_o(0,J_c,"isSingleton",function(){return J_b._isSingleton}),J_b._isSingleton=!0,J_b._uniqueIDCounter=1,J_b}(),J_wb=function(J_a){function J_b(){this._destroyed=!1,J_b.__super.call(this),this._destroyed=!1}J_n(J_b,"laya.d3.core.GeometryFilter",J_f);var J_c=J_b.prototype;return J_x.imps(J_c,{"laya.resource.IDestroy":!0}),J_c._destroy=function(){this.offAll(),this._destroyed=!0},J_o(0,J_c,"_isAsyncLoaded",function(){return!0}),J_o(0,J_c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),J_o(0,J_c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),J_o(0,J_c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),J_o(0,J_c,"destroyed",function(){return this._destroyed}),J_b}(),J_xb=function(J_a){function J_d(J_a){J_d.__super.call(this),this._id=++J_d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new J_Za(new J_gb,new J_gb),this._boundingBoxCenter=new J_gb,this._boundingSphere=new J__a(new J_gb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=J_a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}J_n(J_d,"laya.d3.core.render.BaseRender",J_f);var J_b=J_d.prototype;return J_x.imps(J_b,{"laya.resource.IDestroy":!0}),J_b._changeMaterialReference=function(J_a,J_b){J_a&&J_a._removeReference(),J_b._addReference()},J_b._getInstanceMaterial=function(J_a,J_b){var J_c=new J_a.constructor;return J_a.cloneTo(J_c),J_c.name=J_c.name+"(Instance)",this._materialsInstance[J_b]=!0,this._changeMaterialReference(this._materials[J_b],J_c),this._materials[J_b]=J_c},J_b._setShaderValuelightMap=function(J_a){this._setShaderValueTexture(3,J_a)},J_b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},J_b._renderRenderableBoundBox=function(){var J_a=J_rb._debugPhasorSprite,J_b=this.boundingBox,J_c=J_d._tempBoundBoxCorners;J_b.getCorners(J_c),J_a.line(J_c[0],J_d._greenColor,J_c[1],J_d._greenColor),J_a.line(J_c[2],J_d._greenColor,J_c[3],J_d._greenColor),J_a.line(J_c[4],J_d._greenColor,J_c[5],J_d._greenColor),J_a.line(J_c[6],J_d._greenColor,J_c[7],J_d._greenColor),J_a.line(J_c[0],J_d._greenColor,J_c[3],J_d._greenColor),J_a.line(J_c[1],J_d._greenColor,J_c[2],J_d._greenColor),J_a.line(J_c[2],J_d._greenColor,J_c[6],J_d._greenColor),J_a.line(J_c[3],J_d._greenColor,J_c[7],J_d._greenColor),J_a.line(J_c[0],J_d._greenColor,J_c[4],J_d._greenColor),J_a.line(J_c[1],J_d._greenColor,J_c[5],J_d._greenColor),J_a.line(J_c[4],J_d._greenColor,J_c[7],J_d._greenColor),J_a.line(J_c[5],J_d._greenColor,J_c[6],J_d._greenColor)},J_b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},J_b._calculateBoundingBox=function(){throw"BaseRender: must override it."},J_b._setShaderValueTexture=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b)},J_b._setShaderValueMatrix4x4=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b?J_b.elements:null)},J_b._setShaderValueColor=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b?J_b.elements:null)},J_b._setShaderValueBuffer=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b)},J_b._setShaderValueInt=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b)},J_b._setShaderValueBool=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b)},J_b._setShaderValueNumber=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b)},J_b._setShaderValueVector2=function(J_a,J_b){this._owner._shaderValues.setValue(J_a,J_b?J_b.elements:null)},J_b._addShaderDefine=function(J_a){this._owner._shaderDefineValue|=J_a},J_b._removeShaderDefine=function(J_a){this._owner._shaderDefineValue&=~J_a},J_b._renderUpdate=function(J_a){return!0},J_b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var J_a=this._owner.scene;if(J_a){var J_b=J_a.getlightmaps()[this._lightmapIndex];J_b?(this._addShaderDefine(J_Vb.SAHDERDEFINE_LIGHTMAP),J_b.loaded?this._setShaderValuelightMap(J_b):J_b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(J_Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(J_Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(J_Vb.SAHDERDEFINE_LIGHTMAP)},J_b._updateOctreeNode=function(){var J_a=this._treeNode;J_a&&this._octreeNodeNeedChange&&(J_a.updateObject(this),this._octreeNodeNeedChange=!1)},J_b._destroy=function(){this.offAll();var J_a=0,J_b=0;for(J_a=0,J_b=this._renderElements.length;J_a<J_b;J_a++)this._renderElements[J_a]._destroy();for(J_a=0,J_b=this._materials.length;J_a<J_b;J_a++)this._materials[J_a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},J_o(0,J_b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),J_o(0,J_b,"id",function(){return this._id}),J_o(0,J_b,"material",function(){var J_a=this._materials[0];if(J_a&&!this._materialsInstance[0]){var J_b=this._getInstanceMaterial(J_a,0);this.event("materialchanged",[this,0,J_b])}return this._materials[0]},function(J_a){this.sharedMaterial=J_a}),J_o(0,J_b,"sharedMaterial",function(){return this._materials[0]},function(J_a){var J_b=this._materials[0];J_b!==J_a&&(this._materials[0]=J_a,this._materialsInstance[0]=!1,this._changeMaterialReference(J_b,J_a),this.event("materialchanged",[this,0,J_a]))}),J_o(0,J_b,"lightmapIndex",function(){return this._lightmapIndex},function(J_a){this._lightmapIndex=J_a,this._applyLightMapParams()}),J_o(0,J_b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(J_a){this._lightmapScaleOffset=J_a,this._setShaderValueColor(2,J_a),this._addShaderDefine(J_Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),J_o(0,J_b,"enable",function(){return this._enable},function(J_a){this._enable=J_a,this.event("enablechanged",[this,J_a])}),J_o(0,J_b,"materials",function(){for(var J_a=0,J_b=this._materials.length;J_a<J_b;J_a++)if(!this._materialsInstance[J_a]){var J_c=this._getInstanceMaterial(this._materials[J_a],J_a);this.event("materialchanged",[this,J_a,J_c])}return this._materials.slice()},function(J_a){this.sharedMaterials=J_a}),J_o(0,J_b,"sharedMaterials",function(){return this._materials.slice()},function(J_a){if(!J_a)throw new Error("MeshRender: shadredMaterials value can't be null.");var J_b=J_a.length;this._materialsInstance.length=J_b;for(var J_c=0;J_c<J_b;J_c++){var J_d=this._materials[J_c];J_d!==J_a[J_c]&&(this._materialsInstance[J_c]=!1,this._changeMaterialReference(J_d,J_a[J_c]),this.event("materialchanged",[this,J_c,J_a[J_c]]))}this._materials=J_a}),J_o(0,J_b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),J_o(0,J_b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var J_a=this.boundingBox;J_gb.add(J_a.min,J_a.max,this._boundingBoxCenter),J_gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),J_o(0,J_b,"receiveShadow",function(){return this._receiveShadow},function(J_a){this._receiveShadow!==J_a&&((this._receiveShadow=J_a)?this._addShaderDefine(J_nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(J_nb.SHADERDEFINE_RECEIVE_SHADOW))}),J_o(0,J_b,"destroyed",function(){return this._destroyed}),J_d._uniqueIDCounter=0,J_l(J_d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb,new J_gb]},"_greenColor",function(){return this._greenColor=new J_hb(0,1,0,1)}]),J_d}(),J_yb=function(J_a){function J_h(J_a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,J_h.__super.call(this),this._localPosition=new J_gb,this._localRotation=new J_cb(0,0,0,1),this._localScale=new J_gb(1,1,1),this._localRotationEuler=new J_gb,this._localMatrix=new J_ab,this._position=new J_gb,this._rotation=new J_cb(0,0,0,1),this._scale=new J_gb(1,1,1),this._worldMatrix=new J_ab,this._forward=new J_gb,this._up=new J_gb,this._right=new J_gb,this._owner=J_a,this._childs=[]}J_n(J_h,"laya.d3.core.Transform3D",J_f);var J_b=J_h.prototype;return J_b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)J_ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var J_a=J_h._tempVector30;J_gb.multiply(this.pivot,this._localScale,J_a);var J_b=J_h._tempVector31;J_gb.subtract(J_a,this.pivot,J_b);var J_c=J_h._tempVector32,J_d=this.localRotation;J_gb.transformQuat(J_a,J_d,J_c),J_gb.subtract(J_c,J_a,J_c);var J_e=J_h._tempVector33;J_gb.subtract(this._localPosition,J_b,J_e),J_gb.subtract(J_e,J_c,J_e),J_ab.createAffineTransformation(J_e,J_d,this._localScale,this._localMatrix)}},J_b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldPositionRotationTransform()}},J_b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldPositionScaleTransform()}},J_b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldPositionTransform()}},J_b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldPositionRotationTransform()}},J_b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldPositionScaleTransform()}},J_b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._onWorldTransform()}},J_b.translate=function(J_a,J_b){void 0===J_b&&(J_b=!0),J_b?(J_ab.createFromQuaternion(this.localRotation,J_h._tempMatrix0),J_gb.transformCoordinate(J_a,J_h._tempMatrix0,J_h._tempVector30),J_gb.add(this.localPosition,J_h._tempVector30,this._localPosition),this.localPosition=this._localPosition):(J_gb.add(this.position,J_a,this._position),this.position=this._position)},J_b.rotate=function(J_a,J_b,J_c){var J_d;void 0===J_b&&(J_b=!0),void 0===J_c&&(J_c=!0),J_d=J_c?J_a:(J_gb.scale(J_a,Math.PI/180,J_h._tempVector30),J_h._tempVector30),J_cb.createFromYawPitchRoll(J_d.y,J_d.x,J_d.z,J_h._tempQuaternion0),J_b?(J_cb.multiply(this._localRotation,J_h._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(J_cb.multiply(J_h._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},J_b.lookAt=function(J_a,J_b,J_c){void 0===J_c&&(J_c=!1);var J_d,J_e=J_a.elements;if(J_c){if(J_d=this._localPosition.elements,Math.abs(J_d[0]-J_e[0])<J_sa.zeroTolerance&&Math.abs(J_d[1]-J_e[1])<J_sa.zeroTolerance&&Math.abs(J_d[2]-J_e[2])<J_sa.zeroTolerance)return;J_cb.lookAt(this._localPosition,J_a,J_b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var J_f=this.position;if(J_d=J_f.elements,Math.abs(J_d[0]-J_e[0])<J_sa.zeroTolerance&&Math.abs(J_d[1]-J_e[1])<J_sa.zeroTolerance&&Math.abs(J_d[2]-J_e[2])<J_sa.zeroTolerance)return;J_cb.lookAt(J_f,J_a,J_b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},J_o(0,J_b,"_isFrontFaceInvert",function(){var J_a=this.scale,J_b=J_a.x<0;return J_a.y<0&&(J_b=!J_b),J_a.z<0&&(J_b=!J_b),J_b}),J_o(0,J_b,"owner",function(){return this._owner}),J_o(0,J_b,"localRotation",function(){if(this._localQuaternionUpdate){var J_a=this._localRotationEuler.elements;J_cb.createFromYawPitchRoll(J_a[1]/J_h._angleToRandin,J_a[0]/J_h._angleToRandin,J_a[2]/J_h._angleToRandin,this._localRotation)}return this._localRotation},function(J_a){this._localRotation=J_a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),J_o(0,J_b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?J_ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(J_a){null===this._parent?J_a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),J_ab.multiply(this._localMatrix,J_a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=J_a,this._worldUpdate=!1}),J_o(0,J_b,"worldNeedUpdate",function(){return this._worldUpdate}),J_o(0,J_b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(J_a){this._localMatrix=J_a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),J_o(0,J_b,"dummy",function(){return this._dummy},function(J_a){this._dummy!==J_a&&(this._dummy&&(this._dummy._entity=null),J_a&&(J_a._entity=this),this._dummy=J_a)}),J_o(0,J_b,"localPosition",function(){return this._localPosition},function(J_a){this._localPosition=J_a,this._localUpdate=!0,this._onWorldPositionTransform()}),J_o(0,J_b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var J_a=this._parent.position;J_gb.multiply(this._localPosition,this._parent.scale,J_h._tempVector30),J_gb.transformQuat(J_h._tempVector30,this._parent.rotation,J_h._tempVector30),J_gb.add(J_a,J_h._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(J_a){if(null!=this._parent){J_gb.subtract(J_a,this._parent.position,this._localPosition);var J_b=this._parent.scale.elements,J_c=J_b[0],J_d=J_b[1],J_e=J_b[2];if(1!==J_c||1!==J_d||1!==J_e){var J_f=J_h._tempVector30,J_g=J_f.elements;J_g[0]=1/J_c,J_g[1]=1/J_d,J_g[2]=1/J_e,J_gb.multiply(this._localPosition,J_f,this._localPosition)}this._parent.rotation.invert(J_h._tempQuaternion0),J_gb.transformQuat(this._localPosition,J_h._tempQuaternion0,this._localPosition)}else J_a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=J_a,this._positionUpdate=!1}),J_o(0,J_b,"localScale",function(){return this._localScale},function(J_a){this._localScale=J_a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),J_o(0,J_b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(J_h._tempVector30);var J_a=J_h._tempVector30.elements,J_b=this._localRotationEuler.elements;J_b[0]=J_a[1]*J_h._angleToRandin,J_b[1]=J_a[0]*J_h._angleToRandin,J_b[2]=J_a[2]*J_h._angleToRandin}return this._localRotationEuler},function(J_a){this._localRotationEuler=J_a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),J_o(0,J_b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?J_cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(J_a){null!=this._parent?(this._parent.rotation.invert(J_h._tempQuaternion0),J_cb.multiply(J_a,J_h._tempQuaternion0,this._localRotation)):J_a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=J_a,this._rotationUpdate=!1}),J_o(0,J_b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?J_gb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(J_a){if(null!==this._parent){var J_b=this._parent.scale.elements,J_c=J_h._tempVector30.elements;J_c[0]=1/J_b[0],J_c[1]=1/J_b[1],J_c[2]=1/J_b[2],J_gb.multiply(J_a,J_h._tempVector30,this._localScale)}else J_a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=J_a,this._scaleUpdate=!1}),J_o(0,J_b,"rotationEuler",null,function(J_a){J_cb.createFromYawPitchRoll(J_a.y,J_a.x,J_a.z,this._rotation),this.rotation=this._rotation}),J_o(0,J_b,"forward",function(){var J_a=this.worldMatrix.elements;return this._forward.elements[0]=-J_a[8],this._forward.elements[1]=-J_a[9],this._forward.elements[2]=-J_a[10],this._forward}),J_o(0,J_b,"up",function(){var J_a=this.worldMatrix.elements;return this._up.elements[0]=J_a[4],this._up.elements[1]=J_a[5],this._up.elements[2]=J_a[6],this._up}),J_o(0,J_b,"right",function(){var J_a=this.worldMatrix.elements;return this._right.elements[0]=J_a[0],this._right.elements[1]=J_a[1],this._right.elements[2]=J_a[2],this._right}),J_o(0,J_b,"parent",function(){return this._parent},function(J_a){if(this._parent!==J_a){if(this._parent){var J_b=this._parent._childs,J_c=J_b.indexOf(this);J_b.splice(J_c,1)}J_a&&(J_a._childs.push(this),J_a&&this._onWorldTransform()),this._parent=J_a}}),J_l(J_h,["_tempVector30",function(){return this._tempVector30=new J_gb},"_tempVector31",function(){return this._tempVector31=new J_gb},"_tempVector32",function(){return this._tempVector32=new J_gb},"_tempVector33",function(){return this._tempVector33=new J_gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new J_cb},"_tempMatrix0",function(){return this._tempMatrix0=new J_ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),J_h}(),J_zb=(function(J_a){function J_b(){this._rotation=0,this._matNeedUpdte=!1,J_b.__super.call(this),this._matrix=new J_ab,this._offset=new J_fb,this._tiling=new J_fb(1,1)}J_n(J_b,"laya.d3.core.TransformUV",J_f);var J_c=J_b.prototype;J_x.imps(J_c,{"laya.d3.core.IClone":!0}),J_c._updateMatrix=function(){J_b._tempOffsetV3.elements[0]=this._offset.x,J_b._tempOffsetV3.elements[1]=this._offset.y,J_cb.createFromYawPitchRoll(0,0,this._rotation,J_b._tempRotationQua),J_b._tempTitlingV3.elements[0]=this._tiling.x,J_b._tempTitlingV3.elements[1]=this._tiling.y,J_ab.createAffineTransformation(J_b._tempOffsetV3,J_b._tempRotationQua,J_b._tempTitlingV3,this._matrix)},J_c.cloneTo=function(J_a){J_a._matrix=this._matrix.clone(),J_a._offset=this._offset.clone(),J_a._rotation=this._rotation,J_a._tiling=this._tiling.clone()},J_c.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),J_o(0,J_c,"tiling",function(){return this._tiling},function(J_a){this._tiling=J_a,this._matNeedUpdte=!0}),J_o(0,J_c,"offset",function(){return this._offset},function(J_a){this._offset=J_a,this._matNeedUpdte=!0}),J_o(0,J_c,"rotation",function(){return this._rotation},function(J_a){this._rotation=J_a,this._matNeedUpdte=!0}),J_l(J_b,["_tempOffsetV3",function(){return this._tempOffsetV3=new J_gb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new J_cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new J_gb(1,1,1)}])}(),function(J_c){function J_a(){this.x=NaN,this.y=NaN,this.z=NaN,J_a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}J_n(J_a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",J_c);var J_b=J_a.prototype;J_b._getShapeBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=.5*-this.x,J_b[1]=.5*-this.y,J_b[2]=.5*-this.z;var J_c=J_a.max.elements;J_c[0]=.5*this.x,J_c[1]=.5*this.y,J_c[2]=.5*this.z},J_b._getSpeedBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=0,J_b[1]=0,J_b[2]=0;var J_c=J_a.max.elements;J_c[0]=0,J_c[1]=1,J_c[2]=0},J_b.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements,J_f=J_b.elements;J_c?(J_c.seed=J_d[16],J_T._randomPointInsideHalfUnitBox(J_a,J_c),J_d[16]=J_c.seed):J_T._randomPointInsideHalfUnitBox(J_a),J_e[0]=this.x*J_e[0],J_e[1]=this.y*J_e[1],J_e[2]=this.z*J_e[2],this.randomDirection?J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b):(J_f[0]=0,J_f[1]=0,J_f[2]=1)},J_b.cloneTo=function(J_a){J_c.prototype.cloneTo.call(this,J_a);var J_b=J_a;J_b.x=this.x,J_b.y=this.y,J_b.z=this.z,J_b.randomDirection=this.randomDirection}}(J_O),function(J_c){function J_g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,J_g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}J_n(J_g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",J_c);var J_a=J_g.prototype;J_a._getShapeBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[2]=-this.radius,J_b[1]=0;var J_c=J_a.max.elements;J_c[0]=J_c[2]=this.radius,J_c[1]=0},J_a._getSpeedBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[1]=-1,J_b[2]=0;var J_c=J_a.max.elements;J_c[0]=J_c[1]=1,J_c[2]=0},J_a.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements,J_f=J_g._tempPositionPoint.elements;J_c?(J_c.seed=J_d[16],this.emitFromEdge?J_T._randomPointUnitArcCircle(this.arc,J_g._tempPositionPoint,J_c):J_T._randomPointInsideUnitArcCircle(this.arc,J_g._tempPositionPoint,J_c),J_d[16]=J_c.seed):this.emitFromEdge?J_T._randomPointUnitArcCircle(this.arc,J_g._tempPositionPoint):J_T._randomPointInsideUnitArcCircle(this.arc,J_g._tempPositionPoint),J_e[0]=-J_f[0],J_e[1]=J_f[1],J_e[2]=0,J_gb.scale(J_a,this.radius,J_a),this.randomDirection?J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b):J_a.cloneTo(J_b)},J_a.cloneTo=function(J_a){J_c.prototype.cloneTo.call(this,J_a);var J_b=J_a;J_b.radius=this.radius,J_b.arc=this.arc,J_b.emitFromEdge=this.emitFromEdge,J_b.randomDirection=this.randomDirection},J_l(J_g,["_tempPositionPoint",function(){return this._tempPositionPoint=new J_fb}])}(J_O),function(J_c){function J_m(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,J_m.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}J_n(J_m,"laya.d3.core.particleShuriKen.module.shape.ConeShape",J_c);var J_a=J_m.prototype;J_a._getShapeBoundBox=function(J_a){var J_b=this.radius+this.length*Math.sin(this.angle),J_c=this.length*Math.cos(this.angle),J_d=J_a.min.elements;J_d[0]=J_d[1]=-J_b,J_d[2]=0;var J_e=J_a.max.elements;J_e[0]=J_e[1]=J_b,J_e[2]=J_c},J_a._getSpeedBoundBox=function(J_a){var J_b=Math.sin(this.angle),J_c=J_a.min.elements;J_c[0]=J_c[1]=-J_b,J_c[2]=0;var J_d=J_a.max.elements;J_d[0]=J_c[1]=J_b,J_d[2]=1},J_a.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){var J_e,J_f=J_a.elements,J_g=J_b.elements,J_h=J_m._tempPositionPoint.elements,J_i=NaN,J_j=NaN,J_k=Math.cos(this.angle),J_l=Math.sin(this.angle);switch(this.emitType){case 0:J_c?(J_c.seed=J_d[16],J_T._randomPointInsideUnitCircle(J_m._tempPositionPoint,J_c),J_d[16]=J_c.seed):J_T._randomPointInsideUnitCircle(J_m._tempPositionPoint),J_i=J_h[0],J_j=J_h[1],J_f[0]=J_i*this.radius,J_f[1]=J_j*this.radius,J_f[2]=0,this.randomDirection?(J_c?(J_c.seed=J_d[17],J_T._randomPointInsideUnitCircle(J_m._tempDirectionPoint,J_c),J_d[17]=J_c.seed):J_T._randomPointInsideUnitCircle(J_m._tempDirectionPoint),J_e=J_m._tempDirectionPoint.elements,J_g[0]=J_e[0]*J_l,J_g[1]=J_e[1]*J_l):(J_g[0]=J_i*J_l,J_g[1]=J_j*J_l),J_g[2]=J_k;break;case 1:J_c?(J_c.seed=J_d[16],J_T._randomPointUnitCircle(J_m._tempPositionPoint,J_c),J_d[16]=J_c.seed):J_T._randomPointUnitCircle(J_m._tempPositionPoint),J_i=J_h[0],J_j=J_h[1],J_f[0]=J_i*this.radius,J_f[1]=J_j*this.radius,J_f[2]=0,this.randomDirection?(J_c?(J_c.seed=J_d[17],J_T._randomPointInsideUnitCircle(J_m._tempDirectionPoint,J_c),J_d[17]=J_c.seed):J_T._randomPointInsideUnitCircle(J_m._tempDirectionPoint),J_e=J_m._tempDirectionPoint.elements,J_g[0]=J_e[0]*J_l,J_g[1]=J_e[1]*J_l):(J_g[0]=J_i*J_l,J_g[1]=J_j*J_l),J_g[2]=J_k;break;case 2:J_c?(J_c.seed=J_d[16],J_T._randomPointInsideUnitCircle(J_m._tempPositionPoint,J_c)):J_T._randomPointInsideUnitCircle(J_m._tempPositionPoint),J_i=J_h[0],J_j=J_h[1],J_f[0]=J_i*this.radius,J_f[1]=J_j*this.radius,J_g[J_f[2]=0]=J_i*J_l,J_g[1]=J_j*J_l,J_g[2]=J_k,J_gb.normalize(J_b,J_b),J_c?(J_gb.scale(J_b,this.length*J_c.getFloat(),J_b),J_d[16]=J_c.seed):J_gb.scale(J_b,this.length*Math.random(),J_b),J_gb.add(J_a,J_b,J_a),this.randomDirection&&(J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b));break;case 3:J_c?(J_c.seed=J_d[16],J_T._randomPointUnitCircle(J_m._tempPositionPoint,J_c)):J_T._randomPointUnitCircle(J_m._tempPositionPoint),J_i=J_h[0],J_j=J_h[1],J_f[0]=J_i*this.radius,J_f[1]=J_j*this.radius,J_g[J_f[2]=0]=J_i*J_l,J_g[1]=J_j*J_l,J_g[2]=J_k,J_gb.normalize(J_b,J_b),J_c?(J_gb.scale(J_b,this.length*J_c.getFloat(),J_b),J_d[16]=J_c.seed):J_gb.scale(J_b,this.length*Math.random(),J_b),J_gb.add(J_a,J_b,J_a),this.randomDirection&&(J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b));break;default:throw new Error("ConeShape:emitType is invalid.")}},J_a.cloneTo=function(J_a){J_c.prototype.cloneTo.call(this,J_a);var J_b=J_a;J_b.angle=this.angle,J_b.radius=this.radius,J_b.length=this.length,J_b.emitType=this.emitType,J_b.randomDirection=this.randomDirection},J_l(J_m,["_tempPositionPoint",function(){return this._tempPositionPoint=new J_fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new J_fb}])}(J_O),function(J_c){function J_a(){this.radius=NaN,this.emitFromShell=!1,J_a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}J_n(J_a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",J_c);var J_b=J_a.prototype;J_b._getShapeBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[1]=J_b[2]=-this.radius;var J_c=J_a.max.elements;J_c[0]=J_c[1]=this.radius,J_c[2]=0},J_b._getSpeedBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[1]=-1,J_b[2]=0;var J_c=J_a.max.elements;J_c[0]=J_c[1]=J_c[2]=1},J_b.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){var J_e=J_a.elements;J_c?(J_c.seed=J_d[16],this.emitFromShell?J_T._randomPointUnitSphere(J_a,J_c):J_T._randomPointInsideUnitSphere(J_a,J_c),J_d[16]=J_c.seed):this.emitFromShell?J_T._randomPointUnitSphere(J_a):J_T._randomPointInsideUnitSphere(J_a),J_gb.scale(J_a,this.radius,J_a);var J_f=J_e[2];J_f<0&&(J_e[2]=-1*J_f),this.randomDirection?J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b):J_a.cloneTo(J_b)},J_b.cloneTo=function(J_a){J_c.prototype.cloneTo.call(this,J_a);var J_b=J_a;J_b.radius=this.radius,J_b.emitFromShell=this.emitFromShell,J_b.randomDirection=this.randomDirection}}(J_O),function(J_c){function J_a(){this.radius=NaN,this.emitFromShell=!1,J_a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}J_n(J_a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",J_c);var J_b=J_a.prototype;J_b._getShapeBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[1]=J_b[2]=-this.radius;var J_c=J_a.max.elements;J_c[0]=J_c[1]=J_c[2]=this.radius},J_b._getSpeedBoundBox=function(J_a){var J_b=J_a.min.elements;J_b[0]=J_b[1]=J_b[2]=-1;var J_c=J_a.max.elements;J_c[0]=J_c[1]=J_c[2]=1},J_b.generatePositionAndDirection=function(J_a,J_b,J_c,J_d){J_c?(J_c.seed=J_d[16],this.emitFromShell?J_T._randomPointUnitSphere(J_a,J_c):J_T._randomPointInsideUnitSphere(J_a,J_c),J_d[16]=J_c.seed):this.emitFromShell?J_T._randomPointUnitSphere(J_a):J_T._randomPointInsideUnitSphere(J_a),J_gb.scale(J_a,this.radius,J_a),this.randomDirection?J_c?(J_c.seed=J_d[17],J_T._randomPointUnitSphere(J_b,J_c),J_d[17]=J_c.seed):J_T._randomPointUnitSphere(J_b):J_a.cloneTo(J_b)},J_b.cloneTo=function(J_a){J_c.prototype.cloneTo.call(this,J_a);var J_b=J_a;J_b.radius=this.radius,J_b.emitFromShell=this.emitFromShell,J_b.randomDirection=this.randomDirection}}(J_O),function(J_a){function J_b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,J_b.__super.call(this)}return J_n(J_b,"laya.d3.core.render.SubMeshRenderElement",J_W),J_b}()),J_Ab=function(J_a){function J_q(J_a,J_b,J_c,J_d,J_e,J_f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=J_a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[J_nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[J_Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[J_Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[J_Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";J_q.__super.call(this,J_a,J_b,J_c,null,{}),this._attributeMap=J_d;var J_g;for(J_g in J_e){var J_h=J_e[J_g];switch(J_h[1]){case 0:this._renderElementUniformMap[J_g]=J_h[0];break;case 1:this._materialUniformMap[J_g]=J_h[0];break;case 2:this._spriteUniformMap[J_g]=J_h[0];break;case 3:this._cameraUniformMap[J_g]=J_h[0];break;case 4:this._sceneUniformMap[J_g]=J_h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}J_n(J_q,"laya.d3.shader.ShaderCompile3D",J_v);var J_b=J_q.prototype;return J_b._definesToNameDic=function(J_a,J_b){for(var J_c={},J_d=1,J_e=0;J_e<32&&!(J_a<(J_d=1<<J_e));J_e++)if(J_a&J_d){var J_f=J_b[J_d];J_f&&(J_c[J_f]="")}return J_c},J_b.withCompile=function(J_a,J_b,J_c,J_d){var J_e,J_f,J_g;if(J_f=this.sharders[J_a])if(J_g=J_f[J_b]){if(J_e=J_g[J_c])return J_e}else J_g=J_f[J_b]=[];else J_g=(J_f=this.sharders[J_a]=[])[J_b]=[];var J_h,J_i=this._definesToNameDic(J_a,J_q._globalInt2name),J_j=this._definesToNameDic(J_b,this._spriteInt2name),J_k=this._definesToNameDic(J_c,this._materialInt2name),J_l={},J_m="";if(J_i)for(J_h in J_i)J_m+="#define "+J_h+"\n",J_l[J_h]=!0;if(J_j)for(J_h in J_j)J_m+="#define "+J_h+"\n",J_l[J_h]=!0;if(J_k)for(J_h in J_k)J_m+="#define "+J_h+"\n",J_l[J_h]=!0;var J_n=J_Lb.nameKey.getName(this._name)+" compile ("+J_a+","+J_b+","+J_c+")",J_o=this._VS.toscript(J_l,[]),J_p=this._PS.toscript(J_l,[]);J_H.now();if(J_e=J_Lb.create(J_m+J_o.join("\n"),J_m+J_p.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,J_d,J_n),J_g[J_c]=J_e,laya.d3.shader.ShaderCompile3D.debugMode)J_H.now();return J_e},J_b.precompileShaderWithShaderDefine=function(J_a,J_b,J_c){this.withCompile(J_a,J_b,J_c,!0)},J_b.addMaterialDefines=function(J_a){var J_b=J_a.defines;for(var J_c in J_b){var J_d=J_b[J_c],J_e=parseInt(J_c);this._materialInt2name[J_e]=J_d,this._materialName2Int[J_d]=J_e}},J_b.addSpriteDefines=function(J_a){var J_b=J_a.defines;for(var J_c in J_b){var J_d=J_b[J_c],J_e=parseInt(J_c);this._spriteInt2name[J_e]=J_d,this._spriteName2Int[J_d]=J_e}},J_b.getMaterialDefineByName=function(J_a){return this._materialName2Int[J_a]},J_b.registerMaterialDefine=function(J_a){var J_b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[J_b]=J_a,this._materialName2Int[J_a]=J_b},J_b.registerSpriteDefine=function(J_a){var J_b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[J_b]=J_a,this._spriteName2Int[J_a]=J_b},J_q._globalRegDefine=function(J_a,J_b){J_q._globalInt2name[J_b]=J_a},J_q.add=function(J_a,J_b,J_c,J_d,J_e){return laya.d3.shader.ShaderCompile3D._preCompileShader[J_a]=new J_q(J_a,J_b,J_c,J_d,J_e,J_v.includes)},J_q.get=function(J_a){return laya.d3.shader.ShaderCompile3D._preCompileShader[J_Lb.nameKey.getID(J_a)]},J_q._preCompileShader={},J_q._globalInt2name=[],J_q.debugMode=!1,J_q.SHADERDEFINE_HIGHPRECISION=1,J_q.SHADERDEFINE_FOG=4,J_q.SHADERDEFINE_DIRECTIONLIGHT=8,J_q.SHADERDEFINE_POINTLIGHT=16,J_q.SHADERDEFINE_SPOTLIGHT=32,J_q.SHADERDEFINE_UV0=64,J_q.SHADERDEFINE_COLOR=128,J_q.SHADERDEFINE_UV1=256,J_q.SAHDERDEFINE_DEPTHFOG=131072,J_q}(),J_Bb=function(J_a){function J_o(){J_o.__super.call(this)}J_n(J_o,"laya.d3.graphics.MeshSprite3DStaticBatchManager",J_da);var J_b=J_o.prototype;return J_b._getStaticBatch=function(J_a,J_b,J_c,J_d){var J_e,J_f;return J_f=J_a?J_a.id.toString()+J_c.id.toString()+J_b.id.toString()+J_d.toString():J_c.id.toString()+J_b.id.toString()+J_d.toString(),this._staticBatches[J_f]?J_e=this._staticBatches[J_f]:this._staticBatches[J_f]=J_e=new J_Cb(J_f,this,J_a,J_b,J_c),J_e},J_b._initStaticBatchs=function(J_a){var J_b,J_c;this._initBatchRenderElements.sort(J_o._sortPrepareStaticBatch);for(var J_d,J_e=!1,J_f=0,J_g=0,J_h=this._initBatchRenderElements.length;J_g<J_h;J_g++){var J_i,J_j=this._initBatchRenderElements[J_g],J_k=J_j.renderObj._getVertexBuffer(0);J_j._sprite3D;if(J_c===J_k.vertexDeclaration&&J_b===J_j._material)if(J_e)J_d._addCombineBatchRenderObjTest(J_j)?(J_i=J_j._staticBatch)!==J_d&&(J_i&&J_i._deleteCombineBatchRenderObj(J_j),J_d._addCombineBatchRenderObj(J_j)):(J_e=!1,J_f++);else{var J_l=this._initBatchRenderElements[J_g-1],J_m=J_l.renderObj,J_n=J_j.renderObj;J_e=!(65535<J_m._getVertexBuffer().vertexCount+J_n._getVertexBuffer().vertexCount)&&(J_d=this._getStaticBatch(J_a,J_c,J_b,J_f),(J_i=J_l._staticBatch)!==J_d&&(J_i&&J_i._deleteCombineBatchRenderObj(J_l),J_d._addCombineBatchRenderObj(J_l)),(J_i=J_j._staticBatch)!==J_d&&(J_i&&J_i._deleteCombineBatchRenderObj(J_j),J_d._addCombineBatchRenderObj(J_j)),!0)}else J_e=!1,J_f=0;J_b=J_j._material,J_c=J_k.vertexDeclaration}},J_o._sortPrepareStaticBatch=function(J_a,J_b){var J_c=J_a._render,J_d=J_b._render,J_e=J_c.lightmapIndex-J_d.lightmapIndex;if(0!=J_e)return J_e;var J_f=J_c.receiveShadow-J_d.receiveShadow;if(0!=J_f)return J_f;var J_g=J_a._mainSortID-J_b._mainSortID;return 0==J_g?J_a.renderObj.triangleCount-J_b.renderObj.triangleCount:J_g},J_o}(),J_Cb=function(J_a){function J_f(J_a,J_b,J_c,J_d,J_e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,J_f.__super.call(this,J_a,J_b,J_c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=J_d,this._material=J_e}J_n(J_f,"laya.d3.graphics.SubMeshStaticBatch",J_ea);var J_b=J_f.prototype;return J_b._compareBatchRenderElement=function(J_a,J_b){return J_a._batchIndexStart>J_b._batchIndexStart},J_b._addCombineBatchRenderObjTest=function(J_a){var J_b=J_a.renderObj._vertexCount;return!(65535<(0<J_b?this._currentCombineVertexCount+J_b:this._currentCombineVertexCount+J_a.renderObj._getVertexBuffer().vertexCount))},J_b._addCombineBatchRenderObj=function(J_a){var J_b=J_a.renderObj,J_c=J_b._vertexCount;this._initBatchRenderElements.push(J_a),J_a._staticBatch=this,0<J_c?(this._currentCombineIndexCount+=J_b._indexCount,this._currentCombineVertexCount+=J_c):(this._currentCombineIndexCount=this._currentCombineIndexCount+J_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+J_b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},J_b._deleteCombineBatchRenderObj=function(J_a){var J_b=J_a.renderObj,J_c=this._initBatchRenderElements.indexOf(J_a);if(-1!==J_c){this._initBatchRenderElements.splice(J_c,1),J_a._staticBatch=null;var J_d=J_b._vertexCount;0<J_d?(this._currentCombineIndexCount=this._currentCombineIndexCount-J_b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-J_d):(this._currentCombineIndexCount=this._currentCombineIndexCount-J_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-J_b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},J_b._finishInit=function(){if(this._needFinishCombine){var J_a=0,J_b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var J_c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),J_d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=J_Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=J_Nb.create("ushort",this._currentCombineIndexCount,35044);for(var J_e=0,J_f=this._initBatchRenderElements.length;J_e<J_f;J_e++){var J_g=this._initBatchRenderElements[J_e],J_h=J_g.renderObj,J_i=J_h._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,J_g._sprite3D),J_j=J_h.getIndices(),J_k=J_g._sprite3D.transform._isFrontFaceInvert,J_l=J_a/(this._vertexDeclaration.vertexStride/4)-J_h._vertexStart,J_m=J_b,J_n=J_m+J_j.length;J_g._batchIndexStart=J_m,J_g._batchIndexEnd=J_n,J_d.set(J_j,J_b);var J_o=0;if(J_k)for(J_o=J_m;J_o<J_n;J_o+=3){J_d[J_o]=J_l+J_d[J_o];var J_p=J_d[J_o+1],J_q=J_d[J_o+2];J_d[J_o+1]=J_l+J_q,J_d[J_o+2]=J_l+J_p}else for(J_o=J_m;J_o<J_n;J_o+=3)J_d[J_o]=J_l+J_d[J_o],J_d[J_o+1]=J_l+J_d[J_o+1],J_d[J_o+2]=J_l+J_d[J_o+2];J_b+=J_j.length,J_c.set(J_i,J_a),J_a+=J_i.length}this._vertexBuffer.setData(J_c),this._indexBuffer.setData(J_d),this._needFinishCombine=!1}},J_b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new J_zb)},J_b._getRenderElement=function(J_a,J_b,J_c){for(var J_d,J_e,J_f=this._batchRenderElements.length,J_g=!0,J_h=0;J_h<J_f;J_h++){var J_i,J_j,J_k=(J_e=this._batchRenderElements[J_h])._sprite3D._render;if(0!==J_h&&(J_g=(J_i=(J_d=this._batchRenderElements[J_h-1])._sprite3D._render).lightmapIndex!==J_k.lightmapIndex||J_i.receiveShadow!==J_k.receiveShadow||J_d._batchIndexEnd!==J_e._batchIndexStart),J_g){(J_j=this._getCombineRenderElementFromPool()).renderObj=this,J_j._material=this._material,J_j._batchIndexStart=J_e._batchIndexStart,J_j._batchIndexEnd=J_e._batchIndexEnd;var J_l=J_k.lightmapIndex,J_m=J_l+1,J_n=this._batchOwnerIndices[J_m];J_n||(J_n=this._batchOwnerIndices[J_m]=[]);var J_o,J_p=J_n[J_e._render.receiveShadow?1:0];void 0===J_p?(J_n[J_k.receiveShadow?1:0]=this._batchOwners.length,(J_o=new J_Xb(null,"StaticBatchMeshSprite3D"))._scene=J_b,J_o._transform=this._rootOwner?this._rootOwner._transform:null,J_o._render.lightmapIndex=J_l,J_o._render.receiveShadow=J_e._render.receiveShadow,this._batchOwners.push(J_o)):J_o=this._batchOwners[J_p],J_o._render._renderUpdate(J_c),J_j._sprite3D=J_o,J_a.push(J_j)}else J_j._batchIndexEnd=J_e._batchIndexEnd}},J_b._beforeRender=function(J_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J_b._render=function(J_a){var J_b=J_a.renderElement,J_c=J_b._batchIndexStart,J_d=J_b._batchIndexEnd-J_c;J_F.mainContext.drawElements(4,J_d,5123,2*J_c),J_A.drawCall++,J_A.trianglesFaces+=J_d/3},J_b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},J_b._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),this._vertexBuffer},J_f}(),J_Db=function(J_a){function J_b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,J_b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}J_n(J_b,"laya.d3.core.ComponentNode",J_j);var J_c=J_b.prototype;return J_c.addComponent=function(J_a){var J_b,J_c=this._componentsMap.indexOf(J_a);if(-1===J_c)J_b=[],this._componentsMap.push(J_a),this._typeComponentsIndices.push(J_b);else if(J_b=this._typeComponentsIndices[J_c],this._components[J_b[0]].isSingleton)throw new Error("无法单实例创建"+J_a+"组件，"+J_a+"组件已存在！");var J_d=J_e.getInstance(J_a);return J_b.push(this._components.length),this._components.push(J_d),J_d instanceof laya.d3.component.Script&&this._scripts.push(J_d),J_d._initialize(this),J_d},J_c._removeComponent=function(J_a,J_b){var J_c=this._typeComponentsIndices[J_a],J_d=J_c[J_b],J_e=this._components[J_d];this._components.splice(J_d,1),J_e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(J_e),1),J_c.splice(J_b,1),0===J_c.length&&(this._typeComponentsIndices.splice(J_a,1),this._componentsMap.splice(J_a,1));for(var J_f=0,J_g=this._componentsMap.length;J_f<J_g;J_f++)for(var J_h=(J_c=this._typeComponentsIndices[J_f]).length-1;0<=J_h;J_h--){var J_i=J_c[J_h];if(!(J_d<J_i))break;J_c[J_h]=--J_i}J_e._destroy()},J_c.getComponentByType=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c=this._componentsMap.indexOf(J_a);return-1===J_c?null:this._components[this._typeComponentsIndices[J_c][J_b]]},J_c.getComponentsByType=function(J_a,J_b){var J_c=this._componentsMap.indexOf(J_a);if(-1!==J_c){var J_d=this._typeComponentsIndices[J_c],J_e=J_d.length;J_b.length=J_e;for(var J_f=0;J_f<J_e;J_f++)J_b[J_f]=this._components[J_d[J_f]]}else J_b.length=0},J_c.getComponentByIndex=function(J_a){return this._components[J_a]},J_c.removeComponentByType=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c=this._componentsMap.indexOf(J_a);-1!==J_c&&this._removeComponent(J_c,J_b)},J_c.removeComponentsByType=function(J_a){var J_b=this._componentsMap.indexOf(J_a);if(-1!==J_b)for(var J_c=this._typeComponentsIndices[J_b],J_d=0,J_e=J_c.length;J_d<J_e;J_c.length<J_e?J_e--:J_d++)this._removeComponent(J_b,J_d)},J_c.removeAllComponent=function(){for(var J_a=0,J_b=this._componentsMap.length;J_a<J_b;this._componentsMap.length<J_b?J_b--:J_a++)this.removeComponentsByType(this._componentsMap[J_a])},J_c._updateComponents=function(J_a){for(var J_b=0,J_c=this._components.length;J_b<J_c;J_b++){var J_d=this._components[J_b];!J_d.started&&(J_d._start(J_a),J_d.started=!0),J_d.enable&&J_d._update(J_a)}},J_c._lateUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._lateUpdate(J_a)}},J_c._preRenderUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._preRenderUpdate(J_a)}},J_c._postRenderUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._postRenderUpdate(J_a)}},J_b}(),J_Eb=function(J_d){function J_a(){J_a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new J_mb,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new J_hb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}J_n(J_a,"laya.d3.core.material.BaseMaterial",J_d);var J_b=J_a.prototype;return J_x.imps(J_b,{"laya.d3.core.IClone":!0}),J_b._addShaderDefine=function(J_a){this._shaderDefineValue|=J_a},J_b._removeShaderDefine=function(J_a){this._shaderDefineValue&=~J_a},J_b._addDisablePublicShaderDefine=function(J_a){this._disablePublicShaderDefine|=J_a},J_b._removeDisablePublicShaderDefine=function(J_a){this._disablePublicShaderDefine&=~J_a},J_b._setBuffer=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b),this._values[J_a]=J_b},J_b._getBuffer=function(J_a){return this._values[J_a]},J_b._setMatrix4x4=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b?J_b.elements:null),this._values[J_a]=J_b},J_b._getMatrix4x4=function(J_a){return this._values[J_a]},J_b._setInt=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b),this._values[J_a]=J_b},J_b._getInt=function(J_a){return this._values[J_a]},J_b._setNumber=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b),this._values[J_a]=J_b},J_b._getNumber=function(J_a){return this._values[J_a]},J_b._setBool=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b),this._values[J_a]=J_b},J_b._getBool=function(J_a){return this._values[J_a]},J_b._setVector2=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b?J_b.elements:null),this._values[J_a]=J_b},J_b._getVector2=function(J_a){return this._values[J_a]},J_b._setColor=function(J_a,J_b){this._shaderValues.setValue(J_a,J_b?J_b.elements:null),this._values[J_a]=J_b},J_b._getColor=function(J_a){return this._values[J_a]},J_b._setTexture=function(J_a,J_b){var J_c=this._values[J_a];this._values[J_a]=J_b,this._shaderValues.setValue(J_a,J_b),0<this.referenceCount&&(J_c&&J_c._removeReference(),J_b&&J_b._addReference())},J_b._getTexture=function(J_a){return this._values[J_a]},J_b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},J_b._getShader=function(J_a,J_b,J_c){var J_d=(J_a|J_b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(J_d,J_c,this._shaderDefineValue),this._shader},J_b._setRenderStateBlendDepth=function(){var J_a=J_F.mainContext;switch(J_G.setDepthMask(J_a,this.depthWrite),0===this.depthTest?J_G.setDepthTest(J_a,!1):(J_G.setDepthTest(J_a,!0),J_G.setDepthFunc(J_a,this.depthTest)),this.blend){case 0:J_G.setBlend(J_a,!1);break;case 1:J_G.setBlend(J_a,!0),J_G.setBlendFunc(J_a,this.srcBlend,this.dstBlend);break;case 2:J_G.setBlend(J_a,!0)}},J_b._setRenderStateFrontFace=function(J_a,J_b){var J_c=J_F.mainContext,J_d=0;switch(this.cull){case 0:J_G.setCullFace(J_c,!1);break;case 1:J_G.setCullFace(J_c,!0),J_d=J_a?J_b&&J_b._isFrontFaceInvert?2305:2304:J_b&&J_b._isFrontFaceInvert?2304:2305,J_G.setFrontFace(J_c,J_d);break;case 2:J_G.setCullFace(J_c,!0),J_d=J_a?J_b&&J_b._isFrontFaceInvert?2304:2305:J_b&&J_b._isFrontFaceInvert?2305:2304,J_G.setFrontFace(J_c,J_d)}},J_b.onAsynLoaded=function(J_a,J_b,J_c){var J_d=J_b[0],J_e=J_b[1];switch(J_d.version){case"LAYAMATERIAL:01":var J_f=0,J_g=0,J_h=J_d.props;for(var J_i in J_h)switch(J_i){case"vectors":var J_j=J_h[J_i];for(J_f=0,J_g=J_j.length;J_f<J_g;J_f++){var J_k=J_j[J_f],J_l=J_k.value;switch(J_l.length){case 2:this[J_k.name]=new J_fb(J_l[0],J_l[1]);break;case 3:this[J_k.name]=new J_gb(J_l[0],J_l[1],J_l[2]);break;case 4:this[J_k.name]=new J_hb(J_l[0],J_l[1],J_l[2],J_l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var J_m=J_h[J_i];for(J_f=0,J_g=J_m.length;J_f<J_g;J_f++){var J_n=J_m[J_f],J_o=J_n.path;J_o&&(this[J_n.name]=J_r.getRes(J_e[J_o]))}break;case"defines":var J_p=J_h[J_i];for(J_f=0,J_g=J_p.length;J_f<J_g;J_f++){var J_q=this._shaderCompile.getMaterialDefineByName(J_p[J_f]);this._addShaderDefine(J_q)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[J_i]=J_h[J_i];break;case"renderQueue":switch(J_h[J_i]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[J_i]=J_h[J_i]}break;case"LAYAMATERIAL:02":for(J_i in J_h=J_d.props)switch(J_i){case"vectors":for(J_f=0,J_g=(J_j=J_h[J_i]).length;J_f<J_g;J_f++)switch((J_l=(J_k=J_j[J_f]).value).length){case 2:this[J_k.name]=new J_fb(J_l[0],J_l[1]);break;case 3:this[J_k.name]=new J_gb(J_l[0],J_l[1],J_l[2]);break;case 4:this[J_k.name]=new J_hb(J_l[0],J_l[1],J_l[2],J_l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(J_f=0,J_g=(J_m=J_h[J_i]).length;J_f<J_g;J_f++)(J_o=(J_n=J_m[J_f]).path)&&(this[J_n.name]=J_r.getRes(J_e[J_o]));break;case"defines":for(J_f=0,J_g=(J_p=J_h[J_i]).length;J_f<J_g;J_f++)J_q=this._shaderCompile.getMaterialDefineByName(J_p[J_f]),this._addShaderDefine(J_q);break;default:this[J_i]=J_h[J_i]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},J_b._addReference=function(){J_d.prototype._addReference.call(this);for(var J_a=0,J_b=this._values.length;J_a<J_b;J_a++){var J_c=this._values[J_a];J_c&&J_c instanceof laya.d3.resource.BaseTexture&&J_c._addReference()}},J_b._removeReference=function(){J_d.prototype._removeReference.call(this);for(var J_a=0,J_b=this._values.length;J_a<J_b;J_a++){var J_c=this._values[J_a];J_c&&J_c instanceof laya.d3.resource.BaseTexture&&J_c._removeReference()}},J_b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},J_b.setShaderName=function(J_a){var J_b=J_Lb.nameKey.getID(J_a);if(-1===J_b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=J_Ab._preCompileShader[J_b]},J_b.cloneTo=function(J_a){var J_b=J_a;J_b.name=this.name,J_b.cull=this.cull,J_b.blend=this.blend,J_b.srcBlend=this.srcBlend,J_b.dstBlend=this.dstBlend,J_b.srcBlendRGB=this.srcBlendRGB,J_b.dstBlendRGB=this.dstBlendRGB,J_b.srcBlendAlpha=this.srcBlendAlpha,J_b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(J_b.blendConstColor),J_b.blendEquation=this.blendEquation,J_b.blendEquationRGB=this.blendEquationRGB,J_b.blendEquationAlpha=this.blendEquationAlpha,J_b.depthTest=this.depthTest,J_b.depthWrite=this.depthWrite,J_b.renderQueue=this.renderQueue,J_b._shader=this._shader,J_b._disablePublicShaderDefine=this._disablePublicShaderDefine,J_b._shaderDefineValue=this._shaderDefineValue;var J_c,J_d=0,J_e=J_b._shaderValues;J_b._shaderValues.data.length=this._shaderValues.data.length;var J_f=this._values.length,J_g=J_b._values;for(J_d=0,J_c=J_g.length=J_f;J_d<J_c;J_d++){var J_h=this._values[J_d];if(J_h)if("number"==typeof J_h)J_g[J_d]=J_h,J_e.data[J_d]=J_h;else if("number"==typeof J_h&&Math.floor(J_h)==J_h)J_g[J_d]=J_h,J_e.data[J_d]=J_h;else if("boolean"==typeof J_h)J_g[J_d]=J_h,J_e.data[J_d]=J_h;else if(J_h instanceof laya.d3.math.Vector2){var J_i=J_g[J_d]||(J_g[J_d]=new J_fb);J_h.cloneTo(J_i),J_e.data[J_d]=J_i.elements}else if(J_h instanceof laya.d3.math.Vector3){var J_j=J_g[J_d]||(J_g[J_d]=new J_gb);J_h.cloneTo(J_j),J_e.data[J_d]=J_j.elements}else if(J_h instanceof laya.d3.math.Vector4){var J_k=J_g[J_d]||(J_g[J_d]=new J_hb);J_h.cloneTo(J_k),J_e.data[J_d]=J_k.elements}else if(J_h instanceof laya.d3.math.Matrix4x4){var J_l=J_g[J_d]||(J_g[J_d]=new J_ab);J_h.cloneTo(J_l),J_e.data[J_d]=J_l.elements}else J_h instanceof laya.d3.resource.BaseTexture&&(J_g[J_d]=J_h,J_e.data[J_d]=J_h)}},J_b.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_o(0,J_b,"alphaTestValue",function(){return this._getNumber(0)},function(J_a){this._setNumber(0,J_a)}),J_o(0,J_b,"alphaTest",function(){return this._alphaTest},function(J_a){(this._alphaTest=J_a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),J_a.__init__=function(){J_a.SHADERDEFINE_ALPHATEST=J_a.shaderDefines.registerDefine("ALPHATEST")},J_a.RENDERQUEUE_OPAQUE=2e3,J_a.RENDERQUEUE_ALPHATEST=2450,J_a.RENDERQUEUE_TRANSPARENT=3e3,J_a.CULL_NONE=0,J_a.CULL_FRONT=1,J_a.CULL_BACK=2,J_a.BLEND_DISABLE=0,J_a.BLEND_ENABLE_ALL=1,J_a.BLEND_ENABLE_SEPERATE=2,J_a.BLENDPARAM_ZERO=0,J_a.BLENDPARAM_ONE=1,J_a.BLENDPARAM_SRC_COLOR=768,J_a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,J_a.BLENDPARAM_DST_COLOR=774,J_a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,J_a.BLENDPARAM_SRC_ALPHA=770,J_a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,J_a.BLENDPARAM_DST_ALPHA=772,J_a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,J_a.BLENDPARAM_SRC_ALPHA_SATURATE=776,J_a.BLENDEQUATION_ADD=0,J_a.BLENDEQUATION_SUBTRACT=1,J_a.BLENDEQUATION_REVERSE_SUBTRACT=2,J_a.DEPTHTEST_OFF=0,J_a.DEPTHTEST_NEVER=512,J_a.DEPTHTEST_LESS=513,J_a.DEPTHTEST_EQUAL=514,J_a.DEPTHTEST_LEQUAL=515,J_a.DEPTHTEST_GREATER=516,J_a.DEPTHTEST_NOTEQUAL=517,J_a.DEPTHTEST_GEQUAL=518,J_a.DEPTHTEST_ALWAYS=519,J_a.SHADERDEFINE_ALPHATEST=1,J_a.ALPHATESTVALUE=0,J_l(J_a,["shaderDefines",function(){return this.shaderDefines=new J_kb}]),J_a}(J_q),J_Fb=function(J_a){function J_b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,J_b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}J_n(J_b,"laya.d3.resource.BaseTexture",J_q);var J_c=J_b.prototype;return J_o(0,J_c,"width",function(){return this._width}),J_o(0,J_c,"repeat",function(){return this._repeat},function(J_a){if(this._repeat!==J_a&&(this._repeat=J_a,this._source)){var J_b=J_F.mainContext;J_G.bindTexture(J_b,this._type,this._source),J_w.isPOT(this._width,this._height)&&this._repeat?(J_b.texParameteri(this._type,10242,10497),J_b.texParameteri(this._type,10243,10497)):(J_b.texParameteri(this._type,10242,33071),J_b.texParameteri(this._type,10243,33071))}}),J_o(0,J_c,"height",function(){return this._height}),J_o(0,J_c,"magFifter",function(){return this._magFifter},function(J_a){(this._magFifter=J_a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(J_a)}),J_o(0,J_c,"wrapModeV",function(){return this._wrapModeV}),J_o(0,J_c,"size",function(){return this._size}),J_o(0,J_c,"wrapModeU",function(){return this._wrapModeU}),J_o(0,J_c,"mipmap",function(){return this._mipmap},function(J_a){this._mipmap=J_a,this._mipmap!=J_a&&this._conchTexture&&this._conchTexture.setMipMap(J_a)}),J_o(0,J_c,"minFifter",function(){return this._minFifter},function(J_a){this._minFifter=J_a,this._minFifter!=J_a&&this._conchTexture&&this._conchTexture.setMinFifter(J_a)}),J_o(0,J_c,"format",function(){return this._format}),J_o(0,J_c,"source",function(){return this.activeResource(),this._source}),J_o(0,J_c,"defaulteTexture",function(){return J_Sb.grayTexture}),J_b.WARPMODE_REPEAT=0,J_b.WARPMODE_CLAMP=1,J_b}(),J_Gb=function(J_a){function J_b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,J_b.__super.call(this),this._boundingBoxCorners=J_d(8,null)}J_n(J_b,"laya.d3.resource.models.BaseMesh",J_q);var J_c=J_b.prototype;return J_c._getPositions=function(){throw new Error("未Override,请重载该属性！")},J_c._generateBoundingObject=function(){this._boundingSphere=new J__a(new J_gb,0),J__a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new J_Za(new J_gb,new J_gb),J_Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},J_c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},J_c.getRenderElement=function(J_a){throw new Error("未Override,请重载该属性！")},J_o(0,J_c,"subMeshCount",function(){return this._subMeshCount}),J_o(0,J_c,"boundingBox",function(){return this._boundingBox}),J_o(0,J_c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),J_o(0,J_c,"boundingSphere",function(){return this._boundingSphere}),J_b}(),J_Hb=(function(J_a){function J_b(){J_b.__super.call(this)}J_n(J_b,"laya.d3.component.Script",J_vb);var J_c=J_b.prototype;J_c.onTriggerEnter=function(J_a){},J_c.onTriggerExit=function(J_a){},J_c.onTriggerStay=function(J_a){},J_o(0,J_c,"isSingleton",function(){return J_b._isSingleton}),J_b._isSingleton=!1}(),function(J_a){function J_b(J_a){this._owner=null,this._sharedMesh=null,J_b.__super.call(this),this._owner=J_a}J_n(J_b,"laya.d3.core.MeshFilter",J_a);var J_c=J_b.prototype;return J_c._sharedMeshLoaded=function(){this.event("loaded")},J_c._destroy=function(){J_a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},J_o(0,J_c,"sharedMesh",function(){return this._sharedMesh},function(J_a){var J_b=this._sharedMesh;J_b&&J_b._removeReference(),(this._sharedMesh=J_a)._addReference(),this.event("meshchanged",[this,J_b,J_a]),J_a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),J_o(0,J_c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),J_o(0,J_c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),J_o(0,J_c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),J_o(0,J_c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),J_b}(J_wb)),J_Ib=function(J_a){function J_b(J_a){J_b.__super.call(this,J_a),J_a.meshFilter.on("meshchanged",this,this._onMeshChanged)}J_n(J_b,"laya.d3.core.MeshRender",J_xb);var J_c=J_b.prototype;return J_c._onMeshChanged=function(J_a,J_b,J_c){J_c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:J_c.once("loaded",this,this._onMeshLoaed)},J_c._onMeshLoaed=function(J_a,J_b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},J_c._calculateBoundingSphereByInitSphere=function(J_a){var J_b=NaN,J_c=this._owner.transform,J_d=J_c.scale.elements,J_e=Math.abs(J_d[0]),J_f=Math.abs(J_d[1]),J_g=Math.abs(J_d[2]);J_b=J_f<=J_e&&J_g<=J_e?J_e:J_g<=J_f?J_f:J_g,J_gb.transformCoordinate(J_a.center,J_c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=J_a.radius*J_b},J_c._calculateBoundBoxByInitCorners=function(J_a){for(var J_b=this._owner.transform.worldMatrix,J_c=0;J_c<8;J_c++)J_gb.transformCoordinate(J_a[J_c],J_b,J_xb._tempBoundBoxCorners[J_c]);J_Za.createfromPoints(J_xb._tempBoundBoxCorners,this._boundingBox)},J_c._calculateBoundingSphere=function(){var J_a=this._owner.meshFilter.sharedMesh;null==J_a||null==J_a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(J_a.boundingSphere)},J_c._calculateBoundingBox=function(){var J_a=this._owner.meshFilter.sharedMesh;null==J_a||null==J_a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(J_a.boundingBoxCorners)},J_c._renderUpdate=function(J_a){var J_b=this._owner.transform;if(J_b){this._setShaderValueMatrix4x4(0,J_b.worldMatrix);var J_c=this._owner.getProjectionViewWorldMatrix(J_a);this._setShaderValueMatrix4x4(1,J_c)}else this._setShaderValueMatrix4x4(0,J_ab.DEFAULT),this._setShaderValueMatrix4x4(1,J_a);return J_rb.debugMode&&this._renderRenderableBoundBox(),!0},J_b}(),J_Jb=function(J_b){function J_d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,J_d.__super.call(this),this._renderState=new J_Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new J_mb,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new J_ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new J_gb(.7,.7,.7),this.ambientColor=new J_gb(.212,.227,.259),J_F.shaderHighPrecision&&this.addShaderDefine(J_Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}J_n(J_d,"laya.d3.core.scene.Scene",J_b);var J_a=J_d.prototype;return J_x.imps(J_a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),J_a._setUrl=function(J_a){this._url=J_a},J_a._getGroup=function(){return this._group},J_a._setGroup=function(J_a){this._group=J_a},J_a._display=function(){J_x.stage._scenes.push(this),J_x.stage._scenes.sort(J_d._sortScenes);for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++){var J_c=this._childs[J_a];J_c.active&&J_c._activeHierarchy()}},J_a._unDisplay=function(){var J_a=J_x.stage._scenes;J_a.splice(J_a.indexOf(this),1);for(var J_b=0,J_c=this._childs.length;J_b<J_c;J_b++){var J_d=this._childs[J_b];J_d.active&&J_d._inActiveHierarchy()}},J_a._addChild3D=function(J_a){J_a.transform._onWorldTransform(),J_a._setBelongScene(this),this.displayedInStage&&J_a.active&&J_a._activeHierarchy()},J_a._removeChild3D=function(J_a){J_a.transform.parent=null,this.displayedInStage&&J_a.active&&J_a._inActiveHierarchy(),J_a._setUnBelongScene()},J_a.initOctree=function(J_a,J_b,J_c,J_d,J_e){void 0===J_e&&(J_e=6),this.treeSize=new J_gb(J_a,J_b,J_c),this.treeLevel=J_e,this.treeRoot=new J_Z(this,0),this.treeRoot.init(J_d,this.treeSize)},J_a._prepareUpdateToRenderState=function(J_a,J_b){J_b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,J_b.scene=this},J_a._prepareSceneToRender=function(J_a){var J_b=this._lights.length;if(0<J_b)for(var J_c=0,J_d=0;J_d<J_b&&!(this._lights[J_d]._prepareToScene(J_a)&&++J_c>=this._enableLightCount);J_d++);},J_a._updateChilds=function(J_a){for(var J_b=0,J_c=this._childs.length;J_b<J_c;++J_b)this._childs[J_b]._update(J_a)},J_a._preRenderScene=function(J_a,J_b,J_c){var J_d,J_e=J_b._viewMatrix,J_f=J_b._projectionMatrix,J_g=J_b._projectionViewMatrix,J_h=0,J_i=J_b.camera;for(J_i.useOcclusionCulling?this.treeRoot?J_ca.renderObjectCullingOctree(J_c,this,J_i,J_e,J_f,J_g):J_ca.renderObjectCulling(J_c,this,J_i,J_e,J_f,J_g):J_ca.renderObjectCullingNoBoundFrustum(this,J_i,J_e,J_f,J_g),J_h=0,J_d=this._quenes.length;J_h<J_d;J_h++)this._quenes[J_h]&&this._quenes[J_h]._preRender(J_b)},J_a._clear=function(J_a,J_b){var J_c=J_b._viewport,J_d=J_b.camera,J_e=J_c.x,J_f=J_d.renderTargetSize.height-J_c.y-J_c.height,J_g=J_c.width,J_h=J_c.height;J_a.viewport(J_e,J_f,J_g,J_h);var J_i=256,J_j=J_d.renderTarget;switch(J_d.clearFlag){case 0:var J_k=J_d.clearColor;if(J_k){J_a.enable(3089),J_a.scissor(J_e,J_f,J_g,J_h);var J_l=J_k.elements;J_a.clearColor(J_l[0],J_l[1],J_l[2],J_l[3]),J_i|=16384}if(J_j)switch(J_k||(J_i=16384),J_j.depthStencilFormat){case 33189:J_i|=256;break;case 36168:J_i|=1024;break;case 34041:J_i|=256,J_i|=1024}J_a.clear(J_i),J_k&&J_a.disable(3089);break;case 1:case 2:if(J_j)switch(J_i=16384,J_j.depthStencilFormat){case 33189:J_i|=256;break;case 36168:J_i|=1024;break;case 34041:J_i|=256,J_i|=1024}J_a.clear(J_i);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},J_a._renderScene=function(J_a,J_b){var J_c,J_d,J_e=J_b.camera,J_f=0;for(J_f=0;J_f<2;J_f++)(J_d=this._quenes[J_f])&&(J_e.renderTarget?J_d._render(J_b,!0):J_d._render(J_b,!1));if(1===J_e.clearFlag){var J_g=J_e.sky;J_g&&(J_G.setCullFace(J_a,!1),J_G.setDepthFunc(J_a,515),J_G.setDepthMask(J_a,!1),J_g._render(J_b),J_G.setDepthFunc(J_a,513),J_G.setDepthMask(J_a,!0))}for(J_f=2,J_c=this._quenes.length;J_f<J_c;J_f++)(J_d=this._quenes[J_f])&&(J_d._sortAlpha(J_b.camera.transform.position),J_e.renderTarget?J_d._render(J_b,!0):J_d._render(J_b,!1))},J_a._set3DRenderConfig=function(J_a){J_a.disable(3042),J_G._blend=!1,J_a.blendFunc(770,771),J_G._sFactor=770,J_G._dFactor=771,J_a.disable(2929),J_G._depthTest=!1,J_a.enable(2884),J_G._cullFace=!0,J_a.depthMask(1),J_G._depthMask=!0,J_a.frontFace(2304),J_G._frontFace=2304},J_a._set2DRenderConfig=function(J_a){J_G.setBlend(J_a,!0),J_G.setBlendFunc(J_a,1,771),J_G.setDepthTest(J_a,!1),J_G.setCullFace(J_a,!1),J_G.setDepthMask(J_a,!0),J_G.setFrontFace(J_a,2305),J_a.viewport(0,0,J_k.width,J_k.height)},J_a._parseCustomProps=function(J_a,J_b,J_c,J_d){var J_e=J_d.customProps.lightmaps,J_f=J_e.length,J_g=this._lightmaps;J_g.length=J_f;for(var J_h=0;J_h<J_f;J_h++)J_g[J_h]=J_r.getRes(J_b[J_e[J_h].replace(".exr",".png")]);this.setlightmaps(J_g);var J_i=J_d.customProps.ambientColor;J_i&&(this.ambientColor=new J_gb(J_i[0],J_i[1],J_i[2]));var J_j=J_d.customProps.fogColor;J_j&&(this.fogColor=new J_gb(J_j[0],J_j[1],J_j[2]))},J_a._addLight=function(J_a){this._lights.indexOf(J_a)<0&&this._lights.push(J_a)},J_a._removeLight=function(J_a){var J_b=this._lights.indexOf(J_a);0<=J_b&&this._lights.splice(J_b,1)},J_a._updateScene=function(){var J_a=this._renderState;this._prepareUpdateToRenderState(J_F.mainContext,J_a),this._updateComponents(J_a),this._updateChilds(J_a),this._lateUpdateComponents(J_a),this._time+=J_a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},J_a._updateSceneConch=function(){var J_a=this._renderState;this._prepareUpdateToRenderState(J_F.mainContext,J_a),this._updateComponents(J_a),this._lateUpdateComponents(J_a),this._prepareSceneToRender(J_a);for(var J_b=0,J_c=this._cameraPool.length;J_b<J_c;J_b++){var J_d=this._cameraPool[J_b];(J_a.camera=J_d)._prepareCameraToRender()}},J_a._preRenderShadow=function(J_a,J_b,J_c,J_d,J_e){this.treeRoot?J_ca.renderShadowObjectCullingOctree(this,J_b,J_c,J_d,J_e):J_ca.renderShadowObjectCulling(this,J_b,J_c,J_d,J_e);for(var J_f=0,J_g=J_c.length;J_f<J_g;J_f++)J_c[J_f]&&J_c[J_f]._preRender(J_a)},J_a._renderShadowMap=function(J_a,J_b,J_c){var J_d=this.parallelSplitShadowMaps[0];J_d._calcAllLightCameraInfo(J_c);var J_e,J_f,J_g,J_h=J_d.PSSMNum;if(this._preRenderShadow(J_b,J_d._lightCulling,J_d._shadowQuenes,J_d._lightVPMatrix[0],J_h),this.addShaderDefine(J_nb.SHADERDEFINE_CAST_SHADOW),1<J_h)for(var J_i=0;J_i<J_h;J_i++)J_e=J_d.getRenderTarget(J_i+1),J_d.beginRenderTarget(J_i+1),J_a.clearColor(1,1,1,1),J_a.clear(16640),J_a.viewport(0,0,J_e.width,J_e.height),J_b.camera=J_g=J_d.getLightCamera(J_i),J_g._prepareCameraToRender(),J_g._prepareCameraViewProject(J_g.viewMatrix,J_g.projectionMatrix),J_b._projectionViewMatrix=J_d._lightVPMatrix[J_i+1],(J_f=J_d._shadowQuenes[J_i])._preRender(J_b),J_f._renderShadow(J_b,!1),J_d.endRenderTarget(J_i+1);else J_e=J_d.getRenderTarget(1),J_d.beginRenderTarget(1),J_a.clearColor(1,1,1,1),J_a.clear(16640),J_a.viewport(0,0,J_e.width,J_e.height),J_b.camera=J_g=J_d.getLightCamera(0),J_g._prepareCameraToRender(),J_g._prepareCameraViewProject(J_g.viewMatrix,J_g.projectionMatrix),J_b._projectionViewMatrix=J_d._lightVPMatrix[0],(J_f=J_d._shadowQuenes[0])._preRender(J_b),J_f._renderShadow(J_b,!0),J_d.endRenderTarget(1);this.removeShaderDefine(J_nb.SHADERDEFINE_CAST_SHADOW)},J_a.addTreeNode=function(J_a){this.treeRoot.addTreeNode(J_a)},J_a.removeTreeNode=function(J_a){this.treeSize&&J_a._treeNode&&J_a._treeNode.removeObject(J_a)},J_a.setlightmaps=function(J_a){this._lightmaps=J_a;for(var J_b=0,J_c=this._renderableSprite3Ds.length;J_b<J_c;J_b++)this._renderableSprite3Ds[J_b]._render._applyLightMapParams()},J_a.getlightmaps=function(){return this._lightmaps},J_a.addChildAt=function(J_a,J_b){if(!(J_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(J_a&&J_a.__className));if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),0<=J_b&&J_b<=this._childs.length){if(J_a._parent===this){var J_c=this.getChildIndex(J_a);this._childs.splice(J_c,1),this._childs.splice(J_b,0,J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,J_b)),this._childChanged()}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J_b,0,J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,J_b),(J_a.parent=this)._addChild3D(J_a);return J_a}throw new Error("appendChildAt:The index is out of bounds")},J_a.addChild=function(J_a){if(!(J_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),J_a._parent===this){var J_b=this.getChildIndex(J_a);J_b!==this._childs.length-1&&(this._childs.splice(J_b,1),this._childs.push(J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1)),this._childChanged())}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1),(J_a.parent=this)._childChanged(),this._addChild3D(J_a);return J_a},J_a.removeChildAt=function(J_a){var J_b=this.getChildAt(J_a);return J_b&&(this._removeChild3D(J_b),this._childs.splice(J_a,1),this.conchModel&&this.conchModel.removeChild(J_b.conchModel),J_b.parent=null),J_b},J_a.removeChildren=function(J_a,J_b){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=2147483647),this._childs&&0<this._childs.length){var J_c=this._childs;if(0===J_a&&J_f<=J_b){var J_d=J_c;this._childs=J_j.ARRAY_EMPTY}else J_d=J_c.splice(J_a,J_b-J_a);for(var J_e=0,J_f=J_d.length;J_e<J_f;J_e++)this._removeChild3D(J_d[J_e]),J_d[J_e].parent=null,this.conchModel&&this.conchModel.removeChild(J_d[J_e].conchModel)}return this},J_a.addFrustumCullingObject=function(J_a){this.treeRoot?this.addTreeNode(J_a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(J_a):this._cullingRenders[this._cullingRendersLength]=J_a,J_a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},J_a.removeFrustumCullingObject=function(J_a){if(this.treeRoot)this.removeTreeNode(J_a);else{this._cullingRendersLength--;var J_b=J_a._indexInSceneFrustumCullingObjects;if(J_b!==this._cullingRendersLength){var J_c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[J_b]=J_c)._indexInSceneFrustumCullingObjects=J_b,J_a._indexInSceneFrustumCullingObjects=-1}}},J_a.getRenderQueue=function(J_a){return J_a<3e3?this._quenes[1]||(this._quenes[1]=new J_X(this)):this._quenes[2]||(this._quenes[2]=new J_X(this))},J_a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new J_X(this)},J_a.addShaderDefine=function(J_a){this._shaderDefineValue|=J_a},J_a.removeShaderDefine=function(J_a){this._shaderDefineValue&=~J_a},J_a.addScript=function(J_a){return this._addComponent(J_a)},J_a.getScriptByType=function(J_a,J_b){return void 0===J_b&&(J_b=0),this._getComponentByType(J_a,J_b)},J_a.getScriptsByType=function(J_a,J_b){this._getComponentsByType(J_a,J_b)},J_a.getScriptByIndex=function(J_a){return this._getComponentByIndex(J_a)},J_a.removeScriptByType=function(J_a,J_b){void 0===J_b&&(J_b=0),this._removeComponentByType(J_a,J_b)},J_a.removeScriptsByType=function(J_a){this._removeComponentByType(J_a)},J_a.removeAllScript=function(){this._removeAllComponent()},J_a.render=function(J_a,J_b,J_c){(J_p._context.ctx._renderKey=0)<this._childs.length&&J_a.addRenderObject(this)},J_a.renderSubmit=function(){var J_a=J_F.mainContext,J_b=this._renderState;this._set3DRenderConfig(J_a),this._prepareSceneToRender(this._renderState);var J_c,J_d=0,J_e=0;if(J_rb.debugMode||J_Z.debugMode)for(J_d=0,J_e=this._cameraPool.length;J_d<J_e;J_d++)J_c=this._cameraPool[J_d],J_rb._debugPhasorSprite.begin(1,J_c),J_c.activeInHierarchy&&J_c._renderCamera(J_a,J_b,this),J_rb._debugPhasorSprite.end();else for(J_d=0,J_e=this._cameraPool.length;J_d<J_e;J_d++)(J_c=this._cameraPool[J_d]).activeInHierarchy&&J_c._renderCamera(J_a,J_b,this);return this._set2DRenderConfig(J_a),1},J_a.onAsynLoaded=function(J_a,J_b,J_c){var J_d=J_b[0];if("Scene"!==J_d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var J_e=J_b[1];J_qb._createNodeByJson(this,J_d,this,J_e),this.event("hierarchyloaded",[this]),this.__loaded=!0},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),this.destroyed||(J_b.prototype.destroy.call(this,J_a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,J_r.clearRes(this.url),this.loaded||J_rb._cancelLoadByUrl(this.url))},J_a.getRenderType=function(){return 0},J_a.releaseRender=function(){},J_a._addComponent=function(J_a){var J_b,J_c=this._componentsMap.indexOf(J_a);if(-1===J_c)J_b=[],this._componentsMap.push(J_a),this._typeComponentsIndices.push(J_b);else if(J_b=this._typeComponentsIndices[J_c],this._components[J_b[0]].isSingleton)throw new Error("无法单实例创建"+J_a+"组件，"+J_a+"组件已存在！");var J_d=J_e.getInstance(J_a);J_b.push(this._components.length),this._components.push(J_d);return J_d._initialize(this),J_d},J_a._removeComponent=function(J_a,J_b){var J_c=this._typeComponentsIndices[J_a],J_d=J_c[J_b],J_e=this._components[J_d];this._components.splice(J_d,1),J_c.splice(J_b,1),0===J_c.length&&(this._typeComponentsIndices.splice(J_a,1),this._componentsMap.splice(J_a,1));for(var J_f=0,J_g=this._componentsMap.length;J_f<J_g;J_f++)for(var J_h=(J_c=this._typeComponentsIndices[J_f]).length-1;0<=J_h;J_h--){var J_i=J_c[J_h];if(!(J_d<J_i))break;J_c[J_h]=--J_i}J_e._destroy()},J_a._getComponentByType=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c=this._componentsMap.indexOf(J_a);return-1===J_c?null:this._components[this._typeComponentsIndices[J_c][J_b]]},J_a._getComponentsByType=function(J_a,J_b){var J_c=this._componentsMap.indexOf(J_a);if(-1!==J_c){var J_d=this._typeComponentsIndices[J_c],J_e=J_d.length;J_b.length=J_e;for(var J_f=0;J_f<J_e;J_f++)J_b[J_f]=this._components[J_d[J_f]]}else J_b.length=0},J_a._getComponentByIndex=function(J_a){return this._components[J_a]},J_a._removeComponentByType=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c=this._componentsMap.indexOf(J_a);-1!==J_c&&this._removeComponent(J_c,J_b)},J_a._removeComponentsByType=function(J_a){var J_b=this._componentsMap.indexOf(J_a);if(-1!==J_b)for(var J_c=this._typeComponentsIndices[J_b],J_d=0,J_e=J_c.length;J_d<J_e;J_c.length<J_e?J_e--:J_d++)this._removeComponent(J_b,J_d)},J_a._removeAllComponent=function(){for(var J_a=0,J_b=this._componentsMap.length;J_a<J_b;this._componentsMap.length<J_b?J_b--:J_a++)this._removeComponentsByType(this._componentsMap[J_a])},J_a._updateComponents=function(J_a){for(var J_b=0,J_c=this._components.length;J_b<J_c;J_b++){var J_d=this._components[J_b];!J_d.started&&(J_d._start(J_a),J_d.started=!0),J_d.enable&&J_d._update(J_a)}},J_a._lateUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._lateUpdate(J_a)}},J_a._preRenderUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._preRenderUpdate(J_a)}},J_a._postRenderUpdateComponents=function(J_a){for(var J_b=0;J_b<this._components.length;J_b++){var J_c=this._components[J_b];!J_c.started&&(J_c._start(J_a),J_c.started=!0),J_c.enable&&J_c._postRenderUpdate(J_a)}},J_o(0,J_a,"_loaded",null,function(J_a){this.__loaded=J_a}),J_o(0,J_a,"fogColor",function(){return this._fogColor},function(J_a){this._fogColor=J_a,this._shaderValues.setValue(0,J_a.elements)}),J_o(0,J_a,"enableFog",function(){return this._enableFog},function(J_a){this._enableFog!==J_a&&((this._enableFog=J_a)?(this.addShaderDefine(J_Ab.SHADERDEFINE_FOG),this.removeShaderDefine(J_Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(J_Ab.SHADERDEFINE_FOG))}),J_o(0,J_a,"url",function(){return this._url}),J_o(0,J_a,"loaded",function(){return this.__loaded}),J_o(0,J_a,"enableDepthFog",function(){return this._enableDepthFog},function(J_a){this._enableDepthFog!=J_a&&((this._enableDepthFog=J_a)?(this.addShaderDefine(J_Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(J_Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(J_Ab.SAHDERDEFINE_DEPTHFOG))}),J_o(0,J_a,"fogStart",function(){return this._fogStart},function(J_a){this._fogStart=J_a,this._shaderValues.setValue(1,J_a)}),J_o(0,J_a,"fogRange",function(){return this._fogRange},function(J_a){this._fogRange=J_a,this._shaderValues.setValue(2,J_a)}),J_o(0,J_a,"ambientColor",function(){return this._ambientColor},function(J_a){this._ambientColor=J_a,this._shaderValues.setValue(21,J_a.elements)}),J_o(0,J_a,"scene",function(){return this}),J_o(0,J_a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),J_d._sortScenes=function(J_a,J_b){if(J_a.parent!==J_x.stage||J_b.parent!==J_x.stage)return J_a.parent!==J_x.stage&&J_b.parent!==J_x.stage?J_d._sortScenes(J_a.parent,J_b.parent):J_a.parent===J_x.stage?-1:1;var J_c=J_x.stage._childs;return J_c.indexOf(J_a)-J_c.indexOf(J_b)},J_d.load=function(J_a){return J_x.loader.create(J_a,null,null,J_d)},J_d.FOGCOLOR=0,J_d.FOGSTART=1,J_d.FOGRANGE=2,J_d.LIGHTDIRECTION=3,J_d.LIGHTDIRCOLOR=4,J_d.POINTLIGHTPOS=5,J_d.POINTLIGHTRANGE=6,J_d.POINTLIGHTATTENUATION=7,J_d.POINTLIGHTCOLOR=8,J_d.SPOTLIGHTPOS=9,J_d.SPOTLIGHTDIRECTION=10,J_d.SPOTLIGHTSPOT=11,J_d.SPOTLIGHTRANGE=12,J_d.SPOTLIGHTATTENUATION=13,J_d.SPOTLIGHTCOLOR=14,J_d.SHADOWDISTANCE=15,J_d.SHADOWLIGHTVIEWPROJECT=16,J_d.SHADOWMAPPCFOFFSET=17,J_d.SHADOWMAPTEXTURE1=18,J_d.SHADOWMAPTEXTURE2=19,J_d.SHADOWMAPTEXTURE3=20,J_d.AMBIENTCOLOR=21,J_d.TIME=22,J_d}(J_z),J_Kb=function(J_a){function J_b(J_a){J_b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new J_ab,this._shaderValues=new J_mb,this._colliders=[],this._id=++J_b._uniqueIDCounter,this._transform=new J_yb(this),this.name=J_a||"Sprite3D-"+J_b._nameNumberCounter++,this.layer=J_I.currentCreationLayer,this.active=!0}J_n(J_b,"laya.d3.core.Sprite3D",J_Db);var J_c=J_b.prototype;return J_x.imps(J_c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),J_c._setUrl=function(J_a){this._url=J_a},J_c._getGroup=function(){return this._group},J_c._setGroup=function(J_a){this._group=J_a},J_c._addChild3D=function(J_a){J_a.transform.parent=this.transform,this._hierarchyAnimator&&(!J_a._hierarchyAnimator&&J_a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(J_a,!0,[J_a.name])),this._scene&&(J_a._setBelongScene(this._scene),this._activeInHierarchy&&J_a._active&&J_a._activeHierarchy())},J_c._removeChild3D=function(J_a){J_a.transform.parent=null,this._scene&&(this._activeInHierarchy&&J_a._active&&J_a._inActiveHierarchy(),J_a._setUnBelongScene()),this._hierarchyAnimator&&(J_a._hierarchyAnimator==this._hierarchyAnimator&&J_a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(J_a,!1,[J_a.name]))},J_c._parseBaseCustomProps=function(J_a){var J_b=this.transform.localPosition;J_a.translate?(J_b.fromArray(J_a.translate),J_b.x*=100,J_b.y*=100,J_b.z*=100):J_b.elements.fill(0),this.transform.localPosition=J_b;var J_c=this.transform.localRotation;J_a.rotation?J_c.fromArray(J_a.rotation):J_c.fromArray([0,0,0,-1]),this.transform.localRotation=J_c;var J_d=this.transform.localScale;J_a.scale?J_d.fromArray(J_a.scale):J_d.elements.fill(1),this.transform.localScale=J_d;var J_e=J_a.layer;null!=J_e&&(this.layer=J_I.getLayerByNumber(J_e))},J_c._parseCustomComponent=function(J_a,J_b,J_c){for(var J_d in J_c){var J_e=J_c[J_d];switch(J_d){case"Animator":var J_f=this.addComponent(Animator);if(J_e.avatarPath)J_f.avatar=J_r.getRes(J_b[J_e.avatarPath]);else{var J_g=J_e.avatar;if(J_g){J_f.avatar=J_r.getRes(J_b[J_g.path]);var J_h=J_g.linkSprites;J_h&&J_a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[J_f,J_h])}}for(var J_i=J_e.clipPaths,J_j=J_i.length,J_k=0;J_k<J_j;J_k++)J_f.addClip(J_r.getRes(J_b[J_i[J_k]]));J_f.clip=J_r.getRes(J_b[J_i[0]]);var J_l=J_e.playOnWake;void 0!==J_l&&(J_f.playOnWake=J_l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var J_m=this.addComponent(SphereCollider);J_m.isTrigger=J_e.isTrigger;var J_n=J_m.center;J_n.fromArray(J_e.center),J_m.center=J_n,J_m.radius=J_e.radius;break;case"BoxCollider":var J_o=this.addComponent(BoxCollider);J_o.isTrigger=J_e.isTrigger,J_o.center.fromArray(J_e.center);var J_p=J_o.size;J_p.fromArray(J_e.size),J_o.size=J_p;break;case"MeshCollider":this.addComponent(MeshCollider)}}},J_c._onRootNodeHierarchyLoaded=function(J_a,J_b){for(var J_c in J_b){for(var J_d=this,J_e=J_b[J_c],J_f=0,J_g=J_e.length;J_f<J_g;J_f++){var J_h=J_e[J_f];if(""===J_h)break;if(!(J_d=J_d.getChildByName(J_h)))break}J_d&&J_a.linkSprite3DToAvatarNode(J_c,J_d)}},J_c._setHierarchyAnimator=function(J_a,J_b){this._changeHierarchyAnimator(J_a);for(var J_c=0,J_d=this._childs.length;J_c<J_d;J_c++){var J_e=this._childs[J_c];J_e._hierarchyAnimator==J_b&&J_e._setHierarchyAnimator(J_a,J_b)}},J_c._clearHierarchyAnimator=function(J_a,J_b){this._changeHierarchyAnimator(J_b);for(var J_c=0,J_d=this._childs.length;J_c<J_d;J_c++){var J_e=this._childs[J_c];J_e._hierarchyAnimator==J_a&&J_e._clearHierarchyAnimator(J_a,J_b)}},J_c._getAnimatorToLinkSprite3D=function(J_a,J_b,J_c){var J_d=this.getComponentByType(Animator);if(J_d&&(J_d.avatar?J_d.avatar._version||J_a._setAnimatorToLinkAvatar(J_d,J_b):J_a._setAnimatorToLinkSprite3DNoAvatar(J_d,J_b,J_c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){J_c.unshift(this._parent.name);var J_e=this._parent;J_e._hierarchyAnimator&&J_e._getAnimatorToLinkSprite3D(J_a,J_b,J_c)}},J_c._setAnimatorToLinkSprite3DNoAvatar=function(J_a,J_b,J_c){var J_d=0,J_e=0;for(J_d=0,J_e=J_a.getClipCount();J_d<J_e;J_d++)J_a._handleSpriteOwnersBySprite(J_d,J_b,J_c,this);for(J_d=0,J_e=this._childs.length;J_d<J_e;J_d++){var J_f=this._childs[J_d],J_g=J_c.length;J_c.push(J_f.name),J_f._setAnimatorToLinkSprite3DNoAvatar(J_a,J_b,J_c),J_c.splice(J_g,1)}},J_c._changeHierarchyAnimator=function(J_a){this._hierarchyAnimator=J_a},J_c._isLinkSpriteToAnimationNode=function(J_a,J_b,J_c){var J_d=J_a._avatarNodes.indexOf(J_b),J_e=J_a._cacheSpriteToNodesMap;if(J_c)this._transform.dummy=J_b.transform,J_a._cacheNodesToSpriteMap[J_d]=J_e.length,J_e.push(J_d);else{this._transform.dummy=null;var J_f=J_a._cacheNodesToSpriteMap[J_d];J_a._cacheNodesToSpriteMap[J_d]=null,J_e.splice(J_f,1)}},J_c._setBelongScene=function(J_a){this._scene=J_a;for(var J_b=0,J_c=this._childs.length;J_b<J_c;J_b++)this._childs[J_b]._setBelongScene(J_a)},J_c._setUnBelongScene=function(){this._scene=null;for(var J_a=0,J_b=this._childs.length;J_a<J_b;J_a++)this._childs[J_a]._setUnBelongScene()},J_c._activeHierarchy=function(){var J_a=0,J_b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),J_a=0,J_b=this._colliders.length;J_a<J_b;J_a++)this._layer._addCollider(this._colliders[J_a]);for(this.event("activeinhierarchychanged",!0),J_a=0,J_b=this._childs.length;J_a<J_b;J_a++){var J_c=this._childs[J_a];J_c._active&&J_c._activeHierarchy()}},J_c._inActiveHierarchy=function(){var J_a=0,J_b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),J_a=0,J_b=this._colliders.length;J_a<J_b;J_a++){var J_c=this._colliders[J_a];J_c._clearCollsionMap(),this._layer._removeCollider(J_c)}for(this.event("activeinhierarchychanged",!1),J_a=0,J_b=this._childs.length;J_a<J_b;J_a++){var J_d=this._childs[J_a];J_d._active&&J_d._inActiveHierarchy()}},J_c.addComponent=function(J_a){var J_b,J_c=this._componentsMap.indexOf(J_a);if(-1===J_c)J_b=[],this._componentsMap.push(J_a),this._typeComponentsIndices.push(J_b);else if(J_b=this._typeComponentsIndices[J_c],this._components[J_b[0]].isSingleton)throw new Error("无法单实例创建"+J_a+"组件，"+J_a+"组件已存在！");var J_d=J_e.getInstance(J_a);return J_b.push(this._components.length),this._components.push(J_d),J_d instanceof laya.d3.component.Script&&this._scripts.push(J_d),J_d._initialize(this),J_d},J_c._removeComponent=function(J_a,J_b){var J_c,J_d=0,J_e=this._typeComponentsIndices[J_a],J_f=J_e[J_b],J_g=this._components[J_f];for(J_g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(J_g),1),J_e.splice(J_b,1),0===J_e.length&&(this._typeComponentsIndices.splice(J_a,1),this._componentsMap.splice(J_a,1)),J_d=0,J_c=this._componentsMap.length;J_d<J_c;J_d++)for(var J_h=(J_e=this._typeComponentsIndices[J_d]).length-1;0<=J_h;J_h--){var J_i=J_e[J_h];if(!(J_f<J_i))break;J_e[J_h]=--J_i}J_g._destroy()},J_c._clearSelfRenderObjects=function(){},J_c._addSelfRenderObjects=function(){},J_c._parseCustomProps=function(J_a,J_b,J_c,J_d){},J_c._updateChilds=function(J_a){var J_b=this._childs.length;if(0!==J_b)for(var J_c=0;J_c<J_b;++J_c)this._childs[J_c]._update(J_a)},J_c._getSortID=function(J_a,J_b){return 1e3*J_b.id+J_a._getVertexBuffer().vertexDeclaration.id},J_c._update=function(J_a){(J_a.owner=this)._activeInHierarchy&&(this._updateComponents(J_a),this._lateUpdateComponents(J_a),J_A.spriteCount++,this._childs.length&&this._updateChilds(J_a))},J_c.getProjectionViewWorldMatrix=function(J_a){return J_ab.multiply(J_a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},J_c.loadHierarchy=function(J_a){this.addChild(laya.d3.core.Sprite3D.load(J_a))},J_c.addChildAt=function(J_a,J_b){if(!(J_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),0<=J_b&&J_b<=this._childs.length){if(J_a._parent===this){var J_c=this.getChildIndex(J_a);this._childs.splice(J_c,1),this._childs.splice(J_b,0,J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,J_b)),this._childChanged()}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J_b,0,J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,J_b),(J_a.parent=this)._addChild3D(J_a);return J_a}throw new Error("appendChildAt:The index is out of bounds")},J_c.addChild=function(J_a){if(!(J_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J_a||this.destroyed||J_a===this)return J_a;if(J_a.zOrder&&this._set$P("hasZorder",!0),J_a._parent===this){var J_b=this.getChildIndex(J_a);J_b!==this._childs.length-1&&(this._childs.splice(J_b,1),this._childs.push(J_a),this.conchModel&&(this.conchModel.removeChild(J_a.conchModel),this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1)),this._childChanged())}else J_a.parent&&J_a.parent.removeChild(J_a),this._childs===J_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J_a),this.conchModel&&this.conchModel.addChildAt(J_a.conchModel,this._childs.length-1),(J_a.parent=this)._childChanged(),this._addChild3D(J_a);return J_a},J_c.removeChildAt=function(J_a){var J_b=this.getChildAt(J_a);return J_b&&(this._removeChild3D(J_b),this._childs.splice(J_a,1),this.conchModel&&this.conchModel.removeChild(J_b.conchModel),J_b.parent=null),J_b},J_c.removeChildren=function(J_a,J_b){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=2147483647),this._childs&&0<this._childs.length){var J_c=this._childs;if(0===J_a&&J_f<=J_b){var J_d=J_c;this._childs=J_j.ARRAY_EMPTY}else J_d=J_c.splice(J_a,J_b-J_a);for(var J_e=0,J_f=J_d.length;J_e<J_f;J_e++)this._removeChild3D(J_d[J_e]),J_d[J_e].parent=null,this.conchModel&&this.conchModel.removeChild(J_d[J_e].conchModel)}return this},J_c.onAsynLoaded=function(J_a,J_b,J_c){var J_d=J_b[0];if("Sprite3D"!==J_d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var J_e=J_b[1];J_qb._createNodeByJson(this,J_d,this,J_e),this.event("hierarchyloaded",[this]),this.__loaded=!0},J_c.cloneTo=function(J_a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var J_b=J_a;J_b.name=this.name,J_b._destroyed=this._destroyed,J_b.timer=this.timer,J_b._$P=this._$P,J_b.active=this._active;var J_c=J_b.transform.localPosition;this.transform.localPosition.cloneTo(J_c),J_b.transform.localPosition=J_c;var J_d=J_b.transform.localRotation;this.transform.localRotation.cloneTo(J_d),J_b.transform.localRotation=J_d;var J_e=J_b.transform.localScale;this.transform.localScale.cloneTo(J_e),J_b.transform.localScale=J_e,J_b.isStatic=this.isStatic;var J_f=0,J_g=0;for(J_f=0,J_g=this._componentsMap.length;J_f<J_g;J_f++){var J_h=J_b.addComponent(this._componentsMap[J_f]);this._components[J_f]._cloneTo(J_h)}for(J_f=0,J_g=this._childs.length;J_f<J_g;J_f++)J_b.addChild(this._childs[J_f].clone());var J_i=J_b.getComponentByType(Animator);if(J_i){var J_j=J_i._linkSpritesData;if(J_j)for(var J_k in J_j){for(var J_l=J_j[J_k],J_m=J_b,J_n=0,J_o=J_l.length;J_n<J_o&&(J_m=J_m.getChildByName(J_l[J_n]));J_n++);if(J_m){var J_p=J_i._avatarNodeMap[J_k];J_m._isLinkSpriteToAnimationNode(J_i,J_p,!0)}}}},J_c.clone=function(){var J_a=new this.constructor;return this.cloneTo(J_a),J_a},J_c.destroy=function(J_a){if(void 0===J_a&&(J_a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,J_a);var J_b,J_c=0;for(J_c=0,J_b=this._components.length;J_c<J_b;J_c++)this._components[J_c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,J_r.clearRes(this.url),this.loaded||J_rb._cancelLoadByUrl(this.url)}},J_c._handleSpriteToAvatar=function(J_a,J_b){J_a._avatarNodes;var J_c=J_a._avatarNodeMap[this.name];J_c&&J_c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(J_a,J_c,J_b)},J_c._setAnimatorToLinkAvatar=function(J_a,J_b){this._handleSpriteToAvatar(J_a,J_b);for(var J_c=0,J_d=this._childs.length;J_c<J_d;J_c++){this._childs[J_c]._setAnimatorToLinkAvatar(J_a,J_b)}},J_o(0,J_c,"activeInHierarchy",function(){return this._activeInHierarchy}),J_o(0,J_c,"_loaded",null,function(J_a){this.__loaded=J_a}),J_o(0,J_c,"active",function(){return this._active},function(J_a){this._active!==J_a&&(this._active=J_a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(J_a?this._activeHierarchy():this._inActiveHierarchy()))}),J_o(0,J_c,"componentsCount",function(){return this._components.length}),J_o(0,J_c,"loaded",function(){return this.__loaded}),J_o(0,J_c,"id",function(){return this._id}),J_o(0,J_c,"url",function(){return this._url}),J_o(0,J_c,"layer",function(){return this._layer},function(J_a){if(this._layer!==J_a){if(!J_a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var J_b=0,J_c=this._colliders.length;if(this._layer)for(J_b=0;J_b<J_c;J_b++)this._layer._removeCollider(this._colliders[J_b]);for(J_b=0;J_b<J_c;J_b++)J_a._addCollider(this._colliders[J_b])}this._layer=J_a,this.event("layerchanged",J_a)}}),J_o(0,J_c,"scene",function(){return this._scene}),J_o(0,J_c,"transform",function(){return this._transform}),J_b.instantiate=function(J_a,J_b,J_c,J_d,J_e){void 0===J_c&&(J_c=!0);var J_f=J_a.clone();J_b&&J_b.addChild(J_f);var J_g=J_f.transform;if(J_c){var J_h=J_g.worldMatrix;J_a.transform.worldMatrix.cloneTo(J_h),J_g.worldMatrix=J_h}else J_d&&(J_g.position=J_d),J_e&&(J_g.rotation=J_e);return J_f},J_b.load=function(J_a){return J_x.loader.create(J_a,null,null,J_b)},J_b.WORLDMATRIX=0,J_b.MVPMATRIX=1,J_b._uniqueIDCounter=0,J_b._nameNumberCounter=0,J_b}(),J_Lb=function(J_a){function J_k(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],J_k.__super.call(this),!J_a||!J_b)throw"Shader Error";this._id=++J_k._count,this._vs=J_a,this._ps=J_b,this._attributeMap=J_c,this._sceneUniformMap=J_d,this._cameraUniformMap=J_e,this._spriteUniformMap=J_f,this._materialUniformMap=J_g,this._renderElementUniformMap=J_h,this._precompile=J_i,this._define=J_j,this._precompile&&J_k.extCompileObj&&J_k.extCompileFunc?J_k.extCompileFunc.call(J_k.extCompileObj,J_a,J_b,J_j):this.recreateResource()}J_n(J_k,"laya.d3.shader.Shader3D",J_c);var J_b=J_k.prototype;return J_b.recreateResource=function(){J_H.now();this._compile(),this.completeCreate(),this.memorySize=0},J_b.disposeResource=function(){J_F.mainContext.deleteShader(this._vshader),J_F.mainContext.deleteShader(this._pshader),J_F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},J_b._compile=function(){if(!J_F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var J_a=[this._vs,this._ps],J_b=J_F.mainContext;if(this._program=J_b.createProgram(),this._vshader=J_k._createShader(J_b,J_a[0],35633),this._pshader=J_k._createShader(J_b,J_a[1],35632),J_b.attachShader(this._program,this._vshader),J_b.attachShader(this._program,this._pshader),J_b.linkProgram(this._program),!J_p.isConchApp&&J_Ab.debugMode&&!J_b.getProgramParameter(this._program,35714))throw J_b.getProgramInfoLog(this._program);var J_c,J_d=0,J_e=0,J_f=0;for(J_f=J_p.isConchApp?J_b.getProgramParameterEx(this._vs,this._ps,"",35721):J_b.getProgramParameter(this._program,35721),J_d=0;J_d<J_f;J_d++){var J_g=null;J_c={vartype:"attribute",ivartype:0,attrib:J_g=J_p.isConchApp?J_b.getActiveAttribEx(this._vs,this._ps,"",J_d):J_b.getActiveAttrib(this._program,J_d),location:J_b.getAttribLocation(this._program,J_g.name),name:J_g.name,type:J_g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(J_c)}var J_h=0;for(J_h=J_p.isConchApp?J_b.getProgramParameterEx(this._vs,this._ps,"",35718):J_b.getProgramParameter(this._program,35718),J_d=0;J_d<J_h;J_d++){var J_i=null;J_i=J_p.isConchApp?J_b.getActiveUniformEx(this._vs,this._ps,"",J_d):J_b.getActiveUniform(this._program,J_d),0<(J_c={vartype:"uniform",ivartype:1,attrib:J_g,location:J_b.getUniformLocation(this._program,J_i.name),name:J_i.name,type:J_i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(J_c.name=J_c.name.substr(0,J_c.name.length-3),J_c.isArray=!0,J_c.location=J_b.getUniformLocation(this._program,J_c.name)),this._uniformParams.push(J_c)}for(J_d=0,J_e=this._attributeParams.length;J_d<J_e;J_d++)(J_c=this._attributeParams[J_d]).indexOfParams=J_d,J_c.index=1,J_c.value=[J_c.location,null],J_c.codename=J_c.name,J_c.name=null!=this._attributeMap[J_c.codename]?this._attributeMap[J_c.codename]:J_c.codename,this._attributeParamsMap.push(J_c.name),this._attributeParamsMap.push(J_c),J_c._this=this,J_c.uploadedValue=[],J_c.fun=this._attribute;for(J_d=0,J_e=this._uniformParams.length;J_d<J_e;J_d++)switch((J_c=this._uniformParams[J_d]).indexOfParams=J_d,J_c.index=1,J_c.value=[J_c.location,null],J_c.codename=J_c.name,null!=this._sceneUniformMap[J_c.codename]?(J_c.name=this._sceneUniformMap[J_c.codename],this._sceneUniformParamsMap.push(J_c.name),this._sceneUniformParamsMap.push(J_c)):null!=this._cameraUniformMap[J_c.codename]?(J_c.name=this._cameraUniformMap[J_c.codename],this._cameraUniformParamsMap.push(J_c.name),this._cameraUniformParamsMap.push(J_c)):null!=this._spriteUniformMap[J_c.codename]?(J_c.name=this._spriteUniformMap[J_c.codename],this._spriteUniformParamsMap.push(J_c.name),this._spriteUniformParamsMap.push(J_c)):null!=this._materialUniformMap[J_c.codename]?(J_c.name=this._materialUniformMap[J_c.codename],this._materialUniformParamsMap.push(J_c.name),this._materialUniformParamsMap.push(J_c)):null!=this._renderElementUniformMap[J_c.codename]?(J_c.name=this._renderElementUniformMap[J_c.codename],this._renderElementUniformParamsMap.push(J_c.name),this._renderElementUniformParamsMap.push(J_c)):console.log("Shader:can't find uinform name:"+J_c.codename+" in shader file."),J_c._this=this,J_c.uploadedValue=[],J_c.type){case 5124:J_c.fun=J_c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:J_c.fun=J_c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:J_c.fun=J_c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:J_c.fun=J_c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:J_c.fun=J_c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:J_c.fun=this._uniform_sampler2D;break;case 35680:J_c.fun=this._uniform_samplerCube;break;case 35676:J_c.fun=this._uniformMatrix4fv;break;case 35670:J_c.fun=this._uniform1i;break;case 35674:J_c.fun=this._uinformMatrix2fv;break;case 35675:J_c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},J_b._attribute=function(J_a,J_b){var J_c=J_F.mainContext,J_d=J_h._enableAtributes,J_e=J_a.location;return J_d[J_e]||J_c.enableVertexAttribArray(J_e),J_c.vertexAttribPointer(J_e,J_b[0],J_b[1],J_b[2],J_b[3],J_b[4]),J_d[J_e]=J_h._bindVertexBuffer,1},J_b._uniform1f=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b?(J_F.mainContext.uniform1f(J_a.location,J_c[0]=J_b),1):0},J_b._uniform1fv=function(J_a,J_b){if(J_b.length<4){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_F.mainContext.uniform1fv(J_a.location,J_b),J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3],1):0}return J_F.mainContext.uniform1fv(J_a.location,J_b),1},J_b._uniform_vec2=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]?(J_F.mainContext.uniform2f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1]),1):0},J_b._uniform_vec2v=function(J_a,J_b){if(J_b.length<2){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_F.mainContext.uniform2fv(J_a.location,J_b),J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3],1):0}return J_F.mainContext.uniform2fv(J_a.location,J_b),1},J_b._uniform_vec3=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]?(J_F.mainContext.uniform3f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2]),1):0},J_b._uniform_vec3v=function(J_a,J_b){return J_F.mainContext.uniform3fv(J_a.location,J_b),1},J_b._uniform_vec4=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_F.mainContext.uniform4f(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3]),1):0},J_b._uniform_vec4v=function(J_a,J_b){return J_F.mainContext.uniform4fv(J_a.location,J_b),1},J_b._uniformMatrix2fv=function(J_a,J_b){return J_F.mainContext.uniformMatrix2fv(J_a.location,!1,J_b),1},J_b._uniformMatrix3fv=function(J_a,J_b){return J_F.mainContext.uniformMatrix3fv(J_a.location,!1,J_b),1},J_b._uniformMatrix4fv=function(J_a,J_b){return J_F.mainContext.uniformMatrix4fv(J_a.location,!1,J_b),1},J_b._uinformMatrix2fv=function(J_a,J_b){return J_F.mainContext.uniformMatrix2fv(J_a.location,!1,J_b),1},J_b._uinformMatrix3fv=function(J_a,J_b){return J_F.mainContext.uniformMatrix3fv(J_a.location,!1,J_b),1},J_b._uniform1i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b?(J_F.mainContext.uniform1i(J_a.location,J_c[0]=J_b),1):0},J_b._uniform1iv=function(J_a,J_b){return J_F.mainContext.uniform1iv(J_a.location,J_b),1},J_b._uniform_ivec2=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]?(J_F.mainContext.uniform2i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1]),1):0},J_b._uniform_ivec2v=function(J_a,J_b){return J_F.mainContext.uniform2iv(J_a.location,J_b),1},J_b._uniform_vec3i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]?(J_F.mainContext.uniform3i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2]),1):0},J_b._uniform_vec3vi=function(J_a,J_b){return J_F.mainContext.uniform3iv(J_a.location,J_b),1},J_b._uniform_vec4i=function(J_a,J_b){var J_c=J_a.uploadedValue;return J_c[0]!==J_b[0]||J_c[1]!==J_b[1]||J_c[2]!==J_b[2]||J_c[3]!==J_b[3]?(J_F.mainContext.uniform4i(J_a.location,J_c[0]=J_b[0],J_c[1]=J_b[1],J_c[2]=J_b[2],J_c[3]=J_b[3]),1):0},J_b._uniform_vec4vi=function(J_a,J_b){return J_F.mainContext.uniform4iv(J_a.location,J_b),1},J_b._uniform_sampler2D=function(J_a,J_b){var J_c=J_b.source||J_b.defaulteTexture.source,J_d=J_F.mainContext,J_e=J_a.uploadedValue;if(null!=J_e[0])return J_d.activeTexture(J_k._TEXTURES[J_e[0]]),J_c&&J_G.bindTexture(J_d,3553,J_c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return J_e[0]=this._curActTexIndex,J_d.uniform1i(J_a.location,this._curActTexIndex),J_d.activeTexture(J_k._TEXTURES[this._curActTexIndex]),J_c&&J_G.bindTexture(J_d,3553,J_c),this._curActTexIndex++,1},J_b._uniform_samplerCube=function(J_a,J_b){var J_c=J_b.source||J_b.defaulteTexture.source,J_d=J_F.mainContext,J_e=J_a.uploadedValue;if(null!=J_e[0])return J_d.activeTexture(J_k._TEXTURES[J_e[0]]),J_c?J_G.bindTexture(J_d,34067,J_c):J_G.bindTexture(J_d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return J_e[0]=this._curActTexIndex,J_d.uniform1i(J_a.location,this._curActTexIndex),J_d.activeTexture(J_k._TEXTURES[this._curActTexIndex]),J_c?J_G.bindTexture(J_d,34067,J_c):J_G.bindTexture(J_d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},J_b._noSetValue=function(J_a){console.log("no....:"+J_a.name)},J_b.bind=function(){return J_c.activeShader=this,(J_c.bindShader=this).activeResource(),J_G.UseProgram(this._program)},J_b.uploadAttributes=function(J_a,J_b){for(var J_c,J_d,J_e=0,J_f=0,J_g=this._attributeParamsMap.length;J_f<J_g;J_f+=2)J_d=this._attributeParamsMap[J_f+1],null!=(J_c=J_a[this._attributeParamsMap[J_f]])&&(J_b&&J_b[J_d.name]&&J_b[J_d.name].bind(),J_e+=J_d.fun.call(this,J_d,J_c));J_A.shaderCall+=J_e},J_b.uploadAttributesX=function(J_a,J_b){for(var J_c,J_d,J_e=0,J_f=0,J_g=this._attributeParamsMap.length;J_f<J_g;J_f+=2)J_d=this._attributeParamsMap[J_f+1],null!=(J_c=J_a[this._attributeParamsMap[J_f]])&&(J_b._bind(),J_e+=J_d.fun.call(this,J_d,J_c));J_A.shaderCall+=J_e},J_b.uploadSceneUniforms=function(J_a){for(var J_b,J_c,J_d=0,J_e=0,J_f=this._sceneUniformParamsMap.length;J_e<J_f;J_e+=2)J_c=this._sceneUniformParamsMap[J_e+1],null!=(J_b=J_a[this._sceneUniformParamsMap[J_e]])&&(J_d+=J_c.fun.call(this,J_c,J_b));J_A.shaderCall+=J_d},J_b.uploadCameraUniforms=function(J_a){for(var J_b,J_c,J_d=0,J_e=0,J_f=this._cameraUniformParamsMap.length;J_e<J_f;J_e+=2)J_c=this._cameraUniformParamsMap[J_e+1],null!=(J_b=J_a[this._cameraUniformParamsMap[J_e]])&&(J_d+=J_c.fun.call(this,J_c,J_b));J_A.shaderCall+=J_d},J_b.uploadSpriteUniforms=function(J_a){for(var J_b,J_c,J_d=0,J_e=0,J_f=this._spriteUniformParamsMap.length;J_e<J_f;J_e+=2)J_c=this._spriteUniformParamsMap[J_e+1],null!=(J_b=J_a[this._spriteUniformParamsMap[J_e]])&&(J_d+=J_c.fun.call(this,J_c,J_b));J_A.shaderCall+=J_d},J_b.uploadMaterialUniforms=function(J_a){for(var J_b,J_c,J_d=0,J_e=0,J_f=this._materialUniformParamsMap.length;J_e<J_f;J_e+=2)J_c=this._materialUniformParamsMap[J_e+1],null!=(J_b=J_a[this._materialUniformParamsMap[J_e]])&&(J_d+=J_c.fun.call(this,J_c,J_b));J_A.shaderCall+=J_d},J_b.uploadRenderElementUniforms=function(J_a){for(var J_b,J_c,J_d=0,J_e=0,J_f=this._renderElementUniformParamsMap.length;J_e<J_f;J_e+=2)J_c=this._renderElementUniformParamsMap[J_e+1],null!=(J_b=J_a[this._renderElementUniformParamsMap[J_e]])&&(J_d+=J_c.fun.call(this,J_c,J_b));J_A.shaderCall+=J_d},J_k.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return new J_k(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j)},J_k.addInclude=function(J_a,J_b){J_v.addInclude(J_a,J_b)},J_k._createShader=function(J_a,J_b,J_c){var J_d=J_a.createShader(J_c);if(J_a.shaderSource(J_d,J_b),J_a.compileShader(J_d),J_Ab.debugMode&&!J_a.getShaderParameter(J_d,35713))throw J_a.getShaderInfoLog(J_d);return J_d},J_k.PERIOD_RENDERELEMENT=0,J_k.PERIOD_MATERIAL=1,J_k.PERIOD_SPRITE=2,J_k.PERIOD_CAMERA=3,J_k.PERIOD_SCENE=4,J_k._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],J_k._count=0,J_k._preCompile=!1,J_k.extCompileFunc=null,J_k.extCompileObj=null,J_l(J_k,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new J_B}]),J_k}(),J_Mb=function(J_h){function J_i(){this._transformUV=null,J_i.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new J_gb(.6,.6,.6)),this._setColor(10,new J_gb(1,1,1)),this._setColor(11,new J_hb(1,1,1,8)),this._setColor(12,new J_gb(1,1,1)),this._setColor(7,new J_hb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new J_hb(1,1,0,0)),this.renderMode=1}J_n(J_i,"laya.d3.core.material.StandardMaterial",J_h);var J_a=J_i.prototype;return J_a.disableLight=function(){this._addDisablePublicShaderDefine(J_Ab.SHADERDEFINE_POINTLIGHT|J_Ab.SHADERDEFINE_SPOTLIGHT|J_Ab.SHADERDEFINE_DIRECTIONLIGHT)},J_a.disableFog=function(){this._addDisablePublicShaderDefine(J_Ab.SHADERDEFINE_FOG)},J_a.onAsynLoaded=function(J_a,J_b,J_c){var J_d=J_b[0];if(J_d.version)J_h.prototype.onAsynLoaded.call(this,J_a,J_b,J_c);else{var J_e=J_b[1],J_f=J_d.props;for(var J_g in J_f)this[J_g]=J_f[J_g];J_i._parseStandardMaterial(J_e,this,J_d),this._endLoaded()}},J_a.cloneTo=function(J_a){J_h.prototype.cloneTo.call(this,J_a);var J_b=J_a;this._transformUV&&(J_b._transformUV=this._transformUV.clone())},J_o(0,J_a,"ambientColor",function(){return this._getColor(9)},function(J_a){this._setColor(9,J_a)}),J_o(0,J_a,"ambientTexture",function(){return this._getTexture(5)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,J_a)}),J_o(0,J_a,"renderMode",null,function(J_a){switch(J_a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J_i.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(J_a)}),J_o(0,J_a,"reflectColor",function(){return this._getColor(12)},function(J_a){this._setColor(12,J_a)}),J_o(0,J_a,"tilingOffset",function(){return this._getColor(15)},function(J_a){if(J_a){var J_b=J_a.elements;1!=J_b[0]||1!=J_b[1]||0!=J_b[2]||0!=J_b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,J_a)}),J_o(0,J_a,"albedo",function(){return this._getColor(7)},function(J_a){this._setColor(7,J_a)}),J_o(0,J_a,"diffuseColor",function(){return this._getColor(10)},function(J_a){this._setColor(10,J_a)}),J_o(0,J_a,"albedoColor",function(){return this._getColor(7)},function(J_a){this._setColor(7,J_a)}),J_o(0,J_a,"specularColor",function(){return this._getColor(11)},function(J_a){this._setColor(11,J_a)}),J_o(0,J_a,"diffuseTexture",function(){return this._getTexture(1)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,J_a)}),J_o(0,J_a,"normalTexture",function(){return this._getTexture(2)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,J_a)}),J_o(0,J_a,"specularTexture",function(){return this._getTexture(3)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,J_a)}),J_o(0,J_a,"emissiveTexture",function(){return this._getTexture(4)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,J_a)}),J_o(0,J_a,"reflectTexture",function(){return this._getTexture(6)},function(J_a){J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,J_a)}),J_o(0,J_a,"transformUV",function(){return this._transformUV},function(J_a){this._transformUV=J_a,this._setMatrix4x4(13,J_a.matrix),J_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,J_a.matrix.elements,0)}),J_i.__init__=function(){J_i.SHADERDEFINE_DIFFUSEMAP=J_i.shaderDefines.registerDefine("DIFFUSEMAP"),J_i.SHADERDEFINE_NORMALMAP=J_i.shaderDefines.registerDefine("NORMALMAP"),J_i.SHADERDEFINE_SPECULARMAP=J_i.shaderDefines.registerDefine("SPECULARMAP"),J_i.SHADERDEFINE_EMISSIVEMAP=J_i.shaderDefines.registerDefine("EMISSIVEMAP"),J_i.SHADERDEFINE_AMBIENTMAP=J_i.shaderDefines.registerDefine("AMBIENTMAP"),J_i.SHADERDEFINE_REFLECTMAP=J_i.shaderDefines.registerDefine("REFLECTMAP"),J_i.SHADERDEFINE_UVTRANSFORM=J_i.shaderDefines.registerDefine("UVTRANSFORM"),J_i.SHADERDEFINE_TILINGOFFSET=J_i.shaderDefines.registerDefine("TILINGOFFSET"),J_i.SHADERDEFINE_ADDTIVEFOG=J_i.shaderDefines.registerDefine("ADDTIVEFOG")},J_i.load=function(J_a){return J_x.loader.create(J_a,null,null,J_i)},J_i._parseStandardMaterial=function(J_a,J_b,J_c){var J_d=J_c.customProps,J_e=J_d.ambientColor;J_b.ambientColor=new J_gb(J_e[0],J_e[1],J_e[2]);var J_f=J_d.diffuseColor;J_b.diffuseColor=new J_gb(J_f[0],J_f[1],J_f[2]);var J_g=J_d.specularColor;J_b.specularColor=new J_hb(J_g[0],J_g[1],J_g[2],J_g[3]);var J_h=J_d.reflectColor;J_b.reflectColor=new J_gb(J_h[0],J_h[1],J_h[2]);var J_i=J_d.albedoColor;J_i&&(J_b.albedo=new J_hb(J_i[0],J_i[1],J_i[2],J_i[3]));var J_j=J_d.diffuseTexture.texture2D;J_j&&(J_b.diffuseTexture=J_r.getRes(J_a[J_j]));var J_k=J_d.normalTexture.texture2D;J_k&&(J_b.normalTexture=J_r.getRes(J_a[J_k]));var J_l=J_d.specularTexture.texture2D;J_l&&(J_b.specularTexture=J_r.getRes(J_a[J_l]));var J_m=J_d.emissiveTexture.texture2D;J_m&&(J_b.emissiveTexture=J_r.getRes(J_a[J_m]));var J_n=J_d.ambientTexture.texture2D;J_n&&(J_b.ambientTexture=J_r.getRes(J_a[J_n]));var J_o=J_d.reflectTexture.texture2D;J_o&&(J_b.reflectTexture=J_r.getRes(J_a[J_o]))},J_i.RENDERMODE_OPAQUE=1,J_i.RENDERMODE_OPAQUEDOUBLEFACE=2,J_i.RENDERMODE_CUTOUT=3,J_i.RENDERMODE_CUTOUTDOUBLEFACE=4,J_i.RENDERMODE_TRANSPARENT=13,J_i.RENDERMODE_TRANSPARENTDOUBLEFACE=14,J_i.RENDERMODE_ADDTIVE=15,J_i.RENDERMODE_ADDTIVEDOUBLEFACE=16,J_i.RENDERMODE_DEPTHREAD_TRANSPARENT=5,J_i.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,J_i.RENDERMODE_DEPTHREAD_ADDTIVE=7,J_i.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,J_i.RENDERMODE_NONDEPTH_TRANSPARENT=9,J_i.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,J_i.RENDERMODE_NONDEPTH_ADDTIVE=11,J_i.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,J_i.SHADERDEFINE_DIFFUSEMAP=0,J_i.SHADERDEFINE_NORMALMAP=0,J_i.SHADERDEFINE_SPECULARMAP=0,J_i.SHADERDEFINE_EMISSIVEMAP=0,J_i.SHADERDEFINE_AMBIENTMAP=0,J_i.SHADERDEFINE_REFLECTMAP=0,J_i.SHADERDEFINE_UVTRANSFORM=0,J_i.SHADERDEFINE_TILINGOFFSET=0,J_i.SHADERDEFINE_ADDTIVEFOG=0,J_i.DIFFUSETEXTURE=1,J_i.NORMALTEXTURE=2,J_i.SPECULARTEXTURE=3,J_i.EMISSIVETEXTURE=4,J_i.AMBIENTTEXTURE=5,J_i.REFLECTTEXTURE=6,J_i.ALBEDO=7,J_i.UVANIAGE=8,J_i.MATERIALAMBIENT=9,J_i.MATERIALDIFFUSE=10,J_i.MATERIALSPECULAR=11,J_i.MATERIALREFLECT=12,J_i.UVMATRIX=13,J_i.UVAGE=14,J_i.TILINGOFFSET=15,J_l(J_i,["defaultMaterial",function(){var J_a=new J_i;return J_a.lock=!0,this.defaultMaterial=J_a},"shaderDefines",function(){return this.shaderDefines=new J_kb(J_Eb.shaderDefines)}]),J_i}(J_Eb),J_Nb=function(J_a){function J_g(J_a,J_b,J_c,J_d,J_e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===J_c&&(J_c=35044),void 0===J_d&&(J_d=!1),J_g.__super.call(this),this._indexType=J_a,this._indexCount=J_b,this._bufferUsage=J_c,this._bufferType=34963,this._canRead=J_d;var J_f;if("ushort"==J_a)this._indexTypeByteCount=2;else{if("ubyte"!=J_a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}J_f=this._indexTypeByteCount*J_b,this._byteLength=J_f,this._bind(),J_h._gl.bufferData(this._bufferType,J_f,this._bufferUsage),this.uri=J_e,J_d?("ushort"==J_a?this._buffer=new Uint16Array(J_b):"ubyte"==J_a&&(this._buffer=new Uint8Array(J_b)),this.memorySize=2*J_f):this.memorySize=J_f}J_n(J_g,"laya.d3.graphics.IndexBuffer3D",J_a);var J_b=J_g.prototype;return J_b.setData=function(J_a,J_b,J_c,J_d){void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=4294967295);var J_e=0;if("ushort"==this._indexType?(J_e=2,0===J_c&&4294967295===J_d||(J_a=new Uint16Array(J_a.buffer,J_c*J_e,J_d))):"ubyte"==this._indexType&&(J_e=1,0===J_c&&4294967295===J_d||(J_a=new Uint8Array(J_a.buffer,J_c*J_e,J_d))),this._bind(),J_h._gl.bufferSubData(this._bufferType,J_b*J_e,J_a),this._canRead)if(0!==J_b||0!==J_c||4294967295!==J_d){var J_f=this._buffer.length-J_b;J_f<J_d&&(J_d=J_f);for(var J_g=0;J_g<J_d;J_g++)this._buffer[J_b+J_g]=J_a[J_g]}else this._buffer=J_a},J_b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},J_b.disposeResource=function(){J_a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},J_o(0,J_b,"indexType",function(){return this._indexType}),J_o(0,J_b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),J_o(0,J_b,"indexCount",function(){return this._indexCount}),J_o(0,J_b,"canRead",function(){return this._canRead}),J_g.INDEXTYPE_UBYTE="ubyte",J_g.INDEXTYPE_USHORT="ushort",J_g.create=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_c&&(J_c=35044),void 0===J_d&&(J_d=!1),new J_g(J_a,J_b,J_c,J_d,J_e)},J_g}(J_h),J_Ob=function(J_f){function J_g(J_a,J_b,J_c,J_d,J_e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===J_d&&(J_d=!1),J_g.__super.call(this),this._vertexDeclaration=J_a,this._vertexCount=J_b,this._bufferUsage=J_c,this._bufferType=34962,this._canRead=J_d,this.uri=J_e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*J_b,this._bind(),J_h._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),J_d&&(this._buffer=new Float32Array(this._byteLength/4))}J_n(J_g,"laya.d3.graphics.VertexBuffer3D",J_f);var J_a=J_g.prototype;return J_a.bindWithIndexBuffer=function(J_a){J_a&&J_a._bind(),this._bind()},J_a.setData=function(J_a,J_b,J_c,J_d){if(void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=4294967295),0===J_c&&4294967295===J_d||(J_a=new Float32Array(J_a.buffer,4*J_c,J_d)),this._bind(),J_h._gl.bufferSubData(this._bufferType,4*J_b,J_a),this._canRead)if(0!==J_b||0!==J_c||4294967295!==J_d){var J_e=this._buffer.length-J_b;J_e<J_d&&(J_d=J_e);for(var J_f=0;J_f<J_d;J_f++)this._buffer[J_b+J_f]=J_a[J_f]}else this._buffer=J_a},J_a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},J_a.disposeResource=function(){for(var J_a=J_F.mainContext,J_b=this._vertexDeclaration.getVertexElements(),J_c=J_h._enableAtributes,J_d=0,J_e=J_b.length;J_d<J_e;J_d++)J_c[J_d]===this._glBuffer&&(J_a.disableVertexAttribArray(J_d),J_c[J_d]=null);J_f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},J_o(0,J_a,"vertexDeclaration",function(){return this._vertexDeclaration}),J_o(0,J_a,"vertexCount",function(){return this._vertexCount}),J_o(0,J_a,"canRead",function(){return this._canRead}),J_g.create=function(J_a,J_b,J_c,J_d,J_e){return void 0===J_c&&(J_c=35044),void 0===J_d&&(J_d=!1),new J_g(J_a,J_b,J_c,J_d,J_e)},J_g}(J_h),J_Pb=function(J_a){function J_v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,J_v.__super.call(this),this._type=3553}J_n(J_v,"laya.d3.resource.DataTexture2D",J_Fb);var J_b=J_v.prototype;return J_b.genDebugMipmaps=function(){var J_a=[];return J_a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),J_a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),J_a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),J_a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),J_a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),J_a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),J_a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),J_a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),J_a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),J_a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),J_a},J_b._onTextureLoaded=function(J_a){},J_b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var J_a=J_F.mainContext,J_b=this._source=J_a.createTexture(),J_c=this._width,J_d=this._height,J_e=J_G.curBindTexTarget,J_f=J_G.curBindTexValue,J_g=!1;if(J_G.bindTexture(J_a,this._type,J_b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var J_h=0;J_a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var J_i=0;J_i<this._mipmaps.length;J_i++){if(this._mipmaps[J_i].byteLength!=J_j*J_k*4)throw"mipmap size error  level:"+J_i;J_a.texSubImage2D(this._type,0,J_v.simLodRect[J_h++],J_v.simLodRect[J_h++],J_v.simLodRect[J_h++],J_v.simLodRect[J_h++],6408,5121,new Uint8Array(this._mipmaps[J_i]))}this.minFifter=9729,this.magFifter=9729}else{var J_j=this._width,J_k=this._height;for(J_h=0,J_a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),J_i=0;J_i<this._mipmaps.length;J_i++){if(this._mipmaps[J_i].byteLength!=J_j*J_k*4)throw"mipmap size error  level:"+J_i;J_a.texImage2D(this._type,J_i,6408,J_j,J_k,0,6408,5121,new Uint8Array(this._mipmaps[J_i])),(J_j/=2)<1&&(J_j=1),(J_k/=2)<1&&(J_k=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&J_a.pixelStorei(J_a.UNPACK_ALIGNMENT,1),J_a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var J_l=0,J_m=!1,J_n=!1;this._buffer.byteLength==4*J_c*J_d?(J_l=6408,J_m=!0):this._buffer.byteLength==3*J_c*J_d?(J_l=6407,J_n=!0):J_l=this._format,J_m||J_n?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),J_n&&J_a.pixelStorei(J_a.UNPACK_ALIGNMENT,1),J_a.texImage2D(this._type,0,J_l,J_c,J_d,0,J_l,5121,this._buffer)):J_a&&J_l==J_a.ALPHA?(J_a.texImage2D(3553,0,J_l,J_c,J_d,0,J_l,J_a.UNSIGNED_BYTE,this._buffer),J_g=!0):0!=J_l&&(J_a.compressedTexImage2D(3553,0,J_l,J_c,J_d,0,this._buffer),J_g=!0)}var J_o=this._minFifter,J_p=this._magFifter,J_q=0==this._wrapModeU?10497:33071,J_r=0==this._wrapModeV?10497:33071,J_u=J_w.isPOT(J_c,J_d);J_u?(this._mipmap||this._mipmaps?-1!==J_o||(J_o=9987):-1!==J_o||(J_o=9729),-1!==J_p||(J_p=9729),J_a.texParameteri(this._type,10241,J_o),J_a.texParameteri(this._type,10240,J_p),J_a.texParameteri(this._type,10242,J_q),J_a.texParameteri(this._type,10243,J_r),this._mipmap&&J_a.generateMipmap(this._type)):(-1!==J_o||(J_o=9729),-1!==J_p||(J_p=9729),J_a.texParameteri(this._type,10241,J_o),J_a.texParameteri(this._type,10240,J_p),J_a.texParameteri(this._type,10242,33071),J_a.texParameteri(this._type,10243,33071)),J_e&&J_f&&J_G.bindTexture(J_a,J_e,J_f),this.memorySize=J_g?this._buffer.length:J_u?J_c*J_d*4*(1+1/3):J_c*J_d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},J_b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},J_b.onAsynLoaded=function(J_a,J_b,J_c){var J_d;J_c&&(J_d=J_c[0].call(this,J_b)),J_d&&(this._width=J_d.width,this._height=J_d.height,this._buffer=J_d.data),this._src=J_a,this._size=new J_pb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},J_b.getPixels=function(){return new Uint8Array(this._buffer)},J_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(J_F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},J_o(0,J_b,"src",function(){return this._src}),J_v.create=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){if(void 0===J_d&&(J_d=9729),void 0===J_e&&(J_e=9729),void 0===J_f&&(J_f=!0),!J_a||J_a.byteLength<J_b*J_c*4)throw"DataTexture2D create error";var J_h=new J_v;return J_h.uri=J_g,J_h._buffer=J_a,J_h._width=J_b,J_h._height=J_c,J_h._mipmap=J_f,J_h._magFifter=J_d,J_h._minFifter=J_e,J_h._size=new J_pb(J_h._width,J_h._height),J_h._conchTexture?alert("怎么给runtime传递datatexture数据"):J_h.activeResource(),J_h},J_v.load=function(J_a,J_b,J_c,J_d,J_e){if(void 0===J_b&&(J_b=0),void 0===J_c&&(J_c=0),void 0===J_d&&(J_d=9729),void 0===J_e&&(J_e=9729),"mipmaps"===J_C.getFileExtension(J_a)){var J_f=J_x.loader.create(J_a,null,null,J_v,[function(J_a){this._mipmaps=[];var J_b=new Uint32Array(J_a);this._width=J_b[0];var J_c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,J_c=1024),this._width!=J_c)throw"现在只支持512x256的环境贴图。当前的是"+J_b[0];this._height=J_b[1];for(var J_d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,J_e=this._height,J_f=8;;){var J_g=J_d*J_e*4;if(J_f+J_g>J_a.byteLength)throw"load mipmaps data size error ";var J_h=new Uint8Array(J_a,J_f,J_g);if(this._mipmaps.push(J_h),J_f+=J_g,1==J_d&&1==J_e)break;(J_d/=2)<1&&(J_d=1),(J_e/=2)<1&&(J_e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){J_f.simLodInfo=new Float32Array(40);for(var J_g=0;J_g<J_f.simLodInfo.length;)J_f.simLodInfo[J_g]=(J_v.simLodRect[J_g]+.5)/1024,J_g++,J_f.simLodInfo[J_g]=(J_v.simLodRect[J_g]+.5)/256,J_g++,J_f.simLodInfo[J_g]=Math.max(J_v.simLodRect[J_g]-1,.1)/1024,J_g++,J_f.simLodInfo[J_g]=Math.max(J_v.simLodRect[J_g]-1.5,.1)/256,J_g++}return J_f}if("number"==typeof J_b)return J_x.loader.create(J_a,null,null,J_v,[function(J_a){return this._width=J_b,this._height=J_c,this._buffer=J_a,null}]);if("function"==typeof J_b)return J_x.loader.create(J_a,null,null,J_v,[J_b]);throw new Error("unknown params.")},J_v.lodasatlas=!1,J_l(J_v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),J_v}(),J_Qb=function(J_a){function J_b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,J_b.__super.call(this)}J_n(J_b,"laya.d3.resource.models.PrimitiveMesh",J_Gb);var J_c=J_b.prototype;return J_x.imps(J_c,{"laya.d3.core.render.IRenderable":!0}),J_c._getVertexBuffer=function(J_a){return void 0===J_a&&(J_a=0),0===J_a?this._vertexBuffer:null},J_c._getVertexBuffers=function(){return null},J_c._getIndexBuffer=function(){return this._indexBuffer},J_c._getPositions=function(){var J_a,J_b=[],J_c=this._vertexBuffer.vertexDeclaration.getVertexElements(),J_d=0;for(J_d=0;J_d<J_c.length;J_d++){var J_e=J_c[J_d];if("vector3"===J_e.elementFormat&&0===J_e.elementUsage){J_a=J_e;break}}var J_f=this._vertexBuffer.getData();for(J_d=0;J_d<J_f.length;J_d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var J_g=J_d+J_a.offset/4,J_h=new J_gb(J_f[J_g+0],J_f[J_g+1],J_f[J_g+2]);J_b.push(J_h)}return J_b},J_c.getRenderElement=function(J_a){return this},J_c.getRenderElementsCount=function(){return 1},J_c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},J_c._beforeRender=function(J_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J_c._render=function(J_a){J_F.mainContext.drawElements(4,this._numberIndices,5123,0),J_A.drawCall++,J_A.trianglesFaces+=this._numberIndices/3},J_o(0,J_c,"_vertexBufferCount",function(){return 1}),J_o(0,J_c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J_b}(),J_Rb=function(J_a){function J_b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,J_b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}J_n(J_b,"laya.d3.resource.models.Mesh",J_Gb);var J_c=J_b.prototype;return J_c._getPositions=function(){var J_a,J_b,J_c,J_d,J_e,J_f=[],J_g=0,J_h=0,J_i=0;if(0!==this._vertexBuffers.length){var J_j=this._vertexBuffers.length;for(J_g=0;J_g<J_j;J_g++){for(J_c=(J_a=this._vertexBuffers[J_g]).vertexDeclaration.getVertexElements(),J_h=0;J_h<J_c.length;J_h++)if("vector3"===(J_d=J_c[J_h]).elementFormat&&0===J_d.elementUsage){J_b=J_d;break}for(J_e=J_a.getData(),J_h=0;J_h<J_e.length;J_h+=J_a.vertexDeclaration.vertexStride/4)J_i=J_h+J_b.offset/4,J_f.push(new J_gb(J_e[J_i+0],J_e[J_i+1],J_e[J_i+2]))}}else{var J_k=this._subMeshes.length;for(J_g=0;J_g<J_k;J_g++){for(J_c=(J_a=this._subMeshes[J_g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),J_h=0;J_h<J_c.length;J_h++)if("vector3"===(J_d=J_c[J_h]).elementFormat&&0===J_d.elementUsage){J_b=J_d;break}for(J_e=J_a.getData(),J_h=0;J_h<J_e.length;J_h+=J_a.vertexDeclaration.vertexStride/4)J_i=J_h+J_b.offset/4,J_f.push(new J_gb(J_e[J_i+0],J_e[J_i+1],J_e[J_i+2]))}}return J_f},J_c._setSubMeshes=function(J_a){this._subMeshes=J_a,this._subMeshCount=J_a.length;for(var J_b=0;J_b<this._subMeshCount;J_b++)J_a[J_b]._indexInMesh=J_b;this._positions=this._getPositions(),this._generateBoundingObject()},J_c.onAsynLoaded=function(J_a,J_b,J_c){var J_d=J_b[0],J_e=J_b[1];J_Ya.read(J_d,this,this._materials,this._subMeshes,J_e),this.completeCreate(),this._endLoaded()},J_c.getSubMesh=function(J_a){return this._subMeshes[J_a]},J_c.getSubMeshCount=function(){return this._subMeshes.length},J_c.getRenderElementsCount=function(){return this._subMeshes.length},J_c.getRenderElement=function(J_a){return this._subMeshes[J_a]},J_c.disposeResource=function(){for(var J_a=0;J_a<this._subMeshes.length;J_a++)this._subMeshes[J_a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},J_o(0,J_c,"materials",function(){return this._materials.slice()}),J_o(0,J_c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),J_b.load=function(J_a){return J_x.loader.create(J_a,null,null,J_b)},J_b}(),J_Sb=(function(J_a){function J_j(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===J_c&&(J_c=6408),void 0===J_d&&(J_d=5121),void 0===J_e&&(J_e=33189),void 0===J_f&&(J_f=!1),void 0===J_g&&(J_g=!1),void 0===J_h&&(J_h=-1),void 0===J_i&&(J_i=-1),J_j.__super.call(this),this._type=3553,this._width=J_a,this._height=J_b,this._size=new J_pb(J_a,J_b),this._surfaceFormat=J_c,this._surfaceType=J_d,this._depthStencilFormat=J_e,J_p.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=J_f,this._repeat=J_g,this._minFifter=J_h,this._magFifter=J_i,this.activeResource(),this._alreadyResolved=!0}J_n(J_j,"laya.d3.resource.RenderTexture",J_Fb);var J_b=J_j.prototype;J_b.recreateResource=function(){var J_a=J_F.mainContext;this._frameBuffer=J_a.createFramebuffer(),this._source=J_a.createTexture();var J_b=J_G.curBindTexTarget,J_c=J_G.curBindTexValue;J_G.bindTexture(J_a,this._type,this._source),J_a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var J_d=this._minFifter,J_e=this._magFifter,J_f=this._repeat?10497:33071;if(J_w.isPOT(this._width,this._height)?(this._mipmap?-1!==J_d||(J_d=9987):-1!==J_d||(J_d=9729),-1!==J_e||(J_e=9729),J_a.texParameteri(this._type,10241,J_d),J_a.texParameteri(this._type,10240,J_e),J_a.texParameteri(this._type,10242,J_f),J_a.texParameteri(this._type,10243,J_f),this._mipmap&&J_a.generateMipmap(this._type)):(-1!==J_d||(J_d=9729),-1!==J_e||(J_e=9729),J_a.texParameteri(this._type,10241,J_d),J_a.texParameteri(this._type,10240,J_e),J_a.texParameteri(this._type,10242,33071),J_a.texParameteri(this._type,10243,33071)),J_b&&J_c&&J_G.bindTexture(J_a,J_b,J_c),J_a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=J_a.createRenderbuffer(),J_a.bindRenderbuffer(36161,this._depthStencilBuffer),J_a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),J_a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:J_a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:J_a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:J_a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}J_a.framebufferTexture2D(36160,36064,3553,this._source,0),J_a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},J_b.start=function(){J_F.mainContext.bindFramebuffer(36160,this.frameBuffer),(J_j._currentRenderTarget=this)._alreadyResolved=!1},J_b.end=function(){J_F.mainContext.bindFramebuffer(36160,null),J_j._currentRenderTarget=null,this._alreadyResolved=!0},J_b.getData=function(J_a,J_b,J_c,J_d){var J_e=J_F.mainContext;if(J_e.bindFramebuffer(36160,this._frameBuffer),!(36053===J_e.checkFramebufferStatus(36160)))return J_e.bindFramebuffer(36160,null),null;var J_f=new Uint8Array(this._width*this._height*4);return J_e.readPixels(J_a,J_b,J_c,J_d,this._surfaceFormat,this._surfaceType,J_f),J_e.bindFramebuffer(36160,null),J_f},J_b.disposeResource=function(){if(this._frameBuffer){var J_a=J_F.mainContext;J_a.deleteTexture(this._source),J_a.deleteFramebuffer(this._frameBuffer),J_a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},J_o(0,J_b,"surfaceFormat",function(){return this._surfaceFormat}),J_o(0,J_b,"surfaceType",function(){return this._surfaceType}),J_o(0,J_b,"depthStencilFormat",function(){return this._depthStencilFormat}),J_o(0,J_b,"source",function(){return this._alreadyResolved?J_x.superGet(J_Fb,this,"source"):null}),J_o(0,J_b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),J_o(0,J_b,"frameBuffer",function(){return this._frameBuffer}),J_j._currentRenderTarget=null}(),function(J_a){function J_b(J_a){this._color=null,this._pixels=null,J_b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new J_pb(this.width,this.height),this._color=J_a,this._pixels=new Uint8Array([255*J_a.x,255*J_a.y,255*J_a.z,255*J_a.w]),this.uri="SolidColorTexture2D_"+this.id}J_n(J_b,"laya.d3.resource.SolidColorTexture2D",J_Fb);var J_c=J_b.prototype;return J_c._createWebGlTexture=function(){var J_a=J_F.mainContext,J_b=this._source=J_a.createTexture(),J_c=this._width,J_d=this._height,J_e=J_G.curBindTexTarget,J_f=J_G.curBindTexValue;J_G.bindTexture(J_a,this._type,J_b),J_a.texImage2D(this._type,0,6408,J_c,J_d,0,6408,5121,this._pixels);var J_g=this._minFifter,J_h=this._magFifter,J_i=this._repeat?10497:33071,J_j=J_w.isPOT(J_c,J_d);J_j?(this._mipmap?-1!==J_g||(J_g=9987):-1!==J_g||(J_g=9729),-1!==J_h||(J_h=9729),J_a.texParameteri(this._type,10241,J_g),J_a.texParameteri(this._type,10240,J_h),J_a.texParameteri(this._type,10242,J_i),J_a.texParameteri(this._type,10243,J_i),this._mipmap&&J_a.generateMipmap(this._type)):(-1!==J_g||(J_g=9729),-1!==J_h||(J_h=9729),J_a.texParameteri(this._type,10241,J_g),J_a.texParameteri(this._type,10240,J_h),J_a.texParameteri(this._type,10242,33071),J_a.texParameteri(this._type,10243,33071)),J_e&&J_f&&J_G.bindTexture(J_a,J_e,J_f),this.memorySize=J_j?J_c*J_d*4*(1+1/3):J_c*J_d*4},J_c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},J_c.disposeResource=function(){this._source&&(J_F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J_l(J_b,["magentaTexture",function(){var J_a=new J_b(new J_hb(1,0,1,1));return J_a.lock=!0,this.magentaTexture=J_a},"grayTexture",function(){var J_a=new J_b(new J_hb(.5,.5,.5,1));return J_a.lock=!0,this.grayTexture=J_a}]),J_b}()),J_Tb=function(J_a){function J_e(J_a,J_b,J_c,J_d){this._canRead=!1,this._image=null,this._pixels=null,void 0===J_a&&(J_a=!1),void 0===J_b&&(J_b=!0),void 0===J_c&&(J_c=6408),void 0===J_d&&(J_d=!0),J_e.__super.call(this),this._type=3553,this._repeat=J_b,this._canRead=J_a,this._format=J_c,this._mipmap=J_d}J_n(J_e,"laya.d3.resource.Texture2D",J_Fb);var J_b=J_e.prototype;return J_b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var J_a=J_F.mainContext,J_b=this._source=J_a.createTexture(),J_c=this._width,J_d=this._height,J_e=J_G.curBindTexTarget,J_f=J_G.curBindTexValue;switch(J_G.bindTexture(J_a,this._type,J_b),this._format){case 6407:case 6408:this._canRead?J_a.texImage2D(this._type,0,this._format,J_c,J_d,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?J_a.texImage2D(this._type,0,this._image._format,J_c,J_d,0,this._image._format,5121,this._image.atlasSource):J_a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case J_F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:J_a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var J_g=this._minFifter,J_h=this._magFifter,J_i=this._repeat?10497:33071,J_j=0==this._wrapModeU?10497:33071,J_k=0==this._wrapModeV?10497:33071,J_l=J_w.isPOT(J_c,J_d);J_l?(this._mipmap?-1!==J_g||(J_g=9987):-1!==J_g||(J_g=9729),-1!==J_h||(J_h=9729),J_a.texParameteri(this._type,10241,J_g),J_a.texParameteri(this._type,10240,J_h),J_a.texParameteri(this._type,10242,J_i),J_a.texParameteri(this._type,10243,J_i),J_a.texParameteri(this._type,10242,J_j),J_a.texParameteri(this._type,10243,J_k),this._mipmap&&J_a.generateMipmap(this._type)):(-1!==J_g||(J_g=9729),-1!==J_h||(J_h=9729),J_a.texParameteri(this._type,10241,J_g),J_a.texParameteri(this._type,10240,J_h),J_a.texParameteri(this._type,10242,33071),J_a.texParameteri(this._type,10243,33071)),J_e&&J_f&&J_G.bindTexture(J_a,J_e,J_f),this._image.onload=null,this._image=null,this.memorySize=J_l?J_c*J_d*4*(1+1/3):J_c*J_d*4},J_b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},J_b.onAsynLoaded=function(J_a,J_b,J_c){if(J_c){var J_d=J_c[0];void 0!==J_d&&(this._canRead=J_d);var J_e=J_c[1];void 0!==J_e&&(this._repeat=J_e);var J_f=J_c[2];void 0!==J_f&&(this._format=J_f);var J_g=J_c[3];void 0!==J_g&&(this._mipmap=J_g);var J_h=J_c.wrapModeU;void 0!==J_h&&(this._wrapModeU=J_h);var J_i=J_c.wrapModeV;void 0!==J_i&&(this._wrapModeV=J_i)}switch(this._format){case 6407:case 6408:var J_j=(this._image=J_b).width,J_k=J_b.height;this._width=J_j,this._height=J_k,this._size=new J_pb(J_j,J_k),this._canRead&&(J_p.isConchApp?J_b instanceof J_m.HTMLElement&&(this._pixels=new Uint8Array(J_b.getImageData(0,0,J_j,J_k))):(J_H.canvas.size(J_j,J_k),J_H.canvas.clear(),J_H.context.drawImage(J_b,0,0,J_j,J_k),this._pixels=new Uint8Array(J_H.context.getImageData(0,0,J_j,J_k).data.buffer)));break;case J_F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var J_l=new J_y(J_b);J_l.readUTFBytes(4),J_l.readUTFBytes(2),J_l.getInt16();J_l.endian="bigEndian",this._width=J_l.getInt16(),this._height=J_l.getInt16(),this._size=new J_pb(this._width,this._height);J_l.getInt16(),J_l.getInt16();this._image=new Uint8Array(J_b,J_l.pos)}this.recreateResource(),this._endLoaded()},J_b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},J_b.disposeResource=function(){this._source&&(J_F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},J_o(0,J_b,"_src",function(){return this.url}),J_o(0,J_b,"src",function(){return this.url}),J_e.load=function(J_a){return J_x.loader.create(J_a,null,null,J_e)},J_e}(),J_Ub=function(J_b){function J_c(J_a,J_b){J_c.__super.call(this),void 0===J_a&&(J_a=.3),void 0===J_b&&(J_b=1e3),this._tempVector3=new J_gb,this._position=new J_gb,this._up=new J_gb,this._forward=new J_gb,this._right=new J_gb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=J_pb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=J_a,this._farPlane=J_b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),J_x.stage.on("resize",this,this._onScreenSizeChanged)}J_n(J_c,"laya.d3.core.BaseCamera",J_b);var J_a=J_c.prototype;return J_a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var J_a=this.scene._cameraPool,J_b=J_a.length-1,J_c=0;J_c<J_b;J_c++)if(J_a[J_c].renderingOrder>J_a[J_b].renderingOrder){var J_d=J_a[J_c];J_a[J_c]=J_a[J_b],J_a[J_b]=J_d}},J_a._calculateProjectionMatrix=function(){},J_a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},J_a._prepareCameraToRender=function(){J_I._currentCameraCullingMask=this.cullingMask;var J_a=this._shaderValues;J_a.setValue(0,this.transform.position.elements),J_a.setValue(5,this.forward.elements),J_a.setValue(6,this.up.elements)},J_a._prepareCameraViewProject=function(J_a,J_b){var J_c=this._shaderValues;J_c.setValue(1,J_a.elements),J_c.setValue(2,J_b.elements)},J_a._renderCamera=function(J_a,J_b,J_c){},J_a.addLayer=function(J_a){29!==J_a.number&&30!=J_a.number&&(this.cullingMask=this.cullingMask|J_a.mask)},J_a.removeLayer=function(J_a){29!==J_a.number&&30!=J_a.number&&(this.cullingMask=this.cullingMask&~J_a.mask)},J_a.addAllLayers=function(){this.cullingMask=2147483647},J_a.removeAllLayers=function(){this.cullingMask=0|J_I.getLayerByNumber(29).mask|J_I.getLayerByNumber(30).mask},J_a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},J_a.moveForward=function(J_a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=J_a,this.transform.translate(this._tempVector3)},J_a.moveRight=function(J_a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=J_a,this.transform.translate(this._tempVector3)},J_a.moveVertical=function(J_a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=J_a,this.transform.translate(this._tempVector3,!1)},J_a._addSelfRenderObjects=function(){var J_a=this.scene._cameraPool,J_b=J_a.length;if(0<J_b){for(var J_c=J_b-1;0<=J_c;J_c--)if(this.renderingOrder<=J_a[J_c].renderingOrder){J_a.splice(J_c+1,0,this);break}}else J_a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},J_a._clearSelfRenderObjects=function(){var J_a=this.scene._cameraPool;J_a.splice(J_a.indexOf(this),1)},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,J_x.stage.off("resize",this,this._onScreenSizeChanged),J_b.prototype.destroy.call(this,J_a)},J_o(0,J_a,"sky",function(){return this._sky},function(J_a){(this._sky=J_a)._ownerCamera=this}),J_o(0,J_a,"forward",function(){var J_a=this.transform.worldMatrix.elements,J_b=this._forward.elements;return J_b[0]=-J_a[8],J_b[1]=-J_a[9],J_b[2]=-J_a[10],this._forward}),J_o(0,J_a,"position",function(){var J_a=this.transform.worldMatrix.elements,J_b=this._position.elements;return J_b[0]=J_a[12],J_b[1]=J_a[13],J_b[2]=J_a[14],this._position}),J_o(0,J_a,"renderTarget",function(){return this._renderTarget},function(J_a){null!=(this._renderTarget=J_a)&&(this._renderTargetSize=J_a.size)}),J_o(0,J_a,"up",function(){var J_a=this.transform.worldMatrix.elements,J_b=this._up.elements;return J_b[0]=J_a[4],J_b[1]=J_a[5],J_b[2]=J_a[6],this._up}),J_o(0,J_a,"right",function(){var J_a=this.transform.worldMatrix.elements,J_b=this._right.elements;return J_b[0]=J_a[0],J_b[1]=J_a[1],J_b[2]=J_a[2],this._right}),J_o(0,J_a,"renderTargetSize",function(){return this._renderTargetSize},function(J_a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"fieldOfView",function(){return this._fieldOfView},function(J_a){this._fieldOfView=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"nearPlane",function(){return this._nearPlane},function(J_a){this._nearPlane=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"farPlane",function(){return this._farPlane},function(J_a){this._farPlane=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"orthographic",function(){return this._orthographic},function(J_a){this._orthographic=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(J_a){this._orthographicVerticalSize=J_a,this._calculateProjectionMatrix()}),J_o(0,J_a,"renderingOrder",function(){return this._renderingOrder},function(J_a){this._renderingOrder=J_a,this._sortCamerasByRenderingOrder()}),J_c.CAMERAPOS=0,J_c.VIEWMATRIX=1,J_c.PROJECTMATRIX=2,J_c.VPMATRIX=3,J_c.VPMATRIX_NO_TRANSLATE=4,J_c.CAMERADIRECTION=5,J_c.CAMERAUP=6,J_c.ENVIRONMENTDIFFUSE=7,J_c.ENVIRONMENTSPECULAR=8,J_c.SIMLODINFO=9,J_c.DIFFUSEIRRADMATR=10,J_c.DIFFUSEIRRADMATG=11,J_c.DIFFUSEIRRADMATB=12,J_c.HDREXPOSURE=13,J_c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",J_c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",J_c.CLEARFLAG_SOLIDCOLOR=0,J_c.CLEARFLAG_SKY=1,J_c.CLEARFLAG_DEPTHONLY=2,J_c.CLEARFLAG_NONE=3,J_l(J_c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new J_ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new J_ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new J_ab}]),J_c}(J_Kb),J_Vb=function(J_c){function J_b(J_a){this._render=null,this._geometryFilter=null,J_b.__super.call(this,J_a)}J_n(J_b,"laya.d3.core.RenderableSprite3D",J_c);var J_a=J_b.prototype;return J_a._addToInitStaticBatchManager=function(){},J_a._setBelongScene=function(J_a){J_c.prototype._setBelongScene.call(this,J_a),J_a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},J_a._setUnBelongScene=function(){var J_a=this._scene._renderableSprite3Ds,J_b=J_a.indexOf(this);J_a.splice(J_b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),J_c.prototype._setUnBelongScene.call(this)},J_a._update=function(J_a){(J_a.owner=this)._activeInHierarchy&&(this._updateComponents(J_a),this._render._updateOctreeNode(),this._lateUpdateComponents(J_a),J_A.spriteCount++,this._childs.length&&this._updateChilds(J_a))},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_c.prototype.destroy.call(this,J_a),this._render._destroy(),this._render=null},J_b.__init__=function(){J_b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=J_b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),J_b.SAHDERDEFINE_LIGHTMAP=J_b.shaderDefines.registerDefine("LIGHTMAP")},J_b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,J_b.SAHDERDEFINE_LIGHTMAP=4,J_b.LIGHTMAPSCALEOFFSET=2,J_b.LIGHTMAP=3,J_l(J_b,["shaderDefines",function(){return this.shaderDefines=new J_kb}]),J_b}(J_Kb),J_Wb=(function(J_a){function J_d(J_a,J_b,J_c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===J_a&&(J_a=1),void 0===J_b&&(J_b=1),void 0===J_c&&(J_c=1),J_d.__super.call(this),this._long=J_a,this._width=J_b,this._height=J_c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}J_n(J_d,"laya.d3.resource.models.BoxMesh",J_Qb);var J_b=J_d.prototype;J_b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var J_a=J_Fa.vertexDeclaration,J_b=(J_a.vertexStride,this._long/2),J_c=this._height/2,J_d=this._width/2,J_e=new Float32Array([-J_b,J_c,-J_d,0,1,0,0,0,J_b,J_c,-J_d,0,1,0,1,0,J_b,J_c,J_d,0,1,0,1,1,-J_b,J_c,J_d,0,1,0,0,1,-J_b,-J_c,-J_d,0,-1,0,0,1,J_b,-J_c,-J_d,0,-1,0,1,1,J_b,-J_c,J_d,0,-1,0,1,0,-J_b,-J_c,J_d,0,-1,0,0,0,-J_b,J_c,-J_d,-1,0,0,0,0,-J_b,J_c,J_d,-1,0,0,1,0,-J_b,-J_c,J_d,-1,0,0,1,1,-J_b,-J_c,-J_d,-1,0,0,0,1,J_b,J_c,-J_d,1,0,0,1,0,J_b,J_c,J_d,1,0,0,0,0,J_b,-J_c,J_d,1,0,0,0,1,J_b,-J_c,-J_d,1,0,0,1,1,-J_b,J_c,J_d,0,0,1,0,0,J_b,J_c,J_d,0,0,1,1,0,J_b,-J_c,J_d,0,0,1,1,1,-J_b,-J_c,J_d,0,0,1,0,1,-J_b,J_c,-J_d,0,0,-1,1,0,J_b,J_c,-J_d,0,0,-1,0,0,J_b,-J_c,-J_d,0,0,-1,0,1,-J_b,-J_c,-J_d,0,0,-1,1,1]),J_f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new J_Ob(J_a,this._numberVertices,35044,!0),this._indexBuffer=new J_Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(J_e),this._indexBuffer.setData(J_f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},J_o(0,J_b,"long",function(){return this._long},function(J_a){this._long!==J_a&&(this._long=J_a,this.releaseResource(),this.activeResource())}),J_o(0,J_b,"width",function(){return this._width},function(J_a){this._width!==J_a&&(this._width=J_a,this.releaseResource(),this.activeResource())}),J_o(0,J_b,"height",function(){return this._height},function(J_a){this._height!==J_a&&(this._height=J_a,this.releaseResource(),this.activeResource())})}(),function(J_a){function J_g(J_a,J_b,J_c){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=.3),void 0===J_c&&(J_c=1e3),this._viewMatrix=new J_ab,this._projectionMatrix=new J_ab,this._projectionViewMatrix=new J_ab,this._viewport=new J_ib(0,0,0,0),this._normalizedViewport=new J_ib(0,0,1,1),this._aspectRatio=J_a,this._boundFrustumUpdate=!0,this._boundFrustum=new J_$a(J_ab.DEFAULT),J_g.__super.call(this,J_b,J_c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}J_n(J_g,"laya.d3.core.Camera",J_Ub);var J_b=J_g.prototype;return J_b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},J_b._parseCustomProps=function(J_a,J_b,J_c,J_d){var J_e=J_c.clearColor;this.clearColor=new J_hb(J_e[0],J_e[1],J_e[2],J_e[3]);var J_f=J_c.viewport;this.normalizedViewport=new J_ib(J_f[0],J_f[1],J_f[2],J_f[3])},J_b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var J_a=this.orthographicVerticalSize*this.aspectRatio*.5,J_b=.5*this.orthographicVerticalSize;J_ab.createOrthoOffCenterRH(-J_a,J_a,-J_b,J_b,this.nearPlane,this.farPlane,this._projectionMatrix)}else J_ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},J_b._update=function(J_a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,J_a)},J_b._renderCamera=function(J_a,J_b,J_c){var J_d,J_e;J_c.parallelSplitShadowMaps[0]&&J_c._renderShadowMap(J_a,J_b,this),(J_b.camera=this)._prepareCameraToRender(),J_c._preRenderUpdateComponents(J_b),J_d=J_b._viewMatrix=this.viewMatrix;var J_f=this._renderTarget;J_f?(J_f.start(),J_ab.multiply(J_Ub._invertYScaleMatrix,this._projectionMatrix,J_Ub._invertYProjectionMatrix),J_ab.multiply(J_Ub._invertYScaleMatrix,this.projectionViewMatrix,J_Ub._invertYProjectionViewMatrix),J_e=J_b._projectionMatrix=J_Ub._invertYProjectionMatrix,J_b._projectionViewMatrix=J_Ub._invertYProjectionViewMatrix):(J_e=J_b._projectionMatrix=this._projectionMatrix,J_b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(J_d,J_e),J_b._viewport=this.viewport,J_c._preRenderScene(J_a,J_b,this.boundFrustum),J_c._clear(J_a,J_b),J_c._renderScene(J_a,J_b),J_c._postRenderUpdateComponents(J_b),J_f&&J_f.end()},J_b.viewportPointToRay=function(J_a,J_b){J_ob.calculateCursorRay(J_a,this.viewport,this._projectionMatrix,this.viewMatrix,null,J_b)},J_b.normalizedViewportPointToRay=function(J_a,J_b){var J_c=J_g._tempVector20,J_d=this.viewport,J_e=J_a.elements,J_f=J_c.elements;J_f[0]=J_e[0]*J_d.width,J_f[1]=J_e[1]*J_d.height,J_ob.calculateCursorRay(J_c,this.viewport,this._projectionMatrix,this.viewMatrix,null,J_b)},J_b.worldToViewportPoint=function(J_a,J_b){J_ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(J_a,this._projectionViewMatrix,J_b);var J_c=J_b.elements;J_c[0]=J_c[0]/J_x.stage.clientScaleX,J_c[1]=J_c[1]/J_x.stage.clientScaleY},J_b.worldToNormalizedViewportPoint=function(J_a,J_b){J_ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(J_a,this._projectionViewMatrix,J_b);var J_c=J_b.elements;J_c[0]=J_c[0]/J_x.stage.clientScaleX,J_c[1]=J_c[1]/J_x.stage.clientScaleY},J_b.convertScreenCoordToOrthographicCoord=function(J_a,J_b){if(this._orthographic){var J_c=J_Y.clientWidth,J_d=J_Y.clientHeight,J_e=this.orthographicVerticalSize*this.aspectRatio/J_c,J_f=this.orthographicVerticalSize/J_d,J_g=J_a.elements,J_h=J_b.elements;return J_h[0]=(-J_c/2+J_g[0])*J_e,J_h[1]=(J_d/2-J_g[1])*J_f,J_h[2]=(this.nearPlane-this.farPlane)*(J_g[2]+1)/2-this.nearPlane,J_gb.transformCoordinate(J_b,this.transform.worldMatrix,J_b),!0}return!1},J_o(0,J_b,"projectionViewMatrix",function(){return J_ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),J_o(0,J_b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var J_a=this.viewport;return J_a.width/J_a.height},function(J_a){if(J_a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=J_a,this._calculateProjectionMatrix()}),J_o(0,J_b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),J_o(0,J_b,"needViewport",function(){var J_a=this.normalizedViewport;return 0===J_a.x&&0===J_a.y&&1===J_a.width&&1===J_a.height}),J_o(0,J_b,"viewport",function(){if(this._viewportExpressedInClipSpace){var J_a=this._normalizedViewport,J_b=this.renderTargetSize,J_c=J_b.width,J_d=J_b.height;this._viewport.x=J_a.x*J_c,this._viewport.y=J_a.y*J_d,this._viewport.width=J_a.width*J_c,this._viewport.height=J_a.height*J_d}return this._viewport},function(J_a){if(null!=this.renderTarget&&(J_a.x<0||J_a.y<0||0==J_a.width||0==J_a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=J_a,this._calculateProjectionMatrix()}),J_o(0,J_b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var J_a=this._viewport,J_b=this.renderTargetSize,J_c=J_b.width,J_d=J_b.height;this._normalizedViewport.x=J_a.x/J_c,this._normalizedViewport.y=J_a.y/J_d,this._normalizedViewport.width=J_a.width/J_c,this._normalizedViewport.height=J_a.height/J_d}return this._normalizedViewport},function(J_a){J_a.x<0&&(J_a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),J_a.y<0&&(J_a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<J_a.x+J_a.width&&(J_a.width=1-J_a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<J_a.y+J_a.height&&(J_a.height=1-J_a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=J_a,this._calculateProjectionMatrix()}),J_o(0,J_b,"projectionMatrix",function(){return this._projectionMatrix},function(J_a){this._projectionMatrix=J_a,this._useUserProjectionMatrix=!0}),J_o(0,J_b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),J_l(J_g,["_tempVector20",function(){return this._tempVector20=new J_fb}]),J_g}()),J_Xb=function(J_c){function J_d(J_a,J_b){J_d.__super.call(this,J_b),this._geometryFilter=new J_Hb(this),this._render=new J_Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),J_a&&(this._geometryFilter.sharedMesh=J_a)instanceof laya.d3.resource.models.Mesh&&(J_a.loaded?this._render.sharedMaterials=J_a.materials:J_a.once("loaded",this,this._applyMeshMaterials))}J_n(J_d,"laya.d3.core.MeshSprite3D",J_c);var J_a=J_d.prototype;return J_a._changeRenderObjectByMesh=function(J_a){var J_b=this._render._renderElements,J_c=J_b[J_a];J_c||(J_c=J_b[J_a]=new J_zb),J_c._render=this._render;var J_d=this._render.sharedMaterials[J_a];J_d||(J_d=J_Mb.defaultMaterial);var J_e=this._geometryFilter.sharedMesh.getRenderElement(J_a);return J_c._mainSortID=this._getSortID(J_e,J_d),J_c._sprite3D=this,J_c.renderObj=J_e,J_c._material=J_d,J_c},J_a._changeRenderObjectByMaterial=function(J_a,J_b){var J_c=this._render._renderElements[J_a];J_b||(J_b=J_Mb.defaultMaterial);var J_d=this._geometryFilter.sharedMesh.getRenderElement(J_a);return J_c._mainSortID=this._getSortID(J_d,J_b),J_c._sprite3D=this,J_c.renderObj=J_d,J_c._material=J_b,J_c},J_a._changeRenderObjectsByMesh=function(){var J_a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=J_a;for(var J_b=0;J_b<J_a;J_b++)this._changeRenderObjectByMesh(J_b)},J_a._onMeshChanged=function(J_a){var J_b=J_a.sharedMesh;J_b.loaded?this._changeRenderObjectsByMesh():J_b.once("loaded",this,this._onMeshLoaded)},J_a._onMeshLoaded=function(J_a){J_a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},J_a._onMaterialChanged=function(J_a,J_b,J_c){J_b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(J_b,J_c)},J_a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},J_a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},J_a._parseCustomProps=function(J_a,J_b,J_c,J_d){var J_e=this.meshRender,J_f=J_c.lightmapIndex;null!=J_f&&(J_e.lightmapIndex=J_f);var J_g,J_h,J_i=J_c.lightmapScaleOffset;if(J_i&&(J_e.lightmapScaleOffset=new J_hb(J_i[0],J_i[1],J_i[2],J_i[3])),J_d.instanceParams)(J_g=J_d.instanceParams.loadPath)&&(J_h=J_r.getRes(J_b[J_g]),(this.meshFilter.sharedMesh=J_h).loaded?J_e.sharedMaterials=J_h.materials:J_h.once("loaded",this,this._applyMeshMaterials));else{(J_g=J_c.meshPath)&&(J_h=J_r.getRes(J_b[J_g]),this.meshFilter.sharedMesh=J_h);var J_j=J_c.materials;if(J_j){var J_k=J_e.sharedMaterials,J_l=J_j.length;J_k.length=J_l;for(var J_m=0;J_m<J_l;J_m++)J_k[J_m]=J_r.getRes(J_b[J_j[J_m].path]);J_e.sharedMaterials=J_k}}},J_a._applyMeshMaterials=function(J_a){for(var J_b=this._render.sharedMaterials,J_c=J_a.materials,J_d=0,J_e=J_c.length;J_d<J_e;J_d++)J_b[J_d]||(J_b[J_d]=J_c[J_d]);this._render.sharedMaterials=J_b},J_a._addToInitStaticBatchManager=function(){J_d._staticBatchManager._addInitBatchSprite(this)},J_a.cloneTo=function(J_a){var J_b=J_a;J_b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var J_c=this._render,J_d=J_b._render;J_d.enable=J_c.enable,J_d.sharedMaterials=J_c.sharedMaterials,J_d.castShadow=J_c.castShadow;var J_e=J_c.lightmapScaleOffset;J_e&&(J_d.lightmapScaleOffset=J_e.clone()),J_d.lightmapIndex=J_c.lightmapIndex,J_d.receiveShadow=J_c.receiveShadow,J_d.sortingFudge=J_c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,J_a)},J_a.destroy=function(J_a){if(void 0===J_a&&(J_a=!0),!this.destroyed){var J_b=this.meshFilter.sharedMesh;null!=J_b&&(J_b.loaded||J_b.off("loaded",this,this._applyMeshMaterials)),J_c.prototype.destroy.call(this,J_a),this._geometryFilter._destroy()}},J_o(0,J_a,"meshFilter",function(){return this._geometryFilter}),J_o(0,J_a,"meshRender",function(){return this._render}),J_d.__init__=function(){J_da._staticBatchManagers.push(J_d._staticBatchManager)},J_d.load=function(J_a){return J_x.loader.create(J_a,null,null,J_d)},J_l(J_d,["_staticBatchManager",function(){return this._staticBatchManager=new J_Bb}]),J_d}(J_Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}}),function(J_a,J_b,J_ea){J_ea.un,J_ea.uns;var J_c=J_ea.static,J_d=J_ea.class,J_f=J_ea.getset,J_p=J_ea.__newvec,J_h=laya.maths.Bezier,J_l=laya.utils.Browser,J_Fa=laya.utils.Byte,J_e=(laya.events.Event,laya.events.EventDispatcher),J_g=laya.display.Graphics,J_i=(laya.resource.HTMLCanvas,laya.utils.Handler),J_j=laya.net.Loader,J_m=laya.maths.MathUtil,J_Ga=laya.maths.Matrix,J_q=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),J_k=(laya.renders.RenderContext,laya.resource.Resource),J_n=laya.utils.RunDriver,J_fa=laya.display.Sprite,J_o=laya.utils.Stat,J_Ha=laya.resource.Texture,J_r=(laya.net.URL,laya.utils.Utils),J_G=function(){function J_a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return J_d(J_a,"laya.ani.AnimationContent"),J_a}(),J_H=function(){function J_a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return J_d(J_a,"laya.ani.AnimationNodeContent"),J_a}(),J_v=function(){function J_a(){}return J_d(J_a,"laya.ani.AnimationParser01"),J_a.parse=function(J_a,J_b){var J_c=J_b.__getBuffer(),J_d=0,J_e=0,J_f=0,J_g=0,J_h=0,J_i=0,J_j=0,J_k=J_b.readUTFString();J_a._aniClassName=J_k;var J_l,J_m=J_b.readUTFString().split("\n"),J_n=J_b.getUint8(),J_o=J_b.getUint32(),J_p=J_b.getUint32();0<J_o&&(J_l=J_c.slice(J_o,J_p));var J_q=new J_Fa(J_l);for(0<J_p&&(J_a._publicExtData=J_c.slice(J_p,J_c.byteLength)),J_a._useParent=!!J_b.getUint8(),J_a._anis.length=J_n,J_d=0;J_d<J_n;J_d++){var J_r=J_a._anis[J_d]=new J_G;J_r.nodes=new Array;var J_u=J_r.name=J_m[J_b.getUint16()];J_a._aniMap[J_u]=J_d,J_r.bone3DMap={},J_r.playTime=J_b.getFloat32(),J_r.playTime<=0&&console.error("播放时间不能为0  url="+J_a.url+" name="+J_r.name);var J_v=J_r.nodes.length=J_b.getUint8();for(J_e=J_r.totalKeyframeDatasLength=0;J_e<J_v;J_e++){var J_w=J_r.nodes[J_e]=new J_H;J_w.childs=[];var J_x=J_b.getInt16();0<=J_x&&(J_w.name=J_m[J_x],J_r.bone3DMap[J_w.name]=J_e),J_w.keyFrame=new Array,J_w.parentIndex=J_b.getInt16(),-1==J_w.parentIndex?J_w.parent=null:J_w.parent=J_r.nodes[J_w.parentIndex],J_w.lerpType=J_b.getUint8();var J_y=J_b.getUint32();J_q.pos=J_y;var J_z=J_w.keyframeWidth=J_q.getUint16();if(J_r.totalKeyframeDatasLength+=J_z,0===J_w.lerpType||1===J_w.lerpType)for(J_w.interpolationMethod=[],J_w.interpolationMethod.length=J_z,J_f=0;J_f<J_z;J_f++)J_w.interpolationMethod[J_f]=J_K.interpolation[J_q.getUint8()];null!=J_w.parent&&J_w.parent.childs.push(J_w);var J_A=J_b.getUint16();0<J_A&&(J_w.extenData=J_c.slice(J_b.pos,J_b.pos+J_A),J_b.pos+=J_A);var J_B,J_C=J_b.getUint16(),J_D=0;for(J_f=0,J_g=J_w.keyFrame.length=J_C;J_f<J_g;J_f++){if((J_B=J_w.keyFrame[J_f]=new J_I).duration=J_b.getFloat32(),J_B.startTime=J_D,2===J_w.lerpType){J_B.interpolationData=[];var J_E,J_F=J_b.getUint8();switch(J_E=J_b.getFloat32()){case 254:for(J_B.interpolationData.length=J_z,J_j=0;J_j<J_z;J_j++)J_B.interpolationData[J_j]=0;break;case 255:for(J_B.interpolationData.length=J_z,J_j=0;J_j<J_z;J_j++)J_B.interpolationData[J_j]=5;break;default:for(J_B.interpolationData.push(J_E),J_i=1;J_i<J_F;J_i++)J_B.interpolationData.push(J_b.getFloat32())}}for(J_B.data=new Float32Array(J_z),J_h=0;J_h<J_z;J_h++)J_B.data[J_h]=J_b.getFloat32(),-1e-8<J_B.data[J_h]&&J_B.data[J_h]<1e-8&&(J_B.data[J_h]=0);J_D+=J_B.duration}J_B.startTime=J_r.playTime,J_w.playTime=J_r.playTime,J_a._calculateKeyFrame(J_w,J_C,J_z)}}},J_a}(),J_w=function(){function J_x(){}return J_d(J_x,"laya.ani.AnimationParser02"),J_x.READ_DATA=function(){J_x._DATA.offset=J_x._reader.getUint32(),J_x._DATA.size=J_x._reader.getUint32()},J_x.READ_BLOCK=function(){for(var J_a=J_x._BLOCK.count=J_x._reader.getUint16(),J_b=J_x._BLOCK.blockStarts=[],J_c=J_x._BLOCK.blockLengths=[],J_d=0;J_d<J_a;J_d++)J_b.push(J_x._reader.getUint32()),J_c.push(J_x._reader.getUint32())},J_x.READ_STRINGS=function(){var J_a=J_x._reader.getUint32(),J_b=J_x._reader.getUint16(),J_c=J_x._reader.pos;J_x._reader.pos=J_a+J_x._DATA.offset;for(var J_d=0;J_d<J_b;J_d++)J_x._strings[J_d]=J_x._reader.readUTFString();J_x._reader.pos=J_c},J_x.parse=function(J_a,J_b){J_x._templet=J_a;(J_x._reader=J_b).__getBuffer();J_x.READ_DATA(),J_x.READ_BLOCK(),J_x.READ_STRINGS();for(var J_c=0,J_d=J_x._BLOCK.count;J_c<J_d;J_c++){var J_e=J_b.getUint16(),J_f=J_x._strings[J_e],J_g=J_x["READ_"+J_f];if(null==J_g)throw new Error("model file err,no this function:"+J_e+" "+J_f);J_g.call()}},J_x.READ_ANIMATIONS=function(){var J_a=J_x._reader,J_b=J_a.__getBuffer(),J_c=0,J_d=0,J_e=0,J_f=0,J_g=J_a.getUint16(),J_h=[];for(J_h.length=J_g,J_c=0;J_c<J_g;J_c++)J_h[J_c]=J_K.interpolation[J_a.getByte()];var J_i=J_a.getUint8();for(J_x._templet._anis.length=J_i,J_c=0;J_c<J_i;J_c++){var J_j=J_x._templet._anis[J_c]={};J_j.nodes=new Array;var J_k=J_j.name=J_x._strings[J_a.getUint16()];J_x._templet._aniMap[J_k]=J_c,J_j.bone3DMap={},J_j.playTime=J_a.getFloat32();var J_l=J_j.nodes.length=J_a.getInt16();for(J_d=J_j.totalKeyframeDatasLength=0;J_d<J_l;J_d++){var J_m=J_j.nodes[J_d]={};J_m.keyframeWidth=J_g,J_m.childs=[];var J_n=J_a.getUint16();0<=J_n&&(J_m.name=J_x._strings[J_n],J_j.bone3DMap[J_m.name]=J_d),J_m.keyFrame=new Array,J_m.parentIndex=J_a.getInt16(),-1==J_m.parentIndex?J_m.parent=null:J_m.parent=J_j.nodes[J_m.parentIndex],J_j.totalKeyframeDatasLength+=J_g,J_m.interpolationMethod=J_h,null!=J_m.parent&&J_m.parent.childs.push(J_m);var J_o=J_a.getUint16(),J_p=null,J_q=null;for(J_e=0,J_f=J_m.keyFrame.length=J_o;J_e<J_f;J_e++){(J_p=J_m.keyFrame[J_e]={}).startTime=J_a.getFloat32(),J_q&&(J_q.duration=J_p.startTime-J_q.startTime);var J_r=J_x._DATA.offset,J_u=J_a.getUint32(),J_v=4*J_g,J_w=J_b.slice(J_r+J_u,J_r+J_u+J_v);J_p.data=new Float32Array(J_w),J_q=J_p}J_p.duration=0,J_m.playTime=J_j.playTime,J_x._templet._calculateKeyFrame(J_m,J_o,J_g)}}},J_x._templet=null,J_x._reader=null,J_x._strings=[],J_c(J_x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J_x}(),J_Ia=(function(){function J_a(){}J_d(J_a,"laya.ani.AnimationState"),J_a.stopped=0,J_a.paused=1,J_a.playing=2}(),function(){function J_e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new J_Va,this.resultMatrix=new J_Ga,this._children=[]}J_d(J_e,"laya.ani.bone.Bone");var J_a=J_e.prototype;return J_a.setTempMatrix=function(J_a){this._tempMatrix=J_a;var J_b,J_c=0;for(J_c=0,J_b=this._children.length;J_c<J_b;J_c++)this._children[J_c].setTempMatrix(this._tempMatrix)},J_a.update=function(J_a){var J_b;if(this.rotation=this.transform.skX,J_a)J_b=this.resultTransform.getMatrix(),J_Ga.mul(J_b,J_a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)J_b=this.resultTransform.getMatrix(),J_Ga.mul(J_b,this.parentBone.resultMatrix,this.resultMatrix);else{var J_c=this.parentBone,J_d=NaN,J_e=NaN,J_f=NaN,J_g=this.parentBone.resultMatrix;J_b=this.resultTransform.getMatrix();var J_h=J_g.a*J_b.tx+J_g.c*J_b.ty+J_g.tx,J_i=J_g.b*J_b.tx+J_g.d*J_b.ty+J_g.ty,J_j=new J_Ga;this.inheritRotation?(J_d=Math.atan2(J_c.resultMatrix.b,J_c.resultMatrix.a),J_e=Math.cos(J_d),J_f=Math.sin(J_d),J_j.setTo(J_e,J_f,-J_f,J_e,0,0),J_Ga.mul(this._tempMatrix,J_j,J_Ga.TEMP),J_Ga.TEMP.copyTo(J_j),J_b=this.resultTransform.getMatrix(),J_Ga.mul(J_b,J_j,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,J_b=this.resultTransform.getMatrix(),J_Ga.TEMP.identity(),J_Ga.TEMP.d=this.d,J_Ga.mul(J_b,J_Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=J_h,this.resultMatrix.ty=J_i}else(J_b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var J_k,J_l=0;for(J_l=0,J_k=this._children.length;J_l<J_k;J_l++)this._children[J_l].update()},J_a.updateChild=function(){var J_a,J_b=0;for(J_b=0,J_a=this._children.length;J_b<J_a;J_b++)this._children[J_b].update()},J_a.setRotation=function(J_a){this._sprite&&(this._sprite.rotation=180*J_a/Math.PI)},J_a.updateDraw=function(J_a,J_b){J_e.ShowBones&&!J_e.ShowBones[this.name]||(this._sprite||(this._sprite=new J_fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),J_ea.stage.addChild(this._sprite)),this._sprite.x=J_a+this.resultMatrix.tx,this._sprite.y=J_b+this.resultMatrix.ty);var J_c,J_d=0;for(J_d=0,J_c=this._children.length;J_d<J_c;J_d++)this._children[J_d].updateDraw(J_a,J_b)},J_a.addChild=function(J_a){this._children.push(J_a),J_a.parentBone=this},J_a.findBone=function(J_a){if(this.name==J_a)return this;var J_b,J_c,J_d=0;for(J_d=0,J_b=this._children.length;J_d<J_b;J_d++)if(J_c=this._children[J_d].findBone(J_a))return J_c;return null},J_a.localToWorld=function(J_a){var J_b=J_a[0],J_c=J_a[1];J_a[0]=J_b*this.resultMatrix.a+J_c*this.resultMatrix.c+this.resultMatrix.tx,J_a[1]=J_b*this.resultMatrix.b+J_c*this.resultMatrix.d+this.resultMatrix.ty},J_e.ShowBones={},J_e}()),J_Ja=function(){function J_p(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}J_d(J_p,"laya.ani.bone.BoneSlot");var J_a=J_p.prototype;return J_a.showSlotData=function(J_a,J_b){void 0===J_b&&(J_b=!0),this.currSlotData=J_a,J_b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},J_a.showDisplayByName=function(J_a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(J_a))},J_a.replaceDisplayByName=function(J_a,J_b){if(this.currSlotData){var J_c;J_c=this.currSlotData.getDisplayByName(J_a);var J_d;J_d=this.currSlotData.getDisplayByName(J_b),this.replaceDisplayByIndex(J_c,J_d)}},J_a.replaceDisplayByIndex=function(J_a,J_b){this.currSlotData&&(this._replaceDic[J_a]=J_b,this.displayIndex==J_a&&this.showDisplayByIndex(J_a))},J_a.showDisplayByIndex=function(J_a){if(null!=this._replaceDic[J_a]&&(J_a=this._replaceDic[J_a]),this.currSlotData&&-1<J_a&&J_a<this.currSlotData.displayArr.length){if(this.displayIndex=J_a,this.currDisplayData=this.currSlotData.displayArr[J_a],this.currDisplayData){var J_b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(J_b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!J_q.isConchApp||J_q.isConchApp&&"0.9.15"<J_fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},J_a.replaceSkin=function(J_a){this._diyTexture=J_a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},J_a.setParentMatrix=function(J_a){this._parentMatrix=J_a},J_a.draw=function(J_a,J_b,J_c,J_d){if(void 0===J_c&&(J_c=!1),void 0===J_d&&(J_d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var J_e,J_f=this.currTexture;switch(this._diyTexture&&(J_f=this._diyTexture),this.currDisplayData.type){case 0:if(J_a){var J_g=this.getDisplayMatrix();if(this._parentMatrix){var J_h=!1;if(J_g){var J_i;if(J_Ga.mul(J_g,this._parentMatrix,J_Ga.TEMP),J_i=J_c?(null==this._resultMatrix&&(this._resultMatrix=new J_Ga),this._resultMatrix):new J_Ga,!J_q.isWebGL&&this.currDisplayData.uvs||J_q.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var J_j=J_p._tempMatrix;J_j.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(J_j.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(J_h=!0,J_j.rotate(-Math.PI/2)),J_Ga.mul(J_j,J_Ga.TEMP,J_i)}else J_Ga.TEMP.copyTo(J_i);J_h?J_a.drawTexture(J_f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,J_i):J_a.drawTexture(J_f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,J_i)}}}break;case 1:if(null==(J_e=J_c?(null==this._skinSprite&&(this._skinSprite=J_p.createSkinMesh()),this._skinSprite):J_p.createSkinMesh()))return;var J_k;if(null==this.currDisplayData.bones){var J_l,J_m=this.currDisplayData.weights;this.deformData&&(J_m=this.deformData),J_l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J_z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J_z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=J_m;this.currDisplayData.triangles.length;J_k=this.currDisplayData.triangles,J_e.init2(J_f,null,J_k,this._mVerticleArr,J_l);var J_n,J_o=this.getDisplayMatrix();if(this._parentMatrix)if(J_o)J_Ga.mul(J_o,this._parentMatrix,J_Ga.TEMP),J_n=J_c?(null==this._resultMatrix&&(this._resultMatrix=new J_Ga),this._resultMatrix):new J_Ga,J_Ga.TEMP.copyTo(J_n),J_e.transform=J_n}else this.skinMesh(J_b,J_e,J_d);J_a.drawSkin(J_e);break;case 2:if(null==(J_e=J_c?(null==this._skinSprite&&(this._skinSprite=J_p.createSkinMesh()),this._skinSprite):J_p.createSkinMesh()))return;this.skinMesh(J_b,J_e,J_d),J_a.drawSkin(J_e)}}},J_a.skinMesh=function(J_a,J_b,J_c){var J_d,J_e=this.currTexture,J_f=this.currDisplayData.bones;J_d=this._diyTexture?(J_e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J_z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J_z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var J_g,J_h,J_i=this.currDisplayData.weights,J_j=this.currDisplayData.triangles,J_k=0,J_l=0,J_m=0,J_n=NaN,J_o=NaN,J_p=0,J_q=0,J_r=[],J_u=0,J_v=0;if(this.deformData&&0<this.deformData.length){var J_w=0;for(J_u=0,J_v=J_f.length;J_u<J_v;){for(J_m=J_f[J_u++]+J_u,J_l=J_k=0;J_u<J_m;J_u++)J_h=J_a[J_f[J_u]],J_n=J_i[J_p]+this.deformData[J_w++],J_o=J_i[J_p+1]+this.deformData[J_w++],J_q=J_i[J_p+2],J_k+=(J_n*J_h.a+J_o*J_h.c+J_h.tx)*J_q,J_l+=(J_n*J_h.b+J_o*J_h.d+J_h.ty)*J_q,J_p+=3;J_r.push(J_k,J_l)}}else for(J_u=0,J_v=J_f.length;J_u<J_v;){for(J_m=J_f[J_u++]+J_u,J_l=J_k=0;J_u<J_m;J_u++)J_h=J_a[J_f[J_u]],J_n=J_i[J_p],J_o=J_i[J_p+1],J_q=J_i[J_p+2],J_k+=(J_n*J_h.a+J_o*J_h.c+J_h.tx)*J_q,J_l+=(J_n*J_h.b+J_o*J_h.d+J_h.ty)*J_q,J_p+=3;J_r.push(J_k,J_l)}this._mVerticleArr=J_r,J_g=J_j,J_b.init2(J_e,null,J_g,this._mVerticleArr,J_d)},J_a.drawBonePoint=function(J_a){J_a&&this._parentMatrix&&J_a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},J_a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},J_a.getMatrix=function(){return this._resultMatrix},J_a.copy=function(){var J_a=new J_p;return J_a.type="copy",J_a.name=this.name,J_a.attachmentName=this.attachmentName,J_a.srcDisplayIndex=this.srcDisplayIndex,J_a.parent=this.parent,J_a.displayIndex=this.displayIndex,J_a.templet=this.templet,J_a.currSlotData=this.currSlotData,J_a.currTexture=this.currTexture,J_a.currDisplayData=this.currDisplayData,J_a},J_p.createSkinMesh=function(){return J_q.isWebGL||J_q.isConchApp?J_n.skinAniSprite():(J_q.isWebGL,null)},J_c(J_p,["_tempMatrix",function(){return this._tempMatrix=new J_Ga}]),J_p}(),J_Ka=function(){function J_a(){this.skinName=null,this.deformSlotDataList=[]}return J_d(J_a,"laya.ani.bone.DeformAniData"),J_a}(),J_La=function(){function J_a(){this.deformSlotDisplayList=[]}return J_d(J_a,"laya.ani.bone.DeformSlotData"),J_a}(),J_Ma=function(){function J_a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}J_d(J_a,"laya.ani.bone.DeformSlotDisplayData");var J_b=J_a.prototype;return J_b.binarySearch1=function(J_a,J_b){var J_c=0,J_d=J_a.length-2;if(0==J_d)return 1;for(var J_e=J_d>>>1;;){if(J_a[Math.floor(J_e+1)]<=J_b?J_c=J_e+1:J_d=J_e,J_c==J_d)return J_c+1;J_e=J_c+J_d>>>1}return 0},J_b.apply=function(J_a,J_b,J_c){if(void 0===J_c&&(J_c=1),J_a+=.05,!(this.timeList.length<=0)){var J_d=0;if(!(J_a<this.timeList[0])){var J_e=this.vectices[0].length,J_f=[],J_g=this.binarySearch1(this.timeList,J_a);if(this.frameIndex=J_g,J_a>=this.timeList[this.timeList.length-1]){var J_h=this.vectices[this.vectices.length-1];if(J_c<1)for(J_d=0;J_d<J_e;J_d++)J_f[J_d]+=(J_h[J_d]-J_f[J_d])*J_c;else for(J_d=0;J_d<J_e;J_d++)J_f[J_d]=J_h[J_d];this.deformData=J_f}else{this.tweenKeyList[this.frameIndex];var J_i=this.vectices[this.frameIndex-1],J_j=this.vectices[this.frameIndex],J_k=this.timeList[this.frameIndex-1],J_l=this.timeList[this.frameIndex];J_c=this.tweenKeyList[J_g-1]?(J_a-J_k)/(J_l-J_k):0;var J_m=NaN;for(J_d=0;J_d<J_e;J_d++)J_m=J_i[J_d],J_f[J_d]=J_m+(J_j[J_d]-J_m)*J_c;this.deformData=J_f}}}},J_a}(),J_Na=function(){function J_a(){this.time=NaN,this.drawOrder=[]}return J_d(J_a,"laya.ani.bone.DrawOrderData"),J_a}(),J_Oa=function(){function J_a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return J_d(J_a,"laya.ani.bone.EventData"),J_a}(),J_u=function(){function J_da(J_a,J_b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=J_a,this._targetBone=J_b[J_a.targetBoneIndex],this.isSpine=J_a.isSpine,null==this._bones&&(this._bones=[]);for(var J_c=this._bones.length=0,J_d=J_a.boneIndexs.length;J_c<J_d;J_c++)this._bones.push(J_b[J_a.boneIndexs[J_c]]);this.name=J_a.name,this.mix=J_a.mix,this.bendDirection=J_a.bendDirection}J_d(J_da,"laya.ani.bone.IkConstraint");var J_a=J_da.prototype;return J_a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},J_a._applyIk1=function(J_a,J_b,J_c,J_d){var J_e=J_a.parentBone,J_f=1/(J_e.resultMatrix.a*J_e.resultMatrix.d-J_e.resultMatrix.b*J_e.resultMatrix.c),J_g=J_b-J_e.resultMatrix.tx,J_h=J_c-J_e.resultMatrix.ty,J_i=(J_g*J_e.resultMatrix.d-J_h*J_e.resultMatrix.c)*J_f-J_a.transform.x,J_j=(J_h*J_e.resultMatrix.a-J_g*J_e.resultMatrix.b)*J_f-J_a.transform.y,J_k=Math.atan2(J_j,J_i)*J_da.radDeg-0-J_a.transform.skX;J_a.transform.scX<0&&(J_k+=180),180<J_k?J_k-=360:J_k<-180&&(J_k+=360),J_a.transform.skX=J_a.transform.skY=J_a.transform.skX+J_k*J_d,J_a.update()},J_a.updatePos=function(J_a,J_b){this._sp&&this._sp.pos(J_a,J_b)},J_a._applyIk2=function(J_a,J_b,J_c,J_d,J_e,J_f){if(0!=J_f){var J_g=J_a.resultTransform.x,J_h=J_a.resultTransform.y,J_i=J_a.transform.scX,J_j=J_a.transform.scY,J_k=J_b.transform.scX,J_l=0,J_m=0,J_n=0;J_n=J_i<0?(J_i=-J_i,J_l=180,-1):(J_l=0,1),J_j<0&&(J_j=-J_j,J_n=-J_n),J_m=J_k<0?(J_k=-J_k,180):0;var J_o=J_b.resultTransform.x,J_p=NaN,J_q=NaN,J_r=NaN,J_u=J_a.resultMatrix.a,J_v=J_a.resultMatrix.c,J_w=J_a.resultMatrix.b,J_x=J_a.resultMatrix.d,J_y=Math.abs(J_i-J_j)<=1e-4;J_r=J_y?(J_q=J_u*J_o+J_v*(J_p=J_b.resultTransform.y)+J_a.resultMatrix.tx,J_w*J_o+J_x*J_p+J_a.resultMatrix.ty):(J_p=0,J_q=J_u*J_o+J_a.resultMatrix.tx,J_w*J_o+J_a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new J_fa,J_ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(J_c,J_d,15,"#ffff00"),this._sp.graphics.drawCircle(J_q,J_r,15,"#ff00ff")),J_a.setRotation(Math.atan2(J_r-J_a.resultMatrix.ty,J_q-J_a.resultMatrix.tx));var J_z=J_a.parentBone;J_u=J_z.resultMatrix.a,J_v=J_z.resultMatrix.c,J_w=J_z.resultMatrix.b;var J_A=1/(J_u*(J_x=J_z.resultMatrix.d)-J_v*J_w),J_B=J_c-J_z.resultMatrix.tx,J_C=J_d-J_z.resultMatrix.ty,J_D=(J_B*J_x-J_C*J_v)*J_A-J_g,J_E=(J_C*J_u-J_B*J_w)*J_A-J_h,J_F=((J_B=J_q-J_z.resultMatrix.tx)*J_x-(J_C=J_r-J_z.resultMatrix.ty)*J_v)*J_A-J_g,J_G=(J_C*J_u-J_B*J_w)*J_A-J_h,J_H=Math.sqrt(J_F*J_F+J_G*J_G),J_I=J_b.length*J_k,J_J=NaN,J_K=NaN;if(J_y){var J_L=(J_D*J_D+J_E*J_E-J_H*J_H-(J_I*=J_i)*J_I)/(2*J_H*J_I);J_L<-1?J_L=-1:1<J_L&&(J_L=1),J_K=Math.acos(J_L)*J_e,J_u=J_H+J_I*J_L,J_v=J_I*Math.sin(J_K),J_J=Math.atan2(J_E*J_u-J_D*J_v,J_D*J_u+J_E*J_v)}else{var J_M=(J_u=J_i*J_I)*J_u,J_N=(J_v=J_j*J_I)*J_v,J_O=J_D*J_D+J_E*J_E,J_P=Math.atan2(J_E,J_D),J_Q=-2*J_N*J_H,J_R=J_N-J_M;if(0<(J_x=J_Q*J_Q-4*J_R*(J_w=J_N*J_H*J_H+J_M*J_O-J_M*J_N))){var J_S=Math.sqrt(J_x);J_Q<0&&(J_S=-J_S);var J_T=(J_S=-(J_Q+J_S)/2)/J_R,J_U=J_w/J_S,J_V=Math.abs(J_T)<Math.abs(J_U)?J_T:J_U;J_V*J_V<=J_O&&(J_C=Math.sqrt(J_O-J_V*J_V)*J_e,J_J=J_P-Math.atan2(J_C,J_V),J_K=Math.atan2(J_C/J_j,(J_V-J_H)/J_i))}var J_W=0,J_X=Number.MAX_VALUE,J_Y=0,J_Z=0,J_$=0,J__=0,J_s=0,J_t=0;J__<(J_x=(J_B=J_H+J_u)*J_B)&&(J_$=0,J__=J_x,J_s=J_B),(J_x=(J_B=J_H-J_u)*J_B)<J_X&&(J_W=Math.PI,J_X=J_x,J_Y=J_B);var J_aa=Math.acos(-J_u*J_H/(J_M-J_N));(J_x=(J_B=J_u*Math.cos(J_aa)+J_H)*J_B+(J_C=J_v*Math.sin(J_aa))*J_C)<J_X&&(J_W=J_aa,J_X=J_x,J_Y=J_B,J_Z=J_C),J__<J_x&&(J_$=J_aa,J__=J_x,J_s=J_B,J_t=J_C),J_K=J_O<=(J_X+J__)/2?(J_J=J_P-Math.atan2(J_Z*J_e,J_Y),J_W*J_e):(J_J=J_P-Math.atan2(J_t*J_e,J_s),J_$*J_e)}var J_ba=Math.atan2(J_p,J_o)*J_n,J_ca=J_a.resultTransform.skX;180<(J_J=(J_J-J_ba)*J_da.radDeg+J_l-J_ca)?J_J-=360:J_J<-180&&(J_J+=360),J_a.resultTransform.x=J_g,J_a.resultTransform.y=J_h,J_a.resultTransform.skX=J_a.resultTransform.skY=J_ca+J_J*J_f,J_ca=J_b.resultTransform.skX,180<(J_K=((J_K+J_ba)*J_da.radDeg-0)*J_n+J_m-(J_ca%=360))?J_K-=360:J_K<-180&&(J_K+=360),J_b.resultTransform.x=J_o,J_b.resultTransform.y=J_p,J_b.resultTransform.skX=J_b.resultTransform.skY=J_b.resultTransform.skY+J_K*J_f,J_a.update()}},J_a._applyIk3=function(J_a,J_b,J_c,J_d,J_e,J_f){if(0!=J_f){var J_g,J_h,J_i=J_b.resultMatrix.a*J_b.length,J_j=J_b.resultMatrix.b*J_b.length,J_k=J_i*J_i+J_j*J_j,J_l=Math.sqrt(J_k),J_m=J_a.resultMatrix.tx,J_n=J_a.resultMatrix.ty,J_o=J_b.resultMatrix.tx,J_p=J_b.resultMatrix.ty,J_q=J_o-J_m,J_r=J_p-J_n,J_u=J_q*J_q+J_r*J_r,J_v=Math.sqrt(J_u),J_w=(J_q=J_c-J_a.resultMatrix.tx)*J_q+(J_r=J_d-J_a.resultMatrix.ty)*J_r,J_x=Math.sqrt(J_w);if(J_l+J_v<=J_x||J_x+J_l<=J_v||J_x+J_v<=J_l){var J_y=NaN;J_o=J_m+(J_y=J_l+J_v<=J_x?1:-1)*(J_c-J_m)*J_v/J_x,J_p=J_n+J_y*(J_d-J_n)*J_v/J_x}else{var J_z=(J_u-J_k+J_w)/(2*J_w),J_A=Math.sqrt(J_u-J_z*J_z*J_w)/J_x,J_B=J_m+J_q*J_z,J_C=J_n+J_r*J_z,J_D=-J_r*J_A,J_E=J_q*J_A;J_p=0<J_e?(J_o=J_B-J_D,J_C-J_E):(J_o=J_B+J_D,J_C+J_E)}J_g=J_o,J_h=J_p,this.isDebug&&(this._sp||(this._sp=new J_fa,J_ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(J_m,J_n,15,"#ff00ff"),this._sp.graphics.drawCircle(J_c,J_d,15,"#ffff00"),this._sp.graphics.drawCircle(J_g,J_h,15,"#ff00ff"));var J_F,J_G;J_F=Math.atan2(J_h-J_a.resultMatrix.ty,J_g-J_a.resultMatrix.tx),J_a.setRotation(J_F),(J_G=J_da._tempMatrix).identity(),J_G.rotate(J_F),J_G.scale(J_a.resultMatrix.getScaleX(),J_a.resultMatrix.getScaleY()),J_G.translate(J_a.resultMatrix.tx,J_a.resultMatrix.ty),J_G.copyTo(J_a.resultMatrix),J_a.updateChild();var J_H,J_I;J_H=Math.atan2(J_d-J_h,J_c-J_g),J_b.setRotation(J_H),(J_I=J_da._tempMatrix).identity(),J_I.rotate(J_H),J_I.scale(J_b.resultMatrix.getScaleX(),J_b.resultMatrix.getScaleY()),J_I.translate(J_g,J_h),J_G.copyTo(J_b.resultMatrix),J_b.updateChild()}},J_c(J_da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new J_Ga}]),J_da}(),J_Pa=function(){function J_a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return J_d(J_a,"laya.ani.bone.IkConstraintData"),J_a}(),J_x=function(){function J_I(J_a,J_b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=J_a,this.position=J_a.position,this.spacing=J_a.spacing,this.rotateMix=J_a.rotateMix,this.translateMix=J_a.translateMix,this.bones=[];for(var J_c=this.data.bones,J_d=0,J_e=J_c.length;J_d<J_e;J_d++)this.bones.push(J_b[J_c[J_d]])}J_d(J_I,"laya.ani.bone.PathConstraint");var J_a=J_I.prototype;return J_a.apply=function(J_a,J_b){if(this.target){var J_c=this.translateMix,J_d=this.translateMix,J_e=0<J_d,J_f=this.data.spacingMode,J_g="length"==J_f,J_h=this.data.rotateMode,J_i="tangent"==J_h,J_j="chainScale"==J_h,J_k=[],J_l=this.bones.length,J_m=J_i?J_l:J_l+1,J_n=[];(this._spaces=J_n)[0]=this.position;var J_o=this.spacing;if(J_j||J_g)for(var J_p=0,J_q=J_m-1;J_p<J_q;){var J_r=this.bones[J_p],J_u=J_r.length,J_v=J_u*J_r.resultMatrix.a,J_w=J_u*J_r.resultMatrix.b;J_u=Math.sqrt(J_v*J_v+J_w*J_w),J_j&&(J_k[J_p]=J_u),J_n[++J_p]=J_g?Math.max(0,J_u+J_o):J_o}else for(J_p=1;J_p<J_m;J_p++)J_n[J_p]=J_o;var J_x=this.computeWorldPositions(this.target,J_a,J_b,J_m,J_i,"percent"==this.data.positionMode,"percent"==J_f);if(this._debugKey){for(J_p=0;J_p<J_x.length;J_p++)J_b.drawCircle(J_x[J_p++],J_x[J_p++],5,"#00ff00");var J_y=[];for(J_p=0;J_p<J_x.length;J_p++)J_y.push(J_x[J_p++],J_x[J_p++]);J_b.drawLines(0,0,J_y,"#ff0000")}var J_z=J_x[0],J_A=J_x[1],J_B=this.data.offsetRotation,J_C="chain"==J_h&&0==J_B,J_D=NaN;for(J_p=0,J_D=3;J_p<J_l;J_p++,J_D+=3){(J_r=this.bones[J_p]).resultMatrix.tx+=(J_z-J_r.resultMatrix.tx)*J_c,J_r.resultMatrix.ty+=(J_A-J_r.resultMatrix.ty)*J_c;var J_E=(J_v=J_x[J_D])-J_z,J_F=(J_w=J_x[J_D+1])-J_A;if(J_j&&0!=(J_u=J_k[J_p])){var J_G=(Math.sqrt(J_E*J_E+J_F*J_F)/J_u-1)*J_d+1;J_r.resultMatrix.a*=J_G,J_r.resultMatrix.c*=J_G}if(J_z=J_v,J_A=J_w,J_e){var J_H=J_r.resultMatrix.a,J_I=J_r.resultMatrix.c,J_J=J_r.resultMatrix.b,J_K=J_r.resultMatrix.d,J_L=NaN,J_M=NaN,J_N=NaN;J_L=J_i?J_x[J_D-1]:0==J_n[J_p+1]?J_x[J_D+2]:Math.atan2(J_F,J_E),J_L-=Math.atan2(J_J,J_H)-J_B/180*Math.PI,J_C&&(J_M=Math.cos(J_L),J_N=Math.sin(J_L),J_z+=((J_u=J_r.length)*(J_M*J_H-J_N*J_J)-J_E)*J_d,J_A+=(J_u*(J_N*J_H+J_M*J_J)-J_F)*J_d),J_L>Math.PI?J_L-=2*Math.PI:J_L<-Math.PI&&(J_L+=2*Math.PI),J_L*=J_d,J_M=Math.cos(J_L),J_N=Math.sin(J_L),J_r.resultMatrix.a=J_M*J_H-J_N*J_J,J_r.resultMatrix.c=J_M*J_I-J_N*J_K,J_r.resultMatrix.b=J_N*J_H+J_M*J_J,J_r.resultMatrix.d=J_N*J_I+J_M*J_K}}}},J_a.computeWorldVertices2=function(J_a,J_b,J_c,J_d,J_e,J_f){var J_g,J_h,J_i=J_a.currDisplayData.bones,J_j=J_a.currDisplayData.weights,J_k=J_a.currDisplayData.triangles,J_l=0,J_m=0,J_n=0,J_o=0,J_p=0,J_q=0,J_r=0,J_u=0,J_v=0,J_w=0,J_x=0;if(null!=J_i){for(J_l=0;J_l<J_c;J_l+=2)J_m+=(J_o=J_i[J_m])+1,J_n+=J_o;var J_y=J_b;for(J_p=J_f,J_q=3*J_n;J_p<J_d;J_p+=2){for(J_u=J_r=0,J_o=J_i[J_m++],J_o+=J_m;J_m<J_o;J_m++,J_q+=3){J_g=J_y[J_i[J_m]].resultMatrix,J_v=J_j[J_q],J_w=J_j[J_q+1];var J_z=J_j[J_q+2];J_r+=(J_v*J_g.a+J_w*J_g.c+J_g.tx)*J_z,J_u+=(J_v*J_g.b+J_w*J_g.d+J_g.ty)*J_z}J_e[J_p]=J_r,J_e[J_p+1]=J_u}}else{var J_A,J_B;if(J_k||(J_k=J_j),J_a.deformData&&(J_k=J_a.deformData),J_A=J_a.parent,J_b)for(J_x=J_b.length,J_l=0;J_l<J_x;J_l++)if(J_b[J_l].name==J_A){J_h=J_b[J_l];break}J_h&&(J_B=J_h.resultMatrix),J_B||(J_B=J_I._tempMt);var J_C=J_B.tx,J_D=J_B.ty,J_E=J_B.a,J_F=J_B.b,J_G=J_B.c,J_H=J_B.d;for(J_h&&(J_H*=J_h.d),J_m=J_c,J_p=J_f;J_p<J_d;J_m+=2,J_p+=2)J_v=J_k[J_m],J_w=J_k[J_m+1],J_e[J_p]=J_v*J_E+J_w*J_F+J_C,J_e[J_p+1]=-(J_v*J_G+J_w*J_H+J_D)}},J_a.computeWorldPositions=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g){J_a.currDisplayData.bones,J_a.currDisplayData.weights,J_a.currDisplayData.triangles;var J_h=[],J_i=0,J_j=J_a.currDisplayData.verLen,J_k=this.position,J_l=this._spaces,J_m=[],J_n=[],J_o=J_j/6,J_p=-1,J_q=NaN,J_r=0,J_u=0,J_v=NaN,J_w=NaN,J_x=NaN,J_y=NaN;if(J_o--,J_j-=4,this.computeWorldVertices2(J_a,J_b,2,J_j,J_h,0),this._debugKey)for(J_i=0;J_i<J_h.length;)J_c.drawCircle(J_h[J_i++],J_h[J_i++],10,"#ff0000");J_m=J_h,this._curves.length=J_o;var J_z=this._curves,J_A=J_m[J_q=0],J_B=J_m[1],J_C=0,J_D=0,J_E=0,J_F=0,J_G=0,J_H=0,J_I=NaN,J_J=NaN,J_K=NaN,J_L=NaN,J_M=NaN,J_N=NaN,J_O=NaN,J_P=NaN,J_Q=0;for(J_i=0,J_Q=2;J_i<J_o;J_i++,J_Q+=6)J_C=J_m[J_Q],J_D=J_m[J_Q+1],J_E=J_m[J_Q+2],J_F=J_m[J_Q+3],J_M=2*(J_I=.1875*(J_A-2*J_C+J_E))+(J_K=.09375*(3*(J_C-J_E)-J_A+(J_G=J_m[J_Q+4]))),J_N=2*(J_J=.1875*(J_B-2*J_D+J_F))+(J_L=.09375*(3*(J_D-J_F)-J_B+(J_H=J_m[J_Q+5]))),J_O=.75*(J_C-J_A)+J_I+.16666667*J_K,J_P=.75*(J_D-J_B)+J_J+.16666667*J_L,J_q+=Math.sqrt(J_O*J_O+J_P*J_P),J_O+=J_M,J_P+=J_N,J_M+=J_K,J_N+=J_L,J_q+=Math.sqrt(J_O*J_O+J_P*J_P),J_O+=J_M,J_P+=J_N,J_q+=Math.sqrt(J_O*J_O+J_P*J_P),J_O+=J_M+J_K,J_P+=J_N+J_L,J_q+=Math.sqrt(J_O*J_O+J_P*J_P),J_z[J_i]=J_q,J_A=J_G,J_B=J_H;if(J_f&&(J_k*=J_q),J_g)for(J_i=0;J_i<J_d;J_i++)J_l[J_i]*=J_q;var J_R=this._segments,J_S=0,J_T=0;for(J_T=J_u=J_r=J_i=0;J_i<J_d;J_i++,J_r+=3)if((J_v=J_k+=J_w=J_l[J_i])<0)this.addBeforePosition(J_v,J_m,0,J_n,J_r);else if(J_q<J_v)this.addAfterPosition(J_v-J_q,J_m,J_j-4,J_n,J_r);else{for(;;J_u++)if(!((J_y=J_z[J_u])<J_v)){0==J_u?J_v/=J_y:J_v=(J_v-(J_x=J_z[J_u-1]))/(J_y-J_x);break}if(J_u!=J_p){var J_U=6*(J_p=J_u);for(J_A=J_m[J_U],J_B=J_m[J_U+1],J_C=J_m[J_U+2],J_D=J_m[J_U+3],J_E=J_m[J_U+4],J_F=J_m[J_U+5],J_M=2*(J_I=.03*(J_A-2*J_C+J_E))+(J_K=.006*(3*(J_C-J_E)-J_A+(J_G=J_m[J_U+6]))),J_N=2*(J_J=.03*(J_B-2*J_D+J_F))+(J_L=.006*(3*(J_D-J_F)-J_B+(J_H=J_m[J_U+7]))),J_O=.3*(J_C-J_A)+J_I+.16666667*J_K,J_P=.3*(J_D-J_B)+J_J+.16666667*J_L,J_S=Math.sqrt(J_O*J_O+J_P*J_P),J_R[0]=J_S,J_U=1;J_U<8;J_U++)J_O+=J_M,J_P+=J_N,J_M+=J_K,J_N+=J_L,J_S+=Math.sqrt(J_O*J_O+J_P*J_P),J_R[J_U]=J_S;J_O+=J_M,J_P+=J_N,J_S+=Math.sqrt(J_O*J_O+J_P*J_P),J_R[8]=J_S,J_O+=J_M+J_K,J_P+=J_N+J_L,J_S+=Math.sqrt(J_O*J_O+J_P*J_P),J_R[9]=J_S,J_T=0}for(J_v*=J_S;;J_T++)if(!((J_y=J_R[J_T])<J_v)){0==J_T?J_v/=J_y:J_v=J_T+(J_v-(J_x=J_R[J_T-1]))/(J_y-J_x);break}this.addCurvePosition(.1*J_v,J_A,J_B,J_C,J_D,J_E,J_F,J_G,J_H,J_n,J_r,J_e||0<J_i&&0==J_w)}return J_n},J_a.addBeforePosition=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_b[J_c],J_g=J_b[J_c+1],J_h=J_b[J_c+2]-J_f,J_i=J_b[J_c+3]-J_g,J_j=Math.atan2(J_i,J_h);J_d[J_e]=J_f+J_a*Math.cos(J_j),J_d[J_e+1]=J_g+J_a*Math.sin(J_j),J_d[J_e+2]=J_j},J_a.addAfterPosition=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_b[J_c+2],J_g=J_b[J_c+3],J_h=J_f-J_b[J_c],J_i=J_g-J_b[J_c+1],J_j=Math.atan2(J_i,J_h);J_d[J_e]=J_f+J_a*Math.cos(J_j),J_d[J_e+1]=J_g+J_a*Math.sin(J_j),J_d[J_e+2]=J_j},J_a.addCurvePosition=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k,J_l){0==J_a&&(J_a=1e-4);var J_m=J_a*J_a,J_n=J_m*J_a,J_o=1-J_a,J_p=J_o*J_o,J_q=J_p*J_o,J_r=J_o*J_a,J_u=3*J_r,J_v=J_o*J_u,J_w=J_u*J_a,J_x=J_b*J_q+J_d*J_v+J_f*J_w+J_h*J_n,J_y=J_c*J_q+J_e*J_v+J_g*J_w+J_i*J_n;J_j[J_k]=J_x,J_j[J_k+1]=J_y,J_j[J_k+2]=J_l?Math.atan2(J_y-(J_c*J_p+J_e*J_r*2+J_g*J_m),J_x-(J_b*J_p+J_d*J_r*2+J_f*J_m)):0},J_I.NONE=-1,J_I.BEFORE=-2,J_I.AFTER=-3,J_c(J_I,["_tempMt",function(){return this._tempMt=new J_Ga}]),J_I}(),J_Qa=function(){function J_a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return J_d(J_a,"laya.ani.bone.PathConstraintData"),J_a}(),J_Ra=function(){function J_a(){this.name=null,this.slotArr=[]}return J_d(J_a,"laya.ani.bone.SkinData"),J_a}(),J_Sa=function(){function J_a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}J_d(J_a,"laya.ani.bone.SkinSlotDisplayData");var J_b=J_a.prototype;return J_b.createTexture=function(J_a){return this.texture||(this.texture=new J_Ha(J_a.bitmap,this.uvs),J_a.bitmap.alphaTexture&&(this.texture.alphaTexture=new J_Ha(J_a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=J_a.height,this.texture.height=J_a.width,this.texture.offsetX=-J_a.offsetX,this.texture.offsetY=-J_a.offsetY,this.texture.sourceWidth=J_a.sourceHeight,this.texture.sourceHeight=J_a.sourceWidth):(this.texture.width=J_a.width,this.texture.height=J_a.height,this.texture.offsetX=-J_a.offsetX,this.texture.offsetY=-J_a.offsetY,this.texture.sourceWidth=J_a.sourceWidth,this.texture.sourceHeight=J_a.sourceHeight),J_q.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},J_b.destory=function(){this.texture&&this.texture.destroy()},J_a}(),J_Ta=function(){function J_a(){this.name=null,this.displayArr=[]}return J_d(J_a,"laya.ani.bone.SlotData"),J_a.prototype.getDisplayByName=function(J_a){for(var J_b=0,J_c=this.displayArr.length;J_b<J_c;J_b++)if(this.displayArr[J_b].attachmentName==J_a)return J_b;return-1},J_a}(),J_y=function(){function J_a(J_a,J_b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=J_p(2,0),this._data=J_a,null==this._bones&&(this._bones=[]),this.target=J_b[J_a.targetIndex];var J_c,J_d=0;for(J_d=0,J_c=J_a.boneIndexs.length;J_d<J_c;J_d++)this._bones.push(J_b[J_a.boneIndexs[J_d]]);this.rotateMix=J_a.rotateMix,this.translateMix=J_a.translateMix,this.scaleMix=J_a.scaleMix,this.shearMix=J_a.shearMix}return J_d(J_a,"laya.ani.bone.TfConstraint"),J_a.prototype.apply=function(){for(var J_a,J_b=this.target.resultMatrix.a,J_c=this.target.resultMatrix.b,J_d=this.target.resultMatrix.c,J_e=this.target.resultMatrix.d,J_f=0,J_g=this._bones.length;J_f<J_g;J_f++){if(J_a=this._bones[J_f],0<this.rotateMix){var J_h=J_a.resultMatrix.a,J_i=J_a.resultMatrix.b,J_j=J_a.resultMatrix.c,J_k=J_a.resultMatrix.d,J_l=Math.atan2(J_d,J_b)-Math.atan2(J_j,J_h)+this._data.offsetRotation*Math.PI/180;J_l>Math.PI?J_l-=2*Math.PI:J_l<-Math.PI&&(J_l+=2*Math.PI),J_l*=this.rotateMix;var J_m=Math.cos(J_l),J_n=Math.sin(J_l);J_a.resultMatrix.a=J_m*J_h-J_n*J_j,J_a.resultMatrix.b=J_m*J_i-J_n*J_k,J_a.resultMatrix.c=J_n*J_h+J_m*J_j,J_a.resultMatrix.d=J_n*J_i+J_m*J_k}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),J_a.resultMatrix.tx+=(this._temp[0]-J_a.resultMatrix.tx)*this.translateMix,J_a.resultMatrix.ty+=(this._temp[1]-J_a.resultMatrix.ty)*this.translateMix,J_a.updateChild()),0<this.scaleMix){var J_o=Math.sqrt(J_a.resultMatrix.a*J_a.resultMatrix.a+J_a.resultMatrix.c*J_a.resultMatrix.c),J_p=Math.sqrt(J_b*J_b+J_d*J_d),J_q=1e-5<J_o?(J_o+(J_p-J_o+this._data.offsetScaleX)*this.scaleMix)/J_o:0;J_a.resultMatrix.a*=J_q,J_a.resultMatrix.c*=J_q,J_o=Math.sqrt(J_a.resultMatrix.b*J_a.resultMatrix.b+J_a.resultMatrix.d*J_a.resultMatrix.d),J_p=Math.sqrt(J_c*J_c+J_e*J_e),J_q=1e-5<J_o?(J_o+(J_p-J_o+this._data.offsetScaleY)*this.scaleMix)/J_o:0,J_a.resultMatrix.b*=J_q,J_a.resultMatrix.d*=J_q}if(0<this.shearMix){J_i=J_a.resultMatrix.b,J_k=J_a.resultMatrix.d;var J_r=Math.atan2(J_k,J_i);(J_l=Math.atan2(J_e,J_c)-Math.atan2(J_d,J_b)-(J_r-Math.atan2(J_a.resultMatrix.c,J_a.resultMatrix.a)))>Math.PI?J_l-=2*Math.PI:J_l<-Math.PI&&(J_l+=2*Math.PI),J_l=J_r+(J_l+this._data.offsetShearY*Math.PI/180)*this.shearMix,J_q=Math.sqrt(J_i*J_i+J_k*J_k),J_a.resultMatrix.b=Math.cos(J_l)*J_q,J_a.resultMatrix.d=Math.sin(J_l)*J_q}}},J_a}(),J_Ua=function(){function J_a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return J_d(J_a,"laya.ani.bone.TfConstraintData"),J_a}(),J_Va=function(){function J_a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}J_d(J_a,"laya.ani.bone.Transform");var J_b=J_a.prototype;return J_b.initData=function(J_a){null!=J_a.x&&(this.x=J_a.x),null!=J_a.y&&(this.y=J_a.y),null!=J_a.skX&&(this.skX=J_a.skX),null!=J_a.skY&&(this.skY=J_a.skY),null!=J_a.scX&&(this.scX=J_a.scX),null!=J_a.scY&&(this.scY=J_a.scY)},J_b.getMatrix=function(){var J_a;return(J_a=this.mMatrix?this.mMatrix:this.mMatrix=new J_Ga).identity(),J_a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(J_a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),J_a.rotate(this.skX*Math.PI/180),J_a.translate(this.x,this.y),J_a},J_b.skew=function(J_a,J_b,J_c){var J_d=Math.sin(J_c),J_e=Math.cos(J_c),J_f=Math.sin(J_b),J_g=Math.cos(J_b);return J_a.setTo(J_a.a*J_g-J_a.b*J_d,J_a.a*J_f+J_a.b*J_e,J_a.c*J_g-J_a.d*J_d,J_a.c*J_f+J_a.d*J_e,J_a.tx*J_g-J_a.ty*J_d,J_a.tx*J_f+J_a.ty*J_e),J_a},J_a}(),J_z=function(){function J_a(){}return J_d(J_a,"laya.ani.bone.UVTools"),J_a.getRelativeUV=function(J_a,J_b,J_c){var J_d=J_a[0],J_e=J_a[2]-J_a[0],J_f=J_a[1],J_g=J_a[5]-J_a[1];J_c||(J_c=[]),J_c.length=J_b.length;var J_h,J_i=0;J_h=J_c.length;var J_j=1/J_e,J_k=1/J_g;for(J_i=0;J_i<J_h;J_i+=2)J_c[J_i]=(J_b[J_i]-J_d)*J_j,J_c[J_i+1]=(J_b[J_i+1]-J_f)*J_k;return J_c},J_a.getAbsoluteUV=function(J_a,J_b,J_c){if(0==J_a[0]&&0==J_a[1]&&1==J_a[4]&&1==J_a[5])return J_c?(J_r.copyArray(J_c,J_b),J_c):J_b;var J_d=J_a[0],J_e=J_a[2]-J_a[0],J_f=J_a[1],J_g=J_a[5]-J_a[1];J_c||(J_c=[]),J_c.length=J_b.length;var J_h,J_i=0;for(J_h=J_c.length,J_i=0;J_i<J_h;J_i+=2)J_c[J_i]=J_b[J_i]*J_e+J_d,J_c[J_i+1]=J_b[J_i+1]*J_g+J_f;return J_c},J_a}(),J_I=function(){function J_a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return J_d(J_a,"laya.ani.KeyFramesContent"),J_a}(),J_A=function(){function J_k(){}return J_d(J_k,"laya.ani.math.BezierLerp"),J_k.getBezierRate=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_k._getBezierParamKey(J_b,J_c,J_d,J_e),J_g=100*J_f+J_a;if(J_k._bezierResultCache[J_g])return J_k._bezierResultCache[J_g];var J_h,J_i=J_k._getBezierPoints(J_b,J_c,J_d,J_e,J_f),J_j=0;for(J_h=J_i.length,J_j=0;J_j<J_h;J_j+=2)if(J_a<=J_i[J_j])return J_k._bezierResultCache[J_g]=J_i[J_j+1],J_i[J_j+1];return J_k._bezierResultCache[J_g]=1},J_k._getBezierParamKey=function(J_a,J_b,J_c,J_d){return 100*(100*(100*(100*J_a+J_b)+J_c)+J_d)},J_k._getBezierPoints=function(J_a,J_b,J_c,J_d,J_e){return J_k._bezierPointsCache[J_e]?J_k._bezierPointsCache[J_e]:(J_f=[0,0,J_a,J_b,J_c,J_d,1,1],J_g=(new J_h).getBezierPoints(J_f,100,3),J_k._bezierPointsCache[J_e]=J_g);var J_f,J_g},J_k._bezierResultCache={},J_k._bezierPointsCache={},J_k}(),J_B=function(J_a){function J_b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,J_b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}J_d(J_b,"laya.ani.AnimationPlayer",J_e);var J_c=J_b.prototype;return J_ea.imps(J_c,{"laya.resource.IDestroy":!0}),J_c._onTempletLoadedComputeFullKeyframeIndices=function(J_a,J_b,J_c){this._templet===J_c&&this._cachePlayRate===J_a&&this._cacheFrameRate===J_b&&this._computeFullKeyframeIndices()},J_c._computeFullKeyframeIndices=function(){for(var J_a=this._fullFrames=[],J_b=this._templet,J_c=this._cacheFrameRateInterval*this._cachePlayRate,J_d=0,J_e=J_b.getAnimationCount();J_d<J_e;J_d++){for(var J_f=[],J_g=0,J_h=J_b.getAnimation(J_d).nodes.length;J_g<J_h;J_g++){for(var J_i=J_b.getAnimation(J_d).nodes[J_g],J_j=Math.floor(J_i.playTime/J_c+.01),J_k=new Uint16Array(J_j+1),J_l=-1,J_m=0,J_n=J_i.keyFrame.length;J_m<J_n;J_m++){var J_o=J_i.keyFrame[J_m],J_p=J_o.startTime,J_q=J_p+J_o.duration+J_c;do{for(var J_r=Math.floor(J_p/J_c+.5),J_u=J_l+1;J_u<J_r;J_u++)J_k[J_u]=J_m;J_k[J_l=J_r]=J_m,J_p+=J_c}while(J_p<=J_q)}J_f.push(J_k)}J_a.push(J_f)}},J_c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},J_c._calculatePlayDuration=function(){if(0!==this.state){var J_a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=J_a),this._playEnd>J_a&&(this._playEnd=J_a),this._playDuration=this._playEnd-this._playStart}},J_c._setPlayParams=function(J_a,J_b){this._currentTime=J_a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/J_b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*J_b},J_c._setPlayParamsWhenStop=function(J_a,J_b){this._currentTime=J_a,this._currentKeyframeIndex=Math.max(Math.floor(J_a/J_b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*J_b,this._currentAnimationClipIndex=-1},J_c._update=function(J_a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var J_b=this._cacheFrameRateInterval*this._cachePlayRate,J_c=0;this._startUpdateLoopCount!==J_o.loopCount&&(J_c=J_a*this.playbackRate,this._elapsedPlaybackTime+=J_c);var J_d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=J_d)return this._setPlayParamsWhenStop(J_d,J_b),void this.event("stopped");if(J_c+=this._currentTime,0<J_d)if(J_d<=J_c)do{if(J_c-=J_d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(J_d,J_b),this._stopWhenCircleFinish=!1,void this.event("stopped");J_c<J_d&&(this._setPlayParams(J_c,J_b),this.event("complete"))}while(J_d<=J_c);else this._setPlayParams(J_c,J_b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(J_d,J_b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},J_c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},J_c.play=function(J_a,J_b,J_c,J_d,J_e){if(void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=1),void 0===J_c&&(J_c=2147483647),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(J_c<0||J_d<0||J_e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==J_e&&J_e<J_d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=J_b,this._overallDuration=J_c,this._playStart=J_d,this._playEnd=J_e,this._paused=!1,this._currentAnimationClipIndex=J_a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=J_o.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},J_c.playByFrame=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_a&&(J_a=0),void 0===J_b&&(J_b=1),void 0===J_c&&(J_c=2147483647),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=30);var J_g=1e3/J_f;this.play(J_a,J_b,J_c,J_d*J_g,J_e*J_g)},J_c.stop=function(J_a){void 0===J_a&&(J_a=!0),J_a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},J_f(0,J_c,"playEnd",function(){return this._playEnd}),J_f(0,J_c,"templet",function(){return this._templet},function(J_a){0===!this.state&&this.stop(!0),this._templet!==J_a&&((this._templet=J_a).loaded?this._computeFullKeyframeIndices():J_a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),J_f(0,J_c,"playStart",function(){return this._playStart}),J_f(0,J_c,"playDuration",function(){return this._playDuration}),J_f(0,J_c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),J_f(0,J_c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),J_f(0,J_c,"overallDuration",function(){return this._overallDuration}),J_f(0,J_c,"currentFrameTime",function(){return this._currentFrameTime}),J_f(0,J_c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),J_f(0,J_c,"currentPlayTime",function(){return this._currentTime+this._playStart}),J_f(0,J_c,"cachePlayRate",function(){return this._cachePlayRate},function(J_a){this._cachePlayRate!==J_a&&(this._cachePlayRate=J_a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[J_a,this._cacheFrameRate])))}),J_f(0,J_c,"cacheFrameRate",function(){return this._cacheFrameRate},function(J_a){this._cacheFrameRate!==J_a&&(this._cacheFrameRate=J_a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,J_a])))}),J_f(0,J_c,"currentTime",null,function(J_a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(J_a<this._playStart||J_a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=J_o.loopCount;var J_b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=J_a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/J_b),0),this._currentFrameTime=this._currentKeyframeIndex*J_b}}),J_f(0,J_c,"paused",function(){return this._paused},function(J_a){(this._paused=J_a)&&this.event("paused")}),J_f(0,J_c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),J_f(0,J_c,"destroyed",function(){return this._destroyed}),J_b}(),J_J=function(J_a){function J_b(){J_b.__super.call(this),J_q.isConchNode&&(this.drawSkin=function(J_a){J_a.transform||(J_a.transform=J_Ga.EMPTY),this._addCmd([J_a]),this.setSkinMesh&&this.setSkinMesh(J_a._ps,J_a.mVBData,J_a.mEleNum,0,J_a.mTexture,J_a.transform)})}return J_d(J_b,"laya.ani.GraphicsAni",J_g),J_b.prototype.drawSkin=function(J_a){var J_b=[J_a];this._saveToCmd(J_q._context._drawSkin,J_b)},J_b.create=function(){return J_b._caches.pop()||new J_b},J_b.recycle=function(J_a){J_a.clear(),J_b._caches.push(J_a)},J_b._caches=[],J_b}(),J_K=function(J_a){function J_u(){this._aniMap={},this.unfixedLastAniIndex=-1,J_u.__super.call(this),this._anis=new Array}J_d(J_u,"laya.ani.AnimationTemplet",J_k);var J_b=J_u.prototype;return J_b.parse=function(J_a){var J_b=new J_Fa(J_a);this._aniVersion=J_b.readUTFString(),J_v.parse(this,J_b)},J_b._calculateKeyFrame=function(J_a,J_b,J_c){var J_d=J_a.keyFrame;J_d[J_b]=J_d[0];for(var J_e=0;J_e<J_b;J_e++){var J_f=J_d[J_e];J_f.nextData=0===J_f.duration?J_f.data:J_d[J_e+1].data}J_d.length--},J_b.onAsynLoaded=function(J_a,J_b,J_c){var J_d=new J_Fa(J_b);switch(this._aniVersion=J_d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":J_w.parse(this,J_d);break;default:J_v.parse(this,J_d)}this._endLoaded()},J_b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},J_b.getAnimationCount=function(){return this._anis.length},J_b.getAnimation=function(J_a){return this._anis[J_a]},J_b.getAniDuration=function(J_a){return this._anis[J_a].playTime},J_b.getNodes=function(J_a){return this._anis[J_a].nodes},J_b.getNodeIndexWithName=function(J_a,J_b){return this._anis[J_a].bone3DMap[J_b]},J_b.getNodeCount=function(J_a){return this._anis[J_a].nodes.length},J_b.getTotalkeyframesLength=function(J_a){return this._anis[J_a].totalKeyframeDatasLength},J_b.getPublicExtData=function(){return this._publicExtData},J_b.getAnimationDataWithCache=function(J_a,J_b,J_c,J_d){var J_e=J_b[J_c];if(J_e){var J_f=J_e[J_a];return J_f?J_f[J_d]:null}return null},J_b.setAnimationDataWithCache=function(J_a,J_b,J_c,J_d,J_e){var J_f=J_b[J_c]||(J_b[J_c]={});(J_f[J_a]||(J_f[J_a]=[]))[J_d]=J_e},J_b.getOriginalData=function(J_a,J_b,J_c,J_d,J_e){for(var J_f=this._anis[J_a].nodes,J_g=0,J_h=0,J_i=J_f.length,J_j=0;J_h<J_i;J_h++){var J_k,J_l=J_f[J_h];J_k=J_l.keyFrame[J_c[J_h][J_d]],J_l.dataOffset=J_j;var J_m=J_e-J_k.startTime,J_n=J_l.lerpType;if(J_n)switch(J_n){case 0:case 1:for(J_g=0;J_g<J_l.keyframeWidth;)J_g+=J_l.interpolationMethod[J_g](J_l,J_g,J_b,J_j+J_g,J_k.data,J_m,null,J_k.duration,J_k.nextData);break;case 2:var J_o=J_k.interpolationData,J_p=J_o.length,J_q=0;for(J_g=0;J_g<J_p;){var J_r=J_o[J_g];switch(J_r){case 6:case 7:J_g+=J_u.interpolation[J_r](J_l,J_q,J_b,J_j+J_q,J_k.data,J_m,null,J_k.duration,J_k.nextData,J_o,J_g+1);break;default:J_g+=J_u.interpolation[J_r](J_l,J_q,J_b,J_j+J_q,J_k.data,J_m,null,J_k.duration,J_k.nextData)}J_q++}}else for(J_g=0;J_g<J_l.keyframeWidth;)J_g+=J_l.interpolationMethod[J_g](J_l,J_g,J_b,J_j+J_g,J_k.data,J_m,null,J_k.duration,J_k.nextData);J_j+=J_l.keyframeWidth}},J_b.getNodesCurrentFrameIndex=function(J_a,J_b){var J_c=this._anis[J_a].nodes;J_a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(J_c.length),this.unfixedCurrentTimes=new Float32Array(J_c.length),this.unfixedLastAniIndex=J_a);for(var J_d=0,J_e=J_c.length;J_d<J_e;J_d++){var J_f=J_c[J_d];for(J_b<this.unfixedCurrentTimes[J_d]&&(this.unfixedCurrentFrameIndexes[J_d]=0),this.unfixedCurrentTimes[J_d]=J_b;this.unfixedCurrentFrameIndexes[J_d]<J_f.keyFrame.length&&!(J_f.keyFrame[this.unfixedCurrentFrameIndexes[J_d]].startTime>this.unfixedCurrentTimes[J_d]);)this.unfixedCurrentFrameIndexes[J_d]++;this.unfixedCurrentFrameIndexes[J_d]--}return this.unfixedCurrentFrameIndexes},J_b.getOriginalDataUnfixedRate=function(J_a,J_b,J_c){var J_d=this._anis[J_a].nodes;J_a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(J_d.length),this.unfixedCurrentTimes=new Float32Array(J_d.length),this.unfixedKeyframes=J_p(J_d.length),this.unfixedLastAniIndex=J_a);for(var J_e=0,J_f=0,J_g=J_d.length,J_h=0;J_f<J_g;J_f++){var J_i=J_d[J_f];for(J_c<this.unfixedCurrentTimes[J_f]&&(this.unfixedCurrentFrameIndexes[J_f]=0),this.unfixedCurrentTimes[J_f]=J_c;this.unfixedCurrentFrameIndexes[J_f]<J_i.keyFrame.length&&!(J_i.keyFrame[this.unfixedCurrentFrameIndexes[J_f]].startTime>this.unfixedCurrentTimes[J_f]);)this.unfixedKeyframes[J_f]=J_i.keyFrame[this.unfixedCurrentFrameIndexes[J_f]],this.unfixedCurrentFrameIndexes[J_f]++;var J_j=this.unfixedKeyframes[J_f];J_i.dataOffset=J_h;var J_k=J_c-J_j.startTime;if(J_i.lerpType)switch(J_i.lerpType){case 0:case 1:for(J_e=0;J_e<J_i.keyframeWidth;)J_e+=J_i.interpolationMethod[J_e](J_i,J_e,J_b,J_h+J_e,J_j.data,J_k,null,J_j.duration,J_j.nextData);break;case 2:var J_l=J_j.interpolationData,J_m=J_l.length,J_n=0;for(J_e=0;J_e<J_m;){var J_o=J_l[J_e];switch(J_o){case 6:case 7:J_e+=J_u.interpolation[J_o](J_i,J_n,J_b,J_h+J_n,J_j.data,J_k,null,J_j.duration,J_j.nextData,J_l,J_e+1);break;default:J_e+=J_u.interpolation[J_o](J_i,J_n,J_b,J_h+J_n,J_j.data,J_k,null,J_j.duration,J_j.nextData)}J_n++}}else for(J_e=0;J_e<J_i.keyframeWidth;)J_e+=J_i.interpolationMethod[J_e](J_i,J_e,J_b,J_h+J_e,J_j.data,J_k,null,J_j.duration,J_j.nextData);J_h+=J_i.keyframeWidth}},J_u._LinearInterpolation_0=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){var J_k=0===J_h?0:J_f/J_h;return J_c[J_d]=(1-J_k)*J_e[J_b]+J_k*J_i[J_b],1},J_u._QuaternionInterpolation_1=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){var J_k=0===J_h?0:J_f/J_h;return J_m.slerpQuaternionArray(J_e,J_b,J_i,J_b,J_k,J_c,J_d),4},J_u._AngleInterpolation_2=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return 0},J_u._RadiansInterpolation_3=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return 0},J_u._Matrix4x4Interpolation_4=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){for(var J_k=0;J_k<16;J_k++,J_b++)J_c[J_d+J_k]=J_e[J_b]+J_f*J_g[J_b];return 16},J_u._NoInterpolation_5=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j){return J_c[J_d]=J_e[J_b],1},J_u._BezierInterpolation_6=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k){return void 0===J_k&&(J_k=0),J_c[J_d]=J_e[J_b]+(J_i[J_b]-J_e[J_b])*J_A.getBezierRate(J_f/J_h,J_j[J_k],J_j[J_k+1],J_j[J_k+2],J_j[J_k+3]),5},J_u._BezierInterpolation_7=function(J_a,J_b,J_c,J_d,J_e,J_f,J_g,J_h,J_i,J_j,J_k){return void 0===J_k&&(J_k=0),J_c[J_d]=J_j[J_k+4]+J_j[J_k+5]*J_A.getBezierRate((.001*J_f+J_j[J_k+6])/J_j[J_k+7],J_j[J_k],J_j[J_k+1],J_j[J_k+2],J_j[J_k+3]),9},J_u.load=function(J_a){return J_ea.loader.create(J_a,null,null,J_u)},J_u.interpolation=[J_u._LinearInterpolation_0,J_u._QuaternionInterpolation_1,J_u._AngleInterpolation_2,J_u._RadiansInterpolation_3,J_u._Matrix4x4Interpolation_4,J_u._NoInterpolation_5,J_u._BezierInterpolation_6,J_u._BezierInterpolation_7],J_u}(),J_C=function(J_b){function J_c(J_a,J_b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,J_c.__super.call(this),void 0===J_b&&(J_b=0),J_a&&this.init(J_a,J_b)}J_d(J_c,"laya.ani.bone.Skeleton",J_b);var J_a=J_c.prototype;return J_a.init=function(J_a,J_b){void 0===J_b&&(J_b=0);var J_c,J_d,J_e,J_f=0,J_g=0;if(1==J_b)for(this._graphicsCache=[],J_f=0,J_g=J_a.getAnimationCount();J_f<J_g;J_f++)this._graphicsCache.push([]);if(this._yReverseMatrix=J_a.yReverseMatrix,this._aniMode=J_b,this._templet=J_a,this._player=new J_B,this._player.cacheFrameRate=J_a.rate,this._player.templet=J_a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=J_a.mBoneArr,this._rootBone=J_a.mRootBone,this._aniSectionDic=J_a.aniSectionDic,0<J_a.ikArr.length)for(this._ikArr=[],J_f=0,J_g=J_a.ikArr.length;J_f<J_g;J_f++)this._ikArr.push(new J_u(J_a.ikArr[J_f],this._boneList));if(0<J_a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),J_f=0,J_g=J_a.pathArr.length;J_f<J_g;J_f++)J_c=J_a.pathArr[J_f],J_d=new J_x(J_c,this._boneList),(J_e=this._boneSlotDic[J_c.name])&&((J_d=new J_x(J_c,this._boneList)).target=J_e),this._pathDic[J_c.name]=J_d;if(0<J_a.tfArr.length)for(this._tfArr=[],J_f=0,J_g=J_a.tfArr.length;J_f<J_g;J_f++)this._tfArr.push(new J_y(J_a.tfArr[J_f],this._boneList));if(0<J_a.skinDataArray.length){var J_h=this._templet.skinDataArray[this._skinIndex];this._skinName=J_h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},J_a.load=function(J_a,J_b,J_c){},J_a._onLoaded=function(){},J_a._parseComplete=function(){var J_a=J_D.TEMPLET_DICTIONARY[this._aniPath];J_a&&(this.init(J_a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},J_a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},J_a._onPlay=function(){this.event("played")},J_a._onStop=function(){var J_a,J_b=this._templet.eventAniArr[this._aniClipIndex];if(J_b&&this._eventIndex<J_b.length)for(;this._eventIndex<J_b.length;this._eventIndex++)(J_a=J_b[this._eventIndex]).time>=this._player.playStart&&J_a.time<=this._player.playEnd&&this.event("label",J_a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},J_a._onPause=function(){this.event("paused")},J_a._parseSrcBoneMatrix=function(){var J_a=0,J_b=0;for(J_b=this._templet.srcBoneMatrixArr.length,J_a=0;J_a<J_b;J_a++)this._boneMatrixArray.push(new J_Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var J_c,J_d,J_e=this._templet.boneSlotArray;for(J_a=0,J_b=J_e.length;J_a<J_b;J_a++)J_c=J_e[J_a],null==(J_d=this._bindBoneBoneSlotDic[J_c.parent])&&(this._bindBoneBoneSlotDic[J_c.parent]=J_d=[]),this._boneSlotDic[J_c.name]=J_c=J_c.copy(),J_d.push(J_c),this._boneSlotArray.push(J_c)}},J_a._emitMissedEvents=function(J_a,J_b,J_c){void 0===J_c&&(J_c=0);var J_d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(J_d){var J_e,J_f,J_g=0;for(J_e=J_d.length,J_g=J_c;J_g<J_e;J_g++)(J_f=J_d[J_g]).time>=this._player.playStart&&J_f.time<=this._player.playEnd&&this.event("label",J_f)}},J_a._update=function(J_a){if(void 0===J_a&&(J_a=!0),!(this._pause||J_a&&this._indexControl)){var J_b=this.timer.currTimer,J_c=this._player.currentKeyframeIndex,J_d=J_b-this._lastTime;if(J_a?this._player._update(J_d):J_c=-1,this._lastTime=J_b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<J_d&&this._clipIndex==J_c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var J_e;this._lastUpdateAniClipIndex=this._aniClipIndex,J_c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var J_f,J_g=this._templet.eventAniArr[this._aniClipIndex];if(J_g&&this._eventIndex<J_g.length&&((J_e=J_g[this._eventIndex]).time>=this._player.playStart&&J_e.time<=this._player.playEnd?this._player.currentPlayTime>=J_e.time&&(this.event("label",J_e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(J_f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=J_f&&(this.graphics=J_f));var J_h=0,J_i=0;for(J_i=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,J_i-1)&&0<J_i;)J_i--;if(J_i<this._clipIndex)for(J_h=J_i;J_h<this._clipIndex;J_h++)this._createGraphics(J_h)}else if(1==this._aniMode){if(J_f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=J_f&&(this.graphics=J_f));for(J_i=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,J_i-1)&&0<J_i;)J_i--;if(J_i<this._clipIndex)for(J_h=J_i;J_h<this._clipIndex;J_h++)this._createGraphics(J_h)}this._createGraphics()}}},J_a._createGraphics=function(J_a){void 0===J_a&&(J_a=-1),-1==J_a&&(J_a=this._clipIndex);var J_b,J_c,J_d=J_a*this._player.cacheFrameRateInterval,J_e=this._templet.drawOrderAniArr[this._aniClipIndex];if(J_e&&0<J_e.length)for(this._drawOrderIndex=0,J_b=J_e[this._drawOrderIndex];J_d>=J_b.time&&(this._drawOrder=J_b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=J_e.length));)J_b=J_e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=J_J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=J_J.create(),J_c=this.graphics;var J_f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],J_a,J_d);var J_g,J_h,J_i,J_j,J_k=this._aniSectionDic[this._aniClipIndex],J_l=0,J_m=0,J_n=0,J_o=0,J_p=0,J_q=this._templet.srcBoneMatrixArr.length;for(J_p=J_k[J_m=0];J_m<J_q;J_m++)J_j=this._boneList[J_m],J_i=this._templet.srcBoneMatrixArr[J_m],J_j.resultTransform.scX=J_i.scX*this._curOriginalData[J_l++],J_j.resultTransform.skX=J_i.skX+this._curOriginalData[J_l++],J_j.resultTransform.skY=J_i.skY+this._curOriginalData[J_l++],J_j.resultTransform.scY=J_i.scY*this._curOriginalData[J_l++],J_j.resultTransform.x=J_i.x+this._curOriginalData[J_l++],J_j.resultTransform.y=J_i.y+this._curOriginalData[J_l++],8===this._templet.tMatrixDataLen&&(J_j.resultTransform.skewX=J_i.skewX+this._curOriginalData[J_l++],J_j.resultTransform.skewY=J_i.skewY+this._curOriginalData[J_l++]);var J_r,J_u={},J_v={};for(J_p+=J_k[1];J_m<J_p;J_m++)J_u[(J_r=J_f[J_m]).name]=this._curOriginalData[J_l++],J_v[J_r.name]=this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++];var J_w,J_x,J_y={},J_z={};for(J_p+=J_k[2];J_m<J_p;J_m++)J_y[(J_r=J_f[J_m]).name]=this._curOriginalData[J_l++],J_z[J_r.name]=this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++],this._curOriginalData[J_l++];if(this._pathDic)for(J_p+=J_k[3];J_m<J_p;J_m++){if(J_r=J_f[J_m],J_w=this._pathDic[J_r.name])switch(new J_Fa(J_r.extenData).getByte()){case 1:J_w.position=this._curOriginalData[J_l++];break;case 2:J_w.spacing=this._curOriginalData[J_l++];break;case 3:J_w.rotateMix=this._curOriginalData[J_l++],J_w.translateMix=this._curOriginalData[J_l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(J_Ga.TEMP.identity()),this._ikArr)for(J_m=0,J_p=this._ikArr.length;J_m<J_p;J_m++)J_x=this._ikArr[J_m],J_y.hasOwnProperty(J_x.name)&&(J_x.bendDirection=J_y[J_x.name]),J_z.hasOwnProperty(J_x.name)&&(J_x.mix=J_z[J_x.name]),J_x.apply();if(this._pathDic)for(var J_A in this._pathDic)(J_w=this._pathDic[J_A]).apply(this._boneList,J_c);if(this._tfArr)for(J_m=0,J_o=this._tfArr.length;J_m<J_o;J_m++)this._tfArr[J_m].apply();for(J_m=0,J_o=this._boneList.length;J_m<J_o;J_m++)if(J_j=this._boneList[J_m],J_h=this._bindBoneBoneSlotDic[J_j.name],J_j.resultMatrix.copyTo(this._boneMatrixArray[J_m]),J_h)for(J_n=0,J_p=J_h.length;J_n<J_p;J_n++)(J_g=J_h[J_n])&&J_g.setParentMatrix(J_j.resultMatrix);var J_B,J_C,J_D,J_E,J_F={},J_G=this._templet.deformAniArr;if(J_G&&0<J_G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,J_m=0,J_p=this._boneSlotArray.length;J_m<J_p;J_m++)(J_g=this._boneSlotArray[J_m]).deformData=null;var J_H,J_I=J_G[this._aniClipIndex];for(J_H in J_B=J_I.default,this._setDeform(J_B,J_F,this._boneSlotArray,J_d),J_I)"default"!=J_H&&J_H!=this._skinName&&(J_B=J_I[J_H],this._setDeform(J_B,J_F,this._boneSlotArray,J_d));J_B=J_I[this._skinName],this._setDeform(J_B,J_F,this._boneSlotArray,J_d)}if(this._drawOrder)for(J_m=0,J_p=this._drawOrder.length;J_m<J_p;J_m++)J_C=J_u[(J_g=this._boneSlotArray[this._drawOrder[J_m]]).name],J_D=J_v[J_g.name],isNaN(J_D)||(J_c.save(),J_c.alpha(J_D)),isNaN(J_C)||-2==J_C||(this._templet.attachmentNames?J_g.showDisplayByName(this._templet.attachmentNames[J_C]):J_g.showDisplayByIndex(J_C)),J_F[this._drawOrder[J_m]]?(J_E=J_F[this._drawOrder[J_m]],J_g.currDisplayData&&J_E[J_g.currDisplayData.attachmentName]?J_g.deformData=J_E[J_g.currDisplayData.attachmentName]:J_g.deformData=null):J_g.deformData=null,isNaN(J_D)?J_g.draw(J_c,this._boneMatrixArray,2==this._aniMode):J_g.draw(J_c,this._boneMatrixArray,2==this._aniMode,J_D),isNaN(J_D)||J_c.restore();else for(J_m=0,J_p=this._boneSlotArray.length;J_m<J_p;J_m++)J_C=J_u[(J_g=this._boneSlotArray[J_m]).name],J_D=J_v[J_g.name],isNaN(J_D)||(J_c.save(),J_c.alpha(J_D)),isNaN(J_C)||-2==J_C||(this._templet.attachmentNames?J_g.showDisplayByName(this._templet.attachmentNames[J_C]):J_g.showDisplayByIndex(J_C)),J_F[J_m]?(J_E=J_F[J_m],J_g.currDisplayData&&J_E[J_g.currDisplayData.attachmentName]?J_g.deformData=J_E[J_g.currDisplayData.attachmentName]:J_g.deformData=null):J_g.deformData=null,isNaN(J_D)?J_g.draw(J_c,this._boneMatrixArray,2==this._aniMode):J_g.draw(J_c,this._boneMatrixArray,2==this._aniMode,J_D),isNaN(J_D)||J_c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,J_a,J_c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,J_a,J_c)},J_a._setDeform=function(J_a,J_b,J_c,J_d){if(J_a){var J_e,J_f,J_g,J_h=0,J_i=0,J_j=0;if(J_a)for(J_h=0,J_i=J_a.deformSlotDataList.length;J_h<J_i;J_h++)for(J_e=J_a.deformSlotDataList[J_h],J_j=0;J_j<J_e.deformSlotDisplayList.length;J_j++)J_g=J_c[(J_f=J_e.deformSlotDisplayList[J_j]).slotIndex],J_f.apply(J_d,J_g),J_b[J_f.slotIndex]||(J_b[J_f.slotIndex]={}),J_b[J_f.slotIndex][J_f.attachment]=J_f.deformData}},J_a.getAnimNum=function(){return this._templet.getAnimationCount()},J_a.getAniNameByIndex=function(J_a){return this._templet.getAniNameByIndex(J_a)},J_a.getSlotByName=function(J_a){return this._boneSlotDic[J_a]},J_a.showSkinByName=function(J_a,J_b){void 0===J_b&&(J_b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(J_a),J_b)},J_a.showSkinByIndex=function(J_a,J_b){void 0===J_b&&(J_b=!0);for(var J_c=0;J_c<this._boneSlotArray.length;J_c++)this._boneSlotArray[J_c].showSlotData(null,J_b);if(this._templet.showSkinByIndex(this._boneSlotDic,J_a,J_b)){var J_d=this._templet.skinDataArray[J_a];this._skinIndex=J_a,this._skinName=J_d.name}this._clearCache()},J_a.showSlotSkinByIndex=function(J_a,J_b){if(0!=this._aniMode){var J_c=this.getSlotByName(J_a);J_c&&J_c.showDisplayByIndex(J_b),this._clearCache()}},J_a.showSlotSkinByName=function(J_a,J_b){if(0!=this._aniMode){var J_c=this.getSlotByName(J_a);J_c&&J_c.showDisplayByName(J_b),this._clearCache()}},J_a.replaceSlotSkinName=function(J_a,J_b,J_c){if(0!=this._aniMode){var J_d=this.getSlotByName(J_a);J_d&&J_d.replaceDisplayByName(J_b,J_c),this._clearCache()}},J_a.replaceSlotSkinByIndex=function(J_a,J_b,J_c){if(0!=this._aniMode){var J_d=this.getSlotByName(J_a);J_d&&J_d.replaceDisplayByIndex(J_b,J_c),this._clearCache()}},J_a.setSlotSkin=function(J_a,J_b){if(0!=this._aniMode){var J_c=this.getSlotByName(J_a);J_c&&J_c.replaceSkin(J_b),this._clearCache()}},J_a._clearCache=function(){if(1==this._aniMode)for(var J_a=0,J_b=this._graphicsCache.length;J_a<J_b;J_a++){for(var J_c=0,J_d=this._graphicsCache[J_a].length;J_c<J_d;J_c++){var J_e=this._graphicsCache[J_a][J_c];J_e!=this.graphics&&J_J.recycle(J_e)}this._graphicsCache[J_a].length=0}},J_a.play=function(J_a,J_b,J_c,J_d,J_e,J_f){void 0===J_c&&(J_c=!0),void 0===J_d&&(J_d=0),void 0===J_e&&(J_e=0),void 0===J_f&&(J_f=!0),this._indexControl=!1;var J_g=-1,J_h=NaN;if(J_h=J_b?2147483647:0,"string"==typeof J_a)for(var J_i=0,J_j=this._templet.getAnimationCount();J_i<J_j;J_i++){var J_k=this._templet.getAnimation(J_i);if(J_k&&J_a==J_k.name){J_g=J_i;break}}else J_g=J_a;-1<J_g&&J_g<this.getAnimNum()&&(this._aniClipIndex=J_g,(J_c||this._pause||this._currAniIndex!=J_g)&&(this._currAniIndex=J_g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(J_g)),this._drawOrder=null,this._eventIndex=0,this._player.play(J_g,this._player.playbackRate,J_h,J_d,J_e),J_f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=J_l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},J_a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},J_a.playbackRate=function(J_a){this._player&&(this._player.playbackRate=J_a)},J_a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},J_a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=J_l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},J_a._getGrahicsDataWithCache=function(J_a,J_b){return this._graphicsCache[J_a][J_b]},J_a._setGrahicsDataWithCache=function(J_a,J_b,J_c){this._graphicsCache[J_a][J_b]=J_c},J_a.destroy=function(J_a){void 0===J_a&&(J_a=!0),J_b.prototype.destroy.call(this,J_a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},J_f(0,J_a,"url",function(){return this._aniPath},function(J_a){this.load(J_a)}),J_f(0,J_a,"index",function(){return this._index},function(J_a){this.player&&(this._index=J_a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),J_f(0,J_a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),J_f(0,J_a,"templet",function(){return this._templet}),J_f(0,J_a,"player",function(){return this._player}),J_c.useSimpleMeshInCanvas=!1,J_c}(J_fa),J_D=function(J_b){function J_e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,J_e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}J_d(J_e,"laya.ani.bone.Templet",J_b);var J_a=J_e.prototype;return J_a.getLoadList=function(){return this._loadList},J_a.loadAni=function(J_a){this._skBufferUrl=J_a,J_ea.loader.load(J_a,J_i.create(this,this.onComplete),null,"arraybuffer")},J_a.onComplete=function(J_a){if(this._isDestroyed)this.destroy();else{var J_b=J_j.getRes(this._skBufferUrl);J_b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,J_b)):this.event("error","load failed:"+this._skBufferUrl)}},J_a.parseData=function(J_a,J_b,J_c){void 0===J_c&&(J_c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=J_a,this._mainTexture&&J_q.isWebGL&&J_a.bitmap&&(J_a.bitmap.enableMerageInAtlas=!1),this._rate=J_c,this.parse(J_b)},J_a.buildArmature=function(J_a){return void 0===J_a&&(J_a=0),new J_C(this,J_a)},J_a.parse=function(J_a){J_b.prototype.parse.call(this,J_a),this._endLoaded(),this._aniVersion!=J_e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+J_e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},J_a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var J_a=0;this._loadList=[];var J_b,J_c=new J_Fa(this.getPublicExtData()),J_d=0,J_e=0,J_f=0,J_g=J_c.getInt32(),J_h=J_c.readUTFString(),J_i=J_h.split("\n");for(J_a=0;J_a<J_g;J_a++)J_b=this._path+J_i[2*J_a],J_h=J_i[2*J_a+1],J_c.getFloat32(),J_c.getFloat32(),J_d=J_c.getFloat32(),J_e=J_c.getFloat32(),J_f=J_c.getFloat32(),isNaN(J_f)?0:J_f,J_f=J_c.getFloat32(),isNaN(J_f)?0:J_f,J_f=J_c.getFloat32(),isNaN(J_f)?J_d:J_f,J_f=J_c.getFloat32(),isNaN(J_f)?J_e:J_f,-1==this._loadList.indexOf(J_b)&&this._loadList.push(J_b);this.event("inited",this)}},J_a._textureComplete=function(){for(var J_a,J_b,J_c=0,J_d=this._loadList.length;J_c<J_d;J_c++)J_b=this._loadList[J_c],J_a=this._textureDic[J_b]=J_j.getRes(J_b),J_q.isWebGL&&J_a&&J_a.bitmap&&(J_a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},J_a._parsePublicExtData=function(){var J_a=0,J_b=0,J_c=0,J_d=0,J_e=0;for(J_a=0,J_e=this.getAnimationCount();J_a<J_e;J_a++)this._graphicsCache.push([]);var J_f;J_f="Dragon"!=this._aniClassName;var J_g,J_h,J_i=new J_Fa(this.getPublicExtData()),J_j=0,J_k=0,J_l=0,J_m=0,J_n=0,J_o=0,J_p=0,J_q=0,J_r=0,J_u=J_i.getInt32(),J_v=J_i.readUTFString(),J_w=J_v.split("\n");for(J_a=0;J_a<J_u;J_a++){if(J_g=this._mainTexture,J_h=this._path+J_w[2*J_a],J_v=J_w[2*J_a+1],null==this._mainTexture&&(J_g=this._textureDic[J_h]),!J_g)return this.event("error",this),void(this.isParseFail=!0);J_j=J_i.getFloat32(),J_k=J_i.getFloat32(),J_l=J_i.getFloat32(),J_m=J_i.getFloat32(),J_r=J_i.getFloat32(),J_n=isNaN(J_r)?0:J_r,J_r=J_i.getFloat32(),J_o=isNaN(J_r)?0:J_r,J_r=J_i.getFloat32(),J_p=isNaN(J_r)?J_l:J_r,J_r=J_i.getFloat32(),J_q=isNaN(J_r)?J_m:J_r,this.subTextureDic[J_v]=J_Ha.create(J_g,J_j,J_k,J_l,J_m,-J_n,-J_o,J_p,J_q),J_g.alphaTexture&&(this.subTextureDic[J_v].alphaTexture=J_Ha.create(J_g.alphaTexture,J_j,J_k,J_l,J_m,-J_n,-J_o,J_p,J_q))}this._mainTexture=J_g;var J_x,J_y,J_z,J_A,J_B,J_C=J_i.getUint16();for(J_a=0;J_a<J_C;J_a++)(J_x=[]).push(J_i.getUint16()),J_x.push(J_i.getUint16()),J_x.push(J_i.getUint16()),J_x.push(J_i.getUint16()),this.aniSectionDic[J_a]=J_x;var J_D,J_E=J_i.getInt16(),J_F={};for(J_a=0;J_a<J_E;J_a++)J_y=new J_Ia,0==J_a?J_D=J_y:J_y.root=J_D,J_y.d=J_f?-1:1,J_A=J_i.readUTFString(),J_B=J_i.readUTFString(),J_y.length=J_i.getFloat32(),1==J_i.getByte()&&(J_y.inheritRotation=!1),1==J_i.getByte()&&(J_y.inheritScale=!1),J_y.name=J_A,J_B&&((J_z=J_F[J_B])?J_z.addChild(J_y):this.mRootBone=J_y),J_F[J_A]=J_y,this.mBoneArr.push(J_y);this.tMatrixDataLen=J_i.getUint16();var J_G,J_H,J_I=J_i.getUint16(),J_J=Math.floor(J_I/this.tMatrixDataLen),J_K=this.srcBoneMatrixArr;for(J_a=0;J_a<J_J;J_a++)(J_G=new J_Va).scX=J_i.getFloat32(),J_G.skX=J_i.getFloat32(),J_G.skY=J_i.getFloat32(),J_G.scY=J_i.getFloat32(),J_G.x=J_i.getFloat32(),J_G.y=J_i.getFloat32(),8===this.tMatrixDataLen&&(J_G.skewX=J_i.getFloat32(),J_G.skewY=J_i.getFloat32()),J_K.push(J_G),(J_y=this.mBoneArr[J_a]).transform=J_G;var J_L,J_M=J_i.getUint16(),J_N=0;for(J_a=0;J_a<J_M;J_a++){for(J_H=new J_Pa,J_N=J_i.getUint16(),J_b=0;J_b<J_N;J_b++)J_H.boneNames.push(J_i.readUTFString()),J_H.boneIndexs.push(J_i.getInt16());J_H.name=J_i.readUTFString(),J_H.targetBoneName=J_i.readUTFString(),J_H.targetBoneIndex=J_i.getInt16(),J_H.bendDirection=J_i.getFloat32(),J_H.mix=J_i.getFloat32(),J_H.isSpine=J_f,this.ikArr.push(J_H)}var J_O,J_P=J_i.getUint16(),J_Q=0;for(J_a=0;J_a<J_P;J_a++){for(J_L=new J_Ua,J_Q=J_i.getUint16(),J_b=0;J_b<J_Q;J_b++)J_L.boneIndexs.push(J_i.getInt16());J_L.name=J_i.getUTFString(),J_L.targetIndex=J_i.getInt16(),J_L.rotateMix=J_i.getFloat32(),J_L.translateMix=J_i.getFloat32(),J_L.scaleMix=J_i.getFloat32(),J_L.shearMix=J_i.getFloat32(),J_L.offsetRotation=J_i.getFloat32(),J_L.offsetX=J_i.getFloat32(),J_L.offsetY=J_i.getFloat32(),J_L.offsetScaleX=J_i.getFloat32(),J_L.offsetScaleY=J_i.getFloat32(),J_L.offsetShearY=J_i.getFloat32(),this.tfArr.push(J_L)}var J_R=J_i.getUint16(),J_S=0;for(J_a=0;J_a<J_R;J_a++){for((J_O=new J_Qa).name=J_i.readUTFString(),J_S=J_i.getUint16(),J_b=0;J_b<J_S;J_b++)J_O.bones.push(J_i.getInt16());J_O.target=J_i.readUTFString(),J_O.positionMode=J_i.readUTFString(),J_O.spacingMode=J_i.readUTFString(),J_O.rotateMode=J_i.readUTFString(),J_O.offsetRotation=J_i.getFloat32(),J_O.position=J_i.getFloat32(),J_O.spacing=J_i.getFloat32(),J_O.rotateMix=J_i.getFloat32(),J_O.translateMix=J_i.getFloat32(),this.pathArr.push(J_O)}var J_T,J_U,J_V,J_W,J_X,J_Y=0,J_Z=0,J_$=0,J__=NaN,J_s=0,J_t=J_i.getInt16();for(J_a=0;J_a<J_t;J_a++){var J_aa=J_i.getUint8(),J_ba={};this.deformAniArr.push(J_ba);for(var J_ca=0;J_ca<J_aa;J_ca++)for((J_T=new J_Ka).skinName=J_i.getUTFString(),J_ba[J_T.skinName]=J_T,J_Y=J_i.getInt16(),J_b=0;J_b<J_Y;J_b++)for(J_U=new J_La,J_T.deformSlotDataList.push(J_U),J_Z=J_i.getInt16(),J_c=0;J_c<J_Z;J_c++)for(J_V=new J_Ma,J_U.deformSlotDisplayList.push(J_V),J_V.slotIndex=J_i.getInt16(),J_V.attachment=J_i.getUTFString(),J_$=J_i.getInt16(),J_d=0;J_d<J_$;J_d++)for(1==J_i.getByte()?J_V.tweenKeyList.push(!0):J_V.tweenKeyList.push(!1),J__=J_i.getFloat32(),J_V.timeList.push(J__),J_W=[],J_V.vectices.push(J_W),J_s=J_i.getInt16(),J_e=0;J_e<J_s;J_e++)J_W.push(J_i.getFloat32())}var J_da,J_ea,J_fa=J_i.getInt16(),J_ga=0,J_ha=0;for(J_a=0;J_a<J_fa;J_a++){for(J_ga=J_i.getInt16(),J_X=[],J_b=0;J_b<J_ga;J_b++){for((J_da=new J_Na).time=J_i.getFloat32(),J_ha=J_i.getInt16(),J_c=0;J_c<J_ha;J_c++)J_da.drawOrder.push(J_i.getInt16());J_X.push(J_da)}this.drawOrderAniArr.push(J_X)}var J_ia,J_ja=J_i.getInt16(),J_ka=0;for(J_a=0;J_a<J_ja;J_a++){for(J_ka=J_i.getInt16(),J_ea=[],J_b=0;J_b<J_ka;J_b++)(J_ia=new J_Oa).name=J_i.getUTFString(),J_ia.intValue=J_i.getInt32(),J_ia.floatValue=J_i.getFloat32(),J_ia.stringValue=J_i.getUTFString(),J_ia.time=J_i.getFloat32(),J_ea.push(J_ia);this.eventAniArr.push(J_ea)}var J_la=J_i.getInt16();if(0<J_la)for(this.attachmentNames=[],J_a=0;J_a<J_la;J_a++)this.attachmentNames.push(J_i.getUTFString());var J_ma,J_na,J_oa=J_i.getInt16();for(J_a=0;J_a<J_oa;J_a++)(J_ma=new J_Ja).name=J_i.readUTFString(),J_ma.parent=J_i.readUTFString(),J_ma.attachmentName=J_i.readUTFString(),J_ma.srcDisplayIndex=J_ma.displayIndex=J_i.getInt16(),(J_ma.templet=this).boneSlotDic[J_ma.name]=J_ma,null==(J_na=this.bindBoneBoneSlotDic[J_ma.parent])&&(this.bindBoneBoneSlotDic[J_ma.parent]=J_na=[]),J_na.push(J_ma),this.boneSlotArray.push(J_ma);var J_pa,J_qa,J_ra,J_ua=J_i.readUTFString().split("\n"),J_va=0,J_wa=J_i.getUint8(),J_xa=0,J_ya=0,J_za=0,J_Aa=0,J_Ba=0,J_Ca=0,J_Da=0;for(J_a=0;J_a<J_wa;J_a++){for((J_pa=new J_Ra).name=J_ua[J_va++],J_xa=J_i.getUint8(),J_b=0;J_b<J_xa;J_b++){for((J_qa=new J_Ta).name=J_ua[J_va++],J_ma=this.boneSlotDic[J_qa.name],J_ya=J_i.getUint8(),J_c=0;J_c<J_ya;J_c++){if(J_ra=new J_Sa,this.skinSlotDisplayDataArr.push(J_ra),J_ra.name=J_ua[J_va++],J_ra.attachmentName=J_ua[J_va++],J_ra.transform=new J_Va,J_ra.transform.scX=J_i.getFloat32(),J_ra.transform.skX=J_i.getFloat32(),J_ra.transform.skY=J_i.getFloat32(),J_ra.transform.scY=J_i.getFloat32(),J_ra.transform.x=J_i.getFloat32(),J_ra.transform.y=J_i.getFloat32(),J_qa.displayArr.push(J_ra),J_ra.width=J_i.getFloat32(),J_ra.height=J_i.getFloat32(),J_ra.type=J_i.getUint8(),J_ra.verLen=J_i.getUint16(),0<(J_E=J_i.getUint16()))for(J_ra.bones=[],J_d=0;J_d<J_E;J_d++){var J_Ea=J_i.getUint16();J_ra.bones.push(J_Ea)}if(0<(J_za=J_i.getUint16()))for(J_ra.uvs=[],J_d=0;J_d<J_za;J_d++)J_ra.uvs.push(J_i.getFloat32());if(0<(J_Aa=J_i.getUint16()))for(J_ra.weights=[],J_d=0;J_d<J_Aa;J_d++)J_ra.weights.push(J_i.getFloat32());if(0<(J_Ba=J_i.getUint16()))for(J_ra.triangles=[],J_d=0;J_d<J_Ba;J_d++)J_ra.triangles.push(J_i.getUint16());if(0<(J_Ca=J_i.getUint16()))for(J_ra.vertices=[],J_d=0;J_d<J_Ca;J_d++)J_ra.vertices.push(J_i.getFloat32());if(0<(J_Da=J_i.getUint16()))for(J_ra.lengths=[],J_d=0;J_d<J_Da;J_d++)J_ra.lengths.push(J_i.getFloat32())}J_pa.slotArr.push(J_qa)}this.skinDic[J_pa.name]=J_pa,this.skinDataArray.push(J_pa)}1==J_i.getUint8()?(this.yReverseMatrix=new J_Ga(1,0,0,-1,0,0),J_D&&J_D.setTempMatrix(this.yReverseMatrix)):J_D&&J_D.setTempMatrix(new J_Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},J_a.getTexture=function(J_a){var J_b=this.subTextureDic[J_a];return J_b||(J_b=this.subTextureDic[J_a.substr(0,J_a.length-1)]),null==J_b?this._mainTexture:J_b},J_a.showSkinByIndex=function(J_a,J_b,J_c){if(void 0===J_c&&(J_c=!0),J_b<0&&J_b>=this.skinDataArray.length)return!1;var J_d,J_e,J_f=0,J_g=0,J_h=this.skinDataArray[J_b];if(J_h){for(J_f=0,J_g=J_h.slotArr.length;J_f<J_g;J_f++)(J_e=J_h.slotArr[J_f])&&(J_d=J_a[J_e.name])&&(J_d.showSlotData(J_e,J_c),J_c&&"undefined"!=J_d.attachmentName&&"null"!=J_d.attachmentName?J_d.showDisplayByName(J_d.attachmentName):J_d.showDisplayByIndex(J_d.displayIndex));return!0}return!1},J_a.getSkinIndexByName=function(J_a){for(var J_b=0,J_c=this.skinDataArray.length;J_b<J_c;J_b++)if(this.skinDataArray[J_b].name==J_a)return J_b;return-1},J_a.getGrahicsDataWithCache=function(J_a,J_b){return this._graphicsCache[J_a][J_b]},J_a.setGrahicsDataWithCache=function(J_a,J_b,J_c){this._graphicsCache[J_a][J_b]=J_c},J_a.destroy=function(){var J_a;for(var J_b in this._isDestroyed=!0,this.subTextureDic)(J_a=this.subTextureDic[J_b])&&J_a.destroy();for(J_b in this._textureDic)(J_a=this._textureDic[J_b])&&J_a.destroy();for(var J_c=0,J_d=this.skinSlotDisplayDataArr.length;J_c<J_d;J_c++)this.skinSlotDisplayDataArr[J_c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete J_e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},J_a.getAniNameByIndex=function(J_a){var J_b=this.getAnimation(J_a);return J_b?J_b.name:null},J_f(0,J_a,"rate",function(){return this._rate},function(J_a){this._rate=J_a}),J_e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",J_e.TEMPLET_DICTIONARY=null,J_e}(J_K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J_a,J_b){"use strict";for(var J_c in Object.defineProperty(J_b,"__esModule",{value:!0}),Laya){var J_d=Laya[J_c];J_d&&J_d.__isclass&&(J_b[J_c]=J_d)}});