var Laya=window.Laya=function(J$j,J$a){var J$k={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(J$a,J$b){return 1==arguments.length?J$k.__presubstr.call(this,J$a):J$k.__presubstr.call(this,J$a,0<J$b?J$b:this.length+J$b)},__init:function(J$a){J$a.forEach(function(J$a){J$a.__init$&&J$a.__init$()})},__isClass:function(J$a){return J$a&&(J$a.__isclass||J$a==Object||J$a==String||J$a==Array)},__newvec:function(J$a,J$b){var J$c=[];J$c.length=J$a;for(var J$d=0;J$d<J$a;J$d++)J$c[J$d]=J$b;return J$c},__extend:function(J$a,J$b){for(var J$c in J$b)if(J$b.hasOwnProperty(J$c)){var J$d=Object.getOwnPropertyDescriptor(J$b,J$c),J$e=J$d.get,J$f=J$d.set;J$e||J$f?J$e&&J$f?Object.defineProperty(J$a,J$c,J$d):(J$e&&Object.defineProperty(J$a,J$c,J$e),J$f&&Object.defineProperty(J$a,J$c,J$f)):J$a[J$c]=J$b[J$c]}function J$g(){J$k.un(this,"constructor",J$a)}J$g.prototype=J$b.prototype,J$a.prototype=new J$g,J$k.un(J$a.prototype,"__imps",J$k.__copy({},J$b.prototype.__imps))},__copy:function(J$a,J$b){if(!J$b)return null;for(var J$c in J$a=J$a||{},J$b)J$a[J$c]=J$b[J$c];return J$a},__package:function(J$a,J$b){if(!J$k.__packages[J$a]){J$k.__packages[J$a]=!0;var J$c=J$j,J$d=J$a.split(".");if(1<J$d.length)for(var J$e=0,J$f=J$d.length-1;J$e<J$f;J$e++){var J$g=J$c[J$d[J$e]];J$c=J$g||(J$c[J$d[J$e]]={})}J$c[J$d[J$d.length-1]]||(J$c[J$d[J$d.length-1]]=J$b||{})}},__hasOwnProperty:function(J$a,J$b){return J$b=J$b||this,Object.hasOwnProperty.call(J$b,J$a)||function J$a(J$b,J$c){if(Object.hasOwnProperty.call(J$c.prototype,J$b))return!0;var J$d=J$c.prototype.__super;return null==J$d?null:J$a(J$b,J$d)}(J$a,J$b.__class)},__typeof:function(J$a,J$b){if(!J$a||!J$b)return!1;if(J$b===String)return"string"==typeof J$a;if(J$b===Number)return"number"==typeof J$a;if(J$b.__interface__)J$b=J$b.__interface__;else if("string"!=typeof J$b)return J$a instanceof J$b;return J$a.__imps&&J$a.__imps[J$b]||J$a.__class==J$b},__as:function(J$a,J$b){return this.__typeof(J$a,J$b)?J$a:null},__int:function(J$a){return J$a?parseInt(J$a):0},interface:function(J$a,J$b){J$k.__package(J$a,{});var J$c=J$k.__internals,J$d=J$c[J$a]=J$c[J$a]||{self:J$a};if(J$b){var J$e=J$b.split(",");J$d.extend=[];for(var J$f=0;J$f<J$e.length;J$f++){var J$g=J$e[J$f];J$c[J$g]=J$c[J$g]||{self:J$g},J$d.extend.push(J$c[J$g])}}var J$h=J$j,J$i=J$a.split(".");for(J$f=0;J$f<J$i.length-1;J$f++)J$h=J$h[J$i[J$f]];J$h[J$i[J$i.length-1]]={__interface__:J$a}},class:function(J$a,J$b,J$c,J$d){if(J$c&&J$k.__extend(J$a,J$c),J$b)if(J$k.__package(J$b,J$a),J$k.__classmap[J$b]=J$a,0<J$b.indexOf(".")){if(0==J$b.indexOf("laya.")){var J$e=J$b.split(".");J$d=J$d||J$e[J$e.length-1],J$k[J$d]&&console.log("Warning!,this class["+J$d+"] already exist:",J$k[J$d]),J$k[J$d]=J$a}}else"Main"==J$b?J$j.Main=J$a:"MainWX"==J$b?J$j.MainWX=J$a:(J$k[J$b]&&console.log("Error!,this class["+J$b+"] already exist:",J$k[J$b]),J$k[J$b]=J$a);var J$f=J$k.un,J$g=J$a.prototype;J$f(J$g,"hasOwnProperty",J$k.__hasOwnProperty),J$f(J$g,"__class",J$a),J$f(J$g,"__super",J$c),J$f(J$g,"__className",J$b),J$f(J$a,"__super",J$c),J$f(J$a,"__className",J$b),J$f(J$a,"__isclass",!0),J$f(J$a,"super",function(J$a){this.__super.call(J$a)})},imps:function(J$a,J$b){if(!J$b)return null;var J$e=J$a.__imps||J$k.un(J$a,"__imps",{});function J$f(J$a){var J$b,J$c;if((J$b=J$k.__internals[J$a])&&(J$e[J$a]=!0,J$c=J$b.extend))for(var J$d=0;J$d<J$c.length;J$d++)J$f(J$c[J$d].self)}for(var J$c in J$b)J$f(J$c)},superSet:function(J$a,J$b,J$c,J$d){var J$e=J$a.prototype["_$set_"+J$c];J$e&&J$e.call(J$b,J$d)},superGet:function(J$a,J$b,J$c){var J$d=J$a.prototype["_$get_"+J$c];return J$d?J$d.call(J$b):null},getset:function(J$a,J$b,J$c,J$d,J$e){J$a?(J$d&&(J$b["_$GET_"+J$c]=J$d),J$e&&(J$b["_$SET_"+J$c]=J$e)):(J$d&&J$k.un(J$b,"_$get_"+J$c,J$d),J$e&&J$k.un(J$b,"_$set_"+J$c,J$e)),J$d&&J$e?Object.defineProperty(J$b,J$c,{get:J$d,set:J$e,enumerable:!1,configurable:!0}):(J$d&&Object.defineProperty(J$b,J$c,{get:J$d,enumerable:!1,configurable:!0}),J$e&&Object.defineProperty(J$b,J$c,{set:J$e,enumerable:!1,configurable:!0}))},static:function(J$c,J$d){for(var J$e=0,J$a=J$d.length;J$e<J$a;J$e+=2)if("length"==J$d[J$e])J$c.length=J$d[J$e+1].call(J$c);else{function J$b(){var J$b=J$d[J$e],J$a=J$d[J$e+1];Object.defineProperty(J$c,J$b,{get:function(){return delete this[J$b],this[J$b]=J$a.call(this)},set:function(J$a){delete this[J$b],this[J$b]=J$a},enumerable:!0,configurable:!0})}J$b()}},un:function(J$a,J$b,J$c){return J$c||(J$c=J$a[J$b]),J$k.__propun.value=J$c,Object.defineProperty(J$a,J$b,J$k.__propun),J$c},uns:function(J$b,J$a){J$a.forEach(function(J$a){J$k.un(J$b,J$a)})}};return J$j.console=J$j.console||{log:function(){}},J$j.trace=J$j.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),J$k}(window,document);!function(J$a,J$b,J$c){J$c.un,J$c.uns,J$c.static,J$c.class,J$c.getset,J$c.__newvec}(window,document,Laya),function(J$g,J$b,J$z){J$z.un,J$z.uns;var J$i=J$z.static,J$k=J$z.class,J$o=J$z.getset;J$z.__newvec;J$z.interface("laya.runtime.IMarket"),J$z.interface("laya.filters.IFilter"),J$z.interface("laya.display.ILayout"),J$z.interface("laya.resource.IDispose"),J$z.interface("laya.runtime.IPlatform"),J$z.interface("laya.resource.IDestroy"),J$z.interface("laya.runtime.IConchNode"),J$z.interface("laya.filters.IFilterAction"),J$z.interface("laya.runtime.ICPlatformClass"),J$z.interface("laya.resource.ICreateResource"),J$z.interface("laya.runtime.IConchRenderObject"),J$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var J$F=function(){function J$f(){}return J$k(J$f,"laya.utils.RunDriver"),J$f.FILTER_ACTIONS=[],J$f.pixelRatio=-1,J$f._charSizeTestDiv=null,J$f.now=function(){return Date.now()},J$f.getWindow=function(){return J$g},J$f.getPixelRatio=function(){if(J$f.pixelRatio<0){var J$a=J$O.context,J$b=J$a.backingStorePixelRatio||J$a.webkitBackingStorePixelRatio||J$a.mozBackingStorePixelRatio||J$a.msBackingStorePixelRatio||J$a.oBackingStorePixelRatio||J$a.backingStorePixelRatio||1;(J$f.pixelRatio=(J$O.window.devicePixelRatio||1)/J$b)<1&&(J$f.pixelRatio=1)}return J$f.pixelRatio},J$f.getIncludeStr=function(J$a){return null},J$f.createShaderCondition=function(J$a){var J$b="(function() {return "+J$a+";})";return J$z._runScript(J$b)},J$f.fontMap=[],J$f.measureText=function(J$a,J$b){var J$c=J$f.hanzi.test(J$a);if(J$c&&J$f.fontMap[J$b])return J$f.fontMap[J$b];var J$d=J$O.context;J$d.font=J$b;var J$e=J$d.measureText(J$a);return J$e||(J$e={width:16,height:16}),J$c&&(J$f.fontMap[J$b]=J$e),J$e},J$f.getWebGLContext=function(J$a){},J$f.beginFlush=function(){},J$f.endFinish=function(){},J$f.addToAtlas=null,J$f.flashFlushImage=function(J$a){},J$f.drawToCanvas=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$va.create("2D"),J$h=new J$K(J$c,J$d,J$g);return J$L.renders[J$b]._fun(J$a,J$h,J$e,J$f),J$g},J$f.createParticleTemplate2D=null,J$f.createGLTextur=null,J$f.createWebGLContext2D=null,J$f.changeWebGLSize=function(J$a,J$b){},J$f.createRenderSprite=function(J$a,J$b){return new J$L(J$a,J$b)},J$f.createFilterAction=function(J$a){return new J$v},J$f.createGraphics=function(){return new J$m},J$f.clear=function(J$a){J$J._context.ctx.clear()},J$f.cancelLoadByUrl=function(J$a){},J$f.clearAtlas=function(J$a){},J$f.isAtlas=function(J$a){return!1},J$f.addTextureToAtlas=function(J$a){},J$f.getTexturePixels=function(J$a,J$b,J$c,J$d,J$e){return null},J$f.skinAniSprite=function(){return null},J$f.update3DLoop=function(){},J$i(J$f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),J$f}(),J$d=(J$o(1,J$z,"alertGlobalError",null,function(J$a){var J$f=0;J$O.window.onerror=J$a?function(J$a,J$b,J$c,J$d,J$e){J$f++<5&&J$e&&alert(J$e.stack||J$e)}:null}),J$z.init=function(J$a,J$b,J$c){for(var J$d=[],J$e=2,J$f=arguments.length;J$e<J$f;J$e++)J$d.push(arguments[J$e]);if(!J$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=J$z._arrayBufferSlice),J$z._isinit=!0,J$O.__init__(),J$M.__init__(),J$m.__init__(),J$z.timer=new J$Y,J$z.scaleTimer=new J$Y,J$z.loader=new J$ia,J$s.__init__(),J$e=0;for(var J$g=J$d.length;J$e<J$g;J$e++)J$d[J$e].enable&&J$d[J$e].enable();return J$n.__init__(),J$h.__init__(),J$N.__init__(),J$Q.beginCheck(),J$z._currentStage=J$z.stage=new J$ra,J$z.stage.conchModel&&J$z.stage.conchModel.setRootNode(),J$z._getUrlPath(),J$z.render=new J$J(0,0),J$z.stage.size(J$a,J$b),J$L.__init__(),J$l.__init__(),J$p.instance.__init__(J$z.stage,J$J.canvas),J$xa.__init__(),J$E.autoStopMusic=!0,J$C.__init__(),J$J.canvas}},J$z._getUrlPath=function(){var J$a=J$O.window.location,J$b=J$a.pathname;J$b=J$b&&":"==J$b.charAt(2)?J$b.substring(1):J$b,J$I.rootPath=J$I.basePath=J$I.getPath("file:"==J$a.protocol?J$b:J$a.protocol+"//"+J$a.host+J$a.pathname)},J$z._arrayBufferSlice=function(J$a,J$b){var J$c=new Uint8Array(this,J$a,J$b-J$a),J$d=new Uint8Array(J$c.length);return J$d.set(J$c),J$d.buffer},J$z._runScript=function(J$a){return J$O.window[J$z._evcode](J$a)},J$z.stage=null,J$z.timer=null,J$z.scaleTimer=null,J$z.loader=null,J$z.version="1.8.6",J$z.render=null,J$z._currentStage=null,J$z._isinit=!1,J$z.isDebug=!1,J$z.MiniAdpter={init:function(){J$g.navigator&&J$g.navigator.userAgent&&-1<J$g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},J$i(J$z,["conchMarket",function(){return this.conchMarket=J$g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=J$g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function J$a(){}return J$k(J$a,"Config"),J$a.WebGLTextCacheCount=500,J$a.atlasEnable=!1,J$a.showCanvasMark=!1,J$a.animationInterval=50,J$a.isAntialias=!1,J$a.isAlpha=!1,J$a.premultipliedAlpha=!0,J$a.isStencil=!0,J$a.preserveDrawingBuffer=!1,J$a}()),J$j=function(){function J$j(){this._events=null}J$k(J$j,"laya.events.EventDispatcher");var J$a=J$j.prototype;return J$a.hasListener=function(J$a){return!!(this._events&&this._events[J$a])},J$a.getListener=function(J$a){return this._events?this._events[J$a]:null},J$a.event=function(J$a,J$b){if(!this._events||!this._events[J$a])return!1;var J$c=this._events[J$a];if(J$c.lock)J$c.queue||(J$c.queue=[]),J$c.queue.push(J$b);else{var J$d;for(J$c.lock=!0,J$c.cursor=J$c.head;J$c.cursor;)(J$d=J$c.cursor).recover?(J$c.head=J$c.tail=J$c.cursor=null,console.error("node is recover："+J$d.id)):(J$c.cursor=J$d.next,J$d.once&&J$j.delNode(J$c,J$d),J$d.method&&(null!=J$b?J$d.args?J$d.method.apply(J$d.caller,J$d.args.concat(J$b)):J$b instanceof Array?J$d.method.apply(J$d.caller,J$b):J$d.caller?J$d.method.call(J$d.caller,J$b):J$z.recordError("事件派发错误","node.caller:"+J$d.caller+"node.method:"+J$d.method+"data:"+J$b+"node.prev"+J$d.prev):J$d.method.apply(J$d.caller,J$d.args)),J$d.once&&J$j.recoverHandler(J$d));J$c.lock=!1,!J$c.head&&this._events&&this._events[J$a]==J$c&&delete this._events[J$a],J$c.queue&&J$c.queue.length&&this.event(J$a,J$c.queue.shift())}return!0},J$a.on=function(J$a,J$b,J$c,J$d){return this._createListener(J$a,J$b,J$c,J$d,!1)},J$a.once=function(J$a,J$b,J$c,J$d){return this._createListener(J$a,J$b,J$c,J$d,!0)},J$a._createListener=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=!0),J$f&&this.off(J$a,J$b,J$c,J$e);var J$g=J$j.createHandler(J$b||this,J$c,J$d,J$e);this._events||(this._events={});var J$h=this._events,J$i=J$h[J$a];return J$i?J$i.tail?(J$g.prev=J$i.tail,J$i.tail.next=J$g,J$i.tail=J$g):J$i.head=J$i.tail=J$g:J$h[J$a]={head:J$g,tail:J$g,cursor:null,lock:!1},this},J$a.off=function(J$a,J$b,J$c,J$d){if(void 0===J$d&&(J$d=!1),!this._events||!this._events[J$a])return this;for(var J$e=this._events[J$a],J$f=J$e.head;J$f;){if((!J$b||J$f.caller===J$b)&&J$f.method===J$c&&(!J$d||J$f.once)){J$j.delNode(J$e,J$f),J$e.cursor==J$f&&(J$e.cursor=J$f.next),J$j.recoverHandler(J$f);break}J$f=J$f.next}return this},J$a.offAll=function(J$a){var J$b=this._events;if(!J$b)return this;if(J$a)this._recoverHandlers(J$b[J$a]),delete J$b[J$a];else{for(var J$c in J$b)this._recoverHandlers(J$b[J$c]);this._events=null}return this},J$a._recoverHandlers=function(J$a){if(J$a){for(var J$b=J$a.head;J$b;){J$j.delNode(J$a,J$b);var J$c=J$b.next;J$j.recoverHandler(J$b),J$b=J$c}J$a.cursor=null}},J$a.isMouseEvent=function(J$a){return J$j.MOUSE_EVENTS[J$a]},J$j.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},J$j.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},J$j.delNode=function(J$a,J$b){J$b.prev?J$b.prev.next=J$b.next:J$a.head=J$b.next,J$b.next?J$b.next.prev=J$b.prev:J$a.tail=J$b.prev},J$j.createHandler=function(J$a,J$b,J$c,J$d){var J$e=500<J$j._freeHandler.length?J$j._freeHandler.shift():null;if(J$e)if(J$e.recover)J$e.recover=!1,J$e.caller=J$a,J$e.method=J$b,J$e.args=J$c,J$e.once=J$d;else{var J$f="";try{arguments.propertyIsEnumerable.caller}catch(J$a){J$f=J$a.stack}var J$g=J$e.caller?(J$e.caller.__proto__&&J$e.caller.__proto__.constructor&&J$e.caller.__proto__.constructor.name)+"|"+J$e.caller.__className+"|"+J$e.caller.name:"",J$h=J$e.method?J$e.method.name:"";J$z.recordError("EventDispatcher重复创建","caller="+J$g+"  method="+J$h+"  stack="+J$f),J$e={id:++J$j._nodeCount,caller:J$a,method:J$b,args:J$c,once:J$d,recover:!1}}else J$e={id:++J$j._nodeCount,caller:J$a,method:J$b,args:J$c,once:J$d,recover:!1};return J$e.prev=J$e.next=null,J$e},J$j.recoverHandler=function(J$a){if(J$a.recover){if(J$j._errorCount<5){J$j._errorCount++;var J$b="";try{arguments.propertyIsEnumerable.caller}catch(J$a){J$b=J$a.stack}var J$c=J$a.caller?(J$a.caller.__proto__&&J$a.caller.__proto__.constructor&&J$a.caller.__proto__.constructor.name)+"|"+J$a.caller.__className+"|"+J$a.caller.name:"",J$d=J$a.method?J$a.method.name:"";J$z.recordError("EventDispatcher重复回收","id="+J$a.id+"  caller="+J$c+"  method="+J$d+"  stack="+J$b)}J$a.caller=J$a.method=J$a.args=J$a.prev=null}else J$a.recover=!0,J$a.caller=J$a.method=J$a.args=J$a.prev=J$a.next=null,J$j._freeHandler&&J$j._freeHandler.length<3e3&&J$j._freeHandler.push(J$a)},J$j._freeHandler=[],J$j._nodeCount=0,J$j._errorCount=0,J$j}(),J$u=function(){function J$e(J$a,J$b,J$c,J$d){this.once=!1,void(this._id=0)===J$d&&(J$d=!1),this.setTo(J$a,J$b,J$c,J$d)}J$k(J$e,"laya.utils.Handler");var J$a=J$e.prototype;return J$a.setTo=function(J$a,J$b,J$c,J$d){return this._id=J$e._gid++,this.caller=J$a,this.method=J$b,this.args=J$c,this.once=J$d,this},J$a.run=function(){if(null==this.method)return null;var J$a=this._id,J$b=this.method.apply(this.caller,this.args);return this._id===J$a&&this.once&&this.recover(),J$b},J$a.runWith=function(J$a){if(null==this.method)return null;var J$b=this._id;if(null==J$a)var J$c=this.method.apply(this.caller,this.args);else J$c=this.args||J$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(J$a)):this.method.apply(this.caller,J$a):this.method.call(this.caller,J$a);return this._id===J$b&&this.once&&this.recover(),J$c},J$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},J$a.recover=function(){0<this._id&&(this._id=0,this.clear())},J$e.create=function(J$a,J$b,J$c,J$d){return void 0===J$d&&(J$d=!0),new J$e(J$a,J$b,J$c,J$d)},J$e._gid=1,J$e}(),J$D=function(){function J$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}J$k(J$a,"laya.display.BitmapFont");var J$b=J$a.prototype;return J$b.loadFont=function(J$a,J$b){this._path=J$a,this._complete=J$b,J$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],J$u.create(this,this.onLoaded))},J$b.onLoaded=function(){this.parseFont(J$ha.getRes(this._path),J$ha.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},J$b.parseFont=function(J$a,J$b){if(null!=J$a&&null!=J$b){this._texture=J$b;var J$c=J$a.getElementsByTagName("info");if(!J$c[0].getAttributeNode)return this.parseFont2(J$a,J$b);this.fontSize=parseInt(J$c[0].getAttributeNode("size").nodeValue);var J$d,J$e=J$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(J$e[0]),parseInt(J$e[1]),parseInt(J$e[2]),parseInt(J$e[3])],J$d=J$a.getElementsByTagName("char");var J$f=0;for(J$f=0;J$f<J$d.length;J$f++){var J$g=J$d[J$f],J$h=parseInt(J$g.getAttributeNode("id").nodeValue),J$i=parseInt(J$g.getAttributeNode("xoffset").nodeValue)/1,J$j=parseInt(J$g.getAttributeNode("yoffset").nodeValue)/1,J$k=parseInt(J$g.getAttributeNode("xadvance").nodeValue)/1,J$l=new J$B;J$l.x=parseInt(J$g.getAttributeNode("x").nodeValue),J$l.y=parseInt(J$g.getAttributeNode("y").nodeValue),J$l.width=parseInt(J$g.getAttributeNode("width").nodeValue),J$l.height=parseInt(J$g.getAttributeNode("height").nodeValue);var J$m=J$ka.create(J$b,J$l.x,J$l.y,J$l.width,J$l.height,J$i,J$j);this._maxWidth=Math.max(this._maxWidth,J$k+this.letterSpacing),this._fontCharDic[J$h]=J$m,this._fontWidthMap[J$h]=J$k}}},J$b.parseFont2=function(J$a,J$b){if(null!=J$a&&null!=J$b){this._texture=J$b;var J$c=J$a.getElementsByTagName("info");this.fontSize=parseInt(J$c[0].attributes.size.nodeValue);var J$d=J$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(J$d[0]),parseInt(J$d[1]),parseInt(J$d[2]),parseInt(J$d[3])];var J$e=J$a.getElementsByTagName("char"),J$f=0;for(J$f=0;J$f<J$e.length;J$f++){var J$g=J$e[J$f].attributes,J$h=parseInt(J$g.id.nodeValue),J$i=parseInt(J$g.xoffset.nodeValue)/1,J$j=parseInt(J$g.yoffset.nodeValue)/1,J$k=parseInt(J$g.xadvance.nodeValue)/1,J$l=new J$B;J$l.x=parseInt(J$g.x.nodeValue),J$l.y=parseInt(J$g.y.nodeValue),J$l.width=parseInt(J$g.width.nodeValue),J$l.height=parseInt(J$g.height.nodeValue);var J$m=J$ka.create(J$b,J$l.x,J$l.y,J$l.width,J$l.height,J$i,J$j);this._maxWidth=Math.max(this._maxWidth,J$k+this.letterSpacing),this._fontCharDic[J$h]=J$m,this._fontWidthMap[J$h]=J$k}}},J$b.getCharTexture=function(J$a){return this._fontCharDic[J$a.charCodeAt(0)]},J$b.destroy=function(){if(this._texture){for(var J$a in this._fontCharDic){var J$b=this._fontCharDic[J$a];J$b&&J$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},J$b.setSpaceWidth=function(J$a){this._spaceWidth=J$a},J$b.getCharWidth=function(J$a){var J$b=J$a.charCodeAt(0);return this._fontWidthMap[J$b]?this._fontWidthMap[J$b]+this.letterSpacing:" "==J$a?this._spaceWidth+this.letterSpacing:0},J$b.getTextWidth=function(J$a){for(var J$b=0,J$c=0,J$d=J$a.length;J$c<J$d;J$c++)J$b+=this.getCharWidth(J$a.charAt(J$c));return J$b},J$b.getMaxWidth=function(){return this._maxWidth},J$b.getMaxHeight=function(){return this.fontSize},J$b.drawText=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h=this.getTextWidth(J$a),J$i=0;"center"===J$e&&(J$i=(J$f-J$h)/2),"right"===J$e&&(J$i=J$f-J$h);for(var J$j=0,J$k=0,J$l=J$a.length;J$k<J$l;J$k++)(J$g=this.getCharTexture(J$a.charAt(J$k)))&&(J$b.graphics.drawTexture(J$g,J$c+J$j+J$i,J$d),J$j+=this.getCharWidth(J$a.charAt(J$k)))},J$a}(),J$h=function(){function J$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=J$c._TF_EMPTY}J$k(J$c,"laya.display.css.Style");var J$a=J$c.prototype;return J$a.getTransform=function(){return this._tf},J$a.setTransform=function(J$a){this._tf="none"!==J$a&&J$a?J$a:J$c._TF_EMPTY},J$a.setTranslateX=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.translateX=J$a},J$a.setTranslateY=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.translateY=J$a},J$a.setScaleX=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.scaleX=J$a},J$a.setScale=function(J$a,J$b){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.scaleX=J$a,this._tf.scaleY=J$b},J$a.setScaleY=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.scaleY=J$a},J$a.setRotate=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.rotate=J$a},J$a.setSkewX=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.skewX=J$a},J$a.setSkewY=function(J$a){this._tf===J$c._TF_EMPTY&&(this._tf=new J$e),this._tf.skewY=J$a},J$a.destroy=function(){this.scrollRect=null},J$a.render=function(J$a,J$b,J$c,J$d){},J$a.getCSSStyle=function(){return J$ba.EMPTY},J$a._enableLayout=function(){return!1},J$o(0,J$a,"scaleX",function(){return this._tf.scaleX},function(J$a){this.setScaleX(J$a)}),J$o(0,J$a,"transform",function(){return this.getTransform()},function(J$a){this.setTransform(J$a)}),J$o(0,J$a,"translateX",function(){return this._tf.translateX},function(J$a){this.setTranslateX(J$a)}),J$o(0,J$a,"translateY",function(){return this._tf.translateY},function(J$a){this.setTranslateY(J$a)}),J$o(0,J$a,"scaleY",function(){return this._tf.scaleY},function(J$a){this.setScaleY(J$a)}),J$o(0,J$a,"block",function(){return 0!=(1&this._type)}),J$o(0,J$a,"skewY",function(){return this._tf.skewY},function(J$a){this.setSkewY(J$a)}),J$o(0,J$a,"rotate",function(){return this._tf.rotate},function(J$a){this.setRotate(J$a)}),J$o(0,J$a,"skewX",function(){return this._tf.skewX},function(J$a){this.setSkewX(J$a)}),J$o(0,J$a,"paddingLeft",function(){return 0}),J$o(0,J$a,"paddingTop",function(){return 0}),J$o(0,J$a,"absolute",function(){return!0}),J$c.__init__=function(){J$c._TF_EMPTY=new J$e,J$c.EMPTY=new J$c},J$c.EMPTY=null,J$c._TF_EMPTY=null,J$c}(),J$n=function(){function J$b(J$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=J$S.create(J$b.defaultColor),this.family=J$b.defaultFamily,this.stroke=J$b._STROKE,this.size=J$b.defaultSize,J$a&&J$a!==J$b.EMPTY&&J$a.copyTo(this)}J$k(J$b,"laya.display.css.Font");var J$a=J$b.prototype;return J$a.set=function(J$a){this._text=null;for(var J$b=J$a.split(" "),J$c=0,J$d=J$b.length;J$c<J$d;J$c++){var J$e=J$b[J$c];switch(J$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<J$e.indexOf("px")&&(this.size=parseInt(J$e),this.family=J$b[J$c+1],J$c++)}},J$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},J$a.copyTo=function(J$a){J$a._type=this._type,J$a._text=this._text,J$a._weight=this._weight,J$a._color=this._color,J$a.family=this.family,J$a.stroke=this.stroke!=J$b._STROKE?this.stroke.slice():J$b._STROKE,J$a.indent=this.indent,J$a.size=this.size},J$o(0,J$a,"password",function(){return 0!=(1024&this._type)},function(J$a){J$a?this._type|=1024:this._type&=-1025}),J$o(0,J$a,"color",function(){return this._color.strColor},function(J$a){this._color=J$S.create(J$a)}),J$o(0,J$a,"italic",function(){return 0!=(512&this._type)},function(J$a){J$a?this._type|=512:this._type&=-513}),J$o(0,J$a,"bold",function(){return 0!=(2048&this._type)},function(J$a){J$a?this._type|=2048:this._type&=-2049}),J$o(0,J$a,"weight",function(){return""+this._weight},function(J$a){var J$b=0;switch(J$a){case"normal":break;case"bold":this.bold=!0,J$b=700;break;case"bolder":J$b=800;break;case"lighter":J$b=100;break;default:J$b=parseInt(J$a)}this._weight=J$b,this._text=null}),J$o(0,J$a,"decoration",function(){return this._decoration?this._decoration.value:null},function(J$a){var J$b=J$a.split(" ");switch(this._decoration||(this._decoration={}),J$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=J$b[0]}J$b[1]&&(this._decoration.color=J$S.create(J$b)),this._decoration.value=J$a}),J$b.__init__=function(){J$b.EMPTY=new J$b(null)},J$b.EMPTY=null,J$b.defaultColor="#000000",J$b.defaultSize=12,J$b.defaultFamily="Arial",J$b.defaultFont="12px Arial",J$b._STROKE=[0,"#000000"],J$b._ITALIC=512,J$b._PASSWORD=1024,J$b._BOLD=2048,J$b}(),J$e=function(){function J$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return J$k(J$a,"laya.display.css.TransformInfo"),J$a}(),J$m=function(){function J$l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,J$J.isConchNode){this._nativeObj=new J$g._conchGraphics,this.id=this._nativeObj.conchID}}J$k(J$l,"laya.display.Graphics");var J$a=J$l.prototype;return J$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},J$a.clear=function(J$a){void 0===J$a&&(J$a=!1);var J$b=0,J$c=0;if(J$a){var J$d=this._one;if(this._cmds){for(J$c=this._cmds.length,J$b=0;J$b<J$c;J$b++)!(J$d=this._cmds[J$b])||J$d.callee!==J$J._context._drawTexture&&J$d.callee!==J$J._context._drawTextureWithTransform||(J$d[0]=null,J$l._cache.push(J$d));this._cmds.length=0}else J$d&&(!J$d||J$d.callee!==J$J._context._drawTexture&&J$d.callee!==J$J._context._drawTextureWithTransform||(J$d[0]=null,J$l._cache.push(J$d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(J$b=0,J$c=this._vectorgraphArray.length;J$b<J$c;J$b++)J$_.getInstance().deleteShape(this._vectorgraphArray[J$b]);this._vectorgraphArray.length=0}},J$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},J$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new J$c,this._graphicBounds._graphics=this)},J$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},J$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},J$a.getBounds=function(J$a){return void 0===J$a&&(J$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(J$a)},J$a.getBoundPoints=function(J$a){return void 0===J$a&&(J$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(J$a)},J$a._addCmd=function(J$a){this._cmds=this._cmds||[],J$a.callee=J$a.shift(),this._cmds.push(J$a)},J$a.setFilters=function(J$a){this._saveToCmd(J$J._context._setFilters,J$a)},J$a.drawTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$g&&(J$g=1),!J$a||J$g<.01)return null;J$d||(J$d=J$a.sourceWidth),J$e||(J$e=J$a.sourceHeight),J$g=J$g<0?0:1<J$g?1:J$g;var J$h,J$i=!J$J.isWebGL&&(J$O.onFirefox||J$O.onEdge||J$O.onIE||J$O.onSafari)?.5:0,J$j=J$d/J$a.sourceWidth,J$k=J$e/J$a.sourceHeight;return J$d=J$a.width*J$j,J$e=J$a.height*J$k,J$a.loaded&&(J$d<=0||J$e<=0)?null:(J$b+=J$a.offsetX*J$j,J$c+=J$a.offsetY*J$k,this._sp&&(this._sp._renderType|=512),J$b-=J$i,J$c-=J$i,J$d+=2*J$i,J$e+=2*J$i,J$l._cache.length?((J$h=J$l._cache.pop())[0]=J$a,J$h[1]=J$b,J$h[2]=J$c,J$h[3]=J$d,J$h[4]=J$e,J$h[5]=J$f,J$h[6]=J$g):J$h=[J$a,J$b,J$c,J$d,J$e,J$f,J$g],J$h.callee=J$f||1!=J$g?J$J._context._drawTextureWithTransform:J$J._context._drawTexture,null!=this._one||J$f||1!=J$g?this._saveToCmd(J$h.callee,J$h):(this._one=J$h,this._render=this._renderOneImg),J$a.loaded||J$a.once("loaded",this,this._textureLoaded,[J$a,J$h]),this._repaint(),J$h)},J$a.cleanByTexture=function(J$a,J$b,J$c,J$d,J$e){if(void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),!J$a)return this.clear();if(this._one&&this._render===this._renderOneImg){J$d||(J$d=J$a.sourceWidth),J$e||(J$e=J$a.sourceHeight);var J$f=J$d/J$a.sourceWidth,J$g=J$e/J$a.sourceHeight;J$d=J$a.width*J$f,J$e=J$a.height*J$g,J$b+=J$a.offsetX*J$f,J$c+=J$a.offsetY*J$g,this._one[0]=J$a,this._one[1]=J$b,this._one[2]=J$c,this._one[3]=J$d,this._one[4]=J$e,this._repaint()}else this.clear(),J$a&&this.drawTexture(J$a,J$b,J$c,J$d,J$e)},J$a.drawTextures=function(J$a,J$b){J$a&&this._saveToCmd(J$J._context._drawTextures,[J$a,J$b])},J$a.fillTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f="repeat"),J$a){var J$h=[J$a,J$b,J$c,J$d,J$e,J$f,J$g||J$A.EMPTY,{}];J$a.loaded||J$a.once("loaded",this,this._textureLoaded,[J$a,J$h]),this._saveToCmd(J$J._context._fillTexture,J$h)}},J$a._textureLoaded=function(J$a,J$b){J$b[3]=J$b[3]||J$a.width,J$b[4]=J$b[4]||J$a.height,this._repaint()},J$a.fillCircle=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$c.bitmap.enableMerageInAtlas=!1;var J$h=new Float32Array(2*(J$g+1)),J$i=new Float32Array(2*(J$g+1)),J$j=new Uint16Array(3*J$g),J$k=2*Math.PI/J$g,J$l=0;J$h[0]=J$d,J$h[1]=J$e,J$i[0]=J$d/J$c.width,J$i[1]=J$e/J$c.height;for(var J$m=2,J$n=0;J$n<J$g;J$n++){var J$o=J$f*Math.cos(J$l)+J$d,J$p=J$f*Math.sin(J$l)+J$e;J$h[J$m]=J$o,J$h[J$m+1]=J$p,J$i[J$m]=J$o/J$c.width,J$i[J$m+1]=J$p/J$c.height,J$l+=J$k,J$m+=2}for(J$n=J$m=0;J$n<J$g;J$n++)J$j[J$m++]=0,J$j[J$m++]=J$n+1,J$j[J$m++]=J$g+1<=J$n+2?1:J$n+2;this.drawTriangles(J$c,J$a,J$b,J$h,J$i,J$j)},J$a.drawTriangles=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){void 0===J$h&&(J$h=1),this._saveToCmd(J$J._context.drawTriangles,[J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j])},J$a._saveToCmd=function(J$a,J$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=J$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(J$b)),J$b.callee=J$a,this._repaint(),J$b},J$a.clipRect=function(J$a,J$b,J$c,J$d){this._saveToCmd(J$J._context._clipRect,[J$a,J$b,J$c,J$d])},J$a.fillText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){void 0===J$g&&(J$g=0),this._saveToCmd(J$J._context._fillText,[J$a,J$b,J$c,J$d||J$n.defaultFont,J$e,J$f])},J$a.fillBorderText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){this._saveToCmd(J$J._context._fillBorderText,[J$a,J$b,J$c,J$d||J$n.defaultFont,J$e,J$f,J$g,J$h])},J$a.strokeText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._saveToCmd(J$J._context._strokeText,[J$a,J$b,J$c,J$d||J$n.defaultFont,J$e,J$f,J$g])},J$a.alpha=function(J$a){J$a=J$a<0?0:1<J$a?1:J$a,this._saveToCmd(J$J._context._alpha,[J$a])},J$a.setAlpha=function(J$a){J$a=J$a<0?0:1<J$a?1:J$a,this._saveToCmd(J$J._context._setAlpha,[J$a])},J$a.transform=function(J$a,J$b,J$c){void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),this._saveToCmd(J$J._context._transform,[J$a,J$b,J$c])},J$a.rotate=function(J$a,J$b,J$c){void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),this._saveToCmd(J$J._context._rotate,[J$a,J$b,J$c])},J$a.scale=function(J$a,J$b,J$c,J$d){void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),this._saveToCmd(J$J._context._scale,[J$a,J$b,J$c,J$d])},J$a.translate=function(J$a,J$b){this._saveToCmd(J$J._context._translate,[J$a,J$b])},J$a.save=function(){this._saveToCmd(J$J._context._save,[])},J$a.restore=function(){this._saveToCmd(J$J._context._restore,[])},J$a.replaceText=function(J$a){this._repaint();var J$b=this._cmds;if(J$b){for(var J$c=J$b.length-1;-1<J$c;J$c--)if(this._isTextCmd(J$b[J$c].callee))return J$b[J$c][0].toUpperCase?J$b[J$c][0]=J$a:J$b[J$c][0].setText(J$a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=J$a:this._one[0].setText(J$a),!0;return!1},J$a._isTextCmd=function(J$a){return J$a===J$J._context._fillText||J$a===J$J._context._fillBorderText||J$a===J$J._context._strokeText},J$a.replaceTextColor=function(J$a){this._repaint();var J$b=this._cmds;if(J$b)for(var J$c=J$b.length-1;-1<J$c;J$c--)this._isTextCmd(J$b[J$c].callee)&&(J$b[J$c][4]=J$a,J$b[J$c][0].toUpperCase||(J$b[J$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=J$a,this._one[0].toUpperCase||(this._one[0].changed=!0))},J$a.loadImage=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=this;void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0);var J$h=J$ha.getRes(J$a);function J$i(J$a){J$a&&(J$g.drawTexture(J$a,J$b,J$c,J$d,J$e),null!=J$f&&J$f.call(J$g._sp,J$a))}J$h?J$i(J$h):J$z.loader.load(J$a,J$u.create(null,J$i),null,"image")},J$a._renderEmpty=function(J$a,J$b,J$c,J$d){},J$a._renderAll=function(J$a,J$b,J$c,J$d){for(var J$e,J$f=this._cmds,J$g=0,J$h=J$f.length;J$g<J$h;J$g++)(J$e=J$f[J$g]).callee.call(J$b,J$c,J$d,J$e)},J$a._renderOne=function(J$a,J$b,J$c,J$d){this._one.callee.call(J$b,J$c,J$d,this._one)},J$a._renderOneImg=function(J$a,J$b,J$c,J$d){this._one.callee.call(J$b,J$c,J$d,this._one),2305!==J$a._renderType&&(J$a._renderType|=1)},J$a.drawLine=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=1);var J$g=0;J$J.isWebGL&&(J$g=J$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J$g));var J$h=J$f%2==0?0:.5,J$i=[J$a+J$h,J$b+J$h,J$c+J$h,J$d+J$h,J$e,J$f,J$g];this._saveToCmd(J$J._context._drawLine,J$i)},J$a.drawLines=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=1);var J$f=0;if(J$c&&!(J$c.length<4)){J$J.isWebGL&&(J$f=J$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J$f));var J$g=J$e%2==0?0:.5,J$h=[J$a+J$g,J$b+J$g,J$c,J$d,J$e,J$f];this._saveToCmd(J$J._context._drawLines,J$h)}},J$a.drawCurves=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=1);var J$f=[J$a,J$b,J$c,J$d,J$e];this._saveToCmd(J$J._context._drawCurves,J$f)},J$a.drawRect=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){void 0===J$g&&(J$g=1);var J$h=J$f?J$g/2:0,J$i=J$f?J$g:0,J$j=[J$a+J$h,J$b+J$h,J$c-J$i,J$d-J$i,J$e,J$f,J$g];this._saveToCmd(J$J._context._drawRect,J$j)},J$a.drawCircle=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=1);var J$g=J$e?J$f/2:0,J$h=0;J$J.isWebGL&&(J$h=J$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J$h));var J$i=[J$a,J$b,J$c-J$g,J$d,J$e,J$f,J$h];this._saveToCmd(J$J._context._drawCircle,J$i)},J$a.drawPie=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){void 0===J$h&&(J$h=1);var J$i=J$g?J$h/2:0,J$j=J$g?J$h:0,J$k=0;J$J.isWebGL&&(J$k=J$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J$k));var J$l=[J$a+J$i,J$b+J$i,J$c-J$j,J$d,J$e,J$f,J$g,J$h,J$k];J$l[3]=J$$.toRadian(J$d),J$l[4]=J$$.toRadian(J$e),this._saveToCmd(J$J._context._drawPie,J$l)},J$a.drawPoly=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=1);var J$g=0,J$h=!1;J$J.isWebGL&&(J$g=J$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(J$g),J$h=!(6<J$c.length));var J$i=J$e?J$f%2==0?0:.5:0,J$j=[J$a+J$i,J$b+J$i,J$c,J$d,J$e,J$f,J$g,J$h];this._saveToCmd(J$J._context._drawPoly,J$j)},J$a.drawPath=function(J$a,J$b,J$c,J$d,J$e){var J$f=[J$a,J$b,J$c,J$d,J$e];this._saveToCmd(J$J._context._drawPath,J$f)},J$o(0,J$a,"cmds",function(){return this._cmds},function(J$a){this._sp&&(this._sp._renderType|=512),this._cmds=J$a,this._render=this._renderAll,this._repaint()}),J$l.__init__=function(){if(J$J.isConchNode){for(var J$a=laya.display.Graphics.prototype,J$b=J$O.window.ConchGraphics.prototype,J$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],J$d=0,J$e=J$c.length;J$d<=J$e;J$d++){var J$f=J$c[J$d];J$a[J$f]=J$b[J$f]}J$a._saveToCmd=null,J$b.drawImageS&&(J$a.drawTextures=function(J$a,J$b){if(J$a&&J$a.loaded&&J$a.bitmap&&J$a.source){var J$c=J$a.uv,J$d=J$a.bitmap.width,J$e=J$a.bitmap.height;this.drawImageS(J$a.bitmap.source,J$c[0]*J$d,J$c[1]*J$e,(J$c[2]-J$c[0])*J$d,(J$c[5]-J$c[3])*J$e,J$a.offsetX,J$a.offsetY,J$a.width,J$a.height,J$b)}}),J$a.drawTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$g&&(J$g=1),J$a)if(J$a.loaded){if(J$a.loaded&&J$a.bitmap&&J$a.source&&(J$d||(J$d=J$a.sourceWidth),J$e||(J$e=J$a.sourceHeight),J$g=J$g<0?0:1<J$g?1:J$g,J$d=J$d-J$a.sourceWidth+J$a.width,J$e=J$e-J$a.sourceHeight+J$a.height,!(J$d<=0||J$e<=0))){J$b+=J$a.offsetX,J$c+=J$a.offsetY;var J$h=J$a.uv,J$i=J$a.bitmap.width,J$j=J$a.bitmap.height;J$h[4]<J$h[0]&&J$h[5]<J$h[1]?this.drawImageM(J$a.bitmap.source,J$h[4]*J$i,J$h[5]*J$j,(J$h[0]-J$h[4])*J$i,(J$h[1]-J$h[5])*J$j,J$b,J$c,J$d,J$e,J$f,J$g):this.drawImageM(J$a.bitmap.source,J$h[0]*J$i,J$h[1]*J$j,(J$h[2]-J$h[0])*J$i,(J$h[5]-J$h[3])*J$j,J$b,J$c,J$d,J$e,J$f,J$g),this._repaint()}}else J$a.once("loaded",this,function(){this.drawTexture(J$a,J$b,J$c,J$d,J$e,J$f)})},J$a.fillTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f="repeat"),J$a&&J$a.loaded){var J$h,J$i=J$J._context.ctx,J$j=J$a.bitmap.width,J$k=J$a.bitmap.height,J$l=J$a.uv;J$h=J$a.uv!=J$ka.DEF_UV?J$i.createPattern(J$a.bitmap.source,J$f,J$l[0]*J$j,J$l[1]*J$k,(J$l[2]-J$l[0])*J$j,(J$l[5]-J$l[3])*J$k):J$i.createPattern(J$a.bitmap.source,J$f);var J$m=0,J$n=0;J$g&&(J$b+=J$g.x%J$a.width,J$c+=J$g.y%J$a.height,J$m-=J$g.x%J$a.width,J$n-=J$g.y%J$a.height),this._fillImage(J$h,J$b,J$c,J$m,J$n,J$d,J$e)}}}},J$l._cache=[],J$l}(),J$c=function(){function J$v(){this._cacheBoundsType=!1}J$k(J$v,"laya.display.GraphicsBounds");var J$a=J$v.prototype;return J$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},J$a.reset=function(){this._temp&&(this._temp.length=0)},J$a.getBounds=function(J$a){return void 0===J$a&&(J$a=!1),(!this._bounds||!this._temp||this._temp.length<1||J$a!=this._cacheBoundsType)&&(this._bounds=J$B._getWrapRec(this.getBoundPoints(J$a),this._bounds)),this._cacheBoundsType=J$a,this._bounds},J$a.getBoundPoints=function(J$a){return void 0===J$a&&(J$a=!1),(!this._temp||this._temp.length<1||J$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(J$a)),this._cacheBoundsType=J$a,this._rstBoundPoints=J$$.copyArray(this._rstBoundPoints,this._temp)},J$a._getCmdPoints=function(J$a){void 0===J$a&&(J$a=!1);var J$b,J$c,J$d=J$J._context,J$e=this._graphics.cmds;if((J$b=this._temp||(this._temp=[])).length=0,J$e||null==this._graphics._one||(J$v._tempCmds.length=0,J$v._tempCmds.push(this._graphics._one),J$e=J$v._tempCmds),!J$e)return J$b;(J$c=J$v._tempMatrixArrays).length=0;var J$f=J$v._initMatrix;J$f.identity();for(var J$g,J$h,J$i=J$v._tempMatrix,J$j=NaN,J$k=NaN,J$l=NaN,J$m=NaN,J$n=NaN,J$o=NaN,J$p=0,J$q=J$e.length;J$p<J$q;J$p++)if((J$g=J$e[J$p]).callee)switch(J$g.callee){case J$d._save:case 7:J$c.push(J$f),J$f=J$f.clone();break;case J$d._restore:case 8:J$f=J$c.pop();break;case J$d._scale:case 5:J$i.identity(),J$i.translate(-J$g[2],-J$g[3]),J$i.scale(J$g[0],J$g[1]),J$i.translate(J$g[2],J$g[3]),this._switchMatrix(J$f,J$i);break;case J$d._rotate:case 3:J$i.identity(),J$i.translate(-J$g[1],-J$g[2]),J$i.rotate(J$g[0]),J$i.translate(J$g[1],J$g[2]),this._switchMatrix(J$f,J$i);break;case J$d._translate:case 6:J$i.identity(),J$i.translate(J$g[0],J$g[1]),this._switchMatrix(J$f,J$i);break;case J$d._transform:case 4:J$i.identity(),J$i.translate(-J$g[1],-J$g[2]),J$i.concat(J$g[0]),J$i.translate(J$g[1],J$g[2]),this._switchMatrix(J$f,J$i);break;case 16:case 24:J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[0],J$g[1],J$g[2],J$g[3]),J$f);break;case 17:J$f.copyTo(J$i),J$i.concat(J$g[4]),J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[0],J$g[1],J$g[2],J$g[3]),J$i);break;case J$d._drawTexture:J$h=J$g[0],J$a?J$g[3]&&J$g[4]?J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$g[3],J$g[4]),J$f):(J$h=J$g[0],J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$h.width,J$h.height),J$f)):(J$j=(J$g[3]||J$h.sourceWidth)/J$h.width,J$k=(J$g[4]||J$h.sourceHeight)/J$h.height,J$l=J$j*J$h.sourceWidth,J$m=J$k*J$h.sourceHeight,J$n=0<J$h.offsetX?J$h.offsetX:0,J$o=0<J$h.offsetY?J$h.offsetY:0,J$n*=J$j,J$o*=J$k,J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1]-J$n,J$g[2]-J$o,J$l,J$m),J$f));break;case J$d._fillTexture:J$g[3]&&J$g[4]?J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$g[3],J$g[4]),J$f):(J$h=J$g[0],J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$h.width,J$h.height),J$f));break;case J$d._drawTextureWithTransform:var J$r;J$r=J$g[5]?(J$f.copyTo(J$i),J$i.concat(J$g[5]),J$i):J$f,J$a?J$g[3]&&J$g[4]?J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$g[3],J$g[4]),J$r):(J$h=J$g[0],J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1],J$g[2],J$h.width,J$h.height),J$r)):(J$h=J$g[0],J$j=(J$g[3]||J$h.sourceWidth)/J$h.width,J$k=(J$g[4]||J$h.sourceHeight)/J$h.height,J$l=J$j*J$h.sourceWidth,J$m=J$k*J$h.sourceHeight,J$n=0<J$h.offsetX?J$h.offsetX:0,J$o=0<J$h.offsetY?J$h.offsetY:0,J$n*=J$j,J$o*=J$k,J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[1]-J$n,J$g[2]-J$o,J$l,J$m),J$r));break;case J$d._drawRect:case 13:J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[0],J$g[1],J$g[2],J$g[3]),J$f);break;case J$d._drawCircle:case J$d._fillCircle:case 14:J$v._addPointArrToRst(J$b,J$B._getBoundPointS(J$g[0]-J$g[2],J$g[1]-J$g[2],J$g[2]+J$g[2],J$g[2]+J$g[2]),J$f);break;case J$d._drawLine:case 20:J$v._tempPoints.length=0;var J$u;J$u=.5*J$g[5],J$g[0]==J$g[2]?J$v._tempPoints.push(J$g[0]+J$u,J$g[1],J$g[2]+J$u,J$g[3],J$g[0]-J$u,J$g[1],J$g[2]-J$u,J$g[3]):J$g[1]==J$g[3]?J$v._tempPoints.push(J$g[0],J$g[1]+J$u,J$g[2],J$g[3]+J$u,J$g[0],J$g[1]-J$u,J$g[2],J$g[3]-J$u):J$v._tempPoints.push(J$g[0],J$g[1],J$g[2],J$g[3]),J$v._addPointArrToRst(J$b,J$v._tempPoints,J$f);break;case J$d._drawCurves:case 22:J$v._addPointArrToRst(J$b,J$w.I.getBezierPoints(J$g[2]),J$f,J$g[0],J$g[1]);break;case J$d._drawPoly:case J$d._drawLines:case 18:J$v._addPointArrToRst(J$b,J$g[2],J$f,J$g[0],J$g[1]);break;case J$d._drawPath:case 19:J$v._addPointArrToRst(J$b,this._getPathPoints(J$g[2]),J$f,J$g[0],J$g[1]);break;case J$d._drawPie:case 15:J$v._addPointArrToRst(J$b,this._getPiePoints(J$g[0],J$g[1],J$g[2],J$g[3],J$g[4]),J$f)}return 200<J$b.length?J$b=J$$.copyArray(J$b,J$B._getWrapRec(J$b)._getBoundPoints()):8<J$b.length&&(J$b=J$x.scanPList(J$b)),J$b},J$a._switchMatrix=function(J$a,J$b){J$b.concat(J$a),J$b.copyTo(J$a)},J$a._getPiePoints=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$v._tempPoints;J$v._tempPoints.length=0,J$f.push(J$a,J$b);var J$g=(J$e-J$d)%(2*Math.PI)/10,J$h=NaN,J$i=J$d;for(J$h=0;J$h<=10;J$h++)J$f.push(J$a+J$c*Math.cos(J$i),J$b+J$c*Math.sin(J$i)),J$i+=J$g;return J$f},J$a._getPathPoints=function(J$a){var J$b,J$c,J$d=0,J$e=J$v._tempPoints;for(J$e.length=0,J$b=J$a.length,J$d=0;J$d<J$b;J$d++)1<(J$c=J$a[J$d]).length&&(J$e.push(J$c[1],J$c[2]),3<J$c.length&&J$e.push(J$c[3],J$c[4]));return J$e},J$v._addPointArrToRst=function(J$a,J$b,J$c,J$d,J$e){void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0);var J$f,J$g=0;for(J$f=J$b.length,J$g=0;J$g<J$f;J$g+=2)J$v._addPointToRst(J$a,J$b[J$g]+J$d,J$b[J$g+1]+J$e,J$c)},J$v._addPointToRst=function(J$a,J$b,J$c,J$d){var J$e=J$A.TEMP;J$e.setTo(J$b||0,J$c||0),J$d.transformPoint(J$e),J$a.push(J$e.x,J$e.y)},J$v._tempPoints=[],J$v._tempMatrixArrays=[],J$v._tempCmds=[],J$i(J$v,["_tempMatrix",function(){return this._tempMatrix=new J$G},"_initMatrix",function(){return this._initMatrix=new J$G}]),J$v}(),J$f=function(){function J$a(){}J$k(J$a,"laya.events.Event");var J$b=J$a.prototype;return J$b.setTo=function(J$a,J$b,J$c){return this.type=J$a,this.currentTarget=J$b,this.target=J$c,this},J$b.stopPropagation=function(){this._stoped=!0},J$o(0,J$b,"stageY",function(){return J$z.stage.mouseY}),J$o(0,J$b,"charCode",function(){return this.nativeEvent.charCode}),J$o(0,J$b,"touches",function(){var J$a=this.nativeEvent.touches;if(J$a)for(var J$b=J$z.stage,J$c=0,J$d=J$a.length;J$c<J$d;J$c++){var J$e=J$a[J$c],J$f=J$A.TEMP;J$f.setTo(J$e.clientX,J$e.clientY),J$b._canvasTransform.invertTransformPoint(J$f),J$b.transform.invertTransformPoint(J$f),J$e.stageX=J$f.x,J$e.stageY=J$f.y}return J$a}),J$o(0,J$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),J$o(0,J$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),J$o(0,J$b,"altKey",function(){return this.nativeEvent.altKey}),J$o(0,J$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),J$o(0,J$b,"stageX",function(){return J$z.stage.mouseX}),J$a.EMPTY=new J$a,J$a.MOUSE_DOWN="mousedown",J$a.MOUSE_UP="mouseup",J$a.CLICK="click",J$a.RIGHT_MOUSE_DOWN="rightmousedown",J$a.RIGHT_MOUSE_UP="rightmouseup",J$a.RIGHT_CLICK="rightclick",J$a.MOUSE_MOVE="mousemove",J$a.MOUSE_OVER="mouseover",J$a.MOUSE_OUT="mouseout",J$a.MOUSE_WHEEL="mousewheel",J$a.ROLL_OVER="mouseover",J$a.ROLL_OUT="mouseout",J$a.DOUBLE_CLICK="doubleclick",J$a.CHANGE="change",J$a.CHANGED="changed",J$a.RESIZE="resize",J$a.ADDED="added",J$a.REMOVED="removed",J$a.DISPLAY="display",J$a.UNDISPLAY="undisplay",J$a.ERROR="error",J$a.COMPLETE="complete",J$a.LOADED="loaded",J$a.INITED="inited",J$a.PROGRESS="progress",J$a.INPUT="input",J$a.RENDER="render",J$a.OPEN="open",J$a.MESSAGE="message",J$a.CLOSE="close",J$a.KEY_DOWN="keydown",J$a.KEY_PRESS="keypress",J$a.KEY_UP="keyup",J$a.FRAME="enterframe",J$a.DRAG_START="dragstart",J$a.DRAG_MOVE="dragmove",J$a.DRAG_END="dragend",J$a.ENTER="enter",J$a.SELECT="select",J$a.BLUR="blur",J$a.FOCUS="focus",J$a.VISIBILITY_CHANGE="visibilitychange",J$a.FOCUS_CHANGE="focuschange",J$a.PLAYED="played",J$a.PAUSED="paused",J$a.STOPPED="stopped",J$a.START="start",J$a.END="end",J$a.ENABLE_CHANGED="enablechanged",J$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",J$a.COMPONENT_ADDED="componentadded",J$a.COMPONENT_REMOVED="componentremoved",J$a.LAYER_CHANGED="layerchanged",J$a.HIERARCHY_LOADED="hierarchyloaded",J$a.RECOVERED="recovered",J$a.RELEASED="released",J$a.LINK="link",J$a.LABEL="label",J$a.FULL_SCREEN_CHANGE="fullscreenchange",J$a.DEVICE_LOST="devicelost",J$a.MESH_CHANGED="meshchanged",J$a.MATERIAL_CHANGED="materialchanged",J$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",J$a.ANIMATION_CHANGED="animationchanged",J$a.TRIGGER_ENTER="triggerenter",J$a.TRIGGER_STAY="triggerstay",J$a.TRIGGER_EXIT="triggerexit",J$a.TRAIL_FILTER_CHANGE="trailfilterchange",J$a.DOMINO_FILTER_CHANGE="dominofilterchange",J$a}(),J$l=(function(){function J$a(){}J$k(J$a,"laya.events.Keyboard"),J$a.NUMBER_0=48,J$a.NUMBER_1=49,J$a.NUMBER_2=50,J$a.NUMBER_3=51,J$a.NUMBER_4=52,J$a.NUMBER_5=53,J$a.NUMBER_6=54,J$a.NUMBER_7=55,J$a.NUMBER_8=56,J$a.NUMBER_9=57,J$a.A=65,J$a.B=66,J$a.C=67,J$a.D=68,J$a.E=69,J$a.F=70,J$a.G=71,J$a.H=72,J$a.I=73,J$a.J=74,J$a.K=75,J$a.L=76,J$a.M=77,J$a.N=78,J$a.O=79,J$a.P=80,J$a.Q=81,J$a.R=82,J$a.S=83,J$a.T=84,J$a.U=85,J$a.V=86,J$a.W=87,J$a.X=88,J$a.Y=89,J$a.Z=90,J$a.F1=112,J$a.F2=113,J$a.F3=114,J$a.F4=115,J$a.F5=116,J$a.F6=117,J$a.F7=118,J$a.F8=119,J$a.F9=120,J$a.F10=121,J$a.F11=122,J$a.F12=123,J$a.F13=124,J$a.F14=125,J$a.F15=126,J$a.NUMPAD=21,J$a.NUMPAD_0=96,J$a.NUMPAD_1=97,J$a.NUMPAD_2=98,J$a.NUMPAD_3=99,J$a.NUMPAD_4=100,J$a.NUMPAD_5=101,J$a.NUMPAD_6=102,J$a.NUMPAD_7=103,J$a.NUMPAD_8=104,J$a.NUMPAD_9=105,J$a.NUMPAD_ADD=107,J$a.NUMPAD_DECIMAL=110,J$a.NUMPAD_DIVIDE=111,J$a.NUMPAD_ENTER=108,J$a.NUMPAD_MULTIPLY=106,J$a.NUMPAD_SUBTRACT=109,J$a.SEMICOLON=186,J$a.EQUAL=187,J$a.COMMA=188,J$a.MINUS=189,J$a.PERIOD=190,J$a.SLASH=191,J$a.BACKQUOTE=192,J$a.LEFTBRACKET=219,J$a.BACKSLASH=220,J$a.RIGHTBRACKET=221,J$a.QUOTE=222,J$a.ALTERNATE=18,J$a.BACKSPACE=8,J$a.CAPS_LOCK=20,J$a.COMMAND=15,J$a.CONTROL=17,J$a.DELETE=46,J$a.ENTER=13,J$a.ESCAPE=27,J$a.PAGE_UP=33,J$a.PAGE_DOWN=34,J$a.END=35,J$a.HOME=36,J$a.LEFT=37,J$a.UP=38,J$a.RIGHT=39,J$a.DOWN=40,J$a.SHIFT=16,J$a.SPACE=32,J$a.TAB=9,J$a.INSERT=45}(),function(){function J$e(){}return J$k(J$e,"laya.events.KeyBoardManager"),J$e.__init__=function(){J$e._addEvent("keydown"),J$e._addEvent("keypress"),J$e._addEvent("keyup")},J$e._addEvent=function(J$b){J$O.document.addEventListener(J$b,function(J$a){laya.events.KeyBoardManager._dispatch(J$a,J$b)},!0)},J$e._dispatch=function(J$a,J$b){if(J$e.enabled){J$e._event._stoped=!1,J$e._event.nativeEvent=J$a,J$e._event.keyCode=J$a.keyCode||J$a.which||J$a.charCode,"keydown"===J$b?J$e._pressKeys[J$e._event.keyCode]=!0:"keyup"===J$b&&(J$e._pressKeys[J$e._event.keyCode]=null);for(var J$c=J$z.stage.focus&&null!=J$z.stage.focus.event&&J$z.stage.focus.displayedInStage?J$z.stage.focus:J$z.stage,J$d=J$c;J$d;)J$d.event(J$b,J$e._event.setTo(J$b,J$d,J$c)),J$d=J$d.parent}},J$e.hasKeyDown=function(J$a){return J$e._pressKeys[J$a]},J$e._pressKeys={},J$e.enabled=!0,J$i(J$e,["_event",function(){return this._event=new J$f}]),J$e}()),J$p=(function(){function J$a(){}J$k(J$a,"laya.events.KeyLocation"),J$a.STANDARD=0,J$a.LEFT=1,J$a.RIGHT=2,J$a.NUM_PAD=3}(),function(){function J$j(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=J$O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new J$f,this._matrix=new J$G,this._point=new J$A,this._rect=new J$B,this._prePoint=new J$A,this._curTouchID=NaN}J$k(J$j,"laya.events.MouseManager");var J$a=J$j.prototype;return J$a.__init__=function(J$a,J$b){var J$c=this;this._stage=J$a;var J$d=this,J$e=this._eventList;J$b.oncontextmenu=function(J$a){if(J$j.enabled)return!1},J$b.addEventListener("mousedown",function(J$a){J$j.enabled&&(J$O.onIE||J$a.preventDefault(),J$e.push(J$a),J$d.mouseDownTime=J$O.now())}),J$b.addEventListener("mouseup",function(J$a){J$j.enabled&&(J$a.preventDefault(),J$e.push(J$a),J$d.mouseDownTime=-J$O.now())},!0),J$b.addEventListener("mousemove",function(J$a){if(J$j.enabled){J$a.preventDefault();var J$b=J$O.now();if(J$b-J$d._lastMoveTimer<10)return;J$d._lastMoveTimer=J$b,J$e.push(J$a)}},!0),J$b.addEventListener("mouseout",function(J$a){J$j.enabled&&J$e.push(J$a)}),J$b.addEventListener("mouseover",function(J$a){J$j.enabled&&J$e.push(J$a)}),J$b.addEventListener("touchstart",function(J$a){J$j.enabled&&(J$e.push(J$a),J$j._isFirstTouch||J$xa.isInputting||J$a.preventDefault(),J$d.mouseDownTime=J$O.now())}),J$b.addEventListener("touchend",function(J$a){J$j.enabled?(J$j._isFirstTouch||J$xa.isInputting||J$a.preventDefault(),J$j._isFirstTouch=!1,J$e.push(J$a),J$d.mouseDownTime=-J$O.now()):J$c._curTouchID=NaN},!0),J$b.addEventListener("touchmove",function(J$a){J$j.enabled&&(J$a.preventDefault(),J$e.push(J$a))},!0),J$b.addEventListener("touchcancel",function(J$a){J$j.enabled?(J$a.preventDefault(),J$e.push(J$a)):J$c._curTouchID=NaN},!0),J$b.addEventListener("mousewheel",function(J$a){J$j.enabled&&J$e.push(J$a)}),J$b.addEventListener("DOMMouseScroll",function(J$a){J$j.enabled&&J$e.push(J$a)})},J$a.initEvent=function(J$a,J$b){var J$c;this._event._stoped=!1,this._event.nativeEvent=J$b||J$a,this._target=null,this._point.setTo(J$a.pageX||J$a.clientX,J$a.pageY||J$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=J$a.identifier||0,this._tTouchID=this._event.touchId,(J$c=J$q.I._event)._stoped=!1,J$c.nativeEvent=this._event.nativeEvent,J$c.touchId=this._event.touchId},J$a.checkMouseWheel=function(J$a){this._event.delta=J$a.wheelDelta?.025*J$a.wheelDelta:-J$a.detail;for(var J$b=J$q.I.getLastOvers(),J$c=0,J$d=J$b.length;J$c<J$d;J$c++){var J$e=J$b[J$c];J$e.event("mousewheel",this._event.setTo("mousewheel",J$e,this._target))}},J$a.onMouseMove=function(J$a){J$q.I.onMouseMove(J$a,this._tTouchID)},J$a.onMouseDown=function(J$a){if(J$xa.isInputting&&J$z.stage.focus&&J$z.stage.focus.focus&&!J$z.stage.focus.contains(this._target)){var J$b=J$z.stage.focus._tf||J$z.stage.focus,J$c=J$a._tf||J$a;J$c instanceof laya.display.Input&&J$c.multiline==J$b.multiline?J$b._focusOut():J$b.focus=!1}J$q.I.onMouseDown(J$a,this._tTouchID,this._isLeftMouse)},J$a.onMouseUp=function(J$a){J$q.I.onMouseUp(J$a,this._tTouchID,this._isLeftMouse)},J$a.check=function(J$a,J$b,J$c,J$d){this._point.setTo(J$b,J$c),J$a.fromParentPoint(this._point),J$b=this._point.x,J$c=this._point.y;var J$e=J$a.scrollRect;if(J$e&&(this._rect.setTo(J$e.x,J$e.y,J$e.width,J$e.height),!this._rect.contains(J$b,J$c)))return!1;if(!this.disableMouseEvent){if(J$a.hitTestPrior&&!J$a.mouseThrough&&!this.hitTest(J$a,J$b,J$c))return!1;for(var J$f=J$a._childs.length-1;-1<J$f;J$f--){var J$g=J$a._childs[J$f];if(!J$g.destroyed&&J$g.mouseEnabled&&J$g.visible&&this.check(J$g,J$b,J$c,J$d))return!0}}var J$h=!(!J$a.hitTestPrior||J$a.mouseThrough||this.disableMouseEvent)||this.hitTest(J$a,J$b,J$c);return J$h?(this._target=J$a,J$d.call(this,J$a)):J$d===this.onMouseUp&&J$a===this._stage&&(this._target=this._stage,J$d.call(this,this._target)),J$h},J$a.hitTest=function(J$a,J$b,J$c){var J$d=!1;if(J$a.scrollRect&&(J$b-=J$a.scrollRect.x,J$c-=J$a.scrollRect.y),J$a.hitArea instanceof laya.utils.HitArea)return J$a.hitArea.isHit(J$b,J$c);if(0<J$a.width&&0<J$a.height||J$a.mouseThrough||J$a.hitArea)if(J$a.mouseThrough)J$d=J$a.getGraphicBounds().contains(J$b,J$c);else{var J$e=this._rect;J$a.hitArea?J$e=J$a.hitArea:J$e.setTo(0,0,J$a.width,J$a.height),J$d=J$e.contains(J$b,J$c)}return J$d},J$a.runEvent=function(){var J$a=this._eventList.length;if(J$a){this.mouseEventTime=J$O.now();var J$b,J$c=0,J$d=0,J$e=0;try{for(;J$c<J$a;){var J$f=this._eventList[J$c];switch("mousemove"!==J$f.type&&(this._prePoint.x=this._prePoint.y=-1e6),J$f.type){case"mousedown":this._touchIDs[0]=this._id++,J$j._isTouchRespond?J$j._isTouchRespond=!1:(this._isLeftMouse=0===J$f.button,this.initEvent(J$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===J$f.button,this.initEvent(J$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-J$f.clientX)+Math.abs(this._prePoint.y-J$f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=J$f.clientX,this._prePoint.y=J$f.clientY,this.initEvent(J$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":J$j._isTouchRespond=!0,this._isLeftMouse=!0;var J$g=J$f.changedTouches;for(J$d=0,J$e=J$g.length;J$d<J$e;J$d++)J$b=J$g[J$d],(J$j.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=J$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[J$b.identifier]=this._id++,this.initEvent(J$b,J$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":J$j._isTouchRespond=!0,this._isLeftMouse=!0;var J$h=J$f.changedTouches;for(J$d=0,J$e=J$h.length;J$d<J$e;J$d++)if(J$b=J$h[J$d],J$j.multiTouchEnabled||J$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(J$b,J$f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var J$i=J$f.changedTouches;for(J$d=0,J$e=J$i.length;J$d<J$e;J$d++)J$b=J$i[J$d],(J$j.multiTouchEnabled||J$b.identifier==this._curTouchID)&&(this.initEvent(J$b,J$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(J$f);break;case"mouseout":J$q.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}J$c++}}catch(J$a){throw this._eventList.length=0,J$a}this._eventList.length=0}},J$j.enabled=!0,J$j.multiTouchEnabled=!0,J$j._isTouchRespond=!1,J$j._isFirstTouch=!0,J$i(J$j,["instance",function(){return this.instance=new J$j}]),J$j}()),J$q=function(){function J$o(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new J$f}J$k(J$o,"laya.events.TouchManager");var J$a=J$o.prototype;return J$a._clearTempArrs=function(){J$o._oldArr.length=0,J$o._newArr.length=0,J$o._tEleArr.length=0},J$a.getTouchFromArr=function(J$a,J$b){var J$c,J$d,J$e=0;for(J$c=J$b.length,J$e=0;J$e<J$c;J$e++)if((J$d=J$b[J$e]).id==J$a)return J$d;return null},J$a.removeTouchFromArr=function(J$a,J$b){var J$c=0;for(J$c=J$b.length-1;0<=J$c;J$c--)J$b[J$c].id==J$a&&J$b.splice(J$c,1)},J$a.createTouchO=function(J$a,J$b){var J$c;return(J$c=J$W.getItem("TouchData")||{}).id=J$b,J$c.tar=J$a,J$c},J$a.onMouseDown=function(J$a,J$b,J$c){var J$d,J$e,J$f,J$g;(void 0===J$c&&(J$c=!1),this.enable)&&(J$d=this.getTouchFromArr(J$b,this.preOvers),J$f=this.getEles(J$a,null,J$o._tEleArr),J$d?J$d.tar=J$a:(J$e=this.createTouchO(J$a,J$b),this.preOvers.push(J$e)),J$O.onMobile&&this.sendEvents(J$f,"mouseover",J$b),J$g=J$c?this.preDowns:this.preRightDowns,(J$d=this.getTouchFromArr(J$b,J$g))?J$d.tar=J$a:(J$e=this.createTouchO(J$a,J$b),J$g.push(J$e)),this.sendEvents(J$f,J$c?"mousedown":"rightmousedown",J$b),this._clearTempArrs())},J$a.sendEvents=function(J$a,J$b,J$c){void 0===J$c&&(J$c=0);var J$d,J$e,J$f,J$g=0;for(J$d=J$a.length,this._event._stoped=!1,J$e=J$a[0],J$g=0;J$g<J$d;J$g++){if((J$f=J$a[J$g]).destroyed)return;if(J$f.event(J$b,this._event.setTo(J$b,J$f,J$e)),this._event._stoped)break}},J$a.getEles=function(J$a,J$b,J$c){for(J$c?J$c.length=0:J$c=[];J$a&&J$a!=J$b;)J$c.push(J$a),J$a=J$a.parent;return J$c},J$a.checkMouseOutAndOverOfMove=function(J$a,J$b,J$c){if(void 0===J$c&&(J$c=0),J$b!=J$a){var J$d,J$e,J$f=0,J$g=0;if(J$b.contains(J$a))J$e=this.getEles(J$a,J$b,J$o._tEleArr),this.sendEvents(J$e,"mouseover",J$c);else if(J$a.contains(J$b))J$e=this.getEles(J$b,J$a,J$o._tEleArr),this.sendEvents(J$e,"mouseout",J$c);else{var J$h,J$i;(J$e=J$o._tEleArr).length=0,J$h=this.getEles(J$b,null,J$o._oldArr),J$i=this.getEles(J$a,null,J$o._newArr),J$g=J$h.length;var J$j=0;for(J$f=0;J$f<J$g;J$f++){if(J$d=J$h[J$f],0<=(J$j=J$i.indexOf(J$d))){J$i.splice(J$j,J$i.length-J$j);break}J$e.push(J$d)}0<J$e.length&&this.sendEvents(J$e,"mouseout",J$c),0<J$i.length&&this.sendEvents(J$i,"mouseover",J$c)}}},J$a.onMouseMove=function(J$a,J$b){var J$c,J$d;this.enable&&((J$c=this.getTouchFromArr(J$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(J$a,J$c.tar),J$c.tar=J$a,J$d=this.getEles(J$a,null,J$o._tEleArr)):(J$d=this.getEles(J$a,null,J$o._tEleArr),this.sendEvents(J$d,"mouseover",J$b),this.preOvers.push(this.createTouchO(J$a,J$b))),this.sendEvents(J$d,"mousemove",J$b),this._clearTempArrs())},J$a.getLastOvers=function(){return(J$o._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,J$o._tEleArr):(J$o._tEleArr.push(J$z.stage),J$o._tEleArr)},J$a.stageMouseOut=function(){var J$a;J$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(J$a,"mouseout",0)},J$a.onMouseUp=function(J$a,J$b,J$c){if(void 0===J$c&&(J$c=!1),this.enable){var J$d,J$e,J$f,J$g,J$h,J$i,J$j=0,J$k=0,J$l=J$O.onMobile;if(J$e=this.getEles(J$a,null,J$o._tEleArr),this.sendEvents(J$e,J$c?"mouseup":"rightmouseup",J$b),J$i=J$c?this.preDowns:this.preRightDowns,J$d=this.getTouchFromArr(J$b,J$i)){var J$m,J$n=J$O.now();if(J$m=J$n-this._lastClickTime<300,this._lastClickTime=J$n,J$a==J$d.tar)J$h=J$e;else for(J$f=this.getEles(J$d.tar,null,J$o._oldArr),(J$h=J$o._newArr).length=0,J$k=J$f.length,J$j=0;J$j<J$k;J$j++)J$g=J$f[J$j],0<=J$e.indexOf(J$g)&&J$h.push(J$g);0<J$h.length&&this.sendEvents(J$h,J$c?"click":"rightclick",J$b),J$c&&J$m&&this.sendEvents(J$h,"doubleclick",J$b),this.removeTouchFromArr(J$b,J$i),J$d.tar=null,J$W.recover("TouchData",J$d)}else;(J$d=this.getTouchFromArr(J$b,this.preOvers))&&J$l&&((J$h=this.getEles(J$d.tar,null,J$h))&&0<J$h.length&&this.sendEvents(J$h,"mouseout",J$b),this.removeTouchFromArr(J$b,this.preOvers),J$d.tar=null,J$W.recover("TouchData",J$d)),this._clearTempArrs()}},J$o._oldArr=[],J$o._newArr=[],J$o._tEleArr=[],J$i(J$o,["I",function(){return this.I=new J$o}]),J$o}(),J$r=function(){function J$a(){this._action=null}J$k(J$a,"laya.filters.Filter");var J$b=J$a.prototype;return J$z.imps(J$b,{"laya.filters.IFilter":!0}),J$b.callNative=function(J$a){},J$o(0,J$b,"type",function(){return-1}),J$o(0,J$b,"action",function(){return this._action}),J$a.BLUR=16,J$a.COLOR=32,J$a.GLOW=8,J$a._filterStart=null,J$a._filterEnd=null,J$a._EndTarget=null,J$a._recycleScope=null,J$a._filter=null,J$a._useSrc=null,J$a._endSrc=null,J$a._useOut=null,J$a._endOut=null,J$a}(),J$v=function(){function J$a(){this.data=null}J$k(J$a,"laya.filters.ColorFilterAction");var J$b=J$a.prototype;return J$z.imps(J$b,{"laya.filters.IFilterAction":!0}),J$b.apply=function(J$a){var J$b=J$a.ctx.ctx,J$c=J$a.ctx.ctx.canvas;if(0==J$c.width||0==J$c.height)return J$c;for(var J$d,J$e=J$b.getImageData(0,0,J$c.width,J$c.height),J$f=J$e.data,J$g=0,J$h=J$f.length;J$g<J$h;J$g+=4)J$d=this.getColor(J$f[J$g],J$f[J$g+1],J$f[J$g+2],J$f[J$g+3]),0!=J$f[J$g+3]&&(J$f[J$g]=J$d[0],J$f[J$g+1]=J$d[1],J$f[J$g+2]=J$d[2],J$f[J$g+3]=J$d[3]);return J$b.putImageData(J$e,0,0),J$a},J$b.getColor=function(J$a,J$b,J$c,J$d){var J$e=[];if(this.data._mat&&this.data._alpha){var J$f=this.data._mat,J$g=this.data._alpha;J$e[0]=J$f[0]*J$a+J$f[1]*J$b+J$f[2]*J$c+J$f[3]*J$d+J$g[0],J$e[1]=J$f[4]*J$a+J$f[5]*J$b+J$f[6]*J$c+J$f[7]*J$d+J$g[1],J$e[2]=J$f[8]*J$a+J$f[9]*J$b+J$f[10]*J$c+J$f[11]*J$d+J$g[2],J$e[3]=J$f[12]*J$a+J$f[13]*J$b+J$f[14]*J$c+J$f[15]*J$d+J$g[3]}return J$e},J$a}(),J$w=(function(){function J$a(){}J$k(J$a,"laya.maths.Arith"),J$a.formatR=function(J$a){return J$a>Math.PI&&(J$a-=2*Math.PI),J$a<-Math.PI&&(J$a+=2*Math.PI),J$a},J$a.isPOT=function(J$a,J$b){return 0<J$a&&0==(J$a&J$a-1)&&0<J$b&&0==(J$b&J$b-1)},J$a.setMatToArray=function(J$a,J$b){J$a.a,J$a.b,J$a.c,J$a.d,J$a.tx,J$a.ty,J$b[0]=J$a.a,J$b[1]=J$a.b,J$b[4]=J$a.c,J$b[5]=J$a.d,J$b[12]=J$a.tx,J$b[13]=J$a.ty}}(),function(){function J$a(){this._controlPoints=[new J$A,new J$A,new J$A],this._calFun=this.getPoint2}J$k(J$a,"laya.maths.Bezier");var J$b=J$a.prototype;return J$b._switchPoint=function(J$a,J$b){var J$c=this._controlPoints.shift();J$c.setTo(J$a,J$b),this._controlPoints.push(J$c)},J$b.getPoint2=function(J$a,J$b){var J$c=this._controlPoints[0],J$d=this._controlPoints[1],J$e=this._controlPoints[2],J$f=Math.pow(1-J$a,2)*J$c.x+2*J$a*(1-J$a)*J$d.x+Math.pow(J$a,2)*J$e.x,J$g=Math.pow(1-J$a,2)*J$c.y+2*J$a*(1-J$a)*J$d.y+Math.pow(J$a,2)*J$e.y;J$b.push(J$f,J$g)},J$b.getPoint3=function(J$a,J$b){var J$c=this._controlPoints[0],J$d=this._controlPoints[1],J$e=this._controlPoints[2],J$f=this._controlPoints[3],J$g=Math.pow(1-J$a,3)*J$c.x+3*J$d.x*J$a*(1-J$a)*(1-J$a)+3*J$e.x*J$a*J$a*(1-J$a)+J$f.x*Math.pow(J$a,3),J$h=Math.pow(1-J$a,3)*J$c.y+3*J$d.y*J$a*(1-J$a)*(1-J$a)+3*J$e.y*J$a*J$a*(1-J$a)+J$f.y*Math.pow(J$a,3);J$b.push(J$g,J$h)},J$b.insertPoints=function(J$a,J$b){var J$c,J$d=NaN;for(J$c=1/(J$a=0<J$a?J$a:5),J$d=0;J$d<=1;J$d+=J$c)this._calFun(J$d,J$b)},J$b.getBezierPoints=function(J$a,J$b,J$c){void 0===J$b&&(J$b=5),void 0===J$c&&(J$c=2);var J$d,J$e,J$f=0;if((J$d=J$a.length)<2*(J$c+1))return[];switch(J$e=[],J$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=J$c;)this._controlPoints.push(new J$A);for(J$f=0;J$f<2*J$c;J$f+=2)this._switchPoint(J$a[J$f],J$a[J$f+1]);for(J$f=2*J$c;J$f<J$d;J$f+=2)this._switchPoint(J$a[J$f],J$a[J$f+1]),J$f/2%J$c==0&&this.insertPoints(J$b,J$e);return J$e},J$i(J$a,["I",function(){return this.I=new J$a}]),J$a}()),J$x=function(){function J$j(){}return J$k(J$j,"laya.maths.GrahamScan"),J$j.multiply=function(J$a,J$b,J$c){return(J$a.x-J$c.x)*(J$b.y-J$c.y)-(J$b.x-J$c.x)*(J$a.y-J$c.y)},J$j.dis=function(J$a,J$b){return(J$a.x-J$b.x)*(J$a.x-J$b.x)+(J$a.y-J$b.y)*(J$a.y-J$b.y)},J$j._getPoints=function(J$a,J$b,J$c){for(void 0===J$b&&(J$b=!1),J$j._mPointList||(J$j._mPointList=[]);J$j._mPointList.length<J$a;)J$j._mPointList.push(new J$A);return J$c||(J$c=[]),J$c.length=0,J$b?J$j.getFrom(J$c,J$j._mPointList,J$a):J$j.getFromR(J$c,J$j._mPointList,J$a),J$c},J$j.getFrom=function(J$a,J$b,J$c){var J$d=0;for(J$d=0;J$d<J$c;J$d++)J$a.push(J$b[J$d]);return J$a},J$j.getFromR=function(J$a,J$b,J$c){var J$d=0;for(J$d=0;J$d<J$c;J$d++)J$a.push(J$b.pop());return J$a},J$j.pListToPointList=function(J$a,J$b){void 0===J$b&&(J$b=!1);var J$c=0,J$d=J$a.length/2,J$e=J$j._getPoints(J$d,J$b,J$j._tempPointList);for(J$c=0;J$c<J$d;J$c++)J$e[J$c].setTo(J$a[J$c+J$c],J$a[J$c+J$c+1]);return J$e},J$j.pointListToPlist=function(J$a){var J$b,J$c=0,J$d=J$a.length,J$e=J$j._temPList;for(J$c=J$e.length=0;J$c<J$d;J$c++)J$b=J$a[J$c],J$e.push(J$b.x,J$b.y);return J$e},J$j.scanPList=function(J$a){return J$$.copyArray(J$a,J$j.pointListToPlist(J$j.scan(J$j.pListToPointList(J$a,!0))))},J$j.scan=function(J$a){var J$b,J$c,J$d,J$e=0,J$f=0,J$g=0,J$h=J$a.length,J$i={};for((J$c=J$j._temArr).length=0,J$e=(J$h=J$a.length)-1;0<=J$e;J$e--)J$d=(J$b=J$a[J$e]).x+"_"+J$b.y,J$i.hasOwnProperty(J$d)||(J$i[J$d]=!0,J$c.push(J$b));for(J$h=J$c.length,J$$.copyArray(J$a,J$c),J$e=1;J$e<J$h;J$e++)(J$a[J$e].y<J$a[J$g].y||J$a[J$e].y==J$a[J$g].y&&J$a[J$e].x<J$a[J$g].x)&&(J$g=J$e);for(J$b=J$a[0],J$a[0]=J$a[J$g],J$a[J$g]=J$b,J$e=1;J$e<J$h-1;J$e++){for(J$f=(J$g=J$e)+1;J$f<J$h;J$f++)(0<J$j.multiply(J$a[J$f],J$a[J$g],J$a[0])||0==J$j.multiply(J$a[J$f],J$a[J$g],J$a[0])&&J$j.dis(J$a[0],J$a[J$f])<J$j.dis(J$a[0],J$a[J$g]))&&(J$g=J$f);J$b=J$a[J$e],J$a[J$e]=J$a[J$g],J$a[J$g]=J$b}if((J$c=J$j._temArr).length=0,J$a.length<3)return J$$.copyArray(J$c,J$a);for(J$c.push(J$a[0],J$a[1],J$a[2]),J$e=3;J$e<J$h;J$e++){for(;2<=J$c.length&&0<=J$j.multiply(J$a[J$e],J$c[J$c.length-1],J$c[J$c.length-2]);)J$c.pop();J$a[J$e]&&J$c.push(J$a[J$e])}return J$c},J$j._mPointList=null,J$j._tempPointList=[],J$j._temPList=[],J$j._temArr=[],J$j}(),J$y=function(){function J$e(){}return J$k(J$e,"laya.maths.MathUtil"),J$e.subtractVector3=function(J$a,J$b,J$c){J$c[0]=J$a[0]-J$b[0],J$c[1]=J$a[1]-J$b[1],J$c[2]=J$a[2]-J$b[2]},J$e.lerp=function(J$a,J$b,J$c){return J$a*(1-J$c)+J$b*J$c},J$e.scaleVector3=function(J$a,J$b,J$c){J$c[0]=J$a[0]*J$b,J$c[1]=J$a[1]*J$b,J$c[2]=J$a[2]*J$b},J$e.lerpVector3=function(J$a,J$b,J$c,J$d){var J$e=J$a[0],J$f=J$a[1],J$g=J$a[2];J$d[0]=J$e+J$c*(J$b[0]-J$e),J$d[1]=J$f+J$c*(J$b[1]-J$f),J$d[2]=J$g+J$c*(J$b[2]-J$g)},J$e.lerpVector4=function(J$a,J$b,J$c,J$d){var J$e=J$a[0],J$f=J$a[1],J$g=J$a[2],J$h=J$a[3];J$d[0]=J$e+J$c*(J$b[0]-J$e),J$d[1]=J$f+J$c*(J$b[1]-J$f),J$d[2]=J$g+J$c*(J$b[2]-J$g),J$d[3]=J$h+J$c*(J$b[3]-J$h)},J$e.slerpQuaternionArray=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h,J$i,J$j,J$k,J$l,J$m=J$a[J$b+0],J$n=J$a[J$b+1],J$o=J$a[J$b+2],J$p=J$a[J$b+3],J$q=J$c[J$d+0],J$r=J$c[J$d+1],J$u=J$c[J$d+2],J$v=J$c[J$d+3];return(J$i=J$m*J$q+J$n*J$r+J$o*J$u+J$p*J$v)<0&&(J$i=-J$i,J$q=-J$q,J$r=-J$r,J$u=-J$u,J$v=-J$v),J$l=1e-6<1-J$i?(J$h=Math.acos(J$i),J$j=Math.sin(J$h),J$k=Math.sin((1-J$e)*J$h)/J$j,Math.sin(J$e*J$h)/J$j):(J$k=1-J$e,J$e),J$f[J$g+0]=J$k*J$m+J$l*J$q,J$f[J$g+1]=J$k*J$n+J$l*J$r,J$f[J$g+2]=J$k*J$o+J$l*J$u,J$f[J$g+3]=J$k*J$p+J$l*J$v,J$f},J$e.getRotation=function(J$a,J$b,J$c,J$d){return Math.atan2(J$d-J$b,J$c-J$a)/Math.PI*180},J$e.sortBigFirst=function(J$a,J$b){return J$a==J$b?0:J$a<J$b?1:-1},J$e.sortSmallFirst=function(J$a,J$b){return J$a==J$b?0:J$a<J$b?-1:1},J$e.sortNumBigFirst=function(J$a,J$b){return parseFloat(J$b)-parseFloat(J$a)},J$e.sortNumSmallFirst=function(J$a,J$b){return parseFloat(J$a)-parseFloat(J$b)},J$e.sortByKey=function(J$c,J$a,J$b){var J$d;return void 0===J$a&&(J$a=!1),void 0===J$b&&(J$b=!0),J$d=J$a?J$b?J$e.sortNumBigFirst:J$e.sortBigFirst:J$b?J$e.sortNumSmallFirst:J$e.sortSmallFirst,function(J$a,J$b){return J$d(J$a[J$c],J$b[J$c])}},J$e}(),J$G=function(){function J$c(J$a,J$b,J$c,J$d,J$e,J$f){this.inPool=!1,this.bTransform=!1,void 0===J$a&&(J$a=1),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=1),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=0),this.a=J$a,this.b=J$b,this.c=J$c,this.d=J$d,this.tx=J$e,this.ty=J$f,this._checkTransform()}J$k(J$c,"laya.maths.Matrix");var J$a=J$c.prototype;return J$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},J$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},J$a.setTranslate=function(J$a,J$b){return this.tx=J$a,this.ty=J$b,this},J$a.translate=function(J$a,J$b){return this.tx+=J$a,this.ty+=J$b,this},J$a.scale=function(J$a,J$b){this.a*=J$a,this.d*=J$b,this.c*=J$a,this.b*=J$b,this.tx*=J$a,this.ty*=J$b,this.bTransform=!0},J$a.rotate=function(J$a){var J$b=Math.cos(J$a),J$c=Math.sin(J$a),J$d=this.a,J$e=this.c,J$f=this.tx;this.a=J$d*J$b-this.b*J$c,this.b=J$d*J$c+this.b*J$b,this.c=J$e*J$b-this.d*J$c,this.d=J$e*J$c+this.d*J$b,this.tx=J$f*J$b-this.ty*J$c,this.ty=J$f*J$c+this.ty*J$b,this.bTransform=!0},J$a.skew=function(J$a,J$b){var J$c=Math.tan(J$a),J$d=Math.tan(J$b),J$e=this.a,J$f=this.b;return this.a+=J$d*this.c,this.b+=J$d*this.d,this.c+=J$c*J$e,this.d+=J$c*J$f,this},J$a.invertTransformPoint=function(J$a){var J$b=this.a,J$c=this.b,J$d=this.c,J$e=this.d,J$f=this.tx,J$g=J$b*J$e-J$c*J$d,J$h=J$e/J$g,J$i=-J$c/J$g,J$j=-J$d/J$g,J$k=J$b/J$g,J$l=(J$d*this.ty-J$e*J$f)/J$g,J$m=-(J$b*this.ty-J$c*J$f)/J$g;return J$a.setTo(J$h*J$a.x+J$j*J$a.y+J$l,J$i*J$a.x+J$k*J$a.y+J$m)},J$a.transformPoint=function(J$a){return J$a.setTo(this.a*J$a.x+this.c*J$a.y+this.tx,this.b*J$a.x+this.d*J$a.y+this.ty)},J$a.transformPointN=function(J$a){return J$a.setTo(this.a*J$a.x+this.c*J$a.y,this.b*J$a.x+this.d*J$a.y)},J$a.transformPointArray=function(J$a,J$b){for(var J$c=J$a.length,J$d=0;J$d<J$c;J$d+=2){var J$e=J$a[J$d],J$f=J$a[J$d+1];J$b[J$d]=this.a*J$e+this.c*J$f+this.tx,J$b[J$d+1]=this.b*J$e+this.d*J$f+this.ty}return J$b},J$a.transformPointArrayScale=function(J$a,J$b){for(var J$c=J$a.length,J$d=0;J$d<J$c;J$d+=2){var J$e=J$a[J$d],J$f=J$a[J$d+1];J$b[J$d]=this.a*J$e+this.c*J$f,J$b[J$d+1]=this.b*J$e+this.d*J$f}return J$b},J$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},J$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},J$a.invert=function(){var J$a=this.a,J$b=this.b,J$c=this.c,J$d=this.d,J$e=this.tx,J$f=J$a*J$d-J$b*J$c;return this.a=J$d/J$f,this.b=-J$b/J$f,this.c=-J$c/J$f,this.d=J$a/J$f,this.tx=(J$c*this.ty-J$d*J$e)/J$f,this.ty=-(J$a*this.ty-J$b*J$e)/J$f,this},J$a.setTo=function(J$a,J$b,J$c,J$d,J$e,J$f){return this.a=J$a,this.b=J$b,this.c=J$c,this.d=J$d,this.tx=J$e,this.ty=J$f,this},J$a.concat=function(J$a){var J$b=this.a,J$c=this.c,J$d=this.tx;return this.a=J$b*J$a.a+this.b*J$a.c,this.b=J$b*J$a.b+this.b*J$a.d,this.c=J$c*J$a.a+this.d*J$a.c,this.d=J$c*J$a.b+this.d*J$a.d,this.tx=J$d*J$a.a+this.ty*J$a.c+J$a.tx,this.ty=J$d*J$a.b+this.ty*J$a.d+J$a.ty,this},J$a.scaleEx=function(J$a,J$b){var J$c=this.a,J$d=this.b,J$e=this.c,J$f=this.d;0!==J$d||0!==J$e?(this.a=J$a*J$c,this.b=J$a*J$d,this.c=J$b*J$e):(this.a=J$a*J$c,this.b=0*J$f,this.c=0*J$c),this.d=J$b*J$f,this.bTransform=!0},J$a.rotateEx=function(J$a){var J$b=Math.cos(J$a),J$c=Math.sin(J$a),J$d=this.a,J$e=this.b,J$f=this.c,J$g=this.d;0!==J$e||0!==J$f?(this.a=J$b*J$d+J$c*J$f,this.b=J$b*J$e+J$c*J$g,this.c=-J$c*J$d+J$b*J$f,this.d=-J$c*J$e+J$b*J$g):(this.a=J$b*J$d,this.b=J$c*J$g,this.c=-J$c*J$d,this.d=J$b*J$g),this.bTransform=!0},J$a.clone=function(){var J$a=J$c.create();return J$a.a=this.a,J$a.b=this.b,J$a.c=this.c,J$a.d=this.d,J$a.tx=this.tx,J$a.ty=this.ty,J$a.bTransform=this.bTransform,J$a},J$a.copyTo=function(J$a){return J$a.a=this.a,J$a.b=this.b,J$a.c=this.c,J$a.d=this.d,J$a.tx=this.tx,J$a.ty=this.ty,J$a.bTransform=this.bTransform,J$a},J$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},J$a.destroy=function(){if(!this.inPool){var J$a=J$c._cache;this.inPool=!0,J$a._length||(J$a._length=0),(J$a[J$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},J$c.mul=function(J$a,J$b,J$c){var J$d=J$a.a,J$e=J$a.b,J$f=J$a.c,J$g=J$a.d,J$h=J$a.tx,J$i=J$a.ty,J$j=J$b.a,J$k=J$b.b,J$l=J$b.c,J$m=J$b.d,J$n=J$b.tx,J$o=J$b.ty;return 0!==J$k||0!==J$l?(J$c.a=J$d*J$j+J$e*J$l,J$c.b=J$d*J$k+J$e*J$m,J$c.c=J$f*J$j+J$g*J$l,J$c.d=J$f*J$k+J$g*J$m,J$c.tx=J$j*J$h+J$l*J$i+J$n,J$c.ty=J$k*J$h+J$m*J$i+J$o):(J$c.a=J$d*J$j,J$c.b=J$e*J$m,J$c.c=J$f*J$j,J$c.d=J$g*J$m,J$c.tx=J$j*J$h+J$n,J$c.ty=J$m*J$i+J$o),J$c},J$c.mul16=function(J$a,J$b,J$c){var J$d=J$a.a,J$e=J$a.b,J$f=J$a.c,J$g=J$a.d,J$h=J$a.tx,J$i=J$a.ty,J$j=J$b.a,J$k=J$b.b,J$l=J$b.c,J$m=J$b.d,J$n=J$b.tx,J$o=J$b.ty;return 0!==J$k||0!==J$l?(J$c[0]=J$d*J$j+J$e*J$l,J$c[1]=J$d*J$k+J$e*J$m,J$c[4]=J$f*J$j+J$g*J$l,J$c[5]=J$f*J$k+J$g*J$m,J$c[12]=J$j*J$h+J$l*J$i+J$n,J$c[13]=J$k*J$h+J$m*J$i+J$o):(J$c[0]=J$d*J$j,J$c[1]=J$e*J$m,J$c[4]=J$f*J$j,J$c[5]=J$g*J$m,J$c[12]=J$j*J$h+J$n,J$c[13]=J$m*J$i+J$o),J$c},J$c.mulPre=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=J$a.a,J$j=J$a.b,J$k=J$a.c,J$l=J$a.d,J$m=J$a.tx,J$n=J$a.ty;return 0!==J$c||0!==J$d?(J$h.a=J$i*J$b+J$j*J$d,J$h.b=J$i*J$c+J$j*J$e,J$h.c=J$k*J$b+J$l*J$d,J$h.d=J$k*J$c+J$l*J$e,J$h.tx=J$b*J$m+J$d*J$n+J$f,J$h.ty=J$c*J$m+J$e*J$n+J$g):(J$h.a=J$i*J$b,J$h.b=J$j*J$e,J$h.c=J$k*J$b,J$h.d=J$l*J$e,J$h.tx=J$b*J$m+J$f,J$h.ty=J$e*J$n+J$g),J$h},J$c.mulPos=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=J$a.a,J$j=J$a.b,J$k=J$a.c,J$l=J$a.d,J$m=J$a.tx,J$n=J$a.ty;return 0!==J$j||0!==J$k?(J$h.a=J$b*J$i+J$c*J$k,J$h.b=J$b*J$j+J$c*J$l,J$h.c=J$d*J$i+J$e*J$k,J$h.d=J$d*J$j+J$e*J$l,J$h.tx=J$i*J$f+J$k*J$g+J$m,J$h.ty=J$j*J$f+J$l*J$g+J$n):(J$h.a=J$b*J$i,J$h.b=J$c*J$l,J$h.c=J$d*J$i,J$h.d=J$e*J$l,J$h.tx=J$i*J$f+J$m,J$h.ty=J$l*J$g+J$n),J$h},J$c.preMul=function(J$a,J$b,J$c){var J$d=J$a.a,J$e=J$a.b,J$f=J$a.c,J$g=J$a.d,J$h=J$b.a,J$i=J$b.b,J$j=J$b.c,J$k=J$b.d,J$l=J$b.tx,J$m=J$b.ty;return J$c.a=J$h*J$d,J$c.b=J$c.c=0,J$c.d=J$k*J$g,J$c.tx=J$l*J$d+J$a.tx,J$c.ty=J$m*J$g+J$a.ty,0===J$i&&0===J$j&&0===J$e&&0===J$f||(J$c.a+=J$i*J$f,J$c.d+=J$j*J$e,J$c.b+=J$h*J$e+J$i*J$g,J$c.c+=J$j*J$d+J$k*J$f,J$c.tx+=J$m*J$f,J$c.ty+=J$l*J$e),J$c},J$c.preMulXY=function(J$a,J$b,J$c,J$d){var J$e=J$a.a,J$f=J$a.b,J$g=J$a.c,J$h=J$a.d;return J$d.a=J$e,J$d.b=J$f,J$d.c=J$g,J$d.d=J$h,J$d.tx=J$b*J$e+J$a.tx+J$c*J$g,J$d.ty=J$c*J$h+J$a.ty+J$b*J$f,J$d},J$c.create=function(){var J$a=J$c._cache,J$b=J$a._length?J$a[--J$a._length]:new J$c;return J$b.inPool=!1,J$b},J$c.EMPTY=new J$c,J$c.TEMP=new J$c,J$c._cache=[],J$c}(),J$A=function(){function J$a(J$a,J$b){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),this.x=J$a,this.y=J$b}J$k(J$a,"laya.maths.Point");var J$b=J$a.prototype;return J$b.setTo=function(J$a,J$b){return this.x=J$a,this.y=J$b,this},J$b.distance=function(J$a,J$b){return Math.sqrt((this.x-J$a)*(this.x-J$a)+(this.y-J$b)*(this.y-J$b))},J$b.toString=function(){return this.x+","+this.y},J$b.normalize=function(){var J$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<J$a){var J$b=1/J$a;this.x*=J$b,this.y*=J$b}},J$a.TEMP=new J$a,J$a.EMPTY=new J$a,J$a}(),J$B=function(){function J$j(J$a,J$b,J$c,J$d){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),this.x=J$a,this.y=J$b,this.width=J$c,this.height=J$d}J$k(J$j,"laya.maths.Rectangle");var J$a=J$j.prototype;return J$a.setTo=function(J$a,J$b,J$c,J$d){return this.x=J$a,this.y=J$b,this.width=J$c,this.height=J$d,this},J$a.copyFrom=function(J$a){return this.x=J$a.x,this.y=J$a.y,this.width=J$a.width,this.height=J$a.height,this},J$a.contains=function(J$a,J$b){return!(this.width<=0||this.height<=0)&&(J$a>=this.x&&J$a<this.right&&J$b>=this.y&&J$b<this.bottom)},J$a.intersects=function(J$a){return!(J$a.x>this.x+this.width||J$a.x+J$a.width<this.x||J$a.y>this.y+this.height||J$a.y+J$a.height<this.y)},J$a.intersection=function(J$a,J$b){return this.intersects(J$a)?(J$b||(J$b=new J$j),J$b.x=Math.max(this.x,J$a.x),J$b.y=Math.max(this.y,J$a.y),J$b.width=Math.min(this.right,J$a.right)-J$b.x,J$b.height=Math.min(this.bottom,J$a.bottom)-J$b.y,J$b):null},J$a.union=function(J$a,J$b){return J$b||(J$b=new J$j),this.clone(J$b),J$a.width<=0||J$a.height<=0?J$b:(J$b.addPoint(J$a.x,J$a.y),J$b.addPoint(J$a.right,J$a.bottom),this)},J$a.clone=function(J$a){return J$a||(J$a=new J$j),J$a.x=this.x,J$a.y=this.y,J$a.width=this.width,J$a.height=this.height,J$a},J$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},J$a.equals=function(J$a){return!(!J$a||J$a.x!==this.x||J$a.y!==this.y||J$a.width!==this.width||J$a.height!==this.height)},J$a.addPoint=function(J$a,J$b){return this.x>J$a&&(this.width+=this.x-J$a,this.x=J$a),this.y>J$b&&(this.height+=this.y-J$b,this.y=J$b),this.width<J$a-this.x&&(this.width=J$a-this.x),this.height<J$b-this.y&&(this.height=J$b-this.y),this},J$a._getBoundPoints=function(){var J$a=J$j._temB;return(J$a.length=0)==this.width||0==this.height||J$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),J$a},J$a.isEmpty=function(){return this.width<=0||this.height<=0},J$o(0,J$a,"right",function(){return this.x+this.width}),J$o(0,J$a,"bottom",function(){return this.y+this.height}),J$j._getBoundPointS=function(J$a,J$b,J$c,J$d){var J$e=J$j._temA;return(J$e.length=0)==J$c||0==J$d||J$e.push(J$a,J$b,J$a+J$c,J$b,J$a,J$b+J$d,J$a+J$c,J$b+J$d),J$e},J$j._getWrapRec=function(J$a,J$b){if(!J$a||J$a.length<1)return J$b?J$b.setTo(0,0,0,0):J$j.TEMP.setTo(0,0,0,0);J$b=J$b||new J$j;var J$c,J$d,J$e,J$f,J$g,J$h=J$a.length,J$i=J$A.TEMP;for(J$e=J$g=-(J$d=J$f=99999),J$c=0;J$c<J$h;J$c+=2)J$i.x=J$a[J$c],J$i.y=J$a[J$c+1],J$d=J$d<J$i.x?J$d:J$i.x,J$f=J$f<J$i.y?J$f:J$i.y,J$e=J$e>J$i.x?J$e:J$i.x,J$g=J$g>J$i.y?J$g:J$i.y;return J$b.setTo(J$d,J$f,J$e-J$d,J$g-J$f)},J$j.EMPTY=new J$j,J$j.TEMP=new J$j,J$j._temB=[],J$j._temA=[],J$j}(),J$E=function(){function J$i(){}return J$k(J$i,"laya.media.SoundManager"),J$o(1,J$i,"useAudioMusic",function(){return J$i._useAudioMusic},function(J$a){J$i._useAudioMusic=J$a,J$i._musicClass=J$a?J$ca:null}),J$o(1,J$i,"autoStopMusic",function(){return J$i._autoStopMusic},function(J$a){J$z.stage.off("blur",null,J$i._stageOnBlur),J$z.stage.off("focus",null,J$i._stageOnFocus),J$z.stage.off("visibilitychange",null,J$i._visibilityChange),(J$i._autoStopMusic=J$a)&&(J$z.stage.on("blur",null,J$i._stageOnBlur),J$z.stage.on("focus",null,J$i._stageOnFocus),J$z.stage.on("visibilitychange",null,J$i._visibilityChange))}),J$o(1,J$i,"muted",function(){return J$i._muted},function(J$a){J$a!=J$i._muted&&(J$a&&J$i.stopAllSound(),J$i.musicMuted=J$a,J$i._muted=J$a)}),J$o(1,J$i,"musicMuted",function(){return J$i._musicMuted},function(J$a){J$a!=J$i._musicMuted&&(J$a?(J$i._tMusic&&J$i._musicChannel&&!J$i._musicChannel.isStopped?J$i._musicChannel.pause():J$i._musicChannel=null,J$i._musicMuted=J$a):(J$i._musicMuted=J$a,J$i._tMusic&&J$i._musicChannel&&J$i._musicChannel.resume()))}),J$o(1,J$i,"soundMuted",function(){return J$i._soundMuted},function(J$a){J$i._soundMuted=J$a}),J$i.addChannel=function(J$a){0<=J$i._channels.indexOf(J$a)||(J$i._channels.push(J$a),J$i.autoReleaseSound&&0!=J$i._notUsedCount&&J$i._notUsedUrls[J$a.url]&&(delete J$i._notUsedUrls[J$a.url],0==--J$i._notUsedCount&&J$z.timer.clear(J$i,J$i.disposeSoundIfNotUsed)))},J$i.removeChannel=function(J$a){var J$b=J$i._channels,J$c=J$b.indexOf(J$a);if(-1!=J$c&&(J$b.splice(J$c,1),J$i.autoReleaseSound)){var J$d=J$a.url,J$e=J$i.defaultIntervals[J$d]||2e4;if(0<J$e){var J$f=!0;for(J$c=J$b.length-1;0<=J$c;J$c--)if(J$b[J$c].url==J$d){J$f=!1;break}J$f&&(J$i._notUsedUrls[J$d]=Date.now()+J$e,0==J$i._notUsedCount++&&J$z.timer.loop(1e4,J$i,J$i.disposeSoundIfNotUsed))}}},J$i.disposeSoundIfNotUsed=function(){var J$a=J$i._notUsedUrls;if(0!=J$i._notUsedCount){var J$b=Date.now();for(var J$c in J$a)J$b>=J$a[J$c]&&(delete J$a[J$c],--J$i._notUsedCount,J$i.destroySound(J$c));if(0!=J$i._notUsedCount)return}J$z.timer.clear(J$i,J$i.disposeSoundIfNotUsed)},J$i._visibilityChange=function(){J$z.stage.isVisibility?J$i._stageOnFocus():J$i._stageOnBlur()},J$i._stageOnBlur=function(){J$i._isActive=!1,J$i._musicChannel&&(J$i._musicChannel.isStopped||(J$i._blurPaused=!0,J$i._musicChannel.pause())),J$i.stopAllSound(),J$z.stage.once("mousedown",null,J$i._stageOnFocus)},J$i._recoverWebAudio=function(){J$fa.ctx&&"running"!=J$fa.ctx.state&&J$fa.ctx.resume&&J$fa.ctx.resume()},J$i._stageOnFocus=function(){if(J$i._isActive=!0,J$i._recoverWebAudio(),J$z.stage.off("mousedown",null,J$i._stageOnFocus),J$i._blurPaused){var J$a=J$i._musicChannel;J$a&&J$i._music&&J$a.isStopped&&(J$i._blurPaused=!1,J$i._music._disposed?J$i.playMusic(J$a.url,J$a.loops,J$a.startHandler,J$a.completeHandler,J$a.startTime):J$a.audioBuffer?J$a.resume():J$i._music.play(J$a.startTime,J$a.loops,J$a.startHandler,J$a))}},J$i.playSound=function(J$a,J$b,J$c,J$d,J$e,J$f){if(void 0===J$b&&(J$b=1),void 0===J$f&&(J$f=0),!J$a)return null;if(J$i._muted)return null;if(J$i._recoverWebAudio(),J$a==J$i._tMusic){if(J$i._musicMuted)return null}else{if(!J$i._isActive)return null;if(J$i._soundMuted)return null}var J$g,J$h=J$i._pool[J$a];return J$e||(J$e=J$i._soundClass),J$h||((J$h=new J$e).load(J$a),J$i._pool[J$a]=J$h),(J$g=J$h.play(J$f,J$b,J$c))?(J$a==J$i._tMusic&&(J$i._music=J$h,J$i._isActive||(J$i._blurPaused=!0,J$g.pause())),J$g.url=J$a,J$g.volume=J$a==J$i._tMusic?J$i.musicVolume:J$i.soundVolume,J$g.completeHandler=J$d,J$g):null},J$i.destroySound=function(J$a){var J$b=J$i._pool[J$a];J$b&&(delete J$i._pool[J$a],J$b.dispose())},J$i.playMusic=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$b&&(J$b=0),void 0===J$e&&(J$e=0),J$i._tMusic=J$a,J$i._musicChannel&&J$i._musicChannel.stop(),J$i._musicChannel=J$i.playSound(J$a,J$b,J$c,J$d,null,J$e)},J$i.stopSound=function(J$a){for(var J$b,J$c=J$i._channels.length-1;0<=J$c;J$c--)(J$b=J$i._channels[J$c]).url==J$a&&J$b.stop()},J$i.stopAll=function(){J$i._tMusic=null;var J$a=0;for(J$a=J$i._channels.length-1;0<=J$a;J$a--)J$i._channels[J$a].stop()},J$i.stopAllSound=function(){var J$a,J$b=0;for(J$b=J$i._channels.length-1;0<=J$b;J$b--)(J$a=J$i._channels[J$b]).url!=J$i._tMusic&&J$a.stop()},J$i.stopMusic=function(){J$i._musicChannel&&J$i._musicChannel.stop(),J$i._tMusic=null},J$i.setSoundVolume=function(J$a,J$b){if(J$b)J$i._setVolume(J$b,J$a);else{J$i.soundVolume=J$a;var J$c,J$d=0;for(J$d=J$i._channels.length-1;0<=J$d;J$d--)(J$c=J$i._channels[J$d]).url!=J$i._tMusic&&(J$c.volume=J$a)}},J$i.setMusicVolume=function(J$a){J$i.musicVolume=J$a,J$i._setVolume(J$i._tMusic,J$a)},J$i._setVolume=function(J$a,J$b){for(var J$c,J$d=J$i._channels.length-1;0<=J$d;J$d--)(J$c=J$i._channels[J$d]).url==J$a&&(J$c.volume=J$b)},J$i.musicVolume=1,J$i.soundVolume=1,J$i.playbackRate=1,J$i._useAudioMusic=!0,J$i._muted=!1,J$i._soundMuted=!1,J$i._musicMuted=!1,J$i._tMusic=null,J$i._musicChannel=null,J$i._music=null,J$i._channels=[],J$i._autoStopMusic=!1,J$i._blurPaused=!1,J$i._isActive=!0,J$i._soundClass=null,J$i._musicClass=null,J$i.autoReleaseSound=!0,J$i._pool={},J$i.defaultIntervals={},J$i._notUsedUrls={},J$i._notUsedCount=0,J$i}(),J$C=function(){var J$a;function J$c(){}return J$k(J$c,"laya.net.LocalStorage"),J$c.__init__=function(){J$c._baseClass||(J$c._baseClass=J$a).init(),J$c.items=J$c._baseClass.items,J$c.support=J$c._baseClass.support},J$c.setItem=function(J$a,J$b){J$c._baseClass.setItem(J$a,J$b)},J$c.getItem=function(J$a){return J$c._baseClass.getItem(J$a)},J$c.setJSON=function(J$a,J$b){J$c._baseClass.setJSON(J$a,J$b)},J$c.getJSON=function(J$a){return J$c._baseClass.getJSON(J$a)},J$c.removeItem=function(J$a){J$c._baseClass.removeItem(J$a)},J$c.clear=function(){J$c._baseClass.clear()},J$c._baseClass=null,J$c.items=null,J$c.support=!1,J$c.__init$=function(){J$a=function(){function J$c(){}return J$k(J$c,""),J$c.init=function(){try{J$c.support=!0,J$c.items=J$g.localStorage,J$c.setItem("laya","1"),J$c.removeItem("laya")}catch(J$a){J$c.support=!1}J$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},J$c.setItem=function(J$a,J$b){try{J$c.support&&J$c.items.setItem(J$a,J$b)}catch(J$a){console.warn("set localStorage failed",J$a)}},J$c.getItem=function(J$a){return J$c.support?J$c.items.getItem(J$a):null},J$c.setJSON=function(J$a,J$b){try{J$c.support&&J$c.items.setItem(J$a,JSON.stringify(J$b))}catch(J$a){console.warn("set localStorage failed",J$a)}},J$c.getJSON=function(J$a){return JSON.parse(J$c.support?J$c.items.getItem(J$a):null)},J$c.removeItem=function(J$a){J$c.support&&J$c.items.removeItem(J$a)},J$c.clear=function(){J$c.support&&J$c.items.clear()},J$c.items=null,J$c.support=!1,J$c}()},J$c}(),J$H=(function(){function J$d(){}J$k(J$d,"laya.net.ResourceVersion"),J$d.enable=function(J$a,J$b,J$c){void 0===J$c&&(J$c=2),laya.net.ResourceVersion.type=J$c,J$z.loader.load(J$a,J$u.create(null,J$d.onManifestLoaded,[J$b]),null,"json"),J$I.customFormat=J$d.addVersionPrefix},J$d.onManifestLoaded=function(J$a,J$b){J$d.manifest=J$b,J$a.run(),J$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},J$d.addVersionPrefix=function(J$a){return J$d.manifest&&J$d.manifest[J$a]?2==J$d.type?J$d.manifest[J$a]:J$d.manifest[J$a]+"/"+J$a:J$a},J$d.FOLDER_VERSION=1,J$d.FILENAME_VERSION=2,J$d.manifest=null,J$d.type=1}(),function(){function J$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}J$k(J$a,"laya.net.TTFLoader");var J$b=J$a.prototype;return J$b.load=function(J$a){var J$b=(this._url=J$a).split(".ttf")[0].split("/");this.fontName=J$b[J$b.length-1],J$O.window.conch?this._loadConch():J$O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},J$b._loadConch=function(){this._http=new J$ga,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},J$b._onHttpLoaded=function(J$a){J$O.window.conch.setFontFaceFromBuffer(this.fontName,J$a),this._clearHttp(),this._complete()},J$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},J$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},J$b._complete=function(){J$z.timer.clear(this,this._complete),J$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},J$b._checkComplete=function(){J$F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},J$b._loadWithFontFace=function(){var J$a=new J$O.window.FontFace(this.fontName,"url('"+this._url+"')");J$O.window.document.fonts.add(J$a);var J$b=this;J$a.loaded.then(function(){J$b._complete()}),J$a.load()},J$b._createDiv=function(){this._div=J$O.createElement("div"),this._div.innerHTML="laya";var J$a=this._div.style;J$a.fontFamily=this.fontName,J$a.position="absolute",J$a.left="-100px",J$a.top="-100px",J$O.document.body.appendChild(this._div)},J$b._loadWithCSS=function(){var J$a=this,J$b=J$O.createElement("style");J$b.type="text/css",J$O.document.body.appendChild(J$b),J$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=J$F.measureText("LayaTTFFont",this._fontTxt).width;var J$c=this;J$b.onload=function(){J$z.timer.once(1e4,J$c,J$a._complete)},J$z.timer.loop(20,this,this._checkComplete),this._createDiv()},J$a._testString="LayaTTFFont",J$a}()),J$I=function(){function J$d(J$a){this._url=null,this._path=null,this._url=J$d.formatURL(J$a),this._path=J$d.getPath(J$a)}J$k(J$d,"laya.net.URL");var J$a=J$d.prototype;return J$o(0,J$a,"path",function(){return this._path}),J$o(0,J$a,"url",function(){return this._url}),J$d.formatURL=function(J$a,J$b){if(!J$a)return"null path";if(0<J$a.indexOf(":"))return J$a;null!=J$d.customFormat&&(J$a=J$d.customFormat(J$a,J$b));var J$c=J$a.charAt(0);if("."===J$c)return J$d.formatRelativePath((J$b||J$d.basePath)+J$a);if("~"===J$c)return J$d.rootPath+J$a.substring(1);if("d"===J$c){if(0===J$a.indexOf("data:image"))return J$a}else if("/"===J$c)return J$a;return(J$b||J$d.basePath)+J$a},J$d.formatRelativePath=function(J$a){for(var J$b=J$a.split("/"),J$c=0,J$d=J$b.length;J$c<J$d;J$c++)".."==J$b[J$c]&&(J$b.splice(J$c-1,2),J$c-=2);return J$b.join("/")},J$d.isAbsolute=function(J$a){return 0<J$a.indexOf(":")||"/"==J$a.charAt(0)},J$d.getPath=function(J$a){var J$b=J$a.lastIndexOf("/");return 0<J$b?J$a.substr(0,J$b+1):""},J$d.getFileName=function(J$a){var J$b=J$a.lastIndexOf("/");return 0<J$b?J$a.substr(J$b+1):J$a},J$d.version={},J$d.basePath="",J$d.rootPath="",J$d.customFormat=function(J$a){var J$b=J$d.version[J$a];return!J$J.isConchApp&&J$b&&(J$a+="?v="+J$b),J$a},J$d}(),J$J=function(){function J$e(J$a,J$b){this._timeId=0;var J$c=J$e._mainCanvas.source.style;J$c.position="absolute",J$c.top=J$c.left="0px",J$c.background="#000000",J$e._mainCanvas.source.id="layaCanvas";var J$d=laya.renders.Render.isWebGL;J$e._mainCanvas.source.width=J$a,J$e._mainCanvas.source.height=J$b,J$d&&J$e.WebGL.init(J$e._mainCanvas,J$a,J$b),J$O.container.appendChild(J$e._mainCanvas.source),(J$e._context=new J$K(J$a,J$b,J$d?null:J$e._mainCanvas)).ctx.setIsMainContext(),J$O.window.requestAnimationFrame(function J$a(J$b){J$O.window.requestAnimationFrame(J$a);J$z.stage._loop()}),J$z.stage.on("visibilitychange",this,this._onVisibilitychange)}J$k(J$e,"laya.renders.Render");var J$a=J$e.prototype;return J$a._onVisibilitychange=function(){J$z.stage.isVisibility?0!=this._timeId&&J$O.window.clearInterval(this._timeId):this._timeId=J$O.window.setInterval(this._enterFrame,1e3)},J$a._enterFrame=function(J$a){J$z.stage._loop()},J$o(1,J$e,"context",function(){return J$e._context}),J$o(1,J$e,"canvas",function(){return J$e._mainCanvas.source}),J$e._context=null,J$e._mainCanvas=null,J$e.WebGL=null,J$e.isConchNode=!1,J$e.isConchApp=!1,J$e.isConchWebGL=!1,J$e.isWebGL=!1,J$e.is3DMode=!1,J$e.optimizeTextureMemory=function(J$a,J$b){return!0},J$e.__init$=function(){J$g.ConchRenderType=J$g.ConchRenderType||1,J$g.ConchRenderType|=J$g.conch?4:0,J$e.isConchNode=5==(5&J$g.ConchRenderType),J$e.isConchApp=4==(4&J$g.ConchRenderType),J$e.isConchWebGL=6==J$g.ConchRenderType},J$e}(),J$K=function(){function J$g(J$a,J$b,J$c){this.x=0,this.y=0,this._drawTexture=function(J$a,J$b,J$c){J$c[0].loaded&&this.ctx.drawTexture(J$c[0],J$c[1],J$c[2],J$c[3],J$c[4],J$a,J$b)},this._fillTexture=function(J$a,J$b,J$c){J$c[0].loaded&&this.ctx.fillTexture(J$c[0],J$c[1]+J$a,J$c[2]+J$b,J$c[3],J$c[4],J$c[5],J$c[6],J$c[7])},this._drawTextureWithTransform=function(J$a,J$b,J$c){J$c[0].loaded&&this.ctx.drawTextureWithTransform(J$c[0],J$c[1],J$c[2],J$c[3],J$c[4],J$c[5],J$a,J$b,J$c[6])},this._fillQuadrangle=function(J$a,J$b,J$c){this.ctx.fillQuadrangle(J$c[0],J$c[1],J$c[2],J$c[3],J$c[4])},this._drawRect=function(J$a,J$b,J$c){var J$d=this.ctx;null!=J$c[4]&&(J$d.fillStyle=J$c[4],J$d.fillRect(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3],null)),null!=J$c[5]&&(J$d.strokeStyle=J$c[5],J$d.lineWidth=J$c[6],J$d.strokeRect(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3],J$c[6]))},this._drawPie=function(J$a,J$b,J$c){var J$d=this.ctx;J$J.isWebGL&&J$d.setPathId(J$c[8]),J$d.beginPath(),J$J.isWebGL?(J$d.movePath(J$c[0]+J$a,J$c[1]+J$b),J$d.moveTo(0,0)):J$d.moveTo(J$a+J$c[0],J$b+J$c[1]),J$d.arc(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3],J$c[4]),J$d.closePath(),this._fillAndStroke(J$c[5],J$c[6],J$c[7],!0)},this._clipRect=function(J$a,J$b,J$c){this.ctx.clipRect(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3])},this._fillRect=function(J$a,J$b,J$c){this.ctx.fillRect(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3],J$c[4])},this._drawCircle=function(J$a,J$b,J$c){var J$d=this.ctx;J$J.isWebGL&&J$d.setPathId(J$c[6]),J$X.drawCall++,J$d.beginPath(),J$J.isWebGL&&J$d.movePath(J$c[0]+J$a,J$c[1]+J$b),J$d.arc(J$c[0]+J$a,J$c[1]+J$b,J$c[2],0,J$g.PI2),J$d.closePath(),this._fillAndStroke(J$c[3],J$c[4],J$c[5],!0)},this._fillCircle=function(J$a,J$b,J$c){J$X.drawCall++;var J$d=this.ctx;J$d.beginPath(),J$d.fillStyle=J$c[3],J$d.arc(J$c[0]+J$a,J$c[1]+J$b,J$c[2],0,J$g.PI2),J$d.fill()},this._setShader=function(J$a,J$b,J$c){this.ctx.setShader(J$c[0])},this._drawLine=function(J$a,J$b,J$c){var J$d=this.ctx;J$J.isWebGL&&J$d.setPathId(J$c[6]),J$d.beginPath(),J$d.strokeStyle=J$c[4],J$d.lineWidth=J$c[5],J$J.isWebGL?(J$d.movePath(J$a,J$b),J$d.moveTo(J$c[0],J$c[1]),J$d.lineTo(J$c[2],J$c[3])):(J$d.moveTo(J$a+J$c[0],J$b+J$c[1]),J$d.lineTo(J$a+J$c[2],J$b+J$c[3])),J$d.stroke()},this._drawLines=function(J$a,J$b,J$c){var J$d=this.ctx;J$J.isWebGL&&J$d.setPathId(J$c[5]),J$d.beginPath(),J$a+=J$c[0],J$b+=J$c[1],J$J.isWebGL&&J$d.movePath(J$a,J$b),J$d.strokeStyle=J$c[3],J$d.lineWidth=J$c[4];var J$e=J$c[2],J$f=2,J$g=J$e.length;if(J$J.isWebGL)for(J$d.moveTo(J$e[0],J$e[1]);J$f<J$g;)J$d.lineTo(J$e[J$f++],J$e[J$f++]);else for(J$d.moveTo(J$a+J$e[0],J$b+J$e[1]);J$f<J$g;)J$d.lineTo(J$a+J$e[J$f++],J$b+J$e[J$f++]);J$d.stroke()},this._drawLinesWebGL=function(J$a,J$b,J$c){this.ctx.drawLines(J$a+this.x+J$c[0],J$b+this.y+J$c[1],J$c[2],J$c[3],J$c[4])},this._drawCurves=function(J$a,J$b,J$c){this.ctx.drawCurves(J$a,J$b,J$c)},this._draw=function(J$a,J$b,J$c){J$c[0].call(null,this,J$a,J$b)},this._transformByMatrix=function(J$a,J$b,J$c){this.ctx.transformByMatrix(J$c[0])},this._setTransform=function(J$a,J$b,J$c){this.ctx.setTransform(J$c[0],J$c[1],J$c[2],J$c[3],J$c[4],J$c[5])},this._setTransformByMatrix=function(J$a,J$b,J$c){this.ctx.setTransformByMatrix(J$c[0])},this._save=function(J$a,J$b,J$c){this.ctx.save()},this._restore=function(J$a,J$b,J$c){this.ctx.restore()},this._translate=function(J$a,J$b,J$c){this.ctx.translate(J$c[0],J$c[1])},this._transform=function(J$a,J$b,J$c){this.ctx.translate(J$c[1]+J$a,J$c[2]+J$b);var J$d=J$c[0];this.ctx.transform(J$d.a,J$d.b,J$d.c,J$d.d,J$d.tx,J$d.ty),this.ctx.translate(-J$a-J$c[1],-J$b-J$c[2])},this._rotate=function(J$a,J$b,J$c){this.ctx.translate(J$c[1]+J$a,J$c[2]+J$b),this.ctx.rotate(J$c[0]),this.ctx.translate(-J$a-J$c[1],-J$b-J$c[2])},this._scale=function(J$a,J$b,J$c){this.ctx.translate(J$c[2]+J$a,J$c[3]+J$b),this.ctx.scale(J$c[0],J$c[1]),this.ctx.translate(-J$a-J$c[2],-J$b-J$c[3])},this._alpha=function(J$a,J$b,J$c){this.ctx.globalAlpha*=J$c[0]},this._setAlpha=function(J$a,J$b,J$c){this.ctx.globalAlpha=J$c[0]},this._fillText=function(J$a,J$b,J$c){this.ctx.fillText(J$c[0],J$c[1]+J$a,J$c[2]+J$b,J$c[3],J$c[4],J$c[5])},this._strokeText=function(J$a,J$b,J$c){this.ctx.strokeText(J$c[0],J$c[1]+J$a,J$c[2]+J$b,J$c[3],J$c[4],J$c[5],J$c[6])},this._fillBorderText=function(J$a,J$b,J$c){this.ctx.fillBorderText(J$c[0],J$c[1]+J$a,J$c[2]+J$b,J$c[3],J$c[4],J$c[5],J$c[6],J$c[7])},this._blendMode=function(J$a,J$b,J$c){this.ctx.globalCompositeOperation=J$c[0]},this._beginClip=function(J$a,J$b,J$c){this.ctx.beginClip&&this.ctx.beginClip(J$a+J$c[0],J$b+J$c[1],J$c[2],J$c[3])},this._setIBVB=function(J$a,J$b,J$c){this.ctx.setIBVB(J$c[0]+J$a,J$c[1]+J$b,J$c[2],J$c[3],J$c[4],J$c[5],J$c[6],J$c[7])},this._fillTrangles=function(J$a,J$b,J$c){this.ctx.fillTrangles(J$c[0],J$c[1]+J$a,J$c[2]+J$b,J$c[3],J$c[4])},this._drawPath=function(J$a,J$b,J$c){var J$d=this.ctx;J$J.isWebGL&&J$d.setPathId(-1),J$d.beginPath(),J$a+=J$c[0],J$b+=J$c[1],J$J.isWebGL&&J$d.movePath(J$a,J$b);for(var J$e=J$c[2],J$f=0,J$g=J$e.length;J$f<J$g;J$f++){var J$h=J$e[J$f];switch(J$h[0]){case"moveTo":J$J.isWebGL?J$d.moveTo(J$h[1],J$h[2]):J$d.moveTo(J$a+J$h[1],J$b+J$h[2]);break;case"lineTo":J$J.isWebGL?J$d.lineTo(J$h[1],J$h[2]):J$d.lineTo(J$a+J$h[1],J$b+J$h[2]);break;case"arcTo":J$J.isWebGL?J$d.arcTo(J$h[1],J$h[2],J$h[3],J$h[4],J$h[5]):J$d.arcTo(J$a+J$h[1],J$b+J$h[2],J$a+J$h[3],J$b+J$h[4],J$h[5]);break;case"closePath":J$d.closePath()}}var J$i=J$c[3];null!=J$i&&(J$d.fillStyle=J$i.fillStyle,J$d.fill());var J$j=J$c[4];null!=J$j&&(J$d.strokeStyle=J$j.strokeStyle,J$d.lineWidth=J$j.lineWidth||1,J$d.lineJoin=J$j.lineJoin,J$d.lineCap=J$j.lineCap,J$d.miterLimit=J$j.miterLimit,J$d.stroke())},this.drawPoly=function(J$a,J$b,J$c){this.ctx.drawPoly(J$a+this.x+J$c[0],J$b+this.y+J$c[1],J$c[2],J$c[3],J$c[4],J$c[5],J$c[6])},this._drawPoly=function(J$a,J$b,J$c){var J$d=this.ctx,J$e=J$c[2],J$f=2,J$g=J$e.length;if(J$J.isWebGL)for(J$d.setPathId(J$c[6]),J$d.beginPath(),J$a+=J$c[0],J$b+=J$c[1],J$d.movePath(J$a,J$b),J$d.moveTo(J$e[0],J$e[1]);J$f<J$g;)J$d.lineTo(J$e[J$f++],J$e[J$f++]);else for(J$d.beginPath(),J$a+=J$c[0],J$b+=J$c[1],J$d.moveTo(J$a+J$e[0],J$b+J$e[1]);J$f<J$g;)J$d.lineTo(J$a+J$e[J$f++],J$b+J$e[J$f++]);J$d.closePath(),this._fillAndStroke(J$c[3],J$c[4],J$c[5],J$c[7])},this._drawSkin=function(J$a,J$b,J$c){var J$d=J$c[0];if(J$d){var J$e=this.ctx;J$d.render(J$e,J$a,J$b)}},this._drawParticle=function(J$a,J$b,J$c){this.ctx.drawParticle(J$a+this.x,J$b+this.y,J$c[0])},this._setFilters=function(J$a,J$b,J$c){this.ctx.setFilters(J$c)},J$c?this.ctx=J$c.getContext("2d"):(J$c=J$va.create("3D"),this.ctx=J$F.createWebGLContext2D(J$c),J$c._setContext(this.ctx)),J$c.size(J$a,J$b),this.canvas=J$c}J$k(J$g,"laya.renders.RenderContext");var J$a=J$g.prototype;return J$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},J$a.drawTexture=function(J$a,J$b,J$c,J$d,J$e){J$a.loaded&&this.ctx.drawTexture(J$a,J$b,J$c,J$d,J$e,this.x,this.y)},J$a._drawTextures=function(J$a,J$b,J$c){J$c[0].loaded&&this.ctx.drawTextures(J$c[0],J$c[1],J$a+this.x,J$b+this.y)},J$a.drawTextureWithTransform=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$a.loaded&&this.ctx.drawTextureWithTransform(J$a,J$b,J$c,J$d,J$e,J$f,this.x,this.y,J$g)},J$a.fillQuadrangle=function(J$a,J$b,J$c,J$d,J$e){this.ctx.fillQuadrangle(J$a,J$b,J$c,J$d,J$e)},J$a.drawCanvas=function(J$a,J$b,J$c,J$d,J$e){this.ctx.drawCanvas(J$a,J$b+this.x,J$c+this.y,J$d,J$e)},J$a.drawRect=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=1);var J$g=this.ctx;J$g.strokeStyle=J$e,J$g.lineWidth=J$f,J$g.strokeRect(J$a+this.x,J$b+this.y,J$c,J$d,J$f)},J$a._fillAndStroke=function(J$a,J$b,J$c,J$d){void 0===J$d&&(J$d=!1);var J$e=this.ctx;null!=J$a&&(J$e.fillStyle=J$a,J$J.isWebGL?J$e.fill(J$d):J$e.fill()),null!=J$b&&0<J$c&&(J$e.strokeStyle=J$b,J$e.lineWidth=J$c,J$e.stroke())},J$a.clipRect=function(J$a,J$b,J$c,J$d){this.ctx.clipRect(J$a+this.x,J$b+this.y,J$c,J$d)},J$a.fillRect=function(J$a,J$b,J$c,J$d,J$e){this.ctx.fillRect(J$a+this.x,J$b+this.y,J$c,J$d,J$e)},J$a.drawCircle=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=1),J$X.drawCall++;var J$f=this.ctx;J$f.beginPath(),J$f.strokeStyle=J$d,J$f.lineWidth=J$e,J$f.arc(J$a+this.x,J$b+this.y,J$c,0,J$g.PI2),J$f.stroke()},J$a.drawTriangles=function(J$a,J$b,J$c){if(J$J.isWebGL)this.ctx.drawTriangles(J$c[0],J$a+J$c[1],J$b+J$c[2],J$c[3],J$c[4],J$c[5],J$c[6],J$c[7],J$c[8],J$c[9]);else{var J$d=J$c[5],J$e=0,J$f=J$d.length,J$g=this.ctx;for(J$e=0;J$e<J$f;J$e+=3){var J$h=2*J$d[J$e],J$i=2*J$d[J$e+1],J$j=2*J$d[J$e+2];J$g.drawTriangle(J$c[0],J$c[3],J$c[4],J$h,J$i,J$j,J$c[6],!0)}}},J$a.fillCircle=function(J$a,J$b,J$c,J$d){J$X.drawCall++;var J$e=this.ctx;J$e.beginPath(),J$e.fillStyle=J$d,J$e.arc(J$a+this.x,J$b+this.y,J$c,0,J$g.PI2),J$e.fill()},J$a.setShader=function(J$a){this.ctx.setShader(J$a)},J$a.drawLine=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=1);var J$g=this.ctx;J$g.beginPath(),J$g.strokeStyle=J$e,J$g.lineWidth=J$f,J$g.moveTo(this.x+J$a,this.y+J$b),J$g.lineTo(this.x+J$c,this.y+J$d),J$g.stroke()},J$a.clear=function(){this.ctx.clear()},J$a.transformByMatrix=function(J$a){this.ctx.transformByMatrix(J$a)},J$a.setTransform=function(J$a,J$b,J$c,J$d,J$e,J$f){this.ctx.setTransform(J$a,J$b,J$c,J$d,J$e,J$f)},J$a.setTransformByMatrix=function(J$a){this.ctx.setTransformByMatrix(J$a)},J$a.save=function(){this.ctx.save()},J$a.restore=function(){this.ctx.restore()},J$a.translate=function(J$a,J$b){this.ctx.translate(J$a,J$b)},J$a.transform=function(J$a,J$b,J$c,J$d,J$e,J$f){this.ctx.transform(J$a,J$b,J$c,J$d,J$e,J$f)},J$a.rotate=function(J$a){this.ctx.rotate(J$a)},J$a.scale=function(J$a,J$b){this.ctx.scale(J$a,J$b)},J$a.alpha=function(J$a){this.ctx.globalAlpha*=J$a},J$a.setAlpha=function(J$a){this.ctx.globalAlpha=J$a},J$a.fillWords=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$f&&(J$f=0),this.ctx.fillWords(J$a,J$b,J$c,J$d,J$e,J$f)},J$a.fillBorderWords=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this.ctx.fillBorderWords(J$a,J$b,J$c,J$d,J$e,J$f,J$g)},J$a.fillText=function(J$a,J$b,J$c,J$d,J$e,J$f){this.ctx.fillText(J$a,J$b+this.x,J$c+this.y,J$d,J$e,J$f)},J$a.strokeText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this.ctx.strokeText(J$a,J$b+this.x,J$c+this.y,J$d,J$e,J$f,J$g)},J$a.blendMode=function(J$a){this.ctx.globalCompositeOperation=J$a},J$a.flush=function(){this.ctx.flush&&this.ctx.flush()},J$a.addRenderObject=function(J$a){this.ctx.addRenderObject(J$a)},J$a.beginClip=function(J$a,J$b,J$c,J$d){this.ctx.beginClip&&this.ctx.beginClip(J$a,J$b,J$c,J$d)},J$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},J$a.fillTrangles=function(J$a,J$b,J$c){this.ctx.fillTrangles(J$c[0],J$c[1],J$c[2],J$c[3],4<J$c.length?J$c[4]:null)},J$g.PI2=2*Math.PI,J$g}(),J$L=function(){function J$g(J$a,J$b){switch(this._next=J$b||J$g.NORENDER,J$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=J$r._filter);case 69905:return void(this._fun=J$g._initRenderFun)}this.onCreate(J$a)}J$k(J$g,"laya.renders.RenderSprite");var J$a=J$g.prototype;return J$a.onCreate=function(J$a){},J$a._style=function(J$a,J$b,J$c,J$d){J$a._style.render(J$a,J$b,J$c,J$d);var J$e=this._next;J$e._fun.call(J$e,J$a,J$b,J$c,J$d)},J$a._no=function(J$a,J$b,J$c,J$d){},J$a._custom=function(J$a,J$b,J$c,J$d){J$a.customRender(J$b,J$c,J$d);var J$e=J$a._style._tf;this._next._fun.call(this._next,J$a,J$b,J$c-J$e.translateX,J$d-J$e.translateY)},J$a._clip=function(J$a,J$b,J$c,J$d){var J$e=this._next;if(J$e!=J$g.NORENDER){var J$f=J$a._style.scrollRect;J$b.ctx.save(),J$b.ctx.clipRect(J$c,J$d,J$f.width,J$f.height),J$e._fun.call(J$e,J$a,J$b,J$c-J$f.x,J$d-J$f.y),J$b.ctx.restore()}},J$a._blend=function(J$a,J$b,J$c,J$d){var J$e=J$a._style;J$e.blendMode&&(J$b.ctx.globalCompositeOperation=J$e.blendMode);var J$f=this._next;J$f._fun.call(J$f,J$a,J$b,J$c,J$d),J$b.ctx.globalCompositeOperation="source-over"},J$a._mask=function(J$a,J$b,J$c,J$d){var J$e=this._next;J$e._fun.call(J$e,J$a,J$b,J$c,J$d);var J$f=J$a.mask;J$f&&(J$b.ctx.globalCompositeOperation="destination-in",(0<J$f.numChildren||!J$f.graphics._isOnlyOne())&&(J$f.cacheAsBitmap=!0),J$f.render(J$b,J$c-J$a.pivotX,J$d-J$a.pivotY)),J$b.ctx.globalCompositeOperation="source-over"},J$a._graphics=function(J$a,J$b,J$c,J$d){var J$e=J$a._style._tf;J$a._graphics&&J$a._graphics._render(J$a,J$b,J$c-J$e.translateX,J$d-J$e.translateY);var J$f=this._next;J$f._fun.call(J$f,J$a,J$b,J$c,J$d)},J$a._image=function(J$a,J$b,J$c,J$d){var J$e=J$a._style;J$b.ctx.drawTexture2(J$c,J$d,J$e._tf.translateX,J$e._tf.translateY,J$a.transform,J$e.alpha,J$e.blendMode,J$a._graphics._one)},J$a._image2=function(J$a,J$b,J$c,J$d){var J$e=J$a._style._tf;J$b.ctx.drawTexture2(J$c,J$d,J$e.translateX,J$e.translateY,J$a.transform,1,null,J$a._graphics._one)},J$a._alpha=function(J$a,J$b,J$c,J$d){var J$e;if(.01<(J$e=J$a._style.alpha)||J$a._needRepaint()){var J$f=J$b.ctx.globalAlpha;J$b.ctx.globalAlpha*=J$e;var J$g=this._next;J$g._fun.call(J$g,J$a,J$b,J$c,J$d),J$b.ctx.globalAlpha=J$f}},J$a._transform=function(J$a,J$b,J$c,J$d){var J$e=J$a.transform,J$f=this._next;J$e&&J$f!=J$g.NORENDER?(J$b.save(),J$b.transform(J$e.a,J$e.b,J$e.c,J$e.d,J$e.tx+J$c,J$e.ty+J$d),J$f._fun.call(J$f,J$a,J$b,0,0),J$b.restore()):J$f._fun.call(J$f,J$a,J$b,J$c,J$d)},J$a._childs=function(J$a,J$b,J$c,J$d){var J$e=J$a._style,J$f=J$e._tf;if(J$c=J$c-J$f.translateX+J$e.paddingLeft,J$d=J$d-J$f.translateY+J$e.paddingTop,J$e._calculation){var J$g=J$a._getWords();if(J$g){var J$h=J$e;J$h&&(J$h.stroke?J$b.fillBorderWords(J$g,J$c,J$d,J$h.font,J$h.color,J$h.strokeColor,J$h.stroke):J$b.fillWords(J$g,J$c,J$d,J$h.font,J$h.color,"none"!=J$h.textDecoration&&J$h.underLine?1:0))}}var J$i,J$j=J$a._childs,J$k=J$j.length;if(J$a.viewport||J$a.optimizeScrollRect&&J$a._style.scrollRect){var J$l=J$a.viewport||J$a._style.scrollRect,J$m=J$l.x,J$n=J$l.y,J$o=J$l.right,J$p=J$l.bottom,J$q=NaN,J$r=NaN;for(J$u=0;J$u<J$k;++J$u)(J$i=J$j[J$u]).visible&&(J$q=J$i._x)<J$o&&J$q+J$i.width>J$m&&(J$r=J$i._y)<J$p&&J$r+J$i.height>J$n&&J$i.render(J$b,J$c,J$d)}else for(var J$u=0;J$u<J$k;++J$u)(J$i=J$j[J$u])._style.visible&&J$i.render(J$b,J$c,J$d)},J$a._canvas=function(J$a,J$b,J$c,J$d){var J$e=J$a._$P.cacheCanvas;if(J$e){"bitmap"===J$e.type?J$X.canvasBitmap++:J$X.canvasNormal++;var J$f=J$e.ctx;if(J$a._needRepaint()||!J$f)this._canvas_repaint(J$a,J$b,J$c,J$d);else{var J$g=J$e._cacheRec;J$b.drawCanvas(J$f.canvas,J$c+J$g.x,J$d+J$g.y,J$g.width,J$g.height)}}else this._next._fun.call(this._next,J$a,J$b,J$c,J$d)},J$a._canvas_repaint=function(J$a,J$b,J$c,J$d){var J$e=J$a._$P.cacheCanvas,J$f=this._next;if(J$e){var J$g,J$h,J$i,J$j,J$k=J$e.ctx,J$l=J$a._needRepaint()||!J$k,J$m=J$e.type;if("bitmap"===J$m?J$X.canvasBitmap++:J$X.canvasNormal++,J$l){var J$n,J$o;J$e._cacheRec||(J$e._cacheRec=new J$B),J$J.isWebGL&&"bitmap"!==J$m?J$e._cacheRec.setTo(-J$a.pivotX,-J$a.pivotY,1,1):((J$j=J$a.getSelfBounds()).x=J$j.x-J$a.pivotX,J$j.y=J$j.y-J$a.pivotY,J$j.x=J$j.x-16,J$j.y=J$j.y-16,J$j.width=J$j.width+32,J$j.height=J$j.height+32,J$j.x=Math.floor(J$j.x+J$c)-J$c,J$j.y=Math.floor(J$j.y+J$d)-J$d,J$j.width=Math.floor(J$j.width),J$j.height=Math.floor(J$j.height),J$e._cacheRec.copyFrom(J$j)),J$j=J$e._cacheRec;var J$p,J$q=J$J.isWebGL?1:J$O.pixelRatio*J$z.stage.clientScaleX,J$r=J$J.isWebGL?1:J$O.pixelRatio*J$z.stage.clientScaleY;if(!J$J.isWebGL){var J$u,J$v=1,J$w=1;for(J$u=J$a;J$u&&J$u!=J$z.stage;)J$v*=J$u.scaleX,J$w*=J$u.scaleY,J$u=J$u.parent;J$J.isWebGL?(J$v<1&&(J$q*=J$v),J$w<1&&(J$r*=J$w)):(1<J$v&&(J$q*=J$v),1<J$w&&(J$r*=J$w))}if(J$a.scrollRect){var J$x=J$a.scrollRect;J$j.x-=J$x.x,J$j.y-=J$x.y}if(J$n=J$j.width*J$q,J$o=J$j.height*J$r,J$h=J$j.x,J$i=J$j.y,J$J.isWebGL&&"bitmap"===J$m&&(2048<J$n||2048<J$o))return console.warn("cache bitmap size larger than 2048,cache ignored"),J$e.ctx&&(J$W.recover("RenderContext",J$e.ctx),J$e.ctx.canvas.size(0,0),J$e.ctx=null),void J$f._fun.call(J$f,J$a,J$b,J$c,J$d);if(J$k||(J$k=J$e.ctx=J$W.getItem("RenderContext")||new J$K(J$n,J$o,J$va.create("AUTO"))),J$k.ctx.sprite=J$a,(J$g=J$k.canvas).clear(),(J$g.width!=J$n||J$g.height!=J$o)&&J$g.size(J$n,J$o),"bitmap"===J$m?J$g.context.asBitmap=!0:"normal"===J$m&&(J$g.context.asBitmap=!1),1!=J$q||1!=J$r){var J$y=J$k.ctx;J$y.save(),J$y.scale(J$q,J$r),!J$J.isConchWebGL&&J$J.isConchApp&&(J$p=J$a._$P.cf)&&J$y.setFilterMatrix&&J$y.setFilterMatrix(J$p._mat,J$p._alpha),J$f._fun.call(J$f,J$a,J$k,-J$h,-J$i),J$y.restore(),J$J.isConchApp&&!J$J.isConchWebGL||J$a._applyFilters()}else J$y=J$k.ctx,!J$J.isConchWebGL&&J$J.isConchApp&&(J$p=J$a._$P.cf)&&J$y.setFilterMatrix&&J$y.setFilterMatrix(J$p._mat,J$p._alpha),J$f._fun.call(J$f,J$a,J$k,-J$h,-J$i),J$J.isConchApp&&!J$J.isConchWebGL||J$a._applyFilters();J$a._$P.staticCache&&(J$e.reCache=!1),J$X.canvasReCache++}else J$h=(J$j=J$e._cacheRec).x,J$i=J$j.y,J$g=J$k.canvas;J$b.drawCanvas(J$g,J$c+J$h,J$d+J$i,J$j.width,J$j.height)}else J$f._fun.call(J$f,J$a,J$k,J$c,J$d)},J$g.__init__=function(){var J$a,J$b,J$c=0;for(J$b=J$F.createRenderSprite(69905,null),J$a=J$g.renders.length=4096,J$c=0;J$c<J$a;J$c++)J$g.renders[J$c]=J$b;J$g.renders[0]=J$F.createRenderSprite(0,null),function(J$a,J$b){for(var J$c=0,J$d=0;J$d<J$a.length;J$d++)J$c|=J$a[J$d],J$g.renders[J$c]=J$b}([1,512,4,2],new J$g(1,null)),J$g.renders[513]=J$F.createRenderSprite(513,null),J$g.renders[517]=new J$g(517,null)},J$g._initRenderFun=function(J$a,J$b,J$c,J$d){var J$e=J$a._renderType;(J$g.renders[J$e]=J$g._getTypeRender(J$e))._fun(J$a,J$b,J$c,J$d)},J$g._getTypeRender=function(J$a){for(var J$b=null,J$c=2048;1<J$c;)J$c&J$a&&(J$b=J$F.createRenderSprite(J$c,J$b)),J$c>>=1;return J$b},J$g.IMAGE=1,J$g.ALPHA=2,J$g.TRANSFORM=4,J$g.BLEND=8,J$g.CANVAS=16,J$g.FILTERS=32,J$g.MASK=64,J$g.CLIP=128,J$g.STYLE=256,J$g.GRAPHICS=512,J$g.CUSTOM=1024,J$g.CHILDS=2048,J$g.INIT=69905,J$g.renders=[],J$g.NORENDER=new J$g(0,null),J$g}(),J$M=function(){function J$h(){this._repaint=!1}J$k(J$h,"laya.resource.Context");var J$a=J$h.prototype;return J$a.replaceReset=function(){var J$a,J$b,J$c=0;for(J$a=J$h.replaceKeys.length,J$c=0;J$c<J$a;J$c++)J$b=J$h.replaceKeys[J$c],this[J$h.newKeys[J$c]]=this[J$b]},J$a.replaceResotre=function(){this.__restore(),this.__reset()},J$a.setIsMainContext=function(){},J$a.drawTextures=function(J$a,J$b,J$c,J$d){J$X.drawCall+=J$b.length/2;for(var J$e=J$a.width,J$f=J$a.height,J$g=0,J$h=J$b.length;J$g<J$h;J$g+=2)this.drawTexture(J$a,J$b[J$g],J$b[J$g+1],J$e,J$f,J$c,J$d)},J$a.drawCanvas=function(J$a,J$b,J$c,J$d,J$e){J$X.drawCall++,this.drawImage(J$a.source,J$b,J$c,J$d,J$e)},J$a.fillRect=function(J$a,J$b,J$c,J$d,J$e){J$X.drawCall++,J$e&&(this.fillStyle=J$e),this.__fillRect(J$a,J$b,J$c,J$d)},J$a.fillText=function(J$a,J$b,J$c,J$d,J$e,J$f){J$X.drawCall++,3<arguments.length&&null!=J$d&&(this.font=J$d,this.fillStyle=J$e,this.textAlign=J$f,this.textBaseline="top"),this.__fillText(J$a,J$b,J$c)},J$a.fillBorderText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){J$X.drawCall++,this.font=J$d,this.fillStyle=J$e,this.textBaseline="top",this.strokeStyle=J$f,this.lineWidth=J$g,this.textAlign=J$h,this.__strokeText(J$a,J$b,J$c),this.__fillText(J$a,J$b,J$c)},J$a.strokeText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$X.drawCall++,3<arguments.length&&null!=J$d&&(this.font=J$d,this.strokeStyle=J$e,this.lineWidth=J$f,this.textAlign=J$g,this.textBaseline="top"),this.__strokeText(J$a,J$b,J$c)},J$a.transformByMatrix=function(J$a){this.transform(J$a.a,J$a.b,J$a.c,J$a.d,J$a.tx,J$a.ty)},J$a.setTransformByMatrix=function(J$a){this.setTransform(J$a.a,J$a.b,J$a.c,J$a.d,J$a.tx,J$a.ty)},J$a.clipRect=function(J$a,J$b,J$c,J$d){J$X.drawCall++,this.beginPath(),this.rect(J$a,J$b,J$c,J$d),this.clip()},J$a.drawTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$X.drawCall++;var J$h=J$a.uv,J$i=J$a.bitmap.width,J$j=J$a.bitmap.height;this.drawImage(J$a.source,J$h[0]*J$i,J$h[1]*J$j,(J$h[2]-J$h[0])*J$i,(J$h[5]-J$h[3])*J$j,J$b+J$f,J$c+J$g,J$d,J$e)},J$a.drawTextureWithTransform=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){J$X.drawCall++;var J$j=J$a.uv,J$k=J$a.bitmap.width,J$l=J$a.bitmap.height;this.save(),1!=J$i&&(this.globalAlpha*=J$i),J$f?(this.transform(J$f.a,J$f.b,J$f.c,J$f.d,J$f.tx+J$g,J$f.ty+J$h),this.drawImage(J$a.source,J$j[0]*J$k,J$j[1]*J$l,(J$j[2]-J$j[0])*J$k,(J$j[5]-J$j[3])*J$l,J$b,J$c,J$d,J$e)):this.drawImage(J$a.source,J$j[0]*J$k,J$j[1]*J$l,(J$j[2]-J$j[0])*J$k,(J$j[5]-J$j[3])*J$l,J$b+J$g,J$c+J$h,J$d,J$e),this.restore()},J$a.drawTexture2=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=J$h[0];if(J$i.loaded&&J$i.bitmap&&J$i.source){J$X.drawCall++;var J$j=1!==J$f;if(J$j){var J$k=this.globalAlpha;this.globalAlpha*=J$f}var J$l=J$i.uv,J$m=J$i.bitmap.width,J$n=J$i.bitmap.height;J$e?(this.save(),this.transform(J$e.a,J$e.b,J$e.c,J$e.d,J$e.tx+J$a,J$e.ty+J$b),this.drawImage(J$i.source,J$l[0]*J$m,J$l[1]*J$n,(J$l[2]-J$l[0])*J$m,(J$l[5]-J$l[3])*J$n,J$h[1]-J$c,J$h[2]-J$d,J$h[3],J$h[4]),this.restore()):this.drawImage(J$i.source,J$l[0]*J$m,J$l[1]*J$n,(J$l[2]-J$l[0])*J$m,(J$l[5]-J$l[3])*J$n,J$h[1]-J$c+J$a,J$h[2]-J$d+J$b,J$h[3],J$h[4]),J$j&&(this.globalAlpha=J$k)}},J$a.fillTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){if(!J$h.pat){if(J$a.uv!=J$ka.DEF_UV){var J$i=new J$va("2D");J$i.getContext("2d"),J$i.size(J$a.width,J$a.height),J$i.context.drawTexture(J$a,0,0,J$a.width,J$a.height,0,0),J$a=new J$ka(J$i)}J$h.pat=this.createPattern(J$a.bitmap.source,J$f)}var J$j=J$b,J$k=J$c,J$l=0,J$m=0;J$g&&(J$j+=J$g.x%J$a.width,J$k+=J$g.y%J$a.height,J$l-=J$g.x%J$a.width,J$m-=J$g.y%J$a.height),this.translate(J$j,J$k),this.fillRect(J$l,J$m,J$d,J$e,J$h.pat),this.translate(-J$j,-J$k)},J$a.drawTriangle=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=J$a.bitmap,J$j=J$i.source,J$k=J$a.width,J$l=J$a.height,J$m=J$i.width,J$n=J$i.height,J$o=J$c[J$d]*J$m,J$p=J$c[J$e]*J$m,J$q=J$c[J$f]*J$m,J$r=J$c[J$d+1]*J$n,J$u=J$c[J$e+1]*J$n,J$v=J$c[J$f+1]*J$n,J$w=J$b[J$d],J$x=J$b[J$e],J$y=J$b[J$f],J$z=J$b[J$d+1],J$A=J$b[J$e+1],J$B=J$b[J$f+1];if(J$h){var J$C=(J$w+J$x+J$y)/3,J$D=(J$z+J$A+J$B)/3,J$E=J$w-J$C,J$F=J$z-J$D,J$G=Math.sqrt(J$E*J$E+J$F*J$F);J$w=J$C+J$E/J$G*(J$G+1),J$z=J$D+J$F/J$G*(J$G+1),J$F=J$A-J$D,J$x=J$C+(J$E=J$x-J$C)/(J$G=Math.sqrt(J$E*J$E+J$F*J$F))*(J$G+1),J$A=J$D+J$F/J$G*(J$G+1),J$F=J$B-J$D,J$y=J$C+(J$E=J$y-J$C)/(J$G=Math.sqrt(J$E*J$E+J$F*J$F))*(J$G+1),J$B=J$D+J$F/J$G*(J$G+1)}this.save(),J$g&&this.transform(J$g.a,J$g.b,J$g.c,J$g.d,J$g.tx,J$g.ty),this.beginPath(),this.moveTo(J$w,J$z),this.lineTo(J$x,J$A),this.lineTo(J$y,J$B),this.closePath(),this.clip();var J$H=1/(J$o*J$u+J$r*J$q+J$p*J$v-J$u*J$q-J$r*J$p-J$o*J$v),J$I=J$w*J$u+J$r*J$y+J$x*J$v-J$u*J$y-J$r*J$x-J$w*J$v,J$J=J$o*J$x+J$w*J$q+J$p*J$y-J$x*J$q-J$w*J$p-J$o*J$y,J$K=J$o*J$u*J$y+J$r*J$x*J$q+J$w*J$p*J$v-J$w*J$u*J$q-J$r*J$p*J$y-J$o*J$x*J$v,J$L=J$z*J$u+J$r*J$B+J$A*J$v-J$u*J$B-J$r*J$A-J$z*J$v,J$M=J$o*J$A+J$z*J$q+J$p*J$B-J$A*J$q-J$z*J$p-J$o*J$B,J$N=J$o*J$u*J$B+J$r*J$A*J$q+J$z*J$p*J$v-J$z*J$u*J$q-J$r*J$p*J$B-J$o*J$A*J$v;this.transform(J$I*J$H,J$L*J$H,J$J*J$H,J$M*J$H,J$K*J$H,J$N*J$H),this.drawImage(J$j,J$a.uv[0]*J$m,J$a.uv[1]*J$n,J$k,J$l,J$a.uv[0]*J$m,J$a.uv[1]*J$n,J$k,J$l),this.restore()},J$a.flush=function(){return 0},J$a.fillWords=function(J$a,J$b,J$c,J$d,J$e,J$f){J$d&&(this.font=J$d),J$e&&(this.fillStyle=J$e);this.textBaseline="top",this.textAlign="left";for(var J$g=0,J$h=J$a.length;J$g<J$h;J$g++){var J$i=J$a[J$g];if(this.__fillText(J$i.char,J$i.x+J$b,J$i.y+J$c),1===J$f){var J$j=J$i.height,J$k=.5*J$i.style.letterSpacing;J$k||(J$k=0),this.beginPath(),this.strokeStyle=J$e,this.lineWidth=1,this.moveTo(J$b+J$i.x-J$k+.5,J$c+J$i.y+J$j+.5),this.lineTo(J$b+J$i.x+J$i.width+J$k+.5,J$c+J$i.y+J$j+.5),this.stroke()}}},J$a.fillBorderWords=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$d&&(this.font=J$d),J$e&&(this.fillStyle=J$e),this.textBaseline="top",this.lineWidth=J$g,this.textAlign="left",this.strokeStyle=J$f;for(var J$h=0,J$i=J$a.length;J$h<J$i;J$h++){var J$j=J$a[J$h];this.__strokeText(J$j.char,J$j.x+J$b,J$j.y+J$c),this.__fillText(J$j.char,J$j.x+J$b,J$j.y+J$c)}},J$a.destroy=function(){this.canvas.width=this.canvas.height=0},J$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},J$a.drawCurves=function(J$a,J$b,J$c){this.beginPath(),this.strokeStyle=J$c[3],this.lineWidth=J$c[4];var J$d=J$c[2];J$a+=J$c[0],J$b+=J$c[1],this.moveTo(J$a+J$d[0],J$b+J$d[1]);for(var J$e=2,J$f=J$d.length;J$e<J$f;)this.quadraticCurveTo(J$a+J$d[J$e++],J$b+J$d[J$e++],J$a+J$d[J$e++],J$b+J$d[J$e++]);this.stroke()},J$h.__init__=function(J$b){var J$c=laya.resource.Context.prototype;if(!(J$b=J$b||CanvasRenderingContext2D.prototype).inited){J$b.inited=!0,J$b.__fillText=J$b.fillText,J$b.__fillRect=J$b.fillRect,J$b.__strokeText=J$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(J$a){J$b[J$a]=J$c[J$a]})}},J$h.replaceCanvasGetSet=function(J$a,J$b){var J$c=Object.getOwnPropertyDescriptor(J$a,J$b);if(!J$c||!J$c.configurable)return!1;var J$d,J$e={};for(J$d in J$c)"set"!=J$d&&(J$e[J$d]=J$c[J$d]);var J$f=J$c.set;return J$e.set=function(J$a){J$f.call(this,J$a);var J$b=this.getContext("2d");J$b&&"__reset"in J$b&&J$b.__reset()},Object.defineProperty(J$a,J$b,J$e),!0},J$h.replaceGetSet=function(J$a,J$b){var J$c=Object.getOwnPropertyDescriptor(J$a,J$b);if(!J$c||!J$c.configurable)return!1;var J$d,J$e={};for(J$d in J$c)"set"!=J$d&&(J$e[J$d]=J$c[J$d]);var J$f=J$c.set,J$g="___"+J$b+"__";return J$h.newKeys.push(J$g),J$e.set=function(J$a){J$a!=this[J$g]&&(this[J$g]=J$a,J$f.call(this,J$a))},Object.defineProperty(J$a,J$b,J$e),!0},J$h._default=new J$h,J$h.newKeys=[],J$i(J$h,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),J$h}(),J$N=function(){function J$f(J$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++J$f._uniqueIDCounter,this._name=J$a||"Content Manager",J$f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,J$f._resourceManagers.push(this),this._resources=[],this._records={}}J$k(J$f,"laya.resource.ResourceManager");var J$a=J$f.prototype;return J$z.imps(J$a,{"laya.resource.IDispose":!0}),J$a.getResourceByIndex=function(J$a){return this._resources[J$a]},J$a.getResourcesLength=function(){return this._resources.length},J$a.addResource=function(J$a){return J$a.resourceManager&&J$a.resourceManager.removeResource(J$a),-1===this._resources.indexOf(J$a)&&((J$a._resourceManager=this)._resources.push(J$a),this.addRecord(J$a.uri,J$a.__className,J$a.memorySize),this.addSize(J$a.memorySize),!0)},J$a.removeResource=function(J$a){var J$b=this._resources.indexOf(J$a);return-1!==J$b&&(this._resources.splice(J$b,1),J$a._resourceManager=null,this._memorySize-=J$a.memorySize,this.addRecord(J$a.uri,J$a.__className,-J$a.memorySize),!0)},J$a.unload=function(){for(var J$a=this._resources.slice(0,this._resources.length),J$b=0;J$b<J$a.length;J$b++){J$a[J$b].destroy()}J$a.length=0},J$a.dispose=function(){if(this===J$f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");J$f._resourceManagers.splice(J$f._resourceManagers.indexOf(this),1),J$f._isResourceManagersSorted=!1;for(var J$a=this._resources.slice(0,this._resources.length),J$b=0;J$b<J$a.length;J$b++){var J$c=J$a[J$b];J$c.resourceManager.removeResource(J$c),J$c.destroy()}J$a.length=0},J$a.addSize=function(J$a){J$a&&(this.autoRelease&&0<J$a&&this._memorySize+J$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=J$a)},J$a.addRecord=function(J$a,J$b,J$c){DEBUG&&J$c&&!J$a&&console.error(J$a,J$b,J$c)},J$a.garbageCollection=function(J$a){var J$b=this._resources;(J$b=J$b.slice()).sort(function(J$a,J$b){if(!J$a||!J$b)throw new Error("a或b不能为空！");return J$a.released&&J$b.released?0:J$a.released?1:J$b.released?-1:J$a._lastUseFrameCount-J$b._lastUseFrameCount});for(var J$c=J$X.loopCount,J$d=0,J$e=J$b.length;J$d<J$e;J$d++){var J$f=J$b[J$d];if(!(1<J$c-J$f._lastUseFrameCount))return void(this._memorySize>=J$a&&(this._isOverflow=!0));if(J$f.releaseResource(),this._memorySize<J$a)return void(this._isOverflow=!1)}},J$o(0,J$a,"id",function(){return this._id}),J$o(0,J$a,"name",function(){return this._name},function(J$a){!J$a&&""===J$a||this._name===J$a||(this._name=J$a,J$f._isResourceManagersSorted=!1)}),J$o(0,J$a,"memorySize",function(){return this._memorySize}),J$o(0,J$a,"records",function(){return this._records}),J$o(1,J$f,"systemResourceManager",function(){return J$f._systemResourceManager}),J$f.__init__=function(){J$f.currentResourceManager=J$f.systemResourceManager},J$f.getLoadedResourceManagerByIndex=function(J$a){return J$f._resourceManagers[J$a]},J$f.getLoadedResourceManagersCount=function(){return J$f._resourceManagers.length},J$f.recreateContentManagers=function(J$a){void 0===J$a&&(J$a=!1);for(var J$b=J$f.currentResourceManager,J$c=0;J$c<J$f._resourceManagers.length;J$c++){J$f.currentResourceManager=J$f._resourceManagers[J$c];for(var J$d=0;J$d<J$f.currentResourceManager._resources.length;J$d++)J$f.currentResourceManager._resources[J$d].releaseResource(J$a),J$f.currentResourceManager._resources[J$d].activeResource(J$a)}J$f.currentResourceManager=J$b},J$f.releaseContentManagers=function(J$a){void 0===J$a&&(J$a=!1);for(var J$b=J$f.currentResourceManager,J$c=0;J$c<J$f._resourceManagers.length;J$c++){J$f.currentResourceManager=J$f._resourceManagers[J$c];for(var J$d=0;J$d<J$f.currentResourceManager._resources.length;J$d++){var J$e=J$f.currentResourceManager._resources[J$d];!J$e.released&&J$e.releaseResource(J$a)}}J$f.currentResourceManager=J$b},J$f._uniqueIDCounter=0,J$f._isResourceManagersSorted=!1,J$f._resourceManagers=[],J$i(J$f,["_systemResourceManager",function(){return this._systemResourceManager=new J$f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=J$f._systemResourceManager}]),J$f}(),J$O=(function(){function J$a(){}J$k(J$a,"laya.system.System"),J$a.changeDefinition=function(J$a,J$b){J$z[J$a]=J$b;var J$c=J$a+"=classObj";J$z._runScript(J$c)},J$a.__init__=function(){J$J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function J$c(){}return J$k(J$c,"laya.utils.Browser"),J$o(1,J$c,"pixelRatio",function(){return J$c.__init__(),-1<J$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:J$F.getPixelRatio()}),J$o(1,J$c,"height",function(){return J$c.__init__(),(J$z.stage&&J$z.stage.canvasRotation?J$c.clientWidth:J$c.clientHeight)*J$c.pixelRatio}),J$o(1,J$c,"clientWidth",function(){return J$c.__init__(),J$c.window.innerWidth||J$c.document.body.clientWidth}),J$o(1,J$c,"window",function(){return J$c.__init__(),J$c._window}),J$o(1,J$c,"clientHeight",function(){return J$c.__init__(),J$c.window.innerHeight||J$c.document.body.clientHeight||J$c.document.documentElement.clientHeight}),J$o(1,J$c,"width",function(){return J$c.__init__(),(J$z.stage&&J$z.stage.canvasRotation?J$c.clientHeight:J$c.clientWidth)*J$c.pixelRatio}),J$o(1,J$c,"container",function(){return J$c.__init__(),J$c._container||((J$c._container=J$c.createElement("div")).id="layaContainer",J$c.document.body.appendChild(J$c._container)),J$c._container},function(J$a){J$c._container=J$a}),J$o(1,J$c,"document",function(){return J$c.__init__(),J$c._document}),J$c.__init__=function(){if(!J$c._window){J$c._window=J$F.getWindow(),J$c._document=J$c.window.document,J$c._window.addEventListener("message",function(J$a){laya.utils.Browser._onMessage(J$a)},!1),J$c.document.__createElement=J$c.document.createElement,J$g.requestAnimationFrame=J$g.requestAnimationFrame||J$g.webkitRequestAnimationFrame||J$g.mozRequestAnimationFrame||J$g.oRequestAnimationFrame||J$g.msRequestAnimationFrame||function(J$a){return J$g.setTimeout(J$a,1e3/60)};var J$a=J$g.document.body.style;J$a["-webkit-user-select"]="none",J$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",J$c.userAgent=J$c.window.navigator.userAgent,J$c.onIOS=!!(J$c.u=J$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),J$c.onMobile=-1<J$c.u.indexOf("Mobile"),J$c.onIPhone=-1<J$c.u.indexOf("iPhone"),J$c.onMac=-1<J$c.u.indexOf("Mac OS X"),J$c.onIPad=-1<J$c.u.indexOf("iPad"),J$c.onAndroid=-1<J$c.u.indexOf("Android")||-1<J$c.u.indexOf("Adr"),J$c.onWP=-1<J$c.u.indexOf("Windows Phone"),J$c.onQQBrowser=-1<J$c.u.indexOf("QQBrowser"),J$c.onMQQBrowser=-1<J$c.u.indexOf("MQQBrowser")||-1<J$c.u.indexOf("Mobile")&&-1<J$c.u.indexOf("QQ"),J$c.onIE=!!J$c.window.ActiveXObject||"ActiveXObject"in J$c.window,J$c.onWeiXin=-1<J$c.u.indexOf("MicroMessenger"),J$c.onPC=!J$c.onMobile,J$c.onSafari=-1<J$c.u.indexOf("Safari"),J$c.onFirefox=-1<J$c.u.indexOf("Firefox"),J$c.onEdge=-1<J$c.u.indexOf("Edge"),J$c.onMiniGame=-1<J$c.u.indexOf("MiniGame"),J$c.onLimixiu=-1<J$c.u.indexOf("limixiu"),J$c.httpProtocol="http:"==J$c.window.location.protocol,J$c.onMiniGame&&null==J$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),J$c.webAudioEnabled=!!(J$c.window.AudioContext||J$c.window.webkitAudioContext||J$c.window.mozAudioContext),J$c.soundType=J$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",J$ea=J$c.webAudioEnabled?J$fa:J$ca,J$c.webAudioEnabled&&J$fa.initWebAudio(),J$ca._initMusicAudio(),J$c.enableTouch="ontouchstart"in J$g||J$g.DocumentTouch&&J$b instanceof DocumentTouch,J$g.focus(),J$E._soundClass=J$ea,J$E._musicClass=J$ca,J$J._mainCanvas=J$J._mainCanvas||J$va.create("2D"),J$c.canvas||(J$c.canvas=J$va.create("2D"),J$c.context=J$c.canvas.getContext("2d"))}},J$c._onMessage=function(J$a){if(J$a.data&&"size"==J$a.data.name){if(J$c.window.innerWidth=J$a.data.width,J$c.window.innerHeight=J$a.data.height,J$c.window.__innerHeight=J$a.data.clientHeight,!J$c.document.createEvent)return void console.warn("no document.createEvent");var J$b=J$c.document.createEvent("HTMLEvents");return J$b.initEvent("resize",!1,!1),void J$c.window.dispatchEvent(J$b)}},J$c.createElement=function(J$a){return J$c.__init__(),J$c.document.__createElement(J$a)},J$c.getElementById=function(J$a){return J$c.__init__(),J$c.document.getElementById(J$a)},J$c.removeElement=function(J$a){J$a&&J$a.parentNode&&J$a.parentNode.removeChild(J$a)},J$c.now=function(){return J$F.now()},J$c._window=null,J$c._document=null,J$c._container=null,J$c.userAgent=null,J$c.u=null,J$c.onIOS=!1,J$c.onMac=!1,J$c.onMobile=!1,J$c.onIPhone=!1,J$c.onIPad=!1,J$c.onAndroid=!1,J$c.onWP=!1,J$c.onQQBrowser=!1,J$c.onMQQBrowser=!1,J$c.onSafari=!1,J$c.onFirefox=!1,J$c.onEdge=!1,J$c.onIE=!1,J$c.onWeiXin=!1,J$c.onMiniGame=!1,J$c.onLimixiu=!1,J$c.onPC=!1,J$c.httpProtocol=!1,J$c.webAudioEnabled=!1,J$c.soundType=null,J$c.enableTouch=!1,J$c.canvas=null,J$c.context=null,J$c.__init$=function(){},J$c}()),J$P=function(){function J$b(J$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,J$a?(this._u8d_=new Uint8Array(J$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}J$k(J$b,"laya.utils.Byte");var J$a=J$b.prototype;return J$a.___resizeBuffer=function(J$b){try{var J$a=new Uint8Array(J$b);null!=this._u8d_&&(this._u8d_.length<=J$b?J$a.set(this._u8d_):J$a.set(this._u8d_.subarray(0,J$b))),this._u8d_=J$a,this._d_=new DataView(J$a.buffer)}catch(J$a){throw"___resizeBuffer err:"+J$b}},J$a.getString=function(){return this.rUTF(this.getUint16())},J$a.getFloat32Array=function(J$a,J$b){var J$c=J$a+J$b;J$c=J$c>this._length?this._length:J$c;var J$d=new Float32Array(this._d_.buffer.slice(J$a,J$c));return this._pos_=J$c,J$d},J$a.getUint8Array=function(J$a,J$b){var J$c=J$a+J$b;J$c=J$c>this._length?this._length:J$c;var J$d=new Uint8Array(this._d_.buffer.slice(J$a,J$c));return this._pos_=J$c,J$d},J$a.getInt16Array=function(J$a,J$b){var J$c=J$a+J$b;J$c=J$c>this._length?this._length:J$c;var J$d=new Int16Array(this._d_.buffer.slice(J$a,J$c));return this._pos_=J$c,J$d},J$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var J$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,J$a},J$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var J$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,J$a},J$a.writeFloat32=function(J$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,J$a,this._xd_),this._pos_+=4},J$a.writeFloat64=function(J$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,J$a,this._xd_),this._pos_+=8},J$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var J$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,J$a},J$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var J$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,J$a},J$a.writeInt32=function(J$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,J$a,this._xd_),this._pos_+=4},J$a.writeUint32=function(J$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,J$a,this._xd_),this._pos_+=4},J$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var J$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,J$a},J$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var J$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,J$a},J$a.writeUint16=function(J$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,J$a,this._xd_),this._pos_+=2},J$a.writeInt16=function(J$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,J$a,this._xd_),this._pos_+=2},J$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},J$a.writeUint8=function(J$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,J$a),this._pos_++},J$a._getUInt8=function(J$a){return this._d_.getUint8(J$a)},J$a._getUint16=function(J$a){return this._d_.getUint16(J$a,this._xd_)},J$a._getMatrix=function(){return new J$G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},J$a.rUTF=function(J$a){for(var J$b=[],J$c=this._pos_+J$a,J$d=0,J$e=0,J$f=0,J$g=String.fromCharCode,J$h=this._u8d_;this._pos_<J$c;)(J$d=J$h[this._pos_++])<128?0!=J$d&&J$b.push(J$g(J$d)):J$d<224?J$b.push(J$g((63&J$d)<<6|127&J$h[this._pos_++])):J$d<240?(J$e=J$h[this._pos_++],J$b.push(J$g((31&J$d)<<12|(127&J$e)<<6|127&J$h[this._pos_++]))):(J$e=J$h[this._pos_++],J$f=J$h[this._pos_++],J$b.push(J$g((15&J$d)<<18|(127&J$e)<<12|J$f<<6&127|127&J$h[this._pos_++]))),0;return J$b.join("")},J$a.getCustomString=function(J$a){for(var J$b=[],J$c=0,J$d=0,J$e=0,J$f=String.fromCharCode,J$g=this._u8d_;0<J$a;)if((J$d=J$g[this._pos_])<128)J$b.push(J$f(J$d)),this._pos_++,J$a--;else for(J$c=J$d-128,this._pos_++,J$a-=J$c;0<J$c;)J$d=J$g[this._pos_++],J$e=J$g[this._pos_++],J$b.push(J$f(J$e<<8|J$d)),J$c--;return J$b.join("")},J$a.clear=function(){this._pos_=0,this.length=0},J$a.__getBuffer=function(){return this._d_.buffer},J$a.writeUTFBytes=function(J$a){for(var J$b=0,J$c=(J$a+="").length;J$b<J$c;J$b++){var J$d=J$a.charCodeAt(J$b);J$d<=127?this.writeByte(J$d):J$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|J$d>>6,128|63&J$d],this._pos_),this._pos_+=2):J$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|J$d>>12,128|J$d>>6&63,128|63&J$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|J$d>>18,128|J$d>>12&63,128|J$d>>6&63,128|63&J$d],this._pos_),this._pos_+=4)}},J$a.writeUTFString=function(J$a){var J$b=this.pos;this.writeUint16(1),this.writeUTFBytes(J$a);var J$c=this.pos-J$b-2;if(65536<=J$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(J$b,J$c,this._xd_)},J$a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},J$a.getUTFString=function(){return this.readUTFString()},J$a.readUTFBytes=function(J$a){if(void 0===J$a&&(J$a=-1),0==J$a)return"";var J$b=this.bytesAvailable;if(J$b<J$a)throw"readUTFBytes error - Out of bounds";return J$a=0<J$a?J$a:J$b,this.rUTF(J$a)},J$a.getUTFBytes=function(J$a){return void 0===J$a&&(J$a=-1),this.readUTFBytes(J$a)},J$a.writeByte=function(J$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,J$a),this._pos_+=1},J$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},J$a.getByte=function(){return this.readByte()},J$a.ensureWrite=function(J$a){this._length<J$a&&(this._length=J$a),this._allocated_<J$a&&(this.length=J$a)},J$a.writeArrayBuffer=function(J$a,J$b,J$c){if(void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),J$b<0||J$c<0)throw"writeArrayBuffer error - Out of bounds";0==J$c&&(J$c=J$a.byteLength-J$b),this.ensureWrite(this._pos_+J$c);var J$d=new Uint8Array(J$a);this._u8d_.set(J$d.subarray(J$b,J$b+J$c),this._pos_),this._pos_+=J$c},J$o(0,J$a,"buffer",function(){var J$a=this._d_.buffer;return J$a.byteLength==this.length?J$a:J$a.slice(0,this.length)}),J$o(0,J$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(J$a){this._xd_="littleEndian"==J$a}),J$o(0,J$a,"length",function(){return this._length},function(J$a){this._allocated_<J$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(J$a,2*this._allocated_))):this._allocated_>J$a&&this.___resizeBuffer(this._allocated_=J$a),this._length=J$a}),J$o(0,J$a,"pos",function(){return this._pos_},function(J$a){this._pos_=J$a}),J$o(0,J$a,"bytesAvailable",function(){return this._length-this._pos_}),J$b.getSystemEndian=function(){if(!J$b._sysEndian){var J$a=new ArrayBuffer(2);new DataView(J$a).setInt16(0,256,!0),J$b._sysEndian=256===new Int16Array(J$a)[0]?"littleEndian":"bigEndian"}return J$b._sysEndian},J$b.BIG_ENDIAN="bigEndian",J$b.LITTLE_ENDIAN="littleEndian",J$b._sysEndian=null,J$b}(),J$Q=function(){function J$e(){}return J$k(J$e,"laya.utils.CacheManager"),J$e.regCacheByFunction=function(J$a,J$b){var J$c;J$e.unRegCacheByFunction(J$a,J$b),J$c={tryDispose:J$a,getCacheList:J$b},J$e._cacheList.push(J$c)},J$e.unRegCacheByFunction=function(J$a,J$b){var J$c,J$d=0;for(J$c=J$e._cacheList.length,J$d=0;J$d<J$c;J$d++)if(J$e._cacheList[J$d].tryDispose==J$a&&J$e._cacheList[J$d].getCacheList==J$b)return void J$e._cacheList.splice(J$d,1)},J$e.forceDispose=function(){var J$a=0,J$b=J$e._cacheList.length;for(J$a=0;J$a<J$b;J$a++)J$e._cacheList[J$a].tryDispose(!0)},J$e.beginCheck=function(J$a){void 0===J$a&&(J$a=15e3),J$z.timer.loop(J$a,null,J$e._checkLoop)},J$e.stopCheck=function(){J$z.timer.clear(null,J$e._checkLoop)},J$e._checkLoop=function(){var J$a=J$e._cacheList;if(!(J$a.length<1)){var J$b,J$c=J$O.now(),J$d=0;for(J$b=J$d=J$a.length;0<J$d&&(J$a[J$e._index=++J$e._index%J$b].tryDispose(!1),!(J$O.now()-J$c>J$e.loopTimeLimit));)J$d--}},J$e.loopTimeLimit=2,J$e._cacheList=[],J$e._index=0,J$e}(),J$R=function(){function J$n(){}return J$k(J$n,"laya.utils.ClassUtils"),J$n.regClass=function(J$a,J$b){J$n._classMap[J$a]=J$b},J$n.getRegClass=function(J$a){return J$n._classMap[J$a]},J$n.getInstance=function(J$a){var J$b=J$n.getClass(J$a);return J$b?new J$b:(console.warn("[error] Undefined class:",J$a),null)},J$n.createByJson=function(J$a,J$b,J$c,J$d,J$e){"string"==typeof J$a&&(J$a=JSON.parse(J$a));var J$f=J$a.props;if(!J$b&&!(J$b=J$e?J$e.runWith(J$a):J$n.getInstance(J$f.runtime||J$a.type)))return null;var J$g=J$a.child;if(J$g)for(var J$h=0,J$i=J$g.length;J$h<J$i;J$h++){var J$j=J$g[J$h];if("render"!==J$j.props.name&&"render"!==J$j.props.renderType||!J$b._$set_itemRender)if("Graphic"==J$j.type)J$n.addGraphicsToSprite(J$j,J$b);else if(J$n.isDrawType(J$j.type))J$n.addGraphicToSprite(J$j,J$b,!0);else{var J$k=J$n.createByJson(J$j,null,J$c,J$d,J$e);"Script"==J$j.type?J$k.hasOwnProperty("owner")?J$k.owner=J$b:J$k.hasOwnProperty("target")&&(J$k.target=J$b):"mask"==J$j.props.renderType?J$b.mask=J$k:J$b.addChild(J$k)}else J$b.itemRender=J$j}if(J$f)for(var J$l in J$f){var J$m=J$f[J$l];"var"===J$l&&J$c?J$c[J$m]=J$b:J$m instanceof Array&&"function"==typeof J$b[J$l]?J$b[J$l].apply(J$b,J$m):J$b[J$l]=J$m}return J$d&&J$a.customProps&&J$d.runWith([J$b,J$a]),J$b.created&&J$b.created(),J$b},J$n.addGraphicsToSprite=function(J$a,J$b){var J$c;if((J$c=J$a.child)&&!(J$c.length<1)){var J$d;J$d=J$n._getGraphicsFromSprite(J$a,J$b);var J$e=0,J$f=0;J$a.props&&(J$e=J$n._getObjVar(J$a.props,"x",0),J$f=J$n._getObjVar(J$a.props,"y",0)),0!=J$e&&0!=J$f&&J$d.translate(J$e,J$f);var J$g,J$h=0;for(J$g=J$c.length,J$h=0;J$h<J$g;J$h++)J$n._addGraphicToGraphics(J$c[J$h],J$d);0!=J$e&&0!=J$f&&J$d.translate(-J$e,-J$f)}},J$n.addGraphicToSprite=function(J$a,J$b,J$c){var J$d;void 0===J$c&&(J$c=!1),J$d=J$c?J$n._getGraphicsFromSprite(J$a,J$b):J$b.graphics,J$n._addGraphicToGraphics(J$a,J$d)},J$n._getGraphicsFromSprite=function(J$a,J$b){var J$c,J$d;if(!J$a||!J$a.props)return J$b.graphics;switch(J$d=J$a.props.renderType){case"hit":case"unHit":var J$e;J$b.hitArea||(J$b.hitArea=new J$V),(J$e=J$b.hitArea)[J$d]||(J$e[J$d]=new J$m),J$c=J$e[J$d]}return J$c||(J$c=J$b.graphics),J$c},J$n._getTransformData=function(J$a){var J$b;(J$a.hasOwnProperty("pivotX")||J$a.hasOwnProperty("pivotY"))&&(J$b=J$b||new J$G).translate(-J$n._getObjVar(J$a,"pivotX",0),-J$n._getObjVar(J$a,"pivotY",0));var J$c=J$n._getObjVar(J$a,"scaleX",1),J$d=J$n._getObjVar(J$a,"scaleY",1),J$e=J$n._getObjVar(J$a,"rotation",0);J$n._getObjVar(J$a,"skewX",0),J$n._getObjVar(J$a,"skewY",0);return 1==J$c&&1==J$d&&0==J$e||((J$b=J$b||new J$G).scale(J$c,J$d),J$b.rotate(.0174532922222222*J$e)),J$b},J$n._addGraphicToGraphics=function(J$a,J$b){var J$c,J$d;if((J$c=J$a.props)&&(J$d=J$n.DrawTypeDic[J$a.type])){var J$e,J$f;J$e=J$b;var J$g=J$n._getParams(J$c,J$d[1],J$d[2],J$d[3]);((J$f=J$n._tM)||1!=J$n._alpha)&&(J$e.save(),J$f&&J$e.transform(J$f),1!=J$n._alpha&&J$e.alpha(J$n._alpha)),J$e[J$d[0]].apply(J$e,J$g),(J$f||1!=J$n._alpha)&&J$e.restore()}},J$n._adptLineData=function(J$a){return J$a[2]=parseFloat(J$a[0])+parseFloat(J$a[2]),J$a[3]=parseFloat(J$a[1])+parseFloat(J$a[3]),J$a},J$n._adptTextureData=function(J$a){return J$a[0]=J$ha.getRes(J$a[0]),J$a},J$n._adptLinesData=function(J$a){return J$a[2]=J$n._getPointListByStr(J$a[2]),J$a},J$n.isDrawType=function(J$a){return"Image"!=J$a&&J$n.DrawTypeDic.hasOwnProperty(J$a)},J$n._getParams=function(J$a,J$b,J$c,J$d){var J$e;void 0===J$c&&(J$c=0),(J$e=J$n._temParam).length=J$b.length;var J$f,J$g,J$h=0;for(J$f=J$b.length,J$h=0;J$h<J$f;J$h++)J$e[J$h]=J$n._getObjVar(J$a,J$b[J$h][0],J$b[J$h][1]);return J$n._alpha=J$n._getObjVar(J$a,"alpha",1),J$g=J$n._getTransformData(J$a),J$n._tM=J$g?(J$c||(J$c=0),J$g.translate(J$e[J$c],J$e[J$c+1]),J$e[J$c]=J$e[J$c+1]=0,J$g):null,J$d&&J$n[J$d]&&(J$e=J$n[J$d](J$e)),J$e},J$n._getPointListByStr=function(J$a){var J$b,J$c,J$d=0;for(J$c=(J$b=J$a.split(",")).length,J$d=0;J$d<J$c;J$d++)J$b[J$d]=parseFloat(J$b[J$d]);return J$b},J$n._getObjVar=function(J$a,J$b,J$c){return J$a.hasOwnProperty(J$b)?J$a[J$b]:J$c},J$n._temParam=[],J$n._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},J$n.getClass=function(J$a){var J$b=J$n._classMap[J$a]||J$a;return"string"==typeof J$b?J$z.__classmap[J$b]:J$b},J$n._tM=null,J$n._alpha=NaN,J$i(J$n,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),J$n}(),J$S=function(){function J$f(J$a){if(this._color=[],"string"==typeof J$a){null===(this.strColor=J$a)&&(J$a="#000000"),"#"==J$a.charAt(0)&&(J$a=J$a.substr(1));var J$b=J$a.length;if(3==J$b||4==J$b){for(var J$c="",J$d=0;J$d<J$b;J$d++)J$c+=J$a[J$d]+J$a[J$d];J$a=J$c}var J$e=this.numColor=parseInt(J$a,16);if(8==J$a.length)return void(this._color=[parseInt(J$a.substr(0,2),16)/255,((16711680&J$e)>>16)/255,((65280&J$e)>>8)/255,(255&J$e)/255])}else J$e=this.numColor=J$a,this.strColor=J$$.toHexColor(J$e);this._color=[((16711680&J$e)>>16)/255,((65280&J$e)>>8)/255,(255&J$e)/255,1],this._color.__id=++J$f._COLODID}return J$k(J$f,"laya.utils.Color"),J$f._initDefault=function(){for(var J$a in J$f._DEFAULT={},J$f._COLOR_MAP)J$f._SAVE[J$a]=J$f._DEFAULT[J$a]=new J$f(J$f._COLOR_MAP[J$a]);return J$f._DEFAULT},J$f._initSaveMap=function(){for(var J$a in J$f._SAVE_SIZE=0,J$f._SAVE={},J$f._DEFAULT)J$f._SAVE[J$a]=J$f._DEFAULT[J$a]},J$f.create=function(J$a){var J$b=J$f._SAVE[J$a+""];return null!=J$b?J$b:(J$f._SAVE_SIZE<1e3||J$f._initSaveMap(),J$f._SAVE[J$a+""]=new J$f(J$a))},J$f._SAVE={},J$f._SAVE_SIZE=0,J$f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},J$f._DEFAULT=J$f._initDefault(),J$f._COLODID=1,J$f}(),J$T=(function(){function J$a(){this._values=[],this._keys=[]}J$k(J$a,"laya.utils.Dictionary");var J$b=J$a.prototype;J$b.set=function(J$a,J$b){var J$c=this.indexOf(J$a);0<=J$c?this._values[J$c]=J$b:(this._keys.push(J$a),this._values.push(J$b))},J$b.indexOf=function(J$a){var J$b=this._keys.indexOf(J$a);return 0<=J$b?J$b:(J$a="string"==typeof J$a?Number(J$a):"number"==typeof J$a?J$a.toString():J$a,this._keys.indexOf(J$a))},J$b.get=function(J$a){var J$b=this.indexOf(J$a);return J$b<0?null:this._values[J$b]},J$b.remove=function(J$a){var J$b=this.indexOf(J$a);return 0<=J$b&&(this._keys.splice(J$b,1),this._values.splice(J$b,1),!0)},J$b.clear=function(){this._values.length=0,this._keys.length=0},J$o(0,J$b,"values",function(){return this._values}),J$o(0,J$b,"keys",function(){return this._keys})}(),function(){function J$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}J$k(J$a,"laya.utils.Dragging");var J$b=J$a.prototype;return J$b.start=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){void 0===J$h&&(J$h=.92),this.clearTimer(),this.target=J$a,this.area=J$b,this.hasInertia=J$c,this.elasticDistance=J$b?J$d:0,this.elasticBackTime=J$e,this.data=J$f,this._disableMouseEvent=J$g,this.ratio=J$h,1!=J$a.globalScaleX||1!=J$a.globalScaleY?this._parent=J$a.parent:this._parent=J$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,J$z.stage.on("mouseup",this,this.onStageMouseUp),J$z.stage.on("mouseout",this,this.onStageMouseUp),J$z.timer.frameLoop(1,this,this.loop)},J$b.clearTimer=function(){J$z.timer.clear(this,this.loop),J$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},J$b.stop=function(){this._dragging&&(J$p.instance.disableMouseEvent=!1,J$z.stage.off("mouseup",this,this.onStageMouseUp),J$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},J$b.loop=function(){var J$a=this._parent.getMousePoint(),J$b=J$a.x,J$c=J$a.y,J$d=J$b-this._lastX,J$e=J$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(J$d*J$z.stage._canvasTransform.getScaleX())||1<Math.abs(J$e*J$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),J$p.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(J$d,J$e);0==J$d&&0==J$e||(this._lastX=J$b,this._lastY=J$c,this.target.x+=J$d*this._elasticRateX,this.target.y+=J$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},J$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var J$a=this.area.x-this.target.x;else J$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-J$a/this.elasticDistance),this.target.y<this.area.y)var J$b=this.area.y-this.target.y;else J$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-J$b/this.elasticDistance)}},J$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},J$b.onStageMouseUp=function(J$a){if(J$p.instance.disableMouseEvent=!1,J$z.stage.off("mouseup",this,this.onStageMouseUp),J$z.stage.off("mouseout",this,this.onStageMouseUp),J$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var J$b=this._offsets.length,J$c=Math.min(J$b,6),J$d=this._offsets.length-J$c,J$e=J$b-1;J$d<J$e;J$e--)this._offsetY+=this._offsets[J$e--],this._offsetX+=this._offsets[J$e];this._offsetX=this._offsetX/J$c*2,this._offsetY=this._offsetY/J$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),J$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},J$b.checkElastic=function(){var J$a=NaN,J$b=NaN;if(this.target.x<this.area.x?J$a=this.area.x:this.target.x>this.area.x+this.area.width&&(J$a=this.area.x+this.area.width),this.target.y<this.area.y?J$b=this.area.y:this.target.y>this.area.y+this.area.height&&(J$b=this.area.y+this.area.height),isNaN(J$a)&&isNaN(J$b))this.clear();else{var J$c={};isNaN(J$a)||(J$c.x=J$a),isNaN(J$b)||(J$c.y=J$b),this._tween=J$Z.to(this.target,J$c,this.elasticBackTime,J$U.sineOut,J$u.create(this,this.clear),0,!1,!1)}},J$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(J$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},J$b.clear=function(){if(this.target){this.clearTimer();var J$a=this.target;this.target=null,this._parent=null,J$a.event("dragend",this.data)}},J$a}()),J$U=function(){function J$h(){}return J$k(J$h,"laya.utils.Ease"),J$h.linearNone=function(J$a,J$b,J$c,J$d){return J$c*J$a/J$d+J$b},J$h.linearIn=function(J$a,J$b,J$c,J$d){return J$c*J$a/J$d+J$b},J$h.linearInOut=function(J$a,J$b,J$c,J$d){return J$c*J$a/J$d+J$b},J$h.linearOut=function(J$a,J$b,J$c,J$d){return J$c*J$a/J$d+J$b},J$h.bounceIn=function(J$a,J$b,J$c,J$d){return J$c-J$h.bounceOut(J$d-J$a,0,J$c,J$d)+J$b},J$h.bounceInOut=function(J$a,J$b,J$c,J$d){return J$a<.5*J$d?.5*J$h.bounceIn(2*J$a,0,J$c,J$d)+J$b:.5*J$h.bounceOut(2*J$a-J$d,0,J$c,J$d)+.5*J$c+J$b},J$h.bounceOut=function(J$a,J$b,J$c,J$d){return(J$a/=J$d)<1/2.75?J$c*(7.5625*J$a*J$a)+J$b:J$a<2/2.75?J$c*(7.5625*(J$a-=1.5/2.75)*J$a+.75)+J$b:J$a<2.5/2.75?J$c*(7.5625*(J$a-=2.25/2.75)*J$a+.9375)+J$b:J$c*(7.5625*(J$a-=2.625/2.75)*J$a+.984375)+J$b},J$h.backIn=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=1.70158),J$c*(J$a/=J$d)*J$a*((J$e+1)*J$a-J$e)+J$b},J$h.backInOut=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=1.70158),(J$a/=.5*J$d)<1?.5*J$c*(J$a*J$a*((1+(J$e*=1.525))*J$a-J$e))+J$b:J$c/2*((J$a-=2)*J$a*((1+(J$e*=1.525))*J$a+J$e)+2)+J$b},J$h.backOut=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=1.70158),J$c*((J$a=J$a/J$d-1)*J$a*((J$e+1)*J$a+J$e)+1)+J$b},J$h.elasticIn=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g;return void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=0),0==J$a?J$b:1==(J$a/=J$d)?J$b+J$c:(J$f||(J$f=.3*J$d),J$g=!J$e||0<J$c&&J$e<J$c||J$c<0&&J$e<-J$c?(J$e=J$c,J$f/4):J$f/J$h.PI2*Math.asin(J$c/J$e),-J$e*Math.pow(2,10*(J$a-=1))*Math.sin((J$a*J$d-J$g)*J$h.PI2/J$f)+J$b)},J$h.elasticInOut=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g;return void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=0),0==J$a?J$b:2==(J$a/=.5*J$d)?J$b+J$c:(J$f||(J$f=J$d*(.3*1.5)),J$g=!J$e||0<J$c&&J$e<J$c||J$c<0&&J$e<-J$c?(J$e=J$c,J$f/4):J$f/J$h.PI2*Math.asin(J$c/J$e),J$a<1?J$e*Math.pow(2,10*(J$a-=1))*Math.sin((J$a*J$d-J$g)*J$h.PI2/J$f)*-.5+J$b:J$e*Math.pow(2,-10*(J$a-=1))*Math.sin((J$a*J$d-J$g)*J$h.PI2/J$f)*.5+J$c+J$b)},J$h.elasticOut=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g;return void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=0),0==J$a?J$b:1==(J$a/=J$d)?J$b+J$c:(J$f||(J$f=.3*J$d),J$g=!J$e||0<J$c&&J$e<J$c||J$c<0&&J$e<-J$c?(J$e=J$c,J$f/4):J$f/J$h.PI2*Math.asin(J$c/J$e),J$e*Math.pow(2,-10*J$a)*Math.sin((J$a*J$d-J$g)*J$h.PI2/J$f)+J$c+J$b)},J$h.strongIn=function(J$a,J$b,J$c,J$d){return J$c*(J$a/=J$d)*J$a*J$a*J$a*J$a+J$b},J$h.strongInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*J$c*J$a*J$a*J$a*J$a*J$a+J$b:.5*J$c*((J$a-=2)*J$a*J$a*J$a*J$a+2)+J$b},J$h.strongOut=function(J$a,J$b,J$c,J$d){return J$c*((J$a=J$a/J$d-1)*J$a*J$a*J$a*J$a+1)+J$b},J$h.sineInOut=function(J$a,J$b,J$c,J$d){return.5*-J$c*(Math.cos(Math.PI*J$a/J$d)-1)+J$b},J$h.sineIn=function(J$a,J$b,J$c,J$d){return-J$c*Math.cos(J$a/J$d*J$h.HALF_PI)+J$c+J$b},J$h.sineOut=function(J$a,J$b,J$c,J$d){return J$c*Math.sin(J$a/J$d*J$h.HALF_PI)+J$b},J$h.quintIn=function(J$a,J$b,J$c,J$d){return J$c*(J$a/=J$d)*J$a*J$a*J$a*J$a+J$b},J$h.quintInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*J$c*J$a*J$a*J$a*J$a*J$a+J$b:.5*J$c*((J$a-=2)*J$a*J$a*J$a*J$a+2)+J$b},J$h.quintOut=function(J$a,J$b,J$c,J$d){return J$c*((J$a=J$a/J$d-1)*J$a*J$a*J$a*J$a+1)+J$b},J$h.quartIn=function(J$a,J$b,J$c,J$d){return J$c*(J$a/=J$d)*J$a*J$a*J$a+J$b},J$h.quartInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*J$c*J$a*J$a*J$a*J$a+J$b:.5*-J$c*((J$a-=2)*J$a*J$a*J$a-2)+J$b},J$h.quartOut=function(J$a,J$b,J$c,J$d){return-J$c*((J$a=J$a/J$d-1)*J$a*J$a*J$a-1)+J$b},J$h.cubicIn=function(J$a,J$b,J$c,J$d){return J$c*(J$a/=J$d)*J$a*J$a+J$b},J$h.cubicInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*J$c*J$a*J$a*J$a+J$b:.5*J$c*((J$a-=2)*J$a*J$a+2)+J$b},J$h.cubicOut=function(J$a,J$b,J$c,J$d){return J$c*((J$a=J$a/J$d-1)*J$a*J$a+1)+J$b},J$h.quadIn=function(J$a,J$b,J$c,J$d){return J$c*(J$a/=J$d)*J$a+J$b},J$h.quadInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*J$c*J$a*J$a+J$b:.5*-J$c*(--J$a*(J$a-2)-1)+J$b},J$h.quadOut=function(J$a,J$b,J$c,J$d){return-J$c*(J$a/=J$d)*(J$a-2)+J$b},J$h.expoIn=function(J$a,J$b,J$c,J$d){return 0==J$a?J$b:J$c*Math.pow(2,10*(J$a/J$d-1))+J$b-.001*J$c},J$h.expoInOut=function(J$a,J$b,J$c,J$d){return 0==J$a?J$b:J$a==J$d?J$b+J$c:(J$a/=.5*J$d)<1?.5*J$c*Math.pow(2,10*(J$a-1))+J$b:.5*J$c*(2-Math.pow(2,-10*--J$a))+J$b},J$h.expoOut=function(J$a,J$b,J$c,J$d){return J$a==J$d?J$b+J$c:J$c*(1-Math.pow(2,-10*J$a/J$d))+J$b},J$h.circIn=function(J$a,J$b,J$c,J$d){return-J$c*(Math.sqrt(1-(J$a/=J$d)*J$a)-1)+J$b},J$h.circInOut=function(J$a,J$b,J$c,J$d){return(J$a/=.5*J$d)<1?.5*-J$c*(Math.sqrt(1-J$a*J$a)-1)+J$b:.5*J$c*(Math.sqrt(1-(J$a-=2)*J$a)+1)+J$b},J$h.circOut=function(J$a,J$b,J$c,J$d){return J$c*Math.sqrt(1-(J$a=J$a/J$d-1)*J$a)+J$b},J$h.HALF_PI=.5*Math.PI,J$h.PI2=2*Math.PI,J$h}(),J$V=function(){function J$l(){this._hit=null,this._unHit=null}J$k(J$l,"laya.utils.HitArea");var J$a=J$l.prototype;return J$a.isHit=function(J$a,J$b){return!!J$l.isHitGraphic(J$a,J$b,this.hit)&&!J$l.isHitGraphic(J$a,J$b,this.unHit)},J$a.contains=function(J$a,J$b){return this.isHit(J$a,J$b)},J$o(0,J$a,"hit",function(){return this._hit||(this._hit=new J$m),this._hit},function(J$a){this._hit=J$a}),J$o(0,J$a,"unHit",function(){return this._unHit||(this._unHit=new J$m),this._unHit},function(J$a){this._unHit=J$a}),J$l.isHitGraphic=function(J$a,J$b,J$c){if(!J$c)return!1;var J$d;if(!(J$d=J$c.cmds)&&J$c._one&&((J$d=J$l._cmds).length=1,J$d[0]=J$c._one),!J$d)return!1;var J$e,J$f,J$g=0;for(J$e=J$d.length,J$g=0;J$g<J$e;J$g++)if(J$f=J$d[J$g]){var J$h=J$J._context;switch(J$f.callee){case J$h._translate:case 6:J$a-=J$f[0],J$b-=J$f[1]}if(J$l.isHitCmd(J$a,J$b,J$f))return!0}return!1},J$l.isHitCmd=function(J$a,J$b,J$c){if(!J$c)return!1;var J$d=J$J._context,J$e=!1;switch(J$c.callee){case J$d._drawRect:case 13:J$l._rec.setTo(J$c[0],J$c[1],J$c[2],J$c[3]),J$e=J$l._rec.contains(J$a,J$b);break;case J$d._drawCircle:case J$d._fillCircle:case 14:J$e=(J$a-=J$c[0])*J$a+(J$b-=J$c[1])*J$b<J$c[2]*J$c[2];break;case J$d._drawPoly:case 18:J$a-=J$c[0],J$b-=J$c[1],J$e=J$l.ptInPolygon(J$a,J$b,J$c[2])}return J$e},J$l.ptInPolygon=function(J$a,J$b,J$c){var J$d;(J$d=J$l._ptPoint).setTo(J$a,J$b);var J$e,J$f=0,J$g=NaN,J$h=NaN,J$i=NaN,J$j=NaN;J$e=J$c.length;for(var J$k=0;J$k<J$e;J$k+=2){if(J$g=J$c[J$k],J$h=J$c[J$k+1],J$i=J$c[(J$k+2)%J$e],J$h!=(J$j=J$c[(J$k+3)%J$e]))if(!(J$d.y<Math.min(J$h,J$j)))if(!(J$d.y>=Math.max(J$h,J$j)))(J$d.y-J$h)*(J$i-J$g)/(J$j-J$h)+J$g>J$d.x&&J$f++}return J$f%2==1},J$l._cmds=[],J$i(J$l,["_rec",function(){return this._rec=new J$B},"_ptPoint",function(){return this._ptPoint=new J$A}]),J$l}(),J$W=(function(){function J$e(J$a,J$b,J$c,J$d){this.char=J$a,this.charNum=J$a.charCodeAt(0),this._x=this._y=0,this.width=J$b,this.height=J$c,this.style=J$d,this.isWord=!J$e._isWordRegExp.test(J$a)}J$k(J$e,"laya.utils.HTMLChar");var J$a=J$e.prototype;J$z.imps(J$a,{"laya.display.ILayout":!0}),J$a.setSprite=function(J$a){this._sprite=J$a},J$a.getSprite=function(){return this._sprite},J$a._isChar=function(){return!0},J$a._getCSSStyle=function(){return this.style},J$o(0,J$a,"width",function(){return this._w},function(J$a){this._w=J$a}),J$o(0,J$a,"x",function(){return this._x},function(J$a){this._sprite&&(this._sprite.x=J$a),this._x=J$a}),J$o(0,J$a,"y",function(){return this._y},function(J$a){this._sprite&&(this._sprite.y=J$a),this._y=J$a}),J$o(0,J$a,"height",function(){return this._h},function(J$a){this._h=J$a}),J$e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function J$b(){}J$k(J$b,"laya.utils.Log"),J$b.enable=function(){J$b._logdiv||(J$b._logdiv=J$O.window.document.createElement("div"),J$O.window.document.body.appendChild(J$b._logdiv),J$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},J$b.toggle=function(){var J$a=J$b._logdiv.style;"1px"==J$a.width?J$a.width=J$a.height="50%":J$a.width=J$a.height="1px"},J$b.print=function(J$a){J$b._logdiv&&(J$b.maxCount<=J$b._count&&J$b.clear(),J$b._count++,J$b._logdiv.innerText+=J$a+"\n",J$b._logdiv.scrollTop=J$b._logdiv.scrollHeight)},J$b.clear=function(){J$b._logdiv.innerText="",J$b._count=0},J$b._logdiv=null,J$b._count=0,J$b.maxCount=20}(),function(){function J$b(){}J$k(J$b,"laya.utils.Mouse"),J$o(1,J$b,"cursor",function(){return J$b._style.cursor},function(J$a){J$b._style.cursor=J$a}),J$b.hide=function(){"none"!=J$b.cursor&&(J$b._preCursor=J$b.cursor,J$b.cursor="none")},J$b.show=function(){"none"==J$b.cursor&&(J$b.cursor=J$b._preCursor?J$b._preCursor:"auto")},J$b._preCursor=null,J$i(J$b,["_style",function(){return this._style=J$O.document.body.style}])}(),function(){function J$f(){}return J$k(J$f,"laya.utils.Pool"),J$f.getPoolBySign=function(J$a){return J$f._poolDic[J$a]||(J$f._poolDic[J$a]=[])},J$f.clearBySign=function(J$a){J$f._poolDic[J$a]&&(J$f._poolDic[J$a].length=0)},J$f.recover=function(J$a,J$b){J$b.__InPool||(J$b.__InPool=!0,J$f.getPoolBySign(J$a).push(J$b))},J$f.getItemByClass=function(J$a,J$b){var J$c=J$f.getPoolBySign(J$a),J$d=J$c.length?J$c.pop():new J$b;return J$d.__InPool=!1,J$d},J$f.getItemByCreateFun=function(J$a,J$b,J$c){var J$d=J$f.getPoolBySign(J$a),J$e=J$d.length?J$d.pop():J$b.call(J$c);return J$e.__InPool=!1,J$e},J$f.getItem=function(J$a){var J$b=J$f.getPoolBySign(J$a),J$c=J$b.length?J$b.pop():null;return J$c&&(J$c.__InPool=!1),J$c},J$f._poolDic={},J$f.InPoolSign="__InPool",J$f}()),J$X=function(){function J$i(){}return J$k(J$i,"laya.utils.Stat"),J$o(1,J$i,"onclick",null,function(J$a){J$i._sp&&J$i._sp.on("click",J$i._sp,J$a),J$i._canvas&&(J$i._canvas.source.onclick=J$a,J$i._canvas.source.style.pointerEvents="")}),J$i.show=function(J$a,J$b,J$c){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),!J$J.isConchApp||J$J.isConchWebGL){if(J$J.isConchWebGL||J$O.onMiniGame||J$O.onLimixiu||(J$i._useCanvas=!0),J$i._show=!0,J$i._fpsData.length=60,J$i._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},J$i._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},J$i._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},J$i._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},J$J.isWebGL)if(J$i._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},J$J.is3DMode){if(J$i._view[0].title="FPS(3D)",J$i._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},J$i._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},J$i._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==J$c){var J$d=8;J$i._view[J$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},J$i._view[J$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},J$i._view[J$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==J$c){J$d=8;J$i._view[J$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},J$i._view[J$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else J$i._view[0].title="FPS(WebGL)",J$i._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else J$i._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};J$i._useCanvas?J$i.createUIPre(J$a,J$b):J$i.createUI(J$a,J$b),J$i.enable()}else J$O.window.conch.showFPS&&J$O.window.conch.showFPS(J$a,J$b)},J$i.createUIPre=function(J$a,J$b){var J$c=J$O.pixelRatio;J$i._width=170*J$c,J$i._vx=75*J$c,J$i._height=J$c*(12*J$i._view.length+3*J$c)+4,J$i._fontSize=12*J$c;for(var J$d=0;J$d<J$i._view.length;J$d++)J$i._view[J$d].x=4,J$i._view[J$d].y=J$d*J$i._fontSize+2*J$c;J$i._canvas||((J$i._canvas=new J$va("2D")).size(J$i._width,J$i._height),(J$i._ctx=J$i._canvas.getContext("2d")).textBaseline="top",J$i._ctx.font=J$i._fontSize+"px Sans-serif",J$i._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+J$a+"px;top:"+J$b+"px;width:"+J$i._width/J$c+"px;height:"+J$i._height/J$c+"px;"),J$i._first=!0,J$i.loop(),J$i._first=!1,J$O.container.appendChild(J$i._canvas.source)},J$i.createUI=function(J$a,J$b){var J$c=J$i._sp,J$d=J$O.pixelRatio;J$c||(J$c=new J$la,(J$i._leftText=new J$qa).pos(5,5),J$i._leftText.color="#ffffff",J$c.addChild(J$i._leftText),(J$i._txt=new J$qa).pos(80*J$d,5),J$i._txt.color="#ffffff",J$c.addChild(J$i._txt),J$i._sp=J$c),J$c.pos(J$a,J$b);for(var J$e="",J$f=0;J$f<J$i._view.length;J$f++){J$e+=J$i._view[J$f].title+"\n"}J$i._leftText.text=J$e;var J$g=170*J$d,J$h=J$d*(12*J$i._view.length+3*J$d)+4;J$i._txt.fontSize=J$i._fontSize*J$d,J$i._leftText.fontSize=J$i._fontSize*J$d,J$c.size(J$g,J$h),J$c.graphics.clear(),J$c.graphics.setAlpha(.5),J$c.graphics.drawRect(0,0,J$g,J$h,"#999999"),J$c.graphics.setAlpha(1),J$i.loop()},J$i.enable=function(){J$z.timer.frameLoop(1,J$i,J$i.loop)},J$i.hide=function(){J$i._show=!1,J$z.timer.clear(J$i,J$i.loop),J$i._canvas&&J$O.removeElement(J$i._canvas.source)},J$i.clear=function(){J$i.trianglesFaces=J$i.drawCall=J$i.shaderCall=J$i.spriteCount=J$i.spriteRenderUseCacheCount=J$i.treeNodeCollision=J$i.treeSpriteCollision=J$i.canvasNormal=J$i.canvasBitmap=J$i.canvasReCache=0},J$i.loop=function(){J$i._count++;var J$a=J$O.now();if(!(J$a-J$i._timer<1e3)){var J$b=J$i._count;if(J$i.FPS=Math.round(1e3*J$b/(J$a-J$i._timer)),J$i._show){J$i.trianglesFaces=Math.round(J$i.trianglesFaces/J$b),J$i.spriteCount=J$i._useCanvas?(J$i.drawCall=Math.round(J$i.drawCall/J$b)-2,J$i.shaderCall=Math.round(J$i.shaderCall/J$b),Math.round(J$i.spriteCount/J$b)-1):(J$i.drawCall=Math.round(J$i.drawCall/J$b)-2,J$i.shaderCall=Math.round(J$i.shaderCall/J$b)-4,Math.round(J$i.spriteCount/J$b)-4),J$i.spriteRenderUseCacheCount=Math.round(J$i.spriteRenderUseCacheCount/J$b),J$i.canvasNormal=Math.round(J$i.canvasNormal/J$b),J$i.canvasBitmap=Math.round(J$i.canvasBitmap/J$b),J$i.canvasReCache=Math.ceil(J$i.canvasReCache/J$b),J$i.treeNodeCollision=Math.round(J$i.treeNodeCollision/J$b),J$i.treeSpriteCollision=Math.round(J$i.treeSpriteCollision/J$b);var J$c=0<J$i.FPS?Math.floor(1e3/J$i.FPS).toString():" ";J$i._fpsStr=J$i.FPS+(J$i.renderSlow?" slow":"")+" "+J$c,J$i._spriteStr=J$i.spriteCount+(J$i.spriteRenderUseCacheCount?"/"+J$i.spriteRenderUseCacheCount:""),J$i._canvasStr=J$i.canvasReCache+"/"+J$i.canvasNormal+"/"+J$i.canvasBitmap,J$i.currentMemorySize=J$N.systemResourceManager.memorySize,J$i._useCanvas?J$i.renderInfoPre():J$i.renderInfo(),J$i.clear()}J$i._count=0,J$i._timer=J$a}},J$i.renderInfoPre=function(){if(J$i._canvas){var J$a=J$i._ctx;J$a.clearRect(J$i._first?0:J$i._vx,0,J$i._width,J$i._height);for(var J$b=J$J.WebGL.mainContext,J$c=0;J$c<J$i._view.length;J$c++){var J$d=J$i._view[J$c];J$i._first&&(J$a.fillStyle="white",J$a.fillText(J$d.title,J$d.x,J$d.y,null,null,null)),J$a.fillStyle=J$d.color;var J$e=-1;if((J$d=J$i._view[J$c]).varying){if(J$b)switch(J$d.varying){case 1:J$e=J$b.getParameter(J$b[J$d.value]);break;case 2:J$e=J$b.getExtension(J$d.value)}}else J$e=J$i[J$d.value];"M"==J$d.units&&(J$e=Math.floor(J$e/1048576*100)/100+" M"),"K"==J$d.units&&(J$e=Math.floor(J$e/1024*100)/100+" K"),"string"==J$d.units&&(J$e=J$e.match(/\d+\.?\d/i)),J$a.fillText(J$e+"",J$d.x+J$i._vx,J$d.y,null,null,null)}}},J$i.renderInfo=function(){for(var J$a="",J$b=J$J.WebGL.mainContext,J$c=0;J$c<J$i._view.length;J$c++){var J$d=J$i._view[J$c],J$e=-1;if(J$d.varying){if(J$b)switch(J$d.varying){case 1:J$e=J$b.getParameter(J$b[J$d.value]);break;case 2:J$e=J$b.getExtension(J$d.value)}}else J$e=J$i[J$d.value];"M"==J$d.units&&(J$e=Math.floor(J$e/1048576*100)/100+" M"),"K"==J$d.units&&(J$e=Math.floor(J$e/1024*100)/100+" K"),"string"==J$d.units&&(J$e=J$e.match(/\d+\.?\d/i)),J$a+=J$e+"\n"}J$i._txt.text=J$a},J$i.FPS=0,J$i.loopCount=0,J$i.shaderCall=0,J$i.drawCall=0,J$i.trianglesFaces=0,J$i.spriteCount=0,J$i.spriteRenderUseCacheCount=0,J$i.treeNodeCollision=0,J$i.treeSpriteCollision=0,J$i.canvasNormal=0,J$i.canvasBitmap=0,J$i.canvasReCache=0,J$i.renderSlow=!1,J$i.currentMemorySize=0,J$i._fpsStr=null,J$i._canvasStr=null,J$i._spriteStr=null,J$i._fpsData=[],J$i._timer=0,J$i._count=0,J$i._view=[],J$i._fontSize=12,J$i._txt=null,J$i._leftText=null,J$i._sp=null,J$i._show=!1,J$i._useCanvas=!1,J$i._canvas=null,J$i._ctx=null,J$i._first=!1,J$i._vx=NaN,J$i._width=0,J$i._height=100,J$i}(),J$Y=(function(){function J$a(){this._strsToID={},this._idToStrs=[],this._length=0}J$k(J$a,"laya.utils.StringKey");var J$b=J$a.prototype;J$b.add=function(J$a){var J$b=this._strsToID[J$a];return null!=J$b?J$b:(this._idToStrs[this._length]=J$a,this._strsToID[J$a]=this._length++)},J$b.getID=function(J$a){var J$b=this._strsToID[J$a];return null==J$b?-1:J$b},J$b.getName=function(J$a){var J$b=this._idToStrs[J$a];return null==J$b?void 0:J$b}}(),function(){var J$j;function J$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}J$k(J$a,"laya.utils.Timer");var J$b=J$a.prototype;return J$b._init=function(){J$z.timer&&J$z.timer.frameLoop(1,this,this._update)},J$b._now=function(){return Date.now()},J$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var J$a=this.currFrame=this.currFrame+this.scale,J$b=this._now();this._delta=(J$b-this._lastTimer)*this.scale;var J$c=this.currTimer=this.currTimer+this._delta;J$z.isDebug&&6e4<Math.abs(J$b-this._lastTimer)&&console.error("系统时间错误！"+(J$b-this._lastTimer)),this._lastTimer=J$b;var J$d=this._handlers;for(J$g=this._count=0,J$h=J$d.length;J$g<J$h;J$g++)if(null!==(J$i=J$d[J$g]).method){var J$e=J$i.userFrame?J$a:J$c;if(J$e>=J$i.exeTime)if(J$i.repeat)if(J$i.jumpFrame)for(;J$e>=J$i.exeTime;)J$i.exeTime+=J$i.delay,J$i.run(!1);else J$i.exeTime+=J$i.delay,J$i.run(!1),J$e>J$i.exeTime&&(J$i.exeTime+=Math.ceil((J$e-J$i.exeTime)/J$i.delay)*J$i.delay);else J$i.run(!0)}else this._count++;(30<this._count||J$a%200==0)&&this._clearHandlers();for(var J$f=this._laters,J$g=0,J$h=J$f.length-1;J$g<=J$h;J$g++){var J$i=J$f[J$g];this._isIgnoreRecover(J$i)||(null!==J$i.method&&(delete this._map[J$i.key],J$i.run(!1)),this._recoverHandler(J$i)),J$g===J$h&&(J$h=J$f.length-1)}J$f.length=0}},J$b._clearHandlers=function(){for(var J$a=this._handlers,J$b=0,J$c=J$a.length;J$b<J$c;J$b++){var J$d=J$a[J$b];null!==J$d.method?this._temp.push(J$d):this._isIgnoreRecover(J$d)?this._temp.push(J$d):this._recoverHandler(J$d)}this._handlers=this._temp,this._temp=J$a,this._temp.length=0},J$b._recoverHandler=function(J$a){this._map[J$a.key]==J$a&&delete this._map[J$a.key],J$a.recover()},J$b._create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){if(!J$c)return J$e.apply(J$d,J$f),null;if(J$g){var J$i=this._getHandler(J$d,J$e);if(J$i)return J$i.repeat=J$b,J$i.userFrame=J$a,J$i.delay=J$c,J$i.ignoreRecover=J$h,J$i.caller=J$d,J$i.method=J$e,J$i.args=J$f,J$i.exeTime=J$c+(J$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),J$i}return(J$i=J$j.create()).repeat=J$b,J$i.userFrame=J$a,J$i.delay=J$c,J$i.ignoreRecover=J$h,J$i.caller=J$d,J$i.method=J$e,J$i.args=J$f,J$i.exeTime=J$c+(J$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(J$i),this._handlers.push(J$i),J$i},J$b._indexHandler=function(J$a){var J$b=J$a.caller,J$c=J$a.method,J$d=J$b?J$b.$_GID||(J$b.$_GID=J$$.getGID()):0,J$e=J$c.$_TID||(J$c.$_TID=this._mid++);J$a.key=J$d+"_"+J$e,this._map[J$a.key]=J$a},J$b.once=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=!0),this._create(!1,!1,J$a,J$b,J$c,J$d,J$e,!1)},J$b.loop=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){void 0===J$e&&(J$e=!0),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!1);var J$h=this._create(!1,!0,J$a,J$b,J$c,J$d,J$e,J$g);J$h&&(J$h.jumpFrame=J$f)},J$b.frameOnce=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=!0),this._create(!0,!1,J$a,J$b,J$c,J$d,J$e,!1)},J$b.frameLoop=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$e&&(J$e=!0),void 0===J$f&&(J$f=!1),this._create(!0,!0,J$a,J$b,J$c,J$d,J$e,J$f)},J$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+J$j._freeCount},J$b.clear=function(J$a,J$b){var J$c=this._getHandler(J$a,J$b);return!(!J$c||this._isIgnoreRecover(J$c))&&(delete this._map[J$c.key],J$c.key=null,J$c.clear(),!0)},J$b.clearAll=function(J$a){if(J$a)for(var J$b=0,J$c=this._handlers.length;J$b<J$c;J$b++){var J$d=this._handlers[J$b];J$d.caller===J$a&&(this._isIgnoreRecover(J$d)||(delete this._map[J$d.key],J$d.key=null,J$d.clear()))}},J$b._getHandler=function(J$a,J$b){var J$c=J$a?J$a.$_GID||(J$a.$_GID=J$$.getGID()):0,J$d=J$b.$_TID||(J$b.$_TID=this._mid++);return this._map[J$c+"_"+J$d]},J$b._isIgnoreRecover=function(J$a){if(J$a.ignoreRecover||J$a.caller&&"IgnoreRecover"==J$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var J$b="";try{arguments.propertyIsEnumerable.caller}catch(J$a){J$b=J$a.stack}J$z.recordError("报错：核心定时器销毁忽略  "+J$b)}return!0}return!1},J$b.hasHandler=function(J$a,J$b){return this._map[J$a.$_GID+"_"+J$b.$_TID]},J$b.callLater=function(J$a,J$b,J$c){if(null==this._getHandler(J$a,J$b)){var J$d=J$j.create();J$d.caller=J$a,J$d.method=J$b,J$d.args=J$c,this._indexHandler(J$d),this._laters.push(J$d)}},J$b.runCallLater=function(J$a,J$b){var J$c=this._getHandler(J$a,J$b);J$c&&null!=J$c.method&&(this._isIgnoreRecover(J$c)||(delete this._map[J$c.key],J$c.run(!0)))},J$b.runTimer=function(J$a,J$b){this.runCallLater(J$a,J$b)},J$o(0,J$b,"delta",function(){return this._delta}),J$a.__init$=function(){J$j=function(){function J$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}J$k(J$b,"");var J$a=J$b.prototype;return J$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},J$a.recover=function(){this.clear(),this.args=J$b._freeHandler,J$b._freeHandler=this,J$b._freeCount++},J$a.run=function(J$a){var J$b=this.caller;if(J$b&&J$b.destroyed)return this.clear();var J$c=this.method,J$d=this.args;J$a&&this.clear(),null!=J$c&&(J$d?J$c.apply(J$b,J$d):J$c.call(J$b))},J$b._freeHandler=null,J$b._freeCount=0,J$b.create=function(){var J$a=J$b._freeHandler;return J$a?(J$b._freeHandler=J$a.args,--J$b._freeCount,J$a.args=null,J$a):new J$b},J$b}()},J$a}()),J$Z=function(){function J$l(){this.gid=0}J$k(J$l,"laya.utils.Tween");var J$a=J$l.prototype;return J$a.to=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){return void 0===J$f&&(J$f=0),void 0===J$g&&(J$g=!1),this._create(J$a,J$b,J$c,J$d,J$e,J$f,J$g,!0,!1,!0)},J$a.from=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){return void 0===J$f&&(J$f=0),void 0===J$g&&(J$g=!1),this._create(J$a,J$b,J$c,J$d,J$e,J$f,J$g,!1,!1,!0)},J$a._create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){if(!J$a)throw new Error("Tween:target is null");this._target=J$a,this._duration=J$c,this._ease=J$d||J$b.ease||J$l.easeNone,this._complete=J$e||J$b.complete,this._delay=J$f,this._props=[],this._usedTimer=0,this._startTimer=J$O.now(),this._usedPool=J$i,this._delayParam=null,this.update=J$b.update;var J$k=J$a.$_GID||(J$a.$_GID=J$$.getGID());return J$l.tweenMap[J$k]?(J$g&&J$l.clearTween(J$a),J$l.tweenMap[J$k].push(this)):J$l.tweenMap[J$k]=[this],J$j?J$f<=0?this.firstStart(J$a,J$b,J$h):(this._delayParam=[J$a,J$b,J$h],J$z.scaleTimer.once(J$f,this,this.firstStart,this._delayParam)):this._initProps(J$a,J$b,J$h),this},J$a.firstStart=function(J$a,J$b,J$c){this._delayParam=null,J$a.destroyed?this.clear():(this._initProps(J$a,J$b,J$c),this._beginLoop())},J$a._initProps=function(J$a,J$b,J$c){for(var J$d in J$b)if("number"==typeof J$a[J$d]){var J$e=J$c?J$a[J$d]:J$b[J$d],J$f=J$c?J$b[J$d]:J$a[J$d];this._props.push([J$d,J$e,J$f-J$e]),J$c||(J$a[J$d]=J$e)}},J$a._beginLoop=function(){J$z.scaleTimer.frameLoop(1,this,this._doEase)},J$a._doEase=function(){this._updateEase(J$O.now())},J$a._updateEase=function(J$a){var J$b=this._target;if(J$b){if(J$b.destroyed)return J$l.clearTween(J$b);var J$c=this._usedTimer=J$a-this._startTimer-this._delay;if(!(J$c<0)){if(J$c>=this._duration)return this.complete();for(var J$d=0<J$c?this._ease(J$c,0,1,this._duration):0,J$e=this._props,J$f=0,J$g=J$e.length;J$f<J$g;J$f++){var J$h=J$e[J$f];J$b[J$h[0]]=J$h[1]+J$d*J$h[2]}this.update&&this.update.run()}}},J$a.complete=function(){if(this._target){J$z.scaleTimer.runTimer(this,this.firstStart);for(var J$a=this._target,J$b=this._props,J$c=this._complete,J$d=0,J$e=J$b.length;J$d<J$e;J$d++){var J$f=J$b[J$d];J$a[J$f[0]]=J$f[1]+J$f[2]}this.update&&this.update.run(),this.clear(),J$c&&J$c.run()}},J$a.pause=function(){J$z.scaleTimer.clear(this,this._beginLoop),J$z.scaleTimer.clear(this,this._doEase),J$z.scaleTimer.clear(this,this.firstStart);var J$a;(J$a=J$O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=J$a)},J$a.setStartTime=function(J$a){this._startTimer=J$a},J$a.clear=function(){this._target&&(this._remove(),this._clear())},J$a._clear=function(){this.pause(),J$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,J$W.recover("tween",this))},J$a.recover=function(){this._usedPool=!0,this._clear()},J$a._remove=function(){var J$a=J$l.tweenMap[this._target.$_GID];if(J$a)for(var J$b=0,J$c=J$a.length;J$b<J$c;J$b++)if(J$a[J$b]===this){J$a.splice(J$b,1);break}},J$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=J$O.now(),this._delayParam)J$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var J$a=this._props,J$b=0,J$c=J$a.length;J$b<J$c;J$b++){var J$d=J$a[J$b];this._target[J$d[0]]=J$d[1]}J$z.scaleTimer.once(this._delay,this,this._beginLoop)}},J$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=J$O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?J$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},J$o(0,J$a,"progress",null,function(J$a){var J$b=J$a*this._duration;this._startTimer=J$O.now()-this._delay-J$b}),J$l.to=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){return void 0===J$f&&(J$f=0),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=!0),J$W.getItemByClass("tween",J$l)._create(J$a,J$b,J$c,J$d,J$e,J$f,J$g,!0,J$h,!0)},J$l.from=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){return void 0===J$f&&(J$f=0),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=!0),J$W.getItemByClass("tween",J$l)._create(J$a,J$b,J$c,J$d,J$e,J$f,J$g,!1,J$h,!0)},J$l.clearAll=function(J$a){if(J$a&&J$a.$_GID){var J$b=J$l.tweenMap[J$a.$_GID];if(J$b){for(var J$c=0,J$d=J$b.length;J$c<J$d;J$c++)J$b[J$c]._clear();J$b.length=0}}},J$l.clear=function(J$a){J$a.clear()},J$l.clearTween=function(J$a){J$l.clearAll(J$a)},J$l.easeNone=function(J$a,J$b,J$c,J$d){return J$c*J$a/J$d+J$b},J$l.tweenMap={},J$l}(),J$$=function(){function J$h(){}return J$k(J$h,"laya.utils.Utils"),J$h.toRadian=function(J$a){return J$a*J$h._pi2},J$h.toAngle=function(J$a){return J$a*J$h._pi},J$h.toHexColor=function(J$a){if(J$a<0||isNaN(J$a))return null;for(var J$b=J$a.toString(16);J$b.length<6;)J$b="0"+J$b;return"#"+J$b},J$h.getGID=function(){return J$h._gid++},J$h.concatArray=function(J$a,J$b){if(!J$b)return J$a;if(!J$a)return J$b;var J$c=0,J$d=J$b.length;for(J$c=0;J$c<J$d;J$c++)J$a.push(J$b[J$c]);return J$a},J$h.clearArray=function(J$a){return J$a&&(J$a.length=0),J$a},J$h.copyArray=function(J$a,J$b){if(J$a||(J$a=[]),!J$b)return J$a;J$a.length=J$b.length;var J$c=0,J$d=J$b.length;for(J$c=0;J$c<J$d;J$c++)J$a[J$c]=J$b[J$c];return J$a},J$h.getGlobalRecByPoints=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g;return J$f=new J$A(J$b,J$c),J$f=J$a.localToGlobal(J$f),J$g=new J$A(J$d,J$e),J$g=J$a.localToGlobal(J$g),J$B._getWrapRec([J$f.x,J$f.y,J$g.x,J$g.y])},J$h.getGlobalPosAndScale=function(J$a){return J$h.getGlobalRecByPoints(J$a,0,0,1,1)},J$h.bind=function(J$a,J$b){return J$a.bind(J$b)},J$h.measureText=function(J$a,J$b){return J$F.measureText(J$a,J$b)},J$h.contextMeasureText=function(J$a){var J$b=J$O.context.measureText(J$a);return J$b||(J$b={width:16,height:16}),J$b},J$h.updateOrder=function(J$a){if(!J$a||J$a.length<2)return!1;for(var J$b,J$c=1,J$d=0,J$e=J$a.length,J$f=NaN;J$c<J$e;){for(J$b=J$a[J$d=J$c],J$f=J$a[J$d]._zOrder;-1<--J$d&&J$a[J$d]._zOrder>J$f;)J$a[J$d+1]=J$a[J$d];J$a[J$d+1]=J$b,J$c++}var J$g=J$b.parent.conchModel;if(J$g)if(null!=J$g.updateZOrder)J$g.updateZOrder();else{for(J$c=0;J$c<J$e;J$c++)J$g.removeChild(J$a[J$c].conchModel);for(J$c=0;J$c<J$e;J$c++)J$g.addChildAt(J$a[J$c].conchModel,J$c)}return!0},J$h.transPointList=function(J$a,J$b,J$c){var J$d=0,J$e=J$a.length;for(J$d=0;J$d<J$e;J$d+=2)J$a[J$d]+=J$b,J$a[J$d+1]+=J$c},J$h.parseInt=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c=J$O.window.parseInt(J$a,J$b);return isNaN(J$c)?0:J$c},J$h.getFileExtension=function(J$a){J$h._extReg.lastIndex=J$a.lastIndexOf(".");var J$b=J$h._extReg.exec(J$a);return J$b&&1<J$b.length?J$b[1].toLowerCase():null},J$h.getTransformRelativeToWindow=function(J$a,J$b,J$c){var J$d=J$z.stage,J$e=laya.utils.Utils.getGlobalPosAndScale(J$a),J$f=J$d._canvasTransform.clone(),J$g=J$f.tx,J$h=J$f.ty;J$f.rotate(-Math.PI/180*J$z.stage.canvasDegree),J$f.scale(J$z.stage.clientScaleX,J$z.stage.clientScaleY);var J$i=J$z.stage.canvasDegree%180!=0,J$j=NaN,J$k=NaN;J$i?(J$j=J$c+J$e.y,J$k=J$b+J$e.x,J$j*=J$f.d,J$k*=J$f.a,90==J$z.stage.canvasDegree?(J$j=J$g-J$j,J$k+=J$h):(J$j+=J$g,J$k=J$h-J$k)):(J$j=J$b+J$e.x,J$k=J$c+J$e.y,J$j*=J$f.a,J$k*=J$f.d,J$j+=J$g,J$k+=J$h);var J$l=NaN,J$m=NaN;return J$m=J$i?(J$l=J$f.d*J$e.height,J$f.a*J$e.width):(J$l=J$f.a*J$e.width,J$f.d*J$e.height),{x:J$j,y:J$k,scaleX:J$l,scaleY:J$m}},J$h.fitDOMElementInArea=function(J$a,J$b,J$c,J$d,J$e,J$f){J$a._fitLayaAirInitialized||(J$a._fitLayaAirInitialized=!0,J$a.style.transformOrigin=J$a.style.webKittransformOrigin="left top",J$a.style.position="absolute");var J$g=J$h.getTransformRelativeToWindow(J$b,J$c,J$d);J$a.style.transform=J$a.style.webkitTransform="scale("+J$g.scaleX+","+J$g.scaleY+") rotate("+J$z.stage.canvasDegree+"deg)",J$a.style.width=J$e+"px",J$a.style.height=J$f+"px",J$a.style.left=J$g.x+"px",J$a.style.top=J$g.y+"px"},J$h.isOkTextureList=function(J$a){if(!J$a)return!1;var J$b,J$c=0,J$d=J$a.length;for(J$c=0;J$c<J$d;J$c++)if(!(J$b=J$a[J$c])||!J$b.source)return!1;return!0},J$h.isOKCmdList=function(J$a){if(!J$a)return!1;var J$b,J$c,J$d=0,J$e=J$a.length,J$f=J$J._context;for(J$d=0;J$d<J$e;J$d++)switch((J$b=J$a[J$d]).callee){case J$f._drawTexture:case J$f._fillTexture:case J$f._drawTextureWithTransform:if(!(J$c=J$b[0])||!J$c.source)return!1}return!0},J$h._gid=1,J$h._pi=180/Math.PI,J$h._pi2=Math.PI/180,J$h._extReg=/\.(\w+)\??/g,J$h.parseXMLFromString=function(J$a){var J$b;if(J$a=J$a.replace(/>\s+</g,"><"),-1<(J$b=(new DOMParser).parseFromString(J$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(J$b.firstChild.firstChild.textContent);return J$b},J$h}(),J$_=function(){function J$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],J$J.isWebGL&&J$Q.regCacheByFunction(J$$.bind(this.startDispose,this),J$$.bind(this.getCacheList,this))}J$k(J$a,"laya.utils.VectorGraphManager");var J$b=J$a.prototype;return J$b.getId=function(){return this._id++},J$b.addShape=function(J$a,J$b){this.shapeDic[J$a]=J$b,this.useDic[J$a]||(this.useDic[J$a]=!0)},J$b.addLine=function(J$a,J$b){this.shapeLineDic[J$a]=J$b,this.shapeLineDic[J$a]||(this.shapeLineDic[J$a]=!0)},J$b.getShape=function(J$a){this._checkKey&&null!=this.useDic[J$a]&&(this.useDic[J$a]=!0)},J$b.deleteShape=function(J$a){this.shapeDic[J$a]&&(this.shapeDic[J$a]=null,delete this.shapeDic[J$a]),this.shapeLineDic[J$a]&&(this.shapeLineDic[J$a]=null,delete this.shapeLineDic[J$a]),null!=this.useDic[J$a]&&delete this.useDic[J$a]},J$b.getCacheList=function(){var J$a,J$b=[];for(J$a in this.shapeDic)J$b.push(this.shapeDic[J$a]);for(J$a in this.shapeLineDic)J$b.push(this.shapeLineDic[J$a]);return J$b},J$b.startDispose=function(J$a){var J$b;for(J$b in this.useDic)this.useDic[J$b]=!1;this._checkKey=!0},J$b.endDispose=function(){if(this._checkKey){var J$a;for(J$a in this.useDic)this.useDic[J$a]||this.deleteShape(J$a);this._checkKey=!1}},J$a.getInstance=function(){return J$a.instance=J$a.instance||new J$a},J$a.instance=null,J$a}(),J$s=function(){function J$d(){this._obj=null,this._obj=J$d.supportWeakMap?new J$O.window.WeakMap:{},J$d.supportWeakMap||J$d._maps.push(this)}J$k(J$d,"laya.utils.WeakObject");var J$a=J$d.prototype;return J$a.set=function(J$a,J$b){if(null!=J$a)if(J$d.supportWeakMap){var J$c=J$a;"string"!=typeof J$a&&"number"!=typeof J$a||(J$c=J$d._keys[J$a])||(J$c=J$d._keys[J$a]={k:J$a}),this._obj.set(J$c,J$b)}else"string"==typeof J$a||"number"==typeof J$a?this._obj[J$a]=J$b:(J$a.$_GID||(J$a.$_GID=J$$.getGID()),this._obj[J$a.$_GID]=J$b)},J$a.get=function(J$a){if(null==J$a)return null;if(J$d.supportWeakMap){var J$b="string"==typeof J$a||"number"==typeof J$a?J$d._keys[J$a]:J$a;return J$b?this._obj.get(J$b):null}return"string"==typeof J$a||"number"==typeof J$a?this._obj[J$a]:this._obj[J$a.$_GID]},J$a.del=function(J$a){if(null!=J$a)if(J$d.supportWeakMap){var J$b="string"==typeof J$a||"number"==typeof J$a?J$d._keys[J$a]:J$a;if(!J$b)return;this._obj.delete(J$b)}else"string"==typeof J$a||"number"==typeof J$a?delete this._obj[J$a]:delete this._obj[this._obj.$_GID]},J$a.has=function(J$a){if(null==J$a)return!1;if(J$d.supportWeakMap){var J$b="string"==typeof J$a||"number"==typeof J$a?J$d._keys[J$a]:J$a;return this._obj.has(J$b)}return"string"==typeof J$a||"number"==typeof J$a?null!=this._obj[J$a]:null!=this._obj[this._obj.$_GID]},J$d.__init__=function(){(J$d.supportWeakMap=null!=J$O.window.WeakMap)||J$z.timer.loop(J$d.delInterval,null,J$d.clearCache)},J$d.clearCache=function(){for(var J$a=0,J$b=J$d._maps.length;J$a<J$b;J$a++){J$d._maps[J$a]._obj={}}},J$d.supportWeakMap=!1,J$d.delInterval=3e5,J$d._keys={},J$d._maps=[],J$i(J$d,["I",function(){return this.I=new J$d}]),J$d}(),J$t=function(){function J$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}J$k(J$a,"laya.utils.WordText");var J$b=J$a.prototype;return J$b.setText=function(J$a){this.changed=!0,this._text=J$a},J$b.toString=function(){return this._text},J$b.charCodeAt=function(J$a){return this._text?this._text.charCodeAt(J$a):NaN},J$b.charAt=function(J$a){return this._text?this._text.charAt(J$a):null},J$o(0,J$b,"length",function(){return this._text?this._text.length:0}),J$a}(),J$aa=function(J$a){function J$g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,J$g.__super.call(this),this._childs=J$g.ARRAY_EMPTY,this._$P=J$g.PROP_EMPTY,this.timer=J$z.scaleTimer,this.conchModel=J$J.isConchNode?this.createConchModel():null}J$k(J$g,"laya.display.Node",J$j);var J$b=J$g.prototype;return J$b._setBit=function(J$a,J$b){1==J$a&&(this._getBit(J$a)!=J$b&&this._updateDisplayedInstage());J$b?this._bits|=J$a:this._bits&=~J$a},J$b._getBit=function(J$a){return 0!=(this._bits&J$a)},J$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},J$b._setUpNoticeType=function(J$a){var J$b=this;for(J$b._setBit(J$a,!0),J$b=J$b.parent;J$b;){if(J$b._getBit(J$a))return;J$b._setBit(J$a,!0),J$b=J$b.parent}},J$b.on=function(J$a,J$b,J$c,J$d){return"display"!==J$a&&"undisplay"!==J$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(J$a,J$b,J$c,J$d,!1)},J$b.once=function(J$a,J$b,J$c,J$d){return"display"!==J$a&&"undisplay"!==J$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(J$a,J$b,J$c,J$d,!0)},J$b.createConchModel=function(){return null},J$b.destroy=function(J$a){void 0===J$a&&(J$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(J$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},J$b.destroyChildren=function(){if(this._childs)for(var J$a=this._childs.length-1;-1<J$a;J$a--)this._childs[J$a].destroy(!0)},J$b.addChild=function(J$a){if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),J$a._parent===this){var J$b=this.getChildIndex(J$a);J$b!==this._childs.length-1&&(this._childs.splice(J$b,1),this._childs.push(J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1)),this._childChanged())}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1),(J$a.parent=this)._childChanged();return J$a},J$b.addChildren=function(J$a){for(var J$b=arguments,J$c=0,J$d=J$b.length;J$c<J$d;)this.addChild(J$b[J$c++])},J$b.addChildAt=function(J$a,J$b){if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),0<=J$b&&J$b<=this._childs.length){if(J$a._parent===this){var J$c=this.getChildIndex(J$a);this._childs.splice(J$c,1),this._childs.splice(J$b,0,J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,J$b)),this._childChanged()}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J$b,0,J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,J$b),J$a.parent=this;return J$a}throw new Error("appendChildAt:The index is out of bounds")},J$b.getChildIndex=function(J$a){return this._childs.indexOf(J$a)},J$b.getChildByName=function(J$a){var J$b=this._childs;if(J$b)for(var J$c=0,J$d=J$b.length;J$c<J$d;J$c++){var J$e=J$b[J$c];if(J$e.name===J$a)return J$e}return null},J$b._get$P=function(J$a){return this._$P[J$a]},J$b._set$P=function(J$a,J$b){return this.destroyed||(this._$P===J$g.PROP_EMPTY&&(this._$P={}),this._$P[J$a]=J$b),J$b},J$b.getChildAt=function(J$a){return this._childs[J$a]},J$b.setChildIndex=function(J$a,J$b){var J$c=this._childs;if(J$b<0||J$b>=J$c.length)throw new Error("setChildIndex:The index is out of bounds.");var J$d=this.getChildIndex(J$a);if(J$d<0)throw new Error("setChildIndex:node is must child of this object.");return J$c.splice(J$d,1),J$c.splice(J$b,0,J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,J$b)),this._childChanged(),J$a},J$b._childChanged=function(J$a){},J$b.removeChild=function(J$a){if(!this._childs)return J$a;var J$b=this._childs.indexOf(J$a);return this.removeChildAt(J$b)},J$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},J$b.removeChildByName=function(J$a){var J$b=this.getChildByName(J$a);return J$b&&this.removeChild(J$b),J$b},J$b.removeChildAt=function(J$a){var J$b=this.getChildAt(J$a);if(J$b){for(var J$c=this._childs.length-1,J$d=J$a;J$d<J$c;++J$d)this._childs[J$d]=this._childs[J$d+1];this._childs.length=J$c,this.conchModel&&this.conchModel.removeChild(J$b.conchModel),J$b.parent=null}return J$b},J$b.removeChildren=function(J$a,J$b){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=2147483647),this._childs&&0<this._childs.length){var J$c=this._childs;if(0===J$a&&J$f<=J$b){var J$d=J$c;this._childs=J$g.ARRAY_EMPTY}else J$d=J$c.splice(J$a,J$b-J$a);for(var J$e=0,J$f=J$d.length;J$e<J$f;J$e++)J$d[J$e].parent=null,this.conchModel&&this.conchModel.removeChild(J$d[J$e].conchModel)}return this},J$b.replaceChild=function(J$a,J$b){var J$c=this._childs.indexOf(J$b);return-1<J$c?(this._childs.splice(J$c,1,J$a),this.conchModel&&(this.conchModel.removeChild(J$b.conchModel),this.conchModel.addChildAt(J$a.conchModel,J$c)),J$b.parent=null,J$a.parent=this,J$a):null},J$b._updateDisplayedInstage=function(){var J$a;J$a=this;var J$b=J$z.stage;for(this._displayedInStage=!1;J$a;){if(J$a._getBit(1)){this._displayedInStage=J$a._displayedInStage;break}if(J$a==J$b||J$a._displayedInStage){this._displayedInStage=!0;break}J$a=J$a.parent}},J$b._setDisplay=function(J$a){this._displayedInStage!==J$a&&((this._displayedInStage=J$a)?this.event("display"):this.event("undisplay"))},J$b._displayChild=function(J$a,J$b){var J$c=J$a._childs;if(J$c)for(var J$d=0;J$d<J$c.length;J$d++){var J$e=J$c[J$d];J$e&&J$e._getBit(1)&&(0<J$e._childs.length?this._displayChild(J$e,J$b):J$e._setDisplay(J$b))}J$a._setDisplay(J$b)},J$b.contains=function(J$a){if(J$a===this)return!0;for(;J$a;){if(J$a.parent===this)return!0;J$a=J$a.parent}return!1},J$b.timerLoop=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$e&&(J$e=!0),void 0===J$f&&(J$f=!1),this.timer.loop(J$a,J$b,J$c,J$d,J$e,J$f)},J$b.timerOnce=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=!0),this.timer._create(!1,!1,J$a,J$b,J$c,J$d,J$e)},J$b.frameLoop=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=!0),this.timer._create(!0,!0,J$a,J$b,J$c,J$d,J$e)},J$b.frameOnce=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=!0),this.timer._create(!0,!1,J$a,J$b,J$c,J$d,J$e)},J$b.clearTimer=function(J$a,J$b){this.timer.clear(J$a,J$b)},J$o(0,J$b,"numChildren",function(){return this._childs.length}),J$o(0,J$b,"destroyed",function(){return this._destroyed}),J$o(0,J$b,"parent",function(){return this._parent},function(J$a){this._parent!==J$a&&(J$a?(this._parent=J$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),J$a.displayedInStage&&this._displayChild(this,!0)),J$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=J$a))}),J$o(0,J$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),J$g.ARRAY_EMPTY=[],J$g.PROP_EMPTY={},J$g.NOTICE_DISPLAY=1,J$g.MOUSEENABLE=2,J$g}(),J$ba=function(J$a){function J$m(J$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,J$m.__super.call(this),this._padding=J$m._PADDING,this._spacing=J$m._SPACING,this._aligns=J$m._ALIGNS,this._font=J$n.EMPTY,this._ower=J$a}J$k(J$m,"laya.display.css.CSSStyle",J$a);var J$b=J$m.prototype;return J$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},J$b.inherit=function(J$a){this._font=J$a._font,this._spacing=J$a._spacing===J$m._SPACING?J$m._SPACING:J$a._spacing.slice(),this.lineHeight=J$a.lineHeight},J$b._widthAuto=function(){return 0!=(262144&this._type)},J$b.widthed=function(J$a){return 0!=(8&this._type)},J$b._calculation=function(J$a,J$b){if(J$b.indexOf("%")<0)return!1;var J$d=this._ower,J$e=J$d.parent,J$f=this._rect;function J$g(J$a,J$b,J$c){return J$a*J$c[0]+J$b*J$c[1]+J$c[2]}function J$c(J$a){var J$b=J$e.width,J$c=J$d.width;J$f.width&&(J$d.width=J$g(J$b,J$c,J$f.width)),J$f.height&&(J$d.height=J$g(J$b,J$c,J$f.height)),J$f.left&&(J$d.x=J$g(J$b,J$c,J$f.left)),J$f.top&&(J$d.y=J$g(J$b,J$c,J$f.top))}null===J$f&&(J$e._getCSSStyle()._type|=524288,J$e.on("resize",this,J$c),this._rect=J$f={input:{}});var J$h=J$b.split(" ");return J$h[0]=parseFloat(J$h[0])/100,1==J$h.length?J$h[1]=J$h[2]=0:(J$h[1]=parseFloat(J$h[1])/100,J$h[2]=parseFloat(J$h[2])),J$f[J$a]=J$h,J$f.input[J$a]=J$b,J$c(),!0},J$b.heighted=function(J$a){return 0!=(8192&this._type)},J$b.size=function(J$a,J$b){var J$c=this._ower,J$d=!1;-1!==J$a&&J$a!=this._ower.width&&(this._type|=8,this._ower.width=J$a,J$d=!0),-1!==J$b&&J$b!=this._ower.height&&(this._type|=8192,this._ower.height=J$b,J$d=!0),J$d&&(J$c._layoutLater(),524288&this._type&&J$c.event("resize",this))},J$b._getAlign=function(){return this._aligns[0]},J$b._getValign=function(){return this._aligns[1]},J$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},J$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new J$n(this._font))},J$b.render=function(J$a,J$b,J$c,J$d){var J$e=J$a.width,J$f=J$a.height;J$c-=J$a.pivotX,J$d-=J$a.pivotY,this._bgground&&null!=this._bgground.color&&J$b.ctx.fillRect(J$c,J$d,J$e,J$f,this._bgground.color),this._border&&this._border.color&&J$b.drawRect(J$c,J$d,J$e,J$f,this._border.color.strColor,this._border.size)},J$b.getCSSStyle=function(){return this},J$b.cssText=function(J$a){this.attrs(J$m.parseOneCSS(J$a,";"))},J$b.attrs=function(J$a){if(J$a)for(var J$b=0,J$c=J$a.length;J$b<J$c;J$b++){var J$d=J$a[J$b];this[J$d[0]]=J$d[1]}},J$b.setTransform=function(J$a){"none"===J$a?this._tf=J$h._TF_EMPTY:this.attrs(J$m.parseOneCSS(J$a,","))},J$b.translate=function(J$a,J$b){this._tf===J$h._TF_EMPTY&&(this._tf=new J$e),this._tf.translateX=J$a,this._tf.translateY=J$b},J$b.scale=function(J$a,J$b){this._tf===J$h._TF_EMPTY&&(this._tf=new J$e),this._tf.scaleX=J$a,this._tf.scaleY=J$b},J$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},J$o(0,J$b,"block",J$a.prototype._$get_block,function(J$a){J$a?this._type|=1:this._type&=-2}),J$o(0,J$b,"valign",function(){return J$m._valigndef[this._aligns[1]]},function(J$a){this._aligns===J$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=J$m._valigndef[J$a]}),J$o(0,J$b,"height",null,function(J$a){if(this._type|=8192,"string"==typeof J$a){if(this._calculation("height",J$a))return;J$a=parseInt(J$a)}this.size(-1,J$a)}),J$o(0,J$b,"width",null,function(J$a){if(this._type|=8,"string"==typeof J$a){var J$b=J$a.indexOf("auto");if(0<=J$b&&(this._type|=262144,J$a=J$a.substr(0,J$b)),this._calculation("width",J$a))return;J$a=parseInt(J$a)}this.size(J$a,-1)}),J$o(0,J$b,"fontWeight",function(){return this._font.weight},function(J$a){this._createFont().weight=J$a}),J$o(0,J$b,"left",null,function(J$a){var J$b=this._ower;if("string"==typeof J$a){if("center"===J$a?J$a="50% -50% 0":"right"===J$a&&(J$a="100% -100% 0"),this._calculation("left",J$a))return;J$a=parseInt(J$a)}J$b.x=J$a}),J$o(0,J$b,"_translate",null,function(J$a){this.translate(J$a[0],J$a[1])}),J$o(0,J$b,"absolute",function(){return 0!=(4&this._type)}),J$o(0,J$b,"top",null,function(J$a){var J$b=this._ower;if("string"==typeof J$a){if("middle"===J$a?J$a="50% -50% 0":"bottom"===J$a&&(J$a="100% -100% 0"),this._calculation("top",J$a))return;J$a=parseInt(J$a)}J$b.y=J$a}),J$o(0,J$b,"align",function(){return J$m._aligndef[this._aligns[0]]},function(J$a){this._aligns===J$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=J$m._aligndef[J$a]}),J$o(0,J$b,"bold",function(){return this._font.bold},function(J$a){this._createFont().bold=J$a}),J$o(0,J$b,"padding",function(){return this._padding},function(J$a){this._padding=J$a}),J$o(0,J$b,"leading",function(){return this._spacing[1]},function(J$a){"string"==typeof J$a&&(J$a=parseInt(J$a+"")),this._spacing===J$m._SPACING&&(this._spacing=[0,0]),this._spacing[1]=J$a}),J$o(0,J$b,"lineElement",function(){return 0!=(65536&this._type)},function(J$a){J$a?this._type|=65536:this._type&=-65537}),J$o(0,J$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(J$a){this.lineElement=!1,"right"===J$a?this._type|=32768:this._type&=-32769}),J$o(0,J$b,"textDecoration",function(){return this._font.decoration},function(J$a){this._createFont().decoration=J$a}),J$o(0,J$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(J$a){"nowrap"===J$a&&(this._type|=131072),"none"===J$a&&(this._type&=-131073)}),J$o(0,J$b,"background",null,function(J$a){J$a?(this._bgground||(this._bgground={}),this._bgground.color=J$a,this._ower.conchModel&&this._ower.conchModel.bgColor(J$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),J$o(0,J$b,"wordWrap",function(){return 0==(131072&this._type)},function(J$a){J$a?this._type&=-131073:this._type|=131072}),J$o(0,J$b,"color",function(){return this._font.color},function(J$a){this._createFont().color=J$a}),J$o(0,J$b,"password",function(){return this._font.password},function(J$a){this._createFont().password=J$a}),J$o(0,J$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(J$a){"none"===J$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=J$a),this._ower.conchModel&&this._ower.conchModel.bgColor(J$a),this._ower._renderType|=256}),J$o(0,J$b,"font",function(){return this._font.toString()},function(J$a){this._createFont().set(J$a)}),J$o(0,J$b,"weight",null,function(J$a){this._createFont().weight=J$a}),J$o(0,J$b,"letterSpacing",function(){return this._spacing[0]},function(J$a){"string"==typeof J$a&&(J$a=parseInt(J$a+"")),this._spacing===J$m._SPACING&&(this._spacing=[0,0]),this._spacing[0]=J$a}),J$o(0,J$b,"fontSize",function(){return this._font.size},function(J$a){this._createFont().size=J$a}),J$o(0,J$b,"italic",function(){return this._font.italic},function(J$a){this._createFont().italic=J$a}),J$o(0,J$b,"fontFamily",function(){return this._font.family},function(J$a){this._createFont().family=J$a}),J$o(0,J$b,"stroke",function(){return this._font.stroke[0]},function(J$a){this._createFont().stroke===J$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=J$a}),J$o(0,J$b,"strokeColor",function(){return this._font.stroke[1]},function(J$a){this._createFont().stroke===J$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=J$a}),J$o(0,J$b,"border",function(){return this._border?this._border.value:""},function(J$a){if("none"!=J$a){this._border||(this._border={});var J$b=(this._border.value=J$a).split(" ");if(this._border.color=J$S.create(J$b[J$b.length-1]),1==J$b.length)return this._border.size=1,void(this._border.type="solid");var J$c=0;0<J$b[0].indexOf("px")?(this._border.size=parseInt(J$b[0]),J$c++):this._border.size=1,this._border.type=J$b[J$c],this._ower._renderType|=256}else this._border=null}),J$o(0,J$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(J$a){J$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==J$a?null:J$S.create(J$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),J$o(0,J$b,"position",function(){return 4&this._type?"absolute":""},function(J$a){"absolute"==J$a?this._type|=4:this._type&=-5}),J$o(0,J$b,"display",null,function(J$a){switch(J$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),J$o(0,J$b,"paddingLeft",function(){return this.padding[3]}),J$o(0,J$b,"paddingTop",function(){return this.padding[0]}),J$o(0,J$b,"_scale",null,function(J$a){this._ower.scale(J$a[0],J$a[1])}),J$o(0,J$b,"_rotate",null,function(J$a){this._ower.rotation=J$a}),J$m.parseOneCSS=function(J$a,J$b){for(var J$c,J$d=[],J$e=J$a.split(J$b),J$f=0,J$g=J$e.length;J$f<J$g;J$f++){var J$h=J$e[J$f],J$i=J$h.indexOf(":"),J$j=J$h.substr(0,J$i).replace(/^\s+|\s+$/g,"");if(0!=J$j.length){var J$k=J$h.substr(J$i+1).replace(/^\s+|\s+$/g,""),J$l=[J$j,J$k];switch(J$j){case"italic":case"bold":J$l[1]="true"==J$k;break;case"line-height":J$l[0]="lineHeight",J$l[1]=parseInt(J$k);break;case"font-size":J$l[0]="fontSize",J$l[1]=parseInt(J$k);break;case"padding":1<(J$c=J$k.split(" ")).length||(J$c[1]=J$c[2]=J$c[3]=J$c[0]),J$l[1]=[parseInt(J$c[0]),parseInt(J$c[1]),parseInt(J$c[2]),parseInt(J$c[3])];break;case"rotate":J$l[0]="_rotate",J$l[1]=parseFloat(J$k);break;case"scale":J$c=J$k.split(" "),J$l[0]="_scale",J$l[1]=[parseFloat(J$c[0]),parseFloat(J$c[1])];break;case"translate":J$c=J$k.split(" "),J$l[0]="_translate",J$l[1]=[parseInt(J$c[0]),parseInt(J$c[1])];break;default:(J$l[0]=J$m._CSSTOVALUE[J$j])||(J$l[0]=J$j)}J$d.push(J$l)}}return J$d},J$m.parseCSS=function(J$a,J$b){for(var J$c;null!=(J$c=J$m._parseCSSRegExp.exec(J$a));)J$m.styleSheets[J$c[1]]=J$m.parseOneCSS(J$c[2],";")},J$m.EMPTY=new J$m(null),J$m._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},J$m._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),J$m._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},J$m._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},J$m.styleSheets={},J$m.ALIGN_CENTER=1,J$m.ALIGN_RIGHT=2,J$m.VALIGN_MIDDLE=1,J$m.VALIGN_BOTTOM=2,J$m._CSS_BLOCK=1,J$m._DISPLAY_NONE=2,J$m._ABSOLUTE=4,J$m._WIDTH_SET=8,J$m._PADDING=[0,0,0,0],J$m._RECT=[-1,-1,-1,-1],J$m._SPACING=[0,0],J$m._ALIGNS=[0,0,0],J$m.ADDLAYOUTED=512,J$m._NEWFONT=4096,J$m._HEIGHT_SET=8192,J$m._BACKGROUND_SET=16384,J$m._FLOAT_RIGHT=32768,J$m._LINE_ELEMENT=65536,J$m._NOWARP=131072,J$m._WIDTHAUTO=262144,J$m._LISTERRESZIE=524288,J$m}(J$h),J$ca=function(J$a){function J$g(){this.url=null,this.audio=null,this.loaded=!1,J$g.__super.call(this)}J$k(J$g,"laya.media.h5audio.AudioSound",J$j);var J$b=J$g.prototype;return J$b.dispose=function(){var J$a=J$g._audioCache[this.url];J$a&&(J$a.src="",delete J$g._audioCache[this.url])},J$b.load=function(J$a){var J$b;if(J$a=J$I.formatURL(J$a),(this.url=J$a)==J$E._tMusic?(J$g._initMusicAudio(),(J$b=J$g._musicAudio).src!=J$a&&(J$g._audioCache[J$b.src]=null,J$b=null)):J$b=J$g._audioCache[J$a],J$b&&2<=J$b.readyState)this.event("complete");else{J$b||(J$b=J$a==J$E._tMusic?(J$g._initMusicAudio(),J$g._musicAudio):J$O.createElement("audio"),(J$g._audioCache[J$a]=J$b).src=J$a),J$b.addEventListener("canplaythrough",J$d),J$b.addEventListener("error",J$e);var J$c=this;(this.audio=J$b).load?J$b.load():J$e()}function J$d(){J$f(),J$c.loaded=!0,J$c.event("complete")}function J$e(){J$b.load=null,J$f(),J$c.event("error")}function J$f(){J$b.removeEventListener("canplaythrough",J$d),J$b.removeEventListener("error",J$e)}},J$b.play=function(J$a,J$b,J$c){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),!this.url)return null;var J$d,J$e;if(!(J$d=this.url==J$E._tMusic?J$g._musicAudio:J$g._audioCache[this.url]))return null;J$e=J$W.getItem("audio:"+this.url),J$J.isConchApp?J$e||((J$e=J$O.createElement("audio")).src=this.url):this.url==J$E._tMusic?(J$g._initMusicAudio(),(J$e=J$g._musicAudio).src=this.url):J$e=J$e||J$d.cloneNode(!0);var J$f=new J$ma(J$e);return J$f.url=this.url,J$f.loops=J$b,J$f.startTime=J$a,J$f.startHandler=J$c,J$f.play(!1),J$E.addChannel(J$f),J$f},J$o(0,J$b,"duration",function(){var J$a;return(J$a=J$g._audioCache[this.url])?J$a.duration:0}),J$g._initMusicAudio=function(){J$g._musicAudio||(J$g._musicAudio||(J$g._musicAudio=J$O.createElement("audio")),J$J.isConchApp||J$O.document.addEventListener("mousedown",J$g._makeMusicOK))},J$g._makeMusicOK=function(){J$O.document.removeEventListener("mousedown",J$g._makeMusicOK),J$g._musicAudio.src?J$g._musicAudio.play():(J$g._musicAudio.src="",J$g._musicAudio.load())},J$g._audioCache={},J$g._musicAudio=null,J$g}(),J$da=function(J$a){function J$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,J$b.__super.call(this)}J$k(J$b,"laya.media.SoundChannel",J$j);var J$c=J$b.prototype;return J$c.play=function(){},J$c.stop=function(){},J$c.pause=function(){},J$c.resume=function(){},J$c.__runComplete=function(J$a){J$a&&J$a.run()},J$o(0,J$c,"volume",function(){return 1},function(J$a){}),J$o(0,J$c,"position",function(){return 0}),J$o(0,J$c,"duration",function(){return 0}),J$b}(),J$ea=function(J$a){function J$b(){J$b.__super.call(this)}J$k(J$b,"laya.media.Sound",J$j);var J$c=J$b.prototype;return J$c.load=function(J$a){},J$c.play=function(J$a,J$b,J$c){return void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),null},J$c.dispose=function(){},J$o(0,J$c,"duration",function(){return 0}),J$b}(),J$fa=function(J$a){function J$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,J$e.__super.call(this)}J$k(J$e,"laya.media.webaudio.WebAudioSound",J$j);var J$b=J$e.prototype;return J$b.load=function(J$a){this.url=J$a,this.audioBuffer=J$e._dataCache[J$a],this.audioBuffer?this._loaded(this.audioBuffer):(J$e.e.on("loaded:"+J$a,this,this._loaded),J$e.e.on("err:"+J$a,this,this._err),J$e.__loadingSound[J$a]||(J$e.__loadingSound[J$a]=!0,J$z.loader.load(J$a,J$u.create(this,this.onloaded),null,J$ha.BUFFER,4,!1,null,!0)))},J$b.onloaded=function(J$a){J$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=J$a,J$e.buffs.push({buffer:this.data,url:this.url}),J$e.decode())},J$b._err=function(){if(this._removeLoadEvents(),J$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var J$a,J$b,J$c,J$d=0;for(J$a=(J$b=this.__toPlays).length,J$d=0;J$d<J$a;J$d++)(J$c=J$b[J$d])[3]&&!J$c[3].isStopped&&J$c[3].event("error");this.__toPlays.length=0}},J$b._loaded=function(J$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=J$a,this.loaded=!0,this.event("complete"))},J$b._removeLoadEvents=function(){J$e.e.off("loaded:"+this.url,this,this._loaded),J$e.e.off("err:"+this.url,this,this._err)},J$b.__playAfterLoaded=function(){if(this.__toPlays){var J$a,J$b,J$c,J$d=0;for(J$a=(J$b=this.__toPlays).length,J$d=0;J$d<J$a;J$d++)(J$c=J$b[J$d])[3]&&!J$c[3].isStopped&&this.play(J$c[0],J$c[1],J$c[2],J$c[3]);this.__toPlays.length=0}},J$b.play=function(J$a,J$b,J$c,J$d){return void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),J$d=J$d||new J$na,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([J$a,J$b,J$c,J$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),J$d.url=this.url,J$d.loops=J$b,J$d.audioBuffer=this.audioBuffer,J$d.startTime=J$a,J$d.startHandler=J$c,J$d.play(!1),J$E.addChannel(J$d),J$d},J$b.dispose=function(){this._disposed=!0,delete J$e._dataCache[this.url],delete J$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},J$o(0,J$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),J$e.decode=function(){if(!(J$e.buffs.length<=0||J$e.isDecoding))if(J$e.isDecoding=!0,(J$e.tInfo=J$e.buffs.shift())&&J$e.tInfo.buffer&&J$e.tInfo.buffer.byteLength)try{J$e.ctx.decodeAudioData(J$e.tInfo.buffer,J$e._done,J$e._fail)}catch(J$a){console.error("decodeAudioData error  byteLength:"+J$e.tInfo.buffer.byteLength+"  url:"+J$e.tInfo.url)}else J$e._fail()},J$e._done=function(J$a){J$e.e.event("loaded:"+J$e.tInfo.url,J$a),J$e._dataCache[J$e.tInfo.url]=J$a,J$e.isDecoding=!1,J$e.decode()},J$e._fail=function(){J$e.e.event("err:"+J$e.tInfo.url,null),J$e.isDecoding=!1,J$e.decode()},J$e._playEmptySound=function(){if(null!=J$e.ctx){if(J$e._emptySource&&(J$e._emptySource.stop(),J$e._emptySource.disconnect(0),!J$na._tryCleanFailed))try{J$e._emptySource.buffer=null}catch(J$a){J$na._tryCleanFailed=!0}var J$a=J$e.ctx.createBufferSource();J$a.buffer=J$e._miniBuffer,J$a.connect(J$e.ctx.destination),J$a.start(0,0,0),J$e._emptySource=J$a}},J$e._unlock=function(){J$e._unlocked||(J$e._playEmptySound(),"running"==J$e.ctx.state?(J$O.document.removeEventListener("mousedown",J$e._unlock,!0),J$O.document.removeEventListener("touchend",J$e._unlock,!0),J$O.document.removeEventListener("touchstart",J$e._unlock,!0),J$e._unlocked=!0):"suspended"==J$e.ctx.state&&J$E._recoverWebAudio())},J$e.initWebAudio=function(){"running"!=J$e.ctx.state&&(J$e._unlock(),J$O.document.addEventListener("mousedown",J$e._unlock,!0),J$O.document.addEventListener("touchend",J$e._unlock,!0),J$O.document.addEventListener("touchstart",J$e._unlock,!0))},J$e._emptySource=null,J$e._dataCache={},J$e.buffs=[],J$e.isDecoding=!1,J$e._unlocked=!1,J$e.tInfo=null,J$e.__loadingSound={},J$i(J$e,["window",function(){return this.window=J$O.window},"webAudioEnabled",function(){return this.webAudioEnabled=J$e.window.AudioContext||J$e.window.webkitAudioContext||J$e.window.mozAudioContext},"ctx",function(){return this.ctx=J$e.webAudioEnabled?new(J$e.window.AudioContext||J$e.window.webkitAudioContext||J$e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=J$e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new J$j}]),J$e}(),J$ga=function(J$a){function J$b(){this._responseType=null,this._data=null,J$b.__super.call(this),this._http=new J$O.window.XMLHttpRequest}J$k(J$b,"laya.net.HttpRequest",J$j);var J$c=J$b.prototype;return J$c.send=function(J$a,J$b,J$c,J$d,J$e){void 0===J$c&&(J$c="get"),void 0===J$d&&(J$d="text"),this._responseType=J$d,this._data=null;var J$f=this,J$g=this._http;if(J$g.open(J$c,J$a,!0),J$e)for(var J$h=0;J$h<J$e.length;J$h++)J$g.setRequestHeader(J$e[J$h++],J$e[J$h]);else J$J.isConchApp||(J$b&&"string"!=typeof J$b?J$g.setRequestHeader("Content-Type","application/json"):J$g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));J$g.responseType="arraybuffer"!==J$d?"text":"arraybuffer",J$g.onerror=function(J$a){J$f._onError(J$a)},J$g.onabort=function(J$a){J$f._onAbort(J$a)},J$g.onprogress=function(J$a){J$f._onProgress(J$a)},J$g.onload=function(J$a){J$f._onLoad(J$a)},J$g.send(J$b)},J$c._onProgress=function(J$a){J$a&&J$a.lengthComputable&&this.event("progress",J$a.loaded/J$a.total)},J$c._onAbort=function(J$a){this.error("Request was aborted by user")},J$c._onError=function(J$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},J$c._onLoad=function(J$a){var J$b=this._http,J$c=void 0!==J$b.status?J$b.status:200;200===J$c||204===J$c||0===J$c?this.complete():this.error("["+J$b.status+"]"+J$b.statusText+":"+J$b.responseURL)},J$c.error=function(J$a){this.clear(),this.event("error",J$a)},J$c.complete=function(){this.clear();var J$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=J$$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(J$a){J$b=!1,this.error(J$a.message)}J$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},J$c.clear=function(){var J$a=this._http;J$a.onerror=J$a.onabort=J$a.onprogress=J$a.onload=null},J$o(0,J$c,"url",function(){return this._http.responseURL}),J$o(0,J$c,"http",function(){return this._http}),J$o(0,J$c,"data",function(){return this._data}),J$b}(),J$ha=function(J$a){function J$C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,J$C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}J$k(J$C,"laya.net.Loader",J$j);var J$b=J$C.prototype;return J$b.load=function(J$a,J$b,J$c,J$d,J$e){if(J$a&&""!=J$a||console.error("Loader 加载的url不合法 "+J$a),void 0===J$c&&(J$c=!0),void 0===J$e&&(J$e=!1),this._url=J$a,this._base64=!1,0===J$a.indexOf("data:image")?(this._base64=!0,this._type=J$b="image"):this._type=J$b||(J$b=this.getTypeFromUrl(J$a)),this._cache=J$c,this._data=null,!J$e&&J$C.loadedMap[J$a])return this._data=J$C.loadedMap[J$a],this.event("progress",1),void this.event("complete",this._data);if(J$d&&J$C.setGroup(J$a,J$d),null!=J$C.parserMap[J$b])return this._customParse=!0,void(J$C.parserMap[J$b]instanceof laya.utils.Handler?J$C.parserMap[J$b].runWith(this):J$C.parserMap[J$b].call(null,this));if("image"===J$b||"htmlimage"===J$b||"nativeimage"===J$b)return this._loadImage(J$a);if("ttf"===J$b)return this._loadTTF(J$a);switch(J$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:J$b}J$C.preLoadedMap[J$a]?this.onLoaded(J$C.preLoadedMap[J$a]):J$g.resMgrLoad(J$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},J$b.getTypeFromUrl=function(J$a){var J$b=J$$.getFileExtension(J$a);return J$b?J$C.typeMap[J$b]:(console.warn("Not recognize the resources suffix",J$a),"text")},J$b._loadTTF=function(J$a){J$a=J$I.formatURL(J$a);var J$b=new J$H;J$b.complete=J$u.create(this,this.onLoaded),J$b.load(J$a)},J$b._loadBase64Image=function(J$b){J$b=J$I.formatURL(J$b);var J$c,J$a=this;function J$d(){J$c.onload=null,J$c.onerror=null,delete J$C.imgCache[J$b]}function J$e(){J$d(),J$a.onLoaded(J$c)}function J$f(){J$d(),J$a.event("error","Load image failed")}"nativeimage"===this._type?((J$c=new J$O.window.Image).crossOrigin="",J$c.onload=J$e,J$c.onerror=J$f,J$c.src=J$b,J$C.imgCache[J$b]=J$c):new J$ya.create(J$b,{onload:J$e,onerror:J$f,onCreate:function(J$a){J$c=J$a,J$C.imgCache[J$b]=J$a}})},J$b._loadImage=function(J$a){this._base64?this._loadBase64Image(J$a):J$g.imgMgrLoad(J$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},J$b._loadImageComplete=function(J$a,J$b,J$c){if(null!=J$c)if(J$c instanceof ArrayBuffer){var J$d=new DataView(J$c),J$e=new laya.webgl.resource.WebGLImage(new Uint8Array(J$c,8),J$a,0,!1,J$d.getUint32(0),J$d.getUint32(4));this.onLoaded(J$e)}else if(J$c instanceof J$ka)J$C.imgMgrSet[J$a]=J$b,J$g.imgMgrLock(J$a,J$C.imgMgrSet[J$a]),this._url=J$a,this.complete(J$c);else{var J$f=-1!=J$a.indexOf(".png",J$a.length-4)?6408:6407;J$e=new laya.webgl.resource.WebGLImage(J$c,J$a,J$f,!1,J$c.width,J$c.height);this.onLoaded(J$e)}else this.event("error","Load image failed")},J$b.imageCancel=function(J$a,J$b,J$c){J$g.imgMgrCancel&&J$g.imgMgrCancel(J$a,this._onImageCallback)},J$b._loadSound=function(J$a){var J$b=new J$E._soundClass,J$c=this;function J$d(){J$b.offAll()}J$b.on("complete",this,function(){J$d(),J$c.onLoaded(J$b)}),J$b.on("error",this,function(){J$d(),J$b.dispose(),J$c.event("error","Load sound failed")}),J$b.load(J$a)},J$b.onProgress=function(J$a){"atlas"===this._type?this.event("progress",.3*J$a):this.event("progress",J$a)},J$b.onError=function(J$a){this.event("error",J$a)},J$b._loadedComplete=function(J$a,J$b,J$c){if(null!=J$c)switch(this._type){case"atlas":case"plf":case"json":var J$d=new J$P(J$c);this.onLoaded(JSON.parse(J$d.readUTFBytes()));break;case"font":J$d=new J$P(J$c);this.onLoaded(J$$.parseXMLFromString(J$d.readUTFBytes()));break;default:this.onLoaded(J$c)}else this.event("error",J$a)},J$b.onLoaded=function(J$a){var J$b=this._type;if("plf"==J$b)this.parsePLFData(J$a),this.complete(J$a);else if("image"===J$b){var J$c=new J$ka(J$a);J$c.url=this._url,this.complete(J$c)}else if("sound"===J$b||"htmlimage"===J$b||"nativeimage"===J$b)this.complete(J$a);else if("atlas"===J$b){if(!J$a.src&&!J$a._setContext){if(!this._data){if((this._data=J$a).meta&&J$a.meta.image)for(var J$d=J$a.meta.image.split(","),J$e=0<=this._url.indexOf("/")?"/":"\\",J$f=this._url.lastIndexOf(J$e),J$g=0<=J$f?this._url.substr(0,J$f+1):"",J$h=0,J$i=J$d.length;J$h<J$i;J$h++)J$d[J$h]=J$g+J$d[J$h];else J$d=[this._url.replace(".json",".png")];J$d.reverse(),J$a.toLoads=J$d,J$a.pics=[]}return this.event("progress",.3+1/J$d.length*.6),this._loadImage(J$d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(J$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var J$j=this._data.frames,J$k=this._url.split("?")[0],J$l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:J$k.substring(0,J$k.lastIndexOf("."))+"/",J$m=this._data.pics,J$n=J$I.formatURL(this._url),J$o=J$C.atlasMap[J$n]||(J$C.atlasMap[J$n]=[]);J$o.dir=J$l;var J$p=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var J$q in J$p=parseFloat(this._data.meta.scale),J$j){var J$r,J$u=J$j[J$q],J$v=J$m[J$u.frame.idx?J$u.frame.idx:0],J$w=J$I.formatURL(J$l+J$q);J$v.scaleRate=J$p,J$r=J$ka.create(J$v,J$u.frame.x,J$u.frame.y,J$u.frame.w,J$u.frame.h,J$u.spriteSourceSize.x,J$u.spriteSourceSize.y,J$u.sourceSize.w,J$u.sourceSize.h),J$C.cacheRes(J$w,J$r),J$C.keepCache(this._url,J$l+J$q),J$r.url=J$w,J$o.push(J$w)}else for(J$q in J$j)J$v=J$m[(J$u=J$j[J$q]).frame.idx?J$u.frame.idx:0],J$w=J$I.formatURL(J$l+J$q),J$C.cacheRes(J$w,J$ka.create(J$v,J$u.frame.x,J$u.frame.y,J$u.frame.w,J$u.frame.h,J$u.spriteSourceSize.x,J$u.spriteSourceSize.y,J$u.sourceSize.w,J$u.sourceSize.h)),J$C.loadedMap[J$w].url=J$w,J$C.keepCache(this._url,J$l+J$q),J$o.push(J$w);delete this._data.pics,this.complete(this._data)}else if("font"==J$b){if(!J$a.src)return this._data=J$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var J$x=new J$D;J$x.parseFont(this._data,J$a);var J$y=this._url.split(".fnt")[0].split("/"),J$z=J$y[J$y.length-1];J$qa.registerBitmapFont(J$z,J$x),this._data=J$x,this.complete(this._data)}else if("pkm"==J$b){var J$A=J$ya.create(J$a,this._url),J$B=new J$ka(J$A);J$B.url=this._url,this.complete(J$B)}else this.complete(J$a)},J$b.parsePLFData=function(J$a){var J$b,J$c,J$d;for(J$b in J$a)switch(J$d=J$a[J$b],J$b){case"json":case"text":for(J$c in J$d)J$C.preLoadedMap[J$I.formatURL(J$c)]=J$d[J$c];break;default:for(J$c in J$d)J$C.preLoadedMap[J$I.formatURL(J$c)]=J$d[J$c]}},J$b.complete=function(J$a){this._data=J$a,this._customParse?this.event("loaded",J$a instanceof Array?[J$a]:J$a):(J$C._loaders.push(this),J$C._isWorking||J$C.checkNext())},J$b.endLoad=function(J$a){J$a&&(this._data=J$a),this._cache&&J$C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},J$o(0,J$b,"url",function(){return this._url}),J$o(0,J$b,"data",function(){return this._data}),J$o(0,J$b,"cache",function(){return this._cache}),J$o(0,J$b,"type",function(){return this._type}),J$C.checkNext=function(){J$C._isWorking=!0;for(var J$a=J$O.now();J$C._startIndex<J$C._loaders.length;)if(J$O.now(),J$C._loaders[J$C._startIndex].endLoad(),J$C._startIndex++,J$O.now()-J$a>J$C.maxTimeOut)return console.warn("loader callback cost a long time:"+(J$O.now()-J$a)+" url="+J$C._loaders[J$C._startIndex-1].url),void J$z.timer.frameOnce(1,null,J$C.checkNext);J$C._loaders.length=0,J$C._startIndex=0,J$C._isWorking=!1},J$C.clearRes=function(J$a,J$b){if(null!=J$a){void 0===J$b&&(J$b=!1),J$a=J$I.formatURL(J$a);var J$c=J$C.getAtlas(J$a);if(J$c){for(var J$d=0,J$e=J$c.length;J$d<J$e;J$d++){var J$f=J$c[J$d],J$g=J$C.getRes(J$f);delete J$C.loadedMap[J$f],J$C.clearCache(J$a.substring(J$I.basePath.length),J$f.substring(J$I.basePath.length)),J$g&&J$g.destroy(J$b)}J$c.length=0,delete J$C.atlasMap[J$a],delete J$C.loadedMap[J$a]}else{var J$h=J$C.loadedMap[J$a];J$h&&(delete J$C.loadedMap[J$a],J$h instanceof laya.resource.Texture&&J$h.bitmap&&J$h.destroy(J$b))}}},J$C.clearTextureRes=function(J$a){J$a=J$I.formatURL(J$a);var J$b=laya.net.Loader.getAtlas(J$a),J$c=J$b&&0<J$b.length?laya.net.Loader.getRes(J$b[0]):laya.net.Loader.getRes(J$a);J$c&&J$c.bitmap&&(J$J.isConchApp&&!J$J.isConchWebGL?J$c.bitmap.source.releaseTexture&&J$c.bitmap.source.releaseTexture():null==J$c.bitmap._atlaser&&J$c.bitmap.releaseResource(!0))},J$C.getRes=function(J$a){return J$C.loadedMap[J$I.formatURL(J$a)]},J$C.getAtlas=function(J$a){return J$C.atlasMap[J$I.formatURL(J$a)]},J$C.cacheRes=function(J$a,J$b){J$a=J$I.formatURL(J$a),null!=J$C.loadedMap[J$a]?console.warn("Resources already exist,is repeated loading:",J$a):J$C.loadedMap[J$a]=J$b},J$C.setGroup=function(J$a,J$b){J$C.groupMap[J$b]||(J$C.groupMap[J$b]=[]),J$C.groupMap[J$b].push(J$a)},J$C.clearResByGroup=function(J$a){if(J$C.groupMap[J$a]){var J$b=J$C.groupMap[J$a],J$c=0,J$d=J$b.length;for(J$c=0;J$c<J$d;J$c++)J$C.clearRes(J$b[J$c]);J$b.length=0}},J$C.keepCache=function(J$a,J$b){if(J$a&&J$b){var J$c=J$C.cacheSet[J$b];J$c?-1==J$c.indexOf(J$a)&&J$c.push(J$a):J$C.cacheSet[J$b]=[J$a]}},J$C.clearCache=function(J$a,J$b){if(J$a&&J$b){var J$c=J$C.cacheSet[J$b];if(J$c){var J$d=J$c.indexOf(J$a);if(-1!==J$d){var J$e=J$c.length-1;0==J$e?(delete J$C.cacheSet[J$b],0<J$C.imgMgrSet[J$b]?J$g.imgMgrFree(J$b,J$C.imgMgrSet[J$b]):J$C.clearRes(J$b,!0)):(J$c[J$d]=J$c[J$e],J$c.length=J$e)}}}},J$C.saveObject=function(J$a,J$b,J$c){if(J$b&&J$a){var J$d=J$C.objectSet[J$a];J$d?(console.warn("Loader.saveObject: "+J$a),J$d[0]=J$b,J$d[1]=J$c):J$C.objectSet[J$a]=[J$b,J$c,[]]}},J$C.findObject=function(J$a){if(J$a){var J$b=J$C.objectSet[J$a];if(J$b)return J$b[0]}return null},J$C.keepObject=function(J$a,J$b){if(J$a&&J$b){var J$c=J$C.objectSet[J$b];J$c&&-1===J$c[2].indexOf(J$a)&&J$c[2].push(J$a)}},J$C.clearObject=function(J$a,J$b){if(J$a&&J$b){var J$c=J$C.objectSet[J$b];if(J$c){var J$d=J$c[2],J$e=J$d.indexOf(J$a);if(-1!==J$e){var J$f=J$d.length-1;0==J$f?(delete J$C.objectSet[J$b],J$c[1]&&J$c[1].call(null,J$c[0])):(J$d[J$e]=J$d[J$f],J$d.length=J$f)}}}},J$C.TEXT="text",J$C.JSON="json",J$C.XML="xml",J$C.BUFFER="arraybuffer",J$C.IMAGE="image",J$C.SOUND="sound",J$C.ATLAS="atlas",J$C.FONT="font",J$C.TTF="ttf",J$C.PLF="plf",J$C.PKM="pkm",J$C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},J$C.parserMap={},J$C.groupMap={},J$C.maxTimeOut=100,J$C.loadedMap={},J$C.preLoadedMap={},J$C.atlasMap={},J$C._loaders=[],J$C._isWorking=!1,J$C._startIndex=0,J$C.imgCache={},J$C.cacheSet={},J$C.objectSet={},J$C.imgMgrSet={},J$C}(),J$ia=function(J$a){var J$m;function J$n(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},J$n.__super.call(this);for(var J$a=0;J$a<this._maxPriority;J$a++)this._resInfos[J$a]=[]}J$k(J$n,"laya.net.LoaderManager",J$j);var J$b=J$n.prototype;return J$b.create=function(J$a,J$c,J$b,J$d,J$e,J$f,J$g,J$h){if(null==J$f&&(J$f=2),null==J$g&&(J$g=!0),J$a instanceof Array){var J$i=J$a,J$j=J$i.length,J$k=0;if(J$b)var J$l=J$u.create(J$b.caller,J$b.method,J$b.args,!1);for(var J$m=0;J$m<J$j;J$m++){var J$n=J$i[J$m];"string"==typeof J$n&&(J$n=J$i[J$m]={url:J$n}),J$n.progress=0}for(J$m=0;J$m<J$j;J$m++){J$n=J$i[J$m];var J$o=J$b?J$u.create(null,J$r,[J$n],!1):null,J$p=J$b||J$c?J$u.create(null,J$q,[J$n]):null;this._create(J$n.url,J$p,J$o,J$n.clas||J$d,J$n.params||J$e,null!=J$n.priority&&0<=J$n.priority?J$n.priority:J$f,J$g,J$n.group||J$h)}function J$q(J$a,J$b){J$k++,J$a.progress=1,J$k===J$j&&J$c&&J$c.run()}function J$r(J$a,J$b){J$a.progress=J$b;for(var J$c=0,J$d=0;J$d<J$j;J$d++){J$c+=J$i[J$d].progress}var J$e=J$c/J$j;J$l.runWith(J$e)}return!0}return this._create(J$a,J$c,J$b,J$d,J$e,J$f,J$g,J$h)},J$b._create=function(J$b,J$c,J$a,J$d,J$e,J$f,J$g,J$h){J$b&&""!=J$b||console.error("加载的url不合法 "+J$b),null==J$f&&(J$f=2),null==J$g&&(J$g=!0);var J$i=J$I.formatURL(J$b),J$j=this.getRes(J$i);if(J$j)!J$j.hasOwnProperty("loaded")||J$j.loaded?(J$a&&J$a.runWith(1),J$c&&J$c.run()):J$c&&J$z.loader._createListener(J$b,J$c.caller,J$c.method,J$c.args,!0,!1);else{var J$k=J$$.getFileExtension(J$b),J$l=J$n.createMap[J$k];if(!J$l)throw new Error("LoaderManager:unknown file("+J$b+") extension with: "+J$k+".");J$d||(J$d=J$l[0]);var J$m=J$l[1];if("atlas"==J$k)this.load(J$b,J$c,J$a,J$m,J$f,J$g);else{J$d===J$ka&&(J$m="htmlimage"),(J$j=J$d?new J$d:null).hasOwnProperty("_loaded")&&(J$j._loaded=!1),J$j._setUrl(J$b),J$h&&J$j._setGroup(J$h),this._createLoad(J$j,J$b,J$u.create(null,function(J$a){J$j&&!J$j.destroyed&&J$a&&J$j.onAsynLoaded.call(J$j,J$b,J$a,J$e),J$c&&J$c.run();J$z.loader.event(J$b)}),J$a,J$m,J$f,!1,J$h,!0),J$g&&this.cacheRes(J$i,J$j)}}return J$j},J$b.load=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){J$a&&""!=J$a||console.error("加载的url不合法 "+J$a);var J$i=this;if(null==J$e&&(J$e=2),null==J$f&&(J$f=!0),void 0===J$h&&(J$h=!1),J$a instanceof Array)return this._loadAssets(J$a,J$b,J$c,J$d,J$e,J$f,J$g);var J$j=J$ha.getRes(J$a);if(null!=J$j)J$z.timer.frameOnce(1,null,function(){J$c&&J$c.runWith(1),J$b&&J$b.runWith(J$j),J$i._loaderCount||J$i.event("complete")});else{var J$k=J$n._resMap[J$a];J$k?(J$b&&J$k._createListener("complete",J$b.caller,J$b.method,J$b.args,!1,!1),J$c&&J$k._createListener("progress",J$c.caller,J$c.method,J$c.args,!1,!1)):((J$k=this._infoPool.length?this._infoPool.pop():new J$m).url=J$a,J$k.clas=null,J$k.type=J$d,J$k.cache=J$f,J$k.group=J$g,J$k.ignoreCache=J$h,J$k.priority=J$e,J$b&&J$k.on("complete",J$b.caller,J$b.method,J$b.args),J$c&&J$k.on("progress",J$c.caller,J$c.method,J$c.args),J$n._resMap[J$a]=J$k,J$e=J$e<this._maxPriority?0<=J$e?J$e:0:this._maxPriority-1,this._resInfos[J$e].push(J$k),this._next())}return this},J$b.cancel=function(J$a,J$b,J$c){if(J$j=J$n._resMap[J$a]){J$b&&J$j.off("complete",J$b.caller,J$b.method,!1),J$c&&J$j.off("progress",J$c.caller,J$c.method,!1);var J$d=J$j.getListener("complete"),J$e=J$j.getListener("progress");if(!(J$d&&J$d.head||J$e&&J$e.head)){if(J$j.loader){var J$f=J$j.loader;J$f.imageCancel(J$a),J$f.offAll(),J$f._data=null,J$f._customParse=!1,J$f._url=null,J$f._class=null,J$f._type=null,this._loaders.push(J$f),this._loaderCount--,delete this._loaderMap[J$j.url]}for(var J$g=0;J$g<this._maxPriority;J$g++)for(var J$h=this._resInfos[J$g],J$i=J$h.length-1;-1<J$i;J$i--){var J$j;(J$j=J$h[J$i])&&J$j.url===J$a&&(J$h[J$i]=null,J$j.destroy(),J$j.offAll(),this._infoPool.push(J$j))}delete J$n._resMap[J$a],this._next()}}},J$b._createLoad=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){var J$j=this;if(null==J$f&&(J$f=2),null==J$g&&(J$g=!0),void 0===J$i&&(J$i=!1),J$b instanceof Array)return this._loadAssets(J$b,J$c,J$d,J$e,J$f,J$g,J$h);var J$k=J$ha.getRes(J$b);if(null!=J$k)J$z.timer.frameOnce(1,null,function(){J$d&&J$d.runWith(1),J$c&&J$c.runWith(J$k),J$j._loaderCount||J$j.event("complete")});else{var J$l=J$n._resMap[J$b];J$l?(J$c&&J$l._createListener("complete",J$c.caller,J$c.method,J$c.args,!1,!1),J$d&&J$l._createListener("progress",J$d.caller,J$d.method,J$d.args,!1,!1)):((J$l=this._infoPool.length?this._infoPool.pop():new J$m).url=J$b,J$l.clas=J$a,J$l.type=J$e,J$l.cache=J$g,J$l.group=J$h,J$l.ignoreCache=J$i,J$l.priority=J$f,J$c&&J$l.on("complete",J$c.caller,J$c.method,J$c.args),J$d&&J$l.on("progress",J$d.caller,J$d.method,J$d.args),J$n._resMap[J$b]=J$l,J$f=J$f<this._maxPriority?0<=J$f?J$f:0:this._maxPriority-1,this._resInfos[J$f].push(J$l),this._next())}return this},J$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var J$a=0;J$a<this._maxPriority;J$a++)for(var J$b=this._resInfos[J$a];0<J$b.length;){var J$c=J$b.shift();if(J$c)return this._doLoad(J$c)}this._loaderCount||this.event("complete")}},J$b._doLoad=function(J$b){var J$c=this._loaders.length?this._loaders.pop():new J$ha;this._loaderCount++,(this._loaderMap[J$b.url]=J$c).on("complete",null,J$e),J$c.on("progress",null,function(J$a){J$b.event("progress",J$a)}),J$c.on("error",null,function(J$a){J$e(null)}),J$b.loader=J$c;var J$d=this;function J$e(J$a){J$c.offAll(),J$c._data=null,J$c._customParse=!1,J$c._url=null,J$c._class=null,J$c._type=null,J$d._loaders.push(J$c),J$d._loaderCount--,delete J$d._loaderMap[J$b.url],J$d._endLoad(J$b,J$a instanceof Array?[J$a]:J$a),J$d._next()}J$c._class=J$b.clas,1<=J$b.priority?(J$c.priority=J$b.priority,J$c.realTime=!1):(J$c.priority=0,J$c.realTime=!0),J$c.load(J$b.url,J$b.type,J$b.cache,J$b.group,J$b.ignoreCache)},J$b._endLoad=function(J$a,J$b){var J$c=J$a.url;if(null==J$b){var J$d=this._failRes[J$c]||0;if(J$d<this.retryNum)return console.warn("[warn]Retry to load:",J$c),this._failRes[J$c]=J$d+1,void J$z.timer.once(this.retryDelay,this,this._addReTry,[J$a],!1);console.warn("[error]Failed to load:",J$c),this.event("error",J$c)}this._failRes[J$c]&&(this._failRes[J$c]=0),delete J$n._resMap[J$c],J$a.event("complete",J$b),J$a.destroy(),J$a.offAll(),this._infoPool.push(J$a)},J$b._addReTry=function(J$a){this._resInfos[this._maxPriority-1].push(J$a),this._next()},J$b.clearRes=function(J$a,J$b){void 0===J$b&&(J$b=!1),J$ha.clearRes(J$a,J$b)},J$b.getRes=function(J$a){return J$ha.getRes(J$a)},J$b.cacheRes=function(J$a,J$b){J$ha.cacheRes(J$a,J$b)},J$b.clearTextureRes=function(J$a){J$ha.clearTextureRes(J$a)},J$b.setGroup=function(J$a,J$b){J$ha.setGroup(J$a,J$b)},J$b.clearResByGroup=function(J$a){J$ha.clearResByGroup(J$a)},J$b.clearUnLoaded=function(){for(var J$a=0;J$a<this._maxPriority;J$a++){for(var J$b=this._resInfos[J$a],J$c=J$b.length-1;-1<J$c;J$c--){var J$d=J$b[J$c];J$d&&(J$d.destroy(),J$d.offAll(),this._infoPool.push(J$d))}J$b.length=0}this._loaderCount=0,J$n._resMap={}},J$b.cancelLoadByUrls=function(J$a){if(J$a)for(var J$b=0,J$c=J$a.length;J$b<J$c;J$b++)this.cancelLoadByUrl(J$a[J$b])},J$b.cancelLoadByUrl=function(J$a){for(var J$b=0;J$b<this._maxPriority;J$b++)for(var J$c=this._resInfos[J$b],J$d=J$c.length-1;-1<J$d;J$d--){var J$e=J$c[J$d];J$e&&J$e.url===J$a&&(J$c[J$d]=null,J$e.destroy(),J$e.offAll(),this._infoPool.push(J$e))}J$n._resMap[J$a]&&delete J$n._resMap[J$a]},J$b._loadAssets=function(J$a,J$c,J$g,J$b,J$d,J$e,J$f){null==J$d&&(J$d=2),null==J$e&&(J$e=!0);for(var J$h=J$a.length,J$i=0,J$j=0,J$k=[],J$l=!0,J$m=0;J$m<J$h;J$m++){var J$n=J$a[J$m];if(!J$n)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+J$a);"string"==typeof J$n&&(J$n={url:J$n,type:J$b,size:1,priority:J$d}),J$n.size||(J$n.size=1),J$n.progress=0,J$j+=J$n.size,J$k.push(J$n);var J$o=J$g?J$u.create(null,J$r,[J$n],!1):null,J$p=J$c||J$g?J$u.create(null,J$q,[J$n]):null;this.load(J$n.url,J$p,J$o,J$n.type,null!=J$n.priority&&0<=J$n.priority?J$n.priority:2,J$e,J$n.group||J$f)}function J$q(J$a,J$b){J$i++,J$a.progress=1,J$b||(J$l=!1),J$i===J$h&&J$c&&J$c.runWith(J$l)}function J$r(J$a,J$b){if(null!=J$g){J$a.progress=J$b;for(var J$c=0,J$d=0;J$d<J$k.length;J$d++){var J$e=J$k[J$d];J$c+=J$e.size*J$e.progress}var J$f=J$c/J$j;J$g.runWith(J$f)}}return this},J$n.cacheRes=function(J$a,J$b){J$ha.cacheRes(J$a,J$b)},J$n._resMap={},J$i(J$n,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),J$n.__init$=function(){J$m=function(J$a){function J$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,J$b.__super.call(this)}return J$k(J$b,"",J$j),J$b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},J$b}()},J$n}(),J$ja=(function(J$a){function J$e(J$a){J$e.__super.call(this),J$a||(J$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var J$b=0,J$c=0,J$d=0;J$d<20;J$d++)J$d%5!=4?this._mat[J$b++]=J$a[J$d]:this._alpha[J$c++]=J$a[J$d];this._action=J$F.createFilterAction(32),this._action.data=this}J$k(J$e,"laya.filters.ColorFilter",J$r);var J$b=J$e.prototype;J$z.imps(J$b,{"laya.filters.IFilter":!0}),J$b.callNative=function(J$a){J$a._$P.cf=this;J$a.conchModel&&J$a.conchModel.setFilterMatrix&&J$a.conchModel.setFilterMatrix(this._mat,this._alpha)},J$o(0,J$b,"type",function(){return 32}),J$o(0,J$b,"action",function(){return this._action})}(),function(J$a){function J$d(J$a,J$b,J$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===J$b&&(J$b=0),J$d.__super.call(this),this._byteClass=J$c||J$P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,J$a&&0<J$b&&J$b<65535&&this.connect(J$a,J$b)}J$k(J$d,"laya.net.Socket",J$j);var J$b=J$d.prototype;J$b.connect=function(J$a,J$b){var J$c="ws://"+J$a+":"+J$b;J$c="https:"==J$O.window.location.protocol?"wss://"+J$a+":"+J$b:"ws://"+J$a+":"+J$b,this.connectByUrl(J$c)},J$b.connectByUrl=function(J$a){var J$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new J$O.window.WebSocket(J$a,this.protocols):this._socket=new J$O.window.WebSocket(J$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(J$a){J$b._onOpen(J$a)},this._socket.onmessage=function(J$a){J$b._onMessage(J$a)},this._socket.onclose=function(J$a){J$b._onClose(J$a)},this._socket.onerror=function(J$a){J$b._onError(J$a)}},J$b.cleanSocket=function(){try{this._socket.close()}catch(J$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},J$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(J$a){}},J$b._onOpen=function(J$a){this._connected=!0,this.event("open",J$a)},J$b._onMessage=function(J$a){if(J$a&&J$a.data){var J$b=J$a.data;if(this.disableInput&&J$b)this.event("message",J$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var J$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,J$b&&("string"==typeof J$b?this._input.writeUTFBytes(J$b):this._input.writeArrayBuffer(J$b),this._addInputPosition=this._input.pos,this._input.pos=J$c),this.event("message",J$b)}}},J$b._onClose=function(J$a){this._connected=!1,this.event("close",J$a)},J$b._onError=function(J$a){this.event("error",J$a)},J$b.send=function(J$a){this._socket.send(J$a)},J$b.flush=function(){if(this._output&&0<this._output.length){var J$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(J$a){J$b=J$a}this._output.endian=this.endian,this._output.clear(),J$b&&this.event("error",J$b)}},J$o(0,J$b,"input",function(){return this._input}),J$o(0,J$b,"output",function(){return this._output}),J$o(0,J$b,"connected",function(){return this._connected}),J$o(0,J$b,"endian",function(){return this._endian},function(J$a){this._endian=J$a,null!=this._input&&(this._input.endian=J$a),null!=this._output&&(this._output.endian=J$a)}),J$d.LITTLE_ENDIAN="littleEndian",J$d.BIG_ENDIAN="bigEndian"}(),function(J$a){function J$h(){J$h.__super.call(this),this._$1__id=++J$h._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(J$h._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,J$N.currentResourceManager&&J$N.currentResourceManager.addResource(this)}J$k(J$h,"laya.resource.Resource",J$j);var J$b=J$h.prototype;return J$z.imps(J$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),J$b._setUrl=function(J$a){var J$b;this._url!==J$a&&(this._url&&((J$b=J$h._urlResourcesMap[this._url]).splice(J$b.indexOf(this),1),0===J$b.length&&delete J$h._urlResourcesMap[this._url]),J$a&&((J$b=J$h._urlResourcesMap[J$a])||(J$h._urlResourcesMap[J$a]=J$b=[]),J$b.push(this)),this._url=J$a)},J$b._getGroup=function(){return this._group},J$b._setGroup=function(J$a){var J$b;this._group!==J$a&&(this._group&&((J$b=J$h._groupResourcesMap[this._group]).splice(J$b.indexOf(this),1),0===J$b.length&&delete J$h._groupResourcesMap[this._group]),J$a&&((J$b=J$h._groupResourcesMap[J$a])||(J$h._groupResourcesMap[J$a]=J$b=[]),J$b.push(this)),this._group=J$a)},J$b._addReference=function(){this._referenceCount++},J$b._removeReference=function(){this._referenceCount--},J$b._clearReference=function(){this._referenceCount=0},J$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},J$b.recreateResource=function(){this.completeCreate()},J$b.disposeResource=function(){},J$b.activeResource=function(J$a){void 0===J$a&&(J$a=!1),this._lastUseFrameCount=J$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||J$a)&&this.recreateResource()},J$b.releaseResource=function(J$a){return void 0===J$a&&(J$a=!0),!(!J$a&&this.lock)&&(!(this._released&&!J$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},J$b.onAsynLoaded=function(J$a,J$b,J$c){throw new Error("Resource: must override this function!")},J$b.destroy=function(){var J$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete J$h._idResourcesMap[this.id],this._url&&((J$a=J$h._urlResourcesMap[this._url])&&(J$a.splice(J$a.indexOf(this),1),0===J$a.length&&delete J$h._urlResourcesMap[this.url]),J$ha.clearRes(this._url),this.__loaded||J$F.cancelLoadByUrl(this._url)),this._group&&((J$a=J$h._groupResourcesMap[this._group]).splice(J$a.indexOf(this),1),0===J$a.length&&delete J$h._groupResourcesMap[this.url]))},J$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},J$b.dispose=function(){this.destroy()},J$o(0,J$b,"memorySize",function(){return this._memorySize},function(J$a){var J$b=J$a-this._memorySize;this._memorySize=J$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,J$b),this.resourceManager&&this.resourceManager.addSize(J$b)}),J$o(0,J$b,"_loaded",null,function(J$a){this.__loaded=J$a}),J$o(0,J$b,"loaded",function(){return this.__loaded}),J$o(0,J$b,"id",function(){return this._$1__id}),J$o(0,J$b,"destroyed",function(){return this._destroyed}),J$o(0,J$b,"group",function(){return this._getGroup()},function(J$a){this._setGroup(J$a)}),J$o(0,J$b,"resourceManager",function(){return this._resourceManager}),J$o(0,J$b,"url",function(){return this._url}),J$o(0,J$b,"released",function(){return this._released}),J$o(0,J$b,"referenceCount",function(){return this._referenceCount}),J$h.getResourceByID=function(J$a){return J$h._idResourcesMap[J$a]},J$h.getResourceByURL=function(J$a,J$b){return void 0===J$b&&(J$b=0),null==J$h._urlResourcesMap[J$a]?null:J$h._urlResourcesMap[J$a][J$b]},J$h.getResourceCountByURL=function(J$a){return J$h._urlResourcesMap[J$a].length},J$h.destroyUnusedResources=function(J$a){var J$b;if(J$a){var J$c=J$h._groupResourcesMap[J$a];if(J$c)for(var J$d=J$c.slice(),J$e=0,J$f=J$d.length;J$e<J$f;J$e++)(J$b=J$d[J$e]).lock||0!==J$b._referenceCount||J$b.destroy()}else for(var J$g in J$h._idResourcesMap)(J$b=J$h._idResourcesMap[J$g]).lock||0!==J$b._referenceCount||J$b.destroy()},J$h._uniqueIDCounter=0,J$h._idResourcesMap={},J$h._urlResourcesMap={},J$h._groupResourcesMap={},J$h}()),J$ka=function(J$a){function J$C(J$a,J$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,J$C.__super.call(this),J$a&&null!=J$a._addReference&&J$a._addReference(),this.setTo(J$a,J$b)}J$k(J$C,"laya.resource.Texture",J$j);var J$b=J$C.prototype;return J$b._setUrl=function(J$a){this.url=J$a},J$b.setTo=function(J$a,J$b){if(J$a instanceof J$g.HTMLElement){var J$c=J$va.create("2D",J$a);this.bitmap=J$c}else this.bitmap=J$a;if(this.uv=J$b||J$C.DEF_UV,J$a){this._w=J$a.width,this._h=J$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var J$d=this;if(this._loaded)J$F.addToAtlas&&J$F.addToAtlas(J$d);else{var J$e=J$a;J$e instanceof laya.resource.HTMLImage&&J$e.image&&J$e.image.addEventListener("load",function(J$a){J$F.addToAtlas&&J$F.addToAtlas(J$d)},!1)}}},J$b.active=function(){this.bitmap&&this.bitmap.activeResource()},J$b.destroy=function(J$a){if(void 0===J$a&&(J$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(J$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var J$b=this.bitmap;J$a?(J$J.isConchApp&&J$b.source&&J$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,J$b.dispose(),J$b._clearReference()):(J$b._removeReference(),0==J$b.referenceCount&&(J$J.isConchApp&&J$b.source&&J$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,J$b.dispose())),this.url&&this===J$z.loader.getRes(this.url)&&J$z.loader.clearRes(this.url,J$a),this._loaded=!1}},J$b.load=function(J$a){var J$b=this;this._loaded=!1,J$a=J$I.customFormat(J$a);var J$c=this.bitmap||(this.bitmap=J$ya.create(J$a));J$c.uri=J$a,J$c&&J$c._addReference();var J$d=this;J$c.onload=function(){J$c.onload=null,J$d._loaded=!0,J$b.sourceWidth=J$b._w=J$c.width,J$b.sourceHeight=J$b._h=J$c.height,J$d.event("loaded",this),J$F.addToAtlas&&J$F.addToAtlas(J$d)}},J$b.addTextureToAtlas=function(J$a){J$F.addTextureToAtlas(this)},J$b.getPixels=function(J$a,J$b,J$c,J$d){if(J$J.isConchApp){var J$e=this.bitmap;if(J$e.source&&J$e.source.getImageData){var J$f=J$e.source.getImageData(J$a,J$b,J$c,J$d),J$g=new Uint8Array(J$f);return Array.from(J$g)}return null}return J$J.isWebGL?J$F.getTexturePixels(this,J$a,J$b,J$c,J$d):(J$O.canvas.size(J$c,J$d),J$O.canvas.clear(),J$O.context.drawTexture(this,-J$a,-J$b,this.width,this.height,0,0),J$O.context.getImageData(0,0,J$c,J$d).data)},J$b.onAsynLoaded=function(J$a,J$b){if(J$b){if("function"!=typeof J$b._addReference)throw new Error("bitmap._addReference is not a function. "+J$b.className+" "+typeof J$b._addReference+" "+J$b.constructor);J$b._addReference()}this.setTo(J$b,this.uv),this._loaded&&this.event("loaded",this)},J$o(0,J$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),J$o(0,J$b,"loaded",function(){return this._loaded}),J$o(0,J$b,"released",function(){return!this.bitmap||this.bitmap.released}),J$o(0,J$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==J$C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(J$a){this._w=J$a,this.sourceWidth||(this.sourceWidth=J$a)}),J$o(0,J$b,"repeat",function(){return!J$J.isWebGL||!this.bitmap||this.bitmap.repeat},function(J$a){J$a&&J$J.isWebGL&&this.bitmap&&(this.bitmap.repeat=J$a)&&(this.bitmap.enableMerageInAtlas=!1)}),J$o(0,J$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==J$C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(J$a){this._h=J$a,this.sourceHeight||(this.sourceHeight=J$a)}),J$o(0,J$b,"isLinearSampling",function(){return!J$J.isWebGL||9728!=this.bitmap.minFifter},function(J$a){!J$a&&J$J.isWebGL&&(J$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),J$C.moveUV=function(J$a,J$b,J$c){for(var J$d=0;J$d<8;J$d+=2)J$c[J$d]+=J$a,J$c[J$d+1]+=J$b;return J$c},J$C.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){void 0===J$f&&(J$f=0),void 0===J$g&&(J$g=0),void 0===J$h&&(J$h=0),void 0===J$i&&(J$i=0);var J$j=J$a instanceof laya.resource.Texture,J$k=J$j?J$a.uv:J$C.DEF_UV,J$l=J$j?J$a.bitmap:J$a,J$m=J$F.isAtlas(J$l);if(J$m){var J$n=J$l._atlaser,J$o=J$a._atlasID;if(-1==J$o)throw new Error("create texture error");J$l=J$n._inAtlasTextureBitmapValue[J$o],J$k=J$n._inAtlasTextureOriUVValue[J$o]}var J$p=new J$C(J$l,null);J$l.width&&J$b+J$d>J$l.width&&(J$d=J$l.width-J$b),J$l.height&&J$c+J$e>J$l.height&&(J$e=J$l.height-J$c),J$p.width=J$d,J$p.height=J$e,J$p.offsetX=J$f,J$p.offsetY=J$g,J$p.sourceWidth=J$h||J$d,J$p.sourceHeight=J$i||J$e;var J$q=1/J$l.width,J$r=1/J$l.height;J$b*=J$q,J$c*=J$r,J$d*=J$q,J$e*=J$r;var J$u=J$p.uv[0],J$v=J$p.uv[1],J$w=J$p.uv[4],J$x=J$p.uv[5],J$y=J$w-J$u,J$z=J$x-J$v,J$A=J$C.moveUV(J$k[0],J$k[1],[J$b,J$c,J$b+J$d,J$c,J$b+J$d,J$c+J$e,J$b,J$c+J$e]);J$p.uv=[J$u+J$A[0]*J$y,J$v+J$A[1]*J$z,J$w-(1-J$A[2])*J$y,J$v+J$A[3]*J$z,J$w-(1-J$A[4])*J$y,J$x-(1-J$A[5])*J$z,J$u+J$A[6]*J$y,J$x-(1-J$A[7])*J$z],J$m&&J$p.addTextureToAtlas();var J$B=J$l.scaleRate;return J$B&&1!=J$B?(J$p.sourceWidth/=J$B,J$p.sourceHeight/=J$B,J$p.width/=J$B,J$p.height/=J$B,J$p.scaleRate=J$B,J$p.offsetX/=J$B,J$p.offsetY/=J$B):J$p.scaleRate=1,J$p},J$C.createFromTexture=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$a.scaleRate;1!=J$f&&(J$b*=J$f,J$c*=J$f,J$d*=J$f,J$e*=J$f);var J$g=J$B.TEMP.setTo(J$b-J$a.offsetX,J$c-J$a.offsetY,J$d,J$e),J$h=J$g.intersection(J$C._rect1.setTo(0,0,J$a.width,J$a.height),J$C._rect2);if(!J$h)return null;var J$i=J$C.create(J$a,J$h.x,J$h.y,J$h.width,J$h.height,J$h.x-J$g.x,J$h.y-J$g.y,J$d,J$e);if(J$i.bitmap&&J$i.bitmap._removeReference)return J$i.bitmap._removeReference(),J$i;var J$j="bitmap:"+(J$i.bitmap?J$i.bitmap.constructor?J$i.bitmap.constructor.name:J$i.bitmap.__className:"")+", url:"+(J$a.url+" | "+(J$i.bitmap?J$i.bitmap.url:J$a.url))+", x="+J$b+",y="+J$c+",width="+J$d+",height="+J$e+", result="+(J$h?J$h.x+","+J$h.y+","+J$h.width+","+J$h.height:"null")+", rect="+J$g.x+","+J$g.y+","+J$g.width+","+J$g.height;throw new Error("报错：bitmap._removeReference is not a function  "+J$j)},J$C.DEF_UV=[0,0,1,0,1,1,0,1],J$C.INV_UV=[0,1,1,1,1,0,0,0],J$C._rect1=new J$B,J$C._rect2=new J$B,J$C}(),J$a=function(J$a){var J$h;function J$f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,J$f.__super.call(this)}J$k(J$f,"laya.utils.TimeLine",J$j);var J$b=J$f.prototype;return J$b.to=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=0),this._create(J$a,J$b,J$c,J$d,J$e,!0)},J$b.from=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=0),this._create(J$a,J$b,J$c,J$d,J$e,!1)},J$b._create=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$W.getItemByClass("tweenData",J$h);return J$g.isTo=J$f,J$g.type=0,J$g.target=J$a,J$g.duration=J$c,J$g.data=J$b,J$g.startTime=this._startTime+J$e,J$g.endTime=J$g.startTime+J$g.duration,J$g.ease=J$d,this._startTime=Math.max(J$g.endTime,this._startTime),this._tweenDataList.push(J$g),this._startTimeSort=!0,this._endTimeSort=!0,this},J$b.addLabel=function(J$a,J$b){var J$c=J$W.getItemByClass("tweenData",J$h);return J$c.type=1,J$c.data=J$a,J$c.endTime=J$c.startTime=this._startTime+J$b,this._labelDic||(this._labelDic={}),this._labelDic[J$a]=J$c,this._tweenDataList.push(J$c),this},J$b.removeLabel=function(J$a){if(this._labelDic&&this._labelDic[J$a]){var J$b=this._labelDic[J$a];if(J$b){var J$c=this._tweenDataList.indexOf(J$b);-1<J$c&&this._tweenDataList.splice(J$c,1)}delete this._labelDic[J$a]}},J$b.gotoTime=function(J$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var J$b,J$c,J$d,J$e;for(var J$f in this._firstTweenDic)if(J$c=this._firstTweenDic[J$f])for(var J$g in J$c)J$c.diyTarget.hasOwnProperty(J$g)&&(J$c.diyTarget[J$g]=J$c[J$g]);for(J$f in this._tweenDic)(J$b=this._tweenDic[J$f]).clear(),delete this._tweenDic[J$f];if(this._index=0,this._gidIndex=0,this._currTime=J$a,this._lastTime=J$O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=J$d=this._tweenDataList.concat(),J$d.sort(function(J$a,J$b){return J$a.endTime>J$b.endTime?1:J$a.endTime<J$b.endTime?-1:0})}else J$d=this._endTweenDataList;for(var J$h=0,J$i=J$d.length;J$h<J$i;J$h++)if(0==(J$e=J$d[J$h]).type){if(!(J$a>=J$e.endTime))break;this._index=Math.max(this._index,J$h+1);var J$j=J$e.data;if(J$e.isTo)for(var J$k in J$j)J$e.target[J$k]=J$j[J$k]}for(J$h=0,J$i=this._tweenDataList.length;J$h<J$i;J$h++)0==(J$e=this._tweenDataList[J$h]).type&&J$a>=J$e.startTime&&J$a<J$e.endTime&&(this._index=Math.max(this._index,J$h+1),this._gidIndex++,(J$b=J$W.getItemByClass("tween",J$Z))._create(J$e.target,J$e.data,J$e.duration,J$e.ease,J$u.create(this,this._animComplete,[this._gidIndex]),0,!1,J$e.isTo,!0,!1),J$b.setStartTime(this._currTime-(J$a-J$e.startTime)),J$b._updateEase(this._currTime),J$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=J$b)}},J$b.gotoLabel=function(J$a){if(null!=this._labelDic){var J$b=this._labelDic[J$a];J$b&&this.gotoTime(J$b.startTime)}},J$b.pause=function(){J$z.timer.clear(this,this._update)},J$b.resume=function(){this.play(this._currTime,this._loopKey)},J$b.play=function(J$a,J$b){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(J$a,J$b){return J$a.startTime>J$b.startTime?1:J$a.startTime<J$b.startTime?-1:0});for(var J$c=0,J$d=this._tweenDataList.length;J$c<J$d;J$c++){var J$e=this._tweenDataList[J$c];if(null!=J$e&&0==J$e.type){var J$f=J$e.target,J$g=J$f.$_GID||(J$f.$_GID=J$$.getGID()),J$h=null;for(var J$i in null==this._firstTweenDic[J$g]?((J$h={}).diyTarget=J$f,this._firstTweenDic[J$g]=J$h):J$h=this._firstTweenDic[J$g],J$e.data)null==J$h[J$i]&&(J$h[J$i]=J$f[J$i])}}}"string"==typeof J$a?this.gotoLabel(J$a):this.gotoTime(J$a),this._loopKey=J$b,this._lastTime=J$O.now(),J$z.timer.frameLoop(1,this,this._update)}},J$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var J$a in this._tweenDic)(J$b=this._tweenDic[J$a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var J$b,J$c=J$O.now(),J$d=J$c-this._lastTime,J$e=this._currTime+=J$d*this.scale;for(J$a in this._lastTime=J$c,this._tweenDic)(J$b=this._tweenDic[J$a])._updateEase(J$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var J$f=this._tweenDataList[this._index];J$e>=J$f.startTime&&(this._index++,0==J$f.type?(this._gidIndex++,(J$b=J$W.getItemByClass("tween",J$Z))._create(J$f.target,J$f.data,J$f.duration,J$f.ease,J$u.create(this,this._animComplete,[this._gidIndex]),0,!1,J$f.isTo,!0,!1),J$b.setStartTime(J$e),J$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=J$b)._updateEase(J$e)):this.event("label",J$f.data))}},J$b._animComplete=function(J$a){this._tweenDic[J$a]&&delete this._tweenDic[J$a]},J$b._complete=function(){this.event("complete")},J$b.reset=function(){var J$a;if(this._labelDic)for(J$a in this._labelDic)delete this._labelDic[J$a];for(J$a in this._tweenDic)this._tweenDic[J$a].clear(),delete this._tweenDic[J$a];for(J$a in this._firstTweenDic)delete this._firstTweenDic[J$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var J$b,J$c=0;for(J$b=this._tweenDataList.length,J$c=0;J$c<J$b;J$c++)this._tweenDataList[J$c]&&this._tweenDataList[J$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,J$z.timer.clear(this,this._update)},J$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},J$o(0,J$b,"index",function(){return this._frameIndex},function(J$a){this._frameIndex=J$a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),J$o(0,J$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),J$f.to=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=0),(new J$f).to(J$a,J$b,J$c,J$d,J$e)},J$f.from=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$e&&(J$e=0),(new J$f).from(J$a,J$b,J$c,J$d,J$e)},J$f.__init$=function(){J$h=function(){function J$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return J$k(J$a,""),J$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,J$W.recover("tweenData",this)},J$a}()},J$f}(),J$la=function(J$e){function J$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,J$c.__super.call(this),this._style=J$h.EMPTY}J$k(J$c,"laya.display.Sprite",J$e);var J$a=J$c.prototype;return J$z.imps(J$a,{"laya.display.ILayout":!0}),J$a.createConchModel=function(){return new ConchNode},J$a.destroy=function(J$a){if(void 0===J$a&&(J$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var J$b=this.mask;J$b&&(this.mask=null,J$b.destroy(J$a))}J$e.prototype.destroy.call(this,J$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},J$a.updateZOrder=function(){J$$.updateOrder(this._childs)&&this.repaint()},J$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},J$a.setBounds=function(J$a){this._set$P("uBounds",J$a)},J$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new J$B),J$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},J$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new J$B),J$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},J$a._boundPointsToParent=function(J$a){void 0===J$a&&(J$a=!1);var J$b=0,J$c=0;this._style&&(J$b=this._style._tf.translateX,J$c=this._style._tf.translateY,J$a=J$a||0!==this._style._tf.rotate,this._style.scrollRect&&(J$b+=this._style.scrollRect.x,J$c+=this._style.scrollRect.y));var J$d=this._getBoundPointsM(J$a);if(!J$d||J$d.length<1)return J$d;if(8!=J$d.length&&(J$d=J$a?J$x.scanPList(J$d):J$B._getWrapRec(J$d,J$B.TEMP)._getBoundPoints()),!this.transform)return J$$.transPointList(J$d,this._x-J$b,this._y-J$c),J$d;var J$e=J$A.TEMP,J$f=0,J$g=J$d.length;for(J$f=0;J$f<J$g;J$f+=2)J$e.x=J$d[J$f],J$e.y=J$d[J$f+1],this.toParentPoint(J$e),J$d[J$f]=J$e.x,J$d[J$f+1]=J$e.y;return J$d},J$a.getGraphicBounds=function(J$a){return void 0===J$a&&(J$a=!1),this._graphics?this._graphics.getBounds(J$a):J$B.TEMP.setTo(0,0,0,0)},J$a._getBoundPointsM=function(J$a){if(void 0===J$a&&(J$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var J$b=J$$.clearArray(this._$P.temBM),J$c=J$B.TEMP;return J$c.copyFrom(this.scrollRect),J$$.concatArray(J$b,J$c._getBoundPoints()),J$b}for(var J$d,J$e,J$f,J$g=this._graphics?this._graphics.getBoundPoints():J$$.clearArray(this._$P.temBM),J$h=0,J$i=(J$f=this._childs).length;J$h<J$i;J$h++)(J$d=J$f[J$h])instanceof laya.display.Sprite&&1==J$d.visible&&(J$e=J$d._boundPointsToParent(J$a))&&(J$g=J$g?J$$.concatArray(J$g,J$e):J$e);return J$g},J$a.getStyle=function(){return this._style===J$h.EMPTY&&(this._style=new J$h),this._style},J$a.setStyle=function(J$a){this._style=J$a},J$a._adjustTransform=function(){this._tfChanged=!1;var J$a,J$b=this._style._tf,J$c=J$b.scaleX,J$d=J$b.scaleY;if(J$b.rotate||1!==J$c||1!==J$d||J$b.skewX||J$b.skewY){(J$a=this._transform||(this._transform=J$G.create())).bTransform=!0;var J$e=.0174532922222222*(J$b.rotate-J$b.skewX),J$f=.0174532922222222*(J$b.rotate+J$b.skewY),J$g=Math.cos(J$f),J$h=Math.sin(J$f),J$i=Math.sin(J$e),J$j=Math.cos(J$e);return J$a.a=J$c*J$g,J$a.b=J$c*J$h,J$a.c=-J$d*J$i,J$a.d=J$d*J$j,J$a.tx=J$a.ty=0,J$a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,J$a},J$a.pos=function(J$a,J$b,J$c){if(void 0===J$c&&(J$c=!1),this._x!==J$a||this._y!==J$b){if(this.destroyed)return this;if(J$c){this._x=J$a,this._y=J$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var J$d=this._parent;J$d&&0===J$d._repaint&&(J$d._repaint=1,J$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=J$a,this.y=J$b}return this},J$a.pivot=function(J$a,J$b){return this.pivotX=J$a,this.pivotY=J$b,this},J$a.size=function(J$a,J$b){return this.width=J$a,this.height=J$b,this},J$a.scale=function(J$a,J$b,J$c){void 0===J$c&&(J$c=!1);var J$d=this.getStyle(),J$e=J$d._tf;if(J$e.scaleX!=J$a||J$e.scaleY!=J$b){if(this.destroyed)return this;if(J$c){J$d.setScale(J$a,J$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J$a,J$b),this._renderType|=4;var J$f=this._parent;J$f&&0===J$f._repaint&&(J$f._repaint=1,J$f.parentRepaint())}else this.scaleX=J$a,this.scaleY=J$b}return this},J$a.skew=function(J$a,J$b){return this.skewX=J$a,this.skewY=J$b,this},J$a.render=function(J$a,J$b,J$c){J$X.spriteCount++,J$L.renders[this._renderType]._fun(this,J$a,J$b+this._x,J$c+this._y),this._repaint=0},J$a.drawToCanvas=function(J$a,J$b,J$c,J$d){if(J$J.isConchNode){var J$e=J$va.create("2D");return new J$K(J$a,J$b,J$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(J$e.source,J$c,J$d),J$e}return J$F.drawToCanvas(this,this._renderType,J$a,J$b,J$c,J$d)},J$a.customRender=function(J$a,J$b,J$c){this._renderType|=1024},J$a._applyFilters=function(){var J$a;if(!J$J.isWebGL&&((J$a=this._$P.filters)&&!(J$a.length<1)))for(var J$b=0,J$c=J$a.length;J$b<J$c;J$b++)J$a[J$b].action.apply(this._$P.cacheCanvas)},J$a._isHaveGlowFilter=function(){var J$a,J$b=0;if(this.filters)for(J$b=0;J$b<this.filters.length;J$b++)if(8==this.filters[J$b].type)return!0;for(J$b=0,J$a=this._childs.length;J$b<J$a;J$b++)if(this._childs[J$b]._isHaveGlowFilter())return!0;return!1},J$a.localToGlobal=function(J$a,J$b){void 0===J$b&&(J$b=!1),!0===J$b&&(J$a=new J$A(J$a.x,J$a.y));for(var J$c=this;J$c&&J$c!=J$z.stage;)J$a=J$c.toParentPoint(J$a),J$c=J$c.parent;return J$a},J$a.globalToLocal=function(J$a,J$b){void 0===J$b&&(J$b=!1),J$b&&(J$a=new J$A(J$a.x,J$a.y));for(var J$c=this,J$d=[];J$c&&J$c!=J$z.stage;)J$d.push(J$c),J$c=J$c.parent;for(var J$e=J$d.length-1;0<=J$e;)J$a=(J$c=J$d[J$e]).fromParentPoint(J$a),J$e--;return J$a},J$a.toParentPoint=function(J$a){if(!J$a)return J$a;J$a.x-=this.pivotX,J$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(J$a),J$a.x+=this._x,J$a.y+=this._y;var J$b=this._style.scrollRect;return J$b&&(J$a.x-=J$b.x,J$a.y-=J$b.y),J$a},J$a.fromParentPoint=function(J$a){if(!J$a)return J$a;J$a.x-=this._x,J$a.y-=this._y;var J$b=this._style.scrollRect;return J$b&&(J$a.x+=J$b.x,J$a.y+=J$b.y),this.transform&&this._transform.invertTransformPoint(J$a),J$a.x+=this.pivotX,J$a.y+=this.pivotY,J$a},J$a.on=function(J$a,J$b,J$c,J$d){return 1!==this._mouseEnableState&&this.isMouseEvent(J$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(J$a,J$b,J$c,J$d,!1)):J$e.prototype.on.call(this,J$a,J$b,J$c,J$d)},J$a.once=function(J$a,J$b,J$c,J$d){return 1!==this._mouseEnableState&&this.isMouseEvent(J$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(J$a,J$b,J$c,J$d,!0)):J$e.prototype.once.call(this,J$a,J$b,J$c,J$d)},J$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var J$a=this;for(J$a=J$a.parent;J$a&&1!==J$a._mouseEnableState&&!J$a._getBit(2);)J$a.mouseEnabled=!0,J$a._setBit(2,!0),J$a=J$a.parent}},J$a.loadImage=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=this;return void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),this.graphics.loadImage(J$a,J$b,J$c,J$d,J$e,function(J$a){J$g.destroyed||(J$g.size(J$b+(J$d||J$a.width),J$c+(J$e||J$a.height)),J$g.repaint(),J$f&&J$f.runWith(J$a))}),this},J$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},J$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},J$a._childChanged=function(J$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,J$a&&this._get$P("hasZorder")&&J$z.timer.callLater(this,this.updateZOrder),this.repaint()},J$a.parentRepaint=function(){var J$a=this._parent;J$a&&0===J$a._repaint&&(J$a._repaint=1,J$a.parentRepaint())},J$a.startDrag=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){void 0===J$b&&(J$b=!1),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=300),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=.92),this._$P.dragging||this._set$P("dragging",new J$T),this._$P.dragging.start(this,J$a,J$b,J$c,J$d,J$e,J$f,J$g)},J$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},J$a._releaseMem=function(){if(this._$P){var J$a=this._$P.cacheCanvas;J$a&&J$a.ctx&&(J$W.recover("RenderContext",J$a.ctx),J$a.ctx.canvas.size(0,0),J$a.ctx=null);var J$b=this._$P._filterCache;J$b&&(J$b.destroy(),J$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},J$a._setDisplay=function(J$a){J$a||this._releaseMem(),J$e.prototype._setDisplay.call(this,J$a)},J$a.hitTestPoint=function(J$a,J$b){var J$c=this.globalToLocal(J$A.TEMP.setTo(J$a,J$b));return J$a=J$c.x,J$b=J$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?J$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(J$a,J$b)},J$a.getMousePoint=function(){return this.globalToLocal(J$A.TEMP.setTo(J$z.stage.mouseX,J$z.stage.mouseY))},J$a._getWords=function(){return null},J$a._addChildsToLayout=function(J$a){var J$b=this._getWords();if(null==J$b&&0==this._childs.length)return!1;if(J$b)for(var J$c=0,J$d=J$b.length;J$c<J$d;J$c++)J$a.push(J$b[J$c]);J$c=0;for(var J$e=this._childs.length;J$c<J$e;++J$c){var J$f=this._childs[J$c];J$f._style._enableLayout()&&J$f._addToLayout(J$a)}return!0},J$a._addToLayout=function(J$a){this._style.absolute||(this._style.block?J$a.push(this):this._addChildsToLayout(J$a)&&(this.x=this.y=0))},J$a._isChar=function(){return!1},J$a._getCSSStyle=function(){return this._style.getCSSStyle()},J$a._setAttributes=function(J$a,J$b){switch(J$a){case"x":this.x=parseFloat(J$b);break;case"y":this.y=parseFloat(J$b);break;case"width":this.width=parseFloat(J$b);break;case"height":this.height=parseFloat(J$b);break;default:this[J$a]=J$b}},J$a._layoutLater=function(){this.parent&&this.parent._layoutLater()},J$o(0,J$a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(J$a){this._optimizeScrollRect!=J$a&&(this._optimizeScrollRect=J$a,this.conchModel&&this.conchModel.optimizeScrollRect(J$a))}),J$o(0,J$a,"customRenderEnable",null,function(J$a){if(J$a&&(this._renderType|=1024,J$J.isConchNode)){J$c.CustomList.push(this);var J$b=new J$va("2d");J$b._setContext(new CanvasRenderingContext2D),this.customContext=new J$K(0,0,J$b),J$b.context.setCanvasType&&J$b.context.setCanvasType(2),this.conchModel.custom(J$b.context)}}),J$o(0,J$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(J$a){this.cacheAs=J$a?this._$P.hasFilter?"none":"normal":"none"}),J$o(0,J$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(J$a){var J$b=this._$P.cacheCanvas;if(J$a!==(J$b?J$b.type:"none")){if("none"!==J$a)this._getBit(1)||this._setUpNoticeType(1),J$b||(J$b=this._set$P("cacheCanvas",J$W.getItemByClass("cacheCanvas",Object))),J$b.type=J$a,J$b.reCache=!0,this._renderType|=16,"bitmap"==J$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(J$b){var J$c=J$b;J$c&&J$c.ctx&&(J$W.recover("RenderContext",J$c.ctx),J$c.ctx.canvas.size(0,0),J$c.ctx=null),J$W.recover("cacheCanvas",J$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),J$o(0,J$a,"zOrder",function(){return this._zOrder},function(J$a){this._zOrder!=J$a&&(this._zOrder=J$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(J$a),this._parent&&(J$a&&this._parent._set$P("hasZorder",!0),J$z.timer.callLater(this._parent,this.updateZOrder)))}),J$o(0,J$a,"rotation",function(){return this._style._tf.rotate},function(J$a){var J$b=this.getStyle();if(J$b._tf.rotate!==J$a){J$b.setRotate(J$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(J$a),this._renderType|=4;var J$c=this._parent;J$c&&0===J$c._repaint&&(J$c._repaint=1,J$c.parentRepaint())}}),J$o(0,J$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(J$a){this._width!==J$a&&(this._width=J$a,this.conchModel&&this.conchModel.size(J$a,this._height),this.repaint())}),J$o(0,J$a,"x",function(){return this._x},function(J$a){if(this._x!==J$a){if(this.destroyed)return;this._x=J$a,this.conchModel&&this.conchModel.pos(J$a,this._y);var J$b=this._parent;J$b&&0===J$b._repaint&&(J$b._repaint=1,J$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),J$o(0,J$a,"globalScaleY",function(){for(var J$a=1,J$b=this;J$b&&J$b!==J$z.stage;)J$a*=J$b.scaleY,J$b=J$b.parent;return J$a}),J$o(0,J$a,"hitArea",function(){return this._$P.hitArea},function(J$a){this._set$P("hitArea",J$a)}),J$o(0,J$a,"staticCache",function(){return this._$P.staticCache},function(J$a){this._set$P("staticCache",J$a),J$a||this.reCache()}),J$o(0,J$a,"texture",function(){return this._texture},function(J$a){this._texture!=J$a&&(this._texture=J$a,this.graphics.cleanByTexture(J$a,0,0))}),J$o(0,J$a,"y",function(){return this._y},function(J$a){if(this._y!==J$a){if(this.destroyed)return;this._y=J$a,this.conchModel&&this.conchModel.pos(this._x,J$a);var J$b=this._parent;J$b&&0===J$b._repaint&&(J$b._repaint=1,J$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),J$o(0,J$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(J$a){this._height!==J$a&&(this._height=J$a,this.conchModel&&this.conchModel.size(this._width,J$a),this.repaint())}),J$o(0,J$a,"blendMode",function(){return this._style.blendMode},function(J$a){this.getStyle().blendMode=J$a,this.conchModel&&this.conchModel.blendMode(J$a),J$a&&"source-over"!=J$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),J$o(0,J$a,"scaleX",function(){return this._style._tf.scaleX},function(J$a){var J$b=this.getStyle();if(J$b._tf.scaleX!==J$a){J$b.setScaleX(J$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J$a,J$b._tf.scaleY),this._renderType|=4;var J$c=this._parent;J$c&&0===J$c._repaint&&(J$c._repaint=1,J$c.parentRepaint())}}),J$o(0,J$a,"scaleY",function(){return this._style._tf.scaleY},function(J$a){var J$b=this.getStyle();if(J$b._tf.scaleY!==J$a){J$b.setScaleY(J$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(J$b._tf.scaleX,J$a),this._renderType|=4;var J$c=this._parent;J$c&&0===J$c._repaint&&(J$c._repaint=1,J$c.parentRepaint())}}),J$o(0,J$a,"stage",function(){return J$z.stage}),J$o(0,J$a,"skewX",function(){return this._style._tf.skewX},function(J$a){var J$b=this.getStyle();if(J$b._tf.skewX!==J$a){J$b.setSkewX(J$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(J$a,J$b._tf.skewY),this._renderType|=4;var J$c=this._parent;J$c&&0===J$c._repaint&&(J$c._repaint=1,J$c.parentRepaint())}}),J$o(0,J$a,"scrollRect",function(){return this._style.scrollRect},function(J$a){this.getStyle().scrollRect=J$a,this.repaint(),J$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(J$a.x,J$a.y,J$a.width,J$a.height)):(this._renderType&=-129,this.conchModel&&(J$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),J$o(0,J$a,"skewY",function(){return this._style._tf.skewY},function(J$a){var J$b=this.getStyle();if(J$b._tf.skewY!==J$a){J$b.setSkewY(J$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(J$b._tf.skewX,J$a),this._renderType|=4;var J$c=this._parent;J$c&&0===J$c._repaint&&(J$c._repaint=1,J$c.parentRepaint())}}),J$o(0,J$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(J$a){this._tfChanged=!1,(this._transform=J$a)&&(this._x=J$a.tx,this._y=J$a.ty,J$a.tx=J$a.ty=0,this.conchModel&&this.conchModel.transform(J$a.a,J$a.b,J$a.c,J$a.d,this._x,this._y)),J$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),J$o(0,J$a,"pivotX",function(){return this._style._tf.translateX},function(J$a){this.getStyle().setTranslateX(J$a),this.conchModel&&this.conchModel.pivot(J$a,this._style._tf.translateY),this.repaint()}),J$o(0,J$a,"pivotY",function(){return this._style._tf.translateY},function(J$a){this.getStyle().setTranslateY(J$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,J$a),this.repaint()}),J$o(0,J$a,"alpha",function(){return this._style.alpha},function(J$a){this._style&&this._style.alpha!==J$a&&(J$a=J$a<0?0:1<J$a?1:J$a,this.getStyle().alpha=J$a,this.conchModel&&this.conchModel.alpha(J$a),1!==J$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),J$o(0,J$a,"visible",function(){return this._style.visible},function(J$a){this._style&&this._style.visible!==J$a&&(this.getStyle().visible=J$a,this.conchModel&&this.conchModel.visible(J$a),this.parentRepaint())}),J$o(0,J$a,"graphics",function(){return this._graphics||(this.graphics=J$F.createGraphics())},function(J$a){this._graphics&&(this._graphics._sp=null),(this._graphics=J$a)?(this._renderType&=-2,this._renderType|=512,(J$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(J$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),J$o(0,J$a,"filters",function(){return this._$P.filters},function(J$a){J$a&&0===J$a.length&&(J$a=null),this._$P.filters!=J$a&&(this._set$P("filters",J$a?J$a.slice():null),J$J.isConchApp&&(this.conchModel&&(J$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),J$J.isWebGL&&(J$a&&J$a.length?this._renderType|=32:this._renderType&=-33),J$a&&0<J$a.length?(this._getBit(1)||this._setUpNoticeType(1),J$J.isWebGL&&1==J$a.length&&J$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(J$J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),J$o(0,J$a,"parent",J$e.prototype._$get_parent,function(J$a){J$z.superSet(J$aa,this,"parent",J$a),J$a&&this._getBit(2)&&this._$2__onDisplay()}),J$o(0,J$a,"mask",function(){return this._$P._mask},function(J$a){J$a&&this.mask&&this.mask._$P.maskParent||(J$a?(this.cacheAs="bitmap",this._set$P("_mask",J$a),J$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",J$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(J$a?J$a.conchModel:null),this._renderType|=64,this.parentRepaint())}),J$o(0,J$a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(J$a){this._mouseEnableState=J$a?2:1}),J$o(0,J$a,"globalScaleX",function(){for(var J$a=1,J$b=this;J$b&&J$b!==J$z.stage;)J$a*=J$b.scaleX,J$b=J$b.parent;return J$a}),J$o(0,J$a,"mouseX",function(){return this.getMousePoint().x}),J$o(0,J$a,"mouseY",function(){return this.getMousePoint().y}),J$c.fromImage=function(J$a){return(new J$c).loadImage(J$a)},J$c._cachePool=[],J$c.CustomList=[],J$i(J$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=J$g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),J$c}(J$aa),J$ma=function(J$a){function J$b(J$a){this._audio=null,this._onEnd=null,this._resumePlay=null,J$b.__super.call(this),this._onEnd=J$$.bind(this.__onEnd,this),this._resumePlay=J$$.bind(this.__resumePlay,this),J$a.addEventListener("ended",this._onEnd),this._audio=J$a}J$k(J$b,"laya.media.h5audio.AudioSoundChannel",J$da);var J$c=J$b.prototype;return J$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(J$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},J$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,J$O.container.appendChild(this._audio),this._audio.play()}catch(J$a){this.event("error")}},J$c.play=function(J$a){this.isStopped=!1;try{this._audio.playbackRate=J$E.playbackRate,this._audio.currentTime=this.startTime}catch(J$a){return void this._audio.addEventListener("canplay",this._resumePlay)}J$E.addChannel(this),J$O.container.appendChild(this._audio),!J$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},J$c.stop=function(){this.isStopped=!0,J$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&J$J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),J$O.onIE||this._audio!=J$ca._musicAudio&&J$W.recover("audio:"+this.url,this._audio),J$O.removeElement(this._audio),this._audio=null)},J$c.pause=function(){this.isStopped=!0,J$E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},J$c.resume=function(){this._audio&&(this.isStopped=!1,J$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},J$o(0,J$c,"position",function(){return this._audio?this._audio.currentTime:0}),J$o(0,J$c,"duration",function(){return this._audio?this._audio.duration:0}),J$o(0,J$c,"volume",function(){return this._audio?this._audio.volume:1},function(J$a){this._audio&&(this._audio.volume=J$a)}),J$b}(),J$na=function(J$a){function J$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=J$fa.ctx,J$b.__super.call(this),this._onPlayEnd=J$$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}J$k(J$b,"laya.media.webaudio.WebAudioSoundChannel",J$da);var J$c=J$b.prototype;return J$c.play=function(J$a){if(J$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var J$b=this.context,J$c=this.gain,J$d=J$b.createBufferSource();(this.bufferSource=J$d).buffer=this.audioBuffer,J$d.connect(J$c),J$c&&J$c.disconnect(),J$c.connect(J$b.destination),J$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=J$O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(J$d.loop=!0),J$d.playbackRate.setTargetAtTime?J$d.playbackRate.setTargetAtTime(J$E.playbackRate,this.context.currentTime,.1):J$d.playbackRate.value=J$E.playbackRate,J$d.start(0,this.startTime),!J$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},J$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(J$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},J$c._clearBufferSource=function(){if(this.bufferSource){var J$a=this.bufferSource;J$a.stop?J$a.stop(0):J$a.noteOff(0),J$a.disconnect(0),J$a.onended=null,J$b._tryCleanFailed||this._tryClearBuffer(J$a),this.bufferSource=null}},J$c._tryClearBuffer=function(J$a){try{J$a.buffer=null}catch(J$a){J$b._tryCleanFailed=!0}},J$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,J$E.removeChannel(this),this.startHandler=null,this.completeHandler=null},J$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,J$E.removeChannel(this)},J$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},J$o(0,J$c,"position",function(){return this.bufferSource?(J$O.now()-this._startTime)/1e3+this.startTime:0}),J$o(0,J$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),J$o(0,J$c,"volume",function(){return this._volume},function(J$a){this.isStopped||(this._volume=J$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(J$a,this.context.currentTime,.1):this.gain.gain.value=J$a)}),J$b._tryCleanFailed=!1,J$b}(),J$oa=function(J$a){function J$b(){J$b.__super.call(this),this._w=0,this._h=0}J$k(J$b,"laya.resource.Bitmap",J$ja);var J$c=J$b.prototype;return J$o(0,J$c,"width",function(){return this._w}),J$o(0,J$c,"height",function(){return this._h}),J$o(0,J$c,"source",function(){return this._source}),J$b}(),J$pa=function(J$b){function J$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,J$a.__super.call(this),this._interval=J$d.animationInterval,this._setUpNoticeType(1)}J$k(J$a,"laya.display.AnimationPlayerBase",J$b);var J$c=J$a.prototype;return J$c.play=function(J$a,J$b,J$c,J$d){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=!0),void 0===J$c&&(J$c=""),void 0===J$d&&(J$d=!0),this._isPlaying=!0,this.index="string"==typeof J$a?this._getFrameByLabel(J$a):J$a,this.loop=J$b,this._actionName=J$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},J$c._getFrameByLabel=function(J$a){var J$b=0;for(J$b=0;J$b<this._count;J$b++)if(this._labels[J$b]&&0<=this._labels[J$b].indexOf(J$a))return J$b;return 0},J$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},J$c._setControlNode=function(J$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=J$a)&&J$a!=this&&(J$a.on("display",this,this._checkResumePlaying),J$a.on("undisplay",this,this._checkResumePlaying))},J$c._setDisplay=function(J$a){J$b.prototype._setDisplay.call(this,J$a),this._checkResumePlaying()},J$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},J$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},J$c.addLabel=function(J$a,J$b){this._labels||(this._labels={}),this._labels[J$b]||(this._labels[J$b]=[]),this._labels[J$b].push(J$a)},J$c.removeLabel=function(J$a){if(J$a){if(this._labels)for(var J$b in this._labels)this._removeLabelFromLabelList(this._labels[J$b],J$a)}else this._labels=null},J$c._removeLabelFromLabelList=function(J$a,J$b){if(J$a)for(var J$c=J$a.length-1;0<=J$c;J$c--)J$a[J$c]==J$b&&J$a.splice(J$c,1)},J$c.gotoAndStop=function(J$a){this.index="string"==typeof J$a?this._getFrameByLabel(J$a):J$a,this.stop()},J$c._displayToIndex=function(J$a){},J$c.clear=function(){this.stop(),this._labels=null},J$o(0,J$c,"interval",function(){return this._interval},function(J$a){this._interval!=J$a&&(this._frameRateChanged=!0,this._interval=J$a,this._isPlaying&&0<J$a&&this.timerLoop(J$a,this,this._frameLoop,null,!0,!0))}),J$o(0,J$c,"isPlaying",function(){return this._isPlaying}),J$o(0,J$c,"index",function(){return this._index},function(J$a){if(this._index=J$a,this._displayToIndex(J$a),this._labels&&this._labels[J$a])for(var J$b=this._labels[J$a],J$c=0,J$d=J$b.length;J$c<J$d;J$c++)this.event("label",J$b[J$c])}),J$o(0,J$c,"count",function(){return this._count}),J$a.WRAP_POSITIVE=0,J$a.WRAP_REVERSE=1,J$a.WRAP_PINGPONG=2,J$a}(J$la),J$qa=function(J$b){function J$n(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,J$n.__super.call(this),this.overflow=J$n.VISIBLE,this._style=new J$ba(this),this._style.wordWrap=!1}J$k(J$n,"laya.display.Text",J$b);var J$a=J$n.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},J$a._getBoundPointsM=function(J$a){void 0===J$a&&(J$a=!1);var J$b=J$B.TEMP;return J$b.setTo(0,0,this.width,this.height),J$b._getBoundPoints()},J$a.getGraphicBounds=function(J$a){void 0===J$a&&(J$a=!1);var J$b=J$B.TEMP;return J$b.setTo(0,0,this.width,this.height),J$b},J$a._getCSSStyle=function(){return this._style},J$a.lang=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k){if(J$a=J$n.langPacks&&J$n.langPacks[J$a]?J$n.langPacks[J$a]:J$a,arguments.length<2)this._text=J$a;else{for(var J$l=0,J$m=arguments.length;J$l<J$m;J$l++)J$a=J$a.replace("{"+J$l+"}",arguments[J$l+1]);this._text=J$a}},J$a._isPassWordMode=function(){var J$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(J$a=!1),J$a},J$a._getPassWordTxt=function(J$a){var J$b;J$b="";for(var J$c=J$a.length;0<J$c;J$c--)J$b+="●";return J$b},J$a.renderText=function(J$a,J$b){var J$c=this.graphics;J$c.clear(!0);var J$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(J$O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);J$O.context.font=J$d;var J$e=this.padding,J$f=J$e[3],J$g="left",J$h=this._lines,J$i=this.leading+this._charSize.height,J$j=this._currBitmapFont;J$j&&(J$i=this.leading+J$j.getMaxHeight());var J$k=J$e[0];if(!J$j&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(J$g="right",J$f=this._width-J$e[1]):"center"==this.align&&(J$g="center",J$f=.5*this._width+J$e[3]-J$e[1])),0<this._height){var J$l=this._textHeight>this._height?"top":this.valign;"middle"===J$l?J$k=.5*(this._height-J$b*J$i)+J$e[0]-J$e[2]:"bottom"===J$l&&(J$k=this._height-J$b*J$i-J$e[2])}var J$m=this._style;if(J$j&&J$j.autoScaleSize)var J$n=J$j.fontSize/this.fontSize;if(this._clipPoint)if(J$c.save(),J$j&&J$j.autoScaleSize){var J$o=0,J$p=0;J$o=this._width?this._width-J$e[3]-J$e[1]:this._textWidth,J$p=this._height?this._height-J$e[0]-J$e[2]:this._textHeight,J$o*=J$n,J$p*=J$n,J$c.clipRect(J$e[3],J$e[0],J$o,J$p)}else J$c.clipRect(J$e[3],J$e[0],this._width?this._width-J$e[3]-J$e[1]:this._textWidth,this._height?this._height-J$e[0]-J$e[2]:this._textHeight);var J$q=J$m.password;"prompt"in this&&this.prompt==this._text&&(J$q=!1);for(var J$r=0,J$u=0,J$v=Math.min(this._lines.length,J$b+J$a)||1,J$w=J$a;J$w<J$v;J$w++){var J$x,J$y=J$h[J$w];if(J$q){var J$z=J$y.length;J$y="";for(var J$A=J$z;0<J$A;J$A--)J$y+="●"}if(J$r=J$f-(this._clipPoint?this._clipPoint.x:0),J$u=J$k+J$i*J$w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(J$g,J$r,J$u,J$w),J$j){var J$B=this.width;J$j.autoScaleSize&&(J$B=this.width*J$n),J$j.drawText(J$y,this,J$r,J$u,this.align,J$B)}else J$J.isWebGL?(this._words||(this._words=[]),(J$x=this._words.length>J$w-J$a?this._words[J$w-J$a]:new J$t).setText(J$y)):J$x=J$y,J$m.stroke?J$c.fillBorderText(J$x,J$r,J$u,J$d,this.color,J$m.strokeColor,J$m.stroke,J$g):J$c.fillText(J$x,J$r,J$u,J$d,this.color,J$g)}if(J$j&&J$j.autoScaleSize){var J$C=1/J$n;this.scale(J$C,J$C)}this._clipPoint&&J$c.restore(),this._startX=J$f,this._startY=J$k},J$a.drawUnderline=function(J$a,J$b,J$c,J$d){var J$e=this._lineWidths[J$d];switch(J$a){case"center":J$b-=J$e/2;break;case"right":J$b-=J$e}J$c+=this._charSize.height,this._graphics.drawLine(J$b,J$c,J$b+J$e,J$c,this.underlineColor||this.color,1)},J$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);J$O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new J$A(0,0)):this._clipPoint=null;var J$a=this._lines.length;if(this.overflow!=J$n.VISIBLE){var J$b=this.overflow==J$n.HIDDEN?Math.floor:Math.ceil;J$a=Math.min(J$a,J$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var J$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(J$c,J$a),this.repaint()},J$a.evalTextSize=function(){var J$a,J$b=NaN;J$a=Math.max.apply(this,this._lineWidths),J$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],J$a==this._textWidth&&J$b==this._textHeight||(this._textWidth=J$a,this._textHeight=J$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},J$a.checkEnabledViewportOrNot=function(){return this.overflow==J$n.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},J$a.changeText=function(J$a){this._text!==J$a&&(this.lang(J$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},J$a.parseLines=function(J$a){var J$b=this.wordWrap||this.overflow==J$n.HIDDEN;if(J$b)var J$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var J$d=J$$.contextMeasureText(J$n._testWord);J$J.isConchApp&&0===J$d.width&&0===J$d.height&&(J$d=J$$.contextMeasureText("W")),this._charSize.width=J$d.width,this._charSize.height=J$d.height||this.fontSize}for(var J$e=J$a.replace(/\r\n/g,"\n").split("\n"),J$f=0,J$g=J$e.length;J$f<J$g;J$f++){var J$h=J$e[J$f];J$b?this.parseLine(J$h,J$c):(this._lineWidths.push(this.getTextWidth(J$h)),this._lines.push(J$h))}},J$a.parseLine=function(J$a,J$b){J$O.context;var J$c,J$d=this._lines,J$e=0,J$f=NaN,J$g=NaN,J$h=0;if((J$f=this.getTextWidth(J$a))<=J$b)return J$d.push(J$a),void this._lineWidths.push(J$f);J$f=this._charSize.width,0==(J$e=Math.floor(J$b/J$f))&&(J$e=1),J$g=J$f=this.getTextWidth(J$a.substring(0,J$e));for(var J$i=J$e,J$j=J$a.length;J$i<J$j;J$i++)if(J$b<(J$g+=J$f=this.getTextWidth(J$a.charAt(J$i))))if(this.wordWrap){var J$k=J$a.substring(J$h,J$i);if(J$k.charCodeAt(J$k.length-1)<255?(J$c=/(?:\w|-)+$/.exec(J$k))&&(J$i=J$c.index+J$h,0==J$c.index?J$i+=J$k.length:J$k=J$a.substring(J$h,J$i)):J$n.RightToLeft&&(J$c=/([\u0600-\u06FF])+$/.exec(J$k))&&(J$i=J$c.index+J$h,0==J$c.index?J$i+=J$k.length:J$k=J$a.substring(J$h,J$i)),J$d.push(J$k),this._lineWidths.push(J$g-J$f),!((J$h=J$i)+J$e<J$j)){J$d.push(J$a.substring(J$h,J$j)),this._lineWidths.push(this.getTextWidth(J$d[J$d.length-1])),J$h=-1;break}J$i+=J$e,J$g=J$f=this.getTextWidth(J$a.substring(J$h,J$i)),J$i--}else if(this.overflow==J$n.HIDDEN)return J$d.push(J$a.substring(0,J$i)),void this._lineWidths.push(this.getTextWidth(J$d[J$d.length-1]));this.wordWrap&&-1!=J$h&&(J$d.push(J$a.substring(J$h,J$j)),this._lineWidths.push(this.getTextWidth(J$d[J$d.length-1])))},J$a.getTextWidth=function(J$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(J$a):J$$.contextMeasureText(J$a).width},J$a.getWordWrapWidth=function(){var J$a=this.padding,J$b=NaN;return(J$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(J$b=this.wordWrap?100:J$O.width),J$b<=0&&(J$b=100),J$b-J$a[3]-J$a[1]},J$a.getCharPoint=function(J$a,J$b){this._isChanged&&J$z.timer.runCallLater(this,this.typeset);for(var J$c=0,J$d=this._lines,J$e=0,J$f=0,J$g=J$d.length;J$f<J$g;J$f++){if(J$a<(J$c+=J$d[J$f].length)){var J$h=J$f;break}J$e=J$c}var J$i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;J$O.context.font=J$i;var J$j=this.getTextWidth(this._text.substring(J$e,J$a));return(J$b||new J$A).setTo(this._startX+J$j-(this._clipPoint?this._clipPoint.x:0),this._startY+J$h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},J$o(0,J$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(J$a){J$a!=this._width&&(J$z.superSet(J$la,this,"width",J$a),this.isChanged=!0)}),J$o(0,J$a,"textWidth",function(){return this._isChanged&&J$z.timer.runCallLater(this,this.typeset),this._textWidth}),J$o(0,J$a,"height",function(){return this._height?this._height:this.textHeight},function(J$a){J$a!=this._height&&(J$z.superSet(J$la,this,"height",J$a),this.isChanged=!0)}),J$o(0,J$a,"textHeight",function(){return this._isChanged&&J$z.timer.runCallLater(this,this.typeset),this._textHeight}),J$o(0,J$a,"padding",function(){return this._getCSSStyle().padding},function(J$a){this._getCSSStyle().padding=J$a,this.isChanged=!0}),J$o(0,J$a,"bold",function(){return this._getCSSStyle().bold},function(J$a){this._getCSSStyle().bold=J$a,this.isChanged=!0}),J$o(0,J$a,"text",function(){return this._text||""},function(J$a){this._text!==J$a&&(this.lang(J$a+""),this.isChanged=!0,this.event("change"))}),J$o(0,J$a,"color",function(){return this._getCSSStyle().color},function(J$a){this._getCSSStyle().color!=J$a&&(this._getCSSStyle().color=J$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),J$o(0,J$a,"font",function(){return this._getCSSStyle().fontFamily},function(J$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),J$n._bitmapFonts&&J$n._bitmapFonts[J$a]&&(this._currBitmapFont=J$n._bitmapFonts[J$a]),this._getCSSStyle().fontFamily=J$a,this.isChanged=!0}),J$o(0,J$a,"fontSize",function(){return this._getCSSStyle().fontSize},function(J$a){this._getCSSStyle().fontSize=J$a,this.isChanged=!0}),J$o(0,J$a,"italic",function(){return this._getCSSStyle().italic},function(J$a){this._getCSSStyle().italic=J$a,this.isChanged=!0}),J$o(0,J$a,"align",function(){return this._getCSSStyle().align},function(J$a){this._getCSSStyle().align=J$a,this.isChanged=!0}),J$o(0,J$a,"valign",function(){return this._getCSSStyle().valign},function(J$a){this._getCSSStyle().valign=J$a,this.isChanged=!0}),J$o(0,J$a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(J$a){this._getCSSStyle().wordWrap=J$a,this.isChanged=!0}),J$o(0,J$a,"leading",function(){return this._getCSSStyle().leading},function(J$a){this._getCSSStyle().leading=J$a,this.isChanged=!0}),J$o(0,J$a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(J$a){this._getCSSStyle().backgroundColor=J$a,this.isChanged=!0}),J$o(0,J$a,"borderColor",function(){return this._getCSSStyle().borderColor},function(J$a){this._getCSSStyle().borderColor=J$a,this.isChanged=!0}),J$o(0,J$a,"stroke",function(){return this._getCSSStyle().stroke},function(J$a){this._getCSSStyle().stroke=J$a,this.isChanged=!0}),J$o(0,J$a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(J$a){this._getCSSStyle().strokeColor=J$a,this.isChanged=!0}),J$o(0,J$a,"isChanged",null,function(J$a){this._isChanged!==J$a&&(this._isChanged=J$a)&&J$z.timer.callLater(this,this.typeset)}),J$o(0,J$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(J$a){if(!(this.overflow!=J$n.SCROLL||this.textWidth<this._width)&&this._clipPoint){J$a=J$a<this.padding[3]?this.padding[3]:J$a;var J$b=this._textWidth-this._width;J$a=J$b<J$a?J$b:J$a;var J$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=J$a,this.renderText(this._lastVisibleLineIndex,J$c)}}),J$o(0,J$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(J$a){if(!(this.overflow!=J$n.SCROLL||this.textHeight<this._height)&&this._clipPoint){J$a=J$a<this.padding[0]?this.padding[0]:J$a;var J$b=this._textHeight-this._height,J$c=(J$a=J$b<J$a?J$b:J$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=J$c;var J$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=J$a,this.renderText(J$c,J$d)}}),J$o(0,J$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),J$o(0,J$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),J$o(0,J$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),J$o(0,J$a,"underlineColor",function(){return this._underlineColor},function(J$a){this._underlineColor=J$a,this._isChanged=!0,this.typeset()}),J$n.registerBitmapFont=function(J$a,J$b){J$n._bitmapFonts||(J$n._bitmapFonts={}),J$n._bitmapFonts[J$a]=J$b},J$n.unregisterBitmapFont=function(J$a,J$b){if(void 0===J$b&&(J$b=!0),J$n._bitmapFonts&&J$n._bitmapFonts[J$a]){var J$c=J$n._bitmapFonts[J$a];J$b&&J$c.destroy(),delete J$n._bitmapFonts[J$a]}},J$n.setTextRightToLeft=function(){var J$a;(J$a=J$O.canvas.source.style).display="none",J$a.position="absolute",J$a.direction="rtl",J$J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,J$O.document.body.appendChild(J$O.canvas.source)},J$n.supportFont=function(J$a){J$O.context.font="10px sans-serif";var J$b=J$$.contextMeasureText("abcji").width;J$O.context.font="10px "+J$a;var J$c=J$$.contextMeasureText("abcji").width;return console.log(J$b,J$c),J$b!==J$c},J$n._testWord="游",J$n.langPacks=null,J$n.VISIBLE="visible",J$n.SCROLL="scroll",J$n.HIDDEN="hidden",J$n.CharacterCache=!0,J$n.RightToLeft=!1,J$n._bitmapFonts=null,J$i(J$n,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),J$n}(J$la),J$ra=function(J$l){function J$g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",J$g.__super.call(this),this.offset=new J$A,this._canvasTransform=new J$G,this._previousOrientation=J$O.window.orientation;var J$b=this;this.transform=J$G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var J$a=J$O.window,J$c=this;J$a.addEventListener("focus",function(){J$b._isFocused=!0,J$c.event("focus"),J$c.event("focuschange")}),J$a.addEventListener("blur",function(){J$b._isFocused=!1,J$c.event("blur"),J$c.event("focuschange"),J$c._isInputting()&&(J$xa.inputElement.target.focus=!1)});var J$d="visibilityState",J$e="visibilitychange",J$f=J$a.document;void 0!==J$f.hidden?(J$e="visibilitychange",J$d="visibilityState"):void 0!==J$f.mozHidden?(J$e="mozvisibilitychange",J$d="mozVisibilityState"):void 0!==J$f.msHidden?(J$e="msvisibilitychange",J$d="msVisibilityState"):void 0!==J$f.webkitHidden&&(J$e="webkitvisibilitychange",J$d="webkitVisibilityState"),J$a.document.addEventListener(J$e,function(){"hidden"==J$O.document[J$d]?J$c._setStageVisible(!1):J$c._setStageVisible(!0)}),J$a.document.addEventListener("qbrowserVisibilityChange",function(J$a){J$c._setStageVisible(!J$a.hidden)}),J$a.addEventListener("resize",function(){var J$a=J$O.window.orientation;null!=J$a&&J$a!=J$b._previousOrientation&&J$c._isInputting()&&(J$xa.inputElement.target.focus=!1),J$b._previousOrientation=J$a,J$c._isInputting()||J$c._resetCanvas()}),J$a.addEventListener("orientationchange",function(J$a){J$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),J$O.onMobile&&this.on("mousedown",this,this._onmouseMove)}J$k(J$g,"laya.display.Stage",J$l);var J$a=J$g.prototype;return J$a._setStageVisible=function(J$a){this._isVisibility!=J$a&&(this._isVisibility=J$a,this._isVisibility||this._isInputting()&&(J$xa.inputElement.target.focus=!1),this.event("visibilitychange"))},J$a._isInputting=function(){return J$O.onMobile&&J$xa.isInputting},J$a._changeCanvasSize=function(){this.setScreenSize(J$O.clientWidth*J$O.pixelRatio,J$O.clientHeight*J$O.pixelRatio)},J$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var J$a=J$J._mainCanvas;J$a.source.style;J$a.size(1,1),J$z.timer.once(100,this,this._changeCanvasSize)}},J$a.setScreenSize=function(J$a,J$b){var J$c=!1;if("none"!==this._screenMode&&(J$c=(J$a/J$b<1?"vertical":"horizontal")!==this._screenMode)){var J$d=J$b;J$b=J$a,J$a=J$d}this.canvasRotation=J$c;var J$e=J$J._mainCanvas,J$f=J$e.source.style,J$g=this._canvasTransform.identity(),J$h=this._scaleMode,J$i=J$a/this.designWidth,J$j=J$b/this.designHeight,J$k=this.designWidth,J$l=this.designHeight,J$m=J$a,J$n=J$b,J$o=J$O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,J$h){case"noscale":J$i=J$j=1,J$m=this.designWidth,J$n=this.designHeight;break;case"showall":J$i=J$j=Math.min(J$i,J$j),J$k=J$m=Math.round(this.designWidth*J$i),J$l=J$n=Math.round(this.designHeight*J$j);break;case"noborder":J$i=J$j=Math.max(J$i,J$j),J$m=Math.round(this.designWidth*J$i),J$n=Math.round(this.designHeight*J$j);break;case"full":J$i=J$j=1,this._width=J$k=J$a,this._height=J$l=J$b;break;case"fixedwidth":J$j=J$i,this._height=J$l=Math.round(J$b/J$i);break;case"fixedheight":J$i=J$j,this._width=J$k=Math.round(J$a/J$j);break;case"fixedauto":J$a/J$b<this.designWidth/this.designHeight?(J$j=J$i,this._height=J$l=Math.round(J$b/J$i)):(J$i=J$j,this._width=J$k=Math.round(J$a/J$j))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,J$k=J$k+1&2147483646,J$l=J$l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),J$i*=this.scaleX,J$j*=this.scaleY,1===J$i&&1===J$j?this.transform.identity():(this.transform.a=this._formatData(J$i/(J$m/J$k)),this.transform.d=this._formatData(J$j/(J$n/J$l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),J$e.size(J$k,J$l),J$F.changeWebGLSize(J$k,J$l),J$g.scale(J$m/J$k/J$o,J$n/J$l/J$o),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(J$a-J$m)/J$o:this.offset.x=.5*(J$a-J$m)/J$o,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(J$b-J$n)/J$o:this.offset.y=.5*(J$b-J$n)/J$o,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),J$g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,J$c&&("horizontal"===this._screenMode?(J$g.rotate(Math.PI/2),J$g.translate(J$b/J$o,0),this.canvasDegree=90):(J$g.rotate(-Math.PI/2),J$g.translate(0,J$a/J$o),this.canvasDegree=-90)),J$g.a=this._formatData(J$g.a),J$g.d=this._formatData(J$g.d),J$g.tx=this._formatData(J$g.tx),J$g.ty=this._formatData(J$g.ty),J$f.transformOrigin=J$f.webkitTransformOrigin=J$f.msTransformOrigin=J$f.mozTransformOrigin=J$f.oTransformOrigin="0px 0px 0px",J$f.transform=J$f.webkitTransform=J$f.msTransform=J$f.mozTransform=J$f.oTransform="matrix("+J$g.toString()+")",J$g.translate(parseInt(J$f.left)||0,parseInt(J$f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},J$a._formatData=function(J$a){return Math.abs(J$a)<1e-6?0:Math.abs(1-J$a)<.001?0<J$a?1:-1:J$a},J$a.getMousePoint=function(){return J$A.TEMP.setTo(this.mouseX,this.mouseY)},J$a.repaint=function(){this._repaint=1},J$a.parentRepaint=function(){},J$a._loop=function(){return this.render(J$J.context,0,0),!0},J$a._onmouseMove=function(J$a){this._mouseMoveTime=J$O.now()},J$a.getTimeFromFrameStart=function(){return J$O.now()-this._frameStartTime},J$a.render=function(J$a,J$b,J$c){if("sleep"===this._frameRate&&!J$J.isConchApp){var J$d=J$O.now();if(!(1e3<=J$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(J$X.loopCount++,J$p.instance.runEvent(),J$z.timer._update()));this._frameStartTime=J$d}if(this._renderCount++,J$J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=J$O.now();var J$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),J$f=this._renderCount%2==0;if(J$X.renderSlow=!J$e,J$e||J$f||J$J.isConchApp){var J$g;J$X.loopCount++,J$p.instance.runEvent(),J$z.timer._update(),J$F.update3DLoop();var J$h=0,J$i=0;if(J$J.isConchNode)for(J$h=0,J$i=this._scenes.length;J$h<J$i;J$h++)(J$g=this._scenes[J$h])&&J$g._updateSceneConch();else for(J$h=0,J$i=this._scenes.length;J$h<J$i;J$h++)(J$g=this._scenes[J$h])&&J$g._updateScene();if(J$J.isConchNode){var J$j=J$la.CustomList;for(J$h=0,J$i=J$j.length;J$h<J$i;J$h++){var J$k=J$j[J$h];J$k.customRender(J$k.customContext,0,0)}return}}J$J.isConchNode||this.renderingEnabled&&(J$e||!J$f||J$J.isConchWebGL)&&(J$J.isWebGL?J$J.WebGL.mainContext&&!J$J.WebGL.mainContext.isContextLost()&&(J$a.clear(),J$l.prototype.render.call(this,J$a,J$b,J$c),J$X._show&&J$X._sp&&J$X._sp.render(J$a,J$b,J$c),J$F.clear(this._bgColor),J$F.beginFlush(),J$a.flush(),J$F.endFinish(),J$_.instance&&J$_.getInstance().endDispose()):(J$F.clear(this._bgColor),J$l.prototype.render.call(this,J$a,J$b,J$c),J$X._show&&J$X._sp&&J$X._sp.render(J$a,J$b,J$c)))}else this._renderCount%5==0&&(J$X.loopCount++,J$p.instance.runEvent(),J$z.timer._update())},J$a._requestFullscreen=function(){var J$a=J$O.document.documentElement;J$a.requestFullscreen?J$a.requestFullscreen():J$a.mozRequestFullScreen?J$a.mozRequestFullScreen():J$a.webkitRequestFullscreen?J$a.webkitRequestFullscreen():J$a.msRequestFullscreen&&J$a.msRequestFullscreen()},J$a._fullScreenChanged=function(){J$z.stage.event("fullscreenchange")},J$a.exitFullscreen=function(){var J$a=J$O.document;J$a.exitFullscreen?J$a.exitFullscreen():J$a.mozCancelFullScreen?J$a.mozCancelFullScreen():J$a.webkitExitFullscreen&&J$a.webkitExitFullscreen()},J$o(0,J$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),J$o(0,J$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),J$o(0,J$a,"frameRate",function(){return this._frameRate},function(J$a){if(this._frameRate=J$a,J$J.isConchApp)switch(this._frameRate){case"slow":J$O.window.conch&&J$O.window.conchConfig.setSlowFrame&&J$O.window.conchConfig.setSlowFrame(!0);break;case"fast":J$O.window.conch&&J$O.window.conchConfig.setSlowFrame&&J$O.window.conchConfig.setSlowFrame(!1);break;case"mouse":J$O.window.conch&&J$O.window.conchConfig.setMouseFrame&&J$O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":J$O.window.conch&&J$O.window.conchConfig.setLimitFPS&&J$O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),J$o(0,J$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),J$o(0,J$a,"width",J$l.prototype._$get_width,function(J$a){this.designWidth=J$a,J$z.superSet(J$la,this,"width",J$a),J$z.timer.callLater(this,this._changeCanvasSize)}),J$o(0,J$a,"alignH",function(){return this._alignH},function(J$a){this._alignH=J$a,J$z.timer.callLater(this,this._changeCanvasSize)}),J$o(0,J$a,"isFocused",function(){return this._isFocused}),J$o(0,J$a,"height",J$l.prototype._$get_height,function(J$a){this.designHeight=J$a,J$z.superSet(J$la,this,"height",J$a),J$z.timer.callLater(this,this._changeCanvasSize)}),J$o(0,J$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||J$G.create()},J$l.prototype._$set_transform),J$o(0,J$a,"isVisibility",function(){return this._isVisibility}),J$o(0,J$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),J$o(0,J$a,"scaleMode",function(){return this._scaleMode},function(J$a){this._scaleMode=J$a,J$z.timer.callLater(this,this._changeCanvasSize)}),J$o(0,J$a,"alignV",function(){return this._alignV},function(J$a){this._alignV=J$a,J$z.timer.callLater(this,this._changeCanvasSize)}),J$o(0,J$a,"bgColor",function(){return this._bgColor},function(J$a){this._bgColor=J$a,this.conchModel&&this.conchModel.bgColor(J$a),J$J.isWebGL&&(J$a?J$g._wgColor=J$S.create(J$a)._color:J$O.onMiniGame||(J$g._wgColor=null)),J$O.onLimixiu?J$g._wgColor=J$S.create(J$a)._color:J$J.canvas.style.background=J$a||"none"}),J$o(0,J$a,"mouseX",function(){return Math.round(J$p.instance.mouseX/this.clientScaleX)}),J$o(0,J$a,"mouseY",function(){return Math.round(J$p.instance.mouseY/this.clientScaleY)}),J$o(0,J$a,"screenMode",function(){return this._screenMode},function(J$a){this._screenMode=J$a}),J$o(0,J$a,"visible",J$l.prototype._$get_visible,function(J$a){this.visible!==J$a&&(J$z.superSet(J$la,this,"visible",J$a),J$J._mainCanvas.source.style.visibility=J$a?"visible":"hidden")}),J$o(0,J$a,"fullScreenEnabled",null,function(J$a){var J$b=J$O.document,J$c=J$J.canvas;J$a?(J$c.addEventListener("mousedown",this._requestFullscreen),J$c.addEventListener("touchstart",this._requestFullscreen),J$b.addEventListener("fullscreenchange",this._fullScreenChanged),J$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),J$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),J$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(J$c.removeEventListener("mousedown",this._requestFullscreen),J$c.removeEventListener("touchstart",this._requestFullscreen),J$b.removeEventListener("fullscreenchange",this._fullScreenChanged),J$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),J$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),J$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),J$g.SCALE_NOSCALE="noscale",J$g.SCALE_EXACTFIT="exactfit",J$g.SCALE_SHOWALL="showall",J$g.SCALE_NOBORDER="noborder",J$g.SCALE_FULL="full",J$g.SCALE_FIXED_WIDTH="fixedwidth",J$g.SCALE_FIXED_HEIGHT="fixedheight",J$g.SCALE_FIXED_AUTO="fixedauto",J$g.ALIGN_LEFT="left",J$g.ALIGN_RIGHT="right",J$g.ALIGN_CENTER="center",J$g.ALIGN_TOP="top",J$g.ALIGN_MIDDLE="middle",J$g.ALIGN_BOTTOM="bottom",J$g.SCREEN_NONE="none",J$g.SCREEN_HORIZONTAL="horizontal",J$g.SCREEN_VERTICAL="vertical",J$g.FRAME_FAST="fast",J$g.FRAME_SLOW="slow",J$g.FRAME_MOUSE="mouse",J$g.FRAME_SLEEP="sleep",J$g.FRAME_MOUSE_THREDHOLD=2e3,J$i(J$g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),J$g}(J$la),J$ua=(function(J$a){function J$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,J$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}J$k(J$b,"laya.media.SoundNode",J$la);var J$c=J$b.prototype;J$c._onParentChange=function(){this.target=this.parent},J$c.play=function(J$a,J$b){void 0===J$a&&(J$a=1),isNaN(J$a)&&(J$a=1),this.url&&(this.stop(),this._channel=J$E.playSound(this.url,J$a,null,J$b))},J$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},J$c._setPlayAction=function(J$a,J$b,J$c,J$d){void 0===J$d&&(J$d=!0),this[J$c]&&J$a&&(J$d?J$a.on(J$b,this,this[J$c]):J$a.off(J$b,this,this[J$c]))},J$c._setPlayActions=function(J$a,J$b,J$c,J$d){if(void 0===J$d&&(J$d=!0),J$a&&J$b){var J$e,J$f=J$b.split(","),J$g=0;for(J$e=J$f.length,J$g=0;J$g<J$e;J$g++)this._setPlayAction(J$a,J$f[J$g],J$c,J$d)}},J$o(0,J$c,"playEvent",null,function(J$a){(this._playEvents=J$a)&&this._tar&&this._setPlayActions(this._tar,J$a,"play")}),J$o(0,J$c,"target",null,function(J$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=J$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),J$o(0,J$c,"stopEvent",null,function(J$a){(this._stopEvents=J$a)&&this._tar&&this._setPlayActions(this._tar,J$a,"stop")})}(),function(J$a){function J$b(){this._src=null,this._onload=null,this._onerror=null,J$b.__super.call(this)}J$k(J$b,"laya.resource.FileBitmap",J$oa);var J$c=J$b.prototype;return J$o(0,J$c,"src",function(){return this._src},function(J$a){this._src=J$a}),J$o(0,J$c,"onload",null,function(J$a){}),J$o(0,J$c,"onerror",null,function(J$a){}),J$b}()),J$va=function(J$a){function J$c(J$a,J$b){this._is2D=!1,J$c.__super.call(this);var J$d=this;if(this._source=this,"2D"===J$a||"AUTO"===J$a&&!J$J.isWebGL){this._is2D=!0,this._source=J$b||J$O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var J$e=this;J$e.getContext=function(J$a,J$b){if(J$d._ctx)return J$d._ctx;var J$c=J$d._ctx=J$d._source.getContext(J$a,J$b);return J$c&&(J$c._canvas=J$e,J$J.isFlash||J$O.onLimixiu||(J$c.size=function(J$a,J$b){})),J$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}J$k(J$c,"laya.resource.HTMLCanvas",J$oa);var J$b=J$c.prototype;return J$b.clear=function(){this._ctx&&this._ctx.clear()},J$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},J$b.release=function(){},J$b._setContext=function(J$a){this._ctx=J$a},J$b.getContext=function(J$a,J$b){return this._ctx?this._ctx:this._ctx=J$c._createContext(this)},J$b.getMemSize=function(){return 0},J$b.size=function(J$a,J$b){(this._w!=J$a||this._h!=J$b||this._source&&(this._source.width!=J$a||this._source.height!=J$b))&&(this._w=J$a,this._h=J$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(J$a,J$b),this._source&&(this._source.height=J$b,this._source.width=J$a))},J$b.getCanvas=function(){return this._source},J$b.toBase64=function(J$a,J$b,J$c){if(this._source)if(J$J.isConchApp&&this._source.toBase64)this._source.toBase64(J$a,J$b,J$c);else{var J$d=this._source.toDataURL(J$a,J$b);J$c.call(this,J$d)}},J$o(0,J$b,"context",function(){return this._ctx}),J$o(0,J$b,"asBitmap",null,function(J$a){}),J$c.create=function(J$a,J$b){return new J$c(J$a,J$b)},J$c.TYPE2D="2D",J$c.TYPE3D="3D",J$c.TYPEAUTO="AUTO",J$c._createContext=null,J$c}(),J$wa=(function(J$a){function J$i(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){throw J$i.__super.call(this),new Error("不允许new！")}J$k(J$i,"laya.resource.HTMLSubImage",J$oa),J$i.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){return void 0===J$h&&(J$h=!1),new J$i(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h)}}(),function(J$a){function J$l(){this._frames=null,this._url=null,J$l.__super.call(this),this._setControlNode(this)}J$k(J$l,"laya.display.Animation",J$a);var J$b=J$l.prototype;J$b.destroy=function(J$a){void 0===J$a&&(J$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,J$a),this._frames=null,this._labels=null},J$b.play=function(J$a,J$b,J$c,J$d){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=!0),void 0===J$c&&(J$c=""),void 0===J$d&&(J$d=!0),J$c&&this._setFramesFromCache(J$c,J$d),this._isPlaying=!0,this.index="string"==typeof J$a?this._getFrameByLabel(J$a):J$a,this.loop=J$b,this._actionName=J$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},J$b._setFramesFromCache=function(J$a,J$b){var J$c;return void 0===J$b&&(J$b=!1),this._url&&(J$a=this._url+"#"+J$a),J$a&&J$l.framesMap[J$a]?((J$c=J$l.framesMap[J$a])instanceof Array?(this._frames=J$l.framesMap[J$a],this._count=this._frames.length):(J$c.nodeRoot&&(J$l.framesMap[J$a]=this._parseGraphicAnimationByData(J$c),J$c=J$l.framesMap[J$a]),this._frames=J$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=J$c.interval),this._labels=this._copyLabels(J$c.labels)),!0):(J$b&&console.log("ani not found:",J$a),!1)},J$b._copyLabels=function(J$a){if(!J$a)return null;var J$b,J$c;for(J$c in J$b={},J$a)J$b[J$c]=J$$.copyArray([],J$a[J$c]);return J$b},J$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&J$a.prototype._frameLoop.call(this)},J$b._displayToIndex=function(J$a){this._frames&&(this.graphics=this._frames[J$a])},J$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},J$b.loadImages=function(J$a,J$b){return void 0===J$b&&(J$b=""),this._url="",this._setFramesFromCache(J$b)||(this.frames=J$l.framesMap[J$b]?J$l.framesMap[J$b]:J$l.createFrames(J$a,J$b)),this},J$b.loadAtlas=function(J$b,J$c,J$d){void 0===J$d&&(J$d=""),this._url="";var J$e=this;function J$a(J$a){J$b===J$a&&(J$e.frames=J$l.framesMap[J$d]?J$l.framesMap[J$d]:J$l.createFrames(J$b,J$d),J$c&&J$c.run())}return J$e._setFramesFromCache(J$d)||(J$ha.getAtlas(J$b)?J$a(J$b):J$z.loader.load(J$b,J$u.create(null,J$a,[J$b]),null,"atlas")),this},J$b.loadAnimation=function(J$a,J$b,J$c){this._url=J$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,J$b&&J$b.run()):!J$c||J$ha.getAtlas(J$c)?this._loadAnimationData(J$a,J$b,J$c):J$z.loader.load(J$c,J$u.create(this,this._loadAnimationData,[J$a,J$b,J$c]),null,"atlas"),this},J$b._loadAnimationData=function(J$h,J$i,J$a){var J$j=this;if(!J$a||J$ha.getAtlas(J$a)){var J$k=this;J$ha.getRes(J$h)?J$b(J$h):J$z.loader.load(J$h,J$u.create(null,J$b,[J$h]),null,"json"),J$ha.clearRes(J$h)}else console.warn("atlas load fail:"+J$a);function J$b(J$a){if(J$ha.getRes(J$a)&&J$h===J$a){var J$b;if(J$l.framesMap[J$h+"#"])J$k._setFramesFromCache(J$j._actionName,!0),J$j.index=0,J$j._checkResumePlaying();else{var J$c=J$k._parseGraphicAnimation(J$ha.getRes(J$h));if(!J$c)return;var J$d,J$e=J$c.animationList,J$f=0,J$g=J$e.length;for(J$f=0;J$f<J$g;J$f++)J$b=J$e[J$f],J$l.framesMap[J$h+"#"+J$b.name]=J$b,J$d||(J$d=J$b);J$d&&(J$l.framesMap[J$h+"#"]=J$d,J$k._setFramesFromCache(J$j._actionName,!0),J$j.index=0),J$j._checkResumePlaying()}J$i&&J$i.run()}}},J$b._parseGraphicAnimation=function(J$a){return J$za.parseAnimationData(J$a)},J$b._parseGraphicAnimationByData=function(J$a){return J$za.parseAnimationByData(J$a)},J$o(0,J$b,"frames",function(){return this._frames},function(J$a){(this._frames=J$a)&&(this._count=J$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),J$o(0,J$b,"autoPlay",null,function(J$a){J$a?this.play():this.stop()}),J$o(0,J$b,"source",null,function(J$a){-1<J$a.indexOf(".ani")?this.loadAnimation(J$a):-1<J$a.indexOf(".json")||-1<J$a.indexOf("als")||-1<J$a.indexOf("atlas")?this.loadAtlas(J$a):this.loadImages(J$a.split(","))}),J$o(0,J$b,"autoAnimation",null,function(J$a){this.play(0,!0,J$a,!1)}),J$l.createFrames=function(J$a,J$b){var J$c,J$d,J$e=0,J$f=0;if("string"==typeof J$a){var J$g=J$ha.getAtlas(J$a);if(J$g&&J$g.length)for(J$c=[],J$e=0,J$f=J$g.length;J$e<J$f;J$e++)(J$d=new J$F.createGraphics).drawTexture(J$ha.getRes(J$g[J$e]),0,0),J$c.push(J$d)}else if(J$a instanceof Array)for(J$c=[],J$e=0,J$f=J$a.length;J$e<J$f;J$e++)(J$d=new J$F.createGraphics).loadImage(J$a[J$e],0,0),J$c.push(J$d);return J$b&&(J$l.framesMap[J$b]=J$c),J$c},J$l.clearCache=function(J$a){var J$b,J$c=J$l.framesMap,J$d=J$a+"#";for(J$b in J$c)J$b!==J$a&&0!=J$b.indexOf(J$d)||delete J$l.framesMap[J$b]},J$l.framesMap={}}(J$pa),function(J$a){function J$f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,J$f.__super.call(this),null==J$f._sortIndexFun&&(J$f._sortIndexFun=J$y.sortByKey("index",!1,!0))}J$k(J$f,"laya.display.FrameAnimation",J$a);var J$b=J$f.prototype;return J$b._setUp=function(J$a,J$b){this._labels=null,this._animationNewFrames=null,this._targetDic=J$a,this._animationData=J$b,this.interval=1e3/J$b.frameRate,J$b.parsed?(this._count=J$b.count,this._labels=J$b.labels,this._animationNewFrames=J$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),J$b.parsed=!0,J$b.labels=this._labels,J$b.count=this._count,J$b.animationNewFrames=this._animationNewFrames},J$b.clear=function(){J$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},J$b._displayToIndex=function(J$a){if(this._animationData){J$a<0&&(J$a=0),J$a>this._count&&(J$a=this._count);var J$b=this._animationData.nodes,J$c=0,J$d=J$b.length;for(J$c=0;J$c<J$d;J$c++)this._displayNodeToFrame(J$b[J$c],J$a)}},J$b._displayNodeToFrame=function(J$a,J$b,J$c){J$c||(J$c=this._targetDic);var J$d=J$c[J$a.target];if(J$d){var J$e,J$f,J$g,J$h=J$a.frames,J$i=J$a.keys,J$j=0,J$k=J$i.length;for(J$j=0;J$j<J$k;J$j++)J$g=(J$f=J$h[J$e=J$i[J$j]]).length>J$b?J$f[J$b]:J$f[J$f.length-1],J$d[J$e]=J$g}},J$b._calculateDatas=function(){if(this._animationData){var J$a,J$b=this._animationData.nodes,J$c=0,J$d=J$b.length;for(J$c=this._count=0;J$c<J$d;J$c++)J$a=J$b[J$c],this._calculateNodeKeyFrames(J$a);this._count+=1}},J$b._calculateNodeKeyFrames=function(J$a){var J$b,J$c,J$d=J$a.keyframes,J$e=J$a.target;for(J$b in J$a.frames||(J$a.frames={}),J$a.keys?J$a.keys.length=0:J$a.keys=[],J$a.initValues||(J$a.initValues={}),J$d)J$c=J$d[J$b],J$a.frames[J$b]||(J$a.frames[J$b]=[]),this._targetDic&&this._targetDic[J$e]&&(J$a.initValues[J$b]=this._targetDic[J$e][J$b]),J$c.sort(J$f._sortIndexFun),J$a.keys.push(J$b),this._calculateNodePropFrames(J$c,J$a.frames[J$b],J$b,J$e)},J$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var J$a,J$b,J$c=this._animationData.nodes,J$d=0,J$e=J$c.length;for(J$d=0;J$d<J$e;J$d++)if(J$b=(J$a=J$c[J$d]).initValues){var J$f,J$g=this._targetDic[J$a.target];if(J$g)for(J$f in J$b)J$g[J$f]=J$b[J$f]}}},J$b._calculateNodePropFrames=function(J$a,J$b,J$c,J$d){var J$e=0,J$f=J$a.length-1;if(0<J$f){for(J$b.length=J$a[J$f].index+1,J$e=0;J$e<J$f;J$e++)this._dealKeyFrame(J$a[J$e]),this._calculateFrameValues(J$a[J$e],J$a[J$e+1],J$b);this._dealKeyFrame(J$a[J$e])}0==J$f&&(J$b[J$a[0].index]=J$a[0].value,this._animationNewFrames&&(this._animationNewFrames[J$a[0].index]=!0))},J$b._dealKeyFrame=function(J$a){J$a.label&&""!=J$a.label&&this.addLabel(J$a.label,J$a.index)},J$b._calculateFrameValues=function(J$a,J$b,J$c){var J$d,J$e=0,J$f=J$a.index,J$g=J$b.index,J$h=J$a.value,J$i=J$b.value-J$a.value,J$j=J$g-J$f;if(J$g>this._count&&(this._count=J$g),J$a.tween)for(null==(J$d=J$U[J$a.tweenMethod])&&(J$d=J$U.linearNone),J$e=J$f;J$e<J$g;J$e++)J$c[J$e]=J$d(J$e-J$f,J$h,J$i,J$j),this._animationNewFrames&&(this._animationNewFrames[J$e]=!0);else for(J$e=J$f;J$e<J$g;J$e++)J$c[J$e]=J$h;this._animationNewFrames&&(this._animationNewFrames[J$a.index]=!0,this._animationNewFrames[J$b.index]=!0),J$c[J$b.index]=J$b.value},J$f._sortIndexFun=null,J$f}(J$pa)),J$xa=function(J$b){function J$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",J$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=J$qa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}J$k(J$e,"laya.display.Input",J$b);var J$a=J$e.prototype;return J$a.setSelection=function(J$a,J$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=J$a,laya.display.Input.inputElement.selectionEnd=J$b},J$a._onUnDisplay=function(J$a){this.focus=!1},J$a._onMouseDown=function(J$a){this.focus=!0},J$a._syncInputTransform=function(){var J$a=this.nativeInput,J$b=J$$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),J$c=this._width-this.padding[1]-this.padding[3],J$d=this._height-this.padding[0]-this.padding[2];J$J.isConchApp?(J$a.setScale(J$b.scaleX,J$b.scaleY),J$a.setSize(J$c,J$d),J$a.setPos(J$b.x,J$b.y)):(J$e.inputContainer.style.transform=J$e.inputContainer.style.webkitTransform="scale("+J$b.scaleX+","+J$b.scaleY+") rotate("+J$z.stage.canvasDegree+"deg)",J$a.style.width=J$c+"px",J$a.style.height=J$d+"px",J$e.inputContainer.style.left=J$b.x+"px",J$e.inputContainer.style.top=J$b.y+"px")},J$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},J$a._setInputMethod=function(){J$e.input.parentElement&&J$e.inputContainer.removeChild(J$e.input),J$e.area.parentElement&&J$e.inputContainer.removeChild(J$e.area),J$e.inputElement=this._multiline?J$e.area:J$e.input,J$e.inputContainer.appendChild(J$e.inputElement),J$qa.RightToLeft&&(J$e.inputElement.style.direction="rtl")},J$a._focusIn=function(){laya.display.Input.isInputting=!0;var J$a=this.nativeInput;this._focus=!0;var J$b=J$a.style;J$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),J$a.readOnly=!this._editable,J$J.isConchApp&&(J$a.setType(this._type),J$a.setForbidEdit(!this._editable)),J$a.maxLength=this._maxChars;this.padding;if(J$a.type=this._type,J$a.value=this._content,J$a.placeholder=this._prompt,J$z.stage.off("keydown",this,this._onKeyDown),J$z.stage.on("keydown",this,this._onKeyDown),(J$z.stage.focus=this).event("focus"),J$O.onPC&&J$a.focus(),!J$O.onMiniGame){this._text;this._text=null}this.typeset(),J$a.setColor(this._originColor),J$a.setFontSize(this.fontSize),J$a.setFontFace(J$O.onIPhone&&J$qa._fontFamilyMap[this.font]||this.font),J$J.isConchApp&&J$a.setMultiAble&&J$a.setMultiAble(this._multiline),J$b.lineHeight=this.leading+this.fontSize+"px",J$b.fontStyle=this.italic?"italic":"normal",J$b.fontWeight=this.bold?"bold":"normal",J$b.textAlign=this.align,J$b.padding="0 0",this._syncInputTransform(),!J$J.isConchApp&&J$O.onPC&&J$z.timer.frameLoop(1,this,this._syncInputTransform)},J$a._setPromptColor=function(){(J$e.promptStyleDOM=J$O.getElementById("promptStyle"))||((J$e.promptStyleDOM=J$O.createElement("style")).setAttribute("id","promptStyle"),J$O.document.head.appendChild(J$e.promptStyleDOM)),J$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},J$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(J$z.superSet(J$qa,this,"text",this._content),J$z.superSet(J$qa,this,"color",this._originColor)):(J$z.superSet(J$qa,this,"text",this._prompt),J$z.superSet(J$qa,this,"color",this._promptColor)),J$z.stage.off("keydown",this,this._onKeyDown),J$z.stage.focus=null,this.event("blur"),J$J.isConchApp&&this.nativeInput.blur(),J$O.onPC&&J$z.timer.clear(this,this._syncInputTransform)},J$a._onKeyDown=function(J$a){13===J$a.keyCode&&(J$O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},J$a.changeText=function(J$a){this._content=J$a,this._focus?(this.nativeInput.value=J$a||"",this.event("change")):J$b.prototype.changeText.call(this,J$a)},J$o(0,J$a,"color",J$b.prototype._$get_color,function(J$a){this._focus&&this.nativeInput.setColor(J$a),J$z.superSet(J$qa,this,"color",this._content?J$a:this._promptColor),this._originColor=J$a}),J$o(0,J$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(J$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),J$o(0,J$a,"multiline",function(){return this._multiline},function(J$a){this._multiline=J$a,this.valign=J$a?"top":"middle"}),J$o(0,J$a,"maxChars",function(){return this._maxChars},function(J$a){J$a<=0&&(J$a=1e5),this._maxChars=J$a}),J$o(0,J$a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(J$a){J$z.superSet(J$qa,this,"color",this._originColor),J$a+="",this._focus?(this.nativeInput.value=J$a||"",this.event("change")):(this._multiline||(J$a=J$a.replace(/\r?\n/g,"")),(this._content=J$a)?J$z.superSet(J$qa,this,"text",J$a):(J$z.superSet(J$qa,this,"text",this._prompt),J$z.superSet(J$qa,this,"color",this.promptColor)))}),J$o(0,J$a,"nativeInput",function(){return this._multiline?J$e.area:J$e.input}),J$o(0,J$a,"prompt",function(){return this._prompt},function(J$a){!this._text&&J$a&&J$z.superSet(J$qa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?J$z.superSet(J$qa,this,"text",this._text==this._prompt?J$a:this._text):J$z.superSet(J$qa,this,"text",J$a),this._prompt=J$qa.langPacks&&J$qa.langPacks[J$a]?J$qa.langPacks[J$a]:J$a}),J$o(0,J$a,"focus",function(){return this._focus},function(J$a){var J$b=this.nativeInput;this._focus!==J$a&&(J$a?(J$b.target?J$b.target._focusOut():this._setInputMethod(),(J$b.target=this)._focusIn()):(J$b.target=null,this._focusOut(),J$O.document.body.scrollTop=0,J$b.blur(),J$J.isConchApp?J$b.setPos(-1e4,-1e4):J$e.inputContainer.contains(J$b)&&J$e.inputContainer.removeChild(J$b)))}),J$o(0,J$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(J$a){J$a?(-1<(J$a="[^"+J$a+"]").indexOf("^^")&&(J$a=J$a.replace("^^","")),this._restrictPattern=new RegExp(J$a,"g")):this._restrictPattern=null}),J$o(0,J$a,"editable",function(){return this._editable},function(J$a){this._editable=J$a,J$J.isConchApp&&J$e.input.setForbidEdit(!J$a)}),J$o(0,J$a,"promptColor",function(){return this._promptColor},function(J$a){this._promptColor=J$a,this._content||J$z.superSet(J$qa,this,"color",J$a)}),J$o(0,J$a,"type",function(){return this._type},function(J$a){this._getCSSStyle().password="password"==J$a,this._type=J$a,J$J.isConchApp&&this.nativeInput.setType(J$a)}),J$o(0,J$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(J$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),J$o(0,J$a,"asPassword",function(){return this._getCSSStyle().password},function(J$a){this._getCSSStyle().password=J$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),J$e.__init__=function(){J$e._createInputElement(),J$O.onMobile&&J$J.canvas.addEventListener(J$e.IOS_IFRAME?J$O.onMiniGame?"touchend":"click":"touchend",J$e._popupInputMethod)},J$e._popupInputMethod=function(J$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},J$e._createInputElement=function(){J$e._initInput(J$e.area=J$O.createElement("textarea")),J$e._initInput(J$e.input=J$O.createElement("input")),(J$e.inputContainer=J$O.createElement("div")).style.position="absolute",J$e.inputContainer.style.zIndex=1e5,J$O.container.appendChild(J$e.inputContainer),J$e.inputContainer.setPos=function(J$a,J$b){J$e.inputContainer.style.left=J$a+"px",J$e.inputContainer.style.top=J$b+"px"}},J$e._initInput=function(J$b){var J$a=J$b.style;J$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",J$a.resize="none",J$a.backgroundColor="transparent",J$a.border="none",J$a.outline="none",J$a.zIndex=1,J$b.addEventListener("input",J$e._processInputting),J$b.addEventListener("mousemove",J$e._stopEvent),J$b.addEventListener("mousedown",J$e._stopEvent),J$b.addEventListener("touchmove",J$e._stopEvent),J$b.setFontFace=function(J$a){J$b.style.fontFamily=J$a},J$J.isConchApp||(J$b.setColor=function(J$a){J$b.style.color=J$a},J$b.setFontSize=function(J$a){J$b.style.fontSize=J$a+"px"})},J$e._processInputting=function(J$a){var J$b=laya.display.Input.inputElement.target;if(J$b){var J$c=laya.display.Input.inputElement.value;J$b._restrictPattern&&(J$c=J$c.replace(/\u2006|\x27/g,""),J$b._restrictPattern.test(J$c)&&(J$c=J$c.replace(J$b._restrictPattern,""),laya.display.Input.inputElement.value=J$c)),J$b._text=J$c,J$b.event("input")}},J$e._stopEvent=function(J$a){"touchmove"==J$a.type&&J$a.preventDefault(),J$a.stopPropagation&&J$a.stopPropagation()},J$e.TYPE_TEXT="text",J$e.TYPE_PASSWORD="password",J$e.TYPE_EMAIL="email",J$e.TYPE_URL="url",J$e.TYPE_NUMBER="number",J$e.TYPE_RANGE="range",J$e.TYPE_DATE="date",J$e.TYPE_MONTH="month",J$e.TYPE_WEEK="week",J$e.TYPE_TIME="time",J$e.TYPE_DATE_TIME="datetime",J$e.TYPE_DATE_TIME_LOCAL="datetime-local",J$e.TYPE_SEARCH="search",J$e.input=null,J$e.area=null,J$e.inputElement=null,J$e.inputContainer=null,J$e.confirmButton=null,J$e.promptStyleDOM=null,J$e.inputHeight=45,J$e.isInputting=!1,J$e.stageMatrix=null,J$i(J$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=J$O.onIOS&&J$O.window.top!=J$O.window.self}]),J$e}(J$qa),J$ya=function(J$a){function J$c(J$a,J$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,J$c.__super.call(this),J$a&&this._init_(J$a,J$b)}J$k(J$c,"laya.resource.HTMLImage",J$ua);var J$b=J$c.prototype;return J$b._init_=function(J$a,J$b){this._src=J$a,this._source=new J$O.window.Image,J$b&&(J$b.onload&&(this.onload=J$b.onload),J$b.onerror&&(this.onerror=J$b.onerror),J$b.onCreate&&J$b.onCreate(this)),0!=J$a.indexOf("data:image")&&(this._source.crossOrigin=""),J$a&&(this._source.src=J$a)},J$b.recreateResource=function(){var J$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var J$b=this;this._source=new J$O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(J$b._needReleaseAgain)return J$b._needReleaseAgain=!1,J$b._source.onload=null,void(J$b._source=null);J$b._source.onload=null,J$b.memorySize=J$a._w*J$a._h*4,J$b._recreateLock=!1,J$b.completeCreate()},this._source.src=this._src}},J$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},J$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},J$o(0,J$b,"onload",null,function(J$a){var J$b=this;this._onload=J$a,this._source&&(this._source.onload=null!=this._onload?function(){J$b.onresize(),J$b._onload()}:null)}),J$o(0,J$b,"onerror",null,function(J$a){var J$b=this;this._onerror=J$a,this._source&&(this._source.onerror=null!=this._onerror?function(){J$b._onerror()}:null)}),J$o(0,J$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(J$a){this._enableMerageInAtlas=J$a,J$J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=J$a)}),J$c.create=function(J$a,J$b){return new J$c(J$a,J$b)},J$c}(),J$za=(function(J$f){function J$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,J$a.__super.call(this)}J$k(J$a,"laya.display.EffectAnimation",J$f);var J$b=J$a.prototype;J$b._onOtherBegin=function(J$a){J$a!=this&&this.stop()},J$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},J$b._onPlayAction=function(){this.play(0,!1)},J$b.play=function(J$a,J$b,J$c,J$d){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=!0),void 0===J$c&&(J$c=""),void 0===J$d&&(J$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,J$a,J$b,J$c,J$d))},J$b._recordInitData=function(){if(this._aniKeys){var J$a,J$b,J$c=0;for(J$a=this._aniKeys.length,J$c=0;J$c<J$a;J$c++)J$b=this._aniKeys[J$c],this._initData[J$b]=this._target[J$b]}},J$b._displayToIndex=function(J$a){if(this._animationData){J$a<0&&(J$a=0),J$a>this._count&&(J$a=this._count);var J$b=this._animationData.nodes,J$c=0,J$d=J$b.length;for(J$d=1<J$d?1:J$d,J$c=0;J$c<J$d;J$c++)this._displayNodeToFrame(J$b[J$c],J$a)}},J$b._displayNodeToFrame=function(J$a,J$b,J$c){if(this._target){var J$d;J$d=this._target;var J$e,J$f,J$g,J$h,J$i=J$a.frames,J$j=J$a.keys,J$k=0,J$l=J$j.length;J$h=J$a.secondFrames;var J$m,J$n,J$o,J$p,J$q=0;for(J$k=0;J$k<J$l;J$k++)J$f=J$i[J$e=J$j[J$k]],J$g=-1==(J$q=J$h[J$e])?this._initData[J$e]:J$b<J$q?(J$o=(J$n=J$a.keyframes[J$e])[0]).tween?(null==(J$m=J$U[J$o.tweenMethod])&&(J$m=J$U.linearNone),J$p=J$n[1],J$m(J$b,this._initData[J$e],J$p.value-this._initData[J$e],J$p.index)):this._initData[J$e]:J$f.length>J$b?J$f[J$b]:J$f[J$f.length-1],J$d[J$e]=J$g}},J$b._calculateNodeKeyFrames=function(J$a){J$f.prototype._calculateNodeKeyFrames.call(this,J$a);var J$b,J$c,J$d,J$e=J$a.keyframes;J$a.target;for(J$b in J$d={},J$a.secondFrames=J$d,J$e)(J$c=J$e[J$b]).length<=1?J$d[J$b]=-1:J$d[J$b]=J$c[1].index},J$o(0,J$b,"target",function(){return this._target},function(J$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=J$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),J$o(0,J$b,"playEvent",null,function(J$a){(this._playEvents=J$a)&&this.addEvent()}),J$o(0,J$b,"effectData",null,function(J$a){var J$b;J$a&&((J$b=J$a.animations)&&J$b[0]&&(this._setUp({},J$b[0]),J$b[0].nodes&&J$b[0].nodes[0]&&(this._aniKeys=J$b[0].nodes[0].keys)))}),J$o(0,J$b,"effectClass",null,function(J$a){var J$b,J$c;(this._effectClass=J$R.getClass(J$a),this._effectClass)&&((J$b=this._effectClass.uiView)&&(J$c=J$b.animations)&&J$c[0]&&(this._setUp({},J$c[0]),J$c[0].nodes&&J$c[0].nodes[0]&&(this._aniKeys=J$c[0].nodes[0].keys)))}),J$a.EffectAnimationBegin="effectanimationbegin"}(J$wa),function(J$b){var J$D;function J$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,J$E.__super.call(this)}J$k(J$E,"laya.utils.GraphicAnimation",J$b);var J$a=J$E.prototype;return J$a._parseNodeList=function(J$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[J$a.compId]=J$a.props,J$a.compId&&this._nodeList.push(J$a.compId);var J$b=J$a.child;if(J$b){var J$c=0,J$d=J$b.length;for(J$c=0;J$c<J$d;J$c++)this._parseNodeList(J$b[J$c])}},J$a._calGraphicData=function(J$a){var J$b;if(this._setUp(null,J$a),this._createGraphicData(),this._nodeIDAniDic)for(J$b in this._nodeIDAniDic)this._nodeIDAniDic[J$b]=null},J$a._createGraphicData=function(){var J$a,J$b=[],J$c=0,J$d=this.count,J$e=this._animationNewFrames;for(J$e||(J$e=[]),J$c=0;J$c<J$d;J$c++)!J$e[J$c]&&J$a||(J$a=this._createFrameGraphic(J$c)),J$b.push(J$a);this._gList=J$b},J$a._createFrameGraphic=function(J$a){var J$b=J$F.createGraphics();return J$E._rootMatrix||(J$E._rootMatrix=new J$G),this._updateNodeGraphic(this._rootNode,J$a,J$E._rootMatrix,J$b),J$b},J$a._updateNodeGraphic=function(J$a,J$b,J$c,J$d,J$e){var J$f;void 0===J$e&&(J$e=1);var J$g,J$h,J$i,J$j=(J$f=this._nodeGDic[J$a.compId]=this._getNodeGraphicData(J$a.compId,J$b,this._nodeGDic[J$a.compId])).alpha*J$e;if(!(J$j<.01)&&(J$f.resultTransform||(J$f.resultTransform=J$G.create()),J$g=J$f.resultTransform,J$G.mul(J$f.transform,J$c,J$g),J$f.skin&&(J$h=this._getTextureByUrl(J$f.skin))&&(J$g._checkTransform()?(J$d.drawTexture(J$h,0,0,J$f.width,J$f.height,J$g,J$j),J$f.resultTransform=null):J$d.drawTexture(J$h,J$g.tx,J$g.ty,J$f.width,J$f.height,null,J$j)),J$i=J$a.child)){var J$k,J$l=0;for(J$k=J$i.length,J$l=0;J$l<J$k;J$l++)this._updateNodeGraphic(J$i[J$l],J$b,J$g,J$d,J$j)}},J$a._updateNoChilds=function(J$a,J$b){if(J$a.skin){var J$c=this._getTextureByUrl(J$a.skin);if(J$c){var J$d=J$a.transform;J$d._checkTransform();!J$d.bTransform?J$b.drawTexture(J$c,J$d.tx,J$d.ty,J$a.width,J$a.height,null,J$a.alpha):J$b.drawTexture(J$c,0,0,J$a.width,J$a.height,J$d.clone(),J$a.alpha)}}},J$a._updateNodeGraphic2=function(J$a,J$b,J$c){var J$d;if(J$d=this._nodeGDic[J$a.compId]=this._getNodeGraphicData(J$a.compId,J$b,this._nodeGDic[J$a.compId]),J$a.child){var J$e=J$d.transform;J$e._checkTransform();var J$f,J$g;J$g=(J$f=!J$e.bTransform)&&(0!=J$e.tx||0!=J$e.ty);var J$h,J$i,J$j;if((J$h=J$e.bTransform||1!=J$d.alpha)&&J$c.save(),1!=J$d.alpha&&J$c.alpha(J$d.alpha),J$f?J$g&&J$c.translate(J$e.tx,J$e.ty):J$c.transform(J$e.clone()),J$i=J$a.child,J$d.skin&&(J$j=this._getTextureByUrl(J$d.skin))&&J$c.drawTexture(J$j,0,0,J$d.width,J$d.height),J$i){var J$k,J$l=0;for(J$k=J$i.length,J$l=0;J$l<J$k;J$l++)this._updateNodeGraphic2(J$i[J$l],J$b,J$c)}J$h?J$c.restore():J$f?J$g&&J$c.translate(-J$e.tx,-J$e.ty):J$c.transform(J$e.clone().invert())}else this._updateNoChilds(J$d,J$c)},J$a._calculateNodeKeyFrames=function(J$a){J$b.prototype._calculateNodeKeyFrames.call(this,J$a),this._nodeIDAniDic[J$a.target]=J$a},J$a.getNodeDataByID=function(J$a){return this._nodeIDAniDic[J$a]},J$a._getParams=function(J$a,J$b,J$c,J$d){var J$e=J$E._temParam;J$e.length=J$b.length;var J$f=0,J$g=J$b.length;for(J$f=0;J$f<J$g;J$f++)J$e[J$f]=this._getObjVar(J$a,J$b[J$f][0],J$c,J$b[J$f][1],J$d);return J$e},J$a._getObjVar=function(J$a,J$b,J$c,J$d,J$e){if(J$a.hasOwnProperty(J$b)){var J$f=J$a[J$b];if(J$c>=J$f.length&&(J$c=J$f.length-1),null!=J$a[J$b][J$c])return J$a[J$b][J$c]}return J$e.hasOwnProperty(J$b)?J$e[J$b]:J$d},J$a._getNodeGraphicData=function(J$a,J$b,J$c){J$c||(J$c=J$D.create()),J$c.transform?J$c.transform.identity():J$c.transform=J$G.create();var J$d=this.getNodeDataByID(J$a);if(!J$d)return J$c;var J$e,J$f,J$g=J$d.frames,J$h=this._getParams(J$g,J$E._drawTextureCmd,J$b,this._nodeDefaultProps[J$a]),J$i=J$h[0],J$j=NaN,J$k=NaN,J$l=J$h[5],J$m=J$h[6],J$n=J$h[13],J$o=J$h[14],J$p=J$h[7],J$q=J$h[8],J$r=J$h[9],J$u=J$h[11],J$v=J$h[12];J$j=J$h[3],J$k=J$h[4],0!=J$j&&0!=J$k||(J$i=null),-1==J$j&&(J$j=0),-1==J$k&&(J$k=0),J$c.skin=J$i,J$c.width=J$j,J$c.height=J$k,J$i&&((J$e=this._getTextureByUrl(J$i))?(J$j||(J$j=J$e.sourceWidth),J$k||(J$k=J$e.sourceHeight)):console.warn("lost skin:",J$i,",you may load pics first")),J$c.alpha=J$h[10],J$f=J$c.transform,0!=J$n&&(J$l=J$n*J$j),0!=J$o&&(J$m=J$o*J$k),0==J$l&&0==J$m||J$f.translate(-J$l,-J$m);var J$w=null;if(J$r||1!==J$p||1!==J$q||J$u||J$v){(J$w=J$E._tempMt).identity(),J$w.bTransform=!0;var J$x=.0174532922222222*(J$r-J$u),J$y=.0174532922222222*(J$r+J$v),J$z=Math.cos(J$y),J$A=Math.sin(J$y),J$B=Math.sin(J$x),J$C=Math.cos(J$x);J$w.a=J$p*J$z,J$w.b=J$p*J$A,J$w.c=-J$q*J$B,J$w.d=J$q*J$C,J$w.tx=J$w.ty=0}return J$w&&(J$f=J$G.mul(J$f,J$w,J$f)),J$f.translate(J$h[1],J$h[2]),J$c},J$a._getTextureByUrl=function(J$a){return J$ha.getRes(J$a)},J$a.setAniData=function(J$a,J$b){if(J$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=J$a,this._parseNodeList(J$a);var J$c,J$d={},J$e=[],J$f=J$a.animations,J$g=0,J$h=J$f.length;for(J$g=0;J$g<J$h;J$g++)if(J$c=J$f[J$g],this._labels=null,(!J$b||J$b==J$c.name)&&J$c){try{this._calGraphicData(J$c)}catch(J$a){console.warn("parse animation fail:"+J$c.name+",empty animation created"),this._gList=[]}var J$i={};J$i.interval=1e3/J$c.frameRate,J$i.frames=this._gList,J$i.labels=this._labels,J$i.name=J$c.name,J$e.push(J$i),J$d[J$c.name]=J$i}this.animationList=J$e,this.animationDic=J$d}J$E._temParam.length=0},J$a.parseByData=function(J$a){var J$b,J$c;J$b=J$a.nodeRoot,J$c=J$a.aniO,delete J$a.nodeRoot,delete J$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=J$b,this._parseNodeList(J$b),this._labels=null;try{this._calGraphicData(J$c)}catch(J$a){console.warn("parse animation fail:"+J$c.name+",empty animation created"),this._gList=[]}var J$d=J$a;return J$d.interval=1e3/J$c.frameRate,J$d.frames=this._gList,J$d.labels=this._labels,J$d.name=J$c.name,J$d},J$a.setUpAniData=function(J$a){if(J$a.animations){var J$b,J$c={},J$d=[],J$e=J$a.animations,J$f=0,J$g=J$e.length;for(J$f=0;J$f<J$g;J$f++)if(J$b=J$e[J$f]){var J$h={};J$h.name=J$b.name,J$h.aniO=J$b,J$h.nodeRoot=J$a,J$d.push(J$h),J$c[J$b.name]=J$h}this.animationList=J$d,this.animationDic=J$c}},J$a._clear=function(){var J$a,J$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(J$a in this._nodeGDic)(J$b=this._nodeGDic[J$a])&&J$b.recover();this._nodeGDic=null},J$E.parseAnimationByData=function(J$a){var J$b;return J$E._I||(J$E._I=new J$E),J$b=J$E._I.parseByData(J$a),J$E._I._clear(),J$b},J$E.parseAnimationData=function(J$a){var J$b;return J$E._I||(J$E._I=new J$E),J$E._I.setUpAniData(J$a),(J$b={}).animationList=J$E._I.animationList,J$b.animationDic=J$E._I.animationDic,J$E._I._clear(),J$b},J$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],J$E._temParam=[],J$E._I=null,J$E._rootMatrix=null,J$i(J$E,["_tempMt",function(){return this._tempMt=new J$G}]),J$E.__init$=function(){J$D=function(){function J$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return J$k(J$a,""),J$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),J$W.recover("GraphicNode",this)},J$a.create=function(){return J$W.getItemByClass("GraphicNode",J$a)},J$a}()},J$E}(J$wa));J$z.__init([J$j,J$ia,J$J,J$O,J$Y,J$C,J$a,J$za])}(window,document,Laya),function(J$a,J$b,J$c){J$c.un,J$c.uns,J$c.static;var J$d=J$c.class;J$c.getset,J$c.__newvec;new(function(){function J$a(){}return J$d(J$a,"LayaMain"),J$a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}}),function(J$c,J$a,J$y){J$y.un,J$y.uns;var J$g=J$y.static,J$m=J$y.class,J$d=J$y.getset,J$f=J$y.__newvec,J$k=laya.maths.Arith,J$l=laya.maths.Bezier,J$i=laya.resource.Bitmap,J$n=laya.utils.Browser,J$j=laya.utils.Byte,J$o=laya.utils.Color,J$z=(laya.filters.ColorFilter,J$y.Config),J$e=laya.resource.Context,J$A=(laya.events.Event,laya.filters.Filter),J$h=laya.display.Graphics,J$p=laya.resource.HTMLCanvas,J$q=(laya.utils.HTMLChar,laya.resource.HTMLImage),J$b=laya.resource.HTMLSubImage,J$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),J$C=laya.maths.Point,J$D=laya.maths.Rectangle,J$r=laya.renders.Render,J$u=(laya.renders.RenderContext,laya.renders.RenderSprite),J$v=laya.resource.Resource,J$w=laya.resource.ResourceManager,J$x=laya.utils.RunDriver,J$E=laya.display.Sprite,J$F=laya.display.Stage,J$G=laya.utils.Stat,J$H=laya.utils.StringKey,J$I=(laya.display.css.Style,laya.system.System),J$J=laya.display.Text,J$K=laya.resource.Texture,J$L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),J$M=laya.utils.VectorGraphManager;laya.utils.WordText;J$y.interface("laya.webgl.shapes.IShape"),J$y.interface("laya.webgl.submit.ISubmit"),J$y.interface("laya.webgl.text.ICharSegment"),J$y.interface("laya.webgl.canvas.save.ISaveData"),J$y.interface("laya.webgl.resource.IMergeAtlasBitmap"),J$y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var J$N=function(){function J$a(){}J$m(J$a,"laya.filters.webgl.FilterActionGL");var J$b=J$a.prototype;return J$y.imps(J$b,{"laya.filters.IFilterActionGL":!0}),J$b.setValue=function(J$a){},J$b.setValueMix=function(J$a){},J$b.apply3d=function(J$a,J$b,J$c,J$d,J$e){return null},J$b.apply=function(J$a){return null},J$d(0,J$b,"typeMix",function(){return 0}),J$a}(),J$O=function(){function J$a(){}return J$m(J$a,"laya.webgl.shader.ShaderValue"),J$a}(),J$P=function(){var J$d,J$e;function J$a(J$a,J$b,J$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new J$e,void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),this._cells=null,this._rowInfo=null,this._init(J$a,J$b),this._atlasID=J$c}J$m(J$a,"laya.webgl.atlas.AtlasGrid");var J$b=J$a.prototype;return J$b.getAltasID=function(){return this._atlasID},J$b.setAltasID=function(J$a){0<=J$a&&(this._atlasID=J$a)},J$b.addTex=function(J$a,J$b,J$c){var J$d=this._get(J$b,J$c);return 0==J$d.ret||(this._fill(J$d.x,J$d.y,J$b,J$c,J$a),this._texCount++),J$d},J$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},J$b._init=function(J$a,J$b){if(this._width=J$a,this._height=J$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=J$f(this._height);for(var J$c=0;J$c<this._height;J$c++)this._rowInfo[J$c]=new J$d;return this._clear(),!0},J$b._get=function(J$a,J$b){var J$c=new J$R;if(J$a>=this._failSize.width&&J$b>=this._failSize.height)return J$c;for(var J$d=-1,J$e=-1,J$f=this._width,J$g=this._height,J$h=this._cells,J$i=0;J$i<J$g;J$i++)if(!(this._rowInfo[J$i].spaceCount<J$a))for(var J$j=0;J$j<J$f;){var J$k=3*(J$i*J$f+J$j);if(0!=J$h[J$k]||J$h[1+J$k]<J$a||J$h[2+J$k]<J$b)J$j+=J$h[1+J$k];else{J$d=J$j,J$e=J$i;for(var J$l=0;J$l<J$a;J$l++)if(J$h[3*J$l+J$k+2]<J$b){J$d=-1;break}if(!(J$d<0))return J$c.ret=!0,J$c.x=J$d,J$c.y=J$e,J$c;J$j+=J$h[1+J$k]}}return J$c},J$b._fill=function(J$a,J$b,J$c,J$d,J$e){var J$f=this._width,J$g=this._height;this._check(J$a+J$c<=J$f&&J$b+J$d<=J$g);for(var J$h=J$b;J$h<J$d+J$b;++J$h){this._check(this._rowInfo[J$h].spaceCount>=J$c),this._rowInfo[J$h].spaceCount-=J$c;for(var J$i=0;J$i<J$c;J$i++){var J$j=3*(J$a+J$h*J$f+J$i);this._check(0==this._cells[J$j]),this._cells[J$j]=J$e,this._cells[1+J$j]=J$c,this._cells[2+J$j]=J$d}}if(0<J$a)for(J$h=0;J$h<J$d;++J$h){var J$k=0;for(J$i=J$a-1;0<=J$i&&0==this._cells[3*((J$b+J$h)*J$f+J$i)];--J$i,++J$k);for(J$i=J$k;0<J$i;--J$i)this._cells[3*((J$b+J$h)*J$f+J$a-J$i)+1]=J$i,this._check(0<J$i)}if(0<J$b)for(J$i=J$a;J$i<J$a+J$c;++J$i){for(J$k=0,J$h=J$b-1;0<=J$h&&0==this._cells[3*(J$i+J$h*J$f)];--J$h,J$k++);for(J$h=J$k;0<J$h;--J$h)this._cells[3*(J$i+(J$b-J$h)*J$f)+2]=J$h,this._check(0<J$h)}},J$b._check=function(J$a){0==J$a&&console.log("xtexMerger 错误啦")},J$b._clear=function(){for(var J$a=this._texCount=0;J$a<this._height;J$a++)this._rowInfo[J$a].spaceCount=this._width;for(var J$b=0;J$b<this._height;J$b++)for(var J$c=0;J$c<this._width;J$c++){var J$d=3*(J$b*this._width+J$c);this._cells[J$d]=0,this._cells[1+J$d]=this._width-J$c,this._cells[2+J$d]=this._width-J$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},J$a.__init$=function(){J$d=function(){function J$a(){this.spaceCount=0}return J$m(J$a,""),J$a}(),J$e=function(){function J$a(){this.width=0,this.height=0}return J$m(J$a,""),J$a}()},J$a}(),J$Q=function(){function J$r(J$a,J$b,J$c,J$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=J$a,this._height=J$b,this._gridSize=J$c,this._maxAtlaserCount=J$d,this._gridNumX=J$a/J$c,this._gridNumY=J$b/J$c,this._curAtlasIndex=0,this._atlaserArray=[]}J$m(J$r,"laya.webgl.atlas.AtlasResourceManager");var J$a=J$r.prototype;return J$a.setAtlasParam=function(J$a,J$b,J$c,J$d){if(1==this._setAtlasParam)return J$r._sid_=0,this._width=J$a,this._height=J$b,this._gridSize=J$c,this._maxAtlaserCount=J$d,this._gridNumX=J$a/J$c,this._gridNumY=J$b/J$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},J$a.pushData=function(J$a){var J$b,J$c=J$a.bitmap,J$d=-1,J$e=null,J$f=0,J$g=0;for(J$f=0,J$b=this._atlaserArray.length;J$f<J$b&&(J$g=(this._curAtlasIndex+J$f)%J$b,-1==(J$d=(J$e=this._atlaserArray[J$g]).findBitmapIsExist(J$c)));J$f++);if(-1!=J$d){var J$h=J$e.InAtlasWebGLImagesOffsetValue[J$d];return J$o=J$h[0],J$p=J$h[1],J$e.addToAtlas(J$a,J$o,J$p),!0}this._setAtlasParam=!1;for(var J$i=Math.ceil((J$a.bitmap.width+2)/this._gridSize),J$j=Math.ceil((J$a.bitmap.height+2)/this._gridSize),J$k=!1,J$l=0;J$l<2;J$l++){var J$m=this._maxAtlaserCount;for(J$f=0;J$f<J$m;J$f++){J$g=(this._curAtlasIndex+J$f)%J$m,this._atlaserArray.length-1>=J$g||this._atlaserArray.push(new J$Da(this._gridNumX,this._gridNumY,this._width,this._height,J$r._sid_++));var J$n=this._atlaserArray[J$g],J$o=0,J$p=0,J$q=J$n.addTex(1,J$i,J$j);if(J$q.ret){J$o=J$q.x*this._gridSize+1,J$p=J$q.y*this._gridSize+1,J$c.lock=!0,J$n.addToAtlasTexture(J$c,J$o,J$p),J$n.addToAtlas(J$a,J$o,J$p),J$k=!0,this._curAtlasIndex=J$g;break}}if(J$k)break;this._atlaserArray.push(new J$Da(this._gridNumX,this._gridNumY,this._width,this._height,J$r._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return J$k||console.log(">>>AtlasManager pushData error"),J$k},J$a.addToAtlas=function(J$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(J$a)},J$a.garbageCollection=function(){if(!0===this._needGC){for(var J$a=this._atlaserArray.length-this._maxAtlaserCount,J$b=0;J$b<J$a;J$b++)this._atlaserArray[J$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+J$a),this._atlaserArray.splice(0,J$a),this._needGC=!1}return!0},J$a.freeAll=function(){for(var J$a=0,J$b=this._atlaserArray.length;J$a<J$b;J$a++)this._atlaserArray[J$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},J$a.getAtlaserCount=function(){return this._atlaserArray.length},J$a.getAtlaserByIndex=function(J$a){return this._atlaserArray[J$a]},J$d(1,J$r,"instance",function(){return J$r._Instance||(J$r._Instance=new J$r(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),J$r._Instance}),J$d(1,J$r,"enabled",function(){return J$z.atlasEnable}),J$d(1,J$r,"atlasLimitWidth",function(){return J$r._atlasLimitWidth},function(J$a){J$r._atlasLimitWidth=J$a}),J$d(1,J$r,"atlasLimitHeight",function(){return J$r._atlasLimitHeight},function(J$a){J$r._atlasLimitHeight=J$a}),J$r._enable=function(){J$z.atlasEnable=!0},J$r._disable=function(){J$z.atlasEnable=!1},J$r.__init__=function(){J$r.atlasTextureWidth=2048,J$r.atlasTextureHeight=2048,J$r.maxTextureCount=6,J$r.atlasLimitWidth=512,J$r.atlasLimitHeight=512},J$r._atlasLimitWidth=0,J$r._atlasLimitHeight=0,J$r.gridSize=16,J$r.atlasTextureWidth=0,J$r.atlasTextureHeight=0,J$r.maxTextureCount=0,J$r._atlasRestore=0,J$r.BOARDER_TYPE_NO=0,J$r.BOARDER_TYPE_RIGHT=1,J$r.BOARDER_TYPE_LEFT=2,J$r.BOARDER_TYPE_BOTTOM=4,J$r.BOARDER_TYPE_TOP=8,J$r.BOARDER_TYPE_ALL=15,J$r._sid_=0,J$r._Instance=null,J$r}(),J$R=function(){function J$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return J$m(J$a,"laya.webgl.atlas.MergeFillInfo"),J$a}(),J$S=function(){function J$b(){}return J$m(J$b,"laya.webgl.canvas.BlendMode"),J$b._init_=function(J$a){J$b.fns=[J$b.BlendNormal,J$b.BlendAdd,J$b.BlendMultiply,J$b.BlendScreen,J$b.BlendOverlay,J$b.BlendLight,J$b.BlendMask,J$b.BlendDestinationOut],J$b.targetFns=[J$b.BlendNormalTarget,J$b.BlendAddTarget,J$b.BlendMultiplyTarget,J$b.BlendScreenTarget,J$b.BlendOverlayTarget,J$b.BlendLightTarget,J$b.BlendMask,J$b.BlendDestinationOut]},J$b.BlendNormal=function(J$a){J$a.blendFunc(1,771)},J$b.BlendAdd=function(J$a){J$a.blendFunc(1,772)},J$b.BlendMultiply=function(J$a){J$a.blendFunc(774,771)},J$b.BlendScreen=function(J$a){J$a.blendFunc(1,1)},J$b.BlendOverlay=function(J$a){J$a.blendFunc(1,769)},J$b.BlendLight=function(J$a){J$a.blendFunc(1,1)},J$b.BlendNormalTarget=function(J$a){J$a.blendFunc(1,771)},J$b.BlendAddTarget=function(J$a){J$a.blendFunc(1,772)},J$b.BlendMultiplyTarget=function(J$a){J$a.blendFunc(774,771)},J$b.BlendScreenTarget=function(J$a){J$a.blendFunc(1,1)},J$b.BlendOverlayTarget=function(J$a){J$a.blendFunc(1,769)},J$b.BlendLightTarget=function(J$a){J$a.blendFunc(1,1)},J$b.BlendMask=function(J$a){J$a.blendFunc(0,770)},J$b.BlendDestinationOut=function(J$a){J$a.blendFunc(0,0)},J$b.activeBlendFunction=null,J$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],J$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},J$b.NORMAL="normal",J$b.ADD="add",J$b.MULTIPLY="multiply",J$b.SCREEN="screen",J$b.LIGHT="light",J$b.OVERLAY="overlay",J$b.DESTINATIONOUT="destination-out",J$b.fns=[],J$b.targetFns=[],J$b}(),J$T=function(){function J$c(J$a){this._color=J$o.create("black"),this.setValue(J$a)}J$m(J$c,"laya.webgl.canvas.DrawStyle");var J$a=J$c.prototype;return J$a.setValue=function(J$a){if(J$a){if("string"==typeof J$a)return void(this._color=J$o.create(J$a));if(J$a instanceof laya.utils.Color)return void(this._color=J$a)}},J$a.reset=function(){this._color=J$o.create("black")},J$a.equal=function(J$a){return"string"==typeof J$a?this._color.strColor===J$a:J$a instanceof laya.utils.Color&&this._color.numColor===J$a.numColor},J$a.toColorStr=function(){return this._color.strColor},J$c.create=function(J$a){var J$b;if(J$a&&("string"==typeof J$a?J$b=J$o.create(J$a):J$a instanceof laya.utils.Color&&(J$b=J$a),J$b))return J$b._drawStyle||(J$b._drawStyle=new J$c(J$a));return laya.webgl.canvas.DrawStyle.DEFAULT},J$g(J$c,["DEFAULT",function(){return this.DEFAULT=new J$c("#000000")}]),J$c}(),J$U=function(){function J$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];J$wa.mainContext;this.ib=J$sa.create(35048),this.vb=J$ta.create(5)}J$m(J$a,"laya.webgl.canvas.Path");var J$b=J$a.prototype;return J$b.addPoint=function(J$a,J$b){this.tempArray.push(J$a,J$b)},J$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},J$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},J$b.polygon=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g;return this.geomatrys.push(this._curGeomatry=J$g=new J$Ha(J$a,J$b,J$c,J$d,J$e,J$f)),J$d||(J$g.fill=!1),null==J$f&&(J$g.borderWidth=0),J$g},J$b.setGeomtry=function(J$a){this.geomatrys.push(this._curGeomatry=J$a)},J$b.drawLine=function(J$a,J$b,J$c,J$d,J$e){var J$f;return this.closePath?this.geomatrys.push(this._curGeomatry=J$f=new J$Ga(J$a,J$b,J$c,J$d,J$e)):this.geomatrys.push(this._curGeomatry=J$f=new J$Fa(J$a,J$b,J$c,J$d,J$e)),J$f.fill=!1,J$f},J$b.update=function(){var J$a=this.ib._byteLength,J$b=this.geomatrys.length;this.offset=J$a;for(var J$c=this.geoStart;J$c<J$b;J$c++)this.geomatrys[J$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=J$b,this.count=(this.ib._byteLength-J$a)/J$pa.BYTES_PIDX},J$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},J$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},J$a}(),J$V=function(){function J$h(){}J$m(J$h,"laya.webgl.canvas.save.SaveBase");var J$a=J$h.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!1},J$a.restore=function(J$a){this._dataObj[this._valueName]=this._value,(J$h._cache[J$h._cache._length++]=this)._newSubmit&&(J$a._curSubmit=J$fa.RENDERBASE,J$a._renderKey=0)},J$h._createArray=function(){var J$a=[];return J$a._length=0,J$a},J$h._init=function(){var J$a=J$h._namemap={};return J$a[1]="ALPHA",J$a[2]="fillStyle",J$a[8]="font",J$a[256]="lineWidth",J$a[512]="strokeStyle",J$a[8192]="_mergeID",J$a[1024]=J$a[2048]=J$a[4096]=[],J$a[16384]="textBaseline",J$a[32768]="textAlign",J$a[65536]="_nBlendType",J$a[1048576]="shader",J$a[2097152]="filters",J$a},J$h.save=function(J$a,J$b,J$c,J$d){if((J$a._saveMark._saveuse&J$b)!==J$b){J$a._saveMark._saveuse|=J$b;var J$e=J$h._cache,J$f=0<J$e._length?J$e[--J$e._length]:new J$h;J$f._value=J$c[J$f._valueName=J$h._namemap[J$b]],J$f._dataObj=J$c,J$f._newSubmit=J$d;var J$g=J$a._save;J$g[J$g._length++]=J$f}},J$h._cache=laya.webgl.canvas.save.SaveBase._createArray(),J$h._namemap=J$h._init(),J$h}(),J$W=function(){function J$f(){this._clipRect=new J$D}J$m(J$f,"laya.webgl.canvas.save.SaveClipRect");var J$a=J$f.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!1},J$a.restore=function(J$a){J$a._clipRect=this._clipSaveRect,(J$f._cache[J$f._cache._length++]=this)._submitScissor.submitLength=J$a._submits._length-this._submitScissor.submitIndex,J$a._curSubmit=J$fa.RENDERBASE,J$a._renderKey=0},J$f.save=function(J$a,J$b){if(131072!=(131072&J$a._saveMark._saveuse)){J$a._saveMark._saveuse|=131072;var J$c=J$f._cache,J$d=0<J$c._length?J$c[--J$c._length]:new J$f;J$d._clipSaveRect=J$a._clipRect,J$a._clipRect=J$d._clipRect.copyFrom(J$a._clipRect),J$d._submitScissor=J$b;var J$e=J$a._save;J$e[J$e._length++]=J$d}},J$g(J$f,["_cache",function(){return this._cache=J$V._createArray()}]),J$f}(),J$X=function(){function J$n(){this._contextX=0,this._contextY=0,this._clipRect=new J$D,this._rect=new J$D,this._matrix=new J$B}J$m(J$n,"laya.webgl.canvas.save.SaveClipRectStencil");var J$a=J$n.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!1},J$a.restore=function(J$a){J$ka.restore(J$a,this._rect,this._saveMatrix,this._contextX,this._contextY),J$a._clipRect=this._clipSaveRect,J$a._curMat=this._saveMatrix,J$a._x=this._contextX,J$a._y=this._contextY,J$n._cache[J$n._cache._length++]=this,J$a._curSubmit=J$fa.RENDERBASE},J$n.save=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){if(262144!=(262144&J$a._saveMark._saveuse)){J$a._saveMark._saveuse|=262144;var J$k=J$n._cache,J$l=0<J$k._length?J$k[--J$k._length]:new J$n;J$l._clipSaveRect=J$a._clipRect,J$l._clipRect.setTo(J$g,J$h,J$i,J$j),J$a._clipRect=J$l._clipRect,J$l._rect.x=J$c,J$l._rect.y=J$d,J$l._rect.width=J$e,J$l._rect.height=J$f,J$l._contextX=J$a._x,J$l._contextY=J$a._y,J$l._saveMatrix=J$a._curMat,J$a._curMat.copyTo(J$l._matrix),J$a._curMat=J$l._matrix,J$l._submitStencil=J$b;var J$m=J$a._save;J$m[J$m._length++]=J$l}},J$g(J$n,["_cache",function(){return this._cache=J$V._createArray()}]),J$n}(),J$Y=function(){function J$d(){this._saveuse=0}J$m(J$d,"laya.webgl.canvas.save.SaveMark");var J$a=J$d.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!0},J$a.restore=function(J$a){J$a._saveMark=this._preSaveMark,J$d._no[J$d._no._length++]=this},J$d.Create=function(J$a){var J$b=J$d._no,J$c=0<J$b._length?J$b[--J$b._length]:new J$d;return J$c._saveuse=0,J$c._preSaveMark=J$a._saveMark,J$a._saveMark=J$c},J$g(J$d,["_no",function(){return this._no=J$V._createArray()}]),J$d}(),J$Z=function(){function J$f(){this._matrix=new J$B}J$m(J$f,"laya.webgl.canvas.save.SaveTransform");var J$a=J$f.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!1},J$a.restore=function(J$a){J$a._curMat=this._savematrix,J$f._no[J$f._no._length++]=this},J$f.save=function(J$a){var J$b=J$a._saveMark;if(2048!=(2048&J$b._saveuse)){J$b._saveuse|=2048;var J$c=J$f._no,J$d=0<J$c._length?J$c[--J$c._length]:new J$f;J$d._savematrix=J$a._curMat,J$a._curMat=J$a._curMat.copyTo(J$d._matrix);var J$e=J$a._save;J$e[J$e._length++]=J$d}},J$g(J$f,["_no",function(){return this._no=J$V._createArray()}]),J$f}(),J$$=function(){function J$e(){}J$m(J$e,"laya.webgl.canvas.save.SaveTranslate");var J$a=J$e.prototype;return J$y.imps(J$a,{"laya.webgl.canvas.save.ISaveData":!0}),J$a.isSaveMark=function(){return!1},J$a.restore=function(J$a){J$a._curMat;J$a._x=this._x,J$a._y=this._y,J$e._no[J$e._no._length++]=this},J$e.save=function(J$a){var J$b=J$e._no,J$c=0<J$b._length?J$b[--J$b._length]:new J$e;J$c._x=J$a._x,J$c._y=J$a._y;var J$d=J$a._save;J$d[J$d._length++]=J$c},J$g(J$e,["_no",function(){return this._no=J$V._createArray()}]),J$e}(),J$_=function(){function J$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new J$D}J$m(J$a,"laya.webgl.resource.RenderTargetMAX");var J$b=J$a.prototype;return J$b.setSP=function(J$a){this._sp=J$a},J$b.size=function(J$a,J$b){var J$c=this;this._width!==J$a||this._height!==J$b?(this.repaint=!0,this._width=J$a,this._height=J$b,this.target?this.target.size(J$a,J$b):this.target=J$Ma.create(J$a,J$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(J$a){J$y.timer.callLater(J$c._sp,J$c._sp.repaint)})):this.target.size(J$a,J$b)},J$b._flushToTarget=function(J$a,J$b){if(!J$b._destroy){var J$c=J$ua.worldScissorTest,J$d=J$ua.worldClipRect;J$ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,J$ua.worldScissorTest=!1,J$wa.mainContext.disable(3089);var J$e=J$ua.worldAlpha,J$f=J$ua.worldMatrix4,J$g=J$ua.worldMatrix,J$h=J$ua.worldFilters,J$i=J$ua.worldShaderDefines;if(J$ua.worldMatrix=J$B.EMPTY,J$ua.restoreTempArray(),J$ua.worldMatrix4=J$ua.TEMPMAT4_ARRAY,J$ua.worldAlpha=1,J$ua.worldFilters=null,J$ua.worldShaderDefines=null,J$La.activeShader=null,J$b.start(),J$z.showCanvasMark?J$b.clear(0,1,0,.3):J$b.clear(0,0,0,0),J$a.flush(),J$b.end(),J$La.activeShader=null,J$ua.worldAlpha=J$e,J$ua.worldMatrix4=J$f,J$ua.worldMatrix=J$g,J$ua.worldFilters=J$h,J$ua.worldShaderDefines=J$i,J$ua.worldScissorTest=J$c){var J$j=J$ua.height-J$d.y-J$d.height;J$wa.mainContext.scissor(J$d.x,J$j,J$d.width,J$d.height),J$wa.mainContext.enable(3089)}J$ua.worldClipRect=J$d}},J$b.flush=function(J$a){this.repaint&&(this._flushToTarget(J$a,this.target),this.repaint=!1)},J$b.drawTo=function(J$a,J$b,J$c,J$d,J$e){J$a.drawTexture(this.target.getTexture(),J$b,J$c,J$d,J$e,0,0)},J$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},J$a}(),J$s=function(){function J$a(){this.ALPHA=1,this.shaderType=0,this.defines=new J$Ea}return J$m(J$a,"laya.webgl.shader.d2.Shader2D"),J$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},J$a.__init__=function(){var J$a,J$b;J$Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),J$Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),J$Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),J$Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),J$Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),J$Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),J$Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),J$Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),J$a="attribute vec4 position;\n",J$a+="attribute vec2 texcoord;\n",J$a+="uniform vec2 size;\n\n",J$a+="#ifdef WORLDMAT\n",J$a+="  uniform mat4 mmat;\n",J$a+="#endif\n",J$a+="varying vec2 v_texcoord;\n",J$a+="void main() {\n",J$a+="  #ifdef WORLDMAT\n",J$a+="  vec4 pos=mmat*position;\n",J$a+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",J$a+="  #else\n",J$a+="  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",J$a+="  #endif\n\n",J$a+="  v_texcoord = texcoord;\n",J$a+="}",J$b="precision mediump float;\n",J$b+="varying vec2 v_texcoord;\n",J$b+="uniform sampler2D texture;\n\n",J$b+="#ifdef COLORMUL\n",J$b+="  uniform vec4 colorMul;\n",J$b+="#endif\n\n",J$b+="#ifdef TXTALPHA\n",J$b+="  uniform sampler2D texture1;\n",J$b+="#endif\n\n",J$b+="uniform float alpha;\n",J$b+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',J$b+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',J$b+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',J$b+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',J$b+="void main() {\n",J$b+="   vec4 color= texture2D(texture, v_texcoord);\n\n",J$b+="   #ifdef TXTCOMPRESS\n",J$b+="      color.rgb *= color.a;\n",J$b+="   #endif\n\n",J$b+="   #ifdef TXTALPHA\n",J$b+="      color.rgba *= texture2D(texture1, v_texcoord).a;\n",J$b+="   #endif\n\n",J$b+="   color.a*=alpha;\n",J$b+="   color.rgb*=alpha;\n",J$b+="   #ifdef COLORMUL\n",J$b+="      color.rgba *= colorMul;\n",J$b+="   #endif\n\n",J$b+="   gl_FragColor=color;\n",J$b+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',J$b+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',J$b+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',J$b+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',J$b+="}",J$Ya.preCompile2D(0,1,J$a,J$b,null),J$a="attribute vec4 position;\n",J$a+="uniform vec2 size;\n",J$a+="uniform mat4 mmat;\n",J$a+="void main() {\n",J$a+="  vec4 pos=mmat*position;\n",J$a+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",J$a+="}",J$b="precision mediump float;\n",J$b+="uniform vec4 color;\n",J$b+="uniform float alpha;\n",J$b+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',J$b+="void main() {\n",J$b+="\t vec4 a = vec4(color.r, color.g, color.b, color.a);\n",J$b+="\t a.w = alpha;\n",J$b+="\t a.xyz *= alpha;\n",J$b+="\t gl_FragColor = a;\n",J$b+='\t #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',J$b+="}",J$Ya.preCompile2D(0,2,J$a,J$b,null),J$a="attribute vec4 position;\n",J$a+="attribute vec3 a_color;\n",J$a+="uniform mat4 mmat;\n",J$a+="uniform mat4 u_mmat2;\n",J$a+="uniform vec2 u_pos;\n",J$a+="uniform vec2 size;\n",J$a+="varying vec3 color;\n",J$a+="void main(){\n",J$a+="  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n",J$a+="  vec4 pos=mmat*u_mmat2*tPos;\n",J$a+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",J$a+="  color=a_color;\n",J$a+="}",J$b="precision mediump float;\n",J$b+="varying vec3 color;\n",J$b+="uniform float alpha;\n",J$b+="void main(){\n",J$b+="  gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n",J$b+="\t gl_FragColor.rgb*=alpha;\n",J$b+="}",J$Ya.preCompile2D(0,4,J$a,J$b,null),J$a="attribute vec4 position;\n",J$a+="attribute vec2 texcoord;\n",J$a+="uniform vec2 size;\n\n",J$a+="#ifdef WORLDMAT\n",J$a+="  uniform mat4 mmat;\n",J$a+="#endif\n",J$a+="varying vec2 v_texcoord;\n",J$a+="void main() {\n",J$a+="  #ifdef WORLDMAT\n",J$a+="    vec4 pos=mmat*position;\n",J$a+="    gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",J$a+="  #else\n",J$a+="    gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",J$a+="  #endif\n\n",J$a+="  v_texcoord = texcoord;\n",J$a+="}",J$b="#ifdef FSHIGHPRECISION\n",J$b+="   precision highp float;\n",J$b+="#else\n",J$b+="   precision mediump float;\n",J$b+="#endif\n",J$b+="varying vec2 v_texcoord;\n",J$b+="uniform sampler2D texture;\n\n",J$b+="#ifdef TXTALPHA\n",J$b+="   uniform sampler2D texture1;\n",J$b+="#endif\n\n",J$b+="uniform float alpha;\n",J$b+="uniform vec4 u_TexRange;\n",J$b+="uniform vec2 u_offset;\n",J$b+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',J$b+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',J$b+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',J$b+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',J$b+="void main() {\n",J$b+="   vec2 newTexCoord;\n",J$b+="   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n",J$b+="   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n",J$b+="   vec4 color= texture2D(texture, newTexCoord);\n\n",J$b+="   #ifdef TXTALPHA\n",J$b+="      color.a = texture2D(texture1, newTexCoord).a;\n",J$b+="   #endif\n\n",J$b+="   color.a*=alpha;\n",J$b+="   gl_FragColor=color;\n",J$b+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',J$b+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',J$b+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',J$b+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',J$b+="}",J$Ya.preCompile2D(0,256,J$a,J$b,null),J$a="attribute vec2 position;\n",J$a+="attribute vec2 texcoord;\n",J$a+="attribute vec4 color;\n",J$a+="uniform vec2 size;\n",J$a+="uniform float offsetX;\n",J$a+="uniform float offsetY;\n",J$a+="uniform mat4 mmat;\n",J$a+="uniform mat4 u_mmat2;\n",J$a+="varying vec2 v_texcoord;\n",J$a+="varying vec4 v_color;\n",J$a+="void main() {\n",J$a+="  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n",J$a+="  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",J$a+="  v_color = color;\n",J$a+="  v_color.rgb *= v_color.a;\n",J$a+="  v_texcoord = texcoord;  \n",J$a+="}",J$b="precision mediump float;\n",J$b+="varying vec2 v_texcoord;\n",J$b+="varying vec4 v_color;\n",J$b+="uniform sampler2D texture;\n\n",J$b+="#ifdef TXTALPHA\n",J$b+="  uniform sampler2D texture1;\n",J$b+="#endif\n\n",J$b+="uniform float alpha;\n",J$b+="void main() {\n",J$b+="\t vec4 t_color = texture2D(texture, v_texcoord);\n\n",J$b+="  #ifdef TXTALPHA\n",J$b+="    t_color.a = texture2D(texture1, v_texcoord).a;\n",J$b+="  #endif\n\n",J$b+="\t gl_FragColor = t_color.rgba * v_color;\n",J$b+="\t gl_FragColor *= alpha;\n",J$b+="}",J$Ya.preCompile2D(0,512,J$a,J$b,null)},J$a}(),J$t=function(){function J$b(J$a,J$b,J$c){this._value=0,this._name2int=J$a,this._int2name=J$b,this._int2nameMap=J$c}J$m(J$b,"laya.webgl.shader.ShaderDefines");var J$a=J$b.prototype;return J$a.add=function(J$a){return"string"==typeof J$a&&(J$a=this._name2int[J$a]),this._value|=J$a,this._value},J$a.addInt=function(J$a){return this._value|=J$a,this._value},J$a.remove=function(J$a){return"string"==typeof J$a&&(J$a=this._name2int[J$a]),this._value&=~J$a,this._value},J$a.isDefine=function(J$a){return(this._value&J$a)===J$a},J$a.getValue=function(){return this._value},J$a.setValue=function(J$a){this._value=J$a},J$a.toNameDic=function(){var J$a=this._int2nameMap[this._value];return J$a||J$b._toText(this._value,this._int2name,this._int2nameMap)},J$b._reg=function(J$a,J$b,J$c,J$d){J$d[J$c[J$a]=J$b]=J$a},J$b._toText=function(J$a,J$b,J$c){var J$d=J$c[J$a];if(J$d)return J$d;for(var J$e={},J$f=1,J$g=0;J$g<32&&!(J$a<(J$f=1<<J$g));J$g++)if(J$a&J$f){var J$h=J$b[J$f];J$h&&(J$e[J$h]="")}return J$c[J$a]=J$e},J$b._toInt=function(J$a,J$b){for(var J$c=J$a.split("."),J$d=0,J$e=0,J$f=J$c.length;J$e<J$f;J$e++){var J$g=J$b[J$c[J$e]];if(!J$g)throw new Error("Defines to int err:"+J$a+"/"+J$c[J$e]);J$d|=J$g}return J$d},J$b}(),J$aa=function(){function J$g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new J$B}J$m(J$g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var J$a=J$g.prototype;return J$a.init=function(J$a,J$b,J$c){if(J$b)this._vs=J$b;else{this._vs=[];var J$d=J$a.width,J$e=J$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(J$d,0,1,0,1,1,1,1),this._vs.push(J$d,J$e,1,1,1,1,1,1),this._vs.push(0,J$e,0,1,1,1,1,1)}J$c?this._ps=J$c:(J$g._defaultPS||(J$g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=J$g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=J$a},J$a.init2=function(J$a,J$b,J$c,J$d,J$e){this.transform&&(this.transform=null),J$c?this._ps=J$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=J$d,this._uvs=J$e,this.mEleNum=this._ps.length,this.mTexture=J$a,(J$r.isConchNode||J$r.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},J$a._initMyData=function(){var J$a=0,J$b=0,J$c=4*this._verticles.length;this._vs=J$g._tempVS;var J$d=!1;if(J$r.isConchNode||J$r.isConchApp?(this._vs.length=J$c,J$d=!0):this._vs.length<J$c&&(this._vs.length=J$c,J$d=!0),J$g._tVSLen=J$c,J$d)for(;J$a<J$c;)this._vs[J$a]=this._verticles[J$b],this._vs[J$a+1]=this._verticles[J$b+1],this._vs[J$a+2]=this._uvs[J$b],this._vs[J$a+3]=this._uvs[J$b+1],this._vs[J$a+4]=1,this._vs[J$a+5]=1,this._vs[J$a+6]=1,this._vs[J$a+7]=1,J$a+=8,J$b+=2;else for(;J$a<J$c;)this._vs[J$a]=this._verticles[J$b],this._vs[J$a+1]=this._verticles[J$b+1],this._vs[J$a+2]=this._uvs[J$b],this._vs[J$a+3]=this._uvs[J$b+1],J$a+=8,J$b+=2},J$a.getData2=function(J$a,J$b,J$c){var J$d;this.mVBBuffer=J$a,this.mIBBuffer=J$b,this._initMyData(),J$a.appendEx2(this._vs,Float32Array,J$g._tVSLen,4),this._indexStart=J$b._byteLength,(J$d=J$g._tempIB).length<this._ps.length&&(J$d.length=this._ps.length);for(var J$e=0,J$f=this._ps.length;J$e<J$f;J$e++)J$d[J$e]=this._ps[J$e]+J$c;J$b.appendEx2(J$d,Uint16Array,this._ps.length,2)},J$a.getData=function(J$a,J$b,J$c){if(this.mVBBuffer=J$a,this.mIBBuffer=J$b,J$a.append(this.mVBData),this._indexStart=J$b._byteLength,this.mIBData.start!=J$c){for(var J$d=0,J$e=this._ps.length;J$d<J$e;J$d++)this.mIBData[J$d]=this._ps[J$d]+J$c;this.mIBData.start=J$c}J$b.append(this.mIBData)},J$a.render=function(J$a,J$b,J$c){if(J$r.isWebGL&&this.mTexture){J$a._renderKey=0,J$a._shader2D.glTexture=null,J$ba.getInstance().addSkinMesh(this);var J$d=J$fa.createShape(J$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,J$Aa.create(512,0));this.transform||(this.transform=J$B.EMPTY),this.transform.translate(J$b,J$c),J$B.mul(this.transform,J$a._curMat,this._tempMatrix),this.transform.translate(-J$b,-J$c);var J$e=J$d.shaderValue,J$f=J$e.u_mmat2||J$ua.getMatrArray();J$ua.mat2MatArray(this._tempMatrix,J$f),J$e.textureHost=this.mTexture,J$e.offsetX=0,J$e.offsetY=0,J$e.u_mmat2=J$f,J$e.ALPHA=J$a._shader2D.ALPHA,J$a._submits[J$a._submits._length++]=J$d}else J$r.isConchApp&&this.mTexture&&(this.transform||(this.transform=J$B.EMPTY),J$a.setSkinMesh&&J$a.setSkinMesh(J$b,J$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},J$g._tempVS=[],J$g._tempIB=[],J$g._defaultPS=null,J$g._tVSLen=0,J$g}(),J$ba=function(){function J$a(){this.ib=null,this.vb=null;J$wa.mainContext;this.ib=J$sa.create(35048),this.vb=J$ta.create(8)}J$m(J$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var J$b=J$a.prototype;return J$b.addSkinMesh=function(J$a){J$a.getData2(this.vb,this.ib,this.vb._byteLength/32)},J$b.reset=function(){this.vb.clear(),this.ib.clear()},J$a.getInstance=function(){return J$a.instance=J$a.instance||new J$a},J$a.instance=null,J$a}(),J$ca=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===J$i&&(J$i=0),this.x=J$a,this.y=J$b,this.width=J$c,this.height=J$d,this.edges=J$e,this.color=J$f,this.borderWidth=J$g,this.borderColor=J$h}J$m(J$a,"laya.webgl.shapes.BasePoly");var J$b=J$a.prototype;return J$y.imps(J$b,{"laya.webgl.shapes.IShape":!0}),J$b.getData=function(J$a,J$b,J$c){},J$b.rebuild=function(J$a){},J$b.setMatrix=function(J$a){},J$b.needUpdate=function(J$a){return!0},J$b.sector=function(J$a,J$b,J$c){var J$d=this.x,J$e=this.y,J$f=this.edges,J$g=(this.r1-this.r0)/J$f,J$h=this.width,J$i=this.height,J$j=this.color,J$k=(J$j>>16&255)/255,J$l=(J$j>>8&255)/255,J$m=(255&J$j)/255;J$a.push(J$d,J$e,J$k,J$l,J$m);for(var J$n=0;J$n<J$f+1;J$n++)J$a.push(J$d+Math.sin(J$g*J$n+this.r0)*J$h,J$e+Math.cos(J$g*J$n+this.r0)*J$i),J$a.push(J$k,J$l,J$m);for(J$n=0;J$n<J$f;J$n++)J$b.push(J$c,J$c+J$n+1,J$c+J$n+2)},J$b.createLine2=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h,J$i,J$j,J$k,J$l,J$m,J$n,J$o,J$p,J$q,J$r,J$u,J$v,J$w,J$x,J$y,J$z,J$A,J$B,J$C=J$a.concat(),J$D=J$e,J$E=this.borderColor,J$F=(J$E>>16&255)/255,J$G=(J$E>>8&255)/255,J$H=(255&J$E)/255,J$I=J$C.length/2,J$J=J$d,J$K=J$c/2;J$i=J$C[0],J$j=J$C[1],J$p=J$i-(J$k=J$C[2]),J$o=(J$o=-(J$j-(J$l=J$C[3])))/(J$B=Math.sqrt(J$o*J$o+J$p*J$p))*J$K,J$p=J$p/J$B*J$K,J$D.push(J$i-J$o+this.x,J$j-J$p+this.y,J$F,J$G,J$H,J$i+J$o+this.x,J$j+J$p+this.y,J$F,J$G,J$H);for(var J$L=1;J$L<J$I-1;J$L++)J$i=J$C[2*(J$L-1)],J$j=J$C[2*(J$L-1)+1],J$k=J$C[2*J$L],J$l=J$C[2*J$L+1],J$m=J$C[2*(J$L+1)],J$n=J$C[2*(J$L+1)+1],J$p=J$i-J$k,J$r=J$k-J$m,J$w=(-(J$o=(J$o=-(J$j-J$l))/(J$B=Math.sqrt(J$o*J$o+J$p*J$p))*J$K)+J$i)*(-(J$p=J$p/J$B*J$K)+J$l)-(-J$o+J$k)*(-J$p+J$j),J$z=(-(J$q=(J$q=-(J$l-J$n))/(J$B=Math.sqrt(J$q*J$q+J$r*J$r))*J$K)+J$m)*(-(J$r=J$r/J$B*J$K)+J$l)-(-J$q+J$k)*(-J$r+J$n),J$A=(J$u=-J$p+J$j-(-J$p+J$l))*(J$y=-J$q+J$k-(-J$q+J$m))-(J$x=-J$r+J$n-(-J$r+J$l))*(J$v=-J$o+J$k-(-J$o+J$i)),Math.abs(J$A)<.1?(J$A+=10.1,J$D.push(J$k-J$o+this.x,J$l-J$p+this.y,J$F,J$G,J$H,J$k+J$o+this.x,J$l+J$p+this.y,J$F,J$G,J$H)):(((J$g=(J$v*J$z-J$y*J$w)/J$A)-J$k)*(J$g-J$k)+((J$h=(J$x*J$w-J$u*J$z)/J$A)-J$l)+(J$h-J$l),J$D.push(J$g+this.x,J$h+this.y,J$F,J$G,J$H,J$k-(J$g-J$k)+this.x,J$l-(J$h-J$l)+this.y,J$F,J$G,J$H));J$i=J$C[J$C.length-4],J$j=J$C[J$C.length-3],J$p=J$i-(J$k=J$C[J$C.length-2]),J$o=(J$o=-(J$j-(J$l=J$C[J$C.length-1])))/(J$B=Math.sqrt(J$o*J$o+J$p*J$p))*J$K,J$p=J$p/J$B*J$K,J$D.push(J$k-J$o+this.x,J$l-J$p+this.y,J$F,J$G,J$H,J$k+J$o+this.x,J$l+J$p+this.y,J$F,J$G,J$H);var J$M=J$f;for(J$L=1;J$L<J$M;J$L++)J$b.push(J$J+2*(J$L-1),J$J+2*(J$L-1)+1,J$J+2*J$L+1,J$J+2*J$L+1,J$J+2*J$L,J$J+2*(J$L-1));return J$D},J$b.createLine=function(J$a,J$b,J$c,J$d){var J$e=J$a.concat(),J$f=J$a,J$g=this.borderColor,J$h=(J$g>>16&255)/255,J$i=(J$g>>8&255)/255,J$j=(255&J$g)/255;J$e.splice(0,5);var J$k,J$l,J$m,J$n,J$o,J$p,J$q,J$r,J$u,J$v,J$w,J$x,J$y,J$z,J$A,J$B,J$C,J$D,J$E,J$F,J$G=J$e.length/5,J$H=J$d,J$I=J$c/2;J$m=J$e[0],J$n=J$e[1],J$v=J$m-(J$o=J$e[5]),J$u=(J$u=-(J$n-(J$p=J$e[6])))/(J$F=Math.sqrt(J$u*J$u+J$v*J$v))*J$I,J$v=J$v/J$F*J$I,J$f.push(J$m-J$u,J$n-J$v,J$h,J$i,J$j,J$m+J$u,J$n+J$v,J$h,J$i,J$j);for(var J$J=1;J$J<J$G-1;J$J++)J$m=J$e[5*(J$J-1)],J$n=J$e[5*(J$J-1)+1],J$o=J$e[5*J$J],J$p=J$e[5*J$J+1],J$q=J$e[5*(J$J+1)],J$r=J$e[5*(J$J+1)+1],J$v=J$m-J$o,J$x=J$o-J$q,J$A=(-(J$u=(J$u=-(J$n-J$p))/(J$F=Math.sqrt(J$u*J$u+J$v*J$v))*J$I)+J$m)*(-(J$v=J$v/J$F*J$I)+J$p)-(-J$u+J$o)*(-J$v+J$n),J$D=(-(J$w=(J$w=-(J$p-J$r))/(J$F=Math.sqrt(J$w*J$w+J$x*J$x))*J$I)+J$q)*(-(J$x=J$x/J$F*J$I)+J$p)-(-J$w+J$o)*(-J$x+J$r),J$E=(J$y=-J$v+J$n-(-J$v+J$p))*(J$C=-J$w+J$o-(-J$w+J$q))-(J$B=-J$x+J$r-(-J$x+J$p))*(J$z=-J$u+J$o-(-J$u+J$m)),Math.abs(J$E)<.1?(J$E+=10.1,J$f.push(J$o-J$u,J$p-J$v,J$h,J$i,J$j,J$o+J$u,J$p+J$v,J$h,J$i,J$j)):(((J$k=(J$z*J$D-J$C*J$A)/J$E)-J$o)*(J$k-J$o)+((J$l=(J$B*J$A-J$y*J$D)/J$E)-J$p)+(J$l-J$p),J$f.push(J$k,J$l,J$h,J$i,J$j,J$o-(J$k-J$o),J$p-(J$l-J$p),J$h,J$i,J$j));J$m=J$e[J$e.length-10],J$n=J$e[J$e.length-9],J$v=J$m-(J$o=J$e[J$e.length-5]),J$u=(J$u=-(J$n-(J$p=J$e[J$e.length-4])))/(J$F=Math.sqrt(J$u*J$u+J$v*J$v))*J$I,J$v=J$v/J$F*J$I,J$f.push(J$o-J$u,J$p-J$v,J$h,J$i,J$j,J$o+J$u,J$p+J$v,J$h,J$i,J$j);var J$K=this.edges+1;for(J$J=1;J$J<J$K;J$J++)J$b.push(J$H+2*(J$J-1),J$H+2*(J$J-1)+1,J$H+2*J$J+1,J$H+2*J$J+1,J$H+2*J$J,J$H+2*(J$J-1));return J$f},J$b.createLoopLine=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$a.concat(),J$h=J$e||J$a,J$i=this.borderColor,J$j=(J$i>>16&255)/255,J$k=(J$i>>8&255)/255,J$l=(255&J$i)/255;J$g.splice(0,5);var J$m=[J$g[0],J$g[1]],J$n=[J$g[J$g.length-5],J$g[J$g.length-4]],J$o=J$n[0]+.5*(J$m[0]-J$n[0]),J$p=J$n[1]+.5*(J$m[1]-J$n[1]);J$g.unshift(J$o,J$p,0,0,0),J$g.push(J$o,J$p,0,0,0);var J$q,J$r,J$u,J$v,J$w,J$x,J$y,J$z,J$A,J$B,J$C,J$D,J$E,J$F,J$G,J$H,J$I,J$J,J$K,J$L,J$M=J$g.length/5,J$N=J$d,J$O=J$c/2;J$u=J$g[0],J$v=J$g[1],J$B=J$u-(J$w=J$g[5]),J$A=(J$A=-(J$v-(J$x=J$g[6])))/(J$L=Math.sqrt(J$A*J$A+J$B*J$B))*J$O,J$B=J$B/J$L*J$O,J$h.push(J$u-J$A,J$v-J$B,J$j,J$k,J$l,J$u+J$A,J$v+J$B,J$j,J$k,J$l);for(var J$P=1;J$P<J$M-1;J$P++)J$u=J$g[5*(J$P-1)],J$v=J$g[5*(J$P-1)+1],J$w=J$g[5*J$P],J$x=J$g[5*J$P+1],J$y=J$g[5*(J$P+1)],J$z=J$g[5*(J$P+1)+1],J$B=J$u-J$w,J$D=J$w-J$y,J$G=(-(J$A=(J$A=-(J$v-J$x))/(J$L=Math.sqrt(J$A*J$A+J$B*J$B))*J$O)+J$u)*(-(J$B=J$B/J$L*J$O)+J$x)-(-J$A+J$w)*(-J$B+J$v),J$J=(-(J$C=(J$C=-(J$x-J$z))/(J$L=Math.sqrt(J$C*J$C+J$D*J$D))*J$O)+J$y)*(-(J$D=J$D/J$L*J$O)+J$x)-(-J$C+J$w)*(-J$D+J$z),J$K=(J$E=-J$B+J$v-(-J$B+J$x))*(J$I=-J$C+J$w-(-J$C+J$y))-(J$H=-J$D+J$z-(-J$D+J$x))*(J$F=-J$A+J$w-(-J$A+J$u)),Math.abs(J$K)<.1?(J$K+=10.1,J$h.push(J$w-J$A,J$x-J$B,J$j,J$k,J$l,J$w+J$A,J$x+J$B,J$j,J$k,J$l)):(((J$q=(J$F*J$J-J$I*J$G)/J$K)-J$w)*(J$q-J$w)+((J$r=(J$H*J$G-J$E*J$J)/J$K)-J$x)+(J$r-J$x),J$h.push(J$q,J$r,J$j,J$k,J$l,J$w-(J$q-J$w),J$x-(J$r-J$x),J$j,J$k,J$l));J$f&&(J$b=J$f);var J$Q=this.edges+1;for(J$P=1;J$P<J$Q;J$P++)J$b.push(J$N+2*(J$P-1),J$N+2*(J$P-1)+1,J$N+2*J$P+1,J$N+2*J$P+1,J$N+2*J$P,J$N+2*(J$P-1));return J$b.push(J$N+2*(J$P-1),J$N+2*(J$P-1)+1,J$N+1,J$N+1,J$N,J$N+2*(J$P-1)),J$h},J$a}(),J$da=function(){function J$p(){}return J$m(J$p,"laya.webgl.shapes.Earcut"),J$p.earcut=function(J$a,J$b,J$c){J$c=J$c||2;var J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k=J$b&&J$b.length,J$l=J$k?J$b[0]*J$c:J$a.length,J$m=J$p.linkedList(J$a,0,J$l,J$c,!0),J$n=[];if(!J$m)return J$n;if(J$k&&(J$m=J$p.eliminateHoles(J$a,J$b,J$m,J$c)),J$a.length>80*J$c){J$d=J$f=J$a[0],J$e=J$g=J$a[1];for(var J$o=J$c;J$o<J$l;J$o+=J$c)(J$h=J$a[J$o])<J$d&&(J$d=J$h),(J$i=J$a[J$o+1])<J$e&&(J$e=J$i),J$f<J$h&&(J$f=J$h),J$g<J$i&&(J$g=J$i);J$j=0!==(J$j=Math.max(J$f-J$d,J$g-J$e))?1/J$j:0}return J$p.earcutLinked(J$m,J$n,J$c,J$d,J$e,J$j),J$n},J$p.linkedList=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g;if(J$e===0<J$p.signedArea(J$a,J$b,J$c,J$d))for(J$f=J$b;J$f<J$c;J$f+=J$d)J$g=J$p.insertNode(J$f,J$a[J$f],J$a[J$f+1],J$g);else for(J$f=J$c-J$d;J$b<=J$f;J$f-=J$d)J$g=J$p.insertNode(J$f,J$a[J$f],J$a[J$f+1],J$g);return J$g&&J$p.equals(J$g,J$g.next)&&(J$p.removeNode(J$g),J$g=J$g.next),J$g},J$p.filterPoints=function(J$a,J$b){if(!J$a)return J$a;J$b||(J$b=J$a);var J$c,J$d=J$a;do{if(J$c=!1,J$d.steiner||!J$p.equals(J$d,J$d.next)&&0!==J$p.area(J$d.prev,J$d,J$d.next))J$d=J$d.next;else{if(J$p.removeNode(J$d),(J$d=J$b=J$d.prev)===J$d.next)break;J$c=!0}}while(J$c||J$d!==J$b);return J$b},J$p.earcutLinked=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(J$a){!J$g&&J$f&&J$p.indexCurve(J$a,J$d,J$e,J$f);for(var J$h,J$i,J$j=J$a;J$a.prev!==J$a.next;)if(J$h=J$a.prev,J$i=J$a.next,J$f?J$p.isEarHashed(J$a,J$d,J$e,J$f):J$p.isEar(J$a))J$b.push(J$h.i/J$c),J$b.push(J$a.i/J$c),J$b.push(J$i.i/J$c),J$p.removeNode(J$a),J$a=J$i.next,J$j=J$i.next;else if((J$a=J$i)===J$j){J$g?1===J$g?(J$a=J$p.cureLocalIntersections(J$a,J$b,J$c),J$p.earcutLinked(J$a,J$b,J$c,J$d,J$e,J$f,2)):2===J$g&&J$p.splitEarcut(J$a,J$b,J$c,J$d,J$e,J$f):J$p.earcutLinked(J$p.filterPoints(J$a,null),J$b,J$c,J$d,J$e,J$f,1);break}}},J$p.isEar=function(J$a){var J$b=J$a.prev,J$c=J$a,J$d=J$a.next;if(0<=J$p.area(J$b,J$c,J$d))return!1;for(var J$e=J$a.next.next;J$e!==J$a.prev;){if(J$p.pointInTriangle(J$b.x,J$b.y,J$c.x,J$c.y,J$d.x,J$d.y,J$e.x,J$e.y)&&0<=J$p.area(J$e.prev,J$e,J$e.next))return!1;J$e=J$e.next}return!0},J$p.isEarHashed=function(J$a,J$b,J$c,J$d){var J$e=J$a.prev,J$f=J$a,J$g=J$a.next;if(0<=J$p.area(J$e,J$f,J$g))return!1;for(var J$h=J$e.x<J$f.x?J$e.x<J$g.x?J$e.x:J$g.x:J$f.x<J$g.x?J$f.x:J$g.x,J$i=J$e.y<J$f.y?J$e.y<J$g.y?J$e.y:J$g.y:J$f.y<J$g.y?J$f.y:J$g.y,J$j=J$e.x>J$f.x?J$e.x>J$g.x?J$e.x:J$g.x:J$f.x>J$g.x?J$f.x:J$g.x,J$k=J$e.y>J$f.y?J$e.y>J$g.y?J$e.y:J$g.y:J$f.y>J$g.y?J$f.y:J$g.y,J$l=J$p.zOrder(J$h,J$i,J$b,J$c,J$d),J$m=J$p.zOrder(J$j,J$k,J$b,J$c,J$d),J$n=J$a.nextZ;J$n&&J$n.z<=J$m;){if(J$n!==J$a.prev&&J$n!==J$a.next&&J$p.pointInTriangle(J$e.x,J$e.y,J$f.x,J$f.y,J$g.x,J$g.y,J$n.x,J$n.y)&&0<=J$p.area(J$n.prev,J$n,J$n.next))return!1;J$n=J$n.nextZ}for(J$n=J$a.prevZ;J$n&&J$n.z>=J$l;){if(J$n!==J$a.prev&&J$n!==J$a.next&&J$p.pointInTriangle(J$e.x,J$e.y,J$f.x,J$f.y,J$g.x,J$g.y,J$n.x,J$n.y)&&0<=J$p.area(J$n.prev,J$n,J$n.next))return!1;J$n=J$n.prevZ}return!0},J$p.cureLocalIntersections=function(J$a,J$b,J$c){var J$d=J$a;do{var J$e=J$d.prev,J$f=J$d.next.next;!J$p.equals(J$e,J$f)&&J$p.intersects(J$e,J$d,J$d.next,J$f)&&J$p.locallyInside(J$e,J$f)&&J$p.locallyInside(J$f,J$e)&&(J$b.push(J$e.i/J$c),J$b.push(J$d.i/J$c),J$b.push(J$f.i/J$c),J$p.removeNode(J$d),J$p.removeNode(J$d.next),J$d=J$a=J$f),J$d=J$d.next}while(J$d!==J$a);return J$d},J$p.splitEarcut=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$a;do{for(var J$h=J$g.next.next;J$h!==J$g.prev;){if(J$g.i!==J$h.i&&J$p.isValidDiagonal(J$g,J$h)){var J$i=J$p.splitPolygon(J$g,J$h);return J$g=J$p.filterPoints(J$g,J$g.next),J$i=J$p.filterPoints(J$i,J$i.next),J$p.earcutLinked(J$g,J$b,J$c,J$d,J$e,J$f),void J$p.earcutLinked(J$i,J$b,J$c,J$d,J$e,J$f)}J$h=J$h.next}J$g=J$g.next}while(J$g!==J$a)},J$p.eliminateHoles=function(J$a,J$b,J$c,J$d){var J$e,J$f,J$g,J$h,J$i,J$j=[];for(J$e=0,J$f=J$b.length;J$e<J$f;J$e++)J$g=J$b[J$e]*J$d,J$h=J$e<J$f-1?J$b[J$e+1]*J$d:J$a.length,(J$i=J$p.linkedList(J$a,J$g,J$h,J$d,!1))===J$i.next&&(J$i.steiner=!0),J$j.push(J$p.getLeftmost(J$i));for(J$j.sort(J$p.compareX),J$e=0;J$e<J$j.length;J$e++)J$p.eliminateHole(J$j[J$e],J$c),J$c=J$p.filterPoints(J$c,J$c.next);return J$c},J$p.compareX=function(J$a,J$b){return J$a.x-J$b.x},J$p.eliminateHole=function(J$a,J$b){if(J$b=J$p.findHoleBridge(J$a,J$b)){var J$c=J$p.splitPolygon(J$b,J$a);J$p.filterPoints(J$c,J$c.next)}},J$p.findHoleBridge=function(J$a,J$b){var J$c,J$d=J$b,J$e=J$a.x,J$f=J$a.y,J$g=-1/0;do{if(J$f<=J$d.y&&J$f>=J$d.next.y&&J$d.next.y!==J$d.y){var J$h=J$d.x+(J$f-J$d.y)*(J$d.next.x-J$d.x)/(J$d.next.y-J$d.y);if(J$h<=J$e&&J$g<J$h){if((J$g=J$h)===J$e){if(J$f===J$d.y)return J$d;if(J$f===J$d.next.y)return J$d.next}J$c=J$d.x<J$d.next.x?J$d:J$d.next}}J$d=J$d.next}while(J$d!==J$b);if(!J$c)return null;if(J$e===J$g)return J$c.prev;var J$i,J$j=J$c,J$k=J$c.x,J$l=J$c.y,J$m=1/0;for(J$d=J$c.next;J$d!==J$j;)J$e>=J$d.x&&J$d.x>=J$k&&J$e!==J$d.x&&J$p.pointInTriangle(J$f<J$l?J$e:J$g,J$f,J$k,J$l,J$f<J$l?J$g:J$e,J$f,J$d.x,J$d.y)&&((J$i=Math.abs(J$f-J$d.y)/(J$e-J$d.x))<J$m||J$i===J$m&&J$d.x>J$c.x)&&J$p.locallyInside(J$d,J$a)&&(J$c=J$d,J$m=J$i),J$d=J$d.next;return J$c},J$p.indexCurve=function(J$a,J$b,J$c,J$d){for(var J$e=J$a;null===J$e.z&&(J$e.z=J$p.zOrder(J$e.x,J$e.y,J$b,J$c,J$d)),J$e.prevZ=J$e.prev,J$e.nextZ=J$e.next,(J$e=J$e.next)!==J$a;);J$e.prevZ.nextZ=null,J$e.prevZ=null,J$p.sortLinked(J$e)},J$p.sortLinked=function(J$a){var J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j=1;do{for(J$c=J$a,J$f=J$a=null,J$g=0;J$c;){for(J$g++,J$d=J$c,J$b=J$h=0;J$b<J$j&&(J$h++,J$d=J$d.nextZ);J$b++);for(J$i=J$j;0<J$h||0<J$i&&J$d;)0!==J$h&&(0===J$i||!J$d||J$c.z<=J$d.z)?(J$c=(J$e=J$c).nextZ,J$h--):(J$d=(J$e=J$d).nextZ,J$i--),J$f?J$f.nextZ=J$e:J$a=J$e,J$e.prevZ=J$f,J$f=J$e;J$c=J$d}J$f.nextZ=null,J$j*=2}while(1<J$g);return J$a},J$p.zOrder=function(J$a,J$b,J$c,J$d,J$e){return(J$a=1431655765&((J$a=858993459&((J$a=252645135&((J$a=16711935&((J$a=32767*(J$a-J$c)*J$e)|J$a<<8))|J$a<<4))|J$a<<2))|J$a<<1))|(J$b=1431655765&((J$b=858993459&((J$b=252645135&((J$b=16711935&((J$b=32767*(J$b-J$d)*J$e)|J$b<<8))|J$b<<4))|J$b<<2))|J$b<<1))<<1},J$p.getLeftmost=function(J$a){for(var J$b=J$a,J$c=J$a;J$b.x<J$c.x&&(J$c=J$b),(J$b=J$b.next)!==J$a;);return J$c},J$p.pointInTriangle=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){return 0<=(J$e-J$g)*(J$b-J$h)-(J$a-J$g)*(J$f-J$h)&&0<=(J$a-J$g)*(J$d-J$h)-(J$c-J$g)*(J$b-J$h)&&0<=(J$c-J$g)*(J$f-J$h)-(J$e-J$g)*(J$d-J$h)},J$p.isValidDiagonal=function(J$a,J$b){return J$a.next.i!==J$b.i&&J$a.prev.i!==J$b.i&&!J$p.intersectsPolygon(J$a,J$b)&&J$p.locallyInside(J$a,J$b)&&J$p.locallyInside(J$b,J$a)&&J$p.middleInside(J$a,J$b)},J$p.area=function(J$a,J$b,J$c){return(J$b.y-J$a.y)*(J$c.x-J$b.x)-(J$b.x-J$a.x)*(J$c.y-J$b.y)},J$p.equals=function(J$a,J$b){return J$a.x===J$b.x&&J$a.y===J$b.y},J$p.intersects=function(J$a,J$b,J$c,J$d){return!!(J$p.equals(J$a,J$b)&&J$p.equals(J$c,J$d)||J$p.equals(J$a,J$d)&&J$p.equals(J$c,J$b))||0<J$p.area(J$a,J$b,J$c)!=0<J$p.area(J$a,J$b,J$d)&&0<J$p.area(J$c,J$d,J$a)!=0<J$p.area(J$c,J$d,J$b)},J$p.intersectsPolygon=function(J$a,J$b){var J$c=J$a;do{if(J$c.i!==J$a.i&&J$c.next.i!==J$a.i&&J$c.i!==J$b.i&&J$c.next.i!==J$b.i&&J$p.intersects(J$c,J$c.next,J$a,J$b))return!0;J$c=J$c.next}while(J$c!==J$a);return!1},J$p.locallyInside=function(J$a,J$b){return J$p.area(J$a.prev,J$a,J$a.next)<0?0<=J$p.area(J$a,J$b,J$a.next)&&0<=J$p.area(J$a,J$a.prev,J$b):J$p.area(J$a,J$b,J$a.prev)<0||J$p.area(J$a,J$a.next,J$b)<0},J$p.middleInside=function(J$a,J$b){for(var J$c=J$a,J$d=!1,J$e=(J$a.x+J$b.x)/2,J$f=(J$a.y+J$b.y)/2;J$c.y>J$f!=J$c.next.y>J$f&&J$c.next.y!==J$c.y&&J$e<(J$c.next.x-J$c.x)*(J$f-J$c.y)/(J$c.next.y-J$c.y)+J$c.x&&(J$d=!J$d),(J$c=J$c.next)!==J$a;);return J$d},J$p.splitPolygon=function(J$a,J$b){var J$c=new J$ea(J$a.i,J$a.x,J$a.y),J$d=new J$ea(J$b.i,J$b.x,J$b.y),J$e=J$a.next,J$f=J$b.prev;return(J$a.next=J$b).prev=J$a,(J$c.next=J$e).prev=J$c,(J$d.next=J$c).prev=J$d,(J$f.next=J$d).prev=J$f,J$d},J$p.insertNode=function(J$a,J$b,J$c,J$d){var J$e=new J$ea(J$a,J$b,J$c);return J$d?(J$e.next=J$d.next,(J$e.prev=J$d).next.prev=J$e,J$d.next=J$e):(J$e.prev=J$e).next=J$e,J$e},J$p.removeNode=function(J$a){J$a.next.prev=J$a.prev,J$a.prev.next=J$a.next,J$a.prevZ&&(J$a.prevZ.nextZ=J$a.nextZ),J$a.nextZ&&(J$a.nextZ.prevZ=J$a.prevZ)},J$p.signedArea=function(J$a,J$b,J$c,J$d){for(var J$e=0,J$f=J$b,J$g=J$c-J$d;J$f<J$c;J$f+=J$d)J$e+=(J$a[J$g]-J$a[J$f])*(J$a[J$f+1]+J$a[J$g+1]),J$g=J$f;return J$e},J$p}(),J$ea=function(){function J$a(J$a,J$b,J$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=J$a,this.x=J$b,this.y=J$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return J$m(J$a,"laya.webgl.shapes.EarcutNode"),J$a}(),J$fa=(function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this.lineWidth=J$a,this.lineColor=J$b,this.lineAlpha=J$c,this.fillColor=J$d,this.fillAlpha=J$e,this.shape=J$g,this.fill=J$f}J$m(J$a,"laya.webgl.shapes.GeometryData");var J$b=J$a.prototype;J$b.clone=function(){return new J$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},J$b.getIndexData=function(){return null},J$b.getVertexData=function(){return null},J$b.destroy=function(){this.shape=null}}(),function(){function J$a(J$a){if(J$a instanceof Float32Array)this.points=J$a;else if(J$a instanceof Array){J$a.length;this.points=new Float32Array(J$a)}}J$m(J$a,"laya.webgl.shapes.Vertex");var J$b=J$a.prototype;J$y.imps(J$b,{"laya.webgl.shapes.IShape":!0}),J$b.getData=function(J$a,J$b,J$c){},J$b.needUpdate=function(J$a){return!1},J$b.rebuild=function(J$a){},J$b.setMatrix=function(J$a){}}(),function(){function J$i(J$a){void 0===J$a&&(J$a=1e4),this._renderType=J$a}J$m(J$i,"laya.webgl.submit.Submit");var J$a=J$i.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a.releaseRender=function(){var J$a=J$i._cache;(J$a[J$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J$a.getRenderType=function(){return this._renderType},J$a.renderSubmit=function(){if(0===this._numEle)return 1;var J$a=this.shaderValue.textureHost;if(J$a){var J$b=J$a.source;if(!J$a.bitmap||!J$b)return 1;this.shaderValue.texture=J$b,J$a.alphaTexture&&J$a.alphaTexture.source&&(this.shaderValue.texture1=J$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var J$c=J$wa.mainContext;return this.shaderValue.upload(),J$S.activeBlendFunction!==this._blendFn&&(J$c.enable(3042),this._blendFn(J$c),J$S.activeBlendFunction=this._blendFn),J$G.drawCall++,J$G.trianglesFaces+=this._numEle/3,J$c.drawElements(4,this._numEle,5123,this._startIdx),1},J$i.__init__=function(){var J$a=J$i.RENDERBASE=new J$i(-1);J$a.shaderValue=new J$Aa(0,0),J$a.shaderValue.ALPHA=-1234},J$i.createSubmit=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$i._cache._length?J$i._cache[--J$i._cache._length]:new J$i;null==J$c&&((J$c=J$f._selfVb||(J$f._selfVb=J$ta.create(-1))).clear(),J$d=0),J$f._ib=J$b,J$f._vb=J$c,J$f._startIdx=J$d*J$pa.BYTES_PIDX,J$f._numEle=0;var J$g=J$a._nBlendType;J$f._blendFn=J$a._targets?J$S.targetFns[J$g]:J$S.fns[J$g],J$f.shaderValue=J$e,J$f.shaderValue.setValue(J$a._shader2D);var J$h=J$a._shader2D.filters;return J$h&&J$f.shaderValue.setFilters(J$h),J$f},J$i.createShape=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$i._cache._length?J$i._cache[--J$i._cache._length]:new J$i;J$g._ib=J$b,J$g._vb=J$c,J$g._numEle=J$d,J$g._startIdx=J$e,J$g.shaderValue=J$f,J$g.shaderValue.setValue(J$a._shader2D);var J$h=J$a._nBlendType;return J$g._blendFn=J$a._targets?J$S.targetFns[J$h]:J$S.fns[J$h],J$g},J$i.TYPE_2D=1e4,J$i.TYPE_CANVAS=10003,J$i.TYPE_CMDSETRT=10004,J$i.TYPE_CUSTOM=10005,J$i.TYPE_BLURRT=10006,J$i.TYPE_CMDDESTORYPRERT=10007,J$i.TYPE_DISABLESTENCIL=10008,J$i.TYPE_OTHERIBVB=10009,J$i.TYPE_PRIMITIVE=10010,J$i.TYPE_RT=10011,J$i.TYPE_BLUR_RT=10012,J$i.TYPE_TARGET=10013,J$i.TYPE_CHANGE_VALUE=10014,J$i.TYPE_SHAPE=10015,J$i.TYPE_TEXTURE=10016,J$i.TYPE_FILLTEXTURE=10017,J$i.RENDERBASE=null,J$i._cache=((J$i._cache=[])._length=0,J$i._cache),J$i}()),J$ga=function(){function J$d(){this.fun=null,this.args=null}J$m(J$d,"laya.webgl.submit.SubmitCMD");var J$a=J$d.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a.renderSubmit=function(){return this.fun.apply(null,this.args),1},J$a.getRenderType=function(){return 0},J$a.releaseRender=function(){var J$a=J$d._cache;J$a[J$a._length++]=this},J$d.create=function(J$a,J$b){var J$c=J$d._cache._length?J$d._cache[--J$d._cache._length]:new J$d;return J$c.fun=J$b,J$c.args=J$a,J$c},J$d._cache=((J$d._cache=[])._length=0,J$d._cache),J$d}(),J$ha=function(){function J$b(){this.variables={}}J$m(J$b,"laya.webgl.submit.SubmitCMDScope");var J$a=J$b.prototype;return J$a.getValue=function(J$a){return this.variables[J$a]},J$a.addValue=function(J$a,J$b){return this.variables[J$a]=J$b},J$a.setValue=function(J$a,J$b){return this.variables.hasOwnProperty(J$a)?this.variables[J$a]=J$b:null},J$a.clear=function(){for(var J$a in this.variables)delete this.variables[J$a]},J$a.recycle=function(){this.clear(),J$b.POOL.push(this)},J$b.create=function(){var J$a=J$b.POOL.pop();return J$a||(J$a=new J$b),J$a},J$b.POOL=[],J$b}(),J$ia=function(){function J$l(){this.offset=0,this.startIndex=0,this._mat=J$B.create()}J$m(J$l,"laya.webgl.submit.SubmitOtherIBVB");var J$a=J$l.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a.releaseRender=function(){var J$a=J$l._cache;(J$a[J$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J$a.getRenderType=function(){return 10009},J$a.renderSubmit=function(){var J$a=this._shaderValue.textureHost;if(J$a){var J$b=J$a.source;if(!J$a.bitmap||!J$b)return 1;this._shaderValue.texture=J$b}this._vb.bind_upload(this._ib);var J$c=J$ua.worldMatrix4,J$d=J$B.TEMP;J$B.mulPre(this._mat,J$c[0],J$c[1],J$c[4],J$c[5],J$c[12],J$c[13],J$d);var J$e=J$ua.worldMatrix4=J$l.tempMatrix4;J$e[0]=J$d.a,J$e[1]=J$d.b,J$e[4]=J$d.c,J$e[5]=J$d.d,J$e[12]=J$d.tx,J$e[13]=J$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var J$f=J$wa.mainContext;return J$S.activeBlendFunction!==this._blendFn&&(J$f.enable(3042),this._blendFn(J$f),J$S.activeBlendFunction=this._blendFn),J$G.drawCall++,J$G.trianglesFaces+=this._numEle/3,J$f.drawElements(4,this._numEle,5123,this.startIndex),J$ua.worldMatrix4=J$c,J$La.activeShader=null,1},J$l.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){void 0===J$i&&(J$i=0);var J$j=J$l._cache._length?J$l._cache[--J$l._cache._length]:new J$l;J$j._ib=J$c,J$j._vb=J$b,J$j._numEle=J$d,J$j._shader=J$e,J$j._shaderValue=J$f;var J$k=J$a._nBlendType;switch(J$j._blendFn=J$a._targets?J$S.targetFns[J$k]:J$S.fns[J$k],J$i){case 0:J$j.offset=0,J$j.startIndex=J$h/(J$pa.BYTES_PE*J$b.vertexStride)*1.5,J$j.startIndex*=J$pa.BYTES_PIDX;break;case 1:J$j.startIndex=J$g,J$j.offset=J$h}return J$j},J$l._cache=((J$l._cache=[])._length=0,J$l._cache),J$l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J$l}(),J$ja=function(){function J$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new J$D,this.screenRect=new J$D}J$m(J$c,"laya.webgl.submit.SubmitScissor");var J$a=J$c.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a._scissor=function(J$a,J$b,J$c,J$d){var J$e=J$ua.worldMatrix4,J$f=J$e[0],J$g=J$e[5],J$h=J$e[12],J$i=J$e[13];if(J$d*=J$g,(J$c*=J$f)<1||J$d<1)return!1;var J$j=(J$a=J$a*J$f+J$h)+J$c,J$k=(J$b=J$b*J$g+J$i)+J$d;J$a<0&&(J$c=J$j-(J$a=0)),J$b<0&&(J$d=J$k-(J$b=0));var J$l=J$ua.worldClipRect;if(J$a=Math.max(J$a,J$l.x),J$b=Math.max(J$b,J$l.y),J$c=Math.min(J$j,J$l.right)-J$a,J$d=Math.min(J$k,J$l.bottom)-J$b,J$c<1||J$d<1)return!1;var J$m=J$ua.worldScissorTest;return this.screenRect.copyFrom(J$l),J$l.x=J$a,J$l.y=J$b,J$l.width=J$c,J$l.height=J$d,J$ua.worldScissorTest=!0,J$b=J$ua.height-J$b-J$d,J$wa.mainContext.scissor(J$a,J$b,J$c,J$d),J$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),J$m?(J$b=J$ua.height-this.screenRect.y-this.screenRect.height,J$wa.mainContext.scissor(this.screenRect.x,J$b,this.screenRect.width,this.screenRect.height),J$wa.mainContext.enable(3089)):(J$wa.mainContext.disable(3089),J$ua.worldScissorTest=!1),J$l.copyFrom(this.screenRect),!0},J$a._scissorWithTagart=function(J$a,J$b,J$c,J$d){if(J$c<1||J$d<1)return!1;var J$e=J$a+J$c,J$f=J$b+J$d;J$a<0&&(J$c=J$e-(J$a=0)),J$b<0&&(J$d=J$f-(J$b=0));var J$g=J$ua.worldClipRect;if(J$a=Math.max(J$a,J$g.x),J$b=Math.max(J$b,J$g.y),J$c=Math.min(J$e,J$g.right)-J$a,J$d=Math.min(J$f,J$g.bottom)-J$b,J$c<1||J$d<1)return!1;var J$h=J$ua.worldScissorTest;return this.screenRect.copyFrom(J$g),J$ua.worldScissorTest=!0,J$g.x=J$a,J$g.y=J$b,J$g.width=J$c,J$g.height=J$d,J$b=J$ua.height-J$b-J$d,J$wa.mainContext.scissor(J$a,J$b,J$c,J$d),J$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),J$h?(J$b=J$ua.height-this.screenRect.y-this.screenRect.height,J$wa.mainContext.scissor(this.screenRect.x,J$b,this.screenRect.width,this.screenRect.height),J$wa.mainContext.enable(3089)):(J$wa.mainContext.disable(3089),J$ua.worldScissorTest=!1),J$g.copyFrom(this.screenRect),!0},J$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},J$a.getRenderType=function(){return 0},J$a.releaseRender=function(){var J$a=J$c._cache;(J$a[J$a._length++]=this).context=null},J$c.create=function(J$a){var J$b=J$c._cache._length?J$c._cache[--J$c._cache._length]:new J$c;return J$b.context=J$a,J$b},J$c._cache=((J$c._cache=[])._length=0,J$c._cache),J$c}(),J$ka=function(){function J$i(){this.step=0,this.blendMode=null,this.level=0}J$m(J$i,"laya.webgl.submit.SubmitStencil");var J$a=J$i.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},J$a.getRenderType=function(){return 0},J$a.releaseRender=function(){var J$a=J$i._cache;J$a[J$a._length++]=this},J$a.do1=function(){var J$a=J$wa.mainContext;J$a.enable(2960),J$a.clear(1024),J$a.colorMask(!1,!1,!1,!1),J$a.stencilFunc(514,this.level,255),J$a.stencilOp(7680,7680,7682)},J$a.do2=function(){var J$a=J$wa.mainContext;J$a.stencilFunc(514,this.level+1,255),J$a.colorMask(!0,!0,!0,!0),J$a.stencilOp(7680,7680,7680)},J$a.do3=function(){var J$a=J$wa.mainContext;J$a.colorMask(!0,!0,!0,!0),J$a.stencilOp(7680,7680,7680),J$a.clear(1024),J$a.disable(2960)},J$a.do4=function(){var J$a=J$wa.mainContext;0==this.level&&(J$a.enable(2960),J$a.clear(1024)),J$a.colorMask(!1,!1,!1,!1),J$a.stencilFunc(519,0,255),J$a.stencilOp(7680,7680,7682)},J$a.do5=function(){var J$a=J$wa.mainContext;J$a.stencilFunc(514,this.level,255),J$a.colorMask(!0,!0,!0,!0),J$a.stencilOp(7680,7680,7680)},J$a.do6=function(){var J$a=J$wa.mainContext;J$S.targetFns[J$S.TOINT[this.blendMode]](J$a)},J$a.do7=function(){var J$a=J$wa.mainContext;J$a.colorMask(!1,!1,!1,!1),J$a.stencilOp(7680,7680,7683)},J$a.do8=function(){var J$a=J$wa.mainContext;J$a.colorMask(!0,!0,!0,!0),J$a.stencilFunc(514,this.level,255),J$a.stencilOp(7680,7680,7680)},J$i.restore=function(J$a,J$b,J$c,J$d,J$e){var J$f;if((J$a._renderKey=0)<J$i._mask&&J$i._mask--,0==J$i._mask)J$f=laya.webgl.submit.SubmitStencil.create(3),J$a.addRenderObject(J$f),J$a._curSubmit=J$fa.RENDERBASE;else{J$f=laya.webgl.submit.SubmitStencil.create(7),J$a.addRenderObject(J$f);var J$g=J$a._vb;J$g._byteLength;if(J$qa.fillRectImgVb(J$g,null,J$b.x,J$b.y,J$b.width,J$b.height,J$K.DEF_UV,J$c,J$d,J$e,0,0)){J$a._shader2D.glTexture=null;var J$h=J$a._curSubmit=J$fa.createSubmit(J$a,J$a._ib,J$g,(J$g._byteLength-64)/32*3,J$Aa.create(2,0));J$h.shaderValue.ALPHA=1,J$a._submits[J$a._submits._length++]=J$h,J$a._curSubmit._numEle+=6,J$a._curSubmit=J$fa.RENDERBASE}else alert("clipRect calc stencil rect error");J$f=laya.webgl.submit.SubmitStencil.create(8),J$a.addRenderObject(J$f)}},J$i.restore2=function(J$a,J$b){var J$c;(J$a._renderKey=0)<J$i._mask&&J$i._mask--,0==J$i._mask?(J$c=laya.webgl.submit.SubmitStencil.create(3),J$a.addRenderObject(J$c),J$a._curSubmit=J$fa.RENDERBASE):(J$c=laya.webgl.submit.SubmitStencil.create(7),J$a.addRenderObject(J$c),J$a._submits[J$a._submits._length++]=J$b,J$c=laya.webgl.submit.SubmitStencil.create(8),J$a.addRenderObject(J$c))},J$i.create=function(J$a){var J$b=J$i._cache._length?J$i._cache[--J$i._cache._length]:new J$i;return 5==(J$b.step=J$a)&&++J$i._mask,J$b.level=J$i._mask,J$b},J$i._cache=((J$i._cache=[])._length=0,J$i._cache),J$i._mask=0,J$i}(),J$la=function(){function J$h(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}J$m(J$h,"laya.webgl.submit.SubmitTarget");var J$a=J$h.prototype;return J$y.imps(J$a,{"laya.webgl.submit.ISubmit":!0}),J$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var J$a=this.scope.getValue(this.proName);return J$a&&(this.shaderValue.texture=J$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[J$a.width,J$a.height]),this.shaderValue.upload(),this.blend(),J$G.drawCall++,J$G.trianglesFaces+=this._numEle/3,J$wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},J$a.blend=function(){if(J$S.activeBlendFunction!==J$S.fns[this.blendType]){var J$a=J$wa.mainContext;J$a.enable(3042),J$S.fns[this.blendType](J$a),J$S.activeBlendFunction=J$S.fns[this.blendType]}},J$a.getRenderType=function(){return 0},J$a.releaseRender=function(){var J$a=J$h._cache;(J$a[J$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},J$h.create=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$h._cache._length?J$h._cache[--J$h._cache._length]:new J$h;return J$g._ib=J$b,J$g._vb=J$c,J$g.proName=J$f,J$g._startIdx=J$d*J$pa.BYTES_PIDX,J$g._numEle=0,J$g.blendType=J$a._nBlendType,J$g.shaderValue=J$e,J$g.shaderValue.setValue(J$a._shader2D),J$g},J$h._cache=((J$h._cache=[])._length=0,J$h._cache),J$h}(),J$ma=function(){function J$a(){this._sourceStr=null}J$m(J$a,"laya.webgl.text.CharSegment");var J$b=J$a.prototype;return J$y.imps(J$b,{"laya.webgl.text.ICharSegment":!0}),J$b.textToSpit=function(J$a){this._sourceStr=J$a},J$b.getChar=function(J$a){return this._sourceStr.charAt(J$a)},J$b.getCharCode=function(J$a){return this._sourceStr.charCodeAt(J$a)},J$b.length=function(){return this._sourceStr.length},J$a}(),J$na=function(){var J$a;function J$G(){}return J$m(J$G,"laya.webgl.text.DrawText"),J$G.__init__=function(){J$G._charsTemp=new Array,J$G._drawValue=new J$a,J$G._charSeg=new J$ma},J$G.customCharSeg=function(J$a){J$G._charSeg=J$a},J$G.getChar=function(J$a,J$b,J$c){var J$d=J$Va.createOneChar(J$a,J$c);return-1!=J$b&&(J$G._charsCache[J$b]=J$d),J$d},J$G._drawSlow=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m,J$n,J$o){var J$p,J$q,J$r=J$G._drawValue.value(J$f,J$h,J$i,J$j,J$m,J$n,J$o),J$u=0,J$v=0,J$w=J$G._charsTemp,J$x=0,J$y=NaN;if(J$d)for(J$w.length=J$d.length,J$u=0,J$v=J$d.length;J$u<J$v;J$u++)(J$q=J$d[J$u])&&(J$y=J$q.charNum+J$r.txtID,J$w[J$u]=J$p=J$G._charsCache[J$y]||J$G.getChar(J$q.char,J$y,J$r),J$p.active());else{var J$z=J$c instanceof laya.utils.WordText?J$c.toString():J$c;if(J$J.CharacterCache){J$G._charSeg.textToSpit(J$z);var J$A=J$G._charSeg.length();for(J$u=0,J$v=J$w.length=J$A;J$u<J$v;J$u++)J$y=J$G._charSeg.getCharCode(J$u)+J$r.txtID,J$w[J$u]=J$p=J$G._charsCache[J$y]||J$G.getChar(J$G._charSeg.getChar(J$u),J$y,J$r),J$p.active(),J$x+=J$p.cw}else J$w.length=0,(J$p=J$G.getChar(J$z,-1,J$r)).active(),J$x+=J$p.cw,J$w[0]=J$p}var J$B=0;null!==J$g&&"left"!==J$g&&(J$B=-("center"==J$g?J$x/2:J$x));var J$C,J$D,J$E=NaN,J$F=0;if(J$d)for(J$u=0,J$v=J$w.length;J$u<J$v;J$u++)J$p=J$w[J$u],J$q=J$d[J$u],J$p&&J$q&&!J$p.isSpace&&(J$E=J$p.borderSize,J$C=J$p.texture,J$b._drawText(J$C,J$k+J$B+J$q.x*J$m-J$E,J$l+J$q.y*J$n-J$E,J$C.width,J$C.height,J$e,0,0,0,0));else{for(J$u=0,J$v=J$w.length;J$u<J$v;J$u++)(J$p=J$w[J$u])&&!J$p.isSpace&&(J$E=J$p.borderSize,J$C=J$p.texture,J$b._drawText(J$C,J$k+J$B-J$E,J$l-J$E,J$C.width,J$C.height,J$e,0,0,0,0),J$a&&((J$D=J$a[J$F++])||(J$D=J$a[J$F-1]=[]),J$D[0]=J$C,J$D[1]=J$B-J$E,J$D[2]=-J$E)),J$B+=J$p.cw;J$a&&(J$a.length=J$F)}},J$G._drawFast=function(J$a,J$b,J$c,J$d,J$e){for(var J$f,J$g,J$h=0,J$i=J$a.length;J$h<J$i;J$h++)(J$f=(J$g=J$a[J$h])[0]).active(),J$b._drawText(J$f,J$d+J$g[1],J$e+J$g[2],J$f.width,J$f.height,J$c,0,0,0,0)},J$G.drawText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l){if(void 0===J$l&&(J$l=0),!(J$b&&0===J$b.length||J$c&&0===J$c.length)){var J$m=J$d.a,J$n=J$d.d;(0!==J$d.b||0!==J$d.c)&&(J$m=J$n=1);var J$o=1!==J$m||1!==J$n;if(J$o&&J$y.stage.transform){var J$p=J$y.stage.transform;J$o=J$p.a===J$m&&J$p.d===J$n}else J$o=!1;if(J$o){var J$q=(J$d=J$d.copyTo(J$za._tmpMatrix)).tx,J$r=J$d.ty;J$d.scale(1/J$m,1/J$n),J$d._checkTransform(),J$j*=J$m,J$k*=J$n,J$j+=J$q-J$d.tx,J$k+=J$r-J$d.ty}else J$m=J$n=1;if(J$c)J$G._drawSlow(null,J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$m,J$n,J$l);else{if(null===J$b.toUpperCase){var J$u=J$m+1e5*J$n,J$v=J$b;return void(J$v.changed||J$v.id!==J$u?(J$v.id=J$u,J$v.changed=!1,J$G._drawSlow(J$v.save,J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$m,J$n,J$l)):J$G._drawFast(J$v.save,J$a,J$d,J$j,J$k))}var J$w=J$b+J$e.toString()+J$g+J$h+J$i+J$m+J$n+J$f,J$x=J$G._textsCache[J$w];J$J.CharacterCache?J$x?J$G._drawFast(J$x,J$a,J$d,J$j,J$k):(J$G._textsCache.__length||(J$G._textsCache.__length=0),J$G._textsCache.__length>J$z.WebGLTextCacheCount&&((J$G._textsCache={}).__length=0,J$G._curPoolIndex=0),J$G._textCachesPool[J$G._curPoolIndex]?(J$x=J$G._textsCache[J$w]=J$G._textCachesPool[J$G._curPoolIndex]).length=0:J$G._textCachesPool[J$G._curPoolIndex]=J$x=J$G._textsCache[J$w]=[],J$G._textsCache.__length++,J$G._curPoolIndex++,J$G._drawSlow(J$x,J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$m,J$n,J$l)):J$G._drawSlow(J$x,J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$m,J$n,J$l)}}},J$G._charsTemp=null,J$G._textCachesPool=[],J$G._curPoolIndex=0,J$G._charsCache={},J$G._textsCache={},J$G._drawValue=null,J$G.d=[],J$G._charSeg=null,J$G.__init$=function(){J$a=function(){function J$i(){}return J$m(J$i,""),J$i.prototype.value=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this.font=J$a,this.fillColor=J$b,this.borderColor=J$c,this.lineWidth=J$d,this.scaleX=J$e,this.scaleY=J$f,this.underLine=J$g;var J$h=J$a.toString()+J$e+J$f+J$d+(J$b?J$b.toLowerCase():" ")+(J$c?J$c.toLowerCase():" ")+J$g;return this.txtID=J$i._keymap[J$h],this.txtID||(this.txtID=1e-7*++J$i._keymapCount,J$i._keymap[J$h]=this.txtID),this},J$i.clear=function(){J$i._keymap={},J$i._keymapCount=1},J$i._keymap={},J$i._keymapCount=1,J$i}()},J$G}(),J$oa=function(){function J$e(J$a){this._index=0,this._size=14,this._italic=-2,J$e._cache2=J$e._cache2||[],this.setFont(J$a||"14px Arial")}J$m(J$e,"laya.webgl.text.FontInContext");var J$a=J$e.prototype;return J$a.setFont=function(J$a){var J$b=J$e._cache2[J$a];if(J$b)this._words=J$b[0],this._size=J$b[1];else{this._words=J$a.split(" ");for(var J$c=0,J$d=this._words.length;J$c<J$d;J$c++)if(0<this._words[J$c].indexOf("px")){this._index=J$c;break}this._size=parseInt(this._words[this._index]),J$e._cache2[J$a]=[this._words,this._size]}this._text=null,this._italic=-2},J$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},J$a.hasType=function(J$a){for(var J$b=0,J$c=this._words.length;J$b<J$c;J$b++)if(this._words[J$b]===J$a)return J$b;return-1},J$a.removeType=function(J$a){for(var J$b=0,J$c=this._words.length;J$b<J$c;J$b++)if(this._words[J$b]===J$a){this._words.splice(J$b,1),this._index>J$b&&this._index--;break}this._text=null,this._italic=-2},J$a.copyTo=function(J$a){return J$a._text=this._text,J$a._size=this._size,J$a._index=this._index,J$a._words=this._words.slice(),J$a._italic=-2,J$a},J$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},J$d(0,J$a,"size",function(){return this._size},function(J$a){this._size=J$a,this._words[this._index]=J$a+"px",this._text=null}),J$e.create=function(J$a){var J$b=J$e._cache[J$a];return J$b||(J$b=J$e._cache[J$a]=new J$e(J$a))},J$e.EMPTY=new J$e,J$e._cache={},J$e._cache2=null,J$e}(),J$pa=function(){function J$a(){}return J$m(J$a,"laya.webgl.utils.CONST3D2D"),J$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],J$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],J$a._TMPARRAY=[],J$a._OFFSETX=0,J$a._OFFSETY=0,J$g(J$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),J$a}(),J$qa=function(){function J$o(){}return J$m(J$o,"laya.webgl.utils.GlUtils"),J$o.make2DProjection=function(J$a,J$b,J$c){return[2/J$a,0,0,0,0,-2/J$b,0,0,0,0,2/J$c,0,-1,1,0,1]},J$o.fillIBQuadrangle=function(J$a,J$b){if(65535/4<J$b)throw Error("IBQuadrangle count:"+J$b+" must<:"+Math.floor(65535/4));J$b=Math.floor(J$b),J$a._resizeBuffer(6*(J$b+1)*2,!1),J$a.byteLength=J$a.bufferLength;for(var J$c=J$a.getUint16Array(),J$d=0,J$e=0;J$e<J$b;J$e++)J$c[J$d++]=4*J$e,J$c[J$d++]=4*J$e+2,J$c[J$d++]=4*J$e+1,J$c[J$d++]=4*J$e,J$c[J$d++]=4*J$e+3,J$c[J$d++]=4*J$e+2;return J$a.setNeedUpload(),!0},J$o.expandIBQuadrangle=function(J$a,J$b){J$a.bufferLength>=6*J$b*2||J$o.fillIBQuadrangle(J$a,J$b)},J$o.mathCeilPowerOfTwo=function(J$a){return J$a--,J$a|=J$a>>1,J$a|=J$a>>2,J$a|=J$a>>4,J$a|=J$a>>8,J$a|=J$a>>16,++J$a},J$o.fillQuadrangleImgVb=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=16+(J$a._byteLength>>2);J$a.byteLength=J$i<<2;var J$j=J$a.getFloat32Array();J$j[(J$i-=16)+2]=J$e[0],J$j[J$i+3]=J$e[1],J$j[J$i+6]=J$e[2],J$j[J$i+7]=J$e[3],J$j[J$i+10]=J$e[4],J$j[J$i+11]=J$e[5],J$j[J$i+14]=J$e[6],J$j[J$i+15]=J$e[7];var J$k=J$f.a,J$l=J$f.b,J$m=J$f.c,J$n=J$f.d;if(1!==J$k||0!==J$l||0!==J$m||1!==J$n){J$f.bTransform=!0;var J$o=J$f.tx+J$g,J$p=J$f.ty+J$h;J$j[J$i]=(J$d[0]+J$b)*J$k+(J$d[1]+J$c)*J$m+J$o,J$j[J$i+1]=(J$d[0]+J$b)*J$l+(J$d[1]+J$c)*J$n+J$p,J$j[J$i+4]=(J$d[2]+J$b)*J$k+(J$d[3]+J$c)*J$m+J$o,J$j[J$i+5]=(J$d[2]+J$b)*J$l+(J$d[3]+J$c)*J$n+J$p,J$j[J$i+8]=(J$d[4]+J$b)*J$k+(J$d[5]+J$c)*J$m+J$o,J$j[J$i+9]=(J$d[4]+J$b)*J$l+(J$d[5]+J$c)*J$n+J$p,J$j[J$i+12]=(J$d[6]+J$b)*J$k+(J$d[7]+J$c)*J$m+J$o,J$j[J$i+13]=(J$d[6]+J$b)*J$l+(J$d[7]+J$c)*J$n+J$p}else J$f.bTransform=!1,J$b+=J$f.tx+J$g,J$c+=J$f.ty+J$h,J$j[J$i]=J$b+J$d[0],J$j[J$i+1]=J$c+J$d[1],J$j[J$i+4]=J$b+J$d[2],J$j[J$i+5]=J$c+J$d[3],J$j[J$i+8]=J$b+J$d[4],J$j[J$i+9]=J$c+J$d[5],J$j[J$i+12]=J$b+J$d[6],J$j[J$i+13]=J$c+J$d[7];return J$a._upload=!0},J$o.fillTranglesVB=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h=(J$a._byteLength>>2)+J$d.length;J$a.byteLength=J$h<<2;var J$i=J$a.getFloat32Array();J$h-=J$d.length;for(var J$j=J$d.length,J$k=J$e.a,J$l=J$e.b,J$m=J$e.c,J$n=J$e.d,J$o=0;J$o<J$j;J$o+=4)if(J$i[J$h+J$o+2]=J$d[J$o+2],J$i[J$h+J$o+3]=J$d[J$o+3],1!==J$k||0!==J$l||0!==J$m||1!==J$n){J$e.bTransform=!0;var J$p=J$e.tx+J$f,J$q=J$e.ty+J$g;J$i[J$h+J$o]=(J$d[J$o]+J$b)*J$k+(J$d[J$o+1]+J$c)*J$m+J$p,J$i[J$h+J$o+1]=(J$d[J$o]+J$b)*J$l+(J$d[J$o+1]+J$c)*J$n+J$q}else J$e.bTransform=!1,J$b+=J$e.tx+J$f,J$c+=J$e.ty+J$g,J$i[J$h+J$o]=J$b+J$d[J$o],J$i[J$h+J$o+1]=J$c+J$d[J$o+1];return J$a._upload=!0},J$o.copyPreImgVb=function(J$a,J$b,J$c){var J$d=J$a._byteLength>>2;J$a.byteLength=J$d+16<<2;for(var J$e=J$a.getFloat32Array(),J$f=0,J$g=J$d-16;J$f<4;J$f++)J$e[J$d]=J$e[J$g]+J$b,++J$g,J$e[++J$d]=J$e[J$g]+J$c,++J$g,J$e[++J$d]=J$e[J$g],++J$g,J$e[++J$d]=J$e[J$g],++J$d,++J$g;J$a._upload=!0},J$o.fillRectImgVb=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m){void 0===J$m&&(J$m=!1);var J$n,J$o,J$p,J$q,J$r,J$u,J$v,J$w,J$x,J$y,J$z,J$A,J$B,J$C,J$D,J$E,J$F=1,J$G=J$h.a,J$H=J$h.b,J$I=J$h.c,J$J=J$h.d,J$K=J$b&&J$b.width<99999999;if(1!==J$G||0!==J$H||0!==J$I||1!==J$J?(J$h.bTransform=!0,0===J$H&&0===J$I&&(J$F=23,J$x=J$e+J$c,J$y=J$f+J$d,J$n=J$G*J$c+(J$z=J$h.tx+J$i),J$p=J$G*J$x+J$z,J$o=J$J*J$d+(J$A=J$h.ty+J$j),J$q=J$J*J$y+J$A)):(J$F=23,J$h.bTransform=!1,J$p=(J$n=J$c+J$h.tx+J$i)+J$e,J$q=(J$o=J$d+J$h.ty+J$j)+J$f),J$K&&(J$r=J$b.x,J$u=J$b.y,J$v=J$b.width+J$r,J$w=J$b.height+J$u),1!==J$F){if(Math.min(J$n,J$p)>=J$v)return!1;if(Math.min(J$o,J$q)>=J$w)return!1;if(Math.max(J$p,J$n)<=J$r)return!1;if(Math.max(J$q,J$o)<=J$u)return!1}var J$L=J$a._byteLength>>2;J$a.byteLength=16+J$L<<2;var J$M=J$a.getFloat32Array();switch(J$M[2+J$L]=J$g[0],J$M[3+J$L]=J$g[1],J$M[6+J$L]=J$g[2],J$M[7+J$L]=J$g[3],J$M[10+J$L]=J$g[4],J$M[11+J$L]=J$g[5],J$M[14+J$L]=J$g[6],J$M[15+J$L]=J$g[7],J$F){case 1:J$z=J$h.tx+J$i,J$A=J$h.ty+J$j;var J$N=J$G*J$c,J$O=J$I*J$d,J$P=J$J*J$d,J$Q=J$H*J$c,J$R=J$G*(J$x=J$e+J$c),J$S=J$I*(J$y=J$f+J$d),J$T=J$J*J$y,J$U=J$H*J$x;J$m?(J$B=J$N+J$O+J$z,J$D=Math.round(J$B)-J$B,J$C=J$P+J$Q+J$A,J$E=Math.round(J$C)-J$C,J$M[J$L]=J$B+J$D,J$M[1+J$L]=J$C+J$E,J$M[4+J$L]=J$R+J$O+J$z+J$D,J$M[5+J$L]=J$P+J$U+J$A+J$E,J$M[8+J$L]=J$R+J$S+J$z+J$D,J$M[9+J$L]=J$T+J$U+J$A+J$E,J$M[12+J$L]=J$N+J$S+J$z+J$D,J$M[13+J$L]=J$T+J$Q+J$A+J$E):(J$M[J$L]=J$N+J$O+J$z,J$M[1+J$L]=J$P+J$Q+J$A,J$M[4+J$L]=J$R+J$O+J$z,J$M[5+J$L]=J$P+J$U+J$A,J$M[8+J$L]=J$R+J$S+J$z,J$M[9+J$L]=J$T+J$U+J$A,J$M[12+J$L]=J$N+J$S+J$z,J$M[13+J$L]=J$T+J$Q+J$A);break;case 23:J$m?(J$B=J$n+J$k,J$D=Math.round(J$B)-J$B,J$C=J$o,J$E=Math.round(J$C)-J$C,J$M[J$L]=J$B+J$D,J$M[1+J$L]=J$C+J$E,J$M[4+J$L]=J$p+J$k+J$D,J$M[5+J$L]=J$o+J$E,J$M[8+J$L]=J$p+J$D,J$M[9+J$L]=J$q+J$E,J$M[12+J$L]=J$n+J$D,J$M[13+J$L]=J$q+J$E):(J$M[J$L]=J$n+J$k,J$M[1+J$L]=J$o,J$M[4+J$L]=J$p+J$k,J$M[5+J$L]=J$o,J$M[8+J$L]=J$p,J$M[9+J$L]=J$q,J$M[12+J$L]=J$n,J$M[13+J$L]=J$q)}return J$a._upload=!0},J$o.fillLineVb=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=.5*J$g,J$j=J$o._fillLineArray,J$k=-(J$d-J$f),J$l=J$c-J$e,J$m=Math.sqrt(J$k*J$k+J$l*J$l);J$k/=J$m,J$l/=J$m,J$k*=J$i,J$l*=J$i,J$j[0]=J$c-J$k,J$j[1]=J$d-J$l,J$j[4]=J$c+J$k,J$j[5]=J$d+J$l,J$j[8]=J$e+J$k,J$j[9]=J$f+J$l,J$j[12]=J$e-J$k,J$j[13]=J$f-J$l,J$h&&J$h.transformPointArray(J$j,J$j);var J$n=16+(J$a._byteLength>>2);return J$a.byteLength=J$n<<2,J$a.insertData(J$j,J$n-16),!0},J$o._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J$o}(),J$ra=(function(){function J$i(){}J$m(J$i,"laya.webgl.utils.MatirxArray"),J$i.ArrayMul=function(J$a,J$b,J$c){if(J$a)if(J$b)for(var J$d=NaN,J$e=NaN,J$f=NaN,J$g=NaN,J$h=0;J$h<4;J$h++)J$d=J$a[J$h],J$e=J$a[J$h+4],J$f=J$a[J$h+8],J$g=J$a[J$h+12],J$c[J$h]=J$d*J$b[0]+J$e*J$b[1]+J$f*J$b[2]+J$g*J$b[3],J$c[J$h+4]=J$d*J$b[4]+J$e*J$b[5]+J$f*J$b[6]+J$g*J$b[7],J$c[J$h+8]=J$d*J$b[8]+J$e*J$b[9]+J$f*J$b[10]+J$g*J$b[11],J$c[J$h+12]=J$d*J$b[12]+J$e*J$b[13]+J$f*J$b[14]+J$g*J$b[15];else J$i.copyArray(J$a,J$c);else J$i.copyArray(J$b,J$c)},J$i.copyArray=function(J$a,J$b){if(J$a&&J$b)for(var J$c=0;J$c<J$a.length;J$c++)J$b[J$c]=J$a[J$c]}}(),function(){function J$b(J$a,J$b,J$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=J$a,this._vb=new J$ta(J$a,35048),J$b&&this._vb._resizeBuffer(J$b,!1),this._ib=new J$sa,J$c&&this._ib._resizeBuffer(J$c,!1)}J$m(J$b,"laya.webgl.utils.Mesh2D");var J$a=J$b.prototype;return J$a.cloneWithNewVB=function(){var J$a=new J$b(this._stride,0,0);return J$a._ib=this._ib,J$a._quadNum=this._quadNum,J$a._attribInfo=this._attribInfo,J$a},J$a.cloneWithNewVBIB=function(){var J$a=new J$b(this._stride,0,0);return J$a._attribInfo=this._attribInfo,J$a},J$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},J$a.getVBR=function(){return this._vb},J$a.getIBR=function(){return this._ib},J$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},J$a.createQuadIB=function(J$a){this._quadNum=J$a,this._ib._resizeBuffer(6*J$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var J$b=this._ib.getUint16Array(),J$c=0,J$d=0,J$e=0;J$e<J$a;J$e++)J$b[J$c++]=J$d,J$b[J$c++]=J$d+2,J$b[J$c++]=J$d+1,J$b[J$c++]=J$d,J$b[J$c++]=J$d+3,J$b[J$c++]=J$d+2,J$d+=4;this._ib.setNeedUpload()},J$a.setAttributes=function(J$a){if(this._attribInfo=J$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},J$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},J$a.releaseMesh=function(){},J$a.destroy=function(){},J$a.clearVB=function(){this._vb.clear()},J$b._gvaoid=0,J$b}()),J$ua=function(){function J$e(){}return J$m(J$e,"laya.webgl.utils.RenderState2D"),J$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},J$e.mat2MatArray=function(J$a,J$b){var J$c=J$a,J$d=J$b;return J$d[0]=J$c.a,J$d[1]=J$c.b,J$d[2]=J$e.EMPTYMAT4_ARRAY[2],J$d[3]=J$e.EMPTYMAT4_ARRAY[3],J$d[4]=J$c.c,J$d[5]=J$c.d,J$d[6]=J$e.EMPTYMAT4_ARRAY[6],J$d[7]=J$e.EMPTYMAT4_ARRAY[7],J$d[8]=J$e.EMPTYMAT4_ARRAY[8],J$d[9]=J$e.EMPTYMAT4_ARRAY[9],J$d[10]=J$e.EMPTYMAT4_ARRAY[10],J$d[11]=J$e.EMPTYMAT4_ARRAY[11],J$d[12]=J$c.tx,J$d[13]=J$c.ty,J$d[14]=J$e.EMPTYMAT4_ARRAY[14],J$d[15]=J$e.EMPTYMAT4_ARRAY[15],J$b},J$e.restoreTempArray=function(){J$e.TEMPMAT4_ARRAY[0]=1,J$e.TEMPMAT4_ARRAY[1]=0,J$e.TEMPMAT4_ARRAY[4]=0,J$e.TEMPMAT4_ARRAY[5]=1,J$e.TEMPMAT4_ARRAY[12]=0,J$e.TEMPMAT4_ARRAY[13]=0},J$e.clear=function(){J$e.worldScissorTest=!1,J$e.worldShaderDefines=null,J$e.worldFilters=null,J$e.worldAlpha=1,J$e.worldClipRect.x=J$e.worldClipRect.y=0,J$e.worldClipRect.width=J$e.width,J$e.worldClipRect.height=J$e.height,J$e.curRenderTarget=null},J$e._MAXSIZE=99999999,J$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J$e.worldMatrix4=J$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J$e.worldAlpha=1,J$e.worldScissorTest=!1,J$e.worldFilters=null,J$e.worldShaderDefines=null,J$e.curRenderTarget=null,J$e.width=0,J$e.height=0,J$g(J$e,["worldMatrix",function(){return this.worldMatrix=new J$B},"worldClipRect",function(){return this.worldClipRect=new J$D(0,0,99999999,99999999)}]),J$e}(),J$va=function(){var J$u,J$c;function J$v(J$a,J$b,J$c,J$d,J$e){var J$f=this;function J$g(J$a){var J$b=[],J$c=new J$u(J$b);return J$f._compileToTree(J$c,J$a.split("\n"),0,J$b,J$e),J$c}var J$h=J$n.now();this._VS=J$g(J$b),this._PS=J$g(J$c),this._nameMap=J$d,2<J$n.now()-J$h&&console.log("ShaderCompile use time:"+(J$n.now()-J$h)+"  size:"+J$b.length+"/"+J$c.length)}J$m(J$v,"laya.webgl.utils.ShaderCompile");var J$a=J$v.prototype;return J$a._compileToTree=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m=0,J$n=0,J$o=0,J$p=0;for(J$n=J$c;J$n<J$b.length;J$n++)if(!((J$h=J$b[J$n]).length<1)&&0!==(J$m=J$h.indexOf("//"))){if(0<=J$m&&(J$h=J$h.substr(0,J$m)),J$f=J$l||new J$u(J$d),J$l=null,J$f.text=J$h,J$f.noCompile=!0,0<=(J$m=J$h.indexOf("#"))){for(J$i="#",J$p=J$m+1,J$o=J$h.length;J$p<J$o;J$p++){var J$q=J$h.charAt(J$p);if(" "===J$q||"\t"===J$q||"\r"===J$q||"\n"===J$q||"?"===J$q)break;J$i+=J$q}switch(J$f.name=J$i){case"#ifdef":case"#ifndef":if(J$f.src=J$h,J$f.noCompile=null!=J$h.match(/[!&|()=<>]/),J$f.noCompile?console.log("function():Boolean{return "+J$h.substr(J$m+J$f.name.length)+"}"):(J$k=J$h.replace(/^\s*/,"").split(/\s+/),J$f.setCondition(J$k[1],"#ifdef"===J$i?1:2),J$f.text="//"+J$f.text),J$f.setParent(J$a),J$a=J$f,J$e)for(J$k=J$h.substr(J$p).split(J$v._splitToWordExps3),J$p=0;J$p<J$k.length;J$p++)(J$h=J$k[J$p]).length&&(J$e[J$h]=!0);continue;case"#if":if(J$f.src=J$h,J$f.noCompile=!0,J$f.setParent(J$a),J$a=J$f,J$e)for(J$k=J$h.substr(J$p).split(J$v._splitToWordExps3),J$p=0;J$p<J$k.length;J$p++)(J$h=J$k[J$p]).length&&"defined"!=J$h&&(J$e[J$h]=!0);continue;case"#else":J$f.src=J$h,J$g=(J$a=J$a.parent).childs[J$a.childs.length-1],J$f.noCompile=J$g.noCompile,J$f.noCompile||(J$f.condition=J$g.condition,J$f.conditionType=1==J$g.conditionType?2:1,J$f.text="//"+J$f.text+" "+J$g.text+" "+J$f.conditionType),J$f.setParent(J$a),J$a=J$f;continue;case"#endif":J$g=(J$a=J$a.parent).childs[J$a.childs.length-1],J$f.noCompile=J$g.noCompile,J$f.noCompile||(J$f.text="//"+J$f.text),J$f.setParent(J$a);continue;case"#include":J$k=J$v.splitToWords(J$h,null);var J$r=J$v.includes[J$k[1]];if(!J$r)throw"ShaderCompile error no this include file:"+J$k[1];if((J$m=J$k[0].indexOf("?"))<0){J$f.setParent(J$a),J$h=J$r.getWith("with"==J$k[2]?J$k[3]:null),this._compileToTree(J$f,J$h.split("\n"),0,J$d,J$e),J$f.text="";continue}J$f.setCondition(J$k[0].substr(J$m+1),1),J$f.text=J$r.getWith("with"==J$k[2]?J$k[3]:null);break;case"#import":J$j=(J$k=J$v.splitToWords(J$h,null))[1],J$d.push({node:J$f,file:J$v.includes[J$j],ofs:J$f.text.length});continue}}else{if((J$g=J$a.childs[J$a.childs.length-1])&&!J$g.name){0<J$d.length&&J$v.splitToWords(J$h,J$g),J$l=J$f,J$g.text+="\n"+J$h;continue}0<J$d.length&&J$v.splitToWords(J$h,J$f)}J$f.setParent(J$a)}},J$a.createShader=function(J$a,J$b,J$c){var J$d={},J$e="";if(J$a)for(var J$f in J$a)J$e+="#define "+J$f+"\n",J$d[J$f]=!0;var J$g=this._VS.toscript(J$d,[]),J$h=this._PS.toscript(J$d,[]);return(J$c||J$Ya.create)(J$e+J$g.join("\n"),J$e+J$h.join("\n"),J$b,this._nameMap)},J$v._parseOne=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g={type:J$v.shaderParamsMap[J$c[J$d+1]],name:J$c[J$d+2],size:isNaN(parseInt(J$c[J$d+3]))?1:parseInt(J$c[J$d+3])};return J$f&&("attribute"==J$e?J$a.push(J$g):J$b.push(J$g)),":"==J$c[J$d+3]&&(J$g.type=J$c[J$d+4],J$d+=2),J$d+=2},J$v.addInclude=function(J$a,J$b){if(!J$b||0===J$b.length)throw new Error("add shader include file err:"+J$a);if(J$v.includes[J$a])throw new Error("add shader include file err, has add:"+J$a);J$v.includes[J$a]=new J$c(J$b)},J$v.preGetParams=function(J$a,J$b){var J$c=[J$a,J$b],J$d={},J$e=[],J$f=[],J$g={},J$h=[];J$d.attributes=J$e,J$d.uniforms=J$f,J$d.defines=J$g;for(var J$i=0,J$j=0,J$k=0;J$k<2;J$k++){J$c[J$k]=J$c[J$k].replace(J$v._removeAnnotation,"");var J$l,J$m=J$c[J$k].match(J$v._reg);for(J$i=0,J$j=J$m.length;J$i<J$j;J$i++){var J$n=J$m[J$i];if("attribute"==J$n||"uniform"==J$n)J$i=J$v._parseOne(J$e,J$f,J$m,J$i,J$n,!0);else{if("#define"==J$n){J$h[J$n=J$m[++J$i]]=1;continue}if("#ifdef"==J$n){J$g[J$l=J$m[++J$i]]=J$g[J$l]||[];for(J$i++;J$i<J$j;J$i++)if("attribute"==(J$n=J$m[J$i])||"uniform"==J$n)J$i=J$v._parseOne(J$e,J$f,J$m,J$i,J$n,J$h[J$l]);else if("#else"==J$n)for(J$i++;J$i<J$j;J$i++)if("attribute"==(J$n=J$m[J$i])||"uniform"==J$n)J$i=J$v._parseOne(J$e,J$f,J$m,J$i,J$n,!J$h[J$l]);else if("#endif"==J$n)break}}}}return J$d},J$v.splitToWords=function(J$a,J$b){for(var J$c,J$d,J$e=[],J$f=-1,J$g=0,J$h=J$a.length;J$g<J$h;J$g++)if(J$c=J$a.charAt(J$g),0<=" \t=+-*/&%!<>()'\",;".indexOf(J$c)){if(0<=J$f&&1<J$g-J$f&&(J$d=J$a.substr(J$f,J$g-J$f),J$e.push(J$d)),'"'==J$c||"'"==J$c){var J$i=J$a.indexOf(J$c,J$g+1);if(J$i<0)throw"Sharder err:"+J$a;J$e.push(J$a.substr(J$g+1,J$i-J$g-1)),J$g=J$i,J$f=-1;continue}"("==J$c&&J$b&&0<J$e.length&&(J$d=J$e[J$e.length-1]+";","vec4;main;".indexOf(J$d)<0&&(J$b.useFuns+=J$d)),J$f=-1}else J$f<0&&(J$f=J$g);return J$f<J$h&&1<J$h-J$f&&(J$d=J$a.substr(J$f,J$h-J$f),J$e.push(J$d)),J$e},J$v.IFDEF_NO=0,J$v.IFDEF_YES=1,J$v.IFDEF_ELSE=2,J$v.IFDEF_PARENT=3,J$v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),J$v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),J$v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),J$v.includes={},J$g(J$v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),J$v.__init$=function(){J$u=function(){function J$c(J$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=J$a}J$m(J$c,"");var J$a=J$c.prototype;return J$a.setParent=function(J$a){J$a.childs.push(this),this.z=J$a.z+1,this.parent=J$a},J$a.setCondition=function(J$a,J$b){J$a&&(this.conditionType=J$b,J$a=J$a.replace(/(\s*$)/g,""),this.condition=function(){return this[J$a]},this.condition.__condition=J$a)},J$a.toscript=function(J$a,J$b){return this._toscript(J$a,J$b,++J$c.__id)},J$a._toscript=function(J$d,J$e,J$f){if(this.childs.length<1&&!this.text)return J$e;J$e.length;if(this.condition){var J$a=!!this.condition.call(J$d);if(2===this.conditionType&&(J$a=!J$a),!J$a)return J$e}if(this.text&&J$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(J$a,J$b,J$c){J$a._toscript(J$d,J$e,J$f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var J$b,J$c=0,J$g=this.includefiles.length;J$c<J$g;J$c++)this.includefiles[J$c].curUseID!=J$f&&0<(J$b=this.includefiles[J$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[J$c].curUseID=J$f,J$e[0]=J$b+J$e[0]);return J$e},J$c.__id=1,J$c}(),J$c=function(){function J$a(J$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=J$a;for(var J$b=0,J$c=0,J$d=0;!((J$b=J$a.indexOf("#begin",J$b))<0);){for(J$d=J$b+5;!((J$d=J$a.indexOf("#end",J$d))<0)&&"i"===J$a.charAt(J$d+4);)J$d+=5;if(J$d<0)throw"add include err,no #end:"+J$a;J$c=J$a.indexOf("\n",J$b);var J$e=J$v.splitToWords(J$a.substr(J$b,J$c-J$b),null);"code"==J$e[1]?this.codes[J$e[2]]=J$a.substr(J$c+1,J$d-J$c-1):"function"==J$e[1]&&(J$c=J$a.indexOf("function",J$b),J$c+="function".length,this.funs[J$e[3]]=J$a.substr(J$c+1,J$d-J$c-1),this.funnames+=J$e[3]+";"),J$b=J$d+1}}J$m(J$a,"");var J$b=J$a.prototype;return J$b.getWith=function(J$a){var J$b=J$a?this.codes[J$a]:this.script;if(!J$b)throw"get with error:"+J$a;return J$b},J$b.getFunsScript=function(J$a){var J$b="";for(var J$c in this.funs)0<=J$a.indexOf(J$c+";")&&(J$b+=this.funs[J$c]);return J$b},J$a}()},J$v}(),J$wa=function(){function J$g(){}return J$m(J$g,"laya.webgl.WebGL"),J$g._uint8ArraySlice=function(){for(var J$a=this.length,J$b=new Uint8Array(this.length),J$c=0;J$c<J$a;J$c++)J$b[J$c]=this[J$c];return J$b},J$g._float32ArraySlice=function(){for(var J$a=this.length,J$b=new Float32Array(this.length),J$c=0;J$c<J$a;J$c++)J$b[J$c]=this[J$c];return J$b},J$g._uint16ArraySlice=function(J$a){var J$b,J$c=arguments,J$d=0,J$e=0;if(0===J$c.length)for(J$d=this.length,J$b=new Uint16Array(J$d),J$e=0;J$e<J$d;J$e++)J$b[J$e]=this[J$e];else if(2===J$c.length){var J$f=J$c[0],J$g=J$c[1];if(J$f<J$g)for(J$d=J$g-J$f,J$b=new Uint16Array(J$d),J$e=J$f;J$e<J$g;J$e++)J$b[J$e-J$f]=this[J$e];else J$b=new Uint16Array(0)}return J$b},J$g.expandContext=function(){var J$a=J$e.prototype,J$b=CanvasRenderingContext2D.prototype;J$b.fillTrangles=J$a.fillTrangles,J$Za.__int__(null),J$b.setIBVB=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){void 0===J$i&&(J$i=0),void 0===J$j&&(J$j=0),null===J$c&&(this._ib=this._ib||J$sa.QuadrangleIB,J$c=this._ib,J$qa.expandIBQuadrangle(J$c,J$d._byteLength/64+8)),this._setIBVB(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j)},J$b.fillTrangles=function(J$a,J$b,J$c,J$d,J$e){this._curMat=this._curMat||J$B.create(),this._vb=this._vb||J$ta.create(),this._ib||(this._ib=J$sa.create(),J$qa.fillIBQuadrangle(this._ib,J$g/4));var J$f=this._vb,J$g=J$d.length>>4;J$qa.fillTranglesVB(J$f,J$b,J$c,J$d,J$e||this._curMat,0,0),J$qa.expandIBQuadrangle(this._ib,J$f._byteLength/64+8);var J$h=new J$Aa(1,0);J$h.textureHost=J$a;var J$i=new J$_a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");J$f._vertType=3,this._setIBVB(J$b,J$c,this._ib,J$f,6*J$g,J$e,J$i,J$h,0,0)}},J$g.enable=function(){if(J$n.__init__(),J$r.isConchApp&&!J$r.isConchWebGL)return J$x.skinAniSprite=function(){return new J$aa},J$g.expandContext(),!1;if(J$x.getWebGLContext=function(J$a){for(var J$b,J$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],J$d=0;J$d<J$c.length;J$d++){try{J$b=J$a.getContext(J$c[J$d],{stencil:J$z.isStencil,alpha:J$z.isAlpha,antialias:J$z.isAntialias,premultipliedAlpha:J$z.premultipliedAlpha,preserveDrawingBuffer:J$z.preserveDrawingBuffer})}catch(J$a){}if(J$b)return J$b}return null},null==(J$g.mainContext=J$g.mainContext||J$x.getWebGLContext(J$r._mainCanvas)))return!1;if(J$r.isWebGL)return!0;J$q.create=function(J$a,J$b){return new J$ab(J$a,J$b)},J$b.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){return new J$Xa(J$a,J$b,J$c,J$d,J$e,J$f,J$g)},J$r.WebGL=J$g,J$r.isWebGL=!0,J$na.__init__(),J$x.createRenderSprite=function(J$a,J$b){return new J$Ba(J$a,J$b)},J$x.createWebGLContext2D=function(J$a){return new J$za(J$a)},J$x.changeWebGLSize=function(J$a,J$b){laya.webgl.WebGL.onStageResize(J$a,J$b)},J$x.createGraphics=function(){return new J$ya};var J$a=J$x.createFilterAction;return J$x.createFilterAction=J$a||function(J$a){return new J$Ca},J$x.clear=function(J$a){J$ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var J$b=J$r.context.ctx,J$c=0==J$b._submits._length||J$z.preserveDrawingBuffer?J$o.create(J$a)._color:J$F._wgColor;J$c&&J$b.clearBG(J$c[0],J$c[1],J$c[2],J$c[3]),J$ua.clear()},J$x.addToAtlas=function(J$a,J$b){void 0===J$b&&(J$b=!1);var J$c=J$a.bitmap;J$r.optimizeTextureMemory(J$a.url,J$a)?J$y.__typeof(J$c,"laya.webgl.resource.IMergeAtlasBitmap")&&J$c.allowMerageInAtlas&&J$c.on("recovered",J$a,J$a.addTextureToAtlas):J$c.enableMerageInAtlas=!1},J$x.isAtlas=function(J$a){return J$a instanceof laya.webgl.atlas.AtlasWebGLCanvas},J$Q._enable(),J$x.beginFlush=function(){for(var J$a=J$Q.instance,J$b=J$a.getAtlaserCount(),J$c=0;J$c<J$b;J$c++){var J$d=J$a.getAtlaserByIndex(J$c).texture;J$d._flashCacheImageNeedFlush&&J$x.flashFlushImage(J$d)}},J$x.drawToCanvas=function(J$a,J$b,J$c,J$d,J$e,J$f){(J$c<=0||J$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),J$c|=0,J$d|=0,J$e|=0,J$f|=0;var J$g=J$Ma.create(J$c,J$d,6408,5121,0,!1);J$g.start(),J$g.clear(0,0,0,0),J$r.context.clear(),J$u.renders[J$b]._fun(J$a,J$r.context,J$e,J$ua.height-J$d+J$f),J$r.context.flush(),J$g.end();var J$h=J$g.getData(0,0,J$c,J$d);if(J$g.recycle(),J$h.byteLength==J$c*J$d*4){var J$i=new J$Ua;J$i._canvas=J$n.createElement("canvas"),J$i.size(J$c,J$d);var J$j=J$i._canvas.getContext("2d");J$n.canvas.size(J$c,J$d);var J$k=J$n.context,J$l=J$k.createImageData(J$c,J$d);return J$l.data.set(new Uint8ClampedArray(J$h.buffer)),J$i._imgData=J$l,J$k.putImageData(J$l,0,0),J$j.save(),J$j.translate(0,J$d),J$j.scale(1,-1),J$j.drawImage(J$n.canvas.source,0,0),J$j.restore(),J$i}console.log("drawToCanvas error: w:"+J$c+",h:"+J$d+",datalen:"+J$h.byteLength)},J$x.createFilterAction=function(J$a){var J$b;switch(J$a){case 32:J$b=new J$Ca}return J$b},J$x.addTextureToAtlas=function(J$a){J$a._uvID++,J$Q._atlasRestore++,J$a.bitmap.enableMerageInAtlas&&J$Q.instance.addToAtlas(J$a)},J$x.getTexturePixels=function(J$a,J$b,J$c,J$d,J$e){J$r.context.ctx.clear();var J$f=new J$E;J$f.graphics.drawTexture(J$a,-J$b,-J$c);var J$g=J$Ma.create(J$d,J$e);J$g.start(),J$g.clear(0,0,0,0),J$f.render(J$r.context,0,0),J$r.context.ctx.flush(),J$g.end();for(var J$h=J$g.getData(0,0,J$d,J$e),J$i=[],J$j=0,J$k=J$e-1;0<=J$k;J$k--)for(var J$l=0;J$l<J$d;J$l++)J$j=4*(J$k*J$d+J$l),J$i.push(J$h[J$j]),J$i.push(J$h[J$j+1]),J$i.push(J$h[J$j+2]),J$i.push(J$h[J$j+3]);return J$i},J$x.skinAniSprite=function(){return new J$aa},J$p.create=function(J$a,J$b){var J$c=new J$Ua;return J$c._imgData=J$b,J$c.flipY=!1,J$c},J$A._filterStart=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$a.getValue("bounds"),J$g=J$Ma.create(J$f.width,J$f.height);if(J$g.start(),J$g.clear(0,0,0,0),J$a.addValue("src",J$g),J$a.addValue("ScissorTest",J$ua.worldScissorTest),J$ua.worldScissorTest){var J$h=new J$D;J$h.copyFrom(J$c.ctx._clipRect),J$a.addValue("clipRect",J$h),J$ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},J$A._filterEnd=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$a.getValue("bounds");J$a.getValue("src").end();var J$g=J$Ma.create(J$f.width,J$f.height);J$g.start(),J$g.clear(0,0,0,0),J$a.addValue("out",J$g),J$b._set$P("_filterCache",J$g),J$b._set$P("_isHaveGlowFilter",J$a.getValue("_isHaveGlowFilter"))},J$A._EndTarget=function(J$a,J$b){if(J$a.getValue("src").recycle(),J$a.getValue("out").end(),J$a.getValue("ScissorTest")){J$ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),J$b.ctx.save();var J$c=J$a.getValue("clipRect");J$b.ctx.clipRect(J$c.x,J$c.y,J$c.width,J$c.height)}},J$A._useSrc=function(J$a){var J$b=J$a.getValue("out");J$b.end(),(J$b=J$a.getValue("src")).start(),J$b.clear(0,0,0,0)},J$A._endSrc=function(J$a){J$a.getValue("src").end()},J$A._useOut=function(J$a){var J$b=J$a.getValue("src");J$b.end(),(J$b=J$a.getValue("out")).start(),J$b.clear(0,0,0,0)},J$A._endOut=function(J$a){J$a.getValue("out").end()},J$A._recycleScope=function(J$a){J$a.recycle()},J$A._filter=function(J$a,J$b,J$c,J$d){var J$e=this._next;if(J$e){var J$f,J$g,J$h=J$a.filters,J$i=J$h.length;if(1==J$i&&32==J$h[0].type)return J$b.ctx.save(),J$b.ctx.setFilters([J$h[0]]),J$e._fun.call(J$e,J$a,J$b,J$c,J$d),void J$b.ctx.restore();var J$j=J$ha.create(),J$k=J$C.TEMP,J$l=J$b.ctx._getTransformMatrix(),J$m=J$B.create();J$l.copyTo(J$m);var J$n=0,J$o=0,J$p=!1,J$q=J$a._$P._filterCache?J$a._$P._filterCache:null;if(!J$q||J$a._repaint){J$p=J$a._isHaveGlowFilter(),J$j.addValue("_isHaveGlowFilter",J$p),J$p&&(J$n=50,J$o=25),(J$g=new J$D).copyFrom(J$a.getSelfBounds()),J$g.x+=J$a.x,J$g.y+=J$a.y,J$g.x-=J$a.pivotX+4,J$g.y-=J$a.pivotY+4;var J$r=J$g.x,J$u=J$g.y;if(J$g.width+=J$n+8,J$g.height+=J$n+8,J$k.x=J$g.x*J$m.a+J$g.y*J$m.c,J$k.y=J$g.y*J$m.d+J$g.x*J$m.b,J$g.x=J$k.x,J$g.y=J$k.y,J$k.x=J$g.width*J$m.a+J$g.height*J$m.c,J$k.y=J$g.height*J$m.d+J$g.width*J$m.b,J$g.width=J$k.x,J$g.height=J$k.y,J$g.width<=0||J$g.height<=0)return;J$q&&J$q.recycle(),J$j.addValue("bounds",J$g);var J$v=J$ga.create([J$j,J$a,J$b,0,0],J$A._filterStart);J$b.addRenderObject(J$v),J$b.ctx._renderKey=0,J$b.ctx._shader2D.glTexture=null;var J$w=J$a.x-J$r+J$o,J$x=J$a.y-J$u+J$o;J$e._fun.call(J$e,J$a,J$b,J$w,J$x),J$v=J$ga.create([J$j,J$a,J$b,0,0],J$A._filterEnd),J$b.addRenderObject(J$v);for(var J$y=0;J$y<J$i;J$y++){0!=J$y&&(J$v=J$ga.create([J$j],J$A._useSrc),J$b.addRenderObject(J$v),J$f=J$Aa.create(1,0),J$B.TEMP.identity(),J$b.ctx.drawTarget(J$j,0,0,J$g.width,J$g.height,J$B.TEMP,"out",J$f,null,J$S.TOINT.overlay),J$v=J$ga.create([J$j],J$A._useOut),J$b.addRenderObject(J$v)),J$h[J$y].action.apply3d(J$j,J$a,J$b,0,0)}J$v=J$ga.create([J$j,J$b],J$A._EndTarget),J$b.addRenderObject(J$v)}else{if((J$p=!!J$a._$P._isHaveGlowFilter&&J$a._$P._isHaveGlowFilter)&&(J$n=50,J$o=25),(J$g=J$a.getBounds()).width<=0||J$g.height<=0)return;J$g.width+=J$n,J$g.height+=J$n,J$k.x=J$g.x*J$m.a+J$g.y*J$m.c,J$k.y=J$g.y*J$m.d+J$g.x*J$m.b,J$g.x=J$k.x,J$g.y=J$k.y,J$k.x=J$g.width*J$m.a+J$g.height*J$m.c,J$k.y=J$g.height*J$m.d+J$g.width*J$m.b,J$g.width=J$k.x,J$g.height=J$k.y,J$j.addValue("out",J$q)}J$c=J$c-J$o-J$a.x,J$d=J$d-J$o-J$a.y,J$k.setTo(J$c,J$d),J$m.transformPoint(J$k),J$c=J$k.x+J$g.x,J$d=J$k.y+J$g.y,J$f=J$Aa.create(1,0),J$B.TEMP.identity(),J$b.ctx.drawTarget(J$j,J$c,J$d,J$g.width,J$g.height,J$B.TEMP,"out",J$f,null,J$S.TOINT.overlay),J$v=J$ga.create([J$j],J$A._recycleScope),J$b.addRenderObject(J$v),J$m.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=J$g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=J$g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=J$g._uint8ArraySlice),!0},J$g.onStageResize=function(J$a,J$b){null!=J$g.mainContext&&(J$g.mainContext.viewport(0,0,J$a,J$b),J$ua.width=J$a,J$ua.height=J$b)},J$g.onInvalidGLRes=function(){J$Q.instance.freeAll(),J$w.releaseContentManagers(!0),J$g.doNodeRepaint(J$y.stage),J$g.mainContext.viewport(0,0,J$ua.width,J$ua.height),J$y.stage.event("devicelost")},J$g.doNodeRepaint=function(J$a){0==J$a.numChildren&&J$a.repaint();for(var J$b=0;J$b<J$a.numChildren;J$b++)J$g.doNodeRepaint(J$a.getChildAt(J$b))},J$g.init=function(J$a,J$b,J$c){J$g.mainCanvas=J$a,J$p._createContext=function(J$a){return new J$za(J$a)},J$Ua._createContext=function(J$a){return new J$za(J$a)};var J$d=laya.webgl.WebGL.mainContext;if(null!=J$d.getShaderPrecisionFormat){var J$e=J$d.getShaderPrecisionFormat(35633,36338),J$f=J$d.getShaderPrecisionFormat(35632,36338);J$g.shaderHighPrecision=!(!J$e.precision||!J$f.precision)}else J$g.shaderHighPrecision=!1;if(J$g.compressAstc=J$d.getExtension("WEBGL_compressed_texture_astc"),J$g.compressAtc=J$d.getExtension("WEBGL_compressed_texture_atc"),J$g.compressEtc=J$d.getExtension("WEBGL_compressed_texture_etc"),J$g.compressEtc1=J$d.getExtension("WEBGL_compressed_texture_etc1"),J$g.compressPvrtc=J$d.getExtension("WEBGL_compressed_texture_pvrtc"),J$g.compressS3tc=J$d.getExtension("WEBGL_compressed_texture_s3tc"),J$g.compressS3tc_srgb=J$d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),J$g.compressAstc=J$g.compressAstc?J$g.compressAstc:{},J$g.compressAtc=J$g.compressAtc?J$g.compressAtc:{},J$g.compressEtc=J$g.compressEtc?J$g.compressEtc:{},J$g.compressEtc1=J$g.compressEtc1?J$g.compressEtc1:{},J$g.compressPvrtc=J$g.compressPvrtc?J$g.compressPvrtc:{},J$g.compressS3tc=J$g.compressS3tc?J$g.compressS3tc:{},J$g.compressS3tc_srgb=J$g.compressS3tc_srgb?J$g.compressS3tc_srgb:{},J$d.deleteTexture1=J$d.deleteTexture,J$d.deleteTexture=function(J$a){J$a==J$xa.curBindTexValue&&(J$xa.curBindTexValue=null),J$d.deleteTexture1(J$a)},J$g.onStageResize(J$b,J$c),null==J$g.mainContext)throw new Error("webGL getContext err!");J$I.__init__(),J$Q.__init__(),J$Ea.__init__(),J$fa.__init__(),J$za.__init__(),J$Aa.__init__(),J$s.__init__(),J$Za.__int__(J$d),J$S._init_(J$d),J$r.isConchApp&&conch.setOnInvalidGLRes(J$g.onInvalidGLRes)},J$g.mainCanvas=null,J$g.antialias=!0,J$g.shaderHighPrecision=!1,J$g._bg_null=[0,0,0,0],J$g}(),J$xa=function(){function J$d(){}return J$m(J$d,"laya.webgl.WebGLContext"),J$d.UseProgram=function(J$a){return J$d._useProgram!==J$a&&(J$wa.mainContext.useProgram(J$a),J$d._useProgram=J$a,!0)},J$d.setDepthTest=function(J$a,J$b){J$b!==J$d._depthTest&&((J$d._depthTest=J$b)?J$a.enable(2929):J$a.disable(2929))},J$d.setDepthMask=function(J$a,J$b){J$b!==J$d._depthMask&&(J$d._depthMask=J$b,J$a.depthMask(J$b))},J$d.setDepthFunc=function(J$a,J$b){J$b!==J$d._depthFunc&&(J$d._depthFunc=J$b,J$a.depthFunc(J$b))},J$d.setBlend=function(J$a,J$b){J$b!==J$d._blend&&((J$d._blend=J$b)?J$a.enable(3042):J$a.disable(3042))},J$d.setBlendFunc=function(J$a,J$b,J$c){(J$b!==J$d._sFactor||J$c!==J$d._dFactor)&&(J$d._sFactor=J$b,J$d._dFactor=J$c,J$a.blendFunc(J$b,J$c))},J$d.setCullFace=function(J$a,J$b){J$b!==J$d._cullFace&&((J$d._cullFace=J$b)?J$a.enable(2884):J$a.disable(2884))},J$d.setFrontFace=function(J$a,J$b){J$b!==J$d._frontFace&&(J$d._frontFace=J$b,J$a.frontFace(J$b))},J$d.bindTexture=function(J$a,J$b,J$c){J$a.bindTexture(J$b,J$c),J$d.curBindTexTarget=J$b,J$d.curBindTexValue=J$c},J$d.DEPTH_BUFFER_BIT=256,J$d.STENCIL_BUFFER_BIT=1024,J$d.COLOR_BUFFER_BIT=16384,J$d.POINTS=0,J$d.LINES=1,J$d.LINE_LOOP=2,J$d.LINE_STRIP=3,J$d.TRIANGLES=4,J$d.TRIANGLE_STRIP=5,J$d.TRIANGLE_FAN=6,J$d.ZERO=0,J$d.ONE=1,J$d.SRC_COLOR=768,J$d.ONE_MINUS_SRC_COLOR=769,J$d.SRC_ALPHA=770,J$d.ONE_MINUS_SRC_ALPHA=771,J$d.DST_ALPHA=772,J$d.ONE_MINUS_DST_ALPHA=773,J$d.DST_COLOR=774,J$d.ONE_MINUS_DST_COLOR=775,J$d.SRC_ALPHA_SATURATE=776,J$d.FUNC_ADD=32774,J$d.BLEND_EQUATION=32777,J$d.BLEND_EQUATION_RGB=32777,J$d.BLEND_EQUATION_ALPHA=34877,J$d.FUNC_SUBTRACT=32778,J$d.FUNC_REVERSE_SUBTRACT=32779,J$d.BLEND_DST_RGB=32968,J$d.BLEND_SRC_RGB=32969,J$d.BLEND_DST_ALPHA=32970,J$d.BLEND_SRC_ALPHA=32971,J$d.CONSTANT_COLOR=32769,J$d.ONE_MINUS_CONSTANT_COLOR=32770,J$d.CONSTANT_ALPHA=32771,J$d.ONE_MINUS_CONSTANT_ALPHA=32772,J$d.BLEND_COLOR=32773,J$d.ARRAY_BUFFER=34962,J$d.ELEMENT_ARRAY_BUFFER=34963,J$d.ARRAY_BUFFER_BINDING=34964,J$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,J$d.STREAM_DRAW=35040,J$d.STATIC_DRAW=35044,J$d.DYNAMIC_DRAW=35048,J$d.BUFFER_SIZE=34660,J$d.BUFFER_USAGE=34661,J$d.CURRENT_VERTEX_ATTRIB=34342,J$d.FRONT=1028,J$d.BACK=1029,J$d.CULL_FACE=2884,J$d.FRONT_AND_BACK=1032,J$d.BLEND=3042,J$d.DITHER=3024,J$d.STENCIL_TEST=2960,J$d.DEPTH_TEST=2929,J$d.SCISSOR_TEST=3089,J$d.POLYGON_OFFSET_FILL=32823,J$d.SAMPLE_ALPHA_TO_COVERAGE=32926,J$d.SAMPLE_COVERAGE=32928,J$d.NO_ERROR=0,J$d.INVALID_ENUM=1280,J$d.INVALID_VALUE=1281,J$d.INVALID_OPERATION=1282,J$d.OUT_OF_MEMORY=1285,J$d.CW=2304,J$d.CCW=2305,J$d.LINE_WIDTH=2849,J$d.ALIASED_POINT_SIZE_RANGE=33901,J$d.ALIASED_LINE_WIDTH_RANGE=33902,J$d.CULL_FACE_MODE=2885,J$d.FRONT_FACE=2886,J$d.DEPTH_RANGE=2928,J$d.DEPTH_WRITEMASK=2930,J$d.DEPTH_CLEAR_VALUE=2931,J$d.DEPTH_FUNC=2932,J$d.STENCIL_CLEAR_VALUE=2961,J$d.STENCIL_FUNC=2962,J$d.STENCIL_FAIL=2964,J$d.STENCIL_PASS_DEPTH_FAIL=2965,J$d.STENCIL_PASS_DEPTH_PASS=2966,J$d.STENCIL_REF=2967,J$d.STENCIL_VALUE_MASK=2963,J$d.STENCIL_WRITEMASK=2968,J$d.STENCIL_BACK_FUNC=34816,J$d.STENCIL_BACK_FAIL=34817,J$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,J$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,J$d.STENCIL_BACK_REF=36003,J$d.STENCIL_BACK_VALUE_MASK=36004,J$d.STENCIL_BACK_WRITEMASK=36005,J$d.VIEWPORT=2978,J$d.SCISSOR_BOX=3088,J$d.COLOR_CLEAR_VALUE=3106,J$d.COLOR_WRITEMASK=3107,J$d.UNPACK_ALIGNMENT=3317,J$d.PACK_ALIGNMENT=3333,J$d.MAX_TEXTURE_SIZE=3379,J$d.MAX_VIEWPORT_DIMS=3386,J$d.SUBPIXEL_BITS=3408,J$d.RED_BITS=3410,J$d.GREEN_BITS=3411,J$d.BLUE_BITS=3412,J$d.ALPHA_BITS=3413,J$d.DEPTH_BITS=3414,J$d.STENCIL_BITS=3415,J$d.POLYGON_OFFSET_UNITS=10752,J$d.POLYGON_OFFSET_FACTOR=32824,J$d.TEXTURE_BINDING_2D=32873,J$d.SAMPLE_BUFFERS=32936,J$d.SAMPLES=32937,J$d.SAMPLE_COVERAGE_VALUE=32938,J$d.SAMPLE_COVERAGE_INVERT=32939,J$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,J$d.COMPRESSED_TEXTURE_FORMATS=34467,J$d.DONT_CARE=4352,J$d.FASTEST=4353,J$d.NICEST=4354,J$d.GENERATE_MIPMAP_HINT=33170,J$d.BYTE=5120,J$d.UNSIGNED_BYTE=5121,J$d.SHORT=5122,J$d.UNSIGNED_SHORT=5123,J$d.INT=5124,J$d.UNSIGNED_INT=5125,J$d.FLOAT=5126,J$d.DEPTH_COMPONENT=6402,J$d.ALPHA=6406,J$d.RGB=6407,J$d.RGBA=6408,J$d.LUMINANCE=6409,J$d.LUMINANCE_ALPHA=6410,J$d.UNSIGNED_SHORT_4_4_4_4=32819,J$d.UNSIGNED_SHORT_5_5_5_1=32820,J$d.UNSIGNED_SHORT_5_6_5=33635,J$d.FRAGMENT_SHADER=35632,J$d.VERTEX_SHADER=35633,J$d.MAX_VERTEX_ATTRIBS=34921,J$d.MAX_VERTEX_UNIFORM_VECTORS=36347,J$d.MAX_VARYING_VECTORS=36348,J$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,J$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,J$d.MAX_TEXTURE_IMAGE_UNITS=34930,J$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,J$d.SHADER_TYPE=35663,J$d.DELETE_STATUS=35712,J$d.LINK_STATUS=35714,J$d.VALIDATE_STATUS=35715,J$d.ATTACHED_SHADERS=35717,J$d.ACTIVE_UNIFORMS=35718,J$d.ACTIVE_ATTRIBUTES=35721,J$d.SHADING_LANGUAGE_VERSION=35724,J$d.CURRENT_PROGRAM=35725,J$d.NEVER=512,J$d.LESS=513,J$d.EQUAL=514,J$d.LEQUAL=515,J$d.GREATER=516,J$d.NOTEQUAL=517,J$d.GEQUAL=518,J$d.ALWAYS=519,J$d.KEEP=7680,J$d.REPLACE=7681,J$d.INCR=7682,J$d.DECR=7683,J$d.INVERT=5386,J$d.INCR_WRAP=34055,J$d.DECR_WRAP=34056,J$d.VENDOR=7936,J$d.RENDERER=7937,J$d.VERSION=7938,J$d.NEAREST=9728,J$d.LINEAR=9729,J$d.NEAREST_MIPMAP_NEAREST=9984,J$d.LINEAR_MIPMAP_NEAREST=9985,J$d.NEAREST_MIPMAP_LINEAR=9986,J$d.LINEAR_MIPMAP_LINEAR=9987,J$d.TEXTURE_MAG_FILTER=10240,J$d.TEXTURE_MIN_FILTER=10241,J$d.TEXTURE_WRAP_S=10242,J$d.TEXTURE_WRAP_T=10243,J$d.TEXTURE_2D=3553,J$d.TEXTURE=5890,J$d.TEXTURE_CUBE_MAP=34067,J$d.TEXTURE_BINDING_CUBE_MAP=34068,J$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,J$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,J$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,J$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,J$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,J$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,J$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,J$d.TEXTURE0=33984,J$d.TEXTURE1=33985,J$d.TEXTURE2=33986,J$d.TEXTURE3=33987,J$d.TEXTURE4=33988,J$d.TEXTURE5=33989,J$d.TEXTURE6=33990,J$d.TEXTURE7=33991,J$d.TEXTURE8=33992,J$d.TEXTURE9=33993,J$d.TEXTURE10=33994,J$d.TEXTURE11=33995,J$d.TEXTURE12=33996,J$d.TEXTURE13=33997,J$d.TEXTURE14=33998,J$d.TEXTURE15=33999,J$d.TEXTURE16=34e3,J$d.TEXTURE17=34001,J$d.TEXTURE18=34002,J$d.TEXTURE19=34003,J$d.TEXTURE20=34004,J$d.TEXTURE21=34005,J$d.TEXTURE22=34006,J$d.TEXTURE23=34007,J$d.TEXTURE24=34008,J$d.TEXTURE25=34009,J$d.TEXTURE26=34010,J$d.TEXTURE27=34011,J$d.TEXTURE28=34012,J$d.TEXTURE29=34013,J$d.TEXTURE30=34014,J$d.TEXTURE31=34015,J$d.ACTIVE_TEXTURE=34016,J$d.REPEAT=10497,J$d.CLAMP_TO_EDGE=33071,J$d.MIRRORED_REPEAT=33648,J$d.FLOAT_VEC2=35664,J$d.FLOAT_VEC3=35665,J$d.FLOAT_VEC4=35666,J$d.INT_VEC2=35667,J$d.INT_VEC3=35668,J$d.INT_VEC4=35669,J$d.BOOL=35670,J$d.BOOL_VEC2=35671,J$d.BOOL_VEC3=35672,J$d.BOOL_VEC4=35673,J$d.FLOAT_MAT2=35674,J$d.FLOAT_MAT3=35675,J$d.FLOAT_MAT4=35676,J$d.SAMPLER_2D=35678,J$d.SAMPLER_CUBE=35680,J$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,J$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,J$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,J$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,J$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,J$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,J$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,J$d.COMPILE_STATUS=35713,J$d.LOW_FLOAT=36336,J$d.MEDIUM_FLOAT=36337,J$d.HIGH_FLOAT=36338,J$d.LOW_INT=36339,J$d.MEDIUM_INT=36340,J$d.HIGH_INT=36341,J$d.FRAMEBUFFER=36160,J$d.RENDERBUFFER=36161,J$d.RGBA4=32854,J$d.RGB5_A1=32855,J$d.RGB565=36194,J$d.DEPTH_COMPONENT16=33189,J$d.STENCIL_INDEX=6401,J$d.STENCIL_INDEX8=36168,J$d.DEPTH_STENCIL=34041,J$d.RENDERBUFFER_WIDTH=36162,J$d.RENDERBUFFER_HEIGHT=36163,J$d.RENDERBUFFER_INTERNAL_FORMAT=36164,J$d.RENDERBUFFER_RED_SIZE=36176,J$d.RENDERBUFFER_GREEN_SIZE=36177,J$d.RENDERBUFFER_BLUE_SIZE=36178,J$d.RENDERBUFFER_ALPHA_SIZE=36179,J$d.RENDERBUFFER_DEPTH_SIZE=36180,J$d.RENDERBUFFER_STENCIL_SIZE=36181,J$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,J$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,J$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,J$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,J$d.COLOR_ATTACHMENT0=36064,J$d.DEPTH_ATTACHMENT=36096,J$d.STENCIL_ATTACHMENT=36128,J$d.DEPTH_STENCIL_ATTACHMENT=33306,J$d.NONE=0,J$d.FRAMEBUFFER_COMPLETE=36053,J$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,J$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,J$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,J$d.FRAMEBUFFER_UNSUPPORTED=36061,J$d.FRAMEBUFFER_BINDING=36006,J$d.RENDERBUFFER_BINDING=36007,J$d.MAX_RENDERBUFFER_SIZE=34024,J$d.INVALID_FRAMEBUFFER_OPERATION=1286,J$d.UNPACK_FLIP_Y_WEBGL=37440,J$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,J$d.CONTEXT_LOST_WEBGL=37442,J$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,J$d.BROWSER_DEFAULT_WEBGL=37444,J$d._useProgram=null,J$d._depthTest=!0,J$d._depthMask=!0,J$d._blend=!1,J$d._cullFace=!1,J$d.curBindTexTarget=null,J$d.curBindTexValue=null,J$g(J$d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),J$d}(),J$ya=function(J$a){function J$b(){J$b.__super.call(this)}J$m(J$b,"laya.webgl.display.GraphicsGL",J$h);var J$c=J$b.prototype;return J$c.setShader=function(J$a){this._saveToCmd(J$r.context._setShader,[J$a])},J$c.setIBVB=function(J$a,J$b,J$c,J$d,J$e,J$f){this._saveToCmd(J$r.context._setIBVB,[J$a,J$b,J$c,J$d,J$e,J$f])},J$c.drawParticle=function(J$a,J$b,J$c){var J$d=J$x.createParticleTemplate2D(J$c);J$d.x=J$a,J$d.y=J$b,this._saveToCmd(J$r.context._drawParticle,[J$d])},J$b}(),J$za=function(J$a){var J$c;function J$P(J$a){this._x=0,this._y=0,this._id=++J$P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,J$P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=J$P.MAXCLIPRECT,this.mOutPoint,this._canvas=J$a,this._canvas._addReference(),J$P._contextcount++,J$r.isFlash?(this._ib=J$sa.create(35044),J$qa.fillIBQuadrangle(this._ib,16)):this._ib=J$sa.QuadrangleIB,this.clear()}J$m(J$P,"laya.webgl.canvas.WebGLContext2D",J$e);var J$b=J$P.prototype;return J$b.setIsMainContext=function(){this._isMain=!0},J$b.clearBG=function(J$a,J$b,J$c,J$d){var J$e=J$wa.mainContext;J$e.clearColor(J$a,J$b,J$c,J$d),J$e.clear(16384)},J$b._getSubmits=function(){return this._submits},J$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var J$a=0,J$b=this._submits._length;J$a<J$b;J$a++)this._submits[J$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},J$b.destroy=function(){--J$P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=J$sa.QuadrangleIB&&this._ib.releaseResource()},J$b.clear=function(){this._submits||(this._other=J$c.DEFAULT,this._curMat=J$B.create(),this._vb=J$ta.create(-1),this._submits=[],this._save=[J$Y.Create(this)],this._save.length=10,this._shader2D=new J$s,this._triangleMesh=J$Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=J$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=J$P.MAXCLIPRECT,this._curSubmit=J$fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=J$T.DEFAULT;for(var J$a=0,J$b=this._submits._length;J$a<J$b;J$a++)this._submits[J$a].releaseRender(),this._submits[J$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},J$b.size=function(J$a,J$b){if(this._width!=J$a||this._height!=J$b)if(0==J$a||0==J$b){0!=this._vb._byteLength&&(this._width=J$a,this._height=J$b,this._vb.clear(),this._vb.upload());for(var J$c=0,J$d=this._submits._length;J$c<J$d;J$c++)this._submits[J$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=J$a,this._height=J$b,this._targets&&this._targets.size(J$a,J$b),this._canvas.memorySize-=this._canvas.memorySize;0===J$a&&0===J$b&&this._releaseMem()},J$b._getTransformMatrix=function(){return this._curMat},J$b.translate=function(J$a,J$b){0===J$a&&0===J$b||(J$$.save(this),this._curMat.bTransform&&(J$Z.save(this),this._curMat.transformPointN(J$C.TEMP.setTo(J$a,J$b)),J$a=J$C.TEMP.x,J$b=J$C.TEMP.y),this._x+=J$a,this._y+=J$b)},J$b.save=function(){this._save[this._save._length++]=J$Y.Create(this)},J$b.restore=function(){var J$a=this._save._length;if(!(J$a<1))for(var J$b=J$a-1;0<=J$b;J$b--){var J$c=this._save[J$b];if(J$c.restore(this),J$c.isSaveMark())return void(this._save._length=J$b)}},J$b._fillText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){void 0===J$j&&(J$j=0);var J$k=this._shader2D,J$l=this._curSubmit.shaderValue,J$m=J$e?J$oa.create(J$e):this._other.font;if(J$Q.enabled)J$k.ALPHA!==J$l.ALPHA&&(J$k.glTexture=null),J$na.drawText(this,J$a,J$b,this._curMat,J$m,J$i||this._other.textAlign,J$f,J$g,J$h,J$c,J$d,J$j);else{this._shader2D.defines.getValue();var J$n=J$f?J$o.create(J$f)._color:J$k.colorAdd;J$k.ALPHA===J$l.ALPHA&&J$n===J$k.colorAdd&&J$l.colorAdd===J$k.colorAdd||(J$k.glTexture=null,J$k.colorAdd=J$n),J$na.drawText(this,J$a,J$b,this._curMat,J$m,J$i||this._other.textAlign,J$f,J$g,J$h,J$c,J$d,J$j)}},J$b.fillWords=function(J$a,J$b,J$c,J$d,J$e,J$f){this._fillText(null,J$a,J$b,J$c,J$d,J$e,null,-1,null,J$f)},J$b.fillBorderWords=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._fillBorderText(null,J$a,J$b,J$c,J$d,J$e,J$f,J$g,null)},J$b.fillText=function(J$a,J$b,J$c,J$d,J$e,J$f){this._fillText(J$a,null,J$b,J$c,J$d,J$e,null,-1,J$f)},J$b.strokeText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._fillText(J$a,null,J$b,J$c,J$d,null,J$e,J$f||1,J$g)},J$b.fillBorderText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){this._fillBorderText(J$a,null,J$b,J$c,J$d,J$e,J$f,J$g,J$h)},J$b._fillBorderText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){if(!J$Q.enabled)return this._fillText(J$a,J$b,J$c,J$d,J$e,null,J$g,J$h||1,J$i),void this._fillText(J$a,J$b,J$c,J$d,J$e,J$f,null,-1,J$i);var J$j=this._shader2D,J$k=this._curSubmit.shaderValue;J$j.ALPHA!==J$k.ALPHA&&(J$j.glTexture=null);var J$l=J$e?(J$P._fontTemp.setFont(J$e),J$P._fontTemp):this._other.font;J$na.drawText(this,J$a,J$b,this._curMat,J$l,J$i||this._other.textAlign,J$f,J$g,J$h||1,J$c,J$d,0)},J$b.fillRect=function(J$a,J$b,J$c,J$d,J$e){var J$f=this._vb;if(J$qa.fillRectImgVb(J$f,this._clipRect,J$a,J$b,J$c,J$d,J$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var J$g=this._shader2D.fillStyle;J$e&&(this._shader2D.fillStyle=J$T.create(J$e));var J$h=this._shader2D,J$i=this._curSubmit.shaderValue;if(J$h.fillStyle!==J$i.fillStyle||J$h.ALPHA!==J$i.ALPHA){J$h.glTexture=null;var J$j=this._curSubmit=J$fa.createSubmit(this,this._ib,J$f,(J$f._byteLength-64)/32*3,J$Aa.create(2,0));J$j.shaderValue.color=J$h.fillStyle._color._color,J$j.shaderValue.ALPHA=J$h.ALPHA,this._submits[this._submits._length++]=J$j}this._curSubmit._numEle+=6,this._shader2D.fillStyle=J$g}},J$b.fillTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){if(J$a.loaded&&J$a.bitmap&&J$a.source){var J$i=this._vb,J$j=J$a.bitmap.width,J$k=J$a.bitmap.height,J$l=J$a.uv,J$m=J$g.x%J$a.width,J$n=J$g.y%J$a.height;if(J$j!=J$h.w||J$k!=J$h.h){if(!J$h.w&&!J$h.h)switch(J$h.oy=J$h.ox=0,J$f){case"repeat":J$h.width=J$d,J$h.height=J$e;break;case"repeat-x":J$h.width=J$d,J$n<0?J$a.height+J$n>J$e?J$h.height=J$e:J$h.height=J$a.height+J$n:(J$h.oy=J$n,J$a.height+J$n>J$e?J$h.height=J$e-J$n:J$h.height=J$a.height);break;case"repeat-y":J$m<0?J$a.width+J$m>J$d?J$h.width=J$d:J$h.width=J$a.width+J$m:(J$h.ox=J$m,J$a.width+J$m>J$d?J$h.width=J$d-J$m:J$h.width=J$a.width),J$h.height=J$e;break;case"no-repeat":J$m<0?J$a.width+J$m>J$d?J$h.width=J$d:J$h.width=J$a.width+J$m:(J$h.ox=J$m,J$a.width+J$m>J$d?J$h.width=J$d-J$m:J$h.width=J$a.width),J$n<0?J$a.height+J$n>J$e?J$h.height=J$e:J$h.height=J$a.height+J$n:(J$h.oy=J$n,J$a.height+J$n>J$e?J$h.height=J$e-J$n:J$h.height=J$a.height);break;default:J$h.width=J$d,J$h.height=J$e}J$h.w=J$j,J$h.h=J$k,J$h.uv=[0,0,J$h.width/J$j,0,J$h.width/J$j,J$h.height/J$k,0,J$h.height/J$k]}if(J$b+=J$h.ox,J$c+=J$h.oy,J$m-=J$h.ox,J$n-=J$h.oy,J$qa.fillRectImgVb(J$i,this._clipRect,J$b,J$c,J$h.width,J$h.height,J$h.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var J$o=J$Ja.create(this,this._ib,J$i,(J$i._byteLength-64)/32*3,J$Aa.create(256,0)),J$p=(this._submits[this._submits._length++]=J$o).shaderValue;J$p.textureHost=J$a;var J$q=J$l[0]*J$j,J$r=J$l[1]*J$k,J$u=(J$l[2]-J$l[0])*J$j,J$v=(J$l[5]-J$l[3])*J$k,J$w=-J$m/J$j,J$x=-J$n/J$k;J$p.u_TexRange[0]=J$q/J$j,J$p.u_TexRange[1]=J$u/J$j,J$p.u_TexRange[2]=J$r/J$k,J$p.u_TexRange[3]=J$v/J$k,J$p.u_offset[0]=J$w,J$p.u_offset[1]=J$x,J$Q.enabled&&!this._isMain&&J$o.addTexture(J$a,(J$i._byteLength>>2)-16),(this._curSubmit=J$o)._renderType=10017,J$o._numEle+=6}}else this.sprite&&J$y.timer.callLater(this,this._repaintSprite)},J$b.setShader=function(J$a){J$V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=J$a},J$b.setFilters=function(J$a){J$V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=J$a,this._curSubmit=J$fa.RENDERBASE,this._renderKey=0,this._drawCount++},J$b.drawTexture=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._drawTextureM(J$a,J$b,J$c,J$d,J$e,J$f,J$g,null,1)},J$b.addTextureVb=function(J$a,J$b,J$c){var J$d=this._curSubmit._vb||this._vb,J$e=J$d._byteLength>>2;J$d.byteLength=J$e+16<<2;for(var J$f=J$d.getFloat32Array(),J$g=0;J$g<16;J$g+=4)J$f[J$e++]=J$a[J$g]+J$b,J$f[J$e++]=J$a[J$g+1]+J$c,J$f[J$e++]=J$a[J$g+2],J$f[J$e++]=J$a[J$g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),J$d._upload=!0},J$b.willDrawTexture=function(J$a,J$b){if(!(J$a.loaded&&J$a.bitmap&&J$a.source))return this.sprite&&J$y.timer.callLater(this,this._repaintSprite),0;var J$c=J$a.bitmap,J$d=J$c.id+this._shader2D.ALPHA*J$b+10016;if(J$d==this._renderKey)return J$d;var J$e=this._shader2D,J$f=J$e.ALPHA,J$g=this._curSubmit.shaderValue;J$e.ALPHA*=J$b,this._renderKey=J$d,this._drawCount++,J$e.glTexture=J$c;var J$h=this._vb,J$i=null,J$j=J$h._byteLength/32*3,J$k=J$g.textureHost&&J$g.textureHost==J$a&&J$g.textureHost.alphaTexture==J$a.alphaTexture;return J$i=J$Ja.create(this,this._ib,J$h,J$j,J$Aa.create(1,0)),(this._submits[this._submits._length++]=J$i).shaderValue.textureHost=J$a,J$i._renderType=10016,J$i._preIsSameTextureShader=10016===this._curSubmit._renderType&&J$e.ALPHA===J$g.ALPHA&&J$k,this._curSubmit=J$i,J$e.ALPHA=J$f,J$d},J$b.drawTextures=function(J$a,J$b,J$c,J$d){if(J$a.loaded&&J$a.bitmap&&J$a.source){var J$e=this._clipRect;if(this._clipRect=J$P.MAXCLIPRECT,this._drawTextureM(J$a,J$b[0],J$b[1],J$a.width,J$a.height,J$c,J$d,null,1)){if(this._clipRect=J$e,J$G.drawCall++,!(J$b.length<4)){for(var J$f=this._curSubmit._vb||this._vb,J$g=this._curMat.a,J$h=this._curMat.d,J$i=2,J$j=J$b.length;J$i<J$j;J$i+=2)J$qa.copyPreImgVb(J$f,(J$b[J$i]-J$b[J$i-2])*J$g,(J$b[J$i+1]-J$b[J$i-1])*J$h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&J$y.timer.callLater(this,this._repaintSprite)},J$b._drawTextureM=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){if(!J$a.loaded||!J$a.source)return this.sprite&&J$y.timer.callLater(this,this._repaintSprite),!1;var J$j=this._curSubmit._vb||this._vb,J$k=J$a.bitmap;J$b+=J$f,J$c+=J$g,this._drawCount++;var J$l=J$k.id+this._shader2D.ALPHA*J$i+10016;if(J$l!=this._renderKey){this._renderKey=J$l;var J$m=this._curSubmit.shaderValue,J$n=this._shader2D,J$o=J$n.ALPHA;J$n.ALPHA*=J$i,J$n.glTexture=J$k;var J$p=this._vb,J$q=null,J$r=J$p._byteLength/32*3,J$u=J$m.textureHost&&J$m.textureHost==J$a&&J$m.textureHost.alphaTexture==J$a.alphaTexture;J$q=J$Ja.create(this,this._ib,J$p,J$r,J$Aa.create(1,0)),(this._submits[this._submits._length++]=J$q).shaderValue.textureHost=J$a,J$q._renderType=10016,J$q._preIsSameTextureShader=10016===this._curSubmit._renderType&&J$n.ALPHA===J$m.ALPHA&&J$u,this._curSubmit=J$q,J$j=this._curSubmit._vb||this._vb,J$n.ALPHA=J$o}return!!J$qa.fillRectImgVb(J$j,this._clipRect,J$b,J$c,J$d||J$a.width,J$e||J$a.height,J$a.uv,J$h||this._curMat,this._x,this._y,0,0)&&(J$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(J$a,(J$j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},J$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},J$b._drawText=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){var J$k=J$a.bitmap;this._drawCount++;var J$l=J$k.id+this._shader2D.ALPHA+10016;if(J$l!=this._renderKey){this._renderKey=J$l;var J$m=this._curSubmit.shaderValue,J$n=this._shader2D;J$n.glTexture=J$k;var J$o=this._vb,J$p=null,J$q=J$o._byteLength/32*3,J$r=J$m.textureHost&&J$m.textureHost==J$a&&J$m.textureHost.alphaTexture==J$a.alphaTexture;(J$p=J$Q.enabled?J$Ja.create(this,this._ib,J$o,J$q,J$Aa.create(1,0)):J$Ja.create(this,this._ib,J$o,J$q,J$$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&J$n.ALPHA===J$m.ALPHA&&J$r,(this._submits[this._submits._length++]=J$p).shaderValue.textureHost=J$a,J$p._renderType=10016,this._curSubmit=J$p}J$a.active();var J$u=this._curSubmit._vb||this._vb;J$qa.fillRectImgVb(J$u,this._clipRect,J$b+J$g,J$c+J$h,J$d||J$a.width,J$e||J$a.height,J$a.uv,J$f||this._curMat,this._x,this._y,J$i,J$j,!0)&&(J$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(J$a,(J$u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},J$b.drawTextureWithTransform=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){if(J$f){var J$j=this._curMat,J$k=this._x,J$l=this._y;(0!==J$g||0!==J$h)&&(this._x=J$g*J$j.a+J$h*J$j.c,this._y=J$h*J$j.d+J$g*J$j.b),J$f&&J$j.bTransform?(J$B.mul(J$f,J$j,J$P._tmpMatrix),(J$f=J$P._tmpMatrix)._checkTransform()):(this._x+=J$j.tx,this._y+=J$j.ty),this._drawTextureM(J$a,J$b,J$c,J$d,J$e,0,0,J$f,J$i),this._x=J$k,this._y=J$l}else this._drawTextureM(J$a,J$b,J$c,J$d,J$e,J$g,J$h,null,J$i)},J$b.fillQuadrangle=function(J$a,J$b,J$c,J$d,J$e){var J$f=this._curSubmit,J$g=this._vb,J$h=this._shader2D,J$i=J$f.shaderValue;if(this._renderKey=0,J$a.bitmap){var J$j=J$a.bitmap;J$h.glTexture==J$j&&J$h.ALPHA===J$i.ALPHA||(J$h.glTexture=J$j,(J$f=this._curSubmit=J$fa.createSubmit(this,this._ib,J$g,J$g._byteLength/32*3,J$Aa.create(1,0))).shaderValue.glTexture=J$j,this._submits[this._submits._length++]=J$f),J$qa.fillQuadrangleImgVb(J$g,J$b,J$c,J$d,J$a.uv,J$e||this._curMat,this._x,this._y)}else J$f.shaderValue.fillStyle&&J$f.shaderValue.fillStyle.equal(J$a)&&J$h.ALPHA===J$i.ALPHA||(J$h.glTexture=null,(J$f=this._curSubmit=J$fa.createSubmit(this,this._ib,J$g,J$g._byteLength/32*3,J$Aa.create(2,0))).shaderValue.defines.add(2),J$f.shaderValue.fillStyle=J$T.create(J$a),this._submits[this._submits._length++]=J$f),J$qa.fillQuadrangleImgVb(J$g,J$b,J$c,J$d,J$K.DEF_UV,J$e||this._curMat,this._x,this._y);J$f._numEle+=6},J$b.drawTexture2=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){if(0!=J$f){var J$i=this._curMat;if(this._x=J$a*J$i.a+J$b*J$i.c,this._y=J$b*J$i.d+J$a*J$i.b,J$e&&(J$e=J$i.bTransform||J$e.bTransform?(J$B.mul(J$e,J$i,J$P._tmpMatrix),J$P._tmpMatrix):(this._x+=J$e.tx+J$i.tx,this._y+=J$e.ty+J$i.ty,J$B.EMPTY)),1!==J$f||J$g){var J$j=this._shader2D.ALPHA,J$k=this._nBlendType;this._shader2D.ALPHA=J$f,J$g&&(this._nBlendType=J$S.TOINT(J$g)),this._drawTextureM(J$h[0],J$h[1]-J$c,J$h[2]-J$d,J$h[3],J$h[4],0,0,J$e,1),this._shader2D.ALPHA=J$j,this._nBlendType=J$k}else this._drawTextureM(J$h[0],J$h[1]-J$c,J$h[2]-J$d,J$h[3],J$h[4],0,0,J$e,1);this._x=this._y=0}},J$b.drawCanvas=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$a.context;if(this._renderKey=0,J$f._targets)this._submits[this._submits._length++]=J$Ia.create(J$f,0,null),this._curSubmit=J$fa.RENDERBASE,J$f._targets.drawTo(this,J$b,J$c,J$d,J$e);else{var J$g=this._submits[this._submits._length++]=J$Ia.create(J$f,this._shader2D.ALPHA,this._shader2D.filters),J$h=J$d/J$a.width,J$i=J$e/J$a.height,J$j=J$g._matrix;this._curMat.copyTo(J$j),1!=J$h&&1!=J$i&&J$j.scale(J$h,J$i);var J$k=J$j.tx,J$l=J$j.ty;J$j.tx=J$j.ty=0,J$j.transformPoint(J$C.TEMP.setTo(J$b,J$c)),J$j.translate(J$C.TEMP.x+J$k,J$C.TEMP.y+J$l),this._curSubmit=J$fa.RENDERBASE}J$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=J$f._targets?"yellow":"green",this.strokeRect(J$b-1,J$c-1,J$d+2,J$e+2,1),this.strokeRect(J$b,J$c,J$d,J$e,1),this.restore())},J$b.drawTarget=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){void 0===J$j&&(J$j=-1);var J$k=this._vb;if(J$qa.fillRectImgVb(J$k,this._clipRect,J$b,J$c,J$d,J$e,J$i||J$K.DEF_UV,J$f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var J$l=this._curSubmit=J$la.create(this,this._ib,J$k,(J$k._byteLength-64)/32*3,J$h,J$g);J$l.blendType=-1==J$j?this._nBlendType:J$j,J$l.scope=J$a,this._submits[this._submits._length++]=J$l,this._curSubmit._numEle+=6}},J$b.mixRGBandAlpha=function(J$a){return this._mixRGBandAlpha(J$a,this._shader2D.ALPHA)},J$b._mixRGBandAlpha=function(J$a,J$b){var J$c=(4278190080&J$a)>>>24;return 0!=J$c?J$c*=J$b:J$c=255*J$b,16777215&J$a|J$c<<24},J$b.drawTriangles=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){if(!J$a.loaded||!J$a.source)return this.sprite&&J$y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;J$a.bitmap;var J$k=this._mixRGBandAlpha(4294967295,J$h),J$l=(J$d.length,J$f.length);this._renderKey=-1;var J$m=this._curSubmit=J$Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,J$Aa.create(1,0));return J$m.shaderValue.textureHost=J$a,J$m._renderType=10016,this._submits[this._submits._length++]=J$m,J$g?(J$P._tmpMatrix.a=J$g.a,J$P._tmpMatrix.b=J$g.b,J$P._tmpMatrix.c=J$g.c,J$P._tmpMatrix.d=J$g.d,J$P._tmpMatrix.tx=J$g.tx+J$b,J$P._tmpMatrix.ty=J$g.ty+J$c,J$B.mul(J$P._tmpMatrix,this._curMat,J$P._tmpMatrix)):(J$P._tmpMatrix.a=this._curMat.a,J$P._tmpMatrix.b=this._curMat.b,J$P._tmpMatrix.c=this._curMat.c,J$P._tmpMatrix.d=this._curMat.d,J$P._tmpMatrix.tx=this._curMat.tx+J$b,J$P._tmpMatrix.ty=this._curMat.ty+J$c),this._triangleMesh.addData(J$d,J$e,J$f,J$P._tmpMatrix,J$k,this),this._curSubmit._numEle+=J$l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},J$b.transform=function(J$a,J$b,J$c,J$d,J$e,J$f){J$Z.save(this),J$B.mul(J$B.TEMP.setTo(J$a,J$b,J$c,J$d,J$e,J$f),this._curMat,this._curMat),this._curMat._checkTransform()},J$b.setTransformByMatrix=function(J$a){J$a.copyTo(this._curMat)},J$b.transformByMatrix=function(J$a){J$Z.save(this),J$B.mul(J$a,this._curMat,this._curMat),this._curMat._checkTransform()},J$b.rotate=function(J$a){J$Z.save(this),this._curMat.rotateEx(J$a)},J$b.scale=function(J$a,J$b){J$Z.save(this),this._curMat.scaleEx(J$a,J$b)},J$b.clipRect=function(J$a,J$b,J$c,J$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var J$e=J$ka.create(4);this.addRenderObject(J$e);var J$f=this._vb,J$g=J$f._byteLength>>2;if(J$qa.fillRectImgVb(J$f,null,J$a,J$b,J$c,J$d,J$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var J$h=this._curSubmit=J$fa.createSubmit(this,this._ib,J$f,(J$f._byteLength-64)/32*3,J$Aa.create(2,0));J$h.shaderValue.ALPHA=1,this._submits[this._submits._length++]=J$h,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var J$i=J$ka.create(5);this.addRenderObject(J$i);var J$j=J$f.getFloat32Array(),J$k=Math.min(Math.min(Math.min(J$j[0+J$g],J$j[4+J$g]),J$j[8+J$g]),J$j[12+J$g]),J$l=Math.max(Math.max(Math.max(J$j[0+J$g],J$j[4+J$g]),J$j[8+J$g]),J$j[12+J$g]),J$m=Math.min(Math.min(Math.min(J$j[1+J$g],J$j[5+J$g]),J$j[9+J$g]),J$j[13+J$g]),J$n=Math.max(Math.max(Math.max(J$j[1+J$g],J$j[5+J$g]),J$j[9+J$g]),J$j[13+J$g]);J$X.save(this,J$i,J$a,J$b,J$c,J$d,J$k,J$m,J$l-J$k,J$n-J$m),this._curSubmit=J$fa.RENDERBASE}else{J$c*=this._curMat.a,J$d*=this._curMat.d;var J$o=J$C.TEMP;this._curMat.transformPoint(J$o.setTo(J$a,J$b)),J$c<0&&(J$o.x=J$o.x+J$c,J$c=-J$c),J$d<0&&(J$o.y=J$o.y+J$d,J$d=-J$d),this._renderKey=0;var J$p=this._curSubmit=J$ja.create(this);(this._submits[this._submits._length++]=J$p).submitIndex=this._submits._length,J$p.submitLength=9999999,J$W.save(this,J$p);var J$q=this._clipRect,J$r=J$q.x,J$u=J$q.y,J$v=J$o.x+J$c,J$w=J$o.y+J$d;J$r<J$o.x&&(J$q.x=J$o.x),J$u<J$o.y&&(J$q.y=J$o.y),J$q.width=Math.min(J$v,J$r+J$q.width)-J$q.x,J$q.height=Math.min(J$w,J$u+J$q.height)-J$q.y,this._shader2D.glTexture=null,J$p.clipRect.copyFrom(J$q),this._curSubmit=J$fa.RENDERBASE}},J$b.setIBVB=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k){if(void 0===J$i&&(J$i=0),void 0===J$j&&(J$j=0),void 0===J$k&&(J$k=0),null===J$c){if(J$r.isFlash){var J$l=J$d;J$l._selfIB||(J$l._selfIB=J$sa.create(35044)),J$l._selfIB.clear(),J$c=J$l._selfIB}else J$c=this._ib;J$qa.expandIBQuadrangle(J$c,J$d._byteLength/(4*J$d.vertexStride*4))}if(!J$h||!J$g)throw Error("setIBVB must input:shader shaderValues");var J$m=J$ia.create(this,J$d,J$c,J$e,J$g,J$h,J$i,J$j,J$k);J$f||(J$f=J$B.EMPTY),J$f.translate(J$a,J$b),J$B.mul(J$f,this._curMat,J$m._mat),J$f.translate(-J$a,-J$b),this._submits[this._submits._length++]=J$m,this._curSubmit=J$fa.RENDERBASE,this._renderKey=0},J$b.addRenderObject=function(J$a){this._submits[this._submits._length++]=J$a},J$b.fillTrangles=function(J$a,J$b,J$c,J$d,J$e){var J$f=this._curSubmit,J$g=this._vb,J$h=this._shader2D,J$i=J$f.shaderValue,J$j=J$d.length>>4,J$k=J$a.bitmap;this._renderKey=0,J$h.glTexture==J$k&&J$h.ALPHA===J$i.ALPHA||((J$f=this._curSubmit=J$fa.createSubmit(this,this._ib,J$g,J$g._byteLength/32*3,J$Aa.create(1,0))).shaderValue.textureHost=J$a,this._submits[this._submits._length++]=J$f),J$qa.fillTranglesVB(J$g,J$b,J$c,J$d,J$e||this._curMat,this._x,this._y),J$f._numEle+=6*J$j},J$b.submitElement=function(J$a,J$b){var J$c=this._submits;for(J$b<0&&(J$b=J$c._length);J$a<J$b;)J$a+=J$c[J$a].renderSubmit()},J$b.finish=function(){J$wa.mainContext.finish()},J$b.flush=function(){var J$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(J$a>this._ib.bufferLength/12&&J$qa.expandIBQuadrangle(this._ib,J$a),!this._isMain&&J$Q.enabled&&J$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=J$Q._atlasRestore;for(var J$b=this._submits,J$c=0,J$d=J$b._length;J$c<J$d;J$c++){var J$e=J$b[J$c];10016===J$e.getRenderType()&&J$e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),J$ba.instance&&J$ba.getInstance().reset();var J$f;for(J$c=0,J$f=this.meshlist.length;J$c<J$f;J$c++){var J$g=this.meshlist[J$c];J$g.canReuse?J$g.releaseMesh():J$g.destroy()}return this.meshlist.length=0,this._curSubmit=J$fa.RENDERBASE,this._renderKey=0,this._triangleMesh=J$Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},J$b.setPathId=function(J$a){if(this.mId=J$a,-1!=this.mId){this.mHaveKey=!1;var J$b=J$M.getInstance();J$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,J$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},J$b.movePath=function(J$a,J$b){var J$c=J$a,J$d=J$b;J$a=this._curMat.a*J$c+this._curMat.c*J$d+this._curMat.tx,J$b=this._curMat.b*J$c+this._curMat.d*J$d+this._curMat.ty,this.mX+=J$a,this.mY+=J$b},J$b.beginPath=function(){var J$a=this._getPath();J$a.tempArray.length=0,J$a.closePath=!1,this.mX=0,this.mY=0},J$b.closePath=function(){this._path.closePath=!0},J$b.fill=function(J$a){void 0===J$a&&(J$a=!1);var J$b=this._getPath();this.drawPoly(0,0,J$b.tempArray,this.fillStyle._color.numColor,0,0,J$a)},J$b.stroke=function(){var J$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)J$a.drawLine(0,0,J$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var J$b=J$M.getInstance().shapeLineDic[this.mId];J$b.rebuild(J$a.tempArray),J$a.setGeomtry(J$b)}else J$M.getInstance().addLine(this.mId,J$a.drawLine(0,0,J$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));J$a.update();var J$c=[this.mX,this.mY],J$d=J$fa.createShape(this,J$a.ib,J$a.vb,J$a.count,J$a.offset,J$Aa.create(4,0));J$d.shaderValue.ALPHA=this._shader2D.ALPHA,J$d.shaderValue.u_pos=J$c,J$d.shaderValue.u_mmat2=J$ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=J$d,this._renderKey=-1}},J$b.line=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=this._curSubmit,J$h=this._vb;if(J$qa.fillLineVb(J$h,this._clipRect,J$a,J$b,J$c,J$d,J$e,J$f)){this._renderKey=0;var J$i=this._shader2D,J$j=J$g.shaderValue;J$i.strokeStyle===J$j.strokeStyle&&J$i.ALPHA===J$j.ALPHA||(J$i.glTexture=null,(J$g=this._curSubmit=J$fa.createSubmit(this,this._ib,J$h,(J$h._byteLength-64)/32*3,J$Aa.create(2,0))).shaderValue.strokeStyle=J$i.strokeStyle,J$g.shaderValue.mainID=2,J$g.shaderValue.ALPHA=J$i.ALPHA,this._submits[this._submits._length++]=J$g),J$g._numEle+=6}},J$b.moveTo=function(J$a,J$b,J$c){void 0===J$c&&(J$c=!0);var J$d=this._getPath();if(J$c){var J$e=J$a,J$f=J$b;J$a=this._curMat.a*J$e+this._curMat.c*J$f,J$b=this._curMat.b*J$e+this._curMat.d*J$f}J$d.addPoint(J$a,J$b)},J$b.lineTo=function(J$a,J$b,J$c){void 0===J$c&&(J$c=!0);var J$d=this._getPath();if(J$c){var J$e=J$a,J$f=J$b;J$a=this._curMat.a*J$e+this._curMat.c*J$f,J$b=this._curMat.b*J$e+this._curMat.d*J$f}J$d.addPoint(J$a,J$b)},J$b.drawCurves=function(J$a,J$b,J$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=J$c[3],this.lineWidth=J$c[4];var J$d=J$c[2];J$a+=J$c[0],J$b+=J$c[1],this.movePath(J$a,J$b),this.moveTo(J$d[0],J$d[1]);for(var J$e=2,J$f=J$d.length;J$e<J$f;)this.quadraticCurveTo(J$d[J$e++],J$d[J$e++],J$d[J$e++],J$d[J$e++]);this.stroke()},J$b.arcTo=function(J$a,J$b,J$c,J$d,J$e){if(-1==this.mId||!this.mHaveKey){var J$f=0,J$g=0,J$h=0,J$i=this._getPath();this._curMat.copyTo(J$P._tmpMatrix),J$P._tmpMatrix.tx=J$P._tmpMatrix.ty=0,J$P._tempPoint.setTo(J$i.getEndPointX(),J$i.getEndPointY()),J$P._tmpMatrix.invertTransformPoint(J$P._tempPoint);var J$j=J$P._tempPoint.x-J$a,J$k=J$P._tempPoint.y-J$b,J$l=Math.sqrt(J$j*J$j+J$k*J$k);if(!(J$l<=1e-6)){var J$m=J$j/J$l,J$n=J$k/J$l,J$o=J$c-J$a,J$p=J$d-J$b,J$q=J$o*J$o+J$p*J$p,J$r=Math.sqrt(J$q);if(!(J$r<=1e-6)){var J$u=J$o/J$r,J$v=J$p/J$r,J$w=J$m+J$u,J$x=J$n+J$v,J$y=Math.sqrt(J$w*J$w+J$x*J$x);if(!(J$y<=1e-6)){var J$z=J$w/J$y,J$A=J$x/J$y,J$B=Math.acos(J$z*J$m+J$A*J$n),J$C=Math.PI/2-J$B,J$D=(J$l=J$e/Math.tan(J$C))*J$m+J$a,J$E=J$l*J$n+J$b,J$F=Math.sqrt(J$l*J$l+J$e*J$e),J$G=J$a+J$z*J$F,J$H=J$b+J$A*J$F,J$I=0,J$J=0;if(0<=J$m*J$v-J$n*J$u){var J$K=2*J$C/J$P.SEGNUM;J$I=Math.sin(J$K),J$J=Math.cos(J$K)}else J$K=2*-J$C/J$P.SEGNUM,J$I=Math.sin(J$K),J$J=Math.cos(J$K);J$g=this._curMat.a*J$D+this._curMat.c*J$E,J$h=this._curMat.b*J$D+this._curMat.d*J$E,J$g==this._path.getEndPointX()&&J$h==this._path.getEndPointY()||J$i.addPoint(J$g,J$h);var J$L=J$D-J$G,J$M=J$E-J$H;for(J$f=0;J$f<J$P.SEGNUM;J$f++){var J$N=J$L*J$J+J$M*J$I,J$O=-J$L*J$I+J$M*J$J;J$g=J$N+J$G,J$h=J$O+J$H,J$a=this._curMat.a*J$g+this._curMat.c*J$h,J$h=J$b=this._curMat.b*J$g+this._curMat.d*J$h,(J$g=J$a)==this._path.getEndPointX()&&J$h==this._path.getEndPointY()||J$i.addPoint(J$g,J$h),J$L=J$N,J$M=J$O}}}}}},J$b.arc=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!0),-1!=this.mId){var J$h=J$M.getInstance().shapeDic[this.mId];if(J$h&&this.mHaveKey&&!J$h.needUpdate(this._curMat))return;J$b=J$a=0}var J$i,J$j=0,J$k=0,J$l=0,J$m=0,J$n=0,J$o=0,J$p=0;if(J$k=J$e-J$d,J$f)if(Math.abs(J$k)>=2*Math.PI)J$k=2*-Math.PI;else for(;0<J$k;)J$k-=2*Math.PI;else if(Math.abs(J$k)>=2*Math.PI)J$k=2*Math.PI;else for(;J$k<0;)J$k+=2*Math.PI;J$i=J$k/(J$p=J$c<101?Math.max(10,J$k*J$c/5):J$c<201?Math.max(10,J$k*J$c/20):Math.max(10,J$k*J$c/40))/2,J$l=Math.abs(4/3*(1-Math.cos(J$i))/Math.sin(J$i)),J$f&&(J$l=-J$l);var J$q=this._getPath(),J$r=NaN,J$u=NaN;for(J$o=0;J$o<=J$p;J$o++)J$j=J$d+J$k*(J$o/J$p),J$m=J$a+Math.cos(J$j)*J$c,J$n=J$b+Math.sin(J$j)*J$c,J$g&&(J$r=J$m,J$u=J$n,J$m=this._curMat.a*J$r+this._curMat.c*J$u,J$n=this._curMat.b*J$r+this._curMat.d*J$u),J$m==this._path.getEndPointX()&&J$n==this._path.getEndPointY()||J$q.addPoint(J$m,J$n);J$m=J$a+Math.cos(J$e)*J$c,J$n=J$b+Math.sin(J$e)*J$c,J$g&&(J$r=J$m,J$u=J$n,J$m=this._curMat.a*J$r+this._curMat.c*J$u,J$n=this._curMat.b*J$r+this._curMat.d*J$u),J$m==this._path.getEndPointX()&&J$n==this._path.getEndPointY()||J$q.addPoint(J$m,J$n)},J$b.quadraticCurveTo=function(J$a,J$b,J$c,J$d){var J$e=J$l.I,J$f=J$c,J$g=J$d;J$c=this._curMat.a*J$f+this._curMat.c*J$g,J$d=this._curMat.b*J$f+this._curMat.d*J$g,J$f=J$a,J$g=J$b,J$a=this._curMat.a*J$f+this._curMat.c*J$g,J$b=this._curMat.b*J$f+this._curMat.d*J$g;for(var J$h=J$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),J$a,J$b,J$c,J$d],30,2),J$i=0,J$j=J$h.length/2;J$i<J$j;J$i++)this.lineTo(J$h[2*J$i],J$h[2*J$i+1],!1);this.lineTo(J$c,J$d,!1)},J$b.rect=function(J$a,J$b,J$c,J$d){this._other=this._other.make(),this._other.path||(this._other.path=new J$U),this._other.path.rect(J$a,J$b,J$c,J$d)},J$b.strokeRect=function(J$a,J$b,J$c,J$d,J$e){var J$f=.5*J$e;this.line(J$a-J$f,J$b,J$a+J$c+J$f,J$b,J$e,this._curMat),this.line(J$a+J$c,J$b,J$a+J$c,J$b+J$d,J$e,this._curMat),this.line(J$a,J$b,J$a,J$b+J$d,J$e,this._curMat),this.line(J$a-J$f,J$b+J$d,J$a+J$c+J$f,J$b+J$d,J$e,this._curMat)},J$b.clip=function(){},J$b.drawPoly=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){void 0===J$g&&(J$g=!1),this._renderKey=0,this._shader2D.glTexture=null;var J$h=this._getPath();if(-1==this.mId)J$h.polygon(J$a,J$b,J$c,J$d,J$e||1,J$f);else if(this.mHaveKey){var J$i=J$M.getInstance().shapeDic[this.mId];J$i.setMatrix(this._curMat),J$i.rebuild(J$h.tempArray),J$h.setGeomtry(J$i)}else{var J$j=J$h.polygon(J$a,J$b,J$c,J$d,J$e||1,J$f);J$M.getInstance().addShape(this.mId,J$j),J$j.setMatrix(this._curMat)}J$h.update();var J$k,J$l=[this.mX,this.mY];if((J$k=J$fa.createShape(this,J$h.ib,J$h.vb,J$h.count,J$h.offset,J$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,J$k.shaderValue.u_pos=J$l,J$k.shaderValue.u_mmat2=J$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=J$k,0<J$e){if(this.mHaveLineKey){var J$m=J$M.getInstance().shapeLineDic[this.mId];J$m.rebuild(J$h.tempArray),J$h.setGeomtry(J$m)}else J$M.getInstance().addShape(this.mId,J$h.drawLine(J$a,J$b,J$c,J$e,J$f));J$h.update(),(J$k=J$fa.createShape(this,J$h.ib,J$h.vb,J$h.count,J$h.offset,J$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,J$k.shaderValue.u_mmat2=J$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=J$k}},J$b.drawParticle=function(J$a,J$b,J$c){J$c.x=J$a,J$c.y=J$b,this._submits[this._submits._length++]=J$c},J$b._getPath=function(){return this._path||(this._path=new J$U)},J$d(0,J$b,"globalCompositeOperation",function(){return J$S.NAMES[this._nBlendType]},function(J$a){var J$b=J$S.TOINT[J$a];null==J$b||this._nBlendType===J$b||(J$V.save(this,65536,this,!0),this._curSubmit=J$fa.RENDERBASE,this._renderKey=0,this._nBlendType=J$b)}),J$d(0,J$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(J$a){this._shader2D.strokeStyle.equal(J$a)||(J$V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=J$T.create(J$a))}),J$d(0,J$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(J$a){(J$a=Math.floor(1e3*J$a)/1e3)!=this._shader2D.ALPHA&&(J$V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=J$a)}),J$d(0,J$b,"asBitmap",null,function(J$a){if(J$a){if(this._targets||(this._targets=new J$_),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),J$d(0,J$b,"fillStyle",function(){return this._shader2D.fillStyle},function(J$a){this._shader2D.fillStyle.equal(J$a)||(J$V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=J$T.create(J$a))}),J$d(0,J$b,"textAlign",function(){return this._other.textAlign},function(J$a){this._other.textAlign===J$a||(this._other=this._other.make(),J$V.save(this,32768,this._other,!1),this._other.textAlign=J$a)}),J$d(0,J$b,"lineWidth",function(){return this._other.lineWidth},function(J$a){this._other.lineWidth===J$a||(this._other=this._other.make(),J$V.save(this,256,this._other,!1),this._other.lineWidth=J$a)}),J$d(0,J$b,"textBaseline",function(){return this._other.textBaseline},function(J$a){this._other.textBaseline===J$a||(this._other=this._other.make(),J$V.save(this,16384,this._other,!1),this._other.textBaseline=J$a)}),J$d(0,J$b,"font",null,function(J$a){J$a!=this._other.font.toString()&&(this._other=this._other.make(),J$V.save(this,8,this._other,!1),this._other.font===J$oa.EMPTY?this._other.font=new J$oa(J$a):this._other.font.setFont(J$a))}),J$P.__init__=function(){J$c.DEFAULT=new J$c},J$P._tempPoint=new J$C,J$P._SUBMITVBSIZE=32e3,J$P._MAXSIZE=99999999,J$P._RECTVBSIZE=16,J$P.MAXCLIPRECT=new J$D(0,0,99999999,99999999),J$P._COUNT=0,J$P._tmpMatrix=new J$B,J$P.SEGNUM=32,J$P._contextcount=0,J$g(J$P,["_fontTemp",function(){return this._fontTemp=new J$oa},"_drawStyleTemp",function(){return this._drawStyleTemp=new J$T(null)}]),J$P.__init$=function(){J$c=function(){function J$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=J$oa.EMPTY}J$m(J$a,"");var J$b=J$a.prototype;return J$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=J$oa.EMPTY},J$b.make=function(){return this===J$a.DEFAULT?new J$a:this},J$a.DEFAULT=null,J$a}()},J$P}(),J$Aa=function(J$a){function J$d(J$a,J$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,J$d.__super.call(this),this.defines=new J$Ea,this.position=J$d._POSITION,this.mainID=J$a,this.subID=J$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.colorMul=J$c.ShieldColor?J$o.create(J$c.ShieldColor)._color:null,this.glTexture=null,this.u_mmat2=null,this._cacheID=J$a|J$b,this._inClassCache=J$d._cache[this._cacheID],0<J$a&&!this._inClassCache&&(this._inClassCache=J$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}J$m(J$d,"laya.webgl.shader.d2.value.Value2D",J$O);var J$b=J$d.prototype;return J$b.setValue=function(J$a){},J$b.refresh=function(){var J$a=this.size;return J$a[0]=J$ua.width,J$a[1]=J$ua.height,this.alpha=this.ALPHA*J$ua.worldAlpha,this.mmat=J$ua.worldMatrix4,this},J$b._ShaderWithCompile=function(){return J$Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,J$_a.create)},J$b._withWorldShaderDefines=function(){var J$a=J$ua.worldShaderDefines,J$b=J$Ya.sharders[this.mainID|this.defines._value|J$a.getValue()];if(!J$b){var J$c,J$d={};for(J$c in this.defines.toNameDic())J$d[J$c]="";for(J$c in J$a.toNameDic())J$d[J$c]="";J$b=J$Ya.withCompile2D(0,this.mainID,J$d,this.mainID|this.defines._value|J$a.getValue(),J$_a.create)}var J$e=J$ua.worldFilters;if(!J$e)return J$b;for(var J$f,J$g=J$e.length,J$h=0;J$h<J$g;J$h++)(J$f=J$e[J$h])&&J$f.action.setValue(this);return J$b},J$b.upload=function(){var J$a=J$ua;this.alpha=this.ALPHA*J$a.worldAlpha,J$ua.worldMatrix4!==J$ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),this.colorMul?this.defines.add(16384):this.defines.remove(16384),J$wa.shaderHighPrecision&&this.defines.add(1024);var J$b,J$c=J$a.worldShaderDefines?this._withWorldShaderDefines():J$Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=J$a.width,this.size[1]=J$a.height,this.mmat=J$a.worldMatrix4,J$La.activeShader!==J$c?J$c._shaderValueWidth!==J$a.width||J$c._shaderValueHeight!==J$a.height?(J$c._shaderValueWidth=J$a.width,J$c._shaderValueHeight=J$a.height):J$b=J$c._params2dQuick2||J$c._make2dQuick2():J$c._shaderValueWidth!==J$a.width||J$c._shaderValueHeight!==J$a.height?(J$c._shaderValueWidth=J$a.width,J$c._shaderValueHeight=J$a.height):J$b=J$c._params2dQuick1||J$c._make2dQuick1(),J$c.upload(this,J$b)},J$b.setFilters=function(J$a){if(this.filters=J$a)for(var J$b,J$c=J$a.length,J$d=0;J$d<J$c;J$d++)(J$b=J$a[J$d])&&(this.defines.add(J$b.type),J$b.action.setValue(this))},J$b.clear=function(){this.defines.setValue(this.subID)},J$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},J$d._initone=function(J$a,J$b){J$d._typeClass[J$a]=J$b,J$d._cache[J$a]=[],J$d._cache[J$a]._length=0},J$d.__init__=function(){J$d._POSITION=[2,5126,!1,4*J$pa.BYTES_PE,0],J$d._TEXCOORD=[2,5126,!1,4*J$pa.BYTES_PE,2*J$pa.BYTES_PE],J$d._initone(2,J$Pa),J$d._initone(4,J$Sa),J$d._initone(256,J$Qa),J$d._initone(512,J$Oa),J$d._initone(1,J$Ra),J$d._initone(65,J$$a),J$d._initone(9,J$Ra)},J$d.create=function(J$a,J$b){var J$c=J$d._cache[J$a|J$b];return J$c._length?J$c[--J$c._length]:new J$d._typeClass[J$a|J$b](J$b)},J$d._POSITION=null,J$d._TEXCOORD=null,J$d._cache=[],J$d._typeClass=[],J$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J$d}(),J$Ba=function(J$a){function J$q(J$a,J$b){J$q.__super.call(this,J$a,J$b)}J$m(J$q,"laya.webgl.utils.RenderSprite3D",J$u);var J$b=J$q.prototype;return J$b.onCreate=function(J$a){switch(J$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},J$b._mask=function(J$a,J$b,J$c,J$d){var J$e,J$f,J$g=this._next,J$h=J$a.mask;if(J$h){J$b.ctx.save();var J$i=J$b.ctx.globalCompositeOperation,J$j=new J$D;if(J$j.copyFrom(J$h.getBounds()),J$j.width=Math.round(J$j.width),J$j.height=Math.round(J$j.height),J$j.x=Math.round(J$j.x),J$j.y=Math.round(J$j.y),0<J$j.width&&0<J$j.height){var J$k=J$a._style._tf,J$l=J$ha.create();J$l.addValue("bounds",J$j),J$e=J$ga.create([J$l,J$b],laya.webgl.utils.RenderSprite3D.tmpTarget),J$b.addRenderObject(J$e),J$h.render(J$b,-J$j.x,-J$j.y),J$e=J$ga.create([J$l],laya.webgl.utils.RenderSprite3D.endTmpTarget),J$b.addRenderObject(J$e),J$b.ctx.save(),J$b.clipRect(J$c-J$k.translateX+J$j.x,J$d-J$k.translateY+J$j.y,J$j.width,J$j.height),J$g._fun.call(J$g,J$a,J$b,J$c,J$d),J$b.ctx.restore(),J$f=J$ka.create(6),J$i=J$b.ctx.globalCompositeOperation,J$f.blendMode="mask",J$b.addRenderObject(J$f),J$B.TEMP.identity();var J$m=J$Aa.create(1,0),J$n=J$K.INV_UV,J$o=J$j.width,J$p=J$j.height;(J$j.width<32||J$j.height<32)&&((J$n=J$q.tempUV)[0]=0,J$n[1]=0,J$n[2]=32<=J$j.width?1:J$j.width/32,J$n[3]=0,J$n[4]=32<=J$j.width?1:J$j.width/32,J$n[5]=32<=J$j.height?1:J$j.height/32,J$n[6]=0,J$n[7]=32<=J$j.height?1:J$j.height/32,J$j.width=32<=J$j.width?J$j.width:32,J$j.height=32<=J$j.height?J$j.height:32,J$n[1]*=-1,J$n[3]*=-1,J$n[5]*=-1,J$n[7]*=-1,J$n[1]+=1,J$n[3]+=1,J$n[5]+=1,J$n[7]+=1),J$b.ctx.drawTarget(J$l,J$c+J$j.x-J$k.translateX,J$d+J$j.y-J$k.translateY,J$o,J$p,J$B.TEMP,"tmpTarget",J$m,J$n,6),J$e=J$ga.create([J$l],laya.webgl.utils.RenderSprite3D.recycleTarget),J$b.addRenderObject(J$e),(J$f=J$ka.create(6)).blendMode=J$i,J$b.addRenderObject(J$f)}J$b.ctx.restore()}else J$g._fun.call(J$g,J$a,J$b,J$c,J$d)},J$b._blend=function(J$a,J$b,J$c,J$d){var J$e=J$a._style,J$f=this._next;J$e.blendMode?(J$b.ctx.save(),J$b.ctx.globalCompositeOperation=J$e.blendMode,J$f._fun.call(J$f,J$a,J$b,J$c,J$d),J$b.ctx.restore()):J$f._fun.call(J$f,J$a,J$b,J$c,J$d)},J$b._transform=function(J$a,J$b,J$c,J$d){var J$e=J$a.transform,J$f=this._next;if(J$e&&J$f!=J$u.NORENDER){var J$g=J$b.ctx;J$a._style;J$e.tx=J$c,J$e.ty=J$d;var J$h=J$g._getTransformMatrix(),J$i=J$h.clone();J$B.mul(J$e,J$h,J$h),J$h._checkTransform(),J$e.tx=J$e.ty=0,J$f._fun.call(J$f,J$a,J$b,0,0),J$i.copyTo(J$h),J$i.destroy()}else J$f._fun.call(J$f,J$a,J$b,J$c,J$d)},J$q.tmpTarget=function(J$a,J$b){var J$c=J$a.getValue("bounds"),J$d=J$Ma.create(J$c.width,J$c.height);J$d.start(),J$d.clear(0,0,0,0),J$a.addValue("tmpTarget",J$d)},J$q.endTmpTarget=function(J$a){J$a.getValue("tmpTarget").end()},J$q.recycleTarget=function(J$a){J$a.getValue("tmpTarget").recycle(),J$a.recycle()},J$g(J$q,["tempUV",function(){return this.tempUV=new Array(8)}]),J$q}(),J$Ca=function(J$a){function J$b(){this.data=null,J$b.__super.call(this)}J$m(J$b,"laya.filters.webgl.ColorFilterActionGL",J$N);var J$c=J$b.prototype;return J$y.imps(J$c,{"laya.filters.IFilterActionGL":!0}),J$c.setValue=function(J$a){J$a.colorMat=this.data._mat,J$a.colorAlpha=this.data._alpha},J$c.apply3d=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$a.getValue("bounds"),J$g=J$Aa.create(1,0);J$g.setFilters([this.data]);var J$h=J$B.TEMP;J$h.identity(),J$c.ctx.drawTarget(J$a,0,0,J$f.width,J$f.height,J$h,"src",J$g)},J$b}(),J$Da=function(J$a){function J$f(J$a,J$b,J$c,J$d,J$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,J$f.__super.call(this,J$a,J$b,J$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new J$Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=J$c,this._atlasCanvas.height=J$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}J$m(J$f,"laya.webgl.atlas.Atlaser",J$P);var J$b=J$f.prototype;return J$b.computeUVinAtlasTexture=function(J$a,J$b,J$c,J$d){var J$e=J$Q.atlasTextureWidth,J$f=J$Q.atlasTextureHeight,J$g=J$c/J$e,J$h=J$d/J$f,J$i=(J$c+J$a.bitmap.width)/J$e,J$j=(J$d+J$a.bitmap.height)/J$f,J$k=J$a.bitmap.width/J$e,J$l=J$a.bitmap.height/J$f;J$a.uv=[J$g+J$b[0]*J$k,J$h+J$b[1]*J$l,J$i-(1-J$b[2])*J$k,J$h+J$b[3]*J$l,J$i-(1-J$b[4])*J$k,J$j-(1-J$b[5])*J$l,J$g+J$b[6]*J$k,J$j-(1-J$b[7])*J$l]},J$b.findBitmapIsExist=function(J$a){if(J$a instanceof laya.webgl.resource.WebGLImage){var J$b=J$a,J$c=J$b.url,J$d=this._InAtlasWebGLImagesKey[J$c||J$b.id];if(J$d)return J$d.offsetInfoID}return-1},J$b.addToAtlasTexture=function(J$a,J$b,J$c){if(J$a instanceof laya.webgl.resource.WebGLImage){var J$d=J$a,J$e=J$d.url;this._InAtlasWebGLImagesKey[J$e||J$d.id]={bitmap:J$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([J$b,J$c])}this._atlasCanvas.texSubImage2D(J$b,J$c,J$a.atlasSource),J$a.clearAtlasSource()},J$b.addToAtlas=function(J$a,J$b,J$c){J$a._atlasID=this._inAtlasTextureKey.length;var J$d=J$a.uv.slice(),J$e=J$a.bitmap;this._inAtlasTextureKey.push(J$a),this._inAtlasTextureOriUVValue.push(J$d),this._inAtlasTextureBitmapValue.push(J$e),this.computeUVinAtlasTexture(J$a,J$d,J$b,J$c),J$a.bitmap=this._atlasCanvas},J$b.clear=function(){for(var J$a=0,J$b=this._inAtlasTextureKey.length;J$a<J$b;J$a++)this._inAtlasTextureKey[J$a].bitmap=this._inAtlasTextureBitmapValue[J$a],this._inAtlasTextureKey[J$a].uv=this._inAtlasTextureOriUVValue[J$a],this._inAtlasTextureKey[J$a]._atlasID=-1,this._inAtlasTextureKey[J$a].bitmap.lock=!1,this._inAtlasTextureKey[J$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},J$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},J$d(0,J$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),J$d(0,J$b,"texture",function(){return this._atlasCanvas}),J$d(0,J$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),J$f}(),J$Ea=function(J$a){function J$c(){J$c.__super.call(this,J$c.__name2int,J$c.__int2name,J$c.__int2nameMap)}return J$m(J$c,"laya.webgl.shader.d2.ShaderDefines2D",J$t),J$c.__init__=function(){J$c.reg("TEXTURE2D",1),J$c.reg("COLOR2D",2),J$c.reg("PRIMITIVE",4),J$c.reg("GLOW_FILTER",8),J$c.reg("BLUR_FILTER",16),J$c.reg("COLOR_FILTER",32),J$c.reg("COLOR_ADD",64),J$c.reg("WORLDMAT",128),J$c.reg("FILLTEXTURE",256),J$c.reg("FSHIGHPRECISION",1024),J$c.reg("TXTALPHA",2048),J$c.reg("TXTCOMPRESS",4096),J$c.reg("COLORMUL",16384)},J$c.reg=function(J$a,J$b){J$t._reg(J$a,J$b,J$c.__name2int,J$c.__int2name)},J$c.toText=function(J$a,J$b,J$c){return J$t._toText(J$a,J$b,J$c)},J$c.toInt=function(J$a){return J$t._toInt(J$a,J$c.__name2int)},J$c.TEXTURE2D=1,J$c.COLOR2D=2,J$c.PRIMITIVE=4,J$c.FILTERGLOW=8,J$c.FILTERBLUR=16,J$c.FILTERCOLOR=32,J$c.COLORADD=64,J$c.WORLDMAT=128,J$c.FILLTEXTURE=256,J$c.SKINMESH=512,J$c.SHADERDEFINE_FSHIGHPRECISION=1024,J$c.TXTALPHA=2048,J$c.TXTCOMPRESS=4096,J$c.COLORMUL=16384,J$c.__name2int={},J$c.__int2name=[],J$c.__int2nameMap=[],J$c}(),J$Fa=(function(J$a){function J$h(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$h.__super.call(this,J$a,J$b,J$c,J$d,40,J$e,J$f,J$g)}J$m(J$h,"laya.webgl.shapes.Ellipse",J$ca)}(),function(J$a){function J$f(J$a,J$b,J$c,J$d,J$e){this._points=[],this.rebuild(J$c),J$f.__super.call(this,J$a,J$b,0,0,0,J$e,J$d,J$e,0)}J$m(J$f,"laya.webgl.shapes.Line",J$ca);var J$b=J$f.prototype;return J$b.rebuild=function(J$a){var J$b=J$a.length;J$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(J$b/2-1)),this.mFloat32Array=new Float32Array(5*J$b)),this._points.length=0;for(var J$c=NaN,J$d=NaN,J$e=-1,J$f=-1,J$g=J$a.length/2,J$h=0;J$h<J$g;J$h++)J$c=J$a[2*J$h],J$d=J$a[2*J$h+1],(.01<Math.abs(J$e-J$c)||.01<Math.abs(J$f-J$d))&&this._points.push(J$c,J$d),J$e=J$c,J$f=J$d},J$b.getData=function(J$a,J$b,J$c){var J$d=[],J$e=[];0<this.borderWidth&&this.createLine2(this._points,J$d,this.borderWidth,J$c,J$e,this._points.length/2),this.mUint16Array.set(J$d,0),this.mFloat32Array.set(J$e,0),J$a.append(this.mUint16Array),J$b.append(this.mFloat32Array)},J$f}()),J$Ga=function(J$a){function J$l(J$a,J$b,J$c,J$d,J$e){this._points=[];for(var J$f=NaN,J$g=NaN,J$h=-1,J$i=-1,J$j=J$c.length/2-1,J$k=0;J$k<J$j;J$k++)J$f=J$c[2*J$k],J$g=J$c[2*J$k+1],(.01<Math.abs(J$h-J$f)||.01<Math.abs(J$i-J$g))&&this._points.push(J$f,J$g),J$h=J$f,J$i=J$g;J$f=J$c[2*J$j],J$g=J$c[2*J$j+1],J$h=this._points[0],J$i=this._points[1],(.01<Math.abs(J$h-J$f)||.01<Math.abs(J$i-J$g))&&this._points.push(J$f,J$g),J$l.__super.call(this,J$a,J$b,0,0,this._points.length/2,0,J$d,J$e)}J$m(J$l,"laya.webgl.shapes.LoopLine",J$ca);var J$b=J$l.prototype;return J$b.getData=function(J$a,J$b,J$c){if(0<this.borderWidth){for(var J$d=this.color,J$e=(J$d>>16&255)/255,J$f=(J$d>>8&255)/255,J$g=(255&J$d)/255,J$h=[],J$i=0,J$j=0,J$k=[],J$l=Math.floor(this._points.length/2),J$m=0;J$m<J$l;J$m++)J$i=this._points[2*J$m],J$j=this._points[2*J$m+1],J$h.push(this.x+J$i,this.y+J$j,J$e,J$f,J$g);this.createLoopLine(J$h,J$k,this.borderWidth,J$c+J$h.length/5),J$a.append(new Uint16Array(J$k)),J$b.append(new Float32Array(J$h))}},J$b.createLoopLine=function(J$a,J$b,J$c,J$d,J$e,J$f){J$a.length;var J$g=J$a.concat(),J$h=J$e||J$a,J$i=this.borderColor,J$j=(J$i>>16&255)/255,J$k=(J$i>>8&255)/255,J$l=(255&J$i)/255,J$m=[J$g[0],J$g[1]],J$n=[J$g[J$g.length-5],J$g[J$g.length-4]],J$o=J$n[0]+.5*(J$m[0]-J$n[0]),J$p=J$n[1]+.5*(J$m[1]-J$n[1]);J$g.unshift(J$o,J$p,0,0,0),J$g.push(J$o,J$p,0,0,0);var J$q,J$r,J$u,J$v,J$w,J$x,J$y,J$z,J$A,J$B,J$C,J$D,J$E,J$F,J$G,J$H,J$I,J$J,J$K,J$L,J$M=J$g.length/5,J$N=J$d,J$O=J$c/2;J$u=J$g[0],J$v=J$g[1],J$B=J$u-(J$w=J$g[5]),J$A=(J$A=-(J$v-(J$x=J$g[6])))/(J$L=Math.sqrt(J$A*J$A+J$B*J$B))*J$O,J$B=J$B/J$L*J$O,J$h.push(J$u-J$A,J$v-J$B,J$j,J$k,J$l,J$u+J$A,J$v+J$B,J$j,J$k,J$l);for(var J$P=1;J$P<J$M-1;J$P++)J$u=J$g[5*(J$P-1)],J$v=J$g[5*(J$P-1)+1],J$w=J$g[5*J$P],J$x=J$g[5*J$P+1],J$y=J$g[5*(J$P+1)],J$z=J$g[5*(J$P+1)+1],J$B=J$u-J$w,J$D=J$w-J$y,J$G=(-(J$A=(J$A=-(J$v-J$x))/(J$L=Math.sqrt(J$A*J$A+J$B*J$B))*J$O)+J$u)*(-(J$B=J$B/J$L*J$O)+J$x)-(-J$A+J$w)*(-J$B+J$v),J$J=(-(J$C=(J$C=-(J$x-J$z))/(J$L=Math.sqrt(J$C*J$C+J$D*J$D))*J$O)+J$y)*(-(J$D=J$D/J$L*J$O)+J$x)-(-J$C+J$w)*(-J$D+J$z),J$K=(J$E=-J$B+J$v-(-J$B+J$x))*(J$I=-J$C+J$w-(-J$C+J$y))-(J$H=-J$D+J$z-(-J$D+J$x))*(J$F=-J$A+J$w-(-J$A+J$u)),Math.abs(J$K)<.1?(J$K+=10.1,J$h.push(J$w-J$A,J$x-J$B,J$j,J$k,J$l,J$w+J$A,J$x+J$B,J$j,J$k,J$l)):(((J$q=(J$F*J$J-J$I*J$G)/J$K)-J$w)*(J$q-J$w)+((J$r=(J$H*J$G-J$E*J$J)/J$K)-J$x)+(J$r-J$x),J$h.push(J$q,J$r,J$j,J$k,J$l,J$w-(J$q-J$w),J$x-(J$r-J$x),J$j,J$k,J$l));J$f&&(J$b=J$f);var J$Q=this.edges+1;for(J$P=1;J$P<J$Q;J$P++)J$b.push(J$N+2*(J$P-1),J$N+2*(J$P-1)+1,J$N+2*J$P+1,J$N+2*J$P+1,J$N+2*J$P,J$N+2*(J$P-1));return J$b.push(J$N+2*(J$P-1),J$N+2*(J$P-1)+1,J$N+1,J$N+1,J$N,J$N+2*(J$P-1)),J$h},J$l}(),J$Ha=function(J$a){function J$g(J$a,J$b,J$c,J$d,J$e,J$f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=J$B.create(),this._points=J$c.slice(0,J$c.length),J$g.__super.call(this,J$a,J$b,0,0,this._points.length/2,J$d,J$e,J$f)}J$m(J$g,"laya.webgl.shapes.Polygon",J$ca);var J$b=J$g.prototype;return J$b.rebuild=function(J$a){this._repaint||(this._points.length=0,this._points=this._points.concat(J$a))},J$b.setMatrix=function(J$a){J$a.copyTo(this._mat)},J$b.needUpdate=function(J$a){return this._repaint=this._mat.a==J$a.a&&this._mat.b==J$a.b&&this._mat.c==J$a.c&&this._mat.d==J$a.d&&this._mat.tx==J$a.tx&&this._mat.ty==J$a.ty,!this._repaint},J$b.getData=function(J$a,J$b,J$c){var J$d,J$e=0,J$f=this._points,J$g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=J$c){for(this._start=J$c,J$d=[],J$g=this.earcutTriangles.length,J$e=0;J$e<J$g;J$e++)J$d.push(this.earcutTriangles[J$e]+J$c);this.mUint16Array=new Uint16Array(J$d)}}else{this._start=J$c,J$d=[];var J$h=[],J$i=[],J$j=this.color,J$k=(J$j>>16&255)/255,J$l=(J$j>>8&255)/255,J$m=(255&J$j)/255;for(J$g=Math.floor(J$f.length/2),J$e=0;J$e<J$g;J$e++)J$h.push(this.x+J$f[2*J$e],this.y+J$f[2*J$e+1],J$k,J$l,J$m),J$i.push(this.x+J$f[2*J$e],this.y+J$f[2*J$e+1]);for(this.earcutTriangles=J$da.earcut(J$i,null,2),J$g=this.earcutTriangles.length,J$e=0;J$e<J$g;J$e++)J$d.push(this.earcutTriangles[J$e]+J$c);this.mUint16Array=new Uint16Array(J$d),this.mFloat32Array=new Float32Array(J$h)}J$a.append(this.mUint16Array),J$b.append(this.mFloat32Array)},J$g}(),J$Ia=function(J$a){function J$f(){this._matrix=new J$B,this._matrix4=J$pa.defaultMatrix4.concat(),J$f.__super.call(this,1e4),this.shaderValue=new J$Aa(0,0)}J$m(J$f,"laya.webgl.submit.SubmitCanvas",J$fa);var J$b=J$f.prototype;return J$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var J$a=J$ua.worldAlpha,J$b=J$ua.worldMatrix4,J$c=J$ua.worldMatrix,J$d=J$ua.worldFilters,J$e=J$ua.worldShaderDefines,J$f=this.shaderValue,J$g=this._matrix,J$h=this._matrix4,J$i=J$B.TEMP;return J$B.mul(J$g,J$c,J$i),J$h[0]=J$i.a,J$h[1]=J$i.b,J$h[4]=J$i.c,J$h[5]=J$i.d,J$h[12]=J$i.tx,J$h[13]=J$i.ty,J$ua.worldMatrix=J$i.clone(),J$ua.worldMatrix4=J$h,J$ua.worldAlpha=J$ua.worldAlpha*J$f.alpha,J$f.filters&&J$f.filters.length&&(J$ua.worldFilters=J$f.filters,J$ua.worldShaderDefines=J$f.defines),this._ctx_src.flush(),J$ua.worldAlpha=J$a,J$ua.worldMatrix4=J$b,J$ua.worldMatrix.destroy(),J$ua.worldMatrix=J$c,J$ua.worldFilters=J$d,J$ua.worldShaderDefines=J$e,1},J$b.releaseRender=function(){var J$a=J$f._cache;this._ctx_src=null,J$a[J$a._length++]=this},J$b.getRenderType=function(){return 10003},J$f.create=function(J$a,J$b,J$c){var J$d=J$f._cache._length?J$f._cache[--J$f._cache._length]:new J$f;J$d._ctx_src=J$a;var J$e=J$d.shaderValue;return J$e.alpha=J$b,J$e.defines.setValue(0),J$c&&J$c.length&&J$e.setFilters(J$c),J$d},J$f._cache=((J$f._cache=[])._length=0,J$f._cache),J$f}(),J$Ja=function(J$a){function J$j(J$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===J$a&&(J$a=1e4),J$j.__super.call(this,J$a)}J$m(J$j,"laya.webgl.submit.SubmitTexture",J$fa);var J$b=J$j.prototype;return J$b.releaseRender=function(){var J$a=J$j._cache;(J$a[J$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},J$b.addTexture=function(J$a,J$b){this._texsID[this._texs.length]=J$a._uvID,this._texs.push(J$a),this._vbPos.push(J$b)},J$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var J$a=this.shaderValue.textureHost.bitmap;if(null!==J$a)for(var J$b=this._vb.getFloat32Array(),J$c=0,J$d=this._texs.length;J$c<J$d;J$c++){var J$e=this._texs[J$c];J$e.active();var J$f=J$e.uv;if(this._texsID[J$c]!==J$e._uvID){this._texsID[J$c]=J$e._uvID;var J$g=this._vbPos[J$c];J$b[J$g+2]=J$f[0],J$b[J$g+3]=J$f[1],J$b[J$g+6]=J$f[2],J$b[J$g+7]=J$f[3],J$b[J$g+10]=J$f[4],J$b[J$g+11]=J$f[5],J$b[J$g+14]=J$f[6],J$b[J$g+15]=J$f[7],this._vb.setNeedUpload()}J$e.bitmap!==J$a&&(this._isSameTexture=!1)}}},J$b.renderSubmit=function(){if(0===this._numEle)return J$j._shaderSet=!1,1;var J$a=this.shaderValue.textureHost;if(J$a){var J$b=J$a.source;if(!J$a.bitmap||!J$b)return J$j._shaderSet=!1,1;this.shaderValue.texture=J$b,J$a.alphaTexture&&J$a.alphaTexture.source&&(this.shaderValue.texture1=J$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var J$c=J$wa.mainContext;if(J$S.activeBlendFunction!==this._blendFn&&(J$c.enable(3042),this._blendFn(J$c),J$S.activeBlendFunction=this._blendFn),J$G.drawCall++,J$G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&J$La.activeShader&&J$j._shaderSet?(J$La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&J$La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),J$j._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var J$d=J$a.bitmap,J$e=0,J$f=J$La.activeShader,J$g=0,J$h=this._texs.length;J$g<J$h;J$g++){var J$i=this._texs[J$g];J$i.bitmap===J$d&&J$g+1!==J$h||(J$f.uploadTexture2D(J$i.source),J$c.drawElements(4,6*(J$g-J$e+1),5123,this._startIdx+6*J$e*J$pa.BYTES_PIDX),J$d=J$i.bitmap,J$e=J$g)}else J$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},J$j.create=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$j._cache._length?J$j._cache[--J$j._cache._length]:new J$j;null==J$c&&((J$c=J$f._selfVb||(J$f._selfVb=J$ta.create(-1))).clear(),J$d=0),J$f._ib=J$b,J$f._vb=J$c,J$f._startIdx=J$d*J$pa.BYTES_PIDX,J$f._numEle=0;var J$g=J$a._nBlendType;J$f._blendFn=J$a._targets?J$S.targetFns[J$g]:J$S.fns[J$g],J$f.shaderValue=J$e,J$f.shaderValue.setValue(J$a._shader2D);var J$h=J$a._shader2D.filters;return J$h&&J$f.shaderValue.setFilters(J$h),J$f},J$j._cache=((J$j._cache=[])._length=0,J$j._cache),J$j._shaderSet=!0,J$j}(),J$Ka=function(J$a){function J$r(){J$r.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}J$m(J$r,"laya.webgl.utils.MeshTexture",J$ra);var J$b=J$r.prototype;return J$b.addData=function(J$a,J$b,J$c,J$d,J$e,J$f){for(var J$g=J$a.length/2,J$h=this._vb.needSize(J$g*J$r.const_stride)>>2,J$i=this._vb.getFloat32Array(),J$j=0,J$k=0;J$k<J$g;J$k++){var J$l=J$a[J$j],J$m=J$a[J$j+1],J$n=J$l*J$d.a+J$m*J$d.c+J$d.tx,J$o=J$l*J$d.b+J$m*J$d.d+J$d.ty;J$i[J$h++]=J$n,J$i[J$h++]=J$o,J$i[J$h++]=J$b[J$j],J$i[J$h++]=J$b[J$j+1],J$j+=2}this._vb.setNeedUpload();var J$p=this.vertNum;if(0<J$p){(J$g=J$c.length)>J$r.tmpIdx.length&&(J$r.tmpIdx=new Uint16Array(J$g));for(var J$q=0;J$q<J$g;J$q++)J$r.tmpIdx[J$q]=J$c[J$q]+J$p;this._ib.appendU16Array(J$r.tmpIdx,J$c.length)}else this._ib.append(J$c);this._ib.setNeedUpload(),this.vertNum+=J$g,this.indexNum+=J$c.length},J$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},J$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},J$r.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new J$r},J$r.const_stride=16,J$r._POOL=[],J$g(J$r,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),J$r}(),J$La=function(J$a){function J$b(){J$b.__super.call(this),this.lock=!0}return J$m(J$b,"laya.webgl.shader.BaseShader",J$v),J$b.activeShader=null,J$b.bindShader=null,J$b}(),J$Ma=function(J$b){function J$k(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===J$c&&(J$c=6408),void 0===J$d&&(J$d=5121),void 0===J$e&&(J$e=34041),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=-1),void 0===J$i&&(J$i=-1),this._type=1,this._w=J$a,this._h=J$b,this._surfaceFormat=J$c,this._surfaceType=J$d,this._depthStencilFormat=J$e,J$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=J$f,this._repeat=J$g,this._minFifter=J$h,this._magFifter=J$i,this._createWebGLRenderTarget(),this.bitmap.lock=!0,J$k.__super.call(this,this.bitmap,J$K.INV_UV)}J$m(J$k,"laya.webgl.resource.RenderTarget2D",J$b);var J$a=J$k.prototype;return J$y.imps(J$a,{"laya.resource.IDispose":!0}),J$a.getType=function(){return this._type},J$a.getTexture=function(){return this},J$a.size=function(J$a,J$b){this._w==J$a&&this._h==J$b||(this._w=J$a,this._h=J$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},J$a.release=function(){this.destroy()},J$a.recycle=function(){J$k.POOL.push(this)},J$a.start=function(){var J$a=J$wa.mainContext;return this._preRenderTarget=J$ua.curRenderTarget,J$ua.curRenderTarget=this,J$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(J$a.viewport(0,0,this._w,this._h),this._svWidth=J$ua.width,this._svHeight=J$ua.height,J$ua.width=this._w,J$ua.height=this._h,J$La.activeShader=null),this},J$a.clear=function(J$a,J$b,J$c,J$d){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=1);var J$e=J$wa.mainContext;J$e.clearColor(J$a,J$b,J$c,J$d);var J$f=16384;switch(this._depthStencilFormat){case 33189:J$f|=256;break;case 36168:J$f|=1024;break;case 34041:J$f|=256,J$f|=1024}J$e.clear(J$f)},J$a.end=function(){var J$a=J$wa.mainContext;J$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,J$ua.curRenderTarget=this._preRenderTarget,1==this._type?(J$a.viewport(0,0,this._svWidth,this._svHeight),J$ua.width=this._svWidth,J$ua.height=this._svHeight,J$La.activeShader=null):J$a.viewport(0,0,J$y.stage.width,J$y.stage.height)},J$a.getData=function(J$a,J$b,J$c,J$d){var J$e=J$wa.mainContext;if(J$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===J$e.checkFramebufferStatus(36160)))return J$e.bindFramebuffer(36160,null),null;var J$f=new Uint8Array(this._w*this._h*4);return J$e.readPixels(J$a,J$b,J$c,J$d,this._surfaceFormat,this._surfaceType,J$f),J$e.bindFramebuffer(36160,null),J$f},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,J$b.prototype.destroy.call(this))},J$a.dispose=function(){},J$a._createWebGLRenderTarget=function(){this.bitmap=new J$Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(J$a){this.event("recovered")})},J$d(0,J$a,"surfaceFormat",function(){return this._surfaceFormat}),J$d(0,J$a,"magFifter",function(){return this._magFifter}),J$d(0,J$a,"surfaceType",function(){return this._surfaceType}),J$d(0,J$a,"mipMap",function(){return this._mipMap}),J$d(0,J$a,"depthStencilFormat",function(){return this._depthStencilFormat}),J$d(0,J$a,"minFifter",function(){return this._minFifter}),J$d(0,J$a,"source",function(){return this._alreadyResolved?J$y.superGet(J$K,this,"source"):null}),J$k.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){void 0===J$c&&(J$c=6408),void 0===J$d&&(J$d=5121),void 0===J$e&&(J$e=34041),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=-1),void 0===J$i&&(J$i=-1);var J$j=J$k.POOL.pop();return J$j||(J$j=new J$k(J$a,J$b)),J$j.bitmap&&J$j._w==J$a&&J$j._h==J$b&&J$j._surfaceFormat==J$c&&J$j._surfaceType==J$d&&J$j._depthStencilFormat==J$e&&J$j._mipMap==J$f&&J$j._repeat==J$g&&J$j._minFifter==J$h&&J$j._magFifter==J$i||(J$j._w=J$a,J$j._h=J$b,J$j._surfaceFormat=J$c,J$j._surfaceType=J$d,J$j._depthStencilFormat=J$e,J$r.isConchWebGL&&34041===J$j._depthStencilFormat&&(J$j._depthStencilFormat=33189),J$j._mipMap=J$f,J$j._repeat=J$g,J$j._minFifter=J$h,J$j._magFifter=J$i,J$j.release(),J$j._createWebGLRenderTarget()),J$j},J$k.TYPE2D=1,J$k.TYPE3D=2,J$k.POOL=[],J$k}(J$K),J$Na=function(J$a){function J$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,J$b.__super.call(this),J$b._gl=J$wa.mainContext}J$m(J$b,"laya.webgl.utils.Buffer",J$v);var J$c=J$b.prototype;return J$c._bind=function(){this.activeResource(),J$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(J$b._bindVertexBuffer=this._glBuffer),J$b._gl.bindBuffer(this._bufferType,J$b._bindActive[this._bufferType]=this._glBuffer),J$La.activeShader=null)},J$c.recreateResource=function(){this._glBuffer||(this._glBuffer=J$b._gl.createBuffer()),this.completeCreate()},J$c.disposeResource=function(){this._glBuffer&&(J$wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},J$d(0,J$c,"bufferUsage",function(){return this._bufferUsage}),J$b._gl=null,J$b._bindActive={},J$b._bindVertexBuffer=null,J$b._enableAtributes=[],J$b}(),J$Oa=function(J$a){function J$c(J$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,J$c.__super.call(this,512,0);var J$b=8*J$pa.BYTES_PE;this.position=[2,5126,!1,J$b,0],this.texcoord=[2,5126,!1,J$b,2*J$pa.BYTES_PE],this.color=[4,5126,!1,J$b,4*J$pa.BYTES_PE]}return J$m(J$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",J$Aa),J$c}(),J$Pa=function(J$a){function J$b(J$a){J$b.__super.call(this,2,0),this.color=[]}return J$m(J$b,"laya.webgl.shader.d2.value.Color2dSV",J$Aa),J$b.prototype.setValue=function(J$a){J$a.fillStyle&&(this.color=J$a.fillStyle._color._color),J$a.strokeStyle&&(this.color=J$a.strokeStyle._color._color)},J$b}(),J$Qa=function(J$a){function J$b(J$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=J$Aa._TEXCOORD,J$b.__super.call(this,256,0)}J$m(J$b,"laya.webgl.shader.d2.value.FillTextureSV",J$Aa);var J$c=J$b.prototype;return J$c.setValue=function(J$a){this.ALPHA=J$a.ALPHA,J$a.filters&&this.setFilters(J$a.filters)},J$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},J$b}(),J$Ra=function(J$a){function J$b(J$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=J$Aa._TEXCOORD,void 0===J$a&&(J$a=0),J$b.__super.call(this,1,J$a)}J$m(J$b,"laya.webgl.shader.d2.value.TextureSV",J$Aa);var J$c=J$b.prototype;return J$c.setValue=function(J$a){this.ALPHA=J$a.ALPHA,J$a.filters&&this.setFilters(J$a.filters)},J$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},J$b}(),J$Sa=function(J$a){function J$b(J$a){this.a_color=null,this.u_pos=[0,0],J$b.__super.call(this,4,0),this.position=[2,5126,!1,5*J$pa.BYTES_PE,0],this.a_color=[3,5126,!1,5*J$pa.BYTES_PE,2*J$pa.BYTES_PE]}return J$m(J$b,"laya.webgl.shader.d2.value.PrimitiveSV",J$Aa),J$b}(),J$Ta=function(J$a){function J$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,J$b.__super.call(this)}J$m(J$b,"laya.webgl.atlas.AtlasWebGLCanvas",J$a);var J$c=J$b.prototype;return J$c.recreateResource=function(){var J$a=J$wa.mainContext,J$b=this._source=J$a.createTexture(),J$c=J$xa.curBindTexTarget,J$d=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,J$b),J$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),J$a.texParameteri(3553,10241,9729),J$a.texParameteri(3553,10240,9729),J$a.texParameteri(3553,10242,33071),J$a.texParameteri(3553,10243,33071),J$c&&J$d&&J$xa.bindTexture(J$a,J$c,J$d),this.memorySize=this._w*this._h*4,this.completeCreate()},J$c.disposeResource=function(){this._source&&(J$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J$c.texSubImage2D=function(J$a,J$b,J$c){if(J$r.isFlash){this._flashCacheImage||(this._flashCacheImage=J$q.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var J$d=J$c.bitmapdata;this._flashCacheImage._image.copyPixels(J$d,0,0,J$d.width,J$d.height,J$a,J$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var J$e=J$wa.mainContext,J$f=J$xa.curBindTexTarget,J$g=J$xa.curBindTexValue;J$xa.bindTexture(J$e,3553,this._source),J$e.pixelStorei(37441,!0),0<=J$a-1&&J$e.texSubImage2D(3553,0,J$a-1,J$b,6408,5121,J$c),J$a+1<=this._w&&J$e.texSubImage2D(3553,0,J$a+1,J$b,6408,5121,J$c),0<=J$b-1&&J$e.texSubImage2D(3553,0,J$a,J$b-1,6408,5121,J$c),J$b+1<=this._h&&J$e.texSubImage2D(3553,0,J$a,J$b+1,6408,5121,J$c),J$e.texSubImage2D(3553,0,J$a,J$b,6408,5121,J$c),J$e.pixelStorei(37441,!1),J$f&&J$g&&J$xa.bindTexture(J$e,J$f,J$g)}},J$c.texSubImage2DPixel=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$wa.mainContext,J$g=J$xa.curBindTexTarget,J$h=J$xa.curBindTexValue;J$xa.bindTexture(J$f,3553,this._source);var J$i=new Uint8Array(J$e.data);J$f.pixelStorei(37441,!0),J$f.texSubImage2D(3553,0,J$a,J$b,J$c,J$d,6408,5121,J$i),J$f.pixelStorei(37441,!1),J$g&&J$h&&J$xa.bindTexture(J$f,J$g,J$h)},J$d(0,J$c,"width",J$a.prototype._$get_width,function(J$a){this._w=J$a}),J$d(0,J$c,"height",J$a.prototype._$get_height,function(J$a){this._h=J$a}),J$b}(J$i),J$Ua=function(J$a){function J$e(){this.flipY=!0,this.alwaysChange=!1,J$e.__super.call(this)}J$m(J$e,"laya.webgl.resource.WebGLCanvas",J$i);var J$b=J$e.prototype;return J$b.getCanvas=function(){return this._canvas},J$b.clear=function(){this._ctx&&this._ctx.clear()},J$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},J$b._setContext=function(J$a){this._ctx=J$a},J$b.getContext=function(J$a,J$b){return this._ctx?this._ctx:this._ctx=J$e._createContext(this)},J$b.size=function(J$a,J$b){this._w==J$a&&this._h==J$b||(this._w=J$a,this._h=J$b,this._ctx&&this._ctx.size(J$a,J$b),this._canvas&&(this._canvas.height=J$b,this._canvas.width=J$a))},J$b.activeResource=function(J$a){void 0===J$a&&(J$a=!1),this._source||this.recreateResource()},J$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},J$b.disposeResource=function(){this._source&&!this.iscpuSource&&(J$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J$b.createWebGlTexture=function(){var J$a=J$wa.mainContext;this._canvas;var J$b=this._source=J$a.createTexture();this.iscpuSource=!1;var J$c=J$xa.curBindTexTarget,J$d=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,J$b),J$a.pixelStorei(37440,this.flipY?1:0),J$e.premulAlpha&&J$a.pixelStorei(37441,!0),J$a.texImage2D(3553,0,6408,6408,5121,this._imgData),J$e.premulAlpha&&J$a.pixelStorei(37441,!1),J$a.texParameteri(3553,10240,9729),J$a.texParameteri(3553,10241,9729),J$a.texParameteri(3553,10242,33071),J$a.texParameteri(3553,10243,33071),J$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,J$c&&J$d&&J$xa.bindTexture(J$a,J$c,J$d)},J$b.reloadCanvasData=function(){var J$a=J$wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var J$b=J$xa.curBindTexTarget,J$c=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,this._source),J$e.premulAlpha&&J$a.pixelStorei(37441,!0),J$a.texImage2D(3553,0,6408,6408,5121,this._imgData),J$e.premulAlpha&&J$a.pixelStorei(37441,!1),J$a.pixelStorei(37440,0),J$b&&J$c&&J$xa.bindTexture(J$a,J$b,J$c)},J$b.texSubImage2D=function(J$a,J$b,J$c){var J$d=J$wa.mainContext,J$e=J$xa.curBindTexTarget,J$f=J$xa.curBindTexValue;J$xa.bindTexture(J$d,3553,this._source),J$d.pixelStorei(37441,!0),J$d.texSubImage2D(3553,0,J$b,J$c,6408,5121,J$a._source),J$d.pixelStorei(37441,!1),J$e&&J$f&&J$xa.bindTexture(J$d,J$e,J$f)},J$b.toBase64=function(J$a,J$b,J$c){var J$d=null;this._canvas&&(J$d=this._canvas.toDataURL(J$a,J$b)),J$c.call(this,J$d)},J$d(0,J$b,"context",function(){return this._ctx}),J$d(0,J$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),J$d(0,J$b,"asBitmap",null,function(J$a){this._ctx&&(this._ctx.asBitmap=J$a)}),J$e._createContext=null,J$e.premulAlpha=!1,J$e}(),J$Va=function(J$a){function J$f(J$a,J$b){this.CborderSize=12,J$f.__super.call(this),this.char=J$a,this.isSpace=" "===J$a,this.xs=J$b.scaleX,this.ys=J$b.scaleY,this.font=J$b.font.toString(),this.fontSize=J$b.font.size,this.fillColor=J$b.fillColor,this.borderColor=J$b.borderColor,this.lineWidth=J$b.lineWidth,this.underLine=J$b.underLine;var J$c,J$d=J$r.isConchApp;J$d?((J$c=ConchTextCanvas)._source=ConchTextCanvas,J$c._source.canvas=ConchTextCanvas):J$c=J$n.canvas.source,this.canvas=J$c,this._enableMerageInAtlas=!0,this._ctx=J$d?J$c:this.canvas.getContext("2d",void 0);var J$e=J$L.measureText(this.char,this.font);this.cw=J$e.width*this.xs,this.ch=(J$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new J$K(this)}J$m(J$f,"laya.webgl.resource.WebGLCharImage",J$i);var J$b=J$f.prototype;return J$y.imps(J$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J$b.active=function(){this.texture.active()},J$b.recreateResource=function(){var J$a=J$r.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),J$a){var J$b=this.fontSize;1==this.xs&&1==this.ys||(J$b=parseInt(J$b*(this.xs>this.ys?this.xs:this.ys)+""));var J$c="normal 100 "+this.font;J$c=J$c.replace(J$f._fontSizeReg,J$b),this.borderColor&&(J$c+=" 1 "+this.borderColor),this._ctx.font=J$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,J$J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var J$d=this._ctx.measureText(this.char);J$d||(J$d={width:16});var J$e=J$d.width+1;this._ctx.lineTo(J$e,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},J$b.onresize=function(J$a,J$b){this._w=J$a,this._h=J$b,this._allowMerageInAtlas=!0},J$b.clearAtlasSource=function(){},J$d(0,J$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J$d(0,J$b,"atlasSource",function(){return this.canvas}),J$d(0,J$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(J$a){this._enableMerageInAtlas=J$a}),J$f.createOneChar=function(J$a,J$b){return new J$f(J$a,J$b)},J$f._fontSizeReg=new RegExp("\\d+(?=px)","g"),J$f}(),J$Wa=function(J$a){function J$j(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){void 0===J$c&&(J$c=6408),void 0===J$d&&(J$d=5121),void 0===J$e&&(J$e=34041),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=-1),void 0===J$i&&(J$i=1),J$j.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=J$a,this._h=J$b,this._surfaceFormat=J$c,this._surfaceType=J$d,this._depthStencilFormat=J$e,this._mipMap=J$f,this._repeat=J$g,this._minFifter=J$h,this._magFifter=J$i}J$m(J$j,"laya.webgl.resource.WebGLRenderTarget",J$i);var J$b=J$j.prototype;return J$b.recreateResource=function(){var J$a=J$wa.mainContext;this._frameBuffer||(this._frameBuffer=J$a.createFramebuffer()),this._source||(this._source=J$a.createTexture());var J$b=J$xa.curBindTexTarget,J$c=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,this._source),J$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var J$d=this._minFifter,J$e=this._magFifter,J$f=this._repeat?10497:33071,J$g=J$k.isPOT(this._w,this._h);if(J$g?(this._mipMap?-1!==J$d||(J$d=9987):-1!==J$d||(J$d=9729),-1!==J$e||(J$e=9729),J$a.texParameteri(3553,10241,J$d),J$a.texParameteri(3553,10240,J$e),J$a.texParameteri(3553,10242,J$f),J$a.texParameteri(3553,10243,J$f),this._mipMap&&J$a.generateMipmap(3553)):(-1!==J$d||(J$d=9729),-1!==J$e||(J$e=9729),J$a.texParameteri(3553,10241,J$d),J$a.texParameteri(3553,10240,J$e),J$a.texParameteri(3553,10242,33071),J$a.texParameteri(3553,10243,33071)),J$a.bindFramebuffer(36160,this._frameBuffer),J$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=J$a.createRenderbuffer()),J$a.bindRenderbuffer(36161,this._depthStencilBuffer),J$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:J$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:J$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:J$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}J$a.bindFramebuffer(36160,null),J$b&&J$c&&J$xa.bindTexture(J$a,J$b,J$c),J$a.bindRenderbuffer(36161,null),J$g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},J$b.disposeResource=function(){this._frameBuffer&&(J$wa.mainContext.deleteTexture(this._source),J$wa.mainContext.deleteFramebuffer(this._frameBuffer),J$wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},J$d(0,J$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),J$d(0,J$b,"frameBuffer",function(){return this._frameBuffer}),J$j}(),J$Xa=function(J$a){function J$h(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this.offsetX=0,this.offsetY=0,J$h.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=J$f,this.canvas=J$a,this._ctx=J$a.getContext("2d",void 0),this._w=J$d,this._h=J$e,this.offsetX=J$b,this.offsetY=J$c,this.src=J$g,this._enableMerageInAtlas=!0,J$Q.enabled&&this._w<J$Q.atlasLimitWidth&&this._h<J$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}J$m(J$h,"laya.webgl.resource.WebGLSubImage",J$i);var J$b=J$h.prototype;return J$y.imps(J$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J$b.size=function(J$a,J$b){this._w=J$a,this._h=J$b,this._ctx&&this._ctx.size(J$a,J$b),this.canvas&&(this.canvas.height=J$b,this.canvas.width=J$a)},J$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},J$b.createWebGlTexture=function(){var J$a=J$wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var J$b=this._source=J$a.createTexture(),J$c=J$xa.curBindTexTarget,J$d=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,J$b),J$a.pixelStorei(37441,!0),J$a.texImage2D(3553,0,6408,6408,5121,this.canvas),J$a.pixelStorei(37441,!1);var J$e=this.minFifter,J$f=this.magFifter,J$g=this.repeat?10497:33071,J$h=J$k.isPOT(this.width,this.height);J$h?(this.mipmap?-1!==J$e||(J$e=9987):-1!==J$e||(J$e=9729),-1!==J$f||(J$f=9729),J$a.texParameteri(3553,10240,J$f),J$a.texParameteri(3553,10241,J$e),J$a.texParameteri(3553,10242,J$g),J$a.texParameteri(3553,10243,J$g),this.mipmap&&J$a.generateMipmap(3553)):(-1!==J$e||(J$e=9729),-1!==J$f||(J$f=9729),J$a.texParameteri(3553,10241,J$e),J$a.texParameteri(3553,10240,J$f),J$a.texParameteri(3553,10242,33071),J$a.texParameteri(3553,10243,33071)),J$c&&J$d&&J$xa.bindTexture(J$a,J$c,J$d),this.canvas=null,J$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},J$b.disposeResource=function(){J$Q.enabled&&this._allowMerageInAtlas||!this._source||(J$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J$b.clearAtlasSource=function(){},J$d(0,J$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J$d(0,J$b,"atlasSource",function(){return this.canvas}),J$d(0,J$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(J$a){this._allowMerageInAtlas=J$a}),J$h}(),J$Ya=function(J$a){function J$j(J$a,J$b,J$c,J$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,J$j.__super.call(this),!J$a||!J$b)throw"Shader Error";this._id=++J$j._count,this._vs=J$a,this._ps=J$b,this._nameMap=J$d||{},null!=J$c&&(J$j.sharders[J$c]=this)}J$m(J$j,"laya.webgl.shader.Shader",J$La);var J$b=J$j.prototype;return J$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},J$b.disposeResource=function(){J$wa.mainContext.deleteShader(this._vshader),J$wa.mainContext.deleteShader(this._pshader),J$wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},J$b._compile=function(){if(!J$wa.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var J$a=[this._vs,this._ps],J$b=J$wa.mainContext;if(this._program=J$b.createProgram(),this._vshader=J$j._createShader(J$b,J$a[0],35633),this._pshader=J$j._createShader(J$b,J$a[1],35632),J$b.attachShader(this._program,this._vshader),J$b.attachShader(this._program,this._pshader),J$b.linkProgram(this._program),!J$r.isConchApp&&!J$b.getProgramParameter(this._program,35714))throw J$b.getProgramInfoLog(this._program);var J$c,J$d,J$e=0,J$f=0;for(J$f=J$r.isConchApp?J$b.getProgramParameterEx(this._vs,this._ps,"",35721):J$b.getProgramParameter(this._program,35721),J$e=0;J$e<J$f;J$e++){var J$g=null;J$c={vartype:"attribute",glfun:null,ivartype:0,attrib:J$g=J$r.isConchApp?J$b.getActiveAttribEx(this._vs,this._ps,"",J$e):J$b.getActiveAttrib(this._program,J$e),location:J$b.getAttribLocation(this._program,J$g.name),name:J$g.name,type:J$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(J$c)}var J$h=0;for(J$h=J$r.isConchApp?J$b.getProgramParameterEx(this._vs,this._ps,"",35718):J$b.getProgramParameter(this._program,35718),J$e=0;J$e<J$h;J$e++){var J$i=null;J$i=J$r.isConchApp?J$b.getActiveUniformEx(this._vs,this._ps,"",J$e):J$b.getActiveUniform(this._program,J$e),0<(J$c={vartype:"uniform",glfun:null,ivartype:1,attrib:J$g,location:J$b.getUniformLocation(this._program,J$i.name),name:J$i.name,type:J$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(J$c.name=J$c.name.substr(0,J$c.name.length-3),J$c.isArray=!0,J$c.location=J$b.getUniformLocation(this._program,J$c.name)),this._params.push(J$c)}for(J$e=0,J$d=this._params.length;J$e<J$d;J$e++)if((J$c=this._params[J$e]).indexOfParams=J$e,J$c.index=1,J$c.value=[J$c.location,null],J$c.codename=J$c.name,J$c.name=this._nameMap[J$c.codename]?this._nameMap[J$c.codename]:J$c.codename,(this._paramsMap[J$c.name]=J$c)._this=this,J$c.uploadedValue=[],"attribute"!==J$c.vartype)switch(J$c.type){case 5124:J$c.fun=J$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:J$c.fun=J$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:J$c.fun=J$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:J$c.fun=J$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:J$c.fun=J$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:J$c.fun=this._uniform_sampler2D;break;case 35680:J$c.fun=this._uniform_samplerCube;break;case 35676:J$c.glfun=J$b.uniformMatrix4fv,J$c.fun=this._uniformMatrix4fv;break;case 35670:J$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else J$c.fun=this._attribute}},J$b.getUniform=function(J$a){return this._paramsMap[J$a]},J$b._attribute=function(J$a,J$b){var J$c=J$wa.mainContext,J$d=J$Na._enableAtributes,J$e=J$a.location;return J$d[J$e]||J$c.enableVertexAttribArray(J$e),J$c.vertexAttribPointer(J$e,J$b[0],J$b[1],J$b[2],J$b[3],J$b[4]+this._offset),J$d[J$e]=J$Na._bindVertexBuffer,1},J$b._uniform1f=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b?(J$wa.mainContext.uniform1f(J$a.location,J$c[0]=J$b),1):0},J$b._uniform1fv=function(J$a,J$b){if(J$b.length<4){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$wa.mainContext.uniform1fv(J$a.location,J$b),J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3],1):0}return J$wa.mainContext.uniform1fv(J$a.location,J$b),1},J$b._uniform_vec2=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]?(J$wa.mainContext.uniform2f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1]),1):0},J$b._uniform_vec2v=function(J$a,J$b){if(J$b.length<2){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$wa.mainContext.uniform2fv(J$a.location,J$b),J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3],1):0}return J$wa.mainContext.uniform2fv(J$a.location,J$b),1},J$b._uniform_vec3=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]?(J$wa.mainContext.uniform3f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2]),1):0},J$b._uniform_vec3v=function(J$a,J$b){return J$wa.mainContext.uniform3fv(J$a.location,J$b),1},J$b._uniform_vec4=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$wa.mainContext.uniform4f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3]),1):0},J$b._uniform_vec4v=function(J$a,J$b){return J$wa.mainContext.uniform4fv(J$a.location,J$b),1},J$b._uniformMatrix2fv=function(J$a,J$b){return J$wa.mainContext.uniformMatrix2fv(J$a.location,!1,J$b),1},J$b._uniformMatrix3fv=function(J$a,J$b){return J$wa.mainContext.uniformMatrix3fv(J$a.location,!1,J$b),1},J$b._uniformMatrix4fv=function(J$a,J$b){return J$wa.mainContext.uniformMatrix4fv(J$a.location,!1,J$b),1},J$b._uniform1i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b?(J$wa.mainContext.uniform1i(J$a.location,J$c[0]=J$b),1):0},J$b._uniform1iv=function(J$a,J$b){return J$wa.mainContext.uniform1iv(J$a.location,J$b),1},J$b._uniform_ivec2=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]?(J$wa.mainContext.uniform2i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1]),1):0},J$b._uniform_ivec2v=function(J$a,J$b){return J$wa.mainContext.uniform2iv(J$a.location,J$b),1},J$b._uniform_vec3i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]?(J$wa.mainContext.uniform3i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2]),1):0},J$b._uniform_vec3vi=function(J$a,J$b){return J$wa.mainContext.uniform3iv(J$a.location,J$b),1},J$b._uniform_vec4i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$wa.mainContext.uniform4i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3]),1):0},J$b._uniform_vec4vi=function(J$a,J$b){return J$wa.mainContext.uniform4iv(J$a.location,J$b),1},J$b._uniform_sampler2D=function(J$a,J$b){var J$c=J$wa.mainContext,J$d=J$a.uploadedValue;return null==J$d[0]?(J$d[0]=this._curActTexIndex,J$c.uniform1i(J$a.location,this._curActTexIndex),J$c.activeTexture(J$j._TEXTURES[this._curActTexIndex]),J$xa.bindTexture(J$c,3553,J$b),this._curActTexIndex++,1):(J$c.activeTexture(J$j._TEXTURES[J$d[0]]),J$xa.bindTexture(J$c,3553,J$b),0)},J$b._uniform_samplerCube=function(J$a,J$b){var J$c=J$wa.mainContext,J$d=J$a.uploadedValue;return null==J$d[0]?(J$d[0]=this._curActTexIndex,J$c.uniform1i(J$a.location,this._curActTexIndex),J$c.activeTexture(J$j._TEXTURES[this._curActTexIndex]),J$xa.bindTexture(J$c,34067,J$b),this._curActTexIndex++,1):(J$c.activeTexture(J$j._TEXTURES[J$d[0]]),J$xa.bindTexture(J$c,34067,J$b),0)},J$b._noSetValue=function(J$a){console.log("no....:"+J$a.name)},J$b.uploadOne=function(J$a,J$b){this.activeResource(),J$xa.UseProgram(this._program);var J$c=this._paramsMap[J$a];J$c.fun.call(this,J$c,J$b)},J$b.uploadTexture2D=function(J$a){J$G.shaderCall++;var J$b=J$wa.mainContext;J$b.activeTexture(33984),J$xa.bindTexture(J$b,3553,J$a)},J$b.uploadTexture2D1=function(J$a){J$G.shaderCall++;var J$b=J$wa.mainContext;J$b.activeTexture(33985),J$xa.bindTexture(J$b,3553,J$a)},J$b.upload=function(J$a,J$b){J$La.activeShader=J$La.bindShader=this,this._lastUseFrameCount===J$G.loopCount||this.activeResource(),J$xa.UseProgram(this._program),this._reCompile?(J$b=this._params,this._reCompile=!1):J$b=J$b||this._params;J$wa.mainContext;for(var J$c,J$d,J$e=J$b.length,J$f=0,J$g=0;J$g<J$e;J$g++)null!==(J$d=J$a[(J$c=J$b[J$g]).name])&&(J$f+=J$c.fun.call(this,J$c,J$d));J$G.shaderCall+=J$f},J$b.uploadArray=function(J$a,J$b,J$c){J$La.activeShader=this,(J$La.bindShader=this).activeResource(),J$xa.UseProgram(this._program);this._params;for(var J$d,J$e,J$f=0,J$g=J$b-2;0<=J$g;J$g-=2)(J$e=this._paramsMap[J$a[J$g]])&&null!=(J$d=J$a[J$g+1])&&(J$c&&J$c[J$e.name]&&J$c[J$e.name].bind(),J$f+=J$e.fun.call(this,J$e,J$d));J$G.shaderCall+=J$f},J$b.getParams=function(){return this._params},J$j.getShader=function(J$a){return J$j.sharders[J$a]},J$j.create=function(J$a,J$b,J$c,J$d){return new J$j(J$a,J$b,J$c,J$d)},J$j.withCompile=function(J$a,J$b,J$c,J$d){if(J$c&&J$j.sharders[J$c])return J$j.sharders[J$c];var J$e=J$j._preCompileShader[2e-4*J$a];if(!J$e)throw new Error("withCompile shader err!"+J$a);return J$e.createShader(J$b,J$c,J$d)},J$j.withCompile2D=function(J$a,J$b,J$c,J$d,J$e){if(J$d&&J$j.sharders[J$d])return J$j.sharders[J$d];var J$f=J$j._preCompileShader[2e-4*J$a+J$b];if(!J$f)throw new Error("withCompile shader err!"+J$a+" "+J$b);return J$f.createShader(J$c,J$d,J$e)},J$j.addInclude=function(J$a,J$b){J$va.addInclude(J$a,J$b)},J$j.preCompile=function(J$a,J$b,J$c,J$d){var J$e=2e-4*J$a;J$j._preCompileShader[J$e]=new J$va(J$e,J$b,J$c,J$d)},J$j.preCompile2D=function(J$a,J$b,J$c,J$d,J$e){var J$f=2e-4*J$a+J$b;J$j._preCompileShader[J$f]=new J$va(J$f,J$c,J$d,J$e)},J$j._createShader=function(J$a,J$b,J$c){var J$d=J$a.createShader(J$c);return J$a.shaderSource(J$d,J$b),J$a.compileShader(J$d),J$d},J$j._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],J$j._count=0,J$j._preCompileShader={},J$j.SHADERNAME2ID=2e-4,J$j.sharders=((J$j.sharders=[]).length=32,J$j.sharders),J$g(J$j,["nameKey",function(){return this.nameKey=new J$H}]),J$j}(),J$Za=function(J$a){function J$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,J$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}J$m(J$b,"laya.webgl.utils.Buffer2D",J$a);var J$c=J$b.prototype;return J$c.needSize=function(J$a){var J$b=this._byteLength;if(J$a){var J$c=this._byteLength+J$a;J$c<=this._buffer.byteLength||this._resizeBuffer(J$c<<1,!0),this._byteLength=J$c}return J$b},J$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),J$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,J$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),J$Na._gl.bufferSubData(this._bufferType,0,this._buffer)},J$c._bufferSubData=function(J$a,J$b,J$c){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),J$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,J$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),J$b||J$c){var J$d=this._buffer.slice(J$b,J$c);J$Na._gl.bufferSubData(this._bufferType,J$a,J$d)}else J$Na._gl.bufferSubData(this._bufferType,J$a,this._buffer)},J$c._checkArrayUse=function(){},J$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},J$c._bind_subUpload=function(J$a,J$b,J$c){return void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(J$a,J$b,J$c),!0)},J$c._resizeBuffer=function(J$a,J$b){if(J$a<this._buffer.byteLength)return this;if(this.memorySize=J$a,J$b&&this._buffer&&0<this._buffer.byteLength){var J$c=new ArrayBuffer(J$a);new Uint8Array(J$c).set(new Uint8Array(this._buffer),0),this._buffer=J$c}else this._buffer=new ArrayBuffer(J$a);return this._checkArrayUse(),this._upload=!0,this},J$c.append=function(J$a){this._upload=!0;var J$b,J$c;J$b=J$a.byteLength,J$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+J$b,!0),J$c=new Uint8Array(this._buffer,this._byteLength)):J$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+J$b,!0),J$c=new Uint16Array(this._buffer,this._byteLength)):J$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+J$b,!0),J$c=new Float32Array(this._buffer,this._byteLength)),J$c.set(J$a,0),this._byteLength+=J$b,this._checkArrayUse()},J$c.appendU16Array=function(J$a,J$b){this._resizeBuffer(this._byteLength+2*J$b,!0);for(var J$c=new Uint16Array(this._buffer,this._byteLength,J$b),J$d=0;J$d<J$b;J$d++)J$c[J$d]=J$a[J$d];this._byteLength+=2*J$b,this._checkArrayUse()},J$c.appendEx=function(J$a,J$b){this._upload=!0;var J$c;J$c=J$a.byteLength,this._resizeBuffer(this._byteLength+J$c,!0),new J$b(this._buffer,this._byteLength).set(J$a,0),this._byteLength+=J$c,this._checkArrayUse()},J$c.appendEx2=function(J$a,J$b,J$c,J$d){void 0===J$d&&(J$d=1),this._upload=!0;var J$e,J$f;J$e=J$c*J$d,this._resizeBuffer(this._byteLength+J$e,!0),J$f=new J$b(this._buffer,this._byteLength);var J$g=0;for(J$g=0;J$g<J$c;J$g++)J$f[J$g]=J$a[J$g];this._byteLength+=J$e,this._checkArrayUse()},J$c.getBuffer=function(){return this._buffer},J$c.setNeedUpload=function(){this._upload=!0},J$c.getNeedUpload=function(){return this._upload},J$c.upload=function(){var J$a=this._bind_upload();return J$Na._gl.bindBuffer(this._bufferType,null),J$Na._bindActive[this._bufferType]=null,J$La.activeShader=null,J$a},J$c.subUpload=function(J$a,J$b,J$c){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0);var J$d=this._bind_subUpload();return J$Na._gl.bindBuffer(this._bufferType,null),J$Na._bindActive[this._bufferType]=null,J$La.activeShader=null,J$d},J$c.disposeResource=function(){J$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},J$c.clear=function(){this._byteLength=0,this._upload=!0},J$d(0,J$c,"bufferLength",function(){return this._buffer.byteLength}),J$d(0,J$c,"byteLength",null,function(J$a){this._byteLength!==J$a&&(J$a<=this._buffer.byteLength||this._resizeBuffer(2*J$a+256,!0),this._byteLength=J$a)}),J$b.__int__=function(J$a){J$sa.QuadrangleIB=J$sa.create(35044),J$qa.fillIBQuadrangle(J$sa.QuadrangleIB,16)},J$b.FLOAT32=4,J$b.SHORT=2,J$b}(J$Na),J$$a=(function(J$b){function J$c(J$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,J$c.__super.call(this,9)}J$m(J$c,"laya.webgl.shader.d2.value.GlowSV",J$b);var J$a=J$c.prototype;J$a.setValue=function(J$a){J$b.prototype.setValue.call(this,J$a)},J$a.clear=function(){J$b.prototype.clear.call(this)}}(J$Ra),function(J$a){function J$b(J$a){J$b.__super.call(this,64),this.defines.add(64)}J$m(J$b,"laya.webgl.shader.d2.value.TextSV",J$a);var J$c=J$b.prototype;return J$c.release=function(){(J$b.pool[J$b._length++]=this).clear()},J$c.clear=function(){J$a.prototype.clear.call(this)},J$b.create=function(){return J$b._length?J$b.pool[--J$b._length]:new J$b(null)},J$b.pool=[],J$b._length=0,J$b}(J$Ra)),J$_a=function(J$a){function J$e(J$a,J$b,J$c,J$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,J$e.__super.call(this,J$a,J$b,J$c,J$d)}J$m(J$e,"laya.webgl.shader.d2.Shader2X",J$a);var J$b=J$e.prototype;return J$b.upload2dQuick1=function(J$a){this.upload(J$a,this._params2dQuick1||this._make2dQuick1())},J$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var J$a,J$b=this._params,J$c=0,J$d=J$b.length;J$c<J$d;J$c++)J$a=J$b[J$c],(J$r.isFlash||"size"!==J$a.name&&"position"!==J$a.name&&"texcoord"!==J$a.name)&&this._params2dQuick1.push(J$a)}return this._params2dQuick1},J$b.disposeResource=function(){J$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},J$b.upload2dQuick2=function(J$a){this.upload(J$a,this._params2dQuick2||this._make2dQuick2())},J$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var J$a,J$b=this._params,J$c=0,J$d=J$b.length;J$c<J$d;J$c++)J$a=J$b[J$c],(J$r.isFlash||"size"!==J$a.name)&&this._params2dQuick2.push(J$a)}return this._params2dQuick2},J$e.create=function(J$a,J$b,J$c,J$d){return new J$e(J$a,J$b,J$c,J$d)},J$e}(J$Ya),J$sa=function(J$a){function J$b(J$a){this._uint8Array=null,this._uint16Array=null,void 0===J$a&&(J$a=35044),J$b.__super.call(this),this._bufferUsage=J$a,this._bufferType=34963,J$r.isFlash||(this._buffer=new ArrayBuffer(8))}J$m(J$b,"laya.webgl.utils.IndexBuffer2D",J$Za);var J$c=J$b.prototype;return J$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},J$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},J$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},J$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},J$b.QuadrangleIB=null,J$b.create=function(J$a){return void 0===J$a&&(J$a=35044),new J$b(J$a)},J$b}(),J$ta=function(J$a){function J$c(J$a,J$b){this._floatArray32=null,this._vertexStride=0,J$c.__super.call(this),this._vertexStride=J$a,this._bufferUsage=J$b,this._bufferType=34962,J$r.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}J$m(J$c,"laya.webgl.utils.VertexBuffer2D",J$a);var J$b=J$c.prototype;return J$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},J$b.bind=function(J$a){J$a&&J$a._bind(),this._bind()},J$b.insertData=function(J$a,J$b){this.getFloat32Array().set(J$a,J$b),this._upload=!0},J$b.bind_upload=function(J$a){J$a._bind_upload()||J$a._bind(),this._bind_upload()||this._bind()},J$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},J$b.disposeResource=function(){J$a.prototype.disposeResource.call(this)},J$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},J$d(0,J$b,"vertexStride",function(){return this._vertexStride}),J$c.create=function(J$a,J$b){return void 0===J$b&&(J$b=35048),new J$c(J$a,J$b)},J$c}(J$Za),J$ab=function(J$a){function J$h(J$a,J$b,J$c,J$d,J$e,J$f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===J$c&&(J$c=6408),void 0===J$d&&(J$d=!0),J$h.__super.call(this,J$a,J$b),J$a){if(this._format=J$c,this._mipmap=J$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof J$a)this._url=J$a,this._src=J$a,this._image=new J$n.window.Image,J$b&&(J$b.onload&&(this.onload=J$b.onload),J$b.onerror&&(this.onerror=J$b.onerror),J$b.onCreate&&J$b.onCreate(this)),this._image.crossOrigin=J$a&&0==J$a.indexOf("data:")?null:"",J$a&&(this._image.src=J$a);else if(J$a instanceof ArrayBuffer){this._src=J$b,this._url=this._src;var J$g=new J$j(J$a);J$g.readUTFBytes(4),J$g.readUTFBytes(2),J$g.getInt16();J$g.endian="bigEndian",this._w=J$g.getInt16(),this._h=J$g.getInt16();J$g.getInt16(),J$g.getInt16();this._image=new Uint8Array(J$a,J$g.pos),this._format=J$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,J$Q.enabled&&this._w<J$Q.atlasLimitWidth&&this._h<J$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(J$a instanceof Uint8Array))return this._src=J$b,this._url=this._src,this._image=J$a.source||J$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=J$b,this._url=this._src,this._w=J$e,this._h=J$f,this._image=J$a,this._format=0===J$c?J$a.byteLength/(J$e*J$f)==4?6408:6407:J$c}this._$5__enableMerageInAtlas=!0}}J$m(J$h,"laya.webgl.resource.WebGLImage",J$q);var J$b=J$h.prototype;return J$y.imps(J$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),J$b._init_=function(J$a,J$b){},J$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var J$a=J$wa.mainContext,J$b=this._source=J$a.createTexture(),J$c=J$xa.curBindTexTarget,J$d=J$xa.curBindTexValue;J$xa.bindTexture(J$a,3553,J$b);var J$e=this.minFifter,J$f=this.magFifter,J$g=this.repeat?10497:33071,J$h=J$k.isPOT(this._w,this._h),J$i=!1;switch(J$h?(this.mipmap?-1!==J$e||(J$e=9987):-1!==J$e||(J$e=9729),-1!==J$f||(J$f=9729),J$a.texParameteri(3553,10241,J$e),J$a.texParameteri(3553,10240,J$f),J$a.texParameteri(3553,10242,J$g),J$a.texParameteri(3553,10243,J$g),this.mipmap&&J$a.generateMipmap(3553)):(-1!==J$e||(J$e=9729),-1!==J$f||(J$f=9729),J$a.texParameteri(3553,10241,J$e),J$a.texParameteri(3553,10240,J$f),J$a.texParameteri(3553,10242,33071),J$a.texParameteri(3553,10243,33071)),J$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&J$a.pixelStorei(J$a.UNPACK_ALIGNMENT,1),J$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&J$a.pixelStorei(J$a.UNPACK_ALIGNMENT,1),J$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:J$i=!0,J$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case J$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:J$i=!0,J$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}J$a.pixelStorei(37441,!1),J$c&&J$d&&J$xa.bindTexture(J$a,J$c,J$d),this.uri||(this.uri=this._url),J$i?this.memorySize=this._image.length:J$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},J$b.recreateResource=function(){var J$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var J$b=this;this._image=new J$n.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(J$b._needReleaseAgain)return J$b._needReleaseAgain=!1,J$b._image.onload=null,void(J$b._image=null);J$b._allowMerageInAtlas&&J$b._enableMerageInAtlas?(J$a.memorySize=0,J$a._recreateLock=!1):J$b._createWebGlTexture(),J$b.completeCreate()},this._image.src=this._src}},J$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&J$wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},J$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,J$Q.enabled&&this._w<J$Q.atlasLimitWidth&&this._h<J$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},J$b.clearAtlasSource=function(){this._image=null},J$d(0,J$b,"format",function(){return this._format}),J$d(0,J$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(J$a){this._$5__enableMerageInAtlas=J$a}),J$d(0,J$b,"mipmap",function(){return this._mipmap}),J$d(0,J$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),J$d(0,J$b,"atlasSource",function(){return this._image}),J$d(0,J$b,"onload",null,function(J$a){var J$b=this;this._onload=J$a,this._image&&(this._image.onload=null!=this._onload?function(){J$b.onresize(),J$b._onload()}:null)}),J$d(0,J$b,"onerror",null,function(J$a){var J$b=this;this._onerror=J$a,this._image&&(this._image.onerror=null!=this._onerror?function(){J$b._onerror()}:null)}),J$h}();J$y.__init([J$na,J$P,J$za,J$va])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}}),function(J$f,J$a,J$d){J$d.un,J$d.uns;var J$e=J$d.static,J$g=J$d.class,J$h=J$d.getset,J$i=(J$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),J$o=laya.utils.ClassUtils,J$l=(laya.events.Event,laya.utils.HTMLChar),J$j=laya.net.Loader,J$k=(laya.display.Node,laya.maths.Rectangle),J$m=laya.renders.Render,J$n=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),J$p=laya.utils.Stat,J$L=laya.display.Text,J$q=laya.resource.Texture,J$r=laya.net.URL,J$u=laya.utils.Utils,J$v=function(){function J$n(){}return J$g(J$n,"laya.html.utils.HTMLParse"),J$n.parse=function(J$a,J$b,J$c){J$b=(J$b="<root>"+(J$b=J$b.replace(/<br>/g,"<br/>"))+"</root>").replace(J$n.spacePattern,J$n.char255);var J$d=J$u.parseXMLFromString(J$b);J$n._parseXML(J$a,J$d.childNodes[0].childNodes,J$c)},J$n._parseXML=function(J$a,J$b,J$c,J$d){var J$e=0,J$f=0;if(J$b.join||J$b.item)for(J$e=0,J$f=J$b.length;J$e<J$f;++J$e)J$n._parseXML(J$a,J$b[J$e],J$c,J$d);else{var J$g,J$h,J$i;if(3==J$b.nodeType)return void(J$a instanceof laya.html.dom.HTMLDivElement?(null==J$b.nodeName&&(J$b.nodeName="#text"),J$h=J$b.nodeName.toLowerCase(),0<(J$i=J$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(J$g=J$o.getInstance(J$h))&&(J$a.addChild(J$g),J$g.innerTEXT=J$i.replace(J$n.char255AndOneSpacePattern," "))):0<(J$i=J$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(J$a.innerTEXT=J$i.replace(J$n.char255AndOneSpacePattern," ")));if("#comment"==(J$h=J$b.nodeName.toLowerCase()))return;if(J$g=J$o.getInstance(J$h)){(J$g=J$a.addChild(J$g)).URI=J$c,J$g.href=J$d;var J$j=J$b.attributes;if(J$j&&0<J$j.length)for(J$e=0,J$f=J$j.length;J$e<J$f;++J$e){var J$k=J$j[J$e],J$l=J$k.nodeName,J$m=J$k.value;J$g._setAttributes(J$l,J$m)}J$n._parseXML(J$g,J$b.childNodes,J$c,J$g.href)}else J$n._parseXML(J$a,J$b.childNodes,J$c,J$d)}},J$n.char255=String.fromCharCode(255),J$n.spacePattern=/&nbsp;|&#160;/g,J$n.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),J$n}(),J$w=function(){function J$K(){}return J$g(J$K,"laya.html.utils.Layout"),J$K.later=function(J$a){null==J$K._will&&(J$K._will=[],J$d.stage.frameLoop(1,null,function(){if(!(J$K._will.length<1)){for(var J$a=0;J$a<J$K._will.length;J$a++)laya.html.utils.Layout.layout(J$K._will[J$a]);J$K._will.length=0}})),J$K._will.push(J$a)},J$K.layout=function(J$a){if(!J$a||!J$a._style)return null;if(0==(512&J$a._style._type))return null;J$a.getStyle()._type&=-513;var J$b=J$K._multiLineLayout(J$a);return J$m.isConchApp&&J$a.layaoutCallNative&&J$a.layaoutCallNative(),J$b},J$K._multiLineLayout=function(J$a){if(J$L.RightToLeft)return J$K._multiLineLayout2(J$a);var J$b=new Array;J$a._addChildsToLayout(J$b);var J$c,J$d,J$e,J$f,J$g,J$h=0,J$i=J$b.length,J$j=J$a._getCSSStyle(),J$k=J$j.letterSpacing,J$l=J$j.leading,J$m=J$j.lineHeight,J$n=J$j._widthAuto()||!J$j.wordWrap,J$o=J$n?999999:J$a.width,J$p=(J$a.height,0),J$q=J$j.italic?J$j.fontSize/3:0,J$r=J$j._getAlign(),J$u=J$j._getValign(),J$v=0!==J$u||0!==J$r||0!=J$m,J$w=0,J$x=0,J$y=0,J$z=0,J$A=new Array,J$B=J$A[0]=new J$M,J$C=!1,J$D=!1;J$B.h=0,J$j.italic&&(J$o-=J$j.fontSize/3);var J$E=0,J$F=!0;function J$G(){J$B.y=J$x,J$x+=J$B.h+J$l,0==J$B.h&&(J$x+=J$m),J$B.mWidth=J$E,J$E=0,J$B=new J$M,J$A.push(J$B),J$B.h=0,J$C=!(J$F=!(J$w=0))}for(J$h=0;J$h<J$i;J$h++)if(null!=(J$c=J$b[J$h]))if(J$F=!1,J$c instanceof laya.html.dom.HTMLBrElement)J$G(),J$B.y=J$x;else{if(J$c._isChar()){if((J$f=J$c).isWord)J$C=J$D||"\n"===J$f.char,J$B.wordStartIndex=J$B.elements.length;else{if(J$y=J$f.width+J$f.style.letterSpacin,0<J$A.length&&J$o<J$w+J$y&&0<J$B.wordStartIndex){var J$H;J$H=J$B.elements.length-J$B.wordStartIndex+1,J$B.elements.length=J$B.wordStartIndex,J$h-=J$H,J$G();continue}J$C=!1,J$E+=J$f.width}J$y=J$f.width+J$k,J$z=J$f.height,J$D=!1,(J$C=J$C||J$o<J$w+J$y)&&J$G(),J$B.minTextHeight=Math.min(J$B.minTextHeight,J$c.height)}else J$d=J$c._getCSSStyle(),J$g=J$c,J$e=J$d.padding,0===J$d._getCssFloat()||(J$v=!0),J$C=J$D||J$d.lineElement,J$y=J$g.width*J$g._style._tf.scaleX+J$e[1]+J$e[3]+J$k,J$z=J$g.height*J$g._style._tf.scaleY+J$e[0]+J$e[2],J$D=J$d.lineElement,(J$C=J$C||J$o<J$w+J$y&&J$d.wordWrap)&&J$G();J$B.elements.push(J$c),J$B.h=Math.max(J$B.h,J$z),J$c.x=J$w,J$c.y=J$x,J$w+=J$y,J$B.w=J$w-J$k,J$B.y=J$x,J$p=Math.max(J$w+J$q,J$p)}else J$F||(J$w+=J$K.DIV_ELEMENT_PADDING),J$B.wordStartIndex=J$B.elements.length;if(J$x=J$B.y+J$B.h,J$v){var J$I=0,J$J=J$o;for(J$n&&0<J$a.width&&(J$J=J$a.width),J$h=0,J$i=J$A.length;J$h<J$i;J$h++)J$A[J$h].updatePos(0,J$J,J$h,J$I,J$r,J$u,J$m),J$I+=Math.max(J$m,J$A[J$h].h+J$l);J$x=J$I}return J$n&&(J$a.width=J$p),J$x>J$a.height&&(J$a.height=J$x),[J$p,J$x]},J$K._multiLineLayout2=function(J$a){var J$b=new Array;J$a._addChildsToLayout(J$b);var J$c,J$d,J$e,J$f,J$g,J$h=0,J$i=J$b.length,J$j=J$a._getCSSStyle(),J$k=J$j.letterSpacing,J$l=J$j.leading,J$m=J$j.lineHeight,J$n=J$j._widthAuto()||!J$j.wordWrap,J$o=J$n?999999:J$a.width,J$p=(J$a.height,0),J$q=J$j.italic?J$j.fontSize/3:0,J$r=2-J$j._getAlign(),J$u=J$j._getValign(),J$v=0!==J$u||0!=J$r||0!=J$m,J$w=0,J$x=0,J$y=0,J$z=0,J$A=new Array,J$B=J$A[0]=new J$M,J$C=!1,J$D=!1;J$B.h=0,J$j.italic&&(J$o-=J$j.fontSize/3);var J$E=0,J$F=!0;function J$G(){J$B.y=J$x,J$x+=J$B.h+J$l,0==J$B.h&&(J$x+=J$m),J$B.mWidth=J$E,J$E=0,J$B=new J$M,J$A.push(J$B),J$B.h=0,J$C=!(J$F=!(J$w=0))}for(J$h=0;J$h<J$i;J$h++)if(null!=(J$c=J$b[J$h]))if(J$F=!1,J$c instanceof laya.html.dom.HTMLBrElement)J$G(),J$B.y=J$x;else{if(J$c._isChar()){if((J$f=J$c).isWord)J$C=J$D||"\n"===J$f.char,J$B.wordStartIndex=J$B.elements.length;else{if(0<J$A.length&&J$o<J$w+J$y&&0<J$B.wordStartIndex){var J$H;J$H=J$B.elements.length-J$B.wordStartIndex+1,J$B.elements.length=J$B.wordStartIndex,J$h-=J$H,J$G();continue}J$C=!1,J$E+=J$f.width}J$y=J$f.width+J$k,J$z=J$f.height,J$D=!1,(J$C=J$C||J$o<J$w+J$y)&&J$G(),J$B.minTextHeight=Math.min(J$B.minTextHeight,J$c.height)}else J$d=J$c._getCSSStyle(),J$g=J$c,J$e=J$d.padding,0===J$d._getCssFloat()||(J$v=!0),J$C=J$D||J$d.lineElement,J$y=J$g.width*J$g._style._tf.scaleX+J$e[1]+J$e[3]+J$k,J$z=J$g.height*J$g._style._tf.scaleY+J$e[0]+J$e[2],J$D=J$d.lineElement,(J$C=J$C||J$o<J$w+J$y&&J$d.wordWrap)&&J$G();J$B.elements.push(J$c),J$B.h=Math.max(J$B.h,J$z),J$c.x=J$w,J$c.y=J$x,J$w+=J$y,J$B.w=J$w-J$k,J$B.y=J$x,J$p=Math.max(J$w+J$q,J$p)}else J$F||(J$w+=J$K.DIV_ELEMENT_PADDING),J$B.wordStartIndex=J$B.elements.length;if(J$x=J$B.y+J$B.h,J$v){var J$I=0,J$J=J$o;for(J$h=0,J$i=J$A.length;J$h<J$i;J$h++)J$A[J$h].updatePos(0,J$J,J$h,J$I,J$r,J$u,J$m),J$I+=Math.max(J$m,J$A[J$h].h+J$l);J$x=J$I}for(J$n&&(J$a.width=J$p),J$x>J$a.height&&(J$a.height=J$x),J$h=0,J$i=J$A.length;J$h<J$i;J$h++)J$A[J$h].revertOrder(J$o);return[J$p,J$x]},J$K._will=null,J$K.DIV_ELEMENT_PADDING=0,J$K}(),J$M=function(){function J$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}J$g(J$a,"laya.html.utils.LayoutLine");var J$b=J$a.prototype;return J$b.updatePos=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h,J$i=0;0<this.elements.length&&(J$i=(J$h=this.elements[this.elements.length-1]).x+J$h.width-this.elements[0].x);var J$j=0,J$k=NaN;1===J$e&&(J$j=(J$b-J$i)/2),2===J$e&&(J$j=J$b-J$i),0===J$g||0!=J$f||(J$f=1);for(var J$l=0,J$m=this.elements.length;J$l<J$m;J$l++){var J$n=(J$h=this.elements[J$l])._getCSSStyle();switch(0!==J$j&&(J$h.x+=J$j),J$n._getValign()){case 0:J$h.y=J$d;break;case 1:var J$o=0;99999!=this.minTextHeight&&(J$o=this.minTextHeight);var J$p=(J$o+J$g)/2;J$p=Math.max(J$p,this.h),J$k=(laya.html.dom.HTMLImageElement,J$d+J$p-J$h.height),J$h.y=J$k;break;case 2:J$h.y=J$d+(J$g-J$h.height)}}},J$b.revertOrder=function(J$a){var J$b;if(0<this.elements.length){var J$c,J$d=0;for(J$c=this.elements.length,J$d=0;J$d<J$c;J$d++)(J$b=this.elements[J$d]).x=J$a-J$b.x-J$b.width}},J$a}(),J$x=function(J$c){function J$b(){this.URI=null,this._href=null,J$b.__super.call(this),this._text=J$b._EMPTYTEXT,this.setStyle(new J$i(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}J$g(J$b,"laya.html.dom.HTMLElement",J$c);var J$a=J$b.prototype;return J$a.layaoutCallNative=function(){var J$a=0;if(this._childs&&0<(J$a=this._childs.length))for(var J$b=0;J$b<J$a;J$b++)this._childs[J$b].layaoutCallNative&&this._childs[J$b].layaoutCallNative();var J$c=this._getWords();J$c?laya.html.dom.HTMLElement.fillWords(this,J$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},J$a.appendChild=function(J$a){return this.addChild(J$a)},J$a._getWords2=function(){var J$a=this._text.text;if(!J$a||0===J$a.length)return null;var J$b,J$c,J$d=0,J$e=0;if(this._text.drawWords)J$c=this._text.drawWords;else{for(J$e=(J$b=J$a.split(" ")).length-1,J$c=[],J$d=0;J$d<J$e;J$d++)J$c.push(J$b[J$d]," ");0<=J$e&&J$c.push(J$b[J$e]),this._text.drawWords=J$c}var J$f,J$g=this._text.words;if(J$g&&J$g.length===J$c.length)return J$g;null===J$g&&(this._text.words=J$g=[]),J$g.length=J$c.length;var J$h=this.style,J$i=J$h.font;for(J$d=0,J$e=J$c.length;J$d<J$e;J$d++){J$f=J$u.measureText(J$c[J$d],J$i);var J$j=J$g[J$d]=new J$l(J$c[J$d],J$f.width,J$f.height||J$h.fontSize,J$h);if(1<J$j.char.length&&(J$j.charNum=J$j.char),this.href){var J$k=new J$n;this.addChild(J$k),J$j.setSprite(J$k)}}return J$g},J$a._getWords=function(){if(!J$L.CharacterCache)return this._getWords2();var J$a=this._text.text;if(!J$a||0===J$a.length)return null;var J$b,J$c=this._text.words;if(J$c&&J$c.length===J$a.length)return J$c;null===J$c&&(this._text.words=J$c=[]),J$c.length=J$a.length;for(var J$d=this.style,J$e=J$d.font,J$f=0,J$g=J$a.length;J$f<J$g;J$f++)if(J$b=J$u.measureText(J$a.charAt(J$f),J$e)){var J$h=J$c[J$f]=new J$l(J$a.charAt(J$f),J$b.width,J$b.height||J$d.fontSize,J$d);if(this.href){var J$i=new J$n;this.addChild(J$i),J$h.setSprite(J$i)}}else console.warn("_getWords size is null"+J$a.charAt(J$f),J$e);return J$c},J$a.showLinkSprite=function(){var J$a=this._text.words;if(J$a)for(var J$b,J$c,J$d=[],J$e=0;J$e<J$a.length;J$e++)J$c=J$a[J$e],(J$b=new J$n).graphics.drawRect(0,0,J$c.width,J$c.height,"#ff0000"),J$b.width=J$c.width,J$b.height=J$c.height,this.addChild(J$b),J$d.push(J$b)},J$a._layoutLater=function(){var J$a=this.style;512&J$a._type||(J$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&J$a.block?(J$w.later(this),J$a._type|=512):this.parent&&this.parent._layoutLater())},J$a._setAttributes=function(J$a,J$b){switch(J$a){case"style":return void this.style.cssText(J$b);case"class":return void(this.className=J$b)}J$c.prototype._setAttributes.call(this,J$a,J$b)},J$a.updateHref=function(){if(null!=this._href){var J$a=this._getWords();if(J$a)for(var J$b,J$c,J$d=0;J$d<J$a.length;J$d++)(J$c=(J$b=J$a[J$d]).getSprite())&&(J$c.size(J$b.width,J$b.height),J$c.on("click",this,this.onLinkHandler))}},J$a.onLinkHandler=function(J$a){switch(J$a.type){case"click":for(var J$b=this;J$b;)J$b.event("link",[this.href]),J$b=J$b.parent}},J$a.formatURL=function(J$a){return this.URI?J$r.formatURL(J$a,this.URI?this.URI.path:null):J$a},J$h(0,J$a,"href",function(){return this._href},function(J$a){null!=(this._href=J$a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),J$h(0,J$a,"color",null,function(J$a){this.style.color=J$a}),J$h(0,J$a,"onClick",null,function(J$a){J$d._runScript("fn=function(event){"+J$a+";}"),this.on("click",this,void 0)}),J$h(0,J$a,"id",null,function(J$a){J$y.document.setElementById(J$a,this)}),J$h(0,J$a,"innerTEXT",function(){return this._text.text},function(J$a){this.text=J$a}),J$h(0,J$a,"style",function(){return this._style}),J$h(0,J$a,"text",function(){return this._text.text},function(J$a){this._text==J$b._EMPTYTEXT?this._text={text:J$a,words:null}:(this._text.text=J$a,this._text.words&&(this._text.words.length=0)),J$m.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),J$h(0,J$a,"parent",J$c.prototype._$get_parent,function(J$a){if(J$a instanceof laya.html.dom.HTMLElement){var J$b=J$a;this.URI||(this.URI=J$b.URI),this.style.inherit(J$b.style)}J$d.superSet(J$n,this,"parent",J$a)}),J$h(0,J$a,"className",null,function(J$a){this.style.attrs(J$y.document.styleSheets["."+J$a])}),J$b.fillWords=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$a.graphics.clear();for(var J$h=0,J$i=J$b.length;J$h<J$i;J$h++){var J$j=J$b[J$h];J$a.graphics.fillText(J$j.char,J$j.x+J$c,J$j.y+J$d,J$e,J$f,"left",J$g)}},J$b._EMPTYTEXT={text:null,words:null},J$b}(J$n),J$b=(function(J$a){function J$b(){J$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}J$g(J$b,"laya.html.dom.HTMLBrElement",J$x)}(),function(J$a){function J$b(){this.contextHeight=NaN,this.contextWidth=NaN,J$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}J$g(J$b,"laya.html.dom.HTMLDivElement",J$a);var J$c=J$b.prototype;return J$c.appendHTML=function(J$a){J$v.parse(this,J$a,this.URI),this.layout()},J$c._addChildsToLayout=function(J$b){var J$a=this._getWords();if(null==J$a&&0==this._childs.length)return!1;J$a&&J$a.forEach(function(J$a){J$b.push(J$a)});for(var J$c=!0,J$d=0,J$e=this._childs.length;J$d<J$e;J$d++){var J$f=this._childs[J$d];J$c?J$c=!1:J$b.push(null),J$f._addToLayout(J$b)}return!0},J$c._addToLayout=function(J$a){this.layout()},J$c.layout=function(){if(this.style){this.style._type|=512;var J$a=J$w.layout(this);if(J$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new J$k);var J$b=this._$P.mHtmlBounds;J$b.x=J$b.y=0,J$b.width=this.contextWidth=J$a[0],J$b.height=this.contextHeight=J$a[1],this.setBounds(J$b)}}},J$h(0,J$c,"height",function(){return this._height?this._height:this.contextHeight},J$a.prototype._$set_height),J$h(0,J$c,"innerHTML",null,function(J$a){this.destroyChildren(),this.appendHTML(J$a)}),J$h(0,J$c,"width",function(){return this._width?this._width:this.contextWidth},function(J$a){var J$b=!1;J$b=0===J$a?J$a!=this._width:J$a!=this.width,J$d.superSet(J$x,this,"width",J$a),J$b&&this.layout()}),J$b}(J$x)),J$y=function(J$a){function J$b(){this.all=new Array,this.styleSheets=J$i.styleSheets,J$b.__super.call(this)}J$g(J$b,"laya.html.dom.HTMLDocument",J$x);var J$c=J$b.prototype;return J$c.getElementById=function(J$a){return this.all[J$a]},J$c.setElementById=function(J$a,J$b){this.all[J$a]=J$b},J$e(J$b,["document",function(){return this.document=new J$b}]),J$b}();(function(J$a){function J$b(){this._tex=null,this._url=null,this._renderArgs=[],J$b.__super.call(this),this.style.block=!0}J$g(J$b,"laya.html.dom.HTMLImageElement",J$x);var J$c=J$b.prototype;J$c._addToLayout=function(J$a){!this._style.absolute&&J$a.push(this)},J$c.render=function(J$a,J$b,J$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(J$p.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,J$a.ctx.drawTexture2(J$b,J$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},J$c.layaoutCallNative=function(){var J$a=0;if(this._childs&&0<(J$a=this._childs.length))for(var J$b=0;J$b<J$a;J$b++)this._childs[J$b].layaoutCallNative&&this._childs[J$b].layaoutCallNative()},J$h(0,J$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(J$a){this._width!==J$a&&(this._width=J$a,this._style.width=J$a,this.repaint())}),J$h(0,J$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(J$a){this._height!==J$a&&(this._height=J$a,this._style.height=J$a,this.repaint())}),J$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),J$j.clearCache(this,this._url),this._tex=null),J$x.prototype.destroy.call(this)},J$c.onloaded=function(){var J$a=this._style;J$a&&!J$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),J$a&&!J$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),J$m.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},J$c._loadImageComplete=function(J$a,J$b,J$c){if(!this._destroyed)if(null!=J$c)if(J$c instanceof ArrayBuffer){var J$d=new DataView(J$c);new laya.webgl.resource.WebGLImage(new Uint8Array(J$c,8),J$a,0,!1,J$d.getUint32(0),J$d.getUint32(4));this.onloaded()}else if(J$c instanceof J$q)J$j.imgMgrSet[J$a]=J$b,J$f.imgMgrLock(J$a,J$j.imgMgrSet[J$a]),this._url=J$a,this._tex=J$c,J$j.keepCache(this,J$a),J$j.cacheRes(J$a,this._tex),this.onloaded();else{var J$e=-1!=J$a.indexOf(".png",J$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(J$c,J$a,J$e,!1,J$c.width,J$c.height);this.onloaded()}else this.event("error","Load image failed")},J$h(0,J$c,"src",null,function(J$a){(J$a=this.formatURL(J$a),this._url!=J$a)&&(null!=this._tex&&(J$j.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=J$a,(this._tex=J$j.getRes(J$a))?(J$j.keepCache(this,J$a),this.onloaded()):J$f.imgMgrLoad(J$a,this._loadImageComplete.bind(this),2,!1))})})(),function(J$a){function J$b(){this.type=null,J$b.__super.call(this),this.visible=!1}J$g(J$b,"laya.html.dom.HTMLLinkElement",J$a);var J$c=J$b.prototype;J$c._onload=function(J$a){switch(this.type){case"text/css":J$i.parseCSS(J$a,this.URI)}},J$h(0,J$c,"href",J$a.prototype._$get_href,function(J$a){var J$b=this;J$a=this.formatURL(J$a),this.URI=new J$r(J$a);var J$c=new J$j;J$c.once("complete",null,function(J$a){J$b._onload(J$a)}),J$c.load(J$a,"text")}),J$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(J$x),function(J$a){function J$b(){J$b.__super.call(this),this.visible=!1}J$g(J$b,"laya.html.dom.HTMLStyleElement",J$a),J$h(0,J$b.prototype,"text",J$a.prototype._$get_text,function(J$a){J$i.parseCSS(J$a,null)})}(J$x),function(J$a){function J$b(){J$b.__super.call(this),this._getCSSStyle().valign="middle"}J$g(J$b,"laya.html.dom.HTMLIframeElement",J$a),J$h(0,J$b.prototype,"href",J$a.prototype._$get_href,function(J$c){var J$d=this;J$c=this.formatURL(J$c);var J$a=new J$j;J$a.once("complete",null,function(J$a){var J$b=J$d.URI;J$d.URI=new J$r(J$c),J$d.innerHTML=J$a,!J$b||(J$d.URI=J$b)}),J$a.load(J$c,"text")})}(J$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}}),function(J$e,J$a,J$p){J$p.un,J$p.uns;var J$d=J$p.static,J$f=J$p.class,J$g=J$p.getset,J$c=(J$p.__newvec,laya.display.Animation),J$q=(laya.utils.Browser,laya.utils.ClassUtils),J$h=laya.filters.ColorFilter,J$i=laya.utils.Ease,J$j=laya.events.Event,J$k=(laya.events.EventDispatcher,laya.display.css.Font),J$l=laya.display.FrameAnimation,J$b=laya.display.Graphics,J$m=laya.utils.Handler,J$n=laya.display.Input,J$u=laya.net.Loader,J$o=(laya.display.Node,laya.maths.Point),J$r=laya.maths.Rectangle,J$v=laya.renders.Render,J$w=laya.display.Sprite,J$x=laya.display.Text,J$y=laya.resource.Texture,J$z=laya.utils.Tween,J$A=laya.utils.Utils,J$B=laya.utils.WeakObject;J$p.interface("laya.ui.IItem"),J$p.interface("laya.ui.ISelect"),J$p.interface("laya.ui.IRender"),J$p.interface("laya.ui.IComponent"),J$p.interface("laya.ui.IBox","IComponent");var J$C=function(){function J$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return J$f(J$a,"laya.ui.LayoutStyle"),J$d(J$a,["EMPTY",function(){return this.EMPTY=new J$a}]),J$a}(),J$D=function(){function J$a(){}return J$f(J$a,"laya.ui.Styles"),J$a.labelColor="#000000",J$a.buttonStateNum=3,J$a.scrollBarMinNum=15,J$a.scrollBarDelayTime=500,J$d(J$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),J$a}(),J$E=function(){function J$e(){}return J$f(J$e,"laya.ui.UIUtils"),J$e.fillArray=function(J$a,J$b,J$c){var J$d=J$a.concat();if(J$b)for(var J$e=J$b.split(","),J$f=0,J$g=Math.min(J$d.length,J$e.length);J$f<J$g;J$f++){var J$h=J$e[J$f];J$d[J$f]="true"==J$h||"false"!=J$h&&J$h,null!=J$c&&(J$d[J$f]=J$c(J$h))}return J$d},J$e.toColor=function(J$a){return J$A.toHexColor(J$a)},J$e.gray=function(J$a,J$b){void 0===J$b&&(J$b=!0),J$b?J$e.addFilter(J$a,J$e.grayFilter):J$e.clearFilter(J$a,J$h)},J$e.addFilter=function(J$a,J$b){var J$c=J$a.filters||[];J$c.push(J$b),J$a.filters=J$c},J$e.clearFilter=function(J$a,J$b){var J$c=J$a.filters;if(null!=J$c&&0<J$c.length){for(var J$d=J$c.length-1;-1<J$d;J$d--){var J$e=J$c[J$d];J$p.__typeof(J$e,J$b)&&J$c.splice(J$d,1)}J$a.filters=J$c}},J$e._getReplaceStr=function(J$a){return J$e.escapeSequence[J$a]},J$e.adptString=function(J$a){return J$a.replace(/\\(\w)/g,J$e._getReplaceStr)},J$e.getBindFun=function(J$a){var J$b=J$e._funMap.get(J$a);if(null==J$b){var J$c='"'+J$a+'"',J$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(J$c=J$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";J$b=J$p._runScript(J$d),J$e._funMap.set(J$a,J$b)}return J$b},J$d(J$e,["grayFilter",function(){return this.grayFilter=new J$h([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new J$B}]),J$e}(),J$F=function(){function J$a(){}return J$f(J$a,"UIConfig"),J$a.touchScrollEnable=!0,J$a.mouseWheelEnable=!0,J$a.showButtons=!0,J$a.popupBgColor="#000000",J$a.popupBgAlpha=.5,J$a.closeDialogOnSide=!0,J$a}(),J$G=function(J$c){function J$r(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,J$r.__super.call(this),this._weakKeys=[]}J$f(J$r,"laya.ui.AutoBitmap",J$c);var J$a=J$r.prototype;return J$a.destroy=function(){if(J$u.clearObject(this,this._weakKey),this._weakKeys){for(var J$a=0,J$b=this._weakKeys.length;J$a<J$b;++J$a)J$u.clearObject(this,this._weakKeys[J$a]);this._weakKeys=null}J$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},J$a._setChanged=function(){this._isChanged||(this._isChanged=!0,J$p.timer.callLater(this,this.changeSource))},J$a.changeSource=function(){this._isChanged=!1;var J$a=this._source;if(J$a&&J$a.bitmap){var J$b=this.width,J$c=this.height,J$d=this._sizeGrid,J$e=J$a.sourceWidth,J$f=J$a.sourceHeight;if(!J$d||J$e===J$b&&J$f===J$c)this.cleanByTexture(J$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,J$b,J$c);else{J$u.clearObject(this,this._weakKey),J$a.$_GID||(J$a.$_GID=J$A.getGID());var J$g=J$a.$_GID+"."+J$b+"."+J$c+"."+J$d.join("."),J$h=J$u.findObject(J$g);if(J$A.isOKCmdList(J$h))return this._weakKey=J$g,J$u.keepObject(this,this._weakKey),void(this.cmds=J$h);this.clear();var J$i,J$j,J$k=J$d[0],J$l=J$d[1],J$m=J$d[2],J$n=J$d[3],J$o=J$d[4],J$p=!1;if(J$b==J$e&&(J$n=J$l=0),J$c==J$f&&(J$k=J$m=0),J$b<J$n+J$l){var J$q=J$b;J$p=!0,J$b=J$n+J$l,this.save(),this.clipRect(0,0,J$q,J$c)}J$n&&J$k&&(J$i=J$r.getTexture(J$a,0,0,J$n,J$k),J$j=this._weakKeys[0],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[0]=J$i.weakKey),this.drawTexture(J$i,0,0,J$n,J$k)):(J$u.clearObject(this,J$j),this._weakKeys[0]="")),J$l&&J$k&&(J$i=J$r.getTexture(J$a,J$e-J$l,0,J$l,J$k),J$j=this._weakKeys[1],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[1]=J$i.weakKey),this.drawTexture(J$i,J$b-J$l,0,J$l,J$k)):(J$u.clearObject(this,J$j),this._weakKeys[1]="")),J$n&&J$m&&(J$i=J$r.getTexture(J$a,0,J$f-J$m,J$n,J$m),J$j=this._weakKeys[2],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[2]=J$i.weakKey),this.drawTexture(J$i,0,J$c-J$m,J$n,J$m)):(J$u.clearObject(this,J$j),this._weakKeys[2]="")),J$l&&J$m&&(J$i=J$r.getTexture(J$a,J$e-J$l,J$f-J$m,J$l,J$m),J$j=this._weakKeys[3],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[3]=J$i.weakKey),this.drawTexture(J$i,J$b-J$l,J$c-J$m,J$l,J$m)):(J$u.clearObject(this,J$j),this._weakKeys[3]="")),J$k&&(J$i=J$r.getTexture(J$a,J$n,0,J$e-J$n-J$l,J$k),J$j=this._weakKeys[4],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[4]=J$i.weakKey),this.drawBitmap(J$o,J$i,J$n,0,J$b-J$n-J$l,J$k)):(J$u.clearObject(this,J$j),this._weakKeys[4]="")),J$m&&(J$i=J$r.getTexture(J$a,J$n,J$f-J$m,J$e-J$n-J$l,J$m),J$j=this._weakKeys[5],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[5]=J$i.weakKey),this.drawBitmap(J$o,J$i,J$n,J$c-J$m,J$b-J$n-J$l,J$m)):(J$u.clearObject(this,J$j),this._weakKeys[5]="")),J$n&&(J$i=J$r.getTexture(J$a,0,J$k,J$n,J$f-J$k-J$m),J$j=this._weakKeys[6],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[6]=J$i.weakKey),this.drawBitmap(J$o,J$i,0,J$k,J$n,J$c-J$k-J$m)):(J$u.clearObject(this,J$j),this._weakKeys[6]="")),J$l&&(J$i=J$r.getTexture(J$a,J$e-J$l,J$k,J$l,J$f-J$k-J$m),J$j=this._weakKeys[7],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[7]=J$i.weakKey),this.drawBitmap(J$o,J$i,J$b-J$l,J$k,J$l,J$c-J$k-J$m)):(J$u.clearObject(this,J$j),this._weakKeys[7]="")),J$i=J$r.getTexture(J$a,J$n,J$k,J$e-J$n-J$l,J$f-J$k-J$m),J$j=this._weakKeys[8],J$i?(J$j!=J$i.weakKey&&(J$u.clearObject(this,J$j),J$u.keepObject(this,J$i.weakKey),this._weakKeys[8]=J$i.weakKey),this.drawBitmap(J$o,J$i,J$n,J$k,J$b-J$n-J$l,J$c-J$k-J$m)):(J$u.clearObject(this,J$j),this._weakKeys[8]=""),J$p&&this.restore(),this.autoCacheCmd&&!J$v.isConchApp&&(J$u.saveObject(J$g,this.cmds,null),this._weakKey=J$g,J$u.keepObject(this,this._weakKey))}this._repaint()}},J$a.drawBitmap=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=0),J$e<.1||J$f<.1||(!J$a||J$b.width==J$e&&J$b.height==J$f?this.drawTexture(J$b,J$c,J$d,J$e,J$f):this.fillTexture(J$b,J$c,J$d,J$e,J$f))},J$a.clear=function(J$a){void 0===J$a&&(J$a=!0),J$c.prototype.clear.call(this,!1)},J$g(0,J$a,"sizeGrid",function(){return this._sizeGrid},function(J$a){this._sizeGrid=J$a,this._setChanged()}),J$g(0,J$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(J$a){this._width!=J$a&&(this._width=J$a,this._setChanged())}),J$g(0,J$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(J$a){this._height!=J$a&&(this._height=J$a,this._setChanged())}),J$g(0,J$a,"source",function(){return this._source},function(J$a){J$a?(this._source=J$a,this._setChanged()):(this._source=null,this.clear())}),J$r.getTexture=function(J$a,J$b,J$c,J$d,J$e){J$d<=0&&(J$d=1),J$e<=0&&(J$e=1),J$a.$_GID||(J$a.$_GID=J$A.getGID());var J$f=J$a.$_GID+"."+J$b+"."+J$c+"."+J$d+"."+J$e,J$g=J$u.findObject(J$f);if((!J$g||!J$g.source)&&(J$g=J$y.createFromTexture(J$a,J$b,J$c,J$d,J$e))){if(J$a.alphaTexture){var J$h=J$a.width/J$a.alphaTexture.width;J$g.alphaTexture=J$y.createFromTexture(J$a.alphaTexture,J$b/J$h,J$c/J$h,J$d/J$h,J$e/J$h)}J$u.saveObject(J$f,J$g),J$g.weakKey=J$f}return J$g},J$r}(J$b),J$H=(function(J$a){function J$b(){J$b.__super.call(this)}J$f(J$b,"laya.ui.UIEvent",J$j),J$b.SHOW_TIP="showtip",J$b.HIDE_TIP="hidetip"}(),function(J$b){function J$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,J$a.__super.call(this),this._layout=J$C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}J$f(J$a,"laya.ui.Component",J$b);var J$c=J$a.prototype;return J$p.imps(J$c,{"laya.ui.IComponent":!0}),J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},J$c.preinitialize=function(){},J$c.createChildren=function(){},J$c.initialize=function(){},J$c.callLater=function(J$a,J$b){J$p.timer.callLater(this,J$a,J$b)},J$c.runCallLater=function(J$a){J$p.timer.runCallLater(this,J$a)},J$c.commitMeasure=function(){},J$c.changeSize=function(){this.event("resize")},J$c.getLayout=function(){return this._layout===J$C.EMPTY&&(this._layout=new J$C),this._layout},J$c._setLayoutEnabled=function(J$a){this._layout&&this._layout.enable!=J$a&&(this._layout.enable=J$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},J$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},J$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},J$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},J$c.resetLayoutX=function(){var J$a=this._layout;if(isNaN(J$a.anchorX)||(this.pivotX=J$a.anchorX*this.width),this.layoutEnabled){var J$b=this.parent;J$b&&(isNaN(J$a.centerX)?isNaN(J$a.left)?isNaN(J$a.right)||(this.x=Math.round(J$b.width-this.displayWidth-J$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(J$a.left+this.pivotX*this.scaleX),isNaN(J$a.right)||(this.width=(J$b._width-J$a.left-J$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(J$b.width-this.displayWidth)+J$a.centerX+this.pivotX*this.scaleX))}},J$c.resetLayoutY=function(){var J$a=this._layout;if(isNaN(J$a.anchorY)||(this.pivotY=J$a.anchorY*this.height),this.layoutEnabled){var J$b=this.parent;J$b&&(isNaN(J$a.centerY)?isNaN(J$a.top)?isNaN(J$a.bottom)||(this.y=Math.round(J$b.height-this.displayHeight-J$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(J$a.top+this.pivotY*this.scaleY),isNaN(J$a.bottom)||(this.height=(J$b._height-J$a.top-J$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(J$b.height-this.displayHeight)+J$a.centerY+this.pivotY*this.scaleY))}},J$c.onMouseOver=function(J$a){J$p.stage.event("showtip",this._toolTip)},J$c.onMouseOut=function(J$a){J$p.stage.event("hidetip",this._toolTip)},J$g(0,J$c,"displayWidth",function(){return this.width*this.scaleX}),J$g(0,J$c,"width",function(){return this._width?this._width:this.measureWidth},function(J$a){this._width!=J$a&&(this._width=J$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),J$g(0,J$c,"measureWidth",function(){var J$a=0;this.commitMeasure();for(var J$b=this.numChildren-1;-1<J$b;J$b--){var J$c=this.getChildAt(J$b);J$c.visible&&(J$a=Math.max(J$c.x+J$c.width*J$c.scaleX,J$a))}return J$a}),J$g(0,J$c,"displayHeight",function(){return this.height*this.scaleY}),J$g(0,J$c,"height",function(){return this._height?this._height:this.measureHeight},function(J$a){this._height!=J$a&&(this._height=J$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),J$g(0,J$c,"dataSource",function(){return this._dataSource},function(J$a){for(var J$b in this._dataSource=J$a,this._dataSource)this.hasOwnProperty(J$b)&&"function"!=typeof this[J$b]&&(this[J$b]=this._dataSource[J$b])}),J$g(0,J$c,"scaleY",J$b.prototype._$get_scaleY,function(J$a){J$p.superGet(J$w,this,"scaleY")!=J$a&&(J$p.superSet(J$w,this,"scaleY",J$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),J$g(0,J$c,"measureHeight",function(){var J$a=0;this.commitMeasure();for(var J$b=this.numChildren-1;-1<J$b;J$b--){var J$c=this.getChildAt(J$b);J$c.visible&&(J$a=Math.max(J$c.y+J$c.height*J$c.scaleY,J$a))}return J$a}),J$g(0,J$c,"scaleX",J$b.prototype._$get_scaleX,function(J$a){J$p.superGet(J$w,this,"scaleX")!=J$a&&(J$p.superSet(J$w,this,"scaleX",J$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),J$g(0,J$c,"top",function(){return this._layout.top},function(J$a){J$a!=this._layout.top&&(this.getLayout().top=J$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J$g(0,J$c,"bottom",function(){return this._layout.bottom},function(J$a){J$a!=this._layout.bottom&&(this.getLayout().bottom=J$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J$g(0,J$c,"left",function(){return this._layout.left},function(J$a){J$a!=this._layout.left&&(this.getLayout().left=J$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J$g(0,J$c,"right",function(){return this._layout.right},function(J$a){J$a!=this._layout.right&&(this.getLayout().right=J$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J$g(0,J$c,"centerX",function(){return this._layout.centerX},function(J$a){J$a!=this._layout.centerX&&(this.getLayout().centerX=J$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J$g(0,J$c,"centerY",function(){return this._layout.centerY},function(J$a){J$a!=this._layout.centerY&&(this.getLayout().centerY=J$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J$g(0,J$c,"anchorX",function(){return this._layout.anchorX},function(J$a){J$a!=this._layout.anchorX&&(this.getLayout().anchorX=J$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),J$g(0,J$c,"anchorY",function(){return this._layout.anchorY},function(J$a){J$a!=this._layout.anchorY&&(this.getLayout().anchorY=J$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),J$g(0,J$c,"tag",function(){return this._tag},function(J$a){this._tag=J$a}),J$g(0,J$c,"toolTip",function(){return this._toolTip},function(J$a){this._toolTip!=J$a&&(null!=(this._toolTip=J$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),J$g(0,J$c,"comXml",function(){return this._comXml},function(J$a){this._comXml=J$a}),J$g(0,J$c,"gray",function(){return this._gray},function(J$a){J$a!==this._gray&&(this._gray=J$a,J$E.gray(this,J$a))}),J$g(0,J$c,"disabled",function(){return this._disabled},function(J$a){J$a!==this._disabled&&(this.gray=this._disabled=J$a,this.mouseEnabled=!J$a)}),J$a}(J$w)),J$I=function(J$a){function J$b(){this.lockLayer=null,this.popupEffect=function(J$a){J$a.scale(1,1),J$z.from(J$a,{x:J$p.stage.width/2,y:J$p.stage.height/2,scaleX:0,scaleY:0},300,J$i.backOut,J$m.create(this,this.doOpen,[J$a]))},this.closeEffect=function(J$a,J$b){J$z.to(J$a,{x:J$p.stage.width/2,y:J$p.stage.height/2,scaleX:0,scaleY:0},300,J$i.strongOut,J$m.create(this,this.doClose,[J$a,J$b]))},J$b.__super.call(this),this.maskLayer=new J$w,this.popupEffectHandler=J$m.create(this,this.popupEffect,null,!1),this.closeEffectHandler=J$m.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,J$p.stage.addChild(this),J$p.stage.on("resize",this,this._onResize),J$F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}J$f(J$b,"laya.ui.DialogManager",J$w);var J$c=J$b.prototype;return J$c._closeOnSide=function(){var J$a=this.getChildAt(this.numChildren-1);J$a instanceof laya.ui.Dialog&&J$a.close("side")},J$c.setLockView=function(J$a){this.lockLayer||(this.lockLayer=new J$J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(J$p.stage.width,J$p.stage.height)),this.lockLayer.removeChildren(),J$a&&(J$a.centerX=J$a.centerY=0,this.lockLayer.addChild(J$a))},J$c._onResize=function(J$a){var J$b=this.maskLayer.width=J$p.stage.width,J$c=this.maskLayer.height=J$p.stage.height;this.lockLayer&&this.lockLayer.size(J$b,J$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,J$b,J$c,J$F.popupBgColor),this.maskLayer.alpha=J$F.popupBgAlpha;for(var J$d=this.numChildren-1;-1<J$d;J$d--){var J$e=this.getChildAt(J$d);J$e.popupCenter&&this._centerDialog(J$e)}},J$c._centerDialog=function(J$a){J$a.x=Math.round((J$p.stage.width-J$a.width>>1)+J$a.pivotX),J$a.y=Math.round((J$p.stage.height-J$a.height>>1)+J$a.pivotY)},J$c.open=function(J$a,J$b,J$c){void 0===J$b&&(J$b=!1),void 0===J$c&&(J$c=!1),J$b&&this._closeAll(),J$a.popupCenter&&this._centerDialog(J$a),this.addChild(J$a),(J$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),J$c&&null!=J$a.popupEffect?J$a.popupEffect.runWith(J$a):this.doOpen(J$a),this.event("open")},J$c.doOpen=function(J$a){J$a.onOpened()},J$c.lock=function(J$a){this.lockLayer&&(J$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},J$c.close=function(J$a,J$b,J$c){void 0===J$c&&(J$c=!1),J$c&&null!=J$a.closeEffect?J$a.closeEffect.runWith([J$a,J$b]):this.doClose(J$a,J$b),this.event("close")},J$c.doClose=function(J$a,J$b){J$a.removeSelf(),J$a.isModal&&this._checkMask(),J$a.closeHandler&&J$a.closeHandler.runWith(J$b),J$a.onClosed(J$b)},J$c.closeAll=function(){this._closeAll(),this.event("close")},J$c._closeAll=function(){for(var J$a=this.numChildren-1;-1<J$a;J$a--){var J$b=this.getChildAt(J$a);J$b&&null!=J$b.close&&this.doClose(J$b)}},J$c.getDialogsByGroup=function(J$a){for(var J$b=[],J$c=this.numChildren-1;-1<J$c;J$c--){var J$d=this.getChildAt(J$c);J$d&&J$d.group===J$a&&J$b.push(J$d)}return J$b},J$c.closeByGroup=function(J$a){for(var J$b=[],J$c=this.numChildren-1;-1<J$c;J$c--){var J$d=this.getChildAt(J$c);J$d&&J$d.group===J$a&&(J$d.close(),J$b.push(J$d))}return J$b},J$c._checkMask=function(){this.maskLayer.removeSelf();for(var J$a=this.numChildren-1;-1<J$a;J$a--){var J$b=this.getChildAt(J$a);if(J$b&&J$b.isModal)return void this.addChildAt(this.maskLayer,J$a)}},J$b}(),J$J=function(J$a){function J$b(){J$b.__super.call(this)}J$f(J$b,"laya.ui.Box",J$a);var J$c=J$b.prototype;return J$p.imps(J$c,{"laya.ui.IBox":!0}),J$g(0,J$c,"dataSource",J$a.prototype._$get_dataSource,function(J$a){for(var J$b in this._dataSource=J$a){var J$c=this.getChildByName(J$b);J$c?J$c.dataSource=J$a[J$b]:this.hasOwnProperty(J$b)&&"function"!=typeof this[J$b]&&(this[J$b]=J$a[J$b])}}),J$b}(J$H),J$K=function(J$b){function J$c(J$a,J$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,J$c.__super.call(this),this._labelColors=J$D.buttonLabelColors,this._stateNum=J$D.buttonStateNum,void 0===J$b&&(J$b=""),this.skin=J$a,this.label=J$b}J$f(J$c,"laya.ui.Button",J$b);var J$a=J$c.prototype;return J$p.imps(J$a,{"laya.ui.ISelect":!0}),J$a.destroy=function(J$a){this.clearEvent(),J$u.clearCache(this,this._skin),J$u.clearObject(this,this._weakKey),void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(J$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},J$a.clearEvent=function(){this._skin&&J$e.atalsNotify&&J$e.atalsNotify.off(this._skin,this,this._setBtnSource)},J$a.createChildren=function(){this.graphics=this._bitmap=new J$G},J$a.createText=function(){this._text||(this._text=new J$x,this._text.overflow=J$x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},J$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},J$a.onMouse=function(J$a){if(!1!==this.toggle||!this._selected)return"click"===J$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=J$c.stateMap[J$a.type]))},J$a.changeClips=function(){var J$a=J$u.getRes(this._skin);if(J$a)if(this._skin&&""!=this._skin){J$u.clearObject(this,this._weakKey);var J$b=J$a.sourceWidth,J$c=J$a.sourceHeight/this._stateNum;J$a.$_GID||(J$a.$_GID=J$A.getGID());var J$d=J$a.$_GID+"-"+this._stateNum,J$e=J$u.findObject(J$d);if(J$A.isOkTextureList(J$e)||(J$e=null),J$e)this._weakKey=J$d,J$u.keepObject(this,this._weakKey),this._sources=J$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(J$a);else for(var J$f=0;J$f<this._stateNum;J$f++){var J$g=J$y.createFromTexture(J$a,0,J$c*J$f,J$b,J$c);if(J$a.alphaTexture){var J$h=J$a.width/J$a.alphaTexture.width;J$g.alphaTexture=J$y.createFromTexture(J$a.alphaTexture,0/J$h,J$c*J$f/J$h,J$b/J$h,J$c/J$h)}this._sources.push(J$g)}J$u.saveObject(J$d,this._sources),this._weakKey=J$d,J$u.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||J$b,this._bitmap.height=this._height||J$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=J$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},J$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var J$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[J$a]),this.label&&(this._text.color=this._labelColors[J$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[J$a]))},J$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},J$g(0,J$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(J$a){this.createText(),this._text.strokeColor=J$a}),J$g(0,J$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){if(this._skin!=J$a)if(this.clearEvent(),J$u.clearCache(this,this._skin),this._skin=J$a,J$u.keepCache(this,this._skin),J$u.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var J$b=J$e.resAtalsObj&&J$e.resAtalsObj[this._skin];J$b?(J$e.atalsNotify&&J$e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=J$b.sourceW),0==this.height&&(this.height=J$b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),J$a._setBtnSource=function(J$a,J$b){J$a===this._skin&&J$b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},J$g(0,J$a,"state",function(){return this._state},function(J$a){this._state!=J$a&&(this._state=J$a,this._setStateChanged())}),J$g(0,J$a,"text",function(){return this.createText(),this._text}),J$g(0,J$a,"stateNum",function(){return this._stateNum},function(J$a){"string"==typeof J$a&&(J$a=parseInt(J$a)),this._stateNum!=J$a&&(this._stateNum=J$a<1?1:3<J$a?3:J$a,this.callLater(this.changeClips))}),J$g(0,J$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(J$a){this._strokeColors=J$E.fillArray(J$D.buttonLabelColors,J$a,String),this._setStateChanged()}),J$g(0,J$a,"labelColors",function(){return this._labelColors.join(",")},function(J$a){this._labelColors=J$E.fillArray(J$D.buttonLabelColors,J$a,String),this._setStateChanged()}),J$g(0,J$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),J$g(0,J$a,"label",function(){return this._text?this._text.text:null},function(J$a){(this._text||J$a)&&(this.createText(),this._text.text!=J$a&&(J$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(J$a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),J$g(0,J$a,"selected",function(){return this._selected},function(J$a){this._selected!=J$a&&(this._selected=J$a,this.state=this._selected?2:0,this.event("change"))}),J$g(0,J$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(J$a){this.createText(),this._text.padding=J$E.fillArray(J$D.labelPadding,J$a,Number)}),J$g(0,J$a,"labelSize",function(){return this.createText(),this._text.fontSize},function(J$a){this.createText(),this._text.fontSize=J$a}),J$g(0,J$a,"labelStroke",function(){return this.createText(),this._text.stroke},function(J$a){this.createText(),this._text.stroke=J$a}),J$g(0,J$a,"labelBold",function(){return this.createText(),this._text.bold},function(J$a){this.createText(),this._text.bold=J$a}),J$g(0,J$a,"labelFont",function(){return this.createText(),this._text.font},function(J$a){this.createText(),this._text.font=J$a}),J$g(0,J$a,"labelAlign",function(){return this.createText(),this._text.align},function(J$a){this.createText(),this._text.align=J$a}),J$g(0,J$a,"clickHandler",function(){return this._clickHandler},function(J$a){this._clickHandler=J$a}),J$g(0,J$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J$a){this._bitmap.sizeGrid=J$E.fillArray(J$D.defaultSizeGrid,J$a,Number)}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$H,this,"width",J$a),this._autoSize&&(this._bitmap.width=J$a,this._text&&(this._text.width=J$a))}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$H,this,"height",J$a),this._autoSize&&(this._bitmap.height=J$a,this._text&&(this._text.height=J$a))}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)||"string"==typeof J$a?this.label=J$a+"":J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(J$a){this._bitmap._offset=J$a?J$E.fillArray([1,1],J$a,Number):[]}),J$d(J$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),J$c}(J$H),J$L=function(J$b){function J$d(J$a,J$b,J$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,J$d.__super.call(this),void 0===J$b&&(J$b=1),void 0===J$c&&(J$c=1),this._clipX=J$b,this._clipY=J$c,this.skin=J$a}J$f(J$d,"laya.ui.Clip",J$b);var J$a=J$d.prototype;return J$a.destroy=function(J$a){this.clearEvent(),this.clearLoad(),J$u.clearCache(this,this._skin),J$u.clearObject(this,this._weakKey),void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},J$a.dispose=function(){this.destroy(!0),J$p.loader.clearRes(this._skin)},J$a.createChildren=function(){this.graphics=this._bitmap=new J$G},J$a._onDisplay=function(J$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},J$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var J$a=J$u.getRes(this._skin);if(J$a)this.loadComplete(this._skin,J$a);else{if(J$e.resAtalsObj&&J$e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=J$m.create(this,this.loadComplete,[this._skin]),this._progress=null,J$p.loader.load(this._skin,this._complete,this._progress)}}},J$a.loadComplete=function(J$a,J$b){if(J$a===this._skin&&J$b){J$u.clearObject(this,this._weakKey);var J$c=this._clipWidth||Math.ceil(J$b.sourceWidth/this._clipX),J$d=this._clipHeight||Math.ceil(J$b.sourceHeight/this._clipY),J$e=this._skin+J$c+J$d,J$f=J$u.findObject(J$e);if(J$A.isOkTextureList(J$f)||(J$f=null),J$f)this._weakKey=J$e,J$u.keepObject(this,this._weakKey),this._sources=J$f;else{this._sources=[];for(var J$g=0;J$g<this._clipY;J$g++)for(var J$h=0;J$h<this._clipX;J$h++){var J$i=J$y.createFromTexture(J$b,J$c*J$h,J$d*J$g,J$c,J$d);if(J$b.alphaTexture){var J$j=J$b.width/J$b.alphaTexture.width;J$i.alphaTexture=J$y.createFromTexture(J$b.alphaTexture,J$c*J$h/J$j,J$d*J$g/J$j,J$c/J$j,J$d/J$j)}this._sources.push(J$i)}J$u.saveObject(J$e,this._sources),this._weakKey=J$e,J$u.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},J$a.play=function(J$a,J$b){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=-1),this._isPlaying=!0,this.index=J$a,this._toIndex=J$b,this._index++,J$p.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},J$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},J$a.stop=function(){this._isPlaying=!1,J$p.timer.clear(this,this._loop),this.event("complete")},J$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},J$g(0,J$a,"interval",function(){return this._interval},function(J$a){this._interval!=J$a&&(this._interval=J$a,this._isPlaying&&this.play())}),J$a.clearEvent=function(){this._skin&&J$e.atalsNotify&&J$e.atalsNotify.off(this._skin,this,this._setBtnSource)},J$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&J$p.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},J$g(0,J$a,"skin",function(){return this._skin},function(J$a){if(this._skin!=J$a)if(this.clearLoad(),this.clearEvent(),J$u.clearCache(this,this._skin),this._skin=J$a){J$u.keepCache(this,this._skin);var J$b=J$u.getRes(J$a),J$c=J$e.resAtalsObj&&J$e.resAtalsObj[this._skin];!J$b&&J$c?J$e.atalsNotify&&J$e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),J$a._setBtnSource=function(J$a,J$b){J$a===this._skin&&J$b&&(this.loadComplete(J$a,J$b),this.clearEvent())},J$g(0,J$a,"sources",function(){return this._sources},function(J$a){this._sources=J$a,this.index=this._index,this.event("loaded")}),J$g(0,J$a,"clipX",function(){return this._clipX},function(J$a){this._clipX=J$a||1,this._setClipChanged()}),J$g(0,J$a,"clipY",function(){return this._clipY},function(J$a){this._clipY=J$a||1,this._setClipChanged()}),J$g(0,J$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),J$g(0,J$a,"clipWidth",function(){return this._clipWidth},function(J$a){this._clipWidth=J$a,this._setClipChanged()}),J$g(0,J$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J$a){this._bitmap.sizeGrid=J$E.fillArray(J$D.defaultSizeGrid,J$a,Number)}),J$g(0,J$a,"group",function(){return this._group},function(J$a){J$a&&this._skin&&J$u.setGroup(this._skin,J$a),this._group=J$a}),J$g(0,J$a,"clipHeight",function(){return this._clipHeight},function(J$a){this._clipHeight=J$a,this._setClipChanged()}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$H,this,"width",J$a),this._bitmap.width=J$a}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$H,this,"height",J$a),this._bitmap.height=J$a}),J$g(0,J$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),J$g(0,J$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),J$g(0,J$a,"index",function(){return this._index},function(J$a){this._index=J$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[J$a]),this.event("change")}),J$g(0,J$a,"autoPlay",function(){return this._autoPlay},function(J$a){this._autoPlay!=J$a&&((this._autoPlay=J$a)?this.play():this.stop())}),J$g(0,J$a,"isPlaying",function(){return this._isPlaying},function(J$a){this._isPlaying=J$a}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)&&Math.floor(J$a)==J$a||"string"==typeof J$a?this.index=parseInt(J$a):J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"bitmap",function(){return this._bitmap}),J$d}(J$H),J$M=function(J$b){function J$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,J$a.__super.call(this)}J$f(J$a,"laya.ui.ColorPicker",J$b);var J$c=J$a.prototype;return J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._colorPanel&&this._colorPanel.destroy(J$a),this._colorButton&&this._colorButton.destroy(J$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},J$c.createChildren=function(){this.addChild(this._colorButton=new J$K),this._colorPanel=new J$J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new J$w),this._colorPanel.addChild(this._colorBlock=new J$w),this._colorPanel.addChild(this._colorInput=new J$n)},J$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},J$c.onPanelMouseDown=function(J$a){J$a.stopPropagation()},J$c.changePanel=function(){this._panelChanged=!1;var J$a=this._colorPanel.graphics;J$a.clear(),J$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(J$a=this._colorTiles.graphics).clear();for(var J$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],J$c=0;J$c<12;J$c++)for(var J$d=0;J$d<20;J$d++){var J$e=0;J$e=0===J$d?J$b[J$c]:1===J$d?0:51*(((3*J$c+J$d/6)%3<<0)+3*(J$c/6<<0))<<16|J$d%6*51<<8|(J$c<<0)%6*51;var J$f=J$E.toColor(J$e);this._colors.push(J$f);var J$g=J$d*this._gridSize,J$h=J$c*this._gridSize;J$a.drawRect(J$g,J$h,this._gridSize,this._gridSize,J$f,"#000000")}},J$c.onColorButtonClick=function(J$a){this._colorPanel.parent?this.close():this.open()},J$c.open=function(){var J$a=this.localToGlobal(new J$o),J$b=J$a.x+this._colorPanel.width<=J$p.stage.width?J$a.x:J$p.stage.width-this._colorPanel.width,J$c=J$a.y+this._colorButton.height;J$c=J$c+this._colorPanel.height<=J$p.stage.height?J$c:J$a.y-this._colorPanel.height,this._colorPanel.pos(J$b,J$c),this._colorPanel.zOrder=1001,J$p._currentStage.addChild(this._colorPanel),J$p.stage.on("mousedown",this,this.removeColorBox)},J$c.close=function(){J$p.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},J$c.removeColorBox=function(J$a){this.close()},J$c.onColorFieldKeyDown=function(J$a){13==J$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),J$a.stopPropagation())},J$c.onColorInputChange=function(J$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},J$c.onColorTilesClick=function(J$a){this.selectedColor=this.getColorByMouse(),this.close()},J$c.onColorTilesMouseMove=function(J$a){this._colorInput.focus=!1;var J$b=this.getColorByMouse();this._colorInput.text=J$b,this.drawBlock(J$b)},J$c.getColorByMouse=function(){var J$a=this._colorTiles.getMousePoint(),J$b=Math.floor(J$a.x/this._gridSize),J$c=Math.floor(J$a.y/this._gridSize);return this._colors[20*J$c+J$b]},J$c.drawBlock=function(J$a){var J$b=this._colorBlock.graphics;J$b.clear();var J$c=J$a||"#ffffff";J$b.drawRect(0,0,50,20,J$c,this._borderColor),J$a||J$b.drawLine(0,0,50,20,"#ff0000")},J$c.changeColor=function(){var J$a=this.graphics;J$a.clear();var J$b=this._selectedColor||"#000000";J$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,J$b)},J$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},J$g(0,J$c,"inputBgColor",function(){return this._inputBgColor},function(J$a){this._inputBgColor=J$a,this._setPanelChanged()}),J$g(0,J$c,"selectedColor",function(){return this._selectedColor},function(J$a){this._selectedColor!=J$a&&(this._selectedColor=this._colorInput.text=J$a,this.drawBlock(J$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",J$j.EMPTY.setTo("change",this,this)))}),J$g(0,J$c,"skin",function(){return this._colorButton.skin},function(J$a){this._colorButton.skin=J$a,this.changeColor()}),J$g(0,J$c,"bgColor",function(){return this._bgColor},function(J$a){this._bgColor=J$a,this._setPanelChanged()}),J$g(0,J$c,"borderColor",function(){return this._borderColor},function(J$a){this._borderColor=J$a,this._setPanelChanged()}),J$g(0,J$c,"inputColor",function(){return this._inputColor},function(J$a){this._inputColor=J$a,this._setPanelChanged()}),J$a}(J$H),J$N=function(J$b){function J$c(J$a,J$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,J$c.__super.call(this),this._itemColors=J$D.comboBoxItemColors,this.skin=J$a,this.labels=J$b}J$f(J$c,"laya.ui.ComboBox",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._button&&this._button.destroy(J$a),this._list&&this._list.destroy(J$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},J$a.createChildren=function(){this.addChild(this._button=new J$K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},J$a._createList=function(){this._list=new J$X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},J$a._setListEvent=function(J$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=J$m.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},J$a.onListDown=function(J$a){J$a.stopPropagation()},J$a.onScrollBarDown=function(J$a){J$a.stopPropagation()},J$a.onButtonMouseDown=function(J$a){this.callLater(this.switchTo,[!this._isOpen])},J$a.changeList=function(){this._listChanged=!1;var J$a=this.width-2,J$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:J$a,height:this._itemHeight,fontSize:this._itemSize,color:J$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},J$a.onlistItemMouse=function(J$a,J$b){var J$c=J$a.type;if("mouseover"===J$c||"mouseout"===J$c){if(this._isCustomList)return;var J$d=this._list.getCell(J$b);if(!J$d)return;var J$e=J$d.getChildByName("label");J$e&&("mouseover"===J$c?(J$e.bgColor=this._itemColors[0],J$e.color=this._itemColors[1]):(J$e.bgColor=null,J$e.color=this._itemColors[2]))}else"click"===J$c&&(this.selectedIndex=J$b,this.isOpen=!1)},J$a.switchTo=function(J$a){this.isOpen=J$a},J$a.changeOpen=function(){this.isOpen=!this._isOpen},J$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var J$a=this._list.graphics;J$a.clear(),J$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var J$b=this._list.array||[],J$c=J$b.length=0,J$d=this._labels.length;J$c<J$d;J$c++)J$b.push({label:this._labels[J$c]});this._list.height=this._listHeight,this._list.array=J$b},J$a.changeSelected=function(){this._button.label=this.selectedLabel},J$a._onStageMouseWheel=function(J$a){this._list&&!this._list.contains(J$a.target)&&this.removeList(null)},J$a.removeList=function(J$a){J$p.stage.off("mousedown",this,this.removeList),J$p.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},J$g(0,J$a,"selectedIndex",function(){return this._selectedIndex},function(J$a){this._selectedIndex!=J$a&&(this._selectedIndex=J$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[J$j.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),J$g(0,J$a,"measureHeight",function(){return this._button.height}),J$g(0,J$a,"skin",function(){return this._button.skin},function(J$a){this._button.skin!=J$a&&(this._button.skin=J$a,this._listChanged=!0)}),J$g(0,J$a,"measureWidth",function(){return this._button.width}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$H,this,"width",J$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),J$g(0,J$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(J$a){this.selectedIndex=this._labels.indexOf(J$a)}),J$g(0,J$a,"labels",function(){return this._labels.join(",")},function(J$a){0<this._labels.length&&(this.selectedIndex=-1),J$a?this._labels=J$a.split(","):this._labels.length=0,this._itemChanged=!0}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$H,this,"height",J$a),this._button.height=this._height}),J$g(0,J$a,"selectHandler",function(){return this._selectHandler},function(J$a){this._selectHandler=J$a}),J$g(0,J$a,"visibleNum",function(){return this._visibleNum},function(J$a){this._visibleNum=J$a,this._listChanged=!0}),J$g(0,J$a,"labelBold",function(){return this._button.text.bold},function(J$a){this._button.text.bold=J$a}),J$g(0,J$a,"itemColors",function(){return String(this._itemColors)},function(J$a){this._itemColors=J$E.fillArray(this._itemColors,J$a,String),this._listChanged=!0}),J$g(0,J$a,"itemSize",function(){return this._itemSize},function(J$a){this._itemSize=J$a,this._listChanged=!0}),J$g(0,J$a,"scrollBar",function(){return this.list.scrollBar}),J$g(0,J$a,"isOpen",function(){return this._isOpen},function(J$a){if(this._isOpen!=J$a)if(this._isOpen=J$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var J$b=this.localToGlobal(J$o.TEMP.setTo(0,0)),J$c=J$b.y+this._button.height;J$c=J$c+this._listHeight<=J$p.stage.height?J$c:J$b.y-this._listHeight,this._list.pos(J$b.x,J$c),this._list.zOrder=1001,J$p._currentStage.addChild(this._list),J$p.stage.once("mousedown",this,this.removeList),J$p.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),J$g(0,J$a,"scrollBarSkin",function(){return this._scrollBarSkin},function(J$a){this._scrollBarSkin=J$a}),J$g(0,J$a,"sizeGrid",function(){return this._button.sizeGrid},function(J$a){this._button.sizeGrid=J$a}),J$g(0,J$a,"button",function(){return this._button}),J$g(0,J$a,"list",function(){return this._list||this._createList(),this._list},function(J$a){J$a&&(J$a.removeSelf(),this._isCustomList=!0,this._list=J$a,this._setListEvent(J$a),this._itemHeight=J$a.getCell(0).height+J$a.spaceY)}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)&&Math.floor(J$a)==J$a||"string"==typeof J$a?this.selectedIndex=parseInt(J$a):J$a instanceof Array?this.labels=J$a.join(","):J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"labelColors",function(){return this._button.labelColors},function(J$a){this._button.labelColors!=J$a&&(this._button.labelColors=J$a)}),J$g(0,J$a,"labelPadding",function(){return this._button.text.padding.join(",")},function(J$a){this._button.text.padding=J$E.fillArray(J$D.labelPadding,J$a,Number)}),J$g(0,J$a,"labelSize",function(){return this._button.text.fontSize},function(J$a){this._button.text.fontSize=J$a}),J$g(0,J$a,"labelFont",function(){return this._button.text.font},function(J$a){this._button.text.font=J$a}),J$g(0,J$a,"stateNum",function(){return this._button.stateNum},function(J$a){this._button.stateNum=J$a}),J$c}(J$H),J$O=function(J$b){function J$c(J$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,J$c.__super.call(this),this._showButtons=J$F.showButtons,this._touchScrollEnable=J$F.touchScrollEnable,this._mouseWheelEnable=J$F.mouseWheelEnable,this.skin=J$a,this.max=1}J$f(J$c,"laya.ui.ScrollBar",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),this.stopScroll(),this.target=null,J$b.prototype.destroy.call(this,J$a),this.upButton&&this.upButton.destroy(J$a),this.downButton&&this.downButton.destroy(J$a),this.slider&&this.slider.destroy(J$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},J$a.createChildren=function(){this.addChild(this.slider=new J$P),this.addChild(this.upButton=new J$K),this.addChild(this.downButton=new J$K)},J$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},J$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},J$a.onButtonMouseDown=function(J$a){var J$b=J$a.currentTarget===this.upButton;this.slide(J$b),J$p.timer.once(J$D.scrollBarDelayTime,this,this.startLoop,[J$b]),J$p.stage.once("mouseup",this,this.onStageMouseUp)},J$a.startLoop=function(J$a){J$p.timer.frameLoop(1,this,this.slide,[J$a])},J$a.slide=function(J$a){J$a?this.value-=this._scrollSize:this.value+=this._scrollSize},J$a.onStageMouseUp=function(J$a){J$p.timer.clear(this,this.startLoop),J$p.timer.clear(this,this.slide)},J$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},J$a.changeSize=function(){J$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},J$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},J$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},J$a.setScroll=function(J$a,J$b,J$c){this.runCallLater(this.changeSize),this.slider.setSlider(J$a,J$b,J$c),this.slider.bar.visible=0<J$b,!this._hide&&this.autoHide&&(this.visible=!1)},J$a.onTargetMouseWheel=function(J$a){this.value-=J$a.delta*this._scrollSize,this.target=this._target},J$a.onTargetMouseDown=function(J$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new J$o),this._lastPoint.setTo(J$p.stage.mouseX,J$p.stage.mouseY),J$p.timer.clear(this,this.tweenMove),J$z.clearTween(this),J$p.stage.once("mouseup",this,this.onStageMouseUp2),J$p.stage.once("mouseout",this,this.onStageMouseUp2),J$p.timer.frameLoop(1,this,this.loop)},J$a.loop=function(){var J$a=J$p.stage.mouseY,J$b=J$p.stage.mouseX;if(this._lastOffset=this.isVertical?J$a-this._lastPoint.y:J$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?J$p.stage._canvasTransform.getScaleY():J$p.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=J$b,this._lastPoint.y=J$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},J$a.onStageMouseUp2=function(J$a){if(J$p.stage.off("mouseup",this,this.onStageMouseUp2),J$p.stage.off("mouseout",this,this.onStageMouseUp2),J$p.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?J$z.to(this,{value:this.min},this.elasticBackTime,J$i.sineOut,J$m.create(this,this.elasticOver)):this._value>this.max&&J$z.to(this,{value:this.max},this.elasticBackTime,J$i.sineOut,J$m.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?J$p.stage.mouseY-this._lastPoint.y:J$p.stage.mouseX-this._lastPoint.x);for(var J$b=0,J$c=Math.min(this._offsets.length,3),J$d=0;J$d<J$c;J$d++)J$b+=this._offsets[this._offsets.length-1-J$d];if(this._lastOffset=J$b/J$c,(J$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<J$b&&(this._lastOffset=0<this._lastOffset?60:-60);var J$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));J$p.timer.frameLoop(1,this,this.tweenMove,[J$e])}},J$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&J$z.to(this,{alpha:0},500),this.event("end")},J$a.tweenMove=function(J$a){this._lastOffset*=this.rollRatio;var J$b=NaN;if(0<J$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,J$b=.5*-(this.min-J$a-this.value),this._lastOffset>J$b&&(this._lastOffset=J$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,J$b=.5*-(this.max+J$a-this.value),this._lastOffset<J$b&&(this._lastOffset=J$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(J$p.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?J$z.to(this,{value:this.min},this.elasticBackTime,J$i.sineOut,J$m.create(this,this.elasticOver)):this._value>this.max?J$z.to(this,{value:this.max},this.elasticBackTime,J$i.sineOut,J$m.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&J$z.to(this,{alpha:0},500)}},J$a.stopScroll=function(){this.onStageMouseUp2(null),J$p.timer.clear(this,this.tweenMove),J$z.clearTween(this)},J$g(0,J$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){this._skin!=J$a&&(this._skin=J$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),J$g(0,J$a,"max",function(){return this.slider.max},function(J$a){this.slider.max=J$a}),J$g(0,J$a,"showButtons",function(){return this._showButtons},function(J$a){this._showButtons=J$a,this.callLater(this.changeScrollBar)}),J$g(0,J$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),J$g(0,J$a,"min",function(){return this.slider.min},function(J$a){this.slider.min=J$a}),J$g(0,J$a,"value",function(){return this._value},function(J$a){J$a!==this._value&&(this._value=J$a,this._isElastic||(this.slider._value!=J$a&&(this.slider._value=J$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),J$g(0,J$a,"isVertical",function(){return this.slider.isVertical},function(J$a){this.slider.isVertical=J$a}),J$g(0,J$a,"sizeGrid",function(){return this.slider.sizeGrid},function(J$a){this.slider.sizeGrid=J$a}),J$g(0,J$a,"scrollSize",function(){return this._scrollSize},function(J$a){this._scrollSize=J$a}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)||"string"==typeof J$a?this.value=Number(J$a):J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"thumbPercent",function(){return this._thumbPercent},function(J$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),J$a=1<=J$a?.99:J$a,this._thumbPercent=J$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*J$a,J$D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*J$a,J$D.scrollBarMinNum))}),J$g(0,J$a,"target",function(){return this._target},function(J$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=J$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),J$g(0,J$a,"hide",function(){return this._hide},function(J$a){this._hide=J$a,this.visible=!J$a}),J$g(0,J$a,"touchScrollEnable",function(){return this._touchScrollEnable},function(J$a){this._touchScrollEnable=J$a,this.target=this._target}),J$g(0,J$a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(J$a){this._mouseWheelEnable=J$a,this.target=this._target}),J$g(0,J$a,"tick",function(){return this.slider.tick},function(J$a){this.slider.tick=J$a}),J$c}(J$H),J$P=function(J$b){function J$c(J$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,J$c.__super.call(this),this.skin=J$a}J$f(J$c,"laya.ui.Slider",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._bg&&this._bg.destroy(J$a),this._bar&&this._bar.destroy(J$a),this._progress&&this._progress.destroy(J$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},J$a.createChildren=function(){this.addChild(this._bg=new J$Q),this.addChild(this._bar=new J$K)},J$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},J$a.onBarMouseDown=function(J$a){this._globalSacle||(this._globalSacle=new J$o),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=J$p.stage.mouseX,this._ty=J$p.stage.mouseY,J$p.stage.on("mousemove",this,this.mouseMove),J$p.stage.once("mouseup",this,this.mouseUp),J$p.stage.once("mouseout",this,this.mouseUp),this.showValueText()},J$a.showValueText=function(){if(this.showLabel){var J$a=laya.ui.Slider.label;this.addChild(J$a),J$a.textField.changeText(this._value+""),this.isVertical?(J$a.x=this._bar.x+20,J$a.y=.5*(this._bar.height-J$a.height)+this._bar.y):(J$a.y=this._bar.y-20,J$a.x=.5*(this._bar.width-J$a.width)+this._bar.x)}},J$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},J$a.mouseUp=function(J$a){J$p.stage.off("mousemove",this,this.mouseMove),J$p.stage.off("mouseup",this,this.mouseUp),J$p.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},J$a.mouseMove=function(J$a){var J$b=this._value;this.isVertical?(this._bar.y+=(J$p.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(J$p.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=J$p.stage.mouseX,this._ty=J$p.stage.mouseY;var J$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*J$c)/J$c,this._value!=J$b&&this.sendChangeEvent(),this.showValueText()},J$a.sendChangeEvent=function(J$a){void 0===J$a&&(J$a="change"),this.event(J$a),this.changeHandler&&this.changeHandler.runWith(this._value)},J$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},J$a.changeSize=function(){J$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},J$a.setSlider=function(J$a,J$b,J$c){this._value=-1,this._min=J$a,this._max=J$a<J$b?J$b:J$a,this.value=J$c<J$a?J$a:J$b<J$c?J$b:J$c},J$a.changeValue=function(){var J$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*J$a)/J$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var J$b=this._max-this._min;0===J$b&&(J$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/J$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/J$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},J$a.onBgMouseDown=function(J$a){var J$b=this._bg.getMousePoint();this.isVertical?this.value=J$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=J$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},J$g(0,J$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){if(this._skin!=J$a){this._skin=J$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var J$b=this._skin.replace(".png","$progress.png");J$u.getRes(J$b)&&(this._progress||(this.addChild(this._progress=new J$Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=J$b),this.setBarPoint(),this.callLater(this.changeValue)}}),J$g(0,J$a,"allowClickBack",function(){return this._allowClickBack},function(J$a){this._allowClickBack!=J$a&&((this._allowClickBack=J$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),J$g(0,J$a,"max",function(){return this._max},function(J$a){this._max!=J$a&&(this._max=J$a,this.callLater(this.changeValue))}),J$g(0,J$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),J$g(0,J$a,"tick",function(){return this._tick},function(J$a){this._tick!=J$a&&(this._tick=J$a,this.callLater(this.changeValue))}),J$g(0,J$a,"sizeGrid",function(){return this._bg.sizeGrid},function(J$a){this._bg.sizeGrid=J$a,this._bar.sizeGrid=J$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),J$g(0,J$a,"min",function(){return this._min},function(J$a){this._min!=J$a&&(this._min=J$a,this.callLater(this.changeValue))}),J$g(0,J$a,"value",function(){return this._value},function(J$a){if(this._value!=J$a){var J$b=this._value;this._value=J$a,this.changeValue(),this._value!=J$b&&this.sendChangeEvent()}}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)||"string"==typeof J$a?this.value=Number(J$a):J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"bar",function(){return this._bar}),J$d(J$c,["label",function(){return this.label=new J$R}]),J$c}(J$H),J$Q=function(J$b){function J$c(J$a){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,J$c.__super.call(this),this.skin=J$a}J$f(J$c,"laya.ui.Image",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,J$u.clearCache(this,this._skin)},J$a.dispose=function(){this.destroy(!0),J$u.clearCache(this,this._skin),this.clearEvent()},J$a.createChildren=function(){this.graphics=this._bitmap=new J$G},J$a.setSource=function(J$a,J$b){this.destroyed||J$a===this._skin&&J$b&&(this.source=J$b,this.onCompResize(),this.clearEvent())},J$a.clearEvent=function(){this._skin&&J$e.atalsNotify&&J$e.atalsNotify.off(this._skin,this,this.setSource)},J$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&J$p.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},J$g(0,J$a,"source",function(){return this._bitmap.source},function(J$a){this._bitmap&&(this._bitmap.source=J$a,this.event("loaded"),this.repaint())}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"string"==typeof(this._dataSource=J$a)?this.skin=J$a:J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"measureHeight",function(){return this._bitmap.height}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){if(this._skin!=J$a)if(J$u.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=J$a){J$u.keepCache(this,this._skin);var J$b=J$u.getRes(J$a),J$c=J$e.resAtalsObj&&J$e.resAtalsObj[this._skin];J$b?(this.source=J$b,this.onCompResize()):J$c?(J$e.atalsNotify&&J$e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=J$c.sourceW),0==this.height&&(this.height=J$c.sourceH)):(this._complete=J$m.create(this,this.setSource,[this._skin]),this._progress=null,J$p.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),J$g(0,J$a,"group",function(){return this._group},function(J$a){J$a&&this._skin&&J$u.setGroup(this._skin,J$a),this._group=J$a}),J$g(0,J$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(J$a){this._bitmap.sizeGrid=J$E.fillArray(J$D.defaultSizeGrid,J$a,Number)}),J$g(0,J$a,"measureWidth",function(){return this._bitmap.width}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$H,this,"width",J$a),this._bitmap.width=0==J$a?1e-7:J$a}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$H,this,"height",J$a),this._bitmap.height=0==J$a?1e-7:J$a}),J$c}(J$H),J$R=function(J$b){function J$c(J$a){this._tf=null,J$c.__super.call(this),void 0===J$a&&(J$a=""),J$k.defaultColor=J$D.labelColor,this.text=J$a}J$f(J$c,"laya.ui.Label",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._tf=null},J$a.createChildren=function(){this.addChild(this._tf=new J$x)},J$a.changeText=function(J$a){this._tf.changeText(J$a)},J$g(0,J$a,"padding",function(){return this._tf.padding.join(",")},function(J$a){this._tf.padding=J$E.fillArray(J$D.labelPadding,J$a,Number)}),J$g(0,J$a,"bold",function(){return this._tf.bold},function(J$a){this._tf.bold=J$a}),J$g(0,J$a,"align",function(){return this._tf.align},function(J$a){this._tf.align=J$a}),J$g(0,J$a,"text",function(){return this._tf.text},function(J$a){this._tf.text!=J$a&&(J$a&&(J$a=J$E.adptString(J$a+"")),this._tf.text=J$a,this.event("change"),this._width&&this._height||this.onCompResize())}),J$g(0,J$a,"italic",function(){return this._tf.italic},function(J$a){this._tf.italic=J$a}),J$g(0,J$a,"wordWrap",function(){return this._tf.wordWrap},function(J$a){this._tf.wordWrap=J$a}),J$g(0,J$a,"font",function(){return this._tf.font},function(J$a){this._tf.font=J$a}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)||"string"==typeof J$a?this.text=J$a+"":J$p.superSet(J$H,this,"dataSource",J$a)}),J$g(0,J$a,"color",function(){return this._tf.color},function(J$a){this._tf.color=J$a}),J$g(0,J$a,"valign",function(){return this._tf.valign},function(J$a){this._tf.valign=J$a}),J$g(0,J$a,"leading",function(){return this._tf.leading},function(J$a){this._tf.leading=J$a}),J$g(0,J$a,"fontSize",function(){return this._tf.fontSize},function(J$a){this._tf.fontSize=J$a}),J$g(0,J$a,"bgColor",function(){return this._tf.bgColor},function(J$a){this._tf.bgColor=J$a}),J$g(0,J$a,"borderColor",function(){return this._tf.borderColor},function(J$a){this._tf.borderColor=J$a}),J$g(0,J$a,"stroke",function(){return this._tf.stroke},function(J$a){this._tf.stroke=J$a}),J$g(0,J$a,"strokeColor",function(){return this._tf.strokeColor},function(J$a){this._tf.strokeColor=J$a}),J$g(0,J$a,"textField",function(){return this._tf}),J$g(0,J$a,"measureWidth",function(){return this._tf.width}),J$g(0,J$a,"measureHeight",function(){return this._tf.height}),J$g(0,J$a,"width",function(){return this._width||this._tf.text?J$p.superGet(J$H,this,"width"):0},function(J$a){J$p.superSet(J$H,this,"width",J$a),this._tf.width=J$a}),J$g(0,J$a,"height",function(){return this._height||this._tf.text?J$p.superGet(J$H,this,"height"):0},function(J$a){J$p.superSet(J$H,this,"height",J$a),this._tf.height=J$a}),J$g(0,J$a,"overflow",function(){return this._tf.overflow},function(J$a){this._tf.overflow=J$a}),J$g(0,J$a,"underline",function(){return this._tf.underline},function(J$a){this._tf.underline=J$a}),J$g(0,J$a,"underlineColor",function(){return this._tf.underlineColor},function(J$a){this._tf.underlineColor=J$a}),J$c}(J$H),J$S=function(J$b){function J$c(J$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,J$c.__super.call(this),this.skin=J$a}J$f(J$c,"laya.ui.ProgressBar",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._bg&&this._bg.destroy(J$a),this._bar&&this._bar.destroy(J$a),this._bg=this._bar=null,this.changeHandler=null},J$a.createChildren=function(){this.addChild(this._bg=new J$Q),this.addChild(this._bar=new J$Q)},J$a.changeValue=function(){if(this.sizeGrid){var J$a=this.sizeGrid.split(","),J$b=Number(J$a[3]),J$c=Number(J$a[1]),J$d=(this.width-J$b-J$c)*this._value;this._bar.width=J$b+J$c+J$d,this._bar.visible=this._bar.width>J$b+J$c}else this._bar.width=this.width*this._value},J$g(0,J$a,"measureHeight",function(){return this._bg.height}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){this._skin!=J$a&&(this._skin=J$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),J$g(0,J$a,"measureWidth",function(){return this._bg.width}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$H,this,"height",J$a),this._bg.height=this._height,this._bar.height=this._height}),J$g(0,J$a,"bar",function(){return this._bar}),J$g(0,J$a,"value",function(){return this._value},function(J$a){this._value!=J$a&&(J$a=1<J$a?1:J$a<0?0:J$a,this._value=J$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(J$a))}),J$g(0,J$a,"bg",function(){return this._bg}),J$g(0,J$a,"sizeGrid",function(){return this._bg.sizeGrid},function(J$a){this._bg.sizeGrid=this._bar.sizeGrid=J$a}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$H,this,"width",J$a),this._bg.width=this._width,this.callLater(this.changeValue)}),J$g(0,J$a,"dataSource",J$b.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)||"string"==typeof J$a?this.value=Number(J$a):J$p.superSet(J$H,this,"dataSource",J$a)}),J$c}(J$H),J$T=(function(J$a){function J$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,J$c.__super.call(this),this._tipBox=new J$H,this._tipBox.addChild(this._tipText=new J$x),this._tipText.x=this._tipText.y=5,this._tipText.color=J$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,J$p.stage.on("showtip",this,this._onStageShowTip),J$p.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}J$f(J$c,"laya.ui.TipManager",J$H);var J$b=J$c.prototype;J$b._onStageHideTip=function(J$a){J$p.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},J$b._onStageShowTip=function(J$a){J$p.timer.once(J$c.tipDelay,this,this._showTip,[J$a],!0)},J$b._showTip=function(J$a){if("string"==typeof J$a){var J$b=String(J$a);Boolean(J$b)&&this._defaultTipHandler(J$b)}else J$a instanceof laya.utils.Handler?J$a.run():"function"==typeof J$a&&J$a.apply();J$p.stage.on("mousemove",this,this._onStageMouseMove),J$p.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},J$b._onStageMouseDown=function(J$a){this.closeAll()},J$b._onStageMouseMove=function(J$a){this._showToStage(this,J$c.offsetX,J$c.offsetY)},J$b._showToStage=function(J$a,J$b,J$c){void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0);var J$d=J$a.getBounds();J$a.x=J$p.stage.mouseX+J$b,J$a.y=J$p.stage.mouseY+J$c,J$a.x+J$d.width>J$p.stage.width&&(J$a.x-=J$d.width+J$b),J$a.y+J$d.height>J$p.stage.height&&(J$a.y-=J$d.height+J$c)},J$b.closeAll=function(){J$p.timer.clear(this,this._showTip),J$p.stage.off("mousemove",this,this._onStageMouseMove),J$p.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},J$b.showDislayTip=function(J$a){this.addChild(J$a),this._showToStage(this),J$p._currentStage.addChild(this)},J$b._showDefaultTip=function(J$a){this._tipText.text=J$a;var J$b=this._tipBox.graphics;J$b.clear(),J$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,J$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),J$p._currentStage.addChild(this)},J$g(0,J$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(J$a){this._defaultTipHandler=J$a}),J$c.offsetX=10,J$c.offsetY=15,J$c.tipTextColor="#ffffff",J$c.tipBackColor="#111111",J$c.tipDelay=200}(),function(J$a){var J$n;function J$o(){this._idMap=null,this._aniList=null,this._watchMap={},J$o.__super.call(this)}J$f(J$o,"laya.ui.View",J$J);var J$b=J$o.prototype;return J$b.createView=function(J$a){if(J$a.animations&&!this._idMap&&(this._idMap={}),J$o.createComp(J$a,this,this),J$a.animations){var J$b,J$c,J$d=[],J$e=J$a.animations,J$f=0,J$g=J$e.length;for(J$f=0;J$f<J$g;J$f++){switch(J$b=new J$l,J$c=J$e[J$f],J$b._setUp(this._idMap,J$c),(this[J$c.name]=J$b)._setControlNode(this),J$c.action){case 1:J$b.play(0,!1);break;case 2:J$b.play(0,!0)}J$d.push(J$b)}this._aniList=J$d}0<this._width&&null==J$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},J$b.onEvent=function(J$a,J$b){},J$b.loadUI=function(J$a){var J$b=J$o.uiMap[J$a];J$b&&this.createView(J$b)},J$b.destroy=function(J$a){void 0===J$a&&(J$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,J$a)},J$b.changeData=function(J$a){var J$b=this._watchMap[J$a];if(J$b){console.log("change",J$a);for(var J$c=0,J$d=J$b.length;J$c<J$d;J$c++){J$b[J$c].exe(this)}}},J$o._regs=function(){for(var J$a in J$o.uiClassMap)J$q.regClass(J$a,J$o.uiClassMap[J$a])},J$o.createComp=function(J$a,J$b,J$c,J$d){if(!(J$b=J$b||J$o.getCompInstance(J$a)))return console.warn("can not create:"+J$a.type),null;var J$e=J$a.child;if(J$e)for(var J$f=J$b instanceof laya.ui.List,J$g=0,J$h=J$e.length;J$g<J$h;J$g++){var J$i=J$e[J$g];if(!J$b.hasOwnProperty("itemRender")||"render"!=J$i.props.name&&"render"!==J$i.props.renderType)if("Graphic"==J$i.type)J$q.addGraphicsToSprite(J$i,J$b);else if(J$q.isDrawType(J$i.type))J$q.addGraphicToSprite(J$i,J$b,!0);else{if(J$f){var J$j=[],J$k=J$o.createComp(J$i,null,J$c,J$j);J$j.length&&(J$k._$bindData=J$j)}else J$k=J$o.createComp(J$i,null,J$c,J$d);"Script"==J$i.type?"owner"in J$k?J$k.owner=J$b:"target"in J$k&&(J$k.target=J$b):"mask"==J$i.props.renderType||"mask"==J$i.props.name?J$b.mask=J$k:J$k instanceof laya.display.Sprite&&J$b.addChild(J$k)}else J$b.itemRender=J$i}var J$l=J$a.props;for(var J$m in J$l){var J$n=J$l[J$m];J$o.eventDic[J$m]?J$n&&J$c&&J$b.on(J$m,J$c,J$c.onEvent,[J$n]):J$o.setCompValue(J$b,J$m,J$n,J$c,J$d)}return J$p.__typeof(J$b,"laya.ui.IItem")&&J$b.initItems(),J$a.compId&&J$c&&J$c._idMap&&(J$c._idMap[J$a.compId]=J$b),J$b},J$o.setCompValue=function(J$a,J$b,J$c,J$d,J$e){if("string"==typeof J$c&&-1<J$c.indexOf("${")){if(J$o._sheet||(J$o._sheet=J$q.getClass("laya.data.Table")),!J$o._sheet)return void console.warn("Can not find class Sheet");if(J$e)J$e.push(J$a,J$b,J$c);else if(J$d){-1==J$c.indexOf("].")&&(J$c=J$c.replace(".","[0]."));var J$f,J$g,J$h=new J$n(J$a,J$b,J$c);J$h.exe(J$d);for(var J$i=J$c.replace(/\[.*?\]\./g,".");null!=(J$f=J$o._parseWatchData.exec(J$i));){for(var J$j=J$f[1];null!=(J$g=J$o._parseKeyWord.exec(J$j));){var J$k=J$g[0],J$l=J$d._watchMap[J$k]||(J$d._watchMap[J$k]=[]);J$l.push(J$h),J$o._sheet.I.notifer.on(J$k,J$d,J$d.changeData,[J$k])}(J$l=J$d._watchMap[J$j]||(J$d._watchMap[J$j]=[])).push(J$h),J$o._sheet.I.notifer.on(J$j,J$d,J$d.changeData,[J$j])}}}else if("var"===J$b&&J$d)J$d[J$c]=J$a;else if("onClick"==J$b){var J$m=J$p._runScript("(function(){"+J$c+"})");J$a.on("click",J$d,J$m)}else J$a[J$b]="true"===J$c||"false"!==J$c&&J$c},J$o.getCompInstance=function(J$a){var J$b,J$c=J$a.props?J$a.props.runtime:null;return J$b=J$c?J$o.viewClassMap[J$c]||J$o.uiClassMap[J$c]||J$p.__classmap[J$c]:J$o.uiClassMap[J$a.type],J$a.props&&J$a.props.hasOwnProperty("renderType")&&"instance"==J$a.props.renderType?J$b.instance:J$b?new J$b:null},J$o.regComponent=function(J$a,J$b){J$o.uiClassMap[J$a]=J$b,J$q.regClass(J$a,J$b)},J$o.regViewRuntime=function(J$a,J$b){J$o.viewClassMap[J$a]=J$b},J$o.uiMap={},J$o.viewClassMap={},J$o._sheet=null,J$d(J$o,["uiClassMap",function(){return this.uiClassMap={ViewStack:J$aa,LinkButton:J$K,TextArea:J$ja,ColorPicker:J$M,Box:J$J,Button:J$K,CheckBox:J$U,Clip:J$L,ComboBox:J$N,Component:J$H,HScrollBar:J$Y,HSlider:J$$,Image:J$Q,Label:J$R,List:J$X,Panel:J$Z,ProgressBar:J$S,Radio:J$s,RadioGroup:J$ha,ScrollBar:J$O,Slider:J$P,Tab:J$ia,TextInput:J$ca,View:J$o,VScrollBar:J$ba,VSlider:J$da,Tree:J$t,HBox:J$fa,VBox:J$ga,Sprite:J$w,Animation:J$c,Text:J$x,FontClip:J$W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),J$o.__init$=function(){J$o._regs(),J$n=function(){function J$a(J$a,J$b,J$c){this.comp=null,this.prop=null,this.value=null,this.comp=J$a,this.prop=J$b,this.value=J$c}return J$f(J$a,""),J$a.prototype.exe=function(J$a){var J$b=J$E.getBindFun(this.value);this.comp[this.prop]=J$b.call(this,J$a)},J$a}()},J$o}()),J$U=function(J$a){function J$c(J$a,J$b){void 0===J$b&&(J$b=""),J$c.__super.call(this,J$a,J$b)}J$f(J$c,"laya.ui.CheckBox",J$a);var J$b=J$c.prototype;return J$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},J$b.initialize=function(){J$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},J$g(0,J$b,"dataSource",J$a.prototype._$get_dataSource,function(J$a){"boolean"==typeof(this._dataSource=J$a)?this.selected=J$a:"string"==typeof J$a?this.selected="true"===J$a:J$p.superSet(J$K,this,"dataSource",J$a)}),J$c}(J$K),J$V=function(J$a){function J$b(){this._space=0,this._align="none",this._itemChanged=!1,J$b.__super.call(this)}J$f(J$b,"laya.ui.LayoutBox",J$J);var J$c=J$b.prototype;return J$c.addChild=function(J$a){return J$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,J$a)},J$c.onResize=function(J$a){this._setItemChanged()},J$c.addChildAt=function(J$a,J$b){return J$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,J$a,J$b)},J$c.removeChild=function(J$a){return J$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,J$a)},J$c.removeChildAt=function(J$a){return this.getChildAt(J$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,J$a)},J$c.refresh=function(){this._setItemChanged()},J$c.changeItems=function(){this._itemChanged=!1},J$c.sortItem=function(J$a){J$a&&J$a.sort(function(J$a,J$b){return J$a.y-J$b.y})},J$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},J$g(0,J$c,"space",function(){return this._space},function(J$a){this._space=J$a,this._setItemChanged()}),J$g(0,J$c,"align",function(){return this._align},function(J$a){this._align=J$a,this._setItemChanged()}),J$b}(),J$W=function(J$b){function J$c(J$a,J$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,J$c.__super.call(this),J$a&&(this.skin=J$a),J$b&&(this.sheet=J$b)}J$f(J$c,"laya.ui.FontClip",J$b);var J$a=J$c.prototype;return J$a.createChildren=function(){this._bitmap=new J$G,this.on("loaded",this,this._onClipLoaded)},J$a._onClipLoaded=function(){this.callLater(this.changeValue)},J$a.changeValue=function(){var J$a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),J$a=this._sources[0]))){var J$b="horizontal"===this._direction;J$b?(this._wordsW=this._valueArr.length*(J$a.sourceWidth+this.spaceX),this._wordsH=J$a.sourceHeight):(this._wordsW=J$a.sourceWidth,this._wordsH=(J$a.sourceHeight+this.spaceY)*this._valueArr.length);var J$c=0;if(this._width)switch(this._align){case"center":J$c=.5*(this._width-this._wordsW);break;case"right":J$c=this._width-this._wordsW;break;default:J$c=0}for(var J$d=0,J$e=this._valueArr.length;J$d<J$e;J$d++){var J$f=this._indexMap[this._valueArr.charAt(J$d)];this.sources[J$f]&&(J$a=this.sources[J$f],J$b?this.graphics.drawTexture(J$a,J$c+J$d*(J$a.sourceWidth+this.spaceX),0,J$a.sourceWidth,J$a.sourceHeight):this.graphics.drawTexture(J$a,0+J$c,J$d*(J$a.sourceHeight+this.spaceY),J$a.sourceWidth,J$a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),J$b.prototype.destroy.call(this,J$a)},J$g(0,J$a,"sheet",function(){return this._sheet},function(J$a){J$a+="";var J$b=(this._sheet=J$a).split(" ");this._clipX=String(J$b[0]).length,this.clipY=J$b.length,this._indexMap={};for(var J$c=0;J$c<this._clipY;J$c++)for(var J$d=J$b[J$c].split(""),J$e=0,J$f=J$d.length;J$e<J$f;J$e++)this._indexMap[J$d[J$e]]=J$c*this._clipX+J$e}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$L,this,"height",J$a),this.callLater(this.changeValue)}),J$g(0,J$a,"direction",function(){return this._direction},function(J$a){this._direction=J$a,this.callLater(this.changeValue)}),J$g(0,J$a,"value",function(){return this._valueArr?this._valueArr:""},function(J$a){J$a+="",this._valueArr=J$a,this.callLater(this.changeValue)}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$L,this,"width",J$a),this.callLater(this.changeValue)}),J$g(0,J$a,"spaceX",function(){return this._spaceX},function(J$a){this._spaceX=J$a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),J$g(0,J$a,"spaceY",function(){return this._spaceY},function(J$a){this._spaceY=J$a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),J$g(0,J$a,"align",function(){return this._align},function(J$a){this._align=J$a,this.callLater(this.changeValue)}),J$g(0,J$a,"measureWidth",function(){return this._wordsW}),J$g(0,J$a,"measureHeight",function(){return this._wordsH}),J$c}(J$L),J$X=function(J$a){function J$b(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new J$o,J$b.__super.call(this)}J$f(J$b,"laya.ui.List",J$a);var J$c=J$b.prototype;return J$p.imps(J$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),this._content&&this._content.destroy(J$a),this._scrollBar&&this._scrollBar.destroy(J$a),laya.ui.Component.prototype.destroy.call(this,J$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},J$c.createChildren=function(){this.addChild(this._content=new J$J)},J$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=J$p.superGet(J$J,this,"cacheAs")),J$p.superSet(J$J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},J$c.onScrollEnd=function(){J$p.superSet(J$J,this,"cacheAs",this._$P.cacheAs)},J$c._removePreScrollBar=function(){var J$a=this.removeChildByName("scrollBar");J$a&&J$a.destroy(!0)},J$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var J$a=this._getOneCell(),J$b=J$a.width+this._spaceX||1,J$c=J$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/J$b):Math.ceil(this._width/J$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/J$c):Math.round(this._height/J$c));var J$d=this._width?this._width:J$b*this.repeatX-this._spaceX,J$e=this._height?this._height:J$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?J$c:J$b,this._cellOffset=this._isVertical?J$c*Math.max(this._repeatY2,this._repeatY)-J$e-this._spaceY:J$b*Math.max(this._repeatX2,this._repeatX)-J$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=J$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=J$d),this.setContentSize(J$d,J$e);var J$f=this._isVertical?this.repeatX:this.repeatY,J$g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,J$f,J$g),this._createdLine=J$g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},J$c._getOneCell=function(){if(0===this._cells.length){var J$a=this.createItem();if(this._offset.setTo(J$a.x,J$a.y),this.cacheContent)return J$a;this._cells.push(J$a)}return this._cells[0]},J$c._createItems=function(J$a,J$b,J$c){var J$d=this._content,J$e=this._getOneCell(),J$f=J$e.width+this._spaceX,J$g=J$e.height+this._spaceY;if(this.cacheContent){var J$h=new J$J;J$h.cacheAsBitmap=!0,J$h.pos((this._isVertical?0:J$a)*J$f,(this._isVertical?J$a:0)*J$g),this._content.addChild(J$h),this._content.optimizeScrollRect=!0,J$d=J$h}else{for(var J$i=[],J$j=this._cells.length-1;-1<J$j;J$j--){var J$k=this._cells[J$j];J$k.removeSelf(),J$i.push(J$k)}this._cells.length=0}for(var J$l=J$a;J$l<J$c;J$l++)for(var J$m=0;J$m<J$b;J$m++)(J$e=J$i&&J$i.length?J$i.pop():this.createItem()).x=(this._isVertical?J$m:J$l)*J$f-J$d.x,J$e.y=(this._isVertical?J$l:J$m)*J$g-J$d.y,J$e.name="item"+(J$l*J$b+J$m),J$d.addChild(J$e),this.addCell(J$e)},J$c.createItem=function(){var J$a=[];if("function"==typeof this._itemRender)var J$b=new this._itemRender;else J$b=J$T.createComp(this._itemRender,null,null,J$a);if(0==J$a.length&&J$b._watchMap){var J$c=J$b._watchMap;for(var J$d in J$c)for(var J$e=J$c[J$d],J$f=0;J$f<J$e.length;J$f++){var J$g=J$e[J$f];J$a.push(J$g.comp,J$g.prop,J$g.value)}}return J$a.length&&(J$b._$bindData=J$a),J$b},J$c.addCell=function(J$a){J$a.on("click",this,this.onCellMouse),J$a.on("rightclick",this,this.onCellMouse),J$a.on("mouseover",this,this.onCellMouse),J$a.on("mouseout",this,this.onCellMouse),J$a.on("mousedown",this,this.onCellMouse),J$a.on("mouseup",this,this.onCellMouse),this._cells.push(J$a)},J$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var J$a=0,J$b=J$a=0;J$b<1e4;J$b++){var J$c=this.getChildByName("item"+J$b);if(!J$c)break;this.addCell(J$c),J$a++}this.repeatY=J$a}},J$c.setContentSize=function(J$a,J$b){this._content.width=J$a,this._content.height=J$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new J$r),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,J$a,J$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},J$c.onCellMouse=function(J$a){"mousedown"===J$a.type&&(this._isMoved=!1);var J$b=J$a.currentTarget,J$c=this._startIndex+this._cells.indexOf(J$b);J$c<0||("click"===J$a.type||"rightclick"===J$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=J$c:this.changeCellState(J$b,!0,0):"mouseover"!==J$a.type&&"mouseout"!==J$a.type||this._selectedIndex===J$c||this.changeCellState(J$b,"mouseover"===J$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([J$a,J$c]))},J$c.changeCellState=function(J$a,J$b,J$c){var J$d=J$a.getChildByName("selectBox");J$d&&(this.selectEnable=!0,J$d.visible=J$b,J$d.index=J$c)},J$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},J$c.onScrollBarChange=function(J$a){this.runCallLater(this.changeCells);var J$b=this._scrollBar.value,J$c=this._isVertical?this.repeatX:this.repeatY,J$d=this._isVertical?this.repeatY:this.repeatX,J$e=Math.floor(J$b/this._cellSize);if(this.cacheContent)J$g=J$d+1,this._createdLine-J$e<J$g&&(this._createItems(this._createdLine,J$c,this._createdLine+J$g),this.renderItems(this._createdLine*J$c,0),this._createdLine+=J$g);else{var J$f=J$e*J$c,J$g=0;if(J$f>this._startIndex){J$g=J$f-this._startIndex;var J$h=!0,J$i=this._startIndex+J$c*(J$d+1);this._isMoved=!0}else J$f<this._startIndex&&(J$g=this._startIndex-J$f,J$h=!1,J$i=this._startIndex-1,this._isMoved=!0);for(var J$j=0;J$j<J$g;J$j++){if(J$h){var J$k=this._cells.shift();this._cells[this._cells.length]=J$k;var J$l=J$i+J$j}else J$k=this._cells.pop(),this._cells.unshift(J$k),J$l=J$i-J$j;var J$m=Math.floor(J$l/J$c)*this._cellSize;this._isVertical?J$k.y=J$m:J$k.x=J$m,this.renderItem(J$k,J$l)}this._startIndex=J$f,this.changeSelectStatus()}var J$n=this._content.scrollRect;this._isVertical?(J$n.y=J$b-this._offset.y,J$n.x=-this._offset.x):(J$n.y=-this._offset.y,J$n.x=J$b-this._offset.x),this._content.scrollRect=J$n},J$c.posCell=function(J$a,J$b){if(this._scrollBar){var J$c=this._isVertical?this.repeatX:this.repeatY,J$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(J$b/J$c)*this._cellSize);this._isVertical?J$a.y=J$d:J$a.x=J$d}},J$c.changeSelectStatus=function(){for(var J$a=0,J$b=this._cells.length;J$a<J$b;J$a++)this.changeCellState(this._cells[J$a],this._selectedIndex===this._startIndex+J$a,1)},J$c.renderItems=function(J$a,J$b){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0);for(var J$c=J$a,J$d=J$b||this._cells.length;J$c<J$d;J$c++)this.renderItem(this._cells[J$c],this._startIndex+J$c);this.changeSelectStatus(),this._twDone=!0},J$c.renderItem=function(J$a,J$b){this._array&&0<=J$b&&J$b<this._array.length?(J$a.visible=!0,J$a._$bindData?(J$a._dataSource=this._array[J$b],this._bindData(J$a,this._array[J$b])):J$a.dataSource=this._array[J$b],this.cacheContent||this.posCell(J$a,J$b),this.hasListener("render")&&this.event("render",[J$a,J$b]),this.renderHandler&&this.renderHandler.runWith([J$a,J$b]),this.renderTwHandler&&this.renderTwHandler.runWith([J$a,J$b])):(J$a.visible=!1,J$a.dataSource=null)},J$c._bindData=function(J$a,J$b){for(var J$c=J$a._$bindData,J$d=0,J$e=J$c.length;J$d<J$e;J$d++){var J$f=J$c[J$d++],J$g=J$c[J$d++],J$h=J$c[J$d],J$i=J$E.getBindFun(J$h);J$f[J$g]=J$i.call(this,J$b)}},J$c.refresh=function(){this.array=this._array},J$c.getItem=function(J$a){return-1<J$a&&J$a<this._array.length?this._array[J$a]:null},J$c.changeItem=function(J$a,J$b){-1<J$a&&J$a<this._array.length&&(this._array[J$a]=J$b,J$a>=this._startIndex&&J$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(J$a),J$a))},J$c.setItem=function(J$a,J$b){this.changeItem(J$a,J$b)},J$c.addItem=function(J$a){this._array.push(J$a),this.array=this._array},J$c.addItemAt=function(J$a,J$b){this._array.splice(J$b,0,J$a),this.array=this._array},J$c.deleteItem=function(J$a){this._array.splice(J$a,1),this.array=this._array},J$c.getCell=function(J$a){return this.runCallLater(this.changeCells),-1<J$a&&this._cells?this._cells[(J$a-this._startIndex)%this._cells.length]:null},J$c.scrollTo=function(J$a){if(this._scrollBar){var J$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(J$a/J$b)*this._cellSize}else this.startIndex=J$a},J$c.tweenTo=function(J$a,J$b,J$c){if(void 0===J$b&&(J$b=200),this._scrollBar){var J$d=this._isVertical?this.repeatX:this.repeatY;J$z.to(this._scrollBar,{value:Math.floor(J$a/J$d)*this._cellSize},J$b,null,J$c,0,!0)}else this.startIndex=J$a,J$c&&J$c.run()},J$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},J$c.commitMeasure=function(){this.runCallLater(this.changeCells)},J$g(0,J$c,"cacheAs",J$a.prototype._$get_cacheAs,function(J$a){J$p.superSet(J$J,this,"cacheAs",J$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==J$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),J$g(0,J$c,"content",function(){return this._content}),J$g(0,J$c,"height",J$a.prototype._$get_height,function(J$a){J$a!=this._height&&(J$p.superSet(J$J,this,"height",J$a),this._setCellChanged())}),J$g(0,J$c,"itemRender",function(){return this._itemRender},function(J$a){if(this._itemRender!=J$a){this._itemRender=J$a;for(var J$b=this._cells.length-1;-1<J$b;J$b--)this._cells[J$b].destroy();this._cells.length=0,this._setCellChanged()}}),J$g(0,J$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(J$a){this._removePreScrollBar();var J$b=new J$ba;J$b.name="scrollBar",J$b.right=0,J$a&&" "!=J$a&&(J$b.skin=J$a),this.scrollBar=J$b,this.addChild(J$b),this._setCellChanged()}),J$g(0,J$c,"page",function(){return this._page},function(J$a){this._page=J$a,this._array&&(this._page=0<J$a?J$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),J$g(0,J$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(J$a){this._removePreScrollBar();var J$b=new J$Y;J$b.name="scrollBar",J$b.bottom=0,J$a&&" "!=J$a&&(J$b.skin=J$a),this.scrollBar=J$b,this.addChild(J$b),this._setCellChanged()}),J$g(0,J$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(J$a){this._repeatX=J$a,this._setCellChanged()}),J$g(0,J$c,"scrollBar",function(){return this._scrollBar},function(J$a){this._scrollBar!=J$a&&(this._scrollBar=J$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),J$g(0,J$c,"width",J$a.prototype._$get_width,function(J$a){J$a!=this._width&&(J$p.superSet(J$J,this,"width",J$a),this._setCellChanged())}),J$g(0,J$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(J$a){this._repeatY=J$a,this._setCellChanged()}),J$g(0,J$c,"spaceX",function(){return this._spaceX},function(J$a){this._spaceX=J$a,this._setCellChanged()}),J$g(0,J$c,"spaceY",function(){return this._spaceY},function(J$a){this._spaceY=J$a,this._setCellChanged()}),J$g(0,J$c,"selectedIndex",function(){return this._selectedIndex},function(J$a){this._selectedIndex!=J$a&&(this._selectedIndex=J$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(J$a),this.startIndex=this._startIndex)}),J$g(0,J$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(J$a){this.selectedIndex=this._array.indexOf(J$a)}),J$g(0,J$c,"length",function(){return this._array?this._array.length:0}),J$g(0,J$c,"selection",function(){return this.getCell(this._selectedIndex)},function(J$a){this.selectedIndex=this._startIndex+this._cells.indexOf(J$a)}),J$g(0,J$c,"startIndex",function(){return this._startIndex},function(J$a){this._startIndex=0<J$a?J$a:0,this.callLater(this.renderItems)}),J$g(0,J$c,"twSwitch",function(){return this._twSwitch},function(J$a){this._twSwitch=J$a}),J$g(0,J$c,"twDone",function(){return this._twDone},function(J$a){this._twDone=J$a}),J$g(0,J$c,"array",function(){return this._array},function(J$a){this.runCallLater(this.changeCells),this._array=J$a||[];var J$b=this._array.length;if(this.totalPage=Math.ceil(J$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<J$b?this._selectedIndex:J$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var J$c=this._isVertical?this.repeatX:this.repeatY,J$d=this._isVertical?this.repeatY:this.repeatX,J$e=Math.ceil(J$b/J$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=J$d/J$e,this._scrollBar.setScroll(0,(J$e-J$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),J$g(0,J$c,"dataSource",J$a.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)&&Math.floor(J$a)==J$a||"string"==typeof J$a?this.selectedIndex=parseInt(J$a):J$a instanceof Array?this.array=J$a:J$p.superSet(J$J,this,"dataSource",J$a)}),J$g(0,J$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),J$b}(J$J),J$Y=function(J$a){function J$b(){J$b.__super.call(this)}return J$f(J$b,"laya.ui.HScrollBar",J$a),J$b.prototype.initialize=function(){J$a.prototype.initialize.call(this),this.slider.isVertical=!1},J$b}(J$O),J$Z=function(J$a){function J$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,J$b.__super.call(this),this.width=this.height=100}J$f(J$b,"laya.ui.Panel",J$a);var J$c=J$b.prototype;return J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),laya.ui.Component.prototype.destroy.call(this,J$a),this._content&&this._content.destroy(J$a),this._vScrollBar&&this._vScrollBar.destroy(J$a),this._hScrollBar&&this._hScrollBar.destroy(J$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},J$c.destroyChildren=function(){this._content.destroyChildren()},J$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new J$J)},J$c.addChild=function(J$a){return J$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(J$a)},J$c.onResize=function(){this._setScrollChanged()},J$c.addChildAt=function(J$a,J$b){return J$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(J$a,J$b)},J$c.removeChild=function(J$a){return J$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(J$a)},J$c.removeChildAt=function(J$a){return this.getChildAt(J$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(J$a)},J$c.removeChildren=function(J$a,J$b){return void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=2147483647),this._content.removeChildren(J$a,J$b),this._setScrollChanged(),this},J$c.getChildAt=function(J$a){return this._content.getChildAt(J$a)},J$c.getChildByName=function(J$a){return this._content.getChildByName(J$a)},J$c.getChildIndex=function(J$a){return this._content.getChildIndex(J$a)},J$c.changeScroll=function(){this._scrollChanged=!1;var J$a=this.contentWidth||1,J$b=this.contentHeight||1,J$c=this._vScrollBar,J$d=this._hScrollBar,J$e=J$c&&J$b>this._height,J$f=J$d&&J$a>this._width,J$g=J$e?this._width-J$c.width:this._width,J$h=J$f?this._height-J$d.height:this._height;J$c&&(J$c.x=this._width-J$c.width,J$c.y=0,J$c.height=this._height-(J$f?J$d.height:0),J$c.scrollSize=Math.max(.033*this._height,1),J$c.thumbPercent=J$h/J$b,J$c.setScroll(0,J$b-J$h,J$c.value)),J$d&&(J$d.x=0,J$d.y=this._height-J$d.height,J$d.width=this._width-(J$e?J$c.width:0),J$d.scrollSize=Math.max(.033*this._width,1),J$d.thumbPercent=J$g/J$a,J$d.setScroll(0,J$a-J$g,J$d.value))},J$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},J$c.setContentSize=function(J$a,J$b){var J$c=this._content;J$c.width=J$a,J$c.height=J$b,J$c.scrollRect||(J$c.scrollRect=new J$r),J$c.scrollRect.setTo(0,0,J$a,J$b),J$c.scrollRect=J$c.scrollRect},J$c.onScrollBarChange=function(J$a){var J$b=this._content.scrollRect;if(J$b){var J$c=Math.round(J$a.value);J$a.isVertical?J$b.y=J$c:J$b.x=J$c,this._content.scrollRect=J$b}},J$c.scrollTo=function(J$a,J$b){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),this.vScrollBar&&(this.vScrollBar.value=J$b),this.hScrollBar&&(this.hScrollBar.value=J$a)},J$c.refresh=function(){this.changeScroll()},J$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=J$p.superGet(J$J,this,"cacheAs")),J$p.superSet(J$J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},J$c.onScrollEnd=function(){J$p.superSet(J$J,this,"cacheAs",this._$P.cacheAs)},J$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},J$g(0,J$c,"numChildren",function(){return this._content.numChildren}),J$g(0,J$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(J$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new J$Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=J$a}),J$g(0,J$c,"contentWidth",function(){for(var J$a=0,J$b=this._content.numChildren-1;-1<J$b;J$b--){var J$c=this._content.getChildAt(J$b);J$a=Math.max(J$c.x+J$c.width*J$c.scaleX,J$a)}return J$a}),J$g(0,J$c,"contentHeight",function(){for(var J$a=0,J$b=this._content.numChildren-1;-1<J$b;J$b--){var J$c=this._content.getChildAt(J$b);J$a=Math.max(J$c.y+J$c.height*J$c.scaleY,J$a)}return J$a}),J$g(0,J$c,"width",J$a.prototype._$get_width,function(J$a){J$p.superSet(J$J,this,"width",J$a),this._setScrollChanged()}),J$g(0,J$c,"hScrollBar",function(){return this._hScrollBar}),J$g(0,J$c,"content",function(){return this._content}),J$g(0,J$c,"height",J$a.prototype._$get_height,function(J$a){J$p.superSet(J$J,this,"height",J$a),this._setScrollChanged()}),J$g(0,J$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(J$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new J$ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=J$a}),J$g(0,J$c,"vScrollBar",function(){return this._vScrollBar}),J$g(0,J$c,"cacheAs",J$a.prototype._$get_cacheAs,function(J$a){J$p.superSet(J$J,this,"cacheAs",J$a),this._$P.cacheAs=null,"none"!==J$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),J$b}(J$J),J$$=function(J$a){function J$b(J$a){J$b.__super.call(this,J$a),this.isVertical=!1}return J$f(J$b,"laya.ui.HSlider",J$P),J$b}(),J$_=function(J$a){function J$c(J$a,J$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,J$c.__super.call(this),this.skin=J$b,this.labels=J$a}J$f(J$c,"laya.ui.UIGroup",J$a);var J$b=J$c.prototype;return J$p.imps(J$b,{"laya.ui.IItem":!0}),J$b.preinitialize=function(){this.mouseEnabled=!0},J$b.destroy=function(J$a){void 0===J$a&&(J$a=!0),laya.ui.Component.prototype.destroy.call(this,J$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},J$b.addItem=function(J$a,J$b){void 0===J$b&&(J$b=!0);var J$c=J$a,J$d=this._items.length;if(J$c.name="item"+J$d,this.addChild(J$c),this.initItems(),J$b&&0<J$d){var J$e=this._items[J$d-1];"horizontal"==this._direction?J$c.x=J$e.x+J$e.width+this._space:J$c.y=J$e.y+J$e.height+this._space}else J$b&&(J$c.x=0,J$c.y=0);return J$d},J$b.delItem=function(J$a,J$b){void 0===J$b&&(J$b=!0);var J$c=this._items.indexOf(J$a);if(-1!=J$c){var J$d=J$a;this.removeChild(J$d);for(var J$e=J$c+1,J$f=this._items.length;J$e<J$f;J$e++){var J$g=this._items[J$e];J$g.name="item"+(J$e-1),J$b&&("horizontal"==this._direction?J$g.x-=J$d.width+this._space:J$g.y-=J$d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var J$h;J$h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=J$h}}},J$b.initItems=function(){this._items||(this._items=[]);for(var J$a=this._items.length=0;J$a<1e4;J$a++){var J$b=this.getChildByName("item"+J$a);if(null==J$b)break;this._items.push(J$b),J$b.selected=J$a===this._selectedIndex,J$b.clickHandler=J$m.create(this,this.itemClick,[J$a],!1)}},J$b.itemClick=function(J$a){this.selectedIndex=J$a},J$b.setSelect=function(J$a,J$b){this._items&&-1<J$a&&J$a<this._items.length&&(this._items[J$a].selected=J$b)},J$b.createItem=function(J$a,J$b){return null},J$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var J$a=0,J$b=0,J$c=this._items.length;J$b<J$c;J$b++){var J$d=this._items[J$b];this._skin&&(J$d.skin=this._skin),this._labelColors&&(J$d.labelColors=this._labelColors),this._labelSize&&(J$d.labelSize=this._labelSize),this._labelStroke&&(J$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(J$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(J$d.strokeColors=this._strokeColors),this._labelBold&&(J$d.labelBold=this._labelBold),this._labelPadding&&(J$d.labelPadding=this._labelPadding),this._labelAlign&&(J$d.labelAlign=this._labelAlign),this._stateNum&&(J$d.stateNum=this._stateNum),this._labelFont&&(J$d.labelFont=this._labelFont),"horizontal"===this._direction?(J$d.y=0,J$d.x=J$a,J$a+=J$d.width+this._space):(J$d.x=0,J$d.y=J$a,J$a+=J$d.height+this._space)}this.changeSize()},J$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},J$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},J$g(0,J$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(J$a){this._labelStrokeColor!=J$a&&(this._labelStrokeColor=J$a,this._setLabelChanged())}),J$g(0,J$b,"skin",function(){return this._skin},function(J$a){this._skin!=J$a&&(this._skin=J$a,this._setLabelChanged())}),J$g(0,J$b,"selectedIndex",function(){return this._selectedIndex},function(J$a){this._selectedIndex!=J$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=J$a,this.setSelect(J$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),J$g(0,J$b,"labels",function(){return this._labels},function(J$a){if(this._labels!=J$a){if(this._labels=J$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var J$b=this._labels.split(","),J$c=0,J$d=J$b.length;J$c<J$d;J$c++){var J$e=this.createItem(this._skin,J$b[J$c]);J$e.name="item"+J$c,this.addChild(J$e)}this.initItems()}}),J$g(0,J$b,"strokeColors",function(){return this._strokeColors},function(J$a){this._strokeColors!=J$a&&(this._strokeColors=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelColors",function(){return this._labelColors},function(J$a){this._labelColors!=J$a&&(this._labelColors=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelStroke",function(){return this._labelStroke},function(J$a){this._labelStroke!=J$a&&(this._labelStroke=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelSize",function(){return this._labelSize},function(J$a){this._labelSize!=J$a&&(this._labelSize=J$a,this._setLabelChanged())}),J$g(0,J$b,"stateNum",function(){return this._stateNum},function(J$a){this._stateNum!=J$a&&(this._stateNum=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelBold",function(){return this._labelBold},function(J$a){this._labelBold!=J$a&&(this._labelBold=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelFont",function(){return this._labelFont},function(J$a){this._labelFont!=J$a&&(this._labelFont=J$a,this._setLabelChanged())}),J$g(0,J$b,"labelPadding",function(){return this._labelPadding},function(J$a){this._labelPadding!=J$a&&(this._labelPadding=J$a,this._setLabelChanged())}),J$g(0,J$b,"direction",function(){return this._direction},function(J$a){this._direction=J$a,this._setLabelChanged()}),J$g(0,J$b,"space",function(){return this._space},function(J$a){this._space=J$a,this._setLabelChanged()}),J$g(0,J$b,"items",function(){return this._items}),J$g(0,J$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(J$a){this.selectedIndex=this._items.indexOf(J$a)}),J$g(0,J$b,"dataSource",J$a.prototype._$get_dataSource,function(J$a){"number"==typeof(this._dataSource=J$a)&&Math.floor(J$a)==J$a||"string"==typeof J$a?this.selectedIndex=parseInt(J$a):J$a instanceof Array?this.labels=J$a.join(","):J$p.superSet(J$J,this,"dataSource",J$a)}),J$c}(J$J),J$s=function(J$b){function J$c(J$a,J$b){this._value=null,void 0===J$b&&(J$b=""),J$c.__super.call(this,J$a,J$b)}J$f(J$c,"laya.ui.Radio",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._value=null},J$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},J$a.initialize=function(){J$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},J$a.onClick=function(J$a){this.selected=!0},J$g(0,J$a,"value",function(){return null!=this._value?this._value:this.label},function(J$a){this._value=J$a}),J$c}(J$K),J$t=function(J$a){function J$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,J$b.__super.call(this),this.width=this.height=200}J$f(J$b,"laya.ui.Tree",J$a);var J$c=J$b.prototype;return J$p.imps(J$c,{"laya.ui.IRender":!0}),J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),laya.ui.Component.prototype.destroy.call(this,J$a),this._list&&this._list.destroy(J$a),this._list=null,this._source=null,this._renderHandler=null},J$c.createChildren=function(){this.addChild(this._list=new J$X),this._list.renderHandler=J$m.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},J$c.onListChange=function(J$a){this.event("change")},J$c.getArray=function(){var J$a,J$b=[];for(var J$c in this._source)J$a=this._source[J$c],this.getParentOpenStatus(J$a)&&(J$a.x=this._spaceLeft*this.getDepth(J$a),J$b.push(J$a));return J$b},J$c.getDepth=function(J$a,J$b){return void 0===J$b&&(J$b=0),null==J$a.nodeParent?J$b:this.getDepth(J$a.nodeParent,J$b+1)},J$c.getParentOpenStatus=function(J$a){var J$b=J$a.nodeParent;return null==J$b||!!J$b.isOpen&&(null==J$b.nodeParent||this.getParentOpenStatus(J$b))},J$c.renderItem=function(J$a,J$b){var J$c=J$a.dataSource;if(J$c){J$a.left=J$c.x;var J$d=J$a.getChildByName("arrow");J$d&&(J$c.hasChild?(J$d.visible=!0,J$d.index=J$c.isOpen?1:0,J$d.tag=J$b,J$d.off("click",this,this.onArrowClick),J$d.on("click",this,this.onArrowClick)):J$d.visible=!1);var J$e=J$a.getChildByName("folder");J$e&&(2==J$e.clipY?J$e.index=J$c.isDirectory?0:1:J$e.index=J$c.isDirectory?J$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([J$a,J$b])}},J$c.onArrowClick=function(J$a){var J$b=J$a.currentTarget.tag;this._list.array[J$b].isOpen=!this._list.array[J$b].isOpen,this.event("open"),this._list.array=this.getArray()},J$c.setItemState=function(J$a,J$b){this._list.array[J$a]&&(this._list.array[J$a].isOpen=J$b,this._list.array=this.getArray())},J$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},J$c.parseXml=function(J$a,J$b,J$c,J$d){var J$e,J$f=J$a.childNodes,J$g=J$f.length;if(!J$d){J$e={};var J$h,J$i=J$a.attributes;for(var J$j in J$i){var J$k=(J$h=J$i[J$j]).nodeName,J$l=J$h.nodeValue;J$e[J$k]="true"==J$l||"false"!=J$l&&J$l}J$e.nodeParent=J$c,0<J$g&&(J$e.isDirectory=!0),J$e.hasChild=0<J$g,J$b.push(J$e)}for(var J$m=0;J$m<J$g;J$m++){var J$n=J$f[J$m];this.parseXml(J$n,J$b,J$e,!1)}},J$c.parseOpenStatus=function(J$a,J$b){for(var J$c=0,J$d=J$b.length;J$c<J$d;J$c++){var J$e=J$b[J$c];if(J$e.isDirectory)for(var J$f=0,J$g=J$a.length;J$f<J$g;J$f++){var J$h=J$a[J$f];if(J$h.isDirectory&&this.isSameParent(J$h,J$e)&&J$e.label==J$h.label){J$e.isOpen=J$h.isOpen;break}}}},J$c.isSameParent=function(J$a,J$b){return null==J$a.nodeParent&&null==J$b.nodeParent||null!=J$a.nodeParent&&null!=J$b.nodeParent&&(J$a.nodeParent.label==J$b.nodeParent.label&&this.isSameParent(J$a.nodeParent,J$b.nodeParent))},J$c.filter=function(J$a){if(Boolean(J$a)){var J$b=[];this.getFilterSource(this._source,J$b,J$a),this._list.array=J$b}else this._list.array=this.getArray()},J$c.getFilterSource=function(J$a,J$b,J$c){var J$d;for(var J$e in J$c=J$c.toLocaleLowerCase(),J$a)!(J$d=J$a[J$e]).isDirectory&&-1<String(J$d.label).toLowerCase().indexOf(J$c)&&(J$d.x=0,J$b.push(J$d)),J$d.child&&0<J$d.child.length&&this.getFilterSource(J$d.child,J$b,J$c)},J$g(0,J$c,"spaceBottom",function(){return this._list.spaceY},function(J$a){this._list.spaceY=J$a}),J$g(0,J$c,"keepStatus",function(){return this._keepStatus},function(J$a){this._keepStatus=J$a}),J$g(0,J$c,"itemRender",function(){return this._list.itemRender},function(J$a){this._list.itemRender=J$a}),J$g(0,J$c,"array",function(){return this._list.array},function(J$a){this._keepStatus&&this._list.array&&J$a&&this.parseOpenStatus(this._list.array,J$a),this._source=J$a,this._list.array=this.getArray()}),J$g(0,J$c,"mouseHandler",function(){return this._list.mouseHandler},function(J$a){this._list.mouseHandler=J$a}),J$g(0,J$c,"dataSource",J$a.prototype._$get_dataSource,function(J$a){this._dataSource=J$a,J$p.superSet(J$J,this,"dataSource",J$a)}),J$g(0,J$c,"source",function(){return this._source}),J$g(0,J$c,"scrollBar",function(){return this._list.scrollBar}),J$g(0,J$c,"list",function(){return this._list}),J$g(0,J$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(J$a){this._list.vScrollBarSkin=J$a}),J$g(0,J$c,"renderHandler",function(){return this._renderHandler},function(J$a){this._renderHandler=J$a}),J$g(0,J$c,"selectedIndex",function(){return this._list.selectedIndex},function(J$a){this._list.selectedIndex=J$a}),J$g(0,J$c,"spaceLeft",function(){return this._spaceLeft},function(J$a){this._spaceLeft=J$a}),J$g(0,J$c,"selectedItem",function(){return this._list.selectedItem},function(J$a){this._list.selectedItem=J$a}),J$g(0,J$c,"width",J$a.prototype._$get_width,function(J$a){J$p.superSet(J$J,this,"width",J$a),this._list.width=J$a}),J$g(0,J$c,"height",J$a.prototype._$get_height,function(J$a){J$p.superSet(J$J,this,"height",J$a),this._list.height=J$a}),J$g(0,J$c,"xml",null,function(J$a){var J$b=[];this.parseXml(J$a.childNodes[0],J$b,null,!0),this.array=J$b}),J$g(0,J$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),J$b}(J$J),J$aa=function(J$a){function J$b(){this._items=null,this._selectedIndex=0,J$b.__super.call(this),this._setIndexHandler=J$m.create(this,this.setIndex,null,!1)}J$f(J$b,"laya.ui.ViewStack",J$a);var J$c=J$b.prototype;return J$p.imps(J$c,{"laya.ui.IItem":!0}),J$c.setItems=function(J$a){this.removeChildren();for(var J$b=0,J$c=0,J$d=J$a.length;J$c<J$d;J$c++){var J$e=J$a[J$c];J$e&&(J$e.name="item"+J$b,this.addChild(J$e),J$b++)}this.initItems()},J$c.addItem=function(J$a){J$a.name="item"+this._items.length,this.addChild(J$a),this.initItems()},J$c.initItems=function(){this._items=[];for(var J$a=0;J$a<1e4;J$a++){var J$b=this.getChildByName("item"+J$a);if(null==J$b)break;this._items.push(J$b),J$b.visible=J$a==this._selectedIndex}},J$c.setSelect=function(J$a,J$b){this._items&&-1<J$a&&J$a<this._items.length&&(this._items[J$a].visible=J$b)},J$c.setIndex=function(J$a){this.selectedIndex=J$a},J$g(0,J$c,"dataSource",J$a.prototype._$get_dataSource,function(J$a){if("number"==typeof(this._dataSource=J$a)&&Math.floor(J$a)==J$a||"string"==typeof J$a)this.selectedIndex=parseInt(J$a);else for(var J$b in this._dataSource)this.hasOwnProperty(J$b)&&(this[J$b]=this._dataSource[J$b])}),J$g(0,J$c,"selectedIndex",function(){return this._selectedIndex},function(J$a){this._selectedIndex!=J$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=J$a,this.setSelect(this._selectedIndex,!0))}),J$g(0,J$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(J$a){this.selectedIndex=this._items.indexOf(J$a)}),J$g(0,J$c,"items",function(){return this._items}),J$g(0,J$c,"setIndexHandler",function(){return this._setIndexHandler},function(J$a){this._setIndexHandler=J$a}),J$b}(J$J),J$ba=function(J$a){function J$b(){J$b.__super.call(this)}return J$f(J$b,"laya.ui.VScrollBar",J$O),J$b}(),J$ca=function(J$b){function J$c(J$a){this._bg=null,this._skin=null,J$c.__super.call(this),void 0===J$a&&(J$a=""),this.text=J$a,this.skin=this.skin}J$f(J$c,"laya.ui.TextInput",J$b);var J$a=J$c.prototype;return J$a.preinitialize=function(){this.mouseEnabled=!0},J$a.destroy=function(J$a){J$u.clearCache(this,this._skin),void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._bg&&this._bg.destroy(),this._bg=null},J$a.createChildren=function(){this.addChild(this._tf=new J$n),this._tf.padding=J$D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},J$a._onFocus=function(){this.event("focus",this)},J$a._onBlur=function(){this.event("blur",this)},J$a._onInput=function(){this.event("input",this)},J$a._onEnter=function(){this.event("enter",this)},J$a.initialize=function(){this.width=128,this.height=22},J$a.select=function(){this._tf.select()},J$a.setSelection=function(J$a,J$b){this._tf.setSelection(J$a,J$b)},J$g(0,J$a,"text",J$b.prototype._$get_text,function(J$a){this._tf.text!=J$a&&(J$a+="",this._tf.text=J$a,this.event("change"))}),J$g(0,J$a,"bg",function(){return this._bg},function(J$a){this.graphics=this._bg=J$a}),J$g(0,J$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(J$a){this._tf.inputElementYAdjuster=J$a}),J$g(0,J$a,"multiline",function(){return this._tf.multiline},function(J$a){this._tf.multiline=J$a}),J$g(0,J$a,"skin",function(){return this._skin},function(J$a){this._skin!=J$a&&(J$u.clearCache(this,this._skin),this._skin=J$a,this._bg||(this.graphics=this._bg=new J$G),J$u.keepCache(this,this._skin),this._bg.source=J$u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),J$g(0,J$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(J$a){this._bg||(this.graphics=this._bg=new J$G),this._bg.sizeGrid=J$E.fillArray(J$D.defaultSizeGrid,J$a,Number)}),J$g(0,J$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(J$a){this._tf.inputElementXAdjuster=J$a}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$R,this,"width",J$a),this._bg&&(this._bg.width=J$a)}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$R,this,"height",J$a),this._bg&&(this._bg.height=J$a)}),J$g(0,J$a,"editable",function(){return this._tf.editable},function(J$a){this._tf.editable=J$a}),J$g(0,J$a,"restrict",function(){return this._tf.restrict},function(J$a){this._tf.restrict=J$a}),J$g(0,J$a,"prompt",function(){return this._tf.prompt},function(J$a){this._tf.prompt=J$a}),J$g(0,J$a,"promptColor",function(){return this._tf.promptColor},function(J$a){this._tf.promptColor=J$a}),J$g(0,J$a,"maxChars",function(){return this._tf.maxChars},function(J$a){this._tf.maxChars=J$a}),J$g(0,J$a,"focus",function(){return this._tf.focus},function(J$a){this._tf.focus=J$a}),J$g(0,J$a,"type",function(){return this._tf.type},function(J$a){this._tf.type=J$a}),J$g(0,J$a,"asPassword",function(){return this._tf.asPassword},function(J$a){this._tf.asPassword=J$a}),J$c}(J$R),J$da=function(J$a){function J$b(){J$b.__super.call(this)}return J$f(J$b,"laya.ui.VSlider",J$P),J$b}(),J$ea=function(J$a){function J$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,J$d.__super.call(this)}J$f(J$d,"laya.ui.Dialog",J$a);var J$b=J$d.prototype;return J$b.initialize=function(){this.popupEffect=J$d.manager.popupEffectHandler,this.closeEffect=J$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},J$b._dealDragArea=function(){var J$a=this.getChildByName("drag");J$a&&(this.dragArea=J$a.x+","+J$a.y+","+J$a.width+","+J$a.height,J$a.removeSelf())},J$b._onClick=function(J$a){var J$b=J$a.target;if(J$b)switch(J$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(J$b.name)}},J$b.show=function(J$a,J$b){void 0===J$a&&(J$a=!1),void 0===J$b&&(J$b=!0),this._open(!1,J$a,J$b)},J$b.popup=function(J$a,J$b){void 0===J$a&&(J$a=!1),void 0===J$b&&(J$b=!0),this._open(!0,J$a,J$b)},J$b._open=function(J$a,J$b,J$c){J$d.manager.lock(!1),this.isModal=J$a,J$d.manager.open(this,J$b,J$c)},J$b.onOpened=function(){},J$b.close=function(J$a,J$b){void 0===J$b&&(J$b=!0),J$d.manager.close(this,J$a,J$b)},J$b.onClosed=function(J$a){},J$b._onMouseDown=function(J$a){var J$b=this.getMousePoint();this._dragArea.contains(J$b.x,J$b.y)?this.startDrag():this.stopDrag()},J$g(0,J$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(J$a){if(J$a){var J$b=J$E.fillArray([0,0,0,0],J$a,Number);this._dragArea=new J$r(J$b[0],J$b[1],J$b[2],J$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),J$g(0,J$b,"isPopup",function(){return null!=this.parent}),J$g(0,J$b,"zOrder",J$a.prototype._$get_zOrder,function(J$a){J$p.superSet(J$T,this,"zOrder",J$a),J$d.manager._checkMask()}),J$g(1,J$d,"manager",function(){return J$d._manager=J$d._manager||new J$I},function(J$a){J$d._manager=J$a}),J$d.setLockView=function(J$a){J$d.manager.setLockView(J$a)},J$d.lock=function(J$a){J$d.manager.lock(J$a)},J$d.closeAll=function(){J$d.manager.closeAll()},J$d.getDialogsByGroup=function(J$a){return J$d.manager.getDialogsByGroup(J$a)},J$d.closeByGroup=function(J$a){return J$d.manager.closeByGroup(J$a)},J$d.CLOSE="close",J$d.CANCEL="cancel",J$d.SURE="sure",J$d.NO="no",J$d.OK="ok",J$d.YES="yes",J$d._manager=null,J$d}(J$T),J$fa=function(J$a){function J$b(){J$b.__super.call(this)}J$f(J$b,"laya.ui.HBox",J$a);var J$c=J$b.prototype;return J$c.sortItem=function(J$a){J$a&&J$a.sort(function(J$a,J$b){return J$a.x-J$b.x})},J$c.changeItems=function(){this._itemChanged=!1;for(var J$a=[],J$b=0,J$c=0,J$d=this.numChildren;J$c<J$d;J$c++){var J$e=this.getChildAt(J$c);J$e&&J$e.layoutEnabled&&(J$a.push(J$e),J$b=this._height?this._height:Math.max(J$b,J$e.height*J$e.scaleY))}this.sortItem(J$a);var J$f=0;for(J$c=0,J$d=J$a.length;J$c<J$d;J$c++)(J$e=J$a[J$c]).x=J$f,J$f+=J$e.width*J$e.scaleX+this._space,"top"==this._align?J$e.y=0:"middle"==this._align?J$e.y=.5*(J$b-J$e.height*J$e.scaleY):"bottom"==this._align&&(J$e.y=J$b-J$e.height*J$e.scaleY);this.changeSize()},J$g(0,J$c,"height",J$a.prototype._$get_height,function(J$a){this._height!=J$a&&(J$p.superSet(J$V,this,"height",J$a),this.callLater(this.changeItems))}),J$b.NONE="none",J$b.TOP="top",J$b.MIDDLE="middle",J$b.BOTTOM="bottom",J$b}(J$V),J$ga=function(J$a){function J$b(){J$b.__super.call(this)}J$f(J$b,"laya.ui.VBox",J$a);var J$c=J$b.prototype;return J$c.changeItems=function(){this._itemChanged=!1;for(var J$a=[],J$b=0,J$c=0,J$d=this.numChildren;J$c<J$d;J$c++){var J$e=this.getChildAt(J$c);J$e&&J$e.layoutEnabled&&(J$a.push(J$e),J$b=this._width?this._width:Math.max(J$b,J$e.width*J$e.scaleX))}this.sortItem(J$a);var J$f=0;for(J$c=0,J$d=J$a.length;J$c<J$d;J$c++)(J$e=J$a[J$c]).y=J$f,J$f+=J$e.height*J$e.scaleY+this._space,"left"==this._align?J$e.x=0:"center"==this._align?J$e.x=.5*(J$b-J$e.width*J$e.scaleX):"right"==this._align&&(J$e.x=J$b-J$e.width*J$e.scaleX);this.changeSize()},J$g(0,J$c,"width",J$a.prototype._$get_width,function(J$a){this._width!=J$a&&(J$p.superSet(J$V,this,"width",J$a),this.callLater(this.changeItems))}),J$b.NONE="none",J$b.LEFT="left",J$b.CENTER="center",J$b.RIGHT="right",J$b}(J$V),J$ha=function(J$a){function J$b(){J$b.__super.call(this)}return J$f(J$b,"laya.ui.RadioGroup",J$_),J$b.prototype.createItem=function(J$a,J$b){return new J$s(J$a,J$b)},J$b}(),J$ia=function(J$a){function J$b(){J$b.__super.call(this)}return J$f(J$b,"laya.ui.Tab",J$_),J$b.prototype.createItem=function(J$a,J$b){return new J$K(J$a,J$b)},J$b}(),J$ja=function(J$b){function J$c(J$a){this._vScrollBar=null,this._hScrollBar=null,void 0===J$a&&(J$a=""),J$c.__super.call(this,J$a)}J$f(J$c,"laya.ui.TextArea",J$b);var J$a=J$c.prototype;return J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},J$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},J$a.onVBarChanged=function(J$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},J$a.onHBarChanged=function(J$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},J$a.changeScroll=function(){var J$a=this._vScrollBar&&0<this._tf.maxScrollY,J$b=this._hScrollBar&&0<this._tf.maxScrollX,J$c=J$a?this._width-this._vScrollBar.width:this._width,J$d=J$b?this._height-this._hScrollBar.height:this._height,J$e=this._tf.padding||J$D.labelPadding;this._tf.width=J$c,this._tf.height=J$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-J$e[2],this._vScrollBar.y=J$e[1],this._vScrollBar.height=this._height-(J$b?this._hScrollBar.height:0)-J$e[1]-J$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=J$d/Math.max(this._tf.textHeight,J$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=J$a),this._hScrollBar&&(this._hScrollBar.x=J$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-J$e[3],this._hScrollBar.width=this._width-(J$a?this._vScrollBar.width:0)-J$e[0]-J$e[2],this._hScrollBar.scrollSize=Math.max(.033*J$c,1),this._hScrollBar.thumbPercent=J$c/Math.max(this._tf.textWidth,J$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=J$b)},J$a.scrollTo=function(J$a){this.commitMeasure(),this._tf.scrollY=J$a},J$g(0,J$a,"scrollY",function(){return this._tf.scrollY}),J$g(0,J$a,"width",J$b.prototype._$get_width,function(J$a){J$p.superSet(J$ca,this,"width",J$a),this.callLater(this.changeScroll)}),J$g(0,J$a,"hScrollBar",function(){return this._hScrollBar}),J$g(0,J$a,"height",J$b.prototype._$get_height,function(J$a){J$p.superSet(J$ca,this,"height",J$a),this.callLater(this.changeScroll)}),J$g(0,J$a,"maxScrollX",function(){return this._tf.maxScrollX}),J$g(0,J$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(J$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new J$ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=J$a}),J$g(0,J$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(J$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new J$Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=J$a}),J$g(0,J$a,"vScrollBar",function(){return this._vScrollBar}),J$g(0,J$a,"maxScrollY",function(){return this._tf.maxScrollY}),J$g(0,J$a,"scrollX",function(){return this._tf.scrollX}),J$c}(J$ca);!function(J$a){function J$b(){this._uiView=null,this.isCloseOther=!1,J$b.__super.call(this)}J$f(J$b,"laya.ui.AsynDialog",J$ea);var J$c=J$b.prototype;J$c.createView=function(J$a){this._uiView=J$a},J$c._open=function(J$a,J$b,J$c){this.isModal=J$a,this.isCloseOther=J$b,J$ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},J$c.onCreated=function(){this.createUI(),this.onOpen()},J$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},J$c.onOpen=function(){J$ea.manager.open(this,this.isCloseOther),J$ea.manager.lock(!1)},J$c.close=function(J$a,J$b){void 0===J$b&&(J$b=!0),J$ea.manager.close(this),this.onClose()},J$c.onClose=function(){},J$c.destroy=function(J$a){void 0===J$a&&(J$a=!0),laya.ui.View.prototype.destroy.call(this,J$a),this._uiView=null,this.onDestroy()},J$c.onDestroy=function(){}}();J$p.__init([J$T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}}),function(J$m,J$a,J$x){J$x.un,J$x.uns;var J$l=J$x.static,J$n=J$x.class,J$o=J$x.getset,J$d=J$x.__newvec,J$w=laya.maths.Arith,J$g=laya.webgl.atlas.AtlasResourceManager,J$c=laya.webgl.shader.BaseShader,J$H=laya.utils.Browser,J$h=laya.webgl.utils.Buffer,J$y=laya.utils.Byte,J$e=laya.utils.ClassUtils,J$i=J$x.Config,J$f=(laya.events.Event,laya.events.EventDispatcher),J$D=laya.utils.Handler,J$r=laya.net.Loader,J$b=laya.net.LoaderManager,J$j=(laya.maths.MathUtil,laya.display.Node),J$p=laya.renders.Render,J$k=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),J$q=laya.resource.Resource,J$u=laya.utils.RunDriver,J$v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),J$z=laya.display.Sprite,J$A=laya.utils.Stat,J$B=laya.utils.StringKey,J$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),J$C=laya.utils.Utils,J$F=laya.webgl.WebGL,J$G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;J$x.interface("laya.d3.core.IClone"),J$x.interface("laya.d3.graphics.IVertex"),J$x.interface("laya.d3.core.render.IUpdate"),J$x.interface("laya.d3.core.scene.ITreeNode"),J$x.interface("laya.d3.core.render.IRenderable");(function(){function J$K(){}J$n(J$K,"laya.d3.animation.AnimationClipParser01"),J$K.READ_DATA=function(){J$K._DATA.offset=J$K._reader.getUint32(),J$K._DATA.size=J$K._reader.getUint32()},J$K.READ_BLOCK=function(){for(var J$a=J$K._BLOCK.count=J$K._reader.getUint16(),J$b=J$K._BLOCK.blockStarts=[],J$c=J$K._BLOCK.blockLengths=[],J$d=0;J$d<J$a;J$d++)J$b.push(J$K._reader.getUint32()),J$c.push(J$K._reader.getUint32())},J$K.READ_STRINGS=function(){var J$a=J$K._reader.getUint32(),J$b=J$K._reader.getUint16(),J$c=J$K._reader.pos;J$K._reader.pos=J$a+J$K._DATA.offset;for(var J$d=0;J$d<J$b;J$d++)J$K._strings[J$d]=J$K._reader.readUTFString();J$K._reader.pos=J$c},J$K.parse=function(J$a,J$b){J$K._animationClip=J$a;(J$K._reader=J$b).__getBuffer();J$K.READ_DATA(),J$K.READ_BLOCK(),J$K.READ_STRINGS();for(var J$c=0,J$d=J$K._BLOCK.count;J$c<J$d;J$c++){var J$e=J$b.getUint16(),J$f=J$K._strings[J$e],J$g=J$K["READ_"+J$f];if(null==J$g)throw new Error("model file err,no this function:"+J$e+" "+J$f);J$g.call()}},J$K.READ_ANIMATIONS=function(){var J$a,J$b=0,J$c=0,J$d=J$K._reader,J$e=J$d.__getBuffer(),J$f=[],J$g=J$d.getUint8();for(J$f.length=J$g,J$b=0;J$b<J$g;J$b++)J$f[J$b]=J$d.getUint16();var J$h=[],J$i=J$d.getUint16();for(J$h.length=J$i,J$b=0;J$b<J$i;J$b++)J$h[J$b]=J$d.getFloat32();var J$j=J$K._animationClip;J$j.name=J$K._strings[J$d.getUint16()];var J$k=J$j._duration=J$d.getFloat32();J$j.islooping=!!J$d.getByte(),J$j._frameRate=J$d.getInt16();var J$l=J$d.getInt16(),J$m=J$j._nodes=new Array;J$m.length=J$l,(J$j._publicClipDatas=[]).length=J$l;var J$n=J$j._nodesMap={},J$o=0,J$p=0;for(J$b=0;J$b<J$l;J$b++){J$a=J$m[J$b]=new J$S;var J$q=J$d.getUint16(),J$r=J$a.path=[];for(J$r.length=J$q,J$c=0;J$c<J$q;J$c++)J$r[J$c]=J$K._strings[J$d.getUint16()];var J$u=J$r.join("/"),J$v=J$n[J$u];J$v||(J$n[J$u]=J$v=[]),J$v.push(J$a);var J$w=J$d.getInt16();-1!==J$w&&(J$a.componentType=J$K._strings[J$w]);var J$x=J$Q._propertyIndexDic[J$K._strings[J$d.getUint16()]];if(null==J$x)throw new Error("AnimationClipParser01:unknown property name.");var J$y=J$x<4,J$z=!J$y||J$y&&""===J$r[0];(J$a._cacheProperty=J$z)?J$o++:J$p++,J$a.propertyNameID=J$x;var J$A=J$f[J$d.getUint8()];J$a.keyFrameWidth=J$A/4;var J$B=J$a.keyFrames=[],J$C=J$B.length=J$d.getUint16(),J$D=null,J$E=NaN;for(J$c=0;J$c<J$C;J$c++){var J$F=J$B[J$c]=new J$R;J$E=J$F.startTime=J$h[J$d.getUint16()];var J$G=J$d.pos;J$F.inTangent=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$G=J$d.pos,J$F.outTangent=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$G=J$d.pos,J$F.data=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$D&&(J$D.next=J$F,J$D.duration=J$E-J$D.startTime),J$D=J$F}J$F.next=null,J$F.duration=J$k-J$E}var J$H=J$j._nodeToCachePropertyMap=new Int32Array(J$l),J$I=J$j._cachePropertyMap=new Int32Array(J$o),J$J=J$j._unCachePropertyMap=new Int32Array(J$p);for(J$o=J$p=0,J$b=0;J$b<J$l;J$b++)(J$a=J$m[J$b])._cacheProperty?(J$H[J$b]=J$o,J$I[J$o++]=J$b):J$J[J$p++]=J$b},J$K._animationClip=null,J$K._reader=null,J$K._strings=[],J$l(J$K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function J$O(){}J$n(J$O,"laya.d3.animation.AnimationClipParser02"),J$O.READ_DATA=function(){J$O._DATA.offset=J$O._reader.getUint32(),J$O._DATA.size=J$O._reader.getUint32()},J$O.READ_BLOCK=function(){for(var J$a=J$O._BLOCK.count=J$O._reader.getUint16(),J$b=J$O._BLOCK.blockStarts=[],J$c=J$O._BLOCK.blockLengths=[],J$d=0;J$d<J$a;J$d++)J$b.push(J$O._reader.getUint32()),J$c.push(J$O._reader.getUint32())},J$O.READ_STRINGS=function(){var J$a=J$O._reader.getUint32(),J$b=J$O._reader.getUint16(),J$c=J$O._reader.pos;J$O._reader.pos=J$a+J$O._DATA.offset;for(var J$d=0;J$d<J$b;J$d++)J$O._strings[J$d]=J$O._reader.readUTFString();J$O._reader.pos=J$c},J$O.parse=function(J$a,J$b){J$O._animationClip=J$a;(J$O._reader=J$b).__getBuffer();J$O.READ_DATA(),J$O.READ_BLOCK(),J$O.READ_STRINGS();for(var J$c=0,J$d=J$O._BLOCK.count;J$c<J$d;J$c++){var J$e=J$b.getUint16(),J$f=J$O._strings[J$e],J$g=J$O["READ_"+J$f];if(null==J$g)throw new Error("model file err,no this function:"+J$e+" "+J$f);J$g.call()}},J$O.READ_ANIMATIONS=function(){var J$a,J$b=0,J$c=0,J$d=J$O._reader,J$e=J$d.__getBuffer(),J$f=[],J$g=J$d.getUint8();for(J$f.length=J$g,J$b=0;J$b<J$g;J$b++)J$f[J$b]=J$d.getUint16();var J$h=[],J$i=J$d.getUint16();for(J$h.length=J$i,J$b=0;J$b<J$i;J$b++)J$h[J$b]=J$d.getFloat32();var J$j=J$O._animationClip;J$j.name=J$O._strings[J$d.getUint16()];var J$k=J$j._duration=J$d.getFloat32();J$j.islooping=!!J$d.getByte(),J$j._frameRate=J$d.getInt16();var J$l=J$d.getInt16(),J$m=J$j._nodes=new Array;J$m.length=J$l,(J$j._publicClipDatas=[]).length=J$l;var J$n=J$j._nodesMap={},J$o=0,J$p=0;for(J$b=0;J$b<J$l;J$b++){J$a=J$m[J$b]=new J$S;var J$q=J$d.getUint16(),J$r=J$a.path=[];for(J$r.length=J$q,J$c=0;J$c<J$q;J$c++)J$r[J$c]=J$O._strings[J$d.getUint16()];var J$u=J$r.join("/"),J$v=J$n[J$u];J$v||(J$n[J$u]=J$v=[]),J$v.push(J$a);var J$w=J$d.getInt16();-1!==J$w&&(J$a.componentType=J$O._strings[J$w]);var J$x=J$Q._propertyIndexDic[J$O._strings[J$d.getUint16()]];if(null==J$x)throw new Error("AnimationClipParser02:unknown property name.");var J$y=J$x<4,J$z=!J$y||J$y&&""===J$r[0];(J$a._cacheProperty=J$z)?J$o++:J$p++,J$a.propertyNameID=J$x;var J$A=J$f[J$d.getUint8()];J$a.keyFrameWidth=J$A/4;var J$B=J$a.keyFrames=[],J$C=J$B.length=J$d.getUint16(),J$D=null,J$E=NaN;for(J$c=0;J$c<J$C;J$c++){var J$F=J$B[J$c]=new J$R;J$E=J$F.startTime=J$h[J$d.getUint16()];var J$G=J$d.pos;J$F.inTangent=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$G=J$d.pos,J$F.outTangent=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$G=J$d.pos,J$F.data=new Float32Array(J$e.slice(J$G,J$G+J$A)),J$d.pos+=J$A,J$D&&(J$D.next=J$F,J$D.duration=J$E-J$D.startTime),J$D=J$F}J$F.next=null,J$F.duration=J$k-J$E}var J$H=J$d.getUint16();for(J$b=0;J$b<J$H;J$b++){var J$I,J$J=new J$P;J$J.time=J$d.getFloat32(),J$J.eventName=J$O._strings[J$d.getUint16()];var J$K=J$d.getUint16();for(0<J$K&&(J$J.params=J$I=[]),J$c=0;J$c<J$K;J$c++){switch(J$d.getByte()){case 0:J$I.push(!!J$d.getByte());break;case 1:J$I.push(J$d.getInt32());break;case 2:J$I.push(J$d.getFloat32());break;case 3:J$I.push(J$O._strings[J$d.getUint16()]);break;default:throw new Error("unknown type.")}}J$j.addEvent(J$J)}var J$L=J$j._nodeToCachePropertyMap=new Int32Array(J$l),J$M=J$j._cachePropertyMap=new Int32Array(J$o),J$N=J$j._unCachePropertyMap=new Int32Array(J$p);for(J$o=J$p=0,J$b=0;J$b<J$l;J$b++)(J$a=J$m[J$b])._cacheProperty?(J$L[J$b]=J$o,J$M[J$o++]=J$b):J$N[J$p++]=J$b},J$O._animationClip=null,J$O._reader=null,J$O._strings=[],J$l(J$O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var J$P=function(){function J$a(){this.time=NaN,this.eventName=null,this.params=null}return J$n(J$a,"laya.d3.animation.AnimationEvent"),J$a}(),J$Q=function(){function J$d(){this._childs=[],this.transform=new J$ub(this)}J$n(J$d,"laya.d3.animation.AnimationNode");var J$a=J$d.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.addChild=function(J$a){J$a._parent=this,J$a.transform.setParent(this.transform),this._childs.push(J$a)},J$a.removeChild=function(J$a){var J$b=this._childs.indexOf(J$a);-1!==J$b&&this._childs.splice(J$b,1)},J$a.getChildByName=function(J$a){for(var J$b=0,J$c=this._childs.length;J$b<J$c;J$b++){var J$d=this._childs[J$b];if(J$d.name===J$a)return J$d}return null},J$a.getChildByIndex=function(J$a){return this._childs[J$a]},J$a.getChildCount=function(){return this._childs.length},J$a.cloneTo=function(J$a){var J$b=J$a;J$b.name=this.name;for(var J$c=0,J$d=this._childs.length;J$c<J$d;J$c++){var J$e=this._childs[J$c],J$f=J$e.clone();J$b.addChild(J$f);var J$g=J$e.transform,J$h=J$f.transform;J$h.setLocalPosition(J$g.getLocalPosition()),J$h.setLocalRotation(J$g.getLocalRotation()),J$h.setLocalScale(J$g.getLocalScale()),J$h._localRotationEuler=J$g._localRotationEuler,J$h._setWorldMatrixIgnoreUpdate(J$g.getWorldMatrix())}},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$d.__init__=function(){J$d.registerAnimationNodeProperty("localPosition",J$d._getLocalPosition,J$d._setLocalPosition),J$d.registerAnimationNodeProperty("localRotation",J$d._getLocalRotation,J$d._setLocalRotation),J$d.registerAnimationNodeProperty("localScale",J$d._getLocalScale,J$d._setLocalScale),J$d.registerAnimationNodeProperty("localRotationEuler",J$d._getLocalRotationEuler,J$d._setLocalRotationEuler),J$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",J$d._getParticleRenderSharedMaterialTintColor,J$d._setParticleRenderSharedMaterialTintColor),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",J$d._getMeshRenderSharedMaterialTilingOffset,J$d._setMeshRenderSharedMaterialTilingOffset),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",J$d._getMeshRenderSharedMaterialAlbedo,J$d._setMeshRenderSharedMaterialAlbedo),J$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",J$d._getSkinnedMeshRenderSharedMaterialTilingOffset,J$d._setSkinnedMeshRenderSharedMaterialTilingOffset),J$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",J$d._getSkinnedMeshRenderSharedMaterialAlbedo,J$d._setSkinnedMeshRenderSharedMaterialAlbedo),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",J$d._getMeshRenderSharedMaterialAlbedo,J$d._setMeshRenderSharedMaterialAlbedo),J$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",J$d._getSkinnedMeshRenderSharedMaterialAlbedo,J$d._setSkinnedMeshRenderSharedMaterialAlbedo),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",J$d._getMeshRenderSharedMaterialIntensity,J$d._setMeshRenderSharedMaterialIntensity),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",J$d._getMeshRenderSharedMaterialAlpha,J$d._setMeshRenderSharedMaterialAlpha),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",J$d._getMeshRenderSharedMaterialAlphaColor,J$d._setMeshRenderSharedMaterialAlphaColor),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",J$d._getMeshRenderSharedMaterialBaseColor,J$d._setMeshRenderSharedMaterialBaseColor),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",J$d._getMeshRenderSharedMaterialDissolve,J$d._setMeshRenderSharedMaterialDissolve),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",J$d._getMeshRenderSharedMaterialDissolveSpeed,J$d._setMeshRenderSharedMaterialDissolveSpeed),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",J$d._getMeshRenderSharedMaterialMMultiplier,J$d._setMeshRenderSharedMaterialMMultiplier),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",J$d._getMeshRenderSharedMaterialBaseScrollSpeedX,J$d._setMeshRenderSharedMaterialBaseScrollSpeedX),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",J$d._getMeshRenderSharedMaterialBaseScrollSpeedY,J$d._setMeshRenderSharedMaterialBaseScrollSpeedY),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",J$d._getMeshRenderSharedMaterialSecondScrollSpeedX,J$d._setMeshRenderSharedMaterialSecondScrollSpeedX),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",J$d._getMeshRenderSharedMaterialSecondScrollSpeedY,J$d._setMeshRenderSharedMaterialSecondScrollSpeedY),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",J$d._getMeshRenderSharedMaterialDetailTilingOffset,J$d._setMeshRenderSharedMaterialDetailTilingOffset),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",J$d._getMeshRenderSharedMaterialDissolveTilingOffset,J$d._setMeshRenderSharedMaterialDissolveTilingOffset),J$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",J$d._getMeshRenderSharedMaterialMaskTilingOffset,J$d._setMeshRenderSharedMaterialMaskTilingOffset)},J$d.registerAnimationNodeProperty=function(J$a,J$b,J$c){if(J$d._propertyIndexDic[J$a])throw new Error("AnimationNode: this propertyName has registered.");J$d._propertyIndexDic[J$a]=J$d._propertyIDCounter,J$d._propertyGetFuncs[J$d._propertyIDCounter]=J$b,J$d._propertySetFuncs[J$d._propertyIDCounter]=J$c,J$d._propertyIDCounter++},J$d._getLocalPosition=function(J$a,J$b){return J$a?J$a.transform.getLocalPosition():J$b._transform.localPosition.elements},J$d._setLocalPosition=function(J$a,J$b,J$c){if(J$a)J$a.transform.setLocalPosition(J$c);else{var J$d=J$b._transform,J$e=J$d.localPosition;J$e.elements=J$c,J$d.localPosition=J$e}},J$d._getLocalRotation=function(J$a,J$b){return J$a?J$a.transform.getLocalRotation():J$b._transform.localRotation.elements},J$d._setLocalRotation=function(J$a,J$b,J$c){if(J$a)J$a.transform.setLocalRotation(J$c);else{var J$d=J$b._transform,J$e=J$d.localRotation;J$e.elements=J$c,J$d.localRotation=J$e}},J$d._getLocalScale=function(J$a,J$b){return J$a?J$a.transform.getLocalScale():J$b._transform.localScale.elements},J$d._setLocalScale=function(J$a,J$b,J$c){if(J$a)J$a.transform.setLocalScale(J$c);else{var J$d=J$b._transform,J$e=J$d.localScale;J$e.elements=J$c,J$d.localScale=J$e}},J$d._getLocalRotationEuler=function(J$a,J$b){return J$a?J$a.transform.getLocalRotationEuler():J$b._transform.localRotationEuler.elements},J$d._setLocalRotationEuler=function(J$a,J$b,J$c){if(J$a)J$a.transform.setLocalRotationEuler(J$c);else{var J$d=J$b._transform,J$e=J$d.localRotationEuler;J$e.elements=J$c,J$d.localRotationEuler=J$e}},J$d._getMeshRenderSharedMaterialTilingOffset=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return J$b.meshRender.sharedMaterial.tilingOffset.elements},J$d._setMeshRenderSharedMaterialTilingOffset=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).tilingOffset).elements=J$c,J$d.tilingOffset=J$e)}else(J$e=(J$d=J$b.meshRender.material).tilingOffset).elements=J$c,J$d.tilingOffset=J$e},J$d._getMeshRenderSharedMaterialAlbedo=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return J$b.meshRender.sharedMaterial.albedoColor.elements},J$d._setMeshRenderSharedMaterialAlbedo=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).albedoColor).elements=J$c,J$d.albedoColor=J$e)}else(J$e=(J$d=J$b.meshRender.material).albedoColor).elements=J$c,J$d.albedoColor=J$e},J$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return J$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},J$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.skinnedMeshRender.material).tilingOffset).elements=J$c,J$d.tilingOffset=J$e)}else(J$e=(J$d=J$b.skinnedMeshRender.material).tilingOffset).elements=J$c,J$d.tilingOffset=J$e},J$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return J$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},J$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.skinnedMeshRender.material).albedoColor).elements=J$c,J$d.albedoColor=J$e)}else(J$e=(J$d=J$b.skinnedMeshRender.material).albedoColor).elements=J$c,J$d.albedoColor=J$e},J$d._getParticleRenderSharedMaterialTintColor=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return J$b.particleRender.sharedMaterial.tintColor.elements},J$d._setParticleRenderSharedMaterialTintColor=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.particleRender.material).tintColor).elements=J$c,J$d.tintColor=J$e)}else(J$e=(J$d=J$b.particleRender.material).tintColor).elements=J$c,J$d.tintColor=J$e},J$d._getMeshRenderSharedMaterialAlphaColor=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return J$b.meshRender.sharedMaterial.alphaColor.elements},J$d._setMeshRenderSharedMaterialAlphaColor=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).alphaColor).elements=J$c,J$d.alphaColor=J$e)}else(J$e=(J$d=J$b.meshRender.material).alphaColor).elements=J$c,J$d.alphaColor=J$e},J$d._getMeshRenderSharedMaterialBaseColor=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return J$b.meshRender.sharedMaterial.baseColor.elements},J$d._setMeshRenderSharedMaterialBaseColor=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).baseColor).elements=J$c,J$d.baseColor=J$e)}else(J$e=(J$d=J$b.meshRender.material).baseColor).elements=J$c,J$d.baseColor=J$e},J$d._getMeshRenderSharedMaterialDissolve=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.dissolve:0}return J$b.meshRender.sharedMaterial.dissolve},J$d._setMeshRenderSharedMaterialDissolve=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.dissolve=J$c[0])}else J$b.meshRender.material.dissolve=J$c[0]},J$d._getMeshRenderSharedMaterialDissolveSpeed=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return J$b.meshRender.sharedMaterial.dissolveSpeed},J$d._setMeshRenderSharedMaterialDissolveSpeed=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.dissolveSpeed=J$c[0])}else J$b.meshRender.material.dissolveSpeed=J$c[0]},J$d._getMeshRenderSharedMaterialMMultiplier=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.mMultiplier:0}return J$b.meshRender.sharedMaterial.mMultiplier},J$d._setMeshRenderSharedMaterialMMultiplier=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.mMultiplier=J$c[0])}else J$b.meshRender.material.mMultiplier=J$c[0]},J$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return J$b.meshRender.sharedMaterial.baseScrollSpeedX},J$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.baseScrollSpeedX=J$c[0])}else J$b.meshRender.material.baseScrollSpeedX=J$c[0]},J$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return J$b.meshRender.sharedMaterial.baseScrollSpeedY},J$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.baseScrollSpeedY=J$c[0])}else J$b.meshRender.material.baseScrollSpeedY=J$c[0]},J$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return J$b.meshRender.sharedMaterial.secondScrollSpeedX},J$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.secondScrollSpeedX=J$c[0])}else J$b.meshRender.material.secondScrollSpeedX=J$c[0]},J$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return J$b.meshRender.sharedMaterial.secondScrollSpeedY},J$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.secondScrollSpeedY=J$c[0])}else J$b.meshRender.material.secondScrollSpeedY=J$c[0]},J$d._getMeshRenderSharedMaterialAlpha=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.alpha:0}return J$b.meshRender.sharedMaterial.alpha},J$d._setMeshRenderSharedMaterialAlpha=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.alpha=J$c[0])}else J$b.meshRender.material.alpha=J$c[0]},J$d._getMeshRenderSharedMaterialIntensity=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.intensity:0}return J$b.meshRender.sharedMaterial.intensity},J$d._setMeshRenderSharedMaterialIntensity=function(J$a,J$b,J$c){if(J$a){var J$d=J$a.transform._entity;J$d&&(J$d.owner.meshRender.material.intensity=J$c[0])}else J$b.meshRender.material.intensity=J$c[0]},J$d._getMeshRenderSharedMaterialDetailTilingOffset=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return J$b.meshRender.sharedMaterial.detailTilingOffset.elements},J$d._setMeshRenderSharedMaterialDetailTilingOffset=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).detailTilingOffset).elements=J$c,J$d.detailTilingOffset=J$e)}else(J$e=(J$d=J$b.meshRender.material).detailTilingOffset).elements=J$c,J$d.detailTilingOffset=J$e},J$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return J$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},J$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).dissolveTilingOffset).elements=J$c,J$d.dissolveTilingOffset=J$e)}else(J$e=(J$d=J$b.meshRender.material).dissolveTilingOffset).elements=J$c,J$d.dissolveTilingOffset=J$e},J$d._getMeshRenderSharedMaterialMaskTilingOffset=function(J$a,J$b){if(J$a){var J$c=J$a.transform._entity;return J$c?J$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return J$b.meshRender.sharedMaterial.maskTilingOffset.elements},J$d._setMeshRenderSharedMaterialMaskTilingOffset=function(J$a,J$b,J$c){var J$d,J$e;if(J$a){var J$f=J$a.transform._entity;J$f&&((J$e=(J$d=J$f.owner.meshRender.material).maskTilingOffset).elements=J$c,J$d.maskTilingOffset=J$e)}else(J$e=(J$d=J$b.meshRender.material).maskTilingOffset).elements=J$c,J$d.maskTilingOffset=J$e},J$d._propertyIDCounter=0,J$d._propertyIndexDic={},J$d._propertySetFuncs=[],J$d._propertyGetFuncs=[],J$d}(),J$R=function(){function J$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return J$n(J$a,"laya.d3.animation.Keyframe"),J$a}(),J$S=function(){function J$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return J$n(J$a,"laya.d3.animation.KeyframeNode"),J$a}(),J$I=(function(){function J$a(){this._tempVector30=new J$gb,this._tempVector31=new J$gb,this._tempVector32=new J$gb,this._a=new J$gb,this._b=new J$gb,this._c=new J$gb,this._d=new J$gb}J$n(J$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var J$b=J$a.prototype;J$b.Init=function(J$a,J$b,J$c,J$d){J$a.cloneTo(this._d),J$b.cloneTo(this._c),J$gb.scale(J$a,2,this._a),J$gb.scale(J$c,2,this._tempVector30),J$gb.subtract(this._a,this._tempVector30,this._a),J$gb.add(this._a,J$b,this._a),J$gb.add(this._a,J$d,this._a),J$gb.scale(J$c,3,this._b),J$gb.scale(J$a,3,this._tempVector30),J$gb.subtract(this._b,this._tempVector30,this._b),J$gb.subtract(this._b,J$d,this._b),J$gb.scale(J$b,2,this._tempVector30),J$gb.subtract(this._b,this._tempVector30,this._b)},J$b.Slerp=function(J$a,J$b){J$gb.scale(this._a,J$a*J$a*J$a,this._tempVector30),J$gb.scale(this._b,J$a*J$a,this._tempVector31),J$gb.scale(this._c,J$a,this._tempVector32),J$gb.add(this._tempVector30,this._tempVector31,J$b),J$gb.add(J$b,this._tempVector32,J$b),J$gb.add(J$b,this._d,J$b)}}(),function(){function J$M(J$a,J$b,J$c,J$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=J$a,this._h=J$b,this._minHeight=J$c,this._maxHeight=J$d}J$n(J$M,"laya.d3.core.HeightMap");var J$a=J$M.prototype;J$a._inBounds=function(J$a,J$b){return 0<=J$a&&J$a<this._h&&0<=J$b&&J$b<this._w},J$a.getHeight=function(J$a,J$b){return this._inBounds(J$a,J$b)?this._datas[J$a][J$b]:NaN},J$o(0,J$a,"width",function(){return this._w}),J$o(0,J$a,"height",function(){return this._h}),J$o(0,J$a,"maxHeight",function(){return this._maxHeight}),J$o(0,J$a,"minHeight",function(){return this._minHeight}),J$M.creatFromMesh=function(J$a,J$b,J$c,J$d){for(var J$e=[],J$f=[],J$g=J$a.getSubMeshCount(),J$h=0;J$h<J$g;J$h++){for(var J$i=J$a.getSubMesh(J$h),J$j=J$i._getVertexBuffer(),J$k=J$j.getData(),J$l=[],J$m=0;J$m<J$k.length;J$m+=J$j.vertexDeclaration.vertexStride/4){var J$n=new J$gb(J$k[J$m+0],J$k[J$m+1],J$k[J$m+2]);J$l.push(J$n)}J$e.push(J$l);var J$o=J$i._getIndexBuffer();J$f.push(J$o.getData())}var J$p=J$a.boundingBox,J$q=J$p.min.x,J$r=J$p.min.z,J$u=J$p.max.x,J$v=J$p.max.z,J$w=J$p.min.y,J$x=J$p.max.y,J$y=J$u-J$q,J$z=J$v-J$r,J$A=J$d.elements[0]=J$y/(J$b-1),J$B=J$d.elements[1]=J$z/(J$c-1),J$C=new J$M(J$b,J$c,J$w,J$x),J$D=J$M._tempRay,J$E=J$D.direction.elements;J$E[0]=0,J$E[1]=-1,J$E[2]=0;var J$F=J$x+.1;J$D.origin.elements[1]=J$F;for(var J$G=0;J$G<J$c;J$G++){var J$H=J$r+J$G*J$B;J$C._datas[J$G]=[];for(var J$I=0;J$I<J$b;J$I++){var J$J=J$q+J$I*J$A,J$K=J$D.origin.elements;J$K[0]=J$J,J$K[2]=J$H;var J$L=J$M._getPosition(J$D,J$e,J$f);J$C._datas[J$G][J$I]=J$L===Number.MAX_VALUE?NaN:J$F-J$L}}return J$C},J$M.createFromImage=function(J$a,J$b,J$c){for(var J$d=J$a.width,J$e=J$a.height,J$f=new J$M(J$d,J$e,J$b,J$c),J$g=(J$c-J$b)/254,J$h=J$a.getPixels(),J$i=0,J$j=0;J$j<J$e;J$j++)for(var J$k=J$f._datas[J$j]=[],J$l=0;J$l<J$d;J$l++){var J$m=J$h[J$i++],J$n=J$h[J$i++],J$o=J$h[J$i++],J$p=J$h[J$i++];J$k[J$l]=255==J$m&&255==J$n&&255==J$o&&255==J$p?NaN:(J$m+J$n+J$o)/3*J$g+J$b}return J$f},J$M._getPosition=function(J$a,J$b,J$c){for(var J$d=Number.MAX_VALUE,J$e=0;J$e<J$b.length;J$e++)for(var J$f=J$b[J$e],J$g=J$c[J$e],J$h=0;J$h<J$g.length;J$h+=3){var J$i=J$f[J$g[J$h+0]],J$j=J$f[J$g[J$h+1]],J$k=J$f[J$g[J$h+2]],J$l=J$ob.rayIntersectsTriangle(J$a,J$i,J$j,J$k);!isNaN(J$l)&&J$l<J$d&&(J$d=J$l)}return J$d},J$l(J$M,["_tempRay",function(){return this._tempRay=new J$eb(new J$gb,new J$gb)}])}(),function(){function J$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}J$n(J$e,"laya.d3.core.Layer");var J$a=J$e.prototype;return J$a._binarySearchIndex=function(){for(var J$a=0,J$b=J$e._collsionTestList.length-1,J$c=0;J$a<=J$b;){J$c=Math.floor((J$a+J$b)/2);var J$d=J$e._collsionTestList[J$c];if(J$d==this._number)return J$c;J$d>this._number?J$b=J$c-1:J$a=J$c+1}return J$a},J$a._addCollider=function(J$a){0===this._colliders.length&&J$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),J$a._isRigidbody?(this._colliders.unshift(J$a),this._nonRigidbodyOffset++):this._colliders.push(J$a)},J$a._removeCollider=function(J$a){var J$b=this._colliders.indexOf(J$a);J$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(J$b,1),0===this._colliders.length&&J$e._collsionTestList.splice(J$e._collsionTestList.indexOf(this._number),1)},J$o(0,J$a,"number",function(){return this._number}),J$o(0,J$a,"visible",function(){return this._visible},function(J$a){this._visible=J$a,J$e._visibleLayers=J$a?J$e._visibleLayers|this.mask:J$e._visibleLayers&~this.mask}),J$o(0,J$a,"mask",function(){return this._mask}),J$o(1,J$e,"visibleLayers",function(){return J$e._visibleLayers},function(J$a){J$e._visibleLayers=J$a;for(var J$b=0,J$c=J$e._layerList.length;J$b<J$c;J$b++){var J$d=J$e._layerList[J$b];J$d._visible=0!=(J$d._mask&J$e._visibleLayers)}}),J$e.__init__=function(){J$e._layerList.length=31;for(var J$a=0;J$a<31;J$a++){var J$b=new J$e;J$e._layerList[J$a]=J$b,0===J$a?(J$b.name="Default Layer",J$b.visible=!0):(J$b.name="Layer-"+J$a,J$b.visible=!1),J$b._number=J$a,J$b._mask=Math.pow(2,J$a)}J$e.currentCreationLayer=J$e._layerList[0]},J$e.getLayerByNumber=function(J$a){if(J$a<0||30<J$a)throw new Error("无法返回指定Layer，该number超出范围！");return J$e._layerList[J$a]},J$e.getLayerByName=function(J$a){for(var J$b=0;J$b<31;J$b++)if(J$e._layerList[J$b].name===J$a)return J$e._layerList[J$b];throw new Error("无法返回指定Layer,该name不存在")},J$e.isVisible=function(J$a){return 0!=(J$a&J$e._currentCameraCullingMask&J$e._visibleLayers)},J$e._layerList=[],J$e._visibleLayers=2147483647,J$e._collsionTestList=[],J$e._currentCameraCullingMask=2147483647,J$e.maxCount=31,J$e.currentCreationLayer=null,J$e}()),J$J=(function(){function J$a(J$a,J$b,J$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=J$a,this._minCount=J$b,this._maxCount=J$c}J$n(J$a,"laya.d3.core.particleShuriKen.module.Burst");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.cloneTo=function(J$a){var J$b=J$a;J$b._time=this._time,J$b._minCount=this._minCount,J$b._maxCount=this._maxCount},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"time",function(){return this._time}),J$o(0,J$b,"minCount",function(){return this._minCount}),J$o(0,J$b,"maxCount",function(){return this._maxCount})}(),function(){function J$a(J$a){this._color=null,this.enbale=!1,this._color=J$a}J$n(J$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var J$b=J$a.prototype;J$b.cloneTo=function(J$a){var J$b=J$a;this._color.cloneTo(J$b._color),J$b.enbale=this.enbale},J$b.clone=function(){var J$a;switch(this._color.type){case 0:J$a=J$L.createByConstant(this._color.constant.clone());break;case 1:J$a=J$L.createByGradient(this._color.gradient.clone());break;case 2:J$a=J$L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:J$a=J$L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var J$b=new this.constructor(J$a);return J$b.enbale=this.enbale,J$b},J$o(0,J$b,"color",function(){return this._color})}(),function(){function J$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}J$n(J$a,"laya.d3.core.particleShuriKen.module.Emission");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),J$b._destroy=function(){this._bursts=null,this._destroyed=!0},J$b.getBurstsCount=function(){return this._bursts.length},J$b.getBurstByIndex=function(J$a){return this._bursts[J$a]},J$b.addBurst=function(J$a){var J$b=this._bursts.length;if(0<J$b)for(var J$c=0;J$c<J$b;J$c++)this._bursts[J$c].time>J$a.time&&this._bursts.splice(J$c,0,J$a);this._bursts.push(J$a)},J$b.removeBurst=function(J$a){var J$b=this._bursts.indexOf(J$a);-1!==J$b&&this._bursts.splice(J$b,1)},J$b.removeBurstByIndex=function(J$a){this._bursts.splice(J$a,1)},J$b.clearBurst=function(){this._bursts.length=0},J$b.cloneTo=function(J$a){var J$b=J$a,J$c=J$b._bursts;J$c.length=this._bursts.length;for(var J$d=0,J$e=this._bursts.length;J$d<J$e;J$d++){var J$f=J$c[J$d];J$f?this._bursts[J$d].cloneTo(J$f):J$c[J$d]=this._bursts[J$d].clone()}J$b._emissionRate=this._emissionRate,J$b.enbale=this.enbale},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"destroyed",function(){return this._destroyed}),J$o(0,J$b,"emissionRate",function(){return this._emissionRate},function(J$a){if(J$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=J$a})}(),function(){function J$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}J$n(J$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var J$a=J$d.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,J$b._constant=this._constant,this._overTime.cloneTo(J$b._overTime),J$b._constantMin=this._constantMin,J$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(J$b._overTimeMin),this._overTimeMax.cloneTo(J$b._overTimeMax)},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"frameOverTimeData",function(){return this._overTime}),J$o(0,J$a,"constant",function(){return this._constant}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"frameOverTimeDataMin",function(){return this._overTimeMin}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"frameOverTimeDataMax",function(){return this._overTimeMax}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$d.createByConstant=function(J$a){var J$b=new J$d;return J$b._type=0,J$b._constant=J$a,J$b},J$d.createByOverTime=function(J$a){var J$b=new J$d;return J$b._type=1,J$b._overTime=J$a,J$b},J$d.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$d;return J$c._type=2,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$d.createByRandomTwoOverTime=function(J$a,J$b){var J$c=new J$d;return J$c._type=3,J$c._overTimeMin=J$a,J$c._overTimeMax=J$b,J$c},J$d}()),J$K=function(){function J$j(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}J$n(J$j,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var J$a=J$j.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,J$b._separateAxes=this._separateAxes,J$b._constant=this._constant,this._constantSeparate.cloneTo(J$b._constantSeparate),this._gradient.cloneTo(J$b._gradient),this._gradientX.cloneTo(J$b._gradientX),this._gradientY.cloneTo(J$b._gradientY),this._gradientZ.cloneTo(J$b._gradientZ),J$b._constantMin=this._constantMin,J$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(J$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(J$b._constantMaxSeparate),this._gradientMin.cloneTo(J$b._gradientMin),this._gradientMax.cloneTo(J$b._gradientMax),this._gradientXMin.cloneTo(J$b._gradientXMin),this._gradientXMax.cloneTo(J$b._gradientXMax),this._gradientYMin.cloneTo(J$b._gradientYMin),this._gradientYMax.cloneTo(J$b._gradientYMax),this._gradientZMin.cloneTo(J$b._gradientZMin),this._gradientZMax.cloneTo(J$b._gradientZMax)},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"gradientZ",function(){return this._gradientZ}),J$o(0,J$a,"constant",function(){return this._constant}),J$o(0,J$a,"gradient",function(){return this._gradient}),J$o(0,J$a,"separateAxes",function(){return this._separateAxes}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"constantSeparate",function(){return this._constantSeparate}),J$o(0,J$a,"gradientX",function(){return this._gradientX}),J$o(0,J$a,"gradientY",function(){return this._gradientY}),J$o(0,J$a,"gradientW",function(){return this._gradientW}),J$o(0,J$a,"gradientMin",function(){return this._gradientMin}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"gradientMax",function(){return this._gradientMax}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$o(0,J$a,"gradientWMin",function(){return this._gradientWMin}),J$o(0,J$a,"constantMinSeparate",function(){return this._constantMinSeparate}),J$o(0,J$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),J$o(0,J$a,"gradientXMin",function(){return this._gradientXMin}),J$o(0,J$a,"gradientXMax",function(){return this._gradientXMax}),J$o(0,J$a,"gradientWMax",function(){return this._gradientWMax}),J$o(0,J$a,"gradientYMin",function(){return this._gradientYMin}),J$o(0,J$a,"gradientYMax",function(){return this._gradientYMax}),J$o(0,J$a,"gradientZMin",function(){return this._gradientZMin}),J$o(0,J$a,"gradientZMax",function(){return this._gradientZMax}),J$j.createByConstant=function(J$a){var J$b=new J$j;return J$b._type=0,J$b._separateAxes=!1,J$b._constant=J$a,J$b},J$j.createByConstantSeparate=function(J$a){var J$b=new J$j;return J$b._type=0,J$b._separateAxes=!0,J$b._constantSeparate=J$a,J$b},J$j.createByGradient=function(J$a){var J$b=new J$j;return J$b._type=1,J$b._separateAxes=!1,J$b._gradient=J$a,J$b},J$j.createByGradientSeparate=function(J$a,J$b,J$c,J$d){var J$e=new J$j;return J$e._type=1,J$e._separateAxes=!0,J$e._gradientX=J$a,J$e._gradientY=J$b,J$e._gradientZ=J$c,J$e._gradientW=J$d,J$e},J$j.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$j;return J$c._type=2,J$c._separateAxes=!1,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$j.createByRandomTwoConstantSeparate=function(J$a,J$b){var J$c=new J$j;return J$c._type=2,J$c._separateAxes=!0,J$c._constantMinSeparate=J$a,J$c._constantMaxSeparate=J$b,J$c},J$j.createByRandomTwoGradient=function(J$a,J$b){var J$c=new J$j;return J$c._type=3,J$c._separateAxes=!1,J$c._gradientMin=J$a,J$c._gradientMax=J$b,J$c},J$j.createByRandomTwoGradientSeparate=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){var J$i=new J$j;return J$i._type=3,J$i._separateAxes=!0,J$i._gradientXMin=J$a,J$i._gradientXMax=J$b,J$i._gradientYMin=J$c,J$i._gradientYMax=J$d,J$i._gradientZMin=J$e,J$i._gradientZMax=J$f,J$i._gradientWMin=J$g,J$i._gradientWMax=J$h,J$i},J$j}(),J$L=function(){function J$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}J$n(J$d,"laya.d3.core.particleShuriKen.module.GradientColor");var J$a=J$d.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,this._constant.cloneTo(J$b._constant),this._constantMin.cloneTo(J$b._constantMin),this._constantMax.cloneTo(J$b._constantMax),this._gradient.cloneTo(J$b._gradient),this._gradientMin.cloneTo(J$b._gradientMin),this._gradientMax.cloneTo(J$b._gradientMax)},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"gradient",function(){return this._gradient}),J$o(0,J$a,"constant",function(){return this._constant}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"gradientMin",function(){return this._gradientMin}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"gradientMax",function(){return this._gradientMax}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$d.createByConstant=function(J$a){var J$b=new J$d;return J$b._type=0,J$b._constant=J$a,J$b},J$d.createByGradient=function(J$a){var J$b=new J$d;return J$b._type=1,J$b._gradient=J$a,J$b},J$d.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$d;return J$c._type=2,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$d.createByRandomTwoGradient=function(J$a,J$b){var J$c=new J$d;return J$c._type=3,J$c._gradientMin=J$a,J$c._gradientMax=J$b,J$c},J$d}(),J$M=(function(){function J$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}J$n(J$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.addAlpha=function(J$a,J$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==J$a&&(J$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=J$a,this._alphaElements[this._alphaCurrentLength++]=J$b):DEBUG},J$b.addRGB=function(J$a,J$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==J$a&&(J$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=J$a,this._rgbElements[this._rgbCurrentLength++]=J$b.x,this._rgbElements[this._rgbCurrentLength++]=J$b.y,this._rgbElements[this._rgbCurrentLength++]=J$b.z):DEBUG},J$b.cloneTo=function(J$a){var J$b=J$a,J$c=0,J$d=0;J$b._alphaCurrentLength=this._alphaCurrentLength;var J$e=J$b._alphaElements;for(J$e.length=this._alphaElements.length,J$c=0,J$d=this._alphaElements.length;J$c<J$d;J$c++)J$e[J$c]=this._alphaElements[J$c];J$b._rgbCurrentLength=this._rgbCurrentLength;var J$f=J$b._rgbElements;for(J$f.length=this._rgbElements.length,J$c=0,J$d=this._rgbElements.length;J$c<J$d;J$c++)J$f[J$c]=this._rgbElements[J$c]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),J$o(0,J$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function J$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}J$n(J$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.add=function(J$a,J$b){this._currentLength<8?(6===this._currentLength&&1!==J$a&&(J$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=J$a,this._elements[this._currentLength++]=J$b):console.log("Warning:data count must lessEqual than 4")},J$b.cloneTo=function(J$a){var J$b=J$a;J$b._currentLength=this._currentLength;var J$c=J$b._elements;J$c.length=this._elements.length;for(var J$d=0,J$e=this._elements.length;J$d<J$e;J$d++)J$c[J$d]=this._elements[J$d]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function J$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}J$n(J$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.add=function(J$a,J$b){this._currentLength<8?(6===this._currentLength&&1!==J$a&&(J$a=1,DEBUG),this._elements[this._currentLength++]=J$a,this._elements[this._currentLength++]=J$b):DEBUG},J$b.getKeyByIndex=function(J$a){return this._elements[2*J$a]},J$b.getValueByIndex=function(J$a){return this._elements[2*J$a+1]},J$b.getAverageValue=function(){for(var J$a=0,J$b=this._currentLength-2;J$a<J$b;J$a+=2){this._elements[J$a+1];this._elements[J$a+3],this._elements[J$a+2]-this._elements[J$a]}return 0},J$b.cloneTo=function(J$a){var J$b=J$a;J$b._currentLength=this._currentLength;var J$c=J$b._elements;J$c.length=this._elements.length;for(var J$d=0,J$e=this._elements.length;J$d<J$e;J$d++)J$c[J$d]=this._elements[J$d]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function J$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}J$n(J$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.add=function(J$a,J$b){this._currentLength<8?(6===this._currentLength&&1!==J$a&&(J$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=J$a,this._elements[this._currentLength++]=J$b.x,this._elements[this._currentLength++]=J$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},J$b.cloneTo=function(J$a){var J$b=J$a;J$b._currentLength=this._currentLength;var J$c=J$b._elements;J$c.length=this._elements.length;for(var J$d=0,J$e=this._elements.length;J$d<J$e;J$d++)J$c[J$d]=this._elements[J$d]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function J$h(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}J$n(J$h,"laya.d3.core.particleShuriKen.module.GradientSize");var J$a=J$h.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.getMaxSizeInGradient=function(){var J$a=0,J$b=0,J$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(J$a=0,J$b=this._gradientX.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientX.getValueByIndex(J$a));for(J$a=0,J$b=this._gradientY.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientY.getValueByIndex(J$a))}else for(J$a=0,J$b=this._gradient.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradient.getValueByIndex(J$a));break;case 1:J$c=this._separateAxes?(J$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),J$c=Math.max(J$c,this._constantMinSeparate.y),Math.max(J$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(J$a=0,J$b=this._gradientXMin.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientXMin.getValueByIndex(J$a));for(J$a=0,J$b=this._gradientXMax.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientXMax.getValueByIndex(J$a));for(J$a=0,J$b=this._gradientYMin.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientYMin.getValueByIndex(J$a));for(J$a=0,J$b=this._gradientZMax.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientZMax.getValueByIndex(J$a))}else{for(J$a=0,J$b=this._gradientMin.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientMin.getValueByIndex(J$a));for(J$a=0,J$b=this._gradientMax.gradientCount;J$a<J$b;J$a++)J$c=Math.max(J$c,this._gradientMax.getValueByIndex(J$a))}}return J$c},J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,J$b._separateAxes=this._separateAxes,this._gradient.cloneTo(J$b._gradient),this._gradientX.cloneTo(J$b._gradientX),this._gradientY.cloneTo(J$b._gradientY),this._gradientZ.cloneTo(J$b._gradientZ),J$b._constantMin=this._constantMin,J$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(J$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(J$b._constantMaxSeparate),this._gradientMin.cloneTo(J$b._gradientMin),this._gradientMax.cloneTo(J$b._gradientMax),this._gradientXMin.cloneTo(J$b._gradientXMin),this._gradientXMax.cloneTo(J$b._gradientXMax),this._gradientYMin.cloneTo(J$b._gradientYMin),this._gradientYMax.cloneTo(J$b._gradientYMax),this._gradientZMin.cloneTo(J$b._gradientZMin),this._gradientZMax.cloneTo(J$b._gradientZMax)},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"gradientZ",function(){return this._gradientZ}),J$o(0,J$a,"gradient",function(){return this._gradient}),J$o(0,J$a,"separateAxes",function(){return this._separateAxes}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"gradientMin",function(){return this._gradientMin}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"gradientX",function(){return this._gradientX}),J$o(0,J$a,"gradientY",function(){return this._gradientY}),J$o(0,J$a,"gradientMax",function(){return this._gradientMax}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$o(0,J$a,"constantMinSeparate",function(){return this._constantMinSeparate}),J$o(0,J$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),J$o(0,J$a,"gradientXMin",function(){return this._gradientXMin}),J$o(0,J$a,"gradientXMax",function(){return this._gradientXMax}),J$o(0,J$a,"gradientYMin",function(){return this._gradientYMin}),J$o(0,J$a,"gradientYMax",function(){return this._gradientYMax}),J$o(0,J$a,"gradientZMin",function(){return this._gradientZMin}),J$o(0,J$a,"gradientZMax",function(){return this._gradientZMax}),J$h.createByGradient=function(J$a){var J$b=new J$h;return J$b._type=0,J$b._separateAxes=!1,J$b._gradient=J$a,J$b},J$h.createByGradientSeparate=function(J$a,J$b,J$c){var J$d=new J$h;return J$d._type=0,J$d._separateAxes=!0,J$d._gradientX=J$a,J$d._gradientY=J$b,J$d._gradientZ=J$c,J$d},J$h.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$h;return J$c._type=1,J$c._separateAxes=!1,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$h.createByRandomTwoConstantSeparate=function(J$a,J$b){var J$c=new J$h;return J$c._type=1,J$c._separateAxes=!0,J$c._constantMinSeparate=J$a,J$c._constantMaxSeparate=J$b,J$c},J$h.createByRandomTwoGradient=function(J$a,J$b){var J$c=new J$h;return J$c._type=2,J$c._separateAxes=!1,J$c._gradientMin=J$a,J$c._gradientMax=J$b,J$c},J$h.createByRandomTwoGradientSeparate=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=new J$h;return J$g._type=2,J$g._separateAxes=!0,J$g._gradientXMin=J$a,J$g._gradientXMax=J$b,J$g._gradientYMin=J$c,J$g._gradientYMax=J$d,J$g._gradientZMin=J$e,J$g._gradientZMax=J$f,J$g},J$h}()),J$N=function(){function J$h(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}J$n(J$h,"laya.d3.core.particleShuriKen.module.GradientVelocity");var J$a=J$h.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,this._constant.cloneTo(J$b._constant),this._gradientX.cloneTo(J$b._gradientX),this._gradientY.cloneTo(J$b._gradientY),this._gradientZ.cloneTo(J$b._gradientZ),this._constantMin.cloneTo(J$b._constantMin),this._constantMax.cloneTo(J$b._constantMax),this._gradientXMin.cloneTo(J$b._gradientXMin),this._gradientXMax.cloneTo(J$b._gradientXMax),this._gradientYMin.cloneTo(J$b._gradientYMin),this._gradientYMax.cloneTo(J$b._gradientYMax),this._gradientZMin.cloneTo(J$b._gradientZMin),this._gradientZMax.cloneTo(J$b._gradientZMax)},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"gradientZ",function(){return this._gradientZ}),J$o(0,J$a,"constant",function(){return this._constant}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"gradientXMax",function(){return this._gradientXMax}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"gradientX",function(){return this._gradientX}),J$o(0,J$a,"gradientY",function(){return this._gradientY}),J$o(0,J$a,"gradientXMin",function(){return this._gradientXMin}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$o(0,J$a,"gradientYMin",function(){return this._gradientYMin}),J$o(0,J$a,"gradientYMax",function(){return this._gradientYMax}),J$o(0,J$a,"gradientZMin",function(){return this._gradientZMin}),J$o(0,J$a,"gradientZMax",function(){return this._gradientZMax}),J$h.createByConstant=function(J$a){var J$b=new J$h;return J$b._type=0,J$b._constant=J$a,J$b},J$h.createByGradient=function(J$a,J$b,J$c){var J$d=new J$h;return J$d._type=1,J$d._gradientX=J$a,J$d._gradientY=J$b,J$d._gradientZ=J$c,J$d},J$h.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$h;return J$c._type=2,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$h.createByRandomTwoGradient=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=new J$h;return J$g._type=3,J$g._gradientXMin=J$a,J$g._gradientXMax=J$b,J$g._gradientYMin=J$c,J$g._gradientYMax=J$d,J$g._gradientZMin=J$e,J$g._gradientZMax=J$f,J$g},J$h}(),J$O=(function(){function J$a(J$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=J$a}J$n(J$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.cloneTo=function(J$a){var J$b=J$a;this._angularVelocity.cloneTo(J$b._angularVelocity),J$b.enbale=this.enbale},J$b.clone=function(){var J$a;switch(this._angularVelocity.type){case 0:J$a=this._angularVelocity.separateAxes?J$K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):J$K.createByConstant(this._angularVelocity.constant);break;case 1:J$a=this._angularVelocity.separateAxes?J$K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):J$K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:J$a=this._angularVelocity.separateAxes?J$K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):J$K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:J$a=this._angularVelocity.separateAxes?J$K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):J$K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var J$b=new this.constructor(J$a);return J$b.enbale=this.enbale,J$b},J$o(0,J$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function J$a(){this.enable=!1,this.randomDirection=!1}J$n(J$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b._getShapeBoundBox=function(J$a){throw new Error("BaseShape: must override it.")},J$b._getSpeedBoundBox=function(J$a){throw new Error("BaseShape: must override it.")},J$b.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){throw new Error("BaseShape: must override it.")},J$b._calculateProceduralBounds=function(J$a,J$b,J$c){this._getShapeBoundBox(J$a);var J$d=J$a.min,J$e=J$a.max;J$gb.multiply(J$d,J$b,J$d),J$gb.multiply(J$e,J$b,J$e);var J$f=new J$Za(new J$gb,new J$gb);this.randomDirection?(J$f.min=new J$gb(-1,-1,-1),J$f.max=new J$gb(1,1,1)):this._getSpeedBoundBox(J$f);var J$g=new J$Za(new J$gb,new J$gb),J$h=J$g.min,J$i=J$g.max;J$gb.scale(J$f.min,J$c.y,J$h),J$gb.scale(J$f.max,J$c.y,J$i),J$gb.add(J$a.min,J$h,J$h),J$gb.add(J$a.max,J$i,J$i),J$gb.min(J$a.min,J$h,J$a.min),J$gb.max(J$a.max,J$h,J$a.max);var J$j=new J$Za(new J$gb,new J$gb),J$k=J$j.min,J$l=J$j.max;J$gb.scale(J$f.min,J$c.x,J$k),J$gb.scale(J$f.max,J$c.x,J$l),J$gb.min(J$j.min,J$l,J$h),J$gb.max(J$j.min,J$l,J$i),J$gb.min(J$a.min,J$h,J$a.min),J$gb.max(J$a.max,J$h,J$a.max)},J$b.cloneTo=function(J$a){J$a.enable=this.enable},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$a}()),J$T=function(){function J$f(){}return J$n(J$f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),J$f._randomPointUnitArcCircle=function(J$a,J$b,J$c){var J$d=J$b.elements,J$e=NaN;J$e=J$c?J$c.getFloat()*J$a:Math.random()*J$a,J$d[0]=Math.cos(J$e),J$d[1]=Math.sin(J$e)},J$f._randomPointInsideUnitArcCircle=function(J$a,J$b,J$c){var J$d=J$b.elements;J$f._randomPointUnitArcCircle(J$a,J$b,J$c);var J$e=NaN;J$e=J$c?Math.pow(J$c.getFloat(),.5):Math.pow(Math.random(),.5),J$d[0]=J$d[0]*J$e,J$d[1]=J$d[1]*J$e},J$f._randomPointUnitCircle=function(J$a,J$b){var J$c=J$a.elements,J$d=NaN;J$d=J$b?J$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,J$c[0]=Math.cos(J$d),J$c[1]=Math.sin(J$d)},J$f._randomPointInsideUnitCircle=function(J$a,J$b){var J$c=J$a.elements;J$f._randomPointUnitCircle(J$a);var J$d=NaN;J$d=J$b?Math.pow(J$b.getFloat(),.5):Math.pow(Math.random(),.5),J$c[0]=J$c[0]*J$d,J$c[1]=J$c[1]*J$d},J$f._randomPointUnitSphere=function(J$a,J$b){var J$c=J$a.elements,J$d=NaN,J$e=NaN;J$e=J$b?(J$d=J$c[2]=2*J$b.getFloat()-1,J$b.getFloat()*Math.PI*2):(J$d=J$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var J$f=Math.sqrt(1-J$d*J$d);J$c[0]=J$f*Math.cos(J$e),J$c[1]=J$f*Math.sin(J$e)},J$f._randomPointInsideUnitSphere=function(J$a,J$b){var J$c=J$a.elements;J$f._randomPointUnitSphere(J$a);var J$d=NaN;J$d=J$b?Math.pow(J$b.getFloat(),1/3):Math.pow(Math.random(),1/3),J$c[0]=J$c[0]*J$d,J$c[1]=J$c[1]*J$d,J$c[2]=J$c[2]*J$d},J$f._randomPointInsideHalfUnitBox=function(J$a,J$b){var J$c=J$a.elements;J$b?(J$c[0]=J$b.getFloat()-.5,J$c[1]=J$b.getFloat()-.5,J$c[2]=J$b.getFloat()-.5):(J$c[0]=Math.random()-.5,J$c[1]=Math.random()-.5,J$c[2]=Math.random()-.5)},J$f}(),J$U=(function(){function J$a(J$a){this._size=null,this.enbale=!1,this._size=J$a}J$n(J$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.cloneTo=function(J$a){var J$b=J$a;this._size.cloneTo(J$b._size),J$b.enbale=this.enbale},J$b.clone=function(){var J$a;switch(this._size.type){case 0:J$a=this._size.separateAxes?J$M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):J$M.createByGradient(this._size.gradient.clone());break;case 1:J$a=this._size.separateAxes?J$M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):J$M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:J$a=this._size.separateAxes?J$M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):J$M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var J$b=new this.constructor(J$a);return J$b.enbale=this.enbale,J$b},J$o(0,J$b,"size",function(){return this._size})}(),function(){function J$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}J$n(J$d,"laya.d3.core.particleShuriKen.module.StartFrame");var J$a=J$d.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.cloneTo=function(J$a){var J$b=J$a;J$b._type=this._type,J$b._constant=this._constant,J$b._constantMin=this._constantMin,J$b._constantMax=this._constantMax},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$a,"constant",function(){return this._constant}),J$o(0,J$a,"type",function(){return this._type}),J$o(0,J$a,"constantMin",function(){return this._constantMin}),J$o(0,J$a,"constantMax",function(){return this._constantMax}),J$d.createByConstant=function(J$a){var J$b=new J$d;return J$b._type=0,J$b._constant=J$a,J$b},J$d.createByRandomTwoConstant=function(J$a,J$b){var J$c=new J$d;return J$c._type=1,J$c._constantMin=J$a,J$c._constantMax=J$b,J$c},J$d}()),J$V=(function(){function J$a(J$a,J$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new J$fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=J$a,this._startFrame=J$b}J$n(J$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.cloneTo=function(J$a){var J$b=J$a;this.tiles.cloneTo(J$b.tiles),J$b.type=this.type,J$b.randomRow=this.randomRow,this._frame.cloneTo(J$b._frame),this._startFrame.cloneTo(J$b._startFrame),J$b.cycles=this.cycles,J$b.enableUVChannels=this.enableUVChannels,J$b.enable=this.enable},J$b.clone=function(){var J$a,J$b;switch(this._frame.type){case 0:J$a=J$J.createByConstant(this._frame.constant);break;case 1:J$a=J$J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:J$a=J$J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:J$a=J$J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:J$b=J$U.createByConstant(this._startFrame.constant);break;case 1:J$b=J$U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var J$c=new this.constructor(J$a,J$b);return this.tiles.cloneTo(J$c.tiles),J$c.type=this.type,J$c.randomRow=this.randomRow,J$c.cycles=this.cycles,J$c.enableUVChannels=this.enableUVChannels,J$c.enable=this.enable,J$c},J$o(0,J$b,"frame",function(){return this._frame}),J$o(0,J$b,"startFrame",function(){return this._startFrame})}(),function(){function J$a(J$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=J$a}J$n(J$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.cloneTo=function(J$a){var J$b=J$a;this._velocity.cloneTo(J$b._velocity),J$b.enbale=this.enbale,J$b.space=this.space},J$b.clone=function(){var J$a;switch(this._velocity.type){case 0:J$a=J$N.createByConstant(this._velocity.constant.clone());break;case 1:J$a=J$N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:J$a=J$N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:J$a=J$N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var J$b=new this.constructor(J$a);return J$b.enbale=this.enbale,J$b.space=this.space,J$b},J$o(0,J$b,"velocity",function(){return this._velocity})}(),function(){function J$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new J$mb,this._vb=J$Ob.create(J$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=J$Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=J$Lb.nameKey.getID("LINE"),this._shaderCompile=J$Ab._preCompileShader[this._sharderNameID]}J$n(J$a,"laya.d3.core.PhasorSpriter3D");var J$b=J$a.prototype;return J$b.line=function(J$a,J$b,J$c,J$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J$a.x,J$a.y,J$a.z,J$b.x,J$b.y,J$b.z,J$b.w),this.addVertex(J$c.x,J$c.y,J$c.z,J$d.x,J$d.y,J$d.z,J$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},J$b.circle=function(J$a,J$b,J$c,J$d,J$e,J$f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*J$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/J$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*J$a,Math.cos(this._tempNumver0)*J$a,0,J$c,J$d,J$e,J$f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},J$b.plane=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=J$d/2,this._tempNumver1=J$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J$a-this._tempNumver0,J$b+this._tempNumver1,J$c,J$f,J$g,J$h,J$i),this.addVertex(J$a+this._tempNumver0,J$b+this._tempNumver1,J$c,J$f,J$g,J$h,J$i),this.addVertex(J$a-this._tempNumver0,J$b-this._tempNumver1,J$c,J$f,J$g,J$h,J$i),this.addVertex(J$a+this._tempNumver0,J$b-this._tempNumver1,J$c,J$f,J$g,J$h,J$i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},J$b.box=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=J$d/2,this._tempNumver1=J$e/2,this._tempNumver2=J$f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J$a-this._tempNumver0,J$b+this._tempNumver1,J$c+this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a+this._tempNumver0,J$b+this._tempNumver1,J$c+this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a-this._tempNumver0,J$b-this._tempNumver1,J$c+this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a+this._tempNumver0,J$b-this._tempNumver1,J$c+this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a+this._tempNumver0,J$b+this._tempNumver1,J$c-this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a-this._tempNumver0,J$b+this._tempNumver1,J$c-this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a+this._tempNumver0,J$b-this._tempNumver1,J$c-this._tempNumver2,J$g,J$h,J$i,J$j),this.addVertex(J$a-this._tempNumver0,J$b-this._tempNumver1,J$c-this._tempNumver2,J$g,J$h,J$i,J$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},J$b.cone=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*J$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*J$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/J$c,this.addVertexIndex(0,J$b,0,J$d,J$e,J$f,J$g,this._tempUint0),this.addVertexIndex(0,0,0,J$d,J$e,J$f,J$g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<J$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(J$a*this._tempNumver2,0,J$a*this._tempNumver3,J$d,J$e,J$f,J$g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==J$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(J$a*this._tempNumver2,0,J$a*this._tempNumver3,J$d,J$e,J$f,J$g,this._tempUint0+(this._tempInt0+J$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==J$c-1?this.addIndexes(this._tempUint1+J$c+2):this.addIndexes(this._tempUint1+this._tempInt0+J$c+1),this.addIndexes(this._tempUint1+this._tempInt0+J$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},J$b.boundingBoxLine=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(J$a,J$e,J$f,J$g,J$h,J$i,J$j),this.addVertex(J$d,J$e,J$f,J$g,J$h,J$i,J$j),this.addVertex(J$a,J$b,J$f,J$g,J$h,J$i,J$j),this.addVertex(J$d,J$b,J$f,J$g,J$h,J$i,J$j),this.addVertex(J$d,J$e,J$c,J$g,J$h,J$i,J$j),this.addVertex(J$a,J$e,J$c,J$g,J$h,J$i,J$j),this.addVertex(J$d,J$b,J$c,J$g,J$h,J$i,J$j),this.addVertex(J$a,J$b,J$c,J$g,J$h,J$i,J$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},J$b.addVertex=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=J$a,this._vbData[this._posInVBData+1]=J$b,this._vbData[this._posInVBData+2]=J$c,this._vbData[this._posInVBData+3]=J$d,this._vbData[this._posInVBData+4]=J$e,this._vbData[this._posInVBData+5]=J$f,this._vbData[this._posInVBData+6]=J$g,this._posInVBData+=this._floatSizePerVer,this},J$b.addVertexIndex=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){return this._hasBegun||this.addVertexIndexException(),this._vbData[J$h]=J$a,this._vbData[J$h+1]=J$b,this._vbData[J$h+2]=J$c,this._vbData[J$h+3]=J$d,this._vbData[J$h+4]=J$e,this._vbData[J$h+5]=J$f,this._vbData[J$h+6]=J$g,(J$h+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=J$h),this},J$b.addIndexes=function(J$a){var J$b=arguments;this._hasBegun||this.addVertexIndexException();for(var J$c=0;J$c<J$b.length;J$c++)this._ibData[this._posInIBData]=J$b[J$c],this._posInIBData++;return this},J$b.begin=function(J$a,J$b){return this._hasBegun&&this.beginException0(),1!==J$a&&4!==J$a&&this.beginException1(),this._primitiveType=J$a,this._camera=J$b,this._hasBegun=!0,this},J$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},J$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(J$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),J$A.drawCall++,J$F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},J$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},J$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},J$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},J$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},J$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},J$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(28,[new J$ga(0,"vector3",0),new J$ga(12,"vector4",1)])}]),J$a}()),J$W=function(){function J$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++J$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new J$mb}J$n(J$a,"laya.d3.core.render.RenderElement");var J$b=J$a.prototype;return J$b.getDynamicBatchBakedVertexs=function(J$a){for(var J$b=this._renderObj._getVertexBuffer(J$a),J$c=J$b.getData().slice(),J$d=J$b.vertexDeclaration,J$e=J$d.getVertexElementByUsage(0).offset/4,J$f=J$d.getVertexElementByUsage(3).offset/4,J$g=this._sprite3D.transform,J$h=J$g.worldMatrix,J$i=J$g.rotation,J$j=J$d.vertexStride/4,J$k=0,J$l=J$c.length;J$k<J$l;J$k+=J$j){var J$m=J$k+J$e,J$n=J$k+J$f;J$qb.transformVector3ArrayToVector3ArrayCoordinate(J$c,J$m,J$h,J$c,J$m),J$qb.transformVector3ArrayByQuat(J$c,J$n,J$i,J$c,J$n)}return J$c},J$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},J$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},J$o(0,J$b,"id",function(){return this._id}),J$o(0,J$b,"renderObj",function(){return this._renderObj},function(J$a){this._renderObj!==J$a&&(this._renderObj=J$a)}),J$a._uniqueIDCounter=0,J$a}(),J$X=function(){function J$b(J$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++J$b._uniqueIDCounter,this._needSort=!1,this._scene=J$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}J$n(J$b,"laya.d3.core.render.RenderQueue");var J$a=J$b.prototype;return J$a._sortOpaqueFunc=function(J$a,J$b){if(J$a._render&&J$b._render){var J$c=J$a._material.renderQueue-J$b._material.renderQueue;return 0==J$c?J$a._render._distanceForSort-J$b._render._distanceForSort:J$c}return 0},J$a._sortAlphaFunc=function(J$a,J$b){if(J$a._render&&J$b._render){var J$c=J$a._material.renderQueue-J$b._material.renderQueue;return 0==J$c?J$b._render._distanceForSort-J$a._render._distanceForSort:J$c}return 0},J$a._begainRenderElement=function(J$a,J$b,J$c){return!!J$b._beforeRender(J$a)},J$a._sortAlpha=function(J$a){J$b._cameraPosition=J$a,this._finalElements.sort(this._sortAlphaFunc)},J$a._sortOpaque=function(J$a){J$b._cameraPosition=J$a,this._finalElements.sort(this._sortOpaqueFunc)},J$a._preRender=function(J$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},J$a._render=function(J$a,J$b){for(var J$c,J$d,J$e,J$f,J$g,J$h,J$i=J$A.loopCount,J$j=this._scene,J$k=J$a.camera,J$l=(J$k.id,!1),J$m=0,J$n=this._finalElements.length;J$m<J$n;J$m++){var J$o,J$p,J$q,J$r=this._finalElements[J$m];if(null!=J$r._onPreRenderFunction&&J$r._onPreRenderFunction.call(J$r._sprite3D,J$a),0===J$r._type){if(J$a.owner=J$q=J$r._sprite3D,J$a.renderElement=J$r,J$q._preRenderUpdateComponents(J$a),J$o=J$r.renderObj,J$p=J$r._material,this._begainRenderElement(J$a,J$o,J$p)){if(J$c=J$o._getVertexBuffers(),!(J$e=(J$d=J$o._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[J$d.id]){this._errorRecord[J$d.id]=1;var J$u="vertexBuffer:"+("("+J$d._destroyed+","+J$d._released+","+J$d._referenceCount+","+J$d._buffer+")")+", material:"+(J$p?J$p.__className+"("+J$p._destroyed+","+J$p._released+")":"null")+", owner:"+(J$q?J$q.__className+"("+J$q._destroyed+","+J$q._activeInHierarchy+","+J$q._displayedInStage+")":"null")+", renderObj:"+(J$o?J$o.__className+"("+J$o._destroyed+","+J$o._released+","+J$o._referenceCount+")":"")+", parent:, url:"+(J$q?J$q.url:"")+", disposeStack:"+J$d.disposeStack;J$x.recordError("报错：unknown vertexDeclaration  "+J$u)}continue}if(J$l=(J$f=J$a._shader=J$p._getShader(J$j._shaderDefineValue,J$e.shaderDefineValue,J$q._shaderDefineValue)).bind()||J$i!==J$f._uploadLoopCount,J$c){if(J$f._uploadVertexBuffer!==J$c||J$l){for(var J$v=0;J$v<J$c.length;J$v++){var J$w=J$c[J$v];J$f.uploadAttributesX(J$w.vertexDeclaration.shaderValues.data,J$w)}J$f._uploadVertexBuffer=J$c}}else(J$f._uploadVertexBuffer!==J$d||J$l)&&(J$f.uploadAttributes(J$e.shaderValues.data,null),J$f._uploadVertexBuffer=J$d);(J$f._uploadScene!==J$j||J$l)&&(J$f.uploadSceneUniforms(J$j._shaderValues.data),J$f._uploadScene=J$j),(J$k!==J$f._uploadCamera||J$f._uploadSprite3D!==J$q||J$l)&&(J$f.uploadSpriteUniforms(J$q._shaderValues.data),J$f._uploadSprite3D=J$q),(J$k!==J$f._uploadCamera||J$l)&&(J$f.uploadCameraUniforms(J$k._shaderValues.data),J$f._uploadCamera=J$k),(J$f._uploadMaterial!==J$p||J$l)&&(J$p._upload(),J$f._uploadMaterial=J$p),J$g!==J$p?(J$p._setRenderStateBlendDepth(),J$p._setRenderStateFrontFace(J$b,J$q.transform),J$g=J$p,J$h=J$q):J$h!==J$q&&(J$p._setRenderStateFrontFace(J$b,J$q.transform),J$h=J$q),J$o._render(J$a),J$f._uploadLoopCount=J$i}J$q._postRenderUpdateComponents(J$a)}else if(2===J$r._type){J$r.renderObj;J$a.owner=J$q=J$r._sprite3D,J$a.renderElement=J$r,J$a._batchIndexStart=J$r._tempBatchIndexStart,J$a._batchIndexEnd=J$r._tempBatchIndexEnd,J$o=J$r.renderObj,J$p=J$r._material,this._begainRenderElement(J$a,J$o,J$p)&&(J$e=(J$d=J$o._getVertexBuffer(0)).vertexDeclaration,J$l=(J$f=J$a._shader=J$p._getShader(J$j._shaderDefineValue,J$e.shaderDefineValue,J$q._shaderDefineValue)).bind()||J$i!==J$f._uploadLoopCount,(J$f._uploadVertexBuffer!==J$d||J$l)&&(J$f.uploadAttributes(J$e.shaderValues.data,null),J$f._uploadVertexBuffer=J$d),(J$f._uploadScene!==J$j||J$l)&&(J$f.uploadSceneUniforms(J$j._shaderValues.data),J$f._uploadScene=J$j),(J$k!==J$f._uploadCamera||J$f._uploadSprite3D!==J$q||J$l)&&(J$f.uploadSpriteUniforms(J$q._shaderValues.data),J$f._uploadSprite3D=J$q),(J$k!==J$f._uploadCamera||J$l)&&(J$f.uploadCameraUniforms(J$k._shaderValues.data),J$f._uploadCamera=J$k),(J$f._uploadMaterial!==J$p||J$l)&&(J$p._upload(),J$f._uploadMaterial=J$p),J$g!==J$p?(J$p._setRenderStateBlendDepth(),J$p._setRenderStateFrontFace(J$b,J$q.transform),J$g=J$p,J$h=J$q):J$h!==J$q&&(J$p._setRenderStateFrontFace(J$b,J$q.transform),J$h=J$q),J$o._render(J$a),J$f._uploadLoopCount=J$i)}}},J$a._renderShadow=function(J$a,J$b){for(var J$c,J$d,J$e,J$f,J$g,J$h=J$A.loopCount,J$i=this._scene,J$j=J$a.camera,J$k=!1,J$l=0,J$m=this._finalElements.length;J$l<J$m;J$l++){var J$n,J$o,J$p,J$q=this._finalElements[J$l];0===J$q._type&&(J$a.owner=J$p=J$q._sprite3D,J$b||J$p._projectionViewWorldUpdateCamera===J$j&&J$p._projectionViewWorldUpdateLoopCount===J$A.loopCount||(J$p._render._renderUpdate(J$a._projectionViewMatrix),J$p._projectionViewWorldUpdateLoopCount=J$A.loopCount,J$p._projectionViewWorldUpdateCamera=J$j),J$a.renderElement=J$q,J$p._preRenderUpdateComponents(J$a),J$n=J$q.renderObj,J$o=J$q._material,this._begainRenderElement(J$a,J$n,null)&&(J$d=(J$c=J$n._getVertexBuffer(0)).vertexDeclaration,J$k=(J$e=J$a._shader=J$o._getShader(J$i._shaderDefineValue,J$d.shaderDefineValue,J$p._shaderDefineValue)).bind()||J$h!==J$e._uploadLoopCount,(J$e._uploadVertexBuffer!==J$c||J$k)&&(J$e.uploadAttributes(J$d.shaderValues.data,null),J$e._uploadVertexBuffer=J$c),(J$j!==J$e._uploadCamera||J$e._uploadSprite3D!==J$p||J$k)&&(J$e.uploadSpriteUniforms(J$p._shaderValues.data),J$e._uploadSprite3D=J$p),(J$j!==J$e._uploadCamera||J$k)&&(J$e.uploadCameraUniforms(J$j._shaderValues.data),J$e._uploadCamera=J$j),(J$e._uploadMaterial!==J$o||J$k)&&(J$o._upload(),J$e._uploadMaterial=J$o),J$e._uploadRenderElement,J$f!==J$o?(J$o._setRenderStateFrontFace(!1,J$p.transform),J$f=J$o,J$g=J$p):J$g!==J$p&&(J$o._setRenderStateFrontFace(!1,J$p.transform),J$g=J$p),J$n._render(J$a),J$e._uploadLoopCount=J$h),J$p._postRenderUpdateComponents(J$a))}},J$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},J$a._addRenderElement=function(J$a){this._renderElements.push(J$a),this._needSort=!0},J$a._addDynamicBatchElement=function(J$a){this._dynamicBatchCombineRenderElements.push(J$a)},J$o(0,J$a,"id",function(){return this._id}),J$b._uniqueIDCounter=0,J$b._cameraPosition=null,J$b}(),J$Y=function(){function J$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return J$n(J$a,"laya.d3.core.render.RenderState"),J$a.clientWidth=0,J$a.clientHeight=0,J$a}(),J$Z=function(){function J$g(J$a,J$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new J$_a(new J$gb,0),this._corners=[new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb],this._boundingBoxCenter=new J$gb,this._children=J$d(8),this._objects=[],this._tempBoundBoxCorners=[new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb],this._scene=J$a,this._currentDepth=J$b}J$n(J$g,"laya.d3.core.scene.OctreeNode");var J$a=J$g.prototype;return J$x.imps(J$a,{"laya.d3.core.scene.ITreeNode":!0}),J$a.init=function(J$a,J$b){var J$c=new J$gb,J$d=new J$gb;J$gb.scale(J$b,-.5,J$c),J$gb.scale(J$b,.5,J$d),J$gb.add(J$c,J$a,J$c),J$gb.add(J$d,J$a,J$d),this.exactBox=new J$Za(J$c,J$d),this.relaxBox=new J$Za(J$c,J$d)},J$a.addTreeNode=function(J$a){1===Collision.boxContainsBox(this._relaxBox,J$a.boundingBox)?this.addNodeDown(J$a,0):this.addObject(J$a)},J$a.addChild=function(J$a){var J$b=this._children[J$a];if(null==J$b){J$b=new J$g(this._scene,this._currentDepth+1),(this._children[J$a]=J$b)._parent=this,J$gb.subtract(this._exactBox.max,this._exactBox.min,J$g.tempSize),J$gb.multiply(J$g.tempSize,J$g._octreeSplit[J$a],J$g.tempCenter),J$gb.add(this._exactBox.min,J$g.tempCenter,J$g.tempCenter),J$gb.scale(J$g.tempSize,.25,J$g.tempSize);var J$c=new J$gb,J$d=new J$gb;J$gb.subtract(J$g.tempCenter,J$g.tempSize,J$c),J$gb.add(J$g.tempCenter,J$g.tempSize,J$d),J$b.exactBox=new J$Za(J$c,J$d),J$gb.scale(J$g.tempSize,J$g.relax,J$g.tempSize);var J$e=new J$gb,J$f=new J$gb;J$gb.subtract(J$g.tempCenter,J$g.tempSize,J$e),J$gb.add(J$g.tempCenter,J$g.tempSize,J$f),J$b.relaxBox=new J$Za(J$e,J$f)}return J$b},J$a.addObject=function(J$a){(J$a._treeNode=this)._objects.push(J$a)},J$a.removeObject=function(J$a){if(J$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var J$b=this._objects.indexOf(J$a);return-1!==J$b&&(this._objects.splice(J$b,1),!0)},J$a.clearObject=function(){this._objects.length=0},J$a.addNodeUp=function(J$a,J$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,J$a.boundingBox)?this._parent.addNodeUp(J$a,J$b-1):this.addNodeDown(J$a,J$b)},J$a.addNodeDown=function(J$a,J$b){if(J$b<this._scene.treeLevel){var J$c=this.inChildIndex(J$a.boundingBoxCenter),J$d=this.addChild(J$c);1===Collision.boxContainsBox(J$d._relaxBox,J$a.boundingBox)?J$d.addNodeDown(J$a,++J$b):this.addObject(J$a)}else this.addObject(J$a)},J$a.inChildIndex=function(J$a){return 4*(J$a.z<this._boundingBoxCenter.z?0:1)+2*(J$a.y<this._boundingBoxCenter.y?0:1)+(J$a.x<this._boundingBoxCenter.x?0:1)},J$a.updateObject=function(J$a){1===Collision.boxContainsBox(this._relaxBox,J$a.boundingBox)?(this.removeObject(J$a),J$a._treeNode=null,this.addNodeDown(J$a,this._currentDepth)):this._parent&&(this.removeObject(J$a),J$a._treeNode=null,this._parent.addNodeUp(J$a,this._currentDepth-1))},J$a.cullingObjects=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g=0,J$h=0,J$i=0,J$j=this._scene._dynamicBatchManager;for(J$g=0,J$f=this._objects.length;J$g<J$f;J$g++){var J$k=this._objects[J$g];if(J$I.isVisible(J$k._owner.layer.mask)&&J$k.enable){if(J$b&&(J$A.treeSpriteCollision+=1,0===J$a.containsBoundSphere(J$k.boundingSphere)))continue;J$k._renderUpdate(J$e),J$k._distanceForSort=J$gb.distance(J$k.boundingSphere.center,J$d)+J$k.sortingFudge;var J$l=J$k._renderElements;for(J$h=0,J$i=J$l.length;J$h<J$i;J$h++){var J$m=J$l[J$h],J$n=J$m._staticBatch;if(J$n&&J$n._material===J$m._material)J$n._addBatchRenderElement(J$m);else{var J$o=J$m.renderObj;J$o.triangleCount<10&&1===J$o._vertexBufferCount&&J$o._getIndexBuffer()&&J$m._material.renderQueue<2&&J$m._canDynamicBatch&&!J$k._owner.isStatic?J$j._addPrepareRenderElement(J$m):this._scene.getRenderQueue(J$m._material.renderQueue)._addRenderElement(J$m)}}}}for(J$g=0;J$g<8;J$g++){var J$p=this._children[J$g];if(null!=J$p){var J$q=J$b;if(J$b){var J$r=J$a.containsBoundBox(J$p._relaxBox);if(J$A.treeNodeCollision+=1,0===J$r)continue;J$q=2===J$r}J$p.cullingObjects(J$a,J$q,J$c,J$d,J$e)}}},J$a.cullingShadowObjects=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g=0,J$h=0,J$i=0;this._scene._dynamicBatchManager;for(J$g=0,J$f=this._objects.length;J$g<J$f;J$g++){var J$j=this._objects[J$g];if(J$j.castShadow&&J$I.isVisible(J$j._owner.layer.mask)&&J$j.enable){if(J$c&&0===J$a[0].containsBoundSphere(J$j.boundingSphere))continue;for(var J$k=1,J$l=J$a.length;J$k<J$l;J$k++){var J$m=J$b[J$k-1];if(0!==J$a[J$k].containsBoundSphere(J$j.boundingSphere)){var J$n=J$j._renderElements;for(J$h=0,J$i=J$n.length;J$h<J$i;J$h++)J$m._addRenderElement(J$n[J$h])}}}}for(J$g=0;J$g<8;J$g++){var J$o=this._children[J$g];if(null!=J$o){var J$p=J$c;if(J$c){var J$q=J$a[0].containsBoundBox(J$o._relaxBox);if(0===J$q)continue;J$p=2===J$q}J$o.cullingShadowObjects(J$a,J$b,J$p,J$d,J$e)}}},J$a.cullingShadowObjectsOnePSSM=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h=J$b[0],J$i=0,J$j=0,J$k=0;for(J$i=0,J$g=this._objects.length;J$i<J$g;J$i++){var J$l=this._objects[J$i];if(J$l.castShadow&&J$I.isVisible(J$l._owner.layer.mask)&&J$l.enable){if(J$d&&0===J$a.containsBoundSphere(J$l.boundingSphere))continue;J$l._renderUpdate(J$c);var J$m=J$l._renderElements;for(J$j=0,J$k=J$m.length;J$j<J$k;J$j++)J$h._addRenderElement(J$m[J$j])}}for(J$i=0;J$i<8;J$i++){var J$n=this._children[J$i];if(null!=J$n){var J$o=J$d;if(J$d){var J$p=J$a.containsBoundBox(J$n._relaxBox);if(0===J$p)continue;J$o=2===J$p}J$n.cullingShadowObjectsOnePSSM(J$a,J$b,J$c,J$o,J$e,J$f)}}},J$a.renderBoudingBox=function(J$a){this._renderBoudingBox(J$a);for(var J$b=0;J$b<8;++J$b){var J$c=this._children[J$b];J$c&&J$c.renderBoudingBox(J$a)}},J$a.buildAllChild=function(J$a){if(J$a<this._scene.treeLevel)for(var J$b=0;J$b<8;J$b++){this.addChild(J$b).buildAllChild(J$a+1)}},J$a._renderBoudingBox=function(J$a){},J$o(0,J$a,"exactBox",function(){return this._exactBox},function(J$a){this._exactBox=J$a,J$gb.add(J$a.min,J$a.max,this._boundingBoxCenter),J$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),J$o(0,J$a,"relaxBox",function(){return this._relaxBox},function(J$a){(this._relaxBox=J$a).getCorners(this._corners),J$_a.createfromPoints(this._corners,this._boundingSphere)}),J$g.debugMode=!1,J$g.relax=1.15,J$g.CHILDNUM=8,J$l(J$g,["tempVector0",function(){return this.tempVector0=new J$gb},"tempSize",function(){return this.tempSize=new J$gb},"tempCenter",function(){return this.tempCenter=new J$gb},"_octreeSplit",function(){return this._octreeSplit=[new J$gb(.25,.25,.25),new J$gb(.75,.25,.25),new J$gb(.25,.75,.25),new J$gb(.75,.75,.25),new J$gb(.25,.25,.75),new J$gb(.75,.25,.75),new J$gb(.25,.75,.75),new J$gb(.75,.75,.75)]}]),J$g}(),J$$=(function(){function J$a(){}J$n(J$a,"laya.d3.core.scene.SceneManager")}(),function(){function J$a(J$a,J$b,J$c,J$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===J$a&&(J$a=1),void 0===J$b&&(J$b=1),void 0===J$c&&(J$c=1),void 0===J$d&&(J$d=1),this._r=J$a,this._g=J$b,this._b=J$c,this._a=J$d}return J$n(J$a,"laya.d3.core.trail.module.Color",null,"Color$1"),J$a.prototype.cloneTo=function(J$a){J$a._r=this._r,J$a._g=this._g,J$a._b=this._b,J$a._a=this._a},J$l(J$a,["RED",function(){return this.RED=new J$a(1,0,0,1)},"GREEN",function(){return this.GREEN=new J$a(0,1,0,1)},"BLUE",function(){return this.BLUE=new J$a(0,0,1,1)},"CYAN",function(){return this.CYAN=new J$a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new J$a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new J$a(1,0,1,1)},"GRAY",function(){return this.GRAY=new J$a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new J$a(1,1,1,1)},"BLACK",function(){return this.BLACK=new J$a(0,0,0,1)}]),J$a}()),J$_=(function(){function J$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}J$n(J$a,"laya.d3.core.trail.module.Gradient");var J$b=J$a.prototype;J$b.setKeys=function(J$a,J$b){var J$c,J$d;this._colorKeys=J$a;for(var J$e=this.index=0;J$e<J$a.length;J$e++){var J$f=(J$c=J$a[J$e]).color;this._colorKeyData[this.index++]=J$f._r,this._colorKeyData[this.index++]=J$f._g,this._colorKeyData[this.index++]=J$f._b,this._colorKeyData[this.index++]=J$c.time}this._alphaKeys=J$b;for(var J$g=this.index=0;J$g<J$b.length;J$g++)J$d=J$b[J$g],this._alphaKeyData[this.index++]=J$d.alpha,this._alphaKeyData[this.index++]=J$d.time},J$b.cloneTo=function(J$a){var J$b=0,J$c=0,J$d=this.colorKeys,J$e=[];for(J$b=0,J$c=J$d.length;J$b<J$c;J$b++){var J$f=new J$s;J$d[J$b].cloneTo(J$f),J$e.push(J$f)}var J$g=this.alphaKeys,J$h=[];for(J$b=0,J$c=J$g.length;J$b<J$c;J$b++){var J$i=new J$_;J$g[J$b].cloneTo(J$i),J$h.push(J$i)}J$a.setKeys(J$e,J$h)},J$o(0,J$b,"mode",function(){return this._mode},function(J$a){this._mode=J$a}),J$o(0,J$b,"colorKeys",function(){return this._colorKeys},function(J$a){this._colorKeys=J$a;for(var J$b=this.index=0;J$b<J$a.length;J$b++){var J$c=J$a[J$b],J$d=J$c.color;this._colorKeyData[this.index++]=J$d._r,this._colorKeyData[this.index++]=J$d._g,this._colorKeyData[this.index++]=J$d._b,this._colorKeyData[this.index++]=J$c.time}}),J$o(0,J$b,"alphaKeys",function(){return this._alphaKeys},function(J$a){this._alphaKeys=J$a;for(var J$b=this.index=0;J$b<J$a.length;J$b++){var J$c=J$a[J$b];this._alphaKeyData[this.index++]=J$c.alpha,this._alphaKeyData[this.index++]=J$c.time}})}(),function(){function J$a(J$a,J$b){this._alpha=NaN,this._time=NaN,void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),this._alpha=J$a,this._time=J$b}J$n(J$a,"laya.d3.core.trail.module.GradientAlphaKey");var J$b=J$a.prototype;return J$b.cloneTo=function(J$a){J$a.alpha=this.alpha,J$a.time=this.time},J$o(0,J$b,"alpha",function(){return this._alpha},function(J$a){this._alpha=J$a}),J$o(0,J$b,"time",function(){return this._time},function(J$a){this._time=J$a}),J$a}()),J$s=function(){function J$a(J$a,J$b){this._color=null,this._time=NaN,void 0===J$b&&(J$b=0),this._color=J$a||new J$$,this._time=J$b}J$n(J$a,"laya.d3.core.trail.module.GradientColorKey");var J$b=J$a.prototype;return J$b.cloneTo=function(J$a){this.color.cloneTo(J$a.color),J$a.time=this.time},J$o(0,J$b,"color",function(){return this._color},function(J$a){this._color=J$a}),J$o(0,J$b,"time",function(){return this._time},function(J$a){this._time=J$a}),J$a}(),J$t=(function(){function J$a(){}J$n(J$a,"laya.d3.core.trail.module.GradientMode"),J$a.Blend=0,J$a.Fixed=1}(),function(){function J$a(){}J$n(J$a,"laya.d3.core.trail.module.TextureMode"),J$a.Stretch=0,J$a.Tile=1}(),function(){function J$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}J$n(J$a,"laya.d3.core.trail.module.TrailKeyFrame"),J$a.prototype.cloneTo=function(J$a){J$a.time=this.time,J$a.inTangent=this.inTangent,J$a.outTangent=this.outTangent,J$a.value=this.value}}(),function(){function J$b(J$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new J$gb,this._curPosition=new J$gb,this._delVector3=new J$gb,this._lastFixedVertexPosition=new J$gb,this._pointAtoBVector3=new J$gb,this._pointA=new J$gb,this._pointB=new J$gb,this._owner=J$a,this._id=J$b.renderElementCount++,0==this._id?J$a._owner.transform.position.cloneTo(this._lastPosition):J$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new J$Ob(J$t.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new J$Ob(J$t.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}J$n(J$b,"laya.d3.core.trail.TrailRenderElement");var J$a=J$b.prototype;J$x.imps(J$a,{"laya.d3.core.render.IRenderable":!0}),J$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},J$a._addTrailByFirstPosition=function(J$a,J$b){J$gb.subtract(J$b,J$a,this._delVector3),J$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),J$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),J$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(J$a),J$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},J$a._addTrailByNextPosition=function(J$a){J$gb.subtract(J$a,this._lastFixedVertexPosition,this._delVector3),J$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),J$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),J$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=J$gb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=J$sa.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(J$a),J$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(J$a),this._virtualVerticesCount=2)},J$a._updateVerticesByPosition=function(J$a){this._pointe=J$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},J$a._updateVertexBuffer2=function(){var J$a,J$b=0,J$c=0,J$d=0;for(J$d=0,J$a=(this._verticesCount+this._virtualVerticesCount)/2;J$d<J$a;J$d++)J$c=0==this._owner.textureMode?(this._VerticesToTailLength[J$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[J$d],this._vertices2[J$b++]=1-J$c,this._vertices2[J$b++]=1-J$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},J$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},J$a._updateDisappear=function(){var J$a,J$b=0;for(J$b=this._curDisappearIndex,J$a=(this._verticesCount+this._virtualVerticesCount)/2;J$b<J$a;J$b++)this._owner._curtime-this._everyGroupVertexBirthTime[J$b]>=this._owner.time+J$sa.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},J$a._beforeRender=function(J$a){return this._camera=J$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),J$gb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},J$a._render=function(J$a){this._isDead||(J$F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),J$A.drawCall++,J$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},J$a._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),0===J$a?this._vertexBuffer1:1===J$a?this._vertexBuffer2:null},J$a._getVertexBuffers=function(){return this._vertexBuffers},J$a._getIndexBuffer=function(){return null},J$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},J$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},J$o(0,J$a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),J$o(0,J$a,"triangleCount",function(){return 0}),J$b.renderElementCount=0}(),function(){function J$a(){}J$n(J$a,"laya.d3.core.trail.VertexTrail");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration1}),J$o(1,J$a,"vertexDeclaration1",function(){return J$a._vertexDeclaration1}),J$o(1,J$a,"vertexDeclaration2",function(){return J$a._vertexDeclaration2}),J$l(J$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new J$fa(32,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",41),new J$ga(24,"single",33),new J$ga(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new J$fa(4,[new J$ga(0,"single",38)])}]),J$a}()),J$aa=function(){function J$w(J$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=J$a}J$n(J$w,"laya.d3.graphics.DynamicBatch");var J$a=J$w.prototype;return J$x.imps(J$a,{"laya.d3.core.render.IRenderable":!0}),J$a._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),0===J$a?this._vertexBuffer:null},J$a._getIndexBuffer=function(){return this._indexBuffer},J$a._getCombineRenderElementFromPool=function(J$a,J$b,J$c){var J$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return J$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=J$d=new J$W,J$d._sprite3D=new J$Xb),J$d._sprite3D._render._renderUpdate(J$c),J$d},J$a._getRenderElement=function(J$a,J$b,J$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*J$w.maxVertexCount),this._indexDatas=new Uint16Array(J$w.maxIndexCount),this._vertexBuffer=J$Ob.create(this._vertexDeclaration,J$w.maxVertexCount,35048),this._indexBuffer=J$Nb.create("ushort",J$w.maxIndexCount,35048));for(var J$d=this._merageElements.length=0,J$e=0,J$f=0,J$g=this._combineRenderElements.length;J$f<J$g;J$f++){var J$h=this._combineRenderElements[J$f],J$i=J$h.getDynamicBatchBakedVertexs(0),J$j=J$h.getBakedIndices(),J$k=J$h._sprite3D.transform._isFrontFaceInvert,J$l=J$d/(this._vertexDeclaration.vertexStride/4),J$m=J$e,J$n=J$m+J$j.length;J$h._tempBatchIndexStart=J$m,J$h._tempBatchIndexEnd=J$n,this._indexDatas.set(J$j,J$e);var J$o=0;if(J$k)for(J$o=J$m;J$o<J$n;J$o+=3){this._indexDatas[J$o]=J$l+this._indexDatas[J$o];var J$p=this._indexDatas[J$o+1],J$q=this._indexDatas[J$o+2];this._indexDatas[J$o+1]=J$l+J$q,this._indexDatas[J$o+2]=J$l+J$p}else for(J$o=J$m;J$o<J$n;J$o+=3)this._indexDatas[J$o]=J$l+this._indexDatas[J$o],this._indexDatas[J$o+1]=J$l+this._indexDatas[J$o+1],this._indexDatas[J$o+2]=J$l+this._indexDatas[J$o+2];J$e+=J$j.length,this._vertexDatas.set(J$i,J$d),J$d+=J$i.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),J$f=this._combineRenderElementPoolIndex=0,J$g=this._materials.length;J$f<J$g;J$f++){var J$r=this._getCombineRenderElementFromPool(J$a,J$b,J$c);J$r._type=2,J$r._staticBatch=null;var J$u=(J$r.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[J$f]]._tempBatchIndexStart,J$v=J$f+1===this._materialToRenderElementsOffsets.length?J$e:this._combineRenderElements[this._materialToRenderElementsOffsets[J$f+1]]._tempBatchIndexStart;J$r._tempBatchIndexStart=J$u,J$r._tempBatchIndexEnd=J$v,J$r._material=this._materials[J$f],this._merageElements.push(J$r)}},J$a._addCombineRenderObjTest=function(J$a){var J$b=J$a.renderObj,J$c=this._currentCombineIndexCount+J$b._getIndexBuffer().indexCount,J$d=this._currentCombineVertexCount+J$b._getVertexBuffer().vertexCount;return!(J$w.maxVertexCount<J$d||J$w.maxIndexCount<J$c)},J$a._addCombineRenderObj=function(J$a){var J$b=J$a.renderObj;this._combineRenderElements.push(J$a),this._currentCombineIndexCount=this._currentCombineIndexCount+J$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+J$b._getVertexBuffer().vertexCount},J$a._addCombineMaterial=function(J$a){this._materials.push(J$a)},J$a._addMaterialToRenderElementOffset=function(J$a){this._materialToRenderElementsOffsets.push(J$a)},J$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},J$a._addToRenderQueue=function(J$a,J$b,J$c,J$d){this._getRenderElement(J$b,J$c,J$d);for(var J$e=0,J$f=this._materials.length;J$e<J$f;J$e++)J$a.getRenderQueue(this._materials[J$e].renderQueue)._addDynamicBatchElement(this._merageElements[J$e])},J$a._beforeRender=function(J$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J$a._render=function(J$a){var J$b=J$a._batchIndexEnd-J$a._batchIndexStart;J$F.mainContext.drawElements(4,J$b,5123,2*J$a._batchIndexStart),J$A.drawCall++,J$A.trianglesFaces+=J$b/3},J$a._getVertexBuffers=function(){return null},J$o(0,J$a,"_vertexBufferCount",function(){return 1}),J$o(0,J$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J$o(0,J$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),J$w.maxVertexCount=2e4,J$w.maxIndexCount=4e4,J$w.maxCombineTriangleCount=10,J$w}(),J$ba=function(){function J$w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}J$n(J$w,"laya.d3.graphics.DynamicBatchManager");var J$a=J$w.prototype;return J$a.getDynamicBatch=function(J$a,J$b){var J$c,J$d=J$a.id.toString()+J$b;return this._dynamicBatches[J$d]?J$c=this._dynamicBatches[J$d]:this._dynamicBatches[J$d]=J$c=new J$aa(J$a),J$c},J$a._garbageCollection=function(){for(var J$a in this._dynamicBatches)0===this._dynamicBatches[J$a].combineRenderElementsCount&&delete this._dynamicBatches[J$a]},J$a._addPrepareRenderElement=function(J$a){this._prepareDynamicBatchCombineElements.push(J$a)},J$a._finishCombineDynamicBatch=function(J$a){var J$b,J$c,J$d;this._prepareDynamicBatchCombineElements.sort(J$w._sortPrepareDynamicBatch);for(var J$e,J$f,J$g,J$h,J$i,J$j=-1,J$k=!0,J$l=0,J$m=-1,J$n=0,J$o=this._prepareDynamicBatchCombineElements.length;J$n<J$o;J$n++){var J$p=(J$f=this._prepareDynamicBatchCombineElements[J$n]).renderObj._getVertexBuffer(0).vertexDeclaration,J$q=J$c!==J$p;J$q&&(J$l=0,J$c=J$p);var J$r=J$l!==J$j;if(J$r&&(J$j=J$l),(J$q||J$r)&&(J$g=this.getDynamicBatch(J$p,J$l),J$b=null),J$k)if(J$g._addCombineRenderObjTest(J$f)){if(J$b!==(J$e=J$f._material))J$h&&(J$a.getRenderQueue(J$i._material.renderQueue)._addRenderElement(J$i),J$i=J$h=null,J$m=-1),J$h=J$e,J$m=J$g.combineRenderElementsCount,J$i=J$f,J$b=J$e;else if(J$h){var J$u=J$i.renderObj,J$v=J$f.renderObj;J$u._getVertexBuffer().vertexCount+J$v._getVertexBuffer().vertexCount>J$aa.maxVertexCount||J$u._getIndexBuffer().indexCount+J$v._getIndexBuffer().indexCount>J$aa.maxIndexCount?(J$a.getRenderQueue(J$i._material.renderQueue)._addRenderElement(J$i),J$h=J$e,J$m=J$g.combineRenderElementsCount,J$i=J$f):(J$g._addCombineMaterial(J$h),J$g._addMaterialToRenderElementOffset(J$m),J$g._addCombineRenderObj(J$i),J$i=J$h=null,J$m=-1,J$g._addCombineRenderObj(J$f))}else J$g._addCombineRenderObj(J$f);J$k=!0}else J$h&&(J$a.getRenderQueue(J$i._material.renderQueue)._addRenderElement(J$i),J$i=J$h=null,J$m=-1),J$l++,J$k=!1;else J$d=this._prepareDynamicBatchCombineElements[J$n-1],J$g._addMaterialToRenderElementOffset(J$g.combineRenderElementsCount),J$b=J$d._material,J$g._addCombineMaterial(J$b),J$g._addCombineRenderObj(J$d),J$k=!0,J$b!==(J$e=J$f._material)?(J$h=J$e,J$m=J$g.combineRenderElementsCount,J$i=J$f):J$g._addCombineRenderObj(J$f),J$b=J$e}J$h&&(J$a.getRenderQueue(J$i._material.renderQueue)._addRenderElement(J$i),J$i=J$h=null,J$m=-1),this._prepareDynamicBatchCombineElements.length=0},J$a._clearRenderElements=function(){for(var J$a in this._dynamicBatches)this._dynamicBatches[J$a]._clearRenderElements()},J$a._addToRenderQueue=function(J$a,J$b,J$c,J$d){for(var J$e in this._dynamicBatches){var J$f=this._dynamicBatches[J$e];0<J$f.combineRenderElementsCount&&J$f._addToRenderQueue(J$a,J$b,J$c,J$d)}},J$a.dispose=function(){this._dynamicBatches=null},J$w._sortPrepareDynamicBatch=function(J$a,J$b){return J$a._mainSortID-J$b._mainSortID},J$w}(),J$ca=function(){function J$a(){}return J$n(J$a,"laya.d3.graphics.FrustumCulling"),J$a.renderShadowObjectCulling=function(J$a,J$b,J$c,J$d,J$e){var J$f=0,J$g=0,J$h=0,J$i=0;for(J$f=0,J$h=J$c.length;J$f<J$h;J$f++){var J$j=J$c[J$f];J$j&&J$j._clearRenderElements()}var J$k,J$l,J$m,J$n=J$a._cullingRenders;if(1<J$e){for(J$f=0,J$h=J$a._cullingRendersLength;J$f<J$h;J$f++)if((J$k=J$n[J$f]).castShadow&&J$I.isVisible(J$k._owner.layer.mask)&&J$k.enable)for(var J$o=1,J$p=J$b.length;J$o<J$p;J$o++)if(J$l=J$c[J$o-1],0!==J$b[J$o].containsBoundSphere(J$k.boundingSphere))for(J$g=0,J$i=(J$m=J$k._renderElements).length;J$g<J$i;J$g++)J$l._addRenderElement(J$m[J$g])}else for(J$f=0,J$h=J$a._cullingRendersLength;J$f<J$h;J$f++)if((J$k=J$n[J$f]).castShadow&&J$I.isVisible(J$k._owner.layer.mask)&&J$k.enable&&0!==J$b[0].containsBoundSphere(J$k.boundingSphere))for(J$k._renderUpdate(J$d),J$l=J$c[0],J$g=0,J$i=(J$m=J$k._renderElements).length;J$g<J$i;J$g++)J$l._addRenderElement(J$m[J$g])},J$a.renderShadowObjectCullingOctree=function(J$a,J$b,J$c,J$d,J$e){for(var J$f=0,J$g=J$c.length;J$f<J$g;J$f++){var J$h=J$c[J$f];J$h&&J$h._clearRenderElements()}1<J$e?J$a.treeRoot.cullingShadowObjects(J$b,J$c,!0,0,J$a):J$a.treeRoot.cullingShadowObjectsOnePSSM(J$b[0],J$c,J$d,!0,0,J$a)},J$a.renderObjectCulling=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=0,J$h=0,J$i=0,J$j=0,J$k=J$b._quenes,J$l=J$b._dynamicBatchManager,J$m=J$b._cullingRenders;for(J$g=0,J$h=J$k.length;J$g<J$h;J$g++){var J$n=J$k[J$g];J$n&&J$n._clearRenderElements()}var J$o=J$da._staticBatchManagers;for(J$g=0,J$h=J$o.length;J$g<J$h;J$g++)J$o[J$g]._clearRenderElements();J$l._clearRenderElements();var J$p=J$c.transform.position;for(J$g=0,J$h=J$b._cullingRendersLength;J$g<J$h;J$g++){var J$q=J$m[J$g];if(J$I.isVisible(J$q._owner.layer.mask)&&J$q.enable&&0!==J$a.containsBoundSphere(J$q.boundingSphere)&&J$q._renderUpdate(J$f)){J$q._distanceForSort=J$gb.distance(J$q.boundingSphere.center,J$p)+J$q.sortingFudge;var J$r=J$q._renderElements;for(J$i=0,J$j=J$r.length;J$i<J$j;J$i++){var J$u=J$r[J$i],J$v=J$u._staticBatch;if(J$v&&J$v._material===J$u._material)J$v._addBatchRenderElement(J$u);else{var J$w=J$u.renderObj;J$w.triangleCount<10&&1===J$w._vertexBufferCount&&J$w._getIndexBuffer()&&J$u._material.renderQueue<2&&J$u._canDynamicBatch&&!J$q._owner.isStatic?J$l._addPrepareRenderElement(J$u):J$b.getRenderQueue(J$u._material.renderQueue)._addRenderElement(J$u)}}}}for(J$g=0,J$h=J$o.length;J$g<J$h;J$g++)J$o[J$g]._addToRenderQueue(J$b,J$d,J$e,J$f);J$l._finishCombineDynamicBatch(J$b),J$l._addToRenderQueue(J$b,J$d,J$e,J$f)},J$a.renderObjectCullingOctree=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=0,J$h=0,J$i=J$b._quenes,J$j=J$b._dynamicBatchManager;for(J$g=0,J$h=J$i.length;J$g<J$h;J$g++){var J$k=J$i[J$g];J$k&&J$k._clearRenderElements()}var J$l=J$da._staticBatchManagers;for(J$g=0,J$h=J$l.length;J$g<J$h;J$g++)J$l[J$g]._clearRenderElements();for(J$j._clearRenderElements(),J$b._cullingRenders.length=0,J$b.treeRoot.cullingObjects(J$a,!0,0,J$c.transform.position,J$f),J$g=0,J$h=J$l.length;J$g<J$h;J$g++)J$l[J$g]._addToRenderQueue(J$b,J$d,J$e,J$f);J$j._finishCombineDynamicBatch(J$b),J$j._addToRenderQueue(J$b,J$d,J$e,J$f)},J$a.renderObjectCullingNoBoundFrustum=function(J$a,J$b,J$c,J$d,J$e){var J$f=0,J$g=0,J$h=0,J$i=0,J$j=J$a._quenes,J$k=J$a._dynamicBatchManager,J$l=J$a._cullingRenders;for(J$f=0,J$g=J$j.length;J$f<J$g;J$f++){var J$m=J$j[J$f];J$m&&J$m._clearRenderElements()}var J$n=J$da._staticBatchManagers;for(J$f=0,J$g=J$n.length;J$f<J$g;J$f++)J$n[J$f]._clearRenderElements();J$k._clearRenderElements();var J$o=J$b.transform.position;for(J$f=0,J$g=J$a._cullingRendersLength;J$f<J$g;J$f++){var J$p=J$l[J$f];if(J$I.isVisible(J$p._owner.layer.mask)&&J$p.enable){J$p._renderUpdate(J$e),J$p._distanceForSort=J$gb.distance(J$p.boundingSphere.center,J$o)+J$p.sortingFudge;var J$q=J$p._renderElements;for(J$h=0,J$i=J$q.length;J$h<J$i;J$h++){var J$r=J$q[J$h],J$u=J$r._staticBatch;if(J$u&&J$u._material===J$r._material)J$u._addBatchRenderElement(J$r);else{var J$v=J$r.renderObj;J$v.triangleCount<10&&1===J$v._vertexBufferCount&&J$v._getIndexBuffer()&&J$r._material.renderQueue<2&&J$r._canDynamicBatch&&!J$p._owner.isStatic?J$k._addPrepareRenderElement(J$r):J$a.getRenderQueue(J$r._material.renderQueue)._addRenderElement(J$r)}}}}for(J$f=0,J$g=J$n.length;J$f<J$g;J$f++)J$n[J$f]._addToRenderQueue(J$a,J$c,J$d,J$e);J$k._finishCombineDynamicBatch(J$a),J$k._addToRenderQueue(J$a,J$c,J$d,J$e)},J$a}(),J$da=function(){function J$f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}J$n(J$f,"laya.d3.graphics.StaticBatchManager");var J$a=J$f.prototype;return J$a._finishInit=function(){for(var J$a in this._staticBatches)this._staticBatches[J$a]._finishInit();this._initBatchRenderElements.length=0},J$a._initStaticBatchs=function(J$a){throw new Error("StaticBatchManager:must override this function.")},J$a._addInitBatchSprite=function(J$a){for(var J$b=J$a._render._renderElements,J$c=0,J$d=J$b.length;J$c<J$d;J$c++)this._initBatchRenderElements.push(J$b[J$c])},J$a._clearRenderElements=function(){for(var J$a in this._staticBatches)this._staticBatches[J$a]._clearRenderElements()},J$a._garbageCollection=function(J$a){var J$b=J$a._staticBatch,J$c=J$b._initBatchRenderElements,J$d=J$c.indexOf(J$a);J$c.splice(J$d,1),0===J$c.length&&(J$b.dispose(),delete this._staticBatches[J$b._key])},J$a._addToRenderQueue=function(J$a,J$b,J$c,J$d){for(var J$e in this._staticBatches){var J$f=this._staticBatches[J$e];0<J$f._batchRenderElements.length&&J$f._updateToRenderQueue(J$a,J$d)}},J$a.dispose=function(){this._staticBatches=null},J$f._addToStaticBatchQueue=function(J$a){J$a instanceof laya.d3.core.RenderableSprite3D&&J$a._addToInitStaticBatchManager();for(var J$b=0,J$c=J$a.numChildren;J$b<J$c;J$b++)J$f._addToStaticBatchQueue(J$a._childs[J$b])},J$f.combine=function(J$a,J$b){var J$c,J$d=0,J$e=0;if(J$b)for(J$d=0,J$e=J$b.length;J$d<J$e;J$d++){J$b[J$d]._addToInitStaticBatchManager()}else J$a&&J$f._addToStaticBatchQueue(J$a);for(J$d=0,J$e=J$f._staticBatchManagers.length;J$d<J$e;J$d++)(J$c=J$f._staticBatchManagers[J$d])._initStaticBatchs(J$a),J$c._finishInit()},J$f._staticBatchManagers=[],J$f}(),J$ea=function(){function J$a(J$a,J$b,J$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=J$a,this._manager=J$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=J$c}J$n(J$a,"laya.d3.graphics.StaticBatch");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),J$b._binarySearch=function(J$a){for(var J$b=0,J$c=this._batchRenderElements.length-1,J$d=0;J$b<=J$c;)J$d=Math.floor((J$b+J$c)/2),this._compareBatchRenderElement(this._batchRenderElements[J$d],J$a)?J$c=J$d-1:J$b=J$d+1;return J$b},J$b._compareBatchRenderElement=function(J$a,J$b){throw new Error("StaticBatch:must override this function.")},J$b._getVertexDecLightMap=function(J$a){return J$a===J$Na.vertexDeclaration?J$Ia.vertexDeclaration:J$a===J$Ma.vertexDeclaration?J$Ha.vertexDeclaration:J$a===J$Ba.vertexDeclaration?J$wa.vertexDeclaration:J$a===J$Ra.vertexDeclaration?null:J$a===J$pa.vertexDeclaration?J$qa.vertexDeclaration:J$a===J$Pa.vertexDeclaration?J$Ka.vertexDeclaration:J$a===J$Fa.vertexDeclaration?J$Ga.vertexDeclaration:J$a===J$Oa.vertexDeclaration?J$Ja.vertexDeclaration:J$a===J$Ma.vertexDeclaration?J$Ha.vertexDeclaration:J$a===J$Ca.vertexDeclaration?J$xa.vertexDeclaration:J$a===J$Ra.vertexDeclaration?null:J$a===J$pa.vertexDeclaration?J$qa.vertexDeclaration:J$a===J$Qa.vertexDeclaration?J$La.vertexDeclaration:J$a===J$Fa.vertexDeclaration?J$Ga.vertexDeclaration:J$a},J$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},J$b._addBatchRenderElement=function(J$a){this._batchRenderElements.splice(this._binarySearch(J$a),0,J$a)},J$b._updateToRenderQueue=function(J$a,J$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(J$a.getRenderQueue(this._material.renderQueue)._renderElements,J$a,J$b)},J$b._getRenderElement=function(J$a,J$b,J$c){throw new Error("StaticBatch:must override this function.")},J$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},J$b._clearRenderElements=function(){this._batchRenderElements.length=0},J$b.dispose=function(){},J$b._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),null},J$b._getIndexBuffer=function(){return null},J$b._beforeRender=function(J$a){return!0},J$b._render=function(J$a){},J$b._getVertexBuffers=function(){return null},J$o(0,J$b,"_vertexBufferCount",function(){return 1}),J$o(0,J$b,"triangleCount",function(){return 0}),J$a.combine=function(J$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),J$da.combine(J$a)},J$a.maxBatchVertexCount=65535,J$a}(),J$fa=function(){function J$g(J$a,J$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++J$g._uniqueIDCounter,this._id>J$g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",J$g.maxVertexDeclaration);this._shaderValues=new J$mb,this._vertexElementsDic={},this._vertexStride=J$a,this._vertexElements=J$b;for(var J$c=0;J$c<J$b.length;J$c++){var J$d=J$b[J$c],J$e=J$d.elementUsage;this._vertexElementsDic[J$e]=J$d;var J$f=[J$g._getTypeSize(J$d.elementFormat)/4,5126,!1,this._vertexStride,J$d.offset];switch(this._shaderValues.setValue(J$e,J$f),J$e){case 1:this._addShaderDefine(J$Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(J$Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(J$Ab.SHADERDEFINE_UV1)}}}J$n(J$g,"laya.d3.graphics.VertexDeclaration");var J$a=J$g.prototype;return J$a._addShaderDefine=function(J$a){this._shaderDefineValue|=J$a},J$a._removeShaderDefine=function(J$a){this._shaderDefineValue&=~J$a},J$a.getVertexElements=function(){return this._vertexElements.slice()},J$a.getVertexElementByUsage=function(J$a){return this._vertexElementsDic[J$a]},J$a.unBinding=function(){},J$o(0,J$a,"shaderDefineValue",function(){return this._shaderDefineValue}),J$o(0,J$a,"id",function(){return this._id}),J$o(0,J$a,"vertexStride",function(){return this._vertexStride}),J$o(0,J$a,"shaderValues",function(){return this._shaderValues}),J$g._getTypeSize=function(J$a){switch(J$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},J$g.getVertexStride=function(J$a){for(var J$b=0,J$c=0;J$c<J$a.Length;J$c++){var J$d=J$a[J$c],J$e=J$d.offset+J$g._getTypeSize(J$d.elementFormat);J$b<J$e&&(J$b=J$e)}return J$b},J$g._maxVertexDeclarationBit=1e3,J$g._uniqueIDCounter=1,J$l(J$g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),J$g}(),J$ga=function(){function J$a(J$a,J$b,J$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=J$a,this.elementFormat=J$b,this.elementUsage=J$c}return J$n(J$a,"laya.d3.graphics.VertexElement"),J$a}(),J$ha=(function(){function J$a(){}J$n(J$a,"laya.d3.graphics.VertexElementFormat"),J$a.Single="single",J$a.Vector2="vector2",J$a.Vector3="vector3",J$a.Vector4="vector4",J$a.Color="color",J$a.Byte4="byte4",J$a.Short2="short2",J$a.Short4="short4",J$a.NormalizedShort2="normalizedshort2",J$a.NormalizedShort4="normalizedshort4",J$a.HalfVector2="halfvector2",J$a.HalfVector4="halfvector4"}(),function(){function J$a(){}J$n(J$a,"laya.d3.graphics.VertexElementUsage"),J$a.POSITION0=0,J$a.COLOR0=1,J$a.TEXTURECOORDINATE0=2,J$a.NORMAL0=3,J$a.BINORMAL0=4,J$a.TANGENT0=5,J$a.BLENDINDICES0=6,J$a.BLENDWEIGHT0=7,J$a.DEPTH0=8,J$a.FOG0=9,J$a.POINTSIZE0=10,J$a.SAMPLE0=11,J$a.TESSELLATEFACTOR0=12,J$a.COLOR1=13,J$a.NEXTTEXTURECOORDINATE0=14,J$a.TEXTURECOORDINATE1=15,J$a.NEXTTEXTURECOORDINATE1=16,J$a.CORNERTEXTURECOORDINATE0=17,J$a.VELOCITY0=18,J$a.STARTCOLOR0=19,J$a.STARTSIZE=20,J$a.AGEADDSCALE0=21,J$a.STARTROTATION=22,J$a.ENDCOLOR0=23,J$a.STARTLIFETIME=24,J$a.TIME0=33,J$a.SHAPEPOSITIONSTARTLIFETIME=30,J$a.DIRECTIONTIME=32,J$a.SIZEROTATION0=27,J$a.RADIUS0=28,J$a.RADIAN0=29,J$a.STARTSPEED=31,J$a.RANDOM0=34,J$a.RANDOM1=35,J$a.SIMULATIONWORLDPOSTION=36,J$a.SIMULATIONWORLDROTATION=37,J$a.TEXTURECOORDINATE0X=38,J$a.TEXTURECOORDINATE0X1=39,J$a.TEXTURECOORDINATE0Y=40,J$a.OFFSETVECTOR=41}(),function(){function J$a(J$a,J$b,J$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=J$a,this._textureCoordinate0=J$b,this._time=J$c}J$n(J$a,"laya.d3.graphics.VertexGlitter");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate0}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"time",function(){return this._time}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(24,[new J$ga(0,"vector3",0),new J$ga(12,"vector2",2),new J$ga(20,"single",33)])}])}(),function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=J$a,this._position=J$b,this._velocity=J$c,this._startColor=J$d,this._endColor=J$e,this._sizeRotation=J$f,this._radius=J$g,this._radian=J$h,this._ageAddScale=J$i,this._time=J$j}J$n(J$a,"laya.d3.graphics.VertexParticle");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"endColor",function(){return this._endColor}),J$o(0,J$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J$o(0,J$b,"sizeRotation",function(){return this._sizeRotation}),J$o(0,J$b,"velocity",function(){return this._velocity}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"startColor",function(){return this._startColor}),J$o(0,J$b,"radius",function(){return this._radius}),J$o(0,J$b,"radian",function(){return this._radian}),J$o(0,J$b,"ageAddScale",function(){return this._ageAddScale}),J$o(0,J$b,"time",function(){return this._time}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(116,[new J$ga(0,"vector4",17),new J$ga(16,"vector3",0),new J$ga(28,"vector3",18),new J$ga(40,"vector4",19),new J$ga(56,"vector4",23),new J$ga(72,"vector3",27),new J$ga(84,"vector2",28),new J$ga(92,"vector4",29),new J$ga(108,"single",24),new J$ga(112,"single",33)])}])}(),function(){function J$a(J$a){this._position=null,this._position=J$a}J$n(J$a,"laya.d3.graphics.VertexPosition");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(12,[new J$ga(0,"vector3",0)])}]),J$a}()),J$ia=function(){function J$a(J$a,J$b){this._position=null,this._normal=null,this._position=J$a,this._normal=J$b}J$n(J$a,"laya.d3.graphics.VertexPositionNormal");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(24,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3)])}]),J$a}(),J$ja=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._color=null,this._position=J$a,this._normal=J$b,this._color=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColor");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(40,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1)])}]),J$a}(),J$ka=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._blendIndex=J$d,this._blendWeight=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(72,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6)])}]),J$a}(),J$la=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._tangent=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(88,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6),new J$ga(72,"vector4",5)])}]),J$a}(),J$ma=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._tangent=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(84,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6),new J$ga(72,"vector3",5)])}]),J$a}(),J$na=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._tangent=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(56,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector4",5)])}]),J$a}(),J$oa=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._tangent=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(52,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector3",5)])}]),J$a}(),J$pa=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(48,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2)])}]),J$a}(),J$qa=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(56,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15)])}]),J$a}(),J$ra=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._blendIndex=J$f,this._blendWeight=J$g}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(88,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15),new J$ga(56,"vector4",7),new J$ga(72,"vector4",6)])}]),J$a}(),J$ua=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._tangent=J$f,this._blendIndex=J$g,this._blendWeight=J$h}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(104,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15),new J$ga(56,"vector4",7),new J$ga(72,"vector4",6),new J$ga(88,"vector4",5)])}]),J$a}(),J$va=function(){function J$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$b.VertexPositionNormalColorTexture0SkinTangent=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._tangent=J$f,this._blendIndex=J$g,this._blendWeight=J$h},J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(100,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15),new J$ga(56,"vector4",7),new J$ga(72,"vector4",6),new J$ga(88,"vector3",5)])}]),J$a}(),J$wa=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._tangent=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(72,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15),new J$ga(56,"vector4",5)])}]),J$a}(),J$xa=function(){function J$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$b.VertexPositionNormalColorTexture0Tangent=function(J$a,J$b,J$c,J$d,J$e,J$f){this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._tangent=J$f},J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(68,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector2",15),new J$ga(56,"vector3",5)])}]),J$a}(),J$ya=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(80,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector4",7),new J$ga(64,"vector4",6)])}]),J$a}(),J$za=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d,this._tangent=J$e,this._blendIndex=J$f,this._blendWeight=J$g}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(96,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector4",7),new J$ga(64,"vector4",6),new J$ga(80,"vector4",5)])}]),J$a}(),J$Aa=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d,this._tangent=J$e,this._blendIndex=J$f,this._blendWeight=J$g}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(92,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector4",7),new J$ga(64,"vector4",6),new J$ga(80,"vector3",5)])}]),J$a}(),J$Ba=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d,this._tangent=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(64,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector4",5)])}]),J$a}(),J$Ca=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._color=J$c,this._textureCoordinate=J$d,this._tangent=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"color",function(){return this._color}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(60,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",1),new J$ga(40,"vector2",2),new J$ga(48,"vector3",5)])}]),J$a}(),J$Da=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._tangent=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNormalSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(40,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector4",5)])}]),J$a}(),J$Ea=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._tangent=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(36,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector3",5)])}]),J$a}(),J$Fa=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(32,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2)])}]),J$a}(),J$Ga=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(40,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15)])}]),J$a}(),J$Ha=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(72,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6)])}]),J$a}(),J$Ia=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d,this._tangent=J$e,this._blendIndex=J$f,this._blendWeight=J$g}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(88,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6),new J$ga(72,"vector4",5)])}]),J$a}(),J$Ja=function(){function J$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$b.VertexPositionNormalTexture0SkinTangent=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d,this._tangent=J$e,this._blendIndex=J$f,this._blendWeight=J$g},J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(84,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15),new J$ga(40,"vector4",7),new J$ga(56,"vector4",6),new J$ga(72,"vector3",5)])}]),J$a}(),J$Ka=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d,this._tangent=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(56,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15),new J$ga(40,"vector4",5)])}]),J$a}(),J$La=function(){function J$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$b.VertexPositionNormalTexture0Tangent=function(J$a,J$b,J$c,J$d,J$e){this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$c,this._textureCoordinate1=J$d,this._tangent=J$e},J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(52,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15),new J$ga(40,"vector3",5)])}]),J$a}(),J$Ma=function(){function J$a(J$a,J$b,J$c,J$d,J$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c,this._blendIndex=J$d,this._blendWeight=J$e}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(64,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector4",7),new J$ga(48,"vector4",6)])}]),J$a}(),J$Na=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c,this._tangent=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(80,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector4",7),new J$ga(48,"vector4",6),new J$ga(64,"vector4",5)])}]),J$a}(),J$Oa=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c,this._tangent=J$d,this._blendIndex=J$e,this._blendWeight=J$f}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(76,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector4",7),new J$ga(48,"vector4",6),new J$ga(64,"vector3",5)])}]),J$a}(),J$Pa=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c,this._tangent=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(48,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector4",5)])}]),J$a}(),J$Qa=function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c,this._tangent=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(44,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector3",5)])}]),J$a}(),J$Ra=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNTBTexture");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(56,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector3",5),new J$ga(36,"vector3",4),new J$ga(48,"vector2",2)])}]),J$a}(),J$Sa=function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=J$a,this._normal=J$b,this._textureCoordinate0=J$d,this._textureCoordinate1=J$e,this._tangent=J$f,J$c=J$c,this._blendIndex=J$g,this._blendWeight=J$h}J$n(J$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"tangent",function(){return this._tangent}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(0,J$b,"textureCoordinate1",function(){return this._textureCoordinate1}),J$o(0,J$b,"blendIndex",function(){return this._blendIndex}),J$o(0,J$b,"blendWeight",function(){return this._blendWeight}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(96,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector3",5),new J$ga(36,"vector3",4),new J$ga(48,"vector2",2),new J$ga(56,"vector2",15),new J$ga(64,"vector4",7),new J$ga(80,"vector4",6)])}]),J$a}(),J$Ta=function(){function J$a(J$a,J$b,J$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=J$a,this._normal=J$b,this._textureCoordinate=J$c}J$n(J$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"textureCoordinate",function(){return this._textureCoordinate}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(88,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector3",5),new J$ga(36,"vector3",4),new J$ga(48,"vector2",2),new J$ga(56,"vector4",7),new J$ga(72,"vector4",6)])}]),J$a}(),J$Ua=(function(){function J$a(J$a,J$b,J$c,J$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=J$a,this._normal=J$b,this._textureCoord0=J$c,this._textureCoord1=J$d}J$n(J$a,"laya.d3.graphics.VertexPositionTerrain");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"normal",function(){return this._normal}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoord0",function(){return this._textureCoord0}),J$o(0,J$b,"textureCoord1",function(){return this._textureCoord1}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(40,[new J$ga(0,"vector3",0),new J$ga(12,"vector3",3),new J$ga(24,"vector2",2),new J$ga(32,"vector2",15)])}])}(),function(){function J$a(J$a,J$b){this._position=null,this._textureCoordinate0=null,this._position=J$a,this._textureCoordinate0=J$b}J$n(J$a,"laya.d3.graphics.VertexPositionTexture0");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"position",function(){return this._position}),J$o(0,J$b,"textureCoordinate0",function(){return this._textureCoordinate0}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(20,[new J$ga(0,"vector3",0),new J$ga(12,"vector2",2)])}]),J$a}()),J$Va=(function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m,J$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=J$a,this._positionStartLifeTime=J$b,this._velocity=J$c,this._startColor=J$d,this._startSize=J$e,this._startRotation0=J$f,this._startRotation1=J$g,this._startRotation2=J$h,this._startLifeTime=J$i,this._time=J$j,this._startSpeed=J$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=J$n}J$n(J$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J$o(0,J$b,"random1",function(){return this._randoms1}),J$o(0,J$b,"startRotation2",function(){return this._startRotation2}),J$o(0,J$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),J$o(0,J$b,"velocity",function(){return this._velocity}),J$o(0,J$b,"random0",function(){return this._randoms0}),J$o(0,J$b,"startSize",function(){return this._startSize}),J$o(0,J$b,"startColor",function(){return this._startColor}),J$o(0,J$b,"startRotation0",function(){return this._startRotation0}),J$o(0,J$b,"startRotation1",function(){return this._startRotation1}),J$o(0,J$b,"startLifeTime",function(){return this._startLifeTime}),J$o(0,J$b,"time",function(){return this._time}),J$o(0,J$b,"startSpeed",function(){return this._startSpeed}),J$o(0,J$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(152,[new J$ga(0,"vector4",17),new J$ga(16,"vector4",30),new J$ga(32,"vector4",32),new J$ga(48,"vector4",19),new J$ga(64,"vector3",20),new J$ga(76,"vector3",22),new J$ga(88,"single",31),new J$ga(92,"vector4",34),new J$ga(108,"vector4",35),new J$ga(124,"vector3",36),new J$ga(136,"vector4",37)])}])}(),function(){function J$a(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m,J$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=J$a,this._positionStartLifeTime=J$b,this._velocity=J$c,this._startColor=J$d,this._startSize=J$e,this._startRotation0=J$f,this._startRotation1=J$g,this._startRotation2=J$h,this._startLifeTime=J$i,this._time=J$j,this._startSpeed=J$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=J$n}J$n(J$a,"laya.d3.graphics.VertexShurikenParticleMesh");var J$b=J$a.prototype;J$x.imps(J$b,{"laya.d3.graphics.IVertex":!0}),J$o(0,J$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),J$o(0,J$b,"velocity",function(){return this._velocity}),J$o(0,J$b,"position",function(){return this._positionStartLifeTime}),J$o(0,J$b,"random0",function(){return this._randoms0}),J$o(0,J$b,"startSize",function(){return this._startSize}),J$o(0,J$b,"startColor",function(){return this._startColor}),J$o(0,J$b,"startRotation0",function(){return this._startRotation0}),J$o(0,J$b,"startRotation1",function(){return this._startRotation1}),J$o(0,J$b,"random1",function(){return this._randoms1}),J$o(0,J$b,"startRotation2",function(){return this._startRotation2}),J$o(0,J$b,"startLifeTime",function(){return this._startLifeTime}),J$o(0,J$b,"time",function(){return this._time}),J$o(0,J$b,"startSpeed",function(){return this._startSpeed}),J$o(0,J$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),J$o(0,J$b,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$o(1,J$a,"vertexDeclaration",function(){return J$a._vertexDeclaration}),J$l(J$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new J$fa(172,[new J$ga(0,"vector3",0),new J$ga(12,"vector4",1),new J$ga(28,"vector2",2),new J$ga(36,"vector4",30),new J$ga(52,"vector4",32),new J$ga(68,"vector4",19),new J$ga(84,"vector3",20),new J$ga(96,"vector3",22),new J$ga(108,"single",31),new J$ga(112,"vector4",34),new J$ga(128,"vector4",35),new J$ga(144,"vector3",36),new J$ga(156,"vector4",37)])}])}(),function(){function J$v(J$a,J$b,J$c,J$d,J$e,J$f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=J$c,this._materials=J$d,this._subMeshes=J$e,this._materialMap=J$f,this._version=J$b,this._onLoaded(J$a)}J$n(J$v,"laya.d3.loaders.LoadModelV01");var J$a=J$v.prototype;return J$a._onLoaded=function(J$a){this._readData=J$a,this.READ_BLOCK();for(var J$b=0;J$b<this._BLOCK.count;J$b++){var J$c=this._readData.getUint16(),J$d=this._strings[J$c],J$e=this["READ_"+J$d];if(null==J$e)throw new Error("model file err,no this function:"+J$c+" "+J$d);if(!J$e.call(this))break}return this._mesh},J$a.onError=function(){},J$a._readString=function(){return this._strings[this._readData.getUint16()]},J$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},J$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},J$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var J$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var J$b=0;J$b<this._STRINGS.size;J$b++)this._strings[J$b]=this._readData.readUTFString();return this._readData.pos=J$a,!0},J$a.READ_MATERIAL=function(){var J$a=this._readData.getUint16(),J$b=(this._readString(),this._readString());return this._materials[J$a]="null"!==J$b?J$r.getRes(this._materialMap[J$b]):new J$Eb,!0},J$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var J$a,J$b=this._readData.__getBuffer(),J$c=0,J$d=this._readData.getUint32(),J$e=this._readData.getUint32(),J$f=(new Float32Array(J$b.slice(J$d+this._DATA.offset,J$d+this._DATA.offset+J$e)),this._readData.getUint32()),J$g=this._readData.getUint32(),J$h=new Float32Array(J$b.slice(J$f+this._DATA.offset,J$f+this._DATA.offset+J$g));for(this.mesh._inverseBindPoses=[],J$c=0,J$a=J$h.length;J$c<J$a;J$c+=16){var J$i=new J$ab(J$h[J$c+0],J$h[J$c+1],J$h[J$c+2],J$h[J$c+3],J$h[J$c+4],J$h[J$c+5],J$h[J$c+6],J$h[J$c+7],J$h[J$c+8],J$h[J$c+9],J$h[J$c+10],J$h[J$c+11],J$h[J$c+12],J$h[J$c+13],J$h[J$c+14],J$h[J$c+15]);this.mesh._inverseBindPoses.push(J$i)}break;default:throw new Error("LoadModel:unknown version.")}return!0},J$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var J$a=this._readString();this._shaderAttributes=J$a.match(J$v._attrReg);var J$b=this._readData.getUint32(),J$c=this._readData.getUint32(),J$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),J$e=this._readData.getUint32(),J$f=this._readData.getUint32(),J$g=this._readData.getUint32(),J$h=this._readData.__getBuffer(),J$i=new J$jb(this._mesh),J$j=this._getVertexDeclaration(),J$k=J$Ob.create(J$j,J$e/J$j.vertexStride,35044,!0),J$l=J$d+this._DATA.offset,J$m=J$h.slice(J$l,J$l+J$e);J$k.setData(new Float32Array(J$m));for(var J$n=(J$i._vertexBuffer=J$k).vertexDeclaration.getVertexElements(),J$o=0;J$o<J$n.length;J$o++)J$i._bufferUsage[J$n[J$o].elementUsage]=J$k;var J$p=J$Nb.create("ushort",J$c/2,35044,!0),J$q=J$b+this._DATA.offset,J$r=J$h.slice(J$q,J$q+J$c);J$p.setData(new Uint16Array(J$r)),J$i._indexBuffer=J$p;var J$u=J$h.slice(J$f+this._DATA.offset,J$f+this._DATA.offset+J$g);return J$i._boneIndicesList[0]=new Uint8Array(J$u),this._subMeshes.push(J$i),!0},J$a.READ_DATAAREA=function(){return!1},J$a._getVertexDeclaration=function(){for(var J$a,J$b=!1,J$c=!1,J$d=!1,J$e=!1,J$f=!1,J$g=!1,J$h=!1,J$i=!1,J$j=!1,J$k=0;J$k<this._shaderAttributes.length;J$k+=8)switch(this._shaderAttributes[J$k]){case"POSITION":J$b=!0;break;case"NORMAL":J$c=!0;break;case"COLOR":J$d=!0;break;case"UV":J$e=!0;break;case"UV1":J$f=!0;break;case"BLENDWEIGHT":J$h=!0;break;case"BLENDINDICES":J$i=!0;break;case"TANGENT":J$g=!0;break;case"BINORMAL":J$j=!0}return J$b&&J$c&&J$d&&J$e&&J$f&&J$h&&J$i&&J$g?J$a=J$va.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$f&&J$h&&J$i?J$a=J$ra.vertexDeclaration:J$b&&J$c&&J$e&&J$f&&J$h&&J$i&&J$g?J$a=J$Ja.vertexDeclaration:J$b&&J$c&&J$e&&J$f&&J$h&&J$i?J$a=J$Ha.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$h&&J$i&&J$g?J$a=J$Aa.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$h&&J$i?J$a=J$ya.vertexDeclaration:J$b&&J$c&&J$g&&J$j&&J$e&&J$h&&J$i?J$a=J$Ta.vertexDeclaration:J$b&&J$c&&J$e&&J$h&&J$i&&J$g?J$a=J$Oa.vertexDeclaration:J$b&&J$c&&J$e&&J$h&&J$i?J$a=J$Ma.vertexDeclaration:J$b&&J$c&&J$d&&J$h&&J$i&&J$g?J$a=J$ma.vertexDeclaration:J$b&&J$c&&J$d&&J$h&&J$i?J$a=J$ka.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$f&&J$g?J$a=J$xa.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$f?J$a=J$qa.vertexDeclaration:J$b&&J$c&&J$e&&J$f&&J$g?J$a=J$La.vertexDeclaration:J$b&&J$c&&J$e&&J$f?J$a=J$Ga.vertexDeclaration:J$b&&J$c&&J$d&&J$e&&J$g?J$a=J$Ca.vertexDeclaration:J$b&&J$c&&J$e&&J$g&&J$j?J$a=J$Ra.vertexDeclaration:J$b&&J$c&&J$d&&J$e?J$a=J$pa.vertexDeclaration:J$b&&J$c&&J$e&&J$g?J$a=J$Qa.vertexDeclaration:J$b&&J$c&&J$e?J$a=J$Fa.vertexDeclaration:J$b&&J$c&&J$d&&J$g?J$a=J$oa.vertexDeclaration:J$b&&J$c&&J$d&&(J$a=J$ja.vertexDeclaration),J$a},J$o(0,J$a,"mesh",function(){return this._mesh}),J$v._attrReg=new RegExp("(\\w+)|([:,;])","g"),J$v}()),J$Wa=function(){function J$z(){}return J$n(J$z,"laya.d3.loaders.LoadModelV02"),J$z.parse=function(J$a,J$b,J$c,J$d,J$e,J$f){J$z._mesh=J$c,J$z._materials=J$d,J$z._subMeshes=J$e,J$z._materialMap=J$f,J$z._version=J$b,J$z._readData=J$a,J$z.READ_DATA(),J$z.READ_BLOCK(),J$z.READ_STRINGS();for(var J$g=0,J$h=J$z._BLOCK.count;J$g<J$h;J$g++){J$z._readData.pos=J$z._BLOCK.blockStarts[J$g];var J$i=J$z._readData.getUint16(),J$j=J$z._strings[J$i],J$k=J$z["READ_"+J$j];if(null==J$k)throw new Error("model file err,no this function:"+J$i+" "+J$j);J$k.call()}J$z._strings.length=0,J$z._readData=null,J$z._version=null,J$z._mesh=null,J$z._materials=null,J$z._subMeshes=null,J$z._materialMap=null},J$z._readString=function(){return J$z._strings[J$z._readData.getUint16()]},J$z.READ_DATA=function(){J$z._DATA.offset=J$z._readData.getUint32(),J$z._DATA.size=J$z._readData.getUint32()},J$z.READ_BLOCK=function(){for(var J$a=J$z._BLOCK.count=J$z._readData.getUint16(),J$b=J$z._BLOCK.blockStarts=[],J$c=J$z._BLOCK.blockLengths=[],J$d=0;J$d<J$a;J$d++)J$b.push(J$z._readData.getUint32()),J$c.push(J$z._readData.getUint32())},J$z.READ_STRINGS=function(){var J$a=J$z._readData.getUint32(),J$b=J$z._readData.getUint16(),J$c=J$z._readData.pos;J$z._readData.pos=J$a+J$z._DATA.offset;for(var J$d=0;J$d<J$b;J$d++)J$z._strings[J$d]=J$z._readData.readUTFString();J$z._readData.pos=J$c},J$z.READ_MATERIAL=function(){J$z._readString(),J$z._readString();var J$a=J$z._readString();return""!==J$a&&J$z._materials.push(J$r.getRes(J$z._materialMap[J$a])),!0},J$z.READ_MESH=function(){J$z._readString();var J$a,J$b=J$z._readData.__getBuffer(),J$c=0,J$d=J$z._readData.getInt16(),J$e=J$z._DATA.offset;for(J$c=0;J$c<J$d;J$c++){var J$f=J$e+J$z._readData.getUint32(),J$g=J$z._readData.getUint32(),J$h=new Float32Array(J$b.slice(J$f,J$f+J$g)),J$i=J$z._readString().match(J$z._attrReg),J$j=J$z._getVertexDeclaration(J$i),J$k=J$Ob.create(J$j,4*J$h.length/J$j.vertexStride,35044,!0);J$k.setData(J$h),J$z._mesh._vertexBuffers.push(J$k)}var J$l=J$e+J$z._readData.getUint32(),J$m=J$z._readData.getUint32(),J$n=new Uint16Array(J$b.slice(J$l,J$l+J$m)),J$o=J$Nb.create("ushort",J$m/2,35044,!0);J$o.setData(J$n),J$z._mesh._indexBuffer=J$o;var J$p=J$z._mesh._boneNames=[],J$q=J$z._readData.getUint16();for(J$p.length=J$q,J$c=0;J$c<J$q;J$c++)J$p[J$c]=J$z._strings[J$z._readData.getUint16()];var J$r=J$z._readData.getUint32(),J$u=J$z._readData.getUint32(),J$v=(new Float32Array(J$b.slice(J$e+J$r,J$e+J$r+J$u)),J$z._readData.getUint32()),J$w=J$z._readData.getUint32(),J$x=new Float32Array(J$b.slice(J$e+J$v,J$e+J$v+J$w));for(J$z._mesh._inverseBindPoses=[],J$c=0,J$a=J$x.length;J$c<J$a;J$c+=16){var J$y=new J$ab(J$x[J$c+0],J$x[J$c+1],J$x[J$c+2],J$x[J$c+3],J$x[J$c+4],J$x[J$c+5],J$x[J$c+6],J$x[J$c+7],J$x[J$c+8],J$x[J$c+9],J$x[J$c+10],J$x[J$c+11],J$x[J$c+12],J$x[J$c+13],J$x[J$c+14],J$x[J$c+15]);J$z._mesh._inverseBindPoses.push(J$y)}return J$z._mesh._skinnedDatas=new Float32Array(16*J$x.length),!0},J$z.READ_SUBMESH=function(){var J$a=J$z._readData.__getBuffer(),J$b=new J$jb(J$z._mesh),J$c=J$z._readData.getInt16(),J$d=J$z._readData.getUint32(),J$e=J$z._readData.getUint32();J$b._vertexBuffer=J$z._mesh._vertexBuffers[J$c],J$b._vertexStart=J$d,J$b._vertexCount=J$e;var J$f=J$z._readData.getUint32(),J$g=J$z._readData.getUint32(),J$h=J$z._mesh._indexBuffer;J$b._indexBuffer=J$h,J$b._indexStart=J$f,J$b._indexCount=J$g,J$b._indices=new Uint16Array(J$h.getData().buffer,2*J$f,J$g);var J$i=J$z._DATA.offset,J$j=J$b._subIndexBufferStart,J$k=J$b._subIndexBufferCount,J$l=J$b._boneIndicesList,J$m=J$z._readData.getUint16();J$j.length=J$m,J$k.length=J$m,J$l.length=J$m;for(var J$n=0;J$n<J$m;J$n++){J$j[J$n]=J$z._readData.getUint32(),J$k[J$n]=J$z._readData.getUint32();var J$o=J$z._readData.getUint32(),J$p=J$z._readData.getUint32();J$b._boneIndicesList[J$n]=new Uint8Array(J$a.slice(J$i+J$o,J$i+J$o+J$p))}return J$z._subMeshes.push(J$b),!0},J$z._getVertexDeclaration=function(J$a){for(var J$b,J$c=!1,J$d=!1,J$e=!1,J$f=!1,J$g=!1,J$h=!1,J$i=!1,J$j=!1,J$k=!1,J$l=0;J$l<J$a.length;J$l++)switch(J$a[J$l]){case"POSITION":J$c=!0;break;case"NORMAL":J$d=!0;break;case"COLOR":J$e=!0;break;case"UV":J$f=!0;break;case"UV1":J$g=!0;break;case"BLENDWEIGHT":J$i=!0;break;case"BLENDINDICES":J$j=!0;break;case"TANGENT":J$h=!0;break;case"BINORMAL":J$k=!0}return J$c&&J$d&&J$e&&J$f&&J$g&&J$i&&J$j&&J$h?J$b=J$va.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$g&&J$i&&J$j?J$b=J$ra.vertexDeclaration:J$c&&J$d&&J$f&&J$g&&J$i&&J$j&&J$h?J$b=J$Ja.vertexDeclaration:J$c&&J$d&&J$f&&J$g&&J$i&&J$j?J$b=J$Ha.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$i&&J$j&&J$h?J$b=J$Aa.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$i&&J$j?J$b=J$ya.vertexDeclaration:J$c&&J$d&&J$f&&J$i&&J$j&&J$h?J$b=J$Oa.vertexDeclaration:J$c&&J$d&&J$f&&J$i&&J$j?J$b=J$Ma.vertexDeclaration:J$c&&J$d&&J$e&&J$i&&J$j&&J$h?J$b=J$ma.vertexDeclaration:J$c&&J$d&&J$e&&J$i&&J$j?J$b=J$ka.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$g&&J$h?J$b=J$xa.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$g?J$b=J$qa.vertexDeclaration:J$c&&J$d&&J$f&&J$g&&J$h?J$b=J$La.vertexDeclaration:J$c&&J$d&&J$f&&J$g?J$b=J$Ga.vertexDeclaration:J$c&&J$d&&J$e&&J$f&&J$h?J$b=J$Ca.vertexDeclaration:J$c&&J$d&&J$f&&J$h&&J$k?J$b=J$Ra.vertexDeclaration:J$c&&J$d&&J$e&&J$f?J$b=J$pa.vertexDeclaration:J$c&&J$d&&J$f&&J$h?J$b=J$Qa.vertexDeclaration:J$c&&J$d&&J$f?J$b=J$Fa.vertexDeclaration:J$c&&J$d&&J$e&&J$h?J$b=J$oa.vertexDeclaration:J$c&&J$d&&J$e&&(J$b=J$ja.vertexDeclaration),J$b},J$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),J$z._strings=[],J$z._readData=null,J$z._version=null,J$z._mesh=null,J$z._materials=null,J$z._subMeshes=null,J$z._materialMap=null,J$l(J$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J$z}(),J$Xa=function(){function J$y(){}return J$n(J$y,"laya.d3.loaders.LoadModelV03"),J$y.parse=function(J$a,J$b,J$c,J$d,J$e){J$y._mesh=J$c,J$y._subMeshes=J$d,J$y._materialMap=J$e,J$y._version=J$b,J$y._readData=J$a,J$y.READ_DATA(),J$y.READ_BLOCK(),J$y.READ_STRINGS();for(var J$f=0,J$g=J$y._BLOCK.count;J$f<J$g;J$f++){J$y._readData.pos=J$y._BLOCK.blockStarts[J$f];var J$h=J$y._readData.getUint16(),J$i=J$y._strings[J$h],J$j=J$y["READ_"+J$i];if(null==J$j)throw new Error("model file err,no this function:"+J$h+" "+J$i);J$j.call()}J$y._strings.length=0,J$y._readData=null,J$y._version=null,J$y._mesh=null,J$y._subMeshes=null,J$y._materialMap=null},J$y._readString=function(){return J$y._strings[J$y._readData.getUint16()]},J$y.READ_DATA=function(){J$y._DATA.offset=J$y._readData.getUint32(),J$y._DATA.size=J$y._readData.getUint32()},J$y.READ_BLOCK=function(){for(var J$a=J$y._BLOCK.count=J$y._readData.getUint16(),J$b=J$y._BLOCK.blockStarts=[],J$c=J$y._BLOCK.blockLengths=[],J$d=0;J$d<J$a;J$d++)J$b.push(J$y._readData.getUint32()),J$c.push(J$y._readData.getUint32())},J$y.READ_STRINGS=function(){var J$a=J$y._readData.getUint32(),J$b=J$y._readData.getUint16(),J$c=J$y._readData.pos;J$y._readData.pos=J$a+J$y._DATA.offset;for(var J$d=0;J$d<J$b;J$d++)J$y._strings[J$d]=J$y._readData.readUTFString();J$y._readData.pos=J$c},J$y.READ_MESH=function(){var J$a,J$b=J$y._readString(),J$c=J$y._readData.__getBuffer(),J$d=0,J$e=J$y._readData.getInt16(),J$f=J$y._DATA.offset;for(J$d=0;J$d<J$e;J$d++){var J$g,J$h=J$f+J$y._readData.getUint32(),J$i=J$y._readData.getUint32(),J$j=new Float32Array(J$c.slice(J$h,J$h+J$i)),J$k=J$y._readString();switch(J$y._version){case"LAYAMODEL:03":J$g=J$y._vertexDeclarationMap_Discard[J$k];break;case"LAYAMODEL:0301":J$g=J$y._vertexDeclarationMap[J$k];break;default:throw new Error("LoadModelV03: unknown version.")}if(!J$g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+J$y._version+"  bufferAttribute="+J$k+"  name="+J$b+"  url="+(J$y._mesh?J$y._mesh.url:"null"));var J$l=J$Ob.create(J$g,4*J$j.length/J$g.vertexStride,35044,!0,J$y._mesh._url+"_"+J$d);J$l.setData(J$j),J$y._mesh._vertexBuffers.push(J$l)}var J$m=J$f+J$y._readData.getUint32(),J$n=J$y._readData.getUint32(),J$o=new Uint16Array(J$c.slice(J$m,J$m+J$n)),J$p=J$Nb.create("ushort",J$n/2,35044,!0,J$y._mesh._url);J$p.setData(J$o),J$y._mesh._indexBuffer=J$p;var J$q=J$y._mesh._boneNames=[],J$r=J$y._readData.getUint16();for(J$q.length=J$r,J$d=0;J$d<J$r;J$d++)J$q[J$d]=J$y._strings[J$y._readData.getUint16()];J$y._readData.pos+=8;var J$u=J$y._readData.getUint32(),J$v=J$y._readData.getUint32(),J$w=new Float32Array(J$c.slice(J$f+J$u,J$f+J$u+J$v));for(J$y._mesh._inverseBindPoses=[],J$d=0,J$a=J$w.length;J$d<J$a;J$d+=16){var J$x=new J$ab(J$w[J$d+0],J$w[J$d+1],J$w[J$d+2],J$w[J$d+3],J$w[J$d+4],J$w[J$d+5],J$w[J$d+6],J$w[J$d+7],J$w[J$d+8],J$w[J$d+9],J$w[J$d+10],J$w[J$d+11],J$w[J$d+12],J$w[J$d+13],J$w[J$d+14],J$w[J$d+15]);J$y._mesh._inverseBindPoses.push(J$x)}return J$y._mesh._skinnedDatas=new Float32Array(16*J$w.length),!0},J$y.READ_SUBMESH=function(){var J$a=J$y._readData.__getBuffer(),J$b=new J$jb(J$y._mesh),J$c=J$y._readData.getInt16(),J$d=J$y._readData.getUint32(),J$e=J$y._readData.getUint32();J$b._vertexBuffer=J$y._mesh._vertexBuffers[J$c],J$b._vertexStart=J$d,J$b._vertexCount=J$e;var J$f=J$y._readData.getUint32(),J$g=J$y._readData.getUint32(),J$h=J$y._mesh._indexBuffer;J$b._indexBuffer=J$h,J$b._indexStart=J$f,J$b._indexCount=J$g,J$b._indices=new Uint16Array(J$h.getData().buffer,2*J$f,J$g);var J$i=J$y._DATA.offset,J$j=J$b._subIndexBufferStart,J$k=J$b._subIndexBufferCount,J$l=J$b._boneIndicesList,J$m=J$y._readData.getUint16();J$j.length=J$m,J$k.length=J$m,J$l.length=J$m;for(var J$n=0;J$n<J$m;J$n++){J$j[J$n]=J$y._readData.getUint32(),J$k[J$n]=J$y._readData.getUint32();var J$o=J$y._readData.getUint32(),J$p=J$y._readData.getUint32();J$l[J$n]=new Uint8Array(J$a.slice(J$i+J$o,J$i+J$o+J$p))}return J$y._subMeshes.push(J$b),!0},J$y._strings=[],J$y._readData=null,J$y._version=null,J$y._mesh=null,J$y._subMeshes=null,J$y._materialMap=null,J$l(J$y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":J$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":J$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":J$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J$Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":J$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J$Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":J$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":J$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":J$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":J$xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":J$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":J$La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":J$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":J$Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":J$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":J$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":J$Qa.vertexDeclaration,"POSITION,NORMAL,UV":J$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":J$oa.vertexDeclaration,"POSITION,NORMAL,COLOR":J$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":J$Ea.vertexDeclaration,"POSITION,NORMAL":J$ia.vertexDeclaration,"POSITION,UV":J$Ua.vertexDeclaration,POSITION:J$ha.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":J$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":J$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":J$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":J$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J$za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":J$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":J$Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":J$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":J$la.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":J$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":J$wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":J$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":J$Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":J$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":J$Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":J$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":J$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":J$Pa.vertexDeclaration,"POSITION,NORMAL,UV":J$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":J$na.vertexDeclaration,"POSITION,NORMAL,COLOR":J$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":J$Da.vertexDeclaration,"POSITION,NORMAL":J$ia.vertexDeclaration,"POSITION,UV":J$Ua.vertexDeclaration,POSITION:J$ha.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J$y}(),J$Ya=function(){function J$h(){}return J$n(J$h,"laya.d3.loaders.MeshReader"),J$h.read=function(J$a,J$b,J$c,J$d,J$e){var J$f=new J$y(J$a);J$f.pos=0;var J$g=J$f.readUTFString();switch(J$g){case"LAYAMODEL:01":case"LAYASKINANI:01":J$h._readVersion01(J$f,J$g,J$b,J$c,J$d,J$e);break;case"LAYAMODEL:02":J$Wa.parse(J$f,J$g,J$b,J$c,J$d,J$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":J$Xa.parse(J$f,J$g,J$b,J$d,J$e);break;default:throw new Error("MeshReader: unknown mesh version.")}J$b._setSubMeshes(J$d)},J$h._readVersion01=function(J$a,J$b,J$c,J$d,J$e,J$f){new J$Va(J$a,J$b,J$c,J$d,J$e,J$f)},J$h}(),J$Za=function(){function J$a(J$a,J$b){this.min=null,this.max=null,this.min=J$a,this.max=J$b}J$n(J$a,"laya.d3.math.BoundBox");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.getCorners=function(J$a){J$a.length=8;var J$b=this.min.elements,J$c=this.max.elements,J$d=J$b[0],J$e=J$b[1],J$f=J$b[2],J$g=J$c[0],J$h=J$c[1],J$i=J$c[2];J$a[0]=new J$gb(J$d,J$h,J$i),J$a[1]=new J$gb(J$g,J$h,J$i),J$a[2]=new J$gb(J$g,J$e,J$i),J$a[3]=new J$gb(J$d,J$e,J$i),J$a[4]=new J$gb(J$d,J$h,J$f),J$a[5]=new J$gb(J$g,J$h,J$f),J$a[6]=new J$gb(J$g,J$e,J$f),J$a[7]=new J$gb(J$d,J$e,J$f)},J$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},J$b.cloneTo=function(J$a){var J$b=J$a;this.min.cloneTo(J$b.min),this.max.cloneTo(J$b.max)},J$b.clone=function(){var J$a=new this.constructor(new J$gb,new J$gb);return this.cloneTo(J$a),J$a},J$a.createfromPoints=function(J$a,J$b){if(null==J$a)throw new Error("points");var J$c=J$b.min,J$d=J$b.max,J$e=J$c.elements;J$e[0]=Number.MAX_VALUE,J$e[1]=Number.MAX_VALUE,J$e[2]=Number.MAX_VALUE;var J$f=J$d.elements;J$f[0]=-Number.MAX_VALUE,J$f[1]=-Number.MAX_VALUE,J$f[2]=-Number.MAX_VALUE;for(var J$g=0,J$h=J$a.length;J$g<J$h;++J$g)J$gb.min(J$c,J$a[J$g],J$c),J$gb.max(J$d,J$a[J$g],J$d)},J$a.merge=function(J$a,J$b,J$c){J$gb.min(J$a.min,J$b.min,J$c.min),J$gb.max(J$a.max,J$b.max,J$c.max)},J$a}(),J$$a=function(){function J$j(J$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=J$a,this._near=new J$bb(new J$gb),this._far=new J$bb(new J$gb),this._left=new J$bb(new J$gb),this._right=new J$bb(new J$gb),this._top=new J$bb(new J$gb),this._bottom=new J$bb(new J$gb),J$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}J$n(J$j,"laya.d3.math.BoundFrustum");var J$a=J$j.prototype;return J$a.equalsBoundFrustum=function(J$a){return this._matrix.equalsOtherMatrix(J$a.matrix)},J$a.equalsObj=function(J$a){if(J$a instanceof laya.d3.math.BoundFrustum){var J$b=J$a;return this.equalsBoundFrustum(J$b)}return!1},J$a.getPlane=function(J$a){switch(J$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},J$a.getCorners=function(J$a){J$j._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(J$a[0]),J$j._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(J$a[1]),J$j._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(J$a[2]),J$j._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(J$a[3]),J$j._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(J$a[4]),J$j._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(J$a[5]),J$j._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(J$a[6]),J$j._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(J$a[7])},J$a.containsPoint=function(J$a){for(var J$b=J$bb.PlaneIntersectionType_Front,J$c=J$bb.PlaneIntersectionType_Front,J$d=0;J$d<6;J$d++){switch(J$d){case 0:J$c=Collision.intersectsPlaneAndPoint(this._near,J$a);break;case 1:J$c=Collision.intersectsPlaneAndPoint(this._far,J$a);break;case 2:J$c=Collision.intersectsPlaneAndPoint(this._left,J$a);break;case 3:J$c=Collision.intersectsPlaneAndPoint(this._right,J$a);break;case 4:J$c=Collision.intersectsPlaneAndPoint(this._top,J$a);break;case 5:J$c=Collision.intersectsPlaneAndPoint(this._bottom,J$a)}switch(J$c){case J$bb.PlaneIntersectionType_Back:return 0;case J$bb.PlaneIntersectionType_Intersecting:J$b=J$bb.PlaneIntersectionType_Intersecting}}switch(J$b){case J$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},J$a.containsBoundBox=function(J$a){for(var J$b,J$c=J$j._tempV30,J$d=J$j._tempV31,J$e=1,J$f=0;J$f<6;J$f++){if(J$b=this.getPlane(J$f),this._getBoxToPlanePVertexNVertex(J$a,J$b.normal,J$c,J$d),Collision.intersectsPlaneAndPoint(J$b,J$c)===J$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(J$b,J$d)===J$bb.PlaneIntersectionType_Back&&(J$e=2)}return J$e},J$a.containsBoundSphere=function(J$a){for(var J$b=J$bb.PlaneIntersectionType_Front,J$c=J$bb.PlaneIntersectionType_Front,J$d=0;J$d<6;J$d++){switch(J$d){case 0:J$c=Collision.intersectsPlaneAndSphere(this._near,J$a);break;case 1:J$c=Collision.intersectsPlaneAndSphere(this._far,J$a);break;case 2:J$c=Collision.intersectsPlaneAndSphere(this._left,J$a);break;case 3:J$c=Collision.intersectsPlaneAndSphere(this._right,J$a);break;case 4:J$c=Collision.intersectsPlaneAndSphere(this._top,J$a);break;case 5:J$c=Collision.intersectsPlaneAndSphere(this._bottom,J$a)}switch(J$c){case J$bb.PlaneIntersectionType_Back:return 0;case J$bb.PlaneIntersectionType_Intersecting:J$b=J$bb.PlaneIntersectionType_Intersecting}}switch(J$b){case J$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},J$a._getBoxToPlanePVertexNVertex=function(J$a,J$b,J$c,J$d){var J$e=J$a.min,J$f=J$e.elements,J$g=J$a.max,J$h=J$g.elements,J$i=J$b.elements,J$j=J$i[0],J$k=J$i[1],J$l=J$i[2];J$e.cloneTo(J$c);var J$m=J$c.elements;0<=J$j&&(J$m[0]=J$h[0]),0<=J$k&&(J$m[1]=J$h[1]),0<=J$l&&(J$m[2]=J$h[2]),J$g.cloneTo(J$d);var J$n=J$d.elements;0<=J$j&&(J$n[0]=J$f[0]),0<=J$k&&(J$n[1]=J$f[1]),0<=J$l&&(J$n[2]=J$f[2])},J$o(0,J$a,"top",function(){return this._top}),J$o(0,J$a,"matrix",function(){return this._matrix},function(J$a){this._matrix=J$a,J$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),J$o(0,J$a,"near",function(){return this._near}),J$o(0,J$a,"far",function(){return this._far}),J$o(0,J$a,"left",function(){return this._left}),J$o(0,J$a,"right",function(){return this._right}),J$o(0,J$a,"bottom",function(){return this._bottom}),J$j._getPlanesFromMatrix=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h=J$a.elements,J$i=J$h[0],J$j=J$h[1],J$k=J$h[2],J$l=J$h[3],J$m=J$h[4],J$n=J$h[5],J$o=J$h[6],J$p=J$h[7],J$q=J$h[8],J$r=J$h[9],J$u=J$h[10],J$v=J$h[11],J$w=J$h[12],J$x=J$h[13],J$y=J$h[14],J$z=J$h[15],J$A=J$b.normal.elements;J$A[0]=J$l+J$k,J$A[1]=J$p+J$o,J$A[2]=J$v+J$u,J$b.distance=J$z+J$y,J$b.normalize();var J$B=J$c.normal.elements;J$B[0]=J$l-J$k,J$B[1]=J$p-J$o,J$B[2]=J$v-J$u,J$c.distance=J$z-J$y,J$c.normalize();var J$C=J$d.normal.elements;J$C[0]=J$l+J$i,J$C[1]=J$p+J$m,J$C[2]=J$v+J$q,J$d.distance=J$z+J$w,J$d.normalize();var J$D=J$e.normal.elements;J$D[0]=J$l-J$i,J$D[1]=J$p-J$m,J$D[2]=J$v-J$q,J$e.distance=J$z-J$w,J$e.normalize();var J$E=J$f.normal.elements;J$E[0]=J$l-J$j,J$E[1]=J$p-J$n,J$E[2]=J$v-J$r,J$f.distance=J$z-J$x,J$f.normalize();var J$F=J$g.normal.elements;J$F[0]=J$l+J$j,J$F[1]=J$p+J$n,J$F[2]=J$v+J$r,J$g.distance=J$z+J$x,J$g.normalize()},J$j._get3PlaneInterPoint=function(J$a,J$b,J$c){var J$d=J$a.normal,J$e=J$b.normal,J$f=J$c.normal;J$gb.cross(J$e,J$f,J$j._tempV30),J$gb.cross(J$f,J$d,J$j._tempV31),J$gb.cross(J$d,J$e,J$j._tempV32);var J$g=J$gb.dot(J$d,J$j._tempV30),J$h=J$gb.dot(J$e,J$j._tempV31),J$i=J$gb.dot(J$f,J$j._tempV32);return J$gb.scale(J$j._tempV30,-J$a.distance/J$g,J$j._tempV33),J$gb.scale(J$j._tempV31,-J$b.distance/J$h,J$j._tempV34),J$gb.scale(J$j._tempV32,-J$c.distance/J$i,J$j._tempV35),J$gb.add(J$j._tempV33,J$j._tempV34,J$j._tempV36),J$gb.add(J$j._tempV35,J$j._tempV36,J$j._tempV37),J$j._tempV37},J$l(J$j,["_tempV30",function(){return this._tempV30=new J$gb},"_tempV31",function(){return this._tempV31=new J$gb},"_tempV32",function(){return this._tempV32=new J$gb},"_tempV33",function(){return this._tempV33=new J$gb},"_tempV34",function(){return this._tempV34=new J$gb},"_tempV35",function(){return this._tempV35=new J$gb},"_tempV36",function(){return this._tempV36=new J$gb},"_tempV37",function(){return this._tempV37=new J$gb}]),J$j}(),J$_a=function(){function J$k(J$a,J$b){this.center=null,this.radius=NaN,this.center=J$a,this.radius=J$b}J$n(J$k,"laya.d3.math.BoundSphere");var J$a=J$k.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.toDefault=function(){this.center.toDefault(),this.radius=0},J$a.intersectsRayDistance=function(J$a){return Collision.intersectsRayAndSphereRD(J$a,this)},J$a.intersectsRayPoint=function(J$a,J$b){return Collision.intersectsRayAndSphereRP(J$a,this,J$b)},J$a.cloneTo=function(J$a){var J$b=J$a;this.center.cloneTo(J$b.center),J$b.radius=this.radius},J$a.clone=function(){var J$a=new this.constructor(new J$gb,new J$gb);return this.cloneTo(J$a),J$a},J$k.createFromSubPoints=function(J$a,J$b,J$c,J$d){if(null==J$a)throw new Error("points");if(J$b<0||J$b>=J$a.length)throw new Error("start"+J$b+"Must be in the range [0, "+(J$a.length-1)+"]");if(J$c<0||J$b+J$c>J$a.length)throw new Error("count"+J$c+"Must be in the range <= "+J$a.length+"}");var J$e=J$b+J$c,J$f=J$k._tempVector3;J$f.elements[0]=0,J$f.elements[1]=0,J$f.elements[2]=0;for(var J$g=J$b;J$g<J$e;++J$g)J$gb.add(J$a[J$g],J$f,J$f);var J$h=J$d.center;J$gb.scale(J$f,1/J$c,J$h);var J$i=0;for(J$g=J$b;J$g<J$e;++J$g){var J$j=J$gb.distanceSquared(J$h,J$a[J$g]);J$i<J$j&&(J$i=J$j)}J$d.radius=Math.sqrt(J$i)},J$k.createfromPoints=function(J$a,J$b){if(null==J$a)throw new Error("points");J$k.createFromSubPoints(J$a,0,J$a.length,J$b)},J$l(J$k,["_tempVector3",function(){return this._tempVector3=new J$gb}]),J$k}(),J$sa=(function(){function J$a(){}J$n(J$a,"laya.d3.math.ContainmentType"),J$a.Disjoint=0,J$a.Contains=1,J$a.Intersects=2}(),function(){function J$c(){}return J$n(J$c,"laya.d3.math.MathUtils3D"),J$c.isZero=function(J$a){return Math.abs(J$a)<J$c.zeroTolerance},J$c.nearEqual=function(J$a,J$b){return!!J$c.isZero(J$a-J$b)},J$c.fastInvSqrt=function(J$a){return J$c.isZero(J$a)?J$a:1/Math.sqrt(J$a)},J$l(J$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),J$c}()),J$ta=function(){function J$i(){var J$a=this.elements=new Float32Array(9);J$a[0]=1,J$a[1]=0,J$a[2]=0,J$a[3]=0,J$a[4]=1,J$a[5]=0,J$a[6]=0,J$a[7]=0,J$a[8]=1}J$n(J$i,"laya.d3.math.Matrix3x3");var J$a=J$i.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.determinant=function(){var J$a=this.elements,J$b=J$a[0],J$c=J$a[1],J$d=J$a[2],J$e=J$a[3],J$f=J$a[4],J$g=J$a[5],J$h=J$a[6],J$i=J$a[7],J$j=J$a[8];return J$b*(J$j*J$f-J$g*J$i)+J$c*(-J$j*J$e+J$g*J$h)+J$d*(J$i*J$e-J$f*J$h)},J$a.translate=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements,J$e=J$a.elements,J$f=J$d[0],J$g=J$d[1],J$h=J$d[2],J$i=J$d[3],J$j=J$d[4],J$k=J$d[5],J$l=J$d[6],J$m=J$d[7],J$n=J$d[8],J$o=J$e[0],J$p=J$e[1];J$c[0]=J$f,J$c[1]=J$g,J$c[2]=J$h,J$c[3]=J$i,J$c[4]=J$j,J$c[5]=J$k,J$c[6]=J$o*J$f+J$p*J$i+J$l,J$c[7]=J$o*J$g+J$p*J$j+J$m,J$c[8]=J$o*J$h+J$p*J$k+J$n},J$a.rotate=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=J$d[4],J$j=J$d[5],J$k=J$d[6],J$l=J$d[7],J$m=J$d[8],J$n=Math.sin(J$a),J$o=Math.cos(J$a);J$c[0]=J$o*J$e+J$n*J$h,J$c[1]=J$o*J$f+J$n*J$i,J$c[2]=J$o*J$g+J$n*J$j,J$c[3]=J$o*J$h-J$n*J$e,J$c[4]=J$o*J$i-J$n*J$f,J$c[5]=J$o*J$j-J$n*J$g,J$c[6]=J$k,J$c[7]=J$l,J$c[8]=J$m},J$a.scale=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements,J$e=J$a.elements,J$f=J$e[0],J$g=J$e[1];J$c[0]=J$f*J$d[0],J$c[1]=J$f*J$d[1],J$c[2]=J$f*J$d[2],J$c[3]=J$g*J$d[3],J$c[4]=J$g*J$d[4],J$c[5]=J$g*J$d[5],J$c[6]=J$d[6],J$c[7]=J$d[7],J$c[8]=J$d[8]},J$a.invert=function(J$a){var J$b=J$a.elements,J$c=this.elements,J$d=J$c[0],J$e=J$c[1],J$f=J$c[2],J$g=J$c[3],J$h=J$c[4],J$i=J$c[5],J$j=J$c[6],J$k=J$c[7],J$l=J$c[8],J$m=J$l*J$h-J$i*J$k,J$n=-J$l*J$g+J$i*J$j,J$o=J$k*J$g-J$h*J$j,J$p=J$d*J$m+J$e*J$n+J$f*J$o;J$p||(J$a=null),J$p=1/J$p,J$b[0]=J$m*J$p,J$b[1]=(-J$l*J$e+J$f*J$k)*J$p,J$b[2]=(J$i*J$e-J$f*J$h)*J$p,J$b[3]=J$n*J$p,J$b[4]=(J$l*J$d-J$f*J$j)*J$p,J$b[5]=(-J$i*J$d+J$f*J$g)*J$p,J$b[6]=J$o*J$p,J$b[7]=(-J$k*J$d+J$e*J$j)*J$p,J$b[8]=(J$h*J$d-J$e*J$g)*J$p},J$a.transpose=function(J$a){var J$b=J$a.elements,J$c=this.elements;if(J$a===this){var J$d=J$c[1],J$e=J$c[2],J$f=J$c[5];J$b[1]=J$c[3],J$b[2]=J$c[6],J$b[3]=J$d,J$b[5]=J$c[7],J$b[6]=J$e,J$b[7]=J$f}else J$b[0]=J$c[0],J$b[1]=J$c[3],J$b[2]=J$c[6],J$b[3]=J$c[1],J$b[4]=J$c[4],J$b[5]=J$c[7],J$b[6]=J$c[2],J$b[7]=J$c[5],J$b[8]=J$c[8]},J$a.identity=function(){var J$a=this.elements;J$a[0]=1,J$a[1]=0,J$a[2]=0,J$a[3]=0,J$a[4]=1,J$a[5]=0,J$a[6]=0,J$a[7]=0,J$a[8]=1},J$a.cloneTo=function(J$a){var J$b,J$c,J$d;if((J$c=this.elements)!==(J$d=J$a.elements))for(J$b=0;J$b<9;++J$b)J$d[J$b]=J$c[J$b]},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$i.createFromTranslation=function(J$a,J$b){J$b.elements;var J$c=J$a.elements;J$b[0]=1,J$b[1]=0,J$b[2]=0,J$b[3]=0,J$b[4]=1,J$b[5]=0,J$b[6]=J$c[0],J$b[7]=J$c[1],J$b[8]=1},J$i.createFromRotation=function(J$a,J$b){var J$c=J$b.elements,J$d=Math.sin(J$a),J$e=Math.cos(J$a);J$c[0]=J$e,J$c[1]=J$d,J$c[2]=0,J$c[3]=-J$d,J$c[4]=J$e,J$c[5]=0,J$c[6]=0,J$c[7]=0,J$c[8]=1},J$i.createFromScaling=function(J$a,J$b){var J$c=J$b.elements,J$d=J$a.elements;J$c[0]=J$d[0],J$c[1]=0,J$c[2]=0,J$c[3]=0,J$c[4]=J$d[1],J$c[5]=0,J$c[6]=0,J$c[7]=0,J$c[8]=1},J$i.createFromMatrix4x4=function(J$a,J$b){J$b[0]=J$a[0],J$b[1]=J$a[1],J$b[2]=J$a[2],J$b[3]=J$a[4],J$b[4]=J$a[5],J$b[5]=J$a[6],J$b[6]=J$a[8],J$b[7]=J$a[9],J$b[8]=J$a[10]},J$i.multiply=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements,J$g=J$e[0],J$h=J$e[1],J$i=J$e[2],J$j=J$e[3],J$k=J$e[4],J$l=J$e[5],J$m=J$e[6],J$n=J$e[7],J$o=J$e[8],J$p=J$f[0],J$q=J$f[1],J$r=J$f[2],J$u=J$f[3],J$v=J$f[4],J$w=J$f[5],J$x=J$f[6],J$y=J$f[7],J$z=J$f[8];J$d[0]=J$p*J$g+J$q*J$j+J$r*J$m,J$d[1]=J$p*J$h+J$q*J$k+J$r*J$n,J$d[2]=J$p*J$i+J$q*J$l+J$r*J$o,J$d[3]=J$u*J$g+J$v*J$j+J$w*J$m,J$d[4]=J$u*J$h+J$v*J$k+J$w*J$n,J$d[5]=J$u*J$i+J$v*J$l+J$w*J$o,J$d[6]=J$x*J$g+J$y*J$j+J$z*J$m,J$d[7]=J$x*J$h+J$y*J$k+J$z*J$n,J$d[8]=J$x*J$i+J$y*J$l+J$z*J$o},J$i.lookAt=function(J$a,J$b,J$c,J$d){J$gb.subtract(J$a,J$b,J$i._tempV30),J$gb.normalize(J$i._tempV30,J$i._tempV30),J$gb.cross(J$c,J$i._tempV30,J$i._tempV31),J$gb.normalize(J$i._tempV31,J$i._tempV31),J$gb.cross(J$i._tempV30,J$i._tempV31,J$i._tempV32);var J$e=J$i._tempV30.elements,J$f=J$i._tempV31.elements,J$g=J$i._tempV32.elements,J$h=J$d.elements;J$h[0]=J$f[0],J$h[3]=J$f[1],J$h[6]=J$f[2],J$h[1]=J$g[0],J$h[4]=J$g[1],J$h[7]=J$g[2],J$h[2]=J$e[0],J$h[5]=J$e[1],J$h[8]=J$e[2]},J$i.DEFAULT=new J$i,J$l(J$i,["_tempV30",function(){return this._tempV30=new J$gb},"_tempV31",function(){return this._tempV31=new J$gb},"_tempV32",function(){return this._tempV32=new J$gb}]),J$i}(),J$ab=function(){function J$B(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l,J$m,J$n,J$o,J$p){void 0===J$a&&(J$a=1),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=1),void 0===J$g&&(J$g=0),void 0===J$h&&(J$h=0),void 0===J$i&&(J$i=0),void 0===J$j&&(J$j=0),void 0===J$k&&(J$k=1),void 0===J$l&&(J$l=0),void 0===J$m&&(J$m=0),void 0===J$n&&(J$n=0),void 0===J$o&&(J$o=0),void 0===J$p&&(J$p=1);var J$q=this.elements=new Float32Array(16);J$q[0]=J$a,J$q[1]=J$b,J$q[2]=J$c,J$q[3]=J$d,J$q[4]=J$e,J$q[5]=J$f,J$q[6]=J$g,J$q[7]=J$h,J$q[8]=J$i,J$q[9]=J$j,J$q[10]=J$k,J$q[11]=J$l,J$q[12]=J$m,J$q[13]=J$n,J$q[14]=J$o,J$q[15]=J$p}J$n(J$B,"laya.d3.math.Matrix4x4");var J$a=J$B.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.getElementByRowColumn=function(J$a,J$b){if(J$a<0||3<J$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(J$b<0||3<J$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*J$a+J$b]},J$a.setElementByRowColumn=function(J$a,J$b,J$c){if(J$a<0||3<J$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(J$b<0||3<J$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*J$a+J$b]=J$c},J$a.equalsOtherMatrix=function(J$a){var J$b=this.elements,J$c=J$a.elements;return J$sa.nearEqual(J$b[0],J$c[0])&&J$sa.nearEqual(J$b[1],J$c[1])&&J$sa.nearEqual(J$b[2],J$c[2])&&J$sa.nearEqual(J$b[3],J$c[3])&&J$sa.nearEqual(J$b[4],J$c[4])&&J$sa.nearEqual(J$b[5],J$c[5])&&J$sa.nearEqual(J$b[6],J$c[6])&&J$sa.nearEqual(J$b[7],J$c[7])&&J$sa.nearEqual(J$b[8],J$c[8])&&J$sa.nearEqual(J$b[9],J$c[9])&&J$sa.nearEqual(J$b[10],J$c[10])&&J$sa.nearEqual(J$b[11],J$c[11])&&J$sa.nearEqual(J$b[12],J$c[12])&&J$sa.nearEqual(J$b[13],J$c[13])&&J$sa.nearEqual(J$b[14],J$c[14])&&J$sa.nearEqual(J$b[15],J$c[15])},J$a.decomposeTransRotScale=function(J$a,J$b,J$c){var J$d=J$B._tempMatrix4x4;return this.decomposeTransRotMatScale(J$a,J$d,J$c)?(J$cb.createFromMatrix4x4(J$d,J$b),!0):(J$b.identity(),!1)},J$a.decomposeTransRotMatScale=function(J$a,J$b,J$c){var J$d=this.elements,J$e=J$a.elements,J$f=J$b.elements,J$g=J$c.elements;J$e[0]=J$d[12],J$e[1]=J$d[13],J$e[2]=J$d[14];var J$h=J$d[0],J$i=J$d[1],J$j=J$d[2],J$k=J$d[4],J$l=J$d[5],J$m=J$d[6],J$n=J$d[8],J$o=J$d[9],J$p=J$d[10],J$q=J$g[0]=Math.sqrt(J$h*J$h+J$i*J$i+J$j*J$j),J$r=J$g[1]=Math.sqrt(J$k*J$k+J$l*J$l+J$m*J$m),J$u=J$g[2]=Math.sqrt(J$n*J$n+J$o*J$o+J$p*J$p);if(J$sa.isZero(J$q)||J$sa.isZero(J$r)||J$sa.isZero(J$u))return J$f[1]=J$f[2]=J$f[3]=J$f[4]=J$f[6]=J$f[7]=J$f[8]=J$f[9]=J$f[11]=J$f[12]=J$f[13]=J$f[14]=0,J$f[0]=J$f[5]=J$f[10]=J$f[15]=1,!1;var J$v=J$B._tempVector0,J$w=J$v.elements;J$w[0]=J$n/J$u,J$w[1]=J$o/J$u,J$w[2]=J$p/J$u;var J$x=J$B._tempVector1,J$y=J$x.elements;J$y[0]=J$h/J$q,J$y[1]=J$i/J$q,J$y[2]=J$j/J$q;var J$z=J$B._tempVector2;J$gb.cross(J$v,J$x,J$z);var J$A=J$B._tempVector1;return J$gb.cross(J$z,J$v,J$A),J$f[3]=J$f[7]=J$f[11]=J$f[12]=J$f[13]=J$f[14]=0,J$f[15]=1,J$f[0]=J$A.x,J$f[1]=J$A.y,J$f[2]=J$A.z,J$f[4]=J$z.x,J$f[5]=J$z.y,J$f[6]=J$z.z,J$f[8]=J$v.x,J$f[9]=J$v.y,J$f[10]=J$v.z,J$f[0]*J$h+J$f[1]*J$i+J$f[2]*J$j<0&&(J$g[0]=-J$q),J$f[4]*J$k+J$f[5]*J$l+J$f[6]*J$m<0&&(J$g[1]=-J$r),J$f[8]*J$n+J$f[9]*J$o+J$f[10]*J$p<0&&(J$g[2]=-J$u),!0},J$a.decomposeYawPitchRoll=function(J$a){var J$b=J$a.elements,J$c=Math.asin(-this.elements[9]);J$b[1]=J$c,Math.cos(J$c)>J$sa.zeroTolerance?(J$b[2]=Math.atan2(this.elements[1],this.elements[5]),J$b[0]=Math.atan2(this.elements[8],this.elements[10])):(J$b[2]=Math.atan2(-this.elements[4],this.elements[0]),J$b[0]=0)},J$a.normalize=function(){var J$a=this.elements,J$b=J$a[0],J$c=J$a[1],J$d=J$a[2],J$e=Math.sqrt(J$b*J$b+J$c*J$c+J$d*J$d);if(!J$e)return J$a[0]=0,J$a[1]=0,void(J$a[2]=0);1!=J$e&&(J$e=1/J$e,J$a[0]=J$b*J$e,J$a[1]=J$c*J$e,J$a[2]=J$d*J$e)},J$a.transpose=function(){var J$a,J$b;return J$b=(J$a=this.elements)[1],J$a[1]=J$a[4],J$a[4]=J$b,J$b=J$a[2],J$a[2]=J$a[8],J$a[8]=J$b,J$b=J$a[3],J$a[3]=J$a[12],J$a[12]=J$b,J$b=J$a[6],J$a[6]=J$a[9],J$a[9]=J$b,J$b=J$a[7],J$a[7]=J$a[13],J$a[13]=J$b,J$b=J$a[11],J$a[11]=J$a[14],J$a[14]=J$b,this},J$a.invert=function(J$a){var J$b=this.elements,J$c=J$a.elements,J$d=J$b[0],J$e=J$b[1],J$f=J$b[2],J$g=J$b[3],J$h=J$b[4],J$i=J$b[5],J$j=J$b[6],J$k=J$b[7],J$l=J$b[8],J$m=J$b[9],J$n=J$b[10],J$o=J$b[11],J$p=J$b[12],J$q=J$b[13],J$r=J$b[14],J$u=J$b[15],J$v=J$d*J$i-J$e*J$h,J$w=J$d*J$j-J$f*J$h,J$x=J$d*J$k-J$g*J$h,J$y=J$e*J$j-J$f*J$i,J$z=J$e*J$k-J$g*J$i,J$A=J$f*J$k-J$g*J$j,J$B=J$l*J$q-J$m*J$p,J$C=J$l*J$r-J$n*J$p,J$D=J$l*J$u-J$o*J$p,J$E=J$m*J$r-J$n*J$q,J$F=J$m*J$u-J$o*J$q,J$G=J$n*J$u-J$o*J$r,J$H=J$v*J$G-J$w*J$F+J$x*J$E+J$y*J$D-J$z*J$C+J$A*J$B;0!==Math.abs(J$H)&&(J$H=1/J$H,J$c[0]=(J$i*J$G-J$j*J$F+J$k*J$E)*J$H,J$c[1]=(J$f*J$F-J$e*J$G-J$g*J$E)*J$H,J$c[2]=(J$q*J$A-J$r*J$z+J$u*J$y)*J$H,J$c[3]=(J$n*J$z-J$m*J$A-J$o*J$y)*J$H,J$c[4]=(J$j*J$D-J$h*J$G-J$k*J$C)*J$H,J$c[5]=(J$d*J$G-J$f*J$D+J$g*J$C)*J$H,J$c[6]=(J$r*J$x-J$p*J$A-J$u*J$w)*J$H,J$c[7]=(J$l*J$A-J$n*J$x+J$o*J$w)*J$H,J$c[8]=(J$h*J$F-J$i*J$D+J$k*J$B)*J$H,J$c[9]=(J$e*J$D-J$d*J$F-J$g*J$B)*J$H,J$c[10]=(J$p*J$z-J$q*J$x+J$u*J$v)*J$H,J$c[11]=(J$m*J$x-J$l*J$z-J$o*J$v)*J$H,J$c[12]=(J$i*J$C-J$h*J$E-J$j*J$B)*J$H,J$c[13]=(J$d*J$E-J$e*J$C+J$f*J$B)*J$H,J$c[14]=(J$q*J$w-J$p*J$y-J$r*J$v)*J$H,J$c[15]=(J$l*J$y-J$m*J$w+J$n*J$v)*J$H)},J$a.identity=function(){var J$a=this.elements;J$a[1]=J$a[2]=J$a[3]=J$a[4]=J$a[6]=J$a[7]=J$a[8]=J$a[9]=J$a[11]=J$a[12]=J$a[13]=J$a[14]=0,J$a[0]=J$a[5]=J$a[10]=J$a[15]=1},J$a.cloneTo=function(J$a){var J$b,J$c,J$d;if((J$c=this.elements)!==(J$d=J$a.elements))for(J$b=0;J$b<16;++J$b)J$d[J$b]=J$c[J$b]},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$a.getTranslationVector=function(J$a){var J$b=this.elements,J$c=J$a.elements;J$c[0]=J$b[12],J$c[1]=J$b[13],J$c[2]=J$b[14]},J$a.setTranslationVector=function(J$a){var J$b=this.elements,J$c=J$a.elements;J$b[12]=J$c[0],J$b[13]=J$c[1],J$b[14]=J$c[2]},J$a.getForward=function(J$a){var J$b=this.elements,J$c=J$a.elements;J$c[0]=-J$b[8],J$c[1]=-J$b[9],J$c[2]=-J$b[10]},J$a.setForward=function(J$a){var J$b=this.elements,J$c=J$a.elements;J$b[8]=-J$c[0],J$b[9]=-J$c[1],J$b[10]=-J$c[2]},J$B.createRotationX=function(J$a,J$b){var J$c=J$b.elements,J$d=Math.sin(J$a),J$e=Math.cos(J$a);J$c[1]=J$c[2]=J$c[3]=J$c[4]=J$c[7]=J$c[8]=J$c[11]=J$c[12]=J$c[13]=J$c[14]=0,J$c[0]=J$c[15]=1,J$c[5]=J$c[10]=J$e,J$c[6]=J$d,J$c[9]=-J$d},J$B.createRotationY=function(J$a,J$b){var J$c=J$b.elements,J$d=Math.sin(J$a),J$e=Math.cos(J$a);J$c[1]=J$c[3]=J$c[4]=J$c[6]=J$c[7]=J$c[9]=J$c[11]=J$c[12]=J$c[13]=J$c[14]=0,J$c[5]=J$c[15]=1,J$c[0]=J$c[10]=J$e,J$c[2]=-J$d,J$c[8]=J$d},J$B.createRotationZ=function(J$a,J$b){var J$c=J$b.elements,J$d=Math.sin(J$a),J$e=Math.cos(J$a);J$c[2]=J$c[3]=J$c[6]=J$c[7]=J$c[8]=J$c[9]=J$c[11]=J$c[12]=J$c[13]=J$c[14]=0,J$c[10]=J$c[15]=1,J$c[0]=J$c[5]=J$e,J$c[1]=J$d,J$c[4]=-J$d},J$B.createRotationYawPitchRoll=function(J$a,J$b,J$c,J$d){J$cb.createFromYawPitchRoll(J$a,J$b,J$c,J$B._tempQuaternion),J$B.createRotationQuaternion(J$B._tempQuaternion,J$d)},J$B.createRotationAxis=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=Math.cos(J$b),J$i=Math.sin(J$b),J$j=J$e*J$e,J$k=J$f*J$f,J$l=J$g*J$g,J$m=J$e*J$f,J$n=J$e*J$g,J$o=J$f*J$g,J$p=J$c.elements;J$p[3]=J$p[7]=J$p[11]=J$p[12]=J$p[13]=J$p[14]=0,J$p[15]=1,J$p[0]=J$j+J$h*(1-J$j),J$p[1]=J$m-J$h*J$m+J$i*J$g,J$p[2]=J$n-J$h*J$n-J$i*J$f,J$p[4]=J$m-J$h*J$m-J$i*J$g,J$p[5]=J$k+J$h*(1-J$k),J$p[6]=J$o-J$h*J$o+J$i*J$e,J$p[8]=J$n-J$h*J$n+J$i*J$f,J$p[9]=J$o-J$h*J$o-J$i*J$e,J$p[10]=J$l+J$h*(1-J$l)},J$B.createRotationQuaternion=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0],J$f=J$c[1],J$g=J$c[2],J$h=J$c[3],J$i=J$e*J$e,J$j=J$f*J$f,J$k=J$g*J$g,J$l=J$e*J$f,J$m=J$g*J$h,J$n=J$g*J$e,J$o=J$f*J$h,J$p=J$f*J$g,J$q=J$e*J$h;J$d[3]=J$d[7]=J$d[11]=J$d[12]=J$d[13]=J$d[14]=0,J$d[15]=1,J$d[0]=1-2*(J$j+J$k),J$d[1]=2*(J$l+J$m),J$d[2]=2*(J$n-J$o),J$d[4]=2*(J$l-J$m),J$d[5]=1-2*(J$k+J$i),J$d[6]=2*(J$p+J$q),J$d[8]=2*(J$n+J$o),J$d[9]=2*(J$p-J$q),J$d[10]=1-2*(J$j+J$i)},J$B.createTranslate=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;J$d[4]=J$d[8]=J$d[1]=J$d[9]=J$d[2]=J$d[6]=J$d[3]=J$d[7]=J$d[11]=0,J$d[0]=J$d[5]=J$d[10]=J$d[15]=1,J$d[12]=J$c[0],J$d[13]=J$c[1],J$d[14]=J$c[2]},J$B.createScaling=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;J$d[0]=J$c[0],J$d[5]=J$c[1],J$d[10]=J$c[2],J$d[1]=J$d[4]=J$d[8]=J$d[12]=J$d[9]=J$d[13]=J$d[2]=J$d[6]=J$d[14]=J$d[3]=J$d[7]=J$d[11]=0,J$d[15]=1},J$B.multiply=function(J$a,J$b,J$c){var J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k;for(J$e=J$c.elements,J$f=J$a.elements,J$e===(J$g=J$b.elements)&&(J$g=J$g.slice()),J$d=0;J$d<4;J$d++)J$h=J$f[J$d],J$i=J$f[J$d+4],J$j=J$f[J$d+8],J$k=J$f[J$d+12],J$e[J$d]=J$h*J$g[0]+J$i*J$g[1]+J$j*J$g[2]+J$k*J$g[3],J$e[J$d+4]=J$h*J$g[4]+J$i*J$g[5]+J$j*J$g[6]+J$k*J$g[7],J$e[J$d+8]=J$h*J$g[8]+J$i*J$g[9]+J$j*J$g[10]+J$k*J$g[11],J$e[J$d+12]=J$h*J$g[12]+J$i*J$g[13]+J$j*J$g[14]+J$k*J$g[15]},J$B.createFromQuaternion=function(J$a,J$b){var J$c=J$b.elements,J$d=J$a.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=J$e+J$e,J$j=J$f+J$f,J$k=J$g+J$g,J$l=J$e*J$i,J$m=J$f*J$i,J$n=J$f*J$j,J$o=J$g*J$i,J$p=J$g*J$j,J$q=J$g*J$k,J$r=J$h*J$i,J$u=J$h*J$j,J$v=J$h*J$k;J$c[0]=1-J$n-J$q,J$c[1]=J$m+J$v,J$c[2]=J$o-J$u,J$c[3]=0,J$c[4]=J$m-J$v,J$c[5]=1-J$l-J$q,J$c[6]=J$p+J$r,J$c[7]=0,J$c[8]=J$o+J$u,J$c[9]=J$p-J$r,J$c[10]=1-J$l-J$n,J$c[11]=0,J$c[12]=0,J$c[13]=0,J$c[14]=0,J$c[15]=1},J$B.createAffineTransformation=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements,J$f=J$b.elements,J$g=J$c.elements,J$h=J$d.elements,J$i=J$f[0],J$j=J$f[1],J$k=J$f[2],J$l=J$f[3],J$m=J$i+J$i,J$n=J$j+J$j,J$o=J$k+J$k,J$p=J$i*J$m,J$q=J$i*J$n,J$r=J$i*J$o,J$u=J$j*J$n,J$v=J$j*J$o,J$w=J$k*J$o,J$x=J$l*J$m,J$y=J$l*J$n,J$z=J$l*J$o,J$A=J$g[0],J$B=J$g[1],J$C=J$g[2];J$h[0]=(1-(J$u+J$w))*J$A,J$h[1]=(J$q+J$z)*J$A,J$h[2]=(J$r-J$y)*J$A,J$h[3]=0,J$h[4]=(J$q-J$z)*J$B,J$h[5]=(1-(J$p+J$w))*J$B,J$h[6]=(J$v+J$x)*J$B,J$h[7]=0,J$h[8]=(J$r+J$y)*J$C,J$h[9]=(J$v-J$x)*J$C,J$h[10]=(1-(J$p+J$u))*J$C,J$h[11]=0,J$h[12]=J$e[0],J$h[13]=J$e[1],J$h[14]=J$e[2],J$h[15]=1},J$B.createLookAt=function(J$a,J$b,J$c,J$d){var J$e=J$d.elements,J$f=J$B._tempVector0,J$g=J$B._tempVector1,J$h=J$B._tempVector2;J$gb.subtract(J$a,J$b,J$h),J$gb.normalize(J$h,J$h),J$gb.cross(J$c,J$h,J$f),J$gb.normalize(J$f,J$f),J$gb.cross(J$h,J$f,J$g),J$d.identity(),J$e[0]=J$f.x,J$e[4]=J$f.y,J$e[8]=J$f.z,J$e[1]=J$g.x,J$e[5]=J$g.y,J$e[9]=J$g.z,J$e[2]=J$h.x,J$e[6]=J$h.y,J$e[10]=J$h.z,J$e[12]=-J$gb.dot(J$f,J$a),J$e[13]=-J$gb.dot(J$g,J$a),J$e[14]=-J$gb.dot(J$h,J$a)},J$B.createPerspective=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$e.elements,J$g=1/Math.tan(J$a/2),J$h=1/(J$c-J$d);J$f[0]=J$g/J$b,J$f[5]=J$g,J$f[10]=(J$d+J$c)*J$h,J$f[11]=-1,J$f[14]=2*J$d*J$c*J$h,J$f[1]=J$f[2]=J$f[3]=J$f[4]=J$f[6]=J$f[7]=J$f[8]=J$f[9]=J$f[12]=J$f[13]=J$f[15]=0},J$B.createOrthoOffCenterRH=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h=J$g.elements,J$i=1/(J$a-J$b),J$j=1/(J$c-J$d),J$k=1/(J$e-J$f);J$h[1]=J$h[2]=J$h[3]=J$h[4]=J$h[6]=J$h[7]=J$h[8]=J$h[9]=J$h[11]=0,J$h[15]=1,J$h[0]=-2*J$i,J$h[5]=-2*J$j,J$h[10]=2*J$k,J$h[12]=(J$a+J$b)*J$i,J$h[13]=(J$d+J$c)*J$j,J$h[14]=(J$f+J$e)*J$k},J$B.translation=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;J$d[0]=J$d[5]=J$d[10]=J$d[15]=1,J$d[12]=J$c[0],J$d[13]=J$c[1],J$d[14]=J$c[2]},J$l(J$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new J$B},"_tempVector0",function(){return this._tempVector0=new J$gb},"_tempVector1",function(){return this._tempVector1=new J$gb},"_tempVector2",function(){return this._tempVector2=new J$gb},"_tempQuaternion",function(){return this._tempQuaternion=new J$cb},"DEFAULT",function(){return this.DEFAULT=new J$B},"ZERO",function(){return this.ZERO=new J$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),J$B}(),J$bb=(function(){function J$v(J$a,J$b){this.extents=null,this.transformation=null,this.extents=J$a,this.transformation=J$b}J$n(J$v,"laya.d3.math.OrientedBoundBox");var J$a=J$v.prototype;J$a.getCorners=function(J$a){var J$b=J$v._tempV30.elements,J$c=J$v._tempV31.elements,J$d=J$v._tempV32.elements,J$e=this.extents.elements;J$b[0]=J$e[0],J$b[1]=J$b[2]=0,J$c[1]=J$e[1],J$c[0]=J$c[2]=0,J$d[2]=J$e[2],J$d[0]=J$d[1]=0,J$gb.TransformNormal(J$v._tempV30,this.transformation,J$v._tempV30),J$gb.TransformNormal(J$v._tempV31,this.transformation,J$v._tempV31),J$gb.TransformNormal(J$v._tempV32,this.transformation,J$v._tempV32);var J$f=J$v._tempV33;this.transformation.getTranslationVector(J$f),J$a.length=8,J$gb.add(J$f,J$v._tempV30,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV32,J$a[0]),J$gb.add(J$f,J$v._tempV30,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV32,J$a[1]),J$gb.subtract(J$f,J$v._tempV30,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV32,J$a[2]),J$gb.subtract(J$f,J$v._tempV30,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV32,J$a[3]),J$gb.add(J$f,J$v._tempV30,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV32,J$a[4]),J$gb.add(J$f,J$v._tempV30,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV32,J$a[5]),J$gb.subtract(J$f,J$v._tempV30,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV32,J$a[6]),J$gb.subtract(J$f,J$v._tempV30,J$v._tempV34),J$gb.subtract(J$v._tempV34,J$v._tempV31,J$v._tempV34),J$gb.add(J$v._tempV34,J$v._tempV32,J$a[7])},J$a.transform=function(J$a){J$ab.multiply(this.transformation,J$a,this.transformation)},J$a.scale=function(J$a){J$gb.multiply(this.extents,J$a,this.extents)},J$a.translate=function(J$a){this.transformation.getTranslationVector(J$v._tempV30),J$gb.add(J$v._tempV30,J$a,J$v._tempV31),this.transformation.setTranslationVector(J$v._tempV31)},J$a.Size=function(J$a){J$gb.scale(this.extents,2,J$a)},J$a.getSize=function(J$a){var J$b=this.extents.elements;J$v._tempV30.x=J$b[0],J$v._tempV31.y=J$b[1],J$v._tempV32.z=J$b[2],J$gb.TransformNormal(J$v._tempV30,this.transformation,J$v._tempV30),J$gb.TransformNormal(J$v._tempV31,this.transformation,J$v._tempV31),J$gb.TransformNormal(J$v._tempV31,this.transformation,J$v._tempV32);var J$c=J$a.elements;J$c[0]=J$gb.scalarLength(J$v._tempV30),J$c[1]=J$gb.scalarLength(J$v._tempV31),J$c[2]=J$gb.scalarLength(J$v._tempV32)},J$a.getSizeSquared=function(J$a){var J$b=this.extents.elements;J$v._tempV30.x=J$b[0],J$v._tempV31.y=J$b[1],J$v._tempV32.z=J$b[2],J$gb.TransformNormal(J$v._tempV30,this.transformation,J$v._tempV30),J$gb.TransformNormal(J$v._tempV31,this.transformation,J$v._tempV31),J$gb.TransformNormal(J$v._tempV31,this.transformation,J$v._tempV32);var J$c=J$a.elements;J$c[0]=J$gb.scalarLengthSquared(J$v._tempV30),J$c[1]=J$gb.scalarLengthSquared(J$v._tempV31),J$c[2]=J$gb.scalarLengthSquared(J$v._tempV32)},J$a.getCenter=function(J$a){this.transformation.getTranslationVector(J$a)},J$a.containsPoint=function(J$a){var J$b=this.extents.elements,J$c=J$b[0],J$d=J$b[1],J$e=J$b[2];this.transformation.invert(J$v._tempM0),J$gb.transformCoordinate(J$a,J$v._tempM0,J$v._tempV30);var J$f=J$v._tempV30.elements,J$g=Math.abs(J$f[0]),J$h=Math.abs(J$f[1]),J$i=Math.abs(J$f[2]);return J$sa.nearEqual(J$g,J$c)&&J$sa.nearEqual(J$h,J$d)&&J$sa.nearEqual(J$i,J$e)?2:J$g<J$c&&J$h<J$d&&J$i<J$e?1:0},J$a.containsPoints=function(J$a){var J$b=this.extents.elements,J$c=J$b[0],J$d=J$b[1],J$e=J$b[2];this.transformation.invert(J$v._tempM0);for(var J$f=!0,J$g=!1,J$h=0;J$h<J$a.length;J$h++){J$gb.transformCoordinate(J$a[J$h],J$v._tempM0,J$v._tempV30);var J$i=J$v._tempV30.elements,J$j=Math.abs(J$i[0]),J$k=Math.abs(J$i[1]),J$l=Math.abs(J$i[2]);J$sa.nearEqual(J$j,J$c)&&J$sa.nearEqual(J$k,J$d)&&J$sa.nearEqual(J$l,J$e)&&(J$g=!0),J$j<J$c&&J$k<J$d&&J$l<J$e?J$g=!0:J$f=!1}return J$f?1:J$g?2:0},J$a.containsSphere=function(J$a,J$b){void 0===J$b&&(J$b=!1);var J$c=this.extents.elements,J$d=J$c[0],J$e=J$c[1],J$f=J$c[2],J$g=J$a.radius;this.transformation.invert(J$v._tempM0),J$gb.transformCoordinate(J$a.center,J$v._tempM0,J$v._tempV30);var J$h=NaN;if(J$h=J$b?J$g:(J$gb.scale(J$gb.UnitX,J$g,J$v._tempV31),J$gb.TransformNormal(J$v._tempV31,J$v._tempM0,J$v._tempV31),J$gb.scalarLength(J$v._tempV31)),J$gb.scale(this.extents,-1,J$v._tempV32),J$gb.Clamp(J$v._tempV30,J$v._tempV32,this.extents,J$v._tempV33),J$h*J$h<J$gb.distanceSquared(J$v._tempV30,J$v._tempV33))return 0;var J$i=J$v._tempV30.elements,J$j=J$i[0],J$k=J$i[1],J$l=J$i[2],J$m=J$v._tempV32.elements,J$n=J$m[0],J$o=J$m[1],J$p=J$m[2];return J$n+J$h<=J$j&&J$j<=J$d-J$h&&J$h<J$d-J$n&&J$o+J$h<=J$k&&J$k<=J$e-J$h&&J$h<J$e-J$o&&J$p+J$h<=J$l&&J$l<=J$f-J$h&&J$h<J$f-J$p?1:2},J$a.containsOrientedBoundBox=function(J$a){var J$b=0,J$c=0;J$a.getCorners(J$v._corners);var J$d=this.containsPoints(J$v._corners);if(0!=J$d)return J$d;var J$e=this.extents.elements;J$a.extents.cloneTo(J$v._tempV35);var J$f=J$v._tempV35.elements;J$v._getRows(this.transformation,J$v._rows1),J$v._getRows(J$a.transformation,J$v._rows2);var J$g=NaN;for(J$b=0;J$b<4;J$b++)for(J$c=0;J$c<4;J$c++)3==J$b||3==J$c?(J$v._tempM0.setElementByRowColumn(J$b,J$c,0),J$v._tempM1.setElementByRowColumn(J$b,J$c,0)):(J$g=J$gb.dot(J$v._rows1[J$b],J$v._rows2[J$c]),J$v._tempM0.setElementByRowColumn(J$b,J$c,J$g),J$v._tempM1.setElementByRowColumn(J$b,J$c,Math.abs(J$g)));J$a.getCenter(J$v._tempV34),this.getCenter(J$v._tempV36),J$gb.subtract(J$v._tempV34,J$v._tempV36,J$v._tempV30);var J$h=J$v._tempV31.elements;J$h[0]=J$gb.dot(J$v._tempV30,J$v._rows1[0]),J$h[1]=J$gb.dot(J$v._tempV30,J$v._rows1[1]),J$h[2]=J$gb.dot(J$v._tempV30,J$v._rows1[2]);var J$i=J$v._tempV32.elements,J$j=J$v._tempV33.elements;for(J$b=0;J$b<3;J$b++)if(J$i[0]=J$v._tempM1.getElementByRowColumn(J$b,0),J$i[1]=J$v._tempM1.getElementByRowColumn(J$b,1),J$i[2]=J$v._tempM1.getElementByRowColumn(J$b,2),J$e[J$b]+J$gb.dot(J$v._tempV35,J$v._tempV32)<Math.abs(J$h[J$b]))return 0;for(J$c=0;J$c<3;J$c++)if(J$i[0]=J$v._tempM1.getElementByRowColumn(0,J$c),J$i[1]=J$v._tempM1.getElementByRowColumn(1,J$c),J$i[2]=J$v._tempM1.getElementByRowColumn(2,J$c),J$j[0]=J$v._tempM0.getElementByRowColumn(0,J$c),J$j[1]=J$v._tempM0.getElementByRowColumn(1,J$c),J$j[2]=J$v._tempM0.getElementByRowColumn(2,J$c),J$gb.dot(this.extents,J$v._tempV32)+J$f[J$c]<Math.abs(J$gb.dot(J$v._tempV31,J$v._tempV33)))return 0;for(J$b=0;J$b<3;J$b++)for(J$c=0;J$c<3;J$c++){var J$k=(J$b+1)%3,J$l=(J$b+2)%3,J$m=(J$c+1)%3,J$n=(J$c+2)%3;if(J$e[J$k]*J$v._tempM1.getElementByRowColumn(J$l,J$c)+J$e[J$l]*J$v._tempM1.getElementByRowColumn(J$k,J$c)+(J$f[J$m]*J$v._tempM1.getElementByRowColumn(J$b,J$n)+J$f[J$n]*J$v._tempM1.getElementByRowColumn(J$b,J$m))<Math.abs(J$h[J$l]*J$v._tempM0.getElementByRowColumn(J$k,J$c)-J$h[J$k]*J$v._tempM0.getElementByRowColumn(J$l,J$c)))return 0}return 2},J$a.containsLine=function(J$a,J$b){J$v._corners[0]=J$a,J$v._corners[1]=J$b;var J$c=this.containsPoints(J$v._corners);if(0!=J$c)return J$c;var J$d=this.extents.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2];this.transformation.invert(J$v._tempM0),J$gb.transformCoordinate(J$a,J$v._tempM0,J$v._tempV30),J$gb.transformCoordinate(J$b,J$v._tempM0,J$v._tempV31),J$gb.add(J$v._tempV30,J$v._tempV31,J$v._tempV32),J$gb.scale(J$v._tempV32,.5,J$v._tempV32),J$gb.subtract(J$v._tempV30,J$v._tempV32,J$v._tempV33);var J$h=J$v._tempV33.elements,J$i=J$h[0],J$j=J$h[1],J$k=J$h[2],J$l=J$v._tempV34.elements,J$m=J$l[0]=Math.abs(J$h[0]),J$n=J$l[1]=Math.abs(J$h[1]),J$o=J$l[2]=Math.abs(J$h[2]),J$p=J$v._tempV32.elements,J$q=J$p[0],J$r=J$p[1],J$u=J$p[2];return Math.abs(J$q)>J$e+J$m?0:Math.abs(J$r)>J$f+J$n?0:Math.abs(J$u)>J$g+J$o?0:Math.abs(J$r*J$k-J$u*J$j)>J$f*J$o+J$g*J$n?0:Math.abs(J$q*J$k-J$u*J$i)>J$e*J$o+J$g*J$m?0:Math.abs(J$q*J$j-J$r*J$i)>J$e*J$n+J$f*J$m?0:2},J$a.containsBoundBox=function(J$a){var J$b=0,J$c=0,J$d=J$a.min,J$e=J$a.max;J$a.getCorners(J$v._corners);var J$f=this.containsPoints(J$v._corners);if(0!=J$f)return J$f;J$gb.subtract(J$e,J$d,J$v._tempV30),J$gb.scale(J$v._tempV30,.5,J$v._tempV30),J$gb.add(J$d,J$v._tempV30,J$v._tempV30),J$gb.subtract(J$e,J$v._tempV30,J$v._tempV31);var J$g=this.extents.elements,J$h=J$v._tempV31.elements;J$v._getRows(this.transformation,J$v._rows1),this.transformation.invert(J$v._tempM0);for(J$b=0;J$b<3;J$b++)for(J$c=0;J$c<3;J$c++)J$v._tempM1.setElementByRowColumn(J$b,J$c,Math.abs(J$v._tempM0.getElementByRowColumn(J$b,J$c)));this.getCenter(J$v._tempV35),J$gb.subtract(J$v._tempV30,J$v._tempV35,J$v._tempV32);var J$i=J$v._tempV31.elements;J$i[0]=J$gb.dot(J$v._tempV32,J$v._rows1[0]),J$i[1]=J$gb.dot(J$v._tempV32,J$v._rows1[1]),J$i[2]=J$gb.dot(J$v._tempV32,J$v._rows1[2]);var J$j=J$v._tempV33.elements,J$k=J$v._tempV34.elements;for(J$b=0;J$b<3;J$b++)if(J$j[0]=J$v._tempM1.getElementByRowColumn(J$b,0),J$j[1]=J$v._tempM1.getElementByRowColumn(J$b,1),J$j[2]=J$v._tempM1.getElementByRowColumn(J$b,2),J$g[J$b]+J$gb.dot(J$v._tempV31,J$v._tempV33)<Math.abs(J$i[J$b]))return 0;for(J$c=0;J$c<3;J$c++)if(J$j[0]=J$v._tempM1.getElementByRowColumn(0,J$c),J$j[1]=J$v._tempM1.getElementByRowColumn(1,J$c),J$j[2]=J$v._tempM1.getElementByRowColumn(2,J$c),J$k[0]=J$v._tempM0.getElementByRowColumn(0,J$c),J$k[1]=J$v._tempM0.getElementByRowColumn(1,J$c),J$k[2]=J$v._tempM0.getElementByRowColumn(2,J$c),J$gb.dot(this.extents,J$v._tempV33)+J$h[J$c]<Math.abs(J$gb.dot(J$v._tempV31,J$v._tempV34)))return 0;for(J$b=0;J$b<3;J$b++)for(J$c=0;J$c<3;J$c++){var J$l=(J$b+1)%3,J$m=(J$b+2)%3,J$n=(J$c+1)%3,J$o=(J$c+2)%3;if(J$g[J$l]*J$v._tempM1.getElementByRowColumn(J$m,J$c)+J$g[J$m]*J$v._tempM1.getElementByRowColumn(J$l,J$c)+(J$h[J$n]*J$v._tempM1.getElementByRowColumn(J$b,J$o)+J$h[J$o]*J$v._tempM1.getElementByRowColumn(J$b,J$n))<Math.abs(J$i[J$m]*J$v._tempM0.getElementByRowColumn(J$l,J$c)-J$i[J$l]*J$v._tempM0.getElementByRowColumn(J$m,J$c)))return 0}return 2},J$a.intersectsRay=function(J$a,J$b){J$gb.scale(this.extents,-1,J$v._tempV30),this.transformation.invert(J$v._tempM0),J$gb.TransformNormal(J$a.direction,J$v._tempM0,J$v._ray.direction),J$gb.transformCoordinate(J$a.origin,J$v._tempM0,J$v._ray.origin),J$v._boxBound1.min=J$v._tempV30,J$v._boxBound1.max=this.extents;var J$c=Collision.intersectsRayAndBoxRP(J$v._ray,J$v._boxBound1,J$b);return-1!==J$c&&J$gb.transformCoordinate(J$b,this.transformation,J$b),J$c},J$a._getLocalCorners=function(J$a){J$a.length=8;var J$b=this.extents.elements;J$v._tempV30.x=J$b[0],J$v._tempV31.y=J$b[1],J$v._tempV32.z=J$b[2],J$gb.add(J$v._tempV30,J$v._tempV31,J$v._tempV33),J$gb.add(J$v._tempV33,J$v._tempV32,J$a[0]),J$gb.add(J$v._tempV30,J$v._tempV31,J$v._tempV33),J$gb.subtract(J$v._tempV33,J$v._tempV32,J$a[1]),J$gb.subtract(J$v._tempV31,J$v._tempV30,J$v._tempV33),J$gb.subtract(J$v._tempV33,J$v._tempV30,J$a[2]),J$gb.subtract(J$v._tempV31,J$v._tempV30,J$v._tempV33),J$gb.add(J$v._tempV33,J$v._tempV32,J$a[3]),J$gb.subtract(J$v._tempV30,J$v._tempV31,J$v._tempV33),J$gb.add(J$v._tempV33,J$v._tempV32,J$a[4]),J$gb.subtract(J$v._tempV30,J$v._tempV31,J$v._tempV33),J$gb.subtract(J$v._tempV33,J$v._tempV32,J$a[5]),J$gb.scale(J$a[0],-1,J$a[6]),J$gb.subtract(J$v._tempV32,J$v._tempV30,J$v._tempV33),J$gb.subtract(J$v._tempV33,J$v._tempV31,J$a[7])},J$a.equals=function(J$a){return this.extents==J$a.extents&&this.transformation==J$a.transformation},J$a.cloneTo=function(J$a){var J$b=J$a;this.extents.cloneTo(J$b.extents),this.transformation.cloneTo(J$b.transformation)},J$v.createByBoundBox=function(J$a,J$b){var J$c=J$a.min,J$d=J$a.max;J$gb.subtract(J$d,J$c,J$v._tempV30),J$gb.scale(J$v._tempV30,.5,J$v._tempV30),J$gb.add(J$c,J$v._tempV30,J$v._tempV31),J$gb.subtract(J$d,J$v._tempV31,J$v._tempV32),J$ab.translation(J$v._tempV31,J$v._tempM0);var J$e=J$v._tempV32.clone(),J$f=J$v._tempM0.clone();J$b.extents=J$e,J$b.transformation=J$f},J$v.createByMinAndMaxVertex=function(J$a,J$b){return J$gb.subtract(J$b,J$a,J$v._tempV30),J$gb.scale(J$v._tempV30,.5,J$v._tempV30),J$gb.add(J$a,J$v._tempV30,J$v._tempV31),J$gb.subtract(J$b,J$v._tempV31,J$v._tempV32),J$ab.translation(J$v._tempV31,J$v._tempM0),new J$v(J$v._tempV32,J$v._tempM0)},J$v._getRows=function(J$a,J$b){J$b.length=3;var J$c=J$a.elements,J$d=J$b[0].elements;J$d[0]=J$c[0],J$d[1]=J$c[1],J$d[2]=J$c[2];var J$e=J$b[1].elements;J$e[0]=J$c[4],J$e[1]=J$c[5],J$e[2]=J$c[6];var J$f=J$b[2].elements;J$f[0]=J$c[8],J$f[1]=J$c[9],J$f[2]=J$c[10]},J$v.getObbtoObbMatrix4x4=function(J$a,J$b,J$c,J$d){var J$e=J$a.transformation,J$f=J$b.transformation;if(J$c){J$v._getRows(J$e,J$v._rows1),J$v._getRows(J$f,J$v._rows2);for(var J$g=0;J$g<3;J$g++)for(var J$h=0;J$h<3;J$h++)J$d.setElementByRowColumn(J$g,J$h,J$gb.dot(J$v._rows2[J$g],J$v._rows1[J$h]));J$b.getCenter(J$v._tempV30),J$a.getCenter(J$v._tempV31),J$gb.subtract(J$v._tempV30,J$v._tempV31,J$v._tempV32);var J$i=J$d.elements;J$i[12]=J$gb.dot(J$v._tempV32,J$v._rows1[0]),J$i[13]=J$gb.dot(J$v._tempV32,J$v._rows1[1]),J$i[14]=J$gb.dot(J$v._tempV32,J$v._rows1[2]),J$i[15]=1}else J$e.invert(J$v._tempM0),J$ab.multiply(J$f,J$v._tempM0,J$d)},J$v.merge=function(J$a,J$b,J$c){var J$d=J$a.extents,J$e=J$a.transformation;J$v.getObbtoObbMatrix4x4(J$a,J$b,J$c,J$v._tempM0),J$b._getLocalCorners(J$v._corners),J$gb.transformCoordinate(J$v._corners[0],J$v._tempM0,J$v._corners[0]),J$gb.transformCoordinate(J$v._corners[1],J$v._tempM0,J$v._corners[1]),J$gb.transformCoordinate(J$v._corners[2],J$v._tempM0,J$v._corners[2]),J$gb.transformCoordinate(J$v._corners[3],J$v._tempM0,J$v._corners[3]),J$gb.transformCoordinate(J$v._corners[4],J$v._tempM0,J$v._corners[4]),J$gb.transformCoordinate(J$v._corners[5],J$v._tempM0,J$v._corners[5]),J$gb.transformCoordinate(J$v._corners[6],J$v._tempM0,J$v._corners[6]),J$gb.transformCoordinate(J$v._corners[7],J$v._tempM0,J$v._corners[7]),J$gb.scale(J$d,-1,J$v._boxBound1.min),J$d.cloneTo(J$v._boxBound1.max),J$Za.createfromPoints(J$v._corners,J$v._boxBound2),J$Za.merge(J$v._boxBound2,J$v._boxBound1,J$v._boxBound3);var J$f=J$v._boxBound3.min,J$g=J$v._boxBound3.max;J$gb.subtract(J$g,J$f,J$v._tempV30),J$gb.scale(J$v._tempV30,.5,J$v._tempV30),J$gb.add(J$f,J$v._tempV30,J$v._tempV32),J$gb.subtract(J$g,J$v._tempV32,J$d),J$gb.transformCoordinate(J$v._tempV32,J$e,J$v._tempV33)},J$l(J$v,["_tempV30",function(){return this._tempV30=new J$gb},"_tempV31",function(){return this._tempV31=new J$gb},"_tempV32",function(){return this._tempV32=new J$gb},"_tempV33",function(){return this._tempV33=new J$gb},"_tempV34",function(){return this._tempV34=new J$gb},"_tempV35",function(){return this._tempV35=new J$gb},"_tempV36",function(){return this._tempV36=new J$gb},"_tempM0",function(){return this._tempM0=new J$ab},"_tempM1",function(){return this._tempM1=new J$ab},"_corners",function(){return this._corners=[new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb]},"_rows1",function(){return this._rows1=[new J$gb,new J$gb,new J$gb]},"_rows2",function(){return this._rows2=[new J$gb,new J$gb,new J$gb]},"_ray",function(){return this._ray=new J$eb(new J$gb,new J$gb)},"_boxBound1",function(){return this._boxBound1=new J$Za(new J$gb,new J$gb)},"_boxBound2",function(){return this._boxBound2=new J$Za(new J$gb,new J$gb)},"_boxBound3",function(){return this._boxBound3=new J$Za(new J$gb,new J$gb)}])}(),function(){function J$x(J$a,J$b){this.normal=null,this.distance=NaN,void 0===J$b&&(J$b=0),this.normal=J$a,this.distance=J$b}return J$n(J$x,"laya.d3.math.Plane"),J$x.prototype.normalize=function(){var J$a=this.normal.elements,J$b=J$a[0],J$c=J$a[1],J$d=J$a[2],J$e=1/Math.sqrt(J$b*J$b+J$c*J$c+J$d*J$d);J$a[0]=J$b*J$e,J$a[1]=J$c*J$e,J$a[2]=J$d*J$e,this.distance*=J$e},J$x.createPlaneBy3P=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$b.elements,J$f=J$c.elements,J$g=J$e[0]-J$d[0],J$h=J$e[1]-J$d[1],J$i=J$e[2]-J$d[2],J$j=J$f[0]-J$d[0],J$k=J$f[1]-J$d[1],J$l=J$f[2]-J$d[2],J$m=J$h*J$l-J$i*J$k,J$n=J$i*J$j-J$g*J$l,J$o=J$g*J$k-J$h*J$j,J$p=1/Math.sqrt(J$m*J$m+J$n*J$n+J$o*J$o),J$q=J$m*J$p,J$r=J$n*J$p,J$u=J$o*J$p,J$v=J$x._TEMPVec3.elements;J$v[0]=J$q,J$v[1]=J$r,J$v[2]=J$u;var J$w=-(J$q*J$d[0]+J$r*J$d[1]+J$u*J$d[2]);return new J$x(J$x._TEMPVec3,J$w)},J$x.PlaneIntersectionType_Back=0,J$x.PlaneIntersectionType_Front=1,J$x.PlaneIntersectionType_Intersecting=2,J$l(J$x,["_TEMPVec3",function(){return this._TEMPVec3=new J$gb}]),J$x}()),J$cb=function(){function J$e(J$a,J$b,J$c,J$d){this.elements=new Float32Array(4),void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=1),this.elements[0]=J$a,this.elements[1]=J$b,this.elements[2]=J$c,this.elements[3]=J$d}J$n(J$e,"laya.d3.math.Quaternion");var J$a=J$e.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.scaling=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements;J$c[0]=J$d[0]*J$a,J$c[1]=J$d[1]*J$a,J$c[2]=J$d[2]*J$a,J$c[3]=J$d[3]*J$a},J$a.normalize=function(J$a){var J$b=J$a.elements,J$c=this.elements,J$d=J$c[0],J$e=J$c[1],J$f=J$c[2],J$g=J$c[3],J$h=J$d*J$d+J$e*J$e+J$f*J$f+J$g*J$g;0<J$h&&(J$h=1/Math.sqrt(J$h),J$b[0]=J$d*J$h,J$b[1]=J$e*J$h,J$b[2]=J$f*J$h,J$b[3]=J$g*J$h)},J$a.length=function(){var J$a=this.elements,J$b=J$a[0],J$c=J$a[1],J$d=J$a[2],J$e=J$a[3];return Math.sqrt(J$b*J$b+J$c*J$c+J$d*J$d+J$e*J$e)},J$a.rotateX=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements;J$a*=.5;var J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=Math.sin(J$a),J$j=Math.cos(J$a);J$c[0]=J$e*J$j+J$h*J$i,J$c[1]=J$f*J$j+J$g*J$i,J$c[2]=J$g*J$j-J$f*J$i,J$c[3]=J$h*J$j-J$e*J$i},J$a.rotateY=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements;J$a*=.5;var J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=Math.sin(J$a),J$j=Math.cos(J$a);J$c[0]=J$e*J$j-J$g*J$i,J$c[1]=J$f*J$j+J$h*J$i,J$c[2]=J$g*J$j+J$e*J$i,J$c[3]=J$h*J$j-J$f*J$i},J$a.rotateZ=function(J$a,J$b){var J$c=J$b.elements,J$d=this.elements;J$a*=.5;var J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=Math.sin(J$a),J$j=Math.cos(J$a);J$c[0]=J$e*J$j+J$f*J$i,J$c[1]=J$f*J$j-J$e*J$i,J$c[2]=J$g*J$j+J$h*J$i,J$c[3]=J$h*J$j-J$g*J$i},J$a.getYawPitchRoll=function(J$a){J$gb.transformQuat(J$gb.ForwardRH,this,J$e.TEMPVector31),J$gb.transformQuat(J$gb.Up,this,J$e.TEMPVector32);var J$b=J$e.TEMPVector32.elements;J$e.angleTo(J$gb.ZERO,J$e.TEMPVector31,J$e.TEMPVector33);var J$c=J$e.TEMPVector33.elements;J$c[0]==Math.PI/2?(J$c[1]=J$e.arcTanAngle(J$b[2],J$b[0]),J$c[2]=0):J$c[0]==-Math.PI/2?(J$c[1]=J$e.arcTanAngle(-J$b[2],-J$b[0]),J$c[2]=0):(J$ab.createRotationY(-J$c[1],J$e.TEMPMatrix0),J$ab.createRotationX(-J$c[0],J$e.TEMPMatrix1),J$gb.transformCoordinate(J$e.TEMPVector32,J$e.TEMPMatrix0,J$e.TEMPVector32),J$gb.transformCoordinate(J$e.TEMPVector32,J$e.TEMPMatrix1,J$e.TEMPVector32),J$c[2]=J$e.arcTanAngle(J$b[1],-J$b[0])),J$c[1]<=-Math.PI&&(J$c[1]=Math.PI),J$c[2]<=-Math.PI&&(J$c[2]=Math.PI),J$c[1]>=Math.PI&&J$c[2]>=Math.PI&&(J$c[1]=0,J$c[2]=0,J$c[0]=Math.PI-J$c[0]);var J$d=J$a.elements;J$d[0]=J$c[1],J$d[1]=J$c[0],J$d[2]=J$c[2]},J$a.invert=function(J$a){var J$b=J$a.elements,J$c=this.elements,J$d=J$c[0],J$e=J$c[1],J$f=J$c[2],J$g=J$c[3],J$h=J$d*J$d+J$e*J$e+J$f*J$f+J$g*J$g,J$i=J$h?1/J$h:0;J$b[0]=-J$d*J$i,J$b[1]=-J$e*J$i,J$b[2]=-J$f*J$i,J$b[3]=J$g*J$i},J$a.identity=function(){var J$a=this.elements;J$a[0]=0,J$a[1]=0,J$a[2]=0,J$a[3]=1},J$a.fromArray=function(J$a,J$b){void 0===J$b&&(J$b=0),this.elements[0]=J$a[J$b+0],this.elements[1]=J$a[J$b+1],this.elements[2]=J$a[J$b+2],this.elements[3]=J$a[J$b+3]},J$a.cloneTo=function(J$a){var J$b,J$c,J$d;if((J$c=this.elements)!==(J$d=J$a.elements))for(J$b=0;J$b<4;++J$b)J$d[J$b]=J$c[J$b]},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$a.equals=function(J$a){var J$b=this.elements,J$c=J$a.elements;return J$sa.nearEqual(J$b[0],J$c[0])&&J$sa.nearEqual(J$b[1],J$c[1])&&J$sa.nearEqual(J$b[2],J$c[2])&&J$sa.nearEqual(J$b[3],J$c[3])},J$a.lengthSquared=function(){var J$a=this.elements[0],J$b=this.elements[1],J$c=this.elements[2],J$d=this.elements[3];return J$a*J$a+J$b*J$b+J$c*J$c+J$d*J$d},J$o(0,J$a,"x",function(){return this.elements[0]}),J$o(0,J$a,"y",function(){return this.elements[1]}),J$o(0,J$a,"z",function(){return this.elements[2]}),J$o(0,J$a,"w",function(){return this.elements[3]}),J$e.createFromYawPitchRoll=function(J$a,J$b,J$c,J$d){var J$e=.5*J$c,J$f=.5*J$b,J$g=.5*J$a,J$h=Math.sin(J$e),J$i=Math.cos(J$e),J$j=Math.sin(J$f),J$k=Math.cos(J$f),J$l=Math.sin(J$g),J$m=Math.cos(J$g),J$n=J$d.elements;J$n[0]=J$m*J$j*J$i+J$l*J$k*J$h,J$n[1]=J$l*J$k*J$i-J$m*J$j*J$h,J$n[2]=J$m*J$k*J$h-J$l*J$j*J$i,J$n[3]=J$m*J$k*J$i+J$l*J$j*J$h},J$e.multiply=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$b.elements,J$f=J$c.elements,J$g=J$d[0],J$h=J$d[1],J$i=J$d[2],J$j=J$d[3],J$k=J$e[0],J$l=J$e[1],J$m=J$e[2],J$n=J$e[3],J$o=J$h*J$m-J$i*J$l,J$p=J$i*J$k-J$g*J$m,J$q=J$g*J$l-J$h*J$k,J$r=J$g*J$k+J$h*J$l+J$i*J$m;J$f[0]=J$g*J$n+J$k*J$j+J$o,J$f[1]=J$h*J$n+J$l*J$j+J$p,J$f[2]=J$i*J$n+J$m*J$j+J$q,J$f[3]=J$j*J$n-J$r},J$e.arcTanAngle=function(J$a,J$b){return 0==J$a?1==J$b?Math.PI/2:-Math.PI/2:0<J$a?Math.atan(J$b/J$a):J$a<0?0<J$b?Math.atan(J$b/J$a)+Math.PI:Math.atan(J$b/J$a)-Math.PI:0},J$e.angleTo=function(J$a,J$b,J$c){J$gb.subtract(J$b,J$a,J$e.TEMPVector30),J$gb.normalize(J$e.TEMPVector30,J$e.TEMPVector30),J$c.elements[0]=Math.asin(J$e.TEMPVector30.y),J$c.elements[1]=J$e.arcTanAngle(-J$e.TEMPVector30.z,-J$e.TEMPVector30.x)},J$e.createFromAxisAngle=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements;J$b*=.5;var J$f=Math.sin(J$b);J$d[0]=J$f*J$e[0],J$d[1]=J$f*J$e[1],J$d[2]=J$f*J$e[2],J$d[3]=Math.cos(J$b)},J$e.createFromMatrix3x3=function(J$a,J$b){var J$c,J$d=J$b.elements,J$e=J$a.elements,J$f=J$e[0]+J$e[4]+J$e[8];if(0<J$f)J$c=Math.sqrt(J$f+1),J$d[3]=.5*J$c,J$c=.5/J$c,J$d[0]=(J$e[5]-J$e[7])*J$c,J$d[1]=(J$e[6]-J$e[2])*J$c,J$d[2]=(J$e[1]-J$e[3])*J$c;else{var J$g=0;J$e[4]>J$e[0]&&(J$g=1),J$e[8]>J$e[3*J$g+J$g]&&(J$g=2);var J$h=(J$g+1)%3,J$i=(J$g+2)%3;J$c=Math.sqrt(J$e[3*J$g+J$g]-J$e[3*J$h+J$h]-J$e[3*J$i+J$i]+1),J$d[J$g]=.5*J$c,J$c=.5/J$c,J$d[3]=(J$e[3*J$h+J$i]-J$e[3*J$i+J$h])*J$c,J$d[J$h]=(J$e[3*J$h+J$g]+J$e[3*J$g+J$h])*J$c,J$d[J$i]=(J$e[3*J$i+J$g]+J$e[3*J$g+J$i])*J$c}},J$e.createFromMatrix4x4=function(J$a,J$b){var J$c,J$d,J$e=J$a.elements,J$f=J$b.elements,J$g=J$e[0]+J$e[5]+J$e[10];0<J$g?(J$c=Math.sqrt(J$g+1),J$f[3]=.5*J$c,J$c=.5/J$c,J$f[0]=(J$e[6]-J$e[9])*J$c,J$f[1]=(J$e[8]-J$e[2])*J$c,J$f[2]=(J$e[1]-J$e[4])*J$c):J$e[0]>=J$e[5]&&J$e[0]>=J$e[10]?(J$d=.5/(J$c=Math.sqrt(1+J$e[0]-J$e[5]-J$e[10])),J$f[0]=.5*J$c,J$f[1]=(J$e[1]+J$e[4])*J$d,J$f[2]=(J$e[2]+J$e[8])*J$d,J$f[3]=(J$e[6]-J$e[9])*J$d):J$e[5]>J$e[10]?(J$d=.5/(J$c=Math.sqrt(1+J$e[5]-J$e[0]-J$e[10])),J$f[0]=(J$e[4]+J$e[1])*J$d,J$f[1]=.5*J$c,J$f[2]=(J$e[9]+J$e[6])*J$d,J$f[3]=(J$e[8]-J$e[2])*J$d):(J$d=.5/(J$c=Math.sqrt(1+J$e[10]-J$e[0]-J$e[5])),J$f[0]=(J$e[8]+J$e[2])*J$d,J$f[1]=(J$e[9]+J$e[6])*J$d,J$f[2]=.5*J$c,J$f[3]=(J$e[1]-J$e[4])*J$d)},J$e.slerp=function(J$a,J$b,J$c,J$d){var J$e,J$f,J$g,J$h,J$i,J$j=J$a.elements,J$k=J$b.elements,J$l=J$d.elements,J$m=J$j[0],J$n=J$j[1],J$o=J$j[2],J$p=J$j[3],J$q=J$k[0],J$r=J$k[1],J$u=J$k[2],J$v=J$k[3];return(J$f=J$m*J$q+J$n*J$r+J$o*J$u+J$p*J$v)<0&&(J$f=-J$f,J$q=-J$q,J$r=-J$r,J$u=-J$u,J$v=-J$v),J$i=1e-6<1-J$f?(J$e=Math.acos(J$f),J$g=Math.sin(J$e),J$h=Math.sin((1-J$c)*J$e)/J$g,Math.sin(J$c*J$e)/J$g):(J$h=1-J$c,J$c),J$l[0]=J$h*J$m+J$i*J$q,J$l[1]=J$h*J$n+J$i*J$r,J$l[2]=J$h*J$o+J$i*J$u,J$l[3]=J$h*J$p+J$i*J$v,J$l},J$e.lerp=function(J$a,J$b,J$c,J$d){var J$e=J$d.elements,J$f=J$a.elements,J$g=J$b.elements,J$h=J$f[0],J$i=J$f[1],J$j=J$f[2],J$k=J$f[3];J$e[0]=J$h+J$c*(J$g[0]-J$h),J$e[1]=J$i+J$c*(J$g[1]-J$i),J$e[2]=J$j+J$c*(J$g[2]-J$j),J$e[3]=J$k+J$c*(J$g[3]-J$k)},J$e.add=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]+J$f[0],J$d[1]=J$e[1]+J$f[1],J$d[2]=J$e[2]+J$f[2],J$d[3]=J$e[3]+J$f[3]},J$e.dot=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;return J$c[0]*J$d[0]+J$c[1]*J$d[1]+J$c[2]*J$d[2]+J$c[3]*J$d[3]},J$e.rotationLookAt=function(J$a,J$b,J$c){J$e.lookAt(J$gb.ZERO,J$a,J$b,J$c)},J$e.lookAt=function(J$a,J$b,J$c,J$d){J$ta.lookAt(J$a,J$b,J$c,J$e._tempMatrix3x3),J$e.rotationMatrix(J$e._tempMatrix3x3,J$d)},J$e.invert=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$a.lengthSquared();J$sa.isZero(J$e)||(J$e=1/J$e,J$d[0]=-J$c[0]*J$e,J$d[1]=-J$c[1]*J$e,J$d[2]=-J$c[2]*J$e,J$d[3]=J$c[3]*J$e)},J$e.rotationMatrix=function(J$a,J$b){var J$c=J$a.elements,J$d=J$c[0],J$e=J$c[1],J$f=J$c[2],J$g=J$c[3],J$h=J$c[4],J$i=J$c[5],J$j=J$c[6],J$k=J$c[7],J$l=J$c[8],J$m=J$b.elements,J$n=NaN,J$o=NaN,J$p=J$d+J$h+J$l;0<J$p?(J$n=Math.sqrt(J$p+1),J$m[3]=.5*J$n,J$n=.5/J$n,J$m[0]=(J$i-J$k)*J$n,J$m[1]=(J$j-J$f)*J$n,J$m[2]=(J$e-J$g)*J$n):J$h<=J$d&&J$l<=J$d?(J$o=.5/(J$n=Math.sqrt(1+J$d-J$h-J$l)),J$m[0]=.5*J$n,J$m[1]=(J$e+J$g)*J$o,J$m[2]=(J$f+J$j)*J$o,J$m[3]=(J$i-J$k)*J$o):J$l<J$h?(J$o=.5/(J$n=Math.sqrt(1+J$h-J$d-J$l)),J$m[0]=(J$g+J$e)*J$o,J$m[1]=.5*J$n,J$m[2]=(J$k+J$i)*J$o,J$m[3]=(J$j-J$f)*J$o):(J$o=.5/(J$n=Math.sqrt(1+J$l-J$d-J$h)),J$m[0]=(J$j+J$f)*J$o,J$m[1]=(J$k+J$i)*J$o,J$m[2]=.5*J$n,J$m[3]=(J$e-J$g)*J$o)},J$e.DEFAULT=new J$e,J$l(J$e,["TEMPVector30",function(){return this.TEMPVector30=new J$gb},"TEMPVector31",function(){return this.TEMPVector31=new J$gb},"TEMPVector32",function(){return this.TEMPVector32=new J$gb},"TEMPVector33",function(){return this.TEMPVector33=new J$gb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new J$ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new J$ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new J$ta},"NAN",function(){return this.NAN=new J$e(NaN,NaN,NaN,NaN)}]),J$e}(),J$db=function(){function J$a(J$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=J$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}J$n(J$a,"laya.d3.math.Rand");var J$b=J$a.prototype;return J$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},J$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},J$b.getSignedFloat=function(){return 2*this.getFloat()-1},J$o(0,J$b,"seed",function(){return this.seeds[0]},function(J$a){this.seeds[0]=J$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),J$a.getFloatFromInt=function(J$a){return 1/8388607*(8388607&J$a)},J$a.getByteFromInt=function(J$a){return(8388607&J$a)>>>15},J$a}(),J$eb=(function(){function J$e(J$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(J$a instanceof Array)||4!==J$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|J$a[0],this._state0L=0|J$a[1],this._state1U=0|J$a[2],this._state1L=0|J$a[3]}J$n(J$e,"laya.d3.math.RandX");var J$a=J$e.prototype;J$a.randomint=function(){var J$a=this._state0U,J$b=this._state0L,J$c=this._state1U,J$d=this._state1L,J$e=(J$d>>>0)+(J$b>>>0),J$f=J$c+J$a+(J$e/2>>>31)>>>0,J$g=J$e>>>0,J$h=0,J$i=0;J$h=(J$a^=J$h=J$a<<23|(-512&J$b)>>>9)^(this._state0U=J$c),J$i=(J$b^=J$i=J$b<<23)^(this._state0L=J$d);J$h^=J$a>>>18,J$i^=J$b>>>18|(262143&J$a)<<14;return J$h^=J$c>>>5,J$i^=J$d>>>5|(31&J$c)<<27,this._state1U=J$h,this._state1L=J$i,[J$f,J$g]},J$a.random=function(){var J$a=this.randomint(),J$b=J$a[0],J$c=1023<<20|J$b>>>12,J$d=0|(J$a[1]>>>12|(4095&J$b)<<20);return J$e._CONVERTION_BUFFER.setUint32(0,J$c,!1),J$e._CONVERTION_BUFFER.setUint32(4,J$d,!1),J$db._CONVERTION_BUFFER.getFloat64(0,!1)-1},J$l(J$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new J$db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function J$a(J$a,J$b){this.origin=null,this.direction=null,this.origin=J$a,this.direction=J$b}return J$n(J$a,"laya.d3.math.Ray"),J$a}()),J$fb=function(){function J$a(J$a,J$b){this.elements=new Float32Array(2),void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0);var J$c=this.elements;J$c[0]=J$a,J$c[1]=J$b}J$n(J$a,"laya.d3.math.Vector2");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.fromArray=function(J$a,J$b){void 0===J$b&&(J$b=0),this.elements[0]=J$a[J$b+0],this.elements[1]=J$a[J$b+1]},J$b.cloneTo=function(J$a){var J$b=J$a.elements,J$c=this.elements;J$b[0]=J$c[0],J$b[1]=J$c[1]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"x",function(){return this.elements[0]},function(J$a){this.elements[0]=J$a}),J$o(0,J$b,"y",function(){return this.elements[1]},function(J$a){this.elements[1]=J$a}),J$a.scale=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements;J$d[0]=J$e[0]*J$b,J$d[1]=J$e[1]*J$b},J$l(J$a,["ZERO",function(){return this.ZERO=new J$a(0,0)},"ONE",function(){return this.ONE=new J$a(1,1)}]),J$a}(),J$gb=function(){function J$k(J$a,J$b,J$c){this.elements=new Float32Array(3),void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0);var J$d=this.elements;J$d[0]=J$a,J$d[1]=J$b,J$d[2]=J$c}J$n(J$k,"laya.d3.math.Vector3");var J$a=J$k.prototype;return J$x.imps(J$a,{"laya.d3.core.IClone":!0}),J$a.fromArray=function(J$a,J$b){void 0===J$b&&(J$b=0),this.elements[0]=J$a[J$b+0],this.elements[1]=J$a[J$b+1],this.elements[2]=J$a[J$b+2]},J$a.cloneTo=function(J$a){var J$b=J$a.elements,J$c=this.elements;J$b[0]=J$c[0],J$b[1]=J$c[1],J$b[2]=J$c[2]},J$a.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},J$a.reset=function(J$a,J$b,J$c){this.elements[0]=J$a,this.elements[1]=J$b,this.elements[2]=J$c},J$o(0,J$a,"x",function(){return this.elements[0]},function(J$a){this.elements[0]=J$a}),J$o(0,J$a,"y",function(){return this.elements[1]},function(J$a){this.elements[1]=J$a}),J$o(0,J$a,"z",function(){return this.elements[2]},function(J$a){this.elements[2]=J$a}),J$k.distanceSquared=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0]-J$d[0],J$f=J$c[1]-J$d[1],J$g=J$c[2]-J$d[2];return J$e*J$e+J$f*J$f+J$g*J$g},J$k.distance=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0]-J$d[0],J$f=J$c[1]-J$d[1],J$g=J$c[2]-J$d[2];return Math.sqrt(J$e*J$e+J$f*J$f+J$g*J$g)},J$k.min=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=Math.min(J$e[0],J$f[0]),J$d[1]=Math.min(J$e[1],J$f[1]),J$d[2]=Math.min(J$e[2],J$f[2])},J$k.max=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=Math.max(J$e[0],J$f[0]),J$d[1]=Math.max(J$e[1],J$f[1]),J$d[2]=Math.max(J$e[2],J$f[2])},J$k.transformQuat=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements,J$g=J$e[0],J$h=J$e[1],J$i=J$e[2],J$j=J$f[0],J$k=J$f[1],J$l=J$f[2],J$m=J$f[3],J$n=J$m*J$g+J$k*J$i-J$l*J$h,J$o=J$m*J$h+J$l*J$g-J$j*J$i,J$p=J$m*J$i+J$j*J$h-J$k*J$g,J$q=-J$j*J$g-J$k*J$h-J$l*J$i;J$d[0]=J$n*J$m+J$q*-J$j+J$o*-J$l-J$p*-J$k,J$d[1]=J$o*J$m+J$q*-J$k+J$p*-J$j-J$n*-J$l,J$d[2]=J$p*J$m+J$q*-J$l+J$n*-J$k-J$o*-J$j},J$k.scalarLength=function(J$a){var J$b=J$a.elements,J$c=J$b[0],J$d=J$b[1],J$e=J$b[2];return Math.sqrt(J$c*J$c+J$d*J$d+J$e*J$e)},J$k.scalarLengthSquared=function(J$a){var J$b=J$a.elements,J$c=J$b[0],J$d=J$b[1],J$e=J$b[2];return J$c*J$c+J$d*J$d+J$e*J$e},J$k.normalize=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0],J$f=J$c[1],J$g=J$c[2],J$h=J$e*J$e+J$f*J$f+J$g*J$g;0<J$h&&(J$h=1/Math.sqrt(J$h),J$d[0]=J$c[0]*J$h,J$d[1]=J$c[1]*J$h,J$d[2]=J$c[2]*J$h)},J$k.multiply=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]*J$f[0],J$d[1]=J$e[1]*J$f[1],J$d[2]=J$e[2]*J$f[2]},J$k.scale=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements;J$d[0]=J$e[0]*J$b,J$d[1]=J$e[1]*J$b,J$d[2]=J$e[2]*J$b},J$k.lerp=function(J$a,J$b,J$c,J$d){var J$e=J$d.elements,J$f=J$a.elements,J$g=J$b.elements,J$h=J$f[0],J$i=J$f[1],J$j=J$f[2];J$e[0]=J$h+J$c*(J$g[0]-J$h),J$e[1]=J$i+J$c*(J$g[1]-J$i),J$e[2]=J$j+J$c*(J$g[2]-J$j)},J$k.transformV3ToV3=function(J$a,J$b,J$c){var J$d=J$k._tempVector4;J$k.transformV3ToV4(J$a,J$b,J$d);var J$e=J$d.elements,J$f=J$c.elements;J$f[0]=J$e[0],J$f[1]=J$e[1],J$f[2]=J$e[2]},J$k.transformV3ToV4=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$b.elements,J$i=J$c.elements;J$i[0]=J$e*J$h[0]+J$f*J$h[4]+J$g*J$h[8]+J$h[12],J$i[1]=J$e*J$h[1]+J$f*J$h[5]+J$g*J$h[9]+J$h[13],J$i[2]=J$e*J$h[2]+J$f*J$h[6]+J$g*J$h[10]+J$h[14],J$i[3]=J$e*J$h[3]+J$f*J$h[7]+J$g*J$h[11]+J$h[15]},J$k.TransformNormal=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$b.elements,J$i=J$c.elements;J$i[0]=J$e*J$h[0]+J$f*J$h[4]+J$g*J$h[8],J$i[1]=J$e*J$h[1]+J$f*J$h[5]+J$g*J$h[9],J$i[2]=J$e*J$h[2]+J$f*J$h[6]+J$g*J$h[10]},J$k.transformCoordinate=function(J$a,J$b,J$c){var J$d=J$k._tempVector4.elements,J$e=J$a.elements,J$f=J$e[0],J$g=J$e[1],J$h=J$e[2],J$i=J$b.elements;J$d[0]=J$f*J$i[0]+J$g*J$i[4]+J$h*J$i[8]+J$i[12],J$d[1]=J$f*J$i[1]+J$g*J$i[5]+J$h*J$i[9]+J$i[13],J$d[2]=J$f*J$i[2]+J$g*J$i[6]+J$h*J$i[10]+J$i[14],J$d[3]=1/(J$f*J$i[3]+J$g*J$i[7]+J$h*J$i[11]+J$i[15]);var J$j=J$c.elements;J$j[0]=J$d[0]*J$d[3],J$j[1]=J$d[1]*J$d[3],J$j[2]=J$d[2]*J$d[3]},J$k.Clamp=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements,J$f=J$e[0],J$g=J$e[1],J$h=J$e[2],J$i=J$b.elements,J$j=J$i[0],J$k=J$i[1],J$l=J$i[2],J$m=J$c.elements,J$n=J$m[0],J$o=J$m[1],J$p=J$m[2],J$q=J$d.elements;J$f=(J$f=J$n<J$f?J$n:J$f)<J$j?J$j:J$f,J$g=(J$g=J$o<J$g?J$o:J$g)<J$k?J$k:J$g,J$h=(J$h=J$p<J$h?J$p:J$h)<J$l?J$l:J$h,J$q[0]=J$f,J$q[1]=J$g,J$q[2]=J$h},J$k.add=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]+J$f[0],J$d[1]=J$e[1]+J$f[1],J$d[2]=J$e[2]+J$f[2]},J$k.subtract=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]-J$f[0],J$d[1]=J$e[1]-J$f[1],J$d[2]=J$e[2]-J$f[2]},J$k.cross=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$b.elements,J$f=J$c.elements,J$g=J$d[0],J$h=J$d[1],J$i=J$d[2],J$j=J$e[0],J$k=J$e[1],J$l=J$e[2];J$f[0]=J$h*J$l-J$i*J$k,J$f[1]=J$i*J$j-J$g*J$l,J$f[2]=J$g*J$k-J$h*J$j},J$k.dot=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;return J$c[0]*J$d[0]+J$c[1]*J$d[1]+J$c[2]*J$d[2]},J$k.equals=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;return J$sa.nearEqual(Math.abs(J$c[0]),Math.abs(J$d[0]))&&J$sa.nearEqual(Math.abs(J$c[1]),Math.abs(J$d[1]))&&J$sa.nearEqual(Math.abs(J$c[2]),Math.abs(J$d[2]))},J$k.ZERO=new J$k(0,0,0),J$k.ONE=new J$k(1,1,1),J$k.NegativeUnitX=new J$k(-1,0,0),J$k.UnitX=new J$k(1,0,0),J$k.UnitY=new J$k(0,1,0),J$k.UnitZ=new J$k(0,0,1),J$k.ForwardRH=new J$k(0,0,-1),J$k.ForwardLH=new J$k(0,0,1),J$k.Up=new J$k(0,1,0),J$k.NAN=new J$k(NaN,NaN,NaN),J$l(J$k,["_tempVector4",function(){return this._tempVector4=new J$hb}]),J$k}(),J$hb=function(){function J$a(J$a,J$b,J$c,J$d){this.elements=new Float32Array(4),void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=0);var J$e=this.elements;J$e[0]=J$a,J$e[1]=J$b,J$e[2]=J$c,J$e[3]=J$d}J$n(J$a,"laya.d3.math.Vector4");var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b.fromArray=function(J$a,J$b){void 0===J$b&&(J$b=0),this.elements[0]=J$a[J$b+0],this.elements[1]=J$a[J$b+1],this.elements[2]=J$a[J$b+2],this.elements[3]=J$a[J$b+3]},J$b.cloneTo=function(J$a){var J$b=J$a.elements,J$c=this.elements;J$b[0]=J$c[0],J$b[1]=J$c[1],J$b[2]=J$c[2],J$b[3]=J$c[3]},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},J$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},J$o(0,J$b,"x",function(){return this.elements[0]},function(J$a){this.elements[0]=J$a}),J$o(0,J$b,"y",function(){return this.elements[1]},function(J$a){this.elements[1]=J$a}),J$o(0,J$b,"z",function(){return this.elements[2]},function(J$a){this.elements[2]=J$a}),J$o(0,J$b,"w",function(){return this.elements[3]},function(J$a){this.elements[3]=J$a}),J$a.lerp=function(J$a,J$b,J$c,J$d){var J$e=J$d.elements,J$f=J$a.elements,J$g=J$b.elements,J$h=J$f[0],J$i=J$f[1],J$j=J$f[2],J$k=J$f[3];J$e[0]=J$h+J$c*(J$g[0]-J$h),J$e[1]=J$i+J$c*(J$g[1]-J$i),J$e[2]=J$j+J$c*(J$g[2]-J$j),J$e[3]=J$k+J$c*(J$g[3]-J$k)},J$a.transformByM4x4=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$d[0],J$f=J$d[1],J$g=J$d[2],J$h=J$d[3],J$i=J$b.elements,J$j=J$c.elements;J$j[0]=J$e*J$i[0]+J$f*J$i[4]+J$g*J$i[8]+J$h*J$i[12],J$j[1]=J$e*J$i[1]+J$f*J$i[5]+J$g*J$i[9]+J$h*J$i[13],J$j[2]=J$e*J$i[2]+J$f*J$i[6]+J$g*J$i[10]+J$h*J$i[14],J$j[3]=J$e*J$i[3]+J$f*J$i[7]+J$g*J$i[11]+J$h*J$i[15]},J$a.equals=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;return J$sa.nearEqual(Math.abs(J$c[0]),Math.abs(J$d[0]))&&J$sa.nearEqual(Math.abs(J$c[1]),Math.abs(J$d[1]))&&J$sa.nearEqual(Math.abs(J$c[2]),Math.abs(J$d[2]))&&J$sa.nearEqual(Math.abs(J$c[3]),Math.abs(J$d[3]))},J$a.normalize=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$a.length();0<J$e&&(J$d[0]=J$c[0]*J$e,J$d[1]=J$c[1]*J$e,J$d[2]=J$c[2]*J$e,J$d[3]=J$c[3]*J$e)},J$a.add=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]+J$f[0],J$d[1]=J$e[1]+J$f[1],J$d[2]=J$e[2]+J$f[2],J$d[3]=J$e[3]+J$f[3]},J$a.subtract=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]-J$f[0],J$d[1]=J$e[1]-J$f[1],J$d[2]=J$e[2]-J$f[2],J$d[3]=J$e[3]-J$f[3]},J$a.multiply=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=J$e[0]*J$f[0],J$d[1]=J$e[1]*J$f[1],J$d[2]=J$e[2]*J$f[2],J$d[3]=J$e[3]*J$f[3]},J$a.scale=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements;J$d[0]=J$e[0]*J$b,J$d[1]=J$e[1]*J$b,J$d[2]=J$e[2]*J$b,J$d[3]=J$e[3]*J$b},J$a.Clamp=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements,J$f=J$e[0],J$g=J$e[1],J$h=J$e[2],J$i=J$e[3],J$j=J$b.elements,J$k=J$j[0],J$l=J$j[1],J$m=J$j[2],J$n=J$j[3],J$o=J$c.elements,J$p=J$o[0],J$q=J$o[1],J$r=J$o[2],J$u=J$o[3],J$v=J$d.elements;J$f=(J$f=J$p<J$f?J$p:J$f)<J$k?J$k:J$f,J$g=(J$g=J$q<J$g?J$q:J$g)<J$l?J$l:J$g,J$h=(J$h=J$r<J$h?J$r:J$h)<J$m?J$m:J$h,J$i=(J$i=J$u<J$i?J$u:J$i)<J$n?J$n:J$i,J$v[0]=J$f,J$v[1]=J$g,J$v[2]=J$h,J$v[3]=J$i},J$a.distanceSquared=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0]-J$d[0],J$f=J$c[1]-J$d[1],J$g=J$c[2]-J$d[2],J$h=J$c[3]-J$d[3];return J$e*J$e+J$f*J$f+J$g*J$g+J$h*J$h},J$a.distance=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements,J$e=J$c[0]-J$d[0],J$f=J$c[1]-J$d[1],J$g=J$c[2]-J$d[2],J$h=J$c[3]-J$d[3];return Math.sqrt(J$e*J$e+J$f*J$f+J$g*J$g+J$h*J$h)},J$a.dot=function(J$a,J$b){var J$c=J$a.elements,J$d=J$b.elements;return J$c[0]*J$d[0]+J$c[1]*J$d[1]+J$c[2]*J$d[2]+J$c[3]*J$d[3]},J$a.min=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=Math.min(J$e[0],J$f[0]),J$d[1]=Math.min(J$e[1],J$f[1]),J$d[2]=Math.min(J$e[2],J$f[2]),J$d[3]=Math.min(J$e[3],J$f[3])},J$a.max=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b.elements;J$d[0]=Math.max(J$e[0],J$f[0]),J$d[1]=Math.max(J$e[1],J$f[1]),J$d[2]=Math.max(J$e[2],J$f[2]),J$d[3]=Math.max(J$e[3],J$f[3])},J$l(J$a,["ZERO",function(){return this.ZERO=new J$a},"ONE",function(){return this.ONE=new J$a(1,1,1,1)},"UnitX",function(){return this.UnitX=new J$a(1,0,0,0)},"UnitY",function(){return this.UnitY=new J$a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new J$a(0,0,1,0)},"UnitW",function(){return this.UnitW=new J$a(0,0,0,1)}]),J$a}(),J$ib=function(){function J$f(J$a,J$b,J$c,J$d){this.minDepth=0,this.maxDepth=1,this.x=J$a,this.y=J$b,this.width=J$c,this.height=J$d}J$n(J$f,"laya.d3.math.Viewport");var J$a=J$f.prototype;return J$a.project=function(J$a,J$b,J$c){J$gb.transformV3ToV3(J$a,J$b,J$c);var J$d=J$a.elements,J$e=J$b.elements,J$f=J$c.elements,J$g=J$d[0]*J$e[3]+J$d[1]*J$e[7]+J$d[2]*J$e[11]+J$e[15];1!==J$g&&(J$f[0]=J$f[0]/J$g,J$f[1]=J$f[1]/J$g,J$f[2]=J$f[2]/J$g),J$f[0]=.5*(J$f[0]+1)*this.width+this.x,J$f[1]=.5*(1-J$f[1])*this.height+this.y,J$f[2]=J$f[2]*(this.maxDepth-this.minDepth)+this.minDepth},J$a.unprojectFromMat=function(J$a,J$b,J$c){var J$d=J$a.elements,J$e=J$b.elements,J$f=J$c.elements;J$f[0]=(J$d[0]-this.x)/this.width*2-1,J$f[1]=-((J$d[1]-this.y)/this.height*2-1);var J$g=(this.maxDepth-this.minDepth)/2;J$f[2]=(J$d[2]-this.minDepth-J$g)/J$g;var J$h=J$f[0]*J$e[3]+J$f[1]*J$e[7]+J$f[2]*J$e[11]+J$e[15];J$gb.transformV3ToV3(J$c,J$b,J$c),1!==J$h&&(J$f[0]=J$f[0]/J$h,J$f[1]=J$f[1]/J$h,J$f[2]=J$f[2]/J$h)},J$a.unprojectFromWVP=function(J$a,J$b,J$c,J$d,J$e){J$ab.multiply(J$b,J$c,J$f._tempMatrix4x4),J$d&&J$ab.multiply(J$f._tempMatrix4x4,J$d,J$f._tempMatrix4x4),J$f._tempMatrix4x4.invert(J$f._tempMatrix4x4),this.unprojectFromMat(J$a,J$f._tempMatrix4x4,J$e)},J$l(J$f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new J$ab}]),J$f}(),J$jb=function(){function J$E(J$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=J$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}J$n(J$E,"laya.d3.resource.models.SubMesh");var J$a=J$E.prototype;return J$x.imps(J$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),J$a._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),0===J$a?this._vertexBuffer:null},J$a._getIndexBuffer=function(){return this._indexBuffer},J$a._getStaticBatchBakedVertexs=function(J$a,J$b){var J$c,J$d,J$e=this._vertexBuffer,J$f=J$e.vertexDeclaration,J$g=J$f.getVertexElementByUsage(0).offset/4,J$h=J$f.getVertexElementByUsage(3).offset/4,J$i=J$b.meshRender.lightmapScaleOffset,J$j=0,J$k=0,J$l=0,J$m=0,J$n=0,J$o=0;if(J$i)if(J$d=J$f.getVertexElementByUsage(15))J$l=J$f.vertexStride/4,J$c=0<this._vertexCount?J$e.getData().slice(this._vertexStart*J$l,(this._vertexStart+this._vertexCount)*J$l):J$e.getData().slice(),J$m=J$d.offset/4;else{J$l=(J$o=J$f.vertexStride/4)+2,J$c=this._vertexCount?new Float32Array(this._vertexCount*(J$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(J$e.vertexCount*(J$e.vertexDeclaration.vertexStride/4+2)),J$m=(J$n=J$f.getVertexElementByUsage(2).offset/4)+2;var J$p=J$e.getData();for(J$j=0,J$k=J$p.length/J$o;J$j<J$k;J$j++){var J$q=0;J$q=0<this._vertexCount?(this._vertexStart+J$j)*J$o:J$j*J$o;var J$r=J$j*J$l,J$u=0;for(J$u=0;J$u<J$m;J$u++)J$c[J$r+J$u]=J$p[J$q+J$u];for(J$u=J$m;J$u<J$o;J$u++)J$c[J$r+J$u+2]=J$p[J$q+J$u]}}else J$l=J$f.vertexStride/4,J$c=this._vertexCount?J$e.getData().slice(this._vertexStart*J$l,(this._vertexStart+this._vertexCount)*J$l):J$e.getData().slice();if(J$a){var J$v=J$a.worldMatrix,J$w=J$E._tempMatrix4x40;J$v.invert(J$w);var J$x=J$E._tempMatrix4x41,J$y=J$b.transform.worldMatrix;J$ab.multiply(J$w,J$y,J$x)}else J$x=J$b.transform.worldMatrix;var J$z=J$E._tempQuaternion0;for(J$x.decomposeTransRotScale(J$E._tempVector30,J$z,J$E._tempVector31),J$j=0,J$k=J$c.length/J$l;J$j<J$k;J$j++){var J$A=J$j*J$l+J$g,J$B=J$j*J$l+J$h;if(J$qb.transformVector3ArrayToVector3ArrayCoordinate(J$c,J$A,J$x,J$c,J$A),J$qb.transformVector3ArrayByQuat(J$c,J$B,J$z,J$c,J$B),J$i){var J$C=J$j*J$l+J$m;if(J$d)J$qb.transformLightingMapTexcoordByUV1Array(J$c,J$C,J$i,J$c,J$C);else{var J$D=J$j*J$o+J$n;J$qb.transformLightingMapTexcoordByUV0Array(J$p,J$D,J$i,J$c,J$C)}}}return J$c},J$a._getVertexBuffers=function(){return null},J$a._beforeRender=function(J$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J$a._render=function(J$a){var J$b,J$c=0,J$d=J$a.renderElement;if(1<this._indexCount){var J$e=this._boneIndicesList.length;if(1<J$e){for(var J$f=0;J$f<J$e;J$f++)(J$b=J$d._skinAnimationDatas||this._skinAnimationDatas)&&(J$d._shaderValue.setValue(0,J$b[J$f]),J$a._shader.uploadRenderElementUniforms(J$d._shaderValue.data)),J$F.mainContext.drawElements(4,this._subIndexBufferCount[J$f],5123,2*this._subIndexBufferStart[J$f]);J$A.drawCall+=J$e}else(J$b=J$d._skinAnimationDatas||this._skinAnimationDatas)&&(J$d._shaderValue.setValue(0,J$b[0]),J$a._shader.uploadRenderElementUniforms(J$d._shaderValue.data)),J$F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),J$A.drawCall++;J$c=this._indexCount}else J$c=this._indexBuffer.indexCount,(J$b=J$d._skinAnimationDatas||this._skinAnimationDatas)&&(J$d._shaderValue.setValue(0,J$b[0]),J$a._shader.uploadRenderElementUniforms(J$d._shaderValue.data)),J$F.mainContext.drawElements(4,J$c,5123,0),J$A.drawCall++;J$A.trianglesFaces+=J$c/3},J$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},J$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},J$o(0,J$a,"_vertexBufferCount",function(){return 1}),J$o(0,J$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J$l(J$E,["_tempVector30",function(){return this._tempVector30=new J$gb},"_tempVector31",function(){return this._tempVector31=new J$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new J$cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new J$ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new J$ab}]),J$E}(),J$kb=function(){function J$a(J$a){this.defineCounter=0,this.defines=null,J$a?(this.defineCounter=J$a.defineCounter,this.defines=J$a.defines.slice()):(this.defineCounter=0,this.defines=[])}return J$n(J$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),J$a.prototype.registerDefine=function(J$a){var J$b=Math.pow(2,this.defineCounter++);return this.defines[J$b]=J$a,J$b},J$a}(),J$lb=function(){function J$a(){}return J$n(J$a,"laya.d3.shader.ShaderInit3D"),J$a.__init__=function(){var J$a,J$b;J$Ab._globalRegDefine("HIGHPRECISION",J$Ab.SHADERDEFINE_HIGHPRECISION),J$Ab._globalRegDefine("FOG",J$Ab.SHADERDEFINE_FOG),J$Ab._globalRegDefine("DIRECTIONLIGHT",J$Ab.SHADERDEFINE_DIRECTIONLIGHT),J$Ab._globalRegDefine("POINTLIGHT",J$Ab.SHADERDEFINE_POINTLIGHT),J$Ab._globalRegDefine("SPOTLIGHT",J$Ab.SHADERDEFINE_SPOTLIGHT),J$Ab._globalRegDefine("UV",J$Ab.SHADERDEFINE_UV0),J$Ab._globalRegDefine("COLOR",J$Ab.SHADERDEFINE_COLOR),J$Ab._globalRegDefine("UV1",J$Ab.SHADERDEFINE_UV1),J$Ab._globalRegDefine("CASTSHADOW",J$nb.SHADERDEFINE_CAST_SHADOW),J$Ab._globalRegDefine("SHADOWMAP_PSSM1",J$nb.SHADERDEFINE_SHADOW_PSSM1),J$Ab._globalRegDefine("SHADOWMAP_PSSM2",J$nb.SHADERDEFINE_SHADOW_PSSM2),J$Ab._globalRegDefine("SHADOWMAP_PSSM3",J$nb.SHADERDEFINE_SHADOW_PSSM3),J$Ab._globalRegDefine("SHADOWMAP_PCF_NO",J$nb.SHADERDEFINE_SHADOW_PCF_NO),J$Ab._globalRegDefine("SHADOWMAP_PCF1",J$nb.SHADERDEFINE_SHADOW_PCF1),J$Ab._globalRegDefine("SHADOWMAP_PCF2",J$nb.SHADERDEFINE_SHADOW_PCF2),J$Ab._globalRegDefine("SHADOWMAP_PCF3",J$nb.SHADERDEFINE_SHADOW_PCF3),J$Ab._globalRegDefine("DEPTHFOG",J$Ab.SAHDERDEFINE_DEPTHFOG),J$Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),J$Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),J$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},J$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var J$c=J$Lb.nameKey.add("SIMPLE");shaderCompile=J$Ab.add(J$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',J$a,J$b),J$Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),J$Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),J$Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),J$Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),J$Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),J$Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),J$Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),J$Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),J$Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},J$a}(),J$mb=function(){function J$a(){this._data=null,this._data=[]}J$n(J$a,"laya.d3.shader.ValusArray");var J$b=J$a.prototype;return J$b.setValue=function(J$a,J$b){this._data[J$a]=J$b},J$o(0,J$b,"data",function(){return this._data}),J$a}(),J$nb=function(){function J$a(){}return J$a.SHADERDEFINE_RECEIVE_SHADOW=1,J$a.SHADERDEFINE_CAST_SHADOW=512,J$a.SHADERDEFINE_SHADOW_PSSM1=1024,J$a.SHADERDEFINE_SHADOW_PSSM2=2048,J$a.SHADERDEFINE_SHADOW_PSSM3=4096,J$a.SHADERDEFINE_SHADOW_PCF_NO=8192,J$a.SHADERDEFINE_SHADOW_PCF1=16384,J$a.SHADERDEFINE_SHADOW_PCF2=32768,J$a.SHADERDEFINE_SHADOW_PCF3=65536,J$a.MAX_PSSM_COUNT=3,J$a}(),J$ob=function(){function J$X(){}return J$n(J$X,"laya.d3.utils.Picker"),J$X.calculateCursorRay=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$a.elements[0],J$h=J$a.elements[1],J$i=J$X._tempVector30,J$j=J$i.elements;J$j[0]=J$g,J$j[1]=J$h,J$j[2]=J$b.minDepth;var J$k=J$X._tempVector31,J$l=J$k.elements;J$l[0]=J$g,J$l[1]=J$h,J$l[2]=J$b.maxDepth;var J$m=J$f.origin,J$n=J$X._tempVector32;J$b.unprojectFromWVP(J$i,J$c,J$d,J$e,J$m),J$b.unprojectFromWVP(J$k,J$c,J$d,J$e,J$n);var J$o=J$f.direction.elements;J$o[0]=J$n.x-J$m.x,J$o[1]=J$n.y-J$m.y,J$o[2]=J$n.z-J$m.z,J$gb.normalize(J$f.direction,J$f.direction)},J$X.rayIntersectsPositionsAndIndices=function(J$a,J$b,J$c,J$d,J$e){for(var J$f=J$c.vertexStride/4,J$g=J$c.getVertexElementByUsage(0).offset/4,J$h=Number.MAX_VALUE,J$i=-1,J$j=-1,J$k=-1,J$l=0;J$l<J$d.length;J$l+=3){var J$m=J$X._tempVector35,J$n=J$m.elements,J$o=J$d[J$l]*J$f,J$p=J$o+J$g;J$n[0]=J$b[J$p],J$n[1]=J$b[1+J$p],J$n[2]=J$b[2+J$p];var J$q=J$X._tempVector36,J$r=J$q.elements,J$u=J$d[J$l+1]*J$f,J$v=J$u+J$g;J$r[0]=J$b[J$v],J$r[1]=J$b[1+J$v],J$r[2]=J$b[2+J$v];var J$w=J$X._tempVector37,J$x=J$w.elements,J$y=J$d[J$l+2]*J$f,J$z=J$y+J$g;J$x[0]=J$b[J$z],J$x[1]=J$b[1+J$z],J$x[2]=J$b[2+J$z];var J$A=laya.d3.utils.Picker.rayIntersectsTriangle(J$a,J$m,J$q,J$w);!isNaN(J$A)&&J$A<J$h&&(J$h=J$A,J$i=J$o,J$j=J$u,J$k=J$y)}if(J$h===Number.MAX_VALUE)return J$e.position.toDefault(),J$e.distance=Number.MAX_VALUE,J$e.trianglePositions[0].toDefault(),J$e.trianglePositions[1].toDefault(),J$e.trianglePositions[2].toDefault(),J$e.triangleNormals[0].toDefault(),J$e.triangleNormals[1].toDefault(),J$e.triangleNormals[2].toDefault(),!1;J$e.distance=J$h,J$gb.scale(J$a.direction,J$h,J$e.position),J$gb.add(J$a.origin,J$e.position,J$e.position);var J$B=J$e.trianglePositions,J$C=J$B[0],J$D=J$B[1],J$E=J$B[2],J$F=J$C.elements,J$G=J$D.elements,J$H=J$E.elements,J$I=J$i+J$g;J$F[0]=J$b[J$I],J$F[1]=J$b[J$I+1],J$F[2]=J$b[J$I+2];var J$J=J$j+J$g;J$G[0]=J$b[J$J],J$G[1]=J$b[J$J+1],J$G[2]=J$b[J$J+2];var J$K=J$k+J$g;J$H[0]=J$b[J$K],J$H[1]=J$b[J$K+1],J$H[2]=J$b[J$K+2];var J$L=J$c.getVertexElementByUsage(3);if(J$L){var J$M=J$L.offset/4,J$N=J$e.triangleNormals,J$O=J$N[0],J$P=J$N[1],J$Q=J$N[2],J$R=J$O.elements,J$S=J$P.elements,J$T=J$Q.elements,J$U=J$i+J$M;J$R[0]=J$b[J$U],J$R[1]=J$b[J$U+1],J$R[2]=J$b[J$U+2];var J$V=J$j+J$M;J$S[0]=J$b[J$V],J$S[1]=J$b[J$V+1],J$S[2]=J$b[J$V+2];var J$W=J$k+J$M;J$T[0]=J$b[J$W],J$T[1]=J$b[J$W+1],J$T[2]=J$b[J$W+2]}return!0},J$X.rayIntersectsTriangle=function(J$a,J$b,J$c,J$d){var J$e=J$X._tempVector30,J$f=J$X._tempVector31;J$gb.subtract(J$c,J$b,J$e),J$gb.subtract(J$d,J$b,J$f);var J$g,J$h=J$X._tempVector32;if(J$gb.cross(J$a.direction,J$f,J$h),(J$g=J$gb.dot(J$e,J$h))>-Number.MIN_VALUE&&J$g<Number.MIN_VALUE)return Number.NaN;var J$i,J$j=1/J$g,J$k=J$X._tempVector33;if(J$gb.subtract(J$a.origin,J$b,J$k),J$i=J$gb.dot(J$k,J$h),(J$i*=J$j)<0||1<J$i)return Number.NaN;var J$l,J$m,J$n=J$X._tempVector34;return J$gb.cross(J$k,J$e,J$n),J$l=J$gb.dot(J$a.direction,J$n),(J$l*=J$j)<0||1<J$i+J$l?Number.NaN:(J$m=J$gb.dot(J$f,J$n),(J$m*=J$j)<0?Number.NaN:J$m)},J$l(J$X,["_tempVector30",function(){return this._tempVector30=new J$gb},"_tempVector31",function(){return this._tempVector31=new J$gb},"_tempVector32",function(){return this._tempVector32=new J$gb},"_tempVector33",function(){return this._tempVector33=new J$gb},"_tempVector34",function(){return this._tempVector34=new J$gb},"_tempVector35",function(){return this._tempVector35=new J$gb},"_tempVector36",function(){return this._tempVector36=new J$gb},"_tempVector37",function(){return this._tempVector37=new J$gb}]),J$X}(),J$pb=(function(){function J$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new J$gb,new J$gb,new J$gb],this.trianglePositions.length=3,this.triangleNormals=[new J$gb,new J$gb,new J$gb],this.triangleNormals.length=3,this.position=new J$gb}J$n(J$a,"laya.d3.utils.RaycastHit"),J$a.prototype.cloneTo=function(J$a){J$a.distance=this.distance,this.trianglePositions[0].cloneTo(J$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(J$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(J$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(J$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(J$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(J$a.triangleNormals[2]),this.position.cloneTo(J$a.position),J$a.sprite3D=this.sprite3D}}(),function(){function J$a(J$a,J$b){this._width=0,this._height=0,this._width=J$a,this._height=J$b}J$n(J$a,"laya.d3.utils.Size");var J$b=J$a.prototype;return J$o(0,J$b,"width",function(){return-1===this._width?J$Y.clientWidth:this._width}),J$o(0,J$b,"height",function(){return-1===this._height?J$Y.clientHeight:this._height}),J$o(1,J$a,"fullScreen",function(){return new J$a(-1,-1)}),J$a}()),J$qb=function(){function J$I(){}return J$n(J$I,"laya.d3.utils.Utils3D"),J$I._rotationTransformScaleSkinAnimation=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l){var J$m,J$n,J$o,J$p,J$q,J$r=J$I._tempArray16_0,J$u=J$I._tempArray16_1,J$v=J$I._tempArray16_2,J$w=J$d+J$d,J$x=J$e+J$e,J$y=J$f+J$f,J$z=J$d*J$w,J$A=J$e*J$w,J$B=J$e*J$x,J$C=J$f*J$w,J$D=J$f*J$x,J$E=J$f*J$y,J$F=J$g*J$w,J$G=J$g*J$x,J$H=J$g*J$y;for(J$r[15]=1,J$r[0]=1-J$B-J$E,J$r[1]=J$A+J$H,J$r[2]=J$C-J$G,J$r[4]=J$A-J$H,J$r[5]=1-J$z-J$E,J$r[6]=J$D+J$F,J$r[8]=J$C+J$G,J$r[9]=J$D-J$F,J$r[10]=1-J$z-J$B,J$u[15]=1,J$u[0]=J$h,J$u[5]=J$i,J$u[10]=J$j,J$m=0;J$m<4;J$m++)J$n=J$r[J$m],J$o=J$r[J$m+4],J$p=J$r[J$m+8],J$q=J$r[J$m+12],J$v[J$m]=J$n,J$v[J$m+4]=J$o,J$v[J$m+8]=J$p,J$v[J$m+12]=J$n*J$a+J$o*J$b+J$p*J$c+J$q;for(J$m=0;J$m<4;J$m++)J$n=J$v[J$m],J$o=J$v[J$m+4],J$p=J$v[J$m+8],J$q=J$v[J$m+12],J$k[J$m+J$l]=J$n*J$u[0]+J$o*J$u[1]+J$p*J$u[2]+J$q*J$u[3],J$k[J$m+J$l+4]=J$n*J$u[4]+J$o*J$u[5]+J$p*J$u[6]+J$q*J$u[7],J$k[J$m+J$l+8]=J$n*J$u[8]+J$o*J$u[9]+J$p*J$u[10]+J$q*J$u[11],J$k[J$m+J$l+12]=J$n*J$u[12]+J$o*J$u[13]+J$p*J$u[14]+J$q*J$u[15]},J$I._createNodeByJson=function(J$a,J$b,J$c,J$d){if(!J$c)switch(J$b.type){case"Sprite3D":J$c=new J$Kb;break;case"MeshSprite3D":J$c=new J$Xb;break;case"SkinnedMeshSprite3D":J$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":J$c=new ShuriKenParticle3D;break;case"TrailSprite3D":J$c=new TrailSprite3D;break;case"Terrain":J$c=new Terrain;break;case"Camera":J$c=new J$Wb;break;case"DirectionLight":J$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var J$e=J$b.props;if(J$e)for(var J$f in J$e)J$c[J$f]=J$e[J$f];var J$g=J$b.customProps;J$g&&(J$c instanceof laya.d3.core.Sprite3D?(J$c._parseBaseCustomProps(J$g),J$c._parseCustomProps(J$a,J$d,J$g,J$b),J$c._parseCustomComponent(J$a,J$d,J$b.components)):J$c._parseCustomProps(J$a,J$d,J$g,J$b));var J$h=J$b.child;if(J$h)for(var J$i=0,J$j=J$h.length;J$i<J$j;J$i++){var J$k=J$I._createNodeByJson(J$a,J$h[J$i],null,J$d);J$c.addChild(J$k)}return J$c},J$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h,J$i=0,J$j=0,J$k=J$a.length;for(J$g=0;J$g<J$k;J$i+=J$a[J$g].keyframeWidth,J$j+=16,J$g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(J$b[J$i+0],J$b[J$i+1],J$b[J$i+2],J$b[J$i+3],J$b[J$i+4],J$b[J$i+5],J$b[J$i+6],J$b[J$i+7],J$b[J$i+8],J$b[J$i+9],J$d,J$j),0!=J$g&&(J$h=16*J$a[J$g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(J$d,J$h,J$d,J$j,J$d,J$j));var J$l=J$c.length;for(J$g=0;J$g<J$l;J$g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J$d,16*J$f[J$g],J$c[J$g],J$e,16*J$g)},J$I._computeAnimationDatasByArrayAndMatrixFast=function(J$a,J$b,J$c,J$d){for(var J$e=0,J$f=J$a.length;J$e<J$f;J$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J$b,16*J$d[J$e],J$a[J$e],J$c,16*J$e)},J$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g,J$h=0,J$i=0,J$j=J$a.length;for(J$f=0;J$f<J$j;J$h+=J$a[J$f].keyframeWidth,J$i+=16,J$f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(J$b[J$h+7],J$b[J$h+8],J$b[J$h+9],J$b[J$h+3],J$b[J$h+4],J$b[J$h+5],J$b[J$h+6],J$b[J$h+0],J$b[J$h+1],J$b[J$h+2],J$d,J$i),0!=J$f&&(J$g=16*J$a[J$f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(J$d,J$g,J$d,J$i,J$d,J$i));var J$k=J$c.length;for(J$f=0;J$f<J$k;J$f++){var J$l=16*J$f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J$d,J$l,J$c[J$f],J$e,J$l)}},J$I._computeAnimationDatasByArrayAndMatrixFastOld=function(J$a,J$b,J$c){for(var J$d=J$a.length,J$e=0;J$e<J$d;J$e++){var J$f=16*J$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(J$b,J$f,J$a[J$e],J$c,J$f)}},J$I._computeRootAnimationData=function(J$a,J$b,J$c){for(var J$d=0,J$e=0,J$f=0,J$g=J$a.length;J$d<J$g;J$e+=J$a[J$d].keyframeWidth,J$f+=16,J$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(J$b[J$e+0],J$b[J$e+1],J$b[J$e+2],J$b[J$e+3],J$b[J$e+4],J$b[J$e+5],J$b[J$e+6],J$b[J$e+7],J$b[J$e+8],J$b[J$e+9],J$c,J$f)},J$I.transformVector3ArrayByQuat=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$c.elements,J$g=J$a[J$b],J$h=J$a[J$b+1],J$i=J$a[J$b+2],J$j=J$f[0],J$k=J$f[1],J$l=J$f[2],J$m=J$f[3],J$n=J$m*J$g+J$k*J$i-J$l*J$h,J$o=J$m*J$h+J$l*J$g-J$j*J$i,J$p=J$m*J$i+J$j*J$h-J$k*J$g,J$q=-J$j*J$g-J$k*J$h-J$l*J$i;J$d[J$e]=J$n*J$m+J$q*-J$j+J$o*-J$l-J$p*-J$k,J$d[J$e+1]=J$o*J$m+J$q*-J$k+J$p*-J$j-J$n*-J$l,J$d[J$e+2]=J$p*J$m+J$q*-J$l+J$n*-J$k-J$o*-J$j},J$I.mulMatrixByArray=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h,J$i,J$j,J$k;if(J$e===J$c){for(J$c=J$I._tempArray16_3,J$g=0;J$g<16;++J$g)J$c[J$g]=J$e[J$f+J$g];J$d=0}for(J$g=0;J$g<4;J$g++)J$h=J$a[J$b+J$g],J$i=J$a[J$b+J$g+4],J$j=J$a[J$b+J$g+8],J$k=J$a[J$b+J$g+12],J$e[J$f+J$g]=J$h*J$c[J$d+0]+J$i*J$c[J$d+1]+J$j*J$c[J$d+2]+J$k*J$c[J$d+3],J$e[J$f+J$g+4]=J$h*J$c[J$d+4]+J$i*J$c[J$d+5]+J$j*J$c[J$d+6]+J$k*J$c[J$d+7],J$e[J$f+J$g+8]=J$h*J$c[J$d+8]+J$i*J$c[J$d+9]+J$j*J$c[J$d+10]+J$k*J$c[J$d+11],J$e[J$f+J$g+12]=J$h*J$c[J$d+12]+J$i*J$c[J$d+13]+J$j*J$c[J$d+14]+J$k*J$c[J$d+15]},J$I.mulMatrixByArrayFast=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h,J$i,J$j,J$k;for(J$g=0;J$g<4;J$g++)J$h=J$a[J$b+J$g],J$i=J$a[J$b+J$g+4],J$j=J$a[J$b+J$g+8],J$k=J$a[J$b+J$g+12],J$e[J$f+J$g]=J$h*J$c[J$d+0]+J$i*J$c[J$d+1]+J$j*J$c[J$d+2]+J$k*J$c[J$d+3],J$e[J$f+J$g+4]=J$h*J$c[J$d+4]+J$i*J$c[J$d+5]+J$j*J$c[J$d+6]+J$k*J$c[J$d+7],J$e[J$f+J$g+8]=J$h*J$c[J$d+8]+J$i*J$c[J$d+9]+J$j*J$c[J$d+10]+J$k*J$c[J$d+11],J$e[J$f+J$g+12]=J$h*J$c[J$d+12]+J$i*J$c[J$d+13]+J$j*J$c[J$d+14]+J$k*J$c[J$d+15]},J$I.mulMatrixByArrayAndMatrixFast=function(J$a,J$b,J$c,J$d,J$e){var J$f,J$g,J$h,J$i,J$j,J$k=J$c.elements,J$l=J$k[0],J$m=J$k[1],J$n=J$k[2],J$o=J$k[3],J$p=J$k[4],J$q=J$k[5],J$r=J$k[6],J$u=J$k[7],J$v=J$k[8],J$w=J$k[9],J$x=J$k[10],J$y=J$k[11],J$z=J$k[12],J$A=J$k[13],J$B=J$k[14],J$C=J$k[15],J$D=J$b,J$E=J$b+4,J$F=J$b+8,J$G=J$b+12,J$H=J$e,J$I=J$e+4,J$J=J$e+8,J$K=J$e+12;for(J$f=0;J$f<4;J$f++)J$g=J$a[J$D+J$f],J$h=J$a[J$E+J$f],J$i=J$a[J$F+J$f],J$j=J$a[J$G+J$f],J$d[J$H+J$f]=J$g*J$l+J$h*J$m+J$i*J$n+J$j*J$o,J$d[J$I+J$f]=J$g*J$p+J$h*J$q+J$i*J$r+J$j*J$u,J$d[J$J+J$f]=J$g*J$v+J$h*J$w+J$i*J$x+J$j*J$y,J$d[J$K+J$f]=J$g*J$z+J$h*J$A+J$i*J$B+J$j*J$C},J$I.createAffineTransformationArray=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l){var J$m=J$d+J$d,J$n=J$e+J$e,J$o=J$f+J$f,J$p=J$d*J$m,J$q=J$d*J$n,J$r=J$d*J$o,J$u=J$e*J$n,J$v=J$e*J$o,J$w=J$f*J$o,J$x=J$g*J$m,J$y=J$g*J$n,J$z=J$g*J$o;J$k[J$l+0]=(1-(J$u+J$w))*J$h,J$k[J$l+1]=(J$q+J$z)*J$h,J$k[J$l+2]=(J$r-J$y)*J$h,J$k[J$l+3]=0,J$k[J$l+4]=(J$q-J$z)*J$i,J$k[J$l+5]=(1-(J$p+J$w))*J$i,J$k[J$l+6]=(J$v+J$x)*J$i,J$k[J$l+7]=0,J$k[J$l+8]=(J$r+J$y)*J$j,J$k[J$l+9]=(J$v-J$x)*J$j,J$k[J$l+10]=(1-(J$p+J$u))*J$j,J$k[J$l+11]=0,J$k[J$l+12]=J$a,J$k[J$l+13]=J$b,J$k[J$l+14]=J$c,J$k[J$l+15]=1},J$I.transformVector3ArrayToVector3ArrayCoordinate=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$I._tempArray4_0,J$g=J$a[J$b+0],J$h=J$a[J$b+1],J$i=J$a[J$b+2],J$j=J$c.elements;J$f[0]=J$g*J$j[0]+J$h*J$j[4]+J$i*J$j[8]+J$j[12],J$f[1]=J$g*J$j[1]+J$h*J$j[5]+J$i*J$j[9]+J$j[13],J$f[2]=J$g*J$j[2]+J$h*J$j[6]+J$i*J$j[10]+J$j[14],J$f[3]=1/(J$g*J$j[3]+J$h*J$j[7]+J$i*J$j[11]+J$j[15]),J$d[J$e+0]=J$f[0]*J$f[3],J$d[J$e+1]=J$f[1]*J$f[3],J$d[J$e+2]=J$f[2]*J$f[3]},J$I.transformLightingMapTexcoordByUV0Array=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$c.elements;J$d[J$e+0]=J$a[J$b+0]*J$f[0]+J$f[2],J$d[J$e+1]=(J$a[J$b+1]-1)*J$f[1]+J$f[3]},J$I.transformLightingMapTexcoordByUV1Array=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$c.elements;J$d[J$e+0]=J$a[J$b+0]*J$f[0]+J$f[2],J$d[J$e+1]=1+J$a[J$b+1]*J$f[1]+J$f[3]},J$I.getURLVerion=function(J$a){var J$b=J$a.indexOf("?");return 0<=J$b?J$a.substr(J$b):null},J$I._quaternionCreateFromYawPitchRollArray=function(J$a,J$b,J$c,J$d){var J$e=.5*J$c,J$f=.5*J$b,J$g=.5*J$a,J$h=Math.sin(J$e),J$i=Math.cos(J$e),J$j=Math.sin(J$f),J$k=Math.cos(J$f),J$l=Math.sin(J$g),J$m=Math.cos(J$g);J$d[0]=J$m*J$j*J$i+J$l*J$k*J$h,J$d[1]=J$l*J$k*J$i-J$m*J$j*J$h,J$d[2]=J$m*J$k*J$h-J$l*J$j*J$i,J$d[3]=J$m*J$k*J$i+J$l*J$j*J$h},J$I._createAffineTransformationArray=function(J$a,J$b,J$c,J$d){var J$e=J$b[0],J$f=J$b[1],J$g=J$b[2],J$h=J$b[3],J$i=J$e+J$e,J$j=J$f+J$f,J$k=J$g+J$g,J$l=J$e*J$i,J$m=J$e*J$j,J$n=J$e*J$k,J$o=J$f*J$j,J$p=J$f*J$k,J$q=J$g*J$k,J$r=J$h*J$i,J$u=J$h*J$j,J$v=J$h*J$k,J$w=J$c[0],J$x=J$c[1],J$y=J$c[2];J$d[0]=(1-(J$o+J$q))*J$w,J$d[1]=(J$m+J$v)*J$w,J$d[2]=(J$n-J$u)*J$w,J$d[3]=0,J$d[4]=(J$m-J$v)*J$x,J$d[5]=(1-(J$l+J$q))*J$x,J$d[6]=(J$p+J$r)*J$x,J$d[7]=0,J$d[8]=(J$n+J$u)*J$y,J$d[9]=(J$p-J$r)*J$y,J$d[10]=(1-(J$l+J$o))*J$y,J$d[11]=0,J$d[12]=J$a[0],J$d[13]=J$a[1],J$d[14]=J$a[2],J$d[15]=1},J$I._mulMatrixArray=function(J$a,J$b,J$c,J$d){var J$e,J$f,J$g,J$h,J$i,J$j=J$b.elements,J$k=J$j[0],J$l=J$j[1],J$m=J$j[2],J$n=J$j[3],J$o=J$j[4],J$p=J$j[5],J$q=J$j[6],J$r=J$j[7],J$u=J$j[8],J$v=J$j[9],J$w=J$j[10],J$x=J$j[11],J$y=J$j[12],J$z=J$j[13],J$A=J$j[14],J$B=J$j[15],J$C=J$d,J$D=J$d+4,J$E=J$d+8,J$F=J$d+12;for(J$e=0;J$e<4;J$e++)J$f=J$a[J$e],J$g=J$a[J$e+4],J$h=J$a[J$e+8],J$i=J$a[J$e+12],J$c[J$C+J$e]=J$f*J$k+J$g*J$l+J$h*J$m+J$i*J$n,J$c[J$D+J$e]=J$f*J$o+J$g*J$p+J$h*J$q+J$i*J$r,J$c[J$E+J$e]=J$f*J$u+J$g*J$v+J$h*J$w+J$i*J$x,J$c[J$F+J$e]=J$f*J$y+J$g*J$z+J$h*J$A+J$i*J$B},J$I.getYawPitchRoll=function(J$a,J$b){J$I.transformQuat(J$gb.ForwardRH,J$a,J$cb.TEMPVector31),J$I.transformQuat(J$gb.Up,J$a,J$cb.TEMPVector32);var J$c=J$cb.TEMPVector32.elements;J$I.angleTo(J$gb.ZERO,J$cb.TEMPVector31,J$cb.TEMPVector33);var J$d=J$cb.TEMPVector33.elements;J$d[0]==Math.PI/2?(J$d[1]=J$I.arcTanAngle(J$c[2],J$c[0]),J$d[2]=0):J$d[0]==-Math.PI/2?(J$d[1]=J$I.arcTanAngle(-J$c[2],-J$c[0]),J$d[2]=0):(J$ab.createRotationY(-J$d[1],J$cb.TEMPMatrix0),J$ab.createRotationX(-J$d[0],J$cb.TEMPMatrix1),J$gb.transformCoordinate(J$cb.TEMPVector32,J$cb.TEMPMatrix0,J$cb.TEMPVector32),J$gb.transformCoordinate(J$cb.TEMPVector32,J$cb.TEMPMatrix1,J$cb.TEMPVector32),J$d[2]=J$I.arcTanAngle(J$c[1],-J$c[0])),J$d[1]<=-Math.PI&&(J$d[1]=Math.PI),J$d[2]<=-Math.PI&&(J$d[2]=Math.PI),J$d[1]>=Math.PI&&J$d[2]>=Math.PI&&(J$d[1]=0,J$d[2]=0,J$d[0]=Math.PI-J$d[0]),J$b[0]=J$d[1],J$b[1]=J$d[0],J$b[2]=J$d[2]},J$I.arcTanAngle=function(J$a,J$b){return 0==J$a?1==J$b?Math.PI/2:-Math.PI/2:0<J$a?Math.atan(J$b/J$a):J$a<0?0<J$b?Math.atan(J$b/J$a)+Math.PI:Math.atan(J$b/J$a)-Math.PI:0},J$I.angleTo=function(J$a,J$b,J$c){J$gb.subtract(J$b,J$a,J$cb.TEMPVector30),J$gb.normalize(J$cb.TEMPVector30,J$cb.TEMPVector30),J$c.elements[0]=Math.asin(J$cb.TEMPVector30.y),J$c.elements[1]=J$I.arcTanAngle(-J$cb.TEMPVector30.z,-J$cb.TEMPVector30.x)},J$I.transformQuat=function(J$a,J$b,J$c){var J$d=J$c.elements,J$e=J$a.elements,J$f=J$b,J$g=J$e[0],J$h=J$e[1],J$i=J$e[2],J$j=J$f[0],J$k=J$f[1],J$l=J$f[2],J$m=J$f[3],J$n=J$m*J$g+J$k*J$i-J$l*J$h,J$o=J$m*J$h+J$l*J$g-J$j*J$i,J$p=J$m*J$i+J$j*J$h-J$k*J$g,J$q=-J$j*J$g-J$k*J$h-J$l*J$i;J$d[0]=J$n*J$m+J$q*-J$j+J$o*-J$l-J$p*-J$k,J$d[1]=J$o*J$m+J$q*-J$k+J$p*-J$j-J$n*-J$l,J$d[2]=J$p*J$m+J$q*-J$l+J$n*-J$k-J$o*-J$j},J$I.quaterionNormalize=function(J$a,J$b){var J$c=J$a[0],J$d=J$a[1],J$e=J$a[2],J$f=J$a[3],J$g=J$c*J$c+J$d*J$d+J$e*J$e+J$f*J$f;0<J$g&&(J$g=1/Math.sqrt(J$g),J$b[0]=J$c*J$g,J$b[1]=J$d*J$g,J$b[2]=J$e*J$g,J$b[3]=J$f*J$g)},J$I.matrix4x4MultiplyFFF=function(J$a,J$b,J$c){var J$d,J$e,J$f,J$g,J$h;if(J$c===J$b)for(J$b=new Float32Array(16),J$d=0;J$d<16;++J$d)J$b[J$d]=J$c[J$d];for(J$d=0;J$d<4;J$d++)J$e=J$a[J$d],J$f=J$a[J$d+4],J$g=J$a[J$d+8],J$h=J$a[J$d+12],J$c[J$d]=J$e*J$b[0]+J$f*J$b[1]+J$g*J$b[2]+J$h*J$b[3],J$c[J$d+4]=J$e*J$b[4]+J$f*J$b[5]+J$g*J$b[6]+J$h*J$b[7],J$c[J$d+8]=J$e*J$b[8]+J$f*J$b[9]+J$g*J$b[10]+J$h*J$b[11],J$c[J$d+12]=J$e*J$b[12]+J$f*J$b[13]+J$g*J$b[14]+J$h*J$b[15]},J$I.matrix4x4MultiplyMFM=function(J$a,J$b,J$c){J$I.matrix4x4MultiplyFFF(J$a.elements,J$b,J$c.elements)},J$l(J$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new J$gb},"_tempVector3_1",function(){return this._tempVector3_1=new J$gb},"_tempVector3_2",function(){return this._tempVector3_2=new J$gb},"_tempVector3_3",function(){return this._tempVector3_3=new J$gb},"_tempVector3_4",function(){return this._tempVector3_4=new J$gb},"_tempVector3_5",function(){return this._tempVector3_5=new J$gb},"_tempVector3_6",function(){return this._tempVector3_6=new J$gb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),J$I}(),J$rb=function(){function J$G(){}return J$n(J$G,"Laya3D"),J$G._cancelLoadByUrl=function(J$a){J$x.loader.cancelLoadByUrl(J$a),J$G._innerFirstLevelLoaderManager.cancelLoadByUrl(J$a),J$G._innerSecondLevelLoaderManager.cancelLoadByUrl(J$a),J$G._innerThirdLevelLoaderManager.cancelLoadByUrl(J$a),J$G._innerFourthLevelLoaderManager.cancelLoadByUrl(J$a)},J$G._changeWebGLSize=function(J$a,J$b){J$F.onStageResize(J$a,J$b),J$Y.clientWidth=J$a,J$Y.clientHeight=J$b},J$G.__init__=function(){var J$a=J$b.createMap;J$a.lh=[J$Kb,"SPRITE3DHIERARCHY"],J$a.ls=[J$Jb,"SPRITE3DHIERARCHY"],J$a.lm=[J$Rb,"MESH"],J$a.lmat=[J$Mb,"MATERIAL"],J$a.jpg=[J$Tb,"nativeimage"],J$a.jpeg=[J$Tb,"nativeimage"],J$a.png=[J$Tb,"nativeimage"],J$a.pkm=[J$Tb,"arraybuffer"],J$a.raw=[J$Pb,"arraybuffer"],J$a.mipmaps=[J$Pb,"arraybuffer"],J$r.parserMap.SPRITE3DHIERARCHY=J$G._loadHierarchy,J$r.parserMap.MESH=J$G._loadMesh,J$r.parserMap.MATERIAL=J$G._loadMaterial,J$r.parserMap.TEXTURECUBE=J$G._loadTextureCube,J$r.parserMap.TERRAIN=J$G._loadTerrain,J$G._innerFirstLevelLoaderManager.on("error",null,J$G._eventLoadManagerError),J$G._innerSecondLevelLoaderManager.on("error",null,J$G._eventLoadManagerError),J$G._innerThirdLevelLoaderManager.on("error",null,J$G._eventLoadManagerError),J$G._innerFourthLevelLoaderManager.on("error",null,J$G._eventLoadManagerError)},J$G.READ_BLOCK=function(){return J$G._readData.pos+=4,!0},J$G.READ_DATA=function(){return J$G._DATA.offset=J$G._readData.getUint32(),J$G._DATA.size=J$G._readData.getUint32(),!0},J$G.READ_STRINGS=function(){var J$a=[],J$b={offset:0,size:0};J$b.offset=J$G._readData.getUint16(),J$b.size=J$G._readData.getUint16();J$G._readData.pos;J$G._readData.pos=J$b.offset+J$G._DATA.offset;for(var J$c=0;J$c<J$b.size;J$c++){var J$d=J$G._readData.readUTFString();-1===J$d.lastIndexOf(".lmat")&&-1===J$d.lastIndexOf(".lpbr")||J$a.push(J$d)}return J$a},J$G.formatRelativePath=function(J$a,J$b){var J$c;if("."===J$b.charAt(0)){for(var J$d=(J$a+J$b).split("/"),J$e=0,J$f=J$d.length;J$e<J$f;J$e++)if(".."==J$d[J$e]){var J$g=J$e-1;0<J$g&&".."!==J$d[J$g]&&(J$d.splice(J$g,2),J$e-=2)}J$c=J$d.join("/")}else J$c=J$a+J$b;return null!=J$E.customFormat&&(J$c=J$E.customFormat(J$c,null)),J$c},J$G._eventLoadManagerError=function(J$a){J$x.loader.event("error",J$a)},J$G._addHierarchyInnerUrls=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g=J$G.formatRelativePath(J$d,J$e);J$c&&(J$g+=J$c),J$a.push({url:J$g,clas:J$f}),J$b[J$e]=J$g},J$G._getSprite3DHierarchyInnerUrls=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){var J$h,J$i=0,J$j=0;switch(J$a.type){case"Scene":var J$k=J$a.customProps.lightmaps;for(J$i=0,J$j=J$k.length;J$i<J$j;J$i++){var J$l=J$k[J$i].replace(".exr",".png");J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$l,J$Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var J$m;if(J$a.instanceParams)(J$m=J$a.instanceParams.loadPath)&&J$G._addHierarchyInnerUrls(J$b,J$e,J$f,J$g,J$m,J$Rb);else{(J$m=(J$h=J$a.customProps).meshPath)&&J$G._addHierarchyInnerUrls(J$b,J$e,J$f,J$g,J$m,J$Rb);var J$n=J$h.materials;if(J$n)for(J$i=0,J$j=J$n.length;J$i<J$j;J$i++){for(var J$o=J$n[J$i],J$p=J$o.type.split("."),J$q=J$H.window,J$r=0,J$u=J$p.length;J$r<J$u;++J$r){J$q=J$q[this.clasPaths[J$r]]}if("function"!=typeof J$q)throw"_getSprite3DHierarchyInnerUrls 错误: "+J$o.type+" 不是类";J$G._addHierarchyInnerUrls(J$c,J$e,J$f,J$g,J$o.path,J$q)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var J$v=(J$h=J$a.customProps).meshPath;J$v&&J$G._addHierarchyInnerUrls(J$b,J$e,J$f,J$g,J$v,J$Rb);var J$w=J$h.material;if(J$w){J$p=J$w.type.split("."),J$q=J$H.window;for(J$r=0,J$u=J$p.length;J$r<J$u;++J$r){J$q=J$q[this.clasPaths[J$r]]}J$G._addHierarchyInnerUrls(J$c,J$e,J$f,J$g,J$w.path,J$q)}else{var J$x=J$h.materialPath;if(J$x)J$G._addHierarchyInnerUrls(J$c,J$e,J$f,J$g,J$x,ShurikenParticleMaterial);else{var J$y=J$h.texturePath;J$y&&J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$y,J$Tb)}}break;case"Terrain":J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$a.customProps.dataPath,TerrainRes)}var J$z=J$a.components;for(var J$A in J$z){var J$B=J$z[J$A];switch(J$A){case"Animator":var J$C=J$B.avatarPath;if(J$C)J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$C,Avatar);else{var J$D=J$B.avatar;J$D&&J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$D.path,Avatar)}var J$E=J$B.clipPaths;for(J$i=0,J$j=J$E.length;J$i<J$j;J$i++)J$G._addHierarchyInnerUrls(J$d,J$e,J$f,J$g,J$E[J$i],AnimationClip)}}var J$F=J$a.child;for(J$i=0,J$j=J$F.length;J$i<J$j;J$i++)J$G._getSprite3DHierarchyInnerUrls(J$F[J$i],J$b,J$c,J$d,J$e,J$f,J$g)},J$G._loadHierarchy=function(J$a){J$a.on("loaded",null,J$G._onHierarchylhLoaded,[J$a,J$a._class._getGroup()]),J$a.load(J$a.url,"json",!1,null,!0)},J$G._onHierarchylhLoaded=function(J$a,J$b,J$c){if(J$a._class.destroyed)J$a.endLoad();else{var J$d=J$a.url,J$e=J$qb.getURLVerion(J$d),J$f=J$E.getPath(J$d),J$g=[],J$h=[],J$i=[],J$j={};J$G._getSprite3DHierarchyInnerUrls(J$c,J$g,J$h,J$i,J$j,J$e,J$f);var J$k=J$g.length+J$h.length+J$i.length,J$l=J$k+1,J$m=1/J$l;if(J$G._onProcessChange(J$a,0,J$m,1),0<J$i.length){var J$n=J$k/J$l,J$o=J$D.create(null,J$G._onProcessChange,[J$a,J$m,J$n],!1);J$G._innerFourthLevelLoaderManager.create(J$i,J$D.create(null,J$G._onHierarchyInnerForthLevResouLoaded,[J$a,J$b,J$o,J$c,J$j,J$g,J$h,J$m+J$n*J$i.length,J$n]),J$o,null,null,1,!0,J$b)}else J$G._onHierarchyInnerForthLevResouLoaded(J$a,J$b,null,J$c,J$j,J$g,J$h,J$m,J$n)}},J$G._onHierarchyInnerForthLevResouLoaded=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){if(J$a._class.destroyed)J$a.endLoad();else if(J$c&&J$c.recover(),0<J$g.length){var J$j=J$D.create(null,J$G._onProcessChange,[J$a,J$h,J$i],!1);J$G._innerSecondLevelLoaderManager.create(J$g,J$D.create(null,J$G._onHierarchyInnerSecondLevResouLoaded,[J$a,J$b,J$j,J$d,J$e,J$f,J$h+J$i*J$g.length,J$i]),J$c,null,null,1,!0,J$b)}else J$G._onHierarchyInnerSecondLevResouLoaded(J$a,J$b,null,J$d,J$e,J$f,J$h,J$i)},J$G._onHierarchyInnerSecondLevResouLoaded=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h){if(J$a._class.destroyed)J$a.endLoad();else if(J$c&&J$c.recover(),0<J$f.length){var J$i=J$D.create(null,J$G._onProcessChange,[J$a,J$g,J$h],!1);J$G._innerFirstLevelLoaderManager.create(J$f,J$D.create(null,J$G._onHierarchyInnerFirstLevResouLoaded,[J$a,J$i,J$d,J$e]),J$c,null,null,1,!0,J$b)}else J$G._onHierarchyInnerFirstLevResouLoaded(J$a,null,J$d,J$e)},J$G._onHierarchyInnerFirstLevResouLoaded=function(J$a,J$b,J$c,J$d){J$b&&J$b.recover(),J$a.endLoad([J$c,J$d])},J$G._loadTerrain=function(J$a){J$a.on("loaded",null,J$G._onTerrainLtLoaded,[J$a,J$a._class._getGroup()]),J$a.load(J$a.url,"json",!1,null,!0)},J$G._onTerrainLtLoaded=function(J$a,J$b,J$c){if(J$a._class.destroyed)J$a.endLoad();else{var J$d,J$e,J$f=J$a.url,J$g=J$qb.getURLVerion(J$f),J$h=J$E.getPath(J$f),J$i=[],J$j={},J$k=0,J$l=0,J$m=J$c.heightData;J$d=J$m.url,J$e=J$G.formatRelativePath(J$h,J$d),J$g&&(J$e+=J$g),J$d=J$j[J$d]=J$e;var J$n=J$c.detailTexture;for(J$k=0,J$l=J$n.length;J$k<J$l;J$k++)J$i.push({url:J$n[J$k].diffuse});var J$o=J$c.normalMap;for(J$k=0,J$l=J$o.length;J$k<J$l;J$k++)J$i.push({url:J$o[J$k]});var J$p=J$c.alphaMap;for(J$k=0,J$l=J$p.length;J$k<J$l;J$k++)J$i.push({url:J$p[J$k],params:[!1,!1,6408,!0]});for(J$k=0,J$l=J$i.length;J$k<J$l;J$k++){var J$q=J$i[J$k].url;J$e=J$G.formatRelativePath(J$h,J$q),J$g&&(J$e+=J$g),J$i[J$k].url=J$e,J$j[J$q]=J$e}var J$r=J$i.length,J$u=J$r+2,J$v=1/J$u;J$G._onProcessChange(J$a,0,J$v,1);var J$w={heightMapLoaded:!1,texturesLoaded:!1},J$x=J$D.create(null,J$G._onProcessChange,[J$a,J$v,J$v],!1);J$G._innerFourthLevelLoaderManager.create(J$d,J$D.create(null,J$G._onTerrainHeightMapLoaded,[J$a,J$x,J$c,J$j,J$w]),J$x,null,[J$m.numX,J$m.numZ,J$m.bitType,J$m.value],1,!0,J$b);var J$y=J$D.create(null,J$G._onProcessChange,[J$a,2*J$v,J$r/J$u],!1);J$G._innerFourthLevelLoaderManager.create(J$i,J$D.create(null,J$G._onTerrainTexturesLoaded,[J$a,J$y,J$c,J$j,J$w]),J$y,null,null,1,!0,J$b)}},J$G._onTerrainHeightMapLoaded=function(J$a,J$b,J$c,J$d,J$e){J$e.heightMapLoaded=!0,J$e.texturesLoaded&&(J$a.endLoad([J$c,J$d]),J$b.recover())},J$G._onTerrainTexturesLoaded=function(J$a,J$b,J$c,J$d,J$e){J$e.texturesLoaded=!0,J$e.heightMapLoaded&&(J$a.endLoad([J$c,J$d]),J$b.recover())},J$G._loadMesh=function(J$a){J$a.on("loaded",null,J$G._onMeshLmLoaded,[J$a,J$a._class._getGroup()]),J$a.load(J$a.url,"arraybuffer",!1,null,!0)},J$G._onMeshLmLoaded=function(J$a,J$b,J$c){if(J$a._class.destroyed)J$a.endLoad();else{var J$d,J$e,J$f,J$g=J$a.url,J$h=J$qb.getURLVerion(J$g),J$i=J$E.getPath(J$g),J$j={},J$k=0,J$l=0;switch((J$G._readData=new J$y(J$c)).pos=0,J$G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var J$m=J$G._readData.getUint32();J$G._readData.pos=J$G._readData.pos+4,J$l=J$G._readData.getUint16(),J$G._readData.pos=J$G._readData.pos+8*J$l;var J$n=J$G._readData.getUint32();for(J$l=J$G._readData.getUint16(),J$G._readData.pos=J$m+J$n,J$d=[],J$k=0;J$k<J$l;J$k++){var J$o=J$G._readData.readUTFString();-1!==J$o.lastIndexOf(".lmat")&&J$d.push(J$o)}break;default:for(J$G.READ_BLOCK(),J$k=0;J$k<2;J$k++){var J$p=J$G._readData.getUint16(),J$q=J$G._strings[J$p],J$r=J$G["READ_"+J$q];if(null==J$r)throw new Error("model file err,no this function:"+J$p+" "+J$q);1===J$k?J$d=J$r.call():J$r.call()}}for(J$k=0,J$f=J$d.length;J$k<J$f;J$k++){var J$u=J$d[J$k];J$e=J$G.formatRelativePath(J$i,J$u),J$h&&(J$e+=J$h),J$d[J$k]=J$e,J$j[J$u]=J$e}if(0<J$d.length){J$G._onProcessChange(J$a,0,.5,1);var J$v=J$D.create(null,J$G._onProcessChange,[J$a,.5,.5],!1);J$G._innerSecondLevelLoaderManager.create(J$d,J$D.create(null,J$G._onMeshMateialLoaded,[J$a,J$v,J$c,J$j]),J$v,null,null,1,!0,J$b)}else J$a.endLoad([J$c,J$j])}},J$G._onMeshMateialLoaded=function(J$a,J$b,J$c,J$d){J$a.endLoad([J$c,J$d]),J$b.recover()},J$G._getMaterialTexturePath=function(J$a,J$b,J$c){var J$d=J$a.length-4;return J$a.indexOf(".dds")!=J$d&&J$a.indexOf(".tga")!=J$d&&J$a.indexOf(".exr")!=J$d&&J$a.indexOf(".DDS")!=J$d&&J$a.indexOf(".TGA")!=J$d&&J$a.indexOf(".EXR")!=J$d||(J$a=J$a.substr(0,J$d)+".png"),J$a=J$G.formatRelativePath(J$c,J$a),J$b&&(J$a+=J$b),J$a},J$G._loadMaterial=function(J$a){J$a.on("loaded",null,J$G._onMaterilLmatLoaded,[J$a,J$a._class._getGroup()]),J$a.load(J$a.url,"json",!1,null,!0)},J$G._onMaterilLmatLoaded=function(J$a,J$b,J$c){if(J$a._class.destroyed)J$a.endLoad();else{var J$d,J$e=J$a.url,J$f=J$qb.getURLVerion(J$e),J$g=J$E.getPath(J$e),J$h=[],J$i={},J$j=J$c.customProps,J$k=J$c.version;if(J$k)switch(J$k){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var J$l=J$c.props.textures,J$m=0,J$n=J$l.length;J$m<J$n;J$m++){var J$o=J$l[J$m],J$p=J$o.path;if(J$p){var J$q=J$p.length-4;J$p.indexOf(".exr")!=J$q&&J$p.indexOf(".EXR")!=J$q||(J$p=J$p.substr(0,J$q)+".png"),J$d=J$G.formatRelativePath(J$g,J$p),J$f&&(J$d+=J$f),J$h.push({url:J$d,params:J$o.params}),J$i[J$p]=J$d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var J$r=J$j.diffuseTexture.texture2D;if(J$r&&(J$d=J$G._getMaterialTexturePath(J$r,J$f,J$g),J$h.push(J$d),J$i[J$r]=J$d),J$j.normalTexture){var J$u=J$j.normalTexture.texture2D;J$u&&(J$d=J$G._getMaterialTexturePath(J$u,J$f,J$g),J$h.push(J$d),J$i[J$u]=J$d)}if(J$j.specularTexture){var J$v=J$j.specularTexture.texture2D;J$v&&(J$d=J$G._getMaterialTexturePath(J$v,J$f,J$g),J$h.push(J$d),J$i[J$v]=J$d)}if(J$j.emissiveTexture){var J$w=J$j.emissiveTexture.texture2D;J$w&&(J$d=J$G._getMaterialTexturePath(J$w,J$f,J$g),J$h.push(J$d),J$i[J$w]=J$d)}if(J$j.ambientTexture){var J$x=J$j.ambientTexture.texture2D;J$x&&(J$d=J$G._getMaterialTexturePath(J$x,J$f,J$g),J$h.push(J$d),J$i[J$x]=J$d)}if(J$j.reflectTexture){var J$y=J$j.reflectTexture.texture2D;J$y&&(J$d=J$G._getMaterialTexturePath(J$y,J$f,J$g),J$h.push(J$d),J$i[J$y]=J$d)}}var J$z=J$h.length,J$A=J$z+1,J$B=1/J$A;if(J$G._onProcessChange(J$a,0,J$B,1),0<J$z){var J$C=J$D.create(null,J$G._onProcessChange,[J$a,J$B,J$z/J$A],!1);J$G._innerFourthLevelLoaderManager.create(J$h,J$D.create(null,J$G._onMateialTexturesLoaded,[J$a,J$C,J$c,J$i]),J$C,J$Tb,null,1,!0,J$b)}else J$G._onMateialTexturesLoaded(J$a,null,J$c,null)}},J$G._onMateialTexturesLoaded=function(J$a,J$b,J$c,J$d){J$a.endLoad([J$c,J$d]),J$b&&J$b.recover()},J$G._loadTextureCube=function(J$a){J$a.on("loaded",null,J$G._onTextureCubeLtcLoaded,[J$a]),J$a.load(J$a.url,"json",!1,null,!0)},J$G._onTextureCubeLtcLoaded=function(J$a,J$b){if(J$a._class.destroyed)J$a.endLoad();else{var J$c=J$E.getPath(J$a.url),J$d=[J$G.formatRelativePath(J$c,J$b.px),J$G.formatRelativePath(J$c,J$b.nx),J$G.formatRelativePath(J$c,J$b.py),J$G.formatRelativePath(J$c,J$b.ny),J$G.formatRelativePath(J$c,J$b.pz),J$G.formatRelativePath(J$c,J$b.nz)];J$G._onProcessChange(J$a,0,1/7,1);var J$e=J$D.create(null,J$G._onProcessChange,[J$a,1/7,6/7],!1);J$G._innerFourthLevelLoaderManager.load(J$d,J$D.create(null,J$G._onTextureCubeImagesLoaded,[J$a,J$d,J$e]),J$e,"nativeimage")}},J$G._onTextureCubeImagesLoaded=function(J$a,J$b,J$c){var J$d=[];J$d.length=6;for(var J$e=0;J$e<6;J$e++){var J$f=J$b[J$e];J$d[J$e]=J$r.getRes(J$f),J$r.clearRes(J$f)}J$a.endLoad(J$d),J$c.recover()},J$G._onProcessChange=function(J$a,J$b,J$c,J$d){(J$d=J$b+J$d*J$c)<1&&J$a.event("progress",J$d)},J$G.init=function(J$a,J$b,J$c,J$d,J$e,J$f){if(void 0===J$c&&(J$c=!1),void 0===J$d&&(J$d=!1),void 0===J$e&&(J$e=!0),void 0===J$f&&(J$f=!0),J$u.update3DLoop=function(){},J$u.cancelLoadByUrl=function(J$a){J$G._cancelLoadByUrl(J$a)},J$i.isAntialias=J$c,J$i.isAlpha=J$d,J$i.premultipliedAlpha=J$e,J$i.isStencil=J$f,!J$F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");J$u.changeWebGLSize=J$G._changeWebGLSize,J$p.is3DMode=!0,J$x.init(J$a,J$b),J$I.__init__(),J$lb.__init__(),J$Xb.__init__(),J$Q.__init__(),J$G.__init__(),J$g.maxTextureCount=2,(J$G.debugMode||J$Z.debugMode)&&(J$G._debugPhasorSprite=new J$V)},J$G.HIERARCHY="SPRITE3DHIERARCHY",J$G.MESH="MESH",J$G.MATERIAL="MATERIAL",J$G.PBRMATERIAL="PBRMTL",J$G.TEXTURECUBE="TEXTURECUBE",J$G.TERRAIN="TERRAIN",J$G._readData=null,J$G._debugPhasorSprite=null,J$G.debugMode=!1,J$l(J$G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new J$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new J$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new J$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new J$b}]),J$G}(),J$ub=function(J$a){function J$e(J$a){J$e.__super.call(this),this._owner=J$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}J$n(J$e,"laya.d3.animation.AnimationTransform3D",J$f);var J$b=J$e.prototype;return J$b._getlocalMatrix=function(){return this._localUpdate&&(J$qb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},J$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldTransform()}},J$b._setWorldMatrixAndUpdate=function(J$a){if(this._worldMatrix=J$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var J$b=this._getlocalMatrix(),J$c=0;J$c<16;++J$c)this._worldMatrix[J$c]=J$b[J$c];else J$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},J$b._setWorldMatrixNoUpdate=function(J$a){this._worldMatrix=J$a},J$b._setWorldMatrixIgnoreUpdate=function(J$a){this._worldMatrix=J$a,this._worldUpdate=!1},J$b.getLocalPosition=function(){return this._localPosition},J$b.setLocalPosition=function(J$a){if(this._parent)this._localPosition=J$a,this._localUpdate=!0,this._onWorldTransform();else{var J$b=this._entity.owner._transform,J$c=this._entity.localPosition,J$d=J$c.elements;J$d[0]=J$a[0],J$d[1]=J$a[1],J$d[2]=J$a[2],J$b.localPosition=J$c}},J$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var J$a=this._localRotationEuler;J$qb._quaternionCreateFromYawPitchRollArray(J$a[1]/J$e._angleToRandin,J$a[0]/J$e._angleToRandin,J$a[2]/J$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},J$b.setLocalRotation=function(J$a){if(this._parent)this._localRotation=J$a,J$qb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var J$b=this._entity.owner._transform,J$c=this._entity.localRotation,J$d=J$c.elements;J$d[0]=J$a[0],J$d[1]=J$a[1],J$d[2]=J$a[2],J$d[3]=J$a[3],J$b.localRotation=J$c}},J$b.getLocalScale=function(){return this._localScale},J$b.setLocalScale=function(J$a){if(this._parent)this._localScale=J$a,this._localUpdate=!0,this._onWorldTransform();else{var J$b=this._entity.owner._transform,J$c=this._entity.localScale,J$d=J$c.elements;J$d[0]=J$a[0],J$d[1]=J$a[1],J$d[2]=J$a[2],J$b.localScale=J$c}},J$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){J$qb.getYawPitchRoll(this._localRotation,J$e._tempVector3);var J$a=J$e._tempVector3,J$b=this._localRotationEuler;J$b[0]=J$a[1]*J$e._angleToRandin,J$b[1]=J$a[0]*J$e._angleToRandin,J$b[2]=J$a[2]*J$e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},J$b.setLocalRotationEuler=function(J$a){if(this._parent)J$qb._quaternionCreateFromYawPitchRollArray(J$a[1]/J$e._angleToRandin,J$a[0]/J$e._angleToRandin,J$a[2]/J$e._angleToRandin,this._localRotation),this._localRotationEuler=J$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var J$b=this._entity.owner._transform,J$c=this._entity.localRotationEuler,J$d=J$c.elements;J$d[0]=J$a[0],J$d[1]=J$a[1],J$d[2]=J$a[2],J$b.localRotationEuler=J$c}},J$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)J$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var J$a=this._getlocalMatrix(),J$b=0;J$b<16;++J$b)this._worldMatrix[J$b]=J$a[J$b];this._worldUpdate=!1}return this._worldMatrix},J$b.setParent=function(J$a){if(this._parent!==J$a){if(this._parent){var J$b=this._parent._childs,J$c=J$b.indexOf(this);J$b.splice(J$c,1)}J$a&&(J$a._childs.push(this),J$a&&this._onWorldTransform()),this._parent=J$a}},J$l(J$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),J$e}(),J$vb=function(J$a){function J$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,J$b.__super.call(this),this._destroyed=!1,this._id=J$b._uniqueIDCounter,J$b._uniqueIDCounter++}J$n(J$b,"laya.d3.component.Component3D",J$f);var J$c=J$b.prototype;return J$x.imps(J$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),J$c._initialize=function(J$a){this._owner=J$a,this._enable=!0,this.started=!1,this._load(J$a)},J$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},J$c._load=function(J$a){},J$c._start=function(J$a){},J$c._update=function(J$a){},J$c._lateUpdate=function(J$a){},J$c._preRenderUpdate=function(J$a){},J$c._postRenderUpdate=function(J$a){},J$c._unload=function(J$a){this.offAll()},J$c._cloneTo=function(J$a){},J$o(0,J$c,"id",function(){return this._id}),J$o(0,J$c,"destroyed",function(){return this._destroyed}),J$o(0,J$c,"owner",function(){return this._owner}),J$o(0,J$c,"enable",function(){return this._enable},function(J$a){this._enable!==J$a&&(this._enable=J$a,this.event("enablechanged",this._enable))}),J$o(0,J$c,"isSingleton",function(){return J$b._isSingleton}),J$b._isSingleton=!0,J$b._uniqueIDCounter=1,J$b}(),J$wb=function(J$a){function J$b(){this._destroyed=!1,J$b.__super.call(this),this._destroyed=!1}J$n(J$b,"laya.d3.core.GeometryFilter",J$f);var J$c=J$b.prototype;return J$x.imps(J$c,{"laya.resource.IDestroy":!0}),J$c._destroy=function(){this.offAll(),this._destroyed=!0},J$o(0,J$c,"_isAsyncLoaded",function(){return!0}),J$o(0,J$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),J$o(0,J$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),J$o(0,J$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),J$o(0,J$c,"destroyed",function(){return this._destroyed}),J$b}(),J$xb=function(J$a){function J$d(J$a){J$d.__super.call(this),this._id=++J$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new J$Za(new J$gb,new J$gb),this._boundingBoxCenter=new J$gb,this._boundingSphere=new J$_a(new J$gb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=J$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}J$n(J$d,"laya.d3.core.render.BaseRender",J$f);var J$b=J$d.prototype;return J$x.imps(J$b,{"laya.resource.IDestroy":!0}),J$b._changeMaterialReference=function(J$a,J$b){J$a&&J$a._removeReference(),J$b._addReference()},J$b._getInstanceMaterial=function(J$a,J$b){var J$c=new J$a.constructor;return J$a.cloneTo(J$c),J$c.name=J$c.name+"(Instance)",this._materialsInstance[J$b]=!0,this._changeMaterialReference(this._materials[J$b],J$c),this._materials[J$b]=J$c},J$b._setShaderValuelightMap=function(J$a){this._setShaderValueTexture(3,J$a)},J$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},J$b._renderRenderableBoundBox=function(){var J$a=J$rb._debugPhasorSprite,J$b=this.boundingBox,J$c=J$d._tempBoundBoxCorners;J$b.getCorners(J$c),J$a.line(J$c[0],J$d._greenColor,J$c[1],J$d._greenColor),J$a.line(J$c[2],J$d._greenColor,J$c[3],J$d._greenColor),J$a.line(J$c[4],J$d._greenColor,J$c[5],J$d._greenColor),J$a.line(J$c[6],J$d._greenColor,J$c[7],J$d._greenColor),J$a.line(J$c[0],J$d._greenColor,J$c[3],J$d._greenColor),J$a.line(J$c[1],J$d._greenColor,J$c[2],J$d._greenColor),J$a.line(J$c[2],J$d._greenColor,J$c[6],J$d._greenColor),J$a.line(J$c[3],J$d._greenColor,J$c[7],J$d._greenColor),J$a.line(J$c[0],J$d._greenColor,J$c[4],J$d._greenColor),J$a.line(J$c[1],J$d._greenColor,J$c[5],J$d._greenColor),J$a.line(J$c[4],J$d._greenColor,J$c[7],J$d._greenColor),J$a.line(J$c[5],J$d._greenColor,J$c[6],J$d._greenColor)},J$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},J$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},J$b._setShaderValueTexture=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b)},J$b._setShaderValueMatrix4x4=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b?J$b.elements:null)},J$b._setShaderValueColor=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b?J$b.elements:null)},J$b._setShaderValueBuffer=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b)},J$b._setShaderValueInt=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b)},J$b._setShaderValueBool=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b)},J$b._setShaderValueNumber=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b)},J$b._setShaderValueVector2=function(J$a,J$b){this._owner._shaderValues.setValue(J$a,J$b?J$b.elements:null)},J$b._addShaderDefine=function(J$a){this._owner._shaderDefineValue|=J$a},J$b._removeShaderDefine=function(J$a){this._owner._shaderDefineValue&=~J$a},J$b._renderUpdate=function(J$a){return!0},J$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var J$a=this._owner.scene;if(J$a){var J$b=J$a.getlightmaps()[this._lightmapIndex];J$b?(this._addShaderDefine(J$Vb.SAHDERDEFINE_LIGHTMAP),J$b.loaded?this._setShaderValuelightMap(J$b):J$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(J$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(J$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(J$Vb.SAHDERDEFINE_LIGHTMAP)},J$b._updateOctreeNode=function(){var J$a=this._treeNode;J$a&&this._octreeNodeNeedChange&&(J$a.updateObject(this),this._octreeNodeNeedChange=!1)},J$b._destroy=function(){this.offAll();var J$a=0,J$b=0;for(J$a=0,J$b=this._renderElements.length;J$a<J$b;J$a++)this._renderElements[J$a]._destroy();for(J$a=0,J$b=this._materials.length;J$a<J$b;J$a++)this._materials[J$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},J$o(0,J$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),J$o(0,J$b,"id",function(){return this._id}),J$o(0,J$b,"material",function(){var J$a=this._materials[0];if(J$a&&!this._materialsInstance[0]){var J$b=this._getInstanceMaterial(J$a,0);this.event("materialchanged",[this,0,J$b])}return this._materials[0]},function(J$a){this.sharedMaterial=J$a}),J$o(0,J$b,"sharedMaterial",function(){return this._materials[0]},function(J$a){var J$b=this._materials[0];J$b!==J$a&&(this._materials[0]=J$a,this._materialsInstance[0]=!1,this._changeMaterialReference(J$b,J$a),this.event("materialchanged",[this,0,J$a]))}),J$o(0,J$b,"lightmapIndex",function(){return this._lightmapIndex},function(J$a){this._lightmapIndex=J$a,this._applyLightMapParams()}),J$o(0,J$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(J$a){this._lightmapScaleOffset=J$a,this._setShaderValueColor(2,J$a),this._addShaderDefine(J$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),J$o(0,J$b,"enable",function(){return this._enable},function(J$a){this._enable=J$a,this.event("enablechanged",[this,J$a])}),J$o(0,J$b,"materials",function(){for(var J$a=0,J$b=this._materials.length;J$a<J$b;J$a++)if(!this._materialsInstance[J$a]){var J$c=this._getInstanceMaterial(this._materials[J$a],J$a);this.event("materialchanged",[this,J$a,J$c])}return this._materials.slice()},function(J$a){this.sharedMaterials=J$a}),J$o(0,J$b,"sharedMaterials",function(){return this._materials.slice()},function(J$a){if(!J$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var J$b=J$a.length;this._materialsInstance.length=J$b;for(var J$c=0;J$c<J$b;J$c++){var J$d=this._materials[J$c];J$d!==J$a[J$c]&&(this._materialsInstance[J$c]=!1,this._changeMaterialReference(J$d,J$a[J$c]),this.event("materialchanged",[this,J$c,J$a[J$c]]))}this._materials=J$a}),J$o(0,J$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),J$o(0,J$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var J$a=this.boundingBox;J$gb.add(J$a.min,J$a.max,this._boundingBoxCenter),J$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),J$o(0,J$b,"receiveShadow",function(){return this._receiveShadow},function(J$a){this._receiveShadow!==J$a&&((this._receiveShadow=J$a)?this._addShaderDefine(J$nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(J$nb.SHADERDEFINE_RECEIVE_SHADOW))}),J$o(0,J$b,"destroyed",function(){return this._destroyed}),J$d._uniqueIDCounter=0,J$l(J$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb,new J$gb]},"_greenColor",function(){return this._greenColor=new J$hb(0,1,0,1)}]),J$d}(),J$yb=function(J$a){function J$h(J$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,J$h.__super.call(this),this._localPosition=new J$gb,this._localRotation=new J$cb(0,0,0,1),this._localScale=new J$gb(1,1,1),this._localRotationEuler=new J$gb,this._localMatrix=new J$ab,this._position=new J$gb,this._rotation=new J$cb(0,0,0,1),this._scale=new J$gb(1,1,1),this._worldMatrix=new J$ab,this._forward=new J$gb,this._up=new J$gb,this._right=new J$gb,this._owner=J$a,this._childs=[]}J$n(J$h,"laya.d3.core.Transform3D",J$f);var J$b=J$h.prototype;return J$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)J$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var J$a=J$h._tempVector30;J$gb.multiply(this.pivot,this._localScale,J$a);var J$b=J$h._tempVector31;J$gb.subtract(J$a,this.pivot,J$b);var J$c=J$h._tempVector32,J$d=this.localRotation;J$gb.transformQuat(J$a,J$d,J$c),J$gb.subtract(J$c,J$a,J$c);var J$e=J$h._tempVector33;J$gb.subtract(this._localPosition,J$b,J$e),J$gb.subtract(J$e,J$c,J$e),J$ab.createAffineTransformation(J$e,J$d,this._localScale,this._localMatrix)}},J$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldPositionRotationTransform()}},J$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldPositionScaleTransform()}},J$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldPositionTransform()}},J$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldPositionRotationTransform()}},J$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldPositionScaleTransform()}},J$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._onWorldTransform()}},J$b.translate=function(J$a,J$b){void 0===J$b&&(J$b=!0),J$b?(J$ab.createFromQuaternion(this.localRotation,J$h._tempMatrix0),J$gb.transformCoordinate(J$a,J$h._tempMatrix0,J$h._tempVector30),J$gb.add(this.localPosition,J$h._tempVector30,this._localPosition),this.localPosition=this._localPosition):(J$gb.add(this.position,J$a,this._position),this.position=this._position)},J$b.rotate=function(J$a,J$b,J$c){var J$d;void 0===J$b&&(J$b=!0),void 0===J$c&&(J$c=!0),J$d=J$c?J$a:(J$gb.scale(J$a,Math.PI/180,J$h._tempVector30),J$h._tempVector30),J$cb.createFromYawPitchRoll(J$d.y,J$d.x,J$d.z,J$h._tempQuaternion0),J$b?(J$cb.multiply(this._localRotation,J$h._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(J$cb.multiply(J$h._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},J$b.lookAt=function(J$a,J$b,J$c){void 0===J$c&&(J$c=!1);var J$d,J$e=J$a.elements;if(J$c){if(J$d=this._localPosition.elements,Math.abs(J$d[0]-J$e[0])<J$sa.zeroTolerance&&Math.abs(J$d[1]-J$e[1])<J$sa.zeroTolerance&&Math.abs(J$d[2]-J$e[2])<J$sa.zeroTolerance)return;J$cb.lookAt(this._localPosition,J$a,J$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var J$f=this.position;if(J$d=J$f.elements,Math.abs(J$d[0]-J$e[0])<J$sa.zeroTolerance&&Math.abs(J$d[1]-J$e[1])<J$sa.zeroTolerance&&Math.abs(J$d[2]-J$e[2])<J$sa.zeroTolerance)return;J$cb.lookAt(J$f,J$a,J$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},J$o(0,J$b,"_isFrontFaceInvert",function(){var J$a=this.scale,J$b=J$a.x<0;return J$a.y<0&&(J$b=!J$b),J$a.z<0&&(J$b=!J$b),J$b}),J$o(0,J$b,"owner",function(){return this._owner}),J$o(0,J$b,"localRotation",function(){if(this._localQuaternionUpdate){var J$a=this._localRotationEuler.elements;J$cb.createFromYawPitchRoll(J$a[1]/J$h._angleToRandin,J$a[0]/J$h._angleToRandin,J$a[2]/J$h._angleToRandin,this._localRotation)}return this._localRotation},function(J$a){this._localRotation=J$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),J$o(0,J$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?J$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(J$a){null===this._parent?J$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),J$ab.multiply(this._localMatrix,J$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=J$a,this._worldUpdate=!1}),J$o(0,J$b,"worldNeedUpdate",function(){return this._worldUpdate}),J$o(0,J$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(J$a){this._localMatrix=J$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),J$o(0,J$b,"dummy",function(){return this._dummy},function(J$a){this._dummy!==J$a&&(this._dummy&&(this._dummy._entity=null),J$a&&(J$a._entity=this),this._dummy=J$a)}),J$o(0,J$b,"localPosition",function(){return this._localPosition},function(J$a){this._localPosition=J$a,this._localUpdate=!0,this._onWorldPositionTransform()}),J$o(0,J$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var J$a=this._parent.position;J$gb.multiply(this._localPosition,this._parent.scale,J$h._tempVector30),J$gb.transformQuat(J$h._tempVector30,this._parent.rotation,J$h._tempVector30),J$gb.add(J$a,J$h._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(J$a){if(null!=this._parent){J$gb.subtract(J$a,this._parent.position,this._localPosition);var J$b=this._parent.scale.elements,J$c=J$b[0],J$d=J$b[1],J$e=J$b[2];if(1!==J$c||1!==J$d||1!==J$e){var J$f=J$h._tempVector30,J$g=J$f.elements;J$g[0]=1/J$c,J$g[1]=1/J$d,J$g[2]=1/J$e,J$gb.multiply(this._localPosition,J$f,this._localPosition)}this._parent.rotation.invert(J$h._tempQuaternion0),J$gb.transformQuat(this._localPosition,J$h._tempQuaternion0,this._localPosition)}else J$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=J$a,this._positionUpdate=!1}),J$o(0,J$b,"localScale",function(){return this._localScale},function(J$a){this._localScale=J$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),J$o(0,J$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(J$h._tempVector30);var J$a=J$h._tempVector30.elements,J$b=this._localRotationEuler.elements;J$b[0]=J$a[1]*J$h._angleToRandin,J$b[1]=J$a[0]*J$h._angleToRandin,J$b[2]=J$a[2]*J$h._angleToRandin}return this._localRotationEuler},function(J$a){this._localRotationEuler=J$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),J$o(0,J$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?J$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(J$a){null!=this._parent?(this._parent.rotation.invert(J$h._tempQuaternion0),J$cb.multiply(J$a,J$h._tempQuaternion0,this._localRotation)):J$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=J$a,this._rotationUpdate=!1}),J$o(0,J$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?J$gb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(J$a){if(null!==this._parent){var J$b=this._parent.scale.elements,J$c=J$h._tempVector30.elements;J$c[0]=1/J$b[0],J$c[1]=1/J$b[1],J$c[2]=1/J$b[2],J$gb.multiply(J$a,J$h._tempVector30,this._localScale)}else J$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=J$a,this._scaleUpdate=!1}),J$o(0,J$b,"rotationEuler",null,function(J$a){J$cb.createFromYawPitchRoll(J$a.y,J$a.x,J$a.z,this._rotation),this.rotation=this._rotation}),J$o(0,J$b,"forward",function(){var J$a=this.worldMatrix.elements;return this._forward.elements[0]=-J$a[8],this._forward.elements[1]=-J$a[9],this._forward.elements[2]=-J$a[10],this._forward}),J$o(0,J$b,"up",function(){var J$a=this.worldMatrix.elements;return this._up.elements[0]=J$a[4],this._up.elements[1]=J$a[5],this._up.elements[2]=J$a[6],this._up}),J$o(0,J$b,"right",function(){var J$a=this.worldMatrix.elements;return this._right.elements[0]=J$a[0],this._right.elements[1]=J$a[1],this._right.elements[2]=J$a[2],this._right}),J$o(0,J$b,"parent",function(){return this._parent},function(J$a){if(this._parent!==J$a){if(this._parent){var J$b=this._parent._childs,J$c=J$b.indexOf(this);J$b.splice(J$c,1)}J$a&&(J$a._childs.push(this),J$a&&this._onWorldTransform()),this._parent=J$a}}),J$l(J$h,["_tempVector30",function(){return this._tempVector30=new J$gb},"_tempVector31",function(){return this._tempVector31=new J$gb},"_tempVector32",function(){return this._tempVector32=new J$gb},"_tempVector33",function(){return this._tempVector33=new J$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new J$cb},"_tempMatrix0",function(){return this._tempMatrix0=new J$ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),J$h}(),J$zb=(function(J$a){function J$b(){this._rotation=0,this._matNeedUpdte=!1,J$b.__super.call(this),this._matrix=new J$ab,this._offset=new J$fb,this._tiling=new J$fb(1,1)}J$n(J$b,"laya.d3.core.TransformUV",J$f);var J$c=J$b.prototype;J$x.imps(J$c,{"laya.d3.core.IClone":!0}),J$c._updateMatrix=function(){J$b._tempOffsetV3.elements[0]=this._offset.x,J$b._tempOffsetV3.elements[1]=this._offset.y,J$cb.createFromYawPitchRoll(0,0,this._rotation,J$b._tempRotationQua),J$b._tempTitlingV3.elements[0]=this._tiling.x,J$b._tempTitlingV3.elements[1]=this._tiling.y,J$ab.createAffineTransformation(J$b._tempOffsetV3,J$b._tempRotationQua,J$b._tempTitlingV3,this._matrix)},J$c.cloneTo=function(J$a){J$a._matrix=this._matrix.clone(),J$a._offset=this._offset.clone(),J$a._rotation=this._rotation,J$a._tiling=this._tiling.clone()},J$c.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),J$o(0,J$c,"tiling",function(){return this._tiling},function(J$a){this._tiling=J$a,this._matNeedUpdte=!0}),J$o(0,J$c,"offset",function(){return this._offset},function(J$a){this._offset=J$a,this._matNeedUpdte=!0}),J$o(0,J$c,"rotation",function(){return this._rotation},function(J$a){this._rotation=J$a,this._matNeedUpdte=!0}),J$l(J$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new J$gb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new J$cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new J$gb(1,1,1)}])}(),function(J$c){function J$a(){this.x=NaN,this.y=NaN,this.z=NaN,J$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}J$n(J$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",J$c);var J$b=J$a.prototype;J$b._getShapeBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=.5*-this.x,J$b[1]=.5*-this.y,J$b[2]=.5*-this.z;var J$c=J$a.max.elements;J$c[0]=.5*this.x,J$c[1]=.5*this.y,J$c[2]=.5*this.z},J$b._getSpeedBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=0,J$b[1]=0,J$b[2]=0;var J$c=J$a.max.elements;J$c[0]=0,J$c[1]=1,J$c[2]=0},J$b.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements,J$f=J$b.elements;J$c?(J$c.seed=J$d[16],J$T._randomPointInsideHalfUnitBox(J$a,J$c),J$d[16]=J$c.seed):J$T._randomPointInsideHalfUnitBox(J$a),J$e[0]=this.x*J$e[0],J$e[1]=this.y*J$e[1],J$e[2]=this.z*J$e[2],this.randomDirection?J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b):(J$f[0]=0,J$f[1]=0,J$f[2]=1)},J$b.cloneTo=function(J$a){J$c.prototype.cloneTo.call(this,J$a);var J$b=J$a;J$b.x=this.x,J$b.y=this.y,J$b.z=this.z,J$b.randomDirection=this.randomDirection}}(J$O),function(J$c){function J$g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,J$g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}J$n(J$g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",J$c);var J$a=J$g.prototype;J$a._getShapeBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[2]=-this.radius,J$b[1]=0;var J$c=J$a.max.elements;J$c[0]=J$c[2]=this.radius,J$c[1]=0},J$a._getSpeedBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[1]=-1,J$b[2]=0;var J$c=J$a.max.elements;J$c[0]=J$c[1]=1,J$c[2]=0},J$a.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements,J$f=J$g._tempPositionPoint.elements;J$c?(J$c.seed=J$d[16],this.emitFromEdge?J$T._randomPointUnitArcCircle(this.arc,J$g._tempPositionPoint,J$c):J$T._randomPointInsideUnitArcCircle(this.arc,J$g._tempPositionPoint,J$c),J$d[16]=J$c.seed):this.emitFromEdge?J$T._randomPointUnitArcCircle(this.arc,J$g._tempPositionPoint):J$T._randomPointInsideUnitArcCircle(this.arc,J$g._tempPositionPoint),J$e[0]=-J$f[0],J$e[1]=J$f[1],J$e[2]=0,J$gb.scale(J$a,this.radius,J$a),this.randomDirection?J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b):J$a.cloneTo(J$b)},J$a.cloneTo=function(J$a){J$c.prototype.cloneTo.call(this,J$a);var J$b=J$a;J$b.radius=this.radius,J$b.arc=this.arc,J$b.emitFromEdge=this.emitFromEdge,J$b.randomDirection=this.randomDirection},J$l(J$g,["_tempPositionPoint",function(){return this._tempPositionPoint=new J$fb}])}(J$O),function(J$c){function J$m(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,J$m.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}J$n(J$m,"laya.d3.core.particleShuriKen.module.shape.ConeShape",J$c);var J$a=J$m.prototype;J$a._getShapeBoundBox=function(J$a){var J$b=this.radius+this.length*Math.sin(this.angle),J$c=this.length*Math.cos(this.angle),J$d=J$a.min.elements;J$d[0]=J$d[1]=-J$b,J$d[2]=0;var J$e=J$a.max.elements;J$e[0]=J$e[1]=J$b,J$e[2]=J$c},J$a._getSpeedBoundBox=function(J$a){var J$b=Math.sin(this.angle),J$c=J$a.min.elements;J$c[0]=J$c[1]=-J$b,J$c[2]=0;var J$d=J$a.max.elements;J$d[0]=J$c[1]=J$b,J$d[2]=1},J$a.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){var J$e,J$f=J$a.elements,J$g=J$b.elements,J$h=J$m._tempPositionPoint.elements,J$i=NaN,J$j=NaN,J$k=Math.cos(this.angle),J$l=Math.sin(this.angle);switch(this.emitType){case 0:J$c?(J$c.seed=J$d[16],J$T._randomPointInsideUnitCircle(J$m._tempPositionPoint,J$c),J$d[16]=J$c.seed):J$T._randomPointInsideUnitCircle(J$m._tempPositionPoint),J$i=J$h[0],J$j=J$h[1],J$f[0]=J$i*this.radius,J$f[1]=J$j*this.radius,J$f[2]=0,this.randomDirection?(J$c?(J$c.seed=J$d[17],J$T._randomPointInsideUnitCircle(J$m._tempDirectionPoint,J$c),J$d[17]=J$c.seed):J$T._randomPointInsideUnitCircle(J$m._tempDirectionPoint),J$e=J$m._tempDirectionPoint.elements,J$g[0]=J$e[0]*J$l,J$g[1]=J$e[1]*J$l):(J$g[0]=J$i*J$l,J$g[1]=J$j*J$l),J$g[2]=J$k;break;case 1:J$c?(J$c.seed=J$d[16],J$T._randomPointUnitCircle(J$m._tempPositionPoint,J$c),J$d[16]=J$c.seed):J$T._randomPointUnitCircle(J$m._tempPositionPoint),J$i=J$h[0],J$j=J$h[1],J$f[0]=J$i*this.radius,J$f[1]=J$j*this.radius,J$f[2]=0,this.randomDirection?(J$c?(J$c.seed=J$d[17],J$T._randomPointInsideUnitCircle(J$m._tempDirectionPoint,J$c),J$d[17]=J$c.seed):J$T._randomPointInsideUnitCircle(J$m._tempDirectionPoint),J$e=J$m._tempDirectionPoint.elements,J$g[0]=J$e[0]*J$l,J$g[1]=J$e[1]*J$l):(J$g[0]=J$i*J$l,J$g[1]=J$j*J$l),J$g[2]=J$k;break;case 2:J$c?(J$c.seed=J$d[16],J$T._randomPointInsideUnitCircle(J$m._tempPositionPoint,J$c)):J$T._randomPointInsideUnitCircle(J$m._tempPositionPoint),J$i=J$h[0],J$j=J$h[1],J$f[0]=J$i*this.radius,J$f[1]=J$j*this.radius,J$g[J$f[2]=0]=J$i*J$l,J$g[1]=J$j*J$l,J$g[2]=J$k,J$gb.normalize(J$b,J$b),J$c?(J$gb.scale(J$b,this.length*J$c.getFloat(),J$b),J$d[16]=J$c.seed):J$gb.scale(J$b,this.length*Math.random(),J$b),J$gb.add(J$a,J$b,J$a),this.randomDirection&&(J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b));break;case 3:J$c?(J$c.seed=J$d[16],J$T._randomPointUnitCircle(J$m._tempPositionPoint,J$c)):J$T._randomPointUnitCircle(J$m._tempPositionPoint),J$i=J$h[0],J$j=J$h[1],J$f[0]=J$i*this.radius,J$f[1]=J$j*this.radius,J$g[J$f[2]=0]=J$i*J$l,J$g[1]=J$j*J$l,J$g[2]=J$k,J$gb.normalize(J$b,J$b),J$c?(J$gb.scale(J$b,this.length*J$c.getFloat(),J$b),J$d[16]=J$c.seed):J$gb.scale(J$b,this.length*Math.random(),J$b),J$gb.add(J$a,J$b,J$a),this.randomDirection&&(J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},J$a.cloneTo=function(J$a){J$c.prototype.cloneTo.call(this,J$a);var J$b=J$a;J$b.angle=this.angle,J$b.radius=this.radius,J$b.length=this.length,J$b.emitType=this.emitType,J$b.randomDirection=this.randomDirection},J$l(J$m,["_tempPositionPoint",function(){return this._tempPositionPoint=new J$fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new J$fb}])}(J$O),function(J$c){function J$a(){this.radius=NaN,this.emitFromShell=!1,J$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}J$n(J$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",J$c);var J$b=J$a.prototype;J$b._getShapeBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[1]=J$b[2]=-this.radius;var J$c=J$a.max.elements;J$c[0]=J$c[1]=this.radius,J$c[2]=0},J$b._getSpeedBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[1]=-1,J$b[2]=0;var J$c=J$a.max.elements;J$c[0]=J$c[1]=J$c[2]=1},J$b.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){var J$e=J$a.elements;J$c?(J$c.seed=J$d[16],this.emitFromShell?J$T._randomPointUnitSphere(J$a,J$c):J$T._randomPointInsideUnitSphere(J$a,J$c),J$d[16]=J$c.seed):this.emitFromShell?J$T._randomPointUnitSphere(J$a):J$T._randomPointInsideUnitSphere(J$a),J$gb.scale(J$a,this.radius,J$a);var J$f=J$e[2];J$f<0&&(J$e[2]=-1*J$f),this.randomDirection?J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b):J$a.cloneTo(J$b)},J$b.cloneTo=function(J$a){J$c.prototype.cloneTo.call(this,J$a);var J$b=J$a;J$b.radius=this.radius,J$b.emitFromShell=this.emitFromShell,J$b.randomDirection=this.randomDirection}}(J$O),function(J$c){function J$a(){this.radius=NaN,this.emitFromShell=!1,J$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}J$n(J$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",J$c);var J$b=J$a.prototype;J$b._getShapeBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[1]=J$b[2]=-this.radius;var J$c=J$a.max.elements;J$c[0]=J$c[1]=J$c[2]=this.radius},J$b._getSpeedBoundBox=function(J$a){var J$b=J$a.min.elements;J$b[0]=J$b[1]=J$b[2]=-1;var J$c=J$a.max.elements;J$c[0]=J$c[1]=J$c[2]=1},J$b.generatePositionAndDirection=function(J$a,J$b,J$c,J$d){J$c?(J$c.seed=J$d[16],this.emitFromShell?J$T._randomPointUnitSphere(J$a,J$c):J$T._randomPointInsideUnitSphere(J$a,J$c),J$d[16]=J$c.seed):this.emitFromShell?J$T._randomPointUnitSphere(J$a):J$T._randomPointInsideUnitSphere(J$a),J$gb.scale(J$a,this.radius,J$a),this.randomDirection?J$c?(J$c.seed=J$d[17],J$T._randomPointUnitSphere(J$b,J$c),J$d[17]=J$c.seed):J$T._randomPointUnitSphere(J$b):J$a.cloneTo(J$b)},J$b.cloneTo=function(J$a){J$c.prototype.cloneTo.call(this,J$a);var J$b=J$a;J$b.radius=this.radius,J$b.emitFromShell=this.emitFromShell,J$b.randomDirection=this.randomDirection}}(J$O),function(J$a){function J$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,J$b.__super.call(this)}return J$n(J$b,"laya.d3.core.render.SubMeshRenderElement",J$W),J$b}()),J$Ab=function(J$a){function J$q(J$a,J$b,J$c,J$d,J$e,J$f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=J$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[J$nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[J$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[J$Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[J$Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";J$q.__super.call(this,J$a,J$b,J$c,null,{}),this._attributeMap=J$d;var J$g;for(J$g in J$e){var J$h=J$e[J$g];switch(J$h[1]){case 0:this._renderElementUniformMap[J$g]=J$h[0];break;case 1:this._materialUniformMap[J$g]=J$h[0];break;case 2:this._spriteUniformMap[J$g]=J$h[0];break;case 3:this._cameraUniformMap[J$g]=J$h[0];break;case 4:this._sceneUniformMap[J$g]=J$h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}J$n(J$q,"laya.d3.shader.ShaderCompile3D",J$v);var J$b=J$q.prototype;return J$b._definesToNameDic=function(J$a,J$b){for(var J$c={},J$d=1,J$e=0;J$e<32&&!(J$a<(J$d=1<<J$e));J$e++)if(J$a&J$d){var J$f=J$b[J$d];J$f&&(J$c[J$f]="")}return J$c},J$b.withCompile=function(J$a,J$b,J$c,J$d){var J$e,J$f,J$g;if(J$f=this.sharders[J$a])if(J$g=J$f[J$b]){if(J$e=J$g[J$c])return J$e}else J$g=J$f[J$b]=[];else J$g=(J$f=this.sharders[J$a]=[])[J$b]=[];var J$h,J$i=this._definesToNameDic(J$a,J$q._globalInt2name),J$j=this._definesToNameDic(J$b,this._spriteInt2name),J$k=this._definesToNameDic(J$c,this._materialInt2name),J$l={},J$m="";if(J$i)for(J$h in J$i)J$m+="#define "+J$h+"\n",J$l[J$h]=!0;if(J$j)for(J$h in J$j)J$m+="#define "+J$h+"\n",J$l[J$h]=!0;if(J$k)for(J$h in J$k)J$m+="#define "+J$h+"\n",J$l[J$h]=!0;var J$n=J$Lb.nameKey.getName(this._name)+" compile ("+J$a+","+J$b+","+J$c+")",J$o=this._VS.toscript(J$l,[]),J$p=this._PS.toscript(J$l,[]);J$H.now();if(J$e=J$Lb.create(J$m+J$o.join("\n"),J$m+J$p.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,J$d,J$n),J$g[J$c]=J$e,laya.d3.shader.ShaderCompile3D.debugMode)J$H.now();return J$e},J$b.precompileShaderWithShaderDefine=function(J$a,J$b,J$c){this.withCompile(J$a,J$b,J$c,!0)},J$b.addMaterialDefines=function(J$a){var J$b=J$a.defines;for(var J$c in J$b){var J$d=J$b[J$c],J$e=parseInt(J$c);this._materialInt2name[J$e]=J$d,this._materialName2Int[J$d]=J$e}},J$b.addSpriteDefines=function(J$a){var J$b=J$a.defines;for(var J$c in J$b){var J$d=J$b[J$c],J$e=parseInt(J$c);this._spriteInt2name[J$e]=J$d,this._spriteName2Int[J$d]=J$e}},J$b.getMaterialDefineByName=function(J$a){return this._materialName2Int[J$a]},J$b.registerMaterialDefine=function(J$a){var J$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[J$b]=J$a,this._materialName2Int[J$a]=J$b},J$b.registerSpriteDefine=function(J$a){var J$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[J$b]=J$a,this._spriteName2Int[J$a]=J$b},J$q._globalRegDefine=function(J$a,J$b){J$q._globalInt2name[J$b]=J$a},J$q.add=function(J$a,J$b,J$c,J$d,J$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[J$a]=new J$q(J$a,J$b,J$c,J$d,J$e,J$v.includes)},J$q.get=function(J$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[J$Lb.nameKey.getID(J$a)]},J$q._preCompileShader={},J$q._globalInt2name=[],J$q.debugMode=!1,J$q.SHADERDEFINE_HIGHPRECISION=1,J$q.SHADERDEFINE_FOG=4,J$q.SHADERDEFINE_DIRECTIONLIGHT=8,J$q.SHADERDEFINE_POINTLIGHT=16,J$q.SHADERDEFINE_SPOTLIGHT=32,J$q.SHADERDEFINE_UV0=64,J$q.SHADERDEFINE_COLOR=128,J$q.SHADERDEFINE_UV1=256,J$q.SAHDERDEFINE_DEPTHFOG=131072,J$q}(),J$Bb=function(J$a){function J$o(){J$o.__super.call(this)}J$n(J$o,"laya.d3.graphics.MeshSprite3DStaticBatchManager",J$da);var J$b=J$o.prototype;return J$b._getStaticBatch=function(J$a,J$b,J$c,J$d){var J$e,J$f;return J$f=J$a?J$a.id.toString()+J$c.id.toString()+J$b.id.toString()+J$d.toString():J$c.id.toString()+J$b.id.toString()+J$d.toString(),this._staticBatches[J$f]?J$e=this._staticBatches[J$f]:this._staticBatches[J$f]=J$e=new J$Cb(J$f,this,J$a,J$b,J$c),J$e},J$b._initStaticBatchs=function(J$a){var J$b,J$c;this._initBatchRenderElements.sort(J$o._sortPrepareStaticBatch);for(var J$d,J$e=!1,J$f=0,J$g=0,J$h=this._initBatchRenderElements.length;J$g<J$h;J$g++){var J$i,J$j=this._initBatchRenderElements[J$g],J$k=J$j.renderObj._getVertexBuffer(0);J$j._sprite3D;if(J$c===J$k.vertexDeclaration&&J$b===J$j._material)if(J$e)J$d._addCombineBatchRenderObjTest(J$j)?(J$i=J$j._staticBatch)!==J$d&&(J$i&&J$i._deleteCombineBatchRenderObj(J$j),J$d._addCombineBatchRenderObj(J$j)):(J$e=!1,J$f++);else{var J$l=this._initBatchRenderElements[J$g-1],J$m=J$l.renderObj,J$n=J$j.renderObj;J$e=!(65535<J$m._getVertexBuffer().vertexCount+J$n._getVertexBuffer().vertexCount)&&(J$d=this._getStaticBatch(J$a,J$c,J$b,J$f),(J$i=J$l._staticBatch)!==J$d&&(J$i&&J$i._deleteCombineBatchRenderObj(J$l),J$d._addCombineBatchRenderObj(J$l)),(J$i=J$j._staticBatch)!==J$d&&(J$i&&J$i._deleteCombineBatchRenderObj(J$j),J$d._addCombineBatchRenderObj(J$j)),!0)}else J$e=!1,J$f=0;J$b=J$j._material,J$c=J$k.vertexDeclaration}},J$o._sortPrepareStaticBatch=function(J$a,J$b){var J$c=J$a._render,J$d=J$b._render,J$e=J$c.lightmapIndex-J$d.lightmapIndex;if(0!=J$e)return J$e;var J$f=J$c.receiveShadow-J$d.receiveShadow;if(0!=J$f)return J$f;var J$g=J$a._mainSortID-J$b._mainSortID;return 0==J$g?J$a.renderObj.triangleCount-J$b.renderObj.triangleCount:J$g},J$o}(),J$Cb=function(J$a){function J$f(J$a,J$b,J$c,J$d,J$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,J$f.__super.call(this,J$a,J$b,J$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=J$d,this._material=J$e}J$n(J$f,"laya.d3.graphics.SubMeshStaticBatch",J$ea);var J$b=J$f.prototype;return J$b._compareBatchRenderElement=function(J$a,J$b){return J$a._batchIndexStart>J$b._batchIndexStart},J$b._addCombineBatchRenderObjTest=function(J$a){var J$b=J$a.renderObj._vertexCount;return!(65535<(0<J$b?this._currentCombineVertexCount+J$b:this._currentCombineVertexCount+J$a.renderObj._getVertexBuffer().vertexCount))},J$b._addCombineBatchRenderObj=function(J$a){var J$b=J$a.renderObj,J$c=J$b._vertexCount;this._initBatchRenderElements.push(J$a),J$a._staticBatch=this,0<J$c?(this._currentCombineIndexCount+=J$b._indexCount,this._currentCombineVertexCount+=J$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+J$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+J$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},J$b._deleteCombineBatchRenderObj=function(J$a){var J$b=J$a.renderObj,J$c=this._initBatchRenderElements.indexOf(J$a);if(-1!==J$c){this._initBatchRenderElements.splice(J$c,1),J$a._staticBatch=null;var J$d=J$b._vertexCount;0<J$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-J$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-J$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-J$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-J$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},J$b._finishInit=function(){if(this._needFinishCombine){var J$a=0,J$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var J$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),J$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=J$Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=J$Nb.create("ushort",this._currentCombineIndexCount,35044);for(var J$e=0,J$f=this._initBatchRenderElements.length;J$e<J$f;J$e++){var J$g=this._initBatchRenderElements[J$e],J$h=J$g.renderObj,J$i=J$h._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,J$g._sprite3D),J$j=J$h.getIndices(),J$k=J$g._sprite3D.transform._isFrontFaceInvert,J$l=J$a/(this._vertexDeclaration.vertexStride/4)-J$h._vertexStart,J$m=J$b,J$n=J$m+J$j.length;J$g._batchIndexStart=J$m,J$g._batchIndexEnd=J$n,J$d.set(J$j,J$b);var J$o=0;if(J$k)for(J$o=J$m;J$o<J$n;J$o+=3){J$d[J$o]=J$l+J$d[J$o];var J$p=J$d[J$o+1],J$q=J$d[J$o+2];J$d[J$o+1]=J$l+J$q,J$d[J$o+2]=J$l+J$p}else for(J$o=J$m;J$o<J$n;J$o+=3)J$d[J$o]=J$l+J$d[J$o],J$d[J$o+1]=J$l+J$d[J$o+1],J$d[J$o+2]=J$l+J$d[J$o+2];J$b+=J$j.length,J$c.set(J$i,J$a),J$a+=J$i.length}this._vertexBuffer.setData(J$c),this._indexBuffer.setData(J$d),this._needFinishCombine=!1}},J$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new J$zb)},J$b._getRenderElement=function(J$a,J$b,J$c){for(var J$d,J$e,J$f=this._batchRenderElements.length,J$g=!0,J$h=0;J$h<J$f;J$h++){var J$i,J$j,J$k=(J$e=this._batchRenderElements[J$h])._sprite3D._render;if(0!==J$h&&(J$g=(J$i=(J$d=this._batchRenderElements[J$h-1])._sprite3D._render).lightmapIndex!==J$k.lightmapIndex||J$i.receiveShadow!==J$k.receiveShadow||J$d._batchIndexEnd!==J$e._batchIndexStart),J$g){(J$j=this._getCombineRenderElementFromPool()).renderObj=this,J$j._material=this._material,J$j._batchIndexStart=J$e._batchIndexStart,J$j._batchIndexEnd=J$e._batchIndexEnd;var J$l=J$k.lightmapIndex,J$m=J$l+1,J$n=this._batchOwnerIndices[J$m];J$n||(J$n=this._batchOwnerIndices[J$m]=[]);var J$o,J$p=J$n[J$e._render.receiveShadow?1:0];void 0===J$p?(J$n[J$k.receiveShadow?1:0]=this._batchOwners.length,(J$o=new J$Xb(null,"StaticBatchMeshSprite3D"))._scene=J$b,J$o._transform=this._rootOwner?this._rootOwner._transform:null,J$o._render.lightmapIndex=J$l,J$o._render.receiveShadow=J$e._render.receiveShadow,this._batchOwners.push(J$o)):J$o=this._batchOwners[J$p],J$o._render._renderUpdate(J$c),J$j._sprite3D=J$o,J$a.push(J$j)}else J$j._batchIndexEnd=J$e._batchIndexEnd}},J$b._beforeRender=function(J$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J$b._render=function(J$a){var J$b=J$a.renderElement,J$c=J$b._batchIndexStart,J$d=J$b._batchIndexEnd-J$c;J$F.mainContext.drawElements(4,J$d,5123,2*J$c),J$A.drawCall++,J$A.trianglesFaces+=J$d/3},J$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},J$b._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),this._vertexBuffer},J$f}(),J$Db=function(J$a){function J$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,J$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}J$n(J$b,"laya.d3.core.ComponentNode",J$j);var J$c=J$b.prototype;return J$c.addComponent=function(J$a){var J$b,J$c=this._componentsMap.indexOf(J$a);if(-1===J$c)J$b=[],this._componentsMap.push(J$a),this._typeComponentsIndices.push(J$b);else if(J$b=this._typeComponentsIndices[J$c],this._components[J$b[0]].isSingleton)throw new Error("无法单实例创建"+J$a+"组件，"+J$a+"组件已存在！");var J$d=J$e.getInstance(J$a);return J$b.push(this._components.length),this._components.push(J$d),J$d instanceof laya.d3.component.Script&&this._scripts.push(J$d),J$d._initialize(this),J$d},J$c._removeComponent=function(J$a,J$b){var J$c=this._typeComponentsIndices[J$a],J$d=J$c[J$b],J$e=this._components[J$d];this._components.splice(J$d,1),J$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(J$e),1),J$c.splice(J$b,1),0===J$c.length&&(this._typeComponentsIndices.splice(J$a,1),this._componentsMap.splice(J$a,1));for(var J$f=0,J$g=this._componentsMap.length;J$f<J$g;J$f++)for(var J$h=(J$c=this._typeComponentsIndices[J$f]).length-1;0<=J$h;J$h--){var J$i=J$c[J$h];if(!(J$d<J$i))break;J$c[J$h]=--J$i}J$e._destroy()},J$c.getComponentByType=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c=this._componentsMap.indexOf(J$a);return-1===J$c?null:this._components[this._typeComponentsIndices[J$c][J$b]]},J$c.getComponentsByType=function(J$a,J$b){var J$c=this._componentsMap.indexOf(J$a);if(-1!==J$c){var J$d=this._typeComponentsIndices[J$c],J$e=J$d.length;J$b.length=J$e;for(var J$f=0;J$f<J$e;J$f++)J$b[J$f]=this._components[J$d[J$f]]}else J$b.length=0},J$c.getComponentByIndex=function(J$a){return this._components[J$a]},J$c.removeComponentByType=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c=this._componentsMap.indexOf(J$a);-1!==J$c&&this._removeComponent(J$c,J$b)},J$c.removeComponentsByType=function(J$a){var J$b=this._componentsMap.indexOf(J$a);if(-1!==J$b)for(var J$c=this._typeComponentsIndices[J$b],J$d=0,J$e=J$c.length;J$d<J$e;J$c.length<J$e?J$e--:J$d++)this._removeComponent(J$b,J$d)},J$c.removeAllComponent=function(){for(var J$a=0,J$b=this._componentsMap.length;J$a<J$b;this._componentsMap.length<J$b?J$b--:J$a++)this.removeComponentsByType(this._componentsMap[J$a])},J$c._updateComponents=function(J$a){for(var J$b=0,J$c=this._components.length;J$b<J$c;J$b++){var J$d=this._components[J$b];!J$d.started&&(J$d._start(J$a),J$d.started=!0),J$d.enable&&J$d._update(J$a)}},J$c._lateUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._lateUpdate(J$a)}},J$c._preRenderUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._preRenderUpdate(J$a)}},J$c._postRenderUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._postRenderUpdate(J$a)}},J$b}(),J$Eb=function(J$d){function J$a(){J$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new J$mb,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new J$hb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}J$n(J$a,"laya.d3.core.material.BaseMaterial",J$d);var J$b=J$a.prototype;return J$x.imps(J$b,{"laya.d3.core.IClone":!0}),J$b._addShaderDefine=function(J$a){this._shaderDefineValue|=J$a},J$b._removeShaderDefine=function(J$a){this._shaderDefineValue&=~J$a},J$b._addDisablePublicShaderDefine=function(J$a){this._disablePublicShaderDefine|=J$a},J$b._removeDisablePublicShaderDefine=function(J$a){this._disablePublicShaderDefine&=~J$a},J$b._setBuffer=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b),this._values[J$a]=J$b},J$b._getBuffer=function(J$a){return this._values[J$a]},J$b._setMatrix4x4=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b?J$b.elements:null),this._values[J$a]=J$b},J$b._getMatrix4x4=function(J$a){return this._values[J$a]},J$b._setInt=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b),this._values[J$a]=J$b},J$b._getInt=function(J$a){return this._values[J$a]},J$b._setNumber=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b),this._values[J$a]=J$b},J$b._getNumber=function(J$a){return this._values[J$a]},J$b._setBool=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b),this._values[J$a]=J$b},J$b._getBool=function(J$a){return this._values[J$a]},J$b._setVector2=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b?J$b.elements:null),this._values[J$a]=J$b},J$b._getVector2=function(J$a){return this._values[J$a]},J$b._setColor=function(J$a,J$b){this._shaderValues.setValue(J$a,J$b?J$b.elements:null),this._values[J$a]=J$b},J$b._getColor=function(J$a){return this._values[J$a]},J$b._setTexture=function(J$a,J$b){var J$c=this._values[J$a];this._values[J$a]=J$b,this._shaderValues.setValue(J$a,J$b),0<this.referenceCount&&(J$c&&J$c._removeReference(),J$b&&J$b._addReference())},J$b._getTexture=function(J$a){return this._values[J$a]},J$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},J$b._getShader=function(J$a,J$b,J$c){var J$d=(J$a|J$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(J$d,J$c,this._shaderDefineValue),this._shader},J$b._setRenderStateBlendDepth=function(){var J$a=J$F.mainContext;switch(J$G.setDepthMask(J$a,this.depthWrite),0===this.depthTest?J$G.setDepthTest(J$a,!1):(J$G.setDepthTest(J$a,!0),J$G.setDepthFunc(J$a,this.depthTest)),this.blend){case 0:J$G.setBlend(J$a,!1);break;case 1:J$G.setBlend(J$a,!0),J$G.setBlendFunc(J$a,this.srcBlend,this.dstBlend);break;case 2:J$G.setBlend(J$a,!0)}},J$b._setRenderStateFrontFace=function(J$a,J$b){var J$c=J$F.mainContext,J$d=0;switch(this.cull){case 0:J$G.setCullFace(J$c,!1);break;case 1:J$G.setCullFace(J$c,!0),J$d=J$a?J$b&&J$b._isFrontFaceInvert?2305:2304:J$b&&J$b._isFrontFaceInvert?2304:2305,J$G.setFrontFace(J$c,J$d);break;case 2:J$G.setCullFace(J$c,!0),J$d=J$a?J$b&&J$b._isFrontFaceInvert?2304:2305:J$b&&J$b._isFrontFaceInvert?2305:2304,J$G.setFrontFace(J$c,J$d)}},J$b.onAsynLoaded=function(J$a,J$b,J$c){var J$d=J$b[0],J$e=J$b[1];switch(J$d.version){case"LAYAMATERIAL:01":var J$f=0,J$g=0,J$h=J$d.props;for(var J$i in J$h)switch(J$i){case"vectors":var J$j=J$h[J$i];for(J$f=0,J$g=J$j.length;J$f<J$g;J$f++){var J$k=J$j[J$f],J$l=J$k.value;switch(J$l.length){case 2:this[J$k.name]=new J$fb(J$l[0],J$l[1]);break;case 3:this[J$k.name]=new J$gb(J$l[0],J$l[1],J$l[2]);break;case 4:this[J$k.name]=new J$hb(J$l[0],J$l[1],J$l[2],J$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var J$m=J$h[J$i];for(J$f=0,J$g=J$m.length;J$f<J$g;J$f++){var J$n=J$m[J$f],J$o=J$n.path;J$o&&(this[J$n.name]=J$r.getRes(J$e[J$o]))}break;case"defines":var J$p=J$h[J$i];for(J$f=0,J$g=J$p.length;J$f<J$g;J$f++){var J$q=this._shaderCompile.getMaterialDefineByName(J$p[J$f]);this._addShaderDefine(J$q)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[J$i]=J$h[J$i];break;case"renderQueue":switch(J$h[J$i]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[J$i]=J$h[J$i]}break;case"LAYAMATERIAL:02":for(J$i in J$h=J$d.props)switch(J$i){case"vectors":for(J$f=0,J$g=(J$j=J$h[J$i]).length;J$f<J$g;J$f++)switch((J$l=(J$k=J$j[J$f]).value).length){case 2:this[J$k.name]=new J$fb(J$l[0],J$l[1]);break;case 3:this[J$k.name]=new J$gb(J$l[0],J$l[1],J$l[2]);break;case 4:this[J$k.name]=new J$hb(J$l[0],J$l[1],J$l[2],J$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(J$f=0,J$g=(J$m=J$h[J$i]).length;J$f<J$g;J$f++)(J$o=(J$n=J$m[J$f]).path)&&(this[J$n.name]=J$r.getRes(J$e[J$o]));break;case"defines":for(J$f=0,J$g=(J$p=J$h[J$i]).length;J$f<J$g;J$f++)J$q=this._shaderCompile.getMaterialDefineByName(J$p[J$f]),this._addShaderDefine(J$q);break;default:this[J$i]=J$h[J$i]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},J$b._addReference=function(){J$d.prototype._addReference.call(this);for(var J$a=0,J$b=this._values.length;J$a<J$b;J$a++){var J$c=this._values[J$a];J$c&&J$c instanceof laya.d3.resource.BaseTexture&&J$c._addReference()}},J$b._removeReference=function(){J$d.prototype._removeReference.call(this);for(var J$a=0,J$b=this._values.length;J$a<J$b;J$a++){var J$c=this._values[J$a];J$c&&J$c instanceof laya.d3.resource.BaseTexture&&J$c._removeReference()}},J$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},J$b.setShaderName=function(J$a){var J$b=J$Lb.nameKey.getID(J$a);if(-1===J$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=J$Ab._preCompileShader[J$b]},J$b.cloneTo=function(J$a){var J$b=J$a;J$b.name=this.name,J$b.cull=this.cull,J$b.blend=this.blend,J$b.srcBlend=this.srcBlend,J$b.dstBlend=this.dstBlend,J$b.srcBlendRGB=this.srcBlendRGB,J$b.dstBlendRGB=this.dstBlendRGB,J$b.srcBlendAlpha=this.srcBlendAlpha,J$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(J$b.blendConstColor),J$b.blendEquation=this.blendEquation,J$b.blendEquationRGB=this.blendEquationRGB,J$b.blendEquationAlpha=this.blendEquationAlpha,J$b.depthTest=this.depthTest,J$b.depthWrite=this.depthWrite,J$b.renderQueue=this.renderQueue,J$b._shader=this._shader,J$b._disablePublicShaderDefine=this._disablePublicShaderDefine,J$b._shaderDefineValue=this._shaderDefineValue;var J$c,J$d=0,J$e=J$b._shaderValues;J$b._shaderValues.data.length=this._shaderValues.data.length;var J$f=this._values.length,J$g=J$b._values;for(J$d=0,J$c=J$g.length=J$f;J$d<J$c;J$d++){var J$h=this._values[J$d];if(J$h)if("number"==typeof J$h)J$g[J$d]=J$h,J$e.data[J$d]=J$h;else if("number"==typeof J$h&&Math.floor(J$h)==J$h)J$g[J$d]=J$h,J$e.data[J$d]=J$h;else if("boolean"==typeof J$h)J$g[J$d]=J$h,J$e.data[J$d]=J$h;else if(J$h instanceof laya.d3.math.Vector2){var J$i=J$g[J$d]||(J$g[J$d]=new J$fb);J$h.cloneTo(J$i),J$e.data[J$d]=J$i.elements}else if(J$h instanceof laya.d3.math.Vector3){var J$j=J$g[J$d]||(J$g[J$d]=new J$gb);J$h.cloneTo(J$j),J$e.data[J$d]=J$j.elements}else if(J$h instanceof laya.d3.math.Vector4){var J$k=J$g[J$d]||(J$g[J$d]=new J$hb);J$h.cloneTo(J$k),J$e.data[J$d]=J$k.elements}else if(J$h instanceof laya.d3.math.Matrix4x4){var J$l=J$g[J$d]||(J$g[J$d]=new J$ab);J$h.cloneTo(J$l),J$e.data[J$d]=J$l.elements}else J$h instanceof laya.d3.resource.BaseTexture&&(J$g[J$d]=J$h,J$e.data[J$d]=J$h)}},J$b.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$o(0,J$b,"alphaTestValue",function(){return this._getNumber(0)},function(J$a){this._setNumber(0,J$a)}),J$o(0,J$b,"alphaTest",function(){return this._alphaTest},function(J$a){(this._alphaTest=J$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),J$a.__init__=function(){J$a.SHADERDEFINE_ALPHATEST=J$a.shaderDefines.registerDefine("ALPHATEST")},J$a.RENDERQUEUE_OPAQUE=2e3,J$a.RENDERQUEUE_ALPHATEST=2450,J$a.RENDERQUEUE_TRANSPARENT=3e3,J$a.CULL_NONE=0,J$a.CULL_FRONT=1,J$a.CULL_BACK=2,J$a.BLEND_DISABLE=0,J$a.BLEND_ENABLE_ALL=1,J$a.BLEND_ENABLE_SEPERATE=2,J$a.BLENDPARAM_ZERO=0,J$a.BLENDPARAM_ONE=1,J$a.BLENDPARAM_SRC_COLOR=768,J$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,J$a.BLENDPARAM_DST_COLOR=774,J$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,J$a.BLENDPARAM_SRC_ALPHA=770,J$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,J$a.BLENDPARAM_DST_ALPHA=772,J$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,J$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,J$a.BLENDEQUATION_ADD=0,J$a.BLENDEQUATION_SUBTRACT=1,J$a.BLENDEQUATION_REVERSE_SUBTRACT=2,J$a.DEPTHTEST_OFF=0,J$a.DEPTHTEST_NEVER=512,J$a.DEPTHTEST_LESS=513,J$a.DEPTHTEST_EQUAL=514,J$a.DEPTHTEST_LEQUAL=515,J$a.DEPTHTEST_GREATER=516,J$a.DEPTHTEST_NOTEQUAL=517,J$a.DEPTHTEST_GEQUAL=518,J$a.DEPTHTEST_ALWAYS=519,J$a.SHADERDEFINE_ALPHATEST=1,J$a.ALPHATESTVALUE=0,J$l(J$a,["shaderDefines",function(){return this.shaderDefines=new J$kb}]),J$a}(J$q),J$Fb=function(J$a){function J$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,J$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}J$n(J$b,"laya.d3.resource.BaseTexture",J$q);var J$c=J$b.prototype;return J$o(0,J$c,"width",function(){return this._width}),J$o(0,J$c,"repeat",function(){return this._repeat},function(J$a){if(this._repeat!==J$a&&(this._repeat=J$a,this._source)){var J$b=J$F.mainContext;J$G.bindTexture(J$b,this._type,this._source),J$w.isPOT(this._width,this._height)&&this._repeat?(J$b.texParameteri(this._type,10242,10497),J$b.texParameteri(this._type,10243,10497)):(J$b.texParameteri(this._type,10242,33071),J$b.texParameteri(this._type,10243,33071))}}),J$o(0,J$c,"height",function(){return this._height}),J$o(0,J$c,"magFifter",function(){return this._magFifter},function(J$a){(this._magFifter=J$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(J$a)}),J$o(0,J$c,"wrapModeV",function(){return this._wrapModeV}),J$o(0,J$c,"size",function(){return this._size}),J$o(0,J$c,"wrapModeU",function(){return this._wrapModeU}),J$o(0,J$c,"mipmap",function(){return this._mipmap},function(J$a){this._mipmap=J$a,this._mipmap!=J$a&&this._conchTexture&&this._conchTexture.setMipMap(J$a)}),J$o(0,J$c,"minFifter",function(){return this._minFifter},function(J$a){this._minFifter=J$a,this._minFifter!=J$a&&this._conchTexture&&this._conchTexture.setMinFifter(J$a)}),J$o(0,J$c,"format",function(){return this._format}),J$o(0,J$c,"source",function(){return this.activeResource(),this._source}),J$o(0,J$c,"defaulteTexture",function(){return J$Sb.grayTexture}),J$b.WARPMODE_REPEAT=0,J$b.WARPMODE_CLAMP=1,J$b}(),J$Gb=function(J$a){function J$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,J$b.__super.call(this),this._boundingBoxCorners=J$d(8,null)}J$n(J$b,"laya.d3.resource.models.BaseMesh",J$q);var J$c=J$b.prototype;return J$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},J$c._generateBoundingObject=function(){this._boundingSphere=new J$_a(new J$gb,0),J$_a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new J$Za(new J$gb,new J$gb),J$Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},J$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},J$c.getRenderElement=function(J$a){throw new Error("未Override,请重载该属性！")},J$o(0,J$c,"subMeshCount",function(){return this._subMeshCount}),J$o(0,J$c,"boundingBox",function(){return this._boundingBox}),J$o(0,J$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),J$o(0,J$c,"boundingSphere",function(){return this._boundingSphere}),J$b}(),J$Hb=(function(J$a){function J$b(){J$b.__super.call(this)}J$n(J$b,"laya.d3.component.Script",J$vb);var J$c=J$b.prototype;J$c.onTriggerEnter=function(J$a){},J$c.onTriggerExit=function(J$a){},J$c.onTriggerStay=function(J$a){},J$o(0,J$c,"isSingleton",function(){return J$b._isSingleton}),J$b._isSingleton=!1}(),function(J$a){function J$b(J$a){this._owner=null,this._sharedMesh=null,J$b.__super.call(this),this._owner=J$a}J$n(J$b,"laya.d3.core.MeshFilter",J$a);var J$c=J$b.prototype;return J$c._sharedMeshLoaded=function(){this.event("loaded")},J$c._destroy=function(){J$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},J$o(0,J$c,"sharedMesh",function(){return this._sharedMesh},function(J$a){var J$b=this._sharedMesh;J$b&&J$b._removeReference(),(this._sharedMesh=J$a)._addReference(),this.event("meshchanged",[this,J$b,J$a]),J$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),J$o(0,J$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),J$o(0,J$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),J$o(0,J$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),J$o(0,J$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),J$b}(J$wb)),J$Ib=function(J$a){function J$b(J$a){J$b.__super.call(this,J$a),J$a.meshFilter.on("meshchanged",this,this._onMeshChanged)}J$n(J$b,"laya.d3.core.MeshRender",J$xb);var J$c=J$b.prototype;return J$c._onMeshChanged=function(J$a,J$b,J$c){J$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:J$c.once("loaded",this,this._onMeshLoaed)},J$c._onMeshLoaed=function(J$a,J$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},J$c._calculateBoundingSphereByInitSphere=function(J$a){var J$b=NaN,J$c=this._owner.transform,J$d=J$c.scale.elements,J$e=Math.abs(J$d[0]),J$f=Math.abs(J$d[1]),J$g=Math.abs(J$d[2]);J$b=J$f<=J$e&&J$g<=J$e?J$e:J$g<=J$f?J$f:J$g,J$gb.transformCoordinate(J$a.center,J$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=J$a.radius*J$b},J$c._calculateBoundBoxByInitCorners=function(J$a){for(var J$b=this._owner.transform.worldMatrix,J$c=0;J$c<8;J$c++)J$gb.transformCoordinate(J$a[J$c],J$b,J$xb._tempBoundBoxCorners[J$c]);J$Za.createfromPoints(J$xb._tempBoundBoxCorners,this._boundingBox)},J$c._calculateBoundingSphere=function(){var J$a=this._owner.meshFilter.sharedMesh;null==J$a||null==J$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(J$a.boundingSphere)},J$c._calculateBoundingBox=function(){var J$a=this._owner.meshFilter.sharedMesh;null==J$a||null==J$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(J$a.boundingBoxCorners)},J$c._renderUpdate=function(J$a){var J$b=this._owner.transform;if(J$b){this._setShaderValueMatrix4x4(0,J$b.worldMatrix);var J$c=this._owner.getProjectionViewWorldMatrix(J$a);this._setShaderValueMatrix4x4(1,J$c)}else this._setShaderValueMatrix4x4(0,J$ab.DEFAULT),this._setShaderValueMatrix4x4(1,J$a);return J$rb.debugMode&&this._renderRenderableBoundBox(),!0},J$b}(),J$Jb=function(J$b){function J$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,J$d.__super.call(this),this._renderState=new J$Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new J$mb,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new J$ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new J$gb(.7,.7,.7),this.ambientColor=new J$gb(.212,.227,.259),J$F.shaderHighPrecision&&this.addShaderDefine(J$Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}J$n(J$d,"laya.d3.core.scene.Scene",J$b);var J$a=J$d.prototype;return J$x.imps(J$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),J$a._setUrl=function(J$a){this._url=J$a},J$a._getGroup=function(){return this._group},J$a._setGroup=function(J$a){this._group=J$a},J$a._display=function(){J$x.stage._scenes.push(this),J$x.stage._scenes.sort(J$d._sortScenes);for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++){var J$c=this._childs[J$a];J$c.active&&J$c._activeHierarchy()}},J$a._unDisplay=function(){var J$a=J$x.stage._scenes;J$a.splice(J$a.indexOf(this),1);for(var J$b=0,J$c=this._childs.length;J$b<J$c;J$b++){var J$d=this._childs[J$b];J$d.active&&J$d._inActiveHierarchy()}},J$a._addChild3D=function(J$a){J$a.transform._onWorldTransform(),J$a._setBelongScene(this),this.displayedInStage&&J$a.active&&J$a._activeHierarchy()},J$a._removeChild3D=function(J$a){J$a.transform.parent=null,this.displayedInStage&&J$a.active&&J$a._inActiveHierarchy(),J$a._setUnBelongScene()},J$a.initOctree=function(J$a,J$b,J$c,J$d,J$e){void 0===J$e&&(J$e=6),this.treeSize=new J$gb(J$a,J$b,J$c),this.treeLevel=J$e,this.treeRoot=new J$Z(this,0),this.treeRoot.init(J$d,this.treeSize)},J$a._prepareUpdateToRenderState=function(J$a,J$b){J$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,J$b.scene=this},J$a._prepareSceneToRender=function(J$a){var J$b=this._lights.length;if(0<J$b)for(var J$c=0,J$d=0;J$d<J$b&&!(this._lights[J$d]._prepareToScene(J$a)&&++J$c>=this._enableLightCount);J$d++);},J$a._updateChilds=function(J$a){for(var J$b=0,J$c=this._childs.length;J$b<J$c;++J$b)this._childs[J$b]._update(J$a)},J$a._preRenderScene=function(J$a,J$b,J$c){var J$d,J$e=J$b._viewMatrix,J$f=J$b._projectionMatrix,J$g=J$b._projectionViewMatrix,J$h=0,J$i=J$b.camera;for(J$i.useOcclusionCulling?this.treeRoot?J$ca.renderObjectCullingOctree(J$c,this,J$i,J$e,J$f,J$g):J$ca.renderObjectCulling(J$c,this,J$i,J$e,J$f,J$g):J$ca.renderObjectCullingNoBoundFrustum(this,J$i,J$e,J$f,J$g),J$h=0,J$d=this._quenes.length;J$h<J$d;J$h++)this._quenes[J$h]&&this._quenes[J$h]._preRender(J$b)},J$a._clear=function(J$a,J$b){var J$c=J$b._viewport,J$d=J$b.camera,J$e=J$c.x,J$f=J$d.renderTargetSize.height-J$c.y-J$c.height,J$g=J$c.width,J$h=J$c.height;J$a.viewport(J$e,J$f,J$g,J$h);var J$i=256,J$j=J$d.renderTarget;switch(J$d.clearFlag){case 0:var J$k=J$d.clearColor;if(J$k){J$a.enable(3089),J$a.scissor(J$e,J$f,J$g,J$h);var J$l=J$k.elements;J$a.clearColor(J$l[0],J$l[1],J$l[2],J$l[3]),J$i|=16384}if(J$j)switch(J$k||(J$i=16384),J$j.depthStencilFormat){case 33189:J$i|=256;break;case 36168:J$i|=1024;break;case 34041:J$i|=256,J$i|=1024}J$a.clear(J$i),J$k&&J$a.disable(3089);break;case 1:case 2:if(J$j)switch(J$i=16384,J$j.depthStencilFormat){case 33189:J$i|=256;break;case 36168:J$i|=1024;break;case 34041:J$i|=256,J$i|=1024}J$a.clear(J$i);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},J$a._renderScene=function(J$a,J$b){var J$c,J$d,J$e=J$b.camera,J$f=0;for(J$f=0;J$f<2;J$f++)(J$d=this._quenes[J$f])&&(J$e.renderTarget?J$d._render(J$b,!0):J$d._render(J$b,!1));if(1===J$e.clearFlag){var J$g=J$e.sky;J$g&&(J$G.setCullFace(J$a,!1),J$G.setDepthFunc(J$a,515),J$G.setDepthMask(J$a,!1),J$g._render(J$b),J$G.setDepthFunc(J$a,513),J$G.setDepthMask(J$a,!0))}for(J$f=2,J$c=this._quenes.length;J$f<J$c;J$f++)(J$d=this._quenes[J$f])&&(J$d._sortAlpha(J$b.camera.transform.position),J$e.renderTarget?J$d._render(J$b,!0):J$d._render(J$b,!1))},J$a._set3DRenderConfig=function(J$a){J$a.disable(3042),J$G._blend=!1,J$a.blendFunc(770,771),J$G._sFactor=770,J$G._dFactor=771,J$a.disable(2929),J$G._depthTest=!1,J$a.enable(2884),J$G._cullFace=!0,J$a.depthMask(1),J$G._depthMask=!0,J$a.frontFace(2304),J$G._frontFace=2304},J$a._set2DRenderConfig=function(J$a){J$G.setBlend(J$a,!0),J$G.setBlendFunc(J$a,1,771),J$G.setDepthTest(J$a,!1),J$G.setCullFace(J$a,!1),J$G.setDepthMask(J$a,!0),J$G.setFrontFace(J$a,2305),J$a.viewport(0,0,J$k.width,J$k.height)},J$a._parseCustomProps=function(J$a,J$b,J$c,J$d){var J$e=J$d.customProps.lightmaps,J$f=J$e.length,J$g=this._lightmaps;J$g.length=J$f;for(var J$h=0;J$h<J$f;J$h++)J$g[J$h]=J$r.getRes(J$b[J$e[J$h].replace(".exr",".png")]);this.setlightmaps(J$g);var J$i=J$d.customProps.ambientColor;J$i&&(this.ambientColor=new J$gb(J$i[0],J$i[1],J$i[2]));var J$j=J$d.customProps.fogColor;J$j&&(this.fogColor=new J$gb(J$j[0],J$j[1],J$j[2]))},J$a._addLight=function(J$a){this._lights.indexOf(J$a)<0&&this._lights.push(J$a)},J$a._removeLight=function(J$a){var J$b=this._lights.indexOf(J$a);0<=J$b&&this._lights.splice(J$b,1)},J$a._updateScene=function(){var J$a=this._renderState;this._prepareUpdateToRenderState(J$F.mainContext,J$a),this._updateComponents(J$a),this._updateChilds(J$a),this._lateUpdateComponents(J$a),this._time+=J$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},J$a._updateSceneConch=function(){var J$a=this._renderState;this._prepareUpdateToRenderState(J$F.mainContext,J$a),this._updateComponents(J$a),this._lateUpdateComponents(J$a),this._prepareSceneToRender(J$a);for(var J$b=0,J$c=this._cameraPool.length;J$b<J$c;J$b++){var J$d=this._cameraPool[J$b];(J$a.camera=J$d)._prepareCameraToRender()}},J$a._preRenderShadow=function(J$a,J$b,J$c,J$d,J$e){this.treeRoot?J$ca.renderShadowObjectCullingOctree(this,J$b,J$c,J$d,J$e):J$ca.renderShadowObjectCulling(this,J$b,J$c,J$d,J$e);for(var J$f=0,J$g=J$c.length;J$f<J$g;J$f++)J$c[J$f]&&J$c[J$f]._preRender(J$a)},J$a._renderShadowMap=function(J$a,J$b,J$c){var J$d=this.parallelSplitShadowMaps[0];J$d._calcAllLightCameraInfo(J$c);var J$e,J$f,J$g,J$h=J$d.PSSMNum;if(this._preRenderShadow(J$b,J$d._lightCulling,J$d._shadowQuenes,J$d._lightVPMatrix[0],J$h),this.addShaderDefine(J$nb.SHADERDEFINE_CAST_SHADOW),1<J$h)for(var J$i=0;J$i<J$h;J$i++)J$e=J$d.getRenderTarget(J$i+1),J$d.beginRenderTarget(J$i+1),J$a.clearColor(1,1,1,1),J$a.clear(16640),J$a.viewport(0,0,J$e.width,J$e.height),J$b.camera=J$g=J$d.getLightCamera(J$i),J$g._prepareCameraToRender(),J$g._prepareCameraViewProject(J$g.viewMatrix,J$g.projectionMatrix),J$b._projectionViewMatrix=J$d._lightVPMatrix[J$i+1],(J$f=J$d._shadowQuenes[J$i])._preRender(J$b),J$f._renderShadow(J$b,!1),J$d.endRenderTarget(J$i+1);else J$e=J$d.getRenderTarget(1),J$d.beginRenderTarget(1),J$a.clearColor(1,1,1,1),J$a.clear(16640),J$a.viewport(0,0,J$e.width,J$e.height),J$b.camera=J$g=J$d.getLightCamera(0),J$g._prepareCameraToRender(),J$g._prepareCameraViewProject(J$g.viewMatrix,J$g.projectionMatrix),J$b._projectionViewMatrix=J$d._lightVPMatrix[0],(J$f=J$d._shadowQuenes[0])._preRender(J$b),J$f._renderShadow(J$b,!0),J$d.endRenderTarget(1);this.removeShaderDefine(J$nb.SHADERDEFINE_CAST_SHADOW)},J$a.addTreeNode=function(J$a){this.treeRoot.addTreeNode(J$a)},J$a.removeTreeNode=function(J$a){this.treeSize&&J$a._treeNode&&J$a._treeNode.removeObject(J$a)},J$a.setlightmaps=function(J$a){this._lightmaps=J$a;for(var J$b=0,J$c=this._renderableSprite3Ds.length;J$b<J$c;J$b++)this._renderableSprite3Ds[J$b]._render._applyLightMapParams()},J$a.getlightmaps=function(){return this._lightmaps},J$a.addChildAt=function(J$a,J$b){if(!(J$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(J$a&&J$a.__className));if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),0<=J$b&&J$b<=this._childs.length){if(J$a._parent===this){var J$c=this.getChildIndex(J$a);this._childs.splice(J$c,1),this._childs.splice(J$b,0,J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,J$b)),this._childChanged()}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J$b,0,J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,J$b),(J$a.parent=this)._addChild3D(J$a);return J$a}throw new Error("appendChildAt:The index is out of bounds")},J$a.addChild=function(J$a){if(!(J$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),J$a._parent===this){var J$b=this.getChildIndex(J$a);J$b!==this._childs.length-1&&(this._childs.splice(J$b,1),this._childs.push(J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1)),this._childChanged())}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1),(J$a.parent=this)._childChanged(),this._addChild3D(J$a);return J$a},J$a.removeChildAt=function(J$a){var J$b=this.getChildAt(J$a);return J$b&&(this._removeChild3D(J$b),this._childs.splice(J$a,1),this.conchModel&&this.conchModel.removeChild(J$b.conchModel),J$b.parent=null),J$b},J$a.removeChildren=function(J$a,J$b){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=2147483647),this._childs&&0<this._childs.length){var J$c=this._childs;if(0===J$a&&J$f<=J$b){var J$d=J$c;this._childs=J$j.ARRAY_EMPTY}else J$d=J$c.splice(J$a,J$b-J$a);for(var J$e=0,J$f=J$d.length;J$e<J$f;J$e++)this._removeChild3D(J$d[J$e]),J$d[J$e].parent=null,this.conchModel&&this.conchModel.removeChild(J$d[J$e].conchModel)}return this},J$a.addFrustumCullingObject=function(J$a){this.treeRoot?this.addTreeNode(J$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(J$a):this._cullingRenders[this._cullingRendersLength]=J$a,J$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},J$a.removeFrustumCullingObject=function(J$a){if(this.treeRoot)this.removeTreeNode(J$a);else{this._cullingRendersLength--;var J$b=J$a._indexInSceneFrustumCullingObjects;if(J$b!==this._cullingRendersLength){var J$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[J$b]=J$c)._indexInSceneFrustumCullingObjects=J$b,J$a._indexInSceneFrustumCullingObjects=-1}}},J$a.getRenderQueue=function(J$a){return J$a<3e3?this._quenes[1]||(this._quenes[1]=new J$X(this)):this._quenes[2]||(this._quenes[2]=new J$X(this))},J$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new J$X(this)},J$a.addShaderDefine=function(J$a){this._shaderDefineValue|=J$a},J$a.removeShaderDefine=function(J$a){this._shaderDefineValue&=~J$a},J$a.addScript=function(J$a){return this._addComponent(J$a)},J$a.getScriptByType=function(J$a,J$b){return void 0===J$b&&(J$b=0),this._getComponentByType(J$a,J$b)},J$a.getScriptsByType=function(J$a,J$b){this._getComponentsByType(J$a,J$b)},J$a.getScriptByIndex=function(J$a){return this._getComponentByIndex(J$a)},J$a.removeScriptByType=function(J$a,J$b){void 0===J$b&&(J$b=0),this._removeComponentByType(J$a,J$b)},J$a.removeScriptsByType=function(J$a){this._removeComponentByType(J$a)},J$a.removeAllScript=function(){this._removeAllComponent()},J$a.render=function(J$a,J$b,J$c){(J$p._context.ctx._renderKey=0)<this._childs.length&&J$a.addRenderObject(this)},J$a.renderSubmit=function(){var J$a=J$F.mainContext,J$b=this._renderState;this._set3DRenderConfig(J$a),this._prepareSceneToRender(this._renderState);var J$c,J$d=0,J$e=0;if(J$rb.debugMode||J$Z.debugMode)for(J$d=0,J$e=this._cameraPool.length;J$d<J$e;J$d++)J$c=this._cameraPool[J$d],J$rb._debugPhasorSprite.begin(1,J$c),J$c.activeInHierarchy&&J$c._renderCamera(J$a,J$b,this),J$rb._debugPhasorSprite.end();else for(J$d=0,J$e=this._cameraPool.length;J$d<J$e;J$d++)(J$c=this._cameraPool[J$d]).activeInHierarchy&&J$c._renderCamera(J$a,J$b,this);return this._set2DRenderConfig(J$a),1},J$a.onAsynLoaded=function(J$a,J$b,J$c){var J$d=J$b[0];if("Scene"!==J$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var J$e=J$b[1];J$qb._createNodeByJson(this,J$d,this,J$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),this.destroyed||(J$b.prototype.destroy.call(this,J$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,J$r.clearRes(this.url),this.loaded||J$rb._cancelLoadByUrl(this.url))},J$a.getRenderType=function(){return 0},J$a.releaseRender=function(){},J$a._addComponent=function(J$a){var J$b,J$c=this._componentsMap.indexOf(J$a);if(-1===J$c)J$b=[],this._componentsMap.push(J$a),this._typeComponentsIndices.push(J$b);else if(J$b=this._typeComponentsIndices[J$c],this._components[J$b[0]].isSingleton)throw new Error("无法单实例创建"+J$a+"组件，"+J$a+"组件已存在！");var J$d=J$e.getInstance(J$a);J$b.push(this._components.length),this._components.push(J$d);return J$d._initialize(this),J$d},J$a._removeComponent=function(J$a,J$b){var J$c=this._typeComponentsIndices[J$a],J$d=J$c[J$b],J$e=this._components[J$d];this._components.splice(J$d,1),J$c.splice(J$b,1),0===J$c.length&&(this._typeComponentsIndices.splice(J$a,1),this._componentsMap.splice(J$a,1));for(var J$f=0,J$g=this._componentsMap.length;J$f<J$g;J$f++)for(var J$h=(J$c=this._typeComponentsIndices[J$f]).length-1;0<=J$h;J$h--){var J$i=J$c[J$h];if(!(J$d<J$i))break;J$c[J$h]=--J$i}J$e._destroy()},J$a._getComponentByType=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c=this._componentsMap.indexOf(J$a);return-1===J$c?null:this._components[this._typeComponentsIndices[J$c][J$b]]},J$a._getComponentsByType=function(J$a,J$b){var J$c=this._componentsMap.indexOf(J$a);if(-1!==J$c){var J$d=this._typeComponentsIndices[J$c],J$e=J$d.length;J$b.length=J$e;for(var J$f=0;J$f<J$e;J$f++)J$b[J$f]=this._components[J$d[J$f]]}else J$b.length=0},J$a._getComponentByIndex=function(J$a){return this._components[J$a]},J$a._removeComponentByType=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c=this._componentsMap.indexOf(J$a);-1!==J$c&&this._removeComponent(J$c,J$b)},J$a._removeComponentsByType=function(J$a){var J$b=this._componentsMap.indexOf(J$a);if(-1!==J$b)for(var J$c=this._typeComponentsIndices[J$b],J$d=0,J$e=J$c.length;J$d<J$e;J$c.length<J$e?J$e--:J$d++)this._removeComponent(J$b,J$d)},J$a._removeAllComponent=function(){for(var J$a=0,J$b=this._componentsMap.length;J$a<J$b;this._componentsMap.length<J$b?J$b--:J$a++)this._removeComponentsByType(this._componentsMap[J$a])},J$a._updateComponents=function(J$a){for(var J$b=0,J$c=this._components.length;J$b<J$c;J$b++){var J$d=this._components[J$b];!J$d.started&&(J$d._start(J$a),J$d.started=!0),J$d.enable&&J$d._update(J$a)}},J$a._lateUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._lateUpdate(J$a)}},J$a._preRenderUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._preRenderUpdate(J$a)}},J$a._postRenderUpdateComponents=function(J$a){for(var J$b=0;J$b<this._components.length;J$b++){var J$c=this._components[J$b];!J$c.started&&(J$c._start(J$a),J$c.started=!0),J$c.enable&&J$c._postRenderUpdate(J$a)}},J$o(0,J$a,"_loaded",null,function(J$a){this.__loaded=J$a}),J$o(0,J$a,"fogColor",function(){return this._fogColor},function(J$a){this._fogColor=J$a,this._shaderValues.setValue(0,J$a.elements)}),J$o(0,J$a,"enableFog",function(){return this._enableFog},function(J$a){this._enableFog!==J$a&&((this._enableFog=J$a)?(this.addShaderDefine(J$Ab.SHADERDEFINE_FOG),this.removeShaderDefine(J$Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(J$Ab.SHADERDEFINE_FOG))}),J$o(0,J$a,"url",function(){return this._url}),J$o(0,J$a,"loaded",function(){return this.__loaded}),J$o(0,J$a,"enableDepthFog",function(){return this._enableDepthFog},function(J$a){this._enableDepthFog!=J$a&&((this._enableDepthFog=J$a)?(this.addShaderDefine(J$Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(J$Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(J$Ab.SAHDERDEFINE_DEPTHFOG))}),J$o(0,J$a,"fogStart",function(){return this._fogStart},function(J$a){this._fogStart=J$a,this._shaderValues.setValue(1,J$a)}),J$o(0,J$a,"fogRange",function(){return this._fogRange},function(J$a){this._fogRange=J$a,this._shaderValues.setValue(2,J$a)}),J$o(0,J$a,"ambientColor",function(){return this._ambientColor},function(J$a){this._ambientColor=J$a,this._shaderValues.setValue(21,J$a.elements)}),J$o(0,J$a,"scene",function(){return this}),J$o(0,J$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),J$d._sortScenes=function(J$a,J$b){if(J$a.parent!==J$x.stage||J$b.parent!==J$x.stage)return J$a.parent!==J$x.stage&&J$b.parent!==J$x.stage?J$d._sortScenes(J$a.parent,J$b.parent):J$a.parent===J$x.stage?-1:1;var J$c=J$x.stage._childs;return J$c.indexOf(J$a)-J$c.indexOf(J$b)},J$d.load=function(J$a){return J$x.loader.create(J$a,null,null,J$d)},J$d.FOGCOLOR=0,J$d.FOGSTART=1,J$d.FOGRANGE=2,J$d.LIGHTDIRECTION=3,J$d.LIGHTDIRCOLOR=4,J$d.POINTLIGHTPOS=5,J$d.POINTLIGHTRANGE=6,J$d.POINTLIGHTATTENUATION=7,J$d.POINTLIGHTCOLOR=8,J$d.SPOTLIGHTPOS=9,J$d.SPOTLIGHTDIRECTION=10,J$d.SPOTLIGHTSPOT=11,J$d.SPOTLIGHTRANGE=12,J$d.SPOTLIGHTATTENUATION=13,J$d.SPOTLIGHTCOLOR=14,J$d.SHADOWDISTANCE=15,J$d.SHADOWLIGHTVIEWPROJECT=16,J$d.SHADOWMAPPCFOFFSET=17,J$d.SHADOWMAPTEXTURE1=18,J$d.SHADOWMAPTEXTURE2=19,J$d.SHADOWMAPTEXTURE3=20,J$d.AMBIENTCOLOR=21,J$d.TIME=22,J$d}(J$z),J$Kb=function(J$a){function J$b(J$a){J$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new J$ab,this._shaderValues=new J$mb,this._colliders=[],this._id=++J$b._uniqueIDCounter,this._transform=new J$yb(this),this.name=J$a||"Sprite3D-"+J$b._nameNumberCounter++,this.layer=J$I.currentCreationLayer,this.active=!0}J$n(J$b,"laya.d3.core.Sprite3D",J$Db);var J$c=J$b.prototype;return J$x.imps(J$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),J$c._setUrl=function(J$a){this._url=J$a},J$c._getGroup=function(){return this._group},J$c._setGroup=function(J$a){this._group=J$a},J$c._addChild3D=function(J$a){J$a.transform.parent=this.transform,this._hierarchyAnimator&&(!J$a._hierarchyAnimator&&J$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(J$a,!0,[J$a.name])),this._scene&&(J$a._setBelongScene(this._scene),this._activeInHierarchy&&J$a._active&&J$a._activeHierarchy())},J$c._removeChild3D=function(J$a){J$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&J$a._active&&J$a._inActiveHierarchy(),J$a._setUnBelongScene()),this._hierarchyAnimator&&(J$a._hierarchyAnimator==this._hierarchyAnimator&&J$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(J$a,!1,[J$a.name]))},J$c._parseBaseCustomProps=function(J$a){var J$b=this.transform.localPosition;J$a.translate?(J$b.fromArray(J$a.translate),J$b.x*=100,J$b.y*=100,J$b.z*=100):J$b.elements.fill(0),this.transform.localPosition=J$b;var J$c=this.transform.localRotation;J$a.rotation?J$c.fromArray(J$a.rotation):J$c.fromArray([0,0,0,-1]),this.transform.localRotation=J$c;var J$d=this.transform.localScale;J$a.scale?J$d.fromArray(J$a.scale):J$d.elements.fill(1),this.transform.localScale=J$d;var J$e=J$a.layer;null!=J$e&&(this.layer=J$I.getLayerByNumber(J$e))},J$c._parseCustomComponent=function(J$a,J$b,J$c){for(var J$d in J$c){var J$e=J$c[J$d];switch(J$d){case"Animator":var J$f=this.addComponent(Animator);if(J$e.avatarPath)J$f.avatar=J$r.getRes(J$b[J$e.avatarPath]);else{var J$g=J$e.avatar;if(J$g){J$f.avatar=J$r.getRes(J$b[J$g.path]);var J$h=J$g.linkSprites;J$h&&J$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[J$f,J$h])}}for(var J$i=J$e.clipPaths,J$j=J$i.length,J$k=0;J$k<J$j;J$k++)J$f.addClip(J$r.getRes(J$b[J$i[J$k]]));J$f.clip=J$r.getRes(J$b[J$i[0]]);var J$l=J$e.playOnWake;void 0!==J$l&&(J$f.playOnWake=J$l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var J$m=this.addComponent(SphereCollider);J$m.isTrigger=J$e.isTrigger;var J$n=J$m.center;J$n.fromArray(J$e.center),J$m.center=J$n,J$m.radius=J$e.radius;break;case"BoxCollider":var J$o=this.addComponent(BoxCollider);J$o.isTrigger=J$e.isTrigger,J$o.center.fromArray(J$e.center);var J$p=J$o.size;J$p.fromArray(J$e.size),J$o.size=J$p;break;case"MeshCollider":this.addComponent(MeshCollider)}}},J$c._onRootNodeHierarchyLoaded=function(J$a,J$b){for(var J$c in J$b){for(var J$d=this,J$e=J$b[J$c],J$f=0,J$g=J$e.length;J$f<J$g;J$f++){var J$h=J$e[J$f];if(""===J$h)break;if(!(J$d=J$d.getChildByName(J$h)))break}J$d&&J$a.linkSprite3DToAvatarNode(J$c,J$d)}},J$c._setHierarchyAnimator=function(J$a,J$b){this._changeHierarchyAnimator(J$a);for(var J$c=0,J$d=this._childs.length;J$c<J$d;J$c++){var J$e=this._childs[J$c];J$e._hierarchyAnimator==J$b&&J$e._setHierarchyAnimator(J$a,J$b)}},J$c._clearHierarchyAnimator=function(J$a,J$b){this._changeHierarchyAnimator(J$b);for(var J$c=0,J$d=this._childs.length;J$c<J$d;J$c++){var J$e=this._childs[J$c];J$e._hierarchyAnimator==J$a&&J$e._clearHierarchyAnimator(J$a,J$b)}},J$c._getAnimatorToLinkSprite3D=function(J$a,J$b,J$c){var J$d=this.getComponentByType(Animator);if(J$d&&(J$d.avatar?J$d.avatar._version||J$a._setAnimatorToLinkAvatar(J$d,J$b):J$a._setAnimatorToLinkSprite3DNoAvatar(J$d,J$b,J$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){J$c.unshift(this._parent.name);var J$e=this._parent;J$e._hierarchyAnimator&&J$e._getAnimatorToLinkSprite3D(J$a,J$b,J$c)}},J$c._setAnimatorToLinkSprite3DNoAvatar=function(J$a,J$b,J$c){var J$d=0,J$e=0;for(J$d=0,J$e=J$a.getClipCount();J$d<J$e;J$d++)J$a._handleSpriteOwnersBySprite(J$d,J$b,J$c,this);for(J$d=0,J$e=this._childs.length;J$d<J$e;J$d++){var J$f=this._childs[J$d],J$g=J$c.length;J$c.push(J$f.name),J$f._setAnimatorToLinkSprite3DNoAvatar(J$a,J$b,J$c),J$c.splice(J$g,1)}},J$c._changeHierarchyAnimator=function(J$a){this._hierarchyAnimator=J$a},J$c._isLinkSpriteToAnimationNode=function(J$a,J$b,J$c){var J$d=J$a._avatarNodes.indexOf(J$b),J$e=J$a._cacheSpriteToNodesMap;if(J$c)this._transform.dummy=J$b.transform,J$a._cacheNodesToSpriteMap[J$d]=J$e.length,J$e.push(J$d);else{this._transform.dummy=null;var J$f=J$a._cacheNodesToSpriteMap[J$d];J$a._cacheNodesToSpriteMap[J$d]=null,J$e.splice(J$f,1)}},J$c._setBelongScene=function(J$a){this._scene=J$a;for(var J$b=0,J$c=this._childs.length;J$b<J$c;J$b++)this._childs[J$b]._setBelongScene(J$a)},J$c._setUnBelongScene=function(){this._scene=null;for(var J$a=0,J$b=this._childs.length;J$a<J$b;J$a++)this._childs[J$a]._setUnBelongScene()},J$c._activeHierarchy=function(){var J$a=0,J$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),J$a=0,J$b=this._colliders.length;J$a<J$b;J$a++)this._layer._addCollider(this._colliders[J$a]);for(this.event("activeinhierarchychanged",!0),J$a=0,J$b=this._childs.length;J$a<J$b;J$a++){var J$c=this._childs[J$a];J$c._active&&J$c._activeHierarchy()}},J$c._inActiveHierarchy=function(){var J$a=0,J$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),J$a=0,J$b=this._colliders.length;J$a<J$b;J$a++){var J$c=this._colliders[J$a];J$c._clearCollsionMap(),this._layer._removeCollider(J$c)}for(this.event("activeinhierarchychanged",!1),J$a=0,J$b=this._childs.length;J$a<J$b;J$a++){var J$d=this._childs[J$a];J$d._active&&J$d._inActiveHierarchy()}},J$c.addComponent=function(J$a){var J$b,J$c=this._componentsMap.indexOf(J$a);if(-1===J$c)J$b=[],this._componentsMap.push(J$a),this._typeComponentsIndices.push(J$b);else if(J$b=this._typeComponentsIndices[J$c],this._components[J$b[0]].isSingleton)throw new Error("无法单实例创建"+J$a+"组件，"+J$a+"组件已存在！");var J$d=J$e.getInstance(J$a);return J$b.push(this._components.length),this._components.push(J$d),J$d instanceof laya.d3.component.Script&&this._scripts.push(J$d),J$d._initialize(this),J$d},J$c._removeComponent=function(J$a,J$b){var J$c,J$d=0,J$e=this._typeComponentsIndices[J$a],J$f=J$e[J$b],J$g=this._components[J$f];for(J$g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(J$g),1),J$e.splice(J$b,1),0===J$e.length&&(this._typeComponentsIndices.splice(J$a,1),this._componentsMap.splice(J$a,1)),J$d=0,J$c=this._componentsMap.length;J$d<J$c;J$d++)for(var J$h=(J$e=this._typeComponentsIndices[J$d]).length-1;0<=J$h;J$h--){var J$i=J$e[J$h];if(!(J$f<J$i))break;J$e[J$h]=--J$i}J$g._destroy()},J$c._clearSelfRenderObjects=function(){},J$c._addSelfRenderObjects=function(){},J$c._parseCustomProps=function(J$a,J$b,J$c,J$d){},J$c._updateChilds=function(J$a){var J$b=this._childs.length;if(0!==J$b)for(var J$c=0;J$c<J$b;++J$c)this._childs[J$c]._update(J$a)},J$c._getSortID=function(J$a,J$b){return 1e3*J$b.id+J$a._getVertexBuffer().vertexDeclaration.id},J$c._update=function(J$a){(J$a.owner=this)._activeInHierarchy&&(this._updateComponents(J$a),this._lateUpdateComponents(J$a),J$A.spriteCount++,this._childs.length&&this._updateChilds(J$a))},J$c.getProjectionViewWorldMatrix=function(J$a){return J$ab.multiply(J$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},J$c.loadHierarchy=function(J$a){this.addChild(laya.d3.core.Sprite3D.load(J$a))},J$c.addChildAt=function(J$a,J$b){if(!(J$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),0<=J$b&&J$b<=this._childs.length){if(J$a._parent===this){var J$c=this.getChildIndex(J$a);this._childs.splice(J$c,1),this._childs.splice(J$b,0,J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,J$b)),this._childChanged()}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(J$b,0,J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,J$b),(J$a.parent=this)._addChild3D(J$a);return J$a}throw new Error("appendChildAt:The index is out of bounds")},J$c.addChild=function(J$a){if(!(J$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!J$a||this.destroyed||J$a===this)return J$a;if(J$a.zOrder&&this._set$P("hasZorder",!0),J$a._parent===this){var J$b=this.getChildIndex(J$a);J$b!==this._childs.length-1&&(this._childs.splice(J$b,1),this._childs.push(J$a),this.conchModel&&(this.conchModel.removeChild(J$a.conchModel),this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1)),this._childChanged())}else J$a.parent&&J$a.parent.removeChild(J$a),this._childs===J$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(J$a),this.conchModel&&this.conchModel.addChildAt(J$a.conchModel,this._childs.length-1),(J$a.parent=this)._childChanged(),this._addChild3D(J$a);return J$a},J$c.removeChildAt=function(J$a){var J$b=this.getChildAt(J$a);return J$b&&(this._removeChild3D(J$b),this._childs.splice(J$a,1),this.conchModel&&this.conchModel.removeChild(J$b.conchModel),J$b.parent=null),J$b},J$c.removeChildren=function(J$a,J$b){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=2147483647),this._childs&&0<this._childs.length){var J$c=this._childs;if(0===J$a&&J$f<=J$b){var J$d=J$c;this._childs=J$j.ARRAY_EMPTY}else J$d=J$c.splice(J$a,J$b-J$a);for(var J$e=0,J$f=J$d.length;J$e<J$f;J$e++)this._removeChild3D(J$d[J$e]),J$d[J$e].parent=null,this.conchModel&&this.conchModel.removeChild(J$d[J$e].conchModel)}return this},J$c.onAsynLoaded=function(J$a,J$b,J$c){var J$d=J$b[0];if("Sprite3D"!==J$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var J$e=J$b[1];J$qb._createNodeByJson(this,J$d,this,J$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},J$c.cloneTo=function(J$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var J$b=J$a;J$b.name=this.name,J$b._destroyed=this._destroyed,J$b.timer=this.timer,J$b._$P=this._$P,J$b.active=this._active;var J$c=J$b.transform.localPosition;this.transform.localPosition.cloneTo(J$c),J$b.transform.localPosition=J$c;var J$d=J$b.transform.localRotation;this.transform.localRotation.cloneTo(J$d),J$b.transform.localRotation=J$d;var J$e=J$b.transform.localScale;this.transform.localScale.cloneTo(J$e),J$b.transform.localScale=J$e,J$b.isStatic=this.isStatic;var J$f=0,J$g=0;for(J$f=0,J$g=this._componentsMap.length;J$f<J$g;J$f++){var J$h=J$b.addComponent(this._componentsMap[J$f]);this._components[J$f]._cloneTo(J$h)}for(J$f=0,J$g=this._childs.length;J$f<J$g;J$f++)J$b.addChild(this._childs[J$f].clone());var J$i=J$b.getComponentByType(Animator);if(J$i){var J$j=J$i._linkSpritesData;if(J$j)for(var J$k in J$j){for(var J$l=J$j[J$k],J$m=J$b,J$n=0,J$o=J$l.length;J$n<J$o&&(J$m=J$m.getChildByName(J$l[J$n]));J$n++);if(J$m){var J$p=J$i._avatarNodeMap[J$k];J$m._isLinkSpriteToAnimationNode(J$i,J$p,!0)}}}},J$c.clone=function(){var J$a=new this.constructor;return this.cloneTo(J$a),J$a},J$c.destroy=function(J$a){if(void 0===J$a&&(J$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,J$a);var J$b,J$c=0;for(J$c=0,J$b=this._components.length;J$c<J$b;J$c++)this._components[J$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,J$r.clearRes(this.url),this.loaded||J$rb._cancelLoadByUrl(this.url)}},J$c._handleSpriteToAvatar=function(J$a,J$b){J$a._avatarNodes;var J$c=J$a._avatarNodeMap[this.name];J$c&&J$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(J$a,J$c,J$b)},J$c._setAnimatorToLinkAvatar=function(J$a,J$b){this._handleSpriteToAvatar(J$a,J$b);for(var J$c=0,J$d=this._childs.length;J$c<J$d;J$c++){this._childs[J$c]._setAnimatorToLinkAvatar(J$a,J$b)}},J$o(0,J$c,"activeInHierarchy",function(){return this._activeInHierarchy}),J$o(0,J$c,"_loaded",null,function(J$a){this.__loaded=J$a}),J$o(0,J$c,"active",function(){return this._active},function(J$a){this._active!==J$a&&(this._active=J$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(J$a?this._activeHierarchy():this._inActiveHierarchy()))}),J$o(0,J$c,"componentsCount",function(){return this._components.length}),J$o(0,J$c,"loaded",function(){return this.__loaded}),J$o(0,J$c,"id",function(){return this._id}),J$o(0,J$c,"url",function(){return this._url}),J$o(0,J$c,"layer",function(){return this._layer},function(J$a){if(this._layer!==J$a){if(!J$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var J$b=0,J$c=this._colliders.length;if(this._layer)for(J$b=0;J$b<J$c;J$b++)this._layer._removeCollider(this._colliders[J$b]);for(J$b=0;J$b<J$c;J$b++)J$a._addCollider(this._colliders[J$b])}this._layer=J$a,this.event("layerchanged",J$a)}}),J$o(0,J$c,"scene",function(){return this._scene}),J$o(0,J$c,"transform",function(){return this._transform}),J$b.instantiate=function(J$a,J$b,J$c,J$d,J$e){void 0===J$c&&(J$c=!0);var J$f=J$a.clone();J$b&&J$b.addChild(J$f);var J$g=J$f.transform;if(J$c){var J$h=J$g.worldMatrix;J$a.transform.worldMatrix.cloneTo(J$h),J$g.worldMatrix=J$h}else J$d&&(J$g.position=J$d),J$e&&(J$g.rotation=J$e);return J$f},J$b.load=function(J$a){return J$x.loader.create(J$a,null,null,J$b)},J$b.WORLDMATRIX=0,J$b.MVPMATRIX=1,J$b._uniqueIDCounter=0,J$b._nameNumberCounter=0,J$b}(),J$Lb=function(J$a){function J$k(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],J$k.__super.call(this),!J$a||!J$b)throw"Shader Error";this._id=++J$k._count,this._vs=J$a,this._ps=J$b,this._attributeMap=J$c,this._sceneUniformMap=J$d,this._cameraUniformMap=J$e,this._spriteUniformMap=J$f,this._materialUniformMap=J$g,this._renderElementUniformMap=J$h,this._precompile=J$i,this._define=J$j,this._precompile&&J$k.extCompileObj&&J$k.extCompileFunc?J$k.extCompileFunc.call(J$k.extCompileObj,J$a,J$b,J$j):this.recreateResource()}J$n(J$k,"laya.d3.shader.Shader3D",J$c);var J$b=J$k.prototype;return J$b.recreateResource=function(){J$H.now();this._compile(),this.completeCreate(),this.memorySize=0},J$b.disposeResource=function(){J$F.mainContext.deleteShader(this._vshader),J$F.mainContext.deleteShader(this._pshader),J$F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},J$b._compile=function(){if(!J$F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var J$a=[this._vs,this._ps],J$b=J$F.mainContext;if(this._program=J$b.createProgram(),this._vshader=J$k._createShader(J$b,J$a[0],35633),this._pshader=J$k._createShader(J$b,J$a[1],35632),J$b.attachShader(this._program,this._vshader),J$b.attachShader(this._program,this._pshader),J$b.linkProgram(this._program),!J$p.isConchApp&&J$Ab.debugMode&&!J$b.getProgramParameter(this._program,35714))throw J$b.getProgramInfoLog(this._program);var J$c,J$d=0,J$e=0,J$f=0;for(J$f=J$p.isConchApp?J$b.getProgramParameterEx(this._vs,this._ps,"",35721):J$b.getProgramParameter(this._program,35721),J$d=0;J$d<J$f;J$d++){var J$g=null;J$c={vartype:"attribute",ivartype:0,attrib:J$g=J$p.isConchApp?J$b.getActiveAttribEx(this._vs,this._ps,"",J$d):J$b.getActiveAttrib(this._program,J$d),location:J$b.getAttribLocation(this._program,J$g.name),name:J$g.name,type:J$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(J$c)}var J$h=0;for(J$h=J$p.isConchApp?J$b.getProgramParameterEx(this._vs,this._ps,"",35718):J$b.getProgramParameter(this._program,35718),J$d=0;J$d<J$h;J$d++){var J$i=null;J$i=J$p.isConchApp?J$b.getActiveUniformEx(this._vs,this._ps,"",J$d):J$b.getActiveUniform(this._program,J$d),0<(J$c={vartype:"uniform",ivartype:1,attrib:J$g,location:J$b.getUniformLocation(this._program,J$i.name),name:J$i.name,type:J$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(J$c.name=J$c.name.substr(0,J$c.name.length-3),J$c.isArray=!0,J$c.location=J$b.getUniformLocation(this._program,J$c.name)),this._uniformParams.push(J$c)}for(J$d=0,J$e=this._attributeParams.length;J$d<J$e;J$d++)(J$c=this._attributeParams[J$d]).indexOfParams=J$d,J$c.index=1,J$c.value=[J$c.location,null],J$c.codename=J$c.name,J$c.name=null!=this._attributeMap[J$c.codename]?this._attributeMap[J$c.codename]:J$c.codename,this._attributeParamsMap.push(J$c.name),this._attributeParamsMap.push(J$c),J$c._this=this,J$c.uploadedValue=[],J$c.fun=this._attribute;for(J$d=0,J$e=this._uniformParams.length;J$d<J$e;J$d++)switch((J$c=this._uniformParams[J$d]).indexOfParams=J$d,J$c.index=1,J$c.value=[J$c.location,null],J$c.codename=J$c.name,null!=this._sceneUniformMap[J$c.codename]?(J$c.name=this._sceneUniformMap[J$c.codename],this._sceneUniformParamsMap.push(J$c.name),this._sceneUniformParamsMap.push(J$c)):null!=this._cameraUniformMap[J$c.codename]?(J$c.name=this._cameraUniformMap[J$c.codename],this._cameraUniformParamsMap.push(J$c.name),this._cameraUniformParamsMap.push(J$c)):null!=this._spriteUniformMap[J$c.codename]?(J$c.name=this._spriteUniformMap[J$c.codename],this._spriteUniformParamsMap.push(J$c.name),this._spriteUniformParamsMap.push(J$c)):null!=this._materialUniformMap[J$c.codename]?(J$c.name=this._materialUniformMap[J$c.codename],this._materialUniformParamsMap.push(J$c.name),this._materialUniformParamsMap.push(J$c)):null!=this._renderElementUniformMap[J$c.codename]?(J$c.name=this._renderElementUniformMap[J$c.codename],this._renderElementUniformParamsMap.push(J$c.name),this._renderElementUniformParamsMap.push(J$c)):console.log("Shader:can't find uinform name:"+J$c.codename+" in shader file."),J$c._this=this,J$c.uploadedValue=[],J$c.type){case 5124:J$c.fun=J$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:J$c.fun=J$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:J$c.fun=J$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:J$c.fun=J$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:J$c.fun=J$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:J$c.fun=this._uniform_sampler2D;break;case 35680:J$c.fun=this._uniform_samplerCube;break;case 35676:J$c.fun=this._uniformMatrix4fv;break;case 35670:J$c.fun=this._uniform1i;break;case 35674:J$c.fun=this._uinformMatrix2fv;break;case 35675:J$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},J$b._attribute=function(J$a,J$b){var J$c=J$F.mainContext,J$d=J$h._enableAtributes,J$e=J$a.location;return J$d[J$e]||J$c.enableVertexAttribArray(J$e),J$c.vertexAttribPointer(J$e,J$b[0],J$b[1],J$b[2],J$b[3],J$b[4]),J$d[J$e]=J$h._bindVertexBuffer,1},J$b._uniform1f=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b?(J$F.mainContext.uniform1f(J$a.location,J$c[0]=J$b),1):0},J$b._uniform1fv=function(J$a,J$b){if(J$b.length<4){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$F.mainContext.uniform1fv(J$a.location,J$b),J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3],1):0}return J$F.mainContext.uniform1fv(J$a.location,J$b),1},J$b._uniform_vec2=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]?(J$F.mainContext.uniform2f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1]),1):0},J$b._uniform_vec2v=function(J$a,J$b){if(J$b.length<2){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$F.mainContext.uniform2fv(J$a.location,J$b),J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3],1):0}return J$F.mainContext.uniform2fv(J$a.location,J$b),1},J$b._uniform_vec3=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]?(J$F.mainContext.uniform3f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2]),1):0},J$b._uniform_vec3v=function(J$a,J$b){return J$F.mainContext.uniform3fv(J$a.location,J$b),1},J$b._uniform_vec4=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$F.mainContext.uniform4f(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3]),1):0},J$b._uniform_vec4v=function(J$a,J$b){return J$F.mainContext.uniform4fv(J$a.location,J$b),1},J$b._uniformMatrix2fv=function(J$a,J$b){return J$F.mainContext.uniformMatrix2fv(J$a.location,!1,J$b),1},J$b._uniformMatrix3fv=function(J$a,J$b){return J$F.mainContext.uniformMatrix3fv(J$a.location,!1,J$b),1},J$b._uniformMatrix4fv=function(J$a,J$b){return J$F.mainContext.uniformMatrix4fv(J$a.location,!1,J$b),1},J$b._uinformMatrix2fv=function(J$a,J$b){return J$F.mainContext.uniformMatrix2fv(J$a.location,!1,J$b),1},J$b._uinformMatrix3fv=function(J$a,J$b){return J$F.mainContext.uniformMatrix3fv(J$a.location,!1,J$b),1},J$b._uniform1i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b?(J$F.mainContext.uniform1i(J$a.location,J$c[0]=J$b),1):0},J$b._uniform1iv=function(J$a,J$b){return J$F.mainContext.uniform1iv(J$a.location,J$b),1},J$b._uniform_ivec2=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]?(J$F.mainContext.uniform2i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1]),1):0},J$b._uniform_ivec2v=function(J$a,J$b){return J$F.mainContext.uniform2iv(J$a.location,J$b),1},J$b._uniform_vec3i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]?(J$F.mainContext.uniform3i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2]),1):0},J$b._uniform_vec3vi=function(J$a,J$b){return J$F.mainContext.uniform3iv(J$a.location,J$b),1},J$b._uniform_vec4i=function(J$a,J$b){var J$c=J$a.uploadedValue;return J$c[0]!==J$b[0]||J$c[1]!==J$b[1]||J$c[2]!==J$b[2]||J$c[3]!==J$b[3]?(J$F.mainContext.uniform4i(J$a.location,J$c[0]=J$b[0],J$c[1]=J$b[1],J$c[2]=J$b[2],J$c[3]=J$b[3]),1):0},J$b._uniform_vec4vi=function(J$a,J$b){return J$F.mainContext.uniform4iv(J$a.location,J$b),1},J$b._uniform_sampler2D=function(J$a,J$b){var J$c=J$b.source||J$b.defaulteTexture.source,J$d=J$F.mainContext,J$e=J$a.uploadedValue;if(null!=J$e[0])return J$d.activeTexture(J$k._TEXTURES[J$e[0]]),J$c&&J$G.bindTexture(J$d,3553,J$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return J$e[0]=this._curActTexIndex,J$d.uniform1i(J$a.location,this._curActTexIndex),J$d.activeTexture(J$k._TEXTURES[this._curActTexIndex]),J$c&&J$G.bindTexture(J$d,3553,J$c),this._curActTexIndex++,1},J$b._uniform_samplerCube=function(J$a,J$b){var J$c=J$b.source||J$b.defaulteTexture.source,J$d=J$F.mainContext,J$e=J$a.uploadedValue;if(null!=J$e[0])return J$d.activeTexture(J$k._TEXTURES[J$e[0]]),J$c?J$G.bindTexture(J$d,34067,J$c):J$G.bindTexture(J$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return J$e[0]=this._curActTexIndex,J$d.uniform1i(J$a.location,this._curActTexIndex),J$d.activeTexture(J$k._TEXTURES[this._curActTexIndex]),J$c?J$G.bindTexture(J$d,34067,J$c):J$G.bindTexture(J$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},J$b._noSetValue=function(J$a){console.log("no....:"+J$a.name)},J$b.bind=function(){return J$c.activeShader=this,(J$c.bindShader=this).activeResource(),J$G.UseProgram(this._program)},J$b.uploadAttributes=function(J$a,J$b){for(var J$c,J$d,J$e=0,J$f=0,J$g=this._attributeParamsMap.length;J$f<J$g;J$f+=2)J$d=this._attributeParamsMap[J$f+1],null!=(J$c=J$a[this._attributeParamsMap[J$f]])&&(J$b&&J$b[J$d.name]&&J$b[J$d.name].bind(),J$e+=J$d.fun.call(this,J$d,J$c));J$A.shaderCall+=J$e},J$b.uploadAttributesX=function(J$a,J$b){for(var J$c,J$d,J$e=0,J$f=0,J$g=this._attributeParamsMap.length;J$f<J$g;J$f+=2)J$d=this._attributeParamsMap[J$f+1],null!=(J$c=J$a[this._attributeParamsMap[J$f]])&&(J$b._bind(),J$e+=J$d.fun.call(this,J$d,J$c));J$A.shaderCall+=J$e},J$b.uploadSceneUniforms=function(J$a){for(var J$b,J$c,J$d=0,J$e=0,J$f=this._sceneUniformParamsMap.length;J$e<J$f;J$e+=2)J$c=this._sceneUniformParamsMap[J$e+1],null!=(J$b=J$a[this._sceneUniformParamsMap[J$e]])&&(J$d+=J$c.fun.call(this,J$c,J$b));J$A.shaderCall+=J$d},J$b.uploadCameraUniforms=function(J$a){for(var J$b,J$c,J$d=0,J$e=0,J$f=this._cameraUniformParamsMap.length;J$e<J$f;J$e+=2)J$c=this._cameraUniformParamsMap[J$e+1],null!=(J$b=J$a[this._cameraUniformParamsMap[J$e]])&&(J$d+=J$c.fun.call(this,J$c,J$b));J$A.shaderCall+=J$d},J$b.uploadSpriteUniforms=function(J$a){for(var J$b,J$c,J$d=0,J$e=0,J$f=this._spriteUniformParamsMap.length;J$e<J$f;J$e+=2)J$c=this._spriteUniformParamsMap[J$e+1],null!=(J$b=J$a[this._spriteUniformParamsMap[J$e]])&&(J$d+=J$c.fun.call(this,J$c,J$b));J$A.shaderCall+=J$d},J$b.uploadMaterialUniforms=function(J$a){for(var J$b,J$c,J$d=0,J$e=0,J$f=this._materialUniformParamsMap.length;J$e<J$f;J$e+=2)J$c=this._materialUniformParamsMap[J$e+1],null!=(J$b=J$a[this._materialUniformParamsMap[J$e]])&&(J$d+=J$c.fun.call(this,J$c,J$b));J$A.shaderCall+=J$d},J$b.uploadRenderElementUniforms=function(J$a){for(var J$b,J$c,J$d=0,J$e=0,J$f=this._renderElementUniformParamsMap.length;J$e<J$f;J$e+=2)J$c=this._renderElementUniformParamsMap[J$e+1],null!=(J$b=J$a[this._renderElementUniformParamsMap[J$e]])&&(J$d+=J$c.fun.call(this,J$c,J$b));J$A.shaderCall+=J$d},J$k.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return new J$k(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j)},J$k.addInclude=function(J$a,J$b){J$v.addInclude(J$a,J$b)},J$k._createShader=function(J$a,J$b,J$c){var J$d=J$a.createShader(J$c);if(J$a.shaderSource(J$d,J$b),J$a.compileShader(J$d),J$Ab.debugMode&&!J$a.getShaderParameter(J$d,35713))throw J$a.getShaderInfoLog(J$d);return J$d},J$k.PERIOD_RENDERELEMENT=0,J$k.PERIOD_MATERIAL=1,J$k.PERIOD_SPRITE=2,J$k.PERIOD_CAMERA=3,J$k.PERIOD_SCENE=4,J$k._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],J$k._count=0,J$k._preCompile=!1,J$k.extCompileFunc=null,J$k.extCompileObj=null,J$l(J$k,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new J$B}]),J$k}(),J$Mb=function(J$h){function J$i(){this._transformUV=null,J$i.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new J$gb(.6,.6,.6)),this._setColor(10,new J$gb(1,1,1)),this._setColor(11,new J$hb(1,1,1,8)),this._setColor(12,new J$gb(1,1,1)),this._setColor(7,new J$hb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new J$hb(1,1,0,0)),this.renderMode=1}J$n(J$i,"laya.d3.core.material.StandardMaterial",J$h);var J$a=J$i.prototype;return J$a.disableLight=function(){this._addDisablePublicShaderDefine(J$Ab.SHADERDEFINE_POINTLIGHT|J$Ab.SHADERDEFINE_SPOTLIGHT|J$Ab.SHADERDEFINE_DIRECTIONLIGHT)},J$a.disableFog=function(){this._addDisablePublicShaderDefine(J$Ab.SHADERDEFINE_FOG)},J$a.onAsynLoaded=function(J$a,J$b,J$c){var J$d=J$b[0];if(J$d.version)J$h.prototype.onAsynLoaded.call(this,J$a,J$b,J$c);else{var J$e=J$b[1],J$f=J$d.props;for(var J$g in J$f)this[J$g]=J$f[J$g];J$i._parseStandardMaterial(J$e,this,J$d),this._endLoaded()}},J$a.cloneTo=function(J$a){J$h.prototype.cloneTo.call(this,J$a);var J$b=J$a;this._transformUV&&(J$b._transformUV=this._transformUV.clone())},J$o(0,J$a,"ambientColor",function(){return this._getColor(9)},function(J$a){this._setColor(9,J$a)}),J$o(0,J$a,"ambientTexture",function(){return this._getTexture(5)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,J$a)}),J$o(0,J$a,"renderMode",null,function(J$a){switch(J$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(J$i.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(J$a)}),J$o(0,J$a,"reflectColor",function(){return this._getColor(12)},function(J$a){this._setColor(12,J$a)}),J$o(0,J$a,"tilingOffset",function(){return this._getColor(15)},function(J$a){if(J$a){var J$b=J$a.elements;1!=J$b[0]||1!=J$b[1]||0!=J$b[2]||0!=J$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,J$a)}),J$o(0,J$a,"albedo",function(){return this._getColor(7)},function(J$a){this._setColor(7,J$a)}),J$o(0,J$a,"diffuseColor",function(){return this._getColor(10)},function(J$a){this._setColor(10,J$a)}),J$o(0,J$a,"albedoColor",function(){return this._getColor(7)},function(J$a){this._setColor(7,J$a)}),J$o(0,J$a,"specularColor",function(){return this._getColor(11)},function(J$a){this._setColor(11,J$a)}),J$o(0,J$a,"diffuseTexture",function(){return this._getTexture(1)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,J$a)}),J$o(0,J$a,"normalTexture",function(){return this._getTexture(2)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,J$a)}),J$o(0,J$a,"specularTexture",function(){return this._getTexture(3)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,J$a)}),J$o(0,J$a,"emissiveTexture",function(){return this._getTexture(4)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,J$a)}),J$o(0,J$a,"reflectTexture",function(){return this._getTexture(6)},function(J$a){J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,J$a)}),J$o(0,J$a,"transformUV",function(){return this._transformUV},function(J$a){this._transformUV=J$a,this._setMatrix4x4(13,J$a.matrix),J$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,J$a.matrix.elements,0)}),J$i.__init__=function(){J$i.SHADERDEFINE_DIFFUSEMAP=J$i.shaderDefines.registerDefine("DIFFUSEMAP"),J$i.SHADERDEFINE_NORMALMAP=J$i.shaderDefines.registerDefine("NORMALMAP"),J$i.SHADERDEFINE_SPECULARMAP=J$i.shaderDefines.registerDefine("SPECULARMAP"),J$i.SHADERDEFINE_EMISSIVEMAP=J$i.shaderDefines.registerDefine("EMISSIVEMAP"),J$i.SHADERDEFINE_AMBIENTMAP=J$i.shaderDefines.registerDefine("AMBIENTMAP"),J$i.SHADERDEFINE_REFLECTMAP=J$i.shaderDefines.registerDefine("REFLECTMAP"),J$i.SHADERDEFINE_UVTRANSFORM=J$i.shaderDefines.registerDefine("UVTRANSFORM"),J$i.SHADERDEFINE_TILINGOFFSET=J$i.shaderDefines.registerDefine("TILINGOFFSET"),J$i.SHADERDEFINE_ADDTIVEFOG=J$i.shaderDefines.registerDefine("ADDTIVEFOG")},J$i.load=function(J$a){return J$x.loader.create(J$a,null,null,J$i)},J$i._parseStandardMaterial=function(J$a,J$b,J$c){var J$d=J$c.customProps,J$e=J$d.ambientColor;J$b.ambientColor=new J$gb(J$e[0],J$e[1],J$e[2]);var J$f=J$d.diffuseColor;J$b.diffuseColor=new J$gb(J$f[0],J$f[1],J$f[2]);var J$g=J$d.specularColor;J$b.specularColor=new J$hb(J$g[0],J$g[1],J$g[2],J$g[3]);var J$h=J$d.reflectColor;J$b.reflectColor=new J$gb(J$h[0],J$h[1],J$h[2]);var J$i=J$d.albedoColor;J$i&&(J$b.albedo=new J$hb(J$i[0],J$i[1],J$i[2],J$i[3]));var J$j=J$d.diffuseTexture.texture2D;J$j&&(J$b.diffuseTexture=J$r.getRes(J$a[J$j]));var J$k=J$d.normalTexture.texture2D;J$k&&(J$b.normalTexture=J$r.getRes(J$a[J$k]));var J$l=J$d.specularTexture.texture2D;J$l&&(J$b.specularTexture=J$r.getRes(J$a[J$l]));var J$m=J$d.emissiveTexture.texture2D;J$m&&(J$b.emissiveTexture=J$r.getRes(J$a[J$m]));var J$n=J$d.ambientTexture.texture2D;J$n&&(J$b.ambientTexture=J$r.getRes(J$a[J$n]));var J$o=J$d.reflectTexture.texture2D;J$o&&(J$b.reflectTexture=J$r.getRes(J$a[J$o]))},J$i.RENDERMODE_OPAQUE=1,J$i.RENDERMODE_OPAQUEDOUBLEFACE=2,J$i.RENDERMODE_CUTOUT=3,J$i.RENDERMODE_CUTOUTDOUBLEFACE=4,J$i.RENDERMODE_TRANSPARENT=13,J$i.RENDERMODE_TRANSPARENTDOUBLEFACE=14,J$i.RENDERMODE_ADDTIVE=15,J$i.RENDERMODE_ADDTIVEDOUBLEFACE=16,J$i.RENDERMODE_DEPTHREAD_TRANSPARENT=5,J$i.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,J$i.RENDERMODE_DEPTHREAD_ADDTIVE=7,J$i.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,J$i.RENDERMODE_NONDEPTH_TRANSPARENT=9,J$i.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,J$i.RENDERMODE_NONDEPTH_ADDTIVE=11,J$i.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,J$i.SHADERDEFINE_DIFFUSEMAP=0,J$i.SHADERDEFINE_NORMALMAP=0,J$i.SHADERDEFINE_SPECULARMAP=0,J$i.SHADERDEFINE_EMISSIVEMAP=0,J$i.SHADERDEFINE_AMBIENTMAP=0,J$i.SHADERDEFINE_REFLECTMAP=0,J$i.SHADERDEFINE_UVTRANSFORM=0,J$i.SHADERDEFINE_TILINGOFFSET=0,J$i.SHADERDEFINE_ADDTIVEFOG=0,J$i.DIFFUSETEXTURE=1,J$i.NORMALTEXTURE=2,J$i.SPECULARTEXTURE=3,J$i.EMISSIVETEXTURE=4,J$i.AMBIENTTEXTURE=5,J$i.REFLECTTEXTURE=6,J$i.ALBEDO=7,J$i.UVANIAGE=8,J$i.MATERIALAMBIENT=9,J$i.MATERIALDIFFUSE=10,J$i.MATERIALSPECULAR=11,J$i.MATERIALREFLECT=12,J$i.UVMATRIX=13,J$i.UVAGE=14,J$i.TILINGOFFSET=15,J$l(J$i,["defaultMaterial",function(){var J$a=new J$i;return J$a.lock=!0,this.defaultMaterial=J$a},"shaderDefines",function(){return this.shaderDefines=new J$kb(J$Eb.shaderDefines)}]),J$i}(J$Eb),J$Nb=function(J$a){function J$g(J$a,J$b,J$c,J$d,J$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===J$c&&(J$c=35044),void 0===J$d&&(J$d=!1),J$g.__super.call(this),this._indexType=J$a,this._indexCount=J$b,this._bufferUsage=J$c,this._bufferType=34963,this._canRead=J$d;var J$f;if("ushort"==J$a)this._indexTypeByteCount=2;else{if("ubyte"!=J$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}J$f=this._indexTypeByteCount*J$b,this._byteLength=J$f,this._bind(),J$h._gl.bufferData(this._bufferType,J$f,this._bufferUsage),this.uri=J$e,J$d?("ushort"==J$a?this._buffer=new Uint16Array(J$b):"ubyte"==J$a&&(this._buffer=new Uint8Array(J$b)),this.memorySize=2*J$f):this.memorySize=J$f}J$n(J$g,"laya.d3.graphics.IndexBuffer3D",J$a);var J$b=J$g.prototype;return J$b.setData=function(J$a,J$b,J$c,J$d){void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=4294967295);var J$e=0;if("ushort"==this._indexType?(J$e=2,0===J$c&&4294967295===J$d||(J$a=new Uint16Array(J$a.buffer,J$c*J$e,J$d))):"ubyte"==this._indexType&&(J$e=1,0===J$c&&4294967295===J$d||(J$a=new Uint8Array(J$a.buffer,J$c*J$e,J$d))),this._bind(),J$h._gl.bufferSubData(this._bufferType,J$b*J$e,J$a),this._canRead)if(0!==J$b||0!==J$c||4294967295!==J$d){var J$f=this._buffer.length-J$b;J$f<J$d&&(J$d=J$f);for(var J$g=0;J$g<J$d;J$g++)this._buffer[J$b+J$g]=J$a[J$g]}else this._buffer=J$a},J$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},J$b.disposeResource=function(){J$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},J$o(0,J$b,"indexType",function(){return this._indexType}),J$o(0,J$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),J$o(0,J$b,"indexCount",function(){return this._indexCount}),J$o(0,J$b,"canRead",function(){return this._canRead}),J$g.INDEXTYPE_UBYTE="ubyte",J$g.INDEXTYPE_USHORT="ushort",J$g.create=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$c&&(J$c=35044),void 0===J$d&&(J$d=!1),new J$g(J$a,J$b,J$c,J$d,J$e)},J$g}(J$h),J$Ob=function(J$f){function J$g(J$a,J$b,J$c,J$d,J$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===J$d&&(J$d=!1),J$g.__super.call(this),this._vertexDeclaration=J$a,this._vertexCount=J$b,this._bufferUsage=J$c,this._bufferType=34962,this._canRead=J$d,this.uri=J$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*J$b,this._bind(),J$h._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),J$d&&(this._buffer=new Float32Array(this._byteLength/4))}J$n(J$g,"laya.d3.graphics.VertexBuffer3D",J$f);var J$a=J$g.prototype;return J$a.bindWithIndexBuffer=function(J$a){J$a&&J$a._bind(),this._bind()},J$a.setData=function(J$a,J$b,J$c,J$d){if(void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=4294967295),0===J$c&&4294967295===J$d||(J$a=new Float32Array(J$a.buffer,4*J$c,J$d)),this._bind(),J$h._gl.bufferSubData(this._bufferType,4*J$b,J$a),this._canRead)if(0!==J$b||0!==J$c||4294967295!==J$d){var J$e=this._buffer.length-J$b;J$e<J$d&&(J$d=J$e);for(var J$f=0;J$f<J$d;J$f++)this._buffer[J$b+J$f]=J$a[J$f]}else this._buffer=J$a},J$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},J$a.disposeResource=function(){for(var J$a=J$F.mainContext,J$b=this._vertexDeclaration.getVertexElements(),J$c=J$h._enableAtributes,J$d=0,J$e=J$b.length;J$d<J$e;J$d++)J$c[J$d]===this._glBuffer&&(J$a.disableVertexAttribArray(J$d),J$c[J$d]=null);J$f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},J$o(0,J$a,"vertexDeclaration",function(){return this._vertexDeclaration}),J$o(0,J$a,"vertexCount",function(){return this._vertexCount}),J$o(0,J$a,"canRead",function(){return this._canRead}),J$g.create=function(J$a,J$b,J$c,J$d,J$e){return void 0===J$c&&(J$c=35044),void 0===J$d&&(J$d=!1),new J$g(J$a,J$b,J$c,J$d,J$e)},J$g}(J$h),J$Pb=function(J$a){function J$v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,J$v.__super.call(this),this._type=3553}J$n(J$v,"laya.d3.resource.DataTexture2D",J$Fb);var J$b=J$v.prototype;return J$b.genDebugMipmaps=function(){var J$a=[];return J$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),J$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),J$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),J$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),J$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),J$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),J$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),J$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),J$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),J$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),J$a},J$b._onTextureLoaded=function(J$a){},J$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var J$a=J$F.mainContext,J$b=this._source=J$a.createTexture(),J$c=this._width,J$d=this._height,J$e=J$G.curBindTexTarget,J$f=J$G.curBindTexValue,J$g=!1;if(J$G.bindTexture(J$a,this._type,J$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var J$h=0;J$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var J$i=0;J$i<this._mipmaps.length;J$i++){if(this._mipmaps[J$i].byteLength!=J$j*J$k*4)throw"mipmap size error  level:"+J$i;J$a.texSubImage2D(this._type,0,J$v.simLodRect[J$h++],J$v.simLodRect[J$h++],J$v.simLodRect[J$h++],J$v.simLodRect[J$h++],6408,5121,new Uint8Array(this._mipmaps[J$i]))}this.minFifter=9729,this.magFifter=9729}else{var J$j=this._width,J$k=this._height;for(J$h=0,J$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),J$i=0;J$i<this._mipmaps.length;J$i++){if(this._mipmaps[J$i].byteLength!=J$j*J$k*4)throw"mipmap size error  level:"+J$i;J$a.texImage2D(this._type,J$i,6408,J$j,J$k,0,6408,5121,new Uint8Array(this._mipmaps[J$i])),(J$j/=2)<1&&(J$j=1),(J$k/=2)<1&&(J$k=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&J$a.pixelStorei(J$a.UNPACK_ALIGNMENT,1),J$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var J$l=0,J$m=!1,J$n=!1;this._buffer.byteLength==4*J$c*J$d?(J$l=6408,J$m=!0):this._buffer.byteLength==3*J$c*J$d?(J$l=6407,J$n=!0):J$l=this._format,J$m||J$n?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),J$n&&J$a.pixelStorei(J$a.UNPACK_ALIGNMENT,1),J$a.texImage2D(this._type,0,J$l,J$c,J$d,0,J$l,5121,this._buffer)):J$a&&J$l==J$a.ALPHA?(J$a.texImage2D(3553,0,J$l,J$c,J$d,0,J$l,J$a.UNSIGNED_BYTE,this._buffer),J$g=!0):0!=J$l&&(J$a.compressedTexImage2D(3553,0,J$l,J$c,J$d,0,this._buffer),J$g=!0)}var J$o=this._minFifter,J$p=this._magFifter,J$q=0==this._wrapModeU?10497:33071,J$r=0==this._wrapModeV?10497:33071,J$u=J$w.isPOT(J$c,J$d);J$u?(this._mipmap||this._mipmaps?-1!==J$o||(J$o=9987):-1!==J$o||(J$o=9729),-1!==J$p||(J$p=9729),J$a.texParameteri(this._type,10241,J$o),J$a.texParameteri(this._type,10240,J$p),J$a.texParameteri(this._type,10242,J$q),J$a.texParameteri(this._type,10243,J$r),this._mipmap&&J$a.generateMipmap(this._type)):(-1!==J$o||(J$o=9729),-1!==J$p||(J$p=9729),J$a.texParameteri(this._type,10241,J$o),J$a.texParameteri(this._type,10240,J$p),J$a.texParameteri(this._type,10242,33071),J$a.texParameteri(this._type,10243,33071)),J$e&&J$f&&J$G.bindTexture(J$a,J$e,J$f),this.memorySize=J$g?this._buffer.length:J$u?J$c*J$d*4*(1+1/3):J$c*J$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},J$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},J$b.onAsynLoaded=function(J$a,J$b,J$c){var J$d;J$c&&(J$d=J$c[0].call(this,J$b)),J$d&&(this._width=J$d.width,this._height=J$d.height,this._buffer=J$d.data),this._src=J$a,this._size=new J$pb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},J$b.getPixels=function(){return new Uint8Array(this._buffer)},J$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(J$F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},J$o(0,J$b,"src",function(){return this._src}),J$v.create=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){if(void 0===J$d&&(J$d=9729),void 0===J$e&&(J$e=9729),void 0===J$f&&(J$f=!0),!J$a||J$a.byteLength<J$b*J$c*4)throw"DataTexture2D create error";var J$h=new J$v;return J$h.uri=J$g,J$h._buffer=J$a,J$h._width=J$b,J$h._height=J$c,J$h._mipmap=J$f,J$h._magFifter=J$d,J$h._minFifter=J$e,J$h._size=new J$pb(J$h._width,J$h._height),J$h._conchTexture?alert("怎么给runtime传递datatexture数据"):J$h.activeResource(),J$h},J$v.load=function(J$a,J$b,J$c,J$d,J$e){if(void 0===J$b&&(J$b=0),void 0===J$c&&(J$c=0),void 0===J$d&&(J$d=9729),void 0===J$e&&(J$e=9729),"mipmaps"===J$C.getFileExtension(J$a)){var J$f=J$x.loader.create(J$a,null,null,J$v,[function(J$a){this._mipmaps=[];var J$b=new Uint32Array(J$a);this._width=J$b[0];var J$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,J$c=1024),this._width!=J$c)throw"现在只支持512x256的环境贴图。当前的是"+J$b[0];this._height=J$b[1];for(var J$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,J$e=this._height,J$f=8;;){var J$g=J$d*J$e*4;if(J$f+J$g>J$a.byteLength)throw"load mipmaps data size error ";var J$h=new Uint8Array(J$a,J$f,J$g);if(this._mipmaps.push(J$h),J$f+=J$g,1==J$d&&1==J$e)break;(J$d/=2)<1&&(J$d=1),(J$e/=2)<1&&(J$e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){J$f.simLodInfo=new Float32Array(40);for(var J$g=0;J$g<J$f.simLodInfo.length;)J$f.simLodInfo[J$g]=(J$v.simLodRect[J$g]+.5)/1024,J$g++,J$f.simLodInfo[J$g]=(J$v.simLodRect[J$g]+.5)/256,J$g++,J$f.simLodInfo[J$g]=Math.max(J$v.simLodRect[J$g]-1,.1)/1024,J$g++,J$f.simLodInfo[J$g]=Math.max(J$v.simLodRect[J$g]-1.5,.1)/256,J$g++}return J$f}if("number"==typeof J$b)return J$x.loader.create(J$a,null,null,J$v,[function(J$a){return this._width=J$b,this._height=J$c,this._buffer=J$a,null}]);if("function"==typeof J$b)return J$x.loader.create(J$a,null,null,J$v,[J$b]);throw new Error("unknown params.")},J$v.lodasatlas=!1,J$l(J$v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),J$v}(),J$Qb=function(J$a){function J$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,J$b.__super.call(this)}J$n(J$b,"laya.d3.resource.models.PrimitiveMesh",J$Gb);var J$c=J$b.prototype;return J$x.imps(J$c,{"laya.d3.core.render.IRenderable":!0}),J$c._getVertexBuffer=function(J$a){return void 0===J$a&&(J$a=0),0===J$a?this._vertexBuffer:null},J$c._getVertexBuffers=function(){return null},J$c._getIndexBuffer=function(){return this._indexBuffer},J$c._getPositions=function(){var J$a,J$b=[],J$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),J$d=0;for(J$d=0;J$d<J$c.length;J$d++){var J$e=J$c[J$d];if("vector3"===J$e.elementFormat&&0===J$e.elementUsage){J$a=J$e;break}}var J$f=this._vertexBuffer.getData();for(J$d=0;J$d<J$f.length;J$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var J$g=J$d+J$a.offset/4,J$h=new J$gb(J$f[J$g+0],J$f[J$g+1],J$f[J$g+2]);J$b.push(J$h)}return J$b},J$c.getRenderElement=function(J$a){return this},J$c.getRenderElementsCount=function(){return 1},J$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},J$c._beforeRender=function(J$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},J$c._render=function(J$a){J$F.mainContext.drawElements(4,this._numberIndices,5123,0),J$A.drawCall++,J$A.trianglesFaces+=this._numberIndices/3},J$o(0,J$c,"_vertexBufferCount",function(){return 1}),J$o(0,J$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),J$b}(),J$Rb=function(J$a){function J$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,J$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}J$n(J$b,"laya.d3.resource.models.Mesh",J$Gb);var J$c=J$b.prototype;return J$c._getPositions=function(){var J$a,J$b,J$c,J$d,J$e,J$f=[],J$g=0,J$h=0,J$i=0;if(0!==this._vertexBuffers.length){var J$j=this._vertexBuffers.length;for(J$g=0;J$g<J$j;J$g++){for(J$c=(J$a=this._vertexBuffers[J$g]).vertexDeclaration.getVertexElements(),J$h=0;J$h<J$c.length;J$h++)if("vector3"===(J$d=J$c[J$h]).elementFormat&&0===J$d.elementUsage){J$b=J$d;break}for(J$e=J$a.getData(),J$h=0;J$h<J$e.length;J$h+=J$a.vertexDeclaration.vertexStride/4)J$i=J$h+J$b.offset/4,J$f.push(new J$gb(J$e[J$i+0],J$e[J$i+1],J$e[J$i+2]))}}else{var J$k=this._subMeshes.length;for(J$g=0;J$g<J$k;J$g++){for(J$c=(J$a=this._subMeshes[J$g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),J$h=0;J$h<J$c.length;J$h++)if("vector3"===(J$d=J$c[J$h]).elementFormat&&0===J$d.elementUsage){J$b=J$d;break}for(J$e=J$a.getData(),J$h=0;J$h<J$e.length;J$h+=J$a.vertexDeclaration.vertexStride/4)J$i=J$h+J$b.offset/4,J$f.push(new J$gb(J$e[J$i+0],J$e[J$i+1],J$e[J$i+2]))}}return J$f},J$c._setSubMeshes=function(J$a){this._subMeshes=J$a,this._subMeshCount=J$a.length;for(var J$b=0;J$b<this._subMeshCount;J$b++)J$a[J$b]._indexInMesh=J$b;this._positions=this._getPositions(),this._generateBoundingObject()},J$c.onAsynLoaded=function(J$a,J$b,J$c){var J$d=J$b[0],J$e=J$b[1];J$Ya.read(J$d,this,this._materials,this._subMeshes,J$e),this.completeCreate(),this._endLoaded()},J$c.getSubMesh=function(J$a){return this._subMeshes[J$a]},J$c.getSubMeshCount=function(){return this._subMeshes.length},J$c.getRenderElementsCount=function(){return this._subMeshes.length},J$c.getRenderElement=function(J$a){return this._subMeshes[J$a]},J$c.disposeResource=function(){for(var J$a=0;J$a<this._subMeshes.length;J$a++)this._subMeshes[J$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},J$o(0,J$c,"materials",function(){return this._materials.slice()}),J$o(0,J$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),J$b.load=function(J$a){return J$x.loader.create(J$a,null,null,J$b)},J$b}(),J$Sb=(function(J$a){function J$j(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===J$c&&(J$c=6408),void 0===J$d&&(J$d=5121),void 0===J$e&&(J$e=33189),void 0===J$f&&(J$f=!1),void 0===J$g&&(J$g=!1),void 0===J$h&&(J$h=-1),void 0===J$i&&(J$i=-1),J$j.__super.call(this),this._type=3553,this._width=J$a,this._height=J$b,this._size=new J$pb(J$a,J$b),this._surfaceFormat=J$c,this._surfaceType=J$d,this._depthStencilFormat=J$e,J$p.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=J$f,this._repeat=J$g,this._minFifter=J$h,this._magFifter=J$i,this.activeResource(),this._alreadyResolved=!0}J$n(J$j,"laya.d3.resource.RenderTexture",J$Fb);var J$b=J$j.prototype;J$b.recreateResource=function(){var J$a=J$F.mainContext;this._frameBuffer=J$a.createFramebuffer(),this._source=J$a.createTexture();var J$b=J$G.curBindTexTarget,J$c=J$G.curBindTexValue;J$G.bindTexture(J$a,this._type,this._source),J$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var J$d=this._minFifter,J$e=this._magFifter,J$f=this._repeat?10497:33071;if(J$w.isPOT(this._width,this._height)?(this._mipmap?-1!==J$d||(J$d=9987):-1!==J$d||(J$d=9729),-1!==J$e||(J$e=9729),J$a.texParameteri(this._type,10241,J$d),J$a.texParameteri(this._type,10240,J$e),J$a.texParameteri(this._type,10242,J$f),J$a.texParameteri(this._type,10243,J$f),this._mipmap&&J$a.generateMipmap(this._type)):(-1!==J$d||(J$d=9729),-1!==J$e||(J$e=9729),J$a.texParameteri(this._type,10241,J$d),J$a.texParameteri(this._type,10240,J$e),J$a.texParameteri(this._type,10242,33071),J$a.texParameteri(this._type,10243,33071)),J$b&&J$c&&J$G.bindTexture(J$a,J$b,J$c),J$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=J$a.createRenderbuffer(),J$a.bindRenderbuffer(36161,this._depthStencilBuffer),J$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),J$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:J$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:J$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:J$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}J$a.framebufferTexture2D(36160,36064,3553,this._source,0),J$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},J$b.start=function(){J$F.mainContext.bindFramebuffer(36160,this.frameBuffer),(J$j._currentRenderTarget=this)._alreadyResolved=!1},J$b.end=function(){J$F.mainContext.bindFramebuffer(36160,null),J$j._currentRenderTarget=null,this._alreadyResolved=!0},J$b.getData=function(J$a,J$b,J$c,J$d){var J$e=J$F.mainContext;if(J$e.bindFramebuffer(36160,this._frameBuffer),!(36053===J$e.checkFramebufferStatus(36160)))return J$e.bindFramebuffer(36160,null),null;var J$f=new Uint8Array(this._width*this._height*4);return J$e.readPixels(J$a,J$b,J$c,J$d,this._surfaceFormat,this._surfaceType,J$f),J$e.bindFramebuffer(36160,null),J$f},J$b.disposeResource=function(){if(this._frameBuffer){var J$a=J$F.mainContext;J$a.deleteTexture(this._source),J$a.deleteFramebuffer(this._frameBuffer),J$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},J$o(0,J$b,"surfaceFormat",function(){return this._surfaceFormat}),J$o(0,J$b,"surfaceType",function(){return this._surfaceType}),J$o(0,J$b,"depthStencilFormat",function(){return this._depthStencilFormat}),J$o(0,J$b,"source",function(){return this._alreadyResolved?J$x.superGet(J$Fb,this,"source"):null}),J$o(0,J$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),J$o(0,J$b,"frameBuffer",function(){return this._frameBuffer}),J$j._currentRenderTarget=null}(),function(J$a){function J$b(J$a){this._color=null,this._pixels=null,J$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new J$pb(this.width,this.height),this._color=J$a,this._pixels=new Uint8Array([255*J$a.x,255*J$a.y,255*J$a.z,255*J$a.w]),this.uri="SolidColorTexture2D_"+this.id}J$n(J$b,"laya.d3.resource.SolidColorTexture2D",J$Fb);var J$c=J$b.prototype;return J$c._createWebGlTexture=function(){var J$a=J$F.mainContext,J$b=this._source=J$a.createTexture(),J$c=this._width,J$d=this._height,J$e=J$G.curBindTexTarget,J$f=J$G.curBindTexValue;J$G.bindTexture(J$a,this._type,J$b),J$a.texImage2D(this._type,0,6408,J$c,J$d,0,6408,5121,this._pixels);var J$g=this._minFifter,J$h=this._magFifter,J$i=this._repeat?10497:33071,J$j=J$w.isPOT(J$c,J$d);J$j?(this._mipmap?-1!==J$g||(J$g=9987):-1!==J$g||(J$g=9729),-1!==J$h||(J$h=9729),J$a.texParameteri(this._type,10241,J$g),J$a.texParameteri(this._type,10240,J$h),J$a.texParameteri(this._type,10242,J$i),J$a.texParameteri(this._type,10243,J$i),this._mipmap&&J$a.generateMipmap(this._type)):(-1!==J$g||(J$g=9729),-1!==J$h||(J$h=9729),J$a.texParameteri(this._type,10241,J$g),J$a.texParameteri(this._type,10240,J$h),J$a.texParameteri(this._type,10242,33071),J$a.texParameteri(this._type,10243,33071)),J$e&&J$f&&J$G.bindTexture(J$a,J$e,J$f),this.memorySize=J$j?J$c*J$d*4*(1+1/3):J$c*J$d*4},J$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},J$c.disposeResource=function(){this._source&&(J$F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},J$l(J$b,["magentaTexture",function(){var J$a=new J$b(new J$hb(1,0,1,1));return J$a.lock=!0,this.magentaTexture=J$a},"grayTexture",function(){var J$a=new J$b(new J$hb(.5,.5,.5,1));return J$a.lock=!0,this.grayTexture=J$a}]),J$b}()),J$Tb=function(J$a){function J$e(J$a,J$b,J$c,J$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===J$a&&(J$a=!1),void 0===J$b&&(J$b=!0),void 0===J$c&&(J$c=6408),void 0===J$d&&(J$d=!0),J$e.__super.call(this),this._type=3553,this._repeat=J$b,this._canRead=J$a,this._format=J$c,this._mipmap=J$d}J$n(J$e,"laya.d3.resource.Texture2D",J$Fb);var J$b=J$e.prototype;return J$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var J$a=J$F.mainContext,J$b=this._source=J$a.createTexture(),J$c=this._width,J$d=this._height,J$e=J$G.curBindTexTarget,J$f=J$G.curBindTexValue;switch(J$G.bindTexture(J$a,this._type,J$b),this._format){case 6407:case 6408:this._canRead?J$a.texImage2D(this._type,0,this._format,J$c,J$d,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?J$a.texImage2D(this._type,0,this._image._format,J$c,J$d,0,this._image._format,5121,this._image.atlasSource):J$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case J$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:J$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var J$g=this._minFifter,J$h=this._magFifter,J$i=this._repeat?10497:33071,J$j=0==this._wrapModeU?10497:33071,J$k=0==this._wrapModeV?10497:33071,J$l=J$w.isPOT(J$c,J$d);J$l?(this._mipmap?-1!==J$g||(J$g=9987):-1!==J$g||(J$g=9729),-1!==J$h||(J$h=9729),J$a.texParameteri(this._type,10241,J$g),J$a.texParameteri(this._type,10240,J$h),J$a.texParameteri(this._type,10242,J$i),J$a.texParameteri(this._type,10243,J$i),J$a.texParameteri(this._type,10242,J$j),J$a.texParameteri(this._type,10243,J$k),this._mipmap&&J$a.generateMipmap(this._type)):(-1!==J$g||(J$g=9729),-1!==J$h||(J$h=9729),J$a.texParameteri(this._type,10241,J$g),J$a.texParameteri(this._type,10240,J$h),J$a.texParameteri(this._type,10242,33071),J$a.texParameteri(this._type,10243,33071)),J$e&&J$f&&J$G.bindTexture(J$a,J$e,J$f),this._image.onload=null,this._image=null,this.memorySize=J$l?J$c*J$d*4*(1+1/3):J$c*J$d*4},J$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},J$b.onAsynLoaded=function(J$a,J$b,J$c){if(J$c){var J$d=J$c[0];void 0!==J$d&&(this._canRead=J$d);var J$e=J$c[1];void 0!==J$e&&(this._repeat=J$e);var J$f=J$c[2];void 0!==J$f&&(this._format=J$f);var J$g=J$c[3];void 0!==J$g&&(this._mipmap=J$g);var J$h=J$c.wrapModeU;void 0!==J$h&&(this._wrapModeU=J$h);var J$i=J$c.wrapModeV;void 0!==J$i&&(this._wrapModeV=J$i)}switch(this._format){case 6407:case 6408:var J$j=(this._image=J$b).width,J$k=J$b.height;this._width=J$j,this._height=J$k,this._size=new J$pb(J$j,J$k),this._canRead&&(J$p.isConchApp?J$b instanceof J$m.HTMLElement&&(this._pixels=new Uint8Array(J$b.getImageData(0,0,J$j,J$k))):(J$H.canvas.size(J$j,J$k),J$H.canvas.clear(),J$H.context.drawImage(J$b,0,0,J$j,J$k),this._pixels=new Uint8Array(J$H.context.getImageData(0,0,J$j,J$k).data.buffer)));break;case J$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var J$l=new J$y(J$b);J$l.readUTFBytes(4),J$l.readUTFBytes(2),J$l.getInt16();J$l.endian="bigEndian",this._width=J$l.getInt16(),this._height=J$l.getInt16(),this._size=new J$pb(this._width,this._height);J$l.getInt16(),J$l.getInt16();this._image=new Uint8Array(J$b,J$l.pos)}this.recreateResource(),this._endLoaded()},J$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},J$b.disposeResource=function(){this._source&&(J$F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},J$o(0,J$b,"_src",function(){return this.url}),J$o(0,J$b,"src",function(){return this.url}),J$e.load=function(J$a){return J$x.loader.create(J$a,null,null,J$e)},J$e}(),J$Ub=function(J$b){function J$c(J$a,J$b){J$c.__super.call(this),void 0===J$a&&(J$a=.3),void 0===J$b&&(J$b=1e3),this._tempVector3=new J$gb,this._position=new J$gb,this._up=new J$gb,this._forward=new J$gb,this._right=new J$gb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=J$pb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=J$a,this._farPlane=J$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),J$x.stage.on("resize",this,this._onScreenSizeChanged)}J$n(J$c,"laya.d3.core.BaseCamera",J$b);var J$a=J$c.prototype;return J$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var J$a=this.scene._cameraPool,J$b=J$a.length-1,J$c=0;J$c<J$b;J$c++)if(J$a[J$c].renderingOrder>J$a[J$b].renderingOrder){var J$d=J$a[J$c];J$a[J$c]=J$a[J$b],J$a[J$b]=J$d}},J$a._calculateProjectionMatrix=function(){},J$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},J$a._prepareCameraToRender=function(){J$I._currentCameraCullingMask=this.cullingMask;var J$a=this._shaderValues;J$a.setValue(0,this.transform.position.elements),J$a.setValue(5,this.forward.elements),J$a.setValue(6,this.up.elements)},J$a._prepareCameraViewProject=function(J$a,J$b){var J$c=this._shaderValues;J$c.setValue(1,J$a.elements),J$c.setValue(2,J$b.elements)},J$a._renderCamera=function(J$a,J$b,J$c){},J$a.addLayer=function(J$a){29!==J$a.number&&30!=J$a.number&&(this.cullingMask=this.cullingMask|J$a.mask)},J$a.removeLayer=function(J$a){29!==J$a.number&&30!=J$a.number&&(this.cullingMask=this.cullingMask&~J$a.mask)},J$a.addAllLayers=function(){this.cullingMask=2147483647},J$a.removeAllLayers=function(){this.cullingMask=0|J$I.getLayerByNumber(29).mask|J$I.getLayerByNumber(30).mask},J$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},J$a.moveForward=function(J$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=J$a,this.transform.translate(this._tempVector3)},J$a.moveRight=function(J$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=J$a,this.transform.translate(this._tempVector3)},J$a.moveVertical=function(J$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=J$a,this.transform.translate(this._tempVector3,!1)},J$a._addSelfRenderObjects=function(){var J$a=this.scene._cameraPool,J$b=J$a.length;if(0<J$b){for(var J$c=J$b-1;0<=J$c;J$c--)if(this.renderingOrder<=J$a[J$c].renderingOrder){J$a.splice(J$c+1,0,this);break}}else J$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},J$a._clearSelfRenderObjects=function(){var J$a=this.scene._cameraPool;J$a.splice(J$a.indexOf(this),1)},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,J$x.stage.off("resize",this,this._onScreenSizeChanged),J$b.prototype.destroy.call(this,J$a)},J$o(0,J$a,"sky",function(){return this._sky},function(J$a){(this._sky=J$a)._ownerCamera=this}),J$o(0,J$a,"forward",function(){var J$a=this.transform.worldMatrix.elements,J$b=this._forward.elements;return J$b[0]=-J$a[8],J$b[1]=-J$a[9],J$b[2]=-J$a[10],this._forward}),J$o(0,J$a,"position",function(){var J$a=this.transform.worldMatrix.elements,J$b=this._position.elements;return J$b[0]=J$a[12],J$b[1]=J$a[13],J$b[2]=J$a[14],this._position}),J$o(0,J$a,"renderTarget",function(){return this._renderTarget},function(J$a){null!=(this._renderTarget=J$a)&&(this._renderTargetSize=J$a.size)}),J$o(0,J$a,"up",function(){var J$a=this.transform.worldMatrix.elements,J$b=this._up.elements;return J$b[0]=J$a[4],J$b[1]=J$a[5],J$b[2]=J$a[6],this._up}),J$o(0,J$a,"right",function(){var J$a=this.transform.worldMatrix.elements,J$b=this._right.elements;return J$b[0]=J$a[0],J$b[1]=J$a[1],J$b[2]=J$a[2],this._right}),J$o(0,J$a,"renderTargetSize",function(){return this._renderTargetSize},function(J$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"fieldOfView",function(){return this._fieldOfView},function(J$a){this._fieldOfView=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"nearPlane",function(){return this._nearPlane},function(J$a){this._nearPlane=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"farPlane",function(){return this._farPlane},function(J$a){this._farPlane=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"orthographic",function(){return this._orthographic},function(J$a){this._orthographic=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(J$a){this._orthographicVerticalSize=J$a,this._calculateProjectionMatrix()}),J$o(0,J$a,"renderingOrder",function(){return this._renderingOrder},function(J$a){this._renderingOrder=J$a,this._sortCamerasByRenderingOrder()}),J$c.CAMERAPOS=0,J$c.VIEWMATRIX=1,J$c.PROJECTMATRIX=2,J$c.VPMATRIX=3,J$c.VPMATRIX_NO_TRANSLATE=4,J$c.CAMERADIRECTION=5,J$c.CAMERAUP=6,J$c.ENVIRONMENTDIFFUSE=7,J$c.ENVIRONMENTSPECULAR=8,J$c.SIMLODINFO=9,J$c.DIFFUSEIRRADMATR=10,J$c.DIFFUSEIRRADMATG=11,J$c.DIFFUSEIRRADMATB=12,J$c.HDREXPOSURE=13,J$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",J$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",J$c.CLEARFLAG_SOLIDCOLOR=0,J$c.CLEARFLAG_SKY=1,J$c.CLEARFLAG_DEPTHONLY=2,J$c.CLEARFLAG_NONE=3,J$l(J$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new J$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new J$ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new J$ab}]),J$c}(J$Kb),J$Vb=function(J$c){function J$b(J$a){this._render=null,this._geometryFilter=null,J$b.__super.call(this,J$a)}J$n(J$b,"laya.d3.core.RenderableSprite3D",J$c);var J$a=J$b.prototype;return J$a._addToInitStaticBatchManager=function(){},J$a._setBelongScene=function(J$a){J$c.prototype._setBelongScene.call(this,J$a),J$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},J$a._setUnBelongScene=function(){var J$a=this._scene._renderableSprite3Ds,J$b=J$a.indexOf(this);J$a.splice(J$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),J$c.prototype._setUnBelongScene.call(this)},J$a._update=function(J$a){(J$a.owner=this)._activeInHierarchy&&(this._updateComponents(J$a),this._render._updateOctreeNode(),this._lateUpdateComponents(J$a),J$A.spriteCount++,this._childs.length&&this._updateChilds(J$a))},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$c.prototype.destroy.call(this,J$a),this._render._destroy(),this._render=null},J$b.__init__=function(){J$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=J$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),J$b.SAHDERDEFINE_LIGHTMAP=J$b.shaderDefines.registerDefine("LIGHTMAP")},J$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,J$b.SAHDERDEFINE_LIGHTMAP=4,J$b.LIGHTMAPSCALEOFFSET=2,J$b.LIGHTMAP=3,J$l(J$b,["shaderDefines",function(){return this.shaderDefines=new J$kb}]),J$b}(J$Kb),J$Wb=(function(J$a){function J$d(J$a,J$b,J$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===J$a&&(J$a=1),void 0===J$b&&(J$b=1),void 0===J$c&&(J$c=1),J$d.__super.call(this),this._long=J$a,this._width=J$b,this._height=J$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}J$n(J$d,"laya.d3.resource.models.BoxMesh",J$Qb);var J$b=J$d.prototype;J$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var J$a=J$Fa.vertexDeclaration,J$b=(J$a.vertexStride,this._long/2),J$c=this._height/2,J$d=this._width/2,J$e=new Float32Array([-J$b,J$c,-J$d,0,1,0,0,0,J$b,J$c,-J$d,0,1,0,1,0,J$b,J$c,J$d,0,1,0,1,1,-J$b,J$c,J$d,0,1,0,0,1,-J$b,-J$c,-J$d,0,-1,0,0,1,J$b,-J$c,-J$d,0,-1,0,1,1,J$b,-J$c,J$d,0,-1,0,1,0,-J$b,-J$c,J$d,0,-1,0,0,0,-J$b,J$c,-J$d,-1,0,0,0,0,-J$b,J$c,J$d,-1,0,0,1,0,-J$b,-J$c,J$d,-1,0,0,1,1,-J$b,-J$c,-J$d,-1,0,0,0,1,J$b,J$c,-J$d,1,0,0,1,0,J$b,J$c,J$d,1,0,0,0,0,J$b,-J$c,J$d,1,0,0,0,1,J$b,-J$c,-J$d,1,0,0,1,1,-J$b,J$c,J$d,0,0,1,0,0,J$b,J$c,J$d,0,0,1,1,0,J$b,-J$c,J$d,0,0,1,1,1,-J$b,-J$c,J$d,0,0,1,0,1,-J$b,J$c,-J$d,0,0,-1,1,0,J$b,J$c,-J$d,0,0,-1,0,0,J$b,-J$c,-J$d,0,0,-1,0,1,-J$b,-J$c,-J$d,0,0,-1,1,1]),J$f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new J$Ob(J$a,this._numberVertices,35044,!0),this._indexBuffer=new J$Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(J$e),this._indexBuffer.setData(J$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},J$o(0,J$b,"long",function(){return this._long},function(J$a){this._long!==J$a&&(this._long=J$a,this.releaseResource(),this.activeResource())}),J$o(0,J$b,"width",function(){return this._width},function(J$a){this._width!==J$a&&(this._width=J$a,this.releaseResource(),this.activeResource())}),J$o(0,J$b,"height",function(){return this._height},function(J$a){this._height!==J$a&&(this._height=J$a,this.releaseResource(),this.activeResource())})}(),function(J$a){function J$e(J$a,J$b,J$c,J$d){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===J$a&&(J$a=10),void 0===J$b&&(J$b=10),void 0===J$c&&(J$c=10),void 0===J$d&&(J$d=10),J$e.__super.call(this),this._long=J$a,this._width=J$b,this._stacks=J$c,this._slices=J$d,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}J$n(J$e,"laya.d3.resource.models.PlaneMesh",J$Qb);var J$b=J$e.prototype;J$b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var J$a=new Uint16Array(this._numberIndices),J$b=J$Fa.vertexDeclaration,J$c=J$b.vertexStride/4,J$d=new Float32Array(this._numberVertices*J$c),J$e=this._long/2,J$f=this._width/2,J$g=this._long/this._stacks,J$h=this._width/this._slices,J$i=0,J$j=0;J$j<=this._slices;J$j++)for(var J$k=0;J$k<=this._stacks;J$k++)J$d[J$i++]=J$k*J$g-J$e,J$d[J$i++]=0,J$d[J$i++]=J$j*J$h-J$f,J$d[J$i++]=0,J$d[J$i++]=1,J$d[J$i++]=0,J$d[J$i++]=1*J$k/this._stacks,J$d[J$i++]=1*J$j/this._slices;var J$l=0;for(J$j=0;J$j<this._slices;J$j++)for(J$k=0;J$k<this._stacks;J$k++)J$a[J$l++]=(J$j+1)*(this._stacks+1)+J$k,J$a[J$l++]=J$j*(this._stacks+1)+J$k,J$a[J$l++]=(J$j+1)*(this._stacks+1)+J$k+1,J$a[J$l++]=J$j*(this._stacks+1)+J$k,J$a[J$l++]=J$j*(this._stacks+1)+J$k+1,J$a[J$l++]=(J$j+1)*(this._stacks+1)+J$k+1;this._vertexBuffer=new J$Ob(J$b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new J$Nb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(J$d),this._indexBuffer.setData(J$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},J$o(0,J$b,"long",function(){return this._long},function(J$a){this._long!==J$a&&(this._long=J$a,this.releaseResource(),this.activeResource())}),J$o(0,J$b,"width",function(){return this._width},function(J$a){this._width!==J$a&&(this._width=J$a,this.releaseResource(),this.activeResource())}),J$o(0,J$b,"stacks",function(){return this._stacks},function(J$a){this._stacks!==J$a&&(this._stacks=J$a,this.releaseResource(),this.activeResource())}),J$o(0,J$b,"slices",function(){return this._slices},function(J$a){this._slices!==J$a&&(this._slices=J$a,this.releaseResource(),this.activeResource())})}(),function(J$a){function J$g(J$a,J$b,J$c){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=.3),void 0===J$c&&(J$c=1e3),this._viewMatrix=new J$ab,this._projectionMatrix=new J$ab,this._projectionViewMatrix=new J$ab,this._viewport=new J$ib(0,0,0,0),this._normalizedViewport=new J$ib(0,0,1,1),this._aspectRatio=J$a,this._boundFrustumUpdate=!0,this._boundFrustum=new J$$a(J$ab.DEFAULT),J$g.__super.call(this,J$b,J$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}J$n(J$g,"laya.d3.core.Camera",J$Ub);var J$b=J$g.prototype;return J$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},J$b._parseCustomProps=function(J$a,J$b,J$c,J$d){var J$e=J$c.clearColor;this.clearColor=new J$hb(J$e[0],J$e[1],J$e[2],J$e[3]);var J$f=J$c.viewport;this.normalizedViewport=new J$ib(J$f[0],J$f[1],J$f[2],J$f[3])},J$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var J$a=this.orthographicVerticalSize*this.aspectRatio*.5,J$b=.5*this.orthographicVerticalSize;J$ab.createOrthoOffCenterRH(-J$a,J$a,-J$b,J$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else J$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},J$b._update=function(J$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,J$a)},J$b._renderCamera=function(J$a,J$b,J$c){var J$d,J$e;J$c.parallelSplitShadowMaps[0]&&J$c._renderShadowMap(J$a,J$b,this),(J$b.camera=this)._prepareCameraToRender(),J$c._preRenderUpdateComponents(J$b),J$d=J$b._viewMatrix=this.viewMatrix;var J$f=this._renderTarget;J$f?(J$f.start(),J$ab.multiply(J$Ub._invertYScaleMatrix,this._projectionMatrix,J$Ub._invertYProjectionMatrix),J$ab.multiply(J$Ub._invertYScaleMatrix,this.projectionViewMatrix,J$Ub._invertYProjectionViewMatrix),J$e=J$b._projectionMatrix=J$Ub._invertYProjectionMatrix,J$b._projectionViewMatrix=J$Ub._invertYProjectionViewMatrix):(J$e=J$b._projectionMatrix=this._projectionMatrix,J$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(J$d,J$e),J$b._viewport=this.viewport,J$c._preRenderScene(J$a,J$b,this.boundFrustum),J$c._clear(J$a,J$b),J$c._renderScene(J$a,J$b),J$c._postRenderUpdateComponents(J$b),J$f&&J$f.end()},J$b.viewportPointToRay=function(J$a,J$b){J$ob.calculateCursorRay(J$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,J$b)},J$b.normalizedViewportPointToRay=function(J$a,J$b){var J$c=J$g._tempVector20,J$d=this.viewport,J$e=J$a.elements,J$f=J$c.elements;J$f[0]=J$e[0]*J$d.width,J$f[1]=J$e[1]*J$d.height,J$ob.calculateCursorRay(J$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,J$b)},J$b.worldToViewportPoint=function(J$a,J$b){J$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(J$a,this._projectionViewMatrix,J$b);var J$c=J$b.elements;J$c[0]=J$c[0]/J$x.stage.clientScaleX,J$c[1]=J$c[1]/J$x.stage.clientScaleY},J$b.worldToNormalizedViewportPoint=function(J$a,J$b){J$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(J$a,this._projectionViewMatrix,J$b);var J$c=J$b.elements;J$c[0]=J$c[0]/J$x.stage.clientScaleX,J$c[1]=J$c[1]/J$x.stage.clientScaleY},J$b.convertScreenCoordToOrthographicCoord=function(J$a,J$b){if(this._orthographic){var J$c=J$Y.clientWidth,J$d=J$Y.clientHeight,J$e=this.orthographicVerticalSize*this.aspectRatio/J$c,J$f=this.orthographicVerticalSize/J$d,J$g=J$a.elements,J$h=J$b.elements;return J$h[0]=(-J$c/2+J$g[0])*J$e,J$h[1]=(J$d/2-J$g[1])*J$f,J$h[2]=(this.nearPlane-this.farPlane)*(J$g[2]+1)/2-this.nearPlane,J$gb.transformCoordinate(J$b,this.transform.worldMatrix,J$b),!0}return!1},J$o(0,J$b,"projectionViewMatrix",function(){return J$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),J$o(0,J$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var J$a=this.viewport;return J$a.width/J$a.height},function(J$a){if(J$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=J$a,this._calculateProjectionMatrix()}),J$o(0,J$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),J$o(0,J$b,"needViewport",function(){var J$a=this.normalizedViewport;return 0===J$a.x&&0===J$a.y&&1===J$a.width&&1===J$a.height}),J$o(0,J$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var J$a=this._normalizedViewport,J$b=this.renderTargetSize,J$c=J$b.width,J$d=J$b.height;this._viewport.x=J$a.x*J$c,this._viewport.y=J$a.y*J$d,this._viewport.width=J$a.width*J$c,this._viewport.height=J$a.height*J$d}return this._viewport},function(J$a){if(null!=this.renderTarget&&(J$a.x<0||J$a.y<0||0==J$a.width||0==J$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=J$a,this._calculateProjectionMatrix()}),J$o(0,J$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var J$a=this._viewport,J$b=this.renderTargetSize,J$c=J$b.width,J$d=J$b.height;this._normalizedViewport.x=J$a.x/J$c,this._normalizedViewport.y=J$a.y/J$d,this._normalizedViewport.width=J$a.width/J$c,this._normalizedViewport.height=J$a.height/J$d}return this._normalizedViewport},function(J$a){J$a.x<0&&(J$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),J$a.y<0&&(J$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<J$a.x+J$a.width&&(J$a.width=1-J$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<J$a.y+J$a.height&&(J$a.height=1-J$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=J$a,this._calculateProjectionMatrix()}),J$o(0,J$b,"projectionMatrix",function(){return this._projectionMatrix},function(J$a){this._projectionMatrix=J$a,this._useUserProjectionMatrix=!0}),J$o(0,J$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),J$l(J$g,["_tempVector20",function(){return this._tempVector20=new J$fb}]),J$g}()),J$Xb=function(J$c){function J$d(J$a,J$b){J$d.__super.call(this,J$b),this._geometryFilter=new J$Hb(this),this._render=new J$Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),J$a&&(this._geometryFilter.sharedMesh=J$a)instanceof laya.d3.resource.models.Mesh&&(J$a.loaded?this._render.sharedMaterials=J$a.materials:J$a.once("loaded",this,this._applyMeshMaterials))}J$n(J$d,"laya.d3.core.MeshSprite3D",J$c);var J$a=J$d.prototype;return J$a._changeRenderObjectByMesh=function(J$a){var J$b=this._render._renderElements,J$c=J$b[J$a];J$c||(J$c=J$b[J$a]=new J$zb),J$c._render=this._render;var J$d=this._render.sharedMaterials[J$a];J$d||(J$d=J$Mb.defaultMaterial);var J$e=this._geometryFilter.sharedMesh.getRenderElement(J$a);return J$c._mainSortID=this._getSortID(J$e,J$d),J$c._sprite3D=this,J$c.renderObj=J$e,J$c._material=J$d,J$c},J$a._changeRenderObjectByMaterial=function(J$a,J$b){var J$c=this._render._renderElements[J$a];J$b||(J$b=J$Mb.defaultMaterial);var J$d=this._geometryFilter.sharedMesh.getRenderElement(J$a);return J$c._mainSortID=this._getSortID(J$d,J$b),J$c._sprite3D=this,J$c.renderObj=J$d,J$c._material=J$b,J$c},J$a._changeRenderObjectsByMesh=function(){var J$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=J$a;for(var J$b=0;J$b<J$a;J$b++)this._changeRenderObjectByMesh(J$b)},J$a._onMeshChanged=function(J$a){var J$b=J$a.sharedMesh;J$b.loaded?this._changeRenderObjectsByMesh():J$b.once("loaded",this,this._onMeshLoaded)},J$a._onMeshLoaded=function(J$a){J$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},J$a._onMaterialChanged=function(J$a,J$b,J$c){J$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(J$b,J$c)},J$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},J$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},J$a._parseCustomProps=function(J$a,J$b,J$c,J$d){var J$e=this.meshRender,J$f=J$c.lightmapIndex;null!=J$f&&(J$e.lightmapIndex=J$f);var J$g,J$h,J$i=J$c.lightmapScaleOffset;if(J$i&&(J$e.lightmapScaleOffset=new J$hb(J$i[0],J$i[1],J$i[2],J$i[3])),J$d.instanceParams)(J$g=J$d.instanceParams.loadPath)&&(J$h=J$r.getRes(J$b[J$g]),(this.meshFilter.sharedMesh=J$h).loaded?J$e.sharedMaterials=J$h.materials:J$h.once("loaded",this,this._applyMeshMaterials));else{(J$g=J$c.meshPath)&&(J$h=J$r.getRes(J$b[J$g]),this.meshFilter.sharedMesh=J$h);var J$j=J$c.materials;if(J$j){var J$k=J$e.sharedMaterials,J$l=J$j.length;J$k.length=J$l;for(var J$m=0;J$m<J$l;J$m++)J$k[J$m]=J$r.getRes(J$b[J$j[J$m].path]);J$e.sharedMaterials=J$k}}},J$a._applyMeshMaterials=function(J$a){for(var J$b=this._render.sharedMaterials,J$c=J$a.materials,J$d=0,J$e=J$c.length;J$d<J$e;J$d++)J$b[J$d]||(J$b[J$d]=J$c[J$d]);this._render.sharedMaterials=J$b},J$a._addToInitStaticBatchManager=function(){J$d._staticBatchManager._addInitBatchSprite(this)},J$a.cloneTo=function(J$a){var J$b=J$a;J$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var J$c=this._render,J$d=J$b._render;J$d.enable=J$c.enable,J$d.sharedMaterials=J$c.sharedMaterials,J$d.castShadow=J$c.castShadow;var J$e=J$c.lightmapScaleOffset;J$e&&(J$d.lightmapScaleOffset=J$e.clone()),J$d.lightmapIndex=J$c.lightmapIndex,J$d.receiveShadow=J$c.receiveShadow,J$d.sortingFudge=J$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,J$a)},J$a.destroy=function(J$a){if(void 0===J$a&&(J$a=!0),!this.destroyed){var J$b=this.meshFilter.sharedMesh;null!=J$b&&(J$b.loaded||J$b.off("loaded",this,this._applyMeshMaterials)),J$c.prototype.destroy.call(this,J$a),this._geometryFilter._destroy()}},J$o(0,J$a,"meshFilter",function(){return this._geometryFilter}),J$o(0,J$a,"meshRender",function(){return this._render}),J$d.__init__=function(){J$da._staticBatchManagers.push(J$d._staticBatchManager)},J$d.load=function(J$a){return J$x.loader.create(J$a,null,null,J$d)},J$l(J$d,["_staticBatchManager",function(){return this._staticBatchManager=new J$Bb}]),J$d}(J$Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}}),function(J$a,J$b,J$ea){J$ea.un,J$ea.uns;var J$c=J$ea.static,J$d=J$ea.class,J$f=J$ea.getset,J$p=J$ea.__newvec,J$h=laya.maths.Bezier,J$l=laya.utils.Browser,J$Fa=laya.utils.Byte,J$e=(laya.events.Event,laya.events.EventDispatcher),J$g=laya.display.Graphics,J$i=(laya.resource.HTMLCanvas,laya.utils.Handler),J$j=laya.net.Loader,J$m=laya.maths.MathUtil,J$Ga=laya.maths.Matrix,J$q=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),J$k=(laya.renders.RenderContext,laya.resource.Resource),J$n=laya.utils.RunDriver,J$fa=laya.display.Sprite,J$o=laya.utils.Stat,J$Ha=laya.resource.Texture,J$r=(laya.net.URL,laya.utils.Utils),J$G=function(){function J$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return J$d(J$a,"laya.ani.AnimationContent"),J$a}(),J$H=function(){function J$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return J$d(J$a,"laya.ani.AnimationNodeContent"),J$a}(),J$v=function(){function J$a(){}return J$d(J$a,"laya.ani.AnimationParser01"),J$a.parse=function(J$a,J$b){var J$c=J$b.__getBuffer(),J$d=0,J$e=0,J$f=0,J$g=0,J$h=0,J$i=0,J$j=0,J$k=J$b.readUTFString();J$a._aniClassName=J$k;var J$l,J$m=J$b.readUTFString().split("\n"),J$n=J$b.getUint8(),J$o=J$b.getUint32(),J$p=J$b.getUint32();0<J$o&&(J$l=J$c.slice(J$o,J$p));var J$q=new J$Fa(J$l);for(0<J$p&&(J$a._publicExtData=J$c.slice(J$p,J$c.byteLength)),J$a._useParent=!!J$b.getUint8(),J$a._anis.length=J$n,J$d=0;J$d<J$n;J$d++){var J$r=J$a._anis[J$d]=new J$G;J$r.nodes=new Array;var J$u=J$r.name=J$m[J$b.getUint16()];J$a._aniMap[J$u]=J$d,J$r.bone3DMap={},J$r.playTime=J$b.getFloat32(),J$r.playTime<=0&&console.error("播放时间不能为0  url="+J$a.url+" name="+J$r.name);var J$v=J$r.nodes.length=J$b.getUint8();for(J$e=J$r.totalKeyframeDatasLength=0;J$e<J$v;J$e++){var J$w=J$r.nodes[J$e]=new J$H;J$w.childs=[];var J$x=J$b.getInt16();0<=J$x&&(J$w.name=J$m[J$x],J$r.bone3DMap[J$w.name]=J$e),J$w.keyFrame=new Array,J$w.parentIndex=J$b.getInt16(),-1==J$w.parentIndex?J$w.parent=null:J$w.parent=J$r.nodes[J$w.parentIndex],J$w.lerpType=J$b.getUint8();var J$y=J$b.getUint32();J$q.pos=J$y;var J$z=J$w.keyframeWidth=J$q.getUint16();if(J$r.totalKeyframeDatasLength+=J$z,0===J$w.lerpType||1===J$w.lerpType)for(J$w.interpolationMethod=[],J$w.interpolationMethod.length=J$z,J$f=0;J$f<J$z;J$f++)J$w.interpolationMethod[J$f]=J$K.interpolation[J$q.getUint8()];null!=J$w.parent&&J$w.parent.childs.push(J$w);var J$A=J$b.getUint16();0<J$A&&(J$w.extenData=J$c.slice(J$b.pos,J$b.pos+J$A),J$b.pos+=J$A);var J$B,J$C=J$b.getUint16(),J$D=0;for(J$f=0,J$g=J$w.keyFrame.length=J$C;J$f<J$g;J$f++){if((J$B=J$w.keyFrame[J$f]=new J$I).duration=J$b.getFloat32(),J$B.startTime=J$D,2===J$w.lerpType){J$B.interpolationData=[];var J$E,J$F=J$b.getUint8();switch(J$E=J$b.getFloat32()){case 254:for(J$B.interpolationData.length=J$z,J$j=0;J$j<J$z;J$j++)J$B.interpolationData[J$j]=0;break;case 255:for(J$B.interpolationData.length=J$z,J$j=0;J$j<J$z;J$j++)J$B.interpolationData[J$j]=5;break;default:for(J$B.interpolationData.push(J$E),J$i=1;J$i<J$F;J$i++)J$B.interpolationData.push(J$b.getFloat32())}}for(J$B.data=new Float32Array(J$z),J$h=0;J$h<J$z;J$h++)J$B.data[J$h]=J$b.getFloat32(),-1e-8<J$B.data[J$h]&&J$B.data[J$h]<1e-8&&(J$B.data[J$h]=0);J$D+=J$B.duration}J$B.startTime=J$r.playTime,J$w.playTime=J$r.playTime,J$a._calculateKeyFrame(J$w,J$C,J$z)}}},J$a}(),J$w=function(){function J$x(){}return J$d(J$x,"laya.ani.AnimationParser02"),J$x.READ_DATA=function(){J$x._DATA.offset=J$x._reader.getUint32(),J$x._DATA.size=J$x._reader.getUint32()},J$x.READ_BLOCK=function(){for(var J$a=J$x._BLOCK.count=J$x._reader.getUint16(),J$b=J$x._BLOCK.blockStarts=[],J$c=J$x._BLOCK.blockLengths=[],J$d=0;J$d<J$a;J$d++)J$b.push(J$x._reader.getUint32()),J$c.push(J$x._reader.getUint32())},J$x.READ_STRINGS=function(){var J$a=J$x._reader.getUint32(),J$b=J$x._reader.getUint16(),J$c=J$x._reader.pos;J$x._reader.pos=J$a+J$x._DATA.offset;for(var J$d=0;J$d<J$b;J$d++)J$x._strings[J$d]=J$x._reader.readUTFString();J$x._reader.pos=J$c},J$x.parse=function(J$a,J$b){J$x._templet=J$a;(J$x._reader=J$b).__getBuffer();J$x.READ_DATA(),J$x.READ_BLOCK(),J$x.READ_STRINGS();for(var J$c=0,J$d=J$x._BLOCK.count;J$c<J$d;J$c++){var J$e=J$b.getUint16(),J$f=J$x._strings[J$e],J$g=J$x["READ_"+J$f];if(null==J$g)throw new Error("model file err,no this function:"+J$e+" "+J$f);J$g.call()}},J$x.READ_ANIMATIONS=function(){var J$a=J$x._reader,J$b=J$a.__getBuffer(),J$c=0,J$d=0,J$e=0,J$f=0,J$g=J$a.getUint16(),J$h=[];for(J$h.length=J$g,J$c=0;J$c<J$g;J$c++)J$h[J$c]=J$K.interpolation[J$a.getByte()];var J$i=J$a.getUint8();for(J$x._templet._anis.length=J$i,J$c=0;J$c<J$i;J$c++){var J$j=J$x._templet._anis[J$c]={};J$j.nodes=new Array;var J$k=J$j.name=J$x._strings[J$a.getUint16()];J$x._templet._aniMap[J$k]=J$c,J$j.bone3DMap={},J$j.playTime=J$a.getFloat32();var J$l=J$j.nodes.length=J$a.getInt16();for(J$d=J$j.totalKeyframeDatasLength=0;J$d<J$l;J$d++){var J$m=J$j.nodes[J$d]={};J$m.keyframeWidth=J$g,J$m.childs=[];var J$n=J$a.getUint16();0<=J$n&&(J$m.name=J$x._strings[J$n],J$j.bone3DMap[J$m.name]=J$d),J$m.keyFrame=new Array,J$m.parentIndex=J$a.getInt16(),-1==J$m.parentIndex?J$m.parent=null:J$m.parent=J$j.nodes[J$m.parentIndex],J$j.totalKeyframeDatasLength+=J$g,J$m.interpolationMethod=J$h,null!=J$m.parent&&J$m.parent.childs.push(J$m);var J$o=J$a.getUint16(),J$p=null,J$q=null;for(J$e=0,J$f=J$m.keyFrame.length=J$o;J$e<J$f;J$e++){(J$p=J$m.keyFrame[J$e]={}).startTime=J$a.getFloat32(),J$q&&(J$q.duration=J$p.startTime-J$q.startTime);var J$r=J$x._DATA.offset,J$u=J$a.getUint32(),J$v=4*J$g,J$w=J$b.slice(J$r+J$u,J$r+J$u+J$v);J$p.data=new Float32Array(J$w),J$q=J$p}J$p.duration=0,J$m.playTime=J$j.playTime,J$x._templet._calculateKeyFrame(J$m,J$o,J$g)}}},J$x._templet=null,J$x._reader=null,J$x._strings=[],J$c(J$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),J$x}(),J$Ia=(function(){function J$a(){}J$d(J$a,"laya.ani.AnimationState"),J$a.stopped=0,J$a.paused=1,J$a.playing=2}(),function(){function J$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new J$Va,this.resultMatrix=new J$Ga,this._children=[]}J$d(J$e,"laya.ani.bone.Bone");var J$a=J$e.prototype;return J$a.setTempMatrix=function(J$a){this._tempMatrix=J$a;var J$b,J$c=0;for(J$c=0,J$b=this._children.length;J$c<J$b;J$c++)this._children[J$c].setTempMatrix(this._tempMatrix)},J$a.update=function(J$a){var J$b;if(this.rotation=this.transform.skX,J$a)J$b=this.resultTransform.getMatrix(),J$Ga.mul(J$b,J$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)J$b=this.resultTransform.getMatrix(),J$Ga.mul(J$b,this.parentBone.resultMatrix,this.resultMatrix);else{var J$c=this.parentBone,J$d=NaN,J$e=NaN,J$f=NaN,J$g=this.parentBone.resultMatrix;J$b=this.resultTransform.getMatrix();var J$h=J$g.a*J$b.tx+J$g.c*J$b.ty+J$g.tx,J$i=J$g.b*J$b.tx+J$g.d*J$b.ty+J$g.ty,J$j=new J$Ga;this.inheritRotation?(J$d=Math.atan2(J$c.resultMatrix.b,J$c.resultMatrix.a),J$e=Math.cos(J$d),J$f=Math.sin(J$d),J$j.setTo(J$e,J$f,-J$f,J$e,0,0),J$Ga.mul(this._tempMatrix,J$j,J$Ga.TEMP),J$Ga.TEMP.copyTo(J$j),J$b=this.resultTransform.getMatrix(),J$Ga.mul(J$b,J$j,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,J$b=this.resultTransform.getMatrix(),J$Ga.TEMP.identity(),J$Ga.TEMP.d=this.d,J$Ga.mul(J$b,J$Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=J$h,this.resultMatrix.ty=J$i}else(J$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var J$k,J$l=0;for(J$l=0,J$k=this._children.length;J$l<J$k;J$l++)this._children[J$l].update()},J$a.updateChild=function(){var J$a,J$b=0;for(J$b=0,J$a=this._children.length;J$b<J$a;J$b++)this._children[J$b].update()},J$a.setRotation=function(J$a){this._sprite&&(this._sprite.rotation=180*J$a/Math.PI)},J$a.updateDraw=function(J$a,J$b){J$e.ShowBones&&!J$e.ShowBones[this.name]||(this._sprite||(this._sprite=new J$fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),J$ea.stage.addChild(this._sprite)),this._sprite.x=J$a+this.resultMatrix.tx,this._sprite.y=J$b+this.resultMatrix.ty);var J$c,J$d=0;for(J$d=0,J$c=this._children.length;J$d<J$c;J$d++)this._children[J$d].updateDraw(J$a,J$b)},J$a.addChild=function(J$a){this._children.push(J$a),J$a.parentBone=this},J$a.findBone=function(J$a){if(this.name==J$a)return this;var J$b,J$c,J$d=0;for(J$d=0,J$b=this._children.length;J$d<J$b;J$d++)if(J$c=this._children[J$d].findBone(J$a))return J$c;return null},J$a.localToWorld=function(J$a){var J$b=J$a[0],J$c=J$a[1];J$a[0]=J$b*this.resultMatrix.a+J$c*this.resultMatrix.c+this.resultMatrix.tx,J$a[1]=J$b*this.resultMatrix.b+J$c*this.resultMatrix.d+this.resultMatrix.ty},J$e.ShowBones={},J$e}()),J$Ja=function(){function J$p(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}J$d(J$p,"laya.ani.bone.BoneSlot");var J$a=J$p.prototype;return J$a.showSlotData=function(J$a,J$b){void 0===J$b&&(J$b=!0),this.currSlotData=J$a,J$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},J$a.showDisplayByName=function(J$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(J$a))},J$a.replaceDisplayByName=function(J$a,J$b){if(this.currSlotData){var J$c;J$c=this.currSlotData.getDisplayByName(J$a);var J$d;J$d=this.currSlotData.getDisplayByName(J$b),this.replaceDisplayByIndex(J$c,J$d)}},J$a.replaceDisplayByIndex=function(J$a,J$b){this.currSlotData&&(this._replaceDic[J$a]=J$b,this.displayIndex==J$a&&this.showDisplayByIndex(J$a))},J$a.showDisplayByIndex=function(J$a){if(null!=this._replaceDic[J$a]&&(J$a=this._replaceDic[J$a]),this.currSlotData&&-1<J$a&&J$a<this.currSlotData.displayArr.length){if(this.displayIndex=J$a,this.currDisplayData=this.currSlotData.displayArr[J$a],this.currDisplayData){var J$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(J$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!J$q.isConchApp||J$q.isConchApp&&"0.9.15"<J$fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},J$a.replaceSkin=function(J$a){this._diyTexture=J$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},J$a.setParentMatrix=function(J$a){this._parentMatrix=J$a},J$a.draw=function(J$a,J$b,J$c,J$d){if(void 0===J$c&&(J$c=!1),void 0===J$d&&(J$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var J$e,J$f=this.currTexture;switch(this._diyTexture&&(J$f=this._diyTexture),this.currDisplayData.type){case 0:if(J$a){var J$g=this.getDisplayMatrix();if(this._parentMatrix){var J$h=!1;if(J$g){var J$i;if(J$Ga.mul(J$g,this._parentMatrix,J$Ga.TEMP),J$i=J$c?(null==this._resultMatrix&&(this._resultMatrix=new J$Ga),this._resultMatrix):new J$Ga,!J$q.isWebGL&&this.currDisplayData.uvs||J$q.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var J$j=J$p._tempMatrix;J$j.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(J$j.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(J$h=!0,J$j.rotate(-Math.PI/2)),J$Ga.mul(J$j,J$Ga.TEMP,J$i)}else J$Ga.TEMP.copyTo(J$i);J$h?J$a.drawTexture(J$f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,J$i):J$a.drawTexture(J$f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,J$i)}}}break;case 1:if(null==(J$e=J$c?(null==this._skinSprite&&(this._skinSprite=J$p.createSkinMesh()),this._skinSprite):J$p.createSkinMesh()))return;var J$k;if(null==this.currDisplayData.bones){var J$l,J$m=this.currDisplayData.weights;this.deformData&&(J$m=this.deformData),J$l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=J$m;this.currDisplayData.triangles.length;J$k=this.currDisplayData.triangles,J$e.init2(J$f,null,J$k,this._mVerticleArr,J$l);var J$n,J$o=this.getDisplayMatrix();if(this._parentMatrix)if(J$o)J$Ga.mul(J$o,this._parentMatrix,J$Ga.TEMP),J$n=J$c?(null==this._resultMatrix&&(this._resultMatrix=new J$Ga),this._resultMatrix):new J$Ga,J$Ga.TEMP.copyTo(J$n),J$e.transform=J$n}else this.skinMesh(J$b,J$e,J$d);J$a.drawSkin(J$e);break;case 2:if(null==(J$e=J$c?(null==this._skinSprite&&(this._skinSprite=J$p.createSkinMesh()),this._skinSprite):J$p.createSkinMesh()))return;this.skinMesh(J$b,J$e,J$d),J$a.drawSkin(J$e)}}},J$a.skinMesh=function(J$a,J$b,J$c){var J$d,J$e=this.currTexture,J$f=this.currDisplayData.bones;J$d=this._diyTexture?(J$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=J$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=J$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var J$g,J$h,J$i=this.currDisplayData.weights,J$j=this.currDisplayData.triangles,J$k=0,J$l=0,J$m=0,J$n=NaN,J$o=NaN,J$p=0,J$q=0,J$r=[],J$u=0,J$v=0;if(this.deformData&&0<this.deformData.length){var J$w=0;for(J$u=0,J$v=J$f.length;J$u<J$v;){for(J$m=J$f[J$u++]+J$u,J$l=J$k=0;J$u<J$m;J$u++)J$h=J$a[J$f[J$u]],J$n=J$i[J$p]+this.deformData[J$w++],J$o=J$i[J$p+1]+this.deformData[J$w++],J$q=J$i[J$p+2],J$k+=(J$n*J$h.a+J$o*J$h.c+J$h.tx)*J$q,J$l+=(J$n*J$h.b+J$o*J$h.d+J$h.ty)*J$q,J$p+=3;J$r.push(J$k,J$l)}}else for(J$u=0,J$v=J$f.length;J$u<J$v;){for(J$m=J$f[J$u++]+J$u,J$l=J$k=0;J$u<J$m;J$u++)J$h=J$a[J$f[J$u]],J$n=J$i[J$p],J$o=J$i[J$p+1],J$q=J$i[J$p+2],J$k+=(J$n*J$h.a+J$o*J$h.c+J$h.tx)*J$q,J$l+=(J$n*J$h.b+J$o*J$h.d+J$h.ty)*J$q,J$p+=3;J$r.push(J$k,J$l)}this._mVerticleArr=J$r,J$g=J$j,J$b.init2(J$e,null,J$g,this._mVerticleArr,J$d)},J$a.drawBonePoint=function(J$a){J$a&&this._parentMatrix&&J$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},J$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},J$a.getMatrix=function(){return this._resultMatrix},J$a.copy=function(){var J$a=new J$p;return J$a.type="copy",J$a.name=this.name,J$a.attachmentName=this.attachmentName,J$a.srcDisplayIndex=this.srcDisplayIndex,J$a.parent=this.parent,J$a.displayIndex=this.displayIndex,J$a.templet=this.templet,J$a.currSlotData=this.currSlotData,J$a.currTexture=this.currTexture,J$a.currDisplayData=this.currDisplayData,J$a},J$p.createSkinMesh=function(){return J$q.isWebGL||J$q.isConchApp?J$n.skinAniSprite():(J$q.isWebGL,null)},J$c(J$p,["_tempMatrix",function(){return this._tempMatrix=new J$Ga}]),J$p}(),J$Ka=function(){function J$a(){this.skinName=null,this.deformSlotDataList=[]}return J$d(J$a,"laya.ani.bone.DeformAniData"),J$a}(),J$La=function(){function J$a(){this.deformSlotDisplayList=[]}return J$d(J$a,"laya.ani.bone.DeformSlotData"),J$a}(),J$Ma=function(){function J$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}J$d(J$a,"laya.ani.bone.DeformSlotDisplayData");var J$b=J$a.prototype;return J$b.binarySearch1=function(J$a,J$b){var J$c=0,J$d=J$a.length-2;if(0==J$d)return 1;for(var J$e=J$d>>>1;;){if(J$a[Math.floor(J$e+1)]<=J$b?J$c=J$e+1:J$d=J$e,J$c==J$d)return J$c+1;J$e=J$c+J$d>>>1}return 0},J$b.apply=function(J$a,J$b,J$c){if(void 0===J$c&&(J$c=1),J$a+=.05,!(this.timeList.length<=0)){var J$d=0;if(!(J$a<this.timeList[0])){var J$e=this.vectices[0].length,J$f=[],J$g=this.binarySearch1(this.timeList,J$a);if(this.frameIndex=J$g,J$a>=this.timeList[this.timeList.length-1]){var J$h=this.vectices[this.vectices.length-1];if(J$c<1)for(J$d=0;J$d<J$e;J$d++)J$f[J$d]+=(J$h[J$d]-J$f[J$d])*J$c;else for(J$d=0;J$d<J$e;J$d++)J$f[J$d]=J$h[J$d];this.deformData=J$f}else{this.tweenKeyList[this.frameIndex];var J$i=this.vectices[this.frameIndex-1],J$j=this.vectices[this.frameIndex],J$k=this.timeList[this.frameIndex-1],J$l=this.timeList[this.frameIndex];J$c=this.tweenKeyList[J$g-1]?(J$a-J$k)/(J$l-J$k):0;var J$m=NaN;for(J$d=0;J$d<J$e;J$d++)J$m=J$i[J$d],J$f[J$d]=J$m+(J$j[J$d]-J$m)*J$c;this.deformData=J$f}}}},J$a}(),J$Na=function(){function J$a(){this.time=NaN,this.drawOrder=[]}return J$d(J$a,"laya.ani.bone.DrawOrderData"),J$a}(),J$Oa=function(){function J$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return J$d(J$a,"laya.ani.bone.EventData"),J$a}(),J$u=function(){function J$da(J$a,J$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=J$a,this._targetBone=J$b[J$a.targetBoneIndex],this.isSpine=J$a.isSpine,null==this._bones&&(this._bones=[]);for(var J$c=this._bones.length=0,J$d=J$a.boneIndexs.length;J$c<J$d;J$c++)this._bones.push(J$b[J$a.boneIndexs[J$c]]);this.name=J$a.name,this.mix=J$a.mix,this.bendDirection=J$a.bendDirection}J$d(J$da,"laya.ani.bone.IkConstraint");var J$a=J$da.prototype;return J$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},J$a._applyIk1=function(J$a,J$b,J$c,J$d){var J$e=J$a.parentBone,J$f=1/(J$e.resultMatrix.a*J$e.resultMatrix.d-J$e.resultMatrix.b*J$e.resultMatrix.c),J$g=J$b-J$e.resultMatrix.tx,J$h=J$c-J$e.resultMatrix.ty,J$i=(J$g*J$e.resultMatrix.d-J$h*J$e.resultMatrix.c)*J$f-J$a.transform.x,J$j=(J$h*J$e.resultMatrix.a-J$g*J$e.resultMatrix.b)*J$f-J$a.transform.y,J$k=Math.atan2(J$j,J$i)*J$da.radDeg-0-J$a.transform.skX;J$a.transform.scX<0&&(J$k+=180),180<J$k?J$k-=360:J$k<-180&&(J$k+=360),J$a.transform.skX=J$a.transform.skY=J$a.transform.skX+J$k*J$d,J$a.update()},J$a.updatePos=function(J$a,J$b){this._sp&&this._sp.pos(J$a,J$b)},J$a._applyIk2=function(J$a,J$b,J$c,J$d,J$e,J$f){if(0!=J$f){var J$g=J$a.resultTransform.x,J$h=J$a.resultTransform.y,J$i=J$a.transform.scX,J$j=J$a.transform.scY,J$k=J$b.transform.scX,J$l=0,J$m=0,J$n=0;J$n=J$i<0?(J$i=-J$i,J$l=180,-1):(J$l=0,1),J$j<0&&(J$j=-J$j,J$n=-J$n),J$m=J$k<0?(J$k=-J$k,180):0;var J$o=J$b.resultTransform.x,J$p=NaN,J$q=NaN,J$r=NaN,J$u=J$a.resultMatrix.a,J$v=J$a.resultMatrix.c,J$w=J$a.resultMatrix.b,J$x=J$a.resultMatrix.d,J$y=Math.abs(J$i-J$j)<=1e-4;J$r=J$y?(J$q=J$u*J$o+J$v*(J$p=J$b.resultTransform.y)+J$a.resultMatrix.tx,J$w*J$o+J$x*J$p+J$a.resultMatrix.ty):(J$p=0,J$q=J$u*J$o+J$a.resultMatrix.tx,J$w*J$o+J$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new J$fa,J$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(J$c,J$d,15,"#ffff00"),this._sp.graphics.drawCircle(J$q,J$r,15,"#ff00ff")),J$a.setRotation(Math.atan2(J$r-J$a.resultMatrix.ty,J$q-J$a.resultMatrix.tx));var J$z=J$a.parentBone;J$u=J$z.resultMatrix.a,J$v=J$z.resultMatrix.c,J$w=J$z.resultMatrix.b;var J$A=1/(J$u*(J$x=J$z.resultMatrix.d)-J$v*J$w),J$B=J$c-J$z.resultMatrix.tx,J$C=J$d-J$z.resultMatrix.ty,J$D=(J$B*J$x-J$C*J$v)*J$A-J$g,J$E=(J$C*J$u-J$B*J$w)*J$A-J$h,J$F=((J$B=J$q-J$z.resultMatrix.tx)*J$x-(J$C=J$r-J$z.resultMatrix.ty)*J$v)*J$A-J$g,J$G=(J$C*J$u-J$B*J$w)*J$A-J$h,J$H=Math.sqrt(J$F*J$F+J$G*J$G),J$I=J$b.length*J$k,J$J=NaN,J$K=NaN;if(J$y){var J$L=(J$D*J$D+J$E*J$E-J$H*J$H-(J$I*=J$i)*J$I)/(2*J$H*J$I);J$L<-1?J$L=-1:1<J$L&&(J$L=1),J$K=Math.acos(J$L)*J$e,J$u=J$H+J$I*J$L,J$v=J$I*Math.sin(J$K),J$J=Math.atan2(J$E*J$u-J$D*J$v,J$D*J$u+J$E*J$v)}else{var J$M=(J$u=J$i*J$I)*J$u,J$N=(J$v=J$j*J$I)*J$v,J$O=J$D*J$D+J$E*J$E,J$P=Math.atan2(J$E,J$D),J$Q=-2*J$N*J$H,J$R=J$N-J$M;if(0<(J$x=J$Q*J$Q-4*J$R*(J$w=J$N*J$H*J$H+J$M*J$O-J$M*J$N))){var J$S=Math.sqrt(J$x);J$Q<0&&(J$S=-J$S);var J$T=(J$S=-(J$Q+J$S)/2)/J$R,J$U=J$w/J$S,J$V=Math.abs(J$T)<Math.abs(J$U)?J$T:J$U;J$V*J$V<=J$O&&(J$C=Math.sqrt(J$O-J$V*J$V)*J$e,J$J=J$P-Math.atan2(J$C,J$V),J$K=Math.atan2(J$C/J$j,(J$V-J$H)/J$i))}var J$W=0,J$X=Number.MAX_VALUE,J$Y=0,J$Z=0,J$$=0,J$_=0,J$s=0,J$t=0;J$_<(J$x=(J$B=J$H+J$u)*J$B)&&(J$$=0,J$_=J$x,J$s=J$B),(J$x=(J$B=J$H-J$u)*J$B)<J$X&&(J$W=Math.PI,J$X=J$x,J$Y=J$B);var J$aa=Math.acos(-J$u*J$H/(J$M-J$N));(J$x=(J$B=J$u*Math.cos(J$aa)+J$H)*J$B+(J$C=J$v*Math.sin(J$aa))*J$C)<J$X&&(J$W=J$aa,J$X=J$x,J$Y=J$B,J$Z=J$C),J$_<J$x&&(J$$=J$aa,J$_=J$x,J$s=J$B,J$t=J$C),J$K=J$O<=(J$X+J$_)/2?(J$J=J$P-Math.atan2(J$Z*J$e,J$Y),J$W*J$e):(J$J=J$P-Math.atan2(J$t*J$e,J$s),J$$*J$e)}var J$ba=Math.atan2(J$p,J$o)*J$n,J$ca=J$a.resultTransform.skX;180<(J$J=(J$J-J$ba)*J$da.radDeg+J$l-J$ca)?J$J-=360:J$J<-180&&(J$J+=360),J$a.resultTransform.x=J$g,J$a.resultTransform.y=J$h,J$a.resultTransform.skX=J$a.resultTransform.skY=J$ca+J$J*J$f,J$ca=J$b.resultTransform.skX,180<(J$K=((J$K+J$ba)*J$da.radDeg-0)*J$n+J$m-(J$ca%=360))?J$K-=360:J$K<-180&&(J$K+=360),J$b.resultTransform.x=J$o,J$b.resultTransform.y=J$p,J$b.resultTransform.skX=J$b.resultTransform.skY=J$b.resultTransform.skY+J$K*J$f,J$a.update()}},J$a._applyIk3=function(J$a,J$b,J$c,J$d,J$e,J$f){if(0!=J$f){var J$g,J$h,J$i=J$b.resultMatrix.a*J$b.length,J$j=J$b.resultMatrix.b*J$b.length,J$k=J$i*J$i+J$j*J$j,J$l=Math.sqrt(J$k),J$m=J$a.resultMatrix.tx,J$n=J$a.resultMatrix.ty,J$o=J$b.resultMatrix.tx,J$p=J$b.resultMatrix.ty,J$q=J$o-J$m,J$r=J$p-J$n,J$u=J$q*J$q+J$r*J$r,J$v=Math.sqrt(J$u),J$w=(J$q=J$c-J$a.resultMatrix.tx)*J$q+(J$r=J$d-J$a.resultMatrix.ty)*J$r,J$x=Math.sqrt(J$w);if(J$l+J$v<=J$x||J$x+J$l<=J$v||J$x+J$v<=J$l){var J$y=NaN;J$o=J$m+(J$y=J$l+J$v<=J$x?1:-1)*(J$c-J$m)*J$v/J$x,J$p=J$n+J$y*(J$d-J$n)*J$v/J$x}else{var J$z=(J$u-J$k+J$w)/(2*J$w),J$A=Math.sqrt(J$u-J$z*J$z*J$w)/J$x,J$B=J$m+J$q*J$z,J$C=J$n+J$r*J$z,J$D=-J$r*J$A,J$E=J$q*J$A;J$p=0<J$e?(J$o=J$B-J$D,J$C-J$E):(J$o=J$B+J$D,J$C+J$E)}J$g=J$o,J$h=J$p,this.isDebug&&(this._sp||(this._sp=new J$fa,J$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(J$m,J$n,15,"#ff00ff"),this._sp.graphics.drawCircle(J$c,J$d,15,"#ffff00"),this._sp.graphics.drawCircle(J$g,J$h,15,"#ff00ff"));var J$F,J$G;J$F=Math.atan2(J$h-J$a.resultMatrix.ty,J$g-J$a.resultMatrix.tx),J$a.setRotation(J$F),(J$G=J$da._tempMatrix).identity(),J$G.rotate(J$F),J$G.scale(J$a.resultMatrix.getScaleX(),J$a.resultMatrix.getScaleY()),J$G.translate(J$a.resultMatrix.tx,J$a.resultMatrix.ty),J$G.copyTo(J$a.resultMatrix),J$a.updateChild();var J$H,J$I;J$H=Math.atan2(J$d-J$h,J$c-J$g),J$b.setRotation(J$H),(J$I=J$da._tempMatrix).identity(),J$I.rotate(J$H),J$I.scale(J$b.resultMatrix.getScaleX(),J$b.resultMatrix.getScaleY()),J$I.translate(J$g,J$h),J$G.copyTo(J$b.resultMatrix),J$b.updateChild()}},J$c(J$da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new J$Ga}]),J$da}(),J$Pa=function(){function J$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return J$d(J$a,"laya.ani.bone.IkConstraintData"),J$a}(),J$x=function(){function J$I(J$a,J$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=J$a,this.position=J$a.position,this.spacing=J$a.spacing,this.rotateMix=J$a.rotateMix,this.translateMix=J$a.translateMix,this.bones=[];for(var J$c=this.data.bones,J$d=0,J$e=J$c.length;J$d<J$e;J$d++)this.bones.push(J$b[J$c[J$d]])}J$d(J$I,"laya.ani.bone.PathConstraint");var J$a=J$I.prototype;return J$a.apply=function(J$a,J$b){if(this.target){var J$c=this.translateMix,J$d=this.translateMix,J$e=0<J$d,J$f=this.data.spacingMode,J$g="length"==J$f,J$h=this.data.rotateMode,J$i="tangent"==J$h,J$j="chainScale"==J$h,J$k=[],J$l=this.bones.length,J$m=J$i?J$l:J$l+1,J$n=[];(this._spaces=J$n)[0]=this.position;var J$o=this.spacing;if(J$j||J$g)for(var J$p=0,J$q=J$m-1;J$p<J$q;){var J$r=this.bones[J$p],J$u=J$r.length,J$v=J$u*J$r.resultMatrix.a,J$w=J$u*J$r.resultMatrix.b;J$u=Math.sqrt(J$v*J$v+J$w*J$w),J$j&&(J$k[J$p]=J$u),J$n[++J$p]=J$g?Math.max(0,J$u+J$o):J$o}else for(J$p=1;J$p<J$m;J$p++)J$n[J$p]=J$o;var J$x=this.computeWorldPositions(this.target,J$a,J$b,J$m,J$i,"percent"==this.data.positionMode,"percent"==J$f);if(this._debugKey){for(J$p=0;J$p<J$x.length;J$p++)J$b.drawCircle(J$x[J$p++],J$x[J$p++],5,"#00ff00");var J$y=[];for(J$p=0;J$p<J$x.length;J$p++)J$y.push(J$x[J$p++],J$x[J$p++]);J$b.drawLines(0,0,J$y,"#ff0000")}var J$z=J$x[0],J$A=J$x[1],J$B=this.data.offsetRotation,J$C="chain"==J$h&&0==J$B,J$D=NaN;for(J$p=0,J$D=3;J$p<J$l;J$p++,J$D+=3){(J$r=this.bones[J$p]).resultMatrix.tx+=(J$z-J$r.resultMatrix.tx)*J$c,J$r.resultMatrix.ty+=(J$A-J$r.resultMatrix.ty)*J$c;var J$E=(J$v=J$x[J$D])-J$z,J$F=(J$w=J$x[J$D+1])-J$A;if(J$j&&0!=(J$u=J$k[J$p])){var J$G=(Math.sqrt(J$E*J$E+J$F*J$F)/J$u-1)*J$d+1;J$r.resultMatrix.a*=J$G,J$r.resultMatrix.c*=J$G}if(J$z=J$v,J$A=J$w,J$e){var J$H=J$r.resultMatrix.a,J$I=J$r.resultMatrix.c,J$J=J$r.resultMatrix.b,J$K=J$r.resultMatrix.d,J$L=NaN,J$M=NaN,J$N=NaN;J$L=J$i?J$x[J$D-1]:0==J$n[J$p+1]?J$x[J$D+2]:Math.atan2(J$F,J$E),J$L-=Math.atan2(J$J,J$H)-J$B/180*Math.PI,J$C&&(J$M=Math.cos(J$L),J$N=Math.sin(J$L),J$z+=((J$u=J$r.length)*(J$M*J$H-J$N*J$J)-J$E)*J$d,J$A+=(J$u*(J$N*J$H+J$M*J$J)-J$F)*J$d),J$L>Math.PI?J$L-=2*Math.PI:J$L<-Math.PI&&(J$L+=2*Math.PI),J$L*=J$d,J$M=Math.cos(J$L),J$N=Math.sin(J$L),J$r.resultMatrix.a=J$M*J$H-J$N*J$J,J$r.resultMatrix.c=J$M*J$I-J$N*J$K,J$r.resultMatrix.b=J$N*J$H+J$M*J$J,J$r.resultMatrix.d=J$N*J$I+J$M*J$K}}}},J$a.computeWorldVertices2=function(J$a,J$b,J$c,J$d,J$e,J$f){var J$g,J$h,J$i=J$a.currDisplayData.bones,J$j=J$a.currDisplayData.weights,J$k=J$a.currDisplayData.triangles,J$l=0,J$m=0,J$n=0,J$o=0,J$p=0,J$q=0,J$r=0,J$u=0,J$v=0,J$w=0,J$x=0;if(null!=J$i){for(J$l=0;J$l<J$c;J$l+=2)J$m+=(J$o=J$i[J$m])+1,J$n+=J$o;var J$y=J$b;for(J$p=J$f,J$q=3*J$n;J$p<J$d;J$p+=2){for(J$u=J$r=0,J$o=J$i[J$m++],J$o+=J$m;J$m<J$o;J$m++,J$q+=3){J$g=J$y[J$i[J$m]].resultMatrix,J$v=J$j[J$q],J$w=J$j[J$q+1];var J$z=J$j[J$q+2];J$r+=(J$v*J$g.a+J$w*J$g.c+J$g.tx)*J$z,J$u+=(J$v*J$g.b+J$w*J$g.d+J$g.ty)*J$z}J$e[J$p]=J$r,J$e[J$p+1]=J$u}}else{var J$A,J$B;if(J$k||(J$k=J$j),J$a.deformData&&(J$k=J$a.deformData),J$A=J$a.parent,J$b)for(J$x=J$b.length,J$l=0;J$l<J$x;J$l++)if(J$b[J$l].name==J$A){J$h=J$b[J$l];break}J$h&&(J$B=J$h.resultMatrix),J$B||(J$B=J$I._tempMt);var J$C=J$B.tx,J$D=J$B.ty,J$E=J$B.a,J$F=J$B.b,J$G=J$B.c,J$H=J$B.d;for(J$h&&(J$H*=J$h.d),J$m=J$c,J$p=J$f;J$p<J$d;J$m+=2,J$p+=2)J$v=J$k[J$m],J$w=J$k[J$m+1],J$e[J$p]=J$v*J$E+J$w*J$F+J$C,J$e[J$p+1]=-(J$v*J$G+J$w*J$H+J$D)}},J$a.computeWorldPositions=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g){J$a.currDisplayData.bones,J$a.currDisplayData.weights,J$a.currDisplayData.triangles;var J$h=[],J$i=0,J$j=J$a.currDisplayData.verLen,J$k=this.position,J$l=this._spaces,J$m=[],J$n=[],J$o=J$j/6,J$p=-1,J$q=NaN,J$r=0,J$u=0,J$v=NaN,J$w=NaN,J$x=NaN,J$y=NaN;if(J$o--,J$j-=4,this.computeWorldVertices2(J$a,J$b,2,J$j,J$h,0),this._debugKey)for(J$i=0;J$i<J$h.length;)J$c.drawCircle(J$h[J$i++],J$h[J$i++],10,"#ff0000");J$m=J$h,this._curves.length=J$o;var J$z=this._curves,J$A=J$m[J$q=0],J$B=J$m[1],J$C=0,J$D=0,J$E=0,J$F=0,J$G=0,J$H=0,J$I=NaN,J$J=NaN,J$K=NaN,J$L=NaN,J$M=NaN,J$N=NaN,J$O=NaN,J$P=NaN,J$Q=0;for(J$i=0,J$Q=2;J$i<J$o;J$i++,J$Q+=6)J$C=J$m[J$Q],J$D=J$m[J$Q+1],J$E=J$m[J$Q+2],J$F=J$m[J$Q+3],J$M=2*(J$I=.1875*(J$A-2*J$C+J$E))+(J$K=.09375*(3*(J$C-J$E)-J$A+(J$G=J$m[J$Q+4]))),J$N=2*(J$J=.1875*(J$B-2*J$D+J$F))+(J$L=.09375*(3*(J$D-J$F)-J$B+(J$H=J$m[J$Q+5]))),J$O=.75*(J$C-J$A)+J$I+.16666667*J$K,J$P=.75*(J$D-J$B)+J$J+.16666667*J$L,J$q+=Math.sqrt(J$O*J$O+J$P*J$P),J$O+=J$M,J$P+=J$N,J$M+=J$K,J$N+=J$L,J$q+=Math.sqrt(J$O*J$O+J$P*J$P),J$O+=J$M,J$P+=J$N,J$q+=Math.sqrt(J$O*J$O+J$P*J$P),J$O+=J$M+J$K,J$P+=J$N+J$L,J$q+=Math.sqrt(J$O*J$O+J$P*J$P),J$z[J$i]=J$q,J$A=J$G,J$B=J$H;if(J$f&&(J$k*=J$q),J$g)for(J$i=0;J$i<J$d;J$i++)J$l[J$i]*=J$q;var J$R=this._segments,J$S=0,J$T=0;for(J$T=J$u=J$r=J$i=0;J$i<J$d;J$i++,J$r+=3)if((J$v=J$k+=J$w=J$l[J$i])<0)this.addBeforePosition(J$v,J$m,0,J$n,J$r);else if(J$q<J$v)this.addAfterPosition(J$v-J$q,J$m,J$j-4,J$n,J$r);else{for(;;J$u++)if(!((J$y=J$z[J$u])<J$v)){0==J$u?J$v/=J$y:J$v=(J$v-(J$x=J$z[J$u-1]))/(J$y-J$x);break}if(J$u!=J$p){var J$U=6*(J$p=J$u);for(J$A=J$m[J$U],J$B=J$m[J$U+1],J$C=J$m[J$U+2],J$D=J$m[J$U+3],J$E=J$m[J$U+4],J$F=J$m[J$U+5],J$M=2*(J$I=.03*(J$A-2*J$C+J$E))+(J$K=.006*(3*(J$C-J$E)-J$A+(J$G=J$m[J$U+6]))),J$N=2*(J$J=.03*(J$B-2*J$D+J$F))+(J$L=.006*(3*(J$D-J$F)-J$B+(J$H=J$m[J$U+7]))),J$O=.3*(J$C-J$A)+J$I+.16666667*J$K,J$P=.3*(J$D-J$B)+J$J+.16666667*J$L,J$S=Math.sqrt(J$O*J$O+J$P*J$P),J$R[0]=J$S,J$U=1;J$U<8;J$U++)J$O+=J$M,J$P+=J$N,J$M+=J$K,J$N+=J$L,J$S+=Math.sqrt(J$O*J$O+J$P*J$P),J$R[J$U]=J$S;J$O+=J$M,J$P+=J$N,J$S+=Math.sqrt(J$O*J$O+J$P*J$P),J$R[8]=J$S,J$O+=J$M+J$K,J$P+=J$N+J$L,J$S+=Math.sqrt(J$O*J$O+J$P*J$P),J$R[9]=J$S,J$T=0}for(J$v*=J$S;;J$T++)if(!((J$y=J$R[J$T])<J$v)){0==J$T?J$v/=J$y:J$v=J$T+(J$v-(J$x=J$R[J$T-1]))/(J$y-J$x);break}this.addCurvePosition(.1*J$v,J$A,J$B,J$C,J$D,J$E,J$F,J$G,J$H,J$n,J$r,J$e||0<J$i&&0==J$w)}return J$n},J$a.addBeforePosition=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$b[J$c],J$g=J$b[J$c+1],J$h=J$b[J$c+2]-J$f,J$i=J$b[J$c+3]-J$g,J$j=Math.atan2(J$i,J$h);J$d[J$e]=J$f+J$a*Math.cos(J$j),J$d[J$e+1]=J$g+J$a*Math.sin(J$j),J$d[J$e+2]=J$j},J$a.addAfterPosition=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$b[J$c+2],J$g=J$b[J$c+3],J$h=J$f-J$b[J$c],J$i=J$g-J$b[J$c+1],J$j=Math.atan2(J$i,J$h);J$d[J$e]=J$f+J$a*Math.cos(J$j),J$d[J$e+1]=J$g+J$a*Math.sin(J$j),J$d[J$e+2]=J$j},J$a.addCurvePosition=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k,J$l){0==J$a&&(J$a=1e-4);var J$m=J$a*J$a,J$n=J$m*J$a,J$o=1-J$a,J$p=J$o*J$o,J$q=J$p*J$o,J$r=J$o*J$a,J$u=3*J$r,J$v=J$o*J$u,J$w=J$u*J$a,J$x=J$b*J$q+J$d*J$v+J$f*J$w+J$h*J$n,J$y=J$c*J$q+J$e*J$v+J$g*J$w+J$i*J$n;J$j[J$k]=J$x,J$j[J$k+1]=J$y,J$j[J$k+2]=J$l?Math.atan2(J$y-(J$c*J$p+J$e*J$r*2+J$g*J$m),J$x-(J$b*J$p+J$d*J$r*2+J$f*J$m)):0},J$I.NONE=-1,J$I.BEFORE=-2,J$I.AFTER=-3,J$c(J$I,["_tempMt",function(){return this._tempMt=new J$Ga}]),J$I}(),J$Qa=function(){function J$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return J$d(J$a,"laya.ani.bone.PathConstraintData"),J$a}(),J$Ra=function(){function J$a(){this.name=null,this.slotArr=[]}return J$d(J$a,"laya.ani.bone.SkinData"),J$a}(),J$Sa=function(){function J$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}J$d(J$a,"laya.ani.bone.SkinSlotDisplayData");var J$b=J$a.prototype;return J$b.createTexture=function(J$a){return this.texture||(this.texture=new J$Ha(J$a.bitmap,this.uvs),J$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new J$Ha(J$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=J$a.height,this.texture.height=J$a.width,this.texture.offsetX=-J$a.offsetX,this.texture.offsetY=-J$a.offsetY,this.texture.sourceWidth=J$a.sourceHeight,this.texture.sourceHeight=J$a.sourceWidth):(this.texture.width=J$a.width,this.texture.height=J$a.height,this.texture.offsetX=-J$a.offsetX,this.texture.offsetY=-J$a.offsetY,this.texture.sourceWidth=J$a.sourceWidth,this.texture.sourceHeight=J$a.sourceHeight),J$q.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},J$b.destory=function(){this.texture&&this.texture.destroy()},J$a}(),J$Ta=function(){function J$a(){this.name=null,this.displayArr=[]}return J$d(J$a,"laya.ani.bone.SlotData"),J$a.prototype.getDisplayByName=function(J$a){for(var J$b=0,J$c=this.displayArr.length;J$b<J$c;J$b++)if(this.displayArr[J$b].attachmentName==J$a)return J$b;return-1},J$a}(),J$y=function(){function J$a(J$a,J$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=J$p(2,0),this._data=J$a,null==this._bones&&(this._bones=[]),this.target=J$b[J$a.targetIndex];var J$c,J$d=0;for(J$d=0,J$c=J$a.boneIndexs.length;J$d<J$c;J$d++)this._bones.push(J$b[J$a.boneIndexs[J$d]]);this.rotateMix=J$a.rotateMix,this.translateMix=J$a.translateMix,this.scaleMix=J$a.scaleMix,this.shearMix=J$a.shearMix}return J$d(J$a,"laya.ani.bone.TfConstraint"),J$a.prototype.apply=function(){for(var J$a,J$b=this.target.resultMatrix.a,J$c=this.target.resultMatrix.b,J$d=this.target.resultMatrix.c,J$e=this.target.resultMatrix.d,J$f=0,J$g=this._bones.length;J$f<J$g;J$f++){if(J$a=this._bones[J$f],0<this.rotateMix){var J$h=J$a.resultMatrix.a,J$i=J$a.resultMatrix.b,J$j=J$a.resultMatrix.c,J$k=J$a.resultMatrix.d,J$l=Math.atan2(J$d,J$b)-Math.atan2(J$j,J$h)+this._data.offsetRotation*Math.PI/180;J$l>Math.PI?J$l-=2*Math.PI:J$l<-Math.PI&&(J$l+=2*Math.PI),J$l*=this.rotateMix;var J$m=Math.cos(J$l),J$n=Math.sin(J$l);J$a.resultMatrix.a=J$m*J$h-J$n*J$j,J$a.resultMatrix.b=J$m*J$i-J$n*J$k,J$a.resultMatrix.c=J$n*J$h+J$m*J$j,J$a.resultMatrix.d=J$n*J$i+J$m*J$k}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),J$a.resultMatrix.tx+=(this._temp[0]-J$a.resultMatrix.tx)*this.translateMix,J$a.resultMatrix.ty+=(this._temp[1]-J$a.resultMatrix.ty)*this.translateMix,J$a.updateChild()),0<this.scaleMix){var J$o=Math.sqrt(J$a.resultMatrix.a*J$a.resultMatrix.a+J$a.resultMatrix.c*J$a.resultMatrix.c),J$p=Math.sqrt(J$b*J$b+J$d*J$d),J$q=1e-5<J$o?(J$o+(J$p-J$o+this._data.offsetScaleX)*this.scaleMix)/J$o:0;J$a.resultMatrix.a*=J$q,J$a.resultMatrix.c*=J$q,J$o=Math.sqrt(J$a.resultMatrix.b*J$a.resultMatrix.b+J$a.resultMatrix.d*J$a.resultMatrix.d),J$p=Math.sqrt(J$c*J$c+J$e*J$e),J$q=1e-5<J$o?(J$o+(J$p-J$o+this._data.offsetScaleY)*this.scaleMix)/J$o:0,J$a.resultMatrix.b*=J$q,J$a.resultMatrix.d*=J$q}if(0<this.shearMix){J$i=J$a.resultMatrix.b,J$k=J$a.resultMatrix.d;var J$r=Math.atan2(J$k,J$i);(J$l=Math.atan2(J$e,J$c)-Math.atan2(J$d,J$b)-(J$r-Math.atan2(J$a.resultMatrix.c,J$a.resultMatrix.a)))>Math.PI?J$l-=2*Math.PI:J$l<-Math.PI&&(J$l+=2*Math.PI),J$l=J$r+(J$l+this._data.offsetShearY*Math.PI/180)*this.shearMix,J$q=Math.sqrt(J$i*J$i+J$k*J$k),J$a.resultMatrix.b=Math.cos(J$l)*J$q,J$a.resultMatrix.d=Math.sin(J$l)*J$q}}},J$a}(),J$Ua=function(){function J$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return J$d(J$a,"laya.ani.bone.TfConstraintData"),J$a}(),J$Va=function(){function J$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}J$d(J$a,"laya.ani.bone.Transform");var J$b=J$a.prototype;return J$b.initData=function(J$a){null!=J$a.x&&(this.x=J$a.x),null!=J$a.y&&(this.y=J$a.y),null!=J$a.skX&&(this.skX=J$a.skX),null!=J$a.skY&&(this.skY=J$a.skY),null!=J$a.scX&&(this.scX=J$a.scX),null!=J$a.scY&&(this.scY=J$a.scY)},J$b.getMatrix=function(){var J$a;return(J$a=this.mMatrix?this.mMatrix:this.mMatrix=new J$Ga).identity(),J$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(J$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),J$a.rotate(this.skX*Math.PI/180),J$a.translate(this.x,this.y),J$a},J$b.skew=function(J$a,J$b,J$c){var J$d=Math.sin(J$c),J$e=Math.cos(J$c),J$f=Math.sin(J$b),J$g=Math.cos(J$b);return J$a.setTo(J$a.a*J$g-J$a.b*J$d,J$a.a*J$f+J$a.b*J$e,J$a.c*J$g-J$a.d*J$d,J$a.c*J$f+J$a.d*J$e,J$a.tx*J$g-J$a.ty*J$d,J$a.tx*J$f+J$a.ty*J$e),J$a},J$a}(),J$z=function(){function J$a(){}return J$d(J$a,"laya.ani.bone.UVTools"),J$a.getRelativeUV=function(J$a,J$b,J$c){var J$d=J$a[0],J$e=J$a[2]-J$a[0],J$f=J$a[1],J$g=J$a[5]-J$a[1];J$c||(J$c=[]),J$c.length=J$b.length;var J$h,J$i=0;J$h=J$c.length;var J$j=1/J$e,J$k=1/J$g;for(J$i=0;J$i<J$h;J$i+=2)J$c[J$i]=(J$b[J$i]-J$d)*J$j,J$c[J$i+1]=(J$b[J$i+1]-J$f)*J$k;return J$c},J$a.getAbsoluteUV=function(J$a,J$b,J$c){if(0==J$a[0]&&0==J$a[1]&&1==J$a[4]&&1==J$a[5])return J$c?(J$r.copyArray(J$c,J$b),J$c):J$b;var J$d=J$a[0],J$e=J$a[2]-J$a[0],J$f=J$a[1],J$g=J$a[5]-J$a[1];J$c||(J$c=[]),J$c.length=J$b.length;var J$h,J$i=0;for(J$h=J$c.length,J$i=0;J$i<J$h;J$i+=2)J$c[J$i]=J$b[J$i]*J$e+J$d,J$c[J$i+1]=J$b[J$i+1]*J$g+J$f;return J$c},J$a}(),J$I=function(){function J$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return J$d(J$a,"laya.ani.KeyFramesContent"),J$a}(),J$A=function(){function J$k(){}return J$d(J$k,"laya.ani.math.BezierLerp"),J$k.getBezierRate=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$k._getBezierParamKey(J$b,J$c,J$d,J$e),J$g=100*J$f+J$a;if(J$k._bezierResultCache[J$g])return J$k._bezierResultCache[J$g];var J$h,J$i=J$k._getBezierPoints(J$b,J$c,J$d,J$e,J$f),J$j=0;for(J$h=J$i.length,J$j=0;J$j<J$h;J$j+=2)if(J$a<=J$i[J$j])return J$k._bezierResultCache[J$g]=J$i[J$j+1],J$i[J$j+1];return J$k._bezierResultCache[J$g]=1},J$k._getBezierParamKey=function(J$a,J$b,J$c,J$d){return 100*(100*(100*(100*J$a+J$b)+J$c)+J$d)},J$k._getBezierPoints=function(J$a,J$b,J$c,J$d,J$e){return J$k._bezierPointsCache[J$e]?J$k._bezierPointsCache[J$e]:(J$f=[0,0,J$a,J$b,J$c,J$d,1,1],J$g=(new J$h).getBezierPoints(J$f,100,3),J$k._bezierPointsCache[J$e]=J$g);var J$f,J$g},J$k._bezierResultCache={},J$k._bezierPointsCache={},J$k}(),J$B=function(J$a){function J$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,J$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}J$d(J$b,"laya.ani.AnimationPlayer",J$e);var J$c=J$b.prototype;return J$ea.imps(J$c,{"laya.resource.IDestroy":!0}),J$c._onTempletLoadedComputeFullKeyframeIndices=function(J$a,J$b,J$c){this._templet===J$c&&this._cachePlayRate===J$a&&this._cacheFrameRate===J$b&&this._computeFullKeyframeIndices()},J$c._computeFullKeyframeIndices=function(){for(var J$a=this._fullFrames=[],J$b=this._templet,J$c=this._cacheFrameRateInterval*this._cachePlayRate,J$d=0,J$e=J$b.getAnimationCount();J$d<J$e;J$d++){for(var J$f=[],J$g=0,J$h=J$b.getAnimation(J$d).nodes.length;J$g<J$h;J$g++){for(var J$i=J$b.getAnimation(J$d).nodes[J$g],J$j=Math.floor(J$i.playTime/J$c+.01),J$k=new Uint16Array(J$j+1),J$l=-1,J$m=0,J$n=J$i.keyFrame.length;J$m<J$n;J$m++){var J$o=J$i.keyFrame[J$m],J$p=J$o.startTime,J$q=J$p+J$o.duration+J$c;do{for(var J$r=Math.floor(J$p/J$c+.5),J$u=J$l+1;J$u<J$r;J$u++)J$k[J$u]=J$m;J$k[J$l=J$r]=J$m,J$p+=J$c}while(J$p<=J$q)}J$f.push(J$k)}J$a.push(J$f)}},J$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},J$c._calculatePlayDuration=function(){if(0!==this.state){var J$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=J$a),this._playEnd>J$a&&(this._playEnd=J$a),this._playDuration=this._playEnd-this._playStart}},J$c._setPlayParams=function(J$a,J$b){this._currentTime=J$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/J$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*J$b},J$c._setPlayParamsWhenStop=function(J$a,J$b){this._currentTime=J$a,this._currentKeyframeIndex=Math.max(Math.floor(J$a/J$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*J$b,this._currentAnimationClipIndex=-1},J$c._update=function(J$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var J$b=this._cacheFrameRateInterval*this._cachePlayRate,J$c=0;this._startUpdateLoopCount!==J$o.loopCount&&(J$c=J$a*this.playbackRate,this._elapsedPlaybackTime+=J$c);var J$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=J$d)return this._setPlayParamsWhenStop(J$d,J$b),void this.event("stopped");if(J$c+=this._currentTime,0<J$d)if(J$d<=J$c)do{if(J$c-=J$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(J$d,J$b),this._stopWhenCircleFinish=!1,void this.event("stopped");J$c<J$d&&(this._setPlayParams(J$c,J$b),this.event("complete"))}while(J$d<=J$c);else this._setPlayParams(J$c,J$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(J$d,J$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},J$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},J$c.play=function(J$a,J$b,J$c,J$d,J$e){if(void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=1),void 0===J$c&&(J$c=2147483647),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(J$c<0||J$d<0||J$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==J$e&&J$e<J$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=J$b,this._overallDuration=J$c,this._playStart=J$d,this._playEnd=J$e,this._paused=!1,this._currentAnimationClipIndex=J$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=J$o.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},J$c.playByFrame=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$a&&(J$a=0),void 0===J$b&&(J$b=1),void 0===J$c&&(J$c=2147483647),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=30);var J$g=1e3/J$f;this.play(J$a,J$b,J$c,J$d*J$g,J$e*J$g)},J$c.stop=function(J$a){void 0===J$a&&(J$a=!0),J$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},J$f(0,J$c,"playEnd",function(){return this._playEnd}),J$f(0,J$c,"templet",function(){return this._templet},function(J$a){0===!this.state&&this.stop(!0),this._templet!==J$a&&((this._templet=J$a).loaded?this._computeFullKeyframeIndices():J$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),J$f(0,J$c,"playStart",function(){return this._playStart}),J$f(0,J$c,"playDuration",function(){return this._playDuration}),J$f(0,J$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),J$f(0,J$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),J$f(0,J$c,"overallDuration",function(){return this._overallDuration}),J$f(0,J$c,"currentFrameTime",function(){return this._currentFrameTime}),J$f(0,J$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),J$f(0,J$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),J$f(0,J$c,"cachePlayRate",function(){return this._cachePlayRate},function(J$a){this._cachePlayRate!==J$a&&(this._cachePlayRate=J$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[J$a,this._cacheFrameRate])))}),J$f(0,J$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(J$a){this._cacheFrameRate!==J$a&&(this._cacheFrameRate=J$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,J$a])))}),J$f(0,J$c,"currentTime",null,function(J$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(J$a<this._playStart||J$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=J$o.loopCount;var J$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=J$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/J$b),0),this._currentFrameTime=this._currentKeyframeIndex*J$b}}),J$f(0,J$c,"paused",function(){return this._paused},function(J$a){(this._paused=J$a)&&this.event("paused")}),J$f(0,J$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),J$f(0,J$c,"destroyed",function(){return this._destroyed}),J$b}(),J$J=function(J$a){function J$b(){J$b.__super.call(this),J$q.isConchNode&&(this.drawSkin=function(J$a){J$a.transform||(J$a.transform=J$Ga.EMPTY),this._addCmd([J$a]),this.setSkinMesh&&this.setSkinMesh(J$a._ps,J$a.mVBData,J$a.mEleNum,0,J$a.mTexture,J$a.transform)})}return J$d(J$b,"laya.ani.GraphicsAni",J$g),J$b.prototype.drawSkin=function(J$a){var J$b=[J$a];this._saveToCmd(J$q._context._drawSkin,J$b)},J$b.create=function(){return J$b._caches.pop()||new J$b},J$b.recycle=function(J$a){J$a.clear(),J$b._caches.push(J$a)},J$b._caches=[],J$b}(),J$K=function(J$a){function J$u(){this._aniMap={},this.unfixedLastAniIndex=-1,J$u.__super.call(this),this._anis=new Array}J$d(J$u,"laya.ani.AnimationTemplet",J$k);var J$b=J$u.prototype;return J$b.parse=function(J$a){var J$b=new J$Fa(J$a);this._aniVersion=J$b.readUTFString(),J$v.parse(this,J$b)},J$b._calculateKeyFrame=function(J$a,J$b,J$c){var J$d=J$a.keyFrame;J$d[J$b]=J$d[0];for(var J$e=0;J$e<J$b;J$e++){var J$f=J$d[J$e];J$f.nextData=0===J$f.duration?J$f.data:J$d[J$e+1].data}J$d.length--},J$b.onAsynLoaded=function(J$a,J$b,J$c){var J$d=new J$Fa(J$b);switch(this._aniVersion=J$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":J$w.parse(this,J$d);break;default:J$v.parse(this,J$d)}this._endLoaded()},J$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},J$b.getAnimationCount=function(){return this._anis.length},J$b.getAnimation=function(J$a){return this._anis[J$a]},J$b.getAniDuration=function(J$a){return this._anis[J$a].playTime},J$b.getNodes=function(J$a){return this._anis[J$a].nodes},J$b.getNodeIndexWithName=function(J$a,J$b){return this._anis[J$a].bone3DMap[J$b]},J$b.getNodeCount=function(J$a){return this._anis[J$a].nodes.length},J$b.getTotalkeyframesLength=function(J$a){return this._anis[J$a].totalKeyframeDatasLength},J$b.getPublicExtData=function(){return this._publicExtData},J$b.getAnimationDataWithCache=function(J$a,J$b,J$c,J$d){var J$e=J$b[J$c];if(J$e){var J$f=J$e[J$a];return J$f?J$f[J$d]:null}return null},J$b.setAnimationDataWithCache=function(J$a,J$b,J$c,J$d,J$e){var J$f=J$b[J$c]||(J$b[J$c]={});(J$f[J$a]||(J$f[J$a]=[]))[J$d]=J$e},J$b.getOriginalData=function(J$a,J$b,J$c,J$d,J$e){for(var J$f=this._anis[J$a].nodes,J$g=0,J$h=0,J$i=J$f.length,J$j=0;J$h<J$i;J$h++){var J$k,J$l=J$f[J$h];J$k=J$l.keyFrame[J$c[J$h][J$d]],J$l.dataOffset=J$j;var J$m=J$e-J$k.startTime,J$n=J$l.lerpType;if(J$n)switch(J$n){case 0:case 1:for(J$g=0;J$g<J$l.keyframeWidth;)J$g+=J$l.interpolationMethod[J$g](J$l,J$g,J$b,J$j+J$g,J$k.data,J$m,null,J$k.duration,J$k.nextData);break;case 2:var J$o=J$k.interpolationData,J$p=J$o.length,J$q=0;for(J$g=0;J$g<J$p;){var J$r=J$o[J$g];switch(J$r){case 6:case 7:J$g+=J$u.interpolation[J$r](J$l,J$q,J$b,J$j+J$q,J$k.data,J$m,null,J$k.duration,J$k.nextData,J$o,J$g+1);break;default:J$g+=J$u.interpolation[J$r](J$l,J$q,J$b,J$j+J$q,J$k.data,J$m,null,J$k.duration,J$k.nextData)}J$q++}}else for(J$g=0;J$g<J$l.keyframeWidth;)J$g+=J$l.interpolationMethod[J$g](J$l,J$g,J$b,J$j+J$g,J$k.data,J$m,null,J$k.duration,J$k.nextData);J$j+=J$l.keyframeWidth}},J$b.getNodesCurrentFrameIndex=function(J$a,J$b){var J$c=this._anis[J$a].nodes;J$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(J$c.length),this.unfixedCurrentTimes=new Float32Array(J$c.length),this.unfixedLastAniIndex=J$a);for(var J$d=0,J$e=J$c.length;J$d<J$e;J$d++){var J$f=J$c[J$d];for(J$b<this.unfixedCurrentTimes[J$d]&&(this.unfixedCurrentFrameIndexes[J$d]=0),this.unfixedCurrentTimes[J$d]=J$b;this.unfixedCurrentFrameIndexes[J$d]<J$f.keyFrame.length&&!(J$f.keyFrame[this.unfixedCurrentFrameIndexes[J$d]].startTime>this.unfixedCurrentTimes[J$d]);)this.unfixedCurrentFrameIndexes[J$d]++;this.unfixedCurrentFrameIndexes[J$d]--}return this.unfixedCurrentFrameIndexes},J$b.getOriginalDataUnfixedRate=function(J$a,J$b,J$c){var J$d=this._anis[J$a].nodes;J$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(J$d.length),this.unfixedCurrentTimes=new Float32Array(J$d.length),this.unfixedKeyframes=J$p(J$d.length),this.unfixedLastAniIndex=J$a);for(var J$e=0,J$f=0,J$g=J$d.length,J$h=0;J$f<J$g;J$f++){var J$i=J$d[J$f];for(J$c<this.unfixedCurrentTimes[J$f]&&(this.unfixedCurrentFrameIndexes[J$f]=0),this.unfixedCurrentTimes[J$f]=J$c;this.unfixedCurrentFrameIndexes[J$f]<J$i.keyFrame.length&&!(J$i.keyFrame[this.unfixedCurrentFrameIndexes[J$f]].startTime>this.unfixedCurrentTimes[J$f]);)this.unfixedKeyframes[J$f]=J$i.keyFrame[this.unfixedCurrentFrameIndexes[J$f]],this.unfixedCurrentFrameIndexes[J$f]++;var J$j=this.unfixedKeyframes[J$f];J$i.dataOffset=J$h;var J$k=J$c-J$j.startTime;if(J$i.lerpType)switch(J$i.lerpType){case 0:case 1:for(J$e=0;J$e<J$i.keyframeWidth;)J$e+=J$i.interpolationMethod[J$e](J$i,J$e,J$b,J$h+J$e,J$j.data,J$k,null,J$j.duration,J$j.nextData);break;case 2:var J$l=J$j.interpolationData,J$m=J$l.length,J$n=0;for(J$e=0;J$e<J$m;){var J$o=J$l[J$e];switch(J$o){case 6:case 7:J$e+=J$u.interpolation[J$o](J$i,J$n,J$b,J$h+J$n,J$j.data,J$k,null,J$j.duration,J$j.nextData,J$l,J$e+1);break;default:J$e+=J$u.interpolation[J$o](J$i,J$n,J$b,J$h+J$n,J$j.data,J$k,null,J$j.duration,J$j.nextData)}J$n++}}else for(J$e=0;J$e<J$i.keyframeWidth;)J$e+=J$i.interpolationMethod[J$e](J$i,J$e,J$b,J$h+J$e,J$j.data,J$k,null,J$j.duration,J$j.nextData);J$h+=J$i.keyframeWidth}},J$u._LinearInterpolation_0=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){var J$k=0===J$h?0:J$f/J$h;return J$c[J$d]=(1-J$k)*J$e[J$b]+J$k*J$i[J$b],1},J$u._QuaternionInterpolation_1=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){var J$k=0===J$h?0:J$f/J$h;return J$m.slerpQuaternionArray(J$e,J$b,J$i,J$b,J$k,J$c,J$d),4},J$u._AngleInterpolation_2=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return 0},J$u._RadiansInterpolation_3=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return 0},J$u._Matrix4x4Interpolation_4=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){for(var J$k=0;J$k<16;J$k++,J$b++)J$c[J$d+J$k]=J$e[J$b]+J$f*J$g[J$b];return 16},J$u._NoInterpolation_5=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j){return J$c[J$d]=J$e[J$b],1},J$u._BezierInterpolation_6=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k){return void 0===J$k&&(J$k=0),J$c[J$d]=J$e[J$b]+(J$i[J$b]-J$e[J$b])*J$A.getBezierRate(J$f/J$h,J$j[J$k],J$j[J$k+1],J$j[J$k+2],J$j[J$k+3]),5},J$u._BezierInterpolation_7=function(J$a,J$b,J$c,J$d,J$e,J$f,J$g,J$h,J$i,J$j,J$k){return void 0===J$k&&(J$k=0),J$c[J$d]=J$j[J$k+4]+J$j[J$k+5]*J$A.getBezierRate((.001*J$f+J$j[J$k+6])/J$j[J$k+7],J$j[J$k],J$j[J$k+1],J$j[J$k+2],J$j[J$k+3]),9},J$u.load=function(J$a){return J$ea.loader.create(J$a,null,null,J$u)},J$u.interpolation=[J$u._LinearInterpolation_0,J$u._QuaternionInterpolation_1,J$u._AngleInterpolation_2,J$u._RadiansInterpolation_3,J$u._Matrix4x4Interpolation_4,J$u._NoInterpolation_5,J$u._BezierInterpolation_6,J$u._BezierInterpolation_7],J$u}(),J$C=function(J$b){function J$c(J$a,J$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,J$c.__super.call(this),void 0===J$b&&(J$b=0),J$a&&this.init(J$a,J$b)}J$d(J$c,"laya.ani.bone.Skeleton",J$b);var J$a=J$c.prototype;return J$a.init=function(J$a,J$b){void 0===J$b&&(J$b=0);var J$c,J$d,J$e,J$f=0,J$g=0;if(1==J$b)for(this._graphicsCache=[],J$f=0,J$g=J$a.getAnimationCount();J$f<J$g;J$f++)this._graphicsCache.push([]);if(this._yReverseMatrix=J$a.yReverseMatrix,this._aniMode=J$b,this._templet=J$a,this._player=new J$B,this._player.cacheFrameRate=J$a.rate,this._player.templet=J$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=J$a.mBoneArr,this._rootBone=J$a.mRootBone,this._aniSectionDic=J$a.aniSectionDic,0<J$a.ikArr.length)for(this._ikArr=[],J$f=0,J$g=J$a.ikArr.length;J$f<J$g;J$f++)this._ikArr.push(new J$u(J$a.ikArr[J$f],this._boneList));if(0<J$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),J$f=0,J$g=J$a.pathArr.length;J$f<J$g;J$f++)J$c=J$a.pathArr[J$f],J$d=new J$x(J$c,this._boneList),(J$e=this._boneSlotDic[J$c.name])&&((J$d=new J$x(J$c,this._boneList)).target=J$e),this._pathDic[J$c.name]=J$d;if(0<J$a.tfArr.length)for(this._tfArr=[],J$f=0,J$g=J$a.tfArr.length;J$f<J$g;J$f++)this._tfArr.push(new J$y(J$a.tfArr[J$f],this._boneList));if(0<J$a.skinDataArray.length){var J$h=this._templet.skinDataArray[this._skinIndex];this._skinName=J$h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},J$a.load=function(J$a,J$b,J$c){},J$a._onLoaded=function(){},J$a._parseComplete=function(){var J$a=J$D.TEMPLET_DICTIONARY[this._aniPath];J$a&&(this.init(J$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},J$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},J$a._onPlay=function(){this.event("played")},J$a._onStop=function(){var J$a,J$b=this._templet.eventAniArr[this._aniClipIndex];if(J$b&&this._eventIndex<J$b.length)for(;this._eventIndex<J$b.length;this._eventIndex++)(J$a=J$b[this._eventIndex]).time>=this._player.playStart&&J$a.time<=this._player.playEnd&&this.event("label",J$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},J$a._onPause=function(){this.event("paused")},J$a._parseSrcBoneMatrix=function(){var J$a=0,J$b=0;for(J$b=this._templet.srcBoneMatrixArr.length,J$a=0;J$a<J$b;J$a++)this._boneMatrixArray.push(new J$Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var J$c,J$d,J$e=this._templet.boneSlotArray;for(J$a=0,J$b=J$e.length;J$a<J$b;J$a++)J$c=J$e[J$a],null==(J$d=this._bindBoneBoneSlotDic[J$c.parent])&&(this._bindBoneBoneSlotDic[J$c.parent]=J$d=[]),this._boneSlotDic[J$c.name]=J$c=J$c.copy(),J$d.push(J$c),this._boneSlotArray.push(J$c)}},J$a._emitMissedEvents=function(J$a,J$b,J$c){void 0===J$c&&(J$c=0);var J$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(J$d){var J$e,J$f,J$g=0;for(J$e=J$d.length,J$g=J$c;J$g<J$e;J$g++)(J$f=J$d[J$g]).time>=this._player.playStart&&J$f.time<=this._player.playEnd&&this.event("label",J$f)}},J$a._update=function(J$a){if(void 0===J$a&&(J$a=!0),!(this._pause||J$a&&this._indexControl)){var J$b=this.timer.currTimer,J$c=this._player.currentKeyframeIndex,J$d=J$b-this._lastTime;if(J$a?this._player._update(J$d):J$c=-1,this._lastTime=J$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<J$d&&this._clipIndex==J$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var J$e;this._lastUpdateAniClipIndex=this._aniClipIndex,J$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var J$f,J$g=this._templet.eventAniArr[this._aniClipIndex];if(J$g&&this._eventIndex<J$g.length&&((J$e=J$g[this._eventIndex]).time>=this._player.playStart&&J$e.time<=this._player.playEnd?this._player.currentPlayTime>=J$e.time&&(this.event("label",J$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(J$f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=J$f&&(this.graphics=J$f));var J$h=0,J$i=0;for(J$i=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,J$i-1)&&0<J$i;)J$i--;if(J$i<this._clipIndex)for(J$h=J$i;J$h<this._clipIndex;J$h++)this._createGraphics(J$h)}else if(1==this._aniMode){if(J$f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=J$f&&(this.graphics=J$f));for(J$i=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,J$i-1)&&0<J$i;)J$i--;if(J$i<this._clipIndex)for(J$h=J$i;J$h<this._clipIndex;J$h++)this._createGraphics(J$h)}this._createGraphics()}}},J$a._createGraphics=function(J$a){void 0===J$a&&(J$a=-1),-1==J$a&&(J$a=this._clipIndex);var J$b,J$c,J$d=J$a*this._player.cacheFrameRateInterval,J$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(J$e&&0<J$e.length)for(this._drawOrderIndex=0,J$b=J$e[this._drawOrderIndex];J$d>=J$b.time&&(this._drawOrder=J$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=J$e.length));)J$b=J$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=J$J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=J$J.create(),J$c=this.graphics;var J$f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],J$a,J$d);var J$g,J$h,J$i,J$j,J$k=this._aniSectionDic[this._aniClipIndex],J$l=0,J$m=0,J$n=0,J$o=0,J$p=0,J$q=this._templet.srcBoneMatrixArr.length;for(J$p=J$k[J$m=0];J$m<J$q;J$m++)J$j=this._boneList[J$m],J$i=this._templet.srcBoneMatrixArr[J$m],J$j.resultTransform.scX=J$i.scX*this._curOriginalData[J$l++],J$j.resultTransform.skX=J$i.skX+this._curOriginalData[J$l++],J$j.resultTransform.skY=J$i.skY+this._curOriginalData[J$l++],J$j.resultTransform.scY=J$i.scY*this._curOriginalData[J$l++],J$j.resultTransform.x=J$i.x+this._curOriginalData[J$l++],J$j.resultTransform.y=J$i.y+this._curOriginalData[J$l++],8===this._templet.tMatrixDataLen&&(J$j.resultTransform.skewX=J$i.skewX+this._curOriginalData[J$l++],J$j.resultTransform.skewY=J$i.skewY+this._curOriginalData[J$l++]);var J$r,J$u={},J$v={};for(J$p+=J$k[1];J$m<J$p;J$m++)J$u[(J$r=J$f[J$m]).name]=this._curOriginalData[J$l++],J$v[J$r.name]=this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++];var J$w,J$x,J$y={},J$z={};for(J$p+=J$k[2];J$m<J$p;J$m++)J$y[(J$r=J$f[J$m]).name]=this._curOriginalData[J$l++],J$z[J$r.name]=this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++],this._curOriginalData[J$l++];if(this._pathDic)for(J$p+=J$k[3];J$m<J$p;J$m++){if(J$r=J$f[J$m],J$w=this._pathDic[J$r.name])switch(new J$Fa(J$r.extenData).getByte()){case 1:J$w.position=this._curOriginalData[J$l++];break;case 2:J$w.spacing=this._curOriginalData[J$l++];break;case 3:J$w.rotateMix=this._curOriginalData[J$l++],J$w.translateMix=this._curOriginalData[J$l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(J$Ga.TEMP.identity()),this._ikArr)for(J$m=0,J$p=this._ikArr.length;J$m<J$p;J$m++)J$x=this._ikArr[J$m],J$y.hasOwnProperty(J$x.name)&&(J$x.bendDirection=J$y[J$x.name]),J$z.hasOwnProperty(J$x.name)&&(J$x.mix=J$z[J$x.name]),J$x.apply();if(this._pathDic)for(var J$A in this._pathDic)(J$w=this._pathDic[J$A]).apply(this._boneList,J$c);if(this._tfArr)for(J$m=0,J$o=this._tfArr.length;J$m<J$o;J$m++)this._tfArr[J$m].apply();for(J$m=0,J$o=this._boneList.length;J$m<J$o;J$m++)if(J$j=this._boneList[J$m],J$h=this._bindBoneBoneSlotDic[J$j.name],J$j.resultMatrix.copyTo(this._boneMatrixArray[J$m]),J$h)for(J$n=0,J$p=J$h.length;J$n<J$p;J$n++)(J$g=J$h[J$n])&&J$g.setParentMatrix(J$j.resultMatrix);var J$B,J$C,J$D,J$E,J$F={},J$G=this._templet.deformAniArr;if(J$G&&0<J$G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,J$m=0,J$p=this._boneSlotArray.length;J$m<J$p;J$m++)(J$g=this._boneSlotArray[J$m]).deformData=null;var J$H,J$I=J$G[this._aniClipIndex];for(J$H in J$B=J$I.default,this._setDeform(J$B,J$F,this._boneSlotArray,J$d),J$I)"default"!=J$H&&J$H!=this._skinName&&(J$B=J$I[J$H],this._setDeform(J$B,J$F,this._boneSlotArray,J$d));J$B=J$I[this._skinName],this._setDeform(J$B,J$F,this._boneSlotArray,J$d)}if(this._drawOrder)for(J$m=0,J$p=this._drawOrder.length;J$m<J$p;J$m++)J$C=J$u[(J$g=this._boneSlotArray[this._drawOrder[J$m]]).name],J$D=J$v[J$g.name],isNaN(J$D)||(J$c.save(),J$c.alpha(J$D)),isNaN(J$C)||-2==J$C||(this._templet.attachmentNames?J$g.showDisplayByName(this._templet.attachmentNames[J$C]):J$g.showDisplayByIndex(J$C)),J$F[this._drawOrder[J$m]]?(J$E=J$F[this._drawOrder[J$m]],J$g.currDisplayData&&J$E[J$g.currDisplayData.attachmentName]?J$g.deformData=J$E[J$g.currDisplayData.attachmentName]:J$g.deformData=null):J$g.deformData=null,isNaN(J$D)?J$g.draw(J$c,this._boneMatrixArray,2==this._aniMode):J$g.draw(J$c,this._boneMatrixArray,2==this._aniMode,J$D),isNaN(J$D)||J$c.restore();else for(J$m=0,J$p=this._boneSlotArray.length;J$m<J$p;J$m++)J$C=J$u[(J$g=this._boneSlotArray[J$m]).name],J$D=J$v[J$g.name],isNaN(J$D)||(J$c.save(),J$c.alpha(J$D)),isNaN(J$C)||-2==J$C||(this._templet.attachmentNames?J$g.showDisplayByName(this._templet.attachmentNames[J$C]):J$g.showDisplayByIndex(J$C)),J$F[J$m]?(J$E=J$F[J$m],J$g.currDisplayData&&J$E[J$g.currDisplayData.attachmentName]?J$g.deformData=J$E[J$g.currDisplayData.attachmentName]:J$g.deformData=null):J$g.deformData=null,isNaN(J$D)?J$g.draw(J$c,this._boneMatrixArray,2==this._aniMode):J$g.draw(J$c,this._boneMatrixArray,2==this._aniMode,J$D),isNaN(J$D)||J$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,J$a,J$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,J$a,J$c)},J$a._setDeform=function(J$a,J$b,J$c,J$d){if(J$a){var J$e,J$f,J$g,J$h=0,J$i=0,J$j=0;if(J$a)for(J$h=0,J$i=J$a.deformSlotDataList.length;J$h<J$i;J$h++)for(J$e=J$a.deformSlotDataList[J$h],J$j=0;J$j<J$e.deformSlotDisplayList.length;J$j++)J$g=J$c[(J$f=J$e.deformSlotDisplayList[J$j]).slotIndex],J$f.apply(J$d,J$g),J$b[J$f.slotIndex]||(J$b[J$f.slotIndex]={}),J$b[J$f.slotIndex][J$f.attachment]=J$f.deformData}},J$a.getAnimNum=function(){return this._templet.getAnimationCount()},J$a.getAniNameByIndex=function(J$a){return this._templet.getAniNameByIndex(J$a)},J$a.getSlotByName=function(J$a){return this._boneSlotDic[J$a]},J$a.showSkinByName=function(J$a,J$b){void 0===J$b&&(J$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(J$a),J$b)},J$a.showSkinByIndex=function(J$a,J$b){void 0===J$b&&(J$b=!0);for(var J$c=0;J$c<this._boneSlotArray.length;J$c++)this._boneSlotArray[J$c].showSlotData(null,J$b);if(this._templet.showSkinByIndex(this._boneSlotDic,J$a,J$b)){var J$d=this._templet.skinDataArray[J$a];this._skinIndex=J$a,this._skinName=J$d.name}this._clearCache()},J$a.showSlotSkinByIndex=function(J$a,J$b){if(0!=this._aniMode){var J$c=this.getSlotByName(J$a);J$c&&J$c.showDisplayByIndex(J$b),this._clearCache()}},J$a.showSlotSkinByName=function(J$a,J$b){if(0!=this._aniMode){var J$c=this.getSlotByName(J$a);J$c&&J$c.showDisplayByName(J$b),this._clearCache()}},J$a.replaceSlotSkinName=function(J$a,J$b,J$c){if(0!=this._aniMode){var J$d=this.getSlotByName(J$a);J$d&&J$d.replaceDisplayByName(J$b,J$c),this._clearCache()}},J$a.replaceSlotSkinByIndex=function(J$a,J$b,J$c){if(0!=this._aniMode){var J$d=this.getSlotByName(J$a);J$d&&J$d.replaceDisplayByIndex(J$b,J$c),this._clearCache()}},J$a.setSlotSkin=function(J$a,J$b){if(0!=this._aniMode){var J$c=this.getSlotByName(J$a);J$c&&J$c.replaceSkin(J$b),this._clearCache()}},J$a._clearCache=function(){if(1==this._aniMode)for(var J$a=0,J$b=this._graphicsCache.length;J$a<J$b;J$a++){for(var J$c=0,J$d=this._graphicsCache[J$a].length;J$c<J$d;J$c++){var J$e=this._graphicsCache[J$a][J$c];J$e!=this.graphics&&J$J.recycle(J$e)}this._graphicsCache[J$a].length=0}},J$a.play=function(J$a,J$b,J$c,J$d,J$e,J$f){void 0===J$c&&(J$c=!0),void 0===J$d&&(J$d=0),void 0===J$e&&(J$e=0),void 0===J$f&&(J$f=!0),this._indexControl=!1;var J$g=-1,J$h=NaN;if(J$h=J$b?2147483647:0,"string"==typeof J$a)for(var J$i=0,J$j=this._templet.getAnimationCount();J$i<J$j;J$i++){var J$k=this._templet.getAnimation(J$i);if(J$k&&J$a==J$k.name){J$g=J$i;break}}else J$g=J$a;-1<J$g&&J$g<this.getAnimNum()&&(this._aniClipIndex=J$g,(J$c||this._pause||this._currAniIndex!=J$g)&&(this._currAniIndex=J$g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(J$g)),this._drawOrder=null,this._eventIndex=0,this._player.play(J$g,this._player.playbackRate,J$h,J$d,J$e),J$f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=J$l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},J$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},J$a.playbackRate=function(J$a){this._player&&(this._player.playbackRate=J$a)},J$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},J$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=J$l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},J$a._getGrahicsDataWithCache=function(J$a,J$b){return this._graphicsCache[J$a][J$b]},J$a._setGrahicsDataWithCache=function(J$a,J$b,J$c){this._graphicsCache[J$a][J$b]=J$c},J$a.destroy=function(J$a){void 0===J$a&&(J$a=!0),J$b.prototype.destroy.call(this,J$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},J$f(0,J$a,"url",function(){return this._aniPath},function(J$a){this.load(J$a)}),J$f(0,J$a,"index",function(){return this._index},function(J$a){this.player&&(this._index=J$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),J$f(0,J$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),J$f(0,J$a,"templet",function(){return this._templet}),J$f(0,J$a,"player",function(){return this._player}),J$c.useSimpleMeshInCanvas=!1,J$c}(J$fa),J$D=function(J$b){function J$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,J$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}J$d(J$e,"laya.ani.bone.Templet",J$b);var J$a=J$e.prototype;return J$a.getLoadList=function(){return this._loadList},J$a.loadAni=function(J$a){this._skBufferUrl=J$a,J$ea.loader.load(J$a,J$i.create(this,this.onComplete),null,"arraybuffer")},J$a.onComplete=function(J$a){if(this._isDestroyed)this.destroy();else{var J$b=J$j.getRes(this._skBufferUrl);J$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,J$b)):this.event("error","load failed:"+this._skBufferUrl)}},J$a.parseData=function(J$a,J$b,J$c){void 0===J$c&&(J$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=J$a,this._mainTexture&&J$q.isWebGL&&J$a.bitmap&&(J$a.bitmap.enableMerageInAtlas=!1),this._rate=J$c,this.parse(J$b)},J$a.buildArmature=function(J$a){return void 0===J$a&&(J$a=0),new J$C(this,J$a)},J$a.parse=function(J$a){J$b.prototype.parse.call(this,J$a),this._endLoaded(),this._aniVersion!=J$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+J$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},J$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var J$a=0;this._loadList=[];var J$b,J$c=new J$Fa(this.getPublicExtData()),J$d=0,J$e=0,J$f=0,J$g=J$c.getInt32(),J$h=J$c.readUTFString(),J$i=J$h.split("\n");for(J$a=0;J$a<J$g;J$a++)J$b=this._path+J$i[2*J$a],J$h=J$i[2*J$a+1],J$c.getFloat32(),J$c.getFloat32(),J$d=J$c.getFloat32(),J$e=J$c.getFloat32(),J$f=J$c.getFloat32(),isNaN(J$f)?0:J$f,J$f=J$c.getFloat32(),isNaN(J$f)?0:J$f,J$f=J$c.getFloat32(),isNaN(J$f)?J$d:J$f,J$f=J$c.getFloat32(),isNaN(J$f)?J$e:J$f,-1==this._loadList.indexOf(J$b)&&this._loadList.push(J$b);this.event("inited",this)}},J$a._textureComplete=function(){for(var J$a,J$b,J$c=0,J$d=this._loadList.length;J$c<J$d;J$c++)J$b=this._loadList[J$c],J$a=this._textureDic[J$b]=J$j.getRes(J$b),J$q.isWebGL&&J$a&&J$a.bitmap&&(J$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},J$a._parsePublicExtData=function(){var J$a=0,J$b=0,J$c=0,J$d=0,J$e=0;for(J$a=0,J$e=this.getAnimationCount();J$a<J$e;J$a++)this._graphicsCache.push([]);var J$f;J$f="Dragon"!=this._aniClassName;var J$g,J$h,J$i=new J$Fa(this.getPublicExtData()),J$j=0,J$k=0,J$l=0,J$m=0,J$n=0,J$o=0,J$p=0,J$q=0,J$r=0,J$u=J$i.getInt32(),J$v=J$i.readUTFString(),J$w=J$v.split("\n");for(J$a=0;J$a<J$u;J$a++){if(J$g=this._mainTexture,J$h=this._path+J$w[2*J$a],J$v=J$w[2*J$a+1],null==this._mainTexture&&(J$g=this._textureDic[J$h]),!J$g)return this.event("error",this),void(this.isParseFail=!0);J$j=J$i.getFloat32(),J$k=J$i.getFloat32(),J$l=J$i.getFloat32(),J$m=J$i.getFloat32(),J$r=J$i.getFloat32(),J$n=isNaN(J$r)?0:J$r,J$r=J$i.getFloat32(),J$o=isNaN(J$r)?0:J$r,J$r=J$i.getFloat32(),J$p=isNaN(J$r)?J$l:J$r,J$r=J$i.getFloat32(),J$q=isNaN(J$r)?J$m:J$r,this.subTextureDic[J$v]=J$Ha.create(J$g,J$j,J$k,J$l,J$m,-J$n,-J$o,J$p,J$q),J$g.alphaTexture&&(this.subTextureDic[J$v].alphaTexture=J$Ha.create(J$g.alphaTexture,J$j,J$k,J$l,J$m,-J$n,-J$o,J$p,J$q))}this._mainTexture=J$g;var J$x,J$y,J$z,J$A,J$B,J$C=J$i.getUint16();for(J$a=0;J$a<J$C;J$a++)(J$x=[]).push(J$i.getUint16()),J$x.push(J$i.getUint16()),J$x.push(J$i.getUint16()),J$x.push(J$i.getUint16()),this.aniSectionDic[J$a]=J$x;var J$D,J$E=J$i.getInt16(),J$F={};for(J$a=0;J$a<J$E;J$a++)J$y=new J$Ia,0==J$a?J$D=J$y:J$y.root=J$D,J$y.d=J$f?-1:1,J$A=J$i.readUTFString(),J$B=J$i.readUTFString(),J$y.length=J$i.getFloat32(),1==J$i.getByte()&&(J$y.inheritRotation=!1),1==J$i.getByte()&&(J$y.inheritScale=!1),J$y.name=J$A,J$B&&((J$z=J$F[J$B])?J$z.addChild(J$y):this.mRootBone=J$y),J$F[J$A]=J$y,this.mBoneArr.push(J$y);this.tMatrixDataLen=J$i.getUint16();var J$G,J$H,J$I=J$i.getUint16(),J$J=Math.floor(J$I/this.tMatrixDataLen),J$K=this.srcBoneMatrixArr;for(J$a=0;J$a<J$J;J$a++)(J$G=new J$Va).scX=J$i.getFloat32(),J$G.skX=J$i.getFloat32(),J$G.skY=J$i.getFloat32(),J$G.scY=J$i.getFloat32(),J$G.x=J$i.getFloat32(),J$G.y=J$i.getFloat32(),8===this.tMatrixDataLen&&(J$G.skewX=J$i.getFloat32(),J$G.skewY=J$i.getFloat32()),J$K.push(J$G),(J$y=this.mBoneArr[J$a]).transform=J$G;var J$L,J$M=J$i.getUint16(),J$N=0;for(J$a=0;J$a<J$M;J$a++){for(J$H=new J$Pa,J$N=J$i.getUint16(),J$b=0;J$b<J$N;J$b++)J$H.boneNames.push(J$i.readUTFString()),J$H.boneIndexs.push(J$i.getInt16());J$H.name=J$i.readUTFString(),J$H.targetBoneName=J$i.readUTFString(),J$H.targetBoneIndex=J$i.getInt16(),J$H.bendDirection=J$i.getFloat32(),J$H.mix=J$i.getFloat32(),J$H.isSpine=J$f,this.ikArr.push(J$H)}var J$O,J$P=J$i.getUint16(),J$Q=0;for(J$a=0;J$a<J$P;J$a++){for(J$L=new J$Ua,J$Q=J$i.getUint16(),J$b=0;J$b<J$Q;J$b++)J$L.boneIndexs.push(J$i.getInt16());J$L.name=J$i.getUTFString(),J$L.targetIndex=J$i.getInt16(),J$L.rotateMix=J$i.getFloat32(),J$L.translateMix=J$i.getFloat32(),J$L.scaleMix=J$i.getFloat32(),J$L.shearMix=J$i.getFloat32(),J$L.offsetRotation=J$i.getFloat32(),J$L.offsetX=J$i.getFloat32(),J$L.offsetY=J$i.getFloat32(),J$L.offsetScaleX=J$i.getFloat32(),J$L.offsetScaleY=J$i.getFloat32(),J$L.offsetShearY=J$i.getFloat32(),this.tfArr.push(J$L)}var J$R=J$i.getUint16(),J$S=0;for(J$a=0;J$a<J$R;J$a++){for((J$O=new J$Qa).name=J$i.readUTFString(),J$S=J$i.getUint16(),J$b=0;J$b<J$S;J$b++)J$O.bones.push(J$i.getInt16());J$O.target=J$i.readUTFString(),J$O.positionMode=J$i.readUTFString(),J$O.spacingMode=J$i.readUTFString(),J$O.rotateMode=J$i.readUTFString(),J$O.offsetRotation=J$i.getFloat32(),J$O.position=J$i.getFloat32(),J$O.spacing=J$i.getFloat32(),J$O.rotateMix=J$i.getFloat32(),J$O.translateMix=J$i.getFloat32(),this.pathArr.push(J$O)}var J$T,J$U,J$V,J$W,J$X,J$Y=0,J$Z=0,J$$=0,J$_=NaN,J$s=0,J$t=J$i.getInt16();for(J$a=0;J$a<J$t;J$a++){var J$aa=J$i.getUint8(),J$ba={};this.deformAniArr.push(J$ba);for(var J$ca=0;J$ca<J$aa;J$ca++)for((J$T=new J$Ka).skinName=J$i.getUTFString(),J$ba[J$T.skinName]=J$T,J$Y=J$i.getInt16(),J$b=0;J$b<J$Y;J$b++)for(J$U=new J$La,J$T.deformSlotDataList.push(J$U),J$Z=J$i.getInt16(),J$c=0;J$c<J$Z;J$c++)for(J$V=new J$Ma,J$U.deformSlotDisplayList.push(J$V),J$V.slotIndex=J$i.getInt16(),J$V.attachment=J$i.getUTFString(),J$$=J$i.getInt16(),J$d=0;J$d<J$$;J$d++)for(1==J$i.getByte()?J$V.tweenKeyList.push(!0):J$V.tweenKeyList.push(!1),J$_=J$i.getFloat32(),J$V.timeList.push(J$_),J$W=[],J$V.vectices.push(J$W),J$s=J$i.getInt16(),J$e=0;J$e<J$s;J$e++)J$W.push(J$i.getFloat32())}var J$da,J$ea,J$fa=J$i.getInt16(),J$ga=0,J$ha=0;for(J$a=0;J$a<J$fa;J$a++){for(J$ga=J$i.getInt16(),J$X=[],J$b=0;J$b<J$ga;J$b++){for((J$da=new J$Na).time=J$i.getFloat32(),J$ha=J$i.getInt16(),J$c=0;J$c<J$ha;J$c++)J$da.drawOrder.push(J$i.getInt16());J$X.push(J$da)}this.drawOrderAniArr.push(J$X)}var J$ia,J$ja=J$i.getInt16(),J$ka=0;for(J$a=0;J$a<J$ja;J$a++){for(J$ka=J$i.getInt16(),J$ea=[],J$b=0;J$b<J$ka;J$b++)(J$ia=new J$Oa).name=J$i.getUTFString(),J$ia.intValue=J$i.getInt32(),J$ia.floatValue=J$i.getFloat32(),J$ia.stringValue=J$i.getUTFString(),J$ia.time=J$i.getFloat32(),J$ea.push(J$ia);this.eventAniArr.push(J$ea)}var J$la=J$i.getInt16();if(0<J$la)for(this.attachmentNames=[],J$a=0;J$a<J$la;J$a++)this.attachmentNames.push(J$i.getUTFString());var J$ma,J$na,J$oa=J$i.getInt16();for(J$a=0;J$a<J$oa;J$a++)(J$ma=new J$Ja).name=J$i.readUTFString(),J$ma.parent=J$i.readUTFString(),J$ma.attachmentName=J$i.readUTFString(),J$ma.srcDisplayIndex=J$ma.displayIndex=J$i.getInt16(),(J$ma.templet=this).boneSlotDic[J$ma.name]=J$ma,null==(J$na=this.bindBoneBoneSlotDic[J$ma.parent])&&(this.bindBoneBoneSlotDic[J$ma.parent]=J$na=[]),J$na.push(J$ma),this.boneSlotArray.push(J$ma);var J$pa,J$qa,J$ra,J$ua=J$i.readUTFString().split("\n"),J$va=0,J$wa=J$i.getUint8(),J$xa=0,J$ya=0,J$za=0,J$Aa=0,J$Ba=0,J$Ca=0,J$Da=0;for(J$a=0;J$a<J$wa;J$a++){for((J$pa=new J$Ra).name=J$ua[J$va++],J$xa=J$i.getUint8(),J$b=0;J$b<J$xa;J$b++){for((J$qa=new J$Ta).name=J$ua[J$va++],J$ma=this.boneSlotDic[J$qa.name],J$ya=J$i.getUint8(),J$c=0;J$c<J$ya;J$c++){if(J$ra=new J$Sa,this.skinSlotDisplayDataArr.push(J$ra),J$ra.name=J$ua[J$va++],J$ra.attachmentName=J$ua[J$va++],J$ra.transform=new J$Va,J$ra.transform.scX=J$i.getFloat32(),J$ra.transform.skX=J$i.getFloat32(),J$ra.transform.skY=J$i.getFloat32(),J$ra.transform.scY=J$i.getFloat32(),J$ra.transform.x=J$i.getFloat32(),J$ra.transform.y=J$i.getFloat32(),J$qa.displayArr.push(J$ra),J$ra.width=J$i.getFloat32(),J$ra.height=J$i.getFloat32(),J$ra.type=J$i.getUint8(),J$ra.verLen=J$i.getUint16(),0<(J$E=J$i.getUint16()))for(J$ra.bones=[],J$d=0;J$d<J$E;J$d++){var J$Ea=J$i.getUint16();J$ra.bones.push(J$Ea)}if(0<(J$za=J$i.getUint16()))for(J$ra.uvs=[],J$d=0;J$d<J$za;J$d++)J$ra.uvs.push(J$i.getFloat32());if(0<(J$Aa=J$i.getUint16()))for(J$ra.weights=[],J$d=0;J$d<J$Aa;J$d++)J$ra.weights.push(J$i.getFloat32());if(0<(J$Ba=J$i.getUint16()))for(J$ra.triangles=[],J$d=0;J$d<J$Ba;J$d++)J$ra.triangles.push(J$i.getUint16());if(0<(J$Ca=J$i.getUint16()))for(J$ra.vertices=[],J$d=0;J$d<J$Ca;J$d++)J$ra.vertices.push(J$i.getFloat32());if(0<(J$Da=J$i.getUint16()))for(J$ra.lengths=[],J$d=0;J$d<J$Da;J$d++)J$ra.lengths.push(J$i.getFloat32())}J$pa.slotArr.push(J$qa)}this.skinDic[J$pa.name]=J$pa,this.skinDataArray.push(J$pa)}1==J$i.getUint8()?(this.yReverseMatrix=new J$Ga(1,0,0,-1,0,0),J$D&&J$D.setTempMatrix(this.yReverseMatrix)):J$D&&J$D.setTempMatrix(new J$Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},J$a.getTexture=function(J$a){var J$b=this.subTextureDic[J$a];return J$b||(J$b=this.subTextureDic[J$a.substr(0,J$a.length-1)]),null==J$b?this._mainTexture:J$b},J$a.showSkinByIndex=function(J$a,J$b,J$c){if(void 0===J$c&&(J$c=!0),J$b<0&&J$b>=this.skinDataArray.length)return!1;var J$d,J$e,J$f=0,J$g=0,J$h=this.skinDataArray[J$b];if(J$h){for(J$f=0,J$g=J$h.slotArr.length;J$f<J$g;J$f++)(J$e=J$h.slotArr[J$f])&&(J$d=J$a[J$e.name])&&(J$d.showSlotData(J$e,J$c),J$c&&"undefined"!=J$d.attachmentName&&"null"!=J$d.attachmentName?J$d.showDisplayByName(J$d.attachmentName):J$d.showDisplayByIndex(J$d.displayIndex));return!0}return!1},J$a.getSkinIndexByName=function(J$a){for(var J$b=0,J$c=this.skinDataArray.length;J$b<J$c;J$b++)if(this.skinDataArray[J$b].name==J$a)return J$b;return-1},J$a.getGrahicsDataWithCache=function(J$a,J$b){return this._graphicsCache[J$a][J$b]},J$a.setGrahicsDataWithCache=function(J$a,J$b,J$c){this._graphicsCache[J$a][J$b]=J$c},J$a.destroy=function(){var J$a;for(var J$b in this._isDestroyed=!0,this.subTextureDic)(J$a=this.subTextureDic[J$b])&&J$a.destroy();for(J$b in this._textureDic)(J$a=this._textureDic[J$b])&&J$a.destroy();for(var J$c=0,J$d=this.skinSlotDisplayDataArr.length;J$c<J$d;J$c++)this.skinSlotDisplayDataArr[J$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete J$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},J$a.getAniNameByIndex=function(J$a){var J$b=this.getAnimation(J$a);return J$b?J$b.name:null},J$f(0,J$a,"rate",function(){return this._rate},function(J$a){this._rate=J$a}),J$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",J$e.TEMPLET_DICTIONARY=null,J$e}(J$K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(J$a,J$b){"use strict";for(var J$c in Object.defineProperty(J$b,"__esModule",{value:!0}),Laya){var J$d=Laya[J$c];J$d&&J$d.__isclass&&(J$b[J$c]=J$d)}});