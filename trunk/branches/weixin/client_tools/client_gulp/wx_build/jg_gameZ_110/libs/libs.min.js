var Laya=window.Laya=function(e$r,e$D){var e$f={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(e$D,e$m){return 1==arguments.length?e$f.__presubstr.call(this,e$D):e$f.__presubstr.call(this,e$D,0<e$m?e$m:this.length+e$m)},__init:function(e$D){e$D.forEach(function(e$D){e$D.__init$&&e$D.__init$()})},__isClass:function(e$D){return e$D&&(e$D.__isclass||e$D==Object||e$D==String||e$D==Array)},__newvec:function(e$D,e$m){var e$Y=[];e$Y.length=e$D;for(var e$t=0;e$t<e$D;e$t++)e$Y[e$t]=e$m;return e$Y},__extend:function(e$D,e$m){for(var e$Y in e$m)if(e$m.hasOwnProperty(e$Y)){var e$t=Object.getOwnPropertyDescriptor(e$m,e$Y),e$y=e$t.get,e$l=e$t.set;e$y||e$l?e$y&&e$l?Object.defineProperty(e$D,e$Y,e$t):(e$y&&Object.defineProperty(e$D,e$Y,e$y),e$l&&Object.defineProperty(e$D,e$Y,e$l)):e$D[e$Y]=e$m[e$Y]}function e$E(){e$f.un(this,"constructor",e$D)}e$E.prototype=e$m.prototype,e$D.prototype=new e$E,e$f.un(e$D.prototype,"__imps",e$f.__copy({},e$m.prototype.__imps))},__copy:function(e$D,e$m){if(!e$m)return null;for(var e$Y in e$D=e$D||{},e$m)e$D[e$Y]=e$m[e$Y];return e$D},__package:function(e$D,e$m){if(!e$f.__packages[e$D]){e$f.__packages[e$D]=!0;var e$Y=e$r,e$t=e$D.split(".");if(1<e$t.length)for(var e$y=0,e$l=e$t.length-1;e$y<e$l;e$y++){var e$E=e$Y[e$t[e$y]];e$Y=e$E||(e$Y[e$t[e$y]]={})}e$Y[e$t[e$t.length-1]]||(e$Y[e$t[e$t.length-1]]=e$m||{})}},__hasOwnProperty:function(e$D,e$m){return e$m=e$m||this,Object.hasOwnProperty.call(e$m,e$D)||function e$D(e$m,e$Y){if(Object.hasOwnProperty.call(e$Y.prototype,e$m))return!0;var e$t=e$Y.prototype.__super;return null==e$t?null:e$D(e$m,e$t)}(e$D,e$m.__class)},__typeof:function(e$D,e$m){if(!e$D||!e$m)return!1;if(e$m===String)return"string"==typeof e$D;if(e$m===Number)return"number"==typeof e$D;if(e$m.__interface__)e$m=e$m.__interface__;else if("string"!=typeof e$m)return e$D instanceof e$m;return e$D.__imps&&e$D.__imps[e$m]||e$D.__class==e$m},__as:function(e$D,e$m){return this.__typeof(e$D,e$m)?e$D:null},__int:function(e$D){return e$D?parseInt(e$D):0},interface:function(e$D,e$m){e$f.__package(e$D,{});var e$Y=e$f.__internals,e$t=e$Y[e$D]=e$Y[e$D]||{self:e$D};if(e$m){var e$y=e$m.split(",");e$t.extend=[];for(var e$l=0;e$l<e$y.length;e$l++){var e$E=e$y[e$l];e$Y[e$E]=e$Y[e$E]||{self:e$E},e$t.extend.push(e$Y[e$E])}}var e$B=e$r,e$o=e$D.split(".");for(e$l=0;e$l<e$o.length-1;e$l++)e$B=e$B[e$o[e$l]];e$B[e$o[e$o.length-1]]={__interface__:e$D}},class:function(e$D,e$m,e$Y,e$t){if(e$Y&&e$f.__extend(e$D,e$Y),e$m)if(e$f.__package(e$m,e$D),e$f.__classmap[e$m]=e$D,0<e$m.indexOf(".")){if(0==e$m.indexOf("laya.")){var e$y=e$m.split(".");e$t=e$t||e$y[e$y.length-1],e$f[e$t]&&console.log("Warning!,this class["+e$t+"] already exist:",e$f[e$t]),e$f[e$t]=e$D}}else"Main"==e$m?e$r.Main=e$D:"MainWX"==e$m?e$r.MainWX=e$D:(e$f[e$m]&&console.log("Error!,this class["+e$m+"] already exist:",e$f[e$m]),e$f[e$m]=e$D);var e$l=e$f.un,e$E=e$D.prototype;e$l(e$E,"hasOwnProperty",e$f.__hasOwnProperty),e$l(e$E,"__class",e$D),e$l(e$E,"__super",e$Y),e$l(e$E,"__className",e$m),e$l(e$D,"__super",e$Y),e$l(e$D,"__className",e$m),e$l(e$D,"__isclass",!0),e$l(e$D,"super",function(e$D){this.__super.call(e$D)})},imps:function(e$D,e$m){if(!e$m)return null;var e$y=e$D.__imps||e$f.un(e$D,"__imps",{});function e$l(e$D){var e$m,e$Y;if((e$m=e$f.__internals[e$D])&&(e$y[e$D]=!0,e$Y=e$m.extend))for(var e$t=0;e$t<e$Y.length;e$t++)e$l(e$Y[e$t].self)}for(var e$Y in e$m)e$l(e$Y)},superSet:function(e$D,e$m,e$Y,e$t){var e$y=e$D.prototype["_$set_"+e$Y];e$y&&e$y.call(e$m,e$t)},superGet:function(e$D,e$m,e$Y){var e$t=e$D.prototype["_$get_"+e$Y];return e$t?e$t.call(e$m):null},getset:function(e$D,e$m,e$Y,e$t,e$y){e$D?(e$t&&(e$m["_$GET_"+e$Y]=e$t),e$y&&(e$m["_$SET_"+e$Y]=e$y)):(e$t&&e$f.un(e$m,"_$get_"+e$Y,e$t),e$y&&e$f.un(e$m,"_$set_"+e$Y,e$y)),e$t&&e$y?Object.defineProperty(e$m,e$Y,{get:e$t,set:e$y,enumerable:!1,configurable:!0}):(e$t&&Object.defineProperty(e$m,e$Y,{get:e$t,enumerable:!1,configurable:!0}),e$y&&Object.defineProperty(e$m,e$Y,{set:e$y,enumerable:!1,configurable:!0}))},static:function(e$Y,e$t){for(var e$y=0,e$D=e$t.length;e$y<e$D;e$y+=2)if("length"==e$t[e$y])e$Y.length=e$t[e$y+1].call(e$Y);else{function e$m(){var e$m=e$t[e$y],e$D=e$t[e$y+1];Object.defineProperty(e$Y,e$m,{get:function(){return delete this[e$m],this[e$m]=e$D.call(this)},set:function(e$D){delete this[e$m],this[e$m]=e$D},enumerable:!0,configurable:!0})}e$m()}},un:function(e$D,e$m,e$Y){return e$Y||(e$Y=e$D[e$m]),e$f.__propun.value=e$Y,Object.defineProperty(e$D,e$m,e$f.__propun),e$Y},uns:function(e$m,e$D){e$D.forEach(function(e$D){e$f.un(e$m,e$D)})}};return e$r.console=e$r.console||{log:function(){}},e$r.trace=e$r.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),e$f}(window,document);!function(e$D,e$m,e$Y){e$Y.un,e$Y.uns,e$Y.static,e$Y.class,e$Y.getset,e$Y.__newvec}(window,document,Laya),function(e$R,e$m,e$z){e$z.un,e$z.uns;var e$o=e$z.static,e$f=e$z.class,e$G=e$z.getset;e$z.__newvec;e$z.interface("laya.runtime.IMarket"),e$z.interface("laya.filters.IFilter"),e$z.interface("laya.display.ILayout"),e$z.interface("laya.resource.IDispose"),e$z.interface("laya.runtime.IPlatform"),e$z.interface("laya.resource.IDestroy"),e$z.interface("laya.runtime.IConchNode"),e$z.interface("laya.filters.IFilterAction"),e$z.interface("laya.runtime.ICPlatformClass"),e$z.interface("laya.resource.ICreateResource"),e$z.interface("laya.runtime.IConchRenderObject"),e$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var e$s=function(){function e$l(){}return e$f(e$l,"laya.utils.RunDriver"),e$l.FILTER_ACTIONS=[],e$l.pixelRatio=-1,e$l._charSizeTestDiv=null,e$l.now=function(){return Date.now()},e$l.getWindow=function(){return e$R},e$l.getPixelRatio=function(){if(e$l.pixelRatio<0){var e$D=e$u.context,e$m=e$D.backingStorePixelRatio||e$D.webkitBackingStorePixelRatio||e$D.mozBackingStorePixelRatio||e$D.msBackingStorePixelRatio||e$D.oBackingStorePixelRatio||e$D.backingStorePixelRatio||1;(e$l.pixelRatio=(e$u.window.devicePixelRatio||1)/e$m)<1&&(e$l.pixelRatio=1)}return e$l.pixelRatio},e$l.getIncludeStr=function(e$D){return null},e$l.createShaderCondition=function(e$D){var e$m="(function() {return "+e$D+";})";return e$z._runScript(e$m)},e$l.fontMap=[],e$l.measureText=function(e$D,e$m){var e$Y=e$l.hanzi.test(e$D);if(e$Y&&e$l.fontMap[e$m])return e$l.fontMap[e$m];var e$t=e$u.context;e$t.font=e$m;var e$y=e$t.measureText(e$D);return e$y||(e$y={width:16,height:16}),e$Y&&(e$l.fontMap[e$m]=e$y),e$y},e$l.getWebGLContext=function(e$D){},e$l.beginFlush=function(){},e$l.endFinish=function(){},e$l.addToAtlas=null,e$l.flashFlushImage=function(e$D){},e$l.drawToCanvas=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$eD.create("2D"),e$B=new e$O(e$Y,e$t,e$E);return e$h.renders[e$m]._fun(e$D,e$B,e$y,e$l),e$E},e$l.createParticleTemplate2D=null,e$l.createGLTextur=null,e$l.createWebGLContext2D=null,e$l.changeWebGLSize=function(e$D,e$m){},e$l.createRenderSprite=function(e$D,e$m){return new e$h(e$D,e$m)},e$l.createFilterAction=function(e$D){return new e$E},e$l.createGraphics=function(){return new e$i},e$l.clear=function(e$D){e$C._context.ctx.clear()},e$l.cancelLoadByUrl=function(e$D){},e$l.clearAtlas=function(e$D){},e$l.isAtlas=function(e$D){return!1},e$l.addTextureToAtlas=function(e$D){},e$l.getTexturePixels=function(e$D,e$m,e$Y,e$t,e$y){return null},e$l.skinAniSprite=function(){return null},e$l.update3DLoop=function(){},e$o(e$l,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),e$l}(),e$t=(e$G(1,e$z,"alertGlobalError",null,function(e$D){var e$l=0;e$u.window.onerror=e$D?function(e$D,e$m,e$Y,e$t,e$y){e$l++<5&&e$y&&alert(e$y.stack||e$y)}:null}),e$z.init=function(e$D,e$m,e$Y){for(var e$t=[],e$y=2,e$l=arguments.length;e$y<e$l;e$y++)e$t.push(arguments[e$y]);if(!e$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=e$z._arrayBufferSlice),e$z._isinit=!0,e$u.__init__(),e$X.__init__(),e$i.__init__(),e$z.timer=new e$x,e$z.scaleTimer=new e$x,e$z.loader=new e$oD,e$j.__init__(),e$y=0;for(var e$E=e$t.length;e$y<e$E;e$y++)e$t[e$y].enable&&e$t[e$y].enable();return e$I.__init__(),e$B.__init__(),e$P.__init__(),e$q.beginCheck(),e$z._currentStage=e$z.stage=new e$WD,e$z.stage.conchModel&&e$z.stage.conchModel.setRootNode(),e$z._getUrlPath(),e$z.render=new e$C(0,0),e$z.stage.size(e$D,e$m),e$h.__init__(),e$_.__init__(),e$w.instance.__init__(e$z.stage,e$C.canvas),e$cD.__init__(),e$F.autoStopMusic=!0,e$a.__init__(),e$C.canvas}},e$z._getUrlPath=function(){var e$D=e$u.window.location,e$m=e$D.pathname;e$m=e$m&&":"==e$m.charAt(2)?e$m.substring(1):e$m,e$N.rootPath=e$N.basePath=e$N.getPath("file:"==e$D.protocol?e$m:e$D.protocol+"//"+e$D.host+e$D.pathname)},e$z._arrayBufferSlice=function(e$D,e$m){var e$Y=new Uint8Array(this,e$D,e$m-e$D),e$t=new Uint8Array(e$Y.length);return e$t.set(e$Y),e$t.buffer},e$z._runScript=function(e$D){return e$u.window[e$z._evcode](e$D)},e$z.stage=null,e$z.timer=null,e$z.scaleTimer=null,e$z.loader=null,e$z.version="1.8.6",e$z.render=null,e$z._currentStage=null,e$z._isinit=!1,e$z.isDebug=!1,e$z.MiniAdpter={init:function(){e$R.navigator&&e$R.navigator.userAgent&&-1<e$R.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},e$o(e$z,["conchMarket",function(){return this.conchMarket=e$R.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=e$R.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function e$D(){}return e$f(e$D,"Config"),e$D.WebGLTextCacheCount=500,e$D.atlasEnable=!1,e$D.showCanvasMark=!1,e$D.animationInterval=50,e$D.isAntialias=!1,e$D.isAlpha=!1,e$D.premultipliedAlpha=!0,e$D.isStencil=!0,e$D.preserveDrawingBuffer=!1,e$D}()),e$r=function(){function e$r(){this._events=null}e$f(e$r,"laya.events.EventDispatcher");var e$D=e$r.prototype;return e$D.hasListener=function(e$D){return!!(this._events&&this._events[e$D])},e$D.getListener=function(e$D){return this._events?this._events[e$D]:null},e$D.event=function(e$D,e$m){if(!this._events||!this._events[e$D])return!1;var e$Y=this._events[e$D];if(e$Y.lock)e$Y.queue||(e$Y.queue=[]),e$Y.queue.push(e$m);else{var e$t;for(e$Y.lock=!0,e$Y.cursor=e$Y.head;e$Y.cursor;)(e$t=e$Y.cursor).recover?(e$Y.head=e$Y.tail=e$Y.cursor=null,console.error("node is recover："+e$t.id)):(e$Y.cursor=e$t.next,e$t.once&&e$r.delNode(e$Y,e$t),e$t.method&&(null!=e$m?e$t.args?e$t.method.apply(e$t.caller,e$t.args.concat(e$m)):e$m instanceof Array?e$t.method.apply(e$t.caller,e$m):e$t.caller?e$t.method.call(e$t.caller,e$m):e$z.recordError("事件派发错误","node.caller:"+e$t.caller+"node.method:"+e$t.method+"data:"+e$m+"node.prev"+e$t.prev):e$t.method.apply(e$t.caller,e$t.args)),e$t.once&&e$r.recoverHandler(e$t));e$Y.lock=!1,!e$Y.head&&this._events&&this._events[e$D]==e$Y&&delete this._events[e$D],e$Y.queue&&e$Y.queue.length&&this.event(e$D,e$Y.queue.shift())}return!0},e$D.on=function(e$D,e$m,e$Y,e$t){return this._createListener(e$D,e$m,e$Y,e$t,!1)},e$D.once=function(e$D,e$m,e$Y,e$t){return this._createListener(e$D,e$m,e$Y,e$t,!0)},e$D._createListener=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=!0),e$l&&this.off(e$D,e$m,e$Y,e$y);var e$E=e$r.createHandler(e$m||this,e$Y,e$t,e$y);this._events||(this._events={});var e$B=this._events,e$o=e$B[e$D];return e$o?e$o.tail?(e$E.prev=e$o.tail,e$o.tail.next=e$E,e$o.tail=e$E):e$o.head=e$o.tail=e$E:e$B[e$D]={head:e$E,tail:e$E,cursor:null,lock:!1},this},e$D.off=function(e$D,e$m,e$Y,e$t){if(void 0===e$t&&(e$t=!1),!this._events||!this._events[e$D])return this;for(var e$y=this._events[e$D],e$l=e$y.head;e$l;){if((!e$m||e$l.caller===e$m)&&e$l.method===e$Y&&(!e$t||e$l.once)){e$r.delNode(e$y,e$l),e$y.cursor==e$l&&(e$y.cursor=e$l.next),e$r.recoverHandler(e$l);break}e$l=e$l.next}return this},e$D.offAll=function(e$D){var e$m=this._events;if(!e$m)return this;if(e$D)this._recoverHandlers(e$m[e$D]),delete e$m[e$D];else{for(var e$Y in e$m)this._recoverHandlers(e$m[e$Y]);this._events=null}return this},e$D._recoverHandlers=function(e$D){if(e$D){for(var e$m=e$D.head;e$m;){e$r.delNode(e$D,e$m);var e$Y=e$m.next;e$r.recoverHandler(e$m),e$m=e$Y}e$D.cursor=null}},e$D.isMouseEvent=function(e$D){return e$r.MOUSE_EVENTS[e$D]},e$r.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},e$r.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},e$r.delNode=function(e$D,e$m){e$m.prev?e$m.prev.next=e$m.next:e$D.head=e$m.next,e$m.next?e$m.next.prev=e$m.prev:e$D.tail=e$m.prev},e$r.createHandler=function(e$D,e$m,e$Y,e$t){var e$y=500<e$r._freeHandler.length?e$r._freeHandler.shift():null;if(e$y)if(e$y.recover)e$y.recover=!1,e$y.caller=e$D,e$y.method=e$m,e$y.args=e$Y,e$y.once=e$t;else{var e$l="";try{arguments.propertyIsEnumerable.caller}catch(e$D){e$l=e$D.stack}var e$E=e$y.caller?(e$y.caller.__proto__&&e$y.caller.__proto__.constructor&&e$y.caller.__proto__.constructor.name)+"|"+e$y.caller.__className+"|"+e$y.caller.name:"",e$B=e$y.method?e$y.method.name:"";e$z.recordError("EventDispatcher重复创建","caller="+e$E+"  method="+e$B+"  stack="+e$l),e$y={id:++e$r._nodeCount,caller:e$D,method:e$m,args:e$Y,once:e$t,recover:!1}}else e$y={id:++e$r._nodeCount,caller:e$D,method:e$m,args:e$Y,once:e$t,recover:!1};return e$y.prev=e$y.next=null,e$y},e$r.recoverHandler=function(e$D){if(e$D.recover){if(e$r._errorCount<5){e$r._errorCount++;var e$m="";try{arguments.propertyIsEnumerable.caller}catch(e$D){e$m=e$D.stack}var e$Y=e$D.caller?(e$D.caller.__proto__&&e$D.caller.__proto__.constructor&&e$D.caller.__proto__.constructor.name)+"|"+e$D.caller.__className+"|"+e$D.caller.name:"",e$t=e$D.method?e$D.method.name:"";e$z.recordError("EventDispatcher重复回收","id="+e$D.id+"  caller="+e$Y+"  method="+e$t+"  stack="+e$m)}e$D.caller=e$D.method=e$D.args=e$D.prev=null}else e$D.recover=!0,e$D.caller=e$D.method=e$D.args=e$D.prev=e$D.next=null,e$r._freeHandler&&e$r._freeHandler.length<3e3&&e$r._freeHandler.push(e$D)},e$r._freeHandler=[],e$r._nodeCount=0,e$r._errorCount=0,e$r}(),e$U=function(){function e$y(e$D,e$m,e$Y,e$t){this.once=!1,void(this._id=0)===e$t&&(e$t=!1),this.setTo(e$D,e$m,e$Y,e$t)}e$f(e$y,"laya.utils.Handler");var e$D=e$y.prototype;return e$D.setTo=function(e$D,e$m,e$Y,e$t){return this._id=e$y._gid++,this.caller=e$D,this.method=e$m,this.args=e$Y,this.once=e$t,this},e$D.run=function(){if(null==this.method)return null;var e$D=this._id,e$m=this.method.apply(this.caller,this.args);return this._id===e$D&&this.once&&this.recover(),e$m},e$D.runWith=function(e$D){if(null==this.method)return null;var e$m=this._id;if(null==e$D)var e$Y=this.method.apply(this.caller,this.args);else e$Y=this.args||e$D.unshift?this.args?this.method.apply(this.caller,this.args.concat(e$D)):this.method.apply(this.caller,e$D):this.method.call(this.caller,e$D);return this._id===e$m&&this.once&&this.recover(),e$Y},e$D.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e$D.recover=function(){0<this._id&&(this._id=0,this.clear())},e$y.create=function(e$D,e$m,e$Y,e$t){return void 0===e$t&&(e$t=!0),new e$y(e$D,e$m,e$Y,e$t)},e$y._gid=1,e$y}(),e$p=function(){function e$D(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}e$f(e$D,"laya.display.BitmapFont");var e$m=e$D.prototype;return e$m.loadFont=function(e$D,e$m){this._path=e$D,this._complete=e$m,e$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],e$U.create(this,this.onLoaded))},e$m.onLoaded=function(){this.parseFont(e$BD.getRes(this._path),e$BD.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},e$m.parseFont=function(e$D,e$m){if(null!=e$D&&null!=e$m){this._texture=e$m;var e$Y=e$D.getElementsByTagName("info");if(!e$Y[0].getAttributeNode)return this.parseFont2(e$D,e$m);this.fontSize=parseInt(e$Y[0].getAttributeNode("size").nodeValue);var e$t,e$y=e$Y[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(e$y[0]),parseInt(e$y[1]),parseInt(e$y[2]),parseInt(e$y[3])],e$t=e$D.getElementsByTagName("char");var e$l=0;for(e$l=0;e$l<e$t.length;e$l++){var e$E=e$t[e$l],e$B=parseInt(e$E.getAttributeNode("id").nodeValue),e$o=parseInt(e$E.getAttributeNode("xoffset").nodeValue)/1,e$r=parseInt(e$E.getAttributeNode("yoffset").nodeValue)/1,e$f=parseInt(e$E.getAttributeNode("xadvance").nodeValue)/1,e$_=new e$J;e$_.x=parseInt(e$E.getAttributeNode("x").nodeValue),e$_.y=parseInt(e$E.getAttributeNode("y").nodeValue),e$_.width=parseInt(e$E.getAttributeNode("width").nodeValue),e$_.height=parseInt(e$E.getAttributeNode("height").nodeValue);var e$i=e$fD.create(e$m,e$_.x,e$_.y,e$_.width,e$_.height,e$o,e$r);this._maxWidth=Math.max(this._maxWidth,e$f+this.letterSpacing),this._fontCharDic[e$B]=e$i,this._fontWidthMap[e$B]=e$f}}},e$m.parseFont2=function(e$D,e$m){if(null!=e$D&&null!=e$m){this._texture=e$m;var e$Y=e$D.getElementsByTagName("info");this.fontSize=parseInt(e$Y[0].attributes.size.nodeValue);var e$t=e$Y[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(e$t[0]),parseInt(e$t[1]),parseInt(e$t[2]),parseInt(e$t[3])];var e$y=e$D.getElementsByTagName("char"),e$l=0;for(e$l=0;e$l<e$y.length;e$l++){var e$E=e$y[e$l].attributes,e$B=parseInt(e$E.id.nodeValue),e$o=parseInt(e$E.xoffset.nodeValue)/1,e$r=parseInt(e$E.yoffset.nodeValue)/1,e$f=parseInt(e$E.xadvance.nodeValue)/1,e$_=new e$J;e$_.x=parseInt(e$E.x.nodeValue),e$_.y=parseInt(e$E.y.nodeValue),e$_.width=parseInt(e$E.width.nodeValue),e$_.height=parseInt(e$E.height.nodeValue);var e$i=e$fD.create(e$m,e$_.x,e$_.y,e$_.width,e$_.height,e$o,e$r);this._maxWidth=Math.max(this._maxWidth,e$f+this.letterSpacing),this._fontCharDic[e$B]=e$i,this._fontWidthMap[e$B]=e$f}}},e$m.getCharTexture=function(e$D){return this._fontCharDic[e$D.charCodeAt(0)]},e$m.destroy=function(){if(this._texture){for(var e$D in this._fontCharDic){var e$m=this._fontCharDic[e$D];e$m&&e$m.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e$m.setSpaceWidth=function(e$D){this._spaceWidth=e$D},e$m.getCharWidth=function(e$D){var e$m=e$D.charCodeAt(0);return this._fontWidthMap[e$m]?this._fontWidthMap[e$m]+this.letterSpacing:" "==e$D?this._spaceWidth+this.letterSpacing:0},e$m.getTextWidth=function(e$D){for(var e$m=0,e$Y=0,e$t=e$D.length;e$Y<e$t;e$Y++)e$m+=this.getCharWidth(e$D.charAt(e$Y));return e$m},e$m.getMaxWidth=function(){return this._maxWidth},e$m.getMaxHeight=function(){return this.fontSize},e$m.drawText=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B=this.getTextWidth(e$D),e$o=0;"center"===e$y&&(e$o=(e$l-e$B)/2),"right"===e$y&&(e$o=e$l-e$B);for(var e$r=0,e$f=0,e$_=e$D.length;e$f<e$_;e$f++)(e$E=this.getCharTexture(e$D.charAt(e$f)))&&(e$m.graphics.drawTexture(e$E,e$Y+e$r+e$o,e$t),e$r+=this.getCharWidth(e$D.charAt(e$f)))},e$D}(),e$B=function(){function e$Y(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=e$Y._TF_EMPTY}e$f(e$Y,"laya.display.css.Style");var e$D=e$Y.prototype;return e$D.getTransform=function(){return this._tf},e$D.setTransform=function(e$D){this._tf="none"!==e$D&&e$D?e$D:e$Y._TF_EMPTY},e$D.setTranslateX=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.translateX=e$D},e$D.setTranslateY=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.translateY=e$D},e$D.setScaleX=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.scaleX=e$D},e$D.setScale=function(e$D,e$m){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.scaleX=e$D,this._tf.scaleY=e$m},e$D.setScaleY=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.scaleY=e$D},e$D.setRotate=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.rotate=e$D},e$D.setSkewX=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.skewX=e$D},e$D.setSkewY=function(e$D){this._tf===e$Y._TF_EMPTY&&(this._tf=new e$y),this._tf.skewY=e$D},e$D.destroy=function(){this.scrollRect=null},e$D.render=function(e$D,e$m,e$Y,e$t){},e$D.getCSSStyle=function(){return e$mD.EMPTY},e$D._enableLayout=function(){return!1},e$G(0,e$D,"scaleX",function(){return this._tf.scaleX},function(e$D){this.setScaleX(e$D)}),e$G(0,e$D,"transform",function(){return this.getTransform()},function(e$D){this.setTransform(e$D)}),e$G(0,e$D,"translateX",function(){return this._tf.translateX},function(e$D){this.setTranslateX(e$D)}),e$G(0,e$D,"translateY",function(){return this._tf.translateY},function(e$D){this.setTranslateY(e$D)}),e$G(0,e$D,"scaleY",function(){return this._tf.scaleY},function(e$D){this.setScaleY(e$D)}),e$G(0,e$D,"block",function(){return 0!=(1&this._type)}),e$G(0,e$D,"skewY",function(){return this._tf.skewY},function(e$D){this.setSkewY(e$D)}),e$G(0,e$D,"rotate",function(){return this._tf.rotate},function(e$D){this.setRotate(e$D)}),e$G(0,e$D,"skewX",function(){return this._tf.skewX},function(e$D){this.setSkewX(e$D)}),e$G(0,e$D,"paddingLeft",function(){return 0}),e$G(0,e$D,"paddingTop",function(){return 0}),e$G(0,e$D,"absolute",function(){return!0}),e$Y.__init__=function(){e$Y._TF_EMPTY=new e$y,e$Y.EMPTY=new e$Y},e$Y.EMPTY=null,e$Y._TF_EMPTY=null,e$Y}(),e$I=function(){function e$m(e$D){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=e$d.create(e$m.defaultColor),this.family=e$m.defaultFamily,this.stroke=e$m._STROKE,this.size=e$m.defaultSize,e$D&&e$D!==e$m.EMPTY&&e$D.copyTo(this)}e$f(e$m,"laya.display.css.Font");var e$D=e$m.prototype;return e$D.set=function(e$D){this._text=null;for(var e$m=e$D.split(" "),e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];switch(e$y){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<e$y.indexOf("px")&&(this.size=parseInt(e$y),this.family=e$m[e$Y+1],e$Y++)}},e$D.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e$D.copyTo=function(e$D){e$D._type=this._type,e$D._text=this._text,e$D._weight=this._weight,e$D._color=this._color,e$D.family=this.family,e$D.stroke=this.stroke!=e$m._STROKE?this.stroke.slice():e$m._STROKE,e$D.indent=this.indent,e$D.size=this.size},e$G(0,e$D,"password",function(){return 0!=(1024&this._type)},function(e$D){e$D?this._type|=1024:this._type&=-1025}),e$G(0,e$D,"color",function(){return this._color.strColor},function(e$D){this._color=e$d.create(e$D)}),e$G(0,e$D,"italic",function(){return 0!=(512&this._type)},function(e$D){e$D?this._type|=512:this._type&=-513}),e$G(0,e$D,"bold",function(){return 0!=(2048&this._type)},function(e$D){e$D?this._type|=2048:this._type&=-2049}),e$G(0,e$D,"weight",function(){return""+this._weight},function(e$D){var e$m=0;switch(e$D){case"normal":break;case"bold":this.bold=!0,e$m=700;break;case"bolder":e$m=800;break;case"lighter":e$m=100;break;default:e$m=parseInt(e$D)}this._weight=e$m,this._text=null}),e$G(0,e$D,"decoration",function(){return this._decoration?this._decoration.value:null},function(e$D){var e$m=e$D.split(" ");switch(this._decoration||(this._decoration={}),e$m[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e$m[0]}e$m[1]&&(this._decoration.color=e$d.create(e$m)),this._decoration.value=e$D}),e$m.__init__=function(){e$m.EMPTY=new e$m(null)},e$m.EMPTY=null,e$m.defaultColor="#000000",e$m.defaultSize=12,e$m.defaultFamily="Arial",e$m.defaultFont="12px Arial",e$m._STROKE=[0,"#000000"],e$m._ITALIC=512,e$m._PASSWORD=1024,e$m._BOLD=2048,e$m}(),e$y=function(){function e$D(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return e$f(e$D,"laya.display.css.TransformInfo"),e$D}(),e$i=function(){function e$_(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,e$C.isConchNode){this._nativeObj=new e$R._conchGraphics,this.id=this._nativeObj.conchID}}e$f(e$_,"laya.display.Graphics");var e$D=e$_.prototype;return e$D.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},e$D.clear=function(e$D){void 0===e$D&&(e$D=!1);var e$m=0,e$Y=0;if(e$D){var e$t=this._one;if(this._cmds){for(e$Y=this._cmds.length,e$m=0;e$m<e$Y;e$m++)!(e$t=this._cmds[e$m])||e$t.callee!==e$C._context._drawTexture&&e$t.callee!==e$C._context._drawTextureWithTransform||(e$t[0]=null,e$_._cache.push(e$t));this._cmds.length=0}else e$t&&(!e$t||e$t.callee!==e$C._context._drawTexture&&e$t.callee!==e$C._context._drawTextureWithTransform||(e$t[0]=null,e$_._cache.push(e$t)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(e$m=0,e$Y=this._vectorgraphArray.length;e$m<e$Y;e$m++)e$b.getInstance().deleteShape(this._vectorgraphArray[e$m]);this._vectorgraphArray.length=0}},e$D._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},e$D._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new e$Y,this._graphicBounds._graphics=this)},e$D._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},e$D._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e$D.getBounds=function(e$D){return void 0===e$D&&(e$D=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(e$D)},e$D.getBoundPoints=function(e$D){return void 0===e$D&&(e$D=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(e$D)},e$D._addCmd=function(e$D){this._cmds=this._cmds||[],e$D.callee=e$D.shift(),this._cmds.push(e$D)},e$D.setFilters=function(e$D){this._saveToCmd(e$C._context._setFilters,e$D)},e$D.drawTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$E&&(e$E=1),!e$D||e$E<.01)return null;e$t||(e$t=e$D.sourceWidth),e$y||(e$y=e$D.sourceHeight),e$E=e$E<0?0:1<e$E?1:e$E;var e$B,e$o=!e$C.isWebGL&&(e$u.onFirefox||e$u.onEdge||e$u.onIE||e$u.onSafari)?.5:0,e$r=e$t/e$D.sourceWidth,e$f=e$y/e$D.sourceHeight;return e$t=e$D.width*e$r,e$y=e$D.height*e$f,e$D.loaded&&(e$t<=0||e$y<=0)?null:(e$m+=e$D.offsetX*e$r,e$Y+=e$D.offsetY*e$f,this._sp&&(this._sp._renderType|=512),e$m-=e$o,e$Y-=e$o,e$t+=2*e$o,e$y+=2*e$o,e$_._cache.length?((e$B=e$_._cache.pop())[0]=e$D,e$B[1]=e$m,e$B[2]=e$Y,e$B[3]=e$t,e$B[4]=e$y,e$B[5]=e$l,e$B[6]=e$E):e$B=[e$D,e$m,e$Y,e$t,e$y,e$l,e$E],e$B.callee=e$l||1!=e$E?e$C._context._drawTextureWithTransform:e$C._context._drawTexture,null!=this._one||e$l||1!=e$E?this._saveToCmd(e$B.callee,e$B):(this._one=e$B,this._render=this._renderOneImg),e$D.loaded||e$D.once("loaded",this,this._textureLoaded,[e$D,e$B]),this._repaint(),e$B)},e$D.cleanByTexture=function(e$D,e$m,e$Y,e$t,e$y){if(void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),!e$D)return this.clear();if(this._one&&this._render===this._renderOneImg){e$t||(e$t=e$D.sourceWidth),e$y||(e$y=e$D.sourceHeight);var e$l=e$t/e$D.sourceWidth,e$E=e$y/e$D.sourceHeight;e$t=e$D.width*e$l,e$y=e$D.height*e$E,e$m+=e$D.offsetX*e$l,e$Y+=e$D.offsetY*e$E,this._one[0]=e$D,this._one[1]=e$m,this._one[2]=e$Y,this._one[3]=e$t,this._one[4]=e$y,this._repaint()}else this.clear(),e$D&&this.drawTexture(e$D,e$m,e$Y,e$t,e$y)},e$D.drawTextures=function(e$D,e$m){e$D&&this._saveToCmd(e$C._context._drawTextures,[e$D,e$m])},e$D.fillTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l="repeat"),e$D){var e$B=[e$D,e$m,e$Y,e$t,e$y,e$l,e$E||e$A.EMPTY,{}];e$D.loaded||e$D.once("loaded",this,this._textureLoaded,[e$D,e$B]),this._saveToCmd(e$C._context._fillTexture,e$B)}},e$D._textureLoaded=function(e$D,e$m){e$m[3]=e$m[3]||e$D.width,e$m[4]=e$m[4]||e$D.height,this._repaint()},e$D.fillCircle=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$Y.bitmap.enableMerageInAtlas=!1;var e$B=new Float32Array(2*(e$E+1)),e$o=new Float32Array(2*(e$E+1)),e$r=new Uint16Array(3*e$E),e$f=2*Math.PI/e$E,e$_=0;e$B[0]=e$t,e$B[1]=e$y,e$o[0]=e$t/e$Y.width,e$o[1]=e$y/e$Y.height;for(var e$i=2,e$R=0;e$R<e$E;e$R++){var e$G=e$l*Math.cos(e$_)+e$t,e$I=e$l*Math.sin(e$_)+e$y;e$B[e$i]=e$G,e$B[e$i+1]=e$I,e$o[e$i]=e$G/e$Y.width,e$o[e$i+1]=e$I/e$Y.height,e$_+=e$f,e$i+=2}for(e$R=e$i=0;e$R<e$E;e$R++)e$r[e$i++]=0,e$r[e$i++]=e$R+1,e$r[e$i++]=e$E+1<=e$R+2?1:e$R+2;this.drawTriangles(e$Y,e$D,e$m,e$B,e$o,e$r)},e$D.drawTriangles=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){void 0===e$B&&(e$B=1),this._saveToCmd(e$C._context.drawTriangles,[e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r])},e$D._saveToCmd=function(e$D,e$m){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e$m,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e$m)),e$m.callee=e$D,this._repaint(),e$m},e$D.clipRect=function(e$D,e$m,e$Y,e$t){this._saveToCmd(e$C._context._clipRect,[e$D,e$m,e$Y,e$t])},e$D.fillText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){void 0===e$E&&(e$E=0),this._saveToCmd(e$C._context._fillText,[e$D,e$m,e$Y,e$t||e$I.defaultFont,e$y,e$l])},e$D.fillBorderText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){this._saveToCmd(e$C._context._fillBorderText,[e$D,e$m,e$Y,e$t||e$I.defaultFont,e$y,e$l,e$E,e$B])},e$D.strokeText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._saveToCmd(e$C._context._strokeText,[e$D,e$m,e$Y,e$t||e$I.defaultFont,e$y,e$l,e$E])},e$D.alpha=function(e$D){e$D=e$D<0?0:1<e$D?1:e$D,this._saveToCmd(e$C._context._alpha,[e$D])},e$D.setAlpha=function(e$D){e$D=e$D<0?0:1<e$D?1:e$D,this._saveToCmd(e$C._context._setAlpha,[e$D])},e$D.transform=function(e$D,e$m,e$Y){void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),this._saveToCmd(e$C._context._transform,[e$D,e$m,e$Y])},e$D.rotate=function(e$D,e$m,e$Y){void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),this._saveToCmd(e$C._context._rotate,[e$D,e$m,e$Y])},e$D.scale=function(e$D,e$m,e$Y,e$t){void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),this._saveToCmd(e$C._context._scale,[e$D,e$m,e$Y,e$t])},e$D.translate=function(e$D,e$m){this._saveToCmd(e$C._context._translate,[e$D,e$m])},e$D.save=function(){this._saveToCmd(e$C._context._save,[])},e$D.restore=function(){this._saveToCmd(e$C._context._restore,[])},e$D.replaceText=function(e$D){this._repaint();var e$m=this._cmds;if(e$m){for(var e$Y=e$m.length-1;-1<e$Y;e$Y--)if(this._isTextCmd(e$m[e$Y].callee))return e$m[e$Y][0].toUpperCase?e$m[e$Y][0]=e$D:e$m[e$Y][0].setText(e$D),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=e$D:this._one[0].setText(e$D),!0;return!1},e$D._isTextCmd=function(e$D){return e$D===e$C._context._fillText||e$D===e$C._context._fillBorderText||e$D===e$C._context._strokeText},e$D.replaceTextColor=function(e$D){this._repaint();var e$m=this._cmds;if(e$m)for(var e$Y=e$m.length-1;-1<e$Y;e$Y--)this._isTextCmd(e$m[e$Y].callee)&&(e$m[e$Y][4]=e$D,e$m[e$Y][0].toUpperCase||(e$m[e$Y][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=e$D,this._one[0].toUpperCase||(this._one[0].changed=!0))},e$D.loadImage=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=this;void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0);var e$B=e$BD.getRes(e$D);function e$o(e$D){e$D&&(e$E.drawTexture(e$D,e$m,e$Y,e$t,e$y),null!=e$l&&e$l.call(e$E._sp,e$D))}e$B?e$o(e$B):e$z.loader.load(e$D,e$U.create(null,e$o),null,"image")},e$D._renderEmpty=function(e$D,e$m,e$Y,e$t){},e$D._renderAll=function(e$D,e$m,e$Y,e$t){for(var e$y,e$l=this._cmds,e$E=0,e$B=e$l.length;e$E<e$B;e$E++)(e$y=e$l[e$E]).callee.call(e$m,e$Y,e$t,e$y)},e$D._renderOne=function(e$D,e$m,e$Y,e$t){this._one.callee.call(e$m,e$Y,e$t,this._one)},e$D._renderOneImg=function(e$D,e$m,e$Y,e$t){this._one.callee.call(e$m,e$Y,e$t,this._one),2305!==e$D._renderType&&(e$D._renderType|=1)},e$D.drawLine=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=1);var e$E=0;e$C.isWebGL&&(e$E=e$b.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$E));var e$B=e$l%2==0?0:.5,e$o=[e$D+e$B,e$m+e$B,e$Y+e$B,e$t+e$B,e$y,e$l,e$E];this._saveToCmd(e$C._context._drawLine,e$o)},e$D.drawLines=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=1);var e$l=0;if(e$Y&&!(e$Y.length<4)){e$C.isWebGL&&(e$l=e$b.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$l));var e$E=e$y%2==0?0:.5,e$B=[e$D+e$E,e$m+e$E,e$Y,e$t,e$y,e$l];this._saveToCmd(e$C._context._drawLines,e$B)}},e$D.drawCurves=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=1);var e$l=[e$D,e$m,e$Y,e$t,e$y];this._saveToCmd(e$C._context._drawCurves,e$l)},e$D.drawRect=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){void 0===e$E&&(e$E=1);var e$B=e$l?e$E/2:0,e$o=e$l?e$E:0,e$r=[e$D+e$B,e$m+e$B,e$Y-e$o,e$t-e$o,e$y,e$l,e$E];this._saveToCmd(e$C._context._drawRect,e$r)},e$D.drawCircle=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=1);var e$E=e$y?e$l/2:0,e$B=0;e$C.isWebGL&&(e$B=e$b.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$B));var e$o=[e$D,e$m,e$Y-e$E,e$t,e$y,e$l,e$B];this._saveToCmd(e$C._context._drawCircle,e$o)},e$D.drawPie=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){void 0===e$B&&(e$B=1);var e$o=e$E?e$B/2:0,e$r=e$E?e$B:0,e$f=0;e$C.isWebGL&&(e$f=e$b.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$f));var e$_=[e$D+e$o,e$m+e$o,e$Y-e$r,e$t,e$y,e$l,e$E,e$B,e$f];e$_[3]=e$Z.toRadian(e$t),e$_[4]=e$Z.toRadian(e$y),this._saveToCmd(e$C._context._drawPie,e$_)},e$D.drawPoly=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=1);var e$E=0,e$B=!1;e$C.isWebGL&&(e$E=e$b.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$E),e$B=!(6<e$Y.length));var e$o=e$y?e$l%2==0?0:.5:0,e$r=[e$D+e$o,e$m+e$o,e$Y,e$t,e$y,e$l,e$E,e$B];this._saveToCmd(e$C._context._drawPoly,e$r)},e$D.drawPath=function(e$D,e$m,e$Y,e$t,e$y){var e$l=[e$D,e$m,e$Y,e$t,e$y];this._saveToCmd(e$C._context._drawPath,e$l)},e$G(0,e$D,"cmds",function(){return this._cmds},function(e$D){this._sp&&(this._sp._renderType|=512),this._cmds=e$D,this._render=this._renderAll,this._repaint()}),e$_.__init__=function(){if(e$C.isConchNode){for(var e$D=laya.display.Graphics.prototype,e$m=e$u.window.ConchGraphics.prototype,e$Y=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],e$t=0,e$y=e$Y.length;e$t<=e$y;e$t++){var e$l=e$Y[e$t];e$D[e$l]=e$m[e$l]}e$D._saveToCmd=null,e$m.drawImageS&&(e$D.drawTextures=function(e$D,e$m){if(e$D&&e$D.loaded&&e$D.bitmap&&e$D.source){var e$Y=e$D.uv,e$t=e$D.bitmap.width,e$y=e$D.bitmap.height;this.drawImageS(e$D.bitmap.source,e$Y[0]*e$t,e$Y[1]*e$y,(e$Y[2]-e$Y[0])*e$t,(e$Y[5]-e$Y[3])*e$y,e$D.offsetX,e$D.offsetY,e$D.width,e$D.height,e$m)}}),e$D.drawTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$E&&(e$E=1),e$D)if(e$D.loaded){if(e$D.loaded&&e$D.bitmap&&e$D.source&&(e$t||(e$t=e$D.sourceWidth),e$y||(e$y=e$D.sourceHeight),e$E=e$E<0?0:1<e$E?1:e$E,e$t=e$t-e$D.sourceWidth+e$D.width,e$y=e$y-e$D.sourceHeight+e$D.height,!(e$t<=0||e$y<=0))){e$m+=e$D.offsetX,e$Y+=e$D.offsetY;var e$B=e$D.uv,e$o=e$D.bitmap.width,e$r=e$D.bitmap.height;e$B[4]<e$B[0]&&e$B[5]<e$B[1]?this.drawImageM(e$D.bitmap.source,e$B[4]*e$o,e$B[5]*e$r,(e$B[0]-e$B[4])*e$o,(e$B[1]-e$B[5])*e$r,e$m,e$Y,e$t,e$y,e$l,e$E):this.drawImageM(e$D.bitmap.source,e$B[0]*e$o,e$B[1]*e$r,(e$B[2]-e$B[0])*e$o,(e$B[5]-e$B[3])*e$r,e$m,e$Y,e$t,e$y,e$l,e$E),this._repaint()}}else e$D.once("loaded",this,function(){this.drawTexture(e$D,e$m,e$Y,e$t,e$y,e$l)})},e$D.fillTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l="repeat"),e$D&&e$D.loaded){var e$B,e$o=e$C._context.ctx,e$r=e$D.bitmap.width,e$f=e$D.bitmap.height,e$_=e$D.uv;e$B=e$D.uv!=e$fD.DEF_UV?e$o.createPattern(e$D.bitmap.source,e$l,e$_[0]*e$r,e$_[1]*e$f,(e$_[2]-e$_[0])*e$r,(e$_[5]-e$_[3])*e$f):e$o.createPattern(e$D.bitmap.source,e$l);var e$i=0,e$R=0;e$E&&(e$m+=e$E.x%e$D.width,e$Y+=e$E.y%e$D.height,e$i-=e$E.x%e$D.width,e$R-=e$E.y%e$D.height),this._fillImage(e$B,e$m,e$Y,e$i,e$R,e$t,e$y)}}}},e$_._cache=[],e$_}(),e$Y=function(){function e$e(){this._cacheBoundsType=!1}e$f(e$e,"laya.display.GraphicsBounds");var e$D=e$e.prototype;return e$D.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},e$D.reset=function(){this._temp&&(this._temp.length=0)},e$D.getBounds=function(e$D){return void 0===e$D&&(e$D=!1),(!this._bounds||!this._temp||this._temp.length<1||e$D!=this._cacheBoundsType)&&(this._bounds=e$J._getWrapRec(this.getBoundPoints(e$D),this._bounds)),this._cacheBoundsType=e$D,this._bounds},e$D.getBoundPoints=function(e$D){return void 0===e$D&&(e$D=!1),(!this._temp||this._temp.length<1||e$D!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(e$D)),this._cacheBoundsType=e$D,this._rstBoundPoints=e$Z.copyArray(this._rstBoundPoints,this._temp)},e$D._getCmdPoints=function(e$D){void 0===e$D&&(e$D=!1);var e$m,e$Y,e$t=e$C._context,e$y=this._graphics.cmds;if((e$m=this._temp||(this._temp=[])).length=0,e$y||null==this._graphics._one||(e$e._tempCmds.length=0,e$e._tempCmds.push(this._graphics._one),e$y=e$e._tempCmds),!e$y)return e$m;(e$Y=e$e._tempMatrixArrays).length=0;var e$l=e$e._initMatrix;e$l.identity();for(var e$E,e$B,e$o=e$e._tempMatrix,e$r=NaN,e$f=NaN,e$_=NaN,e$i=NaN,e$R=NaN,e$G=NaN,e$I=0,e$w=e$y.length;e$I<e$w;e$I++)if((e$E=e$y[e$I]).callee)switch(e$E.callee){case e$t._save:case 7:e$Y.push(e$l),e$l=e$l.clone();break;case e$t._restore:case 8:e$l=e$Y.pop();break;case e$t._scale:case 5:e$o.identity(),e$o.translate(-e$E[2],-e$E[3]),e$o.scale(e$E[0],e$E[1]),e$o.translate(e$E[2],e$E[3]),this._switchMatrix(e$l,e$o);break;case e$t._rotate:case 3:e$o.identity(),e$o.translate(-e$E[1],-e$E[2]),e$o.rotate(e$E[0]),e$o.translate(e$E[1],e$E[2]),this._switchMatrix(e$l,e$o);break;case e$t._translate:case 6:e$o.identity(),e$o.translate(e$E[0],e$E[1]),this._switchMatrix(e$l,e$o);break;case e$t._transform:case 4:e$o.identity(),e$o.translate(-e$E[1],-e$E[2]),e$o.concat(e$E[0]),e$o.translate(e$E[1],e$E[2]),this._switchMatrix(e$l,e$o);break;case 16:case 24:e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[0],e$E[1],e$E[2],e$E[3]),e$l);break;case 17:e$l.copyTo(e$o),e$o.concat(e$E[4]),e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[0],e$E[1],e$E[2],e$E[3]),e$o);break;case e$t._drawTexture:e$B=e$E[0],e$D?e$E[3]&&e$E[4]?e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$E[3],e$E[4]),e$l):(e$B=e$E[0],e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$B.width,e$B.height),e$l)):(e$r=(e$E[3]||e$B.sourceWidth)/e$B.width,e$f=(e$E[4]||e$B.sourceHeight)/e$B.height,e$_=e$r*e$B.sourceWidth,e$i=e$f*e$B.sourceHeight,e$R=0<e$B.offsetX?e$B.offsetX:0,e$G=0<e$B.offsetY?e$B.offsetY:0,e$R*=e$r,e$G*=e$f,e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1]-e$R,e$E[2]-e$G,e$_,e$i),e$l));break;case e$t._fillTexture:e$E[3]&&e$E[4]?e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$E[3],e$E[4]),e$l):(e$B=e$E[0],e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$B.width,e$B.height),e$l));break;case e$t._drawTextureWithTransform:var e$W;e$W=e$E[5]?(e$l.copyTo(e$o),e$o.concat(e$E[5]),e$o):e$l,e$D?e$E[3]&&e$E[4]?e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$E[3],e$E[4]),e$W):(e$B=e$E[0],e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1],e$E[2],e$B.width,e$B.height),e$W)):(e$B=e$E[0],e$r=(e$E[3]||e$B.sourceWidth)/e$B.width,e$f=(e$E[4]||e$B.sourceHeight)/e$B.height,e$_=e$r*e$B.sourceWidth,e$i=e$f*e$B.sourceHeight,e$R=0<e$B.offsetX?e$B.offsetX:0,e$G=0<e$B.offsetY?e$B.offsetY:0,e$R*=e$r,e$G*=e$f,e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[1]-e$R,e$E[2]-e$G,e$_,e$i),e$W));break;case e$t._drawRect:case 13:e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[0],e$E[1],e$E[2],e$E[3]),e$l);break;case e$t._drawCircle:case e$t._fillCircle:case 14:e$e._addPointArrToRst(e$m,e$J._getBoundPointS(e$E[0]-e$E[2],e$E[1]-e$E[2],e$E[2]+e$E[2],e$E[2]+e$E[2]),e$l);break;case e$t._drawLine:case 20:e$e._tempPoints.length=0;var e$U;e$U=.5*e$E[5],e$E[0]==e$E[2]?e$e._tempPoints.push(e$E[0]+e$U,e$E[1],e$E[2]+e$U,e$E[3],e$E[0]-e$U,e$E[1],e$E[2]-e$U,e$E[3]):e$E[1]==e$E[3]?e$e._tempPoints.push(e$E[0],e$E[1]+e$U,e$E[2],e$E[3]+e$U,e$E[0],e$E[1]-e$U,e$E[2],e$E[3]-e$U):e$e._tempPoints.push(e$E[0],e$E[1],e$E[2],e$E[3]),e$e._addPointArrToRst(e$m,e$e._tempPoints,e$l);break;case e$t._drawCurves:case 22:e$e._addPointArrToRst(e$m,e$v.I.getBezierPoints(e$E[2]),e$l,e$E[0],e$E[1]);break;case e$t._drawPoly:case e$t._drawLines:case 18:e$e._addPointArrToRst(e$m,e$E[2],e$l,e$E[0],e$E[1]);break;case e$t._drawPath:case 19:e$e._addPointArrToRst(e$m,this._getPathPoints(e$E[2]),e$l,e$E[0],e$E[1]);break;case e$t._drawPie:case 15:e$e._addPointArrToRst(e$m,this._getPiePoints(e$E[0],e$E[1],e$E[2],e$E[3],e$E[4]),e$l)}return 200<e$m.length?e$m=e$Z.copyArray(e$m,e$J._getWrapRec(e$m)._getBoundPoints()):8<e$m.length&&(e$m=e$c.scanPList(e$m)),e$m},e$D._switchMatrix=function(e$D,e$m){e$m.concat(e$D),e$m.copyTo(e$D)},e$D._getPiePoints=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$e._tempPoints;e$e._tempPoints.length=0,e$l.push(e$D,e$m);var e$E=(e$y-e$t)%(2*Math.PI)/10,e$B=NaN,e$o=e$t;for(e$B=0;e$B<=10;e$B++)e$l.push(e$D+e$Y*Math.cos(e$o),e$m+e$Y*Math.sin(e$o)),e$o+=e$E;return e$l},e$D._getPathPoints=function(e$D){var e$m,e$Y,e$t=0,e$y=e$e._tempPoints;for(e$y.length=0,e$m=e$D.length,e$t=0;e$t<e$m;e$t++)1<(e$Y=e$D[e$t]).length&&(e$y.push(e$Y[1],e$Y[2]),3<e$Y.length&&e$y.push(e$Y[3],e$Y[4]));return e$y},e$e._addPointArrToRst=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0);var e$l,e$E=0;for(e$l=e$m.length,e$E=0;e$E<e$l;e$E+=2)e$e._addPointToRst(e$D,e$m[e$E]+e$t,e$m[e$E+1]+e$y,e$Y)},e$e._addPointToRst=function(e$D,e$m,e$Y,e$t){var e$y=e$A.TEMP;e$y.setTo(e$m||0,e$Y||0),e$t.transformPoint(e$y),e$D.push(e$y.x,e$y.y)},e$e._tempPoints=[],e$e._tempMatrixArrays=[],e$e._tempCmds=[],e$o(e$e,["_tempMatrix",function(){return this._tempMatrix=new e$Q},"_initMatrix",function(){return this._initMatrix=new e$Q}]),e$e}(),e$l=function(){function e$D(){}e$f(e$D,"laya.events.Event");var e$m=e$D.prototype;return e$m.setTo=function(e$D,e$m,e$Y){return this.type=e$D,this.currentTarget=e$m,this.target=e$Y,this},e$m.stopPropagation=function(){this._stoped=!0},e$G(0,e$m,"stageY",function(){return e$z.stage.mouseY}),e$G(0,e$m,"charCode",function(){return this.nativeEvent.charCode}),e$G(0,e$m,"touches",function(){var e$D=this.nativeEvent.touches;if(e$D)for(var e$m=e$z.stage,e$Y=0,e$t=e$D.length;e$Y<e$t;e$Y++){var e$y=e$D[e$Y],e$l=e$A.TEMP;e$l.setTo(e$y.clientX,e$y.clientY),e$m._canvasTransform.invertTransformPoint(e$l),e$m.transform.invertTransformPoint(e$l),e$y.stageX=e$l.x,e$y.stageY=e$l.y}return e$D}),e$G(0,e$m,"keyLocation",function(){return this.nativeEvent.keyLocation}),e$G(0,e$m,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),e$G(0,e$m,"altKey",function(){return this.nativeEvent.altKey}),e$G(0,e$m,"shiftKey",function(){return this.nativeEvent.shiftKey}),e$G(0,e$m,"stageX",function(){return e$z.stage.mouseX}),e$D.EMPTY=new e$D,e$D.MOUSE_DOWN="mousedown",e$D.MOUSE_UP="mouseup",e$D.CLICK="click",e$D.RIGHT_MOUSE_DOWN="rightmousedown",e$D.RIGHT_MOUSE_UP="rightmouseup",e$D.RIGHT_CLICK="rightclick",e$D.MOUSE_MOVE="mousemove",e$D.MOUSE_OVER="mouseover",e$D.MOUSE_OUT="mouseout",e$D.MOUSE_WHEEL="mousewheel",e$D.ROLL_OVER="mouseover",e$D.ROLL_OUT="mouseout",e$D.DOUBLE_CLICK="doubleclick",e$D.CHANGE="change",e$D.CHANGED="changed",e$D.RESIZE="resize",e$D.ADDED="added",e$D.REMOVED="removed",e$D.DISPLAY="display",e$D.UNDISPLAY="undisplay",e$D.ERROR="error",e$D.COMPLETE="complete",e$D.LOADED="loaded",e$D.INITED="inited",e$D.PROGRESS="progress",e$D.INPUT="input",e$D.RENDER="render",e$D.OPEN="open",e$D.MESSAGE="message",e$D.CLOSE="close",e$D.KEY_DOWN="keydown",e$D.KEY_PRESS="keypress",e$D.KEY_UP="keyup",e$D.FRAME="enterframe",e$D.DRAG_START="dragstart",e$D.DRAG_MOVE="dragmove",e$D.DRAG_END="dragend",e$D.ENTER="enter",e$D.SELECT="select",e$D.BLUR="blur",e$D.FOCUS="focus",e$D.VISIBILITY_CHANGE="visibilitychange",e$D.FOCUS_CHANGE="focuschange",e$D.PLAYED="played",e$D.PAUSED="paused",e$D.STOPPED="stopped",e$D.START="start",e$D.END="end",e$D.ENABLE_CHANGED="enablechanged",e$D.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",e$D.COMPONENT_ADDED="componentadded",e$D.COMPONENT_REMOVED="componentremoved",e$D.LAYER_CHANGED="layerchanged",e$D.HIERARCHY_LOADED="hierarchyloaded",e$D.RECOVERED="recovered",e$D.RELEASED="released",e$D.LINK="link",e$D.LABEL="label",e$D.FULL_SCREEN_CHANGE="fullscreenchange",e$D.DEVICE_LOST="devicelost",e$D.MESH_CHANGED="meshchanged",e$D.MATERIAL_CHANGED="materialchanged",e$D.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",e$D.ANIMATION_CHANGED="animationchanged",e$D.TRIGGER_ENTER="triggerenter",e$D.TRIGGER_STAY="triggerstay",e$D.TRIGGER_EXIT="triggerexit",e$D.TRAIL_FILTER_CHANGE="trailfilterchange",e$D.DOMINO_FILTER_CHANGE="dominofilterchange",e$D}(),e$_=(function(){function e$D(){}e$f(e$D,"laya.events.Keyboard"),e$D.NUMBER_0=48,e$D.NUMBER_1=49,e$D.NUMBER_2=50,e$D.NUMBER_3=51,e$D.NUMBER_4=52,e$D.NUMBER_5=53,e$D.NUMBER_6=54,e$D.NUMBER_7=55,e$D.NUMBER_8=56,e$D.NUMBER_9=57,e$D.A=65,e$D.B=66,e$D.C=67,e$D.D=68,e$D.E=69,e$D.F=70,e$D.G=71,e$D.H=72,e$D.I=73,e$D.J=74,e$D.K=75,e$D.L=76,e$D.M=77,e$D.N=78,e$D.O=79,e$D.P=80,e$D.Q=81,e$D.R=82,e$D.S=83,e$D.T=84,e$D.U=85,e$D.V=86,e$D.W=87,e$D.X=88,e$D.Y=89,e$D.Z=90,e$D.F1=112,e$D.F2=113,e$D.F3=114,e$D.F4=115,e$D.F5=116,e$D.F6=117,e$D.F7=118,e$D.F8=119,e$D.F9=120,e$D.F10=121,e$D.F11=122,e$D.F12=123,e$D.F13=124,e$D.F14=125,e$D.F15=126,e$D.NUMPAD=21,e$D.NUMPAD_0=96,e$D.NUMPAD_1=97,e$D.NUMPAD_2=98,e$D.NUMPAD_3=99,e$D.NUMPAD_4=100,e$D.NUMPAD_5=101,e$D.NUMPAD_6=102,e$D.NUMPAD_7=103,e$D.NUMPAD_8=104,e$D.NUMPAD_9=105,e$D.NUMPAD_ADD=107,e$D.NUMPAD_DECIMAL=110,e$D.NUMPAD_DIVIDE=111,e$D.NUMPAD_ENTER=108,e$D.NUMPAD_MULTIPLY=106,e$D.NUMPAD_SUBTRACT=109,e$D.SEMICOLON=186,e$D.EQUAL=187,e$D.COMMA=188,e$D.MINUS=189,e$D.PERIOD=190,e$D.SLASH=191,e$D.BACKQUOTE=192,e$D.LEFTBRACKET=219,e$D.BACKSLASH=220,e$D.RIGHTBRACKET=221,e$D.QUOTE=222,e$D.ALTERNATE=18,e$D.BACKSPACE=8,e$D.CAPS_LOCK=20,e$D.COMMAND=15,e$D.CONTROL=17,e$D.DELETE=46,e$D.ENTER=13,e$D.ESCAPE=27,e$D.PAGE_UP=33,e$D.PAGE_DOWN=34,e$D.END=35,e$D.HOME=36,e$D.LEFT=37,e$D.UP=38,e$D.RIGHT=39,e$D.DOWN=40,e$D.SHIFT=16,e$D.SPACE=32,e$D.TAB=9,e$D.INSERT=45}(),function(){function e$y(){}return e$f(e$y,"laya.events.KeyBoardManager"),e$y.__init__=function(){e$y._addEvent("keydown"),e$y._addEvent("keypress"),e$y._addEvent("keyup")},e$y._addEvent=function(e$m){e$u.document.addEventListener(e$m,function(e$D){laya.events.KeyBoardManager._dispatch(e$D,e$m)},!0)},e$y._dispatch=function(e$D,e$m){if(e$y.enabled){e$y._event._stoped=!1,e$y._event.nativeEvent=e$D,e$y._event.keyCode=e$D.keyCode||e$D.which||e$D.charCode,"keydown"===e$m?e$y._pressKeys[e$y._event.keyCode]=!0:"keyup"===e$m&&(e$y._pressKeys[e$y._event.keyCode]=null);for(var e$Y=e$z.stage.focus&&null!=e$z.stage.focus.event&&e$z.stage.focus.displayedInStage?e$z.stage.focus:e$z.stage,e$t=e$Y;e$t;)e$t.event(e$m,e$y._event.setTo(e$m,e$t,e$Y)),e$t=e$t.parent}},e$y.hasKeyDown=function(e$D){return e$y._pressKeys[e$D]},e$y._pressKeys={},e$y.enabled=!0,e$o(e$y,["_event",function(){return this._event=new e$l}]),e$y}()),e$w=(function(){function e$D(){}e$f(e$D,"laya.events.KeyLocation"),e$D.STANDARD=0,e$D.LEFT=1,e$D.RIGHT=2,e$D.NUM_PAD=3}(),function(){function e$r(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=e$u.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new e$l,this._matrix=new e$Q,this._point=new e$A,this._rect=new e$J,this._prePoint=new e$A,this._curTouchID=NaN}e$f(e$r,"laya.events.MouseManager");var e$D=e$r.prototype;return e$D.__init__=function(e$D,e$m){var e$Y=this;this._stage=e$D;var e$t=this,e$y=this._eventList;e$m.oncontextmenu=function(e$D){if(e$r.enabled)return!1},e$m.addEventListener("mousedown",function(e$D){e$r.enabled&&(e$u.onIE||e$D.preventDefault(),e$y.push(e$D),e$t.mouseDownTime=e$u.now())}),e$m.addEventListener("mouseup",function(e$D){e$r.enabled&&(e$D.preventDefault(),e$y.push(e$D),e$t.mouseDownTime=-e$u.now())},!0),e$m.addEventListener("mousemove",function(e$D){if(e$r.enabled){e$D.preventDefault();var e$m=e$u.now();if(e$m-e$t._lastMoveTimer<10)return;e$t._lastMoveTimer=e$m,e$y.push(e$D)}},!0),e$m.addEventListener("mouseout",function(e$D){e$r.enabled&&e$y.push(e$D)}),e$m.addEventListener("mouseover",function(e$D){e$r.enabled&&e$y.push(e$D)}),e$m.addEventListener("touchstart",function(e$D){e$r.enabled&&(e$y.push(e$D),e$r._isFirstTouch||e$cD.isInputting||e$D.preventDefault(),e$t.mouseDownTime=e$u.now())}),e$m.addEventListener("touchend",function(e$D){e$r.enabled?(e$r._isFirstTouch||e$cD.isInputting||e$D.preventDefault(),e$r._isFirstTouch=!1,e$y.push(e$D),e$t.mouseDownTime=-e$u.now()):e$Y._curTouchID=NaN},!0),e$m.addEventListener("touchmove",function(e$D){e$r.enabled&&(e$D.preventDefault(),e$y.push(e$D))},!0),e$m.addEventListener("touchcancel",function(e$D){e$r.enabled?(e$D.preventDefault(),e$y.push(e$D)):e$Y._curTouchID=NaN},!0),e$m.addEventListener("mousewheel",function(e$D){e$r.enabled&&e$y.push(e$D)}),e$m.addEventListener("DOMMouseScroll",function(e$D){e$r.enabled&&e$y.push(e$D)})},e$D.initEvent=function(e$D,e$m){var e$Y;this._event._stoped=!1,this._event.nativeEvent=e$m||e$D,this._target=null,this._point.setTo(e$D.pageX||e$D.clientX,e$D.pageY||e$D.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=e$D.identifier||0,this._tTouchID=this._event.touchId,(e$Y=e$W.I._event)._stoped=!1,e$Y.nativeEvent=this._event.nativeEvent,e$Y.touchId=this._event.touchId},e$D.checkMouseWheel=function(e$D){this._event.delta=e$D.wheelDelta?.025*e$D.wheelDelta:-e$D.detail;for(var e$m=e$W.I.getLastOvers(),e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];e$y.event("mousewheel",this._event.setTo("mousewheel",e$y,this._target))}},e$D.onMouseMove=function(e$D){e$W.I.onMouseMove(e$D,this._tTouchID)},e$D.onMouseDown=function(e$D){if(e$cD.isInputting&&e$z.stage.focus&&e$z.stage.focus.focus&&!e$z.stage.focus.contains(this._target)){var e$m=e$z.stage.focus._tf||e$z.stage.focus,e$Y=e$D._tf||e$D;e$Y instanceof laya.display.Input&&e$Y.multiline==e$m.multiline?e$m._focusOut():e$m.focus=!1}e$W.I.onMouseDown(e$D,this._tTouchID,this._isLeftMouse)},e$D.onMouseUp=function(e$D){e$W.I.onMouseUp(e$D,this._tTouchID,this._isLeftMouse)},e$D.check=function(e$D,e$m,e$Y,e$t){this._point.setTo(e$m,e$Y),e$D.fromParentPoint(this._point),e$m=this._point.x,e$Y=this._point.y;var e$y=e$D.scrollRect;if(e$y&&(this._rect.setTo(e$y.x,e$y.y,e$y.width,e$y.height),!this._rect.contains(e$m,e$Y)))return!1;if(!this.disableMouseEvent){if(e$D.hitTestPrior&&!e$D.mouseThrough&&!this.hitTest(e$D,e$m,e$Y))return!1;for(var e$l=e$D._childs.length-1;-1<e$l;e$l--){var e$E=e$D._childs[e$l];if(!e$E.destroyed&&e$E.mouseEnabled&&e$E.visible&&this.check(e$E,e$m,e$Y,e$t))return!0}}var e$B=!(!e$D.hitTestPrior||e$D.mouseThrough||this.disableMouseEvent)||this.hitTest(e$D,e$m,e$Y);return e$B?(this._target=e$D,e$t.call(this,e$D)):e$t===this.onMouseUp&&e$D===this._stage&&(this._target=this._stage,e$t.call(this,this._target)),e$B},e$D.hitTest=function(e$D,e$m,e$Y){var e$t=!1;if(e$D.scrollRect&&(e$m-=e$D.scrollRect.x,e$Y-=e$D.scrollRect.y),e$D.hitArea instanceof laya.utils.HitArea)return e$D.hitArea.isHit(e$m,e$Y);if(0<e$D.width&&0<e$D.height||e$D.mouseThrough||e$D.hitArea)if(e$D.mouseThrough)e$t=e$D.getGraphicBounds().contains(e$m,e$Y);else{var e$y=this._rect;e$D.hitArea?e$y=e$D.hitArea:e$y.setTo(0,0,e$D.width,e$D.height),e$t=e$y.contains(e$m,e$Y)}return e$t},e$D.runEvent=function(){var e$D=this._eventList.length;if(e$D){this.mouseEventTime=e$u.now();var e$m,e$Y=0,e$t=0,e$y=0;try{for(;e$Y<e$D;){var e$l=this._eventList[e$Y];switch("mousemove"!==e$l.type&&(this._prePoint.x=this._prePoint.y=-1e6),e$l.type){case"mousedown":this._touchIDs[0]=this._id++,e$r._isTouchRespond?e$r._isTouchRespond=!1:(this._isLeftMouse=0===e$l.button,this.initEvent(e$l),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===e$l.button,this.initEvent(e$l),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-e$l.clientX)+Math.abs(this._prePoint.y-e$l.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=e$l.clientX,this._prePoint.y=e$l.clientY,this.initEvent(e$l),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":e$r._isTouchRespond=!0,this._isLeftMouse=!0;var e$E=e$l.changedTouches;for(e$t=0,e$y=e$E.length;e$t<e$y;e$t++)e$m=e$E[e$t],(e$r.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=e$m.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[e$m.identifier]=this._id++,this.initEvent(e$m,e$l),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":e$r._isTouchRespond=!0,this._isLeftMouse=!0;var e$B=e$l.changedTouches;for(e$t=0,e$y=e$B.length;e$t<e$y;e$t++)if(e$m=e$B[e$t],e$r.multiTouchEnabled||e$m.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(e$m,e$l);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var e$o=e$l.changedTouches;for(e$t=0,e$y=e$o.length;e$t<e$y;e$t++)e$m=e$o[e$t],(e$r.multiTouchEnabled||e$m.identifier==this._curTouchID)&&(this.initEvent(e$m,e$l),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(e$l);break;case"mouseout":e$W.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}e$Y++}}catch(e$D){throw this._eventList.length=0,e$D}this._eventList.length=0}},e$r.enabled=!0,e$r.multiTouchEnabled=!0,e$r._isTouchRespond=!1,e$r._isFirstTouch=!0,e$o(e$r,["instance",function(){return this.instance=new e$r}]),e$r}()),e$W=function(){function e$G(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new e$l}e$f(e$G,"laya.events.TouchManager");var e$D=e$G.prototype;return e$D._clearTempArrs=function(){e$G._oldArr.length=0,e$G._newArr.length=0,e$G._tEleArr.length=0},e$D.getTouchFromArr=function(e$D,e$m){var e$Y,e$t,e$y=0;for(e$Y=e$m.length,e$y=0;e$y<e$Y;e$y++)if((e$t=e$m[e$y]).id==e$D)return e$t;return null},e$D.removeTouchFromArr=function(e$D,e$m){var e$Y=0;for(e$Y=e$m.length-1;0<=e$Y;e$Y--)e$m[e$Y].id==e$D&&e$m.splice(e$Y,1)},e$D.createTouchO=function(e$D,e$m){var e$Y;return(e$Y=e$g.getItem("TouchData")||{}).id=e$m,e$Y.tar=e$D,e$Y},e$D.onMouseDown=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E;(void 0===e$Y&&(e$Y=!1),this.enable)&&(e$t=this.getTouchFromArr(e$m,this.preOvers),e$l=this.getEles(e$D,null,e$G._tEleArr),e$t?e$t.tar=e$D:(e$y=this.createTouchO(e$D,e$m),this.preOvers.push(e$y)),e$u.onMobile&&this.sendEvents(e$l,"mouseover",e$m),e$E=e$Y?this.preDowns:this.preRightDowns,(e$t=this.getTouchFromArr(e$m,e$E))?e$t.tar=e$D:(e$y=this.createTouchO(e$D,e$m),e$E.push(e$y)),this.sendEvents(e$l,e$Y?"mousedown":"rightmousedown",e$m),this._clearTempArrs())},e$D.sendEvents=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=0);var e$t,e$y,e$l,e$E=0;for(e$t=e$D.length,this._event._stoped=!1,e$y=e$D[0],e$E=0;e$E<e$t;e$E++){if((e$l=e$D[e$E]).destroyed)return;if(e$l.event(e$m,this._event.setTo(e$m,e$l,e$y)),this._event._stoped)break}},e$D.getEles=function(e$D,e$m,e$Y){for(e$Y?e$Y.length=0:e$Y=[];e$D&&e$D!=e$m;)e$Y.push(e$D),e$D=e$D.parent;return e$Y},e$D.checkMouseOutAndOverOfMove=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=0),e$m!=e$D){var e$t,e$y,e$l=0,e$E=0;if(e$m.contains(e$D))e$y=this.getEles(e$D,e$m,e$G._tEleArr),this.sendEvents(e$y,"mouseover",e$Y);else if(e$D.contains(e$m))e$y=this.getEles(e$m,e$D,e$G._tEleArr),this.sendEvents(e$y,"mouseout",e$Y);else{var e$B,e$o;(e$y=e$G._tEleArr).length=0,e$B=this.getEles(e$m,null,e$G._oldArr),e$o=this.getEles(e$D,null,e$G._newArr),e$E=e$B.length;var e$r=0;for(e$l=0;e$l<e$E;e$l++){if(e$t=e$B[e$l],0<=(e$r=e$o.indexOf(e$t))){e$o.splice(e$r,e$o.length-e$r);break}e$y.push(e$t)}0<e$y.length&&this.sendEvents(e$y,"mouseout",e$Y),0<e$o.length&&this.sendEvents(e$o,"mouseover",e$Y)}}},e$D.onMouseMove=function(e$D,e$m){var e$Y,e$t;this.enable&&((e$Y=this.getTouchFromArr(e$m,this.preOvers))?(this.checkMouseOutAndOverOfMove(e$D,e$Y.tar),e$Y.tar=e$D,e$t=this.getEles(e$D,null,e$G._tEleArr)):(e$t=this.getEles(e$D,null,e$G._tEleArr),this.sendEvents(e$t,"mouseover",e$m),this.preOvers.push(this.createTouchO(e$D,e$m))),this.sendEvents(e$t,"mousemove",e$m),this._clearTempArrs())},e$D.getLastOvers=function(){return(e$G._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,e$G._tEleArr):(e$G._tEleArr.push(e$z.stage),e$G._tEleArr)},e$D.stageMouseOut=function(){var e$D;e$D=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(e$D,"mouseout",0)},e$D.onMouseUp=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=!1),this.enable){var e$t,e$y,e$l,e$E,e$B,e$o,e$r=0,e$f=0,e$_=e$u.onMobile;if(e$y=this.getEles(e$D,null,e$G._tEleArr),this.sendEvents(e$y,e$Y?"mouseup":"rightmouseup",e$m),e$o=e$Y?this.preDowns:this.preRightDowns,e$t=this.getTouchFromArr(e$m,e$o)){var e$i,e$R=e$u.now();if(e$i=e$R-this._lastClickTime<300,this._lastClickTime=e$R,e$D==e$t.tar)e$B=e$y;else for(e$l=this.getEles(e$t.tar,null,e$G._oldArr),(e$B=e$G._newArr).length=0,e$f=e$l.length,e$r=0;e$r<e$f;e$r++)e$E=e$l[e$r],0<=e$y.indexOf(e$E)&&e$B.push(e$E);0<e$B.length&&this.sendEvents(e$B,e$Y?"click":"rightclick",e$m),e$Y&&e$i&&this.sendEvents(e$B,"doubleclick",e$m),this.removeTouchFromArr(e$m,e$o),e$t.tar=null,e$g.recover("TouchData",e$t)}else;(e$t=this.getTouchFromArr(e$m,this.preOvers))&&e$_&&((e$B=this.getEles(e$t.tar,null,e$B))&&0<e$B.length&&this.sendEvents(e$B,"mouseout",e$m),this.removeTouchFromArr(e$m,this.preOvers),e$t.tar=null,e$g.recover("TouchData",e$t)),this._clearTempArrs()}},e$G._oldArr=[],e$G._newArr=[],e$G._tEleArr=[],e$o(e$G,["I",function(){return this.I=new e$G}]),e$G}(),e$e=function(){function e$D(){this._action=null}e$f(e$D,"laya.filters.Filter");var e$m=e$D.prototype;return e$z.imps(e$m,{"laya.filters.IFilter":!0}),e$m.callNative=function(e$D){},e$G(0,e$m,"type",function(){return-1}),e$G(0,e$m,"action",function(){return this._action}),e$D.BLUR=16,e$D.COLOR=32,e$D.GLOW=8,e$D._filterStart=null,e$D._filterEnd=null,e$D._EndTarget=null,e$D._recycleScope=null,e$D._filter=null,e$D._useSrc=null,e$D._endSrc=null,e$D._useOut=null,e$D._endOut=null,e$D}(),e$E=function(){function e$D(){this.data=null}e$f(e$D,"laya.filters.ColorFilterAction");var e$m=e$D.prototype;return e$z.imps(e$m,{"laya.filters.IFilterAction":!0}),e$m.apply=function(e$D){var e$m=e$D.ctx.ctx,e$Y=e$D.ctx.ctx.canvas;if(0==e$Y.width||0==e$Y.height)return e$Y;for(var e$t,e$y=e$m.getImageData(0,0,e$Y.width,e$Y.height),e$l=e$y.data,e$E=0,e$B=e$l.length;e$E<e$B;e$E+=4)e$t=this.getColor(e$l[e$E],e$l[e$E+1],e$l[e$E+2],e$l[e$E+3]),0!=e$l[e$E+3]&&(e$l[e$E]=e$t[0],e$l[e$E+1]=e$t[1],e$l[e$E+2]=e$t[2],e$l[e$E+3]=e$t[3]);return e$m.putImageData(e$y,0,0),e$D},e$m.getColor=function(e$D,e$m,e$Y,e$t){var e$y=[];if(this.data._mat&&this.data._alpha){var e$l=this.data._mat,e$E=this.data._alpha;e$y[0]=e$l[0]*e$D+e$l[1]*e$m+e$l[2]*e$Y+e$l[3]*e$t+e$E[0],e$y[1]=e$l[4]*e$D+e$l[5]*e$m+e$l[6]*e$Y+e$l[7]*e$t+e$E[1],e$y[2]=e$l[8]*e$D+e$l[9]*e$m+e$l[10]*e$Y+e$l[11]*e$t+e$E[2],e$y[3]=e$l[12]*e$D+e$l[13]*e$m+e$l[14]*e$Y+e$l[15]*e$t+e$E[3]}return e$y},e$D}(),e$v=(function(){function e$D(){}e$f(e$D,"laya.maths.Arith"),e$D.formatR=function(e$D){return e$D>Math.PI&&(e$D-=2*Math.PI),e$D<-Math.PI&&(e$D+=2*Math.PI),e$D},e$D.isPOT=function(e$D,e$m){return 0<e$D&&0==(e$D&e$D-1)&&0<e$m&&0==(e$m&e$m-1)},e$D.setMatToArray=function(e$D,e$m){e$D.a,e$D.b,e$D.c,e$D.d,e$D.tx,e$D.ty,e$m[0]=e$D.a,e$m[1]=e$D.b,e$m[4]=e$D.c,e$m[5]=e$D.d,e$m[12]=e$D.tx,e$m[13]=e$D.ty}}(),function(){function e$D(){this._controlPoints=[new e$A,new e$A,new e$A],this._calFun=this.getPoint2}e$f(e$D,"laya.maths.Bezier");var e$m=e$D.prototype;return e$m._switchPoint=function(e$D,e$m){var e$Y=this._controlPoints.shift();e$Y.setTo(e$D,e$m),this._controlPoints.push(e$Y)},e$m.getPoint2=function(e$D,e$m){var e$Y=this._controlPoints[0],e$t=this._controlPoints[1],e$y=this._controlPoints[2],e$l=Math.pow(1-e$D,2)*e$Y.x+2*e$D*(1-e$D)*e$t.x+Math.pow(e$D,2)*e$y.x,e$E=Math.pow(1-e$D,2)*e$Y.y+2*e$D*(1-e$D)*e$t.y+Math.pow(e$D,2)*e$y.y;e$m.push(e$l,e$E)},e$m.getPoint3=function(e$D,e$m){var e$Y=this._controlPoints[0],e$t=this._controlPoints[1],e$y=this._controlPoints[2],e$l=this._controlPoints[3],e$E=Math.pow(1-e$D,3)*e$Y.x+3*e$t.x*e$D*(1-e$D)*(1-e$D)+3*e$y.x*e$D*e$D*(1-e$D)+e$l.x*Math.pow(e$D,3),e$B=Math.pow(1-e$D,3)*e$Y.y+3*e$t.y*e$D*(1-e$D)*(1-e$D)+3*e$y.y*e$D*e$D*(1-e$D)+e$l.y*Math.pow(e$D,3);e$m.push(e$E,e$B)},e$m.insertPoints=function(e$D,e$m){var e$Y,e$t=NaN;for(e$Y=1/(e$D=0<e$D?e$D:5),e$t=0;e$t<=1;e$t+=e$Y)this._calFun(e$t,e$m)},e$m.getBezierPoints=function(e$D,e$m,e$Y){void 0===e$m&&(e$m=5),void 0===e$Y&&(e$Y=2);var e$t,e$y,e$l=0;if((e$t=e$D.length)<2*(e$Y+1))return[];switch(e$y=[],e$Y){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=e$Y;)this._controlPoints.push(new e$A);for(e$l=0;e$l<2*e$Y;e$l+=2)this._switchPoint(e$D[e$l],e$D[e$l+1]);for(e$l=2*e$Y;e$l<e$t;e$l+=2)this._switchPoint(e$D[e$l],e$D[e$l+1]),e$l/2%e$Y==0&&this.insertPoints(e$m,e$y);return e$y},e$o(e$D,["I",function(){return this.I=new e$D}]),e$D}()),e$c=function(){function e$r(){}return e$f(e$r,"laya.maths.GrahamScan"),e$r.multiply=function(e$D,e$m,e$Y){return(e$D.x-e$Y.x)*(e$m.y-e$Y.y)-(e$m.x-e$Y.x)*(e$D.y-e$Y.y)},e$r.dis=function(e$D,e$m){return(e$D.x-e$m.x)*(e$D.x-e$m.x)+(e$D.y-e$m.y)*(e$D.y-e$m.y)},e$r._getPoints=function(e$D,e$m,e$Y){for(void 0===e$m&&(e$m=!1),e$r._mPointList||(e$r._mPointList=[]);e$r._mPointList.length<e$D;)e$r._mPointList.push(new e$A);return e$Y||(e$Y=[]),e$Y.length=0,e$m?e$r.getFrom(e$Y,e$r._mPointList,e$D):e$r.getFromR(e$Y,e$r._mPointList,e$D),e$Y},e$r.getFrom=function(e$D,e$m,e$Y){var e$t=0;for(e$t=0;e$t<e$Y;e$t++)e$D.push(e$m[e$t]);return e$D},e$r.getFromR=function(e$D,e$m,e$Y){var e$t=0;for(e$t=0;e$t<e$Y;e$t++)e$D.push(e$m.pop());return e$D},e$r.pListToPointList=function(e$D,e$m){void 0===e$m&&(e$m=!1);var e$Y=0,e$t=e$D.length/2,e$y=e$r._getPoints(e$t,e$m,e$r._tempPointList);for(e$Y=0;e$Y<e$t;e$Y++)e$y[e$Y].setTo(e$D[e$Y+e$Y],e$D[e$Y+e$Y+1]);return e$y},e$r.pointListToPlist=function(e$D){var e$m,e$Y=0,e$t=e$D.length,e$y=e$r._temPList;for(e$Y=e$y.length=0;e$Y<e$t;e$Y++)e$m=e$D[e$Y],e$y.push(e$m.x,e$m.y);return e$y},e$r.scanPList=function(e$D){return e$Z.copyArray(e$D,e$r.pointListToPlist(e$r.scan(e$r.pListToPointList(e$D,!0))))},e$r.scan=function(e$D){var e$m,e$Y,e$t,e$y=0,e$l=0,e$E=0,e$B=e$D.length,e$o={};for((e$Y=e$r._temArr).length=0,e$y=(e$B=e$D.length)-1;0<=e$y;e$y--)e$t=(e$m=e$D[e$y]).x+"_"+e$m.y,e$o.hasOwnProperty(e$t)||(e$o[e$t]=!0,e$Y.push(e$m));for(e$B=e$Y.length,e$Z.copyArray(e$D,e$Y),e$y=1;e$y<e$B;e$y++)(e$D[e$y].y<e$D[e$E].y||e$D[e$y].y==e$D[e$E].y&&e$D[e$y].x<e$D[e$E].x)&&(e$E=e$y);for(e$m=e$D[0],e$D[0]=e$D[e$E],e$D[e$E]=e$m,e$y=1;e$y<e$B-1;e$y++){for(e$l=(e$E=e$y)+1;e$l<e$B;e$l++)(0<e$r.multiply(e$D[e$l],e$D[e$E],e$D[0])||0==e$r.multiply(e$D[e$l],e$D[e$E],e$D[0])&&e$r.dis(e$D[0],e$D[e$l])<e$r.dis(e$D[0],e$D[e$E]))&&(e$E=e$l);e$m=e$D[e$y],e$D[e$y]=e$D[e$E],e$D[e$E]=e$m}if((e$Y=e$r._temArr).length=0,e$D.length<3)return e$Z.copyArray(e$Y,e$D);for(e$Y.push(e$D[0],e$D[1],e$D[2]),e$y=3;e$y<e$B;e$y++){for(;2<=e$Y.length&&0<=e$r.multiply(e$D[e$y],e$Y[e$Y.length-1],e$Y[e$Y.length-2]);)e$Y.pop();e$D[e$y]&&e$Y.push(e$D[e$y])}return e$Y},e$r._mPointList=null,e$r._tempPointList=[],e$r._temPList=[],e$r._temArr=[],e$r}(),e$S=function(){function e$y(){}return e$f(e$y,"laya.maths.MathUtil"),e$y.subtractVector3=function(e$D,e$m,e$Y){e$Y[0]=e$D[0]-e$m[0],e$Y[1]=e$D[1]-e$m[1],e$Y[2]=e$D[2]-e$m[2]},e$y.lerp=function(e$D,e$m,e$Y){return e$D*(1-e$Y)+e$m*e$Y},e$y.scaleVector3=function(e$D,e$m,e$Y){e$Y[0]=e$D[0]*e$m,e$Y[1]=e$D[1]*e$m,e$Y[2]=e$D[2]*e$m},e$y.lerpVector3=function(e$D,e$m,e$Y,e$t){var e$y=e$D[0],e$l=e$D[1],e$E=e$D[2];e$t[0]=e$y+e$Y*(e$m[0]-e$y),e$t[1]=e$l+e$Y*(e$m[1]-e$l),e$t[2]=e$E+e$Y*(e$m[2]-e$E)},e$y.lerpVector4=function(e$D,e$m,e$Y,e$t){var e$y=e$D[0],e$l=e$D[1],e$E=e$D[2],e$B=e$D[3];e$t[0]=e$y+e$Y*(e$m[0]-e$y),e$t[1]=e$l+e$Y*(e$m[1]-e$l),e$t[2]=e$E+e$Y*(e$m[2]-e$E),e$t[3]=e$B+e$Y*(e$m[3]-e$B)},e$y.slerpQuaternionArray=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B,e$o,e$r,e$f,e$_,e$i=e$D[e$m+0],e$R=e$D[e$m+1],e$G=e$D[e$m+2],e$I=e$D[e$m+3],e$w=e$Y[e$t+0],e$W=e$Y[e$t+1],e$U=e$Y[e$t+2],e$e=e$Y[e$t+3];return(e$o=e$i*e$w+e$R*e$W+e$G*e$U+e$I*e$e)<0&&(e$o=-e$o,e$w=-e$w,e$W=-e$W,e$U=-e$U,e$e=-e$e),e$_=1e-6<1-e$o?(e$B=Math.acos(e$o),e$r=Math.sin(e$B),e$f=Math.sin((1-e$y)*e$B)/e$r,Math.sin(e$y*e$B)/e$r):(e$f=1-e$y,e$y),e$l[e$E+0]=e$f*e$i+e$_*e$w,e$l[e$E+1]=e$f*e$R+e$_*e$W,e$l[e$E+2]=e$f*e$G+e$_*e$U,e$l[e$E+3]=e$f*e$I+e$_*e$e,e$l},e$y.getRotation=function(e$D,e$m,e$Y,e$t){return Math.atan2(e$t-e$m,e$Y-e$D)/Math.PI*180},e$y.sortBigFirst=function(e$D,e$m){return e$D==e$m?0:e$D<e$m?1:-1},e$y.sortSmallFirst=function(e$D,e$m){return e$D==e$m?0:e$D<e$m?-1:1},e$y.sortNumBigFirst=function(e$D,e$m){return parseFloat(e$m)-parseFloat(e$D)},e$y.sortNumSmallFirst=function(e$D,e$m){return parseFloat(e$D)-parseFloat(e$m)},e$y.sortByKey=function(e$Y,e$D,e$m){var e$t;return void 0===e$D&&(e$D=!1),void 0===e$m&&(e$m=!0),e$t=e$D?e$m?e$y.sortNumBigFirst:e$y.sortBigFirst:e$m?e$y.sortNumSmallFirst:e$y.sortSmallFirst,function(e$D,e$m){return e$t(e$D[e$Y],e$m[e$Y])}},e$y}(),e$Q=function(){function e$Y(e$D,e$m,e$Y,e$t,e$y,e$l){this.inPool=!1,this.bTransform=!1,void 0===e$D&&(e$D=1),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=1),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=0),this.a=e$D,this.b=e$m,this.c=e$Y,this.d=e$t,this.tx=e$y,this.ty=e$l,this._checkTransform()}e$f(e$Y,"laya.maths.Matrix");var e$D=e$Y.prototype;return e$D.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e$D._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e$D.setTranslate=function(e$D,e$m){return this.tx=e$D,this.ty=e$m,this},e$D.translate=function(e$D,e$m){return this.tx+=e$D,this.ty+=e$m,this},e$D.scale=function(e$D,e$m){this.a*=e$D,this.d*=e$m,this.c*=e$D,this.b*=e$m,this.tx*=e$D,this.ty*=e$m,this.bTransform=!0},e$D.rotate=function(e$D){var e$m=Math.cos(e$D),e$Y=Math.sin(e$D),e$t=this.a,e$y=this.c,e$l=this.tx;this.a=e$t*e$m-this.b*e$Y,this.b=e$t*e$Y+this.b*e$m,this.c=e$y*e$m-this.d*e$Y,this.d=e$y*e$Y+this.d*e$m,this.tx=e$l*e$m-this.ty*e$Y,this.ty=e$l*e$Y+this.ty*e$m,this.bTransform=!0},e$D.skew=function(e$D,e$m){var e$Y=Math.tan(e$D),e$t=Math.tan(e$m),e$y=this.a,e$l=this.b;return this.a+=e$t*this.c,this.b+=e$t*this.d,this.c+=e$Y*e$y,this.d+=e$Y*e$l,this},e$D.invertTransformPoint=function(e$D){var e$m=this.a,e$Y=this.b,e$t=this.c,e$y=this.d,e$l=this.tx,e$E=e$m*e$y-e$Y*e$t,e$B=e$y/e$E,e$o=-e$Y/e$E,e$r=-e$t/e$E,e$f=e$m/e$E,e$_=(e$t*this.ty-e$y*e$l)/e$E,e$i=-(e$m*this.ty-e$Y*e$l)/e$E;return e$D.setTo(e$B*e$D.x+e$r*e$D.y+e$_,e$o*e$D.x+e$f*e$D.y+e$i)},e$D.transformPoint=function(e$D){return e$D.setTo(this.a*e$D.x+this.c*e$D.y+this.tx,this.b*e$D.x+this.d*e$D.y+this.ty)},e$D.transformPointN=function(e$D){return e$D.setTo(this.a*e$D.x+this.c*e$D.y,this.b*e$D.x+this.d*e$D.y)},e$D.transformPointArray=function(e$D,e$m){for(var e$Y=e$D.length,e$t=0;e$t<e$Y;e$t+=2){var e$y=e$D[e$t],e$l=e$D[e$t+1];e$m[e$t]=this.a*e$y+this.c*e$l+this.tx,e$m[e$t+1]=this.b*e$y+this.d*e$l+this.ty}return e$m},e$D.transformPointArrayScale=function(e$D,e$m){for(var e$Y=e$D.length,e$t=0;e$t<e$Y;e$t+=2){var e$y=e$D[e$t],e$l=e$D[e$t+1];e$m[e$t]=this.a*e$y+this.c*e$l,e$m[e$t+1]=this.b*e$y+this.d*e$l}return e$m},e$D.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e$D.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e$D.invert=function(){var e$D=this.a,e$m=this.b,e$Y=this.c,e$t=this.d,e$y=this.tx,e$l=e$D*e$t-e$m*e$Y;return this.a=e$t/e$l,this.b=-e$m/e$l,this.c=-e$Y/e$l,this.d=e$D/e$l,this.tx=(e$Y*this.ty-e$t*e$y)/e$l,this.ty=-(e$D*this.ty-e$m*e$y)/e$l,this},e$D.setTo=function(e$D,e$m,e$Y,e$t,e$y,e$l){return this.a=e$D,this.b=e$m,this.c=e$Y,this.d=e$t,this.tx=e$y,this.ty=e$l,this},e$D.concat=function(e$D){var e$m=this.a,e$Y=this.c,e$t=this.tx;return this.a=e$m*e$D.a+this.b*e$D.c,this.b=e$m*e$D.b+this.b*e$D.d,this.c=e$Y*e$D.a+this.d*e$D.c,this.d=e$Y*e$D.b+this.d*e$D.d,this.tx=e$t*e$D.a+this.ty*e$D.c+e$D.tx,this.ty=e$t*e$D.b+this.ty*e$D.d+e$D.ty,this},e$D.scaleEx=function(e$D,e$m){var e$Y=this.a,e$t=this.b,e$y=this.c,e$l=this.d;0!==e$t||0!==e$y?(this.a=e$D*e$Y,this.b=e$D*e$t,this.c=e$m*e$y):(this.a=e$D*e$Y,this.b=0*e$l,this.c=0*e$Y),this.d=e$m*e$l,this.bTransform=!0},e$D.rotateEx=function(e$D){var e$m=Math.cos(e$D),e$Y=Math.sin(e$D),e$t=this.a,e$y=this.b,e$l=this.c,e$E=this.d;0!==e$y||0!==e$l?(this.a=e$m*e$t+e$Y*e$l,this.b=e$m*e$y+e$Y*e$E,this.c=-e$Y*e$t+e$m*e$l,this.d=-e$Y*e$y+e$m*e$E):(this.a=e$m*e$t,this.b=e$Y*e$E,this.c=-e$Y*e$t,this.d=e$m*e$E),this.bTransform=!0},e$D.clone=function(){var e$D=e$Y.create();return e$D.a=this.a,e$D.b=this.b,e$D.c=this.c,e$D.d=this.d,e$D.tx=this.tx,e$D.ty=this.ty,e$D.bTransform=this.bTransform,e$D},e$D.copyTo=function(e$D){return e$D.a=this.a,e$D.b=this.b,e$D.c=this.c,e$D.d=this.d,e$D.tx=this.tx,e$D.ty=this.ty,e$D.bTransform=this.bTransform,e$D},e$D.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e$D.destroy=function(){if(!this.inPool){var e$D=e$Y._cache;this.inPool=!0,e$D._length||(e$D._length=0),(e$D[e$D._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},e$Y.mul=function(e$D,e$m,e$Y){var e$t=e$D.a,e$y=e$D.b,e$l=e$D.c,e$E=e$D.d,e$B=e$D.tx,e$o=e$D.ty,e$r=e$m.a,e$f=e$m.b,e$_=e$m.c,e$i=e$m.d,e$R=e$m.tx,e$G=e$m.ty;return 0!==e$f||0!==e$_?(e$Y.a=e$t*e$r+e$y*e$_,e$Y.b=e$t*e$f+e$y*e$i,e$Y.c=e$l*e$r+e$E*e$_,e$Y.d=e$l*e$f+e$E*e$i,e$Y.tx=e$r*e$B+e$_*e$o+e$R,e$Y.ty=e$f*e$B+e$i*e$o+e$G):(e$Y.a=e$t*e$r,e$Y.b=e$y*e$i,e$Y.c=e$l*e$r,e$Y.d=e$E*e$i,e$Y.tx=e$r*e$B+e$R,e$Y.ty=e$i*e$o+e$G),e$Y},e$Y.mul16=function(e$D,e$m,e$Y){var e$t=e$D.a,e$y=e$D.b,e$l=e$D.c,e$E=e$D.d,e$B=e$D.tx,e$o=e$D.ty,e$r=e$m.a,e$f=e$m.b,e$_=e$m.c,e$i=e$m.d,e$R=e$m.tx,e$G=e$m.ty;return 0!==e$f||0!==e$_?(e$Y[0]=e$t*e$r+e$y*e$_,e$Y[1]=e$t*e$f+e$y*e$i,e$Y[4]=e$l*e$r+e$E*e$_,e$Y[5]=e$l*e$f+e$E*e$i,e$Y[12]=e$r*e$B+e$_*e$o+e$R,e$Y[13]=e$f*e$B+e$i*e$o+e$G):(e$Y[0]=e$t*e$r,e$Y[1]=e$y*e$i,e$Y[4]=e$l*e$r,e$Y[5]=e$E*e$i,e$Y[12]=e$r*e$B+e$R,e$Y[13]=e$i*e$o+e$G),e$Y},e$Y.mulPre=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=e$D.a,e$r=e$D.b,e$f=e$D.c,e$_=e$D.d,e$i=e$D.tx,e$R=e$D.ty;return 0!==e$Y||0!==e$t?(e$B.a=e$o*e$m+e$r*e$t,e$B.b=e$o*e$Y+e$r*e$y,e$B.c=e$f*e$m+e$_*e$t,e$B.d=e$f*e$Y+e$_*e$y,e$B.tx=e$m*e$i+e$t*e$R+e$l,e$B.ty=e$Y*e$i+e$y*e$R+e$E):(e$B.a=e$o*e$m,e$B.b=e$r*e$y,e$B.c=e$f*e$m,e$B.d=e$_*e$y,e$B.tx=e$m*e$i+e$l,e$B.ty=e$y*e$R+e$E),e$B},e$Y.mulPos=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=e$D.a,e$r=e$D.b,e$f=e$D.c,e$_=e$D.d,e$i=e$D.tx,e$R=e$D.ty;return 0!==e$r||0!==e$f?(e$B.a=e$m*e$o+e$Y*e$f,e$B.b=e$m*e$r+e$Y*e$_,e$B.c=e$t*e$o+e$y*e$f,e$B.d=e$t*e$r+e$y*e$_,e$B.tx=e$o*e$l+e$f*e$E+e$i,e$B.ty=e$r*e$l+e$_*e$E+e$R):(e$B.a=e$m*e$o,e$B.b=e$Y*e$_,e$B.c=e$t*e$o,e$B.d=e$y*e$_,e$B.tx=e$o*e$l+e$i,e$B.ty=e$_*e$E+e$R),e$B},e$Y.preMul=function(e$D,e$m,e$Y){var e$t=e$D.a,e$y=e$D.b,e$l=e$D.c,e$E=e$D.d,e$B=e$m.a,e$o=e$m.b,e$r=e$m.c,e$f=e$m.d,e$_=e$m.tx,e$i=e$m.ty;return e$Y.a=e$B*e$t,e$Y.b=e$Y.c=0,e$Y.d=e$f*e$E,e$Y.tx=e$_*e$t+e$D.tx,e$Y.ty=e$i*e$E+e$D.ty,0===e$o&&0===e$r&&0===e$y&&0===e$l||(e$Y.a+=e$o*e$l,e$Y.d+=e$r*e$y,e$Y.b+=e$B*e$y+e$o*e$E,e$Y.c+=e$r*e$t+e$f*e$l,e$Y.tx+=e$i*e$l,e$Y.ty+=e$_*e$y),e$Y},e$Y.preMulXY=function(e$D,e$m,e$Y,e$t){var e$y=e$D.a,e$l=e$D.b,e$E=e$D.c,e$B=e$D.d;return e$t.a=e$y,e$t.b=e$l,e$t.c=e$E,e$t.d=e$B,e$t.tx=e$m*e$y+e$D.tx+e$Y*e$E,e$t.ty=e$Y*e$B+e$D.ty+e$m*e$l,e$t},e$Y.create=function(){var e$D=e$Y._cache,e$m=e$D._length?e$D[--e$D._length]:new e$Y;return e$m.inPool=!1,e$m},e$Y.EMPTY=new e$Y,e$Y.TEMP=new e$Y,e$Y._cache=[],e$Y}(),e$A=function(){function e$D(e$D,e$m){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),this.x=e$D,this.y=e$m}e$f(e$D,"laya.maths.Point");var e$m=e$D.prototype;return e$m.setTo=function(e$D,e$m){return this.x=e$D,this.y=e$m,this},e$m.distance=function(e$D,e$m){return Math.sqrt((this.x-e$D)*(this.x-e$D)+(this.y-e$m)*(this.y-e$m))},e$m.toString=function(){return this.x+","+this.y},e$m.normalize=function(){var e$D=Math.sqrt(this.x*this.x+this.y*this.y);if(0<e$D){var e$m=1/e$D;this.x*=e$m,this.y*=e$m}},e$D.TEMP=new e$D,e$D.EMPTY=new e$D,e$D}(),e$J=function(){function e$r(e$D,e$m,e$Y,e$t){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),this.x=e$D,this.y=e$m,this.width=e$Y,this.height=e$t}e$f(e$r,"laya.maths.Rectangle");var e$D=e$r.prototype;return e$D.setTo=function(e$D,e$m,e$Y,e$t){return this.x=e$D,this.y=e$m,this.width=e$Y,this.height=e$t,this},e$D.copyFrom=function(e$D){return this.x=e$D.x,this.y=e$D.y,this.width=e$D.width,this.height=e$D.height,this},e$D.contains=function(e$D,e$m){return!(this.width<=0||this.height<=0)&&(e$D>=this.x&&e$D<this.right&&e$m>=this.y&&e$m<this.bottom)},e$D.intersects=function(e$D){return!(e$D.x>this.x+this.width||e$D.x+e$D.width<this.x||e$D.y>this.y+this.height||e$D.y+e$D.height<this.y)},e$D.intersection=function(e$D,e$m){return this.intersects(e$D)?(e$m||(e$m=new e$r),e$m.x=Math.max(this.x,e$D.x),e$m.y=Math.max(this.y,e$D.y),e$m.width=Math.min(this.right,e$D.right)-e$m.x,e$m.height=Math.min(this.bottom,e$D.bottom)-e$m.y,e$m):null},e$D.union=function(e$D,e$m){return e$m||(e$m=new e$r),this.clone(e$m),e$D.width<=0||e$D.height<=0?e$m:(e$m.addPoint(e$D.x,e$D.y),e$m.addPoint(e$D.right,e$D.bottom),this)},e$D.clone=function(e$D){return e$D||(e$D=new e$r),e$D.x=this.x,e$D.y=this.y,e$D.width=this.width,e$D.height=this.height,e$D},e$D.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e$D.equals=function(e$D){return!(!e$D||e$D.x!==this.x||e$D.y!==this.y||e$D.width!==this.width||e$D.height!==this.height)},e$D.addPoint=function(e$D,e$m){return this.x>e$D&&(this.width+=this.x-e$D,this.x=e$D),this.y>e$m&&(this.height+=this.y-e$m,this.y=e$m),this.width<e$D-this.x&&(this.width=e$D-this.x),this.height<e$m-this.y&&(this.height=e$m-this.y),this},e$D._getBoundPoints=function(){var e$D=e$r._temB;return(e$D.length=0)==this.width||0==this.height||e$D.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e$D},e$D.isEmpty=function(){return this.width<=0||this.height<=0},e$G(0,e$D,"right",function(){return this.x+this.width}),e$G(0,e$D,"bottom",function(){return this.y+this.height}),e$r._getBoundPointS=function(e$D,e$m,e$Y,e$t){var e$y=e$r._temA;return(e$y.length=0)==e$Y||0==e$t||e$y.push(e$D,e$m,e$D+e$Y,e$m,e$D,e$m+e$t,e$D+e$Y,e$m+e$t),e$y},e$r._getWrapRec=function(e$D,e$m){if(!e$D||e$D.length<1)return e$m?e$m.setTo(0,0,0,0):e$r.TEMP.setTo(0,0,0,0);e$m=e$m||new e$r;var e$Y,e$t,e$y,e$l,e$E,e$B=e$D.length,e$o=e$A.TEMP;for(e$y=e$E=-(e$t=e$l=99999),e$Y=0;e$Y<e$B;e$Y+=2)e$o.x=e$D[e$Y],e$o.y=e$D[e$Y+1],e$t=e$t<e$o.x?e$t:e$o.x,e$l=e$l<e$o.y?e$l:e$o.y,e$y=e$y>e$o.x?e$y:e$o.x,e$E=e$E>e$o.y?e$E:e$o.y;return e$m.setTo(e$t,e$l,e$y-e$t,e$E-e$l)},e$r.EMPTY=new e$r,e$r.TEMP=new e$r,e$r._temB=[],e$r._temA=[],e$r}(),e$F=function(){function e$o(){}return e$f(e$o,"laya.media.SoundManager"),e$G(1,e$o,"useAudioMusic",function(){return e$o._useAudioMusic},function(e$D){e$o._useAudioMusic=e$D,e$o._musicClass=e$D?e$YD:null}),e$G(1,e$o,"autoStopMusic",function(){return e$o._autoStopMusic},function(e$D){e$z.stage.off("blur",null,e$o._stageOnBlur),e$z.stage.off("focus",null,e$o._stageOnFocus),e$z.stage.off("visibilitychange",null,e$o._visibilityChange),(e$o._autoStopMusic=e$D)&&(e$z.stage.on("blur",null,e$o._stageOnBlur),e$z.stage.on("focus",null,e$o._stageOnFocus),e$z.stage.on("visibilitychange",null,e$o._visibilityChange))}),e$G(1,e$o,"muted",function(){return e$o._muted},function(e$D){e$D!=e$o._muted&&(e$D&&e$o.stopAllSound(),e$o.musicMuted=e$D,e$o._muted=e$D)}),e$G(1,e$o,"musicMuted",function(){return e$o._musicMuted},function(e$D){e$D!=e$o._musicMuted&&(e$D?(e$o._tMusic&&e$o._musicChannel&&!e$o._musicChannel.isStopped?e$o._musicChannel.pause():e$o._musicChannel=null,e$o._musicMuted=e$D):(e$o._musicMuted=e$D,e$o._tMusic&&e$o._musicChannel&&e$o._musicChannel.resume()))}),e$G(1,e$o,"soundMuted",function(){return e$o._soundMuted},function(e$D){e$o._soundMuted=e$D}),e$o.addChannel=function(e$D){0<=e$o._channels.indexOf(e$D)||(e$o._channels.push(e$D),e$o.autoReleaseSound&&0!=e$o._notUsedCount&&e$o._notUsedUrls[e$D.url]&&(delete e$o._notUsedUrls[e$D.url],0==--e$o._notUsedCount&&e$z.timer.clear(e$o,e$o.disposeSoundIfNotUsed)))},e$o.removeChannel=function(e$D){var e$m=e$o._channels,e$Y=e$m.indexOf(e$D);if(-1!=e$Y&&(e$m.splice(e$Y,1),e$o.autoReleaseSound)){var e$t=e$D.url,e$y=e$o.defaultIntervals[e$t]||2e4;if(0<e$y){var e$l=!0;for(e$Y=e$m.length-1;0<=e$Y;e$Y--)if(e$m[e$Y].url==e$t){e$l=!1;break}e$l&&(e$o._notUsedUrls[e$t]=Date.now()+e$y,0==e$o._notUsedCount++&&e$z.timer.loop(1e4,e$o,e$o.disposeSoundIfNotUsed))}}},e$o.disposeSoundIfNotUsed=function(){var e$D=e$o._notUsedUrls;if(0!=e$o._notUsedCount){var e$m=Date.now();for(var e$Y in e$D)e$m>=e$D[e$Y]&&(delete e$D[e$Y],--e$o._notUsedCount,e$o.destroySound(e$Y));if(0!=e$o._notUsedCount)return}e$z.timer.clear(e$o,e$o.disposeSoundIfNotUsed)},e$o._visibilityChange=function(){e$z.stage.isVisibility?e$o._stageOnFocus():e$o._stageOnBlur()},e$o._stageOnBlur=function(){e$o._isActive=!1,e$o._musicChannel&&(e$o._musicChannel.isStopped||(e$o._blurPaused=!0,e$o._musicChannel.pause())),e$o.stopAllSound(),e$z.stage.once("mousedown",null,e$o._stageOnFocus)},e$o._recoverWebAudio=function(){e$lD.ctx&&"running"!=e$lD.ctx.state&&e$lD.ctx.resume&&e$lD.ctx.resume()},e$o._stageOnFocus=function(){if(e$o._isActive=!0,e$o._recoverWebAudio(),e$z.stage.off("mousedown",null,e$o._stageOnFocus),e$o._blurPaused){var e$D=e$o._musicChannel;e$D&&e$o._music&&e$D.isStopped&&(e$o._blurPaused=!1,e$o._music._disposed?e$o.playMusic(e$D.url,e$D.loops,e$D.startHandler,e$D.completeHandler,e$D.startTime):e$D.audioBuffer?e$D.resume():e$o._music.play(e$D.startTime,e$D.loops,e$D.startHandler,e$D))}},e$o.playSound=function(e$D,e$m,e$Y,e$t,e$y,e$l){if(void 0===e$m&&(e$m=1),void 0===e$l&&(e$l=0),!e$D)return null;if(e$o._muted)return null;if(e$o._recoverWebAudio(),e$D==e$o._tMusic){if(e$o._musicMuted)return null}else{if(!e$o._isActive)return null;if(e$o._soundMuted)return null}var e$E,e$B=e$o._pool[e$D];return e$y||(e$y=e$o._soundClass),e$B||((e$B=new e$y).load(e$D),e$o._pool[e$D]=e$B),(e$E=e$B.play(e$l,e$m,e$Y))?(e$D==e$o._tMusic&&(e$o._music=e$B,e$o._isActive||(e$o._blurPaused=!0,e$E.pause())),e$E.url=e$D,e$E.volume=e$D==e$o._tMusic?e$o.musicVolume:e$o.soundVolume,e$E.completeHandler=e$t,e$E):null},e$o.destroySound=function(e$D){var e$m=e$o._pool[e$D];e$m&&(delete e$o._pool[e$D],e$m.dispose())},e$o.playMusic=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$m&&(e$m=0),void 0===e$y&&(e$y=0),e$o._tMusic=e$D,e$o._musicChannel&&e$o._musicChannel.stop(),e$o._musicChannel=e$o.playSound(e$D,e$m,e$Y,e$t,null,e$y)},e$o.stopSound=function(e$D){for(var e$m,e$Y=e$o._channels.length-1;0<=e$Y;e$Y--)(e$m=e$o._channels[e$Y]).url==e$D&&e$m.stop()},e$o.stopAll=function(){e$o._tMusic=null;var e$D=0;for(e$D=e$o._channels.length-1;0<=e$D;e$D--)e$o._channels[e$D].stop()},e$o.stopAllSound=function(){var e$D,e$m=0;for(e$m=e$o._channels.length-1;0<=e$m;e$m--)(e$D=e$o._channels[e$m]).url!=e$o._tMusic&&e$D.stop()},e$o.stopMusic=function(){e$o._musicChannel&&e$o._musicChannel.stop(),e$o._tMusic=null},e$o.setSoundVolume=function(e$D,e$m){if(e$m)e$o._setVolume(e$m,e$D);else{e$o.soundVolume=e$D;var e$Y,e$t=0;for(e$t=e$o._channels.length-1;0<=e$t;e$t--)(e$Y=e$o._channels[e$t]).url!=e$o._tMusic&&(e$Y.volume=e$D)}},e$o.setMusicVolume=function(e$D){e$o.musicVolume=e$D,e$o._setVolume(e$o._tMusic,e$D)},e$o._setVolume=function(e$D,e$m){for(var e$Y,e$t=e$o._channels.length-1;0<=e$t;e$t--)(e$Y=e$o._channels[e$t]).url==e$D&&(e$Y.volume=e$m)},e$o.musicVolume=1,e$o.soundVolume=1,e$o.playbackRate=1,e$o._useAudioMusic=!0,e$o._muted=!1,e$o._soundMuted=!1,e$o._musicMuted=!1,e$o._tMusic=null,e$o._musicChannel=null,e$o._music=null,e$o._channels=[],e$o._autoStopMusic=!1,e$o._blurPaused=!1,e$o._isActive=!0,e$o._soundClass=null,e$o._musicClass=null,e$o.autoReleaseSound=!0,e$o._pool={},e$o.defaultIntervals={},e$o._notUsedUrls={},e$o._notUsedCount=0,e$o}(),e$a=function(){var e$D;function e$Y(){}return e$f(e$Y,"laya.net.LocalStorage"),e$Y.__init__=function(){e$Y._baseClass||(e$Y._baseClass=e$D).init(),e$Y.items=e$Y._baseClass.items,e$Y.support=e$Y._baseClass.support},e$Y.setItem=function(e$D,e$m){e$Y._baseClass.setItem(e$D,e$m)},e$Y.getItem=function(e$D){return e$Y._baseClass.getItem(e$D)},e$Y.setJSON=function(e$D,e$m){e$Y._baseClass.setJSON(e$D,e$m)},e$Y.getJSON=function(e$D){return e$Y._baseClass.getJSON(e$D)},e$Y.removeItem=function(e$D){e$Y._baseClass.removeItem(e$D)},e$Y.clear=function(){e$Y._baseClass.clear()},e$Y._baseClass=null,e$Y.items=null,e$Y.support=!1,e$Y.__init$=function(){e$D=function(){function e$Y(){}return e$f(e$Y,""),e$Y.init=function(){try{e$Y.support=!0,e$Y.items=e$R.localStorage,e$Y.setItem("laya","1"),e$Y.removeItem("laya")}catch(e$D){e$Y.support=!1}e$Y.support||console.log("LocalStorage is not supprot or browser is private mode.")},e$Y.setItem=function(e$D,e$m){try{e$Y.support&&e$Y.items.setItem(e$D,e$m)}catch(e$D){console.warn("set localStorage failed",e$D)}},e$Y.getItem=function(e$D){return e$Y.support?e$Y.items.getItem(e$D):null},e$Y.setJSON=function(e$D,e$m){try{e$Y.support&&e$Y.items.setItem(e$D,JSON.stringify(e$m))}catch(e$D){console.warn("set localStorage failed",e$D)}},e$Y.getJSON=function(e$D){return JSON.parse(e$Y.support?e$Y.items.getItem(e$D):null)},e$Y.removeItem=function(e$D){e$Y.support&&e$Y.items.removeItem(e$D)},e$Y.clear=function(){e$Y.support&&e$Y.items.clear()},e$Y.items=null,e$Y.support=!1,e$Y}()},e$Y}(),e$T=(function(){function e$t(){}e$f(e$t,"laya.net.ResourceVersion"),e$t.enable=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=2),laya.net.ResourceVersion.type=e$Y,e$z.loader.load(e$D,e$U.create(null,e$t.onManifestLoaded,[e$m]),null,"json"),e$N.customFormat=e$t.addVersionPrefix},e$t.onManifestLoaded=function(e$D,e$m){e$t.manifest=e$m,e$D.run(),e$m||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},e$t.addVersionPrefix=function(e$D){return e$t.manifest&&e$t.manifest[e$D]?2==e$t.type?e$t.manifest[e$D]:e$t.manifest[e$D]+"/"+e$D:e$D},e$t.FOLDER_VERSION=1,e$t.FILENAME_VERSION=2,e$t.manifest=null,e$t.type=1}(),function(){function e$D(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}e$f(e$D,"laya.net.TTFLoader");var e$m=e$D.prototype;return e$m.load=function(e$D){var e$m=(this._url=e$D).split(".ttf")[0].split("/");this.fontName=e$m[e$m.length-1],e$u.window.conch?this._loadConch():e$u.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e$m._loadConch=function(){this._http=new e$ED,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e$m._onHttpLoaded=function(e$D){e$u.window.conch.setFontFaceFromBuffer(this.fontName,e$D),this._clearHttp(),this._complete()},e$m._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e$m._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e$m._complete=function(){e$z.timer.clear(this,this._complete),e$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e$m._checkComplete=function(){e$s.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e$m._loadWithFontFace=function(){var e$D=new e$u.window.FontFace(this.fontName,"url('"+this._url+"')");e$u.window.document.fonts.add(e$D);var e$m=this;e$D.loaded.then(function(){e$m._complete()}),e$D.load()},e$m._createDiv=function(){this._div=e$u.createElement("div"),this._div.innerHTML="laya";var e$D=this._div.style;e$D.fontFamily=this.fontName,e$D.position="absolute",e$D.left="-100px",e$D.top="-100px",e$u.document.body.appendChild(this._div)},e$m._loadWithCSS=function(){var e$D=this,e$m=e$u.createElement("style");e$m.type="text/css",e$u.document.body.appendChild(e$m),e$m.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=e$s.measureText("LayaTTFFont",this._fontTxt).width;var e$Y=this;e$m.onload=function(){e$z.timer.once(1e4,e$Y,e$D._complete)},e$z.timer.loop(20,this,this._checkComplete),this._createDiv()},e$D._testString="LayaTTFFont",e$D}()),e$N=function(){function e$t(e$D){this._url=null,this._path=null,this._url=e$t.formatURL(e$D),this._path=e$t.getPath(e$D)}e$f(e$t,"laya.net.URL");var e$D=e$t.prototype;return e$G(0,e$D,"path",function(){return this._path}),e$G(0,e$D,"url",function(){return this._url}),e$t.formatURL=function(e$D,e$m){if(!e$D)return"null path";if(0<e$D.indexOf(":"))return e$D;null!=e$t.customFormat&&(e$D=e$t.customFormat(e$D,e$m));var e$Y=e$D.charAt(0);if("."===e$Y)return e$t.formatRelativePath((e$m||e$t.basePath)+e$D);if("~"===e$Y)return e$t.rootPath+e$D.substring(1);if("d"===e$Y){if(0===e$D.indexOf("data:image"))return e$D}else if("/"===e$Y)return e$D;return(e$m||e$t.basePath)+e$D},e$t.formatRelativePath=function(e$D){for(var e$m=e$D.split("/"),e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)".."==e$m[e$Y]&&(e$m.splice(e$Y-1,2),e$Y-=2);return e$m.join("/")},e$t.isAbsolute=function(e$D){return 0<e$D.indexOf(":")||"/"==e$D.charAt(0)},e$t.getPath=function(e$D){var e$m=e$D.lastIndexOf("/");return 0<e$m?e$D.substr(0,e$m+1):""},e$t.getFileName=function(e$D){var e$m=e$D.lastIndexOf("/");return 0<e$m?e$D.substr(e$m+1):e$D},e$t.version={},e$t.basePath="",e$t.rootPath="",e$t.customFormat=function(e$D){var e$m=e$t.version[e$D];return!e$C.isConchApp&&e$m&&(e$D+="?v="+e$m),e$D},e$t}(),e$C=function(){function e$y(e$D,e$m){this._timeId=0;var e$Y=e$y._mainCanvas.source.style;e$Y.position="absolute",e$Y.top=e$Y.left="0px",e$Y.background="#000000",e$y._mainCanvas.source.id="layaCanvas";var e$t=laya.renders.Render.isWebGL;e$y._mainCanvas.source.width=e$D,e$y._mainCanvas.source.height=e$m,e$t&&e$y.WebGL.init(e$y._mainCanvas,e$D,e$m),e$u.container.appendChild(e$y._mainCanvas.source),(e$y._context=new e$O(e$D,e$m,e$t?null:e$y._mainCanvas)).ctx.setIsMainContext(),e$u.window.requestAnimationFrame(function e$D(e$m){e$u.window.requestAnimationFrame(e$D);e$z.stage._loop(e$m)}),e$z.stage.on("visibilitychange",this,this._onVisibilitychange)}e$f(e$y,"laya.renders.Render");var e$D=e$y.prototype;return e$D._onVisibilitychange=function(){e$z.stage.isVisibility?0!=this._timeId&&e$u.window.clearInterval(this._timeId):this._timeId=e$u.window.setInterval(this._enterFrame,1e3)},e$D._enterFrame=function(e$D){e$z.stage._loop(0)},e$G(1,e$y,"context",function(){return e$y._context}),e$G(1,e$y,"canvas",function(){return e$y._mainCanvas.source}),e$y._context=null,e$y._mainCanvas=null,e$y.WebGL=null,e$y.isConchNode=!1,e$y.isConchApp=!1,e$y.isConchWebGL=!1,e$y.isWebGL=!1,e$y.is3DMode=!1,e$y.optimizeTextureMemory=function(e$D,e$m){return!0},e$y.__init$=function(){e$R.ConchRenderType=e$R.ConchRenderType||1,e$R.ConchRenderType|=e$R.conch?4:0,e$y.isConchNode=5==(5&e$R.ConchRenderType),e$y.isConchApp=4==(4&e$R.ConchRenderType),e$y.isConchWebGL=6==e$R.ConchRenderType},e$y}(),e$O=function(){function e$E(e$D,e$m,e$Y){this.x=0,this.y=0,this._drawTexture=function(e$D,e$m,e$Y){e$Y[0].loaded&&this.ctx.drawTexture(e$Y[0],e$Y[1],e$Y[2],e$Y[3],e$Y[4],e$D,e$m)},this._fillTexture=function(e$D,e$m,e$Y){e$Y[0].loaded&&this.ctx.fillTexture(e$Y[0],e$Y[1]+e$D,e$Y[2]+e$m,e$Y[3],e$Y[4],e$Y[5],e$Y[6],e$Y[7])},this._drawTextureWithTransform=function(e$D,e$m,e$Y){e$Y[0].loaded&&this.ctx.drawTextureWithTransform(e$Y[0],e$Y[1],e$Y[2],e$Y[3],e$Y[4],e$Y[5],e$D,e$m,e$Y[6])},this._fillQuadrangle=function(e$D,e$m,e$Y){this.ctx.fillQuadrangle(e$Y[0],e$Y[1],e$Y[2],e$Y[3],e$Y[4])},this._drawRect=function(e$D,e$m,e$Y){var e$t=this.ctx;null!=e$Y[4]&&(e$t.fillStyle=e$Y[4],e$t.fillRect(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3],null)),null!=e$Y[5]&&(e$t.strokeStyle=e$Y[5],e$t.lineWidth=e$Y[6],e$t.strokeRect(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3],e$Y[6]))},this._drawPie=function(e$D,e$m,e$Y){var e$t=this.ctx;e$C.isWebGL&&e$t.setPathId(e$Y[8]),e$t.beginPath(),e$C.isWebGL?(e$t.movePath(e$Y[0]+e$D,e$Y[1]+e$m),e$t.moveTo(0,0)):e$t.moveTo(e$D+e$Y[0],e$m+e$Y[1]),e$t.arc(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3],e$Y[4]),e$t.closePath(),this._fillAndStroke(e$Y[5],e$Y[6],e$Y[7],!0)},this._clipRect=function(e$D,e$m,e$Y){this.ctx.clipRect(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3])},this._fillRect=function(e$D,e$m,e$Y){this.ctx.fillRect(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3],e$Y[4])},this._drawCircle=function(e$D,e$m,e$Y){var e$t=this.ctx;e$C.isWebGL&&e$t.setPathId(e$Y[6]),e$H.drawCall++,e$t.beginPath(),e$C.isWebGL&&e$t.movePath(e$Y[0]+e$D,e$Y[1]+e$m),e$t.arc(e$Y[0]+e$D,e$Y[1]+e$m,e$Y[2],0,e$E.PI2),e$t.closePath(),this._fillAndStroke(e$Y[3],e$Y[4],e$Y[5],!0)},this._fillCircle=function(e$D,e$m,e$Y){e$H.drawCall++;var e$t=this.ctx;e$t.beginPath(),e$t.fillStyle=e$Y[3],e$t.arc(e$Y[0]+e$D,e$Y[1]+e$m,e$Y[2],0,e$E.PI2),e$t.fill()},this._setShader=function(e$D,e$m,e$Y){this.ctx.setShader(e$Y[0])},this._drawLine=function(e$D,e$m,e$Y){var e$t=this.ctx;e$C.isWebGL&&e$t.setPathId(e$Y[6]),e$t.beginPath(),e$t.strokeStyle=e$Y[4],e$t.lineWidth=e$Y[5],e$C.isWebGL?(e$t.movePath(e$D,e$m),e$t.moveTo(e$Y[0],e$Y[1]),e$t.lineTo(e$Y[2],e$Y[3])):(e$t.moveTo(e$D+e$Y[0],e$m+e$Y[1]),e$t.lineTo(e$D+e$Y[2],e$m+e$Y[3])),e$t.stroke()},this._drawLines=function(e$D,e$m,e$Y){var e$t=this.ctx;e$C.isWebGL&&e$t.setPathId(e$Y[5]),e$t.beginPath(),e$D+=e$Y[0],e$m+=e$Y[1],e$C.isWebGL&&e$t.movePath(e$D,e$m),e$t.strokeStyle=e$Y[3],e$t.lineWidth=e$Y[4];var e$y=e$Y[2],e$l=2,e$E=e$y.length;if(e$C.isWebGL)for(e$t.moveTo(e$y[0],e$y[1]);e$l<e$E;)e$t.lineTo(e$y[e$l++],e$y[e$l++]);else for(e$t.moveTo(e$D+e$y[0],e$m+e$y[1]);e$l<e$E;)e$t.lineTo(e$D+e$y[e$l++],e$m+e$y[e$l++]);e$t.stroke()},this._drawLinesWebGL=function(e$D,e$m,e$Y){this.ctx.drawLines(e$D+this.x+e$Y[0],e$m+this.y+e$Y[1],e$Y[2],e$Y[3],e$Y[4])},this._drawCurves=function(e$D,e$m,e$Y){this.ctx.drawCurves(e$D,e$m,e$Y)},this._draw=function(e$D,e$m,e$Y){e$Y[0].call(null,this,e$D,e$m)},this._transformByMatrix=function(e$D,e$m,e$Y){this.ctx.transformByMatrix(e$Y[0])},this._setTransform=function(e$D,e$m,e$Y){this.ctx.setTransform(e$Y[0],e$Y[1],e$Y[2],e$Y[3],e$Y[4],e$Y[5])},this._setTransformByMatrix=function(e$D,e$m,e$Y){this.ctx.setTransformByMatrix(e$Y[0])},this._save=function(e$D,e$m,e$Y){this.ctx.save()},this._restore=function(e$D,e$m,e$Y){this.ctx.restore()},this._translate=function(e$D,e$m,e$Y){this.ctx.translate(e$Y[0],e$Y[1])},this._transform=function(e$D,e$m,e$Y){this.ctx.translate(e$Y[1]+e$D,e$Y[2]+e$m);var e$t=e$Y[0];this.ctx.transform(e$t.a,e$t.b,e$t.c,e$t.d,e$t.tx,e$t.ty),this.ctx.translate(-e$D-e$Y[1],-e$m-e$Y[2])},this._rotate=function(e$D,e$m,e$Y){this.ctx.translate(e$Y[1]+e$D,e$Y[2]+e$m),this.ctx.rotate(e$Y[0]),this.ctx.translate(-e$D-e$Y[1],-e$m-e$Y[2])},this._scale=function(e$D,e$m,e$Y){this.ctx.translate(e$Y[2]+e$D,e$Y[3]+e$m),this.ctx.scale(e$Y[0],e$Y[1]),this.ctx.translate(-e$D-e$Y[2],-e$m-e$Y[3])},this._alpha=function(e$D,e$m,e$Y){this.ctx.globalAlpha*=e$Y[0]},this._setAlpha=function(e$D,e$m,e$Y){this.ctx.globalAlpha=e$Y[0]},this._fillText=function(e$D,e$m,e$Y){this.ctx.fillText(e$Y[0],e$Y[1]+e$D,e$Y[2]+e$m,e$Y[3],e$Y[4],e$Y[5])},this._strokeText=function(e$D,e$m,e$Y){this.ctx.strokeText(e$Y[0],e$Y[1]+e$D,e$Y[2]+e$m,e$Y[3],e$Y[4],e$Y[5],e$Y[6])},this._fillBorderText=function(e$D,e$m,e$Y){this.ctx.fillBorderText(e$Y[0],e$Y[1]+e$D,e$Y[2]+e$m,e$Y[3],e$Y[4],e$Y[5],e$Y[6],e$Y[7])},this._blendMode=function(e$D,e$m,e$Y){this.ctx.globalCompositeOperation=e$Y[0]},this._beginClip=function(e$D,e$m,e$Y){this.ctx.beginClip&&this.ctx.beginClip(e$D+e$Y[0],e$m+e$Y[1],e$Y[2],e$Y[3])},this._setIBVB=function(e$D,e$m,e$Y){this.ctx.setIBVB(e$Y[0]+e$D,e$Y[1]+e$m,e$Y[2],e$Y[3],e$Y[4],e$Y[5],e$Y[6],e$Y[7])},this._fillTrangles=function(e$D,e$m,e$Y){this.ctx.fillTrangles(e$Y[0],e$Y[1]+e$D,e$Y[2]+e$m,e$Y[3],e$Y[4])},this._drawPath=function(e$D,e$m,e$Y){var e$t=this.ctx;e$C.isWebGL&&e$t.setPathId(-1),e$t.beginPath(),e$D+=e$Y[0],e$m+=e$Y[1],e$C.isWebGL&&e$t.movePath(e$D,e$m);for(var e$y=e$Y[2],e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];switch(e$B[0]){case"moveTo":e$C.isWebGL?e$t.moveTo(e$B[1],e$B[2]):e$t.moveTo(e$D+e$B[1],e$m+e$B[2]);break;case"lineTo":e$C.isWebGL?e$t.lineTo(e$B[1],e$B[2]):e$t.lineTo(e$D+e$B[1],e$m+e$B[2]);break;case"arcTo":e$C.isWebGL?e$t.arcTo(e$B[1],e$B[2],e$B[3],e$B[4],e$B[5]):e$t.arcTo(e$D+e$B[1],e$m+e$B[2],e$D+e$B[3],e$m+e$B[4],e$B[5]);break;case"closePath":e$t.closePath()}}var e$o=e$Y[3];null!=e$o&&(e$t.fillStyle=e$o.fillStyle,e$t.fill());var e$r=e$Y[4];null!=e$r&&(e$t.strokeStyle=e$r.strokeStyle,e$t.lineWidth=e$r.lineWidth||1,e$t.lineJoin=e$r.lineJoin,e$t.lineCap=e$r.lineCap,e$t.miterLimit=e$r.miterLimit,e$t.stroke())},this.drawPoly=function(e$D,e$m,e$Y){this.ctx.drawPoly(e$D+this.x+e$Y[0],e$m+this.y+e$Y[1],e$Y[2],e$Y[3],e$Y[4],e$Y[5],e$Y[6])},this._drawPoly=function(e$D,e$m,e$Y){var e$t=this.ctx,e$y=e$Y[2],e$l=2,e$E=e$y.length;if(e$C.isWebGL)for(e$t.setPathId(e$Y[6]),e$t.beginPath(),e$D+=e$Y[0],e$m+=e$Y[1],e$t.movePath(e$D,e$m),e$t.moveTo(e$y[0],e$y[1]);e$l<e$E;)e$t.lineTo(e$y[e$l++],e$y[e$l++]);else for(e$t.beginPath(),e$D+=e$Y[0],e$m+=e$Y[1],e$t.moveTo(e$D+e$y[0],e$m+e$y[1]);e$l<e$E;)e$t.lineTo(e$D+e$y[e$l++],e$m+e$y[e$l++]);e$t.closePath(),this._fillAndStroke(e$Y[3],e$Y[4],e$Y[5],e$Y[7])},this._drawSkin=function(e$D,e$m,e$Y){var e$t=e$Y[0];if(e$t){var e$y=this.ctx;e$t.render(e$y,e$D,e$m)}},this._drawParticle=function(e$D,e$m,e$Y){this.ctx.drawParticle(e$D+this.x,e$m+this.y,e$Y[0])},this._setFilters=function(e$D,e$m,e$Y){this.ctx.setFilters(e$Y)},e$Y?this.ctx=e$Y.getContext("2d"):(e$Y=e$eD.create("3D"),this.ctx=e$s.createWebGLContext2D(e$Y),e$Y._setContext(this.ctx)),e$Y.size(e$D,e$m),this.canvas=e$Y}e$f(e$E,"laya.renders.RenderContext");var e$D=e$E.prototype;return e$D.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e$D.drawTexture=function(e$D,e$m,e$Y,e$t,e$y){e$D.loaded&&this.ctx.drawTexture(e$D,e$m,e$Y,e$t,e$y,this.x,this.y)},e$D._drawTextures=function(e$D,e$m,e$Y){e$Y[0].loaded&&this.ctx.drawTextures(e$Y[0],e$Y[1],e$D+this.x,e$m+this.y)},e$D.drawTextureWithTransform=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$D.loaded&&this.ctx.drawTextureWithTransform(e$D,e$m,e$Y,e$t,e$y,e$l,this.x,this.y,e$E)},e$D.fillQuadrangle=function(e$D,e$m,e$Y,e$t,e$y){this.ctx.fillQuadrangle(e$D,e$m,e$Y,e$t,e$y)},e$D.drawCanvas=function(e$D,e$m,e$Y,e$t,e$y){this.ctx.drawCanvas(e$D,e$m+this.x,e$Y+this.y,e$t,e$y)},e$D.drawRect=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=1);var e$E=this.ctx;e$E.strokeStyle=e$y,e$E.lineWidth=e$l,e$E.strokeRect(e$D+this.x,e$m+this.y,e$Y,e$t,e$l)},e$D._fillAndStroke=function(e$D,e$m,e$Y,e$t){void 0===e$t&&(e$t=!1);var e$y=this.ctx;null!=e$D&&(e$y.fillStyle=e$D,e$C.isWebGL?e$y.fill(e$t):e$y.fill()),null!=e$m&&0<e$Y&&(e$y.strokeStyle=e$m,e$y.lineWidth=e$Y,e$y.stroke())},e$D.clipRect=function(e$D,e$m,e$Y,e$t){this.ctx.clipRect(e$D+this.x,e$m+this.y,e$Y,e$t)},e$D.fillRect=function(e$D,e$m,e$Y,e$t,e$y){this.ctx.fillRect(e$D+this.x,e$m+this.y,e$Y,e$t,e$y)},e$D.drawCircle=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=1),e$H.drawCall++;var e$l=this.ctx;e$l.beginPath(),e$l.strokeStyle=e$t,e$l.lineWidth=e$y,e$l.arc(e$D+this.x,e$m+this.y,e$Y,0,e$E.PI2),e$l.stroke()},e$D.drawTriangles=function(e$D,e$m,e$Y){if(e$C.isWebGL)this.ctx.drawTriangles(e$Y[0],e$D+e$Y[1],e$m+e$Y[2],e$Y[3],e$Y[4],e$Y[5],e$Y[6],e$Y[7],e$Y[8],e$Y[9]);else{var e$t=e$Y[5],e$y=0,e$l=e$t.length,e$E=this.ctx;for(e$y=0;e$y<e$l;e$y+=3){var e$B=2*e$t[e$y],e$o=2*e$t[e$y+1],e$r=2*e$t[e$y+2];e$E.drawTriangle(e$Y[0],e$Y[3],e$Y[4],e$B,e$o,e$r,e$Y[6],!0)}}},e$D.fillCircle=function(e$D,e$m,e$Y,e$t){e$H.drawCall++;var e$y=this.ctx;e$y.beginPath(),e$y.fillStyle=e$t,e$y.arc(e$D+this.x,e$m+this.y,e$Y,0,e$E.PI2),e$y.fill()},e$D.setShader=function(e$D){this.ctx.setShader(e$D)},e$D.drawLine=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=1);var e$E=this.ctx;e$E.beginPath(),e$E.strokeStyle=e$y,e$E.lineWidth=e$l,e$E.moveTo(this.x+e$D,this.y+e$m),e$E.lineTo(this.x+e$Y,this.y+e$t),e$E.stroke()},e$D.clear=function(){this.ctx.clear()},e$D.transformByMatrix=function(e$D){this.ctx.transformByMatrix(e$D)},e$D.setTransform=function(e$D,e$m,e$Y,e$t,e$y,e$l){this.ctx.setTransform(e$D,e$m,e$Y,e$t,e$y,e$l)},e$D.setTransformByMatrix=function(e$D){this.ctx.setTransformByMatrix(e$D)},e$D.save=function(){this.ctx.save()},e$D.restore=function(){this.ctx.restore()},e$D.translate=function(e$D,e$m){this.ctx.translate(e$D,e$m)},e$D.transform=function(e$D,e$m,e$Y,e$t,e$y,e$l){this.ctx.transform(e$D,e$m,e$Y,e$t,e$y,e$l)},e$D.rotate=function(e$D){this.ctx.rotate(e$D)},e$D.scale=function(e$D,e$m){this.ctx.scale(e$D,e$m)},e$D.alpha=function(e$D){this.ctx.globalAlpha*=e$D},e$D.setAlpha=function(e$D){this.ctx.globalAlpha=e$D},e$D.fillWords=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$l&&(e$l=0),this.ctx.fillWords(e$D,e$m,e$Y,e$t,e$y,e$l)},e$D.fillBorderWords=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this.ctx.fillBorderWords(e$D,e$m,e$Y,e$t,e$y,e$l,e$E)},e$D.fillText=function(e$D,e$m,e$Y,e$t,e$y,e$l){this.ctx.fillText(e$D,e$m+this.x,e$Y+this.y,e$t,e$y,e$l)},e$D.strokeText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this.ctx.strokeText(e$D,e$m+this.x,e$Y+this.y,e$t,e$y,e$l,e$E)},e$D.blendMode=function(e$D){this.ctx.globalCompositeOperation=e$D},e$D.flush=function(){this.ctx.flush&&this.ctx.flush()},e$D.addRenderObject=function(e$D){this.ctx.addRenderObject(e$D)},e$D.beginClip=function(e$D,e$m,e$Y,e$t){this.ctx.beginClip&&this.ctx.beginClip(e$D,e$m,e$Y,e$t)},e$D.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e$D.fillTrangles=function(e$D,e$m,e$Y){this.ctx.fillTrangles(e$Y[0],e$Y[1],e$Y[2],e$Y[3],4<e$Y.length?e$Y[4]:null)},e$E.PI2=2*Math.PI,e$E}(),e$h=function(){function e$E(e$D,e$m){switch(this._next=e$m||e$E.NORENDER,e$D){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=e$e._filter);case 69905:return void(this._fun=e$E._initRenderFun)}this.onCreate(e$D)}e$f(e$E,"laya.renders.RenderSprite");var e$D=e$E.prototype;return e$D.onCreate=function(e$D){},e$D._style=function(e$D,e$m,e$Y,e$t){e$D._style.render(e$D,e$m,e$Y,e$t);var e$y=this._next;e$y._fun.call(e$y,e$D,e$m,e$Y,e$t)},e$D._no=function(e$D,e$m,e$Y,e$t){},e$D._custom=function(e$D,e$m,e$Y,e$t){e$D.customRender(e$m,e$Y,e$t);var e$y=e$D._style._tf;this._next._fun.call(this._next,e$D,e$m,e$Y-e$y.translateX,e$t-e$y.translateY)},e$D._clip=function(e$D,e$m,e$Y,e$t){var e$y=this._next;if(e$y!=e$E.NORENDER){var e$l=e$D._style.scrollRect;e$m.ctx.save(),e$m.ctx.clipRect(e$Y,e$t,e$l.width,e$l.height),e$y._fun.call(e$y,e$D,e$m,e$Y-e$l.x,e$t-e$l.y),e$m.ctx.restore()}},e$D._blend=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style;e$y.blendMode&&(e$m.ctx.globalCompositeOperation=e$y.blendMode);var e$l=this._next;e$l._fun.call(e$l,e$D,e$m,e$Y,e$t),e$m.ctx.globalCompositeOperation="source-over"},e$D._mask=function(e$D,e$m,e$Y,e$t){var e$y=this._next;e$y._fun.call(e$y,e$D,e$m,e$Y,e$t);var e$l=e$D.mask;e$l&&(e$m.ctx.globalCompositeOperation="destination-in",(0<e$l.numChildren||!e$l.graphics._isOnlyOne())&&(e$l.cacheAsBitmap=!0),e$l.render(e$m,e$Y-e$D.pivotX,e$t-e$D.pivotY)),e$m.ctx.globalCompositeOperation="source-over"},e$D._graphics=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style._tf;e$D._graphics&&e$D._graphics._render(e$D,e$m,e$Y-e$y.translateX,e$t-e$y.translateY);var e$l=this._next;e$l._fun.call(e$l,e$D,e$m,e$Y,e$t)},e$D._image=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style;e$m.ctx.drawTexture2(e$Y,e$t,e$y._tf.translateX,e$y._tf.translateY,e$D.transform,e$y.alpha,e$y.blendMode,e$D._graphics._one)},e$D._image2=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style._tf;e$m.ctx.drawTexture2(e$Y,e$t,e$y.translateX,e$y.translateY,e$D.transform,1,null,e$D._graphics._one)},e$D._alpha=function(e$D,e$m,e$Y,e$t){var e$y;if(.01<(e$y=e$D._style.alpha)||e$D._needRepaint()){var e$l=e$m.ctx.globalAlpha;e$m.ctx.globalAlpha*=e$y;var e$E=this._next;e$E._fun.call(e$E,e$D,e$m,e$Y,e$t),e$m.ctx.globalAlpha=e$l}},e$D._transform=function(e$D,e$m,e$Y,e$t){var e$y=e$D.transform,e$l=this._next;e$y&&e$l!=e$E.NORENDER?(e$m.save(),e$m.transform(e$y.a,e$y.b,e$y.c,e$y.d,e$y.tx+e$Y,e$y.ty+e$t),e$l._fun.call(e$l,e$D,e$m,0,0),e$m.restore()):e$l._fun.call(e$l,e$D,e$m,e$Y,e$t)},e$D._childs=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style,e$l=e$y._tf;if(e$Y=e$Y-e$l.translateX+e$y.paddingLeft,e$t=e$t-e$l.translateY+e$y.paddingTop,e$y._calculation){var e$E=e$D._getWords();if(e$E){var e$B=e$y;e$B&&(e$B.stroke?e$m.fillBorderWords(e$E,e$Y,e$t,e$B.font,e$B.color,e$B.strokeColor,e$B.stroke):e$m.fillWords(e$E,e$Y,e$t,e$B.font,e$B.color,"none"!=e$B.textDecoration&&e$B.underLine?1:0))}}var e$o,e$r=e$D._childs,e$f=e$r.length;if(e$D.viewport||e$D.optimizeScrollRect&&e$D._style.scrollRect){var e$_=e$D.viewport||e$D._style.scrollRect,e$i=e$_.x,e$R=e$_.y,e$G=e$_.right,e$I=e$_.bottom,e$w=NaN,e$W=NaN;for(e$U=0;e$U<e$f;++e$U)(e$o=e$r[e$U]).visible&&(e$w=e$o._x)<e$G&&e$w+e$o.width>e$i&&(e$W=e$o._y)<e$I&&e$W+e$o.height>e$R&&e$o.render(e$m,e$Y,e$t)}else for(var e$U=0;e$U<e$f;++e$U)(e$o=e$r[e$U])._style.visible&&e$o.render(e$m,e$Y,e$t)},e$D._canvas=function(e$D,e$m,e$Y,e$t){var e$y=e$D._$P.cacheCanvas;if(e$y){"bitmap"===e$y.type?e$H.canvasBitmap++:e$H.canvasNormal++;var e$l=e$y.ctx;if(e$D._needRepaint()||!e$l)this._canvas_repaint(e$D,e$m,e$Y,e$t);else{var e$E=e$y._cacheRec;e$m.drawCanvas(e$l.canvas,e$Y+e$E.x,e$t+e$E.y,e$E.width,e$E.height)}}else this._next._fun.call(this._next,e$D,e$m,e$Y,e$t)},e$D._canvas_repaint=function(e$D,e$m,e$Y,e$t){var e$y=e$D._$P.cacheCanvas,e$l=this._next;if(e$y){var e$E,e$B,e$o,e$r,e$f=e$y.ctx,e$_=e$D._needRepaint()||!e$f,e$i=e$y.type;if("bitmap"===e$i?e$H.canvasBitmap++:e$H.canvasNormal++,e$_){var e$R,e$G;e$y._cacheRec||(e$y._cacheRec=new e$J),e$C.isWebGL&&"bitmap"!==e$i?e$y._cacheRec.setTo(-e$D.pivotX,-e$D.pivotY,1,1):((e$r=e$D.getSelfBounds()).x=e$r.x-e$D.pivotX,e$r.y=e$r.y-e$D.pivotY,e$r.x=e$r.x-16,e$r.y=e$r.y-16,e$r.width=e$r.width+32,e$r.height=e$r.height+32,e$r.x=Math.floor(e$r.x+e$Y)-e$Y,e$r.y=Math.floor(e$r.y+e$t)-e$t,e$r.width=Math.floor(e$r.width),e$r.height=Math.floor(e$r.height),e$y._cacheRec.copyFrom(e$r)),e$r=e$y._cacheRec;var e$I,e$w=e$C.isWebGL?1:e$u.pixelRatio*e$z.stage.clientScaleX,e$W=e$C.isWebGL?1:e$u.pixelRatio*e$z.stage.clientScaleY;if(!e$C.isWebGL){var e$U,e$e=1,e$v=1;for(e$U=e$D;e$U&&e$U!=e$z.stage;)e$e*=e$U.scaleX,e$v*=e$U.scaleY,e$U=e$U.parent;e$C.isWebGL?(e$e<1&&(e$w*=e$e),e$v<1&&(e$W*=e$v)):(1<e$e&&(e$w*=e$e),1<e$v&&(e$W*=e$v))}if(e$D.scrollRect){var e$c=e$D.scrollRect;e$r.x-=e$c.x,e$r.y-=e$c.y}if(e$R=e$r.width*e$w,e$G=e$r.height*e$W,e$B=e$r.x,e$o=e$r.y,e$C.isWebGL&&"bitmap"===e$i&&(2048<e$R||2048<e$G))return console.warn("cache bitmap size larger than 2048,cache ignored"),e$y.ctx&&(e$g.recover("RenderContext",e$y.ctx),e$y.ctx.canvas.size(0,0),e$y.ctx=null),void e$l._fun.call(e$l,e$D,e$m,e$Y,e$t);if(e$f||(e$f=e$y.ctx=e$g.getItem("RenderContext")||new e$O(e$R,e$G,e$eD.create("AUTO"))),e$f.ctx.sprite=e$D,(e$E=e$f.canvas).clear(),(e$E.width!=e$R||e$E.height!=e$G)&&e$E.size(e$R,e$G),"bitmap"===e$i?e$E.context.asBitmap=!0:"normal"===e$i&&(e$E.context.asBitmap=!1),1!=e$w||1!=e$W){var e$S=e$f.ctx;e$S.save(),e$S.scale(e$w,e$W),!e$C.isConchWebGL&&e$C.isConchApp&&(e$I=e$D._$P.cf)&&e$S.setFilterMatrix&&e$S.setFilterMatrix(e$I._mat,e$I._alpha),e$l._fun.call(e$l,e$D,e$f,-e$B,-e$o),e$S.restore(),e$C.isConchApp&&!e$C.isConchWebGL||e$D._applyFilters()}else e$S=e$f.ctx,!e$C.isConchWebGL&&e$C.isConchApp&&(e$I=e$D._$P.cf)&&e$S.setFilterMatrix&&e$S.setFilterMatrix(e$I._mat,e$I._alpha),e$l._fun.call(e$l,e$D,e$f,-e$B,-e$o),e$C.isConchApp&&!e$C.isConchWebGL||e$D._applyFilters();e$D._$P.staticCache&&(e$y.reCache=!1),e$H.canvasReCache++}else e$B=(e$r=e$y._cacheRec).x,e$o=e$r.y,e$E=e$f.canvas;e$m.drawCanvas(e$E,e$Y+e$B,e$t+e$o,e$r.width,e$r.height)}else e$l._fun.call(e$l,e$D,e$f,e$Y,e$t)},e$E.__init__=function(){var e$D,e$m,e$Y=0;for(e$m=e$s.createRenderSprite(69905,null),e$D=e$E.renders.length=4096,e$Y=0;e$Y<e$D;e$Y++)e$E.renders[e$Y]=e$m;e$E.renders[0]=e$s.createRenderSprite(0,null),function(e$D,e$m){for(var e$Y=0,e$t=0;e$t<e$D.length;e$t++)e$Y|=e$D[e$t],e$E.renders[e$Y]=e$m}([1,512,4,2],new e$E(1,null)),e$E.renders[513]=e$s.createRenderSprite(513,null),e$E.renders[517]=new e$E(517,null)},e$E._initRenderFun=function(e$D,e$m,e$Y,e$t){var e$y=e$D._renderType;(e$E.renders[e$y]=e$E._getTypeRender(e$y))._fun(e$D,e$m,e$Y,e$t)},e$E._getTypeRender=function(e$D){for(var e$m=null,e$Y=2048;1<e$Y;)e$Y&e$D&&(e$m=e$s.createRenderSprite(e$Y,e$m)),e$Y>>=1;return e$m},e$E.IMAGE=1,e$E.ALPHA=2,e$E.TRANSFORM=4,e$E.BLEND=8,e$E.CANVAS=16,e$E.FILTERS=32,e$E.MASK=64,e$E.CLIP=128,e$E.STYLE=256,e$E.GRAPHICS=512,e$E.CUSTOM=1024,e$E.CHILDS=2048,e$E.INIT=69905,e$E.renders=[],e$E.NORENDER=new e$E(0,null),e$E}(),e$X=function(){function e$B(){this._repaint=!1}e$f(e$B,"laya.resource.Context");var e$D=e$B.prototype;return e$D.replaceReset=function(){var e$D,e$m,e$Y=0;for(e$D=e$B.replaceKeys.length,e$Y=0;e$Y<e$D;e$Y++)e$m=e$B.replaceKeys[e$Y],this[e$B.newKeys[e$Y]]=this[e$m]},e$D.replaceResotre=function(){this.__restore(),this.__reset()},e$D.setIsMainContext=function(){},e$D.drawTextures=function(e$D,e$m,e$Y,e$t){e$H.drawCall+=e$m.length/2;for(var e$y=e$D.width,e$l=e$D.height,e$E=0,e$B=e$m.length;e$E<e$B;e$E+=2)this.drawTexture(e$D,e$m[e$E],e$m[e$E+1],e$y,e$l,e$Y,e$t)},e$D.drawCanvas=function(e$D,e$m,e$Y,e$t,e$y){e$H.drawCall++,this.drawImage(e$D.source,e$m,e$Y,e$t,e$y)},e$D.fillRect=function(e$D,e$m,e$Y,e$t,e$y){e$H.drawCall++,e$y&&(this.fillStyle=e$y),this.__fillRect(e$D,e$m,e$Y,e$t)},e$D.fillText=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$H.drawCall++,3<arguments.length&&null!=e$t&&(this.font=e$t,this.fillStyle=e$y,this.textAlign=e$l,this.textBaseline="top"),this.__fillText(e$D,e$m,e$Y)},e$D.fillBorderText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){e$H.drawCall++,this.font=e$t,this.fillStyle=e$y,this.textBaseline="top",this.strokeStyle=e$l,this.lineWidth=e$E,this.textAlign=e$B,this.__strokeText(e$D,e$m,e$Y),this.__fillText(e$D,e$m,e$Y)},e$D.strokeText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$H.drawCall++,3<arguments.length&&null!=e$t&&(this.font=e$t,this.strokeStyle=e$y,this.lineWidth=e$l,this.textAlign=e$E,this.textBaseline="top"),this.__strokeText(e$D,e$m,e$Y)},e$D.transformByMatrix=function(e$D){this.transform(e$D.a,e$D.b,e$D.c,e$D.d,e$D.tx,e$D.ty)},e$D.setTransformByMatrix=function(e$D){this.setTransform(e$D.a,e$D.b,e$D.c,e$D.d,e$D.tx,e$D.ty)},e$D.clipRect=function(e$D,e$m,e$Y,e$t){e$H.drawCall++,this.beginPath(),this.rect(e$D,e$m,e$Y,e$t),this.clip()},e$D.drawTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$H.drawCall++;var e$B=e$D.uv,e$o=e$D.bitmap.width,e$r=e$D.bitmap.height;this.drawImage(e$D.source,e$B[0]*e$o,e$B[1]*e$r,(e$B[2]-e$B[0])*e$o,(e$B[5]-e$B[3])*e$r,e$m+e$l,e$Y+e$E,e$t,e$y)},e$D.drawTextureWithTransform=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){e$H.drawCall++;var e$r=e$D.uv,e$f=e$D.bitmap.width,e$_=e$D.bitmap.height;this.save(),1!=e$o&&(this.globalAlpha*=e$o),e$l?(this.transform(e$l.a,e$l.b,e$l.c,e$l.d,e$l.tx+e$E,e$l.ty+e$B),this.drawImage(e$D.source,e$r[0]*e$f,e$r[1]*e$_,(e$r[2]-e$r[0])*e$f,(e$r[5]-e$r[3])*e$_,e$m,e$Y,e$t,e$y)):this.drawImage(e$D.source,e$r[0]*e$f,e$r[1]*e$_,(e$r[2]-e$r[0])*e$f,(e$r[5]-e$r[3])*e$_,e$m+e$E,e$Y+e$B,e$t,e$y),this.restore()},e$D.drawTexture2=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=e$B[0];if(e$o.loaded&&e$o.bitmap&&e$o.source){e$H.drawCall++;var e$r=1!==e$l;if(e$r){var e$f=this.globalAlpha;this.globalAlpha*=e$l}var e$_=e$o.uv,e$i=e$o.bitmap.width,e$R=e$o.bitmap.height;e$y?(this.save(),this.transform(e$y.a,e$y.b,e$y.c,e$y.d,e$y.tx+e$D,e$y.ty+e$m),this.drawImage(e$o.source,e$_[0]*e$i,e$_[1]*e$R,(e$_[2]-e$_[0])*e$i,(e$_[5]-e$_[3])*e$R,e$B[1]-e$Y,e$B[2]-e$t,e$B[3],e$B[4]),this.restore()):this.drawImage(e$o.source,e$_[0]*e$i,e$_[1]*e$R,(e$_[2]-e$_[0])*e$i,(e$_[5]-e$_[3])*e$R,e$B[1]-e$Y+e$D,e$B[2]-e$t+e$m,e$B[3],e$B[4]),e$r&&(this.globalAlpha=e$f)}},e$D.fillTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){if(!e$B.pat){if(e$D.uv!=e$fD.DEF_UV){var e$o=new e$eD("2D");e$o.getContext("2d"),e$o.size(e$D.width,e$D.height),e$o.context.drawTexture(e$D,0,0,e$D.width,e$D.height,0,0),e$D=new e$fD(e$o)}e$B.pat=this.createPattern(e$D.bitmap.source,e$l)}var e$r=e$m,e$f=e$Y,e$_=0,e$i=0;e$E&&(e$r+=e$E.x%e$D.width,e$f+=e$E.y%e$D.height,e$_-=e$E.x%e$D.width,e$i-=e$E.y%e$D.height),this.translate(e$r,e$f),this.fillRect(e$_,e$i,e$t,e$y,e$B.pat),this.translate(-e$r,-e$f)},e$D.drawTriangle=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=e$D.bitmap,e$r=e$o.source,e$f=e$D.width,e$_=e$D.height,e$i=e$o.width,e$R=e$o.height,e$G=e$Y[e$t]*e$i,e$I=e$Y[e$y]*e$i,e$w=e$Y[e$l]*e$i,e$W=e$Y[e$t+1]*e$R,e$U=e$Y[e$y+1]*e$R,e$e=e$Y[e$l+1]*e$R,e$v=e$m[e$t],e$c=e$m[e$y],e$S=e$m[e$l],e$z=e$m[e$t+1],e$A=e$m[e$y+1],e$J=e$m[e$l+1];if(e$B){var e$a=(e$v+e$c+e$S)/3,e$p=(e$z+e$A+e$J)/3,e$F=e$v-e$a,e$s=e$z-e$p,e$Q=Math.sqrt(e$F*e$F+e$s*e$s);e$v=e$a+e$F/e$Q*(e$Q+1),e$z=e$p+e$s/e$Q*(e$Q+1),e$s=e$A-e$p,e$c=e$a+(e$F=e$c-e$a)/(e$Q=Math.sqrt(e$F*e$F+e$s*e$s))*(e$Q+1),e$A=e$p+e$s/e$Q*(e$Q+1),e$s=e$J-e$p,e$S=e$a+(e$F=e$S-e$a)/(e$Q=Math.sqrt(e$F*e$F+e$s*e$s))*(e$Q+1),e$J=e$p+e$s/e$Q*(e$Q+1)}this.save(),e$E&&this.transform(e$E.a,e$E.b,e$E.c,e$E.d,e$E.tx,e$E.ty),this.beginPath(),this.moveTo(e$v,e$z),this.lineTo(e$c,e$A),this.lineTo(e$S,e$J),this.closePath(),this.clip();var e$T=1/(e$G*e$U+e$W*e$w+e$I*e$e-e$U*e$w-e$W*e$I-e$G*e$e),e$N=e$v*e$U+e$W*e$S+e$c*e$e-e$U*e$S-e$W*e$c-e$v*e$e,e$C=e$G*e$c+e$v*e$w+e$I*e$S-e$c*e$w-e$v*e$I-e$G*e$S,e$O=e$G*e$U*e$S+e$W*e$c*e$w+e$v*e$I*e$e-e$v*e$U*e$w-e$W*e$I*e$S-e$G*e$c*e$e,e$h=e$z*e$U+e$W*e$J+e$A*e$e-e$U*e$J-e$W*e$A-e$z*e$e,e$X=e$G*e$A+e$z*e$w+e$I*e$J-e$A*e$w-e$z*e$I-e$G*e$J,e$P=e$G*e$U*e$J+e$W*e$A*e$w+e$z*e$I*e$e-e$z*e$U*e$w-e$W*e$I*e$J-e$G*e$A*e$e;this.transform(e$N*e$T,e$h*e$T,e$C*e$T,e$X*e$T,e$O*e$T,e$P*e$T),this.drawImage(e$r,e$D.uv[0]*e$i,e$D.uv[1]*e$R,e$f,e$_,e$D.uv[0]*e$i,e$D.uv[1]*e$R,e$f,e$_),this.restore()},e$D.flush=function(){return 0},e$D.fillWords=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$t&&(this.font=e$t),e$y&&(this.fillStyle=e$y);this.textBaseline="top",this.textAlign="left";for(var e$E=0,e$B=e$D.length;e$E<e$B;e$E++){var e$o=e$D[e$E];if(this.__fillText(e$o.char,e$o.x+e$m,e$o.y+e$Y),1===e$l){var e$r=e$o.height,e$f=.5*e$o.style.letterSpacing;e$f||(e$f=0),this.beginPath(),this.strokeStyle=e$y,this.lineWidth=1,this.moveTo(e$m+e$o.x-e$f+.5,e$Y+e$o.y+e$r+.5),this.lineTo(e$m+e$o.x+e$o.width+e$f+.5,e$Y+e$o.y+e$r+.5),this.stroke()}}},e$D.fillBorderWords=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$t&&(this.font=e$t),e$y&&(this.fillStyle=e$y),this.textBaseline="top",this.lineWidth=e$E,this.textAlign="left",this.strokeStyle=e$l;for(var e$B=0,e$o=e$D.length;e$B<e$o;e$B++){var e$r=e$D[e$B];this.__strokeText(e$r.char,e$r.x+e$m,e$r.y+e$Y),this.__fillText(e$r.char,e$r.x+e$m,e$r.y+e$Y)}},e$D.destroy=function(){this.canvas.width=this.canvas.height=0},e$D.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},e$D.drawCurves=function(e$D,e$m,e$Y){this.beginPath(),this.strokeStyle=e$Y[3],this.lineWidth=e$Y[4];var e$t=e$Y[2];e$D+=e$Y[0],e$m+=e$Y[1],this.moveTo(e$D+e$t[0],e$m+e$t[1]);for(var e$y=2,e$l=e$t.length;e$y<e$l;)this.quadraticCurveTo(e$D+e$t[e$y++],e$m+e$t[e$y++],e$D+e$t[e$y++],e$m+e$t[e$y++]);this.stroke()},e$B.__init__=function(e$m){var e$Y=laya.resource.Context.prototype;if(!(e$m=e$m||CanvasRenderingContext2D.prototype).inited){e$m.inited=!0,e$m.__fillText=e$m.fillText,e$m.__fillRect=e$m.fillRect,e$m.__strokeText=e$m.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(e$D){e$m[e$D]=e$Y[e$D]})}},e$B.replaceCanvasGetSet=function(e$D,e$m){var e$Y=Object.getOwnPropertyDescriptor(e$D,e$m);if(!e$Y||!e$Y.configurable)return!1;var e$t,e$y={};for(e$t in e$Y)"set"!=e$t&&(e$y[e$t]=e$Y[e$t]);var e$l=e$Y.set;return e$y.set=function(e$D){e$l.call(this,e$D);var e$m=this.getContext("2d");e$m&&"__reset"in e$m&&e$m.__reset()},Object.defineProperty(e$D,e$m,e$y),!0},e$B.replaceGetSet=function(e$D,e$m){var e$Y=Object.getOwnPropertyDescriptor(e$D,e$m);if(!e$Y||!e$Y.configurable)return!1;var e$t,e$y={};for(e$t in e$Y)"set"!=e$t&&(e$y[e$t]=e$Y[e$t]);var e$l=e$Y.set,e$E="___"+e$m+"__";return e$B.newKeys.push(e$E),e$y.set=function(e$D){e$D!=this[e$E]&&(this[e$E]=e$D,e$l.call(this,e$D))},Object.defineProperty(e$D,e$m,e$y),!0},e$B._default=new e$B,e$B.newKeys=[],e$o(e$B,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),e$B}(),e$P=function(){function e$l(e$D){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++e$l._uniqueIDCounter,this._name=e$D||"Content Manager",e$l._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,e$l._resourceManagers.push(this),this._resources=[],this._records={}}e$f(e$l,"laya.resource.ResourceManager");var e$D=e$l.prototype;return e$z.imps(e$D,{"laya.resource.IDispose":!0}),e$D.getResourceByIndex=function(e$D){return this._resources[e$D]},e$D.getResourcesLength=function(){return this._resources.length},e$D.addResource=function(e$D){return e$D.resourceManager&&e$D.resourceManager.removeResource(e$D),-1===this._resources.indexOf(e$D)&&((e$D._resourceManager=this)._resources.push(e$D),this.addRecord(e$D.uri,e$D.__className,e$D.memorySize),this.addSize(e$D.memorySize),!0)},e$D.removeResource=function(e$D){var e$m=this._resources.indexOf(e$D);return-1!==e$m&&(this._resources.splice(e$m,1),e$D._resourceManager=null,this._memorySize-=e$D.memorySize,this.addRecord(e$D.uri,e$D.__className,-e$D.memorySize),!0)},e$D.unload=function(){for(var e$D=this._resources.slice(0,this._resources.length),e$m=0;e$m<e$D.length;e$m++){e$D[e$m].destroy()}e$D.length=0},e$D.dispose=function(){if(this===e$l._systemResourceManager)throw new Error("systemResourceManager不能被释放！");e$l._resourceManagers.splice(e$l._resourceManagers.indexOf(this),1),e$l._isResourceManagersSorted=!1;for(var e$D=this._resources.slice(0,this._resources.length),e$m=0;e$m<e$D.length;e$m++){var e$Y=e$D[e$m];e$Y.resourceManager.removeResource(e$Y),e$Y.destroy()}e$D.length=0},e$D.addSize=function(e$D){e$D&&(this.autoRelease&&0<e$D&&this._memorySize+e$D>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=e$D)},e$D.addRecord=function(e$D,e$m,e$Y){DEBUG&&e$Y&&!e$D&&console.error(e$D,e$m,e$Y)},e$D.garbageCollection=function(e$D){var e$m=this._resources;(e$m=e$m.slice()).sort(function(e$D,e$m){if(!e$D||!e$m)throw new Error("a或b不能为空！");return e$D.released&&e$m.released?0:e$D.released?1:e$m.released?-1:e$D._lastUseFrameCount-e$m._lastUseFrameCount});for(var e$Y=e$H.loopCount,e$t=0,e$y=e$m.length;e$t<e$y;e$t++){var e$l=e$m[e$t];if(!(1<e$Y-e$l._lastUseFrameCount))return void(this._memorySize>=e$D&&(this._isOverflow=!0));if(e$l.releaseResource(),this._memorySize<e$D)return void(this._isOverflow=!1)}},e$G(0,e$D,"id",function(){return this._id}),e$G(0,e$D,"name",function(){return this._name},function(e$D){!e$D&&""===e$D||this._name===e$D||(this._name=e$D,e$l._isResourceManagersSorted=!1)}),e$G(0,e$D,"memorySize",function(){return this._memorySize}),e$G(0,e$D,"records",function(){return this._records}),e$G(1,e$l,"systemResourceManager",function(){return e$l._systemResourceManager}),e$l.__init__=function(){e$l.currentResourceManager=e$l.systemResourceManager},e$l.getLoadedResourceManagerByIndex=function(e$D){return e$l._resourceManagers[e$D]},e$l.getLoadedResourceManagersCount=function(){return e$l._resourceManagers.length},e$l.recreateContentManagers=function(e$D){void 0===e$D&&(e$D=!1);for(var e$m=e$l.currentResourceManager,e$Y=0;e$Y<e$l._resourceManagers.length;e$Y++){e$l.currentResourceManager=e$l._resourceManagers[e$Y];for(var e$t=0;e$t<e$l.currentResourceManager._resources.length;e$t++)e$l.currentResourceManager._resources[e$t].releaseResource(e$D),e$l.currentResourceManager._resources[e$t].activeResource(e$D)}e$l.currentResourceManager=e$m},e$l.releaseContentManagers=function(e$D){void 0===e$D&&(e$D=!1);for(var e$m=e$l.currentResourceManager,e$Y=0;e$Y<e$l._resourceManagers.length;e$Y++){e$l.currentResourceManager=e$l._resourceManagers[e$Y];for(var e$t=0;e$t<e$l.currentResourceManager._resources.length;e$t++){var e$y=e$l.currentResourceManager._resources[e$t];!e$y.released&&e$y.releaseResource(e$D)}}e$l.currentResourceManager=e$m},e$l._uniqueIDCounter=0,e$l._isResourceManagersSorted=!1,e$l._resourceManagers=[],e$o(e$l,["_systemResourceManager",function(){return this._systemResourceManager=new e$l("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=e$l._systemResourceManager}]),e$l}(),e$u=(function(){function e$D(){}e$f(e$D,"laya.system.System"),e$D.changeDefinition=function(e$D,e$m){e$z[e$D]=e$m;var e$Y=e$D+"=classObj";e$z._runScript(e$Y)},e$D.__init__=function(){e$C.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function e$Y(){}return e$f(e$Y,"laya.utils.Browser"),e$G(1,e$Y,"pixelRatio",function(){return e$Y.__init__(),-1<e$Y.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:e$s.getPixelRatio()}),e$G(1,e$Y,"height",function(){return e$Y.__init__(),(e$z.stage&&e$z.stage.canvasRotation?e$Y.clientWidth:e$Y.clientHeight)*e$Y.pixelRatio}),e$G(1,e$Y,"clientWidth",function(){return e$Y.__init__(),e$Y.window.innerWidth||e$Y.document.body.clientWidth}),e$G(1,e$Y,"window",function(){return e$Y.__init__(),e$Y._window}),e$G(1,e$Y,"clientHeight",function(){return e$Y.__init__(),e$Y.window.innerHeight||e$Y.document.body.clientHeight||e$Y.document.documentElement.clientHeight}),e$G(1,e$Y,"width",function(){return e$Y.__init__(),(e$z.stage&&e$z.stage.canvasRotation?e$Y.clientHeight:e$Y.clientWidth)*e$Y.pixelRatio}),e$G(1,e$Y,"container",function(){return e$Y.__init__(),e$Y._container||((e$Y._container=e$Y.createElement("div")).id="layaContainer",e$Y.document.body.appendChild(e$Y._container)),e$Y._container},function(e$D){e$Y._container=e$D}),e$G(1,e$Y,"document",function(){return e$Y.__init__(),e$Y._document}),e$Y.__init__=function(){if(!e$Y._window){e$Y._window=e$s.getWindow(),e$Y._document=e$Y.window.document,e$Y._window.addEventListener("message",function(e$D){laya.utils.Browser._onMessage(e$D)},!1),e$Y.document.__createElement=e$Y.document.createElement,e$R.requestAnimationFrame=e$R.requestAnimationFrame||e$R.webkitRequestAnimationFrame||e$R.mozRequestAnimationFrame||e$R.oRequestAnimationFrame||e$R.msRequestAnimationFrame||function(e$D){return e$R.setTimeout(e$D,1e3/60)};var e$D=e$R.document.body.style;e$D["-webkit-user-select"]="none",e$D["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",e$Y.userAgent=e$Y.window.navigator.userAgent,e$Y.onIOS=!!(e$Y.u=e$Y.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),e$Y.onMobile=-1<e$Y.u.indexOf("Mobile"),e$Y.onIPhone=-1<e$Y.u.indexOf("iPhone"),e$Y.onMac=-1<e$Y.u.indexOf("Mac OS X"),e$Y.onIPad=-1<e$Y.u.indexOf("iPad"),e$Y.onAndroid=-1<e$Y.u.indexOf("Android")||-1<e$Y.u.indexOf("Adr"),e$Y.onWP=-1<e$Y.u.indexOf("Windows Phone"),e$Y.onQQBrowser=-1<e$Y.u.indexOf("QQBrowser"),e$Y.onMQQBrowser=-1<e$Y.u.indexOf("MQQBrowser")||-1<e$Y.u.indexOf("Mobile")&&-1<e$Y.u.indexOf("QQ"),e$Y.onIE=!!e$Y.window.ActiveXObject||"ActiveXObject"in e$Y.window,e$Y.onWeiXin=-1<e$Y.u.indexOf("MicroMessenger"),e$Y.onPC=!e$Y.onMobile,e$Y.onSafari=-1<e$Y.u.indexOf("Safari"),e$Y.onFirefox=-1<e$Y.u.indexOf("Firefox"),e$Y.onEdge=-1<e$Y.u.indexOf("Edge"),e$Y.onMiniGame=-1<e$Y.u.indexOf("MiniGame"),e$Y.onLimixiu=-1<e$Y.u.indexOf("limixiu"),e$Y.httpProtocol="http:"==e$Y.window.location.protocol,e$Y.onMiniGame&&null==e$Y.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),e$Y.webAudioEnabled=!!(e$Y.window.AudioContext||e$Y.window.webkitAudioContext||e$Y.window.mozAudioContext),e$Y.soundType=e$Y.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",e$yD=e$Y.webAudioEnabled?e$lD:e$YD,e$Y.webAudioEnabled&&e$lD.initWebAudio(),e$YD._initMusicAudio(),e$Y.enableTouch="ontouchstart"in e$R||e$R.DocumentTouch&&e$m instanceof DocumentTouch,e$R.focus(),e$F._soundClass=e$yD,e$F._musicClass=e$YD,e$C._mainCanvas=e$C._mainCanvas||e$eD.create("2D"),e$Y.canvas||(e$Y.canvas=e$eD.create("2D"),e$Y.context=e$Y.canvas.getContext("2d"))}},e$Y._onMessage=function(e$D){if(e$D.data&&"size"==e$D.data.name){if(e$Y.window.innerWidth=e$D.data.width,e$Y.window.innerHeight=e$D.data.height,e$Y.window.__innerHeight=e$D.data.clientHeight,!e$Y.document.createEvent)return void console.warn("no document.createEvent");var e$m=e$Y.document.createEvent("HTMLEvents");return e$m.initEvent("resize",!1,!1),void e$Y.window.dispatchEvent(e$m)}},e$Y.createElement=function(e$D){return e$Y.__init__(),e$Y.document.__createElement(e$D)},e$Y.getElementById=function(e$D){return e$Y.__init__(),e$Y.document.getElementById(e$D)},e$Y.removeElement=function(e$D){e$D&&e$D.parentNode&&e$D.parentNode.removeChild(e$D)},e$Y.now=function(){return e$s.now()},e$Y._window=null,e$Y._document=null,e$Y._container=null,e$Y.userAgent=null,e$Y.u=null,e$Y.onIOS=!1,e$Y.onMac=!1,e$Y.onMobile=!1,e$Y.onIPhone=!1,e$Y.onIPad=!1,e$Y.onAndroid=!1,e$Y.onWP=!1,e$Y.onQQBrowser=!1,e$Y.onMQQBrowser=!1,e$Y.onSafari=!1,e$Y.onFirefox=!1,e$Y.onEdge=!1,e$Y.onIE=!1,e$Y.onWeiXin=!1,e$Y.onMiniGame=!1,e$Y.onLimixiu=!1,e$Y.onPC=!1,e$Y.httpProtocol=!1,e$Y.webAudioEnabled=!1,e$Y.soundType=null,e$Y.enableTouch=!1,e$Y.canvas=null,e$Y.context=null,e$Y.__init$=function(){},e$Y}()),e$L=function(){function e$m(e$D){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,e$D?(this._u8d_=new Uint8Array(e$D),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}e$f(e$m,"laya.utils.Byte");var e$D=e$m.prototype;return e$D.___resizeBuffer=function(e$m){try{var e$D=new Uint8Array(e$m);null!=this._u8d_&&(this._u8d_.length<=e$m?e$D.set(this._u8d_):e$D.set(this._u8d_.subarray(0,e$m))),this._u8d_=e$D,this._d_=new DataView(e$D.buffer)}catch(e$D){throw"___resizeBuffer err:"+e$m}},e$D.getString=function(){return this.rUTF(this.getUint16())},e$D.getFloat32Array=function(e$D,e$m){var e$Y=e$D+e$m;e$Y=e$Y>this._length?this._length:e$Y;var e$t=new Float32Array(this._d_.buffer.slice(e$D,e$Y));return this._pos_=e$Y,e$t},e$D.getUint8Array=function(e$D,e$m){var e$Y=e$D+e$m;e$Y=e$Y>this._length?this._length:e$Y;var e$t=new Uint8Array(this._d_.buffer.slice(e$D,e$Y));return this._pos_=e$Y,e$t},e$D.getInt16Array=function(e$D,e$m){var e$Y=e$D+e$m;e$Y=e$Y>this._length?this._length:e$Y;var e$t=new Int16Array(this._d_.buffer.slice(e$D,e$Y));return this._pos_=e$Y,e$t},e$D.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var e$D=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,e$D},e$D.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var e$D=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,e$D},e$D.writeFloat32=function(e$D){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,e$D,this._xd_),this._pos_+=4},e$D.writeFloat64=function(e$D){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,e$D,this._xd_),this._pos_+=8},e$D.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var e$D=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,e$D},e$D.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var e$D=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,e$D},e$D.writeInt32=function(e$D){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,e$D,this._xd_),this._pos_+=4},e$D.writeUint32=function(e$D){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,e$D,this._xd_),this._pos_+=4},e$D.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var e$D=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,e$D},e$D.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var e$D=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,e$D},e$D.writeUint16=function(e$D){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,e$D,this._xd_),this._pos_+=2},e$D.writeInt16=function(e$D){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,e$D,this._xd_),this._pos_+=2},e$D.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},e$D.writeUint8=function(e$D){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,e$D),this._pos_++},e$D._getUInt8=function(e$D){return this._d_.getUint8(e$D)},e$D._getUint16=function(e$D){return this._d_.getUint16(e$D,this._xd_)},e$D._getMatrix=function(){return new e$Q(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},e$D.rUTF=function(e$D){for(var e$m=[],e$Y=this._pos_+e$D,e$t=0,e$y=0,e$l=0,e$E=String.fromCharCode,e$B=this._u8d_;this._pos_<e$Y;)(e$t=e$B[this._pos_++])<128?0!=e$t&&e$m.push(e$E(e$t)):e$t<224?e$m.push(e$E((63&e$t)<<6|127&e$B[this._pos_++])):e$t<240?(e$y=e$B[this._pos_++],e$m.push(e$E((31&e$t)<<12|(127&e$y)<<6|127&e$B[this._pos_++]))):(e$y=e$B[this._pos_++],e$l=e$B[this._pos_++],e$m.push(e$E((15&e$t)<<18|(127&e$y)<<12|e$l<<6&127|127&e$B[this._pos_++]))),0;return e$m.join("")},e$D.getCustomString=function(e$D){for(var e$m=[],e$Y=0,e$t=0,e$y=0,e$l=String.fromCharCode,e$E=this._u8d_;0<e$D;)if((e$t=e$E[this._pos_])<128)e$m.push(e$l(e$t)),this._pos_++,e$D--;else for(e$Y=e$t-128,this._pos_++,e$D-=e$Y;0<e$Y;)e$t=e$E[this._pos_++],e$y=e$E[this._pos_++],e$m.push(e$l(e$y<<8|e$t)),e$Y--;return e$m.join("")},e$D.clear=function(){this._pos_=0,this.length=0},e$D.__getBuffer=function(){return this._d_.buffer},e$D.writeUTFBytes=function(e$D){for(var e$m=0,e$Y=(e$D+="").length;e$m<e$Y;e$m++){var e$t=e$D.charCodeAt(e$m);e$t<=127?this.writeByte(e$t):e$t<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|e$t>>6,128|63&e$t],this._pos_),this._pos_+=2):e$t<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|e$t>>12,128|e$t>>6&63,128|63&e$t],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|e$t>>18,128|e$t>>12&63,128|e$t>>6&63,128|63&e$t],this._pos_),this._pos_+=4)}},e$D.writeUTFString=function(e$D){var e$m=this.pos;this.writeUint16(1),this.writeUTFBytes(e$D);var e$Y=this.pos-e$m-2;if(65536<=e$Y)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e$m,e$Y,this._xd_)},e$D.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e$D.getUTFString=function(){return this.readUTFString()},e$D.readUTFBytes=function(e$D){if(void 0===e$D&&(e$D=-1),0==e$D)return"";var e$m=this.bytesAvailable;if(e$m<e$D)throw"readUTFBytes error - Out of bounds";return e$D=0<e$D?e$D:e$m,this.rUTF(e$D)},e$D.getUTFBytes=function(e$D){return void 0===e$D&&(e$D=-1),this.readUTFBytes(e$D)},e$D.writeByte=function(e$D){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,e$D),this._pos_+=1},e$D.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e$D.getByte=function(){return this.readByte()},e$D.ensureWrite=function(e$D){this._length<e$D&&(this._length=e$D),this._allocated_<e$D&&(this.length=e$D)},e$D.writeArrayBuffer=function(e$D,e$m,e$Y){if(void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),e$m<0||e$Y<0)throw"writeArrayBuffer error - Out of bounds";0==e$Y&&(e$Y=e$D.byteLength-e$m),this.ensureWrite(this._pos_+e$Y);var e$t=new Uint8Array(e$D);this._u8d_.set(e$t.subarray(e$m,e$m+e$Y),this._pos_),this._pos_+=e$Y},e$G(0,e$D,"buffer",function(){var e$D=this._d_.buffer;return e$D.byteLength==this.length?e$D:e$D.slice(0,this.length)}),e$G(0,e$D,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(e$D){this._xd_="littleEndian"==e$D}),e$G(0,e$D,"length",function(){return this._length},function(e$D){this._allocated_<e$D?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(e$D,2*this._allocated_))):this._allocated_>e$D&&this.___resizeBuffer(this._allocated_=e$D),this._length=e$D}),e$G(0,e$D,"pos",function(){return this._pos_},function(e$D){this._pos_=e$D}),e$G(0,e$D,"bytesAvailable",function(){return this._length-this._pos_}),e$m.getSystemEndian=function(){if(!e$m._sysEndian){var e$D=new ArrayBuffer(2);new DataView(e$D).setInt16(0,256,!0),e$m._sysEndian=256===new Int16Array(e$D)[0]?"littleEndian":"bigEndian"}return e$m._sysEndian},e$m.BIG_ENDIAN="bigEndian",e$m.LITTLE_ENDIAN="littleEndian",e$m._sysEndian=null,e$m}(),e$q=function(){function e$y(){}return e$f(e$y,"laya.utils.CacheManager"),e$y.regCacheByFunction=function(e$D,e$m){var e$Y;e$y.unRegCacheByFunction(e$D,e$m),e$Y={tryDispose:e$D,getCacheList:e$m},e$y._cacheList.push(e$Y)},e$y.unRegCacheByFunction=function(e$D,e$m){var e$Y,e$t=0;for(e$Y=e$y._cacheList.length,e$t=0;e$t<e$Y;e$t++)if(e$y._cacheList[e$t].tryDispose==e$D&&e$y._cacheList[e$t].getCacheList==e$m)return void e$y._cacheList.splice(e$t,1)},e$y.forceDispose=function(){var e$D=0,e$m=e$y._cacheList.length;for(e$D=0;e$D<e$m;e$D++)e$y._cacheList[e$D].tryDispose(!0)},e$y.beginCheck=function(e$D){void 0===e$D&&(e$D=15e3),e$z.timer.loop(e$D,null,e$y._checkLoop)},e$y.stopCheck=function(){e$z.timer.clear(null,e$y._checkLoop)},e$y._checkLoop=function(){var e$D=e$y._cacheList;if(!(e$D.length<1)){var e$m,e$Y=e$u.now(),e$t=0;for(e$m=e$t=e$D.length;0<e$t&&(e$D[e$y._index=++e$y._index%e$m].tryDispose(!1),!(e$u.now()-e$Y>e$y.loopTimeLimit));)e$t--}},e$y.loopTimeLimit=2,e$y._cacheList=[],e$y._index=0,e$y}(),e$$=function(){function e$R(){}return e$f(e$R,"laya.utils.ClassUtils"),e$R.regClass=function(e$D,e$m){e$R._classMap[e$D]=e$m},e$R.getRegClass=function(e$D){return e$R._classMap[e$D]},e$R.getInstance=function(e$D){var e$m=e$R.getClass(e$D);return e$m?new e$m:(console.warn("[error] Undefined class:",e$D),null)},e$R.createByJson=function(e$D,e$m,e$Y,e$t,e$y){"string"==typeof e$D&&(e$D=JSON.parse(e$D));var e$l=e$D.props;if(!e$m&&!(e$m=e$y?e$y.runWith(e$D):e$R.getInstance(e$l.runtime||e$D.type)))return null;var e$E=e$D.child;if(e$E)for(var e$B=0,e$o=e$E.length;e$B<e$o;e$B++){var e$r=e$E[e$B];if("render"!==e$r.props.name&&"render"!==e$r.props.renderType||!e$m._$set_itemRender)if("Graphic"==e$r.type)e$R.addGraphicsToSprite(e$r,e$m);else if(e$R.isDrawType(e$r.type))e$R.addGraphicToSprite(e$r,e$m,!0);else{var e$f=e$R.createByJson(e$r,null,e$Y,e$t,e$y);"Script"==e$r.type?e$f.hasOwnProperty("owner")?e$f.owner=e$m:e$f.hasOwnProperty("target")&&(e$f.target=e$m):"mask"==e$r.props.renderType?e$m.mask=e$f:e$m.addChild(e$f)}else e$m.itemRender=e$r}if(e$l)for(var e$_ in e$l){var e$i=e$l[e$_];"var"===e$_&&e$Y?e$Y[e$i]=e$m:e$i instanceof Array&&"function"==typeof e$m[e$_]?e$m[e$_].apply(e$m,e$i):e$m[e$_]=e$i}return e$t&&e$D.customProps&&e$t.runWith([e$m,e$D]),e$m.created&&e$m.created(),e$m},e$R.addGraphicsToSprite=function(e$D,e$m){var e$Y;if((e$Y=e$D.child)&&!(e$Y.length<1)){var e$t;e$t=e$R._getGraphicsFromSprite(e$D,e$m);var e$y=0,e$l=0;e$D.props&&(e$y=e$R._getObjVar(e$D.props,"x",0),e$l=e$R._getObjVar(e$D.props,"y",0)),0!=e$y&&0!=e$l&&e$t.translate(e$y,e$l);var e$E,e$B=0;for(e$E=e$Y.length,e$B=0;e$B<e$E;e$B++)e$R._addGraphicToGraphics(e$Y[e$B],e$t);0!=e$y&&0!=e$l&&e$t.translate(-e$y,-e$l)}},e$R.addGraphicToSprite=function(e$D,e$m,e$Y){var e$t;void 0===e$Y&&(e$Y=!1),e$t=e$Y?e$R._getGraphicsFromSprite(e$D,e$m):e$m.graphics,e$R._addGraphicToGraphics(e$D,e$t)},e$R._getGraphicsFromSprite=function(e$D,e$m){var e$Y,e$t;if(!e$D||!e$D.props)return e$m.graphics;switch(e$t=e$D.props.renderType){case"hit":case"unHit":var e$y;e$m.hitArea||(e$m.hitArea=new e$n),(e$y=e$m.hitArea)[e$t]||(e$y[e$t]=new e$i),e$Y=e$y[e$t]}return e$Y||(e$Y=e$m.graphics),e$Y},e$R._getTransformData=function(e$D){var e$m;(e$D.hasOwnProperty("pivotX")||e$D.hasOwnProperty("pivotY"))&&(e$m=e$m||new e$Q).translate(-e$R._getObjVar(e$D,"pivotX",0),-e$R._getObjVar(e$D,"pivotY",0));var e$Y=e$R._getObjVar(e$D,"scaleX",1),e$t=e$R._getObjVar(e$D,"scaleY",1),e$y=e$R._getObjVar(e$D,"rotation",0);e$R._getObjVar(e$D,"skewX",0),e$R._getObjVar(e$D,"skewY",0);return 1==e$Y&&1==e$t&&0==e$y||((e$m=e$m||new e$Q).scale(e$Y,e$t),e$m.rotate(.0174532922222222*e$y)),e$m},e$R._addGraphicToGraphics=function(e$D,e$m){var e$Y,e$t;if((e$Y=e$D.props)&&(e$t=e$R.DrawTypeDic[e$D.type])){var e$y,e$l;e$y=e$m;var e$E=e$R._getParams(e$Y,e$t[1],e$t[2],e$t[3]);((e$l=e$R._tM)||1!=e$R._alpha)&&(e$y.save(),e$l&&e$y.transform(e$l),1!=e$R._alpha&&e$y.alpha(e$R._alpha)),e$y[e$t[0]].apply(e$y,e$E),(e$l||1!=e$R._alpha)&&e$y.restore()}},e$R._adptLineData=function(e$D){return e$D[2]=parseFloat(e$D[0])+parseFloat(e$D[2]),e$D[3]=parseFloat(e$D[1])+parseFloat(e$D[3]),e$D},e$R._adptTextureData=function(e$D){return e$D[0]=e$BD.getRes(e$D[0]),e$D},e$R._adptLinesData=function(e$D){return e$D[2]=e$R._getPointListByStr(e$D[2]),e$D},e$R.isDrawType=function(e$D){return"Image"!=e$D&&e$R.DrawTypeDic.hasOwnProperty(e$D)},e$R._getParams=function(e$D,e$m,e$Y,e$t){var e$y;void 0===e$Y&&(e$Y=0),(e$y=e$R._temParam).length=e$m.length;var e$l,e$E,e$B=0;for(e$l=e$m.length,e$B=0;e$B<e$l;e$B++)e$y[e$B]=e$R._getObjVar(e$D,e$m[e$B][0],e$m[e$B][1]);return e$R._alpha=e$R._getObjVar(e$D,"alpha",1),e$E=e$R._getTransformData(e$D),e$R._tM=e$E?(e$Y||(e$Y=0),e$E.translate(e$y[e$Y],e$y[e$Y+1]),e$y[e$Y]=e$y[e$Y+1]=0,e$E):null,e$t&&e$R[e$t]&&(e$y=e$R[e$t](e$y)),e$y},e$R._getPointListByStr=function(e$D){var e$m,e$Y,e$t=0;for(e$Y=(e$m=e$D.split(",")).length,e$t=0;e$t<e$Y;e$t++)e$m[e$t]=parseFloat(e$m[e$t]);return e$m},e$R._getObjVar=function(e$D,e$m,e$Y){return e$D.hasOwnProperty(e$m)?e$D[e$m]:e$Y},e$R._temParam=[],e$R._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},e$R.getClass=function(e$D){var e$m=e$R._classMap[e$D]||e$D;return"string"==typeof e$m?e$z.__classmap[e$m]:e$m},e$R._tM=null,e$R._alpha=NaN,e$o(e$R,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),e$R}(),e$d=function(){function e$l(e$D){if(this._color=[],"string"==typeof e$D){null===(this.strColor=e$D)&&(e$D="#000000"),"#"==e$D.charAt(0)&&(e$D=e$D.substr(1));var e$m=e$D.length;if(3==e$m||4==e$m){for(var e$Y="",e$t=0;e$t<e$m;e$t++)e$Y+=e$D[e$t]+e$D[e$t];e$D=e$Y}var e$y=this.numColor=parseInt(e$D,16);if(8==e$D.length)return void(this._color=[parseInt(e$D.substr(0,2),16)/255,((16711680&e$y)>>16)/255,((65280&e$y)>>8)/255,(255&e$y)/255])}else e$y=this.numColor=e$D,this.strColor=e$Z.toHexColor(e$y);this._color=[((16711680&e$y)>>16)/255,((65280&e$y)>>8)/255,(255&e$y)/255,1],this._color.__id=++e$l._COLODID}return e$f(e$l,"laya.utils.Color"),e$l._initDefault=function(){for(var e$D in e$l._DEFAULT={},e$l._COLOR_MAP)e$l._SAVE[e$D]=e$l._DEFAULT[e$D]=new e$l(e$l._COLOR_MAP[e$D]);return e$l._DEFAULT},e$l._initSaveMap=function(){for(var e$D in e$l._SAVE_SIZE=0,e$l._SAVE={},e$l._DEFAULT)e$l._SAVE[e$D]=e$l._DEFAULT[e$D]},e$l.create=function(e$D){var e$m=e$l._SAVE[e$D+""];return null!=e$m?e$m:(e$l._SAVE_SIZE<1e3||e$l._initSaveMap(),e$l._SAVE[e$D+""]=new e$l(e$D))},e$l._SAVE={},e$l._SAVE_SIZE=0,e$l._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},e$l._DEFAULT=e$l._initDefault(),e$l._COLODID=1,e$l}(),e$k=(function(){function e$D(){this._values=[],this._keys=[]}e$f(e$D,"laya.utils.Dictionary");var e$m=e$D.prototype;e$m.set=function(e$D,e$m){var e$Y=this.indexOf(e$D);0<=e$Y?this._values[e$Y]=e$m:(this._keys.push(e$D),this._values.push(e$m))},e$m.indexOf=function(e$D){var e$m=this._keys.indexOf(e$D);return 0<=e$m?e$m:(e$D="string"==typeof e$D?Number(e$D):"number"==typeof e$D?e$D.toString():e$D,this._keys.indexOf(e$D))},e$m.get=function(e$D){var e$m=this.indexOf(e$D);return e$m<0?null:this._values[e$m]},e$m.remove=function(e$D){var e$m=this.indexOf(e$D);return 0<=e$m&&(this._keys.splice(e$m,1),this._values.splice(e$m,1),!0)},e$m.clear=function(){this._values.length=0,this._keys.length=0},e$G(0,e$m,"values",function(){return this._values}),e$G(0,e$m,"keys",function(){return this._keys})}(),function(){function e$D(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}e$f(e$D,"laya.utils.Dragging");var e$m=e$D.prototype;return e$m.start=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){void 0===e$B&&(e$B=.92),this.clearTimer(),this.target=e$D,this.area=e$m,this.hasInertia=e$Y,this.elasticDistance=e$m?e$t:0,this.elasticBackTime=e$y,this.data=e$l,this._disableMouseEvent=e$E,this.ratio=e$B,1!=e$D.globalScaleX||1!=e$D.globalScaleY?this._parent=e$D.parent:this._parent=e$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,e$z.stage.on("mouseup",this,this.onStageMouseUp),e$z.stage.on("mouseout",this,this.onStageMouseUp),e$z.timer.frameLoop(1,this,this.loop)},e$m.clearTimer=function(){e$z.timer.clear(this,this.loop),e$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e$m.stop=function(){this._dragging&&(e$w.instance.disableMouseEvent=!1,e$z.stage.off("mouseup",this,this.onStageMouseUp),e$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e$m.loop=function(){var e$D=this._parent.getMousePoint(),e$m=e$D.x,e$Y=e$D.y,e$t=e$m-this._lastX,e$y=e$Y-this._lastY;if(this._clickOnly){if(!(1<Math.abs(e$t*e$z.stage._canvasTransform.getScaleX())||1<Math.abs(e$y*e$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),e$w.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(e$t,e$y);0==e$t&&0==e$y||(this._lastX=e$m,this._lastY=e$Y,this.target.x+=e$t*this._elasticRateX,this.target.y+=e$y*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e$m.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var e$D=this.area.x-this.target.x;else e$D=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-e$D/this.elasticDistance),this.target.y<this.area.y)var e$m=this.area.y-this.target.y;else e$m=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e$m/this.elasticDistance)}},e$m.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e$m.onStageMouseUp=function(e$D){if(e$w.instance.disableMouseEvent=!1,e$z.stage.off("mouseup",this,this.onStageMouseUp),e$z.stage.off("mouseout",this,this.onStageMouseUp),e$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e$m=this._offsets.length,e$Y=Math.min(e$m,6),e$t=this._offsets.length-e$Y,e$y=e$m-1;e$t<e$y;e$y--)this._offsetY+=this._offsets[e$y--],this._offsetX+=this._offsets[e$y];this._offsetX=this._offsetX/e$Y*2,this._offsetY=this._offsetY/e$Y*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),e$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},e$m.checkElastic=function(){var e$D=NaN,e$m=NaN;if(this.target.x<this.area.x?e$D=this.area.x:this.target.x>this.area.x+this.area.width&&(e$D=this.area.x+this.area.width),this.target.y<this.area.y?e$m=this.area.y:this.target.y>this.area.y+this.area.height&&(e$m=this.area.y+this.area.height),isNaN(e$D)&&isNaN(e$m))this.clear();else{var e$Y={};isNaN(e$D)||(e$Y.x=e$D),isNaN(e$m)||(e$Y.y=e$m),this._tween=e$V.to(this.target,e$Y,this.elasticBackTime,e$M.sineOut,e$U.create(this,this.clear),0,!1,!1)}},e$m.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(e$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},e$m.clear=function(){if(this.target){this.clearTimer();var e$D=this.target;this.target=null,this._parent=null,e$D.event("dragend",this.data)}},e$D}()),e$M=function(){function e$B(){}return e$f(e$B,"laya.utils.Ease"),e$B.linearNone=function(e$D,e$m,e$Y,e$t){return e$Y*e$D/e$t+e$m},e$B.linearIn=function(e$D,e$m,e$Y,e$t){return e$Y*e$D/e$t+e$m},e$B.linearInOut=function(e$D,e$m,e$Y,e$t){return e$Y*e$D/e$t+e$m},e$B.linearOut=function(e$D,e$m,e$Y,e$t){return e$Y*e$D/e$t+e$m},e$B.bounceIn=function(e$D,e$m,e$Y,e$t){return e$Y-e$B.bounceOut(e$t-e$D,0,e$Y,e$t)+e$m},e$B.bounceInOut=function(e$D,e$m,e$Y,e$t){return e$D<.5*e$t?.5*e$B.bounceIn(2*e$D,0,e$Y,e$t)+e$m:.5*e$B.bounceOut(2*e$D-e$t,0,e$Y,e$t)+.5*e$Y+e$m},e$B.bounceOut=function(e$D,e$m,e$Y,e$t){return(e$D/=e$t)<1/2.75?e$Y*(7.5625*e$D*e$D)+e$m:e$D<2/2.75?e$Y*(7.5625*(e$D-=1.5/2.75)*e$D+.75)+e$m:e$D<2.5/2.75?e$Y*(7.5625*(e$D-=2.25/2.75)*e$D+.9375)+e$m:e$Y*(7.5625*(e$D-=2.625/2.75)*e$D+.984375)+e$m},e$B.backIn=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=1.70158),e$Y*(e$D/=e$t)*e$D*((e$y+1)*e$D-e$y)+e$m},e$B.backInOut=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=1.70158),(e$D/=.5*e$t)<1?.5*e$Y*(e$D*e$D*((1+(e$y*=1.525))*e$D-e$y))+e$m:e$Y/2*((e$D-=2)*e$D*((1+(e$y*=1.525))*e$D+e$y)+2)+e$m},e$B.backOut=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=1.70158),e$Y*((e$D=e$D/e$t-1)*e$D*((e$y+1)*e$D+e$y)+1)+e$m},e$B.elasticIn=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E;return void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=0),0==e$D?e$m:1==(e$D/=e$t)?e$m+e$Y:(e$l||(e$l=.3*e$t),e$E=!e$y||0<e$Y&&e$y<e$Y||e$Y<0&&e$y<-e$Y?(e$y=e$Y,e$l/4):e$l/e$B.PI2*Math.asin(e$Y/e$y),-e$y*Math.pow(2,10*(e$D-=1))*Math.sin((e$D*e$t-e$E)*e$B.PI2/e$l)+e$m)},e$B.elasticInOut=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E;return void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=0),0==e$D?e$m:2==(e$D/=.5*e$t)?e$m+e$Y:(e$l||(e$l=e$t*(.3*1.5)),e$E=!e$y||0<e$Y&&e$y<e$Y||e$Y<0&&e$y<-e$Y?(e$y=e$Y,e$l/4):e$l/e$B.PI2*Math.asin(e$Y/e$y),e$D<1?e$y*Math.pow(2,10*(e$D-=1))*Math.sin((e$D*e$t-e$E)*e$B.PI2/e$l)*-.5+e$m:e$y*Math.pow(2,-10*(e$D-=1))*Math.sin((e$D*e$t-e$E)*e$B.PI2/e$l)*.5+e$Y+e$m)},e$B.elasticOut=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E;return void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=0),0==e$D?e$m:1==(e$D/=e$t)?e$m+e$Y:(e$l||(e$l=.3*e$t),e$E=!e$y||0<e$Y&&e$y<e$Y||e$Y<0&&e$y<-e$Y?(e$y=e$Y,e$l/4):e$l/e$B.PI2*Math.asin(e$Y/e$y),e$y*Math.pow(2,-10*e$D)*Math.sin((e$D*e$t-e$E)*e$B.PI2/e$l)+e$Y+e$m)},e$B.strongIn=function(e$D,e$m,e$Y,e$t){return e$Y*(e$D/=e$t)*e$D*e$D*e$D*e$D+e$m},e$B.strongInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*e$Y*e$D*e$D*e$D*e$D*e$D+e$m:.5*e$Y*((e$D-=2)*e$D*e$D*e$D*e$D+2)+e$m},e$B.strongOut=function(e$D,e$m,e$Y,e$t){return e$Y*((e$D=e$D/e$t-1)*e$D*e$D*e$D*e$D+1)+e$m},e$B.sineInOut=function(e$D,e$m,e$Y,e$t){return.5*-e$Y*(Math.cos(Math.PI*e$D/e$t)-1)+e$m},e$B.sineIn=function(e$D,e$m,e$Y,e$t){return-e$Y*Math.cos(e$D/e$t*e$B.HALF_PI)+e$Y+e$m},e$B.sineOut=function(e$D,e$m,e$Y,e$t){return e$Y*Math.sin(e$D/e$t*e$B.HALF_PI)+e$m},e$B.quintIn=function(e$D,e$m,e$Y,e$t){return e$Y*(e$D/=e$t)*e$D*e$D*e$D*e$D+e$m},e$B.quintInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*e$Y*e$D*e$D*e$D*e$D*e$D+e$m:.5*e$Y*((e$D-=2)*e$D*e$D*e$D*e$D+2)+e$m},e$B.quintOut=function(e$D,e$m,e$Y,e$t){return e$Y*((e$D=e$D/e$t-1)*e$D*e$D*e$D*e$D+1)+e$m},e$B.quartIn=function(e$D,e$m,e$Y,e$t){return e$Y*(e$D/=e$t)*e$D*e$D*e$D+e$m},e$B.quartInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*e$Y*e$D*e$D*e$D*e$D+e$m:.5*-e$Y*((e$D-=2)*e$D*e$D*e$D-2)+e$m},e$B.quartOut=function(e$D,e$m,e$Y,e$t){return-e$Y*((e$D=e$D/e$t-1)*e$D*e$D*e$D-1)+e$m},e$B.cubicIn=function(e$D,e$m,e$Y,e$t){return e$Y*(e$D/=e$t)*e$D*e$D+e$m},e$B.cubicInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*e$Y*e$D*e$D*e$D+e$m:.5*e$Y*((e$D-=2)*e$D*e$D+2)+e$m},e$B.cubicOut=function(e$D,e$m,e$Y,e$t){return e$Y*((e$D=e$D/e$t-1)*e$D*e$D+1)+e$m},e$B.quadIn=function(e$D,e$m,e$Y,e$t){return e$Y*(e$D/=e$t)*e$D+e$m},e$B.quadInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*e$Y*e$D*e$D+e$m:.5*-e$Y*(--e$D*(e$D-2)-1)+e$m},e$B.quadOut=function(e$D,e$m,e$Y,e$t){return-e$Y*(e$D/=e$t)*(e$D-2)+e$m},e$B.expoIn=function(e$D,e$m,e$Y,e$t){return 0==e$D?e$m:e$Y*Math.pow(2,10*(e$D/e$t-1))+e$m-.001*e$Y},e$B.expoInOut=function(e$D,e$m,e$Y,e$t){return 0==e$D?e$m:e$D==e$t?e$m+e$Y:(e$D/=.5*e$t)<1?.5*e$Y*Math.pow(2,10*(e$D-1))+e$m:.5*e$Y*(2-Math.pow(2,-10*--e$D))+e$m},e$B.expoOut=function(e$D,e$m,e$Y,e$t){return e$D==e$t?e$m+e$Y:e$Y*(1-Math.pow(2,-10*e$D/e$t))+e$m},e$B.circIn=function(e$D,e$m,e$Y,e$t){return-e$Y*(Math.sqrt(1-(e$D/=e$t)*e$D)-1)+e$m},e$B.circInOut=function(e$D,e$m,e$Y,e$t){return(e$D/=.5*e$t)<1?.5*-e$Y*(Math.sqrt(1-e$D*e$D)-1)+e$m:.5*e$Y*(Math.sqrt(1-(e$D-=2)*e$D)+1)+e$m},e$B.circOut=function(e$D,e$m,e$Y,e$t){return e$Y*Math.sqrt(1-(e$D=e$D/e$t-1)*e$D)+e$m},e$B.HALF_PI=.5*Math.PI,e$B.PI2=2*Math.PI,e$B}(),e$n=function(){function e$_(){this._hit=null,this._unHit=null}e$f(e$_,"laya.utils.HitArea");var e$D=e$_.prototype;return e$D.isHit=function(e$D,e$m){return!!e$_.isHitGraphic(e$D,e$m,this.hit)&&!e$_.isHitGraphic(e$D,e$m,this.unHit)},e$D.contains=function(e$D,e$m){return this.isHit(e$D,e$m)},e$G(0,e$D,"hit",function(){return this._hit||(this._hit=new e$i),this._hit},function(e$D){this._hit=e$D}),e$G(0,e$D,"unHit",function(){return this._unHit||(this._unHit=new e$i),this._unHit},function(e$D){this._unHit=e$D}),e$_.isHitGraphic=function(e$D,e$m,e$Y){if(!e$Y)return!1;var e$t;if(!(e$t=e$Y.cmds)&&e$Y._one&&((e$t=e$_._cmds).length=1,e$t[0]=e$Y._one),!e$t)return!1;var e$y,e$l,e$E=0;for(e$y=e$t.length,e$E=0;e$E<e$y;e$E++)if(e$l=e$t[e$E]){var e$B=e$C._context;switch(e$l.callee){case e$B._translate:case 6:e$D-=e$l[0],e$m-=e$l[1]}if(e$_.isHitCmd(e$D,e$m,e$l))return!0}return!1},e$_.isHitCmd=function(e$D,e$m,e$Y){if(!e$Y)return!1;var e$t=e$C._context,e$y=!1;switch(e$Y.callee){case e$t._drawRect:case 13:e$_._rec.setTo(e$Y[0],e$Y[1],e$Y[2],e$Y[3]),e$y=e$_._rec.contains(e$D,e$m);break;case e$t._drawCircle:case e$t._fillCircle:case 14:e$y=(e$D-=e$Y[0])*e$D+(e$m-=e$Y[1])*e$m<e$Y[2]*e$Y[2];break;case e$t._drawPoly:case 18:e$D-=e$Y[0],e$m-=e$Y[1],e$y=e$_.ptInPolygon(e$D,e$m,e$Y[2])}return e$y},e$_.ptInPolygon=function(e$D,e$m,e$Y){var e$t;(e$t=e$_._ptPoint).setTo(e$D,e$m);var e$y,e$l=0,e$E=NaN,e$B=NaN,e$o=NaN,e$r=NaN;e$y=e$Y.length;for(var e$f=0;e$f<e$y;e$f+=2){if(e$E=e$Y[e$f],e$B=e$Y[e$f+1],e$o=e$Y[(e$f+2)%e$y],e$B!=(e$r=e$Y[(e$f+3)%e$y]))if(!(e$t.y<Math.min(e$B,e$r)))if(!(e$t.y>=Math.max(e$B,e$r)))(e$t.y-e$B)*(e$o-e$E)/(e$r-e$B)+e$E>e$t.x&&e$l++}return e$l%2==1},e$_._cmds=[],e$o(e$_,["_rec",function(){return this._rec=new e$J},"_ptPoint",function(){return this._ptPoint=new e$A}]),e$_}(),e$g=(function(){function e$y(e$D,e$m,e$Y,e$t){this.char=e$D,this.charNum=e$D.charCodeAt(0),this._x=this._y=0,this.width=e$m,this.height=e$Y,this.style=e$t,this.isWord=!e$y._isWordRegExp.test(e$D)}e$f(e$y,"laya.utils.HTMLChar");var e$D=e$y.prototype;e$z.imps(e$D,{"laya.display.ILayout":!0}),e$D.setSprite=function(e$D){this._sprite=e$D},e$D.getSprite=function(){return this._sprite},e$D._isChar=function(){return!0},e$D._getCSSStyle=function(){return this.style},e$G(0,e$D,"width",function(){return this._w},function(e$D){this._w=e$D}),e$G(0,e$D,"x",function(){return this._x},function(e$D){this._sprite&&(this._sprite.x=e$D),this._x=e$D}),e$G(0,e$D,"y",function(){return this._y},function(e$D){this._sprite&&(this._sprite.y=e$D),this._y=e$D}),e$G(0,e$D,"height",function(){return this._h},function(e$D){this._h=e$D}),e$y._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function e$m(){}e$f(e$m,"laya.utils.Log"),e$m.enable=function(){e$m._logdiv||(e$m._logdiv=e$u.window.document.createElement("div"),e$u.window.document.body.appendChild(e$m._logdiv),e$m._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},e$m.toggle=function(){var e$D=e$m._logdiv.style;"1px"==e$D.width?e$D.width=e$D.height="50%":e$D.width=e$D.height="1px"},e$m.print=function(e$D){e$m._logdiv&&(e$m.maxCount<=e$m._count&&e$m.clear(),e$m._count++,e$m._logdiv.innerText+=e$D+"\n",e$m._logdiv.scrollTop=e$m._logdiv.scrollHeight)},e$m.clear=function(){e$m._logdiv.innerText="",e$m._count=0},e$m._logdiv=null,e$m._count=0,e$m.maxCount=20}(),function(){function e$m(){}e$f(e$m,"laya.utils.Mouse"),e$G(1,e$m,"cursor",function(){return e$m._style.cursor},function(e$D){e$m._style.cursor=e$D}),e$m.hide=function(){"none"!=e$m.cursor&&(e$m._preCursor=e$m.cursor,e$m.cursor="none")},e$m.show=function(){"none"==e$m.cursor&&(e$m.cursor=e$m._preCursor?e$m._preCursor:"auto")},e$m._preCursor=null,e$o(e$m,["_style",function(){return this._style=e$u.document.body.style}])}(),function(){function e$l(){}return e$f(e$l,"laya.utils.Pool"),e$l.getPoolBySign=function(e$D){return e$l._poolDic[e$D]||(e$l._poolDic[e$D]=[])},e$l.clearBySign=function(e$D){e$l._poolDic[e$D]&&(e$l._poolDic[e$D].length=0)},e$l.recover=function(e$D,e$m){e$m.__InPool||(e$m.__InPool=!0,e$l.getPoolBySign(e$D).push(e$m))},e$l.getItemByClass=function(e$D,e$m){var e$Y=e$l.getPoolBySign(e$D),e$t=e$Y.length?e$Y.pop():new e$m;return e$t.__InPool=!1,e$t},e$l.getItemByCreateFun=function(e$D,e$m,e$Y){var e$t=e$l.getPoolBySign(e$D),e$y=e$t.length?e$t.pop():e$m.call(e$Y);return e$y.__InPool=!1,e$y},e$l.getItem=function(e$D){var e$m=e$l.getPoolBySign(e$D),e$Y=e$m.length?e$m.pop():null;return e$Y&&(e$Y.__InPool=!1),e$Y},e$l._poolDic={},e$l.InPoolSign="__InPool",e$l}()),e$H=function(){function e$o(){}return e$f(e$o,"laya.utils.Stat"),e$G(1,e$o,"onclick",null,function(e$D){e$o._sp&&e$o._sp.on("click",e$o._sp,e$D),e$o._canvas&&(e$o._canvas.source.onclick=e$D,e$o._canvas.source.style.pointerEvents="")}),e$o.show=function(e$D,e$m,e$Y){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),!e$C.isConchApp||e$C.isConchWebGL){if(e$C.isConchWebGL||e$u.onMiniGame||e$u.onLimixiu||(e$o._useCanvas=!0),e$o._show=!0,e$o._fpsData.length=60,e$o._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},e$o._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},e$o._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},e$o._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},e$C.isWebGL)if(e$o._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},e$C.is3DMode){if(e$o._view[0].title="FPS(3D)",e$o._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},e$o._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},e$o._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==e$Y){var e$t=8;e$o._view[e$t++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$t++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},e$o._view[e$t++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==e$Y){e$t=8;e$o._view[e$t++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},e$o._view[e$t++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else e$o._view[0].title="FPS(WebGL)",e$o._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else e$o._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};e$o._useCanvas?e$o.createUIPre(e$D,e$m):e$o.createUI(e$D,e$m),e$o.enable()}else e$u.window.conch.showFPS&&e$u.window.conch.showFPS(e$D,e$m)},e$o.createUIPre=function(e$D,e$m){var e$Y=e$u.pixelRatio;e$o._width=170*e$Y,e$o._vx=75*e$Y,e$o._height=e$Y*(12*e$o._view.length+3*e$Y)+4,e$o._fontSize=12*e$Y;for(var e$t=0;e$t<e$o._view.length;e$t++)e$o._view[e$t].x=4,e$o._view[e$t].y=e$t*e$o._fontSize+2*e$Y;e$o._canvas||((e$o._canvas=new e$eD("2D")).size(e$o._width,e$o._height),(e$o._ctx=e$o._canvas.getContext("2d")).textBaseline="top",e$o._ctx.font=e$o._fontSize+"px Sans-serif",e$o._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e$D+"px;top:"+e$m+"px;width:"+e$o._width/e$Y+"px;height:"+e$o._height/e$Y+"px;"),e$o._first=!0,e$o.loop(),e$o._first=!1,e$u.container.appendChild(e$o._canvas.source)},e$o.createUI=function(e$D,e$m){var e$Y=e$o._sp,e$t=e$u.pixelRatio;e$Y||(e$Y=new e$_D,(e$o._leftText=new e$wD).pos(5,5),e$o._leftText.color="#ffffff",e$Y.addChild(e$o._leftText),(e$o._txt=new e$wD).pos(80*e$t,5),e$o._txt.color="#ffffff",e$Y.addChild(e$o._txt),e$o._sp=e$Y),e$Y.pos(e$D,e$m);for(var e$y="",e$l=0;e$l<e$o._view.length;e$l++){e$y+=e$o._view[e$l].title+"\n"}e$o._leftText.text=e$y;var e$E=170*e$t,e$B=e$t*(12*e$o._view.length+3*e$t)+4;e$o._txt.fontSize=e$o._fontSize*e$t,e$o._leftText.fontSize=e$o._fontSize*e$t,e$Y.size(e$E,e$B),e$Y.graphics.clear(),e$Y.graphics.setAlpha(.5),e$Y.graphics.drawRect(0,0,e$E,e$B,"#999999"),e$Y.graphics.setAlpha(1),e$o.loop()},e$o.enable=function(){e$z.timer.frameLoop(1,e$o,e$o.loop)},e$o.hide=function(){e$o._show=!1,e$z.timer.clear(e$o,e$o.loop),e$o._canvas&&e$u.removeElement(e$o._canvas.source)},e$o.clear=function(){e$o.trianglesFaces=e$o.drawCall=e$o.shaderCall=e$o.spriteCount=e$o.spriteRenderUseCacheCount=e$o.treeNodeCollision=e$o.treeSpriteCollision=e$o.canvasNormal=e$o.canvasBitmap=e$o.canvasReCache=0},e$o.loop=function(){e$o._count++;var e$D=e$u.now();if(!(e$D-e$o._timer<1e3)){var e$m=e$o._count;if(e$o.FPS=Math.round(1e3*e$m/(e$D-e$o._timer)),e$o._show){e$o.trianglesFaces=Math.round(e$o.trianglesFaces/e$m),e$o.spriteCount=e$o._useCanvas?(e$o.drawCall=Math.round(e$o.drawCall/e$m)-2,e$o.shaderCall=Math.round(e$o.shaderCall/e$m),Math.round(e$o.spriteCount/e$m)-1):(e$o.drawCall=Math.round(e$o.drawCall/e$m)-2,e$o.shaderCall=Math.round(e$o.shaderCall/e$m)-4,Math.round(e$o.spriteCount/e$m)-4),e$o.spriteRenderUseCacheCount=Math.round(e$o.spriteRenderUseCacheCount/e$m),e$o.canvasNormal=Math.round(e$o.canvasNormal/e$m),e$o.canvasBitmap=Math.round(e$o.canvasBitmap/e$m),e$o.canvasReCache=Math.ceil(e$o.canvasReCache/e$m),e$o.treeNodeCollision=Math.round(e$o.treeNodeCollision/e$m),e$o.treeSpriteCollision=Math.round(e$o.treeSpriteCollision/e$m);var e$Y=0<e$o.FPS?Math.floor(1e3/e$o.FPS).toString():" ";e$o._fpsStr=e$o.FPS+(e$o.renderSlow?" slow":"")+" "+e$Y,e$o._spriteStr=e$o.spriteCount+(e$o.spriteRenderUseCacheCount?"/"+e$o.spriteRenderUseCacheCount:""),e$o._canvasStr=e$o.canvasReCache+"/"+e$o.canvasNormal+"/"+e$o.canvasBitmap,e$o.currentMemorySize=e$P.systemResourceManager.memorySize,e$o._useCanvas?e$o.renderInfoPre():e$o.renderInfo(),e$o.clear()}e$o._count=0,e$o._timer=e$D}},e$o.renderInfoPre=function(){if(e$o._canvas){var e$D=e$o._ctx;e$D.clearRect(e$o._first?0:e$o._vx,0,e$o._width,e$o._height);for(var e$m=e$C.WebGL.mainContext,e$Y=0;e$Y<e$o._view.length;e$Y++){var e$t=e$o._view[e$Y];e$o._first&&(e$D.fillStyle="white",e$D.fillText(e$t.title,e$t.x,e$t.y,null,null,null)),e$D.fillStyle=e$t.color;var e$y=-1;if((e$t=e$o._view[e$Y]).varying){if(e$m)switch(e$t.varying){case 1:e$y=e$m.getParameter(e$m[e$t.value]);break;case 2:e$y=e$m.getExtension(e$t.value)}}else e$y=e$o[e$t.value];"M"==e$t.units&&(e$y=Math.floor(e$y/1048576*100)/100+" M"),"K"==e$t.units&&(e$y=Math.floor(e$y/1024*100)/100+" K"),"string"==e$t.units&&(e$y=e$y.match(/\d+\.?\d/i)),e$D.fillText(e$y+"",e$t.x+e$o._vx,e$t.y,null,null,null)}}},e$o.renderInfo=function(){for(var e$D="",e$m=e$C.WebGL.mainContext,e$Y=0;e$Y<e$o._view.length;e$Y++){var e$t=e$o._view[e$Y],e$y=-1;if(e$t.varying){if(e$m)switch(e$t.varying){case 1:e$y=e$m.getParameter(e$m[e$t.value]);break;case 2:e$y=e$m.getExtension(e$t.value)}}else e$y=e$o[e$t.value];"M"==e$t.units&&(e$y=Math.floor(e$y/1048576*100)/100+" M"),"K"==e$t.units&&(e$y=Math.floor(e$y/1024*100)/100+" K"),"string"==e$t.units&&(e$y=e$y.match(/\d+\.?\d/i)),e$D+=e$y+"\n"}e$o._txt.text=e$D},e$o.FPS=0,e$o.loopCount=0,e$o.shaderCall=0,e$o.drawCall=0,e$o.trianglesFaces=0,e$o.spriteCount=0,e$o.spriteRenderUseCacheCount=0,e$o.treeNodeCollision=0,e$o.treeSpriteCollision=0,e$o.canvasNormal=0,e$o.canvasBitmap=0,e$o.canvasReCache=0,e$o.renderSlow=!1,e$o.currentMemorySize=0,e$o._fpsStr=null,e$o._canvasStr=null,e$o._spriteStr=null,e$o._fpsData=[],e$o._timer=0,e$o._count=0,e$o._view=[],e$o._fontSize=12,e$o._txt=null,e$o._leftText=null,e$o._sp=null,e$o._show=!1,e$o._useCanvas=!1,e$o._canvas=null,e$o._ctx=null,e$o._first=!1,e$o._vx=NaN,e$o._width=0,e$o._height=100,e$o}(),e$x=(function(){function e$D(){this._strsToID={},this._idToStrs=[],this._length=0}e$f(e$D,"laya.utils.StringKey");var e$m=e$D.prototype;e$m.add=function(e$D){var e$m=this._strsToID[e$D];return null!=e$m?e$m:(this._idToStrs[this._length]=e$D,this._strsToID[e$D]=this._length++)},e$m.getID=function(e$D){var e$m=this._strsToID[e$D];return null==e$m?-1:e$m},e$m.getName=function(e$D){var e$m=this._idToStrs[e$D];return null==e$m?void 0:e$m}}(),function(){var e$r;function e$D(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}e$f(e$D,"laya.utils.Timer");var e$m=e$D.prototype;return e$m._init=function(){e$z.timer&&e$z.timer.frameLoop(1,this,this._update)},e$m._now=function(){return Date.now()},e$m._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var e$D=this.currFrame=this.currFrame+this.scale,e$m=this._now();this._delta=(e$m-this._lastTimer)*this.scale;var e$Y=this.currTimer=this.currTimer+this._delta;e$z.isDebug&&6e4<Math.abs(e$m-this._lastTimer)&&console.error("系统时间错误！"+(e$m-this._lastTimer)),this._lastTimer=e$m;var e$t=this._handlers;for(e$E=this._count=0,e$B=e$t.length;e$E<e$B;e$E++)if(null!==(e$o=e$t[e$E]).method){var e$y=e$o.userFrame?e$D:e$Y;if(e$y>=e$o.exeTime)if(e$o.repeat)if(e$o.jumpFrame)for(;e$y>=e$o.exeTime;)e$o.exeTime+=e$o.delay,e$o.run(!1);else e$o.exeTime+=e$o.delay,e$o.run(!1),e$y>e$o.exeTime&&(e$o.exeTime+=Math.ceil((e$y-e$o.exeTime)/e$o.delay)*e$o.delay);else e$o.run(!0)}else this._count++;(30<this._count||e$D%200==0)&&this._clearHandlers();for(var e$l=this._laters,e$E=0,e$B=e$l.length-1;e$E<=e$B;e$E++){var e$o=e$l[e$E];this._isIgnoreRecover(e$o)||(null!==e$o.method&&(delete this._map[e$o.key],e$o.run(!1)),this._recoverHandler(e$o)),e$E===e$B&&(e$B=e$l.length-1)}e$l.length=0}},e$m._clearHandlers=function(){for(var e$D=this._handlers,e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++){var e$t=e$D[e$m];null!==e$t.method?this._temp.push(e$t):this._isIgnoreRecover(e$t)?this._temp.push(e$t):this._recoverHandler(e$t)}this._handlers=this._temp,this._temp=e$D,this._temp.length=0},e$m._recoverHandler=function(e$D){this._map[e$D.key]==e$D&&delete this._map[e$D.key],e$D.recover()},e$m._create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){if(!e$Y)return e$y.apply(e$t,e$l),null;if(e$E){var e$o=this._getHandler(e$t,e$y);if(e$o)return e$o.repeat=e$m,e$o.userFrame=e$D,e$o.delay=e$Y,e$o.ignoreRecover=e$B,e$o.caller=e$t,e$o.method=e$y,e$o.args=e$l,e$o.exeTime=e$Y+(e$D?this.currFrame:this.currTimer+this._now()-this._lastTimer),e$o}return(e$o=e$r.create()).repeat=e$m,e$o.userFrame=e$D,e$o.delay=e$Y,e$o.ignoreRecover=e$B,e$o.caller=e$t,e$o.method=e$y,e$o.args=e$l,e$o.exeTime=e$Y+(e$D?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(e$o),this._handlers.push(e$o),e$o},e$m._indexHandler=function(e$D){var e$m=e$D.caller,e$Y=e$D.method,e$t=e$m?e$m.$_GID||(e$m.$_GID=e$Z.getGID()):0,e$y=e$Y.$_TID||(e$Y.$_TID=this._mid++);e$D.key=e$t+"_"+e$y,this._map[e$D.key]=e$D},e$m.once=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=!0),this._create(!1,!1,e$D,e$m,e$Y,e$t,e$y,!1)},e$m.loop=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){void 0===e$y&&(e$y=!0),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!1);var e$B=this._create(!1,!0,e$D,e$m,e$Y,e$t,e$y,e$E);e$B&&(e$B.jumpFrame=e$l)},e$m.frameOnce=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=!0),this._create(!0,!1,e$D,e$m,e$Y,e$t,e$y,!1)},e$m.frameLoop=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$y&&(e$y=!0),void 0===e$l&&(e$l=!1),this._create(!0,!0,e$D,e$m,e$Y,e$t,e$y,e$l)},e$m.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+e$r._freeCount},e$m.clear=function(e$D,e$m){var e$Y=this._getHandler(e$D,e$m);return!(!e$Y||this._isIgnoreRecover(e$Y))&&(delete this._map[e$Y.key],e$Y.key=null,e$Y.clear(),!0)},e$m.clearAll=function(e$D){if(e$D)for(var e$m=0,e$Y=this._handlers.length;e$m<e$Y;e$m++){var e$t=this._handlers[e$m];e$t.caller===e$D&&(this._isIgnoreRecover(e$t)||(delete this._map[e$t.key],e$t.key=null,e$t.clear()))}},e$m._getHandler=function(e$D,e$m){var e$Y=e$D?e$D.$_GID||(e$D.$_GID=e$Z.getGID()):0,e$t=e$m.$_TID||(e$m.$_TID=this._mid++);return this._map[e$Y+"_"+e$t]},e$m._isIgnoreRecover=function(e$D){if(e$D.ignoreRecover||e$D.caller&&"IgnoreRecover"==e$D.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var e$m="";try{arguments.propertyIsEnumerable.caller}catch(e$D){e$m=e$D.stack}e$z.recordError("报错：核心定时器销毁忽略  "+e$m)}return!0}return!1},e$m.hasHandler=function(e$D,e$m){return this._map[e$D.$_GID+"_"+e$m.$_TID]},e$m.callLater=function(e$D,e$m,e$Y){if(null==this._getHandler(e$D,e$m)){var e$t=e$r.create();e$t.caller=e$D,e$t.method=e$m,e$t.args=e$Y,this._indexHandler(e$t),this._laters.push(e$t)}},e$m.runCallLater=function(e$D,e$m){var e$Y=this._getHandler(e$D,e$m);e$Y&&null!=e$Y.method&&(this._isIgnoreRecover(e$Y)||(delete this._map[e$Y.key],e$Y.run(!0)))},e$m.runTimer=function(e$D,e$m){this.runCallLater(e$D,e$m)},e$G(0,e$m,"delta",function(){return this._delta}),e$D.__init$=function(){e$r=function(){function e$m(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}e$f(e$m,"");var e$D=e$m.prototype;return e$D.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},e$D.recover=function(){this.clear(),this.args=e$m._freeHandler,e$m._freeHandler=this,e$m._freeCount++},e$D.run=function(e$D){var e$m=this.caller;if(e$m&&e$m.destroyed)return this.clear();var e$Y=this.method,e$t=this.args;e$D&&this.clear(),null!=e$Y&&(e$t?e$Y.apply(e$m,e$t):e$Y.call(e$m))},e$m._freeHandler=null,e$m._freeCount=0,e$m.create=function(){var e$D=e$m._freeHandler;return e$D?(e$m._freeHandler=e$D.args,--e$m._freeCount,e$D.args=null,e$D):new e$m},e$m}()},e$D}()),e$V=function(){function e$_(){this.gid=0}e$f(e$_,"laya.utils.Tween");var e$D=e$_.prototype;return e$D.to=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){return void 0===e$l&&(e$l=0),void 0===e$E&&(e$E=!1),this._create(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,!0,!1,!0)},e$D.from=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){return void 0===e$l&&(e$l=0),void 0===e$E&&(e$E=!1),this._create(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,!1,!1,!0)},e$D._create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){if(!e$D)throw new Error("Tween:target is null");this._target=e$D,this._duration=e$Y,this._ease=e$t||e$m.ease||e$_.easeNone,this._complete=e$y||e$m.complete,this._delay=e$l,this._props=[],this._usedTimer=0,this._startTimer=e$u.now(),this._usedPool=e$o,this._delayParam=null,this.update=e$m.update;var e$f=e$D.$_GID||(e$D.$_GID=e$Z.getGID());return e$_.tweenMap[e$f]?(e$E&&e$_.clearTween(e$D),e$_.tweenMap[e$f].push(this)):e$_.tweenMap[e$f]=[this],e$r?e$l<=0?this.firstStart(e$D,e$m,e$B):(this._delayParam=[e$D,e$m,e$B],e$z.scaleTimer.once(e$l,this,this.firstStart,this._delayParam)):this._initProps(e$D,e$m,e$B),this},e$D.firstStart=function(e$D,e$m,e$Y){this._delayParam=null,e$D.destroyed?this.clear():(this._initProps(e$D,e$m,e$Y),this._beginLoop())},e$D._initProps=function(e$D,e$m,e$Y){for(var e$t in e$m)if("number"==typeof e$D[e$t]){var e$y=e$Y?e$D[e$t]:e$m[e$t],e$l=e$Y?e$m[e$t]:e$D[e$t];this._props.push([e$t,e$y,e$l-e$y]),e$Y||(e$D[e$t]=e$y)}},e$D._beginLoop=function(){e$z.scaleTimer.frameLoop(1,this,this._doEase)},e$D._doEase=function(){this._updateEase(e$u.now())},e$D._updateEase=function(e$D){var e$m=this._target;if(e$m){if(e$m.destroyed)return e$_.clearTween(e$m);var e$Y=this._usedTimer=e$D-this._startTimer-this._delay;if(!(e$Y<0)){if(e$Y>=this._duration)return this.complete();for(var e$t=0<e$Y?this._ease(e$Y,0,1,this._duration):0,e$y=this._props,e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];e$m[e$B[0]]=e$B[1]+e$t*e$B[2]}this.update&&this.update.run()}}},e$D.complete=function(){if(this._target){e$z.scaleTimer.runTimer(this,this.firstStart);for(var e$D=this._target,e$m=this._props,e$Y=this._complete,e$t=0,e$y=e$m.length;e$t<e$y;e$t++){var e$l=e$m[e$t];e$D[e$l[0]]=e$l[1]+e$l[2]}this.update&&this.update.run(),this.clear(),e$Y&&e$Y.run()}},e$D.pause=function(){e$z.scaleTimer.clear(this,this._beginLoop),e$z.scaleTimer.clear(this,this._doEase),e$z.scaleTimer.clear(this,this.firstStart);var e$D;(e$D=e$u.now()-this._startTimer-this._delay)<0&&(this._usedTimer=e$D)},e$D.setStartTime=function(e$D){this._startTimer=e$D},e$D.clear=function(){this._target&&(this._remove(),this._clear())},e$D._clear=function(){this.pause(),e$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,e$g.recover("tween",this))},e$D.recover=function(){this._usedPool=!0,this._clear()},e$D._remove=function(){var e$D=e$_.tweenMap[this._target.$_GID];if(e$D)for(var e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++)if(e$D[e$m]===this){e$D.splice(e$m,1);break}},e$D.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=e$u.now(),this._delayParam)e$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var e$D=this._props,e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++){var e$t=e$D[e$m];this._target[e$t[0]]=e$t[1]}e$z.scaleTimer.once(this._delay,this,this._beginLoop)}},e$D.resume=function(){this._usedTimer>=this._duration||(this._startTimer=e$u.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?e$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},e$G(0,e$D,"progress",null,function(e$D){var e$m=e$D*this._duration;this._startTimer=e$u.now()-this._delay-e$m}),e$_.to=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){return void 0===e$l&&(e$l=0),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=!0),e$g.getItemByClass("tween",e$_)._create(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,!0,e$B,!0)},e$_.from=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){return void 0===e$l&&(e$l=0),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=!0),e$g.getItemByClass("tween",e$_)._create(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,!1,e$B,!0)},e$_.clearAll=function(e$D){if(e$D&&e$D.$_GID){var e$m=e$_.tweenMap[e$D.$_GID];if(e$m){for(var e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)e$m[e$Y]._clear();e$m.length=0}}},e$_.clear=function(e$D){e$D.clear()},e$_.clearTween=function(e$D){e$_.clearAll(e$D)},e$_.easeNone=function(e$D,e$m,e$Y,e$t){return e$Y*e$D/e$t+e$m},e$_.tweenMap={},e$_}(),e$Z=function(){function e$B(){}return e$f(e$B,"laya.utils.Utils"),e$B.toRadian=function(e$D){return e$D*e$B._pi2},e$B.toAngle=function(e$D){return e$D*e$B._pi},e$B.toHexColor=function(e$D){if(e$D<0||isNaN(e$D))return null;for(var e$m=e$D.toString(16);e$m.length<6;)e$m="0"+e$m;return"#"+e$m},e$B.getGID=function(){return e$B._gid++},e$B.concatArray=function(e$D,e$m){if(!e$m)return e$D;if(!e$D)return e$m;var e$Y=0,e$t=e$m.length;for(e$Y=0;e$Y<e$t;e$Y++)e$D.push(e$m[e$Y]);return e$D},e$B.clearArray=function(e$D){return e$D&&(e$D.length=0),e$D},e$B.copyArray=function(e$D,e$m){if(e$D||(e$D=[]),!e$m)return e$D;e$D.length=e$m.length;var e$Y=0,e$t=e$m.length;for(e$Y=0;e$Y<e$t;e$Y++)e$D[e$Y]=e$m[e$Y];return e$D},e$B.getGlobalRecByPoints=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E;return e$l=new e$A(e$m,e$Y),e$l=e$D.localToGlobal(e$l),e$E=new e$A(e$t,e$y),e$E=e$D.localToGlobal(e$E),e$J._getWrapRec([e$l.x,e$l.y,e$E.x,e$E.y])},e$B.getGlobalPosAndScale=function(e$D){return e$B.getGlobalRecByPoints(e$D,0,0,1,1)},e$B.bind=function(e$D,e$m){return e$D.bind(e$m)},e$B.measureText=function(e$D,e$m){return e$s.measureText(e$D,e$m)},e$B.contextMeasureText=function(e$D){var e$m=e$u.context.measureText(e$D);return e$m||(e$m={width:16,height:16}),e$m},e$B.updateOrder=function(e$D){if(!e$D||e$D.length<2)return!1;for(var e$m,e$Y=1,e$t=0,e$y=e$D.length,e$l=NaN;e$Y<e$y;){for(e$m=e$D[e$t=e$Y],e$l=e$D[e$t]._zOrder;-1<--e$t&&e$D[e$t]._zOrder>e$l;)e$D[e$t+1]=e$D[e$t];e$D[e$t+1]=e$m,e$Y++}var e$E=e$m.parent.conchModel;if(e$E)if(null!=e$E.updateZOrder)e$E.updateZOrder();else{for(e$Y=0;e$Y<e$y;e$Y++)e$E.removeChild(e$D[e$Y].conchModel);for(e$Y=0;e$Y<e$y;e$Y++)e$E.addChildAt(e$D[e$Y].conchModel,e$Y)}return!0},e$B.transPointList=function(e$D,e$m,e$Y){var e$t=0,e$y=e$D.length;for(e$t=0;e$t<e$y;e$t+=2)e$D[e$t]+=e$m,e$D[e$t+1]+=e$Y},e$B.parseInt=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y=e$u.window.parseInt(e$D,e$m);return isNaN(e$Y)?0:e$Y},e$B.getFileExtension=function(e$D){e$B._extReg.lastIndex=e$D.lastIndexOf(".");var e$m=e$B._extReg.exec(e$D);return e$m&&1<e$m.length?e$m[1].toLowerCase():null},e$B.getTransformRelativeToWindow=function(e$D,e$m,e$Y){var e$t=e$z.stage,e$y=laya.utils.Utils.getGlobalPosAndScale(e$D),e$l=e$t._canvasTransform.clone(),e$E=e$l.tx,e$B=e$l.ty;e$l.rotate(-Math.PI/180*e$z.stage.canvasDegree),e$l.scale(e$z.stage.clientScaleX,e$z.stage.clientScaleY);var e$o=e$z.stage.canvasDegree%180!=0,e$r=NaN,e$f=NaN;e$o?(e$r=e$Y+e$y.y,e$f=e$m+e$y.x,e$r*=e$l.d,e$f*=e$l.a,90==e$z.stage.canvasDegree?(e$r=e$E-e$r,e$f+=e$B):(e$r+=e$E,e$f=e$B-e$f)):(e$r=e$m+e$y.x,e$f=e$Y+e$y.y,e$r*=e$l.a,e$f*=e$l.d,e$r+=e$E,e$f+=e$B);var e$_=NaN,e$i=NaN;return e$i=e$o?(e$_=e$l.d*e$y.height,e$l.a*e$y.width):(e$_=e$l.a*e$y.width,e$l.d*e$y.height),{x:e$r,y:e$f,scaleX:e$_,scaleY:e$i}},e$B.fitDOMElementInArea=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$D._fitLayaAirInitialized||(e$D._fitLayaAirInitialized=!0,e$D.style.transformOrigin=e$D.style.webKittransformOrigin="left top",e$D.style.position="absolute");var e$E=e$B.getTransformRelativeToWindow(e$m,e$Y,e$t);e$D.style.transform=e$D.style.webkitTransform="scale("+e$E.scaleX+","+e$E.scaleY+") rotate("+e$z.stage.canvasDegree+"deg)",e$D.style.width=e$y+"px",e$D.style.height=e$l+"px",e$D.style.left=e$E.x+"px",e$D.style.top=e$E.y+"px"},e$B.isOkTextureList=function(e$D){if(!e$D)return!1;var e$m,e$Y=0,e$t=e$D.length;for(e$Y=0;e$Y<e$t;e$Y++)if(!(e$m=e$D[e$Y])||!e$m.source)return!1;return!0},e$B.isOKCmdList=function(e$D){if(!e$D)return!1;var e$m,e$Y,e$t=0,e$y=e$D.length,e$l=e$C._context;for(e$t=0;e$t<e$y;e$t++)switch((e$m=e$D[e$t]).callee){case e$l._drawTexture:case e$l._fillTexture:case e$l._drawTextureWithTransform:if(!(e$Y=e$m[0])||!e$Y.source)return!1}return!0},e$B._gid=1,e$B._pi=180/Math.PI,e$B._pi2=Math.PI/180,e$B._extReg=/\.(\w+)\??/g,e$B.parseXMLFromString=function(e$D){var e$m;if(e$D=e$D.replace(/>\s+</g,"><"),-1<(e$m=(new DOMParser).parseFromString(e$D,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))if(console.error("html error    ===============>>>>>>>  "+e$D),-1!=e$D.indexOf("&")||-1!=e$D.indexOf('"')||-1!=e$D.indexOf(">")||-1!=e$D.indexOf("<")){var e$Y=e$D.slice(6,e$D.length-7);e$Y="<root>"+(e$Y=(e$Y=(e$Y=(e$Y=e$Y.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;"))+"</root>",e$m=(new DOMParser).parseFromString(e$Y,"text/xml")}else e$m=(new DOMParser).parseFromString("<root>error...</root>","text/xml");return e$m},e$B}(),e$b=function(){function e$D(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],e$C.isWebGL&&e$q.regCacheByFunction(e$Z.bind(this.startDispose,this),e$Z.bind(this.getCacheList,this))}e$f(e$D,"laya.utils.VectorGraphManager");var e$m=e$D.prototype;return e$m.getId=function(){return this._id++},e$m.addShape=function(e$D,e$m){this.shapeDic[e$D]=e$m,this.useDic[e$D]||(this.useDic[e$D]=!0)},e$m.addLine=function(e$D,e$m){this.shapeLineDic[e$D]=e$m,this.shapeLineDic[e$D]||(this.shapeLineDic[e$D]=!0)},e$m.getShape=function(e$D){this._checkKey&&null!=this.useDic[e$D]&&(this.useDic[e$D]=!0)},e$m.deleteShape=function(e$D){this.shapeDic[e$D]&&(this.shapeDic[e$D]=null,delete this.shapeDic[e$D]),this.shapeLineDic[e$D]&&(this.shapeLineDic[e$D]=null,delete this.shapeLineDic[e$D]),null!=this.useDic[e$D]&&delete this.useDic[e$D]},e$m.getCacheList=function(){var e$D,e$m=[];for(e$D in this.shapeDic)e$m.push(this.shapeDic[e$D]);for(e$D in this.shapeLineDic)e$m.push(this.shapeLineDic[e$D]);return e$m},e$m.startDispose=function(e$D){var e$m;for(e$m in this.useDic)this.useDic[e$m]=!1;this._checkKey=!0},e$m.endDispose=function(){if(this._checkKey){var e$D;for(e$D in this.useDic)this.useDic[e$D]||this.deleteShape(e$D);this._checkKey=!1}},e$D.getInstance=function(){return e$D.instance=e$D.instance||new e$D},e$D.instance=null,e$D}(),e$j=function(){function e$t(){this._obj=null,this._obj=e$t.supportWeakMap?new e$u.window.WeakMap:{},e$t.supportWeakMap||e$t._maps.push(this)}e$f(e$t,"laya.utils.WeakObject");var e$D=e$t.prototype;return e$D.set=function(e$D,e$m){if(null!=e$D)if(e$t.supportWeakMap){var e$Y=e$D;"string"!=typeof e$D&&"number"!=typeof e$D||(e$Y=e$t._keys[e$D])||(e$Y=e$t._keys[e$D]={k:e$D}),this._obj.set(e$Y,e$m)}else"string"==typeof e$D||"number"==typeof e$D?this._obj[e$D]=e$m:(e$D.$_GID||(e$D.$_GID=e$Z.getGID()),this._obj[e$D.$_GID]=e$m)},e$D.get=function(e$D){if(null==e$D)return null;if(e$t.supportWeakMap){var e$m="string"==typeof e$D||"number"==typeof e$D?e$t._keys[e$D]:e$D;return e$m?this._obj.get(e$m):null}return"string"==typeof e$D||"number"==typeof e$D?this._obj[e$D]:this._obj[e$D.$_GID]},e$D.del=function(e$D){if(null!=e$D)if(e$t.supportWeakMap){var e$m="string"==typeof e$D||"number"==typeof e$D?e$t._keys[e$D]:e$D;if(!e$m)return;this._obj.delete(e$m)}else"string"==typeof e$D||"number"==typeof e$D?delete this._obj[e$D]:delete this._obj[this._obj.$_GID]},e$D.has=function(e$D){if(null==e$D)return!1;if(e$t.supportWeakMap){var e$m="string"==typeof e$D||"number"==typeof e$D?e$t._keys[e$D]:e$D;return this._obj.has(e$m)}return"string"==typeof e$D||"number"==typeof e$D?null!=this._obj[e$D]:null!=this._obj[this._obj.$_GID]},e$t.__init__=function(){(e$t.supportWeakMap=null!=e$u.window.WeakMap)||e$z.timer.loop(e$t.delInterval,null,e$t.clearCache)},e$t.clearCache=function(){for(var e$D=0,e$m=e$t._maps.length;e$D<e$m;e$D++){e$t._maps[e$D]._obj={}}},e$t.supportWeakMap=!1,e$t.delInterval=3e5,e$t._keys={},e$t._maps=[],e$o(e$t,["I",function(){return this.I=new e$t}]),e$t}(),e$K=function(){function e$D(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}e$f(e$D,"laya.utils.WordText");var e$m=e$D.prototype;return e$m.setText=function(e$D){this.changed=!0,this._text=e$D},e$m.toString=function(){return this._text},e$m.charCodeAt=function(e$D){return this._text?this._text.charCodeAt(e$D):NaN},e$m.charAt=function(e$D){return this._text?this._text.charAt(e$D):null},e$G(0,e$m,"length",function(){return this._text?this._text.length:0}),e$D}(),e$DD=function(e$D){function e$E(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,e$E.__super.call(this),this._childs=e$E.ARRAY_EMPTY,this._$P=e$E.PROP_EMPTY,this.timer=e$z.scaleTimer,this.conchModel=e$C.isConchNode?this.createConchModel():null}e$f(e$E,"laya.display.Node",e$r);var e$m=e$E.prototype;return e$m._setBit=function(e$D,e$m){1==e$D&&(this._getBit(e$D)!=e$m&&this._updateDisplayedInstage());e$m?this._bits|=e$D:this._bits&=~e$D},e$m._getBit=function(e$D){return 0!=(this._bits&e$D)},e$m._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},e$m._setUpNoticeType=function(e$D){var e$m=this;for(e$m._setBit(e$D,!0),e$m=e$m.parent;e$m;){if(e$m._getBit(e$D))return;e$m._setBit(e$D,!0),e$m=e$m.parent}},e$m.on=function(e$D,e$m,e$Y,e$t){return"display"!==e$D&&"undisplay"!==e$D||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e$D,e$m,e$Y,e$t,!1)},e$m.once=function(e$D,e$m,e$Y,e$t){return"display"!==e$D&&"undisplay"!==e$D||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e$D,e$m,e$Y,e$t,!0)},e$m.createConchModel=function(){return null},e$m.destroy=function(e$D){void 0===e$D&&(e$D=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(e$D?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},e$m.destroyChildren=function(){if(this._childs)for(var e$D=this._childs.length-1;-1<e$D;e$D--)this._childs[e$D].destroy(!0)},e$m.addChild=function(e$D){if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),e$D._parent===this){var e$m=this.getChildIndex(e$D);e$m!==this._childs.length-1&&(this._childs.splice(e$m,1),this._childs.push(e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1)),this._childChanged())}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1),(e$D.parent=this)._childChanged();return e$D},e$m.addChildren=function(e$D){for(var e$m=arguments,e$Y=0,e$t=e$m.length;e$Y<e$t;)this.addChild(e$m[e$Y++])},e$m.addChildAt=function(e$D,e$m){if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),0<=e$m&&e$m<=this._childs.length){if(e$D._parent===this){var e$Y=this.getChildIndex(e$D);this._childs.splice(e$Y,1),this._childs.splice(e$m,0,e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,e$m)),this._childChanged()}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$m,0,e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,e$m),e$D.parent=this;return e$D}throw new Error("appendChildAt:The index is out of bounds")},e$m.getChildIndex=function(e$D){return this._childs.indexOf(e$D)},e$m.getChildByName=function(e$D){var e$m=this._childs;if(e$m)for(var e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];if(e$y.name===e$D)return e$y}return null},e$m._get$P=function(e$D){return this._$P[e$D]},e$m._set$P=function(e$D,e$m){return this.destroyed||(this._$P===e$E.PROP_EMPTY&&(this._$P={}),this._$P[e$D]=e$m),e$m},e$m.getChildAt=function(e$D){return this._childs[e$D]},e$m.setChildIndex=function(e$D,e$m){var e$Y=this._childs;if(e$m<0||e$m>=e$Y.length)throw new Error("setChildIndex:The index is out of bounds.");var e$t=this.getChildIndex(e$D);if(e$t<0)throw new Error("setChildIndex:node is must child of this object.");return e$Y.splice(e$t,1),e$Y.splice(e$m,0,e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,e$m)),this._childChanged(),e$D},e$m._childChanged=function(e$D){},e$m.removeChild=function(e$D){if(!this._childs)return e$D;var e$m=this._childs.indexOf(e$D);return this.removeChildAt(e$m)},e$m.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},e$m.removeChildByName=function(e$D){var e$m=this.getChildByName(e$D);return e$m&&this.removeChild(e$m),e$m},e$m.removeChildAt=function(e$D){var e$m=this.getChildAt(e$D);if(e$m){for(var e$Y=this._childs.length-1,e$t=e$D;e$t<e$Y;++e$t)this._childs[e$t]=this._childs[e$t+1];this._childs.length=e$Y,this.conchModel&&this.conchModel.removeChild(e$m.conchModel),e$m.parent=null}return e$m},e$m.removeChildren=function(e$D,e$m){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=2147483647),this._childs&&0<this._childs.length){var e$Y=this._childs;if(0===e$D&&e$l<=e$m){var e$t=e$Y;this._childs=e$E.ARRAY_EMPTY}else e$t=e$Y.splice(e$D,e$m-e$D);for(var e$y=0,e$l=e$t.length;e$y<e$l;e$y++)e$t[e$y].parent=null,this.conchModel&&this.conchModel.removeChild(e$t[e$y].conchModel)}return this},e$m.replaceChild=function(e$D,e$m){var e$Y=this._childs.indexOf(e$m);return-1<e$Y?(this._childs.splice(e$Y,1,e$D),this.conchModel&&(this.conchModel.removeChild(e$m.conchModel),this.conchModel.addChildAt(e$D.conchModel,e$Y)),e$m.parent=null,e$D.parent=this,e$D):null},e$m._updateDisplayedInstage=function(){var e$D;e$D=this;var e$m=e$z.stage;for(this._displayedInStage=!1;e$D;){if(e$D._getBit(1)){this._displayedInStage=e$D._displayedInStage;break}if(e$D==e$m||e$D._displayedInStage){this._displayedInStage=!0;break}e$D=e$D.parent}},e$m._setDisplay=function(e$D){this._displayedInStage!==e$D&&((this._displayedInStage=e$D)?this.event("display"):this.event("undisplay"))},e$m._displayChild=function(e$D,e$m){var e$Y=e$D._childs;if(e$Y)for(var e$t=0;e$t<e$Y.length;e$t++){var e$y=e$Y[e$t];e$y&&e$y._getBit(1)&&(0<e$y._childs.length?this._displayChild(e$y,e$m):e$y._setDisplay(e$m))}e$D._setDisplay(e$m)},e$m.contains=function(e$D){if(e$D===this)return!0;for(;e$D;){if(e$D.parent===this)return!0;e$D=e$D.parent}return!1},e$m.timerLoop=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$y&&(e$y=!0),void 0===e$l&&(e$l=!1),this.timer.loop(e$D,e$m,e$Y,e$t,e$y,e$l)},e$m.timerOnce=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=!0),this.timer._create(!1,!1,e$D,e$m,e$Y,e$t,e$y)},e$m.frameLoop=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=!0),this.timer._create(!0,!0,e$D,e$m,e$Y,e$t,e$y)},e$m.frameOnce=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=!0),this.timer._create(!0,!1,e$D,e$m,e$Y,e$t,e$y)},e$m.clearTimer=function(e$D,e$m){this.timer.clear(e$D,e$m)},e$G(0,e$m,"numChildren",function(){return this._childs.length}),e$G(0,e$m,"destroyed",function(){return this._destroyed}),e$G(0,e$m,"parent",function(){return this._parent},function(e$D){this._parent!==e$D&&(e$D?(this._parent=e$D,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),e$D.displayedInStage&&this._displayChild(this,!0)),e$D._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=e$D))}),e$G(0,e$m,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),e$E.ARRAY_EMPTY=[],e$E.PROP_EMPTY={},e$E.NOTICE_DISPLAY=1,e$E.MOUSEENABLE=2,e$E}(),e$mD=function(e$D){function e$i(e$D){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,e$i.__super.call(this),this._padding=e$i._PADDING,this._spacing=e$i._SPACING,this._aligns=e$i._ALIGNS,this._font=e$I.EMPTY,this._ower=e$D}e$f(e$i,"laya.display.css.CSSStyle",e$D);var e$m=e$i.prototype;return e$m.destroy=function(){this._ower=null,this._font=null,this._rect=null},e$m.inherit=function(e$D){this._font=e$D._font,this._spacing=e$D._spacing===e$i._SPACING?e$i._SPACING:e$D._spacing.slice(),this.lineHeight=e$D.lineHeight},e$m._widthAuto=function(){return 0!=(262144&this._type)},e$m.widthed=function(e$D){return 0!=(8&this._type)},e$m._calculation=function(e$D,e$m){if(e$m.indexOf("%")<0)return!1;var e$t=this._ower,e$y=e$t.parent,e$l=this._rect;function e$E(e$D,e$m,e$Y){return e$D*e$Y[0]+e$m*e$Y[1]+e$Y[2]}function e$Y(e$D){var e$m=e$y.width,e$Y=e$t.width;e$l.width&&(e$t.width=e$E(e$m,e$Y,e$l.width)),e$l.height&&(e$t.height=e$E(e$m,e$Y,e$l.height)),e$l.left&&(e$t.x=e$E(e$m,e$Y,e$l.left)),e$l.top&&(e$t.y=e$E(e$m,e$Y,e$l.top))}null===e$l&&(e$y._getCSSStyle()._type|=524288,e$y.on("resize",this,e$Y),this._rect=e$l={input:{}});var e$B=e$m.split(" ");return e$B[0]=parseFloat(e$B[0])/100,1==e$B.length?e$B[1]=e$B[2]=0:(e$B[1]=parseFloat(e$B[1])/100,e$B[2]=parseFloat(e$B[2])),e$l[e$D]=e$B,e$l.input[e$D]=e$m,e$Y(),!0},e$m.heighted=function(e$D){return 0!=(8192&this._type)},e$m.size=function(e$D,e$m){var e$Y=this._ower,e$t=!1;-1!==e$D&&e$D!=this._ower.width&&(this._type|=8,this._ower.width=e$D,e$t=!0),-1!==e$m&&e$m!=this._ower.height&&(this._type|=8192,this._ower.height=e$m,e$t=!0),e$t&&(e$Y._layoutLater(),524288&this._type&&e$Y.event("resize",this))},e$m._getAlign=function(){return this._aligns[0]},e$m._getValign=function(){return this._aligns[1]},e$m._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},e$m._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new e$I(this._font))},e$m.render=function(e$D,e$m,e$Y,e$t){var e$y=e$D.width,e$l=e$D.height;e$Y-=e$D.pivotX,e$t-=e$D.pivotY,this._bgground&&null!=this._bgground.color&&e$m.ctx.fillRect(e$Y,e$t,e$y,e$l,this._bgground.color),this._border&&this._border.color&&e$m.drawRect(e$Y,e$t,e$y,e$l,this._border.color.strColor,this._border.size)},e$m.getCSSStyle=function(){return this},e$m.cssText=function(e$D){this.attrs(e$i.parseOneCSS(e$D,";"))},e$m.attrs=function(e$D){if(e$D)for(var e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++){var e$t=e$D[e$m];this[e$t[0]]=e$t[1]}},e$m.setTransform=function(e$D){"none"===e$D?this._tf=e$B._TF_EMPTY:this.attrs(e$i.parseOneCSS(e$D,","))},e$m.translate=function(e$D,e$m){this._tf===e$B._TF_EMPTY&&(this._tf=new e$y),this._tf.translateX=e$D,this._tf.translateY=e$m},e$m.scale=function(e$D,e$m){this._tf===e$B._TF_EMPTY&&(this._tf=new e$y),this._tf.scaleX=e$D,this._tf.scaleY=e$m},e$m._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},e$G(0,e$m,"block",e$D.prototype._$get_block,function(e$D){e$D?this._type|=1:this._type&=-2}),e$G(0,e$m,"valign",function(){return e$i._valigndef[this._aligns[1]]},function(e$D){this._aligns===e$i._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e$i._valigndef[e$D]}),e$G(0,e$m,"height",null,function(e$D){if(this._type|=8192,"string"==typeof e$D){if(this._calculation("height",e$D))return;e$D=parseInt(e$D)}this.size(-1,e$D)}),e$G(0,e$m,"width",null,function(e$D){if(this._type|=8,"string"==typeof e$D){var e$m=e$D.indexOf("auto");if(0<=e$m&&(this._type|=262144,e$D=e$D.substr(0,e$m)),this._calculation("width",e$D))return;e$D=parseInt(e$D)}this.size(e$D,-1)}),e$G(0,e$m,"fontWeight",function(){return this._font.weight},function(e$D){this._createFont().weight=e$D}),e$G(0,e$m,"left",null,function(e$D){var e$m=this._ower;if("string"==typeof e$D){if("center"===e$D?e$D="50% -50% 0":"right"===e$D&&(e$D="100% -100% 0"),this._calculation("left",e$D))return;e$D=parseInt(e$D)}e$m.x=e$D}),e$G(0,e$m,"_translate",null,function(e$D){this.translate(e$D[0],e$D[1])}),e$G(0,e$m,"absolute",function(){return 0!=(4&this._type)}),e$G(0,e$m,"top",null,function(e$D){var e$m=this._ower;if("string"==typeof e$D){if("middle"===e$D?e$D="50% -50% 0":"bottom"===e$D&&(e$D="100% -100% 0"),this._calculation("top",e$D))return;e$D=parseInt(e$D)}e$m.y=e$D}),e$G(0,e$m,"align",function(){return e$i._aligndef[this._aligns[0]]},function(e$D){this._aligns===e$i._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e$i._aligndef[e$D]}),e$G(0,e$m,"bold",function(){return this._font.bold},function(e$D){this._createFont().bold=e$D}),e$G(0,e$m,"padding",function(){return this._padding},function(e$D){this._padding=e$D}),e$G(0,e$m,"leading",function(){return this._spacing[1]},function(e$D){"string"==typeof e$D&&(e$D=parseInt(e$D+"")),this._spacing===e$i._SPACING&&(this._spacing=[0,0]),this._spacing[1]=e$D}),e$G(0,e$m,"lineElement",function(){return 0!=(65536&this._type)},function(e$D){e$D?this._type|=65536:this._type&=-65537}),e$G(0,e$m,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(e$D){this.lineElement=!1,"right"===e$D?this._type|=32768:this._type&=-32769}),e$G(0,e$m,"textDecoration",function(){return this._font.decoration},function(e$D){this._createFont().decoration=e$D}),e$G(0,e$m,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(e$D){"nowrap"===e$D&&(this._type|=131072),"none"===e$D&&(this._type&=-131073)}),e$G(0,e$m,"background",null,function(e$D){e$D?(this._bgground||(this._bgground={}),this._bgground.color=e$D,this._ower.conchModel&&this._ower.conchModel.bgColor(e$D),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),e$G(0,e$m,"wordWrap",function(){return 0==(131072&this._type)},function(e$D){e$D?this._type&=-131073:this._type|=131072}),e$G(0,e$m,"color",function(){return this._font.color},function(e$D){this._createFont().color=e$D}),e$G(0,e$m,"password",function(){return this._font.password},function(e$D){this._createFont().password=e$D}),e$G(0,e$m,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(e$D){"none"===e$D?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=e$D),this._ower.conchModel&&this._ower.conchModel.bgColor(e$D),this._ower._renderType|=256}),e$G(0,e$m,"font",function(){return this._font.toString()},function(e$D){this._createFont().set(e$D)}),e$G(0,e$m,"weight",null,function(e$D){this._createFont().weight=e$D}),e$G(0,e$m,"letterSpacing",function(){return this._spacing[0]},function(e$D){"string"==typeof e$D&&(e$D=parseInt(e$D+"")),this._spacing===e$i._SPACING&&(this._spacing=[0,0]),this._spacing[0]=e$D}),e$G(0,e$m,"fontSize",function(){return this._font.size},function(e$D){this._createFont().size=e$D}),e$G(0,e$m,"italic",function(){return this._font.italic},function(e$D){this._createFont().italic=e$D}),e$G(0,e$m,"fontFamily",function(){return this._font.family},function(e$D){this._createFont().family=e$D}),e$G(0,e$m,"stroke",function(){return this._font.stroke[0]},function(e$D){this._createFont().stroke===e$I._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=e$D}),e$G(0,e$m,"strokeColor",function(){return this._font.stroke[1]},function(e$D){this._createFont().stroke===e$I._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=e$D}),e$G(0,e$m,"border",function(){return this._border?this._border.value:""},function(e$D){if("none"!=e$D){this._border||(this._border={});var e$m=(this._border.value=e$D).split(" ");if(this._border.color=e$d.create(e$m[e$m.length-1]),1==e$m.length)return this._border.size=1,void(this._border.type="solid");var e$Y=0;0<e$m[0].indexOf("px")?(this._border.size=parseInt(e$m[0]),e$Y++):this._border.size=1,this._border.type=e$m[e$Y],this._ower._renderType|=256}else this._border=null}),e$G(0,e$m,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(e$D){e$D?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==e$D?null:e$d.create(e$D),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),e$G(0,e$m,"position",function(){return 4&this._type?"absolute":""},function(e$D){"absolute"==e$D?this._type|=4:this._type&=-5}),e$G(0,e$m,"display",null,function(e$D){switch(e$D){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),e$G(0,e$m,"paddingLeft",function(){return this.padding[3]}),e$G(0,e$m,"paddingTop",function(){return this.padding[0]}),e$G(0,e$m,"_scale",null,function(e$D){this._ower.scale(e$D[0],e$D[1])}),e$G(0,e$m,"_rotate",null,function(e$D){this._ower.rotation=e$D}),e$i.parseOneCSS=function(e$D,e$m){for(var e$Y,e$t=[],e$y=e$D.split(e$m),e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l],e$o=e$B.indexOf(":"),e$r=e$B.substr(0,e$o).replace(/^\s+|\s+$/g,"");if(0!=e$r.length){var e$f=e$B.substr(e$o+1).replace(/^\s+|\s+$/g,""),e$_=[e$r,e$f];switch(e$r){case"italic":case"bold":e$_[1]="true"==e$f;break;case"line-height":e$_[0]="lineHeight",e$_[1]=parseInt(e$f);break;case"font-size":e$_[0]="fontSize",e$_[1]=parseInt(e$f);break;case"padding":1<(e$Y=e$f.split(" ")).length||(e$Y[1]=e$Y[2]=e$Y[3]=e$Y[0]),e$_[1]=[parseInt(e$Y[0]),parseInt(e$Y[1]),parseInt(e$Y[2]),parseInt(e$Y[3])];break;case"rotate":e$_[0]="_rotate",e$_[1]=parseFloat(e$f);break;case"scale":e$Y=e$f.split(" "),e$_[0]="_scale",e$_[1]=[parseFloat(e$Y[0]),parseFloat(e$Y[1])];break;case"translate":e$Y=e$f.split(" "),e$_[0]="_translate",e$_[1]=[parseInt(e$Y[0]),parseInt(e$Y[1])];break;default:(e$_[0]=e$i._CSSTOVALUE[e$r])||(e$_[0]=e$r)}e$t.push(e$_)}}return e$t},e$i.parseCSS=function(e$D,e$m){for(var e$Y;null!=(e$Y=e$i._parseCSSRegExp.exec(e$D));)e$i.styleSheets[e$Y[1]]=e$i.parseOneCSS(e$Y[2],";")},e$i.EMPTY=new e$i(null),e$i._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},e$i._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e$i._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e$i._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e$i.styleSheets={},e$i.ALIGN_CENTER=1,e$i.ALIGN_RIGHT=2,e$i.VALIGN_MIDDLE=1,e$i.VALIGN_BOTTOM=2,e$i._CSS_BLOCK=1,e$i._DISPLAY_NONE=2,e$i._ABSOLUTE=4,e$i._WIDTH_SET=8,e$i._PADDING=[0,0,0,0],e$i._RECT=[-1,-1,-1,-1],e$i._SPACING=[0,0],e$i._ALIGNS=[0,0,0],e$i.ADDLAYOUTED=512,e$i._NEWFONT=4096,e$i._HEIGHT_SET=8192,e$i._BACKGROUND_SET=16384,e$i._FLOAT_RIGHT=32768,e$i._LINE_ELEMENT=65536,e$i._NOWARP=131072,e$i._WIDTHAUTO=262144,e$i._LISTERRESZIE=524288,e$i}(e$B),e$YD=function(e$D){function e$E(){this.url=null,this.audio=null,this.loaded=!1,e$E.__super.call(this)}e$f(e$E,"laya.media.h5audio.AudioSound",e$r);var e$m=e$E.prototype;return e$m.dispose=function(){var e$D=e$E._audioCache[this.url];e$D&&(e$D.src="",delete e$E._audioCache[this.url])},e$m.load=function(e$D){var e$m;if(e$D=e$N.formatURL(e$D),(this.url=e$D)==e$F._tMusic?(e$E._initMusicAudio(),(e$m=e$E._musicAudio).src!=e$D&&(e$E._audioCache[e$m.src]=null,e$m=null)):e$m=e$E._audioCache[e$D],e$m&&2<=e$m.readyState)this.event("complete");else{e$m||(e$m=e$D==e$F._tMusic?(e$E._initMusicAudio(),e$E._musicAudio):e$u.createElement("audio"),(e$E._audioCache[e$D]=e$m).src=e$D),e$m.addEventListener("canplaythrough",e$t),e$m.addEventListener("error",e$y);var e$Y=this;(this.audio=e$m).load?e$m.load():e$y()}function e$t(){e$l(),e$Y.loaded=!0,e$Y.event("complete")}function e$y(){e$m.load=null,e$l(),e$Y.event("error")}function e$l(){e$m.removeEventListener("canplaythrough",e$t),e$m.removeEventListener("error",e$y)}},e$m.play=function(e$D,e$m,e$Y){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),!this.url)return null;var e$t,e$y;if(!(e$t=this.url==e$F._tMusic?e$E._musicAudio:e$E._audioCache[this.url]))return null;e$y=e$g.getItem("audio:"+this.url),e$C.isConchApp?e$y||((e$y=e$u.createElement("audio")).src=this.url):this.url==e$F._tMusic?(e$E._initMusicAudio(),(e$y=e$E._musicAudio).src=this.url):e$y=e$y||e$t.cloneNode(!0);var e$l=new e$iD(e$y);return e$l.url=this.url,e$l.loops=e$m,e$l.startTime=e$D,e$l.startHandler=e$Y,e$l.play(!1),e$F.addChannel(e$l),e$l},e$G(0,e$m,"duration",function(){var e$D;return(e$D=e$E._audioCache[this.url])?e$D.duration:0}),e$E._initMusicAudio=function(){e$E._musicAudio||(e$E._musicAudio||(e$E._musicAudio=e$u.createElement("audio")),e$C.isConchApp||e$u.document.addEventListener("mousedown",e$E._makeMusicOK))},e$E._makeMusicOK=function(){e$u.document.removeEventListener("mousedown",e$E._makeMusicOK),e$E._musicAudio.src?e$E._musicAudio.play():(e$E._musicAudio.src="",e$E._musicAudio.load())},e$E._audioCache={},e$E._musicAudio=null,e$E}(),e$tD=function(e$D){function e$m(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,e$m.__super.call(this)}e$f(e$m,"laya.media.SoundChannel",e$r);var e$Y=e$m.prototype;return e$Y.play=function(){},e$Y.stop=function(){},e$Y.pause=function(){},e$Y.resume=function(){},e$Y.__runComplete=function(e$D){e$D&&e$D.run()},e$G(0,e$Y,"volume",function(){return 1},function(e$D){}),e$G(0,e$Y,"position",function(){return 0}),e$G(0,e$Y,"duration",function(){return 0}),e$m}(),e$yD=function(e$D){function e$m(){e$m.__super.call(this)}e$f(e$m,"laya.media.Sound",e$r);var e$Y=e$m.prototype;return e$Y.load=function(e$D){},e$Y.play=function(e$D,e$m,e$Y){return void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),null},e$Y.dispose=function(){},e$G(0,e$Y,"duration",function(){return 0}),e$m}(),e$lD=function(e$D){function e$y(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e$y.__super.call(this)}e$f(e$y,"laya.media.webaudio.WebAudioSound",e$r);var e$m=e$y.prototype;return e$m.load=function(e$D){this.url=e$D,this.audioBuffer=e$y._dataCache[e$D],this.audioBuffer?this._loaded(this.audioBuffer):(e$y.e.on("loaded:"+e$D,this,this._loaded),e$y.e.on("err:"+e$D,this,this._err),e$y.__loadingSound[e$D]||(e$y.__loadingSound[e$D]=!0,e$z.loader.load(e$D,e$U.create(this,this.onloaded),null,e$BD.BUFFER,4,!1,null,!0)))},e$m.onloaded=function(e$D){e$D||this._err(),this._disposed?this._removeLoadEvents():(this.data=e$D,e$y.buffs.push({buffer:this.data,url:this.url}),e$y.decode())},e$m._err=function(){if(this._removeLoadEvents(),e$y.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var e$D,e$m,e$Y,e$t=0;for(e$D=(e$m=this.__toPlays).length,e$t=0;e$t<e$D;e$t++)(e$Y=e$m[e$t])[3]&&!e$Y[3].isStopped&&e$Y[3].event("error");this.__toPlays.length=0}},e$m._loaded=function(e$D){this._removeLoadEvents(),this._disposed||(this.audioBuffer=e$D,this.loaded=!0,this.event("complete"))},e$m._removeLoadEvents=function(){e$y.e.off("loaded:"+this.url,this,this._loaded),e$y.e.off("err:"+this.url,this,this._err)},e$m.__playAfterLoaded=function(){if(this.__toPlays){var e$D,e$m,e$Y,e$t=0;for(e$D=(e$m=this.__toPlays).length,e$t=0;e$t<e$D;e$t++)(e$Y=e$m[e$t])[3]&&!e$Y[3].isStopped&&this.play(e$Y[0],e$Y[1],e$Y[2],e$Y[3]);this.__toPlays.length=0}},e$m.play=function(e$D,e$m,e$Y,e$t){return void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),e$t=e$t||new e$RD,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([e$D,e$m,e$Y,e$t]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),e$t.url=this.url,e$t.loops=e$m,e$t.audioBuffer=this.audioBuffer,e$t.startTime=e$D,e$t.startHandler=e$Y,e$t.play(!1),e$F.addChannel(e$t),e$t},e$m.dispose=function(){this._disposed=!0,delete e$y._dataCache[this.url],delete e$y.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},e$G(0,e$m,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e$y.decode=function(){if(!(e$y.buffs.length<=0||e$y.isDecoding))if(e$y.isDecoding=!0,(e$y.tInfo=e$y.buffs.shift())&&e$y.tInfo.buffer&&e$y.tInfo.buffer.byteLength)try{e$y.ctx.decodeAudioData(e$y.tInfo.buffer,e$y._done,e$y._fail)}catch(e$D){console.error("decodeAudioData error  byteLength:"+e$y.tInfo.buffer.byteLength+"  url:"+e$y.tInfo.url)}else e$y._fail()},e$y._done=function(e$D){e$y.e.event("loaded:"+e$y.tInfo.url,e$D),e$y._dataCache[e$y.tInfo.url]=e$D,e$y.isDecoding=!1,e$y.decode()},e$y._fail=function(){e$y.e.event("err:"+e$y.tInfo.url,null),e$y.isDecoding=!1,e$y.decode()},e$y._playEmptySound=function(){if(null!=e$y.ctx){if(e$y._emptySource&&(e$y._emptySource.stop(),e$y._emptySource.disconnect(0),!e$RD._tryCleanFailed))try{e$y._emptySource.buffer=null}catch(e$D){e$RD._tryCleanFailed=!0}var e$D=e$y.ctx.createBufferSource();e$D.buffer=e$y._miniBuffer,e$D.connect(e$y.ctx.destination),e$D.start(0,0,0),e$y._emptySource=e$D}},e$y._unlock=function(){e$y._unlocked||(e$y._playEmptySound(),"running"==e$y.ctx.state?(e$u.document.removeEventListener("mousedown",e$y._unlock,!0),e$u.document.removeEventListener("touchend",e$y._unlock,!0),e$u.document.removeEventListener("touchstart",e$y._unlock,!0),e$y._unlocked=!0):"suspended"==e$y.ctx.state&&e$F._recoverWebAudio())},e$y.initWebAudio=function(){"running"!=e$y.ctx.state&&(e$y._unlock(),e$u.document.addEventListener("mousedown",e$y._unlock,!0),e$u.document.addEventListener("touchend",e$y._unlock,!0),e$u.document.addEventListener("touchstart",e$y._unlock,!0))},e$y._emptySource=null,e$y._dataCache={},e$y.buffs=[],e$y.isDecoding=!1,e$y._unlocked=!1,e$y.tInfo=null,e$y.__loadingSound={},e$o(e$y,["window",function(){return this.window=e$u.window},"webAudioEnabled",function(){return this.webAudioEnabled=e$y.window.AudioContext||e$y.window.webkitAudioContext||e$y.window.mozAudioContext},"ctx",function(){return this.ctx=e$y.webAudioEnabled?new(e$y.window.AudioContext||e$y.window.webkitAudioContext||e$y.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e$y.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new e$r}]),e$y}(),e$ED=function(e$D){function e$m(){this._responseType=null,this._data=null,e$m.__super.call(this),this._http=new e$u.window.XMLHttpRequest}e$f(e$m,"laya.net.HttpRequest",e$r);var e$Y=e$m.prototype;return e$Y.send=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$Y&&(e$Y="get"),void 0===e$t&&(e$t="text"),this._responseType=e$t,this._data=null;var e$l=this,e$E=this._http;if(e$E.open(e$Y,e$D,!0),e$y)for(var e$B=0;e$B<e$y.length;e$B++)e$E.setRequestHeader(e$y[e$B++],e$y[e$B]);else e$C.isConchApp||(e$m&&"string"!=typeof e$m?e$E.setRequestHeader("Content-Type","application/json"):e$E.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));e$E.responseType="arraybuffer"!==e$t?"text":"arraybuffer",e$E.onerror=function(e$D){e$l._onError(e$D)},e$E.onabort=function(e$D){e$l._onAbort(e$D)},e$E.onprogress=function(e$D){e$l._onProgress(e$D)},e$E.onload=function(e$D){e$l._onLoad(e$D)},e$E.send(e$m)},e$Y._onProgress=function(e$D){e$D&&e$D.lengthComputable&&this.event("progress",e$D.loaded/e$D.total)},e$Y._onAbort=function(e$D){this.error("Request was aborted by user")},e$Y._onError=function(e$D){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},e$Y._onLoad=function(e$D){var e$m=this._http,e$Y=void 0!==e$m.status?e$m.status:200;200===e$Y||204===e$Y||0===e$Y?this.complete():this.error("["+e$m.status+"]"+e$m.statusText+":"+e$m.responseURL)},e$Y.error=function(e$D){this.clear(),this.event("error",e$D)},e$Y.complete=function(){this.clear();var e$m=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=e$Z.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e$D){e$m=!1,this.error(e$D.message)}e$m&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},e$Y.clear=function(){var e$D=this._http;e$D.onerror=e$D.onabort=e$D.onprogress=e$D.onload=null},e$G(0,e$Y,"url",function(){return this._http.responseURL}),e$G(0,e$Y,"http",function(){return this._http}),e$G(0,e$Y,"data",function(){return this._data}),e$m}(),e$BD=function(e$D){function e$a(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,e$a.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}e$f(e$a,"laya.net.Loader",e$r);var e$m=e$a.prototype;return e$m.load=function(e$D,e$m,e$Y,e$t,e$y){if(e$D&&""!=e$D||console.error("Loader 加载的url不合法 "+e$D),void 0===e$Y&&(e$Y=!0),void 0===e$y&&(e$y=!1),this._url=e$D,this._base64=!1,0===e$D.indexOf("data:image")?(this._base64=!0,this._type=e$m="image"):this._type=e$m||(e$m=this.getTypeFromUrl(e$D)),this._cache=e$Y,this._data=null,!e$y&&e$a.loadedMap[e$D])return this._data=e$a.loadedMap[e$D],this.event("progress",1),void this.event("complete",this._data);if(e$t&&e$a.setGroup(e$D,e$t),null!=e$a.parserMap[e$m])return this._customParse=!0,void(e$a.parserMap[e$m]instanceof laya.utils.Handler?e$a.parserMap[e$m].runWith(this):e$a.parserMap[e$m].call(null,this));if("image"===e$m||"htmlimage"===e$m||"nativeimage"===e$m)return this._loadImage(e$D);if("ttf"===e$m)return this._loadTTF(e$D);switch(e$m){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:e$m}e$a.preLoadedMap[e$D]?this.onLoaded(e$a.preLoadedMap[e$D]):e$R.resMgrLoad(e$D,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},e$m.getTypeFromUrl=function(e$D){var e$m=e$Z.getFileExtension(e$D);return e$m?e$a.typeMap[e$m]:(console.warn("Not recognize the resources suffix",e$D),"text")},e$m._loadTTF=function(e$D){e$D=e$N.formatURL(e$D);var e$m=new e$T;e$m.complete=e$U.create(this,this.onLoaded),e$m.load(e$D)},e$m._loadBase64Image=function(e$m){e$m=e$N.formatURL(e$m);var e$Y,e$D=this;function e$t(){e$Y.onload=null,e$Y.onerror=null,delete e$a.imgCache[e$m]}function e$y(){e$t(),e$D.onLoaded(e$Y)}function e$l(){e$t(),e$D.event("error","Load image failed")}"nativeimage"===this._type?((e$Y=new e$u.window.Image).crossOrigin="",e$Y.onload=e$y,e$Y.onerror=e$l,e$Y.src=e$m,e$a.imgCache[e$m]=e$Y):new e$SD.create(e$m,{onload:e$y,onerror:e$l,onCreate:function(e$D){e$Y=e$D,e$a.imgCache[e$m]=e$D}})},e$m._loadImage=function(e$D){this._base64?this._loadBase64Image(e$D):e$R.imgMgrLoad(e$D,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},e$m._loadImageComplete=function(e$D,e$m,e$Y){if(null!=e$Y)if(e$Y instanceof ArrayBuffer){var e$t=new DataView(e$Y),e$y=new laya.webgl.resource.WebGLImage(new Uint8Array(e$Y,8),e$D,0,!1,e$t.getUint32(0),e$t.getUint32(4));this.onLoaded(e$y)}else if(e$Y instanceof e$fD)e$a.imgMgrSet[e$D]=e$m,e$R.imgMgrLock(e$D,e$a.imgMgrSet[e$D]),this._url=e$D,this.complete(e$Y);else{var e$l=-1!=e$D.indexOf(".png",e$D.length-4)?6408:6407;e$y=new laya.webgl.resource.WebGLImage(e$Y,e$D,e$l,!1,e$Y.width,e$Y.height);this.onLoaded(e$y)}else this.event("error","Load image failed")},e$m.imageCancel=function(e$D,e$m,e$Y){e$R.imgMgrCancel&&e$R.imgMgrCancel(e$D,this._onImageCallback)},e$m._loadSound=function(e$D){var e$m=new e$F._soundClass,e$Y=this;function e$t(){e$m.offAll()}e$m.on("complete",this,function(){e$t(),e$Y.onLoaded(e$m)}),e$m.on("error",this,function(){e$t(),e$m.dispose(),e$Y.event("error","Load sound failed")}),e$m.load(e$D)},e$m.onProgress=function(e$D){"atlas"===this._type?this.event("progress",.3*e$D):this.event("progress",e$D)},e$m.onError=function(e$D){this.event("error",e$D)},e$m._loadedComplete=function(e$D,e$m,e$Y){if(null!=e$Y)switch(this._type){case"atlas":case"plf":case"json":var e$t=new e$L(e$Y);this.onLoaded(JSON.parse(e$t.readUTFBytes()));break;case"font":e$t=new e$L(e$Y);this.onLoaded(e$Z.parseXMLFromString(e$t.readUTFBytes()));break;default:this.onLoaded(e$Y)}else this.event("error",e$D)},e$m.onLoaded=function(e$D){var e$m=this._type;if("plf"==e$m)this.parsePLFData(e$D),this.complete(e$D);else if("image"===e$m){var e$Y=new e$fD(e$D);e$Y.url=this._url,this.complete(e$Y)}else if("sound"===e$m||"htmlimage"===e$m||"nativeimage"===e$m)this.complete(e$D);else if("atlas"===e$m){if(!e$D.src&&!e$D._setContext){if(!this._data){if((this._data=e$D).meta&&e$D.meta.image)for(var e$t=e$D.meta.image.split(","),e$y=0<=this._url.indexOf("/")?"/":"\\",e$l=this._url.lastIndexOf(e$y),e$E=0<=e$l?this._url.substr(0,e$l+1):"",e$B=0,e$o=e$t.length;e$B<e$o;e$B++)e$t[e$B]=e$E+e$t[e$B];else e$t=[this._url.replace(".json",".png")];e$t.reverse(),e$D.toLoads=e$t,e$D.pics=[]}return this.event("progress",.3+1/e$t.length*.6),this._loadImage(e$t.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(e$D),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var e$r=this._data.frames,e$f=this._url.split("?")[0],e$_=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:e$f.substring(0,e$f.lastIndexOf("."))+"/",e$i=this._data.pics,e$R=e$N.formatURL(this._url),e$G=e$a.atlasMap[e$R]||(e$a.atlasMap[e$R]=[]);e$G.dir=e$_;var e$I=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var e$w in e$I=parseFloat(this._data.meta.scale),e$r){var e$W,e$U=e$r[e$w],e$e=e$i[e$U.frame.idx?e$U.frame.idx:0],e$v=e$N.formatURL(e$_+e$w);e$e.scaleRate=e$I,e$W=e$fD.create(e$e,e$U.frame.x,e$U.frame.y,e$U.frame.w,e$U.frame.h,e$U.spriteSourceSize.x,e$U.spriteSourceSize.y,e$U.sourceSize.w,e$U.sourceSize.h),e$a.cacheRes(e$v,e$W),e$a.keepCache(this._url,e$_+e$w),e$W.url=e$v,e$G.push(e$v)}else for(e$w in e$r)e$e=e$i[(e$U=e$r[e$w]).frame.idx?e$U.frame.idx:0],e$v=e$N.formatURL(e$_+e$w),e$a.cacheRes(e$v,e$fD.create(e$e,e$U.frame.x,e$U.frame.y,e$U.frame.w,e$U.frame.h,e$U.spriteSourceSize.x,e$U.spriteSourceSize.y,e$U.sourceSize.w,e$U.sourceSize.h)),e$a.loadedMap[e$v].url=e$v,e$a.keepCache(this._url,e$_+e$w),e$G.push(e$v);delete this._data.pics,this.complete(this._data)}else if("font"==e$m){if(!e$D.src)return this._data=e$D,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var e$c=new e$p;e$c.parseFont(this._data,e$D);var e$S=this._url.split(".fnt")[0].split("/"),e$z=e$S[e$S.length-1];e$wD.registerBitmapFont(e$z,e$c),this._data=e$c,this.complete(this._data)}else if("pkm"==e$m){var e$A=e$SD.create(e$D,this._url),e$J=new e$fD(e$A);e$J.url=this._url,this.complete(e$J)}else this.complete(e$D)},e$m.parsePLFData=function(e$D){var e$m,e$Y,e$t;for(e$m in e$D)switch(e$t=e$D[e$m],e$m){case"json":case"text":for(e$Y in e$t)e$a.preLoadedMap[e$N.formatURL(e$Y)]=e$t[e$Y];break;default:for(e$Y in e$t)e$a.preLoadedMap[e$N.formatURL(e$Y)]=e$t[e$Y]}},e$m.complete=function(e$D){this._data=e$D,this._customParse?this.event("loaded",e$D instanceof Array?[e$D]:e$D):(e$a._loaders.push(this),e$a._isWorking||e$a.checkNext())},e$m.endLoad=function(e$D){e$D&&(this._data=e$D),this._cache&&e$a.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},e$G(0,e$m,"url",function(){return this._url}),e$G(0,e$m,"data",function(){return this._data}),e$G(0,e$m,"cache",function(){return this._cache}),e$G(0,e$m,"type",function(){return this._type}),e$a.checkNext=function(){e$a._isWorking=!0;for(var e$D=e$u.now();e$a._startIndex<e$a._loaders.length;)if(e$u.now(),e$a._loaders[e$a._startIndex].endLoad(),e$a._startIndex++,e$u.now()-e$D>e$a.maxTimeOut)return console.warn("loader callback cost a long time:"+(e$u.now()-e$D)+" url="+e$a._loaders[e$a._startIndex-1].url),void e$z.timer.frameOnce(1,null,e$a.checkNext);e$a._loaders.length=0,e$a._startIndex=0,e$a._isWorking=!1},e$a.clearRes=function(e$D,e$m){if(null!=e$D){void 0===e$m&&(e$m=!1),e$D=e$N.formatURL(e$D);var e$Y=e$a.getAtlas(e$D);if(e$Y){for(var e$t=0,e$y=e$Y.length;e$t<e$y;e$t++){var e$l=e$Y[e$t],e$E=e$a.getRes(e$l);delete e$a.loadedMap[e$l],e$a.clearCache(e$D.substring(e$N.basePath.length),e$l.substring(e$N.basePath.length)),e$E&&e$E.destroy(e$m)}e$Y.length=0,delete e$a.atlasMap[e$D],delete e$a.loadedMap[e$D]}else{var e$B=e$a.loadedMap[e$D];e$B&&(delete e$a.loadedMap[e$D],e$B instanceof laya.resource.Texture&&e$B.bitmap&&e$B.destroy(e$m))}}},e$a.clearTextureRes=function(e$D){e$D=e$N.formatURL(e$D);var e$m=laya.net.Loader.getAtlas(e$D),e$Y=e$m&&0<e$m.length?laya.net.Loader.getRes(e$m[0]):laya.net.Loader.getRes(e$D);e$Y&&e$Y.bitmap&&(e$C.isConchApp&&!e$C.isConchWebGL?e$Y.bitmap.source.releaseTexture&&e$Y.bitmap.source.releaseTexture():null==e$Y.bitmap._atlaser&&e$Y.bitmap.releaseResource(!0))},e$a.getRes=function(e$D){return e$a.loadedMap[e$N.formatURL(e$D)]},e$a.getAtlas=function(e$D){return e$a.atlasMap[e$N.formatURL(e$D)]},e$a.cacheRes=function(e$D,e$m){e$D=e$N.formatURL(e$D),null!=e$a.loadedMap[e$D]?console.warn("Resources already exist,is repeated loading:",e$D):e$a.loadedMap[e$D]=e$m},e$a.setGroup=function(e$D,e$m){e$a.groupMap[e$m]||(e$a.groupMap[e$m]=[]),e$a.groupMap[e$m].push(e$D)},e$a.clearResByGroup=function(e$D){if(e$a.groupMap[e$D]){var e$m=e$a.groupMap[e$D],e$Y=0,e$t=e$m.length;for(e$Y=0;e$Y<e$t;e$Y++)e$a.clearRes(e$m[e$Y]);e$m.length=0}},e$a.keepCache=function(e$D,e$m){if(e$D&&e$m){var e$Y=e$a.cacheSet[e$m];e$Y?-1==e$Y.indexOf(e$D)&&e$Y.push(e$D):e$a.cacheSet[e$m]=[e$D]}},e$a.clearCache=function(e$D,e$m){if(e$D&&e$m){var e$Y=e$a.cacheSet[e$m];if(e$Y){var e$t=e$Y.indexOf(e$D);if(-1!==e$t){var e$y=e$Y.length-1;0==e$y?(delete e$a.cacheSet[e$m],0<e$a.imgMgrSet[e$m]?e$R.imgMgrFree(e$m,e$a.imgMgrSet[e$m]):e$a.clearRes(e$m,!0)):(e$Y[e$t]=e$Y[e$y],e$Y.length=e$y)}}}},e$a.saveObject=function(e$D,e$m,e$Y){if(e$m&&e$D){var e$t=e$a.objectSet[e$D];e$t?(console.warn("Loader.saveObject: "+e$D),e$t[0]=e$m,e$t[1]=e$Y):e$a.objectSet[e$D]=[e$m,e$Y,[]]}},e$a.findObject=function(e$D){if(e$D){var e$m=e$a.objectSet[e$D];if(e$m)return e$m[0]}return null},e$a.keepObject=function(e$D,e$m){if(e$D&&e$m){var e$Y=e$a.objectSet[e$m];e$Y&&-1===e$Y[2].indexOf(e$D)&&e$Y[2].push(e$D)}},e$a.clearObject=function(e$D,e$m){if(e$D&&e$m){var e$Y=e$a.objectSet[e$m];if(e$Y){var e$t=e$Y[2],e$y=e$t.indexOf(e$D);if(-1!==e$y){var e$l=e$t.length-1;0==e$l?(delete e$a.objectSet[e$m],e$Y[1]&&e$Y[1].call(null,e$Y[0])):(e$t[e$y]=e$t[e$l],e$t.length=e$l)}}}},e$a.TEXT="text",e$a.JSON="json",e$a.XML="xml",e$a.BUFFER="arraybuffer",e$a.IMAGE="image",e$a.SOUND="sound",e$a.ATLAS="atlas",e$a.FONT="font",e$a.TTF="ttf",e$a.PLF="plf",e$a.PKM="pkm",e$a.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},e$a.parserMap={},e$a.groupMap={},e$a.maxTimeOut=100,e$a.loadedMap={},e$a.preLoadedMap={},e$a.atlasMap={},e$a._loaders=[],e$a._isWorking=!1,e$a._startIndex=0,e$a.imgCache={},e$a.cacheSet={},e$a.objectSet={},e$a.imgMgrSet={},e$a}(),e$oD=function(e$D){var e$i;function e$R(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e$R.__super.call(this);for(var e$D=0;e$D<this._maxPriority;e$D++)this._resInfos[e$D]=[]}e$f(e$R,"laya.net.LoaderManager",e$r);var e$m=e$R.prototype;return e$m.create=function(e$D,e$Y,e$m,e$t,e$y,e$l,e$E,e$B){if(null==e$l&&(e$l=2),null==e$E&&(e$E=!0),e$D instanceof Array){var e$o=e$D,e$r=e$o.length,e$f=0;if(e$m)var e$_=e$U.create(e$m.caller,e$m.method,e$m.args,!1);for(var e$i=0;e$i<e$r;e$i++){var e$R=e$o[e$i];"string"==typeof e$R&&(e$R=e$o[e$i]={url:e$R}),e$R.progress=0}for(e$i=0;e$i<e$r;e$i++){e$R=e$o[e$i];var e$G=e$m?e$U.create(null,e$W,[e$R],!1):null,e$I=e$m||e$Y?e$U.create(null,e$w,[e$R]):null;this._create(e$R.url,e$I,e$G,e$R.clas||e$t,e$R.params||e$y,null!=e$R.priority&&0<=e$R.priority?e$R.priority:e$l,e$E,e$R.group||e$B)}function e$w(e$D,e$m){e$f++,e$D.progress=1,e$f===e$r&&e$Y&&e$Y.run()}function e$W(e$D,e$m){e$D.progress=e$m;for(var e$Y=0,e$t=0;e$t<e$r;e$t++){e$Y+=e$o[e$t].progress}var e$y=e$Y/e$r;e$_.runWith(e$y)}return!0}return this._create(e$D,e$Y,e$m,e$t,e$y,e$l,e$E,e$B)},e$m._create=function(e$m,e$Y,e$D,e$t,e$y,e$l,e$E,e$B){e$m&&""!=e$m||console.error("加载的url不合法 "+e$m),null==e$l&&(e$l=2),null==e$E&&(e$E=!0);var e$o=e$N.formatURL(e$m),e$r=this.getRes(e$o);if(e$r)!e$r.hasOwnProperty("loaded")||e$r.loaded?(e$D&&e$D.runWith(1),e$Y&&e$Y.run()):e$Y&&e$z.loader._createListener(e$m,e$Y.caller,e$Y.method,e$Y.args,!0,!1);else{var e$f=e$Z.getFileExtension(e$m),e$_=e$R.createMap[e$f];if(!e$_)throw new Error("LoaderManager:unknown file("+e$m+") extension with: "+e$f+".");e$t||(e$t=e$_[0]);var e$i=e$_[1];if("atlas"==e$f)this.load(e$m,e$Y,e$D,e$i,e$l,e$E);else{e$t===e$fD&&(e$i="htmlimage"),(e$r=e$t?new e$t:null).hasOwnProperty("_loaded")&&(e$r._loaded=!1),e$r._setUrl(e$m),e$B&&e$r._setGroup(e$B),this._createLoad(e$r,e$m,e$U.create(null,function(e$D){e$r&&!e$r.destroyed&&e$D&&e$r.onAsynLoaded.call(e$r,e$m,e$D,e$y),e$Y&&e$Y.run();e$z.loader.event(e$m)}),e$D,e$i,e$l,!1,e$B,!0),e$E&&this.cacheRes(e$o,e$r)}}return e$r},e$m.load=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){e$D&&""!=e$D||console.error("加载的url不合法 "+e$D);var e$o=this;if(null==e$y&&(e$y=2),null==e$l&&(e$l=!0),void 0===e$B&&(e$B=!1),e$D instanceof Array)return this._loadAssets(e$D,e$m,e$Y,e$t,e$y,e$l,e$E);var e$r=e$BD.getRes(e$D);if(null!=e$r)e$z.timer.frameOnce(1,null,function(){e$Y&&e$Y.runWith(1),e$m&&e$m.runWith(e$r),e$o._loaderCount||e$o.event("complete")});else{var e$f=e$R._resMap[e$D];e$f?(e$m&&e$f._createListener("complete",e$m.caller,e$m.method,e$m.args,!1,!1),e$Y&&e$f._createListener("progress",e$Y.caller,e$Y.method,e$Y.args,!1,!1)):((e$f=this._infoPool.length?this._infoPool.pop():new e$i).url=e$D,e$f.clas=null,e$f.type=e$t,e$f.cache=e$l,e$f.group=e$E,e$f.ignoreCache=e$B,e$f.priority=e$y,e$m&&e$f.on("complete",e$m.caller,e$m.method,e$m.args),e$Y&&e$f.on("progress",e$Y.caller,e$Y.method,e$Y.args),e$R._resMap[e$D]=e$f,e$y=e$y<this._maxPriority?0<=e$y?e$y:0:this._maxPriority-1,this._resInfos[e$y].push(e$f),this._next())}return this},e$m.cancel=function(e$D,e$m,e$Y){if(e$r=e$R._resMap[e$D]){e$m&&e$r.off("complete",e$m.caller,e$m.method,!1),e$Y&&e$r.off("progress",e$Y.caller,e$Y.method,!1);var e$t=e$r.getListener("complete"),e$y=e$r.getListener("progress");if(!(e$t&&e$t.head||e$y&&e$y.head)){if(e$r.loader){var e$l=e$r.loader;e$l.imageCancel(e$D),e$l.offAll(),e$l._data=null,e$l._customParse=!1,e$l._url=null,e$l._class=null,e$l._type=null,this._loaders.push(e$l),this._loaderCount--,delete this._loaderMap[e$r.url]}for(var e$E=0;e$E<this._maxPriority;e$E++)for(var e$B=this._resInfos[e$E],e$o=e$B.length-1;-1<e$o;e$o--){var e$r;(e$r=e$B[e$o])&&e$r.url===e$D&&(e$B[e$o]=null,e$r.destroy(),e$r.offAll(),this._infoPool.push(e$r))}delete e$R._resMap[e$D],this._next()}}},e$m._createLoad=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){var e$r=this;if(null==e$l&&(e$l=2),null==e$E&&(e$E=!0),void 0===e$o&&(e$o=!1),e$m instanceof Array)return this._loadAssets(e$m,e$Y,e$t,e$y,e$l,e$E,e$B);var e$f=e$BD.getRes(e$m);if(null!=e$f)e$z.timer.frameOnce(1,null,function(){e$t&&e$t.runWith(1),e$Y&&e$Y.runWith(e$f),e$r._loaderCount||e$r.event("complete")});else{var e$_=e$R._resMap[e$m];e$_?(e$Y&&e$_._createListener("complete",e$Y.caller,e$Y.method,e$Y.args,!1,!1),e$t&&e$_._createListener("progress",e$t.caller,e$t.method,e$t.args,!1,!1)):((e$_=this._infoPool.length?this._infoPool.pop():new e$i).url=e$m,e$_.clas=e$D,e$_.type=e$y,e$_.cache=e$E,e$_.group=e$B,e$_.ignoreCache=e$o,e$_.priority=e$l,e$Y&&e$_.on("complete",e$Y.caller,e$Y.method,e$Y.args),e$t&&e$_.on("progress",e$t.caller,e$t.method,e$t.args),e$R._resMap[e$m]=e$_,e$l=e$l<this._maxPriority?0<=e$l?e$l:0:this._maxPriority-1,this._resInfos[e$l].push(e$_),this._next())}return this},e$m._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var e$D=0;e$D<this._maxPriority;e$D++)for(var e$m=this._resInfos[e$D];0<e$m.length;){var e$Y=e$m.shift();if(e$Y)return this._doLoad(e$Y)}this._loaderCount||this.event("complete")}},e$m._doLoad=function(e$m){var e$Y=this._loaders.length?this._loaders.pop():new e$BD;this._loaderCount++,(this._loaderMap[e$m.url]=e$Y).on("complete",null,e$y),e$Y.on("progress",null,function(e$D){e$m.event("progress",e$D)}),e$Y.on("error",null,function(e$D){e$y(null)}),e$m.loader=e$Y;var e$t=this;function e$y(e$D){e$Y.offAll(),e$Y._data=null,e$Y._customParse=!1,e$Y._url=null,e$Y._class=null,e$Y._type=null,e$t._loaders.push(e$Y),e$t._loaderCount--,delete e$t._loaderMap[e$m.url],e$t._endLoad(e$m,e$D instanceof Array?[e$D]:e$D),e$t._next()}e$Y._class=e$m.clas,1<=e$m.priority?(e$Y.priority=e$m.priority,e$Y.realTime=!1):(e$Y.priority=0,e$Y.realTime=!0),e$Y.load(e$m.url,e$m.type,e$m.cache,e$m.group,e$m.ignoreCache)},e$m._endLoad=function(e$D,e$m){var e$Y=e$D.url;if(null==e$m){var e$t=this._failRes[e$Y]||0;if(e$t<this.retryNum)return console.warn("[warn]Retry to load:",e$Y),this._failRes[e$Y]=e$t+1,void e$z.timer.once(this.retryDelay,this,this._addReTry,[e$D],!1);console.warn("[error]Failed to load:",e$Y),this.event("error",e$Y)}this._failRes[e$Y]&&(this._failRes[e$Y]=0),delete e$R._resMap[e$Y],e$D.event("complete",e$m),e$D.destroy(),e$D.offAll(),this._infoPool.push(e$D)},e$m._addReTry=function(e$D){this._resInfos[this._maxPriority-1].push(e$D),this._next()},e$m.clearRes=function(e$D,e$m){void 0===e$m&&(e$m=!1),e$BD.clearRes(e$D,e$m)},e$m.getRes=function(e$D){return e$BD.getRes(e$D)},e$m.cacheRes=function(e$D,e$m){e$BD.cacheRes(e$D,e$m)},e$m.clearTextureRes=function(e$D){e$BD.clearTextureRes(e$D)},e$m.setGroup=function(e$D,e$m){e$BD.setGroup(e$D,e$m)},e$m.clearResByGroup=function(e$D){e$BD.clearResByGroup(e$D)},e$m.clearUnLoaded=function(){for(var e$D=0;e$D<this._maxPriority;e$D++){for(var e$m=this._resInfos[e$D],e$Y=e$m.length-1;-1<e$Y;e$Y--){var e$t=e$m[e$Y];e$t&&(e$t.destroy(),e$t.offAll(),this._infoPool.push(e$t))}e$m.length=0}this._loaderCount=0,e$R._resMap={}},e$m.cancelLoadByUrls=function(e$D){if(e$D)for(var e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++)this.cancelLoadByUrl(e$D[e$m])},e$m.cancelLoadByUrl=function(e$D){for(var e$m=0;e$m<this._maxPriority;e$m++)for(var e$Y=this._resInfos[e$m],e$t=e$Y.length-1;-1<e$t;e$t--){var e$y=e$Y[e$t];e$y&&e$y.url===e$D&&(e$Y[e$t]=null,e$y.destroy(),e$y.offAll(),this._infoPool.push(e$y))}e$R._resMap[e$D]&&delete e$R._resMap[e$D]},e$m._loadAssets=function(e$D,e$Y,e$E,e$m,e$t,e$y,e$l){null==e$t&&(e$t=2),null==e$y&&(e$y=!0);for(var e$B=e$D.length,e$o=0,e$r=0,e$f=[],e$_=!0,e$i=0;e$i<e$B;e$i++){var e$R=e$D[e$i];if(!e$R)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+e$D);"string"==typeof e$R&&(e$R={url:e$R,type:e$m,size:1,priority:e$t}),e$R.size||(e$R.size=1),e$R.progress=0,e$r+=e$R.size,e$f.push(e$R);var e$G=e$E?e$U.create(null,e$W,[e$R],!1):null,e$I=e$Y||e$E?e$U.create(null,e$w,[e$R]):null;this.load(e$R.url,e$I,e$G,e$R.type,null!=e$R.priority&&0<=e$R.priority?e$R.priority:2,e$y,e$R.group||e$l)}function e$w(e$D,e$m){e$o++,e$D.progress=1,e$m||(e$_=!1),e$o===e$B&&e$Y&&e$Y.runWith(e$_)}function e$W(e$D,e$m){if(null!=e$E){e$D.progress=e$m;for(var e$Y=0,e$t=0;e$t<e$f.length;e$t++){var e$y=e$f[e$t];e$Y+=e$y.size*e$y.progress}var e$l=e$Y/e$r;e$E.runWith(e$l)}}return this},e$R.cacheRes=function(e$D,e$m){e$BD.cacheRes(e$D,e$m)},e$R._resMap={},e$o(e$R,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e$R.__init$=function(){e$i=function(e$D){function e$m(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,e$m.__super.call(this)}return e$f(e$m,"",e$r),e$m.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},e$m}()},e$R}(),e$rD=(function(e$D){function e$y(e$D){e$y.__super.call(this),e$D||(e$D=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var e$m=0,e$Y=0,e$t=0;e$t<20;e$t++)e$t%5!=4?this._mat[e$m++]=e$D[e$t]:this._alpha[e$Y++]=e$D[e$t];this._action=e$s.createFilterAction(32),this._action.data=this}e$f(e$y,"laya.filters.ColorFilter",e$e);var e$m=e$y.prototype;e$z.imps(e$m,{"laya.filters.IFilter":!0}),e$m.callNative=function(e$D){e$D._$P.cf=this;e$D.conchModel&&e$D.conchModel.setFilterMatrix&&e$D.conchModel.setFilterMatrix(this._mat,this._alpha)},e$G(0,e$m,"type",function(){return 32}),e$G(0,e$m,"action",function(){return this._action})}(),function(e$D){function e$t(e$D,e$m,e$Y){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===e$m&&(e$m=0),e$t.__super.call(this),this._byteClass=e$Y||e$L,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,e$D&&0<e$m&&e$m<65535&&this.connect(e$D,e$m)}e$f(e$t,"laya.net.Socket",e$r);var e$m=e$t.prototype;e$m.connect=function(e$D,e$m){var e$Y="ws://"+e$D+":"+e$m;e$Y="https:"==e$u.window.location.protocol?"wss://"+e$D+":"+e$m:"ws://"+e$D+":"+e$m,this.connectByUrl(e$Y)},e$m.connectByUrl=function(e$D){var e$m=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new e$u.window.WebSocket(e$D,this.protocols):this._socket=new e$u.window.WebSocket(e$D),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(e$D){e$m._onOpen(e$D)},this._socket.onmessage=function(e$D){e$m._onMessage(e$D)},this._socket.onclose=function(e$D){e$m._onClose(e$D)},this._socket.onerror=function(e$D){e$m._onError(e$D)}},e$m.cleanSocket=function(){try{this._socket.close()}catch(e$D){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},e$m.close=function(){if(null!=this._socket)try{this._socket.close()}catch(e$D){}},e$m._onOpen=function(e$D){this._connected=!0,this.event("open",e$D)},e$m._onMessage=function(e$D){if(e$D&&e$D.data){var e$m=e$D.data;if(this.disableInput&&e$m)this.event("message",e$m);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var e$Y=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e$m&&("string"==typeof e$m?this._input.writeUTFBytes(e$m):this._input.writeArrayBuffer(e$m),this._addInputPosition=this._input.pos,this._input.pos=e$Y),this.event("message",e$m)}}},e$m._onClose=function(e$D){this._connected=!1,this.event("close",e$D)},e$m._onError=function(e$D){this.event("error",e$D)},e$m.send=function(e$D){this._socket.send(e$D)},e$m.flush=function(){if(this._output&&0<this._output.length){var e$m;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e$D){e$m=e$D}this._output.endian=this.endian,this._output.clear(),e$m&&this.event("error",e$m)}},e$G(0,e$m,"input",function(){return this._input}),e$G(0,e$m,"output",function(){return this._output}),e$G(0,e$m,"connected",function(){return this._connected}),e$G(0,e$m,"endian",function(){return this._endian},function(e$D){this._endian=e$D,null!=this._input&&(this._input.endian=e$D),null!=this._output&&(this._output.endian=e$D)}),e$t.LITTLE_ENDIAN="littleEndian",e$t.BIG_ENDIAN="bigEndian"}(),function(e$D){function e$B(){e$B.__super.call(this),this._$1__id=++e$B._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(e$B._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,e$P.currentResourceManager&&e$P.currentResourceManager.addResource(this)}e$f(e$B,"laya.resource.Resource",e$r);var e$m=e$B.prototype;return e$z.imps(e$m,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),e$m._setUrl=function(e$D){var e$m;this._url!==e$D&&(this._url&&((e$m=e$B._urlResourcesMap[this._url]).splice(e$m.indexOf(this),1),0===e$m.length&&delete e$B._urlResourcesMap[this._url]),e$D&&((e$m=e$B._urlResourcesMap[e$D])||(e$B._urlResourcesMap[e$D]=e$m=[]),e$m.push(this)),this._url=e$D)},e$m._getGroup=function(){return this._group},e$m._setGroup=function(e$D){var e$m;this._group!==e$D&&(this._group&&((e$m=e$B._groupResourcesMap[this._group]).splice(e$m.indexOf(this),1),0===e$m.length&&delete e$B._groupResourcesMap[this._group]),e$D&&((e$m=e$B._groupResourcesMap[e$D])||(e$B._groupResourcesMap[e$D]=e$m=[]),e$m.push(this)),this._group=e$D)},e$m._addReference=function(){this._referenceCount++},e$m._removeReference=function(){this._referenceCount--},e$m._clearReference=function(){this._referenceCount=0},e$m._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},e$m.recreateResource=function(){this.completeCreate()},e$m.disposeResource=function(){},e$m.activeResource=function(e$D){void 0===e$D&&(e$D=!1),this._lastUseFrameCount=e$H.loopCount,!this._destroyed&&this.__loaded&&(this._released||e$D)&&this.recreateResource()},e$m.releaseResource=function(e$D){return void 0===e$D&&(e$D=!0),!(!e$D&&this.lock)&&(!(this._released&&!e$D)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},e$m.onAsynLoaded=function(e$D,e$m,e$Y){throw new Error("Resource: must override this function!")},e$m.destroy=function(){var e$D;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e$B._idResourcesMap[this.id],this._url&&((e$D=e$B._urlResourcesMap[this._url])&&(e$D.splice(e$D.indexOf(this),1),0===e$D.length&&delete e$B._urlResourcesMap[this.url]),e$BD.clearRes(this._url),this.__loaded||e$s.cancelLoadByUrl(this._url)),this._group&&((e$D=e$B._groupResourcesMap[this._group]).splice(e$D.indexOf(this),1),0===e$D.length&&delete e$B._groupResourcesMap[this.url]))},e$m.completeCreate=function(){this._released=!1,this.event("recovered",this)},e$m.dispose=function(){this.destroy()},e$G(0,e$m,"memorySize",function(){return this._memorySize},function(e$D){var e$m=e$D-this._memorySize;this._memorySize=e$D,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,e$m),this.resourceManager&&this.resourceManager.addSize(e$m)}),e$G(0,e$m,"_loaded",null,function(e$D){this.__loaded=e$D}),e$G(0,e$m,"loaded",function(){return this.__loaded}),e$G(0,e$m,"id",function(){return this._$1__id}),e$G(0,e$m,"destroyed",function(){return this._destroyed}),e$G(0,e$m,"group",function(){return this._getGroup()},function(e$D){this._setGroup(e$D)}),e$G(0,e$m,"resourceManager",function(){return this._resourceManager}),e$G(0,e$m,"url",function(){return this._url}),e$G(0,e$m,"released",function(){return this._released}),e$G(0,e$m,"referenceCount",function(){return this._referenceCount}),e$B.getResourceByID=function(e$D){return e$B._idResourcesMap[e$D]},e$B.getResourceByURL=function(e$D,e$m){return void 0===e$m&&(e$m=0),null==e$B._urlResourcesMap[e$D]?null:e$B._urlResourcesMap[e$D][e$m]},e$B.getResourceCountByURL=function(e$D){return e$B._urlResourcesMap[e$D].length},e$B.destroyUnusedResources=function(e$D){var e$m;if(e$D){var e$Y=e$B._groupResourcesMap[e$D];if(e$Y)for(var e$t=e$Y.slice(),e$y=0,e$l=e$t.length;e$y<e$l;e$y++)(e$m=e$t[e$y]).lock||0!==e$m._referenceCount||e$m.destroy()}else for(var e$E in e$B._idResourcesMap)(e$m=e$B._idResourcesMap[e$E]).lock||0!==e$m._referenceCount||e$m.destroy()},e$B._uniqueIDCounter=0,e$B._idResourcesMap={},e$B._urlResourcesMap={},e$B._groupResourcesMap={},e$B}()),e$fD=function(e$D){function e$a(e$D,e$m){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,e$a.__super.call(this),e$D&&null!=e$D._addReference&&e$D._addReference(),this.setTo(e$D,e$m)}e$f(e$a,"laya.resource.Texture",e$r);var e$m=e$a.prototype;return e$m._setUrl=function(e$D){this.url=e$D},e$m.setTo=function(e$D,e$m){if(e$D instanceof e$R.HTMLElement){var e$Y=e$eD.create("2D",e$D);this.bitmap=e$Y}else this.bitmap=e$D;if(this.uv=e$m||e$a.DEF_UV,e$D){this._w=e$D.width,this._h=e$D.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var e$t=this;if(this._loaded)e$s.addToAtlas&&e$s.addToAtlas(e$t);else{var e$y=e$D;e$y instanceof laya.resource.HTMLImage&&e$y.image&&e$y.image.addEventListener("load",function(e$D){e$s.addToAtlas&&e$s.addToAtlas(e$t)},!1)}}},e$m.active=function(){this.bitmap&&this.bitmap.activeResource()},e$m.destroy=function(e$D){if(void 0===e$D&&(e$D=!1),this.alphaTexture&&(this.alphaTexture.destroy(e$D),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var e$m=this.bitmap;e$D?(e$C.isConchApp&&e$m.source&&e$m.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e$m.dispose(),e$m._clearReference()):(e$m._removeReference(),0==e$m.referenceCount&&(e$C.isConchApp&&e$m.source&&e$m.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e$m.dispose())),this.url&&this===e$z.loader.getRes(this.url)&&e$z.loader.clearRes(this.url,e$D),this._loaded=!1}},e$m.load=function(e$D){var e$m=this;this._loaded=!1,e$D=e$N.customFormat(e$D);var e$Y=this.bitmap||(this.bitmap=e$SD.create(e$D));e$Y.uri=e$D,e$Y&&e$Y._addReference();var e$t=this;e$Y.onload=function(){e$Y.onload=null,e$t._loaded=!0,e$m.sourceWidth=e$m._w=e$Y.width,e$m.sourceHeight=e$m._h=e$Y.height,e$t.event("loaded",this),e$s.addToAtlas&&e$s.addToAtlas(e$t)}},e$m.addTextureToAtlas=function(e$D){e$s.addTextureToAtlas(this)},e$m.getPixels=function(e$D,e$m,e$Y,e$t){if(e$C.isConchApp){var e$y=this.bitmap;if(e$y.source&&e$y.source.getImageData){var e$l=e$y.source.getImageData(e$D,e$m,e$Y,e$t),e$E=new Uint8Array(e$l);return Array.from(e$E)}return null}return e$C.isWebGL?e$s.getTexturePixels(this,e$D,e$m,e$Y,e$t):(e$u.canvas.size(e$Y,e$t),e$u.canvas.clear(),e$u.context.drawTexture(this,-e$D,-e$m,this.width,this.height,0,0),e$u.context.getImageData(0,0,e$Y,e$t).data)},e$m.onAsynLoaded=function(e$D,e$m){if(e$m){if("function"!=typeof e$m._addReference)throw new Error("bitmap._addReference is not a function. "+e$m.className+" "+typeof e$m._addReference+" "+e$m.constructor);e$m._addReference()}this.setTo(e$m,this.uv),this._loaded&&this.event("loaded",this)},e$G(0,e$m,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),e$G(0,e$m,"loaded",function(){return this._loaded}),e$G(0,e$m,"released",function(){return!this.bitmap||this.bitmap.released}),e$G(0,e$m,"width",function(){return this._w?this._w:this.uv&&this.uv!==e$a.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(e$D){this._w=e$D,this.sourceWidth||(this.sourceWidth=e$D)}),e$G(0,e$m,"repeat",function(){return!e$C.isWebGL||!this.bitmap||this.bitmap.repeat},function(e$D){e$D&&e$C.isWebGL&&this.bitmap&&(this.bitmap.repeat=e$D)&&(this.bitmap.enableMerageInAtlas=!1)}),e$G(0,e$m,"height",function(){return this._h?this._h:this.uv&&this.uv!==e$a.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(e$D){this._h=e$D,this.sourceHeight||(this.sourceHeight=e$D)}),e$G(0,e$m,"isLinearSampling",function(){return!e$C.isWebGL||9728!=this.bitmap.minFifter},function(e$D){!e$D&&e$C.isWebGL&&(e$D||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),e$a.moveUV=function(e$D,e$m,e$Y){for(var e$t=0;e$t<8;e$t+=2)e$Y[e$t]+=e$D,e$Y[e$t+1]+=e$m;return e$Y},e$a.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){void 0===e$l&&(e$l=0),void 0===e$E&&(e$E=0),void 0===e$B&&(e$B=0),void 0===e$o&&(e$o=0);var e$r=e$D instanceof laya.resource.Texture,e$f=e$r?e$D.uv:e$a.DEF_UV,e$_=e$r?e$D.bitmap:e$D,e$i=e$s.isAtlas(e$_);if(e$i){var e$R=e$_._atlaser,e$G=e$D._atlasID;if(-1==e$G)throw new Error("create texture error");e$_=e$R._inAtlasTextureBitmapValue[e$G],e$f=e$R._inAtlasTextureOriUVValue[e$G]}var e$I=new e$a(e$_,null);if(!e$_)return null;e$_.width&&e$m+e$t>e$_.width&&(e$t=e$_.width-e$m),e$_.height&&e$Y+e$y>e$_.height&&(e$y=e$_.height-e$Y),e$I.width=e$t,e$I.height=e$y,e$I.offsetX=e$l,e$I.offsetY=e$E,e$I.sourceWidth=e$B||e$t,e$I.sourceHeight=e$o||e$y;var e$w=1/e$_.width,e$W=1/e$_.height;e$m*=e$w,e$Y*=e$W,e$t*=e$w,e$y*=e$W;var e$U=e$I.uv[0],e$e=e$I.uv[1],e$v=e$I.uv[4],e$c=e$I.uv[5],e$S=e$v-e$U,e$z=e$c-e$e,e$A=e$a.moveUV(e$f[0],e$f[1],[e$m,e$Y,e$m+e$t,e$Y,e$m+e$t,e$Y+e$y,e$m,e$Y+e$y]);e$I.uv=[e$U+e$A[0]*e$S,e$e+e$A[1]*e$z,e$v-(1-e$A[2])*e$S,e$e+e$A[3]*e$z,e$v-(1-e$A[4])*e$S,e$c-(1-e$A[5])*e$z,e$U+e$A[6]*e$S,e$c-(1-e$A[7])*e$z],e$i&&e$I.addTextureToAtlas();var e$J=e$_.scaleRate;return e$J&&1!=e$J?(e$I.sourceWidth/=e$J,e$I.sourceHeight/=e$J,e$I.width/=e$J,e$I.height/=e$J,e$I.scaleRate=e$J,e$I.offsetX/=e$J,e$I.offsetY/=e$J):e$I.scaleRate=1,e$I},e$a.createFromTexture=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.scaleRate;1!=e$l&&(e$m*=e$l,e$Y*=e$l,e$t*=e$l,e$y*=e$l);var e$E=e$J.TEMP.setTo(e$m-e$D.offsetX,e$Y-e$D.offsetY,e$t,e$y),e$B=e$E.intersection(e$a._rect1.setTo(0,0,e$D.width,e$D.height),e$a._rect2);if(!e$B)return null;var e$o=e$a.create(e$D,e$B.x,e$B.y,e$B.width,e$B.height,e$B.x-e$E.x,e$B.y-e$E.y,e$t,e$y);if(e$o.bitmap&&e$o.bitmap._removeReference)return e$o.bitmap._removeReference(),e$o;var e$r="bitmap:"+(e$o.bitmap?e$o.bitmap.constructor?e$o.bitmap.constructor.name:e$o.bitmap.__className:"")+", url:"+(e$D.url+" | "+(e$o.bitmap?e$o.bitmap.url:e$D.url))+", x="+e$m+",y="+e$Y+",width="+e$t+",height="+e$y+", result="+(e$B?e$B.x+","+e$B.y+","+e$B.width+","+e$B.height:"null")+", rect="+e$E.x+","+e$E.y+","+e$E.width+","+e$E.height;throw new Error("报错：bitmap._removeReference is not a function  "+e$r)},e$a.DEF_UV=[0,0,1,0,1,1,0,1],e$a.INV_UV=[0,1,1,1,1,0,0,0],e$a._rect1=new e$J,e$a._rect2=new e$J,e$a}(),e$D=function(e$D){var e$B;function e$l(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,e$l.__super.call(this)}e$f(e$l,"laya.utils.TimeLine",e$r);var e$m=e$l.prototype;return e$m.to=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=0),this._create(e$D,e$m,e$Y,e$t,e$y,!0)},e$m.from=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=0),this._create(e$D,e$m,e$Y,e$t,e$y,!1)},e$m._create=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$g.getItemByClass("tweenData",e$B);return e$E.isTo=e$l,e$E.type=0,e$E.target=e$D,e$E.duration=e$Y,e$E.data=e$m,e$E.startTime=this._startTime+e$y,e$E.endTime=e$E.startTime+e$E.duration,e$E.ease=e$t,this._startTime=Math.max(e$E.endTime,this._startTime),this._tweenDataList.push(e$E),this._startTimeSort=!0,this._endTimeSort=!0,this},e$m.addLabel=function(e$D,e$m){var e$Y=e$g.getItemByClass("tweenData",e$B);return e$Y.type=1,e$Y.data=e$D,e$Y.endTime=e$Y.startTime=this._startTime+e$m,this._labelDic||(this._labelDic={}),this._labelDic[e$D]=e$Y,this._tweenDataList.push(e$Y),this},e$m.removeLabel=function(e$D){if(this._labelDic&&this._labelDic[e$D]){var e$m=this._labelDic[e$D];if(e$m){var e$Y=this._tweenDataList.indexOf(e$m);-1<e$Y&&this._tweenDataList.splice(e$Y,1)}delete this._labelDic[e$D]}},e$m.gotoTime=function(e$D){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var e$m,e$Y,e$t,e$y;for(var e$l in this._firstTweenDic)if(e$Y=this._firstTweenDic[e$l])for(var e$E in e$Y)e$Y.diyTarget.hasOwnProperty(e$E)&&(e$Y.diyTarget[e$E]=e$Y[e$E]);for(e$l in this._tweenDic)(e$m=this._tweenDic[e$l]).clear(),delete this._tweenDic[e$l];if(this._index=0,this._gidIndex=0,this._currTime=e$D,this._lastTime=e$u.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=e$t=this._tweenDataList.concat(),e$t.sort(function(e$D,e$m){return e$D.endTime>e$m.endTime?1:e$D.endTime<e$m.endTime?-1:0})}else e$t=this._endTweenDataList;for(var e$B=0,e$o=e$t.length;e$B<e$o;e$B++)if(0==(e$y=e$t[e$B]).type){if(!(e$D>=e$y.endTime))break;this._index=Math.max(this._index,e$B+1);var e$r=e$y.data;if(e$y.isTo)for(var e$f in e$r)e$y.target[e$f]=e$r[e$f]}for(e$B=0,e$o=this._tweenDataList.length;e$B<e$o;e$B++)0==(e$y=this._tweenDataList[e$B]).type&&e$D>=e$y.startTime&&e$D<e$y.endTime&&(this._index=Math.max(this._index,e$B+1),this._gidIndex++,(e$m=e$g.getItemByClass("tween",e$V))._create(e$y.target,e$y.data,e$y.duration,e$y.ease,e$U.create(this,this._animComplete,[this._gidIndex]),0,!1,e$y.isTo,!0,!1),e$m.setStartTime(this._currTime-(e$D-e$y.startTime)),e$m._updateEase(this._currTime),e$m.gid=this._gidIndex,this._tweenDic[this._gidIndex]=e$m)}},e$m.gotoLabel=function(e$D){if(null!=this._labelDic){var e$m=this._labelDic[e$D];e$m&&this.gotoTime(e$m.startTime)}},e$m.pause=function(){e$z.timer.clear(this,this._update)},e$m.resume=function(){this.play(this._currTime,this._loopKey)},e$m.play=function(e$D,e$m){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(e$D,e$m){return e$D.startTime>e$m.startTime?1:e$D.startTime<e$m.startTime?-1:0});for(var e$Y=0,e$t=this._tweenDataList.length;e$Y<e$t;e$Y++){var e$y=this._tweenDataList[e$Y];if(null!=e$y&&0==e$y.type){var e$l=e$y.target,e$E=e$l.$_GID||(e$l.$_GID=e$Z.getGID()),e$B=null;for(var e$o in null==this._firstTweenDic[e$E]?((e$B={}).diyTarget=e$l,this._firstTweenDic[e$E]=e$B):e$B=this._firstTweenDic[e$E],e$y.data)null==e$B[e$o]&&(e$B[e$o]=e$l[e$o])}}}"string"==typeof e$D?this.gotoLabel(e$D):this.gotoTime(e$D),this._loopKey=e$m,this._lastTime=e$u.now(),e$z.timer.frameLoop(1,this,this._update)}},e$m._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var e$D in this._tweenDic)(e$m=this._tweenDic[e$D]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var e$m,e$Y=e$u.now(),e$t=e$Y-this._lastTime,e$y=this._currTime+=e$t*this.scale;for(e$D in this._lastTime=e$Y,this._tweenDic)(e$m=this._tweenDic[e$D])._updateEase(e$y);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var e$l=this._tweenDataList[this._index];e$y>=e$l.startTime&&(this._index++,0==e$l.type?(this._gidIndex++,(e$m=e$g.getItemByClass("tween",e$V))._create(e$l.target,e$l.data,e$l.duration,e$l.ease,e$U.create(this,this._animComplete,[this._gidIndex]),0,!1,e$l.isTo,!0,!1),e$m.setStartTime(e$y),e$m.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=e$m)._updateEase(e$y)):this.event("label",e$l.data))}},e$m._animComplete=function(e$D){this._tweenDic[e$D]&&delete this._tweenDic[e$D]},e$m._complete=function(){this.event("complete")},e$m.reset=function(){var e$D;if(this._labelDic)for(e$D in this._labelDic)delete this._labelDic[e$D];for(e$D in this._tweenDic)this._tweenDic[e$D].clear(),delete this._tweenDic[e$D];for(e$D in this._firstTweenDic)delete this._firstTweenDic[e$D];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var e$m,e$Y=0;for(e$m=this._tweenDataList.length,e$Y=0;e$Y<e$m;e$Y++)this._tweenDataList[e$Y]&&this._tweenDataList[e$Y].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,e$z.timer.clear(this,this._update)},e$m.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},e$G(0,e$m,"index",function(){return this._frameIndex},function(e$D){this._frameIndex=e$D,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),e$G(0,e$m,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),e$l.to=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=0),(new e$l).to(e$D,e$m,e$Y,e$t,e$y)},e$l.from=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$y&&(e$y=0),(new e$l).from(e$D,e$m,e$Y,e$t,e$y)},e$l.__init$=function(){e$B=function(){function e$D(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return e$f(e$D,""),e$D.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,e$g.recover("tweenData",this)},e$D}()},e$l}(),e$_D=function(e$y){function e$Y(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,e$Y.__super.call(this),this._style=e$B.EMPTY}e$f(e$Y,"laya.display.Sprite",e$y);var e$D=e$Y.prototype;return e$z.imps(e$D,{"laya.display.ILayout":!0}),e$D.createConchModel=function(){return new ConchNode},e$D.destroy=function(e$D){if(void 0===e$D&&(e$D=!0),this._releaseMem(),!this._destroyed){this.filters=null;var e$m=this.mask;e$m&&(this.mask=null,e$m.destroy(e$D))}e$y.prototype.destroy.call(this,e$D),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},e$D.updateZOrder=function(){e$Z.updateOrder(this._childs)&&this.repaint()},e$D.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},e$D.setBounds=function(e$D){this._set$P("uBounds",e$D)},e$D.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new e$J),e$J._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},e$D.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new e$J),e$J._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},e$D._boundPointsToParent=function(e$D){void 0===e$D&&(e$D=!1);var e$m=0,e$Y=0;this._style&&(e$m=this._style._tf.translateX,e$Y=this._style._tf.translateY,e$D=e$D||0!==this._style._tf.rotate,this._style.scrollRect&&(e$m+=this._style.scrollRect.x,e$Y+=this._style.scrollRect.y));var e$t=this._getBoundPointsM(e$D);if(!e$t||e$t.length<1)return e$t;if(8!=e$t.length&&(e$t=e$D?e$c.scanPList(e$t):e$J._getWrapRec(e$t,e$J.TEMP)._getBoundPoints()),!this.transform)return e$Z.transPointList(e$t,this._x-e$m,this._y-e$Y),e$t;var e$y=e$A.TEMP,e$l=0,e$E=e$t.length;for(e$l=0;e$l<e$E;e$l+=2)e$y.x=e$t[e$l],e$y.y=e$t[e$l+1],this.toParentPoint(e$y),e$t[e$l]=e$y.x,e$t[e$l+1]=e$y.y;return e$t},e$D.getGraphicBounds=function(e$D){return void 0===e$D&&(e$D=!1),this._graphics?this._graphics.getBounds(e$D):e$J.TEMP.setTo(0,0,0,0)},e$D._getBoundPointsM=function(e$D){if(void 0===e$D&&(e$D=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e$m=e$Z.clearArray(this._$P.temBM),e$Y=e$J.TEMP;return e$Y.copyFrom(this.scrollRect),e$Z.concatArray(e$m,e$Y._getBoundPoints()),e$m}for(var e$t,e$y,e$l,e$E=this._graphics?this._graphics.getBoundPoints():e$Z.clearArray(this._$P.temBM),e$B=0,e$o=(e$l=this._childs).length;e$B<e$o;e$B++)(e$t=e$l[e$B])instanceof laya.display.Sprite&&1==e$t.visible&&(e$y=e$t._boundPointsToParent(e$D))&&(e$E=e$E?e$Z.concatArray(e$E,e$y):e$y);return e$E},e$D.getStyle=function(){return this._style===e$B.EMPTY&&(this._style=new e$B),this._style},e$D.setStyle=function(e$D){this._style=e$D},e$D._adjustTransform=function(){this._tfChanged=!1;var e$D,e$m=this._style._tf,e$Y=e$m.scaleX,e$t=e$m.scaleY;if(e$m.rotate||1!==e$Y||1!==e$t||e$m.skewX||e$m.skewY){(e$D=this._transform||(this._transform=e$Q.create())).bTransform=!0;var e$y=.0174532922222222*(e$m.rotate-e$m.skewX),e$l=.0174532922222222*(e$m.rotate+e$m.skewY),e$E=Math.cos(e$l),e$B=Math.sin(e$l),e$o=Math.sin(e$y),e$r=Math.cos(e$y);return e$D.a=e$Y*e$E,e$D.b=e$Y*e$B,e$D.c=-e$t*e$o,e$D.d=e$t*e$r,e$D.tx=e$D.ty=0,e$D}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,e$D},e$D.pos=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=!1),this._x!==e$D||this._y!==e$m){if(this.destroyed)return this;if(e$Y){this._x=e$D,this._y=e$m,this.conchModel&&this.conchModel.pos(this._x,this._y);var e$t=this._parent;e$t&&0===e$t._repaint&&(e$t._repaint=1,e$t.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=e$D,this.y=e$m}return this},e$D.pivot=function(e$D,e$m){return this.pivotX=e$D,this.pivotY=e$m,this},e$D.size=function(e$D,e$m){return this.width=e$D,this.height=e$m,this},e$D.scale=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=!1);var e$t=this.getStyle(),e$y=e$t._tf;if(e$y.scaleX!=e$D||e$y.scaleY!=e$m){if(this.destroyed)return this;if(e$Y){e$t.setScale(e$D,e$m),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$D,e$m),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}else this.scaleX=e$D,this.scaleY=e$m}return this},e$D.skew=function(e$D,e$m){return this.skewX=e$D,this.skewY=e$m,this},e$D.render=function(e$D,e$m,e$Y){e$H.spriteCount++,e$h.renders[this._renderType]._fun(this,e$D,e$m+this._x,e$Y+this._y),this._repaint=0},e$D.drawToCanvas=function(e$D,e$m,e$Y,e$t){if(e$C.isConchNode){var e$y=e$eD.create("2D");return new e$O(e$D,e$m,e$y).ctx.setCanvasType(1),this.conchModel.drawToCanvas(e$y.source,e$Y,e$t),e$y}return e$s.drawToCanvas(this,this._renderType,e$D,e$m,e$Y,e$t)},e$D.customRender=function(e$D,e$m,e$Y){this._renderType|=1024},e$D._applyFilters=function(){var e$D;if(!e$C.isWebGL&&((e$D=this._$P.filters)&&!(e$D.length<1)))for(var e$m=0,e$Y=e$D.length;e$m<e$Y;e$m++)e$D[e$m].action.apply(this._$P.cacheCanvas)},e$D._isHaveGlowFilter=function(){var e$D,e$m=0;if(this.filters)for(e$m=0;e$m<this.filters.length;e$m++)if(8==this.filters[e$m].type)return!0;for(e$m=0,e$D=this._childs.length;e$m<e$D;e$m++)if(this._childs[e$m]._isHaveGlowFilter())return!0;return!1},e$D.localToGlobal=function(e$D,e$m){void 0===e$m&&(e$m=!1),!0===e$m&&(e$D=new e$A(e$D.x,e$D.y));for(var e$Y=this;e$Y&&e$Y!=e$z.stage;)e$D=e$Y.toParentPoint(e$D),e$Y=e$Y.parent;return e$D},e$D.globalToLocal=function(e$D,e$m){void 0===e$m&&(e$m=!1),e$m&&(e$D=new e$A(e$D.x,e$D.y));for(var e$Y=this,e$t=[];e$Y&&e$Y!=e$z.stage;)e$t.push(e$Y),e$Y=e$Y.parent;for(var e$y=e$t.length-1;0<=e$y;)e$D=(e$Y=e$t[e$y]).fromParentPoint(e$D),e$y--;return e$D},e$D.toParentPoint=function(e$D){if(!e$D)return e$D;e$D.x-=this.pivotX,e$D.y-=this.pivotY,this.transform&&this._transform.transformPoint(e$D),e$D.x+=this._x,e$D.y+=this._y;var e$m=this._style.scrollRect;return e$m&&(e$D.x-=e$m.x,e$D.y-=e$m.y),e$D},e$D.fromParentPoint=function(e$D){if(!e$D)return e$D;e$D.x-=this._x,e$D.y-=this._y;var e$m=this._style.scrollRect;return e$m&&(e$D.x+=e$m.x,e$D.y+=e$m.y),this.transform&&this._transform.invertTransformPoint(e$D),e$D.x+=this.pivotX,e$D.y+=this.pivotY,e$D},e$D.on=function(e$D,e$m,e$Y,e$t){return 1!==this._mouseEnableState&&this.isMouseEvent(e$D)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e$D,e$m,e$Y,e$t,!1)):e$y.prototype.on.call(this,e$D,e$m,e$Y,e$t)},e$D.once=function(e$D,e$m,e$Y,e$t){return 1!==this._mouseEnableState&&this.isMouseEvent(e$D)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e$D,e$m,e$Y,e$t,!0)):e$y.prototype.once.call(this,e$D,e$m,e$Y,e$t)},e$D._$2__onDisplay=function(){if(1!==this._mouseEnableState){var e$D=this;for(e$D=e$D.parent;e$D&&1!==e$D._mouseEnableState&&!e$D._getBit(2);)e$D.mouseEnabled=!0,e$D._setBit(2,!0),e$D=e$D.parent}},e$D.loadImage=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=this;return void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),this.graphics.loadImage(e$D,e$m,e$Y,e$t,e$y,function(e$D){e$E.destroyed||(e$E.size(e$m+(e$t||e$D.width),e$Y+(e$y||e$D.height)),e$E.repaint(),e$l&&e$l.runWith(e$D))}),this},e$D.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},e$D._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},e$D._childChanged=function(e$D){this._childs.length?this._renderType|=2048:this._renderType&=-2049,e$D&&this._get$P("hasZorder")&&e$z.timer.callLater(this,this.updateZOrder),this.repaint()},e$D.parentRepaint=function(){var e$D=this._parent;e$D&&0===e$D._repaint&&(e$D._repaint=1,e$D.parentRepaint())},e$D.startDrag=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){void 0===e$m&&(e$m=!1),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=300),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=.92),this._$P.dragging||this._set$P("dragging",new e$k),this._$P.dragging.start(this,e$D,e$m,e$Y,e$t,e$y,e$l,e$E)},e$D.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},e$D._releaseMem=function(){if(this._$P){var e$D=this._$P.cacheCanvas;e$D&&e$D.ctx&&(e$g.recover("RenderContext",e$D.ctx),e$D.ctx.canvas.size(0,0),e$D.ctx=null);var e$m=this._$P._filterCache;e$m&&(e$m.destroy(),e$m.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},e$D._setDisplay=function(e$D){e$D||this._releaseMem(),e$y.prototype._setDisplay.call(this,e$D)},e$D.hitTestPoint=function(e$D,e$m){var e$Y=this.globalToLocal(e$A.TEMP.setTo(e$D,e$m));return e$D=e$Y.x,e$m=e$Y.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?e$J.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(e$D,e$m)},e$D.getMousePoint=function(){return this.globalToLocal(e$A.TEMP.setTo(e$z.stage.mouseX,e$z.stage.mouseY))},e$D._getWords=function(){return null},e$D._addChildsToLayout=function(e$D){var e$m=this._getWords();if(null==e$m&&0==this._childs.length)return!1;if(e$m)for(var e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)e$D.push(e$m[e$Y]);e$Y=0;for(var e$y=this._childs.length;e$Y<e$y;++e$Y){var e$l=this._childs[e$Y];e$l._style._enableLayout()&&e$l._addToLayout(e$D)}return!0},e$D._addToLayout=function(e$D){this._style.absolute||(this._style.block?e$D.push(this):this._addChildsToLayout(e$D)&&(this.x=this.y=0))},e$D._isChar=function(){return!1},e$D._getCSSStyle=function(){return this._style.getCSSStyle()},e$D._setAttributes=function(e$D,e$m){switch(e$D){case"x":this.x=parseFloat(e$m);break;case"y":this.y=parseFloat(e$m);break;case"width":this.width=parseFloat(e$m);break;case"height":this.height=parseFloat(e$m);break;default:this[e$D]=e$m}},e$D._layoutLater=function(){this.parent&&this.parent._layoutLater()},e$G(0,e$D,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(e$D){this._optimizeScrollRect!=e$D&&(this._optimizeScrollRect=e$D,this.conchModel&&this.conchModel.optimizeScrollRect(e$D))}),e$G(0,e$D,"customRenderEnable",null,function(e$D){if(e$D&&(this._renderType|=1024,e$C.isConchNode)){e$Y.CustomList.push(this);var e$m=new e$eD("2d");e$m._setContext(new CanvasRenderingContext2D),this.customContext=new e$O(0,0,e$m),e$m.context.setCanvasType&&e$m.context.setCanvasType(2),this.conchModel.custom(e$m.context)}}),e$G(0,e$D,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(e$D){this.cacheAs=e$D?this._$P.hasFilter?"none":"normal":"none"}),e$G(0,e$D,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(e$D){var e$m=this._$P.cacheCanvas;if(e$D!==(e$m?e$m.type:"none")){if("none"!==e$D)this._getBit(1)||this._setUpNoticeType(1),e$m||(e$m=this._set$P("cacheCanvas",e$g.getItemByClass("cacheCanvas",Object))),e$m.type=e$D,e$m.reCache=!0,this._renderType|=16,"bitmap"==e$D&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e$m){var e$Y=e$m;e$Y&&e$Y.ctx&&(e$g.recover("RenderContext",e$Y.ctx),e$Y.ctx.canvas.size(0,0),e$Y.ctx=null),e$g.recover("cacheCanvas",e$m)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),e$G(0,e$D,"zOrder",function(){return this._zOrder},function(e$D){this._zOrder!=e$D&&(this._zOrder=e$D,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(e$D),this._parent&&(e$D&&this._parent._set$P("hasZorder",!0),e$z.timer.callLater(this._parent,this.updateZOrder)))}),e$G(0,e$D,"rotation",function(){return this._style._tf.rotate},function(e$D){var e$m=this.getStyle();if(e$m._tf.rotate!==e$D){e$m.setRotate(e$D),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(e$D),this._renderType|=4;var e$Y=this._parent;e$Y&&0===e$Y._repaint&&(e$Y._repaint=1,e$Y.parentRepaint())}}),e$G(0,e$D,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(e$D){this._width!==e$D&&(this._width=e$D,this.conchModel&&this.conchModel.size(e$D,this._height),this.repaint())}),e$G(0,e$D,"x",function(){return this._x},function(e$D){if(this._x!==e$D){if(this.destroyed)return;this._x=e$D,this.conchModel&&this.conchModel.pos(e$D,this._y);var e$m=this._parent;e$m&&0===e$m._repaint&&(e$m._repaint=1,e$m.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),e$G(0,e$D,"globalScaleY",function(){for(var e$D=1,e$m=this;e$m&&e$m!==e$z.stage;)e$D*=e$m.scaleY,e$m=e$m.parent;return e$D}),e$G(0,e$D,"hitArea",function(){return this._$P.hitArea},function(e$D){this._set$P("hitArea",e$D)}),e$G(0,e$D,"staticCache",function(){return this._$P.staticCache},function(e$D){this._set$P("staticCache",e$D),e$D||this.reCache()}),e$G(0,e$D,"texture",function(){return this._texture},function(e$D){this._texture!=e$D&&(this._texture=e$D,this.graphics.cleanByTexture(e$D,0,0))}),e$G(0,e$D,"y",function(){return this._y},function(e$D){if(this._y!==e$D){if(this.destroyed)return;this._y=e$D,this.conchModel&&this.conchModel.pos(this._x,e$D);var e$m=this._parent;e$m&&0===e$m._repaint&&(e$m._repaint=1,e$m.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),e$G(0,e$D,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(e$D){this._height!==e$D&&(this._height=e$D,this.conchModel&&this.conchModel.size(this._width,e$D),this.repaint())}),e$G(0,e$D,"blendMode",function(){return this._style.blendMode},function(e$D){this.getStyle().blendMode=e$D,this.conchModel&&this.conchModel.blendMode(e$D),e$D&&"source-over"!=e$D?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),e$G(0,e$D,"scaleX",function(){return this._style._tf.scaleX},function(e$D){var e$m=this.getStyle();if(e$m._tf.scaleX!==e$D){e$m.setScaleX(e$D),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$D,e$m._tf.scaleY),this._renderType|=4;var e$Y=this._parent;e$Y&&0===e$Y._repaint&&(e$Y._repaint=1,e$Y.parentRepaint())}}),e$G(0,e$D,"scaleY",function(){return this._style._tf.scaleY},function(e$D){var e$m=this.getStyle();if(e$m._tf.scaleY!==e$D){e$m.setScaleY(e$D),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$m._tf.scaleX,e$D),this._renderType|=4;var e$Y=this._parent;e$Y&&0===e$Y._repaint&&(e$Y._repaint=1,e$Y.parentRepaint())}}),e$G(0,e$D,"stage",function(){return e$z.stage}),e$G(0,e$D,"skewX",function(){return this._style._tf.skewX},function(e$D){var e$m=this.getStyle();if(e$m._tf.skewX!==e$D){e$m.setSkewX(e$D),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e$D,e$m._tf.skewY),this._renderType|=4;var e$Y=this._parent;e$Y&&0===e$Y._repaint&&(e$Y._repaint=1,e$Y.parentRepaint())}}),e$G(0,e$D,"scrollRect",function(){return this._style.scrollRect},function(e$D){this.getStyle().scrollRect=e$D,this.repaint(),e$D?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(e$D.x,e$D.y,e$D.width,e$D.height)):(this._renderType&=-129,this.conchModel&&(e$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),e$G(0,e$D,"skewY",function(){return this._style._tf.skewY},function(e$D){var e$m=this.getStyle();if(e$m._tf.skewY!==e$D){e$m.setSkewY(e$D),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e$m._tf.skewX,e$D),this._renderType|=4;var e$Y=this._parent;e$Y&&0===e$Y._repaint&&(e$Y._repaint=1,e$Y.parentRepaint())}}),e$G(0,e$D,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(e$D){this._tfChanged=!1,(this._transform=e$D)&&(this._x=e$D.tx,this._y=e$D.ty,e$D.tx=e$D.ty=0,this.conchModel&&this.conchModel.transform(e$D.a,e$D.b,e$D.c,e$D.d,this._x,this._y)),e$D?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),e$G(0,e$D,"pivotX",function(){return this._style._tf.translateX},function(e$D){this.getStyle().setTranslateX(e$D),this.conchModel&&this.conchModel.pivot(e$D,this._style._tf.translateY),this.repaint()}),e$G(0,e$D,"pivotY",function(){return this._style._tf.translateY},function(e$D){this.getStyle().setTranslateY(e$D),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,e$D),this.repaint()}),e$G(0,e$D,"alpha",function(){return this._style.alpha},function(e$D){this._style&&this._style.alpha!==e$D&&(e$D=e$D<0?0:1<e$D?1:e$D,this.getStyle().alpha=e$D,this.conchModel&&this.conchModel.alpha(e$D),1!==e$D?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),e$G(0,e$D,"visible",function(){return this._style.visible},function(e$D){this._style&&this._style.visible!==e$D&&(this.getStyle().visible=e$D,this.conchModel&&this.conchModel.visible(e$D),this.parentRepaint())}),e$G(0,e$D,"graphics",function(){return this._graphics||(this.graphics=e$s.createGraphics())},function(e$D){this._graphics&&(this._graphics._sp=null),(this._graphics=e$D)?(this._renderType&=-2,this._renderType|=512,(e$D._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(e$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),e$G(0,e$D,"filters",function(){return this._$P.filters},function(e$D){e$D&&0===e$D.length&&(e$D=null),this._$P.filters!=e$D&&(this._set$P("filters",e$D?e$D.slice():null),e$C.isConchApp&&(this.conchModel&&(e$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),e$C.isWebGL&&(e$D&&e$D.length?this._renderType|=32:this._renderType&=-33),e$D&&0<e$D.length?(this._getBit(1)||this._setUpNoticeType(1),e$C.isWebGL&&1==e$D.length&&e$D[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(e$C.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),e$G(0,e$D,"parent",e$y.prototype._$get_parent,function(e$D){e$z.superSet(e$DD,this,"parent",e$D),e$D&&this._getBit(2)&&this._$2__onDisplay()}),e$G(0,e$D,"mask",function(){return this._$P._mask},function(e$D){e$D&&this.mask&&this.mask._$P.maskParent||(e$D?(this.cacheAs="bitmap",this._set$P("_mask",e$D),e$D._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",e$D),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(e$D?e$D.conchModel:null),this._renderType|=64,this.parentRepaint())}),e$G(0,e$D,"mouseEnabled",function(){return 1<this._mouseEnableState},function(e$D){this._mouseEnableState=e$D?2:1}),e$G(0,e$D,"globalScaleX",function(){for(var e$D=1,e$m=this;e$m&&e$m!==e$z.stage;)e$D*=e$m.scaleX,e$m=e$m.parent;return e$D}),e$G(0,e$D,"mouseX",function(){return this.getMousePoint().x}),e$G(0,e$D,"mouseY",function(){return this.getMousePoint().y}),e$Y.fromImage=function(e$D){return(new e$Y).loadImage(e$D)},e$Y._cachePool=[],e$Y.CustomList=[],e$o(e$Y,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=e$R.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),e$Y}(e$DD),e$iD=function(e$D){function e$m(e$D){this._audio=null,this._onEnd=null,this._resumePlay=null,e$m.__super.call(this),this._onEnd=e$Z.bind(this.__onEnd,this),this._resumePlay=e$Z.bind(this.__resumePlay,this),e$D.addEventListener("ended",this._onEnd),this._audio=e$D}e$f(e$m,"laya.media.h5audio.AudioSoundChannel",e$tD);var e$Y=e$m.prototype;return e$Y.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(e$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},e$Y.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,e$u.container.appendChild(this._audio),this._audio.play()}catch(e$D){this.event("error")}},e$Y.play=function(e$D){this.isStopped=!1;try{this._audio.playbackRate=e$F.playbackRate,this._audio.currentTime=this.startTime}catch(e$D){return void this._audio.addEventListener("canplay",this._resumePlay)}e$F.addChannel(this),e$u.container.appendChild(this._audio),!e$D&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},e$Y.stop=function(){this.isStopped=!0,e$F.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&e$C.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),e$u.onIE||this._audio!=e$YD._musicAudio&&e$g.recover("audio:"+this.url,this._audio),e$u.removeElement(this._audio),this._audio=null)},e$Y.pause=function(){this.isStopped=!0,e$F.removeChannel(this),"pause"in this._audio&&this._audio.pause()},e$Y.resume=function(){this._audio&&(this.isStopped=!1,e$F.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},e$G(0,e$Y,"position",function(){return this._audio?this._audio.currentTime:0}),e$G(0,e$Y,"duration",function(){return this._audio?this._audio.duration:0}),e$G(0,e$Y,"volume",function(){return this._audio?this._audio.volume:1},function(e$D){this._audio&&(this._audio.volume=e$D)}),e$m}(),e$RD=function(e$D){function e$m(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=e$lD.ctx,e$m.__super.call(this),this._onPlayEnd=e$Z.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}e$f(e$m,"laya.media.webaudio.WebAudioSoundChannel",e$tD);var e$Y=e$m.prototype;return e$Y.play=function(e$D){if(e$F.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var e$m=this.context,e$Y=this.gain,e$t=e$m.createBufferSource();(this.bufferSource=e$t).buffer=this.audioBuffer,e$t.connect(e$Y),e$Y&&e$Y.disconnect(),e$Y.connect(e$m.destination),e$t.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=e$u.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(e$t.loop=!0),e$t.playbackRate.setTargetAtTime?e$t.playbackRate.setTargetAtTime(e$F.playbackRate,this.context.currentTime,.1):e$t.playbackRate.value=e$F.playbackRate,e$t.start(0,this.startTime),!e$D&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},e$Y.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(e$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},e$Y._clearBufferSource=function(){if(this.bufferSource){var e$D=this.bufferSource;e$D.stop?e$D.stop(0):e$D.noteOff(0),e$D.disconnect(0),e$D.onended=null,e$m._tryCleanFailed||this._tryClearBuffer(e$D),this.bufferSource=null}},e$Y._tryClearBuffer=function(e$D){try{e$D.buffer=null}catch(e$D){e$m._tryCleanFailed=!0}},e$Y.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,e$F.removeChannel(this),this.startHandler=null,this.completeHandler=null},e$Y.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,e$F.removeChannel(this)},e$Y.resume=function(){this.startTime=this._pauseTime,this.play(!1)},e$G(0,e$Y,"position",function(){return this.bufferSource?(e$u.now()-this._startTime)/1e3+this.startTime:0}),e$G(0,e$Y,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e$G(0,e$Y,"volume",function(){return this._volume},function(e$D){this.isStopped||(this._volume=e$D,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(e$D,this.context.currentTime,.1):this.gain.gain.value=e$D)}),e$m._tryCleanFailed=!1,e$m}(),e$GD=function(e$D){function e$m(){e$m.__super.call(this),this._w=0,this._h=0}e$f(e$m,"laya.resource.Bitmap",e$rD);var e$Y=e$m.prototype;return e$G(0,e$Y,"width",function(){return this._w}),e$G(0,e$Y,"height",function(){return this._h}),e$G(0,e$Y,"source",function(){return this._source}),e$m}(),e$ID=function(e$m){function e$D(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,e$D.__super.call(this),this._interval=e$t.animationInterval,this._setUpNoticeType(1)}e$f(e$D,"laya.display.AnimationPlayerBase",e$m);var e$Y=e$D.prototype;return e$Y.play=function(e$D,e$m,e$Y,e$t){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=!0),void 0===e$Y&&(e$Y=""),void 0===e$t&&(e$t=!0),this._isPlaying=!0,this.index="string"==typeof e$D?this._getFrameByLabel(e$D):e$D,this.loop=e$m,this._actionName=e$Y,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e$Y._getFrameByLabel=function(e$D){var e$m=0;for(e$m=0;e$m<this._count;e$m++)if(this._labels[e$m]&&0<=this._labels[e$m].indexOf(e$D))return e$m;return 0},e$Y._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},e$Y._setControlNode=function(e$D){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=e$D)&&e$D!=this&&(e$D.on("display",this,this._checkResumePlaying),e$D.on("undisplay",this,this._checkResumePlaying))},e$Y._setDisplay=function(e$D){e$m.prototype._setDisplay.call(this,e$D),this._checkResumePlaying()},e$Y._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},e$Y.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},e$Y.addLabel=function(e$D,e$m){this._labels||(this._labels={}),this._labels[e$m]||(this._labels[e$m]=[]),this._labels[e$m].push(e$D)},e$Y.removeLabel=function(e$D){if(e$D){if(this._labels)for(var e$m in this._labels)this._removeLabelFromLabelList(this._labels[e$m],e$D)}else this._labels=null},e$Y._removeLabelFromLabelList=function(e$D,e$m){if(e$D)for(var e$Y=e$D.length-1;0<=e$Y;e$Y--)e$D[e$Y]==e$m&&e$D.splice(e$Y,1)},e$Y.gotoAndStop=function(e$D){this.index="string"==typeof e$D?this._getFrameByLabel(e$D):e$D,this.stop()},e$Y._displayToIndex=function(e$D){},e$Y.clear=function(){this.stop(),this._labels=null},e$G(0,e$Y,"interval",function(){return this._interval},function(e$D){this._interval!=e$D&&(this._frameRateChanged=!0,this._interval=e$D,this._isPlaying&&0<e$D&&this.timerLoop(e$D,this,this._frameLoop,null,!0,!0))}),e$G(0,e$Y,"isPlaying",function(){return this._isPlaying}),e$G(0,e$Y,"index",function(){return this._index},function(e$D){if(this._index=e$D,this._displayToIndex(e$D),this._labels&&this._labels[e$D])for(var e$m=this._labels[e$D],e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)this.event("label",e$m[e$Y])}),e$G(0,e$Y,"count",function(){return this._count}),e$D.WRAP_POSITIVE=0,e$D.WRAP_REVERSE=1,e$D.WRAP_PINGPONG=2,e$D}(e$_D),e$wD=function(e$m){function e$I(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e$I.__super.call(this),this.overflow=e$I.VISIBLE,this._style=new e$mD(this),this._style.wordWrap=!1}e$f(e$I,"laya.display.Text",e$m);var e$D=e$I.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._lines=null,this._words&&(this._words.length=0,this._words=null)},e$D._getBoundPointsM=function(e$D){void 0===e$D&&(e$D=!1);var e$m=e$J.TEMP;return e$m.setTo(0,0,this.width,this.height),e$m._getBoundPoints()},e$D.getGraphicBounds=function(e$D){void 0===e$D&&(e$D=!1);var e$m=e$J.TEMP;return e$m.setTo(0,0,this.width,this.height),e$m},e$D._getCSSStyle=function(){return this._style},e$D.lang=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f){if(e$D=e$I.langPacks&&e$I.langPacks[e$D]?e$I.langPacks[e$D]:e$D,arguments.length<2)this._text=e$D;else{for(var e$_=0,e$i=arguments.length;e$_<e$i;e$_++)e$D=e$D.replace("{"+e$_+"}",arguments[e$_+1]);this._text=e$D}},e$D._isPassWordMode=function(){var e$D=this._style.password;return"prompt"in this&&this.prompt==this._text&&(e$D=!1),e$D},e$D._getPassWordTxt=function(e$D){var e$m;e$m="";for(var e$Y=e$D.length;0<e$Y;e$Y--)e$m+="●";return e$m},e$D.renderText=function(e$D,e$m){var e$Y=this.graphics;e$Y.clear(!0);var e$t=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(e$u.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);e$u.context.font=e$t;var e$y=this.padding,e$l=e$y[3],e$E="left",e$B=this._lines,e$o=this.leading+this._charSize.height,e$r=this._currBitmapFont;e$r&&(e$o=this.leading+e$r.getMaxHeight());var e$f=e$y[0];if(!e$r&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(e$E="right",e$l=this._width-e$y[1]):"center"==this.align&&(e$E="center",e$l=.5*this._width+e$y[3]-e$y[1])),0<this._height){var e$_=this._textHeight>this._height?"top":this.valign;"middle"===e$_?e$f=.5*(this._height-e$m*e$o)+e$y[0]-e$y[2]:"bottom"===e$_&&(e$f=this._height-e$m*e$o-e$y[2])}var e$i=this._style;if(e$r&&e$r.autoScaleSize)var e$R=e$r.fontSize/this.fontSize;if(this._clipPoint)if(e$Y.save(),e$r&&e$r.autoScaleSize){var e$G=0,e$I=0;e$G=this._width?this._width-e$y[3]-e$y[1]:this._textWidth,e$I=this._height?this._height-e$y[0]-e$y[2]:this._textHeight,e$G*=e$R,e$I*=e$R,e$Y.clipRect(e$y[3],e$y[0],e$G,e$I)}else e$Y.clipRect(e$y[3],e$y[0],this._width?this._width-e$y[3]-e$y[1]:this._textWidth,this._height?this._height-e$y[0]-e$y[2]:this._textHeight);var e$w=e$i.password;"prompt"in this&&this.prompt==this._text&&(e$w=!1);for(var e$W=0,e$U=0,e$e=Math.min(this._lines.length,e$m+e$D)||1,e$v=e$D;e$v<e$e;e$v++){var e$c,e$S=e$B[e$v];if(e$w){var e$z=e$S.length;e$S="";for(var e$A=e$z;0<e$A;e$A--)e$S+="●"}if(e$W=e$l-(this._clipPoint?this._clipPoint.x:0),e$U=e$f+e$o*e$v-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(e$E,e$W,e$U,e$v),e$r){var e$J=this.width;e$r.autoScaleSize&&(e$J=this.width*e$R),e$r.drawText(e$S,this,e$W,e$U,this.align,e$J)}else e$C.isWebGL?(this._words||(this._words=[]),(e$c=this._words.length>e$v-e$D?this._words[e$v-e$D]:new e$K).setText(e$S)):e$c=e$S,e$i.stroke?e$Y.fillBorderText(e$c,e$W,e$U,e$t,this.color,e$i.strokeColor,e$i.stroke,e$E):e$Y.fillText(e$c,e$W,e$U,e$t,this.color,e$E)}if(e$r&&e$r.autoScaleSize){var e$a=1/e$R;this.scale(e$a,e$a)}this._clipPoint&&e$Y.restore(),this._startX=e$l,this._startY=e$f},e$D.drawUnderline=function(e$D,e$m,e$Y,e$t){var e$y=this._lineWidths[e$t];switch(e$D){case"center":e$m-=e$y/2;break;case"right":e$m-=e$y}e$Y+=this._charSize.height,this._graphics.drawLine(e$m,e$Y,e$m+e$y,e$Y,this.underlineColor||this.color,1)},e$D.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);e$u.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new e$A(0,0)):this._clipPoint=null;var e$D=this._lines.length;if(this.overflow!=e$I.VISIBLE){var e$m=this.overflow==e$I.HIDDEN?Math.floor:Math.ceil;e$D=Math.min(e$D,e$m((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var e$Y=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(e$Y,e$D),this.repaint()},e$D.evalTextSize=function(){var e$D,e$m=NaN;e$D=Math.max.apply(this,this._lineWidths),e$m=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],e$D==this._textWidth&&e$m==this._textHeight||(this._textWidth=e$D,this._textHeight=e$m,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},e$D.checkEnabledViewportOrNot=function(){return this.overflow==e$I.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},e$D.changeText=function(e$D){this._text!==e$D&&(this.lang(e$D+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},e$D.parseLines=function(e$D){var e$m=this.wordWrap||this.overflow==e$I.HIDDEN;if(e$m)var e$Y=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var e$t=e$Z.contextMeasureText(e$I._testWord);e$C.isConchApp&&0===e$t.width&&0===e$t.height&&(e$t=e$Z.contextMeasureText("W")),this._charSize.width=e$t.width,this._charSize.height=e$t.height||this.fontSize}for(var e$y=e$D.replace(/\r\n/g,"\n").split("\n"),e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];e$m?this.parseLine(e$B,e$Y):(this._lineWidths.push(this.getTextWidth(e$B)),this._lines.push(e$B))}},e$D.parseLine=function(e$D,e$m){e$u.context;var e$Y,e$t=this._lines,e$y=0,e$l=NaN,e$E=NaN,e$B=0;if((e$l=this.getTextWidth(e$D))<=e$m)return e$t.push(e$D),void this._lineWidths.push(e$l);if(e$I.WordSplitStr&&0==new RegExp(e$I.WordSplitStr,"g").test(e$D))return e$t.push(e$D),void this._lineWidths.push(e$l);e$l=this._charSize.width,0==(e$y=Math.floor(e$m/e$l))&&(e$y=1),e$E=e$l=this.getTextWidth(e$D.substring(0,e$y));for(var e$o=e$y,e$r=e$D.length;e$o<e$r;e$o++)if(e$m<(e$E+=e$l=this.getTextWidth(e$D.charAt(e$o))))if(this.wordWrap){var e$f=e$D.substring(e$B,e$o);if(e$I.WordSplitArr){var e$_=-1,e$i=0;for(e$i=0;e$i<e$I.WordSplitArr.length;e$i++)e$_=Math.max(e$_,e$f.lastIndexOf(e$I.WordSplitArr[e$i]));if(-1==e$_){var e$R=e$D.substring(e$B,e$D.length);for(e$i=0;e$i<e$I.WordSplitArr.length;e$i++){var e$G=e$R.indexOf(e$I.WordSplitArr[e$i]);e$_=0<=e$_?0<=e$G?Math.min(e$_,e$G):e$_:e$G}e$f=-1==e$_?(e$o=e$D.length,e$R):(e$o=e$_+1+e$B,e$D.substring(e$B,e$o))}else e$o=e$_+1+e$B,e$f=e$D.substring(e$B,e$o);e$t.push(e$f),this._lineWidths.push(this.getTextWidth(e$t[e$t.length-1])),e$E=0,e$B=e$o}else{if(e$f.charCodeAt(e$f.length-1)<255?(e$Y=/(?:\w|-)+$/.exec(e$f))&&(e$o=e$Y.index+e$B,0==e$Y.index?e$o+=e$f.length:e$f=e$D.substring(e$B,e$o)):e$I.RightToLeft&&(e$Y=/([\u0600-\u06FF])+$/.exec(e$f))&&(e$o=e$Y.index+e$B,0==e$Y.index?e$o+=e$f.length:e$f=e$D.substring(e$B,e$o)),e$t.push(e$f),this._lineWidths.push(e$E-e$l),!((e$B=e$o)+e$y<e$r)){e$t.push(e$D.substring(e$B,e$r)),this._lineWidths.push(this.getTextWidth(e$t[e$t.length-1])),e$B=-1;break}e$o+=e$y,e$E=e$l=this.getTextWidth(e$D.substring(e$B,e$o)),e$o--}}else if(this.overflow==e$I.HIDDEN)return e$t.push(e$D.substring(0,e$o)),void this._lineWidths.push(this.getTextWidth(e$t[e$t.length-1]));this.wordWrap&&-1!=e$B&&e$B<e$r&&(e$t.push(e$D.substring(e$B,e$r)),this._lineWidths.push(this.getTextWidth(e$t[e$t.length-1])))},e$D.getTextWidth=function(e$D){return this._currBitmapFont?this._currBitmapFont.getTextWidth(e$D):e$Z.contextMeasureText(e$D).width},e$D.getWordWrapWidth=function(){var e$D=this.padding,e$m=NaN;return(e$m=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(e$m=this.wordWrap?100:e$u.width),e$m<=0&&(e$m=100),e$m-e$D[3]-e$D[1]},e$D.getCharPoint=function(e$D,e$m){this._isChanged&&e$z.timer.runCallLater(this,this.typeset);for(var e$Y=0,e$t=this._lines,e$y=0,e$l=0,e$E=e$t.length;e$l<e$E;e$l++){if(e$D<(e$Y+=e$t[e$l].length)){var e$B=e$l;break}e$y=e$Y}var e$o=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;e$u.context.font=e$o;var e$r=this.getTextWidth(this._text.substring(e$y,e$D));return(e$m||new e$A).setTo(this._startX+e$r-(this._clipPoint?this._clipPoint.x:0),this._startY+e$B*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},e$G(0,e$D,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(e$D){e$D!=this._width&&(e$z.superSet(e$_D,this,"width",e$D),this.isChanged=!0)}),e$G(0,e$D,"textWidth",function(){return this._isChanged&&e$z.timer.runCallLater(this,this.typeset),this._textWidth}),e$G(0,e$D,"height",function(){return this._height?this._height:this.textHeight},function(e$D){e$D!=this._height&&(e$z.superSet(e$_D,this,"height",e$D),this.isChanged=!0)}),e$G(0,e$D,"textHeight",function(){return this._isChanged&&e$z.timer.runCallLater(this,this.typeset),this._textHeight}),e$G(0,e$D,"padding",function(){return this._getCSSStyle().padding},function(e$D){this._getCSSStyle().padding=e$D,this.isChanged=!0}),e$G(0,e$D,"bold",function(){return this._getCSSStyle().bold},function(e$D){this._getCSSStyle().bold=e$D,this.isChanged=!0}),e$G(0,e$D,"text",function(){return this._text||""},function(e$D){this._text!==e$D&&(this.lang(e$D+""),this.isChanged=!0,this.event("change"))}),e$G(0,e$D,"color",function(){return this._getCSSStyle().color},function(e$D){this._getCSSStyle().color!=e$D&&(this._getCSSStyle().color=e$D,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),e$G(0,e$D,"font",function(){return this._getCSSStyle().fontFamily},function(e$D){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e$I._bitmapFonts&&e$I._bitmapFonts[e$D]&&(this._currBitmapFont=e$I._bitmapFonts[e$D]),this._getCSSStyle().fontFamily=e$D,this.isChanged=!0}),e$G(0,e$D,"fontSize",function(){return this._getCSSStyle().fontSize},function(e$D){this._getCSSStyle().fontSize=e$D,this.isChanged=!0}),e$G(0,e$D,"italic",function(){return this._getCSSStyle().italic},function(e$D){this._getCSSStyle().italic=e$D,this.isChanged=!0}),e$G(0,e$D,"align",function(){return this._getCSSStyle().align},function(e$D){this._getCSSStyle().align=e$D,this.isChanged=!0}),e$G(0,e$D,"valign",function(){return this._getCSSStyle().valign},function(e$D){this._getCSSStyle().valign=e$D,this.isChanged=!0}),e$G(0,e$D,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(e$D){this._getCSSStyle().wordWrap=e$D,this.isChanged=!0}),e$G(0,e$D,"leading",function(){return this._getCSSStyle().leading},function(e$D){this._getCSSStyle().leading=e$D,this.isChanged=!0}),e$G(0,e$D,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(e$D){this._getCSSStyle().backgroundColor=e$D,this.isChanged=!0}),e$G(0,e$D,"borderColor",function(){return this._getCSSStyle().borderColor},function(e$D){this._getCSSStyle().borderColor=e$D,this.isChanged=!0}),e$G(0,e$D,"stroke",function(){return this._getCSSStyle().stroke},function(e$D){this._getCSSStyle().stroke=e$D,this.isChanged=!0}),e$G(0,e$D,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(e$D){this._getCSSStyle().strokeColor=e$D,this.isChanged=!0}),e$G(0,e$D,"isChanged",null,function(e$D){this._isChanged!==e$D&&(this._isChanged=e$D)&&e$z.timer.callLater(this,this.typeset)}),e$G(0,e$D,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(e$D){if(!(this.overflow!=e$I.SCROLL||this.textWidth<this._width)&&this._clipPoint){e$D=e$D<this.padding[3]?this.padding[3]:e$D;var e$m=this._textWidth-this._width;e$D=e$m<e$D?e$m:e$D;var e$Y=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=e$D,this.renderText(this._lastVisibleLineIndex,e$Y)}}),e$G(0,e$D,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(e$D){if(!(this.overflow!=e$I.SCROLL||this.textHeight<this._height)&&this._clipPoint){e$D=e$D<this.padding[0]?this.padding[0]:e$D;var e$m=this._textHeight-this._height,e$Y=(e$D=e$m<e$D?e$m:e$D)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=e$Y;var e$t=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=e$D,this.renderText(e$Y,e$t)}}),e$G(0,e$D,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),e$G(0,e$D,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),e$G(0,e$D,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),e$G(0,e$D,"underlineColor",function(){return this._underlineColor},function(e$D){this._underlineColor=e$D,this._isChanged=!0,this.typeset()}),e$I.registerBitmapFont=function(e$D,e$m){e$I._bitmapFonts||(e$I._bitmapFonts={}),e$I._bitmapFonts[e$D]=e$m},e$I.unregisterBitmapFont=function(e$D,e$m){if(void 0===e$m&&(e$m=!0),e$I._bitmapFonts&&e$I._bitmapFonts[e$D]){var e$Y=e$I._bitmapFonts[e$D];e$m&&e$Y.destroy(),delete e$I._bitmapFonts[e$D]}},e$I.setTextRightToLeft=function(){var e$D;(e$D=e$u.canvas.source.style).display="none",e$D.position="absolute",e$D.direction="rtl",e$C._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,e$u.document.body.appendChild(e$u.canvas.source)},e$I.supportFont=function(e$D){e$u.context.font="10px sans-serif";var e$m=e$Z.contextMeasureText("abcji").width;e$u.context.font="10px "+e$D;var e$Y=e$Z.contextMeasureText("abcji").width;return console.log(e$m,e$Y),e$m!==e$Y},e$I._testWord="游",e$I.langPacks=null,e$I.VISIBLE="visible",e$I.SCROLL="scroll",e$I.HIDDEN="hidden",e$I.CharacterCache=!0,e$I.RightToLeft=!1,e$I.WordSplitArr=null,e$I.WordSplitStr=null,e$I._bitmapFonts=null,e$o(e$I,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),e$I}(e$_D),e$WD=function(e$i){function e$E(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",e$E.__super.call(this),this.offset=new e$A,this._canvasTransform=new e$Q,this._previousOrientation=e$u.window.orientation;var e$m=this;this.transform=e$Q.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0,this._lastStamp=0;var e$D=e$u.window,e$Y=this;e$D.addEventListener("focus",function(){e$m._isFocused=!0,e$Y.event("focus"),e$Y.event("focuschange")}),e$D.addEventListener("blur",function(){e$m._isFocused=!1,e$Y.event("blur"),e$Y.event("focuschange"),e$Y._isInputting()&&(e$cD.inputElement.target.focus=!1)});var e$t="visibilityState",e$y="visibilitychange",e$l=e$D.document;void 0!==e$l.hidden?(e$y="visibilitychange",e$t="visibilityState"):void 0!==e$l.mozHidden?(e$y="mozvisibilitychange",e$t="mozVisibilityState"):void 0!==e$l.msHidden?(e$y="msvisibilitychange",e$t="msVisibilityState"):void 0!==e$l.webkitHidden&&(e$y="webkitvisibilitychange",e$t="webkitVisibilityState"),e$D.document.addEventListener(e$y,function(){"hidden"==e$u.document[e$t]?e$Y._setStageVisible(!1):e$Y._setStageVisible(!0)}),e$D.document.addEventListener("qbrowserVisibilityChange",function(e$D){e$Y._setStageVisible(!e$D.hidden)}),e$D.addEventListener("resize",function(){var e$D=e$u.window.orientation;null!=e$D&&e$D!=e$m._previousOrientation&&e$Y._isInputting()&&(e$cD.inputElement.target.focus=!1),e$m._previousOrientation=e$D,e$Y._isInputting()||e$Y._resetCanvas()}),e$D.addEventListener("orientationchange",function(e$D){e$Y._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),e$u.onMobile&&this.on("mousedown",this,this._onmouseMove)}e$f(e$E,"laya.display.Stage",e$i);var e$D=e$E.prototype;return e$D._setStageVisible=function(e$D){this._isVisibility!=e$D&&(this._isVisibility=e$D,this._isVisibility||this._isInputting()&&(e$cD.inputElement.target.focus=!1),this.event("visibilitychange"))},e$D._isInputting=function(){return e$u.onMobile&&e$cD.isInputting},e$D._changeCanvasSize=function(){this.setScreenSize(e$u.clientWidth*e$u.pixelRatio,e$u.clientHeight*e$u.pixelRatio)},e$D._resetCanvas=function(){if(this.screenAdaptationEnabled){var e$D=e$C._mainCanvas;e$D.source.style;e$D.size(1,1),e$z.timer.once(100,this,this._changeCanvasSize)}},e$D.setScreenSize=function(e$D,e$m){var e$Y=!1;if("none"!==this._screenMode&&(e$Y=(e$D/e$m<1?"vertical":"horizontal")!==this._screenMode)){var e$t=e$m;e$m=e$D,e$D=e$t}this.canvasRotation=e$Y;var e$y=e$C._mainCanvas,e$l=e$y.source.style,e$E=this._canvasTransform.identity(),e$B=this._scaleMode,e$o=e$D/this.designWidth,e$r=e$m/this.designHeight,e$f=this.designWidth,e$_=this.designHeight,e$i=e$D,e$R=e$m,e$G=e$u.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,e$B){case"noscale":e$o=e$r=1,e$i=this.designWidth,e$R=this.designHeight;break;case"showall":e$o=e$r=Math.min(e$o,e$r),e$f=e$i=Math.round(this.designWidth*e$o),e$_=e$R=Math.round(this.designHeight*e$r);break;case"noborder":e$o=e$r=Math.max(e$o,e$r),e$i=Math.round(this.designWidth*e$o),e$R=Math.round(this.designHeight*e$r);break;case"full":e$o=e$r=1,this._width=e$f=e$D,this._height=e$_=e$m;break;case"fixedwidth":e$r=e$o,this._height=e$_=Math.round(e$m/e$o);break;case"fixedheight":e$o=e$r,this._width=e$f=Math.round(e$D/e$r);break;case"fixedauto":e$D/e$m<this.designWidth/this.designHeight?(e$r=e$o,this._height=e$_=Math.round(e$m/e$o)):(e$o=e$r,this._width=e$f=Math.round(e$D/e$r))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,e$f=e$f+1&2147483646,e$_=e$_+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),e$o*=this.scaleX,e$r*=this.scaleY,1===e$o&&1===e$r?this.transform.identity():(this.transform.a=this._formatData(e$o/(e$i/e$f)),this.transform.d=this._formatData(e$r/(e$R/e$_)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),e$y.size(e$f,e$_),e$s.changeWebGLSize(e$f,e$_),e$E.scale(e$i/e$f/e$G,e$R/e$_/e$G),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(e$D-e$i)/e$G:this.offset.x=.5*(e$D-e$i)/e$G,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(e$m-e$R)/e$G:this.offset.y=.5*(e$m-e$R)/e$G,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),e$E.translate(this.offset.x,this.offset.y),this.canvasDegree=0,e$Y&&("horizontal"===this._screenMode?(e$E.rotate(Math.PI/2),e$E.translate(e$m/e$G,0),this.canvasDegree=90):(e$E.rotate(-Math.PI/2),e$E.translate(0,e$D/e$G),this.canvasDegree=-90)),e$E.a=this._formatData(e$E.a),e$E.d=this._formatData(e$E.d),e$E.tx=this._formatData(e$E.tx),e$E.ty=this._formatData(e$E.ty),e$l.transformOrigin=e$l.webkitTransformOrigin=e$l.msTransformOrigin=e$l.mozTransformOrigin=e$l.oTransformOrigin="0px 0px 0px",e$l.transform=e$l.webkitTransform=e$l.msTransform=e$l.mozTransform=e$l.oTransform="matrix("+e$E.toString()+")",e$E.translate(parseInt(e$l.left)||0,parseInt(e$l.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},e$D._formatData=function(e$D){return Math.abs(e$D)<1e-6?0:Math.abs(1-e$D)<.001?0<e$D?1:-1:e$D},e$D.getMousePoint=function(){return e$A.TEMP.setTo(this.mouseX,this.mouseY)},e$D.repaint=function(){this._repaint=1},e$D.parentRepaint=function(){},e$D._loop=function(e$D){return this.render(e$C.context,0,0,e$D),!0},e$D._onmouseMove=function(e$D){this._mouseMoveTime=e$u.now()},e$D.getTimeFromFrameStart=function(){return e$u.now()-this._frameStartTime},e$D.render=function(e$D,e$m,e$Y,e$t){if(!(3!=e$R.ENV&&6!=e$R.ENV&&0<e$t&&e$t-this._lastStamp<16)){if(this._lastStamp=e$t,"sleep"===this._frameRate&&!e$C.isConchApp){var e$y=e$u.now();if(!(200<=e$y-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(e$H.loopCount++,e$w.instance.runEvent(),e$z.timer._update()));this._frameStartTime=e$y}if(this._renderCount++,e$C.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=e$u.now();var e$l="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),e$E=this._renderCount%2==0;if(e$H.renderSlow=!e$l,e$l||e$E||e$C.isConchApp){var e$B;e$H.loopCount++,e$w.instance.runEvent(),e$z.timer._update(),e$s.update3DLoop();var e$o=0,e$r=0;if(e$C.isConchNode)for(e$o=0,e$r=this._scenes.length;e$o<e$r;e$o++)(e$B=this._scenes[e$o])&&e$B._updateSceneConch();else for(e$o=0,e$r=this._scenes.length;e$o<e$r;e$o++)(e$B=this._scenes[e$o])&&e$B._updateScene();if(e$C.isConchNode){var e$f=e$_D.CustomList;for(e$o=0,e$r=e$f.length;e$o<e$r;e$o++){var e$_=e$f[e$o];e$_.customRender(e$_.customContext,0,0)}return}}e$C.isConchNode||this.renderingEnabled&&(e$l||!e$E||e$C.isConchWebGL)&&(e$C.isWebGL?e$C.WebGL.mainContext&&!e$C.WebGL.mainContext.isContextLost()&&(e$D.clear(),e$i.prototype.render.call(this,e$D,e$m,e$Y),e$H._show&&e$H._sp&&e$H._sp.render(e$D,e$m,e$Y),e$s.clear(this._bgColor),e$s.beginFlush(),e$D.flush(),e$s.endFinish(),e$b.instance&&e$b.getInstance().endDispose()):(e$s.clear(this._bgColor),e$i.prototype.render.call(this,e$D,e$m,e$Y),e$H._show&&e$H._sp&&e$H._sp.render(e$D,e$m,e$Y)))}else this._renderCount%5==0&&(e$H.loopCount++,e$w.instance.runEvent(),e$z.timer._update())}},e$D._requestFullscreen=function(){var e$D=e$u.document.documentElement;e$D.requestFullscreen?e$D.requestFullscreen():e$D.mozRequestFullScreen?e$D.mozRequestFullScreen():e$D.webkitRequestFullscreen?e$D.webkitRequestFullscreen():e$D.msRequestFullscreen&&e$D.msRequestFullscreen()},e$D._fullScreenChanged=function(){e$z.stage.event("fullscreenchange")},e$D.exitFullscreen=function(){var e$D=e$u.document;e$D.exitFullscreen?e$D.exitFullscreen():e$D.mozCancelFullScreen?e$D.mozCancelFullScreen():e$D.webkitExitFullscreen&&e$D.webkitExitFullscreen()},e$G(0,e$D,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),e$G(0,e$D,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),e$G(0,e$D,"frameRate",function(){return this._frameRate},function(e$D){if(this._frameRate=e$D,e$C.isConchApp)switch(this._frameRate){case"slow":e$u.window.conch&&e$u.window.conchConfig.setSlowFrame&&e$u.window.conchConfig.setSlowFrame(!0);break;case"fast":e$u.window.conch&&e$u.window.conchConfig.setSlowFrame&&e$u.window.conchConfig.setSlowFrame(!1);break;case"mouse":e$u.window.conch&&e$u.window.conchConfig.setMouseFrame&&e$u.window.conchConfig.setMouseFrame(2e3);break;case"sleep":e$u.window.conch&&e$u.window.conchConfig.setLimitFPS&&e$u.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),e$G(0,e$D,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),e$G(0,e$D,"width",e$i.prototype._$get_width,function(e$D){this.designWidth=e$D,e$z.superSet(e$_D,this,"width",e$D),e$z.timer.callLater(this,this._changeCanvasSize)}),e$G(0,e$D,"alignH",function(){return this._alignH},function(e$D){this._alignH=e$D,e$z.timer.callLater(this,this._changeCanvasSize)}),e$G(0,e$D,"isFocused",function(){return this._isFocused}),e$G(0,e$D,"height",e$i.prototype._$get_height,function(e$D){this.designHeight=e$D,e$z.superSet(e$_D,this,"height",e$D),e$z.timer.callLater(this,this._changeCanvasSize)}),e$G(0,e$D,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||e$Q.create()},e$i.prototype._$set_transform),e$G(0,e$D,"isVisibility",function(){return this._isVisibility}),e$G(0,e$D,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),e$G(0,e$D,"scaleMode",function(){return this._scaleMode},function(e$D){this._scaleMode=e$D,e$z.timer.callLater(this,this._changeCanvasSize)}),e$G(0,e$D,"alignV",function(){return this._alignV},function(e$D){this._alignV=e$D,e$z.timer.callLater(this,this._changeCanvasSize)}),e$G(0,e$D,"bgColor",function(){return this._bgColor},function(e$D){this._bgColor=e$D,this.conchModel&&this.conchModel.bgColor(e$D),e$C.isWebGL&&(e$D?e$E._wgColor=e$d.create(e$D)._color:e$u.onMiniGame||(e$E._wgColor=null)),e$u.onLimixiu?e$E._wgColor=e$d.create(e$D)._color:e$C.canvas.style.background=e$D||"none"}),e$G(0,e$D,"mouseX",function(){return Math.round(e$w.instance.mouseX/this.clientScaleX)}),e$G(0,e$D,"mouseY",function(){return Math.round(e$w.instance.mouseY/this.clientScaleY)}),e$G(0,e$D,"screenMode",function(){return this._screenMode},function(e$D){this._screenMode=e$D}),e$G(0,e$D,"visible",e$i.prototype._$get_visible,function(e$D){this.visible!==e$D&&(e$z.superSet(e$_D,this,"visible",e$D),e$C._mainCanvas.source.style.visibility=e$D?"visible":"hidden")}),e$G(0,e$D,"fullScreenEnabled",null,function(e$D){var e$m=e$u.document,e$Y=e$C.canvas;e$D?(e$Y.addEventListener("mousedown",this._requestFullscreen),e$Y.addEventListener("touchstart",this._requestFullscreen),e$m.addEventListener("fullscreenchange",this._fullScreenChanged),e$m.addEventListener("mozfullscreenchange",this._fullScreenChanged),e$m.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e$m.addEventListener("msfullscreenchange",this._fullScreenChanged)):(e$Y.removeEventListener("mousedown",this._requestFullscreen),e$Y.removeEventListener("touchstart",this._requestFullscreen),e$m.removeEventListener("fullscreenchange",this._fullScreenChanged),e$m.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e$m.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e$m.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e$E.SCALE_NOSCALE="noscale",e$E.SCALE_EXACTFIT="exactfit",e$E.SCALE_SHOWALL="showall",e$E.SCALE_NOBORDER="noborder",e$E.SCALE_FULL="full",e$E.SCALE_FIXED_WIDTH="fixedwidth",e$E.SCALE_FIXED_HEIGHT="fixedheight",e$E.SCALE_FIXED_AUTO="fixedauto",e$E.ALIGN_LEFT="left",e$E.ALIGN_RIGHT="right",e$E.ALIGN_CENTER="center",e$E.ALIGN_TOP="top",e$E.ALIGN_MIDDLE="middle",e$E.ALIGN_BOTTOM="bottom",e$E.SCREEN_NONE="none",e$E.SCREEN_HORIZONTAL="horizontal",e$E.SCREEN_VERTICAL="vertical",e$E.FRAME_FAST="fast",e$E.FRAME_SLOW="slow",e$E.FRAME_MOUSE="mouse",e$E.FRAME_SLEEP="sleep",e$E.FRAME_MOUSE_THREDHOLD=2e3,e$o(e$E,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),e$E}(e$_D),e$UD=(function(e$D){function e$m(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,e$m.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}e$f(e$m,"laya.media.SoundNode",e$_D);var e$Y=e$m.prototype;e$Y._onParentChange=function(){this.target=this.parent},e$Y.play=function(e$D,e$m){void 0===e$D&&(e$D=1),isNaN(e$D)&&(e$D=1),this.url&&(this.stop(),this._channel=e$F.playSound(this.url,e$D,null,e$m))},e$Y.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},e$Y._setPlayAction=function(e$D,e$m,e$Y,e$t){void 0===e$t&&(e$t=!0),this[e$Y]&&e$D&&(e$t?e$D.on(e$m,this,this[e$Y]):e$D.off(e$m,this,this[e$Y]))},e$Y._setPlayActions=function(e$D,e$m,e$Y,e$t){if(void 0===e$t&&(e$t=!0),e$D&&e$m){var e$y,e$l=e$m.split(","),e$E=0;for(e$y=e$l.length,e$E=0;e$E<e$y;e$E++)this._setPlayAction(e$D,e$l[e$E],e$Y,e$t)}},e$G(0,e$Y,"playEvent",null,function(e$D){(this._playEvents=e$D)&&this._tar&&this._setPlayActions(this._tar,e$D,"play")}),e$G(0,e$Y,"target",null,function(e$D){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=e$D,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),e$G(0,e$Y,"stopEvent",null,function(e$D){(this._stopEvents=e$D)&&this._tar&&this._setPlayActions(this._tar,e$D,"stop")})}(),function(e$D){function e$m(){this._src=null,this._onload=null,this._onerror=null,e$m.__super.call(this)}e$f(e$m,"laya.resource.FileBitmap",e$GD);var e$Y=e$m.prototype;return e$G(0,e$Y,"src",function(){return this._src},function(e$D){this._src=e$D}),e$G(0,e$Y,"onload",null,function(e$D){}),e$G(0,e$Y,"onerror",null,function(e$D){}),e$m}()),e$eD=function(e$D){function e$Y(e$D,e$m){this._is2D=!1,e$Y.__super.call(this);var e$t=this;if(this._source=this,"2D"===e$D||"AUTO"===e$D&&!e$C.isWebGL){this._is2D=!0,this._source=e$m||e$u.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var e$y=this;e$y.getContext=function(e$D,e$m){if(e$t._ctx)return e$t._ctx;var e$Y=e$t._ctx=e$t._source.getContext(e$D,e$m);return e$Y&&(e$Y._canvas=e$y,e$C.isFlash||e$u.onLimixiu||(e$Y.size=function(e$D,e$m){})),e$Y}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}e$f(e$Y,"laya.resource.HTMLCanvas",e$GD);var e$m=e$Y.prototype;return e$m.clear=function(){this._ctx&&this._ctx.clear()},e$m.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e$m.release=function(){},e$m._setContext=function(e$D){this._ctx=e$D},e$m.getContext=function(e$D,e$m){return this._ctx?this._ctx:this._ctx=e$Y._createContext(this)},e$m.getMemSize=function(){return 0},e$m.size=function(e$D,e$m){(this._w!=e$D||this._h!=e$m||this._source&&(this._source.width!=e$D||this._source.height!=e$m))&&(this._w=e$D,this._h=e$m,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(e$D,e$m),this._source&&(this._source.height=e$m,this._source.width=e$D))},e$m.getCanvas=function(){return this._source},e$m.toBase64=function(e$D,e$m,e$Y){if(this._source)if(e$C.isConchApp&&this._source.toBase64)this._source.toBase64(e$D,e$m,e$Y);else{var e$t=this._source.toDataURL(e$D,e$m);e$Y.call(this,e$t)}},e$G(0,e$m,"context",function(){return this._ctx}),e$G(0,e$m,"asBitmap",null,function(e$D){}),e$Y.create=function(e$D,e$m){return new e$Y(e$D,e$m)},e$Y.TYPE2D="2D",e$Y.TYPE3D="3D",e$Y.TYPEAUTO="AUTO",e$Y._createContext=null,e$Y}(),e$vD=(function(e$D){function e$o(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){throw e$o.__super.call(this),new Error("不允许new！")}e$f(e$o,"laya.resource.HTMLSubImage",e$GD),e$o.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){return void 0===e$B&&(e$B=!1),new e$o(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B)}}(),function(e$D){function e$_(){this._frames=null,this._url=null,e$_.__super.call(this),this._setControlNode(this)}e$f(e$_,"laya.display.Animation",e$D);var e$m=e$_.prototype;e$m.destroy=function(e$D){void 0===e$D&&(e$D=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,e$D),this._frames=null,this._labels=null},e$m.play=function(e$D,e$m,e$Y,e$t){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=!0),void 0===e$Y&&(e$Y=""),void 0===e$t&&(e$t=!0),e$Y&&this._setFramesFromCache(e$Y,e$t),this._isPlaying=!0,this.index="string"==typeof e$D?this._getFrameByLabel(e$D):e$D,this.loop=e$m,this._actionName=e$Y,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e$m._setFramesFromCache=function(e$D,e$m){var e$Y;return void 0===e$m&&(e$m=!1),this._url&&(e$D=this._url+"#"+e$D),e$D&&e$_.framesMap[e$D]?((e$Y=e$_.framesMap[e$D])instanceof Array?(this._frames=e$_.framesMap[e$D],this._count=this._frames.length):(e$Y.nodeRoot&&(e$_.framesMap[e$D]=this._parseGraphicAnimationByData(e$Y),e$Y=e$_.framesMap[e$D]),this._frames=e$Y.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=e$Y.interval),this._labels=this._copyLabels(e$Y.labels)),!0):(e$m&&console.log("ani not found:",e$D),!1)},e$m._copyLabels=function(e$D){if(!e$D)return null;var e$m,e$Y;for(e$Y in e$m={},e$D)e$m[e$Y]=e$Z.copyArray([],e$D[e$Y]);return e$m},e$m._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&e$D.prototype._frameLoop.call(this)},e$m._displayToIndex=function(e$D){this._frames&&(this.graphics=this._frames[e$D])},e$m.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},e$m.loadImages=function(e$D,e$m){return void 0===e$m&&(e$m=""),this._url="",this._setFramesFromCache(e$m)||(this.frames=e$_.framesMap[e$m]?e$_.framesMap[e$m]:e$_.createFrames(e$D,e$m)),this},e$m.loadAtlas=function(e$m,e$Y,e$t){void 0===e$t&&(e$t=""),this._url="";var e$y=this;function e$D(e$D){e$m===e$D&&(e$y.frames=e$_.framesMap[e$t]?e$_.framesMap[e$t]:e$_.createFrames(e$m,e$t),e$Y&&e$Y.run())}return e$y._setFramesFromCache(e$t)||(e$BD.getAtlas(e$m)?e$D(e$m):e$z.loader.load(e$m,e$U.create(null,e$D,[e$m]),null,"atlas")),this},e$m.loadAnimation=function(e$D,e$m,e$Y){this._url=e$D;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,e$m&&e$m.run()):!e$Y||e$BD.getAtlas(e$Y)?this._loadAnimationData(e$D,e$m,e$Y):e$z.loader.load(e$Y,e$U.create(this,this._loadAnimationData,[e$D,e$m,e$Y]),null,"atlas"),this},e$m._loadAnimationData=function(e$B,e$o,e$D){var e$r=this;if(!e$D||e$BD.getAtlas(e$D)){var e$f=this;e$BD.getRes(e$B)?e$m(e$B):e$z.loader.load(e$B,e$U.create(null,e$m,[e$B]),null,"json"),e$BD.clearRes(e$B)}else console.warn("atlas load fail:"+e$D);function e$m(e$D){if(e$BD.getRes(e$D)&&e$B===e$D){var e$m;if(e$_.framesMap[e$B+"#"])e$f._setFramesFromCache(e$r._actionName,!0),e$r.index=0,e$r._checkResumePlaying();else{var e$Y=e$f._parseGraphicAnimation(e$BD.getRes(e$B));if(!e$Y)return;var e$t,e$y=e$Y.animationList,e$l=0,e$E=e$y.length;for(e$l=0;e$l<e$E;e$l++)e$m=e$y[e$l],e$_.framesMap[e$B+"#"+e$m.name]=e$m,e$t||(e$t=e$m);e$t&&(e$_.framesMap[e$B+"#"]=e$t,e$f._setFramesFromCache(e$r._actionName,!0),e$r.index=0),e$r._checkResumePlaying()}e$o&&e$o.run()}}},e$m._parseGraphicAnimation=function(e$D){return e$zD.parseAnimationData(e$D)},e$m._parseGraphicAnimationByData=function(e$D){return e$zD.parseAnimationByData(e$D)},e$G(0,e$m,"frames",function(){return this._frames},function(e$D){(this._frames=e$D)&&(this._count=e$D.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),e$G(0,e$m,"autoPlay",null,function(e$D){e$D?this.play():this.stop()}),e$G(0,e$m,"source",null,function(e$D){-1<e$D.indexOf(".ani")?this.loadAnimation(e$D):-1<e$D.indexOf(".json")||-1<e$D.indexOf("als")||-1<e$D.indexOf("atlas")?this.loadAtlas(e$D):this.loadImages(e$D.split(","))}),e$G(0,e$m,"autoAnimation",null,function(e$D){this.play(0,!0,e$D,!1)}),e$_.createFrames=function(e$D,e$m){var e$Y,e$t,e$y=0,e$l=0;if("string"==typeof e$D){var e$E=e$BD.getAtlas(e$D);if(e$E&&e$E.length)for(e$Y=[],e$y=0,e$l=e$E.length;e$y<e$l;e$y++)(e$t=new e$s.createGraphics).drawTexture(e$BD.getRes(e$E[e$y]),0,0),e$Y.push(e$t)}else if(e$D instanceof Array)for(e$Y=[],e$y=0,e$l=e$D.length;e$y<e$l;e$y++)(e$t=new e$s.createGraphics).loadImage(e$D[e$y],0,0),e$Y.push(e$t);return e$m&&(e$_.framesMap[e$m]=e$Y),e$Y},e$_.clearCache=function(e$D){var e$m,e$Y=e$_.framesMap,e$t=e$D+"#";for(e$m in e$Y)e$m!==e$D&&0!=e$m.indexOf(e$t)||delete e$_.framesMap[e$m]},e$_.framesMap={}}(e$ID),function(e$D){function e$l(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,e$l.__super.call(this),null==e$l._sortIndexFun&&(e$l._sortIndexFun=e$S.sortByKey("index",!1,!0))}e$f(e$l,"laya.display.FrameAnimation",e$D);var e$m=e$l.prototype;return e$m._setUp=function(e$D,e$m){this._labels=null,this._animationNewFrames=null,this._targetDic=e$D,this._animationData=e$m,this.interval=1e3/e$m.frameRate,e$m.parsed?(this._count=e$m.count,this._labels=e$m.labels,this._animationNewFrames=e$m.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e$m.parsed=!0,e$m.labels=this._labels,e$m.count=this._count,e$m.animationNewFrames=this._animationNewFrames},e$m.clear=function(){e$D.prototype.clear.call(this),this._targetDic=null,this._animationData=null},e$m._displayToIndex=function(e$D){if(this._animationData){e$D<0&&(e$D=0),e$D>this._count&&(e$D=this._count);var e$m=this._animationData.nodes,e$Y=0,e$t=e$m.length;for(e$Y=0;e$Y<e$t;e$Y++)this._displayNodeToFrame(e$m[e$Y],e$D)}},e$m._displayNodeToFrame=function(e$D,e$m,e$Y){e$Y||(e$Y=this._targetDic);var e$t=e$Y[e$D.target];if(e$t){var e$y,e$l,e$E,e$B=e$D.frames,e$o=e$D.keys,e$r=0,e$f=e$o.length;for(e$r=0;e$r<e$f;e$r++)e$E=(e$l=e$B[e$y=e$o[e$r]]).length>e$m?e$l[e$m]:e$l[e$l.length-1],e$t[e$y]=e$E}},e$m._calculateDatas=function(){if(this._animationData){var e$D,e$m=this._animationData.nodes,e$Y=0,e$t=e$m.length;for(e$Y=this._count=0;e$Y<e$t;e$Y++)e$D=e$m[e$Y],this._calculateNodeKeyFrames(e$D);this._count+=1}},e$m._calculateNodeKeyFrames=function(e$D){var e$m,e$Y,e$t=e$D.keyframes,e$y=e$D.target;for(e$m in e$D.frames||(e$D.frames={}),e$D.keys?e$D.keys.length=0:e$D.keys=[],e$D.initValues||(e$D.initValues={}),e$t)e$Y=e$t[e$m],e$D.frames[e$m]||(e$D.frames[e$m]=[]),this._targetDic&&this._targetDic[e$y]&&(e$D.initValues[e$m]=this._targetDic[e$y][e$m]),e$Y.sort(e$l._sortIndexFun),e$D.keys.push(e$m),this._calculateNodePropFrames(e$Y,e$D.frames[e$m],e$m,e$y)},e$m.resetToInitState=function(){if(this._targetDic&&this._animationData){var e$D,e$m,e$Y=this._animationData.nodes,e$t=0,e$y=e$Y.length;for(e$t=0;e$t<e$y;e$t++)if(e$m=(e$D=e$Y[e$t]).initValues){var e$l,e$E=this._targetDic[e$D.target];if(e$E)for(e$l in e$m)e$E[e$l]=e$m[e$l]}}},e$m._calculateNodePropFrames=function(e$D,e$m,e$Y,e$t){var e$y=0,e$l=e$D.length-1;if(0<e$l){for(e$m.length=e$D[e$l].index+1,e$y=0;e$y<e$l;e$y++)this._dealKeyFrame(e$D[e$y]),this._calculateFrameValues(e$D[e$y],e$D[e$y+1],e$m);this._dealKeyFrame(e$D[e$y])}0==e$l&&(e$m[e$D[0].index]=e$D[0].value,this._animationNewFrames&&(this._animationNewFrames[e$D[0].index]=!0))},e$m._dealKeyFrame=function(e$D){e$D.label&&""!=e$D.label&&this.addLabel(e$D.label,e$D.index)},e$m._calculateFrameValues=function(e$D,e$m,e$Y){var e$t,e$y=0,e$l=e$D.index,e$E=e$m.index,e$B=e$D.value,e$o=e$m.value-e$D.value,e$r=e$E-e$l;if(e$E>this._count&&(this._count=e$E),e$D.tween)for(null==(e$t=e$M[e$D.tweenMethod])&&(e$t=e$M.linearNone),e$y=e$l;e$y<e$E;e$y++)e$Y[e$y]=e$t(e$y-e$l,e$B,e$o,e$r),this._animationNewFrames&&(this._animationNewFrames[e$y]=!0);else for(e$y=e$l;e$y<e$E;e$y++)e$Y[e$y]=e$B;this._animationNewFrames&&(this._animationNewFrames[e$D.index]=!0,this._animationNewFrames[e$m.index]=!0),e$Y[e$m.index]=e$m.value},e$l._sortIndexFun=null,e$l}(e$ID)),e$cD=function(e$m){function e$l(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e$l.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=e$wD.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}e$f(e$l,"laya.display.Input",e$m);var e$D=e$l.prototype;return e$D.setSelection=function(e$D,e$m){this.focus=!0,laya.display.Input.inputElement.selectionStart=e$D,laya.display.Input.inputElement.selectionEnd=e$m},e$D._onUnDisplay=function(e$D){this.focus=!1},e$D._onMouseDown=function(e$D){this.focus=!0},e$D._syncInputTransform=function(){var e$D=this.nativeInput,e$m=e$Z.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),e$Y=this._width-this.padding[1]-this.padding[3],e$t=this._height-this.padding[0]-this.padding[2];if(e$C.isConchApp)e$D.setScale(e$m.scaleX,e$m.scaleY),e$D.setSize(e$Y,e$t),e$D.setPos(e$m.x,e$m.y);else{var e$y=1===e$u.scroll_input_top;e$y&&e$D.style.backgroundColor&&(e$D.style.backgroundColor=null),e$l.inputContainer.style.transform=e$l.inputContainer.style.webkitTransform="scale("+e$m.scaleX+","+e$m.scaleY+") rotate("+e$z.stage.canvasDegree+"deg)",e$D.style.width=e$y?"720px":e$Y+"px",e$D.style.height=e$t+"px",e$l.inputContainer.style.left=e$y?"0px":e$m.x+"px",e$l.inputContainer.style.top=e$y?"0px":e$m.y+"px"}},e$D.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},e$D._setInputMethod=function(){e$l.input.parentElement&&e$l.inputContainer.removeChild(e$l.input),e$l.area.parentElement&&e$l.inputContainer.removeChild(e$l.area),e$l.inputElement=this._multiline?e$l.area:e$l.input,e$l.inputContainer.appendChild(e$l.inputElement),e$wD.RightToLeft&&(e$l.inputElement.style.direction="rtl")},e$D._focusIn=function(){laya.display.Input.isInputting=!0;var e$D=this.nativeInput;this._focus=!0;var e$m=e$D.style;e$m.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),e$D.readOnly=!this._editable,e$C.isConchApp&&(e$D.setType(this._type),e$D.setForbidEdit(!this._editable)),e$D.maxLength=this._maxChars;this.padding;if(e$D.type=this._type,e$D.value=this._content,e$D.placeholder=this._prompt,e$z.stage.off("keydown",this,this._onKeyDown),e$z.stage.on("keydown",this,this._onKeyDown),(e$z.stage.focus=this).event("focus"),e$u.onPC&&e$D.focus(),!e$u.onMiniGame){this._text;this._text=null}this.typeset(),e$D.setColor(this._originColor),e$D.setFontSize(this.fontSize),e$D.setFontFace(e$u.onIPhone&&e$wD._fontFamilyMap[this.font]||this.font),e$C.isConchApp&&e$D.setMultiAble&&e$D.setMultiAble(this._multiline),e$m.lineHeight=this.leading+this.fontSize+"px",e$m.fontStyle=this.italic?"italic":"normal",e$m.fontWeight=this.bold?"bold":"normal",e$m.textAlign=this.align,e$m.padding="0 0",this._syncInputTransform(),!e$C.isConchApp&&e$u.onPC&&e$z.timer.frameLoop(1,this,this._syncInputTransform)},e$D._setPromptColor=function(){(e$l.promptStyleDOM=e$u.getElementById("promptStyle"))||((e$l.promptStyleDOM=e$u.createElement("style")).setAttribute("id","promptStyle"),e$u.document.head.appendChild(e$l.promptStyleDOM)),e$l.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},e$D._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(e$z.superSet(e$wD,this,"text",this._content),e$z.superSet(e$wD,this,"color",this._originColor)):(e$z.superSet(e$wD,this,"text",this._prompt),e$z.superSet(e$wD,this,"color",this._promptColor)),e$z.stage.off("keydown",this,this._onKeyDown),e$z.stage.focus=null,this.event("blur"),e$C.isConchApp&&this.nativeInput.blur(),e$u.onPC&&e$z.timer.clear(this,this._syncInputTransform)},e$D._onKeyDown=function(e$D){13===e$D.keyCode&&(e$u.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},e$D.changeText=function(e$D){this._content=e$D,this._focus?(this.nativeInput.value=e$D||"",this.event("change")):e$m.prototype.changeText.call(this,e$D)},e$G(0,e$D,"color",e$m.prototype._$get_color,function(e$D){this._focus&&this.nativeInput.setColor(e$D),e$z.superSet(e$wD,this,"color",this._content?e$D:this._promptColor),this._originColor=e$D}),e$G(0,e$D,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(e$D){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),e$G(0,e$D,"multiline",function(){return this._multiline},function(e$D){this._multiline=e$D,this.valign=e$D?"top":"middle"}),e$G(0,e$D,"maxChars",function(){return this._maxChars},function(e$D){e$D<=0&&(e$D=1e5),this._maxChars=e$D}),e$G(0,e$D,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(e$D){e$z.superSet(e$wD,this,"color",this._originColor),e$D+="",this._focus?(this.nativeInput.value=e$D||"",this.event("change")):(this._multiline||(e$D=e$D.replace(/\r?\n/g,"")),(this._content=e$D)?e$z.superSet(e$wD,this,"text",e$D):(e$z.superSet(e$wD,this,"text",this._prompt),e$z.superSet(e$wD,this,"color",this.promptColor)))}),e$G(0,e$D,"nativeInput",function(){return this._multiline?e$l.area:e$l.input}),e$G(0,e$D,"prompt",function(){return this._prompt},function(e$D){!this._text&&e$D&&e$z.superSet(e$wD,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?e$z.superSet(e$wD,this,"text",this._text==this._prompt?e$D:this._text):e$z.superSet(e$wD,this,"text",e$D),this._prompt=e$wD.langPacks&&e$wD.langPacks[e$D]?e$wD.langPacks[e$D]:e$D}),e$G(0,e$D,"focus",function(){return this._focus},function(e$D){var e$m=this.nativeInput;this._focus!==e$D&&(e$D?(e$m.target?e$m.target._focusOut():this._setInputMethod(),(e$m.target=this)._focusIn()):(e$m.target=null,this._focusOut(),e$u.document.body.scrollTop=0,e$m.blur(),e$C.isConchApp?e$m.setPos(-1e4,-1e4):e$l.inputContainer.contains(e$m)&&e$l.inputContainer.removeChild(e$m)))}),e$G(0,e$D,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(e$D){e$D?(-1<(e$D="[^"+e$D+"]").indexOf("^^")&&(e$D=e$D.replace("^^","")),this._restrictPattern=new RegExp(e$D,"g")):this._restrictPattern=null}),e$G(0,e$D,"editable",function(){return this._editable},function(e$D){this._editable=e$D,e$C.isConchApp&&e$l.input.setForbidEdit(!e$D)}),e$G(0,e$D,"promptColor",function(){return this._promptColor},function(e$D){this._promptColor=e$D,this._content||e$z.superSet(e$wD,this,"color",e$D)}),e$G(0,e$D,"type",function(){return this._type},function(e$D){this._getCSSStyle().password="password"==e$D,this._type=e$D,e$C.isConchApp&&this.nativeInput.setType(e$D)}),e$G(0,e$D,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(e$D){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),e$G(0,e$D,"asPassword",function(){return this._getCSSStyle().password},function(e$D){this._getCSSStyle().password=e$D,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),e$l.__init__=function(){e$l._createInputElement(),e$u.onMobile&&e$C.canvas.addEventListener(e$l.IOS_IFRAME?e$u.onMiniGame?"touchend":"click":"touchend",e$l._popupInputMethod)},e$l._popupInputMethod=function(e$D){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},e$l._createInputElement=function(){e$l._initInput(e$l.area=e$u.createElement("textarea")),e$l._initInput(e$l.input=e$u.createElement("input")),(e$l.inputContainer=e$u.createElement("div")).style.position="absolute",e$l.inputContainer.style.zIndex=1e5,e$u.container.appendChild(e$l.inputContainer),e$l.inputContainer.setPos=function(e$D,e$m){e$l.inputContainer.style.left=e$D+"px",e$l.inputContainer.style.top=e$m+"px"}},e$l._initInput=function(e$m){var e$D=e$m.style;e$D.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",e$D.resize="none",e$D.backgroundColor="transparent",e$D.border="none",e$D.outline="none",e$D.zIndex=1,e$m.addEventListener("input",e$l._processInputting),e$m.addEventListener("mousemove",e$l._stopEvent),e$m.addEventListener("mousedown",e$l._stopEvent),e$m.addEventListener("touchmove",e$l._stopEvent),e$m.setFontFace=function(e$D){e$m.style.fontFamily=e$D},e$C.isConchApp||(e$m.setColor=function(e$D){e$m.style.color=e$D},e$m.setFontSize=function(e$D){e$m.style.fontSize=e$D+"px"})},e$l._processInputting=function(e$D){var e$m=laya.display.Input.inputElement.target;if(e$m){var e$Y=laya.display.Input.inputElement.value;e$m._restrictPattern&&(e$Y=e$Y.replace(/\u2006|\x27/g,""),e$m._restrictPattern.test(e$Y)&&(e$Y=e$Y.replace(e$m._restrictPattern,""),laya.display.Input.inputElement.value=e$Y)),e$m._text=e$Y,e$m.event("input")}},e$l._stopEvent=function(e$D){"touchmove"==e$D.type&&e$D.preventDefault(),e$D.stopPropagation&&e$D.stopPropagation()},e$l.TYPE_TEXT="text",e$l.TYPE_PASSWORD="password",e$l.TYPE_EMAIL="email",e$l.TYPE_URL="url",e$l.TYPE_NUMBER="number",e$l.TYPE_RANGE="range",e$l.TYPE_DATE="date",e$l.TYPE_MONTH="month",e$l.TYPE_WEEK="week",e$l.TYPE_TIME="time",e$l.TYPE_DATE_TIME="datetime",e$l.TYPE_DATE_TIME_LOCAL="datetime-local",e$l.TYPE_SEARCH="search",e$l.input=null,e$l.area=null,e$l.inputElement=null,e$l.inputContainer=null,e$l.confirmButton=null,e$l.promptStyleDOM=null,e$l.inputHeight=45,e$l.isInputting=!1,e$l.stageMatrix=null,e$o(e$l,["IOS_IFRAME",function(){return this.IOS_IFRAME=e$u.onIOS&&e$u.window.top!=e$u.window.self}]),e$l}(e$wD),e$SD=function(e$D){function e$Y(e$D,e$m){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,e$Y.__super.call(this),e$D&&this._init_(e$D,e$m)}e$f(e$Y,"laya.resource.HTMLImage",e$UD);var e$m=e$Y.prototype;return e$m._init_=function(e$D,e$m){this._src=e$D,this._source=new e$u.window.Image,e$m&&(e$m.onload&&(this.onload=e$m.onload),e$m.onerror&&(this.onerror=e$m.onerror),e$m.onCreate&&e$m.onCreate(this)),0!=e$D.indexOf("data:image")&&(this._source.crossOrigin=""),e$D&&(this._source.src=e$D)},e$m.recreateResource=function(){var e$D=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var e$m=this;this._source=new e$u.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(e$m._needReleaseAgain)return e$m._needReleaseAgain=!1,e$m._source.onload=null,void(e$m._source=null);e$m._source.onload=null,e$m.memorySize=e$D._w*e$D._h*4,e$m._recreateLock=!1,e$m.completeCreate()},this._source.src=this._src}},e$m.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},e$m.onresize=function(){this._w=this._source.width,this._h=this._source.height},e$G(0,e$m,"onload",null,function(e$D){var e$m=this;this._onload=e$D,this._source&&(this._source.onload=null!=this._onload?function(){e$m.onresize(),e$m._onload()}:null)}),e$G(0,e$m,"onerror",null,function(e$D){var e$m=this;this._onerror=e$D,this._source&&(this._source.onerror=null!=this._onerror?function(){e$m._onerror()}:null)}),e$G(0,e$m,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e$D){this._enableMerageInAtlas=e$D,e$C.isConchApp&&this._source&&(this._source.enableMerageInAtlas=e$D)}),e$Y.create=function(e$D,e$m){return new e$Y(e$D,e$m)},e$Y}(),e$zD=(function(e$l){function e$D(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,e$D.__super.call(this)}e$f(e$D,"laya.display.EffectAnimation",e$l);var e$m=e$D.prototype;e$m._onOtherBegin=function(e$D){e$D!=this&&this.stop()},e$m.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},e$m._onPlayAction=function(){this.play(0,!1)},e$m.play=function(e$D,e$m,e$Y,e$t){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=!0),void 0===e$Y&&(e$Y=""),void 0===e$t&&(e$t=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,e$D,e$m,e$Y,e$t))},e$m._recordInitData=function(){if(this._aniKeys){var e$D,e$m,e$Y=0;for(e$D=this._aniKeys.length,e$Y=0;e$Y<e$D;e$Y++)e$m=this._aniKeys[e$Y],this._initData[e$m]=this._target[e$m]}},e$m._displayToIndex=function(e$D){if(this._animationData){e$D<0&&(e$D=0),e$D>this._count&&(e$D=this._count);var e$m=this._animationData.nodes,e$Y=0,e$t=e$m.length;for(e$t=1<e$t?1:e$t,e$Y=0;e$Y<e$t;e$Y++)this._displayNodeToFrame(e$m[e$Y],e$D)}},e$m._displayNodeToFrame=function(e$D,e$m,e$Y){if(this._target){var e$t;e$t=this._target;var e$y,e$l,e$E,e$B,e$o=e$D.frames,e$r=e$D.keys,e$f=0,e$_=e$r.length;e$B=e$D.secondFrames;var e$i,e$R,e$G,e$I,e$w=0;for(e$f=0;e$f<e$_;e$f++)e$l=e$o[e$y=e$r[e$f]],e$E=-1==(e$w=e$B[e$y])?this._initData[e$y]:e$m<e$w?(e$G=(e$R=e$D.keyframes[e$y])[0]).tween?(null==(e$i=e$M[e$G.tweenMethod])&&(e$i=e$M.linearNone),e$I=e$R[1],e$i(e$m,this._initData[e$y],e$I.value-this._initData[e$y],e$I.index)):this._initData[e$y]:e$l.length>e$m?e$l[e$m]:e$l[e$l.length-1],e$t[e$y]=e$E}},e$m._calculateNodeKeyFrames=function(e$D){e$l.prototype._calculateNodeKeyFrames.call(this,e$D);var e$m,e$Y,e$t,e$y=e$D.keyframes;e$D.target;for(e$m in e$t={},e$D.secondFrames=e$t,e$y)(e$Y=e$y[e$m]).length<=1?e$t[e$m]=-1:e$t[e$m]=e$Y[1].index},e$G(0,e$m,"target",function(){return this._target},function(e$D){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=e$D,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),e$G(0,e$m,"playEvent",null,function(e$D){(this._playEvents=e$D)&&this.addEvent()}),e$G(0,e$m,"effectData",null,function(e$D){var e$m;e$D&&((e$m=e$D.animations)&&e$m[0]&&(this._setUp({},e$m[0]),e$m[0].nodes&&e$m[0].nodes[0]&&(this._aniKeys=e$m[0].nodes[0].keys)))}),e$G(0,e$m,"effectClass",null,function(e$D){var e$m,e$Y;(this._effectClass=e$$.getClass(e$D),this._effectClass)&&((e$m=this._effectClass.uiView)&&(e$Y=e$m.animations)&&e$Y[0]&&(this._setUp({},e$Y[0]),e$Y[0].nodes&&e$Y[0].nodes[0]&&(this._aniKeys=e$Y[0].nodes[0].keys)))}),e$D.EffectAnimationBegin="effectanimationbegin"}(e$vD),function(e$m){var e$p;function e$F(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e$F.__super.call(this)}e$f(e$F,"laya.utils.GraphicAnimation",e$m);var e$D=e$F.prototype;return e$D._parseNodeList=function(e$D){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[e$D.compId]=e$D.props,e$D.compId&&this._nodeList.push(e$D.compId);var e$m=e$D.child;if(e$m){var e$Y=0,e$t=e$m.length;for(e$Y=0;e$Y<e$t;e$Y++)this._parseNodeList(e$m[e$Y])}},e$D._calGraphicData=function(e$D){var e$m;if(this._setUp(null,e$D),this._createGraphicData(),this._nodeIDAniDic)for(e$m in this._nodeIDAniDic)this._nodeIDAniDic[e$m]=null},e$D._createGraphicData=function(){var e$D,e$m=[],e$Y=0,e$t=this.count,e$y=this._animationNewFrames;for(e$y||(e$y=[]),e$Y=0;e$Y<e$t;e$Y++)!e$y[e$Y]&&e$D||(e$D=this._createFrameGraphic(e$Y)),e$m.push(e$D);this._gList=e$m},e$D._createFrameGraphic=function(e$D){var e$m=e$s.createGraphics();return e$F._rootMatrix||(e$F._rootMatrix=new e$Q),this._updateNodeGraphic(this._rootNode,e$D,e$F._rootMatrix,e$m),e$m},e$D._updateNodeGraphic=function(e$D,e$m,e$Y,e$t,e$y){var e$l;void 0===e$y&&(e$y=1);var e$E,e$B,e$o,e$r=(e$l=this._nodeGDic[e$D.compId]=this._getNodeGraphicData(e$D.compId,e$m,this._nodeGDic[e$D.compId])).alpha*e$y;if(!(e$r<.01)&&(e$l.resultTransform||(e$l.resultTransform=e$Q.create()),e$E=e$l.resultTransform,e$Q.mul(e$l.transform,e$Y,e$E),e$l.skin&&(e$B=this._getTextureByUrl(e$l.skin))&&(e$E._checkTransform()?(e$t.drawTexture(e$B,0,0,e$l.width,e$l.height,e$E,e$r),e$l.resultTransform=null):e$t.drawTexture(e$B,e$E.tx,e$E.ty,e$l.width,e$l.height,null,e$r)),e$o=e$D.child)){var e$f,e$_=0;for(e$f=e$o.length,e$_=0;e$_<e$f;e$_++)this._updateNodeGraphic(e$o[e$_],e$m,e$E,e$t,e$r)}},e$D._updateNoChilds=function(e$D,e$m){if(e$D.skin){var e$Y=this._getTextureByUrl(e$D.skin);if(e$Y){var e$t=e$D.transform;e$t._checkTransform();!e$t.bTransform?e$m.drawTexture(e$Y,e$t.tx,e$t.ty,e$D.width,e$D.height,null,e$D.alpha):e$m.drawTexture(e$Y,0,0,e$D.width,e$D.height,e$t.clone(),e$D.alpha)}}},e$D._updateNodeGraphic2=function(e$D,e$m,e$Y){var e$t;if(e$t=this._nodeGDic[e$D.compId]=this._getNodeGraphicData(e$D.compId,e$m,this._nodeGDic[e$D.compId]),e$D.child){var e$y=e$t.transform;e$y._checkTransform();var e$l,e$E;e$E=(e$l=!e$y.bTransform)&&(0!=e$y.tx||0!=e$y.ty);var e$B,e$o,e$r;if((e$B=e$y.bTransform||1!=e$t.alpha)&&e$Y.save(),1!=e$t.alpha&&e$Y.alpha(e$t.alpha),e$l?e$E&&e$Y.translate(e$y.tx,e$y.ty):e$Y.transform(e$y.clone()),e$o=e$D.child,e$t.skin&&(e$r=this._getTextureByUrl(e$t.skin))&&e$Y.drawTexture(e$r,0,0,e$t.width,e$t.height),e$o){var e$f,e$_=0;for(e$f=e$o.length,e$_=0;e$_<e$f;e$_++)this._updateNodeGraphic2(e$o[e$_],e$m,e$Y)}e$B?e$Y.restore():e$l?e$E&&e$Y.translate(-e$y.tx,-e$y.ty):e$Y.transform(e$y.clone().invert())}else this._updateNoChilds(e$t,e$Y)},e$D._calculateNodeKeyFrames=function(e$D){e$m.prototype._calculateNodeKeyFrames.call(this,e$D),this._nodeIDAniDic[e$D.target]=e$D},e$D.getNodeDataByID=function(e$D){return this._nodeIDAniDic[e$D]},e$D._getParams=function(e$D,e$m,e$Y,e$t){var e$y=e$F._temParam;e$y.length=e$m.length;var e$l=0,e$E=e$m.length;for(e$l=0;e$l<e$E;e$l++)e$y[e$l]=this._getObjVar(e$D,e$m[e$l][0],e$Y,e$m[e$l][1],e$t);return e$y},e$D._getObjVar=function(e$D,e$m,e$Y,e$t,e$y){if(e$D.hasOwnProperty(e$m)){var e$l=e$D[e$m];if(e$Y>=e$l.length&&(e$Y=e$l.length-1),null!=e$D[e$m][e$Y])return e$D[e$m][e$Y]}return e$y.hasOwnProperty(e$m)?e$y[e$m]:e$t},e$D._getNodeGraphicData=function(e$D,e$m,e$Y){e$Y||(e$Y=e$p.create()),e$Y.transform?e$Y.transform.identity():e$Y.transform=e$Q.create();var e$t=this.getNodeDataByID(e$D);if(!e$t)return e$Y;var e$y,e$l,e$E=e$t.frames,e$B=this._getParams(e$E,e$F._drawTextureCmd,e$m,this._nodeDefaultProps[e$D]),e$o=e$B[0],e$r=NaN,e$f=NaN,e$_=e$B[5],e$i=e$B[6],e$R=e$B[13],e$G=e$B[14],e$I=e$B[7],e$w=e$B[8],e$W=e$B[9],e$U=e$B[11],e$e=e$B[12];e$r=e$B[3],e$f=e$B[4],0!=e$r&&0!=e$f||(e$o=null),-1==e$r&&(e$r=0),-1==e$f&&(e$f=0),e$Y.skin=e$o,e$Y.width=e$r,e$Y.height=e$f,e$o&&((e$y=this._getTextureByUrl(e$o))?(e$r||(e$r=e$y.sourceWidth),e$f||(e$f=e$y.sourceHeight)):console.warn("lost skin:",e$o,",you may load pics first")),e$Y.alpha=e$B[10],e$l=e$Y.transform,0!=e$R&&(e$_=e$R*e$r),0!=e$G&&(e$i=e$G*e$f),0==e$_&&0==e$i||e$l.translate(-e$_,-e$i);var e$v=null;if(e$W||1!==e$I||1!==e$w||e$U||e$e){(e$v=e$F._tempMt).identity(),e$v.bTransform=!0;var e$c=.0174532922222222*(e$W-e$U),e$S=.0174532922222222*(e$W+e$e),e$z=Math.cos(e$S),e$A=Math.sin(e$S),e$J=Math.sin(e$c),e$a=Math.cos(e$c);e$v.a=e$I*e$z,e$v.b=e$I*e$A,e$v.c=-e$w*e$J,e$v.d=e$w*e$a,e$v.tx=e$v.ty=0}return e$v&&(e$l=e$Q.mul(e$l,e$v,e$l)),e$l.translate(e$B[1],e$B[2]),e$Y},e$D._getTextureByUrl=function(e$D){return e$BD.getRes(e$D)},e$D.setAniData=function(e$D,e$m){if(e$D.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e$D,this._parseNodeList(e$D);var e$Y,e$t={},e$y=[],e$l=e$D.animations,e$E=0,e$B=e$l.length;for(e$E=0;e$E<e$B;e$E++)if(e$Y=e$l[e$E],this._labels=null,(!e$m||e$m==e$Y.name)&&e$Y){try{this._calGraphicData(e$Y)}catch(e$D){console.warn("parse animation fail:"+e$Y.name+",empty animation created"),this._gList=[]}var e$o={};e$o.interval=1e3/e$Y.frameRate,e$o.frames=this._gList,e$o.labels=this._labels,e$o.name=e$Y.name,e$y.push(e$o),e$t[e$Y.name]=e$o}this.animationList=e$y,this.animationDic=e$t}e$F._temParam.length=0},e$D.parseByData=function(e$D){var e$m,e$Y;e$m=e$D.nodeRoot,e$Y=e$D.aniO,delete e$D.nodeRoot,delete e$D.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e$m,this._parseNodeList(e$m),this._labels=null;try{this._calGraphicData(e$Y)}catch(e$D){console.warn("parse animation fail:"+e$Y.name+",empty animation created"),this._gList=[]}var e$t=e$D;return e$t.interval=1e3/e$Y.frameRate,e$t.frames=this._gList,e$t.labels=this._labels,e$t.name=e$Y.name,e$t},e$D.setUpAniData=function(e$D){if(e$D.animations){var e$m,e$Y={},e$t=[],e$y=e$D.animations,e$l=0,e$E=e$y.length;for(e$l=0;e$l<e$E;e$l++)if(e$m=e$y[e$l]){var e$B={};e$B.name=e$m.name,e$B.aniO=e$m,e$B.nodeRoot=e$D,e$t.push(e$B),e$Y[e$m.name]=e$B}this.animationList=e$t,this.animationDic=e$Y}},e$D._clear=function(){var e$D,e$m;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(e$D in this._nodeGDic)(e$m=this._nodeGDic[e$D])&&e$m.recover();this._nodeGDic=null},e$F.parseAnimationByData=function(e$D){var e$m;return e$F._I||(e$F._I=new e$F),e$m=e$F._I.parseByData(e$D),e$F._I._clear(),e$m},e$F.parseAnimationData=function(e$D){var e$m;return e$F._I||(e$F._I=new e$F),e$F._I.setUpAniData(e$D),(e$m={}).animationList=e$F._I.animationList,e$m.animationDic=e$F._I.animationDic,e$F._I._clear(),e$m},e$F._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],e$F._temParam=[],e$F._I=null,e$F._rootMatrix=null,e$o(e$F,["_tempMt",function(){return this._tempMt=new e$Q}]),e$F.__init$=function(){e$p=function(){function e$D(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return e$f(e$D,""),e$D.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),e$g.recover("GraphicNode",this)},e$D.create=function(){return e$g.getItemByClass("GraphicNode",e$D)},e$D}()},e$F}(e$vD));e$z.__init([e$r,e$oD,e$C,e$u,e$x,e$a,e$D,e$zD])}(window,document,Laya),function(e$D,e$m,e$Y){e$Y.un,e$Y.uns,e$Y.static;var e$t=e$Y.class;e$Y.getset,e$Y.__newvec;new(function(){function e$D(){}return e$t(e$D,"LayaMain"),e$D}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$y,e$D,e$S){e$S.un,e$S.uns;var e$E=e$S.static,e$i=e$S.class,e$t=e$S.getset,e$l=e$S.__newvec,e$f=laya.maths.Arith,e$_=laya.maths.Bezier,e$Y=laya.resource.Bitmap,e$R=laya.utils.Browser,e$o=laya.utils.Byte,e$G=laya.utils.Color,e$z=(laya.filters.ColorFilter,e$S.Config),e$B=laya.resource.Context,e$A=(laya.events.Event,laya.filters.Filter),e$r=laya.display.Graphics,e$I=laya.resource.HTMLCanvas,e$w=(laya.utils.HTMLChar,laya.resource.HTMLImage),e$m=laya.resource.HTMLSubImage,e$J=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),e$a=laya.maths.Point,e$p=laya.maths.Rectangle,e$W=laya.renders.Render,e$U=(laya.renders.RenderContext,laya.renders.RenderSprite),e$e=laya.resource.Resource,e$v=laya.resource.ResourceManager,e$c=laya.utils.RunDriver,e$F=laya.display.Sprite,e$s=laya.display.Stage,e$Q=laya.utils.Stat,e$T=laya.utils.StringKey,e$N=(laya.display.css.Style,laya.system.System),e$C=laya.display.Text,e$O=laya.resource.Texture,e$h=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),e$X=laya.utils.VectorGraphManager;laya.utils.WordText;e$S.interface("laya.webgl.shapes.IShape"),e$S.interface("laya.webgl.submit.ISubmit"),e$S.interface("laya.webgl.text.ICharSegment"),e$S.interface("laya.webgl.canvas.save.ISaveData"),e$S.interface("laya.webgl.resource.IMergeAtlasBitmap"),e$S.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var e$P=function(){function e$D(){}e$i(e$D,"laya.filters.webgl.FilterActionGL");var e$m=e$D.prototype;return e$S.imps(e$m,{"laya.filters.IFilterActionGL":!0}),e$m.setValue=function(e$D){},e$m.setValueMix=function(e$D){},e$m.apply3d=function(e$D,e$m,e$Y,e$t,e$y){return null},e$m.apply=function(e$D){return null},e$t(0,e$m,"typeMix",function(){return 0}),e$D}(),e$u=function(){function e$D(){}return e$i(e$D,"laya.webgl.shader.ShaderValue"),e$D}(),e$L=function(){var e$t,e$y;function e$D(e$D,e$m,e$Y){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new e$y,void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),this._cells=null,this._rowInfo=null,this._init(e$D,e$m),this._atlasID=e$Y}e$i(e$D,"laya.webgl.atlas.AtlasGrid");var e$m=e$D.prototype;return e$m.getAltasID=function(){return this._atlasID},e$m.setAltasID=function(e$D){0<=e$D&&(this._atlasID=e$D)},e$m.addTex=function(e$D,e$m,e$Y){var e$t=this._get(e$m,e$Y);return 0==e$t.ret||(this._fill(e$t.x,e$t.y,e$m,e$Y,e$D),this._texCount++),e$t},e$m._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},e$m._init=function(e$D,e$m){if(this._width=e$D,this._height=e$m,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=e$l(this._height);for(var e$Y=0;e$Y<this._height;e$Y++)this._rowInfo[e$Y]=new e$t;return this._clear(),!0},e$m._get=function(e$D,e$m){var e$Y=new e$$;if(e$D>=this._failSize.width&&e$m>=this._failSize.height)return e$Y;for(var e$t=-1,e$y=-1,e$l=this._width,e$E=this._height,e$B=this._cells,e$o=0;e$o<e$E;e$o++)if(!(this._rowInfo[e$o].spaceCount<e$D))for(var e$r=0;e$r<e$l;){var e$f=3*(e$o*e$l+e$r);if(0!=e$B[e$f]||e$B[1+e$f]<e$D||e$B[2+e$f]<e$m)e$r+=e$B[1+e$f];else{e$t=e$r,e$y=e$o;for(var e$_=0;e$_<e$D;e$_++)if(e$B[3*e$_+e$f+2]<e$m){e$t=-1;break}if(!(e$t<0))return e$Y.ret=!0,e$Y.x=e$t,e$Y.y=e$y,e$Y;e$r+=e$B[1+e$f]}}return e$Y},e$m._fill=function(e$D,e$m,e$Y,e$t,e$y){var e$l=this._width,e$E=this._height;this._check(e$D+e$Y<=e$l&&e$m+e$t<=e$E);for(var e$B=e$m;e$B<e$t+e$m;++e$B){this._check(this._rowInfo[e$B].spaceCount>=e$Y),this._rowInfo[e$B].spaceCount-=e$Y;for(var e$o=0;e$o<e$Y;e$o++){var e$r=3*(e$D+e$B*e$l+e$o);this._check(0==this._cells[e$r]),this._cells[e$r]=e$y,this._cells[1+e$r]=e$Y,this._cells[2+e$r]=e$t}}if(0<e$D)for(e$B=0;e$B<e$t;++e$B){var e$f=0;for(e$o=e$D-1;0<=e$o&&0==this._cells[3*((e$m+e$B)*e$l+e$o)];--e$o,++e$f);for(e$o=e$f;0<e$o;--e$o)this._cells[3*((e$m+e$B)*e$l+e$D-e$o)+1]=e$o,this._check(0<e$o)}if(0<e$m)for(e$o=e$D;e$o<e$D+e$Y;++e$o){for(e$f=0,e$B=e$m-1;0<=e$B&&0==this._cells[3*(e$o+e$B*e$l)];--e$B,e$f++);for(e$B=e$f;0<e$B;--e$B)this._cells[3*(e$o+(e$m-e$B)*e$l)+2]=e$B,this._check(0<e$B)}},e$m._check=function(e$D){0==e$D&&console.log("xtexMerger 错误啦")},e$m._clear=function(){for(var e$D=this._texCount=0;e$D<this._height;e$D++)this._rowInfo[e$D].spaceCount=this._width;for(var e$m=0;e$m<this._height;e$m++)for(var e$Y=0;e$Y<this._width;e$Y++){var e$t=3*(e$m*this._width+e$Y);this._cells[e$t]=0,this._cells[1+e$t]=this._width-e$Y,this._cells[2+e$t]=this._width-e$m}this._failSize.width=this._width+1,this._failSize.height=this._height+1},e$D.__init$=function(){e$t=function(){function e$D(){this.spaceCount=0}return e$i(e$D,""),e$D}(),e$y=function(){function e$D(){this.width=0,this.height=0}return e$i(e$D,""),e$D}()},e$D}(),e$q=function(){function e$W(e$D,e$m,e$Y,e$t){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=e$D,this._height=e$m,this._gridSize=e$Y,this._maxAtlaserCount=e$t,this._gridNumX=e$D/e$Y,this._gridNumY=e$m/e$Y,this._curAtlasIndex=0,this._atlaserArray=[]}e$i(e$W,"laya.webgl.atlas.AtlasResourceManager");var e$D=e$W.prototype;return e$D.setAtlasParam=function(e$D,e$m,e$Y,e$t){if(1==this._setAtlasParam)return e$W._sid_=0,this._width=e$D,this._height=e$m,this._gridSize=e$Y,this._maxAtlaserCount=e$t,this._gridNumX=e$D/e$Y,this._gridNumY=e$m/e$Y,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},e$D.pushData=function(e$D){var e$m,e$Y=e$D.bitmap,e$t=-1,e$y=null,e$l=0,e$E=0;for(e$l=0,e$m=this._atlaserArray.length;e$l<e$m&&(e$E=(this._curAtlasIndex+e$l)%e$m,-1==(e$t=(e$y=this._atlaserArray[e$E]).findBitmapIsExist(e$Y)));e$l++);if(-1!=e$t){var e$B=e$y.InAtlasWebGLImagesOffsetValue[e$t];return e$G=e$B[0],e$I=e$B[1],e$y.addToAtlas(e$D,e$G,e$I),!0}this._setAtlasParam=!1;for(var e$o=Math.ceil((e$D.bitmap.width+2)/this._gridSize),e$r=Math.ceil((e$D.bitmap.height+2)/this._gridSize),e$f=!1,e$_=0;e$_<2;e$_++){var e$i=this._maxAtlaserCount;for(e$l=0;e$l<e$i;e$l++){e$E=(this._curAtlasIndex+e$l)%e$i,this._atlaserArray.length-1>=e$E||this._atlaserArray.push(new e$pD(this._gridNumX,this._gridNumY,this._width,this._height,e$W._sid_++));var e$R=this._atlaserArray[e$E],e$G=0,e$I=0,e$w=e$R.addTex(1,e$o,e$r);if(e$w.ret){e$G=e$w.x*this._gridSize+1,e$I=e$w.y*this._gridSize+1,e$Y.lock=!0,e$R.addToAtlasTexture(e$Y,e$G,e$I),e$R.addToAtlas(e$D,e$G,e$I),e$f=!0,this._curAtlasIndex=e$E;break}}if(e$f)break;this._atlaserArray.push(new e$pD(this._gridNumX,this._gridNumY,this._width,this._height,e$W._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return e$f||console.log(">>>AtlasManager pushData error"),e$f},e$D.addToAtlas=function(e$D){laya.webgl.atlas.AtlasResourceManager.instance.pushData(e$D)},e$D.garbageCollection=function(){if(!0===this._needGC){for(var e$D=this._atlaserArray.length-this._maxAtlaserCount,e$m=0;e$m<e$D;e$m++)this._atlaserArray[e$m].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+e$D),this._atlaserArray.splice(0,e$D),this._needGC=!1}return!0},e$D.freeAll=function(){for(var e$D=0,e$m=this._atlaserArray.length;e$D<e$m;e$D++)this._atlaserArray[e$D].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},e$D.getAtlaserCount=function(){return this._atlaserArray.length},e$D.getAtlaserByIndex=function(e$D){return this._atlaserArray[e$D]},e$t(1,e$W,"instance",function(){return e$W._Instance||(e$W._Instance=new e$W(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),e$W._Instance}),e$t(1,e$W,"enabled",function(){return e$z.atlasEnable}),e$t(1,e$W,"atlasLimitWidth",function(){return e$W._atlasLimitWidth},function(e$D){e$W._atlasLimitWidth=e$D}),e$t(1,e$W,"atlasLimitHeight",function(){return e$W._atlasLimitHeight},function(e$D){e$W._atlasLimitHeight=e$D}),e$W._enable=function(){e$z.atlasEnable=!0},e$W._disable=function(){e$z.atlasEnable=!1},e$W.__init__=function(){e$W.atlasTextureWidth=2048,e$W.atlasTextureHeight=2048,e$W.maxTextureCount=6,e$W.atlasLimitWidth=512,e$W.atlasLimitHeight=512},e$W._atlasLimitWidth=0,e$W._atlasLimitHeight=0,e$W.gridSize=16,e$W.atlasTextureWidth=0,e$W.atlasTextureHeight=0,e$W.maxTextureCount=0,e$W._atlasRestore=0,e$W.BOARDER_TYPE_NO=0,e$W.BOARDER_TYPE_RIGHT=1,e$W.BOARDER_TYPE_LEFT=2,e$W.BOARDER_TYPE_BOTTOM=4,e$W.BOARDER_TYPE_TOP=8,e$W.BOARDER_TYPE_ALL=15,e$W._sid_=0,e$W._Instance=null,e$W}(),e$$=function(){function e$D(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return e$i(e$D,"laya.webgl.atlas.MergeFillInfo"),e$D}(),e$d=function(){function e$m(){}return e$i(e$m,"laya.webgl.canvas.BlendMode"),e$m._init_=function(e$D){e$m.fns=[e$m.BlendNormal,e$m.BlendAdd,e$m.BlendMultiply,e$m.BlendScreen,e$m.BlendOverlay,e$m.BlendLight,e$m.BlendMask,e$m.BlendDestinationOut],e$m.targetFns=[e$m.BlendNormalTarget,e$m.BlendAddTarget,e$m.BlendMultiplyTarget,e$m.BlendScreenTarget,e$m.BlendOverlayTarget,e$m.BlendLightTarget,e$m.BlendMask,e$m.BlendDestinationOut]},e$m.BlendNormal=function(e$D){e$D.blendFunc(1,771)},e$m.BlendAdd=function(e$D){e$D.blendFunc(1,772)},e$m.BlendMultiply=function(e$D){e$D.blendFunc(774,771)},e$m.BlendScreen=function(e$D){e$D.blendFunc(1,1)},e$m.BlendOverlay=function(e$D){e$D.blendFunc(1,769)},e$m.BlendLight=function(e$D){e$D.blendFunc(1,1)},e$m.BlendNormalTarget=function(e$D){e$D.blendFunc(1,771)},e$m.BlendAddTarget=function(e$D){e$D.blendFunc(1,772)},e$m.BlendMultiplyTarget=function(e$D){e$D.blendFunc(774,771)},e$m.BlendScreenTarget=function(e$D){e$D.blendFunc(1,1)},e$m.BlendOverlayTarget=function(e$D){e$D.blendFunc(1,769)},e$m.BlendLightTarget=function(e$D){e$D.blendFunc(1,1)},e$m.BlendMask=function(e$D){e$D.blendFunc(0,770)},e$m.BlendDestinationOut=function(e$D){e$D.blendFunc(0,0)},e$m.activeBlendFunction=null,e$m.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],e$m.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},e$m.NORMAL="normal",e$m.ADD="add",e$m.MULTIPLY="multiply",e$m.SCREEN="screen",e$m.LIGHT="light",e$m.OVERLAY="overlay",e$m.DESTINATIONOUT="destination-out",e$m.fns=[],e$m.targetFns=[],e$m}(),e$k=function(){function e$Y(e$D){this._color=e$G.create("black"),this.setValue(e$D)}e$i(e$Y,"laya.webgl.canvas.DrawStyle");var e$D=e$Y.prototype;return e$D.setValue=function(e$D){if(e$D){if("string"==typeof e$D)return void(this._color=e$G.create(e$D));if(e$D instanceof laya.utils.Color)return void(this._color=e$D)}},e$D.reset=function(){this._color=e$G.create("black")},e$D.equal=function(e$D){return"string"==typeof e$D?this._color.strColor===e$D:e$D instanceof laya.utils.Color&&this._color.numColor===e$D.numColor},e$D.toColorStr=function(){return this._color.strColor},e$Y.create=function(e$D){var e$m;if(e$D&&("string"==typeof e$D?e$m=e$G.create(e$D):e$D instanceof laya.utils.Color&&(e$m=e$D),e$m))return e$m._drawStyle||(e$m._drawStyle=new e$Y(e$D));return laya.webgl.canvas.DrawStyle.DEFAULT},e$E(e$Y,["DEFAULT",function(){return this.DEFAULT=new e$Y("#000000")}]),e$Y}(),e$M=function(){function e$D(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];e$vD.mainContext;this.ib=e$jD.create(35048),this.vb=e$KD.create(5)}e$i(e$D,"laya.webgl.canvas.Path");var e$m=e$D.prototype;return e$m.addPoint=function(e$D,e$m){this.tempArray.push(e$D,e$m)},e$m.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},e$m.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},e$m.polygon=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E;return this.geomatrys.push(this._curGeomatry=e$E=new e$TD(e$D,e$m,e$Y,e$t,e$y,e$l)),e$t||(e$E.fill=!1),null==e$l&&(e$E.borderWidth=0),e$E},e$m.setGeomtry=function(e$D){this.geomatrys.push(this._curGeomatry=e$D)},e$m.drawLine=function(e$D,e$m,e$Y,e$t,e$y){var e$l;return this.closePath?this.geomatrys.push(this._curGeomatry=e$l=new e$QD(e$D,e$m,e$Y,e$t,e$y)):this.geomatrys.push(this._curGeomatry=e$l=new e$sD(e$D,e$m,e$Y,e$t,e$y)),e$l.fill=!1,e$l},e$m.update=function(){var e$D=this.ib._byteLength,e$m=this.geomatrys.length;this.offset=e$D;for(var e$Y=this.geoStart;e$Y<e$m;e$Y++)this.geomatrys[e$Y].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=e$m,this.count=(this.ib._byteLength-e$D)/e$ID.BYTES_PIDX},e$m.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},e$m.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},e$D}(),e$n=function(){function e$B(){}e$i(e$B,"laya.webgl.canvas.save.SaveBase");var e$D=e$B.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!1},e$D.restore=function(e$D){this._dataObj[this._valueName]=this._value,(e$B._cache[e$B._cache._length++]=this)._newSubmit&&(e$D._curSubmit=e$lD.RENDERBASE,e$D._renderKey=0)},e$B._createArray=function(){var e$D=[];return e$D._length=0,e$D},e$B._init=function(){var e$D=e$B._namemap={};return e$D[1]="ALPHA",e$D[2]="fillStyle",e$D[8]="font",e$D[256]="lineWidth",e$D[512]="strokeStyle",e$D[8192]="_mergeID",e$D[1024]=e$D[2048]=e$D[4096]=[],e$D[16384]="textBaseline",e$D[32768]="textAlign",e$D[65536]="_nBlendType",e$D[1048576]="shader",e$D[2097152]="filters",e$D},e$B.save=function(e$D,e$m,e$Y,e$t){if((e$D._saveMark._saveuse&e$m)!==e$m){e$D._saveMark._saveuse|=e$m;var e$y=e$B._cache,e$l=0<e$y._length?e$y[--e$y._length]:new e$B;e$l._value=e$Y[e$l._valueName=e$B._namemap[e$m]],e$l._dataObj=e$Y,e$l._newSubmit=e$t;var e$E=e$D._save;e$E[e$E._length++]=e$l}},e$B._cache=laya.webgl.canvas.save.SaveBase._createArray(),e$B._namemap=e$B._init(),e$B}(),e$g=function(){function e$l(){this._clipRect=new e$p}e$i(e$l,"laya.webgl.canvas.save.SaveClipRect");var e$D=e$l.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!1},e$D.restore=function(e$D){e$D._clipRect=this._clipSaveRect,(e$l._cache[e$l._cache._length++]=this)._submitScissor.submitLength=e$D._submits._length-this._submitScissor.submitIndex,e$D._curSubmit=e$lD.RENDERBASE,e$D._renderKey=0},e$l.save=function(e$D,e$m){if(131072!=(131072&e$D._saveMark._saveuse)){e$D._saveMark._saveuse|=131072;var e$Y=e$l._cache,e$t=0<e$Y._length?e$Y[--e$Y._length]:new e$l;e$t._clipSaveRect=e$D._clipRect,e$D._clipRect=e$t._clipRect.copyFrom(e$D._clipRect),e$t._submitScissor=e$m;var e$y=e$D._save;e$y[e$y._length++]=e$t}},e$E(e$l,["_cache",function(){return this._cache=e$n._createArray()}]),e$l}(),e$H=function(){function e$R(){this._contextX=0,this._contextY=0,this._clipRect=new e$p,this._rect=new e$p,this._matrix=new e$J}e$i(e$R,"laya.webgl.canvas.save.SaveClipRectStencil");var e$D=e$R.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!1},e$D.restore=function(e$D){e$fD.restore(e$D,this._rect,this._saveMatrix,this._contextX,this._contextY),e$D._clipRect=this._clipSaveRect,e$D._curMat=this._saveMatrix,e$D._x=this._contextX,e$D._y=this._contextY,e$R._cache[e$R._cache._length++]=this,e$D._curSubmit=e$lD.RENDERBASE},e$R.save=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){if(262144!=(262144&e$D._saveMark._saveuse)){e$D._saveMark._saveuse|=262144;var e$f=e$R._cache,e$_=0<e$f._length?e$f[--e$f._length]:new e$R;e$_._clipSaveRect=e$D._clipRect,e$_._clipRect.setTo(e$E,e$B,e$o,e$r),e$D._clipRect=e$_._clipRect,e$_._rect.x=e$Y,e$_._rect.y=e$t,e$_._rect.width=e$y,e$_._rect.height=e$l,e$_._contextX=e$D._x,e$_._contextY=e$D._y,e$_._saveMatrix=e$D._curMat,e$D._curMat.copyTo(e$_._matrix),e$D._curMat=e$_._matrix,e$_._submitStencil=e$m;var e$i=e$D._save;e$i[e$i._length++]=e$_}},e$E(e$R,["_cache",function(){return this._cache=e$n._createArray()}]),e$R}(),e$x=function(){function e$t(){this._saveuse=0}e$i(e$t,"laya.webgl.canvas.save.SaveMark");var e$D=e$t.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!0},e$D.restore=function(e$D){e$D._saveMark=this._preSaveMark,e$t._no[e$t._no._length++]=this},e$t.Create=function(e$D){var e$m=e$t._no,e$Y=0<e$m._length?e$m[--e$m._length]:new e$t;return e$Y._saveuse=0,e$Y._preSaveMark=e$D._saveMark,e$D._saveMark=e$Y},e$E(e$t,["_no",function(){return this._no=e$n._createArray()}]),e$t}(),e$V=function(){function e$l(){this._matrix=new e$J}e$i(e$l,"laya.webgl.canvas.save.SaveTransform");var e$D=e$l.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!1},e$D.restore=function(e$D){e$D._curMat=this._savematrix,e$l._no[e$l._no._length++]=this},e$l.save=function(e$D){var e$m=e$D._saveMark;if(2048!=(2048&e$m._saveuse)){e$m._saveuse|=2048;var e$Y=e$l._no,e$t=0<e$Y._length?e$Y[--e$Y._length]:new e$l;e$t._savematrix=e$D._curMat,e$D._curMat=e$D._curMat.copyTo(e$t._matrix);var e$y=e$D._save;e$y[e$y._length++]=e$t}},e$E(e$l,["_no",function(){return this._no=e$n._createArray()}]),e$l}(),e$Z=function(){function e$y(){}e$i(e$y,"laya.webgl.canvas.save.SaveTranslate");var e$D=e$y.prototype;return e$S.imps(e$D,{"laya.webgl.canvas.save.ISaveData":!0}),e$D.isSaveMark=function(){return!1},e$D.restore=function(e$D){e$D._curMat;e$D._x=this._x,e$D._y=this._y,e$y._no[e$y._no._length++]=this},e$y.save=function(e$D){var e$m=e$y._no,e$Y=0<e$m._length?e$m[--e$m._length]:new e$y;e$Y._x=e$D._x,e$Y._y=e$D._y;var e$t=e$D._save;e$t[e$t._length++]=e$Y},e$E(e$y,["_no",function(){return this._no=e$n._createArray()}]),e$y}(),e$b=function(){function e$D(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new e$p}e$i(e$D,"laya.webgl.resource.RenderTargetMAX");var e$m=e$D.prototype;return e$m.setSP=function(e$D){this._sp=e$D},e$m.size=function(e$D,e$m){var e$Y=this;this._width!==e$D||this._height!==e$m?(this.repaint=!0,this._width=e$D,this._height=e$m,this.target?this.target.size(e$D,e$m):this.target=e$XD.create(e$D,e$m),this.target.hasListener("recovered")||this.target.on("recovered",this,function(e$D){e$S.timer.callLater(e$Y._sp,e$Y._sp.repaint)})):this.target.size(e$D,e$m)},e$m._flushToTarget=function(e$D,e$m){if(!e$m._destroy){var e$Y=e$UD.worldScissorTest,e$t=e$UD.worldClipRect;e$UD.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,e$UD.worldScissorTest=!1,e$vD.mainContext.disable(3089);var e$y=e$UD.worldAlpha,e$l=e$UD.worldMatrix4,e$E=e$UD.worldMatrix,e$B=e$UD.worldFilters,e$o=e$UD.worldShaderDefines;if(e$UD.worldMatrix=e$J.EMPTY,e$UD.restoreTempArray(),e$UD.worldMatrix4=e$UD.TEMPMAT4_ARRAY,e$UD.worldAlpha=1,e$UD.worldFilters=null,e$UD.worldShaderDefines=null,e$hD.activeShader=null,e$m.start(),e$z.showCanvasMark?e$m.clear(0,1,0,.3):e$m.clear(0,0,0,0),e$D.flush(),e$m.end(),e$hD.activeShader=null,e$UD.worldAlpha=e$y,e$UD.worldMatrix4=e$l,e$UD.worldMatrix=e$E,e$UD.worldFilters=e$B,e$UD.worldShaderDefines=e$o,e$UD.worldScissorTest=e$Y){var e$r=e$UD.height-e$t.y-e$t.height;e$vD.mainContext.scissor(e$t.x,e$r,e$t.width,e$t.height),e$vD.mainContext.enable(3089)}e$UD.worldClipRect=e$t}},e$m.flush=function(e$D){this.repaint&&(this._flushToTarget(e$D,this.target),this.repaint=!1)},e$m.drawTo=function(e$D,e$m,e$Y,e$t,e$y){e$D.drawTexture(this.target.getTexture(),e$m,e$Y,e$t,e$y,0,0)},e$m.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},e$D}(),e$j=function(){function e$D(){this.ALPHA=1,this.shaderType=0,this.defines=new e$FD}return e$i(e$D,"laya.webgl.shader.d2.Shader2D"),e$D.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},e$D.__init__=function(){var e$D,e$m;e$xD.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),e$xD.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),e$xD.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),e$xD.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),e$xD.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),e$xD.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),e$xD.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),e$xD.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),e$D="attribute vec4 position;\n",e$D+="attribute vec2 texcoord;\n",e$D+="uniform vec2 size;\n\n",e$D+="#ifdef WORLDMAT\n",e$D+="  uniform mat4 mmat;\n",e$D+="#endif\n",e$D+="varying vec2 v_texcoord;\n",e$D+="void main() {\n",e$D+="  #ifdef WORLDMAT\n",e$D+="  vec4 pos=mmat*position;\n",e$D+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",e$D+="  #else\n",e$D+="  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",e$D+="  #endif\n\n",e$D+="  v_texcoord = texcoord;\n",e$D+="}",e$m="precision mediump float;\n",e$m+="varying vec2 v_texcoord;\n",e$m+="uniform sampler2D texture;\n\n",e$m+="#ifdef COLORMUL\n",e$m+="  uniform vec4 colorMul;\n",e$m+="#endif\n\n",e$m+="#ifdef TXTALPHA\n",e$m+="  uniform sampler2D texture1;\n",e$m+="#endif\n\n",e$m+="uniform float alpha;\n",e$m+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',e$m+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',e$m+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',e$m+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',e$m+="void main() {\n",e$m+="   vec4 color= texture2D(texture, v_texcoord);\n\n",e$m+="   #ifdef TXTCOMPRESS\n",e$m+="      color.rgb *= color.a;\n",e$m+="   #endif\n\n",e$m+="   #ifdef TXTALPHA\n",e$m+="      color.rgba *= texture2D(texture1, v_texcoord).a;\n",e$m+="   #endif\n\n",e$m+="   color.a*=alpha;\n",e$m+="   color.rgb*=alpha;\n",e$m+="   #ifdef COLORMUL\n",e$m+="      color.rgba *= colorMul;\n",e$m+="   #endif\n\n",e$m+="   gl_FragColor=color;\n",e$m+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',e$m+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',e$m+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',e$m+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',e$m+="}",e$xD.preCompile2D(0,1,e$D,e$m,null),e$D="attribute vec4 position;\n",e$D+="uniform vec2 size;\n",e$D+="uniform mat4 mmat;\n",e$D+="void main() {\n",e$D+="  vec4 pos=mmat*position;\n",e$D+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",e$D+="}",e$m="precision mediump float;\n",e$m+="uniform vec4 color;\n",e$m+="uniform float alpha;\n",e$m+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',e$m+="void main() {\n",e$m+="\t vec4 a = vec4(color.r, color.g, color.b, color.a);\n",e$m+="\t a.w = alpha;\n",e$m+="\t a.xyz *= alpha;\n",e$m+="\t gl_FragColor = a;\n",e$m+='\t #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',e$m+="}",e$xD.preCompile2D(0,2,e$D,e$m,null),e$D="attribute vec4 position;\n",e$D+="attribute vec3 a_color;\n",e$D+="uniform mat4 mmat;\n",e$D+="uniform mat4 u_mmat2;\n",e$D+="uniform vec2 u_pos;\n",e$D+="uniform vec2 size;\n",e$D+="varying vec3 color;\n",e$D+="void main(){\n",e$D+="  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n",e$D+="  vec4 pos=mmat*u_mmat2*tPos;\n",e$D+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",e$D+="  color=a_color;\n",e$D+="}",e$m="precision mediump float;\n",e$m+="varying vec3 color;\n",e$m+="uniform float alpha;\n",e$m+="void main(){\n",e$m+="  gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n",e$m+="\t gl_FragColor.rgb*=alpha;\n",e$m+="}",e$xD.preCompile2D(0,4,e$D,e$m,null),e$D="attribute vec4 position;\n",e$D+="attribute vec2 texcoord;\n",e$D+="uniform vec2 size;\n\n",e$D+="#ifdef WORLDMAT\n",e$D+="  uniform mat4 mmat;\n",e$D+="#endif\n",e$D+="varying vec2 v_texcoord;\n",e$D+="void main() {\n",e$D+="  #ifdef WORLDMAT\n",e$D+="    vec4 pos=mmat*position;\n",e$D+="    gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",e$D+="  #else\n",e$D+="    gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",e$D+="  #endif\n\n",e$D+="  v_texcoord = texcoord;\n",e$D+="}",e$m="#ifdef FSHIGHPRECISION\n",e$m+="   precision highp float;\n",e$m+="#else\n",e$m+="   precision mediump float;\n",e$m+="#endif\n",e$m+="varying vec2 v_texcoord;\n",e$m+="uniform sampler2D texture;\n\n",e$m+="#ifdef TXTALPHA\n",e$m+="   uniform sampler2D texture1;\n",e$m+="#endif\n\n",e$m+="uniform float alpha;\n",e$m+="uniform vec4 u_TexRange;\n",e$m+="uniform vec2 u_offset;\n",e$m+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',e$m+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',e$m+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',e$m+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',e$m+="void main() {\n",e$m+="   vec2 newTexCoord;\n",e$m+="   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n",e$m+="   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n",e$m+="   vec4 color= texture2D(texture, newTexCoord);\n\n",e$m+="   #ifdef TXTALPHA\n",e$m+="      color.a = texture2D(texture1, newTexCoord).a;\n",e$m+="   #endif\n\n",e$m+="   color.a*=alpha;\n",e$m+="   gl_FragColor=color;\n",e$m+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',e$m+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',e$m+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',e$m+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',e$m+="}",e$xD.preCompile2D(0,256,e$D,e$m,null),e$D="attribute vec2 position;\n",e$D+="attribute vec2 texcoord;\n",e$D+="attribute vec4 color;\n",e$D+="uniform vec2 size;\n",e$D+="uniform float offsetX;\n",e$D+="uniform float offsetY;\n",e$D+="uniform mat4 mmat;\n",e$D+="uniform mat4 u_mmat2;\n",e$D+="varying vec2 v_texcoord;\n",e$D+="varying vec4 v_color;\n",e$D+="void main() {\n",e$D+="  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n",e$D+="  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",e$D+="  v_color = color;\n",e$D+="  v_color.rgb *= v_color.a;\n",e$D+="  v_texcoord = texcoord;  \n",e$D+="}",e$m="precision mediump float;\n",e$m+="varying vec2 v_texcoord;\n",e$m+="varying vec4 v_color;\n",e$m+="uniform sampler2D texture;\n\n",e$m+="#ifdef TXTALPHA\n",e$m+="  uniform sampler2D texture1;\n",e$m+="#endif\n\n",e$m+="uniform float alpha;\n",e$m+="void main() {\n",e$m+="\t vec4 t_color = texture2D(texture, v_texcoord);\n\n",e$m+="  #ifdef TXTALPHA\n",e$m+="    t_color.a = texture2D(texture1, v_texcoord).a;\n",e$m+="  #endif\n\n",e$m+="\t gl_FragColor = t_color.rgba * v_color;\n",e$m+="\t gl_FragColor *= alpha;\n",e$m+="}",e$xD.preCompile2D(0,512,e$D,e$m,null)},e$D}(),e$K=function(){function e$m(e$D,e$m,e$Y){this._value=0,this._name2int=e$D,this._int2name=e$m,this._int2nameMap=e$Y}e$i(e$m,"laya.webgl.shader.ShaderDefines");var e$D=e$m.prototype;return e$D.add=function(e$D){return"string"==typeof e$D&&(e$D=this._name2int[e$D]),this._value|=e$D,this._value},e$D.addInt=function(e$D){return this._value|=e$D,this._value},e$D.remove=function(e$D){return"string"==typeof e$D&&(e$D=this._name2int[e$D]),this._value&=~e$D,this._value},e$D.isDefine=function(e$D){return(this._value&e$D)===e$D},e$D.getValue=function(){return this._value},e$D.setValue=function(e$D){this._value=e$D},e$D.toNameDic=function(){var e$D=this._int2nameMap[this._value];return e$D||e$m._toText(this._value,this._int2name,this._int2nameMap)},e$m._reg=function(e$D,e$m,e$Y,e$t){e$t[e$Y[e$D]=e$m]=e$D},e$m._toText=function(e$D,e$m,e$Y){var e$t=e$Y[e$D];if(e$t)return e$t;for(var e$y={},e$l=1,e$E=0;e$E<32&&!(e$D<(e$l=1<<e$E));e$E++)if(e$D&e$l){var e$B=e$m[e$l];e$B&&(e$y[e$B]="")}return e$Y[e$D]=e$y},e$m._toInt=function(e$D,e$m){for(var e$Y=e$D.split("."),e$t=0,e$y=0,e$l=e$Y.length;e$y<e$l;e$y++){var e$E=e$m[e$Y[e$y]];if(!e$E)throw new Error("Defines to int err:"+e$D+"/"+e$Y[e$y]);e$t|=e$E}return e$t},e$m}(),e$DD=function(){function e$E(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new e$J}e$i(e$E,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var e$D=e$E.prototype;return e$D.init=function(e$D,e$m,e$Y){if(e$m)this._vs=e$m;else{this._vs=[];var e$t=e$D.width,e$y=e$D.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(e$t,0,1,0,1,1,1,1),this._vs.push(e$t,e$y,1,1,1,1,1,1),this._vs.push(0,e$y,0,1,1,1,1,1)}e$Y?this._ps=e$Y:(e$E._defaultPS||(e$E._defaultPS=[]).push(0,1,3,3,1,2),this._ps=e$E._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=e$D},e$D.init2=function(e$D,e$m,e$Y,e$t,e$y){this.transform&&(this.transform=null),e$Y?this._ps=e$Y:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=e$t,this._uvs=e$y,this.mEleNum=this._ps.length,this.mTexture=e$D,(e$W.isConchNode||e$W.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},e$D._initMyData=function(){var e$D=0,e$m=0,e$Y=4*this._verticles.length;this._vs=e$E._tempVS;var e$t=!1;if(e$W.isConchNode||e$W.isConchApp?(this._vs.length=e$Y,e$t=!0):this._vs.length<e$Y&&(this._vs.length=e$Y,e$t=!0),e$E._tVSLen=e$Y,e$t)for(;e$D<e$Y;)this._vs[e$D]=this._verticles[e$m],this._vs[e$D+1]=this._verticles[e$m+1],this._vs[e$D+2]=this._uvs[e$m],this._vs[e$D+3]=this._uvs[e$m+1],this._vs[e$D+4]=1,this._vs[e$D+5]=1,this._vs[e$D+6]=1,this._vs[e$D+7]=1,e$D+=8,e$m+=2;else for(;e$D<e$Y;)this._vs[e$D]=this._verticles[e$m],this._vs[e$D+1]=this._verticles[e$m+1],this._vs[e$D+2]=this._uvs[e$m],this._vs[e$D+3]=this._uvs[e$m+1],e$D+=8,e$m+=2},e$D.getData2=function(e$D,e$m,e$Y){var e$t;this.mVBBuffer=e$D,this.mIBBuffer=e$m,this._initMyData(),e$D.appendEx2(this._vs,Float32Array,e$E._tVSLen,4),this._indexStart=e$m._byteLength,(e$t=e$E._tempIB).length<this._ps.length&&(e$t.length=this._ps.length);for(var e$y=0,e$l=this._ps.length;e$y<e$l;e$y++)e$t[e$y]=this._ps[e$y]+e$Y;e$m.appendEx2(e$t,Uint16Array,this._ps.length,2)},e$D.getData=function(e$D,e$m,e$Y){if(this.mVBBuffer=e$D,this.mIBBuffer=e$m,e$D.append(this.mVBData),this._indexStart=e$m._byteLength,this.mIBData.start!=e$Y){for(var e$t=0,e$y=this._ps.length;e$t<e$y;e$t++)this.mIBData[e$t]=this._ps[e$t]+e$Y;this.mIBData.start=e$Y}e$m.append(this.mIBData)},e$D.render=function(e$D,e$m,e$Y){if(e$W.isWebGL&&this.mTexture){e$D._renderKey=0,e$D._shader2D.glTexture=null,e$mD.getInstance().addSkinMesh(this);var e$t=e$lD.createShape(e$D,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,e$AD.create(512,0));this.transform||(this.transform=e$J.EMPTY),this.transform.translate(e$m,e$Y),e$J.mul(this.transform,e$D._curMat,this._tempMatrix),this.transform.translate(-e$m,-e$Y);var e$y=e$t.shaderValue,e$l=e$y.u_mmat2||e$UD.getMatrArray();e$UD.mat2MatArray(this._tempMatrix,e$l),e$y.textureHost=this.mTexture,e$y.offsetX=0,e$y.offsetY=0,e$y.u_mmat2=e$l,e$y.ALPHA=e$D._shader2D.ALPHA,e$D._submits[e$D._submits._length++]=e$t}else e$W.isConchApp&&this.mTexture&&(this.transform||(this.transform=e$J.EMPTY),e$D.setSkinMesh&&e$D.setSkinMesh(e$m,e$Y,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},e$E._tempVS=[],e$E._tempIB=[],e$E._defaultPS=null,e$E._tVSLen=0,e$E}(),e$mD=function(){function e$D(){this.ib=null,this.vb=null;e$vD.mainContext;this.ib=e$jD.create(35048),this.vb=e$KD.create(8)}e$i(e$D,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e$m=e$D.prototype;return e$m.addSkinMesh=function(e$D){e$D.getData2(this.vb,this.ib,this.vb._byteLength/32)},e$m.reset=function(){this.vb.clear(),this.ib.clear()},e$D.getInstance=function(){return e$D.instance=e$D.instance||new e$D},e$D.instance=null,e$D}(),e$YD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===e$o&&(e$o=0),this.x=e$D,this.y=e$m,this.width=e$Y,this.height=e$t,this.edges=e$y,this.color=e$l,this.borderWidth=e$E,this.borderColor=e$B}e$i(e$D,"laya.webgl.shapes.BasePoly");var e$m=e$D.prototype;return e$S.imps(e$m,{"laya.webgl.shapes.IShape":!0}),e$m.getData=function(e$D,e$m,e$Y){},e$m.rebuild=function(e$D){},e$m.setMatrix=function(e$D){},e$m.needUpdate=function(e$D){return!0},e$m.sector=function(e$D,e$m,e$Y){var e$t=this.x,e$y=this.y,e$l=this.edges,e$E=(this.r1-this.r0)/e$l,e$B=this.width,e$o=this.height,e$r=this.color,e$f=(e$r>>16&255)/255,e$_=(e$r>>8&255)/255,e$i=(255&e$r)/255;e$D.push(e$t,e$y,e$f,e$_,e$i);for(var e$R=0;e$R<e$l+1;e$R++)e$D.push(e$t+Math.sin(e$E*e$R+this.r0)*e$B,e$y+Math.cos(e$E*e$R+this.r0)*e$o),e$D.push(e$f,e$_,e$i);for(e$R=0;e$R<e$l;e$R++)e$m.push(e$Y,e$Y+e$R+1,e$Y+e$R+2)},e$m.createLine2=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R,e$G,e$I,e$w,e$W,e$U,e$e,e$v,e$c,e$S,e$z,e$A,e$J,e$a=e$D.concat(),e$p=e$y,e$F=this.borderColor,e$s=(e$F>>16&255)/255,e$Q=(e$F>>8&255)/255,e$T=(255&e$F)/255,e$N=e$a.length/2,e$C=e$t,e$O=e$Y/2;e$o=e$a[0],e$r=e$a[1],e$I=e$o-(e$f=e$a[2]),e$G=(e$G=-(e$r-(e$_=e$a[3])))/(e$J=Math.sqrt(e$G*e$G+e$I*e$I))*e$O,e$I=e$I/e$J*e$O,e$p.push(e$o-e$G+this.x,e$r-e$I+this.y,e$s,e$Q,e$T,e$o+e$G+this.x,e$r+e$I+this.y,e$s,e$Q,e$T);for(var e$h=1;e$h<e$N-1;e$h++)e$o=e$a[2*(e$h-1)],e$r=e$a[2*(e$h-1)+1],e$f=e$a[2*e$h],e$_=e$a[2*e$h+1],e$i=e$a[2*(e$h+1)],e$R=e$a[2*(e$h+1)+1],e$I=e$o-e$f,e$W=e$f-e$i,e$v=(-(e$G=(e$G=-(e$r-e$_))/(e$J=Math.sqrt(e$G*e$G+e$I*e$I))*e$O)+e$o)*(-(e$I=e$I/e$J*e$O)+e$_)-(-e$G+e$f)*(-e$I+e$r),e$z=(-(e$w=(e$w=-(e$_-e$R))/(e$J=Math.sqrt(e$w*e$w+e$W*e$W))*e$O)+e$i)*(-(e$W=e$W/e$J*e$O)+e$_)-(-e$w+e$f)*(-e$W+e$R),e$A=(e$U=-e$I+e$r-(-e$I+e$_))*(e$S=-e$w+e$f-(-e$w+e$i))-(e$c=-e$W+e$R-(-e$W+e$_))*(e$e=-e$G+e$f-(-e$G+e$o)),Math.abs(e$A)<.1?(e$A+=10.1,e$p.push(e$f-e$G+this.x,e$_-e$I+this.y,e$s,e$Q,e$T,e$f+e$G+this.x,e$_+e$I+this.y,e$s,e$Q,e$T)):(((e$E=(e$e*e$z-e$S*e$v)/e$A)-e$f)*(e$E-e$f)+((e$B=(e$c*e$v-e$U*e$z)/e$A)-e$_)+(e$B-e$_),e$p.push(e$E+this.x,e$B+this.y,e$s,e$Q,e$T,e$f-(e$E-e$f)+this.x,e$_-(e$B-e$_)+this.y,e$s,e$Q,e$T));e$o=e$a[e$a.length-4],e$r=e$a[e$a.length-3],e$I=e$o-(e$f=e$a[e$a.length-2]),e$G=(e$G=-(e$r-(e$_=e$a[e$a.length-1])))/(e$J=Math.sqrt(e$G*e$G+e$I*e$I))*e$O,e$I=e$I/e$J*e$O,e$p.push(e$f-e$G+this.x,e$_-e$I+this.y,e$s,e$Q,e$T,e$f+e$G+this.x,e$_+e$I+this.y,e$s,e$Q,e$T);var e$X=e$l;for(e$h=1;e$h<e$X;e$h++)e$m.push(e$C+2*(e$h-1),e$C+2*(e$h-1)+1,e$C+2*e$h+1,e$C+2*e$h+1,e$C+2*e$h,e$C+2*(e$h-1));return e$p},e$m.createLine=function(e$D,e$m,e$Y,e$t){var e$y=e$D.concat(),e$l=e$D,e$E=this.borderColor,e$B=(e$E>>16&255)/255,e$o=(e$E>>8&255)/255,e$r=(255&e$E)/255;e$y.splice(0,5);var e$f,e$_,e$i,e$R,e$G,e$I,e$w,e$W,e$U,e$e,e$v,e$c,e$S,e$z,e$A,e$J,e$a,e$p,e$F,e$s,e$Q=e$y.length/5,e$T=e$t,e$N=e$Y/2;e$i=e$y[0],e$R=e$y[1],e$e=e$i-(e$G=e$y[5]),e$U=(e$U=-(e$R-(e$I=e$y[6])))/(e$s=Math.sqrt(e$U*e$U+e$e*e$e))*e$N,e$e=e$e/e$s*e$N,e$l.push(e$i-e$U,e$R-e$e,e$B,e$o,e$r,e$i+e$U,e$R+e$e,e$B,e$o,e$r);for(var e$C=1;e$C<e$Q-1;e$C++)e$i=e$y[5*(e$C-1)],e$R=e$y[5*(e$C-1)+1],e$G=e$y[5*e$C],e$I=e$y[5*e$C+1],e$w=e$y[5*(e$C+1)],e$W=e$y[5*(e$C+1)+1],e$e=e$i-e$G,e$c=e$G-e$w,e$A=(-(e$U=(e$U=-(e$R-e$I))/(e$s=Math.sqrt(e$U*e$U+e$e*e$e))*e$N)+e$i)*(-(e$e=e$e/e$s*e$N)+e$I)-(-e$U+e$G)*(-e$e+e$R),e$p=(-(e$v=(e$v=-(e$I-e$W))/(e$s=Math.sqrt(e$v*e$v+e$c*e$c))*e$N)+e$w)*(-(e$c=e$c/e$s*e$N)+e$I)-(-e$v+e$G)*(-e$c+e$W),e$F=(e$S=-e$e+e$R-(-e$e+e$I))*(e$a=-e$v+e$G-(-e$v+e$w))-(e$J=-e$c+e$W-(-e$c+e$I))*(e$z=-e$U+e$G-(-e$U+e$i)),Math.abs(e$F)<.1?(e$F+=10.1,e$l.push(e$G-e$U,e$I-e$e,e$B,e$o,e$r,e$G+e$U,e$I+e$e,e$B,e$o,e$r)):(((e$f=(e$z*e$p-e$a*e$A)/e$F)-e$G)*(e$f-e$G)+((e$_=(e$J*e$A-e$S*e$p)/e$F)-e$I)+(e$_-e$I),e$l.push(e$f,e$_,e$B,e$o,e$r,e$G-(e$f-e$G),e$I-(e$_-e$I),e$B,e$o,e$r));e$i=e$y[e$y.length-10],e$R=e$y[e$y.length-9],e$e=e$i-(e$G=e$y[e$y.length-5]),e$U=(e$U=-(e$R-(e$I=e$y[e$y.length-4])))/(e$s=Math.sqrt(e$U*e$U+e$e*e$e))*e$N,e$e=e$e/e$s*e$N,e$l.push(e$G-e$U,e$I-e$e,e$B,e$o,e$r,e$G+e$U,e$I+e$e,e$B,e$o,e$r);var e$O=this.edges+1;for(e$C=1;e$C<e$O;e$C++)e$m.push(e$T+2*(e$C-1),e$T+2*(e$C-1)+1,e$T+2*e$C+1,e$T+2*e$C+1,e$T+2*e$C,e$T+2*(e$C-1));return e$l},e$m.createLoopLine=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$D.concat(),e$B=e$y||e$D,e$o=this.borderColor,e$r=(e$o>>16&255)/255,e$f=(e$o>>8&255)/255,e$_=(255&e$o)/255;e$E.splice(0,5);var e$i=[e$E[0],e$E[1]],e$R=[e$E[e$E.length-5],e$E[e$E.length-4]],e$G=e$R[0]+.5*(e$i[0]-e$R[0]),e$I=e$R[1]+.5*(e$i[1]-e$R[1]);e$E.unshift(e$G,e$I,0,0,0),e$E.push(e$G,e$I,0,0,0);var e$w,e$W,e$U,e$e,e$v,e$c,e$S,e$z,e$A,e$J,e$a,e$p,e$F,e$s,e$Q,e$T,e$N,e$C,e$O,e$h,e$X=e$E.length/5,e$P=e$t,e$u=e$Y/2;e$U=e$E[0],e$e=e$E[1],e$J=e$U-(e$v=e$E[5]),e$A=(e$A=-(e$e-(e$c=e$E[6])))/(e$h=Math.sqrt(e$A*e$A+e$J*e$J))*e$u,e$J=e$J/e$h*e$u,e$B.push(e$U-e$A,e$e-e$J,e$r,e$f,e$_,e$U+e$A,e$e+e$J,e$r,e$f,e$_);for(var e$L=1;e$L<e$X-1;e$L++)e$U=e$E[5*(e$L-1)],e$e=e$E[5*(e$L-1)+1],e$v=e$E[5*e$L],e$c=e$E[5*e$L+1],e$S=e$E[5*(e$L+1)],e$z=e$E[5*(e$L+1)+1],e$J=e$U-e$v,e$p=e$v-e$S,e$Q=(-(e$A=(e$A=-(e$e-e$c))/(e$h=Math.sqrt(e$A*e$A+e$J*e$J))*e$u)+e$U)*(-(e$J=e$J/e$h*e$u)+e$c)-(-e$A+e$v)*(-e$J+e$e),e$C=(-(e$a=(e$a=-(e$c-e$z))/(e$h=Math.sqrt(e$a*e$a+e$p*e$p))*e$u)+e$S)*(-(e$p=e$p/e$h*e$u)+e$c)-(-e$a+e$v)*(-e$p+e$z),e$O=(e$F=-e$J+e$e-(-e$J+e$c))*(e$N=-e$a+e$v-(-e$a+e$S))-(e$T=-e$p+e$z-(-e$p+e$c))*(e$s=-e$A+e$v-(-e$A+e$U)),Math.abs(e$O)<.1?(e$O+=10.1,e$B.push(e$v-e$A,e$c-e$J,e$r,e$f,e$_,e$v+e$A,e$c+e$J,e$r,e$f,e$_)):(((e$w=(e$s*e$C-e$N*e$Q)/e$O)-e$v)*(e$w-e$v)+((e$W=(e$T*e$Q-e$F*e$C)/e$O)-e$c)+(e$W-e$c),e$B.push(e$w,e$W,e$r,e$f,e$_,e$v-(e$w-e$v),e$c-(e$W-e$c),e$r,e$f,e$_));e$l&&(e$m=e$l);var e$q=this.edges+1;for(e$L=1;e$L<e$q;e$L++)e$m.push(e$P+2*(e$L-1),e$P+2*(e$L-1)+1,e$P+2*e$L+1,e$P+2*e$L+1,e$P+2*e$L,e$P+2*(e$L-1));return e$m.push(e$P+2*(e$L-1),e$P+2*(e$L-1)+1,e$P+1,e$P+1,e$P,e$P+2*(e$L-1)),e$B},e$D}(),e$tD=function(){function e$I(){}return e$i(e$I,"laya.webgl.shapes.Earcut"),e$I.earcut=function(e$D,e$m,e$Y){e$Y=e$Y||2;var e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f=e$m&&e$m.length,e$_=e$f?e$m[0]*e$Y:e$D.length,e$i=e$I.linkedList(e$D,0,e$_,e$Y,!0),e$R=[];if(!e$i)return e$R;if(e$f&&(e$i=e$I.eliminateHoles(e$D,e$m,e$i,e$Y)),e$D.length>80*e$Y){e$t=e$l=e$D[0],e$y=e$E=e$D[1];for(var e$G=e$Y;e$G<e$_;e$G+=e$Y)(e$B=e$D[e$G])<e$t&&(e$t=e$B),(e$o=e$D[e$G+1])<e$y&&(e$y=e$o),e$l<e$B&&(e$l=e$B),e$E<e$o&&(e$E=e$o);e$r=0!==(e$r=Math.max(e$l-e$t,e$E-e$y))?1/e$r:0}return e$I.earcutLinked(e$i,e$R,e$Y,e$t,e$y,e$r),e$R},e$I.linkedList=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E;if(e$y===0<e$I.signedArea(e$D,e$m,e$Y,e$t))for(e$l=e$m;e$l<e$Y;e$l+=e$t)e$E=e$I.insertNode(e$l,e$D[e$l],e$D[e$l+1],e$E);else for(e$l=e$Y-e$t;e$m<=e$l;e$l-=e$t)e$E=e$I.insertNode(e$l,e$D[e$l],e$D[e$l+1],e$E);return e$E&&e$I.equals(e$E,e$E.next)&&(e$I.removeNode(e$E),e$E=e$E.next),e$E},e$I.filterPoints=function(e$D,e$m){if(!e$D)return e$D;e$m||(e$m=e$D);var e$Y,e$t=e$D;do{if(e$Y=!1,e$t.steiner||!e$I.equals(e$t,e$t.next)&&0!==e$I.area(e$t.prev,e$t,e$t.next))e$t=e$t.next;else{if(e$I.removeNode(e$t),(e$t=e$m=e$t.prev)===e$t.next)break;e$Y=!0}}while(e$Y||e$t!==e$m);return e$m},e$I.earcutLinked=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(e$D){!e$E&&e$l&&e$I.indexCurve(e$D,e$t,e$y,e$l);for(var e$B,e$o,e$r=e$D;e$D.prev!==e$D.next;)if(e$B=e$D.prev,e$o=e$D.next,e$l?e$I.isEarHashed(e$D,e$t,e$y,e$l):e$I.isEar(e$D))e$m.push(e$B.i/e$Y),e$m.push(e$D.i/e$Y),e$m.push(e$o.i/e$Y),e$I.removeNode(e$D),e$D=e$o.next,e$r=e$o.next;else if((e$D=e$o)===e$r){e$E?1===e$E?(e$D=e$I.cureLocalIntersections(e$D,e$m,e$Y),e$I.earcutLinked(e$D,e$m,e$Y,e$t,e$y,e$l,2)):2===e$E&&e$I.splitEarcut(e$D,e$m,e$Y,e$t,e$y,e$l):e$I.earcutLinked(e$I.filterPoints(e$D,null),e$m,e$Y,e$t,e$y,e$l,1);break}}},e$I.isEar=function(e$D){var e$m=e$D.prev,e$Y=e$D,e$t=e$D.next;if(0<=e$I.area(e$m,e$Y,e$t))return!1;for(var e$y=e$D.next.next;e$y!==e$D.prev;){if(e$I.pointInTriangle(e$m.x,e$m.y,e$Y.x,e$Y.y,e$t.x,e$t.y,e$y.x,e$y.y)&&0<=e$I.area(e$y.prev,e$y,e$y.next))return!1;e$y=e$y.next}return!0},e$I.isEarHashed=function(e$D,e$m,e$Y,e$t){var e$y=e$D.prev,e$l=e$D,e$E=e$D.next;if(0<=e$I.area(e$y,e$l,e$E))return!1;for(var e$B=e$y.x<e$l.x?e$y.x<e$E.x?e$y.x:e$E.x:e$l.x<e$E.x?e$l.x:e$E.x,e$o=e$y.y<e$l.y?e$y.y<e$E.y?e$y.y:e$E.y:e$l.y<e$E.y?e$l.y:e$E.y,e$r=e$y.x>e$l.x?e$y.x>e$E.x?e$y.x:e$E.x:e$l.x>e$E.x?e$l.x:e$E.x,e$f=e$y.y>e$l.y?e$y.y>e$E.y?e$y.y:e$E.y:e$l.y>e$E.y?e$l.y:e$E.y,e$_=e$I.zOrder(e$B,e$o,e$m,e$Y,e$t),e$i=e$I.zOrder(e$r,e$f,e$m,e$Y,e$t),e$R=e$D.nextZ;e$R&&e$R.z<=e$i;){if(e$R!==e$D.prev&&e$R!==e$D.next&&e$I.pointInTriangle(e$y.x,e$y.y,e$l.x,e$l.y,e$E.x,e$E.y,e$R.x,e$R.y)&&0<=e$I.area(e$R.prev,e$R,e$R.next))return!1;e$R=e$R.nextZ}for(e$R=e$D.prevZ;e$R&&e$R.z>=e$_;){if(e$R!==e$D.prev&&e$R!==e$D.next&&e$I.pointInTriangle(e$y.x,e$y.y,e$l.x,e$l.y,e$E.x,e$E.y,e$R.x,e$R.y)&&0<=e$I.area(e$R.prev,e$R,e$R.next))return!1;e$R=e$R.prevZ}return!0},e$I.cureLocalIntersections=function(e$D,e$m,e$Y){var e$t=e$D;do{var e$y=e$t.prev,e$l=e$t.next.next;!e$I.equals(e$y,e$l)&&e$I.intersects(e$y,e$t,e$t.next,e$l)&&e$I.locallyInside(e$y,e$l)&&e$I.locallyInside(e$l,e$y)&&(e$m.push(e$y.i/e$Y),e$m.push(e$t.i/e$Y),e$m.push(e$l.i/e$Y),e$I.removeNode(e$t),e$I.removeNode(e$t.next),e$t=e$D=e$l),e$t=e$t.next}while(e$t!==e$D);return e$t},e$I.splitEarcut=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$D;do{for(var e$B=e$E.next.next;e$B!==e$E.prev;){if(e$E.i!==e$B.i&&e$I.isValidDiagonal(e$E,e$B)){var e$o=e$I.splitPolygon(e$E,e$B);return e$E=e$I.filterPoints(e$E,e$E.next),e$o=e$I.filterPoints(e$o,e$o.next),e$I.earcutLinked(e$E,e$m,e$Y,e$t,e$y,e$l),void e$I.earcutLinked(e$o,e$m,e$Y,e$t,e$y,e$l)}e$B=e$B.next}e$E=e$E.next}while(e$E!==e$D)},e$I.eliminateHoles=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r=[];for(e$y=0,e$l=e$m.length;e$y<e$l;e$y++)e$E=e$m[e$y]*e$t,e$B=e$y<e$l-1?e$m[e$y+1]*e$t:e$D.length,(e$o=e$I.linkedList(e$D,e$E,e$B,e$t,!1))===e$o.next&&(e$o.steiner=!0),e$r.push(e$I.getLeftmost(e$o));for(e$r.sort(e$I.compareX),e$y=0;e$y<e$r.length;e$y++)e$I.eliminateHole(e$r[e$y],e$Y),e$Y=e$I.filterPoints(e$Y,e$Y.next);return e$Y},e$I.compareX=function(e$D,e$m){return e$D.x-e$m.x},e$I.eliminateHole=function(e$D,e$m){if(e$m=e$I.findHoleBridge(e$D,e$m)){var e$Y=e$I.splitPolygon(e$m,e$D);e$I.filterPoints(e$Y,e$Y.next)}},e$I.findHoleBridge=function(e$D,e$m){var e$Y,e$t=e$m,e$y=e$D.x,e$l=e$D.y,e$E=-1/0;do{if(e$l<=e$t.y&&e$l>=e$t.next.y&&e$t.next.y!==e$t.y){var e$B=e$t.x+(e$l-e$t.y)*(e$t.next.x-e$t.x)/(e$t.next.y-e$t.y);if(e$B<=e$y&&e$E<e$B){if((e$E=e$B)===e$y){if(e$l===e$t.y)return e$t;if(e$l===e$t.next.y)return e$t.next}e$Y=e$t.x<e$t.next.x?e$t:e$t.next}}e$t=e$t.next}while(e$t!==e$m);if(!e$Y)return null;if(e$y===e$E)return e$Y.prev;var e$o,e$r=e$Y,e$f=e$Y.x,e$_=e$Y.y,e$i=1/0;for(e$t=e$Y.next;e$t!==e$r;)e$y>=e$t.x&&e$t.x>=e$f&&e$y!==e$t.x&&e$I.pointInTriangle(e$l<e$_?e$y:e$E,e$l,e$f,e$_,e$l<e$_?e$E:e$y,e$l,e$t.x,e$t.y)&&((e$o=Math.abs(e$l-e$t.y)/(e$y-e$t.x))<e$i||e$o===e$i&&e$t.x>e$Y.x)&&e$I.locallyInside(e$t,e$D)&&(e$Y=e$t,e$i=e$o),e$t=e$t.next;return e$Y},e$I.indexCurve=function(e$D,e$m,e$Y,e$t){for(var e$y=e$D;null===e$y.z&&(e$y.z=e$I.zOrder(e$y.x,e$y.y,e$m,e$Y,e$t)),e$y.prevZ=e$y.prev,e$y.nextZ=e$y.next,(e$y=e$y.next)!==e$D;);e$y.prevZ.nextZ=null,e$y.prevZ=null,e$I.sortLinked(e$y)},e$I.sortLinked=function(e$D){var e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r=1;do{for(e$Y=e$D,e$l=e$D=null,e$E=0;e$Y;){for(e$E++,e$t=e$Y,e$m=e$B=0;e$m<e$r&&(e$B++,e$t=e$t.nextZ);e$m++);for(e$o=e$r;0<e$B||0<e$o&&e$t;)0!==e$B&&(0===e$o||!e$t||e$Y.z<=e$t.z)?(e$Y=(e$y=e$Y).nextZ,e$B--):(e$t=(e$y=e$t).nextZ,e$o--),e$l?e$l.nextZ=e$y:e$D=e$y,e$y.prevZ=e$l,e$l=e$y;e$Y=e$t}e$l.nextZ=null,e$r*=2}while(1<e$E);return e$D},e$I.zOrder=function(e$D,e$m,e$Y,e$t,e$y){return(e$D=1431655765&((e$D=858993459&((e$D=252645135&((e$D=16711935&((e$D=32767*(e$D-e$Y)*e$y)|e$D<<8))|e$D<<4))|e$D<<2))|e$D<<1))|(e$m=1431655765&((e$m=858993459&((e$m=252645135&((e$m=16711935&((e$m=32767*(e$m-e$t)*e$y)|e$m<<8))|e$m<<4))|e$m<<2))|e$m<<1))<<1},e$I.getLeftmost=function(e$D){for(var e$m=e$D,e$Y=e$D;e$m.x<e$Y.x&&(e$Y=e$m),(e$m=e$m.next)!==e$D;);return e$Y},e$I.pointInTriangle=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){return 0<=(e$y-e$E)*(e$m-e$B)-(e$D-e$E)*(e$l-e$B)&&0<=(e$D-e$E)*(e$t-e$B)-(e$Y-e$E)*(e$m-e$B)&&0<=(e$Y-e$E)*(e$l-e$B)-(e$y-e$E)*(e$t-e$B)},e$I.isValidDiagonal=function(e$D,e$m){return e$D.next.i!==e$m.i&&e$D.prev.i!==e$m.i&&!e$I.intersectsPolygon(e$D,e$m)&&e$I.locallyInside(e$D,e$m)&&e$I.locallyInside(e$m,e$D)&&e$I.middleInside(e$D,e$m)},e$I.area=function(e$D,e$m,e$Y){return(e$m.y-e$D.y)*(e$Y.x-e$m.x)-(e$m.x-e$D.x)*(e$Y.y-e$m.y)},e$I.equals=function(e$D,e$m){return e$D.x===e$m.x&&e$D.y===e$m.y},e$I.intersects=function(e$D,e$m,e$Y,e$t){return!!(e$I.equals(e$D,e$m)&&e$I.equals(e$Y,e$t)||e$I.equals(e$D,e$t)&&e$I.equals(e$Y,e$m))||0<e$I.area(e$D,e$m,e$Y)!=0<e$I.area(e$D,e$m,e$t)&&0<e$I.area(e$Y,e$t,e$D)!=0<e$I.area(e$Y,e$t,e$m)},e$I.intersectsPolygon=function(e$D,e$m){var e$Y=e$D;do{if(e$Y.i!==e$D.i&&e$Y.next.i!==e$D.i&&e$Y.i!==e$m.i&&e$Y.next.i!==e$m.i&&e$I.intersects(e$Y,e$Y.next,e$D,e$m))return!0;e$Y=e$Y.next}while(e$Y!==e$D);return!1},e$I.locallyInside=function(e$D,e$m){return e$I.area(e$D.prev,e$D,e$D.next)<0?0<=e$I.area(e$D,e$m,e$D.next)&&0<=e$I.area(e$D,e$D.prev,e$m):e$I.area(e$D,e$m,e$D.prev)<0||e$I.area(e$D,e$D.next,e$m)<0},e$I.middleInside=function(e$D,e$m){for(var e$Y=e$D,e$t=!1,e$y=(e$D.x+e$m.x)/2,e$l=(e$D.y+e$m.y)/2;e$Y.y>e$l!=e$Y.next.y>e$l&&e$Y.next.y!==e$Y.y&&e$y<(e$Y.next.x-e$Y.x)*(e$l-e$Y.y)/(e$Y.next.y-e$Y.y)+e$Y.x&&(e$t=!e$t),(e$Y=e$Y.next)!==e$D;);return e$t},e$I.splitPolygon=function(e$D,e$m){var e$Y=new e$yD(e$D.i,e$D.x,e$D.y),e$t=new e$yD(e$m.i,e$m.x,e$m.y),e$y=e$D.next,e$l=e$m.prev;return(e$D.next=e$m).prev=e$D,(e$Y.next=e$y).prev=e$Y,(e$t.next=e$Y).prev=e$t,(e$l.next=e$t).prev=e$l,e$t},e$I.insertNode=function(e$D,e$m,e$Y,e$t){var e$y=new e$yD(e$D,e$m,e$Y);return e$t?(e$y.next=e$t.next,(e$y.prev=e$t).next.prev=e$y,e$t.next=e$y):(e$y.prev=e$y).next=e$y,e$y},e$I.removeNode=function(e$D){e$D.next.prev=e$D.prev,e$D.prev.next=e$D.next,e$D.prevZ&&(e$D.prevZ.nextZ=e$D.nextZ),e$D.nextZ&&(e$D.nextZ.prevZ=e$D.prevZ)},e$I.signedArea=function(e$D,e$m,e$Y,e$t){for(var e$y=0,e$l=e$m,e$E=e$Y-e$t;e$l<e$Y;e$l+=e$t)e$y+=(e$D[e$E]-e$D[e$l])*(e$D[e$l+1]+e$D[e$E+1]),e$E=e$l;return e$y},e$I}(),e$yD=function(){function e$D(e$D,e$m,e$Y){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=e$D,this.x=e$m,this.y=e$Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return e$i(e$D,"laya.webgl.shapes.EarcutNode"),e$D}(),e$lD=(function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this.lineWidth=e$D,this.lineColor=e$m,this.lineAlpha=e$Y,this.fillColor=e$t,this.fillAlpha=e$y,this.shape=e$E,this.fill=e$l}e$i(e$D,"laya.webgl.shapes.GeometryData");var e$m=e$D.prototype;e$m.clone=function(){return new e$D(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},e$m.getIndexData=function(){return null},e$m.getVertexData=function(){return null},e$m.destroy=function(){this.shape=null}}(),function(){function e$D(e$D){if(e$D instanceof Float32Array)this.points=e$D;else if(e$D instanceof Array){e$D.length;this.points=new Float32Array(e$D)}}e$i(e$D,"laya.webgl.shapes.Vertex");var e$m=e$D.prototype;e$S.imps(e$m,{"laya.webgl.shapes.IShape":!0}),e$m.getData=function(e$D,e$m,e$Y){},e$m.needUpdate=function(e$D){return!1},e$m.rebuild=function(e$D){},e$m.setMatrix=function(e$D){}}(),function(){function e$o(e$D){void 0===e$D&&(e$D=1e4),this._renderType=e$D}e$i(e$o,"laya.webgl.submit.Submit");var e$D=e$o.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D.releaseRender=function(){var e$D=e$o._cache;(e$D[e$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$D.getRenderType=function(){return this._renderType},e$D.renderSubmit=function(){if(0===this._numEle)return 1;var e$D=this.shaderValue.textureHost;if(e$D){var e$m=e$D.source;if(!e$D.bitmap||!e$m)return 1;this.shaderValue.texture=e$m,e$D.alphaTexture&&e$D.alphaTexture.source&&(this.shaderValue.texture1=e$D.alphaTexture.source)}this._vb.bind_upload(this._ib);var e$Y=e$vD.mainContext;return this.shaderValue.upload(),e$d.activeBlendFunction!==this._blendFn&&(e$Y.enable(3042),this._blendFn(e$Y),e$d.activeBlendFunction=this._blendFn),e$Q.drawCall++,e$Q.trianglesFaces+=this._numEle/3,e$Y.drawElements(4,this._numEle,5123,this._startIdx),1},e$o.__init__=function(){var e$D=e$o.RENDERBASE=new e$o(-1);e$D.shaderValue=new e$AD(0,0),e$D.shaderValue.ALPHA=-1234},e$o.createSubmit=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;null==e$Y&&((e$Y=e$l._selfVb||(e$l._selfVb=e$KD.create(-1))).clear(),e$t=0),e$l._ib=e$m,e$l._vb=e$Y,e$l._startIdx=e$t*e$ID.BYTES_PIDX,e$l._numEle=0;var e$E=e$D._nBlendType;e$l._blendFn=e$D._targets?e$d.targetFns[e$E]:e$d.fns[e$E],e$l.shaderValue=e$y,e$l.shaderValue.setValue(e$D._shader2D);var e$B=e$D._shader2D.filters;return e$B&&e$l.shaderValue.setFilters(e$B),e$l},e$o.createShape=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;e$E._ib=e$m,e$E._vb=e$Y,e$E._numEle=e$t,e$E._startIdx=e$y,e$E.shaderValue=e$l,e$E.shaderValue.setValue(e$D._shader2D);var e$B=e$D._nBlendType;return e$E._blendFn=e$D._targets?e$d.targetFns[e$B]:e$d.fns[e$B],e$E},e$o.TYPE_2D=1e4,e$o.TYPE_CANVAS=10003,e$o.TYPE_CMDSETRT=10004,e$o.TYPE_CUSTOM=10005,e$o.TYPE_BLURRT=10006,e$o.TYPE_CMDDESTORYPRERT=10007,e$o.TYPE_DISABLESTENCIL=10008,e$o.TYPE_OTHERIBVB=10009,e$o.TYPE_PRIMITIVE=10010,e$o.TYPE_RT=10011,e$o.TYPE_BLUR_RT=10012,e$o.TYPE_TARGET=10013,e$o.TYPE_CHANGE_VALUE=10014,e$o.TYPE_SHAPE=10015,e$o.TYPE_TEXTURE=10016,e$o.TYPE_FILLTEXTURE=10017,e$o.RENDERBASE=null,e$o._cache=((e$o._cache=[])._length=0,e$o._cache),e$o}()),e$ED=function(){function e$t(){this.fun=null,this.args=null}e$i(e$t,"laya.webgl.submit.SubmitCMD");var e$D=e$t.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D.renderSubmit=function(){return this.fun.apply(null,this.args),1},e$D.getRenderType=function(){return 0},e$D.releaseRender=function(){var e$D=e$t._cache;e$D[e$D._length++]=this},e$t.create=function(e$D,e$m){var e$Y=e$t._cache._length?e$t._cache[--e$t._cache._length]:new e$t;return e$Y.fun=e$m,e$Y.args=e$D,e$Y},e$t._cache=((e$t._cache=[])._length=0,e$t._cache),e$t}(),e$BD=function(){function e$m(){this.variables={}}e$i(e$m,"laya.webgl.submit.SubmitCMDScope");var e$D=e$m.prototype;return e$D.getValue=function(e$D){return this.variables[e$D]},e$D.addValue=function(e$D,e$m){return this.variables[e$D]=e$m},e$D.setValue=function(e$D,e$m){return this.variables.hasOwnProperty(e$D)?this.variables[e$D]=e$m:null},e$D.clear=function(){for(var e$D in this.variables)delete this.variables[e$D]},e$D.recycle=function(){this.clear(),e$m.POOL.push(this)},e$m.create=function(){var e$D=e$m.POOL.pop();return e$D||(e$D=new e$m),e$D},e$m.POOL=[],e$m}(),e$oD=function(){function e$_(){this.offset=0,this.startIndex=0,this._mat=e$J.create()}e$i(e$_,"laya.webgl.submit.SubmitOtherIBVB");var e$D=e$_.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D.releaseRender=function(){var e$D=e$_._cache;(e$D[e$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$D.getRenderType=function(){return 10009},e$D.renderSubmit=function(){var e$D=this._shaderValue.textureHost;if(e$D){var e$m=e$D.source;if(!e$D.bitmap||!e$m)return 1;this._shaderValue.texture=e$m}this._vb.bind_upload(this._ib);var e$Y=e$UD.worldMatrix4,e$t=e$J.TEMP;e$J.mulPre(this._mat,e$Y[0],e$Y[1],e$Y[4],e$Y[5],e$Y[12],e$Y[13],e$t);var e$y=e$UD.worldMatrix4=e$_.tempMatrix4;e$y[0]=e$t.a,e$y[1]=e$t.b,e$y[4]=e$t.c,e$y[5]=e$t.d,e$y[12]=e$t.tx,e$y[13]=e$t.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var e$l=e$vD.mainContext;return e$d.activeBlendFunction!==this._blendFn&&(e$l.enable(3042),this._blendFn(e$l),e$d.activeBlendFunction=this._blendFn),e$Q.drawCall++,e$Q.trianglesFaces+=this._numEle/3,e$l.drawElements(4,this._numEle,5123,this.startIndex),e$UD.worldMatrix4=e$Y,e$hD.activeShader=null,1},e$_.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){void 0===e$o&&(e$o=0);var e$r=e$_._cache._length?e$_._cache[--e$_._cache._length]:new e$_;e$r._ib=e$Y,e$r._vb=e$m,e$r._numEle=e$t,e$r._shader=e$y,e$r._shaderValue=e$l;var e$f=e$D._nBlendType;switch(e$r._blendFn=e$D._targets?e$d.targetFns[e$f]:e$d.fns[e$f],e$o){case 0:e$r.offset=0,e$r.startIndex=e$B/(e$ID.BYTES_PE*e$m.vertexStride)*1.5,e$r.startIndex*=e$ID.BYTES_PIDX;break;case 1:e$r.startIndex=e$E,e$r.offset=e$B}return e$r},e$_._cache=((e$_._cache=[])._length=0,e$_._cache),e$_.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$_}(),e$rD=function(){function e$Y(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new e$p,this.screenRect=new e$p}e$i(e$Y,"laya.webgl.submit.SubmitScissor");var e$D=e$Y.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D._scissor=function(e$D,e$m,e$Y,e$t){var e$y=e$UD.worldMatrix4,e$l=e$y[0],e$E=e$y[5],e$B=e$y[12],e$o=e$y[13];if(e$t*=e$E,(e$Y*=e$l)<1||e$t<1)return!1;var e$r=(e$D=e$D*e$l+e$B)+e$Y,e$f=(e$m=e$m*e$E+e$o)+e$t;e$D<0&&(e$Y=e$r-(e$D=0)),e$m<0&&(e$t=e$f-(e$m=0));var e$_=e$UD.worldClipRect;if(e$D=Math.max(e$D,e$_.x),e$m=Math.max(e$m,e$_.y),e$Y=Math.min(e$r,e$_.right)-e$D,e$t=Math.min(e$f,e$_.bottom)-e$m,e$Y<1||e$t<1)return!1;var e$i=e$UD.worldScissorTest;return this.screenRect.copyFrom(e$_),e$_.x=e$D,e$_.y=e$m,e$_.width=e$Y,e$_.height=e$t,e$UD.worldScissorTest=!0,e$m=e$UD.height-e$m-e$t,e$vD.mainContext.scissor(e$D,e$m,e$Y,e$t),e$vD.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),e$i?(e$m=e$UD.height-this.screenRect.y-this.screenRect.height,e$vD.mainContext.scissor(this.screenRect.x,e$m,this.screenRect.width,this.screenRect.height),e$vD.mainContext.enable(3089)):(e$vD.mainContext.disable(3089),e$UD.worldScissorTest=!1),e$_.copyFrom(this.screenRect),!0},e$D._scissorWithTagart=function(e$D,e$m,e$Y,e$t){if(e$Y<1||e$t<1)return!1;var e$y=e$D+e$Y,e$l=e$m+e$t;e$D<0&&(e$Y=e$y-(e$D=0)),e$m<0&&(e$t=e$l-(e$m=0));var e$E=e$UD.worldClipRect;if(e$D=Math.max(e$D,e$E.x),e$m=Math.max(e$m,e$E.y),e$Y=Math.min(e$y,e$E.right)-e$D,e$t=Math.min(e$l,e$E.bottom)-e$m,e$Y<1||e$t<1)return!1;var e$B=e$UD.worldScissorTest;return this.screenRect.copyFrom(e$E),e$UD.worldScissorTest=!0,e$E.x=e$D,e$E.y=e$m,e$E.width=e$Y,e$E.height=e$t,e$m=e$UD.height-e$m-e$t,e$vD.mainContext.scissor(e$D,e$m,e$Y,e$t),e$vD.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),e$B?(e$m=e$UD.height-this.screenRect.y-this.screenRect.height,e$vD.mainContext.scissor(this.screenRect.x,e$m,this.screenRect.width,this.screenRect.height),e$vD.mainContext.enable(3089)):(e$vD.mainContext.disable(3089),e$UD.worldScissorTest=!1),e$E.copyFrom(this.screenRect),!0},e$D.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},e$D.getRenderType=function(){return 0},e$D.releaseRender=function(){var e$D=e$Y._cache;(e$D[e$D._length++]=this).context=null},e$Y.create=function(e$D){var e$m=e$Y._cache._length?e$Y._cache[--e$Y._cache._length]:new e$Y;return e$m.context=e$D,e$m},e$Y._cache=((e$Y._cache=[])._length=0,e$Y._cache),e$Y}(),e$fD=function(){function e$o(){this.step=0,this.blendMode=null,this.level=0}e$i(e$o,"laya.webgl.submit.SubmitStencil");var e$D=e$o.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},e$D.getRenderType=function(){return 0},e$D.releaseRender=function(){var e$D=e$o._cache;e$D[e$D._length++]=this},e$D.do1=function(){var e$D=e$vD.mainContext;e$D.enable(2960),e$D.clear(1024),e$D.colorMask(!1,!1,!1,!1),e$D.stencilFunc(514,this.level,255),e$D.stencilOp(7680,7680,7682)},e$D.do2=function(){var e$D=e$vD.mainContext;e$D.stencilFunc(514,this.level+1,255),e$D.colorMask(!0,!0,!0,!0),e$D.stencilOp(7680,7680,7680)},e$D.do3=function(){var e$D=e$vD.mainContext;e$D.colorMask(!0,!0,!0,!0),e$D.stencilOp(7680,7680,7680),e$D.clear(1024),e$D.disable(2960)},e$D.do4=function(){var e$D=e$vD.mainContext;0==this.level&&(e$D.enable(2960),e$D.clear(1024)),e$D.colorMask(!1,!1,!1,!1),e$D.stencilFunc(519,0,255),e$D.stencilOp(7680,7680,7682)},e$D.do5=function(){var e$D=e$vD.mainContext;e$D.stencilFunc(514,this.level,255),e$D.colorMask(!0,!0,!0,!0),e$D.stencilOp(7680,7680,7680)},e$D.do6=function(){var e$D=e$vD.mainContext;e$d.targetFns[e$d.TOINT[this.blendMode]](e$D)},e$D.do7=function(){var e$D=e$vD.mainContext;e$D.colorMask(!1,!1,!1,!1),e$D.stencilOp(7680,7680,7683)},e$D.do8=function(){var e$D=e$vD.mainContext;e$D.colorMask(!0,!0,!0,!0),e$D.stencilFunc(514,this.level,255),e$D.stencilOp(7680,7680,7680)},e$o.restore=function(e$D,e$m,e$Y,e$t,e$y){var e$l;if((e$D._renderKey=0)<e$o._mask&&e$o._mask--,0==e$o._mask)e$l=laya.webgl.submit.SubmitStencil.create(3),e$D.addRenderObject(e$l),e$D._curSubmit=e$lD.RENDERBASE;else{e$l=laya.webgl.submit.SubmitStencil.create(7),e$D.addRenderObject(e$l);var e$E=e$D._vb;e$E._byteLength;if(e$wD.fillRectImgVb(e$E,null,e$m.x,e$m.y,e$m.width,e$m.height,e$O.DEF_UV,e$Y,e$t,e$y,0,0)){e$D._shader2D.glTexture=null;var e$B=e$D._curSubmit=e$lD.createSubmit(e$D,e$D._ib,e$E,(e$E._byteLength-64)/32*3,e$AD.create(2,0));e$B.shaderValue.ALPHA=1,e$D._submits[e$D._submits._length++]=e$B,e$D._curSubmit._numEle+=6,e$D._curSubmit=e$lD.RENDERBASE}else alert("clipRect calc stencil rect error");e$l=laya.webgl.submit.SubmitStencil.create(8),e$D.addRenderObject(e$l)}},e$o.restore2=function(e$D,e$m){var e$Y;(e$D._renderKey=0)<e$o._mask&&e$o._mask--,0==e$o._mask?(e$Y=laya.webgl.submit.SubmitStencil.create(3),e$D.addRenderObject(e$Y),e$D._curSubmit=e$lD.RENDERBASE):(e$Y=laya.webgl.submit.SubmitStencil.create(7),e$D.addRenderObject(e$Y),e$D._submits[e$D._submits._length++]=e$m,e$Y=laya.webgl.submit.SubmitStencil.create(8),e$D.addRenderObject(e$Y))},e$o.create=function(e$D){var e$m=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;return 5==(e$m.step=e$D)&&++e$o._mask,e$m.level=e$o._mask,e$m},e$o._cache=((e$o._cache=[])._length=0,e$o._cache),e$o._mask=0,e$o}(),e$_D=function(){function e$B(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}e$i(e$B,"laya.webgl.submit.SubmitTarget");var e$D=e$B.prototype;return e$S.imps(e$D,{"laya.webgl.submit.ISubmit":!0}),e$D.renderSubmit=function(){this._vb.bind_upload(this._ib);var e$D=this.scope.getValue(this.proName);return e$D&&(this.shaderValue.texture=e$D.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[e$D.width,e$D.height]),this.shaderValue.upload(),this.blend(),e$Q.drawCall++,e$Q.trianglesFaces+=this._numEle/3,e$vD.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e$D.blend=function(){if(e$d.activeBlendFunction!==e$d.fns[this.blendType]){var e$D=e$vD.mainContext;e$D.enable(3042),e$d.fns[this.blendType](e$D),e$d.activeBlendFunction=e$d.fns[this.blendType]}},e$D.getRenderType=function(){return 0},e$D.releaseRender=function(){var e$D=e$B._cache;(e$D[e$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$B.create=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$B._cache._length?e$B._cache[--e$B._cache._length]:new e$B;return e$E._ib=e$m,e$E._vb=e$Y,e$E.proName=e$l,e$E._startIdx=e$t*e$ID.BYTES_PIDX,e$E._numEle=0,e$E.blendType=e$D._nBlendType,e$E.shaderValue=e$y,e$E.shaderValue.setValue(e$D._shader2D),e$E},e$B._cache=((e$B._cache=[])._length=0,e$B._cache),e$B}(),e$iD=function(){function e$D(){this._sourceStr=null}e$i(e$D,"laya.webgl.text.CharSegment");var e$m=e$D.prototype;return e$S.imps(e$m,{"laya.webgl.text.ICharSegment":!0}),e$m.textToSpit=function(e$D){this._sourceStr=e$D},e$m.getChar=function(e$D){return this._sourceStr.charAt(e$D)},e$m.getCharCode=function(e$D){return this._sourceStr.charCodeAt(e$D)},e$m.length=function(){return this._sourceStr.length},e$D}(),e$RD=function(){var e$D;function e$Q(){}return e$i(e$Q,"laya.webgl.text.DrawText"),e$Q.__init__=function(){e$Q._charsTemp=new Array,e$Q._drawValue=new e$D,e$Q._charSeg=new e$iD},e$Q.customCharSeg=function(e$D){e$Q._charSeg=e$D},e$Q.getChar=function(e$D,e$m,e$Y){var e$t=e$nD.createOneChar(e$D,e$Y);return-1!=e$m&&(e$Q._charsCache[e$m]=e$t),e$t},e$Q._drawSlow=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R,e$G){var e$I,e$w,e$W=e$Q._drawValue.value(e$l,e$B,e$o,e$r,e$i,e$R,e$G),e$U=0,e$e=0,e$v=e$Q._charsTemp,e$c=0,e$S=NaN;if(e$t)for(e$v.length=e$t.length,e$U=0,e$e=e$t.length;e$U<e$e;e$U++)(e$w=e$t[e$U])&&(e$S=e$w.charNum+e$W.txtID,e$v[e$U]=e$I=e$Q._charsCache[e$S]||e$Q.getChar(e$w.char,e$S,e$W),e$I.active());else{var e$z=e$Y instanceof laya.utils.WordText?e$Y.toString():e$Y;if(e$C.CharacterCache){e$Q._charSeg.textToSpit(e$z);var e$A=e$Q._charSeg.length();for(e$U=0,e$e=e$v.length=e$A;e$U<e$e;e$U++)e$S=e$Q._charSeg.getCharCode(e$U)+e$W.txtID,e$v[e$U]=e$I=e$Q._charsCache[e$S]||e$Q.getChar(e$Q._charSeg.getChar(e$U),e$S,e$W),e$I.active(),e$c+=e$I.cw}else e$v.length=0,(e$I=e$Q.getChar(e$z,-1,e$W)).active(),e$c+=e$I.cw,e$v[0]=e$I}var e$J=0;null!==e$E&&"left"!==e$E&&(e$J=-("center"==e$E?e$c/2:e$c));var e$a,e$p,e$F=NaN,e$s=0;if(e$t)for(e$U=0,e$e=e$v.length;e$U<e$e;e$U++)e$I=e$v[e$U],e$w=e$t[e$U],e$I&&e$w&&!e$I.isSpace&&(e$F=e$I.borderSize,e$a=e$I.texture,e$m._drawText(e$a,e$f+e$J+e$w.x*e$i-e$F,e$_+e$w.y*e$R-e$F,e$a.width,e$a.height,e$y,0,0,0,0));else{for(e$U=0,e$e=e$v.length;e$U<e$e;e$U++)(e$I=e$v[e$U])&&!e$I.isSpace&&(e$F=e$I.borderSize,e$a=e$I.texture,e$m._drawText(e$a,e$f+e$J-e$F,e$_-e$F,e$a.width,e$a.height,e$y,0,0,0,0),e$D&&((e$p=e$D[e$s++])||(e$p=e$D[e$s-1]=[]),e$p[0]=e$a,e$p[1]=e$J-e$F,e$p[2]=-e$F)),e$J+=e$I.cw;e$D&&(e$D.length=e$s)}},e$Q._drawFast=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l,e$E,e$B=0,e$o=e$D.length;e$B<e$o;e$B++)(e$l=(e$E=e$D[e$B])[0]).active(),e$m._drawText(e$l,e$t+e$E[1],e$y+e$E[2],e$l.width,e$l.height,e$Y,0,0,0,0)},e$Q.drawText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_){if(void 0===e$_&&(e$_=0),!(e$m&&0===e$m.length||e$Y&&0===e$Y.length)){var e$i=e$t.a,e$R=e$t.d;(0!==e$t.b||0!==e$t.c)&&(e$i=e$R=1);var e$G=1!==e$i||1!==e$R;if(e$G&&e$S.stage.transform){var e$I=e$S.stage.transform;e$G=e$I.a===e$i&&e$I.d===e$R}else e$G=!1;if(e$G){var e$w=(e$t=e$t.copyTo(e$zD._tmpMatrix)).tx,e$W=e$t.ty;e$t.scale(1/e$i,1/e$R),e$t._checkTransform(),e$r*=e$i,e$f*=e$R,e$r+=e$w-e$t.tx,e$f+=e$W-e$t.ty}else e$i=e$R=1;if(e$Y)e$Q._drawSlow(null,e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$i,e$R,e$_);else{if(null===e$m.toUpperCase){var e$U=e$i+1e5*e$R,e$e=e$m;return void(e$e.changed||e$e.id!==e$U?(e$e.id=e$U,e$e.changed=!1,e$Q._drawSlow(e$e.save,e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$i,e$R,e$_)):e$Q._drawFast(e$e.save,e$D,e$t,e$r,e$f))}var e$v=e$m+e$y.toString()+e$E+e$B+e$o+e$i+e$R+e$l,e$c=e$Q._textsCache[e$v];e$C.CharacterCache?e$c?e$Q._drawFast(e$c,e$D,e$t,e$r,e$f):(e$Q._textsCache.__length||(e$Q._textsCache.__length=0),e$Q._textsCache.__length>e$z.WebGLTextCacheCount&&((e$Q._textsCache={}).__length=0,e$Q._curPoolIndex=0),e$Q._textCachesPool[e$Q._curPoolIndex]?(e$c=e$Q._textsCache[e$v]=e$Q._textCachesPool[e$Q._curPoolIndex]).length=0:e$Q._textCachesPool[e$Q._curPoolIndex]=e$c=e$Q._textsCache[e$v]=[],e$Q._textsCache.__length++,e$Q._curPoolIndex++,e$Q._drawSlow(e$c,e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$i,e$R,e$_)):e$Q._drawSlow(e$c,e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$i,e$R,e$_)}}},e$Q._charsTemp=null,e$Q._textCachesPool=[],e$Q._curPoolIndex=0,e$Q._charsCache={},e$Q._textsCache={},e$Q._drawValue=null,e$Q.d=[],e$Q._charSeg=null,e$Q.__init$=function(){e$D=function(){function e$o(){}return e$i(e$o,""),e$o.prototype.value=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this.font=e$D,this.fillColor=e$m,this.borderColor=e$Y,this.lineWidth=e$t,this.scaleX=e$y,this.scaleY=e$l,this.underLine=e$E;var e$B=e$D.toString()+e$y+e$l+e$t+(e$m?e$m.toLowerCase():" ")+(e$Y?e$Y.toLowerCase():" ")+e$E;return this.txtID=e$o._keymap[e$B],this.txtID||(this.txtID=1e-7*++e$o._keymapCount,e$o._keymap[e$B]=this.txtID),this},e$o.clear=function(){e$o._keymap={},e$o._keymapCount=1},e$o._keymap={},e$o._keymapCount=1,e$o}()},e$Q}(),e$GD=function(){function e$y(e$D){this._index=0,this._size=14,this._italic=-2,e$y._cache2=e$y._cache2||[],this.setFont(e$D||"14px Arial")}e$i(e$y,"laya.webgl.text.FontInContext");var e$D=e$y.prototype;return e$D.setFont=function(e$D){var e$m=e$y._cache2[e$D];if(e$m)this._words=e$m[0],this._size=e$m[1];else{this._words=e$D.split(" ");for(var e$Y=0,e$t=this._words.length;e$Y<e$t;e$Y++)if(0<this._words[e$Y].indexOf("px")){this._index=e$Y;break}this._size=parseInt(this._words[this._index]),e$y._cache2[e$D]=[this._words,this._size]}this._text=null,this._italic=-2},e$D.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},e$D.hasType=function(e$D){for(var e$m=0,e$Y=this._words.length;e$m<e$Y;e$m++)if(this._words[e$m]===e$D)return e$m;return-1},e$D.removeType=function(e$D){for(var e$m=0,e$Y=this._words.length;e$m<e$Y;e$m++)if(this._words[e$m]===e$D){this._words.splice(e$m,1),this._index>e$m&&this._index--;break}this._text=null,this._italic=-2},e$D.copyTo=function(e$D){return e$D._text=this._text,e$D._size=this._size,e$D._index=this._index,e$D._words=this._words.slice(),e$D._italic=-2,e$D},e$D.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},e$t(0,e$D,"size",function(){return this._size},function(e$D){this._size=e$D,this._words[this._index]=e$D+"px",this._text=null}),e$y.create=function(e$D){var e$m=e$y._cache[e$D];return e$m||(e$m=e$y._cache[e$D]=new e$y(e$D))},e$y.EMPTY=new e$y,e$y._cache={},e$y._cache2=null,e$y}(),e$ID=function(){function e$D(){}return e$i(e$D,"laya.webgl.utils.CONST3D2D"),e$D.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$D.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],e$D.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],e$D._TMPARRAY=[],e$D._OFFSETX=0,e$D._OFFSETY=0,e$E(e$D,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),e$D}(),e$wD=function(){function e$G(){}return e$i(e$G,"laya.webgl.utils.GlUtils"),e$G.make2DProjection=function(e$D,e$m,e$Y){return[2/e$D,0,0,0,0,-2/e$m,0,0,0,0,2/e$Y,0,-1,1,0,1]},e$G.fillIBQuadrangle=function(e$D,e$m){if(65535/4<e$m)throw Error("IBQuadrangle count:"+e$m+" must<:"+Math.floor(65535/4));e$m=Math.floor(e$m),e$D._resizeBuffer(6*(e$m+1)*2,!1),e$D.byteLength=e$D.bufferLength;for(var e$Y=e$D.getUint16Array(),e$t=0,e$y=0;e$y<e$m;e$y++)e$Y[e$t++]=4*e$y,e$Y[e$t++]=4*e$y+2,e$Y[e$t++]=4*e$y+1,e$Y[e$t++]=4*e$y,e$Y[e$t++]=4*e$y+3,e$Y[e$t++]=4*e$y+2;return e$D.setNeedUpload(),!0},e$G.expandIBQuadrangle=function(e$D,e$m){e$D.bufferLength>=6*e$m*2||e$G.fillIBQuadrangle(e$D,e$m)},e$G.mathCeilPowerOfTwo=function(e$D){return e$D--,e$D|=e$D>>1,e$D|=e$D>>2,e$D|=e$D>>4,e$D|=e$D>>8,e$D|=e$D>>16,++e$D},e$G.fillQuadrangleImgVb=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=16+(e$D._byteLength>>2);e$D.byteLength=e$o<<2;var e$r=e$D.getFloat32Array();e$r[(e$o-=16)+2]=e$y[0],e$r[e$o+3]=e$y[1],e$r[e$o+6]=e$y[2],e$r[e$o+7]=e$y[3],e$r[e$o+10]=e$y[4],e$r[e$o+11]=e$y[5],e$r[e$o+14]=e$y[6],e$r[e$o+15]=e$y[7];var e$f=e$l.a,e$_=e$l.b,e$i=e$l.c,e$R=e$l.d;if(1!==e$f||0!==e$_||0!==e$i||1!==e$R){e$l.bTransform=!0;var e$G=e$l.tx+e$E,e$I=e$l.ty+e$B;e$r[e$o]=(e$t[0]+e$m)*e$f+(e$t[1]+e$Y)*e$i+e$G,e$r[e$o+1]=(e$t[0]+e$m)*e$_+(e$t[1]+e$Y)*e$R+e$I,e$r[e$o+4]=(e$t[2]+e$m)*e$f+(e$t[3]+e$Y)*e$i+e$G,e$r[e$o+5]=(e$t[2]+e$m)*e$_+(e$t[3]+e$Y)*e$R+e$I,e$r[e$o+8]=(e$t[4]+e$m)*e$f+(e$t[5]+e$Y)*e$i+e$G,e$r[e$o+9]=(e$t[4]+e$m)*e$_+(e$t[5]+e$Y)*e$R+e$I,e$r[e$o+12]=(e$t[6]+e$m)*e$f+(e$t[7]+e$Y)*e$i+e$G,e$r[e$o+13]=(e$t[6]+e$m)*e$_+(e$t[7]+e$Y)*e$R+e$I}else e$l.bTransform=!1,e$m+=e$l.tx+e$E,e$Y+=e$l.ty+e$B,e$r[e$o]=e$m+e$t[0],e$r[e$o+1]=e$Y+e$t[1],e$r[e$o+4]=e$m+e$t[2],e$r[e$o+5]=e$Y+e$t[3],e$r[e$o+8]=e$m+e$t[4],e$r[e$o+9]=e$Y+e$t[5],e$r[e$o+12]=e$m+e$t[6],e$r[e$o+13]=e$Y+e$t[7];return e$D._upload=!0},e$G.fillTranglesVB=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B=(e$D._byteLength>>2)+e$t.length;e$D.byteLength=e$B<<2;var e$o=e$D.getFloat32Array();e$B-=e$t.length;for(var e$r=e$t.length,e$f=e$y.a,e$_=e$y.b,e$i=e$y.c,e$R=e$y.d,e$G=0;e$G<e$r;e$G+=4)if(e$o[e$B+e$G+2]=e$t[e$G+2],e$o[e$B+e$G+3]=e$t[e$G+3],1!==e$f||0!==e$_||0!==e$i||1!==e$R){e$y.bTransform=!0;var e$I=e$y.tx+e$l,e$w=e$y.ty+e$E;e$o[e$B+e$G]=(e$t[e$G]+e$m)*e$f+(e$t[e$G+1]+e$Y)*e$i+e$I,e$o[e$B+e$G+1]=(e$t[e$G]+e$m)*e$_+(e$t[e$G+1]+e$Y)*e$R+e$w}else e$y.bTransform=!1,e$m+=e$y.tx+e$l,e$Y+=e$y.ty+e$E,e$o[e$B+e$G]=e$m+e$t[e$G],e$o[e$B+e$G+1]=e$Y+e$t[e$G+1];return e$D._upload=!0},e$G.copyPreImgVb=function(e$D,e$m,e$Y){var e$t=e$D._byteLength>>2;e$D.byteLength=e$t+16<<2;for(var e$y=e$D.getFloat32Array(),e$l=0,e$E=e$t-16;e$l<4;e$l++)e$y[e$t]=e$y[e$E]+e$m,++e$E,e$y[++e$t]=e$y[e$E]+e$Y,++e$E,e$y[++e$t]=e$y[e$E],++e$E,e$y[++e$t]=e$y[e$E],++e$t,++e$E;e$D._upload=!0},e$G.fillRectImgVb=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i){void 0===e$i&&(e$i=!1);var e$R,e$G,e$I,e$w,e$W,e$U,e$e,e$v,e$c,e$S,e$z,e$A,e$J,e$a,e$p,e$F,e$s=1,e$Q=e$B.a,e$T=e$B.b,e$N=e$B.c,e$C=e$B.d,e$O=e$m&&e$m.width<99999999;if(1!==e$Q||0!==e$T||0!==e$N||1!==e$C?(e$B.bTransform=!0,0===e$T&&0===e$N&&(e$s=23,e$c=e$y+e$Y,e$S=e$l+e$t,e$R=e$Q*e$Y+(e$z=e$B.tx+e$o),e$I=e$Q*e$c+e$z,e$G=e$C*e$t+(e$A=e$B.ty+e$r),e$w=e$C*e$S+e$A)):(e$s=23,e$B.bTransform=!1,e$I=(e$R=e$Y+e$B.tx+e$o)+e$y,e$w=(e$G=e$t+e$B.ty+e$r)+e$l),e$O&&(e$W=e$m.x,e$U=e$m.y,e$e=e$m.width+e$W,e$v=e$m.height+e$U),1!==e$s){if(Math.min(e$R,e$I)>=e$e)return!1;if(Math.min(e$G,e$w)>=e$v)return!1;if(Math.max(e$I,e$R)<=e$W)return!1;if(Math.max(e$w,e$G)<=e$U)return!1}var e$h=e$D._byteLength>>2;e$D.byteLength=16+e$h<<2;var e$X=e$D.getFloat32Array();switch(e$X[2+e$h]=e$E[0],e$X[3+e$h]=e$E[1],e$X[6+e$h]=e$E[2],e$X[7+e$h]=e$E[3],e$X[10+e$h]=e$E[4],e$X[11+e$h]=e$E[5],e$X[14+e$h]=e$E[6],e$X[15+e$h]=e$E[7],e$s){case 1:e$z=e$B.tx+e$o,e$A=e$B.ty+e$r;var e$P=e$Q*e$Y,e$u=e$N*e$t,e$L=e$C*e$t,e$q=e$T*e$Y,e$$=e$Q*(e$c=e$y+e$Y),e$d=e$N*(e$S=e$l+e$t),e$k=e$C*e$S,e$M=e$T*e$c;e$i?(e$J=e$P+e$u+e$z,e$p=Math.round(e$J)-e$J,e$a=e$L+e$q+e$A,e$F=Math.round(e$a)-e$a,e$X[e$h]=e$J+e$p,e$X[1+e$h]=e$a+e$F,e$X[4+e$h]=e$$+e$u+e$z+e$p,e$X[5+e$h]=e$L+e$M+e$A+e$F,e$X[8+e$h]=e$$+e$d+e$z+e$p,e$X[9+e$h]=e$k+e$M+e$A+e$F,e$X[12+e$h]=e$P+e$d+e$z+e$p,e$X[13+e$h]=e$k+e$q+e$A+e$F):(e$X[e$h]=e$P+e$u+e$z,e$X[1+e$h]=e$L+e$q+e$A,e$X[4+e$h]=e$$+e$u+e$z,e$X[5+e$h]=e$L+e$M+e$A,e$X[8+e$h]=e$$+e$d+e$z,e$X[9+e$h]=e$k+e$M+e$A,e$X[12+e$h]=e$P+e$d+e$z,e$X[13+e$h]=e$k+e$q+e$A);break;case 23:e$i?(e$J=e$R+e$f,e$p=Math.round(e$J)-e$J,e$a=e$G,e$F=Math.round(e$a)-e$a,e$X[e$h]=e$J+e$p,e$X[1+e$h]=e$a+e$F,e$X[4+e$h]=e$I+e$f+e$p,e$X[5+e$h]=e$G+e$F,e$X[8+e$h]=e$I+e$p,e$X[9+e$h]=e$w+e$F,e$X[12+e$h]=e$R+e$p,e$X[13+e$h]=e$w+e$F):(e$X[e$h]=e$R+e$f,e$X[1+e$h]=e$G,e$X[4+e$h]=e$I+e$f,e$X[5+e$h]=e$G,e$X[8+e$h]=e$I,e$X[9+e$h]=e$w,e$X[12+e$h]=e$R,e$X[13+e$h]=e$w)}return e$D._upload=!0},e$G.fillLineVb=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=.5*e$E,e$r=e$G._fillLineArray,e$f=-(e$t-e$l),e$_=e$Y-e$y,e$i=Math.sqrt(e$f*e$f+e$_*e$_);e$f/=e$i,e$_/=e$i,e$f*=e$o,e$_*=e$o,e$r[0]=e$Y-e$f,e$r[1]=e$t-e$_,e$r[4]=e$Y+e$f,e$r[5]=e$t+e$_,e$r[8]=e$y+e$f,e$r[9]=e$l+e$_,e$r[12]=e$y-e$f,e$r[13]=e$l-e$_,e$B&&e$B.transformPointArray(e$r,e$r);var e$R=16+(e$D._byteLength>>2);return e$D.byteLength=e$R<<2,e$D.insertData(e$r,e$R-16),!0},e$G._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e$G}(),e$WD=(function(){function e$o(){}e$i(e$o,"laya.webgl.utils.MatirxArray"),e$o.ArrayMul=function(e$D,e$m,e$Y){if(e$D)if(e$m)for(var e$t=NaN,e$y=NaN,e$l=NaN,e$E=NaN,e$B=0;e$B<4;e$B++)e$t=e$D[e$B],e$y=e$D[e$B+4],e$l=e$D[e$B+8],e$E=e$D[e$B+12],e$Y[e$B]=e$t*e$m[0]+e$y*e$m[1]+e$l*e$m[2]+e$E*e$m[3],e$Y[e$B+4]=e$t*e$m[4]+e$y*e$m[5]+e$l*e$m[6]+e$E*e$m[7],e$Y[e$B+8]=e$t*e$m[8]+e$y*e$m[9]+e$l*e$m[10]+e$E*e$m[11],e$Y[e$B+12]=e$t*e$m[12]+e$y*e$m[13]+e$l*e$m[14]+e$E*e$m[15];else e$o.copyArray(e$D,e$Y);else e$o.copyArray(e$m,e$Y)},e$o.copyArray=function(e$D,e$m){if(e$D&&e$m)for(var e$Y=0;e$Y<e$D.length;e$Y++)e$m[e$Y]=e$D[e$Y]}}(),function(){function e$m(e$D,e$m,e$Y){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=e$D,this._vb=new e$KD(e$D,35048),e$m&&this._vb._resizeBuffer(e$m,!1),this._ib=new e$jD,e$Y&&this._ib._resizeBuffer(e$Y,!1)}e$i(e$m,"laya.webgl.utils.Mesh2D");var e$D=e$m.prototype;return e$D.cloneWithNewVB=function(){var e$D=new e$m(this._stride,0,0);return e$D._ib=this._ib,e$D._quadNum=this._quadNum,e$D._attribInfo=this._attribInfo,e$D},e$D.cloneWithNewVBIB=function(){var e$D=new e$m(this._stride,0,0);return e$D._attribInfo=this._attribInfo,e$D},e$D.getVBW=function(){return this._vb.setNeedUpload(),this._vb},e$D.getVBR=function(){return this._vb},e$D.getIBR=function(){return this._ib},e$D.getIBW=function(){return this._ib.setNeedUpload(),this._ib},e$D.createQuadIB=function(e$D){this._quadNum=e$D,this._ib._resizeBuffer(6*e$D*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e$m=this._ib.getUint16Array(),e$Y=0,e$t=0,e$y=0;e$y<e$D;e$y++)e$m[e$Y++]=e$t,e$m[e$Y++]=e$t+2,e$m[e$Y++]=e$t+1,e$m[e$Y++]=e$t,e$m[e$Y++]=e$t+3,e$m[e$Y++]=e$t+2,e$t+=4;this._ib.setNeedUpload()},e$D.setAttributes=function(e$D){if(this._attribInfo=e$D,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},e$D.getEleNum=function(){return this._ib.getBuffer().byteLength/2},e$D.releaseMesh=function(){},e$D.destroy=function(){},e$D.clearVB=function(){this._vb.clear()},e$m._gvaoid=0,e$m}()),e$UD=function(){function e$y(){}return e$i(e$y,"laya.webgl.utils.RenderState2D"),e$y.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e$y.mat2MatArray=function(e$D,e$m){var e$Y=e$D,e$t=e$m;return e$t[0]=e$Y.a,e$t[1]=e$Y.b,e$t[2]=e$y.EMPTYMAT4_ARRAY[2],e$t[3]=e$y.EMPTYMAT4_ARRAY[3],e$t[4]=e$Y.c,e$t[5]=e$Y.d,e$t[6]=e$y.EMPTYMAT4_ARRAY[6],e$t[7]=e$y.EMPTYMAT4_ARRAY[7],e$t[8]=e$y.EMPTYMAT4_ARRAY[8],e$t[9]=e$y.EMPTYMAT4_ARRAY[9],e$t[10]=e$y.EMPTYMAT4_ARRAY[10],e$t[11]=e$y.EMPTYMAT4_ARRAY[11],e$t[12]=e$Y.tx,e$t[13]=e$Y.ty,e$t[14]=e$y.EMPTYMAT4_ARRAY[14],e$t[15]=e$y.EMPTYMAT4_ARRAY[15],e$m},e$y.restoreTempArray=function(){e$y.TEMPMAT4_ARRAY[0]=1,e$y.TEMPMAT4_ARRAY[1]=0,e$y.TEMPMAT4_ARRAY[4]=0,e$y.TEMPMAT4_ARRAY[5]=1,e$y.TEMPMAT4_ARRAY[12]=0,e$y.TEMPMAT4_ARRAY[13]=0},e$y.clear=function(){e$y.worldScissorTest=!1,e$y.worldShaderDefines=null,e$y.worldFilters=null,e$y.worldAlpha=1,e$y.worldClipRect.x=e$y.worldClipRect.y=0,e$y.worldClipRect.width=e$y.width,e$y.worldClipRect.height=e$y.height,e$y.curRenderTarget=null},e$y._MAXSIZE=99999999,e$y.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$y.worldMatrix4=e$y.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$y.worldAlpha=1,e$y.worldScissorTest=!1,e$y.worldFilters=null,e$y.worldShaderDefines=null,e$y.curRenderTarget=null,e$y.width=0,e$y.height=0,e$E(e$y,["worldMatrix",function(){return this.worldMatrix=new e$J},"worldClipRect",function(){return this.worldClipRect=new e$p(0,0,99999999,99999999)}]),e$y}(),e$eD=function(){var e$U,e$Y;function e$e(e$D,e$m,e$Y,e$t,e$y){var e$l=this;function e$E(e$D){var e$m=[],e$Y=new e$U(e$m);return e$l._compileToTree(e$Y,e$D.split("\n"),0,e$m,e$y),e$Y}var e$B=e$R.now();this._VS=e$E(e$m),this._PS=e$E(e$Y),this._nameMap=e$t,2<e$R.now()-e$B&&console.log("ShaderCompile use time:"+(e$R.now()-e$B)+"  size:"+e$m.length+"/"+e$Y.length)}e$i(e$e,"laya.webgl.utils.ShaderCompile");var e$D=e$e.prototype;return e$D._compileToTree=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i=0,e$R=0,e$G=0,e$I=0;for(e$R=e$Y;e$R<e$m.length;e$R++)if(!((e$B=e$m[e$R]).length<1)&&0!==(e$i=e$B.indexOf("//"))){if(0<=e$i&&(e$B=e$B.substr(0,e$i)),e$l=e$_||new e$U(e$t),e$_=null,e$l.text=e$B,e$l.noCompile=!0,0<=(e$i=e$B.indexOf("#"))){for(e$o="#",e$I=e$i+1,e$G=e$B.length;e$I<e$G;e$I++){var e$w=e$B.charAt(e$I);if(" "===e$w||"\t"===e$w||"\r"===e$w||"\n"===e$w||"?"===e$w)break;e$o+=e$w}switch(e$l.name=e$o){case"#ifdef":case"#ifndef":if(e$l.src=e$B,e$l.noCompile=null!=e$B.match(/[!&|()=<>]/),e$l.noCompile?console.log("function():Boolean{return "+e$B.substr(e$i+e$l.name.length)+"}"):(e$f=e$B.replace(/^\s*/,"").split(/\s+/),e$l.setCondition(e$f[1],"#ifdef"===e$o?1:2),e$l.text="//"+e$l.text),e$l.setParent(e$D),e$D=e$l,e$y)for(e$f=e$B.substr(e$I).split(e$e._splitToWordExps3),e$I=0;e$I<e$f.length;e$I++)(e$B=e$f[e$I]).length&&(e$y[e$B]=!0);continue;case"#if":if(e$l.src=e$B,e$l.noCompile=!0,e$l.setParent(e$D),e$D=e$l,e$y)for(e$f=e$B.substr(e$I).split(e$e._splitToWordExps3),e$I=0;e$I<e$f.length;e$I++)(e$B=e$f[e$I]).length&&"defined"!=e$B&&(e$y[e$B]=!0);continue;case"#else":e$l.src=e$B,e$E=(e$D=e$D.parent).childs[e$D.childs.length-1],e$l.noCompile=e$E.noCompile,e$l.noCompile||(e$l.condition=e$E.condition,e$l.conditionType=1==e$E.conditionType?2:1,e$l.text="//"+e$l.text+" "+e$E.text+" "+e$l.conditionType),e$l.setParent(e$D),e$D=e$l;continue;case"#endif":e$E=(e$D=e$D.parent).childs[e$D.childs.length-1],e$l.noCompile=e$E.noCompile,e$l.noCompile||(e$l.text="//"+e$l.text),e$l.setParent(e$D);continue;case"#include":e$f=e$e.splitToWords(e$B,null);var e$W=e$e.includes[e$f[1]];if(!e$W)throw"ShaderCompile error no this include file:"+e$f[1];if((e$i=e$f[0].indexOf("?"))<0){e$l.setParent(e$D),e$B=e$W.getWith("with"==e$f[2]?e$f[3]:null),this._compileToTree(e$l,e$B.split("\n"),0,e$t,e$y),e$l.text="";continue}e$l.setCondition(e$f[0].substr(e$i+1),1),e$l.text=e$W.getWith("with"==e$f[2]?e$f[3]:null);break;case"#import":e$r=(e$f=e$e.splitToWords(e$B,null))[1],e$t.push({node:e$l,file:e$e.includes[e$r],ofs:e$l.text.length});continue}}else{if((e$E=e$D.childs[e$D.childs.length-1])&&!e$E.name){0<e$t.length&&e$e.splitToWords(e$B,e$E),e$_=e$l,e$E.text+="\n"+e$B;continue}0<e$t.length&&e$e.splitToWords(e$B,e$l)}e$l.setParent(e$D)}},e$D.createShader=function(e$D,e$m,e$Y){var e$t={},e$y="";if(e$D)for(var e$l in e$D)e$y+="#define "+e$l+"\n",e$t[e$l]=!0;var e$E=this._VS.toscript(e$t,[]),e$B=this._PS.toscript(e$t,[]);return(e$Y||e$xD.create)(e$y+e$E.join("\n"),e$y+e$B.join("\n"),e$m,this._nameMap)},e$e._parseOne=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E={type:e$e.shaderParamsMap[e$Y[e$t+1]],name:e$Y[e$t+2],size:isNaN(parseInt(e$Y[e$t+3]))?1:parseInt(e$Y[e$t+3])};return e$l&&("attribute"==e$y?e$D.push(e$E):e$m.push(e$E)),":"==e$Y[e$t+3]&&(e$E.type=e$Y[e$t+4],e$t+=2),e$t+=2},e$e.addInclude=function(e$D,e$m){if(!e$m||0===e$m.length)throw new Error("add shader include file err:"+e$D);if(e$e.includes[e$D])throw new Error("add shader include file err, has add:"+e$D);e$e.includes[e$D]=new e$Y(e$m)},e$e.preGetParams=function(e$D,e$m){var e$Y=[e$D,e$m],e$t={},e$y=[],e$l=[],e$E={},e$B=[];e$t.attributes=e$y,e$t.uniforms=e$l,e$t.defines=e$E;for(var e$o=0,e$r=0,e$f=0;e$f<2;e$f++){e$Y[e$f]=e$Y[e$f].replace(e$e._removeAnnotation,"");var e$_,e$i=e$Y[e$f].match(e$e._reg);for(e$o=0,e$r=e$i.length;e$o<e$r;e$o++){var e$R=e$i[e$o];if("attribute"==e$R||"uniform"==e$R)e$o=e$e._parseOne(e$y,e$l,e$i,e$o,e$R,!0);else{if("#define"==e$R){e$B[e$R=e$i[++e$o]]=1;continue}if("#ifdef"==e$R){e$E[e$_=e$i[++e$o]]=e$E[e$_]||[];for(e$o++;e$o<e$r;e$o++)if("attribute"==(e$R=e$i[e$o])||"uniform"==e$R)e$o=e$e._parseOne(e$y,e$l,e$i,e$o,e$R,e$B[e$_]);else if("#else"==e$R)for(e$o++;e$o<e$r;e$o++)if("attribute"==(e$R=e$i[e$o])||"uniform"==e$R)e$o=e$e._parseOne(e$y,e$l,e$i,e$o,e$R,!e$B[e$_]);else if("#endif"==e$R)break}}}}return e$t},e$e.splitToWords=function(e$D,e$m){for(var e$Y,e$t,e$y=[],e$l=-1,e$E=0,e$B=e$D.length;e$E<e$B;e$E++)if(e$Y=e$D.charAt(e$E),0<=" \t=+-*/&%!<>()'\",;".indexOf(e$Y)){if(0<=e$l&&1<e$E-e$l&&(e$t=e$D.substr(e$l,e$E-e$l),e$y.push(e$t)),'"'==e$Y||"'"==e$Y){var e$o=e$D.indexOf(e$Y,e$E+1);if(e$o<0)throw"Sharder err:"+e$D;e$y.push(e$D.substr(e$E+1,e$o-e$E-1)),e$E=e$o,e$l=-1;continue}"("==e$Y&&e$m&&0<e$y.length&&(e$t=e$y[e$y.length-1]+";","vec4;main;".indexOf(e$t)<0&&(e$m.useFuns+=e$t)),e$l=-1}else e$l<0&&(e$l=e$E);return e$l<e$B&&1<e$B-e$l&&(e$t=e$D.substr(e$l,e$B-e$l),e$y.push(e$t)),e$y},e$e.IFDEF_NO=0,e$e.IFDEF_YES=1,e$e.IFDEF_ELSE=2,e$e.IFDEF_PARENT=3,e$e._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),e$e._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),e$e._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),e$e.includes={},e$E(e$e,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),e$e.__init$=function(){e$U=function(){function e$Y(e$D){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=e$D}e$i(e$Y,"");var e$D=e$Y.prototype;return e$D.setParent=function(e$D){e$D.childs.push(this),this.z=e$D.z+1,this.parent=e$D},e$D.setCondition=function(e$D,e$m){e$D&&(this.conditionType=e$m,e$D=e$D.replace(/(\s*$)/g,""),this.condition=function(){return this[e$D]},this.condition.__condition=e$D)},e$D.toscript=function(e$D,e$m){return this._toscript(e$D,e$m,++e$Y.__id)},e$D._toscript=function(e$t,e$y,e$l){if(this.childs.length<1&&!this.text)return e$y;e$y.length;if(this.condition){var e$D=!!this.condition.call(e$t);if(2===this.conditionType&&(e$D=!e$D),!e$D)return e$y}if(this.text&&e$y.push(this.text),0<this.childs.length&&this.childs.forEach(function(e$D,e$m,e$Y){e$D._toscript(e$t,e$y,e$l)}),0<this.includefiles.length&&0<this.useFuns.length)for(var e$m,e$Y=0,e$E=this.includefiles.length;e$Y<e$E;e$Y++)this.includefiles[e$Y].curUseID!=e$l&&0<(e$m=this.includefiles[e$Y].file.getFunsScript(this.useFuns)).length&&(this.includefiles[e$Y].curUseID=e$l,e$y[0]=e$m+e$y[0]);return e$y},e$Y.__id=1,e$Y}(),e$Y=function(){function e$D(e$D){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e$D;for(var e$m=0,e$Y=0,e$t=0;!((e$m=e$D.indexOf("#begin",e$m))<0);){for(e$t=e$m+5;!((e$t=e$D.indexOf("#end",e$t))<0)&&"i"===e$D.charAt(e$t+4);)e$t+=5;if(e$t<0)throw"add include err,no #end:"+e$D;e$Y=e$D.indexOf("\n",e$m);var e$y=e$e.splitToWords(e$D.substr(e$m,e$Y-e$m),null);"code"==e$y[1]?this.codes[e$y[2]]=e$D.substr(e$Y+1,e$t-e$Y-1):"function"==e$y[1]&&(e$Y=e$D.indexOf("function",e$m),e$Y+="function".length,this.funs[e$y[3]]=e$D.substr(e$Y+1,e$t-e$Y-1),this.funnames+=e$y[3]+";"),e$m=e$t+1}}e$i(e$D,"");var e$m=e$D.prototype;return e$m.getWith=function(e$D){var e$m=e$D?this.codes[e$D]:this.script;if(!e$m)throw"get with error:"+e$D;return e$m},e$m.getFunsScript=function(e$D){var e$m="";for(var e$Y in this.funs)0<=e$D.indexOf(e$Y+";")&&(e$m+=this.funs[e$Y]);return e$m},e$D}()},e$e}(),e$vD=function(){function e$E(){}return e$i(e$E,"laya.webgl.WebGL"),e$E._uint8ArraySlice=function(){for(var e$D=this.length,e$m=new Uint8Array(this.length),e$Y=0;e$Y<e$D;e$Y++)e$m[e$Y]=this[e$Y];return e$m},e$E._float32ArraySlice=function(){for(var e$D=this.length,e$m=new Float32Array(this.length),e$Y=0;e$Y<e$D;e$Y++)e$m[e$Y]=this[e$Y];return e$m},e$E._uint16ArraySlice=function(e$D){var e$m,e$Y=arguments,e$t=0,e$y=0;if(0===e$Y.length)for(e$t=this.length,e$m=new Uint16Array(e$t),e$y=0;e$y<e$t;e$y++)e$m[e$y]=this[e$y];else if(2===e$Y.length){var e$l=e$Y[0],e$E=e$Y[1];if(e$l<e$E)for(e$t=e$E-e$l,e$m=new Uint16Array(e$t),e$y=e$l;e$y<e$E;e$y++)e$m[e$y-e$l]=this[e$y];else e$m=new Uint16Array(0)}return e$m},e$E.expandContext=function(){var e$D=e$B.prototype,e$m=CanvasRenderingContext2D.prototype;e$m.fillTrangles=e$D.fillTrangles,e$VD.__int__(null),e$m.setIBVB=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){void 0===e$o&&(e$o=0),void 0===e$r&&(e$r=0),null===e$Y&&(this._ib=this._ib||e$jD.QuadrangleIB,e$Y=this._ib,e$wD.expandIBQuadrangle(e$Y,e$t._byteLength/64+8)),this._setIBVB(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r)},e$m.fillTrangles=function(e$D,e$m,e$Y,e$t,e$y){this._curMat=this._curMat||e$J.create(),this._vb=this._vb||e$KD.create(),this._ib||(this._ib=e$jD.create(),e$wD.fillIBQuadrangle(this._ib,e$E/4));var e$l=this._vb,e$E=e$t.length>>4;e$wD.fillTranglesVB(e$l,e$m,e$Y,e$t,e$y||this._curMat,0,0),e$wD.expandIBQuadrangle(this._ib,e$l._byteLength/64+8);var e$B=new e$AD(1,0);e$B.textureHost=e$D;var e$o=new e$bD("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");e$l._vertType=3,this._setIBVB(e$m,e$Y,this._ib,e$l,6*e$E,e$y,e$o,e$B,0,0)}},e$E.enable=function(){if(e$R.__init__(),e$W.isConchApp&&!e$W.isConchWebGL)return e$c.skinAniSprite=function(){return new e$DD},e$E.expandContext(),!1;if(e$c.getWebGLContext=function(e$D){for(var e$m,e$Y=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e$t=0;e$t<e$Y.length;e$t++){try{e$m=e$D.getContext(e$Y[e$t],{stencil:e$z.isStencil,alpha:e$z.isAlpha,antialias:e$z.isAntialias,premultipliedAlpha:e$z.premultipliedAlpha,preserveDrawingBuffer:e$z.preserveDrawingBuffer})}catch(e$D){}if(e$m)return e$m}return null},null==(e$E.mainContext=e$E.mainContext||e$c.getWebGLContext(e$W._mainCanvas)))return!1;if(e$W.isWebGL)return!0;e$w.create=function(e$D,e$m){return new e$Dm(e$D,e$m)},e$m.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){return new e$HD(e$D,e$m,e$Y,e$t,e$y,e$l,e$E)},e$W.WebGL=e$E,e$W.isWebGL=!0,e$RD.__init__(),e$c.createRenderSprite=function(e$D,e$m){return new e$JD(e$D,e$m)},e$c.createWebGLContext2D=function(e$D){return new e$zD(e$D)},e$c.changeWebGLSize=function(e$D,e$m){laya.webgl.WebGL.onStageResize(e$D,e$m)},e$c.createGraphics=function(){return new e$SD};var e$D=e$c.createFilterAction;return e$c.createFilterAction=e$D||function(e$D){return new e$aD},e$c.clear=function(e$D){e$UD.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e$m=e$W.context.ctx,e$Y=0==e$m._submits._length||e$z.preserveDrawingBuffer?e$G.create(e$D)._color:e$s._wgColor;e$Y&&e$m.clearBG(e$Y[0],e$Y[1],e$Y[2],e$Y[3]),e$UD.clear()},e$c.addToAtlas=function(e$D,e$m){void 0===e$m&&(e$m=!1);var e$Y=e$D.bitmap;e$W.optimizeTextureMemory(e$D.url,e$D)?e$S.__typeof(e$Y,"laya.webgl.resource.IMergeAtlasBitmap")&&e$Y.allowMerageInAtlas&&e$Y.on("recovered",e$D,e$D.addTextureToAtlas):e$Y.enableMerageInAtlas=!1},e$c.isAtlas=function(e$D){return e$D instanceof laya.webgl.atlas.AtlasWebGLCanvas},e$q._enable(),e$c.beginFlush=function(){for(var e$D=e$q.instance,e$m=e$D.getAtlaserCount(),e$Y=0;e$Y<e$m;e$Y++){var e$t=e$D.getAtlaserByIndex(e$Y).texture;e$t._flashCacheImageNeedFlush&&e$c.flashFlushImage(e$t)}},e$c.drawToCanvas=function(e$D,e$m,e$Y,e$t,e$y,e$l){(e$Y<=0||e$t<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),e$Y|=0,e$t|=0,e$y|=0,e$l|=0;var e$E=e$XD.create(e$Y,e$t,6408,5121,0,!1);e$E.start(),e$E.clear(0,0,0,0),e$W.context.clear(),e$U.renders[e$m]._fun(e$D,e$W.context,e$y,e$UD.height-e$t+e$l),e$W.context.flush(),e$E.end();var e$B=e$E.getData(0,0,e$Y,e$t);if(e$E.recycle(),e$B.byteLength==e$Y*e$t*4){var e$o=new e$MD;e$o._canvas=e$R.createElement("canvas"),e$o.size(e$Y,e$t);var e$r=e$o._canvas.getContext("2d");e$R.canvas.size(e$Y,e$t);var e$f=e$R.context,e$_=e$f.createImageData(e$Y,e$t);return e$_.data.set(new Uint8ClampedArray(e$B.buffer)),e$o._imgData=e$_,e$f.putImageData(e$_,0,0),e$r.save(),e$r.translate(0,e$t),e$r.scale(1,-1),e$r.drawImage(e$R.canvas.source,0,0),e$r.restore(),e$o}console.log("drawToCanvas error: w:"+e$Y+",h:"+e$t+",datalen:"+e$B.byteLength)},e$c.createFilterAction=function(e$D){var e$m;switch(e$D){case 32:e$m=new e$aD}return e$m},e$c.addTextureToAtlas=function(e$D){e$D._uvID++,e$q._atlasRestore++,e$D.bitmap.enableMerageInAtlas&&e$q.instance.addToAtlas(e$D)},e$c.getTexturePixels=function(e$D,e$m,e$Y,e$t,e$y){e$W.context.ctx.clear();var e$l=new e$F;e$l.graphics.drawTexture(e$D,-e$m,-e$Y);var e$E=e$XD.create(e$t,e$y);e$E.start(),e$E.clear(0,0,0,0),e$l.render(e$W.context,0,0),e$W.context.ctx.flush(),e$E.end();for(var e$B=e$E.getData(0,0,e$t,e$y),e$o=[],e$r=0,e$f=e$y-1;0<=e$f;e$f--)for(var e$_=0;e$_<e$t;e$_++)e$r=4*(e$f*e$t+e$_),e$o.push(e$B[e$r]),e$o.push(e$B[e$r+1]),e$o.push(e$B[e$r+2]),e$o.push(e$B[e$r+3]);return e$o},e$c.skinAniSprite=function(){return new e$DD},e$I.create=function(e$D,e$m){var e$Y=new e$MD;return e$Y._imgData=e$m,e$Y.flipY=!1,e$Y},e$A._filterStart=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.getValue("bounds"),e$E=e$XD.create(e$l.width,e$l.height);if(e$E.start(),e$E.clear(0,0,0,0),e$D.addValue("src",e$E),e$D.addValue("ScissorTest",e$UD.worldScissorTest),e$UD.worldScissorTest){var e$B=new e$p;e$B.copyFrom(e$Y.ctx._clipRect),e$D.addValue("clipRect",e$B),e$UD.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},e$A._filterEnd=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.getValue("bounds");e$D.getValue("src").end();var e$E=e$XD.create(e$l.width,e$l.height);e$E.start(),e$E.clear(0,0,0,0),e$D.addValue("out",e$E),e$m._set$P("_filterCache",e$E),e$m._set$P("_isHaveGlowFilter",e$D.getValue("_isHaveGlowFilter"))},e$A._EndTarget=function(e$D,e$m){if(e$D.getValue("src").recycle(),e$D.getValue("out").end(),e$D.getValue("ScissorTest")){e$UD.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e$m.ctx.save();var e$Y=e$D.getValue("clipRect");e$m.ctx.clipRect(e$Y.x,e$Y.y,e$Y.width,e$Y.height)}},e$A._useSrc=function(e$D){var e$m=e$D.getValue("out");e$m.end(),(e$m=e$D.getValue("src")).start(),e$m.clear(0,0,0,0)},e$A._endSrc=function(e$D){e$D.getValue("src").end()},e$A._useOut=function(e$D){var e$m=e$D.getValue("src");e$m.end(),(e$m=e$D.getValue("out")).start(),e$m.clear(0,0,0,0)},e$A._endOut=function(e$D){e$D.getValue("out").end()},e$A._recycleScope=function(e$D){e$D.recycle()},e$A._filter=function(e$D,e$m,e$Y,e$t){var e$y=this._next;if(e$y){var e$l,e$E,e$B=e$D.filters,e$o=e$B.length;if(1==e$o&&32==e$B[0].type)return e$m.ctx.save(),e$m.ctx.setFilters([e$B[0]]),e$y._fun.call(e$y,e$D,e$m,e$Y,e$t),void e$m.ctx.restore();var e$r=e$BD.create(),e$f=e$a.TEMP,e$_=e$m.ctx._getTransformMatrix(),e$i=e$J.create();e$_.copyTo(e$i);var e$R=0,e$G=0,e$I=!1,e$w=e$D._$P._filterCache?e$D._$P._filterCache:null;if(!e$w||e$D._repaint){e$I=e$D._isHaveGlowFilter(),e$r.addValue("_isHaveGlowFilter",e$I),e$I&&(e$R=50,e$G=25),(e$E=new e$p).copyFrom(e$D.getSelfBounds()),e$E.x+=e$D.x,e$E.y+=e$D.y,e$E.x-=e$D.pivotX+4,e$E.y-=e$D.pivotY+4;var e$W=e$E.x,e$U=e$E.y;if(e$E.width+=e$R+8,e$E.height+=e$R+8,e$f.x=e$E.x*e$i.a+e$E.y*e$i.c,e$f.y=e$E.y*e$i.d+e$E.x*e$i.b,e$E.x=e$f.x,e$E.y=e$f.y,e$f.x=e$E.width*e$i.a+e$E.height*e$i.c,e$f.y=e$E.height*e$i.d+e$E.width*e$i.b,e$E.width=e$f.x,e$E.height=e$f.y,e$E.width<=0||e$E.height<=0)return;e$w&&e$w.recycle(),e$r.addValue("bounds",e$E);var e$e=e$ED.create([e$r,e$D,e$m,0,0],e$A._filterStart);e$m.addRenderObject(e$e),e$m.ctx._renderKey=0,e$m.ctx._shader2D.glTexture=null;var e$v=e$D.x-e$W+e$G,e$c=e$D.y-e$U+e$G;e$y._fun.call(e$y,e$D,e$m,e$v,e$c),e$e=e$ED.create([e$r,e$D,e$m,0,0],e$A._filterEnd),e$m.addRenderObject(e$e);for(var e$S=0;e$S<e$o;e$S++){0!=e$S&&(e$e=e$ED.create([e$r],e$A._useSrc),e$m.addRenderObject(e$e),e$l=e$AD.create(1,0),e$J.TEMP.identity(),e$m.ctx.drawTarget(e$r,0,0,e$E.width,e$E.height,e$J.TEMP,"out",e$l,null,e$d.TOINT.overlay),e$e=e$ED.create([e$r],e$A._useOut),e$m.addRenderObject(e$e)),e$B[e$S].action.apply3d(e$r,e$D,e$m,0,0)}e$e=e$ED.create([e$r,e$m],e$A._EndTarget),e$m.addRenderObject(e$e)}else{if((e$I=!!e$D._$P._isHaveGlowFilter&&e$D._$P._isHaveGlowFilter)&&(e$R=50,e$G=25),(e$E=e$D.getBounds()).width<=0||e$E.height<=0)return;e$E.width+=e$R,e$E.height+=e$R,e$f.x=e$E.x*e$i.a+e$E.y*e$i.c,e$f.y=e$E.y*e$i.d+e$E.x*e$i.b,e$E.x=e$f.x,e$E.y=e$f.y,e$f.x=e$E.width*e$i.a+e$E.height*e$i.c,e$f.y=e$E.height*e$i.d+e$E.width*e$i.b,e$E.width=e$f.x,e$E.height=e$f.y,e$r.addValue("out",e$w)}e$Y=e$Y-e$G-e$D.x,e$t=e$t-e$G-e$D.y,e$f.setTo(e$Y,e$t),e$i.transformPoint(e$f),e$Y=e$f.x+e$E.x,e$t=e$f.y+e$E.y,e$l=e$AD.create(1,0),e$J.TEMP.identity(),e$m.ctx.drawTarget(e$r,e$Y,e$t,e$E.width,e$E.height,e$J.TEMP,"out",e$l,null,e$d.TOINT.overlay),e$e=e$ED.create([e$r],e$A._recycleScope),e$m.addRenderObject(e$e),e$i.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=e$E._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=e$E._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=e$E._uint8ArraySlice),!0},e$E.onStageResize=function(e$D,e$m){null!=e$E.mainContext&&(e$E.mainContext.viewport(0,0,e$D,e$m),e$UD.width=e$D,e$UD.height=e$m)},e$E.onInvalidGLRes=function(){e$q.instance.freeAll(),e$v.releaseContentManagers(!0),e$E.doNodeRepaint(e$S.stage),e$E.mainContext.viewport(0,0,e$UD.width,e$UD.height),e$S.stage.event("devicelost")},e$E.doNodeRepaint=function(e$D){0==e$D.numChildren&&e$D.repaint();for(var e$m=0;e$m<e$D.numChildren;e$m++)e$E.doNodeRepaint(e$D.getChildAt(e$m))},e$E.init=function(e$D,e$m,e$Y){e$E.mainCanvas=e$D,e$I._createContext=function(e$D){return new e$zD(e$D)},e$MD._createContext=function(e$D){return new e$zD(e$D)};var e$t=laya.webgl.WebGL.mainContext;if(null!=e$t.getShaderPrecisionFormat){var e$y=e$t.getShaderPrecisionFormat(35633,36338),e$l=e$t.getShaderPrecisionFormat(35632,36338);e$E.shaderHighPrecision=!(!e$y.precision||!e$l.precision)}else e$E.shaderHighPrecision=!1;if(e$E.compressAstc=e$t.getExtension("WEBGL_compressed_texture_astc"),e$E.compressAtc=e$t.getExtension("WEBGL_compressed_texture_atc"),e$E.compressEtc=e$t.getExtension("WEBGL_compressed_texture_etc"),e$E.compressEtc1=e$t.getExtension("WEBGL_compressed_texture_etc1"),e$E.compressPvrtc=e$t.getExtension("WEBGL_compressed_texture_pvrtc"),e$E.compressS3tc=e$t.getExtension("WEBGL_compressed_texture_s3tc"),e$E.compressS3tc_srgb=e$t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),e$E.compressAstc=e$E.compressAstc?e$E.compressAstc:{},e$E.compressAtc=e$E.compressAtc?e$E.compressAtc:{},e$E.compressEtc=e$E.compressEtc?e$E.compressEtc:{},e$E.compressEtc1=e$E.compressEtc1?e$E.compressEtc1:{},e$E.compressPvrtc=e$E.compressPvrtc?e$E.compressPvrtc:{},e$E.compressS3tc=e$E.compressS3tc?e$E.compressS3tc:{},e$E.compressS3tc_srgb=e$E.compressS3tc_srgb?e$E.compressS3tc_srgb:{},e$t.deleteTexture1=e$t.deleteTexture,e$t.deleteTexture=function(e$D){e$D==e$cD.curBindTexValue&&(e$cD.curBindTexValue=null),e$t.deleteTexture1(e$D)},e$E.onStageResize(e$m,e$Y),null==e$E.mainContext)throw new Error("webGL getContext err!");e$N.__init__(),e$q.__init__(),e$FD.__init__(),e$lD.__init__(),e$zD.__init__(),e$AD.__init__(),e$j.__init__(),e$VD.__int__(e$t),e$d._init_(e$t),e$W.isConchApp&&conch.setOnInvalidGLRes(e$E.onInvalidGLRes)},e$E.mainCanvas=null,e$E.antialias=!0,e$E.shaderHighPrecision=!1,e$E._bg_null=[0,0,0,0],e$E}(),e$cD=function(){function e$t(){}return e$i(e$t,"laya.webgl.WebGLContext"),e$t.UseProgram=function(e$D){return e$t._useProgram!==e$D&&(e$vD.mainContext.useProgram(e$D),e$t._useProgram=e$D,!0)},e$t.setDepthTest=function(e$D,e$m){e$m!==e$t._depthTest&&((e$t._depthTest=e$m)?e$D.enable(2929):e$D.disable(2929))},e$t.setDepthMask=function(e$D,e$m){e$m!==e$t._depthMask&&(e$t._depthMask=e$m,e$D.depthMask(e$m))},e$t.setDepthFunc=function(e$D,e$m){e$m!==e$t._depthFunc&&(e$t._depthFunc=e$m,e$D.depthFunc(e$m))},e$t.setBlend=function(e$D,e$m){e$m!==e$t._blend&&((e$t._blend=e$m)?e$D.enable(3042):e$D.disable(3042))},e$t.setBlendFunc=function(e$D,e$m,e$Y){(e$m!==e$t._sFactor||e$Y!==e$t._dFactor)&&(e$t._sFactor=e$m,e$t._dFactor=e$Y,e$D.blendFunc(e$m,e$Y))},e$t.setCullFace=function(e$D,e$m){e$m!==e$t._cullFace&&((e$t._cullFace=e$m)?e$D.enable(2884):e$D.disable(2884))},e$t.setFrontFace=function(e$D,e$m){e$m!==e$t._frontFace&&(e$t._frontFace=e$m,e$D.frontFace(e$m))},e$t.bindTexture=function(e$D,e$m,e$Y){e$D.bindTexture(e$m,e$Y),e$t.curBindTexTarget=e$m,e$t.curBindTexValue=e$Y},e$t.DEPTH_BUFFER_BIT=256,e$t.STENCIL_BUFFER_BIT=1024,e$t.COLOR_BUFFER_BIT=16384,e$t.POINTS=0,e$t.LINES=1,e$t.LINE_LOOP=2,e$t.LINE_STRIP=3,e$t.TRIANGLES=4,e$t.TRIANGLE_STRIP=5,e$t.TRIANGLE_FAN=6,e$t.ZERO=0,e$t.ONE=1,e$t.SRC_COLOR=768,e$t.ONE_MINUS_SRC_COLOR=769,e$t.SRC_ALPHA=770,e$t.ONE_MINUS_SRC_ALPHA=771,e$t.DST_ALPHA=772,e$t.ONE_MINUS_DST_ALPHA=773,e$t.DST_COLOR=774,e$t.ONE_MINUS_DST_COLOR=775,e$t.SRC_ALPHA_SATURATE=776,e$t.FUNC_ADD=32774,e$t.BLEND_EQUATION=32777,e$t.BLEND_EQUATION_RGB=32777,e$t.BLEND_EQUATION_ALPHA=34877,e$t.FUNC_SUBTRACT=32778,e$t.FUNC_REVERSE_SUBTRACT=32779,e$t.BLEND_DST_RGB=32968,e$t.BLEND_SRC_RGB=32969,e$t.BLEND_DST_ALPHA=32970,e$t.BLEND_SRC_ALPHA=32971,e$t.CONSTANT_COLOR=32769,e$t.ONE_MINUS_CONSTANT_COLOR=32770,e$t.CONSTANT_ALPHA=32771,e$t.ONE_MINUS_CONSTANT_ALPHA=32772,e$t.BLEND_COLOR=32773,e$t.ARRAY_BUFFER=34962,e$t.ELEMENT_ARRAY_BUFFER=34963,e$t.ARRAY_BUFFER_BINDING=34964,e$t.ELEMENT_ARRAY_BUFFER_BINDING=34965,e$t.STREAM_DRAW=35040,e$t.STATIC_DRAW=35044,e$t.DYNAMIC_DRAW=35048,e$t.BUFFER_SIZE=34660,e$t.BUFFER_USAGE=34661,e$t.CURRENT_VERTEX_ATTRIB=34342,e$t.FRONT=1028,e$t.BACK=1029,e$t.CULL_FACE=2884,e$t.FRONT_AND_BACK=1032,e$t.BLEND=3042,e$t.DITHER=3024,e$t.STENCIL_TEST=2960,e$t.DEPTH_TEST=2929,e$t.SCISSOR_TEST=3089,e$t.POLYGON_OFFSET_FILL=32823,e$t.SAMPLE_ALPHA_TO_COVERAGE=32926,e$t.SAMPLE_COVERAGE=32928,e$t.NO_ERROR=0,e$t.INVALID_ENUM=1280,e$t.INVALID_VALUE=1281,e$t.INVALID_OPERATION=1282,e$t.OUT_OF_MEMORY=1285,e$t.CW=2304,e$t.CCW=2305,e$t.LINE_WIDTH=2849,e$t.ALIASED_POINT_SIZE_RANGE=33901,e$t.ALIASED_LINE_WIDTH_RANGE=33902,e$t.CULL_FACE_MODE=2885,e$t.FRONT_FACE=2886,e$t.DEPTH_RANGE=2928,e$t.DEPTH_WRITEMASK=2930,e$t.DEPTH_CLEAR_VALUE=2931,e$t.DEPTH_FUNC=2932,e$t.STENCIL_CLEAR_VALUE=2961,e$t.STENCIL_FUNC=2962,e$t.STENCIL_FAIL=2964,e$t.STENCIL_PASS_DEPTH_FAIL=2965,e$t.STENCIL_PASS_DEPTH_PASS=2966,e$t.STENCIL_REF=2967,e$t.STENCIL_VALUE_MASK=2963,e$t.STENCIL_WRITEMASK=2968,e$t.STENCIL_BACK_FUNC=34816,e$t.STENCIL_BACK_FAIL=34817,e$t.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e$t.STENCIL_BACK_PASS_DEPTH_PASS=34819,e$t.STENCIL_BACK_REF=36003,e$t.STENCIL_BACK_VALUE_MASK=36004,e$t.STENCIL_BACK_WRITEMASK=36005,e$t.VIEWPORT=2978,e$t.SCISSOR_BOX=3088,e$t.COLOR_CLEAR_VALUE=3106,e$t.COLOR_WRITEMASK=3107,e$t.UNPACK_ALIGNMENT=3317,e$t.PACK_ALIGNMENT=3333,e$t.MAX_TEXTURE_SIZE=3379,e$t.MAX_VIEWPORT_DIMS=3386,e$t.SUBPIXEL_BITS=3408,e$t.RED_BITS=3410,e$t.GREEN_BITS=3411,e$t.BLUE_BITS=3412,e$t.ALPHA_BITS=3413,e$t.DEPTH_BITS=3414,e$t.STENCIL_BITS=3415,e$t.POLYGON_OFFSET_UNITS=10752,e$t.POLYGON_OFFSET_FACTOR=32824,e$t.TEXTURE_BINDING_2D=32873,e$t.SAMPLE_BUFFERS=32936,e$t.SAMPLES=32937,e$t.SAMPLE_COVERAGE_VALUE=32938,e$t.SAMPLE_COVERAGE_INVERT=32939,e$t.NUM_COMPRESSED_TEXTURE_FORMATS=34466,e$t.COMPRESSED_TEXTURE_FORMATS=34467,e$t.DONT_CARE=4352,e$t.FASTEST=4353,e$t.NICEST=4354,e$t.GENERATE_MIPMAP_HINT=33170,e$t.BYTE=5120,e$t.UNSIGNED_BYTE=5121,e$t.SHORT=5122,e$t.UNSIGNED_SHORT=5123,e$t.INT=5124,e$t.UNSIGNED_INT=5125,e$t.FLOAT=5126,e$t.DEPTH_COMPONENT=6402,e$t.ALPHA=6406,e$t.RGB=6407,e$t.RGBA=6408,e$t.LUMINANCE=6409,e$t.LUMINANCE_ALPHA=6410,e$t.UNSIGNED_SHORT_4_4_4_4=32819,e$t.UNSIGNED_SHORT_5_5_5_1=32820,e$t.UNSIGNED_SHORT_5_6_5=33635,e$t.FRAGMENT_SHADER=35632,e$t.VERTEX_SHADER=35633,e$t.MAX_VERTEX_ATTRIBS=34921,e$t.MAX_VERTEX_UNIFORM_VECTORS=36347,e$t.MAX_VARYING_VECTORS=36348,e$t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e$t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e$t.MAX_TEXTURE_IMAGE_UNITS=34930,e$t.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e$t.SHADER_TYPE=35663,e$t.DELETE_STATUS=35712,e$t.LINK_STATUS=35714,e$t.VALIDATE_STATUS=35715,e$t.ATTACHED_SHADERS=35717,e$t.ACTIVE_UNIFORMS=35718,e$t.ACTIVE_ATTRIBUTES=35721,e$t.SHADING_LANGUAGE_VERSION=35724,e$t.CURRENT_PROGRAM=35725,e$t.NEVER=512,e$t.LESS=513,e$t.EQUAL=514,e$t.LEQUAL=515,e$t.GREATER=516,e$t.NOTEQUAL=517,e$t.GEQUAL=518,e$t.ALWAYS=519,e$t.KEEP=7680,e$t.REPLACE=7681,e$t.INCR=7682,e$t.DECR=7683,e$t.INVERT=5386,e$t.INCR_WRAP=34055,e$t.DECR_WRAP=34056,e$t.VENDOR=7936,e$t.RENDERER=7937,e$t.VERSION=7938,e$t.NEAREST=9728,e$t.LINEAR=9729,e$t.NEAREST_MIPMAP_NEAREST=9984,e$t.LINEAR_MIPMAP_NEAREST=9985,e$t.NEAREST_MIPMAP_LINEAR=9986,e$t.LINEAR_MIPMAP_LINEAR=9987,e$t.TEXTURE_MAG_FILTER=10240,e$t.TEXTURE_MIN_FILTER=10241,e$t.TEXTURE_WRAP_S=10242,e$t.TEXTURE_WRAP_T=10243,e$t.TEXTURE_2D=3553,e$t.TEXTURE=5890,e$t.TEXTURE_CUBE_MAP=34067,e$t.TEXTURE_BINDING_CUBE_MAP=34068,e$t.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e$t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e$t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e$t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e$t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e$t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e$t.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e$t.TEXTURE0=33984,e$t.TEXTURE1=33985,e$t.TEXTURE2=33986,e$t.TEXTURE3=33987,e$t.TEXTURE4=33988,e$t.TEXTURE5=33989,e$t.TEXTURE6=33990,e$t.TEXTURE7=33991,e$t.TEXTURE8=33992,e$t.TEXTURE9=33993,e$t.TEXTURE10=33994,e$t.TEXTURE11=33995,e$t.TEXTURE12=33996,e$t.TEXTURE13=33997,e$t.TEXTURE14=33998,e$t.TEXTURE15=33999,e$t.TEXTURE16=34e3,e$t.TEXTURE17=34001,e$t.TEXTURE18=34002,e$t.TEXTURE19=34003,e$t.TEXTURE20=34004,e$t.TEXTURE21=34005,e$t.TEXTURE22=34006,e$t.TEXTURE23=34007,e$t.TEXTURE24=34008,e$t.TEXTURE25=34009,e$t.TEXTURE26=34010,e$t.TEXTURE27=34011,e$t.TEXTURE28=34012,e$t.TEXTURE29=34013,e$t.TEXTURE30=34014,e$t.TEXTURE31=34015,e$t.ACTIVE_TEXTURE=34016,e$t.REPEAT=10497,e$t.CLAMP_TO_EDGE=33071,e$t.MIRRORED_REPEAT=33648,e$t.FLOAT_VEC2=35664,e$t.FLOAT_VEC3=35665,e$t.FLOAT_VEC4=35666,e$t.INT_VEC2=35667,e$t.INT_VEC3=35668,e$t.INT_VEC4=35669,e$t.BOOL=35670,e$t.BOOL_VEC2=35671,e$t.BOOL_VEC3=35672,e$t.BOOL_VEC4=35673,e$t.FLOAT_MAT2=35674,e$t.FLOAT_MAT3=35675,e$t.FLOAT_MAT4=35676,e$t.SAMPLER_2D=35678,e$t.SAMPLER_CUBE=35680,e$t.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e$t.VERTEX_ATTRIB_ARRAY_SIZE=34339,e$t.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e$t.VERTEX_ATTRIB_ARRAY_TYPE=34341,e$t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e$t.VERTEX_ATTRIB_ARRAY_POINTER=34373,e$t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e$t.COMPILE_STATUS=35713,e$t.LOW_FLOAT=36336,e$t.MEDIUM_FLOAT=36337,e$t.HIGH_FLOAT=36338,e$t.LOW_INT=36339,e$t.MEDIUM_INT=36340,e$t.HIGH_INT=36341,e$t.FRAMEBUFFER=36160,e$t.RENDERBUFFER=36161,e$t.RGBA4=32854,e$t.RGB5_A1=32855,e$t.RGB565=36194,e$t.DEPTH_COMPONENT16=33189,e$t.STENCIL_INDEX=6401,e$t.STENCIL_INDEX8=36168,e$t.DEPTH_STENCIL=34041,e$t.RENDERBUFFER_WIDTH=36162,e$t.RENDERBUFFER_HEIGHT=36163,e$t.RENDERBUFFER_INTERNAL_FORMAT=36164,e$t.RENDERBUFFER_RED_SIZE=36176,e$t.RENDERBUFFER_GREEN_SIZE=36177,e$t.RENDERBUFFER_BLUE_SIZE=36178,e$t.RENDERBUFFER_ALPHA_SIZE=36179,e$t.RENDERBUFFER_DEPTH_SIZE=36180,e$t.RENDERBUFFER_STENCIL_SIZE=36181,e$t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e$t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e$t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e$t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e$t.COLOR_ATTACHMENT0=36064,e$t.DEPTH_ATTACHMENT=36096,e$t.STENCIL_ATTACHMENT=36128,e$t.DEPTH_STENCIL_ATTACHMENT=33306,e$t.NONE=0,e$t.FRAMEBUFFER_COMPLETE=36053,e$t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e$t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e$t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e$t.FRAMEBUFFER_UNSUPPORTED=36061,e$t.FRAMEBUFFER_BINDING=36006,e$t.RENDERBUFFER_BINDING=36007,e$t.MAX_RENDERBUFFER_SIZE=34024,e$t.INVALID_FRAMEBUFFER_OPERATION=1286,e$t.UNPACK_FLIP_Y_WEBGL=37440,e$t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e$t.CONTEXT_LOST_WEBGL=37442,e$t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e$t.BROWSER_DEFAULT_WEBGL=37444,e$t._useProgram=null,e$t._depthTest=!0,e$t._depthMask=!0,e$t._blend=!1,e$t._cullFace=!1,e$t.curBindTexTarget=null,e$t.curBindTexValue=null,e$E(e$t,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),e$t}(),e$SD=function(e$D){function e$m(){e$m.__super.call(this)}e$i(e$m,"laya.webgl.display.GraphicsGL",e$r);var e$Y=e$m.prototype;return e$Y.setShader=function(e$D){this._saveToCmd(e$W.context._setShader,[e$D])},e$Y.setIBVB=function(e$D,e$m,e$Y,e$t,e$y,e$l){this._saveToCmd(e$W.context._setIBVB,[e$D,e$m,e$Y,e$t,e$y,e$l])},e$Y.drawParticle=function(e$D,e$m,e$Y){var e$t=e$c.createParticleTemplate2D(e$Y);e$t.x=e$D,e$t.y=e$m,this._saveToCmd(e$W.context._drawParticle,[e$t])},e$m}(),e$zD=function(e$D){var e$Y;function e$L(e$D){this._x=0,this._y=0,this._id=++e$L._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,e$L.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=e$L.MAXCLIPRECT,this.mOutPoint,this._canvas=e$D,this._canvas._addReference(),e$L._contextcount++,e$W.isFlash?(this._ib=e$jD.create(35044),e$wD.fillIBQuadrangle(this._ib,16)):this._ib=e$jD.QuadrangleIB,this.clear()}e$i(e$L,"laya.webgl.canvas.WebGLContext2D",e$B);var e$m=e$L.prototype;return e$m.setIsMainContext=function(){this._isMain=!0},e$m.clearBG=function(e$D,e$m,e$Y,e$t){var e$y=e$vD.mainContext;e$y.clearColor(e$D,e$m,e$Y,e$t),e$y.clear(16384)},e$m._getSubmits=function(){return this._submits},e$m._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var e$D=0,e$m=this._submits._length;e$D<e$m;e$D++)this._submits[e$D].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},e$m.destroy=function(){--e$L._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=e$jD.QuadrangleIB&&this._ib.releaseResource()},e$m.clear=function(){this._submits||(this._other=e$Y.DEFAULT,this._curMat=e$J.create(),this._vb=e$KD.create(-1),this._submits=[],this._save=[e$x.Create(this)],this._save.length=10,this._shader2D=new e$j,this._triangleMesh=e$OD.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=e$Y.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e$L.MAXCLIPRECT,this._curSubmit=e$lD.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=e$k.DEFAULT;for(var e$D=0,e$m=this._submits._length;e$D<e$m;e$D++)this._submits[e$D].releaseRender(),this._submits[e$D]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},e$m.size=function(e$D,e$m){if(this._width!=e$D||this._height!=e$m)if(0==e$D||0==e$m){0!=this._vb._byteLength&&(this._width=e$D,this._height=e$m,this._vb.clear(),this._vb.upload());for(var e$Y=0,e$t=this._submits._length;e$Y<e$t;e$Y++)this._submits[e$Y].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=e$D,this._height=e$m,this._targets&&this._targets.size(e$D,e$m),this._canvas.memorySize-=this._canvas.memorySize;0===e$D&&0===e$m&&this._releaseMem()},e$m._getTransformMatrix=function(){return this._curMat},e$m.translate=function(e$D,e$m){0===e$D&&0===e$m||(e$Z.save(this),this._curMat.bTransform&&(e$V.save(this),this._curMat.transformPointN(e$a.TEMP.setTo(e$D,e$m)),e$D=e$a.TEMP.x,e$m=e$a.TEMP.y),this._x+=e$D,this._y+=e$m)},e$m.save=function(){this._save[this._save._length++]=e$x.Create(this)},e$m.restore=function(){var e$D=this._save._length;if(!(e$D<1))for(var e$m=e$D-1;0<=e$m;e$m--){var e$Y=this._save[e$m];if(e$Y.restore(this),e$Y.isSaveMark())return void(this._save._length=e$m)}},e$m._fillText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){void 0===e$r&&(e$r=0);var e$f=this._shader2D,e$_=this._curSubmit.shaderValue,e$i=e$y?e$GD.create(e$y):this._other.font;if(e$q.enabled)e$f.ALPHA!==e$_.ALPHA&&(e$f.glTexture=null),e$RD.drawText(this,e$D,e$m,this._curMat,e$i,e$o||this._other.textAlign,e$l,e$E,e$B,e$Y,e$t,e$r);else{this._shader2D.defines.getValue();var e$R=e$l?e$G.create(e$l)._color:e$f.colorAdd;e$f.ALPHA===e$_.ALPHA&&e$R===e$f.colorAdd&&e$_.colorAdd===e$f.colorAdd||(e$f.glTexture=null,e$f.colorAdd=e$R),e$RD.drawText(this,e$D,e$m,this._curMat,e$i,e$o||this._other.textAlign,e$l,e$E,e$B,e$Y,e$t,e$r)}},e$m.fillWords=function(e$D,e$m,e$Y,e$t,e$y,e$l){this._fillText(null,e$D,e$m,e$Y,e$t,e$y,null,-1,null,e$l)},e$m.fillBorderWords=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._fillBorderText(null,e$D,e$m,e$Y,e$t,e$y,e$l,e$E,null)},e$m.fillText=function(e$D,e$m,e$Y,e$t,e$y,e$l){this._fillText(e$D,null,e$m,e$Y,e$t,e$y,null,-1,e$l)},e$m.strokeText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._fillText(e$D,null,e$m,e$Y,e$t,null,e$y,e$l||1,e$E)},e$m.fillBorderText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){this._fillBorderText(e$D,null,e$m,e$Y,e$t,e$y,e$l,e$E,e$B)},e$m._fillBorderText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){if(!e$q.enabled)return this._fillText(e$D,e$m,e$Y,e$t,e$y,null,e$E,e$B||1,e$o),void this._fillText(e$D,e$m,e$Y,e$t,e$y,e$l,null,-1,e$o);var e$r=this._shader2D,e$f=this._curSubmit.shaderValue;e$r.ALPHA!==e$f.ALPHA&&(e$r.glTexture=null);var e$_=e$y?(e$L._fontTemp.setFont(e$y),e$L._fontTemp):this._other.font;e$RD.drawText(this,e$D,e$m,this._curMat,e$_,e$o||this._other.textAlign,e$l,e$E,e$B||1,e$Y,e$t,0)},e$m.fillRect=function(e$D,e$m,e$Y,e$t,e$y){var e$l=this._vb;if(e$wD.fillRectImgVb(e$l,this._clipRect,e$D,e$m,e$Y,e$t,e$O.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var e$E=this._shader2D.fillStyle;e$y&&(this._shader2D.fillStyle=e$k.create(e$y));var e$B=this._shader2D,e$o=this._curSubmit.shaderValue;if(e$B.fillStyle!==e$o.fillStyle||e$B.ALPHA!==e$o.ALPHA){e$B.glTexture=null;var e$r=this._curSubmit=e$lD.createSubmit(this,this._ib,e$l,(e$l._byteLength-64)/32*3,e$AD.create(2,0));e$r.shaderValue.color=e$B.fillStyle._color._color,e$r.shaderValue.ALPHA=e$B.ALPHA,this._submits[this._submits._length++]=e$r}this._curSubmit._numEle+=6,this._shader2D.fillStyle=e$E}},e$m.fillTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){if(e$D.loaded&&e$D.bitmap&&e$D.source){var e$o=this._vb,e$r=e$D.bitmap.width,e$f=e$D.bitmap.height,e$_=e$D.uv,e$i=e$E.x%e$D.width,e$R=e$E.y%e$D.height;if(e$r!=e$B.w||e$f!=e$B.h){if(!e$B.w&&!e$B.h)switch(e$B.oy=e$B.ox=0,e$l){case"repeat":e$B.width=e$t,e$B.height=e$y;break;case"repeat-x":e$B.width=e$t,e$R<0?e$D.height+e$R>e$y?e$B.height=e$y:e$B.height=e$D.height+e$R:(e$B.oy=e$R,e$D.height+e$R>e$y?e$B.height=e$y-e$R:e$B.height=e$D.height);break;case"repeat-y":e$i<0?e$D.width+e$i>e$t?e$B.width=e$t:e$B.width=e$D.width+e$i:(e$B.ox=e$i,e$D.width+e$i>e$t?e$B.width=e$t-e$i:e$B.width=e$D.width),e$B.height=e$y;break;case"no-repeat":e$i<0?e$D.width+e$i>e$t?e$B.width=e$t:e$B.width=e$D.width+e$i:(e$B.ox=e$i,e$D.width+e$i>e$t?e$B.width=e$t-e$i:e$B.width=e$D.width),e$R<0?e$D.height+e$R>e$y?e$B.height=e$y:e$B.height=e$D.height+e$R:(e$B.oy=e$R,e$D.height+e$R>e$y?e$B.height=e$y-e$R:e$B.height=e$D.height);break;default:e$B.width=e$t,e$B.height=e$y}e$B.w=e$r,e$B.h=e$f,e$B.uv=[0,0,e$B.width/e$r,0,e$B.width/e$r,e$B.height/e$f,0,e$B.height/e$f]}if(e$m+=e$B.ox,e$Y+=e$B.oy,e$i-=e$B.ox,e$R-=e$B.oy,e$wD.fillRectImgVb(e$o,this._clipRect,e$m,e$Y,e$B.width,e$B.height,e$B.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var e$G=e$CD.create(this,this._ib,e$o,(e$o._byteLength-64)/32*3,e$AD.create(256,0)),e$I=(this._submits[this._submits._length++]=e$G).shaderValue;e$I.textureHost=e$D;var e$w=e$_[0]*e$r,e$W=e$_[1]*e$f,e$U=(e$_[2]-e$_[0])*e$r,e$e=(e$_[5]-e$_[3])*e$f,e$v=-e$i/e$r,e$c=-e$R/e$f;e$I.u_TexRange[0]=e$w/e$r,e$I.u_TexRange[1]=e$U/e$r,e$I.u_TexRange[2]=e$W/e$f,e$I.u_TexRange[3]=e$e/e$f,e$I.u_offset[0]=e$v,e$I.u_offset[1]=e$c,e$q.enabled&&!this._isMain&&e$G.addTexture(e$D,(e$o._byteLength>>2)-16),(this._curSubmit=e$G)._renderType=10017,e$G._numEle+=6}}else this.sprite&&e$S.timer.callLater(this,this._repaintSprite)},e$m.setShader=function(e$D){e$n.save(this,1048576,this._shader2D,!0),this._shader2D.shader=e$D},e$m.setFilters=function(e$D){e$n.save(this,2097152,this._shader2D,!0),this._shader2D.filters=e$D,this._curSubmit=e$lD.RENDERBASE,this._renderKey=0,this._drawCount++},e$m.drawTexture=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._drawTextureM(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,null,1)},e$m.addTextureVb=function(e$D,e$m,e$Y){var e$t=this._curSubmit._vb||this._vb,e$y=e$t._byteLength>>2;e$t.byteLength=e$y+16<<2;for(var e$l=e$t.getFloat32Array(),e$E=0;e$E<16;e$E+=4)e$l[e$y++]=e$D[e$E]+e$m,e$l[e$y++]=e$D[e$E+1]+e$Y,e$l[e$y++]=e$D[e$E+2],e$l[e$y++]=e$D[e$E+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),e$t._upload=!0},e$m.willDrawTexture=function(e$D,e$m){if(!(e$D.loaded&&e$D.bitmap&&e$D.source))return this.sprite&&e$S.timer.callLater(this,this._repaintSprite),0;var e$Y=e$D.bitmap,e$t=e$Y.id+this._shader2D.ALPHA*e$m+10016;if(e$t==this._renderKey)return e$t;var e$y=this._shader2D,e$l=e$y.ALPHA,e$E=this._curSubmit.shaderValue;e$y.ALPHA*=e$m,this._renderKey=e$t,this._drawCount++,e$y.glTexture=e$Y;var e$B=this._vb,e$o=null,e$r=e$B._byteLength/32*3,e$f=e$E.textureHost&&e$E.textureHost==e$D&&e$E.textureHost.alphaTexture==e$D.alphaTexture;return e$o=e$CD.create(this,this._ib,e$B,e$r,e$AD.create(1,0)),(this._submits[this._submits._length++]=e$o).shaderValue.textureHost=e$D,e$o._renderType=10016,e$o._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$y.ALPHA===e$E.ALPHA&&e$f,this._curSubmit=e$o,e$y.ALPHA=e$l,e$t},e$m.drawTextures=function(e$D,e$m,e$Y,e$t){if(e$D.loaded&&e$D.bitmap&&e$D.source){var e$y=this._clipRect;if(this._clipRect=e$L.MAXCLIPRECT,this._drawTextureM(e$D,e$m[0],e$m[1],e$D.width,e$D.height,e$Y,e$t,null,1)){if(this._clipRect=e$y,e$Q.drawCall++,!(e$m.length<4)){for(var e$l=this._curSubmit._vb||this._vb,e$E=this._curMat.a,e$B=this._curMat.d,e$o=2,e$r=e$m.length;e$o<e$r;e$o+=2)e$wD.copyPreImgVb(e$l,(e$m[e$o]-e$m[e$o-2])*e$E,(e$m[e$o+1]-e$m[e$o-1])*e$B),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&e$S.timer.callLater(this,this._repaintSprite)},e$m._drawTextureM=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){if(!e$D.loaded||!e$D.source)return this.sprite&&e$S.timer.callLater(this,this._repaintSprite),!1;var e$r=this._curSubmit._vb||this._vb,e$f=e$D.bitmap;e$m+=e$l,e$Y+=e$E,this._drawCount++;var e$_=e$f.id+this._shader2D.ALPHA*e$o+10016;if(e$_!=this._renderKey){this._renderKey=e$_;var e$i=this._curSubmit.shaderValue,e$R=this._shader2D,e$G=e$R.ALPHA;e$R.ALPHA*=e$o,e$R.glTexture=e$f;var e$I=this._vb,e$w=null,e$W=e$I._byteLength/32*3,e$U=e$i.textureHost&&e$i.textureHost==e$D&&e$i.textureHost.alphaTexture==e$D.alphaTexture;e$w=e$CD.create(this,this._ib,e$I,e$W,e$AD.create(1,0)),(this._submits[this._submits._length++]=e$w).shaderValue.textureHost=e$D,e$w._renderType=10016,e$w._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$R.ALPHA===e$i.ALPHA&&e$U,this._curSubmit=e$w,e$r=this._curSubmit._vb||this._vb,e$R.ALPHA=e$G}return!!e$wD.fillRectImgVb(e$r,this._clipRect,e$m,e$Y,e$t||e$D.width,e$y||e$D.height,e$D.uv,e$B||this._curMat,this._x,this._y,0,0)&&(e$q.enabled&&!this._isMain&&this._curSubmit.addTexture(e$D,(e$r._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},e$m._repaintSprite=function(){this.sprite&&this.sprite.repaint()},e$m._drawText=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){var e$f=e$D.bitmap;this._drawCount++;var e$_=e$f.id+this._shader2D.ALPHA+10016;if(e$_!=this._renderKey){this._renderKey=e$_;var e$i=this._curSubmit.shaderValue,e$R=this._shader2D;e$R.glTexture=e$f;var e$G=this._vb,e$I=null,e$w=e$G._byteLength/32*3,e$W=e$i.textureHost&&e$i.textureHost==e$D&&e$i.textureHost.alphaTexture==e$D.alphaTexture;(e$I=e$q.enabled?e$CD.create(this,this._ib,e$G,e$w,e$AD.create(1,0)):e$CD.create(this,this._ib,e$G,e$w,e$ZD.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$R.ALPHA===e$i.ALPHA&&e$W,(this._submits[this._submits._length++]=e$I).shaderValue.textureHost=e$D,e$I._renderType=10016,this._curSubmit=e$I}e$D.active();var e$U=this._curSubmit._vb||this._vb;e$wD.fillRectImgVb(e$U,this._clipRect,e$m+e$E,e$Y+e$B,e$t||e$D.width,e$y||e$D.height,e$D.uv,e$l||this._curMat,this._x,this._y,e$o,e$r,!0)&&(e$q.enabled&&!this._isMain&&this._curSubmit.addTexture(e$D,(e$U._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},e$m.drawTextureWithTransform=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){if(e$l){var e$r=this._curMat,e$f=this._x,e$_=this._y;(0!==e$E||0!==e$B)&&(this._x=e$E*e$r.a+e$B*e$r.c,this._y=e$B*e$r.d+e$E*e$r.b),e$l&&e$r.bTransform?(e$J.mul(e$l,e$r,e$L._tmpMatrix),(e$l=e$L._tmpMatrix)._checkTransform()):(this._x+=e$r.tx,this._y+=e$r.ty),this._drawTextureM(e$D,e$m,e$Y,e$t,e$y,0,0,e$l,e$o),this._x=e$f,this._y=e$_}else this._drawTextureM(e$D,e$m,e$Y,e$t,e$y,e$E,e$B,null,e$o)},e$m.fillQuadrangle=function(e$D,e$m,e$Y,e$t,e$y){var e$l=this._curSubmit,e$E=this._vb,e$B=this._shader2D,e$o=e$l.shaderValue;if(this._renderKey=0,e$D.bitmap){var e$r=e$D.bitmap;e$B.glTexture==e$r&&e$B.ALPHA===e$o.ALPHA||(e$B.glTexture=e$r,(e$l=this._curSubmit=e$lD.createSubmit(this,this._ib,e$E,e$E._byteLength/32*3,e$AD.create(1,0))).shaderValue.glTexture=e$r,this._submits[this._submits._length++]=e$l),e$wD.fillQuadrangleImgVb(e$E,e$m,e$Y,e$t,e$D.uv,e$y||this._curMat,this._x,this._y)}else e$l.shaderValue.fillStyle&&e$l.shaderValue.fillStyle.equal(e$D)&&e$B.ALPHA===e$o.ALPHA||(e$B.glTexture=null,(e$l=this._curSubmit=e$lD.createSubmit(this,this._ib,e$E,e$E._byteLength/32*3,e$AD.create(2,0))).shaderValue.defines.add(2),e$l.shaderValue.fillStyle=e$k.create(e$D),this._submits[this._submits._length++]=e$l),e$wD.fillQuadrangleImgVb(e$E,e$m,e$Y,e$t,e$O.DEF_UV,e$y||this._curMat,this._x,this._y);e$l._numEle+=6},e$m.drawTexture2=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){if(0!=e$l){var e$o=this._curMat;if(this._x=e$D*e$o.a+e$m*e$o.c,this._y=e$m*e$o.d+e$D*e$o.b,e$y&&(e$y=e$o.bTransform||e$y.bTransform?(e$J.mul(e$y,e$o,e$L._tmpMatrix),e$L._tmpMatrix):(this._x+=e$y.tx+e$o.tx,this._y+=e$y.ty+e$o.ty,e$J.EMPTY)),1!==e$l||e$E){var e$r=this._shader2D.ALPHA,e$f=this._nBlendType;this._shader2D.ALPHA=e$l,e$E&&(this._nBlendType=e$d.TOINT(e$E)),this._drawTextureM(e$B[0],e$B[1]-e$Y,e$B[2]-e$t,e$B[3],e$B[4],0,0,e$y,1),this._shader2D.ALPHA=e$r,this._nBlendType=e$f}else this._drawTextureM(e$B[0],e$B[1]-e$Y,e$B[2]-e$t,e$B[3],e$B[4],0,0,e$y,1);this._x=this._y=0}},e$m.drawCanvas=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.context;if(this._renderKey=0,e$l._targets)this._submits[this._submits._length++]=e$ND.create(e$l,0,null),this._curSubmit=e$lD.RENDERBASE,e$l._targets.drawTo(this,e$m,e$Y,e$t,e$y);else{var e$E=this._submits[this._submits._length++]=e$ND.create(e$l,this._shader2D.ALPHA,this._shader2D.filters),e$B=e$t/e$D.width,e$o=e$y/e$D.height,e$r=e$E._matrix;this._curMat.copyTo(e$r),1!=e$B&&1!=e$o&&e$r.scale(e$B,e$o);var e$f=e$r.tx,e$_=e$r.ty;e$r.tx=e$r.ty=0,e$r.transformPoint(e$a.TEMP.setTo(e$m,e$Y)),e$r.translate(e$a.TEMP.x+e$f,e$a.TEMP.y+e$_),this._curSubmit=e$lD.RENDERBASE}e$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=e$l._targets?"yellow":"green",this.strokeRect(e$m-1,e$Y-1,e$t+2,e$y+2,1),this.strokeRect(e$m,e$Y,e$t,e$y,1),this.restore())},e$m.drawTarget=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){void 0===e$r&&(e$r=-1);var e$f=this._vb;if(e$wD.fillRectImgVb(e$f,this._clipRect,e$m,e$Y,e$t,e$y,e$o||e$O.DEF_UV,e$l||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var e$_=this._curSubmit=e$_D.create(this,this._ib,e$f,(e$f._byteLength-64)/32*3,e$B,e$E);e$_.blendType=-1==e$r?this._nBlendType:e$r,e$_.scope=e$D,this._submits[this._submits._length++]=e$_,this._curSubmit._numEle+=6}},e$m.mixRGBandAlpha=function(e$D){return this._mixRGBandAlpha(e$D,this._shader2D.ALPHA)},e$m._mixRGBandAlpha=function(e$D,e$m){var e$Y=(4278190080&e$D)>>>24;return 0!=e$Y?e$Y*=e$m:e$Y=255*e$m,16777215&e$D|e$Y<<24},e$m.drawTriangles=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){if(!e$D.loaded||!e$D.source)return this.sprite&&e$S.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;e$D.bitmap;var e$f=this._mixRGBandAlpha(4294967295,e$B),e$_=(e$t.length,e$l.length);this._renderKey=-1;var e$i=this._curSubmit=e$CD.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,e$AD.create(1,0));return e$i.shaderValue.textureHost=e$D,e$i._renderType=10016,this._submits[this._submits._length++]=e$i,e$E?(e$L._tmpMatrix.a=e$E.a,e$L._tmpMatrix.b=e$E.b,e$L._tmpMatrix.c=e$E.c,e$L._tmpMatrix.d=e$E.d,e$L._tmpMatrix.tx=e$E.tx+e$m,e$L._tmpMatrix.ty=e$E.ty+e$Y,e$J.mul(e$L._tmpMatrix,this._curMat,e$L._tmpMatrix)):(e$L._tmpMatrix.a=this._curMat.a,e$L._tmpMatrix.b=this._curMat.b,e$L._tmpMatrix.c=this._curMat.c,e$L._tmpMatrix.d=this._curMat.d,e$L._tmpMatrix.tx=this._curMat.tx+e$m,e$L._tmpMatrix.ty=this._curMat.ty+e$Y),this._triangleMesh.addData(e$t,e$y,e$l,e$L._tmpMatrix,e$f,this),this._curSubmit._numEle+=e$_,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},e$m.transform=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$V.save(this),e$J.mul(e$J.TEMP.setTo(e$D,e$m,e$Y,e$t,e$y,e$l),this._curMat,this._curMat),this._curMat._checkTransform()},e$m.setTransformByMatrix=function(e$D){e$D.copyTo(this._curMat)},e$m.transformByMatrix=function(e$D){e$V.save(this),e$J.mul(e$D,this._curMat,this._curMat),this._curMat._checkTransform()},e$m.rotate=function(e$D){e$V.save(this),this._curMat.rotateEx(e$D)},e$m.scale=function(e$D,e$m){e$V.save(this),this._curMat.scaleEx(e$D,e$m)},e$m.clipRect=function(e$D,e$m,e$Y,e$t){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var e$y=e$fD.create(4);this.addRenderObject(e$y);var e$l=this._vb,e$E=e$l._byteLength>>2;if(e$wD.fillRectImgVb(e$l,null,e$D,e$m,e$Y,e$t,e$O.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var e$B=this._curSubmit=e$lD.createSubmit(this,this._ib,e$l,(e$l._byteLength-64)/32*3,e$AD.create(2,0));e$B.shaderValue.ALPHA=1,this._submits[this._submits._length++]=e$B,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var e$o=e$fD.create(5);this.addRenderObject(e$o);var e$r=e$l.getFloat32Array(),e$f=Math.min(Math.min(Math.min(e$r[0+e$E],e$r[4+e$E]),e$r[8+e$E]),e$r[12+e$E]),e$_=Math.max(Math.max(Math.max(e$r[0+e$E],e$r[4+e$E]),e$r[8+e$E]),e$r[12+e$E]),e$i=Math.min(Math.min(Math.min(e$r[1+e$E],e$r[5+e$E]),e$r[9+e$E]),e$r[13+e$E]),e$R=Math.max(Math.max(Math.max(e$r[1+e$E],e$r[5+e$E]),e$r[9+e$E]),e$r[13+e$E]);e$H.save(this,e$o,e$D,e$m,e$Y,e$t,e$f,e$i,e$_-e$f,e$R-e$i),this._curSubmit=e$lD.RENDERBASE}else{e$Y*=this._curMat.a,e$t*=this._curMat.d;var e$G=e$a.TEMP;this._curMat.transformPoint(e$G.setTo(e$D,e$m)),e$Y<0&&(e$G.x=e$G.x+e$Y,e$Y=-e$Y),e$t<0&&(e$G.y=e$G.y+e$t,e$t=-e$t),this._renderKey=0;var e$I=this._curSubmit=e$rD.create(this);(this._submits[this._submits._length++]=e$I).submitIndex=this._submits._length,e$I.submitLength=9999999,e$g.save(this,e$I);var e$w=this._clipRect,e$W=e$w.x,e$U=e$w.y,e$e=e$G.x+e$Y,e$v=e$G.y+e$t;e$W<e$G.x&&(e$w.x=e$G.x),e$U<e$G.y&&(e$w.y=e$G.y),e$w.width=Math.min(e$e,e$W+e$w.width)-e$w.x,e$w.height=Math.min(e$v,e$U+e$w.height)-e$w.y,this._shader2D.glTexture=null,e$I.clipRect.copyFrom(e$w),this._curSubmit=e$lD.RENDERBASE}},e$m.setIBVB=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f){if(void 0===e$o&&(e$o=0),void 0===e$r&&(e$r=0),void 0===e$f&&(e$f=0),null===e$Y){if(e$W.isFlash){var e$_=e$t;e$_._selfIB||(e$_._selfIB=e$jD.create(35044)),e$_._selfIB.clear(),e$Y=e$_._selfIB}else e$Y=this._ib;e$wD.expandIBQuadrangle(e$Y,e$t._byteLength/(4*e$t.vertexStride*4))}if(!e$B||!e$E)throw Error("setIBVB must input:shader shaderValues");var e$i=e$oD.create(this,e$t,e$Y,e$y,e$E,e$B,e$o,e$r,e$f);e$l||(e$l=e$J.EMPTY),e$l.translate(e$D,e$m),e$J.mul(e$l,this._curMat,e$i._mat),e$l.translate(-e$D,-e$m),this._submits[this._submits._length++]=e$i,this._curSubmit=e$lD.RENDERBASE,this._renderKey=0},e$m.addRenderObject=function(e$D){this._submits[this._submits._length++]=e$D},e$m.fillTrangles=function(e$D,e$m,e$Y,e$t,e$y){var e$l=this._curSubmit,e$E=this._vb,e$B=this._shader2D,e$o=e$l.shaderValue,e$r=e$t.length>>4,e$f=e$D.bitmap;this._renderKey=0,e$B.glTexture==e$f&&e$B.ALPHA===e$o.ALPHA||((e$l=this._curSubmit=e$lD.createSubmit(this,this._ib,e$E,e$E._byteLength/32*3,e$AD.create(1,0))).shaderValue.textureHost=e$D,this._submits[this._submits._length++]=e$l),e$wD.fillTranglesVB(e$E,e$m,e$Y,e$t,e$y||this._curMat,this._x,this._y),e$l._numEle+=6*e$r},e$m.submitElement=function(e$D,e$m){var e$Y=this._submits;for(e$m<0&&(e$m=e$Y._length);e$D<e$m;)e$D+=e$Y[e$D].renderSubmit()},e$m.finish=function(){e$vD.mainContext.finish()},e$m.flush=function(){var e$D=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(e$D>this._ib.bufferLength/12&&e$wD.expandIBQuadrangle(this._ib,e$D),!this._isMain&&e$q.enabled&&e$q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=e$q._atlasRestore;for(var e$m=this._submits,e$Y=0,e$t=e$m._length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];10016===e$y.getRenderType()&&e$y.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),e$mD.instance&&e$mD.getInstance().reset();var e$l;for(e$Y=0,e$l=this.meshlist.length;e$Y<e$l;e$Y++){var e$E=this.meshlist[e$Y];e$E.canReuse?e$E.releaseMesh():e$E.destroy()}return this.meshlist.length=0,this._curSubmit=e$lD.RENDERBASE,this._renderKey=0,this._triangleMesh=e$OD.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},e$m.setPathId=function(e$D){if(this.mId=e$D,-1!=this.mId){this.mHaveKey=!1;var e$m=e$X.getInstance();e$m.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e$m.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},e$m.movePath=function(e$D,e$m){var e$Y=e$D,e$t=e$m;e$D=this._curMat.a*e$Y+this._curMat.c*e$t+this._curMat.tx,e$m=this._curMat.b*e$Y+this._curMat.d*e$t+this._curMat.ty,this.mX+=e$D,this.mY+=e$m},e$m.beginPath=function(){var e$D=this._getPath();e$D.tempArray.length=0,e$D.closePath=!1,this.mX=0,this.mY=0},e$m.closePath=function(){this._path.closePath=!0},e$m.fill=function(e$D){void 0===e$D&&(e$D=!1);var e$m=this._getPath();this.drawPoly(0,0,e$m.tempArray,this.fillStyle._color.numColor,0,0,e$D)},e$m.stroke=function(){var e$D=this._getPath();if(0<this.lineWidth){if(-1==this.mId)e$D.drawLine(0,0,e$D.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e$m=e$X.getInstance().shapeLineDic[this.mId];e$m.rebuild(e$D.tempArray),e$D.setGeomtry(e$m)}else e$X.getInstance().addLine(this.mId,e$D.drawLine(0,0,e$D.tempArray,this.lineWidth,this.strokeStyle._color.numColor));e$D.update();var e$Y=[this.mX,this.mY],e$t=e$lD.createShape(this,e$D.ib,e$D.vb,e$D.count,e$D.offset,e$AD.create(4,0));e$t.shaderValue.ALPHA=this._shader2D.ALPHA,e$t.shaderValue.u_pos=e$Y,e$t.shaderValue.u_mmat2=e$UD.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=e$t,this._renderKey=-1}},e$m.line=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=this._curSubmit,e$B=this._vb;if(e$wD.fillLineVb(e$B,this._clipRect,e$D,e$m,e$Y,e$t,e$y,e$l)){this._renderKey=0;var e$o=this._shader2D,e$r=e$E.shaderValue;e$o.strokeStyle===e$r.strokeStyle&&e$o.ALPHA===e$r.ALPHA||(e$o.glTexture=null,(e$E=this._curSubmit=e$lD.createSubmit(this,this._ib,e$B,(e$B._byteLength-64)/32*3,e$AD.create(2,0))).shaderValue.strokeStyle=e$o.strokeStyle,e$E.shaderValue.mainID=2,e$E.shaderValue.ALPHA=e$o.ALPHA,this._submits[this._submits._length++]=e$E),e$E._numEle+=6}},e$m.moveTo=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=!0);var e$t=this._getPath();if(e$Y){var e$y=e$D,e$l=e$m;e$D=this._curMat.a*e$y+this._curMat.c*e$l,e$m=this._curMat.b*e$y+this._curMat.d*e$l}e$t.addPoint(e$D,e$m)},e$m.lineTo=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=!0);var e$t=this._getPath();if(e$Y){var e$y=e$D,e$l=e$m;e$D=this._curMat.a*e$y+this._curMat.c*e$l,e$m=this._curMat.b*e$y+this._curMat.d*e$l}e$t.addPoint(e$D,e$m)},e$m.drawCurves=function(e$D,e$m,e$Y){this.setPathId(-1),this.beginPath(),this.strokeStyle=e$Y[3],this.lineWidth=e$Y[4];var e$t=e$Y[2];e$D+=e$Y[0],e$m+=e$Y[1],this.movePath(e$D,e$m),this.moveTo(e$t[0],e$t[1]);for(var e$y=2,e$l=e$t.length;e$y<e$l;)this.quadraticCurveTo(e$t[e$y++],e$t[e$y++],e$t[e$y++],e$t[e$y++]);this.stroke()},e$m.arcTo=function(e$D,e$m,e$Y,e$t,e$y){if(-1==this.mId||!this.mHaveKey){var e$l=0,e$E=0,e$B=0,e$o=this._getPath();this._curMat.copyTo(e$L._tmpMatrix),e$L._tmpMatrix.tx=e$L._tmpMatrix.ty=0,e$L._tempPoint.setTo(e$o.getEndPointX(),e$o.getEndPointY()),e$L._tmpMatrix.invertTransformPoint(e$L._tempPoint);var e$r=e$L._tempPoint.x-e$D,e$f=e$L._tempPoint.y-e$m,e$_=Math.sqrt(e$r*e$r+e$f*e$f);if(!(e$_<=1e-6)){var e$i=e$r/e$_,e$R=e$f/e$_,e$G=e$Y-e$D,e$I=e$t-e$m,e$w=e$G*e$G+e$I*e$I,e$W=Math.sqrt(e$w);if(!(e$W<=1e-6)){var e$U=e$G/e$W,e$e=e$I/e$W,e$v=e$i+e$U,e$c=e$R+e$e,e$S=Math.sqrt(e$v*e$v+e$c*e$c);if(!(e$S<=1e-6)){var e$z=e$v/e$S,e$A=e$c/e$S,e$J=Math.acos(e$z*e$i+e$A*e$R),e$a=Math.PI/2-e$J,e$p=(e$_=e$y/Math.tan(e$a))*e$i+e$D,e$F=e$_*e$R+e$m,e$s=Math.sqrt(e$_*e$_+e$y*e$y),e$Q=e$D+e$z*e$s,e$T=e$m+e$A*e$s,e$N=0,e$C=0;if(0<=e$i*e$e-e$R*e$U){var e$O=2*e$a/e$L.SEGNUM;e$N=Math.sin(e$O),e$C=Math.cos(e$O)}else e$O=2*-e$a/e$L.SEGNUM,e$N=Math.sin(e$O),e$C=Math.cos(e$O);e$E=this._curMat.a*e$p+this._curMat.c*e$F,e$B=this._curMat.b*e$p+this._curMat.d*e$F,e$E==this._path.getEndPointX()&&e$B==this._path.getEndPointY()||e$o.addPoint(e$E,e$B);var e$h=e$p-e$Q,e$X=e$F-e$T;for(e$l=0;e$l<e$L.SEGNUM;e$l++){var e$P=e$h*e$C+e$X*e$N,e$u=-e$h*e$N+e$X*e$C;e$E=e$P+e$Q,e$B=e$u+e$T,e$D=this._curMat.a*e$E+this._curMat.c*e$B,e$B=e$m=this._curMat.b*e$E+this._curMat.d*e$B,(e$E=e$D)==this._path.getEndPointX()&&e$B==this._path.getEndPointY()||e$o.addPoint(e$E,e$B),e$h=e$P,e$X=e$u}}}}}},e$m.arc=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!0),-1!=this.mId){var e$B=e$X.getInstance().shapeDic[this.mId];if(e$B&&this.mHaveKey&&!e$B.needUpdate(this._curMat))return;e$m=e$D=0}var e$o,e$r=0,e$f=0,e$_=0,e$i=0,e$R=0,e$G=0,e$I=0;if(e$f=e$y-e$t,e$l)if(Math.abs(e$f)>=2*Math.PI)e$f=2*-Math.PI;else for(;0<e$f;)e$f-=2*Math.PI;else if(Math.abs(e$f)>=2*Math.PI)e$f=2*Math.PI;else for(;e$f<0;)e$f+=2*Math.PI;e$o=e$f/(e$I=e$Y<101?Math.max(10,e$f*e$Y/5):e$Y<201?Math.max(10,e$f*e$Y/20):Math.max(10,e$f*e$Y/40))/2,e$_=Math.abs(4/3*(1-Math.cos(e$o))/Math.sin(e$o)),e$l&&(e$_=-e$_);var e$w=this._getPath(),e$W=NaN,e$U=NaN;for(e$G=0;e$G<=e$I;e$G++)e$r=e$t+e$f*(e$G/e$I),e$i=e$D+Math.cos(e$r)*e$Y,e$R=e$m+Math.sin(e$r)*e$Y,e$E&&(e$W=e$i,e$U=e$R,e$i=this._curMat.a*e$W+this._curMat.c*e$U,e$R=this._curMat.b*e$W+this._curMat.d*e$U),e$i==this._path.getEndPointX()&&e$R==this._path.getEndPointY()||e$w.addPoint(e$i,e$R);e$i=e$D+Math.cos(e$y)*e$Y,e$R=e$m+Math.sin(e$y)*e$Y,e$E&&(e$W=e$i,e$U=e$R,e$i=this._curMat.a*e$W+this._curMat.c*e$U,e$R=this._curMat.b*e$W+this._curMat.d*e$U),e$i==this._path.getEndPointX()&&e$R==this._path.getEndPointY()||e$w.addPoint(e$i,e$R)},e$m.quadraticCurveTo=function(e$D,e$m,e$Y,e$t){var e$y=e$_.I,e$l=e$Y,e$E=e$t;e$Y=this._curMat.a*e$l+this._curMat.c*e$E,e$t=this._curMat.b*e$l+this._curMat.d*e$E,e$l=e$D,e$E=e$m,e$D=this._curMat.a*e$l+this._curMat.c*e$E,e$m=this._curMat.b*e$l+this._curMat.d*e$E;for(var e$B=e$y.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),e$D,e$m,e$Y,e$t],30,2),e$o=0,e$r=e$B.length/2;e$o<e$r;e$o++)this.lineTo(e$B[2*e$o],e$B[2*e$o+1],!1);this.lineTo(e$Y,e$t,!1)},e$m.rect=function(e$D,e$m,e$Y,e$t){this._other=this._other.make(),this._other.path||(this._other.path=new e$M),this._other.path.rect(e$D,e$m,e$Y,e$t)},e$m.strokeRect=function(e$D,e$m,e$Y,e$t,e$y){var e$l=.5*e$y;this.line(e$D-e$l,e$m,e$D+e$Y+e$l,e$m,e$y,this._curMat),this.line(e$D+e$Y,e$m,e$D+e$Y,e$m+e$t,e$y,this._curMat),this.line(e$D,e$m,e$D,e$m+e$t,e$y,this._curMat),this.line(e$D-e$l,e$m+e$t,e$D+e$Y+e$l,e$m+e$t,e$y,this._curMat)},e$m.clip=function(){},e$m.drawPoly=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){void 0===e$E&&(e$E=!1),this._renderKey=0,this._shader2D.glTexture=null;var e$B=this._getPath();if(-1==this.mId)e$B.polygon(e$D,e$m,e$Y,e$t,e$y||1,e$l);else if(this.mHaveKey){var e$o=e$X.getInstance().shapeDic[this.mId];e$o.setMatrix(this._curMat),e$o.rebuild(e$B.tempArray),e$B.setGeomtry(e$o)}else{var e$r=e$B.polygon(e$D,e$m,e$Y,e$t,e$y||1,e$l);e$X.getInstance().addShape(this.mId,e$r),e$r.setMatrix(this._curMat)}e$B.update();var e$f,e$_=[this.mX,this.mY];if((e$f=e$lD.createShape(this,e$B.ib,e$B.vb,e$B.count,e$B.offset,e$AD.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,e$f.shaderValue.u_pos=e$_,e$f.shaderValue.u_mmat2=e$UD.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=e$f,0<e$y){if(this.mHaveLineKey){var e$i=e$X.getInstance().shapeLineDic[this.mId];e$i.rebuild(e$B.tempArray),e$B.setGeomtry(e$i)}else e$X.getInstance().addShape(this.mId,e$B.drawLine(e$D,e$m,e$Y,e$y,e$l));e$B.update(),(e$f=e$lD.createShape(this,e$B.ib,e$B.vb,e$B.count,e$B.offset,e$AD.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,e$f.shaderValue.u_mmat2=e$UD.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=e$f}},e$m.drawParticle=function(e$D,e$m,e$Y){e$Y.x=e$D,e$Y.y=e$m,this._submits[this._submits._length++]=e$Y},e$m._getPath=function(){return this._path||(this._path=new e$M)},e$t(0,e$m,"globalCompositeOperation",function(){return e$d.NAMES[this._nBlendType]},function(e$D){var e$m=e$d.TOINT[e$D];null==e$m||this._nBlendType===e$m||(e$n.save(this,65536,this,!0),this._curSubmit=e$lD.RENDERBASE,this._renderKey=0,this._nBlendType=e$m)}),e$t(0,e$m,"strokeStyle",function(){return this._shader2D.strokeStyle},function(e$D){this._shader2D.strokeStyle.equal(e$D)||(e$n.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=e$k.create(e$D))}),e$t(0,e$m,"globalAlpha",function(){return this._shader2D.ALPHA},function(e$D){(e$D=Math.floor(1e3*e$D)/1e3)!=this._shader2D.ALPHA&&(e$n.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=e$D)}),e$t(0,e$m,"asBitmap",null,function(e$D){if(e$D){if(this._targets||(this._targets=new e$b),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),e$t(0,e$m,"fillStyle",function(){return this._shader2D.fillStyle},function(e$D){this._shader2D.fillStyle.equal(e$D)||(e$n.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=e$k.create(e$D))}),e$t(0,e$m,"textAlign",function(){return this._other.textAlign},function(e$D){this._other.textAlign===e$D||(this._other=this._other.make(),e$n.save(this,32768,this._other,!1),this._other.textAlign=e$D)}),e$t(0,e$m,"lineWidth",function(){return this._other.lineWidth},function(e$D){this._other.lineWidth===e$D||(this._other=this._other.make(),e$n.save(this,256,this._other,!1),this._other.lineWidth=e$D)}),e$t(0,e$m,"textBaseline",function(){return this._other.textBaseline},function(e$D){this._other.textBaseline===e$D||(this._other=this._other.make(),e$n.save(this,16384,this._other,!1),this._other.textBaseline=e$D)}),e$t(0,e$m,"font",null,function(e$D){e$D!=this._other.font.toString()&&(this._other=this._other.make(),e$n.save(this,8,this._other,!1),this._other.font===e$GD.EMPTY?this._other.font=new e$GD(e$D):this._other.font.setFont(e$D))}),e$L.__init__=function(){e$Y.DEFAULT=new e$Y},e$L._tempPoint=new e$a,e$L._SUBMITVBSIZE=32e3,e$L._MAXSIZE=99999999,e$L._RECTVBSIZE=16,e$L.MAXCLIPRECT=new e$p(0,0,99999999,99999999),e$L._COUNT=0,e$L._tmpMatrix=new e$J,e$L.SEGNUM=32,e$L._contextcount=0,e$E(e$L,["_fontTemp",function(){return this._fontTemp=new e$GD},"_drawStyleTemp",function(){return this._drawStyleTemp=new e$k(null)}]),e$L.__init$=function(){e$Y=function(){function e$D(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=e$GD.EMPTY}e$i(e$D,"");var e$m=e$D.prototype;return e$m.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=e$GD.EMPTY},e$m.make=function(){return this===e$D.DEFAULT?new e$D:this},e$D.DEFAULT=null,e$D}()},e$L}(),e$AD=function(e$D){function e$t(e$D,e$m){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,e$t.__super.call(this),this.defines=new e$FD,this.position=e$t._POSITION,this.mainID=e$D,this.subID=e$m,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.colorMul=e$y.ShieldColor?e$G.create(e$y.ShieldColor)._color:null,this.glTexture=null,this.u_mmat2=null,this._cacheID=e$D|e$m,this._inClassCache=e$t._cache[this._cacheID],0<e$D&&!this._inClassCache&&(this._inClassCache=e$t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}e$i(e$t,"laya.webgl.shader.d2.value.Value2D",e$u);var e$m=e$t.prototype;return e$m.setValue=function(e$D){},e$m.refresh=function(){var e$D=this.size;return e$D[0]=e$UD.width,e$D[1]=e$UD.height,this.alpha=this.ALPHA*e$UD.worldAlpha,this.mmat=e$UD.worldMatrix4,this},e$m._ShaderWithCompile=function(){return e$xD.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,e$bD.create)},e$m._withWorldShaderDefines=function(){var e$D=e$UD.worldShaderDefines,e$m=e$xD.sharders[this.mainID|this.defines._value|e$D.getValue()];if(!e$m){var e$Y,e$t={};for(e$Y in this.defines.toNameDic())e$t[e$Y]="";for(e$Y in e$D.toNameDic())e$t[e$Y]="";e$m=e$xD.withCompile2D(0,this.mainID,e$t,this.mainID|this.defines._value|e$D.getValue(),e$bD.create)}var e$y=e$UD.worldFilters;if(!e$y)return e$m;for(var e$l,e$E=e$y.length,e$B=0;e$B<e$E;e$B++)(e$l=e$y[e$B])&&e$l.action.setValue(this);return e$m},e$m.upload=function(){var e$D=e$UD;this.alpha=this.ALPHA*e$D.worldAlpha,e$UD.worldMatrix4!==e$UD.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),e$y.ShieldColor&&!this.colorMul?this.colorMul=e$y.ShieldColor?e$G.create(e$y.ShieldColor)._color:null:!e$y.ShieldColor&&this.colorMul&&(this.colorMul=null),this.colorMul?this.defines.add(16384):this.defines.remove(16384),e$vD.shaderHighPrecision&&this.defines.add(1024);var e$m,e$Y=e$D.worldShaderDefines?this._withWorldShaderDefines():e$xD.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=e$D.width,this.size[1]=e$D.height,this.mmat=e$D.worldMatrix4,e$hD.activeShader!==e$Y?e$Y._shaderValueWidth!==e$D.width||e$Y._shaderValueHeight!==e$D.height?(e$Y._shaderValueWidth=e$D.width,e$Y._shaderValueHeight=e$D.height):e$m=e$Y._params2dQuick2||e$Y._make2dQuick2():e$Y._shaderValueWidth!==e$D.width||e$Y._shaderValueHeight!==e$D.height?(e$Y._shaderValueWidth=e$D.width,e$Y._shaderValueHeight=e$D.height):e$m=e$Y._params2dQuick1||e$Y._make2dQuick1(),e$Y.upload(this,e$m)},e$m.setFilters=function(e$D){if(this.filters=e$D)for(var e$m,e$Y=e$D.length,e$t=0;e$t<e$Y;e$t++)(e$m=e$D[e$t])&&(this.defines.add(e$m.type),e$m.action.setValue(this))},e$m.clear=function(){this.defines.setValue(this.subID)},e$m.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},e$t._initone=function(e$D,e$m){e$t._typeClass[e$D]=e$m,e$t._cache[e$D]=[],e$t._cache[e$D]._length=0},e$t.__init__=function(){e$t._POSITION=[2,5126,!1,4*e$ID.BYTES_PE,0],e$t._TEXCOORD=[2,5126,!1,4*e$ID.BYTES_PE,2*e$ID.BYTES_PE],e$t._initone(2,e$LD),e$t._initone(4,e$dD),e$t._initone(256,e$qD),e$t._initone(512,e$uD),e$t._initone(1,e$$D),e$t._initone(65,e$ZD),e$t._initone(9,e$$D)},e$t.create=function(e$D,e$m){var e$Y=e$t._cache[e$D|e$m];return e$Y._length?e$Y[--e$Y._length]:new e$t._typeClass[e$D|e$m](e$m)},e$t._POSITION=null,e$t._TEXCOORD=null,e$t._cache=[],e$t._typeClass=[],e$t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$t}(),e$JD=function(e$D){function e$w(e$D,e$m){e$w.__super.call(this,e$D,e$m)}e$i(e$w,"laya.webgl.utils.RenderSprite3D",e$U);var e$m=e$w.prototype;return e$m.onCreate=function(e$D){switch(e$D){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},e$m._mask=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E=this._next,e$B=e$D.mask;if(e$B){e$m.ctx.save();var e$o=e$m.ctx.globalCompositeOperation,e$r=new e$p;if(e$r.copyFrom(e$B.getBounds()),e$r.width=Math.round(e$r.width),e$r.height=Math.round(e$r.height),e$r.x=Math.round(e$r.x),e$r.y=Math.round(e$r.y),0<e$r.width&&0<e$r.height){var e$f=e$D._style._tf,e$_=e$BD.create();e$_.addValue("bounds",e$r),e$y=e$ED.create([e$_,e$m],laya.webgl.utils.RenderSprite3D.tmpTarget),e$m.addRenderObject(e$y),e$B.render(e$m,-e$r.x,-e$r.y),e$y=e$ED.create([e$_],laya.webgl.utils.RenderSprite3D.endTmpTarget),e$m.addRenderObject(e$y),e$m.ctx.save(),e$m.clipRect(e$Y-e$f.translateX+e$r.x,e$t-e$f.translateY+e$r.y,e$r.width,e$r.height),e$E._fun.call(e$E,e$D,e$m,e$Y,e$t),e$m.ctx.restore(),e$l=e$fD.create(6),e$o=e$m.ctx.globalCompositeOperation,e$l.blendMode="mask",e$m.addRenderObject(e$l),e$J.TEMP.identity();var e$i=e$AD.create(1,0),e$R=e$O.INV_UV,e$G=e$r.width,e$I=e$r.height;(e$r.width<32||e$r.height<32)&&((e$R=e$w.tempUV)[0]=0,e$R[1]=0,e$R[2]=32<=e$r.width?1:e$r.width/32,e$R[3]=0,e$R[4]=32<=e$r.width?1:e$r.width/32,e$R[5]=32<=e$r.height?1:e$r.height/32,e$R[6]=0,e$R[7]=32<=e$r.height?1:e$r.height/32,e$r.width=32<=e$r.width?e$r.width:32,e$r.height=32<=e$r.height?e$r.height:32,e$R[1]*=-1,e$R[3]*=-1,e$R[5]*=-1,e$R[7]*=-1,e$R[1]+=1,e$R[3]+=1,e$R[5]+=1,e$R[7]+=1),e$m.ctx.drawTarget(e$_,e$Y+e$r.x-e$f.translateX,e$t+e$r.y-e$f.translateY,e$G,e$I,e$J.TEMP,"tmpTarget",e$i,e$R,6),e$y=e$ED.create([e$_],laya.webgl.utils.RenderSprite3D.recycleTarget),e$m.addRenderObject(e$y),(e$l=e$fD.create(6)).blendMode=e$o,e$m.addRenderObject(e$l)}e$m.ctx.restore()}else e$E._fun.call(e$E,e$D,e$m,e$Y,e$t)},e$m._blend=function(e$D,e$m,e$Y,e$t){var e$y=e$D._style,e$l=this._next;e$y.blendMode?(e$m.ctx.save(),e$m.ctx.globalCompositeOperation=e$y.blendMode,e$l._fun.call(e$l,e$D,e$m,e$Y,e$t),e$m.ctx.restore()):e$l._fun.call(e$l,e$D,e$m,e$Y,e$t)},e$m._transform=function(e$D,e$m,e$Y,e$t){var e$y=e$D.transform,e$l=this._next;if(e$y&&e$l!=e$U.NORENDER){var e$E=e$m.ctx;e$D._style;e$y.tx=e$Y,e$y.ty=e$t;var e$B=e$E._getTransformMatrix(),e$o=e$B.clone();e$J.mul(e$y,e$B,e$B),e$B._checkTransform(),e$y.tx=e$y.ty=0,e$l._fun.call(e$l,e$D,e$m,0,0),e$o.copyTo(e$B),e$o.destroy()}else e$l._fun.call(e$l,e$D,e$m,e$Y,e$t)},e$w.tmpTarget=function(e$D,e$m){var e$Y=e$D.getValue("bounds"),e$t=e$XD.create(e$Y.width,e$Y.height);e$t.start(),e$t.clear(0,0,0,0),e$D.addValue("tmpTarget",e$t)},e$w.endTmpTarget=function(e$D){e$D.getValue("tmpTarget").end()},e$w.recycleTarget=function(e$D){e$D.getValue("tmpTarget").recycle(),e$D.recycle()},e$E(e$w,["tempUV",function(){return this.tempUV=new Array(8)}]),e$w}(),e$aD=function(e$D){function e$m(){this.data=null,e$m.__super.call(this)}e$i(e$m,"laya.filters.webgl.ColorFilterActionGL",e$P);var e$Y=e$m.prototype;return e$S.imps(e$Y,{"laya.filters.IFilterActionGL":!0}),e$Y.setValue=function(e$D){e$D.colorMat=this.data._mat,e$D.colorAlpha=this.data._alpha},e$Y.apply3d=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.getValue("bounds"),e$E=e$AD.create(1,0);e$E.setFilters([this.data]);var e$B=e$J.TEMP;e$B.identity(),e$Y.ctx.drawTarget(e$D,0,0,e$l.width,e$l.height,e$B,"src",e$E)},e$m}(),e$pD=function(e$D){function e$l(e$D,e$m,e$Y,e$t,e$y){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,e$l.__super.call(this,e$D,e$m,e$y),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new e$kD,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=e$Y,this._atlasCanvas.height=e$t,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}e$i(e$l,"laya.webgl.atlas.Atlaser",e$L);var e$m=e$l.prototype;return e$m.computeUVinAtlasTexture=function(e$D,e$m,e$Y,e$t){var e$y=e$q.atlasTextureWidth,e$l=e$q.atlasTextureHeight,e$E=e$Y/e$y,e$B=e$t/e$l,e$o=(e$Y+e$D.bitmap.width)/e$y,e$r=(e$t+e$D.bitmap.height)/e$l,e$f=e$D.bitmap.width/e$y,e$_=e$D.bitmap.height/e$l;e$D.uv=[e$E+e$m[0]*e$f,e$B+e$m[1]*e$_,e$o-(1-e$m[2])*e$f,e$B+e$m[3]*e$_,e$o-(1-e$m[4])*e$f,e$r-(1-e$m[5])*e$_,e$E+e$m[6]*e$f,e$r-(1-e$m[7])*e$_]},e$m.findBitmapIsExist=function(e$D){if(e$D instanceof laya.webgl.resource.WebGLImage){var e$m=e$D,e$Y=e$m.url,e$t=this._InAtlasWebGLImagesKey[e$Y||e$m.id];if(e$t)return e$t.offsetInfoID}return-1},e$m.addToAtlasTexture=function(e$D,e$m,e$Y){if(e$D instanceof laya.webgl.resource.WebGLImage){var e$t=e$D,e$y=e$t.url;this._InAtlasWebGLImagesKey[e$y||e$t.id]={bitmap:e$D,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([e$m,e$Y])}this._atlasCanvas.texSubImage2D(e$m,e$Y,e$D.atlasSource),e$D.clearAtlasSource()},e$m.addToAtlas=function(e$D,e$m,e$Y){e$D._atlasID=this._inAtlasTextureKey.length;var e$t=e$D.uv.slice(),e$y=e$D.bitmap;this._inAtlasTextureKey.push(e$D),this._inAtlasTextureOriUVValue.push(e$t),this._inAtlasTextureBitmapValue.push(e$y),this.computeUVinAtlasTexture(e$D,e$t,e$m,e$Y),e$D.bitmap=this._atlasCanvas},e$m.clear=function(){for(var e$D=0,e$m=this._inAtlasTextureKey.length;e$D<e$m;e$D++)this._inAtlasTextureKey[e$D].bitmap=this._inAtlasTextureBitmapValue[e$D],this._inAtlasTextureKey[e$D].uv=this._inAtlasTextureOriUVValue[e$D],this._inAtlasTextureKey[e$D]._atlasID=-1,this._inAtlasTextureKey[e$D].bitmap.lock=!1,this._inAtlasTextureKey[e$D].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},e$m.dispose=function(){this.clear(),this._atlasCanvas.destroy()},e$t(0,e$m,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),e$t(0,e$m,"texture",function(){return this._atlasCanvas}),e$t(0,e$m,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),e$l}(),e$FD=function(e$D){function e$Y(){e$Y.__super.call(this,e$Y.__name2int,e$Y.__int2name,e$Y.__int2nameMap)}return e$i(e$Y,"laya.webgl.shader.d2.ShaderDefines2D",e$K),e$Y.__init__=function(){e$Y.reg("TEXTURE2D",1),e$Y.reg("COLOR2D",2),e$Y.reg("PRIMITIVE",4),e$Y.reg("GLOW_FILTER",8),e$Y.reg("BLUR_FILTER",16),e$Y.reg("COLOR_FILTER",32),e$Y.reg("COLOR_ADD",64),e$Y.reg("WORLDMAT",128),e$Y.reg("FILLTEXTURE",256),e$Y.reg("FSHIGHPRECISION",1024),e$Y.reg("TXTALPHA",2048),e$Y.reg("TXTCOMPRESS",4096),e$Y.reg("COLORMUL",16384)},e$Y.reg=function(e$D,e$m){e$K._reg(e$D,e$m,e$Y.__name2int,e$Y.__int2name)},e$Y.toText=function(e$D,e$m,e$Y){return e$K._toText(e$D,e$m,e$Y)},e$Y.toInt=function(e$D){return e$K._toInt(e$D,e$Y.__name2int)},e$Y.TEXTURE2D=1,e$Y.COLOR2D=2,e$Y.PRIMITIVE=4,e$Y.FILTERGLOW=8,e$Y.FILTERBLUR=16,e$Y.FILTERCOLOR=32,e$Y.COLORADD=64,e$Y.WORLDMAT=128,e$Y.FILLTEXTURE=256,e$Y.SKINMESH=512,e$Y.SHADERDEFINE_FSHIGHPRECISION=1024,e$Y.TXTALPHA=2048,e$Y.TXTCOMPRESS=4096,e$Y.COLORMUL=16384,e$Y.__name2int={},e$Y.__int2name=[],e$Y.__int2nameMap=[],e$Y}(),e$sD=(function(e$D){function e$B(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$B.__super.call(this,e$D,e$m,e$Y,e$t,40,e$y,e$l,e$E)}e$i(e$B,"laya.webgl.shapes.Ellipse",e$YD)}(),function(e$D){function e$l(e$D,e$m,e$Y,e$t,e$y){this._points=[],this.rebuild(e$Y),e$l.__super.call(this,e$D,e$m,0,0,0,e$y,e$t,e$y,0)}e$i(e$l,"laya.webgl.shapes.Line",e$YD);var e$m=e$l.prototype;return e$m.rebuild=function(e$D){var e$m=e$D.length;e$m!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(e$m/2-1)),this.mFloat32Array=new Float32Array(5*e$m)),this._points.length=0;for(var e$Y=NaN,e$t=NaN,e$y=-1,e$l=-1,e$E=e$D.length/2,e$B=0;e$B<e$E;e$B++)e$Y=e$D[2*e$B],e$t=e$D[2*e$B+1],(.01<Math.abs(e$y-e$Y)||.01<Math.abs(e$l-e$t))&&this._points.push(e$Y,e$t),e$y=e$Y,e$l=e$t},e$m.getData=function(e$D,e$m,e$Y){var e$t=[],e$y=[];0<this.borderWidth&&this.createLine2(this._points,e$t,this.borderWidth,e$Y,e$y,this._points.length/2),this.mUint16Array.set(e$t,0),this.mFloat32Array.set(e$y,0),e$D.append(this.mUint16Array),e$m.append(this.mFloat32Array)},e$l}()),e$QD=function(e$D){function e$_(e$D,e$m,e$Y,e$t,e$y){this._points=[];for(var e$l=NaN,e$E=NaN,e$B=-1,e$o=-1,e$r=e$Y.length/2-1,e$f=0;e$f<e$r;e$f++)e$l=e$Y[2*e$f],e$E=e$Y[2*e$f+1],(.01<Math.abs(e$B-e$l)||.01<Math.abs(e$o-e$E))&&this._points.push(e$l,e$E),e$B=e$l,e$o=e$E;e$l=e$Y[2*e$r],e$E=e$Y[2*e$r+1],e$B=this._points[0],e$o=this._points[1],(.01<Math.abs(e$B-e$l)||.01<Math.abs(e$o-e$E))&&this._points.push(e$l,e$E),e$_.__super.call(this,e$D,e$m,0,0,this._points.length/2,0,e$t,e$y)}e$i(e$_,"laya.webgl.shapes.LoopLine",e$YD);var e$m=e$_.prototype;return e$m.getData=function(e$D,e$m,e$Y){if(0<this.borderWidth){for(var e$t=this.color,e$y=(e$t>>16&255)/255,e$l=(e$t>>8&255)/255,e$E=(255&e$t)/255,e$B=[],e$o=0,e$r=0,e$f=[],e$_=Math.floor(this._points.length/2),e$i=0;e$i<e$_;e$i++)e$o=this._points[2*e$i],e$r=this._points[2*e$i+1],e$B.push(this.x+e$o,this.y+e$r,e$y,e$l,e$E);this.createLoopLine(e$B,e$f,this.borderWidth,e$Y+e$B.length/5),e$D.append(new Uint16Array(e$f)),e$m.append(new Float32Array(e$B))}},e$m.createLoopLine=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$D.length;var e$E=e$D.concat(),e$B=e$y||e$D,e$o=this.borderColor,e$r=(e$o>>16&255)/255,e$f=(e$o>>8&255)/255,e$_=(255&e$o)/255,e$i=[e$E[0],e$E[1]],e$R=[e$E[e$E.length-5],e$E[e$E.length-4]],e$G=e$R[0]+.5*(e$i[0]-e$R[0]),e$I=e$R[1]+.5*(e$i[1]-e$R[1]);e$E.unshift(e$G,e$I,0,0,0),e$E.push(e$G,e$I,0,0,0);var e$w,e$W,e$U,e$e,e$v,e$c,e$S,e$z,e$A,e$J,e$a,e$p,e$F,e$s,e$Q,e$T,e$N,e$C,e$O,e$h,e$X=e$E.length/5,e$P=e$t,e$u=e$Y/2;e$U=e$E[0],e$e=e$E[1],e$J=e$U-(e$v=e$E[5]),e$A=(e$A=-(e$e-(e$c=e$E[6])))/(e$h=Math.sqrt(e$A*e$A+e$J*e$J))*e$u,e$J=e$J/e$h*e$u,e$B.push(e$U-e$A,e$e-e$J,e$r,e$f,e$_,e$U+e$A,e$e+e$J,e$r,e$f,e$_);for(var e$L=1;e$L<e$X-1;e$L++)e$U=e$E[5*(e$L-1)],e$e=e$E[5*(e$L-1)+1],e$v=e$E[5*e$L],e$c=e$E[5*e$L+1],e$S=e$E[5*(e$L+1)],e$z=e$E[5*(e$L+1)+1],e$J=e$U-e$v,e$p=e$v-e$S,e$Q=(-(e$A=(e$A=-(e$e-e$c))/(e$h=Math.sqrt(e$A*e$A+e$J*e$J))*e$u)+e$U)*(-(e$J=e$J/e$h*e$u)+e$c)-(-e$A+e$v)*(-e$J+e$e),e$C=(-(e$a=(e$a=-(e$c-e$z))/(e$h=Math.sqrt(e$a*e$a+e$p*e$p))*e$u)+e$S)*(-(e$p=e$p/e$h*e$u)+e$c)-(-e$a+e$v)*(-e$p+e$z),e$O=(e$F=-e$J+e$e-(-e$J+e$c))*(e$N=-e$a+e$v-(-e$a+e$S))-(e$T=-e$p+e$z-(-e$p+e$c))*(e$s=-e$A+e$v-(-e$A+e$U)),Math.abs(e$O)<.1?(e$O+=10.1,e$B.push(e$v-e$A,e$c-e$J,e$r,e$f,e$_,e$v+e$A,e$c+e$J,e$r,e$f,e$_)):(((e$w=(e$s*e$C-e$N*e$Q)/e$O)-e$v)*(e$w-e$v)+((e$W=(e$T*e$Q-e$F*e$C)/e$O)-e$c)+(e$W-e$c),e$B.push(e$w,e$W,e$r,e$f,e$_,e$v-(e$w-e$v),e$c-(e$W-e$c),e$r,e$f,e$_));e$l&&(e$m=e$l);var e$q=this.edges+1;for(e$L=1;e$L<e$q;e$L++)e$m.push(e$P+2*(e$L-1),e$P+2*(e$L-1)+1,e$P+2*e$L+1,e$P+2*e$L+1,e$P+2*e$L,e$P+2*(e$L-1));return e$m.push(e$P+2*(e$L-1),e$P+2*(e$L-1)+1,e$P+1,e$P+1,e$P,e$P+2*(e$L-1)),e$B},e$_}(),e$TD=function(e$D){function e$E(e$D,e$m,e$Y,e$t,e$y,e$l){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=e$J.create(),this._points=e$Y.slice(0,e$Y.length),e$E.__super.call(this,e$D,e$m,0,0,this._points.length/2,e$t,e$y,e$l)}e$i(e$E,"laya.webgl.shapes.Polygon",e$YD);var e$m=e$E.prototype;return e$m.rebuild=function(e$D){this._repaint||(this._points.length=0,this._points=this._points.concat(e$D))},e$m.setMatrix=function(e$D){e$D.copyTo(this._mat)},e$m.needUpdate=function(e$D){return this._repaint=this._mat.a==e$D.a&&this._mat.b==e$D.b&&this._mat.c==e$D.c&&this._mat.d==e$D.d&&this._mat.tx==e$D.tx&&this._mat.ty==e$D.ty,!this._repaint},e$m.getData=function(e$D,e$m,e$Y){var e$t,e$y=0,e$l=this._points,e$E=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=e$Y){for(this._start=e$Y,e$t=[],e$E=this.earcutTriangles.length,e$y=0;e$y<e$E;e$y++)e$t.push(this.earcutTriangles[e$y]+e$Y);this.mUint16Array=new Uint16Array(e$t)}}else{this._start=e$Y,e$t=[];var e$B=[],e$o=[],e$r=this.color,e$f=(e$r>>16&255)/255,e$_=(e$r>>8&255)/255,e$i=(255&e$r)/255;for(e$E=Math.floor(e$l.length/2),e$y=0;e$y<e$E;e$y++)e$B.push(this.x+e$l[2*e$y],this.y+e$l[2*e$y+1],e$f,e$_,e$i),e$o.push(this.x+e$l[2*e$y],this.y+e$l[2*e$y+1]);for(this.earcutTriangles=e$tD.earcut(e$o,null,2),e$E=this.earcutTriangles.length,e$y=0;e$y<e$E;e$y++)e$t.push(this.earcutTriangles[e$y]+e$Y);this.mUint16Array=new Uint16Array(e$t),this.mFloat32Array=new Float32Array(e$B)}e$D.append(this.mUint16Array),e$m.append(this.mFloat32Array)},e$E}(),e$ND=function(e$D){function e$l(){this._matrix=new e$J,this._matrix4=e$ID.defaultMatrix4.concat(),e$l.__super.call(this,1e4),this.shaderValue=new e$AD(0,0)}e$i(e$l,"laya.webgl.submit.SubmitCanvas",e$lD);var e$m=e$l.prototype;return e$m.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var e$D=e$UD.worldAlpha,e$m=e$UD.worldMatrix4,e$Y=e$UD.worldMatrix,e$t=e$UD.worldFilters,e$y=e$UD.worldShaderDefines,e$l=this.shaderValue,e$E=this._matrix,e$B=this._matrix4,e$o=e$J.TEMP;return e$J.mul(e$E,e$Y,e$o),e$B[0]=e$o.a,e$B[1]=e$o.b,e$B[4]=e$o.c,e$B[5]=e$o.d,e$B[12]=e$o.tx,e$B[13]=e$o.ty,e$UD.worldMatrix=e$o.clone(),e$UD.worldMatrix4=e$B,e$UD.worldAlpha=e$UD.worldAlpha*e$l.alpha,e$l.filters&&e$l.filters.length&&(e$UD.worldFilters=e$l.filters,e$UD.worldShaderDefines=e$l.defines),this._ctx_src.flush(),e$UD.worldAlpha=e$D,e$UD.worldMatrix4=e$m,e$UD.worldMatrix.destroy(),e$UD.worldMatrix=e$Y,e$UD.worldFilters=e$t,e$UD.worldShaderDefines=e$y,1},e$m.releaseRender=function(){var e$D=e$l._cache;this._ctx_src=null,e$D[e$D._length++]=this},e$m.getRenderType=function(){return 10003},e$l.create=function(e$D,e$m,e$Y){var e$t=e$l._cache._length?e$l._cache[--e$l._cache._length]:new e$l;e$t._ctx_src=e$D;var e$y=e$t.shaderValue;return e$y.alpha=e$m,e$y.defines.setValue(0),e$Y&&e$Y.length&&e$y.setFilters(e$Y),e$t},e$l._cache=((e$l._cache=[])._length=0,e$l._cache),e$l}(),e$CD=function(e$D){function e$r(e$D){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===e$D&&(e$D=1e4),e$r.__super.call(this,e$D)}e$i(e$r,"laya.webgl.submit.SubmitTexture",e$lD);var e$m=e$r.prototype;return e$m.releaseRender=function(){var e$D=e$r._cache;(e$D[e$D._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},e$m.addTexture=function(e$D,e$m){this._texsID[this._texs.length]=e$D._uvID,this._texs.push(e$D),this._vbPos.push(e$m)},e$m.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var e$D=this.shaderValue.textureHost.bitmap;if(null!==e$D)for(var e$m=this._vb.getFloat32Array(),e$Y=0,e$t=this._texs.length;e$Y<e$t;e$Y++){var e$y=this._texs[e$Y];e$y.active();var e$l=e$y.uv;if(this._texsID[e$Y]!==e$y._uvID){this._texsID[e$Y]=e$y._uvID;var e$E=this._vbPos[e$Y];e$m[e$E+2]=e$l[0],e$m[e$E+3]=e$l[1],e$m[e$E+6]=e$l[2],e$m[e$E+7]=e$l[3],e$m[e$E+10]=e$l[4],e$m[e$E+11]=e$l[5],e$m[e$E+14]=e$l[6],e$m[e$E+15]=e$l[7],this._vb.setNeedUpload()}e$y.bitmap!==e$D&&(this._isSameTexture=!1)}}},e$m.renderSubmit=function(){if(0===this._numEle)return e$r._shaderSet=!1,1;var e$D=this.shaderValue.textureHost;if(e$D){var e$m=e$D.source;if(!e$D.bitmap||!e$m)return e$r._shaderSet=!1,1;this.shaderValue.texture=e$m,e$D.alphaTexture&&e$D.alphaTexture.source&&(this.shaderValue.texture1=e$D.alphaTexture.source)}this._vb.bind_upload(this._ib);var e$Y=e$vD.mainContext;if(e$d.activeBlendFunction!==this._blendFn&&(e$Y.enable(3042),this._blendFn(e$Y),e$d.activeBlendFunction=this._blendFn),e$Q.drawCall++,e$Q.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&e$hD.activeShader&&e$r._shaderSet?(e$hD.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&e$hD.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),e$r._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var e$t=e$D.bitmap,e$y=0,e$l=e$hD.activeShader,e$E=0,e$B=this._texs.length;e$E<e$B;e$E++){var e$o=this._texs[e$E];e$o.bitmap===e$t&&e$E+1!==e$B||(e$l.uploadTexture2D(e$o.source),e$Y.drawElements(4,6*(e$E-e$y+1),5123,this._startIdx+6*e$y*e$ID.BYTES_PIDX),e$t=e$o.bitmap,e$y=e$E)}else e$Y.drawElements(4,this._numEle,5123,this._startIdx);return 1},e$r.create=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$r._cache._length?e$r._cache[--e$r._cache._length]:new e$r;null==e$Y&&((e$Y=e$l._selfVb||(e$l._selfVb=e$KD.create(-1))).clear(),e$t=0),e$l._ib=e$m,e$l._vb=e$Y,e$l._startIdx=e$t*e$ID.BYTES_PIDX,e$l._numEle=0;var e$E=e$D._nBlendType;e$l._blendFn=e$D._targets?e$d.targetFns[e$E]:e$d.fns[e$E],e$l.shaderValue=e$y,e$l.shaderValue.setValue(e$D._shader2D);var e$B=e$D._shader2D.filters;return e$B&&e$l.shaderValue.setFilters(e$B),e$l},e$r._cache=((e$r._cache=[])._length=0,e$r._cache),e$r._shaderSet=!0,e$r}(),e$OD=function(e$D){function e$W(){e$W.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}e$i(e$W,"laya.webgl.utils.MeshTexture",e$WD);var e$m=e$W.prototype;return e$m.addData=function(e$D,e$m,e$Y,e$t,e$y,e$l){for(var e$E=e$D.length/2,e$B=this._vb.needSize(e$E*e$W.const_stride)>>2,e$o=this._vb.getFloat32Array(),e$r=0,e$f=0;e$f<e$E;e$f++){var e$_=e$D[e$r],e$i=e$D[e$r+1],e$R=e$_*e$t.a+e$i*e$t.c+e$t.tx,e$G=e$_*e$t.b+e$i*e$t.d+e$t.ty;e$o[e$B++]=e$R,e$o[e$B++]=e$G,e$o[e$B++]=e$m[e$r],e$o[e$B++]=e$m[e$r+1],e$r+=2}this._vb.setNeedUpload();var e$I=this.vertNum;if(0<e$I){(e$E=e$Y.length)>e$W.tmpIdx.length&&(e$W.tmpIdx=new Uint16Array(e$E));for(var e$w=0;e$w<e$E;e$w++)e$W.tmpIdx[e$w]=e$Y[e$w]+e$I;this._ib.appendU16Array(e$W.tmpIdx,e$Y.length)}else this._ib.append(e$Y);this._ib.setNeedUpload(),this.vertNum+=e$E,this.indexNum+=e$Y.length},e$m.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},e$m.destroy=function(){this._ib.destroy(),this._vb.destroy()},e$W.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e$W},e$W.const_stride=16,e$W._POOL=[],e$E(e$W,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),e$W}(),e$hD=function(e$D){function e$m(){e$m.__super.call(this),this.lock=!0}return e$i(e$m,"laya.webgl.shader.BaseShader",e$e),e$m.activeShader=null,e$m.bindShader=null,e$m}(),e$XD=function(e$m){function e$f(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=5121),void 0===e$y&&(e$y=34041),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1),this._type=1,this._w=e$D,this._h=e$m,this._surfaceFormat=e$Y,this._surfaceType=e$t,this._depthStencilFormat=e$y,e$W.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=e$l,this._repeat=e$E,this._minFifter=e$B,this._magFifter=e$o,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e$f.__super.call(this,this.bitmap,e$O.INV_UV)}e$i(e$f,"laya.webgl.resource.RenderTarget2D",e$m);var e$D=e$f.prototype;return e$S.imps(e$D,{"laya.resource.IDispose":!0}),e$D.getType=function(){return this._type},e$D.getTexture=function(){return this},e$D.size=function(e$D,e$m){this._w==e$D&&this._h==e$m||(this._w=e$D,this._h=e$m,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},e$D.release=function(){this.destroy()},e$D.recycle=function(){e$f.POOL.push(this)},e$D.start=function(){var e$D=e$vD.mainContext;return this._preRenderTarget=e$UD.curRenderTarget,e$UD.curRenderTarget=this,e$D.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(e$D.viewport(0,0,this._w,this._h),this._svWidth=e$UD.width,this._svHeight=e$UD.height,e$UD.width=this._w,e$UD.height=this._h,e$hD.activeShader=null),this},e$D.clear=function(e$D,e$m,e$Y,e$t){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=1);var e$y=e$vD.mainContext;e$y.clearColor(e$D,e$m,e$Y,e$t);var e$l=16384;switch(this._depthStencilFormat){case 33189:e$l|=256;break;case 36168:e$l|=1024;break;case 34041:e$l|=256,e$l|=1024}e$y.clear(e$l)},e$D.end=function(){var e$D=e$vD.mainContext;e$D.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,e$UD.curRenderTarget=this._preRenderTarget,1==this._type?(e$D.viewport(0,0,this._svWidth,this._svHeight),e$UD.width=this._svWidth,e$UD.height=this._svHeight,e$hD.activeShader=null):e$D.viewport(0,0,e$S.stage.width,e$S.stage.height)},e$D.getData=function(e$D,e$m,e$Y,e$t){var e$y=e$vD.mainContext;if(e$y.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===e$y.checkFramebufferStatus(36160)))return e$y.bindFramebuffer(36160,null),null;var e$l=new Uint8Array(this._w*this._h*4);return e$y.readPixels(e$D,e$m,e$Y,e$t,this._surfaceFormat,this._surfaceType,e$l),e$y.bindFramebuffer(36160,null),e$l},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,e$m.prototype.destroy.call(this))},e$D.dispose=function(){},e$D._createWebGLRenderTarget=function(){this.bitmap=new e$gD(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(e$D){this.event("recovered")})},e$t(0,e$D,"surfaceFormat",function(){return this._surfaceFormat}),e$t(0,e$D,"magFifter",function(){return this._magFifter}),e$t(0,e$D,"surfaceType",function(){return this._surfaceType}),e$t(0,e$D,"mipMap",function(){return this._mipMap}),e$t(0,e$D,"depthStencilFormat",function(){return this._depthStencilFormat}),e$t(0,e$D,"minFifter",function(){return this._minFifter}),e$t(0,e$D,"source",function(){return this._alreadyResolved?e$S.superGet(e$O,this,"source"):null}),e$f.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){void 0===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=5121),void 0===e$y&&(e$y=34041),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1);var e$r=e$f.POOL.pop();return e$r||(e$r=new e$f(e$D,e$m)),e$r.bitmap&&e$r._w==e$D&&e$r._h==e$m&&e$r._surfaceFormat==e$Y&&e$r._surfaceType==e$t&&e$r._depthStencilFormat==e$y&&e$r._mipMap==e$l&&e$r._repeat==e$E&&e$r._minFifter==e$B&&e$r._magFifter==e$o||(e$r._w=e$D,e$r._h=e$m,e$r._surfaceFormat=e$Y,e$r._surfaceType=e$t,e$r._depthStencilFormat=e$y,e$W.isConchWebGL&&34041===e$r._depthStencilFormat&&(e$r._depthStencilFormat=33189),e$r._mipMap=e$l,e$r._repeat=e$E,e$r._minFifter=e$B,e$r._magFifter=e$o,e$r.release(),e$r._createWebGLRenderTarget()),e$r},e$f.TYPE2D=1,e$f.TYPE3D=2,e$f.POOL=[],e$f}(e$O),e$PD=function(e$D){function e$m(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e$m.__super.call(this),e$m._gl=e$vD.mainContext}e$i(e$m,"laya.webgl.utils.Buffer",e$e);var e$Y=e$m.prototype;return e$Y._bind=function(){this.activeResource(),e$m._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(e$m._bindVertexBuffer=this._glBuffer),e$m._gl.bindBuffer(this._bufferType,e$m._bindActive[this._bufferType]=this._glBuffer),e$hD.activeShader=null)},e$Y.recreateResource=function(){this._glBuffer||(this._glBuffer=e$m._gl.createBuffer()),this.completeCreate()},e$Y.disposeResource=function(){this._glBuffer&&(e$vD.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},e$t(0,e$Y,"bufferUsage",function(){return this._bufferUsage}),e$m._gl=null,e$m._bindActive={},e$m._bindVertexBuffer=null,e$m._enableAtributes=[],e$m}(),e$uD=function(e$D){function e$Y(e$D){this.texcoord=null,this.offsetX=300,this.offsetY=0,e$Y.__super.call(this,512,0);var e$m=8*e$ID.BYTES_PE;this.position=[2,5126,!1,e$m,0],this.texcoord=[2,5126,!1,e$m,2*e$ID.BYTES_PE],this.color=[4,5126,!1,e$m,4*e$ID.BYTES_PE]}return e$i(e$Y,"laya.webgl.shader.d2.skinAnishader.SkinSV",e$AD),e$Y}(),e$LD=function(e$D){function e$m(e$D){e$m.__super.call(this,2,0),this.color=[]}return e$i(e$m,"laya.webgl.shader.d2.value.Color2dSV",e$AD),e$m.prototype.setValue=function(e$D){e$D.fillStyle&&(this.color=e$D.fillStyle._color._color),e$D.strokeStyle&&(this.color=e$D.strokeStyle._color._color)},e$m}(),e$qD=function(e$D){function e$m(e$D){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=e$AD._TEXCOORD,e$m.__super.call(this,256,0)}e$i(e$m,"laya.webgl.shader.d2.value.FillTextureSV",e$AD);var e$Y=e$m.prototype;return e$Y.setValue=function(e$D){this.ALPHA=e$D.ALPHA,e$D.filters&&this.setFilters(e$D.filters)},e$Y.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},e$m}(),e$$D=function(e$D){function e$m(e$D){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=e$AD._TEXCOORD,void 0===e$D&&(e$D=0),e$m.__super.call(this,1,e$D)}e$i(e$m,"laya.webgl.shader.d2.value.TextureSV",e$AD);var e$Y=e$m.prototype;return e$Y.setValue=function(e$D){this.ALPHA=e$D.ALPHA,e$D.filters&&this.setFilters(e$D.filters)},e$Y.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},e$m}(),e$dD=function(e$D){function e$m(e$D){this.a_color=null,this.u_pos=[0,0],e$m.__super.call(this,4,0),this.position=[2,5126,!1,5*e$ID.BYTES_PE,0],this.a_color=[3,5126,!1,5*e$ID.BYTES_PE,2*e$ID.BYTES_PE]}return e$i(e$m,"laya.webgl.shader.d2.value.PrimitiveSV",e$AD),e$m}(),e$kD=function(e$D){function e$m(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e$m.__super.call(this)}e$i(e$m,"laya.webgl.atlas.AtlasWebGLCanvas",e$D);var e$Y=e$m.prototype;return e$Y.recreateResource=function(){var e$D=e$vD.mainContext,e$m=this._source=e$D.createTexture(),e$Y=e$cD.curBindTexTarget,e$t=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,e$m),e$D.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),e$D.texParameteri(3553,10241,9729),e$D.texParameteri(3553,10240,9729),e$D.texParameteri(3553,10242,33071),e$D.texParameteri(3553,10243,33071),e$Y&&e$t&&e$cD.bindTexture(e$D,e$Y,e$t),this.memorySize=this._w*this._h*4,this.completeCreate()},e$Y.disposeResource=function(){this._source&&(e$vD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$Y.texSubImage2D=function(e$D,e$m,e$Y){if(e$W.isFlash){this._flashCacheImage||(this._flashCacheImage=e$w.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var e$t=e$Y.bitmapdata;this._flashCacheImage._image.copyPixels(e$t,0,0,e$t.width,e$t.height,e$D,e$m),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var e$y=e$vD.mainContext,e$l=e$cD.curBindTexTarget,e$E=e$cD.curBindTexValue;e$cD.bindTexture(e$y,3553,this._source),e$y.pixelStorei(37441,!0),0<=e$D-1&&e$y.texSubImage2D(3553,0,e$D-1,e$m,6408,5121,e$Y),e$D+1<=this._w&&e$y.texSubImage2D(3553,0,e$D+1,e$m,6408,5121,e$Y),0<=e$m-1&&e$y.texSubImage2D(3553,0,e$D,e$m-1,6408,5121,e$Y),e$m+1<=this._h&&e$y.texSubImage2D(3553,0,e$D,e$m+1,6408,5121,e$Y),e$y.texSubImage2D(3553,0,e$D,e$m,6408,5121,e$Y),e$y.pixelStorei(37441,!1),e$l&&e$E&&e$cD.bindTexture(e$y,e$l,e$E)}},e$Y.texSubImage2DPixel=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$vD.mainContext,e$E=e$cD.curBindTexTarget,e$B=e$cD.curBindTexValue;e$cD.bindTexture(e$l,3553,this._source);var e$o=new Uint8Array(e$y.data);e$l.pixelStorei(37441,!0),e$l.texSubImage2D(3553,0,e$D,e$m,e$Y,e$t,6408,5121,e$o),e$l.pixelStorei(37441,!1),e$E&&e$B&&e$cD.bindTexture(e$l,e$E,e$B)},e$t(0,e$Y,"width",e$D.prototype._$get_width,function(e$D){this._w=e$D}),e$t(0,e$Y,"height",e$D.prototype._$get_height,function(e$D){this._h=e$D}),e$m}(e$Y),e$MD=function(e$D){function e$y(){this.flipY=!0,this.alwaysChange=!1,e$y.__super.call(this)}e$i(e$y,"laya.webgl.resource.WebGLCanvas",e$Y);var e$m=e$y.prototype;return e$m.getCanvas=function(){return this._canvas},e$m.clear=function(){this._ctx&&this._ctx.clear()},e$m.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e$m._setContext=function(e$D){this._ctx=e$D},e$m.getContext=function(e$D,e$m){return this._ctx?this._ctx:this._ctx=e$y._createContext(this)},e$m.size=function(e$D,e$m){this._w==e$D&&this._h==e$m||(this._w=e$D,this._h=e$m,this._ctx&&this._ctx.size(e$D,e$m),this._canvas&&(this._canvas.height=e$m,this._canvas.width=e$D))},e$m.activeResource=function(e$D){void 0===e$D&&(e$D=!1),this._source||this.recreateResource()},e$m.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},e$m.disposeResource=function(){this._source&&!this.iscpuSource&&(e$vD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$m.createWebGlTexture=function(){var e$D=e$vD.mainContext;this._canvas;var e$m=this._source=e$D.createTexture();this.iscpuSource=!1;var e$Y=e$cD.curBindTexTarget,e$t=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,e$m),e$D.pixelStorei(37440,this.flipY?1:0),e$y.premulAlpha&&e$D.pixelStorei(37441,!0),e$D.texImage2D(3553,0,6408,6408,5121,this._imgData),e$y.premulAlpha&&e$D.pixelStorei(37441,!1),e$D.texParameteri(3553,10240,9729),e$D.texParameteri(3553,10241,9729),e$D.texParameteri(3553,10242,33071),e$D.texParameteri(3553,10243,33071),e$D.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,e$Y&&e$t&&e$cD.bindTexture(e$D,e$Y,e$t)},e$m.reloadCanvasData=function(){var e$D=e$vD.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var e$m=e$cD.curBindTexTarget,e$Y=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,this._source),e$y.premulAlpha&&e$D.pixelStorei(37441,!0),e$D.texImage2D(3553,0,6408,6408,5121,this._imgData),e$y.premulAlpha&&e$D.pixelStorei(37441,!1),e$D.pixelStorei(37440,0),e$m&&e$Y&&e$cD.bindTexture(e$D,e$m,e$Y)},e$m.texSubImage2D=function(e$D,e$m,e$Y){var e$t=e$vD.mainContext,e$y=e$cD.curBindTexTarget,e$l=e$cD.curBindTexValue;e$cD.bindTexture(e$t,3553,this._source),e$t.pixelStorei(37441,!0),e$t.texSubImage2D(3553,0,e$m,e$Y,6408,5121,e$D._source),e$t.pixelStorei(37441,!1),e$y&&e$l&&e$cD.bindTexture(e$t,e$y,e$l)},e$m.toBase64=function(e$D,e$m,e$Y){var e$t=null;this._canvas&&(e$t=this._canvas.toDataURL(e$D,e$m)),e$Y.call(this,e$t)},e$t(0,e$m,"context",function(){return this._ctx}),e$t(0,e$m,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),e$t(0,e$m,"asBitmap",null,function(e$D){this._ctx&&(this._ctx.asBitmap=e$D)}),e$y._createContext=null,e$y.premulAlpha=!1,e$y}(),e$nD=function(e$D){function e$l(e$D,e$m){this.CborderSize=12,e$l.__super.call(this),this.char=e$D,this.isSpace=" "===e$D,this.xs=e$m.scaleX,this.ys=e$m.scaleY,this.font=e$m.font.toString(),this.fontSize=e$m.font.size,this.fillColor=e$m.fillColor,this.borderColor=e$m.borderColor,this.lineWidth=e$m.lineWidth,this.underLine=e$m.underLine;var e$Y,e$t=e$W.isConchApp;e$t?((e$Y=ConchTextCanvas)._source=ConchTextCanvas,e$Y._source.canvas=ConchTextCanvas):e$Y=e$R.canvas.source,this.canvas=e$Y,this._enableMerageInAtlas=!0,this._ctx=e$t?e$Y:this.canvas.getContext("2d",void 0);var e$y=e$h.measureText(this.char,this.font);this.cw=e$y.width*this.xs,this.ch=(e$y.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new e$O(this)}e$i(e$l,"laya.webgl.resource.WebGLCharImage",e$Y);var e$m=e$l.prototype;return e$S.imps(e$m,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$m.active=function(){this.texture.active()},e$m.recreateResource=function(){var e$D=e$W.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),e$D){var e$m=this.fontSize;1==this.xs&&1==this.ys||(e$m=parseInt(e$m*(this.xs>this.ys?this.xs:this.ys)+""));var e$Y="normal 100 "+this.font;e$Y=e$Y.replace(e$l._fontSizeReg,e$m),this.borderColor&&(e$Y+=" 1 "+this.borderColor),this._ctx.font=e$Y,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,e$C.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var e$t=this._ctx.measureText(this.char);e$t||(e$t={width:16});var e$y=e$t.width+1;this._ctx.lineTo(e$y,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},e$m.onresize=function(e$D,e$m){this._w=e$D,this._h=e$m,this._allowMerageInAtlas=!0},e$m.clearAtlasSource=function(){},e$t(0,e$m,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$t(0,e$m,"atlasSource",function(){return this.canvas}),e$t(0,e$m,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e$D){this._enableMerageInAtlas=e$D}),e$l.createOneChar=function(e$D,e$m){return new e$l(e$D,e$m)},e$l._fontSizeReg=new RegExp("\\d+(?=px)","g"),e$l}(),e$gD=function(e$D){function e$r(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){void 0===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=5121),void 0===e$y&&(e$y=34041),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=1),e$r.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=e$D,this._h=e$m,this._surfaceFormat=e$Y,this._surfaceType=e$t,this._depthStencilFormat=e$y,this._mipMap=e$l,this._repeat=e$E,this._minFifter=e$B,this._magFifter=e$o}e$i(e$r,"laya.webgl.resource.WebGLRenderTarget",e$Y);var e$m=e$r.prototype;return e$m.recreateResource=function(){var e$D=e$vD.mainContext;this._frameBuffer||(this._frameBuffer=e$D.createFramebuffer()),this._source||(this._source=e$D.createTexture());var e$m=e$cD.curBindTexTarget,e$Y=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,this._source),e$D.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var e$t=this._minFifter,e$y=this._magFifter,e$l=this._repeat?10497:33071,e$E=e$f.isPOT(this._w,this._h);if(e$E?(this._mipMap?-1!==e$t||(e$t=9987):-1!==e$t||(e$t=9729),-1!==e$y||(e$y=9729),e$D.texParameteri(3553,10241,e$t),e$D.texParameteri(3553,10240,e$y),e$D.texParameteri(3553,10242,e$l),e$D.texParameteri(3553,10243,e$l),this._mipMap&&e$D.generateMipmap(3553)):(-1!==e$t||(e$t=9729),-1!==e$y||(e$y=9729),e$D.texParameteri(3553,10241,e$t),e$D.texParameteri(3553,10240,e$y),e$D.texParameteri(3553,10242,33071),e$D.texParameteri(3553,10243,33071)),e$D.bindFramebuffer(36160,this._frameBuffer),e$D.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=e$D.createRenderbuffer()),e$D.bindRenderbuffer(36161,this._depthStencilBuffer),e$D.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:e$D.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e$D.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e$D.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e$D.bindFramebuffer(36160,null),e$m&&e$Y&&e$cD.bindTexture(e$D,e$m,e$Y),e$D.bindRenderbuffer(36161,null),e$E&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},e$m.disposeResource=function(){this._frameBuffer&&(e$vD.mainContext.deleteTexture(this._source),e$vD.mainContext.deleteFramebuffer(this._frameBuffer),e$vD.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},e$t(0,e$m,"depthStencilBuffer",function(){return this._depthStencilBuffer}),e$t(0,e$m,"frameBuffer",function(){return this._frameBuffer}),e$r}(),e$HD=function(e$D){function e$B(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this.offsetX=0,this.offsetY=0,e$B.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=e$l,this.canvas=e$D,this._ctx=e$D.getContext("2d",void 0),this._w=e$t,this._h=e$y,this.offsetX=e$m,this.offsetY=e$Y,this.src=e$E,this._enableMerageInAtlas=!0,e$q.enabled&&this._w<e$q.atlasLimitWidth&&this._h<e$q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}e$i(e$B,"laya.webgl.resource.WebGLSubImage",e$Y);var e$m=e$B.prototype;return e$S.imps(e$m,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$m.size=function(e$D,e$m){this._w=e$D,this._h=e$m,this._ctx&&this._ctx.size(e$D,e$m),this.canvas&&(this.canvas.height=e$m,this.canvas.width=e$D)},e$m.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},e$m.createWebGlTexture=function(){var e$D=e$vD.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e$m=this._source=e$D.createTexture(),e$Y=e$cD.curBindTexTarget,e$t=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,e$m),e$D.pixelStorei(37441,!0),e$D.texImage2D(3553,0,6408,6408,5121,this.canvas),e$D.pixelStorei(37441,!1);var e$y=this.minFifter,e$l=this.magFifter,e$E=this.repeat?10497:33071,e$B=e$f.isPOT(this.width,this.height);e$B?(this.mipmap?-1!==e$y||(e$y=9987):-1!==e$y||(e$y=9729),-1!==e$l||(e$l=9729),e$D.texParameteri(3553,10240,e$l),e$D.texParameteri(3553,10241,e$y),e$D.texParameteri(3553,10242,e$E),e$D.texParameteri(3553,10243,e$E),this.mipmap&&e$D.generateMipmap(3553)):(-1!==e$y||(e$y=9729),-1!==e$l||(e$l=9729),e$D.texParameteri(3553,10241,e$y),e$D.texParameteri(3553,10240,e$l),e$D.texParameteri(3553,10242,33071),e$D.texParameteri(3553,10243,33071)),e$Y&&e$t&&e$cD.bindTexture(e$D,e$Y,e$t),this.canvas=null,e$B&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},e$m.disposeResource=function(){e$q.enabled&&this._allowMerageInAtlas||!this._source||(e$vD.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$m.clearAtlasSource=function(){},e$t(0,e$m,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$t(0,e$m,"atlasSource",function(){return this.canvas}),e$t(0,e$m,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(e$D){this._allowMerageInAtlas=e$D}),e$B}(),e$xD=function(e$D){function e$r(e$D,e$m,e$Y,e$t){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e$r.__super.call(this),!e$D||!e$m)throw"Shader Error";this._id=++e$r._count,this._vs=e$D,this._ps=e$m,this._nameMap=e$t||{},null!=e$Y&&(e$r.sharders[e$Y]=this)}e$i(e$r,"laya.webgl.shader.Shader",e$hD);var e$m=e$r.prototype;return e$m.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},e$m.disposeResource=function(){e$vD.mainContext.deleteShader(this._vshader),e$vD.mainContext.deleteShader(this._pshader),e$vD.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},e$m._compile=function(){if(!e$vD.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var e$D=[this._vs,this._ps],e$m=e$vD.mainContext;if(this._program=e$m.createProgram(),this._vshader=e$r._createShader(e$m,e$D[0],35633),this._pshader=e$r._createShader(e$m,e$D[1],35632),e$m.attachShader(this._program,this._vshader),e$m.attachShader(this._program,this._pshader),e$m.linkProgram(this._program),!e$W.isConchApp&&!e$m.getProgramParameter(this._program,35714))throw e$m.getProgramInfoLog(this._program);var e$Y,e$t,e$y=0,e$l=0;for(e$l=e$W.isConchApp?e$m.getProgramParameterEx(this._vs,this._ps,"",35721):e$m.getProgramParameter(this._program,35721),e$y=0;e$y<e$l;e$y++){var e$E=null;e$Y={vartype:"attribute",glfun:null,ivartype:0,attrib:e$E=e$W.isConchApp?e$m.getActiveAttribEx(this._vs,this._ps,"",e$y):e$m.getActiveAttrib(this._program,e$y),location:e$m.getAttribLocation(this._program,e$E.name),name:e$E.name,type:e$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(e$Y)}var e$B=0;for(e$B=e$W.isConchApp?e$m.getProgramParameterEx(this._vs,this._ps,"",35718):e$m.getProgramParameter(this._program,35718),e$y=0;e$y<e$B;e$y++){var e$o=null;e$o=e$W.isConchApp?e$m.getActiveUniformEx(this._vs,this._ps,"",e$y):e$m.getActiveUniform(this._program,e$y),0<(e$Y={vartype:"uniform",glfun:null,ivartype:1,attrib:e$E,location:e$m.getUniformLocation(this._program,e$o.name),name:e$o.name,type:e$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(e$Y.name=e$Y.name.substr(0,e$Y.name.length-3),e$Y.isArray=!0,e$Y.location=e$m.getUniformLocation(this._program,e$Y.name)),this._params.push(e$Y)}for(e$y=0,e$t=this._params.length;e$y<e$t;e$y++)if((e$Y=this._params[e$y]).indexOfParams=e$y,e$Y.index=1,e$Y.value=[e$Y.location,null],e$Y.codename=e$Y.name,e$Y.name=this._nameMap[e$Y.codename]?this._nameMap[e$Y.codename]:e$Y.codename,(this._paramsMap[e$Y.name]=e$Y)._this=this,e$Y.uploadedValue=[],"attribute"!==e$Y.vartype)switch(e$Y.type){case 5124:e$Y.fun=e$Y.isArray?this._uniform1iv:this._uniform1i;break;case 5126:e$Y.fun=e$Y.isArray?this._uniform1fv:this._uniform1f;break;case 35664:e$Y.fun=e$Y.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:e$Y.fun=e$Y.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:e$Y.fun=e$Y.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:e$Y.fun=this._uniform_sampler2D;break;case 35680:e$Y.fun=this._uniform_samplerCube;break;case 35676:e$Y.glfun=e$m.uniformMatrix4fv,e$Y.fun=this._uniformMatrix4fv;break;case 35670:e$Y.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else e$Y.fun=this._attribute}},e$m.getUniform=function(e$D){return this._paramsMap[e$D]},e$m._attribute=function(e$D,e$m){var e$Y=e$vD.mainContext,e$t=e$PD._enableAtributes,e$y=e$D.location;return e$t[e$y]||e$Y.enableVertexAttribArray(e$y),e$Y.vertexAttribPointer(e$y,e$m[0],e$m[1],e$m[2],e$m[3],e$m[4]+this._offset),e$t[e$y]=e$PD._bindVertexBuffer,1},e$m._uniform1f=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m?(e$vD.mainContext.uniform1f(e$D.location,e$Y[0]=e$m),1):0},e$m._uniform1fv=function(e$D,e$m){if(e$m.length<4){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$vD.mainContext.uniform1fv(e$D.location,e$m),e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3],1):0}return e$vD.mainContext.uniform1fv(e$D.location,e$m),1},e$m._uniform_vec2=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]?(e$vD.mainContext.uniform2f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1]),1):0},e$m._uniform_vec2v=function(e$D,e$m){if(e$m.length<2){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$vD.mainContext.uniform2fv(e$D.location,e$m),e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3],1):0}return e$vD.mainContext.uniform2fv(e$D.location,e$m),1},e$m._uniform_vec3=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]?(e$vD.mainContext.uniform3f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2]),1):0},e$m._uniform_vec3v=function(e$D,e$m){return e$vD.mainContext.uniform3fv(e$D.location,e$m),1},e$m._uniform_vec4=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$vD.mainContext.uniform4f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3]),1):0},e$m._uniform_vec4v=function(e$D,e$m){return e$vD.mainContext.uniform4fv(e$D.location,e$m),1},e$m._uniformMatrix2fv=function(e$D,e$m){return e$vD.mainContext.uniformMatrix2fv(e$D.location,!1,e$m),1},e$m._uniformMatrix3fv=function(e$D,e$m){return e$vD.mainContext.uniformMatrix3fv(e$D.location,!1,e$m),1},e$m._uniformMatrix4fv=function(e$D,e$m){return e$vD.mainContext.uniformMatrix4fv(e$D.location,!1,e$m),1},e$m._uniform1i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m?(e$vD.mainContext.uniform1i(e$D.location,e$Y[0]=e$m),1):0},e$m._uniform1iv=function(e$D,e$m){return e$vD.mainContext.uniform1iv(e$D.location,e$m),1},e$m._uniform_ivec2=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]?(e$vD.mainContext.uniform2i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1]),1):0},e$m._uniform_ivec2v=function(e$D,e$m){return e$vD.mainContext.uniform2iv(e$D.location,e$m),1},e$m._uniform_vec3i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]?(e$vD.mainContext.uniform3i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2]),1):0},e$m._uniform_vec3vi=function(e$D,e$m){return e$vD.mainContext.uniform3iv(e$D.location,e$m),1},e$m._uniform_vec4i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$vD.mainContext.uniform4i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3]),1):0},e$m._uniform_vec4vi=function(e$D,e$m){return e$vD.mainContext.uniform4iv(e$D.location,e$m),1},e$m._uniform_sampler2D=function(e$D,e$m){var e$Y=e$vD.mainContext,e$t=e$D.uploadedValue;return null==e$t[0]?(e$t[0]=this._curActTexIndex,e$Y.uniform1i(e$D.location,this._curActTexIndex),e$Y.activeTexture(e$r._TEXTURES[this._curActTexIndex]),e$cD.bindTexture(e$Y,3553,e$m),this._curActTexIndex++,1):(e$Y.activeTexture(e$r._TEXTURES[e$t[0]]),e$cD.bindTexture(e$Y,3553,e$m),0)},e$m._uniform_samplerCube=function(e$D,e$m){var e$Y=e$vD.mainContext,e$t=e$D.uploadedValue;return null==e$t[0]?(e$t[0]=this._curActTexIndex,e$Y.uniform1i(e$D.location,this._curActTexIndex),e$Y.activeTexture(e$r._TEXTURES[this._curActTexIndex]),e$cD.bindTexture(e$Y,34067,e$m),this._curActTexIndex++,1):(e$Y.activeTexture(e$r._TEXTURES[e$t[0]]),e$cD.bindTexture(e$Y,34067,e$m),0)},e$m._noSetValue=function(e$D){console.log("no....:"+e$D.name)},e$m.uploadOne=function(e$D,e$m){this.activeResource(),e$cD.UseProgram(this._program);var e$Y=this._paramsMap[e$D];e$Y.fun.call(this,e$Y,e$m)},e$m.uploadTexture2D=function(e$D){e$Q.shaderCall++;var e$m=e$vD.mainContext;e$m.activeTexture(33984),e$cD.bindTexture(e$m,3553,e$D)},e$m.uploadTexture2D1=function(e$D){e$Q.shaderCall++;var e$m=e$vD.mainContext;e$m.activeTexture(33985),e$cD.bindTexture(e$m,3553,e$D)},e$m.upload=function(e$D,e$m){e$hD.activeShader=e$hD.bindShader=this,this._lastUseFrameCount===e$Q.loopCount||this.activeResource(),e$cD.UseProgram(this._program),this._reCompile?(e$m=this._params,this._reCompile=!1):e$m=e$m||this._params;e$vD.mainContext;for(var e$Y,e$t,e$y=e$m.length,e$l=0,e$E=0;e$E<e$y;e$E++)null!==(e$t=e$D[(e$Y=e$m[e$E]).name])&&(e$l+=e$Y.fun.call(this,e$Y,e$t));e$Q.shaderCall+=e$l},e$m.uploadArray=function(e$D,e$m,e$Y){e$hD.activeShader=this,(e$hD.bindShader=this).activeResource(),e$cD.UseProgram(this._program);this._params;for(var e$t,e$y,e$l=0,e$E=e$m-2;0<=e$E;e$E-=2)(e$y=this._paramsMap[e$D[e$E]])&&null!=(e$t=e$D[e$E+1])&&(e$Y&&e$Y[e$y.name]&&e$Y[e$y.name].bind(),e$l+=e$y.fun.call(this,e$y,e$t));e$Q.shaderCall+=e$l},e$m.getParams=function(){return this._params},e$r.getShader=function(e$D){return e$r.sharders[e$D]},e$r.create=function(e$D,e$m,e$Y,e$t){return new e$r(e$D,e$m,e$Y,e$t)},e$r.withCompile=function(e$D,e$m,e$Y,e$t){if(e$Y&&e$r.sharders[e$Y])return e$r.sharders[e$Y];var e$y=e$r._preCompileShader[2e-4*e$D];if(!e$y)throw new Error("withCompile shader err!"+e$D);return e$y.createShader(e$m,e$Y,e$t)},e$r.withCompile2D=function(e$D,e$m,e$Y,e$t,e$y){if(e$t&&e$r.sharders[e$t])return e$r.sharders[e$t];var e$l=e$r._preCompileShader[2e-4*e$D+e$m];if(!e$l)throw new Error("withCompile shader err!"+e$D+" "+e$m);return e$l.createShader(e$Y,e$t,e$y)},e$r.addInclude=function(e$D,e$m){e$eD.addInclude(e$D,e$m)},e$r.preCompile=function(e$D,e$m,e$Y,e$t){var e$y=2e-4*e$D;e$r._preCompileShader[e$y]=new e$eD(e$y,e$m,e$Y,e$t)},e$r.preCompile2D=function(e$D,e$m,e$Y,e$t,e$y){var e$l=2e-4*e$D+e$m;e$r._preCompileShader[e$l]=new e$eD(e$l,e$Y,e$t,e$y)},e$r._createShader=function(e$D,e$m,e$Y){var e$t=e$D.createShader(e$Y);return e$D.shaderSource(e$t,e$m),e$D.compileShader(e$t),e$t},e$r._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e$r._count=0,e$r._preCompileShader={},e$r.SHADERNAME2ID=2e-4,e$r.sharders=((e$r.sharders=[]).length=32,e$r.sharders),e$E(e$r,["nameKey",function(){return this.nameKey=new e$T}]),e$r}(),e$VD=function(e$D){function e$m(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e$m.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}e$i(e$m,"laya.webgl.utils.Buffer2D",e$D);var e$Y=e$m.prototype;return e$Y.needSize=function(e$D){var e$m=this._byteLength;if(e$D){var e$Y=this._byteLength+e$D;e$Y<=this._buffer.byteLength||this._resizeBuffer(e$Y<<1,!0),this._byteLength=e$Y}return e$m},e$Y._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),e$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e$PD._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e$PD._gl.bufferSubData(this._bufferType,0,this._buffer)},e$Y._bufferSubData=function(e$D,e$m,e$Y){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),this._maxsize=Math.max(this._maxsize,this._byteLength),e$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e$PD._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e$m||e$Y){var e$t=this._buffer.slice(e$m,e$Y);e$PD._gl.bufferSubData(this._bufferType,e$D,e$t)}else e$PD._gl.bufferSubData(this._bufferType,e$D,this._buffer)},e$Y._checkArrayUse=function(){},e$Y._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},e$Y._bind_subUpload=function(e$D,e$m,e$Y){return void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(e$D,e$m,e$Y),!0)},e$Y._resizeBuffer=function(e$D,e$m){if(e$D<this._buffer.byteLength)return this;if(this.memorySize=e$D,e$m&&this._buffer&&0<this._buffer.byteLength){var e$Y=new ArrayBuffer(e$D);new Uint8Array(e$Y).set(new Uint8Array(this._buffer),0),this._buffer=e$Y}else this._buffer=new ArrayBuffer(e$D);return this._checkArrayUse(),this._upload=!0,this},e$Y.append=function(e$D){this._upload=!0;var e$m,e$Y;e$m=e$D.byteLength,e$D instanceof Uint8Array?(this._resizeBuffer(this._byteLength+e$m,!0),e$Y=new Uint8Array(this._buffer,this._byteLength)):e$D instanceof Uint16Array?(this._resizeBuffer(this._byteLength+e$m,!0),e$Y=new Uint16Array(this._buffer,this._byteLength)):e$D instanceof Float32Array&&(this._resizeBuffer(this._byteLength+e$m,!0),e$Y=new Float32Array(this._buffer,this._byteLength)),e$Y.set(e$D,0),this._byteLength+=e$m,this._checkArrayUse()},e$Y.appendU16Array=function(e$D,e$m){this._resizeBuffer(this._byteLength+2*e$m,!0);for(var e$Y=new Uint16Array(this._buffer,this._byteLength,e$m),e$t=0;e$t<e$m;e$t++)e$Y[e$t]=e$D[e$t];this._byteLength+=2*e$m,this._checkArrayUse()},e$Y.appendEx=function(e$D,e$m){this._upload=!0;var e$Y;e$Y=e$D.byteLength,this._resizeBuffer(this._byteLength+e$Y,!0),new e$m(this._buffer,this._byteLength).set(e$D,0),this._byteLength+=e$Y,this._checkArrayUse()},e$Y.appendEx2=function(e$D,e$m,e$Y,e$t){void 0===e$t&&(e$t=1),this._upload=!0;var e$y,e$l;e$y=e$Y*e$t,this._resizeBuffer(this._byteLength+e$y,!0),e$l=new e$m(this._buffer,this._byteLength);var e$E=0;for(e$E=0;e$E<e$Y;e$E++)e$l[e$E]=e$D[e$E];this._byteLength+=e$y,this._checkArrayUse()},e$Y.getBuffer=function(){return this._buffer},e$Y.setNeedUpload=function(){this._upload=!0},e$Y.getNeedUpload=function(){return this._upload},e$Y.upload=function(){var e$D=this._bind_upload();return e$PD._gl.bindBuffer(this._bufferType,null),e$PD._bindActive[this._bufferType]=null,e$hD.activeShader=null,e$D},e$Y.subUpload=function(e$D,e$m,e$Y){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0);var e$t=this._bind_subUpload();return e$PD._gl.bindBuffer(this._bufferType,null),e$PD._bindActive[this._bufferType]=null,e$hD.activeShader=null,e$t},e$Y.disposeResource=function(){e$D.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},e$Y.clear=function(){this._byteLength=0,this._upload=!0},e$t(0,e$Y,"bufferLength",function(){return this._buffer.byteLength}),e$t(0,e$Y,"byteLength",null,function(e$D){this._byteLength!==e$D&&(e$D<=this._buffer.byteLength||this._resizeBuffer(2*e$D+256,!0),this._byteLength=e$D)}),e$m.__int__=function(e$D){e$jD.QuadrangleIB=e$jD.create(35044),e$wD.fillIBQuadrangle(e$jD.QuadrangleIB,16)},e$m.FLOAT32=4,e$m.SHORT=2,e$m}(e$PD),e$ZD=(function(e$m){function e$Y(e$D){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,e$Y.__super.call(this,9)}e$i(e$Y,"laya.webgl.shader.d2.value.GlowSV",e$m);var e$D=e$Y.prototype;e$D.setValue=function(e$D){e$m.prototype.setValue.call(this,e$D)},e$D.clear=function(){e$m.prototype.clear.call(this)}}(e$$D),function(e$D){function e$m(e$D){e$m.__super.call(this,64),this.defines.add(64)}e$i(e$m,"laya.webgl.shader.d2.value.TextSV",e$D);var e$Y=e$m.prototype;return e$Y.release=function(){(e$m.pool[e$m._length++]=this).clear()},e$Y.clear=function(){e$D.prototype.clear.call(this)},e$m.create=function(){return e$m._length?e$m.pool[--e$m._length]:new e$m(null)},e$m.pool=[],e$m._length=0,e$m}(e$$D)),e$bD=function(e$D){function e$y(e$D,e$m,e$Y,e$t){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,e$y.__super.call(this,e$D,e$m,e$Y,e$t)}e$i(e$y,"laya.webgl.shader.d2.Shader2X",e$D);var e$m=e$y.prototype;return e$m.upload2dQuick1=function(e$D){this.upload(e$D,this._params2dQuick1||this._make2dQuick1())},e$m._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var e$D,e$m=this._params,e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)e$D=e$m[e$Y],(e$W.isFlash||"size"!==e$D.name&&"position"!==e$D.name&&"texcoord"!==e$D.name)&&this._params2dQuick1.push(e$D)}return this._params2dQuick1},e$m.disposeResource=function(){e$D.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},e$m.upload2dQuick2=function(e$D){this.upload(e$D,this._params2dQuick2||this._make2dQuick2())},e$m._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var e$D,e$m=this._params,e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)e$D=e$m[e$Y],(e$W.isFlash||"size"!==e$D.name)&&this._params2dQuick2.push(e$D)}return this._params2dQuick2},e$y.create=function(e$D,e$m,e$Y,e$t){return new e$y(e$D,e$m,e$Y,e$t)},e$y}(e$xD),e$jD=function(e$D){function e$m(e$D){this._uint8Array=null,this._uint16Array=null,void 0===e$D&&(e$D=35044),e$m.__super.call(this),this._bufferUsage=e$D,this._bufferType=34963,e$W.isFlash||(this._buffer=new ArrayBuffer(8))}e$i(e$m,"laya.webgl.utils.IndexBuffer2D",e$VD);var e$Y=e$m.prototype;return e$Y._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},e$Y.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},e$Y.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},e$Y.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},e$m.QuadrangleIB=null,e$m.create=function(e$D){return void 0===e$D&&(e$D=35044),new e$m(e$D)},e$m}(),e$KD=function(e$D){function e$Y(e$D,e$m){this._floatArray32=null,this._vertexStride=0,e$Y.__super.call(this),this._vertexStride=e$D,this._bufferUsage=e$m,this._bufferType=34962,e$W.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}e$i(e$Y,"laya.webgl.utils.VertexBuffer2D",e$D);var e$m=e$Y.prototype;return e$m.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},e$m.bind=function(e$D){e$D&&e$D._bind(),this._bind()},e$m.insertData=function(e$D,e$m){this.getFloat32Array().set(e$D,e$m),this._upload=!0},e$m.bind_upload=function(e$D){e$D._bind_upload()||e$D._bind(),this._bind_upload()||this._bind()},e$m._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},e$m.disposeResource=function(){e$D.prototype.disposeResource.call(this)},e$m.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},e$t(0,e$m,"vertexStride",function(){return this._vertexStride}),e$Y.create=function(e$D,e$m){return void 0===e$m&&(e$m=35048),new e$Y(e$D,e$m)},e$Y}(e$VD),e$Dm=function(e$D){function e$B(e$D,e$m,e$Y,e$t,e$y,e$l){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=!0),e$B.__super.call(this,e$D,e$m),e$D){if(this._format=e$Y,this._mipmap=e$t,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof e$D)this._url=e$D,this._src=e$D,this._image=new e$R.window.Image,e$m&&(e$m.onload&&(this.onload=e$m.onload),e$m.onerror&&(this.onerror=e$m.onerror),e$m.onCreate&&e$m.onCreate(this)),this._image.crossOrigin=e$D&&0==e$D.indexOf("data:")?null:"",e$D&&(this._image.src=e$D);else if(e$D instanceof ArrayBuffer){this._src=e$m,this._url=this._src;var e$E=new e$o(e$D);e$E.readUTFBytes(4),e$E.readUTFBytes(2),e$E.getInt16();e$E.endian="bigEndian",this._w=e$E.getInt16(),this._h=e$E.getInt16();e$E.getInt16(),e$E.getInt16();this._image=new Uint8Array(e$D,e$E.pos),this._format=e$vD.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,e$q.enabled&&this._w<e$q.atlasLimitWidth&&this._h<e$q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(e$D instanceof Uint8Array))return this._src=e$m,this._url=this._src,this._image=e$D.source||e$D,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=e$m,this._url=this._src,this._w=e$y,this._h=e$l,this._image=e$D,this._format=0===e$Y?e$D.byteLength/(e$y*e$l)==4?6408:6407:e$Y}this._$5__enableMerageInAtlas=!0}}e$i(e$B,"laya.webgl.resource.WebGLImage",e$w);var e$m=e$B.prototype;return e$S.imps(e$m,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$m._init_=function(e$D,e$m){},e$m._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e$D=e$vD.mainContext,e$m=this._source=e$D.createTexture(),e$Y=e$cD.curBindTexTarget,e$t=e$cD.curBindTexValue;e$cD.bindTexture(e$D,3553,e$m);var e$y=this.minFifter,e$l=this.magFifter,e$E=this.repeat?10497:33071,e$B=e$f.isPOT(this._w,this._h),e$o=!1;switch(e$B?(this.mipmap?-1!==e$y||(e$y=9987):-1!==e$y||(e$y=9729),-1!==e$l||(e$l=9729),e$D.texParameteri(3553,10241,e$y),e$D.texParameteri(3553,10240,e$l),e$D.texParameteri(3553,10242,e$E),e$D.texParameteri(3553,10243,e$E),this.mipmap&&e$D.generateMipmap(3553)):(-1!==e$y||(e$y=9729),-1!==e$l||(e$l=9729),e$D.texParameteri(3553,10241,e$y),e$D.texParameteri(3553,10240,e$l),e$D.texParameteri(3553,10242,33071),e$D.texParameteri(3553,10243,33071)),e$D.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&e$D.pixelStorei(e$D.UNPACK_ALIGNMENT,1),e$D.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&e$D.pixelStorei(e$D.UNPACK_ALIGNMENT,1),e$D.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:e$o=!0,e$D.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case e$vD.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e$o=!0,e$D.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}e$D.pixelStorei(37441,!1),e$Y&&e$t&&e$cD.bindTexture(e$D,e$Y,e$t),this.uri||(this.uri=this._url),e$o?this.memorySize=this._image.length:e$B&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},e$m.recreateResource=function(){var e$D=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var e$m=this;this._image=new e$R.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(e$m._needReleaseAgain)return e$m._needReleaseAgain=!1,e$m._image.onload=null,void(e$m._image=null);e$m._allowMerageInAtlas&&e$m._enableMerageInAtlas?(e$D.memorySize=0,e$D._recreateLock=!1):e$m._createWebGlTexture(),e$m.completeCreate()},this._image.src=this._src}},e$m.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&e$vD.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},e$m.onresize=function(){this._w=this._image.width,this._h=this._image.height,e$q.enabled&&this._w<e$q.atlasLimitWidth&&this._h<e$q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},e$m.clearAtlasSource=function(){this._image=null},e$t(0,e$m,"format",function(){return this._format}),e$t(0,e$m,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(e$D){this._$5__enableMerageInAtlas=e$D}),e$t(0,e$m,"mipmap",function(){return this._mipmap}),e$t(0,e$m,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$t(0,e$m,"atlasSource",function(){return this._image}),e$t(0,e$m,"onload",null,function(e$D){var e$m=this;this._onload=e$D,this._image&&(this._image.onload=null!=this._onload?function(){e$m.onresize(),e$m._onload()}:null)}),e$t(0,e$m,"onerror",null,function(e$D){var e$m=this;this._onerror=e$D,this._image&&(this._image.onerror=null!=this._onerror?function(){e$m._onerror()}:null)}),e$B}();e$S.__init([e$RD,e$L,e$zD,e$eD])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$l,e$D,e$k){e$k.un,e$k.uns;var e$t=e$k.static,e$y=e$k.class,e$E=e$k.getset,e$B=(e$k.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),e$G=laya.utils.ClassUtils,e$_=(laya.events.Event,laya.utils.HTMLChar),e$o=laya.net.Loader,e$r=(laya.display.Node,laya.maths.Rectangle),e$f=laya.renders.Render,e$i=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),e$R=laya.utils.Stat,e$M=laya.display.Text,e$I=laya.resource.Texture,e$w=laya.net.URL,e$W=laya.utils.Utils,e$U=function(){function e$R(){}return e$y(e$R,"laya.html.utils.HTMLParse"),e$R.parse=function(e$D,e$m,e$Y){e$m=(e$m="<root>"+(e$m=e$m.replace(/<br>/g,"<br/>"))+"</root>").replace(e$R.spacePattern,e$R.char255);var e$t=e$W.parseXMLFromString(e$m);e$R._parseXML(e$D,e$t.childNodes[0].childNodes,e$Y)},e$R._parseXML=function(e$D,e$m,e$Y,e$t){var e$y=0,e$l=0;if(e$m.join||e$m.item)for(e$y=0,e$l=e$m.length;e$y<e$l;++e$y)e$R._parseXML(e$D,e$m[e$y],e$Y,e$t);else{var e$E,e$B,e$o;if(3==e$m.nodeType)return void(e$D instanceof laya.html.dom.HTMLDivElement?(null==e$m.nodeName&&(e$m.nodeName="#text"),e$B=e$m.nodeName.toLowerCase(),0<(e$o=e$m.textContent.replace(/^\s+|\s+$/g,"")).length&&(e$E=e$G.getInstance(e$B))&&(e$D.addChild(e$E),e$E.innerTEXT=e$o.replace(e$R.char255AndOneSpacePattern," "))):0<(e$o=e$m.textContent.replace(/^\s+|\s+$/g,"")).length&&(e$D.innerTEXT=e$o.replace(e$R.char255AndOneSpacePattern," ")));if("#comment"==(e$B=e$m.nodeName.toLowerCase()))return;if(e$E=e$G.getInstance(e$B)){(e$E=e$D.addChild(e$E)).URI=e$Y,e$E.href=e$t;var e$r=e$m.attributes;if(e$r&&0<e$r.length)for(e$y=0,e$l=e$r.length;e$y<e$l;++e$y){var e$f=e$r[e$y],e$_=e$f.nodeName,e$i=e$f.value;e$E._setAttributes(e$_,e$i)}e$R._parseXML(e$E,e$m.childNodes,e$Y,e$E.href)}else e$R._parseXML(e$D,e$m.childNodes,e$Y,e$t)}},e$R.char255=String.fromCharCode(255),e$R.spacePattern=/&nbsp;|&#160;/g,e$R.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),e$R}(),e$e=function(){function e$d(){}return e$y(e$d,"laya.html.utils.Layout"),e$d.later=function(e$D){null==e$d._will&&(e$d._will=[],e$k.stage.frameLoop(1,null,function(){if(!(e$d._will.length<1)){for(var e$D=0;e$D<e$d._will.length;e$D++)laya.html.utils.Layout.layout(e$d._will[e$D]);e$d._will.length=0}})),e$d._will.push(e$D)},e$d.layout=function(e$D){if(!e$D||!e$D._style)return null;if(0==(512&e$D._style._type))return null;e$D.getStyle()._type&=-513;var e$m=e$d._multiLineLayout(e$D);return e$f.isConchApp&&e$D.layaoutCallNative&&e$D.layaoutCallNative(),e$m},e$d._multiLineLayout=function(e$D){if(e$M.RightToLeft)return e$d._multiLineLayout2(e$D);var e$m=new Array;e$D._addChildsToLayout(e$m);var e$Y,e$t,e$y,e$l,e$E,e$B=0,e$o=e$m.length,e$r=e$D._getCSSStyle(),e$f=e$r.letterSpacing,e$_=e$r.leading,e$i=e$r.lineHeight,e$R=e$r._widthAuto()||!e$r.wordWrap,e$G=e$R?999999:e$D.width,e$I=(e$D.height,0),e$w=e$r.italic?e$r.fontSize/3:0,e$W=e$r._getAlign(),e$U=e$r._getValign(),e$e=0!==e$U||0!==e$W||0!=e$i,e$v=0,e$c=0,e$S=0,e$z=0,e$A=new Array,e$J=e$A[0]=new e$n,e$a=!1,e$p=!1;e$J.h=0,e$r.italic&&(e$G-=e$r.fontSize/3);var e$F=0,e$s=!0;function e$Q(){e$J.y=e$c,e$c+=e$J.h+e$_,0==e$J.h&&(e$c+=e$i),e$J.mWidth=e$F,e$F=0,e$J=new e$n,e$A.push(e$J),e$J.h=0,e$a=!(e$s=!(e$v=0))}if(e$M.WordSplitArr&&e$M.WordSplitArr.length){var e$T,e$N=[],e$C=[],e$O=0,e$h=0,e$X=0;for(e$B=0;e$B<e$o;e$B++)if(e$T=e$m[e$B],e$C.push(e$T),e$T?(e$X+=e$h=e$T instanceof laya.html.dom.HTMLBrElement?0:e$T._isChar()?e$T.width+e$f:(e$y=e$T._getCSSStyle().padding,e$T.width*e$T._style._tf.scaleX+e$y[1]+e$y[3]+e$f),e$O+=e$h,e$T&&e$T instanceof laya.html.dom.HTMLBrElement||e$T&&"\n"===e$T.char||e$B==e$o-1?(e$N.push(e$C),e$C=[],e$X=0):-1!=e$k.Text.WordSplitArr.indexOf(e$T.char)&&(e$N.push(e$C),e$C=[],e$X=0)):(e$X+=e$d.DIV_ELEMENT_PADDING,e$O+=e$d.DIV_ELEMENT_PADDING),e$T&&e$T instanceof laya.html.dom.HTMLBrElement||e$T&&"\n"===e$T.char||e$B==e$o-1||e$G<e$O){e$O=e$X;for(var e$P=0;e$P<e$N.length;e$P++)for(var e$u=0;e$u<e$N[e$P].length;e$u++)null!=(e$Y=e$N[e$P][e$u])?(e$s=!1,e$Y instanceof laya.html.dom.HTMLBrElement?e$J.y=e$c:(e$Y._isChar()?((e$l=e$Y).isWord?e$J.wordStartIndex=e$J.elements.length:(e$S=e$l.width+e$l.style.letterSpacing,e$F+=e$l.width),e$S=e$l.width+e$f,e$z=e$l.height,e$J.minTextHeight=Math.min(e$J.minTextHeight,e$Y.height)):(e$t=e$Y._getCSSStyle(),e$E=e$Y,e$y=e$t.padding,0===e$t._getCssFloat()||(e$e=!0),e$a=e$p||e$t.lineElement,e$S=e$E.width*e$E._style._tf.scaleX+e$y[1]+e$y[3]+e$f,e$z=e$E.height*e$E._style._tf.scaleY+e$y[0]+e$y[2]),e$J.elements.push(e$Y),e$J.h=Math.max(e$J.h,e$z),e$Y.x=e$v,e$Y.y=e$c,e$v+=e$S,e$J.w=e$v-e$f,e$J.y=e$c,e$I=Math.max(e$v+e$w,e$I))):(e$s||(e$v+=e$d.DIV_ELEMENT_PADDING),e$J.wordStartIndex=e$J.elements.length);e$N=[],e$B<e$o-1&&e$Q()}}else for(e$B=0;e$B<e$o;e$B++)if(null!=(e$Y=e$m[e$B]))if(e$s=!1,e$Y instanceof laya.html.dom.HTMLBrElement)e$Q(),e$J.y=e$c;else{if(e$Y._isChar()){if((e$l=e$Y).isWord)e$a=e$p||"\n"===e$l.char,e$J.wordStartIndex=e$J.elements.length;else{if(e$S=e$l.width+e$l.style.letterSpacing,0<e$A.length&&e$G<e$v+e$S&&0<e$J.wordStartIndex){var e$L;e$L=e$J.elements.length-e$J.wordStartIndex+1,e$J.elements.length=e$J.wordStartIndex,e$B-=e$L,e$Q();continue}e$a=!1,e$F+=e$l.width}e$S=e$l.width+e$f,e$z=e$l.height,e$p=!1,(e$a=e$a||e$G<e$v+e$S)&&e$Q(),e$J.minTextHeight=Math.min(e$J.minTextHeight,e$Y.height)}else e$t=e$Y._getCSSStyle(),e$E=e$Y,e$y=e$t.padding,0===e$t._getCssFloat()||(e$e=!0),e$a=e$p||e$t.lineElement,e$S=e$E.width*e$E._style._tf.scaleX+e$y[1]+e$y[3]+e$f,e$z=e$E.height*e$E._style._tf.scaleY+e$y[0]+e$y[2],e$p=e$t.lineElement,(e$a=e$a||e$G<e$v+e$S&&e$t.wordWrap)&&e$Q();e$J.elements.push(e$Y),e$J.h=Math.max(e$J.h,e$z),e$Y.x=e$v,e$Y.y=e$c,e$v+=e$S,e$J.w=e$v-e$f,e$J.y=e$c,e$I=Math.max(e$v+e$w,e$I)}else e$s||(e$v+=e$d.DIV_ELEMENT_PADDING),e$J.wordStartIndex=e$J.elements.length;if(e$c=e$J.y+e$J.h,e$e){var e$q=0,e$$=e$G;for(e$R&&0<e$D.width&&(e$$=e$D.width),e$B=0,e$o=e$A.length;e$B<e$o;e$B++)e$A[e$B].updatePos(0,e$$,e$B,e$q,e$W,e$U,e$i),e$q+=Math.max(e$i,e$A[e$B].h+e$_);e$c=e$q}return e$R&&(e$D.width=e$I),e$c>e$D.height&&(e$D.height=e$c),[e$I,e$c]},e$d._multiLineLayout2=function(e$D){var e$m=new Array;e$D._addChildsToLayout(e$m);var e$Y,e$t,e$y,e$l,e$E,e$B=0,e$o=e$m.length,e$r=e$D._getCSSStyle(),e$f=e$r.letterSpacing,e$_=e$r.leading,e$i=e$r.lineHeight,e$R=e$r._widthAuto()||!e$r.wordWrap,e$G=e$R?999999:e$D.width,e$I=(e$D.height,0),e$w=e$r.italic?e$r.fontSize/3:0,e$W=2-e$r._getAlign(),e$U=e$r._getValign(),e$e=0!==e$U||0!=e$W||0!=e$i,e$v=0,e$c=0,e$S=0,e$z=0,e$A=new Array,e$J=e$A[0]=new e$n,e$a=!1,e$p=!1;e$J.h=0,e$r.italic&&(e$G-=e$r.fontSize/3);var e$F=0,e$s=!0;function e$Q(){e$J.y=e$c,e$c+=e$J.h+e$_,0==e$J.h&&(e$c+=e$i),e$J.mWidth=e$F,e$F=0,e$J=new e$n,e$A.push(e$J),e$J.h=0,e$a=!(e$s=!(e$v=0))}if(e$M.WordSplitArr&&e$M.WordSplitArr.length){var e$T,e$N=[],e$C=[],e$O=0,e$h=0,e$X=0;for(e$B=0;e$B<e$o;e$B++)if(e$T=e$m[e$B],e$C.push(e$T),e$T?(e$X+=e$h=e$T instanceof laya.html.dom.HTMLBrElement?0:e$T._isChar()?e$T.width+e$f:(e$y=e$T._getCSSStyle().padding,e$T.width*e$T._style._tf.scaleX+e$y[1]+e$y[3]+e$f),e$O+=e$h,e$T&&e$T instanceof laya.html.dom.HTMLBrElement||e$T&&"\n"===e$T.char||e$B==e$o-1?(e$N.push(e$C),e$C=[],e$X=0):-1!=e$k.Text.WordSplitArr.indexOf(e$T.char)&&(e$N.push(e$C),e$C=[],e$X=0)):(e$X+=e$d.DIV_ELEMENT_PADDING,e$O+=e$d.DIV_ELEMENT_PADDING),e$T&&e$T instanceof laya.html.dom.HTMLBrElement||e$T&&"\n"===e$T.char||e$B==e$o-1||e$G<e$O){e$O=e$X;for(var e$P=0;e$P<e$N.length;e$P++)for(var e$u=0;e$u<e$N[e$P].length;e$u++)null!=(e$Y=e$N[e$P][e$u])?(e$s=!1,e$Y instanceof laya.html.dom.HTMLBrElement?e$J.y=e$c:(e$Y._isChar()?((e$l=e$Y).isWord?e$J.wordStartIndex=e$J.elements.length:(e$S=e$l.width+e$l.style.letterSpacing,e$F+=e$l.width),e$S=e$l.width+e$f,e$z=e$l.height,e$J.minTextHeight=Math.min(e$J.minTextHeight,e$Y.height)):(e$t=e$Y._getCSSStyle(),e$E=e$Y,e$y=e$t.padding,0===e$t._getCssFloat()||(e$e=!0),e$a=e$p||e$t.lineElement,e$S=e$E.width*e$E._style._tf.scaleX+e$y[1]+e$y[3]+e$f,e$z=e$E.height*e$E._style._tf.scaleY+e$y[0]+e$y[2]),e$J.elements.push(e$Y),e$J.h=Math.max(e$J.h,e$z),e$Y.x=e$v,e$Y.y=e$c,e$v+=e$S,e$J.w=e$v-e$f,e$J.y=e$c,e$I=Math.max(e$v+e$w,e$I))):(e$s||(e$v+=e$d.DIV_ELEMENT_PADDING),e$J.wordStartIndex=e$J.elements.length);e$N=[],e$B<e$o-1&&e$Q()}}else for(e$B=0;e$B<e$o;e$B++)if(null!=(e$Y=e$m[e$B]))if(e$s=!1,e$Y instanceof laya.html.dom.HTMLBrElement)e$Q(),e$J.y=e$c;else{if(e$Y._isChar()){if((e$l=e$Y).isWord)e$a=e$p||"\n"===e$l.char,e$J.wordStartIndex=e$J.elements.length;else{if(0<e$A.length&&e$G<e$v+e$S&&0<e$J.wordStartIndex){var e$L;e$L=e$J.elements.length-e$J.wordStartIndex+1,e$J.elements.length=e$J.wordStartIndex,e$B-=e$L,e$Q();continue}e$a=!1,e$F+=e$l.width}e$S=e$l.width+e$f,e$z=e$l.height,e$p=!1,(e$a=e$a||e$G<e$v+e$S)&&e$Q(),e$J.minTextHeight=Math.min(e$J.minTextHeight,e$Y.height)}else e$t=e$Y._getCSSStyle(),e$E=e$Y,e$y=e$t.padding,0===e$t._getCssFloat()||(e$e=!0),e$a=e$p||e$t.lineElement,e$S=e$E.width*e$E._style._tf.scaleX+e$y[1]+e$y[3]+e$f,e$z=e$E.height*e$E._style._tf.scaleY+e$y[0]+e$y[2],e$p=e$t.lineElement,(e$a=e$a||e$G<e$v+e$S&&e$t.wordWrap)&&e$Q();e$J.elements.push(e$Y),e$J.h=Math.max(e$J.h,e$z),e$Y.x=e$v,e$Y.y=e$c,e$v+=e$S,e$J.w=e$v-e$f,e$J.y=e$c,e$I=Math.max(e$v+e$w,e$I)}else e$s||(e$v+=e$d.DIV_ELEMENT_PADDING),e$J.wordStartIndex=e$J.elements.length;if(e$c=e$J.y+e$J.h,e$e){var e$q=0,e$$=e$G;for(e$B=0,e$o=e$A.length;e$B<e$o;e$B++)e$A[e$B].updatePos(0,e$$,e$B,e$q,e$W,e$U,e$i),e$q+=Math.max(e$i,e$A[e$B].h+e$_);e$c=e$q}for(e$R&&(e$D.width=e$I),e$c>e$D.height&&(e$D.height=e$c),e$B=0,e$o=e$A.length;e$B<e$o;e$B++)e$A[e$B].revertOrder(e$G);return[e$I,e$c]},e$d._will=null,e$d.DIV_ELEMENT_PADDING=0,e$d}(),e$n=function(){function e$D(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}e$y(e$D,"laya.html.utils.LayoutLine");var e$m=e$D.prototype;return e$m.updatePos=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B,e$o=0;0<this.elements.length&&(e$o=(e$B=this.elements[this.elements.length-1]).x+e$B.width-this.elements[0].x);var e$r=0,e$f=NaN;1===e$y&&(e$r=(e$m-e$o)/2),2===e$y&&(e$r=e$m-e$o),0===e$E||0!=e$l||(e$l=1);for(var e$_=0,e$i=this.elements.length;e$_<e$i;e$_++){var e$R=(e$B=this.elements[e$_])._getCSSStyle();switch(0!==e$r&&(e$B.x+=e$r),e$R._getValign()){case 0:e$B.y=e$t;break;case 1:var e$G=0;99999!=this.minTextHeight&&(e$G=this.minTextHeight);var e$I=(e$G+e$E)/2;e$I=Math.max(e$I,this.h),e$f=(laya.html.dom.HTMLImageElement,e$t+e$I-e$B.height),e$B.y=e$f;break;case 2:e$B.y=e$t+(e$E-e$B.height)}}},e$m.revertOrder=function(e$D){var e$m;if(0<this.elements.length){var e$Y,e$t=0;for(e$Y=this.elements.length,e$t=0;e$t<e$Y;e$t++)(e$m=this.elements[e$t]).x=e$D-e$m.x-e$m.width}},e$D}(),e$v=function(e$Y){function e$m(){this.URI=null,this._href=null,e$m.__super.call(this),this._text=e$m._EMPTYTEXT,this.setStyle(new e$B(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}e$y(e$m,"laya.html.dom.HTMLElement",e$Y);var e$D=e$m.prototype;return e$D.layaoutCallNative=function(){var e$D=0;if(this._childs&&0<(e$D=this._childs.length))for(var e$m=0;e$m<e$D;e$m++)this._childs[e$m].layaoutCallNative&&this._childs[e$m].layaoutCallNative();var e$Y=this._getWords();e$Y?laya.html.dom.HTMLElement.fillWords(this,e$Y,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},e$D.appendChild=function(e$D){return this.addChild(e$D)},e$D._getWords2=function(){var e$D=this._text.text;if(!e$D||0===e$D.length)return null;var e$m,e$Y,e$t=0,e$y=0;if(this._text.drawWords)e$Y=this._text.drawWords;else{for(e$y=(e$m=e$D.split(" ")).length-1,e$Y=[],e$t=0;e$t<e$y;e$t++)e$Y.push(e$m[e$t]," ");0<=e$y&&e$Y.push(e$m[e$y]),this._text.drawWords=e$Y}var e$l,e$E=this._text.words;if(e$E&&e$E.length===e$Y.length)return e$E;null===e$E&&(this._text.words=e$E=[]),e$E.length=e$Y.length;var e$B=this.style,e$o=e$B.font;for(e$t=0,e$y=e$Y.length;e$t<e$y;e$t++){e$l=e$W.measureText(e$Y[e$t],e$o);var e$r=e$E[e$t]=new e$_(e$Y[e$t],e$l.width,e$l.height||e$B.fontSize,e$B);if(1<e$r.char.length&&(e$r.charNum=e$r.char),this.href){var e$f=new e$i;this.addChild(e$f),e$r.setSprite(e$f)}}return e$E},e$D._getWords=function(){if(!e$M.CharacterCache)return this._getWords2();var e$D=this._text.text;if(!e$D||0===e$D.length)return null;var e$m,e$Y=this._text.words;if(e$Y&&e$Y.length===e$D.length)return e$Y;null===e$Y&&(this._text.words=e$Y=[]),e$Y.length=e$D.length;for(var e$t=this.style,e$y=e$t.font,e$l=0,e$E=e$D.length;e$l<e$E;e$l++)if(e$m=e$W.measureText(e$D.charAt(e$l),e$y)){var e$B=e$Y[e$l]=new e$_(e$D.charAt(e$l),e$m.width,e$m.height||e$t.fontSize,e$t);if(this.href){var e$o=new e$i;this.addChild(e$o),e$B.setSprite(e$o)}}else console.warn("_getWords size is null"+e$D.charAt(e$l),e$y);return e$Y},e$D.showLinkSprite=function(){var e$D=this._text.words;if(e$D)for(var e$m,e$Y,e$t=[],e$y=0;e$y<e$D.length;e$y++)e$Y=e$D[e$y],(e$m=new e$i).graphics.drawRect(0,0,e$Y.width,e$Y.height,"#ff0000"),e$m.width=e$Y.width,e$m.height=e$Y.height,this.addChild(e$m),e$t.push(e$m)},e$D._layoutLater=function(){var e$D=this.style;512&e$D._type||(e$D.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&e$D.block?(e$e.later(this),e$D._type|=512):this.parent&&this.parent._layoutLater())},e$D._setAttributes=function(e$D,e$m){switch(e$D){case"style":return void this.style.cssText(e$m);case"class":return void(this.className=e$m)}e$Y.prototype._setAttributes.call(this,e$D,e$m)},e$D.updateHref=function(){if(null!=this._href){var e$D=this._getWords();if(e$D)for(var e$m,e$Y,e$t=0;e$t<e$D.length;e$t++)(e$Y=(e$m=e$D[e$t]).getSprite())&&(e$Y.size(e$m.width,e$m.height),e$Y.on("click",this,this.onLinkHandler))}},e$D.onLinkHandler=function(e$D){switch(e$D.type){case"click":for(var e$m=this;e$m;)e$m.event("link",[this.href]),e$m=e$m.parent}},e$D.formatURL=function(e$D){return this.URI?e$w.formatURL(e$D,this.URI?this.URI.path:null):e$D},e$E(0,e$D,"href",function(){return this._href},function(e$D){null!=(this._href=e$D)&&(this._getCSSStyle().underLine=1,this.updateHref())}),e$E(0,e$D,"color",null,function(e$D){this.style.color=e$D}),e$E(0,e$D,"onClick",null,function(e$D){e$k._runScript("fn=function(event){"+e$D+";}"),this.on("click",this,void 0)}),e$E(0,e$D,"id",null,function(e$D){e$c.document.setElementById(e$D,this)}),e$E(0,e$D,"innerTEXT",function(){return this._text.text},function(e$D){this.text=e$D}),e$E(0,e$D,"style",function(){return this._style}),e$E(0,e$D,"text",function(){return this._text.text},function(e$D){this._text==e$m._EMPTYTEXT?this._text={text:e$D,words:null}:(this._text.text=e$D,this._text.words&&(this._text.words.length=0)),e$f.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),e$E(0,e$D,"parent",e$Y.prototype._$get_parent,function(e$D){if(e$D instanceof laya.html.dom.HTMLElement){var e$m=e$D;this.URI||(this.URI=e$m.URI),this.style.inherit(e$m.style)}e$k.superSet(e$i,this,"parent",e$D)}),e$E(0,e$D,"className",null,function(e$D){this.style.attrs(e$c.document.styleSheets["."+e$D])}),e$m.fillWords=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$D.graphics.clear();for(var e$B=0,e$o=e$m.length;e$B<e$o;e$B++){var e$r=e$m[e$B];e$D.graphics.fillText(e$r.char,e$r.x+e$Y,e$r.y+e$t,e$y,e$l,"left",e$E)}},e$m._EMPTYTEXT={text:null,words:null},e$m}(e$i),e$m=(function(e$D){function e$m(){e$m.__super.call(this),this.style.lineElement=!0,this.style.block=!0}e$y(e$m,"laya.html.dom.HTMLBrElement",e$v)}(),function(e$D){function e$m(){this.contextHeight=NaN,this.contextWidth=NaN,e$m.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}e$y(e$m,"laya.html.dom.HTMLDivElement",e$D);var e$Y=e$m.prototype;return e$Y.appendHTML=function(e$D){e$U.parse(this,e$D,this.URI),this.layout()},e$Y._addChildsToLayout=function(e$m){var e$D=this._getWords();if(null==e$D&&0==this._childs.length)return!1;e$D&&e$D.forEach(function(e$D){e$m.push(e$D)});for(var e$Y=!0,e$t=0,e$y=this._childs.length;e$t<e$y;e$t++){var e$l=this._childs[e$t];e$Y?e$Y=!1:e$m.push(null),e$l._addToLayout(e$m)}return!0},e$Y._addToLayout=function(e$D){this.layout()},e$Y.layout=function(){if(this.style){this.style._type|=512;var e$D=e$e.layout(this);if(e$D){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new e$r);var e$m=this._$P.mHtmlBounds;e$m.x=e$m.y=0,e$m.width=this.contextWidth=e$D[0],e$m.height=this.contextHeight=e$D[1],this.setBounds(e$m)}}},e$E(0,e$Y,"height",function(){return this._height?this._height:this.contextHeight},e$D.prototype._$set_height),e$E(0,e$Y,"innerHTML",null,function(e$D){this.destroyChildren(),this.appendHTML(e$D)}),e$E(0,e$Y,"width",function(){return this._width?this._width:this.contextWidth},function(e$D){var e$m=!1;e$m=0===e$D?e$D!=this._width:e$D!=this.width,e$k.superSet(e$v,this,"width",e$D),e$m&&this.layout()}),e$m}(e$v)),e$c=function(e$D){function e$m(){this.all=new Array,this.styleSheets=e$B.styleSheets,e$m.__super.call(this)}e$y(e$m,"laya.html.dom.HTMLDocument",e$v);var e$Y=e$m.prototype;return e$Y.getElementById=function(e$D){return this.all[e$D]},e$Y.setElementById=function(e$D,e$m){this.all[e$D]=e$m},e$t(e$m,["document",function(){return this.document=new e$m}]),e$m}();(function(e$D){function e$m(){this._tex=null,this._url=null,this._renderArgs=[],e$m.__super.call(this),this.style.block=!0}e$y(e$m,"laya.html.dom.HTMLImageElement",e$v);var e$Y=e$m.prototype;e$Y._addToLayout=function(e$D){!this._style.absolute&&e$D.push(this)},e$Y.render=function(e$D,e$m,e$Y){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(e$R.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,e$D.ctx.drawTexture2(e$m,e$Y,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},e$Y.layaoutCallNative=function(){var e$D=0;if(this._childs&&0<(e$D=this._childs.length))for(var e$m=0;e$m<e$D;e$m++)this._childs[e$m].layaoutCallNative&&this._childs[e$m].layaoutCallNative()},e$E(0,e$Y,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(e$D){this._width!==e$D&&(this._width=e$D,this._style.width=e$D,this.repaint())}),e$E(0,e$Y,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(e$D){this._height!==e$D&&(this._height=e$D,this._style.height=e$D,this.repaint())}),e$Y.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),e$o.clearCache(this,this._url),this._tex=null),e$v.prototype.destroy.call(this)},e$Y.onloaded=function(){var e$D=this._style;e$D&&!e$D.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),e$D&&!e$D.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),e$f.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},e$Y._loadImageComplete=function(e$D,e$m,e$Y){if(!this._destroyed)if(null!=e$Y)if(e$Y instanceof ArrayBuffer){var e$t=new DataView(e$Y);new laya.webgl.resource.WebGLImage(new Uint8Array(e$Y,8),e$D,0,!1,e$t.getUint32(0),e$t.getUint32(4));this.onloaded()}else if(e$Y instanceof e$I)e$o.imgMgrSet[e$D]=e$m,e$l.imgMgrLock(e$D,e$o.imgMgrSet[e$D]),this._url=e$D,this._tex=e$Y,e$o.keepCache(this,e$D),e$o.cacheRes(e$D,this._tex),this.onloaded();else{var e$y=-1!=e$D.indexOf(".png",e$D.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(e$Y,e$D,e$y,!1,e$Y.width,e$Y.height);this.onloaded()}else this.event("error","Load image failed")},e$E(0,e$Y,"src",null,function(e$D){(e$D=this.formatURL(e$D),this._url!=e$D)&&(null!=this._tex&&(e$o.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=e$D,(this._tex=e$o.getRes(e$D))?(e$o.keepCache(this,e$D),this.onloaded()):e$l.imgMgrLoad(e$D,this._loadImageComplete.bind(this),2,!1))})})(),function(e$D){function e$m(){this.type=null,e$m.__super.call(this),this.visible=!1}e$y(e$m,"laya.html.dom.HTMLLinkElement",e$D);var e$Y=e$m.prototype;e$Y._onload=function(e$D){switch(this.type){case"text/css":e$B.parseCSS(e$D,this.URI)}},e$E(0,e$Y,"href",e$D.prototype._$get_href,function(e$D){var e$m=this;e$D=this.formatURL(e$D),this.URI=new e$w(e$D);var e$Y=new e$o;e$Y.once("complete",null,function(e$D){e$m._onload(e$D)}),e$Y.load(e$D,"text")}),e$m._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(e$v),function(e$D){function e$m(){e$m.__super.call(this),this.visible=!1}e$y(e$m,"laya.html.dom.HTMLStyleElement",e$D),e$E(0,e$m.prototype,"text",e$D.prototype._$get_text,function(e$D){e$B.parseCSS(e$D,null)})}(e$v),function(e$D){function e$m(){e$m.__super.call(this),this._getCSSStyle().valign="middle"}e$y(e$m,"laya.html.dom.HTMLIframeElement",e$D),e$E(0,e$m.prototype,"href",e$D.prototype._$get_href,function(e$Y){var e$t=this;e$Y=this.formatURL(e$Y);var e$D=new e$o;e$D.once("complete",null,function(e$D){var e$m=e$t.URI;e$t.URI=new e$w(e$Y),e$t.innerHTML=e$D,!e$m||(e$t.URI=e$m)}),e$D.load(e$Y,"text")})}(e$m)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$y,e$D,e$I){e$I.un,e$I.uns;var e$t=e$I.static,e$l=e$I.class,e$E=e$I.getset,e$Y=(e$I.__newvec,laya.display.Animation),e$w=(laya.utils.Browser,laya.utils.ClassUtils),e$B=laya.filters.ColorFilter,e$o=laya.utils.Ease,e$r=laya.events.Event,e$f=(laya.events.EventDispatcher,laya.display.css.Font),e$_=laya.display.FrameAnimation,e$m=laya.display.Graphics,e$i=laya.utils.Handler,e$R=laya.display.Input,e$U=laya.net.Loader,e$G=(laya.display.Node,laya.maths.Point),e$W=laya.maths.Rectangle,e$e=laya.renders.Render,e$v=laya.display.Sprite,e$c=laya.display.Text,e$S=laya.resource.Texture,e$z=laya.utils.Tween,e$A=laya.utils.Utils,e$J=laya.utils.WeakObject;e$I.interface("laya.ui.IItem"),e$I.interface("laya.ui.ISelect"),e$I.interface("laya.ui.IRender"),e$I.interface("laya.ui.IComponent"),e$I.interface("laya.ui.IBox","IComponent");var e$a=function(){function e$D(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return e$l(e$D,"laya.ui.LayoutStyle"),e$t(e$D,["EMPTY",function(){return this.EMPTY=new e$D}]),e$D}(),e$p=function(){function e$D(){}return e$l(e$D,"laya.ui.Styles"),e$D.labelColor="#000000",e$D.buttonStateNum=3,e$D.scrollBarMinNum=15,e$D.scrollBarDelayTime=500,e$t(e$D,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),e$D}(),e$F=function(){function e$y(){}return e$l(e$y,"laya.ui.UIUtils"),e$y.fillArray=function(e$D,e$m,e$Y){var e$t=e$D.concat();if(e$m)for(var e$y=e$m.split(","),e$l=0,e$E=Math.min(e$t.length,e$y.length);e$l<e$E;e$l++){var e$B=e$y[e$l];e$t[e$l]="true"==e$B||"false"!=e$B&&e$B,null!=e$Y&&(e$t[e$l]=e$Y(e$B))}return e$t},e$y.toColor=function(e$D){return e$A.toHexColor(e$D)},e$y.gray=function(e$D,e$m){void 0===e$m&&(e$m=!0),e$m?e$y.addFilter(e$D,e$y.grayFilter):e$y.clearFilter(e$D,e$B)},e$y.addFilter=function(e$D,e$m){var e$Y=e$D.filters||[];e$Y.push(e$m),e$D.filters=e$Y},e$y.clearFilter=function(e$D,e$m){var e$Y=e$D.filters;if(null!=e$Y&&0<e$Y.length){for(var e$t=e$Y.length-1;-1<e$t;e$t--){var e$y=e$Y[e$t];e$I.__typeof(e$y,e$m)&&e$Y.splice(e$t,1)}e$D.filters=e$Y}},e$y._getReplaceStr=function(e$D){return e$y.escapeSequence[e$D]},e$y.adptString=function(e$D){return e$D.replace(/\\(\w)/g,e$y._getReplaceStr)},e$y.getBindFun=function(e$D){var e$m=e$y._funMap.get(e$D);if(null==e$m){var e$Y='"'+e$D+'"',e$t="(function(data){if(data==null)return;with(data){try{\nreturn "+(e$Y=e$Y.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";e$m=e$I._runScript(e$t),e$y._funMap.set(e$D,e$m)}return e$m},e$t(e$y,["grayFilter",function(){return this.grayFilter=new e$B([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new e$J}]),e$y}(),e$s=function(){function e$D(){}return e$l(e$D,"UIConfig"),e$D.touchScrollEnable=!0,e$D.mouseWheelEnable=!0,e$D.showButtons=!0,e$D.popupBgColor="#000000",e$D.popupBgAlpha=.5,e$D.closeDialogOnSide=!0,e$D}(),e$Q=function(e$Y){function e$W(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,e$W.__super.call(this),this._weakKeys=[]}e$l(e$W,"laya.ui.AutoBitmap",e$Y);var e$D=e$W.prototype;return e$D.destroy=function(){if(e$U.clearObject(this,this._weakKey),this._weakKeys){for(var e$D=0,e$m=this._weakKeys.length;e$D<e$m;++e$D)e$U.clearObject(this,this._weakKeys[e$D]);this._weakKeys=null}e$Y.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},e$D._setChanged=function(){this._isChanged||(this._isChanged=!0,e$I.timer.callLater(this,this.changeSource))},e$D.changeSource=function(){this._isChanged=!1;var e$D=this._source;if(e$D&&e$D.bitmap){var e$m=this.width,e$Y=this.height,e$t=this._sizeGrid,e$y=e$D.sourceWidth,e$l=e$D.sourceHeight;if(!e$t||e$y===e$m&&e$l===e$Y)this.cleanByTexture(e$D,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,e$m,e$Y);else{e$U.clearObject(this,this._weakKey),e$D.$_GID||(e$D.$_GID=e$A.getGID());var e$E=e$D.$_GID+"."+e$m+"."+e$Y+"."+e$t.join("."),e$B=e$U.findObject(e$E);if(e$A.isOKCmdList(e$B))return this._weakKey=e$E,e$U.keepObject(this,this._weakKey),void(this.cmds=e$B);this.clear();var e$o,e$r,e$f=e$t[0],e$_=e$t[1],e$i=e$t[2],e$R=e$t[3],e$G=e$t[4],e$I=!1;if(e$m==e$y&&(e$R=e$_=0),e$Y==e$l&&(e$f=e$i=0),e$m<e$R+e$_){var e$w=e$m;e$I=!0,e$m=e$R+e$_,this.save(),this.clipRect(0,0,e$w,e$Y)}e$R&&e$f&&(e$o=e$W.getTexture(e$D,0,0,e$R,e$f),e$r=this._weakKeys[0],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[0]=e$o.weakKey),this.drawTexture(e$o,0,0,e$R,e$f)):(e$U.clearObject(this,e$r),this._weakKeys[0]="")),e$_&&e$f&&(e$o=e$W.getTexture(e$D,e$y-e$_,0,e$_,e$f),e$r=this._weakKeys[1],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[1]=e$o.weakKey),this.drawTexture(e$o,e$m-e$_,0,e$_,e$f)):(e$U.clearObject(this,e$r),this._weakKeys[1]="")),e$R&&e$i&&(e$o=e$W.getTexture(e$D,0,e$l-e$i,e$R,e$i),e$r=this._weakKeys[2],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[2]=e$o.weakKey),this.drawTexture(e$o,0,e$Y-e$i,e$R,e$i)):(e$U.clearObject(this,e$r),this._weakKeys[2]="")),e$_&&e$i&&(e$o=e$W.getTexture(e$D,e$y-e$_,e$l-e$i,e$_,e$i),e$r=this._weakKeys[3],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[3]=e$o.weakKey),this.drawTexture(e$o,e$m-e$_,e$Y-e$i,e$_,e$i)):(e$U.clearObject(this,e$r),this._weakKeys[3]="")),e$f&&(e$o=e$W.getTexture(e$D,e$R,0,e$y-e$R-e$_,e$f),e$r=this._weakKeys[4],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[4]=e$o.weakKey),this.drawBitmap(e$G,e$o,e$R,0,e$m-e$R-e$_,e$f)):(e$U.clearObject(this,e$r),this._weakKeys[4]="")),e$i&&(e$o=e$W.getTexture(e$D,e$R,e$l-e$i,e$y-e$R-e$_,e$i),e$r=this._weakKeys[5],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[5]=e$o.weakKey),this.drawBitmap(e$G,e$o,e$R,e$Y-e$i,e$m-e$R-e$_,e$i)):(e$U.clearObject(this,e$r),this._weakKeys[5]="")),e$R&&(e$o=e$W.getTexture(e$D,0,e$f,e$R,e$l-e$f-e$i),e$r=this._weakKeys[6],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[6]=e$o.weakKey),this.drawBitmap(e$G,e$o,0,e$f,e$R,e$Y-e$f-e$i)):(e$U.clearObject(this,e$r),this._weakKeys[6]="")),e$_&&(e$o=e$W.getTexture(e$D,e$y-e$_,e$f,e$_,e$l-e$f-e$i),e$r=this._weakKeys[7],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[7]=e$o.weakKey),this.drawBitmap(e$G,e$o,e$m-e$_,e$f,e$_,e$Y-e$f-e$i)):(e$U.clearObject(this,e$r),this._weakKeys[7]="")),e$o=e$W.getTexture(e$D,e$R,e$f,e$y-e$R-e$_,e$l-e$f-e$i),e$r=this._weakKeys[8],e$o?(e$r!=e$o.weakKey&&(e$U.clearObject(this,e$r),e$U.keepObject(this,e$o.weakKey),this._weakKeys[8]=e$o.weakKey),this.drawBitmap(e$G,e$o,e$R,e$f,e$m-e$R-e$_,e$Y-e$f-e$i)):(e$U.clearObject(this,e$r),this._weakKeys[8]=""),e$I&&this.restore(),this.autoCacheCmd&&!e$e.isConchApp&&(e$U.saveObject(e$E,this.cmds,null),this._weakKey=e$E,e$U.keepObject(this,this._weakKey))}this._repaint()}},e$D.drawBitmap=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=0),e$y<.1||e$l<.1||(!e$D||e$m.width==e$y&&e$m.height==e$l?this.drawTexture(e$m,e$Y,e$t,e$y,e$l):this.fillTexture(e$m,e$Y,e$t,e$y,e$l))},e$D.clear=function(e$D){void 0===e$D&&(e$D=!0),e$Y.prototype.clear.call(this,!1)},e$E(0,e$D,"sizeGrid",function(){return this._sizeGrid},function(e$D){this._sizeGrid=e$D,this._setChanged()}),e$E(0,e$D,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(e$D){this._width!=e$D&&(this._width=e$D,this._setChanged())}),e$E(0,e$D,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(e$D){this._height!=e$D&&(this._height=e$D,this._setChanged())}),e$E(0,e$D,"source",function(){return this._source},function(e$D){e$D?(this._source=e$D,this._setChanged()):(this._source=null,this.clear())}),e$W.getTexture=function(e$D,e$m,e$Y,e$t,e$y){e$t<=0&&(e$t=1),e$y<=0&&(e$y=1),e$D.$_GID||(e$D.$_GID=e$A.getGID());var e$l=e$D.$_GID+"."+e$m+"."+e$Y+"."+e$t+"."+e$y,e$E=e$U.findObject(e$l);if((!e$E||!e$E.source)&&(e$E=e$S.createFromTexture(e$D,e$m,e$Y,e$t,e$y))){if(e$D.alphaTexture){var e$B=e$D.width/e$D.alphaTexture.width;e$E.alphaTexture=e$S.createFromTexture(e$D.alphaTexture,e$m/e$B,e$Y/e$B,e$t/e$B,e$y/e$B)}e$U.saveObject(e$l,e$E),e$E.weakKey=e$l}return e$E},e$W}(e$m),e$T=(function(e$D){function e$m(){e$m.__super.call(this)}e$l(e$m,"laya.ui.UIEvent",e$r),e$m.SHOW_TIP="showtip",e$m.HIDE_TIP="hidetip"}(),function(e$m){function e$D(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,e$D.__super.call(this),this._layout=e$a.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}e$l(e$D,"laya.ui.Component",e$m);var e$Y=e$D.prototype;return e$I.imps(e$Y,{"laya.ui.IComponent":!0}),e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},e$Y.preinitialize=function(){},e$Y.createChildren=function(){},e$Y.initialize=function(){},e$Y.callLater=function(e$D,e$m){e$I.timer.callLater(this,e$D,e$m)},e$Y.runCallLater=function(e$D){e$I.timer.runCallLater(this,e$D)},e$Y.commitMeasure=function(){},e$Y.changeSize=function(){this.event("resize")},e$Y.getLayout=function(){return this._layout===e$a.EMPTY&&(this._layout=new e$a),this._layout},e$Y._setLayoutEnabled=function(e$D){this._layout&&this._layout.enable!=e$D&&(this._layout.enable=e$D,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},e$Y.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},e$Y.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},e$Y.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},e$Y.resetLayoutX=function(){var e$D=this._layout;if(isNaN(e$D.anchorX)||(this.pivotX=e$D.anchorX*this.width),this.layoutEnabled){var e$m=this.parent;e$m&&(isNaN(e$D.centerX)?isNaN(e$D.left)?isNaN(e$D.right)||(this.x=Math.round(e$m.width-this.displayWidth-e$D.right+this.pivotX*this.scaleX)):(this.x=Math.round(e$D.left+this.pivotX*this.scaleX),isNaN(e$D.right)||(this.width=(e$m._width-e$D.left-e$D.right)/(this.scaleX||.01))):this.x=Math.round(.5*(e$m.width-this.displayWidth)+e$D.centerX+this.pivotX*this.scaleX))}},e$Y.resetLayoutY=function(){var e$D=this._layout;if(isNaN(e$D.anchorY)||(this.pivotY=e$D.anchorY*this.height),this.layoutEnabled){var e$m=this.parent;e$m&&(isNaN(e$D.centerY)?isNaN(e$D.top)?isNaN(e$D.bottom)||(this.y=Math.round(e$m.height-this.displayHeight-e$D.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(e$D.top+this.pivotY*this.scaleY),isNaN(e$D.bottom)||(this.height=(e$m._height-e$D.top-e$D.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(e$m.height-this.displayHeight)+e$D.centerY+this.pivotY*this.scaleY))}},e$Y.onMouseOver=function(e$D){e$I.stage.event("showtip",this._toolTip)},e$Y.onMouseOut=function(e$D){e$I.stage.event("hidetip",this._toolTip)},e$E(0,e$Y,"displayWidth",function(){return this.width*this.scaleX}),e$E(0,e$Y,"width",function(){return this._width?this._width:this.measureWidth},function(e$D){this._width!=e$D&&(this._width=e$D,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),e$E(0,e$Y,"measureWidth",function(){var e$D=0;this.commitMeasure();for(var e$m=this.numChildren-1;-1<e$m;e$m--){var e$Y=this.getChildAt(e$m);e$Y.visible&&(e$D=Math.max(e$Y.x+e$Y.width*e$Y.scaleX,e$D))}return e$D}),e$E(0,e$Y,"displayHeight",function(){return this.height*this.scaleY}),e$E(0,e$Y,"height",function(){return this._height?this._height:this.measureHeight},function(e$D){this._height!=e$D&&(this._height=e$D,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),e$E(0,e$Y,"dataSource",function(){return this._dataSource},function(e$D){for(var e$m in this._dataSource=e$D,this._dataSource)this.hasOwnProperty(e$m)&&"function"!=typeof this[e$m]&&(this[e$m]=this._dataSource[e$m])}),e$E(0,e$Y,"scaleY",e$m.prototype._$get_scaleY,function(e$D){e$I.superGet(e$v,this,"scaleY")!=e$D&&(e$I.superSet(e$v,this,"scaleY",e$D),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),e$E(0,e$Y,"measureHeight",function(){var e$D=0;this.commitMeasure();for(var e$m=this.numChildren-1;-1<e$m;e$m--){var e$Y=this.getChildAt(e$m);e$Y.visible&&(e$D=Math.max(e$Y.y+e$Y.height*e$Y.scaleY,e$D))}return e$D}),e$E(0,e$Y,"scaleX",e$m.prototype._$get_scaleX,function(e$D){e$I.superGet(e$v,this,"scaleX")!=e$D&&(e$I.superSet(e$v,this,"scaleX",e$D),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),e$E(0,e$Y,"top",function(){return this._layout.top},function(e$D){e$D!=this._layout.top&&(this.getLayout().top=e$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$E(0,e$Y,"bottom",function(){return this._layout.bottom},function(e$D){e$D!=this._layout.bottom&&(this.getLayout().bottom=e$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$E(0,e$Y,"left",function(){return this._layout.left},function(e$D){e$D!=this._layout.left&&(this.getLayout().left=e$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$E(0,e$Y,"right",function(){return this._layout.right},function(e$D){e$D!=this._layout.right&&(this.getLayout().right=e$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$E(0,e$Y,"centerX",function(){return this._layout.centerX},function(e$D){e$D!=this._layout.centerX&&(this.getLayout().centerX=e$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$E(0,e$Y,"centerY",function(){return this._layout.centerY},function(e$D){e$D!=this._layout.centerY&&(this.getLayout().centerY=e$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$E(0,e$Y,"anchorX",function(){return this._layout.anchorX},function(e$D){e$D!=this._layout.anchorX&&(this.getLayout().anchorX=e$D,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$E(0,e$Y,"anchorY",function(){return this._layout.anchorY},function(e$D){e$D!=this._layout.anchorY&&(this.getLayout().anchorY=e$D,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$E(0,e$Y,"tag",function(){return this._tag},function(e$D){this._tag=e$D}),e$E(0,e$Y,"toolTip",function(){return this._toolTip},function(e$D){this._toolTip!=e$D&&(null!=(this._toolTip=e$D)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),e$E(0,e$Y,"comXml",function(){return this._comXml},function(e$D){this._comXml=e$D}),e$E(0,e$Y,"gray",function(){return this._gray},function(e$D){e$D!==this._gray&&(this._gray=e$D,e$F.gray(this,e$D))}),e$E(0,e$Y,"disabled",function(){return this._disabled},function(e$D){e$D!==this._disabled&&(this.gray=this._disabled=e$D,this.mouseEnabled=!e$D)}),e$D}(e$v)),e$N=function(e$D){function e$m(){this.lockLayer=null,this.popupEffect=function(e$D){e$D.scale(1,1),e$z.from(e$D,{x:e$I.stage.width/2,y:e$I.stage.height/2,scaleX:0,scaleY:0},300,e$o.backOut,e$i.create(this,this.doOpen,[e$D]))},this.closeEffect=function(e$D,e$m){e$z.to(e$D,{x:e$I.stage.width/2,y:e$I.stage.height/2,scaleX:0,scaleY:0},300,e$o.strongOut,e$i.create(this,this.doClose,[e$D,e$m]))},e$m.__super.call(this),this.maskLayer=new e$v,this.popupEffectHandler=e$i.create(this,this.popupEffect,null,!1),this.closeEffectHandler=e$i.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,e$I.stage.addChild(this),e$I.stage.on("resize",this,this._onResize),e$s.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}e$l(e$m,"laya.ui.DialogManager",e$v);var e$Y=e$m.prototype;return e$Y._closeOnSide=function(){var e$D=this.getChildAt(this.numChildren-1);e$D instanceof laya.ui.Dialog&&e$D.close("side")},e$Y.setLockView=function(e$D){this.lockLayer||(this.lockLayer=new e$C,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(e$I.stage.width,e$I.stage.height)),this.lockLayer.removeChildren(),e$D&&(e$D.centerX=e$D.centerY=0,this.lockLayer.addChild(e$D))},e$Y._onResize=function(e$D){var e$m=this.maskLayer.width=e$I.stage.width,e$Y=this.maskLayer.height=e$I.stage.height;this.lockLayer&&this.lockLayer.size(e$m,e$Y),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,e$m,e$Y,e$s.popupBgColor),this.maskLayer.alpha=e$s.popupBgAlpha;for(var e$t=this.numChildren-1;-1<e$t;e$t--){var e$y=this.getChildAt(e$t);e$y.popupCenter&&this._centerDialog(e$y)}},e$Y._centerDialog=function(e$D){e$D.x=Math.round((e$I.stage.width-e$D.width>>1)+e$D.pivotX),e$D.y=Math.round((e$I.stage.height-e$D.height>>1)+e$D.pivotY)},e$Y.open=function(e$D,e$m,e$Y){void 0===e$m&&(e$m=!1),void 0===e$Y&&(e$Y=!1),e$m&&this._closeAll(),e$D.popupCenter&&this._centerDialog(e$D),this.addChild(e$D),(e$D.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),e$Y&&null!=e$D.popupEffect?e$D.popupEffect.runWith(e$D):this.doOpen(e$D),this.event("open")},e$Y.doOpen=function(e$D){e$D.onOpened()},e$Y.lock=function(e$D){this.lockLayer&&(e$D?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},e$Y.close=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=!1),e$Y&&null!=e$D.closeEffect?e$D.closeEffect.runWith([e$D,e$m]):this.doClose(e$D,e$m),this.event("close")},e$Y.doClose=function(e$D,e$m){e$D.removeSelf(),e$D.isModal&&this._checkMask(),e$D.closeHandler&&e$D.closeHandler.runWith(e$m),e$D.onClosed(e$m)},e$Y.closeAll=function(){this._closeAll(),this.event("close")},e$Y._closeAll=function(){for(var e$D=this.numChildren-1;-1<e$D;e$D--){var e$m=this.getChildAt(e$D);e$m&&null!=e$m.close&&this.doClose(e$m)}},e$Y.getDialogsByGroup=function(e$D){for(var e$m=[],e$Y=this.numChildren-1;-1<e$Y;e$Y--){var e$t=this.getChildAt(e$Y);e$t&&e$t.group===e$D&&e$m.push(e$t)}return e$m},e$Y.closeByGroup=function(e$D){for(var e$m=[],e$Y=this.numChildren-1;-1<e$Y;e$Y--){var e$t=this.getChildAt(e$Y);e$t&&e$t.group===e$D&&(e$t.close(),e$m.push(e$t))}return e$m},e$Y._checkMask=function(){this.maskLayer.removeSelf();for(var e$D=this.numChildren-1;-1<e$D;e$D--){var e$m=this.getChildAt(e$D);if(e$m&&e$m.isModal)return void this.addChildAt(this.maskLayer,e$D)}},e$m}(),e$C=function(e$D){function e$m(){e$m.__super.call(this)}e$l(e$m,"laya.ui.Box",e$D);var e$Y=e$m.prototype;return e$I.imps(e$Y,{"laya.ui.IBox":!0}),e$E(0,e$Y,"dataSource",e$D.prototype._$get_dataSource,function(e$D){for(var e$m in this._dataSource=e$D){var e$Y=this.getChildByName(e$m);e$Y?e$Y.dataSource=e$D[e$m]:this.hasOwnProperty(e$m)&&"function"!=typeof this[e$m]&&(this[e$m]=e$D[e$m])}}),e$m}(e$T),e$O=function(e$m){function e$Y(e$D,e$m){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,e$Y.__super.call(this),this._labelColors=e$p.buttonLabelColors,this._stateNum=e$p.buttonStateNum,void 0===e$m&&(e$m=""),this.skin=e$D,this.label=e$m}e$l(e$Y,"laya.ui.Button",e$m);var e$D=e$Y.prototype;return e$I.imps(e$D,{"laya.ui.ISelect":!0}),e$D.destroy=function(e$D){this.clearEvent(),e$U.clearCache(this,this._skin),e$U.clearObject(this,this._weakKey),void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e$D),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},e$D.clearEvent=function(){this._skin&&e$y.atalsNotify&&e$y.atalsNotify.off(this._skin,this,this._setBtnSource)},e$D.createChildren=function(){this.graphics=this._bitmap=new e$Q},e$D.createText=function(){this._text||(this._text=new e$c,this._text.overflow=e$c.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},e$D.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},e$D.onMouse=function(e$D){if(!1!==this.toggle||!this._selected)return"click"===e$D.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=e$Y.stateMap[e$D.type]))},e$D.changeClips=function(){var e$D=e$U.getRes(this._skin);if(e$D)if(this._skin&&""!=this._skin){e$U.clearObject(this,this._weakKey);var e$m=e$D.sourceWidth,e$Y=e$D.sourceHeight/this._stateNum;e$D.$_GID||(e$D.$_GID=e$A.getGID());var e$t=e$D.$_GID+"-"+this._stateNum,e$y=e$U.findObject(e$t);if(e$A.isOkTextureList(e$y)||(e$y=null),e$y)this._weakKey=e$t,e$U.keepObject(this,this._weakKey),this._sources=e$y;else{if(this._sources=[],1===this._stateNum)this._sources.push(e$D);else for(var e$l=0;e$l<this._stateNum;e$l++){var e$E=e$S.createFromTexture(e$D,0,e$Y*e$l,e$m,e$Y);if(e$D.alphaTexture){var e$B=e$D.width/e$D.alphaTexture.width;e$E.alphaTexture=e$S.createFromTexture(e$D.alphaTexture,0/e$B,e$Y*e$l/e$B,e$m/e$B,e$Y/e$B)}this._sources.push(e$E)}e$U.saveObject(e$t,this._sources),this._weakKey=e$t,e$U.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||e$m,this._bitmap.height=this._height||e$Y,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e$m)}else console.warn("lose skin ",this._skin,this.name,this.__className)},e$D.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var e$D=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[e$D]),this.label&&(this._text.color=this._labelColors[e$D],this._strokeColors&&(this._text.strokeColor=this._strokeColors[e$D]))},e$D._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},e$E(0,e$D,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(e$D){this.createText(),this._text.strokeColor=e$D}),e$E(0,e$D,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){if(this._skin!=e$D)if(this.clearEvent(),e$U.clearCache(this,this._skin),this._skin=e$D,e$U.keepCache(this,this._skin),e$U.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var e$m=e$y.resAtalsObj&&e$y.resAtalsObj[this._skin];e$m?(e$y.atalsNotify&&e$y.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=e$m.sourceW),0==this.height&&(this.height=e$m.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),e$D._setBtnSource=function(e$D,e$m){e$D===this._skin&&e$m&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},e$E(0,e$D,"state",function(){return this._state},function(e$D){this._state!=e$D&&(this._state=e$D,this._setStateChanged())}),e$E(0,e$D,"text",function(){return this.createText(),this._text}),e$E(0,e$D,"stateNum",function(){return this._stateNum},function(e$D){"string"==typeof e$D&&(e$D=parseInt(e$D)),this._stateNum!=e$D&&(this._stateNum=e$D<1?1:3<e$D?3:e$D,this.callLater(this.changeClips))}),e$E(0,e$D,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(e$D){this._strokeColors=e$F.fillArray(e$p.buttonLabelColors,e$D,String),this._setStateChanged()}),e$E(0,e$D,"labelColors",function(){return this._labelColors.join(",")},function(e$D){this._labelColors=e$F.fillArray(e$p.buttonLabelColors,e$D,String),this._setStateChanged()}),e$E(0,e$D,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),e$E(0,e$D,"label",function(){return this._text?this._text.text:null},function(e$D){(this._text||e$D)&&(this.createText(),this._text.text!=e$D&&(e$D&&!this._text.parent&&this.addChild(this._text),this._text.text=(e$D+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),e$E(0,e$D,"selected",function(){return this._selected},function(e$D){this._selected!=e$D&&(this._selected=e$D,this.state=this._selected?2:0,this.event("change"))}),e$E(0,e$D,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(e$D){this.createText(),this._text.padding=e$F.fillArray(e$p.labelPadding,e$D,Number)}),e$E(0,e$D,"labelSize",function(){return this.createText(),this._text.fontSize},function(e$D){this.createText(),this._text.fontSize=e$D}),e$E(0,e$D,"labelStroke",function(){return this.createText(),this._text.stroke},function(e$D){this.createText(),this._text.stroke=e$D}),e$E(0,e$D,"labelBold",function(){return this.createText(),this._text.bold},function(e$D){this.createText(),this._text.bold=e$D}),e$E(0,e$D,"labelFont",function(){return this.createText(),this._text.font},function(e$D){this.createText(),this._text.font=e$D}),e$E(0,e$D,"labelAlign",function(){return this.createText(),this._text.align},function(e$D){this.createText(),this._text.align=e$D}),e$E(0,e$D,"clickHandler",function(){return this._clickHandler},function(e$D){this._clickHandler=e$D}),e$E(0,e$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$D){this._bitmap.sizeGrid=e$F.fillArray(e$p.defaultSizeGrid,e$D,Number)}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$T,this,"width",e$D),this._autoSize&&(this._bitmap.width=e$D,this._text&&(this._text.width=e$D))}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$T,this,"height",e$D),this._autoSize&&(this._bitmap.height=e$D,this._text&&(this._text.height=e$D))}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)||"string"==typeof e$D?this.label=e$D+"":e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(e$D){this._bitmap._offset=e$D?e$F.fillArray([1,1],e$D,Number):[]}),e$t(e$Y,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e$Y}(e$T),e$h=function(e$m){function e$t(e$D,e$m,e$Y){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,e$t.__super.call(this),void 0===e$m&&(e$m=1),void 0===e$Y&&(e$Y=1),this._clipX=e$m,this._clipY=e$Y,this.skin=e$D}e$l(e$t,"laya.ui.Clip",e$m);var e$D=e$t.prototype;return e$D.destroy=function(e$D){this.clearEvent(),this.clearLoad(),e$U.clearCache(this,this._skin),e$U.clearObject(this,this._weakKey),void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},e$D.dispose=function(){this.destroy(!0),e$I.loader.clearRes(this._skin)},e$D.createChildren=function(){this.graphics=this._bitmap=new e$Q},e$D._onDisplay=function(e$D){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},e$D.changeClip=function(){if(this._clipChanged=!1,this._skin){var e$D=e$U.getRes(this._skin);if(e$D)this.loadComplete(this._skin,e$D);else{if(e$y.resAtalsObj&&e$y.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=e$i.create(this,this.loadComplete,[this._skin]),this._progress=null,e$I.loader.load(this._skin,this._complete,this._progress)}}},e$D.loadComplete=function(e$D,e$m){if(e$D===this._skin&&e$m){e$U.clearObject(this,this._weakKey);var e$Y=this._clipWidth||Math.ceil(e$m.sourceWidth/this._clipX),e$t=this._clipHeight||Math.ceil(e$m.sourceHeight/this._clipY),e$y=this._skin+e$Y+e$t,e$l=e$U.findObject(e$y);if(e$A.isOkTextureList(e$l)||(e$l=null),e$l)this._weakKey=e$y,e$U.keepObject(this,this._weakKey),this._sources=e$l;else{this._sources=[];for(var e$E=0;e$E<this._clipY;e$E++)for(var e$B=0;e$B<this._clipX;e$B++){var e$o=e$S.createFromTexture(e$m,e$Y*e$B,e$t*e$E,e$Y,e$t);if(e$m.alphaTexture){var e$r=e$m.width/e$m.alphaTexture.width;e$o.alphaTexture=e$S.createFromTexture(e$m.alphaTexture,e$Y*e$B/e$r,e$t*e$E/e$r,e$Y/e$r,e$t/e$r)}this._sources.push(e$o)}e$U.saveObject(e$y,this._sources),this._weakKey=e$y,e$U.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},e$D.play=function(e$D,e$m){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=-1),this._isPlaying=!0,this.index=e$D,this._toIndex=e$m,this._index++,e$I.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},e$D._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},e$D.stop=function(){this._isPlaying=!1,e$I.timer.clear(this,this._loop),this.event("complete")},e$D._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},e$E(0,e$D,"interval",function(){return this._interval},function(e$D){this._interval!=e$D&&(this._interval=e$D,this._isPlaying&&this.play())}),e$D.clearEvent=function(){this._skin&&e$y.atalsNotify&&e$y.atalsNotify.off(this._skin,this,this._setBtnSource)},e$D.clearLoad=function(){this._skin&&((this._complete||this._progress)&&e$I.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},e$E(0,e$D,"skin",function(){return this._skin},function(e$D){if(this._skin!=e$D)if(this.clearLoad(),this.clearEvent(),e$U.clearCache(this,this._skin),this._skin=e$D){e$U.keepCache(this,this._skin);var e$m=e$U.getRes(e$D),e$Y=e$y.resAtalsObj&&e$y.resAtalsObj[this._skin];!e$m&&e$Y?e$y.atalsNotify&&e$y.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),e$D._setBtnSource=function(e$D,e$m){e$D===this._skin&&e$m&&(this.loadComplete(e$D,e$m),this.clearEvent())},e$E(0,e$D,"sources",function(){return this._sources},function(e$D){this._sources=e$D,this.index=this._index,this.event("loaded")}),e$E(0,e$D,"clipX",function(){return this._clipX},function(e$D){this._clipX=e$D||1,this._setClipChanged()}),e$E(0,e$D,"clipY",function(){return this._clipY},function(e$D){this._clipY=e$D||1,this._setClipChanged()}),e$E(0,e$D,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),e$E(0,e$D,"clipWidth",function(){return this._clipWidth},function(e$D){this._clipWidth=e$D,this._setClipChanged()}),e$E(0,e$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$D){this._bitmap.sizeGrid=e$F.fillArray(e$p.defaultSizeGrid,e$D,Number)}),e$E(0,e$D,"group",function(){return this._group},function(e$D){e$D&&this._skin&&e$U.setGroup(this._skin,e$D),this._group=e$D}),e$E(0,e$D,"clipHeight",function(){return this._clipHeight},function(e$D){this._clipHeight=e$D,this._setClipChanged()}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$T,this,"width",e$D),this._bitmap.width=e$D}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$T,this,"height",e$D),this._bitmap.height=e$D}),e$E(0,e$D,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),e$E(0,e$D,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),e$E(0,e$D,"index",function(){return this._index},function(e$D){this._index=e$D,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[e$D]),this.event("change")}),e$E(0,e$D,"autoPlay",function(){return this._autoPlay},function(e$D){this._autoPlay!=e$D&&((this._autoPlay=e$D)?this.play():this.stop())}),e$E(0,e$D,"isPlaying",function(){return this._isPlaying},function(e$D){this._isPlaying=e$D}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)&&Math.floor(e$D)==e$D||"string"==typeof e$D?this.index=parseInt(e$D):e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"bitmap",function(){return this._bitmap}),e$t}(e$T),e$X=function(e$m){function e$D(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,e$D.__super.call(this)}e$l(e$D,"laya.ui.ColorPicker",e$m);var e$Y=e$D.prototype;return e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._colorPanel&&this._colorPanel.destroy(e$D),this._colorButton&&this._colorButton.destroy(e$D),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},e$Y.createChildren=function(){this.addChild(this._colorButton=new e$O),this._colorPanel=new e$C,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new e$v),this._colorPanel.addChild(this._colorBlock=new e$v),this._colorPanel.addChild(this._colorInput=new e$R)},e$Y.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},e$Y.onPanelMouseDown=function(e$D){e$D.stopPropagation()},e$Y.changePanel=function(){this._panelChanged=!1;var e$D=this._colorPanel.graphics;e$D.clear(),e$D.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(e$D=this._colorTiles.graphics).clear();for(var e$m=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],e$Y=0;e$Y<12;e$Y++)for(var e$t=0;e$t<20;e$t++){var e$y=0;e$y=0===e$t?e$m[e$Y]:1===e$t?0:51*(((3*e$Y+e$t/6)%3<<0)+3*(e$Y/6<<0))<<16|e$t%6*51<<8|(e$Y<<0)%6*51;var e$l=e$F.toColor(e$y);this._colors.push(e$l);var e$E=e$t*this._gridSize,e$B=e$Y*this._gridSize;e$D.drawRect(e$E,e$B,this._gridSize,this._gridSize,e$l,"#000000")}},e$Y.onColorButtonClick=function(e$D){this._colorPanel.parent?this.close():this.open()},e$Y.open=function(){var e$D=this.localToGlobal(new e$G),e$m=e$D.x+this._colorPanel.width<=e$I.stage.width?e$D.x:e$I.stage.width-this._colorPanel.width,e$Y=e$D.y+this._colorButton.height;e$Y=e$Y+this._colorPanel.height<=e$I.stage.height?e$Y:e$D.y-this._colorPanel.height,this._colorPanel.pos(e$m,e$Y),this._colorPanel.zOrder=1001,e$I._currentStage.addChild(this._colorPanel),e$I.stage.on("mousedown",this,this.removeColorBox)},e$Y.close=function(){e$I.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},e$Y.removeColorBox=function(e$D){this.close()},e$Y.onColorFieldKeyDown=function(e$D){13==e$D.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),e$D.stopPropagation())},e$Y.onColorInputChange=function(e$D){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},e$Y.onColorTilesClick=function(e$D){this.selectedColor=this.getColorByMouse(),this.close()},e$Y.onColorTilesMouseMove=function(e$D){this._colorInput.focus=!1;var e$m=this.getColorByMouse();this._colorInput.text=e$m,this.drawBlock(e$m)},e$Y.getColorByMouse=function(){var e$D=this._colorTiles.getMousePoint(),e$m=Math.floor(e$D.x/this._gridSize),e$Y=Math.floor(e$D.y/this._gridSize);return this._colors[20*e$Y+e$m]},e$Y.drawBlock=function(e$D){var e$m=this._colorBlock.graphics;e$m.clear();var e$Y=e$D||"#ffffff";e$m.drawRect(0,0,50,20,e$Y,this._borderColor),e$D||e$m.drawLine(0,0,50,20,"#ff0000")},e$Y.changeColor=function(){var e$D=this.graphics;e$D.clear();var e$m=this._selectedColor||"#000000";e$D.drawRect(0,0,this._colorButton.width,this._colorButton.height,e$m)},e$Y._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},e$E(0,e$Y,"inputBgColor",function(){return this._inputBgColor},function(e$D){this._inputBgColor=e$D,this._setPanelChanged()}),e$E(0,e$Y,"selectedColor",function(){return this._selectedColor},function(e$D){this._selectedColor!=e$D&&(this._selectedColor=this._colorInput.text=e$D,this.drawBlock(e$D),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",e$r.EMPTY.setTo("change",this,this)))}),e$E(0,e$Y,"skin",function(){return this._colorButton.skin},function(e$D){this._colorButton.skin=e$D,this.changeColor()}),e$E(0,e$Y,"bgColor",function(){return this._bgColor},function(e$D){this._bgColor=e$D,this._setPanelChanged()}),e$E(0,e$Y,"borderColor",function(){return this._borderColor},function(e$D){this._borderColor=e$D,this._setPanelChanged()}),e$E(0,e$Y,"inputColor",function(){return this._inputColor},function(e$D){this._inputColor=e$D,this._setPanelChanged()}),e$D}(e$T),e$P=function(e$m){function e$Y(e$D,e$m){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,e$Y.__super.call(this),this._itemColors=e$p.comboBoxItemColors,this.skin=e$D,this.labels=e$m}e$l(e$Y,"laya.ui.ComboBox",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._button&&this._button.destroy(e$D),this._list&&this._list.destroy(e$D),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},e$D.createChildren=function(){this.addChild(this._button=new e$O),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},e$D._createList=function(){this._list=new e$H,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},e$D._setListEvent=function(e$D){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=e$i.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},e$D.onListDown=function(e$D){e$D.stopPropagation()},e$D.onScrollBarDown=function(e$D){e$D.stopPropagation()},e$D.onButtonMouseDown=function(e$D){this.callLater(this.switchTo,[!this._isOpen])},e$D.changeList=function(){this._listChanged=!1;var e$D=this.width-2,e$m=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:e$D,height:this._itemHeight,fontSize:this._itemSize,color:e$m}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},e$D.onlistItemMouse=function(e$D,e$m){var e$Y=e$D.type;if("mouseover"===e$Y||"mouseout"===e$Y){if(this._isCustomList)return;var e$t=this._list.getCell(e$m);if(!e$t)return;var e$y=e$t.getChildByName("label");e$y&&("mouseover"===e$Y?(e$y.bgColor=this._itemColors[0],e$y.color=this._itemColors[1]):(e$y.bgColor=null,e$y.color=this._itemColors[2]))}else"click"===e$Y&&(this.selectedIndex=e$m,this.isOpen=!1)},e$D.switchTo=function(e$D){this.isOpen=e$D},e$D.changeOpen=function(){this.isOpen=!this._isOpen},e$D.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var e$D=this._list.graphics;e$D.clear(),e$D.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var e$m=this._list.array||[],e$Y=e$m.length=0,e$t=this._labels.length;e$Y<e$t;e$Y++)e$m.push({label:this._labels[e$Y]});this._list.height=this._listHeight,this._list.array=e$m},e$D.changeSelected=function(){this._button.label=this.selectedLabel},e$D._onStageMouseWheel=function(e$D){this._list&&!this._list.contains(e$D.target)&&this.removeList(null)},e$D.removeList=function(e$D){e$I.stage.off("mousedown",this,this.removeList),e$I.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},e$E(0,e$D,"selectedIndex",function(){return this._selectedIndex},function(e$D){this._selectedIndex!=e$D&&(this._selectedIndex=e$D,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[e$r.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),e$E(0,e$D,"measureHeight",function(){return this._button.height}),e$E(0,e$D,"skin",function(){return this._button.skin},function(e$D){this._button.skin!=e$D&&(this._button.skin=e$D,this._listChanged=!0)}),e$E(0,e$D,"measureWidth",function(){return this._button.width}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$T,this,"width",e$D),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),e$E(0,e$D,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(e$D){this.selectedIndex=this._labels.indexOf(e$D)}),e$E(0,e$D,"labels",function(){return this._labels.join(",")},function(e$D){0<this._labels.length&&(this.selectedIndex=-1),e$D?this._labels=e$D.split(","):this._labels.length=0,this._itemChanged=!0}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$T,this,"height",e$D),this._button.height=this._height}),e$E(0,e$D,"selectHandler",function(){return this._selectHandler},function(e$D){this._selectHandler=e$D}),e$E(0,e$D,"visibleNum",function(){return this._visibleNum},function(e$D){this._visibleNum=e$D,this._listChanged=!0}),e$E(0,e$D,"labelBold",function(){return this._button.text.bold},function(e$D){this._button.text.bold=e$D}),e$E(0,e$D,"itemColors",function(){return String(this._itemColors)},function(e$D){this._itemColors=e$F.fillArray(this._itemColors,e$D,String),this._listChanged=!0}),e$E(0,e$D,"itemSize",function(){return this._itemSize},function(e$D){this._itemSize=e$D,this._listChanged=!0}),e$E(0,e$D,"scrollBar",function(){return this.list.scrollBar}),e$E(0,e$D,"isOpen",function(){return this._isOpen},function(e$D){if(this._isOpen!=e$D)if(this._isOpen=e$D,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e$m=this.localToGlobal(e$G.TEMP.setTo(0,0)),e$Y=e$m.y+this._button.height;e$Y=e$Y+this._listHeight<=e$I.stage.height?e$Y:e$m.y-this._listHeight,this._list.pos(e$m.x,e$Y),this._list.zOrder=1001,e$I._currentStage.addChild(this._list),e$I.stage.once("mousedown",this,this.removeList),e$I.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),e$E(0,e$D,"scrollBarSkin",function(){return this._scrollBarSkin},function(e$D){this._scrollBarSkin=e$D}),e$E(0,e$D,"sizeGrid",function(){return this._button.sizeGrid},function(e$D){this._button.sizeGrid=e$D}),e$E(0,e$D,"button",function(){return this._button}),e$E(0,e$D,"list",function(){return this._list||this._createList(),this._list},function(e$D){e$D&&(e$D.removeSelf(),this._isCustomList=!0,this._list=e$D,this._setListEvent(e$D),this._itemHeight=e$D.getCell(0).height+e$D.spaceY)}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)&&Math.floor(e$D)==e$D||"string"==typeof e$D?this.selectedIndex=parseInt(e$D):e$D instanceof Array?this.labels=e$D.join(","):e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"labelColors",function(){return this._button.labelColors},function(e$D){this._button.labelColors!=e$D&&(this._button.labelColors=e$D)}),e$E(0,e$D,"labelPadding",function(){return this._button.text.padding.join(",")},function(e$D){this._button.text.padding=e$F.fillArray(e$p.labelPadding,e$D,Number)}),e$E(0,e$D,"labelSize",function(){return this._button.text.fontSize},function(e$D){this._button.text.fontSize=e$D}),e$E(0,e$D,"labelFont",function(){return this._button.text.font},function(e$D){this._button.text.font=e$D}),e$E(0,e$D,"stateNum",function(){return this._button.stateNum},function(e$D){this._button.stateNum=e$D}),e$Y}(e$T),e$u=function(e$m){function e$Y(e$D){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=200,this.elasticBackTime=100,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,e$Y.__super.call(this),this._showButtons=e$s.showButtons,this._touchScrollEnable=e$s.touchScrollEnable,this._mouseWheelEnable=e$s.mouseWheelEnable,this.skin=e$D,this.max=1}e$l(e$Y,"laya.ui.ScrollBar",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),this.stopScroll(),this.target=null,e$m.prototype.destroy.call(this,e$D),this.upButton&&this.upButton.destroy(e$D),this.downButton&&this.downButton.destroy(e$D),this.slider&&this.slider.destroy(e$D),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},e$D.createChildren=function(){this.addChild(this.slider=new e$L),this.addChild(this.upButton=new e$O),this.addChild(this.downButton=new e$O)},e$D.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},e$D.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},e$D.onButtonMouseDown=function(e$D){var e$m=e$D.currentTarget===this.upButton;this.slide(e$m),e$I.timer.once(e$p.scrollBarDelayTime,this,this.startLoop,[e$m]),e$I.stage.once("mouseup",this,this.onStageMouseUp)},e$D.startLoop=function(e$D){e$I.timer.frameLoop(1,this,this.slide,[e$D])},e$D.slide=function(e$D){e$D?this.value-=this._scrollSize:this.value+=this._scrollSize},e$D.onStageMouseUp=function(e$D){e$I.timer.clear(this,this.startLoop),e$I.timer.clear(this,this.slide)},e$D.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},e$D.changeSize=function(){e$m.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},e$D.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},e$D.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},e$D.setScroll=function(e$D,e$m,e$Y){this.runCallLater(this.changeSize),this.slider.setSlider(e$D,e$m,e$Y),this.slider.bar.visible=0<e$m,!this._hide&&this.autoHide&&(this.visible=!1)},e$D.onTargetMouseWheel=function(e$D){this.value-=e$D.delta*this._scrollSize,this.target=this._target},e$D.onTargetMouseDown=function(e$D){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new e$G),this._lastPoint.setTo(e$I.stage.mouseX,e$I.stage.mouseY),e$I.timer.clear(this,this.tweenMove),e$z.clearTween(this),e$I.stage.once("mouseup",this,this.onStageMouseUp2),e$I.stage.once("mouseout",this,this.onStageMouseUp2),e$I.timer.frameLoop(1,this,this.loop)},e$D.loop=function(){var e$D=e$I.stage.mouseY,e$m=e$I.stage.mouseX;if(this._lastOffset=this.isVertical?e$D-this._lastPoint.y:e$m-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?e$I.stage._canvasTransform.getScaleY():e$I.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e$m,this._lastPoint.y=e$D,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},e$D.onStageMouseUp2=function(e$D){if(e$I.stage.off("mouseup",this,this.onStageMouseUp2),e$I.stage.off("mouseout",this,this.onStageMouseUp2),e$I.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?e$z.to(this,{value:this.min},this.elasticBackTime,e$o.sineOut,e$i.create(this,this.elasticOver)):this._value>this.max&&e$z.to(this,{value:this.max},this.elasticBackTime,e$o.sineOut,e$i.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?e$I.stage.mouseY-this._lastPoint.y:e$I.stage.mouseX-this._lastPoint.x);for(var e$m=0,e$Y=Math.min(this._offsets.length,3),e$t=0;e$t<e$Y;e$t++)e$m+=this._offsets[this._offsets.length-1-e$t];if(this._lastOffset=e$m/e$Y,(e$m=Math.abs(this._lastOffset))<2)return void this.event("end");60<e$m&&(this._lastOffset=0<this._lastOffset?60:-60);var e$y=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));e$I.timer.frameLoop(1,this,this.tweenMove,[e$y])}},e$D.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&e$z.to(this,{alpha:0},500),this.event("end")},e$D.tweenMove=function(e$D){this._lastOffset*=this.rollRatio;var e$m=NaN;if(100<e$D&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,e$m=.5*-(this.min-e$D-this.value),this._lastOffset>e$m&&(this._lastOffset=e$m)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e$m=.5*-(this.max+e$D-this.value),this._lastOffset<e$m&&(this._lastOffset=e$m))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(e$I.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?e$z.to(this,{value:this.min},this.elasticBackTime,e$o.sineOut,e$i.create(this,this.elasticOver)):this._value>this.max?e$z.to(this,{value:this.max},this.elasticBackTime,e$o.sineOut,e$i.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&e$z.to(this,{alpha:0},500)}},e$D.stopScroll=function(){this.onStageMouseUp2(null),e$I.timer.clear(this,this.tweenMove),e$z.clearTween(this)},e$E(0,e$D,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){this._skin!=e$D&&(this._skin=e$D,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),e$E(0,e$D,"max",function(){return this.slider.max},function(e$D){this.slider.max=e$D}),e$E(0,e$D,"showButtons",function(){return this._showButtons},function(e$D){this._showButtons=e$D,this.callLater(this.changeScrollBar)}),e$E(0,e$D,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),e$E(0,e$D,"min",function(){return this.slider.min},function(e$D){this.slider.min=e$D}),e$E(0,e$D,"value",function(){return this._value},function(e$D){e$D!==this._value&&(this._value=e$D,this._isElastic||(this.slider._value!=e$D&&(this.slider._value=e$D,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),e$E(0,e$D,"isVertical",function(){return this.slider.isVertical},function(e$D){this.slider.isVertical=e$D}),e$E(0,e$D,"sizeGrid",function(){return this.slider.sizeGrid},function(e$D){this.slider.sizeGrid=e$D}),e$E(0,e$D,"scrollSize",function(){return this._scrollSize},function(e$D){this._scrollSize=e$D}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)||"string"==typeof e$D?this.value=Number(e$D):e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"thumbPercent",function(){return this._thumbPercent},function(e$D){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),e$D=1<=e$D?.99:e$D,this._thumbPercent=e$D,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*e$D,e$p.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*e$D,e$p.scrollBarMinNum))}),e$E(0,e$D,"target",function(){return this._target},function(e$D){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=e$D)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),e$E(0,e$D,"hide",function(){return this._hide},function(e$D){this._hide=e$D,this.visible=!e$D}),e$E(0,e$D,"touchScrollEnable",function(){return this._touchScrollEnable},function(e$D){this._touchScrollEnable=e$D,this.target=this._target}),e$E(0,e$D,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(e$D){this._mouseWheelEnable=e$D,this.target=this._target}),e$E(0,e$D,"tick",function(){return this.slider.tick},function(e$D){this.slider.tick=e$D}),e$Y}(e$T),e$L=function(e$m){function e$Y(e$D){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,e$Y.__super.call(this),this.skin=e$D}e$l(e$Y,"laya.ui.Slider",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._bg&&this._bg.destroy(e$D),this._bar&&this._bar.destroy(e$D),this._progress&&this._progress.destroy(e$D),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},e$D.createChildren=function(){this.addChild(this._bg=new e$q),this.addChild(this._bar=new e$O)},e$D.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},e$D.onBarMouseDown=function(e$D){this._globalSacle||(this._globalSacle=new e$G),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=e$I.stage.mouseX,this._ty=e$I.stage.mouseY,e$I.stage.on("mousemove",this,this.mouseMove),e$I.stage.once("mouseup",this,this.mouseUp),e$I.stage.once("mouseout",this,this.mouseUp),this.showValueText()},e$D.showValueText=function(){if(this.showLabel){var e$D=laya.ui.Slider.label;this.addChild(e$D),e$D.textField.changeText(this._value+""),this.isVertical?(e$D.x=this._bar.x+20,e$D.y=.5*(this._bar.height-e$D.height)+this._bar.y):(e$D.y=this._bar.y-20,e$D.x=.5*(this._bar.width-e$D.width)+this._bar.x)}},e$D.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},e$D.mouseUp=function(e$D){e$I.stage.off("mousemove",this,this.mouseMove),e$I.stage.off("mouseup",this,this.mouseUp),e$I.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},e$D.mouseMove=function(e$D){var e$m=this._value;this.isVertical?(this._bar.y+=(e$I.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(e$I.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=e$I.stage.mouseX,this._ty=e$I.stage.mouseY;var e$Y=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e$Y)/e$Y,this._value!=e$m&&this.sendChangeEvent(),this.showValueText()},e$D.sendChangeEvent=function(e$D){void 0===e$D&&(e$D="change"),this.event(e$D),this.changeHandler&&this.changeHandler.runWith(this._value)},e$D.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},e$D.changeSize=function(){e$m.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},e$D.setSlider=function(e$D,e$m,e$Y){this._value=-1,this._min=e$D,this._max=e$D<e$m?e$m:e$D,this.value=e$Y<e$D?e$D:e$m<e$Y?e$m:e$Y},e$D.changeValue=function(){var e$D=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e$D)/e$D,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e$m=this._max-this._min;0===e$m&&(e$m=1),this.isVertical?(this._bar.y=(this._value-this._min)/e$m*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e$m*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},e$D.onBgMouseDown=function(e$D){var e$m=this._bg.getMousePoint();this.isVertical?this.value=e$m.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e$m.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},e$E(0,e$D,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){if(this._skin!=e$D){this._skin=e$D,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var e$m=this._skin.replace(".png","$progress.png");e$U.getRes(e$m)&&(this._progress||(this.addChild(this._progress=new e$q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=e$m),this.setBarPoint(),this.callLater(this.changeValue)}}),e$E(0,e$D,"allowClickBack",function(){return this._allowClickBack},function(e$D){this._allowClickBack!=e$D&&((this._allowClickBack=e$D)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),e$E(0,e$D,"max",function(){return this._max},function(e$D){this._max!=e$D&&(this._max=e$D,this.callLater(this.changeValue))}),e$E(0,e$D,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),e$E(0,e$D,"tick",function(){return this._tick},function(e$D){this._tick!=e$D&&(this._tick=e$D,this.callLater(this.changeValue))}),e$E(0,e$D,"sizeGrid",function(){return this._bg.sizeGrid},function(e$D){this._bg.sizeGrid=e$D,this._bar.sizeGrid=e$D,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),e$E(0,e$D,"min",function(){return this._min},function(e$D){this._min!=e$D&&(this._min=e$D,this.callLater(this.changeValue))}),e$E(0,e$D,"value",function(){return this._value},function(e$D){if(this._value!=e$D){var e$m=this._value;this._value=e$D,this.changeValue(),this._value!=e$m&&this.sendChangeEvent()}}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)||"string"==typeof e$D?this.value=Number(e$D):e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"bar",function(){return this._bar}),e$t(e$Y,["label",function(){return this.label=new e$$}]),e$Y}(e$T),e$q=function(e$m){function e$Y(e$D){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,e$Y.__super.call(this),this.skin=e$D}e$l(e$Y,"laya.ui.Image",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,e$U.clearCache(this,this._skin)},e$D.dispose=function(){this.destroy(!0),e$U.clearCache(this,this._skin),this.clearEvent()},e$D.createChildren=function(){this.graphics=this._bitmap=new e$Q},e$D.setSource=function(e$D,e$m){this.destroyed||e$D===this._skin&&e$m&&(this.source=e$m,this.onCompResize(),this.clearEvent())},e$D.clearEvent=function(){this._skin&&e$y.atalsNotify&&e$y.atalsNotify.off(this._skin,this,this.setSource)},e$D.clearLoad=function(){this._skin&&((this._complete||this._progress)&&e$I.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},e$E(0,e$D,"source",function(){return this._bitmap.source},function(e$D){this._bitmap&&(this._bitmap.source=e$D,this.event("loaded"),this.repaint())}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"string"==typeof(this._dataSource=e$D)?this.skin=e$D:e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"measureHeight",function(){return this._bitmap.height}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){if(this._skin!=e$D)if(e$U.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=e$D){e$U.keepCache(this,this._skin);var e$m=e$U.getRes(e$D),e$Y=e$y.resAtalsObj&&e$y.resAtalsObj[this._skin];e$m?(this.source=e$m,this.onCompResize()):e$Y?(e$y.atalsNotify&&e$y.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=e$Y.sourceW),0==this.height&&(this.height=e$Y.sourceH)):(this._complete=e$i.create(this,this.setSource,[this._skin]),this._progress=null,e$I.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),e$E(0,e$D,"group",function(){return this._group},function(e$D){e$D&&this._skin&&e$U.setGroup(this._skin,e$D),this._group=e$D}),e$E(0,e$D,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$D){this._bitmap.sizeGrid=e$F.fillArray(e$p.defaultSizeGrid,e$D,Number)}),e$E(0,e$D,"measureWidth",function(){return this._bitmap.width}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$T,this,"width",e$D),this._bitmap.width=0==e$D?1e-7:e$D}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$T,this,"height",e$D),this._bitmap.height=0==e$D?1e-7:e$D}),e$Y}(e$T),e$$=function(e$m){function e$Y(e$D){this._tf=null,e$Y.__super.call(this),void 0===e$D&&(e$D=""),e$f.defaultColor=e$p.labelColor,this.text=e$D}e$l(e$Y,"laya.ui.Label",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._tf=null},e$D.createChildren=function(){this.addChild(this._tf=new e$c)},e$D.changeText=function(e$D){this._tf.changeText(e$D)},e$E(0,e$D,"padding",function(){return this._tf.padding.join(",")},function(e$D){this._tf.padding=e$F.fillArray(e$p.labelPadding,e$D,Number)}),e$E(0,e$D,"bold",function(){return this._tf.bold},function(e$D){this._tf.bold=e$D}),e$E(0,e$D,"align",function(){return this._tf.align},function(e$D){this._tf.align=e$D}),e$E(0,e$D,"text",function(){return this._tf.text},function(e$D){this._tf.text!=e$D&&(e$D&&(e$D=e$F.adptString(e$D+"")),this._tf.text=e$D,this.event("change"),this._width&&this._height||this.onCompResize())}),e$E(0,e$D,"italic",function(){return this._tf.italic},function(e$D){this._tf.italic=e$D}),e$E(0,e$D,"wordWrap",function(){return this._tf.wordWrap},function(e$D){this._tf.wordWrap=e$D}),e$E(0,e$D,"font",function(){return this._tf.font},function(e$D){this._tf.font=e$D}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)||"string"==typeof e$D?this.text=e$D+"":e$I.superSet(e$T,this,"dataSource",e$D)}),e$E(0,e$D,"color",function(){return this._tf.color},function(e$D){this._tf.color=e$D}),e$E(0,e$D,"valign",function(){return this._tf.valign},function(e$D){this._tf.valign=e$D}),e$E(0,e$D,"leading",function(){return this._tf.leading},function(e$D){this._tf.leading=e$D}),e$E(0,e$D,"fontSize",function(){return this._tf.fontSize},function(e$D){this._tf.fontSize=e$D}),e$E(0,e$D,"bgColor",function(){return this._tf.bgColor},function(e$D){this._tf.bgColor=e$D}),e$E(0,e$D,"borderColor",function(){return this._tf.borderColor},function(e$D){this._tf.borderColor=e$D}),e$E(0,e$D,"stroke",function(){return this._tf.stroke},function(e$D){this._tf.stroke=e$D}),e$E(0,e$D,"strokeColor",function(){return this._tf.strokeColor},function(e$D){this._tf.strokeColor=e$D}),e$E(0,e$D,"textField",function(){return this._tf}),e$E(0,e$D,"measureWidth",function(){return this._tf.width}),e$E(0,e$D,"measureHeight",function(){return this._tf.height}),e$E(0,e$D,"width",function(){return this._width||this._tf.text?e$I.superGet(e$T,this,"width"):0},function(e$D){e$I.superSet(e$T,this,"width",e$D),this._tf.width=e$D}),e$E(0,e$D,"height",function(){return this._height||this._tf.text?e$I.superGet(e$T,this,"height"):0},function(e$D){e$I.superSet(e$T,this,"height",e$D),this._tf.height=e$D}),e$E(0,e$D,"overflow",function(){return this._tf.overflow},function(e$D){this._tf.overflow=e$D}),e$E(0,e$D,"underline",function(){return this._tf.underline},function(e$D){this._tf.underline=e$D}),e$E(0,e$D,"underlineColor",function(){return this._tf.underlineColor},function(e$D){this._tf.underlineColor=e$D}),e$Y}(e$T),e$d=function(e$m){function e$Y(e$D){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e$Y.__super.call(this),this.skin=e$D}e$l(e$Y,"laya.ui.ProgressBar",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._bg&&this._bg.destroy(e$D),this._bar&&this._bar.destroy(e$D),this._bg=this._bar=null,this.changeHandler=null},e$D.createChildren=function(){this.addChild(this._bg=new e$q),this.addChild(this._bar=new e$q)},e$D.changeValue=function(){if(this.sizeGrid){var e$D=this.sizeGrid.split(","),e$m=Number(e$D[3]),e$Y=Number(e$D[1]),e$t=(this.width-e$m-e$Y)*this._value;this._bar.width=e$m+e$Y+e$t,this._bar.visible=this._bar.width>e$m+e$Y}else this._bar.width=this.width*this._value},e$E(0,e$D,"measureHeight",function(){return this._bg.height}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){this._skin!=e$D&&(this._skin=e$D,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),e$E(0,e$D,"measureWidth",function(){return this._bg.width}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$T,this,"height",e$D),this._bg.height=this._height,this._bar.height=this._height}),e$E(0,e$D,"bar",function(){return this._bar}),e$E(0,e$D,"value",function(){return this._value},function(e$D){this._value!=e$D&&(e$D=1<e$D?1:e$D<0?0:e$D,this._value=e$D,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(e$D))}),e$E(0,e$D,"bg",function(){return this._bg}),e$E(0,e$D,"sizeGrid",function(){return this._bg.sizeGrid},function(e$D){this._bg.sizeGrid=this._bar.sizeGrid=e$D}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$T,this,"width",e$D),this._bg.width=this._width,this.callLater(this.changeValue)}),e$E(0,e$D,"dataSource",e$m.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)||"string"==typeof e$D?this.value=Number(e$D):e$I.superSet(e$T,this,"dataSource",e$D)}),e$Y}(e$T),e$k=(function(e$D){function e$Y(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e$Y.__super.call(this),this._tipBox=new e$T,this._tipBox.addChild(this._tipText=new e$c),this._tipText.x=this._tipText.y=5,this._tipText.color=e$Y.tipTextColor,this._defaultTipHandler=this._showDefaultTip,e$I.stage.on("showtip",this,this._onStageShowTip),e$I.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}e$l(e$Y,"laya.ui.TipManager",e$T);var e$m=e$Y.prototype;e$m._onStageHideTip=function(e$D){e$I.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},e$m._onStageShowTip=function(e$D){e$I.timer.once(e$Y.tipDelay,this,this._showTip,[e$D],!0)},e$m._showTip=function(e$D){if("string"==typeof e$D){var e$m=String(e$D);Boolean(e$m)&&this._defaultTipHandler(e$m)}else e$D instanceof laya.utils.Handler?e$D.run():"function"==typeof e$D&&e$D.apply();e$I.stage.on("mousemove",this,this._onStageMouseMove),e$I.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},e$m._onStageMouseDown=function(e$D){this.closeAll()},e$m._onStageMouseMove=function(e$D){this._showToStage(this,e$Y.offsetX,e$Y.offsetY)},e$m._showToStage=function(e$D,e$m,e$Y){void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0);var e$t=e$D.getBounds();e$D.x=e$I.stage.mouseX+e$m,e$D.y=e$I.stage.mouseY+e$Y,e$D.x+e$t.width>e$I.stage.width&&(e$D.x-=e$t.width+e$m),e$D.y+e$t.height>e$I.stage.height&&(e$D.y-=e$t.height+e$Y)},e$m.closeAll=function(){e$I.timer.clear(this,this._showTip),e$I.stage.off("mousemove",this,this._onStageMouseMove),e$I.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},e$m.showDislayTip=function(e$D){this.addChild(e$D),this._showToStage(this),e$I._currentStage.addChild(this)},e$m._showDefaultTip=function(e$D){this._tipText.text=e$D;var e$m=this._tipBox.graphics;e$m.clear(),e$m.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e$Y.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),e$I._currentStage.addChild(this)},e$E(0,e$m,"defaultTipHandler",function(){return this._defaultTipHandler},function(e$D){this._defaultTipHandler=e$D}),e$Y.offsetX=10,e$Y.offsetY=15,e$Y.tipTextColor="#ffffff",e$Y.tipBackColor="#111111",e$Y.tipDelay=200}(),function(e$D){var e$R;function e$G(){this._idMap=null,this._aniList=null,this._watchMap={},e$G.__super.call(this)}e$l(e$G,"laya.ui.View",e$C);var e$m=e$G.prototype;return e$m.createView=function(e$D){if(e$D.animations&&!this._idMap&&(this._idMap={}),e$G.createComp(e$D,this,this),e$D.animations){var e$m,e$Y,e$t=[],e$y=e$D.animations,e$l=0,e$E=e$y.length;for(e$l=0;e$l<e$E;e$l++){switch(e$m=new e$_,e$Y=e$y[e$l],e$m._setUp(this._idMap,e$Y),(this[e$Y.name]=e$m)._setControlNode(this),e$Y.action){case 1:e$m.play(0,!1);break;case 2:e$m.play(0,!0)}e$t.push(e$m)}this._aniList=e$t}0<this._width&&null==e$D.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},e$m.onEvent=function(e$D,e$m){},e$m.loadUI=function(e$D){var e$m=e$G.uiMap[e$D];e$m&&this.createView(e$m)},e$m.destroy=function(e$D){void 0===e$D&&(e$D=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,e$D)},e$m.changeData=function(e$D){var e$m=this._watchMap[e$D];if(e$m){console.log("change",e$D);for(var e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){e$m[e$Y].exe(this)}}},e$G._regs=function(){for(var e$D in e$G.uiClassMap)e$w.regClass(e$D,e$G.uiClassMap[e$D])},e$G.createComp=function(e$D,e$m,e$Y,e$t){if(!(e$m=e$m||e$G.getCompInstance(e$D)))return console.warn("can not create:"+e$D.type),null;var e$y=e$D.child;if(e$y)for(var e$l=e$m instanceof laya.ui.List,e$E=0,e$B=e$y.length;e$E<e$B;e$E++){var e$o=e$y[e$E];if(!e$m.hasOwnProperty("itemRender")||"render"!=e$o.props.name&&"render"!==e$o.props.renderType)if("Graphic"==e$o.type)e$w.addGraphicsToSprite(e$o,e$m);else if(e$w.isDrawType(e$o.type))e$w.addGraphicToSprite(e$o,e$m,!0);else{if(e$l){var e$r=[],e$f=e$G.createComp(e$o,null,e$Y,e$r);e$r.length&&(e$f._$bindData=e$r)}else e$f=e$G.createComp(e$o,null,e$Y,e$t);"Script"==e$o.type?"owner"in e$f?e$f.owner=e$m:"target"in e$f&&(e$f.target=e$m):"mask"==e$o.props.renderType||"mask"==e$o.props.name?e$m.mask=e$f:e$f instanceof laya.display.Sprite&&e$m.addChild(e$f)}else e$m.itemRender=e$o}var e$_=e$D.props;for(var e$i in e$_){var e$R=e$_[e$i];e$G.eventDic[e$i]?e$R&&e$Y&&e$m.on(e$i,e$Y,e$Y.onEvent,[e$R]):e$G.setCompValue(e$m,e$i,e$R,e$Y,e$t)}return e$I.__typeof(e$m,"laya.ui.IItem")&&e$m.initItems(),e$D.compId&&e$Y&&e$Y._idMap&&(e$Y._idMap[e$D.compId]=e$m),e$m},e$G.setCompValue=function(e$D,e$m,e$Y,e$t,e$y){if("string"==typeof e$Y&&-1<e$Y.indexOf("${")){if(e$G._sheet||(e$G._sheet=e$w.getClass("laya.data.Table")),!e$G._sheet)return void console.warn("Can not find class Sheet");if(e$y)e$y.push(e$D,e$m,e$Y);else if(e$t){-1==e$Y.indexOf("].")&&(e$Y=e$Y.replace(".","[0]."));var e$l,e$E,e$B=new e$R(e$D,e$m,e$Y);e$B.exe(e$t);for(var e$o=e$Y.replace(/\[.*?\]\./g,".");null!=(e$l=e$G._parseWatchData.exec(e$o));){for(var e$r=e$l[1];null!=(e$E=e$G._parseKeyWord.exec(e$r));){var e$f=e$E[0],e$_=e$t._watchMap[e$f]||(e$t._watchMap[e$f]=[]);e$_.push(e$B),e$G._sheet.I.notifer.on(e$f,e$t,e$t.changeData,[e$f])}(e$_=e$t._watchMap[e$r]||(e$t._watchMap[e$r]=[])).push(e$B),e$G._sheet.I.notifer.on(e$r,e$t,e$t.changeData,[e$r])}}}else if("var"===e$m&&e$t)e$t[e$Y]=e$D;else if("onClick"==e$m){var e$i=e$I._runScript("(function(){"+e$Y+"})");e$D.on("click",e$t,e$i)}else e$D[e$m]="true"===e$Y||"false"!==e$Y&&e$Y},e$G.getCompInstance=function(e$D){var e$m,e$Y=e$D.props?e$D.props.runtime:null;return e$m=e$Y?e$G.viewClassMap[e$Y]||e$G.uiClassMap[e$Y]||e$I.__classmap[e$Y]:e$G.uiClassMap[e$D.type],e$D.props&&e$D.props.hasOwnProperty("renderType")&&"instance"==e$D.props.renderType?e$m.instance:e$m?new e$m:null},e$G.regComponent=function(e$D,e$m){e$G.uiClassMap[e$D]=e$m,e$w.regClass(e$D,e$m)},e$G.regViewRuntime=function(e$D,e$m){e$G.viewClassMap[e$D]=e$m},e$G.uiMap={},e$G.viewClassMap={},e$G._sheet=null,e$t(e$G,["uiClassMap",function(){return this.uiClassMap={ViewStack:e$DD,LinkButton:e$O,TextArea:e$rD,ColorPicker:e$X,Box:e$C,Button:e$O,CheckBox:e$M,Clip:e$h,ComboBox:e$P,Component:e$T,HScrollBar:e$x,HSlider:e$Z,Image:e$q,Label:e$$,List:e$H,Panel:e$V,ProgressBar:e$d,Radio:e$j,RadioGroup:e$BD,ScrollBar:e$u,Slider:e$L,Tab:e$oD,TextInput:e$YD,View:e$G,VScrollBar:e$mD,VSlider:e$tD,Tree:e$K,HBox:e$lD,VBox:e$ED,Sprite:e$v,Animation:e$Y,Text:e$c,FontClip:e$g}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),e$G.__init$=function(){e$G._regs(),e$R=function(){function e$D(e$D,e$m,e$Y){this.comp=null,this.prop=null,this.value=null,this.comp=e$D,this.prop=e$m,this.value=e$Y}return e$l(e$D,""),e$D.prototype.exe=function(e$D){var e$m=e$F.getBindFun(this.value);this.comp[this.prop]=e$m.call(this,e$D)},e$D}()},e$G}()),e$M=function(e$D){function e$Y(e$D,e$m){void 0===e$m&&(e$m=""),e$Y.__super.call(this,e$D,e$m)}e$l(e$Y,"laya.ui.CheckBox",e$D);var e$m=e$Y.prototype;return e$m.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},e$m.initialize=function(){e$D.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},e$E(0,e$m,"dataSource",e$D.prototype._$get_dataSource,function(e$D){"boolean"==typeof(this._dataSource=e$D)?this.selected=e$D:"string"==typeof e$D?this.selected="true"===e$D:e$I.superSet(e$O,this,"dataSource",e$D)}),e$Y}(e$O),e$n=function(e$D){function e$m(){this._space=0,this._align="none",this._itemChanged=!1,e$m.__super.call(this)}e$l(e$m,"laya.ui.LayoutBox",e$C);var e$Y=e$m.prototype;return e$Y.addChild=function(e$D){return e$D.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,e$D)},e$Y.onResize=function(e$D){this._setItemChanged()},e$Y.addChildAt=function(e$D,e$m){return e$D.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,e$D,e$m)},e$Y.removeChild=function(e$D){return e$D.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,e$D)},e$Y.removeChildAt=function(e$D){return this.getChildAt(e$D).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,e$D)},e$Y.refresh=function(){this._setItemChanged()},e$Y.changeItems=function(){this._itemChanged=!1},e$Y.sortItem=function(e$D){e$D&&e$D.sort(function(e$D,e$m){return e$D.y-e$m.y})},e$Y._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},e$E(0,e$Y,"space",function(){return this._space},function(e$D){this._space=e$D,this._setItemChanged()}),e$E(0,e$Y,"align",function(){return this._align},function(e$D){this._align=e$D,this._setItemChanged()}),e$m}(),e$g=function(e$m){function e$Y(e$D,e$m){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,e$Y.__super.call(this),e$D&&(this.skin=e$D),e$m&&(this.sheet=e$m)}e$l(e$Y,"laya.ui.FontClip",e$m);var e$D=e$Y.prototype;return e$D.createChildren=function(){this._bitmap=new e$Q,this.on("loaded",this,this._onClipLoaded)},e$D._onClipLoaded=function(){this.callLater(this.changeValue)},e$D.changeValue=function(){var e$D;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),e$D=this._sources[0]))){var e$m="horizontal"===this._direction;e$m?(this._wordsW=this._valueArr.length*(e$D.sourceWidth+this.spaceX),this._wordsH=e$D.sourceHeight):(this._wordsW=e$D.sourceWidth,this._wordsH=(e$D.sourceHeight+this.spaceY)*this._valueArr.length);var e$Y=0;if(this._width)switch(this._align){case"center":e$Y=.5*(this._width-this._wordsW);break;case"right":e$Y=this._width-this._wordsW;break;default:e$Y=0}for(var e$t=0,e$y=this._valueArr.length;e$t<e$y;e$t++){var e$l=this._indexMap[this._valueArr.charAt(e$t)];this.sources[e$l]&&(e$D=this.sources[e$l],e$m?this.graphics.drawTexture(e$D,e$Y+e$t*(e$D.sourceWidth+this.spaceX),0,e$D.sourceWidth,e$D.sourceHeight):this.graphics.drawTexture(e$D,0+e$Y,e$t*(e$D.sourceHeight+this.spaceY),e$D.sourceWidth,e$D.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),e$m.prototype.destroy.call(this,e$D)},e$E(0,e$D,"sheet",function(){return this._sheet},function(e$D){e$D+="";var e$m=(this._sheet=e$D).split(" ");this._clipX=String(e$m[0]).length,this.clipY=e$m.length,this._indexMap={};for(var e$Y=0;e$Y<this._clipY;e$Y++)for(var e$t=e$m[e$Y].split(""),e$y=0,e$l=e$t.length;e$y<e$l;e$y++)this._indexMap[e$t[e$y]]=e$Y*this._clipX+e$y}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$h,this,"height",e$D),this.callLater(this.changeValue)}),e$E(0,e$D,"direction",function(){return this._direction},function(e$D){this._direction=e$D,this.callLater(this.changeValue)}),e$E(0,e$D,"value",function(){return this._valueArr?this._valueArr:""},function(e$D){e$D+="",this._valueArr=e$D,this.callLater(this.changeValue)}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$h,this,"width",e$D),this.callLater(this.changeValue)}),e$E(0,e$D,"spaceX",function(){return this._spaceX},function(e$D){this._spaceX=e$D,"horizontal"===this._direction&&this.callLater(this.changeValue)}),e$E(0,e$D,"spaceY",function(){return this._spaceY},function(e$D){this._spaceY=e$D,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),e$E(0,e$D,"align",function(){return this._align},function(e$D){this._align=e$D,this.callLater(this.changeValue)}),e$E(0,e$D,"measureWidth",function(){return this._wordsW}),e$E(0,e$D,"measureHeight",function(){return this._wordsH}),e$Y}(e$h),e$H=function(e$D){function e$m(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new e$G,e$m.__super.call(this)}e$l(e$m,"laya.ui.List",e$D);var e$Y=e$m.prototype;return e$I.imps(e$Y,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),this._content&&this._content.destroy(e$D),this._scrollBar&&this._scrollBar.destroy(e$D),laya.ui.Component.prototype.destroy.call(this,e$D),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},e$Y.createChildren=function(){this.addChild(this._content=new e$C)},e$Y.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=e$I.superGet(e$C,this,"cacheAs")),e$I.superSet(e$C,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},e$Y.onScrollEnd=function(){e$I.superSet(e$C,this,"cacheAs",this._$P.cacheAs)},e$Y._removePreScrollBar=function(){var e$D=this.removeChildByName("scrollBar");e$D&&e$D.destroy(!0)},e$Y.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var e$D=this._getOneCell(),e$m=e$D.width+this._spaceX||1,e$Y=e$D.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/e$m):Math.ceil(this._width/e$m)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/e$Y):Math.round(this._height/e$Y));var e$t=this._width?this._width:e$m*this.repeatX-this._spaceX,e$y=this._height?this._height:e$Y*this.repeatY-this._spaceY;this._cellSize=this._isVertical?e$Y:e$m,this._cellOffset=this._isVertical?e$Y*Math.max(this._repeatY2,this._repeatY)-e$y-this._spaceY:e$m*Math.max(this._repeatX2,this._repeatX)-e$t-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=e$y:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=e$t),this.setContentSize(e$t,e$y);var e$l=this._isVertical?this.repeatX:this.repeatY,e$E=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,e$l,e$E),this._createdLine=e$E,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},e$Y._getOneCell=function(){if(0===this._cells.length){var e$D=this.createItem();if(this._offset.setTo(e$D.x,e$D.y),this.cacheContent)return e$D;this._cells.push(e$D)}return this._cells[0]},e$Y._createItems=function(e$D,e$m,e$Y){var e$t=this._content,e$y=this._getOneCell(),e$l=e$y.width+this._spaceX,e$E=e$y.height+this._spaceY;if(this.cacheContent){var e$B=new e$C;e$B.cacheAsBitmap=!0,e$B.pos((this._isVertical?0:e$D)*e$l,(this._isVertical?e$D:0)*e$E),this._content.addChild(e$B),this._content.optimizeScrollRect=!0,e$t=e$B}else{for(var e$o=[],e$r=this._cells.length-1;-1<e$r;e$r--){var e$f=this._cells[e$r];e$f.removeSelf(),e$o.push(e$f)}this._cells.length=0}for(var e$_=e$D;e$_<e$Y;e$_++)for(var e$i=0;e$i<e$m;e$i++)(e$y=e$o&&e$o.length?e$o.pop():this.createItem()).x=(this._isVertical?e$i:e$_)*e$l-e$t.x,e$y.y=(this._isVertical?e$_:e$i)*e$E-e$t.y,e$y.name="item"+(e$_*e$m+e$i),e$t.addChild(e$y),this.addCell(e$y)},e$Y.createItem=function(){var e$D=[];if("function"==typeof this._itemRender)var e$m=new this._itemRender;else e$m=e$k.createComp(this._itemRender,null,null,e$D);if(0==e$D.length&&e$m._watchMap){var e$Y=e$m._watchMap;for(var e$t in e$Y)for(var e$y=e$Y[e$t],e$l=0;e$l<e$y.length;e$l++){var e$E=e$y[e$l];e$D.push(e$E.comp,e$E.prop,e$E.value)}}return e$D.length&&(e$m._$bindData=e$D),e$m},e$Y.addCell=function(e$D){e$D.on("click",this,this.onCellMouse),e$D.on("rightclick",this,this.onCellMouse),e$D.on("mouseover",this,this.onCellMouse),e$D.on("mouseout",this,this.onCellMouse),e$D.on("mousedown",this,this.onCellMouse),e$D.on("mouseup",this,this.onCellMouse),this._cells.push(e$D)},e$Y.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var e$D=0,e$m=e$D=0;e$m<1e4;e$m++){var e$Y=this.getChildByName("item"+e$m);if(!e$Y)break;this.addCell(e$Y),e$D++}this.repeatY=e$D}},e$Y.setContentSize=function(e$D,e$m){this._content.width=e$D,this._content.height=e$m,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new e$W),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,e$D,e$m),this._content.scrollRect=this._content.scrollRect),this.event("resize")},e$Y.onCellMouse=function(e$D){"mousedown"===e$D.type&&(this._isMoved=!1);var e$m=e$D.currentTarget,e$Y=this._startIndex+this._cells.indexOf(e$m);e$Y<0||("click"===e$D.type||"rightclick"===e$D.type?this.selectEnable&&!this._isMoved?this.selectedIndex=e$Y:this.changeCellState(e$m,!0,0):"mouseover"!==e$D.type&&"mouseout"!==e$D.type||this._selectedIndex===e$Y||this.changeCellState(e$m,"mouseover"===e$D.type,0),this.mouseHandler&&this.mouseHandler.runWith([e$D,e$Y]))},e$Y.changeCellState=function(e$D,e$m,e$Y){var e$t=e$D.getChildByName("selectBox");e$t&&(this.selectEnable=!0,e$t.visible=e$m,e$t.index=e$Y)},e$Y.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},e$Y.onScrollBarChange=function(e$D){this.runCallLater(this.changeCells);var e$m=this._scrollBar.value,e$Y=this._isVertical?this.repeatX:this.repeatY,e$t=this._isVertical?this.repeatY:this.repeatX,e$y=Math.floor(e$m/this._cellSize);if(this.cacheContent)e$E=e$t+1,this._createdLine-e$y<e$E&&(this._createItems(this._createdLine,e$Y,this._createdLine+e$E),this.renderItems(this._createdLine*e$Y,0),this._createdLine+=e$E);else{var e$l=e$y*e$Y,e$E=0;if(e$l>this._startIndex){e$E=e$l-this._startIndex;var e$B=!0,e$o=this._startIndex+e$Y*(e$t+1);this._isMoved=!0}else e$l<this._startIndex&&(e$E=this._startIndex-e$l,e$B=!1,e$o=this._startIndex-1,this._isMoved=!0);for(var e$r=0;e$r<e$E;e$r++){if(e$B){var e$f=this._cells.shift();this._cells[this._cells.length]=e$f;var e$_=e$o+e$r}else e$f=this._cells.pop(),this._cells.unshift(e$f),e$_=e$o-e$r;var e$i=Math.floor(e$_/e$Y)*this._cellSize;this._isVertical?e$f.y=e$i:e$f.x=e$i,this.renderItem(e$f,e$_)}this._startIndex=e$l,this.changeSelectStatus()}var e$R=this._content.scrollRect;this._isVertical?(e$R.y=e$m-this._offset.y,e$R.x=-this._offset.x):(e$R.y=-this._offset.y,e$R.x=e$m-this._offset.x),this._content.scrollRect=e$R},e$Y.posCell=function(e$D,e$m){if(this._scrollBar){var e$Y=this._isVertical?this.repeatX:this.repeatY,e$t=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e$m/e$Y)*this._cellSize);this._isVertical?e$D.y=e$t:e$D.x=e$t}},e$Y.changeSelectStatus=function(){for(var e$D=0,e$m=this._cells.length;e$D<e$m;e$D++)this.changeCellState(this._cells[e$D],this._selectedIndex===this._startIndex+e$D,1)},e$Y.renderItems=function(e$D,e$m){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0);for(var e$Y=e$D,e$t=e$m||this._cells.length;e$Y<e$t;e$Y++)this.renderItem(this._cells[e$Y],this._startIndex+e$Y);this.changeSelectStatus(),this._twDone=!0},e$Y.renderItem=function(e$D,e$m){this._array&&0<=e$m&&e$m<this._array.length?(e$D.visible=!0,e$D._$bindData?(e$D._dataSource=this._array[e$m],this._bindData(e$D,this._array[e$m])):e$D.dataSource=this._array[e$m],this.cacheContent||this.posCell(e$D,e$m),this.hasListener("render")&&this.event("render",[e$D,e$m]),this.renderHandler&&this.renderHandler.runWith([e$D,e$m]),this.renderTwHandler&&this.renderTwHandler.runWith([e$D,e$m])):e$D?(e$D.visible=!1,e$D.dataSource=null):e$I.recordError("找不到cell","_itemRender为:"+this._itemRender)},e$Y._bindData=function(e$D,e$m){for(var e$Y=e$D._$bindData,e$t=0,e$y=e$Y.length;e$t<e$y;e$t++){var e$l=e$Y[e$t++],e$E=e$Y[e$t++],e$B=e$Y[e$t],e$o=e$F.getBindFun(e$B);e$l[e$E]=e$o.call(this,e$m)}},e$Y.refresh=function(){this.array=this._array},e$Y.getItem=function(e$D){return-1<e$D&&e$D<this._array.length?this._array[e$D]:null},e$Y.changeItem=function(e$D,e$m){-1<e$D&&e$D<this._array.length&&(this._array[e$D]=e$m,e$D>=this._startIndex&&e$D<this._startIndex+this._cells.length&&this.renderItem(this.getCell(e$D),e$D))},e$Y.setItem=function(e$D,e$m){this.changeItem(e$D,e$m)},e$Y.addItem=function(e$D){this._array.push(e$D),this.array=this._array},e$Y.addItemAt=function(e$D,e$m){this._array.splice(e$m,0,e$D),this.array=this._array},e$Y.deleteItem=function(e$D){this._array.splice(e$D,1),this.array=this._array},e$Y.getCell=function(e$D){return this.runCallLater(this.changeCells),-1<e$D&&this._cells?this._cells[(e$D-this._startIndex)%this._cells.length]:null},e$Y.scrollTo=function(e$D){if(this._scrollBar){var e$m=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(e$D/e$m)*this._cellSize}else this.startIndex=e$D},e$Y.tweenTo=function(e$D,e$m,e$Y){if(void 0===e$m&&(e$m=200),this._scrollBar){var e$t=this._isVertical?this.repeatX:this.repeatY;e$z.to(this._scrollBar,{value:Math.floor(e$D/e$t)*this._cellSize},e$m,null,e$Y,0,!0)}else this.startIndex=e$D,e$Y&&e$Y.run()},e$Y._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},e$Y.commitMeasure=function(){this.runCallLater(this.changeCells)},e$E(0,e$Y,"cacheAs",e$D.prototype._$get_cacheAs,function(e$D){e$I.superSet(e$C,this,"cacheAs",e$D),this._scrollBar&&(this._$P.cacheAs=null,"none"!==e$D?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),e$E(0,e$Y,"content",function(){return this._content}),e$E(0,e$Y,"height",e$D.prototype._$get_height,function(e$D){e$D!=this._height&&(e$I.superSet(e$C,this,"height",e$D),this._setCellChanged())}),e$E(0,e$Y,"itemRender",function(){return this._itemRender},function(e$D){if(this._itemRender!=e$D){this._itemRender=e$D;for(var e$m=this._cells.length-1;-1<e$m;e$m--)this._cells[e$m].destroy();this._cells.length=0,this._setCellChanged()}}),e$E(0,e$Y,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e$D){this._removePreScrollBar();var e$m=new e$mD;e$m.name="scrollBar",e$m.right=0,e$D&&" "!=e$D&&(e$m.skin=e$D),this.scrollBar=e$m,this.addChild(e$m),this._setCellChanged()}),e$E(0,e$Y,"page",function(){return this._page},function(e$D){this._page=e$D,this._array&&(this._page=0<e$D?e$D:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),e$E(0,e$Y,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e$D){this._removePreScrollBar();var e$m=new e$x;e$m.name="scrollBar",e$m.bottom=0,e$D&&" "!=e$D&&(e$m.skin=e$D),this.scrollBar=e$m,this.addChild(e$m),this._setCellChanged()}),e$E(0,e$Y,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(e$D){this._repeatX=e$D,this._setCellChanged()}),e$E(0,e$Y,"scrollBar",function(){return this._scrollBar},function(e$D){this._scrollBar!=e$D&&(this._scrollBar=e$D)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),e$E(0,e$Y,"width",e$D.prototype._$get_width,function(e$D){e$D!=this._width&&(e$I.superSet(e$C,this,"width",e$D),this._setCellChanged())}),e$E(0,e$Y,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(e$D){this._repeatY=e$D,this._setCellChanged()}),e$E(0,e$Y,"spaceX",function(){return this._spaceX},function(e$D){this._spaceX=e$D,this._setCellChanged()}),e$E(0,e$Y,"spaceY",function(){return this._spaceY},function(e$D){this._spaceY=e$D,this._setCellChanged()}),e$E(0,e$Y,"selectedIndex",function(){return this._selectedIndex},function(e$D){this._selectedIndex!=e$D&&(this._selectedIndex=e$D,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(e$D),this.startIndex=this._startIndex)}),e$E(0,e$Y,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(e$D){this.selectedIndex=this._array.indexOf(e$D)}),e$E(0,e$Y,"length",function(){return this._array?this._array.length:0}),e$E(0,e$Y,"selection",function(){return this.getCell(this._selectedIndex)},function(e$D){this.selectedIndex=this._startIndex+this._cells.indexOf(e$D)}),e$E(0,e$Y,"startIndex",function(){return this._startIndex},function(e$D){this._startIndex=0<e$D?e$D:0,this.callLater(this.renderItems)}),e$E(0,e$Y,"twSwitch",function(){return this._twSwitch},function(e$D){this._twSwitch=e$D}),e$E(0,e$Y,"twDone",function(){return this._twDone},function(e$D){this._twDone=e$D}),e$E(0,e$Y,"array",function(){return this._array},function(e$D){this.runCallLater(this.changeCells),this._array=e$D||[];var e$m=this._array.length;if(this.totalPage=Math.ceil(e$m/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e$m?this._selectedIndex:e$m-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var e$Y=this._isVertical?this.repeatX:this.repeatY,e$t=this._isVertical?this.repeatY:this.repeatX,e$y=Math.ceil(e$m/e$Y);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=e$t/e$y,this._scrollBar.setScroll(0,(e$y-e$t)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),e$E(0,e$Y,"dataSource",e$D.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)&&Math.floor(e$D)==e$D||"string"==typeof e$D?this.selectedIndex=parseInt(e$D):e$D instanceof Array?this.array=e$D:e$I.superSet(e$C,this,"dataSource",e$D)}),e$E(0,e$Y,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e$m}(e$C),e$x=function(e$D){function e$m(){e$m.__super.call(this)}return e$l(e$m,"laya.ui.HScrollBar",e$D),e$m.prototype.initialize=function(){e$D.prototype.initialize.call(this),this.slider.isVertical=!1},e$m}(e$u),e$V=function(e$D){function e$m(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,e$m.__super.call(this),this.width=this.height=100}e$l(e$m,"laya.ui.Panel",e$D);var e$Y=e$m.prototype;return e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),laya.ui.Component.prototype.destroy.call(this,e$D),this._content&&this._content.destroy(e$D),this._vScrollBar&&this._vScrollBar.destroy(e$D),this._hScrollBar&&this._hScrollBar.destroy(e$D),this._vScrollBar=null,this._hScrollBar=null,this._content=null},e$Y.destroyChildren=function(){this._content.destroyChildren()},e$Y.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new e$C)},e$Y.addChild=function(e$D){return e$D.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(e$D)},e$Y.onResize=function(){this._setScrollChanged()},e$Y.addChildAt=function(e$D,e$m){return e$D.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(e$D,e$m)},e$Y.removeChild=function(e$D){return e$D.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(e$D)},e$Y.removeChildAt=function(e$D){return this.getChildAt(e$D).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(e$D)},e$Y.removeChildren=function(e$D,e$m){return void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=2147483647),this._content.removeChildren(e$D,e$m),this._setScrollChanged(),this},e$Y.getChildAt=function(e$D){return this._content.getChildAt(e$D)},e$Y.getChildByName=function(e$D){return this._content.getChildByName(e$D)},e$Y.getChildIndex=function(e$D){return this._content.getChildIndex(e$D)},e$Y.changeScroll=function(){this._scrollChanged=!1;var e$D=this.contentWidth||1,e$m=this.contentHeight||1,e$Y=this._vScrollBar,e$t=this._hScrollBar,e$y=e$Y&&e$m>this._height,e$l=e$t&&e$D>this._width,e$E=e$y?this._width-e$Y.width:this._width,e$B=e$l?this._height-e$t.height:this._height;e$Y&&(e$Y.x=this._width-e$Y.width,e$Y.y=0,e$Y.height=this._height-(e$l?e$t.height:0),e$Y.scrollSize=Math.max(.033*this._height,1),e$Y.thumbPercent=e$B/e$m,e$Y.setScroll(0,e$m-e$B,e$Y.value)),e$t&&(e$t.x=0,e$t.y=this._height-e$t.height,e$t.width=this._width-(e$y?e$Y.width:0),e$t.scrollSize=Math.max(.033*this._width,1),e$t.thumbPercent=e$E/e$D,e$t.setScroll(0,e$D-e$E,e$t.value))},e$Y.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},e$Y.setContentSize=function(e$D,e$m){var e$Y=this._content;e$Y.width=e$D,e$Y.height=e$m,e$Y.scrollRect||(e$Y.scrollRect=new e$W),e$Y.scrollRect.setTo(0,0,e$D,e$m),e$Y.scrollRect=e$Y.scrollRect},e$Y.onScrollBarChange=function(e$D){var e$m=this._content.scrollRect;if(e$m){var e$Y=Math.round(e$D.value);e$D.isVertical?e$m.y=e$Y:e$m.x=e$Y,this._content.scrollRect=e$m}},e$Y.scrollTo=function(e$D,e$m){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),this.vScrollBar&&(this.vScrollBar.value=e$m),this.hScrollBar&&(this.hScrollBar.value=e$D)},e$Y.refresh=function(){this.changeScroll()},e$Y.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=e$I.superGet(e$C,this,"cacheAs")),e$I.superSet(e$C,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},e$Y.onScrollEnd=function(){e$I.superSet(e$C,this,"cacheAs",this._$P.cacheAs)},e$Y._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},e$E(0,e$Y,"numChildren",function(){return this._content.numChildren}),e$E(0,e$Y,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e$D){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new e$x),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=e$D}),e$E(0,e$Y,"contentWidth",function(){for(var e$D=0,e$m=this._content.numChildren-1;-1<e$m;e$m--){var e$Y=this._content.getChildAt(e$m);e$D=Math.max(e$Y.x+e$Y.width*e$Y.scaleX,e$D)}return e$D}),e$E(0,e$Y,"contentHeight",function(){for(var e$D=0,e$m=this._content.numChildren-1;-1<e$m;e$m--){var e$Y=this._content.getChildAt(e$m);e$D=Math.max(e$Y.y+e$Y.height*e$Y.scaleY,e$D)}return e$D}),e$E(0,e$Y,"width",e$D.prototype._$get_width,function(e$D){e$I.superSet(e$C,this,"width",e$D),this._setScrollChanged()}),e$E(0,e$Y,"hScrollBar",function(){return this._hScrollBar}),e$E(0,e$Y,"content",function(){return this._content}),e$E(0,e$Y,"height",e$D.prototype._$get_height,function(e$D){e$I.superSet(e$C,this,"height",e$D),this._setScrollChanged()}),e$E(0,e$Y,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e$D){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new e$mD),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=e$D}),e$E(0,e$Y,"vScrollBar",function(){return this._vScrollBar}),e$E(0,e$Y,"cacheAs",e$D.prototype._$get_cacheAs,function(e$D){e$I.superSet(e$C,this,"cacheAs",e$D),this._$P.cacheAs=null,"none"!==e$D?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e$m}(e$C),e$Z=function(e$D){function e$m(e$D){e$m.__super.call(this,e$D),this.isVertical=!1}return e$l(e$m,"laya.ui.HSlider",e$L),e$m}(),e$b=function(e$D){function e$Y(e$D,e$m){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,e$Y.__super.call(this),this.skin=e$m,this.labels=e$D}e$l(e$Y,"laya.ui.UIGroup",e$D);var e$m=e$Y.prototype;return e$I.imps(e$m,{"laya.ui.IItem":!0}),e$m.preinitialize=function(){this.mouseEnabled=!0},e$m.destroy=function(e$D){void 0===e$D&&(e$D=!0),laya.ui.Component.prototype.destroy.call(this,e$D),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},e$m.addItem=function(e$D,e$m){void 0===e$m&&(e$m=!0);var e$Y=e$D,e$t=this._items.length;if(e$Y.name="item"+e$t,this.addChild(e$Y),this.initItems(),e$m&&0<e$t){var e$y=this._items[e$t-1];"horizontal"==this._direction?e$Y.x=e$y.x+e$y.width+this._space:e$Y.y=e$y.y+e$y.height+this._space}else e$m&&(e$Y.x=0,e$Y.y=0);return e$t},e$m.delItem=function(e$D,e$m){void 0===e$m&&(e$m=!0);var e$Y=this._items.indexOf(e$D);if(-1!=e$Y){var e$t=e$D;this.removeChild(e$t);for(var e$y=e$Y+1,e$l=this._items.length;e$y<e$l;e$y++){var e$E=this._items[e$y];e$E.name="item"+(e$y-1),e$m&&("horizontal"==this._direction?e$E.x-=e$t.width+this._space:e$E.y-=e$t.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var e$B;e$B=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=e$B}}},e$m.initItems=function(){this._items||(this._items=[]);for(var e$D=this._items.length=0;e$D<1e4;e$D++){var e$m=this.getChildByName("item"+e$D);if(null==e$m)break;this._items.push(e$m),e$m.selected=e$D===this._selectedIndex,e$m.clickHandler=e$i.create(this,this.itemClick,[e$D],!1)}},e$m.itemClick=function(e$D){this.selectedIndex=e$D},e$m.setSelect=function(e$D,e$m){this._items&&-1<e$D&&e$D<this._items.length&&(this._items[e$D].selected=e$m)},e$m.createItem=function(e$D,e$m){return null},e$m.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var e$D=0,e$m=0,e$Y=this._items.length;e$m<e$Y;e$m++){var e$t=this._items[e$m];this._skin&&(e$t.skin=this._skin),this._labelColors&&(e$t.labelColors=this._labelColors),this._labelSize&&(e$t.labelSize=this._labelSize),this._labelStroke&&(e$t.labelStroke=this._labelStroke),this._labelStrokeColor&&(e$t.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(e$t.strokeColors=this._strokeColors),this._labelBold&&(e$t.labelBold=this._labelBold),this._labelPadding&&(e$t.labelPadding=this._labelPadding),this._labelAlign&&(e$t.labelAlign=this._labelAlign),this._stateNum&&(e$t.stateNum=this._stateNum),this._labelFont&&(e$t.labelFont=this._labelFont),"horizontal"===this._direction?(e$t.y=0,e$t.x=e$D,e$D+=e$t.width+this._space):(e$t.x=0,e$t.y=e$D,e$D+=e$t.height+this._space)}this.changeSize()},e$m.commitMeasure=function(){this.runCallLater(this.changeLabels)},e$m._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},e$E(0,e$m,"labelStrokeColor",function(){return this._labelStrokeColor},function(e$D){this._labelStrokeColor!=e$D&&(this._labelStrokeColor=e$D,this._setLabelChanged())}),e$E(0,e$m,"skin",function(){return this._skin},function(e$D){this._skin!=e$D&&(this._skin=e$D,this._setLabelChanged())}),e$E(0,e$m,"selectedIndex",function(){return this._selectedIndex},function(e$D){this._selectedIndex!=e$D&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e$D,this.setSelect(e$D,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),e$E(0,e$m,"labels",function(){return this._labels},function(e$D){if(this._labels!=e$D){if(this._labels=e$D,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e$m=this._labels.split(","),e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=this.createItem(this._skin,e$m[e$Y]);e$y.name="item"+e$Y,this.addChild(e$y)}this.initItems()}}),e$E(0,e$m,"strokeColors",function(){return this._strokeColors},function(e$D){this._strokeColors!=e$D&&(this._strokeColors=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelColors",function(){return this._labelColors},function(e$D){this._labelColors!=e$D&&(this._labelColors=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelStroke",function(){return this._labelStroke},function(e$D){this._labelStroke!=e$D&&(this._labelStroke=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelSize",function(){return this._labelSize},function(e$D){this._labelSize!=e$D&&(this._labelSize=e$D,this._setLabelChanged())}),e$E(0,e$m,"stateNum",function(){return this._stateNum},function(e$D){this._stateNum!=e$D&&(this._stateNum=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelBold",function(){return this._labelBold},function(e$D){this._labelBold!=e$D&&(this._labelBold=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelFont",function(){return this._labelFont},function(e$D){this._labelFont!=e$D&&(this._labelFont=e$D,this._setLabelChanged())}),e$E(0,e$m,"labelPadding",function(){return this._labelPadding},function(e$D){this._labelPadding!=e$D&&(this._labelPadding=e$D,this._setLabelChanged())}),e$E(0,e$m,"direction",function(){return this._direction},function(e$D){this._direction=e$D,this._setLabelChanged()}),e$E(0,e$m,"space",function(){return this._space},function(e$D){this._space=e$D,this._setLabelChanged()}),e$E(0,e$m,"items",function(){return this._items}),e$E(0,e$m,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e$D){this.selectedIndex=this._items.indexOf(e$D)}),e$E(0,e$m,"dataSource",e$D.prototype._$get_dataSource,function(e$D){"number"==typeof(this._dataSource=e$D)&&Math.floor(e$D)==e$D||"string"==typeof e$D?this.selectedIndex=parseInt(e$D):e$D instanceof Array?this.labels=e$D.join(","):e$I.superSet(e$C,this,"dataSource",e$D)}),e$Y}(e$C),e$j=function(e$m){function e$Y(e$D,e$m){this._value=null,void 0===e$m&&(e$m=""),e$Y.__super.call(this,e$D,e$m)}e$l(e$Y,"laya.ui.Radio",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._value=null},e$D.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},e$D.initialize=function(){e$m.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},e$D.onClick=function(e$D){this.selected=!0},e$E(0,e$D,"value",function(){return null!=this._value?this._value:this.label},function(e$D){this._value=e$D}),e$Y}(e$O),e$K=function(e$D){function e$m(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e$m.__super.call(this),this.width=this.height=200}e$l(e$m,"laya.ui.Tree",e$D);var e$Y=e$m.prototype;return e$I.imps(e$Y,{"laya.ui.IRender":!0}),e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),laya.ui.Component.prototype.destroy.call(this,e$D),this._list&&this._list.destroy(e$D),this._list=null,this._source=null,this._renderHandler=null},e$Y.createChildren=function(){this.addChild(this._list=new e$H),this._list.renderHandler=e$i.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},e$Y.onListChange=function(e$D){this.event("change")},e$Y.getArray=function(){var e$D,e$m=[];for(var e$Y in this._source)e$D=this._source[e$Y],this.getParentOpenStatus(e$D)&&(e$D.x=this._spaceLeft*this.getDepth(e$D),e$m.push(e$D));return e$m},e$Y.getDepth=function(e$D,e$m){return void 0===e$m&&(e$m=0),null==e$D.nodeParent?e$m:this.getDepth(e$D.nodeParent,e$m+1)},e$Y.getParentOpenStatus=function(e$D){var e$m=e$D.nodeParent;return null==e$m||!!e$m.isOpen&&(null==e$m.nodeParent||this.getParentOpenStatus(e$m))},e$Y.renderItem=function(e$D,e$m){var e$Y=e$D.dataSource;if(e$Y){e$D.left=e$Y.x;var e$t=e$D.getChildByName("arrow");e$t&&(e$Y.hasChild?(e$t.visible=!0,e$t.index=e$Y.isOpen?1:0,e$t.tag=e$m,e$t.off("click",this,this.onArrowClick),e$t.on("click",this,this.onArrowClick)):e$t.visible=!1);var e$y=e$D.getChildByName("folder");e$y&&(2==e$y.clipY?e$y.index=e$Y.isDirectory?0:1:e$y.index=e$Y.isDirectory?e$Y.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([e$D,e$m])}},e$Y.onArrowClick=function(e$D){var e$m=e$D.currentTarget.tag;this._list.array[e$m].isOpen=!this._list.array[e$m].isOpen,this.event("open"),this._list.array=this.getArray()},e$Y.setItemState=function(e$D,e$m){this._list.array[e$D]&&(this._list.array[e$D].isOpen=e$m,this._list.array=this.getArray())},e$Y.fresh=function(){this._list.array=this.getArray(),this.repaint()},e$Y.parseXml=function(e$D,e$m,e$Y,e$t){var e$y,e$l=e$D.childNodes,e$E=e$l.length;if(!e$t){e$y={};var e$B,e$o=e$D.attributes;for(var e$r in e$o){var e$f=(e$B=e$o[e$r]).nodeName,e$_=e$B.nodeValue;e$y[e$f]="true"==e$_||"false"!=e$_&&e$_}e$y.nodeParent=e$Y,0<e$E&&(e$y.isDirectory=!0),e$y.hasChild=0<e$E,e$m.push(e$y)}for(var e$i=0;e$i<e$E;e$i++){var e$R=e$l[e$i];this.parseXml(e$R,e$m,e$y,!1)}},e$Y.parseOpenStatus=function(e$D,e$m){for(var e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];if(e$y.isDirectory)for(var e$l=0,e$E=e$D.length;e$l<e$E;e$l++){var e$B=e$D[e$l];if(e$B.isDirectory&&this.isSameParent(e$B,e$y)&&e$y.label==e$B.label){e$y.isOpen=e$B.isOpen;break}}}},e$Y.isSameParent=function(e$D,e$m){return null==e$D.nodeParent&&null==e$m.nodeParent||null!=e$D.nodeParent&&null!=e$m.nodeParent&&(e$D.nodeParent.label==e$m.nodeParent.label&&this.isSameParent(e$D.nodeParent,e$m.nodeParent))},e$Y.filter=function(e$D){if(Boolean(e$D)){var e$m=[];this.getFilterSource(this._source,e$m,e$D),this._list.array=e$m}else this._list.array=this.getArray()},e$Y.getFilterSource=function(e$D,e$m,e$Y){var e$t;for(var e$y in e$Y=e$Y.toLocaleLowerCase(),e$D)!(e$t=e$D[e$y]).isDirectory&&-1<String(e$t.label).toLowerCase().indexOf(e$Y)&&(e$t.x=0,e$m.push(e$t)),e$t.child&&0<e$t.child.length&&this.getFilterSource(e$t.child,e$m,e$Y)},e$E(0,e$Y,"spaceBottom",function(){return this._list.spaceY},function(e$D){this._list.spaceY=e$D}),e$E(0,e$Y,"keepStatus",function(){return this._keepStatus},function(e$D){this._keepStatus=e$D}),e$E(0,e$Y,"itemRender",function(){return this._list.itemRender},function(e$D){this._list.itemRender=e$D}),e$E(0,e$Y,"array",function(){return this._list.array},function(e$D){this._keepStatus&&this._list.array&&e$D&&this.parseOpenStatus(this._list.array,e$D),this._source=e$D,this._list.array=this.getArray()}),e$E(0,e$Y,"mouseHandler",function(){return this._list.mouseHandler},function(e$D){this._list.mouseHandler=e$D}),e$E(0,e$Y,"dataSource",e$D.prototype._$get_dataSource,function(e$D){this._dataSource=e$D,e$I.superSet(e$C,this,"dataSource",e$D)}),e$E(0,e$Y,"source",function(){return this._source}),e$E(0,e$Y,"scrollBar",function(){return this._list.scrollBar}),e$E(0,e$Y,"list",function(){return this._list}),e$E(0,e$Y,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(e$D){this._list.vScrollBarSkin=e$D}),e$E(0,e$Y,"renderHandler",function(){return this._renderHandler},function(e$D){this._renderHandler=e$D}),e$E(0,e$Y,"selectedIndex",function(){return this._list.selectedIndex},function(e$D){this._list.selectedIndex=e$D}),e$E(0,e$Y,"spaceLeft",function(){return this._spaceLeft},function(e$D){this._spaceLeft=e$D}),e$E(0,e$Y,"selectedItem",function(){return this._list.selectedItem},function(e$D){this._list.selectedItem=e$D}),e$E(0,e$Y,"width",e$D.prototype._$get_width,function(e$D){e$I.superSet(e$C,this,"width",e$D),this._list.width=e$D}),e$E(0,e$Y,"height",e$D.prototype._$get_height,function(e$D){e$I.superSet(e$C,this,"height",e$D),this._list.height=e$D}),e$E(0,e$Y,"xml",null,function(e$D){var e$m=[];this.parseXml(e$D.childNodes[0],e$m,null,!0),this.array=e$m}),e$E(0,e$Y,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e$m}(e$C),e$DD=function(e$D){function e$m(){this._items=null,this._selectedIndex=0,e$m.__super.call(this),this._setIndexHandler=e$i.create(this,this.setIndex,null,!1)}e$l(e$m,"laya.ui.ViewStack",e$D);var e$Y=e$m.prototype;return e$I.imps(e$Y,{"laya.ui.IItem":!0}),e$Y.setItems=function(e$D){this.removeChildren();for(var e$m=0,e$Y=0,e$t=e$D.length;e$Y<e$t;e$Y++){var e$y=e$D[e$Y];e$y&&(e$y.name="item"+e$m,this.addChild(e$y),e$m++)}this.initItems()},e$Y.addItem=function(e$D){e$D.name="item"+this._items.length,this.addChild(e$D),this.initItems()},e$Y.initItems=function(){this._items=[];for(var e$D=0;e$D<1e4;e$D++){var e$m=this.getChildByName("item"+e$D);if(null==e$m)break;this._items.push(e$m),e$m.visible=e$D==this._selectedIndex}},e$Y.setSelect=function(e$D,e$m){this._items&&-1<e$D&&e$D<this._items.length&&(this._items[e$D].visible=e$m)},e$Y.setIndex=function(e$D){this.selectedIndex=e$D},e$E(0,e$Y,"dataSource",e$D.prototype._$get_dataSource,function(e$D){if("number"==typeof(this._dataSource=e$D)&&Math.floor(e$D)==e$D||"string"==typeof e$D)this.selectedIndex=parseInt(e$D);else for(var e$m in this._dataSource)this.hasOwnProperty(e$m)&&(this[e$m]=this._dataSource[e$m])}),e$E(0,e$Y,"selectedIndex",function(){return this._selectedIndex},function(e$D){this._selectedIndex!=e$D&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e$D,this.setSelect(this._selectedIndex,!0))}),e$E(0,e$Y,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e$D){this.selectedIndex=this._items.indexOf(e$D)}),e$E(0,e$Y,"items",function(){return this._items}),e$E(0,e$Y,"setIndexHandler",function(){return this._setIndexHandler},function(e$D){this._setIndexHandler=e$D}),e$m}(e$C),e$mD=function(e$D){function e$m(){e$m.__super.call(this)}return e$l(e$m,"laya.ui.VScrollBar",e$u),e$m}(),e$YD=function(e$m){function e$Y(e$D){this._bg=null,this._skin=null,e$Y.__super.call(this),void 0===e$D&&(e$D=""),this.text=e$D,this.skin=this.skin}e$l(e$Y,"laya.ui.TextInput",e$m);var e$D=e$Y.prototype;return e$D.preinitialize=function(){this.mouseEnabled=!0},e$D.destroy=function(e$D){e$U.clearCache(this,this._skin),void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._bg&&this._bg.destroy(),this._bg=null},e$D.createChildren=function(){this.addChild(this._tf=new e$R),this._tf.padding=e$p.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},e$D._onFocus=function(){this.event("focus",this)},e$D._onBlur=function(){this.event("blur",this)},e$D._onInput=function(){this.event("input",this)},e$D._onEnter=function(){this.event("enter",this)},e$D.initialize=function(){this.width=128,this.height=22},e$D.select=function(){this._tf.select()},e$D.setSelection=function(e$D,e$m){this._tf.setSelection(e$D,e$m)},e$E(0,e$D,"text",e$m.prototype._$get_text,function(e$D){this._tf.text!=e$D&&(e$D+="",this._tf.text=e$D,this.event("change"))}),e$E(0,e$D,"bg",function(){return this._bg},function(e$D){this.graphics=this._bg=e$D}),e$E(0,e$D,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(e$D){this._tf.inputElementYAdjuster=e$D}),e$E(0,e$D,"multiline",function(){return this._tf.multiline},function(e$D){this._tf.multiline=e$D}),e$E(0,e$D,"skin",function(){return this._skin},function(e$D){this._skin!=e$D&&(e$U.clearCache(this,this._skin),this._skin=e$D,this._bg||(this.graphics=this._bg=new e$Q),e$U.keepCache(this,this._skin),this._bg.source=e$U.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),e$E(0,e$D,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(e$D){this._bg||(this.graphics=this._bg=new e$Q),this._bg.sizeGrid=e$F.fillArray(e$p.defaultSizeGrid,e$D,Number)}),e$E(0,e$D,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(e$D){this._tf.inputElementXAdjuster=e$D}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$$,this,"width",e$D),this._bg&&(this._bg.width=e$D)}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$$,this,"height",e$D),this._bg&&(this._bg.height=e$D)}),e$E(0,e$D,"editable",function(){return this._tf.editable},function(e$D){this._tf.editable=e$D}),e$E(0,e$D,"restrict",function(){return this._tf.restrict},function(e$D){this._tf.restrict=e$D}),e$E(0,e$D,"prompt",function(){return this._tf.prompt},function(e$D){this._tf.prompt=e$D}),e$E(0,e$D,"promptColor",function(){return this._tf.promptColor},function(e$D){this._tf.promptColor=e$D}),e$E(0,e$D,"maxChars",function(){return this._tf.maxChars},function(e$D){this._tf.maxChars=e$D}),e$E(0,e$D,"focus",function(){return this._tf.focus},function(e$D){this._tf.focus=e$D}),e$E(0,e$D,"type",function(){return this._tf.type},function(e$D){this._tf.type=e$D}),e$E(0,e$D,"asPassword",function(){return this._tf.asPassword},function(e$D){this._tf.asPassword=e$D}),e$Y}(e$$),e$tD=function(e$D){function e$m(){e$m.__super.call(this)}return e$l(e$m,"laya.ui.VSlider",e$L),e$m}(),e$yD=function(e$D){function e$t(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,e$t.__super.call(this)}e$l(e$t,"laya.ui.Dialog",e$D);var e$m=e$t.prototype;return e$m.initialize=function(){this.popupEffect=e$t.manager.popupEffectHandler,this.closeEffect=e$t.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},e$m._dealDragArea=function(){var e$D=this.getChildByName("drag");e$D&&(this.dragArea=e$D.x+","+e$D.y+","+e$D.width+","+e$D.height,e$D.removeSelf())},e$m._onClick=function(e$D){var e$m=e$D.target;if(e$m)switch(e$m.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(e$m.name)}},e$m.show=function(e$D,e$m){void 0===e$D&&(e$D=!1),void 0===e$m&&(e$m=!0),this._open(!1,e$D,e$m)},e$m.popup=function(e$D,e$m){void 0===e$D&&(e$D=!1),void 0===e$m&&(e$m=!0),this._open(!0,e$D,e$m)},e$m._open=function(e$D,e$m,e$Y){e$t.manager.lock(!1),this.isModal=e$D,e$t.manager.open(this,e$m,e$Y)},e$m.onOpened=function(){},e$m.close=function(e$D,e$m){void 0===e$m&&(e$m=!0),e$t.manager.close(this,e$D,e$m)},e$m.onClosed=function(e$D){},e$m._onMouseDown=function(e$D){var e$m=this.getMousePoint();this._dragArea.contains(e$m.x,e$m.y)?this.startDrag():this.stopDrag()},e$E(0,e$m,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(e$D){if(e$D){var e$m=e$F.fillArray([0,0,0,0],e$D,Number);this._dragArea=new e$W(e$m[0],e$m[1],e$m[2],e$m[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),e$E(0,e$m,"isPopup",function(){return null!=this.parent}),e$E(0,e$m,"zOrder",e$D.prototype._$get_zOrder,function(e$D){e$I.superSet(e$k,this,"zOrder",e$D),e$t.manager._checkMask()}),e$E(1,e$t,"manager",function(){return e$t._manager=e$t._manager||new e$N},function(e$D){e$t._manager=e$D}),e$t.setLockView=function(e$D){e$t.manager.setLockView(e$D)},e$t.lock=function(e$D){e$t.manager.lock(e$D)},e$t.closeAll=function(){e$t.manager.closeAll()},e$t.getDialogsByGroup=function(e$D){return e$t.manager.getDialogsByGroup(e$D)},e$t.closeByGroup=function(e$D){return e$t.manager.closeByGroup(e$D)},e$t.CLOSE="close",e$t.CANCEL="cancel",e$t.SURE="sure",e$t.NO="no",e$t.OK="ok",e$t.YES="yes",e$t._manager=null,e$t}(e$k),e$lD=function(e$D){function e$m(){e$m.__super.call(this)}e$l(e$m,"laya.ui.HBox",e$D);var e$Y=e$m.prototype;return e$Y.sortItem=function(e$D){e$D&&e$D.sort(function(e$D,e$m){return e$D.x-e$m.x})},e$Y.changeItems=function(){this._itemChanged=!1;for(var e$D=[],e$m=0,e$Y=0,e$t=this.numChildren;e$Y<e$t;e$Y++){var e$y=this.getChildAt(e$Y);e$y&&e$y.layoutEnabled&&(e$D.push(e$y),e$m=this._height?this._height:Math.max(e$m,e$y.height*e$y.scaleY))}this.sortItem(e$D);var e$l=0;for(e$Y=0,e$t=e$D.length;e$Y<e$t;e$Y++)(e$y=e$D[e$Y]).x=e$l,e$l+=e$y.width*e$y.scaleX+this._space,"top"==this._align?e$y.y=0:"middle"==this._align?e$y.y=.5*(e$m-e$y.height*e$y.scaleY):"bottom"==this._align&&(e$y.y=e$m-e$y.height*e$y.scaleY);this.changeSize()},e$E(0,e$Y,"height",e$D.prototype._$get_height,function(e$D){this._height!=e$D&&(e$I.superSet(e$n,this,"height",e$D),this.callLater(this.changeItems))}),e$m.NONE="none",e$m.TOP="top",e$m.MIDDLE="middle",e$m.BOTTOM="bottom",e$m}(e$n),e$ED=function(e$D){function e$m(){e$m.__super.call(this)}e$l(e$m,"laya.ui.VBox",e$D);var e$Y=e$m.prototype;return e$Y.changeItems=function(){this._itemChanged=!1;for(var e$D=[],e$m=0,e$Y=0,e$t=this.numChildren;e$Y<e$t;e$Y++){var e$y=this.getChildAt(e$Y);e$y&&e$y.layoutEnabled&&(e$D.push(e$y),e$m=this._width?this._width:Math.max(e$m,e$y.width*e$y.scaleX))}this.sortItem(e$D);var e$l=0;for(e$Y=0,e$t=e$D.length;e$Y<e$t;e$Y++)(e$y=e$D[e$Y]).y=e$l,e$l+=e$y.height*e$y.scaleY+this._space,"left"==this._align?e$y.x=0:"center"==this._align?e$y.x=.5*(e$m-e$y.width*e$y.scaleX):"right"==this._align&&(e$y.x=e$m-e$y.width*e$y.scaleX);this.changeSize()},e$E(0,e$Y,"width",e$D.prototype._$get_width,function(e$D){this._width!=e$D&&(e$I.superSet(e$n,this,"width",e$D),this.callLater(this.changeItems))}),e$m.NONE="none",e$m.LEFT="left",e$m.CENTER="center",e$m.RIGHT="right",e$m}(e$n),e$BD=function(e$D){function e$m(){e$m.__super.call(this)}return e$l(e$m,"laya.ui.RadioGroup",e$b),e$m.prototype.createItem=function(e$D,e$m){return new e$j(e$D,e$m)},e$m}(),e$oD=function(e$D){function e$m(){e$m.__super.call(this)}return e$l(e$m,"laya.ui.Tab",e$b),e$m.prototype.createItem=function(e$D,e$m){return new e$O(e$D,e$m)},e$m}(),e$rD=function(e$m){function e$Y(e$D){this._vScrollBar=null,this._hScrollBar=null,void 0===e$D&&(e$D=""),e$Y.__super.call(this,e$D)}e$l(e$Y,"laya.ui.TextArea",e$m);var e$D=e$Y.prototype;return e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},e$D.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},e$D.onVBarChanged=function(e$D){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},e$D.onHBarChanged=function(e$D){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},e$D.changeScroll=function(){var e$D=this._vScrollBar&&0<this._tf.maxScrollY,e$m=this._hScrollBar&&0<this._tf.maxScrollX,e$Y=e$D?this._width-this._vScrollBar.width:this._width,e$t=e$m?this._height-this._hScrollBar.height:this._height,e$y=this._tf.padding||e$p.labelPadding;this._tf.width=e$Y,this._tf.height=e$t,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-e$y[2],this._vScrollBar.y=e$y[1],this._vScrollBar.height=this._height-(e$m?this._hScrollBar.height:0)-e$y[1]-e$y[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=e$t/Math.max(this._tf.textHeight,e$t),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=e$D),this._hScrollBar&&(this._hScrollBar.x=e$y[0],this._hScrollBar.y=this._height-this._hScrollBar.height-e$y[3],this._hScrollBar.width=this._width-(e$D?this._vScrollBar.width:0)-e$y[0]-e$y[2],this._hScrollBar.scrollSize=Math.max(.033*e$Y,1),this._hScrollBar.thumbPercent=e$Y/Math.max(this._tf.textWidth,e$Y),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e$m)},e$D.scrollTo=function(e$D){this.commitMeasure(),this._tf.scrollY=e$D},e$E(0,e$D,"scrollY",function(){return this._tf.scrollY}),e$E(0,e$D,"width",e$m.prototype._$get_width,function(e$D){e$I.superSet(e$YD,this,"width",e$D),this.callLater(this.changeScroll)}),e$E(0,e$D,"hScrollBar",function(){return this._hScrollBar}),e$E(0,e$D,"height",e$m.prototype._$get_height,function(e$D){e$I.superSet(e$YD,this,"height",e$D),this.callLater(this.changeScroll)}),e$E(0,e$D,"maxScrollX",function(){return this._tf.maxScrollX}),e$E(0,e$D,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e$D){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new e$mD),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=e$D}),e$E(0,e$D,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e$D){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new e$x),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=e$D}),e$E(0,e$D,"vScrollBar",function(){return this._vScrollBar}),e$E(0,e$D,"maxScrollY",function(){return this._tf.maxScrollY}),e$E(0,e$D,"scrollX",function(){return this._tf.scrollX}),e$Y}(e$YD);!function(e$D){function e$m(){this._uiView=null,this.isCloseOther=!1,e$m.__super.call(this)}e$l(e$m,"laya.ui.AsynDialog",e$yD);var e$Y=e$m.prototype;e$Y.createView=function(e$D){this._uiView=e$D},e$Y._open=function(e$D,e$m,e$Y){this.isModal=e$D,this.isCloseOther=e$m,e$yD.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},e$Y.onCreated=function(){this.createUI(),this.onOpen()},e$Y.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},e$Y.onOpen=function(){e$yD.manager.open(this,this.isCloseOther),e$yD.manager.lock(!1)},e$Y.close=function(e$D,e$m){void 0===e$m&&(e$m=!0),e$yD.manager.close(this),this.onClose()},e$Y.onClose=function(){},e$Y.destroy=function(e$D){void 0===e$D&&(e$D=!0),laya.ui.View.prototype.destroy.call(this,e$D),this._uiView=null,this.onDestroy()},e$Y.onDestroy=function(){}}();e$I.__init([e$k])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$i,e$D,e$c){e$c.un,e$c.uns;var e$_=e$c.static,e$R=e$c.class,e$G=e$c.getset,e$t=e$c.__newvec,e$v=laya.maths.Arith,e$E=laya.webgl.atlas.AtlasResourceManager,e$Y=laya.webgl.shader.BaseShader,e$T=laya.utils.Browser,e$B=laya.webgl.utils.Buffer,e$S=laya.utils.Byte,e$o=laya.utils.ClassUtils,e$r=e$c.Config,e$l=(laya.events.Event,laya.events.EventDispatcher),e$p=laya.utils.Handler,e$W=laya.net.Loader,e$m=laya.net.LoaderManager,e$f=(laya.maths.MathUtil,laya.display.Node),e$I=laya.renders.Render,e$y=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),e$w=laya.resource.Resource,e$U=laya.utils.RunDriver,e$e=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),e$z=laya.display.Sprite,e$A=laya.utils.Stat,e$J=laya.utils.StringKey,e$F=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),e$a=laya.utils.Utils,e$s=laya.webgl.WebGL,e$Q=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;e$c.interface("laya.d3.core.IClone"),e$c.interface("laya.d3.graphics.IVertex"),e$c.interface("laya.d3.core.render.IUpdate"),e$c.interface("laya.d3.core.scene.ITreeNode"),e$c.interface("laya.d3.core.render.IRenderable");(function(){function e$O(){}e$R(e$O,"laya.d3.animation.AnimationClipParser01"),e$O.READ_DATA=function(){e$O._DATA.offset=e$O._reader.getUint32(),e$O._DATA.size=e$O._reader.getUint32()},e$O.READ_BLOCK=function(){for(var e$D=e$O._BLOCK.count=e$O._reader.getUint16(),e$m=e$O._BLOCK.blockStarts=[],e$Y=e$O._BLOCK.blockLengths=[],e$t=0;e$t<e$D;e$t++)e$m.push(e$O._reader.getUint32()),e$Y.push(e$O._reader.getUint32())},e$O.READ_STRINGS=function(){var e$D=e$O._reader.getUint32(),e$m=e$O._reader.getUint16(),e$Y=e$O._reader.pos;e$O._reader.pos=e$D+e$O._DATA.offset;for(var e$t=0;e$t<e$m;e$t++)e$O._strings[e$t]=e$O._reader.readUTFString();e$O._reader.pos=e$Y},e$O.parse=function(e$D,e$m){e$O._animationClip=e$D;(e$O._reader=e$m).__getBuffer();e$O.READ_DATA(),e$O.READ_BLOCK(),e$O.READ_STRINGS();for(var e$Y=0,e$t=e$O._BLOCK.count;e$Y<e$t;e$Y++){var e$y=e$m.getUint16(),e$l=e$O._strings[e$y],e$E=e$O["READ_"+e$l];if(null==e$E)throw new Error("model file err,no this function:"+e$y+" "+e$l);e$E.call()}},e$O.READ_ANIMATIONS=function(){var e$D,e$m=0,e$Y=0,e$t=e$O._reader,e$y=e$t.__getBuffer(),e$l=[],e$E=e$t.getUint8();for(e$l.length=e$E,e$m=0;e$m<e$E;e$m++)e$l[e$m]=e$t.getUint16();var e$B=[],e$o=e$t.getUint16();for(e$B.length=e$o,e$m=0;e$m<e$o;e$m++)e$B[e$m]=e$t.getFloat32();var e$r=e$O._animationClip;e$r.name=e$O._strings[e$t.getUint16()];var e$f=e$r._duration=e$t.getFloat32();e$r.islooping=!!e$t.getByte(),e$r._frameRate=e$t.getInt16();var e$_=e$t.getInt16(),e$i=e$r._nodes=new Array;e$i.length=e$_,(e$r._publicClipDatas=[]).length=e$_;var e$R=e$r._nodesMap={},e$G=0,e$I=0;for(e$m=0;e$m<e$_;e$m++){e$D=e$i[e$m]=new e$d;var e$w=e$t.getUint16(),e$W=e$D.path=[];for(e$W.length=e$w,e$Y=0;e$Y<e$w;e$Y++)e$W[e$Y]=e$O._strings[e$t.getUint16()];var e$U=e$W.join("/"),e$e=e$R[e$U];e$e||(e$R[e$U]=e$e=[]),e$e.push(e$D);var e$v=e$t.getInt16();-1!==e$v&&(e$D.componentType=e$O._strings[e$v]);var e$c=e$q._propertyIndexDic[e$O._strings[e$t.getUint16()]];if(null==e$c)throw new Error("AnimationClipParser01:unknown property name.");var e$S=e$c<4,e$z=!e$S||e$S&&""===e$W[0];(e$D._cacheProperty=e$z)?e$G++:e$I++,e$D.propertyNameID=e$c;var e$A=e$l[e$t.getUint8()];e$D.keyFrameWidth=e$A/4;var e$J=e$D.keyFrames=[],e$a=e$J.length=e$t.getUint16(),e$p=null,e$F=NaN;for(e$Y=0;e$Y<e$a;e$Y++){var e$s=e$J[e$Y]=new e$$;e$F=e$s.startTime=e$B[e$t.getUint16()];var e$Q=e$t.pos;e$s.inTangent=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$Q=e$t.pos,e$s.outTangent=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$Q=e$t.pos,e$s.data=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$p&&(e$p.next=e$s,e$p.duration=e$F-e$p.startTime),e$p=e$s}e$s.next=null,e$s.duration=e$f-e$F}var e$T=e$r._nodeToCachePropertyMap=new Int32Array(e$_),e$N=e$r._cachePropertyMap=new Int32Array(e$G),e$C=e$r._unCachePropertyMap=new Int32Array(e$I);for(e$G=e$I=0,e$m=0;e$m<e$_;e$m++)(e$D=e$i[e$m])._cacheProperty?(e$T[e$m]=e$G,e$N[e$G++]=e$m):e$C[e$I++]=e$m},e$O._animationClip=null,e$O._reader=null,e$O._strings=[],e$_(e$O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function e$u(){}e$R(e$u,"laya.d3.animation.AnimationClipParser02"),e$u.READ_DATA=function(){e$u._DATA.offset=e$u._reader.getUint32(),e$u._DATA.size=e$u._reader.getUint32()},e$u.READ_BLOCK=function(){for(var e$D=e$u._BLOCK.count=e$u._reader.getUint16(),e$m=e$u._BLOCK.blockStarts=[],e$Y=e$u._BLOCK.blockLengths=[],e$t=0;e$t<e$D;e$t++)e$m.push(e$u._reader.getUint32()),e$Y.push(e$u._reader.getUint32())},e$u.READ_STRINGS=function(){var e$D=e$u._reader.getUint32(),e$m=e$u._reader.getUint16(),e$Y=e$u._reader.pos;e$u._reader.pos=e$D+e$u._DATA.offset;for(var e$t=0;e$t<e$m;e$t++)e$u._strings[e$t]=e$u._reader.readUTFString();e$u._reader.pos=e$Y},e$u.parse=function(e$D,e$m){e$u._animationClip=e$D;(e$u._reader=e$m).__getBuffer();e$u.READ_DATA(),e$u.READ_BLOCK(),e$u.READ_STRINGS();for(var e$Y=0,e$t=e$u._BLOCK.count;e$Y<e$t;e$Y++){var e$y=e$m.getUint16(),e$l=e$u._strings[e$y],e$E=e$u["READ_"+e$l];if(null==e$E)throw new Error("model file err,no this function:"+e$y+" "+e$l);e$E.call()}},e$u.READ_ANIMATIONS=function(){var e$D,e$m=0,e$Y=0,e$t=e$u._reader,e$y=e$t.__getBuffer(),e$l=[],e$E=e$t.getUint8();for(e$l.length=e$E,e$m=0;e$m<e$E;e$m++)e$l[e$m]=e$t.getUint16();var e$B=[],e$o=e$t.getUint16();for(e$B.length=e$o,e$m=0;e$m<e$o;e$m++)e$B[e$m]=e$t.getFloat32();var e$r=e$u._animationClip;e$r.name=e$u._strings[e$t.getUint16()];var e$f=e$r._duration=e$t.getFloat32();e$r.islooping=!!e$t.getByte(),e$r._frameRate=e$t.getInt16();var e$_=e$t.getInt16(),e$i=e$r._nodes=new Array;e$i.length=e$_,(e$r._publicClipDatas=[]).length=e$_;var e$R=e$r._nodesMap={},e$G=0,e$I=0;for(e$m=0;e$m<e$_;e$m++){e$D=e$i[e$m]=new e$d;var e$w=e$t.getUint16(),e$W=e$D.path=[];for(e$W.length=e$w,e$Y=0;e$Y<e$w;e$Y++)e$W[e$Y]=e$u._strings[e$t.getUint16()];var e$U=e$W.join("/"),e$e=e$R[e$U];e$e||(e$R[e$U]=e$e=[]),e$e.push(e$D);var e$v=e$t.getInt16();-1!==e$v&&(e$D.componentType=e$u._strings[e$v]);var e$c=e$q._propertyIndexDic[e$u._strings[e$t.getUint16()]];if(null==e$c)throw new Error("AnimationClipParser02:unknown property name.");var e$S=e$c<4,e$z=!e$S||e$S&&""===e$W[0];(e$D._cacheProperty=e$z)?e$G++:e$I++,e$D.propertyNameID=e$c;var e$A=e$l[e$t.getUint8()];e$D.keyFrameWidth=e$A/4;var e$J=e$D.keyFrames=[],e$a=e$J.length=e$t.getUint16(),e$p=null,e$F=NaN;for(e$Y=0;e$Y<e$a;e$Y++){var e$s=e$J[e$Y]=new e$$;e$F=e$s.startTime=e$B[e$t.getUint16()];var e$Q=e$t.pos;e$s.inTangent=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$Q=e$t.pos,e$s.outTangent=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$Q=e$t.pos,e$s.data=new Float32Array(e$y.slice(e$Q,e$Q+e$A)),e$t.pos+=e$A,e$p&&(e$p.next=e$s,e$p.duration=e$F-e$p.startTime),e$p=e$s}e$s.next=null,e$s.duration=e$f-e$F}var e$T=e$t.getUint16();for(e$m=0;e$m<e$T;e$m++){var e$N,e$C=new e$L;e$C.time=e$t.getFloat32(),e$C.eventName=e$u._strings[e$t.getUint16()];var e$O=e$t.getUint16();for(0<e$O&&(e$C.params=e$N=[]),e$Y=0;e$Y<e$O;e$Y++){switch(e$t.getByte()){case 0:e$N.push(!!e$t.getByte());break;case 1:e$N.push(e$t.getInt32());break;case 2:e$N.push(e$t.getFloat32());break;case 3:e$N.push(e$u._strings[e$t.getUint16()]);break;default:throw new Error("unknown type.")}}e$r.addEvent(e$C)}var e$h=e$r._nodeToCachePropertyMap=new Int32Array(e$_),e$X=e$r._cachePropertyMap=new Int32Array(e$G),e$P=e$r._unCachePropertyMap=new Int32Array(e$I);for(e$G=e$I=0,e$m=0;e$m<e$_;e$m++)(e$D=e$i[e$m])._cacheProperty?(e$h[e$m]=e$G,e$X[e$G++]=e$m):e$P[e$I++]=e$m},e$u._animationClip=null,e$u._reader=null,e$u._strings=[],e$_(e$u,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var e$L=function(){function e$D(){this.time=NaN,this.eventName=null,this.params=null}return e$R(e$D,"laya.d3.animation.AnimationEvent"),e$D}(),e$q=function(){function e$t(){this._childs=[],this.transform=new e$cm(this)}e$R(e$t,"laya.d3.animation.AnimationNode");var e$D=e$t.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.addChild=function(e$D){e$D._parent=this,e$D.transform.setParent(this.transform),this._childs.push(e$D)},e$D.removeChild=function(e$D){var e$m=this._childs.indexOf(e$D);-1!==e$m&&this._childs.splice(e$m,1)},e$D.getChildByName=function(e$D){for(var e$m=0,e$Y=this._childs.length;e$m<e$Y;e$m++){var e$t=this._childs[e$m];if(e$t.name===e$D)return e$t}return null},e$D.getChildByIndex=function(e$D){return this._childs[e$D]},e$D.getChildCount=function(){return this._childs.length},e$D.cloneTo=function(e$D){var e$m=e$D;e$m.name=this.name;for(var e$Y=0,e$t=this._childs.length;e$Y<e$t;e$Y++){var e$y=this._childs[e$Y],e$l=e$y.clone();e$m.addChild(e$l);var e$E=e$y.transform,e$B=e$l.transform;e$B.setLocalPosition(e$E.getLocalPosition()),e$B.setLocalRotation(e$E.getLocalRotation()),e$B.setLocalScale(e$E.getLocalScale()),e$B._localRotationEuler=e$E._localRotationEuler,e$B._setWorldMatrixIgnoreUpdate(e$E.getWorldMatrix())}},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$t.__init__=function(){e$t.registerAnimationNodeProperty("localPosition",e$t._getLocalPosition,e$t._setLocalPosition),e$t.registerAnimationNodeProperty("localRotation",e$t._getLocalRotation,e$t._setLocalRotation),e$t.registerAnimationNodeProperty("localScale",e$t._getLocalScale,e$t._setLocalScale),e$t.registerAnimationNodeProperty("localRotationEuler",e$t._getLocalRotationEuler,e$t._setLocalRotationEuler),e$t.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",e$t._getParticleRenderSharedMaterialTintColor,e$t._setParticleRenderSharedMaterialTintColor),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",e$t._getMeshRenderSharedMaterialTilingOffset,e$t._setMeshRenderSharedMaterialTilingOffset),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",e$t._getMeshRenderSharedMaterialAlbedo,e$t._setMeshRenderSharedMaterialAlbedo),e$t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",e$t._getSkinnedMeshRenderSharedMaterialTilingOffset,e$t._setSkinnedMeshRenderSharedMaterialTilingOffset),e$t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",e$t._getSkinnedMeshRenderSharedMaterialAlbedo,e$t._setSkinnedMeshRenderSharedMaterialAlbedo),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",e$t._getMeshRenderSharedMaterialAlbedo,e$t._setMeshRenderSharedMaterialAlbedo),e$t.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",e$t._getSkinnedMeshRenderSharedMaterialAlbedo,e$t._setSkinnedMeshRenderSharedMaterialAlbedo),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",e$t._getMeshRenderSharedMaterialIntensity,e$t._setMeshRenderSharedMaterialIntensity),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",e$t._getMeshRenderSharedMaterialAlpha,e$t._setMeshRenderSharedMaterialAlpha),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",e$t._getMeshRenderSharedMaterialAlphaColor,e$t._setMeshRenderSharedMaterialAlphaColor),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",e$t._getMeshRenderSharedMaterialBaseColor,e$t._setMeshRenderSharedMaterialBaseColor),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",e$t._getMeshRenderSharedMaterialDissolve,e$t._setMeshRenderSharedMaterialDissolve),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",e$t._getMeshRenderSharedMaterialDissolveSpeed,e$t._setMeshRenderSharedMaterialDissolveSpeed),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",e$t._getMeshRenderSharedMaterialMMultiplier,e$t._setMeshRenderSharedMaterialMMultiplier),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",e$t._getMeshRenderSharedMaterialBaseScrollSpeedX,e$t._setMeshRenderSharedMaterialBaseScrollSpeedX),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",e$t._getMeshRenderSharedMaterialBaseScrollSpeedY,e$t._setMeshRenderSharedMaterialBaseScrollSpeedY),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",e$t._getMeshRenderSharedMaterialSecondScrollSpeedX,e$t._setMeshRenderSharedMaterialSecondScrollSpeedX),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",e$t._getMeshRenderSharedMaterialSecondScrollSpeedY,e$t._setMeshRenderSharedMaterialSecondScrollSpeedY),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",e$t._getMeshRenderSharedMaterialDetailTilingOffset,e$t._setMeshRenderSharedMaterialDetailTilingOffset),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",e$t._getMeshRenderSharedMaterialDissolveTilingOffset,e$t._setMeshRenderSharedMaterialDissolveTilingOffset),e$t.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",e$t._getMeshRenderSharedMaterialMaskTilingOffset,e$t._setMeshRenderSharedMaterialMaskTilingOffset)},e$t.registerAnimationNodeProperty=function(e$D,e$m,e$Y){if(e$t._propertyIndexDic[e$D])throw new Error("AnimationNode: this propertyName has registered.");e$t._propertyIndexDic[e$D]=e$t._propertyIDCounter,e$t._propertyGetFuncs[e$t._propertyIDCounter]=e$m,e$t._propertySetFuncs[e$t._propertyIDCounter]=e$Y,e$t._propertyIDCounter++},e$t._getLocalPosition=function(e$D,e$m){return e$D?e$D.transform.getLocalPosition():e$m._transform.localPosition.elements},e$t._setLocalPosition=function(e$D,e$m,e$Y){if(e$D)e$D.transform.setLocalPosition(e$Y);else{var e$t=e$m._transform,e$y=e$t.localPosition;e$y.elements=e$Y,e$t.localPosition=e$y}},e$t._getLocalRotation=function(e$D,e$m){return e$D?e$D.transform.getLocalRotation():e$m._transform.localRotation.elements},e$t._setLocalRotation=function(e$D,e$m,e$Y){if(e$D)e$D.transform.setLocalRotation(e$Y);else{var e$t=e$m._transform,e$y=e$t.localRotation;e$y.elements=e$Y,e$t.localRotation=e$y}},e$t._getLocalScale=function(e$D,e$m){return e$D?e$D.transform.getLocalScale():e$m._transform.localScale.elements},e$t._setLocalScale=function(e$D,e$m,e$Y){if(e$D)e$D.transform.setLocalScale(e$Y);else{var e$t=e$m._transform,e$y=e$t.localScale;e$y.elements=e$Y,e$t.localScale=e$y}},e$t._getLocalRotationEuler=function(e$D,e$m){return e$D?e$D.transform.getLocalRotationEuler():e$m._transform.localRotationEuler.elements},e$t._setLocalRotationEuler=function(e$D,e$m,e$Y){if(e$D)e$D.transform.setLocalRotationEuler(e$Y);else{var e$t=e$m._transform,e$y=e$t.localRotationEuler;e$y.elements=e$Y,e$t.localRotationEuler=e$y}},e$t._getMeshRenderSharedMaterialTilingOffset=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return e$m.meshRender.sharedMaterial.tilingOffset.elements},e$t._setMeshRenderSharedMaterialTilingOffset=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).tilingOffset).elements=e$Y,e$t.tilingOffset=e$y)}else(e$y=(e$t=e$m.meshRender.material).tilingOffset).elements=e$Y,e$t.tilingOffset=e$y},e$t._getMeshRenderSharedMaterialAlbedo=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.albedoColor.elements:null}return e$m.meshRender.sharedMaterial.albedoColor.elements},e$t._setMeshRenderSharedMaterialAlbedo=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).albedoColor).elements=e$Y,e$t.albedoColor=e$y)}else(e$y=(e$t=e$m.meshRender.material).albedoColor).elements=e$Y,e$t.albedoColor=e$y},e$t._getSkinnedMeshRenderSharedMaterialTilingOffset=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return e$m.skinnedMeshRender.sharedMaterial.tilingOffset.elements},e$t._setSkinnedMeshRenderSharedMaterialTilingOffset=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.skinnedMeshRender.material).tilingOffset).elements=e$Y,e$t.tilingOffset=e$y)}else(e$y=(e$t=e$m.skinnedMeshRender.material).tilingOffset).elements=e$Y,e$t.tilingOffset=e$y},e$t._getSkinnedMeshRenderSharedMaterialAlbedo=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return e$m.skinnedMeshRender.sharedMaterial.albedoColor.elements},e$t._setSkinnedMeshRenderSharedMaterialAlbedo=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.skinnedMeshRender.material).albedoColor).elements=e$Y,e$t.albedoColor=e$y)}else(e$y=(e$t=e$m.skinnedMeshRender.material).albedoColor).elements=e$Y,e$t.albedoColor=e$y},e$t._getParticleRenderSharedMaterialTintColor=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.particleRender.sharedMaterial.tintColor.elements:null}return e$m.particleRender.sharedMaterial.tintColor.elements},e$t._setParticleRenderSharedMaterialTintColor=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.particleRender.material).tintColor).elements=e$Y,e$t.tintColor=e$y)}else(e$y=(e$t=e$m.particleRender.material).tintColor).elements=e$Y,e$t.tintColor=e$y},e$t._getMeshRenderSharedMaterialAlphaColor=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.alphaColor.elements:null}return e$m.meshRender.sharedMaterial.alphaColor.elements},e$t._setMeshRenderSharedMaterialAlphaColor=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).alphaColor).elements=e$Y,e$t.alphaColor=e$y)}else(e$y=(e$t=e$m.meshRender.material).alphaColor).elements=e$Y,e$t.alphaColor=e$y},e$t._getMeshRenderSharedMaterialBaseColor=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.baseColor.elements:null}return e$m.meshRender.sharedMaterial.baseColor.elements},e$t._setMeshRenderSharedMaterialBaseColor=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).baseColor).elements=e$Y,e$t.baseColor=e$y)}else(e$y=(e$t=e$m.meshRender.material).baseColor).elements=e$Y,e$t.baseColor=e$y},e$t._getMeshRenderSharedMaterialDissolve=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.dissolve:0}return e$m.meshRender.sharedMaterial.dissolve},e$t._setMeshRenderSharedMaterialDissolve=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.dissolve=e$Y[0])}else e$m.meshRender.material.dissolve=e$Y[0]},e$t._getMeshRenderSharedMaterialDissolveSpeed=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.dissolveSpeed:0}return e$m.meshRender.sharedMaterial.dissolveSpeed},e$t._setMeshRenderSharedMaterialDissolveSpeed=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.dissolveSpeed=e$Y[0])}else e$m.meshRender.material.dissolveSpeed=e$Y[0]},e$t._getMeshRenderSharedMaterialMMultiplier=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.mMultiplier:0}return e$m.meshRender.sharedMaterial.mMultiplier},e$t._setMeshRenderSharedMaterialMMultiplier=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.mMultiplier=e$Y[0])}else e$m.meshRender.material.mMultiplier=e$Y[0]},e$t._getMeshRenderSharedMaterialBaseScrollSpeedX=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return e$m.meshRender.sharedMaterial.baseScrollSpeedX},e$t._setMeshRenderSharedMaterialBaseScrollSpeedX=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.baseScrollSpeedX=e$Y[0])}else e$m.meshRender.material.baseScrollSpeedX=e$Y[0]},e$t._getMeshRenderSharedMaterialBaseScrollSpeedY=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return e$m.meshRender.sharedMaterial.baseScrollSpeedY},e$t._setMeshRenderSharedMaterialBaseScrollSpeedY=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.baseScrollSpeedY=e$Y[0])}else e$m.meshRender.material.baseScrollSpeedY=e$Y[0]},e$t._getMeshRenderSharedMaterialSecondScrollSpeedX=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return e$m.meshRender.sharedMaterial.secondScrollSpeedX},e$t._setMeshRenderSharedMaterialSecondScrollSpeedX=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.secondScrollSpeedX=e$Y[0])}else e$m.meshRender.material.secondScrollSpeedX=e$Y[0]},e$t._getMeshRenderSharedMaterialSecondScrollSpeedY=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return e$m.meshRender.sharedMaterial.secondScrollSpeedY},e$t._setMeshRenderSharedMaterialSecondScrollSpeedY=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.secondScrollSpeedY=e$Y[0])}else e$m.meshRender.material.secondScrollSpeedY=e$Y[0]},e$t._getMeshRenderSharedMaterialAlpha=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.alpha:0}return e$m.meshRender.sharedMaterial.alpha},e$t._setMeshRenderSharedMaterialAlpha=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.alpha=e$Y[0])}else e$m.meshRender.material.alpha=e$Y[0]},e$t._getMeshRenderSharedMaterialIntensity=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.intensity:0}return e$m.meshRender.sharedMaterial.intensity},e$t._setMeshRenderSharedMaterialIntensity=function(e$D,e$m,e$Y){if(e$D){var e$t=e$D.transform._entity;e$t&&(e$t.owner.meshRender.material.intensity=e$Y[0])}else e$m.meshRender.material.intensity=e$Y[0]},e$t._getMeshRenderSharedMaterialDetailTilingOffset=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return e$m.meshRender.sharedMaterial.detailTilingOffset.elements},e$t._setMeshRenderSharedMaterialDetailTilingOffset=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).detailTilingOffset).elements=e$Y,e$t.detailTilingOffset=e$y)}else(e$y=(e$t=e$m.meshRender.material).detailTilingOffset).elements=e$Y,e$t.detailTilingOffset=e$y},e$t._getMeshRenderSharedMaterialDissolveTilingOffset=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return e$m.meshRender.sharedMaterial.dissolveTilingOffset.elements},e$t._setMeshRenderSharedMaterialDissolveTilingOffset=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).dissolveTilingOffset).elements=e$Y,e$t.dissolveTilingOffset=e$y)}else(e$y=(e$t=e$m.meshRender.material).dissolveTilingOffset).elements=e$Y,e$t.dissolveTilingOffset=e$y},e$t._getMeshRenderSharedMaterialMaskTilingOffset=function(e$D,e$m){if(e$D){var e$Y=e$D.transform._entity;return e$Y?e$Y.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return e$m.meshRender.sharedMaterial.maskTilingOffset.elements},e$t._setMeshRenderSharedMaterialMaskTilingOffset=function(e$D,e$m,e$Y){var e$t,e$y;if(e$D){var e$l=e$D.transform._entity;e$l&&((e$y=(e$t=e$l.owner.meshRender.material).maskTilingOffset).elements=e$Y,e$t.maskTilingOffset=e$y)}else(e$y=(e$t=e$m.meshRender.material).maskTilingOffset).elements=e$Y,e$t.maskTilingOffset=e$y},e$t._propertyIDCounter=0,e$t._propertyIndexDic={},e$t._propertySetFuncs=[],e$t._propertyGetFuncs=[],e$t}(),e$$=function(){function e$D(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return e$R(e$D,"laya.d3.animation.Keyframe"),e$D}(),e$d=function(){function e$D(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return e$R(e$D,"laya.d3.animation.KeyframeNode"),e$D}(),e$N=(function(){function e$D(){this._tempVector30=new e$om,this._tempVector31=new e$om,this._tempVector32=new e$om,this._a=new e$om,this._b=new e$om,this._c=new e$om,this._d=new e$om}e$R(e$D,"laya.d3.core.glitter.SplineCurvePositionVelocity");var e$m=e$D.prototype;e$m.Init=function(e$D,e$m,e$Y,e$t){e$D.cloneTo(this._d),e$m.cloneTo(this._c),e$om.scale(e$D,2,this._a),e$om.scale(e$Y,2,this._tempVector30),e$om.subtract(this._a,this._tempVector30,this._a),e$om.add(this._a,e$m,this._a),e$om.add(this._a,e$t,this._a),e$om.scale(e$Y,3,this._b),e$om.scale(e$D,3,this._tempVector30),e$om.subtract(this._b,this._tempVector30,this._b),e$om.subtract(this._b,e$t,this._b),e$om.scale(e$m,2,this._tempVector30),e$om.subtract(this._b,this._tempVector30,this._b)},e$m.Slerp=function(e$D,e$m){e$om.scale(this._a,e$D*e$D*e$D,this._tempVector30),e$om.scale(this._b,e$D*e$D,this._tempVector31),e$om.scale(this._c,e$D,this._tempVector32),e$om.add(this._tempVector30,this._tempVector31,e$m),e$om.add(e$m,this._tempVector32,e$m),e$om.add(e$m,this._d,e$m)}}(),function(){function e$X(e$D,e$m,e$Y,e$t){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=e$D,this._h=e$m,this._minHeight=e$Y,this._maxHeight=e$t}e$R(e$X,"laya.d3.core.HeightMap");var e$D=e$X.prototype;e$D._inBounds=function(e$D,e$m){return 0<=e$D&&e$D<this._h&&0<=e$m&&e$m<this._w},e$D.getHeight=function(e$D,e$m){return this._inBounds(e$D,e$m)?this._datas[e$D][e$m]:NaN},e$G(0,e$D,"width",function(){return this._w}),e$G(0,e$D,"height",function(){return this._h}),e$G(0,e$D,"maxHeight",function(){return this._maxHeight}),e$G(0,e$D,"minHeight",function(){return this._minHeight}),e$X.creatFromMesh=function(e$D,e$m,e$Y,e$t){for(var e$y=[],e$l=[],e$E=e$D.getSubMeshCount(),e$B=0;e$B<e$E;e$B++){for(var e$o=e$D.getSubMesh(e$B),e$r=e$o._getVertexBuffer(),e$f=e$r.getData(),e$_=[],e$i=0;e$i<e$f.length;e$i+=e$r.vertexDeclaration.vertexStride/4){var e$R=new e$om(e$f[e$i+0],e$f[e$i+1],e$f[e$i+2]);e$_.push(e$R)}e$y.push(e$_);var e$G=e$o._getIndexBuffer();e$l.push(e$G.getData())}var e$I=e$D.boundingBox,e$w=e$I.min.x,e$W=e$I.min.z,e$U=e$I.max.x,e$e=e$I.max.z,e$v=e$I.min.y,e$c=e$I.max.y,e$S=e$U-e$w,e$z=e$e-e$W,e$A=e$t.elements[0]=e$S/(e$m-1),e$J=e$t.elements[1]=e$z/(e$Y-1),e$a=new e$X(e$m,e$Y,e$v,e$c),e$p=e$X._tempRay,e$F=e$p.direction.elements;e$F[0]=0,e$F[1]=-1,e$F[2]=0;var e$s=e$c+.1;e$p.origin.elements[1]=e$s;for(var e$Q=0;e$Q<e$Y;e$Q++){var e$T=e$W+e$Q*e$J;e$a._datas[e$Q]=[];for(var e$N=0;e$N<e$m;e$N++){var e$C=e$w+e$N*e$A,e$O=e$p.origin.elements;e$O[0]=e$C,e$O[2]=e$T;var e$h=e$X._getPosition(e$p,e$y,e$l);e$a._datas[e$Q][e$N]=e$h===Number.MAX_VALUE?NaN:e$s-e$h}}return e$a},e$X.createFromImage=function(e$D,e$m,e$Y){for(var e$t=e$D.width,e$y=e$D.height,e$l=new e$X(e$t,e$y,e$m,e$Y),e$E=(e$Y-e$m)/254,e$B=e$D.getPixels(),e$o=0,e$r=0;e$r<e$y;e$r++)for(var e$f=e$l._datas[e$r]=[],e$_=0;e$_<e$t;e$_++){var e$i=e$B[e$o++],e$R=e$B[e$o++],e$G=e$B[e$o++],e$I=e$B[e$o++];e$f[e$_]=255==e$i&&255==e$R&&255==e$G&&255==e$I?NaN:(e$i+e$R+e$G)/3*e$E+e$m}return e$l},e$X._getPosition=function(e$D,e$m,e$Y){for(var e$t=Number.MAX_VALUE,e$y=0;e$y<e$m.length;e$y++)for(var e$l=e$m[e$y],e$E=e$Y[e$y],e$B=0;e$B<e$E.length;e$B+=3){var e$o=e$l[e$E[e$B+0]],e$r=e$l[e$E[e$B+1]],e$f=e$l[e$E[e$B+2]],e$_=e$wm.rayIntersectsTriangle(e$D,e$o,e$r,e$f);!isNaN(e$_)&&e$_<e$t&&(e$t=e$_)}return e$t},e$_(e$X,["_tempRay",function(){return this._tempRay=new e$Em(new e$om,new e$om)}])}(),function(){function e$y(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}e$R(e$y,"laya.d3.core.Layer");var e$D=e$y.prototype;return e$D._binarySearchIndex=function(){for(var e$D=0,e$m=e$y._collsionTestList.length-1,e$Y=0;e$D<=e$m;){e$Y=Math.floor((e$D+e$m)/2);var e$t=e$y._collsionTestList[e$Y];if(e$t==this._number)return e$Y;e$t>this._number?e$m=e$Y-1:e$D=e$Y+1}return e$D},e$D._addCollider=function(e$D){0===this._colliders.length&&e$y._collsionTestList.splice(this._binarySearchIndex(),0,this._number),e$D._isRigidbody?(this._colliders.unshift(e$D),this._nonRigidbodyOffset++):this._colliders.push(e$D)},e$D._removeCollider=function(e$D){var e$m=this._colliders.indexOf(e$D);e$m<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(e$m,1),0===this._colliders.length&&e$y._collsionTestList.splice(e$y._collsionTestList.indexOf(this._number),1)},e$G(0,e$D,"number",function(){return this._number}),e$G(0,e$D,"visible",function(){return this._visible},function(e$D){this._visible=e$D,e$y._visibleLayers=e$D?e$y._visibleLayers|this.mask:e$y._visibleLayers&~this.mask}),e$G(0,e$D,"mask",function(){return this._mask}),e$G(1,e$y,"visibleLayers",function(){return e$y._visibleLayers},function(e$D){e$y._visibleLayers=e$D;for(var e$m=0,e$Y=e$y._layerList.length;e$m<e$Y;e$m++){var e$t=e$y._layerList[e$m];e$t._visible=0!=(e$t._mask&e$y._visibleLayers)}}),e$y.__init__=function(){e$y._layerList.length=31;for(var e$D=0;e$D<31;e$D++){var e$m=new e$y;e$y._layerList[e$D]=e$m,0===e$D?(e$m.name="Default Layer",e$m.visible=!0):(e$m.name="Layer-"+e$D,e$m.visible=!1),e$m._number=e$D,e$m._mask=Math.pow(2,e$D)}e$y.currentCreationLayer=e$y._layerList[0]},e$y.getLayerByNumber=function(e$D){if(e$D<0||30<e$D)throw new Error("无法返回指定Layer，该number超出范围！");return e$y._layerList[e$D]},e$y.getLayerByName=function(e$D){for(var e$m=0;e$m<31;e$m++)if(e$y._layerList[e$m].name===e$D)return e$y._layerList[e$m];throw new Error("无法返回指定Layer,该name不存在")},e$y.isVisible=function(e$D){return 0!=(e$D&e$y._currentCameraCullingMask&e$y._visibleLayers)},e$y._layerList=[],e$y._visibleLayers=2147483647,e$y._collsionTestList=[],e$y._currentCameraCullingMask=2147483647,e$y.maxCount=31,e$y.currentCreationLayer=null,e$y}()),e$C=(function(){function e$D(e$D,e$m,e$Y){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=e$D,this._minCount=e$m,this._maxCount=e$Y}e$R(e$D,"laya.d3.core.particleShuriKen.module.Burst");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.cloneTo=function(e$D){var e$m=e$D;e$m._time=this._time,e$m._minCount=this._minCount,e$m._maxCount=this._maxCount},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"time",function(){return this._time}),e$G(0,e$m,"minCount",function(){return this._minCount}),e$G(0,e$m,"maxCount",function(){return this._maxCount})}(),function(){function e$D(e$D){this._color=null,this.enbale=!1,this._color=e$D}e$R(e$D,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var e$m=e$D.prototype;e$m.cloneTo=function(e$D){var e$m=e$D;this._color.cloneTo(e$m._color),e$m.enbale=this.enbale},e$m.clone=function(){var e$D;switch(this._color.type){case 0:e$D=e$h.createByConstant(this._color.constant.clone());break;case 1:e$D=e$h.createByGradient(this._color.gradient.clone());break;case 2:e$D=e$h.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:e$D=e$h.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var e$m=new this.constructor(e$D);return e$m.enbale=this.enbale,e$m},e$G(0,e$m,"color",function(){return this._color})}(),function(){function e$D(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}e$R(e$D,"laya.d3.core.particleShuriKen.module.Emission");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),e$m._destroy=function(){this._bursts=null,this._destroyed=!0},e$m.getBurstsCount=function(){return this._bursts.length},e$m.getBurstByIndex=function(e$D){return this._bursts[e$D]},e$m.addBurst=function(e$D){var e$m=this._bursts.length;if(0<e$m)for(var e$Y=0;e$Y<e$m;e$Y++)this._bursts[e$Y].time>e$D.time&&this._bursts.splice(e$Y,0,e$D);this._bursts.push(e$D)},e$m.removeBurst=function(e$D){var e$m=this._bursts.indexOf(e$D);-1!==e$m&&this._bursts.splice(e$m,1)},e$m.removeBurstByIndex=function(e$D){this._bursts.splice(e$D,1)},e$m.clearBurst=function(){this._bursts.length=0},e$m.cloneTo=function(e$D){var e$m=e$D,e$Y=e$m._bursts;e$Y.length=this._bursts.length;for(var e$t=0,e$y=this._bursts.length;e$t<e$y;e$t++){var e$l=e$Y[e$t];e$l?this._bursts[e$t].cloneTo(e$l):e$Y[e$t]=this._bursts[e$t].clone()}e$m._emissionRate=this._emissionRate,e$m.enbale=this.enbale},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"destroyed",function(){return this._destroyed}),e$G(0,e$m,"emissionRate",function(){return this._emissionRate},function(e$D){if(e$D<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=e$D})}(),function(){function e$t(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}e$R(e$t,"laya.d3.core.particleShuriKen.module.FrameOverTime");var e$D=e$t.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,e$m._constant=this._constant,this._overTime.cloneTo(e$m._overTime),e$m._constantMin=this._constantMin,e$m._constantMax=this._constantMax,this._overTimeMin.cloneTo(e$m._overTimeMin),this._overTimeMax.cloneTo(e$m._overTimeMax)},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"frameOverTimeData",function(){return this._overTime}),e$G(0,e$D,"constant",function(){return this._constant}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"frameOverTimeDataMin",function(){return this._overTimeMin}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"frameOverTimeDataMax",function(){return this._overTimeMax}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$t.createByConstant=function(e$D){var e$m=new e$t;return e$m._type=0,e$m._constant=e$D,e$m},e$t.createByOverTime=function(e$D){var e$m=new e$t;return e$m._type=1,e$m._overTime=e$D,e$m},e$t.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$t;return e$Y._type=2,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$t.createByRandomTwoOverTime=function(e$D,e$m){var e$Y=new e$t;return e$Y._type=3,e$Y._overTimeMin=e$D,e$Y._overTimeMax=e$m,e$Y},e$t}()),e$O=function(){function e$r(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}e$R(e$r,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var e$D=e$r.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,e$m._separateAxes=this._separateAxes,e$m._constant=this._constant,this._constantSeparate.cloneTo(e$m._constantSeparate),this._gradient.cloneTo(e$m._gradient),this._gradientX.cloneTo(e$m._gradientX),this._gradientY.cloneTo(e$m._gradientY),this._gradientZ.cloneTo(e$m._gradientZ),e$m._constantMin=this._constantMin,e$m._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e$m._constantMinSeparate),this._constantMaxSeparate.cloneTo(e$m._constantMaxSeparate),this._gradientMin.cloneTo(e$m._gradientMin),this._gradientMax.cloneTo(e$m._gradientMax),this._gradientXMin.cloneTo(e$m._gradientXMin),this._gradientXMax.cloneTo(e$m._gradientXMax),this._gradientYMin.cloneTo(e$m._gradientYMin),this._gradientYMax.cloneTo(e$m._gradientYMax),this._gradientZMin.cloneTo(e$m._gradientZMin),this._gradientZMax.cloneTo(e$m._gradientZMax)},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"gradientZ",function(){return this._gradientZ}),e$G(0,e$D,"constant",function(){return this._constant}),e$G(0,e$D,"gradient",function(){return this._gradient}),e$G(0,e$D,"separateAxes",function(){return this._separateAxes}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"constantSeparate",function(){return this._constantSeparate}),e$G(0,e$D,"gradientX",function(){return this._gradientX}),e$G(0,e$D,"gradientY",function(){return this._gradientY}),e$G(0,e$D,"gradientW",function(){return this._gradientW}),e$G(0,e$D,"gradientMin",function(){return this._gradientMin}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"gradientMax",function(){return this._gradientMax}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$G(0,e$D,"gradientWMin",function(){return this._gradientWMin}),e$G(0,e$D,"constantMinSeparate",function(){return this._constantMinSeparate}),e$G(0,e$D,"constantMaxSeparate",function(){return this._constantMaxSeparate}),e$G(0,e$D,"gradientXMin",function(){return this._gradientXMin}),e$G(0,e$D,"gradientXMax",function(){return this._gradientXMax}),e$G(0,e$D,"gradientWMax",function(){return this._gradientWMax}),e$G(0,e$D,"gradientYMin",function(){return this._gradientYMin}),e$G(0,e$D,"gradientYMax",function(){return this._gradientYMax}),e$G(0,e$D,"gradientZMin",function(){return this._gradientZMin}),e$G(0,e$D,"gradientZMax",function(){return this._gradientZMax}),e$r.createByConstant=function(e$D){var e$m=new e$r;return e$m._type=0,e$m._separateAxes=!1,e$m._constant=e$D,e$m},e$r.createByConstantSeparate=function(e$D){var e$m=new e$r;return e$m._type=0,e$m._separateAxes=!0,e$m._constantSeparate=e$D,e$m},e$r.createByGradient=function(e$D){var e$m=new e$r;return e$m._type=1,e$m._separateAxes=!1,e$m._gradient=e$D,e$m},e$r.createByGradientSeparate=function(e$D,e$m,e$Y,e$t){var e$y=new e$r;return e$y._type=1,e$y._separateAxes=!0,e$y._gradientX=e$D,e$y._gradientY=e$m,e$y._gradientZ=e$Y,e$y._gradientW=e$t,e$y},e$r.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$r;return e$Y._type=2,e$Y._separateAxes=!1,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$r.createByRandomTwoConstantSeparate=function(e$D,e$m){var e$Y=new e$r;return e$Y._type=2,e$Y._separateAxes=!0,e$Y._constantMinSeparate=e$D,e$Y._constantMaxSeparate=e$m,e$Y},e$r.createByRandomTwoGradient=function(e$D,e$m){var e$Y=new e$r;return e$Y._type=3,e$Y._separateAxes=!1,e$Y._gradientMin=e$D,e$Y._gradientMax=e$m,e$Y},e$r.createByRandomTwoGradientSeparate=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o=new e$r;return e$o._type=3,e$o._separateAxes=!0,e$o._gradientXMin=e$D,e$o._gradientXMax=e$m,e$o._gradientYMin=e$Y,e$o._gradientYMax=e$t,e$o._gradientZMin=e$y,e$o._gradientZMax=e$l,e$o._gradientWMin=e$E,e$o._gradientWMax=e$B,e$o},e$r}(),e$h=function(){function e$t(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}e$R(e$t,"laya.d3.core.particleShuriKen.module.GradientColor");var e$D=e$t.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,this._constant.cloneTo(e$m._constant),this._constantMin.cloneTo(e$m._constantMin),this._constantMax.cloneTo(e$m._constantMax),this._gradient.cloneTo(e$m._gradient),this._gradientMin.cloneTo(e$m._gradientMin),this._gradientMax.cloneTo(e$m._gradientMax)},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"gradient",function(){return this._gradient}),e$G(0,e$D,"constant",function(){return this._constant}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"gradientMin",function(){return this._gradientMin}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"gradientMax",function(){return this._gradientMax}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$t.createByConstant=function(e$D){var e$m=new e$t;return e$m._type=0,e$m._constant=e$D,e$m},e$t.createByGradient=function(e$D){var e$m=new e$t;return e$m._type=1,e$m._gradient=e$D,e$m},e$t.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$t;return e$Y._type=2,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$t.createByRandomTwoGradient=function(e$D,e$m){var e$Y=new e$t;return e$Y._type=3,e$Y._gradientMin=e$D,e$Y._gradientMax=e$m,e$Y},e$t}(),e$X=(function(){function e$D(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}e$R(e$D,"laya.d3.core.particleShuriKen.module.GradientDataColor");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.addAlpha=function(e$D,e$m){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==e$D&&(e$D=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=e$D,this._alphaElements[this._alphaCurrentLength++]=e$m):DEBUG},e$m.addRGB=function(e$D,e$m){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==e$D&&(e$D=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=e$D,this._rgbElements[this._rgbCurrentLength++]=e$m.x,this._rgbElements[this._rgbCurrentLength++]=e$m.y,this._rgbElements[this._rgbCurrentLength++]=e$m.z):DEBUG},e$m.cloneTo=function(e$D){var e$m=e$D,e$Y=0,e$t=0;e$m._alphaCurrentLength=this._alphaCurrentLength;var e$y=e$m._alphaElements;for(e$y.length=this._alphaElements.length,e$Y=0,e$t=this._alphaElements.length;e$Y<e$t;e$Y++)e$y[e$Y]=this._alphaElements[e$Y];e$m._rgbCurrentLength=this._rgbCurrentLength;var e$l=e$m._rgbElements;for(e$l.length=this._rgbElements.length,e$Y=0,e$t=this._rgbElements.length;e$Y<e$t;e$Y++)e$l[e$Y]=this._rgbElements[e$Y]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),e$G(0,e$m,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function e$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}e$R(e$D,"laya.d3.core.particleShuriKen.module.GradientDataInt");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.add=function(e$D,e$m){this._currentLength<8?(6===this._currentLength&&1!==e$D&&(e$D=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e$D,this._elements[this._currentLength++]=e$m):console.log("Warning:data count must lessEqual than 4")},e$m.cloneTo=function(e$D){var e$m=e$D;e$m._currentLength=this._currentLength;var e$Y=e$m._elements;e$Y.length=this._elements.length;for(var e$t=0,e$y=this._elements.length;e$t<e$y;e$t++)e$Y[e$t]=this._elements[e$t]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"gradientCount",function(){return this._currentLength/2})}(),function(){function e$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}e$R(e$D,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.add=function(e$D,e$m){this._currentLength<8?(6===this._currentLength&&1!==e$D&&(e$D=1,DEBUG),this._elements[this._currentLength++]=e$D,this._elements[this._currentLength++]=e$m):DEBUG},e$m.getKeyByIndex=function(e$D){return this._elements[2*e$D]},e$m.getValueByIndex=function(e$D){return this._elements[2*e$D+1]},e$m.getAverageValue=function(){for(var e$D=0,e$m=this._currentLength-2;e$D<e$m;e$D+=2){this._elements[e$D+1];this._elements[e$D+3],this._elements[e$D+2]-this._elements[e$D]}return 0},e$m.cloneTo=function(e$D){var e$m=e$D;e$m._currentLength=this._currentLength;var e$Y=e$m._elements;e$Y.length=this._elements.length;for(var e$t=0,e$y=this._elements.length;e$t<e$y;e$t++)e$Y[e$t]=this._elements[e$t]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"gradientCount",function(){return this._currentLength/2})}(),function(){function e$D(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}e$R(e$D,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.add=function(e$D,e$m){this._currentLength<8?(6===this._currentLength&&1!==e$D&&(e$D=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e$D,this._elements[this._currentLength++]=e$m.x,this._elements[this._currentLength++]=e$m.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},e$m.cloneTo=function(e$D){var e$m=e$D;e$m._currentLength=this._currentLength;var e$Y=e$m._elements;e$Y.length=this._elements.length;for(var e$t=0,e$y=this._elements.length;e$t<e$y;e$t++)e$Y[e$t]=this._elements[e$t]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"gradientCount",function(){return this._currentLength/3})}(),function(){function e$B(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}e$R(e$B,"laya.d3.core.particleShuriKen.module.GradientSize");var e$D=e$B.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.getMaxSizeInGradient=function(){var e$D=0,e$m=0,e$Y=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(e$D=0,e$m=this._gradientX.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientX.getValueByIndex(e$D));for(e$D=0,e$m=this._gradientY.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientY.getValueByIndex(e$D))}else for(e$D=0,e$m=this._gradient.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradient.getValueByIndex(e$D));break;case 1:e$Y=this._separateAxes?(e$Y=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),e$Y=Math.max(e$Y,this._constantMinSeparate.y),Math.max(e$Y,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(e$D=0,e$m=this._gradientXMin.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientXMin.getValueByIndex(e$D));for(e$D=0,e$m=this._gradientXMax.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientXMax.getValueByIndex(e$D));for(e$D=0,e$m=this._gradientYMin.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientYMin.getValueByIndex(e$D));for(e$D=0,e$m=this._gradientZMax.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientZMax.getValueByIndex(e$D))}else{for(e$D=0,e$m=this._gradientMin.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientMin.getValueByIndex(e$D));for(e$D=0,e$m=this._gradientMax.gradientCount;e$D<e$m;e$D++)e$Y=Math.max(e$Y,this._gradientMax.getValueByIndex(e$D))}}return e$Y},e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,e$m._separateAxes=this._separateAxes,this._gradient.cloneTo(e$m._gradient),this._gradientX.cloneTo(e$m._gradientX),this._gradientY.cloneTo(e$m._gradientY),this._gradientZ.cloneTo(e$m._gradientZ),e$m._constantMin=this._constantMin,e$m._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e$m._constantMinSeparate),this._constantMaxSeparate.cloneTo(e$m._constantMaxSeparate),this._gradientMin.cloneTo(e$m._gradientMin),this._gradientMax.cloneTo(e$m._gradientMax),this._gradientXMin.cloneTo(e$m._gradientXMin),this._gradientXMax.cloneTo(e$m._gradientXMax),this._gradientYMin.cloneTo(e$m._gradientYMin),this._gradientYMax.cloneTo(e$m._gradientYMax),this._gradientZMin.cloneTo(e$m._gradientZMin),this._gradientZMax.cloneTo(e$m._gradientZMax)},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"gradientZ",function(){return this._gradientZ}),e$G(0,e$D,"gradient",function(){return this._gradient}),e$G(0,e$D,"separateAxes",function(){return this._separateAxes}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"gradientMin",function(){return this._gradientMin}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"gradientX",function(){return this._gradientX}),e$G(0,e$D,"gradientY",function(){return this._gradientY}),e$G(0,e$D,"gradientMax",function(){return this._gradientMax}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$G(0,e$D,"constantMinSeparate",function(){return this._constantMinSeparate}),e$G(0,e$D,"constantMaxSeparate",function(){return this._constantMaxSeparate}),e$G(0,e$D,"gradientXMin",function(){return this._gradientXMin}),e$G(0,e$D,"gradientXMax",function(){return this._gradientXMax}),e$G(0,e$D,"gradientYMin",function(){return this._gradientYMin}),e$G(0,e$D,"gradientYMax",function(){return this._gradientYMax}),e$G(0,e$D,"gradientZMin",function(){return this._gradientZMin}),e$G(0,e$D,"gradientZMax",function(){return this._gradientZMax}),e$B.createByGradient=function(e$D){var e$m=new e$B;return e$m._type=0,e$m._separateAxes=!1,e$m._gradient=e$D,e$m},e$B.createByGradientSeparate=function(e$D,e$m,e$Y){var e$t=new e$B;return e$t._type=0,e$t._separateAxes=!0,e$t._gradientX=e$D,e$t._gradientY=e$m,e$t._gradientZ=e$Y,e$t},e$B.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$B;return e$Y._type=1,e$Y._separateAxes=!1,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$B.createByRandomTwoConstantSeparate=function(e$D,e$m){var e$Y=new e$B;return e$Y._type=1,e$Y._separateAxes=!0,e$Y._constantMinSeparate=e$D,e$Y._constantMaxSeparate=e$m,e$Y},e$B.createByRandomTwoGradient=function(e$D,e$m){var e$Y=new e$B;return e$Y._type=2,e$Y._separateAxes=!1,e$Y._gradientMin=e$D,e$Y._gradientMax=e$m,e$Y},e$B.createByRandomTwoGradientSeparate=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=new e$B;return e$E._type=2,e$E._separateAxes=!0,e$E._gradientXMin=e$D,e$E._gradientXMax=e$m,e$E._gradientYMin=e$Y,e$E._gradientYMax=e$t,e$E._gradientZMin=e$y,e$E._gradientZMax=e$l,e$E},e$B}()),e$P=function(){function e$B(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}e$R(e$B,"laya.d3.core.particleShuriKen.module.GradientVelocity");var e$D=e$B.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,this._constant.cloneTo(e$m._constant),this._gradientX.cloneTo(e$m._gradientX),this._gradientY.cloneTo(e$m._gradientY),this._gradientZ.cloneTo(e$m._gradientZ),this._constantMin.cloneTo(e$m._constantMin),this._constantMax.cloneTo(e$m._constantMax),this._gradientXMin.cloneTo(e$m._gradientXMin),this._gradientXMax.cloneTo(e$m._gradientXMax),this._gradientYMin.cloneTo(e$m._gradientYMin),this._gradientYMax.cloneTo(e$m._gradientYMax),this._gradientZMin.cloneTo(e$m._gradientZMin),this._gradientZMax.cloneTo(e$m._gradientZMax)},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"gradientZ",function(){return this._gradientZ}),e$G(0,e$D,"constant",function(){return this._constant}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"gradientXMax",function(){return this._gradientXMax}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"gradientX",function(){return this._gradientX}),e$G(0,e$D,"gradientY",function(){return this._gradientY}),e$G(0,e$D,"gradientXMin",function(){return this._gradientXMin}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$G(0,e$D,"gradientYMin",function(){return this._gradientYMin}),e$G(0,e$D,"gradientYMax",function(){return this._gradientYMax}),e$G(0,e$D,"gradientZMin",function(){return this._gradientZMin}),e$G(0,e$D,"gradientZMax",function(){return this._gradientZMax}),e$B.createByConstant=function(e$D){var e$m=new e$B;return e$m._type=0,e$m._constant=e$D,e$m},e$B.createByGradient=function(e$D,e$m,e$Y){var e$t=new e$B;return e$t._type=1,e$t._gradientX=e$D,e$t._gradientY=e$m,e$t._gradientZ=e$Y,e$t},e$B.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$B;return e$Y._type=2,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$B.createByRandomTwoGradient=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=new e$B;return e$E._type=3,e$E._gradientXMin=e$D,e$E._gradientXMax=e$m,e$E._gradientYMin=e$Y,e$E._gradientYMax=e$t,e$E._gradientZMin=e$y,e$E._gradientZMax=e$l,e$E},e$B}(),e$u=(function(){function e$D(e$D){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=e$D}e$R(e$D,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.cloneTo=function(e$D){var e$m=e$D;this._angularVelocity.cloneTo(e$m._angularVelocity),e$m.enbale=this.enbale},e$m.clone=function(){var e$D;switch(this._angularVelocity.type){case 0:e$D=this._angularVelocity.separateAxes?e$O.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):e$O.createByConstant(this._angularVelocity.constant);break;case 1:e$D=this._angularVelocity.separateAxes?e$O.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):e$O.createByGradient(this._angularVelocity.gradient.clone());break;case 2:e$D=this._angularVelocity.separateAxes?e$O.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):e$O.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:e$D=this._angularVelocity.separateAxes?e$O.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):e$O.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var e$m=new this.constructor(e$D);return e$m.enbale=this.enbale,e$m},e$G(0,e$m,"angularVelocity",function(){return this._angularVelocity})}(),function(){function e$D(){this.enable=!1,this.randomDirection=!1}e$R(e$D,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m._getShapeBoundBox=function(e$D){throw new Error("BaseShape: must override it.")},e$m._getSpeedBoundBox=function(e$D){throw new Error("BaseShape: must override it.")},e$m.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){throw new Error("BaseShape: must override it.")},e$m._calculateProceduralBounds=function(e$D,e$m,e$Y){this._getShapeBoundBox(e$D);var e$t=e$D.min,e$y=e$D.max;e$om.multiply(e$t,e$m,e$t),e$om.multiply(e$y,e$m,e$y);var e$l=new e$VD(new e$om,new e$om);this.randomDirection?(e$l.min=new e$om(-1,-1,-1),e$l.max=new e$om(1,1,1)):this._getSpeedBoundBox(e$l);var e$E=new e$VD(new e$om,new e$om),e$B=e$E.min,e$o=e$E.max;e$om.scale(e$l.min,e$Y.y,e$B),e$om.scale(e$l.max,e$Y.y,e$o),e$om.add(e$D.min,e$B,e$B),e$om.add(e$D.max,e$o,e$o),e$om.min(e$D.min,e$B,e$D.min),e$om.max(e$D.max,e$B,e$D.max);var e$r=new e$VD(new e$om,new e$om),e$f=e$r.min,e$_=e$r.max;e$om.scale(e$l.min,e$Y.x,e$f),e$om.scale(e$l.max,e$Y.x,e$_),e$om.min(e$r.min,e$_,e$B),e$om.max(e$r.min,e$_,e$o),e$om.min(e$D.min,e$B,e$D.min),e$om.max(e$D.max,e$B,e$D.max)},e$m.cloneTo=function(e$D){e$D.enable=this.enable},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$D}()),e$k=function(){function e$l(){}return e$R(e$l,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),e$l._randomPointUnitArcCircle=function(e$D,e$m,e$Y){var e$t=e$m.elements,e$y=NaN;e$y=e$Y?e$Y.getFloat()*e$D:Math.random()*e$D,e$t[0]=Math.cos(e$y),e$t[1]=Math.sin(e$y)},e$l._randomPointInsideUnitArcCircle=function(e$D,e$m,e$Y){var e$t=e$m.elements;e$l._randomPointUnitArcCircle(e$D,e$m,e$Y);var e$y=NaN;e$y=e$Y?Math.pow(e$Y.getFloat(),.5):Math.pow(Math.random(),.5),e$t[0]=e$t[0]*e$y,e$t[1]=e$t[1]*e$y},e$l._randomPointUnitCircle=function(e$D,e$m){var e$Y=e$D.elements,e$t=NaN;e$t=e$m?e$m.getFloat()*Math.PI*2:Math.random()*Math.PI*2,e$Y[0]=Math.cos(e$t),e$Y[1]=Math.sin(e$t)},e$l._randomPointInsideUnitCircle=function(e$D,e$m){var e$Y=e$D.elements;e$l._randomPointUnitCircle(e$D);var e$t=NaN;e$t=e$m?Math.pow(e$m.getFloat(),.5):Math.pow(Math.random(),.5),e$Y[0]=e$Y[0]*e$t,e$Y[1]=e$Y[1]*e$t},e$l._randomPointUnitSphere=function(e$D,e$m){var e$Y=e$D.elements,e$t=NaN,e$y=NaN;e$y=e$m?(e$t=e$Y[2]=2*e$m.getFloat()-1,e$m.getFloat()*Math.PI*2):(e$t=e$Y[2]=2*Math.random()-1,Math.random()*Math.PI*2);var e$l=Math.sqrt(1-e$t*e$t);e$Y[0]=e$l*Math.cos(e$y),e$Y[1]=e$l*Math.sin(e$y)},e$l._randomPointInsideUnitSphere=function(e$D,e$m){var e$Y=e$D.elements;e$l._randomPointUnitSphere(e$D);var e$t=NaN;e$t=e$m?Math.pow(e$m.getFloat(),1/3):Math.pow(Math.random(),1/3),e$Y[0]=e$Y[0]*e$t,e$Y[1]=e$Y[1]*e$t,e$Y[2]=e$Y[2]*e$t},e$l._randomPointInsideHalfUnitBox=function(e$D,e$m){var e$Y=e$D.elements;e$m?(e$Y[0]=e$m.getFloat()-.5,e$Y[1]=e$m.getFloat()-.5,e$Y[2]=e$m.getFloat()-.5):(e$Y[0]=Math.random()-.5,e$Y[1]=Math.random()-.5,e$Y[2]=Math.random()-.5)},e$l}(),e$M=(function(){function e$D(e$D){this._size=null,this.enbale=!1,this._size=e$D}e$R(e$D,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.cloneTo=function(e$D){var e$m=e$D;this._size.cloneTo(e$m._size),e$m.enbale=this.enbale},e$m.clone=function(){var e$D;switch(this._size.type){case 0:e$D=this._size.separateAxes?e$X.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):e$X.createByGradient(this._size.gradient.clone());break;case 1:e$D=this._size.separateAxes?e$X.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):e$X.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:e$D=this._size.separateAxes?e$X.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):e$X.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var e$m=new this.constructor(e$D);return e$m.enbale=this.enbale,e$m},e$G(0,e$m,"size",function(){return this._size})}(),function(){function e$t(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}e$R(e$t,"laya.d3.core.particleShuriKen.module.StartFrame");var e$D=e$t.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.cloneTo=function(e$D){var e$m=e$D;e$m._type=this._type,e$m._constant=this._constant,e$m._constantMin=this._constantMin,e$m._constantMax=this._constantMax},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$D,"constant",function(){return this._constant}),e$G(0,e$D,"type",function(){return this._type}),e$G(0,e$D,"constantMin",function(){return this._constantMin}),e$G(0,e$D,"constantMax",function(){return this._constantMax}),e$t.createByConstant=function(e$D){var e$m=new e$t;return e$m._type=0,e$m._constant=e$D,e$m},e$t.createByRandomTwoConstant=function(e$D,e$m){var e$Y=new e$t;return e$Y._type=1,e$Y._constantMin=e$D,e$Y._constantMax=e$m,e$Y},e$t}()),e$n=(function(){function e$D(e$D,e$m){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new e$Bm(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=e$D,this._startFrame=e$m}e$R(e$D,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.cloneTo=function(e$D){var e$m=e$D;this.tiles.cloneTo(e$m.tiles),e$m.type=this.type,e$m.randomRow=this.randomRow,this._frame.cloneTo(e$m._frame),this._startFrame.cloneTo(e$m._startFrame),e$m.cycles=this.cycles,e$m.enableUVChannels=this.enableUVChannels,e$m.enable=this.enable},e$m.clone=function(){var e$D,e$m;switch(this._frame.type){case 0:e$D=e$C.createByConstant(this._frame.constant);break;case 1:e$D=e$C.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:e$D=e$C.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:e$D=e$C.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:e$m=e$M.createByConstant(this._startFrame.constant);break;case 1:e$m=e$M.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var e$Y=new this.constructor(e$D,e$m);return this.tiles.cloneTo(e$Y.tiles),e$Y.type=this.type,e$Y.randomRow=this.randomRow,e$Y.cycles=this.cycles,e$Y.enableUVChannels=this.enableUVChannels,e$Y.enable=this.enable,e$Y},e$G(0,e$m,"frame",function(){return this._frame}),e$G(0,e$m,"startFrame",function(){return this._startFrame})}(),function(){function e$D(e$D){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=e$D}e$R(e$D,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.cloneTo=function(e$D){var e$m=e$D;this._velocity.cloneTo(e$m._velocity),e$m.enbale=this.enbale,e$m.space=this.space},e$m.clone=function(){var e$D;switch(this._velocity.type){case 0:e$D=e$P.createByConstant(this._velocity.constant.clone());break;case 1:e$D=e$P.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:e$D=e$P.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:e$D=e$P.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var e$m=new this.constructor(e$D);return e$m.enbale=this.enbale,e$m.space=this.space,e$m},e$G(0,e$m,"velocity",function(){return this._velocity})}(),function(){function e$D(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new e$Gm,this._vb=e$km.create(e$D._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=e$dm.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=e$qm.nameKey.getID("LINE"),this._shaderCompile=e$pm._preCompileShader[this._sharderNameID]}e$R(e$D,"laya.d3.core.PhasorSpriter3D");var e$m=e$D.prototype;return e$m.line=function(e$D,e$m,e$Y,e$t){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$D.x,e$D.y,e$D.z,e$m.x,e$m.y,e$m.z,e$m.w),this.addVertex(e$Y.x,e$Y.y,e$Y.z,e$t.x,e$t.y,e$t.z,e$t.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},e$m.circle=function(e$D,e$m,e$Y,e$t,e$y,e$l){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*e$m,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/e$m,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*e$D,Math.cos(this._tempNumver0)*e$D,0,e$Y,e$t,e$y,e$l),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},e$m.plane=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=e$t/2,this._tempNumver1=e$y/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$D-this._tempNumver0,e$m+this._tempNumver1,e$Y,e$l,e$E,e$B,e$o),this.addVertex(e$D+this._tempNumver0,e$m+this._tempNumver1,e$Y,e$l,e$E,e$B,e$o),this.addVertex(e$D-this._tempNumver0,e$m-this._tempNumver1,e$Y,e$l,e$E,e$B,e$o),this.addVertex(e$D+this._tempNumver0,e$m-this._tempNumver1,e$Y,e$l,e$E,e$B,e$o),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},e$m.box=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=e$t/2,this._tempNumver1=e$y/2,this._tempNumver2=e$l/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$D-this._tempNumver0,e$m+this._tempNumver1,e$Y+this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D+this._tempNumver0,e$m+this._tempNumver1,e$Y+this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D-this._tempNumver0,e$m-this._tempNumver1,e$Y+this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D+this._tempNumver0,e$m-this._tempNumver1,e$Y+this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D+this._tempNumver0,e$m+this._tempNumver1,e$Y-this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D-this._tempNumver0,e$m+this._tempNumver1,e$Y-this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D+this._tempNumver0,e$m-this._tempNumver1,e$Y-this._tempNumver2,e$E,e$B,e$o,e$r),this.addVertex(e$D-this._tempNumver0,e$m-this._tempNumver1,e$Y-this._tempNumver2,e$E,e$B,e$o,e$r),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},e$m.cone=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*e$Y+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*e$Y>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/e$Y,this.addVertexIndex(0,e$m,0,e$t,e$y,e$l,e$E,this._tempUint0),this.addVertexIndex(0,0,0,e$t,e$y,e$l,e$E,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<e$Y;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(e$D*this._tempNumver2,0,e$D*this._tempNumver3,e$t,e$y,e$l,e$E,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==e$Y-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(e$D*this._tempNumver2,0,e$D*this._tempNumver3,e$t,e$y,e$l,e$E,this._tempUint0+(this._tempInt0+e$Y)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==e$Y-1?this.addIndexes(this._tempUint1+e$Y+2):this.addIndexes(this._tempUint1+this._tempInt0+e$Y+1),this.addIndexes(this._tempUint1+this._tempInt0+e$Y),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},e$m.boundingBoxLine=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$D,e$y,e$l,e$E,e$B,e$o,e$r),this.addVertex(e$t,e$y,e$l,e$E,e$B,e$o,e$r),this.addVertex(e$D,e$m,e$l,e$E,e$B,e$o,e$r),this.addVertex(e$t,e$m,e$l,e$E,e$B,e$o,e$r),this.addVertex(e$t,e$y,e$Y,e$E,e$B,e$o,e$r),this.addVertex(e$D,e$y,e$Y,e$E,e$B,e$o,e$r),this.addVertex(e$t,e$m,e$Y,e$E,e$B,e$o,e$r),this.addVertex(e$D,e$m,e$Y,e$E,e$B,e$o,e$r),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},e$m.addVertex=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=e$D,this._vbData[this._posInVBData+1]=e$m,this._vbData[this._posInVBData+2]=e$Y,this._vbData[this._posInVBData+3]=e$t,this._vbData[this._posInVBData+4]=e$y,this._vbData[this._posInVBData+5]=e$l,this._vbData[this._posInVBData+6]=e$E,this._posInVBData+=this._floatSizePerVer,this},e$m.addVertexIndex=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){return this._hasBegun||this.addVertexIndexException(),this._vbData[e$B]=e$D,this._vbData[e$B+1]=e$m,this._vbData[e$B+2]=e$Y,this._vbData[e$B+3]=e$t,this._vbData[e$B+4]=e$y,this._vbData[e$B+5]=e$l,this._vbData[e$B+6]=e$E,(e$B+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=e$B),this},e$m.addIndexes=function(e$D){var e$m=arguments;this._hasBegun||this.addVertexIndexException();for(var e$Y=0;e$Y<e$m.length;e$Y++)this._ibData[this._posInIBData]=e$m[e$Y],this._posInIBData++;return this},e$m.begin=function(e$D,e$m){return this._hasBegun&&this.beginException0(),1!==e$D&&4!==e$D&&this.beginException1(),this._primitiveType=e$D,this._camera=e$m,this._hasBegun=!0,this},e$m.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},e$m.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(e$D._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),e$A.drawCall++,e$s.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},e$m.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},e$m.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},e$m.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},e$m.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},e$m.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},e$m.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(28,[new e$ED(0,"vector3",0),new e$ED(12,"vector4",1)])}]),e$D}()),e$g=function(){function e$D(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++e$D._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new e$Gm}e$R(e$D,"laya.d3.core.render.RenderElement");var e$m=e$D.prototype;return e$m.getDynamicBatchBakedVertexs=function(e$D){for(var e$m=this._renderObj._getVertexBuffer(e$D),e$Y=e$m.getData().slice(),e$t=e$m.vertexDeclaration,e$y=e$t.getVertexElementByUsage(0).offset/4,e$l=e$t.getVertexElementByUsage(3).offset/4,e$E=this._sprite3D.transform,e$B=e$E.worldMatrix,e$o=e$E.rotation,e$r=e$t.vertexStride/4,e$f=0,e$_=e$Y.length;e$f<e$_;e$f+=e$r){var e$i=e$f+e$y,e$R=e$f+e$l;e$em.transformVector3ArrayToVector3ArrayCoordinate(e$Y,e$i,e$B,e$Y,e$i),e$em.transformVector3ArrayByQuat(e$Y,e$R,e$o,e$Y,e$R)}return e$Y},e$m.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},e$m._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},e$G(0,e$m,"id",function(){return this._id}),e$G(0,e$m,"renderObj",function(){return this._renderObj},function(e$D){this._renderObj!==e$D&&(this._renderObj=e$D)}),e$D._uniqueIDCounter=0,e$D}(),e$H=function(){function e$m(e$D){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++e$m._uniqueIDCounter,this._needSort=!1,this._scene=e$D,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}e$R(e$m,"laya.d3.core.render.RenderQueue");var e$D=e$m.prototype;return e$D._sortOpaqueFunc=function(e$D,e$m){if(e$D._render&&e$m._render){var e$Y=e$D._material.renderQueue-e$m._material.renderQueue;return 0==e$Y?e$D._material.constructor&&e$m._material.constructor&&e$D._material.constructor.name&&e$m._material.constructor.name&&e$D._material.constructor.name==e$D._material.constructor.name&&e$D._sprite3D&&e$m._sprite3D&&e$D._sprite3D.name&&e$m._sprite3D.name&&e$D._sprite3D.name===e$m._sprite3D.name?0:e$D._render._distanceForSort-e$m._render._distanceForSort:e$Y}return 0},e$D._sortAlphaFunc=function(e$D,e$m){if(e$D._render&&e$m._render){var e$Y=e$D._material.renderQueue-e$m._material.renderQueue;return 0==e$Y?e$D._material.constructor&&e$m._material.constructor&&e$D._material.constructor.name&&e$m._material.constructor.name&&e$D._material.constructor.name==e$D._material.constructor.name&&e$D._sprite3D&&e$m._sprite3D&&e$D._sprite3D.name&&e$m._sprite3D.name&&e$D._sprite3D.name===e$m._sprite3D.name?0:e$m._render._distanceForSort-e$D._render._distanceForSort:e$Y}return 0},e$D._begainRenderElement=function(e$D,e$m,e$Y){return!!e$m._beforeRender(e$D)},e$D._sortAlpha=function(e$D){e$m._cameraPosition=e$D,this._finalElements.sort(this._sortAlphaFunc)},e$D._sortOpaque=function(e$D){e$m._cameraPosition=e$D,this._finalElements.sort(this._sortOpaqueFunc)},e$D._preRender=function(e$D){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},e$D._render=function(e$D,e$m){for(var e$Y,e$t,e$y,e$l,e$E,e$B,e$o=e$A.loopCount,e$r=this._scene,e$f=e$D.camera,e$_=(e$f.id,!1),e$i=0,e$R=this._finalElements.length;e$i<e$R;e$i++){var e$G,e$I,e$w,e$W=this._finalElements[e$i];if(null!=e$W._onPreRenderFunction&&e$W._onPreRenderFunction.call(e$W._sprite3D,e$D),0===e$W._type){if(e$D.owner=e$w=e$W._sprite3D,e$D.renderElement=e$W,e$w._preRenderUpdateComponents(e$D),e$G=e$W.renderObj,e$I=e$W._material,this._begainRenderElement(e$D,e$G,e$I)){if(e$Y=e$G._getVertexBuffers(),!(e$y=(e$t=e$G._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[e$t.id]){this._errorRecord[e$t.id]=1;var e$U="vertexBuffer:"+("("+e$t._destroyed+","+e$t._released+","+e$t._referenceCount+","+e$t._buffer+")")+", material:"+(e$I?e$I.__className+"("+e$I._destroyed+","+e$I._released+")":"null")+", owner:"+(e$w?e$w.__className+"("+e$w._destroyed+","+e$w._activeInHierarchy+","+e$w._displayedInStage+")":"null")+", renderObj:"+(e$G?e$G.__className+"("+e$G._destroyed+","+e$G._released+","+e$G._referenceCount+")":"")+", parent:, url:"+(e$w?e$w.url:"")+", disposeStack:"+e$t.disposeStack;e$c.recordError("报错：unknown vertexDeclaration  "+e$U)}continue}if(e$_=(e$l=e$D._shader=e$I._getShader(e$r._shaderDefineValue,e$y.shaderDefineValue,e$w._shaderDefineValue)).bind()||e$o!==e$l._uploadLoopCount,e$Y){if(e$l._uploadVertexBuffer!==e$Y||e$_){for(var e$e=0;e$e<e$Y.length;e$e++){var e$v=e$Y[e$e];e$l.uploadAttributesX(e$v.vertexDeclaration.shaderValues.data,e$v)}e$l._uploadVertexBuffer=e$Y}}else(e$l._uploadVertexBuffer!==e$t||e$_)&&(e$l.uploadAttributes(e$y.shaderValues.data,null),e$l._uploadVertexBuffer=e$t);(e$l._uploadScene!==e$r||e$_)&&(e$l.uploadSceneUniforms(e$r._shaderValues.data),e$l._uploadScene=e$r),(e$f!==e$l._uploadCamera||e$l._uploadSprite3D!==e$w||e$_)&&(e$l.uploadSpriteUniforms(e$w._shaderValues.data),e$l._uploadSprite3D=e$w),(e$f!==e$l._uploadCamera||e$_)&&(e$l.uploadCameraUniforms(e$f._shaderValues.data),e$l._uploadCamera=e$f),(e$l._uploadMaterial!==e$I||e$_)&&(e$I._upload(),e$l._uploadMaterial=e$I),e$E!==e$I?(e$I._setRenderStateBlendDepth(),e$I._setRenderStateFrontFace(e$m,e$w.transform),e$E=e$I,e$B=e$w):e$B!==e$w&&(e$I._setRenderStateFrontFace(e$m,e$w.transform),e$B=e$w),e$G._render(e$D),e$l._uploadLoopCount=e$o}e$w._postRenderUpdateComponents(e$D)}else if(2===e$W._type){e$W.renderObj;e$D.owner=e$w=e$W._sprite3D,e$D.renderElement=e$W,e$D._batchIndexStart=e$W._tempBatchIndexStart,e$D._batchIndexEnd=e$W._tempBatchIndexEnd,e$G=e$W.renderObj,e$I=e$W._material,this._begainRenderElement(e$D,e$G,e$I)&&(e$y=(e$t=e$G._getVertexBuffer(0)).vertexDeclaration,e$_=(e$l=e$D._shader=e$I._getShader(e$r._shaderDefineValue,e$y.shaderDefineValue,e$w._shaderDefineValue)).bind()||e$o!==e$l._uploadLoopCount,(e$l._uploadVertexBuffer!==e$t||e$_)&&(e$l.uploadAttributes(e$y.shaderValues.data,null),e$l._uploadVertexBuffer=e$t),(e$l._uploadScene!==e$r||e$_)&&(e$l.uploadSceneUniforms(e$r._shaderValues.data),e$l._uploadScene=e$r),(e$f!==e$l._uploadCamera||e$l._uploadSprite3D!==e$w||e$_)&&(e$l.uploadSpriteUniforms(e$w._shaderValues.data),e$l._uploadSprite3D=e$w),(e$f!==e$l._uploadCamera||e$_)&&(e$l.uploadCameraUniforms(e$f._shaderValues.data),e$l._uploadCamera=e$f),(e$l._uploadMaterial!==e$I||e$_)&&(e$I._upload(),e$l._uploadMaterial=e$I),e$E!==e$I?(e$I._setRenderStateBlendDepth(),e$I._setRenderStateFrontFace(e$m,e$w.transform),e$E=e$I,e$B=e$w):e$B!==e$w&&(e$I._setRenderStateFrontFace(e$m,e$w.transform),e$B=e$w),e$G._render(e$D),e$l._uploadLoopCount=e$o)}}},e$D._renderShadow=function(e$D,e$m){for(var e$Y,e$t,e$y,e$l,e$E,e$B=e$A.loopCount,e$o=this._scene,e$r=e$D.camera,e$f=!1,e$_=0,e$i=this._finalElements.length;e$_<e$i;e$_++){var e$R,e$G,e$I,e$w=this._finalElements[e$_];0===e$w._type&&(e$D.owner=e$I=e$w._sprite3D,e$m||e$I._projectionViewWorldUpdateCamera===e$r&&e$I._projectionViewWorldUpdateLoopCount===e$A.loopCount||(e$I._render._renderUpdate(e$D._projectionViewMatrix),e$I._projectionViewWorldUpdateLoopCount=e$A.loopCount,e$I._projectionViewWorldUpdateCamera=e$r),e$D.renderElement=e$w,e$I._preRenderUpdateComponents(e$D),e$R=e$w.renderObj,e$G=e$w._material,this._begainRenderElement(e$D,e$R,null)&&(e$t=(e$Y=e$R._getVertexBuffer(0)).vertexDeclaration,e$f=(e$y=e$D._shader=e$G._getShader(e$o._shaderDefineValue,e$t.shaderDefineValue,e$I._shaderDefineValue)).bind()||e$B!==e$y._uploadLoopCount,(e$y._uploadVertexBuffer!==e$Y||e$f)&&(e$y.uploadAttributes(e$t.shaderValues.data,null),e$y._uploadVertexBuffer=e$Y),(e$r!==e$y._uploadCamera||e$y._uploadSprite3D!==e$I||e$f)&&(e$y.uploadSpriteUniforms(e$I._shaderValues.data),e$y._uploadSprite3D=e$I),(e$r!==e$y._uploadCamera||e$f)&&(e$y.uploadCameraUniforms(e$r._shaderValues.data),e$y._uploadCamera=e$r),(e$y._uploadMaterial!==e$G||e$f)&&(e$G._upload(),e$y._uploadMaterial=e$G),e$y._uploadRenderElement,e$l!==e$G?(e$G._setRenderStateFrontFace(!1,e$I.transform),e$l=e$G,e$E=e$I):e$E!==e$I&&(e$G._setRenderStateFrontFace(!1,e$I.transform),e$E=e$I),e$R._render(e$D),e$y._uploadLoopCount=e$B),e$I._postRenderUpdateComponents(e$D))}},e$D._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},e$D._addRenderElement=function(e$D){this._renderElements.push(e$D),this._needSort=!0},e$D._addDynamicBatchElement=function(e$D){this._dynamicBatchCombineRenderElements.push(e$D)},e$G(0,e$D,"id",function(){return this._id}),e$m._uniqueIDCounter=0,e$m._cameraPosition=null,e$m}(),e$x=function(){function e$D(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return e$R(e$D,"laya.d3.core.render.RenderState"),e$D.clientWidth=0,e$D.clientHeight=0,e$D}(),e$V=function(){function e$E(e$D,e$m){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new e$bD(new e$om,0),this._corners=[new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om],this._boundingBoxCenter=new e$om,this._children=e$t(8),this._objects=[],this._tempBoundBoxCorners=[new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om],this._scene=e$D,this._currentDepth=e$m}e$R(e$E,"laya.d3.core.scene.OctreeNode");var e$D=e$E.prototype;return e$c.imps(e$D,{"laya.d3.core.scene.ITreeNode":!0}),e$D.init=function(e$D,e$m){var e$Y=new e$om,e$t=new e$om;e$om.scale(e$m,-.5,e$Y),e$om.scale(e$m,.5,e$t),e$om.add(e$Y,e$D,e$Y),e$om.add(e$t,e$D,e$t),this.exactBox=new e$VD(e$Y,e$t),this.relaxBox=new e$VD(e$Y,e$t)},e$D.addTreeNode=function(e$D){1===e$jD.boxContainsBox(this._relaxBox,e$D.boundingBox)?this.addNodeDown(e$D,0):this.addObject(e$D)},e$D.addChild=function(e$D){var e$m=this._children[e$D];if(null==e$m){e$m=new e$E(this._scene,this._currentDepth+1),(this._children[e$D]=e$m)._parent=this,e$om.subtract(this._exactBox.max,this._exactBox.min,e$E.tempSize),e$om.multiply(e$E.tempSize,e$E._octreeSplit[e$D],e$E.tempCenter),e$om.add(this._exactBox.min,e$E.tempCenter,e$E.tempCenter),e$om.scale(e$E.tempSize,.25,e$E.tempSize);var e$Y=new e$om,e$t=new e$om;e$om.subtract(e$E.tempCenter,e$E.tempSize,e$Y),e$om.add(e$E.tempCenter,e$E.tempSize,e$t),e$m.exactBox=new e$VD(e$Y,e$t),e$om.scale(e$E.tempSize,e$E.relax,e$E.tempSize);var e$y=new e$om,e$l=new e$om;e$om.subtract(e$E.tempCenter,e$E.tempSize,e$y),e$om.add(e$E.tempCenter,e$E.tempSize,e$l),e$m.relaxBox=new e$VD(e$y,e$l)}return e$m},e$D.addObject=function(e$D){(e$D._treeNode=this)._objects.push(e$D)},e$D.removeObject=function(e$D){if(e$D._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var e$m=this._objects.indexOf(e$D);return-1!==e$m&&(this._objects.splice(e$m,1),!0)},e$D.clearObject=function(){this._objects.length=0},e$D.addNodeUp=function(e$D,e$m){this._parent&&1!==e$jD.boxContainsBox(this._exactBox,e$D.boundingBox)?this._parent.addNodeUp(e$D,e$m-1):this.addNodeDown(e$D,e$m)},e$D.addNodeDown=function(e$D,e$m){if(e$m<this._scene.treeLevel){var e$Y=this.inChildIndex(e$D.boundingBoxCenter),e$t=this.addChild(e$Y);1===e$jD.boxContainsBox(e$t._relaxBox,e$D.boundingBox)?e$t.addNodeDown(e$D,++e$m):this.addObject(e$D)}else this.addObject(e$D)},e$D.inChildIndex=function(e$D){return 4*(e$D.z<this._boundingBoxCenter.z?0:1)+2*(e$D.y<this._boundingBoxCenter.y?0:1)+(e$D.x<this._boundingBoxCenter.x?0:1)},e$D.updateObject=function(e$D){1===e$jD.boxContainsBox(this._relaxBox,e$D.boundingBox)?(this.removeObject(e$D),e$D._treeNode=null,this.addNodeDown(e$D,this._currentDepth)):this._parent&&(this.removeObject(e$D),e$D._treeNode=null,this._parent.addNodeUp(e$D,this._currentDepth-1))},e$D.cullingObjects=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E=0,e$B=0,e$o=0,e$r=this._scene._dynamicBatchManager;for(e$E=0,e$l=this._objects.length;e$E<e$l;e$E++){var e$f=this._objects[e$E];if(e$N.isVisible(e$f._owner.layer.mask)&&e$f.enable){if(e$m&&(e$A.treeSpriteCollision+=1,0===e$D.containsBoundSphere(e$f.boundingSphere)))continue;e$f._renderUpdate(e$y),e$f._distanceForSort=e$om.distance(e$f.boundingSphere.center,e$t)+e$f.sortingFudge;var e$_=e$f._renderElements;for(e$B=0,e$o=e$_.length;e$B<e$o;e$B++){var e$i=e$_[e$B],e$R=e$i._staticBatch;if(e$R&&e$R._material===e$i._material)e$R._addBatchRenderElement(e$i);else{var e$G=e$i.renderObj;e$G.triangleCount<10&&1===e$G._vertexBufferCount&&e$G._getIndexBuffer()&&e$i._material.renderQueue<2&&e$i._canDynamicBatch&&!e$f._owner.isStatic?e$r._addPrepareRenderElement(e$i):this._scene.getRenderQueue(e$i._material.renderQueue)._addRenderElement(e$i)}}}}for(e$E=0;e$E<8;e$E++){var e$I=this._children[e$E];if(null!=e$I){var e$w=e$m;if(e$m){var e$W=e$D.containsBoundBox(e$I._relaxBox);if(e$A.treeNodeCollision+=1,0===e$W)continue;e$w=2===e$W}e$I.cullingObjects(e$D,e$w,e$Y,e$t,e$y)}}},e$D.cullingShadowObjects=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E=0,e$B=0,e$o=0;this._scene._dynamicBatchManager;for(e$E=0,e$l=this._objects.length;e$E<e$l;e$E++){var e$r=this._objects[e$E];if(e$r.castShadow&&e$N.isVisible(e$r._owner.layer.mask)&&e$r.enable){if(e$Y&&0===e$D[0].containsBoundSphere(e$r.boundingSphere))continue;for(var e$f=1,e$_=e$D.length;e$f<e$_;e$f++){var e$i=e$m[e$f-1];if(0!==e$D[e$f].containsBoundSphere(e$r.boundingSphere)){var e$R=e$r._renderElements;for(e$B=0,e$o=e$R.length;e$B<e$o;e$B++)e$i._addRenderElement(e$R[e$B])}}}}for(e$E=0;e$E<8;e$E++){var e$G=this._children[e$E];if(null!=e$G){var e$I=e$Y;if(e$Y){var e$w=e$D[0].containsBoundBox(e$G._relaxBox);if(0===e$w)continue;e$I=2===e$w}e$G.cullingShadowObjects(e$D,e$m,e$I,e$t,e$y)}}},e$D.cullingShadowObjectsOnePSSM=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B=e$m[0],e$o=0,e$r=0,e$f=0;for(e$o=0,e$E=this._objects.length;e$o<e$E;e$o++){var e$_=this._objects[e$o];if(e$_.castShadow&&e$N.isVisible(e$_._owner.layer.mask)&&e$_.enable){if(e$t&&0===e$D.containsBoundSphere(e$_.boundingSphere))continue;e$_._renderUpdate(e$Y);var e$i=e$_._renderElements;for(e$r=0,e$f=e$i.length;e$r<e$f;e$r++)e$B._addRenderElement(e$i[e$r])}}for(e$o=0;e$o<8;e$o++){var e$R=this._children[e$o];if(null!=e$R){var e$G=e$t;if(e$t){var e$I=e$D.containsBoundBox(e$R._relaxBox);if(0===e$I)continue;e$G=2===e$I}e$R.cullingShadowObjectsOnePSSM(e$D,e$m,e$Y,e$G,e$y,e$l)}}},e$D.renderBoudingBox=function(e$D){this._renderBoudingBox(e$D);for(var e$m=0;e$m<8;++e$m){var e$Y=this._children[e$m];e$Y&&e$Y.renderBoudingBox(e$D)}},e$D.buildAllChild=function(e$D){if(e$D<this._scene.treeLevel)for(var e$m=0;e$m<8;e$m++){this.addChild(e$m).buildAllChild(e$D+1)}},e$D._renderBoudingBox=function(e$D){},e$G(0,e$D,"exactBox",function(){return this._exactBox},function(e$D){this._exactBox=e$D,e$om.add(e$D.min,e$D.max,this._boundingBoxCenter),e$om.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),e$G(0,e$D,"relaxBox",function(){return this._relaxBox},function(e$D){(this._relaxBox=e$D).getCorners(this._corners),e$bD.createfromPoints(this._corners,this._boundingSphere)}),e$E.debugMode=!1,e$E.relax=1.15,e$E.CHILDNUM=8,e$_(e$E,["tempVector0",function(){return this.tempVector0=new e$om},"tempSize",function(){return this.tempSize=new e$om},"tempCenter",function(){return this.tempCenter=new e$om},"_octreeSplit",function(){return this._octreeSplit=[new e$om(.25,.25,.25),new e$om(.75,.25,.25),new e$om(.25,.75,.25),new e$om(.75,.75,.25),new e$om(.25,.25,.75),new e$om(.75,.25,.75),new e$om(.25,.75,.75),new e$om(.75,.75,.75)]}]),e$E}(),e$Z=(function(){function e$D(){}e$R(e$D,"laya.d3.core.scene.SceneManager")}(),function(){function e$D(e$D,e$m,e$Y,e$t){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===e$D&&(e$D=1),void 0===e$m&&(e$m=1),void 0===e$Y&&(e$Y=1),void 0===e$t&&(e$t=1),this._r=e$D,this._g=e$m,this._b=e$Y,this._a=e$t}return e$R(e$D,"laya.d3.core.trail.module.Color",null,"Color$1"),e$D.prototype.cloneTo=function(e$D){e$D._r=this._r,e$D._g=this._g,e$D._b=this._b,e$D._a=this._a},e$_(e$D,["RED",function(){return this.RED=new e$D(1,0,0,1)},"GREEN",function(){return this.GREEN=new e$D(0,1,0,1)},"BLUE",function(){return this.BLUE=new e$D(0,0,1,1)},"CYAN",function(){return this.CYAN=new e$D(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new e$D(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new e$D(1,0,1,1)},"GRAY",function(){return this.GRAY=new e$D(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new e$D(1,1,1,1)},"BLACK",function(){return this.BLACK=new e$D(0,0,0,1)}]),e$D}()),e$b=(function(){function e$D(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}e$R(e$D,"laya.d3.core.trail.module.Gradient");var e$m=e$D.prototype;e$m.setKeys=function(e$D,e$m){var e$Y,e$t;this._colorKeys=e$D;for(var e$y=this.index=0;e$y<e$D.length;e$y++){var e$l=(e$Y=e$D[e$y]).color;this._colorKeyData[this.index++]=e$l._r,this._colorKeyData[this.index++]=e$l._g,this._colorKeyData[this.index++]=e$l._b,this._colorKeyData[this.index++]=e$Y.time}this._alphaKeys=e$m;for(var e$E=this.index=0;e$E<e$m.length;e$E++)e$t=e$m[e$E],this._alphaKeyData[this.index++]=e$t.alpha,this._alphaKeyData[this.index++]=e$t.time},e$m.cloneTo=function(e$D){var e$m=0,e$Y=0,e$t=this.colorKeys,e$y=[];for(e$m=0,e$Y=e$t.length;e$m<e$Y;e$m++){var e$l=new e$j;e$t[e$m].cloneTo(e$l),e$y.push(e$l)}var e$E=this.alphaKeys,e$B=[];for(e$m=0,e$Y=e$E.length;e$m<e$Y;e$m++){var e$o=new e$b;e$E[e$m].cloneTo(e$o),e$B.push(e$o)}e$D.setKeys(e$y,e$B)},e$G(0,e$m,"mode",function(){return this._mode},function(e$D){this._mode=e$D}),e$G(0,e$m,"colorKeys",function(){return this._colorKeys},function(e$D){this._colorKeys=e$D;for(var e$m=this.index=0;e$m<e$D.length;e$m++){var e$Y=e$D[e$m],e$t=e$Y.color;this._colorKeyData[this.index++]=e$t._r,this._colorKeyData[this.index++]=e$t._g,this._colorKeyData[this.index++]=e$t._b,this._colorKeyData[this.index++]=e$Y.time}}),e$G(0,e$m,"alphaKeys",function(){return this._alphaKeys},function(e$D){this._alphaKeys=e$D;for(var e$m=this.index=0;e$m<e$D.length;e$m++){var e$Y=e$D[e$m];this._alphaKeyData[this.index++]=e$Y.alpha,this._alphaKeyData[this.index++]=e$Y.time}})}(),function(){function e$D(e$D,e$m){this._alpha=NaN,this._time=NaN,void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),this._alpha=e$D,this._time=e$m}e$R(e$D,"laya.d3.core.trail.module.GradientAlphaKey");var e$m=e$D.prototype;return e$m.cloneTo=function(e$D){e$D.alpha=this.alpha,e$D.time=this.time},e$G(0,e$m,"alpha",function(){return this._alpha},function(e$D){this._alpha=e$D}),e$G(0,e$m,"time",function(){return this._time},function(e$D){this._time=e$D}),e$D}()),e$j=function(){function e$D(e$D,e$m){this._color=null,this._time=NaN,void 0===e$m&&(e$m=0),this._color=e$D||new e$Z,this._time=e$m}e$R(e$D,"laya.d3.core.trail.module.GradientColorKey");var e$m=e$D.prototype;return e$m.cloneTo=function(e$D){this.color.cloneTo(e$D.color),e$D.time=this.time},e$G(0,e$m,"color",function(){return this._color},function(e$D){this._color=e$D}),e$G(0,e$m,"time",function(){return this._time},function(e$D){this._time=e$D}),e$D}(),e$K=(function(){function e$D(){}e$R(e$D,"laya.d3.core.trail.module.GradientMode"),e$D.Blend=0,e$D.Fixed=1}(),function(){function e$D(){}e$R(e$D,"laya.d3.core.trail.module.TextureMode"),e$D.Stretch=0,e$D.Tile=1}(),function(){function e$D(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}e$R(e$D,"laya.d3.core.trail.module.TrailKeyFrame"),e$D.prototype.cloneTo=function(e$D){e$D.time=this.time,e$D.inTangent=this.inTangent,e$D.outTangent=this.outTangent,e$D.value=this.value}}(),function(){function e$m(e$D){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new e$om,this._curPosition=new e$om,this._delVector3=new e$om,this._lastFixedVertexPosition=new e$om,this._pointAtoBVector3=new e$om,this._pointA=new e$om,this._pointB=new e$om,this._owner=e$D,this._id=e$m.renderElementCount++,0==this._id?e$D._owner.transform.position.cloneTo(this._lastPosition):e$D._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new e$km(e$K.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new e$km(e$K.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}e$R(e$m,"laya.d3.core.trail.TrailRenderElement");var e$D=e$m.prototype;e$c.imps(e$D,{"laya.d3.core.render.IRenderable":!0}),e$D._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},e$D._addTrailByFirstPosition=function(e$D,e$m){e$om.subtract(e$m,e$D,this._delVector3),e$om.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),e$om.normalize(this._pointAtoBVector3,this._pointAtoBVector3),e$om.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(e$D),e$D.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},e$D._addTrailByNextPosition=function(e$D){e$om.subtract(e$D,this._lastFixedVertexPosition,this._delVector3),e$om.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),e$om.normalize(this._pointAtoBVector3,this._pointAtoBVector3),e$om.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=e$om.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=e$KD.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(e$D),e$D.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(e$D),this._virtualVerticesCount=2)},e$D._updateVerticesByPosition=function(e$D){this._pointe=e$D.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},e$D._updateVertexBuffer2=function(){var e$D,e$m=0,e$Y=0,e$t=0;for(e$t=0,e$D=(this._verticesCount+this._virtualVerticesCount)/2;e$t<e$D;e$t++)e$Y=0==this._owner.textureMode?(this._VerticesToTailLength[e$t]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[e$t],this._vertices2[e$m++]=1-e$Y,this._vertices2[e$m++]=1-e$Y;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},e$D._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},e$D._updateDisappear=function(){var e$D,e$m=0;for(e$m=this._curDisappearIndex,e$D=(this._verticesCount+this._virtualVerticesCount)/2;e$m<e$D;e$m++)this._owner._curtime-this._everyGroupVertexBirthTime[e$m]>=this._owner.time+e$KD.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},e$D._beforeRender=function(e$D){return this._camera=e$D.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),e$om.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},e$D._render=function(e$D){this._isDead||(e$s.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),e$A.drawCall++,e$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},e$D._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),0===e$D?this._vertexBuffer1:1===e$D?this._vertexBuffer2:null},e$D._getVertexBuffers=function(){return this._vertexBuffers},e$D._getIndexBuffer=function(){return null},e$D.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},e$D._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},e$G(0,e$D,"_vertexBufferCount",function(){return this._vertexBuffers.length}),e$G(0,e$D,"triangleCount",function(){return 0}),e$m.renderElementCount=0}(),function(){function e$D(){}e$R(e$D,"laya.d3.core.trail.VertexTrail");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration1}),e$G(1,e$D,"vertexDeclaration1",function(){return e$D._vertexDeclaration1}),e$G(1,e$D,"vertexDeclaration2",function(){return e$D._vertexDeclaration2}),e$_(e$D,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new e$lD(32,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",41),new e$ED(24,"single",33),new e$ED(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new e$lD(4,[new e$ED(0,"single",38)])}]),e$D}()),e$DD=function(){function e$v(e$D){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=e$D}e$R(e$v,"laya.d3.graphics.DynamicBatch");var e$D=e$v.prototype;return e$c.imps(e$D,{"laya.d3.core.render.IRenderable":!0}),e$D._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),0===e$D?this._vertexBuffer:null},e$D._getIndexBuffer=function(){return this._indexBuffer},e$D._getCombineRenderElementFromPool=function(e$D,e$m,e$Y){var e$t=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return e$t||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=e$t=new e$g,e$t._sprite3D=new e$Km),e$t._sprite3D._render._renderUpdate(e$Y),e$t},e$D._getRenderElement=function(e$D,e$m,e$Y){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*e$v.maxVertexCount),this._indexDatas=new Uint16Array(e$v.maxIndexCount),this._vertexBuffer=e$km.create(this._vertexDeclaration,e$v.maxVertexCount,35048),this._indexBuffer=e$dm.create("ushort",e$v.maxIndexCount,35048));for(var e$t=this._merageElements.length=0,e$y=0,e$l=0,e$E=this._combineRenderElements.length;e$l<e$E;e$l++){var e$B=this._combineRenderElements[e$l],e$o=e$B.getDynamicBatchBakedVertexs(0),e$r=e$B.getBakedIndices(),e$f=e$B._sprite3D.transform._isFrontFaceInvert,e$_=e$t/(this._vertexDeclaration.vertexStride/4),e$i=e$y,e$R=e$i+e$r.length;e$B._tempBatchIndexStart=e$i,e$B._tempBatchIndexEnd=e$R,this._indexDatas.set(e$r,e$y);var e$G=0;if(e$f)for(e$G=e$i;e$G<e$R;e$G+=3){this._indexDatas[e$G]=e$_+this._indexDatas[e$G];var e$I=this._indexDatas[e$G+1],e$w=this._indexDatas[e$G+2];this._indexDatas[e$G+1]=e$_+e$w,this._indexDatas[e$G+2]=e$_+e$I}else for(e$G=e$i;e$G<e$R;e$G+=3)this._indexDatas[e$G]=e$_+this._indexDatas[e$G],this._indexDatas[e$G+1]=e$_+this._indexDatas[e$G+1],this._indexDatas[e$G+2]=e$_+this._indexDatas[e$G+2];e$y+=e$r.length,this._vertexDatas.set(e$o,e$t),e$t+=e$o.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),e$l=this._combineRenderElementPoolIndex=0,e$E=this._materials.length;e$l<e$E;e$l++){var e$W=this._getCombineRenderElementFromPool(e$D,e$m,e$Y);e$W._type=2,e$W._staticBatch=null;var e$U=(e$W.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[e$l]]._tempBatchIndexStart,e$e=e$l+1===this._materialToRenderElementsOffsets.length?e$y:this._combineRenderElements[this._materialToRenderElementsOffsets[e$l+1]]._tempBatchIndexStart;e$W._tempBatchIndexStart=e$U,e$W._tempBatchIndexEnd=e$e,e$W._material=this._materials[e$l],this._merageElements.push(e$W)}},e$D._addCombineRenderObjTest=function(e$D){var e$m=e$D.renderObj,e$Y=this._currentCombineIndexCount+e$m._getIndexBuffer().indexCount,e$t=this._currentCombineVertexCount+e$m._getVertexBuffer().vertexCount;return!(e$v.maxVertexCount<e$t||e$v.maxIndexCount<e$Y)},e$D._addCombineRenderObj=function(e$D){var e$m=e$D.renderObj;this._combineRenderElements.push(e$D),this._currentCombineIndexCount=this._currentCombineIndexCount+e$m._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e$m._getVertexBuffer().vertexCount},e$D._addCombineMaterial=function(e$D){this._materials.push(e$D)},e$D._addMaterialToRenderElementOffset=function(e$D){this._materialToRenderElementsOffsets.push(e$D)},e$D._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},e$D._addToRenderQueue=function(e$D,e$m,e$Y,e$t){this._getRenderElement(e$m,e$Y,e$t);for(var e$y=0,e$l=this._materials.length;e$y<e$l;e$y++)e$D.getRenderQueue(this._materials[e$y].renderQueue)._addDynamicBatchElement(this._merageElements[e$y])},e$D._beforeRender=function(e$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$D._render=function(e$D){var e$m=e$D._batchIndexEnd-e$D._batchIndexStart;e$s.mainContext.drawElements(4,e$m,5123,2*e$D._batchIndexStart),e$A.drawCall++,e$A.trianglesFaces+=e$m/3},e$D._getVertexBuffers=function(){return null},e$G(0,e$D,"_vertexBufferCount",function(){return 1}),e$G(0,e$D,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$G(0,e$D,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),e$v.maxVertexCount=2e4,e$v.maxIndexCount=4e4,e$v.maxCombineTriangleCount=10,e$v}(),e$mD=function(){function e$v(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}e$R(e$v,"laya.d3.graphics.DynamicBatchManager");var e$D=e$v.prototype;return e$D.getDynamicBatch=function(e$D,e$m){var e$Y,e$t=e$D.id.toString()+e$m;return this._dynamicBatches[e$t]?e$Y=this._dynamicBatches[e$t]:this._dynamicBatches[e$t]=e$Y=new e$DD(e$D),e$Y},e$D._garbageCollection=function(){for(var e$D in this._dynamicBatches)0===this._dynamicBatches[e$D].combineRenderElementsCount&&delete this._dynamicBatches[e$D]},e$D._addPrepareRenderElement=function(e$D){this._prepareDynamicBatchCombineElements.push(e$D)},e$D._finishCombineDynamicBatch=function(e$D){var e$m,e$Y,e$t;this._prepareDynamicBatchCombineElements.sort(e$v._sortPrepareDynamicBatch);for(var e$y,e$l,e$E,e$B,e$o,e$r=-1,e$f=!0,e$_=0,e$i=-1,e$R=0,e$G=this._prepareDynamicBatchCombineElements.length;e$R<e$G;e$R++){var e$I=(e$l=this._prepareDynamicBatchCombineElements[e$R]).renderObj._getVertexBuffer(0).vertexDeclaration,e$w=e$Y!==e$I;e$w&&(e$_=0,e$Y=e$I);var e$W=e$_!==e$r;if(e$W&&(e$r=e$_),(e$w||e$W)&&(e$E=this.getDynamicBatch(e$I,e$_),e$m=null),e$f)if(e$E._addCombineRenderObjTest(e$l)){if(e$m!==(e$y=e$l._material))e$B&&(e$D.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$i=-1),e$B=e$y,e$i=e$E.combineRenderElementsCount,e$o=e$l,e$m=e$y;else if(e$B){var e$U=e$o.renderObj,e$e=e$l.renderObj;e$U._getVertexBuffer().vertexCount+e$e._getVertexBuffer().vertexCount>e$DD.maxVertexCount||e$U._getIndexBuffer().indexCount+e$e._getIndexBuffer().indexCount>e$DD.maxIndexCount?(e$D.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$B=e$y,e$i=e$E.combineRenderElementsCount,e$o=e$l):(e$E._addCombineMaterial(e$B),e$E._addMaterialToRenderElementOffset(e$i),e$E._addCombineRenderObj(e$o),e$o=e$B=null,e$i=-1,e$E._addCombineRenderObj(e$l))}else e$E._addCombineRenderObj(e$l);e$f=!0}else e$B&&(e$D.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$i=-1),e$_++,e$f=!1;else e$t=this._prepareDynamicBatchCombineElements[e$R-1],e$E._addMaterialToRenderElementOffset(e$E.combineRenderElementsCount),e$m=e$t._material,e$E._addCombineMaterial(e$m),e$E._addCombineRenderObj(e$t),e$f=!0,e$m!==(e$y=e$l._material)?(e$B=e$y,e$i=e$E.combineRenderElementsCount,e$o=e$l):e$E._addCombineRenderObj(e$l),e$m=e$y}e$B&&(e$D.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$i=-1),this._prepareDynamicBatchCombineElements.length=0},e$D._clearRenderElements=function(){for(var e$D in this._dynamicBatches)this._dynamicBatches[e$D]._clearRenderElements()},e$D._addToRenderQueue=function(e$D,e$m,e$Y,e$t){for(var e$y in this._dynamicBatches){var e$l=this._dynamicBatches[e$y];0<e$l.combineRenderElementsCount&&e$l._addToRenderQueue(e$D,e$m,e$Y,e$t)}},e$D.dispose=function(){this._dynamicBatches=null},e$v._sortPrepareDynamicBatch=function(e$D,e$m){return e$D._mainSortID-e$m._mainSortID},e$v}(),e$YD=function(){function e$D(){}return e$R(e$D,"laya.d3.graphics.FrustumCulling"),e$D.renderShadowObjectCulling=function(e$D,e$m,e$Y,e$t,e$y){var e$l=0,e$E=0,e$B=0,e$o=0;for(e$l=0,e$B=e$Y.length;e$l<e$B;e$l++){var e$r=e$Y[e$l];e$r&&e$r._clearRenderElements()}var e$f,e$_,e$i,e$R=e$D._cullingRenders;if(1<e$y){for(e$l=0,e$B=e$D._cullingRendersLength;e$l<e$B;e$l++)if((e$f=e$R[e$l]).castShadow&&e$N.isVisible(e$f._owner.layer.mask)&&e$f.enable)for(var e$G=1,e$I=e$m.length;e$G<e$I;e$G++)if(e$_=e$Y[e$G-1],0!==e$m[e$G].containsBoundSphere(e$f.boundingSphere))for(e$E=0,e$o=(e$i=e$f._renderElements).length;e$E<e$o;e$E++)e$_._addRenderElement(e$i[e$E])}else for(e$l=0,e$B=e$D._cullingRendersLength;e$l<e$B;e$l++)if((e$f=e$R[e$l]).castShadow&&e$N.isVisible(e$f._owner.layer.mask)&&e$f.enable&&0!==e$m[0].containsBoundSphere(e$f.boundingSphere))for(e$f._renderUpdate(e$t),e$_=e$Y[0],e$E=0,e$o=(e$i=e$f._renderElements).length;e$E<e$o;e$E++)e$_._addRenderElement(e$i[e$E])},e$D.renderShadowObjectCullingOctree=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=0,e$E=e$Y.length;e$l<e$E;e$l++){var e$B=e$Y[e$l];e$B&&e$B._clearRenderElements()}1<e$y?e$D.treeRoot.cullingShadowObjects(e$m,e$Y,!0,0,e$D):e$D.treeRoot.cullingShadowObjectsOnePSSM(e$m[0],e$Y,e$t,!0,0,e$D)},e$D.renderObjectCulling=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=0,e$B=0,e$o=0,e$r=0,e$f=e$m._quenes,e$_=e$m._dynamicBatchManager,e$i=e$m._cullingRenders;for(e$E=0,e$B=e$f.length;e$E<e$B;e$E++){var e$R=e$f[e$E];e$R&&e$R._clearRenderElements()}var e$G=e$tD._staticBatchManagers;for(e$E=0,e$B=e$G.length;e$E<e$B;e$E++)e$G[e$E]._clearRenderElements();e$_._clearRenderElements();var e$I=e$Y.transform.position;for(e$E=0,e$B=e$m._cullingRendersLength;e$E<e$B;e$E++){var e$w=e$i[e$E];if(e$N.isVisible(e$w._owner.layer.mask)&&e$w.enable&&0!==e$D.containsBoundSphere(e$w.boundingSphere)&&e$w._renderUpdate(e$l)){e$w._distanceForSort=e$om.distance(e$w.boundingSphere.center,e$I)+e$w.sortingFudge;var e$W=e$w._renderElements;for(e$o=0,e$r=e$W.length;e$o<e$r;e$o++){var e$U=e$W[e$o],e$e=e$U._staticBatch;if(e$e&&e$e._material===e$U._material)e$e._addBatchRenderElement(e$U);else{var e$v=e$U.renderObj;e$v.triangleCount<10&&1===e$v._vertexBufferCount&&e$v._getIndexBuffer()&&e$U._material.renderQueue<2&&e$U._canDynamicBatch&&!e$w._owner.isStatic?e$_._addPrepareRenderElement(e$U):e$m.getRenderQueue(e$U._material.renderQueue)._addRenderElement(e$U)}}}}for(e$E=0,e$B=e$G.length;e$E<e$B;e$E++)e$G[e$E]._addToRenderQueue(e$m,e$t,e$y,e$l);e$_._finishCombineDynamicBatch(e$m),e$_._addToRenderQueue(e$m,e$t,e$y,e$l)},e$D.renderObjectCullingOctree=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=0,e$B=0,e$o=e$m._quenes,e$r=e$m._dynamicBatchManager;for(e$E=0,e$B=e$o.length;e$E<e$B;e$E++){var e$f=e$o[e$E];e$f&&e$f._clearRenderElements()}var e$_=e$tD._staticBatchManagers;for(e$E=0,e$B=e$_.length;e$E<e$B;e$E++)e$_[e$E]._clearRenderElements();for(e$r._clearRenderElements(),e$m._cullingRenders.length=0,e$m.treeRoot.cullingObjects(e$D,!0,0,e$Y.transform.position,e$l),e$E=0,e$B=e$_.length;e$E<e$B;e$E++)e$_[e$E]._addToRenderQueue(e$m,e$t,e$y,e$l);e$r._finishCombineDynamicBatch(e$m),e$r._addToRenderQueue(e$m,e$t,e$y,e$l)},e$D.renderObjectCullingNoBoundFrustum=function(e$D,e$m,e$Y,e$t,e$y){var e$l=0,e$E=0,e$B=0,e$o=0,e$r=e$D._quenes,e$f=e$D._dynamicBatchManager,e$_=e$D._cullingRenders;for(e$l=0,e$E=e$r.length;e$l<e$E;e$l++){var e$i=e$r[e$l];e$i&&e$i._clearRenderElements()}var e$R=e$tD._staticBatchManagers;for(e$l=0,e$E=e$R.length;e$l<e$E;e$l++)e$R[e$l]._clearRenderElements();e$f._clearRenderElements();var e$G=e$m.transform.position;for(e$l=0,e$E=e$D._cullingRendersLength;e$l<e$E;e$l++){var e$I=e$_[e$l];if(e$N.isVisible(e$I._owner.layer.mask)&&e$I.enable){e$I._renderUpdate(e$y),e$I._distanceForSort=e$om.distance(e$I.boundingSphere.center,e$G)+e$I.sortingFudge;var e$w=e$I._renderElements;for(e$B=0,e$o=e$w.length;e$B<e$o;e$B++){var e$W=e$w[e$B],e$U=e$W._staticBatch;if(e$U&&e$U._material===e$W._material)e$U._addBatchRenderElement(e$W);else{var e$e=e$W.renderObj;e$e.triangleCount<10&&1===e$e._vertexBufferCount&&e$e._getIndexBuffer()&&e$W._material.renderQueue<2&&e$W._canDynamicBatch&&!e$I._owner.isStatic?e$f._addPrepareRenderElement(e$W):e$D.getRenderQueue(e$W._material.renderQueue)._addRenderElement(e$W)}}}}for(e$l=0,e$E=e$R.length;e$l<e$E;e$l++)e$R[e$l]._addToRenderQueue(e$D,e$Y,e$t,e$y);e$f._finishCombineDynamicBatch(e$D),e$f._addToRenderQueue(e$D,e$Y,e$t,e$y)},e$D}(),e$tD=function(){function e$l(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}e$R(e$l,"laya.d3.graphics.StaticBatchManager");var e$D=e$l.prototype;return e$D._finishInit=function(){for(var e$D in this._staticBatches)this._staticBatches[e$D]._finishInit();this._initBatchRenderElements.length=0},e$D._initStaticBatchs=function(e$D){throw new Error("StaticBatchManager:must override this function.")},e$D._addInitBatchSprite=function(e$D){for(var e$m=e$D._render._renderElements,e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++)this._initBatchRenderElements.push(e$m[e$Y])},e$D._clearRenderElements=function(){for(var e$D in this._staticBatches)this._staticBatches[e$D]._clearRenderElements()},e$D._garbageCollection=function(e$D){var e$m=e$D._staticBatch,e$Y=e$m._initBatchRenderElements,e$t=e$Y.indexOf(e$D);e$Y.splice(e$t,1),0===e$Y.length&&(e$m.dispose(),delete this._staticBatches[e$m._key])},e$D._addToRenderQueue=function(e$D,e$m,e$Y,e$t){for(var e$y in this._staticBatches){var e$l=this._staticBatches[e$y];0<e$l._batchRenderElements.length&&e$l._updateToRenderQueue(e$D,e$t)}},e$D.dispose=function(){this._staticBatches=null},e$l._addToStaticBatchQueue=function(e$D){e$D instanceof laya.d3.core.RenderableSprite3D&&e$D._addToInitStaticBatchManager();for(var e$m=0,e$Y=e$D.numChildren;e$m<e$Y;e$m++)e$l._addToStaticBatchQueue(e$D._childs[e$m])},e$l.combine=function(e$D,e$m){var e$Y,e$t=0,e$y=0;if(e$m)for(e$t=0,e$y=e$m.length;e$t<e$y;e$t++){e$m[e$t]._addToInitStaticBatchManager()}else e$D&&e$l._addToStaticBatchQueue(e$D);for(e$t=0,e$y=e$l._staticBatchManagers.length;e$t<e$y;e$t++)(e$Y=e$l._staticBatchManagers[e$t])._initStaticBatchs(e$D),e$Y._finishInit()},e$l._staticBatchManagers=[],e$l}(),e$yD=function(){function e$D(e$D,e$m,e$Y){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=e$D,this._manager=e$m,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=e$Y}e$R(e$D,"laya.d3.graphics.StaticBatch");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e$m._binarySearch=function(e$D){for(var e$m=0,e$Y=this._batchRenderElements.length-1,e$t=0;e$m<=e$Y;)e$t=Math.floor((e$m+e$Y)/2),this._compareBatchRenderElement(this._batchRenderElements[e$t],e$D)?e$Y=e$t-1:e$m=e$t+1;return e$m},e$m._compareBatchRenderElement=function(e$D,e$m){throw new Error("StaticBatch:must override this function.")},e$m._getVertexDecLightMap=function(e$D){return e$D===e$PD.vertexDeclaration?e$ND.vertexDeclaration:e$D===e$XD.vertexDeclaration?e$TD.vertexDeclaration:e$D===e$JD.vertexDeclaration?e$vD.vertexDeclaration:e$D===e$$D.vertexDeclaration?null:e$D===e$ID.vertexDeclaration?e$wD.vertexDeclaration:e$D===e$LD.vertexDeclaration?e$OD.vertexDeclaration:e$D===e$sD.vertexDeclaration?e$QD.vertexDeclaration:e$D===e$uD.vertexDeclaration?e$CD.vertexDeclaration:e$D===e$XD.vertexDeclaration?e$TD.vertexDeclaration:e$D===e$aD.vertexDeclaration?e$cD.vertexDeclaration:e$D===e$$D.vertexDeclaration?null:e$D===e$ID.vertexDeclaration?e$wD.vertexDeclaration:e$D===e$qD.vertexDeclaration?e$hD.vertexDeclaration:e$D===e$sD.vertexDeclaration?e$QD.vertexDeclaration:e$D},e$m._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},e$m._addBatchRenderElement=function(e$D){this._batchRenderElements.splice(this._binarySearch(e$D),0,e$D)},e$m._updateToRenderQueue=function(e$D,e$m){this._combineRenderElementPoolIndex=0,this._getRenderElement(e$D.getRenderQueue(this._material.renderQueue)._renderElements,e$D,e$m)},e$m._getRenderElement=function(e$D,e$m,e$Y){throw new Error("StaticBatch:must override this function.")},e$m._finishInit=function(){throw new Error("StaticBatch:must override this function.")},e$m._clearRenderElements=function(){this._batchRenderElements.length=0},e$m.dispose=function(){},e$m._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),null},e$m._getIndexBuffer=function(){return null},e$m._beforeRender=function(e$D){return!0},e$m._render=function(e$D){},e$m._getVertexBuffers=function(){return null},e$G(0,e$m,"_vertexBufferCount",function(){return 1}),e$G(0,e$m,"triangleCount",function(){return 0}),e$D.combine=function(e$D){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),e$tD.combine(e$D)},e$D.maxBatchVertexCount=65535,e$D}(),e$lD=function(){function e$E(e$D,e$m){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++e$E._uniqueIDCounter,this._id>e$E.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",e$E.maxVertexDeclaration);this._shaderValues=new e$Gm,this._vertexElementsDic={},this._vertexStride=e$D,this._vertexElements=e$m;for(var e$Y=0;e$Y<e$m.length;e$Y++){var e$t=e$m[e$Y],e$y=e$t.elementUsage;this._vertexElementsDic[e$y]=e$t;var e$l=[e$E._getTypeSize(e$t.elementFormat)/4,5126,!1,this._vertexStride,e$t.offset];switch(this._shaderValues.setValue(e$y,e$l),e$y){case 1:this._addShaderDefine(e$pm.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(e$pm.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(e$pm.SHADERDEFINE_UV1)}}}e$R(e$E,"laya.d3.graphics.VertexDeclaration");var e$D=e$E.prototype;return e$D._addShaderDefine=function(e$D){this._shaderDefineValue|=e$D},e$D._removeShaderDefine=function(e$D){this._shaderDefineValue&=~e$D},e$D.getVertexElements=function(){return this._vertexElements.slice()},e$D.getVertexElementByUsage=function(e$D){return this._vertexElementsDic[e$D]},e$D.unBinding=function(){},e$G(0,e$D,"shaderDefineValue",function(){return this._shaderDefineValue}),e$G(0,e$D,"id",function(){return this._id}),e$G(0,e$D,"vertexStride",function(){return this._vertexStride}),e$G(0,e$D,"shaderValues",function(){return this._shaderValues}),e$E._getTypeSize=function(e$D){switch(e$D){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},e$E.getVertexStride=function(e$D){for(var e$m=0,e$Y=0;e$Y<e$D.Length;e$Y++){var e$t=e$D[e$Y],e$y=e$t.offset+e$E._getTypeSize(e$t.elementFormat);e$m<e$y&&(e$m=e$y)}return e$m},e$E._maxVertexDeclarationBit=1e3,e$E._uniqueIDCounter=1,e$_(e$E,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),e$E}(),e$ED=function(){function e$D(e$D,e$m,e$Y){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=e$D,this.elementFormat=e$m,this.elementUsage=e$Y}return e$R(e$D,"laya.d3.graphics.VertexElement"),e$D}(),e$BD=(function(){function e$D(){}e$R(e$D,"laya.d3.graphics.VertexElementFormat"),e$D.Single="single",e$D.Vector2="vector2",e$D.Vector3="vector3",e$D.Vector4="vector4",e$D.Color="color",e$D.Byte4="byte4",e$D.Short2="short2",e$D.Short4="short4",e$D.NormalizedShort2="normalizedshort2",e$D.NormalizedShort4="normalizedshort4",e$D.HalfVector2="halfvector2",e$D.HalfVector4="halfvector4"}(),function(){function e$D(){}e$R(e$D,"laya.d3.graphics.VertexElementUsage"),e$D.POSITION0=0,e$D.COLOR0=1,e$D.TEXTURECOORDINATE0=2,e$D.NORMAL0=3,e$D.BINORMAL0=4,e$D.TANGENT0=5,e$D.BLENDINDICES0=6,e$D.BLENDWEIGHT0=7,e$D.DEPTH0=8,e$D.FOG0=9,e$D.POINTSIZE0=10,e$D.SAMPLE0=11,e$D.TESSELLATEFACTOR0=12,e$D.COLOR1=13,e$D.NEXTTEXTURECOORDINATE0=14,e$D.TEXTURECOORDINATE1=15,e$D.NEXTTEXTURECOORDINATE1=16,e$D.CORNERTEXTURECOORDINATE0=17,e$D.VELOCITY0=18,e$D.STARTCOLOR0=19,e$D.STARTSIZE=20,e$D.AGEADDSCALE0=21,e$D.STARTROTATION=22,e$D.ENDCOLOR0=23,e$D.STARTLIFETIME=24,e$D.TIME0=33,e$D.SHAPEPOSITIONSTARTLIFETIME=30,e$D.DIRECTIONTIME=32,e$D.SIZEROTATION0=27,e$D.RADIUS0=28,e$D.RADIAN0=29,e$D.STARTSPEED=31,e$D.RANDOM0=34,e$D.RANDOM1=35,e$D.SIMULATIONWORLDPOSTION=36,e$D.SIMULATIONWORLDROTATION=37,e$D.TEXTURECOORDINATE0X=38,e$D.TEXTURECOORDINATE0X1=39,e$D.TEXTURECOORDINATE0Y=40,e$D.OFFSETVECTOR=41}(),function(){function e$D(e$D,e$m,e$Y){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=e$D,this._textureCoordinate0=e$m,this._time=e$Y}e$R(e$D,"laya.d3.graphics.VertexGlitter");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate0}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"time",function(){return this._time}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(24,[new e$ED(0,"vector3",0),new e$ED(12,"vector2",2),new e$ED(20,"single",33)])}])}(),function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=e$D,this._position=e$m,this._velocity=e$Y,this._startColor=e$t,this._endColor=e$y,this._sizeRotation=e$l,this._radius=e$E,this._radian=e$B,this._ageAddScale=e$o,this._time=e$r}e$R(e$D,"laya.d3.graphics.VertexParticle");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"endColor",function(){return this._endColor}),e$G(0,e$m,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$G(0,e$m,"sizeRotation",function(){return this._sizeRotation}),e$G(0,e$m,"velocity",function(){return this._velocity}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"startColor",function(){return this._startColor}),e$G(0,e$m,"radius",function(){return this._radius}),e$G(0,e$m,"radian",function(){return this._radian}),e$G(0,e$m,"ageAddScale",function(){return this._ageAddScale}),e$G(0,e$m,"time",function(){return this._time}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(116,[new e$ED(0,"vector4",17),new e$ED(16,"vector3",0),new e$ED(28,"vector3",18),new e$ED(40,"vector4",19),new e$ED(56,"vector4",23),new e$ED(72,"vector3",27),new e$ED(84,"vector2",28),new e$ED(92,"vector4",29),new e$ED(108,"single",24),new e$ED(112,"single",33)])}])}(),function(){function e$D(e$D){this._position=null,this._position=e$D}e$R(e$D,"laya.d3.graphics.VertexPosition");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(12,[new e$ED(0,"vector3",0)])}]),e$D}()),e$oD=function(){function e$D(e$D,e$m){this._position=null,this._normal=null,this._position=e$D,this._normal=e$m}e$R(e$D,"laya.d3.graphics.VertexPositionNormal");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(24,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3)])}]),e$D}(),e$rD=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._color=null,this._position=e$D,this._normal=e$m,this._color=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColor");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(40,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1)])}]),e$D}(),e$fD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._blendIndex=e$t,this._blendWeight=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorSkin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(72,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6)])}]),e$D}(),e$_D=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._tangent=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(88,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6),new e$ED(72,"vector4",5)])}]),e$D}(),e$iD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._tangent=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(84,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6),new e$ED(72,"vector3",5)])}]),e$D}(),e$RD=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._tangent=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(56,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector4",5)])}]),e$D}(),e$GD=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._tangent=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(52,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector3",5)])}]),e$D}(),e$ID=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(48,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2)])}]),e$D}(),e$wD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(56,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15)])}]),e$D}(),e$WD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._blendIndex=e$l,this._blendWeight=e$E}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(88,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15),new e$ED(56,"vector4",7),new e$ED(72,"vector4",6)])}]),e$D}(),e$UD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._tangent=e$l,this._blendIndex=e$E,this._blendWeight=e$B}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(104,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15),new e$ED(56,"vector4",7),new e$ED(72,"vector4",6),new e$ED(88,"vector4",5)])}]),e$D}(),e$eD=function(){function e$D(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$m.VertexPositionNormalColorTexture0SkinTangent=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._tangent=e$l,this._blendIndex=e$E,this._blendWeight=e$B},e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(100,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15),new e$ED(56,"vector4",7),new e$ED(72,"vector4",6),new e$ED(88,"vector3",5)])}]),e$D}(),e$vD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._tangent=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(72,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15),new e$ED(56,"vector4",5)])}]),e$D}(),e$cD=function(){function e$D(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$m.VertexPositionNormalColorTexture0Tangent=function(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._tangent=e$l},e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(68,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector2",15),new e$ED(56,"vector3",5)])}]),e$D}(),e$SD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(80,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector4",7),new e$ED(64,"vector4",6)])}]),e$D}(),e$zD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t,this._tangent=e$y,this._blendIndex=e$l,this._blendWeight=e$E}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(96,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector4",7),new e$ED(64,"vector4",6),new e$ED(80,"vector4",5)])}]),e$D}(),e$AD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t,this._tangent=e$y,this._blendIndex=e$l,this._blendWeight=e$E}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(92,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector4",7),new e$ED(64,"vector4",6),new e$ED(80,"vector3",5)])}]),e$D}(),e$JD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t,this._tangent=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(64,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector4",5)])}]),e$D}(),e$aD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._color=e$Y,this._textureCoordinate=e$t,this._tangent=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"color",function(){return this._color}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(60,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",1),new e$ED(40,"vector2",2),new e$ED(48,"vector3",5)])}]),e$D}(),e$pD=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._tangent=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(40,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector4",5)])}]),e$D}(),e$FD=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._tangent=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(36,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector3",5)])}]),e$D}(),e$sD=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(32,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2)])}]),e$D}(),e$QD=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(40,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15)])}]),e$D}(),e$TD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(72,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6)])}]),e$D}(),e$ND=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t,this._tangent=e$y,this._blendIndex=e$l,this._blendWeight=e$E}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(88,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6),new e$ED(72,"vector4",5)])}]),e$D}(),e$CD=function(){function e$D(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$m.VertexPositionNormalTexture0SkinTangent=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t,this._tangent=e$y,this._blendIndex=e$l,this._blendWeight=e$E},e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(84,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15),new e$ED(40,"vector4",7),new e$ED(56,"vector4",6),new e$ED(72,"vector3",5)])}]),e$D}(),e$OD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t,this._tangent=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(56,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15),new e$ED(40,"vector4",5)])}]),e$D}(),e$hD=function(){function e$D(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$m.VertexPositionNormalTexture0Tangent=function(e$D,e$m,e$Y,e$t,e$y){this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$Y,this._textureCoordinate1=e$t,this._tangent=e$y},e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(52,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15),new e$ED(40,"vector3",5)])}]),e$D}(),e$XD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y,this._blendIndex=e$t,this._blendWeight=e$y}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTextureSkin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(64,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector4",7),new e$ED(48,"vector4",6)])}]),e$D}(),e$PD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y,this._tangent=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(80,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector4",7),new e$ED(48,"vector4",6),new e$ED(64,"vector4",5)])}]),e$D}(),e$uD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y,this._tangent=e$t,this._blendIndex=e$y,this._blendWeight=e$l}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(76,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector4",7),new e$ED(48,"vector4",6),new e$ED(64,"vector3",5)])}]),e$D}(),e$LD=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y,this._tangent=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(48,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector4",5)])}]),e$D}(),e$qD=function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y,this._tangent=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionNormalTextureTangent");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(44,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector3",5)])}]),e$D}(),e$$D=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNTBTexture");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(56,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector3",5),new e$ED(36,"vector3",4),new e$ED(48,"vector2",2)])}]),e$D}(),e$dD=function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=e$D,this._normal=e$m,this._textureCoordinate0=e$t,this._textureCoordinate1=e$y,this._tangent=e$l,e$Y=e$Y,this._blendIndex=e$E,this._blendWeight=e$B}e$R(e$D,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"tangent",function(){return this._tangent}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(0,e$m,"textureCoordinate1",function(){return this._textureCoordinate1}),e$G(0,e$m,"blendIndex",function(){return this._blendIndex}),e$G(0,e$m,"blendWeight",function(){return this._blendWeight}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(96,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector3",5),new e$ED(36,"vector3",4),new e$ED(48,"vector2",2),new e$ED(56,"vector2",15),new e$ED(64,"vector4",7),new e$ED(80,"vector4",6)])}]),e$D}(),e$kD=function(){function e$D(e$D,e$m,e$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$D,this._normal=e$m,this._textureCoordinate=e$Y}e$R(e$D,"laya.d3.graphics.VertexPositionNTBTextureSkin");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"textureCoordinate",function(){return this._textureCoordinate}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(88,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector3",5),new e$ED(36,"vector3",4),new e$ED(48,"vector2",2),new e$ED(56,"vector4",7),new e$ED(72,"vector4",6)])}]),e$D}(),e$MD=(function(){function e$D(e$D,e$m,e$Y,e$t){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=e$D,this._normal=e$m,this._textureCoord0=e$Y,this._textureCoord1=e$t}e$R(e$D,"laya.d3.graphics.VertexPositionTerrain");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"normal",function(){return this._normal}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoord0",function(){return this._textureCoord0}),e$G(0,e$m,"textureCoord1",function(){return this._textureCoord1}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(40,[new e$ED(0,"vector3",0),new e$ED(12,"vector3",3),new e$ED(24,"vector2",2),new e$ED(32,"vector2",15)])}])}(),function(){function e$D(e$D,e$m){this._position=null,this._textureCoordinate0=null,this._position=e$D,this._textureCoordinate0=e$m}e$R(e$D,"laya.d3.graphics.VertexPositionTexture0");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"position",function(){return this._position}),e$G(0,e$m,"textureCoordinate0",function(){return this._textureCoordinate0}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(20,[new e$ED(0,"vector3",0),new e$ED(12,"vector2",2)])}]),e$D}()),e$nD=(function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e$D,this._positionStartLifeTime=e$m,this._velocity=e$Y,this._startColor=e$t,this._startSize=e$y,this._startRotation0=e$l,this._startRotation1=e$E,this._startRotation2=e$B,this._startLifeTime=e$o,this._time=e$r,this._startSpeed=e$f,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=e$R}e$R(e$D,"laya.d3.graphics.VertexShurikenParticleBillboard");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$G(0,e$m,"random1",function(){return this._randoms1}),e$G(0,e$m,"startRotation2",function(){return this._startRotation2}),e$G(0,e$m,"positionStartLifeTime",function(){return this._positionStartLifeTime}),e$G(0,e$m,"velocity",function(){return this._velocity}),e$G(0,e$m,"random0",function(){return this._randoms0}),e$G(0,e$m,"startSize",function(){return this._startSize}),e$G(0,e$m,"startColor",function(){return this._startColor}),e$G(0,e$m,"startRotation0",function(){return this._startRotation0}),e$G(0,e$m,"startRotation1",function(){return this._startRotation1}),e$G(0,e$m,"startLifeTime",function(){return this._startLifeTime}),e$G(0,e$m,"time",function(){return this._time}),e$G(0,e$m,"startSpeed",function(){return this._startSpeed}),e$G(0,e$m,"simulationWorldPostion",function(){return this._simulationWorldPostion}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(152,[new e$ED(0,"vector4",17),new e$ED(16,"vector4",30),new e$ED(32,"vector4",32),new e$ED(48,"vector4",19),new e$ED(64,"vector3",20),new e$ED(76,"vector3",22),new e$ED(88,"single",31),new e$ED(92,"vector4",34),new e$ED(108,"vector4",35),new e$ED(124,"vector3",36),new e$ED(136,"vector4",37)])}])}(),function(){function e$D(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e$D,this._positionStartLifeTime=e$m,this._velocity=e$Y,this._startColor=e$t,this._startSize=e$y,this._startRotation0=e$l,this._startRotation1=e$E,this._startRotation2=e$B,this._startLifeTime=e$o,this._time=e$r,this._startSpeed=e$f,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=e$R}e$R(e$D,"laya.d3.graphics.VertexShurikenParticleMesh");var e$m=e$D.prototype;e$c.imps(e$m,{"laya.d3.graphics.IVertex":!0}),e$G(0,e$m,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$G(0,e$m,"velocity",function(){return this._velocity}),e$G(0,e$m,"position",function(){return this._positionStartLifeTime}),e$G(0,e$m,"random0",function(){return this._randoms0}),e$G(0,e$m,"startSize",function(){return this._startSize}),e$G(0,e$m,"startColor",function(){return this._startColor}),e$G(0,e$m,"startRotation0",function(){return this._startRotation0}),e$G(0,e$m,"startRotation1",function(){return this._startRotation1}),e$G(0,e$m,"random1",function(){return this._randoms1}),e$G(0,e$m,"startRotation2",function(){return this._startRotation2}),e$G(0,e$m,"startLifeTime",function(){return this._startLifeTime}),e$G(0,e$m,"time",function(){return this._time}),e$G(0,e$m,"startSpeed",function(){return this._startSpeed}),e$G(0,e$m,"simulationWorldPostion",function(){return this._simulationWorldPostion}),e$G(0,e$m,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$G(1,e$D,"vertexDeclaration",function(){return e$D._vertexDeclaration}),e$_(e$D,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$lD(172,[new e$ED(0,"vector3",0),new e$ED(12,"vector4",1),new e$ED(28,"vector2",2),new e$ED(36,"vector4",30),new e$ED(52,"vector4",32),new e$ED(68,"vector4",19),new e$ED(84,"vector3",20),new e$ED(96,"vector3",22),new e$ED(108,"single",31),new e$ED(112,"vector4",34),new e$ED(128,"vector4",35),new e$ED(144,"vector3",36),new e$ED(156,"vector4",37)])}])}(),function(){function e$e(e$D,e$m,e$Y,e$t,e$y,e$l){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=e$Y,this._materials=e$t,this._subMeshes=e$y,this._materialMap=e$l,this._version=e$m,this._onLoaded(e$D)}e$R(e$e,"laya.d3.loaders.LoadModelV01");var e$D=e$e.prototype;return e$D._onLoaded=function(e$D){this._readData=e$D,this.READ_BLOCK();for(var e$m=0;e$m<this._BLOCK.count;e$m++){var e$Y=this._readData.getUint16(),e$t=this._strings[e$Y],e$y=this["READ_"+e$t];if(null==e$y)throw new Error("model file err,no this function:"+e$Y+" "+e$t);if(!e$y.call(this))break}return this._mesh},e$D.onError=function(){},e$D._readString=function(){return this._strings[this._readData.getUint16()]},e$D.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},e$D.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},e$D.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var e$D=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var e$m=0;e$m<this._STRINGS.size;e$m++)this._strings[e$m]=this._readData.readUTFString();return this._readData.pos=e$D,!0},e$D.READ_MATERIAL=function(){var e$D=this._readData.getUint16(),e$m=(this._readString(),this._readString());return this._materials[e$D]="null"!==e$m?e$W.getRes(this._materialMap[e$m]):new e$Tm,!0},e$D.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var e$D,e$m=this._readData.__getBuffer(),e$Y=0,e$t=this._readData.getUint32(),e$y=this._readData.getUint32(),e$l=(new Float32Array(e$m.slice(e$t+this._DATA.offset,e$t+this._DATA.offset+e$y)),this._readData.getUint32()),e$E=this._readData.getUint32(),e$B=new Float32Array(e$m.slice(e$l+this._DATA.offset,e$l+this._DATA.offset+e$E));for(this.mesh._inverseBindPoses=[],e$Y=0,e$D=e$B.length;e$Y<e$D;e$Y+=16){var e$o=new e$mm(e$B[e$Y+0],e$B[e$Y+1],e$B[e$Y+2],e$B[e$Y+3],e$B[e$Y+4],e$B[e$Y+5],e$B[e$Y+6],e$B[e$Y+7],e$B[e$Y+8],e$B[e$Y+9],e$B[e$Y+10],e$B[e$Y+11],e$B[e$Y+12],e$B[e$Y+13],e$B[e$Y+14],e$B[e$Y+15]);this.mesh._inverseBindPoses.push(e$o)}break;default:throw new Error("LoadModel:unknown version.")}return!0},e$D.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var e$D=this._readString();this._shaderAttributes=e$D.match(e$e._attrReg);var e$m=this._readData.getUint32(),e$Y=this._readData.getUint32(),e$t=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),e$y=this._readData.getUint32(),e$l=this._readData.getUint32(),e$E=this._readData.getUint32(),e$B=this._readData.__getBuffer(),e$o=new e$_m(this._mesh),e$r=this._getVertexDeclaration(),e$f=e$km.create(e$r,e$y/e$r.vertexStride,35044,!0),e$_=e$t+this._DATA.offset,e$i=e$B.slice(e$_,e$_+e$y);e$f.setData(new Float32Array(e$i));for(var e$R=(e$o._vertexBuffer=e$f).vertexDeclaration.getVertexElements(),e$G=0;e$G<e$R.length;e$G++)e$o._bufferUsage[e$R[e$G].elementUsage]=e$f;var e$I=e$dm.create("ushort",e$Y/2,35044,!0),e$w=e$m+this._DATA.offset,e$W=e$B.slice(e$w,e$w+e$Y);e$I.setData(new Uint16Array(e$W)),e$o._indexBuffer=e$I;var e$U=e$B.slice(e$l+this._DATA.offset,e$l+this._DATA.offset+e$E);return e$o._boneIndicesList[0]=new Uint8Array(e$U),this._subMeshes.push(e$o),!0},e$D.READ_DATAAREA=function(){return!1},e$D._getVertexDeclaration=function(){for(var e$D,e$m=!1,e$Y=!1,e$t=!1,e$y=!1,e$l=!1,e$E=!1,e$B=!1,e$o=!1,e$r=!1,e$f=0;e$f<this._shaderAttributes.length;e$f+=8)switch(this._shaderAttributes[e$f]){case"POSITION":e$m=!0;break;case"NORMAL":e$Y=!0;break;case"COLOR":e$t=!0;break;case"UV":e$y=!0;break;case"UV1":e$l=!0;break;case"BLENDWEIGHT":e$B=!0;break;case"BLENDINDICES":e$o=!0;break;case"TANGENT":e$E=!0;break;case"BINORMAL":e$r=!0}return e$m&&e$Y&&e$t&&e$y&&e$l&&e$B&&e$o&&e$E?e$D=e$eD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$l&&e$B&&e$o?e$D=e$WD.vertexDeclaration:e$m&&e$Y&&e$y&&e$l&&e$B&&e$o&&e$E?e$D=e$CD.vertexDeclaration:e$m&&e$Y&&e$y&&e$l&&e$B&&e$o?e$D=e$TD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$B&&e$o&&e$E?e$D=e$AD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$B&&e$o?e$D=e$SD.vertexDeclaration:e$m&&e$Y&&e$E&&e$r&&e$y&&e$B&&e$o?e$D=e$kD.vertexDeclaration:e$m&&e$Y&&e$y&&e$B&&e$o&&e$E?e$D=e$uD.vertexDeclaration:e$m&&e$Y&&e$y&&e$B&&e$o?e$D=e$XD.vertexDeclaration:e$m&&e$Y&&e$t&&e$B&&e$o&&e$E?e$D=e$iD.vertexDeclaration:e$m&&e$Y&&e$t&&e$B&&e$o?e$D=e$fD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$l&&e$E?e$D=e$cD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$l?e$D=e$wD.vertexDeclaration:e$m&&e$Y&&e$y&&e$l&&e$E?e$D=e$hD.vertexDeclaration:e$m&&e$Y&&e$y&&e$l?e$D=e$QD.vertexDeclaration:e$m&&e$Y&&e$t&&e$y&&e$E?e$D=e$aD.vertexDeclaration:e$m&&e$Y&&e$y&&e$E&&e$r?e$D=e$$D.vertexDeclaration:e$m&&e$Y&&e$t&&e$y?e$D=e$ID.vertexDeclaration:e$m&&e$Y&&e$y&&e$E?e$D=e$qD.vertexDeclaration:e$m&&e$Y&&e$y?e$D=e$sD.vertexDeclaration:e$m&&e$Y&&e$t&&e$E?e$D=e$GD.vertexDeclaration:e$m&&e$Y&&e$t&&(e$D=e$rD.vertexDeclaration),e$D},e$G(0,e$D,"mesh",function(){return this._mesh}),e$e._attrReg=new RegExp("(\\w+)|([:,;])","g"),e$e}()),e$gD=function(){function e$z(){}return e$R(e$z,"laya.d3.loaders.LoadModelV02"),e$z.parse=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$z._mesh=e$Y,e$z._materials=e$t,e$z._subMeshes=e$y,e$z._materialMap=e$l,e$z._version=e$m,e$z._readData=e$D,e$z.READ_DATA(),e$z.READ_BLOCK(),e$z.READ_STRINGS();for(var e$E=0,e$B=e$z._BLOCK.count;e$E<e$B;e$E++){e$z._readData.pos=e$z._BLOCK.blockStarts[e$E];var e$o=e$z._readData.getUint16(),e$r=e$z._strings[e$o],e$f=e$z["READ_"+e$r];if(null==e$f)throw new Error("model file err,no this function:"+e$o+" "+e$r);e$f.call()}e$z._strings.length=0,e$z._readData=null,e$z._version=null,e$z._mesh=null,e$z._materials=null,e$z._subMeshes=null,e$z._materialMap=null},e$z._readString=function(){return e$z._strings[e$z._readData.getUint16()]},e$z.READ_DATA=function(){e$z._DATA.offset=e$z._readData.getUint32(),e$z._DATA.size=e$z._readData.getUint32()},e$z.READ_BLOCK=function(){for(var e$D=e$z._BLOCK.count=e$z._readData.getUint16(),e$m=e$z._BLOCK.blockStarts=[],e$Y=e$z._BLOCK.blockLengths=[],e$t=0;e$t<e$D;e$t++)e$m.push(e$z._readData.getUint32()),e$Y.push(e$z._readData.getUint32())},e$z.READ_STRINGS=function(){var e$D=e$z._readData.getUint32(),e$m=e$z._readData.getUint16(),e$Y=e$z._readData.pos;e$z._readData.pos=e$D+e$z._DATA.offset;for(var e$t=0;e$t<e$m;e$t++)e$z._strings[e$t]=e$z._readData.readUTFString();e$z._readData.pos=e$Y},e$z.READ_MATERIAL=function(){e$z._readString(),e$z._readString();var e$D=e$z._readString();return""!==e$D&&e$z._materials.push(e$W.getRes(e$z._materialMap[e$D])),!0},e$z.READ_MESH=function(){e$z._readString();var e$D,e$m=e$z._readData.__getBuffer(),e$Y=0,e$t=e$z._readData.getInt16(),e$y=e$z._DATA.offset;for(e$Y=0;e$Y<e$t;e$Y++){var e$l=e$y+e$z._readData.getUint32(),e$E=e$z._readData.getUint32(),e$B=new Float32Array(e$m.slice(e$l,e$l+e$E)),e$o=e$z._readString().match(e$z._attrReg),e$r=e$z._getVertexDeclaration(e$o),e$f=e$km.create(e$r,4*e$B.length/e$r.vertexStride,35044,!0);e$f.setData(e$B),e$z._mesh._vertexBuffers.push(e$f)}var e$_=e$y+e$z._readData.getUint32(),e$i=e$z._readData.getUint32(),e$R=new Uint16Array(e$m.slice(e$_,e$_+e$i)),e$G=e$dm.create("ushort",e$i/2,35044,!0);e$G.setData(e$R),e$z._mesh._indexBuffer=e$G;var e$I=e$z._mesh._boneNames=[],e$w=e$z._readData.getUint16();for(e$I.length=e$w,e$Y=0;e$Y<e$w;e$Y++)e$I[e$Y]=e$z._strings[e$z._readData.getUint16()];var e$W=e$z._readData.getUint32(),e$U=e$z._readData.getUint32(),e$e=(new Float32Array(e$m.slice(e$y+e$W,e$y+e$W+e$U)),e$z._readData.getUint32()),e$v=e$z._readData.getUint32(),e$c=new Float32Array(e$m.slice(e$y+e$e,e$y+e$e+e$v));for(e$z._mesh._inverseBindPoses=[],e$Y=0,e$D=e$c.length;e$Y<e$D;e$Y+=16){var e$S=new e$mm(e$c[e$Y+0],e$c[e$Y+1],e$c[e$Y+2],e$c[e$Y+3],e$c[e$Y+4],e$c[e$Y+5],e$c[e$Y+6],e$c[e$Y+7],e$c[e$Y+8],e$c[e$Y+9],e$c[e$Y+10],e$c[e$Y+11],e$c[e$Y+12],e$c[e$Y+13],e$c[e$Y+14],e$c[e$Y+15]);e$z._mesh._inverseBindPoses.push(e$S)}return e$z._mesh._skinnedDatas=new Float32Array(16*e$c.length),!0},e$z.READ_SUBMESH=function(){var e$D=e$z._readData.__getBuffer(),e$m=new e$_m(e$z._mesh),e$Y=e$z._readData.getInt16(),e$t=e$z._readData.getUint32(),e$y=e$z._readData.getUint32();e$m._vertexBuffer=e$z._mesh._vertexBuffers[e$Y],e$m._vertexStart=e$t,e$m._vertexCount=e$y;var e$l=e$z._readData.getUint32(),e$E=e$z._readData.getUint32(),e$B=e$z._mesh._indexBuffer;e$m._indexBuffer=e$B,e$m._indexStart=e$l,e$m._indexCount=e$E,e$m._indices=new Uint16Array(e$B.getData().buffer,2*e$l,e$E);var e$o=e$z._DATA.offset,e$r=e$m._subIndexBufferStart,e$f=e$m._subIndexBufferCount,e$_=e$m._boneIndicesList,e$i=e$z._readData.getUint16();e$r.length=e$i,e$f.length=e$i,e$_.length=e$i;for(var e$R=0;e$R<e$i;e$R++){e$r[e$R]=e$z._readData.getUint32(),e$f[e$R]=e$z._readData.getUint32();var e$G=e$z._readData.getUint32(),e$I=e$z._readData.getUint32();e$m._boneIndicesList[e$R]=new Uint8Array(e$D.slice(e$o+e$G,e$o+e$G+e$I))}return e$z._subMeshes.push(e$m),!0},e$z._getVertexDeclaration=function(e$D){for(var e$m,e$Y=!1,e$t=!1,e$y=!1,e$l=!1,e$E=!1,e$B=!1,e$o=!1,e$r=!1,e$f=!1,e$_=0;e$_<e$D.length;e$_++)switch(e$D[e$_]){case"POSITION":e$Y=!0;break;case"NORMAL":e$t=!0;break;case"COLOR":e$y=!0;break;case"UV":e$l=!0;break;case"UV1":e$E=!0;break;case"BLENDWEIGHT":e$o=!0;break;case"BLENDINDICES":e$r=!0;break;case"TANGENT":e$B=!0;break;case"BINORMAL":e$f=!0}return e$Y&&e$t&&e$y&&e$l&&e$E&&e$o&&e$r&&e$B?e$m=e$eD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$E&&e$o&&e$r?e$m=e$WD.vertexDeclaration:e$Y&&e$t&&e$l&&e$E&&e$o&&e$r&&e$B?e$m=e$CD.vertexDeclaration:e$Y&&e$t&&e$l&&e$E&&e$o&&e$r?e$m=e$TD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$o&&e$r&&e$B?e$m=e$AD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$o&&e$r?e$m=e$SD.vertexDeclaration:e$Y&&e$t&&e$l&&e$o&&e$r&&e$B?e$m=e$uD.vertexDeclaration:e$Y&&e$t&&e$l&&e$o&&e$r?e$m=e$XD.vertexDeclaration:e$Y&&e$t&&e$y&&e$o&&e$r&&e$B?e$m=e$iD.vertexDeclaration:e$Y&&e$t&&e$y&&e$o&&e$r?e$m=e$fD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$E&&e$B?e$m=e$cD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$E?e$m=e$wD.vertexDeclaration:e$Y&&e$t&&e$l&&e$E&&e$B?e$m=e$hD.vertexDeclaration:e$Y&&e$t&&e$l&&e$E?e$m=e$QD.vertexDeclaration:e$Y&&e$t&&e$y&&e$l&&e$B?e$m=e$aD.vertexDeclaration:e$Y&&e$t&&e$l&&e$B&&e$f?e$m=e$$D.vertexDeclaration:e$Y&&e$t&&e$y&&e$l?e$m=e$ID.vertexDeclaration:e$Y&&e$t&&e$l&&e$B?e$m=e$qD.vertexDeclaration:e$Y&&e$t&&e$l?e$m=e$sD.vertexDeclaration:e$Y&&e$t&&e$y&&e$B?e$m=e$GD.vertexDeclaration:e$Y&&e$t&&e$y&&(e$m=e$rD.vertexDeclaration),e$m},e$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),e$z._strings=[],e$z._readData=null,e$z._version=null,e$z._mesh=null,e$z._materials=null,e$z._subMeshes=null,e$z._materialMap=null,e$_(e$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$z}(),e$HD=function(){function e$S(){}return e$R(e$S,"laya.d3.loaders.LoadModelV03"),e$S.parse=function(e$D,e$m,e$Y,e$t,e$y){e$S._mesh=e$Y,e$S._subMeshes=e$t,e$S._materialMap=e$y,e$S._version=e$m,e$S._readData=e$D,e$S.READ_DATA(),e$S.READ_BLOCK(),e$S.READ_STRINGS();for(var e$l=0,e$E=e$S._BLOCK.count;e$l<e$E;e$l++){e$S._readData.pos=e$S._BLOCK.blockStarts[e$l];var e$B=e$S._readData.getUint16(),e$o=e$S._strings[e$B],e$r=e$S["READ_"+e$o];if(null==e$r)throw new Error("model file err,no this function:"+e$B+" "+e$o);e$r.call()}e$S._strings.length=0,e$S._readData=null,e$S._version=null,e$S._mesh=null,e$S._subMeshes=null,e$S._materialMap=null},e$S._readString=function(){return e$S._strings[e$S._readData.getUint16()]},e$S.READ_DATA=function(){e$S._DATA.offset=e$S._readData.getUint32(),e$S._DATA.size=e$S._readData.getUint32()},e$S.READ_BLOCK=function(){for(var e$D=e$S._BLOCK.count=e$S._readData.getUint16(),e$m=e$S._BLOCK.blockStarts=[],e$Y=e$S._BLOCK.blockLengths=[],e$t=0;e$t<e$D;e$t++)e$m.push(e$S._readData.getUint32()),e$Y.push(e$S._readData.getUint32())},e$S.READ_STRINGS=function(){var e$D=e$S._readData.getUint32(),e$m=e$S._readData.getUint16(),e$Y=e$S._readData.pos;e$S._readData.pos=e$D+e$S._DATA.offset;for(var e$t=0;e$t<e$m;e$t++)e$S._strings[e$t]=e$S._readData.readUTFString();e$S._readData.pos=e$Y},e$S.READ_MESH=function(){var e$D,e$m=e$S._readString(),e$Y=e$S._readData.__getBuffer(),e$t=0,e$y=e$S._readData.getInt16(),e$l=e$S._DATA.offset;for(e$t=0;e$t<e$y;e$t++){var e$E,e$B=e$l+e$S._readData.getUint32(),e$o=e$S._readData.getUint32(),e$r=new Float32Array(e$Y.slice(e$B,e$B+e$o)),e$f=e$S._readString();switch(e$S._version){case"LAYAMODEL:03":e$E=e$S._vertexDeclarationMap_Discard[e$f];break;case"LAYAMODEL:0301":e$E=e$S._vertexDeclarationMap[e$f];break;default:throw new Error("LoadModelV03: unknown version.")}if(!e$E)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+e$S._version+"  bufferAttribute="+e$f+"  name="+e$m+"  url="+(e$S._mesh?e$S._mesh.url:"null"));var e$_=e$km.create(e$E,4*e$r.length/e$E.vertexStride,35044,!0,e$S._mesh._url+"_"+e$t);e$_.setData(e$r),e$S._mesh._vertexBuffers.push(e$_)}var e$i=e$l+e$S._readData.getUint32(),e$R=e$S._readData.getUint32(),e$G=new Uint16Array(e$Y.slice(e$i,e$i+e$R)),e$I=e$dm.create("ushort",e$R/2,35044,!0,e$S._mesh._url);e$I.setData(e$G),e$S._mesh._indexBuffer=e$I;var e$w=e$S._mesh._boneNames=[],e$W=e$S._readData.getUint16();for(e$w.length=e$W,e$t=0;e$t<e$W;e$t++)e$w[e$t]=e$S._strings[e$S._readData.getUint16()];e$S._readData.pos+=8;var e$U=e$S._readData.getUint32(),e$e=e$S._readData.getUint32(),e$v=new Float32Array(e$Y.slice(e$l+e$U,e$l+e$U+e$e));for(e$S._mesh._inverseBindPoses=[],e$t=0,e$D=e$v.length;e$t<e$D;e$t+=16){var e$c=new e$mm(e$v[e$t+0],e$v[e$t+1],e$v[e$t+2],e$v[e$t+3],e$v[e$t+4],e$v[e$t+5],e$v[e$t+6],e$v[e$t+7],e$v[e$t+8],e$v[e$t+9],e$v[e$t+10],e$v[e$t+11],e$v[e$t+12],e$v[e$t+13],e$v[e$t+14],e$v[e$t+15]);e$S._mesh._inverseBindPoses.push(e$c)}return e$S._mesh._skinnedDatas=new Float32Array(16*e$v.length),!0},e$S.READ_SUBMESH=function(){var e$D=e$S._readData.__getBuffer(),e$m=new e$_m(e$S._mesh),e$Y=e$S._readData.getInt16(),e$t=e$S._readData.getUint32(),e$y=e$S._readData.getUint32();e$m._vertexBuffer=e$S._mesh._vertexBuffers[e$Y],e$m._vertexStart=e$t,e$m._vertexCount=e$y;var e$l=e$S._readData.getUint32(),e$E=e$S._readData.getUint32(),e$B=e$S._mesh._indexBuffer;e$m._indexBuffer=e$B,e$m._indexStart=e$l,e$m._indexCount=e$E,e$m._indices=new Uint16Array(e$B.getData().buffer,2*e$l,e$E);var e$o=e$S._DATA.offset,e$r=e$m._subIndexBufferStart,e$f=e$m._subIndexBufferCount,e$_=e$m._boneIndicesList,e$i=e$S._readData.getUint16();e$r.length=e$i,e$f.length=e$i,e$_.length=e$i;for(var e$R=0;e$R<e$i;e$R++){e$r[e$R]=e$S._readData.getUint32(),e$f[e$R]=e$S._readData.getUint32();var e$G=e$S._readData.getUint32(),e$I=e$S._readData.getUint32();e$_[e$R]=new Uint8Array(e$D.slice(e$o+e$G,e$o+e$G+e$I))}return e$S._subMeshes.push(e$m),!0},e$S._strings=[],e$S._readData=null,e$S._version=null,e$S._mesh=null,e$S._subMeshes=null,e$S._materialMap=null,e$_(e$S,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$eD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$WD.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":e$dD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$CD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$TD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$AD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":e$SD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$uD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":e$XD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":e$iD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":e$fD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":e$cD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":e$wD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":e$hD.vertexDeclaration,"POSITION,NORMAL,UV,UV1":e$QD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":e$aD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":e$$D.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":e$ID.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":e$qD.vertexDeclaration,"POSITION,NORMAL,UV":e$sD.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":e$GD.vertexDeclaration,"POSITION,NORMAL,COLOR":e$rD.vertexDeclaration,"POSITION,NORMAL,TANGENT":e$FD.vertexDeclaration,"POSITION,NORMAL":e$oD.vertexDeclaration,"POSITION,UV":e$MD.vertexDeclaration,POSITION:e$BD.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$UD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$WD.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":e$dD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$ND.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$TD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$zD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":e$SD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$PD.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":e$XD.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":e$_D.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":e$fD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":e$vD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":e$wD.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":e$OD.vertexDeclaration,"POSITION,NORMAL,UV,UV1":e$QD.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":e$JD.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":e$$D.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":e$ID.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":e$LD.vertexDeclaration,"POSITION,NORMAL,UV":e$sD.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":e$RD.vertexDeclaration,"POSITION,NORMAL,COLOR":e$rD.vertexDeclaration,"POSITION,NORMAL,TANGENT":e$pD.vertexDeclaration,"POSITION,NORMAL":e$oD.vertexDeclaration,"POSITION,UV":e$MD.vertexDeclaration,POSITION:e$BD.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$S}(),e$xD=function(){function e$B(){}return e$R(e$B,"laya.d3.loaders.MeshReader"),e$B.read=function(e$D,e$m,e$Y,e$t,e$y){var e$l=new e$S(e$D);e$l.pos=0;var e$E=e$l.readUTFString();switch(e$E){case"LAYAMODEL:01":case"LAYASKINANI:01":e$B._readVersion01(e$l,e$E,e$m,e$Y,e$t,e$y);break;case"LAYAMODEL:02":e$gD.parse(e$l,e$E,e$m,e$Y,e$t,e$y);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":e$HD.parse(e$l,e$E,e$m,e$t,e$y);break;default:throw new Error("MeshReader: unknown mesh version. version:"+e$E+", mesh:"+(e$m?e$m.url:""))}e$m._setSubMeshes(e$t)},e$B._readVersion01=function(e$D,e$m,e$Y,e$t,e$y,e$l){new e$nD(e$D,e$m,e$Y,e$t,e$y,e$l)},e$B}(),e$VD=function(){function e$D(e$D,e$m){this.min=null,this.max=null,this.min=e$D,this.max=e$m}e$R(e$D,"laya.d3.math.BoundBox");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.getCorners=function(e$D){e$D.length=8;var e$m=this.min.elements,e$Y=this.max.elements,e$t=e$m[0],e$y=e$m[1],e$l=e$m[2],e$E=e$Y[0],e$B=e$Y[1],e$o=e$Y[2];e$D[0]=new e$om(e$t,e$B,e$o),e$D[1]=new e$om(e$E,e$B,e$o),e$D[2]=new e$om(e$E,e$y,e$o),e$D[3]=new e$om(e$t,e$y,e$o),e$D[4]=new e$om(e$t,e$B,e$l),e$D[5]=new e$om(e$E,e$B,e$l),e$D[6]=new e$om(e$E,e$y,e$l),e$D[7]=new e$om(e$t,e$y,e$l)},e$m.toDefault=function(){this.min.toDefault(),this.max.toDefault()},e$m.cloneTo=function(e$D){var e$m=e$D;this.min.cloneTo(e$m.min),this.max.cloneTo(e$m.max)},e$m.clone=function(){var e$D=new this.constructor(new e$om,new e$om);return this.cloneTo(e$D),e$D},e$D.createfromPoints=function(e$D,e$m){if(null==e$D)throw new Error("points");var e$Y=e$m.min,e$t=e$m.max,e$y=e$Y.elements;e$y[0]=Number.MAX_VALUE,e$y[1]=Number.MAX_VALUE,e$y[2]=Number.MAX_VALUE;var e$l=e$t.elements;e$l[0]=-Number.MAX_VALUE,e$l[1]=-Number.MAX_VALUE,e$l[2]=-Number.MAX_VALUE;for(var e$E=0,e$B=e$D.length;e$E<e$B;++e$E)e$om.min(e$Y,e$D[e$E],e$Y),e$om.max(e$t,e$D[e$E],e$t)},e$D.merge=function(e$D,e$m,e$Y){e$om.min(e$D.min,e$m.min,e$Y.min),e$om.max(e$D.max,e$m.max,e$Y.max)},e$D}(),e$ZD=function(){function e$r(e$D){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=e$D,this._near=new e$tm(new e$om),this._far=new e$tm(new e$om),this._left=new e$tm(new e$om),this._right=new e$tm(new e$om),this._top=new e$tm(new e$om),this._bottom=new e$tm(new e$om),e$r._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}e$R(e$r,"laya.d3.math.BoundFrustum");var e$D=e$r.prototype;return e$D.equalsBoundFrustum=function(e$D){return this._matrix.equalsOtherMatrix(e$D.matrix)},e$D.equalsObj=function(e$D){if(e$D instanceof laya.d3.math.BoundFrustum){var e$m=e$D;return this.equalsBoundFrustum(e$m)}return!1},e$D.getPlane=function(e$D){switch(e$D){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},e$D.getCorners=function(e$D){e$r._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(e$D[0]),e$r._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(e$D[1]),e$r._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(e$D[2]),e$r._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(e$D[3]),e$r._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(e$D[4]),e$r._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(e$D[5]),e$r._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(e$D[6]),e$r._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(e$D[7])},e$D.containsPoint=function(e$D){for(var e$m=e$tm.PlaneIntersectionType_Front,e$Y=e$tm.PlaneIntersectionType_Front,e$t=0;e$t<6;e$t++){switch(e$t){case 0:e$Y=e$jD.intersectsPlaneAndPoint(this._near,e$D);break;case 1:e$Y=e$jD.intersectsPlaneAndPoint(this._far,e$D);break;case 2:e$Y=e$jD.intersectsPlaneAndPoint(this._left,e$D);break;case 3:e$Y=e$jD.intersectsPlaneAndPoint(this._right,e$D);break;case 4:e$Y=e$jD.intersectsPlaneAndPoint(this._top,e$D);break;case 5:e$Y=e$jD.intersectsPlaneAndPoint(this._bottom,e$D)}switch(e$Y){case e$tm.PlaneIntersectionType_Back:return 0;case e$tm.PlaneIntersectionType_Intersecting:e$m=e$tm.PlaneIntersectionType_Intersecting}}switch(e$m){case e$tm.PlaneIntersectionType_Intersecting:return 2;default:return 1}},e$D.containsBoundBox=function(e$D){for(var e$m,e$Y=e$r._tempV30,e$t=e$r._tempV31,e$y=1,e$l=0;e$l<6;e$l++){if(e$m=this.getPlane(e$l),this._getBoxToPlanePVertexNVertex(e$D,e$m.normal,e$Y,e$t),e$jD.intersectsPlaneAndPoint(e$m,e$Y)===e$tm.PlaneIntersectionType_Back)return 0;e$jD.intersectsPlaneAndPoint(e$m,e$t)===e$tm.PlaneIntersectionType_Back&&(e$y=2)}return e$y},e$D.containsBoundSphere=function(e$D){for(var e$m=e$tm.PlaneIntersectionType_Front,e$Y=e$tm.PlaneIntersectionType_Front,e$t=0;e$t<6;e$t++){switch(e$t){case 0:e$Y=e$jD.intersectsPlaneAndSphere(this._near,e$D);break;case 1:e$Y=e$jD.intersectsPlaneAndSphere(this._far,e$D);break;case 2:e$Y=e$jD.intersectsPlaneAndSphere(this._left,e$D);break;case 3:e$Y=e$jD.intersectsPlaneAndSphere(this._right,e$D);break;case 4:e$Y=e$jD.intersectsPlaneAndSphere(this._top,e$D);break;case 5:e$Y=e$jD.intersectsPlaneAndSphere(this._bottom,e$D)}switch(e$Y){case e$tm.PlaneIntersectionType_Back:return 0;case e$tm.PlaneIntersectionType_Intersecting:e$m=e$tm.PlaneIntersectionType_Intersecting}}switch(e$m){case e$tm.PlaneIntersectionType_Intersecting:return 2;default:return 1}},e$D._getBoxToPlanePVertexNVertex=function(e$D,e$m,e$Y,e$t){var e$y=e$D.min,e$l=e$y.elements,e$E=e$D.max,e$B=e$E.elements,e$o=e$m.elements,e$r=e$o[0],e$f=e$o[1],e$_=e$o[2];e$y.cloneTo(e$Y);var e$i=e$Y.elements;0<=e$r&&(e$i[0]=e$B[0]),0<=e$f&&(e$i[1]=e$B[1]),0<=e$_&&(e$i[2]=e$B[2]),e$E.cloneTo(e$t);var e$R=e$t.elements;0<=e$r&&(e$R[0]=e$l[0]),0<=e$f&&(e$R[1]=e$l[1]),0<=e$_&&(e$R[2]=e$l[2])},e$G(0,e$D,"top",function(){return this._top}),e$G(0,e$D,"matrix",function(){return this._matrix},function(e$D){this._matrix=e$D,e$r._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),e$G(0,e$D,"near",function(){return this._near}),e$G(0,e$D,"far",function(){return this._far}),e$G(0,e$D,"left",function(){return this._left}),e$G(0,e$D,"right",function(){return this._right}),e$G(0,e$D,"bottom",function(){return this._bottom}),e$r._getPlanesFromMatrix=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B=e$D.elements,e$o=e$B[0],e$r=e$B[1],e$f=e$B[2],e$_=e$B[3],e$i=e$B[4],e$R=e$B[5],e$G=e$B[6],e$I=e$B[7],e$w=e$B[8],e$W=e$B[9],e$U=e$B[10],e$e=e$B[11],e$v=e$B[12],e$c=e$B[13],e$S=e$B[14],e$z=e$B[15],e$A=e$m.normal.elements;e$A[0]=e$_+e$f,e$A[1]=e$I+e$G,e$A[2]=e$e+e$U,e$m.distance=e$z+e$S,e$m.normalize();var e$J=e$Y.normal.elements;e$J[0]=e$_-e$f,e$J[1]=e$I-e$G,e$J[2]=e$e-e$U,e$Y.distance=e$z-e$S,e$Y.normalize();var e$a=e$t.normal.elements;e$a[0]=e$_+e$o,e$a[1]=e$I+e$i,e$a[2]=e$e+e$w,e$t.distance=e$z+e$v,e$t.normalize();var e$p=e$y.normal.elements;e$p[0]=e$_-e$o,e$p[1]=e$I-e$i,e$p[2]=e$e-e$w,e$y.distance=e$z-e$v,e$y.normalize();var e$F=e$l.normal.elements;e$F[0]=e$_-e$r,e$F[1]=e$I-e$R,e$F[2]=e$e-e$W,e$l.distance=e$z-e$c,e$l.normalize();var e$s=e$E.normal.elements;e$s[0]=e$_+e$r,e$s[1]=e$I+e$R,e$s[2]=e$e+e$W,e$E.distance=e$z+e$c,e$E.normalize()},e$r._get3PlaneInterPoint=function(e$D,e$m,e$Y){var e$t=e$D.normal,e$y=e$m.normal,e$l=e$Y.normal;e$om.cross(e$y,e$l,e$r._tempV30),e$om.cross(e$l,e$t,e$r._tempV31),e$om.cross(e$t,e$y,e$r._tempV32);var e$E=e$om.dot(e$t,e$r._tempV30),e$B=e$om.dot(e$y,e$r._tempV31),e$o=e$om.dot(e$l,e$r._tempV32);return e$om.scale(e$r._tempV30,-e$D.distance/e$E,e$r._tempV33),e$om.scale(e$r._tempV31,-e$m.distance/e$B,e$r._tempV34),e$om.scale(e$r._tempV32,-e$Y.distance/e$o,e$r._tempV35),e$om.add(e$r._tempV33,e$r._tempV34,e$r._tempV36),e$om.add(e$r._tempV35,e$r._tempV36,e$r._tempV37),e$r._tempV37},e$_(e$r,["_tempV30",function(){return this._tempV30=new e$om},"_tempV31",function(){return this._tempV31=new e$om},"_tempV32",function(){return this._tempV32=new e$om},"_tempV33",function(){return this._tempV33=new e$om},"_tempV34",function(){return this._tempV34=new e$om},"_tempV35",function(){return this._tempV35=new e$om},"_tempV36",function(){return this._tempV36=new e$om},"_tempV37",function(){return this._tempV37=new e$om}]),e$r}(),e$bD=function(){function e$f(e$D,e$m){this.center=null,this.radius=NaN,this.center=e$D,this.radius=e$m}e$R(e$f,"laya.d3.math.BoundSphere");var e$D=e$f.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.toDefault=function(){this.center.toDefault(),this.radius=0},e$D.intersectsRayDistance=function(e$D){return e$jD.intersectsRayAndSphereRD(e$D,this)},e$D.intersectsRayPoint=function(e$D,e$m){return e$jD.intersectsRayAndSphereRP(e$D,this,e$m)},e$D.cloneTo=function(e$D){var e$m=e$D;this.center.cloneTo(e$m.center),e$m.radius=this.radius},e$D.clone=function(){var e$D=new this.constructor(new e$om,new e$om);return this.cloneTo(e$D),e$D},e$f.createFromSubPoints=function(e$D,e$m,e$Y,e$t){if(null==e$D)throw new Error("points");if(e$m<0||e$m>=e$D.length)throw new Error("start"+e$m+"Must be in the range [0, "+(e$D.length-1)+"]");if(e$Y<0||e$m+e$Y>e$D.length)throw new Error("count"+e$Y+"Must be in the range <= "+e$D.length+"}");var e$y=e$m+e$Y,e$l=e$f._tempVector3;e$l.elements[0]=0,e$l.elements[1]=0,e$l.elements[2]=0;for(var e$E=e$m;e$E<e$y;++e$E)e$om.add(e$D[e$E],e$l,e$l);var e$B=e$t.center;e$om.scale(e$l,1/e$Y,e$B);var e$o=0;for(e$E=e$m;e$E<e$y;++e$E){var e$r=e$om.distanceSquared(e$B,e$D[e$E]);e$o<e$r&&(e$o=e$r)}e$t.radius=Math.sqrt(e$o)},e$f.createfromPoints=function(e$D,e$m){if(null==e$D)throw new Error("points");e$f.createFromSubPoints(e$D,0,e$D.length,e$m)},e$_(e$f,["_tempVector3",function(){return this._tempVector3=new e$om}]),e$f}(),e$jD=function(){function e$Z(){}return e$R(e$Z,"laya.d3.math.Collision"),e$Z.distancePlaneToPoint=function(e$D,e$m){return e$om.dot(e$D.normal,e$m)-e$D.distance},e$Z.distanceBoxToPoint=function(e$D,e$m){var e$Y=e$D.min.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.max.elements,e$B=e$E[0],e$o=e$E[1],e$r=e$E[2],e$f=e$m.elements,e$_=e$f[0],e$i=e$f[1],e$R=e$f[2],e$G=0;return e$_<e$t&&(e$G+=(e$t-e$_)*(e$t-e$_)),e$B<e$_&&(e$G+=(e$B-e$_)*(e$B-e$_)),e$i<e$y&&(e$G+=(e$y-e$i)*(e$y-e$i)),e$o<e$i&&(e$G+=(e$o-e$i)*(e$o-e$i)),e$R<e$l&&(e$G+=(e$l-e$R)*(e$l-e$R)),e$r<e$R&&(e$G+=(e$r-e$R)*(e$r-e$R)),Math.sqrt(e$G)},e$Z.distanceBoxToBox=function(e$D,e$m){var e$Y=e$D.min.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.max.elements,e$B=e$E[0],e$o=e$E[1],e$r=e$E[2],e$f=e$m.min.elements,e$_=e$f[0],e$i=e$f[1],e$R=e$f[2],e$G=e$m.max.elements,e$I=e$G[0],e$w=e$G[1],e$W=e$G[2],e$U=0,e$e=NaN;return e$I<e$t?e$U+=(e$e=e$t-e$I)*e$e:e$B<e$_&&(e$U+=(e$e=e$_-e$B)*e$e),e$w<e$y?e$U+=(e$e=e$y-e$w)*e$e:e$o<e$i&&(e$U+=(e$e=e$i-e$o)*e$e),e$W<e$l?e$U+=(e$e=e$l-e$W)*e$e:e$r<e$R&&(e$U+=(e$e=e$R-e$r)*e$e),Math.sqrt(e$U)},e$Z.distanceSphereToPoint=function(e$D,e$m){var e$Y=Math.sqrt(e$om.distanceSquared(e$D.center,e$m));return e$Y-=e$D.radius,Math.max(e$Y,0)},e$Z.distanceSphereToSphere=function(e$D,e$m){var e$Y=Math.sqrt(e$om.distanceSquared(e$D.center,e$m.center));return e$Y-=e$D.radius+e$m.radius,Math.max(e$Y,0)},e$Z.intersectsRayAndTriangleRD=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$D.origin.elements,e$E=e$l[0],e$B=e$l[1],e$o=e$l[2],e$r=e$D.direction.elements,e$f=e$r[0],e$_=e$r[1],e$i=e$r[2],e$R=e$m.elements,e$G=e$R[0],e$I=e$R[1],e$w=e$R[2],e$W=e$Y.elements,e$U=e$W[0],e$e=e$W[1],e$v=e$W[2],e$c=e$t.elements,e$S=e$c[0],e$z=e$c[1],e$A=e$c[2],e$J=e$Z._tempV30.elements,e$a=e$J[0],e$p=e$J[1],e$F=e$J[2];e$a=e$U-e$G,e$p=e$e-e$I,e$F=e$v-e$w;var e$s=e$Z._tempV31.elements,e$Q=e$s[0],e$T=e$s[1],e$N=e$s[2];e$Q=e$S-e$G,e$T=e$z-e$I,e$N=e$A-e$w;var e$C=e$Z._tempV32.elements,e$O=e$C[0],e$h=e$C[1],e$X=e$C[2],e$P=e$a*(e$O=e$_*e$N-e$i*e$T)+e$p*(e$h=e$i*e$Q-e$f*e$N)+e$F*(e$X=e$f*e$T-e$_*e$Q);if(e$KD.isZero(e$P))return 0,!1;var e$u=1/e$P,e$L=e$Z._tempV33.elements,e$q=e$L[0],e$$=e$L[1],e$d=e$L[2],e$k=(e$q=e$E-e$G)*e$O+(e$$=e$B-e$I)*e$h+(e$d=e$o-e$w)*e$X;if((e$k*=e$u)<0||1<e$k)return 0,!1;var e$M=e$Z._tempV34.elements,e$n=e$M[0],e$g=e$M[1],e$H=e$M[2],e$x=e$f*(e$n=e$$*e$F-e$d*e$p)+e$_*(e$g=e$d*e$a-e$q*e$F)+e$i*(e$H=e$q*e$p-e$$*e$a);if((e$x*=e$u)<0||1<e$k+e$x)return 0,!1;var e$V=e$Q*e$n+e$T*e$g+e$N*e$H;return(e$V*=e$u)<0?(0,!1):(e$V,!0)},e$Z.intersectsRayAndTriangleRP=function(e$D,e$m,e$Y,e$t,e$y){return e$Z.intersectsRayAndTriangleRD(e$D,e$m,e$Y,e$t,NaN)?(e$om.scale(e$D.direction,NaN,e$Z._tempV30),e$om.add(e$D.origin,e$Z._tempV30,e$y),!0):(e$y=e$om.ZERO,!1)},e$Z.intersectsRayAndPoint=function(e$D,e$m){e$om.subtract(e$D.origin,e$m,e$Z._tempV30);var e$Y=e$om.dot(e$Z._tempV30,e$D.direction),e$t=e$om.dot(e$Z._tempV30,e$Z._tempV30)-e$KD.zeroTolerance;return!(0<e$t&&0<e$Y)&&!(e$Y*e$Y-e$t<0)},e$Z.intersectsRayAndRay=function(e$D,e$m,e$Y){var e$t=e$D.origin,e$y=e$t.elements,e$l=e$y[0],e$E=e$y[1],e$B=e$y[2],e$o=e$D.direction,e$r=e$o.elements,e$f=e$r[0],e$_=e$r[1],e$i=e$r[2],e$R=e$m.origin,e$G=e$R.elements,e$I=e$G[0],e$w=e$G[1],e$W=e$G[2],e$U=e$m.direction,e$e=e$U.elements,e$v=e$e[0],e$c=e$e[1],e$S=e$e[2];e$om.cross(e$o,e$U,e$Z._tempV30);var e$z=e$Z._tempV30.elements,e$A=e$om.scalarLengthSquared(e$Z._tempV30);if(e$KD.isZero(e$A)&&e$KD.nearEqual(e$I,e$l)&&e$KD.nearEqual(e$w,e$E)&&e$KD.nearEqual(e$W,e$B))return e$om.ZERO.cloneTo(e$Y),!0;var e$J=e$I-e$l,e$a=e$w-e$E,e$p=e$W-e$B,e$F=e$v,e$s=e$c,e$Q=e$S,e$T=e$z[0],e$N=e$z[1],e$C=e$z[2],e$O=(e$J*e$s*e$C+e$a*e$Q*e$T+e$p*e$F*e$N-e$J*e$Q*e$N-e$a*e$F*e$C-e$p*e$s*e$T)/e$A,e$h=(e$J*(e$s=e$_)*e$C+e$a*(e$Q=e$i)*e$T+e$p*(e$F=e$f)*e$N-e$J*e$Q*e$N-e$a*e$F*e$C-e$p*e$s*e$T)/e$A;e$om.scale(e$o,e$O,e$Z._tempV30),e$om.scale(e$U,e$h,e$Z._tempV31),e$om.add(e$t,e$Z._tempV30,e$Z._tempV32),e$om.add(e$R,e$Z._tempV31,e$Z._tempV33);var e$X=e$Z._tempV32.elements,e$P=e$Z._tempV33.elements;return e$KD.nearEqual(e$P[0],e$X[0])&&e$KD.nearEqual(e$P[1],e$X[1])&&e$KD.nearEqual(e$P[2],e$X[2])?(e$Z._tempV32.cloneTo(e$Y),!0):(e$om.ZERO.cloneTo(e$Y),!1)},e$Z.intersectsPlaneAndTriangle=function(e$D,e$m,e$Y,e$t){var e$y=e$Z.intersectsPlaneAndPoint(e$D,e$m),e$l=e$Z.intersectsPlaneAndPoint(e$D,e$Y),e$E=e$Z.intersectsPlaneAndPoint(e$D,e$t);return e$y==e$tm.PlaneIntersectionType_Front&&e$l==e$tm.PlaneIntersectionType_Front&&e$E==e$tm.PlaneIntersectionType_Front?e$tm.PlaneIntersectionType_Front:e$y==e$tm.PlaneIntersectionType_Back&&e$l==e$tm.PlaneIntersectionType_Back&&e$E==e$tm.PlaneIntersectionType_Back?e$tm.PlaneIntersectionType_Back:e$tm.PlaneIntersectionType_Intersecting},e$Z.intersectsRayAndPlaneRD=function(e$D,e$m,e$Y){var e$t=e$m.normal,e$y=e$om.dot(e$t,e$D.direction);if(e$KD.isZero(e$y))return 0,!1;var e$l=e$om.dot(e$t,e$D.origin);return!((-e$m.distance-e$l)/e$y<0)||(0,!1)},e$Z.intersectsRayAndPlaneRP=function(e$D,e$m,e$Y){return e$Z.intersectsRayAndPlaneRD(e$D,e$m,NaN)?(e$om.scale(e$D.direction,NaN,e$Z._tempV30),e$om.add(e$D.origin,e$Z._tempV30,e$Z._tempV31),e$Z._tempV31,!0):(e$om.ZERO,!1)},e$Z.intersectsRayAndBoxRD=function(e$D,e$m){var e$Y=e$D.origin.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.direction.elements,e$B=e$E[0],e$o=e$E[1],e$r=e$E[2],e$f=e$m.min.elements,e$_=e$f[0],e$i=e$f[1],e$R=e$f[2],e$G=e$m.max.elements,e$I=e$G[0],e$w=e$G[1],e$W=e$G[2],e$U=0,e$e=e$KD.MaxValue;if(e$KD.isZero(e$B)){if(e$t<e$_||e$I<e$t)return-1}else{var e$v=1/e$B,e$c=(e$_-e$t)*e$v,e$S=(e$I-e$t)*e$v;if(e$S<e$c){var e$z=e$c;e$c=e$S,e$S=e$z}if(e$U=Math.max(e$c,e$U),(e$e=Math.min(e$S,e$e))<e$U)return-1}if(e$KD.isZero(e$o)){if(e$y<e$i||e$w<e$y)return-1}else{var e$A=1/e$o,e$J=(e$i-e$y)*e$A,e$a=(e$w-e$y)*e$A;if(e$a<e$J){var e$p=e$J;e$J=e$a,e$a=e$p}if(e$U=Math.max(e$J,e$U),(e$e=Math.min(e$a,e$e))<e$U)return-1}if(e$KD.isZero(e$r)){if(e$l<e$R||e$W<e$l)return-1}else{var e$F=1/e$r,e$s=(e$R-e$l)*e$F,e$Q=(e$W-e$l)*e$F;if(e$Q<e$s){var e$T=e$s;e$s=e$Q,e$Q=e$T}if(e$U=Math.max(e$s,e$U),(e$e=Math.min(e$Q,e$e))<e$U)return-1}return e$U},e$Z.intersectsRayAndBoxRP=function(e$D,e$m,e$Y){var e$t=e$Z.intersectsRayAndBoxRD(e$D,e$m);return-1===e$t?e$om.ZERO.cloneTo(e$Y):(e$om.scale(e$D.direction,e$t,e$Z._tempV30),e$om.add(e$D.origin,e$Z._tempV30,e$Z._tempV31),e$Z._tempV31.cloneTo(e$Y)),e$t},e$Z.intersectsRayAndSphereRD=function(e$D,e$m){var e$Y=e$m.radius;e$om.subtract(e$D.origin,e$m.center,e$Z._tempV30);var e$t=e$om.dot(e$Z._tempV30,e$D.direction),e$y=e$om.dot(e$Z._tempV30,e$Z._tempV30)-e$Y*e$Y;if(0<e$y&&0<e$t)return-1;var e$l=e$t*e$t-e$y;if(e$l<0)return-1;var e$E=-e$t-Math.sqrt(e$l);return e$E<0&&(e$E=0),e$E},e$Z.intersectsRayAndSphereRP=function(e$D,e$m,e$Y){var e$t=e$Z.intersectsRayAndSphereRD(e$D,e$m);return-1===e$t?e$om.ZERO.cloneTo(e$Y):(e$om.scale(e$D.direction,e$t,e$Z._tempV30),e$om.add(e$D.origin,e$Z._tempV30,e$Z._tempV31),e$Z._tempV31.cloneTo(e$Y)),e$t},e$Z.intersectsSphereAndTriangle=function(e$D,e$m,e$Y,e$t){var e$y=e$D.center,e$l=e$D.radius;return e$Z.closestPointPointTriangle(e$y,e$m,e$Y,e$t,e$Z._tempV30),e$om.subtract(e$Z._tempV30,e$y,e$Z._tempV31),e$om.dot(e$Z._tempV31,e$Z._tempV31)<=e$l*e$l},e$Z.intersectsPlaneAndPoint=function(e$D,e$m){var e$Y=e$om.dot(e$D.normal,e$m)+e$D.distance;return 0<e$Y?e$tm.PlaneIntersectionType_Front:e$Y<0?e$tm.PlaneIntersectionType_Back:e$tm.PlaneIntersectionType_Intersecting},e$Z.intersectsPlaneAndPlane=function(e$D,e$m){e$om.cross(e$D.normal,e$m.normal,e$Z._tempV30);var e$Y=e$om.dot(e$Z._tempV30,e$Z._tempV30);return!e$KD.isZero(e$Y)},e$Z.intersectsPlaneAndPlaneRL=function(e$D,e$m,e$Y){var e$t=e$D.normal,e$y=e$m.normal;e$om.cross(e$t,e$y,e$Z._tempV34);var e$l=e$om.dot(e$Z._tempV34,e$Z._tempV34);return!e$KD.isZero(e$l)&&(e$om.scale(e$y,e$D.distance,e$Z._tempV30),e$om.scale(e$t,e$m.distance,e$Z._tempV31),e$om.subtract(e$Z._tempV30,e$Z._tempV31,e$Z._tempV32),e$om.cross(e$Z._tempV32,e$Z._tempV34,e$Z._tempV33),e$om.normalize(e$Z._tempV34,e$Z._tempV34),new e$Em(e$Z._tempV33,e$Z._tempV34),!0)},e$Z.intersectsPlaneAndBox=function(e$D,e$m){var e$Y=e$D.distance,e$t=e$D.normal,e$y=e$t.elements,e$l=e$y[0],e$E=e$y[1],e$B=e$y[2],e$o=e$m.min.elements,e$r=e$o[0],e$f=e$o[1],e$_=e$o[2],e$i=e$m.max.elements,e$R=e$i[0],e$G=e$i[1],e$I=e$i[2];e$Z._tempV30.elements[0]=0<e$l?e$r:e$R,e$Z._tempV30.elements[1]=0<e$E?e$f:e$G,e$Z._tempV30.elements[2]=0<e$B?e$_:e$I,e$Z._tempV31.elements[0]=0<e$l?e$R:e$r,e$Z._tempV31.elements[1]=0<e$E?e$G:e$f,e$Z._tempV31.elements[2]=0<e$B?e$I:e$_;var e$w=e$om.dot(e$t,e$Z._tempV30);return 0<e$w+e$Y?e$tm.PlaneIntersectionType_Front:(e$w=e$om.dot(e$t,e$Z._tempV31))+e$Y<0?e$tm.PlaneIntersectionType_Back:e$tm.PlaneIntersectionType_Intersecting},e$Z.intersectsPlaneAndSphere=function(e$D,e$m){var e$Y=e$m.radius,e$t=e$om.dot(e$D.normal,e$m.center)+e$D.distance;return e$Y<e$t?e$tm.PlaneIntersectionType_Front:e$t<-e$Y?e$tm.PlaneIntersectionType_Back:e$tm.PlaneIntersectionType_Intersecting},e$Z.intersectsBoxAndBox=function(e$D,e$m){var e$Y=e$D.min.elements,e$t=e$D.max.elements,e$y=e$m.min.elements,e$l=e$m.max.elements;return!(e$Y[0]>e$l[0]||e$y[0]>e$t[0])&&(!(e$Y[1]>e$l[1]||e$y[1]>e$t[1])&&!(e$Y[2]>e$l[2]||e$y[2]>e$t[2]))},e$Z.intersectsBoxAndSphere=function(e$D,e$m){var e$Y=e$m.center,e$t=e$m.radius;return e$om.Clamp(e$Y,e$D.min,e$D.max,e$Z._tempV30),e$om.distanceSquared(e$Y,e$Z._tempV30)<=e$t*e$t},e$Z.intersectsSphereAndSphere=function(e$D,e$m){var e$Y=e$D.radius+e$m.radius;return e$om.distanceSquared(e$D.center,e$m.center)<=e$Y*e$Y},e$Z.boxContainsPoint=function(e$D,e$m){var e$Y=e$D.min.elements,e$t=e$D.max.elements,e$y=e$m.elements;return e$Y[0]<=e$y[0]&&e$t[0]>=e$y[0]&&e$Y[1]<=e$y[1]&&e$t[1]>=e$y[1]&&e$Y[2]<=e$y[2]&&e$t[2]>=e$y[2]?1:0},e$Z.boxContainsBox=function(e$D,e$m){var e$Y=e$D.min.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.max.elements,e$B=e$E[0],e$o=e$E[1],e$r=e$E[2],e$f=e$m.min.elements,e$_=e$f[0],e$i=e$f[1],e$R=e$f[2],e$G=e$m.max.elements,e$I=e$G[0],e$w=e$G[1],e$W=e$G[2];return e$B<e$_||e$I<e$t?0:e$o<e$i||e$w<e$y?0:e$r<e$R||e$W<e$l?0:e$t<=e$_&&e$I<=e$I&&e$y<=e$i&&e$w<=e$o&&e$l<=e$R&&e$W<=e$r?1:2},e$Z.boxContainsSphere=function(e$D,e$m){var e$Y=e$D.min,e$t=e$Y.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$D.max,e$o=e$B.elements,e$r=e$o[0],e$f=e$o[1],e$_=e$o[2],e$i=e$m.center,e$R=e$i.elements,e$G=e$R[0],e$I=e$R[1],e$w=e$R[2],e$W=e$m.radius;return e$om.Clamp(e$i,e$Y,e$B,e$Z._tempV30),e$W*e$W<e$om.distanceSquared(e$i,e$Z._tempV30)?0:e$y+e$W<=e$G&&e$G<=e$r-e$W&&e$W<e$r-e$y&&e$l+e$W<=e$I&&e$I<=e$f-e$W&&e$W<e$f-e$l&&e$E+e$W<=e$w&&e$w<=e$_-e$W&&e$W<e$_-e$E?1:2},e$Z.sphereContainsPoint=function(e$D,e$m){return e$om.distanceSquared(e$m,e$D.center)<=e$D.radius*e$D.radius?1:0},e$Z.sphereContainsTriangle=function(e$D,e$m,e$Y,e$t){var e$y=e$Z.sphereContainsPoint(e$D,e$m),e$l=e$Z.sphereContainsPoint(e$D,e$Y),e$E=e$Z.sphereContainsPoint(e$D,e$t);return 1==e$y&&1==e$l&&1==e$E?1:e$Z.intersectsSphereAndTriangle(e$D,e$m,e$Y,e$t)?2:0},e$Z.sphereContainsBox=function(e$D,e$m){var e$Y=e$D.center.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.radius,e$B=e$m.min.elements,e$o=e$B[0],e$r=e$B[1],e$f=e$B[2],e$_=e$m.max.elements,e$i=e$_[0],e$R=e$_[1],e$G=e$_[2],e$I=e$Z._tempV30.elements;e$I[0],e$I[1],e$I[2];if(!e$Z.intersectsBoxAndSphere(e$m,e$D))return 0;var e$w=e$E*e$E;return e$t-e$o,e$y-e$R,e$l-e$G,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$i,e$y-e$R,e$l-e$G,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$i,e$y-e$r,e$l-e$G,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$o,e$y-e$r,e$l-e$G,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$o,e$y-e$R,e$l-e$f,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$i,e$y-e$R,e$l-e$f,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$i,e$y-e$r,e$l-e$f,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:(e$t-e$o,e$y-e$r,e$l-e$f,e$om.scalarLengthSquared(e$Z._tempV30)>e$w?2:1)))))))},e$Z.sphereContainsSphere=function(e$D,e$m){var e$Y=e$D.radius,e$t=e$m.radius,e$y=e$om.distance(e$D.center,e$m.center);return e$Y+e$t<e$y?0:e$Y-e$t<e$y?2:1},e$Z.closestPointPointTriangle=function(e$D,e$m,e$Y,e$t,e$y){e$om.subtract(e$Y,e$m,e$Z._tempV30),e$om.subtract(e$t,e$m,e$Z._tempV31),e$om.subtract(e$D,e$m,e$Z._tempV32),e$om.subtract(e$D,e$Y,e$Z._tempV33),e$om.subtract(e$D,e$t,e$Z._tempV34);var e$l=e$om.dot(e$Z._tempV30,e$Z._tempV32),e$E=e$om.dot(e$Z._tempV31,e$Z._tempV32),e$B=e$om.dot(e$Z._tempV30,e$Z._tempV33),e$o=e$om.dot(e$Z._tempV31,e$Z._tempV33),e$r=e$om.dot(e$Z._tempV30,e$Z._tempV34),e$f=e$om.dot(e$Z._tempV31,e$Z._tempV34);if(e$l<=0&&e$E<=0)e$m.cloneTo(e$y);else if(0<=e$B&&e$o<=e$B)e$Y.cloneTo(e$y);else{var e$_=e$l*e$o-e$B*e$E;if(e$_<=0&&0<=e$l&&e$B<=0){var e$i=e$l/(e$l-e$B);return e$om.scale(e$Z._tempV30,e$i,e$y),void e$om.add(e$m,e$y,e$y)}if(0<=e$f&&e$r<=e$f)e$t.cloneTo(e$y);else{var e$R=e$r*e$E-e$l*e$f;if(e$R<=0&&0<=e$E&&e$f<=0){var e$G=e$E/(e$E-e$f);return e$om.scale(e$Z._tempV31,e$G,e$y),void e$om.add(e$m,e$y,e$y)}var e$I=e$B*e$f-e$r*e$o;if(e$I<=0&&0<=e$o-e$B&&0<=e$r-e$f){var e$w=(e$o-e$B)/(e$o-e$B+(e$r-e$f));return e$om.subtract(e$t,e$Y,e$y),e$om.scale(e$y,e$w,e$y),void e$om.add(e$Y,e$y,e$y)}var e$W=1/(e$I+e$R+e$_),e$U=e$R*e$W,e$e=e$_*e$W;e$om.scale(e$Z._tempV30,e$U,e$Z._tempV35),e$om.scale(e$Z._tempV31,e$e,e$Z._tempV36),e$om.add(e$Z._tempV35,e$Z._tempV36,e$y),e$om.add(e$m,e$y,e$y)}}},e$Z.closestPointPlanePoint=function(e$D,e$m,e$Y){var e$t=e$D.normal,e$y=e$om.dot(e$t,e$m)-e$D.distance;e$om.scale(e$t,e$y,e$Z._tempV30),e$om.subtract(e$m,e$Z._tempV30,e$Y)},e$Z.closestPointBoxPoint=function(e$D,e$m,e$Y){e$om.max(e$m,e$D.min,e$Z._tempV30),e$om.min(e$Z._tempV30,e$D.max,e$Y)},e$Z.closestPointSpherePoint=function(e$D,e$m,e$Y){var e$t=e$D.center;e$om.subtract(e$m,e$t,e$Y),e$om.normalize(e$Y,e$Y),e$om.scale(e$Y,e$D.radius,e$Y),e$om.add(e$Y,e$t,e$Y)},e$Z.closestPointSphereSphere=function(e$D,e$m,e$Y){var e$t=e$D.center;e$om.subtract(e$m.center,e$t,e$Y),e$om.normalize(e$Y,e$Y),e$om.scale(e$Y,e$D.radius,e$Y),e$om.add(e$Y,e$t,e$Y)},e$_(e$Z,["_tempV30",function(){return this._tempV30=new e$om},"_tempV31",function(){return this._tempV31=new e$om},"_tempV32",function(){return this._tempV32=new e$om},"_tempV33",function(){return this._tempV33=new e$om},"_tempV34",function(){return this._tempV34=new e$om},"_tempV35",function(){return this._tempV35=new e$om},"_tempV36",function(){return this._tempV36=new e$om}]),e$Z}(),e$KD=(function(){function e$D(){}e$R(e$D,"laya.d3.math.ContainmentType"),e$D.Disjoint=0,e$D.Contains=1,e$D.Intersects=2}(),function(){function e$Y(){}return e$R(e$Y,"laya.d3.math.MathUtils3D"),e$Y.isZero=function(e$D){return Math.abs(e$D)<e$Y.zeroTolerance},e$Y.nearEqual=function(e$D,e$m){return!!e$Y.isZero(e$D-e$m)},e$Y.fastInvSqrt=function(e$D){return e$Y.isZero(e$D)?e$D:1/Math.sqrt(e$D)},e$_(e$Y,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),e$Y}()),e$Dm=function(){function e$o(){var e$D=this.elements=new Float32Array(9);e$D[0]=1,e$D[1]=0,e$D[2]=0,e$D[3]=0,e$D[4]=1,e$D[5]=0,e$D[6]=0,e$D[7]=0,e$D[8]=1}e$R(e$o,"laya.d3.math.Matrix3x3");var e$D=e$o.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.determinant=function(){var e$D=this.elements,e$m=e$D[0],e$Y=e$D[1],e$t=e$D[2],e$y=e$D[3],e$l=e$D[4],e$E=e$D[5],e$B=e$D[6],e$o=e$D[7],e$r=e$D[8];return e$m*(e$r*e$l-e$E*e$o)+e$Y*(-e$r*e$y+e$E*e$B)+e$t*(e$o*e$y-e$l*e$B)},e$D.translate=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements,e$y=e$D.elements,e$l=e$t[0],e$E=e$t[1],e$B=e$t[2],e$o=e$t[3],e$r=e$t[4],e$f=e$t[5],e$_=e$t[6],e$i=e$t[7],e$R=e$t[8],e$G=e$y[0],e$I=e$y[1];e$Y[0]=e$l,e$Y[1]=e$E,e$Y[2]=e$B,e$Y[3]=e$o,e$Y[4]=e$r,e$Y[5]=e$f,e$Y[6]=e$G*e$l+e$I*e$o+e$_,e$Y[7]=e$G*e$E+e$I*e$r+e$i,e$Y[8]=e$G*e$B+e$I*e$f+e$R},e$D.rotate=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=e$t[4],e$r=e$t[5],e$f=e$t[6],e$_=e$t[7],e$i=e$t[8],e$R=Math.sin(e$D),e$G=Math.cos(e$D);e$Y[0]=e$G*e$y+e$R*e$B,e$Y[1]=e$G*e$l+e$R*e$o,e$Y[2]=e$G*e$E+e$R*e$r,e$Y[3]=e$G*e$B-e$R*e$y,e$Y[4]=e$G*e$o-e$R*e$l,e$Y[5]=e$G*e$r-e$R*e$E,e$Y[6]=e$f,e$Y[7]=e$_,e$Y[8]=e$i},e$D.scale=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements,e$y=e$D.elements,e$l=e$y[0],e$E=e$y[1];e$Y[0]=e$l*e$t[0],e$Y[1]=e$l*e$t[1],e$Y[2]=e$l*e$t[2],e$Y[3]=e$E*e$t[3],e$Y[4]=e$E*e$t[4],e$Y[5]=e$E*e$t[5],e$Y[6]=e$t[6],e$Y[7]=e$t[7],e$Y[8]=e$t[8]},e$D.invert=function(e$D){var e$m=e$D.elements,e$Y=this.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$Y[3],e$B=e$Y[4],e$o=e$Y[5],e$r=e$Y[6],e$f=e$Y[7],e$_=e$Y[8],e$i=e$_*e$B-e$o*e$f,e$R=-e$_*e$E+e$o*e$r,e$G=e$f*e$E-e$B*e$r,e$I=e$t*e$i+e$y*e$R+e$l*e$G;e$I||(e$D=null),e$I=1/e$I,e$m[0]=e$i*e$I,e$m[1]=(-e$_*e$y+e$l*e$f)*e$I,e$m[2]=(e$o*e$y-e$l*e$B)*e$I,e$m[3]=e$R*e$I,e$m[4]=(e$_*e$t-e$l*e$r)*e$I,e$m[5]=(-e$o*e$t+e$l*e$E)*e$I,e$m[6]=e$G*e$I,e$m[7]=(-e$f*e$t+e$y*e$r)*e$I,e$m[8]=(e$B*e$t-e$y*e$E)*e$I},e$D.transpose=function(e$D){var e$m=e$D.elements,e$Y=this.elements;if(e$D===this){var e$t=e$Y[1],e$y=e$Y[2],e$l=e$Y[5];e$m[1]=e$Y[3],e$m[2]=e$Y[6],e$m[3]=e$t,e$m[5]=e$Y[7],e$m[6]=e$y,e$m[7]=e$l}else e$m[0]=e$Y[0],e$m[1]=e$Y[3],e$m[2]=e$Y[6],e$m[3]=e$Y[1],e$m[4]=e$Y[4],e$m[5]=e$Y[7],e$m[6]=e$Y[2],e$m[7]=e$Y[5],e$m[8]=e$Y[8]},e$D.identity=function(){var e$D=this.elements;e$D[0]=1,e$D[1]=0,e$D[2]=0,e$D[3]=0,e$D[4]=1,e$D[5]=0,e$D[6]=0,e$D[7]=0,e$D[8]=1},e$D.cloneTo=function(e$D){var e$m,e$Y,e$t;if((e$Y=this.elements)!==(e$t=e$D.elements))for(e$m=0;e$m<9;++e$m)e$t[e$m]=e$Y[e$m]},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$o.createFromTranslation=function(e$D,e$m){e$m.elements;var e$Y=e$D.elements;e$m[0]=1,e$m[1]=0,e$m[2]=0,e$m[3]=0,e$m[4]=1,e$m[5]=0,e$m[6]=e$Y[0],e$m[7]=e$Y[1],e$m[8]=1},e$o.createFromRotation=function(e$D,e$m){var e$Y=e$m.elements,e$t=Math.sin(e$D),e$y=Math.cos(e$D);e$Y[0]=e$y,e$Y[1]=e$t,e$Y[2]=0,e$Y[3]=-e$t,e$Y[4]=e$y,e$Y[5]=0,e$Y[6]=0,e$Y[7]=0,e$Y[8]=1},e$o.createFromScaling=function(e$D,e$m){var e$Y=e$m.elements,e$t=e$D.elements;e$Y[0]=e$t[0],e$Y[1]=0,e$Y[2]=0,e$Y[3]=0,e$Y[4]=e$t[1],e$Y[5]=0,e$Y[6]=0,e$Y[7]=0,e$Y[8]=1},e$o.createFromMatrix4x4=function(e$D,e$m){e$m[0]=e$D[0],e$m[1]=e$D[1],e$m[2]=e$D[2],e$m[3]=e$D[4],e$m[4]=e$D[5],e$m[5]=e$D[6],e$m[6]=e$D[8],e$m[7]=e$D[9],e$m[8]=e$D[10]},e$o.multiply=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements,e$E=e$y[0],e$B=e$y[1],e$o=e$y[2],e$r=e$y[3],e$f=e$y[4],e$_=e$y[5],e$i=e$y[6],e$R=e$y[7],e$G=e$y[8],e$I=e$l[0],e$w=e$l[1],e$W=e$l[2],e$U=e$l[3],e$e=e$l[4],e$v=e$l[5],e$c=e$l[6],e$S=e$l[7],e$z=e$l[8];e$t[0]=e$I*e$E+e$w*e$r+e$W*e$i,e$t[1]=e$I*e$B+e$w*e$f+e$W*e$R,e$t[2]=e$I*e$o+e$w*e$_+e$W*e$G,e$t[3]=e$U*e$E+e$e*e$r+e$v*e$i,e$t[4]=e$U*e$B+e$e*e$f+e$v*e$R,e$t[5]=e$U*e$o+e$e*e$_+e$v*e$G,e$t[6]=e$c*e$E+e$S*e$r+e$z*e$i,e$t[7]=e$c*e$B+e$S*e$f+e$z*e$R,e$t[8]=e$c*e$o+e$S*e$_+e$z*e$G},e$o.lookAt=function(e$D,e$m,e$Y,e$t){e$om.subtract(e$D,e$m,e$o._tempV30),e$om.normalize(e$o._tempV30,e$o._tempV30),e$om.cross(e$Y,e$o._tempV30,e$o._tempV31),e$om.normalize(e$o._tempV31,e$o._tempV31),e$om.cross(e$o._tempV30,e$o._tempV31,e$o._tempV32);var e$y=e$o._tempV30.elements,e$l=e$o._tempV31.elements,e$E=e$o._tempV32.elements,e$B=e$t.elements;e$B[0]=e$l[0],e$B[3]=e$l[1],e$B[6]=e$l[2],e$B[1]=e$E[0],e$B[4]=e$E[1],e$B[7]=e$E[2],e$B[2]=e$y[0],e$B[5]=e$y[1],e$B[8]=e$y[2]},e$o.DEFAULT=new e$o,e$_(e$o,["_tempV30",function(){return this._tempV30=new e$om},"_tempV31",function(){return this._tempV31=new e$om},"_tempV32",function(){return this._tempV32=new e$om}]),e$o}(),e$mm=function(){function e$J(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R,e$G,e$I){void 0===e$D&&(e$D=1),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=1),void 0===e$E&&(e$E=0),void 0===e$B&&(e$B=0),void 0===e$o&&(e$o=0),void 0===e$r&&(e$r=0),void 0===e$f&&(e$f=1),void 0===e$_&&(e$_=0),void 0===e$i&&(e$i=0),void 0===e$R&&(e$R=0),void 0===e$G&&(e$G=0),void 0===e$I&&(e$I=1);var e$w=this.elements=new Float32Array(16);e$w[0]=e$D,e$w[1]=e$m,e$w[2]=e$Y,e$w[3]=e$t,e$w[4]=e$y,e$w[5]=e$l,e$w[6]=e$E,e$w[7]=e$B,e$w[8]=e$o,e$w[9]=e$r,e$w[10]=e$f,e$w[11]=e$_,e$w[12]=e$i,e$w[13]=e$R,e$w[14]=e$G,e$w[15]=e$I}e$R(e$J,"laya.d3.math.Matrix4x4");var e$D=e$J.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.getElementByRowColumn=function(e$D,e$m){if(e$D<0||3<e$D)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e$m<0||3<e$m)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*e$D+e$m]},e$D.setElementByRowColumn=function(e$D,e$m,e$Y){if(e$D<0||3<e$D)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e$m<0||3<e$m)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*e$D+e$m]=e$Y},e$D.equalsOtherMatrix=function(e$D){var e$m=this.elements,e$Y=e$D.elements;return e$KD.nearEqual(e$m[0],e$Y[0])&&e$KD.nearEqual(e$m[1],e$Y[1])&&e$KD.nearEqual(e$m[2],e$Y[2])&&e$KD.nearEqual(e$m[3],e$Y[3])&&e$KD.nearEqual(e$m[4],e$Y[4])&&e$KD.nearEqual(e$m[5],e$Y[5])&&e$KD.nearEqual(e$m[6],e$Y[6])&&e$KD.nearEqual(e$m[7],e$Y[7])&&e$KD.nearEqual(e$m[8],e$Y[8])&&e$KD.nearEqual(e$m[9],e$Y[9])&&e$KD.nearEqual(e$m[10],e$Y[10])&&e$KD.nearEqual(e$m[11],e$Y[11])&&e$KD.nearEqual(e$m[12],e$Y[12])&&e$KD.nearEqual(e$m[13],e$Y[13])&&e$KD.nearEqual(e$m[14],e$Y[14])&&e$KD.nearEqual(e$m[15],e$Y[15])},e$D.decomposeTransRotScale=function(e$D,e$m,e$Y){var e$t=e$J._tempMatrix4x4;return this.decomposeTransRotMatScale(e$D,e$t,e$Y)?(e$ym.createFromMatrix4x4(e$t,e$m),!0):(e$m.identity(),!1)},e$D.decomposeTransRotMatScale=function(e$D,e$m,e$Y){var e$t=this.elements,e$y=e$D.elements,e$l=e$m.elements,e$E=e$Y.elements;e$y[0]=e$t[12],e$y[1]=e$t[13],e$y[2]=e$t[14];var e$B=e$t[0],e$o=e$t[1],e$r=e$t[2],e$f=e$t[4],e$_=e$t[5],e$i=e$t[6],e$R=e$t[8],e$G=e$t[9],e$I=e$t[10],e$w=e$E[0]=Math.sqrt(e$B*e$B+e$o*e$o+e$r*e$r),e$W=e$E[1]=Math.sqrt(e$f*e$f+e$_*e$_+e$i*e$i),e$U=e$E[2]=Math.sqrt(e$R*e$R+e$G*e$G+e$I*e$I);if(e$KD.isZero(e$w)||e$KD.isZero(e$W)||e$KD.isZero(e$U))return e$l[1]=e$l[2]=e$l[3]=e$l[4]=e$l[6]=e$l[7]=e$l[8]=e$l[9]=e$l[11]=e$l[12]=e$l[13]=e$l[14]=0,e$l[0]=e$l[5]=e$l[10]=e$l[15]=1,!1;var e$e=e$J._tempVector0,e$v=e$e.elements;e$v[0]=e$R/e$U,e$v[1]=e$G/e$U,e$v[2]=e$I/e$U;var e$c=e$J._tempVector1,e$S=e$c.elements;e$S[0]=e$B/e$w,e$S[1]=e$o/e$w,e$S[2]=e$r/e$w;var e$z=e$J._tempVector2;e$om.cross(e$e,e$c,e$z);var e$A=e$J._tempVector1;return e$om.cross(e$z,e$e,e$A),e$l[3]=e$l[7]=e$l[11]=e$l[12]=e$l[13]=e$l[14]=0,e$l[15]=1,e$l[0]=e$A.x,e$l[1]=e$A.y,e$l[2]=e$A.z,e$l[4]=e$z.x,e$l[5]=e$z.y,e$l[6]=e$z.z,e$l[8]=e$e.x,e$l[9]=e$e.y,e$l[10]=e$e.z,e$l[0]*e$B+e$l[1]*e$o+e$l[2]*e$r<0&&(e$E[0]=-e$w),e$l[4]*e$f+e$l[5]*e$_+e$l[6]*e$i<0&&(e$E[1]=-e$W),e$l[8]*e$R+e$l[9]*e$G+e$l[10]*e$I<0&&(e$E[2]=-e$U),!0},e$D.decomposeYawPitchRoll=function(e$D){var e$m=e$D.elements,e$Y=Math.asin(-this.elements[9]);e$m[1]=e$Y,Math.cos(e$Y)>e$KD.zeroTolerance?(e$m[2]=Math.atan2(this.elements[1],this.elements[5]),e$m[0]=Math.atan2(this.elements[8],this.elements[10])):(e$m[2]=Math.atan2(-this.elements[4],this.elements[0]),e$m[0]=0)},e$D.normalize=function(){var e$D=this.elements,e$m=e$D[0],e$Y=e$D[1],e$t=e$D[2],e$y=Math.sqrt(e$m*e$m+e$Y*e$Y+e$t*e$t);if(!e$y)return e$D[0]=0,e$D[1]=0,void(e$D[2]=0);1!=e$y&&(e$y=1/e$y,e$D[0]=e$m*e$y,e$D[1]=e$Y*e$y,e$D[2]=e$t*e$y)},e$D.transpose=function(){var e$D,e$m;return e$m=(e$D=this.elements)[1],e$D[1]=e$D[4],e$D[4]=e$m,e$m=e$D[2],e$D[2]=e$D[8],e$D[8]=e$m,e$m=e$D[3],e$D[3]=e$D[12],e$D[12]=e$m,e$m=e$D[6],e$D[6]=e$D[9],e$D[9]=e$m,e$m=e$D[7],e$D[7]=e$D[13],e$D[13]=e$m,e$m=e$D[11],e$D[11]=e$D[14],e$D[14]=e$m,this},e$D.invert=function(e$D){var e$m=this.elements,e$Y=e$D.elements,e$t=e$m[0],e$y=e$m[1],e$l=e$m[2],e$E=e$m[3],e$B=e$m[4],e$o=e$m[5],e$r=e$m[6],e$f=e$m[7],e$_=e$m[8],e$i=e$m[9],e$R=e$m[10],e$G=e$m[11],e$I=e$m[12],e$w=e$m[13],e$W=e$m[14],e$U=e$m[15],e$e=e$t*e$o-e$y*e$B,e$v=e$t*e$r-e$l*e$B,e$c=e$t*e$f-e$E*e$B,e$S=e$y*e$r-e$l*e$o,e$z=e$y*e$f-e$E*e$o,e$A=e$l*e$f-e$E*e$r,e$J=e$_*e$w-e$i*e$I,e$a=e$_*e$W-e$R*e$I,e$p=e$_*e$U-e$G*e$I,e$F=e$i*e$W-e$R*e$w,e$s=e$i*e$U-e$G*e$w,e$Q=e$R*e$U-e$G*e$W,e$T=e$e*e$Q-e$v*e$s+e$c*e$F+e$S*e$p-e$z*e$a+e$A*e$J;0!==Math.abs(e$T)&&(e$T=1/e$T,e$Y[0]=(e$o*e$Q-e$r*e$s+e$f*e$F)*e$T,e$Y[1]=(e$l*e$s-e$y*e$Q-e$E*e$F)*e$T,e$Y[2]=(e$w*e$A-e$W*e$z+e$U*e$S)*e$T,e$Y[3]=(e$R*e$z-e$i*e$A-e$G*e$S)*e$T,e$Y[4]=(e$r*e$p-e$B*e$Q-e$f*e$a)*e$T,e$Y[5]=(e$t*e$Q-e$l*e$p+e$E*e$a)*e$T,e$Y[6]=(e$W*e$c-e$I*e$A-e$U*e$v)*e$T,e$Y[7]=(e$_*e$A-e$R*e$c+e$G*e$v)*e$T,e$Y[8]=(e$B*e$s-e$o*e$p+e$f*e$J)*e$T,e$Y[9]=(e$y*e$p-e$t*e$s-e$E*e$J)*e$T,e$Y[10]=(e$I*e$z-e$w*e$c+e$U*e$e)*e$T,e$Y[11]=(e$i*e$c-e$_*e$z-e$G*e$e)*e$T,e$Y[12]=(e$o*e$a-e$B*e$F-e$r*e$J)*e$T,e$Y[13]=(e$t*e$F-e$y*e$a+e$l*e$J)*e$T,e$Y[14]=(e$w*e$v-e$I*e$S-e$W*e$e)*e$T,e$Y[15]=(e$_*e$S-e$i*e$v+e$R*e$e)*e$T)},e$D.identity=function(){var e$D=this.elements;e$D[1]=e$D[2]=e$D[3]=e$D[4]=e$D[6]=e$D[7]=e$D[8]=e$D[9]=e$D[11]=e$D[12]=e$D[13]=e$D[14]=0,e$D[0]=e$D[5]=e$D[10]=e$D[15]=1},e$D.cloneTo=function(e$D){var e$m,e$Y,e$t;if((e$Y=this.elements)!==(e$t=e$D.elements))for(e$m=0;e$m<16;++e$m)e$t[e$m]=e$Y[e$m]},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$D.getTranslationVector=function(e$D){var e$m=this.elements,e$Y=e$D.elements;e$Y[0]=e$m[12],e$Y[1]=e$m[13],e$Y[2]=e$m[14]},e$D.setTranslationVector=function(e$D){var e$m=this.elements,e$Y=e$D.elements;e$m[12]=e$Y[0],e$m[13]=e$Y[1],e$m[14]=e$Y[2]},e$D.getForward=function(e$D){var e$m=this.elements,e$Y=e$D.elements;e$Y[0]=-e$m[8],e$Y[1]=-e$m[9],e$Y[2]=-e$m[10]},e$D.setForward=function(e$D){var e$m=this.elements,e$Y=e$D.elements;e$m[8]=-e$Y[0],e$m[9]=-e$Y[1],e$m[10]=-e$Y[2]},e$J.createRotationX=function(e$D,e$m){var e$Y=e$m.elements,e$t=Math.sin(e$D),e$y=Math.cos(e$D);e$Y[1]=e$Y[2]=e$Y[3]=e$Y[4]=e$Y[7]=e$Y[8]=e$Y[11]=e$Y[12]=e$Y[13]=e$Y[14]=0,e$Y[0]=e$Y[15]=1,e$Y[5]=e$Y[10]=e$y,e$Y[6]=e$t,e$Y[9]=-e$t},e$J.createRotationY=function(e$D,e$m){var e$Y=e$m.elements,e$t=Math.sin(e$D),e$y=Math.cos(e$D);e$Y[1]=e$Y[3]=e$Y[4]=e$Y[6]=e$Y[7]=e$Y[9]=e$Y[11]=e$Y[12]=e$Y[13]=e$Y[14]=0,e$Y[5]=e$Y[15]=1,e$Y[0]=e$Y[10]=e$y,e$Y[2]=-e$t,e$Y[8]=e$t},e$J.createRotationZ=function(e$D,e$m){var e$Y=e$m.elements,e$t=Math.sin(e$D),e$y=Math.cos(e$D);e$Y[2]=e$Y[3]=e$Y[6]=e$Y[7]=e$Y[8]=e$Y[9]=e$Y[11]=e$Y[12]=e$Y[13]=e$Y[14]=0,e$Y[10]=e$Y[15]=1,e$Y[0]=e$Y[5]=e$y,e$Y[1]=e$t,e$Y[4]=-e$t},e$J.createRotationYawPitchRoll=function(e$D,e$m,e$Y,e$t){e$ym.createFromYawPitchRoll(e$D,e$m,e$Y,e$J._tempQuaternion),e$J.createRotationQuaternion(e$J._tempQuaternion,e$t)},e$J.createRotationAxis=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=Math.cos(e$m),e$o=Math.sin(e$m),e$r=e$y*e$y,e$f=e$l*e$l,e$_=e$E*e$E,e$i=e$y*e$l,e$R=e$y*e$E,e$G=e$l*e$E,e$I=e$Y.elements;e$I[3]=e$I[7]=e$I[11]=e$I[12]=e$I[13]=e$I[14]=0,e$I[15]=1,e$I[0]=e$r+e$B*(1-e$r),e$I[1]=e$i-e$B*e$i+e$o*e$E,e$I[2]=e$R-e$B*e$R-e$o*e$l,e$I[4]=e$i-e$B*e$i-e$o*e$E,e$I[5]=e$f+e$B*(1-e$f),e$I[6]=e$G-e$B*e$G+e$o*e$y,e$I[8]=e$R-e$B*e$R+e$o*e$l,e$I[9]=e$G-e$B*e$G-e$o*e$y,e$I[10]=e$_+e$B*(1-e$_)},e$J.createRotationQuaternion=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0],e$l=e$Y[1],e$E=e$Y[2],e$B=e$Y[3],e$o=e$y*e$y,e$r=e$l*e$l,e$f=e$E*e$E,e$_=e$y*e$l,e$i=e$E*e$B,e$R=e$E*e$y,e$G=e$l*e$B,e$I=e$l*e$E,e$w=e$y*e$B;e$t[3]=e$t[7]=e$t[11]=e$t[12]=e$t[13]=e$t[14]=0,e$t[15]=1,e$t[0]=1-2*(e$r+e$f),e$t[1]=2*(e$_+e$i),e$t[2]=2*(e$R-e$G),e$t[4]=2*(e$_-e$i),e$t[5]=1-2*(e$f+e$o),e$t[6]=2*(e$I+e$w),e$t[8]=2*(e$R+e$G),e$t[9]=2*(e$I-e$w),e$t[10]=1-2*(e$r+e$o)},e$J.createTranslate=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;e$t[4]=e$t[8]=e$t[1]=e$t[9]=e$t[2]=e$t[6]=e$t[3]=e$t[7]=e$t[11]=0,e$t[0]=e$t[5]=e$t[10]=e$t[15]=1,e$t[12]=e$Y[0],e$t[13]=e$Y[1],e$t[14]=e$Y[2]},e$J.createScaling=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;e$t[0]=e$Y[0],e$t[5]=e$Y[1],e$t[10]=e$Y[2],e$t[1]=e$t[4]=e$t[8]=e$t[12]=e$t[9]=e$t[13]=e$t[2]=e$t[6]=e$t[14]=e$t[3]=e$t[7]=e$t[11]=0,e$t[15]=1},e$J.multiply=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f;for(e$y=e$Y.elements,e$l=e$D.elements,e$y===(e$E=e$m.elements)&&(e$E=e$E.slice()),e$t=0;e$t<4;e$t++)e$B=e$l[e$t],e$o=e$l[e$t+4],e$r=e$l[e$t+8],e$f=e$l[e$t+12],e$y[e$t]=e$B*e$E[0]+e$o*e$E[1]+e$r*e$E[2]+e$f*e$E[3],e$y[e$t+4]=e$B*e$E[4]+e$o*e$E[5]+e$r*e$E[6]+e$f*e$E[7],e$y[e$t+8]=e$B*e$E[8]+e$o*e$E[9]+e$r*e$E[10]+e$f*e$E[11],e$y[e$t+12]=e$B*e$E[12]+e$o*e$E[13]+e$r*e$E[14]+e$f*e$E[15]},e$J.createFromQuaternion=function(e$D,e$m){var e$Y=e$m.elements,e$t=e$D.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=e$y+e$y,e$r=e$l+e$l,e$f=e$E+e$E,e$_=e$y*e$o,e$i=e$l*e$o,e$R=e$l*e$r,e$G=e$E*e$o,e$I=e$E*e$r,e$w=e$E*e$f,e$W=e$B*e$o,e$U=e$B*e$r,e$e=e$B*e$f;e$Y[0]=1-e$R-e$w,e$Y[1]=e$i+e$e,e$Y[2]=e$G-e$U,e$Y[3]=0,e$Y[4]=e$i-e$e,e$Y[5]=1-e$_-e$w,e$Y[6]=e$I+e$W,e$Y[7]=0,e$Y[8]=e$G+e$U,e$Y[9]=e$I-e$W,e$Y[10]=1-e$_-e$R,e$Y[11]=0,e$Y[12]=0,e$Y[13]=0,e$Y[14]=0,e$Y[15]=1},e$J.createAffineTransformation=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements,e$l=e$m.elements,e$E=e$Y.elements,e$B=e$t.elements,e$o=e$l[0],e$r=e$l[1],e$f=e$l[2],e$_=e$l[3],e$i=e$o+e$o,e$R=e$r+e$r,e$G=e$f+e$f,e$I=e$o*e$i,e$w=e$o*e$R,e$W=e$o*e$G,e$U=e$r*e$R,e$e=e$r*e$G,e$v=e$f*e$G,e$c=e$_*e$i,e$S=e$_*e$R,e$z=e$_*e$G,e$A=e$E[0],e$J=e$E[1],e$a=e$E[2];e$B[0]=(1-(e$U+e$v))*e$A,e$B[1]=(e$w+e$z)*e$A,e$B[2]=(e$W-e$S)*e$A,e$B[3]=0,e$B[4]=(e$w-e$z)*e$J,e$B[5]=(1-(e$I+e$v))*e$J,e$B[6]=(e$e+e$c)*e$J,e$B[7]=0,e$B[8]=(e$W+e$S)*e$a,e$B[9]=(e$e-e$c)*e$a,e$B[10]=(1-(e$I+e$U))*e$a,e$B[11]=0,e$B[12]=e$y[0],e$B[13]=e$y[1],e$B[14]=e$y[2],e$B[15]=1},e$J.createLookAt=function(e$D,e$m,e$Y,e$t){var e$y=e$t.elements,e$l=e$J._tempVector0,e$E=e$J._tempVector1,e$B=e$J._tempVector2;e$om.subtract(e$D,e$m,e$B),e$om.normalize(e$B,e$B),e$om.cross(e$Y,e$B,e$l),e$om.normalize(e$l,e$l),e$om.cross(e$B,e$l,e$E),e$t.identity(),e$y[0]=e$l.x,e$y[4]=e$l.y,e$y[8]=e$l.z,e$y[1]=e$E.x,e$y[5]=e$E.y,e$y[9]=e$E.z,e$y[2]=e$B.x,e$y[6]=e$B.y,e$y[10]=e$B.z,e$y[12]=-e$om.dot(e$l,e$D),e$y[13]=-e$om.dot(e$E,e$D),e$y[14]=-e$om.dot(e$B,e$D)},e$J.createPerspective=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$y.elements,e$E=1/Math.tan(e$D/2),e$B=1/(e$Y-e$t);e$l[0]=e$E/e$m,e$l[5]=e$E,e$l[10]=(e$t+e$Y)*e$B,e$l[11]=-1,e$l[14]=2*e$t*e$Y*e$B,e$l[1]=e$l[2]=e$l[3]=e$l[4]=e$l[6]=e$l[7]=e$l[8]=e$l[9]=e$l[12]=e$l[13]=e$l[15]=0},e$J.createOrthoOffCenterRH=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B=e$E.elements,e$o=1/(e$D-e$m),e$r=1/(e$Y-e$t),e$f=1/(e$y-e$l);e$B[1]=e$B[2]=e$B[3]=e$B[4]=e$B[6]=e$B[7]=e$B[8]=e$B[9]=e$B[11]=0,e$B[15]=1,e$B[0]=-2*e$o,e$B[5]=-2*e$r,e$B[10]=2*e$f,e$B[12]=(e$D+e$m)*e$o,e$B[13]=(e$t+e$Y)*e$r,e$B[14]=(e$l+e$y)*e$f},e$J.translation=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;e$t[0]=e$t[5]=e$t[10]=e$t[15]=1,e$t[12]=e$Y[0],e$t[13]=e$Y[1],e$t[14]=e$Y[2]},e$_(e$J,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new e$J},"_tempVector0",function(){return this._tempVector0=new e$om},"_tempVector1",function(){return this._tempVector1=new e$om},"_tempVector2",function(){return this._tempVector2=new e$om},"_tempQuaternion",function(){return this._tempQuaternion=new e$ym},"DEFAULT",function(){return this.DEFAULT=new e$J},"ZERO",function(){return this.ZERO=new e$J(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),e$J}(),e$Ym=function(){function e$e(e$D,e$m){this.extents=null,this.transformation=null,this.extents=e$D,this.transformation=e$m}e$R(e$e,"laya.d3.math.OrientedBoundBox");var e$D=e$e.prototype;return e$D.getCorners=function(e$D){var e$m=e$e._tempV30.elements,e$Y=e$e._tempV31.elements,e$t=e$e._tempV32.elements,e$y=this.extents.elements;e$m[0]=e$y[0],e$m[1]=e$m[2]=0,e$Y[1]=e$y[1],e$Y[0]=e$Y[2]=0,e$t[2]=e$y[2],e$t[0]=e$t[1]=0,e$om.TransformNormal(e$e._tempV30,this.transformation,e$e._tempV30),e$om.TransformNormal(e$e._tempV31,this.transformation,e$e._tempV31),e$om.TransformNormal(e$e._tempV32,this.transformation,e$e._tempV32);var e$l=e$e._tempV33;this.transformation.getTranslationVector(e$l),e$D.length=8,e$om.add(e$l,e$e._tempV30,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV32,e$D[0]),e$om.add(e$l,e$e._tempV30,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV32,e$D[1]),e$om.subtract(e$l,e$e._tempV30,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV32,e$D[2]),e$om.subtract(e$l,e$e._tempV30,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV32,e$D[3]),e$om.add(e$l,e$e._tempV30,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV32,e$D[4]),e$om.add(e$l,e$e._tempV30,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV32,e$D[5]),e$om.subtract(e$l,e$e._tempV30,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV32,e$D[6]),e$om.subtract(e$l,e$e._tempV30,e$e._tempV34),e$om.subtract(e$e._tempV34,e$e._tempV31,e$e._tempV34),e$om.add(e$e._tempV34,e$e._tempV32,e$D[7])},e$D.transform=function(e$D){e$mm.multiply(this.transformation,e$D,this.transformation)},e$D.scale=function(e$D){e$om.multiply(this.extents,e$D,this.extents)},e$D.translate=function(e$D){this.transformation.getTranslationVector(e$e._tempV30),e$om.add(e$e._tempV30,e$D,e$e._tempV31),this.transformation.setTranslationVector(e$e._tempV31)},e$D.Size=function(e$D){e$om.scale(this.extents,2,e$D)},e$D.getSize=function(e$D){var e$m=this.extents.elements;e$e._tempV30.x=e$m[0],e$e._tempV31.y=e$m[1],e$e._tempV32.z=e$m[2],e$om.TransformNormal(e$e._tempV30,this.transformation,e$e._tempV30),e$om.TransformNormal(e$e._tempV31,this.transformation,e$e._tempV31),e$om.TransformNormal(e$e._tempV31,this.transformation,e$e._tempV32);var e$Y=e$D.elements;e$Y[0]=e$om.scalarLength(e$e._tempV30),e$Y[1]=e$om.scalarLength(e$e._tempV31),e$Y[2]=e$om.scalarLength(e$e._tempV32)},e$D.getSizeSquared=function(e$D){var e$m=this.extents.elements;e$e._tempV30.x=e$m[0],e$e._tempV31.y=e$m[1],e$e._tempV32.z=e$m[2],e$om.TransformNormal(e$e._tempV30,this.transformation,e$e._tempV30),e$om.TransformNormal(e$e._tempV31,this.transformation,e$e._tempV31),e$om.TransformNormal(e$e._tempV31,this.transformation,e$e._tempV32);var e$Y=e$D.elements;e$Y[0]=e$om.scalarLengthSquared(e$e._tempV30),e$Y[1]=e$om.scalarLengthSquared(e$e._tempV31),e$Y[2]=e$om.scalarLengthSquared(e$e._tempV32)},e$D.getCenter=function(e$D){this.transformation.getTranslationVector(e$D)},e$D.containsPoint=function(e$D){var e$m=this.extents.elements,e$Y=e$m[0],e$t=e$m[1],e$y=e$m[2];this.transformation.invert(e$e._tempM0),e$om.transformCoordinate(e$D,e$e._tempM0,e$e._tempV30);var e$l=e$e._tempV30.elements,e$E=Math.abs(e$l[0]),e$B=Math.abs(e$l[1]),e$o=Math.abs(e$l[2]);return e$KD.nearEqual(e$E,e$Y)&&e$KD.nearEqual(e$B,e$t)&&e$KD.nearEqual(e$o,e$y)?2:e$E<e$Y&&e$B<e$t&&e$o<e$y?1:0},e$D.containsPoints=function(e$D){var e$m=this.extents.elements,e$Y=e$m[0],e$t=e$m[1],e$y=e$m[2];this.transformation.invert(e$e._tempM0);for(var e$l=!0,e$E=!1,e$B=0;e$B<e$D.length;e$B++){e$om.transformCoordinate(e$D[e$B],e$e._tempM0,e$e._tempV30);var e$o=e$e._tempV30.elements,e$r=Math.abs(e$o[0]),e$f=Math.abs(e$o[1]),e$_=Math.abs(e$o[2]);e$KD.nearEqual(e$r,e$Y)&&e$KD.nearEqual(e$f,e$t)&&e$KD.nearEqual(e$_,e$y)&&(e$E=!0),e$r<e$Y&&e$f<e$t&&e$_<e$y?e$E=!0:e$l=!1}return e$l?1:e$E?2:0},e$D.containsSphere=function(e$D,e$m){void 0===e$m&&(e$m=!1);var e$Y=this.extents.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$D.radius;this.transformation.invert(e$e._tempM0),e$om.transformCoordinate(e$D.center,e$e._tempM0,e$e._tempV30);var e$B=NaN;if(e$B=e$m?e$E:(e$om.scale(e$om.UnitX,e$E,e$e._tempV31),e$om.TransformNormal(e$e._tempV31,e$e._tempM0,e$e._tempV31),e$om.scalarLength(e$e._tempV31)),e$om.scale(this.extents,-1,e$e._tempV32),e$om.Clamp(e$e._tempV30,e$e._tempV32,this.extents,e$e._tempV33),e$B*e$B<e$om.distanceSquared(e$e._tempV30,e$e._tempV33))return 0;var e$o=e$e._tempV30.elements,e$r=e$o[0],e$f=e$o[1],e$_=e$o[2],e$i=e$e._tempV32.elements,e$R=e$i[0],e$G=e$i[1],e$I=e$i[2];return e$R+e$B<=e$r&&e$r<=e$t-e$B&&e$B<e$t-e$R&&e$G+e$B<=e$f&&e$f<=e$y-e$B&&e$B<e$y-e$G&&e$I+e$B<=e$_&&e$_<=e$l-e$B&&e$B<e$l-e$I?1:2},e$D.containsOrientedBoundBox=function(e$D){var e$m=0,e$Y=0;e$D.getCorners(e$e._corners);var e$t=this.containsPoints(e$e._corners);if(0!=e$t)return e$t;var e$y=this.extents.elements;e$D.extents.cloneTo(e$e._tempV35);var e$l=e$e._tempV35.elements;e$e._getRows(this.transformation,e$e._rows1),e$e._getRows(e$D.transformation,e$e._rows2);var e$E=NaN;for(e$m=0;e$m<4;e$m++)for(e$Y=0;e$Y<4;e$Y++)3==e$m||3==e$Y?(e$e._tempM0.setElementByRowColumn(e$m,e$Y,0),e$e._tempM1.setElementByRowColumn(e$m,e$Y,0)):(e$E=e$om.dot(e$e._rows1[e$m],e$e._rows2[e$Y]),e$e._tempM0.setElementByRowColumn(e$m,e$Y,e$E),e$e._tempM1.setElementByRowColumn(e$m,e$Y,Math.abs(e$E)));e$D.getCenter(e$e._tempV34),this.getCenter(e$e._tempV36),e$om.subtract(e$e._tempV34,e$e._tempV36,e$e._tempV30);var e$B=e$e._tempV31.elements;e$B[0]=e$om.dot(e$e._tempV30,e$e._rows1[0]),e$B[1]=e$om.dot(e$e._tempV30,e$e._rows1[1]),e$B[2]=e$om.dot(e$e._tempV30,e$e._rows1[2]);var e$o=e$e._tempV32.elements,e$r=e$e._tempV33.elements;for(e$m=0;e$m<3;e$m++)if(e$o[0]=e$e._tempM1.getElementByRowColumn(e$m,0),e$o[1]=e$e._tempM1.getElementByRowColumn(e$m,1),e$o[2]=e$e._tempM1.getElementByRowColumn(e$m,2),e$y[e$m]+e$om.dot(e$e._tempV35,e$e._tempV32)<Math.abs(e$B[e$m]))return 0;for(e$Y=0;e$Y<3;e$Y++)if(e$o[0]=e$e._tempM1.getElementByRowColumn(0,e$Y),e$o[1]=e$e._tempM1.getElementByRowColumn(1,e$Y),e$o[2]=e$e._tempM1.getElementByRowColumn(2,e$Y),e$r[0]=e$e._tempM0.getElementByRowColumn(0,e$Y),e$r[1]=e$e._tempM0.getElementByRowColumn(1,e$Y),e$r[2]=e$e._tempM0.getElementByRowColumn(2,e$Y),e$om.dot(this.extents,e$e._tempV32)+e$l[e$Y]<Math.abs(e$om.dot(e$e._tempV31,e$e._tempV33)))return 0;for(e$m=0;e$m<3;e$m++)for(e$Y=0;e$Y<3;e$Y++){var e$f=(e$m+1)%3,e$_=(e$m+2)%3,e$i=(e$Y+1)%3,e$R=(e$Y+2)%3;if(e$y[e$f]*e$e._tempM1.getElementByRowColumn(e$_,e$Y)+e$y[e$_]*e$e._tempM1.getElementByRowColumn(e$f,e$Y)+(e$l[e$i]*e$e._tempM1.getElementByRowColumn(e$m,e$R)+e$l[e$R]*e$e._tempM1.getElementByRowColumn(e$m,e$i))<Math.abs(e$B[e$_]*e$e._tempM0.getElementByRowColumn(e$f,e$Y)-e$B[e$f]*e$e._tempM0.getElementByRowColumn(e$_,e$Y)))return 0}return 2},e$D.containsLine=function(e$D,e$m){e$e._corners[0]=e$D,e$e._corners[1]=e$m;var e$Y=this.containsPoints(e$e._corners);if(0!=e$Y)return e$Y;var e$t=this.extents.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2];this.transformation.invert(e$e._tempM0),e$om.transformCoordinate(e$D,e$e._tempM0,e$e._tempV30),e$om.transformCoordinate(e$m,e$e._tempM0,e$e._tempV31),e$om.add(e$e._tempV30,e$e._tempV31,e$e._tempV32),e$om.scale(e$e._tempV32,.5,e$e._tempV32),e$om.subtract(e$e._tempV30,e$e._tempV32,e$e._tempV33);var e$B=e$e._tempV33.elements,e$o=e$B[0],e$r=e$B[1],e$f=e$B[2],e$_=e$e._tempV34.elements,e$i=e$_[0]=Math.abs(e$B[0]),e$R=e$_[1]=Math.abs(e$B[1]),e$G=e$_[2]=Math.abs(e$B[2]),e$I=e$e._tempV32.elements,e$w=e$I[0],e$W=e$I[1],e$U=e$I[2];return Math.abs(e$w)>e$y+e$i?0:Math.abs(e$W)>e$l+e$R?0:Math.abs(e$U)>e$E+e$G?0:Math.abs(e$W*e$f-e$U*e$r)>e$l*e$G+e$E*e$R?0:Math.abs(e$w*e$f-e$U*e$o)>e$y*e$G+e$E*e$i?0:Math.abs(e$w*e$r-e$W*e$o)>e$y*e$R+e$l*e$i?0:2},e$D.containsBoundBox=function(e$D){var e$m=0,e$Y=0,e$t=e$D.min,e$y=e$D.max;e$D.getCorners(e$e._corners);var e$l=this.containsPoints(e$e._corners);if(0!=e$l)return e$l;e$om.subtract(e$y,e$t,e$e._tempV30),e$om.scale(e$e._tempV30,.5,e$e._tempV30),e$om.add(e$t,e$e._tempV30,e$e._tempV30),e$om.subtract(e$y,e$e._tempV30,e$e._tempV31);var e$E=this.extents.elements,e$B=e$e._tempV31.elements;e$e._getRows(this.transformation,e$e._rows1),this.transformation.invert(e$e._tempM0);for(e$m=0;e$m<3;e$m++)for(e$Y=0;e$Y<3;e$Y++)e$e._tempM1.setElementByRowColumn(e$m,e$Y,Math.abs(e$e._tempM0.getElementByRowColumn(e$m,e$Y)));this.getCenter(e$e._tempV35),e$om.subtract(e$e._tempV30,e$e._tempV35,e$e._tempV32);var e$o=e$e._tempV31.elements;e$o[0]=e$om.dot(e$e._tempV32,e$e._rows1[0]),e$o[1]=e$om.dot(e$e._tempV32,e$e._rows1[1]),e$o[2]=e$om.dot(e$e._tempV32,e$e._rows1[2]);var e$r=e$e._tempV33.elements,e$f=e$e._tempV34.elements;for(e$m=0;e$m<3;e$m++)if(e$r[0]=e$e._tempM1.getElementByRowColumn(e$m,0),e$r[1]=e$e._tempM1.getElementByRowColumn(e$m,1),e$r[2]=e$e._tempM1.getElementByRowColumn(e$m,2),e$E[e$m]+e$om.dot(e$e._tempV31,e$e._tempV33)<Math.abs(e$o[e$m]))return 0;for(e$Y=0;e$Y<3;e$Y++)if(e$r[0]=e$e._tempM1.getElementByRowColumn(0,e$Y),e$r[1]=e$e._tempM1.getElementByRowColumn(1,e$Y),e$r[2]=e$e._tempM1.getElementByRowColumn(2,e$Y),e$f[0]=e$e._tempM0.getElementByRowColumn(0,e$Y),e$f[1]=e$e._tempM0.getElementByRowColumn(1,e$Y),e$f[2]=e$e._tempM0.getElementByRowColumn(2,e$Y),e$om.dot(this.extents,e$e._tempV33)+e$B[e$Y]<Math.abs(e$om.dot(e$e._tempV31,e$e._tempV34)))return 0;for(e$m=0;e$m<3;e$m++)for(e$Y=0;e$Y<3;e$Y++){var e$_=(e$m+1)%3,e$i=(e$m+2)%3,e$R=(e$Y+1)%3,e$G=(e$Y+2)%3;if(e$E[e$_]*e$e._tempM1.getElementByRowColumn(e$i,e$Y)+e$E[e$i]*e$e._tempM1.getElementByRowColumn(e$_,e$Y)+(e$B[e$R]*e$e._tempM1.getElementByRowColumn(e$m,e$G)+e$B[e$G]*e$e._tempM1.getElementByRowColumn(e$m,e$R))<Math.abs(e$o[e$i]*e$e._tempM0.getElementByRowColumn(e$_,e$Y)-e$o[e$_]*e$e._tempM0.getElementByRowColumn(e$i,e$Y)))return 0}return 2},e$D.intersectsRay=function(e$D,e$m){e$om.scale(this.extents,-1,e$e._tempV30),this.transformation.invert(e$e._tempM0),e$om.TransformNormal(e$D.direction,e$e._tempM0,e$e._ray.direction),e$om.transformCoordinate(e$D.origin,e$e._tempM0,e$e._ray.origin),e$e._boxBound1.min=e$e._tempV30,e$e._boxBound1.max=this.extents;var e$Y=e$jD.intersectsRayAndBoxRP(e$e._ray,e$e._boxBound1,e$m);return-1!==e$Y&&e$om.transformCoordinate(e$m,this.transformation,e$m),e$Y},e$D._getLocalCorners=function(e$D){e$D.length=8;var e$m=this.extents.elements;e$e._tempV30.x=e$m[0],e$e._tempV31.y=e$m[1],e$e._tempV32.z=e$m[2],e$om.add(e$e._tempV30,e$e._tempV31,e$e._tempV33),e$om.add(e$e._tempV33,e$e._tempV32,e$D[0]),e$om.add(e$e._tempV30,e$e._tempV31,e$e._tempV33),e$om.subtract(e$e._tempV33,e$e._tempV32,e$D[1]),e$om.subtract(e$e._tempV31,e$e._tempV30,e$e._tempV33),e$om.subtract(e$e._tempV33,e$e._tempV30,e$D[2]),e$om.subtract(e$e._tempV31,e$e._tempV30,e$e._tempV33),e$om.add(e$e._tempV33,e$e._tempV32,e$D[3]),e$om.subtract(e$e._tempV30,e$e._tempV31,e$e._tempV33),e$om.add(e$e._tempV33,e$e._tempV32,e$D[4]),e$om.subtract(e$e._tempV30,e$e._tempV31,e$e._tempV33),e$om.subtract(e$e._tempV33,e$e._tempV32,e$D[5]),e$om.scale(e$D[0],-1,e$D[6]),e$om.subtract(e$e._tempV32,e$e._tempV30,e$e._tempV33),e$om.subtract(e$e._tempV33,e$e._tempV31,e$D[7])},e$D.equals=function(e$D){return this.extents==e$D.extents&&this.transformation==e$D.transformation},e$D.cloneTo=function(e$D){var e$m=e$D;this.extents.cloneTo(e$m.extents),this.transformation.cloneTo(e$m.transformation)},e$e.createByBoundBox=function(e$D,e$m){var e$Y=e$D.min,e$t=e$D.max;e$om.subtract(e$t,e$Y,e$e._tempV30),e$om.scale(e$e._tempV30,.5,e$e._tempV30),e$om.add(e$Y,e$e._tempV30,e$e._tempV31),e$om.subtract(e$t,e$e._tempV31,e$e._tempV32),e$mm.translation(e$e._tempV31,e$e._tempM0);var e$y=e$e._tempV32.clone(),e$l=e$e._tempM0.clone();e$m.extents=e$y,e$m.transformation=e$l},e$e.createByMinAndMaxVertex=function(e$D,e$m){return e$om.subtract(e$m,e$D,e$e._tempV30),e$om.scale(e$e._tempV30,.5,e$e._tempV30),e$om.add(e$D,e$e._tempV30,e$e._tempV31),e$om.subtract(e$m,e$e._tempV31,e$e._tempV32),e$mm.translation(e$e._tempV31,e$e._tempM0),new e$e(e$e._tempV32,e$e._tempM0)},e$e._getRows=function(e$D,e$m){e$m.length=3;var e$Y=e$D.elements,e$t=e$m[0].elements;e$t[0]=e$Y[0],e$t[1]=e$Y[1],e$t[2]=e$Y[2];var e$y=e$m[1].elements;e$y[0]=e$Y[4],e$y[1]=e$Y[5],e$y[2]=e$Y[6];var e$l=e$m[2].elements;e$l[0]=e$Y[8],e$l[1]=e$Y[9],e$l[2]=e$Y[10]},e$e.getObbtoObbMatrix4x4=function(e$D,e$m,e$Y,e$t){var e$y=e$D.transformation,e$l=e$m.transformation;if(e$Y){e$e._getRows(e$y,e$e._rows1),e$e._getRows(e$l,e$e._rows2);for(var e$E=0;e$E<3;e$E++)for(var e$B=0;e$B<3;e$B++)e$t.setElementByRowColumn(e$E,e$B,e$om.dot(e$e._rows2[e$E],e$e._rows1[e$B]));e$m.getCenter(e$e._tempV30),e$D.getCenter(e$e._tempV31),e$om.subtract(e$e._tempV30,e$e._tempV31,e$e._tempV32);var e$o=e$t.elements;e$o[12]=e$om.dot(e$e._tempV32,e$e._rows1[0]),e$o[13]=e$om.dot(e$e._tempV32,e$e._rows1[1]),e$o[14]=e$om.dot(e$e._tempV32,e$e._rows1[2]),e$o[15]=1}else e$y.invert(e$e._tempM0),e$mm.multiply(e$l,e$e._tempM0,e$t)},e$e.merge=function(e$D,e$m,e$Y){var e$t=e$D.extents,e$y=e$D.transformation;e$e.getObbtoObbMatrix4x4(e$D,e$m,e$Y,e$e._tempM0),e$m._getLocalCorners(e$e._corners),e$om.transformCoordinate(e$e._corners[0],e$e._tempM0,e$e._corners[0]),e$om.transformCoordinate(e$e._corners[1],e$e._tempM0,e$e._corners[1]),e$om.transformCoordinate(e$e._corners[2],e$e._tempM0,e$e._corners[2]),e$om.transformCoordinate(e$e._corners[3],e$e._tempM0,e$e._corners[3]),e$om.transformCoordinate(e$e._corners[4],e$e._tempM0,e$e._corners[4]),e$om.transformCoordinate(e$e._corners[5],e$e._tempM0,e$e._corners[5]),e$om.transformCoordinate(e$e._corners[6],e$e._tempM0,e$e._corners[6]),e$om.transformCoordinate(e$e._corners[7],e$e._tempM0,e$e._corners[7]),e$om.scale(e$t,-1,e$e._boxBound1.min),e$t.cloneTo(e$e._boxBound1.max),e$VD.createfromPoints(e$e._corners,e$e._boxBound2),e$VD.merge(e$e._boxBound2,e$e._boxBound1,e$e._boxBound3);var e$l=e$e._boxBound3.min,e$E=e$e._boxBound3.max;e$om.subtract(e$E,e$l,e$e._tempV30),e$om.scale(e$e._tempV30,.5,e$e._tempV30),e$om.add(e$l,e$e._tempV30,e$e._tempV32),e$om.subtract(e$E,e$e._tempV32,e$t),e$om.transformCoordinate(e$e._tempV32,e$y,e$e._tempV33)},e$_(e$e,["_tempV30",function(){return this._tempV30=new e$om},"_tempV31",function(){return this._tempV31=new e$om},"_tempV32",function(){return this._tempV32=new e$om},"_tempV33",function(){return this._tempV33=new e$om},"_tempV34",function(){return this._tempV34=new e$om},"_tempV35",function(){return this._tempV35=new e$om},"_tempV36",function(){return this._tempV36=new e$om},"_tempM0",function(){return this._tempM0=new e$mm},"_tempM1",function(){return this._tempM1=new e$mm},"_corners",function(){return this._corners=[new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om]},"_rows1",function(){return this._rows1=[new e$om,new e$om,new e$om]},"_rows2",function(){return this._rows2=[new e$om,new e$om,new e$om]},"_ray",function(){return this._ray=new e$Em(new e$om,new e$om)},"_boxBound1",function(){return this._boxBound1=new e$VD(new e$om,new e$om)},"_boxBound2",function(){return this._boxBound2=new e$VD(new e$om,new e$om)},"_boxBound3",function(){return this._boxBound3=new e$VD(new e$om,new e$om)}]),e$e}(),e$tm=function(){function e$c(e$D,e$m){this.normal=null,this.distance=NaN,void 0===e$m&&(e$m=0),this.normal=e$D,this.distance=e$m}return e$R(e$c,"laya.d3.math.Plane"),e$c.prototype.normalize=function(){var e$D=this.normal.elements,e$m=e$D[0],e$Y=e$D[1],e$t=e$D[2],e$y=1/Math.sqrt(e$m*e$m+e$Y*e$Y+e$t*e$t);e$D[0]=e$m*e$y,e$D[1]=e$Y*e$y,e$D[2]=e$t*e$y,this.distance*=e$y},e$c.createPlaneBy3P=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$m.elements,e$l=e$Y.elements,e$E=e$y[0]-e$t[0],e$B=e$y[1]-e$t[1],e$o=e$y[2]-e$t[2],e$r=e$l[0]-e$t[0],e$f=e$l[1]-e$t[1],e$_=e$l[2]-e$t[2],e$i=e$B*e$_-e$o*e$f,e$R=e$o*e$r-e$E*e$_,e$G=e$E*e$f-e$B*e$r,e$I=1/Math.sqrt(e$i*e$i+e$R*e$R+e$G*e$G),e$w=e$i*e$I,e$W=e$R*e$I,e$U=e$G*e$I,e$e=e$c._TEMPVec3.elements;e$e[0]=e$w,e$e[1]=e$W,e$e[2]=e$U;var e$v=-(e$w*e$t[0]+e$W*e$t[1]+e$U*e$t[2]);return new e$c(e$c._TEMPVec3,e$v)},e$c.PlaneIntersectionType_Back=0,e$c.PlaneIntersectionType_Front=1,e$c.PlaneIntersectionType_Intersecting=2,e$_(e$c,["_TEMPVec3",function(){return this._TEMPVec3=new e$om}]),e$c}(),e$ym=function(){function e$y(e$D,e$m,e$Y,e$t){this.elements=new Float32Array(4),void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=1),this.elements[0]=e$D,this.elements[1]=e$m,this.elements[2]=e$Y,this.elements[3]=e$t}e$R(e$y,"laya.d3.math.Quaternion");var e$D=e$y.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.scaling=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements;e$Y[0]=e$t[0]*e$D,e$Y[1]=e$t[1]*e$D,e$Y[2]=e$t[2]*e$D,e$Y[3]=e$t[3]*e$D},e$D.normalize=function(e$D){var e$m=e$D.elements,e$Y=this.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$Y[3],e$B=e$t*e$t+e$y*e$y+e$l*e$l+e$E*e$E;0<e$B&&(e$B=1/Math.sqrt(e$B),e$m[0]=e$t*e$B,e$m[1]=e$y*e$B,e$m[2]=e$l*e$B,e$m[3]=e$E*e$B)},e$D.length=function(){var e$D=this.elements,e$m=e$D[0],e$Y=e$D[1],e$t=e$D[2],e$y=e$D[3];return Math.sqrt(e$m*e$m+e$Y*e$Y+e$t*e$t+e$y*e$y)},e$D.rotateX=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements;e$D*=.5;var e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=Math.sin(e$D),e$r=Math.cos(e$D);e$Y[0]=e$y*e$r+e$B*e$o,e$Y[1]=e$l*e$r+e$E*e$o,e$Y[2]=e$E*e$r-e$l*e$o,e$Y[3]=e$B*e$r-e$y*e$o},e$D.rotateY=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements;e$D*=.5;var e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=Math.sin(e$D),e$r=Math.cos(e$D);e$Y[0]=e$y*e$r-e$E*e$o,e$Y[1]=e$l*e$r+e$B*e$o,e$Y[2]=e$E*e$r+e$y*e$o,e$Y[3]=e$B*e$r-e$l*e$o},e$D.rotateZ=function(e$D,e$m){var e$Y=e$m.elements,e$t=this.elements;e$D*=.5;var e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=Math.sin(e$D),e$r=Math.cos(e$D);e$Y[0]=e$y*e$r+e$l*e$o,e$Y[1]=e$l*e$r-e$y*e$o,e$Y[2]=e$E*e$r+e$B*e$o,e$Y[3]=e$B*e$r-e$E*e$o},e$D.getYawPitchRoll=function(e$D){e$om.transformQuat(e$om.ForwardRH,this,e$y.TEMPVector31),e$om.transformQuat(e$om.Up,this,e$y.TEMPVector32);var e$m=e$y.TEMPVector32.elements;e$y.angleTo(e$om.ZERO,e$y.TEMPVector31,e$y.TEMPVector33);var e$Y=e$y.TEMPVector33.elements;e$Y[0]==Math.PI/2?(e$Y[1]=e$y.arcTanAngle(e$m[2],e$m[0]),e$Y[2]=0):e$Y[0]==-Math.PI/2?(e$Y[1]=e$y.arcTanAngle(-e$m[2],-e$m[0]),e$Y[2]=0):(e$mm.createRotationY(-e$Y[1],e$y.TEMPMatrix0),e$mm.createRotationX(-e$Y[0],e$y.TEMPMatrix1),e$om.transformCoordinate(e$y.TEMPVector32,e$y.TEMPMatrix0,e$y.TEMPVector32),e$om.transformCoordinate(e$y.TEMPVector32,e$y.TEMPMatrix1,e$y.TEMPVector32),e$Y[2]=e$y.arcTanAngle(e$m[1],-e$m[0])),e$Y[1]<=-Math.PI&&(e$Y[1]=Math.PI),e$Y[2]<=-Math.PI&&(e$Y[2]=Math.PI),e$Y[1]>=Math.PI&&e$Y[2]>=Math.PI&&(e$Y[1]=0,e$Y[2]=0,e$Y[0]=Math.PI-e$Y[0]);var e$t=e$D.elements;e$t[0]=e$Y[1],e$t[1]=e$Y[0],e$t[2]=e$Y[2]},e$D.invert=function(e$D){var e$m=e$D.elements,e$Y=this.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$Y[3],e$B=e$t*e$t+e$y*e$y+e$l*e$l+e$E*e$E,e$o=e$B?1/e$B:0;e$m[0]=-e$t*e$o,e$m[1]=-e$y*e$o,e$m[2]=-e$l*e$o,e$m[3]=e$E*e$o},e$D.identity=function(){var e$D=this.elements;e$D[0]=0,e$D[1]=0,e$D[2]=0,e$D[3]=1},e$D.fromArray=function(e$D,e$m){void 0===e$m&&(e$m=0),this.elements[0]=e$D[e$m+0],this.elements[1]=e$D[e$m+1],this.elements[2]=e$D[e$m+2],this.elements[3]=e$D[e$m+3]},e$D.cloneTo=function(e$D){var e$m,e$Y,e$t;if((e$Y=this.elements)!==(e$t=e$D.elements))for(e$m=0;e$m<4;++e$m)e$t[e$m]=e$Y[e$m]},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$D.equals=function(e$D){var e$m=this.elements,e$Y=e$D.elements;return e$KD.nearEqual(e$m[0],e$Y[0])&&e$KD.nearEqual(e$m[1],e$Y[1])&&e$KD.nearEqual(e$m[2],e$Y[2])&&e$KD.nearEqual(e$m[3],e$Y[3])},e$D.lengthSquared=function(){var e$D=this.elements[0],e$m=this.elements[1],e$Y=this.elements[2],e$t=this.elements[3];return e$D*e$D+e$m*e$m+e$Y*e$Y+e$t*e$t},e$G(0,e$D,"x",function(){return this.elements[0]}),e$G(0,e$D,"y",function(){return this.elements[1]}),e$G(0,e$D,"z",function(){return this.elements[2]}),e$G(0,e$D,"w",function(){return this.elements[3]}),e$y.createFromYawPitchRoll=function(e$D,e$m,e$Y,e$t){var e$y=.5*e$Y,e$l=.5*e$m,e$E=.5*e$D,e$B=Math.sin(e$y),e$o=Math.cos(e$y),e$r=Math.sin(e$l),e$f=Math.cos(e$l),e$_=Math.sin(e$E),e$i=Math.cos(e$E),e$R=e$t.elements;e$R[0]=e$i*e$r*e$o+e$_*e$f*e$B,e$R[1]=e$_*e$f*e$o-e$i*e$r*e$B,e$R[2]=e$i*e$f*e$B-e$_*e$r*e$o,e$R[3]=e$i*e$f*e$o+e$_*e$r*e$B},e$y.multiply=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$m.elements,e$l=e$Y.elements,e$E=e$t[0],e$B=e$t[1],e$o=e$t[2],e$r=e$t[3],e$f=e$y[0],e$_=e$y[1],e$i=e$y[2],e$R=e$y[3],e$G=e$B*e$i-e$o*e$_,e$I=e$o*e$f-e$E*e$i,e$w=e$E*e$_-e$B*e$f,e$W=e$E*e$f+e$B*e$_+e$o*e$i;e$l[0]=e$E*e$R+e$f*e$r+e$G,e$l[1]=e$B*e$R+e$_*e$r+e$I,e$l[2]=e$o*e$R+e$i*e$r+e$w,e$l[3]=e$r*e$R-e$W},e$y.arcTanAngle=function(e$D,e$m){return 0==e$D?1==e$m?Math.PI/2:-Math.PI/2:0<e$D?Math.atan(e$m/e$D):e$D<0?0<e$m?Math.atan(e$m/e$D)+Math.PI:Math.atan(e$m/e$D)-Math.PI:0},e$y.angleTo=function(e$D,e$m,e$Y){e$om.subtract(e$m,e$D,e$y.TEMPVector30),e$om.normalize(e$y.TEMPVector30,e$y.TEMPVector30),e$Y.elements[0]=Math.asin(e$y.TEMPVector30.y),e$Y.elements[1]=e$y.arcTanAngle(-e$y.TEMPVector30.z,-e$y.TEMPVector30.x)},e$y.createFromAxisAngle=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements;e$m*=.5;var e$l=Math.sin(e$m);e$t[0]=e$l*e$y[0],e$t[1]=e$l*e$y[1],e$t[2]=e$l*e$y[2],e$t[3]=Math.cos(e$m)},e$y.createFromMatrix3x3=function(e$D,e$m){var e$Y,e$t=e$m.elements,e$y=e$D.elements,e$l=e$y[0]+e$y[4]+e$y[8];if(0<e$l)e$Y=Math.sqrt(e$l+1),e$t[3]=.5*e$Y,e$Y=.5/e$Y,e$t[0]=(e$y[5]-e$y[7])*e$Y,e$t[1]=(e$y[6]-e$y[2])*e$Y,e$t[2]=(e$y[1]-e$y[3])*e$Y;else{var e$E=0;e$y[4]>e$y[0]&&(e$E=1),e$y[8]>e$y[3*e$E+e$E]&&(e$E=2);var e$B=(e$E+1)%3,e$o=(e$E+2)%3;e$Y=Math.sqrt(e$y[3*e$E+e$E]-e$y[3*e$B+e$B]-e$y[3*e$o+e$o]+1),e$t[e$E]=.5*e$Y,e$Y=.5/e$Y,e$t[3]=(e$y[3*e$B+e$o]-e$y[3*e$o+e$B])*e$Y,e$t[e$B]=(e$y[3*e$B+e$E]+e$y[3*e$E+e$B])*e$Y,e$t[e$o]=(e$y[3*e$o+e$E]+e$y[3*e$E+e$o])*e$Y}},e$y.createFromMatrix4x4=function(e$D,e$m){var e$Y,e$t,e$y=e$D.elements,e$l=e$m.elements,e$E=e$y[0]+e$y[5]+e$y[10];0<e$E?(e$Y=Math.sqrt(e$E+1),e$l[3]=.5*e$Y,e$Y=.5/e$Y,e$l[0]=(e$y[6]-e$y[9])*e$Y,e$l[1]=(e$y[8]-e$y[2])*e$Y,e$l[2]=(e$y[1]-e$y[4])*e$Y):e$y[0]>=e$y[5]&&e$y[0]>=e$y[10]?(e$t=.5/(e$Y=Math.sqrt(1+e$y[0]-e$y[5]-e$y[10])),e$l[0]=.5*e$Y,e$l[1]=(e$y[1]+e$y[4])*e$t,e$l[2]=(e$y[2]+e$y[8])*e$t,e$l[3]=(e$y[6]-e$y[9])*e$t):e$y[5]>e$y[10]?(e$t=.5/(e$Y=Math.sqrt(1+e$y[5]-e$y[0]-e$y[10])),e$l[0]=(e$y[4]+e$y[1])*e$t,e$l[1]=.5*e$Y,e$l[2]=(e$y[9]+e$y[6])*e$t,e$l[3]=(e$y[8]-e$y[2])*e$t):(e$t=.5/(e$Y=Math.sqrt(1+e$y[10]-e$y[0]-e$y[5])),e$l[0]=(e$y[8]+e$y[2])*e$t,e$l[1]=(e$y[9]+e$y[6])*e$t,e$l[2]=.5*e$Y,e$l[3]=(e$y[1]-e$y[4])*e$t)},e$y.slerp=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r=e$D.elements,e$f=e$m.elements,e$_=e$t.elements,e$i=e$r[0],e$R=e$r[1],e$G=e$r[2],e$I=e$r[3],e$w=e$f[0],e$W=e$f[1],e$U=e$f[2],e$e=e$f[3];return(e$l=e$i*e$w+e$R*e$W+e$G*e$U+e$I*e$e)<0&&(e$l=-e$l,e$w=-e$w,e$W=-e$W,e$U=-e$U,e$e=-e$e),e$o=1e-6<1-e$l?(e$y=Math.acos(e$l),e$E=Math.sin(e$y),e$B=Math.sin((1-e$Y)*e$y)/e$E,Math.sin(e$Y*e$y)/e$E):(e$B=1-e$Y,e$Y),e$_[0]=e$B*e$i+e$o*e$w,e$_[1]=e$B*e$R+e$o*e$W,e$_[2]=e$B*e$G+e$o*e$U,e$_[3]=e$B*e$I+e$o*e$e,e$_},e$y.lerp=function(e$D,e$m,e$Y,e$t){var e$y=e$t.elements,e$l=e$D.elements,e$E=e$m.elements,e$B=e$l[0],e$o=e$l[1],e$r=e$l[2],e$f=e$l[3];e$y[0]=e$B+e$Y*(e$E[0]-e$B),e$y[1]=e$o+e$Y*(e$E[1]-e$o),e$y[2]=e$r+e$Y*(e$E[2]-e$r),e$y[3]=e$f+e$Y*(e$E[3]-e$f)},e$y.add=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]+e$l[0],e$t[1]=e$y[1]+e$l[1],e$t[2]=e$y[2]+e$l[2],e$t[3]=e$y[3]+e$l[3]},e$y.dot=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;return e$Y[0]*e$t[0]+e$Y[1]*e$t[1]+e$Y[2]*e$t[2]+e$Y[3]*e$t[3]},e$y.rotationLookAt=function(e$D,e$m,e$Y){e$y.lookAt(e$om.ZERO,e$D,e$m,e$Y)},e$y.lookAt=function(e$D,e$m,e$Y,e$t){e$Dm.lookAt(e$D,e$m,e$Y,e$y._tempMatrix3x3),e$y.rotationMatrix(e$y._tempMatrix3x3,e$t)},e$y.invert=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$D.lengthSquared();e$KD.isZero(e$y)||(e$y=1/e$y,e$t[0]=-e$Y[0]*e$y,e$t[1]=-e$Y[1]*e$y,e$t[2]=-e$Y[2]*e$y,e$t[3]=e$Y[3]*e$y)},e$y.rotationMatrix=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$Y[0],e$y=e$Y[1],e$l=e$Y[2],e$E=e$Y[3],e$B=e$Y[4],e$o=e$Y[5],e$r=e$Y[6],e$f=e$Y[7],e$_=e$Y[8],e$i=e$m.elements,e$R=NaN,e$G=NaN,e$I=e$t+e$B+e$_;0<e$I?(e$R=Math.sqrt(e$I+1),e$i[3]=.5*e$R,e$R=.5/e$R,e$i[0]=(e$o-e$f)*e$R,e$i[1]=(e$r-e$l)*e$R,e$i[2]=(e$y-e$E)*e$R):e$B<=e$t&&e$_<=e$t?(e$G=.5/(e$R=Math.sqrt(1+e$t-e$B-e$_)),e$i[0]=.5*e$R,e$i[1]=(e$y+e$E)*e$G,e$i[2]=(e$l+e$r)*e$G,e$i[3]=(e$o-e$f)*e$G):e$_<e$B?(e$G=.5/(e$R=Math.sqrt(1+e$B-e$t-e$_)),e$i[0]=(e$E+e$y)*e$G,e$i[1]=.5*e$R,e$i[2]=(e$f+e$o)*e$G,e$i[3]=(e$r-e$l)*e$G):(e$G=.5/(e$R=Math.sqrt(1+e$_-e$t-e$B)),e$i[0]=(e$r+e$l)*e$G,e$i[1]=(e$f+e$o)*e$G,e$i[2]=.5*e$R,e$i[3]=(e$y-e$E)*e$G)},e$y.DEFAULT=new e$y,e$_(e$y,["TEMPVector30",function(){return this.TEMPVector30=new e$om},"TEMPVector31",function(){return this.TEMPVector31=new e$om},"TEMPVector32",function(){return this.TEMPVector32=new e$om},"TEMPVector33",function(){return this.TEMPVector33=new e$om},"TEMPMatrix0",function(){return this.TEMPMatrix0=new e$mm},"TEMPMatrix1",function(){return this.TEMPMatrix1=new e$mm},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new e$Dm},"NAN",function(){return this.NAN=new e$y(NaN,NaN,NaN,NaN)}]),e$y}(),e$lm=function(){function e$D(e$D){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=e$D,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}e$R(e$D,"laya.d3.math.Rand");var e$m=e$D.prototype;return e$m.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},e$m.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},e$m.getSignedFloat=function(){return 2*this.getFloat()-1},e$G(0,e$m,"seed",function(){return this.seeds[0]},function(e$D){this.seeds[0]=e$D,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),e$D.getFloatFromInt=function(e$D){return 1/8388607*(8388607&e$D)},e$D.getByteFromInt=function(e$D){return(8388607&e$D)>>>15},e$D}(),e$Em=(function(){function e$y(e$D){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(e$D instanceof Array)||4!==e$D.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|e$D[0],this._state0L=0|e$D[1],this._state1U=0|e$D[2],this._state1L=0|e$D[3]}e$R(e$y,"laya.d3.math.RandX");var e$D=e$y.prototype;e$D.randomint=function(){var e$D=this._state0U,e$m=this._state0L,e$Y=this._state1U,e$t=this._state1L,e$y=(e$t>>>0)+(e$m>>>0),e$l=e$Y+e$D+(e$y/2>>>31)>>>0,e$E=e$y>>>0,e$B=0,e$o=0;e$B=(e$D^=e$B=e$D<<23|(-512&e$m)>>>9)^(this._state0U=e$Y),e$o=(e$m^=e$o=e$m<<23)^(this._state0L=e$t);e$B^=e$D>>>18,e$o^=e$m>>>18|(262143&e$D)<<14;return e$B^=e$Y>>>5,e$o^=e$t>>>5|(31&e$Y)<<27,this._state1U=e$B,this._state1L=e$o,[e$l,e$E]},e$D.random=function(){var e$D=this.randomint(),e$m=e$D[0],e$Y=1023<<20|e$m>>>12,e$t=0|(e$D[1]>>>12|(4095&e$m)<<20);return e$y._CONVERTION_BUFFER.setUint32(0,e$Y,!1),e$y._CONVERTION_BUFFER.setUint32(4,e$t,!1),e$lm._CONVERTION_BUFFER.getFloat64(0,!1)-1},e$_(e$y,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new e$lm([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function e$D(e$D,e$m){this.origin=null,this.direction=null,this.origin=e$D,this.direction=e$m}return e$R(e$D,"laya.d3.math.Ray"),e$D}()),e$Bm=function(){function e$D(e$D,e$m){this.elements=new Float32Array(2),void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0);var e$Y=this.elements;e$Y[0]=e$D,e$Y[1]=e$m}e$R(e$D,"laya.d3.math.Vector2");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.fromArray=function(e$D,e$m){void 0===e$m&&(e$m=0),this.elements[0]=e$D[e$m+0],this.elements[1]=e$D[e$m+1]},e$m.cloneTo=function(e$D){var e$m=e$D.elements,e$Y=this.elements;e$m[0]=e$Y[0],e$m[1]=e$Y[1]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"x",function(){return this.elements[0]},function(e$D){this.elements[0]=e$D}),e$G(0,e$m,"y",function(){return this.elements[1]},function(e$D){this.elements[1]=e$D}),e$D.scale=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements;e$t[0]=e$y[0]*e$m,e$t[1]=e$y[1]*e$m},e$_(e$D,["ZERO",function(){return this.ZERO=new e$D(0,0)},"ONE",function(){return this.ONE=new e$D(1,1)}]),e$D}(),e$om=function(){function e$f(e$D,e$m,e$Y){this.elements=new Float32Array(3),void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0);var e$t=this.elements;e$t[0]=e$D,e$t[1]=e$m,e$t[2]=e$Y}e$R(e$f,"laya.d3.math.Vector3");var e$D=e$f.prototype;return e$c.imps(e$D,{"laya.d3.core.IClone":!0}),e$D.fromArray=function(e$D,e$m){void 0===e$m&&(e$m=0),this.elements[0]=e$D[e$m+0],this.elements[1]=e$D[e$m+1],this.elements[2]=e$D[e$m+2]},e$D.cloneTo=function(e$D){var e$m=e$D.elements,e$Y=this.elements;e$m[0]=e$Y[0],e$m[1]=e$Y[1],e$m[2]=e$Y[2]},e$D.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$D.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},e$D.reset=function(e$D,e$m,e$Y){this.elements[0]=e$D,this.elements[1]=e$m,this.elements[2]=e$Y},e$G(0,e$D,"x",function(){return this.elements[0]},function(e$D){this.elements[0]=e$D}),e$G(0,e$D,"y",function(){return this.elements[1]},function(e$D){this.elements[1]=e$D}),e$G(0,e$D,"z",function(){return this.elements[2]},function(e$D){this.elements[2]=e$D}),e$f.distanceSquared=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0]-e$t[0],e$l=e$Y[1]-e$t[1],e$E=e$Y[2]-e$t[2];return e$y*e$y+e$l*e$l+e$E*e$E},e$f.distance=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0]-e$t[0],e$l=e$Y[1]-e$t[1],e$E=e$Y[2]-e$t[2];return Math.sqrt(e$y*e$y+e$l*e$l+e$E*e$E)},e$f.min=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=Math.min(e$y[0],e$l[0]),e$t[1]=Math.min(e$y[1],e$l[1]),e$t[2]=Math.min(e$y[2],e$l[2])},e$f.max=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=Math.max(e$y[0],e$l[0]),e$t[1]=Math.max(e$y[1],e$l[1]),e$t[2]=Math.max(e$y[2],e$l[2])},e$f.transformQuat=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements,e$E=e$y[0],e$B=e$y[1],e$o=e$y[2],e$r=e$l[0],e$f=e$l[1],e$_=e$l[2],e$i=e$l[3],e$R=e$i*e$E+e$f*e$o-e$_*e$B,e$G=e$i*e$B+e$_*e$E-e$r*e$o,e$I=e$i*e$o+e$r*e$B-e$f*e$E,e$w=-e$r*e$E-e$f*e$B-e$_*e$o;e$t[0]=e$R*e$i+e$w*-e$r+e$G*-e$_-e$I*-e$f,e$t[1]=e$G*e$i+e$w*-e$f+e$I*-e$r-e$R*-e$_,e$t[2]=e$I*e$i+e$w*-e$_+e$R*-e$f-e$G*-e$r},e$f.scalarLength=function(e$D){var e$m=e$D.elements,e$Y=e$m[0],e$t=e$m[1],e$y=e$m[2];return Math.sqrt(e$Y*e$Y+e$t*e$t+e$y*e$y)},e$f.scalarLengthSquared=function(e$D){var e$m=e$D.elements,e$Y=e$m[0],e$t=e$m[1],e$y=e$m[2];return e$Y*e$Y+e$t*e$t+e$y*e$y},e$f.normalize=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0],e$l=e$Y[1],e$E=e$Y[2],e$B=e$y*e$y+e$l*e$l+e$E*e$E;0<e$B&&(e$B=1/Math.sqrt(e$B),e$t[0]=e$Y[0]*e$B,e$t[1]=e$Y[1]*e$B,e$t[2]=e$Y[2]*e$B)},e$f.multiply=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]*e$l[0],e$t[1]=e$y[1]*e$l[1],e$t[2]=e$y[2]*e$l[2]},e$f.scale=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements;e$t[0]=e$y[0]*e$m,e$t[1]=e$y[1]*e$m,e$t[2]=e$y[2]*e$m},e$f.lerp=function(e$D,e$m,e$Y,e$t){var e$y=e$t.elements,e$l=e$D.elements,e$E=e$m.elements,e$B=e$l[0],e$o=e$l[1],e$r=e$l[2];e$y[0]=e$B+e$Y*(e$E[0]-e$B),e$y[1]=e$o+e$Y*(e$E[1]-e$o),e$y[2]=e$r+e$Y*(e$E[2]-e$r)},e$f.transformV3ToV3=function(e$D,e$m,e$Y){var e$t=e$f._tempVector4;e$f.transformV3ToV4(e$D,e$m,e$t);var e$y=e$t.elements,e$l=e$Y.elements;e$l[0]=e$y[0],e$l[1]=e$y[1],e$l[2]=e$y[2]},e$f.transformV3ToV4=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$m.elements,e$o=e$Y.elements;e$o[0]=e$y*e$B[0]+e$l*e$B[4]+e$E*e$B[8]+e$B[12],e$o[1]=e$y*e$B[1]+e$l*e$B[5]+e$E*e$B[9]+e$B[13],e$o[2]=e$y*e$B[2]+e$l*e$B[6]+e$E*e$B[10]+e$B[14],e$o[3]=e$y*e$B[3]+e$l*e$B[7]+e$E*e$B[11]+e$B[15]},e$f.TransformNormal=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$m.elements,e$o=e$Y.elements;e$o[0]=e$y*e$B[0]+e$l*e$B[4]+e$E*e$B[8],e$o[1]=e$y*e$B[1]+e$l*e$B[5]+e$E*e$B[9],e$o[2]=e$y*e$B[2]+e$l*e$B[6]+e$E*e$B[10]},e$f.transformCoordinate=function(e$D,e$m,e$Y){var e$t=e$f._tempVector4.elements,e$y=e$D.elements,e$l=e$y[0],e$E=e$y[1],e$B=e$y[2],e$o=e$m.elements;e$t[0]=e$l*e$o[0]+e$E*e$o[4]+e$B*e$o[8]+e$o[12],e$t[1]=e$l*e$o[1]+e$E*e$o[5]+e$B*e$o[9]+e$o[13],e$t[2]=e$l*e$o[2]+e$E*e$o[6]+e$B*e$o[10]+e$o[14],e$t[3]=1/(e$l*e$o[3]+e$E*e$o[7]+e$B*e$o[11]+e$o[15]);var e$r=e$Y.elements;e$r[0]=e$t[0]*e$t[3],e$r[1]=e$t[1]*e$t[3],e$r[2]=e$t[2]*e$t[3]},e$f.Clamp=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements,e$l=e$y[0],e$E=e$y[1],e$B=e$y[2],e$o=e$m.elements,e$r=e$o[0],e$f=e$o[1],e$_=e$o[2],e$i=e$Y.elements,e$R=e$i[0],e$G=e$i[1],e$I=e$i[2],e$w=e$t.elements;e$l=(e$l=e$R<e$l?e$R:e$l)<e$r?e$r:e$l,e$E=(e$E=e$G<e$E?e$G:e$E)<e$f?e$f:e$E,e$B=(e$B=e$I<e$B?e$I:e$B)<e$_?e$_:e$B,e$w[0]=e$l,e$w[1]=e$E,e$w[2]=e$B},e$f.add=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]+e$l[0],e$t[1]=e$y[1]+e$l[1],e$t[2]=e$y[2]+e$l[2]},e$f.subtract=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]-e$l[0],e$t[1]=e$y[1]-e$l[1],e$t[2]=e$y[2]-e$l[2]},e$f.cross=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$m.elements,e$l=e$Y.elements,e$E=e$t[0],e$B=e$t[1],e$o=e$t[2],e$r=e$y[0],e$f=e$y[1],e$_=e$y[2];e$l[0]=e$B*e$_-e$o*e$f,e$l[1]=e$o*e$r-e$E*e$_,e$l[2]=e$E*e$f-e$B*e$r},e$f.dot=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;return e$Y[0]*e$t[0]+e$Y[1]*e$t[1]+e$Y[2]*e$t[2]},e$f.equals=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;return e$KD.nearEqual(Math.abs(e$Y[0]),Math.abs(e$t[0]))&&e$KD.nearEqual(Math.abs(e$Y[1]),Math.abs(e$t[1]))&&e$KD.nearEqual(Math.abs(e$Y[2]),Math.abs(e$t[2]))},e$f.ZERO=new e$f(0,0,0),e$f.ONE=new e$f(1,1,1),e$f.NegativeUnitX=new e$f(-1,0,0),e$f.UnitX=new e$f(1,0,0),e$f.UnitY=new e$f(0,1,0),e$f.UnitZ=new e$f(0,0,1),e$f.ForwardRH=new e$f(0,0,-1),e$f.ForwardLH=new e$f(0,0,1),e$f.Up=new e$f(0,1,0),e$f.NAN=new e$f(NaN,NaN,NaN),e$_(e$f,["_tempVector4",function(){return this._tempVector4=new e$rm}]),e$f}(),e$rm=function(){function e$D(e$D,e$m,e$Y,e$t){this.elements=new Float32Array(4),void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=0);var e$y=this.elements;e$y[0]=e$D,e$y[1]=e$m,e$y[2]=e$Y,e$y[3]=e$t}e$R(e$D,"laya.d3.math.Vector4");var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m.fromArray=function(e$D,e$m){void 0===e$m&&(e$m=0),this.elements[0]=e$D[e$m+0],this.elements[1]=e$D[e$m+1],this.elements[2]=e$D[e$m+2],this.elements[3]=e$D[e$m+3]},e$m.cloneTo=function(e$D){var e$m=e$D.elements,e$Y=this.elements;e$m[0]=e$Y[0],e$m[1]=e$Y[1],e$m[2]=e$Y[2],e$m[3]=e$Y[3]},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$m.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e$m.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e$G(0,e$m,"x",function(){return this.elements[0]},function(e$D){this.elements[0]=e$D}),e$G(0,e$m,"y",function(){return this.elements[1]},function(e$D){this.elements[1]=e$D}),e$G(0,e$m,"z",function(){return this.elements[2]},function(e$D){this.elements[2]=e$D}),e$G(0,e$m,"w",function(){return this.elements[3]},function(e$D){this.elements[3]=e$D}),e$D.lerp=function(e$D,e$m,e$Y,e$t){var e$y=e$t.elements,e$l=e$D.elements,e$E=e$m.elements,e$B=e$l[0],e$o=e$l[1],e$r=e$l[2],e$f=e$l[3];e$y[0]=e$B+e$Y*(e$E[0]-e$B),e$y[1]=e$o+e$Y*(e$E[1]-e$o),e$y[2]=e$r+e$Y*(e$E[2]-e$r),e$y[3]=e$f+e$Y*(e$E[3]-e$f)},e$D.transformByM4x4=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$t[0],e$l=e$t[1],e$E=e$t[2],e$B=e$t[3],e$o=e$m.elements,e$r=e$Y.elements;e$r[0]=e$y*e$o[0]+e$l*e$o[4]+e$E*e$o[8]+e$B*e$o[12],e$r[1]=e$y*e$o[1]+e$l*e$o[5]+e$E*e$o[9]+e$B*e$o[13],e$r[2]=e$y*e$o[2]+e$l*e$o[6]+e$E*e$o[10]+e$B*e$o[14],e$r[3]=e$y*e$o[3]+e$l*e$o[7]+e$E*e$o[11]+e$B*e$o[15]},e$D.equals=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;return e$KD.nearEqual(Math.abs(e$Y[0]),Math.abs(e$t[0]))&&e$KD.nearEqual(Math.abs(e$Y[1]),Math.abs(e$t[1]))&&e$KD.nearEqual(Math.abs(e$Y[2]),Math.abs(e$t[2]))&&e$KD.nearEqual(Math.abs(e$Y[3]),Math.abs(e$t[3]))},e$D.normalize=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$D.length();0<e$y&&(e$t[0]=e$Y[0]*e$y,e$t[1]=e$Y[1]*e$y,e$t[2]=e$Y[2]*e$y,e$t[3]=e$Y[3]*e$y)},e$D.add=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]+e$l[0],e$t[1]=e$y[1]+e$l[1],e$t[2]=e$y[2]+e$l[2],e$t[3]=e$y[3]+e$l[3]},e$D.subtract=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]-e$l[0],e$t[1]=e$y[1]-e$l[1],e$t[2]=e$y[2]-e$l[2],e$t[3]=e$y[3]-e$l[3]},e$D.multiply=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=e$y[0]*e$l[0],e$t[1]=e$y[1]*e$l[1],e$t[2]=e$y[2]*e$l[2],e$t[3]=e$y[3]*e$l[3]},e$D.scale=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements;e$t[0]=e$y[0]*e$m,e$t[1]=e$y[1]*e$m,e$t[2]=e$y[2]*e$m,e$t[3]=e$y[3]*e$m},e$D.Clamp=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements,e$l=e$y[0],e$E=e$y[1],e$B=e$y[2],e$o=e$y[3],e$r=e$m.elements,e$f=e$r[0],e$_=e$r[1],e$i=e$r[2],e$R=e$r[3],e$G=e$Y.elements,e$I=e$G[0],e$w=e$G[1],e$W=e$G[2],e$U=e$G[3],e$e=e$t.elements;e$l=(e$l=e$I<e$l?e$I:e$l)<e$f?e$f:e$l,e$E=(e$E=e$w<e$E?e$w:e$E)<e$_?e$_:e$E,e$B=(e$B=e$W<e$B?e$W:e$B)<e$i?e$i:e$B,e$o=(e$o=e$U<e$o?e$U:e$o)<e$R?e$R:e$o,e$e[0]=e$l,e$e[1]=e$E,e$e[2]=e$B,e$e[3]=e$o},e$D.distanceSquared=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0]-e$t[0],e$l=e$Y[1]-e$t[1],e$E=e$Y[2]-e$t[2],e$B=e$Y[3]-e$t[3];return e$y*e$y+e$l*e$l+e$E*e$E+e$B*e$B},e$D.distance=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements,e$y=e$Y[0]-e$t[0],e$l=e$Y[1]-e$t[1],e$E=e$Y[2]-e$t[2],e$B=e$Y[3]-e$t[3];return Math.sqrt(e$y*e$y+e$l*e$l+e$E*e$E+e$B*e$B)},e$D.dot=function(e$D,e$m){var e$Y=e$D.elements,e$t=e$m.elements;return e$Y[0]*e$t[0]+e$Y[1]*e$t[1]+e$Y[2]*e$t[2]+e$Y[3]*e$t[3]},e$D.min=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=Math.min(e$y[0],e$l[0]),e$t[1]=Math.min(e$y[1],e$l[1]),e$t[2]=Math.min(e$y[2],e$l[2]),e$t[3]=Math.min(e$y[3],e$l[3])},e$D.max=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m.elements;e$t[0]=Math.max(e$y[0],e$l[0]),e$t[1]=Math.max(e$y[1],e$l[1]),e$t[2]=Math.max(e$y[2],e$l[2]),e$t[3]=Math.max(e$y[3],e$l[3])},e$_(e$D,["ZERO",function(){return this.ZERO=new e$D},"ONE",function(){return this.ONE=new e$D(1,1,1,1)},"UnitX",function(){return this.UnitX=new e$D(1,0,0,0)},"UnitY",function(){return this.UnitY=new e$D(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new e$D(0,0,1,0)},"UnitW",function(){return this.UnitW=new e$D(0,0,0,1)}]),e$D}(),e$fm=function(){function e$l(e$D,e$m,e$Y,e$t){this.minDepth=0,this.maxDepth=1,this.x=e$D,this.y=e$m,this.width=e$Y,this.height=e$t}e$R(e$l,"laya.d3.math.Viewport");var e$D=e$l.prototype;return e$D.project=function(e$D,e$m,e$Y){e$om.transformV3ToV3(e$D,e$m,e$Y);var e$t=e$D.elements,e$y=e$m.elements,e$l=e$Y.elements,e$E=e$t[0]*e$y[3]+e$t[1]*e$y[7]+e$t[2]*e$y[11]+e$y[15];1!==e$E&&(e$l[0]=e$l[0]/e$E,e$l[1]=e$l[1]/e$E,e$l[2]=e$l[2]/e$E),e$l[0]=.5*(e$l[0]+1)*this.width+this.x,e$l[1]=.5*(1-e$l[1])*this.height+this.y,e$l[2]=e$l[2]*(this.maxDepth-this.minDepth)+this.minDepth},e$D.unprojectFromMat=function(e$D,e$m,e$Y){var e$t=e$D.elements,e$y=e$m.elements,e$l=e$Y.elements;e$l[0]=(e$t[0]-this.x)/this.width*2-1,e$l[1]=-((e$t[1]-this.y)/this.height*2-1);var e$E=(this.maxDepth-this.minDepth)/2;e$l[2]=(e$t[2]-this.minDepth-e$E)/e$E;var e$B=e$l[0]*e$y[3]+e$l[1]*e$y[7]+e$l[2]*e$y[11]+e$y[15];e$om.transformV3ToV3(e$Y,e$m,e$Y),1!==e$B&&(e$l[0]=e$l[0]/e$B,e$l[1]=e$l[1]/e$B,e$l[2]=e$l[2]/e$B)},e$D.unprojectFromWVP=function(e$D,e$m,e$Y,e$t,e$y){e$mm.multiply(e$m,e$Y,e$l._tempMatrix4x4),e$t&&e$mm.multiply(e$l._tempMatrix4x4,e$t,e$l._tempMatrix4x4),e$l._tempMatrix4x4.invert(e$l._tempMatrix4x4),this.unprojectFromMat(e$D,e$l._tempMatrix4x4,e$y)},e$_(e$l,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new e$mm}]),e$l}(),e$_m=function(){function e$F(e$D){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=e$D,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}e$R(e$F,"laya.d3.resource.models.SubMesh");var e$D=e$F.prototype;return e$c.imps(e$D,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e$D._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),0===e$D?this._vertexBuffer:null},e$D._getIndexBuffer=function(){return this._indexBuffer},e$D._getStaticBatchBakedVertexs=function(e$D,e$m){var e$Y,e$t,e$y=this._vertexBuffer,e$l=e$y.vertexDeclaration,e$E=e$l.getVertexElementByUsage(0).offset/4,e$B=e$l.getVertexElementByUsage(3).offset/4,e$o=e$m.meshRender.lightmapScaleOffset,e$r=0,e$f=0,e$_=0,e$i=0,e$R=0,e$G=0;if(e$o)if(e$t=e$l.getVertexElementByUsage(15))e$_=e$l.vertexStride/4,e$Y=0<this._vertexCount?e$y.getData().slice(this._vertexStart*e$_,(this._vertexStart+this._vertexCount)*e$_):e$y.getData().slice(),e$i=e$t.offset/4;else{e$_=(e$G=e$l.vertexStride/4)+2,e$Y=this._vertexCount?new Float32Array(this._vertexCount*(e$y.vertexDeclaration.vertexStride/4+2)):new Float32Array(e$y.vertexCount*(e$y.vertexDeclaration.vertexStride/4+2)),e$i=(e$R=e$l.getVertexElementByUsage(2).offset/4)+2;var e$I=e$y.getData();for(e$r=0,e$f=e$I.length/e$G;e$r<e$f;e$r++){var e$w=0;e$w=0<this._vertexCount?(this._vertexStart+e$r)*e$G:e$r*e$G;var e$W=e$r*e$_,e$U=0;for(e$U=0;e$U<e$i;e$U++)e$Y[e$W+e$U]=e$I[e$w+e$U];for(e$U=e$i;e$U<e$G;e$U++)e$Y[e$W+e$U+2]=e$I[e$w+e$U]}}else e$_=e$l.vertexStride/4,e$Y=this._vertexCount?e$y.getData().slice(this._vertexStart*e$_,(this._vertexStart+this._vertexCount)*e$_):e$y.getData().slice();if(e$D){var e$e=e$D.worldMatrix,e$v=e$F._tempMatrix4x40;e$e.invert(e$v);var e$c=e$F._tempMatrix4x41,e$S=e$m.transform.worldMatrix;e$mm.multiply(e$v,e$S,e$c)}else e$c=e$m.transform.worldMatrix;var e$z=e$F._tempQuaternion0;for(e$c.decomposeTransRotScale(e$F._tempVector30,e$z,e$F._tempVector31),e$r=0,e$f=e$Y.length/e$_;e$r<e$f;e$r++){var e$A=e$r*e$_+e$E,e$J=e$r*e$_+e$B;if(e$em.transformVector3ArrayToVector3ArrayCoordinate(e$Y,e$A,e$c,e$Y,e$A),e$em.transformVector3ArrayByQuat(e$Y,e$J,e$z,e$Y,e$J),e$o){var e$a=e$r*e$_+e$i;if(e$t)e$em.transformLightingMapTexcoordByUV1Array(e$Y,e$a,e$o,e$Y,e$a);else{var e$p=e$r*e$G+e$R;e$em.transformLightingMapTexcoordByUV0Array(e$I,e$p,e$o,e$Y,e$a)}}}return e$Y},e$D._getVertexBuffers=function(){return null},e$D._beforeRender=function(e$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$D._render=function(e$D){var e$m,e$Y=0,e$t=e$D.renderElement;if(1<this._indexCount){var e$y=this._boneIndicesList.length;if(1<e$y){for(var e$l=0;e$l<e$y;e$l++)(e$m=e$t._skinAnimationDatas||this._skinAnimationDatas)&&(e$t._shaderValue.setValue(0,e$m[e$l]),e$D._shader.uploadRenderElementUniforms(e$t._shaderValue.data)),e$s.mainContext.drawElements(4,this._subIndexBufferCount[e$l],5123,2*this._subIndexBufferStart[e$l]);e$A.drawCall+=e$y}else(e$m=e$t._skinAnimationDatas||this._skinAnimationDatas)&&(e$t._shaderValue.setValue(0,e$m[0]),e$D._shader.uploadRenderElementUniforms(e$t._shaderValue.data)),e$s.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),e$A.drawCall++;e$Y=this._indexCount}else e$Y=this._indexBuffer.indexCount,(e$m=e$t._skinAnimationDatas||this._skinAnimationDatas)&&(e$t._shaderValue.setValue(0,e$m[0]),e$D._shader.uploadRenderElementUniforms(e$t._shaderValue.data)),e$s.mainContext.drawElements(4,e$Y,5123,0),e$A.drawCall++;e$A.trianglesFaces+=e$Y/3},e$D.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},e$D.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},e$G(0,e$D,"_vertexBufferCount",function(){return 1}),e$G(0,e$D,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$_(e$F,["_tempVector30",function(){return this._tempVector30=new e$om},"_tempVector31",function(){return this._tempVector31=new e$om},"_tempQuaternion0",function(){return this._tempQuaternion0=new e$ym},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new e$mm},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new e$mm}]),e$F}(),e$im=function(){function e$D(e$D){this.defineCounter=0,this.defines=null,e$D?(this.defineCounter=e$D.defineCounter,this.defines=e$D.defines.slice()):(this.defineCounter=0,this.defines=[])}return e$R(e$D,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),e$D.prototype.registerDefine=function(e$D){var e$m=Math.pow(2,this.defineCounter++);return this.defines[e$m]=e$D,e$m},e$D}(),e$Rm=function(){function e$D(){}return e$R(e$D,"laya.d3.shader.ShaderInit3D"),e$D.__init__=function(){var e$D,e$m;e$pm._globalRegDefine("HIGHPRECISION",e$pm.SHADERDEFINE_HIGHPRECISION),e$pm._globalRegDefine("FOG",e$pm.SHADERDEFINE_FOG),e$pm._globalRegDefine("DIRECTIONLIGHT",e$pm.SHADERDEFINE_DIRECTIONLIGHT),e$pm._globalRegDefine("POINTLIGHT",e$pm.SHADERDEFINE_POINTLIGHT),e$pm._globalRegDefine("SPOTLIGHT",e$pm.SHADERDEFINE_SPOTLIGHT),e$pm._globalRegDefine("UV",e$pm.SHADERDEFINE_UV0),e$pm._globalRegDefine("COLOR",e$pm.SHADERDEFINE_COLOR),e$pm._globalRegDefine("UV1",e$pm.SHADERDEFINE_UV1),e$pm._globalRegDefine("CASTSHADOW",e$Im.SHADERDEFINE_CAST_SHADOW),e$pm._globalRegDefine("SHADOWMAP_PSSM1",e$Im.SHADERDEFINE_SHADOW_PSSM1),e$pm._globalRegDefine("SHADOWMAP_PSSM2",e$Im.SHADERDEFINE_SHADOW_PSSM2),e$pm._globalRegDefine("SHADOWMAP_PSSM3",e$Im.SHADERDEFINE_SHADOW_PSSM3),e$pm._globalRegDefine("SHADOWMAP_PCF_NO",e$Im.SHADERDEFINE_SHADOW_PCF_NO),e$pm._globalRegDefine("SHADOWMAP_PCF1",e$Im.SHADERDEFINE_SHADOW_PCF1),e$pm._globalRegDefine("SHADOWMAP_PCF2",e$Im.SHADERDEFINE_SHADOW_PCF2),e$pm._globalRegDefine("SHADOWMAP_PCF3",e$Im.SHADERDEFINE_SHADOW_PCF3),e$pm._globalRegDefine("DEPTHFOG",e$pm.SAHDERDEFINE_DEPTHFOG),e$qm.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),e$qm.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),e$D={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},e$m={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var e$Y=e$qm.nameKey.add("SIMPLE");var e$t=e$pm.add(e$Y,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',e$D,e$m);e$$m.SHADERDEFINE_DIFFUSEMAP=e$t.registerMaterialDefine("DIFFUSEMAP"),e$$m.SHADERDEFINE_NORMALMAP=e$t.registerMaterialDefine("NORMALMAP"),e$$m.SHADERDEFINE_SPECULARMAP=e$t.registerMaterialDefine("SPECULARMAP"),e$$m.SHADERDEFINE_EMISSIVEMAP=e$t.registerMaterialDefine("EMISSIVEMAP"),e$$m.SHADERDEFINE_AMBIENTMAP=e$t.registerMaterialDefine("AMBIENTMAP"),e$$m.SHADERDEFINE_REFLECTMAP=e$t.registerMaterialDefine("REFLECTMAP"),e$$m.SHADERDEFINE_UVTRANSFORM=e$t.registerMaterialDefine("UVTRANSFORM"),e$$m.SHADERDEFINE_TILINGOFFSET=e$t.registerMaterialDefine("TILINGOFFSET"),e$$m.SHADERDEFINE_ADDTIVEFOG=e$t.registerMaterialDefine("ADDTIVEFOG")},e$D}(),e$Gm=function(){function e$D(){this._data=null,this._data=[]}e$R(e$D,"laya.d3.shader.ValusArray");var e$m=e$D.prototype;return e$m.setValue=function(e$D,e$m){this._data[e$D]=e$m},e$G(0,e$m,"data",function(){return this._data}),e$D}(),e$Im=function(){function e$D(){}return e$D.SHADERDEFINE_RECEIVE_SHADOW=1,e$D.SHADERDEFINE_CAST_SHADOW=512,e$D.SHADERDEFINE_SHADOW_PSSM1=1024,e$D.SHADERDEFINE_SHADOW_PSSM2=2048,e$D.SHADERDEFINE_SHADOW_PSSM3=4096,e$D.SHADERDEFINE_SHADOW_PCF_NO=8192,e$D.SHADERDEFINE_SHADOW_PCF1=16384,e$D.SHADERDEFINE_SHADOW_PCF2=32768,e$D.SHADERDEFINE_SHADOW_PCF3=65536,e$D.MAX_PSSM_COUNT=3,e$D}(),e$wm=(function(){function e$i(){}e$R(e$i,"laya.d3.utils.Physics"),e$i.__init__=function(){e$i._layerCollsionMatrix.length=31;for(var e$D=0;e$D<31;e$D++){var e$m=[],e$Y=31-e$D;e$m.length=e$Y;for(var e$t=0;e$t<e$Y;e$t++)e$m[e$t]=e$t===e$Y-1;e$i._layerCollsionMatrix[e$D]=e$m}},e$i.setLayerCollision=function(e$D,e$m,e$Y){e$i._layerCollsionMatrix[e$D.number][30-e$m.number]=e$Y},e$i.getLayerCollision=function(e$D,e$m){return e$i._layerCollsionMatrix[e$D.number][30-e$m.number]},e$i.setColliderCollision=function(e$D,e$m,e$Y){e$Y?(delete e$D._ignoreCollisonMap[e$m.id],delete e$m._ignoreCollisonMap[e$D.id]):(e$D._ignoreCollisonMap[e$m.id]=e$m)._ignoreCollisonMap[e$D.id]=e$D},e$i.getIColliderCollision=function(e$D,e$m){return!!e$D._ignoreCollisonMap[e$m.id]},e$i.rayCast=function(e$D,e$m,e$Y,e$t){void 0===e$Y&&(e$Y=179e306),void 0===e$t&&(e$t=0),e$i._outHitAllInfo.length=0;for(var e$y=e$N.getLayerByNumber(e$t)._colliders,e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];if(e$B.enable&&(e$B.raycast(e$D,e$i._outHitInfo,e$Y),-1!==e$i._outHitInfo.distance&&e$i._outHitInfo.distance<=e$Y)){var e$o=new e$Wm;e$i._outHitInfo.cloneTo(e$o),e$i._outHitAllInfo.push(e$o)}}if(0==e$i._outHitAllInfo.length)return e$m.sprite3D=null,void(e$m.distance=-1);for(var e$r=Number.MAX_VALUE,e$f=0,e$_=0;e$_<e$i._outHitAllInfo.length;e$_++)e$i._outHitAllInfo[e$_].distance<e$r&&(e$r=e$i._outHitAllInfo[e$_].distance,e$f=e$_);e$i._outHitAllInfo[e$f].cloneTo(e$m)},e$i.rayCastAll=function(e$D,e$m,e$Y,e$t){void 0===e$Y&&(e$Y=179e306),void 0===e$t&&(e$t=0),e$m.length=0;for(var e$y=e$N.getLayerByNumber(e$t)._colliders,e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];if(e$B.enable&&(e$i._outHitInfo.distance=-1,e$i._outHitInfo.sprite3D=null,e$B.raycast(e$D,e$i._outHitInfo,e$Y),-1!==e$i._outHitInfo.distance&&e$i._outHitInfo.distance<=e$Y)){var e$o=new e$Wm;e$i._outHitInfo.cloneTo(e$o),e$m.push(e$o)}}},e$i._outHitAllInfo=[],e$i._layerCollsionMatrix=[],e$_(e$i,["_outHitInfo",function(){return this._outHitInfo=new e$Wm},"collisionManager",function(){return this.collisionManager=new CollisionManager},"gravity",function(){return this.gravity=new e$om(0,-9.81,0)}])}(),function(){function e$H(){}return e$R(e$H,"laya.d3.utils.Picker"),e$H.calculateCursorRay=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$D.elements[0],e$B=e$D.elements[1],e$o=e$H._tempVector30,e$r=e$o.elements;e$r[0]=e$E,e$r[1]=e$B,e$r[2]=e$m.minDepth;var e$f=e$H._tempVector31,e$_=e$f.elements;e$_[0]=e$E,e$_[1]=e$B,e$_[2]=e$m.maxDepth;var e$i=e$l.origin,e$R=e$H._tempVector32;e$m.unprojectFromWVP(e$o,e$Y,e$t,e$y,e$i),e$m.unprojectFromWVP(e$f,e$Y,e$t,e$y,e$R);var e$G=e$l.direction.elements;e$G[0]=e$R.x-e$i.x,e$G[1]=e$R.y-e$i.y,e$G[2]=e$R.z-e$i.z,e$om.normalize(e$l.direction,e$l.direction)},e$H.rayIntersectsPositionsAndIndices=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=e$Y.vertexStride/4,e$E=e$Y.getVertexElementByUsage(0).offset/4,e$B=Number.MAX_VALUE,e$o=-1,e$r=-1,e$f=-1,e$_=0;e$_<e$t.length;e$_+=3){var e$i=e$H._tempVector35,e$R=e$i.elements,e$G=e$t[e$_]*e$l,e$I=e$G+e$E;e$R[0]=e$m[e$I],e$R[1]=e$m[1+e$I],e$R[2]=e$m[2+e$I];var e$w=e$H._tempVector36,e$W=e$w.elements,e$U=e$t[e$_+1]*e$l,e$e=e$U+e$E;e$W[0]=e$m[e$e],e$W[1]=e$m[1+e$e],e$W[2]=e$m[2+e$e];var e$v=e$H._tempVector37,e$c=e$v.elements,e$S=e$t[e$_+2]*e$l,e$z=e$S+e$E;e$c[0]=e$m[e$z],e$c[1]=e$m[1+e$z],e$c[2]=e$m[2+e$z];var e$A=laya.d3.utils.Picker.rayIntersectsTriangle(e$D,e$i,e$w,e$v);!isNaN(e$A)&&e$A<e$B&&(e$B=e$A,e$o=e$G,e$r=e$U,e$f=e$S)}if(e$B===Number.MAX_VALUE)return e$y.position.toDefault(),e$y.distance=Number.MAX_VALUE,e$y.trianglePositions[0].toDefault(),e$y.trianglePositions[1].toDefault(),e$y.trianglePositions[2].toDefault(),e$y.triangleNormals[0].toDefault(),e$y.triangleNormals[1].toDefault(),e$y.triangleNormals[2].toDefault(),!1;e$y.distance=e$B,e$om.scale(e$D.direction,e$B,e$y.position),e$om.add(e$D.origin,e$y.position,e$y.position);var e$J=e$y.trianglePositions,e$a=e$J[0],e$p=e$J[1],e$F=e$J[2],e$s=e$a.elements,e$Q=e$p.elements,e$T=e$F.elements,e$N=e$o+e$E;e$s[0]=e$m[e$N],e$s[1]=e$m[e$N+1],e$s[2]=e$m[e$N+2];var e$C=e$r+e$E;e$Q[0]=e$m[e$C],e$Q[1]=e$m[e$C+1],e$Q[2]=e$m[e$C+2];var e$O=e$f+e$E;e$T[0]=e$m[e$O],e$T[1]=e$m[e$O+1],e$T[2]=e$m[e$O+2];var e$h=e$Y.getVertexElementByUsage(3);if(e$h){var e$X=e$h.offset/4,e$P=e$y.triangleNormals,e$u=e$P[0],e$L=e$P[1],e$q=e$P[2],e$$=e$u.elements,e$d=e$L.elements,e$k=e$q.elements,e$M=e$o+e$X;e$$[0]=e$m[e$M],e$$[1]=e$m[e$M+1],e$$[2]=e$m[e$M+2];var e$n=e$r+e$X;e$d[0]=e$m[e$n],e$d[1]=e$m[e$n+1],e$d[2]=e$m[e$n+2];var e$g=e$f+e$X;e$k[0]=e$m[e$g],e$k[1]=e$m[e$g+1],e$k[2]=e$m[e$g+2]}return!0},e$H.rayIntersectsTriangle=function(e$D,e$m,e$Y,e$t){var e$y=e$H._tempVector30,e$l=e$H._tempVector31;e$om.subtract(e$Y,e$m,e$y),e$om.subtract(e$t,e$m,e$l);var e$E,e$B=e$H._tempVector32;if(e$om.cross(e$D.direction,e$l,e$B),(e$E=e$om.dot(e$y,e$B))>-Number.MIN_VALUE&&e$E<Number.MIN_VALUE)return Number.NaN;var e$o,e$r=1/e$E,e$f=e$H._tempVector33;if(e$om.subtract(e$D.origin,e$m,e$f),e$o=e$om.dot(e$f,e$B),(e$o*=e$r)<0||1<e$o)return Number.NaN;var e$_,e$i,e$R=e$H._tempVector34;return e$om.cross(e$f,e$y,e$R),e$_=e$om.dot(e$D.direction,e$R),(e$_*=e$r)<0||1<e$o+e$_?Number.NaN:(e$i=e$om.dot(e$l,e$R),(e$i*=e$r)<0?Number.NaN:e$i)},e$_(e$H,["_tempVector30",function(){return this._tempVector30=new e$om},"_tempVector31",function(){return this._tempVector31=new e$om},"_tempVector32",function(){return this._tempVector32=new e$om},"_tempVector33",function(){return this._tempVector33=new e$om},"_tempVector34",function(){return this._tempVector34=new e$om},"_tempVector35",function(){return this._tempVector35=new e$om},"_tempVector36",function(){return this._tempVector36=new e$om},"_tempVector37",function(){return this._tempVector37=new e$om}]),e$H}()),e$Wm=function(){function e$D(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new e$om,new e$om,new e$om],this.trianglePositions.length=3,this.triangleNormals=[new e$om,new e$om,new e$om],this.triangleNormals.length=3,this.position=new e$om}return e$R(e$D,"laya.d3.utils.RaycastHit"),e$D.prototype.cloneTo=function(e$D){e$D.distance=this.distance,this.trianglePositions[0].cloneTo(e$D.trianglePositions[0]),this.trianglePositions[1].cloneTo(e$D.trianglePositions[1]),this.trianglePositions[2].cloneTo(e$D.trianglePositions[2]),this.triangleNormals[0].cloneTo(e$D.triangleNormals[0]),this.triangleNormals[1].cloneTo(e$D.triangleNormals[1]),this.triangleNormals[2].cloneTo(e$D.triangleNormals[2]),this.position.cloneTo(e$D.position),e$D.sprite3D=this.sprite3D},e$D}(),e$Um=function(){function e$D(e$D,e$m){this._width=0,this._height=0,this._width=e$D,this._height=e$m}e$R(e$D,"laya.d3.utils.Size");var e$m=e$D.prototype;return e$G(0,e$m,"width",function(){return-1===this._width?e$x.clientWidth:this._width}),e$G(0,e$m,"height",function(){return-1===this._height?e$x.clientHeight:this._height}),e$G(1,e$D,"fullScreen",function(){return new e$D(-1,-1)}),e$D}(),e$em=function(){function e$N(){}return e$R(e$N,"laya.d3.utils.Utils3D"),e$N._rotationTransformScaleSkinAnimation=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_){var e$i,e$R,e$G,e$I,e$w,e$W=e$N._tempArray16_0,e$U=e$N._tempArray16_1,e$e=e$N._tempArray16_2,e$v=e$t+e$t,e$c=e$y+e$y,e$S=e$l+e$l,e$z=e$t*e$v,e$A=e$y*e$v,e$J=e$y*e$c,e$a=e$l*e$v,e$p=e$l*e$c,e$F=e$l*e$S,e$s=e$E*e$v,e$Q=e$E*e$c,e$T=e$E*e$S;for(e$W[15]=1,e$W[0]=1-e$J-e$F,e$W[1]=e$A+e$T,e$W[2]=e$a-e$Q,e$W[4]=e$A-e$T,e$W[5]=1-e$z-e$F,e$W[6]=e$p+e$s,e$W[8]=e$a+e$Q,e$W[9]=e$p-e$s,e$W[10]=1-e$z-e$J,e$U[15]=1,e$U[0]=e$B,e$U[5]=e$o,e$U[10]=e$r,e$i=0;e$i<4;e$i++)e$R=e$W[e$i],e$G=e$W[e$i+4],e$I=e$W[e$i+8],e$w=e$W[e$i+12],e$e[e$i]=e$R,e$e[e$i+4]=e$G,e$e[e$i+8]=e$I,e$e[e$i+12]=e$R*e$D+e$G*e$m+e$I*e$Y+e$w;for(e$i=0;e$i<4;e$i++)e$R=e$e[e$i],e$G=e$e[e$i+4],e$I=e$e[e$i+8],e$w=e$e[e$i+12],e$f[e$i+e$_]=e$R*e$U[0]+e$G*e$U[1]+e$I*e$U[2]+e$w*e$U[3],e$f[e$i+e$_+4]=e$R*e$U[4]+e$G*e$U[5]+e$I*e$U[6]+e$w*e$U[7],e$f[e$i+e$_+8]=e$R*e$U[8]+e$G*e$U[9]+e$I*e$U[10]+e$w*e$U[11],e$f[e$i+e$_+12]=e$R*e$U[12]+e$G*e$U[13]+e$I*e$U[14]+e$w*e$U[15]},e$N._createNodeByJson=function(e$D,e$m,e$Y,e$t){if(!e$Y)switch(e$m.type){case"Sprite3D":e$Y=new e$Lm;break;case"MeshSprite3D":e$Y=new e$Km;break;case"SkinnedMeshSprite3D":e$Y=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":e$Y=new ShuriKenParticle3D;break;case"TrailSprite3D":e$Y=new TrailSprite3D;break;case"Terrain":e$Y=new Terrain;break;case"Camera":e$Y=new e$jm;break;case"DirectionLight":e$Y=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var e$y=e$m.props;if(e$y)for(var e$l in e$y)e$Y[e$l]=e$y[e$l];var e$E=e$m.customProps;e$E&&(e$Y instanceof laya.d3.core.Sprite3D?(e$Y._parseBaseCustomProps(e$E),e$Y._parseCustomProps(e$D,e$t,e$E,e$m),e$Y._parseCustomComponent(e$D,e$t,e$m.components)):e$Y._parseCustomProps(e$D,e$t,e$E,e$m));var e$B=e$m.child;if(e$B)for(var e$o=0,e$r=e$B.length;e$o<e$r;e$o++){var e$f=e$N._createNodeByJson(e$D,e$B[e$o],null,e$t);e$Y.addChild(e$f)}return e$Y},e$N._computeBoneAndAnimationDatasByBindPoseMatrxix=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B,e$o=0,e$r=0,e$f=e$D.length;for(e$E=0;e$E<e$f;e$o+=e$D[e$E].keyframeWidth,e$r+=16,e$E++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e$m[e$o+0],e$m[e$o+1],e$m[e$o+2],e$m[e$o+3],e$m[e$o+4],e$m[e$o+5],e$m[e$o+6],e$m[e$o+7],e$m[e$o+8],e$m[e$o+9],e$t,e$r),0!=e$E&&(e$B=16*e$D[e$E].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(e$t,e$B,e$t,e$r,e$t,e$r));var e$_=e$Y.length;for(e$E=0;e$E<e$_;e$E++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$t,16*e$l[e$E],e$Y[e$E],e$y,16*e$E)},e$N._computeAnimationDatasByArrayAndMatrixFast=function(e$D,e$m,e$Y,e$t){for(var e$y=0,e$l=e$D.length;e$y<e$l;e$y++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$m,16*e$t[e$y],e$D[e$y],e$Y,16*e$y)},e$N._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E,e$B=0,e$o=0,e$r=e$D.length;for(e$l=0;e$l<e$r;e$B+=e$D[e$l].keyframeWidth,e$o+=16,e$l++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e$m[e$B+7],e$m[e$B+8],e$m[e$B+9],e$m[e$B+3],e$m[e$B+4],e$m[e$B+5],e$m[e$B+6],e$m[e$B+0],e$m[e$B+1],e$m[e$B+2],e$t,e$o),0!=e$l&&(e$E=16*e$D[e$l].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(e$t,e$E,e$t,e$o,e$t,e$o));var e$f=e$Y.length;for(e$l=0;e$l<e$f;e$l++){var e$_=16*e$l;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$t,e$_,e$Y[e$l],e$y,e$_)}},e$N._computeAnimationDatasByArrayAndMatrixFastOld=function(e$D,e$m,e$Y){for(var e$t=e$D.length,e$y=0;e$y<e$t;e$y++){var e$l=16*e$y;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$m,e$l,e$D[e$y],e$Y,e$l)}},e$N._computeRootAnimationData=function(e$D,e$m,e$Y){for(var e$t=0,e$y=0,e$l=0,e$E=e$D.length;e$t<e$E;e$y+=e$D[e$t].keyframeWidth,e$l+=16,e$t++)laya.d3.utils.Utils3D.createAffineTransformationArray(e$m[e$y+0],e$m[e$y+1],e$m[e$y+2],e$m[e$y+3],e$m[e$y+4],e$m[e$y+5],e$m[e$y+6],e$m[e$y+7],e$m[e$y+8],e$m[e$y+9],e$Y,e$l)},e$N.transformVector3ArrayByQuat=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$Y.elements,e$E=e$D[e$m],e$B=e$D[e$m+1],e$o=e$D[e$m+2],e$r=e$l[0],e$f=e$l[1],e$_=e$l[2],e$i=e$l[3],e$R=e$i*e$E+e$f*e$o-e$_*e$B,e$G=e$i*e$B+e$_*e$E-e$r*e$o,e$I=e$i*e$o+e$r*e$B-e$f*e$E,e$w=-e$r*e$E-e$f*e$B-e$_*e$o;e$t[e$y]=e$R*e$i+e$w*-e$r+e$G*-e$_-e$I*-e$f,e$t[e$y+1]=e$G*e$i+e$w*-e$f+e$I*-e$r-e$R*-e$_,e$t[e$y+2]=e$I*e$i+e$w*-e$_+e$R*-e$f-e$G*-e$r},e$N.mulMatrixByArray=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B,e$o,e$r,e$f;if(e$y===e$Y){for(e$Y=e$N._tempArray16_3,e$E=0;e$E<16;++e$E)e$Y[e$E]=e$y[e$l+e$E];e$t=0}for(e$E=0;e$E<4;e$E++)e$B=e$D[e$m+e$E],e$o=e$D[e$m+e$E+4],e$r=e$D[e$m+e$E+8],e$f=e$D[e$m+e$E+12],e$y[e$l+e$E]=e$B*e$Y[e$t+0]+e$o*e$Y[e$t+1]+e$r*e$Y[e$t+2]+e$f*e$Y[e$t+3],e$y[e$l+e$E+4]=e$B*e$Y[e$t+4]+e$o*e$Y[e$t+5]+e$r*e$Y[e$t+6]+e$f*e$Y[e$t+7],e$y[e$l+e$E+8]=e$B*e$Y[e$t+8]+e$o*e$Y[e$t+9]+e$r*e$Y[e$t+10]+e$f*e$Y[e$t+11],e$y[e$l+e$E+12]=e$B*e$Y[e$t+12]+e$o*e$Y[e$t+13]+e$r*e$Y[e$t+14]+e$f*e$Y[e$t+15]},e$N.mulMatrixByArrayFast=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B,e$o,e$r,e$f;for(e$E=0;e$E<4;e$E++)e$B=e$D[e$m+e$E],e$o=e$D[e$m+e$E+4],e$r=e$D[e$m+e$E+8],e$f=e$D[e$m+e$E+12],e$y[e$l+e$E]=e$B*e$Y[e$t+0]+e$o*e$Y[e$t+1]+e$r*e$Y[e$t+2]+e$f*e$Y[e$t+3],e$y[e$l+e$E+4]=e$B*e$Y[e$t+4]+e$o*e$Y[e$t+5]+e$r*e$Y[e$t+6]+e$f*e$Y[e$t+7],e$y[e$l+e$E+8]=e$B*e$Y[e$t+8]+e$o*e$Y[e$t+9]+e$r*e$Y[e$t+10]+e$f*e$Y[e$t+11],e$y[e$l+e$E+12]=e$B*e$Y[e$t+12]+e$o*e$Y[e$t+13]+e$r*e$Y[e$t+14]+e$f*e$Y[e$t+15]},e$N.mulMatrixByArrayAndMatrixFast=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E,e$B,e$o,e$r,e$f=e$Y.elements,e$_=e$f[0],e$i=e$f[1],e$R=e$f[2],e$G=e$f[3],e$I=e$f[4],e$w=e$f[5],e$W=e$f[6],e$U=e$f[7],e$e=e$f[8],e$v=e$f[9],e$c=e$f[10],e$S=e$f[11],e$z=e$f[12],e$A=e$f[13],e$J=e$f[14],e$a=e$f[15],e$p=e$m,e$F=e$m+4,e$s=e$m+8,e$Q=e$m+12,e$T=e$y,e$N=e$y+4,e$C=e$y+8,e$O=e$y+12;for(e$l=0;e$l<4;e$l++)e$E=e$D[e$p+e$l],e$B=e$D[e$F+e$l],e$o=e$D[e$s+e$l],e$r=e$D[e$Q+e$l],e$t[e$T+e$l]=e$E*e$_+e$B*e$i+e$o*e$R+e$r*e$G,e$t[e$N+e$l]=e$E*e$I+e$B*e$w+e$o*e$W+e$r*e$U,e$t[e$C+e$l]=e$E*e$e+e$B*e$v+e$o*e$c+e$r*e$S,e$t[e$O+e$l]=e$E*e$z+e$B*e$A+e$o*e$J+e$r*e$a},e$N.createAffineTransformationArray=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_){var e$i=e$t+e$t,e$R=e$y+e$y,e$G=e$l+e$l,e$I=e$t*e$i,e$w=e$t*e$R,e$W=e$t*e$G,e$U=e$y*e$R,e$e=e$y*e$G,e$v=e$l*e$G,e$c=e$E*e$i,e$S=e$E*e$R,e$z=e$E*e$G;e$f[e$_+0]=(1-(e$U+e$v))*e$B,e$f[e$_+1]=(e$w+e$z)*e$B,e$f[e$_+2]=(e$W-e$S)*e$B,e$f[e$_+3]=0,e$f[e$_+4]=(e$w-e$z)*e$o,e$f[e$_+5]=(1-(e$I+e$v))*e$o,e$f[e$_+6]=(e$e+e$c)*e$o,e$f[e$_+7]=0,e$f[e$_+8]=(e$W+e$S)*e$r,e$f[e$_+9]=(e$e-e$c)*e$r,e$f[e$_+10]=(1-(e$I+e$U))*e$r,e$f[e$_+11]=0,e$f[e$_+12]=e$D,e$f[e$_+13]=e$m,e$f[e$_+14]=e$Y,e$f[e$_+15]=1},e$N.transformVector3ArrayToVector3ArrayCoordinate=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$N._tempArray4_0,e$E=e$D[e$m+0],e$B=e$D[e$m+1],e$o=e$D[e$m+2],e$r=e$Y.elements;e$l[0]=e$E*e$r[0]+e$B*e$r[4]+e$o*e$r[8]+e$r[12],e$l[1]=e$E*e$r[1]+e$B*e$r[5]+e$o*e$r[9]+e$r[13],e$l[2]=e$E*e$r[2]+e$B*e$r[6]+e$o*e$r[10]+e$r[14],e$l[3]=1/(e$E*e$r[3]+e$B*e$r[7]+e$o*e$r[11]+e$r[15]),e$t[e$y+0]=e$l[0]*e$l[3],e$t[e$y+1]=e$l[1]*e$l[3],e$t[e$y+2]=e$l[2]*e$l[3]},e$N.transformLightingMapTexcoordByUV0Array=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$Y.elements;e$t[e$y+0]=e$D[e$m+0]*e$l[0]+e$l[2],e$t[e$y+1]=(e$D[e$m+1]-1)*e$l[1]+e$l[3]},e$N.transformLightingMapTexcoordByUV1Array=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$Y.elements;e$t[e$y+0]=e$D[e$m+0]*e$l[0]+e$l[2],e$t[e$y+1]=1+e$D[e$m+1]*e$l[1]+e$l[3]},e$N.getURLVerion=function(e$D){var e$m=e$D.indexOf("?");return 0<=e$m?e$D.substr(e$m):null},e$N._quaternionCreateFromYawPitchRollArray=function(e$D,e$m,e$Y,e$t){var e$y=.5*e$Y,e$l=.5*e$m,e$E=.5*e$D,e$B=Math.sin(e$y),e$o=Math.cos(e$y),e$r=Math.sin(e$l),e$f=Math.cos(e$l),e$_=Math.sin(e$E),e$i=Math.cos(e$E);e$t[0]=e$i*e$r*e$o+e$_*e$f*e$B,e$t[1]=e$_*e$f*e$o-e$i*e$r*e$B,e$t[2]=e$i*e$f*e$B-e$_*e$r*e$o,e$t[3]=e$i*e$f*e$o+e$_*e$r*e$B},e$N._createAffineTransformationArray=function(e$D,e$m,e$Y,e$t){var e$y=e$m[0],e$l=e$m[1],e$E=e$m[2],e$B=e$m[3],e$o=e$y+e$y,e$r=e$l+e$l,e$f=e$E+e$E,e$_=e$y*e$o,e$i=e$y*e$r,e$R=e$y*e$f,e$G=e$l*e$r,e$I=e$l*e$f,e$w=e$E*e$f,e$W=e$B*e$o,e$U=e$B*e$r,e$e=e$B*e$f,e$v=e$Y[0],e$c=e$Y[1],e$S=e$Y[2];e$t[0]=(1-(e$G+e$w))*e$v,e$t[1]=(e$i+e$e)*e$v,e$t[2]=(e$R-e$U)*e$v,e$t[3]=0,e$t[4]=(e$i-e$e)*e$c,e$t[5]=(1-(e$_+e$w))*e$c,e$t[6]=(e$I+e$W)*e$c,e$t[7]=0,e$t[8]=(e$R+e$U)*e$S,e$t[9]=(e$I-e$W)*e$S,e$t[10]=(1-(e$_+e$G))*e$S,e$t[11]=0,e$t[12]=e$D[0],e$t[13]=e$D[1],e$t[14]=e$D[2],e$t[15]=1},e$N._mulMatrixArray=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r=e$m.elements,e$f=e$r[0],e$_=e$r[1],e$i=e$r[2],e$R=e$r[3],e$G=e$r[4],e$I=e$r[5],e$w=e$r[6],e$W=e$r[7],e$U=e$r[8],e$e=e$r[9],e$v=e$r[10],e$c=e$r[11],e$S=e$r[12],e$z=e$r[13],e$A=e$r[14],e$J=e$r[15],e$a=e$t,e$p=e$t+4,e$F=e$t+8,e$s=e$t+12;for(e$y=0;e$y<4;e$y++)e$l=e$D[e$y],e$E=e$D[e$y+4],e$B=e$D[e$y+8],e$o=e$D[e$y+12],e$Y[e$a+e$y]=e$l*e$f+e$E*e$_+e$B*e$i+e$o*e$R,e$Y[e$p+e$y]=e$l*e$G+e$E*e$I+e$B*e$w+e$o*e$W,e$Y[e$F+e$y]=e$l*e$U+e$E*e$e+e$B*e$v+e$o*e$c,e$Y[e$s+e$y]=e$l*e$S+e$E*e$z+e$B*e$A+e$o*e$J},e$N.getYawPitchRoll=function(e$D,e$m){e$N.transformQuat(e$om.ForwardRH,e$D,e$ym.TEMPVector31),e$N.transformQuat(e$om.Up,e$D,e$ym.TEMPVector32);var e$Y=e$ym.TEMPVector32.elements;e$N.angleTo(e$om.ZERO,e$ym.TEMPVector31,e$ym.TEMPVector33);var e$t=e$ym.TEMPVector33.elements;e$t[0]==Math.PI/2?(e$t[1]=e$N.arcTanAngle(e$Y[2],e$Y[0]),e$t[2]=0):e$t[0]==-Math.PI/2?(e$t[1]=e$N.arcTanAngle(-e$Y[2],-e$Y[0]),e$t[2]=0):(e$mm.createRotationY(-e$t[1],e$ym.TEMPMatrix0),e$mm.createRotationX(-e$t[0],e$ym.TEMPMatrix1),e$om.transformCoordinate(e$ym.TEMPVector32,e$ym.TEMPMatrix0,e$ym.TEMPVector32),e$om.transformCoordinate(e$ym.TEMPVector32,e$ym.TEMPMatrix1,e$ym.TEMPVector32),e$t[2]=e$N.arcTanAngle(e$Y[1],-e$Y[0])),e$t[1]<=-Math.PI&&(e$t[1]=Math.PI),e$t[2]<=-Math.PI&&(e$t[2]=Math.PI),e$t[1]>=Math.PI&&e$t[2]>=Math.PI&&(e$t[1]=0,e$t[2]=0,e$t[0]=Math.PI-e$t[0]),e$m[0]=e$t[1],e$m[1]=e$t[0],e$m[2]=e$t[2]},e$N.arcTanAngle=function(e$D,e$m){return 0==e$D?1==e$m?Math.PI/2:-Math.PI/2:0<e$D?Math.atan(e$m/e$D):e$D<0?0<e$m?Math.atan(e$m/e$D)+Math.PI:Math.atan(e$m/e$D)-Math.PI:0},e$N.angleTo=function(e$D,e$m,e$Y){e$om.subtract(e$m,e$D,e$ym.TEMPVector30),e$om.normalize(e$ym.TEMPVector30,e$ym.TEMPVector30),e$Y.elements[0]=Math.asin(e$ym.TEMPVector30.y),e$Y.elements[1]=e$N.arcTanAngle(-e$ym.TEMPVector30.z,-e$ym.TEMPVector30.x)},e$N.transformQuat=function(e$D,e$m,e$Y){var e$t=e$Y.elements,e$y=e$D.elements,e$l=e$m,e$E=e$y[0],e$B=e$y[1],e$o=e$y[2],e$r=e$l[0],e$f=e$l[1],e$_=e$l[2],e$i=e$l[3],e$R=e$i*e$E+e$f*e$o-e$_*e$B,e$G=e$i*e$B+e$_*e$E-e$r*e$o,e$I=e$i*e$o+e$r*e$B-e$f*e$E,e$w=-e$r*e$E-e$f*e$B-e$_*e$o;e$t[0]=e$R*e$i+e$w*-e$r+e$G*-e$_-e$I*-e$f,e$t[1]=e$G*e$i+e$w*-e$f+e$I*-e$r-e$R*-e$_,e$t[2]=e$I*e$i+e$w*-e$_+e$R*-e$f-e$G*-e$r},e$N.quaterionNormalize=function(e$D,e$m){var e$Y=e$D[0],e$t=e$D[1],e$y=e$D[2],e$l=e$D[3],e$E=e$Y*e$Y+e$t*e$t+e$y*e$y+e$l*e$l;0<e$E&&(e$E=1/Math.sqrt(e$E),e$m[0]=e$Y*e$E,e$m[1]=e$t*e$E,e$m[2]=e$y*e$E,e$m[3]=e$l*e$E)},e$N.matrix4x4MultiplyFFF=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B;if(e$Y===e$m)for(e$m=new Float32Array(16),e$t=0;e$t<16;++e$t)e$m[e$t]=e$Y[e$t];for(e$t=0;e$t<4;e$t++)e$y=e$D[e$t],e$l=e$D[e$t+4],e$E=e$D[e$t+8],e$B=e$D[e$t+12],e$Y[e$t]=e$y*e$m[0]+e$l*e$m[1]+e$E*e$m[2]+e$B*e$m[3],e$Y[e$t+4]=e$y*e$m[4]+e$l*e$m[5]+e$E*e$m[6]+e$B*e$m[7],e$Y[e$t+8]=e$y*e$m[8]+e$l*e$m[9]+e$E*e$m[10]+e$B*e$m[11],e$Y[e$t+12]=e$y*e$m[12]+e$l*e$m[13]+e$E*e$m[14]+e$B*e$m[15]},e$N.matrix4x4MultiplyMFM=function(e$D,e$m,e$Y){e$N.matrix4x4MultiplyFFF(e$D.elements,e$m,e$Y.elements)},e$_(e$N,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new e$om},"_tempVector3_1",function(){return this._tempVector3_1=new e$om},"_tempVector3_2",function(){return this._tempVector3_2=new e$om},"_tempVector3_3",function(){return this._tempVector3_3=new e$om},"_tempVector3_4",function(){return this._tempVector3_4=new e$om},"_tempVector3_5",function(){return this._tempVector3_5=new e$om},"_tempVector3_6",function(){return this._tempVector3_6=new e$om},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),e$N}(),e$vm=function(){function e$Q(){}return e$R(e$Q,"Laya3D"),e$Q._cancelLoadByUrl=function(e$D){e$c.loader.cancelLoadByUrl(e$D),e$Q._innerFirstLevelLoaderManager.cancelLoadByUrl(e$D),e$Q._innerSecondLevelLoaderManager.cancelLoadByUrl(e$D),e$Q._innerThirdLevelLoaderManager.cancelLoadByUrl(e$D),e$Q._innerFourthLevelLoaderManager.cancelLoadByUrl(e$D)},e$Q._changeWebGLSize=function(e$D,e$m){e$s.onStageResize(e$D,e$m),e$x.clientWidth=e$D,e$x.clientHeight=e$m},e$Q.__init__=function(){var e$D=e$m.createMap;e$D.lh=[e$Lm,"SPRITE3DHIERARCHY"],e$D.ls=[e$um,"SPRITE3DHIERARCHY"],e$D.lm=[e$Hm,"MESH"],e$D.lmat=[e$$m,"MATERIAL"],e$D.jpg=[e$Vm,"nativeimage"],e$D.jpeg=[e$Vm,"nativeimage"],e$D.png=[e$Vm,"nativeimage"],e$D.pkm=[e$Vm,"arraybuffer"],e$D.raw=[e$nm,"arraybuffer"],e$D.mipmaps=[e$nm,"arraybuffer"],e$W.parserMap.SPRITE3DHIERARCHY=e$Q._loadHierarchy,e$W.parserMap.MESH=e$Q._loadMesh,e$W.parserMap.MATERIAL=e$Q._loadMaterial,e$W.parserMap.TEXTURECUBE=e$Q._loadTextureCube,e$W.parserMap.TERRAIN=e$Q._loadTerrain,e$Q._innerFirstLevelLoaderManager.on("error",null,e$Q._eventLoadManagerError),e$Q._innerSecondLevelLoaderManager.on("error",null,e$Q._eventLoadManagerError),e$Q._innerThirdLevelLoaderManager.on("error",null,e$Q._eventLoadManagerError),e$Q._innerFourthLevelLoaderManager.on("error",null,e$Q._eventLoadManagerError)},e$Q.READ_BLOCK=function(){return e$Q._readData.pos+=4,!0},e$Q.READ_DATA=function(){return e$Q._DATA.offset=e$Q._readData.getUint32(),e$Q._DATA.size=e$Q._readData.getUint32(),!0},e$Q.READ_STRINGS=function(){var e$D=[],e$m={offset:0,size:0};e$m.offset=e$Q._readData.getUint16(),e$m.size=e$Q._readData.getUint16();e$Q._readData.pos;e$Q._readData.pos=e$m.offset+e$Q._DATA.offset;for(var e$Y=0;e$Y<e$m.size;e$Y++){var e$t=e$Q._readData.readUTFString();-1===e$t.lastIndexOf(".lmat")&&-1===e$t.lastIndexOf(".lpbr")||e$D.push(e$t)}return e$D},e$Q.formatRelativePath=function(e$D,e$m){var e$Y;if("."===e$m.charAt(0)){for(var e$t=(e$D+e$m).split("/"),e$y=0,e$l=e$t.length;e$y<e$l;e$y++)if(".."==e$t[e$y]){var e$E=e$y-1;0<e$E&&".."!==e$t[e$E]&&(e$t.splice(e$E,2),e$y-=2)}e$Y=e$t.join("/")}else e$Y=e$D+e$m;return null!=e$F.customFormat&&(e$Y=e$F.customFormat(e$Y,null)),e$Y},e$Q._eventLoadManagerError=function(e$D){e$c.loader.event("error",e$D)},e$Q._addHierarchyInnerUrls=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=e$Q.formatRelativePath(e$t,e$y);e$Y&&(e$E+=e$Y),e$D.push({url:e$E,clas:e$l}),e$m[e$y]=e$E},e$Q._getSprite3DHierarchyInnerUrls=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){var e$B,e$o=0,e$r=0;switch(e$D.type){case"Scene":var e$f=e$D.customProps.lightmaps;for(e$o=0,e$r=e$f.length;e$o<e$r;e$o++){var e$_=e$f[e$o].replace(".exr",".png");e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$_,e$Vm)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var e$i;if(e$D.instanceParams)(e$i=e$D.instanceParams.loadPath)&&e$Q._addHierarchyInnerUrls(e$m,e$y,e$l,e$E,e$i,e$Hm);else{(e$i=(e$B=e$D.customProps).meshPath)&&e$Q._addHierarchyInnerUrls(e$m,e$y,e$l,e$E,e$i,e$Hm);var e$R=e$B.materials;if(e$R)for(e$o=0,e$r=e$R.length;e$o<e$r;e$o++){for(var e$G=e$R[e$o],e$I=e$G.type.split("."),e$w=e$T.window,e$W=0,e$U=e$I.length;e$W<e$U;++e$W){e$w=e$w[this.clasPaths[e$W]]}if("function"!=typeof e$w)throw"_getSprite3DHierarchyInnerUrls 错误: "+e$G.type+" 不是类";e$Q._addHierarchyInnerUrls(e$Y,e$y,e$l,e$E,e$G.path,e$w)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var e$e=(e$B=e$D.customProps).meshPath;e$e&&e$Q._addHierarchyInnerUrls(e$m,e$y,e$l,e$E,e$e,e$Hm);var e$v=e$B.material;if(e$v){e$I=e$v.type.split("."),e$w=e$T.window;for(e$W=0,e$U=e$I.length;e$W<e$U;++e$W){e$w=e$w[this.clasPaths[e$W]]}e$Q._addHierarchyInnerUrls(e$Y,e$y,e$l,e$E,e$v.path,e$w)}else{var e$c=e$B.materialPath;if(e$c)e$Q._addHierarchyInnerUrls(e$Y,e$y,e$l,e$E,e$c,ShurikenParticleMaterial);else{var e$S=e$B.texturePath;e$S&&e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$S,e$Vm)}}break;case"Terrain":e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$D.customProps.dataPath,TerrainRes)}var e$z=e$D.components;for(var e$A in e$z){var e$J=e$z[e$A];switch(e$A){case"Animator":var e$a=e$J.avatarPath;if(e$a)e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$a,Avatar);else{var e$p=e$J.avatar;e$p&&e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$p.path,Avatar)}var e$F=e$J.clipPaths;for(e$o=0,e$r=e$F.length;e$o<e$r;e$o++)e$Q._addHierarchyInnerUrls(e$t,e$y,e$l,e$E,e$F[e$o],AnimationClip)}}var e$s=e$D.child;for(e$o=0,e$r=e$s.length;e$o<e$r;e$o++)e$Q._getSprite3DHierarchyInnerUrls(e$s[e$o],e$m,e$Y,e$t,e$y,e$l,e$E)},e$Q._loadHierarchy=function(e$D){e$D.on("loaded",null,e$Q._onHierarchylhLoaded,[e$D,e$D._class._getGroup()]),e$D.load(e$D.url,"json",!1,null,!0)},e$Q._onHierarchylhLoaded=function(e$D,e$m,e$Y){if(e$D._class.destroyed)e$D.endLoad();else{var e$t=e$D.url,e$y=e$em.getURLVerion(e$t),e$l=e$F.getPath(e$t),e$E=[],e$B=[],e$o=[],e$r={};e$Q._getSprite3DHierarchyInnerUrls(e$Y,e$E,e$B,e$o,e$r,e$y,e$l);var e$f=e$E.length+e$B.length+e$o.length,e$_=e$f+1,e$i=1/e$_;if(e$Q._onProcessChange(e$D,0,e$i,1),0<e$o.length){var e$R=e$f/e$_,e$G=e$p.create(null,e$Q._onProcessChange,[e$D,e$i,e$R],!1);e$Q._innerFourthLevelLoaderManager.create(e$o,e$p.create(null,e$Q._onHierarchyInnerForthLevResouLoaded,[e$D,e$m,e$G,e$Y,e$r,e$E,e$B,e$i+e$R*e$o.length,e$R]),e$G,null,null,1,!0,e$m)}else e$Q._onHierarchyInnerForthLevResouLoaded(e$D,e$m,null,e$Y,e$r,e$E,e$B,e$i,e$R)}},e$Q._onHierarchyInnerForthLevResouLoaded=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){if(e$D._class.destroyed)e$D.endLoad();else if(e$Y&&e$Y.recover(),0<e$E.length){var e$r=e$p.create(null,e$Q._onProcessChange,[e$D,e$B,e$o],!1);e$Q._innerSecondLevelLoaderManager.create(e$E,e$p.create(null,e$Q._onHierarchyInnerSecondLevResouLoaded,[e$D,e$m,e$r,e$t,e$y,e$l,e$B+e$o*e$E.length,e$o]),e$Y,null,null,1,!0,e$m)}else e$Q._onHierarchyInnerSecondLevResouLoaded(e$D,e$m,null,e$t,e$y,e$l,e$B,e$o)},e$Q._onHierarchyInnerSecondLevResouLoaded=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){if(e$D._class.destroyed)e$D.endLoad();else if(e$Y&&e$Y.recover(),0<e$l.length){var e$o=e$p.create(null,e$Q._onProcessChange,[e$D,e$E,e$B],!1);e$Q._innerFirstLevelLoaderManager.create(e$l,e$p.create(null,e$Q._onHierarchyInnerFirstLevResouLoaded,[e$D,e$o,e$t,e$y]),e$Y,null,null,1,!0,e$m)}else e$Q._onHierarchyInnerFirstLevResouLoaded(e$D,null,e$t,e$y)},e$Q._onHierarchyInnerFirstLevResouLoaded=function(e$D,e$m,e$Y,e$t){e$m&&e$m.recover(),e$D.endLoad([e$Y,e$t])},e$Q._loadTerrain=function(e$D){e$D.on("loaded",null,e$Q._onTerrainLtLoaded,[e$D,e$D._class._getGroup()]),e$D.load(e$D.url,"json",!1,null,!0)},e$Q._onTerrainLtLoaded=function(e$D,e$m,e$Y){if(e$D._class.destroyed)e$D.endLoad();else{var e$t,e$y,e$l=e$D.url,e$E=e$em.getURLVerion(e$l),e$B=e$F.getPath(e$l),e$o=[],e$r={},e$f=0,e$_=0,e$i=e$Y.heightData;e$t=e$i.url,e$y=e$Q.formatRelativePath(e$B,e$t),e$E&&(e$y+=e$E),e$t=e$r[e$t]=e$y;var e$R=e$Y.detailTexture;for(e$f=0,e$_=e$R.length;e$f<e$_;e$f++)e$o.push({url:e$R[e$f].diffuse});var e$G=e$Y.normalMap;for(e$f=0,e$_=e$G.length;e$f<e$_;e$f++)e$o.push({url:e$G[e$f]});var e$I=e$Y.alphaMap;for(e$f=0,e$_=e$I.length;e$f<e$_;e$f++)e$o.push({url:e$I[e$f],params:[!1,!1,6408,!0]});for(e$f=0,e$_=e$o.length;e$f<e$_;e$f++){var e$w=e$o[e$f].url;e$y=e$Q.formatRelativePath(e$B,e$w),e$E&&(e$y+=e$E),e$o[e$f].url=e$y,e$r[e$w]=e$y}var e$W=e$o.length,e$U=e$W+2,e$e=1/e$U;e$Q._onProcessChange(e$D,0,e$e,1);var e$v={heightMapLoaded:!1,texturesLoaded:!1},e$c=e$p.create(null,e$Q._onProcessChange,[e$D,e$e,e$e],!1);e$Q._innerFourthLevelLoaderManager.create(e$t,e$p.create(null,e$Q._onTerrainHeightMapLoaded,[e$D,e$c,e$Y,e$r,e$v]),e$c,null,[e$i.numX,e$i.numZ,e$i.bitType,e$i.value],1,!0,e$m);var e$S=e$p.create(null,e$Q._onProcessChange,[e$D,2*e$e,e$W/e$U],!1);e$Q._innerFourthLevelLoaderManager.create(e$o,e$p.create(null,e$Q._onTerrainTexturesLoaded,[e$D,e$S,e$Y,e$r,e$v]),e$S,null,null,1,!0,e$m)}},e$Q._onTerrainHeightMapLoaded=function(e$D,e$m,e$Y,e$t,e$y){e$y.heightMapLoaded=!0,e$y.texturesLoaded&&(e$D.endLoad([e$Y,e$t]),e$m.recover())},e$Q._onTerrainTexturesLoaded=function(e$D,e$m,e$Y,e$t,e$y){e$y.texturesLoaded=!0,e$y.heightMapLoaded&&(e$D.endLoad([e$Y,e$t]),e$m.recover())},e$Q._loadMesh=function(e$D){e$D.on("loaded",null,e$Q._onMeshLmLoaded,[e$D,e$D._class._getGroup()]),e$D.load(e$D.url,"arraybuffer",!1,null,!0)},e$Q._onMeshLmLoaded=function(e$D,e$m,e$Y){if(e$D._class.destroyed)e$D.endLoad();else{var e$t,e$y,e$l,e$E=e$D.url,e$B=e$em.getURLVerion(e$E),e$o=e$F.getPath(e$E),e$r={},e$f=0,e$_=0;switch((e$Q._readData=new e$S(e$Y)).pos=0,e$Q._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var e$i=e$Q._readData.getUint32();e$Q._readData.pos=e$Q._readData.pos+4,e$_=e$Q._readData.getUint16(),e$Q._readData.pos=e$Q._readData.pos+8*e$_;var e$R=e$Q._readData.getUint32();for(e$_=e$Q._readData.getUint16(),e$Q._readData.pos=e$i+e$R,e$t=[],e$f=0;e$f<e$_;e$f++){var e$G=e$Q._readData.readUTFString();-1!==e$G.lastIndexOf(".lmat")&&e$t.push(e$G)}break;default:for(e$Q.READ_BLOCK(),e$f=0;e$f<2;e$f++){var e$I=e$Q._readData.getUint16(),e$w=e$Q._strings[e$I],e$W=e$Q["READ_"+e$w];if(null==e$W)throw new Error("model file err,no this function:"+e$I+" "+e$w);1===e$f?e$t=e$W.call():e$W.call()}}for(e$f=0,e$l=e$t.length;e$f<e$l;e$f++){var e$U=e$t[e$f];e$y=e$Q.formatRelativePath(e$o,e$U),e$B&&(e$y+=e$B),e$t[e$f]=e$y,e$r[e$U]=e$y}if(0<e$t.length){e$Q._onProcessChange(e$D,0,.5,1);var e$e=e$p.create(null,e$Q._onProcessChange,[e$D,.5,.5],!1);e$Q._innerSecondLevelLoaderManager.create(e$t,e$p.create(null,e$Q._onMeshMateialLoaded,[e$D,e$e,e$Y,e$r]),e$e,null,null,1,!0,e$m)}else e$D.endLoad([e$Y,e$r])}},e$Q._onMeshMateialLoaded=function(e$D,e$m,e$Y,e$t){e$D.endLoad([e$Y,e$t]),e$m.recover()},e$Q._getMaterialTexturePath=function(e$D,e$m,e$Y){var e$t=e$D.length-4;return e$D.indexOf(".dds")!=e$t&&e$D.indexOf(".tga")!=e$t&&e$D.indexOf(".exr")!=e$t&&e$D.indexOf(".DDS")!=e$t&&e$D.indexOf(".TGA")!=e$t&&e$D.indexOf(".EXR")!=e$t||(e$D=e$D.substr(0,e$t)+".png"),e$D=e$Q.formatRelativePath(e$Y,e$D),e$m&&(e$D+=e$m),e$D},e$Q._loadMaterial=function(e$D){e$D.on("loaded",null,e$Q._onMaterilLmatLoaded,[e$D,e$D._class._getGroup()]),e$D.load(e$D.url,"json",!1,null,!0)},e$Q._onMaterilLmatLoaded=function(e$D,e$m,e$Y){if(e$D._class.destroyed)e$D.endLoad();else{var e$t,e$y=e$D.url,e$l=e$em.getURLVerion(e$y),e$E=e$F.getPath(e$y),e$B=[],e$o={},e$r=e$Y.customProps,e$f=e$Y.version;if(e$f)switch(e$f){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var e$_=e$Y.props.textures,e$i=0,e$R=e$_.length;e$i<e$R;e$i++){var e$G=e$_[e$i],e$I=e$G.path;if(e$I){var e$w=e$I.length-4;e$I.indexOf(".exr")!=e$w&&e$I.indexOf(".EXR")!=e$w||(e$I=e$I.substr(0,e$w)+".png"),e$t=e$Q.formatRelativePath(e$E,e$I),e$l&&(e$t+=e$l),e$B.push({url:e$t,params:e$G.params}),e$o[e$I]=e$t}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var e$W=e$r.diffuseTexture.texture2D;if(e$W&&(e$t=e$Q._getMaterialTexturePath(e$W,e$l,e$E),e$B.push(e$t),e$o[e$W]=e$t),e$r.normalTexture){var e$U=e$r.normalTexture.texture2D;e$U&&(e$t=e$Q._getMaterialTexturePath(e$U,e$l,e$E),e$B.push(e$t),e$o[e$U]=e$t)}if(e$r.specularTexture){var e$e=e$r.specularTexture.texture2D;e$e&&(e$t=e$Q._getMaterialTexturePath(e$e,e$l,e$E),e$B.push(e$t),e$o[e$e]=e$t)}if(e$r.emissiveTexture){var e$v=e$r.emissiveTexture.texture2D;e$v&&(e$t=e$Q._getMaterialTexturePath(e$v,e$l,e$E),e$B.push(e$t),e$o[e$v]=e$t)}if(e$r.ambientTexture){var e$c=e$r.ambientTexture.texture2D;e$c&&(e$t=e$Q._getMaterialTexturePath(e$c,e$l,e$E),e$B.push(e$t),e$o[e$c]=e$t)}if(e$r.reflectTexture){var e$S=e$r.reflectTexture.texture2D;e$S&&(e$t=e$Q._getMaterialTexturePath(e$S,e$l,e$E),e$B.push(e$t),e$o[e$S]=e$t)}}var e$z=e$B.length,e$A=e$z+1,e$J=1/e$A;if(e$Q._onProcessChange(e$D,0,e$J,1),0<e$z){var e$a=e$p.create(null,e$Q._onProcessChange,[e$D,e$J,e$z/e$A],!1);e$Q._innerFourthLevelLoaderManager.create(e$B,e$p.create(null,e$Q._onMateialTexturesLoaded,[e$D,e$a,e$Y,e$o]),e$a,e$Vm,null,1,!0,e$m)}else e$Q._onMateialTexturesLoaded(e$D,null,e$Y,null)}},e$Q._onMateialTexturesLoaded=function(e$D,e$m,e$Y,e$t){e$D.endLoad([e$Y,e$t]),e$m&&e$m.recover()},e$Q._loadTextureCube=function(e$D){e$D.on("loaded",null,e$Q._onTextureCubeLtcLoaded,[e$D]),e$D.load(e$D.url,"json",!1,null,!0)},e$Q._onTextureCubeLtcLoaded=function(e$D,e$m){if(e$D._class.destroyed)e$D.endLoad();else{var e$Y=e$F.getPath(e$D.url),e$t=[e$Q.formatRelativePath(e$Y,e$m.px),e$Q.formatRelativePath(e$Y,e$m.nx),e$Q.formatRelativePath(e$Y,e$m.py),e$Q.formatRelativePath(e$Y,e$m.ny),e$Q.formatRelativePath(e$Y,e$m.pz),e$Q.formatRelativePath(e$Y,e$m.nz)];e$Q._onProcessChange(e$D,0,1/7,1);var e$y=e$p.create(null,e$Q._onProcessChange,[e$D,1/7,6/7],!1);e$Q._innerFourthLevelLoaderManager.load(e$t,e$p.create(null,e$Q._onTextureCubeImagesLoaded,[e$D,e$t,e$y]),e$y,"nativeimage")}},e$Q._onTextureCubeImagesLoaded=function(e$D,e$m,e$Y){var e$t=[];e$t.length=6;for(var e$y=0;e$y<6;e$y++){var e$l=e$m[e$y];e$t[e$y]=e$W.getRes(e$l),e$W.clearRes(e$l)}e$D.endLoad(e$t),e$Y.recover()},e$Q._onProcessChange=function(e$D,e$m,e$Y,e$t){(e$t=e$m+e$t*e$Y)<1&&e$D.event("progress",e$t)},e$Q.init=function(e$D,e$m,e$Y,e$t,e$y,e$l){if(void 0===e$Y&&(e$Y=!1),void 0===e$t&&(e$t=!1),void 0===e$y&&(e$y=!0),void 0===e$l&&(e$l=!0),e$U.update3DLoop=function(){},e$U.cancelLoadByUrl=function(e$D){e$Q._cancelLoadByUrl(e$D)},e$r.isAntialias=e$Y,e$r.isAlpha=e$t,e$r.premultipliedAlpha=e$y,e$r.isStencil=e$l,!e$s.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");e$U.changeWebGLSize=e$Q._changeWebGLSize,e$I.is3DMode=!0,e$c.init(e$D,e$m),e$N.__init__(),e$Rm.__init__(),e$Km.__init__(),e$q.__init__(),e$Q.__init__(),e$E.maxTextureCount=2,(e$Q.debugMode||e$V.debugMode)&&(e$Q._debugPhasorSprite=new e$n)},e$Q.HIERARCHY="SPRITE3DHIERARCHY",e$Q.MESH="MESH",e$Q.MATERIAL="MATERIAL",e$Q.PBRMATERIAL="PBRMTL",e$Q.TEXTURECUBE="TEXTURECUBE",e$Q.TERRAIN="TERRAIN",e$Q._readData=null,e$Q._debugPhasorSprite=null,e$Q.debugMode=!1,e$_(e$Q,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new e$m},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new e$m},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new e$m},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new e$m}]),e$Q}(),e$cm=function(e$D){function e$y(e$D){e$y.__super.call(this),this._owner=e$D,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}e$R(e$y,"laya.d3.animation.AnimationTransform3D",e$l);var e$m=e$y.prototype;return e$m._getlocalMatrix=function(){return this._localUpdate&&(e$em._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},e$m._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldTransform()}},e$m._setWorldMatrixAndUpdate=function(e$D){if(this._worldMatrix=e$D,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var e$m=this._getlocalMatrix(),e$Y=0;e$Y<16;++e$Y)this._worldMatrix[e$Y]=e$m[e$Y];else e$em.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},e$m._setWorldMatrixNoUpdate=function(e$D){this._worldMatrix=e$D},e$m._setWorldMatrixIgnoreUpdate=function(e$D){this._worldMatrix=e$D,this._worldUpdate=!1},e$m.getLocalPosition=function(){return this._localPosition},e$m.setLocalPosition=function(e$D){if(this._parent)this._localPosition=e$D,this._localUpdate=!0,this._onWorldTransform();else{var e$m=this._entity.owner._transform,e$Y=this._entity.localPosition,e$t=e$Y.elements;e$t[0]=e$D[0],e$t[1]=e$D[1],e$t[2]=e$D[2],e$m.localPosition=e$Y}},e$m.getLocalRotation=function(){if(this._localQuaternionUpdate){var e$D=this._localRotationEuler;e$em._quaternionCreateFromYawPitchRollArray(e$D[1]/e$y._angleToRandin,e$D[0]/e$y._angleToRandin,e$D[2]/e$y._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},e$m.setLocalRotation=function(e$D){if(this._parent)this._localRotation=e$D,e$em.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var e$m=this._entity.owner._transform,e$Y=this._entity.localRotation,e$t=e$Y.elements;e$t[0]=e$D[0],e$t[1]=e$D[1],e$t[2]=e$D[2],e$t[3]=e$D[3],e$m.localRotation=e$Y}},e$m.getLocalScale=function(){return this._localScale},e$m.setLocalScale=function(e$D){if(this._parent)this._localScale=e$D,this._localUpdate=!0,this._onWorldTransform();else{var e$m=this._entity.owner._transform,e$Y=this._entity.localScale,e$t=e$Y.elements;e$t[0]=e$D[0],e$t[1]=e$D[1],e$t[2]=e$D[2],e$m.localScale=e$Y}},e$m.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){e$em.getYawPitchRoll(this._localRotation,e$y._tempVector3);var e$D=e$y._tempVector3,e$m=this._localRotationEuler;e$m[0]=e$D[1]*e$y._angleToRandin,e$m[1]=e$D[0]*e$y._angleToRandin,e$m[2]=e$D[2]*e$y._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},e$m.setLocalRotationEuler=function(e$D){if(this._parent)e$em._quaternionCreateFromYawPitchRollArray(e$D[1]/e$y._angleToRandin,e$D[0]/e$y._angleToRandin,e$D[2]/e$y._angleToRandin,this._localRotation),this._localRotationEuler=e$D,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var e$m=this._entity.owner._transform,e$Y=this._entity.localRotationEuler,e$t=e$Y.elements;e$t[0]=e$D[0],e$t[1]=e$D[1],e$t[2]=e$D[2],e$m.localRotationEuler=e$Y}},e$m.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)e$em.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var e$D=this._getlocalMatrix(),e$m=0;e$m<16;++e$m)this._worldMatrix[e$m]=e$D[e$m];this._worldUpdate=!1}return this._worldMatrix},e$m.setParent=function(e$D){if(this._parent!==e$D){if(this._parent){var e$m=this._parent._childs,e$Y=e$m.indexOf(this);e$m.splice(e$Y,1)}e$D&&(e$D._childs.push(this),e$D&&this._onWorldTransform()),this._parent=e$D}},e$_(e$y,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),e$y}(),e$Sm=function(e$D){function e$m(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,e$m.__super.call(this),this._destroyed=!1,this._id=e$m._uniqueIDCounter,e$m._uniqueIDCounter++}e$R(e$m,"laya.d3.component.Component3D",e$l);var e$Y=e$m.prototype;return e$c.imps(e$Y,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),e$Y._initialize=function(e$D){this._owner=e$D,this._enable=!0,this.started=!1,this._load(e$D)},e$Y._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},e$Y._load=function(e$D){},e$Y._start=function(e$D){},e$Y._update=function(e$D){},e$Y._lateUpdate=function(e$D){},e$Y._preRenderUpdate=function(e$D){},e$Y._postRenderUpdate=function(e$D){},e$Y._unload=function(e$D){this.offAll()},e$Y._cloneTo=function(e$D){},e$G(0,e$Y,"id",function(){return this._id}),e$G(0,e$Y,"destroyed",function(){return this._destroyed}),e$G(0,e$Y,"owner",function(){return this._owner}),e$G(0,e$Y,"enable",function(){return this._enable},function(e$D){this._enable!==e$D&&(this._enable=e$D,this.event("enablechanged",this._enable))}),e$G(0,e$Y,"isSingleton",function(){return e$m._isSingleton}),e$m._isSingleton=!0,e$m._uniqueIDCounter=1,e$m}(),e$zm=function(e$D){function e$m(){this._destroyed=!1,e$m.__super.call(this),this._destroyed=!1}e$R(e$m,"laya.d3.core.GeometryFilter",e$l);var e$Y=e$m.prototype;return e$c.imps(e$Y,{"laya.resource.IDestroy":!0}),e$Y._destroy=function(){this.offAll(),this._destroyed=!0},e$G(0,e$Y,"_isAsyncLoaded",function(){return!0}),e$G(0,e$Y,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),e$G(0,e$Y,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),e$G(0,e$Y,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),e$G(0,e$Y,"destroyed",function(){return this._destroyed}),e$m}(),e$Am=function(e$D){function e$t(e$D){e$t.__super.call(this),this._id=++e$t._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new e$VD(new e$om,new e$om),this._boundingBoxCenter=new e$om,this._boundingSphere=new e$bD(new e$om,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=e$D,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}e$R(e$t,"laya.d3.core.render.BaseRender",e$l);var e$m=e$t.prototype;return e$c.imps(e$m,{"laya.resource.IDestroy":!0}),e$m._changeMaterialReference=function(e$D,e$m){e$D&&e$D._removeReference(),e$m._addReference()},e$m._getInstanceMaterial=function(e$D,e$m){var e$Y=new e$D.constructor;return e$D.cloneTo(e$Y),e$Y.name=e$Y.name+"(Instance)",this._materialsInstance[e$m]=!0,this._changeMaterialReference(this._materials[e$m],e$Y),this._materials[e$m]=e$Y},e$m._setShaderValuelightMap=function(e$D){this._setShaderValueTexture(3,e$D)},e$m._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},e$m._renderRenderableBoundBox=function(){var e$D=e$vm._debugPhasorSprite,e$m=this.boundingBox,e$Y=e$t._tempBoundBoxCorners;e$m.getCorners(e$Y),e$D.line(e$Y[0],e$t._greenColor,e$Y[1],e$t._greenColor),e$D.line(e$Y[2],e$t._greenColor,e$Y[3],e$t._greenColor),e$D.line(e$Y[4],e$t._greenColor,e$Y[5],e$t._greenColor),e$D.line(e$Y[6],e$t._greenColor,e$Y[7],e$t._greenColor),e$D.line(e$Y[0],e$t._greenColor,e$Y[3],e$t._greenColor),e$D.line(e$Y[1],e$t._greenColor,e$Y[2],e$t._greenColor),e$D.line(e$Y[2],e$t._greenColor,e$Y[6],e$t._greenColor),e$D.line(e$Y[3],e$t._greenColor,e$Y[7],e$t._greenColor),e$D.line(e$Y[0],e$t._greenColor,e$Y[4],e$t._greenColor),e$D.line(e$Y[1],e$t._greenColor,e$Y[5],e$t._greenColor),e$D.line(e$Y[4],e$t._greenColor,e$Y[7],e$t._greenColor),e$D.line(e$Y[5],e$t._greenColor,e$Y[6],e$t._greenColor)},e$m._calculateBoundingSphere=function(){throw"BaseRender: must override it."},e$m._calculateBoundingBox=function(){throw"BaseRender: must override it."},e$m._setShaderValueTexture=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m)},e$m._setShaderValueMatrix4x4=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m?e$m.elements:null)},e$m._setShaderValueColor=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m?e$m.elements:null)},e$m._setShaderValueBuffer=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m)},e$m._setShaderValueInt=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m)},e$m._setShaderValueBool=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m)},e$m._setShaderValueNumber=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m)},e$m._setShaderValueVector2=function(e$D,e$m){this._owner._shaderValues.setValue(e$D,e$m?e$m.elements:null)},e$m._addShaderDefine=function(e$D){this._owner._shaderDefineValue|=e$D},e$m._removeShaderDefine=function(e$D){this._owner._shaderDefineValue&=~e$D},e$m._renderUpdate=function(e$D){return!0},e$m._applyLightMapParams=function(){if(0<=this._lightmapIndex){var e$D=this._owner.scene;if(e$D){var e$m=e$D.getlightmaps()[this._lightmapIndex];e$m?(this._addShaderDefine(e$bm.SAHDERDEFINE_LIGHTMAP),e$m.loaded?this._setShaderValuelightMap(e$m):e$m.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(e$bm.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(e$bm.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(e$bm.SAHDERDEFINE_LIGHTMAP)},e$m._updateOctreeNode=function(){var e$D=this._treeNode;e$D&&this._octreeNodeNeedChange&&(e$D.updateObject(this),this._octreeNodeNeedChange=!1)},e$m._destroy=function(){this.offAll();var e$D=0,e$m=0;for(e$D=0,e$m=this._renderElements.length;e$D<e$m;e$D++)this._renderElements[e$D]._destroy();for(e$D=0,e$m=this._materials.length;e$D<e$m;e$D++)this._materials[e$D]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},e$G(0,e$m,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),e$G(0,e$m,"id",function(){return this._id}),e$G(0,e$m,"material",function(){var e$D=this._materials[0];if(e$D&&!this._materialsInstance[0]){var e$m=this._getInstanceMaterial(e$D,0);this.event("materialchanged",[this,0,e$m])}return this._materials[0]},function(e$D){this.sharedMaterial=e$D}),e$G(0,e$m,"sharedMaterial",function(){return this._materials[0]},function(e$D){var e$m=this._materials[0];e$m!==e$D&&(this._materials[0]=e$D,this._materialsInstance[0]=!1,this._changeMaterialReference(e$m,e$D),this.event("materialchanged",[this,0,e$D]))}),e$G(0,e$m,"lightmapIndex",function(){return this._lightmapIndex},function(e$D){this._lightmapIndex=e$D,this._applyLightMapParams()}),e$G(0,e$m,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(e$D){this._lightmapScaleOffset=e$D,this._setShaderValueColor(2,e$D),this._addShaderDefine(e$bm.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),e$G(0,e$m,"enable",function(){return this._enable},function(e$D){this._enable=e$D,this.event("enablechanged",[this,e$D])}),e$G(0,e$m,"materials",function(){for(var e$D=0,e$m=this._materials.length;e$D<e$m;e$D++)if(!this._materialsInstance[e$D]){var e$Y=this._getInstanceMaterial(this._materials[e$D],e$D);this.event("materialchanged",[this,e$D,e$Y])}return this._materials.slice()},function(e$D){this.sharedMaterials=e$D}),e$G(0,e$m,"sharedMaterials",function(){return this._materials.slice()},function(e$D){if(!e$D)throw new Error("MeshRender: shadredMaterials value can't be null.");var e$m=e$D.length;this._materialsInstance.length=e$m;for(var e$Y=0;e$Y<e$m;e$Y++){var e$t=this._materials[e$Y];e$t!==e$D[e$Y]&&(this._materialsInstance[e$Y]=!1,this._changeMaterialReference(e$t,e$D[e$Y]),this.event("materialchanged",[this,e$Y,e$D[e$Y]]))}this._materials=e$D}),e$G(0,e$m,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),e$G(0,e$m,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var e$D=this.boundingBox;e$om.add(e$D.min,e$D.max,this._boundingBoxCenter),e$om.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),e$G(0,e$m,"receiveShadow",function(){return this._receiveShadow},function(e$D){this._receiveShadow!==e$D&&((this._receiveShadow=e$D)?this._addShaderDefine(e$Im.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(e$Im.SHADERDEFINE_RECEIVE_SHADOW))}),e$G(0,e$m,"destroyed",function(){return this._destroyed}),e$t._uniqueIDCounter=0,e$_(e$t,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om,new e$om]},"_greenColor",function(){return this._greenColor=new e$rm(0,1,0,1)}]),e$t}(),e$Jm=function(e$D){function e$B(e$D){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,e$B.__super.call(this),this._localPosition=new e$om,this._localRotation=new e$ym(0,0,0,1),this._localScale=new e$om(1,1,1),this._localRotationEuler=new e$om,this._localMatrix=new e$mm,this._position=new e$om,this._rotation=new e$ym(0,0,0,1),this._scale=new e$om(1,1,1),this._worldMatrix=new e$mm,this._forward=new e$om,this._up=new e$om,this._right=new e$om,this._owner=e$D,this._childs=[]}e$R(e$B,"laya.d3.core.Transform3D",e$l);var e$m=e$B.prototype;return e$m._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)e$mm.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var e$D=e$B._tempVector30;e$om.multiply(this.pivot,this._localScale,e$D);var e$m=e$B._tempVector31;e$om.subtract(e$D,this.pivot,e$m);var e$Y=e$B._tempVector32,e$t=this.localRotation;e$om.transformQuat(e$D,e$t,e$Y),e$om.subtract(e$Y,e$D,e$Y);var e$y=e$B._tempVector33;e$om.subtract(this._localPosition,e$m,e$y),e$om.subtract(e$y,e$Y,e$y),e$mm.createAffineTransformation(e$y,e$t,this._localScale,this._localMatrix)}},e$m._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldPositionRotationTransform()}},e$m._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldPositionScaleTransform()}},e$m._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldPositionTransform()}},e$m._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldPositionRotationTransform()}},e$m._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldPositionScaleTransform()}},e$m._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._onWorldTransform()}},e$m.translate=function(e$D,e$m){void 0===e$m&&(e$m=!0),e$m?(e$mm.createFromQuaternion(this.localRotation,e$B._tempMatrix0),e$om.transformCoordinate(e$D,e$B._tempMatrix0,e$B._tempVector30),e$om.add(this.localPosition,e$B._tempVector30,this._localPosition),this.localPosition=this._localPosition):(e$om.add(this.position,e$D,this._position),this.position=this._position)},e$m.rotate=function(e$D,e$m,e$Y){var e$t;void 0===e$m&&(e$m=!0),void 0===e$Y&&(e$Y=!0),e$t=e$Y?e$D:(e$om.scale(e$D,Math.PI/180,e$B._tempVector30),e$B._tempVector30),e$ym.createFromYawPitchRoll(e$t.y,e$t.x,e$t.z,e$B._tempQuaternion0),e$m?(e$ym.multiply(this._localRotation,e$B._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(e$ym.multiply(e$B._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},e$m.lookAt=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=!1);var e$t,e$y=e$D.elements;if(e$Y){if(e$t=this._localPosition.elements,Math.abs(e$t[0]-e$y[0])<e$KD.zeroTolerance&&Math.abs(e$t[1]-e$y[1])<e$KD.zeroTolerance&&Math.abs(e$t[2]-e$y[2])<e$KD.zeroTolerance)return;e$ym.lookAt(this._localPosition,e$D,e$m,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var e$l=this.position;if(e$t=e$l.elements,Math.abs(e$t[0]-e$y[0])<e$KD.zeroTolerance&&Math.abs(e$t[1]-e$y[1])<e$KD.zeroTolerance&&Math.abs(e$t[2]-e$y[2])<e$KD.zeroTolerance)return;e$ym.lookAt(e$l,e$D,e$m,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},e$G(0,e$m,"_isFrontFaceInvert",function(){var e$D=this.scale,e$m=e$D.x<0;return e$D.y<0&&(e$m=!e$m),e$D.z<0&&(e$m=!e$m),e$m}),e$G(0,e$m,"owner",function(){return this._owner}),e$G(0,e$m,"localRotation",function(){if(this._localQuaternionUpdate){var e$D=this._localRotationEuler.elements;e$ym.createFromYawPitchRoll(e$D[1]/e$B._angleToRandin,e$D[0]/e$B._angleToRandin,e$D[2]/e$B._angleToRandin,this._localRotation)}return this._localRotation},function(e$D){this._localRotation=e$D,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),e$G(0,e$m,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?e$mm.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(e$D){null===this._parent?e$D.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),e$mm.multiply(this._localMatrix,e$D,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=e$D,this._worldUpdate=!1}),e$G(0,e$m,"worldNeedUpdate",function(){return this._worldUpdate}),e$G(0,e$m,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(e$D){this._localMatrix=e$D,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),e$G(0,e$m,"dummy",function(){return this._dummy},function(e$D){this._dummy!==e$D&&(this._dummy&&(this._dummy._entity=null),e$D&&(e$D._entity=this),this._dummy=e$D)}),e$G(0,e$m,"localPosition",function(){return this._localPosition},function(e$D){this._localPosition=e$D,this._localUpdate=!0,this._onWorldPositionTransform()}),e$G(0,e$m,"position",function(){if(this._positionUpdate){if(null!=this._parent){var e$D=this._parent.position;e$om.multiply(this._localPosition,this._parent.scale,e$B._tempVector30),e$om.transformQuat(e$B._tempVector30,this._parent.rotation,e$B._tempVector30),e$om.add(e$D,e$B._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(e$D){if(null!=this._parent){e$om.subtract(e$D,this._parent.position,this._localPosition);var e$m=this._parent.scale.elements,e$Y=e$m[0],e$t=e$m[1],e$y=e$m[2];if(1!==e$Y||1!==e$t||1!==e$y){var e$l=e$B._tempVector30,e$E=e$l.elements;e$E[0]=1/e$Y,e$E[1]=1/e$t,e$E[2]=1/e$y,e$om.multiply(this._localPosition,e$l,this._localPosition)}this._parent.rotation.invert(e$B._tempQuaternion0),e$om.transformQuat(this._localPosition,e$B._tempQuaternion0,this._localPosition)}else e$D.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=e$D,this._positionUpdate=!1}),e$G(0,e$m,"localScale",function(){return this._localScale},function(e$D){this._localScale=e$D,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),e$G(0,e$m,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(e$B._tempVector30);var e$D=e$B._tempVector30.elements,e$m=this._localRotationEuler.elements;e$m[0]=e$D[1]*e$B._angleToRandin,e$m[1]=e$D[0]*e$B._angleToRandin,e$m[2]=e$D[2]*e$B._angleToRandin}return this._localRotationEuler},function(e$D){this._localRotationEuler=e$D,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),e$G(0,e$m,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?e$ym.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(e$D){null!=this._parent?(this._parent.rotation.invert(e$B._tempQuaternion0),e$ym.multiply(e$D,e$B._tempQuaternion0,this._localRotation)):e$D.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=e$D,this._rotationUpdate=!1}),e$G(0,e$m,"scale",function(){return this._scaleUpdate&&(null!==this._parent?e$om.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(e$D){if(null!==this._parent){var e$m=this._parent.scale.elements,e$Y=e$B._tempVector30.elements;e$Y[0]=1/e$m[0],e$Y[1]=1/e$m[1],e$Y[2]=1/e$m[2],e$om.multiply(e$D,e$B._tempVector30,this._localScale)}else e$D.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=e$D,this._scaleUpdate=!1}),e$G(0,e$m,"rotationEuler",null,function(e$D){e$ym.createFromYawPitchRoll(e$D.y,e$D.x,e$D.z,this._rotation),this.rotation=this._rotation}),e$G(0,e$m,"forward",function(){var e$D=this.worldMatrix.elements;return this._forward.elements[0]=-e$D[8],this._forward.elements[1]=-e$D[9],this._forward.elements[2]=-e$D[10],this._forward}),e$G(0,e$m,"up",function(){var e$D=this.worldMatrix.elements;return this._up.elements[0]=e$D[4],this._up.elements[1]=e$D[5],this._up.elements[2]=e$D[6],this._up}),e$G(0,e$m,"right",function(){var e$D=this.worldMatrix.elements;return this._right.elements[0]=e$D[0],this._right.elements[1]=e$D[1],this._right.elements[2]=e$D[2],this._right}),e$G(0,e$m,"parent",function(){return this._parent},function(e$D){if(this._parent!==e$D){if(this._parent){var e$m=this._parent._childs,e$Y=e$m.indexOf(this);e$m.splice(e$Y,1)}e$D&&(e$D._childs.push(this),e$D&&this._onWorldTransform()),this._parent=e$D}}),e$_(e$B,["_tempVector30",function(){return this._tempVector30=new e$om},"_tempVector31",function(){return this._tempVector31=new e$om},"_tempVector32",function(){return this._tempVector32=new e$om},"_tempVector33",function(){return this._tempVector33=new e$om},"_tempQuaternion0",function(){return this._tempQuaternion0=new e$ym},"_tempMatrix0",function(){return this._tempMatrix0=new e$mm},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),e$B}(),e$am=(function(e$D){function e$m(){this._rotation=0,this._matNeedUpdte=!1,e$m.__super.call(this),this._matrix=new e$mm,this._offset=new e$Bm,this._tiling=new e$Bm(1,1)}e$R(e$m,"laya.d3.core.TransformUV",e$l);var e$Y=e$m.prototype;e$c.imps(e$Y,{"laya.d3.core.IClone":!0}),e$Y._updateMatrix=function(){e$m._tempOffsetV3.elements[0]=this._offset.x,e$m._tempOffsetV3.elements[1]=this._offset.y,e$ym.createFromYawPitchRoll(0,0,this._rotation,e$m._tempRotationQua),e$m._tempTitlingV3.elements[0]=this._tiling.x,e$m._tempTitlingV3.elements[1]=this._tiling.y,e$mm.createAffineTransformation(e$m._tempOffsetV3,e$m._tempRotationQua,e$m._tempTitlingV3,this._matrix)},e$Y.cloneTo=function(e$D){e$D._matrix=this._matrix.clone(),e$D._offset=this._offset.clone(),e$D._rotation=this._rotation,e$D._tiling=this._tiling.clone()},e$Y.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$Y,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),e$G(0,e$Y,"tiling",function(){return this._tiling},function(e$D){this._tiling=e$D,this._matNeedUpdte=!0}),e$G(0,e$Y,"offset",function(){return this._offset},function(e$D){this._offset=e$D,this._matNeedUpdte=!0}),e$G(0,e$Y,"rotation",function(){return this._rotation},function(e$D){this._rotation=e$D,this._matNeedUpdte=!0}),e$_(e$m,["_tempOffsetV3",function(){return this._tempOffsetV3=new e$om(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new e$ym},"_tempTitlingV3",function(){return this._tempTitlingV3=new e$om(1,1,1)}])}(),function(e$Y){function e$D(){this.x=NaN,this.y=NaN,this.z=NaN,e$D.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}e$R(e$D,"laya.d3.core.particleShuriKen.module.shape.BoxShape",e$Y);var e$m=e$D.prototype;e$m._getShapeBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=.5*-this.x,e$m[1]=.5*-this.y,e$m[2]=.5*-this.z;var e$Y=e$D.max.elements;e$Y[0]=.5*this.x,e$Y[1]=.5*this.y,e$Y[2]=.5*this.z},e$m._getSpeedBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=0,e$m[1]=0,e$m[2]=0;var e$Y=e$D.max.elements;e$Y[0]=0,e$Y[1]=1,e$Y[2]=0},e$m.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements,e$l=e$m.elements;e$Y?(e$Y.seed=e$t[16],e$k._randomPointInsideHalfUnitBox(e$D,e$Y),e$t[16]=e$Y.seed):e$k._randomPointInsideHalfUnitBox(e$D),e$y[0]=this.x*e$y[0],e$y[1]=this.y*e$y[1],e$y[2]=this.z*e$y[2],this.randomDirection?e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m):(e$l[0]=0,e$l[1]=0,e$l[2]=1)},e$m.cloneTo=function(e$D){e$Y.prototype.cloneTo.call(this,e$D);var e$m=e$D;e$m.x=this.x,e$m.y=this.y,e$m.z=this.z,e$m.randomDirection=this.randomDirection}}(e$u),function(e$Y){function e$E(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,e$E.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}e$R(e$E,"laya.d3.core.particleShuriKen.module.shape.CircleShape",e$Y);var e$D=e$E.prototype;e$D._getShapeBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[2]=-this.radius,e$m[1]=0;var e$Y=e$D.max.elements;e$Y[0]=e$Y[2]=this.radius,e$Y[1]=0},e$D._getSpeedBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[1]=-1,e$m[2]=0;var e$Y=e$D.max.elements;e$Y[0]=e$Y[1]=1,e$Y[2]=0},e$D.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements,e$l=e$E._tempPositionPoint.elements;e$Y?(e$Y.seed=e$t[16],this.emitFromEdge?e$k._randomPointUnitArcCircle(this.arc,e$E._tempPositionPoint,e$Y):e$k._randomPointInsideUnitArcCircle(this.arc,e$E._tempPositionPoint,e$Y),e$t[16]=e$Y.seed):this.emitFromEdge?e$k._randomPointUnitArcCircle(this.arc,e$E._tempPositionPoint):e$k._randomPointInsideUnitArcCircle(this.arc,e$E._tempPositionPoint),e$y[0]=-e$l[0],e$y[1]=e$l[1],e$y[2]=0,e$om.scale(e$D,this.radius,e$D),this.randomDirection?e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m):e$D.cloneTo(e$m)},e$D.cloneTo=function(e$D){e$Y.prototype.cloneTo.call(this,e$D);var e$m=e$D;e$m.radius=this.radius,e$m.arc=this.arc,e$m.emitFromEdge=this.emitFromEdge,e$m.randomDirection=this.randomDirection},e$_(e$E,["_tempPositionPoint",function(){return this._tempPositionPoint=new e$Bm}])}(e$u),function(e$Y){function e$i(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,e$i.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}e$R(e$i,"laya.d3.core.particleShuriKen.module.shape.ConeShape",e$Y);var e$D=e$i.prototype;e$D._getShapeBoundBox=function(e$D){var e$m=this.radius+this.length*Math.sin(this.angle),e$Y=this.length*Math.cos(this.angle),e$t=e$D.min.elements;e$t[0]=e$t[1]=-e$m,e$t[2]=0;var e$y=e$D.max.elements;e$y[0]=e$y[1]=e$m,e$y[2]=e$Y},e$D._getSpeedBoundBox=function(e$D){var e$m=Math.sin(this.angle),e$Y=e$D.min.elements;e$Y[0]=e$Y[1]=-e$m,e$Y[2]=0;var e$t=e$D.max.elements;e$t[0]=e$Y[1]=e$m,e$t[2]=1},e$D.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){var e$y,e$l=e$D.elements,e$E=e$m.elements,e$B=e$i._tempPositionPoint.elements,e$o=NaN,e$r=NaN,e$f=Math.cos(this.angle),e$_=Math.sin(this.angle);switch(this.emitType){case 0:e$Y?(e$Y.seed=e$t[16],e$k._randomPointInsideUnitCircle(e$i._tempPositionPoint,e$Y),e$t[16]=e$Y.seed):e$k._randomPointInsideUnitCircle(e$i._tempPositionPoint),e$o=e$B[0],e$r=e$B[1],e$l[0]=e$o*this.radius,e$l[1]=e$r*this.radius,e$l[2]=0,this.randomDirection?(e$Y?(e$Y.seed=e$t[17],e$k._randomPointInsideUnitCircle(e$i._tempDirectionPoint,e$Y),e$t[17]=e$Y.seed):e$k._randomPointInsideUnitCircle(e$i._tempDirectionPoint),e$y=e$i._tempDirectionPoint.elements,e$E[0]=e$y[0]*e$_,e$E[1]=e$y[1]*e$_):(e$E[0]=e$o*e$_,e$E[1]=e$r*e$_),e$E[2]=e$f;break;case 1:e$Y?(e$Y.seed=e$t[16],e$k._randomPointUnitCircle(e$i._tempPositionPoint,e$Y),e$t[16]=e$Y.seed):e$k._randomPointUnitCircle(e$i._tempPositionPoint),e$o=e$B[0],e$r=e$B[1],e$l[0]=e$o*this.radius,e$l[1]=e$r*this.radius,e$l[2]=0,this.randomDirection?(e$Y?(e$Y.seed=e$t[17],e$k._randomPointInsideUnitCircle(e$i._tempDirectionPoint,e$Y),e$t[17]=e$Y.seed):e$k._randomPointInsideUnitCircle(e$i._tempDirectionPoint),e$y=e$i._tempDirectionPoint.elements,e$E[0]=e$y[0]*e$_,e$E[1]=e$y[1]*e$_):(e$E[0]=e$o*e$_,e$E[1]=e$r*e$_),e$E[2]=e$f;break;case 2:e$Y?(e$Y.seed=e$t[16],e$k._randomPointInsideUnitCircle(e$i._tempPositionPoint,e$Y)):e$k._randomPointInsideUnitCircle(e$i._tempPositionPoint),e$o=e$B[0],e$r=e$B[1],e$l[0]=e$o*this.radius,e$l[1]=e$r*this.radius,e$E[e$l[2]=0]=e$o*e$_,e$E[1]=e$r*e$_,e$E[2]=e$f,e$om.normalize(e$m,e$m),e$Y?(e$om.scale(e$m,this.length*e$Y.getFloat(),e$m),e$t[16]=e$Y.seed):e$om.scale(e$m,this.length*Math.random(),e$m),e$om.add(e$D,e$m,e$D),this.randomDirection&&(e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m));break;case 3:e$Y?(e$Y.seed=e$t[16],e$k._randomPointUnitCircle(e$i._tempPositionPoint,e$Y)):e$k._randomPointUnitCircle(e$i._tempPositionPoint),e$o=e$B[0],e$r=e$B[1],e$l[0]=e$o*this.radius,e$l[1]=e$r*this.radius,e$E[e$l[2]=0]=e$o*e$_,e$E[1]=e$r*e$_,e$E[2]=e$f,e$om.normalize(e$m,e$m),e$Y?(e$om.scale(e$m,this.length*e$Y.getFloat(),e$m),e$t[16]=e$Y.seed):e$om.scale(e$m,this.length*Math.random(),e$m),e$om.add(e$D,e$m,e$D),this.randomDirection&&(e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m));break;default:throw new Error("ConeShape:emitType is invalid.")}},e$D.cloneTo=function(e$D){e$Y.prototype.cloneTo.call(this,e$D);var e$m=e$D;e$m.angle=this.angle,e$m.radius=this.radius,e$m.length=this.length,e$m.emitType=this.emitType,e$m.randomDirection=this.randomDirection},e$_(e$i,["_tempPositionPoint",function(){return this._tempPositionPoint=new e$Bm},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new e$Bm}])}(e$u),function(e$Y){function e$D(){this.radius=NaN,this.emitFromShell=!1,e$D.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}e$R(e$D,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",e$Y);var e$m=e$D.prototype;e$m._getShapeBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[1]=e$m[2]=-this.radius;var e$Y=e$D.max.elements;e$Y[0]=e$Y[1]=this.radius,e$Y[2]=0},e$m._getSpeedBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[1]=-1,e$m[2]=0;var e$Y=e$D.max.elements;e$Y[0]=e$Y[1]=e$Y[2]=1},e$m.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){var e$y=e$D.elements;e$Y?(e$Y.seed=e$t[16],this.emitFromShell?e$k._randomPointUnitSphere(e$D,e$Y):e$k._randomPointInsideUnitSphere(e$D,e$Y),e$t[16]=e$Y.seed):this.emitFromShell?e$k._randomPointUnitSphere(e$D):e$k._randomPointInsideUnitSphere(e$D),e$om.scale(e$D,this.radius,e$D);var e$l=e$y[2];e$l<0&&(e$y[2]=-1*e$l),this.randomDirection?e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m):e$D.cloneTo(e$m)},e$m.cloneTo=function(e$D){e$Y.prototype.cloneTo.call(this,e$D);var e$m=e$D;e$m.radius=this.radius,e$m.emitFromShell=this.emitFromShell,e$m.randomDirection=this.randomDirection}}(e$u),function(e$Y){function e$D(){this.radius=NaN,this.emitFromShell=!1,e$D.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}e$R(e$D,"laya.d3.core.particleShuriKen.module.shape.SphereShape",e$Y);var e$m=e$D.prototype;e$m._getShapeBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[1]=e$m[2]=-this.radius;var e$Y=e$D.max.elements;e$Y[0]=e$Y[1]=e$Y[2]=this.radius},e$m._getSpeedBoundBox=function(e$D){var e$m=e$D.min.elements;e$m[0]=e$m[1]=e$m[2]=-1;var e$Y=e$D.max.elements;e$Y[0]=e$Y[1]=e$Y[2]=1},e$m.generatePositionAndDirection=function(e$D,e$m,e$Y,e$t){e$Y?(e$Y.seed=e$t[16],this.emitFromShell?e$k._randomPointUnitSphere(e$D,e$Y):e$k._randomPointInsideUnitSphere(e$D,e$Y),e$t[16]=e$Y.seed):this.emitFromShell?e$k._randomPointUnitSphere(e$D):e$k._randomPointInsideUnitSphere(e$D),e$om.scale(e$D,this.radius,e$D),this.randomDirection?e$Y?(e$Y.seed=e$t[17],e$k._randomPointUnitSphere(e$m,e$Y),e$t[17]=e$Y.seed):e$k._randomPointUnitSphere(e$m):e$D.cloneTo(e$m)},e$m.cloneTo=function(e$D){e$Y.prototype.cloneTo.call(this,e$D);var e$m=e$D;e$m.radius=this.radius,e$m.emitFromShell=this.emitFromShell,e$m.randomDirection=this.randomDirection}}(e$u),function(e$D){function e$m(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,e$m.__super.call(this)}return e$R(e$m,"laya.d3.core.render.SubMeshRenderElement",e$g),e$m}()),e$pm=function(e$D){function e$w(e$D,e$m,e$Y,e$t,e$y,e$l){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=e$D,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[e$Im.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[e$bm.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[e$bm.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[e$Tm.SHADERDEFINE_ALPHATEST]="ALPHATEST";e$w.__super.call(this,e$D,e$m,e$Y,null,{}),this._attributeMap=e$t;var e$E;for(e$E in e$y){var e$B=e$y[e$E];switch(e$B[1]){case 0:this._renderElementUniformMap[e$E]=e$B[0];break;case 1:this._materialUniformMap[e$E]=e$B[0];break;case 2:this._spriteUniformMap[e$E]=e$B[0];break;case 3:this._cameraUniformMap[e$E]=e$B[0];break;case 4:this._sceneUniformMap[e$E]=e$B[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}e$R(e$w,"laya.d3.shader.ShaderCompile3D",e$e);var e$m=e$w.prototype;return e$m._definesToNameDic=function(e$D,e$m){for(var e$Y={},e$t=1,e$y=0;e$y<32&&!(e$D<(e$t=1<<e$y));e$y++)if(e$D&e$t){var e$l=e$m[e$t];e$l&&(e$Y[e$l]="")}return e$Y},e$m.withCompile=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E;if(e$l=this.sharders[e$D])if(e$E=e$l[e$m]){if(e$y=e$E[e$Y])return e$y}else e$E=e$l[e$m]=[];else e$E=(e$l=this.sharders[e$D]=[])[e$m]=[];var e$B,e$o=this._definesToNameDic(e$D,e$w._globalInt2name),e$r=this._definesToNameDic(e$m,this._spriteInt2name),e$f=this._definesToNameDic(e$Y,this._materialInt2name),e$_={},e$i="";if(e$o)for(e$B in e$o)e$i+="#define "+e$B+"\n",e$_[e$B]=!0;if(e$r)for(e$B in e$r)e$i+="#define "+e$B+"\n",e$_[e$B]=!0;if(e$f)for(e$B in e$f)e$i+="#define "+e$B+"\n",e$_[e$B]=!0;var e$R=e$qm.nameKey.getName(this._name)+" compile ("+e$D+","+e$m+","+e$Y+")",e$G=this._VS.toscript(e$_,[]),e$I=this._PS.toscript(e$_,[]);e$T.now();if(e$y=e$qm.create(e$i+e$G.join("\n"),e$i+e$I.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,e$t,e$R),e$E[e$Y]=e$y,laya.d3.shader.ShaderCompile3D.debugMode)e$T.now();return e$y},e$m.precompileShaderWithShaderDefine=function(e$D,e$m,e$Y){this.withCompile(e$D,e$m,e$Y,!0)},e$m.addMaterialDefines=function(e$D){var e$m=e$D.defines;for(var e$Y in e$m){var e$t=e$m[e$Y],e$y=parseInt(e$Y);this._materialInt2name[e$y]=e$t,this._materialName2Int[e$t]=e$y}},e$m.addSpriteDefines=function(e$D){var e$m=e$D.defines;for(var e$Y in e$m){var e$t=e$m[e$Y],e$y=parseInt(e$Y);this._spriteInt2name[e$y]=e$t,this._spriteName2Int[e$t]=e$y}},e$m.getMaterialDefineByName=function(e$D){return this._materialName2Int[e$D]},e$m.registerMaterialDefine=function(e$D){var e$m=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[e$m]=e$D,this._materialName2Int[e$D]=e$m},e$m.registerSpriteDefine=function(e$D){var e$m=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[e$m]=e$D,this._spriteName2Int[e$D]=e$m},e$w._globalRegDefine=function(e$D,e$m){e$w._globalInt2name[e$m]=e$D},e$w.add=function(e$D,e$m,e$Y,e$t,e$y){return laya.d3.shader.ShaderCompile3D._preCompileShader[e$D]=new e$w(e$D,e$m,e$Y,e$t,e$y,e$e.includes)},e$w.get=function(e$D){return laya.d3.shader.ShaderCompile3D._preCompileShader[e$qm.nameKey.getID(e$D)]},e$w._preCompileShader={},e$w._globalInt2name=[],e$w.debugMode=!1,e$w.SHADERDEFINE_HIGHPRECISION=1,e$w.SHADERDEFINE_FOG=4,e$w.SHADERDEFINE_DIRECTIONLIGHT=8,e$w.SHADERDEFINE_POINTLIGHT=16,e$w.SHADERDEFINE_SPOTLIGHT=32,e$w.SHADERDEFINE_UV0=64,e$w.SHADERDEFINE_COLOR=128,e$w.SHADERDEFINE_UV1=256,e$w.SAHDERDEFINE_DEPTHFOG=131072,e$w}(),e$Fm=function(e$D){function e$G(){e$G.__super.call(this)}e$R(e$G,"laya.d3.graphics.MeshSprite3DStaticBatchManager",e$tD);var e$m=e$G.prototype;return e$m._getStaticBatch=function(e$D,e$m,e$Y,e$t){var e$y,e$l;return e$l=e$D?e$D.id.toString()+e$Y.id.toString()+e$m.id.toString()+e$t.toString():e$Y.id.toString()+e$m.id.toString()+e$t.toString(),this._staticBatches[e$l]?e$y=this._staticBatches[e$l]:this._staticBatches[e$l]=e$y=new e$sm(e$l,this,e$D,e$m,e$Y),e$y},e$m._initStaticBatchs=function(e$D){var e$m,e$Y;this._initBatchRenderElements.sort(e$G._sortPrepareStaticBatch);for(var e$t,e$y=!1,e$l=0,e$E=0,e$B=this._initBatchRenderElements.length;e$E<e$B;e$E++){var e$o,e$r=this._initBatchRenderElements[e$E],e$f=e$r.renderObj._getVertexBuffer(0);e$r._sprite3D;if(e$Y===e$f.vertexDeclaration&&e$m===e$r._material)if(e$y)e$t._addCombineBatchRenderObjTest(e$r)?(e$o=e$r._staticBatch)!==e$t&&(e$o&&e$o._deleteCombineBatchRenderObj(e$r),e$t._addCombineBatchRenderObj(e$r)):(e$y=!1,e$l++);else{var e$_=this._initBatchRenderElements[e$E-1],e$i=e$_.renderObj,e$R=e$r.renderObj;e$y=!(65535<e$i._getVertexBuffer().vertexCount+e$R._getVertexBuffer().vertexCount)&&(e$t=this._getStaticBatch(e$D,e$Y,e$m,e$l),(e$o=e$_._staticBatch)!==e$t&&(e$o&&e$o._deleteCombineBatchRenderObj(e$_),e$t._addCombineBatchRenderObj(e$_)),(e$o=e$r._staticBatch)!==e$t&&(e$o&&e$o._deleteCombineBatchRenderObj(e$r),e$t._addCombineBatchRenderObj(e$r)),!0)}else e$y=!1,e$l=0;e$m=e$r._material,e$Y=e$f.vertexDeclaration}},e$G._sortPrepareStaticBatch=function(e$D,e$m){var e$Y=e$D._render,e$t=e$m._render,e$y=e$Y.lightmapIndex-e$t.lightmapIndex;if(0!=e$y)return e$y;var e$l=e$Y.receiveShadow-e$t.receiveShadow;if(0!=e$l)return e$l;var e$E=e$D._mainSortID-e$m._mainSortID;return 0==e$E?e$D.renderObj.triangleCount-e$m.renderObj.triangleCount:e$E},e$G}(),e$sm=function(e$D){function e$l(e$D,e$m,e$Y,e$t,e$y){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,e$l.__super.call(this,e$D,e$m,e$Y),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=e$t,this._material=e$y}e$R(e$l,"laya.d3.graphics.SubMeshStaticBatch",e$yD);var e$m=e$l.prototype;return e$m._compareBatchRenderElement=function(e$D,e$m){return e$D._batchIndexStart>e$m._batchIndexStart},e$m._addCombineBatchRenderObjTest=function(e$D){var e$m=e$D.renderObj._vertexCount;return!(65535<(0<e$m?this._currentCombineVertexCount+e$m:this._currentCombineVertexCount+e$D.renderObj._getVertexBuffer().vertexCount))},e$m._addCombineBatchRenderObj=function(e$D){var e$m=e$D.renderObj,e$Y=e$m._vertexCount;this._initBatchRenderElements.push(e$D),e$D._staticBatch=this,0<e$Y?(this._currentCombineIndexCount+=e$m._indexCount,this._currentCombineVertexCount+=e$Y):(this._currentCombineIndexCount=this._currentCombineIndexCount+e$m._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e$m._getVertexBuffer().vertexCount),this._needFinishCombine=!0},e$m._deleteCombineBatchRenderObj=function(e$D){var e$m=e$D.renderObj,e$Y=this._initBatchRenderElements.indexOf(e$D);if(-1!==e$Y){this._initBatchRenderElements.splice(e$Y,1),e$D._staticBatch=null;var e$t=e$m._vertexCount;0<e$t?(this._currentCombineIndexCount=this._currentCombineIndexCount-e$m._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-e$t):(this._currentCombineIndexCount=this._currentCombineIndexCount-e$m._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-e$m._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},e$m._finishInit=function(){if(this._needFinishCombine){var e$D=0,e$m=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var e$Y=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),e$t=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=e$km.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=e$dm.create("ushort",this._currentCombineIndexCount,35044);for(var e$y=0,e$l=this._initBatchRenderElements.length;e$y<e$l;e$y++){var e$E=this._initBatchRenderElements[e$y],e$B=e$E.renderObj,e$o=e$B._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,e$E._sprite3D),e$r=e$B.getIndices(),e$f=e$E._sprite3D.transform._isFrontFaceInvert,e$_=e$D/(this._vertexDeclaration.vertexStride/4)-e$B._vertexStart,e$i=e$m,e$R=e$i+e$r.length;e$E._batchIndexStart=e$i,e$E._batchIndexEnd=e$R,e$t.set(e$r,e$m);var e$G=0;if(e$f)for(e$G=e$i;e$G<e$R;e$G+=3){e$t[e$G]=e$_+e$t[e$G];var e$I=e$t[e$G+1],e$w=e$t[e$G+2];e$t[e$G+1]=e$_+e$w,e$t[e$G+2]=e$_+e$I}else for(e$G=e$i;e$G<e$R;e$G+=3)e$t[e$G]=e$_+e$t[e$G],e$t[e$G+1]=e$_+e$t[e$G+1],e$t[e$G+2]=e$_+e$t[e$G+2];e$m+=e$r.length,e$Y.set(e$o,e$D),e$D+=e$o.length}this._vertexBuffer.setData(e$Y),this._indexBuffer.setData(e$t),this._needFinishCombine=!1}},e$m._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new e$am)},e$m._getRenderElement=function(e$D,e$m,e$Y){for(var e$t,e$y,e$l=this._batchRenderElements.length,e$E=!0,e$B=0;e$B<e$l;e$B++){var e$o,e$r,e$f=(e$y=this._batchRenderElements[e$B])._sprite3D._render;if(0!==e$B&&(e$E=(e$o=(e$t=this._batchRenderElements[e$B-1])._sprite3D._render).lightmapIndex!==e$f.lightmapIndex||e$o.receiveShadow!==e$f.receiveShadow||e$t._batchIndexEnd!==e$y._batchIndexStart),e$E){(e$r=this._getCombineRenderElementFromPool()).renderObj=this,e$r._material=this._material,e$r._batchIndexStart=e$y._batchIndexStart,e$r._batchIndexEnd=e$y._batchIndexEnd;var e$_=e$f.lightmapIndex,e$i=e$_+1,e$R=this._batchOwnerIndices[e$i];e$R||(e$R=this._batchOwnerIndices[e$i]=[]);var e$G,e$I=e$R[e$y._render.receiveShadow?1:0];void 0===e$I?(e$R[e$f.receiveShadow?1:0]=this._batchOwners.length,(e$G=new e$Km(null,"StaticBatchMeshSprite3D"))._scene=e$m,e$G._transform=this._rootOwner?this._rootOwner._transform:null,e$G._render.lightmapIndex=e$_,e$G._render.receiveShadow=e$y._render.receiveShadow,this._batchOwners.push(e$G)):e$G=this._batchOwners[e$I],e$G._render._renderUpdate(e$Y),e$r._sprite3D=e$G,e$D.push(e$r)}else e$r._batchIndexEnd=e$y._batchIndexEnd}},e$m._beforeRender=function(e$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$m._render=function(e$D){var e$m=e$D.renderElement,e$Y=e$m._batchIndexStart,e$t=e$m._batchIndexEnd-e$Y;e$s.mainContext.drawElements(4,e$t,5123,2*e$Y),e$A.drawCall++,e$A.trianglesFaces+=e$t/3},e$m.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},e$m._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),this._vertexBuffer},e$l}(),e$Qm=function(e$D){function e$m(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,e$m.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}e$R(e$m,"laya.d3.core.ComponentNode",e$f);var e$Y=e$m.prototype;return e$Y.addComponent=function(e$D){var e$m,e$Y=this._componentsMap.indexOf(e$D);if(-1===e$Y)e$m=[],this._componentsMap.push(e$D),this._typeComponentsIndices.push(e$m);else if(e$m=this._typeComponentsIndices[e$Y],this._components[e$m[0]].isSingleton)throw new Error("无法单实例创建"+e$D+"组件，"+e$D+"组件已存在！");var e$t=e$o.getInstance(e$D);return e$m.push(this._components.length),this._components.push(e$t),e$t instanceof laya.d3.component.Script&&this._scripts.push(e$t),e$t._initialize(this),e$t},e$Y._removeComponent=function(e$D,e$m){var e$Y=this._typeComponentsIndices[e$D],e$t=e$Y[e$m],e$y=this._components[e$t];this._components.splice(e$t,1),e$y instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(e$y),1),e$Y.splice(e$m,1),0===e$Y.length&&(this._typeComponentsIndices.splice(e$D,1),this._componentsMap.splice(e$D,1));for(var e$l=0,e$E=this._componentsMap.length;e$l<e$E;e$l++)for(var e$B=(e$Y=this._typeComponentsIndices[e$l]).length-1;0<=e$B;e$B--){var e$o=e$Y[e$B];if(!(e$t<e$o))break;e$Y[e$B]=--e$o}e$y._destroy()},e$Y.getComponentByType=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y=this._componentsMap.indexOf(e$D);return-1===e$Y?null:this._components[this._typeComponentsIndices[e$Y][e$m]]},e$Y.getComponentsByType=function(e$D,e$m){var e$Y=this._componentsMap.indexOf(e$D);if(-1!==e$Y){var e$t=this._typeComponentsIndices[e$Y],e$y=e$t.length;e$m.length=e$y;for(var e$l=0;e$l<e$y;e$l++)e$m[e$l]=this._components[e$t[e$l]]}else e$m.length=0},e$Y.getComponentByIndex=function(e$D){return this._components[e$D]},e$Y.removeComponentByType=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y=this._componentsMap.indexOf(e$D);-1!==e$Y&&this._removeComponent(e$Y,e$m)},e$Y.removeComponentsByType=function(e$D){var e$m=this._componentsMap.indexOf(e$D);if(-1!==e$m)for(var e$Y=this._typeComponentsIndices[e$m],e$t=0,e$y=e$Y.length;e$t<e$y;e$Y.length<e$y?e$y--:e$t++)this._removeComponent(e$m,e$t)},e$Y.removeAllComponent=function(){for(var e$D=0,e$m=this._componentsMap.length;e$D<e$m;this._componentsMap.length<e$m?e$m--:e$D++)this.removeComponentsByType(this._componentsMap[e$D])},e$Y._updateComponents=function(e$D){for(var e$m=0,e$Y=this._components.length;e$m<e$Y;e$m++){var e$t=this._components[e$m];!e$t.started&&(e$t._start(e$D),e$t.started=!0),e$t.enable&&e$t._update(e$D)}},e$Y._lateUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._lateUpdate(e$D)}},e$Y._preRenderUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._preRenderUpdate(e$D)}},e$Y._postRenderUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._postRenderUpdate(e$D)}},e$m}(),e$Tm=function(e$t){function e$D(){e$D.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new e$Gm,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new e$rm(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}e$R(e$D,"laya.d3.core.material.BaseMaterial",e$t);var e$m=e$D.prototype;return e$c.imps(e$m,{"laya.d3.core.IClone":!0}),e$m._addShaderDefine=function(e$D){this._shaderDefineValue|=e$D},e$m._removeShaderDefine=function(e$D){this._shaderDefineValue&=~e$D},e$m._addDisablePublicShaderDefine=function(e$D){this._disablePublicShaderDefine|=e$D},e$m._removeDisablePublicShaderDefine=function(e$D){this._disablePublicShaderDefine&=~e$D},e$m._setBuffer=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m),this._values[e$D]=e$m},e$m._getBuffer=function(e$D){return this._values[e$D]},e$m._setMatrix4x4=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m?e$m.elements:null),this._values[e$D]=e$m},e$m._getMatrix4x4=function(e$D){return this._values[e$D]},e$m._setInt=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m),this._values[e$D]=e$m},e$m._getInt=function(e$D){return this._values[e$D]},e$m._setNumber=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m),this._values[e$D]=e$m},e$m._getNumber=function(e$D){return this._values[e$D]},e$m._setBool=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m),this._values[e$D]=e$m},e$m._getBool=function(e$D){return this._values[e$D]},e$m._setVector2=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m?e$m.elements:null),this._values[e$D]=e$m},e$m._getVector2=function(e$D){return this._values[e$D]},e$m._setColor=function(e$D,e$m){this._shaderValues.setValue(e$D,e$m?e$m.elements:null),this._values[e$D]=e$m},e$m._getColor=function(e$D){return this._values[e$D]},e$m._setTexture=function(e$D,e$m){var e$Y=this._values[e$D];this._values[e$D]=e$m,this._shaderValues.setValue(e$D,e$m),0<this.referenceCount&&(e$Y&&e$Y._removeReference(),e$m&&e$m._addReference())},e$m._getTexture=function(e$D){return this._values[e$D]},e$m._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},e$m._getShader=function(e$D,e$m,e$Y){var e$t=(e$D|e$m)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(e$t,e$Y,this._shaderDefineValue),this._shader},e$m._setRenderStateBlendDepth=function(){var e$D=e$s.mainContext;switch(e$Q.setDepthMask(e$D,this.depthWrite),0===this.depthTest?e$Q.setDepthTest(e$D,!1):(e$Q.setDepthTest(e$D,!0),e$Q.setDepthFunc(e$D,this.depthTest)),this.blend){case 0:e$Q.setBlend(e$D,!1);break;case 1:e$Q.setBlend(e$D,!0),e$Q.setBlendFunc(e$D,this.srcBlend,this.dstBlend);break;case 2:e$Q.setBlend(e$D,!0)}},e$m._setRenderStateFrontFace=function(e$D,e$m){var e$Y=e$s.mainContext,e$t=0;switch(this.cull){case 0:e$Q.setCullFace(e$Y,!1);break;case 1:e$Q.setCullFace(e$Y,!0),e$t=e$D?e$m&&e$m._isFrontFaceInvert?2305:2304:e$m&&e$m._isFrontFaceInvert?2304:2305,e$Q.setFrontFace(e$Y,e$t);break;case 2:e$Q.setCullFace(e$Y,!0),e$t=e$D?e$m&&e$m._isFrontFaceInvert?2304:2305:e$m&&e$m._isFrontFaceInvert?2305:2304,e$Q.setFrontFace(e$Y,e$t)}},e$m.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=e$m[0],e$y=e$m[1];switch(e$t.version){case"LAYAMATERIAL:01":var e$l=0,e$E=0,e$B=e$t.props;for(var e$o in e$B)switch(e$o){case"vectors":var e$r=e$B[e$o];for(e$l=0,e$E=e$r.length;e$l<e$E;e$l++){var e$f=e$r[e$l],e$_=e$f.value;switch(e$_.length){case 2:this[e$f.name]=new e$Bm(e$_[0],e$_[1]);break;case 3:this[e$f.name]=new e$om(e$_[0],e$_[1],e$_[2]);break;case 4:this[e$f.name]=new e$rm(e$_[0],e$_[1],e$_[2],e$_[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var e$i=e$B[e$o];for(e$l=0,e$E=e$i.length;e$l<e$E;e$l++){var e$R=e$i[e$l],e$G=e$R.path;e$G&&(this[e$R.name]=e$W.getRes(e$y[e$G]))}break;case"defines":var e$I=e$B[e$o];for(e$l=0,e$E=e$I.length;e$l<e$E;e$l++){var e$w=this._shaderCompile.getMaterialDefineByName(e$I[e$l]);this._addShaderDefine(e$w)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[e$o]=e$B[e$o];break;case"renderQueue":switch(e$B[e$o]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[e$o]=e$B[e$o]}break;case"LAYAMATERIAL:02":for(e$o in e$B=e$t.props)switch(e$o){case"vectors":for(e$l=0,e$E=(e$r=e$B[e$o]).length;e$l<e$E;e$l++)switch((e$_=(e$f=e$r[e$l]).value).length){case 2:this[e$f.name]=new e$Bm(e$_[0],e$_[1]);break;case 3:this[e$f.name]=new e$om(e$_[0],e$_[1],e$_[2]);break;case 4:this[e$f.name]=new e$rm(e$_[0],e$_[1],e$_[2],e$_[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(e$l=0,e$E=(e$i=e$B[e$o]).length;e$l<e$E;e$l++)(e$G=(e$R=e$i[e$l]).path)&&(this[e$R.name]=e$W.getRes(e$y[e$G]));break;case"defines":for(e$l=0,e$E=(e$I=e$B[e$o]).length;e$l<e$E;e$l++)e$w=this._shaderCompile.getMaterialDefineByName(e$I[e$l]),this._addShaderDefine(e$w);break;default:this[e$o]=e$B[e$o]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},e$m._addReference=function(){e$t.prototype._addReference.call(this);for(var e$D=0,e$m=this._values.length;e$D<e$m;e$D++){var e$Y=this._values[e$D];e$Y&&e$Y instanceof laya.d3.resource.BaseTexture&&e$Y._addReference()}},e$m._removeReference=function(){e$t.prototype._removeReference.call(this);for(var e$D=0,e$m=this._values.length;e$D<e$m;e$D++){var e$Y=this._values[e$D];e$Y&&e$Y instanceof laya.d3.resource.BaseTexture&&e$Y._removeReference()}},e$m.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},e$m.setShaderName=function(e$D){var e$m=e$qm.nameKey.getID(e$D);if(-1===e$m)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=e$pm._preCompileShader[e$m]},e$m.cloneTo=function(e$D){var e$m=e$D;e$m.name=this.name,e$m.cull=this.cull,e$m.blend=this.blend,e$m.srcBlend=this.srcBlend,e$m.dstBlend=this.dstBlend,e$m.srcBlendRGB=this.srcBlendRGB,e$m.dstBlendRGB=this.dstBlendRGB,e$m.srcBlendAlpha=this.srcBlendAlpha,e$m.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(e$m.blendConstColor),e$m.blendEquation=this.blendEquation,e$m.blendEquationRGB=this.blendEquationRGB,e$m.blendEquationAlpha=this.blendEquationAlpha,e$m.depthTest=this.depthTest,e$m.depthWrite=this.depthWrite,e$m.renderQueue=this.renderQueue,e$m._shader=this._shader,e$m._disablePublicShaderDefine=this._disablePublicShaderDefine,e$m._shaderDefineValue=this._shaderDefineValue;var e$Y,e$t=0,e$y=e$m._shaderValues;e$m._shaderValues.data.length=this._shaderValues.data.length;var e$l=this._values.length,e$E=e$m._values;for(e$t=0,e$Y=e$E.length=e$l;e$t<e$Y;e$t++){var e$B=this._values[e$t];if(e$B)if("number"==typeof e$B)e$E[e$t]=e$B,e$y.data[e$t]=e$B;else if("number"==typeof e$B&&Math.floor(e$B)==e$B)e$E[e$t]=e$B,e$y.data[e$t]=e$B;else if("boolean"==typeof e$B)e$E[e$t]=e$B,e$y.data[e$t]=e$B;else if(e$B instanceof laya.d3.math.Vector2){var e$o=e$E[e$t]||(e$E[e$t]=new e$Bm);e$B.cloneTo(e$o),e$y.data[e$t]=e$o.elements}else if(e$B instanceof laya.d3.math.Vector3){var e$r=e$E[e$t]||(e$E[e$t]=new e$om);e$B.cloneTo(e$r),e$y.data[e$t]=e$r.elements}else if(e$B instanceof laya.d3.math.Vector4){var e$f=e$E[e$t]||(e$E[e$t]=new e$rm);e$B.cloneTo(e$f),e$y.data[e$t]=e$f.elements}else if(e$B instanceof laya.d3.math.Matrix4x4){var e$_=e$E[e$t]||(e$E[e$t]=new e$mm);e$B.cloneTo(e$_),e$y.data[e$t]=e$_.elements}else e$B instanceof laya.d3.resource.BaseTexture&&(e$E[e$t]=e$B,e$y.data[e$t]=e$B)}},e$m.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$G(0,e$m,"alphaTestValue",function(){return this._getNumber(0)},function(e$D){this._setNumber(0,e$D)}),e$G(0,e$m,"alphaTest",function(){return this._alphaTest},function(e$D){(this._alphaTest=e$D)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),e$D.__init__=function(){e$D.SHADERDEFINE_ALPHATEST=e$D.shaderDefines.registerDefine("ALPHATEST")},e$D.RENDERQUEUE_OPAQUE=2e3,e$D.RENDERQUEUE_ALPHATEST=2450,e$D.RENDERQUEUE_TRANSPARENT=3e3,e$D.CULL_NONE=0,e$D.CULL_FRONT=1,e$D.CULL_BACK=2,e$D.BLEND_DISABLE=0,e$D.BLEND_ENABLE_ALL=1,e$D.BLEND_ENABLE_SEPERATE=2,e$D.BLENDPARAM_ZERO=0,e$D.BLENDPARAM_ONE=1,e$D.BLENDPARAM_SRC_COLOR=768,e$D.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,e$D.BLENDPARAM_DST_COLOR=774,e$D.BLENDPARAM_ONE_MINUS_DST_COLOR=775,e$D.BLENDPARAM_SRC_ALPHA=770,e$D.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,e$D.BLENDPARAM_DST_ALPHA=772,e$D.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,e$D.BLENDPARAM_SRC_ALPHA_SATURATE=776,e$D.BLENDEQUATION_ADD=0,e$D.BLENDEQUATION_SUBTRACT=1,e$D.BLENDEQUATION_REVERSE_SUBTRACT=2,e$D.DEPTHTEST_OFF=0,e$D.DEPTHTEST_NEVER=512,e$D.DEPTHTEST_LESS=513,e$D.DEPTHTEST_EQUAL=514,e$D.DEPTHTEST_LEQUAL=515,e$D.DEPTHTEST_GREATER=516,e$D.DEPTHTEST_NOTEQUAL=517,e$D.DEPTHTEST_GEQUAL=518,e$D.DEPTHTEST_ALWAYS=519,e$D.SHADERDEFINE_ALPHATEST=1,e$D.ALPHATESTVALUE=0,e$_(e$D,["shaderDefines",function(){return this.shaderDefines=new e$im}]),e$D}(e$w),e$Nm=function(e$D){function e$m(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,e$m.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}e$R(e$m,"laya.d3.resource.BaseTexture",e$w);var e$Y=e$m.prototype;return e$G(0,e$Y,"width",function(){return this._width}),e$G(0,e$Y,"repeat",function(){return this._repeat},function(e$D){if(this._repeat!==e$D&&(this._repeat=e$D,this._source)){var e$m=e$s.mainContext;e$Q.bindTexture(e$m,this._type,this._source),e$v.isPOT(this._width,this._height)&&this._repeat?(e$m.texParameteri(this._type,10242,10497),e$m.texParameteri(this._type,10243,10497)):(e$m.texParameteri(this._type,10242,33071),e$m.texParameteri(this._type,10243,33071))}}),e$G(0,e$Y,"height",function(){return this._height}),e$G(0,e$Y,"magFifter",function(){return this._magFifter},function(e$D){(this._magFifter=e$D)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(e$D)}),e$G(0,e$Y,"wrapModeV",function(){return this._wrapModeV}),e$G(0,e$Y,"size",function(){return this._size}),e$G(0,e$Y,"wrapModeU",function(){return this._wrapModeU}),e$G(0,e$Y,"mipmap",function(){return this._mipmap},function(e$D){this._mipmap=e$D,this._mipmap!=e$D&&this._conchTexture&&this._conchTexture.setMipMap(e$D)}),e$G(0,e$Y,"minFifter",function(){return this._minFifter},function(e$D){this._minFifter=e$D,this._minFifter!=e$D&&this._conchTexture&&this._conchTexture.setMinFifter(e$D)}),e$G(0,e$Y,"format",function(){return this._format}),e$G(0,e$Y,"source",function(){return this.activeResource(),this._source}),e$G(0,e$Y,"defaulteTexture",function(){return e$xm.grayTexture}),e$m.WARPMODE_REPEAT=0,e$m.WARPMODE_CLAMP=1,e$m}(),e$Cm=function(e$D){function e$m(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,e$m.__super.call(this),this._boundingBoxCorners=e$t(8,null)}e$R(e$m,"laya.d3.resource.models.BaseMesh",e$w);var e$Y=e$m.prototype;return e$Y._getPositions=function(){throw new Error("未Override,请重载该属性！")},e$Y._generateBoundingObject=function(){this._boundingSphere=new e$bD(new e$om,0),e$bD.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new e$VD(new e$om,new e$om),e$VD.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},e$Y.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},e$Y.getRenderElement=function(e$D){throw new Error("未Override,请重载该属性！")},e$G(0,e$Y,"subMeshCount",function(){return this._subMeshCount}),e$G(0,e$Y,"boundingBox",function(){return this._boundingBox}),e$G(0,e$Y,"boundingBoxCorners",function(){return this._boundingBoxCorners}),e$G(0,e$Y,"boundingSphere",function(){return this._boundingSphere}),e$m}(),e$Om=function(e$D){function e$m(){e$m.__super.call(this),this._isRigidbody=!1,this._runtimeCollisonMap={},this._runtimeCollisonTestMap={},this._ignoreCollisonMap={},this.isTrigger=!0}e$R(e$m,"laya.d3.component.physics.Collider",e$D);var e$Y=e$m.prototype;return e$Y._clearCollsionMap=function(){for(var e$D in this._runtimeCollisonMap){var e$m=this._runtimeCollisonMap[e$D];delete e$m._runtimeCollisonMap[this.id],e$m._isRigidbody&&delete e$m._runtimeCollisonTestMap[this.id];var e$Y=e$m.id;delete this._runtimeCollisonMap[e$Y],this._isRigidbody&&delete this._runtimeCollisonTestMap[e$Y]}},e$Y._unload=function(e$D){for(var e$m in this._runtimeCollisonMap){var e$Y=this._runtimeCollisonMap[e$m];delete e$Y._runtimeCollisonMap[this.id],e$Y._isRigidbody&&delete e$Y._runtimeCollisonTestMap[this.id],delete this._ignoreCollisonMap[e$m]._ignoreCollisonMap[this.id]}},e$Y._setIsRigidbody=function(e$D){if(this._isRigidbody!==e$D){this._isRigidbody=e$D;var e$m=this._owner;if(e$m.displayedInStage){var e$Y=e$m.layer;e$Y._removeCollider(this),e$Y._addCollider(this)}}},e$Y._getType=function(){return-1},e$Y._collisonTo=function(e$D){return!1},e$Y.raycast=function(e$D,e$m,e$Y){throw void 0===e$Y&&(e$Y=179e306),new Error("Collider:Must override it.")},e$G(0,e$Y,"enable",e$D.prototype._$get_enable,function(e$D){this._enable!==e$D&&(this._owner.displayedInStage&&(e$D||this._clearCollsionMap()),this._enable=e$D,this.event("enablechanged",this._enable))}),e$G(0,e$Y,"isSingleton",function(){return e$m._isSingleton}),e$m._isSingleton=!1,e$m}(e$Sm),e$hm=function(e$D){function e$m(){e$m.__super.call(this)}return e$R(e$m,"laya.d3.component.Rigidbody",e$D),e$G(0,e$m.prototype,"enable",e$D.prototype._$get_enable,function(e$D){if(this._enable!==e$D){for(var e$m=this._owner._colliders,e$Y=0,e$t=e$m.length;e$Y<e$t;e$Y++){var e$y=e$m[e$Y];e$y._setIsRigidbody(e$D);var e$l=e$y._runtimeCollisonMap,e$E=e$y._runtimeCollisonTestMap;if(!e$D)for(var e$B in e$l)delete e$E[e$B]}this._enable=e$D,this.event("enablechanged",this._enable)}}),e$m}(e$Sm),e$Xm=(function(e$D){function e$m(){e$m.__super.call(this)}e$R(e$m,"laya.d3.component.Script",e$Sm);var e$Y=e$m.prototype;e$Y.onTriggerEnter=function(e$D){},e$Y.onTriggerExit=function(e$D){},e$Y.onTriggerStay=function(e$D){},e$G(0,e$Y,"isSingleton",function(){return e$m._isSingleton}),e$m._isSingleton=!1}(),function(e$D){function e$m(e$D){this._owner=null,this._sharedMesh=null,e$m.__super.call(this),this._owner=e$D}e$R(e$m,"laya.d3.core.MeshFilter",e$D);var e$Y=e$m.prototype;return e$Y._sharedMeshLoaded=function(){this.event("loaded")},e$Y._destroy=function(){e$D.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},e$G(0,e$Y,"sharedMesh",function(){return this._sharedMesh},function(e$D){var e$m=this._sharedMesh;e$m&&e$m._removeReference(),(this._sharedMesh=e$D)._addReference(),this.event("meshchanged",[this,e$m,e$D]),e$D.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),e$G(0,e$Y,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),e$G(0,e$Y,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),e$G(0,e$Y,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),e$G(0,e$Y,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),e$m}(e$zm)),e$Pm=function(e$D){function e$m(e$D){e$m.__super.call(this,e$D),e$D.meshFilter.on("meshchanged",this,this._onMeshChanged)}e$R(e$m,"laya.d3.core.MeshRender",e$Am);var e$Y=e$m.prototype;return e$Y._onMeshChanged=function(e$D,e$m,e$Y){e$Y.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:e$Y.once("loaded",this,this._onMeshLoaed)},e$Y._onMeshLoaed=function(e$D,e$m){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},e$Y._calculateBoundingSphereByInitSphere=function(e$D){var e$m=NaN,e$Y=this._owner.transform,e$t=e$Y.scale.elements,e$y=Math.abs(e$t[0]),e$l=Math.abs(e$t[1]),e$E=Math.abs(e$t[2]);e$m=e$l<=e$y&&e$E<=e$y?e$y:e$E<=e$l?e$l:e$E,e$om.transformCoordinate(e$D.center,e$Y.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e$D.radius*e$m},e$Y._calculateBoundBoxByInitCorners=function(e$D){for(var e$m=this._owner.transform.worldMatrix,e$Y=0;e$Y<8;e$Y++)e$om.transformCoordinate(e$D[e$Y],e$m,e$Am._tempBoundBoxCorners[e$Y]);e$VD.createfromPoints(e$Am._tempBoundBoxCorners,this._boundingBox)},e$Y._calculateBoundingSphere=function(){var e$D=this._owner.meshFilter.sharedMesh;null==e$D||null==e$D.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(e$D.boundingSphere)},e$Y._calculateBoundingBox=function(){var e$D=this._owner.meshFilter.sharedMesh;null==e$D||null==e$D.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(e$D.boundingBoxCorners)},e$Y._renderUpdate=function(e$D){var e$m=this._owner.transform;if(e$m){this._setShaderValueMatrix4x4(0,e$m.worldMatrix);var e$Y=this._owner.getProjectionViewWorldMatrix(e$D);this._setShaderValueMatrix4x4(1,e$Y)}else this._setShaderValueMatrix4x4(0,e$mm.DEFAULT),this._setShaderValueMatrix4x4(1,e$D);return e$vm.debugMode&&this._renderRenderableBoundBox(),!0},e$m}(),e$um=function(e$m){function e$t(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,e$t.__super.call(this),this._renderState=new e$x,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new e$Gm,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new e$mD,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new e$om(.7,.7,.7),this.ambientColor=new e$om(.212,.227,.259),e$s.shaderHighPrecision&&this.addShaderDefine(e$pm.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}e$R(e$t,"laya.d3.core.scene.Scene",e$m);var e$D=e$t.prototype;return e$c.imps(e$D,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),e$D._setUrl=function(e$D){this._url=e$D},e$D._getGroup=function(){return this._group},e$D._setGroup=function(e$D){this._group=e$D},e$D._display=function(){e$c.stage._scenes.push(this),e$c.stage._scenes.sort(e$t._sortScenes);for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++){var e$Y=this._childs[e$D];e$Y.active&&e$Y._activeHierarchy()}},e$D._unDisplay=function(){var e$D=e$c.stage._scenes;e$D.splice(e$D.indexOf(this),1);for(var e$m=0,e$Y=this._childs.length;e$m<e$Y;e$m++){var e$t=this._childs[e$m];e$t.active&&e$t._inActiveHierarchy()}},e$D._addChild3D=function(e$D){e$D.transform._onWorldTransform(),e$D._setBelongScene(this),this.displayedInStage&&e$D.active&&e$D._activeHierarchy()},e$D._removeChild3D=function(e$D){e$D.transform.parent=null,this.displayedInStage&&e$D.active&&e$D._inActiveHierarchy(),e$D._setUnBelongScene()},e$D.initOctree=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$y&&(e$y=6),this.treeSize=new e$om(e$D,e$m,e$Y),this.treeLevel=e$y,this.treeRoot=new e$V(this,0),this.treeRoot.init(e$t,this.treeSize)},e$D._prepareUpdateToRenderState=function(e$D,e$m){e$m.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,e$m.scene=this},e$D._prepareSceneToRender=function(e$D){var e$m=this._lights.length;if(0<e$m)for(var e$Y=0,e$t=0;e$t<e$m&&!(this._lights[e$t]._prepareToScene(e$D)&&++e$Y>=this._enableLightCount);e$t++);},e$D._updateChilds=function(e$D){for(var e$m=0,e$Y=this._childs.length;e$m<e$Y;++e$m)this._childs[e$m]._update(e$D)},e$D._preRenderScene=function(e$D,e$m,e$Y){var e$t,e$y=e$m._viewMatrix,e$l=e$m._projectionMatrix,e$E=e$m._projectionViewMatrix,e$B=0,e$o=e$m.camera;for(e$o.useOcclusionCulling?this.treeRoot?e$YD.renderObjectCullingOctree(e$Y,this,e$o,e$y,e$l,e$E):e$YD.renderObjectCulling(e$Y,this,e$o,e$y,e$l,e$E):e$YD.renderObjectCullingNoBoundFrustum(this,e$o,e$y,e$l,e$E),e$B=0,e$t=this._quenes.length;e$B<e$t;e$B++)this._quenes[e$B]&&this._quenes[e$B]._preRender(e$m)},e$D._clear=function(e$D,e$m){var e$Y=e$m._viewport,e$t=e$m.camera,e$y=e$Y.x,e$l=e$t.renderTargetSize.height-e$Y.y-e$Y.height,e$E=e$Y.width,e$B=e$Y.height;e$D.viewport(e$y,e$l,e$E,e$B);var e$o=256,e$r=e$t.renderTarget;switch(e$t.clearFlag){case 0:var e$f=e$t.clearColor;if(e$f){e$D.enable(3089),e$D.scissor(e$y,e$l,e$E,e$B);var e$_=e$f.elements;e$D.clearColor(e$_[0],e$_[1],e$_[2],e$_[3]),e$o|=16384}if(e$r)switch(e$f||(e$o=16384),e$r.depthStencilFormat){case 33189:e$o|=256;break;case 36168:e$o|=1024;break;case 34041:e$o|=256,e$o|=1024}e$D.clear(e$o),e$f&&e$D.disable(3089);break;case 1:case 2:if(e$r)switch(e$o=16384,e$r.depthStencilFormat){case 33189:e$o|=256;break;case 36168:e$o|=1024;break;case 34041:e$o|=256,e$o|=1024}e$D.clear(e$o);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},e$D._renderScene=function(e$D,e$m){var e$Y,e$t,e$y=e$m.camera,e$l=0;for(e$l=0;e$l<2;e$l++)(e$t=this._quenes[e$l])&&(e$y.renderTarget?e$t._render(e$m,!0):e$t._render(e$m,!1));if(1===e$y.clearFlag){var e$E=e$y.sky;e$E&&(e$Q.setCullFace(e$D,!1),e$Q.setDepthFunc(e$D,515),e$Q.setDepthMask(e$D,!1),e$E._render(e$m),e$Q.setDepthFunc(e$D,513),e$Q.setDepthMask(e$D,!0))}for(e$l=2,e$Y=this._quenes.length;e$l<e$Y;e$l++)(e$t=this._quenes[e$l])&&(e$t._sortAlpha(e$m.camera.transform.position),e$y.renderTarget?e$t._render(e$m,!0):e$t._render(e$m,!1))},e$D._set3DRenderConfig=function(e$D){e$D.disable(3042),e$Q._blend=!1,e$D.blendFunc(770,771),e$Q._sFactor=770,e$Q._dFactor=771,e$D.disable(2929),e$Q._depthTest=!1,e$D.enable(2884),e$Q._cullFace=!0,e$D.depthMask(1),e$Q._depthMask=!0,e$D.frontFace(2304),e$Q._frontFace=2304},e$D._set2DRenderConfig=function(e$D){e$Q.setBlend(e$D,!0),e$Q.setBlendFunc(e$D,1,771),e$Q.setDepthTest(e$D,!1),e$Q.setCullFace(e$D,!1),e$Q.setDepthMask(e$D,!0),e$Q.setFrontFace(e$D,2305),e$D.viewport(0,0,e$y.width,e$y.height)},e$D._parseCustomProps=function(e$D,e$m,e$Y,e$t){var e$y=e$t.customProps.lightmaps,e$l=e$y.length,e$E=this._lightmaps;e$E.length=e$l;for(var e$B=0;e$B<e$l;e$B++)e$E[e$B]=e$W.getRes(e$m[e$y[e$B].replace(".exr",".png")]);this.setlightmaps(e$E);var e$o=e$t.customProps.ambientColor;e$o&&(this.ambientColor=new e$om(e$o[0],e$o[1],e$o[2]));var e$r=e$t.customProps.fogColor;e$r&&(this.fogColor=new e$om(e$r[0],e$r[1],e$r[2]))},e$D._addLight=function(e$D){this._lights.indexOf(e$D)<0&&this._lights.push(e$D)},e$D._removeLight=function(e$D){var e$m=this._lights.indexOf(e$D);0<=e$m&&this._lights.splice(e$m,1)},e$D._updateScene=function(){var e$D=this._renderState;this._prepareUpdateToRenderState(e$s.mainContext,e$D),this._updateComponents(e$D),this._updateChilds(e$D),this._lateUpdateComponents(e$D),this._time+=e$D.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},e$D._updateSceneConch=function(){var e$D=this._renderState;this._prepareUpdateToRenderState(e$s.mainContext,e$D),this._updateComponents(e$D),this._lateUpdateComponents(e$D),this._prepareSceneToRender(e$D);for(var e$m=0,e$Y=this._cameraPool.length;e$m<e$Y;e$m++){var e$t=this._cameraPool[e$m];(e$D.camera=e$t)._prepareCameraToRender()}},e$D._preRenderShadow=function(e$D,e$m,e$Y,e$t,e$y){this.treeRoot?e$YD.renderShadowObjectCullingOctree(this,e$m,e$Y,e$t,e$y):e$YD.renderShadowObjectCulling(this,e$m,e$Y,e$t,e$y);for(var e$l=0,e$E=e$Y.length;e$l<e$E;e$l++)e$Y[e$l]&&e$Y[e$l]._preRender(e$D)},e$D._renderShadowMap=function(e$D,e$m,e$Y){var e$t=this.parallelSplitShadowMaps[0];e$t._calcAllLightCameraInfo(e$Y);var e$y,e$l,e$E,e$B=e$t.PSSMNum;if(this._preRenderShadow(e$m,e$t._lightCulling,e$t._shadowQuenes,e$t._lightVPMatrix[0],e$B),this.addShaderDefine(e$Im.SHADERDEFINE_CAST_SHADOW),1<e$B)for(var e$o=0;e$o<e$B;e$o++)e$y=e$t.getRenderTarget(e$o+1),e$t.beginRenderTarget(e$o+1),e$D.clearColor(1,1,1,1),e$D.clear(16640),e$D.viewport(0,0,e$y.width,e$y.height),e$m.camera=e$E=e$t.getLightCamera(e$o),e$E._prepareCameraToRender(),e$E._prepareCameraViewProject(e$E.viewMatrix,e$E.projectionMatrix),e$m._projectionViewMatrix=e$t._lightVPMatrix[e$o+1],(e$l=e$t._shadowQuenes[e$o])._preRender(e$m),e$l._renderShadow(e$m,!1),e$t.endRenderTarget(e$o+1);else e$y=e$t.getRenderTarget(1),e$t.beginRenderTarget(1),e$D.clearColor(1,1,1,1),e$D.clear(16640),e$D.viewport(0,0,e$y.width,e$y.height),e$m.camera=e$E=e$t.getLightCamera(0),e$E._prepareCameraToRender(),e$E._prepareCameraViewProject(e$E.viewMatrix,e$E.projectionMatrix),e$m._projectionViewMatrix=e$t._lightVPMatrix[0],(e$l=e$t._shadowQuenes[0])._preRender(e$m),e$l._renderShadow(e$m,!0),e$t.endRenderTarget(1);this.removeShaderDefine(e$Im.SHADERDEFINE_CAST_SHADOW)},e$D.addTreeNode=function(e$D){this.treeRoot.addTreeNode(e$D)},e$D.removeTreeNode=function(e$D){this.treeSize&&e$D._treeNode&&e$D._treeNode.removeObject(e$D)},e$D.setlightmaps=function(e$D){this._lightmaps=e$D;for(var e$m=0,e$Y=this._renderableSprite3Ds.length;e$m<e$Y;e$m++)this._renderableSprite3Ds[e$m]._render._applyLightMapParams()},e$D.getlightmaps=function(){return this._lightmaps},e$D.addChildAt=function(e$D,e$m){if(!(e$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(e$D&&e$D.__className));if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),0<=e$m&&e$m<=this._childs.length){if(e$D._parent===this){var e$Y=this.getChildIndex(e$D);this._childs.splice(e$Y,1),this._childs.splice(e$m,0,e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,e$m)),this._childChanged()}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$f.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$m,0,e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,e$m),(e$D.parent=this)._addChild3D(e$D);return e$D}throw new Error("appendChildAt:The index is out of bounds")},e$D.addChild=function(e$D){if(!(e$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),e$D._parent===this){var e$m=this.getChildIndex(e$D);e$m!==this._childs.length-1&&(this._childs.splice(e$m,1),this._childs.push(e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1)),this._childChanged())}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$f.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1),(e$D.parent=this)._childChanged(),this._addChild3D(e$D);return e$D},e$D.removeChildAt=function(e$D){var e$m=this.getChildAt(e$D);return e$m&&(this._removeChild3D(e$m),this._childs.splice(e$D,1),this.conchModel&&this.conchModel.removeChild(e$m.conchModel),e$m.parent=null),e$m},e$D.removeChildren=function(e$D,e$m){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=2147483647),this._childs&&0<this._childs.length){var e$Y=this._childs;if(0===e$D&&e$l<=e$m){var e$t=e$Y;this._childs=e$f.ARRAY_EMPTY}else e$t=e$Y.splice(e$D,e$m-e$D);for(var e$y=0,e$l=e$t.length;e$y<e$l;e$y++)this._removeChild3D(e$t[e$y]),e$t[e$y].parent=null,this.conchModel&&this.conchModel.removeChild(e$t[e$y].conchModel)}return this},e$D.addFrustumCullingObject=function(e$D){this.treeRoot?this.addTreeNode(e$D):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(e$D):this._cullingRenders[this._cullingRendersLength]=e$D,e$D._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},e$D.removeFrustumCullingObject=function(e$D){if(this.treeRoot)this.removeTreeNode(e$D);else{this._cullingRendersLength--;var e$m=e$D._indexInSceneFrustumCullingObjects;if(e$m!==this._cullingRendersLength){var e$Y=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[e$m]=e$Y)._indexInSceneFrustumCullingObjects=e$m,e$D._indexInSceneFrustumCullingObjects=-1}}},e$D.getRenderQueue=function(e$D){return e$D<3e3?this._quenes[1]||(this._quenes[1]=new e$H(this)):this._quenes[2]||(this._quenes[2]=new e$H(this))},e$D.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new e$H(this)},e$D.addShaderDefine=function(e$D){this._shaderDefineValue|=e$D},e$D.removeShaderDefine=function(e$D){this._shaderDefineValue&=~e$D},e$D.addScript=function(e$D){return this._addComponent(e$D)},e$D.getScriptByType=function(e$D,e$m){return void 0===e$m&&(e$m=0),this._getComponentByType(e$D,e$m)},e$D.getScriptsByType=function(e$D,e$m){this._getComponentsByType(e$D,e$m)},e$D.getScriptByIndex=function(e$D){return this._getComponentByIndex(e$D)},e$D.removeScriptByType=function(e$D,e$m){void 0===e$m&&(e$m=0),this._removeComponentByType(e$D,e$m)},e$D.removeScriptsByType=function(e$D){this._removeComponentByType(e$D)},e$D.removeAllScript=function(){this._removeAllComponent()},e$D.render=function(e$D,e$m,e$Y){(e$I._context.ctx._renderKey=0)<this._childs.length&&e$D.addRenderObject(this)},e$D.renderSubmit=function(){var e$D=e$s.mainContext,e$m=this._renderState;this._set3DRenderConfig(e$D),this._prepareSceneToRender(this._renderState);var e$Y,e$t=0,e$y=0;if(e$vm.debugMode||e$V.debugMode)for(e$t=0,e$y=this._cameraPool.length;e$t<e$y;e$t++)e$Y=this._cameraPool[e$t],e$vm._debugPhasorSprite.begin(1,e$Y),e$Y.activeInHierarchy&&e$Y._renderCamera(e$D,e$m,this),e$vm._debugPhasorSprite.end();else for(e$t=0,e$y=this._cameraPool.length;e$t<e$y;e$t++)(e$Y=this._cameraPool[e$t]).activeInHierarchy&&e$Y._renderCamera(e$D,e$m,this);return this._set2DRenderConfig(e$D),1},e$D.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=e$m[0];if("Scene"!==e$t.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var e$y=e$m[1];e$em._createNodeByJson(this,e$t,this,e$y),this.event("hierarchyloaded",[this]),this.__loaded=!0},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),this.destroyed||(e$m.prototype.destroy.call(this,e$D),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,e$W.clearRes(this.url),this.loaded||e$vm._cancelLoadByUrl(this.url))},e$D.getRenderType=function(){return 0},e$D.releaseRender=function(){},e$D._addComponent=function(e$D){var e$m,e$Y=this._componentsMap.indexOf(e$D);if(-1===e$Y)e$m=[],this._componentsMap.push(e$D),this._typeComponentsIndices.push(e$m);else if(e$m=this._typeComponentsIndices[e$Y],this._components[e$m[0]].isSingleton)throw new Error("无法单实例创建"+e$D+"组件，"+e$D+"组件已存在！");var e$t=e$o.getInstance(e$D);e$m.push(this._components.length),this._components.push(e$t);return e$t._initialize(this),e$t},e$D._removeComponent=function(e$D,e$m){var e$Y=this._typeComponentsIndices[e$D],e$t=e$Y[e$m],e$y=this._components[e$t];this._components.splice(e$t,1),e$Y.splice(e$m,1),0===e$Y.length&&(this._typeComponentsIndices.splice(e$D,1),this._componentsMap.splice(e$D,1));for(var e$l=0,e$E=this._componentsMap.length;e$l<e$E;e$l++)for(var e$B=(e$Y=this._typeComponentsIndices[e$l]).length-1;0<=e$B;e$B--){var e$o=e$Y[e$B];if(!(e$t<e$o))break;e$Y[e$B]=--e$o}e$y._destroy()},e$D._getComponentByType=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y=this._componentsMap.indexOf(e$D);return-1===e$Y?null:this._components[this._typeComponentsIndices[e$Y][e$m]]},e$D._getComponentsByType=function(e$D,e$m){var e$Y=this._componentsMap.indexOf(e$D);if(-1!==e$Y){var e$t=this._typeComponentsIndices[e$Y],e$y=e$t.length;e$m.length=e$y;for(var e$l=0;e$l<e$y;e$l++)e$m[e$l]=this._components[e$t[e$l]]}else e$m.length=0},e$D._getComponentByIndex=function(e$D){return this._components[e$D]},e$D._removeComponentByType=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y=this._componentsMap.indexOf(e$D);-1!==e$Y&&this._removeComponent(e$Y,e$m)},e$D._removeComponentsByType=function(e$D){var e$m=this._componentsMap.indexOf(e$D);if(-1!==e$m)for(var e$Y=this._typeComponentsIndices[e$m],e$t=0,e$y=e$Y.length;e$t<e$y;e$Y.length<e$y?e$y--:e$t++)this._removeComponent(e$m,e$t)},e$D._removeAllComponent=function(){for(var e$D=0,e$m=this._componentsMap.length;e$D<e$m;this._componentsMap.length<e$m?e$m--:e$D++)this._removeComponentsByType(this._componentsMap[e$D])},e$D._updateComponents=function(e$D){for(var e$m=0,e$Y=this._components.length;e$m<e$Y;e$m++){var e$t=this._components[e$m];!e$t.started&&(e$t._start(e$D),e$t.started=!0),e$t.enable&&e$t._update(e$D)}},e$D._lateUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._lateUpdate(e$D)}},e$D._preRenderUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._preRenderUpdate(e$D)}},e$D._postRenderUpdateComponents=function(e$D){for(var e$m=0;e$m<this._components.length;e$m++){var e$Y=this._components[e$m];!e$Y.started&&(e$Y._start(e$D),e$Y.started=!0),e$Y.enable&&e$Y._postRenderUpdate(e$D)}},e$G(0,e$D,"_loaded",null,function(e$D){this.__loaded=e$D}),e$G(0,e$D,"fogColor",function(){return this._fogColor},function(e$D){this._fogColor=e$D,this._shaderValues.setValue(0,e$D.elements)}),e$G(0,e$D,"enableFog",function(){return this._enableFog},function(e$D){this._enableFog!==e$D&&((this._enableFog=e$D)?(this.addShaderDefine(e$pm.SHADERDEFINE_FOG),this.removeShaderDefine(e$pm.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(e$pm.SHADERDEFINE_FOG))}),e$G(0,e$D,"url",function(){return this._url}),e$G(0,e$D,"loaded",function(){return this.__loaded}),e$G(0,e$D,"enableDepthFog",function(){return this._enableDepthFog},function(e$D){this._enableDepthFog!=e$D&&((this._enableDepthFog=e$D)?(this.addShaderDefine(e$pm.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(e$pm.SHADERDEFINE_FOG)):this.removeShaderDefine(e$pm.SAHDERDEFINE_DEPTHFOG))}),e$G(0,e$D,"fogStart",function(){return this._fogStart},function(e$D){this._fogStart=e$D,this._shaderValues.setValue(1,e$D)}),e$G(0,e$D,"fogRange",function(){return this._fogRange},function(e$D){this._fogRange=e$D,this._shaderValues.setValue(2,e$D)}),e$G(0,e$D,"ambientColor",function(){return this._ambientColor},function(e$D){this._ambientColor=e$D,this._shaderValues.setValue(21,e$D.elements)}),e$G(0,e$D,"scene",function(){return this}),e$G(0,e$D,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),e$t._sortScenes=function(e$D,e$m){if(e$D.parent!==e$c.stage||e$m.parent!==e$c.stage)return e$D.parent!==e$c.stage&&e$m.parent!==e$c.stage?e$t._sortScenes(e$D.parent,e$m.parent):e$D.parent===e$c.stage?-1:1;var e$Y=e$c.stage._childs;return e$Y.indexOf(e$D)-e$Y.indexOf(e$m)},e$t.load=function(e$D){return e$c.loader.create(e$D,null,null,e$t)},e$t.FOGCOLOR=0,e$t.FOGSTART=1,e$t.FOGRANGE=2,e$t.LIGHTDIRECTION=3,e$t.LIGHTDIRCOLOR=4,e$t.POINTLIGHTPOS=5,e$t.POINTLIGHTRANGE=6,e$t.POINTLIGHTATTENUATION=7,e$t.POINTLIGHTCOLOR=8,e$t.SPOTLIGHTPOS=9,e$t.SPOTLIGHTDIRECTION=10,e$t.SPOTLIGHTSPOT=11,e$t.SPOTLIGHTRANGE=12,e$t.SPOTLIGHTATTENUATION=13,e$t.SPOTLIGHTCOLOR=14,e$t.SHADOWDISTANCE=15,e$t.SHADOWLIGHTVIEWPROJECT=16,e$t.SHADOWMAPPCFOFFSET=17,e$t.SHADOWMAPTEXTURE1=18,e$t.SHADOWMAPTEXTURE2=19,e$t.SHADOWMAPTEXTURE3=20,e$t.AMBIENTCOLOR=21,e$t.TIME=22,e$t}(e$z),e$Lm=function(e$D){function e$m(e$D){e$m.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new e$mm,this._shaderValues=new e$Gm,this._colliders=[],this._id=++e$m._uniqueIDCounter,this._transform=new e$Jm(this),this.name=e$D||"Sprite3D-"+e$m._nameNumberCounter++,this.layer=e$N.currentCreationLayer,this.active=!0}e$R(e$m,"laya.d3.core.Sprite3D",e$Qm);var e$Y=e$m.prototype;return e$c.imps(e$Y,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),e$Y._setUrl=function(e$D){this._url=e$D},e$Y._getGroup=function(){return this._group},e$Y._setGroup=function(e$D){this._group=e$D},e$Y._addChild3D=function(e$D){e$D.transform.parent=this.transform,this._hierarchyAnimator&&(!e$D._hierarchyAnimator&&e$D._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e$D,!0,[e$D.name])),this._scene&&(e$D._setBelongScene(this._scene),this._activeInHierarchy&&e$D._active&&e$D._activeHierarchy())},e$Y._removeChild3D=function(e$D){e$D.transform.parent=null,this._scene&&(this._activeInHierarchy&&e$D._active&&e$D._inActiveHierarchy(),e$D._setUnBelongScene()),this._hierarchyAnimator&&(e$D._hierarchyAnimator==this._hierarchyAnimator&&e$D._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e$D,!1,[e$D.name]))},e$Y._parseBaseCustomProps=function(e$D){var e$m=this.transform.localPosition;e$D.translate?(e$m.fromArray(e$D.translate),e$m.x*=100,e$m.y*=100,e$m.z*=100):e$m.elements.fill(0),this.transform.localPosition=e$m;var e$Y=this.transform.localRotation;e$D.rotation?e$Y.fromArray(e$D.rotation):e$Y.fromArray([0,0,0,-1]),this.transform.localRotation=e$Y;var e$t=this.transform.localScale;e$D.scale?e$t.fromArray(e$D.scale):e$t.elements.fill(1),this.transform.localScale=e$t;var e$y=e$D.layer;null!=e$y&&(this.layer=e$N.getLayerByNumber(e$y))},e$Y._parseCustomComponent=function(e$D,e$m,e$Y){for(var e$t in e$Y){var e$y=e$Y[e$t];switch(e$t){case"Animator":var e$l=this.addComponent(Animator);if(e$y.avatarPath)e$l.avatar=e$W.getRes(e$m[e$y.avatarPath]);else{var e$E=e$y.avatar;if(e$E){e$l.avatar=e$W.getRes(e$m[e$E.path]);var e$B=e$E.linkSprites;e$B&&e$D.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[e$l,e$B])}}for(var e$o=e$y.clipPaths,e$r=e$o.length,e$f=0;e$f<e$r;e$f++)e$l.addClip(e$W.getRes(e$m[e$o[e$f]]));e$l.clip=e$W.getRes(e$m[e$o[0]]);var e$_=e$y.playOnWake;void 0!==e$_&&(e$l.playOnWake=e$_);break;case"Rigidbody":this.addComponent(e$hm);break;case"SphereCollider":var e$i=this.addComponent(SphereCollider);e$i.isTrigger=e$y.isTrigger;var e$R=e$i.center;e$R.fromArray(e$y.center),e$i.center=e$R,e$i.radius=e$y.radius;break;case"BoxCollider":var e$G=this.addComponent(e$Mm);e$G.isTrigger=e$y.isTrigger,e$G.center.fromArray(e$y.center);var e$I=e$G.size;e$I.fromArray(e$y.size),e$G.size=e$I;break;case"MeshCollider":this.addComponent(MeshCollider)}}},e$Y._onRootNodeHierarchyLoaded=function(e$D,e$m){for(var e$Y in e$m){for(var e$t=this,e$y=e$m[e$Y],e$l=0,e$E=e$y.length;e$l<e$E;e$l++){var e$B=e$y[e$l];if(""===e$B)break;if(!(e$t=e$t.getChildByName(e$B)))break}e$t&&e$D.linkSprite3DToAvatarNode(e$Y,e$t)}},e$Y._setHierarchyAnimator=function(e$D,e$m){this._changeHierarchyAnimator(e$D);for(var e$Y=0,e$t=this._childs.length;e$Y<e$t;e$Y++){var e$y=this._childs[e$Y];e$y._hierarchyAnimator==e$m&&e$y._setHierarchyAnimator(e$D,e$m)}},e$Y._clearHierarchyAnimator=function(e$D,e$m){this._changeHierarchyAnimator(e$m);for(var e$Y=0,e$t=this._childs.length;e$Y<e$t;e$Y++){var e$y=this._childs[e$Y];e$y._hierarchyAnimator==e$D&&e$y._clearHierarchyAnimator(e$D,e$m)}},e$Y._getAnimatorToLinkSprite3D=function(e$D,e$m,e$Y){var e$t=this.getComponentByType(Animator);if(e$t&&(e$t.avatar?e$t.avatar._version||e$D._setAnimatorToLinkAvatar(e$t,e$m):e$D._setAnimatorToLinkSprite3DNoAvatar(e$t,e$m,e$Y)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){e$Y.unshift(this._parent.name);var e$y=this._parent;e$y._hierarchyAnimator&&e$y._getAnimatorToLinkSprite3D(e$D,e$m,e$Y)}},e$Y._setAnimatorToLinkSprite3DNoAvatar=function(e$D,e$m,e$Y){var e$t=0,e$y=0;for(e$t=0,e$y=e$D.getClipCount();e$t<e$y;e$t++)e$D._handleSpriteOwnersBySprite(e$t,e$m,e$Y,this);for(e$t=0,e$y=this._childs.length;e$t<e$y;e$t++){var e$l=this._childs[e$t],e$E=e$Y.length;e$Y.push(e$l.name),e$l._setAnimatorToLinkSprite3DNoAvatar(e$D,e$m,e$Y),e$Y.splice(e$E,1)}},e$Y._changeHierarchyAnimator=function(e$D){this._hierarchyAnimator=e$D},e$Y._isLinkSpriteToAnimationNode=function(e$D,e$m,e$Y){var e$t=e$D._avatarNodes.indexOf(e$m),e$y=e$D._cacheSpriteToNodesMap;if(e$Y)this._transform.dummy=e$m.transform,e$D._cacheNodesToSpriteMap[e$t]=e$y.length,e$y.push(e$t);else{this._transform.dummy=null;var e$l=e$D._cacheNodesToSpriteMap[e$t];e$D._cacheNodesToSpriteMap[e$t]=null,e$y.splice(e$l,1)}},e$Y._setBelongScene=function(e$D){this._scene=e$D;for(var e$m=0,e$Y=this._childs.length;e$m<e$Y;e$m++)this._childs[e$m]._setBelongScene(e$D)},e$Y._setUnBelongScene=function(){this._scene=null;for(var e$D=0,e$m=this._childs.length;e$D<e$m;e$D++)this._childs[e$D]._setUnBelongScene()},e$Y._activeHierarchy=function(){var e$D=0,e$m=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),e$D=0,e$m=this._colliders.length;e$D<e$m;e$D++)this._layer._addCollider(this._colliders[e$D]);for(this.event("activeinhierarchychanged",!0),e$D=0,e$m=this._childs.length;e$D<e$m;e$D++){var e$Y=this._childs[e$D];e$Y._active&&e$Y._activeHierarchy()}},e$Y._inActiveHierarchy=function(){var e$D=0,e$m=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),e$D=0,e$m=this._colliders.length;e$D<e$m;e$D++){var e$Y=this._colliders[e$D];e$Y._clearCollsionMap(),this._layer._removeCollider(e$Y)}for(this.event("activeinhierarchychanged",!1),e$D=0,e$m=this._childs.length;e$D<e$m;e$D++){var e$t=this._childs[e$D];e$t._active&&e$t._inActiveHierarchy()}},e$Y.addComponent=function(e$D){var e$m,e$Y=this._componentsMap.indexOf(e$D);if(-1===e$Y)e$m=[],this._componentsMap.push(e$D),this._typeComponentsIndices.push(e$m);else if(e$m=this._typeComponentsIndices[e$Y],this._components[e$m[0]].isSingleton)throw new Error("无法单实例创建"+e$D+"组件，"+e$D+"组件已存在！");var e$t=e$o.getInstance(e$D);if(e$m.push(this._components.length),this._components.push(e$t),e$t instanceof laya.d3.component.physics.Collider)this.getComponentByType(e$hm)&&(e$t._isRigidbody=!0),this._activeInHierarchy&&this._layer._addCollider(e$t),this._colliders.push(e$t);else if(e$t instanceof laya.d3.component.Rigidbody)for(var e$y=0,e$l=this._colliders.length;e$y<e$l;e$y++)this._colliders[e$y]._setIsRigidbody(!0);return e$t instanceof laya.d3.component.Script&&this._scripts.push(e$t),e$t._initialize(this),e$t},e$Y._removeComponent=function(e$D,e$m){var e$Y=0,e$t=0,e$y=this._typeComponentsIndices[e$D],e$l=e$y[e$m],e$E=this._components[e$l];if(e$E instanceof laya.d3.component.physics.Collider){var e$B=e$E;this._activeInHierarchy&&this._layer._removeCollider(e$B),this._colliders.splice(this._colliders.indexOf(e$B),1)}else if(e$E instanceof laya.d3.component.Rigidbody)for(e$Y=0,e$t=this._colliders.length;e$Y<e$t;e$Y++){var e$o=this._colliders[e$Y];e$o._setIsRigidbody(!1);var e$r=e$o._runtimeCollisonMap,e$f=e$o._runtimeCollisonTestMap;for(var e$_ in e$r)delete e$f[e$_]}for(e$E instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(e$E),1),e$y.splice(e$m,1),0===e$y.length&&(this._typeComponentsIndices.splice(e$D,1),this._componentsMap.splice(e$D,1)),e$Y=0,e$t=this._componentsMap.length;e$Y<e$t;e$Y++)for(var e$i=(e$y=this._typeComponentsIndices[e$Y]).length-1;0<=e$i;e$i--){var e$R=e$y[e$i];if(!(e$l<e$R))break;e$y[e$i]=--e$R}e$E._destroy()},e$Y._clearSelfRenderObjects=function(){},e$Y._addSelfRenderObjects=function(){},e$Y._parseCustomProps=function(e$D,e$m,e$Y,e$t){},e$Y._updateChilds=function(e$D){var e$m=this._childs.length;if(0!==e$m)for(var e$Y=0;e$Y<e$m;++e$Y)this._childs[e$Y]._update(e$D)},e$Y._getSortID=function(e$D,e$m){return 1e3*e$m.id+e$D._getVertexBuffer().vertexDeclaration.id},e$Y._update=function(e$D){(e$D.owner=this)._activeInHierarchy&&(this._updateComponents(e$D),this._lateUpdateComponents(e$D),e$A.spriteCount++,this._childs.length&&this._updateChilds(e$D))},e$Y.getProjectionViewWorldMatrix=function(e$D){return e$mm.multiply(e$D,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},e$Y.loadHierarchy=function(e$D){this.addChild(laya.d3.core.Sprite3D.load(e$D))},e$Y.addChildAt=function(e$D,e$m){if(!(e$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),0<=e$m&&e$m<=this._childs.length){if(e$D._parent===this){var e$Y=this.getChildIndex(e$D);this._childs.splice(e$Y,1),this._childs.splice(e$m,0,e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,e$m)),this._childChanged()}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$f.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$m,0,e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,e$m),(e$D.parent=this)._addChild3D(e$D);return e$D}throw new Error("appendChildAt:The index is out of bounds")},e$Y.addChild=function(e$D){if(!(e$D instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$D||this.destroyed||e$D===this)return e$D;if(e$D.zOrder&&this._set$P("hasZorder",!0),e$D._parent===this){var e$m=this.getChildIndex(e$D);e$m!==this._childs.length-1&&(this._childs.splice(e$m,1),this._childs.push(e$D),this.conchModel&&(this.conchModel.removeChild(e$D.conchModel),this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1)),this._childChanged())}else e$D.parent&&e$D.parent.removeChild(e$D),this._childs===e$f.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$D),this.conchModel&&this.conchModel.addChildAt(e$D.conchModel,this._childs.length-1),(e$D.parent=this)._childChanged(),this._addChild3D(e$D);return e$D},e$Y.removeChildAt=function(e$D){var e$m=this.getChildAt(e$D);return e$m&&(this._removeChild3D(e$m),this._childs.splice(e$D,1),this.conchModel&&this.conchModel.removeChild(e$m.conchModel),e$m.parent=null),e$m},e$Y.removeChildren=function(e$D,e$m){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=2147483647),this._childs&&0<this._childs.length){var e$Y=this._childs;if(0===e$D&&e$l<=e$m){var e$t=e$Y;this._childs=e$f.ARRAY_EMPTY}else e$t=e$Y.splice(e$D,e$m-e$D);for(var e$y=0,e$l=e$t.length;e$y<e$l;e$y++)this._removeChild3D(e$t[e$y]),e$t[e$y].parent=null,this.conchModel&&this.conchModel.removeChild(e$t[e$y].conchModel)}return this},e$Y.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=e$m[0];if("Sprite3D"!==e$t.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var e$y=e$m[1];e$em._createNodeByJson(this,e$t,this,e$y),this.event("hierarchyloaded",[this]),this.__loaded=!0},e$Y.cloneTo=function(e$D){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var e$m=e$D;e$m.name=this.name,e$m._destroyed=this._destroyed,e$m.timer=this.timer,e$m._$P=this._$P,e$m.active=this._active;var e$Y=e$m.transform.localPosition;this.transform.localPosition.cloneTo(e$Y),e$m.transform.localPosition=e$Y;var e$t=e$m.transform.localRotation;this.transform.localRotation.cloneTo(e$t),e$m.transform.localRotation=e$t;var e$y=e$m.transform.localScale;this.transform.localScale.cloneTo(e$y),e$m.transform.localScale=e$y,e$m.isStatic=this.isStatic;var e$l=0,e$E=0;for(e$l=0,e$E=this._componentsMap.length;e$l<e$E;e$l++){var e$B=e$m.addComponent(this._componentsMap[e$l]);this._components[e$l]._cloneTo(e$B)}for(e$l=0,e$E=this._childs.length;e$l<e$E;e$l++)e$m.addChild(this._childs[e$l].clone());var e$o=e$m.getComponentByType(Animator);if(e$o){var e$r=e$o._linkSpritesData;if(e$r)for(var e$f in e$r){for(var e$_=e$r[e$f],e$i=e$m,e$R=0,e$G=e$_.length;e$R<e$G&&(e$i=e$i.getChildByName(e$_[e$R]));e$R++);if(e$i){var e$I=e$o._avatarNodeMap[e$f];e$i._isLinkSpriteToAnimationNode(e$o,e$I,!0)}}}},e$Y.clone=function(){var e$D=new this.constructor;return this.cloneTo(e$D),e$D},e$Y.destroy=function(e$D){if(void 0===e$D&&(e$D=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,e$D);var e$m,e$Y=0;for(e$Y=0,e$m=this._components.length;e$Y<e$m;e$Y++)this._components[e$Y]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,e$W.clearRes(this.url),this.loaded||e$vm._cancelLoadByUrl(this.url)}},e$Y._handleSpriteToAvatar=function(e$D,e$m){e$D._avatarNodes;var e$Y=e$D._avatarNodeMap[this.name];e$Y&&e$Y.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(e$D,e$Y,e$m)},e$Y._setAnimatorToLinkAvatar=function(e$D,e$m){this._handleSpriteToAvatar(e$D,e$m);for(var e$Y=0,e$t=this._childs.length;e$Y<e$t;e$Y++){this._childs[e$Y]._setAnimatorToLinkAvatar(e$D,e$m)}},e$G(0,e$Y,"activeInHierarchy",function(){return this._activeInHierarchy}),e$G(0,e$Y,"_loaded",null,function(e$D){this.__loaded=e$D}),e$G(0,e$Y,"active",function(){return this._active},function(e$D){this._active!==e$D&&(this._active=e$D,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(e$D?this._activeHierarchy():this._inActiveHierarchy()))}),e$G(0,e$Y,"componentsCount",function(){return this._components.length}),e$G(0,e$Y,"loaded",function(){return this.__loaded}),e$G(0,e$Y,"id",function(){return this._id}),e$G(0,e$Y,"url",function(){return this._url}),e$G(0,e$Y,"layer",function(){return this._layer},function(e$D){if(this._layer!==e$D){if(!e$D)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var e$m=0,e$Y=this._colliders.length;if(this._layer)for(e$m=0;e$m<e$Y;e$m++)this._layer._removeCollider(this._colliders[e$m]);for(e$m=0;e$m<e$Y;e$m++)e$D._addCollider(this._colliders[e$m])}this._layer=e$D,this.event("layerchanged",e$D)}}),e$G(0,e$Y,"scene",function(){return this._scene}),e$G(0,e$Y,"transform",function(){return this._transform}),e$m.instantiate=function(e$D,e$m,e$Y,e$t,e$y){void 0===e$Y&&(e$Y=!0);var e$l=e$D.clone();e$m&&e$m.addChild(e$l);var e$E=e$l.transform;if(e$Y){var e$B=e$E.worldMatrix;e$D.transform.worldMatrix.cloneTo(e$B),e$E.worldMatrix=e$B}else e$t&&(e$E.position=e$t),e$y&&(e$E.rotation=e$y);return e$l},e$m.load=function(e$D){return e$c.loader.create(e$D,null,null,e$m)},e$m.WORLDMATRIX=0,e$m.MVPMATRIX=1,e$m._uniqueIDCounter=0,e$m._nameNumberCounter=0,e$m}(),e$qm=function(e$D){function e$f(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],e$f.__super.call(this),!e$D||!e$m)throw"Shader Error";this._id=++e$f._count,this._vs=e$D,this._ps=e$m,this._attributeMap=e$Y,this._sceneUniformMap=e$t,this._cameraUniformMap=e$y,this._spriteUniformMap=e$l,this._materialUniformMap=e$E,this._renderElementUniformMap=e$B,this._precompile=e$o,this._define=e$r,this._precompile&&e$f.extCompileObj&&e$f.extCompileFunc?e$f.extCompileFunc.call(e$f.extCompileObj,e$D,e$m,e$r):this.recreateResource()}e$R(e$f,"laya.d3.shader.Shader3D",e$Y);var e$m=e$f.prototype;return e$m.recreateResource=function(){e$T.now();this._compile(),this.completeCreate(),this.memorySize=0},e$m.disposeResource=function(){e$s.mainContext.deleteShader(this._vshader),e$s.mainContext.deleteShader(this._pshader),e$s.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},e$m._compile=function(){if(!e$s.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var e$D=[this._vs,this._ps],e$m=e$s.mainContext;if(this._program=e$m.createProgram(),this._vshader=e$f._createShader(e$m,e$D[0],35633),this._pshader=e$f._createShader(e$m,e$D[1],35632),e$m.attachShader(this._program,this._vshader),e$m.attachShader(this._program,this._pshader),e$m.linkProgram(this._program),!e$I.isConchApp&&e$pm.debugMode&&!e$m.getProgramParameter(this._program,35714))throw e$m.getProgramInfoLog(this._program);var e$Y,e$t=0,e$y=0,e$l=0;for(e$l=e$I.isConchApp?e$m.getProgramParameterEx(this._vs,this._ps,"",35721):e$m.getProgramParameter(this._program,35721),e$t=0;e$t<e$l;e$t++){var e$E=null;e$Y={vartype:"attribute",ivartype:0,attrib:e$E=e$I.isConchApp?e$m.getActiveAttribEx(this._vs,this._ps,"",e$t):e$m.getActiveAttrib(this._program,e$t),location:e$m.getAttribLocation(this._program,e$E.name),name:e$E.name,type:e$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(e$Y)}var e$B=0;for(e$B=e$I.isConchApp?e$m.getProgramParameterEx(this._vs,this._ps,"",35718):e$m.getProgramParameter(this._program,35718),e$t=0;e$t<e$B;e$t++){var e$o=null;e$o=e$I.isConchApp?e$m.getActiveUniformEx(this._vs,this._ps,"",e$t):e$m.getActiveUniform(this._program,e$t),0<(e$Y={vartype:"uniform",ivartype:1,attrib:e$E,location:e$m.getUniformLocation(this._program,e$o.name),name:e$o.name,type:e$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(e$Y.name=e$Y.name.substr(0,e$Y.name.length-3),e$Y.isArray=!0,e$Y.location=e$m.getUniformLocation(this._program,e$Y.name)),this._uniformParams.push(e$Y)}for(e$t=0,e$y=this._attributeParams.length;e$t<e$y;e$t++)(e$Y=this._attributeParams[e$t]).indexOfParams=e$t,e$Y.index=1,e$Y.value=[e$Y.location,null],e$Y.codename=e$Y.name,e$Y.name=null!=this._attributeMap[e$Y.codename]?this._attributeMap[e$Y.codename]:e$Y.codename,this._attributeParamsMap.push(e$Y.name),this._attributeParamsMap.push(e$Y),e$Y._this=this,e$Y.uploadedValue=[],e$Y.fun=this._attribute;for(e$t=0,e$y=this._uniformParams.length;e$t<e$y;e$t++)switch((e$Y=this._uniformParams[e$t]).indexOfParams=e$t,e$Y.index=1,e$Y.value=[e$Y.location,null],e$Y.codename=e$Y.name,null!=this._sceneUniformMap[e$Y.codename]?(e$Y.name=this._sceneUniformMap[e$Y.codename],this._sceneUniformParamsMap.push(e$Y.name),this._sceneUniformParamsMap.push(e$Y)):null!=this._cameraUniformMap[e$Y.codename]?(e$Y.name=this._cameraUniformMap[e$Y.codename],this._cameraUniformParamsMap.push(e$Y.name),this._cameraUniformParamsMap.push(e$Y)):null!=this._spriteUniformMap[e$Y.codename]?(e$Y.name=this._spriteUniformMap[e$Y.codename],this._spriteUniformParamsMap.push(e$Y.name),this._spriteUniformParamsMap.push(e$Y)):null!=this._materialUniformMap[e$Y.codename]?(e$Y.name=this._materialUniformMap[e$Y.codename],this._materialUniformParamsMap.push(e$Y.name),this._materialUniformParamsMap.push(e$Y)):null!=this._renderElementUniformMap[e$Y.codename]?(e$Y.name=this._renderElementUniformMap[e$Y.codename],this._renderElementUniformParamsMap.push(e$Y.name),this._renderElementUniformParamsMap.push(e$Y)):console.log("Shader:can't find uinform name:"+e$Y.codename+" in shader file."),e$Y._this=this,e$Y.uploadedValue=[],e$Y.type){case 5124:e$Y.fun=e$Y.isArray?this._uniform1iv:this._uniform1i;break;case 5126:e$Y.fun=e$Y.isArray?this._uniform1fv:this._uniform1f;break;case 35664:e$Y.fun=e$Y.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:e$Y.fun=e$Y.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:e$Y.fun=e$Y.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:e$Y.fun=this._uniform_sampler2D;break;case 35680:e$Y.fun=this._uniform_samplerCube;break;case 35676:e$Y.fun=this._uniformMatrix4fv;break;case 35670:e$Y.fun=this._uniform1i;break;case 35674:e$Y.fun=this._uinformMatrix2fv;break;case 35675:e$Y.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},e$m._attribute=function(e$D,e$m){var e$Y=e$s.mainContext,e$t=e$B._enableAtributes,e$y=e$D.location;return e$t[e$y]||e$Y.enableVertexAttribArray(e$y),e$Y.vertexAttribPointer(e$y,e$m[0],e$m[1],e$m[2],e$m[3],e$m[4]),e$t[e$y]=e$B._bindVertexBuffer,1},e$m._uniform1f=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m?(e$s.mainContext.uniform1f(e$D.location,e$Y[0]=e$m),1):0},e$m._uniform1fv=function(e$D,e$m){if(e$m.length<4){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$s.mainContext.uniform1fv(e$D.location,e$m),e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3],1):0}return e$s.mainContext.uniform1fv(e$D.location,e$m),1},e$m._uniform_vec2=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]?(e$s.mainContext.uniform2f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1]),1):0},e$m._uniform_vec2v=function(e$D,e$m){if(e$m.length<2){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$s.mainContext.uniform2fv(e$D.location,e$m),e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3],1):0}return e$s.mainContext.uniform2fv(e$D.location,e$m),1},e$m._uniform_vec3=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]?(e$s.mainContext.uniform3f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2]),1):0},e$m._uniform_vec3v=function(e$D,e$m){return e$s.mainContext.uniform3fv(e$D.location,e$m),1},e$m._uniform_vec4=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$s.mainContext.uniform4f(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3]),1):0},e$m._uniform_vec4v=function(e$D,e$m){return e$s.mainContext.uniform4fv(e$D.location,e$m),1},e$m._uniformMatrix2fv=function(e$D,e$m){return e$s.mainContext.uniformMatrix2fv(e$D.location,!1,e$m),1},e$m._uniformMatrix3fv=function(e$D,e$m){return e$s.mainContext.uniformMatrix3fv(e$D.location,!1,e$m),1},e$m._uniformMatrix4fv=function(e$D,e$m){return e$s.mainContext.uniformMatrix4fv(e$D.location,!1,e$m),1},e$m._uinformMatrix2fv=function(e$D,e$m){return e$s.mainContext.uniformMatrix2fv(e$D.location,!1,e$m),1},e$m._uinformMatrix3fv=function(e$D,e$m){return e$s.mainContext.uniformMatrix3fv(e$D.location,!1,e$m),1},e$m._uniform1i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m?(e$s.mainContext.uniform1i(e$D.location,e$Y[0]=e$m),1):0},e$m._uniform1iv=function(e$D,e$m){return e$s.mainContext.uniform1iv(e$D.location,e$m),1},e$m._uniform_ivec2=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]?(e$s.mainContext.uniform2i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1]),1):0},e$m._uniform_ivec2v=function(e$D,e$m){return e$s.mainContext.uniform2iv(e$D.location,e$m),1},e$m._uniform_vec3i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]?(e$s.mainContext.uniform3i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2]),1):0},e$m._uniform_vec3vi=function(e$D,e$m){return e$s.mainContext.uniform3iv(e$D.location,e$m),1},e$m._uniform_vec4i=function(e$D,e$m){var e$Y=e$D.uploadedValue;return e$Y[0]!==e$m[0]||e$Y[1]!==e$m[1]||e$Y[2]!==e$m[2]||e$Y[3]!==e$m[3]?(e$s.mainContext.uniform4i(e$D.location,e$Y[0]=e$m[0],e$Y[1]=e$m[1],e$Y[2]=e$m[2],e$Y[3]=e$m[3]),1):0},e$m._uniform_vec4vi=function(e$D,e$m){return e$s.mainContext.uniform4iv(e$D.location,e$m),1},e$m._uniform_sampler2D=function(e$D,e$m){var e$Y=e$m.source||e$m.defaulteTexture.source,e$t=e$s.mainContext,e$y=e$D.uploadedValue;if(null!=e$y[0])return e$t.activeTexture(e$f._TEXTURES[e$y[0]]),e$Y&&e$Q.bindTexture(e$t,3553,e$Y),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return e$y[0]=this._curActTexIndex,e$t.uniform1i(e$D.location,this._curActTexIndex),e$t.activeTexture(e$f._TEXTURES[this._curActTexIndex]),e$Y&&e$Q.bindTexture(e$t,3553,e$Y),this._curActTexIndex++,1},e$m._uniform_samplerCube=function(e$D,e$m){var e$Y=e$m.source||e$m.defaulteTexture.source,e$t=e$s.mainContext,e$y=e$D.uploadedValue;if(null!=e$y[0])return e$t.activeTexture(e$f._TEXTURES[e$y[0]]),e$Y?e$Q.bindTexture(e$t,34067,e$Y):e$Q.bindTexture(e$t,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return e$y[0]=this._curActTexIndex,e$t.uniform1i(e$D.location,this._curActTexIndex),e$t.activeTexture(e$f._TEXTURES[this._curActTexIndex]),e$Y?e$Q.bindTexture(e$t,34067,e$Y):e$Q.bindTexture(e$t,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},e$m._noSetValue=function(e$D){console.log("no....:"+e$D.name)},e$m.bind=function(){return e$Y.activeShader=this,(e$Y.bindShader=this).activeResource(),e$Q.UseProgram(this._program)},e$m.uploadAttributes=function(e$D,e$m){for(var e$Y,e$t,e$y=0,e$l=0,e$E=this._attributeParamsMap.length;e$l<e$E;e$l+=2)e$t=this._attributeParamsMap[e$l+1],null!=(e$Y=e$D[this._attributeParamsMap[e$l]])&&(e$m&&e$m[e$t.name]&&e$m[e$t.name].bind(),e$y+=e$t.fun.call(this,e$t,e$Y));e$A.shaderCall+=e$y},e$m.uploadAttributesX=function(e$D,e$m){for(var e$Y,e$t,e$y=0,e$l=0,e$E=this._attributeParamsMap.length;e$l<e$E;e$l+=2)e$t=this._attributeParamsMap[e$l+1],null!=(e$Y=e$D[this._attributeParamsMap[e$l]])&&(e$m._bind(),e$y+=e$t.fun.call(this,e$t,e$Y));e$A.shaderCall+=e$y},e$m.uploadSceneUniforms=function(e$D){for(var e$m,e$Y,e$t=0,e$y=0,e$l=this._sceneUniformParamsMap.length;e$y<e$l;e$y+=2)e$Y=this._sceneUniformParamsMap[e$y+1],null!=(e$m=e$D[this._sceneUniformParamsMap[e$y]])&&(e$t+=e$Y.fun.call(this,e$Y,e$m));e$A.shaderCall+=e$t},e$m.uploadCameraUniforms=function(e$D){for(var e$m,e$Y,e$t=0,e$y=0,e$l=this._cameraUniformParamsMap.length;e$y<e$l;e$y+=2)e$Y=this._cameraUniformParamsMap[e$y+1],null!=(e$m=e$D[this._cameraUniformParamsMap[e$y]])&&(e$t+=e$Y.fun.call(this,e$Y,e$m));e$A.shaderCall+=e$t},e$m.uploadSpriteUniforms=function(e$D){for(var e$m,e$Y,e$t=0,e$y=0,e$l=this._spriteUniformParamsMap.length;e$y<e$l;e$y+=2)e$Y=this._spriteUniformParamsMap[e$y+1],null!=(e$m=e$D[this._spriteUniformParamsMap[e$y]])&&(e$t+=e$Y.fun.call(this,e$Y,e$m));e$A.shaderCall+=e$t},e$m.uploadMaterialUniforms=function(e$D){for(var e$m,e$Y,e$t=0,e$y=0,e$l=this._materialUniformParamsMap.length;e$y<e$l;e$y+=2)e$Y=this._materialUniformParamsMap[e$y+1],null!=(e$m=e$D[this._materialUniformParamsMap[e$y]])&&(e$t+=e$Y.fun.call(this,e$Y,e$m));e$A.shaderCall+=e$t},e$m.uploadRenderElementUniforms=function(e$D){for(var e$m,e$Y,e$t=0,e$y=0,e$l=this._renderElementUniformParamsMap.length;e$y<e$l;e$y+=2)e$Y=this._renderElementUniformParamsMap[e$y+1],null!=(e$m=e$D[this._renderElementUniformParamsMap[e$y]])&&(e$t+=e$Y.fun.call(this,e$Y,e$m));e$A.shaderCall+=e$t},e$f.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return new e$f(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r)},e$f.addInclude=function(e$D,e$m){e$e.addInclude(e$D,e$m)},e$f._createShader=function(e$D,e$m,e$Y){var e$t=e$D.createShader(e$Y);if(e$D.shaderSource(e$t,e$m),e$D.compileShader(e$t),e$pm.debugMode&&!e$D.getShaderParameter(e$t,35713))throw e$D.getShaderInfoLog(e$t);return e$t},e$f.PERIOD_RENDERELEMENT=0,e$f.PERIOD_MATERIAL=1,e$f.PERIOD_SPRITE=2,e$f.PERIOD_CAMERA=3,e$f.PERIOD_SCENE=4,e$f._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],e$f._count=0,e$f._preCompile=!1,e$f.extCompileFunc=null,e$f.extCompileObj=null,e$_(e$f,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new e$J}]),e$f}(),e$$m=function(e$B){function e$o(){this._transformUV=null,e$o.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new e$om(.6,.6,.6)),this._setColor(10,new e$om(1,1,1)),this._setColor(11,new e$rm(1,1,1,8)),this._setColor(12,new e$om(1,1,1)),this._setColor(7,new e$rm(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new e$rm(1,1,0,0)),this.renderMode=1}e$R(e$o,"laya.d3.core.material.StandardMaterial",e$B);var e$D=e$o.prototype;return e$D.disableLight=function(){this._addDisablePublicShaderDefine(e$pm.SHADERDEFINE_POINTLIGHT|e$pm.SHADERDEFINE_SPOTLIGHT|e$pm.SHADERDEFINE_DIRECTIONLIGHT)},e$D.disableFog=function(){this._addDisablePublicShaderDefine(e$pm.SHADERDEFINE_FOG)},e$D.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=e$m[0];if(e$t.version)e$B.prototype.onAsynLoaded.call(this,e$D,e$m,e$Y);else{var e$y=e$m[1],e$l=e$t.props;for(var e$E in e$l)this[e$E]=e$l[e$E];e$o._parseStandardMaterial(e$y,this,e$t),this._endLoaded()}},e$D.cloneTo=function(e$D){e$B.prototype.cloneTo.call(this,e$D);var e$m=e$D;this._transformUV&&(e$m._transformUV=this._transformUV.clone())},e$G(0,e$D,"ambientColor",function(){return this._getColor(9)},function(e$D){this._setColor(9,e$D)}),e$G(0,e$D,"ambientTexture",function(){return this._getTexture(5)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,e$D)}),e$G(0,e$D,"renderMode",null,function(e$D){switch(e$D){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e$D)}),e$G(0,e$D,"reflectColor",function(){return this._getColor(12)},function(e$D){this._setColor(12,e$D)}),e$G(0,e$D,"tilingOffset",function(){return this._getColor(15)},function(e$D){if(e$D){var e$m=e$D.elements;1!=e$m[0]||1!=e$m[1]||0!=e$m[2]||0!=e$m[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,e$D)}),e$G(0,e$D,"albedo",function(){return this._getColor(7)},function(e$D){this._setColor(7,e$D)}),e$G(0,e$D,"diffuseColor",function(){return this._getColor(10)},function(e$D){this._setColor(10,e$D)}),e$G(0,e$D,"albedoColor",function(){return this._getColor(7)},function(e$D){this._setColor(7,e$D)}),e$G(0,e$D,"specularColor",function(){return this._getColor(11)},function(e$D){this._setColor(11,e$D)}),e$G(0,e$D,"diffuseTexture",function(){return this._getTexture(1)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,e$D)}),e$G(0,e$D,"normalTexture",function(){return this._getTexture(2)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,e$D)}),e$G(0,e$D,"specularTexture",function(){return this._getTexture(3)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,e$D)}),e$G(0,e$D,"emissiveTexture",function(){return this._getTexture(4)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,e$D)}),e$G(0,e$D,"reflectTexture",function(){return this._getTexture(6)},function(e$D){e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,e$D)}),e$G(0,e$D,"transformUV",function(){return this._transformUV},function(e$D){this._transformUV=e$D,this._setMatrix4x4(13,e$D.matrix),e$D?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,e$D.matrix.elements,0)}),e$o.__init__=function(){e$o.SHADERDEFINE_DIFFUSEMAP=e$o.shaderDefines.registerDefine("DIFFUSEMAP"),e$o.SHADERDEFINE_NORMALMAP=e$o.shaderDefines.registerDefine("NORMALMAP"),e$o.SHADERDEFINE_SPECULARMAP=e$o.shaderDefines.registerDefine("SPECULARMAP"),e$o.SHADERDEFINE_EMISSIVEMAP=e$o.shaderDefines.registerDefine("EMISSIVEMAP"),e$o.SHADERDEFINE_AMBIENTMAP=e$o.shaderDefines.registerDefine("AMBIENTMAP"),e$o.SHADERDEFINE_REFLECTMAP=e$o.shaderDefines.registerDefine("REFLECTMAP"),e$o.SHADERDEFINE_UVTRANSFORM=e$o.shaderDefines.registerDefine("UVTRANSFORM"),e$o.SHADERDEFINE_TILINGOFFSET=e$o.shaderDefines.registerDefine("TILINGOFFSET"),e$o.SHADERDEFINE_ADDTIVEFOG=e$o.shaderDefines.registerDefine("ADDTIVEFOG")},e$o.load=function(e$D){return e$c.loader.create(e$D,null,null,e$o)},e$o._parseStandardMaterial=function(e$D,e$m,e$Y){var e$t=e$Y.customProps,e$y=e$t.ambientColor;e$m.ambientColor=new e$om(e$y[0],e$y[1],e$y[2]);var e$l=e$t.diffuseColor;e$m.diffuseColor=new e$om(e$l[0],e$l[1],e$l[2]);var e$E=e$t.specularColor;e$m.specularColor=new e$rm(e$E[0],e$E[1],e$E[2],e$E[3]);var e$B=e$t.reflectColor;e$m.reflectColor=new e$om(e$B[0],e$B[1],e$B[2]);var e$o=e$t.albedoColor;e$o&&(e$m.albedo=new e$rm(e$o[0],e$o[1],e$o[2],e$o[3]));var e$r=e$t.diffuseTexture.texture2D;e$r&&(e$m.diffuseTexture=e$W.getRes(e$D[e$r]));var e$f=e$t.normalTexture.texture2D;e$f&&(e$m.normalTexture=e$W.getRes(e$D[e$f]));var e$_=e$t.specularTexture.texture2D;e$_&&(e$m.specularTexture=e$W.getRes(e$D[e$_]));var e$i=e$t.emissiveTexture.texture2D;e$i&&(e$m.emissiveTexture=e$W.getRes(e$D[e$i]));var e$R=e$t.ambientTexture.texture2D;e$R&&(e$m.ambientTexture=e$W.getRes(e$D[e$R]));var e$G=e$t.reflectTexture.texture2D;e$G&&(e$m.reflectTexture=e$W.getRes(e$D[e$G]))},e$o.RENDERMODE_OPAQUE=1,e$o.RENDERMODE_OPAQUEDOUBLEFACE=2,e$o.RENDERMODE_CUTOUT=3,e$o.RENDERMODE_CUTOUTDOUBLEFACE=4,e$o.RENDERMODE_TRANSPARENT=13,e$o.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e$o.RENDERMODE_ADDTIVE=15,e$o.RENDERMODE_ADDTIVEDOUBLEFACE=16,e$o.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e$o.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e$o.RENDERMODE_DEPTHREAD_ADDTIVE=7,e$o.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e$o.RENDERMODE_NONDEPTH_TRANSPARENT=9,e$o.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e$o.RENDERMODE_NONDEPTH_ADDTIVE=11,e$o.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e$o.SHADERDEFINE_DIFFUSEMAP=0,e$o.SHADERDEFINE_NORMALMAP=0,e$o.SHADERDEFINE_SPECULARMAP=0,e$o.SHADERDEFINE_EMISSIVEMAP=0,e$o.SHADERDEFINE_AMBIENTMAP=0,e$o.SHADERDEFINE_REFLECTMAP=0,e$o.SHADERDEFINE_UVTRANSFORM=0,e$o.SHADERDEFINE_TILINGOFFSET=0,e$o.SHADERDEFINE_ADDTIVEFOG=0,e$o.DIFFUSETEXTURE=1,e$o.NORMALTEXTURE=2,e$o.SPECULARTEXTURE=3,e$o.EMISSIVETEXTURE=4,e$o.AMBIENTTEXTURE=5,e$o.REFLECTTEXTURE=6,e$o.ALBEDO=7,e$o.UVANIAGE=8,e$o.MATERIALAMBIENT=9,e$o.MATERIALDIFFUSE=10,e$o.MATERIALSPECULAR=11,e$o.MATERIALREFLECT=12,e$o.UVMATRIX=13,e$o.UVAGE=14,e$o.TILINGOFFSET=15,e$_(e$o,["defaultMaterial",function(){var e$D=new e$o;return e$D.lock=!0,this.defaultMaterial=e$D},"shaderDefines",function(){return this.shaderDefines=new e$im(e$Tm.shaderDefines)}]),e$o}(e$Tm),e$dm=function(e$D){function e$E(e$D,e$m,e$Y,e$t,e$y){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===e$Y&&(e$Y=35044),void 0===e$t&&(e$t=!1),e$E.__super.call(this),this._indexType=e$D,this._indexCount=e$m,this._bufferUsage=e$Y,this._bufferType=34963,this._canRead=e$t;var e$l;if("ushort"==e$D)this._indexTypeByteCount=2;else{if("ubyte"!=e$D)throw new Error("unidentification index type.");this._indexTypeByteCount=1}e$l=this._indexTypeByteCount*e$m,this._byteLength=e$l,this._bind(),e$B._gl.bufferData(this._bufferType,e$l,this._bufferUsage),this.uri=e$y,e$t?("ushort"==e$D?this._buffer=new Uint16Array(e$m):"ubyte"==e$D&&(this._buffer=new Uint8Array(e$m)),this.memorySize=2*e$l):this.memorySize=e$l}e$R(e$E,"laya.d3.graphics.IndexBuffer3D",e$D);var e$m=e$E.prototype;return e$m.setData=function(e$D,e$m,e$Y,e$t){void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=4294967295);var e$y=0;if("ushort"==this._indexType?(e$y=2,0===e$Y&&4294967295===e$t||(e$D=new Uint16Array(e$D.buffer,e$Y*e$y,e$t))):"ubyte"==this._indexType&&(e$y=1,0===e$Y&&4294967295===e$t||(e$D=new Uint8Array(e$D.buffer,e$Y*e$y,e$t))),this._bind(),e$B._gl.bufferSubData(this._bufferType,e$m*e$y,e$D),this._canRead)if(0!==e$m||0!==e$Y||4294967295!==e$t){var e$l=this._buffer.length-e$m;e$l<e$t&&(e$t=e$l);for(var e$E=0;e$E<e$t;e$E++)this._buffer[e$m+e$E]=e$D[e$E]}else this._buffer=e$D},e$m.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},e$m.disposeResource=function(){e$D.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},e$G(0,e$m,"indexType",function(){return this._indexType}),e$G(0,e$m,"indexTypeByteCount",function(){return this._indexTypeByteCount}),e$G(0,e$m,"indexCount",function(){return this._indexCount}),e$G(0,e$m,"canRead",function(){return this._canRead}),e$E.INDEXTYPE_UBYTE="ubyte",e$E.INDEXTYPE_USHORT="ushort",e$E.create=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$Y&&(e$Y=35044),void 0===e$t&&(e$t=!1),new e$E(e$D,e$m,e$Y,e$t,e$y)},e$E}(e$B),e$km=function(e$l){function e$E(e$D,e$m,e$Y,e$t,e$y){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===e$t&&(e$t=!1),e$E.__super.call(this),this._vertexDeclaration=e$D,this._vertexCount=e$m,this._bufferUsage=e$Y,this._bufferType=34962,this._canRead=e$t,this.uri=e$y,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*e$m,this._bind(),e$B._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),e$t&&(this._buffer=new Float32Array(this._byteLength/4))}e$R(e$E,"laya.d3.graphics.VertexBuffer3D",e$l);var e$D=e$E.prototype;return e$D.bindWithIndexBuffer=function(e$D){e$D&&e$D._bind(),this._bind()},e$D.setData=function(e$D,e$m,e$Y,e$t){if(void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=4294967295),0===e$Y&&4294967295===e$t||(e$D=new Float32Array(e$D.buffer,4*e$Y,e$t)),this._bind(),e$B._gl.bufferSubData(this._bufferType,4*e$m,e$D),this._canRead)if(0!==e$m||0!==e$Y||4294967295!==e$t){var e$y=this._buffer.length-e$m;e$y<e$t&&(e$t=e$y);for(var e$l=0;e$l<e$t;e$l++)this._buffer[e$m+e$l]=e$D[e$l]}else this._buffer=e$D},e$D.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},e$D.disposeResource=function(){for(var e$D=e$s.mainContext,e$m=this._vertexDeclaration.getVertexElements(),e$Y=e$B._enableAtributes,e$t=0,e$y=e$m.length;e$t<e$y;e$t++)e$Y[e$t]===this._glBuffer&&(e$D.disableVertexAttribArray(e$t),e$Y[e$t]=null);e$l.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},e$G(0,e$D,"vertexDeclaration",function(){return this._vertexDeclaration}),e$G(0,e$D,"vertexCount",function(){return this._vertexCount}),e$G(0,e$D,"canRead",function(){return this._canRead}),e$E.create=function(e$D,e$m,e$Y,e$t,e$y){return void 0===e$Y&&(e$Y=35044),void 0===e$t&&(e$t=!1),new e$E(e$D,e$m,e$Y,e$t,e$y)},e$E}(e$B),e$Mm=function(e$D){function e$o(){this._size=null,this._transformOrientedBoundBox=null,this.center=null,e$o.__super.call(this),this._needUpdate=!1}e$R(e$o,"laya.d3.component.physics.BoxCollider",e$Om);var e$m=e$o.prototype;return e$m._updateCollider=function(){if(this._needUpdate){var e$D=this._transformOrientedBoundBox.transformation,e$m=this._owner.transform,e$Y=e$m.rotation,e$t=e$m.scale,e$y=this.center.elements;0===e$y[0]&&0===e$y[1]&&0===e$y[2]?e$mm.createAffineTransformation(e$m.position,e$Y,e$om.ONE,e$D):(e$om.multiply(this.center,e$t,e$o._deviationV3),e$om.transformQuat(e$o._deviationV3,e$Y,e$o._deviationV3),e$om.add(e$m.position,e$o._deviationV3,e$o._deviationV3),e$mm.createAffineTransformation(e$o._deviationV3,e$Y,e$om.ONE,e$D)),this._transformOrientedBoundBox.transformation=e$D;var e$l=this._transformOrientedBoundBox.extents.elements,e$E=this._size.elements,e$B=e$t.elements;e$l[0]=.5*e$E[0]*e$B[0],e$l[1]=.5*e$E[1]*e$B[1],e$l[2]=.5*e$E[2]*e$B[2],this._needUpdate=!1}},e$m._onWorldMatrixChanged=function(){for(var e$D in this._needUpdate=!0,this._runtimeCollisonMap)this._runtimeCollisonTestMap[e$D]=!0,this._runtimeCollisonMap[e$D]._runtimeCollisonTestMap[this.id]=!0},e$m._initialize=function(e$D){laya.d3.component.Component3D.prototype._initialize.call(this,e$D),this._transformOrientedBoundBox=new e$Ym(new e$om,new e$mm),this._size=new e$om,this.center=new e$om,e$D.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged),this._needUpdate=!0},e$m._getType=function(){return 1},e$m._collisonTo=function(e$D){switch(e$D._getType()){case 0:return 0!==this.boundBox.containsSphere(e$D.boundSphere);case 1:return 0!==this.boundBox.containsOrientedBoundBox(e$D.boundBox);case 2:var e$m=e$D;if(0===this.boundBox.containsBoundBox(e$m._boundBox))return!1;for(var e$Y=e$D.mesh._positions,e$t=0,e$y=e$Y.length;e$t<e$y;e$t++)if(1===this.boundBox.containsPoint(e$Y[e$t]))return!0;return!1;default:throw new Error("BoxCollider:unknown collider type.")}},e$m._cloneTo=function(e$D){var e$m=e$D,e$Y=e$m.size;this.size.cloneTo(e$Y),e$m.size=e$Y,this.center.cloneTo(e$m.center)},e$m.raycast=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=179e306),this._updateCollider();var e$t=this._transformOrientedBoundBox.intersectsRay(e$D,e$m.position);return-1!==e$t&&e$t<=e$Y?(e$m.distance=e$t,e$m.sprite3D=this._owner,!0):(e$m.distance=-1,e$m.sprite3D=null,!1)},e$m.setFromBoundBox=function(e$D){e$Ym.createByBoundBox(e$D,this._transformOrientedBoundBox);var e$m=this._transformOrientedBoundBox.extents;this._size=new e$om(2*e$m.x,2*e$m.y,2*e$m.z),this.center=new e$om,e$om.add(e$D.min,e$D.max,this.center),e$om.scale(this.center,.5,this.center),this._needUpdate=!0},e$G(0,e$m,"boundBox",function(){return this._updateCollider(),this._transformOrientedBoundBox}),e$G(0,e$m,"size",function(){return this._size},function(e$D){this._size=e$D,this._needUpdate=!0}),e$_(e$o,["_deviationV3",function(){return this._deviationV3=new e$om},"_obbCenterV3",function(){return this._obbCenterV3=new e$om}]),e$o}(),e$nm=function(e$D){function e$e(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,e$e.__super.call(this),this._type=3553}e$R(e$e,"laya.d3.resource.DataTexture2D",e$Nm);var e$m=e$e.prototype;return e$m.genDebugMipmaps=function(){var e$D=[];return e$D.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),e$D.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),e$D.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),e$D.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),e$D.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),e$D.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),e$D.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),e$D.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),e$D.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),e$D.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),e$D},e$m._onTextureLoaded=function(e$D){},e$m._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var e$D=e$s.mainContext,e$m=this._source=e$D.createTexture(),e$Y=this._width,e$t=this._height,e$y=e$Q.curBindTexTarget,e$l=e$Q.curBindTexValue,e$E=!1;if(e$Q.bindTexture(e$D,this._type,e$m),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var e$B=0;e$D.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var e$o=0;e$o<this._mipmaps.length;e$o++){if(this._mipmaps[e$o].byteLength!=e$r*e$f*4)throw"mipmap size error  level:"+e$o;e$D.texSubImage2D(this._type,0,e$e.simLodRect[e$B++],e$e.simLodRect[e$B++],e$e.simLodRect[e$B++],e$e.simLodRect[e$B++],6408,5121,new Uint8Array(this._mipmaps[e$o]))}this.minFifter=9729,this.magFifter=9729}else{var e$r=this._width,e$f=this._height;for(e$B=0,e$D.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),e$o=0;e$o<this._mipmaps.length;e$o++){if(this._mipmaps[e$o].byteLength!=e$r*e$f*4)throw"mipmap size error  level:"+e$o;e$D.texImage2D(this._type,e$o,6408,e$r,e$f,0,6408,5121,new Uint8Array(this._mipmaps[e$o])),(e$r/=2)<1&&(e$r=1),(e$f/=2)<1&&(e$f=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&e$D.pixelStorei(e$D.UNPACK_ALIGNMENT,1),e$D.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var e$_=0,e$i=!1,e$R=!1;this._buffer.byteLength==4*e$Y*e$t?(e$_=6408,e$i=!0):this._buffer.byteLength==3*e$Y*e$t?(e$_=6407,e$R=!0):e$_=this._format,e$i||e$R?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),e$R&&e$D.pixelStorei(e$D.UNPACK_ALIGNMENT,1),e$D.texImage2D(this._type,0,e$_,e$Y,e$t,0,e$_,5121,this._buffer)):e$D&&e$_==e$D.ALPHA?(e$D.texImage2D(3553,0,e$_,e$Y,e$t,0,e$_,e$D.UNSIGNED_BYTE,this._buffer),e$E=!0):0!=e$_&&(e$D.compressedTexImage2D(3553,0,e$_,e$Y,e$t,0,this._buffer),e$E=!0)}var e$G=this._minFifter,e$I=this._magFifter,e$w=0==this._wrapModeU?10497:33071,e$W=0==this._wrapModeV?10497:33071,e$U=e$v.isPOT(e$Y,e$t);e$U?(this._mipmap||this._mipmaps?-1!==e$G||(e$G=9987):-1!==e$G||(e$G=9729),-1!==e$I||(e$I=9729),e$D.texParameteri(this._type,10241,e$G),e$D.texParameteri(this._type,10240,e$I),e$D.texParameteri(this._type,10242,e$w),e$D.texParameteri(this._type,10243,e$W),this._mipmap&&e$D.generateMipmap(this._type)):(-1!==e$G||(e$G=9729),-1!==e$I||(e$I=9729),e$D.texParameteri(this._type,10241,e$G),e$D.texParameteri(this._type,10240,e$I),e$D.texParameteri(this._type,10242,33071),e$D.texParameteri(this._type,10243,33071)),e$y&&e$l&&e$Q.bindTexture(e$D,e$y,e$l),this.memorySize=e$E?this._buffer.length:e$U?e$Y*e$t*4*(1+1/3):e$Y*e$t*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},e$m.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},e$m.onAsynLoaded=function(e$D,e$m,e$Y){var e$t;e$Y&&(e$t=e$Y[0].call(this,e$m)),e$t&&(this._width=e$t.width,this._height=e$t.height,this._buffer=e$t.data),this._src=e$D,this._size=new e$Um(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},e$m.getPixels=function(){return new Uint8Array(this._buffer)},e$m.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(e$s.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},e$G(0,e$m,"src",function(){return this._src}),e$e.create=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){if(void 0===e$t&&(e$t=9729),void 0===e$y&&(e$y=9729),void 0===e$l&&(e$l=!0),!e$D||e$D.byteLength<e$m*e$Y*4)throw"DataTexture2D create error";var e$B=new e$e;return e$B.uri=e$E,e$B._buffer=e$D,e$B._width=e$m,e$B._height=e$Y,e$B._mipmap=e$l,e$B._magFifter=e$t,e$B._minFifter=e$y,e$B._size=new e$Um(e$B._width,e$B._height),e$B._conchTexture?alert("怎么给runtime传递datatexture数据"):e$B.activeResource(),e$B},e$e.load=function(e$D,e$m,e$Y,e$t,e$y){if(void 0===e$m&&(e$m=0),void 0===e$Y&&(e$Y=0),void 0===e$t&&(e$t=9729),void 0===e$y&&(e$y=9729),"mipmaps"===e$a.getFileExtension(e$D)){var e$l=e$c.loader.create(e$D,null,null,e$e,[function(e$D){this._mipmaps=[];var e$m=new Uint32Array(e$D);this._width=e$m[0];var e$Y=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,e$Y=1024),this._width!=e$Y)throw"现在只支持512x256的环境贴图。当前的是"+e$m[0];this._height=e$m[1];for(var e$t=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,e$y=this._height,e$l=8;;){var e$E=e$t*e$y*4;if(e$l+e$E>e$D.byteLength)throw"load mipmaps data size error ";var e$B=new Uint8Array(e$D,e$l,e$E);if(this._mipmaps.push(e$B),e$l+=e$E,1==e$t&&1==e$y)break;(e$t/=2)<1&&(e$t=1),(e$y/=2)<1&&(e$y=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){e$l.simLodInfo=new Float32Array(40);for(var e$E=0;e$E<e$l.simLodInfo.length;)e$l.simLodInfo[e$E]=(e$e.simLodRect[e$E]+.5)/1024,e$E++,e$l.simLodInfo[e$E]=(e$e.simLodRect[e$E]+.5)/256,e$E++,e$l.simLodInfo[e$E]=Math.max(e$e.simLodRect[e$E]-1,.1)/1024,e$E++,e$l.simLodInfo[e$E]=Math.max(e$e.simLodRect[e$E]-1.5,.1)/256,e$E++}return e$l}if("number"==typeof e$m)return e$c.loader.create(e$D,null,null,e$e,[function(e$D){return this._width=e$m,this._height=e$Y,this._buffer=e$D,null}]);if("function"==typeof e$m)return e$c.loader.create(e$D,null,null,e$e,[e$m]);throw new Error("unknown params.")},e$e.lodasatlas=!1,e$_(e$e,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),e$e}(),e$gm=function(e$D){function e$m(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,e$m.__super.call(this)}e$R(e$m,"laya.d3.resource.models.PrimitiveMesh",e$Cm);var e$Y=e$m.prototype;return e$c.imps(e$Y,{"laya.d3.core.render.IRenderable":!0}),e$Y._getVertexBuffer=function(e$D){return void 0===e$D&&(e$D=0),0===e$D?this._vertexBuffer:null},e$Y._getVertexBuffers=function(){return null},e$Y._getIndexBuffer=function(){return this._indexBuffer},e$Y._getPositions=function(){var e$D,e$m=[],e$Y=this._vertexBuffer.vertexDeclaration.getVertexElements(),e$t=0;for(e$t=0;e$t<e$Y.length;e$t++){var e$y=e$Y[e$t];if("vector3"===e$y.elementFormat&&0===e$y.elementUsage){e$D=e$y;break}}var e$l=this._vertexBuffer.getData();for(e$t=0;e$t<e$l.length;e$t+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var e$E=e$t+e$D.offset/4,e$B=new e$om(e$l[e$E+0],e$l[e$E+1],e$l[e$E+2]);e$m.push(e$B)}return e$m},e$Y.getRenderElement=function(e$D){return this},e$Y.getRenderElementsCount=function(){return 1},e$Y.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},e$Y._beforeRender=function(e$D){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$Y._render=function(e$D){e$s.mainContext.drawElements(4,this._numberIndices,5123,0),e$A.drawCall++,e$A.trianglesFaces+=this._numberIndices/3},e$G(0,e$Y,"_vertexBufferCount",function(){return 1}),e$G(0,e$Y,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$m}(),e$Hm=function(e$D){function e$m(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,e$m.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}e$R(e$m,"laya.d3.resource.models.Mesh",e$Cm);var e$Y=e$m.prototype;return e$Y._getPositions=function(){var e$D,e$m,e$Y,e$t,e$y,e$l=[],e$E=0,e$B=0,e$o=0;if(0!==this._vertexBuffers.length){var e$r=this._vertexBuffers.length;for(e$E=0;e$E<e$r;e$E++){for(e$Y=(e$D=this._vertexBuffers[e$E]).vertexDeclaration.getVertexElements(),e$B=0;e$B<e$Y.length;e$B++)if("vector3"===(e$t=e$Y[e$B]).elementFormat&&0===e$t.elementUsage){e$m=e$t;break}for(e$y=e$D.getData(),e$B=0;e$B<e$y.length;e$B+=e$D.vertexDeclaration.vertexStride/4)e$o=e$B+e$m.offset/4,e$l.push(new e$om(e$y[e$o+0],e$y[e$o+1],e$y[e$o+2]))}}else{var e$f=this._subMeshes.length;for(e$E=0;e$E<e$f;e$E++){for(e$Y=(e$D=this._subMeshes[e$E]._getVertexBuffer()).vertexDeclaration.getVertexElements(),e$B=0;e$B<e$Y.length;e$B++)if("vector3"===(e$t=e$Y[e$B]).elementFormat&&0===e$t.elementUsage){e$m=e$t;break}for(e$y=e$D.getData(),e$B=0;e$B<e$y.length;e$B+=e$D.vertexDeclaration.vertexStride/4)e$o=e$B+e$m.offset/4,e$l.push(new e$om(e$y[e$o+0],e$y[e$o+1],e$y[e$o+2]))}}return e$l},e$Y._setSubMeshes=function(e$D){this._subMeshes=e$D,this._subMeshCount=e$D.length;for(var e$m=0;e$m<this._subMeshCount;e$m++)e$D[e$m]._indexInMesh=e$m;this._positions=this._getPositions(),this._generateBoundingObject()},e$Y.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=e$m[0],e$y=e$m[1];e$xD.read(e$t,this,this._materials,this._subMeshes,e$y),this.completeCreate(),this._endLoaded()},e$Y.getSubMesh=function(e$D){return this._subMeshes[e$D]},e$Y.getSubMeshCount=function(){return this._subMeshes.length},e$Y.getRenderElementsCount=function(){return this._subMeshes.length},e$Y.getRenderElement=function(e$D){return this._subMeshes[e$D]},e$Y.disposeResource=function(){for(var e$D=0;e$D<this._subMeshes.length;e$D++)this._subMeshes[e$D].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},e$G(0,e$Y,"materials",function(){return this._materials.slice()}),e$G(0,e$Y,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),e$m.load=function(e$D){return e$c.loader.create(e$D,null,null,e$m)},e$m}(),e$xm=(function(e$D){function e$r(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=5121),void 0===e$y&&(e$y=33189),void 0===e$l&&(e$l=!1),void 0===e$E&&(e$E=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1),e$r.__super.call(this),this._type=3553,this._width=e$D,this._height=e$m,this._size=new e$Um(e$D,e$m),this._surfaceFormat=e$Y,this._surfaceType=e$t,this._depthStencilFormat=e$y,e$I.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=e$l,this._repeat=e$E,this._minFifter=e$B,this._magFifter=e$o,this.activeResource(),this._alreadyResolved=!0}e$R(e$r,"laya.d3.resource.RenderTexture",e$Nm);var e$m=e$r.prototype;e$m.recreateResource=function(){var e$D=e$s.mainContext;this._frameBuffer=e$D.createFramebuffer(),this._source=e$D.createTexture();var e$m=e$Q.curBindTexTarget,e$Y=e$Q.curBindTexValue;e$Q.bindTexture(e$D,this._type,this._source),e$D.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var e$t=this._minFifter,e$y=this._magFifter,e$l=this._repeat?10497:33071;if(e$v.isPOT(this._width,this._height)?(this._mipmap?-1!==e$t||(e$t=9987):-1!==e$t||(e$t=9729),-1!==e$y||(e$y=9729),e$D.texParameteri(this._type,10241,e$t),e$D.texParameteri(this._type,10240,e$y),e$D.texParameteri(this._type,10242,e$l),e$D.texParameteri(this._type,10243,e$l),this._mipmap&&e$D.generateMipmap(this._type)):(-1!==e$t||(e$t=9729),-1!==e$y||(e$y=9729),e$D.texParameteri(this._type,10241,e$t),e$D.texParameteri(this._type,10240,e$y),e$D.texParameteri(this._type,10242,33071),e$D.texParameteri(this._type,10243,33071)),e$m&&e$Y&&e$Q.bindTexture(e$D,e$m,e$Y),e$D.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=e$D.createRenderbuffer(),e$D.bindRenderbuffer(36161,this._depthStencilBuffer),e$D.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),e$D.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:e$D.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e$D.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e$D.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e$D.framebufferTexture2D(36160,36064,3553,this._source,0),e$D.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},e$m.start=function(){e$s.mainContext.bindFramebuffer(36160,this.frameBuffer),(e$r._currentRenderTarget=this)._alreadyResolved=!1},e$m.end=function(){e$s.mainContext.bindFramebuffer(36160,null),e$r._currentRenderTarget=null,this._alreadyResolved=!0},e$m.getData=function(e$D,e$m,e$Y,e$t){var e$y=e$s.mainContext;if(e$y.bindFramebuffer(36160,this._frameBuffer),!(36053===e$y.checkFramebufferStatus(36160)))return e$y.bindFramebuffer(36160,null),null;var e$l=new Uint8Array(this._width*this._height*4);return e$y.readPixels(e$D,e$m,e$Y,e$t,this._surfaceFormat,this._surfaceType,e$l),e$y.bindFramebuffer(36160,null),e$l},e$m.disposeResource=function(){if(this._frameBuffer){var e$D=e$s.mainContext;e$D.deleteTexture(this._source),e$D.deleteFramebuffer(this._frameBuffer),e$D.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},e$G(0,e$m,"surfaceFormat",function(){return this._surfaceFormat}),e$G(0,e$m,"surfaceType",function(){return this._surfaceType}),e$G(0,e$m,"depthStencilFormat",function(){return this._depthStencilFormat}),e$G(0,e$m,"source",function(){return this._alreadyResolved?e$c.superGet(e$Nm,this,"source"):null}),e$G(0,e$m,"depthStencilBuffer",function(){return this._depthStencilBuffer}),e$G(0,e$m,"frameBuffer",function(){return this._frameBuffer}),e$r._currentRenderTarget=null}(),function(e$D){function e$m(e$D){this._color=null,this._pixels=null,e$m.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new e$Um(this.width,this.height),this._color=e$D,this._pixels=new Uint8Array([255*e$D.x,255*e$D.y,255*e$D.z,255*e$D.w]),this.uri="SolidColorTexture2D_"+this.id}e$R(e$m,"laya.d3.resource.SolidColorTexture2D",e$Nm);var e$Y=e$m.prototype;return e$Y._createWebGlTexture=function(){var e$D=e$s.mainContext,e$m=this._source=e$D.createTexture(),e$Y=this._width,e$t=this._height,e$y=e$Q.curBindTexTarget,e$l=e$Q.curBindTexValue;e$Q.bindTexture(e$D,this._type,e$m),e$D.texImage2D(this._type,0,6408,e$Y,e$t,0,6408,5121,this._pixels);var e$E=this._minFifter,e$B=this._magFifter,e$o=this._repeat?10497:33071,e$r=e$v.isPOT(e$Y,e$t);e$r?(this._mipmap?-1!==e$E||(e$E=9987):-1!==e$E||(e$E=9729),-1!==e$B||(e$B=9729),e$D.texParameteri(this._type,10241,e$E),e$D.texParameteri(this._type,10240,e$B),e$D.texParameteri(this._type,10242,e$o),e$D.texParameteri(this._type,10243,e$o),this._mipmap&&e$D.generateMipmap(this._type)):(-1!==e$E||(e$E=9729),-1!==e$B||(e$B=9729),e$D.texParameteri(this._type,10241,e$E),e$D.texParameteri(this._type,10240,e$B),e$D.texParameteri(this._type,10242,33071),e$D.texParameteri(this._type,10243,33071)),e$y&&e$l&&e$Q.bindTexture(e$D,e$y,e$l),this.memorySize=e$r?e$Y*e$t*4*(1+1/3):e$Y*e$t*4},e$Y.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},e$Y.disposeResource=function(){this._source&&(e$s.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$_(e$m,["magentaTexture",function(){var e$D=new e$m(new e$rm(1,0,1,1));return e$D.lock=!0,this.magentaTexture=e$D},"grayTexture",function(){var e$D=new e$m(new e$rm(.5,.5,.5,1));return e$D.lock=!0,this.grayTexture=e$D}]),e$m}()),e$Vm=function(e$D){function e$y(e$D,e$m,e$Y,e$t){this._canRead=!1,this._image=null,this._pixels=null,void 0===e$D&&(e$D=!1),void 0===e$m&&(e$m=!0),void 0===e$Y&&(e$Y=6408),void 0===e$t&&(e$t=!0),e$y.__super.call(this),this._type=3553,this._repeat=e$m,this._canRead=e$D,this._format=e$Y,this._mipmap=e$t}e$R(e$y,"laya.d3.resource.Texture2D",e$Nm);var e$m=e$y.prototype;return e$m._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e$D=e$s.mainContext,e$m=this._source=e$D.createTexture(),e$Y=this._width,e$t=this._height,e$y=e$Q.curBindTexTarget,e$l=e$Q.curBindTexValue;switch(e$Q.bindTexture(e$D,this._type,e$m),this._format){case 6407:case 6408:this._canRead?e$D.texImage2D(this._type,0,this._format,e$Y,e$t,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?e$D.texImage2D(this._type,0,this._image._format,e$Y,e$t,0,this._image._format,5121,this._image.atlasSource):e$D.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case e$s.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e$D.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var e$E=this._minFifter,e$B=this._magFifter,e$o=this._repeat?10497:33071,e$r=0==this._wrapModeU?10497:33071,e$f=0==this._wrapModeV?10497:33071,e$_=e$v.isPOT(e$Y,e$t);e$_?(this._mipmap?-1!==e$E||(e$E=9987):-1!==e$E||(e$E=9729),-1!==e$B||(e$B=9729),e$D.texParameteri(this._type,10241,e$E),e$D.texParameteri(this._type,10240,e$B),e$D.texParameteri(this._type,10242,e$o),e$D.texParameteri(this._type,10243,e$o),e$D.texParameteri(this._type,10242,e$r),e$D.texParameteri(this._type,10243,e$f),this._mipmap&&e$D.generateMipmap(this._type)):(-1!==e$E||(e$E=9729),-1!==e$B||(e$B=9729),e$D.texParameteri(this._type,10241,e$E),e$D.texParameteri(this._type,10240,e$B),e$D.texParameteri(this._type,10242,33071),e$D.texParameteri(this._type,10243,33071)),e$y&&e$l&&e$Q.bindTexture(e$D,e$y,e$l),this._image.onload=null,this._image=null,this.memorySize=e$_?e$Y*e$t*4*(1+1/3):e$Y*e$t*4},e$m.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},e$m.onAsynLoaded=function(e$D,e$m,e$Y){if(e$Y){var e$t=e$Y[0];void 0!==e$t&&(this._canRead=e$t);var e$y=e$Y[1];void 0!==e$y&&(this._repeat=e$y);var e$l=e$Y[2];void 0!==e$l&&(this._format=e$l);var e$E=e$Y[3];void 0!==e$E&&(this._mipmap=e$E);var e$B=e$Y.wrapModeU;void 0!==e$B&&(this._wrapModeU=e$B);var e$o=e$Y.wrapModeV;void 0!==e$o&&(this._wrapModeV=e$o)}switch(this._format){case 6407:case 6408:var e$r=(this._image=e$m).width,e$f=e$m.height;this._width=e$r,this._height=e$f,this._size=new e$Um(e$r,e$f),this._canRead&&(e$I.isConchApp?e$m instanceof e$i.HTMLElement&&(this._pixels=new Uint8Array(e$m.getImageData(0,0,e$r,e$f))):(e$T.canvas.size(e$r,e$f),e$T.canvas.clear(),e$T.context.drawImage(e$m,0,0,e$r,e$f),this._pixels=new Uint8Array(e$T.context.getImageData(0,0,e$r,e$f).data.buffer)));break;case e$s.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var e$_=new e$S(e$m);e$_.readUTFBytes(4),e$_.readUTFBytes(2),e$_.getInt16();e$_.endian="bigEndian",this._width=e$_.getInt16(),this._height=e$_.getInt16(),this._size=new e$Um(this._width,this._height);e$_.getInt16(),e$_.getInt16();this._image=new Uint8Array(e$m,e$_.pos)}this.recreateResource(),this._endLoaded()},e$m.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},e$m.disposeResource=function(){this._source&&(e$s.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},e$G(0,e$m,"_src",function(){return this.url}),e$G(0,e$m,"src",function(){return this.url}),e$y.load=function(e$D){return e$c.loader.create(e$D,null,null,e$y)},e$y}(),e$Zm=function(e$m){function e$Y(e$D,e$m){e$Y.__super.call(this),void 0===e$D&&(e$D=.3),void 0===e$m&&(e$m=1e3),this._tempVector3=new e$om,this._position=new e$om,this._up=new e$om,this._forward=new e$om,this._right=new e$om,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=e$Um.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=e$D,this._farPlane=e$m,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),e$c.stage.on("resize",this,this._onScreenSizeChanged)}e$R(e$Y,"laya.d3.core.BaseCamera",e$m);var e$D=e$Y.prototype;return e$D._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var e$D=this.scene._cameraPool,e$m=e$D.length-1,e$Y=0;e$Y<e$m;e$Y++)if(e$D[e$Y].renderingOrder>e$D[e$m].renderingOrder){var e$t=e$D[e$Y];e$D[e$Y]=e$D[e$m],e$D[e$m]=e$t}},e$D._calculateProjectionMatrix=function(){},e$D._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},e$D._prepareCameraToRender=function(){e$N._currentCameraCullingMask=this.cullingMask;var e$D=this._shaderValues;e$D.setValue(0,this.transform.position.elements),e$D.setValue(5,this.forward.elements),e$D.setValue(6,this.up.elements)},e$D._prepareCameraViewProject=function(e$D,e$m){var e$Y=this._shaderValues;e$Y.setValue(1,e$D.elements),e$Y.setValue(2,e$m.elements)},e$D._renderCamera=function(e$D,e$m,e$Y){},e$D.addLayer=function(e$D){29!==e$D.number&&30!=e$D.number&&(this.cullingMask=this.cullingMask|e$D.mask)},e$D.removeLayer=function(e$D){29!==e$D.number&&30!=e$D.number&&(this.cullingMask=this.cullingMask&~e$D.mask)},e$D.addAllLayers=function(){this.cullingMask=2147483647},e$D.removeAllLayers=function(){this.cullingMask=0|e$N.getLayerByNumber(29).mask|e$N.getLayerByNumber(30).mask},e$D.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},e$D.moveForward=function(e$D){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=e$D,this.transform.translate(this._tempVector3)},e$D.moveRight=function(e$D){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=e$D,this.transform.translate(this._tempVector3)},e$D.moveVertical=function(e$D){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=e$D,this.transform.translate(this._tempVector3,!1)},e$D._addSelfRenderObjects=function(){var e$D=this.scene._cameraPool,e$m=e$D.length;if(0<e$m){for(var e$Y=e$m-1;0<=e$Y;e$Y--)if(this.renderingOrder<=e$D[e$Y].renderingOrder){e$D.splice(e$Y+1,0,this);break}}else e$D.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},e$D._clearSelfRenderObjects=function(){var e$D=this.scene._cameraPool;e$D.splice(e$D.indexOf(this),1)},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,e$c.stage.off("resize",this,this._onScreenSizeChanged),e$m.prototype.destroy.call(this,e$D)},e$G(0,e$D,"sky",function(){return this._sky},function(e$D){(this._sky=e$D)._ownerCamera=this}),e$G(0,e$D,"forward",function(){var e$D=this.transform.worldMatrix.elements,e$m=this._forward.elements;return e$m[0]=-e$D[8],e$m[1]=-e$D[9],e$m[2]=-e$D[10],this._forward}),e$G(0,e$D,"position",function(){var e$D=this.transform.worldMatrix.elements,e$m=this._position.elements;return e$m[0]=e$D[12],e$m[1]=e$D[13],e$m[2]=e$D[14],this._position}),e$G(0,e$D,"renderTarget",function(){return this._renderTarget},function(e$D){null!=(this._renderTarget=e$D)&&(this._renderTargetSize=e$D.size)}),e$G(0,e$D,"up",function(){var e$D=this.transform.worldMatrix.elements,e$m=this._up.elements;return e$m[0]=e$D[4],e$m[1]=e$D[5],e$m[2]=e$D[6],this._up}),e$G(0,e$D,"right",function(){var e$D=this.transform.worldMatrix.elements,e$m=this._right.elements;return e$m[0]=e$D[0],e$m[1]=e$D[1],e$m[2]=e$D[2],this._right}),e$G(0,e$D,"renderTargetSize",function(){return this._renderTargetSize},function(e$D){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"fieldOfView",function(){return this._fieldOfView},function(e$D){this._fieldOfView=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"nearPlane",function(){return this._nearPlane},function(e$D){this._nearPlane=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"farPlane",function(){return this._farPlane},function(e$D){this._farPlane=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"orthographic",function(){return this._orthographic},function(e$D){this._orthographic=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(e$D){this._orthographicVerticalSize=e$D,this._calculateProjectionMatrix()}),e$G(0,e$D,"renderingOrder",function(){return this._renderingOrder},function(e$D){this._renderingOrder=e$D,this._sortCamerasByRenderingOrder()}),e$Y.CAMERAPOS=0,e$Y.VIEWMATRIX=1,e$Y.PROJECTMATRIX=2,e$Y.VPMATRIX=3,e$Y.VPMATRIX_NO_TRANSLATE=4,e$Y.CAMERADIRECTION=5,e$Y.CAMERAUP=6,e$Y.ENVIRONMENTDIFFUSE=7,e$Y.ENVIRONMENTSPECULAR=8,e$Y.SIMLODINFO=9,e$Y.DIFFUSEIRRADMATR=10,e$Y.DIFFUSEIRRADMATG=11,e$Y.DIFFUSEIRRADMATB=12,e$Y.HDREXPOSURE=13,e$Y.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",e$Y.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",e$Y.CLEARFLAG_SOLIDCOLOR=0,e$Y.CLEARFLAG_SKY=1,e$Y.CLEARFLAG_DEPTHONLY=2,e$Y.CLEARFLAG_NONE=3,e$_(e$Y,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new e$mm(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new e$mm},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new e$mm}]),e$Y}(e$Lm),e$bm=function(e$Y){function e$m(e$D){this._render=null,this._geometryFilter=null,e$m.__super.call(this,e$D)}e$R(e$m,"laya.d3.core.RenderableSprite3D",e$Y);var e$D=e$m.prototype;return e$D._addToInitStaticBatchManager=function(){},e$D._setBelongScene=function(e$D){e$Y.prototype._setBelongScene.call(this,e$D),e$D._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},e$D._setUnBelongScene=function(){var e$D=this._scene._renderableSprite3Ds,e$m=e$D.indexOf(this);e$D.splice(e$m,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),e$Y.prototype._setUnBelongScene.call(this)},e$D._update=function(e$D){(e$D.owner=this)._activeInHierarchy&&(this._updateComponents(e$D),this._render._updateOctreeNode(),this._lateUpdateComponents(e$D),e$A.spriteCount++,this._childs.length&&this._updateChilds(e$D))},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$Y.prototype.destroy.call(this,e$D),this._render._destroy(),this._render=null},e$m.__init__=function(){e$m.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=e$m.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),e$m.SAHDERDEFINE_LIGHTMAP=e$m.shaderDefines.registerDefine("LIGHTMAP")},e$m.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,e$m.SAHDERDEFINE_LIGHTMAP=4,e$m.LIGHTMAPSCALEOFFSET=2,e$m.LIGHTMAP=3,e$_(e$m,["shaderDefines",function(){return this.shaderDefines=new e$im}]),e$m}(e$Lm),e$jm=(function(e$D){function e$t(e$D,e$m,e$Y){this._long=NaN,this._width=NaN,this._height=NaN,void 0===e$D&&(e$D=1),void 0===e$m&&(e$m=1),void 0===e$Y&&(e$Y=1),e$t.__super.call(this),this._long=e$D,this._width=e$m,this._height=e$Y,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}e$R(e$t,"laya.d3.resource.models.BoxMesh",e$gm);var e$m=e$t.prototype;e$m.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var e$D=e$sD.vertexDeclaration,e$m=(e$D.vertexStride,this._long/2),e$Y=this._height/2,e$t=this._width/2,e$y=new Float32Array([-e$m,e$Y,-e$t,0,1,0,0,0,e$m,e$Y,-e$t,0,1,0,1,0,e$m,e$Y,e$t,0,1,0,1,1,-e$m,e$Y,e$t,0,1,0,0,1,-e$m,-e$Y,-e$t,0,-1,0,0,1,e$m,-e$Y,-e$t,0,-1,0,1,1,e$m,-e$Y,e$t,0,-1,0,1,0,-e$m,-e$Y,e$t,0,-1,0,0,0,-e$m,e$Y,-e$t,-1,0,0,0,0,-e$m,e$Y,e$t,-1,0,0,1,0,-e$m,-e$Y,e$t,-1,0,0,1,1,-e$m,-e$Y,-e$t,-1,0,0,0,1,e$m,e$Y,-e$t,1,0,0,1,0,e$m,e$Y,e$t,1,0,0,0,0,e$m,-e$Y,e$t,1,0,0,0,1,e$m,-e$Y,-e$t,1,0,0,1,1,-e$m,e$Y,e$t,0,0,1,0,0,e$m,e$Y,e$t,0,0,1,1,0,e$m,-e$Y,e$t,0,0,1,1,1,-e$m,-e$Y,e$t,0,0,1,0,1,-e$m,e$Y,-e$t,0,0,-1,1,0,e$m,e$Y,-e$t,0,0,-1,0,0,e$m,-e$Y,-e$t,0,0,-1,0,1,-e$m,-e$Y,-e$t,0,0,-1,1,1]),e$l=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new e$km(e$D,this._numberVertices,35044,!0),this._indexBuffer=new e$dm("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(e$y),this._indexBuffer.setData(e$l),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},e$G(0,e$m,"long",function(){return this._long},function(e$D){this._long!==e$D&&(this._long=e$D,this.releaseResource(),this.activeResource())}),e$G(0,e$m,"width",function(){return this._width},function(e$D){this._width!==e$D&&(this._width=e$D,this.releaseResource(),this.activeResource())}),e$G(0,e$m,"height",function(){return this._height},function(e$D){this._height!==e$D&&(this._height=e$D,this.releaseResource(),this.activeResource())})}(),function(e$D){function e$y(e$D,e$m,e$Y,e$t){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===e$D&&(e$D=10),void 0===e$m&&(e$m=10),void 0===e$Y&&(e$Y=10),void 0===e$t&&(e$t=10),e$y.__super.call(this),this._long=e$D,this._width=e$m,this._stacks=e$Y,this._slices=e$t,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}e$R(e$y,"laya.d3.resource.models.PlaneMesh",e$gm);var e$m=e$y.prototype;e$m.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var e$D=new Uint16Array(this._numberIndices),e$m=e$sD.vertexDeclaration,e$Y=e$m.vertexStride/4,e$t=new Float32Array(this._numberVertices*e$Y),e$y=this._long/2,e$l=this._width/2,e$E=this._long/this._stacks,e$B=this._width/this._slices,e$o=0,e$r=0;e$r<=this._slices;e$r++)for(var e$f=0;e$f<=this._stacks;e$f++)e$t[e$o++]=e$f*e$E-e$y,e$t[e$o++]=0,e$t[e$o++]=e$r*e$B-e$l,e$t[e$o++]=0,e$t[e$o++]=1,e$t[e$o++]=0,e$t[e$o++]=1*e$f/this._stacks,e$t[e$o++]=1*e$r/this._slices;var e$_=0;for(e$r=0;e$r<this._slices;e$r++)for(e$f=0;e$f<this._stacks;e$f++)e$D[e$_++]=(e$r+1)*(this._stacks+1)+e$f,e$D[e$_++]=e$r*(this._stacks+1)+e$f,e$D[e$_++]=(e$r+1)*(this._stacks+1)+e$f+1,e$D[e$_++]=e$r*(this._stacks+1)+e$f,e$D[e$_++]=e$r*(this._stacks+1)+e$f+1,e$D[e$_++]=(e$r+1)*(this._stacks+1)+e$f+1;this._vertexBuffer=new e$km(e$m,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new e$dm("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(e$t),this._indexBuffer.setData(e$D),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},e$G(0,e$m,"long",function(){return this._long},function(e$D){this._long!==e$D&&(this._long=e$D,this.releaseResource(),this.activeResource())}),e$G(0,e$m,"width",function(){return this._width},function(e$D){this._width!==e$D&&(this._width=e$D,this.releaseResource(),this.activeResource())}),e$G(0,e$m,"stacks",function(){return this._stacks},function(e$D){this._stacks!==e$D&&(this._stacks=e$D,this.releaseResource(),this.activeResource())}),e$G(0,e$m,"slices",function(){return this._slices},function(e$D){this._slices!==e$D&&(this._slices=e$D,this.releaseResource(),this.activeResource())})}(),function(e$D){function e$E(e$D,e$m,e$Y){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=.3),void 0===e$Y&&(e$Y=1e3),this._viewMatrix=new e$mm,this._projectionMatrix=new e$mm,this._projectionViewMatrix=new e$mm,this._viewport=new e$fm(0,0,0,0),this._normalizedViewport=new e$fm(0,0,1,1),this._aspectRatio=e$D,this._boundFrustumUpdate=!0,this._boundFrustum=new e$ZD(e$mm.DEFAULT),e$E.__super.call(this,e$m,e$Y),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}e$R(e$E,"laya.d3.core.Camera",e$Zm);var e$m=e$E.prototype;return e$m._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},e$m._parseCustomProps=function(e$D,e$m,e$Y,e$t){var e$y=e$Y.clearColor;this.clearColor=new e$rm(e$y[0],e$y[1],e$y[2],e$y[3]);var e$l=e$Y.viewport;this.normalizedViewport=new e$fm(e$l[0],e$l[1],e$l[2],e$l[3])},e$m._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var e$D=this.orthographicVerticalSize*this.aspectRatio*.5,e$m=.5*this.orthographicVerticalSize;e$mm.createOrthoOffCenterRH(-e$D,e$D,-e$m,e$m,this.nearPlane,this.farPlane,this._projectionMatrix)}else e$mm.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},e$m._update=function(e$D){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,e$D)},e$m._renderCamera=function(e$D,e$m,e$Y){var e$t,e$y;e$Y.parallelSplitShadowMaps[0]&&e$Y._renderShadowMap(e$D,e$m,this),(e$m.camera=this)._prepareCameraToRender(),e$Y._preRenderUpdateComponents(e$m),e$t=e$m._viewMatrix=this.viewMatrix;var e$l=this._renderTarget;e$l?(e$l.start(),e$mm.multiply(e$Zm._invertYScaleMatrix,this._projectionMatrix,e$Zm._invertYProjectionMatrix),e$mm.multiply(e$Zm._invertYScaleMatrix,this.projectionViewMatrix,e$Zm._invertYProjectionViewMatrix),e$y=e$m._projectionMatrix=e$Zm._invertYProjectionMatrix,e$m._projectionViewMatrix=e$Zm._invertYProjectionViewMatrix):(e$y=e$m._projectionMatrix=this._projectionMatrix,e$m._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(e$t,e$y),e$m._viewport=this.viewport,e$Y._preRenderScene(e$D,e$m,this.boundFrustum),e$Y._clear(e$D,e$m),e$Y._renderScene(e$D,e$m),e$Y._postRenderUpdateComponents(e$m),e$l&&e$l.end()},e$m.viewportPointToRay=function(e$D,e$m){e$wm.calculateCursorRay(e$D,this.viewport,this._projectionMatrix,this.viewMatrix,null,e$m)},e$m.normalizedViewportPointToRay=function(e$D,e$m){var e$Y=e$E._tempVector20,e$t=this.viewport,e$y=e$D.elements,e$l=e$Y.elements;e$l[0]=e$y[0]*e$t.width,e$l[1]=e$y[1]*e$t.height,e$wm.calculateCursorRay(e$Y,this.viewport,this._projectionMatrix,this.viewMatrix,null,e$m)},e$m.worldToViewportPoint=function(e$D,e$m){e$mm.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(e$D,this._projectionViewMatrix,e$m);var e$Y=e$m.elements;e$Y[0]=e$Y[0]/e$c.stage.clientScaleX,e$Y[1]=e$Y[1]/e$c.stage.clientScaleY},e$m.worldToNormalizedViewportPoint=function(e$D,e$m){e$mm.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(e$D,this._projectionViewMatrix,e$m);var e$Y=e$m.elements;e$Y[0]=e$Y[0]/e$c.stage.clientScaleX,e$Y[1]=e$Y[1]/e$c.stage.clientScaleY},e$m.convertScreenCoordToOrthographicCoord=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=!0),this._orthographic){var e$t=e$x.clientWidth,e$y=e$x.clientHeight,e$l=this.orthographicVerticalSize*this.aspectRatio/e$t,e$E=this.orthographicVerticalSize/e$y,e$B=e$D.elements,e$o=e$m.elements;return e$o[0]=(-e$t/2+e$B[0])*e$l,e$o[1]=(e$y/2-e$B[1])*e$E,e$o[2]=(this.nearPlane-this.farPlane)*(e$B[2]+1)/2-this.nearPlane,e$Y&&e$om.transformCoordinate(e$m,this.transform.worldMatrix,e$m),!0}return!1},e$G(0,e$m,"projectionViewMatrix",function(){return e$mm.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),e$G(0,e$m,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var e$D=this.viewport;return e$D.width/e$D.height},function(e$D){if(e$D<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=e$D,this._calculateProjectionMatrix()}),e$G(0,e$m,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),e$G(0,e$m,"needViewport",function(){var e$D=this.normalizedViewport;return 0===e$D.x&&0===e$D.y&&1===e$D.width&&1===e$D.height}),e$G(0,e$m,"viewport",function(){if(this._viewportExpressedInClipSpace){var e$D=this._normalizedViewport,e$m=this.renderTargetSize,e$Y=e$m.width,e$t=e$m.height;this._viewport.x=e$D.x*e$Y,this._viewport.y=e$D.y*e$t,this._viewport.width=e$D.width*e$Y,this._viewport.height=e$D.height*e$t}return this._viewport},function(e$D){if(null!=this.renderTarget&&(e$D.x<0||e$D.y<0||0==e$D.width||0==e$D.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=e$D,this._calculateProjectionMatrix()}),e$G(0,e$m,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var e$D=this._viewport,e$m=this.renderTargetSize,e$Y=e$m.width,e$t=e$m.height;this._normalizedViewport.x=e$D.x/e$Y,this._normalizedViewport.y=e$D.y/e$t,this._normalizedViewport.width=e$D.width/e$Y,this._normalizedViewport.height=e$D.height/e$t}return this._normalizedViewport},function(e$D){e$D.x<0&&(e$D.x=0,console.warn("Camera: viewport.x must large than 0.0.")),e$D.y<0&&(e$D.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<e$D.x+e$D.width&&(e$D.width=1-e$D.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<e$D.y+e$D.height&&(e$D.height=1-e$D.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=e$D,this._calculateProjectionMatrix()}),e$G(0,e$m,"projectionMatrix",function(){return this._projectionMatrix},function(e$D){this._projectionMatrix=e$D,this._useUserProjectionMatrix=!0}),e$G(0,e$m,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),e$_(e$E,["_tempVector20",function(){return this._tempVector20=new e$Bm}]),e$E}()),e$Km=function(e$Y){function e$t(e$D,e$m){e$t.__super.call(this,e$m),this._geometryFilter=new e$Xm(this),this._render=new e$Pm(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),e$D&&(this._geometryFilter.sharedMesh=e$D)instanceof laya.d3.resource.models.Mesh&&(e$D.loaded?this._render.sharedMaterials=e$D.materials:e$D.once("loaded",this,this._applyMeshMaterials))}e$R(e$t,"laya.d3.core.MeshSprite3D",e$Y);var e$D=e$t.prototype;return e$D._changeRenderObjectByMesh=function(e$D){var e$m=this._render._renderElements,e$Y=e$m[e$D];e$Y||(e$Y=e$m[e$D]=new e$am),e$Y._render=this._render;var e$t=this._render.sharedMaterials[e$D];e$t||(e$t=e$$m.defaultMaterial);var e$y=this._geometryFilter.sharedMesh.getRenderElement(e$D);return e$Y._mainSortID=this._getSortID(e$y,e$t),e$Y._sprite3D=this,e$Y.renderObj=e$y,e$Y._material=e$t,e$Y},e$D._changeRenderObjectByMaterial=function(e$D,e$m){var e$Y=this._render._renderElements[e$D];e$m||(e$m=e$$m.defaultMaterial);var e$t=this._geometryFilter.sharedMesh.getRenderElement(e$D);return e$Y._mainSortID=this._getSortID(e$t,e$m),e$Y._sprite3D=this,e$Y.renderObj=e$t,e$Y._material=e$m,e$Y},e$D._changeRenderObjectsByMesh=function(){var e$D=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=e$D;for(var e$m=0;e$m<e$D;e$m++)this._changeRenderObjectByMesh(e$m)},e$D._onMeshChanged=function(e$D){var e$m=e$D.sharedMesh;e$m.loaded?this._changeRenderObjectsByMesh():e$m.once("loaded",this,this._onMeshLoaded)},e$D._onMeshLoaded=function(e$D){e$D===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},e$D._onMaterialChanged=function(e$D,e$m,e$Y){e$m<this._render._renderElements.length&&this._changeRenderObjectByMaterial(e$m,e$Y)},e$D._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},e$D._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},e$D._parseCustomProps=function(e$D,e$m,e$Y,e$t){var e$y=this.meshRender,e$l=e$Y.lightmapIndex;null!=e$l&&(e$y.lightmapIndex=e$l);var e$E,e$B,e$o=e$Y.lightmapScaleOffset;if(e$o&&(e$y.lightmapScaleOffset=new e$rm(e$o[0],e$o[1],e$o[2],e$o[3])),e$t.instanceParams)(e$E=e$t.instanceParams.loadPath)&&(e$B=e$W.getRes(e$m[e$E]),(this.meshFilter.sharedMesh=e$B).loaded?e$y.sharedMaterials=e$B.materials:e$B.once("loaded",this,this._applyMeshMaterials));else{(e$E=e$Y.meshPath)&&(e$B=e$W.getRes(e$m[e$E]),this.meshFilter.sharedMesh=e$B);var e$r=e$Y.materials;if(e$r){var e$f=e$y.sharedMaterials,e$_=e$r.length;e$f.length=e$_;for(var e$i=0;e$i<e$_;e$i++)e$f[e$i]=e$W.getRes(e$m[e$r[e$i].path]);e$y.sharedMaterials=e$f}}},e$D._applyMeshMaterials=function(e$D){for(var e$m=this._render.sharedMaterials,e$Y=e$D.materials,e$t=0,e$y=e$Y.length;e$t<e$y;e$t++)e$m[e$t]||(e$m[e$t]=e$Y[e$t]);this._render.sharedMaterials=e$m},e$D._addToInitStaticBatchManager=function(){e$t._staticBatchManager._addInitBatchSprite(this)},e$D.cloneTo=function(e$D){var e$m=e$D;e$m._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var e$Y=this._render,e$t=e$m._render;e$t.enable=e$Y.enable,e$t.sharedMaterials=e$Y.sharedMaterials,e$t.castShadow=e$Y.castShadow;var e$y=e$Y.lightmapScaleOffset;e$y&&(e$t.lightmapScaleOffset=e$y.clone()),e$t.lightmapIndex=e$Y.lightmapIndex,e$t.receiveShadow=e$Y.receiveShadow,e$t.sortingFudge=e$Y.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e$D)},e$D.destroy=function(e$D){if(void 0===e$D&&(e$D=!0),!this.destroyed){var e$m=this.meshFilter.sharedMesh;null!=e$m&&(e$m.loaded||e$m.off("loaded",this,this._applyMeshMaterials)),e$Y.prototype.destroy.call(this,e$D),this._geometryFilter._destroy()}},e$G(0,e$D,"meshFilter",function(){return this._geometryFilter}),e$G(0,e$D,"meshRender",function(){return this._render}),e$t.__init__=function(){e$tD._staticBatchManagers.push(e$t._staticBatchManager)},e$t.load=function(e$D){return e$c.loader.create(e$D,null,null,e$t)},e$_(e$t,["_staticBatchManager",function(){return this._staticBatchManager=new e$Fm}]),e$t}(e$bm)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$D,e$m,e$TD){e$TD.un,e$TD.uns;var e$Y=e$TD.static,e$t=e$TD.class,e$l=e$TD.getset,e$I=e$TD.__newvec,e$B=laya.maths.Bezier,e$_=laya.utils.Browser,e$ND=laya.utils.Byte,e$y=(laya.events.Event,laya.events.EventDispatcher),e$E=laya.display.Graphics,e$o=(laya.resource.HTMLCanvas,laya.utils.Handler),e$r=laya.net.Loader,e$i=laya.maths.MathUtil,e$CD=laya.maths.Matrix,e$w=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),e$f=(laya.renders.RenderContext,laya.resource.Resource),e$R=laya.utils.RunDriver,e$yD=laya.display.Sprite,e$G=laya.utils.Stat,e$OD=laya.resource.Texture,e$W=(laya.net.URL,laya.utils.Utils),e$Q=function(){function e$D(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return e$t(e$D,"laya.ani.AnimationContent"),e$D}(),e$T=function(){function e$D(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return e$t(e$D,"laya.ani.AnimationNodeContent"),e$D}(),e$e=function(){function e$D(){}return e$t(e$D,"laya.ani.AnimationParser01"),e$D.parse=function(e$D,e$m){var e$Y=e$m.__getBuffer(),e$t=0,e$y=0,e$l=0,e$E=0,e$B=0,e$o=0,e$r=0,e$f=e$m.readUTFString();e$D._aniClassName=e$f;var e$_,e$i=e$m.readUTFString().split("\n"),e$R=e$m.getUint8(),e$G=e$m.getUint32(),e$I=e$m.getUint32();0<e$G&&(e$_=e$Y.slice(e$G,e$I));var e$w=new e$ND(e$_);for(0<e$I&&(e$D._publicExtData=e$Y.slice(e$I,e$Y.byteLength)),e$D._useParent=!!e$m.getUint8(),e$D._anis.length=e$R,e$t=0;e$t<e$R;e$t++){var e$W=e$D._anis[e$t]=new e$Q;e$W.nodes=new Array;var e$U=e$W.name=e$i[e$m.getUint16()];e$D._aniMap[e$U]=e$t,e$W.bone3DMap={},e$W.playTime=e$m.getFloat32(),e$W.playTime<=0&&console.error("播放时间不能为0  url="+e$D.url+" name="+e$W.name);var e$e=e$W.nodes.length=e$m.getUint8();for(e$y=e$W.totalKeyframeDatasLength=0;e$y<e$e;e$y++){var e$v=e$W.nodes[e$y]=new e$T;e$v.childs=[];var e$c=e$m.getInt16();0<=e$c&&(e$v.name=e$i[e$c],e$W.bone3DMap[e$v.name]=e$y),e$v.keyFrame=new Array,e$v.parentIndex=e$m.getInt16(),-1==e$v.parentIndex?e$v.parent=null:e$v.parent=e$W.nodes[e$v.parentIndex],e$v.lerpType=e$m.getUint8();var e$S=e$m.getUint32();e$w.pos=e$S;var e$z=e$v.keyframeWidth=e$w.getUint16();if(e$W.totalKeyframeDatasLength+=e$z,0===e$v.lerpType||1===e$v.lerpType)for(e$v.interpolationMethod=[],e$v.interpolationMethod.length=e$z,e$l=0;e$l<e$z;e$l++)e$v.interpolationMethod[e$l]=e$O.interpolation[e$w.getUint8()];null!=e$v.parent&&e$v.parent.childs.push(e$v);var e$A=e$m.getUint16();0<e$A&&(e$v.extenData=e$Y.slice(e$m.pos,e$m.pos+e$A),e$m.pos+=e$A);var e$J,e$a=e$m.getUint16(),e$p=0;for(e$l=0,e$E=e$v.keyFrame.length=e$a;e$l<e$E;e$l++){if((e$J=e$v.keyFrame[e$l]=new e$N).duration=e$m.getFloat32(),e$J.startTime=e$p,2===e$v.lerpType){e$J.interpolationData=[];var e$F,e$s=e$m.getUint8();switch(e$F=e$m.getFloat32()){case 254:for(e$J.interpolationData.length=e$z,e$r=0;e$r<e$z;e$r++)e$J.interpolationData[e$r]=0;break;case 255:for(e$J.interpolationData.length=e$z,e$r=0;e$r<e$z;e$r++)e$J.interpolationData[e$r]=5;break;default:for(e$J.interpolationData.push(e$F),e$o=1;e$o<e$s;e$o++)e$J.interpolationData.push(e$m.getFloat32())}}for(e$J.data=new Float32Array(e$z),e$B=0;e$B<e$z;e$B++)e$J.data[e$B]=e$m.getFloat32(),-1e-8<e$J.data[e$B]&&e$J.data[e$B]<1e-8&&(e$J.data[e$B]=0);e$p+=e$J.duration}e$J.startTime=e$W.playTime,e$v.playTime=e$W.playTime,e$D._calculateKeyFrame(e$v,e$a,e$z)}}},e$D}(),e$v=function(){function e$c(){}return e$t(e$c,"laya.ani.AnimationParser02"),e$c.READ_DATA=function(){e$c._DATA.offset=e$c._reader.getUint32(),e$c._DATA.size=e$c._reader.getUint32()},e$c.READ_BLOCK=function(){for(var e$D=e$c._BLOCK.count=e$c._reader.getUint16(),e$m=e$c._BLOCK.blockStarts=[],e$Y=e$c._BLOCK.blockLengths=[],e$t=0;e$t<e$D;e$t++)e$m.push(e$c._reader.getUint32()),e$Y.push(e$c._reader.getUint32())},e$c.READ_STRINGS=function(){var e$D=e$c._reader.getUint32(),e$m=e$c._reader.getUint16(),e$Y=e$c._reader.pos;e$c._reader.pos=e$D+e$c._DATA.offset;for(var e$t=0;e$t<e$m;e$t++)e$c._strings[e$t]=e$c._reader.readUTFString();e$c._reader.pos=e$Y},e$c.parse=function(e$D,e$m){e$c._templet=e$D;(e$c._reader=e$m).__getBuffer();e$c.READ_DATA(),e$c.READ_BLOCK(),e$c.READ_STRINGS();for(var e$Y=0,e$t=e$c._BLOCK.count;e$Y<e$t;e$Y++){var e$y=e$m.getUint16(),e$l=e$c._strings[e$y],e$E=e$c["READ_"+e$l];if(null==e$E)throw new Error("model file err,no this function:"+e$y+" "+e$l);e$E.call()}},e$c.READ_ANIMATIONS=function(){var e$D=e$c._reader,e$m=e$D.__getBuffer(),e$Y=0,e$t=0,e$y=0,e$l=0,e$E=e$D.getUint16(),e$B=[];for(e$B.length=e$E,e$Y=0;e$Y<e$E;e$Y++)e$B[e$Y]=e$O.interpolation[e$D.getByte()];var e$o=e$D.getUint8();for(e$c._templet._anis.length=e$o,e$Y=0;e$Y<e$o;e$Y++){var e$r=e$c._templet._anis[e$Y]={};e$r.nodes=new Array;var e$f=e$r.name=e$c._strings[e$D.getUint16()];e$c._templet._aniMap[e$f]=e$Y,e$r.bone3DMap={},e$r.playTime=e$D.getFloat32();var e$_=e$r.nodes.length=e$D.getInt16();for(e$t=e$r.totalKeyframeDatasLength=0;e$t<e$_;e$t++){var e$i=e$r.nodes[e$t]={};e$i.keyframeWidth=e$E,e$i.childs=[];var e$R=e$D.getUint16();0<=e$R&&(e$i.name=e$c._strings[e$R],e$r.bone3DMap[e$i.name]=e$t),e$i.keyFrame=new Array,e$i.parentIndex=e$D.getInt16(),-1==e$i.parentIndex?e$i.parent=null:e$i.parent=e$r.nodes[e$i.parentIndex],e$r.totalKeyframeDatasLength+=e$E,e$i.interpolationMethod=e$B,null!=e$i.parent&&e$i.parent.childs.push(e$i);var e$G=e$D.getUint16(),e$I=null,e$w=null;for(e$y=0,e$l=e$i.keyFrame.length=e$G;e$y<e$l;e$y++){(e$I=e$i.keyFrame[e$y]={}).startTime=e$D.getFloat32(),e$w&&(e$w.duration=e$I.startTime-e$w.startTime);var e$W=e$c._DATA.offset,e$U=e$D.getUint32(),e$e=4*e$E,e$v=e$m.slice(e$W+e$U,e$W+e$U+e$e);e$I.data=new Float32Array(e$v),e$w=e$I}e$I.duration=0,e$i.playTime=e$r.playTime,e$c._templet._calculateKeyFrame(e$i,e$G,e$E)}}},e$c._templet=null,e$c._reader=null,e$c._strings=[],e$Y(e$c,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$c}(),e$hD=(function(){function e$D(){}e$t(e$D,"laya.ani.AnimationState"),e$D.stopped=0,e$D.paused=1,e$D.playing=2}(),function(){function e$y(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new e$xD,this.resultMatrix=new e$CD,this._children=[]}e$t(e$y,"laya.ani.bone.Bone");var e$D=e$y.prototype;return e$D.setTempMatrix=function(e$D){this._tempMatrix=e$D;var e$m,e$Y=0;for(e$Y=0,e$m=this._children.length;e$Y<e$m;e$Y++)this._children[e$Y].setTempMatrix(this._tempMatrix)},e$D.update=function(e$D){var e$m;if(this.rotation=this.transform.skX,e$D)e$m=this.resultTransform.getMatrix(),e$CD.mul(e$m,e$D,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)e$m=this.resultTransform.getMatrix(),e$CD.mul(e$m,this.parentBone.resultMatrix,this.resultMatrix);else{var e$Y=this.parentBone,e$t=NaN,e$y=NaN,e$l=NaN,e$E=this.parentBone.resultMatrix;e$m=this.resultTransform.getMatrix();var e$B=e$E.a*e$m.tx+e$E.c*e$m.ty+e$E.tx,e$o=e$E.b*e$m.tx+e$E.d*e$m.ty+e$E.ty,e$r=new e$CD;this.inheritRotation?(e$t=Math.atan2(e$Y.resultMatrix.b,e$Y.resultMatrix.a),e$y=Math.cos(e$t),e$l=Math.sin(e$t),e$r.setTo(e$y,e$l,-e$l,e$y,0,0),e$CD.mul(this._tempMatrix,e$r,e$CD.TEMP),e$CD.TEMP.copyTo(e$r),e$m=this.resultTransform.getMatrix(),e$CD.mul(e$m,e$r,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,e$m=this.resultTransform.getMatrix(),e$CD.TEMP.identity(),e$CD.TEMP.d=this.d,e$CD.mul(e$m,e$CD.TEMP,this.resultMatrix)),this.resultMatrix.tx=e$B,this.resultMatrix.ty=e$o}else(e$m=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var e$f,e$_=0;for(e$_=0,e$f=this._children.length;e$_<e$f;e$_++)this._children[e$_].update()},e$D.updateChild=function(){var e$D,e$m=0;for(e$m=0,e$D=this._children.length;e$m<e$D;e$m++)this._children[e$m].update()},e$D.setRotation=function(e$D){this._sprite&&(this._sprite.rotation=180*e$D/Math.PI)},e$D.updateDraw=function(e$D,e$m){e$y.ShowBones&&!e$y.ShowBones[this.name]||(this._sprite||(this._sprite=new e$yD,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),e$TD.stage.addChild(this._sprite)),this._sprite.x=e$D+this.resultMatrix.tx,this._sprite.y=e$m+this.resultMatrix.ty);var e$Y,e$t=0;for(e$t=0,e$Y=this._children.length;e$t<e$Y;e$t++)this._children[e$t].updateDraw(e$D,e$m)},e$D.addChild=function(e$D){this._children.push(e$D),e$D.parentBone=this},e$D.findBone=function(e$D){if(this.name==e$D)return this;var e$m,e$Y,e$t=0;for(e$t=0,e$m=this._children.length;e$t<e$m;e$t++)if(e$Y=this._children[e$t].findBone(e$D))return e$Y;return null},e$D.localToWorld=function(e$D){var e$m=e$D[0],e$Y=e$D[1];e$D[0]=e$m*this.resultMatrix.a+e$Y*this.resultMatrix.c+this.resultMatrix.tx,e$D[1]=e$m*this.resultMatrix.b+e$Y*this.resultMatrix.d+this.resultMatrix.ty},e$y.ShowBones={},e$y}()),e$XD=function(){function e$I(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}e$t(e$I,"laya.ani.bone.BoneSlot");var e$D=e$I.prototype;return e$D.showSlotData=function(e$D,e$m){void 0===e$m&&(e$m=!0),this.currSlotData=e$D,e$m&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},e$D.showDisplayByName=function(e$D){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(e$D))},e$D.replaceDisplayByName=function(e$D,e$m){if(this.currSlotData){var e$Y;e$Y=this.currSlotData.getDisplayByName(e$D);var e$t;e$t=this.currSlotData.getDisplayByName(e$m),this.replaceDisplayByIndex(e$Y,e$t)}},e$D.replaceDisplayByIndex=function(e$D,e$m){this.currSlotData&&(this._replaceDic[e$D]=e$m,this.displayIndex==e$D&&this.showDisplayByIndex(e$D))},e$D.showDisplayByIndex=function(e$D){if(null!=this._replaceDic[e$D]&&(e$D=this._replaceDic[e$D]),this.currSlotData&&-1<e$D&&e$D<this.currSlotData.displayArr.length){if(this.displayIndex=e$D,this.currDisplayData=this.currSlotData.displayArr[e$D],this.currDisplayData){var e$m=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e$m),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!e$w.isConchApp||e$w.isConchApp&&"0.9.15"<e$yD.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},e$D.replaceSkin=function(e$D){this._diyTexture=e$D,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},e$D.setParentMatrix=function(e$D){this._parentMatrix=e$D},e$D.draw=function(e$D,e$m,e$Y,e$t){if(void 0===e$Y&&(e$Y=!1),void 0===e$t&&(e$t=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var e$y,e$l=this.currTexture;switch(this._diyTexture&&(e$l=this._diyTexture),this.currDisplayData.type){case 0:if(e$D){var e$E=this.getDisplayMatrix();if(this._parentMatrix){var e$B=!1;if(e$E){var e$o;if(e$CD.mul(e$E,this._parentMatrix,e$CD.TEMP),e$o=e$Y?(null==this._resultMatrix&&(this._resultMatrix=new e$CD),this._resultMatrix):new e$CD,!e$w.isWebGL&&this.currDisplayData.uvs||e$w.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var e$r=e$I._tempMatrix;e$r.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(e$r.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(e$B=!0,e$r.rotate(-Math.PI/2)),e$CD.mul(e$r,e$CD.TEMP,e$o)}else e$CD.TEMP.copyTo(e$o);e$B?e$D.drawTexture(e$l,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,e$o):e$D.drawTexture(e$l,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,e$o)}}}break;case 1:if(null==(e$y=e$Y?(null==this._skinSprite&&(this._skinSprite=e$I.createSkinMesh()),this._skinSprite):e$I.createSkinMesh()))return;var e$f;if(null==this.currDisplayData.bones){var e$_,e$i=this.currDisplayData.weights;this.deformData&&(e$i=this.deformData),e$_=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=e$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=e$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=e$i;this.currDisplayData.triangles.length;e$f=this.currDisplayData.triangles,e$y.init2(e$l,null,e$f,this._mVerticleArr,e$_);var e$R,e$G=this.getDisplayMatrix();if(this._parentMatrix)if(e$G)e$CD.mul(e$G,this._parentMatrix,e$CD.TEMP),e$R=e$Y?(null==this._resultMatrix&&(this._resultMatrix=new e$CD),this._resultMatrix):new e$CD,e$CD.TEMP.copyTo(e$R),e$y.transform=e$R}else this.skinMesh(e$m,e$y,e$t);e$D.drawSkin(e$y);break;case 2:if(null==(e$y=e$Y?(null==this._skinSprite&&(this._skinSprite=e$I.createSkinMesh()),this._skinSprite):e$I.createSkinMesh()))return;this.skinMesh(e$m,e$y,e$t),e$D.drawSkin(e$y)}}},e$D.skinMesh=function(e$D,e$m,e$Y){var e$t,e$y=this.currTexture,e$l=this.currDisplayData.bones;e$t=this._diyTexture?(e$y=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=e$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=e$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var e$E,e$B,e$o=this.currDisplayData.weights,e$r=this.currDisplayData.triangles,e$f=0,e$_=0,e$i=0,e$R=NaN,e$G=NaN,e$I=0,e$w=0,e$W=[],e$U=0,e$e=0;if(this.deformData&&0<this.deformData.length){var e$v=0;for(e$U=0,e$e=e$l.length;e$U<e$e;){for(e$i=e$l[e$U++]+e$U,e$_=e$f=0;e$U<e$i;e$U++)e$B=e$D[e$l[e$U]],e$R=e$o[e$I]+this.deformData[e$v++],e$G=e$o[e$I+1]+this.deformData[e$v++],e$w=e$o[e$I+2],e$f+=(e$R*e$B.a+e$G*e$B.c+e$B.tx)*e$w,e$_+=(e$R*e$B.b+e$G*e$B.d+e$B.ty)*e$w,e$I+=3;e$W.push(e$f,e$_)}}else for(e$U=0,e$e=e$l.length;e$U<e$e;){for(e$i=e$l[e$U++]+e$U,e$_=e$f=0;e$U<e$i;e$U++)e$B=e$D[e$l[e$U]],e$R=e$o[e$I],e$G=e$o[e$I+1],e$w=e$o[e$I+2],e$f+=(e$R*e$B.a+e$G*e$B.c+e$B.tx)*e$w,e$_+=(e$R*e$B.b+e$G*e$B.d+e$B.ty)*e$w,e$I+=3;e$W.push(e$f,e$_)}this._mVerticleArr=e$W,e$E=e$r,e$m.init2(e$y,null,e$E,this._mVerticleArr,e$t)},e$D.drawBonePoint=function(e$D){e$D&&this._parentMatrix&&e$D.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},e$D.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},e$D.getMatrix=function(){return this._resultMatrix},e$D.copy=function(){var e$D=new e$I;return e$D.type="copy",e$D.name=this.name,e$D.attachmentName=this.attachmentName,e$D.srcDisplayIndex=this.srcDisplayIndex,e$D.parent=this.parent,e$D.displayIndex=this.displayIndex,e$D.templet=this.templet,e$D.currSlotData=this.currSlotData,e$D.currTexture=this.currTexture,e$D.currDisplayData=this.currDisplayData,e$D},e$I.createSkinMesh=function(){return e$w.isWebGL||e$w.isConchApp?e$R.skinAniSprite():(e$w.isWebGL,null)},e$Y(e$I,["_tempMatrix",function(){return this._tempMatrix=new e$CD}]),e$I}(),e$PD=function(){function e$D(){this.skinName=null,this.deformSlotDataList=[]}return e$t(e$D,"laya.ani.bone.DeformAniData"),e$D}(),e$uD=function(){function e$D(){this.deformSlotDisplayList=[]}return e$t(e$D,"laya.ani.bone.DeformSlotData"),e$D}(),e$LD=function(){function e$D(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}e$t(e$D,"laya.ani.bone.DeformSlotDisplayData");var e$m=e$D.prototype;return e$m.binarySearch1=function(e$D,e$m){var e$Y=0,e$t=e$D.length-2;if(0==e$t)return 1;for(var e$y=e$t>>>1;;){if(e$D[Math.floor(e$y+1)]<=e$m?e$Y=e$y+1:e$t=e$y,e$Y==e$t)return e$Y+1;e$y=e$Y+e$t>>>1}return 0},e$m.apply=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=1),e$D+=.05,!(this.timeList.length<=0)){var e$t=0;if(!(e$D<this.timeList[0])){var e$y=this.vectices[0].length,e$l=[],e$E=this.binarySearch1(this.timeList,e$D);if(this.frameIndex=e$E,e$D>=this.timeList[this.timeList.length-1]){var e$B=this.vectices[this.vectices.length-1];if(e$Y<1)for(e$t=0;e$t<e$y;e$t++)e$l[e$t]+=(e$B[e$t]-e$l[e$t])*e$Y;else for(e$t=0;e$t<e$y;e$t++)e$l[e$t]=e$B[e$t];this.deformData=e$l}else{this.tweenKeyList[this.frameIndex];var e$o=this.vectices[this.frameIndex-1],e$r=this.vectices[this.frameIndex],e$f=this.timeList[this.frameIndex-1],e$_=this.timeList[this.frameIndex];e$Y=this.tweenKeyList[e$E-1]?(e$D-e$f)/(e$_-e$f):0;var e$i=NaN;for(e$t=0;e$t<e$y;e$t++)e$i=e$o[e$t],e$l[e$t]=e$i+(e$r[e$t]-e$i)*e$Y;this.deformData=e$l}}}},e$D}(),e$qD=function(){function e$D(){this.time=NaN,this.drawOrder=[]}return e$t(e$D,"laya.ani.bone.DrawOrderData"),e$D}(),e$$D=function(){function e$D(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return e$t(e$D,"laya.ani.bone.EventData"),e$D}(),e$U=function(){function e$tD(e$D,e$m){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=e$D,this._targetBone=e$m[e$D.targetBoneIndex],this.isSpine=e$D.isSpine,null==this._bones&&(this._bones=[]);for(var e$Y=this._bones.length=0,e$t=e$D.boneIndexs.length;e$Y<e$t;e$Y++)this._bones.push(e$m[e$D.boneIndexs[e$Y]]);this.name=e$D.name,this.mix=e$D.mix,this.bendDirection=e$D.bendDirection}e$t(e$tD,"laya.ani.bone.IkConstraint");var e$D=e$tD.prototype;return e$D.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},e$D._applyIk1=function(e$D,e$m,e$Y,e$t){var e$y=e$D.parentBone,e$l=1/(e$y.resultMatrix.a*e$y.resultMatrix.d-e$y.resultMatrix.b*e$y.resultMatrix.c),e$E=e$m-e$y.resultMatrix.tx,e$B=e$Y-e$y.resultMatrix.ty,e$o=(e$E*e$y.resultMatrix.d-e$B*e$y.resultMatrix.c)*e$l-e$D.transform.x,e$r=(e$B*e$y.resultMatrix.a-e$E*e$y.resultMatrix.b)*e$l-e$D.transform.y,e$f=Math.atan2(e$r,e$o)*e$tD.radDeg-0-e$D.transform.skX;e$D.transform.scX<0&&(e$f+=180),180<e$f?e$f-=360:e$f<-180&&(e$f+=360),e$D.transform.skX=e$D.transform.skY=e$D.transform.skX+e$f*e$t,e$D.update()},e$D.updatePos=function(e$D,e$m){this._sp&&this._sp.pos(e$D,e$m)},e$D._applyIk2=function(e$D,e$m,e$Y,e$t,e$y,e$l){if(0!=e$l){var e$E=e$D.resultTransform.x,e$B=e$D.resultTransform.y,e$o=e$D.transform.scX,e$r=e$D.transform.scY,e$f=e$m.transform.scX,e$_=0,e$i=0,e$R=0;e$R=e$o<0?(e$o=-e$o,e$_=180,-1):(e$_=0,1),e$r<0&&(e$r=-e$r,e$R=-e$R),e$i=e$f<0?(e$f=-e$f,180):0;var e$G=e$m.resultTransform.x,e$I=NaN,e$w=NaN,e$W=NaN,e$U=e$D.resultMatrix.a,e$e=e$D.resultMatrix.c,e$v=e$D.resultMatrix.b,e$c=e$D.resultMatrix.d,e$S=Math.abs(e$o-e$r)<=1e-4;e$W=e$S?(e$w=e$U*e$G+e$e*(e$I=e$m.resultTransform.y)+e$D.resultMatrix.tx,e$v*e$G+e$c*e$I+e$D.resultMatrix.ty):(e$I=0,e$w=e$U*e$G+e$D.resultMatrix.tx,e$v*e$G+e$D.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new e$yD,e$TD.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(e$Y,e$t,15,"#ffff00"),this._sp.graphics.drawCircle(e$w,e$W,15,"#ff00ff")),e$D.setRotation(Math.atan2(e$W-e$D.resultMatrix.ty,e$w-e$D.resultMatrix.tx));var e$z=e$D.parentBone;e$U=e$z.resultMatrix.a,e$e=e$z.resultMatrix.c,e$v=e$z.resultMatrix.b;var e$A=1/(e$U*(e$c=e$z.resultMatrix.d)-e$e*e$v),e$J=e$Y-e$z.resultMatrix.tx,e$a=e$t-e$z.resultMatrix.ty,e$p=(e$J*e$c-e$a*e$e)*e$A-e$E,e$F=(e$a*e$U-e$J*e$v)*e$A-e$B,e$s=((e$J=e$w-e$z.resultMatrix.tx)*e$c-(e$a=e$W-e$z.resultMatrix.ty)*e$e)*e$A-e$E,e$Q=(e$a*e$U-e$J*e$v)*e$A-e$B,e$T=Math.sqrt(e$s*e$s+e$Q*e$Q),e$N=e$m.length*e$f,e$C=NaN,e$O=NaN;if(e$S){var e$h=(e$p*e$p+e$F*e$F-e$T*e$T-(e$N*=e$o)*e$N)/(2*e$T*e$N);e$h<-1?e$h=-1:1<e$h&&(e$h=1),e$O=Math.acos(e$h)*e$y,e$U=e$T+e$N*e$h,e$e=e$N*Math.sin(e$O),e$C=Math.atan2(e$F*e$U-e$p*e$e,e$p*e$U+e$F*e$e)}else{var e$X=(e$U=e$o*e$N)*e$U,e$P=(e$e=e$r*e$N)*e$e,e$u=e$p*e$p+e$F*e$F,e$L=Math.atan2(e$F,e$p),e$q=-2*e$P*e$T,e$$=e$P-e$X;if(0<(e$c=e$q*e$q-4*e$$*(e$v=e$P*e$T*e$T+e$X*e$u-e$X*e$P))){var e$d=Math.sqrt(e$c);e$q<0&&(e$d=-e$d);var e$k=(e$d=-(e$q+e$d)/2)/e$$,e$M=e$v/e$d,e$n=Math.abs(e$k)<Math.abs(e$M)?e$k:e$M;e$n*e$n<=e$u&&(e$a=Math.sqrt(e$u-e$n*e$n)*e$y,e$C=e$L-Math.atan2(e$a,e$n),e$O=Math.atan2(e$a/e$r,(e$n-e$T)/e$o))}var e$g=0,e$H=Number.MAX_VALUE,e$x=0,e$V=0,e$Z=0,e$b=0,e$j=0,e$K=0;e$b<(e$c=(e$J=e$T+e$U)*e$J)&&(e$Z=0,e$b=e$c,e$j=e$J),(e$c=(e$J=e$T-e$U)*e$J)<e$H&&(e$g=Math.PI,e$H=e$c,e$x=e$J);var e$DD=Math.acos(-e$U*e$T/(e$X-e$P));(e$c=(e$J=e$U*Math.cos(e$DD)+e$T)*e$J+(e$a=e$e*Math.sin(e$DD))*e$a)<e$H&&(e$g=e$DD,e$H=e$c,e$x=e$J,e$V=e$a),e$b<e$c&&(e$Z=e$DD,e$b=e$c,e$j=e$J,e$K=e$a),e$O=e$u<=(e$H+e$b)/2?(e$C=e$L-Math.atan2(e$V*e$y,e$x),e$g*e$y):(e$C=e$L-Math.atan2(e$K*e$y,e$j),e$Z*e$y)}var e$mD=Math.atan2(e$I,e$G)*e$R,e$YD=e$D.resultTransform.skX;180<(e$C=(e$C-e$mD)*e$tD.radDeg+e$_-e$YD)?e$C-=360:e$C<-180&&(e$C+=360),e$D.resultTransform.x=e$E,e$D.resultTransform.y=e$B,e$D.resultTransform.skX=e$D.resultTransform.skY=e$YD+e$C*e$l,e$YD=e$m.resultTransform.skX,180<(e$O=((e$O+e$mD)*e$tD.radDeg-0)*e$R+e$i-(e$YD%=360))?e$O-=360:e$O<-180&&(e$O+=360),e$m.resultTransform.x=e$G,e$m.resultTransform.y=e$I,e$m.resultTransform.skX=e$m.resultTransform.skY=e$m.resultTransform.skY+e$O*e$l,e$D.update()}},e$D._applyIk3=function(e$D,e$m,e$Y,e$t,e$y,e$l){if(0!=e$l){var e$E,e$B,e$o=e$m.resultMatrix.a*e$m.length,e$r=e$m.resultMatrix.b*e$m.length,e$f=e$o*e$o+e$r*e$r,e$_=Math.sqrt(e$f),e$i=e$D.resultMatrix.tx,e$R=e$D.resultMatrix.ty,e$G=e$m.resultMatrix.tx,e$I=e$m.resultMatrix.ty,e$w=e$G-e$i,e$W=e$I-e$R,e$U=e$w*e$w+e$W*e$W,e$e=Math.sqrt(e$U),e$v=(e$w=e$Y-e$D.resultMatrix.tx)*e$w+(e$W=e$t-e$D.resultMatrix.ty)*e$W,e$c=Math.sqrt(e$v);if(e$_+e$e<=e$c||e$c+e$_<=e$e||e$c+e$e<=e$_){var e$S=NaN;e$G=e$i+(e$S=e$_+e$e<=e$c?1:-1)*(e$Y-e$i)*e$e/e$c,e$I=e$R+e$S*(e$t-e$R)*e$e/e$c}else{var e$z=(e$U-e$f+e$v)/(2*e$v),e$A=Math.sqrt(e$U-e$z*e$z*e$v)/e$c,e$J=e$i+e$w*e$z,e$a=e$R+e$W*e$z,e$p=-e$W*e$A,e$F=e$w*e$A;e$I=0<e$y?(e$G=e$J-e$p,e$a-e$F):(e$G=e$J+e$p,e$a+e$F)}e$E=e$G,e$B=e$I,this.isDebug&&(this._sp||(this._sp=new e$yD,e$TD.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(e$i,e$R,15,"#ff00ff"),this._sp.graphics.drawCircle(e$Y,e$t,15,"#ffff00"),this._sp.graphics.drawCircle(e$E,e$B,15,"#ff00ff"));var e$s,e$Q;e$s=Math.atan2(e$B-e$D.resultMatrix.ty,e$E-e$D.resultMatrix.tx),e$D.setRotation(e$s),(e$Q=e$tD._tempMatrix).identity(),e$Q.rotate(e$s),e$Q.scale(e$D.resultMatrix.getScaleX(),e$D.resultMatrix.getScaleY()),e$Q.translate(e$D.resultMatrix.tx,e$D.resultMatrix.ty),e$Q.copyTo(e$D.resultMatrix),e$D.updateChild();var e$T,e$N;e$T=Math.atan2(e$t-e$B,e$Y-e$E),e$m.setRotation(e$T),(e$N=e$tD._tempMatrix).identity(),e$N.rotate(e$T),e$N.scale(e$m.resultMatrix.getScaleX(),e$m.resultMatrix.getScaleY()),e$N.translate(e$E,e$B),e$Q.copyTo(e$m.resultMatrix),e$m.updateChild()}},e$Y(e$tD,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new e$CD}]),e$tD}(),e$dD=function(){function e$D(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return e$t(e$D,"laya.ani.bone.IkConstraintData"),e$D}(),e$c=function(){function e$N(e$D,e$m){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=e$D,this.position=e$D.position,this.spacing=e$D.spacing,this.rotateMix=e$D.rotateMix,this.translateMix=e$D.translateMix,this.bones=[];for(var e$Y=this.data.bones,e$t=0,e$y=e$Y.length;e$t<e$y;e$t++)this.bones.push(e$m[e$Y[e$t]])}e$t(e$N,"laya.ani.bone.PathConstraint");var e$D=e$N.prototype;return e$D.apply=function(e$D,e$m){if(this.target){var e$Y=this.translateMix,e$t=this.translateMix,e$y=0<e$t,e$l=this.data.spacingMode,e$E="length"==e$l,e$B=this.data.rotateMode,e$o="tangent"==e$B,e$r="chainScale"==e$B,e$f=[],e$_=this.bones.length,e$i=e$o?e$_:e$_+1,e$R=[];(this._spaces=e$R)[0]=this.position;var e$G=this.spacing;if(e$r||e$E)for(var e$I=0,e$w=e$i-1;e$I<e$w;){var e$W=this.bones[e$I],e$U=e$W.length,e$e=e$U*e$W.resultMatrix.a,e$v=e$U*e$W.resultMatrix.b;e$U=Math.sqrt(e$e*e$e+e$v*e$v),e$r&&(e$f[e$I]=e$U),e$R[++e$I]=e$E?Math.max(0,e$U+e$G):e$G}else for(e$I=1;e$I<e$i;e$I++)e$R[e$I]=e$G;var e$c=this.computeWorldPositions(this.target,e$D,e$m,e$i,e$o,"percent"==this.data.positionMode,"percent"==e$l);if(this._debugKey){for(e$I=0;e$I<e$c.length;e$I++)e$m.drawCircle(e$c[e$I++],e$c[e$I++],5,"#00ff00");var e$S=[];for(e$I=0;e$I<e$c.length;e$I++)e$S.push(e$c[e$I++],e$c[e$I++]);e$m.drawLines(0,0,e$S,"#ff0000")}var e$z=e$c[0],e$A=e$c[1],e$J=this.data.offsetRotation,e$a="chain"==e$B&&0==e$J,e$p=NaN;for(e$I=0,e$p=3;e$I<e$_;e$I++,e$p+=3){(e$W=this.bones[e$I]).resultMatrix.tx+=(e$z-e$W.resultMatrix.tx)*e$Y,e$W.resultMatrix.ty+=(e$A-e$W.resultMatrix.ty)*e$Y;var e$F=(e$e=e$c[e$p])-e$z,e$s=(e$v=e$c[e$p+1])-e$A;if(e$r&&0!=(e$U=e$f[e$I])){var e$Q=(Math.sqrt(e$F*e$F+e$s*e$s)/e$U-1)*e$t+1;e$W.resultMatrix.a*=e$Q,e$W.resultMatrix.c*=e$Q}if(e$z=e$e,e$A=e$v,e$y){var e$T=e$W.resultMatrix.a,e$N=e$W.resultMatrix.c,e$C=e$W.resultMatrix.b,e$O=e$W.resultMatrix.d,e$h=NaN,e$X=NaN,e$P=NaN;e$h=e$o?e$c[e$p-1]:0==e$R[e$I+1]?e$c[e$p+2]:Math.atan2(e$s,e$F),e$h-=Math.atan2(e$C,e$T)-e$J/180*Math.PI,e$a&&(e$X=Math.cos(e$h),e$P=Math.sin(e$h),e$z+=((e$U=e$W.length)*(e$X*e$T-e$P*e$C)-e$F)*e$t,e$A+=(e$U*(e$P*e$T+e$X*e$C)-e$s)*e$t),e$h>Math.PI?e$h-=2*Math.PI:e$h<-Math.PI&&(e$h+=2*Math.PI),e$h*=e$t,e$X=Math.cos(e$h),e$P=Math.sin(e$h),e$W.resultMatrix.a=e$X*e$T-e$P*e$C,e$W.resultMatrix.c=e$X*e$N-e$P*e$O,e$W.resultMatrix.b=e$P*e$T+e$X*e$C,e$W.resultMatrix.d=e$P*e$N+e$X*e$O}}}},e$D.computeWorldVertices2=function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E,e$B,e$o=e$D.currDisplayData.bones,e$r=e$D.currDisplayData.weights,e$f=e$D.currDisplayData.triangles,e$_=0,e$i=0,e$R=0,e$G=0,e$I=0,e$w=0,e$W=0,e$U=0,e$e=0,e$v=0,e$c=0;if(null!=e$o){for(e$_=0;e$_<e$Y;e$_+=2)e$i+=(e$G=e$o[e$i])+1,e$R+=e$G;var e$S=e$m;for(e$I=e$l,e$w=3*e$R;e$I<e$t;e$I+=2){for(e$U=e$W=0,e$G=e$o[e$i++],e$G+=e$i;e$i<e$G;e$i++,e$w+=3){e$E=e$S[e$o[e$i]].resultMatrix,e$e=e$r[e$w],e$v=e$r[e$w+1];var e$z=e$r[e$w+2];e$W+=(e$e*e$E.a+e$v*e$E.c+e$E.tx)*e$z,e$U+=(e$e*e$E.b+e$v*e$E.d+e$E.ty)*e$z}e$y[e$I]=e$W,e$y[e$I+1]=e$U}}else{var e$A,e$J;if(e$f||(e$f=e$r),e$D.deformData&&(e$f=e$D.deformData),e$A=e$D.parent,e$m)for(e$c=e$m.length,e$_=0;e$_<e$c;e$_++)if(e$m[e$_].name==e$A){e$B=e$m[e$_];break}e$B&&(e$J=e$B.resultMatrix),e$J||(e$J=e$N._tempMt);var e$a=e$J.tx,e$p=e$J.ty,e$F=e$J.a,e$s=e$J.b,e$Q=e$J.c,e$T=e$J.d;for(e$B&&(e$T*=e$B.d),e$i=e$Y,e$I=e$l;e$I<e$t;e$i+=2,e$I+=2)e$e=e$f[e$i],e$v=e$f[e$i+1],e$y[e$I]=e$e*e$F+e$v*e$s+e$a,e$y[e$I+1]=-(e$e*e$Q+e$v*e$T+e$p)}},e$D.computeWorldPositions=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){e$D.currDisplayData.bones,e$D.currDisplayData.weights,e$D.currDisplayData.triangles;var e$B=[],e$o=0,e$r=e$D.currDisplayData.verLen,e$f=this.position,e$_=this._spaces,e$i=[],e$R=[],e$G=e$r/6,e$I=-1,e$w=NaN,e$W=0,e$U=0,e$e=NaN,e$v=NaN,e$c=NaN,e$S=NaN;if(e$G--,e$r-=4,this.computeWorldVertices2(e$D,e$m,2,e$r,e$B,0),this._debugKey)for(e$o=0;e$o<e$B.length;)e$Y.drawCircle(e$B[e$o++],e$B[e$o++],10,"#ff0000");e$i=e$B,this._curves.length=e$G;var e$z=this._curves,e$A=e$i[e$w=0],e$J=e$i[1],e$a=0,e$p=0,e$F=0,e$s=0,e$Q=0,e$T=0,e$N=NaN,e$C=NaN,e$O=NaN,e$h=NaN,e$X=NaN,e$P=NaN,e$u=NaN,e$L=NaN,e$q=0;for(e$o=0,e$q=2;e$o<e$G;e$o++,e$q+=6)e$a=e$i[e$q],e$p=e$i[e$q+1],e$F=e$i[e$q+2],e$s=e$i[e$q+3],e$X=2*(e$N=.1875*(e$A-2*e$a+e$F))+(e$O=.09375*(3*(e$a-e$F)-e$A+(e$Q=e$i[e$q+4]))),e$P=2*(e$C=.1875*(e$J-2*e$p+e$s))+(e$h=.09375*(3*(e$p-e$s)-e$J+(e$T=e$i[e$q+5]))),e$u=.75*(e$a-e$A)+e$N+.16666667*e$O,e$L=.75*(e$p-e$J)+e$C+.16666667*e$h,e$w+=Math.sqrt(e$u*e$u+e$L*e$L),e$u+=e$X,e$L+=e$P,e$X+=e$O,e$P+=e$h,e$w+=Math.sqrt(e$u*e$u+e$L*e$L),e$u+=e$X,e$L+=e$P,e$w+=Math.sqrt(e$u*e$u+e$L*e$L),e$u+=e$X+e$O,e$L+=e$P+e$h,e$w+=Math.sqrt(e$u*e$u+e$L*e$L),e$z[e$o]=e$w,e$A=e$Q,e$J=e$T;if(e$l&&(e$f*=e$w),e$E)for(e$o=0;e$o<e$t;e$o++)e$_[e$o]*=e$w;var e$$=this._segments,e$d=0,e$k=0;for(e$k=e$U=e$W=e$o=0;e$o<e$t;e$o++,e$W+=3)if((e$e=e$f+=e$v=e$_[e$o])<0)this.addBeforePosition(e$e,e$i,0,e$R,e$W);else if(e$w<e$e)this.addAfterPosition(e$e-e$w,e$i,e$r-4,e$R,e$W);else{for(;;e$U++)if(!((e$S=e$z[e$U])<e$e)){0==e$U?e$e/=e$S:e$e=(e$e-(e$c=e$z[e$U-1]))/(e$S-e$c);break}if(e$U!=e$I){var e$M=6*(e$I=e$U);for(e$A=e$i[e$M],e$J=e$i[e$M+1],e$a=e$i[e$M+2],e$p=e$i[e$M+3],e$F=e$i[e$M+4],e$s=e$i[e$M+5],e$X=2*(e$N=.03*(e$A-2*e$a+e$F))+(e$O=.006*(3*(e$a-e$F)-e$A+(e$Q=e$i[e$M+6]))),e$P=2*(e$C=.03*(e$J-2*e$p+e$s))+(e$h=.006*(3*(e$p-e$s)-e$J+(e$T=e$i[e$M+7]))),e$u=.3*(e$a-e$A)+e$N+.16666667*e$O,e$L=.3*(e$p-e$J)+e$C+.16666667*e$h,e$d=Math.sqrt(e$u*e$u+e$L*e$L),e$$[0]=e$d,e$M=1;e$M<8;e$M++)e$u+=e$X,e$L+=e$P,e$X+=e$O,e$P+=e$h,e$d+=Math.sqrt(e$u*e$u+e$L*e$L),e$$[e$M]=e$d;e$u+=e$X,e$L+=e$P,e$d+=Math.sqrt(e$u*e$u+e$L*e$L),e$$[8]=e$d,e$u+=e$X+e$O,e$L+=e$P+e$h,e$d+=Math.sqrt(e$u*e$u+e$L*e$L),e$$[9]=e$d,e$k=0}for(e$e*=e$d;;e$k++)if(!((e$S=e$$[e$k])<e$e)){0==e$k?e$e/=e$S:e$e=e$k+(e$e-(e$c=e$$[e$k-1]))/(e$S-e$c);break}this.addCurvePosition(.1*e$e,e$A,e$J,e$a,e$p,e$F,e$s,e$Q,e$T,e$R,e$W,e$y||0<e$o&&0==e$v)}return e$R},e$D.addBeforePosition=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$m[e$Y],e$E=e$m[e$Y+1],e$B=e$m[e$Y+2]-e$l,e$o=e$m[e$Y+3]-e$E,e$r=Math.atan2(e$o,e$B);e$t[e$y]=e$l+e$D*Math.cos(e$r),e$t[e$y+1]=e$E+e$D*Math.sin(e$r),e$t[e$y+2]=e$r},e$D.addAfterPosition=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$m[e$Y+2],e$E=e$m[e$Y+3],e$B=e$l-e$m[e$Y],e$o=e$E-e$m[e$Y+1],e$r=Math.atan2(e$o,e$B);e$t[e$y]=e$l+e$D*Math.cos(e$r),e$t[e$y+1]=e$E+e$D*Math.sin(e$r),e$t[e$y+2]=e$r},e$D.addCurvePosition=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_){0==e$D&&(e$D=1e-4);var e$i=e$D*e$D,e$R=e$i*e$D,e$G=1-e$D,e$I=e$G*e$G,e$w=e$I*e$G,e$W=e$G*e$D,e$U=3*e$W,e$e=e$G*e$U,e$v=e$U*e$D,e$c=e$m*e$w+e$t*e$e+e$l*e$v+e$B*e$R,e$S=e$Y*e$w+e$y*e$e+e$E*e$v+e$o*e$R;e$r[e$f]=e$c,e$r[e$f+1]=e$S,e$r[e$f+2]=e$_?Math.atan2(e$S-(e$Y*e$I+e$y*e$W*2+e$E*e$i),e$c-(e$m*e$I+e$t*e$W*2+e$l*e$i)):0},e$N.NONE=-1,e$N.BEFORE=-2,e$N.AFTER=-3,e$Y(e$N,["_tempMt",function(){return this._tempMt=new e$CD}]),e$N}(),e$kD=function(){function e$D(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return e$t(e$D,"laya.ani.bone.PathConstraintData"),e$D}(),e$MD=function(){function e$D(){this.name=null,this.slotArr=[]}return e$t(e$D,"laya.ani.bone.SkinData"),e$D}(),e$nD=function(){function e$D(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}e$t(e$D,"laya.ani.bone.SkinSlotDisplayData");var e$m=e$D.prototype;return e$m.createTexture=function(e$D){return this.texture||(this.texture=new e$OD(e$D.bitmap,this.uvs),e$D.bitmap.alphaTexture&&(this.texture.alphaTexture=new e$OD(e$D.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=e$D.height,this.texture.height=e$D.width,this.texture.offsetX=-e$D.offsetX,this.texture.offsetY=-e$D.offsetY,this.texture.sourceWidth=e$D.sourceHeight,this.texture.sourceHeight=e$D.sourceWidth):(this.texture.width=e$D.width,this.texture.height=e$D.height,this.texture.offsetX=-e$D.offsetX,this.texture.offsetY=-e$D.offsetY,this.texture.sourceWidth=e$D.sourceWidth,this.texture.sourceHeight=e$D.sourceHeight),e$w.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},e$m.destory=function(){this.texture&&this.texture.destroy()},e$D}(),e$gD=function(){function e$D(){this.name=null,this.displayArr=[]}return e$t(e$D,"laya.ani.bone.SlotData"),e$D.prototype.getDisplayByName=function(e$D){for(var e$m=0,e$Y=this.displayArr.length;e$m<e$Y;e$m++)if(this.displayArr[e$m].attachmentName==e$D)return e$m;return-1},e$D}(),e$S=function(){function e$D(e$D,e$m){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=e$I(2,0),this._data=e$D,null==this._bones&&(this._bones=[]),this.target=e$m[e$D.targetIndex];var e$Y,e$t=0;for(e$t=0,e$Y=e$D.boneIndexs.length;e$t<e$Y;e$t++)this._bones.push(e$m[e$D.boneIndexs[e$t]]);this.rotateMix=e$D.rotateMix,this.translateMix=e$D.translateMix,this.scaleMix=e$D.scaleMix,this.shearMix=e$D.shearMix}return e$t(e$D,"laya.ani.bone.TfConstraint"),e$D.prototype.apply=function(){for(var e$D,e$m=this.target.resultMatrix.a,e$Y=this.target.resultMatrix.b,e$t=this.target.resultMatrix.c,e$y=this.target.resultMatrix.d,e$l=0,e$E=this._bones.length;e$l<e$E;e$l++){if(e$D=this._bones[e$l],0<this.rotateMix){var e$B=e$D.resultMatrix.a,e$o=e$D.resultMatrix.b,e$r=e$D.resultMatrix.c,e$f=e$D.resultMatrix.d,e$_=Math.atan2(e$t,e$m)-Math.atan2(e$r,e$B)+this._data.offsetRotation*Math.PI/180;e$_>Math.PI?e$_-=2*Math.PI:e$_<-Math.PI&&(e$_+=2*Math.PI),e$_*=this.rotateMix;var e$i=Math.cos(e$_),e$R=Math.sin(e$_);e$D.resultMatrix.a=e$i*e$B-e$R*e$r,e$D.resultMatrix.b=e$i*e$o-e$R*e$f,e$D.resultMatrix.c=e$R*e$B+e$i*e$r,e$D.resultMatrix.d=e$R*e$o+e$i*e$f}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),e$D.resultMatrix.tx+=(this._temp[0]-e$D.resultMatrix.tx)*this.translateMix,e$D.resultMatrix.ty+=(this._temp[1]-e$D.resultMatrix.ty)*this.translateMix,e$D.updateChild()),0<this.scaleMix){var e$G=Math.sqrt(e$D.resultMatrix.a*e$D.resultMatrix.a+e$D.resultMatrix.c*e$D.resultMatrix.c),e$I=Math.sqrt(e$m*e$m+e$t*e$t),e$w=1e-5<e$G?(e$G+(e$I-e$G+this._data.offsetScaleX)*this.scaleMix)/e$G:0;e$D.resultMatrix.a*=e$w,e$D.resultMatrix.c*=e$w,e$G=Math.sqrt(e$D.resultMatrix.b*e$D.resultMatrix.b+e$D.resultMatrix.d*e$D.resultMatrix.d),e$I=Math.sqrt(e$Y*e$Y+e$y*e$y),e$w=1e-5<e$G?(e$G+(e$I-e$G+this._data.offsetScaleY)*this.scaleMix)/e$G:0,e$D.resultMatrix.b*=e$w,e$D.resultMatrix.d*=e$w}if(0<this.shearMix){e$o=e$D.resultMatrix.b,e$f=e$D.resultMatrix.d;var e$W=Math.atan2(e$f,e$o);(e$_=Math.atan2(e$y,e$Y)-Math.atan2(e$t,e$m)-(e$W-Math.atan2(e$D.resultMatrix.c,e$D.resultMatrix.a)))>Math.PI?e$_-=2*Math.PI:e$_<-Math.PI&&(e$_+=2*Math.PI),e$_=e$W+(e$_+this._data.offsetShearY*Math.PI/180)*this.shearMix,e$w=Math.sqrt(e$o*e$o+e$f*e$f),e$D.resultMatrix.b=Math.cos(e$_)*e$w,e$D.resultMatrix.d=Math.sin(e$_)*e$w}}},e$D}(),e$HD=function(){function e$D(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return e$t(e$D,"laya.ani.bone.TfConstraintData"),e$D}(),e$xD=function(){function e$D(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}e$t(e$D,"laya.ani.bone.Transform");var e$m=e$D.prototype;return e$m.initData=function(e$D){null!=e$D.x&&(this.x=e$D.x),null!=e$D.y&&(this.y=e$D.y),null!=e$D.skX&&(this.skX=e$D.skX),null!=e$D.skY&&(this.skY=e$D.skY),null!=e$D.scX&&(this.scX=e$D.scX),null!=e$D.scY&&(this.scY=e$D.scY)},e$m.getMatrix=function(){var e$D;return(e$D=this.mMatrix?this.mMatrix:this.mMatrix=new e$CD).identity(),e$D.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(e$D,this.skewX*Math.PI/180,this.skewY*Math.PI/180),e$D.rotate(this.skX*Math.PI/180),e$D.translate(this.x,this.y),e$D},e$m.skew=function(e$D,e$m,e$Y){var e$t=Math.sin(e$Y),e$y=Math.cos(e$Y),e$l=Math.sin(e$m),e$E=Math.cos(e$m);return e$D.setTo(e$D.a*e$E-e$D.b*e$t,e$D.a*e$l+e$D.b*e$y,e$D.c*e$E-e$D.d*e$t,e$D.c*e$l+e$D.d*e$y,e$D.tx*e$E-e$D.ty*e$t,e$D.tx*e$l+e$D.ty*e$y),e$D},e$D}(),e$z=function(){function e$D(){}return e$t(e$D,"laya.ani.bone.UVTools"),e$D.getRelativeUV=function(e$D,e$m,e$Y){var e$t=e$D[0],e$y=e$D[2]-e$D[0],e$l=e$D[1],e$E=e$D[5]-e$D[1];e$Y||(e$Y=[]),e$Y.length=e$m.length;var e$B,e$o=0;e$B=e$Y.length;var e$r=1/e$y,e$f=1/e$E;for(e$o=0;e$o<e$B;e$o+=2)e$Y[e$o]=(e$m[e$o]-e$t)*e$r,e$Y[e$o+1]=(e$m[e$o+1]-e$l)*e$f;return e$Y},e$D.getAbsoluteUV=function(e$D,e$m,e$Y){if(0==e$D[0]&&0==e$D[1]&&1==e$D[4]&&1==e$D[5])return e$Y?(e$W.copyArray(e$Y,e$m),e$Y):e$m;var e$t=e$D[0],e$y=e$D[2]-e$D[0],e$l=e$D[1],e$E=e$D[5]-e$D[1];e$Y||(e$Y=[]),e$Y.length=e$m.length;var e$B,e$o=0;for(e$B=e$Y.length,e$o=0;e$o<e$B;e$o+=2)e$Y[e$o]=e$m[e$o]*e$y+e$t,e$Y[e$o+1]=e$m[e$o+1]*e$E+e$l;return e$Y},e$D}(),e$N=function(){function e$D(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return e$t(e$D,"laya.ani.KeyFramesContent"),e$D}(),e$A=function(){function e$f(){}return e$t(e$f,"laya.ani.math.BezierLerp"),e$f.getBezierRate=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$f._getBezierParamKey(e$m,e$Y,e$t,e$y),e$E=100*e$l+e$D;if(e$f._bezierResultCache[e$E])return e$f._bezierResultCache[e$E];var e$B,e$o=e$f._getBezierPoints(e$m,e$Y,e$t,e$y,e$l),e$r=0;for(e$B=e$o.length,e$r=0;e$r<e$B;e$r+=2)if(e$D<=e$o[e$r])return e$f._bezierResultCache[e$E]=e$o[e$r+1],e$o[e$r+1];return e$f._bezierResultCache[e$E]=1},e$f._getBezierParamKey=function(e$D,e$m,e$Y,e$t){return 100*(100*(100*(100*e$D+e$m)+e$Y)+e$t)},e$f._getBezierPoints=function(e$D,e$m,e$Y,e$t,e$y){return e$f._bezierPointsCache[e$y]?e$f._bezierPointsCache[e$y]:(e$l=[0,0,e$D,e$m,e$Y,e$t,1,1],e$E=(new e$B).getBezierPoints(e$l,100,3),e$f._bezierPointsCache[e$y]=e$E);var e$l,e$E},e$f._bezierResultCache={},e$f._bezierPointsCache={},e$f}(),e$J=function(e$D){function e$m(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,e$m.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}e$t(e$m,"laya.ani.AnimationPlayer",e$y);var e$Y=e$m.prototype;return e$TD.imps(e$Y,{"laya.resource.IDestroy":!0}),e$Y._onTempletLoadedComputeFullKeyframeIndices=function(e$D,e$m,e$Y){this._templet===e$Y&&this._cachePlayRate===e$D&&this._cacheFrameRate===e$m&&this._computeFullKeyframeIndices()},e$Y._computeFullKeyframeIndices=function(){for(var e$D=this._fullFrames=[],e$m=this._templet,e$Y=this._cacheFrameRateInterval*this._cachePlayRate,e$t=0,e$y=e$m.getAnimationCount();e$t<e$y;e$t++){for(var e$l=[],e$E=0,e$B=e$m.getAnimation(e$t).nodes.length;e$E<e$B;e$E++){for(var e$o=e$m.getAnimation(e$t).nodes[e$E],e$r=Math.floor(e$o.playTime/e$Y+.01),e$f=new Uint16Array(e$r+1),e$_=-1,e$i=0,e$R=e$o.keyFrame.length;e$i<e$R;e$i++){var e$G=e$o.keyFrame[e$i],e$I=e$G.startTime,e$w=e$I+e$G.duration+e$Y;do{for(var e$W=Math.floor(e$I/e$Y+.5),e$U=e$_+1;e$U<e$W;e$U++)e$f[e$U]=e$i;e$f[e$_=e$W]=e$i,e$I+=e$Y}while(e$I<=e$w)}e$l.push(e$f)}e$D.push(e$l)}},e$Y._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},e$Y._calculatePlayDuration=function(){if(0!==this.state){var e$D=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=e$D),this._playEnd>e$D&&(this._playEnd=e$D),this._playDuration=this._playEnd-this._playStart}},e$Y._setPlayParams=function(e$D,e$m){this._currentTime=e$D,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e$m+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e$m},e$Y._setPlayParamsWhenStop=function(e$D,e$m){this._currentTime=e$D,this._currentKeyframeIndex=Math.max(Math.floor(e$D/e$m+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e$m,this._currentAnimationClipIndex=-1},e$Y._update=function(e$D){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var e$m=this._cacheFrameRateInterval*this._cachePlayRate,e$Y=0;this._startUpdateLoopCount!==e$G.loopCount&&(e$Y=e$D*this.playbackRate,this._elapsedPlaybackTime+=e$Y);var e$t=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=e$t)return this._setPlayParamsWhenStop(e$t,e$m),void this.event("stopped");if(e$Y+=this._currentTime,0<e$t)if(e$t<=e$Y)do{if(e$Y-=e$t,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(e$t,e$m),this._stopWhenCircleFinish=!1,void this.event("stopped");e$Y<e$t&&(this._setPlayParams(e$Y,e$m),this.event("complete"))}while(e$t<=e$Y);else this._setPlayParams(e$Y,e$m);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(e$t,e$m),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},e$Y._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},e$Y.play=function(e$D,e$m,e$Y,e$t,e$y){if(void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=1),void 0===e$Y&&(e$Y=2147483647),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(e$Y<0||e$t<0||e$y<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==e$y&&e$y<e$t)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e$m,this._overallDuration=e$Y,this._playStart=e$t,this._playEnd=e$y,this._paused=!1,this._currentAnimationClipIndex=e$D,this._currentKeyframeIndex=0,this._startUpdateLoopCount=e$G.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},e$Y.playByFrame=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$D&&(e$D=0),void 0===e$m&&(e$m=1),void 0===e$Y&&(e$Y=2147483647),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=30);var e$E=1e3/e$l;this.play(e$D,e$m,e$Y,e$t*e$E,e$y*e$E)},e$Y.stop=function(e$D){void 0===e$D&&(e$D=!0),e$D?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},e$l(0,e$Y,"playEnd",function(){return this._playEnd}),e$l(0,e$Y,"templet",function(){return this._templet},function(e$D){0===!this.state&&this.stop(!0),this._templet!==e$D&&((this._templet=e$D).loaded?this._computeFullKeyframeIndices():e$D.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),e$l(0,e$Y,"playStart",function(){return this._playStart}),e$l(0,e$Y,"playDuration",function(){return this._playDuration}),e$l(0,e$Y,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),e$l(0,e$Y,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),e$l(0,e$Y,"overallDuration",function(){return this._overallDuration}),e$l(0,e$Y,"currentFrameTime",function(){return this._currentFrameTime}),e$l(0,e$Y,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),e$l(0,e$Y,"currentPlayTime",function(){return this._currentTime+this._playStart}),e$l(0,e$Y,"cachePlayRate",function(){return this._cachePlayRate},function(e$D){this._cachePlayRate!==e$D&&(this._cachePlayRate=e$D,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[e$D,this._cacheFrameRate])))}),e$l(0,e$Y,"cacheFrameRate",function(){return this._cacheFrameRate},function(e$D){this._cacheFrameRate!==e$D&&(this._cacheFrameRate=e$D,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,e$D])))}),e$l(0,e$Y,"currentTime",null,function(e$D){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(e$D<this._playStart||e$D>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=e$G.loopCount;var e$m=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=e$D,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e$m),0),this._currentFrameTime=this._currentKeyframeIndex*e$m}}),e$l(0,e$Y,"paused",function(){return this._paused},function(e$D){(this._paused=e$D)&&this.event("paused")}),e$l(0,e$Y,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),e$l(0,e$Y,"destroyed",function(){return this._destroyed}),e$m}(),e$C=function(e$D){function e$m(){e$m.__super.call(this),e$w.isConchNode&&(this.drawSkin=function(e$D){e$D.transform||(e$D.transform=e$CD.EMPTY),this._addCmd([e$D]),this.setSkinMesh&&this.setSkinMesh(e$D._ps,e$D.mVBData,e$D.mEleNum,0,e$D.mTexture,e$D.transform)})}return e$t(e$m,"laya.ani.GraphicsAni",e$E),e$m.prototype.drawSkin=function(e$D){var e$m=[e$D];this._saveToCmd(e$w._context._drawSkin,e$m)},e$m.create=function(){return e$m._caches.pop()||new e$m},e$m.recycle=function(e$D){e$D.clear(),e$m._caches.push(e$D)},e$m._caches=[],e$m}(),e$O=function(e$D){function e$U(){this._aniMap={},this.unfixedLastAniIndex=-1,e$U.__super.call(this),this._anis=new Array}e$t(e$U,"laya.ani.AnimationTemplet",e$f);var e$m=e$U.prototype;return e$m.parse=function(e$D){var e$m=new e$ND(e$D);this._aniVersion=e$m.readUTFString(),e$e.parse(this,e$m)},e$m._calculateKeyFrame=function(e$D,e$m,e$Y){var e$t=e$D.keyFrame;e$t[e$m]=e$t[0];for(var e$y=0;e$y<e$m;e$y++){var e$l=e$t[e$y];e$l.nextData=0===e$l.duration?e$l.data:e$t[e$y+1].data}e$t.length--},e$m.onAsynLoaded=function(e$D,e$m,e$Y){var e$t=new e$ND(e$m);switch(this._aniVersion=e$t.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":e$v.parse(this,e$t);break;default:e$e.parse(this,e$t)}this._endLoaded()},e$m.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},e$m.getAnimationCount=function(){return this._anis.length},e$m.getAnimation=function(e$D){return this._anis[e$D]},e$m.getAniDuration=function(e$D){return this._anis[e$D].playTime},e$m.getNodes=function(e$D){return this._anis[e$D].nodes},e$m.getNodeIndexWithName=function(e$D,e$m){return this._anis[e$D].bone3DMap[e$m]},e$m.getNodeCount=function(e$D){return this._anis[e$D].nodes.length},e$m.getTotalkeyframesLength=function(e$D){return this._anis[e$D].totalKeyframeDatasLength},e$m.getPublicExtData=function(){return this._publicExtData},e$m.getAnimationDataWithCache=function(e$D,e$m,e$Y,e$t){var e$y=e$m[e$Y];if(e$y){var e$l=e$y[e$D];return e$l?e$l[e$t]:null}return null},e$m.setAnimationDataWithCache=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$m[e$Y]||(e$m[e$Y]={});(e$l[e$D]||(e$l[e$D]=[]))[e$t]=e$y},e$m.getOriginalData=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=this._anis[e$D].nodes,e$E=0,e$B=0,e$o=e$l.length,e$r=0;e$B<e$o;e$B++){var e$f,e$_=e$l[e$B];e$f=e$_.keyFrame[e$Y[e$B][e$t]],e$_.dataOffset=e$r;var e$i=e$y-e$f.startTime,e$R=e$_.lerpType;if(e$R)switch(e$R){case 0:case 1:for(e$E=0;e$E<e$_.keyframeWidth;)e$E+=e$_.interpolationMethod[e$E](e$_,e$E,e$m,e$r+e$E,e$f.data,e$i,null,e$f.duration,e$f.nextData);break;case 2:var e$G=e$f.interpolationData,e$I=e$G.length,e$w=0;for(e$E=0;e$E<e$I;){var e$W=e$G[e$E];switch(e$W){case 6:case 7:e$E+=e$U.interpolation[e$W](e$_,e$w,e$m,e$r+e$w,e$f.data,e$i,null,e$f.duration,e$f.nextData,e$G,e$E+1);break;default:e$E+=e$U.interpolation[e$W](e$_,e$w,e$m,e$r+e$w,e$f.data,e$i,null,e$f.duration,e$f.nextData)}e$w++}}else for(e$E=0;e$E<e$_.keyframeWidth;)e$E+=e$_.interpolationMethod[e$E](e$_,e$E,e$m,e$r+e$E,e$f.data,e$i,null,e$f.duration,e$f.nextData);e$r+=e$_.keyframeWidth}},e$m.getNodesCurrentFrameIndex=function(e$D,e$m){var e$Y=this._anis[e$D].nodes;e$D!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(e$Y.length),this.unfixedCurrentTimes=new Float32Array(e$Y.length),this.unfixedLastAniIndex=e$D);for(var e$t=0,e$y=e$Y.length;e$t<e$y;e$t++){var e$l=e$Y[e$t];for(e$m<this.unfixedCurrentTimes[e$t]&&(this.unfixedCurrentFrameIndexes[e$t]=0),this.unfixedCurrentTimes[e$t]=e$m;this.unfixedCurrentFrameIndexes[e$t]<e$l.keyFrame.length&&!(e$l.keyFrame[this.unfixedCurrentFrameIndexes[e$t]].startTime>this.unfixedCurrentTimes[e$t]);)this.unfixedCurrentFrameIndexes[e$t]++;this.unfixedCurrentFrameIndexes[e$t]--}return this.unfixedCurrentFrameIndexes},e$m.getOriginalDataUnfixedRate=function(e$D,e$m,e$Y){var e$t=this._anis[e$D].nodes;e$D!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(e$t.length),this.unfixedCurrentTimes=new Float32Array(e$t.length),this.unfixedKeyframes=e$I(e$t.length),this.unfixedLastAniIndex=e$D);for(var e$y=0,e$l=0,e$E=e$t.length,e$B=0;e$l<e$E;e$l++){var e$o=e$t[e$l];for(e$Y<this.unfixedCurrentTimes[e$l]&&(this.unfixedCurrentFrameIndexes[e$l]=0),this.unfixedCurrentTimes[e$l]=e$Y;this.unfixedCurrentFrameIndexes[e$l]<e$o.keyFrame.length&&!(e$o.keyFrame[this.unfixedCurrentFrameIndexes[e$l]].startTime>this.unfixedCurrentTimes[e$l]);)this.unfixedKeyframes[e$l]=e$o.keyFrame[this.unfixedCurrentFrameIndexes[e$l]],this.unfixedCurrentFrameIndexes[e$l]++;var e$r=this.unfixedKeyframes[e$l];e$o.dataOffset=e$B;var e$f=e$Y-e$r.startTime;if(e$o.lerpType)switch(e$o.lerpType){case 0:case 1:for(e$y=0;e$y<e$o.keyframeWidth;)e$y+=e$o.interpolationMethod[e$y](e$o,e$y,e$m,e$B+e$y,e$r.data,e$f,null,e$r.duration,e$r.nextData);break;case 2:var e$_=e$r.interpolationData,e$i=e$_.length,e$R=0;for(e$y=0;e$y<e$i;){var e$G=e$_[e$y];switch(e$G){case 6:case 7:e$y+=e$U.interpolation[e$G](e$o,e$R,e$m,e$B+e$R,e$r.data,e$f,null,e$r.duration,e$r.nextData,e$_,e$y+1);break;default:e$y+=e$U.interpolation[e$G](e$o,e$R,e$m,e$B+e$R,e$r.data,e$f,null,e$r.duration,e$r.nextData)}e$R++}}else for(e$y=0;e$y<e$o.keyframeWidth;)e$y+=e$o.interpolationMethod[e$y](e$o,e$y,e$m,e$B+e$y,e$r.data,e$f,null,e$r.duration,e$r.nextData);e$B+=e$o.keyframeWidth}},e$U._LinearInterpolation_0=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){var e$f=0===e$B?0:e$l/e$B;return e$Y[e$t]=(1-e$f)*e$y[e$m]+e$f*e$o[e$m],1},e$U._QuaternionInterpolation_1=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){var e$f=0===e$B?0:e$l/e$B;return e$i.slerpQuaternionArray(e$y,e$m,e$o,e$m,e$f,e$Y,e$t),4},e$U._AngleInterpolation_2=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return 0},e$U._RadiansInterpolation_3=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return 0},e$U._Matrix4x4Interpolation_4=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){for(var e$f=0;e$f<16;e$f++,e$m++)e$Y[e$t+e$f]=e$y[e$m]+e$l*e$E[e$m];return 16},e$U._NoInterpolation_5=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){return e$Y[e$t]=e$y[e$m],1},e$U._BezierInterpolation_6=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f){return void 0===e$f&&(e$f=0),e$Y[e$t]=e$y[e$m]+(e$o[e$m]-e$y[e$m])*e$A.getBezierRate(e$l/e$B,e$r[e$f],e$r[e$f+1],e$r[e$f+2],e$r[e$f+3]),5},e$U._BezierInterpolation_7=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f){return void 0===e$f&&(e$f=0),e$Y[e$t]=e$r[e$f+4]+e$r[e$f+5]*e$A.getBezierRate((.001*e$l+e$r[e$f+6])/e$r[e$f+7],e$r[e$f],e$r[e$f+1],e$r[e$f+2],e$r[e$f+3]),9},e$U.load=function(e$D){return e$TD.loader.create(e$D,null,null,e$U)},e$U.interpolation=[e$U._LinearInterpolation_0,e$U._QuaternionInterpolation_1,e$U._AngleInterpolation_2,e$U._RadiansInterpolation_3,e$U._Matrix4x4Interpolation_4,e$U._NoInterpolation_5,e$U._BezierInterpolation_6,e$U._BezierInterpolation_7],e$U}(),e$a=function(e$m){function e$Y(e$D,e$m){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,e$Y.__super.call(this),void 0===e$m&&(e$m=0),e$D&&this.init(e$D,e$m)}e$t(e$Y,"laya.ani.bone.Skeleton",e$m);var e$D=e$Y.prototype;return e$D.init=function(e$D,e$m){void 0===e$m&&(e$m=0);var e$Y,e$t,e$y,e$l=0,e$E=0;if(1==e$m)for(this._graphicsCache=[],e$l=0,e$E=e$D.getAnimationCount();e$l<e$E;e$l++)this._graphicsCache.push([]);if(this._yReverseMatrix=e$D.yReverseMatrix,this._aniMode=e$m,this._templet=e$D,this._player=new e$J,this._player.cacheFrameRate=e$D.rate,this._player.templet=e$D,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=e$D.mBoneArr,this._rootBone=e$D.mRootBone,this._aniSectionDic=e$D.aniSectionDic,0<e$D.ikArr.length)for(this._ikArr=[],e$l=0,e$E=e$D.ikArr.length;e$l<e$E;e$l++)this._ikArr.push(new e$U(e$D.ikArr[e$l],this._boneList));if(0<e$D.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),e$l=0,e$E=e$D.pathArr.length;e$l<e$E;e$l++)e$Y=e$D.pathArr[e$l],e$t=new e$c(e$Y,this._boneList),(e$y=this._boneSlotDic[e$Y.name])&&((e$t=new e$c(e$Y,this._boneList)).target=e$y),this._pathDic[e$Y.name]=e$t;if(0<e$D.tfArr.length)for(this._tfArr=[],e$l=0,e$E=e$D.tfArr.length;e$l<e$E;e$l++)this._tfArr.push(new e$S(e$D.tfArr[e$l],this._boneList));if(0<e$D.skinDataArray.length){var e$B=this._templet.skinDataArray[this._skinIndex];this._skinName=e$B.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},e$D.load=function(e$D,e$m,e$Y){},e$D._onLoaded=function(){},e$D._parseComplete=function(){var e$D=e$p.TEMPLET_DICTIONARY[this._aniPath];e$D&&(this.init(e$D,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},e$D._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},e$D._onPlay=function(){this.event("played")},e$D._onStop=function(){var e$D,e$m=this._templet.eventAniArr[this._aniClipIndex];if(e$m&&this._eventIndex<e$m.length)for(;this._eventIndex<e$m.length;this._eventIndex++)(e$D=e$m[this._eventIndex]).time>=this._player.playStart&&e$D.time<=this._player.playEnd&&this.event("label",e$D);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},e$D._onPause=function(){this.event("paused")},e$D._parseSrcBoneMatrix=function(){var e$D=0,e$m=0;for(e$m=this._templet.srcBoneMatrixArr.length,e$D=0;e$D<e$m;e$D++)this._boneMatrixArray.push(new e$CD);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var e$Y,e$t,e$y=this._templet.boneSlotArray;for(e$D=0,e$m=e$y.length;e$D<e$m;e$D++)e$Y=e$y[e$D],null==(e$t=this._bindBoneBoneSlotDic[e$Y.parent])&&(this._bindBoneBoneSlotDic[e$Y.parent]=e$t=[]),this._boneSlotDic[e$Y.name]=e$Y=e$Y.copy(),e$t.push(e$Y),this._boneSlotArray.push(e$Y)}},e$D._emitMissedEvents=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=0);var e$t=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(e$t){var e$y,e$l,e$E=0;for(e$y=e$t.length,e$E=e$Y;e$E<e$y;e$E++)(e$l=e$t[e$E]).time>=this._player.playStart&&e$l.time<=this._player.playEnd&&this.event("label",e$l)}},e$D._update=function(e$D){if(void 0===e$D&&(e$D=!0),!(this._pause||e$D&&this._indexControl)){var e$m=this.timer.currTimer,e$Y=this._player.currentKeyframeIndex,e$t=e$m-this._lastTime;if(e$D?this._player._update(e$t):e$Y=-1,this._lastTime=e$m,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<e$t&&this._clipIndex==e$Y&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var e$y;this._lastUpdateAniClipIndex=this._aniClipIndex,e$Y>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var e$l,e$E=this._templet.eventAniArr[this._aniClipIndex];if(e$E&&this._eventIndex<e$E.length&&((e$y=e$E[this._eventIndex]).time>=this._player.playStart&&e$y.time<=this._player.playEnd?this._player.currentPlayTime>=e$y.time&&(this.event("label",e$y),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(e$l=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=e$l&&(this.graphics=e$l));var e$B=0,e$o=0;for(e$o=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,e$o-1)&&0<e$o;)e$o--;if(e$o<this._clipIndex)for(e$B=e$o;e$B<this._clipIndex;e$B++)this._createGraphics(e$B)}else if(1==this._aniMode){if(e$l=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=e$l&&(this.graphics=e$l));for(e$o=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,e$o-1)&&0<e$o;)e$o--;if(e$o<this._clipIndex)for(e$B=e$o;e$B<this._clipIndex;e$B++)this._createGraphics(e$B)}this._createGraphics()}}},e$D._createGraphics=function(e$D){void 0===e$D&&(e$D=-1),-1==e$D&&(e$D=this._clipIndex);var e$m,e$Y,e$t=e$D*this._player.cacheFrameRateInterval,e$y=this._templet.drawOrderAniArr[this._aniClipIndex];if(e$y&&0<e$y.length)for(this._drawOrderIndex=0,e$m=e$y[this._drawOrderIndex];e$t>=e$m.time&&(this._drawOrder=e$m.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=e$y.length));)e$m=e$y[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=e$C.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=e$C.create(),e$Y=this.graphics;var e$l=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],e$D,e$t);var e$E,e$B,e$o,e$r,e$f=this._aniSectionDic[this._aniClipIndex],e$_=0,e$i=0,e$R=0,e$G=0,e$I=0,e$w=this._templet.srcBoneMatrixArr.length;for(e$I=e$f[e$i=0];e$i<e$w;e$i++)e$r=this._boneList[e$i],e$o=this._templet.srcBoneMatrixArr[e$i],e$r.resultTransform.scX=e$o.scX*this._curOriginalData[e$_++],e$r.resultTransform.skX=e$o.skX+this._curOriginalData[e$_++],e$r.resultTransform.skY=e$o.skY+this._curOriginalData[e$_++],e$r.resultTransform.scY=e$o.scY*this._curOriginalData[e$_++],e$r.resultTransform.x=e$o.x+this._curOriginalData[e$_++],e$r.resultTransform.y=e$o.y+this._curOriginalData[e$_++],8===this._templet.tMatrixDataLen&&(e$r.resultTransform.skewX=e$o.skewX+this._curOriginalData[e$_++],e$r.resultTransform.skewY=e$o.skewY+this._curOriginalData[e$_++]);var e$W,e$U={},e$e={};for(e$I+=e$f[1];e$i<e$I;e$i++)e$U[(e$W=e$l[e$i]).name]=this._curOriginalData[e$_++],e$e[e$W.name]=this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++];var e$v,e$c,e$S={},e$z={};for(e$I+=e$f[2];e$i<e$I;e$i++)e$S[(e$W=e$l[e$i]).name]=this._curOriginalData[e$_++],e$z[e$W.name]=this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++],this._curOriginalData[e$_++];if(this._pathDic)for(e$I+=e$f[3];e$i<e$I;e$i++){if(e$W=e$l[e$i],e$v=this._pathDic[e$W.name])switch(new e$ND(e$W.extenData).getByte()){case 1:e$v.position=this._curOriginalData[e$_++];break;case 2:e$v.spacing=this._curOriginalData[e$_++];break;case 3:e$v.rotateMix=this._curOriginalData[e$_++],e$v.translateMix=this._curOriginalData[e$_++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(e$CD.TEMP.identity()),this._ikArr)for(e$i=0,e$I=this._ikArr.length;e$i<e$I;e$i++)e$c=this._ikArr[e$i],e$S.hasOwnProperty(e$c.name)&&(e$c.bendDirection=e$S[e$c.name]),e$z.hasOwnProperty(e$c.name)&&(e$c.mix=e$z[e$c.name]),e$c.apply();if(this._pathDic)for(var e$A in this._pathDic)(e$v=this._pathDic[e$A]).apply(this._boneList,e$Y);if(this._tfArr)for(e$i=0,e$G=this._tfArr.length;e$i<e$G;e$i++)this._tfArr[e$i].apply();for(e$i=0,e$G=this._boneList.length;e$i<e$G;e$i++)if(e$r=this._boneList[e$i],e$B=this._bindBoneBoneSlotDic[e$r.name],e$r.resultMatrix.copyTo(this._boneMatrixArray[e$i]),e$B)for(e$R=0,e$I=e$B.length;e$R<e$I;e$R++)(e$E=e$B[e$R])&&e$E.setParentMatrix(e$r.resultMatrix);var e$J,e$a,e$p,e$F,e$s={},e$Q=this._templet.deformAniArr;if(e$Q&&0<e$Q.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,e$i=0,e$I=this._boneSlotArray.length;e$i<e$I;e$i++)(e$E=this._boneSlotArray[e$i]).deformData=null;var e$T,e$N=e$Q[this._aniClipIndex];for(e$T in e$J=e$N.default,this._setDeform(e$J,e$s,this._boneSlotArray,e$t),e$N)"default"!=e$T&&e$T!=this._skinName&&(e$J=e$N[e$T],this._setDeform(e$J,e$s,this._boneSlotArray,e$t));e$J=e$N[this._skinName],this._setDeform(e$J,e$s,this._boneSlotArray,e$t)}if(this._drawOrder)for(e$i=0,e$I=this._drawOrder.length;e$i<e$I;e$i++)e$a=e$U[(e$E=this._boneSlotArray[this._drawOrder[e$i]]).name],e$p=e$e[e$E.name],isNaN(e$p)||(e$Y.save(),e$Y.alpha(e$p)),isNaN(e$a)||-2==e$a||(this._templet.attachmentNames?e$E.showDisplayByName(this._templet.attachmentNames[e$a]):e$E.showDisplayByIndex(e$a)),e$s[this._drawOrder[e$i]]?(e$F=e$s[this._drawOrder[e$i]],e$E.currDisplayData&&e$F[e$E.currDisplayData.attachmentName]?e$E.deformData=e$F[e$E.currDisplayData.attachmentName]:e$E.deformData=null):e$E.deformData=null,isNaN(e$p)?e$E.draw(e$Y,this._boneMatrixArray,2==this._aniMode):e$E.draw(e$Y,this._boneMatrixArray,2==this._aniMode,e$p),isNaN(e$p)||e$Y.restore();else for(e$i=0,e$I=this._boneSlotArray.length;e$i<e$I;e$i++)e$a=e$U[(e$E=this._boneSlotArray[e$i]).name],e$p=e$e[e$E.name],isNaN(e$p)||(e$Y.save(),e$Y.alpha(e$p)),isNaN(e$a)||-2==e$a||(this._templet.attachmentNames?e$E.showDisplayByName(this._templet.attachmentNames[e$a]):e$E.showDisplayByIndex(e$a)),e$s[e$i]?(e$F=e$s[e$i],e$E.currDisplayData&&e$F[e$E.currDisplayData.attachmentName]?e$E.deformData=e$F[e$E.currDisplayData.attachmentName]:e$E.deformData=null):e$E.deformData=null,isNaN(e$p)?e$E.draw(e$Y,this._boneMatrixArray,2==this._aniMode):e$E.draw(e$Y,this._boneMatrixArray,2==this._aniMode,e$p),isNaN(e$p)||e$Y.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,e$D,e$Y):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,e$D,e$Y)},e$D._setDeform=function(e$D,e$m,e$Y,e$t){if(e$D){var e$y,e$l,e$E,e$B=0,e$o=0,e$r=0;if(e$D)for(e$B=0,e$o=e$D.deformSlotDataList.length;e$B<e$o;e$B++)for(e$y=e$D.deformSlotDataList[e$B],e$r=0;e$r<e$y.deformSlotDisplayList.length;e$r++)e$E=e$Y[(e$l=e$y.deformSlotDisplayList[e$r]).slotIndex],e$l.apply(e$t,e$E),e$m[e$l.slotIndex]||(e$m[e$l.slotIndex]={}),e$m[e$l.slotIndex][e$l.attachment]=e$l.deformData}},e$D.getAnimNum=function(){return this._templet.getAnimationCount()},e$D.getAniNameByIndex=function(e$D){return this._templet.getAniNameByIndex(e$D)},e$D.getSlotByName=function(e$D){return this._boneSlotDic[e$D]},e$D.showSkinByName=function(e$D,e$m){void 0===e$m&&(e$m=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(e$D),e$m)},e$D.showSkinByIndex=function(e$D,e$m){void 0===e$m&&(e$m=!0);for(var e$Y=0;e$Y<this._boneSlotArray.length;e$Y++)this._boneSlotArray[e$Y].showSlotData(null,e$m);if(this._templet.showSkinByIndex(this._boneSlotDic,e$D,e$m)){var e$t=this._templet.skinDataArray[e$D];this._skinIndex=e$D,this._skinName=e$t.name}this._clearCache()},e$D.showSlotSkinByIndex=function(e$D,e$m){if(0!=this._aniMode){var e$Y=this.getSlotByName(e$D);e$Y&&e$Y.showDisplayByIndex(e$m),this._clearCache()}},e$D.showSlotSkinByName=function(e$D,e$m){if(0!=this._aniMode){var e$Y=this.getSlotByName(e$D);e$Y&&e$Y.showDisplayByName(e$m),this._clearCache()}},e$D.replaceSlotSkinName=function(e$D,e$m,e$Y){if(0!=this._aniMode){var e$t=this.getSlotByName(e$D);e$t&&e$t.replaceDisplayByName(e$m,e$Y),this._clearCache()}},e$D.replaceSlotSkinByIndex=function(e$D,e$m,e$Y){if(0!=this._aniMode){var e$t=this.getSlotByName(e$D);e$t&&e$t.replaceDisplayByIndex(e$m,e$Y),this._clearCache()}},e$D.setSlotSkin=function(e$D,e$m){if(0!=this._aniMode){var e$Y=this.getSlotByName(e$D);e$Y&&e$Y.replaceSkin(e$m),this._clearCache()}},e$D._clearCache=function(){if(1==this._aniMode)for(var e$D=0,e$m=this._graphicsCache.length;e$D<e$m;e$D++){for(var e$Y=0,e$t=this._graphicsCache[e$D].length;e$Y<e$t;e$Y++){var e$y=this._graphicsCache[e$D][e$Y];e$y!=this.graphics&&e$C.recycle(e$y)}this._graphicsCache[e$D].length=0}},e$D.play=function(e$D,e$m,e$Y,e$t,e$y,e$l){void 0===e$Y&&(e$Y=!0),void 0===e$t&&(e$t=0),void 0===e$y&&(e$y=0),void 0===e$l&&(e$l=!0),this._indexControl=!1;var e$E=-1,e$B=NaN;if(e$B=e$m?2147483647:0,"string"==typeof e$D)for(var e$o=0,e$r=this._templet.getAnimationCount();e$o<e$r;e$o++){var e$f=this._templet.getAnimation(e$o);if(e$f&&e$D==e$f.name){e$E=e$o;break}}else e$E=e$D;-1<e$E&&e$E<this.getAnimNum()&&(this._aniClipIndex=e$E,(e$Y||this._pause||this._currAniIndex!=e$E)&&(this._currAniIndex=e$E,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(e$E)),this._drawOrder=null,this._eventIndex=0,this._player.play(e$E,this._player.playbackRate,e$B,e$t,e$y),e$l&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=e$_.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},e$D.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},e$D.playbackRate=function(e$D){this._player&&(this._player.playbackRate=e$D)},e$D.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},e$D.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=e$_.now(),this.timer.frameLoop(1,this,this._update,null,!0))},e$D._getGrahicsDataWithCache=function(e$D,e$m){return this._graphicsCache[e$D][e$m]},e$D._setGrahicsDataWithCache=function(e$D,e$m,e$Y){this._graphicsCache[e$D][e$m]=e$Y},e$D.destroy=function(e$D){void 0===e$D&&(e$D=!0),e$m.prototype.destroy.call(this,e$D),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},e$l(0,e$D,"url",function(){return this._aniPath},function(e$D){this.load(e$D)}),e$l(0,e$D,"index",function(){return this._index},function(e$D){this.player&&(this._index=e$D,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),e$l(0,e$D,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),e$l(0,e$D,"templet",function(){return this._templet}),e$l(0,e$D,"player",function(){return this._player}),e$Y.useSimpleMeshInCanvas=!1,e$Y}(e$yD),e$p=function(e$m){function e$y(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,e$y.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}e$t(e$y,"laya.ani.bone.Templet",e$m);var e$D=e$y.prototype;return e$D.getLoadList=function(){return this._loadList},e$D.loadAni=function(e$D){this._skBufferUrl=e$D,e$TD.loader.load(e$D,e$o.create(this,this.onComplete),null,"arraybuffer")},e$D.onComplete=function(e$D){if(this._isDestroyed)this.destroy();else{var e$m=e$r.getRes(this._skBufferUrl);e$m?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,e$m)):this.event("error","load failed:"+this._skBufferUrl)}},e$D.parseData=function(e$D,e$m,e$Y){void 0===e$Y&&(e$Y=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=e$D,this._mainTexture&&e$w.isWebGL&&e$D.bitmap&&(e$D.bitmap.enableMerageInAtlas=!1),this._rate=e$Y,this.parse(e$m)},e$D.buildArmature=function(e$D){return void 0===e$D&&(e$D=0),new e$a(this,e$D)},e$D.parse=function(e$D){e$m.prototype.parse.call(this,e$D),this._endLoaded(),this._aniVersion!=e$y.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+e$y.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},e$D._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var e$D=0;this._loadList=[];var e$m,e$Y=new e$ND(this.getPublicExtData()),e$t=0,e$y=0,e$l=0,e$E=e$Y.getInt32(),e$B=e$Y.readUTFString(),e$o=e$B.split("\n");for(e$D=0;e$D<e$E;e$D++)e$m=this._path+e$o[2*e$D],e$B=e$o[2*e$D+1],e$Y.getFloat32(),e$Y.getFloat32(),e$t=e$Y.getFloat32(),e$y=e$Y.getFloat32(),e$l=e$Y.getFloat32(),isNaN(e$l)?0:e$l,e$l=e$Y.getFloat32(),isNaN(e$l)?0:e$l,e$l=e$Y.getFloat32(),isNaN(e$l)?e$t:e$l,e$l=e$Y.getFloat32(),isNaN(e$l)?e$y:e$l,-1==this._loadList.indexOf(e$m)&&this._loadList.push(e$m);this.event("inited",this)}},e$D._textureComplete=function(){for(var e$D,e$m,e$Y=0,e$t=this._loadList.length;e$Y<e$t;e$Y++)e$m=this._loadList[e$Y],e$D=this._textureDic[e$m]=e$r.getRes(e$m),e$w.isWebGL&&e$D&&e$D.bitmap&&(e$D.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},e$D._parsePublicExtData=function(){var e$D=0,e$m=0,e$Y=0,e$t=0,e$y=0;for(e$D=0,e$y=this.getAnimationCount();e$D<e$y;e$D++)this._graphicsCache.push([]);var e$l;e$l="Dragon"!=this._aniClassName;var e$E,e$B,e$o=new e$ND(this.getPublicExtData()),e$r=0,e$f=0,e$_=0,e$i=0,e$R=0,e$G=0,e$I=0,e$w=0,e$W=0,e$U=e$o.getInt32(),e$e=e$o.readUTFString(),e$v=e$e.split("\n");for(e$D=0;e$D<e$U;e$D++){if(e$E=this._mainTexture,e$B=this._path+e$v[2*e$D],e$e=e$v[2*e$D+1],null==this._mainTexture&&(e$E=this._textureDic[e$B]),!e$E)return this.event("error",this),void(this.isParseFail=!0);e$r=e$o.getFloat32(),e$f=e$o.getFloat32(),e$_=e$o.getFloat32(),e$i=e$o.getFloat32(),e$W=e$o.getFloat32(),e$R=isNaN(e$W)?0:e$W,e$W=e$o.getFloat32(),e$G=isNaN(e$W)?0:e$W,e$W=e$o.getFloat32(),e$I=isNaN(e$W)?e$_:e$W,e$W=e$o.getFloat32(),e$w=isNaN(e$W)?e$i:e$W;var e$c=e$OD.create(e$E,e$r,e$f,e$_,e$i,-e$R,-e$G,e$I,e$w);if(!e$c){var e$S=e$v[2*e$D];e$TD.recordError("Texture.create失败","tTextureNameRealName："+e$S)}this.subTextureDic[e$e]=e$c,e$E.alphaTexture&&(this.subTextureDic[e$e].alphaTexture=e$OD.create(e$E.alphaTexture,e$r,e$f,e$_,e$i,-e$R,-e$G,e$I,e$w))}this._mainTexture=e$E;var e$z,e$A,e$J,e$a,e$p,e$F=e$o.getUint16();for(e$D=0;e$D<e$F;e$D++)(e$z=[]).push(e$o.getUint16()),e$z.push(e$o.getUint16()),e$z.push(e$o.getUint16()),e$z.push(e$o.getUint16()),this.aniSectionDic[e$D]=e$z;var e$s,e$Q=e$o.getInt16(),e$T={};for(e$D=0;e$D<e$Q;e$D++)e$A=new e$hD,0==e$D?e$s=e$A:e$A.root=e$s,e$A.d=e$l?-1:1,e$a=e$o.readUTFString(),e$p=e$o.readUTFString(),e$A.length=e$o.getFloat32(),1==e$o.getByte()&&(e$A.inheritRotation=!1),1==e$o.getByte()&&(e$A.inheritScale=!1),e$A.name=e$a,e$p&&((e$J=e$T[e$p])?e$J.addChild(e$A):this.mRootBone=e$A),e$T[e$a]=e$A,this.mBoneArr.push(e$A);this.tMatrixDataLen=e$o.getUint16();var e$N,e$C,e$O=e$o.getUint16(),e$h=Math.floor(e$O/this.tMatrixDataLen),e$X=this.srcBoneMatrixArr;for(e$D=0;e$D<e$h;e$D++)(e$N=new e$xD).scX=e$o.getFloat32(),e$N.skX=e$o.getFloat32(),e$N.skY=e$o.getFloat32(),e$N.scY=e$o.getFloat32(),e$N.x=e$o.getFloat32(),e$N.y=e$o.getFloat32(),8===this.tMatrixDataLen&&(e$N.skewX=e$o.getFloat32(),e$N.skewY=e$o.getFloat32()),e$X.push(e$N),(e$A=this.mBoneArr[e$D]).transform=e$N;var e$P,e$u=e$o.getUint16(),e$L=0;for(e$D=0;e$D<e$u;e$D++){for(e$C=new e$dD,e$L=e$o.getUint16(),e$m=0;e$m<e$L;e$m++)e$C.boneNames.push(e$o.readUTFString()),e$C.boneIndexs.push(e$o.getInt16());e$C.name=e$o.readUTFString(),e$C.targetBoneName=e$o.readUTFString(),e$C.targetBoneIndex=e$o.getInt16(),e$C.bendDirection=e$o.getFloat32(),e$C.mix=e$o.getFloat32(),e$C.isSpine=e$l,this.ikArr.push(e$C)}var e$q,e$$=e$o.getUint16(),e$d=0;for(e$D=0;e$D<e$$;e$D++){for(e$P=new e$HD,e$d=e$o.getUint16(),e$m=0;e$m<e$d;e$m++)e$P.boneIndexs.push(e$o.getInt16());e$P.name=e$o.getUTFString(),e$P.targetIndex=e$o.getInt16(),e$P.rotateMix=e$o.getFloat32(),e$P.translateMix=e$o.getFloat32(),e$P.scaleMix=e$o.getFloat32(),e$P.shearMix=e$o.getFloat32(),e$P.offsetRotation=e$o.getFloat32(),e$P.offsetX=e$o.getFloat32(),e$P.offsetY=e$o.getFloat32(),e$P.offsetScaleX=e$o.getFloat32(),e$P.offsetScaleY=e$o.getFloat32(),e$P.offsetShearY=e$o.getFloat32(),this.tfArr.push(e$P)}var e$k=e$o.getUint16(),e$M=0;for(e$D=0;e$D<e$k;e$D++){for((e$q=new e$kD).name=e$o.readUTFString(),e$M=e$o.getUint16(),e$m=0;e$m<e$M;e$m++)e$q.bones.push(e$o.getInt16());e$q.target=e$o.readUTFString(),e$q.positionMode=e$o.readUTFString(),e$q.spacingMode=e$o.readUTFString(),e$q.rotateMode=e$o.readUTFString(),e$q.offsetRotation=e$o.getFloat32(),e$q.position=e$o.getFloat32(),e$q.spacing=e$o.getFloat32(),e$q.rotateMix=e$o.getFloat32(),e$q.translateMix=e$o.getFloat32(),this.pathArr.push(e$q)}var e$n,e$g,e$H,e$x,e$V,e$Z=0,e$b=0,e$j=0,e$K=NaN,e$DD=0,e$mD=e$o.getInt16();for(e$D=0;e$D<e$mD;e$D++){var e$YD=e$o.getUint8(),e$tD={};this.deformAniArr.push(e$tD);for(var e$yD=0;e$yD<e$YD;e$yD++)for((e$n=new e$PD).skinName=e$o.getUTFString(),e$tD[e$n.skinName]=e$n,e$Z=e$o.getInt16(),e$m=0;e$m<e$Z;e$m++)for(e$g=new e$uD,e$n.deformSlotDataList.push(e$g),e$b=e$o.getInt16(),e$Y=0;e$Y<e$b;e$Y++)for(e$H=new e$LD,e$g.deformSlotDisplayList.push(e$H),e$H.slotIndex=e$o.getInt16(),e$H.attachment=e$o.getUTFString(),e$j=e$o.getInt16(),e$t=0;e$t<e$j;e$t++)for(1==e$o.getByte()?e$H.tweenKeyList.push(!0):e$H.tweenKeyList.push(!1),e$K=e$o.getFloat32(),e$H.timeList.push(e$K),e$x=[],e$H.vectices.push(e$x),e$DD=e$o.getInt16(),e$y=0;e$y<e$DD;e$y++)e$x.push(e$o.getFloat32())}var e$lD,e$ED,e$BD=e$o.getInt16(),e$oD=0,e$rD=0;for(e$D=0;e$D<e$BD;e$D++){for(e$oD=e$o.getInt16(),e$V=[],e$m=0;e$m<e$oD;e$m++){for((e$lD=new e$qD).time=e$o.getFloat32(),e$rD=e$o.getInt16(),e$Y=0;e$Y<e$rD;e$Y++)e$lD.drawOrder.push(e$o.getInt16());e$V.push(e$lD)}this.drawOrderAniArr.push(e$V)}var e$fD,e$_D=e$o.getInt16(),e$iD=0;for(e$D=0;e$D<e$_D;e$D++){for(e$iD=e$o.getInt16(),e$ED=[],e$m=0;e$m<e$iD;e$m++)(e$fD=new e$$D).name=e$o.getUTFString(),e$fD.intValue=e$o.getInt32(),e$fD.floatValue=e$o.getFloat32(),e$fD.stringValue=e$o.getUTFString(),e$fD.time=e$o.getFloat32(),e$ED.push(e$fD);this.eventAniArr.push(e$ED)}var e$RD=e$o.getInt16();if(0<e$RD)for(this.attachmentNames=[],e$D=0;e$D<e$RD;e$D++)this.attachmentNames.push(e$o.getUTFString());var e$GD,e$ID,e$wD=e$o.getInt16();for(e$D=0;e$D<e$wD;e$D++)(e$GD=new e$XD).name=e$o.readUTFString(),e$GD.parent=e$o.readUTFString(),e$GD.attachmentName=e$o.readUTFString(),e$GD.srcDisplayIndex=e$GD.displayIndex=e$o.getInt16(),(e$GD.templet=this).boneSlotDic[e$GD.name]=e$GD,null==(e$ID=this.bindBoneBoneSlotDic[e$GD.parent])&&(this.bindBoneBoneSlotDic[e$GD.parent]=e$ID=[]),e$ID.push(e$GD),this.boneSlotArray.push(e$GD);var e$WD,e$UD,e$eD,e$vD=e$o.readUTFString().split("\n"),e$cD=0,e$SD=e$o.getUint8(),e$zD=0,e$AD=0,e$JD=0,e$aD=0,e$pD=0,e$FD=0,e$sD=0;for(e$D=0;e$D<e$SD;e$D++){for((e$WD=new e$MD).name=e$vD[e$cD++],e$zD=e$o.getUint8(),e$m=0;e$m<e$zD;e$m++){for((e$UD=new e$gD).name=e$vD[e$cD++],e$GD=this.boneSlotDic[e$UD.name],e$AD=e$o.getUint8(),e$Y=0;e$Y<e$AD;e$Y++){if(e$eD=new e$nD,this.skinSlotDisplayDataArr.push(e$eD),e$eD.name=e$vD[e$cD++],e$eD.attachmentName=e$vD[e$cD++],e$eD.transform=new e$xD,e$eD.transform.scX=e$o.getFloat32(),e$eD.transform.skX=e$o.getFloat32(),e$eD.transform.skY=e$o.getFloat32(),e$eD.transform.scY=e$o.getFloat32(),e$eD.transform.x=e$o.getFloat32(),e$eD.transform.y=e$o.getFloat32(),e$UD.displayArr.push(e$eD),e$eD.width=e$o.getFloat32(),e$eD.height=e$o.getFloat32(),e$eD.type=e$o.getUint8(),e$eD.verLen=e$o.getUint16(),0<(e$Q=e$o.getUint16()))for(e$eD.bones=[],e$t=0;e$t<e$Q;e$t++){var e$QD=e$o.getUint16();e$eD.bones.push(e$QD)}if(0<(e$JD=e$o.getUint16()))for(e$eD.uvs=[],e$t=0;e$t<e$JD;e$t++)e$eD.uvs.push(e$o.getFloat32());if(0<(e$aD=e$o.getUint16()))for(e$eD.weights=[],e$t=0;e$t<e$aD;e$t++)e$eD.weights.push(e$o.getFloat32());if(0<(e$pD=e$o.getUint16()))for(e$eD.triangles=[],e$t=0;e$t<e$pD;e$t++)e$eD.triangles.push(e$o.getUint16());if(0<(e$FD=e$o.getUint16()))for(e$eD.vertices=[],e$t=0;e$t<e$FD;e$t++)e$eD.vertices.push(e$o.getFloat32());if(0<(e$sD=e$o.getUint16()))for(e$eD.lengths=[],e$t=0;e$t<e$sD;e$t++)e$eD.lengths.push(e$o.getFloat32())}e$WD.slotArr.push(e$UD)}this.skinDic[e$WD.name]=e$WD,this.skinDataArray.push(e$WD)}1==e$o.getUint8()?(this.yReverseMatrix=new e$CD(1,0,0,-1,0,0),e$s&&e$s.setTempMatrix(this.yReverseMatrix)):e$s&&e$s.setTempMatrix(new e$CD),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},e$D.getTexture=function(e$D){var e$m=this.subTextureDic[e$D];return e$m||(e$m=this.subTextureDic[e$D.substr(0,e$D.length-1)]),null==e$m?this._mainTexture:e$m},e$D.showSkinByIndex=function(e$D,e$m,e$Y){if(void 0===e$Y&&(e$Y=!0),e$m<0&&e$m>=this.skinDataArray.length)return!1;var e$t,e$y,e$l=0,e$E=0,e$B=this.skinDataArray[e$m];if(e$B){for(e$l=0,e$E=e$B.slotArr.length;e$l<e$E;e$l++)(e$y=e$B.slotArr[e$l])&&(e$t=e$D[e$y.name])&&(e$t.showSlotData(e$y,e$Y),e$Y&&"undefined"!=e$t.attachmentName&&"null"!=e$t.attachmentName?e$t.showDisplayByName(e$t.attachmentName):e$t.showDisplayByIndex(e$t.displayIndex));return!0}return!1},e$D.getSkinIndexByName=function(e$D){for(var e$m=0,e$Y=this.skinDataArray.length;e$m<e$Y;e$m++)if(this.skinDataArray[e$m].name==e$D)return e$m;return-1},e$D.getGrahicsDataWithCache=function(e$D,e$m){return this._graphicsCache[e$D][e$m]},e$D.setGrahicsDataWithCache=function(e$D,e$m,e$Y){this._graphicsCache[e$D][e$m]=e$Y},e$D.destroy=function(){var e$D;for(var e$m in this._isDestroyed=!0,this.subTextureDic)(e$D=this.subTextureDic[e$m])&&e$D.destroy();for(e$m in this._textureDic)(e$D=this._textureDic[e$m])&&e$D.destroy();for(var e$Y=0,e$t=this.skinSlotDisplayDataArr.length;e$Y<e$t;e$Y++)this.skinSlotDisplayDataArr[e$Y].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete e$y.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},e$D.getAniNameByIndex=function(e$D){var e$m=this.getAnimation(e$D);return e$m?e$m.name:null},e$l(0,e$D,"rate",function(){return this._rate},function(e$D){this._rate=e$D}),e$y.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",e$y.TEMPLET_DICTIONARY=null,e$y}(e$O)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$D,e$m){"use strict";for(var e$Y in Object.defineProperty(e$m,"__esModule",{value:!0}),Laya){var e$t=Laya[e$Y];e$t&&e$t.__isclass&&(e$m[e$Y]=e$t)}}),function(e$D,e$m){"object"==typeof exports&&"object"==typeof module?window?window.Matter=e$m():module.exports=e$m():"function"==typeof define&&define.amd?define("Matter",[],e$m):"object"==typeof exports?exports.Matter=e$m():e$D.Matter=e$m()}(this,function(){return function(e$Y){var e$t={};function e$y(e$D){if(e$t[e$D])return e$t[e$D].exports;var e$m=e$t[e$D]={i:e$D,l:!1,exports:{}};return e$Y[e$D].call(e$m.exports,e$m,e$m.exports,e$y),e$m.l=!0,e$m.exports}return e$y.m=e$Y,e$y.c=e$t,e$y.d=function(e$D,e$m,e$Y){e$y.o(e$D,e$m)||Object.defineProperty(e$D,e$m,{enumerable:!0,get:e$Y})},e$y.r=function(e$D){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e$D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e$D,"__esModule",{value:!0})},e$y.t=function(e$m,e$D){if(1&e$D&&(e$m=e$y(e$m)),8&e$D)return e$m;if(4&e$D&&"object"==typeof e$m&&e$m&&e$m.__esModule)return e$m;var e$Y=Object.create(null);if(e$y.r(e$Y),Object.defineProperty(e$Y,"default",{enumerable:!0,value:e$m}),2&e$D&&"string"!=typeof e$m)for(var e$t in e$m)e$y.d(e$Y,e$t,function(e$D){return e$m[e$D]}.bind(null,e$t));return e$Y},e$y.n=function(e$D){var e$m=e$D&&e$D.__esModule?function(){return e$D.default}:function(){return e$D};return e$y.d(e$m,"a",e$m),e$m},e$y.o=function(e$D,e$m){return Object.prototype.hasOwnProperty.call(e$D,e$m)},e$y.p="",e$y(e$y.s=21)}([function(e$D,e$m){var e$o={};e$D.exports=e$o,function(){e$o._nextId=0,e$o._seed=0,e$o._nowStartTime=+new Date,e$o._warnedOnce={},e$o._decomp=null,e$o.extend=function(e$D,e$m){var e$Y,e$t;e$t="boolean"==typeof e$m?(e$Y=2,e$m):(e$Y=1,!0);for(var e$y=e$Y;e$y<arguments.length;e$y++){var e$l=arguments[e$y];if(e$l)for(var e$E in e$l)e$t&&e$l[e$E]&&e$l[e$E].constructor===Object?e$D[e$E]&&e$D[e$E].constructor!==Object?e$D[e$E]=e$l[e$E]:(e$D[e$E]=e$D[e$E]||{},e$o.extend(e$D[e$E],e$t,e$l[e$E])):e$D[e$E]=e$l[e$E]}return e$D},e$o.clone=function(e$D,e$m){return e$o.extend({},e$m,e$D)},e$o.keys=function(e$D){if(Object.keys)return Object.keys(e$D);var e$m=[];for(var e$Y in e$D)e$m.push(e$Y);return e$m},e$o.values=function(e$D){var e$m=[];if(Object.keys){for(var e$Y=Object.keys(e$D),e$t=0;e$t<e$Y.length;e$t++)e$m.push(e$D[e$Y[e$t]]);return e$m}for(var e$y in e$D)e$m.push(e$D[e$y]);return e$m},e$o.get=function(e$D,e$m,e$Y,e$t){e$m=e$m.split(".").slice(e$Y,e$t);for(var e$y=0;e$y<e$m.length;e$y+=1)e$D=e$D[e$m[e$y]];return e$D},e$o.set=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$m.split(".").slice(e$t,e$y);return e$o.get(e$D,e$m,0,-1)[e$l[e$l.length-1]]=e$Y},e$o.shuffle=function(e$D){for(var e$m=e$D.length-1;0<e$m;e$m--){var e$Y=Math.floor(e$o.random()*(e$m+1)),e$t=e$D[e$m];e$D[e$m]=e$D[e$Y],e$D[e$Y]=e$t}return e$D},e$o.choose=function(e$D){return e$D[Math.floor(e$o.random()*e$D.length)]},e$o.isElement=function(e$D){return"undefined"!=typeof HTMLElement?e$D instanceof HTMLElement:!!(e$D&&e$D.nodeType&&e$D.nodeName)},e$o.isArray=function(e$D){return"[object Array]"===Object.prototype.toString.call(e$D)},e$o.isFunction=function(e$D){return"function"==typeof e$D},e$o.isPlainObject=function(e$D){return"object"==typeof e$D&&e$D.constructor===Object},e$o.isString=function(e$D){return"[object String]"===toString.call(e$D)},e$o.clamp=function(e$D,e$m,e$Y){return e$D<e$m?e$m:e$Y<e$D?e$Y:e$D},e$o.sign=function(e$D){return e$D<0?-1:1},e$o.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-e$o._nowStartTime},e$o.random=function(e$D,e$m){return e$m=void 0!==e$m?e$m:1,(e$D=void 0!==e$D?e$D:0)+e$Y()*(e$m-e$D)};var e$Y=function(){return e$o._seed=(9301*e$o._seed+49297)%233280,e$o._seed/233280};e$o.colorToNumber=function(e$D){return 3==(e$D=e$D.replace("#","")).length&&(e$D=e$D.charAt(0)+e$D.charAt(0)+e$D.charAt(1)+e$D.charAt(1)+e$D.charAt(2)+e$D.charAt(2)),parseInt(e$D,16)},e$o.logLevel=1,e$o.log=function(){console&&0<e$o.logLevel&&e$o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e$o.info=function(){console&&0<e$o.logLevel&&e$o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e$o.warn=function(){console&&0<e$o.logLevel&&e$o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},e$o.warnOnce=function(){var e$D=Array.prototype.slice.call(arguments).join(" ");e$o._warnedOnce[e$D]||(e$o.warn(e$D),e$o._warnedOnce[e$D]=!0)},e$o.deprecated=function(e$D,e$m,e$Y){e$D[e$m]=e$o.chain(function(){e$o.warnOnce("🔅 deprecated 🔅",e$Y)},e$D[e$m])},e$o.nextId=function(){return e$o._nextId++},e$o.indexOf=function(e$D,e$m){if(e$D.indexOf)return e$D.indexOf(e$m);for(var e$Y=0;e$Y<e$D.length;e$Y++)if(e$D[e$Y]===e$m)return e$Y;return-1},e$o.map=function(e$D,e$m){if(e$D.map)return e$D.map(e$m);for(var e$Y=[],e$t=0;e$t<e$D.length;e$t+=1)e$Y.push(e$m(e$D[e$t]));return e$Y},e$o.topologicalSort=function(e$D){var e$m=[],e$Y=[],e$t=[];for(var e$y in e$D)e$Y[e$y]||e$t[e$y]||e$o._topologicalSort(e$y,e$Y,e$t,e$D,e$m);return e$m},e$o._topologicalSort=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$t[e$D]||[];e$Y[e$D]=!0;for(var e$E=0;e$E<e$l.length;e$E+=1){var e$B=e$l[e$E];e$Y[e$B]||(e$m[e$B]||e$o._topologicalSort(e$B,e$m,e$Y,e$t,e$y))}e$Y[e$D]=!1,e$m[e$D]=!0,e$y.push(e$D)},e$o.chain=function(){for(var e$l=[],e$D=0;e$D<arguments.length;e$D+=1){var e$m=arguments[e$D];e$m._chained?e$l.push.apply(e$l,e$m._chained):e$l.push(e$m)}function e$Y(){for(var e$D,e$m=new Array(arguments.length),e$Y=0,e$t=arguments.length;e$Y<e$t;e$Y++)e$m[e$Y]=arguments[e$Y];for(e$Y=0;e$Y<e$l.length;e$Y+=1){var e$y=e$l[e$Y].apply(e$D,e$m);void 0!==e$y&&(e$D=e$y)}return e$D}return e$Y._chained=e$l,e$Y},e$o.chainPathBefore=function(e$D,e$m,e$Y){return e$o.set(e$D,e$m,e$o.chain(e$Y,e$o.get(e$D,e$m)))},e$o.chainPathAfter=function(e$D,e$m,e$Y){return e$o.set(e$D,e$m,e$o.chain(e$o.get(e$D,e$m),e$Y))},e$o.setDecomp=function(e$D){e$o._decomp=e$D},e$o.getDecomp=function(){var e$m=e$o._decomp;try{e$m||"undefined"==typeof window||(e$m=window.decomp),e$m||"undefined"==typeof global||(e$m=global.decomp)}catch(e$D){e$m=null}return e$m}}()},function(e$D,e$m){var e$Y={};(e$D.exports=e$Y).create=function(e$D){var e$m={min:{x:0,y:0},max:{x:0,y:0}};return e$D&&e$Y.update(e$m,e$D),e$m},e$Y.update=function(e$D,e$m,e$Y){e$D.min.x=1/0,e$D.max.x=-1/0,e$D.min.y=1/0,e$D.max.y=-1/0;for(var e$t=0;e$t<e$m.length;e$t++){var e$y=e$m[e$t];e$y.x>e$D.max.x&&(e$D.max.x=e$y.x),e$y.x<e$D.min.x&&(e$D.min.x=e$y.x),e$y.y>e$D.max.y&&(e$D.max.y=e$y.y),e$y.y<e$D.min.y&&(e$D.min.y=e$y.y)}e$Y&&(0<e$Y.x?e$D.max.x+=e$Y.x:e$D.min.x+=e$Y.x,0<e$Y.y?e$D.max.y+=e$Y.y:e$D.min.y+=e$Y.y)},e$Y.contains=function(e$D,e$m){return e$m.x>=e$D.min.x&&e$m.x<=e$D.max.x&&e$m.y>=e$D.min.y&&e$m.y<=e$D.max.y},e$Y.overlaps=function(e$D,e$m){return e$D.min.x<=e$m.max.x&&e$D.max.x>=e$m.min.x&&e$D.max.y>=e$m.min.y&&e$D.min.y<=e$m.max.y},e$Y.translate=function(e$D,e$m){e$D.min.x+=e$m.x,e$D.max.x+=e$m.x,e$D.min.y+=e$m.y,e$D.max.y+=e$m.y},e$Y.shift=function(e$D,e$m){var e$Y=e$D.max.x-e$D.min.x,e$t=e$D.max.y-e$D.min.y;e$D.min.x=e$m.x,e$D.max.x=e$m.x+e$Y,e$D.min.y=e$m.y,e$D.max.y=e$m.y+e$t}},function(e$D,e$m){var e$Y={};(e$D.exports=e$Y).create=function(e$D,e$m){return{x:e$D||0,y:e$m||0}},e$Y.clone=function(e$D){return{x:e$D.x,y:e$D.y}},e$Y.magnitude=function(e$D){return Math.sqrt(e$D.x*e$D.x+e$D.y*e$D.y)},e$Y.magnitudeSquared=function(e$D){return e$D.x*e$D.x+e$D.y*e$D.y},e$Y.rotate=function(e$D,e$m,e$Y){var e$t=Math.cos(e$m),e$y=Math.sin(e$m);e$Y||(e$Y={});var e$l=e$D.x*e$t-e$D.y*e$y;return e$Y.y=e$D.x*e$y+e$D.y*e$t,e$Y.x=e$l,e$Y},e$Y.rotateAbout=function(e$D,e$m,e$Y,e$t){var e$y=Math.cos(e$m),e$l=Math.sin(e$m);e$t||(e$t={});var e$E=e$Y.x+((e$D.x-e$Y.x)*e$y-(e$D.y-e$Y.y)*e$l);return e$t.y=e$Y.y+((e$D.x-e$Y.x)*e$l+(e$D.y-e$Y.y)*e$y),e$t.x=e$E,e$t},e$Y.normalise=function(e$D){var e$m=e$Y.magnitude(e$D);return 0===e$m?{x:0,y:0}:{x:e$D.x/e$m,y:e$D.y/e$m}},e$Y.dot=function(e$D,e$m){return e$D.x*e$m.x+e$D.y*e$m.y},e$Y.cross=function(e$D,e$m){return e$D.x*e$m.y-e$D.y*e$m.x},e$Y.cross3=function(e$D,e$m,e$Y){return(e$m.x-e$D.x)*(e$Y.y-e$D.y)-(e$m.y-e$D.y)*(e$Y.x-e$D.x)},e$Y.add=function(e$D,e$m,e$Y){return e$Y||(e$Y={}),e$Y.x=e$D.x+e$m.x,e$Y.y=e$D.y+e$m.y,e$Y},e$Y.sub=function(e$D,e$m,e$Y){return e$Y||(e$Y={}),e$Y.x=e$D.x-e$m.x,e$Y.y=e$D.y-e$m.y,e$Y},e$Y.mult=function(e$D,e$m){return{x:e$D.x*e$m,y:e$D.y*e$m}},e$Y.div=function(e$D,e$m){return{x:e$D.x/e$m,y:e$D.y/e$m}},e$Y.perp=function(e$D,e$m){return{x:(e$m=!0===e$m?-1:1)*-e$D.y,y:e$m*e$D.x}},e$Y.neg=function(e$D){return{x:-e$D.x,y:-e$D.y}},e$Y.angle=function(e$D,e$m){return Math.atan2(e$m.y-e$D.y,e$m.x-e$D.x)},e$Y._temp=[e$Y.create(),e$Y.create(),e$Y.create(),e$Y.create(),e$Y.create(),e$Y.create()]},function(e$D,e$m,e$Y){var e$B={};e$D.exports=e$B;var e$v=e$Y(2),e$c=e$Y(0);e$B.create=function(e$D,e$m){for(var e$Y=[],e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t],e$l={x:e$y.x,y:e$y.y,index:e$t,body:e$m,isInternal:!1};e$Y.push(e$l)}return e$Y},e$B.fromPath=function(e$D,e$m){var e$t=[];return e$D.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(e$D,e$m,e$Y){e$t.push({x:parseFloat(e$m),y:parseFloat(e$Y)})}),e$B.create(e$t,e$m)},e$B.centre=function(e$D){for(var e$m,e$Y,e$t,e$y=e$B.area(e$D,!0),e$l={x:0,y:0},e$E=0;e$E<e$D.length;e$E++)e$t=(e$E+1)%e$D.length,e$m=e$v.cross(e$D[e$E],e$D[e$t]),e$Y=e$v.mult(e$v.add(e$D[e$E],e$D[e$t]),e$m),e$l=e$v.add(e$l,e$Y);return e$v.div(e$l,6*e$y)},e$B.mean=function(e$D){for(var e$m={x:0,y:0},e$Y=0;e$Y<e$D.length;e$Y++)e$m.x+=e$D[e$Y].x,e$m.y+=e$D[e$Y].y;return e$v.div(e$m,e$D.length)},e$B.area=function(e$D,e$m){for(var e$Y=0,e$t=e$D.length-1,e$y=0;e$y<e$D.length;e$y++)e$Y+=(e$D[e$t].x-e$D[e$y].x)*(e$D[e$t].y+e$D[e$y].y),e$t=e$y;return e$m?e$Y/2:Math.abs(e$Y)/2},e$B.inertia=function(e$D,e$m){for(var e$Y,e$t,e$y=0,e$l=0,e$E=e$D,e$B=0;e$B<e$E.length;e$B++)e$t=(e$B+1)%e$E.length,e$y+=(e$Y=Math.abs(e$v.cross(e$E[e$t],e$E[e$B])))*(e$v.dot(e$E[e$t],e$E[e$t])+e$v.dot(e$E[e$t],e$E[e$B])+e$v.dot(e$E[e$B],e$E[e$B])),e$l+=e$Y;return e$m/6*(e$y/e$l)},e$B.translate=function(e$D,e$m,e$Y){e$Y=void 0!==e$Y?e$Y:1;var e$t,e$y=e$D.length,e$l=e$m.x*e$Y,e$E=e$m.y*e$Y;for(e$t=0;e$t<e$y;e$t++)e$D[e$t].x+=e$l,e$D[e$t].y+=e$E;return e$D},e$B.rotate=function(e$D,e$m,e$Y){if(0!==e$m){var e$t,e$y,e$l,e$E,e$B=Math.cos(e$m),e$o=Math.sin(e$m),e$r=e$Y.x,e$f=e$Y.y,e$_=e$D.length;for(e$E=0;e$E<e$_;e$E++)e$y=(e$t=e$D[e$E]).x-e$r,e$l=e$t.y-e$f,e$t.x=e$r+(e$y*e$B-e$l*e$o),e$t.y=e$f+(e$y*e$o+e$l*e$B);return e$D}},e$B.contains=function(e$D,e$m){for(var e$Y,e$t=e$m.x,e$y=e$m.y,e$l=e$D.length,e$E=e$D[e$l-1],e$B=0;e$B<e$l;e$B++){if(e$Y=e$D[e$B],0<(e$t-e$E.x)*(e$Y.y-e$E.y)+(e$y-e$E.y)*(e$E.x-e$Y.x))return!1;e$E=e$Y}return!0},e$B.scale=function(e$D,e$m,e$Y,e$t){if(1===e$m&&1===e$Y)return e$D;var e$y,e$l;e$t=e$t||e$B.centre(e$D);for(var e$E=0;e$E<e$D.length;e$E++)e$y=e$D[e$E],e$l=e$v.sub(e$y,e$t),e$D[e$E].x=e$t.x+e$l.x*e$m,e$D[e$E].y=e$t.y+e$l.y*e$Y;return e$D},e$B.chamfer=function(e$D,e$m,e$Y,e$t,e$y){e$m="number"==typeof e$m?[e$m]:e$m||[8],e$Y=void 0!==e$Y?e$Y:-1,e$t=e$t||2,e$y=e$y||14;for(var e$l=[],e$E=0;e$E<e$D.length;e$E++){var e$B=e$D[0<=e$E-1?e$E-1:e$D.length-1],e$o=e$D[e$E],e$r=e$D[(e$E+1)%e$D.length],e$f=e$m[e$E<e$m.length?e$E:e$m.length-1];if(0!==e$f){var e$_=e$v.normalise({x:e$o.y-e$B.y,y:e$B.x-e$o.x}),e$i=e$v.normalise({x:e$r.y-e$o.y,y:e$o.x-e$r.x}),e$R=Math.sqrt(2*Math.pow(e$f,2)),e$G=e$v.mult(e$c.clone(e$_),e$f),e$I=e$v.normalise(e$v.mult(e$v.add(e$_,e$i),.5)),e$w=e$v.sub(e$o,e$v.mult(e$I,e$R)),e$W=e$Y;-1===e$Y&&(e$W=1.75*Math.pow(e$f,.32)),(e$W=e$c.clamp(e$W,e$t,e$y))%2==1&&(e$W+=1);for(var e$U=Math.acos(e$v.dot(e$_,e$i))/e$W,e$e=0;e$e<e$W;e$e++)e$l.push(e$v.add(e$v.rotate(e$G,e$U*e$e),e$w))}else e$l.push(e$o)}return e$l},e$B.clockwiseSort=function(e$D){var e$Y=e$B.mean(e$D);return e$D.sort(function(e$D,e$m){return e$v.angle(e$Y,e$D)-e$v.angle(e$Y,e$m)}),e$D},e$B.isConvex=function(e$D){var e$m,e$Y,e$t,e$y,e$l=0,e$E=e$D.length;if(e$E<3)return null;for(e$m=0;e$m<e$E;e$m++)if(e$t=(e$m+2)%e$E,e$y=(e$D[e$Y=(e$m+1)%e$E].x-e$D[e$m].x)*(e$D[e$t].y-e$D[e$Y].y),(e$y-=(e$D[e$Y].y-e$D[e$m].y)*(e$D[e$t].x-e$D[e$Y].x))<0?e$l|=1:0<e$y&&(e$l|=2),3===e$l)return!1;return 0!==e$l||null},e$B.hull=function(e$D){var e$m,e$Y,e$t=[],e$y=[];for((e$D=e$D.slice(0)).sort(function(e$D,e$m){var e$Y=e$D.x-e$m.x;return 0!=e$Y?e$Y:e$D.y-e$m.y}),e$Y=0;e$Y<e$D.length;e$Y+=1){for(e$m=e$D[e$Y];2<=e$y.length&&e$v.cross3(e$y[e$y.length-2],e$y[e$y.length-1],e$m)<=0;)e$y.pop();e$y.push(e$m)}for(e$Y=e$D.length-1;0<=e$Y;e$Y-=1){for(e$m=e$D[e$Y];2<=e$t.length&&e$v.cross3(e$t[e$t.length-2],e$t[e$t.length-1],e$m)<=0;)e$t.pop();e$t.push(e$m)}return e$t.pop(),e$y.pop(),e$t.concat(e$y)}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$f=e$Y(0);e$t.on=function(e$D,e$m,e$Y){for(var e$t,e$y=e$m.split(" "),e$l=0;e$l<e$y.length;e$l++)e$t=e$y[e$l],e$D.events=e$D.events||{},e$D.events[e$t]=e$D.events[e$t]||[],e$D.events[e$t].push(e$Y);return e$Y},e$t.off=function(e$D,e$m,e$Y){if(e$m){"function"==typeof e$m&&(e$Y=e$m,e$m=e$f.keys(e$D.events).join(" "));for(var e$t=e$m.split(" "),e$y=0;e$y<e$t.length;e$y++){var e$l=e$D.events[e$t[e$y]],e$E=[];if(e$Y&&e$l)for(var e$B=0;e$B<e$l.length;e$B++)e$l[e$B]!==e$Y&&e$E.push(e$l[e$B]);e$D.events[e$t[e$y]]=e$E}}else e$D.events={}},e$t.trigger=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$D.events;if(e$B&&0<e$f.keys(e$B).length){e$Y||(e$Y={}),e$t=e$m.split(" ");for(var e$o=0;e$o<e$t.length;e$o++)if(e$l=e$B[e$y=e$t[e$o]]){(e$E=e$f.clone(e$Y,!1)).name=e$y,e$E.source=e$D;for(var e$r=0;e$r<e$l.length;e$r++)e$l[e$r].apply(e$D,[e$E])}}}},function(e$D,e$m,e$Y){var e$_={};e$D.exports=e$_;var e$E=e$Y(4),e$B=e$Y(0),e$l=e$Y(1),e$i=e$Y(6);e$_.create=function(e$D){return e$B.extend({id:e$B.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},e$D)},e$_.setModified=function(e$D,e$m,e$Y,e$t){if((e$D.isModified=e$m)&&e$D.cache&&(e$D.cache.allBodies=null,e$D.cache.allConstraints=null,e$D.cache.allComposites=null),e$Y&&e$D.parent&&e$_.setModified(e$D.parent,e$m,e$Y,e$t),e$t)for(var e$y=0;e$y<e$D.composites.length;e$y++){var e$l=e$D.composites[e$y];e$_.setModified(e$l,e$m,e$Y,e$t)}},e$_.add=function(e$D,e$m,e$Y){var e$t=[].concat(e$m);e$E.trigger(e$D,"beforeAdd",{object:e$m});for(var e$y=0;e$y<e$t.length;e$y++){var e$l=e$t[e$y];switch(e$l.type){case"body":if(e$l.parent!==e$l){e$B.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}0<=e$Y&&e$Y<e$D.bodies.length?e$_.addBodyAt(e$D,e$l,e$Y):e$_.addBody(e$D,e$l);break;case"constraint":e$_.addConstraint(e$D,e$l);break;case"composite":e$_.addComposite(e$D,e$l);break;case"mouseConstraint":e$_.addConstraint(e$D,e$l.constraint)}}return e$E.trigger(e$D,"afterAdd",{object:e$m}),e$D},e$_.remove=function(e$D,e$m,e$Y){var e$t=[].concat(e$m);e$E.trigger(e$D,"beforeRemove",{object:e$m});for(var e$y=0;e$y<e$t.length;e$y++){var e$l=e$t[e$y];switch(e$l.type){case"body":e$_.removeBody(e$D,e$l,e$Y);break;case"constraint":e$_.removeConstraint(e$D,e$l,e$Y);break;case"composite":e$_.removeComposite(e$D,e$l,e$Y);break;case"mouseConstraint":e$_.removeConstraint(e$D,e$l.constraint)}}return e$E.trigger(e$D,"afterRemove",{object:e$m}),e$D},e$_.addComposite=function(e$D,e$m){return e$D.composites.push(e$m),e$m.parent=e$D,e$_.setModified(e$D,!0,!0,!1),e$D},e$_.removeComposite=function(e$D,e$m,e$Y){var e$t=e$B.indexOf(e$D.composites,e$m);if(-1!==e$t&&e$_.removeCompositeAt(e$D,e$t),e$Y)for(var e$y=0;e$y<e$D.composites.length;e$y++)e$_.removeComposite(e$D.composites[e$y],e$m,!0);return e$D},e$_.removeCompositeAt=function(e$D,e$m){return e$D.composites.splice(e$m,1),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.addBodyAt=function(e$D,e$m,e$Y){return 0<=e$Y&&e$Y<e$D.bodies.length?e$D.bodies.splice(e$Y,0,e$m):e$D.bodies.push(e$m),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.addBody=function(e$D,e$m){return e$D.bodies.push(e$m),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.removeBody=function(e$D,e$m,e$Y){var e$t=e$B.indexOf(e$D.bodies,e$m);if(-1!==e$t&&e$_.removeBodyAt(e$D,e$t),e$Y)for(var e$y=0;e$y<e$D.composites.length;e$y++)e$_.removeBody(e$D.composites[e$y],e$m,!0);return e$D},e$_.removeBodyAt=function(e$D,e$m){return e$D.bodies.splice(e$m,1),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.addConstraint=function(e$D,e$m){return e$D.constraints.push(e$m),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.removeConstraint=function(e$D,e$m,e$Y){var e$t=e$B.indexOf(e$D.constraints,e$m);if(-1!==e$t&&e$_.removeConstraintAt(e$D,e$t),e$Y)for(var e$y=0;e$y<e$D.composites.length;e$y++)e$_.removeConstraint(e$D.composites[e$y],e$m,!0);return e$D},e$_.removeConstraintAt=function(e$D,e$m){return e$D.constraints.splice(e$m,1),e$_.setModified(e$D,!0,!0,!1),e$D},e$_.clear=function(e$D,e$m,e$Y){if(e$Y)for(var e$t=0;e$t<e$D.composites.length;e$t++)e$_.clear(e$D.composites[e$t],e$m,!0);return e$m?e$D.bodies=e$D.bodies.filter(function(e$D){return e$D.isStatic}):e$D.bodies.length=0,e$D.constraints.length=0,e$D.composites.length=0,e$_.setModified(e$D,!0,!0,!1),e$D},e$_.allBodies=function(e$D){if(e$D.cache&&e$D.cache.allBodies)return e$D.cache.allBodies;for(var e$m=[].concat(e$D.bodies),e$Y=0;e$Y<e$D.composites.length;e$Y++)e$m=e$m.concat(e$_.allBodies(e$D.composites[e$Y]));return e$D.cache&&(e$D.cache.allBodies=e$m),e$m},e$_.allConstraints=function(e$D){if(e$D.cache&&e$D.cache.allConstraints)return e$D.cache.allConstraints;for(var e$m=[].concat(e$D.constraints),e$Y=0;e$Y<e$D.composites.length;e$Y++)e$m=e$m.concat(e$_.allConstraints(e$D.composites[e$Y]));return e$D.cache&&(e$D.cache.allConstraints=e$m),e$m},e$_.allComposites=function(e$D){if(e$D.cache&&e$D.cache.allComposites)return e$D.cache.allComposites;for(var e$m=[].concat(e$D.composites),e$Y=0;e$Y<e$D.composites.length;e$Y++)e$m=e$m.concat(e$_.allComposites(e$D.composites[e$Y]));return e$D.cache&&(e$D.cache.allComposites=e$m),e$m},e$_.get=function(e$D,e$m,e$Y){var e$t,e$y;switch(e$Y){case"body":e$t=e$_.allBodies(e$D);break;case"constraint":e$t=e$_.allConstraints(e$D);break;case"composite":e$t=e$_.allComposites(e$D).concat(e$D)}return e$t?0===(e$y=e$t.filter(function(e$D){return e$D.id.toString()===e$m.toString()})).length?null:e$y[0]:null},e$_.move=function(e$D,e$m,e$Y){return e$_.remove(e$D,e$m),e$_.add(e$Y,e$m),e$D},e$_.rebase=function(e$D){for(var e$m=e$_.allBodies(e$D).concat(e$_.allConstraints(e$D)).concat(e$_.allComposites(e$D)),e$Y=0;e$Y<e$m.length;e$Y++)e$m[e$Y].id=e$B.nextId();return e$D},e$_.translate=function(e$D,e$m,e$Y){for(var e$t=e$Y?e$_.allBodies(e$D):e$D.bodies,e$y=0;e$y<e$t.length;e$y++)e$i.translate(e$t[e$y],e$m);return e$D},e$_.rotate=function(e$D,e$m,e$Y,e$t){for(var e$y=Math.cos(e$m),e$l=Math.sin(e$m),e$E=e$t?e$_.allBodies(e$D):e$D.bodies,e$B=0;e$B<e$E.length;e$B++){var e$o=e$E[e$B],e$r=e$o.position.x-e$Y.x,e$f=e$o.position.y-e$Y.y;e$i.setPosition(e$o,{x:e$Y.x+(e$r*e$y-e$f*e$l),y:e$Y.y+(e$r*e$l+e$f*e$y)}),e$i.rotate(e$o,e$m)}return e$D},e$_.scale=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=e$y?e$_.allBodies(e$D):e$D.bodies,e$E=0;e$E<e$l.length;e$E++){var e$B=e$l[e$E],e$o=e$B.position.x-e$t.x,e$r=e$B.position.y-e$t.y;e$i.setPosition(e$B,{x:e$t.x+e$o*e$m,y:e$t.y+e$r*e$Y}),e$i.scale(e$B,e$m,e$Y)}return e$D},e$_.bounds=function(e$D){for(var e$m=e$_.allBodies(e$D),e$Y=[],e$t=0;e$t<e$m.length;e$t+=1){var e$y=e$m[e$t];e$Y.push(e$y.bounds.min,e$y.bounds.max)}return e$l.create(e$Y)}},function(e$D,e$m,e$Y){var e$r={};e$D.exports=e$r;var e$_=e$Y(3),e$i=e$Y(2),e$y=e$Y(7),e$l=(e$Y(16),e$Y(0)),e$R=e$Y(1),e$G=e$Y(11);!function(){e$r._inertiaScale=4,e$r._nextCollidingGroupId=1,e$r._nextNonCollidingGroupId=-1,e$r._nextCategory=1,e$r.create=function(e$D){var e$m={id:e$l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:e$_.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,positionRc:{cpx:0,cpy:0,ppx:0,ppy:0},friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},e$Y=e$l.extend(e$m,e$D);return e$t(e$Y,e$D),e$Y},e$r.nextGroup=function(e$D){return e$D?e$r._nextNonCollidingGroupId--:e$r._nextCollidingGroupId++},e$r.nextCategory=function(){return e$r._nextCategory=e$r._nextCategory<<1,e$r._nextCategory};var e$t=function(e$D,e$m){e$m=e$m||{},e$r.set(e$D,{bounds:e$D.bounds||e$R.create(e$D.vertices),worldBounds:e$m.worldBounds,positionPrev:e$D.positionPrev||e$i.clone(e$D.position),anglePrev:e$D.anglePrev||e$D.angle,vertices:e$D.vertices,parts:e$D.parts||[e$D],isStatic:e$D.isStatic,isSleeping:e$D.isSleeping,parent:e$D.parent||e$D}),e$_.rotate(e$D.vertices,e$D.angle,e$D.position),e$G.rotate(e$D.axes,e$D.angle),e$R.update(e$D.bounds,e$D.vertices,e$D.velocity),e$r.set(e$D,{axes:e$m.axes||e$D.axes,area:e$m.area||e$D.area,mass:e$m.mass||e$D.mass,inertia:e$m.inertia||e$D.inertia});var e$Y=e$D.isStatic?"#14151f":e$l.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),e$t=e$D.isStatic?"#555":"#ccc",e$y=e$D.isStatic&&null===e$D.render.fillStyle?1:0;e$D.render.fillStyle=e$D.render.fillStyle||e$Y,e$D.render.strokeStyle=e$D.render.strokeStyle||e$t,e$D.render.lineWidth=e$D.render.lineWidth||e$y,e$D.render.sprite.xOffset+=-(e$D.bounds.min.x-e$D.position.x)/(e$D.bounds.max.x-e$D.bounds.min.x),e$D.render.sprite.yOffset+=-(e$D.bounds.min.y-e$D.position.y)/(e$D.bounds.max.y-e$D.bounds.min.y)};e$r.set=function(e$D,e$m,e$Y){var e$t;for(e$t in"string"==typeof e$m&&(e$t=e$m,(e$m={})[e$t]=e$Y),e$m)if(Object.prototype.hasOwnProperty.call(e$m,e$t))switch(e$Y=e$m[e$t],e$t){case"isStatic":e$r.setStatic(e$D,e$Y);break;case"isSleeping":e$y.set(e$D,e$Y);break;case"mass":e$r.setMass(e$D,e$Y);break;case"density":e$r.setDensity(e$D,e$Y);break;case"inertia":e$r.setInertia(e$D,e$Y);break;case"vertices":e$r.setVertices(e$D,e$Y);break;case"position":e$r.setPosition(e$D,e$Y);break;case"angle":e$r.setAngle(e$D,e$Y);break;case"velocity":e$r.setVelocity(e$D,e$Y);break;case"angularVelocity":e$r.setAngularVelocity(e$D,e$Y);break;case"parts":e$r.setParts(e$D,e$Y);break;case"centre":e$r.setCentre(e$D,e$Y);break;default:e$D[e$t]=e$Y}},e$r.setStatic=function(e$D,e$m){for(var e$Y=0;e$Y<e$D.parts.length;e$Y++){var e$t=e$D.parts[e$Y];(e$t.isStatic=e$m)?(e$t._original={restitution:e$t.restitution,friction:e$t.friction,mass:e$t.mass,inertia:e$t.inertia,density:e$t.density,inverseMass:e$t.inverseMass,inverseInertia:e$t.inverseInertia},e$t.restitution=0,e$t.friction=1,e$t.mass=e$t.inertia=e$t.density=1/0,e$t.inverseMass=e$t.inverseInertia=0,e$t.positionPrev.x=e$t.position.x,e$t.positionPrev.y=e$t.position.y,e$t.anglePrev=e$t.angle,e$t.angularVelocity=0,e$t.speed=0,e$t.angularSpeed=0,e$t.motion=0):e$t._original&&(e$t.restitution=e$t._original.restitution,e$t.friction=e$t._original.friction,e$t.mass=e$t._original.mass,e$t.inertia=e$t._original.inertia,e$t.density=e$t._original.density,e$t.inverseMass=e$t._original.inverseMass,e$t.inverseInertia=e$t._original.inverseInertia,e$t._original=null)}},e$r.setMass=function(e$D,e$m){var e$Y=e$D.inertia/(e$D.mass/6);e$D.inertia=e$m/6*e$Y,e$D.inverseInertia=1/e$D.inertia,e$D.mass=e$m,e$D.inverseMass=1/e$D.mass,e$D.density=e$D.mass/e$D.area},e$r.setDensity=function(e$D,e$m){e$r.setMass(e$D,e$m*e$D.area),e$D.density=e$m},e$r.setInertia=function(e$D,e$m){e$D.inertia=e$m,e$D.inverseInertia=1/e$D.inertia},e$r.setVertices=function(e$D,e$m){e$m[0].body===e$D?e$D.vertices=e$m:e$D.vertices=e$_.create(e$m,e$D),e$D.axes=e$G.fromVertices(e$D.vertices),e$D.area=e$_.area(e$D.vertices),e$r.setMass(e$D,e$D.density*e$D.area);var e$Y=e$_.centre(e$D.vertices);e$_.translate(e$D.vertices,e$Y,-1),e$r.setInertia(e$D,e$r._inertiaScale*e$_.inertia(e$D.vertices,e$D.mass)),e$_.translate(e$D.vertices,e$D.position),e$R.update(e$D.bounds,e$D.vertices,e$D.velocity)},e$r.setParts=function(e$D,e$m,e$Y){var e$t;for(e$m=e$m.slice(0),e$D.parts.length=0,e$D.parts.push(e$D),e$D.parent=e$D,e$t=0;e$t<e$m.length;e$t++){var e$y=e$m[e$t];e$y!==e$D&&(e$y.parent=e$D).parts.push(e$y)}if(1!==e$D.parts.length){if(e$Y=void 0===e$Y||e$Y){var e$l=[];for(e$t=0;e$t<e$m.length;e$t++)e$l=e$l.concat(e$m[e$t].vertices);e$_.clockwiseSort(e$l);var e$E=e$_.hull(e$l),e$B=e$_.centre(e$E);e$r.setVertices(e$D,e$E),e$_.translate(e$D.vertices,e$B)}var e$o=e$r._totalProperties(e$D);e$D.area=e$o.area,(e$D.parent=e$D).position.x=e$o.centre.x,e$D.position.y=e$o.centre.y,e$D.positionPrev.x=e$o.centre.x,e$D.positionPrev.y=e$o.centre.y,e$r.setMass(e$D,e$o.mass),e$r.setInertia(e$D,e$o.inertia),e$r.setPosition(e$D,e$o.centre)}},e$r.setCentre=function(e$D,e$m,e$Y){e$Y?(e$D.positionPrev.x+=e$m.x,e$D.positionPrev.y+=e$m.y,e$D.position.x+=e$m.x,e$D.position.y+=e$m.y):(e$D.positionPrev.x=e$m.x-(e$D.position.x-e$D.positionPrev.x),e$D.positionPrev.y=e$m.y-(e$D.position.y-e$D.positionPrev.y),e$D.position.x=e$m.x,e$D.position.y=e$m.y)},e$r.setPosition=function(e$D,e$m){var e$Y=e$i.sub(e$m,e$D.position);e$D.positionPrev.x+=e$Y.x,e$D.positionPrev.y+=e$Y.y;for(var e$t=0;e$t<e$D.parts.length;e$t++){var e$y=e$D.parts[e$t];e$y.position.x+=e$Y.x,e$y.position.y+=e$Y.y,e$_.translate(e$y.vertices,e$Y),e$R.update(e$y.bounds,e$y.vertices,e$D.velocity)}},e$r.setAngle=function(e$D,e$m){var e$Y=e$m-e$D.angle;e$D.anglePrev+=e$Y;for(var e$t=0;e$t<e$D.parts.length;e$t++){var e$y=e$D.parts[e$t];e$y.angle+=e$Y,e$_.rotate(e$y.vertices,e$Y,e$D.position),e$G.rotate(e$y.axes,e$Y),e$R.update(e$y.bounds,e$y.vertices,e$D.velocity),0<e$t&&e$i.rotateAbout(e$y.position,e$Y,e$D.position,e$y.position)}},e$r.setVelocity=function(e$D,e$m){e$D.positionPrev.x=e$D.position.x-e$m.x,e$D.positionPrev.y=e$D.position.y-e$m.y,e$D.velocity.x=e$m.x,e$D.velocity.y=e$m.y,e$D.speed=e$i.magnitude(e$D.velocity)},e$r.setAngularVelocity=function(e$D,e$m){e$D.anglePrev=e$D.angle-e$m,e$D.angularVelocity=e$m,e$D.angularSpeed=Math.abs(e$D.angularVelocity)},e$r.translate=function(e$D,e$m){e$r.setPosition(e$D,e$i.add(e$D.position,e$m))},e$r.rotate=function(e$D,e$m,e$Y){if(e$Y){var e$t=Math.cos(e$m),e$y=Math.sin(e$m),e$l=e$D.position.x-e$Y.x,e$E=e$D.position.y-e$Y.y;e$r.setPosition(e$D,{x:e$Y.x+(e$l*e$t-e$E*e$y),y:e$Y.y+(e$l*e$y+e$E*e$t)}),e$r.setAngle(e$D,e$D.angle+e$m)}else e$r.setAngle(e$D,e$D.angle+e$m)},e$r.scale=function(e$D,e$m,e$Y,e$t){var e$y=0,e$l=0;e$t=e$t||e$D.position;for(var e$E=0;e$E<e$D.parts.length;e$E++){var e$B=e$D.parts[e$E];e$_.scale(e$B.vertices,e$m,e$Y,e$t),e$B.axes=e$G.fromVertices(e$B.vertices),e$B.area=e$_.area(e$B.vertices),e$r.setMass(e$B,e$D.density*e$B.area),e$_.translate(e$B.vertices,{x:-e$B.position.x,y:-e$B.position.y}),e$r.setInertia(e$B,e$r._inertiaScale*e$_.inertia(e$B.vertices,e$B.mass)),e$_.translate(e$B.vertices,{x:e$B.position.x,y:e$B.position.y}),0<e$E&&(e$y+=e$B.area,e$l+=e$B.inertia),e$B.position.x=e$t.x+(e$B.position.x-e$t.x)*e$m,e$B.position.y=e$t.y+(e$B.position.y-e$t.y)*e$Y,e$R.update(e$B.bounds,e$B.vertices,e$D.velocity)}1<e$D.parts.length&&(e$D.area=e$y,e$D.isStatic||(e$r.setMass(e$D,e$D.density*e$y),e$r.setInertia(e$D,e$l))),e$D.circleRadius&&(e$m===e$Y?e$D.circleRadius*=e$m:e$D.circleRadius=null)},e$r.update=function(e$D,e$m,e$Y,e$t){var e$y=Math.pow(e$m*e$Y*e$D.timeScale,2),e$l=1-e$D.frictionAir*e$Y*e$D.timeScale,e$E=e$D.position.x-e$D.positionPrev.x,e$B=e$D.position.y-e$D.positionPrev.y,e$o=e$D.positionRc;e$o.ppx=e$D.position.x,e$o.ppy=e$D.position.y,e$D.velocity.x=e$E*e$l*e$t+e$D.force.x/e$D.mass*e$y,e$D.velocity.y=e$B*e$l*e$t+e$D.force.y/e$D.mass*e$y,e$D.positionPrev.x=e$D.position.x,e$D.positionPrev.y=e$D.position.y,e$D.position.x+=e$D.velocity.x,e$D.position.y+=e$D.velocity.y,e$o.cpx=e$D.position.x,e$o.cpy=e$D.position.y,e$D.angularVelocity=(e$D.angle-e$D.anglePrev)*e$l*e$t+e$D.torque/e$D.inertia*e$y,e$D.anglePrev=e$D.angle,e$D.angle+=e$D.angularVelocity,e$D.speed=e$i.magnitude(e$D.velocity),e$D.angularSpeed=Math.abs(e$D.angularVelocity);for(var e$r=0;e$r<e$D.parts.length;e$r++){var e$f=e$D.parts[e$r];e$_.translate(e$f.vertices,e$D.velocity),0<e$r&&(e$f.position.x+=e$D.velocity.x,e$f.position.y+=e$D.velocity.y),0!==e$D.angularVelocity&&(e$_.rotate(e$f.vertices,e$D.angularVelocity,e$D.position),e$G.rotate(e$f.axes,e$D.angularVelocity),0<e$r&&e$i.rotateAbout(e$f.position,e$D.angularVelocity,e$D.position,e$f.position)),e$R.update(e$f.bounds,e$f.vertices,e$D.velocity)}},e$r.applyForce=function(e$D,e$m,e$Y){e$D.force.x+=e$Y.x,e$D.force.y+=e$Y.y;var e$t=e$m.x-e$D.position.x,e$y=e$m.y-e$D.position.y;e$D.torque+=e$t*e$Y.y-e$y*e$Y.x},e$r._totalProperties=function(e$D){for(var e$m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},e$Y=1===e$D.parts.length?0:1;e$Y<e$D.parts.length;e$Y++){var e$t=e$D.parts[e$Y],e$y=e$t.mass!==1/0?e$t.mass:1;e$m.mass+=e$y,e$m.area+=e$t.area,e$m.inertia+=e$t.inertia,e$m.centre=e$i.add(e$m.centre,e$i.mult(e$t.position,e$y))}return e$m.centre=e$i.div(e$m.centre,e$m.mass),e$m}}()},function(e$D,e$m,e$Y){var e$f={};e$D.exports=e$f;var e$t=e$Y(4);e$f._motionWakeThreshold=.18,e$f._motionSleepThreshold=.08,e$f._minBias=.9,e$f.update=function(e$D,e$m){for(var e$Y=e$m*e$m*e$m,e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t],e$l=e$y.speed*e$y.speed+e$y.angularSpeed*e$y.angularSpeed;if(0===e$y.force.x&&0===e$y.force.y){var e$E=Math.min(e$y.motion,e$l),e$B=Math.max(e$y.motion,e$l);e$y.motion=e$f._minBias*e$E+(1-e$f._minBias)*e$B,0<e$y.sleepThreshold&&e$y.motion<e$f._motionSleepThreshold*e$Y?(e$y.sleepCounter+=1,e$y.sleepCounter>=e$y.sleepThreshold&&e$f.set(e$y,!0)):0<e$y.sleepCounter&&(e$y.sleepCounter-=1)}else e$f.set(e$y,!1)}},e$f.afterCollisions=function(e$D,e$m){for(var e$Y=e$m*e$m*e$m,e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t];if(e$y.isActive){var e$l=e$y.collision,e$E=e$l.bodyA.parent,e$B=e$l.bodyB.parent;if(!(e$E.isSleeping&&e$B.isSleeping||e$E.isStatic||e$B.isStatic)&&(e$E.isSleeping||e$B.isSleeping)){var e$o=e$E.isSleeping&&!e$E.isStatic?e$E:e$B,e$r=e$o===e$E?e$B:e$E;!e$o.isStatic&&e$r.motion>e$f._motionWakeThreshold*e$Y&&e$f.set(e$o,!1)}}}},e$f.set=function(e$D,e$m){var e$Y=e$D.isSleeping;e$m?(e$D.isSleeping=!0,e$D.sleepCounter=e$D.sleepThreshold,e$D.positionImpulse.x=0,e$D.positionImpulse.y=0,e$D.positionPrev.x=e$D.position.x,e$D.positionPrev.y=e$D.position.y,e$D.anglePrev=e$D.angle,e$D.speed=0,e$D.angularSpeed=0,e$D.motion=0,e$Y||e$t.trigger(e$D,"sleepStart")):(e$D.isSleeping=!1,e$D.sleepCounter=0,e$Y&&e$t.trigger(e$D,"sleepEnd"))}},function(e$D,e$m,e$Y){var e$G={};e$D.exports=e$G;var e$w,e$I,e$W,e$U=e$Y(3),e$e=e$Y(9);e$w=[],e$I={overlap:0,axis:null},e$W={overlap:0,axis:null},e$G.create=function(e$D,e$m){return{pair:null,collided:!1,bodyA:e$D,bodyB:e$m,parentA:e$D.parent,parentB:e$m.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e$G.collides=function(e$D,e$m,e$Y){if(e$G._overlapAxes(e$I,e$D.vertices,e$m.vertices,e$D.axes),e$I.overlap<=0)return null;if(e$G._overlapAxes(e$W,e$m.vertices,e$D.vertices,e$m.axes),e$W.overlap<=0)return null;var e$t,e$y,e$l=e$Y&&e$Y.table[e$e.id(e$D,e$m)];e$l?e$t=e$l.collision:((e$t=e$G.create(e$D,e$m)).collided=!0,e$t.bodyA=e$D.id<e$m.id?e$D:e$m,e$t.bodyB=e$D.id<e$m.id?e$m:e$D,e$t.parentA=e$t.bodyA.parent,e$t.parentB=e$t.bodyB.parent),e$D=e$t.bodyA,e$m=e$t.bodyB,e$y=e$I.overlap<e$W.overlap?e$I:e$W;var e$E=e$t.normal,e$B=e$t.supports,e$o=e$y.axis,e$r=e$o.x,e$f=e$o.y;e$r*(e$m.position.x-e$D.position.x)+e$f*(e$m.position.y-e$D.position.y)<0?(e$E.x=e$r,e$E.y=e$f):(e$E.x=-e$r,e$E.y=-e$f),e$t.tangent.x=-e$E.y,e$t.tangent.y=e$E.x,e$t.depth=e$y.overlap,e$t.penetration.x=e$E.x*e$t.depth,e$t.penetration.y=e$E.y*e$t.depth;var e$_=e$G._findSupports(e$D,e$m,e$E,1),e$i=0;if(e$U.contains(e$D.vertices,e$_[0])&&(e$B[e$i++]=e$_[0]),e$U.contains(e$D.vertices,e$_[1])&&(e$B[e$i++]=e$_[1]),e$i<2){var e$R=e$G._findSupports(e$m,e$D,e$E,-1);e$U.contains(e$m.vertices,e$R[0])&&(e$B[e$i++]=e$R[0]),e$i<2&&e$U.contains(e$m.vertices,e$R[1])&&(e$B[e$i++]=e$R[1])}return 0===e$i&&(e$B[e$i++]=e$_[0]),e$B.length=e$i,e$t},e$G._overlapAxes=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r,e$f=e$m.length,e$_=e$Y.length,e$i=e$m[0].x,e$R=e$m[0].y,e$G=e$Y[0].x,e$I=e$Y[0].y,e$w=e$t.length,e$W=Number.MAX_VALUE,e$U=0;for(e$o=0;e$o<e$w;e$o++){var e$e=e$t[e$o],e$v=e$e.x,e$c=e$e.y,e$S=e$i*e$v+e$R*e$c,e$z=e$G*e$v+e$I*e$c,e$A=e$S,e$J=e$z;for(e$r=1;e$r<e$f;e$r+=1)e$A<(e$B=e$m[e$r].x*e$v+e$m[e$r].y*e$c)?e$A=e$B:e$B<e$S&&(e$S=e$B);for(e$r=1;e$r<e$_;e$r+=1)e$J<(e$B=e$Y[e$r].x*e$v+e$Y[e$r].y*e$c)?e$J=e$B:e$B<e$z&&(e$z=e$B);if((e$y=(e$l=e$A-e$z)<(e$E=e$J-e$S)?e$l:e$E)<e$W&&(e$U=e$o,(e$W=e$y)<=0))break}e$D.axis=e$t[e$U],e$D.overlap=e$W},e$G._projectToAxis=function(e$D,e$m,e$Y){for(var e$t=e$m[0].x*e$Y.x+e$m[0].y*e$Y.y,e$y=e$t,e$l=1;e$l<e$m.length;e$l+=1){var e$E=e$m[e$l].x*e$Y.x+e$m[e$l].y*e$Y.y;e$y<e$E?e$y=e$E:e$E<e$t&&(e$t=e$E)}e$D.min=e$t,e$D.max=e$y},e$G._findSupports=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r=e$m.vertices,e$f=e$r.length,e$_=e$D.position.x,e$i=e$D.position.y,e$R=e$Y.x*e$t,e$G=e$Y.y*e$t,e$I=Number.MAX_VALUE;for(e$o=0;e$o<e$f;e$o+=1)(e$B=e$R*(e$_-(e$l=e$r[e$o]).x)+e$G*(e$i-e$l.y))<e$I&&(e$I=e$B,e$y=e$l);return e$I=e$R*(e$_-(e$E=e$r[(e$f+e$y.index-1)%e$f]).x)+e$G*(e$i-e$E.y),e$R*(e$_-(e$l=e$r[(e$y.index+1)%e$f]).x)+e$G*(e$i-e$l.y)<e$I?(e$w[0]=e$y,e$w[1]=e$l):(e$w[0]=e$y,e$w[1]=e$E),e$w}},function(e$D,e$m,e$Y){var e$l={};e$D.exports=e$l;var e$R=e$Y(17);e$l.create=function(e$D,e$m){var e$Y=e$D.bodyA,e$t=e$D.bodyB,e$y={id:e$l.id(e$Y,e$t),bodyA:e$Y,bodyB:e$t,collision:e$D,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:e$Y.isSensor||e$t.isSensor,timeCreated:e$m,timeUpdated:e$m,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e$l.update(e$y,e$D,e$m),e$y},e$l.update=function(e$D,e$m,e$Y){var e$t=e$D.contacts,e$y=e$m.supports,e$l=e$D.activeContacts,e$E=e$m.parentA,e$B=e$m.parentB,e$o=e$E.vertices.length;e$D.isActive=!0,e$D.timeUpdated=e$Y,e$D.collision=e$m,e$D.separation=e$m.depth,e$D.inverseMass=e$E.inverseMass+e$B.inverseMass,e$D.friction=e$E.friction<e$B.friction?e$E.friction:e$B.friction,e$D.frictionStatic=e$E.frictionStatic>e$B.frictionStatic?e$E.frictionStatic:e$B.frictionStatic,e$D.restitution=e$E.restitution>e$B.restitution?e$E.restitution:e$B.restitution,e$D.slop=e$E.slop>e$B.slop?e$E.slop:e$B.slop,e$m.pair=e$D;for(var e$r=e$l.length=0;e$r<e$y.length;e$r++){var e$f=e$y[e$r],e$_=e$f.body===e$E?e$f.index:e$o+e$f.index,e$i=e$t[e$_];e$i?e$l.push(e$i):e$l.push(e$t[e$_]=e$R.create(e$f))}},e$l.setActive=function(e$D,e$m,e$Y){e$m?(e$D.isActive=!0,e$D.timeUpdated=e$Y):(e$D.isActive=!1,e$D.activeContacts.length=0)},e$l.id=function(e$D,e$m){return e$D.id<e$m.id?"A"+e$D.id+"B"+e$m.id:"A"+e$m.id+"B"+e$D.id}},function(e$D,e$m,e$Y){var e$c={};e$D.exports=e$c;var e$E=e$Y(3),e$S=e$Y(2),e$B=e$Y(7),e$o=e$Y(1),e$r=e$Y(11),e$f=e$Y(0);e$c._warming=.4,e$c._torqueDampen=1,e$c._minLength=1e-6,e$c.create=function(e$D){var e$m=e$D;e$m.bodyA&&!e$m.pointA&&(e$m.pointA={x:0,y:0}),e$m.bodyB&&!e$m.pointB&&(e$m.pointB={x:0,y:0});var e$Y=e$m.bodyA?e$S.add(e$m.bodyA.position,e$m.pointA):e$m.pointA,e$t=e$m.bodyB?e$S.add(e$m.bodyB.position,e$m.pointB):e$m.pointB,e$y=e$S.magnitude(e$S.sub(e$Y,e$t));e$m.length=void 0!==e$m.length?e$m.length:e$y,e$m.id=e$m.id||e$f.nextId(),e$m.label=e$m.label||"Constraint",e$m.type="constraint",e$m.stiffness=e$m.stiffness||(0<e$m.length?1:.7),e$m.damping=e$m.damping||0,e$m.angularStiffness=e$m.angularStiffness||0,e$m.angleA=e$m.bodyA?e$m.bodyA.angle:e$m.angleA,e$m.angleB=e$m.bodyB?e$m.bodyB.angle:e$m.angleB,e$m.plugin={};var e$l={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e$m.length&&.1<e$m.stiffness?(e$l.type="pin",e$l.anchors=!1):e$m.stiffness<.9&&(e$l.type="spring"),e$m.render=e$f.extend(e$l,e$m.render),e$m},e$c.preSolveAll=function(e$D){for(var e$m=0;e$m<e$D.length;e$m+=1){var e$Y=e$D[e$m],e$t=e$Y.constraintImpulse;e$Y.isStatic||0===e$t.x&&0===e$t.y&&0===e$t.angle||(e$Y.position.x+=e$t.x,e$Y.position.y+=e$t.y,e$Y.angle+=e$t.angle)}},e$c.solveAll=function(e$D,e$m){for(var e$Y=0;e$Y<e$D.length;e$Y+=1){var e$t=e$D[e$Y],e$y=!e$t.bodyA||e$t.bodyA&&e$t.bodyA.isStatic,e$l=!e$t.bodyB||e$t.bodyB&&e$t.bodyB.isStatic;(e$y||e$l)&&e$c.solve(e$D[e$Y],e$m)}for(e$Y=0;e$Y<e$D.length;e$Y+=1)e$y=!(e$t=e$D[e$Y]).bodyA||e$t.bodyA&&e$t.bodyA.isStatic,e$l=!e$t.bodyB||e$t.bodyB&&e$t.bodyB.isStatic,e$y||e$l||e$c.solve(e$D[e$Y],e$m)},e$c.solve=function(e$D,e$m){var e$Y=e$D.bodyA,e$t=e$D.bodyB,e$y=e$D.pointA,e$l=e$D.pointB;if(e$Y||e$t){e$Y&&!e$Y.isStatic&&(e$S.rotate(e$y,e$Y.angle-e$D.angleA,e$y),e$D.angleA=e$Y.angle),e$t&&!e$t.isStatic&&(e$S.rotate(e$l,e$t.angle-e$D.angleB,e$l),e$D.angleB=e$t.angle);var e$E=e$y,e$B=e$l;if(e$Y&&(e$E=e$S.add(e$Y.position,e$y)),e$t&&(e$B=e$S.add(e$t.position,e$l)),e$E&&e$B){var e$o=e$S.sub(e$E,e$B),e$r=e$S.magnitude(e$o);e$r<e$c._minLength&&(e$r=e$c._minLength);var e$f,e$_,e$i,e$R,e$G,e$I=(e$r-e$D.length)/e$r,e$w=e$D.stiffness<1?e$D.stiffness*e$m:e$D.stiffness,e$W=e$S.mult(e$o,e$I*e$w),e$U=(e$Y?e$Y.inverseMass:0)+(e$t?e$t.inverseMass:0),e$e=e$U+((e$Y?e$Y.inverseInertia:0)+(e$t?e$t.inverseInertia:0));if(e$D.damping){var e$v=e$S.create();e$i=e$S.div(e$o,e$r),e$G=e$S.sub(e$t&&e$S.sub(e$t.position,e$t.positionPrev)||e$v,e$Y&&e$S.sub(e$Y.position,e$Y.positionPrev)||e$v),e$R=e$S.dot(e$i,e$G)}e$Y&&!e$Y.isStatic&&(e$_=e$Y.inverseMass/e$U,e$Y.constraintImpulse.x-=e$W.x*e$_,e$Y.constraintImpulse.y-=e$W.y*e$_,e$Y.position.x-=e$W.x*e$_,e$Y.position.y-=e$W.y*e$_,e$D.damping&&(e$Y.positionPrev.x-=e$D.damping*e$i.x*e$R*e$_,e$Y.positionPrev.y-=e$D.damping*e$i.y*e$R*e$_),e$f=e$S.cross(e$y,e$W)/e$e*e$c._torqueDampen*e$Y.inverseInertia*(1-e$D.angularStiffness),e$Y.constraintImpulse.angle-=e$f,e$Y.angle-=e$f),e$t&&!e$t.isStatic&&(e$_=e$t.inverseMass/e$U,e$t.constraintImpulse.x+=e$W.x*e$_,e$t.constraintImpulse.y+=e$W.y*e$_,e$t.position.x+=e$W.x*e$_,e$t.position.y+=e$W.y*e$_,e$D.damping&&(e$t.positionPrev.x+=e$D.damping*e$i.x*e$R*e$_,e$t.positionPrev.y+=e$D.damping*e$i.y*e$R*e$_),e$f=e$S.cross(e$l,e$W)/e$e*e$c._torqueDampen*e$t.inverseInertia*(1-e$D.angularStiffness),e$t.constraintImpulse.angle+=e$f,e$t.angle+=e$f)}}},e$c.postSolveAll=function(e$D){for(var e$m=0;e$m<e$D.length;e$m++){var e$Y=e$D[e$m],e$t=e$Y.constraintImpulse;if(!(e$Y.isStatic||0===e$t.x&&0===e$t.y&&0===e$t.angle)){e$B.set(e$Y,!1);for(var e$y=0;e$y<e$Y.parts.length;e$y++){var e$l=e$Y.parts[e$y];e$E.translate(e$l.vertices,e$t),0<e$y&&(e$l.position.x+=e$t.x,e$l.position.y+=e$t.y),0!==e$t.angle&&(e$E.rotate(e$l.vertices,e$t.angle,e$Y.position),e$r.rotate(e$l.axes,e$t.angle),0<e$y&&e$S.rotateAbout(e$l.position,e$t.angle,e$Y.position,e$l.position)),e$o.update(e$l.bounds,e$l.vertices,e$Y.velocity)}e$t.angle*=e$c._warming,e$t.x*=e$c._warming,e$t.y*=e$c._warming}}},e$c.pointAWorld=function(e$D){return{x:(e$D.bodyA?e$D.bodyA.position.x:0)+e$D.pointA.x,y:(e$D.bodyA?e$D.bodyA.position.y:0)+e$D.pointA.y}},e$c.pointBWorld=function(e$D){return{x:(e$D.bodyB?e$D.bodyB.position.x:0)+e$D.pointB.x,y:(e$D.bodyB?e$D.bodyB.position.y:0)+e$D.pointB.y}}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$E=e$Y(2),e$B=e$Y(0);e$t.fromVertices=function(e$D){for(var e$m={},e$Y=0;e$Y<e$D.length;e$Y++){var e$t=(e$Y+1)%e$D.length,e$y=e$E.normalise({x:e$D[e$t].y-e$D[e$Y].y,y:e$D[e$Y].x-e$D[e$t].x}),e$l=0===e$y.y?1/0:e$y.x/e$y.y;e$m[e$l=e$l.toFixed(3).toString()]=e$y}return e$B.values(e$m)},e$t.rotate=function(e$D,e$m){if(0!==e$m)for(var e$Y=Math.cos(e$m),e$t=Math.sin(e$m),e$y=0;e$y<e$D.length;e$y++){var e$l,e$E=e$D[e$y];e$l=e$E.x*e$Y-e$E.y*e$t,e$E.y=e$E.x*e$t+e$E.y*e$Y,e$E.x=e$l}}},function(e$D,e$m,e$Y){var e$G={};e$D.exports=e$G;var e$F=e$Y(3),e$s=e$Y(0),e$Q=e$Y(6),e$T=e$Y(1),e$N=e$Y(2);e$G.rectangle=function(e$D,e$m,e$Y,e$t,e$y){e$y=e$y||{};var e$l={label:"Rectangle Body",position:{x:e$D,y:e$m},vertices:e$F.fromPath("L 0 0 L "+e$Y+" 0 L "+e$Y+" "+e$t+" L 0 "+e$t)};if(e$y.chamfer){var e$E=e$y.chamfer;e$l.vertices=e$F.chamfer(e$l.vertices,e$E.radius,e$E.quality,e$E.qualityMin,e$E.qualityMax),delete e$y.chamfer}return e$Q.create(e$s.extend({},e$l,e$y))},e$G.trapezoid=function(e$D,e$m,e$Y,e$t,e$y,e$l){e$l=e$l||{};var e$E,e$B=e$Y*(e$y*=.5),e$o=e$B+(1-2*e$y)*e$Y,e$r=e$o+e$B;e$E=e$y<.5?"L 0 0 L "+e$B+" "+-e$t+" L "+e$o+" "+-e$t+" L "+e$r+" 0":"L 0 0 L "+e$o+" "+-e$t+" L "+e$r+" 0";var e$f={label:"Trapezoid Body",position:{x:e$D,y:e$m},vertices:e$F.fromPath(e$E)};if(e$l.chamfer){var e$_=e$l.chamfer;e$f.vertices=e$F.chamfer(e$f.vertices,e$_.radius,e$_.quality,e$_.qualityMin,e$_.qualityMax),delete e$l.chamfer}return e$Q.create(e$s.extend({},e$f,e$l))},e$G.circle=function(e$D,e$m,e$Y,e$t,e$y){e$t=e$t||{};var e$l={label:"Circle Body",circleRadius:e$Y};e$y=e$y||25;var e$E=Math.ceil(Math.max(10,Math.min(e$y,e$Y)));return e$E%2==1&&(e$E+=1),e$G.polygon(e$D,e$m,e$E,e$Y,e$s.extend({},e$l,e$t))},e$G.polygon=function(e$D,e$m,e$Y,e$t,e$y){if(e$y=e$y||{},e$Y<3)return e$G.circle(e$D,e$m,e$t,e$y);for(var e$l=2*Math.PI/e$Y,e$E="",e$B=.5*e$l,e$o=0;e$o<e$Y;e$o+=1){var e$r=e$B+e$o*e$l,e$f=Math.cos(e$r)*e$t,e$_=Math.sin(e$r)*e$t;e$E+="L "+e$f.toFixed(3)+" "+e$_.toFixed(3)+" "}var e$i={label:"Polygon Body",position:{x:e$D,y:e$m},vertices:e$F.fromPath(e$E)};if(e$y.chamfer){var e$R=e$y.chamfer;e$i.vertices=e$F.chamfer(e$i.vertices,e$R.radius,e$R.quality,e$R.qualityMin,e$R.qualityMax),delete e$y.chamfer}return e$Q.create(e$s.extend({},e$i,e$y))},e$G.fromVertices=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B){var e$o,e$r,e$f,e$_,e$i,e$R,e$G,e$I,e$w,e$W,e$U=e$s.getDecomp();for(e$o=Boolean(e$U&&e$U.quickDecomp),e$t=e$t||{},e$f=[],e$y=void 0!==e$y&&e$y,e$l=void 0!==e$l?e$l:.01,e$E=void 0!==e$E?e$E:10,e$B=void 0!==e$B?e$B:.01,e$s.isArray(e$Y[0])||(e$Y=[e$Y]),e$w=0;e$w<e$Y.length;e$w+=1)if(e$i=e$Y[e$w],!(e$_=e$F.isConvex(e$i))&&!e$o&&e$s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),e$_||!e$o)e$i=e$_?e$F.clockwiseSort(e$i):e$F.hull(e$i),e$f.push({position:{x:e$D,y:e$m},vertices:e$i});else{var e$e=e$i.map(function(e$D){return[e$D.x,e$D.y]});e$U.makeCCW(e$e),!1!==e$l&&e$U.removeCollinearPoints(e$e,e$l),!1!==e$B&&e$U.removeDuplicatePoints&&e$U.removeDuplicatePoints(e$e,e$B);var e$v=e$U.quickDecomp(e$e);for(e$R=0;e$R<e$v.length;e$R++){var e$c=e$v[e$R].map(function(e$D){return{x:e$D[0],y:e$D[1]}});0<e$E&&e$F.area(e$c)<e$E||e$f.push({position:e$F.centre(e$c),vertices:e$c})}}for(e$R=0;e$R<e$f.length;e$R++)e$f[e$R]=e$Q.create(e$s.extend(e$f[e$R],e$t));if(e$y)for(e$R=0;e$R<e$f.length;e$R++){var e$S=e$f[e$R];for(e$G=e$R+1;e$G<e$f.length;e$G++){var e$z=e$f[e$G];if(e$T.overlaps(e$S.bounds,e$z.bounds)){var e$A=e$S.vertices,e$J=e$z.vertices;for(e$I=0;e$I<e$S.vertices.length;e$I++)for(e$W=0;e$W<e$z.vertices.length;e$W++){var e$a=e$N.magnitudeSquared(e$N.sub(e$A[(e$I+1)%e$A.length],e$J[e$W])),e$p=e$N.magnitudeSquared(e$N.sub(e$A[e$I],e$J[(e$W+1)%e$J.length]));e$a<5&&e$p<5&&(e$A[e$I].isInternal=!0,e$J[e$W].isInternal=!0)}}}}return 1<e$f.length?(e$r=e$Q.create(e$s.extend({parts:e$f.slice(0)},e$t)),e$Q.setPosition(e$r,{x:e$D,y:e$m}),e$r):e$f[0]}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$y=e$Y(0);e$t.create=function(e$D){var e$Y={};return e$D||e$y.log("Mouse.create: element was undefined, defaulting to document.body","warn"),e$Y.element=e$D||document.body,e$Y.absolute={x:0,y:0},e$Y.position={x:0,y:0},e$Y.mousedownPosition={x:0,y:0},e$Y.mouseupPosition={x:0,y:0},e$Y.mouseoutPosition={x:0,y:0},e$Y.offset={x:0,y:0},e$Y.scale={x:1,y:1},e$Y.wheelDelta=0,e$Y.button=-1,e$Y.pixelRatio=parseInt(e$Y.element.getAttribute("data-pixel-ratio"),10)||1,e$Y.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mouseout:null,mousewheel:null},e$Y.mousemove=function(e$D){var e$m=e$t._getRelativeMousePosition(e$D,e$Y.element,e$Y.pixelRatio);e$D.changedTouches&&(e$Y.button=0,e$D.preventDefault()),e$Y.absolute.x=e$m.x,e$Y.absolute.y=e$m.y,e$Y.position.x=e$Y.absolute.x*e$Y.scale.x+e$Y.offset.x,e$Y.position.y=e$Y.absolute.y*e$Y.scale.y+e$Y.offset.y,e$Y.sourceEvents.mousemove=e$D},e$Y.mousedown=function(e$D){var e$m=e$t._getRelativeMousePosition(e$D,e$Y.element,e$Y.pixelRatio);e$D.changedTouches?(e$Y.button=0,e$D.preventDefault()):e$Y.button=e$D.button,e$Y.absolute.x=e$m.x,e$Y.absolute.y=e$m.y,e$Y.position.x=e$Y.absolute.x*e$Y.scale.x+e$Y.offset.x,e$Y.position.y=e$Y.absolute.y*e$Y.scale.y+e$Y.offset.y,e$Y.mousedownPosition.x=e$Y.position.x,e$Y.mousedownPosition.y=e$Y.position.y,e$Y.sourceEvents.mousedown=e$D},e$Y.mouseup=function(e$D){var e$m=e$t._getRelativeMousePosition(e$D,e$Y.element,e$Y.pixelRatio);e$D.changedTouches&&e$D.preventDefault(),e$Y.button=-1,e$Y.absolute.x=e$m.x,e$Y.absolute.y=e$m.y,e$Y.position.x=e$Y.absolute.x*e$Y.scale.x+e$Y.offset.x,e$Y.position.y=e$Y.absolute.y*e$Y.scale.y+e$Y.offset.y,e$Y.mouseupPosition.x=e$Y.position.x,e$Y.mouseupPosition.y=e$Y.position.y,e$Y.sourceEvents.mouseup=e$D},e$Y.mouseout=function(e$D){var e$m=e$t._getRelativeMousePosition(e$D,e$Y.element,e$Y.pixelRatio);e$D.changedTouches&&e$D.preventDefault(),e$Y.button=-1,e$Y.absolute.x=e$m.x,e$Y.absolute.y=e$m.y,e$Y.position.x=e$Y.absolute.x*e$Y.scale.x+e$Y.offset.x,e$Y.position.y=e$Y.absolute.y*e$Y.scale.y+e$Y.offset.y,e$Y.mouseoutPosition.x=e$Y.position.x,e$Y.mouseoutPosition.y=e$Y.position.y,e$Y.sourceEvents.mouseout=e$D},e$Y.mousewheel=function(e$D){e$Y.wheelDelta=Math.max(-1,Math.min(1,e$D.wheelDelta||-e$D.detail)),e$D.preventDefault()},e$t.setElement(e$Y,e$Y.element),e$Y},e$t.setElement=function(e$D,e$m){(e$D.element=e$m).addEventListener("mousemove",e$D.mousemove),e$m.addEventListener("mousedown",e$D.mousedown),e$m.addEventListener("mouseup",e$D.mouseup),e$m.addEventListener("mouseout",e$D.mouseout),e$m.addEventListener("mousewheel",e$D.mousewheel),e$m.addEventListener("DOMMouseScroll",e$D.mousewheel),e$m.addEventListener("touchmove",e$D.mousemove),e$m.addEventListener("touchstart",e$D.mousedown),e$m.addEventListener("touchend",e$D.mouseup),e$m.addEventListener("touchcancel",e$D.mouseup)},e$t.clearSourceEvents=function(e$D){e$D.sourceEvents.mousemove=null,e$D.sourceEvents.mousedown=null,e$D.sourceEvents.mouseup=null,e$D.sourceEvents.mouseout=null,e$D.sourceEvents.mousewheel=null,e$D.wheelDelta=0},e$t.setOffset=function(e$D,e$m){e$D.offset.x=e$m.x,e$D.offset.y=e$m.y,e$D.position.x=e$D.absolute.x*e$D.scale.x+e$D.offset.x,e$D.position.y=e$D.absolute.y*e$D.scale.y+e$D.offset.y},e$t.setScale=function(e$D,e$m){e$D.scale.x=e$m.x,e$D.scale.y=e$m.y,e$D.position.x=e$D.absolute.x*e$D.scale.x+e$D.offset.x,e$D.position.y=e$D.absolute.y*e$D.scale.y+e$D.offset.y},e$t._getRelativeMousePosition=function(e$D,e$m,e$Y){var e$t,e$y,e$l=e$m.getBoundingClientRect(),e$E=document.documentElement||document.body.parentNode||document.body,e$B=void 0!==window.pageXOffset?window.pageXOffset:e$E.scrollLeft,e$o=void 0!==window.pageYOffset?window.pageYOffset:e$E.scrollTop,e$r=e$D.changedTouches;e$B=e$B||0,e$o=e$o||0,e$y=e$r?(e$t=e$r[0].pageX-e$l.left-e$B,e$r[0].pageY-e$l.top-e$o):(e$t=e$D.pageX-e$l.left-e$B,e$D.pageY-e$l.top-e$o);var e$f=e$m.clientWidth||e$m.width,e$_=e$m.clientHeight||e$m.height;return{x:e$t/(e$f/(e$m.width||e$f)*e$Y),y:e$y/(e$_/(e$m.height||e$_)*e$Y)}}},function(e$D,e$m,e$Y){var e$a={};e$D.exports=e$a;var e$t=e$Y(0),e$p=e$Y(8),e$f=e$Y(2);e$a.create=function(e$D){return e$t.extend({bodies:[],pairs:null},e$D)},e$a.setBodies=function(e$D,e$m){e$D.bodies=e$m.slice(0)},e$a.clear=function(e$D){e$D.bodies=[]},e$a.collisions=function(e$D){var e$m,e$Y,e$t=[],e$y=e$D.pairs,e$l=e$D.bodies,e$E=e$l.length,e$B=e$a.canCollide,e$o=e$p.collides;for(e$l.sort(e$a._compareBoundsX),e$m=0;e$m<e$E;e$m++){var e$r=e$l[e$m],e$f=e$r.bounds,e$_=e$r.bounds.max.x,e$i=e$r.bounds.max.y,e$R=e$r.bounds.min.y,e$G=e$r.isStatic||e$r.isSleeping,e$I=e$r.parts.length,e$w=1===e$I;for(e$Y=e$m+1;e$Y<e$E;e$Y++){var e$W=e$l[e$Y];if((e$J=e$W.bounds).min.x>e$_)break;if(!(e$i<e$J.min.y||e$R>e$J.max.y)&&(!e$G||!e$W.isStatic&&!e$W.isSleeping)&&e$B(e$r.collisionFilter,e$W.collisionFilter)){var e$U=e$W.parts.length;if(e$w&&1===e$U)(e$z=e$o(e$r,e$W,e$y))&&e$t.push(e$z);else for(var e$e=1<e$U?1:0,e$v=1<e$I?1:0;e$v<e$I;e$v++)for(var e$c=e$r.parts[e$v],e$S=(e$f=e$c.bounds,e$e);e$S<e$U;e$S++){var e$z,e$A=e$W.parts[e$S],e$J=e$A.bounds;e$f.min.x>e$J.max.x||e$f.max.x<e$J.min.x||e$f.max.y<e$J.min.y||e$f.min.y>e$J.max.y||(e$z=e$o(e$c,e$A,e$y))&&e$t.push(e$z)}}}}return e$t},e$a.canCollide=function(e$D,e$m){return e$D.group===e$m.group&&0!==e$D.group?0<e$D.group:0!=(e$D.mask&e$m.category)&&0!=(e$m.mask&e$D.category)},e$a._compareBoundsX=function(e$D,e$m){return e$D.bounds.min.x-e$m.bounds.min.x},e$a.worldBoundsLimit=function(e$D,e$m){if(e$D.worldBounds&&(e$D.bounds.max.x<e$D.worldBounds.min.x||e$D.bounds.min.x>e$D.worldBounds.max.x||e$D.bounds.max.y<e$D.worldBounds.min.y||e$D.bounds.min.y>e$D.worldBounds.max.y)){var e$Y=e$f.dot(e$D.velocity,e$m.collision.normal),e$t=e$f.sub(e$D.velocity,e$f.mult(e$m.collision.normal,e$Y)),e$y=e$Y*(e$D.restitution-1),e$l=e$f.add(e$f.mult(e$m.collision.normal,e$y),e$t),e$E=e$D.position.x-e$D.bounds.min.x,e$B=e$D.bounds.max.x-e$D.position.x,e$o=e$D.position.y-e$D.bounds.min.y,e$r=e$D.bounds.max.y-e$D.position.y;e$l.x=e$l.x<e$D.worldBounds.min.x+e$E?e$D.worldBounds.min.x+e$E+100:e$l.x>e$D.worldBounds.max.x-e$B?e$D.worldBounds.max.x-e$B-100:e$l.x,e$l.y=e$l.y<e$D.worldBounds.min.y+e$o?e$D.worldBounds.min.y+e$o+100:e$l.y>e$D.worldBounds.max.y-e$r?e$D.worldBounds.max.y-e$r-100:e$l.y,Body.translate(e$D,{x:e$l.x,y:e$l.y})}}},function(e$D,e$m,e$Y){var e$B={};e$D.exports=e$B;var e$o=e$Y(0);e$B._registry={},e$B.register=function(e$D){if(e$B.isPlugin(e$D)||e$o.warn("Plugin.register:",e$B.toString(e$D),"does not implement all required fields."),e$D.name in e$B._registry){var e$m=e$B._registry[e$D.name],e$Y=e$B.versionParse(e$D.version).number,e$t=e$B.versionParse(e$m.version).number;e$t<e$Y?(e$o.warn("Plugin.register:",e$B.toString(e$m),"was upgraded to",e$B.toString(e$D)),e$B._registry[e$D.name]=e$D):e$Y<e$t?e$o.warn("Plugin.register:",e$B.toString(e$m),"can not be downgraded to",e$B.toString(e$D)):e$D!==e$m&&e$o.warn("Plugin.register:",e$B.toString(e$D),"is already registered to different plugin object")}else e$B._registry[e$D.name]=e$D;return e$D},e$B.resolve=function(e$D){return e$B._registry[e$B.dependencyParse(e$D).name]},e$B.toString=function(e$D){return"string"==typeof e$D?e$D:(e$D.name||"anonymous")+"@"+(e$D.version||e$D.range||"0.0.0")},e$B.isPlugin=function(e$D){return e$D&&e$D.name&&e$D.version&&e$D.install},e$B.isUsed=function(e$D,e$m){return-1<e$D.used.indexOf(e$m)},e$B.isFor=function(e$D,e$m){var e$Y=e$D.for&&e$B.dependencyParse(e$D.for);return!e$D.for||e$m.name===e$Y.name&&e$B.versionSatisfies(e$m.version,e$Y.range)},e$B.use=function(e$D,e$m){if(e$D.uses=(e$D.uses||[]).concat(e$m||[]),0!==e$D.uses.length){for(var e$Y=e$B.dependencies(e$D),e$t=e$o.topologicalSort(e$Y),e$y=[],e$l=0;e$l<e$t.length;e$l+=1)if(e$t[e$l]!==e$D.name){var e$E=e$B.resolve(e$t[e$l]);e$E?e$B.isUsed(e$D,e$E.name)||(e$B.isFor(e$E,e$D)||(e$o.warn("Plugin.use:",e$B.toString(e$E),"is for",e$E.for,"but installed on",e$B.toString(e$D)+"."),e$E._warned=!0),e$E.install?e$E.install(e$D):(e$o.warn("Plugin.use:",e$B.toString(e$E),"does not specify an install function."),e$E._warned=!0),e$E._warned?(e$y.push("🔶 "+e$B.toString(e$E)),delete e$E._warned):e$y.push("✅ "+e$B.toString(e$E)),e$D.used.push(e$E.name)):e$y.push("❌ "+e$t[e$l])}0<e$y.length&&e$o.info(e$y.join("  "))}else e$o.warn("Plugin.use:",e$B.toString(e$D),"does not specify any dependencies to install.")},e$B.dependencies=function(e$t,e$D){var e$y=e$B.dependencyParse(e$t),e$m=e$y.name;if(!(e$m in(e$D=e$D||{}))){e$t=e$B.resolve(e$t)||e$t,e$D[e$m]=e$o.map(e$t.uses||[],function(e$D){e$B.isPlugin(e$D)&&e$B.register(e$D);var e$m=e$B.dependencyParse(e$D),e$Y=e$B.resolve(e$D);return e$Y&&!e$B.versionSatisfies(e$Y.version,e$m.range)?(e$o.warn("Plugin.dependencies:",e$B.toString(e$Y),"does not satisfy",e$B.toString(e$m),"used by",e$B.toString(e$y)+"."),e$Y._warned=!0,e$t._warned=!0):e$Y||(e$o.warn("Plugin.dependencies:",e$B.toString(e$D),"used by",e$B.toString(e$y),"could not be resolved."),e$t._warned=!0),e$m.name});for(var e$Y=0;e$Y<e$D[e$m].length;e$Y+=1)e$B.dependencies(e$D[e$m][e$Y],e$D);return e$D}},e$B.dependencyParse=function(e$D){return e$o.isString(e$D)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(e$D)||e$o.warn("Plugin.dependencyParse:",e$D,"is not a valid dependency string."),{name:e$D.split("@")[0],range:e$D.split("@")[1]||"*"}):{name:e$D.name,range:e$D.range||e$D.version}},e$B.versionParse=function(e$D){var e$m=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;e$m.test(e$D)||e$o.warn("Plugin.versionParse:",e$D,"is not a valid version or range.");var e$Y=e$m.exec(e$D),e$t=Number(e$Y[4]),e$y=Number(e$Y[5]),e$l=Number(e$Y[6]);return{isRange:Boolean(e$Y[1]||e$Y[2]),version:e$Y[3],range:e$D,operator:e$Y[1]||e$Y[2]||"",major:e$t,minor:e$y,patch:e$l,parts:[e$t,e$y,e$l],prerelease:e$Y[7],number:1e8*e$t+1e4*e$y+e$l}},e$B.versionSatisfies=function(e$D,e$m){e$m=e$m||"*";var e$Y=e$B.versionParse(e$m),e$t=e$B.versionParse(e$D);if(e$Y.isRange){if("*"===e$Y.operator||"*"===e$D)return!0;if(">"===e$Y.operator)return e$t.number>e$Y.number;if(">="===e$Y.operator)return e$t.number>=e$Y.number;if("~"===e$Y.operator)return e$t.major===e$Y.major&&e$t.minor===e$Y.minor&&e$t.patch>=e$Y.patch;if("^"===e$Y.operator)return 0<e$Y.major?e$t.major===e$Y.major&&e$t.number>=e$Y.number:0<e$Y.minor?e$t.minor===e$Y.minor&&e$t.patch>=e$Y.patch:e$t.patch===e$Y.patch}return e$D===e$m||"*"===e$D}},function(e$D,e$m,e$Y){var e$z={};e$D.exports=e$z;var e$A=e$Y(0),e$J=e$Y(5),e$a=e$Y(1),e$p=e$Y(4),e$F=e$Y(2),e$s=e$Y(13);!function(){e$z._goodFps=30,e$z._goodDelta=1e3/60,e$z.create=function(e$D){var e$m={controller:e$z,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e$D.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},e$Y=e$A.extend(e$m,e$D);return e$Y.canvas&&(e$Y.canvas.width=e$Y.options.width||e$Y.canvas.width,e$Y.canvas.height=e$Y.options.height||e$Y.canvas.height),e$Y.mouse=e$D.mouse,e$Y.engine=e$D.engine,e$Y.canvas=e$Y.canvas||e$t(e$Y.options.width,e$Y.options.height),e$Y.context=e$Y.canvas.getContext("2d"),e$Y.textures={},e$Y.bounds=e$Y.bounds||{min:{x:0,y:0},max:{x:e$Y.canvas.width,y:e$Y.canvas.height}},e$Y.options.showBroadphase=!1,1!==e$Y.options.pixelRatio&&e$z.setPixelRatio(e$Y,e$Y.options.pixelRatio),e$A.isElement(e$Y.element)?e$Y.element.appendChild(e$Y.canvas):e$Y.canvas.parentNode||e$A.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),e$Y},e$z.run=function(e$D){Laya.timer.clear(this,e$z.loop),Laya.timer.frameLoop(1,this,e$z.loop,[e$D])},e$z.loop=function(e$D){var e$m=e$A.now();e$Y(e$D,e$m),e$z.world(e$D,e$m),(e$D.options.showStats||e$D.options.showDebug)&&e$z.stats(e$D,e$D.context,e$m),(e$D.options.showPerformance||e$D.options.showDebug)&&e$z.performance(e$D,e$D.context,e$m)},e$z.stop=function(e$D){Laya.timer.clear(this,e$z.loop)},e$z.setPixelRatio=function(e$D,e$m){var e$Y=e$D.options,e$t=e$D.canvas;"auto"===e$m&&(e$m=e$y(e$t)),e$Y.pixelRatio=e$m,e$t.setAttribute("data-pixel-ratio",e$m),e$t.width=e$Y.width*e$m,e$t.height=e$Y.height*e$m,e$t.style.width=e$Y.width+"px",e$t.style.height=e$Y.height+"px"},e$z.lookAt=function(e$D,e$m,e$Y,e$t){e$t=void 0===e$t||e$t,e$m=e$A.isArray(e$m)?e$m:[e$m],e$Y=e$Y||{x:0,y:0};for(var e$y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},e$l=0;e$l<e$m.length;e$l+=1){var e$E=e$m[e$l],e$B=e$E.bounds?e$E.bounds.min:e$E.min||e$E.position||e$E,e$o=e$E.bounds?e$E.bounds.max:e$E.max||e$E.position||e$E;e$B&&e$o&&(e$B.x<e$y.min.x&&(e$y.min.x=e$B.x),e$o.x>e$y.max.x&&(e$y.max.x=e$o.x),e$B.y<e$y.min.y&&(e$y.min.y=e$B.y),e$o.y>e$y.max.y&&(e$y.max.y=e$o.y))}var e$r=e$y.max.x-e$y.min.x+2*e$Y.x,e$f=e$y.max.y-e$y.min.y+2*e$Y.y,e$_=e$D.canvas.height,e$i=e$D.canvas.width/e$_,e$R=e$r/e$f,e$G=1,e$I=1;e$i<e$R?e$I=e$R/e$i:e$G=e$i/e$R,e$D.options.hasBounds=!0,e$D.bounds.min.x=e$y.min.x,e$D.bounds.max.x=e$y.min.x+e$r*e$G,e$D.bounds.min.y=e$y.min.y,e$D.bounds.max.y=e$y.min.y+e$f*e$I,e$t&&(e$D.bounds.min.x+=.5*e$r-e$r*e$G*.5,e$D.bounds.max.x+=.5*e$r-e$r*e$G*.5,e$D.bounds.min.y+=.5*e$f-e$f*e$I*.5,e$D.bounds.max.y+=.5*e$f-e$f*e$I*.5),e$D.bounds.min.x-=e$Y.x,e$D.bounds.max.x-=e$Y.x,e$D.bounds.min.y-=e$Y.y,e$D.bounds.max.y-=e$Y.y,e$D.mouse&&(e$s.setScale(e$D.mouse,{x:(e$D.bounds.max.x-e$D.bounds.min.x)/e$D.canvas.width,y:(e$D.bounds.max.y-e$D.bounds.min.y)/e$D.canvas.height}),e$s.setOffset(e$D.mouse,e$D.bounds.min))},e$z.startViewTransform=function(e$D){var e$m=e$D.bounds.max.x-e$D.bounds.min.x,e$Y=e$D.bounds.max.y-e$D.bounds.min.y,e$t=e$m/e$D.options.width,e$y=e$Y/e$D.options.height;e$D.context.setTransform(e$D.options.pixelRatio/e$t,0,0,e$D.options.pixelRatio/e$y,0,0),e$D.context.translate(-e$D.bounds.min.x,-e$D.bounds.min.y)},e$z.endViewTransform=function(e$D){e$D.context.setTransform(e$D.options.pixelRatio,0,0,e$D.options.pixelRatio,0,0)},e$z.world=function(e$D,e$m){var e$Y,e$t=e$A.now(),e$y=e$D.engine,e$l=e$y.world,e$E=e$D.canvas,e$B=e$D.context,e$o=e$D.options,e$r=e$D.timing,e$f=e$J.allBodies(e$l),e$_=e$J.allConstraints(e$l),e$i=e$o.wireframes?e$o.wireframeBackground:e$o.background,e$R=[],e$G=[],e$I={timestamp:e$y.timing.timestamp};if(e$p.trigger(e$D,"beforeRender",e$I),e$D.currentBackground!==e$i&&e$S(e$D,e$i),e$B.globalCompositeOperation="source-in",e$B.fillStyle="transparent",e$B.fillRect(0,0,e$E.width,e$E.height),e$B.globalCompositeOperation="source-over",e$o.hasBounds){for(e$Y=0;e$Y<e$f.length;e$Y++){var e$w=e$f[e$Y];e$a.overlaps(e$w.bounds,e$D.bounds)&&e$R.push(e$w)}for(e$Y=0;e$Y<e$_.length;e$Y++){var e$W=e$_[e$Y],e$U=e$W.bodyA,e$e=e$W.bodyB,e$v=e$W.pointA,e$c=e$W.pointB;e$U&&(e$v=e$F.add(e$U.position,e$W.pointA)),e$e&&(e$c=e$F.add(e$e.position,e$W.pointB)),e$v&&e$c&&((e$a.contains(e$D.bounds,e$v)||e$a.contains(e$D.bounds,e$c))&&e$G.push(e$W))}e$z.startViewTransform(e$D),e$D.mouse&&(e$s.setScale(e$D.mouse,{x:(e$D.bounds.max.x-e$D.bounds.min.x)/e$D.options.width,y:(e$D.bounds.max.y-e$D.bounds.min.y)/e$D.options.height}),e$s.setOffset(e$D.mouse,e$D.bounds.min))}else e$G=e$_,e$R=e$f,1!==e$D.options.pixelRatio&&e$D.context.setTransform(e$D.options.pixelRatio,0,0,e$D.options.pixelRatio,0,0);!e$o.wireframes||e$y.enableSleeping&&e$o.showSleeping?e$z.bodies(e$D,e$R,e$B):(e$o.showConvexHulls&&e$z.bodyConvexHulls(e$D,e$R,e$B),e$z.bodyWireframes(e$D,e$R,e$B)),e$o.showBounds&&e$z.bodyBounds(e$D,e$R,e$B),(e$o.showAxes||e$o.showAngleIndicator)&&e$z.bodyAxes(e$D,e$R,e$B),e$o.showPositions&&e$z.bodyPositions(e$D,e$R,e$B),e$o.showVelocity&&e$z.bodyVelocity(e$D,e$R,e$B),e$o.showIds&&e$z.bodyIds(e$D,e$R,e$B),e$o.showSeparations&&e$z.separations(e$D,e$y.pairs.list,e$B),e$o.showCollisions&&e$z.collisions(e$D,e$y.pairs.list,e$B),e$o.showVertexNumbers&&e$z.vertexNumbers(e$D,e$R,e$B),e$o.showMousePosition&&e$z.mousePosition(e$D,e$D.mouse,e$B),e$z.constraints(e$G,e$B),e$o.hasBounds&&e$z.endViewTransform(e$D),e$p.trigger(e$D,"afterRender",e$I),e$r.lastElapsed=e$A.now()-e$t},e$z.stats=function(e$D,e$m,e$Y){for(var e$t=e$D.engine,e$y=e$t.world,e$l=e$J.allBodies(e$y),e$E=0,e$B=0,e$o=0;e$o<e$l.length;e$o+=1)e$E+=e$l[e$o].parts.length;var e$r={Part:e$E,Body:e$l.length,Cons:e$J.allConstraints(e$y).length,Comp:e$J.allComposites(e$y).length,Pair:e$t.pairs.list.length};for(var e$f in e$m.fillStyle="#0e0f19",e$m.fillRect(e$B,0,302.5,44),e$m.font="12px Arial",e$m.textBaseline="top",e$m.textAlign="right",e$r){var e$_=e$r[e$f];e$m.fillStyle="#aaa",e$m.fillText(e$f,e$B+55,8),e$m.fillStyle="#eee",e$m.fillText(e$_,e$B+55,26),e$B+=55}},e$z.performance=function(e$D,e$m){var e$Y=e$D.engine,e$t=e$D.timing,e$y=e$t.deltaHistory,e$l=e$t.elapsedHistory,e$E=e$t.timestampElapsedHistory,e$B=e$t.engineDeltaHistory,e$o=e$t.engineElapsedHistory,e$r=e$Y.timing.lastDelta,e$f=e$w(e$y),e$_=e$w(e$l),e$i=e$w(e$B),e$R=e$w(e$o),e$G=e$w(e$E)/e$f||0,e$I=1e3/e$f||0;e$m.fillStyle="#0e0f19",e$m.fillRect(0,50,370,34),e$z.status(e$m,10,69,60,4,e$y.length,Math.round(e$I)+" fps",e$I/e$z._goodFps,function(e$D){return e$y[e$D]/e$f-1}),e$z.status(e$m,82,69,60,4,e$B.length,e$r.toFixed(2)+" dt",e$z._goodDelta/e$r,function(e$D){return e$B[e$D]/e$i-1}),e$z.status(e$m,154,69,60,4,e$o.length,e$R.toFixed(2)+" ut",1-e$R/e$z._goodFps,function(e$D){return e$o[e$D]/e$R-1}),e$z.status(e$m,226,69,60,4,e$l.length,e$_.toFixed(2)+" rt",1-e$_/e$z._goodFps,function(e$D){return e$l[e$D]/e$_-1}),e$z.status(e$m,298,69,60,4,e$E.length,e$G.toFixed(2)+" x",e$G*e$G*e$G,function(e$D){return(e$E[e$D]/e$y[e$D]/e$G||0)-1})},e$z.status=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o){e$D.strokeStyle="#888",e$D.fillStyle="#444",e$D.lineWidth=1,e$D.fillRect(e$m,e$Y+7,e$t,1),e$D.beginPath(),e$D.moveTo(e$m,e$Y+7-e$y*e$A.clamp(.4*e$o(0),-2,2));for(var e$r=0;e$r<e$t;e$r+=1)e$D.lineTo(e$m+e$r,e$Y+7-(e$r<e$l?e$y*e$A.clamp(.4*e$o(e$r),-2,2):0));e$D.stroke(),e$D.fillStyle="hsl("+e$A.clamp(25+95*e$B,0,120)+",100%,60%)",e$D.fillRect(e$m,e$Y-7,4,4),e$D.font="12px Arial",e$D.textBaseline="middle",e$D.textAlign="right",e$D.fillStyle="#eee",e$D.fillText(e$E,e$m+e$t,e$Y-5)},e$z.constraints=function(e$D,e$m){for(var e$Y=e$m,e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t];if(e$y.render.visible&&e$y.pointA&&e$y.pointB){var e$l,e$E,e$B=e$y.bodyA,e$o=e$y.bodyB;if(e$l=e$B?e$F.add(e$B.position,e$y.pointA):e$y.pointA,"pin"===e$y.render.type)e$Y.beginPath(),e$Y.arc(e$l.x,e$l.y,3,0,2*Math.PI),e$Y.closePath();else{if(e$E=e$o?e$F.add(e$o.position,e$y.pointB):e$y.pointB,e$Y.beginPath(),e$Y.moveTo(e$l.x,e$l.y),"spring"===e$y.render.type)for(var e$r,e$f=e$F.sub(e$E,e$l),e$_=e$F.perp(e$F.normalise(e$f)),e$i=Math.ceil(e$A.clamp(e$y.length/5,12,20)),e$R=1;e$R<e$i;e$R+=1)e$r=e$R%2==0?1:-1,e$Y.lineTo(e$l.x+e$f.x*(e$R/e$i)+e$_.x*e$r*4,e$l.y+e$f.y*(e$R/e$i)+e$_.y*e$r*4);e$Y.lineTo(e$E.x,e$E.y)}e$y.render.lineWidth&&(e$Y.lineWidth=e$y.render.lineWidth,e$Y.strokeStyle=e$y.render.strokeStyle,e$Y.stroke()),e$y.render.anchors&&(e$Y.fillStyle=e$y.render.strokeStyle,e$Y.beginPath(),e$Y.arc(e$l.x,e$l.y,3,0,2*Math.PI),e$Y.arc(e$E.x,e$E.y,3,0,2*Math.PI),e$Y.closePath(),e$Y.fill())}}},e$z.bodies=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$Y,e$o=(e$D.engine,e$D.options),e$r=e$o.showInternalEdges||!e$o.wireframes;for(e$l=0;e$l<e$m.length;e$l++)if((e$t=e$m[e$l]).render.visible)for(e$E=1<e$t.parts.length?1:0;e$E<e$t.parts.length;e$E++)if((e$y=e$t.parts[e$E]).render.visible){if(e$o.showSleeping&&e$t.isSleeping?e$B.globalAlpha=.5*e$y.render.opacity:1!==e$y.render.opacity&&(e$B.globalAlpha=e$y.render.opacity),e$y.render.sprite&&e$y.render.sprite.texture&&!e$o.wireframes){var e$f=e$y.render.sprite,e$_=e$R(e$D,e$f.texture);e$B.translate(e$y.position.x,e$y.position.y),e$B.rotate(e$y.angle),e$B.drawImage(e$_,e$_.width*-e$f.xOffset*e$f.xScale,e$_.height*-e$f.yOffset*e$f.yScale,e$_.width*e$f.xScale,e$_.height*e$f.yScale),e$B.rotate(-e$y.angle),e$B.translate(-e$y.position.x,-e$y.position.y)}else{if(e$y.circleRadius)e$B.beginPath(),e$B.arc(e$y.position.x,e$y.position.y,e$y.circleRadius,0,2*Math.PI);else{e$B.beginPath(),e$B.moveTo(e$y.vertices[0].x,e$y.vertices[0].y);for(var e$i=1;e$i<e$y.vertices.length;e$i++)!e$y.vertices[e$i-1].isInternal||e$r?e$B.lineTo(e$y.vertices[e$i].x,e$y.vertices[e$i].y):e$B.moveTo(e$y.vertices[e$i].x,e$y.vertices[e$i].y),e$y.vertices[e$i].isInternal&&!e$r&&e$B.moveTo(e$y.vertices[(e$i+1)%e$y.vertices.length].x,e$y.vertices[(e$i+1)%e$y.vertices.length].y);e$B.lineTo(e$y.vertices[0].x,e$y.vertices[0].y),e$B.closePath()}e$o.wireframes?(e$B.lineWidth=1,e$B.strokeStyle="#bbb",e$B.stroke()):(e$B.fillStyle=e$y.render.fillStyle,e$y.render.lineWidth&&(e$B.lineWidth=e$y.render.lineWidth,e$B.strokeStyle=e$y.render.strokeStyle,e$B.stroke()),e$B.fill())}e$B.globalAlpha=1}},e$z.bodyWireframes=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B,e$o=e$Y,e$r=e$D.options.showInternalEdges;for(e$o.beginPath(),e$l=0;e$l<e$m.length;e$l++)if((e$t=e$m[e$l]).render.visible)for(e$B=1<e$t.parts.length?1:0;e$B<e$t.parts.length;e$B++){for(e$y=e$t.parts[e$B],e$o.moveTo(e$y.vertices[0].x,e$y.vertices[0].y),e$E=1;e$E<e$y.vertices.length;e$E++)!e$y.vertices[e$E-1].isInternal||e$r?e$o.lineTo(e$y.vertices[e$E].x,e$y.vertices[e$E].y):e$o.moveTo(e$y.vertices[e$E].x,e$y.vertices[e$E].y),e$y.vertices[e$E].isInternal&&!e$r&&e$o.moveTo(e$y.vertices[(e$E+1)%e$y.vertices.length].x,e$y.vertices[(e$E+1)%e$y.vertices.length].y);e$o.lineTo(e$y.vertices[0].x,e$y.vertices[0].y)}e$o.lineWidth=1,e$o.strokeStyle="#bbb",e$o.stroke()},e$z.bodyConvexHulls=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E=e$Y;for(e$E.beginPath(),e$y=0;e$y<e$m.length;e$y++)if((e$t=e$m[e$y]).render.visible&&1!==e$t.parts.length){for(e$E.moveTo(e$t.vertices[0].x,e$t.vertices[0].y),e$l=1;e$l<e$t.vertices.length;e$l++)e$E.lineTo(e$t.vertices[e$l].x,e$t.vertices[e$l].y);e$E.lineTo(e$t.vertices[0].x,e$t.vertices[0].y)}e$E.lineWidth=1,e$E.strokeStyle="rgba(255,255,255,0.2)",e$E.stroke()},e$z.vertexNumbers=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E=e$Y;for(e$t=0;e$t<e$m.length;e$t++){var e$B=e$m[e$t].parts;for(e$l=1<e$B.length?1:0;e$l<e$B.length;e$l++){var e$o=e$B[e$l];for(e$y=0;e$y<e$o.vertices.length;e$y++)e$E.fillStyle="rgba(255,255,255,0.2)",e$E.fillText(e$t+"_"+e$y,e$o.position.x+.8*(e$o.vertices[e$y].x-e$o.position.x),e$o.position.y+.8*(e$o.vertices[e$y].y-e$o.position.y))}}},e$z.mousePosition=function(e$D,e$m,e$Y){var e$t=e$Y;e$t.fillStyle="rgba(255,255,255,0.8)",e$t.fillText(e$m.position.x+"  "+e$m.position.y,e$m.position.x+5,e$m.position.y-5)},e$z.bodyBounds=function(e$D,e$m,e$Y){var e$t=e$Y,e$y=(e$D.engine,e$D.options);e$t.beginPath();for(var e$l=0;e$l<e$m.length;e$l++){if(e$m[e$l].render.visible)for(var e$E=e$m[e$l].parts,e$B=1<e$E.length?1:0;e$B<e$E.length;e$B++){var e$o=e$E[e$B];e$t.rect(e$o.bounds.min.x,e$o.bounds.min.y,e$o.bounds.max.x-e$o.bounds.min.x,e$o.bounds.max.y-e$o.bounds.min.y)}}e$y.wireframes?e$t.strokeStyle="rgba(255,255,255,0.08)":e$t.strokeStyle="rgba(0,0,0,0.1)",e$t.lineWidth=1,e$t.stroke()},e$z.bodyAxes=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$Y,e$o=(e$D.engine,e$D.options);for(e$B.beginPath(),e$y=0;e$y<e$m.length;e$y++){var e$r=e$m[e$y],e$f=e$r.parts;if(e$r.render.visible)if(e$o.showAxes)for(e$l=1<e$f.length?1:0;e$l<e$f.length;e$l++)for(e$t=e$f[e$l],e$E=0;e$E<e$t.axes.length;e$E++){var e$_=e$t.axes[e$E];e$B.moveTo(e$t.position.x,e$t.position.y),e$B.lineTo(e$t.position.x+20*e$_.x,e$t.position.y+20*e$_.y)}else for(e$l=1<e$f.length?1:0;e$l<e$f.length;e$l++)for(e$t=e$f[e$l],e$E=0;e$E<e$t.axes.length;e$E++)e$B.moveTo(e$t.position.x,e$t.position.y),e$B.lineTo((e$t.vertices[0].x+e$t.vertices[e$t.vertices.length-1].x)/2,(e$t.vertices[0].y+e$t.vertices[e$t.vertices.length-1].y)/2)}e$o.wireframes?(e$B.strokeStyle="indianred",e$B.lineWidth=1):(e$B.strokeStyle="rgba(255, 255, 255, 0.4)",e$B.globalCompositeOperation="overlay",e$B.lineWidth=2),e$B.stroke(),e$B.globalCompositeOperation="source-over"},e$z.bodyPositions=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$Y,e$o=(e$D.engine,e$D.options);for(e$B.beginPath(),e$l=0;e$l<e$m.length;e$l++)if((e$t=e$m[e$l]).render.visible)for(e$E=0;e$E<e$t.parts.length;e$E++)e$y=e$t.parts[e$E],e$B.arc(e$y.position.x,e$y.position.y,3,0,2*Math.PI,!1),e$B.closePath();for(e$o.wireframes?e$B.fillStyle="indianred":e$B.fillStyle="rgba(0,0,0,0.5)",e$B.fill(),e$B.beginPath(),e$l=0;e$l<e$m.length;e$l++)(e$t=e$m[e$l]).render.visible&&(e$B.arc(e$t.positionPrev.x,e$t.positionPrev.y,2,0,2*Math.PI,!1),e$B.closePath());e$B.fillStyle="rgba(255,165,0,0.8)",e$B.fill()},e$z.bodyVelocity=function(e$D,e$m,e$Y){var e$t=e$Y;e$t.beginPath();for(var e$y=0;e$y<e$m.length;e$y++){var e$l=e$m[e$y];e$l.render.visible&&(e$t.moveTo(e$l.position.x,e$l.position.y),e$t.lineTo(e$l.position.x+2*(e$l.position.x-e$l.positionPrev.x),e$l.position.y+2*(e$l.position.y-e$l.positionPrev.y)))}e$t.lineWidth=3,e$t.strokeStyle="cornflowerblue",e$t.stroke()},e$z.bodyIds=function(e$D,e$m,e$Y){var e$t,e$y,e$l=e$Y;for(e$t=0;e$t<e$m.length;e$t++)if(e$m[e$t].render.visible){var e$E=e$m[e$t].parts;for(e$y=1<e$E.length?1:0;e$y<e$E.length;e$y++){var e$B=e$E[e$y];e$l.font="12px Arial",e$l.fillStyle="rgba(255,255,255,0.5)",e$l.fillText(e$B.id,e$B.position.x+10,e$B.position.y-10)}}},e$z.collisions=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$Y,e$o=e$D.options;for(e$B.beginPath(),e$l=0;e$l<e$m.length;e$l++)if((e$t=e$m[e$l]).isActive)for(e$y=e$t.collision,e$E=0;e$E<e$t.activeContacts.length;e$E++){var e$r=e$t.activeContacts[e$E].vertex;e$B.rect(e$r.x-1.5,e$r.y-1.5,3.5,3.5)}for(e$o.wireframes?e$B.fillStyle="rgba(255,255,255,0.7)":e$B.fillStyle="orange",e$B.fill(),e$B.beginPath(),e$l=0;e$l<e$m.length;e$l++)if((e$t=e$m[e$l]).isActive&&(e$y=e$t.collision,0<e$t.activeContacts.length)){var e$f=e$t.activeContacts[0].vertex.x,e$_=e$t.activeContacts[0].vertex.y;2===e$t.activeContacts.length&&(e$f=(e$t.activeContacts[0].vertex.x+e$t.activeContacts[1].vertex.x)/2,e$_=(e$t.activeContacts[0].vertex.y+e$t.activeContacts[1].vertex.y)/2),e$y.bodyB===e$y.supports[0].body||!0===e$y.bodyA.isStatic?e$B.moveTo(e$f-8*e$y.normal.x,e$_-8*e$y.normal.y):e$B.moveTo(e$f+8*e$y.normal.x,e$_+8*e$y.normal.y),e$B.lineTo(e$f,e$_)}e$o.wireframes?e$B.strokeStyle="rgba(255,165,0,0.7)":e$B.strokeStyle="orange",e$B.lineWidth=1,e$B.stroke()},e$z.separations=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B,e$o=e$Y,e$r=e$D.options;for(e$o.beginPath(),e$B=0;e$B<e$m.length;e$B++)if((e$t=e$m[e$B]).isActive){e$l=(e$y=e$t.collision).bodyA;var e$f=1;(e$E=e$y.bodyB).isStatic||e$l.isStatic||(e$f=.5),e$E.isStatic&&(e$f=0),e$o.moveTo(e$E.position.x,e$E.position.y),e$o.lineTo(e$E.position.x-e$y.penetration.x*e$f,e$E.position.y-e$y.penetration.y*e$f),e$f=1,e$E.isStatic||e$l.isStatic||(e$f=.5),e$l.isStatic&&(e$f=0),e$o.moveTo(e$l.position.x,e$l.position.y),e$o.lineTo(e$l.position.x+e$y.penetration.x*e$f,e$l.position.y+e$y.penetration.y*e$f)}e$r.wireframes?e$o.strokeStyle="rgba(255,165,0,0.5)":e$o.strokeStyle="orange",e$o.stroke()},e$z.inspector=function(e$D,e$m){e$D.engine;var e$Y,e$t=e$D.selected,e$y=e$D.render,e$l=e$y.options;if(e$l.hasBounds){var e$E=e$y.bounds.max.x-e$y.bounds.min.x,e$B=e$y.bounds.max.y-e$y.bounds.min.y,e$o=e$E/e$y.options.width,e$r=e$B/e$y.options.height;e$m.scale(1/e$o,1/e$r),e$m.translate(-e$y.bounds.min.x,-e$y.bounds.min.y)}for(var e$f=0;e$f<e$t.length;e$f++){var e$_=e$t[e$f].data;switch(e$m.translate(.5,.5),e$m.lineWidth=1,e$m.strokeStyle="rgba(255,165,0,0.9)",e$m.setLineDash([1,2]),e$_.type){case"body":e$Y=e$_.bounds,e$m.beginPath(),e$m.rect(Math.floor(e$Y.min.x-3),Math.floor(e$Y.min.y-3),Math.floor(e$Y.max.x-e$Y.min.x+6),Math.floor(e$Y.max.y-e$Y.min.y+6)),e$m.closePath(),e$m.stroke();break;case"constraint":var e$i=e$_.pointA;e$_.bodyA&&(e$i=e$_.pointB),e$m.beginPath(),e$m.arc(e$i.x,e$i.y,10,0,2*Math.PI),e$m.closePath(),e$m.stroke()}e$m.setLineDash([]),e$m.translate(-.5,-.5)}null!==e$D.selectStart&&(e$m.translate(.5,.5),e$m.lineWidth=1,e$m.strokeStyle="rgba(255,165,0,0.6)",e$m.fillStyle="rgba(255,165,0,0.1)",e$Y=e$D.selectBounds,e$m.beginPath(),e$m.rect(Math.floor(e$Y.min.x),Math.floor(e$Y.min.y),Math.floor(e$Y.max.x-e$Y.min.x),Math.floor(e$Y.max.y-e$Y.min.y)),e$m.closePath(),e$m.stroke(),e$m.fill(),e$m.translate(-.5,-.5)),e$l.hasBounds&&e$m.setTransform(1,0,0,1,0,0)};var e$Y=function(e$D,e$m){var e$Y=e$D.engine,e$t=e$D.timing,e$y=e$t.historySize,e$l=e$Y.timing.timestamp;e$t.delta=e$m-e$t.lastTime||e$z._goodDelta,e$t.lastTime=e$m,e$t.timestampElapsed=e$l-e$t.lastTimestamp||0,e$t.lastTimestamp=e$l,e$t.deltaHistory.unshift(e$t.delta),e$t.deltaHistory.length=Math.min(e$t.deltaHistory.length,e$y),e$t.engineDeltaHistory.unshift(e$Y.timing.lastDelta),e$t.engineDeltaHistory.length=Math.min(e$t.engineDeltaHistory.length,e$y),e$t.timestampElapsedHistory.unshift(e$t.timestampElapsed),e$t.timestampElapsedHistory.length=Math.min(e$t.timestampElapsedHistory.length,e$y),e$t.engineElapsedHistory.unshift(e$Y.timing.lastElapsed),e$t.engineElapsedHistory.length=Math.min(e$t.engineElapsedHistory.length,e$y),e$t.elapsedHistory.unshift(e$t.lastElapsed),e$t.elapsedHistory.length=Math.min(e$t.elapsedHistory.length,e$y)},e$w=function(e$D){for(var e$m=0,e$Y=0;e$Y<e$D.length;e$Y+=1)e$m+=e$D[e$Y];return e$m/e$D.length||0},e$t=function(e$D,e$m){var e$Y=document.createElement("canvas");return e$Y.width=e$D,e$Y.height=e$m,e$Y.oncontextmenu=function(){return!1},e$Y.onselectstart=function(){return!1},e$Y},e$y=function(e$D){var e$m=e$D.getContext("2d");return(window.devicePixelRatio||1)/(e$m.webkitBackingStorePixelRatio||e$m.mozBackingStorePixelRatio||e$m.msBackingStorePixelRatio||e$m.oBackingStorePixelRatio||e$m.backingStorePixelRatio||1)},e$R=function(e$D,e$m){var e$Y=e$D.textures[e$m];return e$Y||((e$Y=e$D.textures[e$m]=new Image).src=e$m,e$Y)},e$S=function(e$D,e$m){var e$Y=e$m;/(jpg|gif|png)$/.test(e$m)&&(e$Y="url("+e$m+")"),e$D.canvas.style.background=e$Y,e$D.canvas.style.backgroundSize="contain",e$D.currentBackground=e$m}}()},function(e$D,e$m){var e$Y={};(e$D.exports=e$Y).create=function(e$D){return{vertex:e$D,normalImpulse:0,tangentImpulse:0}}},function(e$D,e$m,e$Y){var e$I={};e$D.exports=e$I;var e$w=e$Y(7),e$W=e$Y(19),e$U=e$Y(14),e$e=e$Y(20),e$v=e$Y(4),e$c=e$Y(5),e$S=e$Y(10),e$z=e$Y(0),e$B=e$Y(6);e$Y(2);e$I.create=function(e$D){e$D=e$D||{};var e$m=e$z.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},e$D);return e$m.world=e$D.world||e$c.create({label:"World"}),e$m.pairs=e$D.pairs||e$e.create(),e$m.detector=e$D.detector||e$U.create(),e$m.grid={buckets:[]},e$m.world.gravity=e$m.gravity,e$m.broadphase=e$m.grid,e$m.metrics={},e$m},e$I.update=function(e$D,e$m,e$Y){var e$t=e$z.now();e$m=e$m||1e3/60,e$Y=e$Y||1;var e$y=e$D.world,e$l=e$D.detector,e$E=e$D.pairs,e$B=e$D.timing,e$o=e$B.timestamp;e$B.timestamp+=e$m*e$B.timeScale,e$B.lastDelta=e$m*e$B.timeScale;var e$r={timestamp:e$B.timestamp};e$v.trigger(e$D,"beforeUpdate",e$r);var e$f=e$c.allBodies(e$y),e$_=e$c.allConstraints(e$y);for(e$y.isModified&&e$U.setBodies(e$l,e$f),e$y.isModified&&e$c.setModified(e$y,!1,!1,!0),e$D.enableSleeping&&e$w.update(e$f,e$B.timeScale),e$I._bodiesApplyGravity(e$f,e$D.gravity),e$I._bodiesUpdate(e$f,e$m,e$B.timeScale,e$Y,e$y.bounds),e$S.preSolveAll(e$f),e$R=0;e$R<e$D.constraintIterations;e$R++)e$S.solveAll(e$_,e$B.timeScale);e$S.postSolveAll(e$f),e$l.pairs=e$D.pairs;var e$i=e$U.collisions(e$l);for(e$e.update(e$E,e$i,e$o),e$D.enableSleeping&&e$w.afterCollisions(e$E.list,e$B.timeScale),0<e$E.collisionStart.length&&e$v.trigger(e$D,"collisionStart",{pairs:e$E.collisionStart}),e$W.preSolvePosition(e$E.list),e$R=0;e$R<e$D.positionIterations;e$R++)e$W.solvePosition(e$E.list,e$B.timeScale);e$W.postSolvePosition(e$f);for(var e$R=0;e$R<e$E.list.length;e$R++){var e$G=e$E.list[e$R];e$G.isActive&&0<e$G.collision.depth&&(e$U.worldBoundsLimit(e$G.bodyA,e$G),e$U.worldBoundsLimit(e$G.bodyB,e$G))}for(e$S.preSolveAll(e$f),e$R=0;e$R<e$D.constraintIterations;e$R++)e$S.solveAll(e$_,e$B.timeScale);for(e$S.postSolveAll(e$f),e$W.preSolveVelocity(e$E.list),e$R=0;e$R<e$D.velocityIterations;e$R++)e$W.solveVelocity(e$E.list,e$B.timeScale);return 0<e$E.collisionActive.length&&e$v.trigger(e$D,"collisionActive",{pairs:e$E.collisionActive}),0<e$E.collisionEnd.length&&e$v.trigger(e$D,"collisionEnd",{pairs:e$E.collisionEnd}),e$I._bodiesClearForces(e$f),e$v.trigger(e$D,"afterUpdate",e$r),e$D.timing.lastElapsed=e$z.now()-e$t,e$D},e$I.merge=function(e$D,e$m){if(e$z.extend(e$D,e$m),e$m.world){e$D.world=e$m.world,e$I.clear(e$D);for(var e$Y=e$c.allBodies(e$D.world),e$t=0;e$t<e$Y.length;e$t++){var e$y=e$Y[e$t];e$w.set(e$y,!1),e$y.id=e$z.nextId()}}},e$I.clear=function(e$D){e$e.clear(e$D.pairs),e$U.clear(e$D.detector)},e$I._bodiesClearForces=function(e$D){for(var e$m=0;e$m<e$D.length;e$m++){var e$Y=e$D[e$m];e$Y.force.x=0,e$Y.force.y=0,e$Y.torque=0}},e$I._bodiesApplyGravity=function(e$D,e$m){var e$Y=void 0!==e$m.scale?e$m.scale:.001;if((0!==e$m.x||0!==e$m.y)&&0!==e$Y)for(var e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t];e$y.isStatic||e$y.isSleeping||(e$y.force.y+=e$y.mass*e$m.y*e$Y,e$y.force.x+=e$y.mass*e$m.x*e$Y)}},e$I._bodiesUpdate=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=0;e$l<e$D.length;e$l++){var e$E=e$D[e$l];e$E.isStatic||e$E.isSleeping||e$B.update(e$E,e$m,e$Y,e$t)}}},function(e$D,e$m,e$Y){var e$Z={};e$D.exports=e$Z;var e$R=e$Y(3),e$G=e$Y(1);e$Z._restingThresh=4,e$Z._restingThreshTangent=6,e$Z._positionDampen=.9,e$Z._positionWarming=.8,e$Z._frictionNormalMultiplier=5,e$Z.preSolvePosition=function(e$D){var e$m,e$Y,e$t,e$y=e$D.length;for(e$m=0;e$m<e$y;e$m++)(e$Y=e$D[e$m]).isActive&&(e$t=e$Y.activeContacts.length,e$Y.collision.parentA.totalContacts+=e$t,e$Y.collision.parentB.totalContacts+=e$t)},e$Z.solvePosition=function(e$D,e$m){var e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f=e$Z._positionDampen,e$_=e$D.length;for(e$Y=0;e$Y<e$_;e$Y++)(e$t=e$D[e$Y]).isActive&&!e$t.isSensor&&(e$l=(e$y=e$t.collision).parentA,e$E=e$y.parentB,e$B=e$y.normal,e$t.separation=e$B.x*(e$E.positionImpulse.x+e$y.penetration.x-e$l.positionImpulse.x)+e$B.y*(e$E.positionImpulse.y+e$y.penetration.y-e$l.positionImpulse.y));for(e$Y=0;e$Y<e$_;e$Y++)(e$t=e$D[e$Y]).isActive&&!e$t.isSensor&&(e$l=(e$y=e$t.collision).parentA,e$E=e$y.parentB,e$B=e$y.normal,e$r=(e$t.separation-e$t.slop)*e$m,(e$l.isStatic||e$E.isStatic)&&(e$r*=2),e$l.isStatic||e$l.isSleeping||(e$o=e$f/e$l.totalContacts,e$l.positionImpulse.x+=e$B.x*e$r*e$o,e$l.positionImpulse.y+=e$B.y*e$r*e$o),e$E.isStatic||e$E.isSleeping||(e$o=e$f/e$E.totalContacts,e$E.positionImpulse.x-=e$B.x*e$r*e$o,e$E.positionImpulse.y-=e$B.y*e$r*e$o))},e$Z.postSolvePosition=function(e$D){for(var e$m=e$Z._positionWarming,e$Y=e$D.length,e$t=e$R.translate,e$y=e$G.update,e$l=0;e$l<e$Y;e$l++){var e$E=e$D[e$l],e$B=e$E.positionImpulse,e$o=e$B.x,e$r=e$B.y,e$f=e$E.velocity;if((e$E.totalContacts=0)!==e$o||0!==e$r){for(var e$_=0;e$_<e$E.parts.length;e$_++){var e$i=e$E.parts[e$_];e$t(e$i.vertices,e$B),e$y(e$i.bounds,e$i.vertices,e$f),e$i.position.x+=e$o,e$i.position.y+=e$r}e$E.positionPrev.x+=e$o,e$E.positionPrev.y+=e$r,e$o*e$f.x+e$r*e$f.y<0?(e$B.x=0,e$B.y=0):(e$B.x*=e$m,e$B.y*=e$m)}}},e$Z.preSolveVelocity=function(e$D){var e$m,e$Y,e$t=e$D.length;for(e$m=0;e$m<e$t;e$m++){var e$y=e$D[e$m];if(e$y.isActive&&!e$y.isSensor){var e$l=e$y.activeContacts,e$E=e$l.length,e$B=e$y.collision,e$o=e$B.parentA,e$r=e$B.parentB,e$f=e$B.normal,e$_=e$B.tangent;for(e$Y=0;e$Y<e$E;e$Y++){var e$i=e$l[e$Y],e$R=e$i.vertex,e$G=e$i.normalImpulse,e$I=e$i.tangentImpulse;if(0!==e$G||0!==e$I){var e$w=e$f.x*e$G+e$_.x*e$I,e$W=e$f.y*e$G+e$_.y*e$I;e$o.isStatic||e$o.isSleeping||(e$o.positionPrev.x+=e$w*e$o.inverseMass,e$o.positionPrev.y+=e$W*e$o.inverseMass,e$o.anglePrev+=e$o.inverseInertia*((e$R.x-e$o.position.x)*e$W-(e$R.y-e$o.position.y)*e$w)),e$r.isStatic||e$r.isSleeping||(e$r.positionPrev.x-=e$w*e$r.inverseMass,e$r.positionPrev.y-=e$W*e$r.inverseMass,e$r.anglePrev-=e$r.inverseInertia*((e$R.x-e$r.position.x)*e$W-(e$R.y-e$r.position.y)*e$w))}}}}},e$Z.solveVelocity=function(e$D,e$m){var e$Y,e$t,e$y,e$l,e$E=e$m*e$m,e$B=e$Z._restingThresh*e$E,e$o=e$Z._frictionNormalMultiplier,e$r=e$Z._restingThreshTangent*e$E,e$f=Number.MAX_VALUE,e$_=e$D.length;for(e$y=0;e$y<e$_;e$y++){var e$i=e$D[e$y];if(e$i.isActive&&!e$i.isSensor){var e$R=e$i.collision,e$G=e$R.parentA,e$I=e$R.parentB,e$w=e$G.velocity,e$W=e$I.velocity,e$U=e$R.normal.x,e$e=e$R.normal.y,e$v=e$R.tangent.x,e$c=e$R.tangent.y,e$S=e$i.activeContacts,e$z=e$S.length,e$A=1/e$z,e$J=e$G.inverseMass+e$I.inverseMass,e$a=e$i.friction*e$i.frictionStatic*e$o*e$E;for(e$w.x=e$G.position.x-e$G.positionPrev.x,e$w.y=e$G.position.y-e$G.positionPrev.y,e$W.x=e$I.position.x-e$I.positionPrev.x,e$W.y=e$I.position.y-e$I.positionPrev.y,e$G.angularVelocity=e$G.angle-e$G.anglePrev,e$I.angularVelocity=e$I.angle-e$I.anglePrev,e$l=0;e$l<e$z;e$l++){var e$p=e$S[e$l],e$F=e$p.vertex,e$s=e$F.x-e$G.position.x,e$Q=e$F.y-e$G.position.y,e$T=e$F.x-e$I.position.x,e$N=e$F.y-e$I.position.y,e$C=e$w.x-e$Q*e$G.angularVelocity,e$O=e$w.y+e$s*e$G.angularVelocity,e$h=e$C-(e$W.x-e$N*e$I.angularVelocity),e$X=e$O-(e$W.y+e$T*e$I.angularVelocity),e$P=e$U*e$h+e$e*e$X,e$u=e$v*e$h+e$c*e$X,e$L=e$i.separation+e$P,e$q=Math.min(e$L,1),e$$=(e$q=e$L<0?0:e$q)*e$a;e$$<e$u||e$$<-e$u?(e$t=0<e$u?e$u:-e$u,(e$Y=e$i.friction*(0<e$u?1:-1)*e$E)<-e$t?e$Y=-e$t:e$t<e$Y&&(e$Y=e$t)):(e$Y=e$u,e$t=e$f);var e$d=e$s*e$e-e$Q*e$U,e$k=e$T*e$e-e$N*e$U,e$M=e$A/(e$J+e$G.inverseInertia*e$d*e$d+e$I.inverseInertia*e$k*e$k),e$n=(1+e$i.restitution)*e$P*e$M;if(e$Y*=e$M,e$B<e$P*e$P&&e$P<0)e$p.normalImpulse=0;else{var e$g=e$p.normalImpulse;e$p.normalImpulse+=e$n,e$p.normalImpulse=Math.min(e$p.normalImpulse,0),e$n=e$p.normalImpulse-e$g}if(e$r<e$u*e$u)e$p.tangentImpulse=0;else{var e$H=e$p.tangentImpulse;e$p.tangentImpulse+=e$Y,e$p.tangentImpulse<-e$t&&(e$p.tangentImpulse=-e$t),e$p.tangentImpulse>e$t&&(e$p.tangentImpulse=e$t),e$Y=e$p.tangentImpulse-e$H}var e$x=e$U*e$n+e$v*e$Y,e$V=e$e*e$n+e$c*e$Y;e$G.isStatic||e$G.isSleeping||(e$G.positionPrev.x+=e$x*e$G.inverseMass,e$G.positionPrev.y+=e$V*e$G.inverseMass,e$G.anglePrev+=(e$s*e$V-e$Q*e$x)*e$G.inverseInertia),e$I.isStatic||e$I.isSleeping||(e$I.positionPrev.x-=e$x*e$I.inverseMass,e$I.positionPrev.y-=e$V*e$I.inverseMass,e$I.anglePrev-=(e$T*e$V-e$N*e$x)*e$I.inverseInertia)}}}}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$I=e$Y(9),e$y=e$Y(0);e$t.create=function(e$D){return e$y.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e$D)},e$t.update=function(e$D,e$m,e$Y){var e$t,e$y,e$l,e$E,e$B=e$D.list,e$o=e$B.length,e$r=e$D.table,e$f=e$m.length,e$_=e$D.collisionStart,e$i=e$D.collisionEnd,e$R=e$D.collisionActive;for(e$_.length=0,e$i.length=0,e$E=e$R.length=0;e$E<e$o;e$E++)e$B[e$E].confirmedActive=!1;for(e$E=0;e$E<e$f;e$E++)(e$l=(e$t=e$m[e$E]).pair)?(e$l.isActive?e$R.push(e$l):e$_.push(e$l),e$I.update(e$l,e$t,e$Y),e$l.confirmedActive=!0):(e$r[(e$l=e$I.create(e$t,e$Y)).id]=e$l,e$_.push(e$l),e$B.push(e$l));var e$G=[];for(e$o=e$B.length,e$E=0;e$E<e$o;e$E++)(e$l=e$B[e$E]).confirmedActive||(e$I.setActive(e$l,!1,e$Y),e$i.push(e$l),e$l.collision.bodyA.isSleeping||e$l.collision.bodyB.isSleeping||e$G.push(e$E));for(e$E=0;e$E<e$G.length;e$E++)e$l=e$B[e$y=e$G[e$E]-e$E],e$B.splice(e$y,1),delete e$r[e$l.id]},e$t.clear=function(e$D){return e$D.table={},e$D.list.length=0,e$D.collisionStart.length=0,e$D.collisionActive.length=0,e$D.collisionEnd.length=0,e$D}},function(e$D,e$m,e$Y){var e$t=e$D.exports=e$Y(22);e$t.Axes=e$Y(11),e$t.Bodies=e$Y(12),e$t.Body=e$Y(6),e$t.Bounds=e$Y(1),e$t.Collision=e$Y(8),e$t.Common=e$Y(0),e$t.Composite=e$Y(5),e$t.Composites=e$Y(23),e$t.Constraint=e$Y(10),e$t.Contact=e$Y(17),e$t.Detector=e$Y(14),e$t.Engine=e$Y(18),e$t.Events=e$Y(4),e$t.Grid=e$Y(24),e$t.Mouse=e$Y(13),e$t.MouseConstraint=e$Y(25),e$t.Pair=e$Y(9),e$t.Pairs=e$Y(20),e$t.Plugin=e$Y(15),e$t.Query=e$Y(26),e$t.Render=e$Y(16),e$t.Resolver=e$Y(19),e$t.Runner=e$Y(27),e$t.SAT=e$Y(28),e$t.Sleeping=e$Y(7),e$t.Svg=e$Y(29),e$t.Vector=e$Y(2),e$t.Vertices=e$Y(3),e$t.World=e$Y(30),e$t.Engine.run=e$t.Runner.run,e$t.Common.deprecated(e$t.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$y=e$Y(15),e$l=e$Y(0);e$t.name="matter-js",e$t.version="0.18.0",e$t.uses=[],e$t.used=[],e$t.use=function(){e$y.use(e$t,Array.prototype.slice.call(arguments))},e$t.before=function(e$D,e$m){return e$D=e$D.replace(/^Matter./,""),e$l.chainPathBefore(e$t,e$D,e$m)},e$t.after=function(e$D,e$m){return e$D=e$D.replace(/^Matter./,""),e$l.chainPathAfter(e$t,e$D,e$m)}},function(e$D,e$m,e$Y){var e$R={};e$D.exports=e$R;var e$U=e$Y(5),e$I=e$Y(10),e$w=e$Y(0),e$e=e$Y(6),e$G=e$Y(12),e$t=e$w.deprecated;e$R.stack=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E){for(var e$B,e$o=e$U.create({label:"Stack"}),e$r=e$D,e$f=e$m,e$_=0,e$i=0;e$i<e$t;e$i++){for(var e$R=0,e$G=0;e$G<e$Y;e$G++){var e$I=e$E(e$r,e$f,e$G,e$i,e$B,e$_);if(e$I){var e$w=e$I.bounds.max.y-e$I.bounds.min.y,e$W=e$I.bounds.max.x-e$I.bounds.min.x;e$R<e$w&&(e$R=e$w),e$e.translate(e$I,{x:.5*e$W,y:.5*e$w}),e$r=e$I.bounds.max.x+e$y,e$U.addBody(e$o,e$I),e$B=e$I,e$_+=1}else e$r+=e$y}e$f+=e$R+e$l,e$r=e$D}return e$o},e$R.chain=function(e$D,e$m,e$Y,e$t,e$y,e$l){for(var e$E=e$D.bodies,e$B=1;e$B<e$E.length;e$B++){var e$o=e$E[e$B-1],e$r=e$E[e$B],e$f=e$o.bounds.max.y-e$o.bounds.min.y,e$_=e$o.bounds.max.x-e$o.bounds.min.x,e$i=e$r.bounds.max.y-e$r.bounds.min.y,e$R={bodyA:e$o,pointA:{x:e$_*e$m,y:e$f*e$Y},bodyB:e$r,pointB:{x:(e$r.bounds.max.x-e$r.bounds.min.x)*e$t,y:e$i*e$y}},e$G=e$w.extend(e$R,e$l);e$U.addConstraint(e$D,e$I.create(e$G))}return e$D.label+=" Chain",e$D},e$R.mesh=function(e$D,e$m,e$Y,e$t,e$y){var e$l,e$E,e$B,e$o,e$r,e$f=e$D.bodies;for(e$l=0;e$l<e$Y;e$l++){for(e$E=1;e$E<e$m;e$E++)e$B=e$f[e$E-1+e$l*e$m],e$o=e$f[e$E+e$l*e$m],e$U.addConstraint(e$D,e$I.create(e$w.extend({bodyA:e$B,bodyB:e$o},e$y)));if(0<e$l)for(e$E=0;e$E<e$m;e$E++)e$B=e$f[e$E+(e$l-1)*e$m],e$o=e$f[e$E+e$l*e$m],e$U.addConstraint(e$D,e$I.create(e$w.extend({bodyA:e$B,bodyB:e$o},e$y))),e$t&&0<e$E&&(e$r=e$f[e$E-1+(e$l-1)*e$m],e$U.addConstraint(e$D,e$I.create(e$w.extend({bodyA:e$r,bodyB:e$o},e$y)))),e$t&&e$E<e$m-1&&(e$r=e$f[e$E+1+(e$l-1)*e$m],e$U.addConstraint(e$D,e$I.create(e$w.extend({bodyA:e$r,bodyB:e$o},e$y))))}return e$D.label+=" Mesh",e$D},e$R.pyramid=function(e$o,e$D,e$r,e$f,e$_,e$m,e$i){return e$R.stack(e$o,e$D,e$r,e$f,e$_,e$m,function(e$D,e$m,e$Y,e$t,e$y,e$l){var e$E=Math.min(e$f,Math.ceil(e$r/2)),e$B=e$y?e$y.bounds.max.x-e$y.bounds.min.x:0;if(!(e$E<e$t||e$Y<(e$t=e$E-e$t)||e$r-1-e$t<e$Y))return 1===e$l&&e$e.translate(e$y,{x:(e$Y+(e$r%2==1?1:-1))*e$B,y:0}),e$i(e$o+(e$y?e$Y*e$B:0)+e$Y*e$_,e$m,e$Y,e$t,e$y,e$l)})},e$R.newtonsCradle=function(e$D,e$m,e$Y,e$t,e$y){for(var e$l=e$U.create({label:"Newtons Cradle"}),e$E=0;e$E<e$Y;e$E++){var e$B=e$G.circle(e$D+e$E*(1.9*e$t),e$m+e$y,e$t,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),e$o=e$I.create({pointA:{x:e$D+e$E*(1.9*e$t),y:e$m},bodyB:e$B});e$U.addBody(e$l,e$B),e$U.addConstraint(e$l,e$o)}return e$l},e$t(e$R,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),e$R.car=function(e$D,e$m,e$Y,e$t,e$y){var e$l=e$e.nextGroup(!0),e$E=.5*-e$Y+20,e$B=.5*e$Y-20,e$o=e$U.create({label:"Car"}),e$r=e$G.rectangle(e$D,e$m,e$Y,e$t,{collisionFilter:{group:e$l},chamfer:{radius:.5*e$t},density:2e-4}),e$f=e$G.circle(e$D+e$E,e$m+0,e$y,{collisionFilter:{group:e$l},friction:.8}),e$_=e$G.circle(e$D+e$B,e$m+0,e$y,{collisionFilter:{group:e$l},friction:.8}),e$i=e$I.create({bodyB:e$r,pointB:{x:e$E,y:0},bodyA:e$f,stiffness:1,length:0}),e$R=e$I.create({bodyB:e$r,pointB:{x:e$B,y:0},bodyA:e$_,stiffness:1,length:0});return e$U.addBody(e$o,e$r),e$U.addBody(e$o,e$f),e$U.addBody(e$o,e$_),e$U.addConstraint(e$o,e$i),e$U.addConstraint(e$o,e$R),e$o},e$t(e$R,"car","Composites.car ➤ moved to car example"),e$R.softBody=function(e$D,e$m,e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r){e$o=e$w.extend({inertia:1/0},e$o),e$r=e$w.extend({stiffness:.2,render:{type:"line",anchors:!1}},e$r);var e$f=e$R.stack(e$D,e$m,e$Y,e$t,e$y,e$l,function(e$D,e$m){return e$G.circle(e$D,e$m,e$B,e$o)});return e$R.mesh(e$f,e$Y,e$t,e$E,e$r),e$f.label="Soft Body",e$f},e$t(e$R,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(e$D,e$m,e$Y){var e$W={};e$D.exports=e$W;var e$f=e$Y(9),e$o=e$Y(0),e$t=e$o.deprecated;e$W.create=function(e$D){return e$o.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e$D)},e$W.update=function(e$D,e$m,e$Y,e$t){var e$y,e$l,e$E,e$B,e$o,e$r=e$Y.world,e$f=e$D.buckets,e$_=!1;for(e$y=0;e$y<e$m.length;e$y++){var e$i=e$m[e$y];if((!e$i.isSleeping||e$t)&&(!e$r.bounds||!(e$i.bounds.max.x<e$r.bounds.min.x||e$i.bounds.min.x>e$r.bounds.max.x||e$i.bounds.max.y<e$r.bounds.min.y||e$i.bounds.min.y>e$r.bounds.max.y))){var e$R=e$W._getRegion(e$D,e$i);if(!e$i.region||e$R.id!==e$i.region.id||e$t){e$i.region&&!e$t||(e$i.region=e$R);var e$G=e$W._regionUnion(e$R,e$i.region);for(e$l=e$G.startCol;e$l<=e$G.endCol;e$l++)for(e$E=e$G.startRow;e$E<=e$G.endRow;e$E++){e$B=e$f[e$o=e$W._getBucketId(e$l,e$E)];var e$I=e$l>=e$R.startCol&&e$l<=e$R.endCol&&e$E>=e$R.startRow&&e$E<=e$R.endRow,e$w=e$l>=e$i.region.startCol&&e$l<=e$i.region.endCol&&e$E>=e$i.region.startRow&&e$E<=e$i.region.endRow;!e$I&&e$w&&e$w&&e$B&&e$W._bucketRemoveBody(e$D,e$B,e$i),(e$i.region===e$R||e$I&&!e$w||e$t)&&(e$B||(e$B=e$W._createBucket(e$f,e$o)),e$W._bucketAddBody(e$D,e$B,e$i))}e$i.region=e$R,e$_=!0}}}e$_&&(e$D.pairsList=e$W._createActivePairsList(e$D))},e$t(e$W,"update","Grid.update ➤ replaced by Matter.Detector"),e$W.clear=function(e$D){e$D.buckets={},e$D.pairs={},e$D.pairsList=[]},e$t(e$W,"clear","Grid.clear ➤ replaced by Matter.Detector"),e$W._regionUnion=function(e$D,e$m){var e$Y=Math.min(e$D.startCol,e$m.startCol),e$t=Math.max(e$D.endCol,e$m.endCol),e$y=Math.min(e$D.startRow,e$m.startRow),e$l=Math.max(e$D.endRow,e$m.endRow);return e$W._createRegion(e$Y,e$t,e$y,e$l)},e$W._getRegion=function(e$D,e$m){var e$Y=e$m.bounds,e$t=Math.floor(e$Y.min.x/e$D.bucketWidth),e$y=Math.floor(e$Y.max.x/e$D.bucketWidth),e$l=Math.floor(e$Y.min.y/e$D.bucketHeight),e$E=Math.floor(e$Y.max.y/e$D.bucketHeight);return e$W._createRegion(e$t,e$y,e$l,e$E)},e$W._createRegion=function(e$D,e$m,e$Y,e$t){return{id:e$D+","+e$m+","+e$Y+","+e$t,startCol:e$D,endCol:e$m,startRow:e$Y,endRow:e$t}},e$W._getBucketId=function(e$D,e$m){return"C"+e$D+"R"+e$m},e$W._createBucket=function(e$D,e$m){return e$D[e$m]=[]},e$W._bucketAddBody=function(e$D,e$m,e$Y){var e$t,e$y=e$D.pairs,e$l=e$f.id,e$E=e$m.length;for(e$t=0;e$t<e$E;e$t++){var e$B=e$m[e$t];if(!(e$Y.id===e$B.id||e$Y.isStatic&&e$B.isStatic)){var e$o=e$l(e$Y,e$B),e$r=e$y[e$o];e$r?e$r[2]+=1:e$y[e$o]=[e$Y,e$B,1]}}e$m.push(e$Y)},e$W._bucketRemoveBody=function(e$D,e$m,e$Y){var e$t,e$y=e$D.pairs,e$l=e$f.id;e$m.splice(e$o.indexOf(e$m,e$Y),1);var e$E=e$m.length;for(e$t=0;e$t<e$E;e$t++){var e$B=e$y[e$l(e$Y,e$m[e$t])];e$B&&(e$B[2]-=1)}},e$W._createActivePairsList=function(e$D){var e$m,e$Y,e$t=e$D.pairs,e$y=e$o.keys(e$t),e$l=e$y.length,e$E=[];for(e$Y=0;e$Y<e$l;e$Y++)0<(e$m=e$t[e$y[e$Y]])[2]?e$E.push(e$m):delete e$t[e$y[e$Y]];return e$E}},function(e$D,e$m,e$Y){var e$l={};e$D.exports=e$l;var e$o=e$Y(3),e$r=e$Y(7),e$E=e$Y(13),e$f=e$Y(4),e$_=e$Y(14),e$B=e$Y(10),e$i=e$Y(5),e$R=e$Y(0),e$G=e$Y(1);e$l.create=function(e$m,e$D){var e$Y=(e$m?e$m.mouse:null)||(e$D?e$D.mouse:null);e$Y||(e$m&&e$m.render&&e$m.render.canvas?e$Y=e$E.create(e$m.render.canvas):e$D&&e$D.element?e$Y=e$E.create(e$D.element):(e$Y=e$E.create(),e$R.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var e$t={type:"mouseConstraint",mouse:e$Y,element:null,body:null,constraint:e$B.create({label:"Mouse Constraint",pointA:e$Y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},e$y=e$R.extend(e$t,e$D);return e$f.on(e$m,"beforeUpdate",function(){var e$D=e$i.allBodies(e$m.world);e$l.update(e$y,e$D),e$l._triggerEvents(e$y)}),e$y},e$l.update=function(e$D,e$m){var e$Y=e$D.mouse,e$t=e$D.constraint,e$y=e$D.body;if(0===e$Y.button){if(e$t.bodyB)e$r.set(e$t.bodyB,!1),e$t.pointA=e$Y.position;else for(var e$l=0;e$l<e$m.length;e$l++)if(e$y=e$m[e$l],e$G.contains(e$y.bounds,e$Y.position)&&e$_.canCollide(e$y.collisionFilter,e$D.collisionFilter))for(var e$E=1<e$y.parts.length?1:0;e$E<e$y.parts.length;e$E++){var e$B=e$y.parts[e$E];if(e$o.contains(e$B.vertices,e$Y.position)){e$t.pointA=e$Y.position,e$t.bodyB=e$D.body=e$y,e$t.pointB={x:e$Y.position.x-e$y.position.x,y:e$Y.position.y-e$y.position.y},e$t.angleB=e$y.angle,e$r.set(e$y,!1),e$f.trigger(e$D,"startdrag",{mouse:e$Y,body:e$y});break}}}else e$t.bodyB=e$D.body=null,e$t.pointB=null,e$y&&e$f.trigger(e$D,"enddrag",{mouse:e$Y,body:e$y})},e$l._triggerEvents=function(e$D){var e$m=e$D.mouse,e$Y=e$m.sourceEvents;e$Y.mousemove&&e$f.trigger(e$D,"mousemove",{mouse:e$m}),e$Y.mousedown&&e$f.trigger(e$D,"mousedown",{mouse:e$m}),e$Y.mouseup&&e$f.trigger(e$D,"mouseup",{mouse:e$m}),e$Y.mouseout&&e$f.trigger(e$D,"mouseout",{mouse:e$m}),e$E.clearSourceEvents(e$m)}},function(e$D,e$m,e$Y){var e$i={};e$D.exports=e$i;var e$R=e$Y(2),e$G=e$Y(8),e$I=e$Y(1),e$w=e$Y(12),e$B=e$Y(3);e$i.collides=function(e$D,e$m){for(var e$Y=[],e$t=e$m.length,e$y=e$D.bounds,e$l=e$G.collides,e$E=e$I.overlaps,e$B=0;e$B<e$t;e$B++){var e$o=e$m[e$B],e$r=e$o.parts.length,e$f=1===e$r?0:1;if(e$E(e$o.bounds,e$y))for(var e$_=e$f;e$_<e$r;e$_++){var e$i=e$o.parts[e$_];if(e$E(e$i.bounds,e$y)){var e$R=e$l(e$i,e$D);if(e$R){e$Y.push(e$R);break}}}}return e$Y},e$i.ray=function(e$D,e$m,e$Y,e$t){e$t=e$t||1e-100;for(var e$y=e$R.angle(e$m,e$Y),e$l=e$R.magnitude(e$R.sub(e$m,e$Y)),e$E=.5*(e$Y.x+e$m.x),e$B=.5*(e$Y.y+e$m.y),e$o=e$w.rectangle(e$E,e$B,e$l,e$t,{angle:e$y}),e$r=e$i.collides(e$o,e$D),e$f=0;e$f<e$r.length;e$f+=1){var e$_=e$r[e$f];e$_.body=e$_.bodyB=e$_.bodyA}return e$r},e$i.region=function(e$D,e$m,e$Y){for(var e$t=[],e$y=0;e$y<e$D.length;e$y++){var e$l=e$D[e$y],e$E=e$I.overlaps(e$l.bounds,e$m);(e$E&&!e$Y||!e$E&&e$Y)&&e$t.push(e$l)}return e$t},e$i.point=function(e$D,e$m){for(var e$Y=[],e$t=0;e$t<e$D.length;e$t++){var e$y=e$D[e$t];if(e$I.contains(e$y.bounds,e$m))for(var e$l=1===e$y.parts.length?0:1;e$l<e$y.parts.length;e$l++){var e$E=e$y.parts[e$l];if(e$I.contains(e$E.bounds,e$m)&&e$B.contains(e$E.vertices,e$m)){e$Y.push(e$y);break}}}return e$Y}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$B=e$Y(4),e$o=e$Y(18),e$y=e$Y(0);e$t.create=function(e$D){var e$m=e$y.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e$D);return e$m.delta=e$m.delta||1e3/e$m.fps,e$m.deltaMin=e$m.deltaMin||1e3/e$m.fps,e$m.deltaMax=e$m.deltaMax||1e3/(.5*e$m.fps),e$m.fps=1e3/e$m.delta,e$m},e$t.run=function(e$D,e$m){return void 0!==e$D.positionIterations&&(e$m=e$D,e$D=e$t.create()),Laya.timer.clear(this,e$t.render),Laya.timer.frameLoop(1,this,e$t.render,[e$D,e$m]),e$D},e$t.render=function(e$D,e$m){e$D.enabled&&e$t.tick(e$D,e$m,e$y.now())},e$t.tick=function(e$D,e$m,e$Y){var e$t,e$y=e$m.timing,e$l=1,e$E={timestamp:e$y.timestamp};e$B.trigger(e$D,"beforeTick",e$E),e$D.isFixed?e$t=e$D.delta:(e$t=e$Y-e$D.timePrev||e$D.delta,e$D.timePrev=e$Y,e$D.deltaHistory.push(e$t),e$D.deltaHistory=e$D.deltaHistory.slice(-e$D.deltaSampleSize),e$l=(e$t=(e$t=(e$t=Math.min.apply(null,e$D.deltaHistory))<e$D.deltaMin?e$D.deltaMin:e$t)>e$D.deltaMax?e$D.deltaMax:e$t)/e$D.delta,e$D.delta=e$t),0!==e$D.timeScalePrev&&(e$l*=e$y.timeScale/e$D.timeScalePrev),0===e$y.timeScale&&(e$l=0),e$D.timeScalePrev=e$y.timeScale,e$D.correction=e$l,e$D.frameCounter+=1,1e3<=e$Y-e$D.counterTimestamp&&(e$D.fps=e$D.frameCounter*((e$Y-e$D.counterTimestamp)/1e3),e$D.counterTimestamp=e$Y,e$D.frameCounter=0),e$B.trigger(e$D,"tick",e$E),e$B.trigger(e$D,"beforeUpdate",e$E),e$o.update(e$m,e$t,e$l),e$B.trigger(e$D,"afterUpdate",e$E),e$B.trigger(e$D,"afterTick",e$E)},e$t.stop=function(e$D){Laya.timer.clear(this,e$t.render)},e$t.start=function(e$D,e$m){e$t.run(e$D,e$m)}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$y=e$Y(8),e$l=e$Y(0).deprecated;e$t.collides=function(e$D,e$m){return e$y.collides(e$D,e$m)},e$l(e$t,"collides","SAT.collides ➤ replaced by Collision.collides")},function(e$D,e$m,e$Y){var e$e={};e$D.exports=e$e;e$Y(1);var e$v=e$Y(0);e$e.pathToVertices=function(e$D,e$m){"undefined"==typeof window||"SVGPathSeg"in window||e$v.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var e$Y,e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f,e$_,e$i,e$R=[],e$G=0,e$I=0,e$w=0;function e$W(e$D,e$m,e$Y){var e$t=e$Y%2==1&&1<e$Y;if(!e$f||e$D!=e$f.x||e$m!=e$f.y){e$i=e$f&&e$t?(e$_=e$f.x,e$f.y):e$_=0;var e$y={x:e$_+e$D,y:e$i+e$m};!e$t&&e$f||(e$f=e$y),e$R.push(e$y),e$I=e$_+e$D,e$w=e$i+e$m}}function e$U(e$D){var e$m=e$D.pathSegTypeAsLetter.toUpperCase();if("Z"!==e$m){switch(e$m){case"M":case"L":case"T":case"C":case"S":case"Q":e$I=e$D.x,e$w=e$D.y;break;case"H":e$I=e$D.x;break;case"V":e$w=e$D.y}e$W(e$I,e$w,e$D.pathSegType)}}for(e$m=e$m||15,e$e._svgPathToAbsolute(e$D),e$y=e$D.getTotalLength(),e$B=[],e$Y=0;e$Y<e$D.pathSegList.numberOfItems;e$Y+=1)e$B.push(e$D.pathSegList.getItem(e$Y));for(e$o=e$B.concat();e$G<e$y;){if((e$E=e$B[e$D.getPathSegAtLength(e$G)])!=e$r){for(;e$o.length&&e$o[0]!=e$E;)e$U(e$o.shift());e$r=e$E}switch(e$E.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":e$l=e$D.getPointAtLength(e$G),e$W(e$l.x,e$l.y,0)}e$G+=e$m}for(e$Y=0,e$t=e$o.length;e$Y<e$t;++e$Y)e$U(e$o[e$Y]);return e$R},e$e._svgPathToAbsolute=function(e$D){for(var e$m,e$Y,e$t,e$y,e$l,e$E,e$B=e$D.pathSegList,e$o=0,e$r=0,e$f=e$B.numberOfItems,e$_=0;e$_<e$f;++e$_){var e$i=e$B.getItem(e$_),e$R=e$i.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(e$R))"x"in e$i&&(e$o=e$i.x),"y"in e$i&&(e$r=e$i.y);else switch("x1"in e$i&&(e$t=e$o+e$i.x1),"x2"in e$i&&(e$l=e$o+e$i.x2),"y1"in e$i&&(e$y=e$r+e$i.y1),"y2"in e$i&&(e$E=e$r+e$i.y2),"x"in e$i&&(e$o+=e$i.x),"y"in e$i&&(e$r+=e$i.y),e$R){case"m":e$B.replaceItem(e$D.createSVGPathSegMovetoAbs(e$o,e$r),e$_);break;case"l":e$B.replaceItem(e$D.createSVGPathSegLinetoAbs(e$o,e$r),e$_);break;case"h":e$B.replaceItem(e$D.createSVGPathSegLinetoHorizontalAbs(e$o),e$_);break;case"v":e$B.replaceItem(e$D.createSVGPathSegLinetoVerticalAbs(e$r),e$_);break;case"c":e$B.replaceItem(e$D.createSVGPathSegCurvetoCubicAbs(e$o,e$r,e$t,e$y,e$l,e$E),e$_);break;case"s":e$B.replaceItem(e$D.createSVGPathSegCurvetoCubicSmoothAbs(e$o,e$r,e$l,e$E),e$_);break;case"q":e$B.replaceItem(e$D.createSVGPathSegCurvetoQuadraticAbs(e$o,e$r,e$t,e$y),e$_);break;case"t":e$B.replaceItem(e$D.createSVGPathSegCurvetoQuadraticSmoothAbs(e$o,e$r),e$_);break;case"a":e$B.replaceItem(e$D.createSVGPathSegArcAbs(e$o,e$r,e$i.r1,e$i.r2,e$i.angle,e$i.largeArcFlag,e$i.sweepFlag),e$_);break;case"z":case"Z":e$o=e$m,e$r=e$Y}"M"!=e$R&&"m"!=e$R||(e$m=e$o,e$Y=e$r)}}},function(e$D,e$m,e$Y){var e$t={};e$D.exports=e$t;var e$y=e$Y(5);e$Y(0);e$t.create=e$y.create,e$t.add=e$y.add,e$t.remove=e$y.remove,e$t.clear=e$y.clear,e$t.addComposite=e$y.addComposite,e$t.addBody=e$y.addBody,e$t.addBodyAt=e$y.addBodyAt,e$t.addConstraint=e$y.addConstraint}])}),function(e$D){if("object"==typeof exports&&"undefined"!=typeof module)window?window.decomp=e$D():module.exports=e$D();else if("function"==typeof define&&define.amd)define([],e$D);else{var e$m;"undefined"!=typeof window?e$m=window:"undefined"!=typeof global?e$m=global:"undefined"!=typeof self&&(e$m=self),e$m.decomp=e$D()}}(function(){return function e$y(e$l,e$E,e$B){function e$o(e$Y,e$D){if(!e$E[e$Y]){if(!e$l[e$Y]){var e$m="function"==typeof require&&require;if(!e$D&&e$m)return e$m(e$Y,!0);if(e$r)return e$r(e$Y,!0);throw new Error("Cannot find module '"+e$Y+"'")}var e$t=e$E[e$Y]={exports:{}};e$l[e$Y][0].call(e$t.exports,function(e$D){var e$m=e$l[e$Y][1][e$D];return e$o(e$m||e$D)},e$t,e$t.exports,e$y,e$l,e$E,e$B)}return e$E[e$Y].exports}for(var e$r="function"==typeof require&&require,e$D=0;e$D<e$B.length;e$D++)e$o(e$B[e$D]);return e$o}({1:[function(e$D,e$m,e$Y){function e$o(e$D,e$m,e$Y){e$Y=e$Y||0;var e$t,e$y,e$l,e$E,e$B,e$o,e$r,e$f=[0,0];return e$t=e$D[1][1]-e$D[0][1],e$y=e$D[0][0]-e$D[1][0],e$l=e$t*e$D[0][0]+e$y*e$D[0][1],e$E=e$m[1][1]-e$m[0][1],e$B=e$m[0][0]-e$m[1][0],e$o=e$E*e$m[0][0]+e$B*e$m[0][1],e$w(e$r=e$t*e$B-e$E*e$y,0,e$Y)||(e$f[0]=(e$B*e$l-e$y*e$o)/e$r,e$f[1]=(e$t*e$o-e$E*e$l)/e$r),e$f}function e$y(e$D,e$m,e$Y,e$t){var e$y=e$m[0]-e$D[0],e$l=e$m[1]-e$D[1],e$E=e$t[0]-e$Y[0],e$B=e$t[1]-e$Y[1];if(e$E*e$l-e$B*e$y==0)return!1;var e$o=(e$y*(e$Y[1]-e$D[1])+e$l*(e$D[0]-e$Y[0]))/(e$E*e$l-e$B*e$y),e$r=(e$E*(e$D[1]-e$Y[1])+e$B*(e$Y[0]-e$D[0]))/(e$B*e$y-e$E*e$l);return 0<=e$o&&e$o<=1&&0<=e$r&&e$r<=1}function e$r(e$D,e$m,e$Y){return(e$m[0]-e$D[0])*(e$Y[1]-e$D[1])-(e$Y[0]-e$D[0])*(e$m[1]-e$D[1])}function e$A(e$D,e$m,e$Y){return 0<e$r(e$D,e$m,e$Y)}function e$J(e$D,e$m,e$Y){return 0<=e$r(e$D,e$m,e$Y)}function e$a(e$D,e$m,e$Y){return e$r(e$D,e$m,e$Y)<0}function e$p(e$D,e$m,e$Y){return e$r(e$D,e$m,e$Y)<=0}e$m.exports={decomp:function(e$D){var e$m=function e$D(e$m){var e$Y=[],e$t=[],e$y=[],e$l=[];var e$E=Number.MAX_VALUE;for(var e$B=0;e$B<e$m.length;++e$B)if(e$T(e$m,e$B))for(var e$o=0;e$o<e$m.length;++e$o)if(e$G(e$m,e$B,e$o)){e$t=e$D(e$I(e$m,e$B,e$o,e$l)),e$y=e$D(e$I(e$m,e$o,e$B,e$l));for(var e$r=0;e$r<e$y.length;e$r++)e$t.push(e$y[e$r]);e$t.length<e$E&&(e$E=(e$Y=e$t).length,e$Y.push([e$s(e$m,e$B),e$s(e$m,e$o)]))}return e$Y}(e$D);return 0<e$m.length?function e$D(e$m,e$Y){if(0===e$Y.length)return[e$m];{if(e$Y instanceof Array&&e$Y.length&&e$Y[0]instanceof Array&&2===e$Y[0].length&&e$Y[0][0]instanceof Array){for(var e$t=[e$m],e$y=0;e$y<e$Y.length;e$y++)for(var e$l=e$Y[e$y],e$E=0;e$E<e$t.length;e$E++){var e$B=e$t[e$E],e$o=e$D(e$B,e$l);if(e$o){e$t.splice(e$E,1),e$t.push(e$o[0],e$o[1]);break}}return e$t}var e$l=e$Y,e$y=e$m.indexOf(e$l[0]),e$E=e$m.indexOf(e$l[1]);return-1!==e$y&&-1!==e$E&&[e$I(e$m,e$y,e$E),e$I(e$m,e$E,e$y)]}}(e$D,e$m):[e$D]},quickDecomp:function e$D(e$m,e$Y,e$t,e$y,e$l,e$E,e$B){e$E=e$E||100;e$B=e$B||0;e$l=e$l||25;e$Y=void 0!==e$Y?e$Y:[];e$t=e$t||[];e$y=e$y||[];var e$o=[0,0],e$r=[0,0],e$f=[0,0];var e$_=0,e$i=0,e$R=0,e$G=0;var e$I=0,e$w=0,e$W=0;var e$U=[],e$e=[];var e$v=e$m,e$c=e$m;if(e$c.length<3)return e$Y;e$B++;if(e$E<e$B)return console.warn("quickDecomp: max level ("+e$E+") reached."),e$Y;for(var e$S=0;e$S<e$m.length;++e$S)if(e$T(e$v,e$S)){e$t.push(e$v[e$S]),e$_=e$i=Number.MAX_VALUE;for(var e$z=0;e$z<e$m.length;++e$z)e$A(e$s(e$v,e$S-1),e$s(e$v,e$S),e$s(e$v,e$z))&&e$p(e$s(e$v,e$S-1),e$s(e$v,e$S),e$s(e$v,e$z-1))&&(e$f=e$C(e$s(e$v,e$S-1),e$s(e$v,e$S),e$s(e$v,e$z),e$s(e$v,e$z-1)),e$a(e$s(e$v,e$S+1),e$s(e$v,e$S),e$f)&&(e$R=e$F(e$v[e$S],e$f))<e$i&&(e$i=e$R,e$r=e$f,e$w=e$z)),e$A(e$s(e$v,e$S+1),e$s(e$v,e$S),e$s(e$v,e$z+1))&&e$p(e$s(e$v,e$S+1),e$s(e$v,e$S),e$s(e$v,e$z))&&(e$f=e$C(e$s(e$v,e$S+1),e$s(e$v,e$S),e$s(e$v,e$z),e$s(e$v,e$z+1)),e$A(e$s(e$v,e$S-1),e$s(e$v,e$S),e$f)&&(e$R=e$F(e$v[e$S],e$f))<e$_&&(e$_=e$R,e$o=e$f,e$I=e$z));if(e$w===(e$I+1)%e$m.length)e$f[0]=(e$r[0]+e$o[0])/2,e$f[1]=(e$r[1]+e$o[1])/2,e$y.push(e$f),e$S<e$I?(e$Q(e$U,e$v,e$S,e$I+1),e$U.push(e$f),e$e.push(e$f),0!==e$w&&e$Q(e$e,e$v,e$w,e$v.length),e$Q(e$e,e$v,0,e$S+1)):(0!==e$S&&e$Q(e$U,e$v,e$S,e$v.length),e$Q(e$U,e$v,0,e$I+1),e$U.push(e$f),e$e.push(e$f),e$Q(e$e,e$v,e$w,e$S+1));else{if(e$I<e$w&&(e$I+=e$m.length),e$G=Number.MAX_VALUE,e$I<e$w)return e$Y;for(var e$z=e$w;e$z<=e$I;++e$z)e$J(e$s(e$v,e$S-1),e$s(e$v,e$S),e$s(e$v,e$z))&&e$p(e$s(e$v,e$S+1),e$s(e$v,e$S),e$s(e$v,e$z))&&(e$R=e$F(e$s(e$v,e$S),e$s(e$v,e$z)))<e$G&&e$N(e$v,e$S,e$z)&&(e$G=e$R,e$W=e$z%e$m.length);e$S<e$W?(e$Q(e$U,e$v,e$S,e$W+1),0!==e$W&&e$Q(e$e,e$v,e$W,e$c.length),e$Q(e$e,e$v,0,e$S+1)):(0!==e$S&&e$Q(e$U,e$v,e$S,e$c.length),e$Q(e$U,e$v,0,e$W+1),e$Q(e$e,e$v,e$W,e$S+1))}return e$U.length<e$e.length?(e$D(e$U,e$Y,e$t,e$y,e$l,e$E,e$B),e$D(e$e,e$Y,e$t,e$y,e$l,e$E,e$B)):(e$D(e$e,e$Y,e$t,e$y,e$l,e$E,e$B),e$D(e$U,e$Y,e$t,e$y,e$l,e$E,e$B)),e$Y}e$Y.push(e$m);return e$Y},isSimple:function(e$D){var e$m,e$Y=e$D;for(e$m=0;e$m<e$Y.length-1;e$m++)for(var e$t=0;e$t<e$m-1;e$t++)if(e$y(e$Y[e$m],e$Y[e$m+1],e$Y[e$t],e$Y[e$t+1]))return!1;for(e$m=1;e$m<e$Y.length-2;e$m++)if(e$y(e$Y[0],e$Y[e$Y.length-1],e$Y[e$m],e$Y[e$m+1]))return!1;return!0},removeCollinearPoints:function(e$D,e$m){for(var e$Y=0,e$t=e$D.length-1;3<e$D.length&&0<=e$t;--e$t)e$l(e$s(e$D,e$t-1),e$s(e$D,e$t),e$s(e$D,e$t+1),e$m)&&(e$D.splice(e$t%e$D.length,1),e$Y++);return e$Y},removeDuplicatePoints:function(e$D,e$m){for(var e$Y=e$D.length-1;1<=e$Y;--e$Y)for(var e$t=e$D[e$Y],e$y=e$Y-1;0<=e$y;--e$y)e$l=e$t,e$E=e$D[e$y],e$B=e$m,e$w(e$l[0],e$E[0],e$B)&&e$w(e$l[1],e$E[1],e$B)&&e$D.splice(e$Y,1);var e$l,e$E,e$B},makeCCW:function(e$D){for(var e$m=0,e$Y=e$D,e$t=1;e$t<e$D.length;++e$t)(e$Y[e$t][1]<e$Y[e$m][1]||e$Y[e$t][1]===e$Y[e$m][1]&&e$Y[e$t][0]>e$Y[e$m][0])&&(e$m=e$t);return!e$A(e$s(e$D,e$m-1),e$s(e$D,e$m),e$s(e$D,e$m+1))&&(function(e$D){for(var e$m=[],e$Y=e$D.length,e$t=0;e$t!==e$Y;e$t++)e$m.push(e$D.pop());for(var e$t=0;e$t!==e$Y;e$t++)e$D[e$t]=e$m[e$t]}(e$D),!0)}};var e$f=[],e$_=[];function e$l(e$D,e$m,e$Y,e$t){if(e$t){var e$y=e$f,e$l=e$_;e$y[0]=e$m[0]-e$D[0],e$y[1]=e$m[1]-e$D[1],e$l[0]=e$Y[0]-e$m[0],e$l[1]=e$Y[1]-e$m[1];var e$E=e$y[0]*e$l[0]+e$y[1]*e$l[1],e$B=Math.sqrt(e$y[0]*e$y[0]+e$y[1]*e$y[1]),e$o=Math.sqrt(e$l[0]*e$l[0]+e$l[1]*e$l[1]);return Math.acos(e$E/(e$B*e$o))<e$t}return 0===e$r(e$D,e$m,e$Y)}function e$F(e$D,e$m){var e$Y=e$m[0]-e$D[0],e$t=e$m[1]-e$D[1];return e$Y*e$Y+e$t*e$t}function e$s(e$D,e$m){var e$Y=e$D.length;return e$D[e$m<0?e$m%e$Y+e$Y:e$m%e$Y]}function e$Q(e$D,e$m,e$Y,e$t){for(var e$y=e$Y;e$y<e$t;e$y++)e$D.push(e$m[e$y])}function e$T(e$D,e$m){return e$a(e$s(e$D,e$m-1),e$s(e$D,e$m),e$s(e$D,e$m+1))}var e$i=[],e$R=[];function e$G(e$D,e$m,e$Y){var e$t,e$y,e$l=e$i,e$E=e$R;if(e$J(e$s(e$D,e$m+1),e$s(e$D,e$m),e$s(e$D,e$Y))&&e$p(e$s(e$D,e$m-1),e$s(e$D,e$m),e$s(e$D,e$Y)))return!1;e$y=e$F(e$s(e$D,e$m),e$s(e$D,e$Y));for(var e$B=0;e$B!==e$D.length;++e$B)if((e$B+1)%e$D.length!==e$m&&e$B!==e$m&&e$J(e$s(e$D,e$m),e$s(e$D,e$Y),e$s(e$D,e$B+1))&&e$p(e$s(e$D,e$m),e$s(e$D,e$Y),e$s(e$D,e$B))&&(e$l[0]=e$s(e$D,e$m),e$l[1]=e$s(e$D,e$Y),e$E[0]=e$s(e$D,e$B),e$E[1]=e$s(e$D,e$B+1),e$t=e$o(e$l,e$E),e$F(e$s(e$D,e$m),e$t)<e$y))return!1;return!0}function e$N(e$D,e$m,e$Y){for(var e$t=0;e$t!==e$D.length;++e$t)if(e$t!==e$m&&e$t!==e$Y&&(e$t+1)%e$D.length!==e$m&&(e$t+1)%e$D.length!==e$Y&&e$y(e$s(e$D,e$m),e$s(e$D,e$Y),e$s(e$D,e$t),e$s(e$D,e$t+1)))return!1;return!0}function e$I(e$D,e$m,e$Y,e$t){var e$y=e$t||[];if(function(e$D){e$D.length=0}(e$y),e$m<e$Y)for(var e$l=e$m;e$l<=e$Y;e$l++)e$y.push(e$D[e$l]);else{for(e$l=0;e$l<=e$Y;e$l++)e$y.push(e$D[e$l]);for(e$l=e$m;e$l<e$D.length;e$l++)e$y.push(e$D[e$l])}return e$y}function e$C(e$D,e$m,e$Y,e$t,e$y){e$y=e$y||0;var e$l=e$m[1]-e$D[1],e$E=e$D[0]-e$m[0],e$B=e$l*e$D[0]+e$E*e$D[1],e$o=e$t[1]-e$Y[1],e$r=e$Y[0]-e$t[0],e$f=e$o*e$Y[0]+e$r*e$Y[1],e$_=e$l*e$r-e$o*e$E;return e$w(e$_,0,e$y)?[0,0]:[(e$r*e$B-e$E*e$f)/e$_,(e$l*e$f-e$o*e$B)/e$_]}function e$w(e$D,e$m,e$Y){return e$Y=e$Y||0,Math.abs(e$D-e$m)<=e$Y}},{}]},{},[1])(1)}),function(){var e$U={},e$t=Matter.Common,e$e=Matter.Composite,e$v=Matter.Bounds,e$m=Matter.Events,e$c=(Matter.Grid,Matter.Vector);e$U.create=function(e$D){var e$m={controller:e$U,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222222",hasBounds:!!e$D.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},e$Y=e$t.extend(e$m,e$D);return e$Y.mouse=e$D.mouse,e$Y.engine=e$D.engine,e$Y.container=e$Y.container||Laya.stage,e$Y.bounds=e$Y.bounds||{min:{x:0,y:0},max:{x:e$Y.width,y:e$Y.height}},e$Y},e$U.run=function(e$D){Laya.timer.frameLoop(1,this,e$U.world,[e$D]),e$m.on(e$D.engine.world,"afterRemove",e$U.onRemoveSprite)},e$U.stop=function(e$D){Laya.timer.clear(this,e$U.world),e$m.off(e$D.engine.world,"afterRemove",e$U.onRemoveSprite)},e$U.onRemoveSprite=function(e$D){var e$m=e$D.object.layaSprite;e$m&&e$m.parent&&e$m.parent.removeChild(e$m)},e$U.world=function(e$D){var e$m,e$Y=e$D.engine.world,e$t=(e$D.renderer,e$D.container),e$y=e$D.options,e$l=e$e.allBodies(e$Y),e$E=e$e.allConstraints(e$Y),e$B=[];e$y.wireframes?e$U.setBackground(e$D,e$y.wireframeBackground):e$U.setBackground(e$D,e$y.background);var e$o=e$D.bounds.max.x-e$D.bounds.min.x,e$r=e$D.bounds.max.y-e$D.bounds.min.y,e$f=e$o/e$D.options.width,e$_=e$r/e$D.options.height;if(e$y.hasBounds){for(e$m=0;e$m<e$l.length;e$m++){var e$i=e$l[e$m];e$i.render.sprite.visible=e$v.overlaps(e$i.bounds,e$D.bounds)}for(e$m=0;e$m<e$E.length;e$m++){var e$R=e$E[e$m],e$G=e$R.bodyA,e$I=e$R.bodyB,e$w=e$R.pointA,e$W=e$R.pointB;e$G&&(e$w=e$c.add(e$G.position,e$R.pointA)),e$I&&(e$W=e$c.add(e$I.position,e$R.pointB)),e$w&&e$W&&((e$v.contains(e$D.bounds,e$w)||e$v.contains(e$D.bounds,e$W))&&e$B.push(e$R))}e$t.scale(1/e$f,1/e$_),e$t.pos(-e$D.bounds.min.x*(1/e$f),-e$D.bounds.min.y*(1/e$_))}else e$B=e$E;for(e$m=0;e$m<e$l.length;e$m++)e$U.body(e$D,e$l[e$m]);for(e$m=0;e$m<e$B.length;e$m++)e$U.constraint(e$D,e$B[e$m])},e$U.setBackground=function(e$D,e$m){if(e$D.currentBackground!==e$m){var e$Y=e$m.indexOf&&-1!==e$m.indexOf("#");e$D.container.graphics.clear(),e$Y?e$D.container.bgColor=e$m:(e$D.container.loadImage(e$m),e$D.container.bgColor="#FFFFFF"),e$D.currentBackground=e$m}},e$U.body=function(e$D,e$m){e$D.engine;var e$Y=e$m.render;if(e$Y.visible){if(e$Y.sprite&&e$Y.sprite.texture){e$m.id;var e$t=e$m.layaSprite,e$y=e$D.container;e$t||(e$t=e$m.layaSprite=e$o(e$D,e$m),e$m.effPendant&&!e$m.effPendant.parent&&e$t.addChild(e$m.effPendant)),e$y.contains(e$t)||(0<=e$m.childIndex&&e$m.childIndex<e$y.numChildren?e$y.addChildAt(e$t,e$m.childIndex):e$y.addChild(e$t)),e$t.x=e$m.position.x,e$t.y=e$m.position.y,e$t.rotation=180*e$m.angle/Math.PI,e$t.scaleX=e$Y.sprite.xScale||1,e$t.scaleY=e$Y.sprite.yScale||1,e$t.width=e$Y.sprite.width,e$t.height=e$Y.sprite.height,e$Y.sprite.sizeGrid&&(e$t.sizeGrid=e$Y.sprite.sizeGrid)}else{e$m.id,e$t=e$m.layaSprite,e$y=e$D.container;e$t||((e$t=e$m.layaSprite=e$r(e$D,e$m)).initialAngle=e$m.angle,e$m.effPendant&&!e$m.effPendant.parent&&e$t.addChild(e$m.effPendant)),e$y.contains(e$t)||(0<=e$m.childIndex&&e$m.childIndex<e$y.numChildren?e$y.addChildAt(e$t,e$m.childIndex):e$y.addChild(e$t)),e$t.x=e$m.position.x,e$t.y=e$m.position.y,e$t.rotation=180*(e$m.angle-e$t.initialAngle)/Math.PI}var e$l=e$m.text;if(e$l){var e$E=e$t.lbl;e$E||((e$E=e$t.lbl=new Laya.Label).fontSize=30,e$E.anchorX=.5,e$E.anchorY=.5,e$E.color=e$m.textClr?e$m.textClr:"#ffffff",e$E.strokeColor="#000000",e$E.stroke=2,e$E.centerX=0,e$E.centerY=0,e$t.addChild(e$E),void 0!==e$m.shapeType&&(0===e$m.shapeType&&(e$E.centerX=-10),2===e$m.shapeType&&(e$E.rotation=-e$t.rotation)),e$E.text=e$l+"",e$m.lbl=e$E)}if(e$m.pendant&&!e$t.pendantSpr){var e$B=new Laya.Image;e$B.skin=e$m.pendant,e$t.addChild(e$B),e$t.pendantSpr=e$B}}};var e$o=function(e$D,e$m){var e$Y=e$m.render.sprite.texture,e$t=new Laya.Image;return e$t.skin=e$Y,e$t.pivotX=e$m.render.sprite.xOffset,e$t.pivotY=e$m.render.sprite.yOffset,e$t},e$r=function(e$D,e$m){var e$Y,e$t,e$y,e$l,e$E=e$m.render,e$B=e$D.options,e$o=new Laya.Sprite,e$r=e$o.graphics;e$r.clear();for(var e$f=1<e$m.parts.length?1:0;e$f<e$m.parts.length;e$f++){e$l=e$m.parts[e$f];var e$_=[];e$y=e$B.wireframes?(e$Y=null,e$t="#bbbbbb",1):(e$Y=e$E.fillStyle,e$t=e$E.strokeStyle,e$E.lineWidth),e$_.push(e$l.vertices[0].x-e$m.position.x,e$l.vertices[0].y-e$m.position.y);for(var e$i=1;e$i<e$l.vertices.length;e$i++)e$_.push(e$l.vertices[e$i].x-e$m.position.x,e$l.vertices[e$i].y-e$m.position.y);e$_.push(e$l.vertices[0].x-e$m.position.x,e$l.vertices[0].y-e$m.position.y),e$r.drawPoly(0,0,e$_,e$Y,e$t,e$y),(e$B.showAngleIndicator||e$B.showAxes)&&(e$y=1,e$t=e$B.wireframes?"#CD5C5C":e$E.strokeStyle,e$r.drawLine(e$l.position.x-e$m.position.x,e$l.position.y-e$m.position.y,(e$l.vertices[0].x+e$l.vertices[e$l.vertices.length-1].x)/2-e$m.position.x,(e$l.vertices[0].y+e$l.vertices[e$l.vertices.length-1].y)/2-e$m.position.y))}return e$o};e$U.constraint=function(e$D,e$m){e$D.engine;var e$Y=e$m.bodyA,e$t=e$m.bodyB,e$y=e$m.pointA,e$l=e$m.pointB,e$E=e$D.container,e$B=e$m.render,e$o=(e$m.id,e$m.layaSprite);e$o||(e$o=e$m.layaSprite=new Laya.Sprite);var e$r,e$f,e$_,e$i,e$R=e$o.graphics;e$B.visible&&e$m.pointA&&e$m.pointB?(e$E.contains(e$o)||e$E.addChild(e$o),e$R.clear(),e$f=e$Y?(e$r=e$Y.position.x+e$y.x,e$Y.position.y+e$y.y):(e$r=e$y.x,e$y.y),e$i=e$t?(e$_=e$t.position.x+e$l.x,e$t.position.y+e$l.y):(e$_=e$l.x,e$l.y),e$R.drawLine(e$r,e$f,e$_,e$i,e$B.strokeStyle,e$B.lineWidth)):e$R.clear()},window.LayaRender=e$U}();