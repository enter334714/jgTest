var Laya=window.Laya=function(H_j,H_a){var H_k={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(H_a,H_b){return 1==arguments.length?H_k.__presubstr.call(this,H_a):H_k.__presubstr.call(this,H_a,0<H_b?H_b:this.length+H_b)},__init:function(H_a){H_a.forEach(function(H_a){H_a.__init$&&H_a.__init$()})},__isClass:function(H_a){return H_a&&(H_a.__isclass||H_a==Object||H_a==String||H_a==Array)},__newvec:function(H_a,H_b){var H_c=[];H_c.length=H_a;for(var H_d=0;H_d<H_a;H_d++)H_c[H_d]=H_b;return H_c},__extend:function(H_a,H_b){for(var H_c in H_b)if(H_b.hasOwnProperty(H_c)){var H_d=Object.getOwnPropertyDescriptor(H_b,H_c),H_e=H_d.get,H_f=H_d.set;H_e||H_f?H_e&&H_f?Object.defineProperty(H_a,H_c,H_d):(H_e&&Object.defineProperty(H_a,H_c,H_e),H_f&&Object.defineProperty(H_a,H_c,H_f)):H_a[H_c]=H_b[H_c]}function H_g(){H_k.un(this,"constructor",H_a)}H_g.prototype=H_b.prototype,H_a.prototype=new H_g,H_k.un(H_a.prototype,"__imps",H_k.__copy({},H_b.prototype.__imps))},__copy:function(H_a,H_b){if(!H_b)return null;for(var H_c in H_a=H_a||{},H_b)H_a[H_c]=H_b[H_c];return H_a},__package:function(H_a,H_b){if(!H_k.__packages[H_a]){H_k.__packages[H_a]=!0;var H_c=H_j,H_d=H_a.split(".");if(1<H_d.length)for(var H_e=0,H_f=H_d.length-1;H_e<H_f;H_e++){var H_g=H_c[H_d[H_e]];H_c=H_g||(H_c[H_d[H_e]]={})}H_c[H_d[H_d.length-1]]||(H_c[H_d[H_d.length-1]]=H_b||{})}},__hasOwnProperty:function(H_a,H_b){return H_b=H_b||this,Object.hasOwnProperty.call(H_b,H_a)||function H_a(H_b,H_c){if(Object.hasOwnProperty.call(H_c.prototype,H_b))return!0;var H_d=H_c.prototype.__super;return null==H_d?null:H_a(H_b,H_d)}(H_a,H_b.__class)},__typeof:function(H_a,H_b){if(!H_a||!H_b)return!1;if(H_b===String)return"string"==typeof H_a;if(H_b===Number)return"number"==typeof H_a;if(H_b.__interface__)H_b=H_b.__interface__;else if("string"!=typeof H_b)return H_a instanceof H_b;return H_a.__imps&&H_a.__imps[H_b]||H_a.__class==H_b},__as:function(H_a,H_b){return this.__typeof(H_a,H_b)?H_a:null},__int:function(H_a){return H_a?parseInt(H_a):0},interface:function(H_a,H_b){H_k.__package(H_a,{});var H_c=H_k.__internals,H_d=H_c[H_a]=H_c[H_a]||{self:H_a};if(H_b){var H_e=H_b.split(",");H_d.extend=[];for(var H_f=0;H_f<H_e.length;H_f++){var H_g=H_e[H_f];H_c[H_g]=H_c[H_g]||{self:H_g},H_d.extend.push(H_c[H_g])}}var H_h=H_j,H_i=H_a.split(".");for(H_f=0;H_f<H_i.length-1;H_f++)H_h=H_h[H_i[H_f]];H_h[H_i[H_i.length-1]]={__interface__:H_a}},class:function(H_a,H_b,H_c,H_d){if(H_c&&H_k.__extend(H_a,H_c),H_b)if(H_k.__package(H_b,H_a),H_k.__classmap[H_b]=H_a,0<H_b.indexOf(".")){if(0==H_b.indexOf("laya.")){var H_e=H_b.split(".");H_d=H_d||H_e[H_e.length-1],H_k[H_d]&&console.log("Warning!,this class["+H_d+"] already exist:",H_k[H_d]),H_k[H_d]=H_a}}else"Main"==H_b?H_j.Main=H_a:"MainWX"==H_b?H_j.MainWX=H_a:(H_k[H_b]&&console.log("Error!,this class["+H_b+"] already exist:",H_k[H_b]),H_k[H_b]=H_a);var H_f=H_k.un,H_g=H_a.prototype;H_f(H_g,"hasOwnProperty",H_k.__hasOwnProperty),H_f(H_g,"__class",H_a),H_f(H_g,"__super",H_c),H_f(H_g,"__className",H_b),H_f(H_a,"__super",H_c),H_f(H_a,"__className",H_b),H_f(H_a,"__isclass",!0),H_f(H_a,"super",function(H_a){this.__super.call(H_a)})},imps:function(H_a,H_b){if(!H_b)return null;var H_e=H_a.__imps||H_k.un(H_a,"__imps",{});function H_f(H_a){var H_b,H_c;if((H_b=H_k.__internals[H_a])&&(H_e[H_a]=!0,H_c=H_b.extend))for(var H_d=0;H_d<H_c.length;H_d++)H_f(H_c[H_d].self)}for(var H_c in H_b)H_f(H_c)},superSet:function(H_a,H_b,H_c,H_d){var H_e=H_a.prototype["_$set_"+H_c];H_e&&H_e.call(H_b,H_d)},superGet:function(H_a,H_b,H_c){var H_d=H_a.prototype["_$get_"+H_c];return H_d?H_d.call(H_b):null},getset:function(H_a,H_b,H_c,H_d,H_e){H_a?(H_d&&(H_b["_$GET_"+H_c]=H_d),H_e&&(H_b["_$SET_"+H_c]=H_e)):(H_d&&H_k.un(H_b,"_$get_"+H_c,H_d),H_e&&H_k.un(H_b,"_$set_"+H_c,H_e)),H_d&&H_e?Object.defineProperty(H_b,H_c,{get:H_d,set:H_e,enumerable:!1,configurable:!0}):(H_d&&Object.defineProperty(H_b,H_c,{get:H_d,enumerable:!1,configurable:!0}),H_e&&Object.defineProperty(H_b,H_c,{set:H_e,enumerable:!1,configurable:!0}))},static:function(H_c,H_d){for(var H_e=0,H_a=H_d.length;H_e<H_a;H_e+=2)if("length"==H_d[H_e])H_c.length=H_d[H_e+1].call(H_c);else{function H_b(){var H_b=H_d[H_e],H_a=H_d[H_e+1];Object.defineProperty(H_c,H_b,{get:function(){return delete this[H_b],this[H_b]=H_a.call(this)},set:function(H_a){delete this[H_b],this[H_b]=H_a},enumerable:!0,configurable:!0})}H_b()}},un:function(H_a,H_b,H_c){return H_c||(H_c=H_a[H_b]),H_k.__propun.value=H_c,Object.defineProperty(H_a,H_b,H_k.__propun),H_c},uns:function(H_b,H_a){H_a.forEach(function(H_a){H_k.un(H_b,H_a)})}};return H_j.console=H_j.console||{log:function(){}},H_j.trace=H_j.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),H_k}(window,document);!function(H_a,H_b,H_c){H_c.un,H_c.uns,H_c.static,H_c.class,H_c.getset,H_c.__newvec}(window,document,Laya),function(H_g,H_b,H_z){H_z.un,H_z.uns;var H_i=H_z.static,H_k=H_z.class,H_q=H_z.getset;H_z.__newvec;H_z.interface("laya.runtime.IMarket"),H_z.interface("laya.filters.IFilter"),H_z.interface("laya.display.ILayout"),H_z.interface("laya.resource.IDispose"),H_z.interface("laya.runtime.IPlatform"),H_z.interface("laya.resource.IDestroy"),H_z.interface("laya.runtime.IConchNode"),H_z.interface("laya.filters.IFilterAction"),H_z.interface("laya.runtime.ICPlatformClass"),H_z.interface("laya.resource.ICreateResource"),H_z.interface("laya.runtime.IConchRenderObject"),H_z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var H_F=function(){function H_f(){}return H_k(H_f,"laya.utils.RunDriver"),H_f.FILTER_ACTIONS=[],H_f.pixelRatio=-1,H_f._charSizeTestDiv=null,H_f.now=function(){return Date.now()},H_f.getWindow=function(){return H_g},H_f.getPixelRatio=function(){if(H_f.pixelRatio<0){var H_a=H_O.context,H_b=H_a.backingStorePixelRatio||H_a.webkitBackingStorePixelRatio||H_a.mozBackingStorePixelRatio||H_a.msBackingStorePixelRatio||H_a.oBackingStorePixelRatio||H_a.backingStorePixelRatio||1;(H_f.pixelRatio=(H_O.window.devicePixelRatio||1)/H_b)<1&&(H_f.pixelRatio=1)}return H_f.pixelRatio},H_f.getIncludeStr=function(H_a){return null},H_f.createShaderCondition=function(H_a){var H_b="(function() {return "+H_a+";})";return H_z._runScript(H_b)},H_f.fontMap=[],H_f.measureText=function(H_a,H_b){var H_c=H_f.hanzi.test(H_a);if(H_c&&H_f.fontMap[H_b])return H_f.fontMap[H_b];var H_d=H_O.context;H_d.font=H_b;var H_e=H_d.measureText(H_a);return H_e||(H_e={width:16,height:16}),H_c&&(H_f.fontMap[H_b]=H_e),H_e},H_f.getWebGLContext=function(H_a){},H_f.beginFlush=function(){},H_f.endFinish=function(){},H_f.addToAtlas=null,H_f.flashFlushImage=function(H_a){},H_f.drawToCanvas=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_va.create("2D"),H_h=new H_K(H_c,H_d,H_g);return H_L.renders[H_b]._fun(H_a,H_h,H_e,H_f),H_g},H_f.createParticleTemplate2D=null,H_f.createGLTextur=null,H_f.createWebGLContext2D=null,H_f.changeWebGLSize=function(H_a,H_b){},H_f.createRenderSprite=function(H_a,H_b){return new H_L(H_a,H_b)},H_f.createFilterAction=function(H_a){return new H_v},H_f.createGraphics=function(){return new H_m},H_f.clear=function(H_a){H_J._context.ctx.clear()},H_f.cancelLoadByUrl=function(H_a){},H_f.clearAtlas=function(H_a){},H_f.isAtlas=function(H_a){return!1},H_f.addTextureToAtlas=function(H_a){},H_f.getTexturePixels=function(H_a,H_b,H_c,H_d,H_e){return null},H_f.skinAniSprite=function(){return null},H_f.update3DLoop=function(){},H_i(H_f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),H_f}(),H_d=(H_q(1,H_z,"alertGlobalError",null,function(H_a){var H_f=0;H_O.window.onerror=H_a?function(H_a,H_b,H_c,H_d,H_e){H_f++<5&&H_e&&alert(H_e.stack||H_e)}:null}),H_z.init=function(H_a,H_b,H_c){for(var H_d=[],H_e=2,H_f=arguments.length;H_e<H_f;H_e++)H_d.push(arguments[H_e]);if(!H_z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=H_z._arrayBufferSlice),H_z._isinit=!0,H_O.__init__(),H_M.__init__(),H_m.__init__(),H_z.timer=new H_Y,H_z.scaleTimer=new H_Y,H_z.loader=new H_ia,H_o.__init__(),H_e=0;for(var H_g=H_d.length;H_e<H_g;H_e++)H_d[H_e].enable&&H_d[H_e].enable();return H_n.__init__(),H_h.__init__(),H_N.__init__(),H_Q.beginCheck(),H_z._currentStage=H_z.stage=new H_ta,H_z.stage.conchModel&&H_z.stage.conchModel.setRootNode(),H_z._getUrlPath(),H_z.render=new H_J(0,0),H_z.stage.size(H_a,H_b),H_L.__init__(),H_l.__init__(),H_r.instance.__init__(H_z.stage,H_J.canvas),H_xa.__init__(),H_E.autoStopMusic=!0,H_C.__init__(),H_J.canvas}},H_z._getUrlPath=function(){var H_a=H_O.window.location,H_b=H_a.pathname;H_b=H_b&&":"==H_b.charAt(2)?H_b.substring(1):H_b,H_I.rootPath=H_I.basePath=H_I.getPath("file:"==H_a.protocol?H_b:H_a.protocol+"//"+H_a.host+H_a.pathname)},H_z._arrayBufferSlice=function(H_a,H_b){var H_c=new Uint8Array(this,H_a,H_b-H_a),H_d=new Uint8Array(H_c.length);return H_d.set(H_c),H_d.buffer},H_z._runScript=function(H_a){return H_O.window[H_z._evcode](H_a)},H_z.stage=null,H_z.timer=null,H_z.scaleTimer=null,H_z.loader=null,H_z.version="1.8.6",H_z.render=null,H_z._currentStage=null,H_z._isinit=!1,H_z.isDebug=!1,H_z.MiniAdpter={init:function(){H_g.navigator&&H_g.navigator.userAgent&&-1<H_g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},H_i(H_z,["conchMarket",function(){return this.conchMarket=H_g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=H_g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function H_a(){}return H_k(H_a,"Config"),H_a.WebGLTextCacheCount=500,H_a.atlasEnable=!1,H_a.showCanvasMark=!1,H_a.animationInterval=50,H_a.isAntialias=!1,H_a.isAlpha=!1,H_a.premultipliedAlpha=!0,H_a.isStencil=!0,H_a.preserveDrawingBuffer=!1,H_a}()),H_j=function(){function H_j(){this._events=null}H_k(H_j,"laya.events.EventDispatcher");var H_a=H_j.prototype;return H_a.hasListener=function(H_a){return!!(this._events&&this._events[H_a])},H_a.getListener=function(H_a){return this._events?this._events[H_a]:null},H_a.event=function(H_a,H_b){if(!this._events||!this._events[H_a])return!1;var H_c=this._events[H_a];if(H_c.lock)H_c.queue||(H_c.queue=[]),H_c.queue.push(H_b);else{var H_d;for(H_c.lock=!0,H_c.cursor=H_c.head;H_c.cursor;)(H_d=H_c.cursor).recover?(H_c.head=H_c.tail=H_c.cursor=null,console.error("node is recover："+H_d.id)):(H_c.cursor=H_d.next,H_d.once&&H_j.delNode(H_c,H_d),H_d.method&&(null!=H_b?H_d.args?H_d.method.apply(H_d.caller,H_d.args.concat(H_b)):H_b instanceof Array?H_d.method.apply(H_d.caller,H_b):H_d.caller?H_d.method.call(H_d.caller,H_b):H_z.recordError("事件派发错误","node.caller:"+H_d.caller+"node.method:"+H_d.method+"data:"+H_b+"node.prev"+H_d.prev):H_d.method.apply(H_d.caller,H_d.args)),H_d.once&&H_j.recoverHandler(H_d));H_c.lock=!1,!H_c.head&&this._events&&this._events[H_a]==H_c&&delete this._events[H_a],H_c.queue&&H_c.queue.length&&this.event(H_a,H_c.queue.shift())}return!0},H_a.on=function(H_a,H_b,H_c,H_d){return this._createListener(H_a,H_b,H_c,H_d,!1)},H_a.once=function(H_a,H_b,H_c,H_d){return this._createListener(H_a,H_b,H_c,H_d,!0)},H_a._createListener=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=!0),H_f&&this.off(H_a,H_b,H_c,H_e);var H_g=H_j.createHandler(H_b||this,H_c,H_d,H_e);this._events||(this._events={});var H_h=this._events,H_i=H_h[H_a];return H_i?H_i.tail?(H_g.prev=H_i.tail,H_i.tail.next=H_g,H_i.tail=H_g):H_i.head=H_i.tail=H_g:H_h[H_a]={head:H_g,tail:H_g,cursor:null,lock:!1},this},H_a.off=function(H_a,H_b,H_c,H_d){if(void 0===H_d&&(H_d=!1),!this._events||!this._events[H_a])return this;for(var H_e=this._events[H_a],H_f=H_e.head;H_f;){if((!H_b||H_f.caller===H_b)&&H_f.method===H_c&&(!H_d||H_f.once)){H_j.delNode(H_e,H_f),H_e.cursor==H_f&&(H_e.cursor=H_f.next),H_j.recoverHandler(H_f);break}H_f=H_f.next}return this},H_a.offAll=function(H_a){var H_b=this._events;if(!H_b)return this;if(H_a)this._recoverHandlers(H_b[H_a]),delete H_b[H_a];else{for(var H_c in H_b)this._recoverHandlers(H_b[H_c]);this._events=null}return this},H_a._recoverHandlers=function(H_a){if(H_a){for(var H_b=H_a.head;H_b;){H_j.delNode(H_a,H_b);var H_c=H_b.next;H_j.recoverHandler(H_b),H_b=H_c}H_a.cursor=null}},H_a.isMouseEvent=function(H_a){return H_j.MOUSE_EVENTS[H_a]},H_j.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},H_j.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},H_j.delNode=function(H_a,H_b){H_b.prev?H_b.prev.next=H_b.next:H_a.head=H_b.next,H_b.next?H_b.next.prev=H_b.prev:H_a.tail=H_b.prev},H_j.createHandler=function(H_a,H_b,H_c,H_d){var H_e=500<H_j._freeHandler.length?H_j._freeHandler.shift():null;if(H_e)if(H_e.recover)H_e.recover=!1,H_e.caller=H_a,H_e.method=H_b,H_e.args=H_c,H_e.once=H_d;else{var H_f="";try{arguments.propertyIsEnumerable.caller}catch(H_a){H_f=H_a.stack}var H_g=H_e.caller?(H_e.caller.__proto__&&H_e.caller.__proto__.constructor&&H_e.caller.__proto__.constructor.name)+"|"+H_e.caller.__className+"|"+H_e.caller.name:"",H_h=H_e.method?H_e.method.name:"";H_z.recordError("EventDispatcher重复创建","caller="+H_g+"  method="+H_h+"  stack="+H_f),H_e={id:++H_j._nodeCount,caller:H_a,method:H_b,args:H_c,once:H_d,recover:!1}}else H_e={id:++H_j._nodeCount,caller:H_a,method:H_b,args:H_c,once:H_d,recover:!1};return H_e.prev=H_e.next=null,H_e},H_j.recoverHandler=function(H_a){if(H_a.recover){if(H_j._errorCount<5){H_j._errorCount++;var H_b="";try{arguments.propertyIsEnumerable.caller}catch(H_a){H_b=H_a.stack}var H_c=H_a.caller?(H_a.caller.__proto__&&H_a.caller.__proto__.constructor&&H_a.caller.__proto__.constructor.name)+"|"+H_a.caller.__className+"|"+H_a.caller.name:"",H_d=H_a.method?H_a.method.name:"";H_z.recordError("EventDispatcher重复回收","id="+H_a.id+"  caller="+H_c+"  method="+H_d+"  stack="+H_b)}H_a.caller=H_a.method=H_a.args=H_a.prev=null}else H_a.recover=!0,H_a.caller=H_a.method=H_a.args=H_a.prev=H_a.next=null,H_j._freeHandler&&H_j._freeHandler.length<3e3&&H_j._freeHandler.push(H_a)},H_j._freeHandler=[],H_j._nodeCount=0,H_j._errorCount=0,H_j}(),H_u=function(){function H_e(H_a,H_b,H_c,H_d){this.once=!1,void(this._id=0)===H_d&&(H_d=!1),this.setTo(H_a,H_b,H_c,H_d)}H_k(H_e,"laya.utils.Handler");var H_a=H_e.prototype;return H_a.setTo=function(H_a,H_b,H_c,H_d){return this._id=H_e._gid++,this.caller=H_a,this.method=H_b,this.args=H_c,this.once=H_d,this},H_a.run=function(){if(null==this.method)return null;var H_a=this._id,H_b=this.method.apply(this.caller,this.args);return this._id===H_a&&this.once&&this.recover(),H_b},H_a.runWith=function(H_a){if(null==this.method)return null;var H_b=this._id;if(null==H_a)var H_c=this.method.apply(this.caller,this.args);else H_c=this.args||H_a.unshift?this.args?this.method.apply(this.caller,this.args.concat(H_a)):this.method.apply(this.caller,H_a):this.method.call(this.caller,H_a);return this._id===H_b&&this.once&&this.recover(),H_c},H_a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},H_a.recover=function(){0<this._id&&(this._id=0,this.clear())},H_e.create=function(H_a,H_b,H_c,H_d){return void 0===H_d&&(H_d=!0),new H_e(H_a,H_b,H_c,H_d)},H_e._gid=1,H_e}(),H_D=function(){function H_a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}H_k(H_a,"laya.display.BitmapFont");var H_b=H_a.prototype;return H_b.loadFont=function(H_a,H_b){this._path=H_a,this._complete=H_b,H_z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],H_u.create(this,this.onLoaded))},H_b.onLoaded=function(){this.parseFont(H_ha.getRes(this._path),H_ha.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},H_b.parseFont=function(H_a,H_b){if(null!=H_a&&null!=H_b){this._texture=H_b;var H_c=H_a.getElementsByTagName("info");if(!H_c[0].getAttributeNode)return this.parseFont2(H_a,H_b);this.fontSize=parseInt(H_c[0].getAttributeNode("size").nodeValue);var H_d,H_e=H_c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(H_e[0]),parseInt(H_e[1]),parseInt(H_e[2]),parseInt(H_e[3])],H_d=H_a.getElementsByTagName("char");var H_f=0;for(H_f=0;H_f<H_d.length;H_f++){var H_g=H_d[H_f],H_h=parseInt(H_g.getAttributeNode("id").nodeValue),H_i=parseInt(H_g.getAttributeNode("xoffset").nodeValue)/1,H_j=parseInt(H_g.getAttributeNode("yoffset").nodeValue)/1,H_k=parseInt(H_g.getAttributeNode("xadvance").nodeValue)/1,H_l=new H_B;H_l.x=parseInt(H_g.getAttributeNode("x").nodeValue),H_l.y=parseInt(H_g.getAttributeNode("y").nodeValue),H_l.width=parseInt(H_g.getAttributeNode("width").nodeValue),H_l.height=parseInt(H_g.getAttributeNode("height").nodeValue);var H_m=H_ka.create(H_b,H_l.x,H_l.y,H_l.width,H_l.height,H_i,H_j);this._maxWidth=Math.max(this._maxWidth,H_k+this.letterSpacing),this._fontCharDic[H_h]=H_m,this._fontWidthMap[H_h]=H_k}}},H_b.parseFont2=function(H_a,H_b){if(null!=H_a&&null!=H_b){this._texture=H_b;var H_c=H_a.getElementsByTagName("info");this.fontSize=parseInt(H_c[0].attributes.size.nodeValue);var H_d=H_c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(H_d[0]),parseInt(H_d[1]),parseInt(H_d[2]),parseInt(H_d[3])];var H_e=H_a.getElementsByTagName("char"),H_f=0;for(H_f=0;H_f<H_e.length;H_f++){var H_g=H_e[H_f].attributes,H_h=parseInt(H_g.id.nodeValue),H_i=parseInt(H_g.xoffset.nodeValue)/1,H_j=parseInt(H_g.yoffset.nodeValue)/1,H_k=parseInt(H_g.xadvance.nodeValue)/1,H_l=new H_B;H_l.x=parseInt(H_g.x.nodeValue),H_l.y=parseInt(H_g.y.nodeValue),H_l.width=parseInt(H_g.width.nodeValue),H_l.height=parseInt(H_g.height.nodeValue);var H_m=H_ka.create(H_b,H_l.x,H_l.y,H_l.width,H_l.height,H_i,H_j);this._maxWidth=Math.max(this._maxWidth,H_k+this.letterSpacing),this._fontCharDic[H_h]=H_m,this._fontWidthMap[H_h]=H_k}}},H_b.getCharTexture=function(H_a){return this._fontCharDic[H_a.charCodeAt(0)]},H_b.destroy=function(){if(this._texture){for(var H_a in this._fontCharDic){var H_b=this._fontCharDic[H_a];H_b&&H_b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},H_b.setSpaceWidth=function(H_a){this._spaceWidth=H_a},H_b.getCharWidth=function(H_a){var H_b=H_a.charCodeAt(0);return this._fontWidthMap[H_b]?this._fontWidthMap[H_b]+this.letterSpacing:" "==H_a?this._spaceWidth+this.letterSpacing:0},H_b.getTextWidth=function(H_a){for(var H_b=0,H_c=0,H_d=H_a.length;H_c<H_d;H_c++)H_b+=this.getCharWidth(H_a.charAt(H_c));return H_b},H_b.getMaxWidth=function(){return this._maxWidth},H_b.getMaxHeight=function(){return this.fontSize},H_b.drawText=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h=this.getTextWidth(H_a),H_i=0;"center"===H_e&&(H_i=(H_f-H_h)/2),"right"===H_e&&(H_i=H_f-H_h);for(var H_j=0,H_k=0,H_l=H_a.length;H_k<H_l;H_k++)(H_g=this.getCharTexture(H_a.charAt(H_k)))&&(H_b.graphics.drawTexture(H_g,H_c+H_j+H_i,H_d),H_j+=this.getCharWidth(H_a.charAt(H_k)))},H_a}(),H_h=function(){function H_c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=H_c._TF_EMPTY}H_k(H_c,"laya.display.css.Style");var H_a=H_c.prototype;return H_a.getTransform=function(){return this._tf},H_a.setTransform=function(H_a){this._tf="none"!==H_a&&H_a?H_a:H_c._TF_EMPTY},H_a.setTranslateX=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.translateX=H_a},H_a.setTranslateY=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.translateY=H_a},H_a.setScaleX=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.scaleX=H_a},H_a.setScale=function(H_a,H_b){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.scaleX=H_a,this._tf.scaleY=H_b},H_a.setScaleY=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.scaleY=H_a},H_a.setRotate=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.rotate=H_a},H_a.setSkewX=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.skewX=H_a},H_a.setSkewY=function(H_a){this._tf===H_c._TF_EMPTY&&(this._tf=new H_e),this._tf.skewY=H_a},H_a.destroy=function(){this.scrollRect=null},H_a.render=function(H_a,H_b,H_c,H_d){},H_a.getCSSStyle=function(){return H_ba.EMPTY},H_a._enableLayout=function(){return!1},H_q(0,H_a,"scaleX",function(){return this._tf.scaleX},function(H_a){this.setScaleX(H_a)}),H_q(0,H_a,"transform",function(){return this.getTransform()},function(H_a){this.setTransform(H_a)}),H_q(0,H_a,"translateX",function(){return this._tf.translateX},function(H_a){this.setTranslateX(H_a)}),H_q(0,H_a,"translateY",function(){return this._tf.translateY},function(H_a){this.setTranslateY(H_a)}),H_q(0,H_a,"scaleY",function(){return this._tf.scaleY},function(H_a){this.setScaleY(H_a)}),H_q(0,H_a,"block",function(){return 0!=(1&this._type)}),H_q(0,H_a,"skewY",function(){return this._tf.skewY},function(H_a){this.setSkewY(H_a)}),H_q(0,H_a,"rotate",function(){return this._tf.rotate},function(H_a){this.setRotate(H_a)}),H_q(0,H_a,"skewX",function(){return this._tf.skewX},function(H_a){this.setSkewX(H_a)}),H_q(0,H_a,"paddingLeft",function(){return 0}),H_q(0,H_a,"paddingTop",function(){return 0}),H_q(0,H_a,"absolute",function(){return!0}),H_c.__init__=function(){H_c._TF_EMPTY=new H_e,H_c.EMPTY=new H_c},H_c.EMPTY=null,H_c._TF_EMPTY=null,H_c}(),H_n=function(){function H_b(H_a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=H_S.create(H_b.defaultColor),this.family=H_b.defaultFamily,this.stroke=H_b._STROKE,this.size=H_b.defaultSize,H_a&&H_a!==H_b.EMPTY&&H_a.copyTo(this)}H_k(H_b,"laya.display.css.Font");var H_a=H_b.prototype;return H_a.set=function(H_a){this._text=null;for(var H_b=H_a.split(" "),H_c=0,H_d=H_b.length;H_c<H_d;H_c++){var H_e=H_b[H_c];switch(H_e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<H_e.indexOf("px")&&(this.size=parseInt(H_e),this.family=H_b[H_c+1],H_c++)}},H_a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},H_a.copyTo=function(H_a){H_a._type=this._type,H_a._text=this._text,H_a._weight=this._weight,H_a._color=this._color,H_a.family=this.family,H_a.stroke=this.stroke!=H_b._STROKE?this.stroke.slice():H_b._STROKE,H_a.indent=this.indent,H_a.size=this.size},H_q(0,H_a,"password",function(){return 0!=(1024&this._type)},function(H_a){H_a?this._type|=1024:this._type&=-1025}),H_q(0,H_a,"color",function(){return this._color.strColor},function(H_a){this._color=H_S.create(H_a)}),H_q(0,H_a,"italic",function(){return 0!=(512&this._type)},function(H_a){H_a?this._type|=512:this._type&=-513}),H_q(0,H_a,"bold",function(){return 0!=(2048&this._type)},function(H_a){H_a?this._type|=2048:this._type&=-2049}),H_q(0,H_a,"weight",function(){return""+this._weight},function(H_a){var H_b=0;switch(H_a){case"normal":break;case"bold":this.bold=!0,H_b=700;break;case"bolder":H_b=800;break;case"lighter":H_b=100;break;default:H_b=parseInt(H_a)}this._weight=H_b,this._text=null}),H_q(0,H_a,"decoration",function(){return this._decoration?this._decoration.value:null},function(H_a){var H_b=H_a.split(" ");switch(this._decoration||(this._decoration={}),H_b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=H_b[0]}H_b[1]&&(this._decoration.color=H_S.create(H_b)),this._decoration.value=H_a}),H_b.__init__=function(){H_b.EMPTY=new H_b(null)},H_b.EMPTY=null,H_b.defaultColor="#000000",H_b.defaultSize=12,H_b.defaultFamily="Arial",H_b.defaultFont="12px Arial",H_b._STROKE=[0,"#000000"],H_b._ITALIC=512,H_b._PASSWORD=1024,H_b._BOLD=2048,H_b}(),H_e=function(){function H_a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return H_k(H_a,"laya.display.css.TransformInfo"),H_a}(),H_m=function(){function H_l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,H_J.isConchNode){this._nativeObj=new H_g._conchGraphics,this.id=this._nativeObj.conchID}}H_k(H_l,"laya.display.Graphics");var H_a=H_l.prototype;return H_a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},H_a.clear=function(H_a){void 0===H_a&&(H_a=!1);var H_b=0,H_c=0;if(H_a){var H_d=this._one;if(this._cmds){for(H_c=this._cmds.length,H_b=0;H_b<H_c;H_b++)!(H_d=this._cmds[H_b])||H_d.callee!==H_J._context._drawTexture&&H_d.callee!==H_J._context._drawTextureWithTransform||(H_d[0]=null,H_l._cache.push(H_d));this._cmds.length=0}else H_d&&(!H_d||H_d.callee!==H_J._context._drawTexture&&H_d.callee!==H_J._context._drawTextureWithTransform||(H_d[0]=null,H_l._cache.push(H_d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(H_b=0,H_c=this._vectorgraphArray.length;H_b<H_c;H_b++)H__.getInstance().deleteShape(this._vectorgraphArray[H_b]);this._vectorgraphArray.length=0}},H_a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},H_a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new H_c,this._graphicBounds._graphics=this)},H_a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},H_a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},H_a.getBounds=function(H_a){return void 0===H_a&&(H_a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(H_a)},H_a.getBoundPoints=function(H_a){return void 0===H_a&&(H_a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(H_a)},H_a._addCmd=function(H_a){this._cmds=this._cmds||[],H_a.callee=H_a.shift(),this._cmds.push(H_a)},H_a.setFilters=function(H_a){this._saveToCmd(H_J._context._setFilters,H_a)},H_a.drawTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_g&&(H_g=1),!H_a||H_g<.01)return null;H_d||(H_d=H_a.sourceWidth),H_e||(H_e=H_a.sourceHeight),H_g=H_g<0?0:1<H_g?1:H_g;var H_h,H_i=!H_J.isWebGL&&(H_O.onFirefox||H_O.onEdge||H_O.onIE||H_O.onSafari)?.5:0,H_j=H_d/H_a.sourceWidth,H_k=H_e/H_a.sourceHeight;return H_d=H_a.width*H_j,H_e=H_a.height*H_k,H_a.loaded&&(H_d<=0||H_e<=0)?null:(H_b+=H_a.offsetX*H_j,H_c+=H_a.offsetY*H_k,this._sp&&(this._sp._renderType|=512),H_b-=H_i,H_c-=H_i,H_d+=2*H_i,H_e+=2*H_i,H_l._cache.length?((H_h=H_l._cache.pop())[0]=H_a,H_h[1]=H_b,H_h[2]=H_c,H_h[3]=H_d,H_h[4]=H_e,H_h[5]=H_f,H_h[6]=H_g):H_h=[H_a,H_b,H_c,H_d,H_e,H_f,H_g],H_h.callee=H_f||1!=H_g?H_J._context._drawTextureWithTransform:H_J._context._drawTexture,null!=this._one||H_f||1!=H_g?this._saveToCmd(H_h.callee,H_h):(this._one=H_h,this._render=this._renderOneImg),H_a.loaded||H_a.once("loaded",this,this._textureLoaded,[H_a,H_h]),this._repaint(),H_h)},H_a.cleanByTexture=function(H_a,H_b,H_c,H_d,H_e){if(void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),!H_a)return this.clear();if(this._one&&this._render===this._renderOneImg){H_d||(H_d=H_a.sourceWidth),H_e||(H_e=H_a.sourceHeight);var H_f=H_d/H_a.sourceWidth,H_g=H_e/H_a.sourceHeight;H_d=H_a.width*H_f,H_e=H_a.height*H_g,H_b+=H_a.offsetX*H_f,H_c+=H_a.offsetY*H_g,this._one[0]=H_a,this._one[1]=H_b,this._one[2]=H_c,this._one[3]=H_d,this._one[4]=H_e,this._repaint()}else this.clear(),H_a&&this.drawTexture(H_a,H_b,H_c,H_d,H_e)},H_a.drawTextures=function(H_a,H_b){H_a&&this._saveToCmd(H_J._context._drawTextures,[H_a,H_b])},H_a.fillTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f="repeat"),H_a){var H_h=[H_a,H_b,H_c,H_d,H_e,H_f,H_g||H_A.EMPTY,{}];H_a.loaded||H_a.once("loaded",this,this._textureLoaded,[H_a,H_h]),this._saveToCmd(H_J._context._fillTexture,H_h)}},H_a._textureLoaded=function(H_a,H_b){H_b[3]=H_b[3]||H_a.width,H_b[4]=H_b[4]||H_a.height,this._repaint()},H_a.fillCircle=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_c.bitmap.enableMerageInAtlas=!1;var H_h=new Float32Array(2*(H_g+1)),H_i=new Float32Array(2*(H_g+1)),H_j=new Uint16Array(3*H_g),H_k=2*Math.PI/H_g,H_l=0;H_h[0]=H_d,H_h[1]=H_e,H_i[0]=H_d/H_c.width,H_i[1]=H_e/H_c.height;for(var H_m=2,H_n=0;H_n<H_g;H_n++){var H_q=H_f*Math.cos(H_l)+H_d,H_r=H_f*Math.sin(H_l)+H_e;H_h[H_m]=H_q,H_h[H_m+1]=H_r,H_i[H_m]=H_q/H_c.width,H_i[H_m+1]=H_r/H_c.height,H_l+=H_k,H_m+=2}for(H_n=H_m=0;H_n<H_g;H_n++)H_j[H_m++]=0,H_j[H_m++]=H_n+1,H_j[H_m++]=H_g+1<=H_n+2?1:H_n+2;this.drawTriangles(H_c,H_a,H_b,H_h,H_i,H_j)},H_a.drawTriangles=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){void 0===H_h&&(H_h=1),this._saveToCmd(H_J._context.drawTriangles,[H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j])},H_a._saveToCmd=function(H_a,H_b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=H_b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(H_b)),H_b.callee=H_a,this._repaint(),H_b},H_a.clipRect=function(H_a,H_b,H_c,H_d){this._saveToCmd(H_J._context._clipRect,[H_a,H_b,H_c,H_d])},H_a.fillText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){void 0===H_g&&(H_g=0),this._saveToCmd(H_J._context._fillText,[H_a,H_b,H_c,H_d||H_n.defaultFont,H_e,H_f])},H_a.fillBorderText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){this._saveToCmd(H_J._context._fillBorderText,[H_a,H_b,H_c,H_d||H_n.defaultFont,H_e,H_f,H_g,H_h])},H_a.strokeText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._saveToCmd(H_J._context._strokeText,[H_a,H_b,H_c,H_d||H_n.defaultFont,H_e,H_f,H_g])},H_a.alpha=function(H_a){H_a=H_a<0?0:1<H_a?1:H_a,this._saveToCmd(H_J._context._alpha,[H_a])},H_a.setAlpha=function(H_a){H_a=H_a<0?0:1<H_a?1:H_a,this._saveToCmd(H_J._context._setAlpha,[H_a])},H_a.transform=function(H_a,H_b,H_c){void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),this._saveToCmd(H_J._context._transform,[H_a,H_b,H_c])},H_a.rotate=function(H_a,H_b,H_c){void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),this._saveToCmd(H_J._context._rotate,[H_a,H_b,H_c])},H_a.scale=function(H_a,H_b,H_c,H_d){void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),this._saveToCmd(H_J._context._scale,[H_a,H_b,H_c,H_d])},H_a.translate=function(H_a,H_b){this._saveToCmd(H_J._context._translate,[H_a,H_b])},H_a.save=function(){this._saveToCmd(H_J._context._save,[])},H_a.restore=function(){this._saveToCmd(H_J._context._restore,[])},H_a.replaceText=function(H_a){this._repaint();var H_b=this._cmds;if(H_b){for(var H_c=H_b.length-1;-1<H_c;H_c--)if(this._isTextCmd(H_b[H_c].callee))return H_b[H_c][0].toUpperCase?H_b[H_c][0]=H_a:H_b[H_c][0].setText(H_a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=H_a:this._one[0].setText(H_a),!0;return!1},H_a._isTextCmd=function(H_a){return H_a===H_J._context._fillText||H_a===H_J._context._fillBorderText||H_a===H_J._context._strokeText},H_a.replaceTextColor=function(H_a){this._repaint();var H_b=this._cmds;if(H_b)for(var H_c=H_b.length-1;-1<H_c;H_c--)this._isTextCmd(H_b[H_c].callee)&&(H_b[H_c][4]=H_a,H_b[H_c][0].toUpperCase||(H_b[H_c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=H_a,this._one[0].toUpperCase||(this._one[0].changed=!0))},H_a.loadImage=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=this;void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0);var H_h=H_ha.getRes(H_a);function H_i(H_a){H_a&&(H_g.drawTexture(H_a,H_b,H_c,H_d,H_e),null!=H_f&&H_f.call(H_g._sp,H_a))}H_h?H_i(H_h):H_z.loader.load(H_a,H_u.create(null,H_i),null,"image")},H_a._renderEmpty=function(H_a,H_b,H_c,H_d){},H_a._renderAll=function(H_a,H_b,H_c,H_d){for(var H_e,H_f=this._cmds,H_g=0,H_h=H_f.length;H_g<H_h;H_g++)(H_e=H_f[H_g]).callee.call(H_b,H_c,H_d,H_e)},H_a._renderOne=function(H_a,H_b,H_c,H_d){this._one.callee.call(H_b,H_c,H_d,this._one)},H_a._renderOneImg=function(H_a,H_b,H_c,H_d){this._one.callee.call(H_b,H_c,H_d,this._one),2305!==H_a._renderType&&(H_a._renderType|=1)},H_a.drawLine=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=1);var H_g=0;H_J.isWebGL&&(H_g=H__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H_g));var H_h=H_f%2==0?0:.5,H_i=[H_a+H_h,H_b+H_h,H_c+H_h,H_d+H_h,H_e,H_f,H_g];this._saveToCmd(H_J._context._drawLine,H_i)},H_a.drawLines=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=1);var H_f=0;if(H_c&&!(H_c.length<4)){H_J.isWebGL&&(H_f=H__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H_f));var H_g=H_e%2==0?0:.5,H_h=[H_a+H_g,H_b+H_g,H_c,H_d,H_e,H_f];this._saveToCmd(H_J._context._drawLines,H_h)}},H_a.drawCurves=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=1);var H_f=[H_a,H_b,H_c,H_d,H_e];this._saveToCmd(H_J._context._drawCurves,H_f)},H_a.drawRect=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){void 0===H_g&&(H_g=1);var H_h=H_f?H_g/2:0,H_i=H_f?H_g:0,H_j=[H_a+H_h,H_b+H_h,H_c-H_i,H_d-H_i,H_e,H_f,H_g];this._saveToCmd(H_J._context._drawRect,H_j)},H_a.drawCircle=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=1);var H_g=H_e?H_f/2:0,H_h=0;H_J.isWebGL&&(H_h=H__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H_h));var H_i=[H_a,H_b,H_c-H_g,H_d,H_e,H_f,H_h];this._saveToCmd(H_J._context._drawCircle,H_i)},H_a.drawPie=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){void 0===H_h&&(H_h=1);var H_i=H_g?H_h/2:0,H_j=H_g?H_h:0,H_k=0;H_J.isWebGL&&(H_k=H__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H_k));var H_l=[H_a+H_i,H_b+H_i,H_c-H_j,H_d,H_e,H_f,H_g,H_h,H_k];H_l[3]=H_$.toRadian(H_d),H_l[4]=H_$.toRadian(H_e),this._saveToCmd(H_J._context._drawPie,H_l)},H_a.drawPoly=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=1);var H_g=0,H_h=!1;H_J.isWebGL&&(H_g=H__.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H_g),H_h=!(6<H_c.length));var H_i=H_e?H_f%2==0?0:.5:0,H_j=[H_a+H_i,H_b+H_i,H_c,H_d,H_e,H_f,H_g,H_h];this._saveToCmd(H_J._context._drawPoly,H_j)},H_a.drawPath=function(H_a,H_b,H_c,H_d,H_e){var H_f=[H_a,H_b,H_c,H_d,H_e];this._saveToCmd(H_J._context._drawPath,H_f)},H_q(0,H_a,"cmds",function(){return this._cmds},function(H_a){this._sp&&(this._sp._renderType|=512),this._cmds=H_a,this._render=this._renderAll,this._repaint()}),H_l.__init__=function(){if(H_J.isConchNode){for(var H_a=laya.display.Graphics.prototype,H_b=H_O.window.ConchGraphics.prototype,H_c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],H_d=0,H_e=H_c.length;H_d<=H_e;H_d++){var H_f=H_c[H_d];H_a[H_f]=H_b[H_f]}H_a._saveToCmd=null,H_b.drawImageS&&(H_a.drawTextures=function(H_a,H_b){if(H_a&&H_a.loaded&&H_a.bitmap&&H_a.source){var H_c=H_a.uv,H_d=H_a.bitmap.width,H_e=H_a.bitmap.height;this.drawImageS(H_a.bitmap.source,H_c[0]*H_d,H_c[1]*H_e,(H_c[2]-H_c[0])*H_d,(H_c[5]-H_c[3])*H_e,H_a.offsetX,H_a.offsetY,H_a.width,H_a.height,H_b)}}),H_a.drawTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_g&&(H_g=1),H_a)if(H_a.loaded){if(H_a.loaded&&H_a.bitmap&&H_a.source&&(H_d||(H_d=H_a.sourceWidth),H_e||(H_e=H_a.sourceHeight),H_g=H_g<0?0:1<H_g?1:H_g,H_d=H_d-H_a.sourceWidth+H_a.width,H_e=H_e-H_a.sourceHeight+H_a.height,!(H_d<=0||H_e<=0))){H_b+=H_a.offsetX,H_c+=H_a.offsetY;var H_h=H_a.uv,H_i=H_a.bitmap.width,H_j=H_a.bitmap.height;H_h[4]<H_h[0]&&H_h[5]<H_h[1]?this.drawImageM(H_a.bitmap.source,H_h[4]*H_i,H_h[5]*H_j,(H_h[0]-H_h[4])*H_i,(H_h[1]-H_h[5])*H_j,H_b,H_c,H_d,H_e,H_f,H_g):this.drawImageM(H_a.bitmap.source,H_h[0]*H_i,H_h[1]*H_j,(H_h[2]-H_h[0])*H_i,(H_h[5]-H_h[3])*H_j,H_b,H_c,H_d,H_e,H_f,H_g),this._repaint()}}else H_a.once("loaded",this,function(){this.drawTexture(H_a,H_b,H_c,H_d,H_e,H_f)})},H_a.fillTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f="repeat"),H_a&&H_a.loaded){var H_h,H_i=H_J._context.ctx,H_j=H_a.bitmap.width,H_k=H_a.bitmap.height,H_l=H_a.uv;H_h=H_a.uv!=H_ka.DEF_UV?H_i.createPattern(H_a.bitmap.source,H_f,H_l[0]*H_j,H_l[1]*H_k,(H_l[2]-H_l[0])*H_j,(H_l[5]-H_l[3])*H_k):H_i.createPattern(H_a.bitmap.source,H_f);var H_m=0,H_n=0;H_g&&(H_b+=H_g.x%H_a.width,H_c+=H_g.y%H_a.height,H_m-=H_g.x%H_a.width,H_n-=H_g.y%H_a.height),this._fillImage(H_h,H_b,H_c,H_m,H_n,H_d,H_e)}}}},H_l._cache=[],H_l}(),H_c=function(){function H_v(){this._cacheBoundsType=!1}H_k(H_v,"laya.display.GraphicsBounds");var H_a=H_v.prototype;return H_a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},H_a.reset=function(){this._temp&&(this._temp.length=0)},H_a.getBounds=function(H_a){return void 0===H_a&&(H_a=!1),(!this._bounds||!this._temp||this._temp.length<1||H_a!=this._cacheBoundsType)&&(this._bounds=H_B._getWrapRec(this.getBoundPoints(H_a),this._bounds)),this._cacheBoundsType=H_a,this._bounds},H_a.getBoundPoints=function(H_a){return void 0===H_a&&(H_a=!1),(!this._temp||this._temp.length<1||H_a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(H_a)),this._cacheBoundsType=H_a,this._rstBoundPoints=H_$.copyArray(this._rstBoundPoints,this._temp)},H_a._getCmdPoints=function(H_a){void 0===H_a&&(H_a=!1);var H_b,H_c,H_d=H_J._context,H_e=this._graphics.cmds;if((H_b=this._temp||(this._temp=[])).length=0,H_e||null==this._graphics._one||(H_v._tempCmds.length=0,H_v._tempCmds.push(this._graphics._one),H_e=H_v._tempCmds),!H_e)return H_b;(H_c=H_v._tempMatrixArrays).length=0;var H_f=H_v._initMatrix;H_f.identity();for(var H_g,H_h,H_i=H_v._tempMatrix,H_j=NaN,H_k=NaN,H_l=NaN,H_m=NaN,H_n=NaN,H_q=NaN,H_r=0,H_s=H_e.length;H_r<H_s;H_r++)if((H_g=H_e[H_r]).callee)switch(H_g.callee){case H_d._save:case 7:H_c.push(H_f),H_f=H_f.clone();break;case H_d._restore:case 8:H_f=H_c.pop();break;case H_d._scale:case 5:H_i.identity(),H_i.translate(-H_g[2],-H_g[3]),H_i.scale(H_g[0],H_g[1]),H_i.translate(H_g[2],H_g[3]),this._switchMatrix(H_f,H_i);break;case H_d._rotate:case 3:H_i.identity(),H_i.translate(-H_g[1],-H_g[2]),H_i.rotate(H_g[0]),H_i.translate(H_g[1],H_g[2]),this._switchMatrix(H_f,H_i);break;case H_d._translate:case 6:H_i.identity(),H_i.translate(H_g[0],H_g[1]),this._switchMatrix(H_f,H_i);break;case H_d._transform:case 4:H_i.identity(),H_i.translate(-H_g[1],-H_g[2]),H_i.concat(H_g[0]),H_i.translate(H_g[1],H_g[2]),this._switchMatrix(H_f,H_i);break;case 16:case 24:H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[0],H_g[1],H_g[2],H_g[3]),H_f);break;case 17:H_f.copyTo(H_i),H_i.concat(H_g[4]),H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[0],H_g[1],H_g[2],H_g[3]),H_i);break;case H_d._drawTexture:H_h=H_g[0],H_a?H_g[3]&&H_g[4]?H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_g[3],H_g[4]),H_f):(H_h=H_g[0],H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_h.width,H_h.height),H_f)):(H_j=(H_g[3]||H_h.sourceWidth)/H_h.width,H_k=(H_g[4]||H_h.sourceHeight)/H_h.height,H_l=H_j*H_h.sourceWidth,H_m=H_k*H_h.sourceHeight,H_n=0<H_h.offsetX?H_h.offsetX:0,H_q=0<H_h.offsetY?H_h.offsetY:0,H_n*=H_j,H_q*=H_k,H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1]-H_n,H_g[2]-H_q,H_l,H_m),H_f));break;case H_d._fillTexture:H_g[3]&&H_g[4]?H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_g[3],H_g[4]),H_f):(H_h=H_g[0],H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_h.width,H_h.height),H_f));break;case H_d._drawTextureWithTransform:var H_t;H_t=H_g[5]?(H_f.copyTo(H_i),H_i.concat(H_g[5]),H_i):H_f,H_a?H_g[3]&&H_g[4]?H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_g[3],H_g[4]),H_t):(H_h=H_g[0],H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1],H_g[2],H_h.width,H_h.height),H_t)):(H_h=H_g[0],H_j=(H_g[3]||H_h.sourceWidth)/H_h.width,H_k=(H_g[4]||H_h.sourceHeight)/H_h.height,H_l=H_j*H_h.sourceWidth,H_m=H_k*H_h.sourceHeight,H_n=0<H_h.offsetX?H_h.offsetX:0,H_q=0<H_h.offsetY?H_h.offsetY:0,H_n*=H_j,H_q*=H_k,H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[1]-H_n,H_g[2]-H_q,H_l,H_m),H_t));break;case H_d._drawRect:case 13:H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[0],H_g[1],H_g[2],H_g[3]),H_f);break;case H_d._drawCircle:case H_d._fillCircle:case 14:H_v._addPointArrToRst(H_b,H_B._getBoundPointS(H_g[0]-H_g[2],H_g[1]-H_g[2],H_g[2]+H_g[2],H_g[2]+H_g[2]),H_f);break;case H_d._drawLine:case 20:H_v._tempPoints.length=0;var H_u;H_u=.5*H_g[5],H_g[0]==H_g[2]?H_v._tempPoints.push(H_g[0]+H_u,H_g[1],H_g[2]+H_u,H_g[3],H_g[0]-H_u,H_g[1],H_g[2]-H_u,H_g[3]):H_g[1]==H_g[3]?H_v._tempPoints.push(H_g[0],H_g[1]+H_u,H_g[2],H_g[3]+H_u,H_g[0],H_g[1]-H_u,H_g[2],H_g[3]-H_u):H_v._tempPoints.push(H_g[0],H_g[1],H_g[2],H_g[3]),H_v._addPointArrToRst(H_b,H_v._tempPoints,H_f);break;case H_d._drawCurves:case 22:H_v._addPointArrToRst(H_b,H_w.I.getBezierPoints(H_g[2]),H_f,H_g[0],H_g[1]);break;case H_d._drawPoly:case H_d._drawLines:case 18:H_v._addPointArrToRst(H_b,H_g[2],H_f,H_g[0],H_g[1]);break;case H_d._drawPath:case 19:H_v._addPointArrToRst(H_b,this._getPathPoints(H_g[2]),H_f,H_g[0],H_g[1]);break;case H_d._drawPie:case 15:H_v._addPointArrToRst(H_b,this._getPiePoints(H_g[0],H_g[1],H_g[2],H_g[3],H_g[4]),H_f)}return 200<H_b.length?H_b=H_$.copyArray(H_b,H_B._getWrapRec(H_b)._getBoundPoints()):8<H_b.length&&(H_b=H_x.scanPList(H_b)),H_b},H_a._switchMatrix=function(H_a,H_b){H_b.concat(H_a),H_b.copyTo(H_a)},H_a._getPiePoints=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_v._tempPoints;H_v._tempPoints.length=0,H_f.push(H_a,H_b);var H_g=(H_e-H_d)%(2*Math.PI)/10,H_h=NaN,H_i=H_d;for(H_h=0;H_h<=10;H_h++)H_f.push(H_a+H_c*Math.cos(H_i),H_b+H_c*Math.sin(H_i)),H_i+=H_g;return H_f},H_a._getPathPoints=function(H_a){var H_b,H_c,H_d=0,H_e=H_v._tempPoints;for(H_e.length=0,H_b=H_a.length,H_d=0;H_d<H_b;H_d++)1<(H_c=H_a[H_d]).length&&(H_e.push(H_c[1],H_c[2]),3<H_c.length&&H_e.push(H_c[3],H_c[4]));return H_e},H_v._addPointArrToRst=function(H_a,H_b,H_c,H_d,H_e){void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0);var H_f,H_g=0;for(H_f=H_b.length,H_g=0;H_g<H_f;H_g+=2)H_v._addPointToRst(H_a,H_b[H_g]+H_d,H_b[H_g+1]+H_e,H_c)},H_v._addPointToRst=function(H_a,H_b,H_c,H_d){var H_e=H_A.TEMP;H_e.setTo(H_b||0,H_c||0),H_d.transformPoint(H_e),H_a.push(H_e.x,H_e.y)},H_v._tempPoints=[],H_v._tempMatrixArrays=[],H_v._tempCmds=[],H_i(H_v,["_tempMatrix",function(){return this._tempMatrix=new H_G},"_initMatrix",function(){return this._initMatrix=new H_G}]),H_v}(),H_f=function(){function H_a(){}H_k(H_a,"laya.events.Event");var H_b=H_a.prototype;return H_b.setTo=function(H_a,H_b,H_c){return this.type=H_a,this.currentTarget=H_b,this.target=H_c,this},H_b.stopPropagation=function(){this._stoped=!0},H_q(0,H_b,"stageY",function(){return H_z.stage.mouseY}),H_q(0,H_b,"charCode",function(){return this.nativeEvent.charCode}),H_q(0,H_b,"touches",function(){var H_a=this.nativeEvent.touches;if(H_a)for(var H_b=H_z.stage,H_c=0,H_d=H_a.length;H_c<H_d;H_c++){var H_e=H_a[H_c],H_f=H_A.TEMP;H_f.setTo(H_e.clientX,H_e.clientY),H_b._canvasTransform.invertTransformPoint(H_f),H_b.transform.invertTransformPoint(H_f),H_e.stageX=H_f.x,H_e.stageY=H_f.y}return H_a}),H_q(0,H_b,"keyLocation",function(){return this.nativeEvent.keyLocation}),H_q(0,H_b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),H_q(0,H_b,"altKey",function(){return this.nativeEvent.altKey}),H_q(0,H_b,"shiftKey",function(){return this.nativeEvent.shiftKey}),H_q(0,H_b,"stageX",function(){return H_z.stage.mouseX}),H_a.EMPTY=new H_a,H_a.MOUSE_DOWN="mousedown",H_a.MOUSE_UP="mouseup",H_a.CLICK="click",H_a.RIGHT_MOUSE_DOWN="rightmousedown",H_a.RIGHT_MOUSE_UP="rightmouseup",H_a.RIGHT_CLICK="rightclick",H_a.MOUSE_MOVE="mousemove",H_a.MOUSE_OVER="mouseover",H_a.MOUSE_OUT="mouseout",H_a.MOUSE_WHEEL="mousewheel",H_a.ROLL_OVER="mouseover",H_a.ROLL_OUT="mouseout",H_a.DOUBLE_CLICK="doubleclick",H_a.CHANGE="change",H_a.CHANGED="changed",H_a.RESIZE="resize",H_a.ADDED="added",H_a.REMOVED="removed",H_a.DISPLAY="display",H_a.UNDISPLAY="undisplay",H_a.ERROR="error",H_a.COMPLETE="complete",H_a.LOADED="loaded",H_a.INITED="inited",H_a.PROGRESS="progress",H_a.INPUT="input",H_a.RENDER="render",H_a.OPEN="open",H_a.MESSAGE="message",H_a.CLOSE="close",H_a.KEY_DOWN="keydown",H_a.KEY_PRESS="keypress",H_a.KEY_UP="keyup",H_a.FRAME="enterframe",H_a.DRAG_START="dragstart",H_a.DRAG_MOVE="dragmove",H_a.DRAG_END="dragend",H_a.ENTER="enter",H_a.SELECT="select",H_a.BLUR="blur",H_a.FOCUS="focus",H_a.VISIBILITY_CHANGE="visibilitychange",H_a.FOCUS_CHANGE="focuschange",H_a.PLAYED="played",H_a.PAUSED="paused",H_a.STOPPED="stopped",H_a.START="start",H_a.END="end",H_a.ENABLE_CHANGED="enablechanged",H_a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",H_a.COMPONENT_ADDED="componentadded",H_a.COMPONENT_REMOVED="componentremoved",H_a.LAYER_CHANGED="layerchanged",H_a.HIERARCHY_LOADED="hierarchyloaded",H_a.RECOVERED="recovered",H_a.RELEASED="released",H_a.LINK="link",H_a.LABEL="label",H_a.FULL_SCREEN_CHANGE="fullscreenchange",H_a.DEVICE_LOST="devicelost",H_a.MESH_CHANGED="meshchanged",H_a.MATERIAL_CHANGED="materialchanged",H_a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",H_a.ANIMATION_CHANGED="animationchanged",H_a.TRIGGER_ENTER="triggerenter",H_a.TRIGGER_STAY="triggerstay",H_a.TRIGGER_EXIT="triggerexit",H_a.TRAIL_FILTER_CHANGE="trailfilterchange",H_a.DOMINO_FILTER_CHANGE="dominofilterchange",H_a}(),H_l=(function(){function H_a(){}H_k(H_a,"laya.events.Keyboard"),H_a.NUMBER_0=48,H_a.NUMBER_1=49,H_a.NUMBER_2=50,H_a.NUMBER_3=51,H_a.NUMBER_4=52,H_a.NUMBER_5=53,H_a.NUMBER_6=54,H_a.NUMBER_7=55,H_a.NUMBER_8=56,H_a.NUMBER_9=57,H_a.A=65,H_a.B=66,H_a.C=67,H_a.D=68,H_a.E=69,H_a.F=70,H_a.G=71,H_a.H=72,H_a.I=73,H_a.J=74,H_a.K=75,H_a.L=76,H_a.M=77,H_a.N=78,H_a.O=79,H_a.P=80,H_a.Q=81,H_a.R=82,H_a.S=83,H_a.T=84,H_a.U=85,H_a.V=86,H_a.W=87,H_a.X=88,H_a.Y=89,H_a.Z=90,H_a.F1=112,H_a.F2=113,H_a.F3=114,H_a.F4=115,H_a.F5=116,H_a.F6=117,H_a.F7=118,H_a.F8=119,H_a.F9=120,H_a.F10=121,H_a.F11=122,H_a.F12=123,H_a.F13=124,H_a.F14=125,H_a.F15=126,H_a.NUMPAD=21,H_a.NUMPAD_0=96,H_a.NUMPAD_1=97,H_a.NUMPAD_2=98,H_a.NUMPAD_3=99,H_a.NUMPAD_4=100,H_a.NUMPAD_5=101,H_a.NUMPAD_6=102,H_a.NUMPAD_7=103,H_a.NUMPAD_8=104,H_a.NUMPAD_9=105,H_a.NUMPAD_ADD=107,H_a.NUMPAD_DECIMAL=110,H_a.NUMPAD_DIVIDE=111,H_a.NUMPAD_ENTER=108,H_a.NUMPAD_MULTIPLY=106,H_a.NUMPAD_SUBTRACT=109,H_a.SEMICOLON=186,H_a.EQUAL=187,H_a.COMMA=188,H_a.MINUS=189,H_a.PERIOD=190,H_a.SLASH=191,H_a.BACKQUOTE=192,H_a.LEFTBRACKET=219,H_a.BACKSLASH=220,H_a.RIGHTBRACKET=221,H_a.QUOTE=222,H_a.ALTERNATE=18,H_a.BACKSPACE=8,H_a.CAPS_LOCK=20,H_a.COMMAND=15,H_a.CONTROL=17,H_a.DELETE=46,H_a.ENTER=13,H_a.ESCAPE=27,H_a.PAGE_UP=33,H_a.PAGE_DOWN=34,H_a.END=35,H_a.HOME=36,H_a.LEFT=37,H_a.UP=38,H_a.RIGHT=39,H_a.DOWN=40,H_a.SHIFT=16,H_a.SPACE=32,H_a.TAB=9,H_a.INSERT=45}(),function(){function H_e(){}return H_k(H_e,"laya.events.KeyBoardManager"),H_e.__init__=function(){H_e._addEvent("keydown"),H_e._addEvent("keypress"),H_e._addEvent("keyup")},H_e._addEvent=function(H_b){H_O.document.addEventListener(H_b,function(H_a){laya.events.KeyBoardManager._dispatch(H_a,H_b)},!0)},H_e._dispatch=function(H_a,H_b){if(H_e.enabled){H_e._event._stoped=!1,H_e._event.nativeEvent=H_a,H_e._event.keyCode=H_a.keyCode||H_a.which||H_a.charCode,"keydown"===H_b?H_e._pressKeys[H_e._event.keyCode]=!0:"keyup"===H_b&&(H_e._pressKeys[H_e._event.keyCode]=null);for(var H_c=H_z.stage.focus&&null!=H_z.stage.focus.event&&H_z.stage.focus.displayedInStage?H_z.stage.focus:H_z.stage,H_d=H_c;H_d;)H_d.event(H_b,H_e._event.setTo(H_b,H_d,H_c)),H_d=H_d.parent}},H_e.hasKeyDown=function(H_a){return H_e._pressKeys[H_a]},H_e._pressKeys={},H_e.enabled=!0,H_i(H_e,["_event",function(){return this._event=new H_f}]),H_e}()),H_r=(function(){function H_a(){}H_k(H_a,"laya.events.KeyLocation"),H_a.STANDARD=0,H_a.LEFT=1,H_a.RIGHT=2,H_a.NUM_PAD=3}(),function(){function H_j(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=H_O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new H_f,this._matrix=new H_G,this._point=new H_A,this._rect=new H_B,this._prePoint=new H_A,this._curTouchID=NaN}H_k(H_j,"laya.events.MouseManager");var H_a=H_j.prototype;return H_a.__init__=function(H_a,H_b){var H_c=this;this._stage=H_a;var H_d=this,H_e=this._eventList;H_b.oncontextmenu=function(H_a){if(H_j.enabled)return!1},H_b.addEventListener("mousedown",function(H_a){H_j.enabled&&(H_O.onIE||H_a.preventDefault(),H_e.push(H_a),H_d.mouseDownTime=H_O.now())}),H_b.addEventListener("mouseup",function(H_a){H_j.enabled&&(H_a.preventDefault(),H_e.push(H_a),H_d.mouseDownTime=-H_O.now())},!0),H_b.addEventListener("mousemove",function(H_a){if(H_j.enabled){H_a.preventDefault();var H_b=H_O.now();if(H_b-H_d._lastMoveTimer<10)return;H_d._lastMoveTimer=H_b,H_e.push(H_a)}},!0),H_b.addEventListener("mouseout",function(H_a){H_j.enabled&&H_e.push(H_a)}),H_b.addEventListener("mouseover",function(H_a){H_j.enabled&&H_e.push(H_a)}),H_b.addEventListener("touchstart",function(H_a){H_j.enabled&&(H_e.push(H_a),H_j._isFirstTouch||H_xa.isInputting||H_a.preventDefault(),H_d.mouseDownTime=H_O.now())}),H_b.addEventListener("touchend",function(H_a){H_j.enabled?(H_j._isFirstTouch||H_xa.isInputting||H_a.preventDefault(),H_j._isFirstTouch=!1,H_e.push(H_a),H_d.mouseDownTime=-H_O.now()):H_c._curTouchID=NaN},!0),H_b.addEventListener("touchmove",function(H_a){H_j.enabled&&(H_a.preventDefault(),H_e.push(H_a))},!0),H_b.addEventListener("touchcancel",function(H_a){H_j.enabled?(H_a.preventDefault(),H_e.push(H_a)):H_c._curTouchID=NaN},!0),H_b.addEventListener("mousewheel",function(H_a){H_j.enabled&&H_e.push(H_a)}),H_b.addEventListener("DOMMouseScroll",function(H_a){H_j.enabled&&H_e.push(H_a)})},H_a.initEvent=function(H_a,H_b){var H_c;this._event._stoped=!1,this._event.nativeEvent=H_b||H_a,this._target=null,this._point.setTo(H_a.pageX||H_a.clientX,H_a.pageY||H_a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=H_a.identifier||0,this._tTouchID=this._event.touchId,(H_c=H_s.I._event)._stoped=!1,H_c.nativeEvent=this._event.nativeEvent,H_c.touchId=this._event.touchId},H_a.checkMouseWheel=function(H_a){this._event.delta=H_a.wheelDelta?.025*H_a.wheelDelta:-H_a.detail;for(var H_b=H_s.I.getLastOvers(),H_c=0,H_d=H_b.length;H_c<H_d;H_c++){var H_e=H_b[H_c];H_e.event("mousewheel",this._event.setTo("mousewheel",H_e,this._target))}},H_a.onMouseMove=function(H_a){H_s.I.onMouseMove(H_a,this._tTouchID)},H_a.onMouseDown=function(H_a){if(H_xa.isInputting&&H_z.stage.focus&&H_z.stage.focus.focus&&!H_z.stage.focus.contains(this._target)){var H_b=H_z.stage.focus._tf||H_z.stage.focus,H_c=H_a._tf||H_a;H_c instanceof laya.display.Input&&H_c.multiline==H_b.multiline?H_b._focusOut():H_b.focus=!1}H_s.I.onMouseDown(H_a,this._tTouchID,this._isLeftMouse)},H_a.onMouseUp=function(H_a){H_s.I.onMouseUp(H_a,this._tTouchID,this._isLeftMouse)},H_a.check=function(H_a,H_b,H_c,H_d){this._point.setTo(H_b,H_c),H_a.fromParentPoint(this._point),H_b=this._point.x,H_c=this._point.y;var H_e=H_a.scrollRect;if(H_e&&(this._rect.setTo(H_e.x,H_e.y,H_e.width,H_e.height),!this._rect.contains(H_b,H_c)))return!1;if(!this.disableMouseEvent){if(H_a.hitTestPrior&&!H_a.mouseThrough&&!this.hitTest(H_a,H_b,H_c))return!1;for(var H_f=H_a._childs.length-1;-1<H_f;H_f--){var H_g=H_a._childs[H_f];if(!H_g.destroyed&&H_g.mouseEnabled&&H_g.visible&&this.check(H_g,H_b,H_c,H_d))return!0}}var H_h=!(!H_a.hitTestPrior||H_a.mouseThrough||this.disableMouseEvent)||this.hitTest(H_a,H_b,H_c);return H_h?(this._target=H_a,H_d.call(this,H_a)):H_d===this.onMouseUp&&H_a===this._stage&&(this._target=this._stage,H_d.call(this,this._target)),H_h},H_a.hitTest=function(H_a,H_b,H_c){var H_d=!1;if(H_a.scrollRect&&(H_b-=H_a.scrollRect.x,H_c-=H_a.scrollRect.y),H_a.hitArea instanceof laya.utils.HitArea)return H_a.hitArea.isHit(H_b,H_c);if(0<H_a.width&&0<H_a.height||H_a.mouseThrough||H_a.hitArea)if(H_a.mouseThrough)H_d=H_a.getGraphicBounds().contains(H_b,H_c);else{var H_e=this._rect;H_a.hitArea?H_e=H_a.hitArea:H_e.setTo(0,0,H_a.width,H_a.height),H_d=H_e.contains(H_b,H_c)}return H_d},H_a.runEvent=function(){var H_a=this._eventList.length;if(H_a){this.mouseEventTime=H_O.now();var H_b,H_c=0,H_d=0,H_e=0;try{for(;H_c<H_a;){var H_f=this._eventList[H_c];switch("mousemove"!==H_f.type&&(this._prePoint.x=this._prePoint.y=-1e6),H_f.type){case"mousedown":this._touchIDs[0]=this._id++,H_j._isTouchRespond?H_j._isTouchRespond=!1:(this._isLeftMouse=0===H_f.button,this.initEvent(H_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===H_f.button,this.initEvent(H_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-H_f.clientX)+Math.abs(this._prePoint.y-H_f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=H_f.clientX,this._prePoint.y=H_f.clientY,this.initEvent(H_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":H_j._isTouchRespond=!0,this._isLeftMouse=!0;var H_g=H_f.changedTouches;for(H_d=0,H_e=H_g.length;H_d<H_e;H_d++)H_b=H_g[H_d],(H_j.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=H_b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[H_b.identifier]=this._id++,this.initEvent(H_b,H_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":H_j._isTouchRespond=!0,this._isLeftMouse=!0;var H_h=H_f.changedTouches;for(H_d=0,H_e=H_h.length;H_d<H_e;H_d++)if(H_b=H_h[H_d],H_j.multiTouchEnabled||H_b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(H_b,H_f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var H_i=H_f.changedTouches;for(H_d=0,H_e=H_i.length;H_d<H_e;H_d++)H_b=H_i[H_d],(H_j.multiTouchEnabled||H_b.identifier==this._curTouchID)&&(this.initEvent(H_b,H_f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(H_f);break;case"mouseout":H_s.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}H_c++}}catch(H_a){throw this._eventList.length=0,H_a}this._eventList.length=0}},H_j.enabled=!0,H_j.multiTouchEnabled=!0,H_j._isTouchRespond=!1,H_j._isFirstTouch=!0,H_i(H_j,["instance",function(){return this.instance=new H_j}]),H_j}()),H_s=function(){function H_q(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new H_f}H_k(H_q,"laya.events.TouchManager");var H_a=H_q.prototype;return H_a._clearTempArrs=function(){H_q._oldArr.length=0,H_q._newArr.length=0,H_q._tEleArr.length=0},H_a.getTouchFromArr=function(H_a,H_b){var H_c,H_d,H_e=0;for(H_c=H_b.length,H_e=0;H_e<H_c;H_e++)if((H_d=H_b[H_e]).id==H_a)return H_d;return null},H_a.removeTouchFromArr=function(H_a,H_b){var H_c=0;for(H_c=H_b.length-1;0<=H_c;H_c--)H_b[H_c].id==H_a&&H_b.splice(H_c,1)},H_a.createTouchO=function(H_a,H_b){var H_c;return(H_c=H_W.getItem("TouchData")||{}).id=H_b,H_c.tar=H_a,H_c},H_a.onMouseDown=function(H_a,H_b,H_c){var H_d,H_e,H_f,H_g;(void 0===H_c&&(H_c=!1),this.enable)&&(H_d=this.getTouchFromArr(H_b,this.preOvers),H_f=this.getEles(H_a,null,H_q._tEleArr),H_d?H_d.tar=H_a:(H_e=this.createTouchO(H_a,H_b),this.preOvers.push(H_e)),H_O.onMobile&&this.sendEvents(H_f,"mouseover",H_b),H_g=H_c?this.preDowns:this.preRightDowns,(H_d=this.getTouchFromArr(H_b,H_g))?H_d.tar=H_a:(H_e=this.createTouchO(H_a,H_b),H_g.push(H_e)),this.sendEvents(H_f,H_c?"mousedown":"rightmousedown",H_b),this._clearTempArrs())},H_a.sendEvents=function(H_a,H_b,H_c){void 0===H_c&&(H_c=0);var H_d,H_e,H_f,H_g=0;for(H_d=H_a.length,this._event._stoped=!1,H_e=H_a[0],H_g=0;H_g<H_d;H_g++){if((H_f=H_a[H_g]).destroyed)return;if(H_f.event(H_b,this._event.setTo(H_b,H_f,H_e)),this._event._stoped)break}},H_a.getEles=function(H_a,H_b,H_c){for(H_c?H_c.length=0:H_c=[];H_a&&H_a!=H_b;)H_c.push(H_a),H_a=H_a.parent;return H_c},H_a.checkMouseOutAndOverOfMove=function(H_a,H_b,H_c){if(void 0===H_c&&(H_c=0),H_b!=H_a){var H_d,H_e,H_f=0,H_g=0;if(H_b.contains(H_a))H_e=this.getEles(H_a,H_b,H_q._tEleArr),this.sendEvents(H_e,"mouseover",H_c);else if(H_a.contains(H_b))H_e=this.getEles(H_b,H_a,H_q._tEleArr),this.sendEvents(H_e,"mouseout",H_c);else{var H_h,H_i;(H_e=H_q._tEleArr).length=0,H_h=this.getEles(H_b,null,H_q._oldArr),H_i=this.getEles(H_a,null,H_q._newArr),H_g=H_h.length;var H_j=0;for(H_f=0;H_f<H_g;H_f++){if(H_d=H_h[H_f],0<=(H_j=H_i.indexOf(H_d))){H_i.splice(H_j,H_i.length-H_j);break}H_e.push(H_d)}0<H_e.length&&this.sendEvents(H_e,"mouseout",H_c),0<H_i.length&&this.sendEvents(H_i,"mouseover",H_c)}}},H_a.onMouseMove=function(H_a,H_b){var H_c,H_d;this.enable&&((H_c=this.getTouchFromArr(H_b,this.preOvers))?(this.checkMouseOutAndOverOfMove(H_a,H_c.tar),H_c.tar=H_a,H_d=this.getEles(H_a,null,H_q._tEleArr)):(H_d=this.getEles(H_a,null,H_q._tEleArr),this.sendEvents(H_d,"mouseover",H_b),this.preOvers.push(this.createTouchO(H_a,H_b))),this.sendEvents(H_d,"mousemove",H_b),this._clearTempArrs())},H_a.getLastOvers=function(){return(H_q._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,H_q._tEleArr):(H_q._tEleArr.push(H_z.stage),H_q._tEleArr)},H_a.stageMouseOut=function(){var H_a;H_a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(H_a,"mouseout",0)},H_a.onMouseUp=function(H_a,H_b,H_c){if(void 0===H_c&&(H_c=!1),this.enable){var H_d,H_e,H_f,H_g,H_h,H_i,H_j=0,H_k=0,H_l=H_O.onMobile;if(H_e=this.getEles(H_a,null,H_q._tEleArr),this.sendEvents(H_e,H_c?"mouseup":"rightmouseup",H_b),H_i=H_c?this.preDowns:this.preRightDowns,H_d=this.getTouchFromArr(H_b,H_i)){var H_m,H_n=H_O.now();if(H_m=H_n-this._lastClickTime<300,this._lastClickTime=H_n,H_a==H_d.tar)H_h=H_e;else for(H_f=this.getEles(H_d.tar,null,H_q._oldArr),(H_h=H_q._newArr).length=0,H_k=H_f.length,H_j=0;H_j<H_k;H_j++)H_g=H_f[H_j],0<=H_e.indexOf(H_g)&&H_h.push(H_g);0<H_h.length&&this.sendEvents(H_h,H_c?"click":"rightclick",H_b),H_c&&H_m&&this.sendEvents(H_h,"doubleclick",H_b),this.removeTouchFromArr(H_b,H_i),H_d.tar=null,H_W.recover("TouchData",H_d)}else;(H_d=this.getTouchFromArr(H_b,this.preOvers))&&H_l&&((H_h=this.getEles(H_d.tar,null,H_h))&&0<H_h.length&&this.sendEvents(H_h,"mouseout",H_b),this.removeTouchFromArr(H_b,this.preOvers),H_d.tar=null,H_W.recover("TouchData",H_d)),this._clearTempArrs()}},H_q._oldArr=[],H_q._newArr=[],H_q._tEleArr=[],H_i(H_q,["I",function(){return this.I=new H_q}]),H_q}(),H_t=function(){function H_a(){this._action=null}H_k(H_a,"laya.filters.Filter");var H_b=H_a.prototype;return H_z.imps(H_b,{"laya.filters.IFilter":!0}),H_b.callNative=function(H_a){},H_q(0,H_b,"type",function(){return-1}),H_q(0,H_b,"action",function(){return this._action}),H_a.BLUR=16,H_a.COLOR=32,H_a.GLOW=8,H_a._filterStart=null,H_a._filterEnd=null,H_a._EndTarget=null,H_a._recycleScope=null,H_a._filter=null,H_a._useSrc=null,H_a._endSrc=null,H_a._useOut=null,H_a._endOut=null,H_a}(),H_v=function(){function H_a(){this.data=null}H_k(H_a,"laya.filters.ColorFilterAction");var H_b=H_a.prototype;return H_z.imps(H_b,{"laya.filters.IFilterAction":!0}),H_b.apply=function(H_a){var H_b=H_a.ctx.ctx,H_c=H_a.ctx.ctx.canvas;if(0==H_c.width||0==H_c.height)return H_c;for(var H_d,H_e=H_b.getImageData(0,0,H_c.width,H_c.height),H_f=H_e.data,H_g=0,H_h=H_f.length;H_g<H_h;H_g+=4)H_d=this.getColor(H_f[H_g],H_f[H_g+1],H_f[H_g+2],H_f[H_g+3]),0!=H_f[H_g+3]&&(H_f[H_g]=H_d[0],H_f[H_g+1]=H_d[1],H_f[H_g+2]=H_d[2],H_f[H_g+3]=H_d[3]);return H_b.putImageData(H_e,0,0),H_a},H_b.getColor=function(H_a,H_b,H_c,H_d){var H_e=[];if(this.data._mat&&this.data._alpha){var H_f=this.data._mat,H_g=this.data._alpha;H_e[0]=H_f[0]*H_a+H_f[1]*H_b+H_f[2]*H_c+H_f[3]*H_d+H_g[0],H_e[1]=H_f[4]*H_a+H_f[5]*H_b+H_f[6]*H_c+H_f[7]*H_d+H_g[1],H_e[2]=H_f[8]*H_a+H_f[9]*H_b+H_f[10]*H_c+H_f[11]*H_d+H_g[2],H_e[3]=H_f[12]*H_a+H_f[13]*H_b+H_f[14]*H_c+H_f[15]*H_d+H_g[3]}return H_e},H_a}(),H_w=(function(){function H_a(){}H_k(H_a,"laya.maths.Arith"),H_a.formatR=function(H_a){return H_a>Math.PI&&(H_a-=2*Math.PI),H_a<-Math.PI&&(H_a+=2*Math.PI),H_a},H_a.isPOT=function(H_a,H_b){return 0<H_a&&0==(H_a&H_a-1)&&0<H_b&&0==(H_b&H_b-1)},H_a.setMatToArray=function(H_a,H_b){H_a.a,H_a.b,H_a.c,H_a.d,H_a.tx,H_a.ty,H_b[0]=H_a.a,H_b[1]=H_a.b,H_b[4]=H_a.c,H_b[5]=H_a.d,H_b[12]=H_a.tx,H_b[13]=H_a.ty}}(),function(){function H_a(){this._controlPoints=[new H_A,new H_A,new H_A],this._calFun=this.getPoint2}H_k(H_a,"laya.maths.Bezier");var H_b=H_a.prototype;return H_b._switchPoint=function(H_a,H_b){var H_c=this._controlPoints.shift();H_c.setTo(H_a,H_b),this._controlPoints.push(H_c)},H_b.getPoint2=function(H_a,H_b){var H_c=this._controlPoints[0],H_d=this._controlPoints[1],H_e=this._controlPoints[2],H_f=Math.pow(1-H_a,2)*H_c.x+2*H_a*(1-H_a)*H_d.x+Math.pow(H_a,2)*H_e.x,H_g=Math.pow(1-H_a,2)*H_c.y+2*H_a*(1-H_a)*H_d.y+Math.pow(H_a,2)*H_e.y;H_b.push(H_f,H_g)},H_b.getPoint3=function(H_a,H_b){var H_c=this._controlPoints[0],H_d=this._controlPoints[1],H_e=this._controlPoints[2],H_f=this._controlPoints[3],H_g=Math.pow(1-H_a,3)*H_c.x+3*H_d.x*H_a*(1-H_a)*(1-H_a)+3*H_e.x*H_a*H_a*(1-H_a)+H_f.x*Math.pow(H_a,3),H_h=Math.pow(1-H_a,3)*H_c.y+3*H_d.y*H_a*(1-H_a)*(1-H_a)+3*H_e.y*H_a*H_a*(1-H_a)+H_f.y*Math.pow(H_a,3);H_b.push(H_g,H_h)},H_b.insertPoints=function(H_a,H_b){var H_c,H_d=NaN;for(H_c=1/(H_a=0<H_a?H_a:5),H_d=0;H_d<=1;H_d+=H_c)this._calFun(H_d,H_b)},H_b.getBezierPoints=function(H_a,H_b,H_c){void 0===H_b&&(H_b=5),void 0===H_c&&(H_c=2);var H_d,H_e,H_f=0;if((H_d=H_a.length)<2*(H_c+1))return[];switch(H_e=[],H_c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=H_c;)this._controlPoints.push(new H_A);for(H_f=0;H_f<2*H_c;H_f+=2)this._switchPoint(H_a[H_f],H_a[H_f+1]);for(H_f=2*H_c;H_f<H_d;H_f+=2)this._switchPoint(H_a[H_f],H_a[H_f+1]),H_f/2%H_c==0&&this.insertPoints(H_b,H_e);return H_e},H_i(H_a,["I",function(){return this.I=new H_a}]),H_a}()),H_x=function(){function H_j(){}return H_k(H_j,"laya.maths.GrahamScan"),H_j.multiply=function(H_a,H_b,H_c){return(H_a.x-H_c.x)*(H_b.y-H_c.y)-(H_b.x-H_c.x)*(H_a.y-H_c.y)},H_j.dis=function(H_a,H_b){return(H_a.x-H_b.x)*(H_a.x-H_b.x)+(H_a.y-H_b.y)*(H_a.y-H_b.y)},H_j._getPoints=function(H_a,H_b,H_c){for(void 0===H_b&&(H_b=!1),H_j._mPointList||(H_j._mPointList=[]);H_j._mPointList.length<H_a;)H_j._mPointList.push(new H_A);return H_c||(H_c=[]),H_c.length=0,H_b?H_j.getFrom(H_c,H_j._mPointList,H_a):H_j.getFromR(H_c,H_j._mPointList,H_a),H_c},H_j.getFrom=function(H_a,H_b,H_c){var H_d=0;for(H_d=0;H_d<H_c;H_d++)H_a.push(H_b[H_d]);return H_a},H_j.getFromR=function(H_a,H_b,H_c){var H_d=0;for(H_d=0;H_d<H_c;H_d++)H_a.push(H_b.pop());return H_a},H_j.pListToPointList=function(H_a,H_b){void 0===H_b&&(H_b=!1);var H_c=0,H_d=H_a.length/2,H_e=H_j._getPoints(H_d,H_b,H_j._tempPointList);for(H_c=0;H_c<H_d;H_c++)H_e[H_c].setTo(H_a[H_c+H_c],H_a[H_c+H_c+1]);return H_e},H_j.pointListToPlist=function(H_a){var H_b,H_c=0,H_d=H_a.length,H_e=H_j._temPList;for(H_c=H_e.length=0;H_c<H_d;H_c++)H_b=H_a[H_c],H_e.push(H_b.x,H_b.y);return H_e},H_j.scanPList=function(H_a){return H_$.copyArray(H_a,H_j.pointListToPlist(H_j.scan(H_j.pListToPointList(H_a,!0))))},H_j.scan=function(H_a){var H_b,H_c,H_d,H_e=0,H_f=0,H_g=0,H_h=H_a.length,H_i={};for((H_c=H_j._temArr).length=0,H_e=(H_h=H_a.length)-1;0<=H_e;H_e--)H_d=(H_b=H_a[H_e]).x+"_"+H_b.y,H_i.hasOwnProperty(H_d)||(H_i[H_d]=!0,H_c.push(H_b));for(H_h=H_c.length,H_$.copyArray(H_a,H_c),H_e=1;H_e<H_h;H_e++)(H_a[H_e].y<H_a[H_g].y||H_a[H_e].y==H_a[H_g].y&&H_a[H_e].x<H_a[H_g].x)&&(H_g=H_e);for(H_b=H_a[0],H_a[0]=H_a[H_g],H_a[H_g]=H_b,H_e=1;H_e<H_h-1;H_e++){for(H_f=(H_g=H_e)+1;H_f<H_h;H_f++)(0<H_j.multiply(H_a[H_f],H_a[H_g],H_a[0])||0==H_j.multiply(H_a[H_f],H_a[H_g],H_a[0])&&H_j.dis(H_a[0],H_a[H_f])<H_j.dis(H_a[0],H_a[H_g]))&&(H_g=H_f);H_b=H_a[H_e],H_a[H_e]=H_a[H_g],H_a[H_g]=H_b}if((H_c=H_j._temArr).length=0,H_a.length<3)return H_$.copyArray(H_c,H_a);for(H_c.push(H_a[0],H_a[1],H_a[2]),H_e=3;H_e<H_h;H_e++){for(;2<=H_c.length&&0<=H_j.multiply(H_a[H_e],H_c[H_c.length-1],H_c[H_c.length-2]);)H_c.pop();H_a[H_e]&&H_c.push(H_a[H_e])}return H_c},H_j._mPointList=null,H_j._tempPointList=[],H_j._temPList=[],H_j._temArr=[],H_j}(),H_y=function(){function H_e(){}return H_k(H_e,"laya.maths.MathUtil"),H_e.subtractVector3=function(H_a,H_b,H_c){H_c[0]=H_a[0]-H_b[0],H_c[1]=H_a[1]-H_b[1],H_c[2]=H_a[2]-H_b[2]},H_e.lerp=function(H_a,H_b,H_c){return H_a*(1-H_c)+H_b*H_c},H_e.scaleVector3=function(H_a,H_b,H_c){H_c[0]=H_a[0]*H_b,H_c[1]=H_a[1]*H_b,H_c[2]=H_a[2]*H_b},H_e.lerpVector3=function(H_a,H_b,H_c,H_d){var H_e=H_a[0],H_f=H_a[1],H_g=H_a[2];H_d[0]=H_e+H_c*(H_b[0]-H_e),H_d[1]=H_f+H_c*(H_b[1]-H_f),H_d[2]=H_g+H_c*(H_b[2]-H_g)},H_e.lerpVector4=function(H_a,H_b,H_c,H_d){var H_e=H_a[0],H_f=H_a[1],H_g=H_a[2],H_h=H_a[3];H_d[0]=H_e+H_c*(H_b[0]-H_e),H_d[1]=H_f+H_c*(H_b[1]-H_f),H_d[2]=H_g+H_c*(H_b[2]-H_g),H_d[3]=H_h+H_c*(H_b[3]-H_h)},H_e.slerpQuaternionArray=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h,H_i,H_j,H_k,H_l,H_m=H_a[H_b+0],H_n=H_a[H_b+1],H_q=H_a[H_b+2],H_r=H_a[H_b+3],H_s=H_c[H_d+0],H_t=H_c[H_d+1],H_u=H_c[H_d+2],H_v=H_c[H_d+3];return(H_i=H_m*H_s+H_n*H_t+H_q*H_u+H_r*H_v)<0&&(H_i=-H_i,H_s=-H_s,H_t=-H_t,H_u=-H_u,H_v=-H_v),H_l=1e-6<1-H_i?(H_h=Math.acos(H_i),H_j=Math.sin(H_h),H_k=Math.sin((1-H_e)*H_h)/H_j,Math.sin(H_e*H_h)/H_j):(H_k=1-H_e,H_e),H_f[H_g+0]=H_k*H_m+H_l*H_s,H_f[H_g+1]=H_k*H_n+H_l*H_t,H_f[H_g+2]=H_k*H_q+H_l*H_u,H_f[H_g+3]=H_k*H_r+H_l*H_v,H_f},H_e.getRotation=function(H_a,H_b,H_c,H_d){return Math.atan2(H_d-H_b,H_c-H_a)/Math.PI*180},H_e.sortBigFirst=function(H_a,H_b){return H_a==H_b?0:H_a<H_b?1:-1},H_e.sortSmallFirst=function(H_a,H_b){return H_a==H_b?0:H_a<H_b?-1:1},H_e.sortNumBigFirst=function(H_a,H_b){return parseFloat(H_b)-parseFloat(H_a)},H_e.sortNumSmallFirst=function(H_a,H_b){return parseFloat(H_a)-parseFloat(H_b)},H_e.sortByKey=function(H_c,H_a,H_b){var H_d;return void 0===H_a&&(H_a=!1),void 0===H_b&&(H_b=!0),H_d=H_a?H_b?H_e.sortNumBigFirst:H_e.sortBigFirst:H_b?H_e.sortNumSmallFirst:H_e.sortSmallFirst,function(H_a,H_b){return H_d(H_a[H_c],H_b[H_c])}},H_e}(),H_G=function(){function H_c(H_a,H_b,H_c,H_d,H_e,H_f){this.inPool=!1,this.bTransform=!1,void 0===H_a&&(H_a=1),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=1),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=0),this.a=H_a,this.b=H_b,this.c=H_c,this.d=H_d,this.tx=H_e,this.ty=H_f,this._checkTransform()}H_k(H_c,"laya.maths.Matrix");var H_a=H_c.prototype;return H_a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},H_a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},H_a.setTranslate=function(H_a,H_b){return this.tx=H_a,this.ty=H_b,this},H_a.translate=function(H_a,H_b){return this.tx+=H_a,this.ty+=H_b,this},H_a.scale=function(H_a,H_b){this.a*=H_a,this.d*=H_b,this.c*=H_a,this.b*=H_b,this.tx*=H_a,this.ty*=H_b,this.bTransform=!0},H_a.rotate=function(H_a){var H_b=Math.cos(H_a),H_c=Math.sin(H_a),H_d=this.a,H_e=this.c,H_f=this.tx;this.a=H_d*H_b-this.b*H_c,this.b=H_d*H_c+this.b*H_b,this.c=H_e*H_b-this.d*H_c,this.d=H_e*H_c+this.d*H_b,this.tx=H_f*H_b-this.ty*H_c,this.ty=H_f*H_c+this.ty*H_b,this.bTransform=!0},H_a.skew=function(H_a,H_b){var H_c=Math.tan(H_a),H_d=Math.tan(H_b),H_e=this.a,H_f=this.b;return this.a+=H_d*this.c,this.b+=H_d*this.d,this.c+=H_c*H_e,this.d+=H_c*H_f,this},H_a.invertTransformPoint=function(H_a){var H_b=this.a,H_c=this.b,H_d=this.c,H_e=this.d,H_f=this.tx,H_g=H_b*H_e-H_c*H_d,H_h=H_e/H_g,H_i=-H_c/H_g,H_j=-H_d/H_g,H_k=H_b/H_g,H_l=(H_d*this.ty-H_e*H_f)/H_g,H_m=-(H_b*this.ty-H_c*H_f)/H_g;return H_a.setTo(H_h*H_a.x+H_j*H_a.y+H_l,H_i*H_a.x+H_k*H_a.y+H_m)},H_a.transformPoint=function(H_a){return H_a.setTo(this.a*H_a.x+this.c*H_a.y+this.tx,this.b*H_a.x+this.d*H_a.y+this.ty)},H_a.transformPointN=function(H_a){return H_a.setTo(this.a*H_a.x+this.c*H_a.y,this.b*H_a.x+this.d*H_a.y)},H_a.transformPointArray=function(H_a,H_b){for(var H_c=H_a.length,H_d=0;H_d<H_c;H_d+=2){var H_e=H_a[H_d],H_f=H_a[H_d+1];H_b[H_d]=this.a*H_e+this.c*H_f+this.tx,H_b[H_d+1]=this.b*H_e+this.d*H_f+this.ty}return H_b},H_a.transformPointArrayScale=function(H_a,H_b){for(var H_c=H_a.length,H_d=0;H_d<H_c;H_d+=2){var H_e=H_a[H_d],H_f=H_a[H_d+1];H_b[H_d]=this.a*H_e+this.c*H_f,H_b[H_d+1]=this.b*H_e+this.d*H_f}return H_b},H_a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},H_a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},H_a.invert=function(){var H_a=this.a,H_b=this.b,H_c=this.c,H_d=this.d,H_e=this.tx,H_f=H_a*H_d-H_b*H_c;return this.a=H_d/H_f,this.b=-H_b/H_f,this.c=-H_c/H_f,this.d=H_a/H_f,this.tx=(H_c*this.ty-H_d*H_e)/H_f,this.ty=-(H_a*this.ty-H_b*H_e)/H_f,this},H_a.setTo=function(H_a,H_b,H_c,H_d,H_e,H_f){return this.a=H_a,this.b=H_b,this.c=H_c,this.d=H_d,this.tx=H_e,this.ty=H_f,this},H_a.concat=function(H_a){var H_b=this.a,H_c=this.c,H_d=this.tx;return this.a=H_b*H_a.a+this.b*H_a.c,this.b=H_b*H_a.b+this.b*H_a.d,this.c=H_c*H_a.a+this.d*H_a.c,this.d=H_c*H_a.b+this.d*H_a.d,this.tx=H_d*H_a.a+this.ty*H_a.c+H_a.tx,this.ty=H_d*H_a.b+this.ty*H_a.d+H_a.ty,this},H_a.scaleEx=function(H_a,H_b){var H_c=this.a,H_d=this.b,H_e=this.c,H_f=this.d;0!==H_d||0!==H_e?(this.a=H_a*H_c,this.b=H_a*H_d,this.c=H_b*H_e):(this.a=H_a*H_c,this.b=0*H_f,this.c=0*H_c),this.d=H_b*H_f,this.bTransform=!0},H_a.rotateEx=function(H_a){var H_b=Math.cos(H_a),H_c=Math.sin(H_a),H_d=this.a,H_e=this.b,H_f=this.c,H_g=this.d;0!==H_e||0!==H_f?(this.a=H_b*H_d+H_c*H_f,this.b=H_b*H_e+H_c*H_g,this.c=-H_c*H_d+H_b*H_f,this.d=-H_c*H_e+H_b*H_g):(this.a=H_b*H_d,this.b=H_c*H_g,this.c=-H_c*H_d,this.d=H_b*H_g),this.bTransform=!0},H_a.clone=function(){var H_a=H_c.create();return H_a.a=this.a,H_a.b=this.b,H_a.c=this.c,H_a.d=this.d,H_a.tx=this.tx,H_a.ty=this.ty,H_a.bTransform=this.bTransform,H_a},H_a.copyTo=function(H_a){return H_a.a=this.a,H_a.b=this.b,H_a.c=this.c,H_a.d=this.d,H_a.tx=this.tx,H_a.ty=this.ty,H_a.bTransform=this.bTransform,H_a},H_a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},H_a.destroy=function(){if(!this.inPool){var H_a=H_c._cache;this.inPool=!0,H_a._length||(H_a._length=0),(H_a[H_a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},H_c.mul=function(H_a,H_b,H_c){var H_d=H_a.a,H_e=H_a.b,H_f=H_a.c,H_g=H_a.d,H_h=H_a.tx,H_i=H_a.ty,H_j=H_b.a,H_k=H_b.b,H_l=H_b.c,H_m=H_b.d,H_n=H_b.tx,H_q=H_b.ty;return 0!==H_k||0!==H_l?(H_c.a=H_d*H_j+H_e*H_l,H_c.b=H_d*H_k+H_e*H_m,H_c.c=H_f*H_j+H_g*H_l,H_c.d=H_f*H_k+H_g*H_m,H_c.tx=H_j*H_h+H_l*H_i+H_n,H_c.ty=H_k*H_h+H_m*H_i+H_q):(H_c.a=H_d*H_j,H_c.b=H_e*H_m,H_c.c=H_f*H_j,H_c.d=H_g*H_m,H_c.tx=H_j*H_h+H_n,H_c.ty=H_m*H_i+H_q),H_c},H_c.mul16=function(H_a,H_b,H_c){var H_d=H_a.a,H_e=H_a.b,H_f=H_a.c,H_g=H_a.d,H_h=H_a.tx,H_i=H_a.ty,H_j=H_b.a,H_k=H_b.b,H_l=H_b.c,H_m=H_b.d,H_n=H_b.tx,H_q=H_b.ty;return 0!==H_k||0!==H_l?(H_c[0]=H_d*H_j+H_e*H_l,H_c[1]=H_d*H_k+H_e*H_m,H_c[4]=H_f*H_j+H_g*H_l,H_c[5]=H_f*H_k+H_g*H_m,H_c[12]=H_j*H_h+H_l*H_i+H_n,H_c[13]=H_k*H_h+H_m*H_i+H_q):(H_c[0]=H_d*H_j,H_c[1]=H_e*H_m,H_c[4]=H_f*H_j,H_c[5]=H_g*H_m,H_c[12]=H_j*H_h+H_n,H_c[13]=H_m*H_i+H_q),H_c},H_c.mulPre=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=H_a.a,H_j=H_a.b,H_k=H_a.c,H_l=H_a.d,H_m=H_a.tx,H_n=H_a.ty;return 0!==H_c||0!==H_d?(H_h.a=H_i*H_b+H_j*H_d,H_h.b=H_i*H_c+H_j*H_e,H_h.c=H_k*H_b+H_l*H_d,H_h.d=H_k*H_c+H_l*H_e,H_h.tx=H_b*H_m+H_d*H_n+H_f,H_h.ty=H_c*H_m+H_e*H_n+H_g):(H_h.a=H_i*H_b,H_h.b=H_j*H_e,H_h.c=H_k*H_b,H_h.d=H_l*H_e,H_h.tx=H_b*H_m+H_f,H_h.ty=H_e*H_n+H_g),H_h},H_c.mulPos=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=H_a.a,H_j=H_a.b,H_k=H_a.c,H_l=H_a.d,H_m=H_a.tx,H_n=H_a.ty;return 0!==H_j||0!==H_k?(H_h.a=H_b*H_i+H_c*H_k,H_h.b=H_b*H_j+H_c*H_l,H_h.c=H_d*H_i+H_e*H_k,H_h.d=H_d*H_j+H_e*H_l,H_h.tx=H_i*H_f+H_k*H_g+H_m,H_h.ty=H_j*H_f+H_l*H_g+H_n):(H_h.a=H_b*H_i,H_h.b=H_c*H_l,H_h.c=H_d*H_i,H_h.d=H_e*H_l,H_h.tx=H_i*H_f+H_m,H_h.ty=H_l*H_g+H_n),H_h},H_c.preMul=function(H_a,H_b,H_c){var H_d=H_a.a,H_e=H_a.b,H_f=H_a.c,H_g=H_a.d,H_h=H_b.a,H_i=H_b.b,H_j=H_b.c,H_k=H_b.d,H_l=H_b.tx,H_m=H_b.ty;return H_c.a=H_h*H_d,H_c.b=H_c.c=0,H_c.d=H_k*H_g,H_c.tx=H_l*H_d+H_a.tx,H_c.ty=H_m*H_g+H_a.ty,0===H_i&&0===H_j&&0===H_e&&0===H_f||(H_c.a+=H_i*H_f,H_c.d+=H_j*H_e,H_c.b+=H_h*H_e+H_i*H_g,H_c.c+=H_j*H_d+H_k*H_f,H_c.tx+=H_m*H_f,H_c.ty+=H_l*H_e),H_c},H_c.preMulXY=function(H_a,H_b,H_c,H_d){var H_e=H_a.a,H_f=H_a.b,H_g=H_a.c,H_h=H_a.d;return H_d.a=H_e,H_d.b=H_f,H_d.c=H_g,H_d.d=H_h,H_d.tx=H_b*H_e+H_a.tx+H_c*H_g,H_d.ty=H_c*H_h+H_a.ty+H_b*H_f,H_d},H_c.create=function(){var H_a=H_c._cache,H_b=H_a._length?H_a[--H_a._length]:new H_c;return H_b.inPool=!1,H_b},H_c.EMPTY=new H_c,H_c.TEMP=new H_c,H_c._cache=[],H_c}(),H_A=function(){function H_a(H_a,H_b){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),this.x=H_a,this.y=H_b}H_k(H_a,"laya.maths.Point");var H_b=H_a.prototype;return H_b.setTo=function(H_a,H_b){return this.x=H_a,this.y=H_b,this},H_b.distance=function(H_a,H_b){return Math.sqrt((this.x-H_a)*(this.x-H_a)+(this.y-H_b)*(this.y-H_b))},H_b.toString=function(){return this.x+","+this.y},H_b.normalize=function(){var H_a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<H_a){var H_b=1/H_a;this.x*=H_b,this.y*=H_b}},H_a.TEMP=new H_a,H_a.EMPTY=new H_a,H_a}(),H_B=function(){function H_j(H_a,H_b,H_c,H_d){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),this.x=H_a,this.y=H_b,this.width=H_c,this.height=H_d}H_k(H_j,"laya.maths.Rectangle");var H_a=H_j.prototype;return H_a.setTo=function(H_a,H_b,H_c,H_d){return this.x=H_a,this.y=H_b,this.width=H_c,this.height=H_d,this},H_a.copyFrom=function(H_a){return this.x=H_a.x,this.y=H_a.y,this.width=H_a.width,this.height=H_a.height,this},H_a.contains=function(H_a,H_b){return!(this.width<=0||this.height<=0)&&(H_a>=this.x&&H_a<this.right&&H_b>=this.y&&H_b<this.bottom)},H_a.intersects=function(H_a){return!(H_a.x>this.x+this.width||H_a.x+H_a.width<this.x||H_a.y>this.y+this.height||H_a.y+H_a.height<this.y)},H_a.intersection=function(H_a,H_b){return this.intersects(H_a)?(H_b||(H_b=new H_j),H_b.x=Math.max(this.x,H_a.x),H_b.y=Math.max(this.y,H_a.y),H_b.width=Math.min(this.right,H_a.right)-H_b.x,H_b.height=Math.min(this.bottom,H_a.bottom)-H_b.y,H_b):null},H_a.union=function(H_a,H_b){return H_b||(H_b=new H_j),this.clone(H_b),H_a.width<=0||H_a.height<=0?H_b:(H_b.addPoint(H_a.x,H_a.y),H_b.addPoint(H_a.right,H_a.bottom),this)},H_a.clone=function(H_a){return H_a||(H_a=new H_j),H_a.x=this.x,H_a.y=this.y,H_a.width=this.width,H_a.height=this.height,H_a},H_a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},H_a.equals=function(H_a){return!(!H_a||H_a.x!==this.x||H_a.y!==this.y||H_a.width!==this.width||H_a.height!==this.height)},H_a.addPoint=function(H_a,H_b){return this.x>H_a&&(this.width+=this.x-H_a,this.x=H_a),this.y>H_b&&(this.height+=this.y-H_b,this.y=H_b),this.width<H_a-this.x&&(this.width=H_a-this.x),this.height<H_b-this.y&&(this.height=H_b-this.y),this},H_a._getBoundPoints=function(){var H_a=H_j._temB;return(H_a.length=0)==this.width||0==this.height||H_a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),H_a},H_a.isEmpty=function(){return this.width<=0||this.height<=0},H_q(0,H_a,"right",function(){return this.x+this.width}),H_q(0,H_a,"bottom",function(){return this.y+this.height}),H_j._getBoundPointS=function(H_a,H_b,H_c,H_d){var H_e=H_j._temA;return(H_e.length=0)==H_c||0==H_d||H_e.push(H_a,H_b,H_a+H_c,H_b,H_a,H_b+H_d,H_a+H_c,H_b+H_d),H_e},H_j._getWrapRec=function(H_a,H_b){if(!H_a||H_a.length<1)return H_b?H_b.setTo(0,0,0,0):H_j.TEMP.setTo(0,0,0,0);H_b=H_b||new H_j;var H_c,H_d,H_e,H_f,H_g,H_h=H_a.length,H_i=H_A.TEMP;for(H_e=H_g=-(H_d=H_f=99999),H_c=0;H_c<H_h;H_c+=2)H_i.x=H_a[H_c],H_i.y=H_a[H_c+1],H_d=H_d<H_i.x?H_d:H_i.x,H_f=H_f<H_i.y?H_f:H_i.y,H_e=H_e>H_i.x?H_e:H_i.x,H_g=H_g>H_i.y?H_g:H_i.y;return H_b.setTo(H_d,H_f,H_e-H_d,H_g-H_f)},H_j.EMPTY=new H_j,H_j.TEMP=new H_j,H_j._temB=[],H_j._temA=[],H_j}(),H_E=function(){function H_i(){}return H_k(H_i,"laya.media.SoundManager"),H_q(1,H_i,"useAudioMusic",function(){return H_i._useAudioMusic},function(H_a){H_i._useAudioMusic=H_a,H_i._musicClass=H_a?H_ca:null}),H_q(1,H_i,"autoStopMusic",function(){return H_i._autoStopMusic},function(H_a){H_z.stage.off("blur",null,H_i._stageOnBlur),H_z.stage.off("focus",null,H_i._stageOnFocus),H_z.stage.off("visibilitychange",null,H_i._visibilityChange),(H_i._autoStopMusic=H_a)&&(H_z.stage.on("blur",null,H_i._stageOnBlur),H_z.stage.on("focus",null,H_i._stageOnFocus),H_z.stage.on("visibilitychange",null,H_i._visibilityChange))}),H_q(1,H_i,"muted",function(){return H_i._muted},function(H_a){H_a!=H_i._muted&&(H_a&&H_i.stopAllSound(),H_i.musicMuted=H_a,H_i._muted=H_a)}),H_q(1,H_i,"musicMuted",function(){return H_i._musicMuted},function(H_a){H_a!=H_i._musicMuted&&(H_a?(H_i._tMusic&&H_i._musicChannel&&!H_i._musicChannel.isStopped?H_i._musicChannel.pause():H_i._musicChannel=null,H_i._musicMuted=H_a):(H_i._musicMuted=H_a,H_i._tMusic&&H_i._musicChannel&&H_i._musicChannel.resume()))}),H_q(1,H_i,"soundMuted",function(){return H_i._soundMuted},function(H_a){H_i._soundMuted=H_a}),H_i.addChannel=function(H_a){0<=H_i._channels.indexOf(H_a)||(H_i._channels.push(H_a),H_i.autoReleaseSound&&0!=H_i._notUsedCount&&H_i._notUsedUrls[H_a.url]&&(delete H_i._notUsedUrls[H_a.url],0==--H_i._notUsedCount&&H_z.timer.clear(H_i,H_i.disposeSoundIfNotUsed)))},H_i.removeChannel=function(H_a){var H_b=H_i._channels,H_c=H_b.indexOf(H_a);if(-1!=H_c&&(H_b.splice(H_c,1),H_i.autoReleaseSound)){var H_d=H_a.url,H_e=H_i.defaultIntervals[H_d]||2e4;if(0<H_e){var H_f=!0;for(H_c=H_b.length-1;0<=H_c;H_c--)if(H_b[H_c].url==H_d){H_f=!1;break}H_f&&(H_i._notUsedUrls[H_d]=Date.now()+H_e,0==H_i._notUsedCount++&&H_z.timer.loop(1e4,H_i,H_i.disposeSoundIfNotUsed))}}},H_i.disposeSoundIfNotUsed=function(){var H_a=H_i._notUsedUrls;if(0!=H_i._notUsedCount){var H_b=Date.now();for(var H_c in H_a)H_b>=H_a[H_c]&&(delete H_a[H_c],--H_i._notUsedCount,H_i.destroySound(H_c));if(0!=H_i._notUsedCount)return}H_z.timer.clear(H_i,H_i.disposeSoundIfNotUsed)},H_i._visibilityChange=function(){H_z.stage.isVisibility?H_i._stageOnFocus():H_i._stageOnBlur()},H_i._stageOnBlur=function(){H_i._isActive=!1,H_i._musicChannel&&(H_i._musicChannel.isStopped||(H_i._blurPaused=!0,H_i._musicChannel.pause())),H_i.stopAllSound(),H_z.stage.once("mousedown",null,H_i._stageOnFocus)},H_i._recoverWebAudio=function(){H_fa.ctx&&"running"!=H_fa.ctx.state&&H_fa.ctx.resume&&H_fa.ctx.resume()},H_i._stageOnFocus=function(){if(H_i._isActive=!0,H_i._recoverWebAudio(),H_z.stage.off("mousedown",null,H_i._stageOnFocus),H_i._blurPaused){var H_a=H_i._musicChannel;H_a&&H_i._music&&H_a.isStopped&&(H_i._blurPaused=!1,H_i._music._disposed?H_i.playMusic(H_a.url,H_a.loops,H_a.startHandler,H_a.completeHandler,H_a.startTime):H_a.audioBuffer?H_a.resume():H_i._music.play(H_a.startTime,H_a.loops,H_a.startHandler,H_a))}},H_i.playSound=function(H_a,H_b,H_c,H_d,H_e,H_f){if(void 0===H_b&&(H_b=1),void 0===H_f&&(H_f=0),!H_a)return null;if(H_i._muted)return null;if(H_i._recoverWebAudio(),H_a==H_i._tMusic){if(H_i._musicMuted)return null}else{if(!H_i._isActive)return null;if(H_i._soundMuted)return null}var H_g,H_h=H_i._pool[H_a];return H_e||(H_e=H_i._soundClass),H_h||((H_h=new H_e).load(H_a),H_i._pool[H_a]=H_h),(H_g=H_h.play(H_f,H_b,H_c))?(H_a==H_i._tMusic&&(H_i._music=H_h,H_i._isActive||(H_i._blurPaused=!0,H_g.pause())),H_g.url=H_a,H_g.volume=H_a==H_i._tMusic?H_i.musicVolume:H_i.soundVolume,H_g.completeHandler=H_d,H_g):null},H_i.destroySound=function(H_a){var H_b=H_i._pool[H_a];H_b&&(delete H_i._pool[H_a],H_b.dispose())},H_i.playMusic=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_b&&(H_b=0),void 0===H_e&&(H_e=0),H_i._tMusic=H_a,H_i._musicChannel&&H_i._musicChannel.stop(),H_i._musicChannel=H_i.playSound(H_a,H_b,H_c,H_d,null,H_e)},H_i.stopSound=function(H_a){for(var H_b,H_c=H_i._channels.length-1;0<=H_c;H_c--)(H_b=H_i._channels[H_c]).url==H_a&&H_b.stop()},H_i.stopAll=function(){H_i._tMusic=null;var H_a=0;for(H_a=H_i._channels.length-1;0<=H_a;H_a--)H_i._channels[H_a].stop()},H_i.stopAllSound=function(){var H_a,H_b=0;for(H_b=H_i._channels.length-1;0<=H_b;H_b--)(H_a=H_i._channels[H_b]).url!=H_i._tMusic&&H_a.stop()},H_i.stopMusic=function(){H_i._musicChannel&&H_i._musicChannel.stop(),H_i._tMusic=null},H_i.setSoundVolume=function(H_a,H_b){if(H_b)H_i._setVolume(H_b,H_a);else{H_i.soundVolume=H_a;var H_c,H_d=0;for(H_d=H_i._channels.length-1;0<=H_d;H_d--)(H_c=H_i._channels[H_d]).url!=H_i._tMusic&&(H_c.volume=H_a)}},H_i.setMusicVolume=function(H_a){H_i.musicVolume=H_a,H_i._setVolume(H_i._tMusic,H_a)},H_i._setVolume=function(H_a,H_b){for(var H_c,H_d=H_i._channels.length-1;0<=H_d;H_d--)(H_c=H_i._channels[H_d]).url==H_a&&(H_c.volume=H_b)},H_i.musicVolume=1,H_i.soundVolume=1,H_i.playbackRate=1,H_i._useAudioMusic=!0,H_i._muted=!1,H_i._soundMuted=!1,H_i._musicMuted=!1,H_i._tMusic=null,H_i._musicChannel=null,H_i._music=null,H_i._channels=[],H_i._autoStopMusic=!1,H_i._blurPaused=!1,H_i._isActive=!0,H_i._soundClass=null,H_i._musicClass=null,H_i.autoReleaseSound=!0,H_i._pool={},H_i.defaultIntervals={},H_i._notUsedUrls={},H_i._notUsedCount=0,H_i}(),H_C=function(){var H_a;function H_c(){}return H_k(H_c,"laya.net.LocalStorage"),H_c.__init__=function(){H_c._baseClass||(H_c._baseClass=H_a).init(),H_c.items=H_c._baseClass.items,H_c.support=H_c._baseClass.support},H_c.setItem=function(H_a,H_b){H_c._baseClass.setItem(H_a,H_b)},H_c.getItem=function(H_a){return H_c._baseClass.getItem(H_a)},H_c.setJSON=function(H_a,H_b){H_c._baseClass.setJSON(H_a,H_b)},H_c.getJSON=function(H_a){return H_c._baseClass.getJSON(H_a)},H_c.removeItem=function(H_a){H_c._baseClass.removeItem(H_a)},H_c.clear=function(){H_c._baseClass.clear()},H_c._baseClass=null,H_c.items=null,H_c.support=!1,H_c.__init$=function(){H_a=function(){function H_c(){}return H_k(H_c,""),H_c.init=function(){try{H_c.support=!0,H_c.items=H_g.localStorage,H_c.setItem("laya","1"),H_c.removeItem("laya")}catch(H_a){H_c.support=!1}H_c.support||console.log("LocalStorage is not supprot or browser is private mode.")},H_c.setItem=function(H_a,H_b){try{H_c.support&&H_c.items.setItem(H_a,H_b)}catch(H_a){console.warn("set localStorage failed",H_a)}},H_c.getItem=function(H_a){return H_c.support?H_c.items.getItem(H_a):null},H_c.setJSON=function(H_a,H_b){try{H_c.support&&H_c.items.setItem(H_a,JSON.stringify(H_b))}catch(H_a){console.warn("set localStorage failed",H_a)}},H_c.getJSON=function(H_a){return JSON.parse(H_c.support?H_c.items.getItem(H_a):null)},H_c.removeItem=function(H_a){H_c.support&&H_c.items.removeItem(H_a)},H_c.clear=function(){H_c.support&&H_c.items.clear()},H_c.items=null,H_c.support=!1,H_c}()},H_c}(),H_H=(function(){function H_d(){}H_k(H_d,"laya.net.ResourceVersion"),H_d.enable=function(H_a,H_b,H_c){void 0===H_c&&(H_c=2),laya.net.ResourceVersion.type=H_c,H_z.loader.load(H_a,H_u.create(null,H_d.onManifestLoaded,[H_b]),null,"json"),H_I.customFormat=H_d.addVersionPrefix},H_d.onManifestLoaded=function(H_a,H_b){H_d.manifest=H_b,H_a.run(),H_b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},H_d.addVersionPrefix=function(H_a){return H_d.manifest&&H_d.manifest[H_a]?2==H_d.type?H_d.manifest[H_a]:H_d.manifest[H_a]+"/"+H_a:H_a},H_d.FOLDER_VERSION=1,H_d.FILENAME_VERSION=2,H_d.manifest=null,H_d.type=1}(),function(){function H_a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}H_k(H_a,"laya.net.TTFLoader");var H_b=H_a.prototype;return H_b.load=function(H_a){var H_b=(this._url=H_a).split(".ttf")[0].split("/");this.fontName=H_b[H_b.length-1],H_O.window.conch?this._loadConch():H_O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},H_b._loadConch=function(){this._http=new H_ga,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},H_b._onHttpLoaded=function(H_a){H_O.window.conch.setFontFaceFromBuffer(this.fontName,H_a),this._clearHttp(),this._complete()},H_b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},H_b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},H_b._complete=function(){H_z.timer.clear(this,this._complete),H_z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},H_b._checkComplete=function(){H_F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},H_b._loadWithFontFace=function(){var H_a=new H_O.window.FontFace(this.fontName,"url('"+this._url+"')");H_O.window.document.fonts.add(H_a);var H_b=this;H_a.loaded.then(function(){H_b._complete()}),H_a.load()},H_b._createDiv=function(){this._div=H_O.createElement("div"),this._div.innerHTML="laya";var H_a=this._div.style;H_a.fontFamily=this.fontName,H_a.position="absolute",H_a.left="-100px",H_a.top="-100px",H_O.document.body.appendChild(this._div)},H_b._loadWithCSS=function(){var H_a=this,H_b=H_O.createElement("style");H_b.type="text/css",H_O.document.body.appendChild(H_b),H_b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=H_F.measureText("LayaTTFFont",this._fontTxt).width;var H_c=this;H_b.onload=function(){H_z.timer.once(1e4,H_c,H_a._complete)},H_z.timer.loop(20,this,this._checkComplete),this._createDiv()},H_a._testString="LayaTTFFont",H_a}()),H_I=function(){function H_d(H_a){this._url=null,this._path=null,this._url=H_d.formatURL(H_a),this._path=H_d.getPath(H_a)}H_k(H_d,"laya.net.URL");var H_a=H_d.prototype;return H_q(0,H_a,"path",function(){return this._path}),H_q(0,H_a,"url",function(){return this._url}),H_d.formatURL=function(H_a,H_b){if(!H_a)return"null path";if(0<H_a.indexOf(":"))return H_a;null!=H_d.customFormat&&(H_a=H_d.customFormat(H_a,H_b));var H_c=H_a.charAt(0);if("."===H_c)return H_d.formatRelativePath((H_b||H_d.basePath)+H_a);if("~"===H_c)return H_d.rootPath+H_a.substring(1);if("d"===H_c){if(0===H_a.indexOf("data:image"))return H_a}else if("/"===H_c)return H_a;return(H_b||H_d.basePath)+H_a},H_d.formatRelativePath=function(H_a){for(var H_b=H_a.split("/"),H_c=0,H_d=H_b.length;H_c<H_d;H_c++)".."==H_b[H_c]&&(H_b.splice(H_c-1,2),H_c-=2);return H_b.join("/")},H_d.isAbsolute=function(H_a){return 0<H_a.indexOf(":")||"/"==H_a.charAt(0)},H_d.getPath=function(H_a){var H_b=H_a.lastIndexOf("/");return 0<H_b?H_a.substr(0,H_b+1):""},H_d.getFileName=function(H_a){var H_b=H_a.lastIndexOf("/");return 0<H_b?H_a.substr(H_b+1):H_a},H_d.version={},H_d.basePath="",H_d.rootPath="",H_d.customFormat=function(H_a){var H_b=H_d.version[H_a];return!H_J.isConchApp&&H_b&&(H_a+="?v="+H_b),H_a},H_d}(),H_J=function(){function H_e(H_a,H_b){this._timeId=0;var H_c=H_e._mainCanvas.source.style;H_c.position="absolute",H_c.top=H_c.left="0px",H_c.background="#000000",H_e._mainCanvas.source.id="layaCanvas";var H_d=laya.renders.Render.isWebGL;H_e._mainCanvas.source.width=H_a,H_e._mainCanvas.source.height=H_b,H_d&&H_e.WebGL.init(H_e._mainCanvas,H_a,H_b),H_O.container.appendChild(H_e._mainCanvas.source),(H_e._context=new H_K(H_a,H_b,H_d?null:H_e._mainCanvas)).ctx.setIsMainContext(),H_O.window.requestAnimationFrame(function H_a(H_b){H_O.window.requestAnimationFrame(H_a);H_z.stage._loop()}),H_z.stage.on("visibilitychange",this,this._onVisibilitychange)}H_k(H_e,"laya.renders.Render");var H_a=H_e.prototype;return H_a._onVisibilitychange=function(){H_z.stage.isVisibility?0!=this._timeId&&H_O.window.clearInterval(this._timeId):this._timeId=H_O.window.setInterval(this._enterFrame,1e3)},H_a._enterFrame=function(H_a){H_z.stage._loop()},H_q(1,H_e,"context",function(){return H_e._context}),H_q(1,H_e,"canvas",function(){return H_e._mainCanvas.source}),H_e._context=null,H_e._mainCanvas=null,H_e.WebGL=null,H_e.isConchNode=!1,H_e.isConchApp=!1,H_e.isConchWebGL=!1,H_e.isWebGL=!1,H_e.is3DMode=!1,H_e.optimizeTextureMemory=function(H_a,H_b){return!0},H_e.__init$=function(){H_g.ConchRenderType=H_g.ConchRenderType||1,H_g.ConchRenderType|=H_g.conch?4:0,H_e.isConchNode=5==(5&H_g.ConchRenderType),H_e.isConchApp=4==(4&H_g.ConchRenderType),H_e.isConchWebGL=6==H_g.ConchRenderType},H_e}(),H_K=function(){function H_g(H_a,H_b,H_c){this.x=0,this.y=0,this._drawTexture=function(H_a,H_b,H_c){H_c[0].loaded&&this.ctx.drawTexture(H_c[0],H_c[1],H_c[2],H_c[3],H_c[4],H_a,H_b)},this._fillTexture=function(H_a,H_b,H_c){H_c[0].loaded&&this.ctx.fillTexture(H_c[0],H_c[1]+H_a,H_c[2]+H_b,H_c[3],H_c[4],H_c[5],H_c[6],H_c[7])},this._drawTextureWithTransform=function(H_a,H_b,H_c){H_c[0].loaded&&this.ctx.drawTextureWithTransform(H_c[0],H_c[1],H_c[2],H_c[3],H_c[4],H_c[5],H_a,H_b,H_c[6])},this._fillQuadrangle=function(H_a,H_b,H_c){this.ctx.fillQuadrangle(H_c[0],H_c[1],H_c[2],H_c[3],H_c[4])},this._drawRect=function(H_a,H_b,H_c){var H_d=this.ctx;null!=H_c[4]&&(H_d.fillStyle=H_c[4],H_d.fillRect(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3],null)),null!=H_c[5]&&(H_d.strokeStyle=H_c[5],H_d.lineWidth=H_c[6],H_d.strokeRect(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3],H_c[6]))},this._drawPie=function(H_a,H_b,H_c){var H_d=this.ctx;H_J.isWebGL&&H_d.setPathId(H_c[8]),H_d.beginPath(),H_J.isWebGL?(H_d.movePath(H_c[0]+H_a,H_c[1]+H_b),H_d.moveTo(0,0)):H_d.moveTo(H_a+H_c[0],H_b+H_c[1]),H_d.arc(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3],H_c[4]),H_d.closePath(),this._fillAndStroke(H_c[5],H_c[6],H_c[7],!0)},this._clipRect=function(H_a,H_b,H_c){this.ctx.clipRect(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3])},this._fillRect=function(H_a,H_b,H_c){this.ctx.fillRect(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3],H_c[4])},this._drawCircle=function(H_a,H_b,H_c){var H_d=this.ctx;H_J.isWebGL&&H_d.setPathId(H_c[6]),H_X.drawCall++,H_d.beginPath(),H_J.isWebGL&&H_d.movePath(H_c[0]+H_a,H_c[1]+H_b),H_d.arc(H_c[0]+H_a,H_c[1]+H_b,H_c[2],0,H_g.PI2),H_d.closePath(),this._fillAndStroke(H_c[3],H_c[4],H_c[5],!0)},this._fillCircle=function(H_a,H_b,H_c){H_X.drawCall++;var H_d=this.ctx;H_d.beginPath(),H_d.fillStyle=H_c[3],H_d.arc(H_c[0]+H_a,H_c[1]+H_b,H_c[2],0,H_g.PI2),H_d.fill()},this._setShader=function(H_a,H_b,H_c){this.ctx.setShader(H_c[0])},this._drawLine=function(H_a,H_b,H_c){var H_d=this.ctx;H_J.isWebGL&&H_d.setPathId(H_c[6]),H_d.beginPath(),H_d.strokeStyle=H_c[4],H_d.lineWidth=H_c[5],H_J.isWebGL?(H_d.movePath(H_a,H_b),H_d.moveTo(H_c[0],H_c[1]),H_d.lineTo(H_c[2],H_c[3])):(H_d.moveTo(H_a+H_c[0],H_b+H_c[1]),H_d.lineTo(H_a+H_c[2],H_b+H_c[3])),H_d.stroke()},this._drawLines=function(H_a,H_b,H_c){var H_d=this.ctx;H_J.isWebGL&&H_d.setPathId(H_c[5]),H_d.beginPath(),H_a+=H_c[0],H_b+=H_c[1],H_J.isWebGL&&H_d.movePath(H_a,H_b),H_d.strokeStyle=H_c[3],H_d.lineWidth=H_c[4];var H_e=H_c[2],H_f=2,H_g=H_e.length;if(H_J.isWebGL)for(H_d.moveTo(H_e[0],H_e[1]);H_f<H_g;)H_d.lineTo(H_e[H_f++],H_e[H_f++]);else for(H_d.moveTo(H_a+H_e[0],H_b+H_e[1]);H_f<H_g;)H_d.lineTo(H_a+H_e[H_f++],H_b+H_e[H_f++]);H_d.stroke()},this._drawLinesWebGL=function(H_a,H_b,H_c){this.ctx.drawLines(H_a+this.x+H_c[0],H_b+this.y+H_c[1],H_c[2],H_c[3],H_c[4])},this._drawCurves=function(H_a,H_b,H_c){this.ctx.drawCurves(H_a,H_b,H_c)},this._draw=function(H_a,H_b,H_c){H_c[0].call(null,this,H_a,H_b)},this._transformByMatrix=function(H_a,H_b,H_c){this.ctx.transformByMatrix(H_c[0])},this._setTransform=function(H_a,H_b,H_c){this.ctx.setTransform(H_c[0],H_c[1],H_c[2],H_c[3],H_c[4],H_c[5])},this._setTransformByMatrix=function(H_a,H_b,H_c){this.ctx.setTransformByMatrix(H_c[0])},this._save=function(H_a,H_b,H_c){this.ctx.save()},this._restore=function(H_a,H_b,H_c){this.ctx.restore()},this._translate=function(H_a,H_b,H_c){this.ctx.translate(H_c[0],H_c[1])},this._transform=function(H_a,H_b,H_c){this.ctx.translate(H_c[1]+H_a,H_c[2]+H_b);var H_d=H_c[0];this.ctx.transform(H_d.a,H_d.b,H_d.c,H_d.d,H_d.tx,H_d.ty),this.ctx.translate(-H_a-H_c[1],-H_b-H_c[2])},this._rotate=function(H_a,H_b,H_c){this.ctx.translate(H_c[1]+H_a,H_c[2]+H_b),this.ctx.rotate(H_c[0]),this.ctx.translate(-H_a-H_c[1],-H_b-H_c[2])},this._scale=function(H_a,H_b,H_c){this.ctx.translate(H_c[2]+H_a,H_c[3]+H_b),this.ctx.scale(H_c[0],H_c[1]),this.ctx.translate(-H_a-H_c[2],-H_b-H_c[3])},this._alpha=function(H_a,H_b,H_c){this.ctx.globalAlpha*=H_c[0]},this._setAlpha=function(H_a,H_b,H_c){this.ctx.globalAlpha=H_c[0]},this._fillText=function(H_a,H_b,H_c){this.ctx.fillText(H_c[0],H_c[1]+H_a,H_c[2]+H_b,H_c[3],H_c[4],H_c[5])},this._strokeText=function(H_a,H_b,H_c){this.ctx.strokeText(H_c[0],H_c[1]+H_a,H_c[2]+H_b,H_c[3],H_c[4],H_c[5],H_c[6])},this._fillBorderText=function(H_a,H_b,H_c){this.ctx.fillBorderText(H_c[0],H_c[1]+H_a,H_c[2]+H_b,H_c[3],H_c[4],H_c[5],H_c[6],H_c[7])},this._blendMode=function(H_a,H_b,H_c){this.ctx.globalCompositeOperation=H_c[0]},this._beginClip=function(H_a,H_b,H_c){this.ctx.beginClip&&this.ctx.beginClip(H_a+H_c[0],H_b+H_c[1],H_c[2],H_c[3])},this._setIBVB=function(H_a,H_b,H_c){this.ctx.setIBVB(H_c[0]+H_a,H_c[1]+H_b,H_c[2],H_c[3],H_c[4],H_c[5],H_c[6],H_c[7])},this._fillTrangles=function(H_a,H_b,H_c){this.ctx.fillTrangles(H_c[0],H_c[1]+H_a,H_c[2]+H_b,H_c[3],H_c[4])},this._drawPath=function(H_a,H_b,H_c){var H_d=this.ctx;H_J.isWebGL&&H_d.setPathId(-1),H_d.beginPath(),H_a+=H_c[0],H_b+=H_c[1],H_J.isWebGL&&H_d.movePath(H_a,H_b);for(var H_e=H_c[2],H_f=0,H_g=H_e.length;H_f<H_g;H_f++){var H_h=H_e[H_f];switch(H_h[0]){case"moveTo":H_J.isWebGL?H_d.moveTo(H_h[1],H_h[2]):H_d.moveTo(H_a+H_h[1],H_b+H_h[2]);break;case"lineTo":H_J.isWebGL?H_d.lineTo(H_h[1],H_h[2]):H_d.lineTo(H_a+H_h[1],H_b+H_h[2]);break;case"arcTo":H_J.isWebGL?H_d.arcTo(H_h[1],H_h[2],H_h[3],H_h[4],H_h[5]):H_d.arcTo(H_a+H_h[1],H_b+H_h[2],H_a+H_h[3],H_b+H_h[4],H_h[5]);break;case"closePath":H_d.closePath()}}var H_i=H_c[3];null!=H_i&&(H_d.fillStyle=H_i.fillStyle,H_d.fill());var H_j=H_c[4];null!=H_j&&(H_d.strokeStyle=H_j.strokeStyle,H_d.lineWidth=H_j.lineWidth||1,H_d.lineJoin=H_j.lineJoin,H_d.lineCap=H_j.lineCap,H_d.miterLimit=H_j.miterLimit,H_d.stroke())},this.drawPoly=function(H_a,H_b,H_c){this.ctx.drawPoly(H_a+this.x+H_c[0],H_b+this.y+H_c[1],H_c[2],H_c[3],H_c[4],H_c[5],H_c[6])},this._drawPoly=function(H_a,H_b,H_c){var H_d=this.ctx,H_e=H_c[2],H_f=2,H_g=H_e.length;if(H_J.isWebGL)for(H_d.setPathId(H_c[6]),H_d.beginPath(),H_a+=H_c[0],H_b+=H_c[1],H_d.movePath(H_a,H_b),H_d.moveTo(H_e[0],H_e[1]);H_f<H_g;)H_d.lineTo(H_e[H_f++],H_e[H_f++]);else for(H_d.beginPath(),H_a+=H_c[0],H_b+=H_c[1],H_d.moveTo(H_a+H_e[0],H_b+H_e[1]);H_f<H_g;)H_d.lineTo(H_a+H_e[H_f++],H_b+H_e[H_f++]);H_d.closePath(),this._fillAndStroke(H_c[3],H_c[4],H_c[5],H_c[7])},this._drawSkin=function(H_a,H_b,H_c){var H_d=H_c[0];if(H_d){var H_e=this.ctx;H_d.render(H_e,H_a,H_b)}},this._drawParticle=function(H_a,H_b,H_c){this.ctx.drawParticle(H_a+this.x,H_b+this.y,H_c[0])},this._setFilters=function(H_a,H_b,H_c){this.ctx.setFilters(H_c)},H_c?this.ctx=H_c.getContext("2d"):(H_c=H_va.create("3D"),this.ctx=H_F.createWebGLContext2D(H_c),H_c._setContext(this.ctx)),H_c.size(H_a,H_b),this.canvas=H_c}H_k(H_g,"laya.renders.RenderContext");var H_a=H_g.prototype;return H_a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},H_a.drawTexture=function(H_a,H_b,H_c,H_d,H_e){H_a.loaded&&this.ctx.drawTexture(H_a,H_b,H_c,H_d,H_e,this.x,this.y)},H_a._drawTextures=function(H_a,H_b,H_c){H_c[0].loaded&&this.ctx.drawTextures(H_c[0],H_c[1],H_a+this.x,H_b+this.y)},H_a.drawTextureWithTransform=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_a.loaded&&this.ctx.drawTextureWithTransform(H_a,H_b,H_c,H_d,H_e,H_f,this.x,this.y,H_g)},H_a.fillQuadrangle=function(H_a,H_b,H_c,H_d,H_e){this.ctx.fillQuadrangle(H_a,H_b,H_c,H_d,H_e)},H_a.drawCanvas=function(H_a,H_b,H_c,H_d,H_e){this.ctx.drawCanvas(H_a,H_b+this.x,H_c+this.y,H_d,H_e)},H_a.drawRect=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=1);var H_g=this.ctx;H_g.strokeStyle=H_e,H_g.lineWidth=H_f,H_g.strokeRect(H_a+this.x,H_b+this.y,H_c,H_d,H_f)},H_a._fillAndStroke=function(H_a,H_b,H_c,H_d){void 0===H_d&&(H_d=!1);var H_e=this.ctx;null!=H_a&&(H_e.fillStyle=H_a,H_J.isWebGL?H_e.fill(H_d):H_e.fill()),null!=H_b&&0<H_c&&(H_e.strokeStyle=H_b,H_e.lineWidth=H_c,H_e.stroke())},H_a.clipRect=function(H_a,H_b,H_c,H_d){this.ctx.clipRect(H_a+this.x,H_b+this.y,H_c,H_d)},H_a.fillRect=function(H_a,H_b,H_c,H_d,H_e){this.ctx.fillRect(H_a+this.x,H_b+this.y,H_c,H_d,H_e)},H_a.drawCircle=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=1),H_X.drawCall++;var H_f=this.ctx;H_f.beginPath(),H_f.strokeStyle=H_d,H_f.lineWidth=H_e,H_f.arc(H_a+this.x,H_b+this.y,H_c,0,H_g.PI2),H_f.stroke()},H_a.drawTriangles=function(H_a,H_b,H_c){if(H_J.isWebGL)this.ctx.drawTriangles(H_c[0],H_a+H_c[1],H_b+H_c[2],H_c[3],H_c[4],H_c[5],H_c[6],H_c[7],H_c[8],H_c[9]);else{var H_d=H_c[5],H_e=0,H_f=H_d.length,H_g=this.ctx;for(H_e=0;H_e<H_f;H_e+=3){var H_h=2*H_d[H_e],H_i=2*H_d[H_e+1],H_j=2*H_d[H_e+2];H_g.drawTriangle(H_c[0],H_c[3],H_c[4],H_h,H_i,H_j,H_c[6],!0)}}},H_a.fillCircle=function(H_a,H_b,H_c,H_d){H_X.drawCall++;var H_e=this.ctx;H_e.beginPath(),H_e.fillStyle=H_d,H_e.arc(H_a+this.x,H_b+this.y,H_c,0,H_g.PI2),H_e.fill()},H_a.setShader=function(H_a){this.ctx.setShader(H_a)},H_a.drawLine=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=1);var H_g=this.ctx;H_g.beginPath(),H_g.strokeStyle=H_e,H_g.lineWidth=H_f,H_g.moveTo(this.x+H_a,this.y+H_b),H_g.lineTo(this.x+H_c,this.y+H_d),H_g.stroke()},H_a.clear=function(){this.ctx.clear()},H_a.transformByMatrix=function(H_a){this.ctx.transformByMatrix(H_a)},H_a.setTransform=function(H_a,H_b,H_c,H_d,H_e,H_f){this.ctx.setTransform(H_a,H_b,H_c,H_d,H_e,H_f)},H_a.setTransformByMatrix=function(H_a){this.ctx.setTransformByMatrix(H_a)},H_a.save=function(){this.ctx.save()},H_a.restore=function(){this.ctx.restore()},H_a.translate=function(H_a,H_b){this.ctx.translate(H_a,H_b)},H_a.transform=function(H_a,H_b,H_c,H_d,H_e,H_f){this.ctx.transform(H_a,H_b,H_c,H_d,H_e,H_f)},H_a.rotate=function(H_a){this.ctx.rotate(H_a)},H_a.scale=function(H_a,H_b){this.ctx.scale(H_a,H_b)},H_a.alpha=function(H_a){this.ctx.globalAlpha*=H_a},H_a.setAlpha=function(H_a){this.ctx.globalAlpha=H_a},H_a.fillWords=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_f&&(H_f=0),this.ctx.fillWords(H_a,H_b,H_c,H_d,H_e,H_f)},H_a.fillBorderWords=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this.ctx.fillBorderWords(H_a,H_b,H_c,H_d,H_e,H_f,H_g)},H_a.fillText=function(H_a,H_b,H_c,H_d,H_e,H_f){this.ctx.fillText(H_a,H_b+this.x,H_c+this.y,H_d,H_e,H_f)},H_a.strokeText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this.ctx.strokeText(H_a,H_b+this.x,H_c+this.y,H_d,H_e,H_f,H_g)},H_a.blendMode=function(H_a){this.ctx.globalCompositeOperation=H_a},H_a.flush=function(){this.ctx.flush&&this.ctx.flush()},H_a.addRenderObject=function(H_a){this.ctx.addRenderObject(H_a)},H_a.beginClip=function(H_a,H_b,H_c,H_d){this.ctx.beginClip&&this.ctx.beginClip(H_a,H_b,H_c,H_d)},H_a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},H_a.fillTrangles=function(H_a,H_b,H_c){this.ctx.fillTrangles(H_c[0],H_c[1],H_c[2],H_c[3],4<H_c.length?H_c[4]:null)},H_g.PI2=2*Math.PI,H_g}(),H_L=function(){function H_g(H_a,H_b){switch(this._next=H_b||H_g.NORENDER,H_a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=H_t._filter);case 69905:return void(this._fun=H_g._initRenderFun)}this.onCreate(H_a)}H_k(H_g,"laya.renders.RenderSprite");var H_a=H_g.prototype;return H_a.onCreate=function(H_a){},H_a._style=function(H_a,H_b,H_c,H_d){H_a._style.render(H_a,H_b,H_c,H_d);var H_e=this._next;H_e._fun.call(H_e,H_a,H_b,H_c,H_d)},H_a._no=function(H_a,H_b,H_c,H_d){},H_a._custom=function(H_a,H_b,H_c,H_d){H_a.customRender(H_b,H_c,H_d);var H_e=H_a._style._tf;this._next._fun.call(this._next,H_a,H_b,H_c-H_e.translateX,H_d-H_e.translateY)},H_a._clip=function(H_a,H_b,H_c,H_d){var H_e=this._next;if(H_e!=H_g.NORENDER){var H_f=H_a._style.scrollRect;H_b.ctx.save(),H_b.ctx.clipRect(H_c,H_d,H_f.width,H_f.height),H_e._fun.call(H_e,H_a,H_b,H_c-H_f.x,H_d-H_f.y),H_b.ctx.restore()}},H_a._blend=function(H_a,H_b,H_c,H_d){var H_e=H_a._style;H_e.blendMode&&(H_b.ctx.globalCompositeOperation=H_e.blendMode);var H_f=this._next;H_f._fun.call(H_f,H_a,H_b,H_c,H_d),H_b.ctx.globalCompositeOperation="source-over"},H_a._mask=function(H_a,H_b,H_c,H_d){var H_e=this._next;H_e._fun.call(H_e,H_a,H_b,H_c,H_d);var H_f=H_a.mask;H_f&&(H_b.ctx.globalCompositeOperation="destination-in",(0<H_f.numChildren||!H_f.graphics._isOnlyOne())&&(H_f.cacheAsBitmap=!0),H_f.render(H_b,H_c-H_a.pivotX,H_d-H_a.pivotY)),H_b.ctx.globalCompositeOperation="source-over"},H_a._graphics=function(H_a,H_b,H_c,H_d){var H_e=H_a._style._tf;H_a._graphics&&H_a._graphics._render(H_a,H_b,H_c-H_e.translateX,H_d-H_e.translateY);var H_f=this._next;H_f._fun.call(H_f,H_a,H_b,H_c,H_d)},H_a._image=function(H_a,H_b,H_c,H_d){var H_e=H_a._style;H_b.ctx.drawTexture2(H_c,H_d,H_e._tf.translateX,H_e._tf.translateY,H_a.transform,H_e.alpha,H_e.blendMode,H_a._graphics._one)},H_a._image2=function(H_a,H_b,H_c,H_d){var H_e=H_a._style._tf;H_b.ctx.drawTexture2(H_c,H_d,H_e.translateX,H_e.translateY,H_a.transform,1,null,H_a._graphics._one)},H_a._alpha=function(H_a,H_b,H_c,H_d){var H_e;if(.01<(H_e=H_a._style.alpha)||H_a._needRepaint()){var H_f=H_b.ctx.globalAlpha;H_b.ctx.globalAlpha*=H_e;var H_g=this._next;H_g._fun.call(H_g,H_a,H_b,H_c,H_d),H_b.ctx.globalAlpha=H_f}},H_a._transform=function(H_a,H_b,H_c,H_d){var H_e=H_a.transform,H_f=this._next;H_e&&H_f!=H_g.NORENDER?(H_b.save(),H_b.transform(H_e.a,H_e.b,H_e.c,H_e.d,H_e.tx+H_c,H_e.ty+H_d),H_f._fun.call(H_f,H_a,H_b,0,0),H_b.restore()):H_f._fun.call(H_f,H_a,H_b,H_c,H_d)},H_a._childs=function(H_a,H_b,H_c,H_d){var H_e=H_a._style,H_f=H_e._tf;if(H_c=H_c-H_f.translateX+H_e.paddingLeft,H_d=H_d-H_f.translateY+H_e.paddingTop,H_e._calculation){var H_g=H_a._getWords();if(H_g){var H_h=H_e;H_h&&(H_h.stroke?H_b.fillBorderWords(H_g,H_c,H_d,H_h.font,H_h.color,H_h.strokeColor,H_h.stroke):H_b.fillWords(H_g,H_c,H_d,H_h.font,H_h.color,"none"!=H_h.textDecoration&&H_h.underLine?1:0))}}var H_i,H_j=H_a._childs,H_k=H_j.length;if(H_a.viewport||H_a.optimizeScrollRect&&H_a._style.scrollRect){var H_l=H_a.viewport||H_a._style.scrollRect,H_m=H_l.x,H_n=H_l.y,H_q=H_l.right,H_r=H_l.bottom,H_s=NaN,H_t=NaN;for(H_u=0;H_u<H_k;++H_u)(H_i=H_j[H_u]).visible&&(H_s=H_i._x)<H_q&&H_s+H_i.width>H_m&&(H_t=H_i._y)<H_r&&H_t+H_i.height>H_n&&H_i.render(H_b,H_c,H_d)}else for(var H_u=0;H_u<H_k;++H_u)(H_i=H_j[H_u])._style.visible&&H_i.render(H_b,H_c,H_d)},H_a._canvas=function(H_a,H_b,H_c,H_d){var H_e=H_a._$P.cacheCanvas;if(H_e){"bitmap"===H_e.type?H_X.canvasBitmap++:H_X.canvasNormal++;var H_f=H_e.ctx;if(H_a._needRepaint()||!H_f)this._canvas_repaint(H_a,H_b,H_c,H_d);else{var H_g=H_e._cacheRec;H_b.drawCanvas(H_f.canvas,H_c+H_g.x,H_d+H_g.y,H_g.width,H_g.height)}}else this._next._fun.call(this._next,H_a,H_b,H_c,H_d)},H_a._canvas_repaint=function(H_a,H_b,H_c,H_d){var H_e=H_a._$P.cacheCanvas,H_f=this._next;if(H_e){var H_g,H_h,H_i,H_j,H_k=H_e.ctx,H_l=H_a._needRepaint()||!H_k,H_m=H_e.type;if("bitmap"===H_m?H_X.canvasBitmap++:H_X.canvasNormal++,H_l){var H_n,H_q;H_e._cacheRec||(H_e._cacheRec=new H_B),H_J.isWebGL&&"bitmap"!==H_m?H_e._cacheRec.setTo(-H_a.pivotX,-H_a.pivotY,1,1):((H_j=H_a.getSelfBounds()).x=H_j.x-H_a.pivotX,H_j.y=H_j.y-H_a.pivotY,H_j.x=H_j.x-16,H_j.y=H_j.y-16,H_j.width=H_j.width+32,H_j.height=H_j.height+32,H_j.x=Math.floor(H_j.x+H_c)-H_c,H_j.y=Math.floor(H_j.y+H_d)-H_d,H_j.width=Math.floor(H_j.width),H_j.height=Math.floor(H_j.height),H_e._cacheRec.copyFrom(H_j)),H_j=H_e._cacheRec;var H_r,H_s=H_J.isWebGL?1:H_O.pixelRatio*H_z.stage.clientScaleX,H_t=H_J.isWebGL?1:H_O.pixelRatio*H_z.stage.clientScaleY;if(!H_J.isWebGL){var H_u,H_v=1,H_w=1;for(H_u=H_a;H_u&&H_u!=H_z.stage;)H_v*=H_u.scaleX,H_w*=H_u.scaleY,H_u=H_u.parent;H_J.isWebGL?(H_v<1&&(H_s*=H_v),H_w<1&&(H_t*=H_w)):(1<H_v&&(H_s*=H_v),1<H_w&&(H_t*=H_w))}if(H_a.scrollRect){var H_x=H_a.scrollRect;H_j.x-=H_x.x,H_j.y-=H_x.y}if(H_n=H_j.width*H_s,H_q=H_j.height*H_t,H_h=H_j.x,H_i=H_j.y,H_J.isWebGL&&"bitmap"===H_m&&(2048<H_n||2048<H_q))return console.warn("cache bitmap size larger than 2048,cache ignored"),H_e.ctx&&(H_W.recover("RenderContext",H_e.ctx),H_e.ctx.canvas.size(0,0),H_e.ctx=null),void H_f._fun.call(H_f,H_a,H_b,H_c,H_d);if(H_k||(H_k=H_e.ctx=H_W.getItem("RenderContext")||new H_K(H_n,H_q,H_va.create("AUTO"))),H_k.ctx.sprite=H_a,(H_g=H_k.canvas).clear(),(H_g.width!=H_n||H_g.height!=H_q)&&H_g.size(H_n,H_q),"bitmap"===H_m?H_g.context.asBitmap=!0:"normal"===H_m&&(H_g.context.asBitmap=!1),1!=H_s||1!=H_t){var H_y=H_k.ctx;H_y.save(),H_y.scale(H_s,H_t),!H_J.isConchWebGL&&H_J.isConchApp&&(H_r=H_a._$P.cf)&&H_y.setFilterMatrix&&H_y.setFilterMatrix(H_r._mat,H_r._alpha),H_f._fun.call(H_f,H_a,H_k,-H_h,-H_i),H_y.restore(),H_J.isConchApp&&!H_J.isConchWebGL||H_a._applyFilters()}else H_y=H_k.ctx,!H_J.isConchWebGL&&H_J.isConchApp&&(H_r=H_a._$P.cf)&&H_y.setFilterMatrix&&H_y.setFilterMatrix(H_r._mat,H_r._alpha),H_f._fun.call(H_f,H_a,H_k,-H_h,-H_i),H_J.isConchApp&&!H_J.isConchWebGL||H_a._applyFilters();H_a._$P.staticCache&&(H_e.reCache=!1),H_X.canvasReCache++}else H_h=(H_j=H_e._cacheRec).x,H_i=H_j.y,H_g=H_k.canvas;H_b.drawCanvas(H_g,H_c+H_h,H_d+H_i,H_j.width,H_j.height)}else H_f._fun.call(H_f,H_a,H_k,H_c,H_d)},H_g.__init__=function(){var H_a,H_b,H_c=0;for(H_b=H_F.createRenderSprite(69905,null),H_a=H_g.renders.length=4096,H_c=0;H_c<H_a;H_c++)H_g.renders[H_c]=H_b;H_g.renders[0]=H_F.createRenderSprite(0,null),function(H_a,H_b){for(var H_c=0,H_d=0;H_d<H_a.length;H_d++)H_c|=H_a[H_d],H_g.renders[H_c]=H_b}([1,512,4,2],new H_g(1,null)),H_g.renders[513]=H_F.createRenderSprite(513,null),H_g.renders[517]=new H_g(517,null)},H_g._initRenderFun=function(H_a,H_b,H_c,H_d){var H_e=H_a._renderType;(H_g.renders[H_e]=H_g._getTypeRender(H_e))._fun(H_a,H_b,H_c,H_d)},H_g._getTypeRender=function(H_a){for(var H_b=null,H_c=2048;1<H_c;)H_c&H_a&&(H_b=H_F.createRenderSprite(H_c,H_b)),H_c>>=1;return H_b},H_g.IMAGE=1,H_g.ALPHA=2,H_g.TRANSFORM=4,H_g.BLEND=8,H_g.CANVAS=16,H_g.FILTERS=32,H_g.MASK=64,H_g.CLIP=128,H_g.STYLE=256,H_g.GRAPHICS=512,H_g.CUSTOM=1024,H_g.CHILDS=2048,H_g.INIT=69905,H_g.renders=[],H_g.NORENDER=new H_g(0,null),H_g}(),H_M=function(){function H_h(){this._repaint=!1}H_k(H_h,"laya.resource.Context");var H_a=H_h.prototype;return H_a.replaceReset=function(){var H_a,H_b,H_c=0;for(H_a=H_h.replaceKeys.length,H_c=0;H_c<H_a;H_c++)H_b=H_h.replaceKeys[H_c],this[H_h.newKeys[H_c]]=this[H_b]},H_a.replaceResotre=function(){this.__restore(),this.__reset()},H_a.setIsMainContext=function(){},H_a.drawTextures=function(H_a,H_b,H_c,H_d){H_X.drawCall+=H_b.length/2;for(var H_e=H_a.width,H_f=H_a.height,H_g=0,H_h=H_b.length;H_g<H_h;H_g+=2)this.drawTexture(H_a,H_b[H_g],H_b[H_g+1],H_e,H_f,H_c,H_d)},H_a.drawCanvas=function(H_a,H_b,H_c,H_d,H_e){H_X.drawCall++,this.drawImage(H_a.source,H_b,H_c,H_d,H_e)},H_a.fillRect=function(H_a,H_b,H_c,H_d,H_e){H_X.drawCall++,H_e&&(this.fillStyle=H_e),this.__fillRect(H_a,H_b,H_c,H_d)},H_a.fillText=function(H_a,H_b,H_c,H_d,H_e,H_f){H_X.drawCall++,3<arguments.length&&null!=H_d&&(this.font=H_d,this.fillStyle=H_e,this.textAlign=H_f,this.textBaseline="top"),this.__fillText(H_a,H_b,H_c)},H_a.fillBorderText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){H_X.drawCall++,this.font=H_d,this.fillStyle=H_e,this.textBaseline="top",this.strokeStyle=H_f,this.lineWidth=H_g,this.textAlign=H_h,this.__strokeText(H_a,H_b,H_c),this.__fillText(H_a,H_b,H_c)},H_a.strokeText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_X.drawCall++,3<arguments.length&&null!=H_d&&(this.font=H_d,this.strokeStyle=H_e,this.lineWidth=H_f,this.textAlign=H_g,this.textBaseline="top"),this.__strokeText(H_a,H_b,H_c)},H_a.transformByMatrix=function(H_a){this.transform(H_a.a,H_a.b,H_a.c,H_a.d,H_a.tx,H_a.ty)},H_a.setTransformByMatrix=function(H_a){this.setTransform(H_a.a,H_a.b,H_a.c,H_a.d,H_a.tx,H_a.ty)},H_a.clipRect=function(H_a,H_b,H_c,H_d){H_X.drawCall++,this.beginPath(),this.rect(H_a,H_b,H_c,H_d),this.clip()},H_a.drawTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_X.drawCall++;var H_h=H_a.uv,H_i=H_a.bitmap.width,H_j=H_a.bitmap.height;this.drawImage(H_a.source,H_h[0]*H_i,H_h[1]*H_j,(H_h[2]-H_h[0])*H_i,(H_h[5]-H_h[3])*H_j,H_b+H_f,H_c+H_g,H_d,H_e)},H_a.drawTextureWithTransform=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){H_X.drawCall++;var H_j=H_a.uv,H_k=H_a.bitmap.width,H_l=H_a.bitmap.height;this.save(),1!=H_i&&(this.globalAlpha*=H_i),H_f?(this.transform(H_f.a,H_f.b,H_f.c,H_f.d,H_f.tx+H_g,H_f.ty+H_h),this.drawImage(H_a.source,H_j[0]*H_k,H_j[1]*H_l,(H_j[2]-H_j[0])*H_k,(H_j[5]-H_j[3])*H_l,H_b,H_c,H_d,H_e)):this.drawImage(H_a.source,H_j[0]*H_k,H_j[1]*H_l,(H_j[2]-H_j[0])*H_k,(H_j[5]-H_j[3])*H_l,H_b+H_g,H_c+H_h,H_d,H_e),this.restore()},H_a.drawTexture2=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=H_h[0];if(H_i.loaded&&H_i.bitmap&&H_i.source){H_X.drawCall++;var H_j=1!==H_f;if(H_j){var H_k=this.globalAlpha;this.globalAlpha*=H_f}var H_l=H_i.uv,H_m=H_i.bitmap.width,H_n=H_i.bitmap.height;H_e?(this.save(),this.transform(H_e.a,H_e.b,H_e.c,H_e.d,H_e.tx+H_a,H_e.ty+H_b),this.drawImage(H_i.source,H_l[0]*H_m,H_l[1]*H_n,(H_l[2]-H_l[0])*H_m,(H_l[5]-H_l[3])*H_n,H_h[1]-H_c,H_h[2]-H_d,H_h[3],H_h[4]),this.restore()):this.drawImage(H_i.source,H_l[0]*H_m,H_l[1]*H_n,(H_l[2]-H_l[0])*H_m,(H_l[5]-H_l[3])*H_n,H_h[1]-H_c+H_a,H_h[2]-H_d+H_b,H_h[3],H_h[4]),H_j&&(this.globalAlpha=H_k)}},H_a.fillTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){if(!H_h.pat){if(H_a.uv!=H_ka.DEF_UV){var H_i=new H_va("2D");H_i.getContext("2d"),H_i.size(H_a.width,H_a.height),H_i.context.drawTexture(H_a,0,0,H_a.width,H_a.height,0,0),H_a=new H_ka(H_i)}H_h.pat=this.createPattern(H_a.bitmap.source,H_f)}var H_j=H_b,H_k=H_c,H_l=0,H_m=0;H_g&&(H_j+=H_g.x%H_a.width,H_k+=H_g.y%H_a.height,H_l-=H_g.x%H_a.width,H_m-=H_g.y%H_a.height),this.translate(H_j,H_k),this.fillRect(H_l,H_m,H_d,H_e,H_h.pat),this.translate(-H_j,-H_k)},H_a.drawTriangle=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=H_a.bitmap,H_j=H_i.source,H_k=H_a.width,H_l=H_a.height,H_m=H_i.width,H_n=H_i.height,H_q=H_c[H_d]*H_m,H_r=H_c[H_e]*H_m,H_s=H_c[H_f]*H_m,H_t=H_c[H_d+1]*H_n,H_u=H_c[H_e+1]*H_n,H_v=H_c[H_f+1]*H_n,H_w=H_b[H_d],H_x=H_b[H_e],H_y=H_b[H_f],H_z=H_b[H_d+1],H_A=H_b[H_e+1],H_B=H_b[H_f+1];if(H_h){var H_C=(H_w+H_x+H_y)/3,H_D=(H_z+H_A+H_B)/3,H_E=H_w-H_C,H_F=H_z-H_D,H_G=Math.sqrt(H_E*H_E+H_F*H_F);H_w=H_C+H_E/H_G*(H_G+1),H_z=H_D+H_F/H_G*(H_G+1),H_F=H_A-H_D,H_x=H_C+(H_E=H_x-H_C)/(H_G=Math.sqrt(H_E*H_E+H_F*H_F))*(H_G+1),H_A=H_D+H_F/H_G*(H_G+1),H_F=H_B-H_D,H_y=H_C+(H_E=H_y-H_C)/(H_G=Math.sqrt(H_E*H_E+H_F*H_F))*(H_G+1),H_B=H_D+H_F/H_G*(H_G+1)}this.save(),H_g&&this.transform(H_g.a,H_g.b,H_g.c,H_g.d,H_g.tx,H_g.ty),this.beginPath(),this.moveTo(H_w,H_z),this.lineTo(H_x,H_A),this.lineTo(H_y,H_B),this.closePath(),this.clip();var H_H=1/(H_q*H_u+H_t*H_s+H_r*H_v-H_u*H_s-H_t*H_r-H_q*H_v),H_I=H_w*H_u+H_t*H_y+H_x*H_v-H_u*H_y-H_t*H_x-H_w*H_v,H_J=H_q*H_x+H_w*H_s+H_r*H_y-H_x*H_s-H_w*H_r-H_q*H_y,H_K=H_q*H_u*H_y+H_t*H_x*H_s+H_w*H_r*H_v-H_w*H_u*H_s-H_t*H_r*H_y-H_q*H_x*H_v,H_L=H_z*H_u+H_t*H_B+H_A*H_v-H_u*H_B-H_t*H_A-H_z*H_v,H_M=H_q*H_A+H_z*H_s+H_r*H_B-H_A*H_s-H_z*H_r-H_q*H_B,H_N=H_q*H_u*H_B+H_t*H_A*H_s+H_z*H_r*H_v-H_z*H_u*H_s-H_t*H_r*H_B-H_q*H_A*H_v;this.transform(H_I*H_H,H_L*H_H,H_J*H_H,H_M*H_H,H_K*H_H,H_N*H_H),this.drawImage(H_j,H_a.uv[0]*H_m,H_a.uv[1]*H_n,H_k,H_l,H_a.uv[0]*H_m,H_a.uv[1]*H_n,H_k,H_l),this.restore()},H_a.flush=function(){return 0},H_a.fillWords=function(H_a,H_b,H_c,H_d,H_e,H_f){H_d&&(this.font=H_d),H_e&&(this.fillStyle=H_e);this.textBaseline="top",this.textAlign="left";for(var H_g=0,H_h=H_a.length;H_g<H_h;H_g++){var H_i=H_a[H_g];if(this.__fillText(H_i.char,H_i.x+H_b,H_i.y+H_c),1===H_f){var H_j=H_i.height,H_k=.5*H_i.style.letterSpacing;H_k||(H_k=0),this.beginPath(),this.strokeStyle=H_e,this.lineWidth=1,this.moveTo(H_b+H_i.x-H_k+.5,H_c+H_i.y+H_j+.5),this.lineTo(H_b+H_i.x+H_i.width+H_k+.5,H_c+H_i.y+H_j+.5),this.stroke()}}},H_a.fillBorderWords=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_d&&(this.font=H_d),H_e&&(this.fillStyle=H_e),this.textBaseline="top",this.lineWidth=H_g,this.textAlign="left",this.strokeStyle=H_f;for(var H_h=0,H_i=H_a.length;H_h<H_i;H_h++){var H_j=H_a[H_h];this.__strokeText(H_j.char,H_j.x+H_b,H_j.y+H_c),this.__fillText(H_j.char,H_j.x+H_b,H_j.y+H_c)}},H_a.destroy=function(){this.canvas.width=this.canvas.height=0},H_a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},H_a.drawCurves=function(H_a,H_b,H_c){this.beginPath(),this.strokeStyle=H_c[3],this.lineWidth=H_c[4];var H_d=H_c[2];H_a+=H_c[0],H_b+=H_c[1],this.moveTo(H_a+H_d[0],H_b+H_d[1]);for(var H_e=2,H_f=H_d.length;H_e<H_f;)this.quadraticCurveTo(H_a+H_d[H_e++],H_b+H_d[H_e++],H_a+H_d[H_e++],H_b+H_d[H_e++]);this.stroke()},H_h.__init__=function(H_b){var H_c=laya.resource.Context.prototype;if(!(H_b=H_b||CanvasRenderingContext2D.prototype).inited){H_b.inited=!0,H_b.__fillText=H_b.fillText,H_b.__fillRect=H_b.fillRect,H_b.__strokeText=H_b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(H_a){H_b[H_a]=H_c[H_a]})}},H_h.replaceCanvasGetSet=function(H_a,H_b){var H_c=Object.getOwnPropertyDescriptor(H_a,H_b);if(!H_c||!H_c.configurable)return!1;var H_d,H_e={};for(H_d in H_c)"set"!=H_d&&(H_e[H_d]=H_c[H_d]);var H_f=H_c.set;return H_e.set=function(H_a){H_f.call(this,H_a);var H_b=this.getContext("2d");H_b&&"__reset"in H_b&&H_b.__reset()},Object.defineProperty(H_a,H_b,H_e),!0},H_h.replaceGetSet=function(H_a,H_b){var H_c=Object.getOwnPropertyDescriptor(H_a,H_b);if(!H_c||!H_c.configurable)return!1;var H_d,H_e={};for(H_d in H_c)"set"!=H_d&&(H_e[H_d]=H_c[H_d]);var H_f=H_c.set,H_g="___"+H_b+"__";return H_h.newKeys.push(H_g),H_e.set=function(H_a){H_a!=this[H_g]&&(this[H_g]=H_a,H_f.call(this,H_a))},Object.defineProperty(H_a,H_b,H_e),!0},H_h._default=new H_h,H_h.newKeys=[],H_i(H_h,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),H_h}(),H_N=function(){function H_f(H_a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++H_f._uniqueIDCounter,this._name=H_a||"Content Manager",H_f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,H_f._resourceManagers.push(this),this._resources=[],this._records={}}H_k(H_f,"laya.resource.ResourceManager");var H_a=H_f.prototype;return H_z.imps(H_a,{"laya.resource.IDispose":!0}),H_a.getResourceByIndex=function(H_a){return this._resources[H_a]},H_a.getResourcesLength=function(){return this._resources.length},H_a.addResource=function(H_a){return H_a.resourceManager&&H_a.resourceManager.removeResource(H_a),-1===this._resources.indexOf(H_a)&&((H_a._resourceManager=this)._resources.push(H_a),this.addRecord(H_a.uri,H_a.__className,H_a.memorySize),this.addSize(H_a.memorySize),!0)},H_a.removeResource=function(H_a){var H_b=this._resources.indexOf(H_a);return-1!==H_b&&(this._resources.splice(H_b,1),H_a._resourceManager=null,this._memorySize-=H_a.memorySize,this.addRecord(H_a.uri,H_a.__className,-H_a.memorySize),!0)},H_a.unload=function(){for(var H_a=this._resources.slice(0,this._resources.length),H_b=0;H_b<H_a.length;H_b++){H_a[H_b].destroy()}H_a.length=0},H_a.dispose=function(){if(this===H_f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");H_f._resourceManagers.splice(H_f._resourceManagers.indexOf(this),1),H_f._isResourceManagersSorted=!1;for(var H_a=this._resources.slice(0,this._resources.length),H_b=0;H_b<H_a.length;H_b++){var H_c=H_a[H_b];H_c.resourceManager.removeResource(H_c),H_c.destroy()}H_a.length=0},H_a.addSize=function(H_a){H_a&&(this.autoRelease&&0<H_a&&this._memorySize+H_a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=H_a)},H_a.addRecord=function(H_a,H_b,H_c){DEBUG&&H_c&&!H_a&&console.error(H_a,H_b,H_c),H_a&&(this._records.hasOwnProperty(H_b+"|"+H_a)||(this._records[H_b+"|"+H_a]=0),this._records[H_b+"|"+H_a]+=H_c,DEBUG&&this._records[H_b+"|"+H_a]<0&&console.error(H_a,H_b,this._records[H_b+"|"+H_a]))},H_a.garbageCollection=function(H_a){var H_b=this._resources;(H_b=H_b.slice()).sort(function(H_a,H_b){if(!H_a||!H_b)throw new Error("a或b不能为空！");return H_a.released&&H_b.released?0:H_a.released?1:H_b.released?-1:H_a._lastUseFrameCount-H_b._lastUseFrameCount});for(var H_c=H_X.loopCount,H_d=0,H_e=H_b.length;H_d<H_e;H_d++){var H_f=H_b[H_d];if(!(1<H_c-H_f._lastUseFrameCount))return void(this._memorySize>=H_a&&(this._isOverflow=!0));if(H_f.releaseResource(),this._memorySize<H_a)return void(this._isOverflow=!1)}},H_q(0,H_a,"id",function(){return this._id}),H_q(0,H_a,"name",function(){return this._name},function(H_a){!H_a&&""===H_a||this._name===H_a||(this._name=H_a,H_f._isResourceManagersSorted=!1)}),H_q(0,H_a,"memorySize",function(){return this._memorySize}),H_q(0,H_a,"records",function(){return this._records}),H_q(1,H_f,"systemResourceManager",function(){return H_f._systemResourceManager}),H_f.__init__=function(){H_f.currentResourceManager=H_f.systemResourceManager},H_f.getLoadedResourceManagerByIndex=function(H_a){return H_f._resourceManagers[H_a]},H_f.getLoadedResourceManagersCount=function(){return H_f._resourceManagers.length},H_f.recreateContentManagers=function(H_a){void 0===H_a&&(H_a=!1);for(var H_b=H_f.currentResourceManager,H_c=0;H_c<H_f._resourceManagers.length;H_c++){H_f.currentResourceManager=H_f._resourceManagers[H_c];for(var H_d=0;H_d<H_f.currentResourceManager._resources.length;H_d++)H_f.currentResourceManager._resources[H_d].releaseResource(H_a),H_f.currentResourceManager._resources[H_d].activeResource(H_a)}H_f.currentResourceManager=H_b},H_f.releaseContentManagers=function(H_a){void 0===H_a&&(H_a=!1);for(var H_b=H_f.currentResourceManager,H_c=0;H_c<H_f._resourceManagers.length;H_c++){H_f.currentResourceManager=H_f._resourceManagers[H_c];for(var H_d=0;H_d<H_f.currentResourceManager._resources.length;H_d++){var H_e=H_f.currentResourceManager._resources[H_d];!H_e.released&&H_e.releaseResource(H_a)}}H_f.currentResourceManager=H_b},H_f._uniqueIDCounter=0,H_f._isResourceManagersSorted=!1,H_f._resourceManagers=[],H_i(H_f,["_systemResourceManager",function(){return this._systemResourceManager=new H_f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=H_f._systemResourceManager}]),H_f}(),H_O=(function(){function H_a(){}H_k(H_a,"laya.system.System"),H_a.changeDefinition=function(H_a,H_b){H_z[H_a]=H_b;var H_c=H_a+"=classObj";H_z._runScript(H_c)},H_a.__init__=function(){H_J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function H_c(){}return H_k(H_c,"laya.utils.Browser"),H_q(1,H_c,"pixelRatio",function(){return H_c.__init__(),-1<H_c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:H_F.getPixelRatio()}),H_q(1,H_c,"height",function(){return H_c.__init__(),(H_z.stage&&H_z.stage.canvasRotation?H_c.clientWidth:H_c.clientHeight)*H_c.pixelRatio}),H_q(1,H_c,"clientWidth",function(){return H_c.__init__(),H_c.window.innerWidth||H_c.document.body.clientWidth}),H_q(1,H_c,"window",function(){return H_c.__init__(),H_c._window}),H_q(1,H_c,"clientHeight",function(){return H_c.__init__(),H_c.window.innerHeight||H_c.document.body.clientHeight||H_c.document.documentElement.clientHeight}),H_q(1,H_c,"width",function(){return H_c.__init__(),(H_z.stage&&H_z.stage.canvasRotation?H_c.clientHeight:H_c.clientWidth)*H_c.pixelRatio}),H_q(1,H_c,"container",function(){return H_c.__init__(),H_c._container||((H_c._container=H_c.createElement("div")).id="layaContainer",H_c.document.body.appendChild(H_c._container)),H_c._container},function(H_a){H_c._container=H_a}),H_q(1,H_c,"document",function(){return H_c.__init__(),H_c._document}),H_c.__init__=function(){if(!H_c._window){H_c._window=H_F.getWindow(),H_c._document=H_c.window.document,H_c._window.addEventListener("message",function(H_a){laya.utils.Browser._onMessage(H_a)},!1),H_c.document.__createElement=H_c.document.createElement,H_g.requestAnimationFrame=H_g.requestAnimationFrame||H_g.webkitRequestAnimationFrame||H_g.mozRequestAnimationFrame||H_g.oRequestAnimationFrame||H_g.msRequestAnimationFrame||function(H_a){return H_g.setTimeout(H_a,1e3/60)};var H_a=H_g.document.body.style;H_a["-webkit-user-select"]="none",H_a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",H_c.userAgent=H_c.window.navigator.userAgent,H_c.onIOS=!!(H_c.u=H_c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),H_c.onMobile=-1<H_c.u.indexOf("Mobile"),H_c.onIPhone=-1<H_c.u.indexOf("iPhone"),H_c.onMac=-1<H_c.u.indexOf("Mac OS X"),H_c.onIPad=-1<H_c.u.indexOf("iPad"),H_c.onAndroid=-1<H_c.u.indexOf("Android")||-1<H_c.u.indexOf("Adr"),H_c.onWP=-1<H_c.u.indexOf("Windows Phone"),H_c.onQQBrowser=-1<H_c.u.indexOf("QQBrowser"),H_c.onMQQBrowser=-1<H_c.u.indexOf("MQQBrowser")||-1<H_c.u.indexOf("Mobile")&&-1<H_c.u.indexOf("QQ"),H_c.onIE=!!H_c.window.ActiveXObject||"ActiveXObject"in H_c.window,H_c.onWeiXin=-1<H_c.u.indexOf("MicroMessenger"),H_c.onPC=!H_c.onMobile,H_c.onSafari=-1<H_c.u.indexOf("Safari"),H_c.onFirefox=-1<H_c.u.indexOf("Firefox"),H_c.onEdge=-1<H_c.u.indexOf("Edge"),H_c.onMiniGame=-1<H_c.u.indexOf("MiniGame"),H_c.onLimixiu=-1<H_c.u.indexOf("limixiu"),H_c.httpProtocol="http:"==H_c.window.location.protocol,H_c.onMiniGame&&null==H_c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),H_c.webAudioEnabled=!!(H_c.window.AudioContext||H_c.window.webkitAudioContext||H_c.window.mozAudioContext),H_c.soundType=H_c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",H_ea=H_c.webAudioEnabled?H_fa:H_ca,H_c.webAudioEnabled&&H_fa.initWebAudio(),H_ca._initMusicAudio(),H_c.enableTouch="ontouchstart"in H_g||H_g.DocumentTouch&&H_b instanceof DocumentTouch,H_g.focus(),H_E._soundClass=H_ea,H_E._musicClass=H_ca,H_J._mainCanvas=H_J._mainCanvas||H_va.create("2D"),H_c.canvas||(H_c.canvas=H_va.create("2D"),H_c.context=H_c.canvas.getContext("2d"))}},H_c._onMessage=function(H_a){if(H_a.data&&"size"==H_a.data.name){if(H_c.window.innerWidth=H_a.data.width,H_c.window.innerHeight=H_a.data.height,H_c.window.__innerHeight=H_a.data.clientHeight,!H_c.document.createEvent)return void console.warn("no document.createEvent");var H_b=H_c.document.createEvent("HTMLEvents");return H_b.initEvent("resize",!1,!1),void H_c.window.dispatchEvent(H_b)}},H_c.createElement=function(H_a){return H_c.__init__(),H_c.document.__createElement(H_a)},H_c.getElementById=function(H_a){return H_c.__init__(),H_c.document.getElementById(H_a)},H_c.removeElement=function(H_a){H_a&&H_a.parentNode&&H_a.parentNode.removeChild(H_a)},H_c.now=function(){return H_F.now()},H_c._window=null,H_c._document=null,H_c._container=null,H_c.userAgent=null,H_c.u=null,H_c.onIOS=!1,H_c.onMac=!1,H_c.onMobile=!1,H_c.onIPhone=!1,H_c.onIPad=!1,H_c.onAndroid=!1,H_c.onWP=!1,H_c.onQQBrowser=!1,H_c.onMQQBrowser=!1,H_c.onSafari=!1,H_c.onFirefox=!1,H_c.onEdge=!1,H_c.onIE=!1,H_c.onWeiXin=!1,H_c.onMiniGame=!1,H_c.onLimixiu=!1,H_c.onPC=!1,H_c.httpProtocol=!1,H_c.webAudioEnabled=!1,H_c.soundType=null,H_c.enableTouch=!1,H_c.canvas=null,H_c.context=null,H_c.__init$=function(){},H_c}()),H_P=function(){function H_b(H_a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,H_a?(this._u8d_=new Uint8Array(H_a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}H_k(H_b,"laya.utils.Byte");var H_a=H_b.prototype;return H_a.___resizeBuffer=function(H_b){try{var H_a=new Uint8Array(H_b);null!=this._u8d_&&(this._u8d_.length<=H_b?H_a.set(this._u8d_):H_a.set(this._u8d_.subarray(0,H_b))),this._u8d_=H_a,this._d_=new DataView(H_a.buffer)}catch(H_a){throw"___resizeBuffer err:"+H_b}},H_a.getString=function(){return this.rUTF(this.getUint16())},H_a.getFloat32Array=function(H_a,H_b){var H_c=H_a+H_b;H_c=H_c>this._length?this._length:H_c;var H_d=new Float32Array(this._d_.buffer.slice(H_a,H_c));return this._pos_=H_c,H_d},H_a.getUint8Array=function(H_a,H_b){var H_c=H_a+H_b;H_c=H_c>this._length?this._length:H_c;var H_d=new Uint8Array(this._d_.buffer.slice(H_a,H_c));return this._pos_=H_c,H_d},H_a.getInt16Array=function(H_a,H_b){var H_c=H_a+H_b;H_c=H_c>this._length?this._length:H_c;var H_d=new Int16Array(this._d_.buffer.slice(H_a,H_c));return this._pos_=H_c,H_d},H_a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var H_a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,H_a},H_a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var H_a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,H_a},H_a.writeFloat32=function(H_a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,H_a,this._xd_),this._pos_+=4},H_a.writeFloat64=function(H_a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,H_a,this._xd_),this._pos_+=8},H_a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var H_a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,H_a},H_a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var H_a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,H_a},H_a.writeInt32=function(H_a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,H_a,this._xd_),this._pos_+=4},H_a.writeUint32=function(H_a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,H_a,this._xd_),this._pos_+=4},H_a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var H_a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,H_a},H_a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var H_a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,H_a},H_a.writeUint16=function(H_a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,H_a,this._xd_),this._pos_+=2},H_a.writeInt16=function(H_a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,H_a,this._xd_),this._pos_+=2},H_a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},H_a.writeUint8=function(H_a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,H_a),this._pos_++},H_a._getUInt8=function(H_a){return this._d_.getUint8(H_a)},H_a._getUint16=function(H_a){return this._d_.getUint16(H_a,this._xd_)},H_a._getMatrix=function(){return new H_G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},H_a.rUTF=function(H_a){for(var H_b=[],H_c=this._pos_+H_a,H_d=0,H_e=0,H_f=0,H_g=String.fromCharCode,H_h=this._u8d_;this._pos_<H_c;)(H_d=H_h[this._pos_++])<128?0!=H_d&&H_b.push(H_g(H_d)):H_d<224?H_b.push(H_g((63&H_d)<<6|127&H_h[this._pos_++])):H_d<240?(H_e=H_h[this._pos_++],H_b.push(H_g((31&H_d)<<12|(127&H_e)<<6|127&H_h[this._pos_++]))):(H_e=H_h[this._pos_++],H_f=H_h[this._pos_++],H_b.push(H_g((15&H_d)<<18|(127&H_e)<<12|H_f<<6&127|127&H_h[this._pos_++]))),0;return H_b.join("")},H_a.getCustomString=function(H_a){for(var H_b=[],H_c=0,H_d=0,H_e=0,H_f=String.fromCharCode,H_g=this._u8d_;0<H_a;)if((H_d=H_g[this._pos_])<128)H_b.push(H_f(H_d)),this._pos_++,H_a--;else for(H_c=H_d-128,this._pos_++,H_a-=H_c;0<H_c;)H_d=H_g[this._pos_++],H_e=H_g[this._pos_++],H_b.push(H_f(H_e<<8|H_d)),H_c--;return H_b.join("")},H_a.clear=function(){this._pos_=0,this.length=0},H_a.__getBuffer=function(){return this._d_.buffer},H_a.writeUTFBytes=function(H_a){for(var H_b=0,H_c=(H_a+="").length;H_b<H_c;H_b++){var H_d=H_a.charCodeAt(H_b);H_d<=127?this.writeByte(H_d):H_d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|H_d>>6,128|63&H_d],this._pos_),this._pos_+=2):H_d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|H_d>>12,128|H_d>>6&63,128|63&H_d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|H_d>>18,128|H_d>>12&63,128|H_d>>6&63,128|63&H_d],this._pos_),this._pos_+=4)}},H_a.writeUTFString=function(H_a){var H_b=this.pos;this.writeUint16(1),this.writeUTFBytes(H_a);var H_c=this.pos-H_b-2;if(65536<=H_c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(H_b,H_c,this._xd_)},H_a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},H_a.getUTFString=function(){return this.readUTFString()},H_a.readUTFBytes=function(H_a){if(void 0===H_a&&(H_a=-1),0==H_a)return"";var H_b=this.bytesAvailable;if(H_b<H_a)throw"readUTFBytes error - Out of bounds";return H_a=0<H_a?H_a:H_b,this.rUTF(H_a)},H_a.getUTFBytes=function(H_a){return void 0===H_a&&(H_a=-1),this.readUTFBytes(H_a)},H_a.writeByte=function(H_a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,H_a),this._pos_+=1},H_a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},H_a.getByte=function(){return this.readByte()},H_a.ensureWrite=function(H_a){this._length<H_a&&(this._length=H_a),this._allocated_<H_a&&(this.length=H_a)},H_a.writeArrayBuffer=function(H_a,H_b,H_c){if(void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),H_b<0||H_c<0)throw"writeArrayBuffer error - Out of bounds";0==H_c&&(H_c=H_a.byteLength-H_b),this.ensureWrite(this._pos_+H_c);var H_d=new Uint8Array(H_a);this._u8d_.set(H_d.subarray(H_b,H_b+H_c),this._pos_),this._pos_+=H_c},H_q(0,H_a,"buffer",function(){var H_a=this._d_.buffer;return H_a.byteLength==this.length?H_a:H_a.slice(0,this.length)}),H_q(0,H_a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(H_a){this._xd_="littleEndian"==H_a}),H_q(0,H_a,"length",function(){return this._length},function(H_a){this._allocated_<H_a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(H_a,2*this._allocated_))):this._allocated_>H_a&&this.___resizeBuffer(this._allocated_=H_a),this._length=H_a}),H_q(0,H_a,"pos",function(){return this._pos_},function(H_a){this._pos_=H_a}),H_q(0,H_a,"bytesAvailable",function(){return this._length-this._pos_}),H_b.getSystemEndian=function(){if(!H_b._sysEndian){var H_a=new ArrayBuffer(2);new DataView(H_a).setInt16(0,256,!0),H_b._sysEndian=256===new Int16Array(H_a)[0]?"littleEndian":"bigEndian"}return H_b._sysEndian},H_b.BIG_ENDIAN="bigEndian",H_b.LITTLE_ENDIAN="littleEndian",H_b._sysEndian=null,H_b}(),H_Q=function(){function H_e(){}return H_k(H_e,"laya.utils.CacheManager"),H_e.regCacheByFunction=function(H_a,H_b){var H_c;H_e.unRegCacheByFunction(H_a,H_b),H_c={tryDispose:H_a,getCacheList:H_b},H_e._cacheList.push(H_c)},H_e.unRegCacheByFunction=function(H_a,H_b){var H_c,H_d=0;for(H_c=H_e._cacheList.length,H_d=0;H_d<H_c;H_d++)if(H_e._cacheList[H_d].tryDispose==H_a&&H_e._cacheList[H_d].getCacheList==H_b)return void H_e._cacheList.splice(H_d,1)},H_e.forceDispose=function(){var H_a=0,H_b=H_e._cacheList.length;for(H_a=0;H_a<H_b;H_a++)H_e._cacheList[H_a].tryDispose(!0)},H_e.beginCheck=function(H_a){void 0===H_a&&(H_a=15e3),H_z.timer.loop(H_a,null,H_e._checkLoop)},H_e.stopCheck=function(){H_z.timer.clear(null,H_e._checkLoop)},H_e._checkLoop=function(){var H_a=H_e._cacheList;if(!(H_a.length<1)){var H_b,H_c=H_O.now(),H_d=0;for(H_b=H_d=H_a.length;0<H_d&&(H_a[H_e._index=++H_e._index%H_b].tryDispose(!1),!(H_O.now()-H_c>H_e.loopTimeLimit));)H_d--}},H_e.loopTimeLimit=2,H_e._cacheList=[],H_e._index=0,H_e}(),H_R=function(){function H_n(){}return H_k(H_n,"laya.utils.ClassUtils"),H_n.regClass=function(H_a,H_b){H_n._classMap[H_a]=H_b},H_n.getRegClass=function(H_a){return H_n._classMap[H_a]},H_n.getInstance=function(H_a){var H_b=H_n.getClass(H_a);return H_b?new H_b:(console.warn("[error] Undefined class:",H_a),null)},H_n.createByJson=function(H_a,H_b,H_c,H_d,H_e){"string"==typeof H_a&&(H_a=JSON.parse(H_a));var H_f=H_a.props;if(!H_b&&!(H_b=H_e?H_e.runWith(H_a):H_n.getInstance(H_f.runtime||H_a.type)))return null;var H_g=H_a.child;if(H_g)for(var H_h=0,H_i=H_g.length;H_h<H_i;H_h++){var H_j=H_g[H_h];if("render"!==H_j.props.name&&"render"!==H_j.props.renderType||!H_b._$set_itemRender)if("Graphic"==H_j.type)H_n.addGraphicsToSprite(H_j,H_b);else if(H_n.isDrawType(H_j.type))H_n.addGraphicToSprite(H_j,H_b,!0);else{var H_k=H_n.createByJson(H_j,null,H_c,H_d,H_e);"Script"==H_j.type?H_k.hasOwnProperty("owner")?H_k.owner=H_b:H_k.hasOwnProperty("target")&&(H_k.target=H_b):"mask"==H_j.props.renderType?H_b.mask=H_k:H_b.addChild(H_k)}else H_b.itemRender=H_j}if(H_f)for(var H_l in H_f){var H_m=H_f[H_l];"var"===H_l&&H_c?H_c[H_m]=H_b:H_m instanceof Array&&"function"==typeof H_b[H_l]?H_b[H_l].apply(H_b,H_m):H_b[H_l]=H_m}return H_d&&H_a.customProps&&H_d.runWith([H_b,H_a]),H_b.created&&H_b.created(),H_b},H_n.addGraphicsToSprite=function(H_a,H_b){var H_c;if((H_c=H_a.child)&&!(H_c.length<1)){var H_d;H_d=H_n._getGraphicsFromSprite(H_a,H_b);var H_e=0,H_f=0;H_a.props&&(H_e=H_n._getObjVar(H_a.props,"x",0),H_f=H_n._getObjVar(H_a.props,"y",0)),0!=H_e&&0!=H_f&&H_d.translate(H_e,H_f);var H_g,H_h=0;for(H_g=H_c.length,H_h=0;H_h<H_g;H_h++)H_n._addGraphicToGraphics(H_c[H_h],H_d);0!=H_e&&0!=H_f&&H_d.translate(-H_e,-H_f)}},H_n.addGraphicToSprite=function(H_a,H_b,H_c){var H_d;void 0===H_c&&(H_c=!1),H_d=H_c?H_n._getGraphicsFromSprite(H_a,H_b):H_b.graphics,H_n._addGraphicToGraphics(H_a,H_d)},H_n._getGraphicsFromSprite=function(H_a,H_b){var H_c,H_d;if(!H_a||!H_a.props)return H_b.graphics;switch(H_d=H_a.props.renderType){case"hit":case"unHit":var H_e;H_b.hitArea||(H_b.hitArea=new H_V),(H_e=H_b.hitArea)[H_d]||(H_e[H_d]=new H_m),H_c=H_e[H_d]}return H_c||(H_c=H_b.graphics),H_c},H_n._getTransformData=function(H_a){var H_b;(H_a.hasOwnProperty("pivotX")||H_a.hasOwnProperty("pivotY"))&&(H_b=H_b||new H_G).translate(-H_n._getObjVar(H_a,"pivotX",0),-H_n._getObjVar(H_a,"pivotY",0));var H_c=H_n._getObjVar(H_a,"scaleX",1),H_d=H_n._getObjVar(H_a,"scaleY",1),H_e=H_n._getObjVar(H_a,"rotation",0);H_n._getObjVar(H_a,"skewX",0),H_n._getObjVar(H_a,"skewY",0);return 1==H_c&&1==H_d&&0==H_e||((H_b=H_b||new H_G).scale(H_c,H_d),H_b.rotate(.0174532922222222*H_e)),H_b},H_n._addGraphicToGraphics=function(H_a,H_b){var H_c,H_d;if((H_c=H_a.props)&&(H_d=H_n.DrawTypeDic[H_a.type])){var H_e,H_f;H_e=H_b;var H_g=H_n._getParams(H_c,H_d[1],H_d[2],H_d[3]);((H_f=H_n._tM)||1!=H_n._alpha)&&(H_e.save(),H_f&&H_e.transform(H_f),1!=H_n._alpha&&H_e.alpha(H_n._alpha)),H_e[H_d[0]].apply(H_e,H_g),(H_f||1!=H_n._alpha)&&H_e.restore()}},H_n._adptLineData=function(H_a){return H_a[2]=parseFloat(H_a[0])+parseFloat(H_a[2]),H_a[3]=parseFloat(H_a[1])+parseFloat(H_a[3]),H_a},H_n._adptTextureData=function(H_a){return H_a[0]=H_ha.getRes(H_a[0]),H_a},H_n._adptLinesData=function(H_a){return H_a[2]=H_n._getPointListByStr(H_a[2]),H_a},H_n.isDrawType=function(H_a){return"Image"!=H_a&&H_n.DrawTypeDic.hasOwnProperty(H_a)},H_n._getParams=function(H_a,H_b,H_c,H_d){var H_e;void 0===H_c&&(H_c=0),(H_e=H_n._temParam).length=H_b.length;var H_f,H_g,H_h=0;for(H_f=H_b.length,H_h=0;H_h<H_f;H_h++)H_e[H_h]=H_n._getObjVar(H_a,H_b[H_h][0],H_b[H_h][1]);return H_n._alpha=H_n._getObjVar(H_a,"alpha",1),H_g=H_n._getTransformData(H_a),H_n._tM=H_g?(H_c||(H_c=0),H_g.translate(H_e[H_c],H_e[H_c+1]),H_e[H_c]=H_e[H_c+1]=0,H_g):null,H_d&&H_n[H_d]&&(H_e=H_n[H_d](H_e)),H_e},H_n._getPointListByStr=function(H_a){var H_b,H_c,H_d=0;for(H_c=(H_b=H_a.split(",")).length,H_d=0;H_d<H_c;H_d++)H_b[H_d]=parseFloat(H_b[H_d]);return H_b},H_n._getObjVar=function(H_a,H_b,H_c){return H_a.hasOwnProperty(H_b)?H_a[H_b]:H_c},H_n._temParam=[],H_n._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},H_n.getClass=function(H_a){var H_b=H_n._classMap[H_a]||H_a;return"string"==typeof H_b?H_z.__classmap[H_b]:H_b},H_n._tM=null,H_n._alpha=NaN,H_i(H_n,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),H_n}(),H_S=function(){function H_f(H_a){if(this._color=[],"string"==typeof H_a){null===(this.strColor=H_a)&&(H_a="#000000"),"#"==H_a.charAt(0)&&(H_a=H_a.substr(1));var H_b=H_a.length;if(3==H_b||4==H_b){for(var H_c="",H_d=0;H_d<H_b;H_d++)H_c+=H_a[H_d]+H_a[H_d];H_a=H_c}var H_e=this.numColor=parseInt(H_a,16);if(8==H_a.length)return void(this._color=[parseInt(H_a.substr(0,2),16)/255,((16711680&H_e)>>16)/255,((65280&H_e)>>8)/255,(255&H_e)/255])}else H_e=this.numColor=H_a,this.strColor=H_$.toHexColor(H_e);this._color=[((16711680&H_e)>>16)/255,((65280&H_e)>>8)/255,(255&H_e)/255,1],this._color.__id=++H_f._COLODID}return H_k(H_f,"laya.utils.Color"),H_f._initDefault=function(){for(var H_a in H_f._DEFAULT={},H_f._COLOR_MAP)H_f._SAVE[H_a]=H_f._DEFAULT[H_a]=new H_f(H_f._COLOR_MAP[H_a]);return H_f._DEFAULT},H_f._initSaveMap=function(){for(var H_a in H_f._SAVE_SIZE=0,H_f._SAVE={},H_f._DEFAULT)H_f._SAVE[H_a]=H_f._DEFAULT[H_a]},H_f.create=function(H_a){var H_b=H_f._SAVE[H_a+""];return null!=H_b?H_b:(H_f._SAVE_SIZE<1e3||H_f._initSaveMap(),H_f._SAVE[H_a+""]=new H_f(H_a))},H_f._SAVE={},H_f._SAVE_SIZE=0,H_f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},H_f._DEFAULT=H_f._initDefault(),H_f._COLODID=1,H_f}(),H_T=(function(){function H_a(){this._values=[],this._keys=[]}H_k(H_a,"laya.utils.Dictionary");var H_b=H_a.prototype;H_b.set=function(H_a,H_b){var H_c=this.indexOf(H_a);0<=H_c?this._values[H_c]=H_b:(this._keys.push(H_a),this._values.push(H_b))},H_b.indexOf=function(H_a){var H_b=this._keys.indexOf(H_a);return 0<=H_b?H_b:(H_a="string"==typeof H_a?Number(H_a):"number"==typeof H_a?H_a.toString():H_a,this._keys.indexOf(H_a))},H_b.get=function(H_a){var H_b=this.indexOf(H_a);return H_b<0?null:this._values[H_b]},H_b.remove=function(H_a){var H_b=this.indexOf(H_a);return 0<=H_b&&(this._keys.splice(H_b,1),this._values.splice(H_b,1),!0)},H_b.clear=function(){this._values.length=0,this._keys.length=0},H_q(0,H_b,"values",function(){return this._values}),H_q(0,H_b,"keys",function(){return this._keys})}(),function(){function H_a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}H_k(H_a,"laya.utils.Dragging");var H_b=H_a.prototype;return H_b.start=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){void 0===H_h&&(H_h=.92),this.clearTimer(),this.target=H_a,this.area=H_b,this.hasInertia=H_c,this.elasticDistance=H_b?H_d:0,this.elasticBackTime=H_e,this.data=H_f,this._disableMouseEvent=H_g,this.ratio=H_h,1!=H_a.globalScaleX||1!=H_a.globalScaleY?this._parent=H_a.parent:this._parent=H_z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,H_z.stage.on("mouseup",this,this.onStageMouseUp),H_z.stage.on("mouseout",this,this.onStageMouseUp),H_z.timer.frameLoop(1,this,this.loop)},H_b.clearTimer=function(){H_z.timer.clear(this,this.loop),H_z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},H_b.stop=function(){this._dragging&&(H_r.instance.disableMouseEvent=!1,H_z.stage.off("mouseup",this,this.onStageMouseUp),H_z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},H_b.loop=function(){var H_a=this._parent.getMousePoint(),H_b=H_a.x,H_c=H_a.y,H_d=H_b-this._lastX,H_e=H_c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(H_d*H_z.stage._canvasTransform.getScaleX())||1<Math.abs(H_e*H_z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),H_r.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(H_d,H_e);0==H_d&&0==H_e||(this._lastX=H_b,this._lastY=H_c,this.target.x+=H_d*this._elasticRateX,this.target.y+=H_e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},H_b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var H_a=this.area.x-this.target.x;else H_a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-H_a/this.elasticDistance),this.target.y<this.area.y)var H_b=this.area.y-this.target.y;else H_b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-H_b/this.elasticDistance)}},H_b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},H_b.onStageMouseUp=function(H_a){if(H_r.instance.disableMouseEvent=!1,H_z.stage.off("mouseup",this,this.onStageMouseUp),H_z.stage.off("mouseout",this,this.onStageMouseUp),H_z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var H_b=this._offsets.length,H_c=Math.min(H_b,6),H_d=this._offsets.length-H_c,H_e=H_b-1;H_d<H_e;H_e--)this._offsetY+=this._offsets[H_e--],this._offsetX+=this._offsets[H_e];this._offsetX=this._offsetX/H_c*2,this._offsetY=this._offsetY/H_c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),H_z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},H_b.checkElastic=function(){var H_a=NaN,H_b=NaN;if(this.target.x<this.area.x?H_a=this.area.x:this.target.x>this.area.x+this.area.width&&(H_a=this.area.x+this.area.width),this.target.y<this.area.y?H_b=this.area.y:this.target.y>this.area.y+this.area.height&&(H_b=this.area.y+this.area.height),isNaN(H_a)&&isNaN(H_b))this.clear();else{var H_c={};isNaN(H_a)||(H_c.x=H_a),isNaN(H_b)||(H_c.y=H_b),this._tween=H_Z.to(this.target,H_c,this.elasticBackTime,H_U.sineOut,H_u.create(this,this.clear),0,!1,!1)}},H_b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(H_z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},H_b.clear=function(){if(this.target){this.clearTimer();var H_a=this.target;this.target=null,this._parent=null,H_a.event("dragend",this.data)}},H_a}()),H_U=function(){function H_h(){}return H_k(H_h,"laya.utils.Ease"),H_h.linearNone=function(H_a,H_b,H_c,H_d){return H_c*H_a/H_d+H_b},H_h.linearIn=function(H_a,H_b,H_c,H_d){return H_c*H_a/H_d+H_b},H_h.linearInOut=function(H_a,H_b,H_c,H_d){return H_c*H_a/H_d+H_b},H_h.linearOut=function(H_a,H_b,H_c,H_d){return H_c*H_a/H_d+H_b},H_h.bounceIn=function(H_a,H_b,H_c,H_d){return H_c-H_h.bounceOut(H_d-H_a,0,H_c,H_d)+H_b},H_h.bounceInOut=function(H_a,H_b,H_c,H_d){return H_a<.5*H_d?.5*H_h.bounceIn(2*H_a,0,H_c,H_d)+H_b:.5*H_h.bounceOut(2*H_a-H_d,0,H_c,H_d)+.5*H_c+H_b},H_h.bounceOut=function(H_a,H_b,H_c,H_d){return(H_a/=H_d)<1/2.75?H_c*(7.5625*H_a*H_a)+H_b:H_a<2/2.75?H_c*(7.5625*(H_a-=1.5/2.75)*H_a+.75)+H_b:H_a<2.5/2.75?H_c*(7.5625*(H_a-=2.25/2.75)*H_a+.9375)+H_b:H_c*(7.5625*(H_a-=2.625/2.75)*H_a+.984375)+H_b},H_h.backIn=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=1.70158),H_c*(H_a/=H_d)*H_a*((H_e+1)*H_a-H_e)+H_b},H_h.backInOut=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=1.70158),(H_a/=.5*H_d)<1?.5*H_c*(H_a*H_a*((1+(H_e*=1.525))*H_a-H_e))+H_b:H_c/2*((H_a-=2)*H_a*((1+(H_e*=1.525))*H_a+H_e)+2)+H_b},H_h.backOut=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=1.70158),H_c*((H_a=H_a/H_d-1)*H_a*((H_e+1)*H_a+H_e)+1)+H_b},H_h.elasticIn=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g;return void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=0),0==H_a?H_b:1==(H_a/=H_d)?H_b+H_c:(H_f||(H_f=.3*H_d),H_g=!H_e||0<H_c&&H_e<H_c||H_c<0&&H_e<-H_c?(H_e=H_c,H_f/4):H_f/H_h.PI2*Math.asin(H_c/H_e),-H_e*Math.pow(2,10*(H_a-=1))*Math.sin((H_a*H_d-H_g)*H_h.PI2/H_f)+H_b)},H_h.elasticInOut=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g;return void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=0),0==H_a?H_b:2==(H_a/=.5*H_d)?H_b+H_c:(H_f||(H_f=H_d*(.3*1.5)),H_g=!H_e||0<H_c&&H_e<H_c||H_c<0&&H_e<-H_c?(H_e=H_c,H_f/4):H_f/H_h.PI2*Math.asin(H_c/H_e),H_a<1?H_e*Math.pow(2,10*(H_a-=1))*Math.sin((H_a*H_d-H_g)*H_h.PI2/H_f)*-.5+H_b:H_e*Math.pow(2,-10*(H_a-=1))*Math.sin((H_a*H_d-H_g)*H_h.PI2/H_f)*.5+H_c+H_b)},H_h.elasticOut=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g;return void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=0),0==H_a?H_b:1==(H_a/=H_d)?H_b+H_c:(H_f||(H_f=.3*H_d),H_g=!H_e||0<H_c&&H_e<H_c||H_c<0&&H_e<-H_c?(H_e=H_c,H_f/4):H_f/H_h.PI2*Math.asin(H_c/H_e),H_e*Math.pow(2,-10*H_a)*Math.sin((H_a*H_d-H_g)*H_h.PI2/H_f)+H_c+H_b)},H_h.strongIn=function(H_a,H_b,H_c,H_d){return H_c*(H_a/=H_d)*H_a*H_a*H_a*H_a+H_b},H_h.strongInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*H_c*H_a*H_a*H_a*H_a*H_a+H_b:.5*H_c*((H_a-=2)*H_a*H_a*H_a*H_a+2)+H_b},H_h.strongOut=function(H_a,H_b,H_c,H_d){return H_c*((H_a=H_a/H_d-1)*H_a*H_a*H_a*H_a+1)+H_b},H_h.sineInOut=function(H_a,H_b,H_c,H_d){return.5*-H_c*(Math.cos(Math.PI*H_a/H_d)-1)+H_b},H_h.sineIn=function(H_a,H_b,H_c,H_d){return-H_c*Math.cos(H_a/H_d*H_h.HALF_PI)+H_c+H_b},H_h.sineOut=function(H_a,H_b,H_c,H_d){return H_c*Math.sin(H_a/H_d*H_h.HALF_PI)+H_b},H_h.quintIn=function(H_a,H_b,H_c,H_d){return H_c*(H_a/=H_d)*H_a*H_a*H_a*H_a+H_b},H_h.quintInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*H_c*H_a*H_a*H_a*H_a*H_a+H_b:.5*H_c*((H_a-=2)*H_a*H_a*H_a*H_a+2)+H_b},H_h.quintOut=function(H_a,H_b,H_c,H_d){return H_c*((H_a=H_a/H_d-1)*H_a*H_a*H_a*H_a+1)+H_b},H_h.quartIn=function(H_a,H_b,H_c,H_d){return H_c*(H_a/=H_d)*H_a*H_a*H_a+H_b},H_h.quartInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*H_c*H_a*H_a*H_a*H_a+H_b:.5*-H_c*((H_a-=2)*H_a*H_a*H_a-2)+H_b},H_h.quartOut=function(H_a,H_b,H_c,H_d){return-H_c*((H_a=H_a/H_d-1)*H_a*H_a*H_a-1)+H_b},H_h.cubicIn=function(H_a,H_b,H_c,H_d){return H_c*(H_a/=H_d)*H_a*H_a+H_b},H_h.cubicInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*H_c*H_a*H_a*H_a+H_b:.5*H_c*((H_a-=2)*H_a*H_a+2)+H_b},H_h.cubicOut=function(H_a,H_b,H_c,H_d){return H_c*((H_a=H_a/H_d-1)*H_a*H_a+1)+H_b},H_h.quadIn=function(H_a,H_b,H_c,H_d){return H_c*(H_a/=H_d)*H_a+H_b},H_h.quadInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*H_c*H_a*H_a+H_b:.5*-H_c*(--H_a*(H_a-2)-1)+H_b},H_h.quadOut=function(H_a,H_b,H_c,H_d){return-H_c*(H_a/=H_d)*(H_a-2)+H_b},H_h.expoIn=function(H_a,H_b,H_c,H_d){return 0==H_a?H_b:H_c*Math.pow(2,10*(H_a/H_d-1))+H_b-.001*H_c},H_h.expoInOut=function(H_a,H_b,H_c,H_d){return 0==H_a?H_b:H_a==H_d?H_b+H_c:(H_a/=.5*H_d)<1?.5*H_c*Math.pow(2,10*(H_a-1))+H_b:.5*H_c*(2-Math.pow(2,-10*--H_a))+H_b},H_h.expoOut=function(H_a,H_b,H_c,H_d){return H_a==H_d?H_b+H_c:H_c*(1-Math.pow(2,-10*H_a/H_d))+H_b},H_h.circIn=function(H_a,H_b,H_c,H_d){return-H_c*(Math.sqrt(1-(H_a/=H_d)*H_a)-1)+H_b},H_h.circInOut=function(H_a,H_b,H_c,H_d){return(H_a/=.5*H_d)<1?.5*-H_c*(Math.sqrt(1-H_a*H_a)-1)+H_b:.5*H_c*(Math.sqrt(1-(H_a-=2)*H_a)+1)+H_b},H_h.circOut=function(H_a,H_b,H_c,H_d){return H_c*Math.sqrt(1-(H_a=H_a/H_d-1)*H_a)+H_b},H_h.HALF_PI=.5*Math.PI,H_h.PI2=2*Math.PI,H_h}(),H_V=function(){function H_l(){this._hit=null,this._unHit=null}H_k(H_l,"laya.utils.HitArea");var H_a=H_l.prototype;return H_a.isHit=function(H_a,H_b){return!!H_l.isHitGraphic(H_a,H_b,this.hit)&&!H_l.isHitGraphic(H_a,H_b,this.unHit)},H_a.contains=function(H_a,H_b){return this.isHit(H_a,H_b)},H_q(0,H_a,"hit",function(){return this._hit||(this._hit=new H_m),this._hit},function(H_a){this._hit=H_a}),H_q(0,H_a,"unHit",function(){return this._unHit||(this._unHit=new H_m),this._unHit},function(H_a){this._unHit=H_a}),H_l.isHitGraphic=function(H_a,H_b,H_c){if(!H_c)return!1;var H_d;if(!(H_d=H_c.cmds)&&H_c._one&&((H_d=H_l._cmds).length=1,H_d[0]=H_c._one),!H_d)return!1;var H_e,H_f,H_g=0;for(H_e=H_d.length,H_g=0;H_g<H_e;H_g++)if(H_f=H_d[H_g]){var H_h=H_J._context;switch(H_f.callee){case H_h._translate:case 6:H_a-=H_f[0],H_b-=H_f[1]}if(H_l.isHitCmd(H_a,H_b,H_f))return!0}return!1},H_l.isHitCmd=function(H_a,H_b,H_c){if(!H_c)return!1;var H_d=H_J._context,H_e=!1;switch(H_c.callee){case H_d._drawRect:case 13:H_l._rec.setTo(H_c[0],H_c[1],H_c[2],H_c[3]),H_e=H_l._rec.contains(H_a,H_b);break;case H_d._drawCircle:case H_d._fillCircle:case 14:H_e=(H_a-=H_c[0])*H_a+(H_b-=H_c[1])*H_b<H_c[2]*H_c[2];break;case H_d._drawPoly:case 18:H_a-=H_c[0],H_b-=H_c[1],H_e=H_l.ptInPolygon(H_a,H_b,H_c[2])}return H_e},H_l.ptInPolygon=function(H_a,H_b,H_c){var H_d;(H_d=H_l._ptPoint).setTo(H_a,H_b);var H_e,H_f=0,H_g=NaN,H_h=NaN,H_i=NaN,H_j=NaN;H_e=H_c.length;for(var H_k=0;H_k<H_e;H_k+=2){if(H_g=H_c[H_k],H_h=H_c[H_k+1],H_i=H_c[(H_k+2)%H_e],H_h!=(H_j=H_c[(H_k+3)%H_e]))if(!(H_d.y<Math.min(H_h,H_j)))if(!(H_d.y>=Math.max(H_h,H_j)))(H_d.y-H_h)*(H_i-H_g)/(H_j-H_h)+H_g>H_d.x&&H_f++}return H_f%2==1},H_l._cmds=[],H_i(H_l,["_rec",function(){return this._rec=new H_B},"_ptPoint",function(){return this._ptPoint=new H_A}]),H_l}(),H_W=(function(){function H_e(H_a,H_b,H_c,H_d){this.char=H_a,this.charNum=H_a.charCodeAt(0),this._x=this._y=0,this.width=H_b,this.height=H_c,this.style=H_d,this.isWord=!H_e._isWordRegExp.test(H_a)}H_k(H_e,"laya.utils.HTMLChar");var H_a=H_e.prototype;H_z.imps(H_a,{"laya.display.ILayout":!0}),H_a.setSprite=function(H_a){this._sprite=H_a},H_a.getSprite=function(){return this._sprite},H_a._isChar=function(){return!0},H_a._getCSSStyle=function(){return this.style},H_q(0,H_a,"width",function(){return this._w},function(H_a){this._w=H_a}),H_q(0,H_a,"x",function(){return this._x},function(H_a){this._sprite&&(this._sprite.x=H_a),this._x=H_a}),H_q(0,H_a,"y",function(){return this._y},function(H_a){this._sprite&&(this._sprite.y=H_a),this._y=H_a}),H_q(0,H_a,"height",function(){return this._h},function(H_a){this._h=H_a}),H_e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function H_b(){}H_k(H_b,"laya.utils.Log"),H_b.enable=function(){H_b._logdiv||(H_b._logdiv=H_O.window.document.createElement("div"),H_O.window.document.body.appendChild(H_b._logdiv),H_b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},H_b.toggle=function(){var H_a=H_b._logdiv.style;"1px"==H_a.width?H_a.width=H_a.height="50%":H_a.width=H_a.height="1px"},H_b.print=function(H_a){H_b._logdiv&&(H_b.maxCount<=H_b._count&&H_b.clear(),H_b._count++,H_b._logdiv.innerText+=H_a+"\n",H_b._logdiv.scrollTop=H_b._logdiv.scrollHeight)},H_b.clear=function(){H_b._logdiv.innerText="",H_b._count=0},H_b._logdiv=null,H_b._count=0,H_b.maxCount=20}(),function(){function H_b(){}H_k(H_b,"laya.utils.Mouse"),H_q(1,H_b,"cursor",function(){return H_b._style.cursor},function(H_a){H_b._style.cursor=H_a}),H_b.hide=function(){"none"!=H_b.cursor&&(H_b._preCursor=H_b.cursor,H_b.cursor="none")},H_b.show=function(){"none"==H_b.cursor&&(H_b.cursor=H_b._preCursor?H_b._preCursor:"auto")},H_b._preCursor=null,H_i(H_b,["_style",function(){return this._style=H_O.document.body.style}])}(),function(){function H_f(){}return H_k(H_f,"laya.utils.Pool"),H_f.getPoolBySign=function(H_a){return H_f._poolDic[H_a]||(H_f._poolDic[H_a]=[])},H_f.clearBySign=function(H_a){H_f._poolDic[H_a]&&(H_f._poolDic[H_a].length=0)},H_f.recover=function(H_a,H_b){H_b.__InPool||(H_b.__InPool=!0,H_f.getPoolBySign(H_a).push(H_b))},H_f.getItemByClass=function(H_a,H_b){var H_c=H_f.getPoolBySign(H_a),H_d=H_c.length?H_c.pop():new H_b;return H_d.__InPool=!1,H_d},H_f.getItemByCreateFun=function(H_a,H_b,H_c){var H_d=H_f.getPoolBySign(H_a),H_e=H_d.length?H_d.pop():H_b.call(H_c);return H_e.__InPool=!1,H_e},H_f.getItem=function(H_a){var H_b=H_f.getPoolBySign(H_a),H_c=H_b.length?H_b.pop():null;return H_c&&(H_c.__InPool=!1),H_c},H_f._poolDic={},H_f.InPoolSign="__InPool",H_f}()),H_X=function(){function H_i(){}return H_k(H_i,"laya.utils.Stat"),H_q(1,H_i,"onclick",null,function(H_a){H_i._sp&&H_i._sp.on("click",H_i._sp,H_a),H_i._canvas&&(H_i._canvas.source.onclick=H_a,H_i._canvas.source.style.pointerEvents="")}),H_i.show=function(H_a,H_b,H_c){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),!H_J.isConchApp||H_J.isConchWebGL){if(H_J.isConchWebGL||H_O.onMiniGame||H_O.onLimixiu||(H_i._useCanvas=!0),H_i._show=!0,H_i._fpsData.length=60,H_i._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},H_i._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},H_i._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},H_i._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},H_J.isWebGL)if(H_i._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},H_J.is3DMode){if(H_i._view[0].title="FPS(3D)",H_i._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},H_i._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},H_i._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==H_c){var H_d=8;H_i._view[H_d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H_i._view[H_d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},H_i._view[H_d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==H_c){H_d=8;H_i._view[H_d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},H_i._view[H_d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else H_i._view[0].title="FPS(WebGL)",H_i._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else H_i._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};H_i._useCanvas?H_i.createUIPre(H_a,H_b):H_i.createUI(H_a,H_b),H_i.enable()}else H_O.window.conch.showFPS&&H_O.window.conch.showFPS(H_a,H_b)},H_i.createUIPre=function(H_a,H_b){var H_c=H_O.pixelRatio;H_i._width=170*H_c,H_i._vx=75*H_c,H_i._height=H_c*(12*H_i._view.length+3*H_c)+4,H_i._fontSize=12*H_c;for(var H_d=0;H_d<H_i._view.length;H_d++)H_i._view[H_d].x=4,H_i._view[H_d].y=H_d*H_i._fontSize+2*H_c;H_i._canvas||((H_i._canvas=new H_va("2D")).size(H_i._width,H_i._height),(H_i._ctx=H_i._canvas.getContext("2d")).textBaseline="top",H_i._ctx.font=H_i._fontSize+"px Sans-serif",H_i._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+H_a+"px;top:"+H_b+"px;width:"+H_i._width/H_c+"px;height:"+H_i._height/H_c+"px;"),H_i._first=!0,H_i.loop(),H_i._first=!1,H_O.container.appendChild(H_i._canvas.source)},H_i.createUI=function(H_a,H_b){var H_c=H_i._sp,H_d=H_O.pixelRatio;H_c||(H_c=new H_la,(H_i._leftText=new H_sa).pos(5,5),H_i._leftText.color="#ffffff",H_c.addChild(H_i._leftText),(H_i._txt=new H_sa).pos(80*H_d,5),H_i._txt.color="#ffffff",H_c.addChild(H_i._txt),H_i._sp=H_c),H_c.pos(H_a,H_b);for(var H_e="",H_f=0;H_f<H_i._view.length;H_f++){H_e+=H_i._view[H_f].title+"\n"}H_i._leftText.text=H_e;var H_g=170*H_d,H_h=H_d*(12*H_i._view.length+3*H_d)+4;H_i._txt.fontSize=H_i._fontSize*H_d,H_i._leftText.fontSize=H_i._fontSize*H_d,H_c.size(H_g,H_h),H_c.graphics.clear(),H_c.graphics.setAlpha(.5),H_c.graphics.drawRect(0,0,H_g,H_h,"#999999"),H_c.graphics.setAlpha(1),H_i.loop()},H_i.enable=function(){H_z.timer.frameLoop(1,H_i,H_i.loop)},H_i.hide=function(){H_i._show=!1,H_z.timer.clear(H_i,H_i.loop),H_i._canvas&&H_O.removeElement(H_i._canvas.source)},H_i.clear=function(){H_i.trianglesFaces=H_i.drawCall=H_i.shaderCall=H_i.spriteCount=H_i.spriteRenderUseCacheCount=H_i.treeNodeCollision=H_i.treeSpriteCollision=H_i.canvasNormal=H_i.canvasBitmap=H_i.canvasReCache=0},H_i.loop=function(){H_i._count++;var H_a=H_O.now();if(!(H_a-H_i._timer<1e3)){var H_b=H_i._count;if(H_i.FPS=Math.round(1e3*H_b/(H_a-H_i._timer)),H_i._show){H_i.trianglesFaces=Math.round(H_i.trianglesFaces/H_b),H_i.spriteCount=H_i._useCanvas?(H_i.drawCall=Math.round(H_i.drawCall/H_b)-2,H_i.shaderCall=Math.round(H_i.shaderCall/H_b),Math.round(H_i.spriteCount/H_b)-1):(H_i.drawCall=Math.round(H_i.drawCall/H_b)-2,H_i.shaderCall=Math.round(H_i.shaderCall/H_b)-4,Math.round(H_i.spriteCount/H_b)-4),H_i.spriteRenderUseCacheCount=Math.round(H_i.spriteRenderUseCacheCount/H_b),H_i.canvasNormal=Math.round(H_i.canvasNormal/H_b),H_i.canvasBitmap=Math.round(H_i.canvasBitmap/H_b),H_i.canvasReCache=Math.ceil(H_i.canvasReCache/H_b),H_i.treeNodeCollision=Math.round(H_i.treeNodeCollision/H_b),H_i.treeSpriteCollision=Math.round(H_i.treeSpriteCollision/H_b);var H_c=0<H_i.FPS?Math.floor(1e3/H_i.FPS).toString():" ";H_i._fpsStr=H_i.FPS+(H_i.renderSlow?" slow":"")+" "+H_c,H_i._spriteStr=H_i.spriteCount+(H_i.spriteRenderUseCacheCount?"/"+H_i.spriteRenderUseCacheCount:""),H_i._canvasStr=H_i.canvasReCache+"/"+H_i.canvasNormal+"/"+H_i.canvasBitmap,H_i.currentMemorySize=H_N.systemResourceManager.memorySize,H_i._useCanvas?H_i.renderInfoPre():H_i.renderInfo(),H_i.clear()}H_i._count=0,H_i._timer=H_a}},H_i.renderInfoPre=function(){if(H_i._canvas){var H_a=H_i._ctx;H_a.clearRect(H_i._first?0:H_i._vx,0,H_i._width,H_i._height);for(var H_b=H_J.WebGL.mainContext,H_c=0;H_c<H_i._view.length;H_c++){var H_d=H_i._view[H_c];H_i._first&&(H_a.fillStyle="white",H_a.fillText(H_d.title,H_d.x,H_d.y,null,null,null)),H_a.fillStyle=H_d.color;var H_e=-1;if((H_d=H_i._view[H_c]).varying){if(H_b)switch(H_d.varying){case 1:H_e=H_b.getParameter(H_b[H_d.value]);break;case 2:H_e=H_b.getExtension(H_d.value)}}else H_e=H_i[H_d.value];"M"==H_d.units&&(H_e=Math.floor(H_e/1048576*100)/100+" M"),"K"==H_d.units&&(H_e=Math.floor(H_e/1024*100)/100+" K"),"string"==H_d.units&&(H_e=H_e.match(/\d+\.?\d/i)),H_a.fillText(H_e+"",H_d.x+H_i._vx,H_d.y,null,null,null)}}},H_i.renderInfo=function(){for(var H_a="",H_b=H_J.WebGL.mainContext,H_c=0;H_c<H_i._view.length;H_c++){var H_d=H_i._view[H_c],H_e=-1;if(H_d.varying){if(H_b)switch(H_d.varying){case 1:H_e=H_b.getParameter(H_b[H_d.value]);break;case 2:H_e=H_b.getExtension(H_d.value)}}else H_e=H_i[H_d.value];"M"==H_d.units&&(H_e=Math.floor(H_e/1048576*100)/100+" M"),"K"==H_d.units&&(H_e=Math.floor(H_e/1024*100)/100+" K"),"string"==H_d.units&&(H_e=H_e.match(/\d+\.?\d/i)),H_a+=H_e+"\n"}H_i._txt.text=H_a},H_i.FPS=0,H_i.loopCount=0,H_i.shaderCall=0,H_i.drawCall=0,H_i.trianglesFaces=0,H_i.spriteCount=0,H_i.spriteRenderUseCacheCount=0,H_i.treeNodeCollision=0,H_i.treeSpriteCollision=0,H_i.canvasNormal=0,H_i.canvasBitmap=0,H_i.canvasReCache=0,H_i.renderSlow=!1,H_i.currentMemorySize=0,H_i._fpsStr=null,H_i._canvasStr=null,H_i._spriteStr=null,H_i._fpsData=[],H_i._timer=0,H_i._count=0,H_i._view=[],H_i._fontSize=12,H_i._txt=null,H_i._leftText=null,H_i._sp=null,H_i._show=!1,H_i._useCanvas=!1,H_i._canvas=null,H_i._ctx=null,H_i._first=!1,H_i._vx=NaN,H_i._width=0,H_i._height=100,H_i}(),H_Y=(function(){function H_a(){this._strsToID={},this._idToStrs=[],this._length=0}H_k(H_a,"laya.utils.StringKey");var H_b=H_a.prototype;H_b.add=function(H_a){var H_b=this._strsToID[H_a];return null!=H_b?H_b:(this._idToStrs[this._length]=H_a,this._strsToID[H_a]=this._length++)},H_b.getID=function(H_a){var H_b=this._strsToID[H_a];return null==H_b?-1:H_b},H_b.getName=function(H_a){var H_b=this._idToStrs[H_a];return null==H_b?void 0:H_b}}(),function(){var H_j;function H_a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}H_k(H_a,"laya.utils.Timer");var H_b=H_a.prototype;return H_b._init=function(){H_z.timer&&H_z.timer.frameLoop(1,this,this._update)},H_b._now=function(){return Date.now()},H_b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var H_a=this.currFrame=this.currFrame+this.scale,H_b=this._now();this._delta=(H_b-this._lastTimer)*this.scale;var H_c=this.currTimer=this.currTimer+this._delta;H_z.isDebug&&6e4<Math.abs(H_b-this._lastTimer)&&console.error("系统时间错误！"+(H_b-this._lastTimer)),this._lastTimer=H_b;var H_d=this._handlers;for(H_g=this._count=0,H_h=H_d.length;H_g<H_h;H_g++)if(null!==(H_i=H_d[H_g]).method){var H_e=H_i.userFrame?H_a:H_c;if(H_e>=H_i.exeTime)if(H_i.repeat)if(H_i.jumpFrame)for(;H_e>=H_i.exeTime;)H_i.exeTime+=H_i.delay,H_i.run(!1);else H_i.exeTime+=H_i.delay,H_i.run(!1),H_e>H_i.exeTime&&(H_i.exeTime+=Math.ceil((H_e-H_i.exeTime)/H_i.delay)*H_i.delay);else H_i.run(!0)}else this._count++;(30<this._count||H_a%200==0)&&this._clearHandlers();for(var H_f=this._laters,H_g=0,H_h=H_f.length-1;H_g<=H_h;H_g++){var H_i=H_f[H_g];this._isIgnoreRecover(H_i)||(null!==H_i.method&&(delete this._map[H_i.key],H_i.run(!1)),this._recoverHandler(H_i)),H_g===H_h&&(H_h=H_f.length-1)}H_f.length=0}},H_b._clearHandlers=function(){for(var H_a=this._handlers,H_b=0,H_c=H_a.length;H_b<H_c;H_b++){var H_d=H_a[H_b];null!==H_d.method?this._temp.push(H_d):this._isIgnoreRecover(H_d)?this._temp.push(H_d):this._recoverHandler(H_d)}this._handlers=this._temp,this._temp=H_a,this._temp.length=0},H_b._recoverHandler=function(H_a){this._map[H_a.key]==H_a&&delete this._map[H_a.key],H_a.recover()},H_b._create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){if(!H_c)return H_e.apply(H_d,H_f),null;if(H_g){var H_i=this._getHandler(H_d,H_e);if(H_i)return H_i.repeat=H_b,H_i.userFrame=H_a,H_i.delay=H_c,H_i.ignoreRecover=H_h,H_i.caller=H_d,H_i.method=H_e,H_i.args=H_f,H_i.exeTime=H_c+(H_a?this.currFrame:this.currTimer+this._now()-this._lastTimer),H_i}return(H_i=H_j.create()).repeat=H_b,H_i.userFrame=H_a,H_i.delay=H_c,H_i.ignoreRecover=H_h,H_i.caller=H_d,H_i.method=H_e,H_i.args=H_f,H_i.exeTime=H_c+(H_a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(H_i),this._handlers.push(H_i),H_i},H_b._indexHandler=function(H_a){var H_b=H_a.caller,H_c=H_a.method,H_d=H_b?H_b.$_GID||(H_b.$_GID=H_$.getGID()):0,H_e=H_c.$_TID||(H_c.$_TID=this._mid++);H_a.key=H_d+"_"+H_e,this._map[H_a.key]=H_a},H_b.once=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=!0),this._create(!1,!1,H_a,H_b,H_c,H_d,H_e,!1)},H_b.loop=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){void 0===H_e&&(H_e=!0),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!1);var H_h=this._create(!1,!0,H_a,H_b,H_c,H_d,H_e,H_g);H_h&&(H_h.jumpFrame=H_f)},H_b.frameOnce=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=!0),this._create(!0,!1,H_a,H_b,H_c,H_d,H_e,!1)},H_b.frameLoop=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_e&&(H_e=!0),void 0===H_f&&(H_f=!1),this._create(!0,!0,H_a,H_b,H_c,H_d,H_e,H_f)},H_b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+H_j._freeCount},H_b.clear=function(H_a,H_b){var H_c=this._getHandler(H_a,H_b);return!(!H_c||this._isIgnoreRecover(H_c))&&(delete this._map[H_c.key],H_c.key=null,H_c.clear(),!0)},H_b.clearAll=function(H_a){if(H_a)for(var H_b=0,H_c=this._handlers.length;H_b<H_c;H_b++){var H_d=this._handlers[H_b];H_d.caller===H_a&&(this._isIgnoreRecover(H_d)||(delete this._map[H_d.key],H_d.key=null,H_d.clear()))}},H_b._getHandler=function(H_a,H_b){var H_c=H_a?H_a.$_GID||(H_a.$_GID=H_$.getGID()):0,H_d=H_b.$_TID||(H_b.$_TID=this._mid++);return this._map[H_c+"_"+H_d]},H_b._isIgnoreRecover=function(H_a){if(H_a.ignoreRecover||H_a.caller&&"IgnoreRecover"==H_a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var H_b="";try{arguments.propertyIsEnumerable.caller}catch(H_a){H_b=H_a.stack}H_z.recordError("报错：核心定时器销毁忽略  "+H_b)}return!0}return!1},H_b.hasHandler=function(H_a,H_b){return this._map[H_a.$_GID+"_"+H_b.$_TID]},H_b.callLater=function(H_a,H_b,H_c){if(null==this._getHandler(H_a,H_b)){var H_d=H_j.create();H_d.caller=H_a,H_d.method=H_b,H_d.args=H_c,this._indexHandler(H_d),this._laters.push(H_d)}},H_b.runCallLater=function(H_a,H_b){var H_c=this._getHandler(H_a,H_b);H_c&&null!=H_c.method&&(this._isIgnoreRecover(H_c)||(delete this._map[H_c.key],H_c.run(!0)))},H_b.runTimer=function(H_a,H_b){this.runCallLater(H_a,H_b)},H_q(0,H_b,"delta",function(){return this._delta}),H_a.__init$=function(){H_j=function(){function H_b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}H_k(H_b,"");var H_a=H_b.prototype;return H_a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},H_a.recover=function(){this.clear(),this.args=H_b._freeHandler,H_b._freeHandler=this,H_b._freeCount++},H_a.run=function(H_a){var H_b=this.caller;if(H_b&&H_b.destroyed)return this.clear();var H_c=this.method,H_d=this.args;H_a&&this.clear(),null!=H_c&&(H_d?H_c.apply(H_b,H_d):H_c.call(H_b))},H_b._freeHandler=null,H_b._freeCount=0,H_b.create=function(){var H_a=H_b._freeHandler;return H_a?(H_b._freeHandler=H_a.args,--H_b._freeCount,H_a.args=null,H_a):new H_b},H_b}()},H_a}()),H_Z=function(){function H_l(){this.gid=0}H_k(H_l,"laya.utils.Tween");var H_a=H_l.prototype;return H_a.to=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){return void 0===H_f&&(H_f=0),void 0===H_g&&(H_g=!1),this._create(H_a,H_b,H_c,H_d,H_e,H_f,H_g,!0,!1,!0)},H_a.from=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){return void 0===H_f&&(H_f=0),void 0===H_g&&(H_g=!1),this._create(H_a,H_b,H_c,H_d,H_e,H_f,H_g,!1,!1,!0)},H_a._create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){if(!H_a)throw new Error("Tween:target is null");this._target=H_a,this._duration=H_c,this._ease=H_d||H_b.ease||H_l.easeNone,this._complete=H_e||H_b.complete,this._delay=H_f,this._props=[],this._usedTimer=0,this._startTimer=H_O.now(),this._usedPool=H_i,this._delayParam=null,this.update=H_b.update;var H_k=H_a.$_GID||(H_a.$_GID=H_$.getGID());return H_l.tweenMap[H_k]?(H_g&&H_l.clearTween(H_a),H_l.tweenMap[H_k].push(this)):H_l.tweenMap[H_k]=[this],H_j?H_f<=0?this.firstStart(H_a,H_b,H_h):(this._delayParam=[H_a,H_b,H_h],H_z.scaleTimer.once(H_f,this,this.firstStart,this._delayParam)):this._initProps(H_a,H_b,H_h),this},H_a.firstStart=function(H_a,H_b,H_c){this._delayParam=null,H_a.destroyed?this.clear():(this._initProps(H_a,H_b,H_c),this._beginLoop())},H_a._initProps=function(H_a,H_b,H_c){for(var H_d in H_b)if("number"==typeof H_a[H_d]){var H_e=H_c?H_a[H_d]:H_b[H_d],H_f=H_c?H_b[H_d]:H_a[H_d];this._props.push([H_d,H_e,H_f-H_e]),H_c||(H_a[H_d]=H_e)}},H_a._beginLoop=function(){H_z.scaleTimer.frameLoop(1,this,this._doEase)},H_a._doEase=function(){this._updateEase(H_O.now())},H_a._updateEase=function(H_a){var H_b=this._target;if(H_b){if(H_b.destroyed)return H_l.clearTween(H_b);var H_c=this._usedTimer=H_a-this._startTimer-this._delay;if(!(H_c<0)){if(H_c>=this._duration)return this.complete();for(var H_d=0<H_c?this._ease(H_c,0,1,this._duration):0,H_e=this._props,H_f=0,H_g=H_e.length;H_f<H_g;H_f++){var H_h=H_e[H_f];H_b[H_h[0]]=H_h[1]+H_d*H_h[2]}this.update&&this.update.run()}}},H_a.complete=function(){if(this._target){H_z.scaleTimer.runTimer(this,this.firstStart);for(var H_a=this._target,H_b=this._props,H_c=this._complete,H_d=0,H_e=H_b.length;H_d<H_e;H_d++){var H_f=H_b[H_d];H_a[H_f[0]]=H_f[1]+H_f[2]}this.update&&this.update.run(),this.clear(),H_c&&H_c.run()}},H_a.pause=function(){H_z.scaleTimer.clear(this,this._beginLoop),H_z.scaleTimer.clear(this,this._doEase),H_z.scaleTimer.clear(this,this.firstStart);var H_a;(H_a=H_O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=H_a)},H_a.setStartTime=function(H_a){this._startTimer=H_a},H_a.clear=function(){this._target&&(this._remove(),this._clear())},H_a._clear=function(){this.pause(),H_z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,H_W.recover("tween",this))},H_a.recover=function(){this._usedPool=!0,this._clear()},H_a._remove=function(){var H_a=H_l.tweenMap[this._target.$_GID];if(H_a)for(var H_b=0,H_c=H_a.length;H_b<H_c;H_b++)if(H_a[H_b]===this){H_a.splice(H_b,1);break}},H_a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=H_O.now(),this._delayParam)H_z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var H_a=this._props,H_b=0,H_c=H_a.length;H_b<H_c;H_b++){var H_d=H_a[H_b];this._target[H_d[0]]=H_d[1]}H_z.scaleTimer.once(this._delay,this,this._beginLoop)}},H_a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=H_O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?H_z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},H_q(0,H_a,"progress",null,function(H_a){var H_b=H_a*this._duration;this._startTimer=H_O.now()-this._delay-H_b}),H_l.to=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){return void 0===H_f&&(H_f=0),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=!0),H_W.getItemByClass("tween",H_l)._create(H_a,H_b,H_c,H_d,H_e,H_f,H_g,!0,H_h,!0)},H_l.from=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){return void 0===H_f&&(H_f=0),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=!0),H_W.getItemByClass("tween",H_l)._create(H_a,H_b,H_c,H_d,H_e,H_f,H_g,!1,H_h,!0)},H_l.clearAll=function(H_a){if(H_a&&H_a.$_GID){var H_b=H_l.tweenMap[H_a.$_GID];if(H_b){for(var H_c=0,H_d=H_b.length;H_c<H_d;H_c++)H_b[H_c]._clear();H_b.length=0}}},H_l.clear=function(H_a){H_a.clear()},H_l.clearTween=function(H_a){H_l.clearAll(H_a)},H_l.easeNone=function(H_a,H_b,H_c,H_d){return H_c*H_a/H_d+H_b},H_l.tweenMap={},H_l}(),H_$=function(){function H_h(){}return H_k(H_h,"laya.utils.Utils"),H_h.toRadian=function(H_a){return H_a*H_h._pi2},H_h.toAngle=function(H_a){return H_a*H_h._pi},H_h.toHexColor=function(H_a){if(H_a<0||isNaN(H_a))return null;for(var H_b=H_a.toString(16);H_b.length<6;)H_b="0"+H_b;return"#"+H_b},H_h.getGID=function(){return H_h._gid++},H_h.concatArray=function(H_a,H_b){if(!H_b)return H_a;if(!H_a)return H_b;var H_c=0,H_d=H_b.length;for(H_c=0;H_c<H_d;H_c++)H_a.push(H_b[H_c]);return H_a},H_h.clearArray=function(H_a){return H_a&&(H_a.length=0),H_a},H_h.copyArray=function(H_a,H_b){if(H_a||(H_a=[]),!H_b)return H_a;H_a.length=H_b.length;var H_c=0,H_d=H_b.length;for(H_c=0;H_c<H_d;H_c++)H_a[H_c]=H_b[H_c];return H_a},H_h.getGlobalRecByPoints=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g;return H_f=new H_A(H_b,H_c),H_f=H_a.localToGlobal(H_f),H_g=new H_A(H_d,H_e),H_g=H_a.localToGlobal(H_g),H_B._getWrapRec([H_f.x,H_f.y,H_g.x,H_g.y])},H_h.getGlobalPosAndScale=function(H_a){return H_h.getGlobalRecByPoints(H_a,0,0,1,1)},H_h.bind=function(H_a,H_b){return H_a.bind(H_b)},H_h.measureText=function(H_a,H_b){return H_F.measureText(H_a,H_b)},H_h.contextMeasureText=function(H_a){var H_b=H_O.context.measureText(H_a);return H_b||(H_b={width:16,height:16}),H_b},H_h.updateOrder=function(H_a){if(!H_a||H_a.length<2)return!1;for(var H_b,H_c=1,H_d=0,H_e=H_a.length,H_f=NaN;H_c<H_e;){for(H_b=H_a[H_d=H_c],H_f=H_a[H_d]._zOrder;-1<--H_d&&H_a[H_d]._zOrder>H_f;)H_a[H_d+1]=H_a[H_d];H_a[H_d+1]=H_b,H_c++}var H_g=H_b.parent.conchModel;if(H_g)if(null!=H_g.updateZOrder)H_g.updateZOrder();else{for(H_c=0;H_c<H_e;H_c++)H_g.removeChild(H_a[H_c].conchModel);for(H_c=0;H_c<H_e;H_c++)H_g.addChildAt(H_a[H_c].conchModel,H_c)}return!0},H_h.transPointList=function(H_a,H_b,H_c){var H_d=0,H_e=H_a.length;for(H_d=0;H_d<H_e;H_d+=2)H_a[H_d]+=H_b,H_a[H_d+1]+=H_c},H_h.parseInt=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c=H_O.window.parseInt(H_a,H_b);return isNaN(H_c)?0:H_c},H_h.getFileExtension=function(H_a){H_h._extReg.lastIndex=H_a.lastIndexOf(".");var H_b=H_h._extReg.exec(H_a);return H_b&&1<H_b.length?H_b[1].toLowerCase():null},H_h.getTransformRelativeToWindow=function(H_a,H_b,H_c){var H_d=H_z.stage,H_e=laya.utils.Utils.getGlobalPosAndScale(H_a),H_f=H_d._canvasTransform.clone(),H_g=H_f.tx,H_h=H_f.ty;H_f.rotate(-Math.PI/180*H_z.stage.canvasDegree),H_f.scale(H_z.stage.clientScaleX,H_z.stage.clientScaleY);var H_i=H_z.stage.canvasDegree%180!=0,H_j=NaN,H_k=NaN;H_i?(H_j=H_c+H_e.y,H_k=H_b+H_e.x,H_j*=H_f.d,H_k*=H_f.a,90==H_z.stage.canvasDegree?(H_j=H_g-H_j,H_k+=H_h):(H_j+=H_g,H_k=H_h-H_k)):(H_j=H_b+H_e.x,H_k=H_c+H_e.y,H_j*=H_f.a,H_k*=H_f.d,H_j+=H_g,H_k+=H_h);var H_l=NaN,H_m=NaN;return H_m=H_i?(H_l=H_f.d*H_e.height,H_f.a*H_e.width):(H_l=H_f.a*H_e.width,H_f.d*H_e.height),{x:H_j,y:H_k,scaleX:H_l,scaleY:H_m}},H_h.fitDOMElementInArea=function(H_a,H_b,H_c,H_d,H_e,H_f){H_a._fitLayaAirInitialized||(H_a._fitLayaAirInitialized=!0,H_a.style.transformOrigin=H_a.style.webKittransformOrigin="left top",H_a.style.position="absolute");var H_g=H_h.getTransformRelativeToWindow(H_b,H_c,H_d);H_a.style.transform=H_a.style.webkitTransform="scale("+H_g.scaleX+","+H_g.scaleY+") rotate("+H_z.stage.canvasDegree+"deg)",H_a.style.width=H_e+"px",H_a.style.height=H_f+"px",H_a.style.left=H_g.x+"px",H_a.style.top=H_g.y+"px"},H_h.isOkTextureList=function(H_a){if(!H_a)return!1;var H_b,H_c=0,H_d=H_a.length;for(H_c=0;H_c<H_d;H_c++)if(!(H_b=H_a[H_c])||!H_b.source)return!1;return!0},H_h.isOKCmdList=function(H_a){if(!H_a)return!1;var H_b,H_c,H_d=0,H_e=H_a.length,H_f=H_J._context;for(H_d=0;H_d<H_e;H_d++)switch((H_b=H_a[H_d]).callee){case H_f._drawTexture:case H_f._fillTexture:case H_f._drawTextureWithTransform:if(!(H_c=H_b[0])||!H_c.source)return!1}return!0},H_h._gid=1,H_h._pi=180/Math.PI,H_h._pi2=Math.PI/180,H_h._extReg=/\.(\w+)\??/g,H_h.parseXMLFromString=function(H_a){var H_b;if(H_a=H_a.replace(/>\s+</g,"><"),-1<(H_b=(new DOMParser).parseFromString(H_a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(H_b.firstChild.firstChild.textContent);return H_b},H_h}(),H__=function(){function H_a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],H_J.isWebGL&&H_Q.regCacheByFunction(H_$.bind(this.startDispose,this),H_$.bind(this.getCacheList,this))}H_k(H_a,"laya.utils.VectorGraphManager");var H_b=H_a.prototype;return H_b.getId=function(){return this._id++},H_b.addShape=function(H_a,H_b){this.shapeDic[H_a]=H_b,this.useDic[H_a]||(this.useDic[H_a]=!0)},H_b.addLine=function(H_a,H_b){this.shapeLineDic[H_a]=H_b,this.shapeLineDic[H_a]||(this.shapeLineDic[H_a]=!0)},H_b.getShape=function(H_a){this._checkKey&&null!=this.useDic[H_a]&&(this.useDic[H_a]=!0)},H_b.deleteShape=function(H_a){this.shapeDic[H_a]&&(this.shapeDic[H_a]=null,delete this.shapeDic[H_a]),this.shapeLineDic[H_a]&&(this.shapeLineDic[H_a]=null,delete this.shapeLineDic[H_a]),null!=this.useDic[H_a]&&delete this.useDic[H_a]},H_b.getCacheList=function(){var H_a,H_b=[];for(H_a in this.shapeDic)H_b.push(this.shapeDic[H_a]);for(H_a in this.shapeLineDic)H_b.push(this.shapeLineDic[H_a]);return H_b},H_b.startDispose=function(H_a){var H_b;for(H_b in this.useDic)this.useDic[H_b]=!1;this._checkKey=!0},H_b.endDispose=function(){if(this._checkKey){var H_a;for(H_a in this.useDic)this.useDic[H_a]||this.deleteShape(H_a);this._checkKey=!1}},H_a.getInstance=function(){return H_a.instance=H_a.instance||new H_a},H_a.instance=null,H_a}(),H_o=function(){function H_d(){this._obj=null,this._obj=H_d.supportWeakMap?new H_O.window.WeakMap:{},H_d.supportWeakMap||H_d._maps.push(this)}H_k(H_d,"laya.utils.WeakObject");var H_a=H_d.prototype;return H_a.set=function(H_a,H_b){if(null!=H_a)if(H_d.supportWeakMap){var H_c=H_a;"string"!=typeof H_a&&"number"!=typeof H_a||(H_c=H_d._keys[H_a])||(H_c=H_d._keys[H_a]={k:H_a}),this._obj.set(H_c,H_b)}else"string"==typeof H_a||"number"==typeof H_a?this._obj[H_a]=H_b:(H_a.$_GID||(H_a.$_GID=H_$.getGID()),this._obj[H_a.$_GID]=H_b)},H_a.get=function(H_a){if(null==H_a)return null;if(H_d.supportWeakMap){var H_b="string"==typeof H_a||"number"==typeof H_a?H_d._keys[H_a]:H_a;return H_b?this._obj.get(H_b):null}return"string"==typeof H_a||"number"==typeof H_a?this._obj[H_a]:this._obj[H_a.$_GID]},H_a.del=function(H_a){if(null!=H_a)if(H_d.supportWeakMap){var H_b="string"==typeof H_a||"number"==typeof H_a?H_d._keys[H_a]:H_a;if(!H_b)return;this._obj.delete(H_b)}else"string"==typeof H_a||"number"==typeof H_a?delete this._obj[H_a]:delete this._obj[this._obj.$_GID]},H_a.has=function(H_a){if(null==H_a)return!1;if(H_d.supportWeakMap){var H_b="string"==typeof H_a||"number"==typeof H_a?H_d._keys[H_a]:H_a;return this._obj.has(H_b)}return"string"==typeof H_a||"number"==typeof H_a?null!=this._obj[H_a]:null!=this._obj[this._obj.$_GID]},H_d.__init__=function(){(H_d.supportWeakMap=null!=H_O.window.WeakMap)||H_z.timer.loop(H_d.delInterval,null,H_d.clearCache)},H_d.clearCache=function(){for(var H_a=0,H_b=H_d._maps.length;H_a<H_b;H_a++){H_d._maps[H_a]._obj={}}},H_d.supportWeakMap=!1,H_d.delInterval=3e5,H_d._keys={},H_d._maps=[],H_i(H_d,["I",function(){return this.I=new H_d}]),H_d}(),H_p=function(){function H_a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}H_k(H_a,"laya.utils.WordText");var H_b=H_a.prototype;return H_b.setText=function(H_a){this.changed=!0,this._text=H_a},H_b.toString=function(){return this._text},H_b.charCodeAt=function(H_a){return this._text?this._text.charCodeAt(H_a):NaN},H_b.charAt=function(H_a){return this._text?this._text.charAt(H_a):null},H_q(0,H_b,"length",function(){return this._text?this._text.length:0}),H_a}(),H_aa=function(H_a){function H_g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,H_g.__super.call(this),this._childs=H_g.ARRAY_EMPTY,this._$P=H_g.PROP_EMPTY,this.timer=H_z.scaleTimer,this.conchModel=H_J.isConchNode?this.createConchModel():null}H_k(H_g,"laya.display.Node",H_j);var H_b=H_g.prototype;return H_b._setBit=function(H_a,H_b){1==H_a&&(this._getBit(H_a)!=H_b&&this._updateDisplayedInstage());H_b?this._bits|=H_a:this._bits&=~H_a},H_b._getBit=function(H_a){return 0!=(this._bits&H_a)},H_b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},H_b._setUpNoticeType=function(H_a){var H_b=this;for(H_b._setBit(H_a,!0),H_b=H_b.parent;H_b;){if(H_b._getBit(H_a))return;H_b._setBit(H_a,!0),H_b=H_b.parent}},H_b.on=function(H_a,H_b,H_c,H_d){return"display"!==H_a&&"undisplay"!==H_a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H_a,H_b,H_c,H_d,!1)},H_b.once=function(H_a,H_b,H_c,H_d){return"display"!==H_a&&"undisplay"!==H_a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H_a,H_b,H_c,H_d,!0)},H_b.createConchModel=function(){return null},H_b.destroy=function(H_a){void 0===H_a&&(H_a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(H_a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},H_b.destroyChildren=function(){if(this._childs)for(var H_a=this._childs.length-1;-1<H_a;H_a--)this._childs[H_a].destroy(!0)},H_b.addChild=function(H_a){if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),H_a._parent===this){var H_b=this.getChildIndex(H_a);H_b!==this._childs.length-1&&(this._childs.splice(H_b,1),this._childs.push(H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1)),this._childChanged())}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1),(H_a.parent=this)._childChanged();return H_a},H_b.addChildren=function(H_a){for(var H_b=arguments,H_c=0,H_d=H_b.length;H_c<H_d;)this.addChild(H_b[H_c++])},H_b.addChildAt=function(H_a,H_b){if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),0<=H_b&&H_b<=this._childs.length){if(H_a._parent===this){var H_c=this.getChildIndex(H_a);this._childs.splice(H_c,1),this._childs.splice(H_b,0,H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,H_b)),this._childChanged()}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H_b,0,H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,H_b),H_a.parent=this;return H_a}throw new Error("appendChildAt:The index is out of bounds")},H_b.getChildIndex=function(H_a){return this._childs.indexOf(H_a)},H_b.getChildByName=function(H_a){var H_b=this._childs;if(H_b)for(var H_c=0,H_d=H_b.length;H_c<H_d;H_c++){var H_e=H_b[H_c];if(H_e.name===H_a)return H_e}return null},H_b._get$P=function(H_a){return this._$P[H_a]},H_b._set$P=function(H_a,H_b){return this.destroyed||(this._$P===H_g.PROP_EMPTY&&(this._$P={}),this._$P[H_a]=H_b),H_b},H_b.getChildAt=function(H_a){return this._childs[H_a]},H_b.setChildIndex=function(H_a,H_b){var H_c=this._childs;if(H_b<0||H_b>=H_c.length)throw new Error("setChildIndex:The index is out of bounds.");var H_d=this.getChildIndex(H_a);if(H_d<0)throw new Error("setChildIndex:node is must child of this object.");return H_c.splice(H_d,1),H_c.splice(H_b,0,H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,H_b)),this._childChanged(),H_a},H_b._childChanged=function(H_a){},H_b.removeChild=function(H_a){if(!this._childs)return H_a;var H_b=this._childs.indexOf(H_a);return this.removeChildAt(H_b)},H_b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},H_b.removeChildByName=function(H_a){var H_b=this.getChildByName(H_a);return H_b&&this.removeChild(H_b),H_b},H_b.removeChildAt=function(H_a){var H_b=this.getChildAt(H_a);if(H_b){for(var H_c=this._childs.length-1,H_d=H_a;H_d<H_c;++H_d)this._childs[H_d]=this._childs[H_d+1];this._childs.length=H_c,this.conchModel&&this.conchModel.removeChild(H_b.conchModel),H_b.parent=null}return H_b},H_b.removeChildren=function(H_a,H_b){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=2147483647),this._childs&&0<this._childs.length){var H_c=this._childs;if(0===H_a&&H_f<=H_b){var H_d=H_c;this._childs=H_g.ARRAY_EMPTY}else H_d=H_c.splice(H_a,H_b-H_a);for(var H_e=0,H_f=H_d.length;H_e<H_f;H_e++)H_d[H_e].parent=null,this.conchModel&&this.conchModel.removeChild(H_d[H_e].conchModel)}return this},H_b.replaceChild=function(H_a,H_b){var H_c=this._childs.indexOf(H_b);return-1<H_c?(this._childs.splice(H_c,1,H_a),this.conchModel&&(this.conchModel.removeChild(H_b.conchModel),this.conchModel.addChildAt(H_a.conchModel,H_c)),H_b.parent=null,H_a.parent=this,H_a):null},H_b._updateDisplayedInstage=function(){var H_a;H_a=this;var H_b=H_z.stage;for(this._displayedInStage=!1;H_a;){if(H_a._getBit(1)){this._displayedInStage=H_a._displayedInStage;break}if(H_a==H_b||H_a._displayedInStage){this._displayedInStage=!0;break}H_a=H_a.parent}},H_b._setDisplay=function(H_a){this._displayedInStage!==H_a&&((this._displayedInStage=H_a)?this.event("display"):this.event("undisplay"))},H_b._displayChild=function(H_a,H_b){var H_c=H_a._childs;if(H_c)for(var H_d=0;H_d<H_c.length;H_d++){var H_e=H_c[H_d];H_e&&H_e._getBit(1)&&(0<H_e._childs.length?this._displayChild(H_e,H_b):H_e._setDisplay(H_b))}H_a._setDisplay(H_b)},H_b.contains=function(H_a){if(H_a===this)return!0;for(;H_a;){if(H_a.parent===this)return!0;H_a=H_a.parent}return!1},H_b.timerLoop=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_e&&(H_e=!0),void 0===H_f&&(H_f=!1),this.timer.loop(H_a,H_b,H_c,H_d,H_e,H_f)},H_b.timerOnce=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=!0),this.timer._create(!1,!1,H_a,H_b,H_c,H_d,H_e)},H_b.frameLoop=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=!0),this.timer._create(!0,!0,H_a,H_b,H_c,H_d,H_e)},H_b.frameOnce=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=!0),this.timer._create(!0,!1,H_a,H_b,H_c,H_d,H_e)},H_b.clearTimer=function(H_a,H_b){this.timer.clear(H_a,H_b)},H_q(0,H_b,"numChildren",function(){return this._childs.length}),H_q(0,H_b,"destroyed",function(){return this._destroyed}),H_q(0,H_b,"parent",function(){return this._parent},function(H_a){this._parent!==H_a&&(H_a?(this._parent=H_a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),H_a.displayedInStage&&this._displayChild(this,!0)),H_a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=H_a))}),H_q(0,H_b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),H_g.ARRAY_EMPTY=[],H_g.PROP_EMPTY={},H_g.NOTICE_DISPLAY=1,H_g.MOUSEENABLE=2,H_g}(),H_ba=function(H_a){function H_m(H_a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,H_m.__super.call(this),this._padding=H_m._PADDING,this._spacing=H_m._SPACING,this._aligns=H_m._ALIGNS,this._font=H_n.EMPTY,this._ower=H_a}H_k(H_m,"laya.display.css.CSSStyle",H_a);var H_b=H_m.prototype;return H_b.destroy=function(){this._ower=null,this._font=null,this._rect=null},H_b.inherit=function(H_a){this._font=H_a._font,this._spacing=H_a._spacing===H_m._SPACING?H_m._SPACING:H_a._spacing.slice(),this.lineHeight=H_a.lineHeight},H_b._widthAuto=function(){return 0!=(262144&this._type)},H_b.widthed=function(H_a){return 0!=(8&this._type)},H_b._calculation=function(H_a,H_b){if(H_b.indexOf("%")<0)return!1;var H_d=this._ower,H_e=H_d.parent,H_f=this._rect;function H_g(H_a,H_b,H_c){return H_a*H_c[0]+H_b*H_c[1]+H_c[2]}function H_c(H_a){var H_b=H_e.width,H_c=H_d.width;H_f.width&&(H_d.width=H_g(H_b,H_c,H_f.width)),H_f.height&&(H_d.height=H_g(H_b,H_c,H_f.height)),H_f.left&&(H_d.x=H_g(H_b,H_c,H_f.left)),H_f.top&&(H_d.y=H_g(H_b,H_c,H_f.top))}null===H_f&&(H_e._getCSSStyle()._type|=524288,H_e.on("resize",this,H_c),this._rect=H_f={input:{}});var H_h=H_b.split(" ");return H_h[0]=parseFloat(H_h[0])/100,1==H_h.length?H_h[1]=H_h[2]=0:(H_h[1]=parseFloat(H_h[1])/100,H_h[2]=parseFloat(H_h[2])),H_f[H_a]=H_h,H_f.input[H_a]=H_b,H_c(),!0},H_b.heighted=function(H_a){return 0!=(8192&this._type)},H_b.size=function(H_a,H_b){var H_c=this._ower,H_d=!1;-1!==H_a&&H_a!=this._ower.width&&(this._type|=8,this._ower.width=H_a,H_d=!0),-1!==H_b&&H_b!=this._ower.height&&(this._type|=8192,this._ower.height=H_b,H_d=!0),H_d&&(H_c._layoutLater(),524288&this._type&&H_c.event("resize",this))},H_b._getAlign=function(){return this._aligns[0]},H_b._getValign=function(){return this._aligns[1]},H_b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},H_b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new H_n(this._font))},H_b.render=function(H_a,H_b,H_c,H_d){var H_e=H_a.width,H_f=H_a.height;H_c-=H_a.pivotX,H_d-=H_a.pivotY,this._bgground&&null!=this._bgground.color&&H_b.ctx.fillRect(H_c,H_d,H_e,H_f,this._bgground.color),this._border&&this._border.color&&H_b.drawRect(H_c,H_d,H_e,H_f,this._border.color.strColor,this._border.size)},H_b.getCSSStyle=function(){return this},H_b.cssText=function(H_a){this.attrs(H_m.parseOneCSS(H_a,";"))},H_b.attrs=function(H_a){if(H_a)for(var H_b=0,H_c=H_a.length;H_b<H_c;H_b++){var H_d=H_a[H_b];this[H_d[0]]=H_d[1]}},H_b.setTransform=function(H_a){"none"===H_a?this._tf=H_h._TF_EMPTY:this.attrs(H_m.parseOneCSS(H_a,","))},H_b.translate=function(H_a,H_b){this._tf===H_h._TF_EMPTY&&(this._tf=new H_e),this._tf.translateX=H_a,this._tf.translateY=H_b},H_b.scale=function(H_a,H_b){this._tf===H_h._TF_EMPTY&&(this._tf=new H_e),this._tf.scaleX=H_a,this._tf.scaleY=H_b},H_b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},H_q(0,H_b,"block",H_a.prototype._$get_block,function(H_a){H_a?this._type|=1:this._type&=-2}),H_q(0,H_b,"valign",function(){return H_m._valigndef[this._aligns[1]]},function(H_a){this._aligns===H_m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=H_m._valigndef[H_a]}),H_q(0,H_b,"height",null,function(H_a){if(this._type|=8192,"string"==typeof H_a){if(this._calculation("height",H_a))return;H_a=parseInt(H_a)}this.size(-1,H_a)}),H_q(0,H_b,"width",null,function(H_a){if(this._type|=8,"string"==typeof H_a){var H_b=H_a.indexOf("auto");if(0<=H_b&&(this._type|=262144,H_a=H_a.substr(0,H_b)),this._calculation("width",H_a))return;H_a=parseInt(H_a)}this.size(H_a,-1)}),H_q(0,H_b,"fontWeight",function(){return this._font.weight},function(H_a){this._createFont().weight=H_a}),H_q(0,H_b,"left",null,function(H_a){var H_b=this._ower;if("string"==typeof H_a){if("center"===H_a?H_a="50% -50% 0":"right"===H_a&&(H_a="100% -100% 0"),this._calculation("left",H_a))return;H_a=parseInt(H_a)}H_b.x=H_a}),H_q(0,H_b,"_translate",null,function(H_a){this.translate(H_a[0],H_a[1])}),H_q(0,H_b,"absolute",function(){return 0!=(4&this._type)}),H_q(0,H_b,"top",null,function(H_a){var H_b=this._ower;if("string"==typeof H_a){if("middle"===H_a?H_a="50% -50% 0":"bottom"===H_a&&(H_a="100% -100% 0"),this._calculation("top",H_a))return;H_a=parseInt(H_a)}H_b.y=H_a}),H_q(0,H_b,"align",function(){return H_m._aligndef[this._aligns[0]]},function(H_a){this._aligns===H_m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=H_m._aligndef[H_a]}),H_q(0,H_b,"bold",function(){return this._font.bold},function(H_a){this._createFont().bold=H_a}),H_q(0,H_b,"padding",function(){return this._padding},function(H_a){this._padding=H_a}),H_q(0,H_b,"leading",function(){return this._spacing[1]},function(H_a){"string"==typeof H_a&&(H_a=parseInt(H_a+"")),this._spacing===H_m._SPACING&&(this._spacing=[0,0]),this._spacing[1]=H_a}),H_q(0,H_b,"lineElement",function(){return 0!=(65536&this._type)},function(H_a){H_a?this._type|=65536:this._type&=-65537}),H_q(0,H_b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(H_a){this.lineElement=!1,"right"===H_a?this._type|=32768:this._type&=-32769}),H_q(0,H_b,"textDecoration",function(){return this._font.decoration},function(H_a){this._createFont().decoration=H_a}),H_q(0,H_b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(H_a){"nowrap"===H_a&&(this._type|=131072),"none"===H_a&&(this._type&=-131073)}),H_q(0,H_b,"background",null,function(H_a){H_a?(this._bgground||(this._bgground={}),this._bgground.color=H_a,this._ower.conchModel&&this._ower.conchModel.bgColor(H_a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),H_q(0,H_b,"wordWrap",function(){return 0==(131072&this._type)},function(H_a){H_a?this._type&=-131073:this._type|=131072}),H_q(0,H_b,"color",function(){return this._font.color},function(H_a){this._createFont().color=H_a}),H_q(0,H_b,"password",function(){return this._font.password},function(H_a){this._createFont().password=H_a}),H_q(0,H_b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(H_a){"none"===H_a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=H_a),this._ower.conchModel&&this._ower.conchModel.bgColor(H_a),this._ower._renderType|=256}),H_q(0,H_b,"font",function(){return this._font.toString()},function(H_a){this._createFont().set(H_a)}),H_q(0,H_b,"weight",null,function(H_a){this._createFont().weight=H_a}),H_q(0,H_b,"letterSpacing",function(){return this._spacing[0]},function(H_a){"string"==typeof H_a&&(H_a=parseInt(H_a+"")),this._spacing===H_m._SPACING&&(this._spacing=[0,0]),this._spacing[0]=H_a}),H_q(0,H_b,"fontSize",function(){return this._font.size},function(H_a){this._createFont().size=H_a}),H_q(0,H_b,"italic",function(){return this._font.italic},function(H_a){this._createFont().italic=H_a}),H_q(0,H_b,"fontFamily",function(){return this._font.family},function(H_a){this._createFont().family=H_a}),H_q(0,H_b,"stroke",function(){return this._font.stroke[0]},function(H_a){this._createFont().stroke===H_n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=H_a}),H_q(0,H_b,"strokeColor",function(){return this._font.stroke[1]},function(H_a){this._createFont().stroke===H_n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=H_a}),H_q(0,H_b,"border",function(){return this._border?this._border.value:""},function(H_a){if("none"!=H_a){this._border||(this._border={});var H_b=(this._border.value=H_a).split(" ");if(this._border.color=H_S.create(H_b[H_b.length-1]),1==H_b.length)return this._border.size=1,void(this._border.type="solid");var H_c=0;0<H_b[0].indexOf("px")?(this._border.size=parseInt(H_b[0]),H_c++):this._border.size=1,this._border.type=H_b[H_c],this._ower._renderType|=256}else this._border=null}),H_q(0,H_b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(H_a){H_a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==H_a?null:H_S.create(H_a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),H_q(0,H_b,"position",function(){return 4&this._type?"absolute":""},function(H_a){"absolute"==H_a?this._type|=4:this._type&=-5}),H_q(0,H_b,"display",null,function(H_a){switch(H_a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),H_q(0,H_b,"paddingLeft",function(){return this.padding[3]}),H_q(0,H_b,"paddingTop",function(){return this.padding[0]}),H_q(0,H_b,"_scale",null,function(H_a){this._ower.scale(H_a[0],H_a[1])}),H_q(0,H_b,"_rotate",null,function(H_a){this._ower.rotation=H_a}),H_m.parseOneCSS=function(H_a,H_b){for(var H_c,H_d=[],H_e=H_a.split(H_b),H_f=0,H_g=H_e.length;H_f<H_g;H_f++){var H_h=H_e[H_f],H_i=H_h.indexOf(":"),H_j=H_h.substr(0,H_i).replace(/^\s+|\s+$/g,"");if(0!=H_j.length){var H_k=H_h.substr(H_i+1).replace(/^\s+|\s+$/g,""),H_l=[H_j,H_k];switch(H_j){case"italic":case"bold":H_l[1]="true"==H_k;break;case"line-height":H_l[0]="lineHeight",H_l[1]=parseInt(H_k);break;case"font-size":H_l[0]="fontSize",H_l[1]=parseInt(H_k);break;case"padding":1<(H_c=H_k.split(" ")).length||(H_c[1]=H_c[2]=H_c[3]=H_c[0]),H_l[1]=[parseInt(H_c[0]),parseInt(H_c[1]),parseInt(H_c[2]),parseInt(H_c[3])];break;case"rotate":H_l[0]="_rotate",H_l[1]=parseFloat(H_k);break;case"scale":H_c=H_k.split(" "),H_l[0]="_scale",H_l[1]=[parseFloat(H_c[0]),parseFloat(H_c[1])];break;case"translate":H_c=H_k.split(" "),H_l[0]="_translate",H_l[1]=[parseInt(H_c[0]),parseInt(H_c[1])];break;default:(H_l[0]=H_m._CSSTOVALUE[H_j])||(H_l[0]=H_j)}H_d.push(H_l)}}return H_d},H_m.parseCSS=function(H_a,H_b){for(var H_c;null!=(H_c=H_m._parseCSSRegExp.exec(H_a));)H_m.styleSheets[H_c[1]]=H_m.parseOneCSS(H_c[2],";")},H_m.EMPTY=new H_m(null),H_m._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},H_m._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),H_m._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},H_m._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},H_m.styleSheets={},H_m.ALIGN_CENTER=1,H_m.ALIGN_RIGHT=2,H_m.VALIGN_MIDDLE=1,H_m.VALIGN_BOTTOM=2,H_m._CSS_BLOCK=1,H_m._DISPLAY_NONE=2,H_m._ABSOLUTE=4,H_m._WIDTH_SET=8,H_m._PADDING=[0,0,0,0],H_m._RECT=[-1,-1,-1,-1],H_m._SPACING=[0,0],H_m._ALIGNS=[0,0,0],H_m.ADDLAYOUTED=512,H_m._NEWFONT=4096,H_m._HEIGHT_SET=8192,H_m._BACKGROUND_SET=16384,H_m._FLOAT_RIGHT=32768,H_m._LINE_ELEMENT=65536,H_m._NOWARP=131072,H_m._WIDTHAUTO=262144,H_m._LISTERRESZIE=524288,H_m}(H_h),H_ca=function(H_a){function H_g(){this.url=null,this.audio=null,this.loaded=!1,H_g.__super.call(this)}H_k(H_g,"laya.media.h5audio.AudioSound",H_j);var H_b=H_g.prototype;return H_b.dispose=function(){var H_a=H_g._audioCache[this.url];H_a&&(H_a.src="",delete H_g._audioCache[this.url])},H_b.load=function(H_a){var H_b;if(H_a=H_I.formatURL(H_a),(this.url=H_a)==H_E._tMusic?(H_g._initMusicAudio(),(H_b=H_g._musicAudio).src!=H_a&&(H_g._audioCache[H_b.src]=null,H_b=null)):H_b=H_g._audioCache[H_a],H_b&&2<=H_b.readyState)this.event("complete");else{H_b||(H_b=H_a==H_E._tMusic?(H_g._initMusicAudio(),H_g._musicAudio):H_O.createElement("audio"),(H_g._audioCache[H_a]=H_b).src=H_a),H_b.addEventListener("canplaythrough",H_d),H_b.addEventListener("error",H_e);var H_c=this;(this.audio=H_b).load?H_b.load():H_e()}function H_d(){H_f(),H_c.loaded=!0,H_c.event("complete")}function H_e(){H_b.load=null,H_f(),H_c.event("error")}function H_f(){H_b.removeEventListener("canplaythrough",H_d),H_b.removeEventListener("error",H_e)}},H_b.play=function(H_a,H_b,H_c){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),!this.url)return null;var H_d,H_e;if(!(H_d=this.url==H_E._tMusic?H_g._musicAudio:H_g._audioCache[this.url]))return null;H_e=H_W.getItem("audio:"+this.url),H_J.isConchApp?H_e||((H_e=H_O.createElement("audio")).src=this.url):this.url==H_E._tMusic?(H_g._initMusicAudio(),(H_e=H_g._musicAudio).src=this.url):H_e=H_e||H_d.cloneNode(!0);var H_f=new H_ma(H_e);return H_f.url=this.url,H_f.loops=H_b,H_f.startTime=H_a,H_f.startHandler=H_c,H_f.play(!1),H_E.addChannel(H_f),H_f},H_q(0,H_b,"duration",function(){var H_a;return(H_a=H_g._audioCache[this.url])?H_a.duration:0}),H_g._initMusicAudio=function(){H_g._musicAudio||(H_g._musicAudio||(H_g._musicAudio=H_O.createElement("audio")),H_J.isConchApp||H_O.document.addEventListener("mousedown",H_g._makeMusicOK))},H_g._makeMusicOK=function(){H_O.document.removeEventListener("mousedown",H_g._makeMusicOK),H_g._musicAudio.src?H_g._musicAudio.play():(H_g._musicAudio.src="",H_g._musicAudio.load())},H_g._audioCache={},H_g._musicAudio=null,H_g}(),H_da=function(H_a){function H_b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,H_b.__super.call(this)}H_k(H_b,"laya.media.SoundChannel",H_j);var H_c=H_b.prototype;return H_c.play=function(){},H_c.stop=function(){},H_c.pause=function(){},H_c.resume=function(){},H_c.__runComplete=function(H_a){H_a&&H_a.run()},H_q(0,H_c,"volume",function(){return 1},function(H_a){}),H_q(0,H_c,"position",function(){return 0}),H_q(0,H_c,"duration",function(){return 0}),H_b}(),H_ea=function(H_a){function H_b(){H_b.__super.call(this)}H_k(H_b,"laya.media.Sound",H_j);var H_c=H_b.prototype;return H_c.load=function(H_a){},H_c.play=function(H_a,H_b,H_c){return void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),null},H_c.dispose=function(){},H_q(0,H_c,"duration",function(){return 0}),H_b}(),H_fa=function(H_a){function H_e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,H_e.__super.call(this)}H_k(H_e,"laya.media.webaudio.WebAudioSound",H_j);var H_b=H_e.prototype;return H_b.load=function(H_a){this.url=H_a,this.audioBuffer=H_e._dataCache[H_a],this.audioBuffer?this._loaded(this.audioBuffer):(H_e.e.on("loaded:"+H_a,this,this._loaded),H_e.e.on("err:"+H_a,this,this._err),H_e.__loadingSound[H_a]||(H_e.__loadingSound[H_a]=!0,H_z.loader.load(H_a,H_u.create(this,this.onloaded),null,H_ha.BUFFER,4,!1,null,!0)))},H_b.onloaded=function(H_a){H_a||this._err(),this._disposed?this._removeLoadEvents():(this.data=H_a,H_e.buffs.push({buffer:this.data,url:this.url}),H_e.decode())},H_b._err=function(){if(this._removeLoadEvents(),H_e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var H_a,H_b,H_c,H_d=0;for(H_a=(H_b=this.__toPlays).length,H_d=0;H_d<H_a;H_d++)(H_c=H_b[H_d])[3]&&!H_c[3].isStopped&&H_c[3].event("error");this.__toPlays.length=0}},H_b._loaded=function(H_a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=H_a,this.loaded=!0,this.event("complete"))},H_b._removeLoadEvents=function(){H_e.e.off("loaded:"+this.url,this,this._loaded),H_e.e.off("err:"+this.url,this,this._err)},H_b.__playAfterLoaded=function(){if(this.__toPlays){var H_a,H_b,H_c,H_d=0;for(H_a=(H_b=this.__toPlays).length,H_d=0;H_d<H_a;H_d++)(H_c=H_b[H_d])[3]&&!H_c[3].isStopped&&this.play(H_c[0],H_c[1],H_c[2],H_c[3]);this.__toPlays.length=0}},H_b.play=function(H_a,H_b,H_c,H_d){return void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),H_d=H_d||new H_na,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([H_a,H_b,H_c,H_d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),H_d.url=this.url,H_d.loops=H_b,H_d.audioBuffer=this.audioBuffer,H_d.startTime=H_a,H_d.startHandler=H_c,H_d.play(!1),H_E.addChannel(H_d),H_d},H_b.dispose=function(){this._disposed=!0,delete H_e._dataCache[this.url],delete H_e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},H_q(0,H_b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H_e.decode=function(){if(!(H_e.buffs.length<=0||H_e.isDecoding))if(H_e.isDecoding=!0,(H_e.tInfo=H_e.buffs.shift())&&H_e.tInfo.buffer&&H_e.tInfo.buffer.byteLength)try{H_e.ctx.decodeAudioData(H_e.tInfo.buffer,H_e._done,H_e._fail)}catch(H_a){console.error("decodeAudioData error  byteLength:"+H_e.tInfo.buffer.byteLength+"  url:"+H_e.tInfo.url)}else H_e._fail()},H_e._done=function(H_a){H_e.e.event("loaded:"+H_e.tInfo.url,H_a),H_e._dataCache[H_e.tInfo.url]=H_a,H_e.isDecoding=!1,H_e.decode()},H_e._fail=function(){H_e.e.event("err:"+H_e.tInfo.url,null),H_e.isDecoding=!1,H_e.decode()},H_e._playEmptySound=function(){if(null!=H_e.ctx){if(H_e._emptySource&&(H_e._emptySource.stop(),H_e._emptySource.disconnect(0),!H_na._tryCleanFailed))try{H_e._emptySource.buffer=null}catch(H_a){H_na._tryCleanFailed=!0}var H_a=H_e.ctx.createBufferSource();H_a.buffer=H_e._miniBuffer,H_a.connect(H_e.ctx.destination),H_a.start(0,0,0),H_e._emptySource=H_a}},H_e._unlock=function(){H_e._unlocked||(H_e._playEmptySound(),"running"==H_e.ctx.state?(H_O.document.removeEventListener("mousedown",H_e._unlock,!0),H_O.document.removeEventListener("touchend",H_e._unlock,!0),H_O.document.removeEventListener("touchstart",H_e._unlock,!0),H_e._unlocked=!0):"suspended"==H_e.ctx.state&&H_E._recoverWebAudio())},H_e.initWebAudio=function(){"running"!=H_e.ctx.state&&(H_e._unlock(),H_O.document.addEventListener("mousedown",H_e._unlock,!0),H_O.document.addEventListener("touchend",H_e._unlock,!0),H_O.document.addEventListener("touchstart",H_e._unlock,!0))},H_e._emptySource=null,H_e._dataCache={},H_e.buffs=[],H_e.isDecoding=!1,H_e._unlocked=!1,H_e.tInfo=null,H_e.__loadingSound={},H_i(H_e,["window",function(){return this.window=H_O.window},"webAudioEnabled",function(){return this.webAudioEnabled=H_e.window.AudioContext||H_e.window.webkitAudioContext||H_e.window.mozAudioContext},"ctx",function(){return this.ctx=H_e.webAudioEnabled?new(H_e.window.AudioContext||H_e.window.webkitAudioContext||H_e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=H_e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new H_j}]),H_e}(),H_ga=function(H_a){function H_b(){this._responseType=null,this._data=null,H_b.__super.call(this),this._http=new H_O.window.XMLHttpRequest}H_k(H_b,"laya.net.HttpRequest",H_j);var H_c=H_b.prototype;return H_c.send=function(H_a,H_b,H_c,H_d,H_e){void 0===H_c&&(H_c="get"),void 0===H_d&&(H_d="text"),this._responseType=H_d,this._data=null;var H_f=this,H_g=this._http;if(H_g.open(H_c,H_a,!0),H_e)for(var H_h=0;H_h<H_e.length;H_h++)H_g.setRequestHeader(H_e[H_h++],H_e[H_h]);else H_J.isConchApp||(H_b&&"string"!=typeof H_b?H_g.setRequestHeader("Content-Type","application/json"):H_g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));H_g.responseType="arraybuffer"!==H_d?"text":"arraybuffer",H_g.onerror=function(H_a){H_f._onError(H_a)},H_g.onabort=function(H_a){H_f._onAbort(H_a)},H_g.onprogress=function(H_a){H_f._onProgress(H_a)},H_g.onload=function(H_a){H_f._onLoad(H_a)},H_g.send(H_b)},H_c._onProgress=function(H_a){H_a&&H_a.lengthComputable&&this.event("progress",H_a.loaded/H_a.total)},H_c._onAbort=function(H_a){this.error("Request was aborted by user")},H_c._onError=function(H_a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},H_c._onLoad=function(H_a){var H_b=this._http,H_c=void 0!==H_b.status?H_b.status:200;200===H_c||204===H_c||0===H_c?this.complete():this.error("["+H_b.status+"]"+H_b.statusText+":"+H_b.responseURL)},H_c.error=function(H_a){this.clear(),this.event("error",H_a)},H_c.complete=function(){this.clear();var H_b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=H_$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(H_a){H_b=!1,this.error(H_a.message)}H_b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},H_c.clear=function(){var H_a=this._http;H_a.onerror=H_a.onabort=H_a.onprogress=H_a.onload=null},H_q(0,H_c,"url",function(){return this._http.responseURL}),H_q(0,H_c,"http",function(){return this._http}),H_q(0,H_c,"data",function(){return this._data}),H_b}(),H_ha=function(H_a){function H_C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,H_C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}H_k(H_C,"laya.net.Loader",H_j);var H_b=H_C.prototype;return H_b.load=function(H_a,H_b,H_c,H_d,H_e){if(H_a&&""!=H_a||console.error("Loader 加载的url不合法 "+H_a),void 0===H_c&&(H_c=!0),void 0===H_e&&(H_e=!1),0===(this._url=H_a).indexOf("data:image")?this._type=H_b="image":this._type=H_b||(H_b=this.getTypeFromUrl(H_a)),this._cache=H_c,this._data=null,!H_e&&H_C.loadedMap[H_a])return this._data=H_C.loadedMap[H_a],this.event("progress",1),void this.event("complete",this._data);if(H_d&&H_C.setGroup(H_a,H_d),null!=H_C.parserMap[H_b])return this._customParse=!0,void(H_C.parserMap[H_b]instanceof laya.utils.Handler?H_C.parserMap[H_b].runWith(this):H_C.parserMap[H_b].call(null,this));if("image"===H_b||"htmlimage"===H_b||"nativeimage"===H_b)return this._loadImage(H_a);if("ttf"===H_b)return this._loadTTF(H_a);switch(H_b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:H_b}H_C.preLoadedMap[H_a]?this.onLoaded(H_C.preLoadedMap[H_a]):H_g.resMgrLoad(H_a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},H_b.getTypeFromUrl=function(H_a){var H_b=H_$.getFileExtension(H_a);return H_b?H_C.typeMap[H_b]:(console.warn("Not recognize the resources suffix",H_a),"text")},H_b._loadTTF=function(H_a){H_a=H_I.formatURL(H_a);var H_b=new H_H;H_b.complete=H_u.create(this,this.onLoaded),H_b.load(H_a)},H_b._loadImage=function(H_a){H_g.imgMgrLoad(H_a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},H_b._loadImageComplete=function(H_a,H_b,H_c){if(null!=H_c)if(H_c instanceof ArrayBuffer){var H_d=new DataView(H_c),H_e=new laya.webgl.resource.WebGLImage(new Uint8Array(H_c,8),H_a,0,!1,H_d.getUint32(0),H_d.getUint32(4));this.onLoaded(H_e)}else if(H_c instanceof H_ka)H_C.imgMgrSet[H_a]=H_b,H_g.imgMgrLock(H_a,H_C.imgMgrSet[H_a]),this._url=H_a,this.complete(H_c);else{var H_f=-1!=H_a.indexOf(".png",H_a.length-4)?6408:6407;H_e=new laya.webgl.resource.WebGLImage(H_c,H_a,H_f,!1,H_c.width,H_c.height);this.onLoaded(H_e)}else this.event("error","Load image failed")},H_b.imageCancel=function(H_a,H_b,H_c){H_g.imgMgrCancel(H_a,this._onImageCallback)},H_b._loadSound=function(H_a){var H_b=new H_E._soundClass,H_c=this;function H_d(){H_b.offAll()}H_b.on("complete",this,function(){H_d(),H_c.onLoaded(H_b)}),H_b.on("error",this,function(){H_d(),H_b.dispose(),H_c.event("error","Load sound failed")}),H_b.load(H_a)},H_b.onProgress=function(H_a){"atlas"===this._type?this.event("progress",.3*H_a):this.event("progress",H_a)},H_b.onError=function(H_a){this.event("error",H_a)},H_b._loadedComplete=function(H_a,H_b,H_c){if(null!=H_c)switch(this._type){case"atlas":case"plf":case"json":var H_d=new H_P(H_c);this.onLoaded(JSON.parse(H_d.readUTFBytes()));break;case"font":H_d=new H_P(H_c);this.onLoaded(H_$.parseXMLFromString(H_d.readUTFBytes()));break;default:this.onLoaded(H_c)}else this.event("error",H_a)},H_b.onLoaded=function(H_a){var H_b=this._type;if("plf"==H_b)this.parsePLFData(H_a),this.complete(H_a);else if("image"===H_b){var H_c=new H_ka(H_a);H_c.url=this._url,this.complete(H_c)}else if("sound"===H_b||"htmlimage"===H_b||"nativeimage"===H_b)this.complete(H_a);else if("atlas"===H_b){if(!H_a.src&&!H_a._setContext){if(!this._data){if((this._data=H_a).meta&&H_a.meta.image)for(var H_d=H_a.meta.image.split(","),H_e=0<=this._url.indexOf("/")?"/":"\\",H_f=this._url.lastIndexOf(H_e),H_g=0<=H_f?this._url.substr(0,H_f+1):"",H_h=0,H_i=H_d.length;H_h<H_i;H_h++)H_d[H_h]=H_g+H_d[H_h];else H_d=[this._url.replace(".json",".png")];H_d.reverse(),H_a.toLoads=H_d,H_a.pics=[]}return this.event("progress",.3+1/H_d.length*.6),this._loadImage(H_d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(H_a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var H_j=this._data.frames,H_k=this._url.split("?")[0],H_l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:H_k.substring(0,H_k.lastIndexOf("."))+"/",H_m=this._data.pics,H_n=H_I.formatURL(this._url),H_q=H_C.atlasMap[H_n]||(H_C.atlasMap[H_n]=[]);H_q.dir=H_l;var H_r=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var H_s in H_r=parseFloat(this._data.meta.scale),H_j){var H_t,H_u=H_j[H_s],H_v=H_m[H_u.frame.idx?H_u.frame.idx:0],H_w=H_I.formatURL(H_l+H_s);H_v.scaleRate=H_r,H_t=H_ka.create(H_v,H_u.frame.x,H_u.frame.y,H_u.frame.w,H_u.frame.h,H_u.spriteSourceSize.x,H_u.spriteSourceSize.y,H_u.sourceSize.w,H_u.sourceSize.h),H_C.cacheRes(H_w,H_t),H_C.keepCache(this._url,H_l+H_s),H_t.url=H_w,H_q.push(H_w)}else for(H_s in H_j)H_v=H_m[(H_u=H_j[H_s]).frame.idx?H_u.frame.idx:0],H_w=H_I.formatURL(H_l+H_s),H_C.cacheRes(H_w,H_ka.create(H_v,H_u.frame.x,H_u.frame.y,H_u.frame.w,H_u.frame.h,H_u.spriteSourceSize.x,H_u.spriteSourceSize.y,H_u.sourceSize.w,H_u.sourceSize.h)),H_C.loadedMap[H_w].url=H_w,H_C.keepCache(this._url,H_l+H_s),H_q.push(H_w);delete this._data.pics,this.complete(this._data)}else if("font"==H_b){if(!H_a.src)return this._data=H_a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var H_x=new H_D;H_x.parseFont(this._data,H_a);var H_y=this._url.split(".fnt")[0].split("/"),H_z=H_y[H_y.length-1];H_sa.registerBitmapFont(H_z,H_x),this._data=H_x,this.complete(this._data)}else if("pkm"==H_b){var H_A=H_ya.create(H_a,this._url),H_B=new H_ka(H_A);H_B.url=this._url,this.complete(H_B)}else this.complete(H_a)},H_b.parsePLFData=function(H_a){var H_b,H_c,H_d;for(H_b in H_a)switch(H_d=H_a[H_b],H_b){case"json":case"text":for(H_c in H_d)H_C.preLoadedMap[H_I.formatURL(H_c)]=H_d[H_c];break;default:for(H_c in H_d)H_C.preLoadedMap[H_I.formatURL(H_c)]=H_d[H_c]}},H_b.complete=function(H_a){this._data=H_a,this._customParse?this.event("loaded",H_a instanceof Array?[H_a]:H_a):(H_C._loaders.push(this),H_C._isWorking||H_C.checkNext())},H_b.endLoad=function(H_a){H_a&&(this._data=H_a),this._cache&&H_C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},H_q(0,H_b,"url",function(){return this._url}),H_q(0,H_b,"data",function(){return this._data}),H_q(0,H_b,"cache",function(){return this._cache}),H_q(0,H_b,"type",function(){return this._type}),H_C.checkNext=function(){H_C._isWorking=!0;for(var H_a=H_O.now();H_C._startIndex<H_C._loaders.length;)if(H_O.now(),H_C._loaders[H_C._startIndex].endLoad(),H_C._startIndex++,H_O.now()-H_a>H_C.maxTimeOut)return console.warn("loader callback cost a long time:"+(H_O.now()-H_a)+" url="+H_C._loaders[H_C._startIndex-1].url),void H_z.timer.frameOnce(1,null,H_C.checkNext);H_C._loaders.length=0,H_C._startIndex=0,H_C._isWorking=!1},H_C.clearRes=function(H_a,H_b){if(null!=H_a){void 0===H_b&&(H_b=!1),H_a=H_I.formatURL(H_a);var H_c=H_C.getAtlas(H_a);if(H_c){for(var H_d=0,H_e=H_c.length;H_d<H_e;H_d++){var H_f=H_c[H_d],H_g=H_C.getRes(H_f);delete H_C.loadedMap[H_f],H_C.clearCache(H_a.substring(H_I.basePath.length),H_f.substring(H_I.basePath.length)),H_g&&H_g.destroy(H_b)}H_c.length=0,delete H_C.atlasMap[H_a],delete H_C.loadedMap[H_a]}else{var H_h=H_C.loadedMap[H_a];H_h&&(delete H_C.loadedMap[H_a],H_h instanceof laya.resource.Texture&&H_h.bitmap&&H_h.destroy(H_b))}}},H_C.clearTextureRes=function(H_a){H_a=H_I.formatURL(H_a);var H_b=laya.net.Loader.getAtlas(H_a),H_c=H_b&&0<H_b.length?laya.net.Loader.getRes(H_b[0]):laya.net.Loader.getRes(H_a);H_c&&H_c.bitmap&&(H_J.isConchApp&&!H_J.isConchWebGL?H_c.bitmap.source.releaseTexture&&H_c.bitmap.source.releaseTexture():null==H_c.bitmap._atlaser&&H_c.bitmap.releaseResource(!0))},H_C.getRes=function(H_a){return H_C.loadedMap[H_I.formatURL(H_a)]},H_C.getAtlas=function(H_a){return H_C.atlasMap[H_I.formatURL(H_a)]},H_C.cacheRes=function(H_a,H_b){H_a=H_I.formatURL(H_a),null!=H_C.loadedMap[H_a]?console.warn("Resources already exist,is repeated loading:",H_a):H_C.loadedMap[H_a]=H_b},H_C.setGroup=function(H_a,H_b){H_C.groupMap[H_b]||(H_C.groupMap[H_b]=[]),H_C.groupMap[H_b].push(H_a)},H_C.clearResByGroup=function(H_a){if(H_C.groupMap[H_a]){var H_b=H_C.groupMap[H_a],H_c=0,H_d=H_b.length;for(H_c=0;H_c<H_d;H_c++)H_C.clearRes(H_b[H_c]);H_b.length=0}},H_C.keepCache=function(H_a,H_b){if(H_a&&H_b){var H_c=H_C.cacheSet[H_b];H_c?-1==H_c.indexOf(H_a)&&H_c.push(H_a):H_C.cacheSet[H_b]=[H_a]}},H_C.clearCache=function(H_a,H_b){if(H_a&&H_b){var H_c=H_C.cacheSet[H_b];if(H_c){var H_d=H_c.indexOf(H_a);if(-1!==H_d){var H_e=H_c.length-1;0==H_e?(delete H_C.cacheSet[H_b],0<H_C.imgMgrSet[H_b]?H_g.imgMgrFree(H_b,H_C.imgMgrSet[H_b]):H_C.clearRes(H_b,!0)):(H_c[H_d]=H_c[H_e],H_c.length=H_e)}}}},H_C.saveObject=function(H_a,H_b,H_c){if(H_b&&H_a){var H_d=H_C.objectSet[H_a];H_d?(console.warn("Loader.saveObject: "+H_a),H_d[0]=H_b,H_d[1]=H_c):H_C.objectSet[H_a]=[H_b,H_c,[]]}},H_C.findObject=function(H_a){if(H_a){var H_b=H_C.objectSet[H_a];if(H_b)return H_b[0]}return null},H_C.keepObject=function(H_a,H_b){if(H_a&&H_b){var H_c=H_C.objectSet[H_b];H_c&&-1===H_c[2].indexOf(H_a)&&H_c[2].push(H_a)}},H_C.clearObject=function(H_a,H_b){if(H_a&&H_b){var H_c=H_C.objectSet[H_b];if(H_c){var H_d=H_c[2],H_e=H_d.indexOf(H_a);if(-1!==H_e){var H_f=H_d.length-1;0==H_f?(delete H_C.objectSet[H_b],H_c[1]&&H_c[1].call(null,H_c[0])):(H_d[H_e]=H_d[H_f],H_d.length=H_f)}}}},H_C.TEXT="text",H_C.JSON="json",H_C.XML="xml",H_C.BUFFER="arraybuffer",H_C.IMAGE="image",H_C.SOUND="sound",H_C.ATLAS="atlas",H_C.FONT="font",H_C.TTF="ttf",H_C.PLF="plf",H_C.PKM="pkm",H_C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},H_C.parserMap={},H_C.groupMap={},H_C.maxTimeOut=100,H_C.loadedMap={},H_C.preLoadedMap={},H_C.atlasMap={},H_C._loaders=[],H_C._isWorking=!1,H_C._startIndex=0,H_C.imgCache={},H_C.cacheSet={},H_C.objectSet={},H_C.imgMgrSet={},H_C}(),H_ia=function(H_a){var H_m;function H_n(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},H_n.__super.call(this);for(var H_a=0;H_a<this._maxPriority;H_a++)this._resInfos[H_a]=[]}H_k(H_n,"laya.net.LoaderManager",H_j);var H_b=H_n.prototype;return H_b.create=function(H_a,H_c,H_b,H_d,H_e,H_f,H_g,H_h){if(null==H_f&&(H_f=2),null==H_g&&(H_g=!0),H_a instanceof Array){var H_i=H_a,H_j=H_i.length,H_k=0;if(H_b)var H_l=H_u.create(H_b.caller,H_b.method,H_b.args,!1);for(var H_m=0;H_m<H_j;H_m++){var H_n=H_i[H_m];"string"==typeof H_n&&(H_n=H_i[H_m]={url:H_n}),H_n.progress=0}for(H_m=0;H_m<H_j;H_m++){H_n=H_i[H_m];var H_q=H_b?H_u.create(null,H_t,[H_n],!1):null,H_r=H_b||H_c?H_u.create(null,H_s,[H_n]):null;this._create(H_n.url,H_r,H_q,H_n.clas||H_d,H_n.params||H_e,null!=H_n.priority&&0<=H_n.priority?H_n.priority:H_f,H_g,H_n.group||H_h)}function H_s(H_a,H_b){H_k++,H_a.progress=1,H_k===H_j&&H_c&&H_c.run()}function H_t(H_a,H_b){H_a.progress=H_b;for(var H_c=0,H_d=0;H_d<H_j;H_d++){H_c+=H_i[H_d].progress}var H_e=H_c/H_j;H_l.runWith(H_e)}return!0}return this._create(H_a,H_c,H_b,H_d,H_e,H_f,H_g,H_h)},H_b._create=function(H_b,H_c,H_a,H_d,H_e,H_f,H_g,H_h){H_b&&""!=H_b||console.error("加载的url不合法 "+H_b),null==H_f&&(H_f=2),null==H_g&&(H_g=!0);var H_i=H_I.formatURL(H_b),H_j=this.getRes(H_i);if(H_j)!H_j.hasOwnProperty("loaded")||H_j.loaded?(H_a&&H_a.runWith(1),H_c&&H_c.run()):H_c&&H_z.loader._createListener(H_b,H_c.caller,H_c.method,H_c.args,!0,!1);else{var H_k=H_$.getFileExtension(H_b),H_l=H_n.createMap[H_k];if(!H_l)throw new Error("LoaderManager:unknown file("+H_b+") extension with: "+H_k+".");H_d||(H_d=H_l[0]);var H_m=H_l[1];if("atlas"==H_k)this.load(H_b,H_c,H_a,H_m,H_f,H_g);else{H_d===H_ka&&(H_m="htmlimage"),(H_j=H_d?new H_d:null).hasOwnProperty("_loaded")&&(H_j._loaded=!1),H_j._setUrl(H_b),H_h&&H_j._setGroup(H_h),this._createLoad(H_j,H_b,H_u.create(null,function(H_a){H_j&&!H_j.destroyed&&H_a&&H_j.onAsynLoaded.call(H_j,H_b,H_a,H_e),H_c&&H_c.run();H_z.loader.event(H_b)}),H_a,H_m,H_f,!1,H_h,!0),H_g&&this.cacheRes(H_i,H_j)}}return H_j},H_b.load=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){H_a&&""!=H_a||console.error("加载的url不合法 "+H_a);var H_i=this;if(null==H_e&&(H_e=2),null==H_f&&(H_f=!0),void 0===H_h&&(H_h=!1),H_a instanceof Array)return this._loadAssets(H_a,H_b,H_c,H_d,H_e,H_f,H_g);var H_j=H_ha.getRes(H_a);if(null!=H_j)H_z.timer.frameOnce(1,null,function(){H_c&&H_c.runWith(1),H_b&&H_b.runWith(H_j),H_i._loaderCount||H_i.event("complete")});else{var H_k=H_n._resMap[H_a];H_k?(H_b&&H_k._createListener("complete",H_b.caller,H_b.method,H_b.args,!1,!1),H_c&&H_k._createListener("progress",H_c.caller,H_c.method,H_c.args,!1,!1)):((H_k=this._infoPool.length?this._infoPool.pop():new H_m).url=H_a,H_k.clas=null,H_k.type=H_d,H_k.cache=H_f,H_k.group=H_g,H_k.ignoreCache=H_h,H_k.priority=H_e,H_b&&H_k.on("complete",H_b.caller,H_b.method,H_b.args),H_c&&H_k.on("progress",H_c.caller,H_c.method,H_c.args),H_n._resMap[H_a]=H_k,H_e=H_e<this._maxPriority?0<=H_e?H_e:0:this._maxPriority-1,this._resInfos[H_e].push(H_k),this._next())}return this},H_b.cancel=function(H_a,H_b,H_c){if(H_j=H_n._resMap[H_a]){H_b&&H_j.off("complete",H_b.caller,H_b.method,!1),H_c&&H_j.off("progress",H_c.caller,H_c.method,!1);var H_d=H_j.getListener("complete"),H_e=H_j.getListener("progress");if(!(H_d&&H_d.head||H_e&&H_e.head)){if(H_j.loader){var H_f=H_j.loader;H_f.imageCancel(H_a),H_f.offAll(),H_f._data=null,H_f._customParse=!1,H_f._url=null,H_f._class=null,H_f._type=null,this._loaders.push(H_f),this._loaderCount--,delete this._loaderMap[H_j.url]}for(var H_g=0;H_g<this._maxPriority;H_g++)for(var H_h=this._resInfos[H_g],H_i=H_h.length-1;-1<H_i;H_i--){var H_j;(H_j=H_h[H_i])&&H_j.url===H_a&&(H_h[H_i]=null,H_j.destroy(),H_j.offAll(),this._infoPool.push(H_j))}delete H_n._resMap[H_a],this._next()}}},H_b._createLoad=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){var H_j=this;if(null==H_f&&(H_f=2),null==H_g&&(H_g=!0),void 0===H_i&&(H_i=!1),H_b instanceof Array)return this._loadAssets(H_b,H_c,H_d,H_e,H_f,H_g,H_h);var H_k=H_ha.getRes(H_b);if(null!=H_k)H_z.timer.frameOnce(1,null,function(){H_d&&H_d.runWith(1),H_c&&H_c.runWith(H_k),H_j._loaderCount||H_j.event("complete")});else{var H_l=H_n._resMap[H_b];H_l?(H_c&&H_l._createListener("complete",H_c.caller,H_c.method,H_c.args,!1,!1),H_d&&H_l._createListener("progress",H_d.caller,H_d.method,H_d.args,!1,!1)):((H_l=this._infoPool.length?this._infoPool.pop():new H_m).url=H_b,H_l.clas=H_a,H_l.type=H_e,H_l.cache=H_g,H_l.group=H_h,H_l.ignoreCache=H_i,H_l.priority=H_f,H_c&&H_l.on("complete",H_c.caller,H_c.method,H_c.args),H_d&&H_l.on("progress",H_d.caller,H_d.method,H_d.args),H_n._resMap[H_b]=H_l,H_f=H_f<this._maxPriority?0<=H_f?H_f:0:this._maxPriority-1,this._resInfos[H_f].push(H_l),this._next())}return this},H_b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var H_a=0;H_a<this._maxPriority;H_a++)for(var H_b=this._resInfos[H_a];0<H_b.length;){var H_c=H_b.shift();if(H_c)return this._doLoad(H_c)}this._loaderCount||this.event("complete")}},H_b._doLoad=function(H_b){var H_c=this._loaders.length?this._loaders.pop():new H_ha;this._loaderCount++,(this._loaderMap[H_b.url]=H_c).on("complete",null,H_e),H_c.on("progress",null,function(H_a){H_b.event("progress",H_a)}),H_c.on("error",null,function(H_a){H_e(null)}),H_b.loader=H_c;var H_d=this;function H_e(H_a){H_c.offAll(),H_c._data=null,H_c._customParse=!1,H_c._url=null,H_c._class=null,H_c._type=null,H_d._loaders.push(H_c),H_d._loaderCount--,delete H_d._loaderMap[H_b.url],H_d._endLoad(H_b,H_a instanceof Array?[H_a]:H_a),H_d._next()}H_c._class=H_b.clas,1<=H_b.priority?(H_c.priority=H_b.priority,H_c.realTime=!1):(H_c.priority=0,H_c.realTime=!0),H_c.load(H_b.url,H_b.type,H_b.cache,H_b.group,H_b.ignoreCache)},H_b._endLoad=function(H_a,H_b){var H_c=H_a.url;if(null==H_b){var H_d=this._failRes[H_c]||0;if(H_d<this.retryNum)return console.warn("[warn]Retry to load:",H_c),this._failRes[H_c]=H_d+1,void H_z.timer.once(this.retryDelay,this,this._addReTry,[H_a],!1);console.warn("[error]Failed to load:",H_c),this.event("error",H_c)}this._failRes[H_c]&&(this._failRes[H_c]=0),delete H_n._resMap[H_c],H_a.event("complete",H_b),H_a.destroy(),H_a.offAll(),this._infoPool.push(H_a)},H_b._addReTry=function(H_a){this._resInfos[this._maxPriority-1].push(H_a),this._next()},H_b.clearRes=function(H_a,H_b){void 0===H_b&&(H_b=!1),H_ha.clearRes(H_a,H_b)},H_b.getRes=function(H_a){return H_ha.getRes(H_a)},H_b.cacheRes=function(H_a,H_b){H_ha.cacheRes(H_a,H_b)},H_b.clearTextureRes=function(H_a){H_ha.clearTextureRes(H_a)},H_b.setGroup=function(H_a,H_b){H_ha.setGroup(H_a,H_b)},H_b.clearResByGroup=function(H_a){H_ha.clearResByGroup(H_a)},H_b.clearUnLoaded=function(){for(var H_a=0;H_a<this._maxPriority;H_a++){for(var H_b=this._resInfos[H_a],H_c=H_b.length-1;-1<H_c;H_c--){var H_d=H_b[H_c];H_d&&(H_d.destroy(),H_d.offAll(),this._infoPool.push(H_d))}H_b.length=0}this._loaderCount=0,H_n._resMap={}},H_b.cancelLoadByUrls=function(H_a){if(H_a)for(var H_b=0,H_c=H_a.length;H_b<H_c;H_b++)this.cancelLoadByUrl(H_a[H_b])},H_b.cancelLoadByUrl=function(H_a){for(var H_b=0;H_b<this._maxPriority;H_b++)for(var H_c=this._resInfos[H_b],H_d=H_c.length-1;-1<H_d;H_d--){var H_e=H_c[H_d];H_e&&H_e.url===H_a&&(H_c[H_d]=null,H_e.destroy(),H_e.offAll(),this._infoPool.push(H_e))}H_n._resMap[H_a]&&delete H_n._resMap[H_a]},H_b._loadAssets=function(H_a,H_c,H_g,H_b,H_d,H_e,H_f){null==H_d&&(H_d=2),null==H_e&&(H_e=!0);for(var H_h=H_a.length,H_i=0,H_j=0,H_k=[],H_l=!0,H_m=0;H_m<H_h;H_m++){var H_n=H_a[H_m];if(!H_n)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+H_a);"string"==typeof H_n&&(H_n={url:H_n,type:H_b,size:1,priority:H_d}),H_n.size||(H_n.size=1),H_n.progress=0,H_j+=H_n.size,H_k.push(H_n);var H_q=H_g?H_u.create(null,H_t,[H_n],!1):null,H_r=H_c||H_g?H_u.create(null,H_s,[H_n]):null;this.load(H_n.url,H_r,H_q,H_n.type,null!=H_n.priority&&0<=H_n.priority?H_n.priority:2,H_e,H_n.group||H_f)}function H_s(H_a,H_b){H_i++,H_a.progress=1,H_b||(H_l=!1),H_i===H_h&&H_c&&H_c.runWith(H_l)}function H_t(H_a,H_b){if(null!=H_g){H_a.progress=H_b;for(var H_c=0,H_d=0;H_d<H_k.length;H_d++){var H_e=H_k[H_d];H_c+=H_e.size*H_e.progress}var H_f=H_c/H_j;H_g.runWith(H_f)}}return this},H_n.cacheRes=function(H_a,H_b){H_ha.cacheRes(H_a,H_b)},H_n._resMap={},H_i(H_n,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),H_n.__init$=function(){H_m=function(H_a){function H_b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,H_b.__super.call(this)}return H_k(H_b,"",H_j),H_b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},H_b}()},H_n}(),H_ja=(function(H_a){function H_e(H_a){H_e.__super.call(this),H_a||(H_a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var H_b=0,H_c=0,H_d=0;H_d<20;H_d++)H_d%5!=4?this._mat[H_b++]=H_a[H_d]:this._alpha[H_c++]=H_a[H_d];this._action=H_F.createFilterAction(32),this._action.data=this}H_k(H_e,"laya.filters.ColorFilter",H_t);var H_b=H_e.prototype;H_z.imps(H_b,{"laya.filters.IFilter":!0}),H_b.callNative=function(H_a){H_a._$P.cf=this;H_a.conchModel&&H_a.conchModel.setFilterMatrix&&H_a.conchModel.setFilterMatrix(this._mat,this._alpha)},H_q(0,H_b,"type",function(){return 32}),H_q(0,H_b,"action",function(){return this._action})}(),function(H_a){function H_d(H_a,H_b,H_c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===H_b&&(H_b=0),H_d.__super.call(this),this._byteClass=H_c||H_P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,H_a&&0<H_b&&H_b<65535&&this.connect(H_a,H_b)}H_k(H_d,"laya.net.Socket",H_j);var H_b=H_d.prototype;H_b.connect=function(H_a,H_b){var H_c="ws://"+H_a+":"+H_b;H_c="https:"==H_O.window.location.protocol?"wss://"+H_a+":"+H_b:"ws://"+H_a+":"+H_b,this.connectByUrl(H_c)},H_b.connectByUrl=function(H_a){var H_b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new H_O.window.WebSocket(H_a,this.protocols):this._socket=new H_O.window.WebSocket(H_a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(H_a){H_b._onOpen(H_a)},this._socket.onmessage=function(H_a){H_b._onMessage(H_a)},this._socket.onclose=function(H_a){H_b._onClose(H_a)},this._socket.onerror=function(H_a){H_b._onError(H_a)}},H_b.cleanSocket=function(){try{this._socket.close()}catch(H_a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},H_b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(H_a){}},H_b._onOpen=function(H_a){this._connected=!0,this.event("open",H_a)},H_b._onMessage=function(H_a){if(H_a&&H_a.data){var H_b=H_a.data;if(this.disableInput&&H_b)this.event("message",H_b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var H_c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,H_b&&("string"==typeof H_b?this._input.writeUTFBytes(H_b):this._input.writeArrayBuffer(H_b),this._addInputPosition=this._input.pos,this._input.pos=H_c),this.event("message",H_b)}}},H_b._onClose=function(H_a){this._connected=!1,this.event("close",H_a)},H_b._onError=function(H_a){this.event("error",H_a)},H_b.send=function(H_a){this._socket.send(H_a)},H_b.flush=function(){if(this._output&&0<this._output.length){var H_b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(H_a){H_b=H_a}this._output.endian=this.endian,this._output.clear(),H_b&&this.event("error",H_b)}},H_q(0,H_b,"input",function(){return this._input}),H_q(0,H_b,"output",function(){return this._output}),H_q(0,H_b,"connected",function(){return this._connected}),H_q(0,H_b,"endian",function(){return this._endian},function(H_a){this._endian=H_a,null!=this._input&&(this._input.endian=H_a),null!=this._output&&(this._output.endian=H_a)}),H_d.LITTLE_ENDIAN="littleEndian",H_d.BIG_ENDIAN="bigEndian"}(),function(H_a){function H_h(){H_h.__super.call(this),this._$1__id=++H_h._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(H_h._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,H_N.currentResourceManager&&H_N.currentResourceManager.addResource(this)}H_k(H_h,"laya.resource.Resource",H_j);var H_b=H_h.prototype;return H_z.imps(H_b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),H_b._setUrl=function(H_a){var H_b;this._url!==H_a&&(this._url&&((H_b=H_h._urlResourcesMap[this._url]).splice(H_b.indexOf(this),1),0===H_b.length&&delete H_h._urlResourcesMap[this._url]),H_a&&((H_b=H_h._urlResourcesMap[H_a])||(H_h._urlResourcesMap[H_a]=H_b=[]),H_b.push(this)),this._url=H_a)},H_b._getGroup=function(){return this._group},H_b._setGroup=function(H_a){var H_b;this._group!==H_a&&(this._group&&((H_b=H_h._groupResourcesMap[this._group]).splice(H_b.indexOf(this),1),0===H_b.length&&delete H_h._groupResourcesMap[this._group]),H_a&&((H_b=H_h._groupResourcesMap[H_a])||(H_h._groupResourcesMap[H_a]=H_b=[]),H_b.push(this)),this._group=H_a)},H_b._addReference=function(){this._referenceCount++},H_b._removeReference=function(){this._referenceCount--},H_b._clearReference=function(){this._referenceCount=0},H_b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},H_b.recreateResource=function(){this.completeCreate()},H_b.disposeResource=function(){},H_b.activeResource=function(H_a){void 0===H_a&&(H_a=!1),this._lastUseFrameCount=H_X.loopCount,!this._destroyed&&this.__loaded&&(this._released||H_a)&&this.recreateResource()},H_b.releaseResource=function(H_a){return void 0===H_a&&(H_a=!0),!(!H_a&&this.lock)&&(!(this._released&&!H_a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},H_b.onAsynLoaded=function(H_a,H_b,H_c){throw new Error("Resource: must override this function!")},H_b.destroy=function(){var H_a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete H_h._idResourcesMap[this.id],this._url&&((H_a=H_h._urlResourcesMap[this._url])&&(H_a.splice(H_a.indexOf(this),1),0===H_a.length&&delete H_h._urlResourcesMap[this.url]),H_ha.clearRes(this._url),this.__loaded||H_F.cancelLoadByUrl(this._url)),this._group&&((H_a=H_h._groupResourcesMap[this._group]).splice(H_a.indexOf(this),1),0===H_a.length&&delete H_h._groupResourcesMap[this.url]))},H_b.completeCreate=function(){this._released=!1,this.event("recovered",this)},H_b.dispose=function(){this.destroy()},H_q(0,H_b,"memorySize",function(){return this._memorySize},function(H_a){var H_b=H_a-this._memorySize;this._memorySize=H_a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,H_b),this.resourceManager&&this.resourceManager.addSize(H_b)}),H_q(0,H_b,"_loaded",null,function(H_a){this.__loaded=H_a}),H_q(0,H_b,"loaded",function(){return this.__loaded}),H_q(0,H_b,"id",function(){return this._$1__id}),H_q(0,H_b,"destroyed",function(){return this._destroyed}),H_q(0,H_b,"group",function(){return this._getGroup()},function(H_a){this._setGroup(H_a)}),H_q(0,H_b,"resourceManager",function(){return this._resourceManager}),H_q(0,H_b,"url",function(){return this._url}),H_q(0,H_b,"released",function(){return this._released}),H_q(0,H_b,"referenceCount",function(){return this._referenceCount}),H_h.getResourceByID=function(H_a){return H_h._idResourcesMap[H_a]},H_h.getResourceByURL=function(H_a,H_b){return void 0===H_b&&(H_b=0),null==H_h._urlResourcesMap[H_a]?null:H_h._urlResourcesMap[H_a][H_b]},H_h.getResourceCountByURL=function(H_a){return H_h._urlResourcesMap[H_a].length},H_h.destroyUnusedResources=function(H_a){var H_b;if(H_a){var H_c=H_h._groupResourcesMap[H_a];if(H_c)for(var H_d=H_c.slice(),H_e=0,H_f=H_d.length;H_e<H_f;H_e++)(H_b=H_d[H_e]).lock||0!==H_b._referenceCount||H_b.destroy()}else for(var H_g in H_h._idResourcesMap)(H_b=H_h._idResourcesMap[H_g]).lock||0!==H_b._referenceCount||H_b.destroy()},H_h._uniqueIDCounter=0,H_h._idResourcesMap={},H_h._urlResourcesMap={},H_h._groupResourcesMap={},H_h}()),H_ka=function(H_a){function H_C(H_a,H_b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,H_C.__super.call(this),H_a&&null!=H_a._addReference&&H_a._addReference(),this.setTo(H_a,H_b)}H_k(H_C,"laya.resource.Texture",H_j);var H_b=H_C.prototype;return H_b._setUrl=function(H_a){this.url=H_a},H_b.setTo=function(H_a,H_b){if(H_a instanceof H_g.HTMLElement){var H_c=H_va.create("2D",H_a);this.bitmap=H_c}else this.bitmap=H_a;if(this.uv=H_b||H_C.DEF_UV,H_a){this._w=H_a.width,this._h=H_a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var H_d=this;if(this._loaded)H_F.addToAtlas&&H_F.addToAtlas(H_d);else{var H_e=H_a;H_e instanceof laya.resource.HTMLImage&&H_e.image&&H_e.image.addEventListener("load",function(H_a){H_F.addToAtlas&&H_F.addToAtlas(H_d)},!1)}}},H_b.active=function(){this.bitmap&&this.bitmap.activeResource()},H_b.destroy=function(H_a){if(void 0===H_a&&(H_a=!1),this.alphaTexture&&(this.alphaTexture.destroy(H_a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var H_b=this.bitmap;H_a?(H_J.isConchApp&&H_b.source&&H_b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H_b.dispose(),H_b._clearReference()):(H_b._removeReference(),0==H_b.referenceCount&&(H_J.isConchApp&&H_b.source&&H_b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H_b.dispose())),this.url&&this===H_z.loader.getRes(this.url)&&H_z.loader.clearRes(this.url,H_a),this._loaded=!1}},H_b.load=function(H_a){var H_b=this;this._loaded=!1,H_a=H_I.customFormat(H_a);var H_c=this.bitmap||(this.bitmap=H_ya.create(H_a));H_c.uri=H_a,H_c&&H_c._addReference();var H_d=this;H_c.onload=function(){H_c.onload=null,H_d._loaded=!0,H_b.sourceWidth=H_b._w=H_c.width,H_b.sourceHeight=H_b._h=H_c.height,H_d.event("loaded",this),H_F.addToAtlas&&H_F.addToAtlas(H_d)}},H_b.addTextureToAtlas=function(H_a){H_F.addTextureToAtlas(this)},H_b.getPixels=function(H_a,H_b,H_c,H_d){if(H_J.isConchApp){var H_e=this.bitmap;if(H_e.source&&H_e.source.getImageData){var H_f=H_e.source.getImageData(H_a,H_b,H_c,H_d),H_g=new Uint8Array(H_f);return Array.from(H_g)}return null}return H_J.isWebGL?H_F.getTexturePixels(this,H_a,H_b,H_c,H_d):(H_O.canvas.size(H_c,H_d),H_O.canvas.clear(),H_O.context.drawTexture(this,-H_a,-H_b,this.width,this.height,0,0),H_O.context.getImageData(0,0,H_c,H_d).data)},H_b.onAsynLoaded=function(H_a,H_b){if(H_b){if("function"!=typeof H_b._addReference)throw new Error("bitmap._addReference is not a function. "+H_b.className+" "+typeof H_b._addReference+" "+H_b.constructor);H_b._addReference()}this.setTo(H_b,this.uv),this._loaded&&this.event("loaded",this)},H_q(0,H_b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),H_q(0,H_b,"loaded",function(){return this._loaded}),H_q(0,H_b,"released",function(){return!this.bitmap||this.bitmap.released}),H_q(0,H_b,"width",function(){return this._w?this._w:this.uv&&this.uv!==H_C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(H_a){this._w=H_a,this.sourceWidth||(this.sourceWidth=H_a)}),H_q(0,H_b,"repeat",function(){return!H_J.isWebGL||!this.bitmap||this.bitmap.repeat},function(H_a){H_a&&H_J.isWebGL&&this.bitmap&&(this.bitmap.repeat=H_a)&&(this.bitmap.enableMerageInAtlas=!1)}),H_q(0,H_b,"height",function(){return this._h?this._h:this.uv&&this.uv!==H_C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(H_a){this._h=H_a,this.sourceHeight||(this.sourceHeight=H_a)}),H_q(0,H_b,"isLinearSampling",function(){return!H_J.isWebGL||9728!=this.bitmap.minFifter},function(H_a){!H_a&&H_J.isWebGL&&(H_a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),H_C.moveUV=function(H_a,H_b,H_c){for(var H_d=0;H_d<8;H_d+=2)H_c[H_d]+=H_a,H_c[H_d+1]+=H_b;return H_c},H_C.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){void 0===H_f&&(H_f=0),void 0===H_g&&(H_g=0),void 0===H_h&&(H_h=0),void 0===H_i&&(H_i=0);var H_j=H_a instanceof laya.resource.Texture,H_k=H_j?H_a.uv:H_C.DEF_UV,H_l=H_j?H_a.bitmap:H_a,H_m=H_F.isAtlas(H_l);if(H_m){var H_n=H_l._atlaser,H_q=H_a._atlasID;if(-1==H_q)throw new Error("create texture error");H_l=H_n._inAtlasTextureBitmapValue[H_q],H_k=H_n._inAtlasTextureOriUVValue[H_q]}var H_r=new H_C(H_l,null);H_l.width&&H_b+H_d>H_l.width&&(H_d=H_l.width-H_b),H_l.height&&H_c+H_e>H_l.height&&(H_e=H_l.height-H_c),H_r.width=H_d,H_r.height=H_e,H_r.offsetX=H_f,H_r.offsetY=H_g,H_r.sourceWidth=H_h||H_d,H_r.sourceHeight=H_i||H_e;var H_s=1/H_l.width,H_t=1/H_l.height;H_b*=H_s,H_c*=H_t,H_d*=H_s,H_e*=H_t;var H_u=H_r.uv[0],H_v=H_r.uv[1],H_w=H_r.uv[4],H_x=H_r.uv[5],H_y=H_w-H_u,H_z=H_x-H_v,H_A=H_C.moveUV(H_k[0],H_k[1],[H_b,H_c,H_b+H_d,H_c,H_b+H_d,H_c+H_e,H_b,H_c+H_e]);H_r.uv=[H_u+H_A[0]*H_y,H_v+H_A[1]*H_z,H_w-(1-H_A[2])*H_y,H_v+H_A[3]*H_z,H_w-(1-H_A[4])*H_y,H_x-(1-H_A[5])*H_z,H_u+H_A[6]*H_y,H_x-(1-H_A[7])*H_z],H_m&&H_r.addTextureToAtlas();var H_B=H_l.scaleRate;return H_B&&1!=H_B?(H_r.sourceWidth/=H_B,H_r.sourceHeight/=H_B,H_r.width/=H_B,H_r.height/=H_B,H_r.scaleRate=H_B,H_r.offsetX/=H_B,H_r.offsetY/=H_B):H_r.scaleRate=1,H_r},H_C.createFromTexture=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_a.scaleRate;1!=H_f&&(H_b*=H_f,H_c*=H_f,H_d*=H_f,H_e*=H_f);var H_g=H_B.TEMP.setTo(H_b-H_a.offsetX,H_c-H_a.offsetY,H_d,H_e),H_h=H_g.intersection(H_C._rect1.setTo(0,0,H_a.width,H_a.height),H_C._rect2);if(!H_h)return null;var H_i=H_C.create(H_a,H_h.x,H_h.y,H_h.width,H_h.height,H_h.x-H_g.x,H_h.y-H_g.y,H_d,H_e);if(H_i.bitmap&&H_i.bitmap._removeReference)return H_i.bitmap._removeReference(),H_i;var H_j="bitmap:"+(H_i.bitmap?H_i.bitmap.constructor?H_i.bitmap.constructor.name:H_i.bitmap.__className:"")+", url:"+(H_a.url+" | "+(H_i.bitmap?H_i.bitmap.url:H_a.url))+", x="+H_b+",y="+H_c+",width="+H_d+",height="+H_e+", result="+(H_h?H_h.x+","+H_h.y+","+H_h.width+","+H_h.height:"null")+", rect="+H_g.x+","+H_g.y+","+H_g.width+","+H_g.height;throw new Error("报错：bitmap._removeReference is not a function  "+H_j)},H_C.DEF_UV=[0,0,1,0,1,1,0,1],H_C.INV_UV=[0,1,1,1,1,0,0,0],H_C._rect1=new H_B,H_C._rect2=new H_B,H_C}(),H_a=function(H_a){var H_h;function H_f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,H_f.__super.call(this)}H_k(H_f,"laya.utils.TimeLine",H_j);var H_b=H_f.prototype;return H_b.to=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=0),this._create(H_a,H_b,H_c,H_d,H_e,!0)},H_b.from=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=0),this._create(H_a,H_b,H_c,H_d,H_e,!1)},H_b._create=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_W.getItemByClass("tweenData",H_h);return H_g.isTo=H_f,H_g.type=0,H_g.target=H_a,H_g.duration=H_c,H_g.data=H_b,H_g.startTime=this._startTime+H_e,H_g.endTime=H_g.startTime+H_g.duration,H_g.ease=H_d,this._startTime=Math.max(H_g.endTime,this._startTime),this._tweenDataList.push(H_g),this._startTimeSort=!0,this._endTimeSort=!0,this},H_b.addLabel=function(H_a,H_b){var H_c=H_W.getItemByClass("tweenData",H_h);return H_c.type=1,H_c.data=H_a,H_c.endTime=H_c.startTime=this._startTime+H_b,this._labelDic||(this._labelDic={}),this._labelDic[H_a]=H_c,this._tweenDataList.push(H_c),this},H_b.removeLabel=function(H_a){if(this._labelDic&&this._labelDic[H_a]){var H_b=this._labelDic[H_a];if(H_b){var H_c=this._tweenDataList.indexOf(H_b);-1<H_c&&this._tweenDataList.splice(H_c,1)}delete this._labelDic[H_a]}},H_b.gotoTime=function(H_a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var H_b,H_c,H_d,H_e;for(var H_f in this._firstTweenDic)if(H_c=this._firstTweenDic[H_f])for(var H_g in H_c)H_c.diyTarget.hasOwnProperty(H_g)&&(H_c.diyTarget[H_g]=H_c[H_g]);for(H_f in this._tweenDic)(H_b=this._tweenDic[H_f]).clear(),delete this._tweenDic[H_f];if(this._index=0,this._gidIndex=0,this._currTime=H_a,this._lastTime=H_O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=H_d=this._tweenDataList.concat(),H_d.sort(function(H_a,H_b){return H_a.endTime>H_b.endTime?1:H_a.endTime<H_b.endTime?-1:0})}else H_d=this._endTweenDataList;for(var H_h=0,H_i=H_d.length;H_h<H_i;H_h++)if(0==(H_e=H_d[H_h]).type){if(!(H_a>=H_e.endTime))break;this._index=Math.max(this._index,H_h+1);var H_j=H_e.data;if(H_e.isTo)for(var H_k in H_j)H_e.target[H_k]=H_j[H_k]}for(H_h=0,H_i=this._tweenDataList.length;H_h<H_i;H_h++)0==(H_e=this._tweenDataList[H_h]).type&&H_a>=H_e.startTime&&H_a<H_e.endTime&&(this._index=Math.max(this._index,H_h+1),this._gidIndex++,(H_b=H_W.getItemByClass("tween",H_Z))._create(H_e.target,H_e.data,H_e.duration,H_e.ease,H_u.create(this,this._animComplete,[this._gidIndex]),0,!1,H_e.isTo,!0,!1),H_b.setStartTime(this._currTime-(H_a-H_e.startTime)),H_b._updateEase(this._currTime),H_b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=H_b)}},H_b.gotoLabel=function(H_a){if(null!=this._labelDic){var H_b=this._labelDic[H_a];H_b&&this.gotoTime(H_b.startTime)}},H_b.pause=function(){H_z.timer.clear(this,this._update)},H_b.resume=function(){this.play(this._currTime,this._loopKey)},H_b.play=function(H_a,H_b){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(H_a,H_b){return H_a.startTime>H_b.startTime?1:H_a.startTime<H_b.startTime?-1:0});for(var H_c=0,H_d=this._tweenDataList.length;H_c<H_d;H_c++){var H_e=this._tweenDataList[H_c];if(null!=H_e&&0==H_e.type){var H_f=H_e.target,H_g=H_f.$_GID||(H_f.$_GID=H_$.getGID()),H_h=null;for(var H_i in null==this._firstTweenDic[H_g]?((H_h={}).diyTarget=H_f,this._firstTweenDic[H_g]=H_h):H_h=this._firstTweenDic[H_g],H_e.data)null==H_h[H_i]&&(H_h[H_i]=H_f[H_i])}}}"string"==typeof H_a?this.gotoLabel(H_a):this.gotoTime(H_a),this._loopKey=H_b,this._lastTime=H_O.now(),H_z.timer.frameLoop(1,this,this._update)}},H_b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var H_a in this._tweenDic)(H_b=this._tweenDic[H_a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var H_b,H_c=H_O.now(),H_d=H_c-this._lastTime,H_e=this._currTime+=H_d*this.scale;for(H_a in this._lastTime=H_c,this._tweenDic)(H_b=this._tweenDic[H_a])._updateEase(H_e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var H_f=this._tweenDataList[this._index];H_e>=H_f.startTime&&(this._index++,0==H_f.type?(this._gidIndex++,(H_b=H_W.getItemByClass("tween",H_Z))._create(H_f.target,H_f.data,H_f.duration,H_f.ease,H_u.create(this,this._animComplete,[this._gidIndex]),0,!1,H_f.isTo,!0,!1),H_b.setStartTime(H_e),H_b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=H_b)._updateEase(H_e)):this.event("label",H_f.data))}},H_b._animComplete=function(H_a){this._tweenDic[H_a]&&delete this._tweenDic[H_a]},H_b._complete=function(){this.event("complete")},H_b.reset=function(){var H_a;if(this._labelDic)for(H_a in this._labelDic)delete this._labelDic[H_a];for(H_a in this._tweenDic)this._tweenDic[H_a].clear(),delete this._tweenDic[H_a];for(H_a in this._firstTweenDic)delete this._firstTweenDic[H_a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var H_b,H_c=0;for(H_b=this._tweenDataList.length,H_c=0;H_c<H_b;H_c++)this._tweenDataList[H_c]&&this._tweenDataList[H_c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,H_z.timer.clear(this,this._update)},H_b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},H_q(0,H_b,"index",function(){return this._frameIndex},function(H_a){this._frameIndex=H_a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),H_q(0,H_b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),H_f.to=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=0),(new H_f).to(H_a,H_b,H_c,H_d,H_e)},H_f.from=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_e&&(H_e=0),(new H_f).from(H_a,H_b,H_c,H_d,H_e)},H_f.__init$=function(){H_h=function(){function H_a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return H_k(H_a,""),H_a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,H_W.recover("tweenData",this)},H_a}()},H_f}(),H_la=function(H_e){function H_c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,H_c.__super.call(this),this._style=H_h.EMPTY}H_k(H_c,"laya.display.Sprite",H_e);var H_a=H_c.prototype;return H_z.imps(H_a,{"laya.display.ILayout":!0}),H_a.createConchModel=function(){return new ConchNode},H_a.destroy=function(H_a){if(void 0===H_a&&(H_a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var H_b=this.mask;H_b&&(this.mask=null,H_b.destroy(H_a))}H_e.prototype.destroy.call(this,H_a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},H_a.updateZOrder=function(){H_$.updateOrder(this._childs)&&this.repaint()},H_a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},H_a.setBounds=function(H_a){this._set$P("uBounds",H_a)},H_a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new H_B),H_B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},H_a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new H_B),H_B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},H_a._boundPointsToParent=function(H_a){void 0===H_a&&(H_a=!1);var H_b=0,H_c=0;this._style&&(H_b=this._style._tf.translateX,H_c=this._style._tf.translateY,H_a=H_a||0!==this._style._tf.rotate,this._style.scrollRect&&(H_b+=this._style.scrollRect.x,H_c+=this._style.scrollRect.y));var H_d=this._getBoundPointsM(H_a);if(!H_d||H_d.length<1)return H_d;if(8!=H_d.length&&(H_d=H_a?H_x.scanPList(H_d):H_B._getWrapRec(H_d,H_B.TEMP)._getBoundPoints()),!this.transform)return H_$.transPointList(H_d,this._x-H_b,this._y-H_c),H_d;var H_e=H_A.TEMP,H_f=0,H_g=H_d.length;for(H_f=0;H_f<H_g;H_f+=2)H_e.x=H_d[H_f],H_e.y=H_d[H_f+1],this.toParentPoint(H_e),H_d[H_f]=H_e.x,H_d[H_f+1]=H_e.y;return H_d},H_a.getGraphicBounds=function(H_a){return void 0===H_a&&(H_a=!1),this._graphics?this._graphics.getBounds(H_a):H_B.TEMP.setTo(0,0,0,0)},H_a._getBoundPointsM=function(H_a){if(void 0===H_a&&(H_a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var H_b=H_$.clearArray(this._$P.temBM),H_c=H_B.TEMP;return H_c.copyFrom(this.scrollRect),H_$.concatArray(H_b,H_c._getBoundPoints()),H_b}for(var H_d,H_e,H_f,H_g=this._graphics?this._graphics.getBoundPoints():H_$.clearArray(this._$P.temBM),H_h=0,H_i=(H_f=this._childs).length;H_h<H_i;H_h++)(H_d=H_f[H_h])instanceof laya.display.Sprite&&1==H_d.visible&&(H_e=H_d._boundPointsToParent(H_a))&&(H_g=H_g?H_$.concatArray(H_g,H_e):H_e);return H_g},H_a.getStyle=function(){return this._style===H_h.EMPTY&&(this._style=new H_h),this._style},H_a.setStyle=function(H_a){this._style=H_a},H_a._adjustTransform=function(){this._tfChanged=!1;var H_a,H_b=this._style._tf,H_c=H_b.scaleX,H_d=H_b.scaleY;if(H_b.rotate||1!==H_c||1!==H_d||H_b.skewX||H_b.skewY){(H_a=this._transform||(this._transform=H_G.create())).bTransform=!0;var H_e=.0174532922222222*(H_b.rotate-H_b.skewX),H_f=.0174532922222222*(H_b.rotate+H_b.skewY),H_g=Math.cos(H_f),H_h=Math.sin(H_f),H_i=Math.sin(H_e),H_j=Math.cos(H_e);return H_a.a=H_c*H_g,H_a.b=H_c*H_h,H_a.c=-H_d*H_i,H_a.d=H_d*H_j,H_a.tx=H_a.ty=0,H_a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,H_a},H_a.pos=function(H_a,H_b,H_c){if(void 0===H_c&&(H_c=!1),this._x!==H_a||this._y!==H_b){if(this.destroyed)return this;if(H_c){this._x=H_a,this._y=H_b,this.conchModel&&this.conchModel.pos(this._x,this._y);var H_d=this._parent;H_d&&0===H_d._repaint&&(H_d._repaint=1,H_d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=H_a,this.y=H_b}return this},H_a.pivot=function(H_a,H_b){return this.pivotX=H_a,this.pivotY=H_b,this},H_a.size=function(H_a,H_b){return this.width=H_a,this.height=H_b,this},H_a.scale=function(H_a,H_b,H_c){void 0===H_c&&(H_c=!1);var H_d=this.getStyle(),H_e=H_d._tf;if(H_e.scaleX!=H_a||H_e.scaleY!=H_b){if(this.destroyed)return this;if(H_c){H_d.setScale(H_a,H_b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H_a,H_b),this._renderType|=4;var H_f=this._parent;H_f&&0===H_f._repaint&&(H_f._repaint=1,H_f.parentRepaint())}else this.scaleX=H_a,this.scaleY=H_b}return this},H_a.skew=function(H_a,H_b){return this.skewX=H_a,this.skewY=H_b,this},H_a.render=function(H_a,H_b,H_c){H_X.spriteCount++,H_L.renders[this._renderType]._fun(this,H_a,H_b+this._x,H_c+this._y),this._repaint=0},H_a.drawToCanvas=function(H_a,H_b,H_c,H_d){if(H_J.isConchNode){var H_e=H_va.create("2D");return new H_K(H_a,H_b,H_e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(H_e.source,H_c,H_d),H_e}return H_F.drawToCanvas(this,this._renderType,H_a,H_b,H_c,H_d)},H_a.customRender=function(H_a,H_b,H_c){this._renderType|=1024},H_a._applyFilters=function(){var H_a;if(!H_J.isWebGL&&((H_a=this._$P.filters)&&!(H_a.length<1)))for(var H_b=0,H_c=H_a.length;H_b<H_c;H_b++)H_a[H_b].action.apply(this._$P.cacheCanvas)},H_a._isHaveGlowFilter=function(){var H_a,H_b=0;if(this.filters)for(H_b=0;H_b<this.filters.length;H_b++)if(8==this.filters[H_b].type)return!0;for(H_b=0,H_a=this._childs.length;H_b<H_a;H_b++)if(this._childs[H_b]._isHaveGlowFilter())return!0;return!1},H_a.localToGlobal=function(H_a,H_b){void 0===H_b&&(H_b=!1),!0===H_b&&(H_a=new H_A(H_a.x,H_a.y));for(var H_c=this;H_c&&H_c!=H_z.stage;)H_a=H_c.toParentPoint(H_a),H_c=H_c.parent;return H_a},H_a.globalToLocal=function(H_a,H_b){void 0===H_b&&(H_b=!1),H_b&&(H_a=new H_A(H_a.x,H_a.y));for(var H_c=this,H_d=[];H_c&&H_c!=H_z.stage;)H_d.push(H_c),H_c=H_c.parent;for(var H_e=H_d.length-1;0<=H_e;)H_a=(H_c=H_d[H_e]).fromParentPoint(H_a),H_e--;return H_a},H_a.toParentPoint=function(H_a){if(!H_a)return H_a;H_a.x-=this.pivotX,H_a.y-=this.pivotY,this.transform&&this._transform.transformPoint(H_a),H_a.x+=this._x,H_a.y+=this._y;var H_b=this._style.scrollRect;return H_b&&(H_a.x-=H_b.x,H_a.y-=H_b.y),H_a},H_a.fromParentPoint=function(H_a){if(!H_a)return H_a;H_a.x-=this._x,H_a.y-=this._y;var H_b=this._style.scrollRect;return H_b&&(H_a.x+=H_b.x,H_a.y+=H_b.y),this.transform&&this._transform.invertTransformPoint(H_a),H_a.x+=this.pivotX,H_a.y+=this.pivotY,H_a},H_a.on=function(H_a,H_b,H_c,H_d){return 1!==this._mouseEnableState&&this.isMouseEvent(H_a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H_a,H_b,H_c,H_d,!1)):H_e.prototype.on.call(this,H_a,H_b,H_c,H_d)},H_a.once=function(H_a,H_b,H_c,H_d){return 1!==this._mouseEnableState&&this.isMouseEvent(H_a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H_a,H_b,H_c,H_d,!0)):H_e.prototype.once.call(this,H_a,H_b,H_c,H_d)},H_a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var H_a=this;for(H_a=H_a.parent;H_a&&1!==H_a._mouseEnableState&&!H_a._getBit(2);)H_a.mouseEnabled=!0,H_a._setBit(2,!0),H_a=H_a.parent}},H_a.loadImage=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=this;return void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),this.graphics.loadImage(H_a,H_b,H_c,H_d,H_e,function(H_a){H_g.destroyed||(H_g.size(H_b+(H_d||H_a.width),H_c+(H_e||H_a.height)),H_g.repaint(),H_f&&H_f.runWith(H_a))}),this},H_a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},H_a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},H_a._childChanged=function(H_a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,H_a&&this._get$P("hasZorder")&&H_z.timer.callLater(this,this.updateZOrder),this.repaint()},H_a.parentRepaint=function(){var H_a=this._parent;H_a&&0===H_a._repaint&&(H_a._repaint=1,H_a.parentRepaint())},H_a.startDrag=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){void 0===H_b&&(H_b=!1),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=300),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=.92),this._$P.dragging||this._set$P("dragging",new H_T),this._$P.dragging.start(this,H_a,H_b,H_c,H_d,H_e,H_f,H_g)},H_a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},H_a._releaseMem=function(){if(this._$P){var H_a=this._$P.cacheCanvas;H_a&&H_a.ctx&&(H_W.recover("RenderContext",H_a.ctx),H_a.ctx.canvas.size(0,0),H_a.ctx=null);var H_b=this._$P._filterCache;H_b&&(H_b.destroy(),H_b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},H_a._setDisplay=function(H_a){H_a||this._releaseMem(),H_e.prototype._setDisplay.call(this,H_a)},H_a.hitTestPoint=function(H_a,H_b){var H_c=this.globalToLocal(H_A.TEMP.setTo(H_a,H_b));return H_a=H_c.x,H_b=H_c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?H_B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(H_a,H_b)},H_a.getMousePoint=function(){return this.globalToLocal(H_A.TEMP.setTo(H_z.stage.mouseX,H_z.stage.mouseY))},H_a._getWords=function(){return null},H_a._addChildsToLayout=function(H_a){var H_b=this._getWords();if(null==H_b&&0==this._childs.length)return!1;if(H_b)for(var H_c=0,H_d=H_b.length;H_c<H_d;H_c++)H_a.push(H_b[H_c]);H_c=0;for(var H_e=this._childs.length;H_c<H_e;++H_c){var H_f=this._childs[H_c];H_f._style._enableLayout()&&H_f._addToLayout(H_a)}return!0},H_a._addToLayout=function(H_a){this._style.absolute||(this._style.block?H_a.push(this):this._addChildsToLayout(H_a)&&(this.x=this.y=0))},H_a._isChar=function(){return!1},H_a._getCSSStyle=function(){return this._style.getCSSStyle()},H_a._setAttributes=function(H_a,H_b){switch(H_a){case"x":this.x=parseFloat(H_b);break;case"y":this.y=parseFloat(H_b);break;case"width":this.width=parseFloat(H_b);break;case"height":this.height=parseFloat(H_b);break;default:this[H_a]=H_b}},H_a._layoutLater=function(){this.parent&&this.parent._layoutLater()},H_q(0,H_a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(H_a){this._optimizeScrollRect!=H_a&&(this._optimizeScrollRect=H_a,this.conchModel&&this.conchModel.optimizeScrollRect(H_a))}),H_q(0,H_a,"customRenderEnable",null,function(H_a){if(H_a&&(this._renderType|=1024,H_J.isConchNode)){H_c.CustomList.push(this);var H_b=new H_va("2d");H_b._setContext(new CanvasRenderingContext2D),this.customContext=new H_K(0,0,H_b),H_b.context.setCanvasType&&H_b.context.setCanvasType(2),this.conchModel.custom(H_b.context)}}),H_q(0,H_a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(H_a){this.cacheAs=H_a?this._$P.hasFilter?"none":"normal":"none"}),H_q(0,H_a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(H_a){var H_b=this._$P.cacheCanvas;if(H_a!==(H_b?H_b.type:"none")){if("none"!==H_a)this._getBit(1)||this._setUpNoticeType(1),H_b||(H_b=this._set$P("cacheCanvas",H_W.getItemByClass("cacheCanvas",Object))),H_b.type=H_a,H_b.reCache=!0,this._renderType|=16,"bitmap"==H_a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(H_b){var H_c=H_b;H_c&&H_c.ctx&&(H_W.recover("RenderContext",H_c.ctx),H_c.ctx.canvas.size(0,0),H_c.ctx=null),H_W.recover("cacheCanvas",H_b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),H_q(0,H_a,"zOrder",function(){return this._zOrder},function(H_a){this._zOrder!=H_a&&(this._zOrder=H_a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(H_a),this._parent&&(H_a&&this._parent._set$P("hasZorder",!0),H_z.timer.callLater(this._parent,this.updateZOrder)))}),H_q(0,H_a,"rotation",function(){return this._style._tf.rotate},function(H_a){var H_b=this.getStyle();if(H_b._tf.rotate!==H_a){H_b.setRotate(H_a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(H_a),this._renderType|=4;var H_c=this._parent;H_c&&0===H_c._repaint&&(H_c._repaint=1,H_c.parentRepaint())}}),H_q(0,H_a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H_a){this._width!==H_a&&(this._width=H_a,this.conchModel&&this.conchModel.size(H_a,this._height),this.repaint())}),H_q(0,H_a,"x",function(){return this._x},function(H_a){if(this._x!==H_a){if(this.destroyed)return;this._x=H_a,this.conchModel&&this.conchModel.pos(H_a,this._y);var H_b=this._parent;H_b&&0===H_b._repaint&&(H_b._repaint=1,H_b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H_q(0,H_a,"globalScaleY",function(){for(var H_a=1,H_b=this;H_b&&H_b!==H_z.stage;)H_a*=H_b.scaleY,H_b=H_b.parent;return H_a}),H_q(0,H_a,"hitArea",function(){return this._$P.hitArea},function(H_a){this._set$P("hitArea",H_a)}),H_q(0,H_a,"staticCache",function(){return this._$P.staticCache},function(H_a){this._set$P("staticCache",H_a),H_a||this.reCache()}),H_q(0,H_a,"texture",function(){return this._texture},function(H_a){this._texture!=H_a&&(this._texture=H_a,this.graphics.cleanByTexture(H_a,0,0))}),H_q(0,H_a,"y",function(){return this._y},function(H_a){if(this._y!==H_a){if(this.destroyed)return;this._y=H_a,this.conchModel&&this.conchModel.pos(this._x,H_a);var H_b=this._parent;H_b&&0===H_b._repaint&&(H_b._repaint=1,H_b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H_q(0,H_a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H_a){this._height!==H_a&&(this._height=H_a,this.conchModel&&this.conchModel.size(this._width,H_a),this.repaint())}),H_q(0,H_a,"blendMode",function(){return this._style.blendMode},function(H_a){this.getStyle().blendMode=H_a,this.conchModel&&this.conchModel.blendMode(H_a),H_a&&"source-over"!=H_a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),H_q(0,H_a,"scaleX",function(){return this._style._tf.scaleX},function(H_a){var H_b=this.getStyle();if(H_b._tf.scaleX!==H_a){H_b.setScaleX(H_a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H_a,H_b._tf.scaleY),this._renderType|=4;var H_c=this._parent;H_c&&0===H_c._repaint&&(H_c._repaint=1,H_c.parentRepaint())}}),H_q(0,H_a,"scaleY",function(){return this._style._tf.scaleY},function(H_a){var H_b=this.getStyle();if(H_b._tf.scaleY!==H_a){H_b.setScaleY(H_a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H_b._tf.scaleX,H_a),this._renderType|=4;var H_c=this._parent;H_c&&0===H_c._repaint&&(H_c._repaint=1,H_c.parentRepaint())}}),H_q(0,H_a,"stage",function(){return H_z.stage}),H_q(0,H_a,"skewX",function(){return this._style._tf.skewX},function(H_a){var H_b=this.getStyle();if(H_b._tf.skewX!==H_a){H_b.setSkewX(H_a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H_a,H_b._tf.skewY),this._renderType|=4;var H_c=this._parent;H_c&&0===H_c._repaint&&(H_c._repaint=1,H_c.parentRepaint())}}),H_q(0,H_a,"scrollRect",function(){return this._style.scrollRect},function(H_a){this.getStyle().scrollRect=H_a,this.repaint(),H_a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(H_a.x,H_a.y,H_a.width,H_a.height)):(this._renderType&=-129,this.conchModel&&(H_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),H_q(0,H_a,"skewY",function(){return this._style._tf.skewY},function(H_a){var H_b=this.getStyle();if(H_b._tf.skewY!==H_a){H_b.setSkewY(H_a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H_b._tf.skewX,H_a),this._renderType|=4;var H_c=this._parent;H_c&&0===H_c._repaint&&(H_c._repaint=1,H_c.parentRepaint())}}),H_q(0,H_a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(H_a){this._tfChanged=!1,(this._transform=H_a)&&(this._x=H_a.tx,this._y=H_a.ty,H_a.tx=H_a.ty=0,this.conchModel&&this.conchModel.transform(H_a.a,H_a.b,H_a.c,H_a.d,this._x,this._y)),H_a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),H_q(0,H_a,"pivotX",function(){return this._style._tf.translateX},function(H_a){this.getStyle().setTranslateX(H_a),this.conchModel&&this.conchModel.pivot(H_a,this._style._tf.translateY),this.repaint()}),H_q(0,H_a,"pivotY",function(){return this._style._tf.translateY},function(H_a){this.getStyle().setTranslateY(H_a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,H_a),this.repaint()}),H_q(0,H_a,"alpha",function(){return this._style.alpha},function(H_a){this._style&&this._style.alpha!==H_a&&(H_a=H_a<0?0:1<H_a?1:H_a,this.getStyle().alpha=H_a,this.conchModel&&this.conchModel.alpha(H_a),1!==H_a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),H_q(0,H_a,"visible",function(){return this._style.visible},function(H_a){this._style&&this._style.visible!==H_a&&(this.getStyle().visible=H_a,this.conchModel&&this.conchModel.visible(H_a),this.parentRepaint())}),H_q(0,H_a,"graphics",function(){return this._graphics||(this.graphics=H_F.createGraphics())},function(H_a){this._graphics&&(this._graphics._sp=null),(this._graphics=H_a)?(this._renderType&=-2,this._renderType|=512,(H_a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(H_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),H_q(0,H_a,"filters",function(){return this._$P.filters},function(H_a){H_a&&0===H_a.length&&(H_a=null),this._$P.filters!=H_a&&(this._set$P("filters",H_a?H_a.slice():null),H_J.isConchApp&&(this.conchModel&&(H_c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),H_J.isWebGL&&(H_a&&H_a.length?this._renderType|=32:this._renderType&=-33),H_a&&0<H_a.length?(this._getBit(1)||this._setUpNoticeType(1),H_J.isWebGL&&1==H_a.length&&H_a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(H_J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),H_q(0,H_a,"parent",H_e.prototype._$get_parent,function(H_a){H_z.superSet(H_aa,this,"parent",H_a),H_a&&this._getBit(2)&&this._$2__onDisplay()}),H_q(0,H_a,"mask",function(){return this._$P._mask},function(H_a){H_a&&this.mask&&this.mask._$P.maskParent||(H_a?(this.cacheAs="bitmap",this._set$P("_mask",H_a),H_a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",H_a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(H_a?H_a.conchModel:null),this._renderType|=64,this.parentRepaint())}),H_q(0,H_a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(H_a){this._mouseEnableState=H_a?2:1}),H_q(0,H_a,"globalScaleX",function(){for(var H_a=1,H_b=this;H_b&&H_b!==H_z.stage;)H_a*=H_b.scaleX,H_b=H_b.parent;return H_a}),H_q(0,H_a,"mouseX",function(){return this.getMousePoint().x}),H_q(0,H_a,"mouseY",function(){return this.getMousePoint().y}),H_c.fromImage=function(H_a){return(new H_c).loadImage(H_a)},H_c._cachePool=[],H_c.CustomList=[],H_i(H_c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=H_g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),H_c}(H_aa),H_ma=function(H_a){function H_b(H_a){this._audio=null,this._onEnd=null,this._resumePlay=null,H_b.__super.call(this),this._onEnd=H_$.bind(this.__onEnd,this),this._resumePlay=H_$.bind(this.__resumePlay,this),H_a.addEventListener("ended",this._onEnd),this._audio=H_a}H_k(H_b,"laya.media.h5audio.AudioSoundChannel",H_da);var H_c=H_b.prototype;return H_c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(H_z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H_c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,H_O.container.appendChild(this._audio),this._audio.play()}catch(H_a){this.event("error")}},H_c.play=function(H_a){this.isStopped=!1;try{this._audio.playbackRate=H_E.playbackRate,this._audio.currentTime=this.startTime}catch(H_a){return void this._audio.addEventListener("canplay",this._resumePlay)}H_E.addChannel(this),H_O.container.appendChild(this._audio),!H_a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},H_c.stop=function(){this.isStopped=!0,H_E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&H_J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),H_O.onIE||this._audio!=H_ca._musicAudio&&H_W.recover("audio:"+this.url,this._audio),H_O.removeElement(this._audio),this._audio=null)},H_c.pause=function(){this.isStopped=!0,H_E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},H_c.resume=function(){this._audio&&(this.isStopped=!1,H_E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},H_q(0,H_c,"position",function(){return this._audio?this._audio.currentTime:0}),H_q(0,H_c,"duration",function(){return this._audio?this._audio.duration:0}),H_q(0,H_c,"volume",function(){return this._audio?this._audio.volume:1},function(H_a){this._audio&&(this._audio.volume=H_a)}),H_b}(),H_na=function(H_a){function H_b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=H_fa.ctx,H_b.__super.call(this),this._onPlayEnd=H_$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}H_k(H_b,"laya.media.webaudio.WebAudioSoundChannel",H_da);var H_c=H_b.prototype;return H_c.play=function(H_a){if(H_E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var H_b=this.context,H_c=this.gain,H_d=H_b.createBufferSource();(this.bufferSource=H_d).buffer=this.audioBuffer,H_d.connect(H_c),H_c&&H_c.disconnect(),H_c.connect(H_b.destination),H_d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=H_O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(H_d.loop=!0),H_d.playbackRate.setTargetAtTime?H_d.playbackRate.setTargetAtTime(H_E.playbackRate,this.context.currentTime,.1):H_d.playbackRate.value=H_E.playbackRate,H_d.start(0,this.startTime),!H_a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},H_c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(H_z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H_c._clearBufferSource=function(){if(this.bufferSource){var H_a=this.bufferSource;H_a.stop?H_a.stop(0):H_a.noteOff(0),H_a.disconnect(0),H_a.onended=null,H_b._tryCleanFailed||this._tryClearBuffer(H_a),this.bufferSource=null}},H_c._tryClearBuffer=function(H_a){try{H_a.buffer=null}catch(H_a){H_b._tryCleanFailed=!0}},H_c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,H_E.removeChannel(this),this.startHandler=null,this.completeHandler=null},H_c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,H_E.removeChannel(this)},H_c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},H_q(0,H_c,"position",function(){return this.bufferSource?(H_O.now()-this._startTime)/1e3+this.startTime:0}),H_q(0,H_c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H_q(0,H_c,"volume",function(){return this._volume},function(H_a){this.isStopped||(this._volume=H_a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(H_a,this.context.currentTime,.1):this.gain.gain.value=H_a)}),H_b._tryCleanFailed=!1,H_b}(),H_qa=function(H_a){function H_b(){H_b.__super.call(this),this._w=0,this._h=0}H_k(H_b,"laya.resource.Bitmap",H_ja);var H_c=H_b.prototype;return H_q(0,H_c,"width",function(){return this._w}),H_q(0,H_c,"height",function(){return this._h}),H_q(0,H_c,"source",function(){return this._source}),H_b}(),H_ra=function(H_b){function H_a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,H_a.__super.call(this),this._interval=H_d.animationInterval,this._setUpNoticeType(1)}H_k(H_a,"laya.display.AnimationPlayerBase",H_b);var H_c=H_a.prototype;return H_c.play=function(H_a,H_b,H_c,H_d){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=!0),void 0===H_c&&(H_c=""),void 0===H_d&&(H_d=!0),this._isPlaying=!0,this.index="string"==typeof H_a?this._getFrameByLabel(H_a):H_a,this.loop=H_b,this._actionName=H_c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H_c._getFrameByLabel=function(H_a){var H_b=0;for(H_b=0;H_b<this._count;H_b++)if(this._labels[H_b]&&0<=this._labels[H_b].indexOf(H_a))return H_b;return 0},H_c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},H_c._setControlNode=function(H_a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=H_a)&&H_a!=this&&(H_a.on("display",this,this._checkResumePlaying),H_a.on("undisplay",this,this._checkResumePlaying))},H_c._setDisplay=function(H_a){H_b.prototype._setDisplay.call(this,H_a),this._checkResumePlaying()},H_c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},H_c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},H_c.addLabel=function(H_a,H_b){this._labels||(this._labels={}),this._labels[H_b]||(this._labels[H_b]=[]),this._labels[H_b].push(H_a)},H_c.removeLabel=function(H_a){if(H_a){if(this._labels)for(var H_b in this._labels)this._removeLabelFromLabelList(this._labels[H_b],H_a)}else this._labels=null},H_c._removeLabelFromLabelList=function(H_a,H_b){if(H_a)for(var H_c=H_a.length-1;0<=H_c;H_c--)H_a[H_c]==H_b&&H_a.splice(H_c,1)},H_c.gotoAndStop=function(H_a){this.index="string"==typeof H_a?this._getFrameByLabel(H_a):H_a,this.stop()},H_c._displayToIndex=function(H_a){},H_c.clear=function(){this.stop(),this._labels=null},H_q(0,H_c,"interval",function(){return this._interval},function(H_a){this._interval!=H_a&&(this._frameRateChanged=!0,this._interval=H_a,this._isPlaying&&0<H_a&&this.timerLoop(H_a,this,this._frameLoop,null,!0,!0))}),H_q(0,H_c,"isPlaying",function(){return this._isPlaying}),H_q(0,H_c,"index",function(){return this._index},function(H_a){if(this._index=H_a,this._displayToIndex(H_a),this._labels&&this._labels[H_a])for(var H_b=this._labels[H_a],H_c=0,H_d=H_b.length;H_c<H_d;H_c++)this.event("label",H_b[H_c])}),H_q(0,H_c,"count",function(){return this._count}),H_a.WRAP_POSITIVE=0,H_a.WRAP_REVERSE=1,H_a.WRAP_PINGPONG=2,H_a}(H_la),H_sa=function(H_b){function H_n(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,H_n.__super.call(this),this.overflow=H_n.VISIBLE,this._style=new H_ba(this),this._style.wordWrap=!1}H_k(H_n,"laya.display.Text",H_b);var H_a=H_n.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},H_a._getBoundPointsM=function(H_a){void 0===H_a&&(H_a=!1);var H_b=H_B.TEMP;return H_b.setTo(0,0,this.width,this.height),H_b._getBoundPoints()},H_a.getGraphicBounds=function(H_a){void 0===H_a&&(H_a=!1);var H_b=H_B.TEMP;return H_b.setTo(0,0,this.width,this.height),H_b},H_a._getCSSStyle=function(){return this._style},H_a.lang=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k){if(H_a=H_n.langPacks&&H_n.langPacks[H_a]?H_n.langPacks[H_a]:H_a,arguments.length<2)this._text=H_a;else{for(var H_l=0,H_m=arguments.length;H_l<H_m;H_l++)H_a=H_a.replace("{"+H_l+"}",arguments[H_l+1]);this._text=H_a}},H_a._isPassWordMode=function(){var H_a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(H_a=!1),H_a},H_a._getPassWordTxt=function(H_a){var H_b;H_b="";for(var H_c=H_a.length;0<H_c;H_c--)H_b+="●";return H_b},H_a.renderText=function(H_a,H_b){var H_c=this.graphics;H_c.clear(!0);var H_d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(H_O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);H_O.context.font=H_d;var H_e=this.padding,H_f=H_e[3],H_g="left",H_h=this._lines,H_i=this.leading+this._charSize.height,H_j=this._currBitmapFont;H_j&&(H_i=this.leading+H_j.getMaxHeight());var H_k=H_e[0];if(!H_j&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(H_g="right",H_f=this._width-H_e[1]):"center"==this.align&&(H_g="center",H_f=.5*this._width+H_e[3]-H_e[1])),0<this._height){var H_l=this._textHeight>this._height?"top":this.valign;"middle"===H_l?H_k=.5*(this._height-H_b*H_i)+H_e[0]-H_e[2]:"bottom"===H_l&&(H_k=this._height-H_b*H_i-H_e[2])}var H_m=this._style;if(H_j&&H_j.autoScaleSize)var H_n=H_j.fontSize/this.fontSize;if(this._clipPoint)if(H_c.save(),H_j&&H_j.autoScaleSize){var H_q=0,H_r=0;H_q=this._width?this._width-H_e[3]-H_e[1]:this._textWidth,H_r=this._height?this._height-H_e[0]-H_e[2]:this._textHeight,H_q*=H_n,H_r*=H_n,H_c.clipRect(H_e[3],H_e[0],H_q,H_r)}else H_c.clipRect(H_e[3],H_e[0],this._width?this._width-H_e[3]-H_e[1]:this._textWidth,this._height?this._height-H_e[0]-H_e[2]:this._textHeight);var H_s=H_m.password;"prompt"in this&&this.prompt==this._text&&(H_s=!1);for(var H_t=0,H_u=0,H_v=Math.min(this._lines.length,H_b+H_a)||1,H_w=H_a;H_w<H_v;H_w++){var H_x,H_y=H_h[H_w];if(H_s){var H_z=H_y.length;H_y="";for(var H_A=H_z;0<H_A;H_A--)H_y+="●"}if(H_t=H_f-(this._clipPoint?this._clipPoint.x:0),H_u=H_k+H_i*H_w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(H_g,H_t,H_u,H_w),H_j){var H_B=this.width;H_j.autoScaleSize&&(H_B=this.width*H_n),H_j.drawText(H_y,this,H_t,H_u,this.align,H_B)}else H_J.isWebGL?(this._words||(this._words=[]),(H_x=this._words.length>H_w-H_a?this._words[H_w-H_a]:new H_p).setText(H_y)):H_x=H_y,H_m.stroke?H_c.fillBorderText(H_x,H_t,H_u,H_d,this.color,H_m.strokeColor,H_m.stroke,H_g):H_c.fillText(H_x,H_t,H_u,H_d,this.color,H_g)}if(H_j&&H_j.autoScaleSize){var H_C=1/H_n;this.scale(H_C,H_C)}this._clipPoint&&H_c.restore(),this._startX=H_f,this._startY=H_k},H_a.drawUnderline=function(H_a,H_b,H_c,H_d){var H_e=this._lineWidths[H_d];switch(H_a){case"center":H_b-=H_e/2;break;case"right":H_b-=H_e}H_c+=this._charSize.height,this._graphics.drawLine(H_b,H_c,H_b+H_e,H_c,this.underlineColor||this.color,1)},H_a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);H_O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new H_A(0,0)):this._clipPoint=null;var H_a=this._lines.length;if(this.overflow!=H_n.VISIBLE){var H_b=this.overflow==H_n.HIDDEN?Math.floor:Math.ceil;H_a=Math.min(H_a,H_b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var H_c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(H_c,H_a),this.repaint()},H_a.evalTextSize=function(){var H_a,H_b=NaN;H_a=Math.max.apply(this,this._lineWidths),H_b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],H_a==this._textWidth&&H_b==this._textHeight||(this._textWidth=H_a,this._textHeight=H_b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},H_a.checkEnabledViewportOrNot=function(){return this.overflow==H_n.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},H_a.changeText=function(H_a){this._text!==H_a&&(this.lang(H_a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},H_a.parseLines=function(H_a){var H_b=this.wordWrap||this.overflow==H_n.HIDDEN;if(H_b)var H_c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var H_d=H_$.contextMeasureText(H_n._testWord);H_J.isConchApp&&0===H_d.width&&0===H_d.height&&(H_d=H_$.contextMeasureText("W")),this._charSize.width=H_d.width,this._charSize.height=H_d.height||this.fontSize}for(var H_e=H_a.replace(/\r\n/g,"\n").split("\n"),H_f=0,H_g=H_e.length;H_f<H_g;H_f++){var H_h=H_e[H_f];H_b?this.parseLine(H_h,H_c):(this._lineWidths.push(this.getTextWidth(H_h)),this._lines.push(H_h))}},H_a.parseLine=function(H_a,H_b){H_O.context;var H_c,H_d=this._lines,H_e=0,H_f=NaN,H_g=NaN,H_h=0;if((H_f=this.getTextWidth(H_a))<=H_b)return H_d.push(H_a),void this._lineWidths.push(H_f);H_f=this._charSize.width,0==(H_e=Math.floor(H_b/H_f))&&(H_e=1),H_g=H_f=this.getTextWidth(H_a.substring(0,H_e));for(var H_i=H_e,H_j=H_a.length;H_i<H_j;H_i++)if(H_b<(H_g+=H_f=this.getTextWidth(H_a.charAt(H_i))))if(this.wordWrap){var H_k=H_a.substring(H_h,H_i);if(H_k.charCodeAt(H_k.length-1)<255?(H_c=/(?:\w|-)+$/.exec(H_k))&&(H_i=H_c.index+H_h,0==H_c.index?H_i+=H_k.length:H_k=H_a.substring(H_h,H_i)):H_n.RightToLeft&&(H_c=/([\u0600-\u06FF])+$/.exec(H_k))&&(H_i=H_c.index+H_h,0==H_c.index?H_i+=H_k.length:H_k=H_a.substring(H_h,H_i)),H_d.push(H_k),this._lineWidths.push(H_g-H_f),!((H_h=H_i)+H_e<H_j)){H_d.push(H_a.substring(H_h,H_j)),this._lineWidths.push(this.getTextWidth(H_d[H_d.length-1])),H_h=-1;break}H_i+=H_e,H_g=H_f=this.getTextWidth(H_a.substring(H_h,H_i)),H_i--}else if(this.overflow==H_n.HIDDEN)return H_d.push(H_a.substring(0,H_i)),void this._lineWidths.push(this.getTextWidth(H_d[H_d.length-1]));this.wordWrap&&-1!=H_h&&(H_d.push(H_a.substring(H_h,H_j)),this._lineWidths.push(this.getTextWidth(H_d[H_d.length-1])))},H_a.getTextWidth=function(H_a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(H_a):H_$.contextMeasureText(H_a).width},H_a.getWordWrapWidth=function(){var H_a=this.padding,H_b=NaN;return(H_b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(H_b=this.wordWrap?100:H_O.width),H_b<=0&&(H_b=100),H_b-H_a[3]-H_a[1]},H_a.getCharPoint=function(H_a,H_b){this._isChanged&&H_z.timer.runCallLater(this,this.typeset);for(var H_c=0,H_d=this._lines,H_e=0,H_f=0,H_g=H_d.length;H_f<H_g;H_f++){if(H_a<(H_c+=H_d[H_f].length)){var H_h=H_f;break}H_e=H_c}var H_i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;H_O.context.font=H_i;var H_j=this.getTextWidth(this._text.substring(H_e,H_a));return(H_b||new H_A).setTo(this._startX+H_j-(this._clipPoint?this._clipPoint.x:0),this._startY+H_h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},H_q(0,H_a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(H_a){H_a!=this._width&&(H_z.superSet(H_la,this,"width",H_a),this.isChanged=!0)}),H_q(0,H_a,"textWidth",function(){return this._isChanged&&H_z.timer.runCallLater(this,this.typeset),this._textWidth}),H_q(0,H_a,"height",function(){return this._height?this._height:this.textHeight},function(H_a){H_a!=this._height&&(H_z.superSet(H_la,this,"height",H_a),this.isChanged=!0)}),H_q(0,H_a,"textHeight",function(){return this._isChanged&&H_z.timer.runCallLater(this,this.typeset),this._textHeight}),H_q(0,H_a,"padding",function(){return this._getCSSStyle().padding},function(H_a){this._getCSSStyle().padding=H_a,this.isChanged=!0}),H_q(0,H_a,"bold",function(){return this._getCSSStyle().bold},function(H_a){this._getCSSStyle().bold=H_a,this.isChanged=!0}),H_q(0,H_a,"text",function(){return this._text||""},function(H_a){this._text!==H_a&&(this.lang(H_a+""),this.isChanged=!0,this.event("change"))}),H_q(0,H_a,"color",function(){return this._getCSSStyle().color},function(H_a){this._getCSSStyle().color!=H_a&&(this._getCSSStyle().color=H_a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),H_q(0,H_a,"font",function(){return this._getCSSStyle().fontFamily},function(H_a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),H_n._bitmapFonts&&H_n._bitmapFonts[H_a]&&(this._currBitmapFont=H_n._bitmapFonts[H_a]),this._getCSSStyle().fontFamily=H_a,this.isChanged=!0}),H_q(0,H_a,"fontSize",function(){return this._getCSSStyle().fontSize},function(H_a){this._getCSSStyle().fontSize=H_a,this.isChanged=!0}),H_q(0,H_a,"italic",function(){return this._getCSSStyle().italic},function(H_a){this._getCSSStyle().italic=H_a,this.isChanged=!0}),H_q(0,H_a,"align",function(){return this._getCSSStyle().align},function(H_a){this._getCSSStyle().align=H_a,this.isChanged=!0}),H_q(0,H_a,"valign",function(){return this._getCSSStyle().valign},function(H_a){this._getCSSStyle().valign=H_a,this.isChanged=!0}),H_q(0,H_a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(H_a){this._getCSSStyle().wordWrap=H_a,this.isChanged=!0}),H_q(0,H_a,"leading",function(){return this._getCSSStyle().leading},function(H_a){this._getCSSStyle().leading=H_a,this.isChanged=!0}),H_q(0,H_a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(H_a){this._getCSSStyle().backgroundColor=H_a,this.isChanged=!0}),H_q(0,H_a,"borderColor",function(){return this._getCSSStyle().borderColor},function(H_a){this._getCSSStyle().borderColor=H_a,this.isChanged=!0}),H_q(0,H_a,"stroke",function(){return this._getCSSStyle().stroke},function(H_a){this._getCSSStyle().stroke=H_a,this.isChanged=!0}),H_q(0,H_a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(H_a){this._getCSSStyle().strokeColor=H_a,this.isChanged=!0}),H_q(0,H_a,"isChanged",null,function(H_a){this._isChanged!==H_a&&(this._isChanged=H_a)&&H_z.timer.callLater(this,this.typeset)}),H_q(0,H_a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(H_a){if(!(this.overflow!=H_n.SCROLL||this.textWidth<this._width)&&this._clipPoint){H_a=H_a<this.padding[3]?this.padding[3]:H_a;var H_b=this._textWidth-this._width;H_a=H_b<H_a?H_b:H_a;var H_c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=H_a,this.renderText(this._lastVisibleLineIndex,H_c)}}),H_q(0,H_a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(H_a){if(!(this.overflow!=H_n.SCROLL||this.textHeight<this._height)&&this._clipPoint){H_a=H_a<this.padding[0]?this.padding[0]:H_a;var H_b=this._textHeight-this._height,H_c=(H_a=H_b<H_a?H_b:H_a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=H_c;var H_d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=H_a,this.renderText(H_c,H_d)}}),H_q(0,H_a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),H_q(0,H_a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),H_q(0,H_a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),H_q(0,H_a,"underlineColor",function(){return this._underlineColor},function(H_a){this._underlineColor=H_a,this._isChanged=!0,this.typeset()}),H_n.registerBitmapFont=function(H_a,H_b){H_n._bitmapFonts||(H_n._bitmapFonts={}),H_n._bitmapFonts[H_a]=H_b},H_n.unregisterBitmapFont=function(H_a,H_b){if(void 0===H_b&&(H_b=!0),H_n._bitmapFonts&&H_n._bitmapFonts[H_a]){var H_c=H_n._bitmapFonts[H_a];H_b&&H_c.destroy(),delete H_n._bitmapFonts[H_a]}},H_n.setTextRightToLeft=function(){var H_a;(H_a=H_O.canvas.source.style).display="none",H_a.position="absolute",H_a.direction="rtl",H_J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,H_O.document.body.appendChild(H_O.canvas.source)},H_n.supportFont=function(H_a){H_O.context.font="10px sans-serif";var H_b=H_$.contextMeasureText("abcji").width;H_O.context.font="10px "+H_a;var H_c=H_$.contextMeasureText("abcji").width;return console.log(H_b,H_c),H_b!==H_c},H_n._testWord="游",H_n.langPacks=null,H_n.VISIBLE="visible",H_n.SCROLL="scroll",H_n.HIDDEN="hidden",H_n.CharacterCache=!0,H_n.RightToLeft=!1,H_n._bitmapFonts=null,H_i(H_n,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),H_n}(H_la),H_ta=function(H_l){function H_g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",H_g.__super.call(this),this.offset=new H_A,this._canvasTransform=new H_G,this._previousOrientation=H_O.window.orientation;var H_b=this;this.transform=H_G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var H_a=H_O.window,H_c=this;H_a.addEventListener("focus",function(){H_b._isFocused=!0,H_c.event("focus"),H_c.event("focuschange")}),H_a.addEventListener("blur",function(){H_b._isFocused=!1,H_c.event("blur"),H_c.event("focuschange"),H_c._isInputting()&&(H_xa.inputElement.target.focus=!1)});var H_d="visibilityState",H_e="visibilitychange",H_f=H_a.document;void 0!==H_f.hidden?(H_e="visibilitychange",H_d="visibilityState"):void 0!==H_f.mozHidden?(H_e="mozvisibilitychange",H_d="mozVisibilityState"):void 0!==H_f.msHidden?(H_e="msvisibilitychange",H_d="msVisibilityState"):void 0!==H_f.webkitHidden&&(H_e="webkitvisibilitychange",H_d="webkitVisibilityState"),H_a.document.addEventListener(H_e,function(){"hidden"==H_O.document[H_d]?H_c._setStageVisible(!1):H_c._setStageVisible(!0)}),H_a.document.addEventListener("qbrowserVisibilityChange",function(H_a){H_c._setStageVisible(!H_a.hidden)}),H_a.addEventListener("resize",function(){var H_a=H_O.window.orientation;null!=H_a&&H_a!=H_b._previousOrientation&&H_c._isInputting()&&(H_xa.inputElement.target.focus=!1),H_b._previousOrientation=H_a,H_c._isInputting()||H_c._resetCanvas()}),H_a.addEventListener("orientationchange",function(H_a){H_c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),H_O.onMobile&&this.on("mousedown",this,this._onmouseMove)}H_k(H_g,"laya.display.Stage",H_l);var H_a=H_g.prototype;return H_a._setStageVisible=function(H_a){this._isVisibility!=H_a&&(this._isVisibility=H_a,this._isVisibility||this._isInputting()&&(H_xa.inputElement.target.focus=!1),this.event("visibilitychange"))},H_a._isInputting=function(){return H_O.onMobile&&H_xa.isInputting},H_a._changeCanvasSize=function(){this.setScreenSize(H_O.clientWidth*H_O.pixelRatio,H_O.clientHeight*H_O.pixelRatio)},H_a._resetCanvas=function(){if(this.screenAdaptationEnabled){var H_a=H_J._mainCanvas;H_a.source.style;H_a.size(1,1),H_z.timer.once(100,this,this._changeCanvasSize)}},H_a.setScreenSize=function(H_a,H_b){var H_c=!1;if("none"!==this._screenMode&&(H_c=(H_a/H_b<1?"vertical":"horizontal")!==this._screenMode)){var H_d=H_b;H_b=H_a,H_a=H_d}this.canvasRotation=H_c;var H_e=H_J._mainCanvas,H_f=H_e.source.style,H_g=this._canvasTransform.identity(),H_h=this._scaleMode,H_i=H_a/this.designWidth,H_j=H_b/this.designHeight,H_k=this.designWidth,H_l=this.designHeight,H_m=H_a,H_n=H_b,H_q=H_O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,H_h){case"noscale":H_i=H_j=1,H_m=this.designWidth,H_n=this.designHeight;break;case"showall":H_i=H_j=Math.min(H_i,H_j),H_k=H_m=Math.round(this.designWidth*H_i),H_l=H_n=Math.round(this.designHeight*H_j);break;case"noborder":H_i=H_j=Math.max(H_i,H_j),H_m=Math.round(this.designWidth*H_i),H_n=Math.round(this.designHeight*H_j);break;case"full":H_i=H_j=1,this._width=H_k=H_a,this._height=H_l=H_b;break;case"fixedwidth":H_j=H_i,this._height=H_l=Math.round(H_b/H_i);break;case"fixedheight":H_i=H_j,this._width=H_k=Math.round(H_a/H_j);break;case"fixedauto":H_a/H_b<this.designWidth/this.designHeight?(H_j=H_i,this._height=H_l=Math.round(H_b/H_i)):(H_i=H_j,this._width=H_k=Math.round(H_a/H_j))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,H_k=H_k+1&2147483646,H_l=H_l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),H_i*=this.scaleX,H_j*=this.scaleY,1===H_i&&1===H_j?this.transform.identity():(this.transform.a=this._formatData(H_i/(H_m/H_k)),this.transform.d=this._formatData(H_j/(H_n/H_l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),H_e.size(H_k,H_l),H_F.changeWebGLSize(H_k,H_l),H_g.scale(H_m/H_k/H_q,H_n/H_l/H_q),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(H_a-H_m)/H_q:this.offset.x=.5*(H_a-H_m)/H_q,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(H_b-H_n)/H_q:this.offset.y=.5*(H_b-H_n)/H_q,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),H_g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,H_c&&("horizontal"===this._screenMode?(H_g.rotate(Math.PI/2),H_g.translate(H_b/H_q,0),this.canvasDegree=90):(H_g.rotate(-Math.PI/2),H_g.translate(0,H_a/H_q),this.canvasDegree=-90)),H_g.a=this._formatData(H_g.a),H_g.d=this._formatData(H_g.d),H_g.tx=this._formatData(H_g.tx),H_g.ty=this._formatData(H_g.ty),H_f.transformOrigin=H_f.webkitTransformOrigin=H_f.msTransformOrigin=H_f.mozTransformOrigin=H_f.oTransformOrigin="0px 0px 0px",H_f.transform=H_f.webkitTransform=H_f.msTransform=H_f.mozTransform=H_f.oTransform="matrix("+H_g.toString()+")",H_g.translate(parseInt(H_f.left)||0,parseInt(H_f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},H_a._formatData=function(H_a){return Math.abs(H_a)<1e-6?0:Math.abs(1-H_a)<.001?0<H_a?1:-1:H_a},H_a.getMousePoint=function(){return H_A.TEMP.setTo(this.mouseX,this.mouseY)},H_a.repaint=function(){this._repaint=1},H_a.parentRepaint=function(){},H_a._loop=function(){return this.render(H_J.context,0,0),!0},H_a._onmouseMove=function(H_a){this._mouseMoveTime=H_O.now()},H_a.getTimeFromFrameStart=function(){return H_O.now()-this._frameStartTime},H_a.render=function(H_a,H_b,H_c){if("sleep"===this._frameRate&&!H_J.isConchApp){var H_d=H_O.now();if(!(1e3<=H_d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(H_X.loopCount++,H_r.instance.runEvent(),H_z.timer._update()));this._frameStartTime=H_d}if(this._renderCount++,H_J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=H_O.now();var H_e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),H_f=this._renderCount%2==0;if(H_X.renderSlow=!H_e,H_e||H_f||H_J.isConchApp){var H_g;H_X.loopCount++,H_r.instance.runEvent(),H_z.timer._update(),H_F.update3DLoop();var H_h=0,H_i=0;if(H_J.isConchNode)for(H_h=0,H_i=this._scenes.length;H_h<H_i;H_h++)(H_g=this._scenes[H_h])&&H_g._updateSceneConch();else for(H_h=0,H_i=this._scenes.length;H_h<H_i;H_h++)(H_g=this._scenes[H_h])&&H_g._updateScene();if(H_J.isConchNode){var H_j=H_la.CustomList;for(H_h=0,H_i=H_j.length;H_h<H_i;H_h++){var H_k=H_j[H_h];H_k.customRender(H_k.customContext,0,0)}return}}H_J.isConchNode||this.renderingEnabled&&(H_e||!H_f||H_J.isConchWebGL)&&(H_J.isWebGL?H_J.WebGL.mainContext&&!H_J.WebGL.mainContext.isContextLost()&&(H_a.clear(),H_l.prototype.render.call(this,H_a,H_b,H_c),H_X._show&&H_X._sp&&H_X._sp.render(H_a,H_b,H_c),H_F.clear(this._bgColor),H_F.beginFlush(),H_a.flush(),H_F.endFinish(),H__.instance&&H__.getInstance().endDispose()):(H_F.clear(this._bgColor),H_l.prototype.render.call(this,H_a,H_b,H_c),H_X._show&&H_X._sp&&H_X._sp.render(H_a,H_b,H_c)))}else this._renderCount%5==0&&(H_X.loopCount++,H_r.instance.runEvent(),H_z.timer._update())},H_a._requestFullscreen=function(){var H_a=H_O.document.documentElement;H_a.requestFullscreen?H_a.requestFullscreen():H_a.mozRequestFullScreen?H_a.mozRequestFullScreen():H_a.webkitRequestFullscreen?H_a.webkitRequestFullscreen():H_a.msRequestFullscreen&&H_a.msRequestFullscreen()},H_a._fullScreenChanged=function(){H_z.stage.event("fullscreenchange")},H_a.exitFullscreen=function(){var H_a=H_O.document;H_a.exitFullscreen?H_a.exitFullscreen():H_a.mozCancelFullScreen?H_a.mozCancelFullScreen():H_a.webkitExitFullscreen&&H_a.webkitExitFullscreen()},H_q(0,H_a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),H_q(0,H_a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),H_q(0,H_a,"frameRate",function(){return this._frameRate},function(H_a){if(this._frameRate=H_a,H_J.isConchApp)switch(this._frameRate){case"slow":H_O.window.conch&&H_O.window.conchConfig.setSlowFrame&&H_O.window.conchConfig.setSlowFrame(!0);break;case"fast":H_O.window.conch&&H_O.window.conchConfig.setSlowFrame&&H_O.window.conchConfig.setSlowFrame(!1);break;case"mouse":H_O.window.conch&&H_O.window.conchConfig.setMouseFrame&&H_O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":H_O.window.conch&&H_O.window.conchConfig.setLimitFPS&&H_O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),H_q(0,H_a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),H_q(0,H_a,"width",H_l.prototype._$get_width,function(H_a){this.designWidth=H_a,H_z.superSet(H_la,this,"width",H_a),H_z.timer.callLater(this,this._changeCanvasSize)}),H_q(0,H_a,"alignH",function(){return this._alignH},function(H_a){this._alignH=H_a,H_z.timer.callLater(this,this._changeCanvasSize)}),H_q(0,H_a,"isFocused",function(){return this._isFocused}),H_q(0,H_a,"height",H_l.prototype._$get_height,function(H_a){this.designHeight=H_a,H_z.superSet(H_la,this,"height",H_a),H_z.timer.callLater(this,this._changeCanvasSize)}),H_q(0,H_a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||H_G.create()},H_l.prototype._$set_transform),H_q(0,H_a,"isVisibility",function(){return this._isVisibility}),H_q(0,H_a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),H_q(0,H_a,"scaleMode",function(){return this._scaleMode},function(H_a){this._scaleMode=H_a,H_z.timer.callLater(this,this._changeCanvasSize)}),H_q(0,H_a,"alignV",function(){return this._alignV},function(H_a){this._alignV=H_a,H_z.timer.callLater(this,this._changeCanvasSize)}),H_q(0,H_a,"bgColor",function(){return this._bgColor},function(H_a){this._bgColor=H_a,this.conchModel&&this.conchModel.bgColor(H_a),H_J.isWebGL&&(H_a?H_g._wgColor=H_S.create(H_a)._color:H_O.onMiniGame||(H_g._wgColor=null)),H_O.onLimixiu?H_g._wgColor=H_S.create(H_a)._color:H_J.canvas.style.background=H_a||"none"}),H_q(0,H_a,"mouseX",function(){return Math.round(H_r.instance.mouseX/this.clientScaleX)}),H_q(0,H_a,"mouseY",function(){return Math.round(H_r.instance.mouseY/this.clientScaleY)}),H_q(0,H_a,"screenMode",function(){return this._screenMode},function(H_a){this._screenMode=H_a}),H_q(0,H_a,"visible",H_l.prototype._$get_visible,function(H_a){this.visible!==H_a&&(H_z.superSet(H_la,this,"visible",H_a),H_J._mainCanvas.source.style.visibility=H_a?"visible":"hidden")}),H_q(0,H_a,"fullScreenEnabled",null,function(H_a){var H_b=H_O.document,H_c=H_J.canvas;H_a?(H_c.addEventListener("mousedown",this._requestFullscreen),H_c.addEventListener("touchstart",this._requestFullscreen),H_b.addEventListener("fullscreenchange",this._fullScreenChanged),H_b.addEventListener("mozfullscreenchange",this._fullScreenChanged),H_b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),H_b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(H_c.removeEventListener("mousedown",this._requestFullscreen),H_c.removeEventListener("touchstart",this._requestFullscreen),H_b.removeEventListener("fullscreenchange",this._fullScreenChanged),H_b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),H_b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),H_b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),H_g.SCALE_NOSCALE="noscale",H_g.SCALE_EXACTFIT="exactfit",H_g.SCALE_SHOWALL="showall",H_g.SCALE_NOBORDER="noborder",H_g.SCALE_FULL="full",H_g.SCALE_FIXED_WIDTH="fixedwidth",H_g.SCALE_FIXED_HEIGHT="fixedheight",H_g.SCALE_FIXED_AUTO="fixedauto",H_g.ALIGN_LEFT="left",H_g.ALIGN_RIGHT="right",H_g.ALIGN_CENTER="center",H_g.ALIGN_TOP="top",H_g.ALIGN_MIDDLE="middle",H_g.ALIGN_BOTTOM="bottom",H_g.SCREEN_NONE="none",H_g.SCREEN_HORIZONTAL="horizontal",H_g.SCREEN_VERTICAL="vertical",H_g.FRAME_FAST="fast",H_g.FRAME_SLOW="slow",H_g.FRAME_MOUSE="mouse",H_g.FRAME_SLEEP="sleep",H_g.FRAME_MOUSE_THREDHOLD=2e3,H_i(H_g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),H_g}(H_la),H_ua=(function(H_a){function H_b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,H_b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}H_k(H_b,"laya.media.SoundNode",H_la);var H_c=H_b.prototype;H_c._onParentChange=function(){this.target=this.parent},H_c.play=function(H_a,H_b){void 0===H_a&&(H_a=1),isNaN(H_a)&&(H_a=1),this.url&&(this.stop(),this._channel=H_E.playSound(this.url,H_a,null,H_b))},H_c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},H_c._setPlayAction=function(H_a,H_b,H_c,H_d){void 0===H_d&&(H_d=!0),this[H_c]&&H_a&&(H_d?H_a.on(H_b,this,this[H_c]):H_a.off(H_b,this,this[H_c]))},H_c._setPlayActions=function(H_a,H_b,H_c,H_d){if(void 0===H_d&&(H_d=!0),H_a&&H_b){var H_e,H_f=H_b.split(","),H_g=0;for(H_e=H_f.length,H_g=0;H_g<H_e;H_g++)this._setPlayAction(H_a,H_f[H_g],H_c,H_d)}},H_q(0,H_c,"playEvent",null,function(H_a){(this._playEvents=H_a)&&this._tar&&this._setPlayActions(this._tar,H_a,"play")}),H_q(0,H_c,"target",null,function(H_a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=H_a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),H_q(0,H_c,"stopEvent",null,function(H_a){(this._stopEvents=H_a)&&this._tar&&this._setPlayActions(this._tar,H_a,"stop")})}(),function(H_a){function H_b(){this._src=null,this._onload=null,this._onerror=null,H_b.__super.call(this)}H_k(H_b,"laya.resource.FileBitmap",H_qa);var H_c=H_b.prototype;return H_q(0,H_c,"src",function(){return this._src},function(H_a){this._src=H_a}),H_q(0,H_c,"onload",null,function(H_a){}),H_q(0,H_c,"onerror",null,function(H_a){}),H_b}()),H_va=function(H_a){function H_c(H_a,H_b){this._is2D=!1,H_c.__super.call(this);var H_d=this;if(this._source=this,"2D"===H_a||"AUTO"===H_a&&!H_J.isWebGL){this._is2D=!0,this._source=H_b||H_O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var H_e=this;H_e.getContext=function(H_a,H_b){if(H_d._ctx)return H_d._ctx;var H_c=H_d._ctx=H_d._source.getContext(H_a,H_b);return H_c&&(H_c._canvas=H_e,H_J.isFlash||H_O.onLimixiu||(H_c.size=function(H_a,H_b){})),H_c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}H_k(H_c,"laya.resource.HTMLCanvas",H_qa);var H_b=H_c.prototype;return H_b.clear=function(){this._ctx&&this._ctx.clear()},H_b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H_b.release=function(){},H_b._setContext=function(H_a){this._ctx=H_a},H_b.getContext=function(H_a,H_b){return this._ctx?this._ctx:this._ctx=H_c._createContext(this)},H_b.getMemSize=function(){return 0},H_b.size=function(H_a,H_b){(this._w!=H_a||this._h!=H_b||this._source&&(this._source.width!=H_a||this._source.height!=H_b))&&(this._w=H_a,this._h=H_b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(H_a,H_b),this._source&&(this._source.height=H_b,this._source.width=H_a))},H_b.getCanvas=function(){return this._source},H_b.toBase64=function(H_a,H_b,H_c){if(this._source)if(H_J.isConchApp&&this._source.toBase64)this._source.toBase64(H_a,H_b,H_c);else{var H_d=this._source.toDataURL(H_a,H_b);H_c.call(this,H_d)}},H_q(0,H_b,"context",function(){return this._ctx}),H_q(0,H_b,"asBitmap",null,function(H_a){}),H_c.create=function(H_a,H_b){return new H_c(H_a,H_b)},H_c.TYPE2D="2D",H_c.TYPE3D="3D",H_c.TYPEAUTO="AUTO",H_c._createContext=null,H_c}(),H_wa=(function(H_a){function H_i(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){throw H_i.__super.call(this),new Error("不允许new！")}H_k(H_i,"laya.resource.HTMLSubImage",H_qa),H_i.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){return void 0===H_h&&(H_h=!1),new H_i(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h)}}(),function(H_a){function H_l(){this._frames=null,this._url=null,H_l.__super.call(this),this._setControlNode(this)}H_k(H_l,"laya.display.Animation",H_a);var H_b=H_l.prototype;H_b.destroy=function(H_a){void 0===H_a&&(H_a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,H_a),this._frames=null,this._labels=null},H_b.play=function(H_a,H_b,H_c,H_d){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=!0),void 0===H_c&&(H_c=""),void 0===H_d&&(H_d=!0),H_c&&this._setFramesFromCache(H_c,H_d),this._isPlaying=!0,this.index="string"==typeof H_a?this._getFrameByLabel(H_a):H_a,this.loop=H_b,this._actionName=H_c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H_b._setFramesFromCache=function(H_a,H_b){var H_c;return void 0===H_b&&(H_b=!1),this._url&&(H_a=this._url+"#"+H_a),H_a&&H_l.framesMap[H_a]?((H_c=H_l.framesMap[H_a])instanceof Array?(this._frames=H_l.framesMap[H_a],this._count=this._frames.length):(H_c.nodeRoot&&(H_l.framesMap[H_a]=this._parseGraphicAnimationByData(H_c),H_c=H_l.framesMap[H_a]),this._frames=H_c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=H_c.interval),this._labels=this._copyLabels(H_c.labels)),!0):(H_b&&console.log("ani not found:",H_a),!1)},H_b._copyLabels=function(H_a){if(!H_a)return null;var H_b,H_c;for(H_c in H_b={},H_a)H_b[H_c]=H_$.copyArray([],H_a[H_c]);return H_b},H_b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&H_a.prototype._frameLoop.call(this)},H_b._displayToIndex=function(H_a){this._frames&&(this.graphics=this._frames[H_a])},H_b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},H_b.loadImages=function(H_a,H_b){return void 0===H_b&&(H_b=""),this._url="",this._setFramesFromCache(H_b)||(this.frames=H_l.framesMap[H_b]?H_l.framesMap[H_b]:H_l.createFrames(H_a,H_b)),this},H_b.loadAtlas=function(H_b,H_c,H_d){void 0===H_d&&(H_d=""),this._url="";var H_e=this;function H_a(H_a){H_b===H_a&&(H_e.frames=H_l.framesMap[H_d]?H_l.framesMap[H_d]:H_l.createFrames(H_b,H_d),H_c&&H_c.run())}return H_e._setFramesFromCache(H_d)||(H_ha.getAtlas(H_b)?H_a(H_b):H_z.loader.load(H_b,H_u.create(null,H_a,[H_b]),null,"atlas")),this},H_b.loadAnimation=function(H_a,H_b,H_c){this._url=H_a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,H_b&&H_b.run()):!H_c||H_ha.getAtlas(H_c)?this._loadAnimationData(H_a,H_b,H_c):H_z.loader.load(H_c,H_u.create(this,this._loadAnimationData,[H_a,H_b,H_c]),null,"atlas"),this},H_b._loadAnimationData=function(H_h,H_i,H_a){var H_j=this;if(!H_a||H_ha.getAtlas(H_a)){var H_k=this;H_ha.getRes(H_h)?H_b(H_h):H_z.loader.load(H_h,H_u.create(null,H_b,[H_h]),null,"json"),H_ha.clearRes(H_h)}else console.warn("atlas load fail:"+H_a);function H_b(H_a){if(H_ha.getRes(H_a)&&H_h===H_a){var H_b;if(H_l.framesMap[H_h+"#"])H_k._setFramesFromCache(H_j._actionName,!0),H_j.index=0,H_j._checkResumePlaying();else{var H_c=H_k._parseGraphicAnimation(H_ha.getRes(H_h));if(!H_c)return;var H_d,H_e=H_c.animationList,H_f=0,H_g=H_e.length;for(H_f=0;H_f<H_g;H_f++)H_b=H_e[H_f],H_l.framesMap[H_h+"#"+H_b.name]=H_b,H_d||(H_d=H_b);H_d&&(H_l.framesMap[H_h+"#"]=H_d,H_k._setFramesFromCache(H_j._actionName,!0),H_j.index=0),H_j._checkResumePlaying()}H_i&&H_i.run()}}},H_b._parseGraphicAnimation=function(H_a){return H_za.parseAnimationData(H_a)},H_b._parseGraphicAnimationByData=function(H_a){return H_za.parseAnimationByData(H_a)},H_q(0,H_b,"frames",function(){return this._frames},function(H_a){(this._frames=H_a)&&(this._count=H_a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),H_q(0,H_b,"autoPlay",null,function(H_a){H_a?this.play():this.stop()}),H_q(0,H_b,"source",null,function(H_a){-1<H_a.indexOf(".ani")?this.loadAnimation(H_a):-1<H_a.indexOf(".json")||-1<H_a.indexOf("als")||-1<H_a.indexOf("atlas")?this.loadAtlas(H_a):this.loadImages(H_a.split(","))}),H_q(0,H_b,"autoAnimation",null,function(H_a){this.play(0,!0,H_a,!1)}),H_l.createFrames=function(H_a,H_b){var H_c,H_d,H_e=0,H_f=0;if("string"==typeof H_a){var H_g=H_ha.getAtlas(H_a);if(H_g&&H_g.length)for(H_c=[],H_e=0,H_f=H_g.length;H_e<H_f;H_e++)(H_d=new H_F.createGraphics).drawTexture(H_ha.getRes(H_g[H_e]),0,0),H_c.push(H_d)}else if(H_a instanceof Array)for(H_c=[],H_e=0,H_f=H_a.length;H_e<H_f;H_e++)(H_d=new H_F.createGraphics).loadImage(H_a[H_e],0,0),H_c.push(H_d);return H_b&&(H_l.framesMap[H_b]=H_c),H_c},H_l.clearCache=function(H_a){var H_b,H_c=H_l.framesMap,H_d=H_a+"#";for(H_b in H_c)H_b!==H_a&&0!=H_b.indexOf(H_d)||delete H_l.framesMap[H_b]},H_l.framesMap={}}(H_ra),function(H_a){function H_f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,H_f.__super.call(this),null==H_f._sortIndexFun&&(H_f._sortIndexFun=H_y.sortByKey("index",!1,!0))}H_k(H_f,"laya.display.FrameAnimation",H_a);var H_b=H_f.prototype;return H_b._setUp=function(H_a,H_b){this._labels=null,this._animationNewFrames=null,this._targetDic=H_a,this._animationData=H_b,this.interval=1e3/H_b.frameRate,H_b.parsed?(this._count=H_b.count,this._labels=H_b.labels,this._animationNewFrames=H_b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),H_b.parsed=!0,H_b.labels=this._labels,H_b.count=this._count,H_b.animationNewFrames=this._animationNewFrames},H_b.clear=function(){H_a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},H_b._displayToIndex=function(H_a){if(this._animationData){H_a<0&&(H_a=0),H_a>this._count&&(H_a=this._count);var H_b=this._animationData.nodes,H_c=0,H_d=H_b.length;for(H_c=0;H_c<H_d;H_c++)this._displayNodeToFrame(H_b[H_c],H_a)}},H_b._displayNodeToFrame=function(H_a,H_b,H_c){H_c||(H_c=this._targetDic);var H_d=H_c[H_a.target];if(H_d){var H_e,H_f,H_g,H_h=H_a.frames,H_i=H_a.keys,H_j=0,H_k=H_i.length;for(H_j=0;H_j<H_k;H_j++)H_g=(H_f=H_h[H_e=H_i[H_j]]).length>H_b?H_f[H_b]:H_f[H_f.length-1],H_d[H_e]=H_g}},H_b._calculateDatas=function(){if(this._animationData){var H_a,H_b=this._animationData.nodes,H_c=0,H_d=H_b.length;for(H_c=this._count=0;H_c<H_d;H_c++)H_a=H_b[H_c],this._calculateNodeKeyFrames(H_a);this._count+=1}},H_b._calculateNodeKeyFrames=function(H_a){var H_b,H_c,H_d=H_a.keyframes,H_e=H_a.target;for(H_b in H_a.frames||(H_a.frames={}),H_a.keys?H_a.keys.length=0:H_a.keys=[],H_a.initValues||(H_a.initValues={}),H_d)H_c=H_d[H_b],H_a.frames[H_b]||(H_a.frames[H_b]=[]),this._targetDic&&this._targetDic[H_e]&&(H_a.initValues[H_b]=this._targetDic[H_e][H_b]),H_c.sort(H_f._sortIndexFun),H_a.keys.push(H_b),this._calculateNodePropFrames(H_c,H_a.frames[H_b],H_b,H_e)},H_b.resetToInitState=function(){if(this._targetDic&&this._animationData){var H_a,H_b,H_c=this._animationData.nodes,H_d=0,H_e=H_c.length;for(H_d=0;H_d<H_e;H_d++)if(H_b=(H_a=H_c[H_d]).initValues){var H_f,H_g=this._targetDic[H_a.target];if(H_g)for(H_f in H_b)H_g[H_f]=H_b[H_f]}}},H_b._calculateNodePropFrames=function(H_a,H_b,H_c,H_d){var H_e=0,H_f=H_a.length-1;if(0<H_f){for(H_b.length=H_a[H_f].index+1,H_e=0;H_e<H_f;H_e++)this._dealKeyFrame(H_a[H_e]),this._calculateFrameValues(H_a[H_e],H_a[H_e+1],H_b);this._dealKeyFrame(H_a[H_e])}0==H_f&&(H_b[H_a[0].index]=H_a[0].value,this._animationNewFrames&&(this._animationNewFrames[H_a[0].index]=!0))},H_b._dealKeyFrame=function(H_a){H_a.label&&""!=H_a.label&&this.addLabel(H_a.label,H_a.index)},H_b._calculateFrameValues=function(H_a,H_b,H_c){var H_d,H_e=0,H_f=H_a.index,H_g=H_b.index,H_h=H_a.value,H_i=H_b.value-H_a.value,H_j=H_g-H_f;if(H_g>this._count&&(this._count=H_g),H_a.tween)for(null==(H_d=H_U[H_a.tweenMethod])&&(H_d=H_U.linearNone),H_e=H_f;H_e<H_g;H_e++)H_c[H_e]=H_d(H_e-H_f,H_h,H_i,H_j),this._animationNewFrames&&(this._animationNewFrames[H_e]=!0);else for(H_e=H_f;H_e<H_g;H_e++)H_c[H_e]=H_h;this._animationNewFrames&&(this._animationNewFrames[H_a.index]=!0,this._animationNewFrames[H_b.index]=!0),H_c[H_b.index]=H_b.value},H_f._sortIndexFun=null,H_f}(H_ra)),H_xa=function(H_b){function H_e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",H_e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=H_sa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}H_k(H_e,"laya.display.Input",H_b);var H_a=H_e.prototype;return H_a.setSelection=function(H_a,H_b){this.focus=!0,laya.display.Input.inputElement.selectionStart=H_a,laya.display.Input.inputElement.selectionEnd=H_b},H_a._onUnDisplay=function(H_a){this.focus=!1},H_a._onMouseDown=function(H_a){this.focus=!0},H_a._syncInputTransform=function(){var H_a=this.nativeInput,H_b=H_$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),H_c=this._width-this.padding[1]-this.padding[3],H_d=this._height-this.padding[0]-this.padding[2];H_J.isConchApp?(H_a.setScale(H_b.scaleX,H_b.scaleY),H_a.setSize(H_c,H_d),H_a.setPos(H_b.x,H_b.y)):(H_e.inputContainer.style.transform=H_e.inputContainer.style.webkitTransform="scale("+H_b.scaleX+","+H_b.scaleY+") rotate("+H_z.stage.canvasDegree+"deg)",H_a.style.width=H_c+"px",H_a.style.height=H_d+"px",H_e.inputContainer.style.left=H_b.x+"px",H_e.inputContainer.style.top=H_b.y+"px")},H_a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},H_a._setInputMethod=function(){H_e.input.parentElement&&H_e.inputContainer.removeChild(H_e.input),H_e.area.parentElement&&H_e.inputContainer.removeChild(H_e.area),H_e.inputElement=this._multiline?H_e.area:H_e.input,H_e.inputContainer.appendChild(H_e.inputElement),H_sa.RightToLeft&&(H_e.inputElement.style.direction="rtl")},H_a._focusIn=function(){laya.display.Input.isInputting=!0;var H_a=this.nativeInput;this._focus=!0;var H_b=H_a.style;H_b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),H_a.readOnly=!this._editable,H_J.isConchApp&&(H_a.setType(this._type),H_a.setForbidEdit(!this._editable)),H_a.maxLength=this._maxChars;this.padding;if(H_a.type=this._type,H_a.value=this._content,H_a.placeholder=this._prompt,H_z.stage.off("keydown",this,this._onKeyDown),H_z.stage.on("keydown",this,this._onKeyDown),(H_z.stage.focus=this).event("focus"),H_O.onPC&&H_a.focus(),!H_O.onMiniGame){this._text;this._text=null}this.typeset(),H_a.setColor(this._originColor),H_a.setFontSize(this.fontSize),H_a.setFontFace(H_O.onIPhone&&H_sa._fontFamilyMap[this.font]||this.font),H_J.isConchApp&&H_a.setMultiAble&&H_a.setMultiAble(this._multiline),H_b.lineHeight=this.leading+this.fontSize+"px",H_b.fontStyle=this.italic?"italic":"normal",H_b.fontWeight=this.bold?"bold":"normal",H_b.textAlign=this.align,H_b.padding="0 0",this._syncInputTransform(),!H_J.isConchApp&&H_O.onPC&&H_z.timer.frameLoop(1,this,this._syncInputTransform)},H_a._setPromptColor=function(){(H_e.promptStyleDOM=H_O.getElementById("promptStyle"))||((H_e.promptStyleDOM=H_O.createElement("style")).setAttribute("id","promptStyle"),H_O.document.head.appendChild(H_e.promptStyleDOM)),H_e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},H_a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(H_z.superSet(H_sa,this,"text",this._content),H_z.superSet(H_sa,this,"color",this._originColor)):(H_z.superSet(H_sa,this,"text",this._prompt),H_z.superSet(H_sa,this,"color",this._promptColor)),H_z.stage.off("keydown",this,this._onKeyDown),H_z.stage.focus=null,this.event("blur"),H_J.isConchApp&&this.nativeInput.blur(),H_O.onPC&&H_z.timer.clear(this,this._syncInputTransform)},H_a._onKeyDown=function(H_a){13===H_a.keyCode&&(H_O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},H_a.changeText=function(H_a){this._content=H_a,this._focus?(this.nativeInput.value=H_a||"",this.event("change")):H_b.prototype.changeText.call(this,H_a)},H_q(0,H_a,"color",H_b.prototype._$get_color,function(H_a){this._focus&&this.nativeInput.setColor(H_a),H_z.superSet(H_sa,this,"color",this._content?H_a:this._promptColor),this._originColor=H_a}),H_q(0,H_a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(H_a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),H_q(0,H_a,"multiline",function(){return this._multiline},function(H_a){this._multiline=H_a,this.valign=H_a?"top":"middle"}),H_q(0,H_a,"maxChars",function(){return this._maxChars},function(H_a){H_a<=0&&(H_a=1e5),this._maxChars=H_a}),H_q(0,H_a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(H_a){H_z.superSet(H_sa,this,"color",this._originColor),H_a+="",this._focus?(this.nativeInput.value=H_a||"",this.event("change")):(this._multiline||(H_a=H_a.replace(/\r?\n/g,"")),(this._content=H_a)?H_z.superSet(H_sa,this,"text",H_a):(H_z.superSet(H_sa,this,"text",this._prompt),H_z.superSet(H_sa,this,"color",this.promptColor)))}),H_q(0,H_a,"nativeInput",function(){return this._multiline?H_e.area:H_e.input}),H_q(0,H_a,"prompt",function(){return this._prompt},function(H_a){!this._text&&H_a&&H_z.superSet(H_sa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?H_z.superSet(H_sa,this,"text",this._text==this._prompt?H_a:this._text):H_z.superSet(H_sa,this,"text",H_a),this._prompt=H_sa.langPacks&&H_sa.langPacks[H_a]?H_sa.langPacks[H_a]:H_a}),H_q(0,H_a,"focus",function(){return this._focus},function(H_a){var H_b=this.nativeInput;this._focus!==H_a&&(H_a?(H_b.target?H_b.target._focusOut():this._setInputMethod(),(H_b.target=this)._focusIn()):(H_b.target=null,this._focusOut(),H_O.document.body.scrollTop=0,H_b.blur(),H_J.isConchApp?H_b.setPos(-1e4,-1e4):H_e.inputContainer.contains(H_b)&&H_e.inputContainer.removeChild(H_b)))}),H_q(0,H_a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(H_a){H_a?(-1<(H_a="[^"+H_a+"]").indexOf("^^")&&(H_a=H_a.replace("^^","")),this._restrictPattern=new RegExp(H_a,"g")):this._restrictPattern=null}),H_q(0,H_a,"editable",function(){return this._editable},function(H_a){this._editable=H_a,H_J.isConchApp&&H_e.input.setForbidEdit(!H_a)}),H_q(0,H_a,"promptColor",function(){return this._promptColor},function(H_a){this._promptColor=H_a,this._content||H_z.superSet(H_sa,this,"color",H_a)}),H_q(0,H_a,"type",function(){return this._type},function(H_a){this._getCSSStyle().password="password"==H_a,this._type=H_a,H_J.isConchApp&&this.nativeInput.setType(H_a)}),H_q(0,H_a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(H_a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),H_q(0,H_a,"asPassword",function(){return this._getCSSStyle().password},function(H_a){this._getCSSStyle().password=H_a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),H_e.__init__=function(){H_e._createInputElement(),H_O.onMobile&&H_J.canvas.addEventListener(H_e.IOS_IFRAME?H_O.onMiniGame?"touchend":"click":"touchend",H_e._popupInputMethod)},H_e._popupInputMethod=function(H_a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},H_e._createInputElement=function(){H_e._initInput(H_e.area=H_O.createElement("textarea")),H_e._initInput(H_e.input=H_O.createElement("input")),(H_e.inputContainer=H_O.createElement("div")).style.position="absolute",H_e.inputContainer.style.zIndex=1e5,H_O.container.appendChild(H_e.inputContainer),H_e.inputContainer.setPos=function(H_a,H_b){H_e.inputContainer.style.left=H_a+"px",H_e.inputContainer.style.top=H_b+"px"}},H_e._initInput=function(H_b){var H_a=H_b.style;H_a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",H_a.resize="none",H_a.backgroundColor="transparent",H_a.border="none",H_a.outline="none",H_a.zIndex=1,H_b.addEventListener("input",H_e._processInputting),H_b.addEventListener("mousemove",H_e._stopEvent),H_b.addEventListener("mousedown",H_e._stopEvent),H_b.addEventListener("touchmove",H_e._stopEvent),H_b.setFontFace=function(H_a){H_b.style.fontFamily=H_a},H_J.isConchApp||(H_b.setColor=function(H_a){H_b.style.color=H_a},H_b.setFontSize=function(H_a){H_b.style.fontSize=H_a+"px"})},H_e._processInputting=function(H_a){var H_b=laya.display.Input.inputElement.target;if(H_b){var H_c=laya.display.Input.inputElement.value;H_b._restrictPattern&&(H_c=H_c.replace(/\u2006|\x27/g,""),H_b._restrictPattern.test(H_c)&&(H_c=H_c.replace(H_b._restrictPattern,""),laya.display.Input.inputElement.value=H_c)),H_b._text=H_c,H_b.event("input")}},H_e._stopEvent=function(H_a){"touchmove"==H_a.type&&H_a.preventDefault(),H_a.stopPropagation&&H_a.stopPropagation()},H_e.TYPE_TEXT="text",H_e.TYPE_PASSWORD="password",H_e.TYPE_EMAIL="email",H_e.TYPE_URL="url",H_e.TYPE_NUMBER="number",H_e.TYPE_RANGE="range",H_e.TYPE_DATE="date",H_e.TYPE_MONTH="month",H_e.TYPE_WEEK="week",H_e.TYPE_TIME="time",H_e.TYPE_DATE_TIME="datetime",H_e.TYPE_DATE_TIME_LOCAL="datetime-local",H_e.TYPE_SEARCH="search",H_e.input=null,H_e.area=null,H_e.inputElement=null,H_e.inputContainer=null,H_e.confirmButton=null,H_e.promptStyleDOM=null,H_e.inputHeight=45,H_e.isInputting=!1,H_e.stageMatrix=null,H_i(H_e,["IOS_IFRAME",function(){return this.IOS_IFRAME=H_O.onIOS&&H_O.window.top!=H_O.window.self}]),H_e}(H_sa),H_ya=function(H_a){function H_c(H_a,H_b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,H_c.__super.call(this),H_a&&this._init_(H_a,H_b)}H_k(H_c,"laya.resource.HTMLImage",H_ua);var H_b=H_c.prototype;return H_b._init_=function(H_a,H_b){this._src=H_a,this._source=new H_O.window.Image,H_b&&(H_b.onload&&(this.onload=H_b.onload),H_b.onerror&&(this.onerror=H_b.onerror),H_b.onCreate&&H_b.onCreate(this)),0!=H_a.indexOf("data:image")&&(this._source.crossOrigin=""),H_a&&(this._source.src=H_a)},H_b.recreateResource=function(){var H_a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var H_b=this;this._source=new H_O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(H_b._needReleaseAgain)return H_b._needReleaseAgain=!1,H_b._source.onload=null,void(H_b._source=null);H_b._source.onload=null,H_b.memorySize=H_a._w*H_a._h*4,H_b._recreateLock=!1,H_b.completeCreate()},this._source.src=this._src}},H_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},H_b.onresize=function(){this._w=this._source.width,this._h=this._source.height},H_q(0,H_b,"onload",null,function(H_a){var H_b=this;this._onload=H_a,this._source&&(this._source.onload=null!=this._onload?function(){H_b.onresize(),H_b._onload()}:null)}),H_q(0,H_b,"onerror",null,function(H_a){var H_b=this;this._onerror=H_a,this._source&&(this._source.onerror=null!=this._onerror?function(){H_b._onerror()}:null)}),H_q(0,H_b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H_a){this._enableMerageInAtlas=H_a,H_J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=H_a)}),H_c.create=function(H_a,H_b){return new H_c(H_a,H_b)},H_c}(),H_za=(function(H_f){function H_a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,H_a.__super.call(this)}H_k(H_a,"laya.display.EffectAnimation",H_f);var H_b=H_a.prototype;H_b._onOtherBegin=function(H_a){H_a!=this&&this.stop()},H_b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},H_b._onPlayAction=function(){this.play(0,!1)},H_b.play=function(H_a,H_b,H_c,H_d){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=!0),void 0===H_c&&(H_c=""),void 0===H_d&&(H_d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,H_a,H_b,H_c,H_d))},H_b._recordInitData=function(){if(this._aniKeys){var H_a,H_b,H_c=0;for(H_a=this._aniKeys.length,H_c=0;H_c<H_a;H_c++)H_b=this._aniKeys[H_c],this._initData[H_b]=this._target[H_b]}},H_b._displayToIndex=function(H_a){if(this._animationData){H_a<0&&(H_a=0),H_a>this._count&&(H_a=this._count);var H_b=this._animationData.nodes,H_c=0,H_d=H_b.length;for(H_d=1<H_d?1:H_d,H_c=0;H_c<H_d;H_c++)this._displayNodeToFrame(H_b[H_c],H_a)}},H_b._displayNodeToFrame=function(H_a,H_b,H_c){if(this._target){var H_d;H_d=this._target;var H_e,H_f,H_g,H_h,H_i=H_a.frames,H_j=H_a.keys,H_k=0,H_l=H_j.length;H_h=H_a.secondFrames;var H_m,H_n,H_q,H_r,H_s=0;for(H_k=0;H_k<H_l;H_k++)H_f=H_i[H_e=H_j[H_k]],H_g=-1==(H_s=H_h[H_e])?this._initData[H_e]:H_b<H_s?(H_q=(H_n=H_a.keyframes[H_e])[0]).tween?(null==(H_m=H_U[H_q.tweenMethod])&&(H_m=H_U.linearNone),H_r=H_n[1],H_m(H_b,this._initData[H_e],H_r.value-this._initData[H_e],H_r.index)):this._initData[H_e]:H_f.length>H_b?H_f[H_b]:H_f[H_f.length-1],H_d[H_e]=H_g}},H_b._calculateNodeKeyFrames=function(H_a){H_f.prototype._calculateNodeKeyFrames.call(this,H_a);var H_b,H_c,H_d,H_e=H_a.keyframes;H_a.target;for(H_b in H_d={},H_a.secondFrames=H_d,H_e)(H_c=H_e[H_b]).length<=1?H_d[H_b]=-1:H_d[H_b]=H_c[1].index},H_q(0,H_b,"target",function(){return this._target},function(H_a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=H_a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),H_q(0,H_b,"playEvent",null,function(H_a){(this._playEvents=H_a)&&this.addEvent()}),H_q(0,H_b,"effectData",null,function(H_a){var H_b;H_a&&((H_b=H_a.animations)&&H_b[0]&&(this._setUp({},H_b[0]),H_b[0].nodes&&H_b[0].nodes[0]&&(this._aniKeys=H_b[0].nodes[0].keys)))}),H_q(0,H_b,"effectClass",null,function(H_a){var H_b,H_c;(this._effectClass=H_R.getClass(H_a),this._effectClass)&&((H_b=this._effectClass.uiView)&&(H_c=H_b.animations)&&H_c[0]&&(this._setUp({},H_c[0]),H_c[0].nodes&&H_c[0].nodes[0]&&(this._aniKeys=H_c[0].nodes[0].keys)))}),H_a.EffectAnimationBegin="effectanimationbegin"}(H_wa),function(H_b){var H_D;function H_E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,H_E.__super.call(this)}H_k(H_E,"laya.utils.GraphicAnimation",H_b);var H_a=H_E.prototype;return H_a._parseNodeList=function(H_a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[H_a.compId]=H_a.props,H_a.compId&&this._nodeList.push(H_a.compId);var H_b=H_a.child;if(H_b){var H_c=0,H_d=H_b.length;for(H_c=0;H_c<H_d;H_c++)this._parseNodeList(H_b[H_c])}},H_a._calGraphicData=function(H_a){var H_b;if(this._setUp(null,H_a),this._createGraphicData(),this._nodeIDAniDic)for(H_b in this._nodeIDAniDic)this._nodeIDAniDic[H_b]=null},H_a._createGraphicData=function(){var H_a,H_b=[],H_c=0,H_d=this.count,H_e=this._animationNewFrames;for(H_e||(H_e=[]),H_c=0;H_c<H_d;H_c++)!H_e[H_c]&&H_a||(H_a=this._createFrameGraphic(H_c)),H_b.push(H_a);this._gList=H_b},H_a._createFrameGraphic=function(H_a){var H_b=H_F.createGraphics();return H_E._rootMatrix||(H_E._rootMatrix=new H_G),this._updateNodeGraphic(this._rootNode,H_a,H_E._rootMatrix,H_b),H_b},H_a._updateNodeGraphic=function(H_a,H_b,H_c,H_d,H_e){var H_f;void 0===H_e&&(H_e=1);var H_g,H_h,H_i,H_j=(H_f=this._nodeGDic[H_a.compId]=this._getNodeGraphicData(H_a.compId,H_b,this._nodeGDic[H_a.compId])).alpha*H_e;if(!(H_j<.01)&&(H_f.resultTransform||(H_f.resultTransform=H_G.create()),H_g=H_f.resultTransform,H_G.mul(H_f.transform,H_c,H_g),H_f.skin&&(H_h=this._getTextureByUrl(H_f.skin))&&(H_g._checkTransform()?(H_d.drawTexture(H_h,0,0,H_f.width,H_f.height,H_g,H_j),H_f.resultTransform=null):H_d.drawTexture(H_h,H_g.tx,H_g.ty,H_f.width,H_f.height,null,H_j)),H_i=H_a.child)){var H_k,H_l=0;for(H_k=H_i.length,H_l=0;H_l<H_k;H_l++)this._updateNodeGraphic(H_i[H_l],H_b,H_g,H_d,H_j)}},H_a._updateNoChilds=function(H_a,H_b){if(H_a.skin){var H_c=this._getTextureByUrl(H_a.skin);if(H_c){var H_d=H_a.transform;H_d._checkTransform();!H_d.bTransform?H_b.drawTexture(H_c,H_d.tx,H_d.ty,H_a.width,H_a.height,null,H_a.alpha):H_b.drawTexture(H_c,0,0,H_a.width,H_a.height,H_d.clone(),H_a.alpha)}}},H_a._updateNodeGraphic2=function(H_a,H_b,H_c){var H_d;if(H_d=this._nodeGDic[H_a.compId]=this._getNodeGraphicData(H_a.compId,H_b,this._nodeGDic[H_a.compId]),H_a.child){var H_e=H_d.transform;H_e._checkTransform();var H_f,H_g;H_g=(H_f=!H_e.bTransform)&&(0!=H_e.tx||0!=H_e.ty);var H_h,H_i,H_j;if((H_h=H_e.bTransform||1!=H_d.alpha)&&H_c.save(),1!=H_d.alpha&&H_c.alpha(H_d.alpha),H_f?H_g&&H_c.translate(H_e.tx,H_e.ty):H_c.transform(H_e.clone()),H_i=H_a.child,H_d.skin&&(H_j=this._getTextureByUrl(H_d.skin))&&H_c.drawTexture(H_j,0,0,H_d.width,H_d.height),H_i){var H_k,H_l=0;for(H_k=H_i.length,H_l=0;H_l<H_k;H_l++)this._updateNodeGraphic2(H_i[H_l],H_b,H_c)}H_h?H_c.restore():H_f?H_g&&H_c.translate(-H_e.tx,-H_e.ty):H_c.transform(H_e.clone().invert())}else this._updateNoChilds(H_d,H_c)},H_a._calculateNodeKeyFrames=function(H_a){H_b.prototype._calculateNodeKeyFrames.call(this,H_a),this._nodeIDAniDic[H_a.target]=H_a},H_a.getNodeDataByID=function(H_a){return this._nodeIDAniDic[H_a]},H_a._getParams=function(H_a,H_b,H_c,H_d){var H_e=H_E._temParam;H_e.length=H_b.length;var H_f=0,H_g=H_b.length;for(H_f=0;H_f<H_g;H_f++)H_e[H_f]=this._getObjVar(H_a,H_b[H_f][0],H_c,H_b[H_f][1],H_d);return H_e},H_a._getObjVar=function(H_a,H_b,H_c,H_d,H_e){if(H_a.hasOwnProperty(H_b)){var H_f=H_a[H_b];if(H_c>=H_f.length&&(H_c=H_f.length-1),null!=H_a[H_b][H_c])return H_a[H_b][H_c]}return H_e.hasOwnProperty(H_b)?H_e[H_b]:H_d},H_a._getNodeGraphicData=function(H_a,H_b,H_c){H_c||(H_c=H_D.create()),H_c.transform?H_c.transform.identity():H_c.transform=H_G.create();var H_d=this.getNodeDataByID(H_a);if(!H_d)return H_c;var H_e,H_f,H_g=H_d.frames,H_h=this._getParams(H_g,H_E._drawTextureCmd,H_b,this._nodeDefaultProps[H_a]),H_i=H_h[0],H_j=NaN,H_k=NaN,H_l=H_h[5],H_m=H_h[6],H_n=H_h[13],H_q=H_h[14],H_r=H_h[7],H_s=H_h[8],H_t=H_h[9],H_u=H_h[11],H_v=H_h[12];H_j=H_h[3],H_k=H_h[4],0!=H_j&&0!=H_k||(H_i=null),-1==H_j&&(H_j=0),-1==H_k&&(H_k=0),H_c.skin=H_i,H_c.width=H_j,H_c.height=H_k,H_i&&((H_e=this._getTextureByUrl(H_i))?(H_j||(H_j=H_e.sourceWidth),H_k||(H_k=H_e.sourceHeight)):console.warn("lost skin:",H_i,",you may load pics first")),H_c.alpha=H_h[10],H_f=H_c.transform,0!=H_n&&(H_l=H_n*H_j),0!=H_q&&(H_m=H_q*H_k),0==H_l&&0==H_m||H_f.translate(-H_l,-H_m);var H_w=null;if(H_t||1!==H_r||1!==H_s||H_u||H_v){(H_w=H_E._tempMt).identity(),H_w.bTransform=!0;var H_x=.0174532922222222*(H_t-H_u),H_y=.0174532922222222*(H_t+H_v),H_z=Math.cos(H_y),H_A=Math.sin(H_y),H_B=Math.sin(H_x),H_C=Math.cos(H_x);H_w.a=H_r*H_z,H_w.b=H_r*H_A,H_w.c=-H_s*H_B,H_w.d=H_s*H_C,H_w.tx=H_w.ty=0}return H_w&&(H_f=H_G.mul(H_f,H_w,H_f)),H_f.translate(H_h[1],H_h[2]),H_c},H_a._getTextureByUrl=function(H_a){return H_ha.getRes(H_a)},H_a.setAniData=function(H_a,H_b){if(H_a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H_a,this._parseNodeList(H_a);var H_c,H_d={},H_e=[],H_f=H_a.animations,H_g=0,H_h=H_f.length;for(H_g=0;H_g<H_h;H_g++)if(H_c=H_f[H_g],this._labels=null,(!H_b||H_b==H_c.name)&&H_c){try{this._calGraphicData(H_c)}catch(H_a){console.warn("parse animation fail:"+H_c.name+",empty animation created"),this._gList=[]}var H_i={};H_i.interval=1e3/H_c.frameRate,H_i.frames=this._gList,H_i.labels=this._labels,H_i.name=H_c.name,H_e.push(H_i),H_d[H_c.name]=H_i}this.animationList=H_e,this.animationDic=H_d}H_E._temParam.length=0},H_a.parseByData=function(H_a){var H_b,H_c;H_b=H_a.nodeRoot,H_c=H_a.aniO,delete H_a.nodeRoot,delete H_a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H_b,this._parseNodeList(H_b),this._labels=null;try{this._calGraphicData(H_c)}catch(H_a){console.warn("parse animation fail:"+H_c.name+",empty animation created"),this._gList=[]}var H_d=H_a;return H_d.interval=1e3/H_c.frameRate,H_d.frames=this._gList,H_d.labels=this._labels,H_d.name=H_c.name,H_d},H_a.setUpAniData=function(H_a){if(H_a.animations){var H_b,H_c={},H_d=[],H_e=H_a.animations,H_f=0,H_g=H_e.length;for(H_f=0;H_f<H_g;H_f++)if(H_b=H_e[H_f]){var H_h={};H_h.name=H_b.name,H_h.aniO=H_b,H_h.nodeRoot=H_a,H_d.push(H_h),H_c[H_b.name]=H_h}this.animationList=H_d,this.animationDic=H_c}},H_a._clear=function(){var H_a,H_b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(H_a in this._nodeGDic)(H_b=this._nodeGDic[H_a])&&H_b.recover();this._nodeGDic=null},H_E.parseAnimationByData=function(H_a){var H_b;return H_E._I||(H_E._I=new H_E),H_b=H_E._I.parseByData(H_a),H_E._I._clear(),H_b},H_E.parseAnimationData=function(H_a){var H_b;return H_E._I||(H_E._I=new H_E),H_E._I.setUpAniData(H_a),(H_b={}).animationList=H_E._I.animationList,H_b.animationDic=H_E._I.animationDic,H_E._I._clear(),H_b},H_E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],H_E._temParam=[],H_E._I=null,H_E._rootMatrix=null,H_i(H_E,["_tempMt",function(){return this._tempMt=new H_G}]),H_E.__init$=function(){H_D=function(){function H_a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return H_k(H_a,""),H_a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),H_W.recover("GraphicNode",this)},H_a.create=function(){return H_W.getItemByClass("GraphicNode",H_a)},H_a}()},H_E}(H_wa));H_z.__init([H_j,H_ia,H_J,H_O,H_Y,H_C,H_a,H_za])}(window,document,Laya),function(H_a,H_b,H_c){H_c.un,H_c.uns,H_c.static;var H_d=H_c.class;H_c.getset,H_c.__newvec;new(function(){function H_a(){}return H_d(H_a,"LayaMain"),H_a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}}),function(H_a,H_b,H_y){H_y.un,H_y.uns;var H_g=H_y.static,H_m=H_y.class,H_d=H_y.getset,H_f=H_y.__newvec,H_k=laya.maths.Arith,H_l=laya.maths.Bezier,H_c=laya.resource.Bitmap,H_n=laya.utils.Browser,H_i=laya.utils.Byte,H_q=laya.utils.Color,H_z=(laya.filters.ColorFilter,H_y.Config),H_e=laya.resource.Context,H_A=(laya.events.Event,laya.filters.Filter),H_h=laya.display.Graphics,H_j=laya.resource.HTMLCanvas,H_r=(laya.utils.HTMLChar,laya.resource.HTMLImage),H_s=laya.resource.HTMLSubImage,H_B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),H_C=laya.maths.Point,H_D=laya.maths.Rectangle,H_t=laya.renders.Render,H_u=(laya.renders.RenderContext,laya.renders.RenderSprite),H_v=laya.resource.Resource,H_w=laya.resource.ResourceManager,H_x=laya.utils.RunDriver,H_E=laya.display.Sprite,H_F=laya.display.Stage,H_G=laya.utils.Stat,H_H=laya.utils.StringKey,H_I=(laya.display.css.Style,laya.system.System),H_J=laya.display.Text,H_K=laya.resource.Texture,H_L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),H_M=laya.utils.VectorGraphManager;laya.utils.WordText;H_y.interface("laya.webgl.shapes.IShape"),H_y.interface("laya.webgl.submit.ISubmit"),H_y.interface("laya.webgl.text.ICharSegment"),H_y.interface("laya.webgl.canvas.save.ISaveData"),H_y.interface("laya.webgl.resource.IMergeAtlasBitmap"),H_y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var H_N=function(){function H_a(){}H_m(H_a,"laya.filters.webgl.FilterActionGL");var H_b=H_a.prototype;return H_y.imps(H_b,{"laya.filters.IFilterActionGL":!0}),H_b.setValue=function(H_a){},H_b.setValueMix=function(H_a){},H_b.apply3d=function(H_a,H_b,H_c,H_d,H_e){return null},H_b.apply=function(H_a){return null},H_d(0,H_b,"typeMix",function(){return 0}),H_a}(),H_O=function(){function H_a(){}return H_m(H_a,"laya.webgl.shader.ShaderValue"),H_a}(),H_P=function(){var H_d,H_e;function H_a(H_a,H_b,H_c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new H_e,void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),this._cells=null,this._rowInfo=null,this._init(H_a,H_b),this._atlasID=H_c}H_m(H_a,"laya.webgl.atlas.AtlasGrid");var H_b=H_a.prototype;return H_b.getAltasID=function(){return this._atlasID},H_b.setAltasID=function(H_a){0<=H_a&&(this._atlasID=H_a)},H_b.addTex=function(H_a,H_b,H_c){var H_d=this._get(H_b,H_c);return 0==H_d.ret||(this._fill(H_d.x,H_d.y,H_b,H_c,H_a),this._texCount++),H_d},H_b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},H_b._init=function(H_a,H_b){if(this._width=H_a,this._height=H_b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=H_f(this._height);for(var H_c=0;H_c<this._height;H_c++)this._rowInfo[H_c]=new H_d;return this._clear(),!0},H_b._get=function(H_a,H_b){var H_c=new H_R;if(H_a>=this._failSize.width&&H_b>=this._failSize.height)return H_c;for(var H_d=-1,H_e=-1,H_f=this._width,H_g=this._height,H_h=this._cells,H_i=0;H_i<H_g;H_i++)if(!(this._rowInfo[H_i].spaceCount<H_a))for(var H_j=0;H_j<H_f;){var H_k=3*(H_i*H_f+H_j);if(0!=H_h[H_k]||H_h[1+H_k]<H_a||H_h[2+H_k]<H_b)H_j+=H_h[1+H_k];else{H_d=H_j,H_e=H_i;for(var H_l=0;H_l<H_a;H_l++)if(H_h[3*H_l+H_k+2]<H_b){H_d=-1;break}if(!(H_d<0))return H_c.ret=!0,H_c.x=H_d,H_c.y=H_e,H_c;H_j+=H_h[1+H_k]}}return H_c},H_b._fill=function(H_a,H_b,H_c,H_d,H_e){var H_f=this._width,H_g=this._height;this._check(H_a+H_c<=H_f&&H_b+H_d<=H_g);for(var H_h=H_b;H_h<H_d+H_b;++H_h){this._check(this._rowInfo[H_h].spaceCount>=H_c),this._rowInfo[H_h].spaceCount-=H_c;for(var H_i=0;H_i<H_c;H_i++){var H_j=3*(H_a+H_h*H_f+H_i);this._check(0==this._cells[H_j]),this._cells[H_j]=H_e,this._cells[1+H_j]=H_c,this._cells[2+H_j]=H_d}}if(0<H_a)for(H_h=0;H_h<H_d;++H_h){var H_k=0;for(H_i=H_a-1;0<=H_i&&0==this._cells[3*((H_b+H_h)*H_f+H_i)];--H_i,++H_k);for(H_i=H_k;0<H_i;--H_i)this._cells[3*((H_b+H_h)*H_f+H_a-H_i)+1]=H_i,this._check(0<H_i)}if(0<H_b)for(H_i=H_a;H_i<H_a+H_c;++H_i){for(H_k=0,H_h=H_b-1;0<=H_h&&0==this._cells[3*(H_i+H_h*H_f)];--H_h,H_k++);for(H_h=H_k;0<H_h;--H_h)this._cells[3*(H_i+(H_b-H_h)*H_f)+2]=H_h,this._check(0<H_h)}},H_b._check=function(H_a){0==H_a&&console.log("xtexMerger 错误啦")},H_b._clear=function(){for(var H_a=this._texCount=0;H_a<this._height;H_a++)this._rowInfo[H_a].spaceCount=this._width;for(var H_b=0;H_b<this._height;H_b++)for(var H_c=0;H_c<this._width;H_c++){var H_d=3*(H_b*this._width+H_c);this._cells[H_d]=0,this._cells[1+H_d]=this._width-H_c,this._cells[2+H_d]=this._width-H_b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},H_a.__init$=function(){H_d=function(){function H_a(){this.spaceCount=0}return H_m(H_a,""),H_a}(),H_e=function(){function H_a(){this.width=0,this.height=0}return H_m(H_a,""),H_a}()},H_a}(),H_Q=function(){function H_t(H_a,H_b,H_c,H_d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=H_a,this._height=H_b,this._gridSize=H_c,this._maxAtlaserCount=H_d,this._gridNumX=H_a/H_c,this._gridNumY=H_b/H_c,this._curAtlasIndex=0,this._atlaserArray=[]}H_m(H_t,"laya.webgl.atlas.AtlasResourceManager");var H_a=H_t.prototype;return H_a.setAtlasParam=function(H_a,H_b,H_c,H_d){if(1==this._setAtlasParam)return H_t._sid_=0,this._width=H_a,this._height=H_b,this._gridSize=H_c,this._maxAtlaserCount=H_d,this._gridNumX=H_a/H_c,this._gridNumY=H_b/H_c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},H_a.pushData=function(H_a){var H_b,H_c=H_a.bitmap,H_d=-1,H_e=null,H_f=0,H_g=0;for(H_f=0,H_b=this._atlaserArray.length;H_f<H_b&&(H_g=(this._curAtlasIndex+H_f)%H_b,-1==(H_d=(H_e=this._atlaserArray[H_g]).findBitmapIsExist(H_c)));H_f++);if(-1!=H_d){var H_h=H_e.InAtlasWebGLImagesOffsetValue[H_d];return H_q=H_h[0],H_r=H_h[1],H_e.addToAtlas(H_a,H_q,H_r),!0}this._setAtlasParam=!1;for(var H_i=Math.ceil((H_a.bitmap.width+2)/this._gridSize),H_j=Math.ceil((H_a.bitmap.height+2)/this._gridSize),H_k=!1,H_l=0;H_l<2;H_l++){var H_m=this._maxAtlaserCount;for(H_f=0;H_f<H_m;H_f++){H_g=(this._curAtlasIndex+H_f)%H_m,this._atlaserArray.length-1>=H_g||this._atlaserArray.push(new H_Da(this._gridNumX,this._gridNumY,this._width,this._height,H_t._sid_++));var H_n=this._atlaserArray[H_g],H_q=0,H_r=0,H_s=H_n.addTex(1,H_i,H_j);if(H_s.ret){H_q=H_s.x*this._gridSize+1,H_r=H_s.y*this._gridSize+1,H_c.lock=!0,H_n.addToAtlasTexture(H_c,H_q,H_r),H_n.addToAtlas(H_a,H_q,H_r),H_k=!0,this._curAtlasIndex=H_g;break}}if(H_k)break;this._atlaserArray.push(new H_Da(this._gridNumX,this._gridNumY,this._width,this._height,H_t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return H_k||console.log(">>>AtlasManager pushData error"),H_k},H_a.addToAtlas=function(H_a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(H_a)},H_a.garbageCollection=function(){if(!0===this._needGC){for(var H_a=this._atlaserArray.length-this._maxAtlaserCount,H_b=0;H_b<H_a;H_b++)this._atlaserArray[H_b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+H_a),this._atlaserArray.splice(0,H_a),this._needGC=!1}return!0},H_a.freeAll=function(){for(var H_a=0,H_b=this._atlaserArray.length;H_a<H_b;H_a++)this._atlaserArray[H_a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},H_a.getAtlaserCount=function(){return this._atlaserArray.length},H_a.getAtlaserByIndex=function(H_a){return this._atlaserArray[H_a]},H_d(1,H_t,"instance",function(){return H_t._Instance||(H_t._Instance=new H_t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),H_t._Instance}),H_d(1,H_t,"enabled",function(){return H_z.atlasEnable}),H_d(1,H_t,"atlasLimitWidth",function(){return H_t._atlasLimitWidth},function(H_a){H_t._atlasLimitWidth=H_a}),H_d(1,H_t,"atlasLimitHeight",function(){return H_t._atlasLimitHeight},function(H_a){H_t._atlasLimitHeight=H_a}),H_t._enable=function(){H_z.atlasEnable=!0},H_t._disable=function(){H_z.atlasEnable=!1},H_t.__init__=function(){H_t.atlasTextureWidth=2048,H_t.atlasTextureHeight=2048,H_t.maxTextureCount=6,H_t.atlasLimitWidth=512,H_t.atlasLimitHeight=512},H_t._atlasLimitWidth=0,H_t._atlasLimitHeight=0,H_t.gridSize=16,H_t.atlasTextureWidth=0,H_t.atlasTextureHeight=0,H_t.maxTextureCount=0,H_t._atlasRestore=0,H_t.BOARDER_TYPE_NO=0,H_t.BOARDER_TYPE_RIGHT=1,H_t.BOARDER_TYPE_LEFT=2,H_t.BOARDER_TYPE_BOTTOM=4,H_t.BOARDER_TYPE_TOP=8,H_t.BOARDER_TYPE_ALL=15,H_t._sid_=0,H_t._Instance=null,H_t}(),H_R=function(){function H_a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return H_m(H_a,"laya.webgl.atlas.MergeFillInfo"),H_a}(),H_S=function(){function H_b(){}return H_m(H_b,"laya.webgl.canvas.BlendMode"),H_b._init_=function(H_a){H_b.fns=[H_b.BlendNormal,H_b.BlendAdd,H_b.BlendMultiply,H_b.BlendScreen,H_b.BlendOverlay,H_b.BlendLight,H_b.BlendMask,H_b.BlendDestinationOut],H_b.targetFns=[H_b.BlendNormalTarget,H_b.BlendAddTarget,H_b.BlendMultiplyTarget,H_b.BlendScreenTarget,H_b.BlendOverlayTarget,H_b.BlendLightTarget,H_b.BlendMask,H_b.BlendDestinationOut]},H_b.BlendNormal=function(H_a){H_a.blendFunc(1,771)},H_b.BlendAdd=function(H_a){H_a.blendFunc(1,772)},H_b.BlendMultiply=function(H_a){H_a.blendFunc(774,771)},H_b.BlendScreen=function(H_a){H_a.blendFunc(1,1)},H_b.BlendOverlay=function(H_a){H_a.blendFunc(1,769)},H_b.BlendLight=function(H_a){H_a.blendFunc(1,1)},H_b.BlendNormalTarget=function(H_a){H_a.blendFunc(1,771)},H_b.BlendAddTarget=function(H_a){H_a.blendFunc(1,772)},H_b.BlendMultiplyTarget=function(H_a){H_a.blendFunc(774,771)},H_b.BlendScreenTarget=function(H_a){H_a.blendFunc(1,1)},H_b.BlendOverlayTarget=function(H_a){H_a.blendFunc(1,769)},H_b.BlendLightTarget=function(H_a){H_a.blendFunc(1,1)},H_b.BlendMask=function(H_a){H_a.blendFunc(0,770)},H_b.BlendDestinationOut=function(H_a){H_a.blendFunc(0,0)},H_b.activeBlendFunction=null,H_b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],H_b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},H_b.NORMAL="normal",H_b.ADD="add",H_b.MULTIPLY="multiply",H_b.SCREEN="screen",H_b.LIGHT="light",H_b.OVERLAY="overlay",H_b.DESTINATIONOUT="destination-out",H_b.fns=[],H_b.targetFns=[],H_b}(),H_T=function(){function H_c(H_a){this._color=H_q.create("black"),this.setValue(H_a)}H_m(H_c,"laya.webgl.canvas.DrawStyle");var H_a=H_c.prototype;return H_a.setValue=function(H_a){if(H_a){if("string"==typeof H_a)return void(this._color=H_q.create(H_a));if(H_a instanceof laya.utils.Color)return void(this._color=H_a)}},H_a.reset=function(){this._color=H_q.create("black")},H_a.equal=function(H_a){return"string"==typeof H_a?this._color.strColor===H_a:H_a instanceof laya.utils.Color&&this._color.numColor===H_a.numColor},H_a.toColorStr=function(){return this._color.strColor},H_c.create=function(H_a){var H_b;if(H_a&&("string"==typeof H_a?H_b=H_q.create(H_a):H_a instanceof laya.utils.Color&&(H_b=H_a),H_b))return H_b._drawStyle||(H_b._drawStyle=new H_c(H_a));return laya.webgl.canvas.DrawStyle.DEFAULT},H_g(H_c,["DEFAULT",function(){return this.DEFAULT=new H_c("#000000")}]),H_c}(),H_U=function(){function H_a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];H_wa.mainContext;this.ib=H_oa.create(35048),this.vb=H_pa.create(5)}H_m(H_a,"laya.webgl.canvas.Path");var H_b=H_a.prototype;return H_b.addPoint=function(H_a,H_b){this.tempArray.push(H_a,H_b)},H_b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},H_b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},H_b.polygon=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g;return this.geomatrys.push(this._curGeomatry=H_g=new H_Ha(H_a,H_b,H_c,H_d,H_e,H_f)),H_d||(H_g.fill=!1),null==H_f&&(H_g.borderWidth=0),H_g},H_b.setGeomtry=function(H_a){this.geomatrys.push(this._curGeomatry=H_a)},H_b.drawLine=function(H_a,H_b,H_c,H_d,H_e){var H_f;return this.closePath?this.geomatrys.push(this._curGeomatry=H_f=new H_Ga(H_a,H_b,H_c,H_d,H_e)):this.geomatrys.push(this._curGeomatry=H_f=new H_Fa(H_a,H_b,H_c,H_d,H_e)),H_f.fill=!1,H_f},H_b.update=function(){var H_a=this.ib._byteLength,H_b=this.geomatrys.length;this.offset=H_a;for(var H_c=this.geoStart;H_c<H_b;H_c++)this.geomatrys[H_c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=H_b,this.count=(this.ib._byteLength-H_a)/H_ra.BYTES_PIDX},H_b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},H_b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},H_a}(),H_V=function(){function H_h(){}H_m(H_h,"laya.webgl.canvas.save.SaveBase");var H_a=H_h.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!1},H_a.restore=function(H_a){this._dataObj[this._valueName]=this._value,(H_h._cache[H_h._cache._length++]=this)._newSubmit&&(H_a._curSubmit=H_fa.RENDERBASE,H_a._renderKey=0)},H_h._createArray=function(){var H_a=[];return H_a._length=0,H_a},H_h._init=function(){var H_a=H_h._namemap={};return H_a[1]="ALPHA",H_a[2]="fillStyle",H_a[8]="font",H_a[256]="lineWidth",H_a[512]="strokeStyle",H_a[8192]="_mergeID",H_a[1024]=H_a[2048]=H_a[4096]=[],H_a[16384]="textBaseline",H_a[32768]="textAlign",H_a[65536]="_nBlendType",H_a[1048576]="shader",H_a[2097152]="filters",H_a},H_h.save=function(H_a,H_b,H_c,H_d){if((H_a._saveMark._saveuse&H_b)!==H_b){H_a._saveMark._saveuse|=H_b;var H_e=H_h._cache,H_f=0<H_e._length?H_e[--H_e._length]:new H_h;H_f._value=H_c[H_f._valueName=H_h._namemap[H_b]],H_f._dataObj=H_c,H_f._newSubmit=H_d;var H_g=H_a._save;H_g[H_g._length++]=H_f}},H_h._cache=laya.webgl.canvas.save.SaveBase._createArray(),H_h._namemap=H_h._init(),H_h}(),H_W=function(){function H_f(){this._clipRect=new H_D}H_m(H_f,"laya.webgl.canvas.save.SaveClipRect");var H_a=H_f.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!1},H_a.restore=function(H_a){H_a._clipRect=this._clipSaveRect,(H_f._cache[H_f._cache._length++]=this)._submitScissor.submitLength=H_a._submits._length-this._submitScissor.submitIndex,H_a._curSubmit=H_fa.RENDERBASE,H_a._renderKey=0},H_f.save=function(H_a,H_b){if(131072!=(131072&H_a._saveMark._saveuse)){H_a._saveMark._saveuse|=131072;var H_c=H_f._cache,H_d=0<H_c._length?H_c[--H_c._length]:new H_f;H_d._clipSaveRect=H_a._clipRect,H_a._clipRect=H_d._clipRect.copyFrom(H_a._clipRect),H_d._submitScissor=H_b;var H_e=H_a._save;H_e[H_e._length++]=H_d}},H_g(H_f,["_cache",function(){return this._cache=H_V._createArray()}]),H_f}(),H_X=function(){function H_n(){this._contextX=0,this._contextY=0,this._clipRect=new H_D,this._rect=new H_D,this._matrix=new H_B}H_m(H_n,"laya.webgl.canvas.save.SaveClipRectStencil");var H_a=H_n.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!1},H_a.restore=function(H_a){H_ka.restore(H_a,this._rect,this._saveMatrix,this._contextX,this._contextY),H_a._clipRect=this._clipSaveRect,H_a._curMat=this._saveMatrix,H_a._x=this._contextX,H_a._y=this._contextY,H_n._cache[H_n._cache._length++]=this,H_a._curSubmit=H_fa.RENDERBASE},H_n.save=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){if(262144!=(262144&H_a._saveMark._saveuse)){H_a._saveMark._saveuse|=262144;var H_k=H_n._cache,H_l=0<H_k._length?H_k[--H_k._length]:new H_n;H_l._clipSaveRect=H_a._clipRect,H_l._clipRect.setTo(H_g,H_h,H_i,H_j),H_a._clipRect=H_l._clipRect,H_l._rect.x=H_c,H_l._rect.y=H_d,H_l._rect.width=H_e,H_l._rect.height=H_f,H_l._contextX=H_a._x,H_l._contextY=H_a._y,H_l._saveMatrix=H_a._curMat,H_a._curMat.copyTo(H_l._matrix),H_a._curMat=H_l._matrix,H_l._submitStencil=H_b;var H_m=H_a._save;H_m[H_m._length++]=H_l}},H_g(H_n,["_cache",function(){return this._cache=H_V._createArray()}]),H_n}(),H_Y=function(){function H_d(){this._saveuse=0}H_m(H_d,"laya.webgl.canvas.save.SaveMark");var H_a=H_d.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!0},H_a.restore=function(H_a){H_a._saveMark=this._preSaveMark,H_d._no[H_d._no._length++]=this},H_d.Create=function(H_a){var H_b=H_d._no,H_c=0<H_b._length?H_b[--H_b._length]:new H_d;return H_c._saveuse=0,H_c._preSaveMark=H_a._saveMark,H_a._saveMark=H_c},H_g(H_d,["_no",function(){return this._no=H_V._createArray()}]),H_d}(),H_Z=function(){function H_f(){this._matrix=new H_B}H_m(H_f,"laya.webgl.canvas.save.SaveTransform");var H_a=H_f.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!1},H_a.restore=function(H_a){H_a._curMat=this._savematrix,H_f._no[H_f._no._length++]=this},H_f.save=function(H_a){var H_b=H_a._saveMark;if(2048!=(2048&H_b._saveuse)){H_b._saveuse|=2048;var H_c=H_f._no,H_d=0<H_c._length?H_c[--H_c._length]:new H_f;H_d._savematrix=H_a._curMat,H_a._curMat=H_a._curMat.copyTo(H_d._matrix);var H_e=H_a._save;H_e[H_e._length++]=H_d}},H_g(H_f,["_no",function(){return this._no=H_V._createArray()}]),H_f}(),H_$=function(){function H_e(){}H_m(H_e,"laya.webgl.canvas.save.SaveTranslate");var H_a=H_e.prototype;return H_y.imps(H_a,{"laya.webgl.canvas.save.ISaveData":!0}),H_a.isSaveMark=function(){return!1},H_a.restore=function(H_a){H_a._curMat;H_a._x=this._x,H_a._y=this._y,H_e._no[H_e._no._length++]=this},H_e.save=function(H_a){var H_b=H_e._no,H_c=0<H_b._length?H_b[--H_b._length]:new H_e;H_c._x=H_a._x,H_c._y=H_a._y;var H_d=H_a._save;H_d[H_d._length++]=H_c},H_g(H_e,["_no",function(){return this._no=H_V._createArray()}]),H_e}(),H__=function(){function H_a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new H_D}H_m(H_a,"laya.webgl.resource.RenderTargetMAX");var H_b=H_a.prototype;return H_b.setSP=function(H_a){this._sp=H_a},H_b.size=function(H_a,H_b){var H_c=this;this._width!==H_a||this._height!==H_b?(this.repaint=!0,this._width=H_a,this._height=H_b,this.target?this.target.size(H_a,H_b):this.target=H_Ma.create(H_a,H_b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(H_a){H_y.timer.callLater(H_c._sp,H_c._sp.repaint)})):this.target.size(H_a,H_b)},H_b._flushToTarget=function(H_a,H_b){if(!H_b._destroy){var H_c=H_ua.worldScissorTest,H_d=H_ua.worldClipRect;H_ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,H_ua.worldScissorTest=!1,H_wa.mainContext.disable(3089);var H_e=H_ua.worldAlpha,H_f=H_ua.worldMatrix4,H_g=H_ua.worldMatrix,H_h=H_ua.worldFilters,H_i=H_ua.worldShaderDefines;if(H_ua.worldMatrix=H_B.EMPTY,H_ua.restoreTempArray(),H_ua.worldMatrix4=H_ua.TEMPMAT4_ARRAY,H_ua.worldAlpha=1,H_ua.worldFilters=null,H_ua.worldShaderDefines=null,H_La.activeShader=null,H_b.start(),H_z.showCanvasMark?H_b.clear(0,1,0,.3):H_b.clear(0,0,0,0),H_a.flush(),H_b.end(),H_La.activeShader=null,H_ua.worldAlpha=H_e,H_ua.worldMatrix4=H_f,H_ua.worldMatrix=H_g,H_ua.worldFilters=H_h,H_ua.worldShaderDefines=H_i,H_ua.worldScissorTest=H_c){var H_j=H_ua.height-H_d.y-H_d.height;H_wa.mainContext.scissor(H_d.x,H_j,H_d.width,H_d.height),H_wa.mainContext.enable(3089)}H_ua.worldClipRect=H_d}},H_b.flush=function(H_a){this.repaint&&(this._flushToTarget(H_a,this.target),this.repaint=!1)},H_b.drawTo=function(H_a,H_b,H_c,H_d,H_e){H_a.drawTexture(this.target.getTexture(),H_b,H_c,H_d,H_e,0,0)},H_b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},H_a}(),H_o=function(){function H_a(){this.ALPHA=1,this.shaderType=0,this.defines=new H_Ea}return H_m(H_a,"laya.webgl.shader.d2.Shader2D"),H_a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},H_a.__init__=function(){var H_a,H_b;H_Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),H_Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),H_Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),H_Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),H_Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),H_Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),H_Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),H_Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),H_a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H_b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H_Ya.preCompile2D(0,1,H_a,H_b,null),H_a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",H_b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',H_Ya.preCompile2D(0,2,H_a,H_b,null),H_a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",H_b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",H_Ya.preCompile2D(0,4,H_a,H_b,null),H_a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H_b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H_Ya.preCompile2D(0,256,H_a,H_b,null),H_a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",H_b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",H_Ya.preCompile2D(0,512,H_a,H_b,null)},H_a}(),H_p=function(){function H_b(H_a,H_b,H_c){this._value=0,this._name2int=H_a,this._int2name=H_b,this._int2nameMap=H_c}H_m(H_b,"laya.webgl.shader.ShaderDefines");var H_a=H_b.prototype;return H_a.add=function(H_a){return"string"==typeof H_a&&(H_a=this._name2int[H_a]),this._value|=H_a,this._value},H_a.addInt=function(H_a){return this._value|=H_a,this._value},H_a.remove=function(H_a){return"string"==typeof H_a&&(H_a=this._name2int[H_a]),this._value&=~H_a,this._value},H_a.isDefine=function(H_a){return(this._value&H_a)===H_a},H_a.getValue=function(){return this._value},H_a.setValue=function(H_a){this._value=H_a},H_a.toNameDic=function(){var H_a=this._int2nameMap[this._value];return H_a||H_b._toText(this._value,this._int2name,this._int2nameMap)},H_b._reg=function(H_a,H_b,H_c,H_d){H_d[H_c[H_a]=H_b]=H_a},H_b._toText=function(H_a,H_b,H_c){var H_d=H_c[H_a];if(H_d)return H_d;for(var H_e={},H_f=1,H_g=0;H_g<32&&!(H_a<(H_f=1<<H_g));H_g++)if(H_a&H_f){var H_h=H_b[H_f];H_h&&(H_e[H_h]="")}return H_c[H_a]=H_e},H_b._toInt=function(H_a,H_b){for(var H_c=H_a.split("."),H_d=0,H_e=0,H_f=H_c.length;H_e<H_f;H_e++){var H_g=H_b[H_c[H_e]];if(!H_g)throw new Error("Defines to int err:"+H_a+"/"+H_c[H_e]);H_d|=H_g}return H_d},H_b}(),H_aa=function(){function H_g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new H_B}H_m(H_g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var H_a=H_g.prototype;return H_a.init=function(H_a,H_b,H_c){if(H_b)this._vs=H_b;else{this._vs=[];var H_d=H_a.width,H_e=H_a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(H_d,0,1,0,1,1,1,1),this._vs.push(H_d,H_e,1,1,1,1,1,1),this._vs.push(0,H_e,0,1,1,1,1,1)}H_c?this._ps=H_c:(H_g._defaultPS||(H_g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=H_g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=H_a},H_a.init2=function(H_a,H_b,H_c,H_d,H_e){this.transform&&(this.transform=null),H_c?this._ps=H_c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=H_d,this._uvs=H_e,this.mEleNum=this._ps.length,this.mTexture=H_a,(H_t.isConchNode||H_t.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},H_a._initMyData=function(){var H_a=0,H_b=0,H_c=4*this._verticles.length;this._vs=H_g._tempVS;var H_d=!1;if(H_t.isConchNode||H_t.isConchApp?(this._vs.length=H_c,H_d=!0):this._vs.length<H_c&&(this._vs.length=H_c,H_d=!0),H_g._tVSLen=H_c,H_d)for(;H_a<H_c;)this._vs[H_a]=this._verticles[H_b],this._vs[H_a+1]=this._verticles[H_b+1],this._vs[H_a+2]=this._uvs[H_b],this._vs[H_a+3]=this._uvs[H_b+1],this._vs[H_a+4]=1,this._vs[H_a+5]=1,this._vs[H_a+6]=1,this._vs[H_a+7]=1,H_a+=8,H_b+=2;else for(;H_a<H_c;)this._vs[H_a]=this._verticles[H_b],this._vs[H_a+1]=this._verticles[H_b+1],this._vs[H_a+2]=this._uvs[H_b],this._vs[H_a+3]=this._uvs[H_b+1],H_a+=8,H_b+=2},H_a.getData2=function(H_a,H_b,H_c){var H_d;this.mVBBuffer=H_a,this.mIBBuffer=H_b,this._initMyData(),H_a.appendEx2(this._vs,Float32Array,H_g._tVSLen,4),this._indexStart=H_b._byteLength,(H_d=H_g._tempIB).length<this._ps.length&&(H_d.length=this._ps.length);for(var H_e=0,H_f=this._ps.length;H_e<H_f;H_e++)H_d[H_e]=this._ps[H_e]+H_c;H_b.appendEx2(H_d,Uint16Array,this._ps.length,2)},H_a.getData=function(H_a,H_b,H_c){if(this.mVBBuffer=H_a,this.mIBBuffer=H_b,H_a.append(this.mVBData),this._indexStart=H_b._byteLength,this.mIBData.start!=H_c){for(var H_d=0,H_e=this._ps.length;H_d<H_e;H_d++)this.mIBData[H_d]=this._ps[H_d]+H_c;this.mIBData.start=H_c}H_b.append(this.mIBData)},H_a.render=function(H_a,H_b,H_c){if(H_t.isWebGL&&this.mTexture){H_a._renderKey=0,H_a._shader2D.glTexture=null,H_ba.getInstance().addSkinMesh(this);var H_d=H_fa.createShape(H_a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,H_Aa.create(512,0));this.transform||(this.transform=H_B.EMPTY),this.transform.translate(H_b,H_c),H_B.mul(this.transform,H_a._curMat,this._tempMatrix),this.transform.translate(-H_b,-H_c);var H_e=H_d.shaderValue,H_f=H_e.u_mmat2||H_ua.getMatrArray();H_ua.mat2MatArray(this._tempMatrix,H_f),H_e.textureHost=this.mTexture,H_e.offsetX=0,H_e.offsetY=0,H_e.u_mmat2=H_f,H_e.ALPHA=H_a._shader2D.ALPHA,H_a._submits[H_a._submits._length++]=H_d}else H_t.isConchApp&&this.mTexture&&(this.transform||(this.transform=H_B.EMPTY),H_a.setSkinMesh&&H_a.setSkinMesh(H_b,H_c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},H_g._tempVS=[],H_g._tempIB=[],H_g._defaultPS=null,H_g._tVSLen=0,H_g}(),H_ba=function(){function H_a(){this.ib=null,this.vb=null;H_wa.mainContext;this.ib=H_oa.create(35048),this.vb=H_pa.create(8)}H_m(H_a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var H_b=H_a.prototype;return H_b.addSkinMesh=function(H_a){H_a.getData2(this.vb,this.ib,this.vb._byteLength/32)},H_b.reset=function(){this.vb.clear(),this.ib.clear()},H_a.getInstance=function(){return H_a.instance=H_a.instance||new H_a},H_a.instance=null,H_a}(),H_ca=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===H_i&&(H_i=0),this.x=H_a,this.y=H_b,this.width=H_c,this.height=H_d,this.edges=H_e,this.color=H_f,this.borderWidth=H_g,this.borderColor=H_h}H_m(H_a,"laya.webgl.shapes.BasePoly");var H_b=H_a.prototype;return H_y.imps(H_b,{"laya.webgl.shapes.IShape":!0}),H_b.getData=function(H_a,H_b,H_c){},H_b.rebuild=function(H_a){},H_b.setMatrix=function(H_a){},H_b.needUpdate=function(H_a){return!0},H_b.sector=function(H_a,H_b,H_c){var H_d=this.x,H_e=this.y,H_f=this.edges,H_g=(this.r1-this.r0)/H_f,H_h=this.width,H_i=this.height,H_j=this.color,H_k=(H_j>>16&255)/255,H_l=(H_j>>8&255)/255,H_m=(255&H_j)/255;H_a.push(H_d,H_e,H_k,H_l,H_m);for(var H_n=0;H_n<H_f+1;H_n++)H_a.push(H_d+Math.sin(H_g*H_n+this.r0)*H_h,H_e+Math.cos(H_g*H_n+this.r0)*H_i),H_a.push(H_k,H_l,H_m);for(H_n=0;H_n<H_f;H_n++)H_b.push(H_c,H_c+H_n+1,H_c+H_n+2)},H_b.createLine2=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h,H_i,H_j,H_k,H_l,H_m,H_n,H_q,H_r,H_s,H_t,H_u,H_v,H_w,H_x,H_y,H_z,H_A,H_B,H_C=H_a.concat(),H_D=H_e,H_E=this.borderColor,H_F=(H_E>>16&255)/255,H_G=(H_E>>8&255)/255,H_H=(255&H_E)/255,H_I=H_C.length/2,H_J=H_d,H_K=H_c/2;H_i=H_C[0],H_j=H_C[1],H_r=H_i-(H_k=H_C[2]),H_q=(H_q=-(H_j-(H_l=H_C[3])))/(H_B=Math.sqrt(H_q*H_q+H_r*H_r))*H_K,H_r=H_r/H_B*H_K,H_D.push(H_i-H_q+this.x,H_j-H_r+this.y,H_F,H_G,H_H,H_i+H_q+this.x,H_j+H_r+this.y,H_F,H_G,H_H);for(var H_L=1;H_L<H_I-1;H_L++)H_i=H_C[2*(H_L-1)],H_j=H_C[2*(H_L-1)+1],H_k=H_C[2*H_L],H_l=H_C[2*H_L+1],H_m=H_C[2*(H_L+1)],H_n=H_C[2*(H_L+1)+1],H_r=H_i-H_k,H_t=H_k-H_m,H_w=(-(H_q=(H_q=-(H_j-H_l))/(H_B=Math.sqrt(H_q*H_q+H_r*H_r))*H_K)+H_i)*(-(H_r=H_r/H_B*H_K)+H_l)-(-H_q+H_k)*(-H_r+H_j),H_z=(-(H_s=(H_s=-(H_l-H_n))/(H_B=Math.sqrt(H_s*H_s+H_t*H_t))*H_K)+H_m)*(-(H_t=H_t/H_B*H_K)+H_l)-(-H_s+H_k)*(-H_t+H_n),H_A=(H_u=-H_r+H_j-(-H_r+H_l))*(H_y=-H_s+H_k-(-H_s+H_m))-(H_x=-H_t+H_n-(-H_t+H_l))*(H_v=-H_q+H_k-(-H_q+H_i)),Math.abs(H_A)<.1?(H_A+=10.1,H_D.push(H_k-H_q+this.x,H_l-H_r+this.y,H_F,H_G,H_H,H_k+H_q+this.x,H_l+H_r+this.y,H_F,H_G,H_H)):(((H_g=(H_v*H_z-H_y*H_w)/H_A)-H_k)*(H_g-H_k)+((H_h=(H_x*H_w-H_u*H_z)/H_A)-H_l)+(H_h-H_l),H_D.push(H_g+this.x,H_h+this.y,H_F,H_G,H_H,H_k-(H_g-H_k)+this.x,H_l-(H_h-H_l)+this.y,H_F,H_G,H_H));H_i=H_C[H_C.length-4],H_j=H_C[H_C.length-3],H_r=H_i-(H_k=H_C[H_C.length-2]),H_q=(H_q=-(H_j-(H_l=H_C[H_C.length-1])))/(H_B=Math.sqrt(H_q*H_q+H_r*H_r))*H_K,H_r=H_r/H_B*H_K,H_D.push(H_k-H_q+this.x,H_l-H_r+this.y,H_F,H_G,H_H,H_k+H_q+this.x,H_l+H_r+this.y,H_F,H_G,H_H);var H_M=H_f;for(H_L=1;H_L<H_M;H_L++)H_b.push(H_J+2*(H_L-1),H_J+2*(H_L-1)+1,H_J+2*H_L+1,H_J+2*H_L+1,H_J+2*H_L,H_J+2*(H_L-1));return H_D},H_b.createLine=function(H_a,H_b,H_c,H_d){var H_e=H_a.concat(),H_f=H_a,H_g=this.borderColor,H_h=(H_g>>16&255)/255,H_i=(H_g>>8&255)/255,H_j=(255&H_g)/255;H_e.splice(0,5);var H_k,H_l,H_m,H_n,H_q,H_r,H_s,H_t,H_u,H_v,H_w,H_x,H_y,H_z,H_A,H_B,H_C,H_D,H_E,H_F,H_G=H_e.length/5,H_H=H_d,H_I=H_c/2;H_m=H_e[0],H_n=H_e[1],H_v=H_m-(H_q=H_e[5]),H_u=(H_u=-(H_n-(H_r=H_e[6])))/(H_F=Math.sqrt(H_u*H_u+H_v*H_v))*H_I,H_v=H_v/H_F*H_I,H_f.push(H_m-H_u,H_n-H_v,H_h,H_i,H_j,H_m+H_u,H_n+H_v,H_h,H_i,H_j);for(var H_J=1;H_J<H_G-1;H_J++)H_m=H_e[5*(H_J-1)],H_n=H_e[5*(H_J-1)+1],H_q=H_e[5*H_J],H_r=H_e[5*H_J+1],H_s=H_e[5*(H_J+1)],H_t=H_e[5*(H_J+1)+1],H_v=H_m-H_q,H_x=H_q-H_s,H_A=(-(H_u=(H_u=-(H_n-H_r))/(H_F=Math.sqrt(H_u*H_u+H_v*H_v))*H_I)+H_m)*(-(H_v=H_v/H_F*H_I)+H_r)-(-H_u+H_q)*(-H_v+H_n),H_D=(-(H_w=(H_w=-(H_r-H_t))/(H_F=Math.sqrt(H_w*H_w+H_x*H_x))*H_I)+H_s)*(-(H_x=H_x/H_F*H_I)+H_r)-(-H_w+H_q)*(-H_x+H_t),H_E=(H_y=-H_v+H_n-(-H_v+H_r))*(H_C=-H_w+H_q-(-H_w+H_s))-(H_B=-H_x+H_t-(-H_x+H_r))*(H_z=-H_u+H_q-(-H_u+H_m)),Math.abs(H_E)<.1?(H_E+=10.1,H_f.push(H_q-H_u,H_r-H_v,H_h,H_i,H_j,H_q+H_u,H_r+H_v,H_h,H_i,H_j)):(((H_k=(H_z*H_D-H_C*H_A)/H_E)-H_q)*(H_k-H_q)+((H_l=(H_B*H_A-H_y*H_D)/H_E)-H_r)+(H_l-H_r),H_f.push(H_k,H_l,H_h,H_i,H_j,H_q-(H_k-H_q),H_r-(H_l-H_r),H_h,H_i,H_j));H_m=H_e[H_e.length-10],H_n=H_e[H_e.length-9],H_v=H_m-(H_q=H_e[H_e.length-5]),H_u=(H_u=-(H_n-(H_r=H_e[H_e.length-4])))/(H_F=Math.sqrt(H_u*H_u+H_v*H_v))*H_I,H_v=H_v/H_F*H_I,H_f.push(H_q-H_u,H_r-H_v,H_h,H_i,H_j,H_q+H_u,H_r+H_v,H_h,H_i,H_j);var H_K=this.edges+1;for(H_J=1;H_J<H_K;H_J++)H_b.push(H_H+2*(H_J-1),H_H+2*(H_J-1)+1,H_H+2*H_J+1,H_H+2*H_J+1,H_H+2*H_J,H_H+2*(H_J-1));return H_f},H_b.createLoopLine=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_a.concat(),H_h=H_e||H_a,H_i=this.borderColor,H_j=(H_i>>16&255)/255,H_k=(H_i>>8&255)/255,H_l=(255&H_i)/255;H_g.splice(0,5);var H_m=[H_g[0],H_g[1]],H_n=[H_g[H_g.length-5],H_g[H_g.length-4]],H_q=H_n[0]+.5*(H_m[0]-H_n[0]),H_r=H_n[1]+.5*(H_m[1]-H_n[1]);H_g.unshift(H_q,H_r,0,0,0),H_g.push(H_q,H_r,0,0,0);var H_s,H_t,H_u,H_v,H_w,H_x,H_y,H_z,H_A,H_B,H_C,H_D,H_E,H_F,H_G,H_H,H_I,H_J,H_K,H_L,H_M=H_g.length/5,H_N=H_d,H_O=H_c/2;H_u=H_g[0],H_v=H_g[1],H_B=H_u-(H_w=H_g[5]),H_A=(H_A=-(H_v-(H_x=H_g[6])))/(H_L=Math.sqrt(H_A*H_A+H_B*H_B))*H_O,H_B=H_B/H_L*H_O,H_h.push(H_u-H_A,H_v-H_B,H_j,H_k,H_l,H_u+H_A,H_v+H_B,H_j,H_k,H_l);for(var H_P=1;H_P<H_M-1;H_P++)H_u=H_g[5*(H_P-1)],H_v=H_g[5*(H_P-1)+1],H_w=H_g[5*H_P],H_x=H_g[5*H_P+1],H_y=H_g[5*(H_P+1)],H_z=H_g[5*(H_P+1)+1],H_B=H_u-H_w,H_D=H_w-H_y,H_G=(-(H_A=(H_A=-(H_v-H_x))/(H_L=Math.sqrt(H_A*H_A+H_B*H_B))*H_O)+H_u)*(-(H_B=H_B/H_L*H_O)+H_x)-(-H_A+H_w)*(-H_B+H_v),H_J=(-(H_C=(H_C=-(H_x-H_z))/(H_L=Math.sqrt(H_C*H_C+H_D*H_D))*H_O)+H_y)*(-(H_D=H_D/H_L*H_O)+H_x)-(-H_C+H_w)*(-H_D+H_z),H_K=(H_E=-H_B+H_v-(-H_B+H_x))*(H_I=-H_C+H_w-(-H_C+H_y))-(H_H=-H_D+H_z-(-H_D+H_x))*(H_F=-H_A+H_w-(-H_A+H_u)),Math.abs(H_K)<.1?(H_K+=10.1,H_h.push(H_w-H_A,H_x-H_B,H_j,H_k,H_l,H_w+H_A,H_x+H_B,H_j,H_k,H_l)):(((H_s=(H_F*H_J-H_I*H_G)/H_K)-H_w)*(H_s-H_w)+((H_t=(H_H*H_G-H_E*H_J)/H_K)-H_x)+(H_t-H_x),H_h.push(H_s,H_t,H_j,H_k,H_l,H_w-(H_s-H_w),H_x-(H_t-H_x),H_j,H_k,H_l));H_f&&(H_b=H_f);var H_Q=this.edges+1;for(H_P=1;H_P<H_Q;H_P++)H_b.push(H_N+2*(H_P-1),H_N+2*(H_P-1)+1,H_N+2*H_P+1,H_N+2*H_P+1,H_N+2*H_P,H_N+2*(H_P-1));return H_b.push(H_N+2*(H_P-1),H_N+2*(H_P-1)+1,H_N+1,H_N+1,H_N,H_N+2*(H_P-1)),H_h},H_a}(),H_da=function(){function H_r(){}return H_m(H_r,"laya.webgl.shapes.Earcut"),H_r.earcut=function(H_a,H_b,H_c){H_c=H_c||2;var H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k=H_b&&H_b.length,H_l=H_k?H_b[0]*H_c:H_a.length,H_m=H_r.linkedList(H_a,0,H_l,H_c,!0),H_n=[];if(!H_m)return H_n;if(H_k&&(H_m=H_r.eliminateHoles(H_a,H_b,H_m,H_c)),H_a.length>80*H_c){H_d=H_f=H_a[0],H_e=H_g=H_a[1];for(var H_q=H_c;H_q<H_l;H_q+=H_c)(H_h=H_a[H_q])<H_d&&(H_d=H_h),(H_i=H_a[H_q+1])<H_e&&(H_e=H_i),H_f<H_h&&(H_f=H_h),H_g<H_i&&(H_g=H_i);H_j=0!==(H_j=Math.max(H_f-H_d,H_g-H_e))?1/H_j:0}return H_r.earcutLinked(H_m,H_n,H_c,H_d,H_e,H_j),H_n},H_r.linkedList=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g;if(H_e===0<H_r.signedArea(H_a,H_b,H_c,H_d))for(H_f=H_b;H_f<H_c;H_f+=H_d)H_g=H_r.insertNode(H_f,H_a[H_f],H_a[H_f+1],H_g);else for(H_f=H_c-H_d;H_b<=H_f;H_f-=H_d)H_g=H_r.insertNode(H_f,H_a[H_f],H_a[H_f+1],H_g);return H_g&&H_r.equals(H_g,H_g.next)&&(H_r.removeNode(H_g),H_g=H_g.next),H_g},H_r.filterPoints=function(H_a,H_b){if(!H_a)return H_a;H_b||(H_b=H_a);var H_c,H_d=H_a;do{if(H_c=!1,H_d.steiner||!H_r.equals(H_d,H_d.next)&&0!==H_r.area(H_d.prev,H_d,H_d.next))H_d=H_d.next;else{if(H_r.removeNode(H_d),(H_d=H_b=H_d.prev)===H_d.next)break;H_c=!0}}while(H_c||H_d!==H_b);return H_b},H_r.earcutLinked=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(H_a){!H_g&&H_f&&H_r.indexCurve(H_a,H_d,H_e,H_f);for(var H_h,H_i,H_j=H_a;H_a.prev!==H_a.next;)if(H_h=H_a.prev,H_i=H_a.next,H_f?H_r.isEarHashed(H_a,H_d,H_e,H_f):H_r.isEar(H_a))H_b.push(H_h.i/H_c),H_b.push(H_a.i/H_c),H_b.push(H_i.i/H_c),H_r.removeNode(H_a),H_a=H_i.next,H_j=H_i.next;else if((H_a=H_i)===H_j){H_g?1===H_g?(H_a=H_r.cureLocalIntersections(H_a,H_b,H_c),H_r.earcutLinked(H_a,H_b,H_c,H_d,H_e,H_f,2)):2===H_g&&H_r.splitEarcut(H_a,H_b,H_c,H_d,H_e,H_f):H_r.earcutLinked(H_r.filterPoints(H_a,null),H_b,H_c,H_d,H_e,H_f,1);break}}},H_r.isEar=function(H_a){var H_b=H_a.prev,H_c=H_a,H_d=H_a.next;if(0<=H_r.area(H_b,H_c,H_d))return!1;for(var H_e=H_a.next.next;H_e!==H_a.prev;){if(H_r.pointInTriangle(H_b.x,H_b.y,H_c.x,H_c.y,H_d.x,H_d.y,H_e.x,H_e.y)&&0<=H_r.area(H_e.prev,H_e,H_e.next))return!1;H_e=H_e.next}return!0},H_r.isEarHashed=function(H_a,H_b,H_c,H_d){var H_e=H_a.prev,H_f=H_a,H_g=H_a.next;if(0<=H_r.area(H_e,H_f,H_g))return!1;for(var H_h=H_e.x<H_f.x?H_e.x<H_g.x?H_e.x:H_g.x:H_f.x<H_g.x?H_f.x:H_g.x,H_i=H_e.y<H_f.y?H_e.y<H_g.y?H_e.y:H_g.y:H_f.y<H_g.y?H_f.y:H_g.y,H_j=H_e.x>H_f.x?H_e.x>H_g.x?H_e.x:H_g.x:H_f.x>H_g.x?H_f.x:H_g.x,H_k=H_e.y>H_f.y?H_e.y>H_g.y?H_e.y:H_g.y:H_f.y>H_g.y?H_f.y:H_g.y,H_l=H_r.zOrder(H_h,H_i,H_b,H_c,H_d),H_m=H_r.zOrder(H_j,H_k,H_b,H_c,H_d),H_n=H_a.nextZ;H_n&&H_n.z<=H_m;){if(H_n!==H_a.prev&&H_n!==H_a.next&&H_r.pointInTriangle(H_e.x,H_e.y,H_f.x,H_f.y,H_g.x,H_g.y,H_n.x,H_n.y)&&0<=H_r.area(H_n.prev,H_n,H_n.next))return!1;H_n=H_n.nextZ}for(H_n=H_a.prevZ;H_n&&H_n.z>=H_l;){if(H_n!==H_a.prev&&H_n!==H_a.next&&H_r.pointInTriangle(H_e.x,H_e.y,H_f.x,H_f.y,H_g.x,H_g.y,H_n.x,H_n.y)&&0<=H_r.area(H_n.prev,H_n,H_n.next))return!1;H_n=H_n.prevZ}return!0},H_r.cureLocalIntersections=function(H_a,H_b,H_c){var H_d=H_a;do{var H_e=H_d.prev,H_f=H_d.next.next;!H_r.equals(H_e,H_f)&&H_r.intersects(H_e,H_d,H_d.next,H_f)&&H_r.locallyInside(H_e,H_f)&&H_r.locallyInside(H_f,H_e)&&(H_b.push(H_e.i/H_c),H_b.push(H_d.i/H_c),H_b.push(H_f.i/H_c),H_r.removeNode(H_d),H_r.removeNode(H_d.next),H_d=H_a=H_f),H_d=H_d.next}while(H_d!==H_a);return H_d},H_r.splitEarcut=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_a;do{for(var H_h=H_g.next.next;H_h!==H_g.prev;){if(H_g.i!==H_h.i&&H_r.isValidDiagonal(H_g,H_h)){var H_i=H_r.splitPolygon(H_g,H_h);return H_g=H_r.filterPoints(H_g,H_g.next),H_i=H_r.filterPoints(H_i,H_i.next),H_r.earcutLinked(H_g,H_b,H_c,H_d,H_e,H_f),void H_r.earcutLinked(H_i,H_b,H_c,H_d,H_e,H_f)}H_h=H_h.next}H_g=H_g.next}while(H_g!==H_a)},H_r.eliminateHoles=function(H_a,H_b,H_c,H_d){var H_e,H_f,H_g,H_h,H_i,H_j=[];for(H_e=0,H_f=H_b.length;H_e<H_f;H_e++)H_g=H_b[H_e]*H_d,H_h=H_e<H_f-1?H_b[H_e+1]*H_d:H_a.length,(H_i=H_r.linkedList(H_a,H_g,H_h,H_d,!1))===H_i.next&&(H_i.steiner=!0),H_j.push(H_r.getLeftmost(H_i));for(H_j.sort(H_r.compareX),H_e=0;H_e<H_j.length;H_e++)H_r.eliminateHole(H_j[H_e],H_c),H_c=H_r.filterPoints(H_c,H_c.next);return H_c},H_r.compareX=function(H_a,H_b){return H_a.x-H_b.x},H_r.eliminateHole=function(H_a,H_b){if(H_b=H_r.findHoleBridge(H_a,H_b)){var H_c=H_r.splitPolygon(H_b,H_a);H_r.filterPoints(H_c,H_c.next)}},H_r.findHoleBridge=function(H_a,H_b){var H_c,H_d=H_b,H_e=H_a.x,H_f=H_a.y,H_g=-1/0;do{if(H_f<=H_d.y&&H_f>=H_d.next.y&&H_d.next.y!==H_d.y){var H_h=H_d.x+(H_f-H_d.y)*(H_d.next.x-H_d.x)/(H_d.next.y-H_d.y);if(H_h<=H_e&&H_g<H_h){if((H_g=H_h)===H_e){if(H_f===H_d.y)return H_d;if(H_f===H_d.next.y)return H_d.next}H_c=H_d.x<H_d.next.x?H_d:H_d.next}}H_d=H_d.next}while(H_d!==H_b);if(!H_c)return null;if(H_e===H_g)return H_c.prev;var H_i,H_j=H_c,H_k=H_c.x,H_l=H_c.y,H_m=1/0;for(H_d=H_c.next;H_d!==H_j;)H_e>=H_d.x&&H_d.x>=H_k&&H_e!==H_d.x&&H_r.pointInTriangle(H_f<H_l?H_e:H_g,H_f,H_k,H_l,H_f<H_l?H_g:H_e,H_f,H_d.x,H_d.y)&&((H_i=Math.abs(H_f-H_d.y)/(H_e-H_d.x))<H_m||H_i===H_m&&H_d.x>H_c.x)&&H_r.locallyInside(H_d,H_a)&&(H_c=H_d,H_m=H_i),H_d=H_d.next;return H_c},H_r.indexCurve=function(H_a,H_b,H_c,H_d){for(var H_e=H_a;null===H_e.z&&(H_e.z=H_r.zOrder(H_e.x,H_e.y,H_b,H_c,H_d)),H_e.prevZ=H_e.prev,H_e.nextZ=H_e.next,(H_e=H_e.next)!==H_a;);H_e.prevZ.nextZ=null,H_e.prevZ=null,H_r.sortLinked(H_e)},H_r.sortLinked=function(H_a){var H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j=1;do{for(H_c=H_a,H_f=H_a=null,H_g=0;H_c;){for(H_g++,H_d=H_c,H_b=H_h=0;H_b<H_j&&(H_h++,H_d=H_d.nextZ);H_b++);for(H_i=H_j;0<H_h||0<H_i&&H_d;)0!==H_h&&(0===H_i||!H_d||H_c.z<=H_d.z)?(H_c=(H_e=H_c).nextZ,H_h--):(H_d=(H_e=H_d).nextZ,H_i--),H_f?H_f.nextZ=H_e:H_a=H_e,H_e.prevZ=H_f,H_f=H_e;H_c=H_d}H_f.nextZ=null,H_j*=2}while(1<H_g);return H_a},H_r.zOrder=function(H_a,H_b,H_c,H_d,H_e){return(H_a=1431655765&((H_a=858993459&((H_a=252645135&((H_a=16711935&((H_a=32767*(H_a-H_c)*H_e)|H_a<<8))|H_a<<4))|H_a<<2))|H_a<<1))|(H_b=1431655765&((H_b=858993459&((H_b=252645135&((H_b=16711935&((H_b=32767*(H_b-H_d)*H_e)|H_b<<8))|H_b<<4))|H_b<<2))|H_b<<1))<<1},H_r.getLeftmost=function(H_a){for(var H_b=H_a,H_c=H_a;H_b.x<H_c.x&&(H_c=H_b),(H_b=H_b.next)!==H_a;);return H_c},H_r.pointInTriangle=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){return 0<=(H_e-H_g)*(H_b-H_h)-(H_a-H_g)*(H_f-H_h)&&0<=(H_a-H_g)*(H_d-H_h)-(H_c-H_g)*(H_b-H_h)&&0<=(H_c-H_g)*(H_f-H_h)-(H_e-H_g)*(H_d-H_h)},H_r.isValidDiagonal=function(H_a,H_b){return H_a.next.i!==H_b.i&&H_a.prev.i!==H_b.i&&!H_r.intersectsPolygon(H_a,H_b)&&H_r.locallyInside(H_a,H_b)&&H_r.locallyInside(H_b,H_a)&&H_r.middleInside(H_a,H_b)},H_r.area=function(H_a,H_b,H_c){return(H_b.y-H_a.y)*(H_c.x-H_b.x)-(H_b.x-H_a.x)*(H_c.y-H_b.y)},H_r.equals=function(H_a,H_b){return H_a.x===H_b.x&&H_a.y===H_b.y},H_r.intersects=function(H_a,H_b,H_c,H_d){return!!(H_r.equals(H_a,H_b)&&H_r.equals(H_c,H_d)||H_r.equals(H_a,H_d)&&H_r.equals(H_c,H_b))||0<H_r.area(H_a,H_b,H_c)!=0<H_r.area(H_a,H_b,H_d)&&0<H_r.area(H_c,H_d,H_a)!=0<H_r.area(H_c,H_d,H_b)},H_r.intersectsPolygon=function(H_a,H_b){var H_c=H_a;do{if(H_c.i!==H_a.i&&H_c.next.i!==H_a.i&&H_c.i!==H_b.i&&H_c.next.i!==H_b.i&&H_r.intersects(H_c,H_c.next,H_a,H_b))return!0;H_c=H_c.next}while(H_c!==H_a);return!1},H_r.locallyInside=function(H_a,H_b){return H_r.area(H_a.prev,H_a,H_a.next)<0?0<=H_r.area(H_a,H_b,H_a.next)&&0<=H_r.area(H_a,H_a.prev,H_b):H_r.area(H_a,H_b,H_a.prev)<0||H_r.area(H_a,H_a.next,H_b)<0},H_r.middleInside=function(H_a,H_b){for(var H_c=H_a,H_d=!1,H_e=(H_a.x+H_b.x)/2,H_f=(H_a.y+H_b.y)/2;H_c.y>H_f!=H_c.next.y>H_f&&H_c.next.y!==H_c.y&&H_e<(H_c.next.x-H_c.x)*(H_f-H_c.y)/(H_c.next.y-H_c.y)+H_c.x&&(H_d=!H_d),(H_c=H_c.next)!==H_a;);return H_d},H_r.splitPolygon=function(H_a,H_b){var H_c=new H_ea(H_a.i,H_a.x,H_a.y),H_d=new H_ea(H_b.i,H_b.x,H_b.y),H_e=H_a.next,H_f=H_b.prev;return(H_a.next=H_b).prev=H_a,(H_c.next=H_e).prev=H_c,(H_d.next=H_c).prev=H_d,(H_f.next=H_d).prev=H_f,H_d},H_r.insertNode=function(H_a,H_b,H_c,H_d){var H_e=new H_ea(H_a,H_b,H_c);return H_d?(H_e.next=H_d.next,(H_e.prev=H_d).next.prev=H_e,H_d.next=H_e):(H_e.prev=H_e).next=H_e,H_e},H_r.removeNode=function(H_a){H_a.next.prev=H_a.prev,H_a.prev.next=H_a.next,H_a.prevZ&&(H_a.prevZ.nextZ=H_a.nextZ),H_a.nextZ&&(H_a.nextZ.prevZ=H_a.prevZ)},H_r.signedArea=function(H_a,H_b,H_c,H_d){for(var H_e=0,H_f=H_b,H_g=H_c-H_d;H_f<H_c;H_f+=H_d)H_e+=(H_a[H_g]-H_a[H_f])*(H_a[H_f+1]+H_a[H_g+1]),H_g=H_f;return H_e},H_r}(),H_ea=function(){function H_a(H_a,H_b,H_c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=H_a,this.x=H_b,this.y=H_c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return H_m(H_a,"laya.webgl.shapes.EarcutNode"),H_a}(),H_fa=(function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this.lineWidth=H_a,this.lineColor=H_b,this.lineAlpha=H_c,this.fillColor=H_d,this.fillAlpha=H_e,this.shape=H_g,this.fill=H_f}H_m(H_a,"laya.webgl.shapes.GeometryData");var H_b=H_a.prototype;H_b.clone=function(){return new H_a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},H_b.getIndexData=function(){return null},H_b.getVertexData=function(){return null},H_b.destroy=function(){this.shape=null}}(),function(){function H_a(H_a){if(H_a instanceof Float32Array)this.points=H_a;else if(H_a instanceof Array){H_a.length;this.points=new Float32Array(H_a)}}H_m(H_a,"laya.webgl.shapes.Vertex");var H_b=H_a.prototype;H_y.imps(H_b,{"laya.webgl.shapes.IShape":!0}),H_b.getData=function(H_a,H_b,H_c){},H_b.needUpdate=function(H_a){return!1},H_b.rebuild=function(H_a){},H_b.setMatrix=function(H_a){}}(),function(){function H_i(H_a){void 0===H_a&&(H_a=1e4),this._renderType=H_a}H_m(H_i,"laya.webgl.submit.Submit");var H_a=H_i.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a.releaseRender=function(){var H_a=H_i._cache;(H_a[H_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H_a.getRenderType=function(){return this._renderType},H_a.renderSubmit=function(){if(0===this._numEle)return 1;var H_a=this.shaderValue.textureHost;if(H_a){var H_b=H_a.source;if(!H_a.bitmap||!H_b)return 1;this.shaderValue.texture=H_b,H_a.alphaTexture&&H_a.alphaTexture.source&&(this.shaderValue.texture1=H_a.alphaTexture.source)}this._vb.bind_upload(this._ib);var H_c=H_wa.mainContext;return this.shaderValue.upload(),H_S.activeBlendFunction!==this._blendFn&&(H_c.enable(3042),this._blendFn(H_c),H_S.activeBlendFunction=this._blendFn),H_G.drawCall++,H_G.trianglesFaces+=this._numEle/3,H_c.drawElements(4,this._numEle,5123,this._startIdx),1},H_i.__init__=function(){var H_a=H_i.RENDERBASE=new H_i(-1);H_a.shaderValue=new H_Aa(0,0),H_a.shaderValue.ALPHA=-1234},H_i.createSubmit=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_i._cache._length?H_i._cache[--H_i._cache._length]:new H_i;null==H_c&&((H_c=H_f._selfVb||(H_f._selfVb=H_pa.create(-1))).clear(),H_d=0),H_f._ib=H_b,H_f._vb=H_c,H_f._startIdx=H_d*H_ra.BYTES_PIDX,H_f._numEle=0;var H_g=H_a._nBlendType;H_f._blendFn=H_a._targets?H_S.targetFns[H_g]:H_S.fns[H_g],H_f.shaderValue=H_e,H_f.shaderValue.setValue(H_a._shader2D);var H_h=H_a._shader2D.filters;return H_h&&H_f.shaderValue.setFilters(H_h),H_f},H_i.createShape=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_i._cache._length?H_i._cache[--H_i._cache._length]:new H_i;H_g._ib=H_b,H_g._vb=H_c,H_g._numEle=H_d,H_g._startIdx=H_e,H_g.shaderValue=H_f,H_g.shaderValue.setValue(H_a._shader2D);var H_h=H_a._nBlendType;return H_g._blendFn=H_a._targets?H_S.targetFns[H_h]:H_S.fns[H_h],H_g},H_i.TYPE_2D=1e4,H_i.TYPE_CANVAS=10003,H_i.TYPE_CMDSETRT=10004,H_i.TYPE_CUSTOM=10005,H_i.TYPE_BLURRT=10006,H_i.TYPE_CMDDESTORYPRERT=10007,H_i.TYPE_DISABLESTENCIL=10008,H_i.TYPE_OTHERIBVB=10009,H_i.TYPE_PRIMITIVE=10010,H_i.TYPE_RT=10011,H_i.TYPE_BLUR_RT=10012,H_i.TYPE_TARGET=10013,H_i.TYPE_CHANGE_VALUE=10014,H_i.TYPE_SHAPE=10015,H_i.TYPE_TEXTURE=10016,H_i.TYPE_FILLTEXTURE=10017,H_i.RENDERBASE=null,H_i._cache=((H_i._cache=[])._length=0,H_i._cache),H_i}()),H_ga=function(){function H_d(){this.fun=null,this.args=null}H_m(H_d,"laya.webgl.submit.SubmitCMD");var H_a=H_d.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a.renderSubmit=function(){return this.fun.apply(null,this.args),1},H_a.getRenderType=function(){return 0},H_a.releaseRender=function(){var H_a=H_d._cache;H_a[H_a._length++]=this},H_d.create=function(H_a,H_b){var H_c=H_d._cache._length?H_d._cache[--H_d._cache._length]:new H_d;return H_c.fun=H_b,H_c.args=H_a,H_c},H_d._cache=((H_d._cache=[])._length=0,H_d._cache),H_d}(),H_ha=function(){function H_b(){this.variables={}}H_m(H_b,"laya.webgl.submit.SubmitCMDScope");var H_a=H_b.prototype;return H_a.getValue=function(H_a){return this.variables[H_a]},H_a.addValue=function(H_a,H_b){return this.variables[H_a]=H_b},H_a.setValue=function(H_a,H_b){return this.variables.hasOwnProperty(H_a)?this.variables[H_a]=H_b:null},H_a.clear=function(){for(var H_a in this.variables)delete this.variables[H_a]},H_a.recycle=function(){this.clear(),H_b.POOL.push(this)},H_b.create=function(){var H_a=H_b.POOL.pop();return H_a||(H_a=new H_b),H_a},H_b.POOL=[],H_b}(),H_ia=function(){function H_l(){this.offset=0,this.startIndex=0,this._mat=H_B.create()}H_m(H_l,"laya.webgl.submit.SubmitOtherIBVB");var H_a=H_l.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a.releaseRender=function(){var H_a=H_l._cache;(H_a[H_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H_a.getRenderType=function(){return 10009},H_a.renderSubmit=function(){var H_a=this._shaderValue.textureHost;if(H_a){var H_b=H_a.source;if(!H_a.bitmap||!H_b)return 1;this._shaderValue.texture=H_b}this._vb.bind_upload(this._ib);var H_c=H_ua.worldMatrix4,H_d=H_B.TEMP;H_B.mulPre(this._mat,H_c[0],H_c[1],H_c[4],H_c[5],H_c[12],H_c[13],H_d);var H_e=H_ua.worldMatrix4=H_l.tempMatrix4;H_e[0]=H_d.a,H_e[1]=H_d.b,H_e[4]=H_d.c,H_e[5]=H_d.d,H_e[12]=H_d.tx,H_e[13]=H_d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var H_f=H_wa.mainContext;return H_S.activeBlendFunction!==this._blendFn&&(H_f.enable(3042),this._blendFn(H_f),H_S.activeBlendFunction=this._blendFn),H_G.drawCall++,H_G.trianglesFaces+=this._numEle/3,H_f.drawElements(4,this._numEle,5123,this.startIndex),H_ua.worldMatrix4=H_c,H_La.activeShader=null,1},H_l.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){void 0===H_i&&(H_i=0);var H_j=H_l._cache._length?H_l._cache[--H_l._cache._length]:new H_l;H_j._ib=H_c,H_j._vb=H_b,H_j._numEle=H_d,H_j._shader=H_e,H_j._shaderValue=H_f;var H_k=H_a._nBlendType;switch(H_j._blendFn=H_a._targets?H_S.targetFns[H_k]:H_S.fns[H_k],H_i){case 0:H_j.offset=0,H_j.startIndex=H_h/(H_ra.BYTES_PE*H_b.vertexStride)*1.5,H_j.startIndex*=H_ra.BYTES_PIDX;break;case 1:H_j.startIndex=H_g,H_j.offset=H_h}return H_j},H_l._cache=((H_l._cache=[])._length=0,H_l._cache),H_l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H_l}(),H_ja=function(){function H_c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new H_D,this.screenRect=new H_D}H_m(H_c,"laya.webgl.submit.SubmitScissor");var H_a=H_c.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a._scissor=function(H_a,H_b,H_c,H_d){var H_e=H_ua.worldMatrix4,H_f=H_e[0],H_g=H_e[5],H_h=H_e[12],H_i=H_e[13];if(H_d*=H_g,(H_c*=H_f)<1||H_d<1)return!1;var H_j=(H_a=H_a*H_f+H_h)+H_c,H_k=(H_b=H_b*H_g+H_i)+H_d;H_a<0&&(H_c=H_j-(H_a=0)),H_b<0&&(H_d=H_k-(H_b=0));var H_l=H_ua.worldClipRect;if(H_a=Math.max(H_a,H_l.x),H_b=Math.max(H_b,H_l.y),H_c=Math.min(H_j,H_l.right)-H_a,H_d=Math.min(H_k,H_l.bottom)-H_b,H_c<1||H_d<1)return!1;var H_m=H_ua.worldScissorTest;return this.screenRect.copyFrom(H_l),H_l.x=H_a,H_l.y=H_b,H_l.width=H_c,H_l.height=H_d,H_ua.worldScissorTest=!0,H_b=H_ua.height-H_b-H_d,H_wa.mainContext.scissor(H_a,H_b,H_c,H_d),H_wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H_m?(H_b=H_ua.height-this.screenRect.y-this.screenRect.height,H_wa.mainContext.scissor(this.screenRect.x,H_b,this.screenRect.width,this.screenRect.height),H_wa.mainContext.enable(3089)):(H_wa.mainContext.disable(3089),H_ua.worldScissorTest=!1),H_l.copyFrom(this.screenRect),!0},H_a._scissorWithTagart=function(H_a,H_b,H_c,H_d){if(H_c<1||H_d<1)return!1;var H_e=H_a+H_c,H_f=H_b+H_d;H_a<0&&(H_c=H_e-(H_a=0)),H_b<0&&(H_d=H_f-(H_b=0));var H_g=H_ua.worldClipRect;if(H_a=Math.max(H_a,H_g.x),H_b=Math.max(H_b,H_g.y),H_c=Math.min(H_e,H_g.right)-H_a,H_d=Math.min(H_f,H_g.bottom)-H_b,H_c<1||H_d<1)return!1;var H_h=H_ua.worldScissorTest;return this.screenRect.copyFrom(H_g),H_ua.worldScissorTest=!0,H_g.x=H_a,H_g.y=H_b,H_g.width=H_c,H_g.height=H_d,H_b=H_ua.height-H_b-H_d,H_wa.mainContext.scissor(H_a,H_b,H_c,H_d),H_wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H_h?(H_b=H_ua.height-this.screenRect.y-this.screenRect.height,H_wa.mainContext.scissor(this.screenRect.x,H_b,this.screenRect.width,this.screenRect.height),H_wa.mainContext.enable(3089)):(H_wa.mainContext.disable(3089),H_ua.worldScissorTest=!1),H_g.copyFrom(this.screenRect),!0},H_a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},H_a.getRenderType=function(){return 0},H_a.releaseRender=function(){var H_a=H_c._cache;(H_a[H_a._length++]=this).context=null},H_c.create=function(H_a){var H_b=H_c._cache._length?H_c._cache[--H_c._cache._length]:new H_c;return H_b.context=H_a,H_b},H_c._cache=((H_c._cache=[])._length=0,H_c._cache),H_c}(),H_ka=function(){function H_i(){this.step=0,this.blendMode=null,this.level=0}H_m(H_i,"laya.webgl.submit.SubmitStencil");var H_a=H_i.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},H_a.getRenderType=function(){return 0},H_a.releaseRender=function(){var H_a=H_i._cache;H_a[H_a._length++]=this},H_a.do1=function(){var H_a=H_wa.mainContext;H_a.enable(2960),H_a.clear(1024),H_a.colorMask(!1,!1,!1,!1),H_a.stencilFunc(514,this.level,255),H_a.stencilOp(7680,7680,7682)},H_a.do2=function(){var H_a=H_wa.mainContext;H_a.stencilFunc(514,this.level+1,255),H_a.colorMask(!0,!0,!0,!0),H_a.stencilOp(7680,7680,7680)},H_a.do3=function(){var H_a=H_wa.mainContext;H_a.colorMask(!0,!0,!0,!0),H_a.stencilOp(7680,7680,7680),H_a.clear(1024),H_a.disable(2960)},H_a.do4=function(){var H_a=H_wa.mainContext;0==this.level&&(H_a.enable(2960),H_a.clear(1024)),H_a.colorMask(!1,!1,!1,!1),H_a.stencilFunc(519,0,255),H_a.stencilOp(7680,7680,7682)},H_a.do5=function(){var H_a=H_wa.mainContext;H_a.stencilFunc(514,this.level,255),H_a.colorMask(!0,!0,!0,!0),H_a.stencilOp(7680,7680,7680)},H_a.do6=function(){var H_a=H_wa.mainContext;H_S.targetFns[H_S.TOINT[this.blendMode]](H_a)},H_a.do7=function(){var H_a=H_wa.mainContext;H_a.colorMask(!1,!1,!1,!1),H_a.stencilOp(7680,7680,7683)},H_a.do8=function(){var H_a=H_wa.mainContext;H_a.colorMask(!0,!0,!0,!0),H_a.stencilFunc(514,this.level,255),H_a.stencilOp(7680,7680,7680)},H_i.restore=function(H_a,H_b,H_c,H_d,H_e){var H_f;if((H_a._renderKey=0)<H_i._mask&&H_i._mask--,0==H_i._mask)H_f=laya.webgl.submit.SubmitStencil.create(3),H_a.addRenderObject(H_f),H_a._curSubmit=H_fa.RENDERBASE;else{H_f=laya.webgl.submit.SubmitStencil.create(7),H_a.addRenderObject(H_f);var H_g=H_a._vb;H_g._byteLength;if(H_sa.fillRectImgVb(H_g,null,H_b.x,H_b.y,H_b.width,H_b.height,H_K.DEF_UV,H_c,H_d,H_e,0,0)){H_a._shader2D.glTexture=null;var H_h=H_a._curSubmit=H_fa.createSubmit(H_a,H_a._ib,H_g,(H_g._byteLength-64)/32*3,H_Aa.create(2,0));H_h.shaderValue.ALPHA=1,H_a._submits[H_a._submits._length++]=H_h,H_a._curSubmit._numEle+=6,H_a._curSubmit=H_fa.RENDERBASE}else alert("clipRect calc stencil rect error");H_f=laya.webgl.submit.SubmitStencil.create(8),H_a.addRenderObject(H_f)}},H_i.restore2=function(H_a,H_b){var H_c;(H_a._renderKey=0)<H_i._mask&&H_i._mask--,0==H_i._mask?(H_c=laya.webgl.submit.SubmitStencil.create(3),H_a.addRenderObject(H_c),H_a._curSubmit=H_fa.RENDERBASE):(H_c=laya.webgl.submit.SubmitStencil.create(7),H_a.addRenderObject(H_c),H_a._submits[H_a._submits._length++]=H_b,H_c=laya.webgl.submit.SubmitStencil.create(8),H_a.addRenderObject(H_c))},H_i.create=function(H_a){var H_b=H_i._cache._length?H_i._cache[--H_i._cache._length]:new H_i;return 5==(H_b.step=H_a)&&++H_i._mask,H_b.level=H_i._mask,H_b},H_i._cache=((H_i._cache=[])._length=0,H_i._cache),H_i._mask=0,H_i}(),H_la=function(){function H_h(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}H_m(H_h,"laya.webgl.submit.SubmitTarget");var H_a=H_h.prototype;return H_y.imps(H_a,{"laya.webgl.submit.ISubmit":!0}),H_a.renderSubmit=function(){this._vb.bind_upload(this._ib);var H_a=this.scope.getValue(this.proName);return H_a&&(this.shaderValue.texture=H_a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[H_a.width,H_a.height]),this.shaderValue.upload(),this.blend(),H_G.drawCall++,H_G.trianglesFaces+=this._numEle/3,H_wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},H_a.blend=function(){if(H_S.activeBlendFunction!==H_S.fns[this.blendType]){var H_a=H_wa.mainContext;H_a.enable(3042),H_S.fns[this.blendType](H_a),H_S.activeBlendFunction=H_S.fns[this.blendType]}},H_a.getRenderType=function(){return 0},H_a.releaseRender=function(){var H_a=H_h._cache;(H_a[H_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H_h.create=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_h._cache._length?H_h._cache[--H_h._cache._length]:new H_h;return H_g._ib=H_b,H_g._vb=H_c,H_g.proName=H_f,H_g._startIdx=H_d*H_ra.BYTES_PIDX,H_g._numEle=0,H_g.blendType=H_a._nBlendType,H_g.shaderValue=H_e,H_g.shaderValue.setValue(H_a._shader2D),H_g},H_h._cache=((H_h._cache=[])._length=0,H_h._cache),H_h}(),H_ma=function(){function H_a(){this._sourceStr=null}H_m(H_a,"laya.webgl.text.CharSegment");var H_b=H_a.prototype;return H_y.imps(H_b,{"laya.webgl.text.ICharSegment":!0}),H_b.textToSpit=function(H_a){this._sourceStr=H_a},H_b.getChar=function(H_a){return this._sourceStr.charAt(H_a)},H_b.getCharCode=function(H_a){return this._sourceStr.charCodeAt(H_a)},H_b.length=function(){return this._sourceStr.length},H_a}(),H_na=function(){var H_a;function H_G(){}return H_m(H_G,"laya.webgl.text.DrawText"),H_G.__init__=function(){H_G._charsTemp=new Array,H_G._drawValue=new H_a,H_G._charSeg=new H_ma},H_G.customCharSeg=function(H_a){H_G._charSeg=H_a},H_G.getChar=function(H_a,H_b,H_c){var H_d=H_Va.createOneChar(H_a,H_c);return-1!=H_b&&(H_G._charsCache[H_b]=H_d),H_d},H_G._drawSlow=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m,H_n,H_q){var H_r,H_s,H_t=H_G._drawValue.value(H_f,H_h,H_i,H_j,H_m,H_n,H_q),H_u=0,H_v=0,H_w=H_G._charsTemp,H_x=0,H_y=NaN;if(H_d)for(H_w.length=H_d.length,H_u=0,H_v=H_d.length;H_u<H_v;H_u++)(H_s=H_d[H_u])&&(H_y=H_s.charNum+H_t.txtID,H_w[H_u]=H_r=H_G._charsCache[H_y]||H_G.getChar(H_s.char,H_y,H_t),H_r.active());else{var H_z=H_c instanceof laya.utils.WordText?H_c.toString():H_c;if(H_J.CharacterCache){H_G._charSeg.textToSpit(H_z);var H_A=H_G._charSeg.length();for(H_u=0,H_v=H_w.length=H_A;H_u<H_v;H_u++)H_y=H_G._charSeg.getCharCode(H_u)+H_t.txtID,H_w[H_u]=H_r=H_G._charsCache[H_y]||H_G.getChar(H_G._charSeg.getChar(H_u),H_y,H_t),H_r.active(),H_x+=H_r.cw}else H_w.length=0,(H_r=H_G.getChar(H_z,-1,H_t)).active(),H_x+=H_r.cw,H_w[0]=H_r}var H_B=0;null!==H_g&&"left"!==H_g&&(H_B=-("center"==H_g?H_x/2:H_x));var H_C,H_D,H_E=NaN,H_F=0;if(H_d)for(H_u=0,H_v=H_w.length;H_u<H_v;H_u++)H_r=H_w[H_u],H_s=H_d[H_u],H_r&&H_s&&!H_r.isSpace&&(H_E=H_r.borderSize,H_C=H_r.texture,H_b._drawText(H_C,H_k+H_B+H_s.x*H_m-H_E,H_l+H_s.y*H_n-H_E,H_C.width,H_C.height,H_e,0,0,0,0));else{for(H_u=0,H_v=H_w.length;H_u<H_v;H_u++)(H_r=H_w[H_u])&&!H_r.isSpace&&(H_E=H_r.borderSize,H_C=H_r.texture,H_b._drawText(H_C,H_k+H_B-H_E,H_l-H_E,H_C.width,H_C.height,H_e,0,0,0,0),H_a&&((H_D=H_a[H_F++])||(H_D=H_a[H_F-1]=[]),H_D[0]=H_C,H_D[1]=H_B-H_E,H_D[2]=-H_E)),H_B+=H_r.cw;H_a&&(H_a.length=H_F)}},H_G._drawFast=function(H_a,H_b,H_c,H_d,H_e){for(var H_f,H_g,H_h=0,H_i=H_a.length;H_h<H_i;H_h++)(H_f=(H_g=H_a[H_h])[0]).active(),H_b._drawText(H_f,H_d+H_g[1],H_e+H_g[2],H_f.width,H_f.height,H_c,0,0,0,0)},H_G.drawText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l){if(void 0===H_l&&(H_l=0),!(H_b&&0===H_b.length||H_c&&0===H_c.length)){var H_m=H_d.a,H_n=H_d.d;(0!==H_d.b||0!==H_d.c)&&(H_m=H_n=1);var H_q=1!==H_m||1!==H_n;if(H_q&&H_y.stage.transform){var H_r=H_y.stage.transform;H_q=H_r.a===H_m&&H_r.d===H_n}else H_q=!1;if(H_q){var H_s=(H_d=H_d.copyTo(H_za._tmpMatrix)).tx,H_t=H_d.ty;H_d.scale(1/H_m,1/H_n),H_d._checkTransform(),H_j*=H_m,H_k*=H_n,H_j+=H_s-H_d.tx,H_k+=H_t-H_d.ty}else H_m=H_n=1;if(H_c)H_G._drawSlow(null,H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_m,H_n,H_l);else{if(null===H_b.toUpperCase){var H_u=H_m+1e5*H_n,H_v=H_b;return void(H_v.changed||H_v.id!==H_u?(H_v.id=H_u,H_v.changed=!1,H_G._drawSlow(H_v.save,H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_m,H_n,H_l)):H_G._drawFast(H_v.save,H_a,H_d,H_j,H_k))}var H_w=H_b+H_e.toString()+H_g+H_h+H_i+H_m+H_n+H_f,H_x=H_G._textsCache[H_w];H_J.CharacterCache?H_x?H_G._drawFast(H_x,H_a,H_d,H_j,H_k):(H_G._textsCache.__length||(H_G._textsCache.__length=0),H_G._textsCache.__length>H_z.WebGLTextCacheCount&&((H_G._textsCache={}).__length=0,H_G._curPoolIndex=0),H_G._textCachesPool[H_G._curPoolIndex]?(H_x=H_G._textsCache[H_w]=H_G._textCachesPool[H_G._curPoolIndex]).length=0:H_G._textCachesPool[H_G._curPoolIndex]=H_x=H_G._textsCache[H_w]=[],H_G._textsCache.__length++,H_G._curPoolIndex++,H_G._drawSlow(H_x,H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_m,H_n,H_l)):H_G._drawSlow(H_x,H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_m,H_n,H_l)}}},H_G._charsTemp=null,H_G._textCachesPool=[],H_G._curPoolIndex=0,H_G._charsCache={},H_G._textsCache={},H_G._drawValue=null,H_G.d=[],H_G._charSeg=null,H_G.__init$=function(){H_a=function(){function H_i(){}return H_m(H_i,""),H_i.prototype.value=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this.font=H_a,this.fillColor=H_b,this.borderColor=H_c,this.lineWidth=H_d,this.scaleX=H_e,this.scaleY=H_f,this.underLine=H_g;var H_h=H_a.toString()+H_e+H_f+H_d+(H_b?H_b.toLowerCase():" ")+(H_c?H_c.toLowerCase():" ")+H_g;return this.txtID=H_i._keymap[H_h],this.txtID||(this.txtID=1e-7*++H_i._keymapCount,H_i._keymap[H_h]=this.txtID),this},H_i.clear=function(){H_i._keymap={},H_i._keymapCount=1},H_i._keymap={},H_i._keymapCount=1,H_i}()},H_G}(),H_qa=function(){function H_e(H_a){this._index=0,this._size=14,this._italic=-2,H_e._cache2=H_e._cache2||[],this.setFont(H_a||"14px Arial")}H_m(H_e,"laya.webgl.text.FontInContext");var H_a=H_e.prototype;return H_a.setFont=function(H_a){var H_b=H_e._cache2[H_a];if(H_b)this._words=H_b[0],this._size=H_b[1];else{this._words=H_a.split(" ");for(var H_c=0,H_d=this._words.length;H_c<H_d;H_c++)if(0<this._words[H_c].indexOf("px")){this._index=H_c;break}this._size=parseInt(this._words[this._index]),H_e._cache2[H_a]=[this._words,this._size]}this._text=null,this._italic=-2},H_a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},H_a.hasType=function(H_a){for(var H_b=0,H_c=this._words.length;H_b<H_c;H_b++)if(this._words[H_b]===H_a)return H_b;return-1},H_a.removeType=function(H_a){for(var H_b=0,H_c=this._words.length;H_b<H_c;H_b++)if(this._words[H_b]===H_a){this._words.splice(H_b,1),this._index>H_b&&this._index--;break}this._text=null,this._italic=-2},H_a.copyTo=function(H_a){return H_a._text=this._text,H_a._size=this._size,H_a._index=this._index,H_a._words=this._words.slice(),H_a._italic=-2,H_a},H_a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},H_d(0,H_a,"size",function(){return this._size},function(H_a){this._size=H_a,this._words[this._index]=H_a+"px",this._text=null}),H_e.create=function(H_a){var H_b=H_e._cache[H_a];return H_b||(H_b=H_e._cache[H_a]=new H_e(H_a))},H_e.EMPTY=new H_e,H_e._cache={},H_e._cache2=null,H_e}(),H_ra=function(){function H_a(){}return H_m(H_a,"laya.webgl.utils.CONST3D2D"),H_a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H_a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],H_a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],H_a._TMPARRAY=[],H_a._OFFSETX=0,H_a._OFFSETY=0,H_g(H_a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),H_a}(),H_sa=function(){function H_q(){}return H_m(H_q,"laya.webgl.utils.GlUtils"),H_q.make2DProjection=function(H_a,H_b,H_c){return[2/H_a,0,0,0,0,-2/H_b,0,0,0,0,2/H_c,0,-1,1,0,1]},H_q.fillIBQuadrangle=function(H_a,H_b){if(65535/4<H_b)throw Error("IBQuadrangle count:"+H_b+" must<:"+Math.floor(65535/4));H_b=Math.floor(H_b),H_a._resizeBuffer(6*(H_b+1)*2,!1),H_a.byteLength=H_a.bufferLength;for(var H_c=H_a.getUint16Array(),H_d=0,H_e=0;H_e<H_b;H_e++)H_c[H_d++]=4*H_e,H_c[H_d++]=4*H_e+2,H_c[H_d++]=4*H_e+1,H_c[H_d++]=4*H_e,H_c[H_d++]=4*H_e+3,H_c[H_d++]=4*H_e+2;return H_a.setNeedUpload(),!0},H_q.expandIBQuadrangle=function(H_a,H_b){H_a.bufferLength>=6*H_b*2||H_q.fillIBQuadrangle(H_a,H_b)},H_q.mathCeilPowerOfTwo=function(H_a){return H_a--,H_a|=H_a>>1,H_a|=H_a>>2,H_a|=H_a>>4,H_a|=H_a>>8,H_a|=H_a>>16,++H_a},H_q.fillQuadrangleImgVb=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=16+(H_a._byteLength>>2);H_a.byteLength=H_i<<2;var H_j=H_a.getFloat32Array();H_j[(H_i-=16)+2]=H_e[0],H_j[H_i+3]=H_e[1],H_j[H_i+6]=H_e[2],H_j[H_i+7]=H_e[3],H_j[H_i+10]=H_e[4],H_j[H_i+11]=H_e[5],H_j[H_i+14]=H_e[6],H_j[H_i+15]=H_e[7];var H_k=H_f.a,H_l=H_f.b,H_m=H_f.c,H_n=H_f.d;if(1!==H_k||0!==H_l||0!==H_m||1!==H_n){H_f.bTransform=!0;var H_q=H_f.tx+H_g,H_r=H_f.ty+H_h;H_j[H_i]=(H_d[0]+H_b)*H_k+(H_d[1]+H_c)*H_m+H_q,H_j[H_i+1]=(H_d[0]+H_b)*H_l+(H_d[1]+H_c)*H_n+H_r,H_j[H_i+4]=(H_d[2]+H_b)*H_k+(H_d[3]+H_c)*H_m+H_q,H_j[H_i+5]=(H_d[2]+H_b)*H_l+(H_d[3]+H_c)*H_n+H_r,H_j[H_i+8]=(H_d[4]+H_b)*H_k+(H_d[5]+H_c)*H_m+H_q,H_j[H_i+9]=(H_d[4]+H_b)*H_l+(H_d[5]+H_c)*H_n+H_r,H_j[H_i+12]=(H_d[6]+H_b)*H_k+(H_d[7]+H_c)*H_m+H_q,H_j[H_i+13]=(H_d[6]+H_b)*H_l+(H_d[7]+H_c)*H_n+H_r}else H_f.bTransform=!1,H_b+=H_f.tx+H_g,H_c+=H_f.ty+H_h,H_j[H_i]=H_b+H_d[0],H_j[H_i+1]=H_c+H_d[1],H_j[H_i+4]=H_b+H_d[2],H_j[H_i+5]=H_c+H_d[3],H_j[H_i+8]=H_b+H_d[4],H_j[H_i+9]=H_c+H_d[5],H_j[H_i+12]=H_b+H_d[6],H_j[H_i+13]=H_c+H_d[7];return H_a._upload=!0},H_q.fillTranglesVB=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h=(H_a._byteLength>>2)+H_d.length;H_a.byteLength=H_h<<2;var H_i=H_a.getFloat32Array();H_h-=H_d.length;for(var H_j=H_d.length,H_k=H_e.a,H_l=H_e.b,H_m=H_e.c,H_n=H_e.d,H_q=0;H_q<H_j;H_q+=4)if(H_i[H_h+H_q+2]=H_d[H_q+2],H_i[H_h+H_q+3]=H_d[H_q+3],1!==H_k||0!==H_l||0!==H_m||1!==H_n){H_e.bTransform=!0;var H_r=H_e.tx+H_f,H_s=H_e.ty+H_g;H_i[H_h+H_q]=(H_d[H_q]+H_b)*H_k+(H_d[H_q+1]+H_c)*H_m+H_r,H_i[H_h+H_q+1]=(H_d[H_q]+H_b)*H_l+(H_d[H_q+1]+H_c)*H_n+H_s}else H_e.bTransform=!1,H_b+=H_e.tx+H_f,H_c+=H_e.ty+H_g,H_i[H_h+H_q]=H_b+H_d[H_q],H_i[H_h+H_q+1]=H_c+H_d[H_q+1];return H_a._upload=!0},H_q.copyPreImgVb=function(H_a,H_b,H_c){var H_d=H_a._byteLength>>2;H_a.byteLength=H_d+16<<2;for(var H_e=H_a.getFloat32Array(),H_f=0,H_g=H_d-16;H_f<4;H_f++)H_e[H_d]=H_e[H_g]+H_b,++H_g,H_e[++H_d]=H_e[H_g]+H_c,++H_g,H_e[++H_d]=H_e[H_g],++H_g,H_e[++H_d]=H_e[H_g],++H_d,++H_g;H_a._upload=!0},H_q.fillRectImgVb=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m){void 0===H_m&&(H_m=!1);var H_n,H_q,H_r,H_s,H_t,H_u,H_v,H_w,H_x,H_y,H_z,H_A,H_B,H_C,H_D,H_E,H_F=1,H_G=H_h.a,H_H=H_h.b,H_I=H_h.c,H_J=H_h.d,H_K=H_b&&H_b.width<99999999;if(1!==H_G||0!==H_H||0!==H_I||1!==H_J?(H_h.bTransform=!0,0===H_H&&0===H_I&&(H_F=23,H_x=H_e+H_c,H_y=H_f+H_d,H_n=H_G*H_c+(H_z=H_h.tx+H_i),H_r=H_G*H_x+H_z,H_q=H_J*H_d+(H_A=H_h.ty+H_j),H_s=H_J*H_y+H_A)):(H_F=23,H_h.bTransform=!1,H_r=(H_n=H_c+H_h.tx+H_i)+H_e,H_s=(H_q=H_d+H_h.ty+H_j)+H_f),H_K&&(H_t=H_b.x,H_u=H_b.y,H_v=H_b.width+H_t,H_w=H_b.height+H_u),1!==H_F){if(Math.min(H_n,H_r)>=H_v)return!1;if(Math.min(H_q,H_s)>=H_w)return!1;if(Math.max(H_r,H_n)<=H_t)return!1;if(Math.max(H_s,H_q)<=H_u)return!1}var H_L=H_a._byteLength>>2;H_a.byteLength=16+H_L<<2;var H_M=H_a.getFloat32Array();switch(H_M[2+H_L]=H_g[0],H_M[3+H_L]=H_g[1],H_M[6+H_L]=H_g[2],H_M[7+H_L]=H_g[3],H_M[10+H_L]=H_g[4],H_M[11+H_L]=H_g[5],H_M[14+H_L]=H_g[6],H_M[15+H_L]=H_g[7],H_F){case 1:H_z=H_h.tx+H_i,H_A=H_h.ty+H_j;var H_N=H_G*H_c,H_O=H_I*H_d,H_P=H_J*H_d,H_Q=H_H*H_c,H_R=H_G*(H_x=H_e+H_c),H_S=H_I*(H_y=H_f+H_d),H_T=H_J*H_y,H_U=H_H*H_x;H_m?(H_B=H_N+H_O+H_z,H_D=Math.round(H_B)-H_B,H_C=H_P+H_Q+H_A,H_E=Math.round(H_C)-H_C,H_M[H_L]=H_B+H_D,H_M[1+H_L]=H_C+H_E,H_M[4+H_L]=H_R+H_O+H_z+H_D,H_M[5+H_L]=H_P+H_U+H_A+H_E,H_M[8+H_L]=H_R+H_S+H_z+H_D,H_M[9+H_L]=H_T+H_U+H_A+H_E,H_M[12+H_L]=H_N+H_S+H_z+H_D,H_M[13+H_L]=H_T+H_Q+H_A+H_E):(H_M[H_L]=H_N+H_O+H_z,H_M[1+H_L]=H_P+H_Q+H_A,H_M[4+H_L]=H_R+H_O+H_z,H_M[5+H_L]=H_P+H_U+H_A,H_M[8+H_L]=H_R+H_S+H_z,H_M[9+H_L]=H_T+H_U+H_A,H_M[12+H_L]=H_N+H_S+H_z,H_M[13+H_L]=H_T+H_Q+H_A);break;case 23:H_m?(H_B=H_n+H_k,H_D=Math.round(H_B)-H_B,H_C=H_q,H_E=Math.round(H_C)-H_C,H_M[H_L]=H_B+H_D,H_M[1+H_L]=H_C+H_E,H_M[4+H_L]=H_r+H_k+H_D,H_M[5+H_L]=H_q+H_E,H_M[8+H_L]=H_r+H_D,H_M[9+H_L]=H_s+H_E,H_M[12+H_L]=H_n+H_D,H_M[13+H_L]=H_s+H_E):(H_M[H_L]=H_n+H_k,H_M[1+H_L]=H_q,H_M[4+H_L]=H_r+H_k,H_M[5+H_L]=H_q,H_M[8+H_L]=H_r,H_M[9+H_L]=H_s,H_M[12+H_L]=H_n,H_M[13+H_L]=H_s)}return H_a._upload=!0},H_q.fillLineVb=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=.5*H_g,H_j=H_q._fillLineArray,H_k=-(H_d-H_f),H_l=H_c-H_e,H_m=Math.sqrt(H_k*H_k+H_l*H_l);H_k/=H_m,H_l/=H_m,H_k*=H_i,H_l*=H_i,H_j[0]=H_c-H_k,H_j[1]=H_d-H_l,H_j[4]=H_c+H_k,H_j[5]=H_d+H_l,H_j[8]=H_e+H_k,H_j[9]=H_f+H_l,H_j[12]=H_e-H_k,H_j[13]=H_f-H_l,H_h&&H_h.transformPointArray(H_j,H_j);var H_n=16+(H_a._byteLength>>2);return H_a.byteLength=H_n<<2,H_a.insertData(H_j,H_n-16),!0},H_q._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H_q}(),H_ta=(function(){function H_i(){}H_m(H_i,"laya.webgl.utils.MatirxArray"),H_i.ArrayMul=function(H_a,H_b,H_c){if(H_a)if(H_b)for(var H_d=NaN,H_e=NaN,H_f=NaN,H_g=NaN,H_h=0;H_h<4;H_h++)H_d=H_a[H_h],H_e=H_a[H_h+4],H_f=H_a[H_h+8],H_g=H_a[H_h+12],H_c[H_h]=H_d*H_b[0]+H_e*H_b[1]+H_f*H_b[2]+H_g*H_b[3],H_c[H_h+4]=H_d*H_b[4]+H_e*H_b[5]+H_f*H_b[6]+H_g*H_b[7],H_c[H_h+8]=H_d*H_b[8]+H_e*H_b[9]+H_f*H_b[10]+H_g*H_b[11],H_c[H_h+12]=H_d*H_b[12]+H_e*H_b[13]+H_f*H_b[14]+H_g*H_b[15];else H_i.copyArray(H_a,H_c);else H_i.copyArray(H_b,H_c)},H_i.copyArray=function(H_a,H_b){if(H_a&&H_b)for(var H_c=0;H_c<H_a.length;H_c++)H_b[H_c]=H_a[H_c]}}(),function(){function H_b(H_a,H_b,H_c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=H_a,this._vb=new H_pa(H_a,35048),H_b&&this._vb._resizeBuffer(H_b,!1),this._ib=new H_oa,H_c&&this._ib._resizeBuffer(H_c,!1)}H_m(H_b,"laya.webgl.utils.Mesh2D");var H_a=H_b.prototype;return H_a.cloneWithNewVB=function(){var H_a=new H_b(this._stride,0,0);return H_a._ib=this._ib,H_a._quadNum=this._quadNum,H_a._attribInfo=this._attribInfo,H_a},H_a.cloneWithNewVBIB=function(){var H_a=new H_b(this._stride,0,0);return H_a._attribInfo=this._attribInfo,H_a},H_a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},H_a.getVBR=function(){return this._vb},H_a.getIBR=function(){return this._ib},H_a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},H_a.createQuadIB=function(H_a){this._quadNum=H_a,this._ib._resizeBuffer(6*H_a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var H_b=this._ib.getUint16Array(),H_c=0,H_d=0,H_e=0;H_e<H_a;H_e++)H_b[H_c++]=H_d,H_b[H_c++]=H_d+2,H_b[H_c++]=H_d+1,H_b[H_c++]=H_d,H_b[H_c++]=H_d+3,H_b[H_c++]=H_d+2,H_d+=4;this._ib.setNeedUpload()},H_a.setAttributes=function(H_a){if(this._attribInfo=H_a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},H_a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},H_a.releaseMesh=function(){},H_a.destroy=function(){},H_a.clearVB=function(){this._vb.clear()},H_b._gvaoid=0,H_b}()),H_ua=function(){function H_e(){}return H_m(H_e,"laya.webgl.utils.RenderState2D"),H_e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H_e.mat2MatArray=function(H_a,H_b){var H_c=H_a,H_d=H_b;return H_d[0]=H_c.a,H_d[1]=H_c.b,H_d[2]=H_e.EMPTYMAT4_ARRAY[2],H_d[3]=H_e.EMPTYMAT4_ARRAY[3],H_d[4]=H_c.c,H_d[5]=H_c.d,H_d[6]=H_e.EMPTYMAT4_ARRAY[6],H_d[7]=H_e.EMPTYMAT4_ARRAY[7],H_d[8]=H_e.EMPTYMAT4_ARRAY[8],H_d[9]=H_e.EMPTYMAT4_ARRAY[9],H_d[10]=H_e.EMPTYMAT4_ARRAY[10],H_d[11]=H_e.EMPTYMAT4_ARRAY[11],H_d[12]=H_c.tx,H_d[13]=H_c.ty,H_d[14]=H_e.EMPTYMAT4_ARRAY[14],H_d[15]=H_e.EMPTYMAT4_ARRAY[15],H_b},H_e.restoreTempArray=function(){H_e.TEMPMAT4_ARRAY[0]=1,H_e.TEMPMAT4_ARRAY[1]=0,H_e.TEMPMAT4_ARRAY[4]=0,H_e.TEMPMAT4_ARRAY[5]=1,H_e.TEMPMAT4_ARRAY[12]=0,H_e.TEMPMAT4_ARRAY[13]=0},H_e.clear=function(){H_e.worldScissorTest=!1,H_e.worldShaderDefines=null,H_e.worldFilters=null,H_e.worldAlpha=1,H_e.worldClipRect.x=H_e.worldClipRect.y=0,H_e.worldClipRect.width=H_e.width,H_e.worldClipRect.height=H_e.height,H_e.curRenderTarget=null},H_e._MAXSIZE=99999999,H_e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H_e.worldMatrix4=H_e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H_e.worldAlpha=1,H_e.worldScissorTest=!1,H_e.worldFilters=null,H_e.worldShaderDefines=null,H_e.curRenderTarget=null,H_e.width=0,H_e.height=0,H_g(H_e,["worldMatrix",function(){return this.worldMatrix=new H_B},"worldClipRect",function(){return this.worldClipRect=new H_D(0,0,99999999,99999999)}]),H_e}(),H_va=function(){var H_u,H_c;function H_v(H_a,H_b,H_c,H_d,H_e){var H_f=this;function H_g(H_a){var H_b=[],H_c=new H_u(H_b);return H_f._compileToTree(H_c,H_a.split("\n"),0,H_b,H_e),H_c}var H_h=H_n.now();this._VS=H_g(H_b),this._PS=H_g(H_c),this._nameMap=H_d,2<H_n.now()-H_h&&console.log("ShaderCompile use time:"+(H_n.now()-H_h)+"  size:"+H_b.length+"/"+H_c.length)}H_m(H_v,"laya.webgl.utils.ShaderCompile");var H_a=H_v.prototype;return H_a._compileToTree=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m=0,H_n=0,H_q=0,H_r=0;for(H_n=H_c;H_n<H_b.length;H_n++)if(!((H_h=H_b[H_n]).length<1)&&0!==(H_m=H_h.indexOf("//"))){if(0<=H_m&&(H_h=H_h.substr(0,H_m)),H_f=H_l||new H_u(H_d),H_l=null,H_f.text=H_h,H_f.noCompile=!0,0<=(H_m=H_h.indexOf("#"))){for(H_i="#",H_r=H_m+1,H_q=H_h.length;H_r<H_q;H_r++){var H_s=H_h.charAt(H_r);if(" "===H_s||"\t"===H_s||"\r"===H_s||"\n"===H_s||"?"===H_s)break;H_i+=H_s}switch(H_f.name=H_i){case"#ifdef":case"#ifndef":if(H_f.src=H_h,H_f.noCompile=null!=H_h.match(/[!&|()=<>]/),H_f.noCompile?console.log("function():Boolean{return "+H_h.substr(H_m+H_f.name.length)+"}"):(H_k=H_h.replace(/^\s*/,"").split(/\s+/),H_f.setCondition(H_k[1],"#ifdef"===H_i?1:2),H_f.text="//"+H_f.text),H_f.setParent(H_a),H_a=H_f,H_e)for(H_k=H_h.substr(H_r).split(H_v._splitToWordExps3),H_r=0;H_r<H_k.length;H_r++)(H_h=H_k[H_r]).length&&(H_e[H_h]=!0);continue;case"#if":if(H_f.src=H_h,H_f.noCompile=!0,H_f.setParent(H_a),H_a=H_f,H_e)for(H_k=H_h.substr(H_r).split(H_v._splitToWordExps3),H_r=0;H_r<H_k.length;H_r++)(H_h=H_k[H_r]).length&&"defined"!=H_h&&(H_e[H_h]=!0);continue;case"#else":H_f.src=H_h,H_g=(H_a=H_a.parent).childs[H_a.childs.length-1],H_f.noCompile=H_g.noCompile,H_f.noCompile||(H_f.condition=H_g.condition,H_f.conditionType=1==H_g.conditionType?2:1,H_f.text="//"+H_f.text+" "+H_g.text+" "+H_f.conditionType),H_f.setParent(H_a),H_a=H_f;continue;case"#endif":H_g=(H_a=H_a.parent).childs[H_a.childs.length-1],H_f.noCompile=H_g.noCompile,H_f.noCompile||(H_f.text="//"+H_f.text),H_f.setParent(H_a);continue;case"#include":H_k=H_v.splitToWords(H_h,null);var H_t=H_v.includes[H_k[1]];if(!H_t)throw"ShaderCompile error no this include file:"+H_k[1];if((H_m=H_k[0].indexOf("?"))<0){H_f.setParent(H_a),H_h=H_t.getWith("with"==H_k[2]?H_k[3]:null),this._compileToTree(H_f,H_h.split("\n"),0,H_d,H_e),H_f.text="";continue}H_f.setCondition(H_k[0].substr(H_m+1),1),H_f.text=H_t.getWith("with"==H_k[2]?H_k[3]:null);break;case"#import":H_j=(H_k=H_v.splitToWords(H_h,null))[1],H_d.push({node:H_f,file:H_v.includes[H_j],ofs:H_f.text.length});continue}}else{if((H_g=H_a.childs[H_a.childs.length-1])&&!H_g.name){0<H_d.length&&H_v.splitToWords(H_h,H_g),H_l=H_f,H_g.text+="\n"+H_h;continue}0<H_d.length&&H_v.splitToWords(H_h,H_f)}H_f.setParent(H_a)}},H_a.createShader=function(H_a,H_b,H_c){var H_d={},H_e="";if(H_a)for(var H_f in H_a)H_e+="#define "+H_f+"\n",H_d[H_f]=!0;var H_g=this._VS.toscript(H_d,[]),H_h=this._PS.toscript(H_d,[]);return(H_c||H_Ya.create)(H_e+H_g.join("\n"),H_e+H_h.join("\n"),H_b,this._nameMap)},H_v._parseOne=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g={type:H_v.shaderParamsMap[H_c[H_d+1]],name:H_c[H_d+2],size:isNaN(parseInt(H_c[H_d+3]))?1:parseInt(H_c[H_d+3])};return H_f&&("attribute"==H_e?H_a.push(H_g):H_b.push(H_g)),":"==H_c[H_d+3]&&(H_g.type=H_c[H_d+4],H_d+=2),H_d+=2},H_v.addInclude=function(H_a,H_b){if(!H_b||0===H_b.length)throw new Error("add shader include file err:"+H_a);if(H_v.includes[H_a])throw new Error("add shader include file err, has add:"+H_a);H_v.includes[H_a]=new H_c(H_b)},H_v.preGetParams=function(H_a,H_b){var H_c=[H_a,H_b],H_d={},H_e=[],H_f=[],H_g={},H_h=[];H_d.attributes=H_e,H_d.uniforms=H_f,H_d.defines=H_g;for(var H_i=0,H_j=0,H_k=0;H_k<2;H_k++){H_c[H_k]=H_c[H_k].replace(H_v._removeAnnotation,"");var H_l,H_m=H_c[H_k].match(H_v._reg);for(H_i=0,H_j=H_m.length;H_i<H_j;H_i++){var H_n=H_m[H_i];if("attribute"==H_n||"uniform"==H_n)H_i=H_v._parseOne(H_e,H_f,H_m,H_i,H_n,!0);else{if("#define"==H_n){H_h[H_n=H_m[++H_i]]=1;continue}if("#ifdef"==H_n){H_g[H_l=H_m[++H_i]]=H_g[H_l]||[];for(H_i++;H_i<H_j;H_i++)if("attribute"==(H_n=H_m[H_i])||"uniform"==H_n)H_i=H_v._parseOne(H_e,H_f,H_m,H_i,H_n,H_h[H_l]);else if("#else"==H_n)for(H_i++;H_i<H_j;H_i++)if("attribute"==(H_n=H_m[H_i])||"uniform"==H_n)H_i=H_v._parseOne(H_e,H_f,H_m,H_i,H_n,!H_h[H_l]);else if("#endif"==H_n)break}}}}return H_d},H_v.splitToWords=function(H_a,H_b){for(var H_c,H_d,H_e=[],H_f=-1,H_g=0,H_h=H_a.length;H_g<H_h;H_g++)if(H_c=H_a.charAt(H_g),0<=" \t=+-*/&%!<>()'\",;".indexOf(H_c)){if(0<=H_f&&1<H_g-H_f&&(H_d=H_a.substr(H_f,H_g-H_f),H_e.push(H_d)),'"'==H_c||"'"==H_c){var H_i=H_a.indexOf(H_c,H_g+1);if(H_i<0)throw"Sharder err:"+H_a;H_e.push(H_a.substr(H_g+1,H_i-H_g-1)),H_g=H_i,H_f=-1;continue}"("==H_c&&H_b&&0<H_e.length&&(H_d=H_e[H_e.length-1]+";","vec4;main;".indexOf(H_d)<0&&(H_b.useFuns+=H_d)),H_f=-1}else H_f<0&&(H_f=H_g);return H_f<H_h&&1<H_h-H_f&&(H_d=H_a.substr(H_f,H_h-H_f),H_e.push(H_d)),H_e},H_v.IFDEF_NO=0,H_v.IFDEF_YES=1,H_v.IFDEF_ELSE=2,H_v.IFDEF_PARENT=3,H_v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),H_v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),H_v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),H_v.includes={},H_g(H_v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),H_v.__init$=function(){H_u=function(){function H_c(H_a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=H_a}H_m(H_c,"");var H_a=H_c.prototype;return H_a.setParent=function(H_a){H_a.childs.push(this),this.z=H_a.z+1,this.parent=H_a},H_a.setCondition=function(H_a,H_b){H_a&&(this.conditionType=H_b,H_a=H_a.replace(/(\s*$)/g,""),this.condition=function(){return this[H_a]},this.condition.__condition=H_a)},H_a.toscript=function(H_a,H_b){return this._toscript(H_a,H_b,++H_c.__id)},H_a._toscript=function(H_d,H_e,H_f){if(this.childs.length<1&&!this.text)return H_e;H_e.length;if(this.condition){var H_a=!!this.condition.call(H_d);if(2===this.conditionType&&(H_a=!H_a),!H_a)return H_e}if(this.text&&H_e.push(this.text),0<this.childs.length&&this.childs.forEach(function(H_a,H_b,H_c){H_a._toscript(H_d,H_e,H_f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var H_b,H_c=0,H_g=this.includefiles.length;H_c<H_g;H_c++)this.includefiles[H_c].curUseID!=H_f&&0<(H_b=this.includefiles[H_c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[H_c].curUseID=H_f,H_e[0]=H_b+H_e[0]);return H_e},H_c.__id=1,H_c}(),H_c=function(){function H_a(H_a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=H_a;for(var H_b=0,H_c=0,H_d=0;!((H_b=H_a.indexOf("#begin",H_b))<0);){for(H_d=H_b+5;!((H_d=H_a.indexOf("#end",H_d))<0)&&"i"===H_a.charAt(H_d+4);)H_d+=5;if(H_d<0)throw"add include err,no #end:"+H_a;H_c=H_a.indexOf("\n",H_b);var H_e=H_v.splitToWords(H_a.substr(H_b,H_c-H_b),null);"code"==H_e[1]?this.codes[H_e[2]]=H_a.substr(H_c+1,H_d-H_c-1):"function"==H_e[1]&&(H_c=H_a.indexOf("function",H_b),H_c+="function".length,this.funs[H_e[3]]=H_a.substr(H_c+1,H_d-H_c-1),this.funnames+=H_e[3]+";"),H_b=H_d+1}}H_m(H_a,"");var H_b=H_a.prototype;return H_b.getWith=function(H_a){var H_b=H_a?this.codes[H_a]:this.script;if(!H_b)throw"get with error:"+H_a;return H_b},H_b.getFunsScript=function(H_a){var H_b="";for(var H_c in this.funs)0<=H_a.indexOf(H_c+";")&&(H_b+=this.funs[H_c]);return H_b},H_a}()},H_v}(),H_wa=function(){function H_g(){}return H_m(H_g,"laya.webgl.WebGL"),H_g._uint8ArraySlice=function(){for(var H_a=this.length,H_b=new Uint8Array(this.length),H_c=0;H_c<H_a;H_c++)H_b[H_c]=this[H_c];return H_b},H_g._float32ArraySlice=function(){for(var H_a=this.length,H_b=new Float32Array(this.length),H_c=0;H_c<H_a;H_c++)H_b[H_c]=this[H_c];return H_b},H_g._uint16ArraySlice=function(H_a){var H_b,H_c=arguments,H_d=0,H_e=0;if(0===H_c.length)for(H_d=this.length,H_b=new Uint16Array(H_d),H_e=0;H_e<H_d;H_e++)H_b[H_e]=this[H_e];else if(2===H_c.length){var H_f=H_c[0],H_g=H_c[1];if(H_f<H_g)for(H_d=H_g-H_f,H_b=new Uint16Array(H_d),H_e=H_f;H_e<H_g;H_e++)H_b[H_e-H_f]=this[H_e];else H_b=new Uint16Array(0)}return H_b},H_g.expandContext=function(){var H_a=H_e.prototype,H_b=CanvasRenderingContext2D.prototype;H_b.fillTrangles=H_a.fillTrangles,H_Za.__int__(null),H_b.setIBVB=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){void 0===H_i&&(H_i=0),void 0===H_j&&(H_j=0),null===H_c&&(this._ib=this._ib||H_oa.QuadrangleIB,H_c=this._ib,H_sa.expandIBQuadrangle(H_c,H_d._byteLength/64+8)),this._setIBVB(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j)},H_b.fillTrangles=function(H_a,H_b,H_c,H_d,H_e){this._curMat=this._curMat||H_B.create(),this._vb=this._vb||H_pa.create(),this._ib||(this._ib=H_oa.create(),H_sa.fillIBQuadrangle(this._ib,H_g/4));var H_f=this._vb,H_g=H_d.length>>4;H_sa.fillTranglesVB(H_f,H_b,H_c,H_d,H_e||this._curMat,0,0),H_sa.expandIBQuadrangle(this._ib,H_f._byteLength/64+8);var H_h=new H_Aa(1,0);H_h.textureHost=H_a;var H_i=new H__a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");H_f._vertType=3,this._setIBVB(H_b,H_c,this._ib,H_f,6*H_g,H_e,H_i,H_h,0,0)}},H_g.enable=function(){if(H_n.__init__(),H_t.isConchApp&&!H_t.isConchWebGL)return H_x.skinAniSprite=function(){return new H_aa},H_g.expandContext(),!1;if(H_x.getWebGLContext=function(H_a){for(var H_b,H_c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],H_d=0;H_d<H_c.length;H_d++){try{H_b=H_a.getContext(H_c[H_d],{stencil:H_z.isStencil,alpha:H_z.isAlpha,antialias:H_z.isAntialias,premultipliedAlpha:H_z.premultipliedAlpha,preserveDrawingBuffer:H_z.preserveDrawingBuffer})}catch(H_a){}if(H_b)return H_b}return null},null==(H_g.mainContext=H_g.mainContext||H_x.getWebGLContext(H_t._mainCanvas)))return!1;if(H_t.isWebGL)return!0;H_r.create=function(H_a,H_b){return new H_ab(H_a,H_b)},H_s.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){return new H_Xa(H_a,H_b,H_c,H_d,H_e,H_f,H_g)},H_t.WebGL=H_g,H_t.isWebGL=!0,H_na.__init__(),H_x.createRenderSprite=function(H_a,H_b){return new H_Ba(H_a,H_b)},H_x.createWebGLContext2D=function(H_a){return new H_za(H_a)},H_x.changeWebGLSize=function(H_a,H_b){laya.webgl.WebGL.onStageResize(H_a,H_b)},H_x.createGraphics=function(){return new H_ya};var H_a=H_x.createFilterAction;return H_x.createFilterAction=H_a||function(H_a){return new H_Ca},H_x.clear=function(H_a){H_ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var H_b=H_t.context.ctx,H_c=0==H_b._submits._length||H_z.preserveDrawingBuffer?H_q.create(H_a)._color:H_F._wgColor;H_c&&H_b.clearBG(H_c[0],H_c[1],H_c[2],H_c[3]),H_ua.clear()},H_x.addToAtlas=function(H_a,H_b){void 0===H_b&&(H_b=!1);var H_c=H_a.bitmap;H_t.optimizeTextureMemory(H_a.url,H_a)?H_y.__typeof(H_c,"laya.webgl.resource.IMergeAtlasBitmap")&&H_c.allowMerageInAtlas&&H_c.on("recovered",H_a,H_a.addTextureToAtlas):H_c.enableMerageInAtlas=!1},H_x.isAtlas=function(H_a){return H_a instanceof laya.webgl.atlas.AtlasWebGLCanvas},H_Q._enable(),H_x.beginFlush=function(){for(var H_a=H_Q.instance,H_b=H_a.getAtlaserCount(),H_c=0;H_c<H_b;H_c++){var H_d=H_a.getAtlaserByIndex(H_c).texture;H_d._flashCacheImageNeedFlush&&H_x.flashFlushImage(H_d)}},H_x.drawToCanvas=function(H_a,H_b,H_c,H_d,H_e,H_f){(H_c<=0||H_d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),H_c|=0,H_d|=0,H_e|=0,H_f|=0;var H_g=H_Ma.create(H_c,H_d,6408,5121,0,!1);H_g.start(),H_g.clear(0,0,0,0),H_t.context.clear(),H_u.renders[H_b]._fun(H_a,H_t.context,H_e,H_ua.height-H_d+H_f),H_t.context.flush(),H_g.end();var H_h=H_g.getData(0,0,H_c,H_d);if(H_g.recycle(),H_h.byteLength==H_c*H_d*4){var H_i=new H_Ua;H_i._canvas=H_n.createElement("canvas"),H_i.size(H_c,H_d);var H_j=H_i._canvas.getContext("2d");H_n.canvas.size(H_c,H_d);var H_k=H_n.context,H_l=H_k.createImageData(H_c,H_d);return H_l.data.set(new Uint8ClampedArray(H_h.buffer)),H_i._imgData=H_l,H_k.putImageData(H_l,0,0),H_j.save(),H_j.translate(0,H_d),H_j.scale(1,-1),H_j.drawImage(H_n.canvas.source,0,0),H_j.restore(),H_i}console.log("drawToCanvas error: w:"+H_c+",h:"+H_d+",datalen:"+H_h.byteLength)},H_x.createFilterAction=function(H_a){var H_b;switch(H_a){case 32:H_b=new H_Ca}return H_b},H_x.addTextureToAtlas=function(H_a){H_a._uvID++,H_Q._atlasRestore++,H_a.bitmap.enableMerageInAtlas&&H_Q.instance.addToAtlas(H_a)},H_x.getTexturePixels=function(H_a,H_b,H_c,H_d,H_e){H_t.context.ctx.clear();var H_f=new H_E;H_f.graphics.drawTexture(H_a,-H_b,-H_c);var H_g=H_Ma.create(H_d,H_e);H_g.start(),H_g.clear(0,0,0,0),H_f.render(H_t.context,0,0),H_t.context.ctx.flush(),H_g.end();for(var H_h=H_g.getData(0,0,H_d,H_e),H_i=[],H_j=0,H_k=H_e-1;0<=H_k;H_k--)for(var H_l=0;H_l<H_d;H_l++)H_j=4*(H_k*H_d+H_l),H_i.push(H_h[H_j]),H_i.push(H_h[H_j+1]),H_i.push(H_h[H_j+2]),H_i.push(H_h[H_j+3]);return H_i},H_x.skinAniSprite=function(){return new H_aa},H_j.create=function(H_a,H_b){var H_c=new H_Ua;return H_c._imgData=H_b,H_c.flipY=!1,H_c},H_A._filterStart=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_a.getValue("bounds"),H_g=H_Ma.create(H_f.width,H_f.height);if(H_g.start(),H_g.clear(0,0,0,0),H_a.addValue("src",H_g),H_a.addValue("ScissorTest",H_ua.worldScissorTest),H_ua.worldScissorTest){var H_h=new H_D;H_h.copyFrom(H_c.ctx._clipRect),H_a.addValue("clipRect",H_h),H_ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},H_A._filterEnd=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_a.getValue("bounds");H_a.getValue("src").end();var H_g=H_Ma.create(H_f.width,H_f.height);H_g.start(),H_g.clear(0,0,0,0),H_a.addValue("out",H_g),H_b._set$P("_filterCache",H_g),H_b._set$P("_isHaveGlowFilter",H_a.getValue("_isHaveGlowFilter"))},H_A._EndTarget=function(H_a,H_b){if(H_a.getValue("src").recycle(),H_a.getValue("out").end(),H_a.getValue("ScissorTest")){H_ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),H_b.ctx.save();var H_c=H_a.getValue("clipRect");H_b.ctx.clipRect(H_c.x,H_c.y,H_c.width,H_c.height)}},H_A._useSrc=function(H_a){var H_b=H_a.getValue("out");H_b.end(),(H_b=H_a.getValue("src")).start(),H_b.clear(0,0,0,0)},H_A._endSrc=function(H_a){H_a.getValue("src").end()},H_A._useOut=function(H_a){var H_b=H_a.getValue("src");H_b.end(),(H_b=H_a.getValue("out")).start(),H_b.clear(0,0,0,0)},H_A._endOut=function(H_a){H_a.getValue("out").end()},H_A._recycleScope=function(H_a){H_a.recycle()},H_A._filter=function(H_a,H_b,H_c,H_d){var H_e=this._next;if(H_e){var H_f,H_g,H_h=H_a.filters,H_i=H_h.length;if(1==H_i&&32==H_h[0].type)return H_b.ctx.save(),H_b.ctx.setFilters([H_h[0]]),H_e._fun.call(H_e,H_a,H_b,H_c,H_d),void H_b.ctx.restore();var H_j=H_ha.create(),H_k=H_C.TEMP,H_l=H_b.ctx._getTransformMatrix(),H_m=H_B.create();H_l.copyTo(H_m);var H_n=0,H_q=0,H_r=!1,H_s=H_a._$P._filterCache?H_a._$P._filterCache:null;if(!H_s||H_a._repaint){H_r=H_a._isHaveGlowFilter(),H_j.addValue("_isHaveGlowFilter",H_r),H_r&&(H_n=50,H_q=25),(H_g=new H_D).copyFrom(H_a.getSelfBounds()),H_g.x+=H_a.x,H_g.y+=H_a.y,H_g.x-=H_a.pivotX+4,H_g.y-=H_a.pivotY+4;var H_t=H_g.x,H_u=H_g.y;if(H_g.width+=H_n+8,H_g.height+=H_n+8,H_k.x=H_g.x*H_m.a+H_g.y*H_m.c,H_k.y=H_g.y*H_m.d+H_g.x*H_m.b,H_g.x=H_k.x,H_g.y=H_k.y,H_k.x=H_g.width*H_m.a+H_g.height*H_m.c,H_k.y=H_g.height*H_m.d+H_g.width*H_m.b,H_g.width=H_k.x,H_g.height=H_k.y,H_g.width<=0||H_g.height<=0)return;H_s&&H_s.recycle(),H_j.addValue("bounds",H_g);var H_v=H_ga.create([H_j,H_a,H_b,0,0],H_A._filterStart);H_b.addRenderObject(H_v),H_b.ctx._renderKey=0,H_b.ctx._shader2D.glTexture=null;var H_w=H_a.x-H_t+H_q,H_x=H_a.y-H_u+H_q;H_e._fun.call(H_e,H_a,H_b,H_w,H_x),H_v=H_ga.create([H_j,H_a,H_b,0,0],H_A._filterEnd),H_b.addRenderObject(H_v);for(var H_y=0;H_y<H_i;H_y++){0!=H_y&&(H_v=H_ga.create([H_j],H_A._useSrc),H_b.addRenderObject(H_v),H_f=H_Aa.create(1,0),H_B.TEMP.identity(),H_b.ctx.drawTarget(H_j,0,0,H_g.width,H_g.height,H_B.TEMP,"out",H_f,null,H_S.TOINT.overlay),H_v=H_ga.create([H_j],H_A._useOut),H_b.addRenderObject(H_v)),H_h[H_y].action.apply3d(H_j,H_a,H_b,0,0)}H_v=H_ga.create([H_j,H_b],H_A._EndTarget),H_b.addRenderObject(H_v)}else{if((H_r=!!H_a._$P._isHaveGlowFilter&&H_a._$P._isHaveGlowFilter)&&(H_n=50,H_q=25),(H_g=H_a.getBounds()).width<=0||H_g.height<=0)return;H_g.width+=H_n,H_g.height+=H_n,H_k.x=H_g.x*H_m.a+H_g.y*H_m.c,H_k.y=H_g.y*H_m.d+H_g.x*H_m.b,H_g.x=H_k.x,H_g.y=H_k.y,H_k.x=H_g.width*H_m.a+H_g.height*H_m.c,H_k.y=H_g.height*H_m.d+H_g.width*H_m.b,H_g.width=H_k.x,H_g.height=H_k.y,H_j.addValue("out",H_s)}H_c=H_c-H_q-H_a.x,H_d=H_d-H_q-H_a.y,H_k.setTo(H_c,H_d),H_m.transformPoint(H_k),H_c=H_k.x+H_g.x,H_d=H_k.y+H_g.y,H_f=H_Aa.create(1,0),H_B.TEMP.identity(),H_b.ctx.drawTarget(H_j,H_c,H_d,H_g.width,H_g.height,H_B.TEMP,"out",H_f,null,H_S.TOINT.overlay),H_v=H_ga.create([H_j],H_A._recycleScope),H_b.addRenderObject(H_v),H_m.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=H_g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=H_g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=H_g._uint8ArraySlice),!0},H_g.onStageResize=function(H_a,H_b){null!=H_g.mainContext&&(H_g.mainContext.viewport(0,0,H_a,H_b),H_ua.width=H_a,H_ua.height=H_b)},H_g.onInvalidGLRes=function(){H_Q.instance.freeAll(),H_w.releaseContentManagers(!0),H_g.doNodeRepaint(H_y.stage),H_g.mainContext.viewport(0,0,H_ua.width,H_ua.height),H_y.stage.event("devicelost")},H_g.doNodeRepaint=function(H_a){0==H_a.numChildren&&H_a.repaint();for(var H_b=0;H_b<H_a.numChildren;H_b++)H_g.doNodeRepaint(H_a.getChildAt(H_b))},H_g.init=function(H_a,H_b,H_c){H_g.mainCanvas=H_a,H_j._createContext=function(H_a){return new H_za(H_a)},H_Ua._createContext=function(H_a){return new H_za(H_a)};var H_d=laya.webgl.WebGL.mainContext;if(null!=H_d.getShaderPrecisionFormat){var H_e=H_d.getShaderPrecisionFormat(35633,36338),H_f=H_d.getShaderPrecisionFormat(35632,36338);H_g.shaderHighPrecision=!(!H_e.precision||!H_f.precision)}else H_g.shaderHighPrecision=!1;if(H_g.compressAstc=H_d.getExtension("WEBGL_compressed_texture_astc"),H_g.compressAtc=H_d.getExtension("WEBGL_compressed_texture_atc"),H_g.compressEtc=H_d.getExtension("WEBGL_compressed_texture_etc"),H_g.compressEtc1=H_d.getExtension("WEBGL_compressed_texture_etc1"),H_g.compressPvrtc=H_d.getExtension("WEBGL_compressed_texture_pvrtc"),H_g.compressS3tc=H_d.getExtension("WEBGL_compressed_texture_s3tc"),H_g.compressS3tc_srgb=H_d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),H_g.compressAstc=H_g.compressAstc?H_g.compressAstc:{},H_g.compressAtc=H_g.compressAtc?H_g.compressAtc:{},H_g.compressEtc=H_g.compressEtc?H_g.compressEtc:{},H_g.compressEtc1=H_g.compressEtc1?H_g.compressEtc1:{},H_g.compressPvrtc=H_g.compressPvrtc?H_g.compressPvrtc:{},H_g.compressS3tc=H_g.compressS3tc?H_g.compressS3tc:{},H_g.compressS3tc_srgb=H_g.compressS3tc_srgb?H_g.compressS3tc_srgb:{},H_d.deleteTexture1=H_d.deleteTexture,H_d.deleteTexture=function(H_a){H_a==H_xa.curBindTexValue&&(H_xa.curBindTexValue=null),H_d.deleteTexture1(H_a)},H_g.onStageResize(H_b,H_c),null==H_g.mainContext)throw new Error("webGL getContext err!");H_I.__init__(),H_Q.__init__(),H_Ea.__init__(),H_fa.__init__(),H_za.__init__(),H_Aa.__init__(),H_o.__init__(),H_Za.__int__(H_d),H_S._init_(H_d),H_t.isConchApp&&conch.setOnInvalidGLRes(H_g.onInvalidGLRes)},H_g.mainCanvas=null,H_g.antialias=!0,H_g.shaderHighPrecision=!1,H_g._bg_null=[0,0,0,0],H_g}(),H_xa=function(){function H_d(){}return H_m(H_d,"laya.webgl.WebGLContext"),H_d.UseProgram=function(H_a){return H_d._useProgram!==H_a&&(H_wa.mainContext.useProgram(H_a),H_d._useProgram=H_a,!0)},H_d.setDepthTest=function(H_a,H_b){H_b!==H_d._depthTest&&((H_d._depthTest=H_b)?H_a.enable(2929):H_a.disable(2929))},H_d.setDepthMask=function(H_a,H_b){H_b!==H_d._depthMask&&(H_d._depthMask=H_b,H_a.depthMask(H_b))},H_d.setDepthFunc=function(H_a,H_b){H_b!==H_d._depthFunc&&(H_d._depthFunc=H_b,H_a.depthFunc(H_b))},H_d.setBlend=function(H_a,H_b){H_b!==H_d._blend&&((H_d._blend=H_b)?H_a.enable(3042):H_a.disable(3042))},H_d.setBlendFunc=function(H_a,H_b,H_c){(H_b!==H_d._sFactor||H_c!==H_d._dFactor)&&(H_d._sFactor=H_b,H_d._dFactor=H_c,H_a.blendFunc(H_b,H_c))},H_d.setCullFace=function(H_a,H_b){H_b!==H_d._cullFace&&((H_d._cullFace=H_b)?H_a.enable(2884):H_a.disable(2884))},H_d.setFrontFace=function(H_a,H_b){H_b!==H_d._frontFace&&(H_d._frontFace=H_b,H_a.frontFace(H_b))},H_d.bindTexture=function(H_a,H_b,H_c){H_a.bindTexture(H_b,H_c),H_d.curBindTexTarget=H_b,H_d.curBindTexValue=H_c},H_d.DEPTH_BUFFER_BIT=256,H_d.STENCIL_BUFFER_BIT=1024,H_d.COLOR_BUFFER_BIT=16384,H_d.POINTS=0,H_d.LINES=1,H_d.LINE_LOOP=2,H_d.LINE_STRIP=3,H_d.TRIANGLES=4,H_d.TRIANGLE_STRIP=5,H_d.TRIANGLE_FAN=6,H_d.ZERO=0,H_d.ONE=1,H_d.SRC_COLOR=768,H_d.ONE_MINUS_SRC_COLOR=769,H_d.SRC_ALPHA=770,H_d.ONE_MINUS_SRC_ALPHA=771,H_d.DST_ALPHA=772,H_d.ONE_MINUS_DST_ALPHA=773,H_d.DST_COLOR=774,H_d.ONE_MINUS_DST_COLOR=775,H_d.SRC_ALPHA_SATURATE=776,H_d.FUNC_ADD=32774,H_d.BLEND_EQUATION=32777,H_d.BLEND_EQUATION_RGB=32777,H_d.BLEND_EQUATION_ALPHA=34877,H_d.FUNC_SUBTRACT=32778,H_d.FUNC_REVERSE_SUBTRACT=32779,H_d.BLEND_DST_RGB=32968,H_d.BLEND_SRC_RGB=32969,H_d.BLEND_DST_ALPHA=32970,H_d.BLEND_SRC_ALPHA=32971,H_d.CONSTANT_COLOR=32769,H_d.ONE_MINUS_CONSTANT_COLOR=32770,H_d.CONSTANT_ALPHA=32771,H_d.ONE_MINUS_CONSTANT_ALPHA=32772,H_d.BLEND_COLOR=32773,H_d.ARRAY_BUFFER=34962,H_d.ELEMENT_ARRAY_BUFFER=34963,H_d.ARRAY_BUFFER_BINDING=34964,H_d.ELEMENT_ARRAY_BUFFER_BINDING=34965,H_d.STREAM_DRAW=35040,H_d.STATIC_DRAW=35044,H_d.DYNAMIC_DRAW=35048,H_d.BUFFER_SIZE=34660,H_d.BUFFER_USAGE=34661,H_d.CURRENT_VERTEX_ATTRIB=34342,H_d.FRONT=1028,H_d.BACK=1029,H_d.CULL_FACE=2884,H_d.FRONT_AND_BACK=1032,H_d.BLEND=3042,H_d.DITHER=3024,H_d.STENCIL_TEST=2960,H_d.DEPTH_TEST=2929,H_d.SCISSOR_TEST=3089,H_d.POLYGON_OFFSET_FILL=32823,H_d.SAMPLE_ALPHA_TO_COVERAGE=32926,H_d.SAMPLE_COVERAGE=32928,H_d.NO_ERROR=0,H_d.INVALID_ENUM=1280,H_d.INVALID_VALUE=1281,H_d.INVALID_OPERATION=1282,H_d.OUT_OF_MEMORY=1285,H_d.CW=2304,H_d.CCW=2305,H_d.LINE_WIDTH=2849,H_d.ALIASED_POINT_SIZE_RANGE=33901,H_d.ALIASED_LINE_WIDTH_RANGE=33902,H_d.CULL_FACE_MODE=2885,H_d.FRONT_FACE=2886,H_d.DEPTH_RANGE=2928,H_d.DEPTH_WRITEMASK=2930,H_d.DEPTH_CLEAR_VALUE=2931,H_d.DEPTH_FUNC=2932,H_d.STENCIL_CLEAR_VALUE=2961,H_d.STENCIL_FUNC=2962,H_d.STENCIL_FAIL=2964,H_d.STENCIL_PASS_DEPTH_FAIL=2965,H_d.STENCIL_PASS_DEPTH_PASS=2966,H_d.STENCIL_REF=2967,H_d.STENCIL_VALUE_MASK=2963,H_d.STENCIL_WRITEMASK=2968,H_d.STENCIL_BACK_FUNC=34816,H_d.STENCIL_BACK_FAIL=34817,H_d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,H_d.STENCIL_BACK_PASS_DEPTH_PASS=34819,H_d.STENCIL_BACK_REF=36003,H_d.STENCIL_BACK_VALUE_MASK=36004,H_d.STENCIL_BACK_WRITEMASK=36005,H_d.VIEWPORT=2978,H_d.SCISSOR_BOX=3088,H_d.COLOR_CLEAR_VALUE=3106,H_d.COLOR_WRITEMASK=3107,H_d.UNPACK_ALIGNMENT=3317,H_d.PACK_ALIGNMENT=3333,H_d.MAX_TEXTURE_SIZE=3379,H_d.MAX_VIEWPORT_DIMS=3386,H_d.SUBPIXEL_BITS=3408,H_d.RED_BITS=3410,H_d.GREEN_BITS=3411,H_d.BLUE_BITS=3412,H_d.ALPHA_BITS=3413,H_d.DEPTH_BITS=3414,H_d.STENCIL_BITS=3415,H_d.POLYGON_OFFSET_UNITS=10752,H_d.POLYGON_OFFSET_FACTOR=32824,H_d.TEXTURE_BINDING_2D=32873,H_d.SAMPLE_BUFFERS=32936,H_d.SAMPLES=32937,H_d.SAMPLE_COVERAGE_VALUE=32938,H_d.SAMPLE_COVERAGE_INVERT=32939,H_d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,H_d.COMPRESSED_TEXTURE_FORMATS=34467,H_d.DONT_CARE=4352,H_d.FASTEST=4353,H_d.NICEST=4354,H_d.GENERATE_MIPMAP_HINT=33170,H_d.BYTE=5120,H_d.UNSIGNED_BYTE=5121,H_d.SHORT=5122,H_d.UNSIGNED_SHORT=5123,H_d.INT=5124,H_d.UNSIGNED_INT=5125,H_d.FLOAT=5126,H_d.DEPTH_COMPONENT=6402,H_d.ALPHA=6406,H_d.RGB=6407,H_d.RGBA=6408,H_d.LUMINANCE=6409,H_d.LUMINANCE_ALPHA=6410,H_d.UNSIGNED_SHORT_4_4_4_4=32819,H_d.UNSIGNED_SHORT_5_5_5_1=32820,H_d.UNSIGNED_SHORT_5_6_5=33635,H_d.FRAGMENT_SHADER=35632,H_d.VERTEX_SHADER=35633,H_d.MAX_VERTEX_ATTRIBS=34921,H_d.MAX_VERTEX_UNIFORM_VECTORS=36347,H_d.MAX_VARYING_VECTORS=36348,H_d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,H_d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,H_d.MAX_TEXTURE_IMAGE_UNITS=34930,H_d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,H_d.SHADER_TYPE=35663,H_d.DELETE_STATUS=35712,H_d.LINK_STATUS=35714,H_d.VALIDATE_STATUS=35715,H_d.ATTACHED_SHADERS=35717,H_d.ACTIVE_UNIFORMS=35718,H_d.ACTIVE_ATTRIBUTES=35721,H_d.SHADING_LANGUAGE_VERSION=35724,H_d.CURRENT_PROGRAM=35725,H_d.NEVER=512,H_d.LESS=513,H_d.EQUAL=514,H_d.LEQUAL=515,H_d.GREATER=516,H_d.NOTEQUAL=517,H_d.GEQUAL=518,H_d.ALWAYS=519,H_d.KEEP=7680,H_d.REPLACE=7681,H_d.INCR=7682,H_d.DECR=7683,H_d.INVERT=5386,H_d.INCR_WRAP=34055,H_d.DECR_WRAP=34056,H_d.VENDOR=7936,H_d.RENDERER=7937,H_d.VERSION=7938,H_d.NEAREST=9728,H_d.LINEAR=9729,H_d.NEAREST_MIPMAP_NEAREST=9984,H_d.LINEAR_MIPMAP_NEAREST=9985,H_d.NEAREST_MIPMAP_LINEAR=9986,H_d.LINEAR_MIPMAP_LINEAR=9987,H_d.TEXTURE_MAG_FILTER=10240,H_d.TEXTURE_MIN_FILTER=10241,H_d.TEXTURE_WRAP_S=10242,H_d.TEXTURE_WRAP_T=10243,H_d.TEXTURE_2D=3553,H_d.TEXTURE=5890,H_d.TEXTURE_CUBE_MAP=34067,H_d.TEXTURE_BINDING_CUBE_MAP=34068,H_d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,H_d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,H_d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,H_d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,H_d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,H_d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,H_d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,H_d.TEXTURE0=33984,H_d.TEXTURE1=33985,H_d.TEXTURE2=33986,H_d.TEXTURE3=33987,H_d.TEXTURE4=33988,H_d.TEXTURE5=33989,H_d.TEXTURE6=33990,H_d.TEXTURE7=33991,H_d.TEXTURE8=33992,H_d.TEXTURE9=33993,H_d.TEXTURE10=33994,H_d.TEXTURE11=33995,H_d.TEXTURE12=33996,H_d.TEXTURE13=33997,H_d.TEXTURE14=33998,H_d.TEXTURE15=33999,H_d.TEXTURE16=34e3,H_d.TEXTURE17=34001,H_d.TEXTURE18=34002,H_d.TEXTURE19=34003,H_d.TEXTURE20=34004,H_d.TEXTURE21=34005,H_d.TEXTURE22=34006,H_d.TEXTURE23=34007,H_d.TEXTURE24=34008,H_d.TEXTURE25=34009,H_d.TEXTURE26=34010,H_d.TEXTURE27=34011,H_d.TEXTURE28=34012,H_d.TEXTURE29=34013,H_d.TEXTURE30=34014,H_d.TEXTURE31=34015,H_d.ACTIVE_TEXTURE=34016,H_d.REPEAT=10497,H_d.CLAMP_TO_EDGE=33071,H_d.MIRRORED_REPEAT=33648,H_d.FLOAT_VEC2=35664,H_d.FLOAT_VEC3=35665,H_d.FLOAT_VEC4=35666,H_d.INT_VEC2=35667,H_d.INT_VEC3=35668,H_d.INT_VEC4=35669,H_d.BOOL=35670,H_d.BOOL_VEC2=35671,H_d.BOOL_VEC3=35672,H_d.BOOL_VEC4=35673,H_d.FLOAT_MAT2=35674,H_d.FLOAT_MAT3=35675,H_d.FLOAT_MAT4=35676,H_d.SAMPLER_2D=35678,H_d.SAMPLER_CUBE=35680,H_d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,H_d.VERTEX_ATTRIB_ARRAY_SIZE=34339,H_d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,H_d.VERTEX_ATTRIB_ARRAY_TYPE=34341,H_d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,H_d.VERTEX_ATTRIB_ARRAY_POINTER=34373,H_d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,H_d.COMPILE_STATUS=35713,H_d.LOW_FLOAT=36336,H_d.MEDIUM_FLOAT=36337,H_d.HIGH_FLOAT=36338,H_d.LOW_INT=36339,H_d.MEDIUM_INT=36340,H_d.HIGH_INT=36341,H_d.FRAMEBUFFER=36160,H_d.RENDERBUFFER=36161,H_d.RGBA4=32854,H_d.RGB5_A1=32855,H_d.RGB565=36194,H_d.DEPTH_COMPONENT16=33189,H_d.STENCIL_INDEX=6401,H_d.STENCIL_INDEX8=36168,H_d.DEPTH_STENCIL=34041,H_d.RENDERBUFFER_WIDTH=36162,H_d.RENDERBUFFER_HEIGHT=36163,H_d.RENDERBUFFER_INTERNAL_FORMAT=36164,H_d.RENDERBUFFER_RED_SIZE=36176,H_d.RENDERBUFFER_GREEN_SIZE=36177,H_d.RENDERBUFFER_BLUE_SIZE=36178,H_d.RENDERBUFFER_ALPHA_SIZE=36179,H_d.RENDERBUFFER_DEPTH_SIZE=36180,H_d.RENDERBUFFER_STENCIL_SIZE=36181,H_d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,H_d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,H_d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,H_d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,H_d.COLOR_ATTACHMENT0=36064,H_d.DEPTH_ATTACHMENT=36096,H_d.STENCIL_ATTACHMENT=36128,H_d.DEPTH_STENCIL_ATTACHMENT=33306,H_d.NONE=0,H_d.FRAMEBUFFER_COMPLETE=36053,H_d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,H_d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,H_d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,H_d.FRAMEBUFFER_UNSUPPORTED=36061,H_d.FRAMEBUFFER_BINDING=36006,H_d.RENDERBUFFER_BINDING=36007,H_d.MAX_RENDERBUFFER_SIZE=34024,H_d.INVALID_FRAMEBUFFER_OPERATION=1286,H_d.UNPACK_FLIP_Y_WEBGL=37440,H_d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,H_d.CONTEXT_LOST_WEBGL=37442,H_d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,H_d.BROWSER_DEFAULT_WEBGL=37444,H_d._useProgram=null,H_d._depthTest=!0,H_d._depthMask=!0,H_d._blend=!1,H_d._cullFace=!1,H_d.curBindTexTarget=null,H_d.curBindTexValue=null,H_g(H_d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),H_d}(),H_ya=function(H_a){function H_b(){H_b.__super.call(this)}H_m(H_b,"laya.webgl.display.GraphicsGL",H_h);var H_c=H_b.prototype;return H_c.setShader=function(H_a){this._saveToCmd(H_t.context._setShader,[H_a])},H_c.setIBVB=function(H_a,H_b,H_c,H_d,H_e,H_f){this._saveToCmd(H_t.context._setIBVB,[H_a,H_b,H_c,H_d,H_e,H_f])},H_c.drawParticle=function(H_a,H_b,H_c){var H_d=H_x.createParticleTemplate2D(H_c);H_d.x=H_a,H_d.y=H_b,this._saveToCmd(H_t.context._drawParticle,[H_d])},H_b}(),H_za=function(H_a){var H_c;function H_P(H_a){this._x=0,this._y=0,this._id=++H_P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,H_P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=H_P.MAXCLIPRECT,this.mOutPoint,this._canvas=H_a,this._canvas._addReference(),H_P._contextcount++,H_t.isFlash?(this._ib=H_oa.create(35044),H_sa.fillIBQuadrangle(this._ib,16)):this._ib=H_oa.QuadrangleIB,this.clear()}H_m(H_P,"laya.webgl.canvas.WebGLContext2D",H_e);var H_b=H_P.prototype;return H_b.setIsMainContext=function(){this._isMain=!0},H_b.clearBG=function(H_a,H_b,H_c,H_d){var H_e=H_wa.mainContext;H_e.clearColor(H_a,H_b,H_c,H_d),H_e.clear(16384)},H_b._getSubmits=function(){return this._submits},H_b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var H_a=0,H_b=this._submits._length;H_a<H_b;H_a++)this._submits[H_a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},H_b.destroy=function(){--H_P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=H_oa.QuadrangleIB&&this._ib.releaseResource()},H_b.clear=function(){this._submits||(this._other=H_c.DEFAULT,this._curMat=H_B.create(),this._vb=H_pa.create(-1),this._submits=[],this._save=[H_Y.Create(this)],this._save.length=10,this._shader2D=new H_o,this._triangleMesh=H_Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=H_c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=H_P.MAXCLIPRECT,this._curSubmit=H_fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=H_T.DEFAULT;for(var H_a=0,H_b=this._submits._length;H_a<H_b;H_a++)this._submits[H_a].releaseRender(),this._submits[H_a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},H_b.size=function(H_a,H_b){if(this._width!=H_a||this._height!=H_b)if(0==H_a||0==H_b){0!=this._vb._byteLength&&(this._width=H_a,this._height=H_b,this._vb.clear(),this._vb.upload());for(var H_c=0,H_d=this._submits._length;H_c<H_d;H_c++)this._submits[H_c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=H_a,this._height=H_b,this._targets&&this._targets.size(H_a,H_b),this._canvas.memorySize-=this._canvas.memorySize;0===H_a&&0===H_b&&this._releaseMem()},H_b._getTransformMatrix=function(){return this._curMat},H_b.translate=function(H_a,H_b){0===H_a&&0===H_b||(H_$.save(this),this._curMat.bTransform&&(H_Z.save(this),this._curMat.transformPointN(H_C.TEMP.setTo(H_a,H_b)),H_a=H_C.TEMP.x,H_b=H_C.TEMP.y),this._x+=H_a,this._y+=H_b)},H_b.save=function(){this._save[this._save._length++]=H_Y.Create(this)},H_b.restore=function(){var H_a=this._save._length;if(!(H_a<1))for(var H_b=H_a-1;0<=H_b;H_b--){var H_c=this._save[H_b];if(H_c.restore(this),H_c.isSaveMark())return void(this._save._length=H_b)}},H_b._fillText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){void 0===H_j&&(H_j=0);var H_k=this._shader2D,H_l=this._curSubmit.shaderValue,H_m=H_e?H_qa.create(H_e):this._other.font;if(H_Q.enabled)H_k.ALPHA!==H_l.ALPHA&&(H_k.glTexture=null),H_na.drawText(this,H_a,H_b,this._curMat,H_m,H_i||this._other.textAlign,H_f,H_g,H_h,H_c,H_d,H_j);else{this._shader2D.defines.getValue();var H_n=H_f?H_q.create(H_f)._color:H_k.colorAdd;H_k.ALPHA===H_l.ALPHA&&H_n===H_k.colorAdd&&H_l.colorAdd===H_k.colorAdd||(H_k.glTexture=null,H_k.colorAdd=H_n),H_na.drawText(this,H_a,H_b,this._curMat,H_m,H_i||this._other.textAlign,H_f,H_g,H_h,H_c,H_d,H_j)}},H_b.fillWords=function(H_a,H_b,H_c,H_d,H_e,H_f){this._fillText(null,H_a,H_b,H_c,H_d,H_e,null,-1,null,H_f)},H_b.fillBorderWords=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._fillBorderText(null,H_a,H_b,H_c,H_d,H_e,H_f,H_g,null)},H_b.fillText=function(H_a,H_b,H_c,H_d,H_e,H_f){this._fillText(H_a,null,H_b,H_c,H_d,H_e,null,-1,H_f)},H_b.strokeText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._fillText(H_a,null,H_b,H_c,H_d,null,H_e,H_f||1,H_g)},H_b.fillBorderText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){this._fillBorderText(H_a,null,H_b,H_c,H_d,H_e,H_f,H_g,H_h)},H_b._fillBorderText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){if(!H_Q.enabled)return this._fillText(H_a,H_b,H_c,H_d,H_e,null,H_g,H_h||1,H_i),void this._fillText(H_a,H_b,H_c,H_d,H_e,H_f,null,-1,H_i);var H_j=this._shader2D,H_k=this._curSubmit.shaderValue;H_j.ALPHA!==H_k.ALPHA&&(H_j.glTexture=null);var H_l=H_e?(H_P._fontTemp.setFont(H_e),H_P._fontTemp):this._other.font;H_na.drawText(this,H_a,H_b,this._curMat,H_l,H_i||this._other.textAlign,H_f,H_g,H_h||1,H_c,H_d,0)},H_b.fillRect=function(H_a,H_b,H_c,H_d,H_e){var H_f=this._vb;if(H_sa.fillRectImgVb(H_f,this._clipRect,H_a,H_b,H_c,H_d,H_K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H_g=this._shader2D.fillStyle;H_e&&(this._shader2D.fillStyle=H_T.create(H_e));var H_h=this._shader2D,H_i=this._curSubmit.shaderValue;if(H_h.fillStyle!==H_i.fillStyle||H_h.ALPHA!==H_i.ALPHA){H_h.glTexture=null;var H_j=this._curSubmit=H_fa.createSubmit(this,this._ib,H_f,(H_f._byteLength-64)/32*3,H_Aa.create(2,0));H_j.shaderValue.color=H_h.fillStyle._color._color,H_j.shaderValue.ALPHA=H_h.ALPHA,this._submits[this._submits._length++]=H_j}this._curSubmit._numEle+=6,this._shader2D.fillStyle=H_g}},H_b.fillTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){if(H_a.loaded&&H_a.bitmap&&H_a.source){var H_i=this._vb,H_j=H_a.bitmap.width,H_k=H_a.bitmap.height,H_l=H_a.uv,H_m=H_g.x%H_a.width,H_n=H_g.y%H_a.height;if(H_j!=H_h.w||H_k!=H_h.h){if(!H_h.w&&!H_h.h)switch(H_h.oy=H_h.ox=0,H_f){case"repeat":H_h.width=H_d,H_h.height=H_e;break;case"repeat-x":H_h.width=H_d,H_n<0?H_a.height+H_n>H_e?H_h.height=H_e:H_h.height=H_a.height+H_n:(H_h.oy=H_n,H_a.height+H_n>H_e?H_h.height=H_e-H_n:H_h.height=H_a.height);break;case"repeat-y":H_m<0?H_a.width+H_m>H_d?H_h.width=H_d:H_h.width=H_a.width+H_m:(H_h.ox=H_m,H_a.width+H_m>H_d?H_h.width=H_d-H_m:H_h.width=H_a.width),H_h.height=H_e;break;case"no-repeat":H_m<0?H_a.width+H_m>H_d?H_h.width=H_d:H_h.width=H_a.width+H_m:(H_h.ox=H_m,H_a.width+H_m>H_d?H_h.width=H_d-H_m:H_h.width=H_a.width),H_n<0?H_a.height+H_n>H_e?H_h.height=H_e:H_h.height=H_a.height+H_n:(H_h.oy=H_n,H_a.height+H_n>H_e?H_h.height=H_e-H_n:H_h.height=H_a.height);break;default:H_h.width=H_d,H_h.height=H_e}H_h.w=H_j,H_h.h=H_k,H_h.uv=[0,0,H_h.width/H_j,0,H_h.width/H_j,H_h.height/H_k,0,H_h.height/H_k]}if(H_b+=H_h.ox,H_c+=H_h.oy,H_m-=H_h.ox,H_n-=H_h.oy,H_sa.fillRectImgVb(H_i,this._clipRect,H_b,H_c,H_h.width,H_h.height,H_h.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H_q=H_Ja.create(this,this._ib,H_i,(H_i._byteLength-64)/32*3,H_Aa.create(256,0)),H_r=(this._submits[this._submits._length++]=H_q).shaderValue;H_r.textureHost=H_a;var H_s=H_l[0]*H_j,H_t=H_l[1]*H_k,H_u=(H_l[2]-H_l[0])*H_j,H_v=(H_l[5]-H_l[3])*H_k,H_w=-H_m/H_j,H_x=-H_n/H_k;H_r.u_TexRange[0]=H_s/H_j,H_r.u_TexRange[1]=H_u/H_j,H_r.u_TexRange[2]=H_t/H_k,H_r.u_TexRange[3]=H_v/H_k,H_r.u_offset[0]=H_w,H_r.u_offset[1]=H_x,H_Q.enabled&&!this._isMain&&H_q.addTexture(H_a,(H_i._byteLength>>2)-16),(this._curSubmit=H_q)._renderType=10017,H_q._numEle+=6}}else this.sprite&&H_y.timer.callLater(this,this._repaintSprite)},H_b.setShader=function(H_a){H_V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=H_a},H_b.setFilters=function(H_a){H_V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=H_a,this._curSubmit=H_fa.RENDERBASE,this._renderKey=0,this._drawCount++},H_b.drawTexture=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._drawTextureM(H_a,H_b,H_c,H_d,H_e,H_f,H_g,null,1)},H_b.addTextureVb=function(H_a,H_b,H_c){var H_d=this._curSubmit._vb||this._vb,H_e=H_d._byteLength>>2;H_d.byteLength=H_e+16<<2;for(var H_f=H_d.getFloat32Array(),H_g=0;H_g<16;H_g+=4)H_f[H_e++]=H_a[H_g]+H_b,H_f[H_e++]=H_a[H_g+1]+H_c,H_f[H_e++]=H_a[H_g+2],H_f[H_e++]=H_a[H_g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),H_d._upload=!0},H_b.willDrawTexture=function(H_a,H_b){if(!(H_a.loaded&&H_a.bitmap&&H_a.source))return this.sprite&&H_y.timer.callLater(this,this._repaintSprite),0;var H_c=H_a.bitmap,H_d=H_c.id+this._shader2D.ALPHA*H_b+10016;if(H_d==this._renderKey)return H_d;var H_e=this._shader2D,H_f=H_e.ALPHA,H_g=this._curSubmit.shaderValue;H_e.ALPHA*=H_b,this._renderKey=H_d,this._drawCount++,H_e.glTexture=H_c;var H_h=this._vb,H_i=null,H_j=H_h._byteLength/32*3,H_k=H_g.textureHost&&H_g.textureHost==H_a&&H_g.textureHost.alphaTexture==H_a.alphaTexture;return H_i=H_Ja.create(this,this._ib,H_h,H_j,H_Aa.create(1,0)),(this._submits[this._submits._length++]=H_i).shaderValue.textureHost=H_a,H_i._renderType=10016,H_i._preIsSameTextureShader=10016===this._curSubmit._renderType&&H_e.ALPHA===H_g.ALPHA&&H_k,this._curSubmit=H_i,H_e.ALPHA=H_f,H_d},H_b.drawTextures=function(H_a,H_b,H_c,H_d){if(H_a.loaded&&H_a.bitmap&&H_a.source){var H_e=this._clipRect;if(this._clipRect=H_P.MAXCLIPRECT,this._drawTextureM(H_a,H_b[0],H_b[1],H_a.width,H_a.height,H_c,H_d,null,1)){if(this._clipRect=H_e,H_G.drawCall++,!(H_b.length<4)){for(var H_f=this._curSubmit._vb||this._vb,H_g=this._curMat.a,H_h=this._curMat.d,H_i=2,H_j=H_b.length;H_i<H_j;H_i+=2)H_sa.copyPreImgVb(H_f,(H_b[H_i]-H_b[H_i-2])*H_g,(H_b[H_i+1]-H_b[H_i-1])*H_h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&H_y.timer.callLater(this,this._repaintSprite)},H_b._drawTextureM=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){if(!H_a.loaded||!H_a.source)return this.sprite&&H_y.timer.callLater(this,this._repaintSprite),!1;var H_j=this._curSubmit._vb||this._vb,H_k=H_a.bitmap;H_b+=H_f,H_c+=H_g,this._drawCount++;var H_l=H_k.id+this._shader2D.ALPHA*H_i+10016;if(H_l!=this._renderKey){this._renderKey=H_l;var H_m=this._curSubmit.shaderValue,H_n=this._shader2D,H_q=H_n.ALPHA;H_n.ALPHA*=H_i,H_n.glTexture=H_k;var H_r=this._vb,H_s=null,H_t=H_r._byteLength/32*3,H_u=H_m.textureHost&&H_m.textureHost==H_a&&H_m.textureHost.alphaTexture==H_a.alphaTexture;H_s=H_Ja.create(this,this._ib,H_r,H_t,H_Aa.create(1,0)),(this._submits[this._submits._length++]=H_s).shaderValue.textureHost=H_a,H_s._renderType=10016,H_s._preIsSameTextureShader=10016===this._curSubmit._renderType&&H_n.ALPHA===H_m.ALPHA&&H_u,this._curSubmit=H_s,H_j=this._curSubmit._vb||this._vb,H_n.ALPHA=H_q}return!!H_sa.fillRectImgVb(H_j,this._clipRect,H_b,H_c,H_d||H_a.width,H_e||H_a.height,H_a.uv,H_h||this._curMat,this._x,this._y,0,0)&&(H_Q.enabled&&!this._isMain&&this._curSubmit.addTexture(H_a,(H_j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},H_b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},H_b._drawText=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){var H_k=H_a.bitmap;this._drawCount++;var H_l=H_k.id+this._shader2D.ALPHA+10016;if(H_l!=this._renderKey){this._renderKey=H_l;var H_m=this._curSubmit.shaderValue,H_n=this._shader2D;H_n.glTexture=H_k;var H_q=this._vb,H_r=null,H_s=H_q._byteLength/32*3,H_t=H_m.textureHost&&H_m.textureHost==H_a&&H_m.textureHost.alphaTexture==H_a.alphaTexture;(H_r=H_Q.enabled?H_Ja.create(this,this._ib,H_q,H_s,H_Aa.create(1,0)):H_Ja.create(this,this._ib,H_q,H_s,H_$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&H_n.ALPHA===H_m.ALPHA&&H_t,(this._submits[this._submits._length++]=H_r).shaderValue.textureHost=H_a,H_r._renderType=10016,this._curSubmit=H_r}H_a.active();var H_u=this._curSubmit._vb||this._vb;H_sa.fillRectImgVb(H_u,this._clipRect,H_b+H_g,H_c+H_h,H_d||H_a.width,H_e||H_a.height,H_a.uv,H_f||this._curMat,this._x,this._y,H_i,H_j,!0)&&(H_Q.enabled&&!this._isMain&&this._curSubmit.addTexture(H_a,(H_u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},H_b.drawTextureWithTransform=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){if(H_f){var H_j=this._curMat,H_k=this._x,H_l=this._y;(0!==H_g||0!==H_h)&&(this._x=H_g*H_j.a+H_h*H_j.c,this._y=H_h*H_j.d+H_g*H_j.b),H_f&&H_j.bTransform?(H_B.mul(H_f,H_j,H_P._tmpMatrix),(H_f=H_P._tmpMatrix)._checkTransform()):(this._x+=H_j.tx,this._y+=H_j.ty),this._drawTextureM(H_a,H_b,H_c,H_d,H_e,0,0,H_f,H_i),this._x=H_k,this._y=H_l}else this._drawTextureM(H_a,H_b,H_c,H_d,H_e,H_g,H_h,null,H_i)},H_b.fillQuadrangle=function(H_a,H_b,H_c,H_d,H_e){var H_f=this._curSubmit,H_g=this._vb,H_h=this._shader2D,H_i=H_f.shaderValue;if(this._renderKey=0,H_a.bitmap){var H_j=H_a.bitmap;H_h.glTexture==H_j&&H_h.ALPHA===H_i.ALPHA||(H_h.glTexture=H_j,(H_f=this._curSubmit=H_fa.createSubmit(this,this._ib,H_g,H_g._byteLength/32*3,H_Aa.create(1,0))).shaderValue.glTexture=H_j,this._submits[this._submits._length++]=H_f),H_sa.fillQuadrangleImgVb(H_g,H_b,H_c,H_d,H_a.uv,H_e||this._curMat,this._x,this._y)}else H_f.shaderValue.fillStyle&&H_f.shaderValue.fillStyle.equal(H_a)&&H_h.ALPHA===H_i.ALPHA||(H_h.glTexture=null,(H_f=this._curSubmit=H_fa.createSubmit(this,this._ib,H_g,H_g._byteLength/32*3,H_Aa.create(2,0))).shaderValue.defines.add(2),H_f.shaderValue.fillStyle=H_T.create(H_a),this._submits[this._submits._length++]=H_f),H_sa.fillQuadrangleImgVb(H_g,H_b,H_c,H_d,H_K.DEF_UV,H_e||this._curMat,this._x,this._y);H_f._numEle+=6},H_b.drawTexture2=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){if(0!=H_f){var H_i=this._curMat;if(this._x=H_a*H_i.a+H_b*H_i.c,this._y=H_b*H_i.d+H_a*H_i.b,H_e&&(H_e=H_i.bTransform||H_e.bTransform?(H_B.mul(H_e,H_i,H_P._tmpMatrix),H_P._tmpMatrix):(this._x+=H_e.tx+H_i.tx,this._y+=H_e.ty+H_i.ty,H_B.EMPTY)),1!==H_f||H_g){var H_j=this._shader2D.ALPHA,H_k=this._nBlendType;this._shader2D.ALPHA=H_f,H_g&&(this._nBlendType=H_S.TOINT(H_g)),this._drawTextureM(H_h[0],H_h[1]-H_c,H_h[2]-H_d,H_h[3],H_h[4],0,0,H_e,1),this._shader2D.ALPHA=H_j,this._nBlendType=H_k}else this._drawTextureM(H_h[0],H_h[1]-H_c,H_h[2]-H_d,H_h[3],H_h[4],0,0,H_e,1);this._x=this._y=0}},H_b.drawCanvas=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_a.context;if(this._renderKey=0,H_f._targets)this._submits[this._submits._length++]=H_Ia.create(H_f,0,null),this._curSubmit=H_fa.RENDERBASE,H_f._targets.drawTo(this,H_b,H_c,H_d,H_e);else{var H_g=this._submits[this._submits._length++]=H_Ia.create(H_f,this._shader2D.ALPHA,this._shader2D.filters),H_h=H_d/H_a.width,H_i=H_e/H_a.height,H_j=H_g._matrix;this._curMat.copyTo(H_j),1!=H_h&&1!=H_i&&H_j.scale(H_h,H_i);var H_k=H_j.tx,H_l=H_j.ty;H_j.tx=H_j.ty=0,H_j.transformPoint(H_C.TEMP.setTo(H_b,H_c)),H_j.translate(H_C.TEMP.x+H_k,H_C.TEMP.y+H_l),this._curSubmit=H_fa.RENDERBASE}H_z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=H_f._targets?"yellow":"green",this.strokeRect(H_b-1,H_c-1,H_d+2,H_e+2,1),this.strokeRect(H_b,H_c,H_d,H_e,1),this.restore())},H_b.drawTarget=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){void 0===H_j&&(H_j=-1);var H_k=this._vb;if(H_sa.fillRectImgVb(H_k,this._clipRect,H_b,H_c,H_d,H_e,H_i||H_K.DEF_UV,H_f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var H_l=this._curSubmit=H_la.create(this,this._ib,H_k,(H_k._byteLength-64)/32*3,H_h,H_g);H_l.blendType=-1==H_j?this._nBlendType:H_j,H_l.scope=H_a,this._submits[this._submits._length++]=H_l,this._curSubmit._numEle+=6}},H_b.mixRGBandAlpha=function(H_a){return this._mixRGBandAlpha(H_a,this._shader2D.ALPHA)},H_b._mixRGBandAlpha=function(H_a,H_b){var H_c=(4278190080&H_a)>>>24;return 0!=H_c?H_c*=H_b:H_c=255*H_b,16777215&H_a|H_c<<24},H_b.drawTriangles=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){if(!H_a.loaded||!H_a.source)return this.sprite&&H_y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;H_a.bitmap;var H_k=this._mixRGBandAlpha(4294967295,H_h),H_l=(H_d.length,H_f.length);this._renderKey=-1;var H_m=this._curSubmit=H_Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,H_Aa.create(1,0));return H_m.shaderValue.textureHost=H_a,H_m._renderType=10016,this._submits[this._submits._length++]=H_m,H_g?(H_P._tmpMatrix.a=H_g.a,H_P._tmpMatrix.b=H_g.b,H_P._tmpMatrix.c=H_g.c,H_P._tmpMatrix.d=H_g.d,H_P._tmpMatrix.tx=H_g.tx+H_b,H_P._tmpMatrix.ty=H_g.ty+H_c,H_B.mul(H_P._tmpMatrix,this._curMat,H_P._tmpMatrix)):(H_P._tmpMatrix.a=this._curMat.a,H_P._tmpMatrix.b=this._curMat.b,H_P._tmpMatrix.c=this._curMat.c,H_P._tmpMatrix.d=this._curMat.d,H_P._tmpMatrix.tx=this._curMat.tx+H_b,H_P._tmpMatrix.ty=this._curMat.ty+H_c),this._triangleMesh.addData(H_d,H_e,H_f,H_P._tmpMatrix,H_k,this),this._curSubmit._numEle+=H_l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},H_b.transform=function(H_a,H_b,H_c,H_d,H_e,H_f){H_Z.save(this),H_B.mul(H_B.TEMP.setTo(H_a,H_b,H_c,H_d,H_e,H_f),this._curMat,this._curMat),this._curMat._checkTransform()},H_b.setTransformByMatrix=function(H_a){H_a.copyTo(this._curMat)},H_b.transformByMatrix=function(H_a){H_Z.save(this),H_B.mul(H_a,this._curMat,this._curMat),this._curMat._checkTransform()},H_b.rotate=function(H_a){H_Z.save(this),this._curMat.rotateEx(H_a)},H_b.scale=function(H_a,H_b){H_Z.save(this),this._curMat.scaleEx(H_a,H_b)},H_b.clipRect=function(H_a,H_b,H_c,H_d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var H_e=H_ka.create(4);this.addRenderObject(H_e);var H_f=this._vb,H_g=H_f._byteLength>>2;if(H_sa.fillRectImgVb(H_f,null,H_a,H_b,H_c,H_d,H_K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var H_h=this._curSubmit=H_fa.createSubmit(this,this._ib,H_f,(H_f._byteLength-64)/32*3,H_Aa.create(2,0));H_h.shaderValue.ALPHA=1,this._submits[this._submits._length++]=H_h,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var H_i=H_ka.create(5);this.addRenderObject(H_i);var H_j=H_f.getFloat32Array(),H_k=Math.min(Math.min(Math.min(H_j[0+H_g],H_j[4+H_g]),H_j[8+H_g]),H_j[12+H_g]),H_l=Math.max(Math.max(Math.max(H_j[0+H_g],H_j[4+H_g]),H_j[8+H_g]),H_j[12+H_g]),H_m=Math.min(Math.min(Math.min(H_j[1+H_g],H_j[5+H_g]),H_j[9+H_g]),H_j[13+H_g]),H_n=Math.max(Math.max(Math.max(H_j[1+H_g],H_j[5+H_g]),H_j[9+H_g]),H_j[13+H_g]);H_X.save(this,H_i,H_a,H_b,H_c,H_d,H_k,H_m,H_l-H_k,H_n-H_m),this._curSubmit=H_fa.RENDERBASE}else{H_c*=this._curMat.a,H_d*=this._curMat.d;var H_q=H_C.TEMP;this._curMat.transformPoint(H_q.setTo(H_a,H_b)),H_c<0&&(H_q.x=H_q.x+H_c,H_c=-H_c),H_d<0&&(H_q.y=H_q.y+H_d,H_d=-H_d),this._renderKey=0;var H_r=this._curSubmit=H_ja.create(this);(this._submits[this._submits._length++]=H_r).submitIndex=this._submits._length,H_r.submitLength=9999999,H_W.save(this,H_r);var H_s=this._clipRect,H_t=H_s.x,H_u=H_s.y,H_v=H_q.x+H_c,H_w=H_q.y+H_d;H_t<H_q.x&&(H_s.x=H_q.x),H_u<H_q.y&&(H_s.y=H_q.y),H_s.width=Math.min(H_v,H_t+H_s.width)-H_s.x,H_s.height=Math.min(H_w,H_u+H_s.height)-H_s.y,this._shader2D.glTexture=null,H_r.clipRect.copyFrom(H_s),this._curSubmit=H_fa.RENDERBASE}},H_b.setIBVB=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k){if(void 0===H_i&&(H_i=0),void 0===H_j&&(H_j=0),void 0===H_k&&(H_k=0),null===H_c){if(H_t.isFlash){var H_l=H_d;H_l._selfIB||(H_l._selfIB=H_oa.create(35044)),H_l._selfIB.clear(),H_c=H_l._selfIB}else H_c=this._ib;H_sa.expandIBQuadrangle(H_c,H_d._byteLength/(4*H_d.vertexStride*4))}if(!H_h||!H_g)throw Error("setIBVB must input:shader shaderValues");var H_m=H_ia.create(this,H_d,H_c,H_e,H_g,H_h,H_i,H_j,H_k);H_f||(H_f=H_B.EMPTY),H_f.translate(H_a,H_b),H_B.mul(H_f,this._curMat,H_m._mat),H_f.translate(-H_a,-H_b),this._submits[this._submits._length++]=H_m,this._curSubmit=H_fa.RENDERBASE,this._renderKey=0},H_b.addRenderObject=function(H_a){this._submits[this._submits._length++]=H_a},H_b.fillTrangles=function(H_a,H_b,H_c,H_d,H_e){var H_f=this._curSubmit,H_g=this._vb,H_h=this._shader2D,H_i=H_f.shaderValue,H_j=H_d.length>>4,H_k=H_a.bitmap;this._renderKey=0,H_h.glTexture==H_k&&H_h.ALPHA===H_i.ALPHA||((H_f=this._curSubmit=H_fa.createSubmit(this,this._ib,H_g,H_g._byteLength/32*3,H_Aa.create(1,0))).shaderValue.textureHost=H_a,this._submits[this._submits._length++]=H_f),H_sa.fillTranglesVB(H_g,H_b,H_c,H_d,H_e||this._curMat,this._x,this._y),H_f._numEle+=6*H_j},H_b.submitElement=function(H_a,H_b){var H_c=this._submits;for(H_b<0&&(H_b=H_c._length);H_a<H_b;)H_a+=H_c[H_a].renderSubmit()},H_b.finish=function(){H_wa.mainContext.finish()},H_b.flush=function(){var H_a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(H_a>this._ib.bufferLength/12&&H_sa.expandIBQuadrangle(this._ib,H_a),!this._isMain&&H_Q.enabled&&H_Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=H_Q._atlasRestore;for(var H_b=this._submits,H_c=0,H_d=H_b._length;H_c<H_d;H_c++){var H_e=H_b[H_c];10016===H_e.getRenderType()&&H_e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),H_ba.instance&&H_ba.getInstance().reset();var H_f;for(H_c=0,H_f=this.meshlist.length;H_c<H_f;H_c++){var H_g=this.meshlist[H_c];H_g.canReuse?H_g.releaseMesh():H_g.destroy()}return this.meshlist.length=0,this._curSubmit=H_fa.RENDERBASE,this._renderKey=0,this._triangleMesh=H_Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},H_b.setPathId=function(H_a){if(this.mId=H_a,-1!=this.mId){this.mHaveKey=!1;var H_b=H_M.getInstance();H_b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,H_b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},H_b.movePath=function(H_a,H_b){var H_c=H_a,H_d=H_b;H_a=this._curMat.a*H_c+this._curMat.c*H_d+this._curMat.tx,H_b=this._curMat.b*H_c+this._curMat.d*H_d+this._curMat.ty,this.mX+=H_a,this.mY+=H_b},H_b.beginPath=function(){var H_a=this._getPath();H_a.tempArray.length=0,H_a.closePath=!1,this.mX=0,this.mY=0},H_b.closePath=function(){this._path.closePath=!0},H_b.fill=function(H_a){void 0===H_a&&(H_a=!1);var H_b=this._getPath();this.drawPoly(0,0,H_b.tempArray,this.fillStyle._color.numColor,0,0,H_a)},H_b.stroke=function(){var H_a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)H_a.drawLine(0,0,H_a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var H_b=H_M.getInstance().shapeLineDic[this.mId];H_b.rebuild(H_a.tempArray),H_a.setGeomtry(H_b)}else H_M.getInstance().addLine(this.mId,H_a.drawLine(0,0,H_a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));H_a.update();var H_c=[this.mX,this.mY],H_d=H_fa.createShape(this,H_a.ib,H_a.vb,H_a.count,H_a.offset,H_Aa.create(4,0));H_d.shaderValue.ALPHA=this._shader2D.ALPHA,H_d.shaderValue.u_pos=H_c,H_d.shaderValue.u_mmat2=H_ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=H_d,this._renderKey=-1}},H_b.line=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=this._curSubmit,H_h=this._vb;if(H_sa.fillLineVb(H_h,this._clipRect,H_a,H_b,H_c,H_d,H_e,H_f)){this._renderKey=0;var H_i=this._shader2D,H_j=H_g.shaderValue;H_i.strokeStyle===H_j.strokeStyle&&H_i.ALPHA===H_j.ALPHA||(H_i.glTexture=null,(H_g=this._curSubmit=H_fa.createSubmit(this,this._ib,H_h,(H_h._byteLength-64)/32*3,H_Aa.create(2,0))).shaderValue.strokeStyle=H_i.strokeStyle,H_g.shaderValue.mainID=2,H_g.shaderValue.ALPHA=H_i.ALPHA,this._submits[this._submits._length++]=H_g),H_g._numEle+=6}},H_b.moveTo=function(H_a,H_b,H_c){void 0===H_c&&(H_c=!0);var H_d=this._getPath();if(H_c){var H_e=H_a,H_f=H_b;H_a=this._curMat.a*H_e+this._curMat.c*H_f,H_b=this._curMat.b*H_e+this._curMat.d*H_f}H_d.addPoint(H_a,H_b)},H_b.lineTo=function(H_a,H_b,H_c){void 0===H_c&&(H_c=!0);var H_d=this._getPath();if(H_c){var H_e=H_a,H_f=H_b;H_a=this._curMat.a*H_e+this._curMat.c*H_f,H_b=this._curMat.b*H_e+this._curMat.d*H_f}H_d.addPoint(H_a,H_b)},H_b.drawCurves=function(H_a,H_b,H_c){this.setPathId(-1),this.beginPath(),this.strokeStyle=H_c[3],this.lineWidth=H_c[4];var H_d=H_c[2];H_a+=H_c[0],H_b+=H_c[1],this.movePath(H_a,H_b),this.moveTo(H_d[0],H_d[1]);for(var H_e=2,H_f=H_d.length;H_e<H_f;)this.quadraticCurveTo(H_d[H_e++],H_d[H_e++],H_d[H_e++],H_d[H_e++]);this.stroke()},H_b.arcTo=function(H_a,H_b,H_c,H_d,H_e){if(-1==this.mId||!this.mHaveKey){var H_f=0,H_g=0,H_h=0,H_i=this._getPath();this._curMat.copyTo(H_P._tmpMatrix),H_P._tmpMatrix.tx=H_P._tmpMatrix.ty=0,H_P._tempPoint.setTo(H_i.getEndPointX(),H_i.getEndPointY()),H_P._tmpMatrix.invertTransformPoint(H_P._tempPoint);var H_j=H_P._tempPoint.x-H_a,H_k=H_P._tempPoint.y-H_b,H_l=Math.sqrt(H_j*H_j+H_k*H_k);if(!(H_l<=1e-6)){var H_m=H_j/H_l,H_n=H_k/H_l,H_q=H_c-H_a,H_r=H_d-H_b,H_s=H_q*H_q+H_r*H_r,H_t=Math.sqrt(H_s);if(!(H_t<=1e-6)){var H_u=H_q/H_t,H_v=H_r/H_t,H_w=H_m+H_u,H_x=H_n+H_v,H_y=Math.sqrt(H_w*H_w+H_x*H_x);if(!(H_y<=1e-6)){var H_z=H_w/H_y,H_A=H_x/H_y,H_B=Math.acos(H_z*H_m+H_A*H_n),H_C=Math.PI/2-H_B,H_D=(H_l=H_e/Math.tan(H_C))*H_m+H_a,H_E=H_l*H_n+H_b,H_F=Math.sqrt(H_l*H_l+H_e*H_e),H_G=H_a+H_z*H_F,H_H=H_b+H_A*H_F,H_I=0,H_J=0;if(0<=H_m*H_v-H_n*H_u){var H_K=2*H_C/H_P.SEGNUM;H_I=Math.sin(H_K),H_J=Math.cos(H_K)}else H_K=2*-H_C/H_P.SEGNUM,H_I=Math.sin(H_K),H_J=Math.cos(H_K);H_g=this._curMat.a*H_D+this._curMat.c*H_E,H_h=this._curMat.b*H_D+this._curMat.d*H_E,H_g==this._path.getEndPointX()&&H_h==this._path.getEndPointY()||H_i.addPoint(H_g,H_h);var H_L=H_D-H_G,H_M=H_E-H_H;for(H_f=0;H_f<H_P.SEGNUM;H_f++){var H_N=H_L*H_J+H_M*H_I,H_O=-H_L*H_I+H_M*H_J;H_g=H_N+H_G,H_h=H_O+H_H,H_a=this._curMat.a*H_g+this._curMat.c*H_h,H_h=H_b=this._curMat.b*H_g+this._curMat.d*H_h,(H_g=H_a)==this._path.getEndPointX()&&H_h==this._path.getEndPointY()||H_i.addPoint(H_g,H_h),H_L=H_N,H_M=H_O}}}}}},H_b.arc=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!0),-1!=this.mId){var H_h=H_M.getInstance().shapeDic[this.mId];if(H_h&&this.mHaveKey&&!H_h.needUpdate(this._curMat))return;H_b=H_a=0}var H_i,H_j=0,H_k=0,H_l=0,H_m=0,H_n=0,H_q=0,H_r=0;if(H_k=H_e-H_d,H_f)if(Math.abs(H_k)>=2*Math.PI)H_k=2*-Math.PI;else for(;0<H_k;)H_k-=2*Math.PI;else if(Math.abs(H_k)>=2*Math.PI)H_k=2*Math.PI;else for(;H_k<0;)H_k+=2*Math.PI;H_i=H_k/(H_r=H_c<101?Math.max(10,H_k*H_c/5):H_c<201?Math.max(10,H_k*H_c/20):Math.max(10,H_k*H_c/40))/2,H_l=Math.abs(4/3*(1-Math.cos(H_i))/Math.sin(H_i)),H_f&&(H_l=-H_l);var H_s=this._getPath(),H_t=NaN,H_u=NaN;for(H_q=0;H_q<=H_r;H_q++)H_j=H_d+H_k*(H_q/H_r),H_m=H_a+Math.cos(H_j)*H_c,H_n=H_b+Math.sin(H_j)*H_c,H_g&&(H_t=H_m,H_u=H_n,H_m=this._curMat.a*H_t+this._curMat.c*H_u,H_n=this._curMat.b*H_t+this._curMat.d*H_u),H_m==this._path.getEndPointX()&&H_n==this._path.getEndPointY()||H_s.addPoint(H_m,H_n);H_m=H_a+Math.cos(H_e)*H_c,H_n=H_b+Math.sin(H_e)*H_c,H_g&&(H_t=H_m,H_u=H_n,H_m=this._curMat.a*H_t+this._curMat.c*H_u,H_n=this._curMat.b*H_t+this._curMat.d*H_u),H_m==this._path.getEndPointX()&&H_n==this._path.getEndPointY()||H_s.addPoint(H_m,H_n)},H_b.quadraticCurveTo=function(H_a,H_b,H_c,H_d){var H_e=H_l.I,H_f=H_c,H_g=H_d;H_c=this._curMat.a*H_f+this._curMat.c*H_g,H_d=this._curMat.b*H_f+this._curMat.d*H_g,H_f=H_a,H_g=H_b,H_a=this._curMat.a*H_f+this._curMat.c*H_g,H_b=this._curMat.b*H_f+this._curMat.d*H_g;for(var H_h=H_e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),H_a,H_b,H_c,H_d],30,2),H_i=0,H_j=H_h.length/2;H_i<H_j;H_i++)this.lineTo(H_h[2*H_i],H_h[2*H_i+1],!1);this.lineTo(H_c,H_d,!1)},H_b.rect=function(H_a,H_b,H_c,H_d){this._other=this._other.make(),this._other.path||(this._other.path=new H_U),this._other.path.rect(H_a,H_b,H_c,H_d)},H_b.strokeRect=function(H_a,H_b,H_c,H_d,H_e){var H_f=.5*H_e;this.line(H_a-H_f,H_b,H_a+H_c+H_f,H_b,H_e,this._curMat),this.line(H_a+H_c,H_b,H_a+H_c,H_b+H_d,H_e,this._curMat),this.line(H_a,H_b,H_a,H_b+H_d,H_e,this._curMat),this.line(H_a-H_f,H_b+H_d,H_a+H_c+H_f,H_b+H_d,H_e,this._curMat)},H_b.clip=function(){},H_b.drawPoly=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){void 0===H_g&&(H_g=!1),this._renderKey=0,this._shader2D.glTexture=null;var H_h=this._getPath();if(-1==this.mId)H_h.polygon(H_a,H_b,H_c,H_d,H_e||1,H_f);else if(this.mHaveKey){var H_i=H_M.getInstance().shapeDic[this.mId];H_i.setMatrix(this._curMat),H_i.rebuild(H_h.tempArray),H_h.setGeomtry(H_i)}else{var H_j=H_h.polygon(H_a,H_b,H_c,H_d,H_e||1,H_f);H_M.getInstance().addShape(this.mId,H_j),H_j.setMatrix(this._curMat)}H_h.update();var H_k,H_l=[this.mX,this.mY];if((H_k=H_fa.createShape(this,H_h.ib,H_h.vb,H_h.count,H_h.offset,H_Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H_k.shaderValue.u_pos=H_l,H_k.shaderValue.u_mmat2=H_ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H_k,0<H_e){if(this.mHaveLineKey){var H_m=H_M.getInstance().shapeLineDic[this.mId];H_m.rebuild(H_h.tempArray),H_h.setGeomtry(H_m)}else H_M.getInstance().addShape(this.mId,H_h.drawLine(H_a,H_b,H_c,H_e,H_f));H_h.update(),(H_k=H_fa.createShape(this,H_h.ib,H_h.vb,H_h.count,H_h.offset,H_Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H_k.shaderValue.u_mmat2=H_ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H_k}},H_b.drawParticle=function(H_a,H_b,H_c){H_c.x=H_a,H_c.y=H_b,this._submits[this._submits._length++]=H_c},H_b._getPath=function(){return this._path||(this._path=new H_U)},H_d(0,H_b,"globalCompositeOperation",function(){return H_S.NAMES[this._nBlendType]},function(H_a){var H_b=H_S.TOINT[H_a];null==H_b||this._nBlendType===H_b||(H_V.save(this,65536,this,!0),this._curSubmit=H_fa.RENDERBASE,this._renderKey=0,this._nBlendType=H_b)}),H_d(0,H_b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(H_a){this._shader2D.strokeStyle.equal(H_a)||(H_V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=H_T.create(H_a))}),H_d(0,H_b,"globalAlpha",function(){return this._shader2D.ALPHA},function(H_a){(H_a=Math.floor(1e3*H_a)/1e3)!=this._shader2D.ALPHA&&(H_V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=H_a)}),H_d(0,H_b,"asBitmap",null,function(H_a){if(H_a){if(this._targets||(this._targets=new H__),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),H_d(0,H_b,"fillStyle",function(){return this._shader2D.fillStyle},function(H_a){this._shader2D.fillStyle.equal(H_a)||(H_V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=H_T.create(H_a))}),H_d(0,H_b,"textAlign",function(){return this._other.textAlign},function(H_a){this._other.textAlign===H_a||(this._other=this._other.make(),H_V.save(this,32768,this._other,!1),this._other.textAlign=H_a)}),H_d(0,H_b,"lineWidth",function(){return this._other.lineWidth},function(H_a){this._other.lineWidth===H_a||(this._other=this._other.make(),H_V.save(this,256,this._other,!1),this._other.lineWidth=H_a)}),H_d(0,H_b,"textBaseline",function(){return this._other.textBaseline},function(H_a){this._other.textBaseline===H_a||(this._other=this._other.make(),H_V.save(this,16384,this._other,!1),this._other.textBaseline=H_a)}),H_d(0,H_b,"font",null,function(H_a){H_a!=this._other.font.toString()&&(this._other=this._other.make(),H_V.save(this,8,this._other,!1),this._other.font===H_qa.EMPTY?this._other.font=new H_qa(H_a):this._other.font.setFont(H_a))}),H_P.__init__=function(){H_c.DEFAULT=new H_c},H_P._tempPoint=new H_C,H_P._SUBMITVBSIZE=32e3,H_P._MAXSIZE=99999999,H_P._RECTVBSIZE=16,H_P.MAXCLIPRECT=new H_D(0,0,99999999,99999999),H_P._COUNT=0,H_P._tmpMatrix=new H_B,H_P.SEGNUM=32,H_P._contextcount=0,H_g(H_P,["_fontTemp",function(){return this._fontTemp=new H_qa},"_drawStyleTemp",function(){return this._drawStyleTemp=new H_T(null)}]),H_P.__init$=function(){H_c=function(){function H_a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=H_qa.EMPTY}H_m(H_a,"");var H_b=H_a.prototype;return H_b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=H_qa.EMPTY},H_b.make=function(){return this===H_a.DEFAULT?new H_a:this},H_a.DEFAULT=null,H_a}()},H_P}(),H_Aa=function(H_a){function H_d(H_a,H_b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,H_d.__super.call(this),this.defines=new H_Ea,this.position=H_d._POSITION,this.mainID=H_a,this.subID=H_b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=H_a|H_b,this._inClassCache=H_d._cache[this._cacheID],0<H_a&&!this._inClassCache&&(this._inClassCache=H_d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}H_m(H_d,"laya.webgl.shader.d2.value.Value2D",H_O);var H_b=H_d.prototype;return H_b.setValue=function(H_a){},H_b.refresh=function(){var H_a=this.size;return H_a[0]=H_ua.width,H_a[1]=H_ua.height,this.alpha=this.ALPHA*H_ua.worldAlpha,this.mmat=H_ua.worldMatrix4,this},H_b._ShaderWithCompile=function(){return H_Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,H__a.create)},H_b._withWorldShaderDefines=function(){var H_a=H_ua.worldShaderDefines,H_b=H_Ya.sharders[this.mainID|this.defines._value|H_a.getValue()];if(!H_b){var H_c,H_d={};for(H_c in this.defines.toNameDic())H_d[H_c]="";for(H_c in H_a.toNameDic())H_d[H_c]="";H_b=H_Ya.withCompile2D(0,this.mainID,H_d,this.mainID|this.defines._value|H_a.getValue(),H__a.create)}var H_e=H_ua.worldFilters;if(!H_e)return H_b;for(var H_f,H_g=H_e.length,H_h=0;H_h<H_g;H_h++)(H_f=H_e[H_h])&&H_f.action.setValue(this);return H_b},H_b.upload=function(){var H_a=H_ua;this.alpha=this.ALPHA*H_a.worldAlpha,H_ua.worldMatrix4!==H_ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),H_wa.shaderHighPrecision&&this.defines.add(1024);var H_b,H_c=H_a.worldShaderDefines?this._withWorldShaderDefines():H_Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=H_a.width,this.size[1]=H_a.height,this.mmat=H_a.worldMatrix4,H_La.activeShader!==H_c?H_c._shaderValueWidth!==H_a.width||H_c._shaderValueHeight!==H_a.height?(H_c._shaderValueWidth=H_a.width,H_c._shaderValueHeight=H_a.height):H_b=H_c._params2dQuick2||H_c._make2dQuick2():H_c._shaderValueWidth!==H_a.width||H_c._shaderValueHeight!==H_a.height?(H_c._shaderValueWidth=H_a.width,H_c._shaderValueHeight=H_a.height):H_b=H_c._params2dQuick1||H_c._make2dQuick1(),H_c.upload(this,H_b)},H_b.setFilters=function(H_a){if(this.filters=H_a)for(var H_b,H_c=H_a.length,H_d=0;H_d<H_c;H_d++)(H_b=H_a[H_d])&&(this.defines.add(H_b.type),H_b.action.setValue(this))},H_b.clear=function(){this.defines.setValue(this.subID)},H_b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},H_d._initone=function(H_a,H_b){H_d._typeClass[H_a]=H_b,H_d._cache[H_a]=[],H_d._cache[H_a]._length=0},H_d.__init__=function(){H_d._POSITION=[2,5126,!1,4*H_ra.BYTES_PE,0],H_d._TEXCOORD=[2,5126,!1,4*H_ra.BYTES_PE,2*H_ra.BYTES_PE],H_d._initone(2,H_Pa),H_d._initone(4,H_Sa),H_d._initone(256,H_Qa),H_d._initone(512,H_Oa),H_d._initone(1,H_Ra),H_d._initone(65,H_$a),H_d._initone(9,H_Ra)},H_d.create=function(H_a,H_b){var H_c=H_d._cache[H_a|H_b];return H_c._length?H_c[--H_c._length]:new H_d._typeClass[H_a|H_b](H_b)},H_d._POSITION=null,H_d._TEXCOORD=null,H_d._cache=[],H_d._typeClass=[],H_d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H_d}(),H_Ba=function(H_a){function H_s(H_a,H_b){H_s.__super.call(this,H_a,H_b)}H_m(H_s,"laya.webgl.utils.RenderSprite3D",H_u);var H_b=H_s.prototype;return H_b.onCreate=function(H_a){switch(H_a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},H_b._mask=function(H_a,H_b,H_c,H_d){var H_e,H_f,H_g=this._next,H_h=H_a.mask;if(H_h){H_b.ctx.save();var H_i=H_b.ctx.globalCompositeOperation,H_j=new H_D;if(H_j.copyFrom(H_h.getBounds()),H_j.width=Math.round(H_j.width),H_j.height=Math.round(H_j.height),H_j.x=Math.round(H_j.x),H_j.y=Math.round(H_j.y),0<H_j.width&&0<H_j.height){var H_k=H_a._style._tf,H_l=H_ha.create();H_l.addValue("bounds",H_j),H_e=H_ga.create([H_l,H_b],laya.webgl.utils.RenderSprite3D.tmpTarget),H_b.addRenderObject(H_e),H_h.render(H_b,-H_j.x,-H_j.y),H_e=H_ga.create([H_l],laya.webgl.utils.RenderSprite3D.endTmpTarget),H_b.addRenderObject(H_e),H_b.ctx.save(),H_b.clipRect(H_c-H_k.translateX+H_j.x,H_d-H_k.translateY+H_j.y,H_j.width,H_j.height),H_g._fun.call(H_g,H_a,H_b,H_c,H_d),H_b.ctx.restore(),H_f=H_ka.create(6),H_i=H_b.ctx.globalCompositeOperation,H_f.blendMode="mask",H_b.addRenderObject(H_f),H_B.TEMP.identity();var H_m=H_Aa.create(1,0),H_n=H_K.INV_UV,H_q=H_j.width,H_r=H_j.height;(H_j.width<32||H_j.height<32)&&((H_n=H_s.tempUV)[0]=0,H_n[1]=0,H_n[2]=32<=H_j.width?1:H_j.width/32,H_n[3]=0,H_n[4]=32<=H_j.width?1:H_j.width/32,H_n[5]=32<=H_j.height?1:H_j.height/32,H_n[6]=0,H_n[7]=32<=H_j.height?1:H_j.height/32,H_j.width=32<=H_j.width?H_j.width:32,H_j.height=32<=H_j.height?H_j.height:32,H_n[1]*=-1,H_n[3]*=-1,H_n[5]*=-1,H_n[7]*=-1,H_n[1]+=1,H_n[3]+=1,H_n[5]+=1,H_n[7]+=1),H_b.ctx.drawTarget(H_l,H_c+H_j.x-H_k.translateX,H_d+H_j.y-H_k.translateY,H_q,H_r,H_B.TEMP,"tmpTarget",H_m,H_n,6),H_e=H_ga.create([H_l],laya.webgl.utils.RenderSprite3D.recycleTarget),H_b.addRenderObject(H_e),(H_f=H_ka.create(6)).blendMode=H_i,H_b.addRenderObject(H_f)}H_b.ctx.restore()}else H_g._fun.call(H_g,H_a,H_b,H_c,H_d)},H_b._blend=function(H_a,H_b,H_c,H_d){var H_e=H_a._style,H_f=this._next;H_e.blendMode?(H_b.ctx.save(),H_b.ctx.globalCompositeOperation=H_e.blendMode,H_f._fun.call(H_f,H_a,H_b,H_c,H_d),H_b.ctx.restore()):H_f._fun.call(H_f,H_a,H_b,H_c,H_d)},H_b._transform=function(H_a,H_b,H_c,H_d){var H_e=H_a.transform,H_f=this._next;if(H_e&&H_f!=H_u.NORENDER){var H_g=H_b.ctx;H_a._style;H_e.tx=H_c,H_e.ty=H_d;var H_h=H_g._getTransformMatrix(),H_i=H_h.clone();H_B.mul(H_e,H_h,H_h),H_h._checkTransform(),H_e.tx=H_e.ty=0,H_f._fun.call(H_f,H_a,H_b,0,0),H_i.copyTo(H_h),H_i.destroy()}else H_f._fun.call(H_f,H_a,H_b,H_c,H_d)},H_s.tmpTarget=function(H_a,H_b){var H_c=H_a.getValue("bounds"),H_d=H_Ma.create(H_c.width,H_c.height);H_d.start(),H_d.clear(0,0,0,0),H_a.addValue("tmpTarget",H_d)},H_s.endTmpTarget=function(H_a){H_a.getValue("tmpTarget").end()},H_s.recycleTarget=function(H_a){H_a.getValue("tmpTarget").recycle(),H_a.recycle()},H_g(H_s,["tempUV",function(){return this.tempUV=new Array(8)}]),H_s}(),H_Ca=function(H_a){function H_b(){this.data=null,H_b.__super.call(this)}H_m(H_b,"laya.filters.webgl.ColorFilterActionGL",H_N);var H_c=H_b.prototype;return H_y.imps(H_c,{"laya.filters.IFilterActionGL":!0}),H_c.setValue=function(H_a){H_a.colorMat=this.data._mat,H_a.colorAlpha=this.data._alpha},H_c.apply3d=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_a.getValue("bounds"),H_g=H_Aa.create(1,0);H_g.setFilters([this.data]);var H_h=H_B.TEMP;H_h.identity(),H_c.ctx.drawTarget(H_a,0,0,H_f.width,H_f.height,H_h,"src",H_g)},H_b}(),H_Da=function(H_a){function H_f(H_a,H_b,H_c,H_d,H_e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,H_f.__super.call(this,H_a,H_b,H_e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new H_Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=H_c,this._atlasCanvas.height=H_d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}H_m(H_f,"laya.webgl.atlas.Atlaser",H_P);var H_b=H_f.prototype;return H_b.computeUVinAtlasTexture=function(H_a,H_b,H_c,H_d){var H_e=H_Q.atlasTextureWidth,H_f=H_Q.atlasTextureHeight,H_g=H_c/H_e,H_h=H_d/H_f,H_i=(H_c+H_a.bitmap.width)/H_e,H_j=(H_d+H_a.bitmap.height)/H_f,H_k=H_a.bitmap.width/H_e,H_l=H_a.bitmap.height/H_f;H_a.uv=[H_g+H_b[0]*H_k,H_h+H_b[1]*H_l,H_i-(1-H_b[2])*H_k,H_h+H_b[3]*H_l,H_i-(1-H_b[4])*H_k,H_j-(1-H_b[5])*H_l,H_g+H_b[6]*H_k,H_j-(1-H_b[7])*H_l]},H_b.findBitmapIsExist=function(H_a){if(H_a instanceof laya.webgl.resource.WebGLImage){var H_b=H_a,H_c=H_b.url,H_d=this._InAtlasWebGLImagesKey[H_c||H_b.id];if(H_d)return H_d.offsetInfoID}return-1},H_b.addToAtlasTexture=function(H_a,H_b,H_c){if(H_a instanceof laya.webgl.resource.WebGLImage){var H_d=H_a,H_e=H_d.url;this._InAtlasWebGLImagesKey[H_e||H_d.id]={bitmap:H_a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([H_b,H_c])}this._atlasCanvas.texSubImage2D(H_b,H_c,H_a.atlasSource),H_a.clearAtlasSource()},H_b.addToAtlas=function(H_a,H_b,H_c){H_a._atlasID=this._inAtlasTextureKey.length;var H_d=H_a.uv.slice(),H_e=H_a.bitmap;this._inAtlasTextureKey.push(H_a),this._inAtlasTextureOriUVValue.push(H_d),this._inAtlasTextureBitmapValue.push(H_e),this.computeUVinAtlasTexture(H_a,H_d,H_b,H_c),H_a.bitmap=this._atlasCanvas},H_b.clear=function(){for(var H_a=0,H_b=this._inAtlasTextureKey.length;H_a<H_b;H_a++)this._inAtlasTextureKey[H_a].bitmap=this._inAtlasTextureBitmapValue[H_a],this._inAtlasTextureKey[H_a].uv=this._inAtlasTextureOriUVValue[H_a],this._inAtlasTextureKey[H_a]._atlasID=-1,this._inAtlasTextureKey[H_a].bitmap.lock=!1,this._inAtlasTextureKey[H_a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},H_b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},H_d(0,H_b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),H_d(0,H_b,"texture",function(){return this._atlasCanvas}),H_d(0,H_b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),H_f}(),H_Ea=function(H_a){function H_c(){H_c.__super.call(this,H_c.__name2int,H_c.__int2name,H_c.__int2nameMap)}return H_m(H_c,"laya.webgl.shader.d2.ShaderDefines2D",H_p),H_c.__init__=function(){H_c.reg("TEXTURE2D",1),H_c.reg("COLOR2D",2),H_c.reg("PRIMITIVE",4),H_c.reg("GLOW_FILTER",8),H_c.reg("BLUR_FILTER",16),H_c.reg("COLOR_FILTER",32),H_c.reg("COLOR_ADD",64),H_c.reg("WORLDMAT",128),H_c.reg("FILLTEXTURE",256),H_c.reg("FSHIGHPRECISION",1024),H_c.reg("TXTALPHA",2048),H_c.reg("TXTCOMPRESS",4096)},H_c.reg=function(H_a,H_b){H_p._reg(H_a,H_b,H_c.__name2int,H_c.__int2name)},H_c.toText=function(H_a,H_b,H_c){return H_p._toText(H_a,H_b,H_c)},H_c.toInt=function(H_a){return H_p._toInt(H_a,H_c.__name2int)},H_c.TEXTURE2D=1,H_c.COLOR2D=2,H_c.PRIMITIVE=4,H_c.FILTERGLOW=8,H_c.FILTERBLUR=16,H_c.FILTERCOLOR=32,H_c.COLORADD=64,H_c.WORLDMAT=128,H_c.FILLTEXTURE=256,H_c.SKINMESH=512,H_c.SHADERDEFINE_FSHIGHPRECISION=1024,H_c.TXTALPHA=2048,H_c.TXTCOMPRESS=4096,H_c.__name2int={},H_c.__int2name=[],H_c.__int2nameMap=[],H_c}(),H_Fa=(function(H_a){function H_h(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_h.__super.call(this,H_a,H_b,H_c,H_d,40,H_e,H_f,H_g)}H_m(H_h,"laya.webgl.shapes.Ellipse",H_ca)}(),function(H_a){function H_f(H_a,H_b,H_c,H_d,H_e){this._points=[],this.rebuild(H_c),H_f.__super.call(this,H_a,H_b,0,0,0,H_e,H_d,H_e,0)}H_m(H_f,"laya.webgl.shapes.Line",H_ca);var H_b=H_f.prototype;return H_b.rebuild=function(H_a){var H_b=H_a.length;H_b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(H_b/2-1)),this.mFloat32Array=new Float32Array(5*H_b)),this._points.length=0;for(var H_c=NaN,H_d=NaN,H_e=-1,H_f=-1,H_g=H_a.length/2,H_h=0;H_h<H_g;H_h++)H_c=H_a[2*H_h],H_d=H_a[2*H_h+1],(.01<Math.abs(H_e-H_c)||.01<Math.abs(H_f-H_d))&&this._points.push(H_c,H_d),H_e=H_c,H_f=H_d},H_b.getData=function(H_a,H_b,H_c){var H_d=[],H_e=[];0<this.borderWidth&&this.createLine2(this._points,H_d,this.borderWidth,H_c,H_e,this._points.length/2),this.mUint16Array.set(H_d,0),this.mFloat32Array.set(H_e,0),H_a.append(this.mUint16Array),H_b.append(this.mFloat32Array)},H_f}()),H_Ga=function(H_a){function H_l(H_a,H_b,H_c,H_d,H_e){this._points=[];for(var H_f=NaN,H_g=NaN,H_h=-1,H_i=-1,H_j=H_c.length/2-1,H_k=0;H_k<H_j;H_k++)H_f=H_c[2*H_k],H_g=H_c[2*H_k+1],(.01<Math.abs(H_h-H_f)||.01<Math.abs(H_i-H_g))&&this._points.push(H_f,H_g),H_h=H_f,H_i=H_g;H_f=H_c[2*H_j],H_g=H_c[2*H_j+1],H_h=this._points[0],H_i=this._points[1],(.01<Math.abs(H_h-H_f)||.01<Math.abs(H_i-H_g))&&this._points.push(H_f,H_g),H_l.__super.call(this,H_a,H_b,0,0,this._points.length/2,0,H_d,H_e)}H_m(H_l,"laya.webgl.shapes.LoopLine",H_ca);var H_b=H_l.prototype;return H_b.getData=function(H_a,H_b,H_c){if(0<this.borderWidth){for(var H_d=this.color,H_e=(H_d>>16&255)/255,H_f=(H_d>>8&255)/255,H_g=(255&H_d)/255,H_h=[],H_i=0,H_j=0,H_k=[],H_l=Math.floor(this._points.length/2),H_m=0;H_m<H_l;H_m++)H_i=this._points[2*H_m],H_j=this._points[2*H_m+1],H_h.push(this.x+H_i,this.y+H_j,H_e,H_f,H_g);this.createLoopLine(H_h,H_k,this.borderWidth,H_c+H_h.length/5),H_a.append(new Uint16Array(H_k)),H_b.append(new Float32Array(H_h))}},H_b.createLoopLine=function(H_a,H_b,H_c,H_d,H_e,H_f){H_a.length;var H_g=H_a.concat(),H_h=H_e||H_a,H_i=this.borderColor,H_j=(H_i>>16&255)/255,H_k=(H_i>>8&255)/255,H_l=(255&H_i)/255,H_m=[H_g[0],H_g[1]],H_n=[H_g[H_g.length-5],H_g[H_g.length-4]],H_q=H_n[0]+.5*(H_m[0]-H_n[0]),H_r=H_n[1]+.5*(H_m[1]-H_n[1]);H_g.unshift(H_q,H_r,0,0,0),H_g.push(H_q,H_r,0,0,0);var H_s,H_t,H_u,H_v,H_w,H_x,H_y,H_z,H_A,H_B,H_C,H_D,H_E,H_F,H_G,H_H,H_I,H_J,H_K,H_L,H_M=H_g.length/5,H_N=H_d,H_O=H_c/2;H_u=H_g[0],H_v=H_g[1],H_B=H_u-(H_w=H_g[5]),H_A=(H_A=-(H_v-(H_x=H_g[6])))/(H_L=Math.sqrt(H_A*H_A+H_B*H_B))*H_O,H_B=H_B/H_L*H_O,H_h.push(H_u-H_A,H_v-H_B,H_j,H_k,H_l,H_u+H_A,H_v+H_B,H_j,H_k,H_l);for(var H_P=1;H_P<H_M-1;H_P++)H_u=H_g[5*(H_P-1)],H_v=H_g[5*(H_P-1)+1],H_w=H_g[5*H_P],H_x=H_g[5*H_P+1],H_y=H_g[5*(H_P+1)],H_z=H_g[5*(H_P+1)+1],H_B=H_u-H_w,H_D=H_w-H_y,H_G=(-(H_A=(H_A=-(H_v-H_x))/(H_L=Math.sqrt(H_A*H_A+H_B*H_B))*H_O)+H_u)*(-(H_B=H_B/H_L*H_O)+H_x)-(-H_A+H_w)*(-H_B+H_v),H_J=(-(H_C=(H_C=-(H_x-H_z))/(H_L=Math.sqrt(H_C*H_C+H_D*H_D))*H_O)+H_y)*(-(H_D=H_D/H_L*H_O)+H_x)-(-H_C+H_w)*(-H_D+H_z),H_K=(H_E=-H_B+H_v-(-H_B+H_x))*(H_I=-H_C+H_w-(-H_C+H_y))-(H_H=-H_D+H_z-(-H_D+H_x))*(H_F=-H_A+H_w-(-H_A+H_u)),Math.abs(H_K)<.1?(H_K+=10.1,H_h.push(H_w-H_A,H_x-H_B,H_j,H_k,H_l,H_w+H_A,H_x+H_B,H_j,H_k,H_l)):(((H_s=(H_F*H_J-H_I*H_G)/H_K)-H_w)*(H_s-H_w)+((H_t=(H_H*H_G-H_E*H_J)/H_K)-H_x)+(H_t-H_x),H_h.push(H_s,H_t,H_j,H_k,H_l,H_w-(H_s-H_w),H_x-(H_t-H_x),H_j,H_k,H_l));H_f&&(H_b=H_f);var H_Q=this.edges+1;for(H_P=1;H_P<H_Q;H_P++)H_b.push(H_N+2*(H_P-1),H_N+2*(H_P-1)+1,H_N+2*H_P+1,H_N+2*H_P+1,H_N+2*H_P,H_N+2*(H_P-1));return H_b.push(H_N+2*(H_P-1),H_N+2*(H_P-1)+1,H_N+1,H_N+1,H_N,H_N+2*(H_P-1)),H_h},H_l}(),H_Ha=function(H_a){function H_g(H_a,H_b,H_c,H_d,H_e,H_f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=H_B.create(),this._points=H_c.slice(0,H_c.length),H_g.__super.call(this,H_a,H_b,0,0,this._points.length/2,H_d,H_e,H_f)}H_m(H_g,"laya.webgl.shapes.Polygon",H_ca);var H_b=H_g.prototype;return H_b.rebuild=function(H_a){this._repaint||(this._points.length=0,this._points=this._points.concat(H_a))},H_b.setMatrix=function(H_a){H_a.copyTo(this._mat)},H_b.needUpdate=function(H_a){return this._repaint=this._mat.a==H_a.a&&this._mat.b==H_a.b&&this._mat.c==H_a.c&&this._mat.d==H_a.d&&this._mat.tx==H_a.tx&&this._mat.ty==H_a.ty,!this._repaint},H_b.getData=function(H_a,H_b,H_c){var H_d,H_e=0,H_f=this._points,H_g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=H_c){for(this._start=H_c,H_d=[],H_g=this.earcutTriangles.length,H_e=0;H_e<H_g;H_e++)H_d.push(this.earcutTriangles[H_e]+H_c);this.mUint16Array=new Uint16Array(H_d)}}else{this._start=H_c,H_d=[];var H_h=[],H_i=[],H_j=this.color,H_k=(H_j>>16&255)/255,H_l=(H_j>>8&255)/255,H_m=(255&H_j)/255;for(H_g=Math.floor(H_f.length/2),H_e=0;H_e<H_g;H_e++)H_h.push(this.x+H_f[2*H_e],this.y+H_f[2*H_e+1],H_k,H_l,H_m),H_i.push(this.x+H_f[2*H_e],this.y+H_f[2*H_e+1]);for(this.earcutTriangles=H_da.earcut(H_i,null,2),H_g=this.earcutTriangles.length,H_e=0;H_e<H_g;H_e++)H_d.push(this.earcutTriangles[H_e]+H_c);this.mUint16Array=new Uint16Array(H_d),this.mFloat32Array=new Float32Array(H_h)}H_a.append(this.mUint16Array),H_b.append(this.mFloat32Array)},H_g}(),H_Ia=function(H_a){function H_f(){this._matrix=new H_B,this._matrix4=H_ra.defaultMatrix4.concat(),H_f.__super.call(this,1e4),this.shaderValue=new H_Aa(0,0)}H_m(H_f,"laya.webgl.submit.SubmitCanvas",H_fa);var H_b=H_f.prototype;return H_b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var H_a=H_ua.worldAlpha,H_b=H_ua.worldMatrix4,H_c=H_ua.worldMatrix,H_d=H_ua.worldFilters,H_e=H_ua.worldShaderDefines,H_f=this.shaderValue,H_g=this._matrix,H_h=this._matrix4,H_i=H_B.TEMP;return H_B.mul(H_g,H_c,H_i),H_h[0]=H_i.a,H_h[1]=H_i.b,H_h[4]=H_i.c,H_h[5]=H_i.d,H_h[12]=H_i.tx,H_h[13]=H_i.ty,H_ua.worldMatrix=H_i.clone(),H_ua.worldMatrix4=H_h,H_ua.worldAlpha=H_ua.worldAlpha*H_f.alpha,H_f.filters&&H_f.filters.length&&(H_ua.worldFilters=H_f.filters,H_ua.worldShaderDefines=H_f.defines),this._ctx_src.flush(),H_ua.worldAlpha=H_a,H_ua.worldMatrix4=H_b,H_ua.worldMatrix.destroy(),H_ua.worldMatrix=H_c,H_ua.worldFilters=H_d,H_ua.worldShaderDefines=H_e,1},H_b.releaseRender=function(){var H_a=H_f._cache;this._ctx_src=null,H_a[H_a._length++]=this},H_b.getRenderType=function(){return 10003},H_f.create=function(H_a,H_b,H_c){var H_d=H_f._cache._length?H_f._cache[--H_f._cache._length]:new H_f;H_d._ctx_src=H_a;var H_e=H_d.shaderValue;return H_e.alpha=H_b,H_e.defines.setValue(0),H_c&&H_c.length&&H_e.setFilters(H_c),H_d},H_f._cache=((H_f._cache=[])._length=0,H_f._cache),H_f}(),H_Ja=function(H_a){function H_j(H_a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===H_a&&(H_a=1e4),H_j.__super.call(this,H_a)}H_m(H_j,"laya.webgl.submit.SubmitTexture",H_fa);var H_b=H_j.prototype;return H_b.releaseRender=function(){var H_a=H_j._cache;(H_a[H_a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},H_b.addTexture=function(H_a,H_b){this._texsID[this._texs.length]=H_a._uvID,this._texs.push(H_a),this._vbPos.push(H_b)},H_b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var H_a=this.shaderValue.textureHost.bitmap;if(null!==H_a)for(var H_b=this._vb.getFloat32Array(),H_c=0,H_d=this._texs.length;H_c<H_d;H_c++){var H_e=this._texs[H_c];H_e.active();var H_f=H_e.uv;if(this._texsID[H_c]!==H_e._uvID){this._texsID[H_c]=H_e._uvID;var H_g=this._vbPos[H_c];H_b[H_g+2]=H_f[0],H_b[H_g+3]=H_f[1],H_b[H_g+6]=H_f[2],H_b[H_g+7]=H_f[3],H_b[H_g+10]=H_f[4],H_b[H_g+11]=H_f[5],H_b[H_g+14]=H_f[6],H_b[H_g+15]=H_f[7],this._vb.setNeedUpload()}H_e.bitmap!==H_a&&(this._isSameTexture=!1)}}},H_b.renderSubmit=function(){if(0===this._numEle)return H_j._shaderSet=!1,1;var H_a=this.shaderValue.textureHost;if(H_a){var H_b=H_a.source;if(!H_a.bitmap||!H_b)return H_j._shaderSet=!1,1;this.shaderValue.texture=H_b,H_a.alphaTexture&&H_a.alphaTexture.source&&(this.shaderValue.texture1=H_a.alphaTexture.source)}this._vb.bind_upload(this._ib);var H_c=H_wa.mainContext;if(H_S.activeBlendFunction!==this._blendFn&&(H_c.enable(3042),this._blendFn(H_c),H_S.activeBlendFunction=this._blendFn),H_G.drawCall++,H_G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&H_La.activeShader&&H_j._shaderSet?(H_La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&H_La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),H_j._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var H_d=H_a.bitmap,H_e=0,H_f=H_La.activeShader,H_g=0,H_h=this._texs.length;H_g<H_h;H_g++){var H_i=this._texs[H_g];H_i.bitmap===H_d&&H_g+1!==H_h||(H_f.uploadTexture2D(H_i.source),H_c.drawElements(4,6*(H_g-H_e+1),5123,this._startIdx+6*H_e*H_ra.BYTES_PIDX),H_d=H_i.bitmap,H_e=H_g)}else H_c.drawElements(4,this._numEle,5123,this._startIdx);return 1},H_j.create=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_j._cache._length?H_j._cache[--H_j._cache._length]:new H_j;null==H_c&&((H_c=H_f._selfVb||(H_f._selfVb=H_pa.create(-1))).clear(),H_d=0),H_f._ib=H_b,H_f._vb=H_c,H_f._startIdx=H_d*H_ra.BYTES_PIDX,H_f._numEle=0;var H_g=H_a._nBlendType;H_f._blendFn=H_a._targets?H_S.targetFns[H_g]:H_S.fns[H_g],H_f.shaderValue=H_e,H_f.shaderValue.setValue(H_a._shader2D);var H_h=H_a._shader2D.filters;return H_h&&H_f.shaderValue.setFilters(H_h),H_f},H_j._cache=((H_j._cache=[])._length=0,H_j._cache),H_j._shaderSet=!0,H_j}(),H_Ka=function(H_a){function H_t(){H_t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}H_m(H_t,"laya.webgl.utils.MeshTexture",H_ta);var H_b=H_t.prototype;return H_b.addData=function(H_a,H_b,H_c,H_d,H_e,H_f){for(var H_g=H_a.length/2,H_h=this._vb.needSize(H_g*H_t.const_stride)>>2,H_i=this._vb.getFloat32Array(),H_j=0,H_k=0;H_k<H_g;H_k++){var H_l=H_a[H_j],H_m=H_a[H_j+1],H_n=H_l*H_d.a+H_m*H_d.c+H_d.tx,H_q=H_l*H_d.b+H_m*H_d.d+H_d.ty;H_i[H_h++]=H_n,H_i[H_h++]=H_q,H_i[H_h++]=H_b[H_j],H_i[H_h++]=H_b[H_j+1],H_j+=2}this._vb.setNeedUpload();var H_r=this.vertNum;if(0<H_r){(H_g=H_c.length)>H_t.tmpIdx.length&&(H_t.tmpIdx=new Uint16Array(H_g));for(var H_s=0;H_s<H_g;H_s++)H_t.tmpIdx[H_s]=H_c[H_s]+H_r;this._ib.appendU16Array(H_t.tmpIdx,H_c.length)}else this._ib.append(H_c);this._ib.setNeedUpload(),this.vertNum+=H_g,this.indexNum+=H_c.length},H_b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},H_b.destroy=function(){this._ib.destroy(),this._vb.destroy()},H_t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new H_t},H_t.const_stride=16,H_t._POOL=[],H_g(H_t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),H_t}(),H_La=function(H_a){function H_b(){H_b.__super.call(this),this.lock=!0}return H_m(H_b,"laya.webgl.shader.BaseShader",H_v),H_b.activeShader=null,H_b.bindShader=null,H_b}(),H_Ma=function(H_b){function H_k(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===H_c&&(H_c=6408),void 0===H_d&&(H_d=5121),void 0===H_e&&(H_e=34041),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=-1),void 0===H_i&&(H_i=-1),this._type=1,this._w=H_a,this._h=H_b,this._surfaceFormat=H_c,this._surfaceType=H_d,this._depthStencilFormat=H_e,H_t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=H_f,this._repeat=H_g,this._minFifter=H_h,this._magFifter=H_i,this._createWebGLRenderTarget(),this.bitmap.lock=!0,H_k.__super.call(this,this.bitmap,H_K.INV_UV)}H_m(H_k,"laya.webgl.resource.RenderTarget2D",H_b);var H_a=H_k.prototype;return H_y.imps(H_a,{"laya.resource.IDispose":!0}),H_a.getType=function(){return this._type},H_a.getTexture=function(){return this},H_a.size=function(H_a,H_b){this._w==H_a&&this._h==H_b||(this._w=H_a,this._h=H_b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},H_a.release=function(){this.destroy()},H_a.recycle=function(){H_k.POOL.push(this)},H_a.start=function(){var H_a=H_wa.mainContext;return this._preRenderTarget=H_ua.curRenderTarget,H_ua.curRenderTarget=this,H_a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(H_a.viewport(0,0,this._w,this._h),this._svWidth=H_ua.width,this._svHeight=H_ua.height,H_ua.width=this._w,H_ua.height=this._h,H_La.activeShader=null),this},H_a.clear=function(H_a,H_b,H_c,H_d){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=1);var H_e=H_wa.mainContext;H_e.clearColor(H_a,H_b,H_c,H_d);var H_f=16384;switch(this._depthStencilFormat){case 33189:H_f|=256;break;case 36168:H_f|=1024;break;case 34041:H_f|=256,H_f|=1024}H_e.clear(H_f)},H_a.end=function(){var H_a=H_wa.mainContext;H_a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,H_ua.curRenderTarget=this._preRenderTarget,1==this._type?(H_a.viewport(0,0,this._svWidth,this._svHeight),H_ua.width=this._svWidth,H_ua.height=this._svHeight,H_La.activeShader=null):H_a.viewport(0,0,H_y.stage.width,H_y.stage.height)},H_a.getData=function(H_a,H_b,H_c,H_d){var H_e=H_wa.mainContext;if(H_e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===H_e.checkFramebufferStatus(36160)))return H_e.bindFramebuffer(36160,null),null;var H_f=new Uint8Array(this._w*this._h*4);return H_e.readPixels(H_a,H_b,H_c,H_d,this._surfaceFormat,this._surfaceType,H_f),H_e.bindFramebuffer(36160,null),H_f},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,H_b.prototype.destroy.call(this))},H_a.dispose=function(){},H_a._createWebGLRenderTarget=function(){this.bitmap=new H_Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(H_a){this.event("recovered")})},H_d(0,H_a,"surfaceFormat",function(){return this._surfaceFormat}),H_d(0,H_a,"magFifter",function(){return this._magFifter}),H_d(0,H_a,"surfaceType",function(){return this._surfaceType}),H_d(0,H_a,"mipMap",function(){return this._mipMap}),H_d(0,H_a,"depthStencilFormat",function(){return this._depthStencilFormat}),H_d(0,H_a,"minFifter",function(){return this._minFifter}),H_d(0,H_a,"source",function(){return this._alreadyResolved?H_y.superGet(H_K,this,"source"):null}),H_k.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){void 0===H_c&&(H_c=6408),void 0===H_d&&(H_d=5121),void 0===H_e&&(H_e=34041),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=-1),void 0===H_i&&(H_i=-1);var H_j=H_k.POOL.pop();return H_j||(H_j=new H_k(H_a,H_b)),H_j.bitmap&&H_j._w==H_a&&H_j._h==H_b&&H_j._surfaceFormat==H_c&&H_j._surfaceType==H_d&&H_j._depthStencilFormat==H_e&&H_j._mipMap==H_f&&H_j._repeat==H_g&&H_j._minFifter==H_h&&H_j._magFifter==H_i||(H_j._w=H_a,H_j._h=H_b,H_j._surfaceFormat=H_c,H_j._surfaceType=H_d,H_j._depthStencilFormat=H_e,H_t.isConchWebGL&&34041===H_j._depthStencilFormat&&(H_j._depthStencilFormat=33189),H_j._mipMap=H_f,H_j._repeat=H_g,H_j._minFifter=H_h,H_j._magFifter=H_i,H_j.release(),H_j._createWebGLRenderTarget()),H_j},H_k.TYPE2D=1,H_k.TYPE3D=2,H_k.POOL=[],H_k}(H_K),H_Na=function(H_a){function H_b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,H_b.__super.call(this),H_b._gl=H_wa.mainContext}H_m(H_b,"laya.webgl.utils.Buffer",H_v);var H_c=H_b.prototype;return H_c._bind=function(){this.activeResource(),H_b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(H_b._bindVertexBuffer=this._glBuffer),H_b._gl.bindBuffer(this._bufferType,H_b._bindActive[this._bufferType]=this._glBuffer),H_La.activeShader=null)},H_c.recreateResource=function(){this._glBuffer||(this._glBuffer=H_b._gl.createBuffer()),this.completeCreate()},H_c.disposeResource=function(){this._glBuffer&&(H_wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},H_d(0,H_c,"bufferUsage",function(){return this._bufferUsage}),H_b._gl=null,H_b._bindActive={},H_b._bindVertexBuffer=null,H_b._enableAtributes=[],H_b}(),H_Oa=function(H_a){function H_c(H_a){this.texcoord=null,this.offsetX=300,this.offsetY=0,H_c.__super.call(this,512,0);var H_b=8*H_ra.BYTES_PE;this.position=[2,5126,!1,H_b,0],this.texcoord=[2,5126,!1,H_b,2*H_ra.BYTES_PE],this.color=[4,5126,!1,H_b,4*H_ra.BYTES_PE]}return H_m(H_c,"laya.webgl.shader.d2.skinAnishader.SkinSV",H_Aa),H_c}(),H_Pa=function(H_a){function H_b(H_a){H_b.__super.call(this,2,0),this.color=[]}return H_m(H_b,"laya.webgl.shader.d2.value.Color2dSV",H_Aa),H_b.prototype.setValue=function(H_a){H_a.fillStyle&&(this.color=H_a.fillStyle._color._color),H_a.strokeStyle&&(this.color=H_a.strokeStyle._color._color)},H_b}(),H_Qa=function(H_a){function H_b(H_a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=H_Aa._TEXCOORD,H_b.__super.call(this,256,0)}H_m(H_b,"laya.webgl.shader.d2.value.FillTextureSV",H_Aa);var H_c=H_b.prototype;return H_c.setValue=function(H_a){this.ALPHA=H_a.ALPHA,H_a.filters&&this.setFilters(H_a.filters)},H_c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H_b}(),H_Ra=function(H_a){function H_b(H_a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=H_Aa._TEXCOORD,void 0===H_a&&(H_a=0),H_b.__super.call(this,1,H_a)}H_m(H_b,"laya.webgl.shader.d2.value.TextureSV",H_Aa);var H_c=H_b.prototype;return H_c.setValue=function(H_a){this.ALPHA=H_a.ALPHA,H_a.filters&&this.setFilters(H_a.filters)},H_c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H_b}(),H_Sa=function(H_a){function H_b(H_a){this.a_color=null,this.u_pos=[0,0],H_b.__super.call(this,4,0),this.position=[2,5126,!1,5*H_ra.BYTES_PE,0],this.a_color=[3,5126,!1,5*H_ra.BYTES_PE,2*H_ra.BYTES_PE]}return H_m(H_b,"laya.webgl.shader.d2.value.PrimitiveSV",H_Aa),H_b}(),H_Ta=function(H_a){function H_b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,H_b.__super.call(this)}H_m(H_b,"laya.webgl.atlas.AtlasWebGLCanvas",H_a);var H_c=H_b.prototype;return H_c.recreateResource=function(){var H_a=H_wa.mainContext,H_b=this._source=H_a.createTexture(),H_c=H_xa.curBindTexTarget,H_d=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,H_b),H_a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),H_a.texParameteri(3553,10241,9729),H_a.texParameteri(3553,10240,9729),H_a.texParameteri(3553,10242,33071),H_a.texParameteri(3553,10243,33071),H_c&&H_d&&H_xa.bindTexture(H_a,H_c,H_d),this.memorySize=this._w*this._h*4,this.completeCreate()},H_c.disposeResource=function(){this._source&&(H_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H_c.texSubImage2D=function(H_a,H_b,H_c){if(H_t.isFlash){this._flashCacheImage||(this._flashCacheImage=H_r.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var H_d=H_c.bitmapdata;this._flashCacheImage._image.copyPixels(H_d,0,0,H_d.width,H_d.height,H_a,H_b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var H_e=H_wa.mainContext,H_f=H_xa.curBindTexTarget,H_g=H_xa.curBindTexValue;H_xa.bindTexture(H_e,3553,this._source),H_e.pixelStorei(37441,!0),0<=H_a-1&&H_e.texSubImage2D(3553,0,H_a-1,H_b,6408,5121,H_c),H_a+1<=this._w&&H_e.texSubImage2D(3553,0,H_a+1,H_b,6408,5121,H_c),0<=H_b-1&&H_e.texSubImage2D(3553,0,H_a,H_b-1,6408,5121,H_c),H_b+1<=this._h&&H_e.texSubImage2D(3553,0,H_a,H_b+1,6408,5121,H_c),H_e.texSubImage2D(3553,0,H_a,H_b,6408,5121,H_c),H_e.pixelStorei(37441,!1),H_f&&H_g&&H_xa.bindTexture(H_e,H_f,H_g)}},H_c.texSubImage2DPixel=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_wa.mainContext,H_g=H_xa.curBindTexTarget,H_h=H_xa.curBindTexValue;H_xa.bindTexture(H_f,3553,this._source);var H_i=new Uint8Array(H_e.data);H_f.pixelStorei(37441,!0),H_f.texSubImage2D(3553,0,H_a,H_b,H_c,H_d,6408,5121,H_i),H_f.pixelStorei(37441,!1),H_g&&H_h&&H_xa.bindTexture(H_f,H_g,H_h)},H_d(0,H_c,"width",H_a.prototype._$get_width,function(H_a){this._w=H_a}),H_d(0,H_c,"height",H_a.prototype._$get_height,function(H_a){this._h=H_a}),H_b}(H_c),H_Ua=function(H_a){function H_e(){this.flipY=!0,this.alwaysChange=!1,H_e.__super.call(this)}H_m(H_e,"laya.webgl.resource.WebGLCanvas",H_c);var H_b=H_e.prototype;return H_b.getCanvas=function(){return this._canvas},H_b.clear=function(){this._ctx&&this._ctx.clear()},H_b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H_b._setContext=function(H_a){this._ctx=H_a},H_b.getContext=function(H_a,H_b){return this._ctx?this._ctx:this._ctx=H_e._createContext(this)},H_b.size=function(H_a,H_b){this._w==H_a&&this._h==H_b||(this._w=H_a,this._h=H_b,this._ctx&&this._ctx.size(H_a,H_b),this._canvas&&(this._canvas.height=H_b,this._canvas.width=H_a))},H_b.activeResource=function(H_a){void 0===H_a&&(H_a=!1),this._source||this.recreateResource()},H_b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},H_b.disposeResource=function(){this._source&&!this.iscpuSource&&(H_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H_b.createWebGlTexture=function(){var H_a=H_wa.mainContext;this._canvas;var H_b=this._source=H_a.createTexture();this.iscpuSource=!1;var H_c=H_xa.curBindTexTarget,H_d=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,H_b),H_a.pixelStorei(37440,this.flipY?1:0),H_e.premulAlpha&&H_a.pixelStorei(37441,!0),H_a.texImage2D(3553,0,6408,6408,5121,this._imgData),H_e.premulAlpha&&H_a.pixelStorei(37441,!1),H_a.texParameteri(3553,10240,9729),H_a.texParameteri(3553,10241,9729),H_a.texParameteri(3553,10242,33071),H_a.texParameteri(3553,10243,33071),H_a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,H_c&&H_d&&H_xa.bindTexture(H_a,H_c,H_d)},H_b.reloadCanvasData=function(){var H_a=H_wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var H_b=H_xa.curBindTexTarget,H_c=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,this._source),H_e.premulAlpha&&H_a.pixelStorei(37441,!0),H_a.texImage2D(3553,0,6408,6408,5121,this._imgData),H_e.premulAlpha&&H_a.pixelStorei(37441,!1),H_a.pixelStorei(37440,0),H_b&&H_c&&H_xa.bindTexture(H_a,H_b,H_c)},H_b.texSubImage2D=function(H_a,H_b,H_c){var H_d=H_wa.mainContext,H_e=H_xa.curBindTexTarget,H_f=H_xa.curBindTexValue;H_xa.bindTexture(H_d,3553,this._source),H_d.pixelStorei(37441,!0),H_d.texSubImage2D(3553,0,H_b,H_c,6408,5121,H_a._source),H_d.pixelStorei(37441,!1),H_e&&H_f&&H_xa.bindTexture(H_d,H_e,H_f)},H_b.toBase64=function(H_a,H_b,H_c){var H_d=null;this._canvas&&(H_d=this._canvas.toDataURL(H_a,H_b)),H_c.call(this,H_d)},H_d(0,H_b,"context",function(){return this._ctx}),H_d(0,H_b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),H_d(0,H_b,"asBitmap",null,function(H_a){this._ctx&&(this._ctx.asBitmap=H_a)}),H_e._createContext=null,H_e.premulAlpha=!1,H_e}(),H_Va=function(H_a){function H_f(H_a,H_b){this.CborderSize=12,H_f.__super.call(this),this.char=H_a,this.isSpace=" "===H_a,this.xs=H_b.scaleX,this.ys=H_b.scaleY,this.font=H_b.font.toString(),this.fontSize=H_b.font.size,this.fillColor=H_b.fillColor,this.borderColor=H_b.borderColor,this.lineWidth=H_b.lineWidth,this.underLine=H_b.underLine;var H_c,H_d=H_t.isConchApp;H_d?((H_c=ConchTextCanvas)._source=ConchTextCanvas,H_c._source.canvas=ConchTextCanvas):H_c=H_n.canvas.source,this.canvas=H_c,this._enableMerageInAtlas=!0,this._ctx=H_d?H_c:this.canvas.getContext("2d",void 0);var H_e=H_L.measureText(this.char,this.font);this.cw=H_e.width*this.xs,this.ch=(H_e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new H_K(this)}H_m(H_f,"laya.webgl.resource.WebGLCharImage",H_c);var H_b=H_f.prototype;return H_y.imps(H_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H_b.active=function(){this.texture.active()},H_b.recreateResource=function(){var H_a=H_t.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),H_a){var H_b=this.fontSize;1==this.xs&&1==this.ys||(H_b=parseInt(H_b*(this.xs>this.ys?this.xs:this.ys)+""));var H_c="normal 100 "+this.font;H_c=H_c.replace(H_f._fontSizeReg,H_b),this.borderColor&&(H_c+=" 1 "+this.borderColor),this._ctx.font=H_c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,H_J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var H_d=this._ctx.measureText(this.char);H_d||(H_d={width:16});var H_e=H_d.width+1;this._ctx.lineTo(H_e,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},H_b.onresize=function(H_a,H_b){this._w=H_a,this._h=H_b,this._allowMerageInAtlas=!0},H_b.clearAtlasSource=function(){},H_d(0,H_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H_d(0,H_b,"atlasSource",function(){return this.canvas}),H_d(0,H_b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H_a){this._enableMerageInAtlas=H_a}),H_f.createOneChar=function(H_a,H_b){return new H_f(H_a,H_b)},H_f._fontSizeReg=new RegExp("\\d+(?=px)","g"),H_f}(),H_Wa=function(H_a){function H_j(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){void 0===H_c&&(H_c=6408),void 0===H_d&&(H_d=5121),void 0===H_e&&(H_e=34041),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=-1),void 0===H_i&&(H_i=1),H_j.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=H_a,this._h=H_b,this._surfaceFormat=H_c,this._surfaceType=H_d,this._depthStencilFormat=H_e,this._mipMap=H_f,this._repeat=H_g,this._minFifter=H_h,this._magFifter=H_i}H_m(H_j,"laya.webgl.resource.WebGLRenderTarget",H_c);var H_b=H_j.prototype;return H_b.recreateResource=function(){var H_a=H_wa.mainContext;this._frameBuffer||(this._frameBuffer=H_a.createFramebuffer()),this._source||(this._source=H_a.createTexture());var H_b=H_xa.curBindTexTarget,H_c=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,this._source),H_a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var H_d=this._minFifter,H_e=this._magFifter,H_f=this._repeat?10497:33071,H_g=H_k.isPOT(this._w,this._h);if(H_g?(this._mipMap?-1!==H_d||(H_d=9987):-1!==H_d||(H_d=9729),-1!==H_e||(H_e=9729),H_a.texParameteri(3553,10241,H_d),H_a.texParameteri(3553,10240,H_e),H_a.texParameteri(3553,10242,H_f),H_a.texParameteri(3553,10243,H_f),this._mipMap&&H_a.generateMipmap(3553)):(-1!==H_d||(H_d=9729),-1!==H_e||(H_e=9729),H_a.texParameteri(3553,10241,H_d),H_a.texParameteri(3553,10240,H_e),H_a.texParameteri(3553,10242,33071),H_a.texParameteri(3553,10243,33071)),H_a.bindFramebuffer(36160,this._frameBuffer),H_a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=H_a.createRenderbuffer()),H_a.bindRenderbuffer(36161,this._depthStencilBuffer),H_a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:H_a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H_a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H_a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H_a.bindFramebuffer(36160,null),H_b&&H_c&&H_xa.bindTexture(H_a,H_b,H_c),H_a.bindRenderbuffer(36161,null),H_g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},H_b.disposeResource=function(){this._frameBuffer&&(H_wa.mainContext.deleteTexture(this._source),H_wa.mainContext.deleteFramebuffer(this._frameBuffer),H_wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},H_d(0,H_b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H_d(0,H_b,"frameBuffer",function(){return this._frameBuffer}),H_j}(),H_Xa=function(H_a){function H_h(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this.offsetX=0,this.offsetY=0,H_h.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=H_f,this.canvas=H_a,this._ctx=H_a.getContext("2d",void 0),this._w=H_d,this._h=H_e,this.offsetX=H_b,this.offsetY=H_c,this.src=H_g,this._enableMerageInAtlas=!0,H_Q.enabled&&this._w<H_Q.atlasLimitWidth&&this._h<H_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}H_m(H_h,"laya.webgl.resource.WebGLSubImage",H_c);var H_b=H_h.prototype;return H_y.imps(H_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H_b.size=function(H_a,H_b){this._w=H_a,this._h=H_b,this._ctx&&this._ctx.size(H_a,H_b),this.canvas&&(this.canvas.height=H_b,this.canvas.width=H_a)},H_b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},H_b.createWebGlTexture=function(){var H_a=H_wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var H_b=this._source=H_a.createTexture(),H_c=H_xa.curBindTexTarget,H_d=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,H_b),H_a.pixelStorei(37441,!0),H_a.texImage2D(3553,0,6408,6408,5121,this.canvas),H_a.pixelStorei(37441,!1);var H_e=this.minFifter,H_f=this.magFifter,H_g=this.repeat?10497:33071,H_h=H_k.isPOT(this.width,this.height);H_h?(this.mipmap?-1!==H_e||(H_e=9987):-1!==H_e||(H_e=9729),-1!==H_f||(H_f=9729),H_a.texParameteri(3553,10240,H_f),H_a.texParameteri(3553,10241,H_e),H_a.texParameteri(3553,10242,H_g),H_a.texParameteri(3553,10243,H_g),this.mipmap&&H_a.generateMipmap(3553)):(-1!==H_e||(H_e=9729),-1!==H_f||(H_f=9729),H_a.texParameteri(3553,10241,H_e),H_a.texParameteri(3553,10240,H_f),H_a.texParameteri(3553,10242,33071),H_a.texParameteri(3553,10243,33071)),H_c&&H_d&&H_xa.bindTexture(H_a,H_c,H_d),this.canvas=null,H_h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},H_b.disposeResource=function(){H_Q.enabled&&this._allowMerageInAtlas||!this._source||(H_wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H_b.clearAtlasSource=function(){},H_d(0,H_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H_d(0,H_b,"atlasSource",function(){return this.canvas}),H_d(0,H_b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(H_a){this._allowMerageInAtlas=H_a}),H_h}(),H_Ya=function(H_a){function H_j(H_a,H_b,H_c,H_d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,H_j.__super.call(this),!H_a||!H_b)throw"Shader Error";this._id=++H_j._count,this._vs=H_a,this._ps=H_b,this._nameMap=H_d||{},null!=H_c&&(H_j.sharders[H_c]=this)}H_m(H_j,"laya.webgl.shader.Shader",H_La);var H_b=H_j.prototype;return H_b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},H_b.disposeResource=function(){H_wa.mainContext.deleteShader(this._vshader),H_wa.mainContext.deleteShader(this._pshader),H_wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},H_b._compile=function(){if(!H_wa.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var H_a=[this._vs,this._ps],H_b=H_wa.mainContext;if(this._program=H_b.createProgram(),this._vshader=H_j._createShader(H_b,H_a[0],35633),this._pshader=H_j._createShader(H_b,H_a[1],35632),H_b.attachShader(this._program,this._vshader),H_b.attachShader(this._program,this._pshader),H_b.linkProgram(this._program),!H_t.isConchApp&&!H_b.getProgramParameter(this._program,35714))throw H_b.getProgramInfoLog(this._program);var H_c,H_d,H_e=0,H_f=0;for(H_f=H_t.isConchApp?H_b.getProgramParameterEx(this._vs,this._ps,"",35721):H_b.getProgramParameter(this._program,35721),H_e=0;H_e<H_f;H_e++){var H_g=null;H_c={vartype:"attribute",glfun:null,ivartype:0,attrib:H_g=H_t.isConchApp?H_b.getActiveAttribEx(this._vs,this._ps,"",H_e):H_b.getActiveAttrib(this._program,H_e),location:H_b.getAttribLocation(this._program,H_g.name),name:H_g.name,type:H_g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(H_c)}var H_h=0;for(H_h=H_t.isConchApp?H_b.getProgramParameterEx(this._vs,this._ps,"",35718):H_b.getProgramParameter(this._program,35718),H_e=0;H_e<H_h;H_e++){var H_i=null;H_i=H_t.isConchApp?H_b.getActiveUniformEx(this._vs,this._ps,"",H_e):H_b.getActiveUniform(this._program,H_e),0<(H_c={vartype:"uniform",glfun:null,ivartype:1,attrib:H_g,location:H_b.getUniformLocation(this._program,H_i.name),name:H_i.name,type:H_i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H_c.name=H_c.name.substr(0,H_c.name.length-3),H_c.isArray=!0,H_c.location=H_b.getUniformLocation(this._program,H_c.name)),this._params.push(H_c)}for(H_e=0,H_d=this._params.length;H_e<H_d;H_e++)if((H_c=this._params[H_e]).indexOfParams=H_e,H_c.index=1,H_c.value=[H_c.location,null],H_c.codename=H_c.name,H_c.name=this._nameMap[H_c.codename]?this._nameMap[H_c.codename]:H_c.codename,(this._paramsMap[H_c.name]=H_c)._this=this,H_c.uploadedValue=[],"attribute"!==H_c.vartype)switch(H_c.type){case 5124:H_c.fun=H_c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H_c.fun=H_c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H_c.fun=H_c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H_c.fun=H_c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H_c.fun=H_c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H_c.fun=this._uniform_sampler2D;break;case 35680:H_c.fun=this._uniform_samplerCube;break;case 35676:H_c.glfun=H_b.uniformMatrix4fv,H_c.fun=this._uniformMatrix4fv;break;case 35670:H_c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else H_c.fun=this._attribute}},H_b.getUniform=function(H_a){return this._paramsMap[H_a]},H_b._attribute=function(H_a,H_b){var H_c=H_wa.mainContext,H_d=H_Na._enableAtributes,H_e=H_a.location;return H_d[H_e]||H_c.enableVertexAttribArray(H_e),H_c.vertexAttribPointer(H_e,H_b[0],H_b[1],H_b[2],H_b[3],H_b[4]+this._offset),H_d[H_e]=H_Na._bindVertexBuffer,1},H_b._uniform1f=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b?(H_wa.mainContext.uniform1f(H_a.location,H_c[0]=H_b),1):0},H_b._uniform1fv=function(H_a,H_b){if(H_b.length<4){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_wa.mainContext.uniform1fv(H_a.location,H_b),H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3],1):0}return H_wa.mainContext.uniform1fv(H_a.location,H_b),1},H_b._uniform_vec2=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]?(H_wa.mainContext.uniform2f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1]),1):0},H_b._uniform_vec2v=function(H_a,H_b){if(H_b.length<2){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_wa.mainContext.uniform2fv(H_a.location,H_b),H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3],1):0}return H_wa.mainContext.uniform2fv(H_a.location,H_b),1},H_b._uniform_vec3=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]?(H_wa.mainContext.uniform3f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2]),1):0},H_b._uniform_vec3v=function(H_a,H_b){return H_wa.mainContext.uniform3fv(H_a.location,H_b),1},H_b._uniform_vec4=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_wa.mainContext.uniform4f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3]),1):0},H_b._uniform_vec4v=function(H_a,H_b){return H_wa.mainContext.uniform4fv(H_a.location,H_b),1},H_b._uniformMatrix2fv=function(H_a,H_b){return H_wa.mainContext.uniformMatrix2fv(H_a.location,!1,H_b),1},H_b._uniformMatrix3fv=function(H_a,H_b){return H_wa.mainContext.uniformMatrix3fv(H_a.location,!1,H_b),1},H_b._uniformMatrix4fv=function(H_a,H_b){return H_wa.mainContext.uniformMatrix4fv(H_a.location,!1,H_b),1},H_b._uniform1i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b?(H_wa.mainContext.uniform1i(H_a.location,H_c[0]=H_b),1):0},H_b._uniform1iv=function(H_a,H_b){return H_wa.mainContext.uniform1iv(H_a.location,H_b),1},H_b._uniform_ivec2=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]?(H_wa.mainContext.uniform2i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1]),1):0},H_b._uniform_ivec2v=function(H_a,H_b){return H_wa.mainContext.uniform2iv(H_a.location,H_b),1},H_b._uniform_vec3i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]?(H_wa.mainContext.uniform3i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2]),1):0},H_b._uniform_vec3vi=function(H_a,H_b){return H_wa.mainContext.uniform3iv(H_a.location,H_b),1},H_b._uniform_vec4i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_wa.mainContext.uniform4i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3]),1):0},H_b._uniform_vec4vi=function(H_a,H_b){return H_wa.mainContext.uniform4iv(H_a.location,H_b),1},H_b._uniform_sampler2D=function(H_a,H_b){var H_c=H_wa.mainContext,H_d=H_a.uploadedValue;return null==H_d[0]?(H_d[0]=this._curActTexIndex,H_c.uniform1i(H_a.location,this._curActTexIndex),H_c.activeTexture(H_j._TEXTURES[this._curActTexIndex]),H_xa.bindTexture(H_c,3553,H_b),this._curActTexIndex++,1):(H_c.activeTexture(H_j._TEXTURES[H_d[0]]),H_xa.bindTexture(H_c,3553,H_b),0)},H_b._uniform_samplerCube=function(H_a,H_b){var H_c=H_wa.mainContext,H_d=H_a.uploadedValue;return null==H_d[0]?(H_d[0]=this._curActTexIndex,H_c.uniform1i(H_a.location,this._curActTexIndex),H_c.activeTexture(H_j._TEXTURES[this._curActTexIndex]),H_xa.bindTexture(H_c,34067,H_b),this._curActTexIndex++,1):(H_c.activeTexture(H_j._TEXTURES[H_d[0]]),H_xa.bindTexture(H_c,34067,H_b),0)},H_b._noSetValue=function(H_a){console.log("no....:"+H_a.name)},H_b.uploadOne=function(H_a,H_b){this.activeResource(),H_xa.UseProgram(this._program);var H_c=this._paramsMap[H_a];H_c.fun.call(this,H_c,H_b)},H_b.uploadTexture2D=function(H_a){H_G.shaderCall++;var H_b=H_wa.mainContext;H_b.activeTexture(33984),H_xa.bindTexture(H_b,3553,H_a)},H_b.uploadTexture2D1=function(H_a){H_G.shaderCall++;var H_b=H_wa.mainContext;H_b.activeTexture(33985),H_xa.bindTexture(H_b,3553,H_a)},H_b.upload=function(H_a,H_b){H_La.activeShader=H_La.bindShader=this,this._lastUseFrameCount===H_G.loopCount||this.activeResource(),H_xa.UseProgram(this._program),this._reCompile?(H_b=this._params,this._reCompile=!1):H_b=H_b||this._params;H_wa.mainContext;for(var H_c,H_d,H_e=H_b.length,H_f=0,H_g=0;H_g<H_e;H_g++)null!==(H_d=H_a[(H_c=H_b[H_g]).name])&&(H_f+=H_c.fun.call(this,H_c,H_d));H_G.shaderCall+=H_f},H_b.uploadArray=function(H_a,H_b,H_c){H_La.activeShader=this,(H_La.bindShader=this).activeResource(),H_xa.UseProgram(this._program);this._params;for(var H_d,H_e,H_f=0,H_g=H_b-2;0<=H_g;H_g-=2)(H_e=this._paramsMap[H_a[H_g]])&&null!=(H_d=H_a[H_g+1])&&(H_c&&H_c[H_e.name]&&H_c[H_e.name].bind(),H_f+=H_e.fun.call(this,H_e,H_d));H_G.shaderCall+=H_f},H_b.getParams=function(){return this._params},H_j.getShader=function(H_a){return H_j.sharders[H_a]},H_j.create=function(H_a,H_b,H_c,H_d){return new H_j(H_a,H_b,H_c,H_d)},H_j.withCompile=function(H_a,H_b,H_c,H_d){if(H_c&&H_j.sharders[H_c])return H_j.sharders[H_c];var H_e=H_j._preCompileShader[2e-4*H_a];if(!H_e)throw new Error("withCompile shader err!"+H_a);return H_e.createShader(H_b,H_c,H_d)},H_j.withCompile2D=function(H_a,H_b,H_c,H_d,H_e){if(H_d&&H_j.sharders[H_d])return H_j.sharders[H_d];var H_f=H_j._preCompileShader[2e-4*H_a+H_b];if(!H_f)throw new Error("withCompile shader err!"+H_a+" "+H_b);return H_f.createShader(H_c,H_d,H_e)},H_j.addInclude=function(H_a,H_b){H_va.addInclude(H_a,H_b)},H_j.preCompile=function(H_a,H_b,H_c,H_d){var H_e=2e-4*H_a;H_j._preCompileShader[H_e]=new H_va(H_e,H_b,H_c,H_d)},H_j.preCompile2D=function(H_a,H_b,H_c,H_d,H_e){var H_f=2e-4*H_a+H_b;H_j._preCompileShader[H_f]=new H_va(H_f,H_c,H_d,H_e)},H_j._createShader=function(H_a,H_b,H_c){var H_d=H_a.createShader(H_c);return H_a.shaderSource(H_d,H_b),H_a.compileShader(H_d),H_d},H_j._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],H_j._count=0,H_j._preCompileShader={},H_j.SHADERNAME2ID=2e-4,H_j.sharders=((H_j.sharders=[]).length=32,H_j.sharders),H_g(H_j,["nameKey",function(){return this.nameKey=new H_H}]),H_j}(),H_Za=function(H_a){function H_b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,H_b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}H_m(H_b,"laya.webgl.utils.Buffer2D",H_a);var H_c=H_b.prototype;return H_c.needSize=function(H_a){var H_b=this._byteLength;if(H_a){var H_c=this._byteLength+H_a;H_c<=this._buffer.byteLength||this._resizeBuffer(H_c<<1,!0),this._byteLength=H_c}return H_b},H_c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),H_G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H_Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H_Na._gl.bufferSubData(this._bufferType,0,this._buffer)},H_c._bufferSubData=function(H_a,H_b,H_c){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),H_G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H_Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H_b||H_c){var H_d=this._buffer.slice(H_b,H_c);H_Na._gl.bufferSubData(this._bufferType,H_a,H_d)}else H_Na._gl.bufferSubData(this._bufferType,H_a,this._buffer)},H_c._checkArrayUse=function(){},H_c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},H_c._bind_subUpload=function(H_a,H_b,H_c){return void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(H_a,H_b,H_c),!0)},H_c._resizeBuffer=function(H_a,H_b){if(H_a<this._buffer.byteLength)return this;if(this.memorySize=H_a,H_b&&this._buffer&&0<this._buffer.byteLength){var H_c=new ArrayBuffer(H_a);new Uint8Array(H_c).set(new Uint8Array(this._buffer),0),this._buffer=H_c}else this._buffer=new ArrayBuffer(H_a);return this._checkArrayUse(),this._upload=!0,this},H_c.append=function(H_a){this._upload=!0;var H_b,H_c;H_b=H_a.byteLength,H_a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+H_b,!0),H_c=new Uint8Array(this._buffer,this._byteLength)):H_a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+H_b,!0),H_c=new Uint16Array(this._buffer,this._byteLength)):H_a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+H_b,!0),H_c=new Float32Array(this._buffer,this._byteLength)),H_c.set(H_a,0),this._byteLength+=H_b,this._checkArrayUse()},H_c.appendU16Array=function(H_a,H_b){this._resizeBuffer(this._byteLength+2*H_b,!0);for(var H_c=new Uint16Array(this._buffer,this._byteLength,H_b),H_d=0;H_d<H_b;H_d++)H_c[H_d]=H_a[H_d];this._byteLength+=2*H_b,this._checkArrayUse()},H_c.appendEx=function(H_a,H_b){this._upload=!0;var H_c;H_c=H_a.byteLength,this._resizeBuffer(this._byteLength+H_c,!0),new H_b(this._buffer,this._byteLength).set(H_a,0),this._byteLength+=H_c,this._checkArrayUse()},H_c.appendEx2=function(H_a,H_b,H_c,H_d){void 0===H_d&&(H_d=1),this._upload=!0;var H_e,H_f;H_e=H_c*H_d,this._resizeBuffer(this._byteLength+H_e,!0),H_f=new H_b(this._buffer,this._byteLength);var H_g=0;for(H_g=0;H_g<H_c;H_g++)H_f[H_g]=H_a[H_g];this._byteLength+=H_e,this._checkArrayUse()},H_c.getBuffer=function(){return this._buffer},H_c.setNeedUpload=function(){this._upload=!0},H_c.getNeedUpload=function(){return this._upload},H_c.upload=function(){var H_a=this._bind_upload();return H_Na._gl.bindBuffer(this._bufferType,null),H_Na._bindActive[this._bufferType]=null,H_La.activeShader=null,H_a},H_c.subUpload=function(H_a,H_b,H_c){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0);var H_d=this._bind_subUpload();return H_Na._gl.bindBuffer(this._bufferType,null),H_Na._bindActive[this._bufferType]=null,H_La.activeShader=null,H_d},H_c.disposeResource=function(){H_a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},H_c.clear=function(){this._byteLength=0,this._upload=!0},H_d(0,H_c,"bufferLength",function(){return this._buffer.byteLength}),H_d(0,H_c,"byteLength",null,function(H_a){this._byteLength!==H_a&&(H_a<=this._buffer.byteLength||this._resizeBuffer(2*H_a+256,!0),this._byteLength=H_a)}),H_b.__int__=function(H_a){H_oa.QuadrangleIB=H_oa.create(35044),H_sa.fillIBQuadrangle(H_oa.QuadrangleIB,16)},H_b.FLOAT32=4,H_b.SHORT=2,H_b}(H_Na),H_$a=(function(H_b){function H_c(H_a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,H_c.__super.call(this,9)}H_m(H_c,"laya.webgl.shader.d2.value.GlowSV",H_b);var H_a=H_c.prototype;H_a.setValue=function(H_a){H_b.prototype.setValue.call(this,H_a)},H_a.clear=function(){H_b.prototype.clear.call(this)}}(H_Ra),function(H_a){function H_b(H_a){H_b.__super.call(this,64),this.defines.add(64)}H_m(H_b,"laya.webgl.shader.d2.value.TextSV",H_a);var H_c=H_b.prototype;return H_c.release=function(){(H_b.pool[H_b._length++]=this).clear()},H_c.clear=function(){H_a.prototype.clear.call(this)},H_b.create=function(){return H_b._length?H_b.pool[--H_b._length]:new H_b(null)},H_b.pool=[],H_b._length=0,H_b}(H_Ra)),H__a=function(H_a){function H_e(H_a,H_b,H_c,H_d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,H_e.__super.call(this,H_a,H_b,H_c,H_d)}H_m(H_e,"laya.webgl.shader.d2.Shader2X",H_a);var H_b=H_e.prototype;return H_b.upload2dQuick1=function(H_a){this.upload(H_a,this._params2dQuick1||this._make2dQuick1())},H_b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var H_a,H_b=this._params,H_c=0,H_d=H_b.length;H_c<H_d;H_c++)H_a=H_b[H_c],(H_t.isFlash||"size"!==H_a.name&&"position"!==H_a.name&&"texcoord"!==H_a.name)&&this._params2dQuick1.push(H_a)}return this._params2dQuick1},H_b.disposeResource=function(){H_a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},H_b.upload2dQuick2=function(H_a){this.upload(H_a,this._params2dQuick2||this._make2dQuick2())},H_b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var H_a,H_b=this._params,H_c=0,H_d=H_b.length;H_c<H_d;H_c++)H_a=H_b[H_c],(H_t.isFlash||"size"!==H_a.name)&&this._params2dQuick2.push(H_a)}return this._params2dQuick2},H_e.create=function(H_a,H_b,H_c,H_d){return new H_e(H_a,H_b,H_c,H_d)},H_e}(H_Ya),H_oa=function(H_a){function H_b(H_a){this._uint8Array=null,this._uint16Array=null,void 0===H_a&&(H_a=35044),H_b.__super.call(this),this._bufferUsage=H_a,this._bufferType=34963,H_t.isFlash||(this._buffer=new ArrayBuffer(8))}H_m(H_b,"laya.webgl.utils.IndexBuffer2D",H_Za);var H_c=H_b.prototype;return H_c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},H_c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},H_c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},H_c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},H_b.QuadrangleIB=null,H_b.create=function(H_a){return void 0===H_a&&(H_a=35044),new H_b(H_a)},H_b}(),H_pa=function(H_a){function H_c(H_a,H_b){this._floatArray32=null,this._vertexStride=0,H_c.__super.call(this),this._vertexStride=H_a,this._bufferUsage=H_b,this._bufferType=34962,H_t.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}H_m(H_c,"laya.webgl.utils.VertexBuffer2D",H_a);var H_b=H_c.prototype;return H_b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},H_b.bind=function(H_a){H_a&&H_a._bind(),this._bind()},H_b.insertData=function(H_a,H_b){this.getFloat32Array().set(H_a,H_b),this._upload=!0},H_b.bind_upload=function(H_a){H_a._bind_upload()||H_a._bind(),this._bind_upload()||this._bind()},H_b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},H_b.disposeResource=function(){H_a.prototype.disposeResource.call(this)},H_b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},H_d(0,H_b,"vertexStride",function(){return this._vertexStride}),H_c.create=function(H_a,H_b){return void 0===H_b&&(H_b=35048),new H_c(H_a,H_b)},H_c}(H_Za),H_ab=function(H_a){function H_h(H_a,H_b,H_c,H_d,H_e,H_f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===H_c&&(H_c=6408),void 0===H_d&&(H_d=!0),H_h.__super.call(this,H_a,H_b),H_a){if(this._format=H_c,this._mipmap=H_d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof H_a)this._url=H_a,this._src=H_a,this._image=new H_n.window.Image,H_b&&(H_b.onload&&(this.onload=H_b.onload),H_b.onerror&&(this.onerror=H_b.onerror),H_b.onCreate&&H_b.onCreate(this)),this._image.crossOrigin=H_a&&0==H_a.indexOf("data:")?null:"",H_a&&(this._image.src=H_a);else if(H_a instanceof ArrayBuffer){this._src=H_b,this._url=this._src;var H_g=new H_i(H_a);H_g.readUTFBytes(4),H_g.readUTFBytes(2),H_g.getInt16();H_g.endian="bigEndian",this._w=H_g.getInt16(),this._h=H_g.getInt16();H_g.getInt16(),H_g.getInt16();this._image=new Uint8Array(H_a,H_g.pos),this._format=H_wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,H_Q.enabled&&this._w<H_Q.atlasLimitWidth&&this._h<H_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(H_a instanceof Uint8Array))return this._src=H_b,this._url=this._src,this._image=H_a.source||H_a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=H_b,this._url=this._src,this._w=H_e,this._h=H_f,this._image=H_a,this._format=0===H_c?H_a.byteLength/(H_e*H_f)==4?6408:6407:H_c}this._$5__enableMerageInAtlas=!0}}H_m(H_h,"laya.webgl.resource.WebGLImage",H_r);var H_b=H_h.prototype;return H_y.imps(H_b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H_b._init_=function(H_a,H_b){},H_b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H_a=H_wa.mainContext,H_b=this._source=H_a.createTexture(),H_c=H_xa.curBindTexTarget,H_d=H_xa.curBindTexValue;H_xa.bindTexture(H_a,3553,H_b);var H_e=this.minFifter,H_f=this.magFifter,H_g=this.repeat?10497:33071,H_h=H_k.isPOT(this._w,this._h),H_i=!1;switch(H_h?(this.mipmap?-1!==H_e||(H_e=9987):-1!==H_e||(H_e=9729),-1!==H_f||(H_f=9729),H_a.texParameteri(3553,10241,H_e),H_a.texParameteri(3553,10240,H_f),H_a.texParameteri(3553,10242,H_g),H_a.texParameteri(3553,10243,H_g),this.mipmap&&H_a.generateMipmap(3553)):(-1!==H_e||(H_e=9729),-1!==H_f||(H_f=9729),H_a.texParameteri(3553,10241,H_e),H_a.texParameteri(3553,10240,H_f),H_a.texParameteri(3553,10242,33071),H_a.texParameteri(3553,10243,33071)),H_a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&H_a.pixelStorei(H_a.UNPACK_ALIGNMENT,1),H_a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&H_a.pixelStorei(H_a.UNPACK_ALIGNMENT,1),H_a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:H_i=!0,H_a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case H_wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H_i=!0,H_a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}H_a.pixelStorei(37441,!1),H_c&&H_d&&H_xa.bindTexture(H_a,H_c,H_d),this.uri||(this.uri=this._url),H_i?this.memorySize=this._image.length:H_h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},H_b.recreateResource=function(){var H_a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var H_b=this;this._image=new H_n.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(H_b._needReleaseAgain)return H_b._needReleaseAgain=!1,H_b._image.onload=null,void(H_b._image=null);H_b._allowMerageInAtlas&&H_b._enableMerageInAtlas?(H_a.memorySize=0,H_a._recreateLock=!1):H_b._createWebGlTexture(),H_b.completeCreate()},this._image.src=this._src}},H_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&H_wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},H_b.onresize=function(){this._w=this._image.width,this._h=this._image.height,H_Q.enabled&&this._w<H_Q.atlasLimitWidth&&this._h<H_Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},H_b.clearAtlasSource=function(){this._image=null},H_d(0,H_b,"format",function(){return this._format}),H_d(0,H_b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(H_a){this._$5__enableMerageInAtlas=H_a}),H_d(0,H_b,"mipmap",function(){return this._mipmap}),H_d(0,H_b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H_d(0,H_b,"atlasSource",function(){return this._image}),H_d(0,H_b,"onload",null,function(H_a){var H_b=this;this._onload=H_a,this._image&&(this._image.onload=null!=this._onload?function(){H_b.onresize(),H_b._onload()}:null)}),H_d(0,H_b,"onerror",null,function(H_a){var H_b=this;this._onerror=H_a,this._image&&(this._image.onerror=null!=this._onerror?function(){H_b._onerror()}:null)}),H_h}();H_y.__init([H_na,H_P,H_za,H_va])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}}),function(H_f,H_a,H_d){H_d.un,H_d.uns;var H_e=H_d.static,H_g=H_d.class,H_h=H_d.getset,H_i=(H_d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),H_q=laya.utils.ClassUtils,H_l=(laya.events.Event,laya.utils.HTMLChar),H_j=laya.net.Loader,H_k=(laya.display.Node,laya.maths.Rectangle),H_m=laya.renders.Render,H_n=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),H_r=laya.utils.Stat,H_L=laya.display.Text,H_s=laya.resource.Texture,H_t=laya.net.URL,H_u=laya.utils.Utils,H_v=function(){function H_n(){}return H_g(H_n,"laya.html.utils.HTMLParse"),H_n.parse=function(H_a,H_b,H_c){H_b=(H_b="<root>"+(H_b=H_b.replace(/<br>/g,"<br/>"))+"</root>").replace(H_n.spacePattern,H_n.char255);var H_d=H_u.parseXMLFromString(H_b);H_n._parseXML(H_a,H_d.childNodes[0].childNodes,H_c)},H_n._parseXML=function(H_a,H_b,H_c,H_d){var H_e=0,H_f=0;if(H_b.join||H_b.item)for(H_e=0,H_f=H_b.length;H_e<H_f;++H_e)H_n._parseXML(H_a,H_b[H_e],H_c,H_d);else{var H_g,H_h,H_i;if(3==H_b.nodeType)return void(H_a instanceof laya.html.dom.HTMLDivElement?(null==H_b.nodeName&&(H_b.nodeName="#text"),H_h=H_b.nodeName.toLowerCase(),0<(H_i=H_b.textContent.replace(/^\s+|\s+$/g,"")).length&&(H_g=H_q.getInstance(H_h))&&(H_a.addChild(H_g),H_g.innerTEXT=H_i.replace(H_n.char255AndOneSpacePattern," "))):0<(H_i=H_b.textContent.replace(/^\s+|\s+$/g,"")).length&&(H_a.innerTEXT=H_i.replace(H_n.char255AndOneSpacePattern," ")));if("#comment"==(H_h=H_b.nodeName.toLowerCase()))return;if(H_g=H_q.getInstance(H_h)){(H_g=H_a.addChild(H_g)).URI=H_c,H_g.href=H_d;var H_j=H_b.attributes;if(H_j&&0<H_j.length)for(H_e=0,H_f=H_j.length;H_e<H_f;++H_e){var H_k=H_j[H_e],H_l=H_k.nodeName,H_m=H_k.value;H_g._setAttributes(H_l,H_m)}H_n._parseXML(H_g,H_b.childNodes,H_c,H_g.href)}else H_n._parseXML(H_a,H_b.childNodes,H_c,H_d)}},H_n.char255=String.fromCharCode(255),H_n.spacePattern=/&nbsp;|&#160;/g,H_n.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),H_n}(),H_w=function(){function H_K(){}return H_g(H_K,"laya.html.utils.Layout"),H_K.later=function(H_a){null==H_K._will&&(H_K._will=[],H_d.stage.frameLoop(1,null,function(){if(!(H_K._will.length<1)){for(var H_a=0;H_a<H_K._will.length;H_a++)laya.html.utils.Layout.layout(H_K._will[H_a]);H_K._will.length=0}})),H_K._will.push(H_a)},H_K.layout=function(H_a){if(!H_a||!H_a._style)return null;if(0==(512&H_a._style._type))return null;H_a.getStyle()._type&=-513;var H_b=H_K._multiLineLayout(H_a);return H_m.isConchApp&&H_a.layaoutCallNative&&H_a.layaoutCallNative(),H_b},H_K._multiLineLayout=function(H_a){if(H_L.RightToLeft)return H_K._multiLineLayout2(H_a);var H_b=new Array;H_a._addChildsToLayout(H_b);var H_c,H_d,H_e,H_f,H_g,H_h=0,H_i=H_b.length,H_j=H_a._getCSSStyle(),H_k=H_j.letterSpacing,H_l=H_j.leading,H_m=H_j.lineHeight,H_n=H_j._widthAuto()||!H_j.wordWrap,H_q=H_n?999999:H_a.width,H_r=(H_a.height,0),H_s=H_j.italic?H_j.fontSize/3:0,H_t=H_j._getAlign(),H_u=H_j._getValign(),H_v=0!==H_u||0!==H_t||0!=H_m,H_w=0,H_x=0,H_y=0,H_z=0,H_A=new Array,H_B=H_A[0]=new H_M,H_C=!1,H_D=!1;H_B.h=0,H_j.italic&&(H_q-=H_j.fontSize/3);var H_E=0,H_F=!0;function H_G(){H_B.y=H_x,H_x+=H_B.h+H_l,0==H_B.h&&(H_x+=H_m),H_B.mWidth=H_E,H_E=0,H_B=new H_M,H_A.push(H_B),H_B.h=0,H_C=!(H_F=!(H_w=0))}for(H_h=0;H_h<H_i;H_h++)if(null!=(H_c=H_b[H_h]))if(H_F=!1,H_c instanceof laya.html.dom.HTMLBrElement)H_G(),H_B.y=H_x;else{if(H_c._isChar()){if((H_f=H_c).isWord)H_C=H_D||"\n"===H_f.char,H_B.wordStartIndex=H_B.elements.length;else{if(H_y=H_f.width+H_f.style.letterSpacin,0<H_A.length&&H_q<H_w+H_y&&0<H_B.wordStartIndex){var H_H;H_H=H_B.elements.length-H_B.wordStartIndex+1,H_B.elements.length=H_B.wordStartIndex,H_h-=H_H,H_G();continue}H_C=!1,H_E+=H_f.width}H_y=H_f.width+H_k,H_z=H_f.height,H_D=!1,(H_C=H_C||H_q<H_w+H_y)&&H_G(),H_B.minTextHeight=Math.min(H_B.minTextHeight,H_c.height)}else H_d=H_c._getCSSStyle(),H_g=H_c,H_e=H_d.padding,0===H_d._getCssFloat()||(H_v=!0),H_C=H_D||H_d.lineElement,H_y=H_g.width*H_g._style._tf.scaleX+H_e[1]+H_e[3]+H_k,H_z=H_g.height*H_g._style._tf.scaleY+H_e[0]+H_e[2],H_D=H_d.lineElement,(H_C=H_C||H_q<H_w+H_y&&H_d.wordWrap)&&H_G();H_B.elements.push(H_c),H_B.h=Math.max(H_B.h,H_z),H_c.x=H_w,H_c.y=H_x,H_w+=H_y,H_B.w=H_w-H_k,H_B.y=H_x,H_r=Math.max(H_w+H_s,H_r)}else H_F||(H_w+=H_K.DIV_ELEMENT_PADDING),H_B.wordStartIndex=H_B.elements.length;if(H_x=H_B.y+H_B.h,H_v){var H_I=0,H_J=H_q;for(H_n&&0<H_a.width&&(H_J=H_a.width),H_h=0,H_i=H_A.length;H_h<H_i;H_h++)H_A[H_h].updatePos(0,H_J,H_h,H_I,H_t,H_u,H_m),H_I+=Math.max(H_m,H_A[H_h].h+H_l);H_x=H_I}return H_n&&(H_a.width=H_r),H_x>H_a.height&&(H_a.height=H_x),[H_r,H_x]},H_K._multiLineLayout2=function(H_a){var H_b=new Array;H_a._addChildsToLayout(H_b);var H_c,H_d,H_e,H_f,H_g,H_h=0,H_i=H_b.length,H_j=H_a._getCSSStyle(),H_k=H_j.letterSpacing,H_l=H_j.leading,H_m=H_j.lineHeight,H_n=H_j._widthAuto()||!H_j.wordWrap,H_q=H_n?999999:H_a.width,H_r=(H_a.height,0),H_s=H_j.italic?H_j.fontSize/3:0,H_t=2-H_j._getAlign(),H_u=H_j._getValign(),H_v=0!==H_u||0!=H_t||0!=H_m,H_w=0,H_x=0,H_y=0,H_z=0,H_A=new Array,H_B=H_A[0]=new H_M,H_C=!1,H_D=!1;H_B.h=0,H_j.italic&&(H_q-=H_j.fontSize/3);var H_E=0,H_F=!0;function H_G(){H_B.y=H_x,H_x+=H_B.h+H_l,0==H_B.h&&(H_x+=H_m),H_B.mWidth=H_E,H_E=0,H_B=new H_M,H_A.push(H_B),H_B.h=0,H_C=!(H_F=!(H_w=0))}for(H_h=0;H_h<H_i;H_h++)if(null!=(H_c=H_b[H_h]))if(H_F=!1,H_c instanceof laya.html.dom.HTMLBrElement)H_G(),H_B.y=H_x;else{if(H_c._isChar()){if((H_f=H_c).isWord)H_C=H_D||"\n"===H_f.char,H_B.wordStartIndex=H_B.elements.length;else{if(0<H_A.length&&H_q<H_w+H_y&&0<H_B.wordStartIndex){var H_H;H_H=H_B.elements.length-H_B.wordStartIndex+1,H_B.elements.length=H_B.wordStartIndex,H_h-=H_H,H_G();continue}H_C=!1,H_E+=H_f.width}H_y=H_f.width+H_k,H_z=H_f.height,H_D=!1,(H_C=H_C||H_q<H_w+H_y)&&H_G(),H_B.minTextHeight=Math.min(H_B.minTextHeight,H_c.height)}else H_d=H_c._getCSSStyle(),H_g=H_c,H_e=H_d.padding,0===H_d._getCssFloat()||(H_v=!0),H_C=H_D||H_d.lineElement,H_y=H_g.width*H_g._style._tf.scaleX+H_e[1]+H_e[3]+H_k,H_z=H_g.height*H_g._style._tf.scaleY+H_e[0]+H_e[2],H_D=H_d.lineElement,(H_C=H_C||H_q<H_w+H_y&&H_d.wordWrap)&&H_G();H_B.elements.push(H_c),H_B.h=Math.max(H_B.h,H_z),H_c.x=H_w,H_c.y=H_x,H_w+=H_y,H_B.w=H_w-H_k,H_B.y=H_x,H_r=Math.max(H_w+H_s,H_r)}else H_F||(H_w+=H_K.DIV_ELEMENT_PADDING),H_B.wordStartIndex=H_B.elements.length;if(H_x=H_B.y+H_B.h,H_v){var H_I=0,H_J=H_q;for(H_h=0,H_i=H_A.length;H_h<H_i;H_h++)H_A[H_h].updatePos(0,H_J,H_h,H_I,H_t,H_u,H_m),H_I+=Math.max(H_m,H_A[H_h].h+H_l);H_x=H_I}for(H_n&&(H_a.width=H_r),H_x>H_a.height&&(H_a.height=H_x),H_h=0,H_i=H_A.length;H_h<H_i;H_h++)H_A[H_h].revertOrder(H_q);return[H_r,H_x]},H_K._will=null,H_K.DIV_ELEMENT_PADDING=0,H_K}(),H_M=function(){function H_a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}H_g(H_a,"laya.html.utils.LayoutLine");var H_b=H_a.prototype;return H_b.updatePos=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h,H_i=0;0<this.elements.length&&(H_i=(H_h=this.elements[this.elements.length-1]).x+H_h.width-this.elements[0].x);var H_j=0,H_k=NaN;1===H_e&&(H_j=(H_b-H_i)/2),2===H_e&&(H_j=H_b-H_i),0===H_g||0!=H_f||(H_f=1);for(var H_l=0,H_m=this.elements.length;H_l<H_m;H_l++){var H_n=(H_h=this.elements[H_l])._getCSSStyle();switch(0!==H_j&&(H_h.x+=H_j),H_n._getValign()){case 0:H_h.y=H_d;break;case 1:var H_q=0;99999!=this.minTextHeight&&(H_q=this.minTextHeight);var H_r=(H_q+H_g)/2;H_r=Math.max(H_r,this.h),H_k=(laya.html.dom.HTMLImageElement,H_d+H_r-H_h.height),H_h.y=H_k;break;case 2:H_h.y=H_d+(H_g-H_h.height)}}},H_b.revertOrder=function(H_a){var H_b;if(0<this.elements.length){var H_c,H_d=0;for(H_c=this.elements.length,H_d=0;H_d<H_c;H_d++)(H_b=this.elements[H_d]).x=H_a-H_b.x-H_b.width}},H_a}(),H_x=function(H_c){function H_b(){this.URI=null,this._href=null,H_b.__super.call(this),this._text=H_b._EMPTYTEXT,this.setStyle(new H_i(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}H_g(H_b,"laya.html.dom.HTMLElement",H_c);var H_a=H_b.prototype;return H_a.layaoutCallNative=function(){var H_a=0;if(this._childs&&0<(H_a=this._childs.length))for(var H_b=0;H_b<H_a;H_b++)this._childs[H_b].layaoutCallNative&&this._childs[H_b].layaoutCallNative();var H_c=this._getWords();H_c?laya.html.dom.HTMLElement.fillWords(this,H_c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},H_a.appendChild=function(H_a){return this.addChild(H_a)},H_a._getWords2=function(){var H_a=this._text.text;if(!H_a||0===H_a.length)return null;var H_b,H_c,H_d=0,H_e=0;if(this._text.drawWords)H_c=this._text.drawWords;else{for(H_e=(H_b=H_a.split(" ")).length-1,H_c=[],H_d=0;H_d<H_e;H_d++)H_c.push(H_b[H_d]," ");0<=H_e&&H_c.push(H_b[H_e]),this._text.drawWords=H_c}var H_f,H_g=this._text.words;if(H_g&&H_g.length===H_c.length)return H_g;null===H_g&&(this._text.words=H_g=[]),H_g.length=H_c.length;var H_h=this.style,H_i=H_h.font;for(H_d=0,H_e=H_c.length;H_d<H_e;H_d++){H_f=H_u.measureText(H_c[H_d],H_i);var H_j=H_g[H_d]=new H_l(H_c[H_d],H_f.width,H_f.height||H_h.fontSize,H_h);if(1<H_j.char.length&&(H_j.charNum=H_j.char),this.href){var H_k=new H_n;this.addChild(H_k),H_j.setSprite(H_k)}}return H_g},H_a._getWords=function(){if(!H_L.CharacterCache)return this._getWords2();var H_a=this._text.text;if(!H_a||0===H_a.length)return null;var H_b,H_c=this._text.words;if(H_c&&H_c.length===H_a.length)return H_c;null===H_c&&(this._text.words=H_c=[]),H_c.length=H_a.length;for(var H_d=this.style,H_e=H_d.font,H_f=0,H_g=H_a.length;H_f<H_g;H_f++)if(H_b=H_u.measureText(H_a.charAt(H_f),H_e)){var H_h=H_c[H_f]=new H_l(H_a.charAt(H_f),H_b.width,H_b.height||H_d.fontSize,H_d);if(this.href){var H_i=new H_n;this.addChild(H_i),H_h.setSprite(H_i)}}else console.warn("_getWords size is null"+H_a.charAt(H_f),H_e);return H_c},H_a.showLinkSprite=function(){var H_a=this._text.words;if(H_a)for(var H_b,H_c,H_d=[],H_e=0;H_e<H_a.length;H_e++)H_c=H_a[H_e],(H_b=new H_n).graphics.drawRect(0,0,H_c.width,H_c.height,"#ff0000"),H_b.width=H_c.width,H_b.height=H_c.height,this.addChild(H_b),H_d.push(H_b)},H_a._layoutLater=function(){var H_a=this.style;512&H_a._type||(H_a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&H_a.block?(H_w.later(this),H_a._type|=512):this.parent&&this.parent._layoutLater())},H_a._setAttributes=function(H_a,H_b){switch(H_a){case"style":return void this.style.cssText(H_b);case"class":return void(this.className=H_b)}H_c.prototype._setAttributes.call(this,H_a,H_b)},H_a.updateHref=function(){if(null!=this._href){var H_a=this._getWords();if(H_a)for(var H_b,H_c,H_d=0;H_d<H_a.length;H_d++)(H_c=(H_b=H_a[H_d]).getSprite())&&(H_c.size(H_b.width,H_b.height),H_c.on("click",this,this.onLinkHandler))}},H_a.onLinkHandler=function(H_a){switch(H_a.type){case"click":for(var H_b=this;H_b;)H_b.event("link",[this.href]),H_b=H_b.parent}},H_a.formatURL=function(H_a){return this.URI?H_t.formatURL(H_a,this.URI?this.URI.path:null):H_a},H_h(0,H_a,"href",function(){return this._href},function(H_a){null!=(this._href=H_a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),H_h(0,H_a,"color",null,function(H_a){this.style.color=H_a}),H_h(0,H_a,"onClick",null,function(H_a){H_d._runScript("fn=function(event){"+H_a+";}"),this.on("click",this,void 0)}),H_h(0,H_a,"id",null,function(H_a){H_y.document.setElementById(H_a,this)}),H_h(0,H_a,"innerTEXT",function(){return this._text.text},function(H_a){this.text=H_a}),H_h(0,H_a,"style",function(){return this._style}),H_h(0,H_a,"text",function(){return this._text.text},function(H_a){this._text==H_b._EMPTYTEXT?this._text={text:H_a,words:null}:(this._text.text=H_a,this._text.words&&(this._text.words.length=0)),H_m.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),H_h(0,H_a,"parent",H_c.prototype._$get_parent,function(H_a){if(H_a instanceof laya.html.dom.HTMLElement){var H_b=H_a;this.URI||(this.URI=H_b.URI),this.style.inherit(H_b.style)}H_d.superSet(H_n,this,"parent",H_a)}),H_h(0,H_a,"className",null,function(H_a){this.style.attrs(H_y.document.styleSheets["."+H_a])}),H_b.fillWords=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_a.graphics.clear();for(var H_h=0,H_i=H_b.length;H_h<H_i;H_h++){var H_j=H_b[H_h];H_a.graphics.fillText(H_j.char,H_j.x+H_c,H_j.y+H_d,H_e,H_f,"left",H_g)}},H_b._EMPTYTEXT={text:null,words:null},H_b}(H_n),H_b=(function(H_a){function H_b(){H_b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}H_g(H_b,"laya.html.dom.HTMLBrElement",H_x)}(),function(H_a){function H_b(){this.contextHeight=NaN,this.contextWidth=NaN,H_b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}H_g(H_b,"laya.html.dom.HTMLDivElement",H_a);var H_c=H_b.prototype;return H_c.appendHTML=function(H_a){H_v.parse(this,H_a,this.URI),this.layout()},H_c._addChildsToLayout=function(H_b){var H_a=this._getWords();if(null==H_a&&0==this._childs.length)return!1;H_a&&H_a.forEach(function(H_a){H_b.push(H_a)});for(var H_c=!0,H_d=0,H_e=this._childs.length;H_d<H_e;H_d++){var H_f=this._childs[H_d];H_c?H_c=!1:H_b.push(null),H_f._addToLayout(H_b)}return!0},H_c._addToLayout=function(H_a){this.layout()},H_c.layout=function(){if(this.style){this.style._type|=512;var H_a=H_w.layout(this);if(H_a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new H_k);var H_b=this._$P.mHtmlBounds;H_b.x=H_b.y=0,H_b.width=this.contextWidth=H_a[0],H_b.height=this.contextHeight=H_a[1],this.setBounds(H_b)}}},H_h(0,H_c,"height",function(){return this._height?this._height:this.contextHeight},H_a.prototype._$set_height),H_h(0,H_c,"innerHTML",null,function(H_a){this.destroyChildren(),this.appendHTML(H_a)}),H_h(0,H_c,"width",function(){return this._width?this._width:this.contextWidth},function(H_a){var H_b=!1;H_b=0===H_a?H_a!=this._width:H_a!=this.width,H_d.superSet(H_x,this,"width",H_a),H_b&&this.layout()}),H_b}(H_x)),H_y=function(H_a){function H_b(){this.all=new Array,this.styleSheets=H_i.styleSheets,H_b.__super.call(this)}H_g(H_b,"laya.html.dom.HTMLDocument",H_x);var H_c=H_b.prototype;return H_c.getElementById=function(H_a){return this.all[H_a]},H_c.setElementById=function(H_a,H_b){this.all[H_a]=H_b},H_e(H_b,["document",function(){return this.document=new H_b}]),H_b}();(function(H_a){function H_b(){this._tex=null,this._url=null,this._renderArgs=[],H_b.__super.call(this),this.style.block=!0}H_g(H_b,"laya.html.dom.HTMLImageElement",H_x);var H_c=H_b.prototype;H_c._addToLayout=function(H_a){!this._style.absolute&&H_a.push(this)},H_c.render=function(H_a,H_b,H_c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(H_r.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,H_a.ctx.drawTexture2(H_b,H_c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},H_c.layaoutCallNative=function(){var H_a=0;if(this._childs&&0<(H_a=this._childs.length))for(var H_b=0;H_b<H_a;H_b++)this._childs[H_b].layaoutCallNative&&this._childs[H_b].layaoutCallNative()},H_h(0,H_c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H_a){this._width!==H_a&&(this._width=H_a,this._style.width=H_a,this.repaint())}),H_h(0,H_c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H_a){this._height!==H_a&&(this._height=H_a,this._style.height=H_a,this.repaint())}),H_c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),H_j.clearCache(this,this._url),this._tex=null),H_x.prototype.destroy.call(this)},H_c.onloaded=function(){var H_a=this._style;H_a&&!H_a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),H_a&&!H_a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),H_m.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},H_c._loadImageComplete=function(H_a,H_b,H_c){if(!this._destroyed)if(null!=H_c)if(H_c instanceof ArrayBuffer){var H_d=new DataView(H_c);new laya.webgl.resource.WebGLImage(new Uint8Array(H_c,8),H_a,0,!1,H_d.getUint32(0),H_d.getUint32(4));this.onloaded()}else if(H_c instanceof H_s)H_j.imgMgrSet[H_a]=H_b,H_f.imgMgrLock(H_a,H_j.imgMgrSet[H_a]),this._url=H_a,this._tex=H_c,H_j.keepCache(this,H_a),H_j.cacheRes(H_a,this._tex),this.onloaded();else{var H_e=-1!=H_a.indexOf(".png",H_a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(H_c,H_a,H_e,!1,H_c.width,H_c.height);this.onloaded()}else this.event("error","Load image failed")},H_h(0,H_c,"src",null,function(H_a){(H_a=this.formatURL(H_a),this._url!=H_a)&&(null!=this._tex&&(H_j.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=H_a,(this._tex=H_j.getRes(H_a))?(H_j.keepCache(this,H_a),this.onloaded()):H_f.imgMgrLoad(H_a,this._loadImageComplete.bind(this),2,!1))})})(),function(H_a){function H_b(){this.type=null,H_b.__super.call(this),this.visible=!1}H_g(H_b,"laya.html.dom.HTMLLinkElement",H_a);var H_c=H_b.prototype;H_c._onload=function(H_a){switch(this.type){case"text/css":H_i.parseCSS(H_a,this.URI)}},H_h(0,H_c,"href",H_a.prototype._$get_href,function(H_a){var H_b=this;H_a=this.formatURL(H_a),this.URI=new H_t(H_a);var H_c=new H_j;H_c.once("complete",null,function(H_a){H_b._onload(H_a)}),H_c.load(H_a,"text")}),H_b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(H_x),function(H_a){function H_b(){H_b.__super.call(this),this.visible=!1}H_g(H_b,"laya.html.dom.HTMLStyleElement",H_a),H_h(0,H_b.prototype,"text",H_a.prototype._$get_text,function(H_a){H_i.parseCSS(H_a,null)})}(H_x),function(H_a){function H_b(){H_b.__super.call(this),this._getCSSStyle().valign="middle"}H_g(H_b,"laya.html.dom.HTMLIframeElement",H_a),H_h(0,H_b.prototype,"href",H_a.prototype._$get_href,function(H_c){var H_d=this;H_c=this.formatURL(H_c);var H_a=new H_j;H_a.once("complete",null,function(H_a){var H_b=H_d.URI;H_d.URI=new H_t(H_c),H_d.innerHTML=H_a,!H_b||(H_d.URI=H_b)}),H_a.load(H_c,"text")})}(H_b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}}),function(H_e,H_a,H_r){H_r.un,H_r.uns;var H_d=H_r.static,H_f=H_r.class,H_g=H_r.getset,H_c=(H_r.__newvec,laya.display.Animation),H_s=(laya.utils.Browser,laya.utils.ClassUtils),H_h=laya.filters.ColorFilter,H_i=laya.utils.Ease,H_j=laya.events.Event,H_k=(laya.events.EventDispatcher,laya.display.css.Font),H_l=laya.display.FrameAnimation,H_b=laya.display.Graphics,H_m=laya.utils.Handler,H_n=laya.display.Input,H_u=laya.net.Loader,H_q=(laya.display.Node,laya.maths.Point),H_t=laya.maths.Rectangle,H_v=laya.renders.Render,H_w=laya.display.Sprite,H_x=laya.display.Text,H_y=laya.resource.Texture,H_z=laya.utils.Tween,H_A=laya.utils.Utils,H_B=laya.utils.WeakObject;H_r.interface("laya.ui.IItem"),H_r.interface("laya.ui.ISelect"),H_r.interface("laya.ui.IRender"),H_r.interface("laya.ui.IComponent"),H_r.interface("laya.ui.IBox","IComponent");var H_C=function(){function H_a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return H_f(H_a,"laya.ui.LayoutStyle"),H_d(H_a,["EMPTY",function(){return this.EMPTY=new H_a}]),H_a}(),H_D=function(){function H_a(){}return H_f(H_a,"laya.ui.Styles"),H_a.labelColor="#000000",H_a.buttonStateNum=3,H_a.scrollBarMinNum=15,H_a.scrollBarDelayTime=500,H_d(H_a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),H_a}(),H_E=function(){function H_e(){}return H_f(H_e,"laya.ui.UIUtils"),H_e.fillArray=function(H_a,H_b,H_c){var H_d=H_a.concat();if(H_b)for(var H_e=H_b.split(","),H_f=0,H_g=Math.min(H_d.length,H_e.length);H_f<H_g;H_f++){var H_h=H_e[H_f];H_d[H_f]="true"==H_h||"false"!=H_h&&H_h,null!=H_c&&(H_d[H_f]=H_c(H_h))}return H_d},H_e.toColor=function(H_a){return H_A.toHexColor(H_a)},H_e.gray=function(H_a,H_b){void 0===H_b&&(H_b=!0),H_b?H_e.addFilter(H_a,H_e.grayFilter):H_e.clearFilter(H_a,H_h)},H_e.addFilter=function(H_a,H_b){var H_c=H_a.filters||[];H_c.push(H_b),H_a.filters=H_c},H_e.clearFilter=function(H_a,H_b){var H_c=H_a.filters;if(null!=H_c&&0<H_c.length){for(var H_d=H_c.length-1;-1<H_d;H_d--){var H_e=H_c[H_d];H_r.__typeof(H_e,H_b)&&H_c.splice(H_d,1)}H_a.filters=H_c}},H_e._getReplaceStr=function(H_a){return H_e.escapeSequence[H_a]},H_e.adptString=function(H_a){return H_a.replace(/\\(\w)/g,H_e._getReplaceStr)},H_e.getBindFun=function(H_a){var H_b=H_e._funMap.get(H_a);if(null==H_b){var H_c='"'+H_a+'"',H_d="(function(data){if(data==null)return;with(data){try{\nreturn "+(H_c=H_c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";H_b=H_r._runScript(H_d),H_e._funMap.set(H_a,H_b)}return H_b},H_d(H_e,["grayFilter",function(){return this.grayFilter=new H_h([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new H_B}]),H_e}(),H_F=function(){function H_a(){}return H_f(H_a,"UIConfig"),H_a.touchScrollEnable=!0,H_a.mouseWheelEnable=!0,H_a.showButtons=!0,H_a.popupBgColor="#000000",H_a.popupBgAlpha=.5,H_a.closeDialogOnSide=!0,H_a}(),H_G=function(H_c){function H_t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,H_t.__super.call(this),this._weakKeys=[]}H_f(H_t,"laya.ui.AutoBitmap",H_c);var H_a=H_t.prototype;return H_a.destroy=function(){if(H_u.clearObject(this,this._weakKey),this._weakKeys){for(var H_a=0,H_b=this._weakKeys.length;H_a<H_b;++H_a)H_u.clearObject(this,this._weakKeys[H_a]);this._weakKeys=null}H_c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},H_a._setChanged=function(){this._isChanged||(this._isChanged=!0,H_r.timer.callLater(this,this.changeSource))},H_a.changeSource=function(){this._isChanged=!1;var H_a=this._source;if(H_a&&H_a.bitmap){var H_b=this.width,H_c=this.height,H_d=this._sizeGrid,H_e=H_a.sourceWidth,H_f=H_a.sourceHeight;if(!H_d||H_e===H_b&&H_f===H_c)this.cleanByTexture(H_a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,H_b,H_c);else{H_u.clearObject(this,this._weakKey),H_a.$_GID||(H_a.$_GID=H_A.getGID());var H_g=H_a.$_GID+"."+H_b+"."+H_c+"."+H_d.join("."),H_h=H_u.findObject(H_g);if(H_A.isOKCmdList(H_h))return this._weakKey=H_g,H_u.keepObject(this,this._weakKey),void(this.cmds=H_h);this.clear();var H_i,H_j,H_k=H_d[0],H_l=H_d[1],H_m=H_d[2],H_n=H_d[3],H_q=H_d[4],H_r=!1;if(H_b==H_e&&(H_n=H_l=0),H_c==H_f&&(H_k=H_m=0),H_b<H_n+H_l){var H_s=H_b;H_r=!0,H_b=H_n+H_l,this.save(),this.clipRect(0,0,H_s,H_c)}H_n&&H_k&&(H_i=H_t.getTexture(H_a,0,0,H_n,H_k),H_j=this._weakKeys[0],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[0]=H_i.weakKey),this.drawTexture(H_i,0,0,H_n,H_k)):(H_u.clearObject(this,H_j),this._weakKeys[0]="")),H_l&&H_k&&(H_i=H_t.getTexture(H_a,H_e-H_l,0,H_l,H_k),H_j=this._weakKeys[1],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[1]=H_i.weakKey),this.drawTexture(H_i,H_b-H_l,0,H_l,H_k)):(H_u.clearObject(this,H_j),this._weakKeys[1]="")),H_n&&H_m&&(H_i=H_t.getTexture(H_a,0,H_f-H_m,H_n,H_m),H_j=this._weakKeys[2],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[2]=H_i.weakKey),this.drawTexture(H_i,0,H_c-H_m,H_n,H_m)):(H_u.clearObject(this,H_j),this._weakKeys[2]="")),H_l&&H_m&&(H_i=H_t.getTexture(H_a,H_e-H_l,H_f-H_m,H_l,H_m),H_j=this._weakKeys[3],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[3]=H_i.weakKey),this.drawTexture(H_i,H_b-H_l,H_c-H_m,H_l,H_m)):(H_u.clearObject(this,H_j),this._weakKeys[3]="")),H_k&&(H_i=H_t.getTexture(H_a,H_n,0,H_e-H_n-H_l,H_k),H_j=this._weakKeys[4],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[4]=H_i.weakKey),this.drawBitmap(H_q,H_i,H_n,0,H_b-H_n-H_l,H_k)):(H_u.clearObject(this,H_j),this._weakKeys[4]="")),H_m&&(H_i=H_t.getTexture(H_a,H_n,H_f-H_m,H_e-H_n-H_l,H_m),H_j=this._weakKeys[5],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[5]=H_i.weakKey),this.drawBitmap(H_q,H_i,H_n,H_c-H_m,H_b-H_n-H_l,H_m)):(H_u.clearObject(this,H_j),this._weakKeys[5]="")),H_n&&(H_i=H_t.getTexture(H_a,0,H_k,H_n,H_f-H_k-H_m),H_j=this._weakKeys[6],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[6]=H_i.weakKey),this.drawBitmap(H_q,H_i,0,H_k,H_n,H_c-H_k-H_m)):(H_u.clearObject(this,H_j),this._weakKeys[6]="")),H_l&&(H_i=H_t.getTexture(H_a,H_e-H_l,H_k,H_l,H_f-H_k-H_m),H_j=this._weakKeys[7],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[7]=H_i.weakKey),this.drawBitmap(H_q,H_i,H_b-H_l,H_k,H_l,H_c-H_k-H_m)):(H_u.clearObject(this,H_j),this._weakKeys[7]="")),H_i=H_t.getTexture(H_a,H_n,H_k,H_e-H_n-H_l,H_f-H_k-H_m),H_j=this._weakKeys[8],H_i?(H_j!=H_i.weakKey&&(H_u.clearObject(this,H_j),H_u.keepObject(this,H_i.weakKey),this._weakKeys[8]=H_i.weakKey),this.drawBitmap(H_q,H_i,H_n,H_k,H_b-H_n-H_l,H_c-H_k-H_m)):(H_u.clearObject(this,H_j),this._weakKeys[8]=""),H_r&&this.restore(),this.autoCacheCmd&&!H_v.isConchApp&&(H_u.saveObject(H_g,this.cmds,null),this._weakKey=H_g,H_u.keepObject(this,this._weakKey))}this._repaint()}},H_a.drawBitmap=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=0),H_e<.1||H_f<.1||(!H_a||H_b.width==H_e&&H_b.height==H_f?this.drawTexture(H_b,H_c,H_d,H_e,H_f):this.fillTexture(H_b,H_c,H_d,H_e,H_f))},H_a.clear=function(H_a){void 0===H_a&&(H_a=!0),H_c.prototype.clear.call(this,!1)},H_g(0,H_a,"sizeGrid",function(){return this._sizeGrid},function(H_a){this._sizeGrid=H_a,this._setChanged()}),H_g(0,H_a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(H_a){this._width!=H_a&&(this._width=H_a,this._setChanged())}),H_g(0,H_a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(H_a){this._height!=H_a&&(this._height=H_a,this._setChanged())}),H_g(0,H_a,"source",function(){return this._source},function(H_a){H_a?(this._source=H_a,this._setChanged()):(this._source=null,this.clear())}),H_t.getTexture=function(H_a,H_b,H_c,H_d,H_e){H_d<=0&&(H_d=1),H_e<=0&&(H_e=1),H_a.$_GID||(H_a.$_GID=H_A.getGID());var H_f=H_a.$_GID+"."+H_b+"."+H_c+"."+H_d+"."+H_e,H_g=H_u.findObject(H_f);if((!H_g||!H_g.source)&&(H_g=H_y.createFromTexture(H_a,H_b,H_c,H_d,H_e))){if(H_a.alphaTexture){var H_h=H_a.width/H_a.alphaTexture.width;H_g.alphaTexture=H_y.createFromTexture(H_a.alphaTexture,H_b/H_h,H_c/H_h,H_d/H_h,H_e/H_h)}H_u.saveObject(H_f,H_g),H_g.weakKey=H_f}return H_g},H_t}(H_b),H_H=(function(H_a){function H_b(){H_b.__super.call(this)}H_f(H_b,"laya.ui.UIEvent",H_j),H_b.SHOW_TIP="showtip",H_b.HIDE_TIP="hidetip"}(),function(H_b){function H_a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,H_a.__super.call(this),this._layout=H_C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}H_f(H_a,"laya.ui.Component",H_b);var H_c=H_a.prototype;return H_r.imps(H_c,{"laya.ui.IComponent":!0}),H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},H_c.preinitialize=function(){},H_c.createChildren=function(){},H_c.initialize=function(){},H_c.callLater=function(H_a,H_b){H_r.timer.callLater(this,H_a,H_b)},H_c.runCallLater=function(H_a){H_r.timer.runCallLater(this,H_a)},H_c.commitMeasure=function(){},H_c.changeSize=function(){this.event("resize")},H_c.getLayout=function(){return this._layout===H_C.EMPTY&&(this._layout=new H_C),this._layout},H_c._setLayoutEnabled=function(H_a){this._layout&&this._layout.enable!=H_a&&(this._layout.enable=H_a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},H_c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},H_c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},H_c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},H_c.resetLayoutX=function(){var H_a=this._layout;if(isNaN(H_a.anchorX)||(this.pivotX=H_a.anchorX*this.width),this.layoutEnabled){var H_b=this.parent;H_b&&(isNaN(H_a.centerX)?isNaN(H_a.left)?isNaN(H_a.right)||(this.x=Math.round(H_b.width-this.displayWidth-H_a.right+this.pivotX*this.scaleX)):(this.x=Math.round(H_a.left+this.pivotX*this.scaleX),isNaN(H_a.right)||(this.width=(H_b._width-H_a.left-H_a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(H_b.width-this.displayWidth)+H_a.centerX+this.pivotX*this.scaleX))}},H_c.resetLayoutY=function(){var H_a=this._layout;if(isNaN(H_a.anchorY)||(this.pivotY=H_a.anchorY*this.height),this.layoutEnabled){var H_b=this.parent;H_b&&(isNaN(H_a.centerY)?isNaN(H_a.top)?isNaN(H_a.bottom)||(this.y=Math.round(H_b.height-this.displayHeight-H_a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(H_a.top+this.pivotY*this.scaleY),isNaN(H_a.bottom)||(this.height=(H_b._height-H_a.top-H_a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(H_b.height-this.displayHeight)+H_a.centerY+this.pivotY*this.scaleY))}},H_c.onMouseOver=function(H_a){H_r.stage.event("showtip",this._toolTip)},H_c.onMouseOut=function(H_a){H_r.stage.event("hidetip",this._toolTip)},H_g(0,H_c,"displayWidth",function(){return this.width*this.scaleX}),H_g(0,H_c,"width",function(){return this._width?this._width:this.measureWidth},function(H_a){this._width!=H_a&&(this._width=H_a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),H_g(0,H_c,"measureWidth",function(){var H_a=0;this.commitMeasure();for(var H_b=this.numChildren-1;-1<H_b;H_b--){var H_c=this.getChildAt(H_b);H_c.visible&&(H_a=Math.max(H_c.x+H_c.width*H_c.scaleX,H_a))}return H_a}),H_g(0,H_c,"displayHeight",function(){return this.height*this.scaleY}),H_g(0,H_c,"height",function(){return this._height?this._height:this.measureHeight},function(H_a){this._height!=H_a&&(this._height=H_a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),H_g(0,H_c,"dataSource",function(){return this._dataSource},function(H_a){for(var H_b in this._dataSource=H_a,this._dataSource)this.hasOwnProperty(H_b)&&"function"!=typeof this[H_b]&&(this[H_b]=this._dataSource[H_b])}),H_g(0,H_c,"scaleY",H_b.prototype._$get_scaleY,function(H_a){H_r.superGet(H_w,this,"scaleY")!=H_a&&(H_r.superSet(H_w,this,"scaleY",H_a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),H_g(0,H_c,"measureHeight",function(){var H_a=0;this.commitMeasure();for(var H_b=this.numChildren-1;-1<H_b;H_b--){var H_c=this.getChildAt(H_b);H_c.visible&&(H_a=Math.max(H_c.y+H_c.height*H_c.scaleY,H_a))}return H_a}),H_g(0,H_c,"scaleX",H_b.prototype._$get_scaleX,function(H_a){H_r.superGet(H_w,this,"scaleX")!=H_a&&(H_r.superSet(H_w,this,"scaleX",H_a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),H_g(0,H_c,"top",function(){return this._layout.top},function(H_a){H_a!=this._layout.top&&(this.getLayout().top=H_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H_g(0,H_c,"bottom",function(){return this._layout.bottom},function(H_a){H_a!=this._layout.bottom&&(this.getLayout().bottom=H_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H_g(0,H_c,"left",function(){return this._layout.left},function(H_a){H_a!=this._layout.left&&(this.getLayout().left=H_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H_g(0,H_c,"right",function(){return this._layout.right},function(H_a){H_a!=this._layout.right&&(this.getLayout().right=H_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H_g(0,H_c,"centerX",function(){return this._layout.centerX},function(H_a){H_a!=this._layout.centerX&&(this.getLayout().centerX=H_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H_g(0,H_c,"centerY",function(){return this._layout.centerY},function(H_a){H_a!=this._layout.centerY&&(this.getLayout().centerY=H_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H_g(0,H_c,"anchorX",function(){return this._layout.anchorX},function(H_a){H_a!=this._layout.anchorX&&(this.getLayout().anchorX=H_a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H_g(0,H_c,"anchorY",function(){return this._layout.anchorY},function(H_a){H_a!=this._layout.anchorY&&(this.getLayout().anchorY=H_a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H_g(0,H_c,"tag",function(){return this._tag},function(H_a){this._tag=H_a}),H_g(0,H_c,"toolTip",function(){return this._toolTip},function(H_a){this._toolTip!=H_a&&(null!=(this._toolTip=H_a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),H_g(0,H_c,"comXml",function(){return this._comXml},function(H_a){this._comXml=H_a}),H_g(0,H_c,"gray",function(){return this._gray},function(H_a){H_a!==this._gray&&(this._gray=H_a,H_E.gray(this,H_a))}),H_g(0,H_c,"disabled",function(){return this._disabled},function(H_a){H_a!==this._disabled&&(this.gray=this._disabled=H_a,this.mouseEnabled=!H_a)}),H_a}(H_w)),H_I=function(H_a){function H_b(){this.lockLayer=null,this.popupEffect=function(H_a){H_a.scale(1,1),H_z.from(H_a,{x:H_r.stage.width/2,y:H_r.stage.height/2,scaleX:0,scaleY:0},300,H_i.backOut,H_m.create(this,this.doOpen,[H_a]))},this.closeEffect=function(H_a,H_b){H_z.to(H_a,{x:H_r.stage.width/2,y:H_r.stage.height/2,scaleX:0,scaleY:0},300,H_i.strongOut,H_m.create(this,this.doClose,[H_a,H_b]))},H_b.__super.call(this),this.maskLayer=new H_w,this.popupEffectHandler=H_m.create(this,this.popupEffect,null,!1),this.closeEffectHandler=H_m.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,H_r.stage.addChild(this),H_r.stage.on("resize",this,this._onResize),H_F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}H_f(H_b,"laya.ui.DialogManager",H_w);var H_c=H_b.prototype;return H_c._closeOnSide=function(){var H_a=this.getChildAt(this.numChildren-1);H_a instanceof laya.ui.Dialog&&H_a.close("side")},H_c.setLockView=function(H_a){this.lockLayer||(this.lockLayer=new H_J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(H_r.stage.width,H_r.stage.height)),this.lockLayer.removeChildren(),H_a&&(H_a.centerX=H_a.centerY=0,this.lockLayer.addChild(H_a))},H_c._onResize=function(H_a){var H_b=this.maskLayer.width=H_r.stage.width,H_c=this.maskLayer.height=H_r.stage.height;this.lockLayer&&this.lockLayer.size(H_b,H_c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,H_b,H_c,H_F.popupBgColor),this.maskLayer.alpha=H_F.popupBgAlpha;for(var H_d=this.numChildren-1;-1<H_d;H_d--){var H_e=this.getChildAt(H_d);H_e.popupCenter&&this._centerDialog(H_e)}},H_c._centerDialog=function(H_a){H_a.x=Math.round((H_r.stage.width-H_a.width>>1)+H_a.pivotX),H_a.y=Math.round((H_r.stage.height-H_a.height>>1)+H_a.pivotY)},H_c.open=function(H_a,H_b,H_c){void 0===H_b&&(H_b=!1),void 0===H_c&&(H_c=!1),H_b&&this._closeAll(),H_a.popupCenter&&this._centerDialog(H_a),this.addChild(H_a),(H_a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),H_c&&null!=H_a.popupEffect?H_a.popupEffect.runWith(H_a):this.doOpen(H_a),this.event("open")},H_c.doOpen=function(H_a){H_a.onOpened()},H_c.lock=function(H_a){this.lockLayer&&(H_a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},H_c.close=function(H_a,H_b,H_c){void 0===H_c&&(H_c=!1),H_c&&null!=H_a.closeEffect?H_a.closeEffect.runWith([H_a,H_b]):this.doClose(H_a,H_b),this.event("close")},H_c.doClose=function(H_a,H_b){H_a.removeSelf(),H_a.isModal&&this._checkMask(),H_a.closeHandler&&H_a.closeHandler.runWith(H_b),H_a.onClosed(H_b)},H_c.closeAll=function(){this._closeAll(),this.event("close")},H_c._closeAll=function(){for(var H_a=this.numChildren-1;-1<H_a;H_a--){var H_b=this.getChildAt(H_a);H_b&&null!=H_b.close&&this.doClose(H_b)}},H_c.getDialogsByGroup=function(H_a){for(var H_b=[],H_c=this.numChildren-1;-1<H_c;H_c--){var H_d=this.getChildAt(H_c);H_d&&H_d.group===H_a&&H_b.push(H_d)}return H_b},H_c.closeByGroup=function(H_a){for(var H_b=[],H_c=this.numChildren-1;-1<H_c;H_c--){var H_d=this.getChildAt(H_c);H_d&&H_d.group===H_a&&(H_d.close(),H_b.push(H_d))}return H_b},H_c._checkMask=function(){this.maskLayer.removeSelf();for(var H_a=this.numChildren-1;-1<H_a;H_a--){var H_b=this.getChildAt(H_a);if(H_b&&H_b.isModal)return void this.addChildAt(this.maskLayer,H_a)}},H_b}(),H_J=function(H_a){function H_b(){H_b.__super.call(this)}H_f(H_b,"laya.ui.Box",H_a);var H_c=H_b.prototype;return H_r.imps(H_c,{"laya.ui.IBox":!0}),H_g(0,H_c,"dataSource",H_a.prototype._$get_dataSource,function(H_a){for(var H_b in this._dataSource=H_a){var H_c=this.getChildByName(H_b);H_c?H_c.dataSource=H_a[H_b]:this.hasOwnProperty(H_b)&&"function"!=typeof this[H_b]&&(this[H_b]=H_a[H_b])}}),H_b}(H_H),H_K=function(H_b){function H_c(H_a,H_b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,H_c.__super.call(this),this._labelColors=H_D.buttonLabelColors,this._stateNum=H_D.buttonStateNum,void 0===H_b&&(H_b=""),this.skin=H_a,this.label=H_b}H_f(H_c,"laya.ui.Button",H_b);var H_a=H_c.prototype;return H_r.imps(H_a,{"laya.ui.ISelect":!0}),H_a.destroy=function(H_a){this.clearEvent(),H_u.clearCache(this,this._skin),H_u.clearObject(this,this._weakKey),void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(H_a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},H_a.clearEvent=function(){this._skin&&H_e.atalsNotify&&H_e.atalsNotify.off(this._skin,this,this._setBtnSource)},H_a.createChildren=function(){this.graphics=this._bitmap=new H_G},H_a.createText=function(){this._text||(this._text=new H_x,this._text.overflow=H_x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},H_a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},H_a.onMouse=function(H_a){if(!1!==this.toggle||!this._selected)return"click"===H_a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=H_c.stateMap[H_a.type]))},H_a.changeClips=function(){var H_a=H_u.getRes(this._skin);if(H_a)if(this._skin&&""!=this._skin){H_u.clearObject(this,this._weakKey);var H_b=H_a.sourceWidth,H_c=H_a.sourceHeight/this._stateNum;H_a.$_GID||(H_a.$_GID=H_A.getGID());var H_d=H_a.$_GID+"-"+this._stateNum,H_e=H_u.findObject(H_d);if(H_A.isOkTextureList(H_e)||(H_e=null),H_e)this._weakKey=H_d,H_u.keepObject(this,this._weakKey),this._sources=H_e;else{if(this._sources=[],1===this._stateNum)this._sources.push(H_a);else for(var H_f=0;H_f<this._stateNum;H_f++){var H_g=H_y.createFromTexture(H_a,0,H_c*H_f,H_b,H_c);if(H_a.alphaTexture){var H_h=H_a.width/H_a.alphaTexture.width;H_g.alphaTexture=H_y.createFromTexture(H_a.alphaTexture,0/H_h,H_c*H_f/H_h,H_b/H_h,H_c/H_h)}this._sources.push(H_g)}H_u.saveObject(H_d,this._sources),this._weakKey=H_d,H_u.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||H_b,this._bitmap.height=this._height||H_c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=H_b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},H_a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var H_a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[H_a]),this.label&&(this._text.color=this._labelColors[H_a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[H_a]))},H_a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},H_g(0,H_a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(H_a){this.createText(),this._text.strokeColor=H_a}),H_g(0,H_a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){if(this._skin!=H_a)if(this.clearEvent(),H_u.clearCache(this,this._skin),this._skin=H_a,H_u.keepCache(this,this._skin),H_u.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var H_b=H_e.resAtalsObj&&H_e.resAtalsObj[this._skin];H_b?(H_e.atalsNotify&&H_e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=H_b.sourceW),0==this.height&&(this.height=H_b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),H_a._setBtnSource=function(H_a,H_b){H_a===this._skin&&H_b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},H_g(0,H_a,"state",function(){return this._state},function(H_a){this._state!=H_a&&(this._state=H_a,this._setStateChanged())}),H_g(0,H_a,"text",function(){return this.createText(),this._text}),H_g(0,H_a,"stateNum",function(){return this._stateNum},function(H_a){"string"==typeof H_a&&(H_a=parseInt(H_a)),this._stateNum!=H_a&&(this._stateNum=H_a<1?1:3<H_a?3:H_a,this.callLater(this.changeClips))}),H_g(0,H_a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(H_a){this._strokeColors=H_E.fillArray(H_D.buttonLabelColors,H_a,String),this._setStateChanged()}),H_g(0,H_a,"labelColors",function(){return this._labelColors.join(",")},function(H_a){this._labelColors=H_E.fillArray(H_D.buttonLabelColors,H_a,String),this._setStateChanged()}),H_g(0,H_a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),H_g(0,H_a,"label",function(){return this._text?this._text.text:null},function(H_a){(this._text||H_a)&&(this.createText(),this._text.text!=H_a&&(H_a&&!this._text.parent&&this.addChild(this._text),this._text.text=(H_a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),H_g(0,H_a,"selected",function(){return this._selected},function(H_a){this._selected!=H_a&&(this._selected=H_a,this.state=this._selected?2:0,this.event("change"))}),H_g(0,H_a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(H_a){this.createText(),this._text.padding=H_E.fillArray(H_D.labelPadding,H_a,Number)}),H_g(0,H_a,"labelSize",function(){return this.createText(),this._text.fontSize},function(H_a){this.createText(),this._text.fontSize=H_a}),H_g(0,H_a,"labelStroke",function(){return this.createText(),this._text.stroke},function(H_a){this.createText(),this._text.stroke=H_a}),H_g(0,H_a,"labelBold",function(){return this.createText(),this._text.bold},function(H_a){this.createText(),this._text.bold=H_a}),H_g(0,H_a,"labelFont",function(){return this.createText(),this._text.font},function(H_a){this.createText(),this._text.font=H_a}),H_g(0,H_a,"labelAlign",function(){return this.createText(),this._text.align},function(H_a){this.createText(),this._text.align=H_a}),H_g(0,H_a,"clickHandler",function(){return this._clickHandler},function(H_a){this._clickHandler=H_a}),H_g(0,H_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H_a){this._bitmap.sizeGrid=H_E.fillArray(H_D.defaultSizeGrid,H_a,Number)}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_H,this,"width",H_a),this._autoSize&&(this._bitmap.width=H_a,this._text&&(this._text.width=H_a))}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_H,this,"height",H_a),this._autoSize&&(this._bitmap.height=H_a,this._text&&(this._text.height=H_a))}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)||"string"==typeof H_a?this.label=H_a+"":H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(H_a){this._bitmap._offset=H_a?H_E.fillArray([1,1],H_a,Number):[]}),H_d(H_c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),H_c}(H_H),H_L=function(H_b){function H_d(H_a,H_b,H_c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,H_d.__super.call(this),void 0===H_b&&(H_b=1),void 0===H_c&&(H_c=1),this._clipX=H_b,this._clipY=H_c,this.skin=H_a}H_f(H_d,"laya.ui.Clip",H_b);var H_a=H_d.prototype;return H_a.destroy=function(H_a){this.clearEvent(),this.clearLoad(),H_u.clearCache(this,this._skin),H_u.clearObject(this,this._weakKey),void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},H_a.dispose=function(){this.destroy(!0),H_r.loader.clearRes(this._skin)},H_a.createChildren=function(){this.graphics=this._bitmap=new H_G},H_a._onDisplay=function(H_a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},H_a.changeClip=function(){if(this._clipChanged=!1,this._skin){var H_a=H_u.getRes(this._skin);if(H_a)this.loadComplete(this._skin,H_a);else{if(H_e.resAtalsObj&&H_e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=H_m.create(this,this.loadComplete,[this._skin]),this._progress=null,H_r.loader.load(this._skin,this._complete,this._progress)}}},H_a.loadComplete=function(H_a,H_b){if(H_a===this._skin&&H_b){H_u.clearObject(this,this._weakKey);var H_c=this._clipWidth||Math.ceil(H_b.sourceWidth/this._clipX),H_d=this._clipHeight||Math.ceil(H_b.sourceHeight/this._clipY),H_e=this._skin+H_c+H_d,H_f=H_u.findObject(H_e);if(H_A.isOkTextureList(H_f)||(H_f=null),H_f)this._weakKey=H_e,H_u.keepObject(this,this._weakKey),this._sources=H_f;else{this._sources=[];for(var H_g=0;H_g<this._clipY;H_g++)for(var H_h=0;H_h<this._clipX;H_h++){var H_i=H_y.createFromTexture(H_b,H_c*H_h,H_d*H_g,H_c,H_d);if(H_b.alphaTexture){var H_j=H_b.width/H_b.alphaTexture.width;H_i.alphaTexture=H_y.createFromTexture(H_b.alphaTexture,H_c*H_h/H_j,H_d*H_g/H_j,H_c/H_j,H_d/H_j)}this._sources.push(H_i)}H_u.saveObject(H_e,this._sources),this._weakKey=H_e,H_u.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},H_a.play=function(H_a,H_b){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=-1),this._isPlaying=!0,this.index=H_a,this._toIndex=H_b,this._index++,H_r.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},H_a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},H_a.stop=function(){this._isPlaying=!1,H_r.timer.clear(this,this._loop),this.event("complete")},H_a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},H_g(0,H_a,"interval",function(){return this._interval},function(H_a){this._interval!=H_a&&(this._interval=H_a,this._isPlaying&&this.play())}),H_a.clearEvent=function(){this._skin&&H_e.atalsNotify&&H_e.atalsNotify.off(this._skin,this,this._setBtnSource)},H_a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H_r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H_g(0,H_a,"skin",function(){return this._skin},function(H_a){if(this._skin!=H_a)if(this.clearLoad(),this.clearEvent(),H_u.clearCache(this,this._skin),this._skin=H_a){H_u.keepCache(this,this._skin);var H_b=H_u.getRes(H_a),H_c=H_e.resAtalsObj&&H_e.resAtalsObj[this._skin];!H_b&&H_c?H_e.atalsNotify&&H_e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),H_a._setBtnSource=function(H_a,H_b){H_a===this._skin&&H_b&&(this.loadComplete(H_a,H_b),this.clearEvent())},H_g(0,H_a,"sources",function(){return this._sources},function(H_a){this._sources=H_a,this.index=this._index,this.event("loaded")}),H_g(0,H_a,"clipX",function(){return this._clipX},function(H_a){this._clipX=H_a||1,this._setClipChanged()}),H_g(0,H_a,"clipY",function(){return this._clipY},function(H_a){this._clipY=H_a||1,this._setClipChanged()}),H_g(0,H_a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),H_g(0,H_a,"clipWidth",function(){return this._clipWidth},function(H_a){this._clipWidth=H_a,this._setClipChanged()}),H_g(0,H_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H_a){this._bitmap.sizeGrid=H_E.fillArray(H_D.defaultSizeGrid,H_a,Number)}),H_g(0,H_a,"group",function(){return this._group},function(H_a){H_a&&this._skin&&H_u.setGroup(this._skin,H_a),this._group=H_a}),H_g(0,H_a,"clipHeight",function(){return this._clipHeight},function(H_a){this._clipHeight=H_a,this._setClipChanged()}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_H,this,"width",H_a),this._bitmap.width=H_a}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_H,this,"height",H_a),this._bitmap.height=H_a}),H_g(0,H_a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),H_g(0,H_a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),H_g(0,H_a,"index",function(){return this._index},function(H_a){this._index=H_a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[H_a]),this.event("change")}),H_g(0,H_a,"autoPlay",function(){return this._autoPlay},function(H_a){this._autoPlay!=H_a&&((this._autoPlay=H_a)?this.play():this.stop())}),H_g(0,H_a,"isPlaying",function(){return this._isPlaying},function(H_a){this._isPlaying=H_a}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)&&Math.floor(H_a)==H_a||"string"==typeof H_a?this.index=parseInt(H_a):H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"bitmap",function(){return this._bitmap}),H_d}(H_H),H_M=function(H_b){function H_a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,H_a.__super.call(this)}H_f(H_a,"laya.ui.ColorPicker",H_b);var H_c=H_a.prototype;return H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._colorPanel&&this._colorPanel.destroy(H_a),this._colorButton&&this._colorButton.destroy(H_a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},H_c.createChildren=function(){this.addChild(this._colorButton=new H_K),this._colorPanel=new H_J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new H_w),this._colorPanel.addChild(this._colorBlock=new H_w),this._colorPanel.addChild(this._colorInput=new H_n)},H_c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},H_c.onPanelMouseDown=function(H_a){H_a.stopPropagation()},H_c.changePanel=function(){this._panelChanged=!1;var H_a=this._colorPanel.graphics;H_a.clear(),H_a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(H_a=this._colorTiles.graphics).clear();for(var H_b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],H_c=0;H_c<12;H_c++)for(var H_d=0;H_d<20;H_d++){var H_e=0;H_e=0===H_d?H_b[H_c]:1===H_d?0:51*(((3*H_c+H_d/6)%3<<0)+3*(H_c/6<<0))<<16|H_d%6*51<<8|(H_c<<0)%6*51;var H_f=H_E.toColor(H_e);this._colors.push(H_f);var H_g=H_d*this._gridSize,H_h=H_c*this._gridSize;H_a.drawRect(H_g,H_h,this._gridSize,this._gridSize,H_f,"#000000")}},H_c.onColorButtonClick=function(H_a){this._colorPanel.parent?this.close():this.open()},H_c.open=function(){var H_a=this.localToGlobal(new H_q),H_b=H_a.x+this._colorPanel.width<=H_r.stage.width?H_a.x:H_r.stage.width-this._colorPanel.width,H_c=H_a.y+this._colorButton.height;H_c=H_c+this._colorPanel.height<=H_r.stage.height?H_c:H_a.y-this._colorPanel.height,this._colorPanel.pos(H_b,H_c),this._colorPanel.zOrder=1001,H_r._currentStage.addChild(this._colorPanel),H_r.stage.on("mousedown",this,this.removeColorBox)},H_c.close=function(){H_r.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},H_c.removeColorBox=function(H_a){this.close()},H_c.onColorFieldKeyDown=function(H_a){13==H_a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),H_a.stopPropagation())},H_c.onColorInputChange=function(H_a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},H_c.onColorTilesClick=function(H_a){this.selectedColor=this.getColorByMouse(),this.close()},H_c.onColorTilesMouseMove=function(H_a){this._colorInput.focus=!1;var H_b=this.getColorByMouse();this._colorInput.text=H_b,this.drawBlock(H_b)},H_c.getColorByMouse=function(){var H_a=this._colorTiles.getMousePoint(),H_b=Math.floor(H_a.x/this._gridSize),H_c=Math.floor(H_a.y/this._gridSize);return this._colors[20*H_c+H_b]},H_c.drawBlock=function(H_a){var H_b=this._colorBlock.graphics;H_b.clear();var H_c=H_a||"#ffffff";H_b.drawRect(0,0,50,20,H_c,this._borderColor),H_a||H_b.drawLine(0,0,50,20,"#ff0000")},H_c.changeColor=function(){var H_a=this.graphics;H_a.clear();var H_b=this._selectedColor||"#000000";H_a.drawRect(0,0,this._colorButton.width,this._colorButton.height,H_b)},H_c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},H_g(0,H_c,"inputBgColor",function(){return this._inputBgColor},function(H_a){this._inputBgColor=H_a,this._setPanelChanged()}),H_g(0,H_c,"selectedColor",function(){return this._selectedColor},function(H_a){this._selectedColor!=H_a&&(this._selectedColor=this._colorInput.text=H_a,this.drawBlock(H_a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",H_j.EMPTY.setTo("change",this,this)))}),H_g(0,H_c,"skin",function(){return this._colorButton.skin},function(H_a){this._colorButton.skin=H_a,this.changeColor()}),H_g(0,H_c,"bgColor",function(){return this._bgColor},function(H_a){this._bgColor=H_a,this._setPanelChanged()}),H_g(0,H_c,"borderColor",function(){return this._borderColor},function(H_a){this._borderColor=H_a,this._setPanelChanged()}),H_g(0,H_c,"inputColor",function(){return this._inputColor},function(H_a){this._inputColor=H_a,this._setPanelChanged()}),H_a}(H_H),H_N=function(H_b){function H_c(H_a,H_b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,H_c.__super.call(this),this._itemColors=H_D.comboBoxItemColors,this.skin=H_a,this.labels=H_b}H_f(H_c,"laya.ui.ComboBox",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._button&&this._button.destroy(H_a),this._list&&this._list.destroy(H_a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},H_a.createChildren=function(){this.addChild(this._button=new H_K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},H_a._createList=function(){this._list=new H_X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},H_a._setListEvent=function(H_a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=H_m.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},H_a.onListDown=function(H_a){H_a.stopPropagation()},H_a.onScrollBarDown=function(H_a){H_a.stopPropagation()},H_a.onButtonMouseDown=function(H_a){this.callLater(this.switchTo,[!this._isOpen])},H_a.changeList=function(){this._listChanged=!1;var H_a=this.width-2,H_b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:H_a,height:this._itemHeight,fontSize:this._itemSize,color:H_b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},H_a.onlistItemMouse=function(H_a,H_b){var H_c=H_a.type;if("mouseover"===H_c||"mouseout"===H_c){if(this._isCustomList)return;var H_d=this._list.getCell(H_b);if(!H_d)return;var H_e=H_d.getChildByName("label");H_e&&("mouseover"===H_c?(H_e.bgColor=this._itemColors[0],H_e.color=this._itemColors[1]):(H_e.bgColor=null,H_e.color=this._itemColors[2]))}else"click"===H_c&&(this.selectedIndex=H_b,this.isOpen=!1)},H_a.switchTo=function(H_a){this.isOpen=H_a},H_a.changeOpen=function(){this.isOpen=!this._isOpen},H_a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var H_a=this._list.graphics;H_a.clear(),H_a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var H_b=this._list.array||[],H_c=H_b.length=0,H_d=this._labels.length;H_c<H_d;H_c++)H_b.push({label:this._labels[H_c]});this._list.height=this._listHeight,this._list.array=H_b},H_a.changeSelected=function(){this._button.label=this.selectedLabel},H_a._onStageMouseWheel=function(H_a){this._list&&!this._list.contains(H_a.target)&&this.removeList(null)},H_a.removeList=function(H_a){H_r.stage.off("mousedown",this,this.removeList),H_r.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},H_g(0,H_a,"selectedIndex",function(){return this._selectedIndex},function(H_a){this._selectedIndex!=H_a&&(this._selectedIndex=H_a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[H_j.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),H_g(0,H_a,"measureHeight",function(){return this._button.height}),H_g(0,H_a,"skin",function(){return this._button.skin},function(H_a){this._button.skin!=H_a&&(this._button.skin=H_a,this._listChanged=!0)}),H_g(0,H_a,"measureWidth",function(){return this._button.width}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_H,this,"width",H_a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),H_g(0,H_a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(H_a){this.selectedIndex=this._labels.indexOf(H_a)}),H_g(0,H_a,"labels",function(){return this._labels.join(",")},function(H_a){0<this._labels.length&&(this.selectedIndex=-1),H_a?this._labels=H_a.split(","):this._labels.length=0,this._itemChanged=!0}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_H,this,"height",H_a),this._button.height=this._height}),H_g(0,H_a,"selectHandler",function(){return this._selectHandler},function(H_a){this._selectHandler=H_a}),H_g(0,H_a,"visibleNum",function(){return this._visibleNum},function(H_a){this._visibleNum=H_a,this._listChanged=!0}),H_g(0,H_a,"labelBold",function(){return this._button.text.bold},function(H_a){this._button.text.bold=H_a}),H_g(0,H_a,"itemColors",function(){return String(this._itemColors)},function(H_a){this._itemColors=H_E.fillArray(this._itemColors,H_a,String),this._listChanged=!0}),H_g(0,H_a,"itemSize",function(){return this._itemSize},function(H_a){this._itemSize=H_a,this._listChanged=!0}),H_g(0,H_a,"scrollBar",function(){return this.list.scrollBar}),H_g(0,H_a,"isOpen",function(){return this._isOpen},function(H_a){if(this._isOpen!=H_a)if(this._isOpen=H_a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var H_b=this.localToGlobal(H_q.TEMP.setTo(0,0)),H_c=H_b.y+this._button.height;H_c=H_c+this._listHeight<=H_r.stage.height?H_c:H_b.y-this._listHeight,this._list.pos(H_b.x,H_c),this._list.zOrder=1001,H_r._currentStage.addChild(this._list),H_r.stage.once("mousedown",this,this.removeList),H_r.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),H_g(0,H_a,"scrollBarSkin",function(){return this._scrollBarSkin},function(H_a){this._scrollBarSkin=H_a}),H_g(0,H_a,"sizeGrid",function(){return this._button.sizeGrid},function(H_a){this._button.sizeGrid=H_a}),H_g(0,H_a,"button",function(){return this._button}),H_g(0,H_a,"list",function(){return this._list||this._createList(),this._list},function(H_a){H_a&&(H_a.removeSelf(),this._isCustomList=!0,this._list=H_a,this._setListEvent(H_a),this._itemHeight=H_a.getCell(0).height+H_a.spaceY)}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)&&Math.floor(H_a)==H_a||"string"==typeof H_a?this.selectedIndex=parseInt(H_a):H_a instanceof Array?this.labels=H_a.join(","):H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"labelColors",function(){return this._button.labelColors},function(H_a){this._button.labelColors!=H_a&&(this._button.labelColors=H_a)}),H_g(0,H_a,"labelPadding",function(){return this._button.text.padding.join(",")},function(H_a){this._button.text.padding=H_E.fillArray(H_D.labelPadding,H_a,Number)}),H_g(0,H_a,"labelSize",function(){return this._button.text.fontSize},function(H_a){this._button.text.fontSize=H_a}),H_g(0,H_a,"labelFont",function(){return this._button.text.font},function(H_a){this._button.text.font=H_a}),H_g(0,H_a,"stateNum",function(){return this._button.stateNum},function(H_a){this._button.stateNum=H_a}),H_c}(H_H),H_O=function(H_b){function H_c(H_a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,H_c.__super.call(this),this._showButtons=H_F.showButtons,this._touchScrollEnable=H_F.touchScrollEnable,this._mouseWheelEnable=H_F.mouseWheelEnable,this.skin=H_a,this.max=1}H_f(H_c,"laya.ui.ScrollBar",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),this.stopScroll(),this.target=null,H_b.prototype.destroy.call(this,H_a),this.upButton&&this.upButton.destroy(H_a),this.downButton&&this.downButton.destroy(H_a),this.slider&&this.slider.destroy(H_a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},H_a.createChildren=function(){this.addChild(this.slider=new H_P),this.addChild(this.upButton=new H_K),this.addChild(this.downButton=new H_K)},H_a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},H_a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},H_a.onButtonMouseDown=function(H_a){var H_b=H_a.currentTarget===this.upButton;this.slide(H_b),H_r.timer.once(H_D.scrollBarDelayTime,this,this.startLoop,[H_b]),H_r.stage.once("mouseup",this,this.onStageMouseUp)},H_a.startLoop=function(H_a){H_r.timer.frameLoop(1,this,this.slide,[H_a])},H_a.slide=function(H_a){H_a?this.value-=this._scrollSize:this.value+=this._scrollSize},H_a.onStageMouseUp=function(H_a){H_r.timer.clear(this,this.startLoop),H_r.timer.clear(this,this.slide)},H_a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},H_a.changeSize=function(){H_b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},H_a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},H_a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},H_a.setScroll=function(H_a,H_b,H_c){this.runCallLater(this.changeSize),this.slider.setSlider(H_a,H_b,H_c),this.slider.bar.visible=0<H_b,!this._hide&&this.autoHide&&(this.visible=!1)},H_a.onTargetMouseWheel=function(H_a){this.value-=H_a.delta*this._scrollSize,this.target=this._target},H_a.onTargetMouseDown=function(H_a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new H_q),this._lastPoint.setTo(H_r.stage.mouseX,H_r.stage.mouseY),H_r.timer.clear(this,this.tweenMove),H_z.clearTween(this),H_r.stage.once("mouseup",this,this.onStageMouseUp2),H_r.stage.once("mouseout",this,this.onStageMouseUp2),H_r.timer.frameLoop(1,this,this.loop)},H_a.loop=function(){var H_a=H_r.stage.mouseY,H_b=H_r.stage.mouseX;if(this._lastOffset=this.isVertical?H_a-this._lastPoint.y:H_b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?H_r.stage._canvasTransform.getScaleY():H_r.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=H_b,this._lastPoint.y=H_a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},H_a.onStageMouseUp2=function(H_a){if(H_r.stage.off("mouseup",this,this.onStageMouseUp2),H_r.stage.off("mouseout",this,this.onStageMouseUp2),H_r.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?H_z.to(this,{value:this.min},this.elasticBackTime,H_i.sineOut,H_m.create(this,this.elasticOver)):this._value>this.max&&H_z.to(this,{value:this.max},this.elasticBackTime,H_i.sineOut,H_m.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?H_r.stage.mouseY-this._lastPoint.y:H_r.stage.mouseX-this._lastPoint.x);for(var H_b=0,H_c=Math.min(this._offsets.length,3),H_d=0;H_d<H_c;H_d++)H_b+=this._offsets[this._offsets.length-1-H_d];if(this._lastOffset=H_b/H_c,(H_b=Math.abs(this._lastOffset))<2)return void this.event("end");60<H_b&&(this._lastOffset=0<this._lastOffset?60:-60);var H_e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));H_r.timer.frameLoop(1,this,this.tweenMove,[H_e])}},H_a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&H_z.to(this,{alpha:0},500),this.event("end")},H_a.tweenMove=function(H_a){this._lastOffset*=this.rollRatio;var H_b=NaN;if(0<H_a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,H_b=.5*-(this.min-H_a-this.value),this._lastOffset>H_b&&(this._lastOffset=H_b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,H_b=.5*-(this.max+H_a-this.value),this._lastOffset<H_b&&(this._lastOffset=H_b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(H_r.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?H_z.to(this,{value:this.min},this.elasticBackTime,H_i.sineOut,H_m.create(this,this.elasticOver)):this._value>this.max?H_z.to(this,{value:this.max},this.elasticBackTime,H_i.sineOut,H_m.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&H_z.to(this,{alpha:0},500)}},H_a.stopScroll=function(){this.onStageMouseUp2(null),H_r.timer.clear(this,this.tweenMove),H_z.clearTween(this)},H_g(0,H_a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){this._skin!=H_a&&(this._skin=H_a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),H_g(0,H_a,"max",function(){return this.slider.max},function(H_a){this.slider.max=H_a}),H_g(0,H_a,"showButtons",function(){return this._showButtons},function(H_a){this._showButtons=H_a,this.callLater(this.changeScrollBar)}),H_g(0,H_a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),H_g(0,H_a,"min",function(){return this.slider.min},function(H_a){this.slider.min=H_a}),H_g(0,H_a,"value",function(){return this._value},function(H_a){H_a!==this._value&&(this._value=H_a,this._isElastic||(this.slider._value!=H_a&&(this.slider._value=H_a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),H_g(0,H_a,"isVertical",function(){return this.slider.isVertical},function(H_a){this.slider.isVertical=H_a}),H_g(0,H_a,"sizeGrid",function(){return this.slider.sizeGrid},function(H_a){this.slider.sizeGrid=H_a}),H_g(0,H_a,"scrollSize",function(){return this._scrollSize},function(H_a){this._scrollSize=H_a}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)||"string"==typeof H_a?this.value=Number(H_a):H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"thumbPercent",function(){return this._thumbPercent},function(H_a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),H_a=1<=H_a?.99:H_a,this._thumbPercent=H_a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*H_a,H_D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*H_a,H_D.scrollBarMinNum))}),H_g(0,H_a,"target",function(){return this._target},function(H_a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=H_a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),H_g(0,H_a,"hide",function(){return this._hide},function(H_a){this._hide=H_a,this.visible=!H_a}),H_g(0,H_a,"touchScrollEnable",function(){return this._touchScrollEnable},function(H_a){this._touchScrollEnable=H_a,this.target=this._target}),H_g(0,H_a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(H_a){this._mouseWheelEnable=H_a,this.target=this._target}),H_g(0,H_a,"tick",function(){return this.slider.tick},function(H_a){this.slider.tick=H_a}),H_c}(H_H),H_P=function(H_b){function H_c(H_a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,H_c.__super.call(this),this.skin=H_a}H_f(H_c,"laya.ui.Slider",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._bg&&this._bg.destroy(H_a),this._bar&&this._bar.destroy(H_a),this._progress&&this._progress.destroy(H_a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},H_a.createChildren=function(){this.addChild(this._bg=new H_Q),this.addChild(this._bar=new H_K)},H_a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},H_a.onBarMouseDown=function(H_a){this._globalSacle||(this._globalSacle=new H_q),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=H_r.stage.mouseX,this._ty=H_r.stage.mouseY,H_r.stage.on("mousemove",this,this.mouseMove),H_r.stage.once("mouseup",this,this.mouseUp),H_r.stage.once("mouseout",this,this.mouseUp),this.showValueText()},H_a.showValueText=function(){if(this.showLabel){var H_a=laya.ui.Slider.label;this.addChild(H_a),H_a.textField.changeText(this._value+""),this.isVertical?(H_a.x=this._bar.x+20,H_a.y=.5*(this._bar.height-H_a.height)+this._bar.y):(H_a.y=this._bar.y-20,H_a.x=.5*(this._bar.width-H_a.width)+this._bar.x)}},H_a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},H_a.mouseUp=function(H_a){H_r.stage.off("mousemove",this,this.mouseMove),H_r.stage.off("mouseup",this,this.mouseUp),H_r.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},H_a.mouseMove=function(H_a){var H_b=this._value;this.isVertical?(this._bar.y+=(H_r.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(H_r.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=H_r.stage.mouseX,this._ty=H_r.stage.mouseY;var H_c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H_c)/H_c,this._value!=H_b&&this.sendChangeEvent(),this.showValueText()},H_a.sendChangeEvent=function(H_a){void 0===H_a&&(H_a="change"),this.event(H_a),this.changeHandler&&this.changeHandler.runWith(this._value)},H_a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},H_a.changeSize=function(){H_b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},H_a.setSlider=function(H_a,H_b,H_c){this._value=-1,this._min=H_a,this._max=H_a<H_b?H_b:H_a,this.value=H_c<H_a?H_a:H_b<H_c?H_b:H_c},H_a.changeValue=function(){var H_a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H_a)/H_a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var H_b=this._max-this._min;0===H_b&&(H_b=1),this.isVertical?(this._bar.y=(this._value-this._min)/H_b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/H_b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},H_a.onBgMouseDown=function(H_a){var H_b=this._bg.getMousePoint();this.isVertical?this.value=H_b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=H_b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},H_g(0,H_a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){if(this._skin!=H_a){this._skin=H_a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var H_b=this._skin.replace(".png","$progress.png");H_u.getRes(H_b)&&(this._progress||(this.addChild(this._progress=new H_Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=H_b),this.setBarPoint(),this.callLater(this.changeValue)}}),H_g(0,H_a,"allowClickBack",function(){return this._allowClickBack},function(H_a){this._allowClickBack!=H_a&&((this._allowClickBack=H_a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),H_g(0,H_a,"max",function(){return this._max},function(H_a){this._max!=H_a&&(this._max=H_a,this.callLater(this.changeValue))}),H_g(0,H_a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),H_g(0,H_a,"tick",function(){return this._tick},function(H_a){this._tick!=H_a&&(this._tick=H_a,this.callLater(this.changeValue))}),H_g(0,H_a,"sizeGrid",function(){return this._bg.sizeGrid},function(H_a){this._bg.sizeGrid=H_a,this._bar.sizeGrid=H_a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),H_g(0,H_a,"min",function(){return this._min},function(H_a){this._min!=H_a&&(this._min=H_a,this.callLater(this.changeValue))}),H_g(0,H_a,"value",function(){return this._value},function(H_a){if(this._value!=H_a){var H_b=this._value;this._value=H_a,this.changeValue(),this._value!=H_b&&this.sendChangeEvent()}}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)||"string"==typeof H_a?this.value=Number(H_a):H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"bar",function(){return this._bar}),H_d(H_c,["label",function(){return this.label=new H_R}]),H_c}(H_H),H_Q=function(H_b){function H_c(H_a){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,H_c.__super.call(this),this.skin=H_a}H_f(H_c,"laya.ui.Image",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,H_u.clearCache(this,this._skin)},H_a.dispose=function(){this.destroy(!0),H_u.clearCache(this,this._skin),this.clearEvent()},H_a.createChildren=function(){this.graphics=this._bitmap=new H_G},H_a.setSource=function(H_a,H_b){H_a===this._skin&&H_b&&(this.source=H_b,this.onCompResize(),this.clearEvent())},H_a.clearEvent=function(){this._skin&&H_e.atalsNotify&&H_e.atalsNotify.off(this._skin,this,this.setSource)},H_a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H_r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H_g(0,H_a,"source",function(){return this._bitmap.source},function(H_a){this._bitmap&&(this._bitmap.source=H_a,this.event("loaded"),this.repaint())}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"string"==typeof(this._dataSource=H_a)?this.skin=H_a:H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"measureHeight",function(){return this._bitmap.height}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){if(this._skin!=H_a)if(H_u.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=H_a){H_u.keepCache(this,this._skin);var H_b=H_u.getRes(H_a),H_c=H_e.resAtalsObj&&H_e.resAtalsObj[this._skin];H_b?(this.source=H_b,this.onCompResize()):H_c?(H_e.atalsNotify&&H_e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=H_c.sourceW),0==this.height&&(this.height=H_c.sourceH)):(this._complete=H_m.create(this,this.setSource,[this._skin]),this._progress=null,H_r.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),H_g(0,H_a,"group",function(){return this._group},function(H_a){H_a&&this._skin&&H_u.setGroup(this._skin,H_a),this._group=H_a}),H_g(0,H_a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H_a){this._bitmap.sizeGrid=H_E.fillArray(H_D.defaultSizeGrid,H_a,Number)}),H_g(0,H_a,"measureWidth",function(){return this._bitmap.width}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_H,this,"width",H_a),this._bitmap.width=0==H_a?1e-7:H_a}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_H,this,"height",H_a),this._bitmap.height=0==H_a?1e-7:H_a}),H_c}(H_H),H_R=function(H_b){function H_c(H_a){this._tf=null,H_c.__super.call(this),void 0===H_a&&(H_a=""),H_k.defaultColor=H_D.labelColor,this.text=H_a}H_f(H_c,"laya.ui.Label",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._tf=null},H_a.createChildren=function(){this.addChild(this._tf=new H_x)},H_a.changeText=function(H_a){this._tf.changeText(H_a)},H_g(0,H_a,"padding",function(){return this._tf.padding.join(",")},function(H_a){this._tf.padding=H_E.fillArray(H_D.labelPadding,H_a,Number)}),H_g(0,H_a,"bold",function(){return this._tf.bold},function(H_a){this._tf.bold=H_a}),H_g(0,H_a,"align",function(){return this._tf.align},function(H_a){this._tf.align=H_a}),H_g(0,H_a,"text",function(){return this._tf.text},function(H_a){this._tf.text!=H_a&&(H_a&&(H_a=H_E.adptString(H_a+"")),this._tf.text=H_a,this.event("change"),this._width&&this._height||this.onCompResize())}),H_g(0,H_a,"italic",function(){return this._tf.italic},function(H_a){this._tf.italic=H_a}),H_g(0,H_a,"wordWrap",function(){return this._tf.wordWrap},function(H_a){this._tf.wordWrap=H_a}),H_g(0,H_a,"font",function(){return this._tf.font},function(H_a){this._tf.font=H_a}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)||"string"==typeof H_a?this.text=H_a+"":H_r.superSet(H_H,this,"dataSource",H_a)}),H_g(0,H_a,"color",function(){return this._tf.color},function(H_a){this._tf.color=H_a}),H_g(0,H_a,"valign",function(){return this._tf.valign},function(H_a){this._tf.valign=H_a}),H_g(0,H_a,"leading",function(){return this._tf.leading},function(H_a){this._tf.leading=H_a}),H_g(0,H_a,"fontSize",function(){return this._tf.fontSize},function(H_a){this._tf.fontSize=H_a}),H_g(0,H_a,"bgColor",function(){return this._tf.bgColor},function(H_a){this._tf.bgColor=H_a}),H_g(0,H_a,"borderColor",function(){return this._tf.borderColor},function(H_a){this._tf.borderColor=H_a}),H_g(0,H_a,"stroke",function(){return this._tf.stroke},function(H_a){this._tf.stroke=H_a}),H_g(0,H_a,"strokeColor",function(){return this._tf.strokeColor},function(H_a){this._tf.strokeColor=H_a}),H_g(0,H_a,"textField",function(){return this._tf}),H_g(0,H_a,"measureWidth",function(){return this._tf.width}),H_g(0,H_a,"measureHeight",function(){return this._tf.height}),H_g(0,H_a,"width",function(){return this._width||this._tf.text?H_r.superGet(H_H,this,"width"):0},function(H_a){H_r.superSet(H_H,this,"width",H_a),this._tf.width=H_a}),H_g(0,H_a,"height",function(){return this._height||this._tf.text?H_r.superGet(H_H,this,"height"):0},function(H_a){H_r.superSet(H_H,this,"height",H_a),this._tf.height=H_a}),H_g(0,H_a,"overflow",function(){return this._tf.overflow},function(H_a){this._tf.overflow=H_a}),H_g(0,H_a,"underline",function(){return this._tf.underline},function(H_a){this._tf.underline=H_a}),H_g(0,H_a,"underlineColor",function(){return this._tf.underlineColor},function(H_a){this._tf.underlineColor=H_a}),H_c}(H_H),H_S=function(H_b){function H_c(H_a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,H_c.__super.call(this),this.skin=H_a}H_f(H_c,"laya.ui.ProgressBar",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._bg&&this._bg.destroy(H_a),this._bar&&this._bar.destroy(H_a),this._bg=this._bar=null,this.changeHandler=null},H_a.createChildren=function(){this.addChild(this._bg=new H_Q),this.addChild(this._bar=new H_Q)},H_a.changeValue=function(){if(this.sizeGrid){var H_a=this.sizeGrid.split(","),H_b=Number(H_a[3]),H_c=Number(H_a[1]),H_d=(this.width-H_b-H_c)*this._value;this._bar.width=H_b+H_c+H_d,this._bar.visible=this._bar.width>H_b+H_c}else this._bar.width=this.width*this._value},H_g(0,H_a,"measureHeight",function(){return this._bg.height}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){this._skin!=H_a&&(this._skin=H_a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),H_g(0,H_a,"measureWidth",function(){return this._bg.width}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_H,this,"height",H_a),this._bg.height=this._height,this._bar.height=this._height}),H_g(0,H_a,"bar",function(){return this._bar}),H_g(0,H_a,"value",function(){return this._value},function(H_a){this._value!=H_a&&(H_a=1<H_a?1:H_a<0?0:H_a,this._value=H_a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(H_a))}),H_g(0,H_a,"bg",function(){return this._bg}),H_g(0,H_a,"sizeGrid",function(){return this._bg.sizeGrid},function(H_a){this._bg.sizeGrid=this._bar.sizeGrid=H_a}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_H,this,"width",H_a),this._bg.width=this._width,this.callLater(this.changeValue)}),H_g(0,H_a,"dataSource",H_b.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)||"string"==typeof H_a?this.value=Number(H_a):H_r.superSet(H_H,this,"dataSource",H_a)}),H_c}(H_H),H_T=(function(H_a){function H_c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,H_c.__super.call(this),this._tipBox=new H_H,this._tipBox.addChild(this._tipText=new H_x),this._tipText.x=this._tipText.y=5,this._tipText.color=H_c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,H_r.stage.on("showtip",this,this._onStageShowTip),H_r.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}H_f(H_c,"laya.ui.TipManager",H_H);var H_b=H_c.prototype;H_b._onStageHideTip=function(H_a){H_r.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},H_b._onStageShowTip=function(H_a){H_r.timer.once(H_c.tipDelay,this,this._showTip,[H_a],!0)},H_b._showTip=function(H_a){if("string"==typeof H_a){var H_b=String(H_a);Boolean(H_b)&&this._defaultTipHandler(H_b)}else H_a instanceof laya.utils.Handler?H_a.run():"function"==typeof H_a&&H_a.apply();H_r.stage.on("mousemove",this,this._onStageMouseMove),H_r.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},H_b._onStageMouseDown=function(H_a){this.closeAll()},H_b._onStageMouseMove=function(H_a){this._showToStage(this,H_c.offsetX,H_c.offsetY)},H_b._showToStage=function(H_a,H_b,H_c){void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0);var H_d=H_a.getBounds();H_a.x=H_r.stage.mouseX+H_b,H_a.y=H_r.stage.mouseY+H_c,H_a.x+H_d.width>H_r.stage.width&&(H_a.x-=H_d.width+H_b),H_a.y+H_d.height>H_r.stage.height&&(H_a.y-=H_d.height+H_c)},H_b.closeAll=function(){H_r.timer.clear(this,this._showTip),H_r.stage.off("mousemove",this,this._onStageMouseMove),H_r.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},H_b.showDislayTip=function(H_a){this.addChild(H_a),this._showToStage(this),H_r._currentStage.addChild(this)},H_b._showDefaultTip=function(H_a){this._tipText.text=H_a;var H_b=this._tipBox.graphics;H_b.clear(),H_b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,H_c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),H_r._currentStage.addChild(this)},H_g(0,H_b,"defaultTipHandler",function(){return this._defaultTipHandler},function(H_a){this._defaultTipHandler=H_a}),H_c.offsetX=10,H_c.offsetY=15,H_c.tipTextColor="#ffffff",H_c.tipBackColor="#111111",H_c.tipDelay=200}(),function(H_a){var H_n;function H_q(){this._idMap=null,this._aniList=null,this._watchMap={},H_q.__super.call(this)}H_f(H_q,"laya.ui.View",H_J);var H_b=H_q.prototype;return H_b.createView=function(H_a){if(H_a.animations&&!this._idMap&&(this._idMap={}),H_q.createComp(H_a,this,this),H_a.animations){var H_b,H_c,H_d=[],H_e=H_a.animations,H_f=0,H_g=H_e.length;for(H_f=0;H_f<H_g;H_f++){switch(H_b=new H_l,H_c=H_e[H_f],H_b._setUp(this._idMap,H_c),(this[H_c.name]=H_b)._setControlNode(this),H_c.action){case 1:H_b.play(0,!1);break;case 2:H_b.play(0,!0)}H_d.push(H_b)}this._aniList=H_d}0<this._width&&null==H_a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},H_b.onEvent=function(H_a,H_b){},H_b.loadUI=function(H_a){var H_b=H_q.uiMap[H_a];H_b&&this.createView(H_b)},H_b.destroy=function(H_a){void 0===H_a&&(H_a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,H_a)},H_b.changeData=function(H_a){var H_b=this._watchMap[H_a];if(H_b){console.log("change",H_a);for(var H_c=0,H_d=H_b.length;H_c<H_d;H_c++){H_b[H_c].exe(this)}}},H_q._regs=function(){for(var H_a in H_q.uiClassMap)H_s.regClass(H_a,H_q.uiClassMap[H_a])},H_q.createComp=function(H_a,H_b,H_c,H_d){if(!(H_b=H_b||H_q.getCompInstance(H_a)))return console.warn("can not create:"+H_a.type),null;var H_e=H_a.child;if(H_e)for(var H_f=H_b instanceof laya.ui.List,H_g=0,H_h=H_e.length;H_g<H_h;H_g++){var H_i=H_e[H_g];if(!H_b.hasOwnProperty("itemRender")||"render"!=H_i.props.name&&"render"!==H_i.props.renderType)if("Graphic"==H_i.type)H_s.addGraphicsToSprite(H_i,H_b);else if(H_s.isDrawType(H_i.type))H_s.addGraphicToSprite(H_i,H_b,!0);else{if(H_f){var H_j=[],H_k=H_q.createComp(H_i,null,H_c,H_j);H_j.length&&(H_k._$bindData=H_j)}else H_k=H_q.createComp(H_i,null,H_c,H_d);"Script"==H_i.type?"owner"in H_k?H_k.owner=H_b:"target"in H_k&&(H_k.target=H_b):"mask"==H_i.props.renderType||"mask"==H_i.props.name?H_b.mask=H_k:H_k instanceof laya.display.Sprite&&H_b.addChild(H_k)}else H_b.itemRender=H_i}var H_l=H_a.props;for(var H_m in H_l){var H_n=H_l[H_m];H_q.eventDic[H_m]?H_n&&H_c&&H_b.on(H_m,H_c,H_c.onEvent,[H_n]):H_q.setCompValue(H_b,H_m,H_n,H_c,H_d)}return H_r.__typeof(H_b,"laya.ui.IItem")&&H_b.initItems(),H_a.compId&&H_c&&H_c._idMap&&(H_c._idMap[H_a.compId]=H_b),H_b},H_q.setCompValue=function(H_a,H_b,H_c,H_d,H_e){if("string"==typeof H_c&&-1<H_c.indexOf("${")){if(H_q._sheet||(H_q._sheet=H_s.getClass("laya.data.Table")),!H_q._sheet)return void console.warn("Can not find class Sheet");if(H_e)H_e.push(H_a,H_b,H_c);else if(H_d){-1==H_c.indexOf("].")&&(H_c=H_c.replace(".","[0]."));var H_f,H_g,H_h=new H_n(H_a,H_b,H_c);H_h.exe(H_d);for(var H_i=H_c.replace(/\[.*?\]\./g,".");null!=(H_f=H_q._parseWatchData.exec(H_i));){for(var H_j=H_f[1];null!=(H_g=H_q._parseKeyWord.exec(H_j));){var H_k=H_g[0],H_l=H_d._watchMap[H_k]||(H_d._watchMap[H_k]=[]);H_l.push(H_h),H_q._sheet.I.notifer.on(H_k,H_d,H_d.changeData,[H_k])}(H_l=H_d._watchMap[H_j]||(H_d._watchMap[H_j]=[])).push(H_h),H_q._sheet.I.notifer.on(H_j,H_d,H_d.changeData,[H_j])}}}else if("var"===H_b&&H_d)H_d[H_c]=H_a;else if("onClick"==H_b){var H_m=H_r._runScript("(function(){"+H_c+"})");H_a.on("click",H_d,H_m)}else H_a[H_b]="true"===H_c||"false"!==H_c&&H_c},H_q.getCompInstance=function(H_a){var H_b,H_c=H_a.props?H_a.props.runtime:null;return H_b=H_c?H_q.viewClassMap[H_c]||H_q.uiClassMap[H_c]||H_r.__classmap[H_c]:H_q.uiClassMap[H_a.type],H_a.props&&H_a.props.hasOwnProperty("renderType")&&"instance"==H_a.props.renderType?H_b.instance:H_b?new H_b:null},H_q.regComponent=function(H_a,H_b){H_q.uiClassMap[H_a]=H_b,H_s.regClass(H_a,H_b)},H_q.regViewRuntime=function(H_a,H_b){H_q.viewClassMap[H_a]=H_b},H_q.uiMap={},H_q.viewClassMap={},H_q._sheet=null,H_d(H_q,["uiClassMap",function(){return this.uiClassMap={ViewStack:H_aa,LinkButton:H_K,TextArea:H_ja,ColorPicker:H_M,Box:H_J,Button:H_K,CheckBox:H_U,Clip:H_L,ComboBox:H_N,Component:H_H,HScrollBar:H_Y,HSlider:H_$,Image:H_Q,Label:H_R,List:H_X,Panel:H_Z,ProgressBar:H_S,Radio:H_o,RadioGroup:H_ha,ScrollBar:H_O,Slider:H_P,Tab:H_ia,TextInput:H_ca,View:H_q,VScrollBar:H_ba,VSlider:H_da,Tree:H_p,HBox:H_fa,VBox:H_ga,Sprite:H_w,Animation:H_c,Text:H_x,FontClip:H_W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),H_q.__init$=function(){H_q._regs(),H_n=function(){function H_a(H_a,H_b,H_c){this.comp=null,this.prop=null,this.value=null,this.comp=H_a,this.prop=H_b,this.value=H_c}return H_f(H_a,""),H_a.prototype.exe=function(H_a){var H_b=H_E.getBindFun(this.value);this.comp[this.prop]=H_b.call(this,H_a)},H_a}()},H_q}()),H_U=function(H_a){function H_c(H_a,H_b){void 0===H_b&&(H_b=""),H_c.__super.call(this,H_a,H_b)}H_f(H_c,"laya.ui.CheckBox",H_a);var H_b=H_c.prototype;return H_b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},H_b.initialize=function(){H_a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},H_g(0,H_b,"dataSource",H_a.prototype._$get_dataSource,function(H_a){"boolean"==typeof(this._dataSource=H_a)?this.selected=H_a:"string"==typeof H_a?this.selected="true"===H_a:H_r.superSet(H_K,this,"dataSource",H_a)}),H_c}(H_K),H_V=function(H_a){function H_b(){this._space=0,this._align="none",this._itemChanged=!1,H_b.__super.call(this)}H_f(H_b,"laya.ui.LayoutBox",H_J);var H_c=H_b.prototype;return H_c.addChild=function(H_a){return H_a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,H_a)},H_c.onResize=function(H_a){this._setItemChanged()},H_c.addChildAt=function(H_a,H_b){return H_a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,H_a,H_b)},H_c.removeChild=function(H_a){return H_a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,H_a)},H_c.removeChildAt=function(H_a){return this.getChildAt(H_a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,H_a)},H_c.refresh=function(){this._setItemChanged()},H_c.changeItems=function(){this._itemChanged=!1},H_c.sortItem=function(H_a){H_a&&H_a.sort(function(H_a,H_b){return H_a.y-H_b.y})},H_c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},H_g(0,H_c,"space",function(){return this._space},function(H_a){this._space=H_a,this._setItemChanged()}),H_g(0,H_c,"align",function(){return this._align},function(H_a){this._align=H_a,this._setItemChanged()}),H_b}(),H_W=function(H_b){function H_c(H_a,H_b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,H_c.__super.call(this),H_a&&(this.skin=H_a),H_b&&(this.sheet=H_b)}H_f(H_c,"laya.ui.FontClip",H_b);var H_a=H_c.prototype;return H_a.createChildren=function(){this._bitmap=new H_G,this.on("loaded",this,this._onClipLoaded)},H_a._onClipLoaded=function(){this.callLater(this.changeValue)},H_a.changeValue=function(){var H_a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),H_a=this._sources[0]))){var H_b="horizontal"===this._direction;H_b?(this._wordsW=this._valueArr.length*(H_a.sourceWidth+this.spaceX),this._wordsH=H_a.sourceHeight):(this._wordsW=H_a.sourceWidth,this._wordsH=(H_a.sourceHeight+this.spaceY)*this._valueArr.length);var H_c=0;if(this._width)switch(this._align){case"center":H_c=.5*(this._width-this._wordsW);break;case"right":H_c=this._width-this._wordsW;break;default:H_c=0}for(var H_d=0,H_e=this._valueArr.length;H_d<H_e;H_d++){var H_f=this._indexMap[this._valueArr.charAt(H_d)];this.sources[H_f]&&(H_a=this.sources[H_f],H_b?this.graphics.drawTexture(H_a,H_c+H_d*(H_a.sourceWidth+this.spaceX),0,H_a.sourceWidth,H_a.sourceHeight):this.graphics.drawTexture(H_a,0+H_c,H_d*(H_a.sourceHeight+this.spaceY),H_a.sourceWidth,H_a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),H_b.prototype.destroy.call(this,H_a)},H_g(0,H_a,"sheet",function(){return this._sheet},function(H_a){H_a+="";var H_b=(this._sheet=H_a).split(" ");this._clipX=String(H_b[0]).length,this.clipY=H_b.length,this._indexMap={};for(var H_c=0;H_c<this._clipY;H_c++)for(var H_d=H_b[H_c].split(""),H_e=0,H_f=H_d.length;H_e<H_f;H_e++)this._indexMap[H_d[H_e]]=H_c*this._clipX+H_e}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_L,this,"height",H_a),this.callLater(this.changeValue)}),H_g(0,H_a,"direction",function(){return this._direction},function(H_a){this._direction=H_a,this.callLater(this.changeValue)}),H_g(0,H_a,"value",function(){return this._valueArr?this._valueArr:""},function(H_a){H_a+="",this._valueArr=H_a,this.callLater(this.changeValue)}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_L,this,"width",H_a),this.callLater(this.changeValue)}),H_g(0,H_a,"spaceX",function(){return this._spaceX},function(H_a){this._spaceX=H_a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),H_g(0,H_a,"spaceY",function(){return this._spaceY},function(H_a){this._spaceY=H_a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),H_g(0,H_a,"align",function(){return this._align},function(H_a){this._align=H_a,this.callLater(this.changeValue)}),H_g(0,H_a,"measureWidth",function(){return this._wordsW}),H_g(0,H_a,"measureHeight",function(){return this._wordsH}),H_c}(H_L),H_X=function(H_a){function H_b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new H_q,H_b.__super.call(this)}H_f(H_b,"laya.ui.List",H_a);var H_c=H_b.prototype;return H_r.imps(H_c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),this._content&&this._content.destroy(H_a),this._scrollBar&&this._scrollBar.destroy(H_a),laya.ui.Component.prototype.destroy.call(this,H_a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},H_c.createChildren=function(){this.addChild(this._content=new H_J)},H_c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H_r.superGet(H_J,this,"cacheAs")),H_r.superSet(H_J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},H_c.onScrollEnd=function(){H_r.superSet(H_J,this,"cacheAs",this._$P.cacheAs)},H_c._removePreScrollBar=function(){var H_a=this.removeChildByName("scrollBar");H_a&&H_a.destroy(!0)},H_c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var H_a=this._getOneCell(),H_b=H_a.width+this._spaceX||1,H_c=H_a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/H_b):Math.ceil(this._width/H_b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/H_c):Math.round(this._height/H_c));var H_d=this._width?this._width:H_b*this.repeatX-this._spaceX,H_e=this._height?this._height:H_c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?H_c:H_b,this._cellOffset=this._isVertical?H_c*Math.max(this._repeatY2,this._repeatY)-H_e-this._spaceY:H_b*Math.max(this._repeatX2,this._repeatX)-H_d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=H_e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=H_d),this.setContentSize(H_d,H_e);var H_f=this._isVertical?this.repeatX:this.repeatY,H_g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,H_f,H_g),this._createdLine=H_g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},H_c._getOneCell=function(){if(0===this._cells.length){var H_a=this.createItem();if(this._offset.setTo(H_a.x,H_a.y),this.cacheContent)return H_a;this._cells.push(H_a)}return this._cells[0]},H_c._createItems=function(H_a,H_b,H_c){var H_d=this._content,H_e=this._getOneCell(),H_f=H_e.width+this._spaceX,H_g=H_e.height+this._spaceY;if(this.cacheContent){var H_h=new H_J;H_h.cacheAsBitmap=!0,H_h.pos((this._isVertical?0:H_a)*H_f,(this._isVertical?H_a:0)*H_g),this._content.addChild(H_h),this._content.optimizeScrollRect=!0,H_d=H_h}else{for(var H_i=[],H_j=this._cells.length-1;-1<H_j;H_j--){var H_k=this._cells[H_j];H_k.removeSelf(),H_i.push(H_k)}this._cells.length=0}for(var H_l=H_a;H_l<H_c;H_l++)for(var H_m=0;H_m<H_b;H_m++)(H_e=H_i&&H_i.length?H_i.pop():this.createItem()).x=(this._isVertical?H_m:H_l)*H_f-H_d.x,H_e.y=(this._isVertical?H_l:H_m)*H_g-H_d.y,H_e.name="item"+(H_l*H_b+H_m),H_d.addChild(H_e),this.addCell(H_e)},H_c.createItem=function(){var H_a=[];if("function"==typeof this._itemRender)var H_b=new this._itemRender;else H_b=H_T.createComp(this._itemRender,null,null,H_a);if(0==H_a.length&&H_b._watchMap){var H_c=H_b._watchMap;for(var H_d in H_c)for(var H_e=H_c[H_d],H_f=0;H_f<H_e.length;H_f++){var H_g=H_e[H_f];H_a.push(H_g.comp,H_g.prop,H_g.value)}}return H_a.length&&(H_b._$bindData=H_a),H_b},H_c.addCell=function(H_a){H_a.on("click",this,this.onCellMouse),H_a.on("rightclick",this,this.onCellMouse),H_a.on("mouseover",this,this.onCellMouse),H_a.on("mouseout",this,this.onCellMouse),H_a.on("mousedown",this,this.onCellMouse),H_a.on("mouseup",this,this.onCellMouse),this._cells.push(H_a)},H_c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var H_a=0,H_b=H_a=0;H_b<1e4;H_b++){var H_c=this.getChildByName("item"+H_b);if(!H_c)break;this.addCell(H_c),H_a++}this.repeatY=H_a}},H_c.setContentSize=function(H_a,H_b){this._content.width=H_a,this._content.height=H_b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new H_t),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,H_a,H_b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},H_c.onCellMouse=function(H_a){"mousedown"===H_a.type&&(this._isMoved=!1);var H_b=H_a.currentTarget,H_c=this._startIndex+this._cells.indexOf(H_b);H_c<0||("click"===H_a.type||"rightclick"===H_a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=H_c:this.changeCellState(H_b,!0,0):"mouseover"!==H_a.type&&"mouseout"!==H_a.type||this._selectedIndex===H_c||this.changeCellState(H_b,"mouseover"===H_a.type,0),this.mouseHandler&&this.mouseHandler.runWith([H_a,H_c]))},H_c.changeCellState=function(H_a,H_b,H_c){var H_d=H_a.getChildByName("selectBox");H_d&&(this.selectEnable=!0,H_d.visible=H_b,H_d.index=H_c)},H_c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},H_c.onScrollBarChange=function(H_a){this.runCallLater(this.changeCells);var H_b=this._scrollBar.value,H_c=this._isVertical?this.repeatX:this.repeatY,H_d=this._isVertical?this.repeatY:this.repeatX,H_e=Math.floor(H_b/this._cellSize);if(this.cacheContent)H_g=H_d+1,this._createdLine-H_e<H_g&&(this._createItems(this._createdLine,H_c,this._createdLine+H_g),this.renderItems(this._createdLine*H_c,0),this._createdLine+=H_g);else{var H_f=H_e*H_c,H_g=0;if(H_f>this._startIndex){H_g=H_f-this._startIndex;var H_h=!0,H_i=this._startIndex+H_c*(H_d+1);this._isMoved=!0}else H_f<this._startIndex&&(H_g=this._startIndex-H_f,H_h=!1,H_i=this._startIndex-1,this._isMoved=!0);for(var H_j=0;H_j<H_g;H_j++){if(H_h){var H_k=this._cells.shift();this._cells[this._cells.length]=H_k;var H_l=H_i+H_j}else H_k=this._cells.pop(),this._cells.unshift(H_k),H_l=H_i-H_j;var H_m=Math.floor(H_l/H_c)*this._cellSize;this._isVertical?H_k.y=H_m:H_k.x=H_m,this.renderItem(H_k,H_l)}this._startIndex=H_f,this.changeSelectStatus()}var H_n=this._content.scrollRect;this._isVertical?(H_n.y=H_b-this._offset.y,H_n.x=-this._offset.x):(H_n.y=-this._offset.y,H_n.x=H_b-this._offset.x),this._content.scrollRect=H_n},H_c.posCell=function(H_a,H_b){if(this._scrollBar){var H_c=this._isVertical?this.repeatX:this.repeatY,H_d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(H_b/H_c)*this._cellSize);this._isVertical?H_a.y=H_d:H_a.x=H_d}},H_c.changeSelectStatus=function(){for(var H_a=0,H_b=this._cells.length;H_a<H_b;H_a++)this.changeCellState(this._cells[H_a],this._selectedIndex===this._startIndex+H_a,1)},H_c.renderItems=function(H_a,H_b){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0);for(var H_c=H_a,H_d=H_b||this._cells.length;H_c<H_d;H_c++)this.renderItem(this._cells[H_c],this._startIndex+H_c);this.changeSelectStatus()},H_c.renderItem=function(H_a,H_b){this._array&&0<=H_b&&H_b<this._array.length?(H_a.visible=!0,H_a._$bindData?(H_a._dataSource=this._array[H_b],this._bindData(H_a,this._array[H_b])):H_a.dataSource=this._array[H_b],this.cacheContent||this.posCell(H_a,H_b),this.hasListener("render")&&this.event("render",[H_a,H_b]),this.renderHandler&&this.renderHandler.runWith([H_a,H_b])):(H_a.visible=!1,H_a.dataSource=null)},H_c._bindData=function(H_a,H_b){for(var H_c=H_a._$bindData,H_d=0,H_e=H_c.length;H_d<H_e;H_d++){var H_f=H_c[H_d++],H_g=H_c[H_d++],H_h=H_c[H_d],H_i=H_E.getBindFun(H_h);H_f[H_g]=H_i.call(this,H_b)}},H_c.refresh=function(){this.array=this._array},H_c.getItem=function(H_a){return-1<H_a&&H_a<this._array.length?this._array[H_a]:null},H_c.changeItem=function(H_a,H_b){-1<H_a&&H_a<this._array.length&&(this._array[H_a]=H_b,H_a>=this._startIndex&&H_a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(H_a),H_a))},H_c.setItem=function(H_a,H_b){this.changeItem(H_a,H_b)},H_c.addItem=function(H_a){this._array.push(H_a),this.array=this._array},H_c.addItemAt=function(H_a,H_b){this._array.splice(H_b,0,H_a),this.array=this._array},H_c.deleteItem=function(H_a){this._array.splice(H_a,1),this.array=this._array},H_c.getCell=function(H_a){return this.runCallLater(this.changeCells),-1<H_a&&this._cells?this._cells[(H_a-this._startIndex)%this._cells.length]:null},H_c.scrollTo=function(H_a){if(this._scrollBar){var H_b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(H_a/H_b)*this._cellSize}else this.startIndex=H_a},H_c.tweenTo=function(H_a,H_b,H_c){if(void 0===H_b&&(H_b=200),this._scrollBar){var H_d=this._isVertical?this.repeatX:this.repeatY;H_z.to(this._scrollBar,{value:Math.floor(H_a/H_d)*this._cellSize},H_b,null,H_c,0,!0)}else this.startIndex=H_a,H_c&&H_c.run()},H_c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},H_c.commitMeasure=function(){this.runCallLater(this.changeCells)},H_g(0,H_c,"cacheAs",H_a.prototype._$get_cacheAs,function(H_a){H_r.superSet(H_J,this,"cacheAs",H_a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==H_a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),H_g(0,H_c,"content",function(){return this._content}),H_g(0,H_c,"height",H_a.prototype._$get_height,function(H_a){H_a!=this._height&&(H_r.superSet(H_J,this,"height",H_a),this._setCellChanged())}),H_g(0,H_c,"itemRender",function(){return this._itemRender},function(H_a){if(this._itemRender!=H_a){this._itemRender=H_a;for(var H_b=this._cells.length-1;-1<H_b;H_b--)this._cells[H_b].destroy();this._cells.length=0,this._setCellChanged()}}),H_g(0,H_c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H_a){this._removePreScrollBar();var H_b=new H_ba;H_b.name="scrollBar",H_b.right=0,H_a&&" "!=H_a&&(H_b.skin=H_a),this.scrollBar=H_b,this.addChild(H_b),this._setCellChanged()}),H_g(0,H_c,"page",function(){return this._page},function(H_a){this._page=H_a,this._array&&(this._page=0<H_a?H_a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),H_g(0,H_c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H_a){this._removePreScrollBar();var H_b=new H_Y;H_b.name="scrollBar",H_b.bottom=0,H_a&&" "!=H_a&&(H_b.skin=H_a),this.scrollBar=H_b,this.addChild(H_b),this._setCellChanged()}),H_g(0,H_c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(H_a){this._repeatX=H_a,this._setCellChanged()}),H_g(0,H_c,"scrollBar",function(){return this._scrollBar},function(H_a){this._scrollBar!=H_a&&(this._scrollBar=H_a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),H_g(0,H_c,"width",H_a.prototype._$get_width,function(H_a){H_a!=this._width&&(H_r.superSet(H_J,this,"width",H_a),this._setCellChanged())}),H_g(0,H_c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(H_a){this._repeatY=H_a,this._setCellChanged()}),H_g(0,H_c,"spaceX",function(){return this._spaceX},function(H_a){this._spaceX=H_a,this._setCellChanged()}),H_g(0,H_c,"spaceY",function(){return this._spaceY},function(H_a){this._spaceY=H_a,this._setCellChanged()}),H_g(0,H_c,"selectedIndex",function(){return this._selectedIndex},function(H_a){this._selectedIndex!=H_a&&(this._selectedIndex=H_a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(H_a),this.startIndex=this._startIndex)}),H_g(0,H_c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(H_a){this.selectedIndex=this._array.indexOf(H_a)}),H_g(0,H_c,"length",function(){return this._array?this._array.length:0}),H_g(0,H_c,"selection",function(){return this.getCell(this._selectedIndex)},function(H_a){this.selectedIndex=this._startIndex+this._cells.indexOf(H_a)}),H_g(0,H_c,"startIndex",function(){return this._startIndex},function(H_a){this._startIndex=0<H_a?H_a:0,this.callLater(this.renderItems)}),H_g(0,H_c,"array",function(){return this._array},function(H_a){this.runCallLater(this.changeCells),this._array=H_a||[];var H_b=this._array.length;if(this.totalPage=Math.ceil(H_b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<H_b?this._selectedIndex:H_b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var H_c=this._isVertical?this.repeatX:this.repeatY,H_d=this._isVertical?this.repeatY:this.repeatX,H_e=Math.ceil(H_b/H_c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=H_d/H_e,this._scrollBar.setScroll(0,(H_e-H_d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),H_g(0,H_c,"dataSource",H_a.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)&&Math.floor(H_a)==H_a||"string"==typeof H_a?this.selectedIndex=parseInt(H_a):H_a instanceof Array?this.array=H_a:H_r.superSet(H_J,this,"dataSource",H_a)}),H_g(0,H_c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),H_b}(H_J),H_Y=function(H_a){function H_b(){H_b.__super.call(this)}return H_f(H_b,"laya.ui.HScrollBar",H_a),H_b.prototype.initialize=function(){H_a.prototype.initialize.call(this),this.slider.isVertical=!1},H_b}(H_O),H_Z=function(H_a){function H_b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,H_b.__super.call(this),this.width=this.height=100}H_f(H_b,"laya.ui.Panel",H_a);var H_c=H_b.prototype;return H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),laya.ui.Component.prototype.destroy.call(this,H_a),this._content&&this._content.destroy(H_a),this._vScrollBar&&this._vScrollBar.destroy(H_a),this._hScrollBar&&this._hScrollBar.destroy(H_a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},H_c.destroyChildren=function(){this._content.destroyChildren()},H_c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new H_J)},H_c.addChild=function(H_a){return H_a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(H_a)},H_c.onResize=function(){this._setScrollChanged()},H_c.addChildAt=function(H_a,H_b){return H_a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(H_a,H_b)},H_c.removeChild=function(H_a){return H_a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(H_a)},H_c.removeChildAt=function(H_a){return this.getChildAt(H_a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(H_a)},H_c.removeChildren=function(H_a,H_b){return void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=2147483647),this._content.removeChildren(H_a,H_b),this._setScrollChanged(),this},H_c.getChildAt=function(H_a){return this._content.getChildAt(H_a)},H_c.getChildByName=function(H_a){return this._content.getChildByName(H_a)},H_c.getChildIndex=function(H_a){return this._content.getChildIndex(H_a)},H_c.changeScroll=function(){this._scrollChanged=!1;var H_a=this.contentWidth||1,H_b=this.contentHeight||1,H_c=this._vScrollBar,H_d=this._hScrollBar,H_e=H_c&&H_b>this._height,H_f=H_d&&H_a>this._width,H_g=H_e?this._width-H_c.width:this._width,H_h=H_f?this._height-H_d.height:this._height;H_c&&(H_c.x=this._width-H_c.width,H_c.y=0,H_c.height=this._height-(H_f?H_d.height:0),H_c.scrollSize=Math.max(.033*this._height,1),H_c.thumbPercent=H_h/H_b,H_c.setScroll(0,H_b-H_h,H_c.value)),H_d&&(H_d.x=0,H_d.y=this._height-H_d.height,H_d.width=this._width-(H_e?H_c.width:0),H_d.scrollSize=Math.max(.033*this._width,1),H_d.thumbPercent=H_g/H_a,H_d.setScroll(0,H_a-H_g,H_d.value))},H_c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},H_c.setContentSize=function(H_a,H_b){var H_c=this._content;H_c.width=H_a,H_c.height=H_b,H_c.scrollRect||(H_c.scrollRect=new H_t),H_c.scrollRect.setTo(0,0,H_a,H_b),H_c.scrollRect=H_c.scrollRect},H_c.onScrollBarChange=function(H_a){var H_b=this._content.scrollRect;if(H_b){var H_c=Math.round(H_a.value);H_a.isVertical?H_b.y=H_c:H_b.x=H_c,this._content.scrollRect=H_b}},H_c.scrollTo=function(H_a,H_b){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),this.vScrollBar&&(this.vScrollBar.value=H_b),this.hScrollBar&&(this.hScrollBar.value=H_a)},H_c.refresh=function(){this.changeScroll()},H_c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H_r.superGet(H_J,this,"cacheAs")),H_r.superSet(H_J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},H_c.onScrollEnd=function(){H_r.superSet(H_J,this,"cacheAs",this._$P.cacheAs)},H_c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},H_g(0,H_c,"numChildren",function(){return this._content.numChildren}),H_g(0,H_c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H_a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new H_Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=H_a}),H_g(0,H_c,"contentWidth",function(){for(var H_a=0,H_b=this._content.numChildren-1;-1<H_b;H_b--){var H_c=this._content.getChildAt(H_b);H_a=Math.max(H_c.x+H_c.width*H_c.scaleX,H_a)}return H_a}),H_g(0,H_c,"contentHeight",function(){for(var H_a=0,H_b=this._content.numChildren-1;-1<H_b;H_b--){var H_c=this._content.getChildAt(H_b);H_a=Math.max(H_c.y+H_c.height*H_c.scaleY,H_a)}return H_a}),H_g(0,H_c,"width",H_a.prototype._$get_width,function(H_a){H_r.superSet(H_J,this,"width",H_a),this._setScrollChanged()}),H_g(0,H_c,"hScrollBar",function(){return this._hScrollBar}),H_g(0,H_c,"content",function(){return this._content}),H_g(0,H_c,"height",H_a.prototype._$get_height,function(H_a){H_r.superSet(H_J,this,"height",H_a),this._setScrollChanged()}),H_g(0,H_c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H_a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new H_ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=H_a}),H_g(0,H_c,"vScrollBar",function(){return this._vScrollBar}),H_g(0,H_c,"cacheAs",H_a.prototype._$get_cacheAs,function(H_a){H_r.superSet(H_J,this,"cacheAs",H_a),this._$P.cacheAs=null,"none"!==H_a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),H_b}(H_J),H_$=function(H_a){function H_b(H_a){H_b.__super.call(this,H_a),this.isVertical=!1}return H_f(H_b,"laya.ui.HSlider",H_P),H_b}(),H__=function(H_a){function H_c(H_a,H_b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,H_c.__super.call(this),this.skin=H_b,this.labels=H_a}H_f(H_c,"laya.ui.UIGroup",H_a);var H_b=H_c.prototype;return H_r.imps(H_b,{"laya.ui.IItem":!0}),H_b.preinitialize=function(){this.mouseEnabled=!0},H_b.destroy=function(H_a){void 0===H_a&&(H_a=!0),laya.ui.Component.prototype.destroy.call(this,H_a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},H_b.addItem=function(H_a,H_b){void 0===H_b&&(H_b=!0);var H_c=H_a,H_d=this._items.length;if(H_c.name="item"+H_d,this.addChild(H_c),this.initItems(),H_b&&0<H_d){var H_e=this._items[H_d-1];"horizontal"==this._direction?H_c.x=H_e.x+H_e.width+this._space:H_c.y=H_e.y+H_e.height+this._space}else H_b&&(H_c.x=0,H_c.y=0);return H_d},H_b.delItem=function(H_a,H_b){void 0===H_b&&(H_b=!0);var H_c=this._items.indexOf(H_a);if(-1!=H_c){var H_d=H_a;this.removeChild(H_d);for(var H_e=H_c+1,H_f=this._items.length;H_e<H_f;H_e++){var H_g=this._items[H_e];H_g.name="item"+(H_e-1),H_b&&("horizontal"==this._direction?H_g.x-=H_d.width+this._space:H_g.y-=H_d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var H_h;H_h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=H_h}}},H_b.initItems=function(){this._items||(this._items=[]);for(var H_a=this._items.length=0;H_a<1e4;H_a++){var H_b=this.getChildByName("item"+H_a);if(null==H_b)break;this._items.push(H_b),H_b.selected=H_a===this._selectedIndex,H_b.clickHandler=H_m.create(this,this.itemClick,[H_a],!1)}},H_b.itemClick=function(H_a){this.selectedIndex=H_a},H_b.setSelect=function(H_a,H_b){this._items&&-1<H_a&&H_a<this._items.length&&(this._items[H_a].selected=H_b)},H_b.createItem=function(H_a,H_b){return null},H_b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var H_a=0,H_b=0,H_c=this._items.length;H_b<H_c;H_b++){var H_d=this._items[H_b];this._skin&&(H_d.skin=this._skin),this._labelColors&&(H_d.labelColors=this._labelColors),this._labelSize&&(H_d.labelSize=this._labelSize),this._labelStroke&&(H_d.labelStroke=this._labelStroke),this._labelStrokeColor&&(H_d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(H_d.strokeColors=this._strokeColors),this._labelBold&&(H_d.labelBold=this._labelBold),this._labelPadding&&(H_d.labelPadding=this._labelPadding),this._labelAlign&&(H_d.labelAlign=this._labelAlign),this._stateNum&&(H_d.stateNum=this._stateNum),this._labelFont&&(H_d.labelFont=this._labelFont),"horizontal"===this._direction?(H_d.y=0,H_d.x=H_a,H_a+=H_d.width+this._space):(H_d.x=0,H_d.y=H_a,H_a+=H_d.height+this._space)}this.changeSize()},H_b.commitMeasure=function(){this.runCallLater(this.changeLabels)},H_b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},H_g(0,H_b,"labelStrokeColor",function(){return this._labelStrokeColor},function(H_a){this._labelStrokeColor!=H_a&&(this._labelStrokeColor=H_a,this._setLabelChanged())}),H_g(0,H_b,"skin",function(){return this._skin},function(H_a){this._skin!=H_a&&(this._skin=H_a,this._setLabelChanged())}),H_g(0,H_b,"selectedIndex",function(){return this._selectedIndex},function(H_a){this._selectedIndex!=H_a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H_a,this.setSelect(H_a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),H_g(0,H_b,"labels",function(){return this._labels},function(H_a){if(this._labels!=H_a){if(this._labels=H_a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var H_b=this._labels.split(","),H_c=0,H_d=H_b.length;H_c<H_d;H_c++){var H_e=this.createItem(this._skin,H_b[H_c]);H_e.name="item"+H_c,this.addChild(H_e)}this.initItems()}}),H_g(0,H_b,"strokeColors",function(){return this._strokeColors},function(H_a){this._strokeColors!=H_a&&(this._strokeColors=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelColors",function(){return this._labelColors},function(H_a){this._labelColors!=H_a&&(this._labelColors=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelStroke",function(){return this._labelStroke},function(H_a){this._labelStroke!=H_a&&(this._labelStroke=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelSize",function(){return this._labelSize},function(H_a){this._labelSize!=H_a&&(this._labelSize=H_a,this._setLabelChanged())}),H_g(0,H_b,"stateNum",function(){return this._stateNum},function(H_a){this._stateNum!=H_a&&(this._stateNum=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelBold",function(){return this._labelBold},function(H_a){this._labelBold!=H_a&&(this._labelBold=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelFont",function(){return this._labelFont},function(H_a){this._labelFont!=H_a&&(this._labelFont=H_a,this._setLabelChanged())}),H_g(0,H_b,"labelPadding",function(){return this._labelPadding},function(H_a){this._labelPadding!=H_a&&(this._labelPadding=H_a,this._setLabelChanged())}),H_g(0,H_b,"direction",function(){return this._direction},function(H_a){this._direction=H_a,this._setLabelChanged()}),H_g(0,H_b,"space",function(){return this._space},function(H_a){this._space=H_a,this._setLabelChanged()}),H_g(0,H_b,"items",function(){return this._items}),H_g(0,H_b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H_a){this.selectedIndex=this._items.indexOf(H_a)}),H_g(0,H_b,"dataSource",H_a.prototype._$get_dataSource,function(H_a){"number"==typeof(this._dataSource=H_a)&&Math.floor(H_a)==H_a||"string"==typeof H_a?this.selectedIndex=parseInt(H_a):H_a instanceof Array?this.labels=H_a.join(","):H_r.superSet(H_J,this,"dataSource",H_a)}),H_c}(H_J),H_o=function(H_b){function H_c(H_a,H_b){this._value=null,void 0===H_b&&(H_b=""),H_c.__super.call(this,H_a,H_b)}H_f(H_c,"laya.ui.Radio",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._value=null},H_a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},H_a.initialize=function(){H_b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},H_a.onClick=function(H_a){this.selected=!0},H_g(0,H_a,"value",function(){return null!=this._value?this._value:this.label},function(H_a){this._value=H_a}),H_c}(H_K),H_p=function(H_a){function H_b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,H_b.__super.call(this),this.width=this.height=200}H_f(H_b,"laya.ui.Tree",H_a);var H_c=H_b.prototype;return H_r.imps(H_c,{"laya.ui.IRender":!0}),H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),laya.ui.Component.prototype.destroy.call(this,H_a),this._list&&this._list.destroy(H_a),this._list=null,this._source=null,this._renderHandler=null},H_c.createChildren=function(){this.addChild(this._list=new H_X),this._list.renderHandler=H_m.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},H_c.onListChange=function(H_a){this.event("change")},H_c.getArray=function(){var H_a,H_b=[];for(var H_c in this._source)H_a=this._source[H_c],this.getParentOpenStatus(H_a)&&(H_a.x=this._spaceLeft*this.getDepth(H_a),H_b.push(H_a));return H_b},H_c.getDepth=function(H_a,H_b){return void 0===H_b&&(H_b=0),null==H_a.nodeParent?H_b:this.getDepth(H_a.nodeParent,H_b+1)},H_c.getParentOpenStatus=function(H_a){var H_b=H_a.nodeParent;return null==H_b||!!H_b.isOpen&&(null==H_b.nodeParent||this.getParentOpenStatus(H_b))},H_c.renderItem=function(H_a,H_b){var H_c=H_a.dataSource;if(H_c){H_a.left=H_c.x;var H_d=H_a.getChildByName("arrow");H_d&&(H_c.hasChild?(H_d.visible=!0,H_d.index=H_c.isOpen?1:0,H_d.tag=H_b,H_d.off("click",this,this.onArrowClick),H_d.on("click",this,this.onArrowClick)):H_d.visible=!1);var H_e=H_a.getChildByName("folder");H_e&&(2==H_e.clipY?H_e.index=H_c.isDirectory?0:1:H_e.index=H_c.isDirectory?H_c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([H_a,H_b])}},H_c.onArrowClick=function(H_a){var H_b=H_a.currentTarget.tag;this._list.array[H_b].isOpen=!this._list.array[H_b].isOpen,this.event("open"),this._list.array=this.getArray()},H_c.setItemState=function(H_a,H_b){this._list.array[H_a]&&(this._list.array[H_a].isOpen=H_b,this._list.array=this.getArray())},H_c.fresh=function(){this._list.array=this.getArray(),this.repaint()},H_c.parseXml=function(H_a,H_b,H_c,H_d){var H_e,H_f=H_a.childNodes,H_g=H_f.length;if(!H_d){H_e={};var H_h,H_i=H_a.attributes;for(var H_j in H_i){var H_k=(H_h=H_i[H_j]).nodeName,H_l=H_h.nodeValue;H_e[H_k]="true"==H_l||"false"!=H_l&&H_l}H_e.nodeParent=H_c,0<H_g&&(H_e.isDirectory=!0),H_e.hasChild=0<H_g,H_b.push(H_e)}for(var H_m=0;H_m<H_g;H_m++){var H_n=H_f[H_m];this.parseXml(H_n,H_b,H_e,!1)}},H_c.parseOpenStatus=function(H_a,H_b){for(var H_c=0,H_d=H_b.length;H_c<H_d;H_c++){var H_e=H_b[H_c];if(H_e.isDirectory)for(var H_f=0,H_g=H_a.length;H_f<H_g;H_f++){var H_h=H_a[H_f];if(H_h.isDirectory&&this.isSameParent(H_h,H_e)&&H_e.label==H_h.label){H_e.isOpen=H_h.isOpen;break}}}},H_c.isSameParent=function(H_a,H_b){return null==H_a.nodeParent&&null==H_b.nodeParent||null!=H_a.nodeParent&&null!=H_b.nodeParent&&(H_a.nodeParent.label==H_b.nodeParent.label&&this.isSameParent(H_a.nodeParent,H_b.nodeParent))},H_c.filter=function(H_a){if(Boolean(H_a)){var H_b=[];this.getFilterSource(this._source,H_b,H_a),this._list.array=H_b}else this._list.array=this.getArray()},H_c.getFilterSource=function(H_a,H_b,H_c){var H_d;for(var H_e in H_c=H_c.toLocaleLowerCase(),H_a)!(H_d=H_a[H_e]).isDirectory&&-1<String(H_d.label).toLowerCase().indexOf(H_c)&&(H_d.x=0,H_b.push(H_d)),H_d.child&&0<H_d.child.length&&this.getFilterSource(H_d.child,H_b,H_c)},H_g(0,H_c,"spaceBottom",function(){return this._list.spaceY},function(H_a){this._list.spaceY=H_a}),H_g(0,H_c,"keepStatus",function(){return this._keepStatus},function(H_a){this._keepStatus=H_a}),H_g(0,H_c,"itemRender",function(){return this._list.itemRender},function(H_a){this._list.itemRender=H_a}),H_g(0,H_c,"array",function(){return this._list.array},function(H_a){this._keepStatus&&this._list.array&&H_a&&this.parseOpenStatus(this._list.array,H_a),this._source=H_a,this._list.array=this.getArray()}),H_g(0,H_c,"mouseHandler",function(){return this._list.mouseHandler},function(H_a){this._list.mouseHandler=H_a}),H_g(0,H_c,"dataSource",H_a.prototype._$get_dataSource,function(H_a){this._dataSource=H_a,H_r.superSet(H_J,this,"dataSource",H_a)}),H_g(0,H_c,"source",function(){return this._source}),H_g(0,H_c,"scrollBar",function(){return this._list.scrollBar}),H_g(0,H_c,"list",function(){return this._list}),H_g(0,H_c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(H_a){this._list.vScrollBarSkin=H_a}),H_g(0,H_c,"renderHandler",function(){return this._renderHandler},function(H_a){this._renderHandler=H_a}),H_g(0,H_c,"selectedIndex",function(){return this._list.selectedIndex},function(H_a){this._list.selectedIndex=H_a}),H_g(0,H_c,"spaceLeft",function(){return this._spaceLeft},function(H_a){this._spaceLeft=H_a}),H_g(0,H_c,"selectedItem",function(){return this._list.selectedItem},function(H_a){this._list.selectedItem=H_a}),H_g(0,H_c,"width",H_a.prototype._$get_width,function(H_a){H_r.superSet(H_J,this,"width",H_a),this._list.width=H_a}),H_g(0,H_c,"height",H_a.prototype._$get_height,function(H_a){H_r.superSet(H_J,this,"height",H_a),this._list.height=H_a}),H_g(0,H_c,"xml",null,function(H_a){var H_b=[];this.parseXml(H_a.childNodes[0],H_b,null,!0),this.array=H_b}),H_g(0,H_c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),H_b}(H_J),H_aa=function(H_a){function H_b(){this._items=null,this._selectedIndex=0,H_b.__super.call(this),this._setIndexHandler=H_m.create(this,this.setIndex,null,!1)}H_f(H_b,"laya.ui.ViewStack",H_a);var H_c=H_b.prototype;return H_r.imps(H_c,{"laya.ui.IItem":!0}),H_c.setItems=function(H_a){this.removeChildren();for(var H_b=0,H_c=0,H_d=H_a.length;H_c<H_d;H_c++){var H_e=H_a[H_c];H_e&&(H_e.name="item"+H_b,this.addChild(H_e),H_b++)}this.initItems()},H_c.addItem=function(H_a){H_a.name="item"+this._items.length,this.addChild(H_a),this.initItems()},H_c.initItems=function(){this._items=[];for(var H_a=0;H_a<1e4;H_a++){var H_b=this.getChildByName("item"+H_a);if(null==H_b)break;this._items.push(H_b),H_b.visible=H_a==this._selectedIndex}},H_c.setSelect=function(H_a,H_b){this._items&&-1<H_a&&H_a<this._items.length&&(this._items[H_a].visible=H_b)},H_c.setIndex=function(H_a){this.selectedIndex=H_a},H_g(0,H_c,"dataSource",H_a.prototype._$get_dataSource,function(H_a){if("number"==typeof(this._dataSource=H_a)&&Math.floor(H_a)==H_a||"string"==typeof H_a)this.selectedIndex=parseInt(H_a);else for(var H_b in this._dataSource)this.hasOwnProperty(H_b)&&(this[H_b]=this._dataSource[H_b])}),H_g(0,H_c,"selectedIndex",function(){return this._selectedIndex},function(H_a){this._selectedIndex!=H_a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H_a,this.setSelect(this._selectedIndex,!0))}),H_g(0,H_c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H_a){this.selectedIndex=this._items.indexOf(H_a)}),H_g(0,H_c,"items",function(){return this._items}),H_g(0,H_c,"setIndexHandler",function(){return this._setIndexHandler},function(H_a){this._setIndexHandler=H_a}),H_b}(H_J),H_ba=function(H_a){function H_b(){H_b.__super.call(this)}return H_f(H_b,"laya.ui.VScrollBar",H_O),H_b}(),H_ca=function(H_b){function H_c(H_a){this._bg=null,this._skin=null,H_c.__super.call(this),void 0===H_a&&(H_a=""),this.text=H_a,this.skin=this.skin}H_f(H_c,"laya.ui.TextInput",H_b);var H_a=H_c.prototype;return H_a.preinitialize=function(){this.mouseEnabled=!0},H_a.destroy=function(H_a){H_u.clearCache(this,this._skin),void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._bg&&this._bg.destroy(),this._bg=null},H_a.createChildren=function(){this.addChild(this._tf=new H_n),this._tf.padding=H_D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},H_a._onFocus=function(){this.event("focus",this)},H_a._onBlur=function(){this.event("blur",this)},H_a._onInput=function(){this.event("input",this)},H_a._onEnter=function(){this.event("enter",this)},H_a.initialize=function(){this.width=128,this.height=22},H_a.select=function(){this._tf.select()},H_a.setSelection=function(H_a,H_b){this._tf.setSelection(H_a,H_b)},H_g(0,H_a,"text",H_b.prototype._$get_text,function(H_a){this._tf.text!=H_a&&(H_a+="",this._tf.text=H_a,this.event("change"))}),H_g(0,H_a,"bg",function(){return this._bg},function(H_a){this.graphics=this._bg=H_a}),H_g(0,H_a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(H_a){this._tf.inputElementYAdjuster=H_a}),H_g(0,H_a,"multiline",function(){return this._tf.multiline},function(H_a){this._tf.multiline=H_a}),H_g(0,H_a,"skin",function(){return this._skin},function(H_a){this._skin!=H_a&&(H_u.clearCache(this,this._skin),this._skin=H_a,this._bg||(this.graphics=this._bg=new H_G),H_u.keepCache(this,this._skin),this._bg.source=H_u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),H_g(0,H_a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(H_a){this._bg||(this.graphics=this._bg=new H_G),this._bg.sizeGrid=H_E.fillArray(H_D.defaultSizeGrid,H_a,Number)}),H_g(0,H_a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(H_a){this._tf.inputElementXAdjuster=H_a}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_R,this,"width",H_a),this._bg&&(this._bg.width=H_a)}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_R,this,"height",H_a),this._bg&&(this._bg.height=H_a)}),H_g(0,H_a,"editable",function(){return this._tf.editable},function(H_a){this._tf.editable=H_a}),H_g(0,H_a,"restrict",function(){return this._tf.restrict},function(H_a){this._tf.restrict=H_a}),H_g(0,H_a,"prompt",function(){return this._tf.prompt},function(H_a){this._tf.prompt=H_a}),H_g(0,H_a,"promptColor",function(){return this._tf.promptColor},function(H_a){this._tf.promptColor=H_a}),H_g(0,H_a,"maxChars",function(){return this._tf.maxChars},function(H_a){this._tf.maxChars=H_a}),H_g(0,H_a,"focus",function(){return this._tf.focus},function(H_a){this._tf.focus=H_a}),H_g(0,H_a,"type",function(){return this._tf.type},function(H_a){this._tf.type=H_a}),H_g(0,H_a,"asPassword",function(){return this._tf.asPassword},function(H_a){this._tf.asPassword=H_a}),H_c}(H_R),H_da=function(H_a){function H_b(){H_b.__super.call(this)}return H_f(H_b,"laya.ui.VSlider",H_P),H_b}(),H_ea=function(H_a){function H_d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,H_d.__super.call(this)}H_f(H_d,"laya.ui.Dialog",H_a);var H_b=H_d.prototype;return H_b.initialize=function(){this.popupEffect=H_d.manager.popupEffectHandler,this.closeEffect=H_d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},H_b._dealDragArea=function(){var H_a=this.getChildByName("drag");H_a&&(this.dragArea=H_a.x+","+H_a.y+","+H_a.width+","+H_a.height,H_a.removeSelf())},H_b._onClick=function(H_a){var H_b=H_a.target;if(H_b)switch(H_b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(H_b.name)}},H_b.show=function(H_a,H_b){void 0===H_a&&(H_a=!1),void 0===H_b&&(H_b=!0),this._open(!1,H_a,H_b)},H_b.popup=function(H_a,H_b){void 0===H_a&&(H_a=!1),void 0===H_b&&(H_b=!0),this._open(!0,H_a,H_b)},H_b._open=function(H_a,H_b,H_c){H_d.manager.lock(!1),this.isModal=H_a,H_d.manager.open(this,H_b,H_c)},H_b.onOpened=function(){},H_b.close=function(H_a,H_b){void 0===H_b&&(H_b=!0),H_d.manager.close(this,H_a,H_b)},H_b.onClosed=function(H_a){},H_b._onMouseDown=function(H_a){var H_b=this.getMousePoint();this._dragArea.contains(H_b.x,H_b.y)?this.startDrag():this.stopDrag()},H_g(0,H_b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(H_a){if(H_a){var H_b=H_E.fillArray([0,0,0,0],H_a,Number);this._dragArea=new H_t(H_b[0],H_b[1],H_b[2],H_b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),H_g(0,H_b,"isPopup",function(){return null!=this.parent}),H_g(0,H_b,"zOrder",H_a.prototype._$get_zOrder,function(H_a){H_r.superSet(H_T,this,"zOrder",H_a),H_d.manager._checkMask()}),H_g(1,H_d,"manager",function(){return H_d._manager=H_d._manager||new H_I},function(H_a){H_d._manager=H_a}),H_d.setLockView=function(H_a){H_d.manager.setLockView(H_a)},H_d.lock=function(H_a){H_d.manager.lock(H_a)},H_d.closeAll=function(){H_d.manager.closeAll()},H_d.getDialogsByGroup=function(H_a){return H_d.manager.getDialogsByGroup(H_a)},H_d.closeByGroup=function(H_a){return H_d.manager.closeByGroup(H_a)},H_d.CLOSE="close",H_d.CANCEL="cancel",H_d.SURE="sure",H_d.NO="no",H_d.OK="ok",H_d.YES="yes",H_d._manager=null,H_d}(H_T),H_fa=function(H_a){function H_b(){H_b.__super.call(this)}H_f(H_b,"laya.ui.HBox",H_a);var H_c=H_b.prototype;return H_c.sortItem=function(H_a){H_a&&H_a.sort(function(H_a,H_b){return H_a.x-H_b.x})},H_c.changeItems=function(){this._itemChanged=!1;for(var H_a=[],H_b=0,H_c=0,H_d=this.numChildren;H_c<H_d;H_c++){var H_e=this.getChildAt(H_c);H_e&&H_e.layoutEnabled&&(H_a.push(H_e),H_b=this._height?this._height:Math.max(H_b,H_e.height*H_e.scaleY))}this.sortItem(H_a);var H_f=0;for(H_c=0,H_d=H_a.length;H_c<H_d;H_c++)(H_e=H_a[H_c]).x=H_f,H_f+=H_e.width*H_e.scaleX+this._space,"top"==this._align?H_e.y=0:"middle"==this._align?H_e.y=.5*(H_b-H_e.height*H_e.scaleY):"bottom"==this._align&&(H_e.y=H_b-H_e.height*H_e.scaleY);this.changeSize()},H_g(0,H_c,"height",H_a.prototype._$get_height,function(H_a){this._height!=H_a&&(H_r.superSet(H_V,this,"height",H_a),this.callLater(this.changeItems))}),H_b.NONE="none",H_b.TOP="top",H_b.MIDDLE="middle",H_b.BOTTOM="bottom",H_b}(H_V),H_ga=function(H_a){function H_b(){H_b.__super.call(this)}H_f(H_b,"laya.ui.VBox",H_a);var H_c=H_b.prototype;return H_c.changeItems=function(){this._itemChanged=!1;for(var H_a=[],H_b=0,H_c=0,H_d=this.numChildren;H_c<H_d;H_c++){var H_e=this.getChildAt(H_c);H_e&&H_e.layoutEnabled&&(H_a.push(H_e),H_b=this._width?this._width:Math.max(H_b,H_e.width*H_e.scaleX))}this.sortItem(H_a);var H_f=0;for(H_c=0,H_d=H_a.length;H_c<H_d;H_c++)(H_e=H_a[H_c]).y=H_f,H_f+=H_e.height*H_e.scaleY+this._space,"left"==this._align?H_e.x=0:"center"==this._align?H_e.x=.5*(H_b-H_e.width*H_e.scaleX):"right"==this._align&&(H_e.x=H_b-H_e.width*H_e.scaleX);this.changeSize()},H_g(0,H_c,"width",H_a.prototype._$get_width,function(H_a){this._width!=H_a&&(H_r.superSet(H_V,this,"width",H_a),this.callLater(this.changeItems))}),H_b.NONE="none",H_b.LEFT="left",H_b.CENTER="center",H_b.RIGHT="right",H_b}(H_V),H_ha=function(H_a){function H_b(){H_b.__super.call(this)}return H_f(H_b,"laya.ui.RadioGroup",H__),H_b.prototype.createItem=function(H_a,H_b){return new H_o(H_a,H_b)},H_b}(),H_ia=function(H_a){function H_b(){H_b.__super.call(this)}return H_f(H_b,"laya.ui.Tab",H__),H_b.prototype.createItem=function(H_a,H_b){return new H_K(H_a,H_b)},H_b}(),H_ja=function(H_b){function H_c(H_a){this._vScrollBar=null,this._hScrollBar=null,void 0===H_a&&(H_a=""),H_c.__super.call(this,H_a)}H_f(H_c,"laya.ui.TextArea",H_b);var H_a=H_c.prototype;return H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},H_a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},H_a.onVBarChanged=function(H_a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},H_a.onHBarChanged=function(H_a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},H_a.changeScroll=function(){var H_a=this._vScrollBar&&0<this._tf.maxScrollY,H_b=this._hScrollBar&&0<this._tf.maxScrollX,H_c=H_a?this._width-this._vScrollBar.width:this._width,H_d=H_b?this._height-this._hScrollBar.height:this._height,H_e=this._tf.padding||H_D.labelPadding;this._tf.width=H_c,this._tf.height=H_d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-H_e[2],this._vScrollBar.y=H_e[1],this._vScrollBar.height=this._height-(H_b?this._hScrollBar.height:0)-H_e[1]-H_e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=H_d/Math.max(this._tf.textHeight,H_d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=H_a),this._hScrollBar&&(this._hScrollBar.x=H_e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-H_e[3],this._hScrollBar.width=this._width-(H_a?this._vScrollBar.width:0)-H_e[0]-H_e[2],this._hScrollBar.scrollSize=Math.max(.033*H_c,1),this._hScrollBar.thumbPercent=H_c/Math.max(this._tf.textWidth,H_c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=H_b)},H_a.scrollTo=function(H_a){this.commitMeasure(),this._tf.scrollY=H_a},H_g(0,H_a,"scrollY",function(){return this._tf.scrollY}),H_g(0,H_a,"width",H_b.prototype._$get_width,function(H_a){H_r.superSet(H_ca,this,"width",H_a),this.callLater(this.changeScroll)}),H_g(0,H_a,"hScrollBar",function(){return this._hScrollBar}),H_g(0,H_a,"height",H_b.prototype._$get_height,function(H_a){H_r.superSet(H_ca,this,"height",H_a),this.callLater(this.changeScroll)}),H_g(0,H_a,"maxScrollX",function(){return this._tf.maxScrollX}),H_g(0,H_a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H_a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new H_ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=H_a}),H_g(0,H_a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H_a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new H_Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=H_a}),H_g(0,H_a,"vScrollBar",function(){return this._vScrollBar}),H_g(0,H_a,"maxScrollY",function(){return this._tf.maxScrollY}),H_g(0,H_a,"scrollX",function(){return this._tf.scrollX}),H_c}(H_ca);!function(H_a){function H_b(){this._uiView=null,this.isCloseOther=!1,H_b.__super.call(this)}H_f(H_b,"laya.ui.AsynDialog",H_ea);var H_c=H_b.prototype;H_c.createView=function(H_a){this._uiView=H_a},H_c._open=function(H_a,H_b,H_c){this.isModal=H_a,this.isCloseOther=H_b,H_ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},H_c.onCreated=function(){this.createUI(),this.onOpen()},H_c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},H_c.onOpen=function(){H_ea.manager.open(this,this.isCloseOther),H_ea.manager.lock(!1)},H_c.close=function(H_a,H_b){void 0===H_b&&(H_b=!0),H_ea.manager.close(this),this.onClose()},H_c.onClose=function(){},H_c.destroy=function(H_a){void 0===H_a&&(H_a=!0),laya.ui.View.prototype.destroy.call(this,H_a),this._uiView=null,this.onDestroy()},H_c.onDestroy=function(){}}();H_r.__init([H_T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}}),function(H_m,H_a,H_x){H_x.un,H_x.uns;var H_l=H_x.static,H_n=H_x.class,H_q=H_x.getset,H_d=H_x.__newvec,H_w=laya.maths.Arith,H_g=laya.webgl.atlas.AtlasResourceManager,H_c=laya.webgl.shader.BaseShader,H_H=laya.utils.Browser,H_h=laya.webgl.utils.Buffer,H_y=laya.utils.Byte,H_e=laya.utils.ClassUtils,H_i=H_x.Config,H_f=(laya.events.Event,laya.events.EventDispatcher),H_D=laya.utils.Handler,H_t=laya.net.Loader,H_b=laya.net.LoaderManager,H_j=(laya.maths.MathUtil,laya.display.Node),H_r=laya.renders.Render,H_k=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),H_s=laya.resource.Resource,H_u=laya.utils.RunDriver,H_v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),H_z=laya.display.Sprite,H_A=laya.utils.Stat,H_B=laya.utils.StringKey,H_E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),H_C=laya.utils.Utils,H_F=laya.webgl.WebGL,H_G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;H_x.interface("laya.d3.core.IClone"),H_x.interface("laya.d3.graphics.IVertex"),H_x.interface("laya.d3.core.render.IUpdate"),H_x.interface("laya.d3.core.scene.ITreeNode"),H_x.interface("laya.d3.core.render.IRenderable");(function(){function H_K(){}H_n(H_K,"laya.d3.animation.AnimationClipParser01"),H_K.READ_DATA=function(){H_K._DATA.offset=H_K._reader.getUint32(),H_K._DATA.size=H_K._reader.getUint32()},H_K.READ_BLOCK=function(){for(var H_a=H_K._BLOCK.count=H_K._reader.getUint16(),H_b=H_K._BLOCK.blockStarts=[],H_c=H_K._BLOCK.blockLengths=[],H_d=0;H_d<H_a;H_d++)H_b.push(H_K._reader.getUint32()),H_c.push(H_K._reader.getUint32())},H_K.READ_STRINGS=function(){var H_a=H_K._reader.getUint32(),H_b=H_K._reader.getUint16(),H_c=H_K._reader.pos;H_K._reader.pos=H_a+H_K._DATA.offset;for(var H_d=0;H_d<H_b;H_d++)H_K._strings[H_d]=H_K._reader.readUTFString();H_K._reader.pos=H_c},H_K.parse=function(H_a,H_b){H_K._animationClip=H_a;(H_K._reader=H_b).__getBuffer();H_K.READ_DATA(),H_K.READ_BLOCK(),H_K.READ_STRINGS();for(var H_c=0,H_d=H_K._BLOCK.count;H_c<H_d;H_c++){var H_e=H_b.getUint16(),H_f=H_K._strings[H_e],H_g=H_K["READ_"+H_f];if(null==H_g)throw new Error("model file err,no this function:"+H_e+" "+H_f);H_g.call()}},H_K.READ_ANIMATIONS=function(){var H_a,H_b=0,H_c=0,H_d=H_K._reader,H_e=H_d.__getBuffer(),H_f=[],H_g=H_d.getUint8();for(H_f.length=H_g,H_b=0;H_b<H_g;H_b++)H_f[H_b]=H_d.getUint16();var H_h=[],H_i=H_d.getUint16();for(H_h.length=H_i,H_b=0;H_b<H_i;H_b++)H_h[H_b]=H_d.getFloat32();var H_j=H_K._animationClip;H_j.name=H_K._strings[H_d.getUint16()];var H_k=H_j._duration=H_d.getFloat32();H_j.islooping=!!H_d.getByte(),H_j._frameRate=H_d.getInt16();var H_l=H_d.getInt16(),H_m=H_j._nodes=new Array;H_m.length=H_l,(H_j._publicClipDatas=[]).length=H_l;var H_n=H_j._nodesMap={},H_q=0,H_r=0;for(H_b=0;H_b<H_l;H_b++){H_a=H_m[H_b]=new H_S;var H_s=H_d.getUint16(),H_t=H_a.path=[];for(H_t.length=H_s,H_c=0;H_c<H_s;H_c++)H_t[H_c]=H_K._strings[H_d.getUint16()];var H_u=H_t.join("/"),H_v=H_n[H_u];H_v||(H_n[H_u]=H_v=[]),H_v.push(H_a);var H_w=H_d.getInt16();-1!==H_w&&(H_a.componentType=H_K._strings[H_w]);var H_x=H_Q._propertyIndexDic[H_K._strings[H_d.getUint16()]];if(null==H_x)throw new Error("AnimationClipParser01:unknown property name.");var H_y=H_x<4,H_z=!H_y||H_y&&""===H_t[0];(H_a._cacheProperty=H_z)?H_q++:H_r++,H_a.propertyNameID=H_x;var H_A=H_f[H_d.getUint8()];H_a.keyFrameWidth=H_A/4;var H_B=H_a.keyFrames=[],H_C=H_B.length=H_d.getUint16(),H_D=null,H_E=NaN;for(H_c=0;H_c<H_C;H_c++){var H_F=H_B[H_c]=new H_R;H_E=H_F.startTime=H_h[H_d.getUint16()];var H_G=H_d.pos;H_F.inTangent=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_G=H_d.pos,H_F.outTangent=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_G=H_d.pos,H_F.data=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_D&&(H_D.next=H_F,H_D.duration=H_E-H_D.startTime),H_D=H_F}H_F.next=null,H_F.duration=H_k-H_E}var H_H=H_j._nodeToCachePropertyMap=new Int32Array(H_l),H_I=H_j._cachePropertyMap=new Int32Array(H_q),H_J=H_j._unCachePropertyMap=new Int32Array(H_r);for(H_q=H_r=0,H_b=0;H_b<H_l;H_b++)(H_a=H_m[H_b])._cacheProperty?(H_H[H_b]=H_q,H_I[H_q++]=H_b):H_J[H_r++]=H_b},H_K._animationClip=null,H_K._reader=null,H_K._strings=[],H_l(H_K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function H_O(){}H_n(H_O,"laya.d3.animation.AnimationClipParser02"),H_O.READ_DATA=function(){H_O._DATA.offset=H_O._reader.getUint32(),H_O._DATA.size=H_O._reader.getUint32()},H_O.READ_BLOCK=function(){for(var H_a=H_O._BLOCK.count=H_O._reader.getUint16(),H_b=H_O._BLOCK.blockStarts=[],H_c=H_O._BLOCK.blockLengths=[],H_d=0;H_d<H_a;H_d++)H_b.push(H_O._reader.getUint32()),H_c.push(H_O._reader.getUint32())},H_O.READ_STRINGS=function(){var H_a=H_O._reader.getUint32(),H_b=H_O._reader.getUint16(),H_c=H_O._reader.pos;H_O._reader.pos=H_a+H_O._DATA.offset;for(var H_d=0;H_d<H_b;H_d++)H_O._strings[H_d]=H_O._reader.readUTFString();H_O._reader.pos=H_c},H_O.parse=function(H_a,H_b){H_O._animationClip=H_a;(H_O._reader=H_b).__getBuffer();H_O.READ_DATA(),H_O.READ_BLOCK(),H_O.READ_STRINGS();for(var H_c=0,H_d=H_O._BLOCK.count;H_c<H_d;H_c++){var H_e=H_b.getUint16(),H_f=H_O._strings[H_e],H_g=H_O["READ_"+H_f];if(null==H_g)throw new Error("model file err,no this function:"+H_e+" "+H_f);H_g.call()}},H_O.READ_ANIMATIONS=function(){var H_a,H_b=0,H_c=0,H_d=H_O._reader,H_e=H_d.__getBuffer(),H_f=[],H_g=H_d.getUint8();for(H_f.length=H_g,H_b=0;H_b<H_g;H_b++)H_f[H_b]=H_d.getUint16();var H_h=[],H_i=H_d.getUint16();for(H_h.length=H_i,H_b=0;H_b<H_i;H_b++)H_h[H_b]=H_d.getFloat32();var H_j=H_O._animationClip;H_j.name=H_O._strings[H_d.getUint16()];var H_k=H_j._duration=H_d.getFloat32();H_j.islooping=!!H_d.getByte(),H_j._frameRate=H_d.getInt16();var H_l=H_d.getInt16(),H_m=H_j._nodes=new Array;H_m.length=H_l,(H_j._publicClipDatas=[]).length=H_l;var H_n=H_j._nodesMap={},H_q=0,H_r=0;for(H_b=0;H_b<H_l;H_b++){H_a=H_m[H_b]=new H_S;var H_s=H_d.getUint16(),H_t=H_a.path=[];for(H_t.length=H_s,H_c=0;H_c<H_s;H_c++)H_t[H_c]=H_O._strings[H_d.getUint16()];var H_u=H_t.join("/"),H_v=H_n[H_u];H_v||(H_n[H_u]=H_v=[]),H_v.push(H_a);var H_w=H_d.getInt16();-1!==H_w&&(H_a.componentType=H_O._strings[H_w]);var H_x=H_Q._propertyIndexDic[H_O._strings[H_d.getUint16()]];if(null==H_x)throw new Error("AnimationClipParser02:unknown property name.");var H_y=H_x<4,H_z=!H_y||H_y&&""===H_t[0];(H_a._cacheProperty=H_z)?H_q++:H_r++,H_a.propertyNameID=H_x;var H_A=H_f[H_d.getUint8()];H_a.keyFrameWidth=H_A/4;var H_B=H_a.keyFrames=[],H_C=H_B.length=H_d.getUint16(),H_D=null,H_E=NaN;for(H_c=0;H_c<H_C;H_c++){var H_F=H_B[H_c]=new H_R;H_E=H_F.startTime=H_h[H_d.getUint16()];var H_G=H_d.pos;H_F.inTangent=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_G=H_d.pos,H_F.outTangent=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_G=H_d.pos,H_F.data=new Float32Array(H_e.slice(H_G,H_G+H_A)),H_d.pos+=H_A,H_D&&(H_D.next=H_F,H_D.duration=H_E-H_D.startTime),H_D=H_F}H_F.next=null,H_F.duration=H_k-H_E}var H_H=H_d.getUint16();for(H_b=0;H_b<H_H;H_b++){var H_I,H_J=new H_P;H_J.time=H_d.getFloat32(),H_J.eventName=H_O._strings[H_d.getUint16()];var H_K=H_d.getUint16();for(0<H_K&&(H_J.params=H_I=[]),H_c=0;H_c<H_K;H_c++){switch(H_d.getByte()){case 0:H_I.push(!!H_d.getByte());break;case 1:H_I.push(H_d.getInt32());break;case 2:H_I.push(H_d.getFloat32());break;case 3:H_I.push(H_O._strings[H_d.getUint16()]);break;default:throw new Error("unknown type.")}}H_j.addEvent(H_J)}var H_L=H_j._nodeToCachePropertyMap=new Int32Array(H_l),H_M=H_j._cachePropertyMap=new Int32Array(H_q),H_N=H_j._unCachePropertyMap=new Int32Array(H_r);for(H_q=H_r=0,H_b=0;H_b<H_l;H_b++)(H_a=H_m[H_b])._cacheProperty?(H_L[H_b]=H_q,H_M[H_q++]=H_b):H_N[H_r++]=H_b},H_O._animationClip=null,H_O._reader=null,H_O._strings=[],H_l(H_O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var H_P=function(){function H_a(){this.time=NaN,this.eventName=null,this.params=null}return H_n(H_a,"laya.d3.animation.AnimationEvent"),H_a}(),H_Q=function(){function H_d(){this._childs=[],this.transform=new H_ub(this)}H_n(H_d,"laya.d3.animation.AnimationNode");var H_a=H_d.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.addChild=function(H_a){H_a._parent=this,H_a.transform.setParent(this.transform),this._childs.push(H_a)},H_a.removeChild=function(H_a){var H_b=this._childs.indexOf(H_a);-1!==H_b&&this._childs.splice(H_b,1)},H_a.getChildByName=function(H_a){for(var H_b=0,H_c=this._childs.length;H_b<H_c;H_b++){var H_d=this._childs[H_b];if(H_d.name===H_a)return H_d}return null},H_a.getChildByIndex=function(H_a){return this._childs[H_a]},H_a.getChildCount=function(){return this._childs.length},H_a.cloneTo=function(H_a){var H_b=H_a;H_b.name=this.name;for(var H_c=0,H_d=this._childs.length;H_c<H_d;H_c++){var H_e=this._childs[H_c],H_f=H_e.clone();H_b.addChild(H_f);var H_g=H_e.transform,H_h=H_f.transform;H_h.setLocalPosition(H_g.getLocalPosition()),H_h.setLocalRotation(H_g.getLocalRotation()),H_h.setLocalScale(H_g.getLocalScale()),H_h._localRotationEuler=H_g._localRotationEuler,H_h._setWorldMatrixIgnoreUpdate(H_g.getWorldMatrix())}},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_d.__init__=function(){H_d.registerAnimationNodeProperty("localPosition",H_d._getLocalPosition,H_d._setLocalPosition),H_d.registerAnimationNodeProperty("localRotation",H_d._getLocalRotation,H_d._setLocalRotation),H_d.registerAnimationNodeProperty("localScale",H_d._getLocalScale,H_d._setLocalScale),H_d.registerAnimationNodeProperty("localRotationEuler",H_d._getLocalRotationEuler,H_d._setLocalRotationEuler),H_d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",H_d._getParticleRenderSharedMaterialTintColor,H_d._setParticleRenderSharedMaterialTintColor),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",H_d._getMeshRenderSharedMaterialTilingOffset,H_d._setMeshRenderSharedMaterialTilingOffset),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",H_d._getMeshRenderSharedMaterialAlbedo,H_d._setMeshRenderSharedMaterialAlbedo),H_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",H_d._getSkinnedMeshRenderSharedMaterialTilingOffset,H_d._setSkinnedMeshRenderSharedMaterialTilingOffset),H_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",H_d._getSkinnedMeshRenderSharedMaterialAlbedo,H_d._setSkinnedMeshRenderSharedMaterialAlbedo),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",H_d._getMeshRenderSharedMaterialAlbedo,H_d._setMeshRenderSharedMaterialAlbedo),H_d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",H_d._getSkinnedMeshRenderSharedMaterialAlbedo,H_d._setSkinnedMeshRenderSharedMaterialAlbedo),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",H_d._getMeshRenderSharedMaterialIntensity,H_d._setMeshRenderSharedMaterialIntensity),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",H_d._getMeshRenderSharedMaterialAlpha,H_d._setMeshRenderSharedMaterialAlpha),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",H_d._getMeshRenderSharedMaterialAlphaColor,H_d._setMeshRenderSharedMaterialAlphaColor),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",H_d._getMeshRenderSharedMaterialBaseColor,H_d._setMeshRenderSharedMaterialBaseColor),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",H_d._getMeshRenderSharedMaterialDissolve,H_d._setMeshRenderSharedMaterialDissolve),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",H_d._getMeshRenderSharedMaterialDissolveSpeed,H_d._setMeshRenderSharedMaterialDissolveSpeed),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",H_d._getMeshRenderSharedMaterialMMultiplier,H_d._setMeshRenderSharedMaterialMMultiplier),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",H_d._getMeshRenderSharedMaterialBaseScrollSpeedX,H_d._setMeshRenderSharedMaterialBaseScrollSpeedX),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",H_d._getMeshRenderSharedMaterialBaseScrollSpeedY,H_d._setMeshRenderSharedMaterialBaseScrollSpeedY),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",H_d._getMeshRenderSharedMaterialSecondScrollSpeedX,H_d._setMeshRenderSharedMaterialSecondScrollSpeedX),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",H_d._getMeshRenderSharedMaterialSecondScrollSpeedY,H_d._setMeshRenderSharedMaterialSecondScrollSpeedY),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",H_d._getMeshRenderSharedMaterialDetailTilingOffset,H_d._setMeshRenderSharedMaterialDetailTilingOffset),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",H_d._getMeshRenderSharedMaterialDissolveTilingOffset,H_d._setMeshRenderSharedMaterialDissolveTilingOffset),H_d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",H_d._getMeshRenderSharedMaterialMaskTilingOffset,H_d._setMeshRenderSharedMaterialMaskTilingOffset)},H_d.registerAnimationNodeProperty=function(H_a,H_b,H_c){if(H_d._propertyIndexDic[H_a])throw new Error("AnimationNode: this propertyName has registered.");H_d._propertyIndexDic[H_a]=H_d._propertyIDCounter,H_d._propertyGetFuncs[H_d._propertyIDCounter]=H_b,H_d._propertySetFuncs[H_d._propertyIDCounter]=H_c,H_d._propertyIDCounter++},H_d._getLocalPosition=function(H_a,H_b){return H_a?H_a.transform.getLocalPosition():H_b._transform.localPosition.elements},H_d._setLocalPosition=function(H_a,H_b,H_c){if(H_a)H_a.transform.setLocalPosition(H_c);else{var H_d=H_b._transform,H_e=H_d.localPosition;H_e.elements=H_c,H_d.localPosition=H_e}},H_d._getLocalRotation=function(H_a,H_b){return H_a?H_a.transform.getLocalRotation():H_b._transform.localRotation.elements},H_d._setLocalRotation=function(H_a,H_b,H_c){if(H_a)H_a.transform.setLocalRotation(H_c);else{var H_d=H_b._transform,H_e=H_d.localRotation;H_e.elements=H_c,H_d.localRotation=H_e}},H_d._getLocalScale=function(H_a,H_b){return H_a?H_a.transform.getLocalScale():H_b._transform.localScale.elements},H_d._setLocalScale=function(H_a,H_b,H_c){if(H_a)H_a.transform.setLocalScale(H_c);else{var H_d=H_b._transform,H_e=H_d.localScale;H_e.elements=H_c,H_d.localScale=H_e}},H_d._getLocalRotationEuler=function(H_a,H_b){return H_a?H_a.transform.getLocalRotationEuler():H_b._transform.localRotationEuler.elements},H_d._setLocalRotationEuler=function(H_a,H_b,H_c){if(H_a)H_a.transform.setLocalRotationEuler(H_c);else{var H_d=H_b._transform,H_e=H_d.localRotationEuler;H_e.elements=H_c,H_d.localRotationEuler=H_e}},H_d._getMeshRenderSharedMaterialTilingOffset=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return H_b.meshRender.sharedMaterial.tilingOffset.elements},H_d._setMeshRenderSharedMaterialTilingOffset=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).tilingOffset).elements=H_c,H_d.tilingOffset=H_e)}else(H_e=(H_d=H_b.meshRender.material).tilingOffset).elements=H_c,H_d.tilingOffset=H_e},H_d._getMeshRenderSharedMaterialAlbedo=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return H_b.meshRender.sharedMaterial.albedoColor.elements},H_d._setMeshRenderSharedMaterialAlbedo=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).albedoColor).elements=H_c,H_d.albedoColor=H_e)}else(H_e=(H_d=H_b.meshRender.material).albedoColor).elements=H_c,H_d.albedoColor=H_e},H_d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return H_b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},H_d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.skinnedMeshRender.material).tilingOffset).elements=H_c,H_d.tilingOffset=H_e)}else(H_e=(H_d=H_b.skinnedMeshRender.material).tilingOffset).elements=H_c,H_d.tilingOffset=H_e},H_d._getSkinnedMeshRenderSharedMaterialAlbedo=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return H_b.skinnedMeshRender.sharedMaterial.albedoColor.elements},H_d._setSkinnedMeshRenderSharedMaterialAlbedo=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.skinnedMeshRender.material).albedoColor).elements=H_c,H_d.albedoColor=H_e)}else(H_e=(H_d=H_b.skinnedMeshRender.material).albedoColor).elements=H_c,H_d.albedoColor=H_e},H_d._getParticleRenderSharedMaterialTintColor=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.particleRender.sharedMaterial.tintColor.elements:null}return H_b.particleRender.sharedMaterial.tintColor.elements},H_d._setParticleRenderSharedMaterialTintColor=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.particleRender.material).tintColor).elements=H_c,H_d.tintColor=H_e)}else(H_e=(H_d=H_b.particleRender.material).tintColor).elements=H_c,H_d.tintColor=H_e},H_d._getMeshRenderSharedMaterialAlphaColor=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return H_b.meshRender.sharedMaterial.alphaColor.elements},H_d._setMeshRenderSharedMaterialAlphaColor=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).alphaColor).elements=H_c,H_d.alphaColor=H_e)}else(H_e=(H_d=H_b.meshRender.material).alphaColor).elements=H_c,H_d.alphaColor=H_e},H_d._getMeshRenderSharedMaterialBaseColor=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.baseColor.elements:null}return H_b.meshRender.sharedMaterial.baseColor.elements},H_d._setMeshRenderSharedMaterialBaseColor=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).baseColor).elements=H_c,H_d.baseColor=H_e)}else(H_e=(H_d=H_b.meshRender.material).baseColor).elements=H_c,H_d.baseColor=H_e},H_d._getMeshRenderSharedMaterialDissolve=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.dissolve:0}return H_b.meshRender.sharedMaterial.dissolve},H_d._setMeshRenderSharedMaterialDissolve=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.dissolve=H_c[0])}else H_b.meshRender.material.dissolve=H_c[0]},H_d._getMeshRenderSharedMaterialDissolveSpeed=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return H_b.meshRender.sharedMaterial.dissolveSpeed},H_d._setMeshRenderSharedMaterialDissolveSpeed=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.dissolveSpeed=H_c[0])}else H_b.meshRender.material.dissolveSpeed=H_c[0]},H_d._getMeshRenderSharedMaterialMMultiplier=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.mMultiplier:0}return H_b.meshRender.sharedMaterial.mMultiplier},H_d._setMeshRenderSharedMaterialMMultiplier=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.mMultiplier=H_c[0])}else H_b.meshRender.material.mMultiplier=H_c[0]},H_d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return H_b.meshRender.sharedMaterial.baseScrollSpeedX},H_d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.baseScrollSpeedX=H_c[0])}else H_b.meshRender.material.baseScrollSpeedX=H_c[0]},H_d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return H_b.meshRender.sharedMaterial.baseScrollSpeedY},H_d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.baseScrollSpeedY=H_c[0])}else H_b.meshRender.material.baseScrollSpeedY=H_c[0]},H_d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return H_b.meshRender.sharedMaterial.secondScrollSpeedX},H_d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.secondScrollSpeedX=H_c[0])}else H_b.meshRender.material.secondScrollSpeedX=H_c[0]},H_d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return H_b.meshRender.sharedMaterial.secondScrollSpeedY},H_d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.secondScrollSpeedY=H_c[0])}else H_b.meshRender.material.secondScrollSpeedY=H_c[0]},H_d._getMeshRenderSharedMaterialAlpha=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.alpha:0}return H_b.meshRender.sharedMaterial.alpha},H_d._setMeshRenderSharedMaterialAlpha=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.alpha=H_c[0])}else H_b.meshRender.material.alpha=H_c[0]},H_d._getMeshRenderSharedMaterialIntensity=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.intensity:0}return H_b.meshRender.sharedMaterial.intensity},H_d._setMeshRenderSharedMaterialIntensity=function(H_a,H_b,H_c){if(H_a){var H_d=H_a.transform._entity;H_d&&(H_d.owner.meshRender.material.intensity=H_c[0])}else H_b.meshRender.material.intensity=H_c[0]},H_d._getMeshRenderSharedMaterialDetailTilingOffset=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return H_b.meshRender.sharedMaterial.detailTilingOffset.elements},H_d._setMeshRenderSharedMaterialDetailTilingOffset=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).detailTilingOffset).elements=H_c,H_d.detailTilingOffset=H_e)}else(H_e=(H_d=H_b.meshRender.material).detailTilingOffset).elements=H_c,H_d.detailTilingOffset=H_e},H_d._getMeshRenderSharedMaterialDissolveTilingOffset=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return H_b.meshRender.sharedMaterial.dissolveTilingOffset.elements},H_d._setMeshRenderSharedMaterialDissolveTilingOffset=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).dissolveTilingOffset).elements=H_c,H_d.dissolveTilingOffset=H_e)}else(H_e=(H_d=H_b.meshRender.material).dissolveTilingOffset).elements=H_c,H_d.dissolveTilingOffset=H_e},H_d._getMeshRenderSharedMaterialMaskTilingOffset=function(H_a,H_b){if(H_a){var H_c=H_a.transform._entity;return H_c?H_c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return H_b.meshRender.sharedMaterial.maskTilingOffset.elements},H_d._setMeshRenderSharedMaterialMaskTilingOffset=function(H_a,H_b,H_c){var H_d,H_e;if(H_a){var H_f=H_a.transform._entity;H_f&&((H_e=(H_d=H_f.owner.meshRender.material).maskTilingOffset).elements=H_c,H_d.maskTilingOffset=H_e)}else(H_e=(H_d=H_b.meshRender.material).maskTilingOffset).elements=H_c,H_d.maskTilingOffset=H_e},H_d._propertyIDCounter=0,H_d._propertyIndexDic={},H_d._propertySetFuncs=[],H_d._propertyGetFuncs=[],H_d}(),H_R=function(){function H_a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return H_n(H_a,"laya.d3.animation.Keyframe"),H_a}(),H_S=function(){function H_a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return H_n(H_a,"laya.d3.animation.KeyframeNode"),H_a}(),H_I=(function(){function H_a(){this._tempVector30=new H_gb,this._tempVector31=new H_gb,this._tempVector32=new H_gb,this._a=new H_gb,this._b=new H_gb,this._c=new H_gb,this._d=new H_gb}H_n(H_a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var H_b=H_a.prototype;H_b.Init=function(H_a,H_b,H_c,H_d){H_a.cloneTo(this._d),H_b.cloneTo(this._c),H_gb.scale(H_a,2,this._a),H_gb.scale(H_c,2,this._tempVector30),H_gb.subtract(this._a,this._tempVector30,this._a),H_gb.add(this._a,H_b,this._a),H_gb.add(this._a,H_d,this._a),H_gb.scale(H_c,3,this._b),H_gb.scale(H_a,3,this._tempVector30),H_gb.subtract(this._b,this._tempVector30,this._b),H_gb.subtract(this._b,H_d,this._b),H_gb.scale(H_b,2,this._tempVector30),H_gb.subtract(this._b,this._tempVector30,this._b)},H_b.Slerp=function(H_a,H_b){H_gb.scale(this._a,H_a*H_a*H_a,this._tempVector30),H_gb.scale(this._b,H_a*H_a,this._tempVector31),H_gb.scale(this._c,H_a,this._tempVector32),H_gb.add(this._tempVector30,this._tempVector31,H_b),H_gb.add(H_b,this._tempVector32,H_b),H_gb.add(H_b,this._d,H_b)}}(),function(){function H_M(H_a,H_b,H_c,H_d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=H_a,this._h=H_b,this._minHeight=H_c,this._maxHeight=H_d}H_n(H_M,"laya.d3.core.HeightMap");var H_a=H_M.prototype;H_a._inBounds=function(H_a,H_b){return 0<=H_a&&H_a<this._h&&0<=H_b&&H_b<this._w},H_a.getHeight=function(H_a,H_b){return this._inBounds(H_a,H_b)?this._datas[H_a][H_b]:NaN},H_q(0,H_a,"width",function(){return this._w}),H_q(0,H_a,"height",function(){return this._h}),H_q(0,H_a,"maxHeight",function(){return this._maxHeight}),H_q(0,H_a,"minHeight",function(){return this._minHeight}),H_M.creatFromMesh=function(H_a,H_b,H_c,H_d){for(var H_e=[],H_f=[],H_g=H_a.getSubMeshCount(),H_h=0;H_h<H_g;H_h++){for(var H_i=H_a.getSubMesh(H_h),H_j=H_i._getVertexBuffer(),H_k=H_j.getData(),H_l=[],H_m=0;H_m<H_k.length;H_m+=H_j.vertexDeclaration.vertexStride/4){var H_n=new H_gb(H_k[H_m+0],H_k[H_m+1],H_k[H_m+2]);H_l.push(H_n)}H_e.push(H_l);var H_q=H_i._getIndexBuffer();H_f.push(H_q.getData())}var H_r=H_a.boundingBox,H_s=H_r.min.x,H_t=H_r.min.z,H_u=H_r.max.x,H_v=H_r.max.z,H_w=H_r.min.y,H_x=H_r.max.y,H_y=H_u-H_s,H_z=H_v-H_t,H_A=H_d.elements[0]=H_y/(H_b-1),H_B=H_d.elements[1]=H_z/(H_c-1),H_C=new H_M(H_b,H_c,H_w,H_x),H_D=H_M._tempRay,H_E=H_D.direction.elements;H_E[0]=0,H_E[1]=-1,H_E[2]=0;var H_F=H_x+.1;H_D.origin.elements[1]=H_F;for(var H_G=0;H_G<H_c;H_G++){var H_H=H_t+H_G*H_B;H_C._datas[H_G]=[];for(var H_I=0;H_I<H_b;H_I++){var H_J=H_s+H_I*H_A,H_K=H_D.origin.elements;H_K[0]=H_J,H_K[2]=H_H;var H_L=H_M._getPosition(H_D,H_e,H_f);H_C._datas[H_G][H_I]=H_L===Number.MAX_VALUE?NaN:H_F-H_L}}return H_C},H_M.createFromImage=function(H_a,H_b,H_c){for(var H_d=H_a.width,H_e=H_a.height,H_f=new H_M(H_d,H_e,H_b,H_c),H_g=(H_c-H_b)/254,H_h=H_a.getPixels(),H_i=0,H_j=0;H_j<H_e;H_j++)for(var H_k=H_f._datas[H_j]=[],H_l=0;H_l<H_d;H_l++){var H_m=H_h[H_i++],H_n=H_h[H_i++],H_q=H_h[H_i++],H_r=H_h[H_i++];H_k[H_l]=255==H_m&&255==H_n&&255==H_q&&255==H_r?NaN:(H_m+H_n+H_q)/3*H_g+H_b}return H_f},H_M._getPosition=function(H_a,H_b,H_c){for(var H_d=Number.MAX_VALUE,H_e=0;H_e<H_b.length;H_e++)for(var H_f=H_b[H_e],H_g=H_c[H_e],H_h=0;H_h<H_g.length;H_h+=3){var H_i=H_f[H_g[H_h+0]],H_j=H_f[H_g[H_h+1]],H_k=H_f[H_g[H_h+2]],H_l=H_qb.rayIntersectsTriangle(H_a,H_i,H_j,H_k);!isNaN(H_l)&&H_l<H_d&&(H_d=H_l)}return H_d},H_l(H_M,["_tempRay",function(){return this._tempRay=new H_eb(new H_gb,new H_gb)}])}(),function(){function H_e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}H_n(H_e,"laya.d3.core.Layer");var H_a=H_e.prototype;return H_a._binarySearchIndex=function(){for(var H_a=0,H_b=H_e._collsionTestList.length-1,H_c=0;H_a<=H_b;){H_c=Math.floor((H_a+H_b)/2);var H_d=H_e._collsionTestList[H_c];if(H_d==this._number)return H_c;H_d>this._number?H_b=H_c-1:H_a=H_c+1}return H_a},H_a._addCollider=function(H_a){0===this._colliders.length&&H_e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),H_a._isRigidbody?(this._colliders.unshift(H_a),this._nonRigidbodyOffset++):this._colliders.push(H_a)},H_a._removeCollider=function(H_a){var H_b=this._colliders.indexOf(H_a);H_b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(H_b,1),0===this._colliders.length&&H_e._collsionTestList.splice(H_e._collsionTestList.indexOf(this._number),1)},H_q(0,H_a,"number",function(){return this._number}),H_q(0,H_a,"visible",function(){return this._visible},function(H_a){this._visible=H_a,H_e._visibleLayers=H_a?H_e._visibleLayers|this.mask:H_e._visibleLayers&~this.mask}),H_q(0,H_a,"mask",function(){return this._mask}),H_q(1,H_e,"visibleLayers",function(){return H_e._visibleLayers},function(H_a){H_e._visibleLayers=H_a;for(var H_b=0,H_c=H_e._layerList.length;H_b<H_c;H_b++){var H_d=H_e._layerList[H_b];H_d._visible=0!=(H_d._mask&H_e._visibleLayers)}}),H_e.__init__=function(){H_e._layerList.length=31;for(var H_a=0;H_a<31;H_a++){var H_b=new H_e;H_e._layerList[H_a]=H_b,0===H_a?(H_b.name="Default Layer",H_b.visible=!0):(H_b.name="Layer-"+H_a,H_b.visible=!1),H_b._number=H_a,H_b._mask=Math.pow(2,H_a)}H_e.currentCreationLayer=H_e._layerList[0]},H_e.getLayerByNumber=function(H_a){if(H_a<0||30<H_a)throw new Error("无法返回指定Layer，该number超出范围！");return H_e._layerList[H_a]},H_e.getLayerByName=function(H_a){for(var H_b=0;H_b<31;H_b++)if(H_e._layerList[H_b].name===H_a)return H_e._layerList[H_b];throw new Error("无法返回指定Layer,该name不存在")},H_e.isVisible=function(H_a){return 0!=(H_a&H_e._currentCameraCullingMask&H_e._visibleLayers)},H_e._layerList=[],H_e._visibleLayers=2147483647,H_e._collsionTestList=[],H_e._currentCameraCullingMask=2147483647,H_e.maxCount=31,H_e.currentCreationLayer=null,H_e}()),H_J=(function(){function H_a(H_a,H_b,H_c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=H_a,this._minCount=H_b,this._maxCount=H_c}H_n(H_a,"laya.d3.core.particleShuriKen.module.Burst");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.cloneTo=function(H_a){var H_b=H_a;H_b._time=this._time,H_b._minCount=this._minCount,H_b._maxCount=this._maxCount},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"time",function(){return this._time}),H_q(0,H_b,"minCount",function(){return this._minCount}),H_q(0,H_b,"maxCount",function(){return this._maxCount})}(),function(){function H_a(H_a){this._color=null,this.enbale=!1,this._color=H_a}H_n(H_a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var H_b=H_a.prototype;H_b.cloneTo=function(H_a){var H_b=H_a;this._color.cloneTo(H_b._color),H_b.enbale=this.enbale},H_b.clone=function(){var H_a;switch(this._color.type){case 0:H_a=H_L.createByConstant(this._color.constant.clone());break;case 1:H_a=H_L.createByGradient(this._color.gradient.clone());break;case 2:H_a=H_L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:H_a=H_L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var H_b=new this.constructor(H_a);return H_b.enbale=this.enbale,H_b},H_q(0,H_b,"color",function(){return this._color})}(),function(){function H_a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}H_n(H_a,"laya.d3.core.particleShuriKen.module.Emission");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),H_b._destroy=function(){this._bursts=null,this._destroyed=!0},H_b.getBurstsCount=function(){return this._bursts.length},H_b.getBurstByIndex=function(H_a){return this._bursts[H_a]},H_b.addBurst=function(H_a){var H_b=this._bursts.length;if(0<H_b)for(var H_c=0;H_c<H_b;H_c++)this._bursts[H_c].time>H_a.time&&this._bursts.splice(H_c,0,H_a);this._bursts.push(H_a)},H_b.removeBurst=function(H_a){var H_b=this._bursts.indexOf(H_a);-1!==H_b&&this._bursts.splice(H_b,1)},H_b.removeBurstByIndex=function(H_a){this._bursts.splice(H_a,1)},H_b.clearBurst=function(){this._bursts.length=0},H_b.cloneTo=function(H_a){var H_b=H_a,H_c=H_b._bursts;H_c.length=this._bursts.length;for(var H_d=0,H_e=this._bursts.length;H_d<H_e;H_d++){var H_f=H_c[H_d];H_f?this._bursts[H_d].cloneTo(H_f):H_c[H_d]=this._bursts[H_d].clone()}H_b._emissionRate=this._emissionRate,H_b.enbale=this.enbale},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"destroyed",function(){return this._destroyed}),H_q(0,H_b,"emissionRate",function(){return this._emissionRate},function(H_a){if(H_a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=H_a})}(),function(){function H_d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}H_n(H_d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var H_a=H_d.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,H_b._constant=this._constant,this._overTime.cloneTo(H_b._overTime),H_b._constantMin=this._constantMin,H_b._constantMax=this._constantMax,this._overTimeMin.cloneTo(H_b._overTimeMin),this._overTimeMax.cloneTo(H_b._overTimeMax)},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"frameOverTimeData",function(){return this._overTime}),H_q(0,H_a,"constant",function(){return this._constant}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"frameOverTimeDataMin",function(){return this._overTimeMin}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"frameOverTimeDataMax",function(){return this._overTimeMax}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_d.createByConstant=function(H_a){var H_b=new H_d;return H_b._type=0,H_b._constant=H_a,H_b},H_d.createByOverTime=function(H_a){var H_b=new H_d;return H_b._type=1,H_b._overTime=H_a,H_b},H_d.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_d;return H_c._type=2,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_d.createByRandomTwoOverTime=function(H_a,H_b){var H_c=new H_d;return H_c._type=3,H_c._overTimeMin=H_a,H_c._overTimeMax=H_b,H_c},H_d}()),H_K=function(){function H_j(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}H_n(H_j,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var H_a=H_j.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,H_b._separateAxes=this._separateAxes,H_b._constant=this._constant,this._constantSeparate.cloneTo(H_b._constantSeparate),this._gradient.cloneTo(H_b._gradient),this._gradientX.cloneTo(H_b._gradientX),this._gradientY.cloneTo(H_b._gradientY),this._gradientZ.cloneTo(H_b._gradientZ),H_b._constantMin=this._constantMin,H_b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H_b._constantMinSeparate),this._constantMaxSeparate.cloneTo(H_b._constantMaxSeparate),this._gradientMin.cloneTo(H_b._gradientMin),this._gradientMax.cloneTo(H_b._gradientMax),this._gradientXMin.cloneTo(H_b._gradientXMin),this._gradientXMax.cloneTo(H_b._gradientXMax),this._gradientYMin.cloneTo(H_b._gradientYMin),this._gradientYMax.cloneTo(H_b._gradientYMax),this._gradientZMin.cloneTo(H_b._gradientZMin),this._gradientZMax.cloneTo(H_b._gradientZMax)},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"gradientZ",function(){return this._gradientZ}),H_q(0,H_a,"constant",function(){return this._constant}),H_q(0,H_a,"gradient",function(){return this._gradient}),H_q(0,H_a,"separateAxes",function(){return this._separateAxes}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"constantSeparate",function(){return this._constantSeparate}),H_q(0,H_a,"gradientX",function(){return this._gradientX}),H_q(0,H_a,"gradientY",function(){return this._gradientY}),H_q(0,H_a,"gradientW",function(){return this._gradientW}),H_q(0,H_a,"gradientMin",function(){return this._gradientMin}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"gradientMax",function(){return this._gradientMax}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_q(0,H_a,"gradientWMin",function(){return this._gradientWMin}),H_q(0,H_a,"constantMinSeparate",function(){return this._constantMinSeparate}),H_q(0,H_a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H_q(0,H_a,"gradientXMin",function(){return this._gradientXMin}),H_q(0,H_a,"gradientXMax",function(){return this._gradientXMax}),H_q(0,H_a,"gradientWMax",function(){return this._gradientWMax}),H_q(0,H_a,"gradientYMin",function(){return this._gradientYMin}),H_q(0,H_a,"gradientYMax",function(){return this._gradientYMax}),H_q(0,H_a,"gradientZMin",function(){return this._gradientZMin}),H_q(0,H_a,"gradientZMax",function(){return this._gradientZMax}),H_j.createByConstant=function(H_a){var H_b=new H_j;return H_b._type=0,H_b._separateAxes=!1,H_b._constant=H_a,H_b},H_j.createByConstantSeparate=function(H_a){var H_b=new H_j;return H_b._type=0,H_b._separateAxes=!0,H_b._constantSeparate=H_a,H_b},H_j.createByGradient=function(H_a){var H_b=new H_j;return H_b._type=1,H_b._separateAxes=!1,H_b._gradient=H_a,H_b},H_j.createByGradientSeparate=function(H_a,H_b,H_c,H_d){var H_e=new H_j;return H_e._type=1,H_e._separateAxes=!0,H_e._gradientX=H_a,H_e._gradientY=H_b,H_e._gradientZ=H_c,H_e._gradientW=H_d,H_e},H_j.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_j;return H_c._type=2,H_c._separateAxes=!1,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_j.createByRandomTwoConstantSeparate=function(H_a,H_b){var H_c=new H_j;return H_c._type=2,H_c._separateAxes=!0,H_c._constantMinSeparate=H_a,H_c._constantMaxSeparate=H_b,H_c},H_j.createByRandomTwoGradient=function(H_a,H_b){var H_c=new H_j;return H_c._type=3,H_c._separateAxes=!1,H_c._gradientMin=H_a,H_c._gradientMax=H_b,H_c},H_j.createByRandomTwoGradientSeparate=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){var H_i=new H_j;return H_i._type=3,H_i._separateAxes=!0,H_i._gradientXMin=H_a,H_i._gradientXMax=H_b,H_i._gradientYMin=H_c,H_i._gradientYMax=H_d,H_i._gradientZMin=H_e,H_i._gradientZMax=H_f,H_i._gradientWMin=H_g,H_i._gradientWMax=H_h,H_i},H_j}(),H_L=function(){function H_d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}H_n(H_d,"laya.d3.core.particleShuriKen.module.GradientColor");var H_a=H_d.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,this._constant.cloneTo(H_b._constant),this._constantMin.cloneTo(H_b._constantMin),this._constantMax.cloneTo(H_b._constantMax),this._gradient.cloneTo(H_b._gradient),this._gradientMin.cloneTo(H_b._gradientMin),this._gradientMax.cloneTo(H_b._gradientMax)},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"gradient",function(){return this._gradient}),H_q(0,H_a,"constant",function(){return this._constant}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"gradientMin",function(){return this._gradientMin}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"gradientMax",function(){return this._gradientMax}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_d.createByConstant=function(H_a){var H_b=new H_d;return H_b._type=0,H_b._constant=H_a,H_b},H_d.createByGradient=function(H_a){var H_b=new H_d;return H_b._type=1,H_b._gradient=H_a,H_b},H_d.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_d;return H_c._type=2,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_d.createByRandomTwoGradient=function(H_a,H_b){var H_c=new H_d;return H_c._type=3,H_c._gradientMin=H_a,H_c._gradientMax=H_b,H_c},H_d}(),H_M=(function(){function H_a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}H_n(H_a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.addAlpha=function(H_a,H_b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==H_a&&(H_a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=H_a,this._alphaElements[this._alphaCurrentLength++]=H_b):DEBUG},H_b.addRGB=function(H_a,H_b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==H_a&&(H_a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=H_a,this._rgbElements[this._rgbCurrentLength++]=H_b.x,this._rgbElements[this._rgbCurrentLength++]=H_b.y,this._rgbElements[this._rgbCurrentLength++]=H_b.z):DEBUG},H_b.cloneTo=function(H_a){var H_b=H_a,H_c=0,H_d=0;H_b._alphaCurrentLength=this._alphaCurrentLength;var H_e=H_b._alphaElements;for(H_e.length=this._alphaElements.length,H_c=0,H_d=this._alphaElements.length;H_c<H_d;H_c++)H_e[H_c]=this._alphaElements[H_c];H_b._rgbCurrentLength=this._rgbCurrentLength;var H_f=H_b._rgbElements;for(H_f.length=this._rgbElements.length,H_c=0,H_d=this._rgbElements.length;H_c<H_d;H_c++)H_f[H_c]=this._rgbElements[H_c]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),H_q(0,H_b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function H_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H_n(H_a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.add=function(H_a,H_b){this._currentLength<8?(6===this._currentLength&&1!==H_a&&(H_a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H_a,this._elements[this._currentLength++]=H_b):console.log("Warning:data count must lessEqual than 4")},H_b.cloneTo=function(H_a){var H_b=H_a;H_b._currentLength=this._currentLength;var H_c=H_b._elements;H_c.length=this._elements.length;for(var H_d=0,H_e=this._elements.length;H_d<H_e;H_d++)H_c[H_d]=this._elements[H_d]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"gradientCount",function(){return this._currentLength/2})}(),function(){function H_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H_n(H_a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.add=function(H_a,H_b){this._currentLength<8?(6===this._currentLength&&1!==H_a&&(H_a=1,DEBUG),this._elements[this._currentLength++]=H_a,this._elements[this._currentLength++]=H_b):DEBUG},H_b.getKeyByIndex=function(H_a){return this._elements[2*H_a]},H_b.getValueByIndex=function(H_a){return this._elements[2*H_a+1]},H_b.getAverageValue=function(){for(var H_a=0,H_b=this._currentLength-2;H_a<H_b;H_a+=2){this._elements[H_a+1];this._elements[H_a+3],this._elements[H_a+2]-this._elements[H_a]}return 0},H_b.cloneTo=function(H_a){var H_b=H_a;H_b._currentLength=this._currentLength;var H_c=H_b._elements;H_c.length=this._elements.length;for(var H_d=0,H_e=this._elements.length;H_d<H_e;H_d++)H_c[H_d]=this._elements[H_d]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"gradientCount",function(){return this._currentLength/2})}(),function(){function H_a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}H_n(H_a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.add=function(H_a,H_b){this._currentLength<8?(6===this._currentLength&&1!==H_a&&(H_a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H_a,this._elements[this._currentLength++]=H_b.x,this._elements[this._currentLength++]=H_b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},H_b.cloneTo=function(H_a){var H_b=H_a;H_b._currentLength=this._currentLength;var H_c=H_b._elements;H_c.length=this._elements.length;for(var H_d=0,H_e=this._elements.length;H_d<H_e;H_d++)H_c[H_d]=this._elements[H_d]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"gradientCount",function(){return this._currentLength/3})}(),function(){function H_h(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H_n(H_h,"laya.d3.core.particleShuriKen.module.GradientSize");var H_a=H_h.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.getMaxSizeInGradient=function(){var H_a=0,H_b=0,H_c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(H_a=0,H_b=this._gradientX.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientX.getValueByIndex(H_a));for(H_a=0,H_b=this._gradientY.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientY.getValueByIndex(H_a))}else for(H_a=0,H_b=this._gradient.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradient.getValueByIndex(H_a));break;case 1:H_c=this._separateAxes?(H_c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),H_c=Math.max(H_c,this._constantMinSeparate.y),Math.max(H_c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(H_a=0,H_b=this._gradientXMin.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientXMin.getValueByIndex(H_a));for(H_a=0,H_b=this._gradientXMax.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientXMax.getValueByIndex(H_a));for(H_a=0,H_b=this._gradientYMin.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientYMin.getValueByIndex(H_a));for(H_a=0,H_b=this._gradientZMax.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientZMax.getValueByIndex(H_a))}else{for(H_a=0,H_b=this._gradientMin.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientMin.getValueByIndex(H_a));for(H_a=0,H_b=this._gradientMax.gradientCount;H_a<H_b;H_a++)H_c=Math.max(H_c,this._gradientMax.getValueByIndex(H_a))}}return H_c},H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,H_b._separateAxes=this._separateAxes,this._gradient.cloneTo(H_b._gradient),this._gradientX.cloneTo(H_b._gradientX),this._gradientY.cloneTo(H_b._gradientY),this._gradientZ.cloneTo(H_b._gradientZ),H_b._constantMin=this._constantMin,H_b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H_b._constantMinSeparate),this._constantMaxSeparate.cloneTo(H_b._constantMaxSeparate),this._gradientMin.cloneTo(H_b._gradientMin),this._gradientMax.cloneTo(H_b._gradientMax),this._gradientXMin.cloneTo(H_b._gradientXMin),this._gradientXMax.cloneTo(H_b._gradientXMax),this._gradientYMin.cloneTo(H_b._gradientYMin),this._gradientYMax.cloneTo(H_b._gradientYMax),this._gradientZMin.cloneTo(H_b._gradientZMin),this._gradientZMax.cloneTo(H_b._gradientZMax)},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"gradientZ",function(){return this._gradientZ}),H_q(0,H_a,"gradient",function(){return this._gradient}),H_q(0,H_a,"separateAxes",function(){return this._separateAxes}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"gradientMin",function(){return this._gradientMin}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"gradientX",function(){return this._gradientX}),H_q(0,H_a,"gradientY",function(){return this._gradientY}),H_q(0,H_a,"gradientMax",function(){return this._gradientMax}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_q(0,H_a,"constantMinSeparate",function(){return this._constantMinSeparate}),H_q(0,H_a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H_q(0,H_a,"gradientXMin",function(){return this._gradientXMin}),H_q(0,H_a,"gradientXMax",function(){return this._gradientXMax}),H_q(0,H_a,"gradientYMin",function(){return this._gradientYMin}),H_q(0,H_a,"gradientYMax",function(){return this._gradientYMax}),H_q(0,H_a,"gradientZMin",function(){return this._gradientZMin}),H_q(0,H_a,"gradientZMax",function(){return this._gradientZMax}),H_h.createByGradient=function(H_a){var H_b=new H_h;return H_b._type=0,H_b._separateAxes=!1,H_b._gradient=H_a,H_b},H_h.createByGradientSeparate=function(H_a,H_b,H_c){var H_d=new H_h;return H_d._type=0,H_d._separateAxes=!0,H_d._gradientX=H_a,H_d._gradientY=H_b,H_d._gradientZ=H_c,H_d},H_h.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_h;return H_c._type=1,H_c._separateAxes=!1,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_h.createByRandomTwoConstantSeparate=function(H_a,H_b){var H_c=new H_h;return H_c._type=1,H_c._separateAxes=!0,H_c._constantMinSeparate=H_a,H_c._constantMaxSeparate=H_b,H_c},H_h.createByRandomTwoGradient=function(H_a,H_b){var H_c=new H_h;return H_c._type=2,H_c._separateAxes=!1,H_c._gradientMin=H_a,H_c._gradientMax=H_b,H_c},H_h.createByRandomTwoGradientSeparate=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=new H_h;return H_g._type=2,H_g._separateAxes=!0,H_g._gradientXMin=H_a,H_g._gradientXMax=H_b,H_g._gradientYMin=H_c,H_g._gradientYMax=H_d,H_g._gradientZMin=H_e,H_g._gradientZMax=H_f,H_g},H_h}()),H_N=function(){function H_h(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H_n(H_h,"laya.d3.core.particleShuriKen.module.GradientVelocity");var H_a=H_h.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,this._constant.cloneTo(H_b._constant),this._gradientX.cloneTo(H_b._gradientX),this._gradientY.cloneTo(H_b._gradientY),this._gradientZ.cloneTo(H_b._gradientZ),this._constantMin.cloneTo(H_b._constantMin),this._constantMax.cloneTo(H_b._constantMax),this._gradientXMin.cloneTo(H_b._gradientXMin),this._gradientXMax.cloneTo(H_b._gradientXMax),this._gradientYMin.cloneTo(H_b._gradientYMin),this._gradientYMax.cloneTo(H_b._gradientYMax),this._gradientZMin.cloneTo(H_b._gradientZMin),this._gradientZMax.cloneTo(H_b._gradientZMax)},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"gradientZ",function(){return this._gradientZ}),H_q(0,H_a,"constant",function(){return this._constant}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"gradientXMax",function(){return this._gradientXMax}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"gradientX",function(){return this._gradientX}),H_q(0,H_a,"gradientY",function(){return this._gradientY}),H_q(0,H_a,"gradientXMin",function(){return this._gradientXMin}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_q(0,H_a,"gradientYMin",function(){return this._gradientYMin}),H_q(0,H_a,"gradientYMax",function(){return this._gradientYMax}),H_q(0,H_a,"gradientZMin",function(){return this._gradientZMin}),H_q(0,H_a,"gradientZMax",function(){return this._gradientZMax}),H_h.createByConstant=function(H_a){var H_b=new H_h;return H_b._type=0,H_b._constant=H_a,H_b},H_h.createByGradient=function(H_a,H_b,H_c){var H_d=new H_h;return H_d._type=1,H_d._gradientX=H_a,H_d._gradientY=H_b,H_d._gradientZ=H_c,H_d},H_h.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_h;return H_c._type=2,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_h.createByRandomTwoGradient=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=new H_h;return H_g._type=3,H_g._gradientXMin=H_a,H_g._gradientXMax=H_b,H_g._gradientYMin=H_c,H_g._gradientYMax=H_d,H_g._gradientZMin=H_e,H_g._gradientZMax=H_f,H_g},H_h}(),H_O=(function(){function H_a(H_a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=H_a}H_n(H_a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.cloneTo=function(H_a){var H_b=H_a;this._angularVelocity.cloneTo(H_b._angularVelocity),H_b.enbale=this.enbale},H_b.clone=function(){var H_a;switch(this._angularVelocity.type){case 0:H_a=this._angularVelocity.separateAxes?H_K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):H_K.createByConstant(this._angularVelocity.constant);break;case 1:H_a=this._angularVelocity.separateAxes?H_K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):H_K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:H_a=this._angularVelocity.separateAxes?H_K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):H_K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:H_a=this._angularVelocity.separateAxes?H_K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):H_K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var H_b=new this.constructor(H_a);return H_b.enbale=this.enbale,H_b},H_q(0,H_b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function H_a(){this.enable=!1,this.randomDirection=!1}H_n(H_a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b._getShapeBoundBox=function(H_a){throw new Error("BaseShape: must override it.")},H_b._getSpeedBoundBox=function(H_a){throw new Error("BaseShape: must override it.")},H_b.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){throw new Error("BaseShape: must override it.")},H_b._calculateProceduralBounds=function(H_a,H_b,H_c){this._getShapeBoundBox(H_a);var H_d=H_a.min,H_e=H_a.max;H_gb.multiply(H_d,H_b,H_d),H_gb.multiply(H_e,H_b,H_e);var H_f=new H_Za(new H_gb,new H_gb);this.randomDirection?(H_f.min=new H_gb(-1,-1,-1),H_f.max=new H_gb(1,1,1)):this._getSpeedBoundBox(H_f);var H_g=new H_Za(new H_gb,new H_gb),H_h=H_g.min,H_i=H_g.max;H_gb.scale(H_f.min,H_c.y,H_h),H_gb.scale(H_f.max,H_c.y,H_i),H_gb.add(H_a.min,H_h,H_h),H_gb.add(H_a.max,H_i,H_i),H_gb.min(H_a.min,H_h,H_a.min),H_gb.max(H_a.max,H_h,H_a.max);var H_j=new H_Za(new H_gb,new H_gb),H_k=H_j.min,H_l=H_j.max;H_gb.scale(H_f.min,H_c.x,H_k),H_gb.scale(H_f.max,H_c.x,H_l),H_gb.min(H_j.min,H_l,H_h),H_gb.max(H_j.min,H_l,H_i),H_gb.min(H_a.min,H_h,H_a.min),H_gb.max(H_a.max,H_h,H_a.max)},H_b.cloneTo=function(H_a){H_a.enable=this.enable},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_a}()),H_T=function(){function H_f(){}return H_n(H_f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),H_f._randomPointUnitArcCircle=function(H_a,H_b,H_c){var H_d=H_b.elements,H_e=NaN;H_e=H_c?H_c.getFloat()*H_a:Math.random()*H_a,H_d[0]=Math.cos(H_e),H_d[1]=Math.sin(H_e)},H_f._randomPointInsideUnitArcCircle=function(H_a,H_b,H_c){var H_d=H_b.elements;H_f._randomPointUnitArcCircle(H_a,H_b,H_c);var H_e=NaN;H_e=H_c?Math.pow(H_c.getFloat(),.5):Math.pow(Math.random(),.5),H_d[0]=H_d[0]*H_e,H_d[1]=H_d[1]*H_e},H_f._randomPointUnitCircle=function(H_a,H_b){var H_c=H_a.elements,H_d=NaN;H_d=H_b?H_b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,H_c[0]=Math.cos(H_d),H_c[1]=Math.sin(H_d)},H_f._randomPointInsideUnitCircle=function(H_a,H_b){var H_c=H_a.elements;H_f._randomPointUnitCircle(H_a);var H_d=NaN;H_d=H_b?Math.pow(H_b.getFloat(),.5):Math.pow(Math.random(),.5),H_c[0]=H_c[0]*H_d,H_c[1]=H_c[1]*H_d},H_f._randomPointUnitSphere=function(H_a,H_b){var H_c=H_a.elements,H_d=NaN,H_e=NaN;H_e=H_b?(H_d=H_c[2]=2*H_b.getFloat()-1,H_b.getFloat()*Math.PI*2):(H_d=H_c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var H_f=Math.sqrt(1-H_d*H_d);H_c[0]=H_f*Math.cos(H_e),H_c[1]=H_f*Math.sin(H_e)},H_f._randomPointInsideUnitSphere=function(H_a,H_b){var H_c=H_a.elements;H_f._randomPointUnitSphere(H_a);var H_d=NaN;H_d=H_b?Math.pow(H_b.getFloat(),1/3):Math.pow(Math.random(),1/3),H_c[0]=H_c[0]*H_d,H_c[1]=H_c[1]*H_d,H_c[2]=H_c[2]*H_d},H_f._randomPointInsideHalfUnitBox=function(H_a,H_b){var H_c=H_a.elements;H_b?(H_c[0]=H_b.getFloat()-.5,H_c[1]=H_b.getFloat()-.5,H_c[2]=H_b.getFloat()-.5):(H_c[0]=Math.random()-.5,H_c[1]=Math.random()-.5,H_c[2]=Math.random()-.5)},H_f}(),H_U=(function(){function H_a(H_a){this._size=null,this.enbale=!1,this._size=H_a}H_n(H_a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.cloneTo=function(H_a){var H_b=H_a;this._size.cloneTo(H_b._size),H_b.enbale=this.enbale},H_b.clone=function(){var H_a;switch(this._size.type){case 0:H_a=this._size.separateAxes?H_M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):H_M.createByGradient(this._size.gradient.clone());break;case 1:H_a=this._size.separateAxes?H_M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):H_M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:H_a=this._size.separateAxes?H_M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):H_M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var H_b=new this.constructor(H_a);return H_b.enbale=this.enbale,H_b},H_q(0,H_b,"size",function(){return this._size})}(),function(){function H_d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}H_n(H_d,"laya.d3.core.particleShuriKen.module.StartFrame");var H_a=H_d.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.cloneTo=function(H_a){var H_b=H_a;H_b._type=this._type,H_b._constant=this._constant,H_b._constantMin=this._constantMin,H_b._constantMax=this._constantMax},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_a,"constant",function(){return this._constant}),H_q(0,H_a,"type",function(){return this._type}),H_q(0,H_a,"constantMin",function(){return this._constantMin}),H_q(0,H_a,"constantMax",function(){return this._constantMax}),H_d.createByConstant=function(H_a){var H_b=new H_d;return H_b._type=0,H_b._constant=H_a,H_b},H_d.createByRandomTwoConstant=function(H_a,H_b){var H_c=new H_d;return H_c._type=1,H_c._constantMin=H_a,H_c._constantMax=H_b,H_c},H_d}()),H_V=(function(){function H_a(H_a,H_b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new H_fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=H_a,this._startFrame=H_b}H_n(H_a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.cloneTo=function(H_a){var H_b=H_a;this.tiles.cloneTo(H_b.tiles),H_b.type=this.type,H_b.randomRow=this.randomRow,this._frame.cloneTo(H_b._frame),this._startFrame.cloneTo(H_b._startFrame),H_b.cycles=this.cycles,H_b.enableUVChannels=this.enableUVChannels,H_b.enable=this.enable},H_b.clone=function(){var H_a,H_b;switch(this._frame.type){case 0:H_a=H_J.createByConstant(this._frame.constant);break;case 1:H_a=H_J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:H_a=H_J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:H_a=H_J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:H_b=H_U.createByConstant(this._startFrame.constant);break;case 1:H_b=H_U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var H_c=new this.constructor(H_a,H_b);return this.tiles.cloneTo(H_c.tiles),H_c.type=this.type,H_c.randomRow=this.randomRow,H_c.cycles=this.cycles,H_c.enableUVChannels=this.enableUVChannels,H_c.enable=this.enable,H_c},H_q(0,H_b,"frame",function(){return this._frame}),H_q(0,H_b,"startFrame",function(){return this._startFrame})}(),function(){function H_a(H_a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=H_a}H_n(H_a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.cloneTo=function(H_a){var H_b=H_a;this._velocity.cloneTo(H_b._velocity),H_b.enbale=this.enbale,H_b.space=this.space},H_b.clone=function(){var H_a;switch(this._velocity.type){case 0:H_a=H_N.createByConstant(this._velocity.constant.clone());break;case 1:H_a=H_N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:H_a=H_N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:H_a=H_N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var H_b=new this.constructor(H_a);return H_b.enbale=this.enbale,H_b.space=this.space,H_b},H_q(0,H_b,"velocity",function(){return this._velocity})}(),function(){function H_a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new H_mb,this._vb=H_Ob.create(H_a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=H_Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=H_Lb.nameKey.getID("LINE"),this._shaderCompile=H_Ab._preCompileShader[this._sharderNameID]}H_n(H_a,"laya.d3.core.PhasorSpriter3D");var H_b=H_a.prototype;return H_b.line=function(H_a,H_b,H_c,H_d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H_a.x,H_a.y,H_a.z,H_b.x,H_b.y,H_b.z,H_b.w),this.addVertex(H_c.x,H_c.y,H_c.z,H_d.x,H_d.y,H_d.z,H_d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},H_b.circle=function(H_a,H_b,H_c,H_d,H_e,H_f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*H_b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/H_b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*H_a,Math.cos(this._tempNumver0)*H_a,0,H_c,H_d,H_e,H_f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},H_b.plane=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=H_d/2,this._tempNumver1=H_e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H_a-this._tempNumver0,H_b+this._tempNumver1,H_c,H_f,H_g,H_h,H_i),this.addVertex(H_a+this._tempNumver0,H_b+this._tempNumver1,H_c,H_f,H_g,H_h,H_i),this.addVertex(H_a-this._tempNumver0,H_b-this._tempNumver1,H_c,H_f,H_g,H_h,H_i),this.addVertex(H_a+this._tempNumver0,H_b-this._tempNumver1,H_c,H_f,H_g,H_h,H_i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},H_b.box=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=H_d/2,this._tempNumver1=H_e/2,this._tempNumver2=H_f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H_a-this._tempNumver0,H_b+this._tempNumver1,H_c+this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a+this._tempNumver0,H_b+this._tempNumver1,H_c+this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a-this._tempNumver0,H_b-this._tempNumver1,H_c+this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a+this._tempNumver0,H_b-this._tempNumver1,H_c+this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a+this._tempNumver0,H_b+this._tempNumver1,H_c-this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a-this._tempNumver0,H_b+this._tempNumver1,H_c-this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a+this._tempNumver0,H_b-this._tempNumver1,H_c-this._tempNumver2,H_g,H_h,H_i,H_j),this.addVertex(H_a-this._tempNumver0,H_b-this._tempNumver1,H_c-this._tempNumver2,H_g,H_h,H_i,H_j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},H_b.cone=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*H_c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*H_c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/H_c,this.addVertexIndex(0,H_b,0,H_d,H_e,H_f,H_g,this._tempUint0),this.addVertexIndex(0,0,0,H_d,H_e,H_f,H_g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<H_c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(H_a*this._tempNumver2,0,H_a*this._tempNumver3,H_d,H_e,H_f,H_g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==H_c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(H_a*this._tempNumver2,0,H_a*this._tempNumver3,H_d,H_e,H_f,H_g,this._tempUint0+(this._tempInt0+H_c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==H_c-1?this.addIndexes(this._tempUint1+H_c+2):this.addIndexes(this._tempUint1+this._tempInt0+H_c+1),this.addIndexes(this._tempUint1+this._tempInt0+H_c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},H_b.boundingBoxLine=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H_a,H_e,H_f,H_g,H_h,H_i,H_j),this.addVertex(H_d,H_e,H_f,H_g,H_h,H_i,H_j),this.addVertex(H_a,H_b,H_f,H_g,H_h,H_i,H_j),this.addVertex(H_d,H_b,H_f,H_g,H_h,H_i,H_j),this.addVertex(H_d,H_e,H_c,H_g,H_h,H_i,H_j),this.addVertex(H_a,H_e,H_c,H_g,H_h,H_i,H_j),this.addVertex(H_d,H_b,H_c,H_g,H_h,H_i,H_j),this.addVertex(H_a,H_b,H_c,H_g,H_h,H_i,H_j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},H_b.addVertex=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=H_a,this._vbData[this._posInVBData+1]=H_b,this._vbData[this._posInVBData+2]=H_c,this._vbData[this._posInVBData+3]=H_d,this._vbData[this._posInVBData+4]=H_e,this._vbData[this._posInVBData+5]=H_f,this._vbData[this._posInVBData+6]=H_g,this._posInVBData+=this._floatSizePerVer,this},H_b.addVertexIndex=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){return this._hasBegun||this.addVertexIndexException(),this._vbData[H_h]=H_a,this._vbData[H_h+1]=H_b,this._vbData[H_h+2]=H_c,this._vbData[H_h+3]=H_d,this._vbData[H_h+4]=H_e,this._vbData[H_h+5]=H_f,this._vbData[H_h+6]=H_g,(H_h+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=H_h),this},H_b.addIndexes=function(H_a){var H_b=arguments;this._hasBegun||this.addVertexIndexException();for(var H_c=0;H_c<H_b.length;H_c++)this._ibData[this._posInIBData]=H_b[H_c],this._posInIBData++;return this},H_b.begin=function(H_a,H_b){return this._hasBegun&&this.beginException0(),1!==H_a&&4!==H_a&&this.beginException1(),this._primitiveType=H_a,this._camera=H_b,this._hasBegun=!0,this},H_b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},H_b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(H_a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),H_A.drawCall++,H_F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},H_b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},H_b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},H_b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},H_b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},H_b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},H_b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(28,[new H_ga(0,"vector3",0),new H_ga(12,"vector4",1)])}]),H_a}()),H_W=function(){function H_a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++H_a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new H_mb}H_n(H_a,"laya.d3.core.render.RenderElement");var H_b=H_a.prototype;return H_b.getDynamicBatchBakedVertexs=function(H_a){for(var H_b=this._renderObj._getVertexBuffer(H_a),H_c=H_b.getData().slice(),H_d=H_b.vertexDeclaration,H_e=H_d.getVertexElementByUsage(0).offset/4,H_f=H_d.getVertexElementByUsage(3).offset/4,H_g=this._sprite3D.transform,H_h=H_g.worldMatrix,H_i=H_g.rotation,H_j=H_d.vertexStride/4,H_k=0,H_l=H_c.length;H_k<H_l;H_k+=H_j){var H_m=H_k+H_e,H_n=H_k+H_f;H_sb.transformVector3ArrayToVector3ArrayCoordinate(H_c,H_m,H_h,H_c,H_m),H_sb.transformVector3ArrayByQuat(H_c,H_n,H_i,H_c,H_n)}return H_c},H_b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},H_b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},H_q(0,H_b,"id",function(){return this._id}),H_q(0,H_b,"renderObj",function(){return this._renderObj},function(H_a){this._renderObj!==H_a&&(this._renderObj=H_a)}),H_a._uniqueIDCounter=0,H_a}(),H_X=function(){function H_b(H_a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++H_b._uniqueIDCounter,this._needSort=!1,this._scene=H_a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}H_n(H_b,"laya.d3.core.render.RenderQueue");var H_a=H_b.prototype;return H_a._sortOpaqueFunc=function(H_a,H_b){if(H_a._render&&H_b._render){var H_c=H_a._material.renderQueue-H_b._material.renderQueue;return 0==H_c?H_a._render._distanceForSort-H_b._render._distanceForSort:H_c}return 0},H_a._sortAlphaFunc=function(H_a,H_b){if(H_a._render&&H_b._render){var H_c=H_a._material.renderQueue-H_b._material.renderQueue;return 0==H_c?H_b._render._distanceForSort-H_a._render._distanceForSort:H_c}return 0},H_a._begainRenderElement=function(H_a,H_b,H_c){return!!H_b._beforeRender(H_a)},H_a._sortAlpha=function(H_a){H_b._cameraPosition=H_a,this._finalElements.sort(this._sortAlphaFunc)},H_a._sortOpaque=function(H_a){H_b._cameraPosition=H_a,this._finalElements.sort(this._sortOpaqueFunc)},H_a._preRender=function(H_a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},H_a._render=function(H_a,H_b){for(var H_c,H_d,H_e,H_f,H_g,H_h,H_i=H_A.loopCount,H_j=this._scene,H_k=H_a.camera,H_l=(H_k.id,!1),H_m=0,H_n=this._finalElements.length;H_m<H_n;H_m++){var H_q,H_r,H_s,H_t=this._finalElements[H_m];if(null!=H_t._onPreRenderFunction&&H_t._onPreRenderFunction.call(H_t._sprite3D,H_a),0===H_t._type){if(H_a.owner=H_s=H_t._sprite3D,H_a.renderElement=H_t,H_s._preRenderUpdateComponents(H_a),H_q=H_t.renderObj,H_r=H_t._material,this._begainRenderElement(H_a,H_q,H_r)){if(H_c=H_q._getVertexBuffers(),!(H_e=(H_d=H_q._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[H_d.id]){this._errorRecord[H_d.id]=1;var H_u="vertexBuffer:"+("("+H_d._destroyed+","+H_d._released+","+H_d._referenceCount+","+H_d._buffer+")")+", material:"+(H_r?H_r.__className+"("+H_r._destroyed+","+H_r._released+")":"null")+", owner:"+(H_s?H_s.__className+"("+H_s._destroyed+","+H_s._activeInHierarchy+","+H_s._displayedInStage+")":"null")+", renderObj:"+(H_q?H_q.__className+"("+H_q._destroyed+","+H_q._released+","+H_q._referenceCount+")":"")+", parent:, url:"+(H_s?H_s.url:"")+", disposeStack:"+H_d.disposeStack;H_x.recordError("报错：unknown vertexDeclaration  "+H_u)}continue}if(H_l=(H_f=H_a._shader=H_r._getShader(H_j._shaderDefineValue,H_e.shaderDefineValue,H_s._shaderDefineValue)).bind()||H_i!==H_f._uploadLoopCount,H_c){if(H_f._uploadVertexBuffer!==H_c||H_l){for(var H_v=0;H_v<H_c.length;H_v++){var H_w=H_c[H_v];H_f.uploadAttributesX(H_w.vertexDeclaration.shaderValues.data,H_w)}H_f._uploadVertexBuffer=H_c}}else(H_f._uploadVertexBuffer!==H_d||H_l)&&(H_f.uploadAttributes(H_e.shaderValues.data,null),H_f._uploadVertexBuffer=H_d);(H_f._uploadScene!==H_j||H_l)&&(H_f.uploadSceneUniforms(H_j._shaderValues.data),H_f._uploadScene=H_j),(H_k!==H_f._uploadCamera||H_f._uploadSprite3D!==H_s||H_l)&&(H_f.uploadSpriteUniforms(H_s._shaderValues.data),H_f._uploadSprite3D=H_s),(H_k!==H_f._uploadCamera||H_l)&&(H_f.uploadCameraUniforms(H_k._shaderValues.data),H_f._uploadCamera=H_k),(H_f._uploadMaterial!==H_r||H_l)&&(H_r._upload(),H_f._uploadMaterial=H_r),H_g!==H_r?(H_r._setRenderStateBlendDepth(),H_r._setRenderStateFrontFace(H_b,H_s.transform),H_g=H_r,H_h=H_s):H_h!==H_s&&(H_r._setRenderStateFrontFace(H_b,H_s.transform),H_h=H_s),H_q._render(H_a),H_f._uploadLoopCount=H_i}H_s._postRenderUpdateComponents(H_a)}else if(2===H_t._type){H_t.renderObj;H_a.owner=H_s=H_t._sprite3D,H_a.renderElement=H_t,H_a._batchIndexStart=H_t._tempBatchIndexStart,H_a._batchIndexEnd=H_t._tempBatchIndexEnd,H_q=H_t.renderObj,H_r=H_t._material,this._begainRenderElement(H_a,H_q,H_r)&&(H_e=(H_d=H_q._getVertexBuffer(0)).vertexDeclaration,H_l=(H_f=H_a._shader=H_r._getShader(H_j._shaderDefineValue,H_e.shaderDefineValue,H_s._shaderDefineValue)).bind()||H_i!==H_f._uploadLoopCount,(H_f._uploadVertexBuffer!==H_d||H_l)&&(H_f.uploadAttributes(H_e.shaderValues.data,null),H_f._uploadVertexBuffer=H_d),(H_f._uploadScene!==H_j||H_l)&&(H_f.uploadSceneUniforms(H_j._shaderValues.data),H_f._uploadScene=H_j),(H_k!==H_f._uploadCamera||H_f._uploadSprite3D!==H_s||H_l)&&(H_f.uploadSpriteUniforms(H_s._shaderValues.data),H_f._uploadSprite3D=H_s),(H_k!==H_f._uploadCamera||H_l)&&(H_f.uploadCameraUniforms(H_k._shaderValues.data),H_f._uploadCamera=H_k),(H_f._uploadMaterial!==H_r||H_l)&&(H_r._upload(),H_f._uploadMaterial=H_r),H_g!==H_r?(H_r._setRenderStateBlendDepth(),H_r._setRenderStateFrontFace(H_b,H_s.transform),H_g=H_r,H_h=H_s):H_h!==H_s&&(H_r._setRenderStateFrontFace(H_b,H_s.transform),H_h=H_s),H_q._render(H_a),H_f._uploadLoopCount=H_i)}}},H_a._renderShadow=function(H_a,H_b){for(var H_c,H_d,H_e,H_f,H_g,H_h=H_A.loopCount,H_i=this._scene,H_j=H_a.camera,H_k=!1,H_l=0,H_m=this._finalElements.length;H_l<H_m;H_l++){var H_n,H_q,H_r,H_s=this._finalElements[H_l];0===H_s._type&&(H_a.owner=H_r=H_s._sprite3D,H_b||H_r._projectionViewWorldUpdateCamera===H_j&&H_r._projectionViewWorldUpdateLoopCount===H_A.loopCount||(H_r._render._renderUpdate(H_a._projectionViewMatrix),H_r._projectionViewWorldUpdateLoopCount=H_A.loopCount,H_r._projectionViewWorldUpdateCamera=H_j),H_a.renderElement=H_s,H_r._preRenderUpdateComponents(H_a),H_n=H_s.renderObj,H_q=H_s._material,this._begainRenderElement(H_a,H_n,null)&&(H_d=(H_c=H_n._getVertexBuffer(0)).vertexDeclaration,H_k=(H_e=H_a._shader=H_q._getShader(H_i._shaderDefineValue,H_d.shaderDefineValue,H_r._shaderDefineValue)).bind()||H_h!==H_e._uploadLoopCount,(H_e._uploadVertexBuffer!==H_c||H_k)&&(H_e.uploadAttributes(H_d.shaderValues.data,null),H_e._uploadVertexBuffer=H_c),(H_j!==H_e._uploadCamera||H_e._uploadSprite3D!==H_r||H_k)&&(H_e.uploadSpriteUniforms(H_r._shaderValues.data),H_e._uploadSprite3D=H_r),(H_j!==H_e._uploadCamera||H_k)&&(H_e.uploadCameraUniforms(H_j._shaderValues.data),H_e._uploadCamera=H_j),(H_e._uploadMaterial!==H_q||H_k)&&(H_q._upload(),H_e._uploadMaterial=H_q),H_e._uploadRenderElement,H_f!==H_q?(H_q._setRenderStateFrontFace(!1,H_r.transform),H_f=H_q,H_g=H_r):H_g!==H_r&&(H_q._setRenderStateFrontFace(!1,H_r.transform),H_g=H_r),H_n._render(H_a),H_e._uploadLoopCount=H_h),H_r._postRenderUpdateComponents(H_a))}},H_a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},H_a._addRenderElement=function(H_a){this._renderElements.push(H_a),this._needSort=!0},H_a._addDynamicBatchElement=function(H_a){this._dynamicBatchCombineRenderElements.push(H_a)},H_q(0,H_a,"id",function(){return this._id}),H_b._uniqueIDCounter=0,H_b._cameraPosition=null,H_b}(),H_Y=function(){function H_a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return H_n(H_a,"laya.d3.core.render.RenderState"),H_a.clientWidth=0,H_a.clientHeight=0,H_a}(),H_Z=function(){function H_g(H_a,H_b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new H__a(new H_gb,0),this._corners=[new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb],this._boundingBoxCenter=new H_gb,this._children=H_d(8),this._objects=[],this._tempBoundBoxCorners=[new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb],this._scene=H_a,this._currentDepth=H_b}H_n(H_g,"laya.d3.core.scene.OctreeNode");var H_a=H_g.prototype;return H_x.imps(H_a,{"laya.d3.core.scene.ITreeNode":!0}),H_a.init=function(H_a,H_b){var H_c=new H_gb,H_d=new H_gb;H_gb.scale(H_b,-.5,H_c),H_gb.scale(H_b,.5,H_d),H_gb.add(H_c,H_a,H_c),H_gb.add(H_d,H_a,H_d),this.exactBox=new H_Za(H_c,H_d),this.relaxBox=new H_Za(H_c,H_d)},H_a.addTreeNode=function(H_a){1===Collision.boxContainsBox(this._relaxBox,H_a.boundingBox)?this.addNodeDown(H_a,0):this.addObject(H_a)},H_a.addChild=function(H_a){var H_b=this._children[H_a];if(null==H_b){H_b=new H_g(this._scene,this._currentDepth+1),(this._children[H_a]=H_b)._parent=this,H_gb.subtract(this._exactBox.max,this._exactBox.min,H_g.tempSize),H_gb.multiply(H_g.tempSize,H_g._octreeSplit[H_a],H_g.tempCenter),H_gb.add(this._exactBox.min,H_g.tempCenter,H_g.tempCenter),H_gb.scale(H_g.tempSize,.25,H_g.tempSize);var H_c=new H_gb,H_d=new H_gb;H_gb.subtract(H_g.tempCenter,H_g.tempSize,H_c),H_gb.add(H_g.tempCenter,H_g.tempSize,H_d),H_b.exactBox=new H_Za(H_c,H_d),H_gb.scale(H_g.tempSize,H_g.relax,H_g.tempSize);var H_e=new H_gb,H_f=new H_gb;H_gb.subtract(H_g.tempCenter,H_g.tempSize,H_e),H_gb.add(H_g.tempCenter,H_g.tempSize,H_f),H_b.relaxBox=new H_Za(H_e,H_f)}return H_b},H_a.addObject=function(H_a){(H_a._treeNode=this)._objects.push(H_a)},H_a.removeObject=function(H_a){if(H_a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var H_b=this._objects.indexOf(H_a);return-1!==H_b&&(this._objects.splice(H_b,1),!0)},H_a.clearObject=function(){this._objects.length=0},H_a.addNodeUp=function(H_a,H_b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,H_a.boundingBox)?this._parent.addNodeUp(H_a,H_b-1):this.addNodeDown(H_a,H_b)},H_a.addNodeDown=function(H_a,H_b){if(H_b<this._scene.treeLevel){var H_c=this.inChildIndex(H_a.boundingBoxCenter),H_d=this.addChild(H_c);1===Collision.boxContainsBox(H_d._relaxBox,H_a.boundingBox)?H_d.addNodeDown(H_a,++H_b):this.addObject(H_a)}else this.addObject(H_a)},H_a.inChildIndex=function(H_a){return 4*(H_a.z<this._boundingBoxCenter.z?0:1)+2*(H_a.y<this._boundingBoxCenter.y?0:1)+(H_a.x<this._boundingBoxCenter.x?0:1)},H_a.updateObject=function(H_a){1===Collision.boxContainsBox(this._relaxBox,H_a.boundingBox)?(this.removeObject(H_a),H_a._treeNode=null,this.addNodeDown(H_a,this._currentDepth)):this._parent&&(this.removeObject(H_a),H_a._treeNode=null,this._parent.addNodeUp(H_a,this._currentDepth-1))},H_a.cullingObjects=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g=0,H_h=0,H_i=0,H_j=this._scene._dynamicBatchManager;for(H_g=0,H_f=this._objects.length;H_g<H_f;H_g++){var H_k=this._objects[H_g];if(H_I.isVisible(H_k._owner.layer.mask)&&H_k.enable){if(H_b&&(H_A.treeSpriteCollision+=1,0===H_a.containsBoundSphere(H_k.boundingSphere)))continue;H_k._renderUpdate(H_e),H_k._distanceForSort=H_gb.distance(H_k.boundingSphere.center,H_d)+H_k.sortingFudge;var H_l=H_k._renderElements;for(H_h=0,H_i=H_l.length;H_h<H_i;H_h++){var H_m=H_l[H_h],H_n=H_m._staticBatch;if(H_n&&H_n._material===H_m._material)H_n._addBatchRenderElement(H_m);else{var H_q=H_m.renderObj;H_q.triangleCount<10&&1===H_q._vertexBufferCount&&H_q._getIndexBuffer()&&H_m._material.renderQueue<2&&H_m._canDynamicBatch&&!H_k._owner.isStatic?H_j._addPrepareRenderElement(H_m):this._scene.getRenderQueue(H_m._material.renderQueue)._addRenderElement(H_m)}}}}for(H_g=0;H_g<8;H_g++){var H_r=this._children[H_g];if(null!=H_r){var H_s=H_b;if(H_b){var H_t=H_a.containsBoundBox(H_r._relaxBox);if(H_A.treeNodeCollision+=1,0===H_t)continue;H_s=2===H_t}H_r.cullingObjects(H_a,H_s,H_c,H_d,H_e)}}},H_a.cullingShadowObjects=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g=0,H_h=0,H_i=0;this._scene._dynamicBatchManager;for(H_g=0,H_f=this._objects.length;H_g<H_f;H_g++){var H_j=this._objects[H_g];if(H_j.castShadow&&H_I.isVisible(H_j._owner.layer.mask)&&H_j.enable){if(H_c&&0===H_a[0].containsBoundSphere(H_j.boundingSphere))continue;for(var H_k=1,H_l=H_a.length;H_k<H_l;H_k++){var H_m=H_b[H_k-1];if(0!==H_a[H_k].containsBoundSphere(H_j.boundingSphere)){var H_n=H_j._renderElements;for(H_h=0,H_i=H_n.length;H_h<H_i;H_h++)H_m._addRenderElement(H_n[H_h])}}}}for(H_g=0;H_g<8;H_g++){var H_q=this._children[H_g];if(null!=H_q){var H_r=H_c;if(H_c){var H_s=H_a[0].containsBoundBox(H_q._relaxBox);if(0===H_s)continue;H_r=2===H_s}H_q.cullingShadowObjects(H_a,H_b,H_r,H_d,H_e)}}},H_a.cullingShadowObjectsOnePSSM=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h=H_b[0],H_i=0,H_j=0,H_k=0;for(H_i=0,H_g=this._objects.length;H_i<H_g;H_i++){var H_l=this._objects[H_i];if(H_l.castShadow&&H_I.isVisible(H_l._owner.layer.mask)&&H_l.enable){if(H_d&&0===H_a.containsBoundSphere(H_l.boundingSphere))continue;H_l._renderUpdate(H_c);var H_m=H_l._renderElements;for(H_j=0,H_k=H_m.length;H_j<H_k;H_j++)H_h._addRenderElement(H_m[H_j])}}for(H_i=0;H_i<8;H_i++){var H_n=this._children[H_i];if(null!=H_n){var H_q=H_d;if(H_d){var H_r=H_a.containsBoundBox(H_n._relaxBox);if(0===H_r)continue;H_q=2===H_r}H_n.cullingShadowObjectsOnePSSM(H_a,H_b,H_c,H_q,H_e,H_f)}}},H_a.renderBoudingBox=function(H_a){this._renderBoudingBox(H_a);for(var H_b=0;H_b<8;++H_b){var H_c=this._children[H_b];H_c&&H_c.renderBoudingBox(H_a)}},H_a.buildAllChild=function(H_a){if(H_a<this._scene.treeLevel)for(var H_b=0;H_b<8;H_b++){this.addChild(H_b).buildAllChild(H_a+1)}},H_a._renderBoudingBox=function(H_a){},H_q(0,H_a,"exactBox",function(){return this._exactBox},function(H_a){this._exactBox=H_a,H_gb.add(H_a.min,H_a.max,this._boundingBoxCenter),H_gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),H_q(0,H_a,"relaxBox",function(){return this._relaxBox},function(H_a){(this._relaxBox=H_a).getCorners(this._corners),H__a.createfromPoints(this._corners,this._boundingSphere)}),H_g.debugMode=!1,H_g.relax=1.15,H_g.CHILDNUM=8,H_l(H_g,["tempVector0",function(){return this.tempVector0=new H_gb},"tempSize",function(){return this.tempSize=new H_gb},"tempCenter",function(){return this.tempCenter=new H_gb},"_octreeSplit",function(){return this._octreeSplit=[new H_gb(.25,.25,.25),new H_gb(.75,.25,.25),new H_gb(.25,.75,.25),new H_gb(.75,.75,.25),new H_gb(.25,.25,.75),new H_gb(.75,.25,.75),new H_gb(.25,.75,.75),new H_gb(.75,.75,.75)]}]),H_g}(),H_$=(function(){function H_a(){}H_n(H_a,"laya.d3.core.scene.SceneManager")}(),function(){function H_a(H_a,H_b,H_c,H_d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===H_a&&(H_a=1),void 0===H_b&&(H_b=1),void 0===H_c&&(H_c=1),void 0===H_d&&(H_d=1),this._r=H_a,this._g=H_b,this._b=H_c,this._a=H_d}return H_n(H_a,"laya.d3.core.trail.module.Color",null,"Color$1"),H_a.prototype.cloneTo=function(H_a){H_a._r=this._r,H_a._g=this._g,H_a._b=this._b,H_a._a=this._a},H_l(H_a,["RED",function(){return this.RED=new H_a(1,0,0,1)},"GREEN",function(){return this.GREEN=new H_a(0,1,0,1)},"BLUE",function(){return this.BLUE=new H_a(0,0,1,1)},"CYAN",function(){return this.CYAN=new H_a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new H_a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new H_a(1,0,1,1)},"GRAY",function(){return this.GRAY=new H_a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new H_a(1,1,1,1)},"BLACK",function(){return this.BLACK=new H_a(0,0,0,1)}]),H_a}()),H__=(function(){function H_a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}H_n(H_a,"laya.d3.core.trail.module.Gradient");var H_b=H_a.prototype;H_b.setKeys=function(H_a,H_b){var H_c,H_d;this._colorKeys=H_a;for(var H_e=this.index=0;H_e<H_a.length;H_e++){var H_f=(H_c=H_a[H_e]).color;this._colorKeyData[this.index++]=H_f._r,this._colorKeyData[this.index++]=H_f._g,this._colorKeyData[this.index++]=H_f._b,this._colorKeyData[this.index++]=H_c.time}this._alphaKeys=H_b;for(var H_g=this.index=0;H_g<H_b.length;H_g++)H_d=H_b[H_g],this._alphaKeyData[this.index++]=H_d.alpha,this._alphaKeyData[this.index++]=H_d.time},H_b.cloneTo=function(H_a){var H_b=0,H_c=0,H_d=this.colorKeys,H_e=[];for(H_b=0,H_c=H_d.length;H_b<H_c;H_b++){var H_f=new H_o;H_d[H_b].cloneTo(H_f),H_e.push(H_f)}var H_g=this.alphaKeys,H_h=[];for(H_b=0,H_c=H_g.length;H_b<H_c;H_b++){var H_i=new H__;H_g[H_b].cloneTo(H_i),H_h.push(H_i)}H_a.setKeys(H_e,H_h)},H_q(0,H_b,"mode",function(){return this._mode},function(H_a){this._mode=H_a}),H_q(0,H_b,"colorKeys",function(){return this._colorKeys},function(H_a){this._colorKeys=H_a;for(var H_b=this.index=0;H_b<H_a.length;H_b++){var H_c=H_a[H_b],H_d=H_c.color;this._colorKeyData[this.index++]=H_d._r,this._colorKeyData[this.index++]=H_d._g,this._colorKeyData[this.index++]=H_d._b,this._colorKeyData[this.index++]=H_c.time}}),H_q(0,H_b,"alphaKeys",function(){return this._alphaKeys},function(H_a){this._alphaKeys=H_a;for(var H_b=this.index=0;H_b<H_a.length;H_b++){var H_c=H_a[H_b];this._alphaKeyData[this.index++]=H_c.alpha,this._alphaKeyData[this.index++]=H_c.time}})}(),function(){function H_a(H_a,H_b){this._alpha=NaN,this._time=NaN,void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),this._alpha=H_a,this._time=H_b}H_n(H_a,"laya.d3.core.trail.module.GradientAlphaKey");var H_b=H_a.prototype;return H_b.cloneTo=function(H_a){H_a.alpha=this.alpha,H_a.time=this.time},H_q(0,H_b,"alpha",function(){return this._alpha},function(H_a){this._alpha=H_a}),H_q(0,H_b,"time",function(){return this._time},function(H_a){this._time=H_a}),H_a}()),H_o=function(){function H_a(H_a,H_b){this._color=null,this._time=NaN,void 0===H_b&&(H_b=0),this._color=H_a||new H_$,this._time=H_b}H_n(H_a,"laya.d3.core.trail.module.GradientColorKey");var H_b=H_a.prototype;return H_b.cloneTo=function(H_a){this.color.cloneTo(H_a.color),H_a.time=this.time},H_q(0,H_b,"color",function(){return this._color},function(H_a){this._color=H_a}),H_q(0,H_b,"time",function(){return this._time},function(H_a){this._time=H_a}),H_a}(),H_p=(function(){function H_a(){}H_n(H_a,"laya.d3.core.trail.module.GradientMode"),H_a.Blend=0,H_a.Fixed=1}(),function(){function H_a(){}H_n(H_a,"laya.d3.core.trail.module.TextureMode"),H_a.Stretch=0,H_a.Tile=1}(),function(){function H_a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}H_n(H_a,"laya.d3.core.trail.module.TrailKeyFrame"),H_a.prototype.cloneTo=function(H_a){H_a.time=this.time,H_a.inTangent=this.inTangent,H_a.outTangent=this.outTangent,H_a.value=this.value}}(),function(){function H_b(H_a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new H_gb,this._curPosition=new H_gb,this._delVector3=new H_gb,this._lastFixedVertexPosition=new H_gb,this._pointAtoBVector3=new H_gb,this._pointA=new H_gb,this._pointB=new H_gb,this._owner=H_a,this._id=H_b.renderElementCount++,0==this._id?H_a._owner.transform.position.cloneTo(this._lastPosition):H_a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new H_Ob(H_p.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new H_Ob(H_p.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}H_n(H_b,"laya.d3.core.trail.TrailRenderElement");var H_a=H_b.prototype;H_x.imps(H_a,{"laya.d3.core.render.IRenderable":!0}),H_a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},H_a._addTrailByFirstPosition=function(H_a,H_b){H_gb.subtract(H_b,H_a,this._delVector3),H_gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H_gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H_gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(H_a),H_a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},H_a._addTrailByNextPosition=function(H_a){H_gb.subtract(H_a,this._lastFixedVertexPosition,this._delVector3),H_gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H_gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H_gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=H_gb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=H_oa.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(H_a),H_a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(H_a),this._virtualVerticesCount=2)},H_a._updateVerticesByPosition=function(H_a){this._pointe=H_a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},H_a._updateVertexBuffer2=function(){var H_a,H_b=0,H_c=0,H_d=0;for(H_d=0,H_a=(this._verticesCount+this._virtualVerticesCount)/2;H_d<H_a;H_d++)H_c=0==this._owner.textureMode?(this._VerticesToTailLength[H_d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[H_d],this._vertices2[H_b++]=1-H_c,this._vertices2[H_b++]=1-H_c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},H_a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},H_a._updateDisappear=function(){var H_a,H_b=0;for(H_b=this._curDisappearIndex,H_a=(this._verticesCount+this._virtualVerticesCount)/2;H_b<H_a;H_b++)this._owner._curtime-this._everyGroupVertexBirthTime[H_b]>=this._owner.time+H_oa.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},H_a._beforeRender=function(H_a){return this._camera=H_a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),H_gb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},H_a._render=function(H_a){this._isDead||(H_F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),H_A.drawCall++,H_A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},H_a._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),0===H_a?this._vertexBuffer1:1===H_a?this._vertexBuffer2:null},H_a._getVertexBuffers=function(){return this._vertexBuffers},H_a._getIndexBuffer=function(){return null},H_a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},H_a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},H_q(0,H_a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),H_q(0,H_a,"triangleCount",function(){return 0}),H_b.renderElementCount=0}(),function(){function H_a(){}H_n(H_a,"laya.d3.core.trail.VertexTrail");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration1}),H_q(1,H_a,"vertexDeclaration1",function(){return H_a._vertexDeclaration1}),H_q(1,H_a,"vertexDeclaration2",function(){return H_a._vertexDeclaration2}),H_l(H_a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new H_fa(32,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",41),new H_ga(24,"single",33),new H_ga(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new H_fa(4,[new H_ga(0,"single",38)])}]),H_a}()),H_aa=function(){function H_w(H_a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=H_a}H_n(H_w,"laya.d3.graphics.DynamicBatch");var H_a=H_w.prototype;return H_x.imps(H_a,{"laya.d3.core.render.IRenderable":!0}),H_a._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),0===H_a?this._vertexBuffer:null},H_a._getIndexBuffer=function(){return this._indexBuffer},H_a._getCombineRenderElementFromPool=function(H_a,H_b,H_c){var H_d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return H_d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=H_d=new H_W,H_d._sprite3D=new H_Xb),H_d._sprite3D._render._renderUpdate(H_c),H_d},H_a._getRenderElement=function(H_a,H_b,H_c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*H_w.maxVertexCount),this._indexDatas=new Uint16Array(H_w.maxIndexCount),this._vertexBuffer=H_Ob.create(this._vertexDeclaration,H_w.maxVertexCount,35048),this._indexBuffer=H_Nb.create("ushort",H_w.maxIndexCount,35048));for(var H_d=this._merageElements.length=0,H_e=0,H_f=0,H_g=this._combineRenderElements.length;H_f<H_g;H_f++){var H_h=this._combineRenderElements[H_f],H_i=H_h.getDynamicBatchBakedVertexs(0),H_j=H_h.getBakedIndices(),H_k=H_h._sprite3D.transform._isFrontFaceInvert,H_l=H_d/(this._vertexDeclaration.vertexStride/4),H_m=H_e,H_n=H_m+H_j.length;H_h._tempBatchIndexStart=H_m,H_h._tempBatchIndexEnd=H_n,this._indexDatas.set(H_j,H_e);var H_q=0;if(H_k)for(H_q=H_m;H_q<H_n;H_q+=3){this._indexDatas[H_q]=H_l+this._indexDatas[H_q];var H_r=this._indexDatas[H_q+1],H_s=this._indexDatas[H_q+2];this._indexDatas[H_q+1]=H_l+H_s,this._indexDatas[H_q+2]=H_l+H_r}else for(H_q=H_m;H_q<H_n;H_q+=3)this._indexDatas[H_q]=H_l+this._indexDatas[H_q],this._indexDatas[H_q+1]=H_l+this._indexDatas[H_q+1],this._indexDatas[H_q+2]=H_l+this._indexDatas[H_q+2];H_e+=H_j.length,this._vertexDatas.set(H_i,H_d),H_d+=H_i.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),H_f=this._combineRenderElementPoolIndex=0,H_g=this._materials.length;H_f<H_g;H_f++){var H_t=this._getCombineRenderElementFromPool(H_a,H_b,H_c);H_t._type=2,H_t._staticBatch=null;var H_u=(H_t.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[H_f]]._tempBatchIndexStart,H_v=H_f+1===this._materialToRenderElementsOffsets.length?H_e:this._combineRenderElements[this._materialToRenderElementsOffsets[H_f+1]]._tempBatchIndexStart;H_t._tempBatchIndexStart=H_u,H_t._tempBatchIndexEnd=H_v,H_t._material=this._materials[H_f],this._merageElements.push(H_t)}},H_a._addCombineRenderObjTest=function(H_a){var H_b=H_a.renderObj,H_c=this._currentCombineIndexCount+H_b._getIndexBuffer().indexCount,H_d=this._currentCombineVertexCount+H_b._getVertexBuffer().vertexCount;return!(H_w.maxVertexCount<H_d||H_w.maxIndexCount<H_c)},H_a._addCombineRenderObj=function(H_a){var H_b=H_a.renderObj;this._combineRenderElements.push(H_a),this._currentCombineIndexCount=this._currentCombineIndexCount+H_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H_b._getVertexBuffer().vertexCount},H_a._addCombineMaterial=function(H_a){this._materials.push(H_a)},H_a._addMaterialToRenderElementOffset=function(H_a){this._materialToRenderElementsOffsets.push(H_a)},H_a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},H_a._addToRenderQueue=function(H_a,H_b,H_c,H_d){this._getRenderElement(H_b,H_c,H_d);for(var H_e=0,H_f=this._materials.length;H_e<H_f;H_e++)H_a.getRenderQueue(this._materials[H_e].renderQueue)._addDynamicBatchElement(this._merageElements[H_e])},H_a._beforeRender=function(H_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H_a._render=function(H_a){var H_b=H_a._batchIndexEnd-H_a._batchIndexStart;H_F.mainContext.drawElements(4,H_b,5123,2*H_a._batchIndexStart),H_A.drawCall++,H_A.trianglesFaces+=H_b/3},H_a._getVertexBuffers=function(){return null},H_q(0,H_a,"_vertexBufferCount",function(){return 1}),H_q(0,H_a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H_q(0,H_a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),H_w.maxVertexCount=2e4,H_w.maxIndexCount=4e4,H_w.maxCombineTriangleCount=10,H_w}(),H_ba=function(){function H_w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}H_n(H_w,"laya.d3.graphics.DynamicBatchManager");var H_a=H_w.prototype;return H_a.getDynamicBatch=function(H_a,H_b){var H_c,H_d=H_a.id.toString()+H_b;return this._dynamicBatches[H_d]?H_c=this._dynamicBatches[H_d]:this._dynamicBatches[H_d]=H_c=new H_aa(H_a),H_c},H_a._garbageCollection=function(){for(var H_a in this._dynamicBatches)0===this._dynamicBatches[H_a].combineRenderElementsCount&&delete this._dynamicBatches[H_a]},H_a._addPrepareRenderElement=function(H_a){this._prepareDynamicBatchCombineElements.push(H_a)},H_a._finishCombineDynamicBatch=function(H_a){var H_b,H_c,H_d;this._prepareDynamicBatchCombineElements.sort(H_w._sortPrepareDynamicBatch);for(var H_e,H_f,H_g,H_h,H_i,H_j=-1,H_k=!0,H_l=0,H_m=-1,H_n=0,H_q=this._prepareDynamicBatchCombineElements.length;H_n<H_q;H_n++){var H_r=(H_f=this._prepareDynamicBatchCombineElements[H_n]).renderObj._getVertexBuffer(0).vertexDeclaration,H_s=H_c!==H_r;H_s&&(H_l=0,H_c=H_r);var H_t=H_l!==H_j;if(H_t&&(H_j=H_l),(H_s||H_t)&&(H_g=this.getDynamicBatch(H_r,H_l),H_b=null),H_k)if(H_g._addCombineRenderObjTest(H_f)){if(H_b!==(H_e=H_f._material))H_h&&(H_a.getRenderQueue(H_i._material.renderQueue)._addRenderElement(H_i),H_i=H_h=null,H_m=-1),H_h=H_e,H_m=H_g.combineRenderElementsCount,H_i=H_f,H_b=H_e;else if(H_h){var H_u=H_i.renderObj,H_v=H_f.renderObj;H_u._getVertexBuffer().vertexCount+H_v._getVertexBuffer().vertexCount>H_aa.maxVertexCount||H_u._getIndexBuffer().indexCount+H_v._getIndexBuffer().indexCount>H_aa.maxIndexCount?(H_a.getRenderQueue(H_i._material.renderQueue)._addRenderElement(H_i),H_h=H_e,H_m=H_g.combineRenderElementsCount,H_i=H_f):(H_g._addCombineMaterial(H_h),H_g._addMaterialToRenderElementOffset(H_m),H_g._addCombineRenderObj(H_i),H_i=H_h=null,H_m=-1,H_g._addCombineRenderObj(H_f))}else H_g._addCombineRenderObj(H_f);H_k=!0}else H_h&&(H_a.getRenderQueue(H_i._material.renderQueue)._addRenderElement(H_i),H_i=H_h=null,H_m=-1),H_l++,H_k=!1;else H_d=this._prepareDynamicBatchCombineElements[H_n-1],H_g._addMaterialToRenderElementOffset(H_g.combineRenderElementsCount),H_b=H_d._material,H_g._addCombineMaterial(H_b),H_g._addCombineRenderObj(H_d),H_k=!0,H_b!==(H_e=H_f._material)?(H_h=H_e,H_m=H_g.combineRenderElementsCount,H_i=H_f):H_g._addCombineRenderObj(H_f),H_b=H_e}H_h&&(H_a.getRenderQueue(H_i._material.renderQueue)._addRenderElement(H_i),H_i=H_h=null,H_m=-1),this._prepareDynamicBatchCombineElements.length=0},H_a._clearRenderElements=function(){for(var H_a in this._dynamicBatches)this._dynamicBatches[H_a]._clearRenderElements()},H_a._addToRenderQueue=function(H_a,H_b,H_c,H_d){for(var H_e in this._dynamicBatches){var H_f=this._dynamicBatches[H_e];0<H_f.combineRenderElementsCount&&H_f._addToRenderQueue(H_a,H_b,H_c,H_d)}},H_a.dispose=function(){this._dynamicBatches=null},H_w._sortPrepareDynamicBatch=function(H_a,H_b){return H_a._mainSortID-H_b._mainSortID},H_w}(),H_ca=function(){function H_a(){}return H_n(H_a,"laya.d3.graphics.FrustumCulling"),H_a.renderShadowObjectCulling=function(H_a,H_b,H_c,H_d,H_e){var H_f=0,H_g=0,H_h=0,H_i=0;for(H_f=0,H_h=H_c.length;H_f<H_h;H_f++){var H_j=H_c[H_f];H_j&&H_j._clearRenderElements()}var H_k,H_l,H_m,H_n=H_a._cullingRenders;if(1<H_e){for(H_f=0,H_h=H_a._cullingRendersLength;H_f<H_h;H_f++)if((H_k=H_n[H_f]).castShadow&&H_I.isVisible(H_k._owner.layer.mask)&&H_k.enable)for(var H_q=1,H_r=H_b.length;H_q<H_r;H_q++)if(H_l=H_c[H_q-1],0!==H_b[H_q].containsBoundSphere(H_k.boundingSphere))for(H_g=0,H_i=(H_m=H_k._renderElements).length;H_g<H_i;H_g++)H_l._addRenderElement(H_m[H_g])}else for(H_f=0,H_h=H_a._cullingRendersLength;H_f<H_h;H_f++)if((H_k=H_n[H_f]).castShadow&&H_I.isVisible(H_k._owner.layer.mask)&&H_k.enable&&0!==H_b[0].containsBoundSphere(H_k.boundingSphere))for(H_k._renderUpdate(H_d),H_l=H_c[0],H_g=0,H_i=(H_m=H_k._renderElements).length;H_g<H_i;H_g++)H_l._addRenderElement(H_m[H_g])},H_a.renderShadowObjectCullingOctree=function(H_a,H_b,H_c,H_d,H_e){for(var H_f=0,H_g=H_c.length;H_f<H_g;H_f++){var H_h=H_c[H_f];H_h&&H_h._clearRenderElements()}1<H_e?H_a.treeRoot.cullingShadowObjects(H_b,H_c,!0,0,H_a):H_a.treeRoot.cullingShadowObjectsOnePSSM(H_b[0],H_c,H_d,!0,0,H_a)},H_a.renderObjectCulling=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=0,H_h=0,H_i=0,H_j=0,H_k=H_b._quenes,H_l=H_b._dynamicBatchManager,H_m=H_b._cullingRenders;for(H_g=0,H_h=H_k.length;H_g<H_h;H_g++){var H_n=H_k[H_g];H_n&&H_n._clearRenderElements()}var H_q=H_da._staticBatchManagers;for(H_g=0,H_h=H_q.length;H_g<H_h;H_g++)H_q[H_g]._clearRenderElements();H_l._clearRenderElements();var H_r=H_c.transform.position;for(H_g=0,H_h=H_b._cullingRendersLength;H_g<H_h;H_g++){var H_s=H_m[H_g];if(H_I.isVisible(H_s._owner.layer.mask)&&H_s.enable&&0!==H_a.containsBoundSphere(H_s.boundingSphere)&&H_s._renderUpdate(H_f)){H_s._distanceForSort=H_gb.distance(H_s.boundingSphere.center,H_r)+H_s.sortingFudge;var H_t=H_s._renderElements;for(H_i=0,H_j=H_t.length;H_i<H_j;H_i++){var H_u=H_t[H_i],H_v=H_u._staticBatch;if(H_v&&H_v._material===H_u._material)H_v._addBatchRenderElement(H_u);else{var H_w=H_u.renderObj;H_w.triangleCount<10&&1===H_w._vertexBufferCount&&H_w._getIndexBuffer()&&H_u._material.renderQueue<2&&H_u._canDynamicBatch&&!H_s._owner.isStatic?H_l._addPrepareRenderElement(H_u):H_b.getRenderQueue(H_u._material.renderQueue)._addRenderElement(H_u)}}}}for(H_g=0,H_h=H_q.length;H_g<H_h;H_g++)H_q[H_g]._addToRenderQueue(H_b,H_d,H_e,H_f);H_l._finishCombineDynamicBatch(H_b),H_l._addToRenderQueue(H_b,H_d,H_e,H_f)},H_a.renderObjectCullingOctree=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=0,H_h=0,H_i=H_b._quenes,H_j=H_b._dynamicBatchManager;for(H_g=0,H_h=H_i.length;H_g<H_h;H_g++){var H_k=H_i[H_g];H_k&&H_k._clearRenderElements()}var H_l=H_da._staticBatchManagers;for(H_g=0,H_h=H_l.length;H_g<H_h;H_g++)H_l[H_g]._clearRenderElements();for(H_j._clearRenderElements(),H_b._cullingRenders.length=0,H_b.treeRoot.cullingObjects(H_a,!0,0,H_c.transform.position,H_f),H_g=0,H_h=H_l.length;H_g<H_h;H_g++)H_l[H_g]._addToRenderQueue(H_b,H_d,H_e,H_f);H_j._finishCombineDynamicBatch(H_b),H_j._addToRenderQueue(H_b,H_d,H_e,H_f)},H_a.renderObjectCullingNoBoundFrustum=function(H_a,H_b,H_c,H_d,H_e){var H_f=0,H_g=0,H_h=0,H_i=0,H_j=H_a._quenes,H_k=H_a._dynamicBatchManager,H_l=H_a._cullingRenders;for(H_f=0,H_g=H_j.length;H_f<H_g;H_f++){var H_m=H_j[H_f];H_m&&H_m._clearRenderElements()}var H_n=H_da._staticBatchManagers;for(H_f=0,H_g=H_n.length;H_f<H_g;H_f++)H_n[H_f]._clearRenderElements();H_k._clearRenderElements();var H_q=H_b.transform.position;for(H_f=0,H_g=H_a._cullingRendersLength;H_f<H_g;H_f++){var H_r=H_l[H_f];if(H_I.isVisible(H_r._owner.layer.mask)&&H_r.enable){H_r._renderUpdate(H_e),H_r._distanceForSort=H_gb.distance(H_r.boundingSphere.center,H_q)+H_r.sortingFudge;var H_s=H_r._renderElements;for(H_h=0,H_i=H_s.length;H_h<H_i;H_h++){var H_t=H_s[H_h],H_u=H_t._staticBatch;if(H_u&&H_u._material===H_t._material)H_u._addBatchRenderElement(H_t);else{var H_v=H_t.renderObj;H_v.triangleCount<10&&1===H_v._vertexBufferCount&&H_v._getIndexBuffer()&&H_t._material.renderQueue<2&&H_t._canDynamicBatch&&!H_r._owner.isStatic?H_k._addPrepareRenderElement(H_t):H_a.getRenderQueue(H_t._material.renderQueue)._addRenderElement(H_t)}}}}for(H_f=0,H_g=H_n.length;H_f<H_g;H_f++)H_n[H_f]._addToRenderQueue(H_a,H_c,H_d,H_e);H_k._finishCombineDynamicBatch(H_a),H_k._addToRenderQueue(H_a,H_c,H_d,H_e)},H_a}(),H_da=function(){function H_f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}H_n(H_f,"laya.d3.graphics.StaticBatchManager");var H_a=H_f.prototype;return H_a._finishInit=function(){for(var H_a in this._staticBatches)this._staticBatches[H_a]._finishInit();this._initBatchRenderElements.length=0},H_a._initStaticBatchs=function(H_a){throw new Error("StaticBatchManager:must override this function.")},H_a._addInitBatchSprite=function(H_a){for(var H_b=H_a._render._renderElements,H_c=0,H_d=H_b.length;H_c<H_d;H_c++)this._initBatchRenderElements.push(H_b[H_c])},H_a._clearRenderElements=function(){for(var H_a in this._staticBatches)this._staticBatches[H_a]._clearRenderElements()},H_a._garbageCollection=function(H_a){var H_b=H_a._staticBatch,H_c=H_b._initBatchRenderElements,H_d=H_c.indexOf(H_a);H_c.splice(H_d,1),0===H_c.length&&(H_b.dispose(),delete this._staticBatches[H_b._key])},H_a._addToRenderQueue=function(H_a,H_b,H_c,H_d){for(var H_e in this._staticBatches){var H_f=this._staticBatches[H_e];0<H_f._batchRenderElements.length&&H_f._updateToRenderQueue(H_a,H_d)}},H_a.dispose=function(){this._staticBatches=null},H_f._addToStaticBatchQueue=function(H_a){H_a instanceof laya.d3.core.RenderableSprite3D&&H_a._addToInitStaticBatchManager();for(var H_b=0,H_c=H_a.numChildren;H_b<H_c;H_b++)H_f._addToStaticBatchQueue(H_a._childs[H_b])},H_f.combine=function(H_a,H_b){var H_c,H_d=0,H_e=0;if(H_b)for(H_d=0,H_e=H_b.length;H_d<H_e;H_d++){H_b[H_d]._addToInitStaticBatchManager()}else H_a&&H_f._addToStaticBatchQueue(H_a);for(H_d=0,H_e=H_f._staticBatchManagers.length;H_d<H_e;H_d++)(H_c=H_f._staticBatchManagers[H_d])._initStaticBatchs(H_a),H_c._finishInit()},H_f._staticBatchManagers=[],H_f}(),H_ea=function(){function H_a(H_a,H_b,H_c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=H_a,this._manager=H_b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=H_c}H_n(H_a,"laya.d3.graphics.StaticBatch");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H_b._binarySearch=function(H_a){for(var H_b=0,H_c=this._batchRenderElements.length-1,H_d=0;H_b<=H_c;)H_d=Math.floor((H_b+H_c)/2),this._compareBatchRenderElement(this._batchRenderElements[H_d],H_a)?H_c=H_d-1:H_b=H_d+1;return H_b},H_b._compareBatchRenderElement=function(H_a,H_b){throw new Error("StaticBatch:must override this function.")},H_b._getVertexDecLightMap=function(H_a){return H_a===H_Na.vertexDeclaration?H_Ia.vertexDeclaration:H_a===H_Ma.vertexDeclaration?H_Ha.vertexDeclaration:H_a===H_Ba.vertexDeclaration?H_wa.vertexDeclaration:H_a===H_Ra.vertexDeclaration?null:H_a===H_ra.vertexDeclaration?H_sa.vertexDeclaration:H_a===H_Pa.vertexDeclaration?H_Ka.vertexDeclaration:H_a===H_Fa.vertexDeclaration?H_Ga.vertexDeclaration:H_a===H_Oa.vertexDeclaration?H_Ja.vertexDeclaration:H_a===H_Ma.vertexDeclaration?H_Ha.vertexDeclaration:H_a===H_Ca.vertexDeclaration?H_xa.vertexDeclaration:H_a===H_Ra.vertexDeclaration?null:H_a===H_ra.vertexDeclaration?H_sa.vertexDeclaration:H_a===H_Qa.vertexDeclaration?H_La.vertexDeclaration:H_a===H_Fa.vertexDeclaration?H_Ga.vertexDeclaration:H_a},H_b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},H_b._addBatchRenderElement=function(H_a){this._batchRenderElements.splice(this._binarySearch(H_a),0,H_a)},H_b._updateToRenderQueue=function(H_a,H_b){this._combineRenderElementPoolIndex=0,this._getRenderElement(H_a.getRenderQueue(this._material.renderQueue)._renderElements,H_a,H_b)},H_b._getRenderElement=function(H_a,H_b,H_c){throw new Error("StaticBatch:must override this function.")},H_b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},H_b._clearRenderElements=function(){this._batchRenderElements.length=0},H_b.dispose=function(){},H_b._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),null},H_b._getIndexBuffer=function(){return null},H_b._beforeRender=function(H_a){return!0},H_b._render=function(H_a){},H_b._getVertexBuffers=function(){return null},H_q(0,H_b,"_vertexBufferCount",function(){return 1}),H_q(0,H_b,"triangleCount",function(){return 0}),H_a.combine=function(H_a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),H_da.combine(H_a)},H_a.maxBatchVertexCount=65535,H_a}(),H_fa=function(){function H_g(H_a,H_b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++H_g._uniqueIDCounter,this._id>H_g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",H_g.maxVertexDeclaration);this._shaderValues=new H_mb,this._vertexElementsDic={},this._vertexStride=H_a,this._vertexElements=H_b;for(var H_c=0;H_c<H_b.length;H_c++){var H_d=H_b[H_c],H_e=H_d.elementUsage;this._vertexElementsDic[H_e]=H_d;var H_f=[H_g._getTypeSize(H_d.elementFormat)/4,5126,!1,this._vertexStride,H_d.offset];switch(this._shaderValues.setValue(H_e,H_f),H_e){case 1:this._addShaderDefine(H_Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(H_Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(H_Ab.SHADERDEFINE_UV1)}}}H_n(H_g,"laya.d3.graphics.VertexDeclaration");var H_a=H_g.prototype;return H_a._addShaderDefine=function(H_a){this._shaderDefineValue|=H_a},H_a._removeShaderDefine=function(H_a){this._shaderDefineValue&=~H_a},H_a.getVertexElements=function(){return this._vertexElements.slice()},H_a.getVertexElementByUsage=function(H_a){return this._vertexElementsDic[H_a]},H_a.unBinding=function(){},H_q(0,H_a,"shaderDefineValue",function(){return this._shaderDefineValue}),H_q(0,H_a,"id",function(){return this._id}),H_q(0,H_a,"vertexStride",function(){return this._vertexStride}),H_q(0,H_a,"shaderValues",function(){return this._shaderValues}),H_g._getTypeSize=function(H_a){switch(H_a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},H_g.getVertexStride=function(H_a){for(var H_b=0,H_c=0;H_c<H_a.Length;H_c++){var H_d=H_a[H_c],H_e=H_d.offset+H_g._getTypeSize(H_d.elementFormat);H_b<H_e&&(H_b=H_e)}return H_b},H_g._maxVertexDeclarationBit=1e3,H_g._uniqueIDCounter=1,H_l(H_g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),H_g}(),H_ga=function(){function H_a(H_a,H_b,H_c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=H_a,this.elementFormat=H_b,this.elementUsage=H_c}return H_n(H_a,"laya.d3.graphics.VertexElement"),H_a}(),H_ha=(function(){function H_a(){}H_n(H_a,"laya.d3.graphics.VertexElementFormat"),H_a.Single="single",H_a.Vector2="vector2",H_a.Vector3="vector3",H_a.Vector4="vector4",H_a.Color="color",H_a.Byte4="byte4",H_a.Short2="short2",H_a.Short4="short4",H_a.NormalizedShort2="normalizedshort2",H_a.NormalizedShort4="normalizedshort4",H_a.HalfVector2="halfvector2",H_a.HalfVector4="halfvector4"}(),function(){function H_a(){}H_n(H_a,"laya.d3.graphics.VertexElementUsage"),H_a.POSITION0=0,H_a.COLOR0=1,H_a.TEXTURECOORDINATE0=2,H_a.NORMAL0=3,H_a.BINORMAL0=4,H_a.TANGENT0=5,H_a.BLENDINDICES0=6,H_a.BLENDWEIGHT0=7,H_a.DEPTH0=8,H_a.FOG0=9,H_a.POINTSIZE0=10,H_a.SAMPLE0=11,H_a.TESSELLATEFACTOR0=12,H_a.COLOR1=13,H_a.NEXTTEXTURECOORDINATE0=14,H_a.TEXTURECOORDINATE1=15,H_a.NEXTTEXTURECOORDINATE1=16,H_a.CORNERTEXTURECOORDINATE0=17,H_a.VELOCITY0=18,H_a.STARTCOLOR0=19,H_a.STARTSIZE=20,H_a.AGEADDSCALE0=21,H_a.STARTROTATION=22,H_a.ENDCOLOR0=23,H_a.STARTLIFETIME=24,H_a.TIME0=33,H_a.SHAPEPOSITIONSTARTLIFETIME=30,H_a.DIRECTIONTIME=32,H_a.SIZEROTATION0=27,H_a.RADIUS0=28,H_a.RADIAN0=29,H_a.STARTSPEED=31,H_a.RANDOM0=34,H_a.RANDOM1=35,H_a.SIMULATIONWORLDPOSTION=36,H_a.SIMULATIONWORLDROTATION=37,H_a.TEXTURECOORDINATE0X=38,H_a.TEXTURECOORDINATE0X1=39,H_a.TEXTURECOORDINATE0Y=40,H_a.OFFSETVECTOR=41}(),function(){function H_a(H_a,H_b,H_c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=H_a,this._textureCoordinate0=H_b,this._time=H_c}H_n(H_a,"laya.d3.graphics.VertexGlitter");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate0}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"time",function(){return this._time}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(24,[new H_ga(0,"vector3",0),new H_ga(12,"vector2",2),new H_ga(20,"single",33)])}])}(),function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=H_a,this._position=H_b,this._velocity=H_c,this._startColor=H_d,this._endColor=H_e,this._sizeRotation=H_f,this._radius=H_g,this._radian=H_h,this._ageAddScale=H_i,this._time=H_j}H_n(H_a,"laya.d3.graphics.VertexParticle");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"endColor",function(){return this._endColor}),H_q(0,H_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H_q(0,H_b,"sizeRotation",function(){return this._sizeRotation}),H_q(0,H_b,"velocity",function(){return this._velocity}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"startColor",function(){return this._startColor}),H_q(0,H_b,"radius",function(){return this._radius}),H_q(0,H_b,"radian",function(){return this._radian}),H_q(0,H_b,"ageAddScale",function(){return this._ageAddScale}),H_q(0,H_b,"time",function(){return this._time}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(116,[new H_ga(0,"vector4",17),new H_ga(16,"vector3",0),new H_ga(28,"vector3",18),new H_ga(40,"vector4",19),new H_ga(56,"vector4",23),new H_ga(72,"vector3",27),new H_ga(84,"vector2",28),new H_ga(92,"vector4",29),new H_ga(108,"single",24),new H_ga(112,"single",33)])}])}(),function(){function H_a(H_a){this._position=null,this._position=H_a}H_n(H_a,"laya.d3.graphics.VertexPosition");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(12,[new H_ga(0,"vector3",0)])}]),H_a}()),H_ia=function(){function H_a(H_a,H_b){this._position=null,this._normal=null,this._position=H_a,this._normal=H_b}H_n(H_a,"laya.d3.graphics.VertexPositionNormal");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(24,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3)])}]),H_a}(),H_ja=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._color=null,this._position=H_a,this._normal=H_b,this._color=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColor");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(40,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1)])}]),H_a}(),H_ka=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._blendIndex=H_d,this._blendWeight=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorSkin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(72,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6)])}]),H_a}(),H_la=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._tangent=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(88,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6),new H_ga(72,"vector4",5)])}]),H_a}(),H_ma=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._tangent=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(84,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6),new H_ga(72,"vector3",5)])}]),H_a}(),H_na=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._tangent=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(56,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector4",5)])}]),H_a}(),H_qa=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._tangent=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(52,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector3",5)])}]),H_a}(),H_ra=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(48,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2)])}]),H_a}(),H_sa=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(56,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15)])}]),H_a}(),H_ta=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._blendIndex=H_f,this._blendWeight=H_g}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(88,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15),new H_ga(56,"vector4",7),new H_ga(72,"vector4",6)])}]),H_a}(),H_ua=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._tangent=H_f,this._blendIndex=H_g,this._blendWeight=H_h}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(104,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15),new H_ga(56,"vector4",7),new H_ga(72,"vector4",6),new H_ga(88,"vector4",5)])}]),H_a}(),H_va=function(){function H_a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_b.VertexPositionNormalColorTexture0SkinTangent=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._tangent=H_f,this._blendIndex=H_g,this._blendWeight=H_h},H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(100,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15),new H_ga(56,"vector4",7),new H_ga(72,"vector4",6),new H_ga(88,"vector3",5)])}]),H_a}(),H_wa=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._tangent=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(72,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15),new H_ga(56,"vector4",5)])}]),H_a}(),H_xa=function(){function H_a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_b.VertexPositionNormalColorTexture0Tangent=function(H_a,H_b,H_c,H_d,H_e,H_f){this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._tangent=H_f},H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(68,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector2",15),new H_ga(56,"vector3",5)])}]),H_a}(),H_ya=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(80,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector4",7),new H_ga(64,"vector4",6)])}]),H_a}(),H_za=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d,this._tangent=H_e,this._blendIndex=H_f,this._blendWeight=H_g}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(96,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector4",7),new H_ga(64,"vector4",6),new H_ga(80,"vector4",5)])}]),H_a}(),H_Aa=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d,this._tangent=H_e,this._blendIndex=H_f,this._blendWeight=H_g}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(92,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector4",7),new H_ga(64,"vector4",6),new H_ga(80,"vector3",5)])}]),H_a}(),H_Ba=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d,this._tangent=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(64,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector4",5)])}]),H_a}(),H_Ca=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._color=H_c,this._textureCoordinate=H_d,this._tangent=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"color",function(){return this._color}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(60,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",1),new H_ga(40,"vector2",2),new H_ga(48,"vector3",5)])}]),H_a}(),H_Da=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._tangent=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNormalSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(40,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector4",5)])}]),H_a}(),H_Ea=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._tangent=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(36,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector3",5)])}]),H_a}(),H_Fa=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(32,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2)])}]),H_a}(),H_Ga=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(40,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15)])}]),H_a}(),H_Ha=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(72,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6)])}]),H_a}(),H_Ia=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d,this._tangent=H_e,this._blendIndex=H_f,this._blendWeight=H_g}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(88,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6),new H_ga(72,"vector4",5)])}]),H_a}(),H_Ja=function(){function H_a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_b.VertexPositionNormalTexture0SkinTangent=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d,this._tangent=H_e,this._blendIndex=H_f,this._blendWeight=H_g},H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(84,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15),new H_ga(40,"vector4",7),new H_ga(56,"vector4",6),new H_ga(72,"vector3",5)])}]),H_a}(),H_Ka=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d,this._tangent=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(56,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15),new H_ga(40,"vector4",5)])}]),H_a}(),H_La=function(){function H_a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_b.VertexPositionNormalTexture0Tangent=function(H_a,H_b,H_c,H_d,H_e){this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_c,this._textureCoordinate1=H_d,this._tangent=H_e},H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(52,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15),new H_ga(40,"vector3",5)])}]),H_a}(),H_Ma=function(){function H_a(H_a,H_b,H_c,H_d,H_e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c,this._blendIndex=H_d,this._blendWeight=H_e}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(64,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector4",7),new H_ga(48,"vector4",6)])}]),H_a}(),H_Na=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c,this._tangent=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(80,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector4",7),new H_ga(48,"vector4",6),new H_ga(64,"vector4",5)])}]),H_a}(),H_Oa=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c,this._tangent=H_d,this._blendIndex=H_e,this._blendWeight=H_f}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(76,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector4",7),new H_ga(48,"vector4",6),new H_ga(64,"vector3",5)])}]),H_a}(),H_Pa=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c,this._tangent=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(48,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector4",5)])}]),H_a}(),H_Qa=function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c,this._tangent=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(44,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector3",5)])}]),H_a}(),H_Ra=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNTBTexture");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(56,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector3",5),new H_ga(36,"vector3",4),new H_ga(48,"vector2",2)])}]),H_a}(),H_Sa=function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=H_a,this._normal=H_b,this._textureCoordinate0=H_d,this._textureCoordinate1=H_e,this._tangent=H_f,H_c=H_c,this._blendIndex=H_g,this._blendWeight=H_h}H_n(H_a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"tangent",function(){return this._tangent}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(0,H_b,"textureCoordinate1",function(){return this._textureCoordinate1}),H_q(0,H_b,"blendIndex",function(){return this._blendIndex}),H_q(0,H_b,"blendWeight",function(){return this._blendWeight}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(96,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector3",5),new H_ga(36,"vector3",4),new H_ga(48,"vector2",2),new H_ga(56,"vector2",15),new H_ga(64,"vector4",7),new H_ga(80,"vector4",6)])}]),H_a}(),H_Ta=function(){function H_a(H_a,H_b,H_c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H_a,this._normal=H_b,this._textureCoordinate=H_c}H_n(H_a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"textureCoordinate",function(){return this._textureCoordinate}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(88,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector3",5),new H_ga(36,"vector3",4),new H_ga(48,"vector2",2),new H_ga(56,"vector4",7),new H_ga(72,"vector4",6)])}]),H_a}(),H_Ua=(function(){function H_a(H_a,H_b,H_c,H_d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=H_a,this._normal=H_b,this._textureCoord0=H_c,this._textureCoord1=H_d}H_n(H_a,"laya.d3.graphics.VertexPositionTerrain");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"normal",function(){return this._normal}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoord0",function(){return this._textureCoord0}),H_q(0,H_b,"textureCoord1",function(){return this._textureCoord1}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(40,[new H_ga(0,"vector3",0),new H_ga(12,"vector3",3),new H_ga(24,"vector2",2),new H_ga(32,"vector2",15)])}])}(),function(){function H_a(H_a,H_b){this._position=null,this._textureCoordinate0=null,this._position=H_a,this._textureCoordinate0=H_b}H_n(H_a,"laya.d3.graphics.VertexPositionTexture0");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"position",function(){return this._position}),H_q(0,H_b,"textureCoordinate0",function(){return this._textureCoordinate0}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(20,[new H_ga(0,"vector3",0),new H_ga(12,"vector2",2)])}]),H_a}()),H_Va=(function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m,H_n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H_a,this._positionStartLifeTime=H_b,this._velocity=H_c,this._startColor=H_d,this._startSize=H_e,this._startRotation0=H_f,this._startRotation1=H_g,this._startRotation2=H_h,this._startLifeTime=H_i,this._time=H_j,this._startSpeed=H_k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H_n}H_n(H_a,"laya.d3.graphics.VertexShurikenParticleBillboard");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H_q(0,H_b,"random1",function(){return this._randoms1}),H_q(0,H_b,"startRotation2",function(){return this._startRotation2}),H_q(0,H_b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),H_q(0,H_b,"velocity",function(){return this._velocity}),H_q(0,H_b,"random0",function(){return this._randoms0}),H_q(0,H_b,"startSize",function(){return this._startSize}),H_q(0,H_b,"startColor",function(){return this._startColor}),H_q(0,H_b,"startRotation0",function(){return this._startRotation0}),H_q(0,H_b,"startRotation1",function(){return this._startRotation1}),H_q(0,H_b,"startLifeTime",function(){return this._startLifeTime}),H_q(0,H_b,"time",function(){return this._time}),H_q(0,H_b,"startSpeed",function(){return this._startSpeed}),H_q(0,H_b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(152,[new H_ga(0,"vector4",17),new H_ga(16,"vector4",30),new H_ga(32,"vector4",32),new H_ga(48,"vector4",19),new H_ga(64,"vector3",20),new H_ga(76,"vector3",22),new H_ga(88,"single",31),new H_ga(92,"vector4",34),new H_ga(108,"vector4",35),new H_ga(124,"vector3",36),new H_ga(136,"vector4",37)])}])}(),function(){function H_a(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m,H_n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H_a,this._positionStartLifeTime=H_b,this._velocity=H_c,this._startColor=H_d,this._startSize=H_e,this._startRotation0=H_f,this._startRotation1=H_g,this._startRotation2=H_h,this._startLifeTime=H_i,this._time=H_j,this._startSpeed=H_k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H_n}H_n(H_a,"laya.d3.graphics.VertexShurikenParticleMesh");var H_b=H_a.prototype;H_x.imps(H_b,{"laya.d3.graphics.IVertex":!0}),H_q(0,H_b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H_q(0,H_b,"velocity",function(){return this._velocity}),H_q(0,H_b,"position",function(){return this._positionStartLifeTime}),H_q(0,H_b,"random0",function(){return this._randoms0}),H_q(0,H_b,"startSize",function(){return this._startSize}),H_q(0,H_b,"startColor",function(){return this._startColor}),H_q(0,H_b,"startRotation0",function(){return this._startRotation0}),H_q(0,H_b,"startRotation1",function(){return this._startRotation1}),H_q(0,H_b,"random1",function(){return this._randoms1}),H_q(0,H_b,"startRotation2",function(){return this._startRotation2}),H_q(0,H_b,"startLifeTime",function(){return this._startLifeTime}),H_q(0,H_b,"time",function(){return this._time}),H_q(0,H_b,"startSpeed",function(){return this._startSpeed}),H_q(0,H_b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H_q(0,H_b,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_q(1,H_a,"vertexDeclaration",function(){return H_a._vertexDeclaration}),H_l(H_a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H_fa(172,[new H_ga(0,"vector3",0),new H_ga(12,"vector4",1),new H_ga(28,"vector2",2),new H_ga(36,"vector4",30),new H_ga(52,"vector4",32),new H_ga(68,"vector4",19),new H_ga(84,"vector3",20),new H_ga(96,"vector3",22),new H_ga(108,"single",31),new H_ga(112,"vector4",34),new H_ga(128,"vector4",35),new H_ga(144,"vector3",36),new H_ga(156,"vector4",37)])}])}(),function(){function H_v(H_a,H_b,H_c,H_d,H_e,H_f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=H_c,this._materials=H_d,this._subMeshes=H_e,this._materialMap=H_f,this._version=H_b,this._onLoaded(H_a)}H_n(H_v,"laya.d3.loaders.LoadModelV01");var H_a=H_v.prototype;return H_a._onLoaded=function(H_a){this._readData=H_a,this.READ_BLOCK();for(var H_b=0;H_b<this._BLOCK.count;H_b++){var H_c=this._readData.getUint16(),H_d=this._strings[H_c],H_e=this["READ_"+H_d];if(null==H_e)throw new Error("model file err,no this function:"+H_c+" "+H_d);if(!H_e.call(this))break}return this._mesh},H_a.onError=function(){},H_a._readString=function(){return this._strings[this._readData.getUint16()]},H_a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},H_a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},H_a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var H_a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var H_b=0;H_b<this._STRINGS.size;H_b++)this._strings[H_b]=this._readData.readUTFString();return this._readData.pos=H_a,!0},H_a.READ_MATERIAL=function(){var H_a=this._readData.getUint16(),H_b=(this._readString(),this._readString());return this._materials[H_a]="null"!==H_b?H_t.getRes(this._materialMap[H_b]):new H_Eb,!0},H_a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var H_a,H_b=this._readData.__getBuffer(),H_c=0,H_d=this._readData.getUint32(),H_e=this._readData.getUint32(),H_f=(new Float32Array(H_b.slice(H_d+this._DATA.offset,H_d+this._DATA.offset+H_e)),this._readData.getUint32()),H_g=this._readData.getUint32(),H_h=new Float32Array(H_b.slice(H_f+this._DATA.offset,H_f+this._DATA.offset+H_g));for(this.mesh._inverseBindPoses=[],H_c=0,H_a=H_h.length;H_c<H_a;H_c+=16){var H_i=new H_ab(H_h[H_c+0],H_h[H_c+1],H_h[H_c+2],H_h[H_c+3],H_h[H_c+4],H_h[H_c+5],H_h[H_c+6],H_h[H_c+7],H_h[H_c+8],H_h[H_c+9],H_h[H_c+10],H_h[H_c+11],H_h[H_c+12],H_h[H_c+13],H_h[H_c+14],H_h[H_c+15]);this.mesh._inverseBindPoses.push(H_i)}break;default:throw new Error("LoadModel:unknown version.")}return!0},H_a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var H_a=this._readString();this._shaderAttributes=H_a.match(H_v._attrReg);var H_b=this._readData.getUint32(),H_c=this._readData.getUint32(),H_d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),H_e=this._readData.getUint32(),H_f=this._readData.getUint32(),H_g=this._readData.getUint32(),H_h=this._readData.__getBuffer(),H_i=new H_jb(this._mesh),H_j=this._getVertexDeclaration(),H_k=H_Ob.create(H_j,H_e/H_j.vertexStride,35044,!0),H_l=H_d+this._DATA.offset,H_m=H_h.slice(H_l,H_l+H_e);H_k.setData(new Float32Array(H_m));for(var H_n=(H_i._vertexBuffer=H_k).vertexDeclaration.getVertexElements(),H_q=0;H_q<H_n.length;H_q++)H_i._bufferUsage[H_n[H_q].elementUsage]=H_k;var H_r=H_Nb.create("ushort",H_c/2,35044,!0),H_s=H_b+this._DATA.offset,H_t=H_h.slice(H_s,H_s+H_c);H_r.setData(new Uint16Array(H_t)),H_i._indexBuffer=H_r;var H_u=H_h.slice(H_f+this._DATA.offset,H_f+this._DATA.offset+H_g);return H_i._boneIndicesList[0]=new Uint8Array(H_u),this._subMeshes.push(H_i),!0},H_a.READ_DATAAREA=function(){return!1},H_a._getVertexDeclaration=function(){for(var H_a,H_b=!1,H_c=!1,H_d=!1,H_e=!1,H_f=!1,H_g=!1,H_h=!1,H_i=!1,H_j=!1,H_k=0;H_k<this._shaderAttributes.length;H_k+=8)switch(this._shaderAttributes[H_k]){case"POSITION":H_b=!0;break;case"NORMAL":H_c=!0;break;case"COLOR":H_d=!0;break;case"UV":H_e=!0;break;case"UV1":H_f=!0;break;case"BLENDWEIGHT":H_h=!0;break;case"BLENDINDICES":H_i=!0;break;case"TANGENT":H_g=!0;break;case"BINORMAL":H_j=!0}return H_b&&H_c&&H_d&&H_e&&H_f&&H_h&&H_i&&H_g?H_a=H_va.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_f&&H_h&&H_i?H_a=H_ta.vertexDeclaration:H_b&&H_c&&H_e&&H_f&&H_h&&H_i&&H_g?H_a=H_Ja.vertexDeclaration:H_b&&H_c&&H_e&&H_f&&H_h&&H_i?H_a=H_Ha.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_h&&H_i&&H_g?H_a=H_Aa.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_h&&H_i?H_a=H_ya.vertexDeclaration:H_b&&H_c&&H_g&&H_j&&H_e&&H_h&&H_i?H_a=H_Ta.vertexDeclaration:H_b&&H_c&&H_e&&H_h&&H_i&&H_g?H_a=H_Oa.vertexDeclaration:H_b&&H_c&&H_e&&H_h&&H_i?H_a=H_Ma.vertexDeclaration:H_b&&H_c&&H_d&&H_h&&H_i&&H_g?H_a=H_ma.vertexDeclaration:H_b&&H_c&&H_d&&H_h&&H_i?H_a=H_ka.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_f&&H_g?H_a=H_xa.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_f?H_a=H_sa.vertexDeclaration:H_b&&H_c&&H_e&&H_f&&H_g?H_a=H_La.vertexDeclaration:H_b&&H_c&&H_e&&H_f?H_a=H_Ga.vertexDeclaration:H_b&&H_c&&H_d&&H_e&&H_g?H_a=H_Ca.vertexDeclaration:H_b&&H_c&&H_e&&H_g&&H_j?H_a=H_Ra.vertexDeclaration:H_b&&H_c&&H_d&&H_e?H_a=H_ra.vertexDeclaration:H_b&&H_c&&H_e&&H_g?H_a=H_Qa.vertexDeclaration:H_b&&H_c&&H_e?H_a=H_Fa.vertexDeclaration:H_b&&H_c&&H_d&&H_g?H_a=H_qa.vertexDeclaration:H_b&&H_c&&H_d&&(H_a=H_ja.vertexDeclaration),H_a},H_q(0,H_a,"mesh",function(){return this._mesh}),H_v._attrReg=new RegExp("(\\w+)|([:,;])","g"),H_v}()),H_Wa=function(){function H_z(){}return H_n(H_z,"laya.d3.loaders.LoadModelV02"),H_z.parse=function(H_a,H_b,H_c,H_d,H_e,H_f){H_z._mesh=H_c,H_z._materials=H_d,H_z._subMeshes=H_e,H_z._materialMap=H_f,H_z._version=H_b,H_z._readData=H_a,H_z.READ_DATA(),H_z.READ_BLOCK(),H_z.READ_STRINGS();for(var H_g=0,H_h=H_z._BLOCK.count;H_g<H_h;H_g++){H_z._readData.pos=H_z._BLOCK.blockStarts[H_g];var H_i=H_z._readData.getUint16(),H_j=H_z._strings[H_i],H_k=H_z["READ_"+H_j];if(null==H_k)throw new Error("model file err,no this function:"+H_i+" "+H_j);H_k.call()}H_z._strings.length=0,H_z._readData=null,H_z._version=null,H_z._mesh=null,H_z._materials=null,H_z._subMeshes=null,H_z._materialMap=null},H_z._readString=function(){return H_z._strings[H_z._readData.getUint16()]},H_z.READ_DATA=function(){H_z._DATA.offset=H_z._readData.getUint32(),H_z._DATA.size=H_z._readData.getUint32()},H_z.READ_BLOCK=function(){for(var H_a=H_z._BLOCK.count=H_z._readData.getUint16(),H_b=H_z._BLOCK.blockStarts=[],H_c=H_z._BLOCK.blockLengths=[],H_d=0;H_d<H_a;H_d++)H_b.push(H_z._readData.getUint32()),H_c.push(H_z._readData.getUint32())},H_z.READ_STRINGS=function(){var H_a=H_z._readData.getUint32(),H_b=H_z._readData.getUint16(),H_c=H_z._readData.pos;H_z._readData.pos=H_a+H_z._DATA.offset;for(var H_d=0;H_d<H_b;H_d++)H_z._strings[H_d]=H_z._readData.readUTFString();H_z._readData.pos=H_c},H_z.READ_MATERIAL=function(){H_z._readString(),H_z._readString();var H_a=H_z._readString();return""!==H_a&&H_z._materials.push(H_t.getRes(H_z._materialMap[H_a])),!0},H_z.READ_MESH=function(){H_z._readString();var H_a,H_b=H_z._readData.__getBuffer(),H_c=0,H_d=H_z._readData.getInt16(),H_e=H_z._DATA.offset;for(H_c=0;H_c<H_d;H_c++){var H_f=H_e+H_z._readData.getUint32(),H_g=H_z._readData.getUint32(),H_h=new Float32Array(H_b.slice(H_f,H_f+H_g)),H_i=H_z._readString().match(H_z._attrReg),H_j=H_z._getVertexDeclaration(H_i),H_k=H_Ob.create(H_j,4*H_h.length/H_j.vertexStride,35044,!0);H_k.setData(H_h),H_z._mesh._vertexBuffers.push(H_k)}var H_l=H_e+H_z._readData.getUint32(),H_m=H_z._readData.getUint32(),H_n=new Uint16Array(H_b.slice(H_l,H_l+H_m)),H_q=H_Nb.create("ushort",H_m/2,35044,!0);H_q.setData(H_n),H_z._mesh._indexBuffer=H_q;var H_r=H_z._mesh._boneNames=[],H_s=H_z._readData.getUint16();for(H_r.length=H_s,H_c=0;H_c<H_s;H_c++)H_r[H_c]=H_z._strings[H_z._readData.getUint16()];var H_t=H_z._readData.getUint32(),H_u=H_z._readData.getUint32(),H_v=(new Float32Array(H_b.slice(H_e+H_t,H_e+H_t+H_u)),H_z._readData.getUint32()),H_w=H_z._readData.getUint32(),H_x=new Float32Array(H_b.slice(H_e+H_v,H_e+H_v+H_w));for(H_z._mesh._inverseBindPoses=[],H_c=0,H_a=H_x.length;H_c<H_a;H_c+=16){var H_y=new H_ab(H_x[H_c+0],H_x[H_c+1],H_x[H_c+2],H_x[H_c+3],H_x[H_c+4],H_x[H_c+5],H_x[H_c+6],H_x[H_c+7],H_x[H_c+8],H_x[H_c+9],H_x[H_c+10],H_x[H_c+11],H_x[H_c+12],H_x[H_c+13],H_x[H_c+14],H_x[H_c+15]);H_z._mesh._inverseBindPoses.push(H_y)}return H_z._mesh._skinnedDatas=new Float32Array(16*H_x.length),!0},H_z.READ_SUBMESH=function(){var H_a=H_z._readData.__getBuffer(),H_b=new H_jb(H_z._mesh),H_c=H_z._readData.getInt16(),H_d=H_z._readData.getUint32(),H_e=H_z._readData.getUint32();H_b._vertexBuffer=H_z._mesh._vertexBuffers[H_c],H_b._vertexStart=H_d,H_b._vertexCount=H_e;var H_f=H_z._readData.getUint32(),H_g=H_z._readData.getUint32(),H_h=H_z._mesh._indexBuffer;H_b._indexBuffer=H_h,H_b._indexStart=H_f,H_b._indexCount=H_g,H_b._indices=new Uint16Array(H_h.getData().buffer,2*H_f,H_g);var H_i=H_z._DATA.offset,H_j=H_b._subIndexBufferStart,H_k=H_b._subIndexBufferCount,H_l=H_b._boneIndicesList,H_m=H_z._readData.getUint16();H_j.length=H_m,H_k.length=H_m,H_l.length=H_m;for(var H_n=0;H_n<H_m;H_n++){H_j[H_n]=H_z._readData.getUint32(),H_k[H_n]=H_z._readData.getUint32();var H_q=H_z._readData.getUint32(),H_r=H_z._readData.getUint32();H_b._boneIndicesList[H_n]=new Uint8Array(H_a.slice(H_i+H_q,H_i+H_q+H_r))}return H_z._subMeshes.push(H_b),!0},H_z._getVertexDeclaration=function(H_a){for(var H_b,H_c=!1,H_d=!1,H_e=!1,H_f=!1,H_g=!1,H_h=!1,H_i=!1,H_j=!1,H_k=!1,H_l=0;H_l<H_a.length;H_l++)switch(H_a[H_l]){case"POSITION":H_c=!0;break;case"NORMAL":H_d=!0;break;case"COLOR":H_e=!0;break;case"UV":H_f=!0;break;case"UV1":H_g=!0;break;case"BLENDWEIGHT":H_i=!0;break;case"BLENDINDICES":H_j=!0;break;case"TANGENT":H_h=!0;break;case"BINORMAL":H_k=!0}return H_c&&H_d&&H_e&&H_f&&H_g&&H_i&&H_j&&H_h?H_b=H_va.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_g&&H_i&&H_j?H_b=H_ta.vertexDeclaration:H_c&&H_d&&H_f&&H_g&&H_i&&H_j&&H_h?H_b=H_Ja.vertexDeclaration:H_c&&H_d&&H_f&&H_g&&H_i&&H_j?H_b=H_Ha.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_i&&H_j&&H_h?H_b=H_Aa.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_i&&H_j?H_b=H_ya.vertexDeclaration:H_c&&H_d&&H_f&&H_i&&H_j&&H_h?H_b=H_Oa.vertexDeclaration:H_c&&H_d&&H_f&&H_i&&H_j?H_b=H_Ma.vertexDeclaration:H_c&&H_d&&H_e&&H_i&&H_j&&H_h?H_b=H_ma.vertexDeclaration:H_c&&H_d&&H_e&&H_i&&H_j?H_b=H_ka.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_g&&H_h?H_b=H_xa.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_g?H_b=H_sa.vertexDeclaration:H_c&&H_d&&H_f&&H_g&&H_h?H_b=H_La.vertexDeclaration:H_c&&H_d&&H_f&&H_g?H_b=H_Ga.vertexDeclaration:H_c&&H_d&&H_e&&H_f&&H_h?H_b=H_Ca.vertexDeclaration:H_c&&H_d&&H_f&&H_h&&H_k?H_b=H_Ra.vertexDeclaration:H_c&&H_d&&H_e&&H_f?H_b=H_ra.vertexDeclaration:H_c&&H_d&&H_f&&H_h?H_b=H_Qa.vertexDeclaration:H_c&&H_d&&H_f?H_b=H_Fa.vertexDeclaration:H_c&&H_d&&H_e&&H_h?H_b=H_qa.vertexDeclaration:H_c&&H_d&&H_e&&(H_b=H_ja.vertexDeclaration),H_b},H_z._attrReg=new RegExp("(\\w+)|([:,;])","g"),H_z._strings=[],H_z._readData=null,H_z._version=null,H_z._mesh=null,H_z._materials=null,H_z._subMeshes=null,H_z._materialMap=null,H_l(H_z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H_z}(),H_Xa=function(){function H_y(){}return H_n(H_y,"laya.d3.loaders.LoadModelV03"),H_y.parse=function(H_a,H_b,H_c,H_d,H_e){H_y._mesh=H_c,H_y._subMeshes=H_d,H_y._materialMap=H_e,H_y._version=H_b,H_y._readData=H_a,H_y.READ_DATA(),H_y.READ_BLOCK(),H_y.READ_STRINGS();for(var H_f=0,H_g=H_y._BLOCK.count;H_f<H_g;H_f++){H_y._readData.pos=H_y._BLOCK.blockStarts[H_f];var H_h=H_y._readData.getUint16(),H_i=H_y._strings[H_h],H_j=H_y["READ_"+H_i];if(null==H_j)throw new Error("model file err,no this function:"+H_h+" "+H_i);H_j.call()}H_y._strings.length=0,H_y._readData=null,H_y._version=null,H_y._mesh=null,H_y._subMeshes=null,H_y._materialMap=null},H_y._readString=function(){return H_y._strings[H_y._readData.getUint16()]},H_y.READ_DATA=function(){H_y._DATA.offset=H_y._readData.getUint32(),H_y._DATA.size=H_y._readData.getUint32()},H_y.READ_BLOCK=function(){for(var H_a=H_y._BLOCK.count=H_y._readData.getUint16(),H_b=H_y._BLOCK.blockStarts=[],H_c=H_y._BLOCK.blockLengths=[],H_d=0;H_d<H_a;H_d++)H_b.push(H_y._readData.getUint32()),H_c.push(H_y._readData.getUint32())},H_y.READ_STRINGS=function(){var H_a=H_y._readData.getUint32(),H_b=H_y._readData.getUint16(),H_c=H_y._readData.pos;H_y._readData.pos=H_a+H_y._DATA.offset;for(var H_d=0;H_d<H_b;H_d++)H_y._strings[H_d]=H_y._readData.readUTFString();H_y._readData.pos=H_c},H_y.READ_MESH=function(){var H_a,H_b=H_y._readString(),H_c=H_y._readData.__getBuffer(),H_d=0,H_e=H_y._readData.getInt16(),H_f=H_y._DATA.offset;for(H_d=0;H_d<H_e;H_d++){var H_g,H_h=H_f+H_y._readData.getUint32(),H_i=H_y._readData.getUint32(),H_j=new Float32Array(H_c.slice(H_h,H_h+H_i)),H_k=H_y._readString();switch(H_y._version){case"LAYAMODEL:03":H_g=H_y._vertexDeclarationMap_Discard[H_k];break;case"LAYAMODEL:0301":H_g=H_y._vertexDeclarationMap[H_k];break;default:throw new Error("LoadModelV03: unknown version.")}if(!H_g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+H_y._version+"  bufferAttribute="+H_k+"  name="+H_b+"  url="+(H_y._mesh?H_y._mesh.url:"null"));var H_l=H_Ob.create(H_g,4*H_j.length/H_g.vertexStride,35044,!0,H_y._mesh._url+"_"+H_d);H_l.setData(H_j),H_y._mesh._vertexBuffers.push(H_l)}var H_m=H_f+H_y._readData.getUint32(),H_n=H_y._readData.getUint32(),H_q=new Uint16Array(H_c.slice(H_m,H_m+H_n)),H_r=H_Nb.create("ushort",H_n/2,35044,!0,H_y._mesh._url);H_r.setData(H_q),H_y._mesh._indexBuffer=H_r;var H_s=H_y._mesh._boneNames=[],H_t=H_y._readData.getUint16();for(H_s.length=H_t,H_d=0;H_d<H_t;H_d++)H_s[H_d]=H_y._strings[H_y._readData.getUint16()];H_y._readData.pos+=8;var H_u=H_y._readData.getUint32(),H_v=H_y._readData.getUint32(),H_w=new Float32Array(H_c.slice(H_f+H_u,H_f+H_u+H_v));for(H_y._mesh._inverseBindPoses=[],H_d=0,H_a=H_w.length;H_d<H_a;H_d+=16){var H_x=new H_ab(H_w[H_d+0],H_w[H_d+1],H_w[H_d+2],H_w[H_d+3],H_w[H_d+4],H_w[H_d+5],H_w[H_d+6],H_w[H_d+7],H_w[H_d+8],H_w[H_d+9],H_w[H_d+10],H_w[H_d+11],H_w[H_d+12],H_w[H_d+13],H_w[H_d+14],H_w[H_d+15]);H_y._mesh._inverseBindPoses.push(H_x)}return H_y._mesh._skinnedDatas=new Float32Array(16*H_w.length),!0},H_y.READ_SUBMESH=function(){var H_a=H_y._readData.__getBuffer(),H_b=new H_jb(H_y._mesh),H_c=H_y._readData.getInt16(),H_d=H_y._readData.getUint32(),H_e=H_y._readData.getUint32();H_b._vertexBuffer=H_y._mesh._vertexBuffers[H_c],H_b._vertexStart=H_d,H_b._vertexCount=H_e;var H_f=H_y._readData.getUint32(),H_g=H_y._readData.getUint32(),H_h=H_y._mesh._indexBuffer;H_b._indexBuffer=H_h,H_b._indexStart=H_f,H_b._indexCount=H_g,H_b._indices=new Uint16Array(H_h.getData().buffer,2*H_f,H_g);var H_i=H_y._DATA.offset,H_j=H_b._subIndexBufferStart,H_k=H_b._subIndexBufferCount,H_l=H_b._boneIndicesList,H_m=H_y._readData.getUint16();H_j.length=H_m,H_k.length=H_m,H_l.length=H_m;for(var H_n=0;H_n<H_m;H_n++){H_j[H_n]=H_y._readData.getUint32(),H_k[H_n]=H_y._readData.getUint32();var H_q=H_y._readData.getUint32(),H_r=H_y._readData.getUint32();H_l[H_n]=new Uint8Array(H_a.slice(H_i+H_q,H_i+H_q+H_r))}return H_y._subMeshes.push(H_b),!0},H_y._strings=[],H_y._readData=null,H_y._version=null,H_y._mesh=null,H_y._subMeshes=null,H_y._materialMap=null,H_l(H_y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H_va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H_ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H_Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H_Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H_Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H_Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H_ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H_Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H_Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H_ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H_ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H_xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H_sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H_La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H_Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H_Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H_Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H_ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H_Qa.vertexDeclaration,"POSITION,NORMAL,UV":H_Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H_qa.vertexDeclaration,"POSITION,NORMAL,COLOR":H_ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":H_Ea.vertexDeclaration,"POSITION,NORMAL":H_ia.vertexDeclaration,"POSITION,UV":H_Ua.vertexDeclaration,POSITION:H_ha.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H_ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H_ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H_Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H_Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H_Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H_za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H_ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H_Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H_Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H_la.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H_ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H_wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H_sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H_Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H_Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H_Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H_Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H_ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H_Pa.vertexDeclaration,"POSITION,NORMAL,UV":H_Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H_na.vertexDeclaration,"POSITION,NORMAL,COLOR":H_ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":H_Da.vertexDeclaration,"POSITION,NORMAL":H_ia.vertexDeclaration,"POSITION,UV":H_Ua.vertexDeclaration,POSITION:H_ha.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H_y}(),H_Ya=function(){function H_h(){}return H_n(H_h,"laya.d3.loaders.MeshReader"),H_h.read=function(H_a,H_b,H_c,H_d,H_e){var H_f=new H_y(H_a);H_f.pos=0;var H_g=H_f.readUTFString();switch(H_g){case"LAYAMODEL:01":case"LAYASKINANI:01":H_h._readVersion01(H_f,H_g,H_b,H_c,H_d,H_e);break;case"LAYAMODEL:02":H_Wa.parse(H_f,H_g,H_b,H_c,H_d,H_e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":H_Xa.parse(H_f,H_g,H_b,H_d,H_e);break;default:throw new Error("MeshReader: unknown mesh version.")}H_b._setSubMeshes(H_d)},H_h._readVersion01=function(H_a,H_b,H_c,H_d,H_e,H_f){new H_Va(H_a,H_b,H_c,H_d,H_e,H_f)},H_h}(),H_Za=function(){function H_a(H_a,H_b){this.min=null,this.max=null,this.min=H_a,this.max=H_b}H_n(H_a,"laya.d3.math.BoundBox");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.getCorners=function(H_a){H_a.length=8;var H_b=this.min.elements,H_c=this.max.elements,H_d=H_b[0],H_e=H_b[1],H_f=H_b[2],H_g=H_c[0],H_h=H_c[1],H_i=H_c[2];H_a[0]=new H_gb(H_d,H_h,H_i),H_a[1]=new H_gb(H_g,H_h,H_i),H_a[2]=new H_gb(H_g,H_e,H_i),H_a[3]=new H_gb(H_d,H_e,H_i),H_a[4]=new H_gb(H_d,H_h,H_f),H_a[5]=new H_gb(H_g,H_h,H_f),H_a[6]=new H_gb(H_g,H_e,H_f),H_a[7]=new H_gb(H_d,H_e,H_f)},H_b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},H_b.cloneTo=function(H_a){var H_b=H_a;this.min.cloneTo(H_b.min),this.max.cloneTo(H_b.max)},H_b.clone=function(){var H_a=new this.constructor(new H_gb,new H_gb);return this.cloneTo(H_a),H_a},H_a.createfromPoints=function(H_a,H_b){if(null==H_a)throw new Error("points");var H_c=H_b.min,H_d=H_b.max,H_e=H_c.elements;H_e[0]=Number.MAX_VALUE,H_e[1]=Number.MAX_VALUE,H_e[2]=Number.MAX_VALUE;var H_f=H_d.elements;H_f[0]=-Number.MAX_VALUE,H_f[1]=-Number.MAX_VALUE,H_f[2]=-Number.MAX_VALUE;for(var H_g=0,H_h=H_a.length;H_g<H_h;++H_g)H_gb.min(H_c,H_a[H_g],H_c),H_gb.max(H_d,H_a[H_g],H_d)},H_a.merge=function(H_a,H_b,H_c){H_gb.min(H_a.min,H_b.min,H_c.min),H_gb.max(H_a.max,H_b.max,H_c.max)},H_a}(),H_$a=function(){function H_j(H_a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=H_a,this._near=new H_bb(new H_gb),this._far=new H_bb(new H_gb),this._left=new H_bb(new H_gb),this._right=new H_bb(new H_gb),this._top=new H_bb(new H_gb),this._bottom=new H_bb(new H_gb),H_j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}H_n(H_j,"laya.d3.math.BoundFrustum");var H_a=H_j.prototype;return H_a.equalsBoundFrustum=function(H_a){return this._matrix.equalsOtherMatrix(H_a.matrix)},H_a.equalsObj=function(H_a){if(H_a instanceof laya.d3.math.BoundFrustum){var H_b=H_a;return this.equalsBoundFrustum(H_b)}return!1},H_a.getPlane=function(H_a){switch(H_a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},H_a.getCorners=function(H_a){H_j._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(H_a[0]),H_j._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(H_a[1]),H_j._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(H_a[2]),H_j._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(H_a[3]),H_j._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(H_a[4]),H_j._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(H_a[5]),H_j._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(H_a[6]),H_j._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(H_a[7])},H_a.containsPoint=function(H_a){for(var H_b=H_bb.PlaneIntersectionType_Front,H_c=H_bb.PlaneIntersectionType_Front,H_d=0;H_d<6;H_d++){switch(H_d){case 0:H_c=Collision.intersectsPlaneAndPoint(this._near,H_a);break;case 1:H_c=Collision.intersectsPlaneAndPoint(this._far,H_a);break;case 2:H_c=Collision.intersectsPlaneAndPoint(this._left,H_a);break;case 3:H_c=Collision.intersectsPlaneAndPoint(this._right,H_a);break;case 4:H_c=Collision.intersectsPlaneAndPoint(this._top,H_a);break;case 5:H_c=Collision.intersectsPlaneAndPoint(this._bottom,H_a)}switch(H_c){case H_bb.PlaneIntersectionType_Back:return 0;case H_bb.PlaneIntersectionType_Intersecting:H_b=H_bb.PlaneIntersectionType_Intersecting}}switch(H_b){case H_bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H_a.containsBoundBox=function(H_a){for(var H_b,H_c=H_j._tempV30,H_d=H_j._tempV31,H_e=1,H_f=0;H_f<6;H_f++){if(H_b=this.getPlane(H_f),this._getBoxToPlanePVertexNVertex(H_a,H_b.normal,H_c,H_d),Collision.intersectsPlaneAndPoint(H_b,H_c)===H_bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(H_b,H_d)===H_bb.PlaneIntersectionType_Back&&(H_e=2)}return H_e},H_a.containsBoundSphere=function(H_a){for(var H_b=H_bb.PlaneIntersectionType_Front,H_c=H_bb.PlaneIntersectionType_Front,H_d=0;H_d<6;H_d++){switch(H_d){case 0:H_c=Collision.intersectsPlaneAndSphere(this._near,H_a);break;case 1:H_c=Collision.intersectsPlaneAndSphere(this._far,H_a);break;case 2:H_c=Collision.intersectsPlaneAndSphere(this._left,H_a);break;case 3:H_c=Collision.intersectsPlaneAndSphere(this._right,H_a);break;case 4:H_c=Collision.intersectsPlaneAndSphere(this._top,H_a);break;case 5:H_c=Collision.intersectsPlaneAndSphere(this._bottom,H_a)}switch(H_c){case H_bb.PlaneIntersectionType_Back:return 0;case H_bb.PlaneIntersectionType_Intersecting:H_b=H_bb.PlaneIntersectionType_Intersecting}}switch(H_b){case H_bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H_a._getBoxToPlanePVertexNVertex=function(H_a,H_b,H_c,H_d){var H_e=H_a.min,H_f=H_e.elements,H_g=H_a.max,H_h=H_g.elements,H_i=H_b.elements,H_j=H_i[0],H_k=H_i[1],H_l=H_i[2];H_e.cloneTo(H_c);var H_m=H_c.elements;0<=H_j&&(H_m[0]=H_h[0]),0<=H_k&&(H_m[1]=H_h[1]),0<=H_l&&(H_m[2]=H_h[2]),H_g.cloneTo(H_d);var H_n=H_d.elements;0<=H_j&&(H_n[0]=H_f[0]),0<=H_k&&(H_n[1]=H_f[1]),0<=H_l&&(H_n[2]=H_f[2])},H_q(0,H_a,"top",function(){return this._top}),H_q(0,H_a,"matrix",function(){return this._matrix},function(H_a){this._matrix=H_a,H_j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),H_q(0,H_a,"near",function(){return this._near}),H_q(0,H_a,"far",function(){return this._far}),H_q(0,H_a,"left",function(){return this._left}),H_q(0,H_a,"right",function(){return this._right}),H_q(0,H_a,"bottom",function(){return this._bottom}),H_j._getPlanesFromMatrix=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h=H_a.elements,H_i=H_h[0],H_j=H_h[1],H_k=H_h[2],H_l=H_h[3],H_m=H_h[4],H_n=H_h[5],H_q=H_h[6],H_r=H_h[7],H_s=H_h[8],H_t=H_h[9],H_u=H_h[10],H_v=H_h[11],H_w=H_h[12],H_x=H_h[13],H_y=H_h[14],H_z=H_h[15],H_A=H_b.normal.elements;H_A[0]=H_l+H_k,H_A[1]=H_r+H_q,H_A[2]=H_v+H_u,H_b.distance=H_z+H_y,H_b.normalize();var H_B=H_c.normal.elements;H_B[0]=H_l-H_k,H_B[1]=H_r-H_q,H_B[2]=H_v-H_u,H_c.distance=H_z-H_y,H_c.normalize();var H_C=H_d.normal.elements;H_C[0]=H_l+H_i,H_C[1]=H_r+H_m,H_C[2]=H_v+H_s,H_d.distance=H_z+H_w,H_d.normalize();var H_D=H_e.normal.elements;H_D[0]=H_l-H_i,H_D[1]=H_r-H_m,H_D[2]=H_v-H_s,H_e.distance=H_z-H_w,H_e.normalize();var H_E=H_f.normal.elements;H_E[0]=H_l-H_j,H_E[1]=H_r-H_n,H_E[2]=H_v-H_t,H_f.distance=H_z-H_x,H_f.normalize();var H_F=H_g.normal.elements;H_F[0]=H_l+H_j,H_F[1]=H_r+H_n,H_F[2]=H_v+H_t,H_g.distance=H_z+H_x,H_g.normalize()},H_j._get3PlaneInterPoint=function(H_a,H_b,H_c){var H_d=H_a.normal,H_e=H_b.normal,H_f=H_c.normal;H_gb.cross(H_e,H_f,H_j._tempV30),H_gb.cross(H_f,H_d,H_j._tempV31),H_gb.cross(H_d,H_e,H_j._tempV32);var H_g=H_gb.dot(H_d,H_j._tempV30),H_h=H_gb.dot(H_e,H_j._tempV31),H_i=H_gb.dot(H_f,H_j._tempV32);return H_gb.scale(H_j._tempV30,-H_a.distance/H_g,H_j._tempV33),H_gb.scale(H_j._tempV31,-H_b.distance/H_h,H_j._tempV34),H_gb.scale(H_j._tempV32,-H_c.distance/H_i,H_j._tempV35),H_gb.add(H_j._tempV33,H_j._tempV34,H_j._tempV36),H_gb.add(H_j._tempV35,H_j._tempV36,H_j._tempV37),H_j._tempV37},H_l(H_j,["_tempV30",function(){return this._tempV30=new H_gb},"_tempV31",function(){return this._tempV31=new H_gb},"_tempV32",function(){return this._tempV32=new H_gb},"_tempV33",function(){return this._tempV33=new H_gb},"_tempV34",function(){return this._tempV34=new H_gb},"_tempV35",function(){return this._tempV35=new H_gb},"_tempV36",function(){return this._tempV36=new H_gb},"_tempV37",function(){return this._tempV37=new H_gb}]),H_j}(),H__a=function(){function H_k(H_a,H_b){this.center=null,this.radius=NaN,this.center=H_a,this.radius=H_b}H_n(H_k,"laya.d3.math.BoundSphere");var H_a=H_k.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.toDefault=function(){this.center.toDefault(),this.radius=0},H_a.intersectsRayDistance=function(H_a){return Collision.intersectsRayAndSphereRD(H_a,this)},H_a.intersectsRayPoint=function(H_a,H_b){return Collision.intersectsRayAndSphereRP(H_a,this,H_b)},H_a.cloneTo=function(H_a){var H_b=H_a;this.center.cloneTo(H_b.center),H_b.radius=this.radius},H_a.clone=function(){var H_a=new this.constructor(new H_gb,new H_gb);return this.cloneTo(H_a),H_a},H_k.createFromSubPoints=function(H_a,H_b,H_c,H_d){if(null==H_a)throw new Error("points");if(H_b<0||H_b>=H_a.length)throw new Error("start"+H_b+"Must be in the range [0, "+(H_a.length-1)+"]");if(H_c<0||H_b+H_c>H_a.length)throw new Error("count"+H_c+"Must be in the range <= "+H_a.length+"}");var H_e=H_b+H_c,H_f=H_k._tempVector3;H_f.elements[0]=0,H_f.elements[1]=0,H_f.elements[2]=0;for(var H_g=H_b;H_g<H_e;++H_g)H_gb.add(H_a[H_g],H_f,H_f);var H_h=H_d.center;H_gb.scale(H_f,1/H_c,H_h);var H_i=0;for(H_g=H_b;H_g<H_e;++H_g){var H_j=H_gb.distanceSquared(H_h,H_a[H_g]);H_i<H_j&&(H_i=H_j)}H_d.radius=Math.sqrt(H_i)},H_k.createfromPoints=function(H_a,H_b){if(null==H_a)throw new Error("points");H_k.createFromSubPoints(H_a,0,H_a.length,H_b)},H_l(H_k,["_tempVector3",function(){return this._tempVector3=new H_gb}]),H_k}(),H_oa=(function(){function H_a(){}H_n(H_a,"laya.d3.math.ContainmentType"),H_a.Disjoint=0,H_a.Contains=1,H_a.Intersects=2}(),function(){function H_c(){}return H_n(H_c,"laya.d3.math.MathUtils3D"),H_c.isZero=function(H_a){return Math.abs(H_a)<H_c.zeroTolerance},H_c.nearEqual=function(H_a,H_b){return!!H_c.isZero(H_a-H_b)},H_c.fastInvSqrt=function(H_a){return H_c.isZero(H_a)?H_a:1/Math.sqrt(H_a)},H_l(H_c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),H_c}()),H_pa=function(){function H_i(){var H_a=this.elements=new Float32Array(9);H_a[0]=1,H_a[1]=0,H_a[2]=0,H_a[3]=0,H_a[4]=1,H_a[5]=0,H_a[6]=0,H_a[7]=0,H_a[8]=1}H_n(H_i,"laya.d3.math.Matrix3x3");var H_a=H_i.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.determinant=function(){var H_a=this.elements,H_b=H_a[0],H_c=H_a[1],H_d=H_a[2],H_e=H_a[3],H_f=H_a[4],H_g=H_a[5],H_h=H_a[6],H_i=H_a[7],H_j=H_a[8];return H_b*(H_j*H_f-H_g*H_i)+H_c*(-H_j*H_e+H_g*H_h)+H_d*(H_i*H_e-H_f*H_h)},H_a.translate=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements,H_e=H_a.elements,H_f=H_d[0],H_g=H_d[1],H_h=H_d[2],H_i=H_d[3],H_j=H_d[4],H_k=H_d[5],H_l=H_d[6],H_m=H_d[7],H_n=H_d[8],H_q=H_e[0],H_r=H_e[1];H_c[0]=H_f,H_c[1]=H_g,H_c[2]=H_h,H_c[3]=H_i,H_c[4]=H_j,H_c[5]=H_k,H_c[6]=H_q*H_f+H_r*H_i+H_l,H_c[7]=H_q*H_g+H_r*H_j+H_m,H_c[8]=H_q*H_h+H_r*H_k+H_n},H_a.rotate=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=H_d[4],H_j=H_d[5],H_k=H_d[6],H_l=H_d[7],H_m=H_d[8],H_n=Math.sin(H_a),H_q=Math.cos(H_a);H_c[0]=H_q*H_e+H_n*H_h,H_c[1]=H_q*H_f+H_n*H_i,H_c[2]=H_q*H_g+H_n*H_j,H_c[3]=H_q*H_h-H_n*H_e,H_c[4]=H_q*H_i-H_n*H_f,H_c[5]=H_q*H_j-H_n*H_g,H_c[6]=H_k,H_c[7]=H_l,H_c[8]=H_m},H_a.scale=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements,H_e=H_a.elements,H_f=H_e[0],H_g=H_e[1];H_c[0]=H_f*H_d[0],H_c[1]=H_f*H_d[1],H_c[2]=H_f*H_d[2],H_c[3]=H_g*H_d[3],H_c[4]=H_g*H_d[4],H_c[5]=H_g*H_d[5],H_c[6]=H_d[6],H_c[7]=H_d[7],H_c[8]=H_d[8]},H_a.invert=function(H_a){var H_b=H_a.elements,H_c=this.elements,H_d=H_c[0],H_e=H_c[1],H_f=H_c[2],H_g=H_c[3],H_h=H_c[4],H_i=H_c[5],H_j=H_c[6],H_k=H_c[7],H_l=H_c[8],H_m=H_l*H_h-H_i*H_k,H_n=-H_l*H_g+H_i*H_j,H_q=H_k*H_g-H_h*H_j,H_r=H_d*H_m+H_e*H_n+H_f*H_q;H_r||(H_a=null),H_r=1/H_r,H_b[0]=H_m*H_r,H_b[1]=(-H_l*H_e+H_f*H_k)*H_r,H_b[2]=(H_i*H_e-H_f*H_h)*H_r,H_b[3]=H_n*H_r,H_b[4]=(H_l*H_d-H_f*H_j)*H_r,H_b[5]=(-H_i*H_d+H_f*H_g)*H_r,H_b[6]=H_q*H_r,H_b[7]=(-H_k*H_d+H_e*H_j)*H_r,H_b[8]=(H_h*H_d-H_e*H_g)*H_r},H_a.transpose=function(H_a){var H_b=H_a.elements,H_c=this.elements;if(H_a===this){var H_d=H_c[1],H_e=H_c[2],H_f=H_c[5];H_b[1]=H_c[3],H_b[2]=H_c[6],H_b[3]=H_d,H_b[5]=H_c[7],H_b[6]=H_e,H_b[7]=H_f}else H_b[0]=H_c[0],H_b[1]=H_c[3],H_b[2]=H_c[6],H_b[3]=H_c[1],H_b[4]=H_c[4],H_b[5]=H_c[7],H_b[6]=H_c[2],H_b[7]=H_c[5],H_b[8]=H_c[8]},H_a.identity=function(){var H_a=this.elements;H_a[0]=1,H_a[1]=0,H_a[2]=0,H_a[3]=0,H_a[4]=1,H_a[5]=0,H_a[6]=0,H_a[7]=0,H_a[8]=1},H_a.cloneTo=function(H_a){var H_b,H_c,H_d;if((H_c=this.elements)!==(H_d=H_a.elements))for(H_b=0;H_b<9;++H_b)H_d[H_b]=H_c[H_b]},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_i.createFromTranslation=function(H_a,H_b){H_b.elements;var H_c=H_a.elements;H_b[0]=1,H_b[1]=0,H_b[2]=0,H_b[3]=0,H_b[4]=1,H_b[5]=0,H_b[6]=H_c[0],H_b[7]=H_c[1],H_b[8]=1},H_i.createFromRotation=function(H_a,H_b){var H_c=H_b.elements,H_d=Math.sin(H_a),H_e=Math.cos(H_a);H_c[0]=H_e,H_c[1]=H_d,H_c[2]=0,H_c[3]=-H_d,H_c[4]=H_e,H_c[5]=0,H_c[6]=0,H_c[7]=0,H_c[8]=1},H_i.createFromScaling=function(H_a,H_b){var H_c=H_b.elements,H_d=H_a.elements;H_c[0]=H_d[0],H_c[1]=0,H_c[2]=0,H_c[3]=0,H_c[4]=H_d[1],H_c[5]=0,H_c[6]=0,H_c[7]=0,H_c[8]=1},H_i.createFromMatrix4x4=function(H_a,H_b){H_b[0]=H_a[0],H_b[1]=H_a[1],H_b[2]=H_a[2],H_b[3]=H_a[4],H_b[4]=H_a[5],H_b[5]=H_a[6],H_b[6]=H_a[8],H_b[7]=H_a[9],H_b[8]=H_a[10]},H_i.multiply=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements,H_g=H_e[0],H_h=H_e[1],H_i=H_e[2],H_j=H_e[3],H_k=H_e[4],H_l=H_e[5],H_m=H_e[6],H_n=H_e[7],H_q=H_e[8],H_r=H_f[0],H_s=H_f[1],H_t=H_f[2],H_u=H_f[3],H_v=H_f[4],H_w=H_f[5],H_x=H_f[6],H_y=H_f[7],H_z=H_f[8];H_d[0]=H_r*H_g+H_s*H_j+H_t*H_m,H_d[1]=H_r*H_h+H_s*H_k+H_t*H_n,H_d[2]=H_r*H_i+H_s*H_l+H_t*H_q,H_d[3]=H_u*H_g+H_v*H_j+H_w*H_m,H_d[4]=H_u*H_h+H_v*H_k+H_w*H_n,H_d[5]=H_u*H_i+H_v*H_l+H_w*H_q,H_d[6]=H_x*H_g+H_y*H_j+H_z*H_m,H_d[7]=H_x*H_h+H_y*H_k+H_z*H_n,H_d[8]=H_x*H_i+H_y*H_l+H_z*H_q},H_i.lookAt=function(H_a,H_b,H_c,H_d){H_gb.subtract(H_a,H_b,H_i._tempV30),H_gb.normalize(H_i._tempV30,H_i._tempV30),H_gb.cross(H_c,H_i._tempV30,H_i._tempV31),H_gb.normalize(H_i._tempV31,H_i._tempV31),H_gb.cross(H_i._tempV30,H_i._tempV31,H_i._tempV32);var H_e=H_i._tempV30.elements,H_f=H_i._tempV31.elements,H_g=H_i._tempV32.elements,H_h=H_d.elements;H_h[0]=H_f[0],H_h[3]=H_f[1],H_h[6]=H_f[2],H_h[1]=H_g[0],H_h[4]=H_g[1],H_h[7]=H_g[2],H_h[2]=H_e[0],H_h[5]=H_e[1],H_h[8]=H_e[2]},H_i.DEFAULT=new H_i,H_l(H_i,["_tempV30",function(){return this._tempV30=new H_gb},"_tempV31",function(){return this._tempV31=new H_gb},"_tempV32",function(){return this._tempV32=new H_gb}]),H_i}(),H_ab=function(){function H_B(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l,H_m,H_n,H_q,H_r){void 0===H_a&&(H_a=1),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=1),void 0===H_g&&(H_g=0),void 0===H_h&&(H_h=0),void 0===H_i&&(H_i=0),void 0===H_j&&(H_j=0),void 0===H_k&&(H_k=1),void 0===H_l&&(H_l=0),void 0===H_m&&(H_m=0),void 0===H_n&&(H_n=0),void 0===H_q&&(H_q=0),void 0===H_r&&(H_r=1);var H_s=this.elements=new Float32Array(16);H_s[0]=H_a,H_s[1]=H_b,H_s[2]=H_c,H_s[3]=H_d,H_s[4]=H_e,H_s[5]=H_f,H_s[6]=H_g,H_s[7]=H_h,H_s[8]=H_i,H_s[9]=H_j,H_s[10]=H_k,H_s[11]=H_l,H_s[12]=H_m,H_s[13]=H_n,H_s[14]=H_q,H_s[15]=H_r}H_n(H_B,"laya.d3.math.Matrix4x4");var H_a=H_B.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.getElementByRowColumn=function(H_a,H_b){if(H_a<0||3<H_a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H_b<0||3<H_b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*H_a+H_b]},H_a.setElementByRowColumn=function(H_a,H_b,H_c){if(H_a<0||3<H_a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H_b<0||3<H_b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*H_a+H_b]=H_c},H_a.equalsOtherMatrix=function(H_a){var H_b=this.elements,H_c=H_a.elements;return H_oa.nearEqual(H_b[0],H_c[0])&&H_oa.nearEqual(H_b[1],H_c[1])&&H_oa.nearEqual(H_b[2],H_c[2])&&H_oa.nearEqual(H_b[3],H_c[3])&&H_oa.nearEqual(H_b[4],H_c[4])&&H_oa.nearEqual(H_b[5],H_c[5])&&H_oa.nearEqual(H_b[6],H_c[6])&&H_oa.nearEqual(H_b[7],H_c[7])&&H_oa.nearEqual(H_b[8],H_c[8])&&H_oa.nearEqual(H_b[9],H_c[9])&&H_oa.nearEqual(H_b[10],H_c[10])&&H_oa.nearEqual(H_b[11],H_c[11])&&H_oa.nearEqual(H_b[12],H_c[12])&&H_oa.nearEqual(H_b[13],H_c[13])&&H_oa.nearEqual(H_b[14],H_c[14])&&H_oa.nearEqual(H_b[15],H_c[15])},H_a.decomposeTransRotScale=function(H_a,H_b,H_c){var H_d=H_B._tempMatrix4x4;return this.decomposeTransRotMatScale(H_a,H_d,H_c)?(H_cb.createFromMatrix4x4(H_d,H_b),!0):(H_b.identity(),!1)},H_a.decomposeTransRotMatScale=function(H_a,H_b,H_c){var H_d=this.elements,H_e=H_a.elements,H_f=H_b.elements,H_g=H_c.elements;H_e[0]=H_d[12],H_e[1]=H_d[13],H_e[2]=H_d[14];var H_h=H_d[0],H_i=H_d[1],H_j=H_d[2],H_k=H_d[4],H_l=H_d[5],H_m=H_d[6],H_n=H_d[8],H_q=H_d[9],H_r=H_d[10],H_s=H_g[0]=Math.sqrt(H_h*H_h+H_i*H_i+H_j*H_j),H_t=H_g[1]=Math.sqrt(H_k*H_k+H_l*H_l+H_m*H_m),H_u=H_g[2]=Math.sqrt(H_n*H_n+H_q*H_q+H_r*H_r);if(H_oa.isZero(H_s)||H_oa.isZero(H_t)||H_oa.isZero(H_u))return H_f[1]=H_f[2]=H_f[3]=H_f[4]=H_f[6]=H_f[7]=H_f[8]=H_f[9]=H_f[11]=H_f[12]=H_f[13]=H_f[14]=0,H_f[0]=H_f[5]=H_f[10]=H_f[15]=1,!1;var H_v=H_B._tempVector0,H_w=H_v.elements;H_w[0]=H_n/H_u,H_w[1]=H_q/H_u,H_w[2]=H_r/H_u;var H_x=H_B._tempVector1,H_y=H_x.elements;H_y[0]=H_h/H_s,H_y[1]=H_i/H_s,H_y[2]=H_j/H_s;var H_z=H_B._tempVector2;H_gb.cross(H_v,H_x,H_z);var H_A=H_B._tempVector1;return H_gb.cross(H_z,H_v,H_A),H_f[3]=H_f[7]=H_f[11]=H_f[12]=H_f[13]=H_f[14]=0,H_f[15]=1,H_f[0]=H_A.x,H_f[1]=H_A.y,H_f[2]=H_A.z,H_f[4]=H_z.x,H_f[5]=H_z.y,H_f[6]=H_z.z,H_f[8]=H_v.x,H_f[9]=H_v.y,H_f[10]=H_v.z,H_f[0]*H_h+H_f[1]*H_i+H_f[2]*H_j<0&&(H_g[0]=-H_s),H_f[4]*H_k+H_f[5]*H_l+H_f[6]*H_m<0&&(H_g[1]=-H_t),H_f[8]*H_n+H_f[9]*H_q+H_f[10]*H_r<0&&(H_g[2]=-H_u),!0},H_a.decomposeYawPitchRoll=function(H_a){var H_b=H_a.elements,H_c=Math.asin(-this.elements[9]);H_b[1]=H_c,Math.cos(H_c)>H_oa.zeroTolerance?(H_b[2]=Math.atan2(this.elements[1],this.elements[5]),H_b[0]=Math.atan2(this.elements[8],this.elements[10])):(H_b[2]=Math.atan2(-this.elements[4],this.elements[0]),H_b[0]=0)},H_a.normalize=function(){var H_a=this.elements,H_b=H_a[0],H_c=H_a[1],H_d=H_a[2],H_e=Math.sqrt(H_b*H_b+H_c*H_c+H_d*H_d);if(!H_e)return H_a[0]=0,H_a[1]=0,void(H_a[2]=0);1!=H_e&&(H_e=1/H_e,H_a[0]=H_b*H_e,H_a[1]=H_c*H_e,H_a[2]=H_d*H_e)},H_a.transpose=function(){var H_a,H_b;return H_b=(H_a=this.elements)[1],H_a[1]=H_a[4],H_a[4]=H_b,H_b=H_a[2],H_a[2]=H_a[8],H_a[8]=H_b,H_b=H_a[3],H_a[3]=H_a[12],H_a[12]=H_b,H_b=H_a[6],H_a[6]=H_a[9],H_a[9]=H_b,H_b=H_a[7],H_a[7]=H_a[13],H_a[13]=H_b,H_b=H_a[11],H_a[11]=H_a[14],H_a[14]=H_b,this},H_a.invert=function(H_a){var H_b=this.elements,H_c=H_a.elements,H_d=H_b[0],H_e=H_b[1],H_f=H_b[2],H_g=H_b[3],H_h=H_b[4],H_i=H_b[5],H_j=H_b[6],H_k=H_b[7],H_l=H_b[8],H_m=H_b[9],H_n=H_b[10],H_q=H_b[11],H_r=H_b[12],H_s=H_b[13],H_t=H_b[14],H_u=H_b[15],H_v=H_d*H_i-H_e*H_h,H_w=H_d*H_j-H_f*H_h,H_x=H_d*H_k-H_g*H_h,H_y=H_e*H_j-H_f*H_i,H_z=H_e*H_k-H_g*H_i,H_A=H_f*H_k-H_g*H_j,H_B=H_l*H_s-H_m*H_r,H_C=H_l*H_t-H_n*H_r,H_D=H_l*H_u-H_q*H_r,H_E=H_m*H_t-H_n*H_s,H_F=H_m*H_u-H_q*H_s,H_G=H_n*H_u-H_q*H_t,H_H=H_v*H_G-H_w*H_F+H_x*H_E+H_y*H_D-H_z*H_C+H_A*H_B;0!==Math.abs(H_H)&&(H_H=1/H_H,H_c[0]=(H_i*H_G-H_j*H_F+H_k*H_E)*H_H,H_c[1]=(H_f*H_F-H_e*H_G-H_g*H_E)*H_H,H_c[2]=(H_s*H_A-H_t*H_z+H_u*H_y)*H_H,H_c[3]=(H_n*H_z-H_m*H_A-H_q*H_y)*H_H,H_c[4]=(H_j*H_D-H_h*H_G-H_k*H_C)*H_H,H_c[5]=(H_d*H_G-H_f*H_D+H_g*H_C)*H_H,H_c[6]=(H_t*H_x-H_r*H_A-H_u*H_w)*H_H,H_c[7]=(H_l*H_A-H_n*H_x+H_q*H_w)*H_H,H_c[8]=(H_h*H_F-H_i*H_D+H_k*H_B)*H_H,H_c[9]=(H_e*H_D-H_d*H_F-H_g*H_B)*H_H,H_c[10]=(H_r*H_z-H_s*H_x+H_u*H_v)*H_H,H_c[11]=(H_m*H_x-H_l*H_z-H_q*H_v)*H_H,H_c[12]=(H_i*H_C-H_h*H_E-H_j*H_B)*H_H,H_c[13]=(H_d*H_E-H_e*H_C+H_f*H_B)*H_H,H_c[14]=(H_s*H_w-H_r*H_y-H_t*H_v)*H_H,H_c[15]=(H_l*H_y-H_m*H_w+H_n*H_v)*H_H)},H_a.identity=function(){var H_a=this.elements;H_a[1]=H_a[2]=H_a[3]=H_a[4]=H_a[6]=H_a[7]=H_a[8]=H_a[9]=H_a[11]=H_a[12]=H_a[13]=H_a[14]=0,H_a[0]=H_a[5]=H_a[10]=H_a[15]=1},H_a.cloneTo=function(H_a){var H_b,H_c,H_d;if((H_c=this.elements)!==(H_d=H_a.elements))for(H_b=0;H_b<16;++H_b)H_d[H_b]=H_c[H_b]},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_a.getTranslationVector=function(H_a){var H_b=this.elements,H_c=H_a.elements;H_c[0]=H_b[12],H_c[1]=H_b[13],H_c[2]=H_b[14]},H_a.setTranslationVector=function(H_a){var H_b=this.elements,H_c=H_a.elements;H_b[12]=H_c[0],H_b[13]=H_c[1],H_b[14]=H_c[2]},H_a.getForward=function(H_a){var H_b=this.elements,H_c=H_a.elements;H_c[0]=-H_b[8],H_c[1]=-H_b[9],H_c[2]=-H_b[10]},H_a.setForward=function(H_a){var H_b=this.elements,H_c=H_a.elements;H_b[8]=-H_c[0],H_b[9]=-H_c[1],H_b[10]=-H_c[2]},H_B.createRotationX=function(H_a,H_b){var H_c=H_b.elements,H_d=Math.sin(H_a),H_e=Math.cos(H_a);H_c[1]=H_c[2]=H_c[3]=H_c[4]=H_c[7]=H_c[8]=H_c[11]=H_c[12]=H_c[13]=H_c[14]=0,H_c[0]=H_c[15]=1,H_c[5]=H_c[10]=H_e,H_c[6]=H_d,H_c[9]=-H_d},H_B.createRotationY=function(H_a,H_b){var H_c=H_b.elements,H_d=Math.sin(H_a),H_e=Math.cos(H_a);H_c[1]=H_c[3]=H_c[4]=H_c[6]=H_c[7]=H_c[9]=H_c[11]=H_c[12]=H_c[13]=H_c[14]=0,H_c[5]=H_c[15]=1,H_c[0]=H_c[10]=H_e,H_c[2]=-H_d,H_c[8]=H_d},H_B.createRotationZ=function(H_a,H_b){var H_c=H_b.elements,H_d=Math.sin(H_a),H_e=Math.cos(H_a);H_c[2]=H_c[3]=H_c[6]=H_c[7]=H_c[8]=H_c[9]=H_c[11]=H_c[12]=H_c[13]=H_c[14]=0,H_c[10]=H_c[15]=1,H_c[0]=H_c[5]=H_e,H_c[1]=H_d,H_c[4]=-H_d},H_B.createRotationYawPitchRoll=function(H_a,H_b,H_c,H_d){H_cb.createFromYawPitchRoll(H_a,H_b,H_c,H_B._tempQuaternion),H_B.createRotationQuaternion(H_B._tempQuaternion,H_d)},H_B.createRotationAxis=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=Math.cos(H_b),H_i=Math.sin(H_b),H_j=H_e*H_e,H_k=H_f*H_f,H_l=H_g*H_g,H_m=H_e*H_f,H_n=H_e*H_g,H_q=H_f*H_g,H_r=H_c.elements;H_r[3]=H_r[7]=H_r[11]=H_r[12]=H_r[13]=H_r[14]=0,H_r[15]=1,H_r[0]=H_j+H_h*(1-H_j),H_r[1]=H_m-H_h*H_m+H_i*H_g,H_r[2]=H_n-H_h*H_n-H_i*H_f,H_r[4]=H_m-H_h*H_m-H_i*H_g,H_r[5]=H_k+H_h*(1-H_k),H_r[6]=H_q-H_h*H_q+H_i*H_e,H_r[8]=H_n-H_h*H_n+H_i*H_f,H_r[9]=H_q-H_h*H_q-H_i*H_e,H_r[10]=H_l+H_h*(1-H_l)},H_B.createRotationQuaternion=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0],H_f=H_c[1],H_g=H_c[2],H_h=H_c[3],H_i=H_e*H_e,H_j=H_f*H_f,H_k=H_g*H_g,H_l=H_e*H_f,H_m=H_g*H_h,H_n=H_g*H_e,H_q=H_f*H_h,H_r=H_f*H_g,H_s=H_e*H_h;H_d[3]=H_d[7]=H_d[11]=H_d[12]=H_d[13]=H_d[14]=0,H_d[15]=1,H_d[0]=1-2*(H_j+H_k),H_d[1]=2*(H_l+H_m),H_d[2]=2*(H_n-H_q),H_d[4]=2*(H_l-H_m),H_d[5]=1-2*(H_k+H_i),H_d[6]=2*(H_r+H_s),H_d[8]=2*(H_n+H_q),H_d[9]=2*(H_r-H_s),H_d[10]=1-2*(H_j+H_i)},H_B.createTranslate=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;H_d[4]=H_d[8]=H_d[1]=H_d[9]=H_d[2]=H_d[6]=H_d[3]=H_d[7]=H_d[11]=0,H_d[0]=H_d[5]=H_d[10]=H_d[15]=1,H_d[12]=H_c[0],H_d[13]=H_c[1],H_d[14]=H_c[2]},H_B.createScaling=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;H_d[0]=H_c[0],H_d[5]=H_c[1],H_d[10]=H_c[2],H_d[1]=H_d[4]=H_d[8]=H_d[12]=H_d[9]=H_d[13]=H_d[2]=H_d[6]=H_d[14]=H_d[3]=H_d[7]=H_d[11]=0,H_d[15]=1},H_B.multiply=function(H_a,H_b,H_c){var H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k;for(H_e=H_c.elements,H_f=H_a.elements,H_e===(H_g=H_b.elements)&&(H_g=H_g.slice()),H_d=0;H_d<4;H_d++)H_h=H_f[H_d],H_i=H_f[H_d+4],H_j=H_f[H_d+8],H_k=H_f[H_d+12],H_e[H_d]=H_h*H_g[0]+H_i*H_g[1]+H_j*H_g[2]+H_k*H_g[3],H_e[H_d+4]=H_h*H_g[4]+H_i*H_g[5]+H_j*H_g[6]+H_k*H_g[7],H_e[H_d+8]=H_h*H_g[8]+H_i*H_g[9]+H_j*H_g[10]+H_k*H_g[11],H_e[H_d+12]=H_h*H_g[12]+H_i*H_g[13]+H_j*H_g[14]+H_k*H_g[15]},H_B.createFromQuaternion=function(H_a,H_b){var H_c=H_b.elements,H_d=H_a.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=H_e+H_e,H_j=H_f+H_f,H_k=H_g+H_g,H_l=H_e*H_i,H_m=H_f*H_i,H_n=H_f*H_j,H_q=H_g*H_i,H_r=H_g*H_j,H_s=H_g*H_k,H_t=H_h*H_i,H_u=H_h*H_j,H_v=H_h*H_k;H_c[0]=1-H_n-H_s,H_c[1]=H_m+H_v,H_c[2]=H_q-H_u,H_c[3]=0,H_c[4]=H_m-H_v,H_c[5]=1-H_l-H_s,H_c[6]=H_r+H_t,H_c[7]=0,H_c[8]=H_q+H_u,H_c[9]=H_r-H_t,H_c[10]=1-H_l-H_n,H_c[11]=0,H_c[12]=0,H_c[13]=0,H_c[14]=0,H_c[15]=1},H_B.createAffineTransformation=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements,H_f=H_b.elements,H_g=H_c.elements,H_h=H_d.elements,H_i=H_f[0],H_j=H_f[1],H_k=H_f[2],H_l=H_f[3],H_m=H_i+H_i,H_n=H_j+H_j,H_q=H_k+H_k,H_r=H_i*H_m,H_s=H_i*H_n,H_t=H_i*H_q,H_u=H_j*H_n,H_v=H_j*H_q,H_w=H_k*H_q,H_x=H_l*H_m,H_y=H_l*H_n,H_z=H_l*H_q,H_A=H_g[0],H_B=H_g[1],H_C=H_g[2];H_h[0]=(1-(H_u+H_w))*H_A,H_h[1]=(H_s+H_z)*H_A,H_h[2]=(H_t-H_y)*H_A,H_h[3]=0,H_h[4]=(H_s-H_z)*H_B,H_h[5]=(1-(H_r+H_w))*H_B,H_h[6]=(H_v+H_x)*H_B,H_h[7]=0,H_h[8]=(H_t+H_y)*H_C,H_h[9]=(H_v-H_x)*H_C,H_h[10]=(1-(H_r+H_u))*H_C,H_h[11]=0,H_h[12]=H_e[0],H_h[13]=H_e[1],H_h[14]=H_e[2],H_h[15]=1},H_B.createLookAt=function(H_a,H_b,H_c,H_d){var H_e=H_d.elements,H_f=H_B._tempVector0,H_g=H_B._tempVector1,H_h=H_B._tempVector2;H_gb.subtract(H_a,H_b,H_h),H_gb.normalize(H_h,H_h),H_gb.cross(H_c,H_h,H_f),H_gb.normalize(H_f,H_f),H_gb.cross(H_h,H_f,H_g),H_d.identity(),H_e[0]=H_f.x,H_e[4]=H_f.y,H_e[8]=H_f.z,H_e[1]=H_g.x,H_e[5]=H_g.y,H_e[9]=H_g.z,H_e[2]=H_h.x,H_e[6]=H_h.y,H_e[10]=H_h.z,H_e[12]=-H_gb.dot(H_f,H_a),H_e[13]=-H_gb.dot(H_g,H_a),H_e[14]=-H_gb.dot(H_h,H_a)},H_B.createPerspective=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_e.elements,H_g=1/Math.tan(H_a/2),H_h=1/(H_c-H_d);H_f[0]=H_g/H_b,H_f[5]=H_g,H_f[10]=(H_d+H_c)*H_h,H_f[11]=-1,H_f[14]=2*H_d*H_c*H_h,H_f[1]=H_f[2]=H_f[3]=H_f[4]=H_f[6]=H_f[7]=H_f[8]=H_f[9]=H_f[12]=H_f[13]=H_f[15]=0},H_B.createOrthoOffCenterRH=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h=H_g.elements,H_i=1/(H_a-H_b),H_j=1/(H_c-H_d),H_k=1/(H_e-H_f);H_h[1]=H_h[2]=H_h[3]=H_h[4]=H_h[6]=H_h[7]=H_h[8]=H_h[9]=H_h[11]=0,H_h[15]=1,H_h[0]=-2*H_i,H_h[5]=-2*H_j,H_h[10]=2*H_k,H_h[12]=(H_a+H_b)*H_i,H_h[13]=(H_d+H_c)*H_j,H_h[14]=(H_f+H_e)*H_k},H_B.translation=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;H_d[0]=H_d[5]=H_d[10]=H_d[15]=1,H_d[12]=H_c[0],H_d[13]=H_c[1],H_d[14]=H_c[2]},H_l(H_B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H_B},"_tempVector0",function(){return this._tempVector0=new H_gb},"_tempVector1",function(){return this._tempVector1=new H_gb},"_tempVector2",function(){return this._tempVector2=new H_gb},"_tempQuaternion",function(){return this._tempQuaternion=new H_cb},"DEFAULT",function(){return this.DEFAULT=new H_B},"ZERO",function(){return this.ZERO=new H_B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),H_B}(),H_bb=(function(){function H_v(H_a,H_b){this.extents=null,this.transformation=null,this.extents=H_a,this.transformation=H_b}H_n(H_v,"laya.d3.math.OrientedBoundBox");var H_a=H_v.prototype;H_a.getCorners=function(H_a){var H_b=H_v._tempV30.elements,H_c=H_v._tempV31.elements,H_d=H_v._tempV32.elements,H_e=this.extents.elements;H_b[0]=H_e[0],H_b[1]=H_b[2]=0,H_c[1]=H_e[1],H_c[0]=H_c[2]=0,H_d[2]=H_e[2],H_d[0]=H_d[1]=0,H_gb.TransformNormal(H_v._tempV30,this.transformation,H_v._tempV30),H_gb.TransformNormal(H_v._tempV31,this.transformation,H_v._tempV31),H_gb.TransformNormal(H_v._tempV32,this.transformation,H_v._tempV32);var H_f=H_v._tempV33;this.transformation.getTranslationVector(H_f),H_a.length=8,H_gb.add(H_f,H_v._tempV30,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV32,H_a[0]),H_gb.add(H_f,H_v._tempV30,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV32,H_a[1]),H_gb.subtract(H_f,H_v._tempV30,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV32,H_a[2]),H_gb.subtract(H_f,H_v._tempV30,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV32,H_a[3]),H_gb.add(H_f,H_v._tempV30,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV32,H_a[4]),H_gb.add(H_f,H_v._tempV30,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV32,H_a[5]),H_gb.subtract(H_f,H_v._tempV30,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV32,H_a[6]),H_gb.subtract(H_f,H_v._tempV30,H_v._tempV34),H_gb.subtract(H_v._tempV34,H_v._tempV31,H_v._tempV34),H_gb.add(H_v._tempV34,H_v._tempV32,H_a[7])},H_a.transform=function(H_a){H_ab.multiply(this.transformation,H_a,this.transformation)},H_a.scale=function(H_a){H_gb.multiply(this.extents,H_a,this.extents)},H_a.translate=function(H_a){this.transformation.getTranslationVector(H_v._tempV30),H_gb.add(H_v._tempV30,H_a,H_v._tempV31),this.transformation.setTranslationVector(H_v._tempV31)},H_a.Size=function(H_a){H_gb.scale(this.extents,2,H_a)},H_a.getSize=function(H_a){var H_b=this.extents.elements;H_v._tempV30.x=H_b[0],H_v._tempV31.y=H_b[1],H_v._tempV32.z=H_b[2],H_gb.TransformNormal(H_v._tempV30,this.transformation,H_v._tempV30),H_gb.TransformNormal(H_v._tempV31,this.transformation,H_v._tempV31),H_gb.TransformNormal(H_v._tempV31,this.transformation,H_v._tempV32);var H_c=H_a.elements;H_c[0]=H_gb.scalarLength(H_v._tempV30),H_c[1]=H_gb.scalarLength(H_v._tempV31),H_c[2]=H_gb.scalarLength(H_v._tempV32)},H_a.getSizeSquared=function(H_a){var H_b=this.extents.elements;H_v._tempV30.x=H_b[0],H_v._tempV31.y=H_b[1],H_v._tempV32.z=H_b[2],H_gb.TransformNormal(H_v._tempV30,this.transformation,H_v._tempV30),H_gb.TransformNormal(H_v._tempV31,this.transformation,H_v._tempV31),H_gb.TransformNormal(H_v._tempV31,this.transformation,H_v._tempV32);var H_c=H_a.elements;H_c[0]=H_gb.scalarLengthSquared(H_v._tempV30),H_c[1]=H_gb.scalarLengthSquared(H_v._tempV31),H_c[2]=H_gb.scalarLengthSquared(H_v._tempV32)},H_a.getCenter=function(H_a){this.transformation.getTranslationVector(H_a)},H_a.containsPoint=function(H_a){var H_b=this.extents.elements,H_c=H_b[0],H_d=H_b[1],H_e=H_b[2];this.transformation.invert(H_v._tempM0),H_gb.transformCoordinate(H_a,H_v._tempM0,H_v._tempV30);var H_f=H_v._tempV30.elements,H_g=Math.abs(H_f[0]),H_h=Math.abs(H_f[1]),H_i=Math.abs(H_f[2]);return H_oa.nearEqual(H_g,H_c)&&H_oa.nearEqual(H_h,H_d)&&H_oa.nearEqual(H_i,H_e)?2:H_g<H_c&&H_h<H_d&&H_i<H_e?1:0},H_a.containsPoints=function(H_a){var H_b=this.extents.elements,H_c=H_b[0],H_d=H_b[1],H_e=H_b[2];this.transformation.invert(H_v._tempM0);for(var H_f=!0,H_g=!1,H_h=0;H_h<H_a.length;H_h++){H_gb.transformCoordinate(H_a[H_h],H_v._tempM0,H_v._tempV30);var H_i=H_v._tempV30.elements,H_j=Math.abs(H_i[0]),H_k=Math.abs(H_i[1]),H_l=Math.abs(H_i[2]);H_oa.nearEqual(H_j,H_c)&&H_oa.nearEqual(H_k,H_d)&&H_oa.nearEqual(H_l,H_e)&&(H_g=!0),H_j<H_c&&H_k<H_d&&H_l<H_e?H_g=!0:H_f=!1}return H_f?1:H_g?2:0},H_a.containsSphere=function(H_a,H_b){void 0===H_b&&(H_b=!1);var H_c=this.extents.elements,H_d=H_c[0],H_e=H_c[1],H_f=H_c[2],H_g=H_a.radius;this.transformation.invert(H_v._tempM0),H_gb.transformCoordinate(H_a.center,H_v._tempM0,H_v._tempV30);var H_h=NaN;if(H_h=H_b?H_g:(H_gb.scale(H_gb.UnitX,H_g,H_v._tempV31),H_gb.TransformNormal(H_v._tempV31,H_v._tempM0,H_v._tempV31),H_gb.scalarLength(H_v._tempV31)),H_gb.scale(this.extents,-1,H_v._tempV32),H_gb.Clamp(H_v._tempV30,H_v._tempV32,this.extents,H_v._tempV33),H_h*H_h<H_gb.distanceSquared(H_v._tempV30,H_v._tempV33))return 0;var H_i=H_v._tempV30.elements,H_j=H_i[0],H_k=H_i[1],H_l=H_i[2],H_m=H_v._tempV32.elements,H_n=H_m[0],H_q=H_m[1],H_r=H_m[2];return H_n+H_h<=H_j&&H_j<=H_d-H_h&&H_h<H_d-H_n&&H_q+H_h<=H_k&&H_k<=H_e-H_h&&H_h<H_e-H_q&&H_r+H_h<=H_l&&H_l<=H_f-H_h&&H_h<H_f-H_r?1:2},H_a.containsOrientedBoundBox=function(H_a){var H_b=0,H_c=0;H_a.getCorners(H_v._corners);var H_d=this.containsPoints(H_v._corners);if(0!=H_d)return H_d;var H_e=this.extents.elements;H_a.extents.cloneTo(H_v._tempV35);var H_f=H_v._tempV35.elements;H_v._getRows(this.transformation,H_v._rows1),H_v._getRows(H_a.transformation,H_v._rows2);var H_g=NaN;for(H_b=0;H_b<4;H_b++)for(H_c=0;H_c<4;H_c++)3==H_b||3==H_c?(H_v._tempM0.setElementByRowColumn(H_b,H_c,0),H_v._tempM1.setElementByRowColumn(H_b,H_c,0)):(H_g=H_gb.dot(H_v._rows1[H_b],H_v._rows2[H_c]),H_v._tempM0.setElementByRowColumn(H_b,H_c,H_g),H_v._tempM1.setElementByRowColumn(H_b,H_c,Math.abs(H_g)));H_a.getCenter(H_v._tempV34),this.getCenter(H_v._tempV36),H_gb.subtract(H_v._tempV34,H_v._tempV36,H_v._tempV30);var H_h=H_v._tempV31.elements;H_h[0]=H_gb.dot(H_v._tempV30,H_v._rows1[0]),H_h[1]=H_gb.dot(H_v._tempV30,H_v._rows1[1]),H_h[2]=H_gb.dot(H_v._tempV30,H_v._rows1[2]);var H_i=H_v._tempV32.elements,H_j=H_v._tempV33.elements;for(H_b=0;H_b<3;H_b++)if(H_i[0]=H_v._tempM1.getElementByRowColumn(H_b,0),H_i[1]=H_v._tempM1.getElementByRowColumn(H_b,1),H_i[2]=H_v._tempM1.getElementByRowColumn(H_b,2),H_e[H_b]+H_gb.dot(H_v._tempV35,H_v._tempV32)<Math.abs(H_h[H_b]))return 0;for(H_c=0;H_c<3;H_c++)if(H_i[0]=H_v._tempM1.getElementByRowColumn(0,H_c),H_i[1]=H_v._tempM1.getElementByRowColumn(1,H_c),H_i[2]=H_v._tempM1.getElementByRowColumn(2,H_c),H_j[0]=H_v._tempM0.getElementByRowColumn(0,H_c),H_j[1]=H_v._tempM0.getElementByRowColumn(1,H_c),H_j[2]=H_v._tempM0.getElementByRowColumn(2,H_c),H_gb.dot(this.extents,H_v._tempV32)+H_f[H_c]<Math.abs(H_gb.dot(H_v._tempV31,H_v._tempV33)))return 0;for(H_b=0;H_b<3;H_b++)for(H_c=0;H_c<3;H_c++){var H_k=(H_b+1)%3,H_l=(H_b+2)%3,H_m=(H_c+1)%3,H_n=(H_c+2)%3;if(H_e[H_k]*H_v._tempM1.getElementByRowColumn(H_l,H_c)+H_e[H_l]*H_v._tempM1.getElementByRowColumn(H_k,H_c)+(H_f[H_m]*H_v._tempM1.getElementByRowColumn(H_b,H_n)+H_f[H_n]*H_v._tempM1.getElementByRowColumn(H_b,H_m))<Math.abs(H_h[H_l]*H_v._tempM0.getElementByRowColumn(H_k,H_c)-H_h[H_k]*H_v._tempM0.getElementByRowColumn(H_l,H_c)))return 0}return 2},H_a.containsLine=function(H_a,H_b){H_v._corners[0]=H_a,H_v._corners[1]=H_b;var H_c=this.containsPoints(H_v._corners);if(0!=H_c)return H_c;var H_d=this.extents.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2];this.transformation.invert(H_v._tempM0),H_gb.transformCoordinate(H_a,H_v._tempM0,H_v._tempV30),H_gb.transformCoordinate(H_b,H_v._tempM0,H_v._tempV31),H_gb.add(H_v._tempV30,H_v._tempV31,H_v._tempV32),H_gb.scale(H_v._tempV32,.5,H_v._tempV32),H_gb.subtract(H_v._tempV30,H_v._tempV32,H_v._tempV33);var H_h=H_v._tempV33.elements,H_i=H_h[0],H_j=H_h[1],H_k=H_h[2],H_l=H_v._tempV34.elements,H_m=H_l[0]=Math.abs(H_h[0]),H_n=H_l[1]=Math.abs(H_h[1]),H_q=H_l[2]=Math.abs(H_h[2]),H_r=H_v._tempV32.elements,H_s=H_r[0],H_t=H_r[1],H_u=H_r[2];return Math.abs(H_s)>H_e+H_m?0:Math.abs(H_t)>H_f+H_n?0:Math.abs(H_u)>H_g+H_q?0:Math.abs(H_t*H_k-H_u*H_j)>H_f*H_q+H_g*H_n?0:Math.abs(H_s*H_k-H_u*H_i)>H_e*H_q+H_g*H_m?0:Math.abs(H_s*H_j-H_t*H_i)>H_e*H_n+H_f*H_m?0:2},H_a.containsBoundBox=function(H_a){var H_b=0,H_c=0,H_d=H_a.min,H_e=H_a.max;H_a.getCorners(H_v._corners);var H_f=this.containsPoints(H_v._corners);if(0!=H_f)return H_f;H_gb.subtract(H_e,H_d,H_v._tempV30),H_gb.scale(H_v._tempV30,.5,H_v._tempV30),H_gb.add(H_d,H_v._tempV30,H_v._tempV30),H_gb.subtract(H_e,H_v._tempV30,H_v._tempV31);var H_g=this.extents.elements,H_h=H_v._tempV31.elements;H_v._getRows(this.transformation,H_v._rows1),this.transformation.invert(H_v._tempM0);for(H_b=0;H_b<3;H_b++)for(H_c=0;H_c<3;H_c++)H_v._tempM1.setElementByRowColumn(H_b,H_c,Math.abs(H_v._tempM0.getElementByRowColumn(H_b,H_c)));this.getCenter(H_v._tempV35),H_gb.subtract(H_v._tempV30,H_v._tempV35,H_v._tempV32);var H_i=H_v._tempV31.elements;H_i[0]=H_gb.dot(H_v._tempV32,H_v._rows1[0]),H_i[1]=H_gb.dot(H_v._tempV32,H_v._rows1[1]),H_i[2]=H_gb.dot(H_v._tempV32,H_v._rows1[2]);var H_j=H_v._tempV33.elements,H_k=H_v._tempV34.elements;for(H_b=0;H_b<3;H_b++)if(H_j[0]=H_v._tempM1.getElementByRowColumn(H_b,0),H_j[1]=H_v._tempM1.getElementByRowColumn(H_b,1),H_j[2]=H_v._tempM1.getElementByRowColumn(H_b,2),H_g[H_b]+H_gb.dot(H_v._tempV31,H_v._tempV33)<Math.abs(H_i[H_b]))return 0;for(H_c=0;H_c<3;H_c++)if(H_j[0]=H_v._tempM1.getElementByRowColumn(0,H_c),H_j[1]=H_v._tempM1.getElementByRowColumn(1,H_c),H_j[2]=H_v._tempM1.getElementByRowColumn(2,H_c),H_k[0]=H_v._tempM0.getElementByRowColumn(0,H_c),H_k[1]=H_v._tempM0.getElementByRowColumn(1,H_c),H_k[2]=H_v._tempM0.getElementByRowColumn(2,H_c),H_gb.dot(this.extents,H_v._tempV33)+H_h[H_c]<Math.abs(H_gb.dot(H_v._tempV31,H_v._tempV34)))return 0;for(H_b=0;H_b<3;H_b++)for(H_c=0;H_c<3;H_c++){var H_l=(H_b+1)%3,H_m=(H_b+2)%3,H_n=(H_c+1)%3,H_q=(H_c+2)%3;if(H_g[H_l]*H_v._tempM1.getElementByRowColumn(H_m,H_c)+H_g[H_m]*H_v._tempM1.getElementByRowColumn(H_l,H_c)+(H_h[H_n]*H_v._tempM1.getElementByRowColumn(H_b,H_q)+H_h[H_q]*H_v._tempM1.getElementByRowColumn(H_b,H_n))<Math.abs(H_i[H_m]*H_v._tempM0.getElementByRowColumn(H_l,H_c)-H_i[H_l]*H_v._tempM0.getElementByRowColumn(H_m,H_c)))return 0}return 2},H_a.intersectsRay=function(H_a,H_b){H_gb.scale(this.extents,-1,H_v._tempV30),this.transformation.invert(H_v._tempM0),H_gb.TransformNormal(H_a.direction,H_v._tempM0,H_v._ray.direction),H_gb.transformCoordinate(H_a.origin,H_v._tempM0,H_v._ray.origin),H_v._boxBound1.min=H_v._tempV30,H_v._boxBound1.max=this.extents;var H_c=Collision.intersectsRayAndBoxRP(H_v._ray,H_v._boxBound1,H_b);return-1!==H_c&&H_gb.transformCoordinate(H_b,this.transformation,H_b),H_c},H_a._getLocalCorners=function(H_a){H_a.length=8;var H_b=this.extents.elements;H_v._tempV30.x=H_b[0],H_v._tempV31.y=H_b[1],H_v._tempV32.z=H_b[2],H_gb.add(H_v._tempV30,H_v._tempV31,H_v._tempV33),H_gb.add(H_v._tempV33,H_v._tempV32,H_a[0]),H_gb.add(H_v._tempV30,H_v._tempV31,H_v._tempV33),H_gb.subtract(H_v._tempV33,H_v._tempV32,H_a[1]),H_gb.subtract(H_v._tempV31,H_v._tempV30,H_v._tempV33),H_gb.subtract(H_v._tempV33,H_v._tempV30,H_a[2]),H_gb.subtract(H_v._tempV31,H_v._tempV30,H_v._tempV33),H_gb.add(H_v._tempV33,H_v._tempV32,H_a[3]),H_gb.subtract(H_v._tempV30,H_v._tempV31,H_v._tempV33),H_gb.add(H_v._tempV33,H_v._tempV32,H_a[4]),H_gb.subtract(H_v._tempV30,H_v._tempV31,H_v._tempV33),H_gb.subtract(H_v._tempV33,H_v._tempV32,H_a[5]),H_gb.scale(H_a[0],-1,H_a[6]),H_gb.subtract(H_v._tempV32,H_v._tempV30,H_v._tempV33),H_gb.subtract(H_v._tempV33,H_v._tempV31,H_a[7])},H_a.equals=function(H_a){return this.extents==H_a.extents&&this.transformation==H_a.transformation},H_a.cloneTo=function(H_a){var H_b=H_a;this.extents.cloneTo(H_b.extents),this.transformation.cloneTo(H_b.transformation)},H_v.createByBoundBox=function(H_a,H_b){var H_c=H_a.min,H_d=H_a.max;H_gb.subtract(H_d,H_c,H_v._tempV30),H_gb.scale(H_v._tempV30,.5,H_v._tempV30),H_gb.add(H_c,H_v._tempV30,H_v._tempV31),H_gb.subtract(H_d,H_v._tempV31,H_v._tempV32),H_ab.translation(H_v._tempV31,H_v._tempM0);var H_e=H_v._tempV32.clone(),H_f=H_v._tempM0.clone();H_b.extents=H_e,H_b.transformation=H_f},H_v.createByMinAndMaxVertex=function(H_a,H_b){return H_gb.subtract(H_b,H_a,H_v._tempV30),H_gb.scale(H_v._tempV30,.5,H_v._tempV30),H_gb.add(H_a,H_v._tempV30,H_v._tempV31),H_gb.subtract(H_b,H_v._tempV31,H_v._tempV32),H_ab.translation(H_v._tempV31,H_v._tempM0),new H_v(H_v._tempV32,H_v._tempM0)},H_v._getRows=function(H_a,H_b){H_b.length=3;var H_c=H_a.elements,H_d=H_b[0].elements;H_d[0]=H_c[0],H_d[1]=H_c[1],H_d[2]=H_c[2];var H_e=H_b[1].elements;H_e[0]=H_c[4],H_e[1]=H_c[5],H_e[2]=H_c[6];var H_f=H_b[2].elements;H_f[0]=H_c[8],H_f[1]=H_c[9],H_f[2]=H_c[10]},H_v.getObbtoObbMatrix4x4=function(H_a,H_b,H_c,H_d){var H_e=H_a.transformation,H_f=H_b.transformation;if(H_c){H_v._getRows(H_e,H_v._rows1),H_v._getRows(H_f,H_v._rows2);for(var H_g=0;H_g<3;H_g++)for(var H_h=0;H_h<3;H_h++)H_d.setElementByRowColumn(H_g,H_h,H_gb.dot(H_v._rows2[H_g],H_v._rows1[H_h]));H_b.getCenter(H_v._tempV30),H_a.getCenter(H_v._tempV31),H_gb.subtract(H_v._tempV30,H_v._tempV31,H_v._tempV32);var H_i=H_d.elements;H_i[12]=H_gb.dot(H_v._tempV32,H_v._rows1[0]),H_i[13]=H_gb.dot(H_v._tempV32,H_v._rows1[1]),H_i[14]=H_gb.dot(H_v._tempV32,H_v._rows1[2]),H_i[15]=1}else H_e.invert(H_v._tempM0),H_ab.multiply(H_f,H_v._tempM0,H_d)},H_v.merge=function(H_a,H_b,H_c){var H_d=H_a.extents,H_e=H_a.transformation;H_v.getObbtoObbMatrix4x4(H_a,H_b,H_c,H_v._tempM0),H_b._getLocalCorners(H_v._corners),H_gb.transformCoordinate(H_v._corners[0],H_v._tempM0,H_v._corners[0]),H_gb.transformCoordinate(H_v._corners[1],H_v._tempM0,H_v._corners[1]),H_gb.transformCoordinate(H_v._corners[2],H_v._tempM0,H_v._corners[2]),H_gb.transformCoordinate(H_v._corners[3],H_v._tempM0,H_v._corners[3]),H_gb.transformCoordinate(H_v._corners[4],H_v._tempM0,H_v._corners[4]),H_gb.transformCoordinate(H_v._corners[5],H_v._tempM0,H_v._corners[5]),H_gb.transformCoordinate(H_v._corners[6],H_v._tempM0,H_v._corners[6]),H_gb.transformCoordinate(H_v._corners[7],H_v._tempM0,H_v._corners[7]),H_gb.scale(H_d,-1,H_v._boxBound1.min),H_d.cloneTo(H_v._boxBound1.max),H_Za.createfromPoints(H_v._corners,H_v._boxBound2),H_Za.merge(H_v._boxBound2,H_v._boxBound1,H_v._boxBound3);var H_f=H_v._boxBound3.min,H_g=H_v._boxBound3.max;H_gb.subtract(H_g,H_f,H_v._tempV30),H_gb.scale(H_v._tempV30,.5,H_v._tempV30),H_gb.add(H_f,H_v._tempV30,H_v._tempV32),H_gb.subtract(H_g,H_v._tempV32,H_d),H_gb.transformCoordinate(H_v._tempV32,H_e,H_v._tempV33)},H_l(H_v,["_tempV30",function(){return this._tempV30=new H_gb},"_tempV31",function(){return this._tempV31=new H_gb},"_tempV32",function(){return this._tempV32=new H_gb},"_tempV33",function(){return this._tempV33=new H_gb},"_tempV34",function(){return this._tempV34=new H_gb},"_tempV35",function(){return this._tempV35=new H_gb},"_tempV36",function(){return this._tempV36=new H_gb},"_tempM0",function(){return this._tempM0=new H_ab},"_tempM1",function(){return this._tempM1=new H_ab},"_corners",function(){return this._corners=[new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb]},"_rows1",function(){return this._rows1=[new H_gb,new H_gb,new H_gb]},"_rows2",function(){return this._rows2=[new H_gb,new H_gb,new H_gb]},"_ray",function(){return this._ray=new H_eb(new H_gb,new H_gb)},"_boxBound1",function(){return this._boxBound1=new H_Za(new H_gb,new H_gb)},"_boxBound2",function(){return this._boxBound2=new H_Za(new H_gb,new H_gb)},"_boxBound3",function(){return this._boxBound3=new H_Za(new H_gb,new H_gb)}])}(),function(){function H_x(H_a,H_b){this.normal=null,this.distance=NaN,void 0===H_b&&(H_b=0),this.normal=H_a,this.distance=H_b}return H_n(H_x,"laya.d3.math.Plane"),H_x.prototype.normalize=function(){var H_a=this.normal.elements,H_b=H_a[0],H_c=H_a[1],H_d=H_a[2],H_e=1/Math.sqrt(H_b*H_b+H_c*H_c+H_d*H_d);H_a[0]=H_b*H_e,H_a[1]=H_c*H_e,H_a[2]=H_d*H_e,this.distance*=H_e},H_x.createPlaneBy3P=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_b.elements,H_f=H_c.elements,H_g=H_e[0]-H_d[0],H_h=H_e[1]-H_d[1],H_i=H_e[2]-H_d[2],H_j=H_f[0]-H_d[0],H_k=H_f[1]-H_d[1],H_l=H_f[2]-H_d[2],H_m=H_h*H_l-H_i*H_k,H_n=H_i*H_j-H_g*H_l,H_q=H_g*H_k-H_h*H_j,H_r=1/Math.sqrt(H_m*H_m+H_n*H_n+H_q*H_q),H_s=H_m*H_r,H_t=H_n*H_r,H_u=H_q*H_r,H_v=H_x._TEMPVec3.elements;H_v[0]=H_s,H_v[1]=H_t,H_v[2]=H_u;var H_w=-(H_s*H_d[0]+H_t*H_d[1]+H_u*H_d[2]);return new H_x(H_x._TEMPVec3,H_w)},H_x.PlaneIntersectionType_Back=0,H_x.PlaneIntersectionType_Front=1,H_x.PlaneIntersectionType_Intersecting=2,H_l(H_x,["_TEMPVec3",function(){return this._TEMPVec3=new H_gb}]),H_x}()),H_cb=function(){function H_e(H_a,H_b,H_c,H_d){this.elements=new Float32Array(4),void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=1),this.elements[0]=H_a,this.elements[1]=H_b,this.elements[2]=H_c,this.elements[3]=H_d}H_n(H_e,"laya.d3.math.Quaternion");var H_a=H_e.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.scaling=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements;H_c[0]=H_d[0]*H_a,H_c[1]=H_d[1]*H_a,H_c[2]=H_d[2]*H_a,H_c[3]=H_d[3]*H_a},H_a.normalize=function(H_a){var H_b=H_a.elements,H_c=this.elements,H_d=H_c[0],H_e=H_c[1],H_f=H_c[2],H_g=H_c[3],H_h=H_d*H_d+H_e*H_e+H_f*H_f+H_g*H_g;0<H_h&&(H_h=1/Math.sqrt(H_h),H_b[0]=H_d*H_h,H_b[1]=H_e*H_h,H_b[2]=H_f*H_h,H_b[3]=H_g*H_h)},H_a.length=function(){var H_a=this.elements,H_b=H_a[0],H_c=H_a[1],H_d=H_a[2],H_e=H_a[3];return Math.sqrt(H_b*H_b+H_c*H_c+H_d*H_d+H_e*H_e)},H_a.rotateX=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements;H_a*=.5;var H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=Math.sin(H_a),H_j=Math.cos(H_a);H_c[0]=H_e*H_j+H_h*H_i,H_c[1]=H_f*H_j+H_g*H_i,H_c[2]=H_g*H_j-H_f*H_i,H_c[3]=H_h*H_j-H_e*H_i},H_a.rotateY=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements;H_a*=.5;var H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=Math.sin(H_a),H_j=Math.cos(H_a);H_c[0]=H_e*H_j-H_g*H_i,H_c[1]=H_f*H_j+H_h*H_i,H_c[2]=H_g*H_j+H_e*H_i,H_c[3]=H_h*H_j-H_f*H_i},H_a.rotateZ=function(H_a,H_b){var H_c=H_b.elements,H_d=this.elements;H_a*=.5;var H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=Math.sin(H_a),H_j=Math.cos(H_a);H_c[0]=H_e*H_j+H_f*H_i,H_c[1]=H_f*H_j-H_e*H_i,H_c[2]=H_g*H_j+H_h*H_i,H_c[3]=H_h*H_j-H_g*H_i},H_a.getYawPitchRoll=function(H_a){H_gb.transformQuat(H_gb.ForwardRH,this,H_e.TEMPVector31),H_gb.transformQuat(H_gb.Up,this,H_e.TEMPVector32);var H_b=H_e.TEMPVector32.elements;H_e.angleTo(H_gb.ZERO,H_e.TEMPVector31,H_e.TEMPVector33);var H_c=H_e.TEMPVector33.elements;H_c[0]==Math.PI/2?(H_c[1]=H_e.arcTanAngle(H_b[2],H_b[0]),H_c[2]=0):H_c[0]==-Math.PI/2?(H_c[1]=H_e.arcTanAngle(-H_b[2],-H_b[0]),H_c[2]=0):(H_ab.createRotationY(-H_c[1],H_e.TEMPMatrix0),H_ab.createRotationX(-H_c[0],H_e.TEMPMatrix1),H_gb.transformCoordinate(H_e.TEMPVector32,H_e.TEMPMatrix0,H_e.TEMPVector32),H_gb.transformCoordinate(H_e.TEMPVector32,H_e.TEMPMatrix1,H_e.TEMPVector32),H_c[2]=H_e.arcTanAngle(H_b[1],-H_b[0])),H_c[1]<=-Math.PI&&(H_c[1]=Math.PI),H_c[2]<=-Math.PI&&(H_c[2]=Math.PI),H_c[1]>=Math.PI&&H_c[2]>=Math.PI&&(H_c[1]=0,H_c[2]=0,H_c[0]=Math.PI-H_c[0]);var H_d=H_a.elements;H_d[0]=H_c[1],H_d[1]=H_c[0],H_d[2]=H_c[2]},H_a.invert=function(H_a){var H_b=H_a.elements,H_c=this.elements,H_d=H_c[0],H_e=H_c[1],H_f=H_c[2],H_g=H_c[3],H_h=H_d*H_d+H_e*H_e+H_f*H_f+H_g*H_g,H_i=H_h?1/H_h:0;H_b[0]=-H_d*H_i,H_b[1]=-H_e*H_i,H_b[2]=-H_f*H_i,H_b[3]=H_g*H_i},H_a.identity=function(){var H_a=this.elements;H_a[0]=0,H_a[1]=0,H_a[2]=0,H_a[3]=1},H_a.fromArray=function(H_a,H_b){void 0===H_b&&(H_b=0),this.elements[0]=H_a[H_b+0],this.elements[1]=H_a[H_b+1],this.elements[2]=H_a[H_b+2],this.elements[3]=H_a[H_b+3]},H_a.cloneTo=function(H_a){var H_b,H_c,H_d;if((H_c=this.elements)!==(H_d=H_a.elements))for(H_b=0;H_b<4;++H_b)H_d[H_b]=H_c[H_b]},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_a.equals=function(H_a){var H_b=this.elements,H_c=H_a.elements;return H_oa.nearEqual(H_b[0],H_c[0])&&H_oa.nearEqual(H_b[1],H_c[1])&&H_oa.nearEqual(H_b[2],H_c[2])&&H_oa.nearEqual(H_b[3],H_c[3])},H_a.lengthSquared=function(){var H_a=this.elements[0],H_b=this.elements[1],H_c=this.elements[2],H_d=this.elements[3];return H_a*H_a+H_b*H_b+H_c*H_c+H_d*H_d},H_q(0,H_a,"x",function(){return this.elements[0]}),H_q(0,H_a,"y",function(){return this.elements[1]}),H_q(0,H_a,"z",function(){return this.elements[2]}),H_q(0,H_a,"w",function(){return this.elements[3]}),H_e.createFromYawPitchRoll=function(H_a,H_b,H_c,H_d){var H_e=.5*H_c,H_f=.5*H_b,H_g=.5*H_a,H_h=Math.sin(H_e),H_i=Math.cos(H_e),H_j=Math.sin(H_f),H_k=Math.cos(H_f),H_l=Math.sin(H_g),H_m=Math.cos(H_g),H_n=H_d.elements;H_n[0]=H_m*H_j*H_i+H_l*H_k*H_h,H_n[1]=H_l*H_k*H_i-H_m*H_j*H_h,H_n[2]=H_m*H_k*H_h-H_l*H_j*H_i,H_n[3]=H_m*H_k*H_i+H_l*H_j*H_h},H_e.multiply=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_b.elements,H_f=H_c.elements,H_g=H_d[0],H_h=H_d[1],H_i=H_d[2],H_j=H_d[3],H_k=H_e[0],H_l=H_e[1],H_m=H_e[2],H_n=H_e[3],H_q=H_h*H_m-H_i*H_l,H_r=H_i*H_k-H_g*H_m,H_s=H_g*H_l-H_h*H_k,H_t=H_g*H_k+H_h*H_l+H_i*H_m;H_f[0]=H_g*H_n+H_k*H_j+H_q,H_f[1]=H_h*H_n+H_l*H_j+H_r,H_f[2]=H_i*H_n+H_m*H_j+H_s,H_f[3]=H_j*H_n-H_t},H_e.arcTanAngle=function(H_a,H_b){return 0==H_a?1==H_b?Math.PI/2:-Math.PI/2:0<H_a?Math.atan(H_b/H_a):H_a<0?0<H_b?Math.atan(H_b/H_a)+Math.PI:Math.atan(H_b/H_a)-Math.PI:0},H_e.angleTo=function(H_a,H_b,H_c){H_gb.subtract(H_b,H_a,H_e.TEMPVector30),H_gb.normalize(H_e.TEMPVector30,H_e.TEMPVector30),H_c.elements[0]=Math.asin(H_e.TEMPVector30.y),H_c.elements[1]=H_e.arcTanAngle(-H_e.TEMPVector30.z,-H_e.TEMPVector30.x)},H_e.createFromAxisAngle=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements;H_b*=.5;var H_f=Math.sin(H_b);H_d[0]=H_f*H_e[0],H_d[1]=H_f*H_e[1],H_d[2]=H_f*H_e[2],H_d[3]=Math.cos(H_b)},H_e.createFromMatrix3x3=function(H_a,H_b){var H_c,H_d=H_b.elements,H_e=H_a.elements,H_f=H_e[0]+H_e[4]+H_e[8];if(0<H_f)H_c=Math.sqrt(H_f+1),H_d[3]=.5*H_c,H_c=.5/H_c,H_d[0]=(H_e[5]-H_e[7])*H_c,H_d[1]=(H_e[6]-H_e[2])*H_c,H_d[2]=(H_e[1]-H_e[3])*H_c;else{var H_g=0;H_e[4]>H_e[0]&&(H_g=1),H_e[8]>H_e[3*H_g+H_g]&&(H_g=2);var H_h=(H_g+1)%3,H_i=(H_g+2)%3;H_c=Math.sqrt(H_e[3*H_g+H_g]-H_e[3*H_h+H_h]-H_e[3*H_i+H_i]+1),H_d[H_g]=.5*H_c,H_c=.5/H_c,H_d[3]=(H_e[3*H_h+H_i]-H_e[3*H_i+H_h])*H_c,H_d[H_h]=(H_e[3*H_h+H_g]+H_e[3*H_g+H_h])*H_c,H_d[H_i]=(H_e[3*H_i+H_g]+H_e[3*H_g+H_i])*H_c}},H_e.createFromMatrix4x4=function(H_a,H_b){var H_c,H_d,H_e=H_a.elements,H_f=H_b.elements,H_g=H_e[0]+H_e[5]+H_e[10];0<H_g?(H_c=Math.sqrt(H_g+1),H_f[3]=.5*H_c,H_c=.5/H_c,H_f[0]=(H_e[6]-H_e[9])*H_c,H_f[1]=(H_e[8]-H_e[2])*H_c,H_f[2]=(H_e[1]-H_e[4])*H_c):H_e[0]>=H_e[5]&&H_e[0]>=H_e[10]?(H_d=.5/(H_c=Math.sqrt(1+H_e[0]-H_e[5]-H_e[10])),H_f[0]=.5*H_c,H_f[1]=(H_e[1]+H_e[4])*H_d,H_f[2]=(H_e[2]+H_e[8])*H_d,H_f[3]=(H_e[6]-H_e[9])*H_d):H_e[5]>H_e[10]?(H_d=.5/(H_c=Math.sqrt(1+H_e[5]-H_e[0]-H_e[10])),H_f[0]=(H_e[4]+H_e[1])*H_d,H_f[1]=.5*H_c,H_f[2]=(H_e[9]+H_e[6])*H_d,H_f[3]=(H_e[8]-H_e[2])*H_d):(H_d=.5/(H_c=Math.sqrt(1+H_e[10]-H_e[0]-H_e[5])),H_f[0]=(H_e[8]+H_e[2])*H_d,H_f[1]=(H_e[9]+H_e[6])*H_d,H_f[2]=.5*H_c,H_f[3]=(H_e[1]-H_e[4])*H_d)},H_e.slerp=function(H_a,H_b,H_c,H_d){var H_e,H_f,H_g,H_h,H_i,H_j=H_a.elements,H_k=H_b.elements,H_l=H_d.elements,H_m=H_j[0],H_n=H_j[1],H_q=H_j[2],H_r=H_j[3],H_s=H_k[0],H_t=H_k[1],H_u=H_k[2],H_v=H_k[3];return(H_f=H_m*H_s+H_n*H_t+H_q*H_u+H_r*H_v)<0&&(H_f=-H_f,H_s=-H_s,H_t=-H_t,H_u=-H_u,H_v=-H_v),H_i=1e-6<1-H_f?(H_e=Math.acos(H_f),H_g=Math.sin(H_e),H_h=Math.sin((1-H_c)*H_e)/H_g,Math.sin(H_c*H_e)/H_g):(H_h=1-H_c,H_c),H_l[0]=H_h*H_m+H_i*H_s,H_l[1]=H_h*H_n+H_i*H_t,H_l[2]=H_h*H_q+H_i*H_u,H_l[3]=H_h*H_r+H_i*H_v,H_l},H_e.lerp=function(H_a,H_b,H_c,H_d){var H_e=H_d.elements,H_f=H_a.elements,H_g=H_b.elements,H_h=H_f[0],H_i=H_f[1],H_j=H_f[2],H_k=H_f[3];H_e[0]=H_h+H_c*(H_g[0]-H_h),H_e[1]=H_i+H_c*(H_g[1]-H_i),H_e[2]=H_j+H_c*(H_g[2]-H_j),H_e[3]=H_k+H_c*(H_g[3]-H_k)},H_e.add=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]+H_f[0],H_d[1]=H_e[1]+H_f[1],H_d[2]=H_e[2]+H_f[2],H_d[3]=H_e[3]+H_f[3]},H_e.dot=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;return H_c[0]*H_d[0]+H_c[1]*H_d[1]+H_c[2]*H_d[2]+H_c[3]*H_d[3]},H_e.rotationLookAt=function(H_a,H_b,H_c){H_e.lookAt(H_gb.ZERO,H_a,H_b,H_c)},H_e.lookAt=function(H_a,H_b,H_c,H_d){H_pa.lookAt(H_a,H_b,H_c,H_e._tempMatrix3x3),H_e.rotationMatrix(H_e._tempMatrix3x3,H_d)},H_e.invert=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_a.lengthSquared();H_oa.isZero(H_e)||(H_e=1/H_e,H_d[0]=-H_c[0]*H_e,H_d[1]=-H_c[1]*H_e,H_d[2]=-H_c[2]*H_e,H_d[3]=H_c[3]*H_e)},H_e.rotationMatrix=function(H_a,H_b){var H_c=H_a.elements,H_d=H_c[0],H_e=H_c[1],H_f=H_c[2],H_g=H_c[3],H_h=H_c[4],H_i=H_c[5],H_j=H_c[6],H_k=H_c[7],H_l=H_c[8],H_m=H_b.elements,H_n=NaN,H_q=NaN,H_r=H_d+H_h+H_l;0<H_r?(H_n=Math.sqrt(H_r+1),H_m[3]=.5*H_n,H_n=.5/H_n,H_m[0]=(H_i-H_k)*H_n,H_m[1]=(H_j-H_f)*H_n,H_m[2]=(H_e-H_g)*H_n):H_h<=H_d&&H_l<=H_d?(H_q=.5/(H_n=Math.sqrt(1+H_d-H_h-H_l)),H_m[0]=.5*H_n,H_m[1]=(H_e+H_g)*H_q,H_m[2]=(H_f+H_j)*H_q,H_m[3]=(H_i-H_k)*H_q):H_l<H_h?(H_q=.5/(H_n=Math.sqrt(1+H_h-H_d-H_l)),H_m[0]=(H_g+H_e)*H_q,H_m[1]=.5*H_n,H_m[2]=(H_k+H_i)*H_q,H_m[3]=(H_j-H_f)*H_q):(H_q=.5/(H_n=Math.sqrt(1+H_l-H_d-H_h)),H_m[0]=(H_j+H_f)*H_q,H_m[1]=(H_k+H_i)*H_q,H_m[2]=.5*H_n,H_m[3]=(H_e-H_g)*H_q)},H_e.DEFAULT=new H_e,H_l(H_e,["TEMPVector30",function(){return this.TEMPVector30=new H_gb},"TEMPVector31",function(){return this.TEMPVector31=new H_gb},"TEMPVector32",function(){return this.TEMPVector32=new H_gb},"TEMPVector33",function(){return this.TEMPVector33=new H_gb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new H_ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new H_ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new H_pa},"NAN",function(){return this.NAN=new H_e(NaN,NaN,NaN,NaN)}]),H_e}(),H_db=function(){function H_a(H_a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=H_a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}H_n(H_a,"laya.d3.math.Rand");var H_b=H_a.prototype;return H_b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},H_b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},H_b.getSignedFloat=function(){return 2*this.getFloat()-1},H_q(0,H_b,"seed",function(){return this.seeds[0]},function(H_a){this.seeds[0]=H_a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),H_a.getFloatFromInt=function(H_a){return 1/8388607*(8388607&H_a)},H_a.getByteFromInt=function(H_a){return(8388607&H_a)>>>15},H_a}(),H_eb=(function(){function H_e(H_a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(H_a instanceof Array)||4!==H_a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|H_a[0],this._state0L=0|H_a[1],this._state1U=0|H_a[2],this._state1L=0|H_a[3]}H_n(H_e,"laya.d3.math.RandX");var H_a=H_e.prototype;H_a.randomint=function(){var H_a=this._state0U,H_b=this._state0L,H_c=this._state1U,H_d=this._state1L,H_e=(H_d>>>0)+(H_b>>>0),H_f=H_c+H_a+(H_e/2>>>31)>>>0,H_g=H_e>>>0,H_h=0,H_i=0;H_h=(H_a^=H_h=H_a<<23|(-512&H_b)>>>9)^(this._state0U=H_c),H_i=(H_b^=H_i=H_b<<23)^(this._state0L=H_d);H_h^=H_a>>>18,H_i^=H_b>>>18|(262143&H_a)<<14;return H_h^=H_c>>>5,H_i^=H_d>>>5|(31&H_c)<<27,this._state1U=H_h,this._state1L=H_i,[H_f,H_g]},H_a.random=function(){var H_a=this.randomint(),H_b=H_a[0],H_c=1023<<20|H_b>>>12,H_d=0|(H_a[1]>>>12|(4095&H_b)<<20);return H_e._CONVERTION_BUFFER.setUint32(0,H_c,!1),H_e._CONVERTION_BUFFER.setUint32(4,H_d,!1),H_db._CONVERTION_BUFFER.getFloat64(0,!1)-1},H_l(H_e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new H_db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function H_a(H_a,H_b){this.origin=null,this.direction=null,this.origin=H_a,this.direction=H_b}return H_n(H_a,"laya.d3.math.Ray"),H_a}()),H_fb=function(){function H_a(H_a,H_b){this.elements=new Float32Array(2),void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0);var H_c=this.elements;H_c[0]=H_a,H_c[1]=H_b}H_n(H_a,"laya.d3.math.Vector2");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.fromArray=function(H_a,H_b){void 0===H_b&&(H_b=0),this.elements[0]=H_a[H_b+0],this.elements[1]=H_a[H_b+1]},H_b.cloneTo=function(H_a){var H_b=H_a.elements,H_c=this.elements;H_b[0]=H_c[0],H_b[1]=H_c[1]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"x",function(){return this.elements[0]},function(H_a){this.elements[0]=H_a}),H_q(0,H_b,"y",function(){return this.elements[1]},function(H_a){this.elements[1]=H_a}),H_a.scale=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements;H_d[0]=H_e[0]*H_b,H_d[1]=H_e[1]*H_b},H_l(H_a,["ZERO",function(){return this.ZERO=new H_a(0,0)},"ONE",function(){return this.ONE=new H_a(1,1)}]),H_a}(),H_gb=function(){function H_k(H_a,H_b,H_c){this.elements=new Float32Array(3),void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0);var H_d=this.elements;H_d[0]=H_a,H_d[1]=H_b,H_d[2]=H_c}H_n(H_k,"laya.d3.math.Vector3");var H_a=H_k.prototype;return H_x.imps(H_a,{"laya.d3.core.IClone":!0}),H_a.fromArray=function(H_a,H_b){void 0===H_b&&(H_b=0),this.elements[0]=H_a[H_b+0],this.elements[1]=H_a[H_b+1],this.elements[2]=H_a[H_b+2]},H_a.cloneTo=function(H_a){var H_b=H_a.elements,H_c=this.elements;H_b[0]=H_c[0],H_b[1]=H_c[1],H_b[2]=H_c[2]},H_a.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},H_a.reset=function(H_a,H_b,H_c){this.elements[0]=H_a,this.elements[1]=H_b,this.elements[2]=H_c},H_q(0,H_a,"x",function(){return this.elements[0]},function(H_a){this.elements[0]=H_a}),H_q(0,H_a,"y",function(){return this.elements[1]},function(H_a){this.elements[1]=H_a}),H_q(0,H_a,"z",function(){return this.elements[2]},function(H_a){this.elements[2]=H_a}),H_k.distanceSquared=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0]-H_d[0],H_f=H_c[1]-H_d[1],H_g=H_c[2]-H_d[2];return H_e*H_e+H_f*H_f+H_g*H_g},H_k.distance=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0]-H_d[0],H_f=H_c[1]-H_d[1],H_g=H_c[2]-H_d[2];return Math.sqrt(H_e*H_e+H_f*H_f+H_g*H_g)},H_k.min=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=Math.min(H_e[0],H_f[0]),H_d[1]=Math.min(H_e[1],H_f[1]),H_d[2]=Math.min(H_e[2],H_f[2])},H_k.max=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=Math.max(H_e[0],H_f[0]),H_d[1]=Math.max(H_e[1],H_f[1]),H_d[2]=Math.max(H_e[2],H_f[2])},H_k.transformQuat=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements,H_g=H_e[0],H_h=H_e[1],H_i=H_e[2],H_j=H_f[0],H_k=H_f[1],H_l=H_f[2],H_m=H_f[3],H_n=H_m*H_g+H_k*H_i-H_l*H_h,H_q=H_m*H_h+H_l*H_g-H_j*H_i,H_r=H_m*H_i+H_j*H_h-H_k*H_g,H_s=-H_j*H_g-H_k*H_h-H_l*H_i;H_d[0]=H_n*H_m+H_s*-H_j+H_q*-H_l-H_r*-H_k,H_d[1]=H_q*H_m+H_s*-H_k+H_r*-H_j-H_n*-H_l,H_d[2]=H_r*H_m+H_s*-H_l+H_n*-H_k-H_q*-H_j},H_k.scalarLength=function(H_a){var H_b=H_a.elements,H_c=H_b[0],H_d=H_b[1],H_e=H_b[2];return Math.sqrt(H_c*H_c+H_d*H_d+H_e*H_e)},H_k.scalarLengthSquared=function(H_a){var H_b=H_a.elements,H_c=H_b[0],H_d=H_b[1],H_e=H_b[2];return H_c*H_c+H_d*H_d+H_e*H_e},H_k.normalize=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0],H_f=H_c[1],H_g=H_c[2],H_h=H_e*H_e+H_f*H_f+H_g*H_g;0<H_h&&(H_h=1/Math.sqrt(H_h),H_d[0]=H_c[0]*H_h,H_d[1]=H_c[1]*H_h,H_d[2]=H_c[2]*H_h)},H_k.multiply=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]*H_f[0],H_d[1]=H_e[1]*H_f[1],H_d[2]=H_e[2]*H_f[2]},H_k.scale=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements;H_d[0]=H_e[0]*H_b,H_d[1]=H_e[1]*H_b,H_d[2]=H_e[2]*H_b},H_k.lerp=function(H_a,H_b,H_c,H_d){var H_e=H_d.elements,H_f=H_a.elements,H_g=H_b.elements,H_h=H_f[0],H_i=H_f[1],H_j=H_f[2];H_e[0]=H_h+H_c*(H_g[0]-H_h),H_e[1]=H_i+H_c*(H_g[1]-H_i),H_e[2]=H_j+H_c*(H_g[2]-H_j)},H_k.transformV3ToV3=function(H_a,H_b,H_c){var H_d=H_k._tempVector4;H_k.transformV3ToV4(H_a,H_b,H_d);var H_e=H_d.elements,H_f=H_c.elements;H_f[0]=H_e[0],H_f[1]=H_e[1],H_f[2]=H_e[2]},H_k.transformV3ToV4=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_b.elements,H_i=H_c.elements;H_i[0]=H_e*H_h[0]+H_f*H_h[4]+H_g*H_h[8]+H_h[12],H_i[1]=H_e*H_h[1]+H_f*H_h[5]+H_g*H_h[9]+H_h[13],H_i[2]=H_e*H_h[2]+H_f*H_h[6]+H_g*H_h[10]+H_h[14],H_i[3]=H_e*H_h[3]+H_f*H_h[7]+H_g*H_h[11]+H_h[15]},H_k.TransformNormal=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_b.elements,H_i=H_c.elements;H_i[0]=H_e*H_h[0]+H_f*H_h[4]+H_g*H_h[8],H_i[1]=H_e*H_h[1]+H_f*H_h[5]+H_g*H_h[9],H_i[2]=H_e*H_h[2]+H_f*H_h[6]+H_g*H_h[10]},H_k.transformCoordinate=function(H_a,H_b,H_c){var H_d=H_k._tempVector4.elements,H_e=H_a.elements,H_f=H_e[0],H_g=H_e[1],H_h=H_e[2],H_i=H_b.elements;H_d[0]=H_f*H_i[0]+H_g*H_i[4]+H_h*H_i[8]+H_i[12],H_d[1]=H_f*H_i[1]+H_g*H_i[5]+H_h*H_i[9]+H_i[13],H_d[2]=H_f*H_i[2]+H_g*H_i[6]+H_h*H_i[10]+H_i[14],H_d[3]=1/(H_f*H_i[3]+H_g*H_i[7]+H_h*H_i[11]+H_i[15]);var H_j=H_c.elements;H_j[0]=H_d[0]*H_d[3],H_j[1]=H_d[1]*H_d[3],H_j[2]=H_d[2]*H_d[3]},H_k.Clamp=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements,H_f=H_e[0],H_g=H_e[1],H_h=H_e[2],H_i=H_b.elements,H_j=H_i[0],H_k=H_i[1],H_l=H_i[2],H_m=H_c.elements,H_n=H_m[0],H_q=H_m[1],H_r=H_m[2],H_s=H_d.elements;H_f=(H_f=H_n<H_f?H_n:H_f)<H_j?H_j:H_f,H_g=(H_g=H_q<H_g?H_q:H_g)<H_k?H_k:H_g,H_h=(H_h=H_r<H_h?H_r:H_h)<H_l?H_l:H_h,H_s[0]=H_f,H_s[1]=H_g,H_s[2]=H_h},H_k.add=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]+H_f[0],H_d[1]=H_e[1]+H_f[1],H_d[2]=H_e[2]+H_f[2]},H_k.subtract=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]-H_f[0],H_d[1]=H_e[1]-H_f[1],H_d[2]=H_e[2]-H_f[2]},H_k.cross=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_b.elements,H_f=H_c.elements,H_g=H_d[0],H_h=H_d[1],H_i=H_d[2],H_j=H_e[0],H_k=H_e[1],H_l=H_e[2];H_f[0]=H_h*H_l-H_i*H_k,H_f[1]=H_i*H_j-H_g*H_l,H_f[2]=H_g*H_k-H_h*H_j},H_k.dot=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;return H_c[0]*H_d[0]+H_c[1]*H_d[1]+H_c[2]*H_d[2]},H_k.equals=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;return H_oa.nearEqual(Math.abs(H_c[0]),Math.abs(H_d[0]))&&H_oa.nearEqual(Math.abs(H_c[1]),Math.abs(H_d[1]))&&H_oa.nearEqual(Math.abs(H_c[2]),Math.abs(H_d[2]))},H_k.ZERO=new H_k(0,0,0),H_k.ONE=new H_k(1,1,1),H_k.NegativeUnitX=new H_k(-1,0,0),H_k.UnitX=new H_k(1,0,0),H_k.UnitY=new H_k(0,1,0),H_k.UnitZ=new H_k(0,0,1),H_k.ForwardRH=new H_k(0,0,-1),H_k.ForwardLH=new H_k(0,0,1),H_k.Up=new H_k(0,1,0),H_k.NAN=new H_k(NaN,NaN,NaN),H_l(H_k,["_tempVector4",function(){return this._tempVector4=new H_hb}]),H_k}(),H_hb=function(){function H_a(H_a,H_b,H_c,H_d){this.elements=new Float32Array(4),void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=0);var H_e=this.elements;H_e[0]=H_a,H_e[1]=H_b,H_e[2]=H_c,H_e[3]=H_d}H_n(H_a,"laya.d3.math.Vector4");var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b.fromArray=function(H_a,H_b){void 0===H_b&&(H_b=0),this.elements[0]=H_a[H_b+0],this.elements[1]=H_a[H_b+1],this.elements[2]=H_a[H_b+2],this.elements[3]=H_a[H_b+3]},H_b.cloneTo=function(H_a){var H_b=H_a.elements,H_c=this.elements;H_b[0]=H_c[0],H_b[1]=H_c[1],H_b[2]=H_c[2],H_b[3]=H_c[3]},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},H_b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},H_q(0,H_b,"x",function(){return this.elements[0]},function(H_a){this.elements[0]=H_a}),H_q(0,H_b,"y",function(){return this.elements[1]},function(H_a){this.elements[1]=H_a}),H_q(0,H_b,"z",function(){return this.elements[2]},function(H_a){this.elements[2]=H_a}),H_q(0,H_b,"w",function(){return this.elements[3]},function(H_a){this.elements[3]=H_a}),H_a.lerp=function(H_a,H_b,H_c,H_d){var H_e=H_d.elements,H_f=H_a.elements,H_g=H_b.elements,H_h=H_f[0],H_i=H_f[1],H_j=H_f[2],H_k=H_f[3];H_e[0]=H_h+H_c*(H_g[0]-H_h),H_e[1]=H_i+H_c*(H_g[1]-H_i),H_e[2]=H_j+H_c*(H_g[2]-H_j),H_e[3]=H_k+H_c*(H_g[3]-H_k)},H_a.transformByM4x4=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_d[0],H_f=H_d[1],H_g=H_d[2],H_h=H_d[3],H_i=H_b.elements,H_j=H_c.elements;H_j[0]=H_e*H_i[0]+H_f*H_i[4]+H_g*H_i[8]+H_h*H_i[12],H_j[1]=H_e*H_i[1]+H_f*H_i[5]+H_g*H_i[9]+H_h*H_i[13],H_j[2]=H_e*H_i[2]+H_f*H_i[6]+H_g*H_i[10]+H_h*H_i[14],H_j[3]=H_e*H_i[3]+H_f*H_i[7]+H_g*H_i[11]+H_h*H_i[15]},H_a.equals=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;return H_oa.nearEqual(Math.abs(H_c[0]),Math.abs(H_d[0]))&&H_oa.nearEqual(Math.abs(H_c[1]),Math.abs(H_d[1]))&&H_oa.nearEqual(Math.abs(H_c[2]),Math.abs(H_d[2]))&&H_oa.nearEqual(Math.abs(H_c[3]),Math.abs(H_d[3]))},H_a.normalize=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_a.length();0<H_e&&(H_d[0]=H_c[0]*H_e,H_d[1]=H_c[1]*H_e,H_d[2]=H_c[2]*H_e,H_d[3]=H_c[3]*H_e)},H_a.add=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]+H_f[0],H_d[1]=H_e[1]+H_f[1],H_d[2]=H_e[2]+H_f[2],H_d[3]=H_e[3]+H_f[3]},H_a.subtract=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]-H_f[0],H_d[1]=H_e[1]-H_f[1],H_d[2]=H_e[2]-H_f[2],H_d[3]=H_e[3]-H_f[3]},H_a.multiply=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=H_e[0]*H_f[0],H_d[1]=H_e[1]*H_f[1],H_d[2]=H_e[2]*H_f[2],H_d[3]=H_e[3]*H_f[3]},H_a.scale=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements;H_d[0]=H_e[0]*H_b,H_d[1]=H_e[1]*H_b,H_d[2]=H_e[2]*H_b,H_d[3]=H_e[3]*H_b},H_a.Clamp=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements,H_f=H_e[0],H_g=H_e[1],H_h=H_e[2],H_i=H_e[3],H_j=H_b.elements,H_k=H_j[0],H_l=H_j[1],H_m=H_j[2],H_n=H_j[3],H_q=H_c.elements,H_r=H_q[0],H_s=H_q[1],H_t=H_q[2],H_u=H_q[3],H_v=H_d.elements;H_f=(H_f=H_r<H_f?H_r:H_f)<H_k?H_k:H_f,H_g=(H_g=H_s<H_g?H_s:H_g)<H_l?H_l:H_g,H_h=(H_h=H_t<H_h?H_t:H_h)<H_m?H_m:H_h,H_i=(H_i=H_u<H_i?H_u:H_i)<H_n?H_n:H_i,H_v[0]=H_f,H_v[1]=H_g,H_v[2]=H_h,H_v[3]=H_i},H_a.distanceSquared=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0]-H_d[0],H_f=H_c[1]-H_d[1],H_g=H_c[2]-H_d[2],H_h=H_c[3]-H_d[3];return H_e*H_e+H_f*H_f+H_g*H_g+H_h*H_h},H_a.distance=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements,H_e=H_c[0]-H_d[0],H_f=H_c[1]-H_d[1],H_g=H_c[2]-H_d[2],H_h=H_c[3]-H_d[3];return Math.sqrt(H_e*H_e+H_f*H_f+H_g*H_g+H_h*H_h)},H_a.dot=function(H_a,H_b){var H_c=H_a.elements,H_d=H_b.elements;return H_c[0]*H_d[0]+H_c[1]*H_d[1]+H_c[2]*H_d[2]+H_c[3]*H_d[3]},H_a.min=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=Math.min(H_e[0],H_f[0]),H_d[1]=Math.min(H_e[1],H_f[1]),H_d[2]=Math.min(H_e[2],H_f[2]),H_d[3]=Math.min(H_e[3],H_f[3])},H_a.max=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b.elements;H_d[0]=Math.max(H_e[0],H_f[0]),H_d[1]=Math.max(H_e[1],H_f[1]),H_d[2]=Math.max(H_e[2],H_f[2]),H_d[3]=Math.max(H_e[3],H_f[3])},H_l(H_a,["ZERO",function(){return this.ZERO=new H_a},"ONE",function(){return this.ONE=new H_a(1,1,1,1)},"UnitX",function(){return this.UnitX=new H_a(1,0,0,0)},"UnitY",function(){return this.UnitY=new H_a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new H_a(0,0,1,0)},"UnitW",function(){return this.UnitW=new H_a(0,0,0,1)}]),H_a}(),H_ib=function(){function H_f(H_a,H_b,H_c,H_d){this.minDepth=0,this.maxDepth=1,this.x=H_a,this.y=H_b,this.width=H_c,this.height=H_d}H_n(H_f,"laya.d3.math.Viewport");var H_a=H_f.prototype;return H_a.project=function(H_a,H_b,H_c){H_gb.transformV3ToV3(H_a,H_b,H_c);var H_d=H_a.elements,H_e=H_b.elements,H_f=H_c.elements,H_g=H_d[0]*H_e[3]+H_d[1]*H_e[7]+H_d[2]*H_e[11]+H_e[15];1!==H_g&&(H_f[0]=H_f[0]/H_g,H_f[1]=H_f[1]/H_g,H_f[2]=H_f[2]/H_g),H_f[0]=.5*(H_f[0]+1)*this.width+this.x,H_f[1]=.5*(1-H_f[1])*this.height+this.y,H_f[2]=H_f[2]*(this.maxDepth-this.minDepth)+this.minDepth},H_a.unprojectFromMat=function(H_a,H_b,H_c){var H_d=H_a.elements,H_e=H_b.elements,H_f=H_c.elements;H_f[0]=(H_d[0]-this.x)/this.width*2-1,H_f[1]=-((H_d[1]-this.y)/this.height*2-1);var H_g=(this.maxDepth-this.minDepth)/2;H_f[2]=(H_d[2]-this.minDepth-H_g)/H_g;var H_h=H_f[0]*H_e[3]+H_f[1]*H_e[7]+H_f[2]*H_e[11]+H_e[15];H_gb.transformV3ToV3(H_c,H_b,H_c),1!==H_h&&(H_f[0]=H_f[0]/H_h,H_f[1]=H_f[1]/H_h,H_f[2]=H_f[2]/H_h)},H_a.unprojectFromWVP=function(H_a,H_b,H_c,H_d,H_e){H_ab.multiply(H_b,H_c,H_f._tempMatrix4x4),H_d&&H_ab.multiply(H_f._tempMatrix4x4,H_d,H_f._tempMatrix4x4),H_f._tempMatrix4x4.invert(H_f._tempMatrix4x4),this.unprojectFromMat(H_a,H_f._tempMatrix4x4,H_e)},H_l(H_f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H_ab}]),H_f}(),H_jb=function(){function H_E(H_a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=H_a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}H_n(H_E,"laya.d3.resource.models.SubMesh");var H_a=H_E.prototype;return H_x.imps(H_a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H_a._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),0===H_a?this._vertexBuffer:null},H_a._getIndexBuffer=function(){return this._indexBuffer},H_a._getStaticBatchBakedVertexs=function(H_a,H_b){var H_c,H_d,H_e=this._vertexBuffer,H_f=H_e.vertexDeclaration,H_g=H_f.getVertexElementByUsage(0).offset/4,H_h=H_f.getVertexElementByUsage(3).offset/4,H_i=H_b.meshRender.lightmapScaleOffset,H_j=0,H_k=0,H_l=0,H_m=0,H_n=0,H_q=0;if(H_i)if(H_d=H_f.getVertexElementByUsage(15))H_l=H_f.vertexStride/4,H_c=0<this._vertexCount?H_e.getData().slice(this._vertexStart*H_l,(this._vertexStart+this._vertexCount)*H_l):H_e.getData().slice(),H_m=H_d.offset/4;else{H_l=(H_q=H_f.vertexStride/4)+2,H_c=this._vertexCount?new Float32Array(this._vertexCount*(H_e.vertexDeclaration.vertexStride/4+2)):new Float32Array(H_e.vertexCount*(H_e.vertexDeclaration.vertexStride/4+2)),H_m=(H_n=H_f.getVertexElementByUsage(2).offset/4)+2;var H_r=H_e.getData();for(H_j=0,H_k=H_r.length/H_q;H_j<H_k;H_j++){var H_s=0;H_s=0<this._vertexCount?(this._vertexStart+H_j)*H_q:H_j*H_q;var H_t=H_j*H_l,H_u=0;for(H_u=0;H_u<H_m;H_u++)H_c[H_t+H_u]=H_r[H_s+H_u];for(H_u=H_m;H_u<H_q;H_u++)H_c[H_t+H_u+2]=H_r[H_s+H_u]}}else H_l=H_f.vertexStride/4,H_c=this._vertexCount?H_e.getData().slice(this._vertexStart*H_l,(this._vertexStart+this._vertexCount)*H_l):H_e.getData().slice();if(H_a){var H_v=H_a.worldMatrix,H_w=H_E._tempMatrix4x40;H_v.invert(H_w);var H_x=H_E._tempMatrix4x41,H_y=H_b.transform.worldMatrix;H_ab.multiply(H_w,H_y,H_x)}else H_x=H_b.transform.worldMatrix;var H_z=H_E._tempQuaternion0;for(H_x.decomposeTransRotScale(H_E._tempVector30,H_z,H_E._tempVector31),H_j=0,H_k=H_c.length/H_l;H_j<H_k;H_j++){var H_A=H_j*H_l+H_g,H_B=H_j*H_l+H_h;if(H_sb.transformVector3ArrayToVector3ArrayCoordinate(H_c,H_A,H_x,H_c,H_A),H_sb.transformVector3ArrayByQuat(H_c,H_B,H_z,H_c,H_B),H_i){var H_C=H_j*H_l+H_m;if(H_d)H_sb.transformLightingMapTexcoordByUV1Array(H_c,H_C,H_i,H_c,H_C);else{var H_D=H_j*H_q+H_n;H_sb.transformLightingMapTexcoordByUV0Array(H_r,H_D,H_i,H_c,H_C)}}}return H_c},H_a._getVertexBuffers=function(){return null},H_a._beforeRender=function(H_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H_a._render=function(H_a){var H_b,H_c=0,H_d=H_a.renderElement;if(1<this._indexCount){var H_e=this._boneIndicesList.length;if(1<H_e){for(var H_f=0;H_f<H_e;H_f++)(H_b=H_d._skinAnimationDatas||this._skinAnimationDatas)&&(H_d._shaderValue.setValue(0,H_b[H_f]),H_a._shader.uploadRenderElementUniforms(H_d._shaderValue.data)),H_F.mainContext.drawElements(4,this._subIndexBufferCount[H_f],5123,2*this._subIndexBufferStart[H_f]);H_A.drawCall+=H_e}else(H_b=H_d._skinAnimationDatas||this._skinAnimationDatas)&&(H_d._shaderValue.setValue(0,H_b[0]),H_a._shader.uploadRenderElementUniforms(H_d._shaderValue.data)),H_F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),H_A.drawCall++;H_c=this._indexCount}else H_c=this._indexBuffer.indexCount,(H_b=H_d._skinAnimationDatas||this._skinAnimationDatas)&&(H_d._shaderValue.setValue(0,H_b[0]),H_a._shader.uploadRenderElementUniforms(H_d._shaderValue.data)),H_F.mainContext.drawElements(4,H_c,5123,0),H_A.drawCall++;H_A.trianglesFaces+=H_c/3},H_a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},H_a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},H_q(0,H_a,"_vertexBufferCount",function(){return 1}),H_q(0,H_a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H_l(H_E,["_tempVector30",function(){return this._tempVector30=new H_gb},"_tempVector31",function(){return this._tempVector31=new H_gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new H_cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new H_ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new H_ab}]),H_E}(),H_kb=function(){function H_a(H_a){this.defineCounter=0,this.defines=null,H_a?(this.defineCounter=H_a.defineCounter,this.defines=H_a.defines.slice()):(this.defineCounter=0,this.defines=[])}return H_n(H_a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),H_a.prototype.registerDefine=function(H_a){var H_b=Math.pow(2,this.defineCounter++);return this.defines[H_b]=H_a,H_b},H_a}(),H_lb=function(){function H_a(){}return H_n(H_a,"laya.d3.shader.ShaderInit3D"),H_a.__init__=function(){var H_a,H_b;H_Ab._globalRegDefine("HIGHPRECISION",H_Ab.SHADERDEFINE_HIGHPRECISION),H_Ab._globalRegDefine("FOG",H_Ab.SHADERDEFINE_FOG),H_Ab._globalRegDefine("DIRECTIONLIGHT",H_Ab.SHADERDEFINE_DIRECTIONLIGHT),H_Ab._globalRegDefine("POINTLIGHT",H_Ab.SHADERDEFINE_POINTLIGHT),H_Ab._globalRegDefine("SPOTLIGHT",H_Ab.SHADERDEFINE_SPOTLIGHT),H_Ab._globalRegDefine("UV",H_Ab.SHADERDEFINE_UV0),H_Ab._globalRegDefine("COLOR",H_Ab.SHADERDEFINE_COLOR),H_Ab._globalRegDefine("UV1",H_Ab.SHADERDEFINE_UV1),H_Ab._globalRegDefine("CASTSHADOW",H_nb.SHADERDEFINE_CAST_SHADOW),H_Ab._globalRegDefine("SHADOWMAP_PSSM1",H_nb.SHADERDEFINE_SHADOW_PSSM1),H_Ab._globalRegDefine("SHADOWMAP_PSSM2",H_nb.SHADERDEFINE_SHADOW_PSSM2),H_Ab._globalRegDefine("SHADOWMAP_PSSM3",H_nb.SHADERDEFINE_SHADOW_PSSM3),H_Ab._globalRegDefine("SHADOWMAP_PCF_NO",H_nb.SHADERDEFINE_SHADOW_PCF_NO),H_Ab._globalRegDefine("SHADOWMAP_PCF1",H_nb.SHADERDEFINE_SHADOW_PCF1),H_Ab._globalRegDefine("SHADOWMAP_PCF2",H_nb.SHADERDEFINE_SHADOW_PCF2),H_Ab._globalRegDefine("SHADOWMAP_PCF3",H_nb.SHADERDEFINE_SHADOW_PCF3),H_Ab._globalRegDefine("DEPTHFOG",H_Ab.SAHDERDEFINE_DEPTHFOG),H_Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),H_Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),H_a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},H_b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var H_c=H_Lb.nameKey.add("SIMPLE");shaderCompile=H_Ab.add(H_c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',H_a,H_b),H_Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),H_Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),H_Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),H_Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),H_Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),H_Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),H_Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),H_Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),H_Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},H_a}(),H_mb=function(){function H_a(){this._data=null,this._data=[]}H_n(H_a,"laya.d3.shader.ValusArray");var H_b=H_a.prototype;return H_b.setValue=function(H_a,H_b){this._data[H_a]=H_b},H_q(0,H_b,"data",function(){return this._data}),H_a}(),H_nb=function(){function H_a(){}return H_a.SHADERDEFINE_RECEIVE_SHADOW=1,H_a.SHADERDEFINE_CAST_SHADOW=512,H_a.SHADERDEFINE_SHADOW_PSSM1=1024,H_a.SHADERDEFINE_SHADOW_PSSM2=2048,H_a.SHADERDEFINE_SHADOW_PSSM3=4096,H_a.SHADERDEFINE_SHADOW_PCF_NO=8192,H_a.SHADERDEFINE_SHADOW_PCF1=16384,H_a.SHADERDEFINE_SHADOW_PCF2=32768,H_a.SHADERDEFINE_SHADOW_PCF3=65536,H_a.MAX_PSSM_COUNT=3,H_a}(),H_qb=function(){function H_X(){}return H_n(H_X,"laya.d3.utils.Picker"),H_X.calculateCursorRay=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_a.elements[0],H_h=H_a.elements[1],H_i=H_X._tempVector30,H_j=H_i.elements;H_j[0]=H_g,H_j[1]=H_h,H_j[2]=H_b.minDepth;var H_k=H_X._tempVector31,H_l=H_k.elements;H_l[0]=H_g,H_l[1]=H_h,H_l[2]=H_b.maxDepth;var H_m=H_f.origin,H_n=H_X._tempVector32;H_b.unprojectFromWVP(H_i,H_c,H_d,H_e,H_m),H_b.unprojectFromWVP(H_k,H_c,H_d,H_e,H_n);var H_q=H_f.direction.elements;H_q[0]=H_n.x-H_m.x,H_q[1]=H_n.y-H_m.y,H_q[2]=H_n.z-H_m.z,H_gb.normalize(H_f.direction,H_f.direction)},H_X.rayIntersectsPositionsAndIndices=function(H_a,H_b,H_c,H_d,H_e){for(var H_f=H_c.vertexStride/4,H_g=H_c.getVertexElementByUsage(0).offset/4,H_h=Number.MAX_VALUE,H_i=-1,H_j=-1,H_k=-1,H_l=0;H_l<H_d.length;H_l+=3){var H_m=H_X._tempVector35,H_n=H_m.elements,H_q=H_d[H_l]*H_f,H_r=H_q+H_g;H_n[0]=H_b[H_r],H_n[1]=H_b[1+H_r],H_n[2]=H_b[2+H_r];var H_s=H_X._tempVector36,H_t=H_s.elements,H_u=H_d[H_l+1]*H_f,H_v=H_u+H_g;H_t[0]=H_b[H_v],H_t[1]=H_b[1+H_v],H_t[2]=H_b[2+H_v];var H_w=H_X._tempVector37,H_x=H_w.elements,H_y=H_d[H_l+2]*H_f,H_z=H_y+H_g;H_x[0]=H_b[H_z],H_x[1]=H_b[1+H_z],H_x[2]=H_b[2+H_z];var H_A=laya.d3.utils.Picker.rayIntersectsTriangle(H_a,H_m,H_s,H_w);!isNaN(H_A)&&H_A<H_h&&(H_h=H_A,H_i=H_q,H_j=H_u,H_k=H_y)}if(H_h===Number.MAX_VALUE)return H_e.position.toDefault(),H_e.distance=Number.MAX_VALUE,H_e.trianglePositions[0].toDefault(),H_e.trianglePositions[1].toDefault(),H_e.trianglePositions[2].toDefault(),H_e.triangleNormals[0].toDefault(),H_e.triangleNormals[1].toDefault(),H_e.triangleNormals[2].toDefault(),!1;H_e.distance=H_h,H_gb.scale(H_a.direction,H_h,H_e.position),H_gb.add(H_a.origin,H_e.position,H_e.position);var H_B=H_e.trianglePositions,H_C=H_B[0],H_D=H_B[1],H_E=H_B[2],H_F=H_C.elements,H_G=H_D.elements,H_H=H_E.elements,H_I=H_i+H_g;H_F[0]=H_b[H_I],H_F[1]=H_b[H_I+1],H_F[2]=H_b[H_I+2];var H_J=H_j+H_g;H_G[0]=H_b[H_J],H_G[1]=H_b[H_J+1],H_G[2]=H_b[H_J+2];var H_K=H_k+H_g;H_H[0]=H_b[H_K],H_H[1]=H_b[H_K+1],H_H[2]=H_b[H_K+2];var H_L=H_c.getVertexElementByUsage(3);if(H_L){var H_M=H_L.offset/4,H_N=H_e.triangleNormals,H_O=H_N[0],H_P=H_N[1],H_Q=H_N[2],H_R=H_O.elements,H_S=H_P.elements,H_T=H_Q.elements,H_U=H_i+H_M;H_R[0]=H_b[H_U],H_R[1]=H_b[H_U+1],H_R[2]=H_b[H_U+2];var H_V=H_j+H_M;H_S[0]=H_b[H_V],H_S[1]=H_b[H_V+1],H_S[2]=H_b[H_V+2];var H_W=H_k+H_M;H_T[0]=H_b[H_W],H_T[1]=H_b[H_W+1],H_T[2]=H_b[H_W+2]}return!0},H_X.rayIntersectsTriangle=function(H_a,H_b,H_c,H_d){var H_e=H_X._tempVector30,H_f=H_X._tempVector31;H_gb.subtract(H_c,H_b,H_e),H_gb.subtract(H_d,H_b,H_f);var H_g,H_h=H_X._tempVector32;if(H_gb.cross(H_a.direction,H_f,H_h),(H_g=H_gb.dot(H_e,H_h))>-Number.MIN_VALUE&&H_g<Number.MIN_VALUE)return Number.NaN;var H_i,H_j=1/H_g,H_k=H_X._tempVector33;if(H_gb.subtract(H_a.origin,H_b,H_k),H_i=H_gb.dot(H_k,H_h),(H_i*=H_j)<0||1<H_i)return Number.NaN;var H_l,H_m,H_n=H_X._tempVector34;return H_gb.cross(H_k,H_e,H_n),H_l=H_gb.dot(H_a.direction,H_n),(H_l*=H_j)<0||1<H_i+H_l?Number.NaN:(H_m=H_gb.dot(H_f,H_n),(H_m*=H_j)<0?Number.NaN:H_m)},H_l(H_X,["_tempVector30",function(){return this._tempVector30=new H_gb},"_tempVector31",function(){return this._tempVector31=new H_gb},"_tempVector32",function(){return this._tempVector32=new H_gb},"_tempVector33",function(){return this._tempVector33=new H_gb},"_tempVector34",function(){return this._tempVector34=new H_gb},"_tempVector35",function(){return this._tempVector35=new H_gb},"_tempVector36",function(){return this._tempVector36=new H_gb},"_tempVector37",function(){return this._tempVector37=new H_gb}]),H_X}(),H_rb=(function(){function H_a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new H_gb,new H_gb,new H_gb],this.trianglePositions.length=3,this.triangleNormals=[new H_gb,new H_gb,new H_gb],this.triangleNormals.length=3,this.position=new H_gb}H_n(H_a,"laya.d3.utils.RaycastHit"),H_a.prototype.cloneTo=function(H_a){H_a.distance=this.distance,this.trianglePositions[0].cloneTo(H_a.trianglePositions[0]),this.trianglePositions[1].cloneTo(H_a.trianglePositions[1]),this.trianglePositions[2].cloneTo(H_a.trianglePositions[2]),this.triangleNormals[0].cloneTo(H_a.triangleNormals[0]),this.triangleNormals[1].cloneTo(H_a.triangleNormals[1]),this.triangleNormals[2].cloneTo(H_a.triangleNormals[2]),this.position.cloneTo(H_a.position),H_a.sprite3D=this.sprite3D}}(),function(){function H_a(H_a,H_b){this._width=0,this._height=0,this._width=H_a,this._height=H_b}H_n(H_a,"laya.d3.utils.Size");var H_b=H_a.prototype;return H_q(0,H_b,"width",function(){return-1===this._width?H_Y.clientWidth:this._width}),H_q(0,H_b,"height",function(){return-1===this._height?H_Y.clientHeight:this._height}),H_q(1,H_a,"fullScreen",function(){return new H_a(-1,-1)}),H_a}()),H_sb=function(){function H_I(){}return H_n(H_I,"laya.d3.utils.Utils3D"),H_I._rotationTransformScaleSkinAnimation=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l){var H_m,H_n,H_q,H_r,H_s,H_t=H_I._tempArray16_0,H_u=H_I._tempArray16_1,H_v=H_I._tempArray16_2,H_w=H_d+H_d,H_x=H_e+H_e,H_y=H_f+H_f,H_z=H_d*H_w,H_A=H_e*H_w,H_B=H_e*H_x,H_C=H_f*H_w,H_D=H_f*H_x,H_E=H_f*H_y,H_F=H_g*H_w,H_G=H_g*H_x,H_H=H_g*H_y;for(H_t[15]=1,H_t[0]=1-H_B-H_E,H_t[1]=H_A+H_H,H_t[2]=H_C-H_G,H_t[4]=H_A-H_H,H_t[5]=1-H_z-H_E,H_t[6]=H_D+H_F,H_t[8]=H_C+H_G,H_t[9]=H_D-H_F,H_t[10]=1-H_z-H_B,H_u[15]=1,H_u[0]=H_h,H_u[5]=H_i,H_u[10]=H_j,H_m=0;H_m<4;H_m++)H_n=H_t[H_m],H_q=H_t[H_m+4],H_r=H_t[H_m+8],H_s=H_t[H_m+12],H_v[H_m]=H_n,H_v[H_m+4]=H_q,H_v[H_m+8]=H_r,H_v[H_m+12]=H_n*H_a+H_q*H_b+H_r*H_c+H_s;for(H_m=0;H_m<4;H_m++)H_n=H_v[H_m],H_q=H_v[H_m+4],H_r=H_v[H_m+8],H_s=H_v[H_m+12],H_k[H_m+H_l]=H_n*H_u[0]+H_q*H_u[1]+H_r*H_u[2]+H_s*H_u[3],H_k[H_m+H_l+4]=H_n*H_u[4]+H_q*H_u[5]+H_r*H_u[6]+H_s*H_u[7],H_k[H_m+H_l+8]=H_n*H_u[8]+H_q*H_u[9]+H_r*H_u[10]+H_s*H_u[11],H_k[H_m+H_l+12]=H_n*H_u[12]+H_q*H_u[13]+H_r*H_u[14]+H_s*H_u[15]},H_I._createNodeByJson=function(H_a,H_b,H_c,H_d){if(!H_c)switch(H_b.type){case"Sprite3D":H_c=new H_Kb;break;case"MeshSprite3D":H_c=new H_Xb;break;case"SkinnedMeshSprite3D":H_c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":H_c=new ShuriKenParticle3D;break;case"TrailSprite3D":H_c=new TrailSprite3D;break;case"Terrain":H_c=new Terrain;break;case"Camera":H_c=new H_Wb;break;case"DirectionLight":H_c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var H_e=H_b.props;if(H_e)for(var H_f in H_e)H_c[H_f]=H_e[H_f];var H_g=H_b.customProps;H_g&&(H_c instanceof laya.d3.core.Sprite3D?(H_c._parseBaseCustomProps(H_g),H_c._parseCustomProps(H_a,H_d,H_g,H_b),H_c._parseCustomComponent(H_a,H_d,H_b.components)):H_c._parseCustomProps(H_a,H_d,H_g,H_b));var H_h=H_b.child;if(H_h)for(var H_i=0,H_j=H_h.length;H_i<H_j;H_i++){var H_k=H_I._createNodeByJson(H_a,H_h[H_i],null,H_d);H_c.addChild(H_k)}return H_c},H_I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h,H_i=0,H_j=0,H_k=H_a.length;for(H_g=0;H_g<H_k;H_i+=H_a[H_g].keyframeWidth,H_j+=16,H_g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H_b[H_i+0],H_b[H_i+1],H_b[H_i+2],H_b[H_i+3],H_b[H_i+4],H_b[H_i+5],H_b[H_i+6],H_b[H_i+7],H_b[H_i+8],H_b[H_i+9],H_d,H_j),0!=H_g&&(H_h=16*H_a[H_g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H_d,H_h,H_d,H_j,H_d,H_j));var H_l=H_c.length;for(H_g=0;H_g<H_l;H_g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H_d,16*H_f[H_g],H_c[H_g],H_e,16*H_g)},H_I._computeAnimationDatasByArrayAndMatrixFast=function(H_a,H_b,H_c,H_d){for(var H_e=0,H_f=H_a.length;H_e<H_f;H_e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H_b,16*H_d[H_e],H_a[H_e],H_c,16*H_e)},H_I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g,H_h=0,H_i=0,H_j=H_a.length;for(H_f=0;H_f<H_j;H_h+=H_a[H_f].keyframeWidth,H_i+=16,H_f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H_b[H_h+7],H_b[H_h+8],H_b[H_h+9],H_b[H_h+3],H_b[H_h+4],H_b[H_h+5],H_b[H_h+6],H_b[H_h+0],H_b[H_h+1],H_b[H_h+2],H_d,H_i),0!=H_f&&(H_g=16*H_a[H_f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H_d,H_g,H_d,H_i,H_d,H_i));var H_k=H_c.length;for(H_f=0;H_f<H_k;H_f++){var H_l=16*H_f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H_d,H_l,H_c[H_f],H_e,H_l)}},H_I._computeAnimationDatasByArrayAndMatrixFastOld=function(H_a,H_b,H_c){for(var H_d=H_a.length,H_e=0;H_e<H_d;H_e++){var H_f=16*H_e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H_b,H_f,H_a[H_e],H_c,H_f)}},H_I._computeRootAnimationData=function(H_a,H_b,H_c){for(var H_d=0,H_e=0,H_f=0,H_g=H_a.length;H_d<H_g;H_e+=H_a[H_d].keyframeWidth,H_f+=16,H_d++)laya.d3.utils.Utils3D.createAffineTransformationArray(H_b[H_e+0],H_b[H_e+1],H_b[H_e+2],H_b[H_e+3],H_b[H_e+4],H_b[H_e+5],H_b[H_e+6],H_b[H_e+7],H_b[H_e+8],H_b[H_e+9],H_c,H_f)},H_I.transformVector3ArrayByQuat=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_c.elements,H_g=H_a[H_b],H_h=H_a[H_b+1],H_i=H_a[H_b+2],H_j=H_f[0],H_k=H_f[1],H_l=H_f[2],H_m=H_f[3],H_n=H_m*H_g+H_k*H_i-H_l*H_h,H_q=H_m*H_h+H_l*H_g-H_j*H_i,H_r=H_m*H_i+H_j*H_h-H_k*H_g,H_s=-H_j*H_g-H_k*H_h-H_l*H_i;H_d[H_e]=H_n*H_m+H_s*-H_j+H_q*-H_l-H_r*-H_k,H_d[H_e+1]=H_q*H_m+H_s*-H_k+H_r*-H_j-H_n*-H_l,H_d[H_e+2]=H_r*H_m+H_s*-H_l+H_n*-H_k-H_q*-H_j},H_I.mulMatrixByArray=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h,H_i,H_j,H_k;if(H_e===H_c){for(H_c=H_I._tempArray16_3,H_g=0;H_g<16;++H_g)H_c[H_g]=H_e[H_f+H_g];H_d=0}for(H_g=0;H_g<4;H_g++)H_h=H_a[H_b+H_g],H_i=H_a[H_b+H_g+4],H_j=H_a[H_b+H_g+8],H_k=H_a[H_b+H_g+12],H_e[H_f+H_g]=H_h*H_c[H_d+0]+H_i*H_c[H_d+1]+H_j*H_c[H_d+2]+H_k*H_c[H_d+3],H_e[H_f+H_g+4]=H_h*H_c[H_d+4]+H_i*H_c[H_d+5]+H_j*H_c[H_d+6]+H_k*H_c[H_d+7],H_e[H_f+H_g+8]=H_h*H_c[H_d+8]+H_i*H_c[H_d+9]+H_j*H_c[H_d+10]+H_k*H_c[H_d+11],H_e[H_f+H_g+12]=H_h*H_c[H_d+12]+H_i*H_c[H_d+13]+H_j*H_c[H_d+14]+H_k*H_c[H_d+15]},H_I.mulMatrixByArrayFast=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h,H_i,H_j,H_k;for(H_g=0;H_g<4;H_g++)H_h=H_a[H_b+H_g],H_i=H_a[H_b+H_g+4],H_j=H_a[H_b+H_g+8],H_k=H_a[H_b+H_g+12],H_e[H_f+H_g]=H_h*H_c[H_d+0]+H_i*H_c[H_d+1]+H_j*H_c[H_d+2]+H_k*H_c[H_d+3],H_e[H_f+H_g+4]=H_h*H_c[H_d+4]+H_i*H_c[H_d+5]+H_j*H_c[H_d+6]+H_k*H_c[H_d+7],H_e[H_f+H_g+8]=H_h*H_c[H_d+8]+H_i*H_c[H_d+9]+H_j*H_c[H_d+10]+H_k*H_c[H_d+11],H_e[H_f+H_g+12]=H_h*H_c[H_d+12]+H_i*H_c[H_d+13]+H_j*H_c[H_d+14]+H_k*H_c[H_d+15]},H_I.mulMatrixByArrayAndMatrixFast=function(H_a,H_b,H_c,H_d,H_e){var H_f,H_g,H_h,H_i,H_j,H_k=H_c.elements,H_l=H_k[0],H_m=H_k[1],H_n=H_k[2],H_q=H_k[3],H_r=H_k[4],H_s=H_k[5],H_t=H_k[6],H_u=H_k[7],H_v=H_k[8],H_w=H_k[9],H_x=H_k[10],H_y=H_k[11],H_z=H_k[12],H_A=H_k[13],H_B=H_k[14],H_C=H_k[15],H_D=H_b,H_E=H_b+4,H_F=H_b+8,H_G=H_b+12,H_H=H_e,H_I=H_e+4,H_J=H_e+8,H_K=H_e+12;for(H_f=0;H_f<4;H_f++)H_g=H_a[H_D+H_f],H_h=H_a[H_E+H_f],H_i=H_a[H_F+H_f],H_j=H_a[H_G+H_f],H_d[H_H+H_f]=H_g*H_l+H_h*H_m+H_i*H_n+H_j*H_q,H_d[H_I+H_f]=H_g*H_r+H_h*H_s+H_i*H_t+H_j*H_u,H_d[H_J+H_f]=H_g*H_v+H_h*H_w+H_i*H_x+H_j*H_y,H_d[H_K+H_f]=H_g*H_z+H_h*H_A+H_i*H_B+H_j*H_C},H_I.createAffineTransformationArray=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l){var H_m=H_d+H_d,H_n=H_e+H_e,H_q=H_f+H_f,H_r=H_d*H_m,H_s=H_d*H_n,H_t=H_d*H_q,H_u=H_e*H_n,H_v=H_e*H_q,H_w=H_f*H_q,H_x=H_g*H_m,H_y=H_g*H_n,H_z=H_g*H_q;H_k[H_l+0]=(1-(H_u+H_w))*H_h,H_k[H_l+1]=(H_s+H_z)*H_h,H_k[H_l+2]=(H_t-H_y)*H_h,H_k[H_l+3]=0,H_k[H_l+4]=(H_s-H_z)*H_i,H_k[H_l+5]=(1-(H_r+H_w))*H_i,H_k[H_l+6]=(H_v+H_x)*H_i,H_k[H_l+7]=0,H_k[H_l+8]=(H_t+H_y)*H_j,H_k[H_l+9]=(H_v-H_x)*H_j,H_k[H_l+10]=(1-(H_r+H_u))*H_j,H_k[H_l+11]=0,H_k[H_l+12]=H_a,H_k[H_l+13]=H_b,H_k[H_l+14]=H_c,H_k[H_l+15]=1},H_I.transformVector3ArrayToVector3ArrayCoordinate=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_I._tempArray4_0,H_g=H_a[H_b+0],H_h=H_a[H_b+1],H_i=H_a[H_b+2],H_j=H_c.elements;H_f[0]=H_g*H_j[0]+H_h*H_j[4]+H_i*H_j[8]+H_j[12],H_f[1]=H_g*H_j[1]+H_h*H_j[5]+H_i*H_j[9]+H_j[13],H_f[2]=H_g*H_j[2]+H_h*H_j[6]+H_i*H_j[10]+H_j[14],H_f[3]=1/(H_g*H_j[3]+H_h*H_j[7]+H_i*H_j[11]+H_j[15]),H_d[H_e+0]=H_f[0]*H_f[3],H_d[H_e+1]=H_f[1]*H_f[3],H_d[H_e+2]=H_f[2]*H_f[3]},H_I.transformLightingMapTexcoordByUV0Array=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_c.elements;H_d[H_e+0]=H_a[H_b+0]*H_f[0]+H_f[2],H_d[H_e+1]=(H_a[H_b+1]-1)*H_f[1]+H_f[3]},H_I.transformLightingMapTexcoordByUV1Array=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_c.elements;H_d[H_e+0]=H_a[H_b+0]*H_f[0]+H_f[2],H_d[H_e+1]=1+H_a[H_b+1]*H_f[1]+H_f[3]},H_I.getURLVerion=function(H_a){var H_b=H_a.indexOf("?");return 0<=H_b?H_a.substr(H_b):null},H_I._quaternionCreateFromYawPitchRollArray=function(H_a,H_b,H_c,H_d){var H_e=.5*H_c,H_f=.5*H_b,H_g=.5*H_a,H_h=Math.sin(H_e),H_i=Math.cos(H_e),H_j=Math.sin(H_f),H_k=Math.cos(H_f),H_l=Math.sin(H_g),H_m=Math.cos(H_g);H_d[0]=H_m*H_j*H_i+H_l*H_k*H_h,H_d[1]=H_l*H_k*H_i-H_m*H_j*H_h,H_d[2]=H_m*H_k*H_h-H_l*H_j*H_i,H_d[3]=H_m*H_k*H_i+H_l*H_j*H_h},H_I._createAffineTransformationArray=function(H_a,H_b,H_c,H_d){var H_e=H_b[0],H_f=H_b[1],H_g=H_b[2],H_h=H_b[3],H_i=H_e+H_e,H_j=H_f+H_f,H_k=H_g+H_g,H_l=H_e*H_i,H_m=H_e*H_j,H_n=H_e*H_k,H_q=H_f*H_j,H_r=H_f*H_k,H_s=H_g*H_k,H_t=H_h*H_i,H_u=H_h*H_j,H_v=H_h*H_k,H_w=H_c[0],H_x=H_c[1],H_y=H_c[2];H_d[0]=(1-(H_q+H_s))*H_w,H_d[1]=(H_m+H_v)*H_w,H_d[2]=(H_n-H_u)*H_w,H_d[3]=0,H_d[4]=(H_m-H_v)*H_x,H_d[5]=(1-(H_l+H_s))*H_x,H_d[6]=(H_r+H_t)*H_x,H_d[7]=0,H_d[8]=(H_n+H_u)*H_y,H_d[9]=(H_r-H_t)*H_y,H_d[10]=(1-(H_l+H_q))*H_y,H_d[11]=0,H_d[12]=H_a[0],H_d[13]=H_a[1],H_d[14]=H_a[2],H_d[15]=1},H_I._mulMatrixArray=function(H_a,H_b,H_c,H_d){var H_e,H_f,H_g,H_h,H_i,H_j=H_b.elements,H_k=H_j[0],H_l=H_j[1],H_m=H_j[2],H_n=H_j[3],H_q=H_j[4],H_r=H_j[5],H_s=H_j[6],H_t=H_j[7],H_u=H_j[8],H_v=H_j[9],H_w=H_j[10],H_x=H_j[11],H_y=H_j[12],H_z=H_j[13],H_A=H_j[14],H_B=H_j[15],H_C=H_d,H_D=H_d+4,H_E=H_d+8,H_F=H_d+12;for(H_e=0;H_e<4;H_e++)H_f=H_a[H_e],H_g=H_a[H_e+4],H_h=H_a[H_e+8],H_i=H_a[H_e+12],H_c[H_C+H_e]=H_f*H_k+H_g*H_l+H_h*H_m+H_i*H_n,H_c[H_D+H_e]=H_f*H_q+H_g*H_r+H_h*H_s+H_i*H_t,H_c[H_E+H_e]=H_f*H_u+H_g*H_v+H_h*H_w+H_i*H_x,H_c[H_F+H_e]=H_f*H_y+H_g*H_z+H_h*H_A+H_i*H_B},H_I.getYawPitchRoll=function(H_a,H_b){H_I.transformQuat(H_gb.ForwardRH,H_a,H_cb.TEMPVector31),H_I.transformQuat(H_gb.Up,H_a,H_cb.TEMPVector32);var H_c=H_cb.TEMPVector32.elements;H_I.angleTo(H_gb.ZERO,H_cb.TEMPVector31,H_cb.TEMPVector33);var H_d=H_cb.TEMPVector33.elements;H_d[0]==Math.PI/2?(H_d[1]=H_I.arcTanAngle(H_c[2],H_c[0]),H_d[2]=0):H_d[0]==-Math.PI/2?(H_d[1]=H_I.arcTanAngle(-H_c[2],-H_c[0]),H_d[2]=0):(H_ab.createRotationY(-H_d[1],H_cb.TEMPMatrix0),H_ab.createRotationX(-H_d[0],H_cb.TEMPMatrix1),H_gb.transformCoordinate(H_cb.TEMPVector32,H_cb.TEMPMatrix0,H_cb.TEMPVector32),H_gb.transformCoordinate(H_cb.TEMPVector32,H_cb.TEMPMatrix1,H_cb.TEMPVector32),H_d[2]=H_I.arcTanAngle(H_c[1],-H_c[0])),H_d[1]<=-Math.PI&&(H_d[1]=Math.PI),H_d[2]<=-Math.PI&&(H_d[2]=Math.PI),H_d[1]>=Math.PI&&H_d[2]>=Math.PI&&(H_d[1]=0,H_d[2]=0,H_d[0]=Math.PI-H_d[0]),H_b[0]=H_d[1],H_b[1]=H_d[0],H_b[2]=H_d[2]},H_I.arcTanAngle=function(H_a,H_b){return 0==H_a?1==H_b?Math.PI/2:-Math.PI/2:0<H_a?Math.atan(H_b/H_a):H_a<0?0<H_b?Math.atan(H_b/H_a)+Math.PI:Math.atan(H_b/H_a)-Math.PI:0},H_I.angleTo=function(H_a,H_b,H_c){H_gb.subtract(H_b,H_a,H_cb.TEMPVector30),H_gb.normalize(H_cb.TEMPVector30,H_cb.TEMPVector30),H_c.elements[0]=Math.asin(H_cb.TEMPVector30.y),H_c.elements[1]=H_I.arcTanAngle(-H_cb.TEMPVector30.z,-H_cb.TEMPVector30.x)},H_I.transformQuat=function(H_a,H_b,H_c){var H_d=H_c.elements,H_e=H_a.elements,H_f=H_b,H_g=H_e[0],H_h=H_e[1],H_i=H_e[2],H_j=H_f[0],H_k=H_f[1],H_l=H_f[2],H_m=H_f[3],H_n=H_m*H_g+H_k*H_i-H_l*H_h,H_q=H_m*H_h+H_l*H_g-H_j*H_i,H_r=H_m*H_i+H_j*H_h-H_k*H_g,H_s=-H_j*H_g-H_k*H_h-H_l*H_i;H_d[0]=H_n*H_m+H_s*-H_j+H_q*-H_l-H_r*-H_k,H_d[1]=H_q*H_m+H_s*-H_k+H_r*-H_j-H_n*-H_l,H_d[2]=H_r*H_m+H_s*-H_l+H_n*-H_k-H_q*-H_j},H_I.quaterionNormalize=function(H_a,H_b){var H_c=H_a[0],H_d=H_a[1],H_e=H_a[2],H_f=H_a[3],H_g=H_c*H_c+H_d*H_d+H_e*H_e+H_f*H_f;0<H_g&&(H_g=1/Math.sqrt(H_g),H_b[0]=H_c*H_g,H_b[1]=H_d*H_g,H_b[2]=H_e*H_g,H_b[3]=H_f*H_g)},H_I.matrix4x4MultiplyFFF=function(H_a,H_b,H_c){var H_d,H_e,H_f,H_g,H_h;if(H_c===H_b)for(H_b=new Float32Array(16),H_d=0;H_d<16;++H_d)H_b[H_d]=H_c[H_d];for(H_d=0;H_d<4;H_d++)H_e=H_a[H_d],H_f=H_a[H_d+4],H_g=H_a[H_d+8],H_h=H_a[H_d+12],H_c[H_d]=H_e*H_b[0]+H_f*H_b[1]+H_g*H_b[2]+H_h*H_b[3],H_c[H_d+4]=H_e*H_b[4]+H_f*H_b[5]+H_g*H_b[6]+H_h*H_b[7],H_c[H_d+8]=H_e*H_b[8]+H_f*H_b[9]+H_g*H_b[10]+H_h*H_b[11],H_c[H_d+12]=H_e*H_b[12]+H_f*H_b[13]+H_g*H_b[14]+H_h*H_b[15]},H_I.matrix4x4MultiplyMFM=function(H_a,H_b,H_c){H_I.matrix4x4MultiplyFFF(H_a.elements,H_b,H_c.elements)},H_l(H_I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new H_gb},"_tempVector3_1",function(){return this._tempVector3_1=new H_gb},"_tempVector3_2",function(){return this._tempVector3_2=new H_gb},"_tempVector3_3",function(){return this._tempVector3_3=new H_gb},"_tempVector3_4",function(){return this._tempVector3_4=new H_gb},"_tempVector3_5",function(){return this._tempVector3_5=new H_gb},"_tempVector3_6",function(){return this._tempVector3_6=new H_gb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),H_I}(),H_tb=function(){function H_G(){}return H_n(H_G,"Laya3D"),H_G._cancelLoadByUrl=function(H_a){H_x.loader.cancelLoadByUrl(H_a),H_G._innerFirstLevelLoaderManager.cancelLoadByUrl(H_a),H_G._innerSecondLevelLoaderManager.cancelLoadByUrl(H_a),H_G._innerThirdLevelLoaderManager.cancelLoadByUrl(H_a),H_G._innerFourthLevelLoaderManager.cancelLoadByUrl(H_a)},H_G._changeWebGLSize=function(H_a,H_b){H_F.onStageResize(H_a,H_b),H_Y.clientWidth=H_a,H_Y.clientHeight=H_b},H_G.__init__=function(){var H_a=H_b.createMap;H_a.lh=[H_Kb,"SPRITE3DHIERARCHY"],H_a.ls=[H_Jb,"SPRITE3DHIERARCHY"],H_a.lm=[H_Rb,"MESH"],H_a.lmat=[H_Mb,"MATERIAL"],H_a.jpg=[H_Tb,"nativeimage"],H_a.jpeg=[H_Tb,"nativeimage"],H_a.png=[H_Tb,"nativeimage"],H_a.pkm=[H_Tb,"arraybuffer"],H_a.raw=[H_Pb,"arraybuffer"],H_a.mipmaps=[H_Pb,"arraybuffer"],H_t.parserMap.SPRITE3DHIERARCHY=H_G._loadHierarchy,H_t.parserMap.MESH=H_G._loadMesh,H_t.parserMap.MATERIAL=H_G._loadMaterial,H_t.parserMap.TEXTURECUBE=H_G._loadTextureCube,H_t.parserMap.TERRAIN=H_G._loadTerrain,H_G._innerFirstLevelLoaderManager.on("error",null,H_G._eventLoadManagerError),H_G._innerSecondLevelLoaderManager.on("error",null,H_G._eventLoadManagerError),H_G._innerThirdLevelLoaderManager.on("error",null,H_G._eventLoadManagerError),H_G._innerFourthLevelLoaderManager.on("error",null,H_G._eventLoadManagerError)},H_G.READ_BLOCK=function(){return H_G._readData.pos+=4,!0},H_G.READ_DATA=function(){return H_G._DATA.offset=H_G._readData.getUint32(),H_G._DATA.size=H_G._readData.getUint32(),!0},H_G.READ_STRINGS=function(){var H_a=[],H_b={offset:0,size:0};H_b.offset=H_G._readData.getUint16(),H_b.size=H_G._readData.getUint16();H_G._readData.pos;H_G._readData.pos=H_b.offset+H_G._DATA.offset;for(var H_c=0;H_c<H_b.size;H_c++){var H_d=H_G._readData.readUTFString();-1===H_d.lastIndexOf(".lmat")&&-1===H_d.lastIndexOf(".lpbr")||H_a.push(H_d)}return H_a},H_G.formatRelativePath=function(H_a,H_b){var H_c;if("."===H_b.charAt(0)){for(var H_d=(H_a+H_b).split("/"),H_e=0,H_f=H_d.length;H_e<H_f;H_e++)if(".."==H_d[H_e]){var H_g=H_e-1;0<H_g&&".."!==H_d[H_g]&&(H_d.splice(H_g,2),H_e-=2)}H_c=H_d.join("/")}else H_c=H_a+H_b;return null!=H_E.customFormat&&(H_c=H_E.customFormat(H_c,null)),H_c},H_G._eventLoadManagerError=function(H_a){H_x.loader.event("error",H_a)},H_G._addHierarchyInnerUrls=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g=H_G.formatRelativePath(H_d,H_e);H_c&&(H_g+=H_c),H_a.push({url:H_g,clas:H_f}),H_b[H_e]=H_g},H_G._getSprite3DHierarchyInnerUrls=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){var H_h,H_i=0,H_j=0;switch(H_a.type){case"Scene":var H_k=H_a.customProps.lightmaps;for(H_i=0,H_j=H_k.length;H_i<H_j;H_i++){var H_l=H_k[H_i].replace(".exr",".png");H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_l,H_Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var H_m;if(H_a.instanceParams)(H_m=H_a.instanceParams.loadPath)&&H_G._addHierarchyInnerUrls(H_b,H_e,H_f,H_g,H_m,H_Rb);else{(H_m=(H_h=H_a.customProps).meshPath)&&H_G._addHierarchyInnerUrls(H_b,H_e,H_f,H_g,H_m,H_Rb);var H_n=H_h.materials;if(H_n)for(H_i=0,H_j=H_n.length;H_i<H_j;H_i++){for(var H_q=H_n[H_i],H_r=H_q.type.split("."),H_s=H_H.window,H_t=0,H_u=H_r.length;H_t<H_u;++H_t){H_s=H_s[this.clasPaths[H_t]]}if("function"!=typeof H_s)throw"_getSprite3DHierarchyInnerUrls 错误: "+H_q.type+" 不是类";H_G._addHierarchyInnerUrls(H_c,H_e,H_f,H_g,H_q.path,H_s)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var H_v=(H_h=H_a.customProps).meshPath;H_v&&H_G._addHierarchyInnerUrls(H_b,H_e,H_f,H_g,H_v,H_Rb);var H_w=H_h.material;if(H_w){H_r=H_w.type.split("."),H_s=H_H.window;for(H_t=0,H_u=H_r.length;H_t<H_u;++H_t){H_s=H_s[this.clasPaths[H_t]]}H_G._addHierarchyInnerUrls(H_c,H_e,H_f,H_g,H_w.path,H_s)}else{var H_x=H_h.materialPath;if(H_x)H_G._addHierarchyInnerUrls(H_c,H_e,H_f,H_g,H_x,ShurikenParticleMaterial);else{var H_y=H_h.texturePath;H_y&&H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_y,H_Tb)}}break;case"Terrain":H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_a.customProps.dataPath,TerrainRes)}var H_z=H_a.components;for(var H_A in H_z){var H_B=H_z[H_A];switch(H_A){case"Animator":var H_C=H_B.avatarPath;if(H_C)H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_C,Avatar);else{var H_D=H_B.avatar;H_D&&H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_D.path,Avatar)}var H_E=H_B.clipPaths;for(H_i=0,H_j=H_E.length;H_i<H_j;H_i++)H_G._addHierarchyInnerUrls(H_d,H_e,H_f,H_g,H_E[H_i],AnimationClip)}}var H_F=H_a.child;for(H_i=0,H_j=H_F.length;H_i<H_j;H_i++)H_G._getSprite3DHierarchyInnerUrls(H_F[H_i],H_b,H_c,H_d,H_e,H_f,H_g)},H_G._loadHierarchy=function(H_a){H_a.on("loaded",null,H_G._onHierarchylhLoaded,[H_a,H_a._class._getGroup()]),H_a.load(H_a.url,"json",!1,null,!0)},H_G._onHierarchylhLoaded=function(H_a,H_b,H_c){if(H_a._class.destroyed)H_a.endLoad();else{var H_d=H_a.url,H_e=H_sb.getURLVerion(H_d),H_f=H_E.getPath(H_d),H_g=[],H_h=[],H_i=[],H_j={};H_G._getSprite3DHierarchyInnerUrls(H_c,H_g,H_h,H_i,H_j,H_e,H_f);var H_k=H_g.length+H_h.length+H_i.length,H_l=H_k+1,H_m=1/H_l;if(H_G._onProcessChange(H_a,0,H_m,1),0<H_i.length){var H_n=H_k/H_l,H_q=H_D.create(null,H_G._onProcessChange,[H_a,H_m,H_n],!1);H_G._innerFourthLevelLoaderManager.create(H_i,H_D.create(null,H_G._onHierarchyInnerForthLevResouLoaded,[H_a,H_b,H_q,H_c,H_j,H_g,H_h,H_m+H_n*H_i.length,H_n]),H_q,null,null,1,!0,H_b)}else H_G._onHierarchyInnerForthLevResouLoaded(H_a,H_b,null,H_c,H_j,H_g,H_h,H_m,H_n)}},H_G._onHierarchyInnerForthLevResouLoaded=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){if(H_a._class.destroyed)H_a.endLoad();else if(H_c&&H_c.recover(),0<H_g.length){var H_j=H_D.create(null,H_G._onProcessChange,[H_a,H_h,H_i],!1);H_G._innerSecondLevelLoaderManager.create(H_g,H_D.create(null,H_G._onHierarchyInnerSecondLevResouLoaded,[H_a,H_b,H_j,H_d,H_e,H_f,H_h+H_i*H_g.length,H_i]),H_c,null,null,1,!0,H_b)}else H_G._onHierarchyInnerSecondLevResouLoaded(H_a,H_b,null,H_d,H_e,H_f,H_h,H_i)},H_G._onHierarchyInnerSecondLevResouLoaded=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h){if(H_a._class.destroyed)H_a.endLoad();else if(H_c&&H_c.recover(),0<H_f.length){var H_i=H_D.create(null,H_G._onProcessChange,[H_a,H_g,H_h],!1);H_G._innerFirstLevelLoaderManager.create(H_f,H_D.create(null,H_G._onHierarchyInnerFirstLevResouLoaded,[H_a,H_i,H_d,H_e]),H_c,null,null,1,!0,H_b)}else H_G._onHierarchyInnerFirstLevResouLoaded(H_a,null,H_d,H_e)},H_G._onHierarchyInnerFirstLevResouLoaded=function(H_a,H_b,H_c,H_d){H_b&&H_b.recover(),H_a.endLoad([H_c,H_d])},H_G._loadTerrain=function(H_a){H_a.on("loaded",null,H_G._onTerrainLtLoaded,[H_a,H_a._class._getGroup()]),H_a.load(H_a.url,"json",!1,null,!0)},H_G._onTerrainLtLoaded=function(H_a,H_b,H_c){if(H_a._class.destroyed)H_a.endLoad();else{var H_d,H_e,H_f=H_a.url,H_g=H_sb.getURLVerion(H_f),H_h=H_E.getPath(H_f),H_i=[],H_j={},H_k=0,H_l=0,H_m=H_c.heightData;H_d=H_m.url,H_e=H_G.formatRelativePath(H_h,H_d),H_g&&(H_e+=H_g),H_d=H_j[H_d]=H_e;var H_n=H_c.detailTexture;for(H_k=0,H_l=H_n.length;H_k<H_l;H_k++)H_i.push({url:H_n[H_k].diffuse});var H_q=H_c.normalMap;for(H_k=0,H_l=H_q.length;H_k<H_l;H_k++)H_i.push({url:H_q[H_k]});var H_r=H_c.alphaMap;for(H_k=0,H_l=H_r.length;H_k<H_l;H_k++)H_i.push({url:H_r[H_k],params:[!1,!1,6408,!0]});for(H_k=0,H_l=H_i.length;H_k<H_l;H_k++){var H_s=H_i[H_k].url;H_e=H_G.formatRelativePath(H_h,H_s),H_g&&(H_e+=H_g),H_i[H_k].url=H_e,H_j[H_s]=H_e}var H_t=H_i.length,H_u=H_t+2,H_v=1/H_u;H_G._onProcessChange(H_a,0,H_v,1);var H_w={heightMapLoaded:!1,texturesLoaded:!1},H_x=H_D.create(null,H_G._onProcessChange,[H_a,H_v,H_v],!1);H_G._innerFourthLevelLoaderManager.create(H_d,H_D.create(null,H_G._onTerrainHeightMapLoaded,[H_a,H_x,H_c,H_j,H_w]),H_x,null,[H_m.numX,H_m.numZ,H_m.bitType,H_m.value],1,!0,H_b);var H_y=H_D.create(null,H_G._onProcessChange,[H_a,2*H_v,H_t/H_u],!1);H_G._innerFourthLevelLoaderManager.create(H_i,H_D.create(null,H_G._onTerrainTexturesLoaded,[H_a,H_y,H_c,H_j,H_w]),H_y,null,null,1,!0,H_b)}},H_G._onTerrainHeightMapLoaded=function(H_a,H_b,H_c,H_d,H_e){H_e.heightMapLoaded=!0,H_e.texturesLoaded&&(H_a.endLoad([H_c,H_d]),H_b.recover())},H_G._onTerrainTexturesLoaded=function(H_a,H_b,H_c,H_d,H_e){H_e.texturesLoaded=!0,H_e.heightMapLoaded&&(H_a.endLoad([H_c,H_d]),H_b.recover())},H_G._loadMesh=function(H_a){H_a.on("loaded",null,H_G._onMeshLmLoaded,[H_a,H_a._class._getGroup()]),H_a.load(H_a.url,"arraybuffer",!1,null,!0)},H_G._onMeshLmLoaded=function(H_a,H_b,H_c){if(H_a._class.destroyed)H_a.endLoad();else{var H_d,H_e,H_f,H_g=H_a.url,H_h=H_sb.getURLVerion(H_g),H_i=H_E.getPath(H_g),H_j={},H_k=0,H_l=0;switch((H_G._readData=new H_y(H_c)).pos=0,H_G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var H_m=H_G._readData.getUint32();H_G._readData.pos=H_G._readData.pos+4,H_l=H_G._readData.getUint16(),H_G._readData.pos=H_G._readData.pos+8*H_l;var H_n=H_G._readData.getUint32();for(H_l=H_G._readData.getUint16(),H_G._readData.pos=H_m+H_n,H_d=[],H_k=0;H_k<H_l;H_k++){var H_q=H_G._readData.readUTFString();-1!==H_q.lastIndexOf(".lmat")&&H_d.push(H_q)}break;default:for(H_G.READ_BLOCK(),H_k=0;H_k<2;H_k++){var H_r=H_G._readData.getUint16(),H_s=H_G._strings[H_r],H_t=H_G["READ_"+H_s];if(null==H_t)throw new Error("model file err,no this function:"+H_r+" "+H_s);1===H_k?H_d=H_t.call():H_t.call()}}for(H_k=0,H_f=H_d.length;H_k<H_f;H_k++){var H_u=H_d[H_k];H_e=H_G.formatRelativePath(H_i,H_u),H_h&&(H_e+=H_h),H_d[H_k]=H_e,H_j[H_u]=H_e}if(0<H_d.length){H_G._onProcessChange(H_a,0,.5,1);var H_v=H_D.create(null,H_G._onProcessChange,[H_a,.5,.5],!1);H_G._innerSecondLevelLoaderManager.create(H_d,H_D.create(null,H_G._onMeshMateialLoaded,[H_a,H_v,H_c,H_j]),H_v,null,null,1,!0,H_b)}else H_a.endLoad([H_c,H_j])}},H_G._onMeshMateialLoaded=function(H_a,H_b,H_c,H_d){H_a.endLoad([H_c,H_d]),H_b.recover()},H_G._getMaterialTexturePath=function(H_a,H_b,H_c){var H_d=H_a.length-4;return H_a.indexOf(".dds")!=H_d&&H_a.indexOf(".tga")!=H_d&&H_a.indexOf(".exr")!=H_d&&H_a.indexOf(".DDS")!=H_d&&H_a.indexOf(".TGA")!=H_d&&H_a.indexOf(".EXR")!=H_d||(H_a=H_a.substr(0,H_d)+".png"),H_a=H_G.formatRelativePath(H_c,H_a),H_b&&(H_a+=H_b),H_a},H_G._loadMaterial=function(H_a){H_a.on("loaded",null,H_G._onMaterilLmatLoaded,[H_a,H_a._class._getGroup()]),H_a.load(H_a.url,"json",!1,null,!0)},H_G._onMaterilLmatLoaded=function(H_a,H_b,H_c){if(H_a._class.destroyed)H_a.endLoad();else{var H_d,H_e=H_a.url,H_f=H_sb.getURLVerion(H_e),H_g=H_E.getPath(H_e),H_h=[],H_i={},H_j=H_c.customProps,H_k=H_c.version;if(H_k)switch(H_k){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var H_l=H_c.props.textures,H_m=0,H_n=H_l.length;H_m<H_n;H_m++){var H_q=H_l[H_m],H_r=H_q.path;if(H_r){var H_s=H_r.length-4;H_r.indexOf(".exr")!=H_s&&H_r.indexOf(".EXR")!=H_s||(H_r=H_r.substr(0,H_s)+".png"),H_d=H_G.formatRelativePath(H_g,H_r),H_f&&(H_d+=H_f),H_h.push({url:H_d,params:H_q.params}),H_i[H_r]=H_d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var H_t=H_j.diffuseTexture.texture2D;if(H_t&&(H_d=H_G._getMaterialTexturePath(H_t,H_f,H_g),H_h.push(H_d),H_i[H_t]=H_d),H_j.normalTexture){var H_u=H_j.normalTexture.texture2D;H_u&&(H_d=H_G._getMaterialTexturePath(H_u,H_f,H_g),H_h.push(H_d),H_i[H_u]=H_d)}if(H_j.specularTexture){var H_v=H_j.specularTexture.texture2D;H_v&&(H_d=H_G._getMaterialTexturePath(H_v,H_f,H_g),H_h.push(H_d),H_i[H_v]=H_d)}if(H_j.emissiveTexture){var H_w=H_j.emissiveTexture.texture2D;H_w&&(H_d=H_G._getMaterialTexturePath(H_w,H_f,H_g),H_h.push(H_d),H_i[H_w]=H_d)}if(H_j.ambientTexture){var H_x=H_j.ambientTexture.texture2D;H_x&&(H_d=H_G._getMaterialTexturePath(H_x,H_f,H_g),H_h.push(H_d),H_i[H_x]=H_d)}if(H_j.reflectTexture){var H_y=H_j.reflectTexture.texture2D;H_y&&(H_d=H_G._getMaterialTexturePath(H_y,H_f,H_g),H_h.push(H_d),H_i[H_y]=H_d)}}var H_z=H_h.length,H_A=H_z+1,H_B=1/H_A;if(H_G._onProcessChange(H_a,0,H_B,1),0<H_z){var H_C=H_D.create(null,H_G._onProcessChange,[H_a,H_B,H_z/H_A],!1);H_G._innerFourthLevelLoaderManager.create(H_h,H_D.create(null,H_G._onMateialTexturesLoaded,[H_a,H_C,H_c,H_i]),H_C,H_Tb,null,1,!0,H_b)}else H_G._onMateialTexturesLoaded(H_a,null,H_c,null)}},H_G._onMateialTexturesLoaded=function(H_a,H_b,H_c,H_d){H_a.endLoad([H_c,H_d]),H_b&&H_b.recover()},H_G._loadTextureCube=function(H_a){H_a.on("loaded",null,H_G._onTextureCubeLtcLoaded,[H_a]),H_a.load(H_a.url,"json",!1,null,!0)},H_G._onTextureCubeLtcLoaded=function(H_a,H_b){if(H_a._class.destroyed)H_a.endLoad();else{var H_c=H_E.getPath(H_a.url),H_d=[H_G.formatRelativePath(H_c,H_b.px),H_G.formatRelativePath(H_c,H_b.nx),H_G.formatRelativePath(H_c,H_b.py),H_G.formatRelativePath(H_c,H_b.ny),H_G.formatRelativePath(H_c,H_b.pz),H_G.formatRelativePath(H_c,H_b.nz)];H_G._onProcessChange(H_a,0,1/7,1);var H_e=H_D.create(null,H_G._onProcessChange,[H_a,1/7,6/7],!1);H_G._innerFourthLevelLoaderManager.load(H_d,H_D.create(null,H_G._onTextureCubeImagesLoaded,[H_a,H_d,H_e]),H_e,"nativeimage")}},H_G._onTextureCubeImagesLoaded=function(H_a,H_b,H_c){var H_d=[];H_d.length=6;for(var H_e=0;H_e<6;H_e++){var H_f=H_b[H_e];H_d[H_e]=H_t.getRes(H_f),H_t.clearRes(H_f)}H_a.endLoad(H_d),H_c.recover()},H_G._onProcessChange=function(H_a,H_b,H_c,H_d){(H_d=H_b+H_d*H_c)<1&&H_a.event("progress",H_d)},H_G.init=function(H_a,H_b,H_c,H_d,H_e,H_f){if(void 0===H_c&&(H_c=!1),void 0===H_d&&(H_d=!1),void 0===H_e&&(H_e=!0),void 0===H_f&&(H_f=!0),H_u.update3DLoop=function(){},H_u.cancelLoadByUrl=function(H_a){H_G._cancelLoadByUrl(H_a)},H_i.isAntialias=H_c,H_i.isAlpha=H_d,H_i.premultipliedAlpha=H_e,H_i.isStencil=H_f,!H_F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");H_u.changeWebGLSize=H_G._changeWebGLSize,H_r.is3DMode=!0,H_x.init(H_a,H_b),H_I.__init__(),H_lb.__init__(),H_Xb.__init__(),H_Q.__init__(),H_G.__init__(),H_g.maxTextureCount=2,(H_G.debugMode||H_Z.debugMode)&&(H_G._debugPhasorSprite=new H_V)},H_G.HIERARCHY="SPRITE3DHIERARCHY",H_G.MESH="MESH",H_G.MATERIAL="MATERIAL",H_G.PBRMATERIAL="PBRMTL",H_G.TEXTURECUBE="TEXTURECUBE",H_G.TERRAIN="TERRAIN",H_G._readData=null,H_G._debugPhasorSprite=null,H_G.debugMode=!1,H_l(H_G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new H_b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new H_b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new H_b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new H_b}]),H_G}(),H_ub=function(H_a){function H_e(H_a){H_e.__super.call(this),this._owner=H_a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}H_n(H_e,"laya.d3.animation.AnimationTransform3D",H_f);var H_b=H_e.prototype;return H_b._getlocalMatrix=function(){return this._localUpdate&&(H_sb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},H_b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldTransform()}},H_b._setWorldMatrixAndUpdate=function(H_a){if(this._worldMatrix=H_a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var H_b=this._getlocalMatrix(),H_c=0;H_c<16;++H_c)this._worldMatrix[H_c]=H_b[H_c];else H_sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},H_b._setWorldMatrixNoUpdate=function(H_a){this._worldMatrix=H_a},H_b._setWorldMatrixIgnoreUpdate=function(H_a){this._worldMatrix=H_a,this._worldUpdate=!1},H_b.getLocalPosition=function(){return this._localPosition},H_b.setLocalPosition=function(H_a){if(this._parent)this._localPosition=H_a,this._localUpdate=!0,this._onWorldTransform();else{var H_b=this._entity.owner._transform,H_c=this._entity.localPosition,H_d=H_c.elements;H_d[0]=H_a[0],H_d[1]=H_a[1],H_d[2]=H_a[2],H_b.localPosition=H_c}},H_b.getLocalRotation=function(){if(this._localQuaternionUpdate){var H_a=this._localRotationEuler;H_sb._quaternionCreateFromYawPitchRollArray(H_a[1]/H_e._angleToRandin,H_a[0]/H_e._angleToRandin,H_a[2]/H_e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},H_b.setLocalRotation=function(H_a){if(this._parent)this._localRotation=H_a,H_sb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H_b=this._entity.owner._transform,H_c=this._entity.localRotation,H_d=H_c.elements;H_d[0]=H_a[0],H_d[1]=H_a[1],H_d[2]=H_a[2],H_d[3]=H_a[3],H_b.localRotation=H_c}},H_b.getLocalScale=function(){return this._localScale},H_b.setLocalScale=function(H_a){if(this._parent)this._localScale=H_a,this._localUpdate=!0,this._onWorldTransform();else{var H_b=this._entity.owner._transform,H_c=this._entity.localScale,H_d=H_c.elements;H_d[0]=H_a[0],H_d[1]=H_a[1],H_d[2]=H_a[2],H_b.localScale=H_c}},H_b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){H_sb.getYawPitchRoll(this._localRotation,H_e._tempVector3);var H_a=H_e._tempVector3,H_b=this._localRotationEuler;H_b[0]=H_a[1]*H_e._angleToRandin,H_b[1]=H_a[0]*H_e._angleToRandin,H_b[2]=H_a[2]*H_e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},H_b.setLocalRotationEuler=function(H_a){if(this._parent)H_sb._quaternionCreateFromYawPitchRollArray(H_a[1]/H_e._angleToRandin,H_a[0]/H_e._angleToRandin,H_a[2]/H_e._angleToRandin,this._localRotation),this._localRotationEuler=H_a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H_b=this._entity.owner._transform,H_c=this._entity.localRotationEuler,H_d=H_c.elements;H_d[0]=H_a[0],H_d[1]=H_a[1],H_d[2]=H_a[2],H_b.localRotationEuler=H_c}},H_b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)H_sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var H_a=this._getlocalMatrix(),H_b=0;H_b<16;++H_b)this._worldMatrix[H_b]=H_a[H_b];this._worldUpdate=!1}return this._worldMatrix},H_b.setParent=function(H_a){if(this._parent!==H_a){if(this._parent){var H_b=this._parent._childs,H_c=H_b.indexOf(this);H_b.splice(H_c,1)}H_a&&(H_a._childs.push(this),H_a&&this._onWorldTransform()),this._parent=H_a}},H_l(H_e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H_e}(),H_vb=function(H_a){function H_b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,H_b.__super.call(this),this._destroyed=!1,this._id=H_b._uniqueIDCounter,H_b._uniqueIDCounter++}H_n(H_b,"laya.d3.component.Component3D",H_f);var H_c=H_b.prototype;return H_x.imps(H_c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),H_c._initialize=function(H_a){this._owner=H_a,this._enable=!0,this.started=!1,this._load(H_a)},H_c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},H_c._load=function(H_a){},H_c._start=function(H_a){},H_c._update=function(H_a){},H_c._lateUpdate=function(H_a){},H_c._preRenderUpdate=function(H_a){},H_c._postRenderUpdate=function(H_a){},H_c._unload=function(H_a){this.offAll()},H_c._cloneTo=function(H_a){},H_q(0,H_c,"id",function(){return this._id}),H_q(0,H_c,"destroyed",function(){return this._destroyed}),H_q(0,H_c,"owner",function(){return this._owner}),H_q(0,H_c,"enable",function(){return this._enable},function(H_a){this._enable!==H_a&&(this._enable=H_a,this.event("enablechanged",this._enable))}),H_q(0,H_c,"isSingleton",function(){return H_b._isSingleton}),H_b._isSingleton=!0,H_b._uniqueIDCounter=1,H_b}(),H_wb=function(H_a){function H_b(){this._destroyed=!1,H_b.__super.call(this),this._destroyed=!1}H_n(H_b,"laya.d3.core.GeometryFilter",H_f);var H_c=H_b.prototype;return H_x.imps(H_c,{"laya.resource.IDestroy":!0}),H_c._destroy=function(){this.offAll(),this._destroyed=!0},H_q(0,H_c,"_isAsyncLoaded",function(){return!0}),H_q(0,H_c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),H_q(0,H_c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),H_q(0,H_c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),H_q(0,H_c,"destroyed",function(){return this._destroyed}),H_b}(),H_xb=function(H_a){function H_d(H_a){H_d.__super.call(this),this._id=++H_d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new H_Za(new H_gb,new H_gb),this._boundingBoxCenter=new H_gb,this._boundingSphere=new H__a(new H_gb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=H_a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}H_n(H_d,"laya.d3.core.render.BaseRender",H_f);var H_b=H_d.prototype;return H_x.imps(H_b,{"laya.resource.IDestroy":!0}),H_b._changeMaterialReference=function(H_a,H_b){H_a&&H_a._removeReference(),H_b._addReference()},H_b._getInstanceMaterial=function(H_a,H_b){var H_c=new H_a.constructor;return H_a.cloneTo(H_c),H_c.name=H_c.name+"(Instance)",this._materialsInstance[H_b]=!0,this._changeMaterialReference(this._materials[H_b],H_c),this._materials[H_b]=H_c},H_b._setShaderValuelightMap=function(H_a){this._setShaderValueTexture(3,H_a)},H_b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},H_b._renderRenderableBoundBox=function(){var H_a=H_tb._debugPhasorSprite,H_b=this.boundingBox,H_c=H_d._tempBoundBoxCorners;H_b.getCorners(H_c),H_a.line(H_c[0],H_d._greenColor,H_c[1],H_d._greenColor),H_a.line(H_c[2],H_d._greenColor,H_c[3],H_d._greenColor),H_a.line(H_c[4],H_d._greenColor,H_c[5],H_d._greenColor),H_a.line(H_c[6],H_d._greenColor,H_c[7],H_d._greenColor),H_a.line(H_c[0],H_d._greenColor,H_c[3],H_d._greenColor),H_a.line(H_c[1],H_d._greenColor,H_c[2],H_d._greenColor),H_a.line(H_c[2],H_d._greenColor,H_c[6],H_d._greenColor),H_a.line(H_c[3],H_d._greenColor,H_c[7],H_d._greenColor),H_a.line(H_c[0],H_d._greenColor,H_c[4],H_d._greenColor),H_a.line(H_c[1],H_d._greenColor,H_c[5],H_d._greenColor),H_a.line(H_c[4],H_d._greenColor,H_c[7],H_d._greenColor),H_a.line(H_c[5],H_d._greenColor,H_c[6],H_d._greenColor)},H_b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},H_b._calculateBoundingBox=function(){throw"BaseRender: must override it."},H_b._setShaderValueTexture=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b)},H_b._setShaderValueMatrix4x4=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b?H_b.elements:null)},H_b._setShaderValueColor=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b?H_b.elements:null)},H_b._setShaderValueBuffer=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b)},H_b._setShaderValueInt=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b)},H_b._setShaderValueBool=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b)},H_b._setShaderValueNumber=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b)},H_b._setShaderValueVector2=function(H_a,H_b){this._owner._shaderValues.setValue(H_a,H_b?H_b.elements:null)},H_b._addShaderDefine=function(H_a){this._owner._shaderDefineValue|=H_a},H_b._removeShaderDefine=function(H_a){this._owner._shaderDefineValue&=~H_a},H_b._renderUpdate=function(H_a){return!0},H_b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var H_a=this._owner.scene;if(H_a){var H_b=H_a.getlightmaps()[this._lightmapIndex];H_b?(this._addShaderDefine(H_Vb.SAHDERDEFINE_LIGHTMAP),H_b.loaded?this._setShaderValuelightMap(H_b):H_b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(H_Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H_Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H_Vb.SAHDERDEFINE_LIGHTMAP)},H_b._updateOctreeNode=function(){var H_a=this._treeNode;H_a&&this._octreeNodeNeedChange&&(H_a.updateObject(this),this._octreeNodeNeedChange=!1)},H_b._destroy=function(){this.offAll();var H_a=0,H_b=0;for(H_a=0,H_b=this._renderElements.length;H_a<H_b;H_a++)this._renderElements[H_a]._destroy();for(H_a=0,H_b=this._materials.length;H_a<H_b;H_a++)this._materials[H_a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},H_q(0,H_b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),H_q(0,H_b,"id",function(){return this._id}),H_q(0,H_b,"material",function(){var H_a=this._materials[0];if(H_a&&!this._materialsInstance[0]){var H_b=this._getInstanceMaterial(H_a,0);this.event("materialchanged",[this,0,H_b])}return this._materials[0]},function(H_a){this.sharedMaterial=H_a}),H_q(0,H_b,"sharedMaterial",function(){return this._materials[0]},function(H_a){var H_b=this._materials[0];H_b!==H_a&&(this._materials[0]=H_a,this._materialsInstance[0]=!1,this._changeMaterialReference(H_b,H_a),this.event("materialchanged",[this,0,H_a]))}),H_q(0,H_b,"lightmapIndex",function(){return this._lightmapIndex},function(H_a){this._lightmapIndex=H_a,this._applyLightMapParams()}),H_q(0,H_b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(H_a){this._lightmapScaleOffset=H_a,this._setShaderValueColor(2,H_a),this._addShaderDefine(H_Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),H_q(0,H_b,"enable",function(){return this._enable},function(H_a){this._enable=H_a,this.event("enablechanged",[this,H_a])}),H_q(0,H_b,"materials",function(){for(var H_a=0,H_b=this._materials.length;H_a<H_b;H_a++)if(!this._materialsInstance[H_a]){var H_c=this._getInstanceMaterial(this._materials[H_a],H_a);this.event("materialchanged",[this,H_a,H_c])}return this._materials.slice()},function(H_a){this.sharedMaterials=H_a}),H_q(0,H_b,"sharedMaterials",function(){return this._materials.slice()},function(H_a){if(!H_a)throw new Error("MeshRender: shadredMaterials value can't be null.");var H_b=H_a.length;this._materialsInstance.length=H_b;for(var H_c=0;H_c<H_b;H_c++){var H_d=this._materials[H_c];H_d!==H_a[H_c]&&(this._materialsInstance[H_c]=!1,this._changeMaterialReference(H_d,H_a[H_c]),this.event("materialchanged",[this,H_c,H_a[H_c]]))}this._materials=H_a}),H_q(0,H_b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),H_q(0,H_b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var H_a=this.boundingBox;H_gb.add(H_a.min,H_a.max,this._boundingBoxCenter),H_gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),H_q(0,H_b,"receiveShadow",function(){return this._receiveShadow},function(H_a){this._receiveShadow!==H_a&&((this._receiveShadow=H_a)?this._addShaderDefine(H_nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(H_nb.SHADERDEFINE_RECEIVE_SHADOW))}),H_q(0,H_b,"destroyed",function(){return this._destroyed}),H_d._uniqueIDCounter=0,H_l(H_d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb,new H_gb]},"_greenColor",function(){return this._greenColor=new H_hb(0,1,0,1)}]),H_d}(),H_yb=function(H_a){function H_h(H_a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,H_h.__super.call(this),this._localPosition=new H_gb,this._localRotation=new H_cb(0,0,0,1),this._localScale=new H_gb(1,1,1),this._localRotationEuler=new H_gb,this._localMatrix=new H_ab,this._position=new H_gb,this._rotation=new H_cb(0,0,0,1),this._scale=new H_gb(1,1,1),this._worldMatrix=new H_ab,this._forward=new H_gb,this._up=new H_gb,this._right=new H_gb,this._owner=H_a,this._childs=[]}H_n(H_h,"laya.d3.core.Transform3D",H_f);var H_b=H_h.prototype;return H_b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)H_ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var H_a=H_h._tempVector30;H_gb.multiply(this.pivot,this._localScale,H_a);var H_b=H_h._tempVector31;H_gb.subtract(H_a,this.pivot,H_b);var H_c=H_h._tempVector32,H_d=this.localRotation;H_gb.transformQuat(H_a,H_d,H_c),H_gb.subtract(H_c,H_a,H_c);var H_e=H_h._tempVector33;H_gb.subtract(this._localPosition,H_b,H_e),H_gb.subtract(H_e,H_c,H_e),H_ab.createAffineTransformation(H_e,H_d,this._localScale,this._localMatrix)}},H_b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldPositionRotationTransform()}},H_b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldPositionScaleTransform()}},H_b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldPositionTransform()}},H_b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldPositionRotationTransform()}},H_b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldPositionScaleTransform()}},H_b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._onWorldTransform()}},H_b.translate=function(H_a,H_b){void 0===H_b&&(H_b=!0),H_b?(H_ab.createFromQuaternion(this.localRotation,H_h._tempMatrix0),H_gb.transformCoordinate(H_a,H_h._tempMatrix0,H_h._tempVector30),H_gb.add(this.localPosition,H_h._tempVector30,this._localPosition),this.localPosition=this._localPosition):(H_gb.add(this.position,H_a,this._position),this.position=this._position)},H_b.rotate=function(H_a,H_b,H_c){var H_d;void 0===H_b&&(H_b=!0),void 0===H_c&&(H_c=!0),H_d=H_c?H_a:(H_gb.scale(H_a,Math.PI/180,H_h._tempVector30),H_h._tempVector30),H_cb.createFromYawPitchRoll(H_d.y,H_d.x,H_d.z,H_h._tempQuaternion0),H_b?(H_cb.multiply(this._localRotation,H_h._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(H_cb.multiply(H_h._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},H_b.lookAt=function(H_a,H_b,H_c){void 0===H_c&&(H_c=!1);var H_d,H_e=H_a.elements;if(H_c){if(H_d=this._localPosition.elements,Math.abs(H_d[0]-H_e[0])<H_oa.zeroTolerance&&Math.abs(H_d[1]-H_e[1])<H_oa.zeroTolerance&&Math.abs(H_d[2]-H_e[2])<H_oa.zeroTolerance)return;H_cb.lookAt(this._localPosition,H_a,H_b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var H_f=this.position;if(H_d=H_f.elements,Math.abs(H_d[0]-H_e[0])<H_oa.zeroTolerance&&Math.abs(H_d[1]-H_e[1])<H_oa.zeroTolerance&&Math.abs(H_d[2]-H_e[2])<H_oa.zeroTolerance)return;H_cb.lookAt(H_f,H_a,H_b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},H_q(0,H_b,"_isFrontFaceInvert",function(){var H_a=this.scale,H_b=H_a.x<0;return H_a.y<0&&(H_b=!H_b),H_a.z<0&&(H_b=!H_b),H_b}),H_q(0,H_b,"owner",function(){return this._owner}),H_q(0,H_b,"localRotation",function(){if(this._localQuaternionUpdate){var H_a=this._localRotationEuler.elements;H_cb.createFromYawPitchRoll(H_a[1]/H_h._angleToRandin,H_a[0]/H_h._angleToRandin,H_a[2]/H_h._angleToRandin,this._localRotation)}return this._localRotation},function(H_a){this._localRotation=H_a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H_q(0,H_b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?H_ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(H_a){null===this._parent?H_a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),H_ab.multiply(this._localMatrix,H_a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=H_a,this._worldUpdate=!1}),H_q(0,H_b,"worldNeedUpdate",function(){return this._worldUpdate}),H_q(0,H_b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(H_a){this._localMatrix=H_a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),H_q(0,H_b,"dummy",function(){return this._dummy},function(H_a){this._dummy!==H_a&&(this._dummy&&(this._dummy._entity=null),H_a&&(H_a._entity=this),this._dummy=H_a)}),H_q(0,H_b,"localPosition",function(){return this._localPosition},function(H_a){this._localPosition=H_a,this._localUpdate=!0,this._onWorldPositionTransform()}),H_q(0,H_b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var H_a=this._parent.position;H_gb.multiply(this._localPosition,this._parent.scale,H_h._tempVector30),H_gb.transformQuat(H_h._tempVector30,this._parent.rotation,H_h._tempVector30),H_gb.add(H_a,H_h._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(H_a){if(null!=this._parent){H_gb.subtract(H_a,this._parent.position,this._localPosition);var H_b=this._parent.scale.elements,H_c=H_b[0],H_d=H_b[1],H_e=H_b[2];if(1!==H_c||1!==H_d||1!==H_e){var H_f=H_h._tempVector30,H_g=H_f.elements;H_g[0]=1/H_c,H_g[1]=1/H_d,H_g[2]=1/H_e,H_gb.multiply(this._localPosition,H_f,this._localPosition)}this._parent.rotation.invert(H_h._tempQuaternion0),H_gb.transformQuat(this._localPosition,H_h._tempQuaternion0,this._localPosition)}else H_a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=H_a,this._positionUpdate=!1}),H_q(0,H_b,"localScale",function(){return this._localScale},function(H_a){this._localScale=H_a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),H_q(0,H_b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(H_h._tempVector30);var H_a=H_h._tempVector30.elements,H_b=this._localRotationEuler.elements;H_b[0]=H_a[1]*H_h._angleToRandin,H_b[1]=H_a[0]*H_h._angleToRandin,H_b[2]=H_a[2]*H_h._angleToRandin}return this._localRotationEuler},function(H_a){this._localRotationEuler=H_a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H_q(0,H_b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?H_cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(H_a){null!=this._parent?(this._parent.rotation.invert(H_h._tempQuaternion0),H_cb.multiply(H_a,H_h._tempQuaternion0,this._localRotation)):H_a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=H_a,this._rotationUpdate=!1}),H_q(0,H_b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?H_gb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(H_a){if(null!==this._parent){var H_b=this._parent.scale.elements,H_c=H_h._tempVector30.elements;H_c[0]=1/H_b[0],H_c[1]=1/H_b[1],H_c[2]=1/H_b[2],H_gb.multiply(H_a,H_h._tempVector30,this._localScale)}else H_a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=H_a,this._scaleUpdate=!1}),H_q(0,H_b,"rotationEuler",null,function(H_a){H_cb.createFromYawPitchRoll(H_a.y,H_a.x,H_a.z,this._rotation),this.rotation=this._rotation}),H_q(0,H_b,"forward",function(){var H_a=this.worldMatrix.elements;return this._forward.elements[0]=-H_a[8],this._forward.elements[1]=-H_a[9],this._forward.elements[2]=-H_a[10],this._forward}),H_q(0,H_b,"up",function(){var H_a=this.worldMatrix.elements;return this._up.elements[0]=H_a[4],this._up.elements[1]=H_a[5],this._up.elements[2]=H_a[6],this._up}),H_q(0,H_b,"right",function(){var H_a=this.worldMatrix.elements;return this._right.elements[0]=H_a[0],this._right.elements[1]=H_a[1],this._right.elements[2]=H_a[2],this._right}),H_q(0,H_b,"parent",function(){return this._parent},function(H_a){if(this._parent!==H_a){if(this._parent){var H_b=this._parent._childs,H_c=H_b.indexOf(this);H_b.splice(H_c,1)}H_a&&(H_a._childs.push(this),H_a&&this._onWorldTransform()),this._parent=H_a}}),H_l(H_h,["_tempVector30",function(){return this._tempVector30=new H_gb},"_tempVector31",function(){return this._tempVector31=new H_gb},"_tempVector32",function(){return this._tempVector32=new H_gb},"_tempVector33",function(){return this._tempVector33=new H_gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new H_cb},"_tempMatrix0",function(){return this._tempMatrix0=new H_ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H_h}(),H_zb=(function(H_a){function H_b(){this._rotation=0,this._matNeedUpdte=!1,H_b.__super.call(this),this._matrix=new H_ab,this._offset=new H_fb,this._tiling=new H_fb(1,1)}H_n(H_b,"laya.d3.core.TransformUV",H_f);var H_c=H_b.prototype;H_x.imps(H_c,{"laya.d3.core.IClone":!0}),H_c._updateMatrix=function(){H_b._tempOffsetV3.elements[0]=this._offset.x,H_b._tempOffsetV3.elements[1]=this._offset.y,H_cb.createFromYawPitchRoll(0,0,this._rotation,H_b._tempRotationQua),H_b._tempTitlingV3.elements[0]=this._tiling.x,H_b._tempTitlingV3.elements[1]=this._tiling.y,H_ab.createAffineTransformation(H_b._tempOffsetV3,H_b._tempRotationQua,H_b._tempTitlingV3,this._matrix)},H_c.cloneTo=function(H_a){H_a._matrix=this._matrix.clone(),H_a._offset=this._offset.clone(),H_a._rotation=this._rotation,H_a._tiling=this._tiling.clone()},H_c.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),H_q(0,H_c,"tiling",function(){return this._tiling},function(H_a){this._tiling=H_a,this._matNeedUpdte=!0}),H_q(0,H_c,"offset",function(){return this._offset},function(H_a){this._offset=H_a,this._matNeedUpdte=!0}),H_q(0,H_c,"rotation",function(){return this._rotation},function(H_a){this._rotation=H_a,this._matNeedUpdte=!0}),H_l(H_b,["_tempOffsetV3",function(){return this._tempOffsetV3=new H_gb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new H_cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new H_gb(1,1,1)}])}(),function(H_c){function H_a(){this.x=NaN,this.y=NaN,this.z=NaN,H_a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}H_n(H_a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",H_c);var H_b=H_a.prototype;H_b._getShapeBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=.5*-this.x,H_b[1]=.5*-this.y,H_b[2]=.5*-this.z;var H_c=H_a.max.elements;H_c[0]=.5*this.x,H_c[1]=.5*this.y,H_c[2]=.5*this.z},H_b._getSpeedBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=0,H_b[1]=0,H_b[2]=0;var H_c=H_a.max.elements;H_c[0]=0,H_c[1]=1,H_c[2]=0},H_b.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements,H_f=H_b.elements;H_c?(H_c.seed=H_d[16],H_T._randomPointInsideHalfUnitBox(H_a,H_c),H_d[16]=H_c.seed):H_T._randomPointInsideHalfUnitBox(H_a),H_e[0]=this.x*H_e[0],H_e[1]=this.y*H_e[1],H_e[2]=this.z*H_e[2],this.randomDirection?H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b):(H_f[0]=0,H_f[1]=0,H_f[2]=1)},H_b.cloneTo=function(H_a){H_c.prototype.cloneTo.call(this,H_a);var H_b=H_a;H_b.x=this.x,H_b.y=this.y,H_b.z=this.z,H_b.randomDirection=this.randomDirection}}(H_O),function(H_c){function H_g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,H_g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}H_n(H_g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",H_c);var H_a=H_g.prototype;H_a._getShapeBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[2]=-this.radius,H_b[1]=0;var H_c=H_a.max.elements;H_c[0]=H_c[2]=this.radius,H_c[1]=0},H_a._getSpeedBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[1]=-1,H_b[2]=0;var H_c=H_a.max.elements;H_c[0]=H_c[1]=1,H_c[2]=0},H_a.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements,H_f=H_g._tempPositionPoint.elements;H_c?(H_c.seed=H_d[16],this.emitFromEdge?H_T._randomPointUnitArcCircle(this.arc,H_g._tempPositionPoint,H_c):H_T._randomPointInsideUnitArcCircle(this.arc,H_g._tempPositionPoint,H_c),H_d[16]=H_c.seed):this.emitFromEdge?H_T._randomPointUnitArcCircle(this.arc,H_g._tempPositionPoint):H_T._randomPointInsideUnitArcCircle(this.arc,H_g._tempPositionPoint),H_e[0]=-H_f[0],H_e[1]=H_f[1],H_e[2]=0,H_gb.scale(H_a,this.radius,H_a),this.randomDirection?H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b):H_a.cloneTo(H_b)},H_a.cloneTo=function(H_a){H_c.prototype.cloneTo.call(this,H_a);var H_b=H_a;H_b.radius=this.radius,H_b.arc=this.arc,H_b.emitFromEdge=this.emitFromEdge,H_b.randomDirection=this.randomDirection},H_l(H_g,["_tempPositionPoint",function(){return this._tempPositionPoint=new H_fb}])}(H_O),function(H_c){function H_m(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,H_m.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}H_n(H_m,"laya.d3.core.particleShuriKen.module.shape.ConeShape",H_c);var H_a=H_m.prototype;H_a._getShapeBoundBox=function(H_a){var H_b=this.radius+this.length*Math.sin(this.angle),H_c=this.length*Math.cos(this.angle),H_d=H_a.min.elements;H_d[0]=H_d[1]=-H_b,H_d[2]=0;var H_e=H_a.max.elements;H_e[0]=H_e[1]=H_b,H_e[2]=H_c},H_a._getSpeedBoundBox=function(H_a){var H_b=Math.sin(this.angle),H_c=H_a.min.elements;H_c[0]=H_c[1]=-H_b,H_c[2]=0;var H_d=H_a.max.elements;H_d[0]=H_c[1]=H_b,H_d[2]=1},H_a.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){var H_e,H_f=H_a.elements,H_g=H_b.elements,H_h=H_m._tempPositionPoint.elements,H_i=NaN,H_j=NaN,H_k=Math.cos(this.angle),H_l=Math.sin(this.angle);switch(this.emitType){case 0:H_c?(H_c.seed=H_d[16],H_T._randomPointInsideUnitCircle(H_m._tempPositionPoint,H_c),H_d[16]=H_c.seed):H_T._randomPointInsideUnitCircle(H_m._tempPositionPoint),H_i=H_h[0],H_j=H_h[1],H_f[0]=H_i*this.radius,H_f[1]=H_j*this.radius,H_f[2]=0,this.randomDirection?(H_c?(H_c.seed=H_d[17],H_T._randomPointInsideUnitCircle(H_m._tempDirectionPoint,H_c),H_d[17]=H_c.seed):H_T._randomPointInsideUnitCircle(H_m._tempDirectionPoint),H_e=H_m._tempDirectionPoint.elements,H_g[0]=H_e[0]*H_l,H_g[1]=H_e[1]*H_l):(H_g[0]=H_i*H_l,H_g[1]=H_j*H_l),H_g[2]=H_k;break;case 1:H_c?(H_c.seed=H_d[16],H_T._randomPointUnitCircle(H_m._tempPositionPoint,H_c),H_d[16]=H_c.seed):H_T._randomPointUnitCircle(H_m._tempPositionPoint),H_i=H_h[0],H_j=H_h[1],H_f[0]=H_i*this.radius,H_f[1]=H_j*this.radius,H_f[2]=0,this.randomDirection?(H_c?(H_c.seed=H_d[17],H_T._randomPointInsideUnitCircle(H_m._tempDirectionPoint,H_c),H_d[17]=H_c.seed):H_T._randomPointInsideUnitCircle(H_m._tempDirectionPoint),H_e=H_m._tempDirectionPoint.elements,H_g[0]=H_e[0]*H_l,H_g[1]=H_e[1]*H_l):(H_g[0]=H_i*H_l,H_g[1]=H_j*H_l),H_g[2]=H_k;break;case 2:H_c?(H_c.seed=H_d[16],H_T._randomPointInsideUnitCircle(H_m._tempPositionPoint,H_c)):H_T._randomPointInsideUnitCircle(H_m._tempPositionPoint),H_i=H_h[0],H_j=H_h[1],H_f[0]=H_i*this.radius,H_f[1]=H_j*this.radius,H_g[H_f[2]=0]=H_i*H_l,H_g[1]=H_j*H_l,H_g[2]=H_k,H_gb.normalize(H_b,H_b),H_c?(H_gb.scale(H_b,this.length*H_c.getFloat(),H_b),H_d[16]=H_c.seed):H_gb.scale(H_b,this.length*Math.random(),H_b),H_gb.add(H_a,H_b,H_a),this.randomDirection&&(H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b));break;case 3:H_c?(H_c.seed=H_d[16],H_T._randomPointUnitCircle(H_m._tempPositionPoint,H_c)):H_T._randomPointUnitCircle(H_m._tempPositionPoint),H_i=H_h[0],H_j=H_h[1],H_f[0]=H_i*this.radius,H_f[1]=H_j*this.radius,H_g[H_f[2]=0]=H_i*H_l,H_g[1]=H_j*H_l,H_g[2]=H_k,H_gb.normalize(H_b,H_b),H_c?(H_gb.scale(H_b,this.length*H_c.getFloat(),H_b),H_d[16]=H_c.seed):H_gb.scale(H_b,this.length*Math.random(),H_b),H_gb.add(H_a,H_b,H_a),this.randomDirection&&(H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b));break;default:throw new Error("ConeShape:emitType is invalid.")}},H_a.cloneTo=function(H_a){H_c.prototype.cloneTo.call(this,H_a);var H_b=H_a;H_b.angle=this.angle,H_b.radius=this.radius,H_b.length=this.length,H_b.emitType=this.emitType,H_b.randomDirection=this.randomDirection},H_l(H_m,["_tempPositionPoint",function(){return this._tempPositionPoint=new H_fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new H_fb}])}(H_O),function(H_c){function H_a(){this.radius=NaN,this.emitFromShell=!1,H_a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H_n(H_a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",H_c);var H_b=H_a.prototype;H_b._getShapeBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[1]=H_b[2]=-this.radius;var H_c=H_a.max.elements;H_c[0]=H_c[1]=this.radius,H_c[2]=0},H_b._getSpeedBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[1]=-1,H_b[2]=0;var H_c=H_a.max.elements;H_c[0]=H_c[1]=H_c[2]=1},H_b.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){var H_e=H_a.elements;H_c?(H_c.seed=H_d[16],this.emitFromShell?H_T._randomPointUnitSphere(H_a,H_c):H_T._randomPointInsideUnitSphere(H_a,H_c),H_d[16]=H_c.seed):this.emitFromShell?H_T._randomPointUnitSphere(H_a):H_T._randomPointInsideUnitSphere(H_a),H_gb.scale(H_a,this.radius,H_a);var H_f=H_e[2];H_f<0&&(H_e[2]=-1*H_f),this.randomDirection?H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b):H_a.cloneTo(H_b)},H_b.cloneTo=function(H_a){H_c.prototype.cloneTo.call(this,H_a);var H_b=H_a;H_b.radius=this.radius,H_b.emitFromShell=this.emitFromShell,H_b.randomDirection=this.randomDirection}}(H_O),function(H_c){function H_a(){this.radius=NaN,this.emitFromShell=!1,H_a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H_n(H_a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",H_c);var H_b=H_a.prototype;H_b._getShapeBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[1]=H_b[2]=-this.radius;var H_c=H_a.max.elements;H_c[0]=H_c[1]=H_c[2]=this.radius},H_b._getSpeedBoundBox=function(H_a){var H_b=H_a.min.elements;H_b[0]=H_b[1]=H_b[2]=-1;var H_c=H_a.max.elements;H_c[0]=H_c[1]=H_c[2]=1},H_b.generatePositionAndDirection=function(H_a,H_b,H_c,H_d){H_c?(H_c.seed=H_d[16],this.emitFromShell?H_T._randomPointUnitSphere(H_a,H_c):H_T._randomPointInsideUnitSphere(H_a,H_c),H_d[16]=H_c.seed):this.emitFromShell?H_T._randomPointUnitSphere(H_a):H_T._randomPointInsideUnitSphere(H_a),H_gb.scale(H_a,this.radius,H_a),this.randomDirection?H_c?(H_c.seed=H_d[17],H_T._randomPointUnitSphere(H_b,H_c),H_d[17]=H_c.seed):H_T._randomPointUnitSphere(H_b):H_a.cloneTo(H_b)},H_b.cloneTo=function(H_a){H_c.prototype.cloneTo.call(this,H_a);var H_b=H_a;H_b.radius=this.radius,H_b.emitFromShell=this.emitFromShell,H_b.randomDirection=this.randomDirection}}(H_O),function(H_a){function H_b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,H_b.__super.call(this)}return H_n(H_b,"laya.d3.core.render.SubMeshRenderElement",H_W),H_b}()),H_Ab=function(H_a){function H_s(H_a,H_b,H_c,H_d,H_e,H_f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=H_a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[H_nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[H_Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[H_Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[H_Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";H_s.__super.call(this,H_a,H_b,H_c,null,{}),this._attributeMap=H_d;var H_g;for(H_g in H_e){var H_h=H_e[H_g];switch(H_h[1]){case 0:this._renderElementUniformMap[H_g]=H_h[0];break;case 1:this._materialUniformMap[H_g]=H_h[0];break;case 2:this._spriteUniformMap[H_g]=H_h[0];break;case 3:this._cameraUniformMap[H_g]=H_h[0];break;case 4:this._sceneUniformMap[H_g]=H_h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}H_n(H_s,"laya.d3.shader.ShaderCompile3D",H_v);var H_b=H_s.prototype;return H_b._definesToNameDic=function(H_a,H_b){for(var H_c={},H_d=1,H_e=0;H_e<32&&!(H_a<(H_d=1<<H_e));H_e++)if(H_a&H_d){var H_f=H_b[H_d];H_f&&(H_c[H_f]="")}return H_c},H_b.withCompile=function(H_a,H_b,H_c,H_d){var H_e,H_f,H_g;if(H_f=this.sharders[H_a])if(H_g=H_f[H_b]){if(H_e=H_g[H_c])return H_e}else H_g=H_f[H_b]=[];else H_g=(H_f=this.sharders[H_a]=[])[H_b]=[];var H_h,H_i=this._definesToNameDic(H_a,H_s._globalInt2name),H_j=this._definesToNameDic(H_b,this._spriteInt2name),H_k=this._definesToNameDic(H_c,this._materialInt2name),H_l={},H_m="";if(H_i)for(H_h in H_i)H_m+="#define "+H_h+"\n",H_l[H_h]=!0;if(H_j)for(H_h in H_j)H_m+="#define "+H_h+"\n",H_l[H_h]=!0;if(H_k)for(H_h in H_k)H_m+="#define "+H_h+"\n",H_l[H_h]=!0;var H_n=H_Lb.nameKey.getName(this._name)+" compile ("+H_a+","+H_b+","+H_c+")",H_q=this._VS.toscript(H_l,[]),H_r=this._PS.toscript(H_l,[]);H_H.now();if(H_e=H_Lb.create(H_m+H_q.join("\n"),H_m+H_r.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,H_d,H_n),H_g[H_c]=H_e,laya.d3.shader.ShaderCompile3D.debugMode)H_H.now();return H_e},H_b.precompileShaderWithShaderDefine=function(H_a,H_b,H_c){this.withCompile(H_a,H_b,H_c,!0)},H_b.addMaterialDefines=function(H_a){var H_b=H_a.defines;for(var H_c in H_b){var H_d=H_b[H_c],H_e=parseInt(H_c);this._materialInt2name[H_e]=H_d,this._materialName2Int[H_d]=H_e}},H_b.addSpriteDefines=function(H_a){var H_b=H_a.defines;for(var H_c in H_b){var H_d=H_b[H_c],H_e=parseInt(H_c);this._spriteInt2name[H_e]=H_d,this._spriteName2Int[H_d]=H_e}},H_b.getMaterialDefineByName=function(H_a){return this._materialName2Int[H_a]},H_b.registerMaterialDefine=function(H_a){var H_b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[H_b]=H_a,this._materialName2Int[H_a]=H_b},H_b.registerSpriteDefine=function(H_a){var H_b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[H_b]=H_a,this._spriteName2Int[H_a]=H_b},H_s._globalRegDefine=function(H_a,H_b){H_s._globalInt2name[H_b]=H_a},H_s.add=function(H_a,H_b,H_c,H_d,H_e){return laya.d3.shader.ShaderCompile3D._preCompileShader[H_a]=new H_s(H_a,H_b,H_c,H_d,H_e,H_v.includes)},H_s.get=function(H_a){return laya.d3.shader.ShaderCompile3D._preCompileShader[H_Lb.nameKey.getID(H_a)]},H_s._preCompileShader={},H_s._globalInt2name=[],H_s.debugMode=!1,H_s.SHADERDEFINE_HIGHPRECISION=1,H_s.SHADERDEFINE_FOG=4,H_s.SHADERDEFINE_DIRECTIONLIGHT=8,H_s.SHADERDEFINE_POINTLIGHT=16,H_s.SHADERDEFINE_SPOTLIGHT=32,H_s.SHADERDEFINE_UV0=64,H_s.SHADERDEFINE_COLOR=128,H_s.SHADERDEFINE_UV1=256,H_s.SAHDERDEFINE_DEPTHFOG=131072,H_s}(),H_Bb=function(H_a){function H_q(){H_q.__super.call(this)}H_n(H_q,"laya.d3.graphics.MeshSprite3DStaticBatchManager",H_da);var H_b=H_q.prototype;return H_b._getStaticBatch=function(H_a,H_b,H_c,H_d){var H_e,H_f;return H_f=H_a?H_a.id.toString()+H_c.id.toString()+H_b.id.toString()+H_d.toString():H_c.id.toString()+H_b.id.toString()+H_d.toString(),this._staticBatches[H_f]?H_e=this._staticBatches[H_f]:this._staticBatches[H_f]=H_e=new H_Cb(H_f,this,H_a,H_b,H_c),H_e},H_b._initStaticBatchs=function(H_a){var H_b,H_c;this._initBatchRenderElements.sort(H_q._sortPrepareStaticBatch);for(var H_d,H_e=!1,H_f=0,H_g=0,H_h=this._initBatchRenderElements.length;H_g<H_h;H_g++){var H_i,H_j=this._initBatchRenderElements[H_g],H_k=H_j.renderObj._getVertexBuffer(0);H_j._sprite3D;if(H_c===H_k.vertexDeclaration&&H_b===H_j._material)if(H_e)H_d._addCombineBatchRenderObjTest(H_j)?(H_i=H_j._staticBatch)!==H_d&&(H_i&&H_i._deleteCombineBatchRenderObj(H_j),H_d._addCombineBatchRenderObj(H_j)):(H_e=!1,H_f++);else{var H_l=this._initBatchRenderElements[H_g-1],H_m=H_l.renderObj,H_n=H_j.renderObj;H_e=!(65535<H_m._getVertexBuffer().vertexCount+H_n._getVertexBuffer().vertexCount)&&(H_d=this._getStaticBatch(H_a,H_c,H_b,H_f),(H_i=H_l._staticBatch)!==H_d&&(H_i&&H_i._deleteCombineBatchRenderObj(H_l),H_d._addCombineBatchRenderObj(H_l)),(H_i=H_j._staticBatch)!==H_d&&(H_i&&H_i._deleteCombineBatchRenderObj(H_j),H_d._addCombineBatchRenderObj(H_j)),!0)}else H_e=!1,H_f=0;H_b=H_j._material,H_c=H_k.vertexDeclaration}},H_q._sortPrepareStaticBatch=function(H_a,H_b){var H_c=H_a._render,H_d=H_b._render,H_e=H_c.lightmapIndex-H_d.lightmapIndex;if(0!=H_e)return H_e;var H_f=H_c.receiveShadow-H_d.receiveShadow;if(0!=H_f)return H_f;var H_g=H_a._mainSortID-H_b._mainSortID;return 0==H_g?H_a.renderObj.triangleCount-H_b.renderObj.triangleCount:H_g},H_q}(),H_Cb=function(H_a){function H_f(H_a,H_b,H_c,H_d,H_e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,H_f.__super.call(this,H_a,H_b,H_c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=H_d,this._material=H_e}H_n(H_f,"laya.d3.graphics.SubMeshStaticBatch",H_ea);var H_b=H_f.prototype;return H_b._compareBatchRenderElement=function(H_a,H_b){return H_a._batchIndexStart>H_b._batchIndexStart},H_b._addCombineBatchRenderObjTest=function(H_a){var H_b=H_a.renderObj._vertexCount;return!(65535<(0<H_b?this._currentCombineVertexCount+H_b:this._currentCombineVertexCount+H_a.renderObj._getVertexBuffer().vertexCount))},H_b._addCombineBatchRenderObj=function(H_a){var H_b=H_a.renderObj,H_c=H_b._vertexCount;this._initBatchRenderElements.push(H_a),H_a._staticBatch=this,0<H_c?(this._currentCombineIndexCount+=H_b._indexCount,this._currentCombineVertexCount+=H_c):(this._currentCombineIndexCount=this._currentCombineIndexCount+H_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H_b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},H_b._deleteCombineBatchRenderObj=function(H_a){var H_b=H_a.renderObj,H_c=this._initBatchRenderElements.indexOf(H_a);if(-1!==H_c){this._initBatchRenderElements.splice(H_c,1),H_a._staticBatch=null;var H_d=H_b._vertexCount;0<H_d?(this._currentCombineIndexCount=this._currentCombineIndexCount-H_b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H_d):(this._currentCombineIndexCount=this._currentCombineIndexCount-H_b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H_b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},H_b._finishInit=function(){if(this._needFinishCombine){var H_a=0,H_b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var H_c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),H_d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=H_Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=H_Nb.create("ushort",this._currentCombineIndexCount,35044);for(var H_e=0,H_f=this._initBatchRenderElements.length;H_e<H_f;H_e++){var H_g=this._initBatchRenderElements[H_e],H_h=H_g.renderObj,H_i=H_h._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,H_g._sprite3D),H_j=H_h.getIndices(),H_k=H_g._sprite3D.transform._isFrontFaceInvert,H_l=H_a/(this._vertexDeclaration.vertexStride/4)-H_h._vertexStart,H_m=H_b,H_n=H_m+H_j.length;H_g._batchIndexStart=H_m,H_g._batchIndexEnd=H_n,H_d.set(H_j,H_b);var H_q=0;if(H_k)for(H_q=H_m;H_q<H_n;H_q+=3){H_d[H_q]=H_l+H_d[H_q];var H_r=H_d[H_q+1],H_s=H_d[H_q+2];H_d[H_q+1]=H_l+H_s,H_d[H_q+2]=H_l+H_r}else for(H_q=H_m;H_q<H_n;H_q+=3)H_d[H_q]=H_l+H_d[H_q],H_d[H_q+1]=H_l+H_d[H_q+1],H_d[H_q+2]=H_l+H_d[H_q+2];H_b+=H_j.length,H_c.set(H_i,H_a),H_a+=H_i.length}this._vertexBuffer.setData(H_c),this._indexBuffer.setData(H_d),this._needFinishCombine=!1}},H_b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new H_zb)},H_b._getRenderElement=function(H_a,H_b,H_c){for(var H_d,H_e,H_f=this._batchRenderElements.length,H_g=!0,H_h=0;H_h<H_f;H_h++){var H_i,H_j,H_k=(H_e=this._batchRenderElements[H_h])._sprite3D._render;if(0!==H_h&&(H_g=(H_i=(H_d=this._batchRenderElements[H_h-1])._sprite3D._render).lightmapIndex!==H_k.lightmapIndex||H_i.receiveShadow!==H_k.receiveShadow||H_d._batchIndexEnd!==H_e._batchIndexStart),H_g){(H_j=this._getCombineRenderElementFromPool()).renderObj=this,H_j._material=this._material,H_j._batchIndexStart=H_e._batchIndexStart,H_j._batchIndexEnd=H_e._batchIndexEnd;var H_l=H_k.lightmapIndex,H_m=H_l+1,H_n=this._batchOwnerIndices[H_m];H_n||(H_n=this._batchOwnerIndices[H_m]=[]);var H_q,H_r=H_n[H_e._render.receiveShadow?1:0];void 0===H_r?(H_n[H_k.receiveShadow?1:0]=this._batchOwners.length,(H_q=new H_Xb(null,"StaticBatchMeshSprite3D"))._scene=H_b,H_q._transform=this._rootOwner?this._rootOwner._transform:null,H_q._render.lightmapIndex=H_l,H_q._render.receiveShadow=H_e._render.receiveShadow,this._batchOwners.push(H_q)):H_q=this._batchOwners[H_r],H_q._render._renderUpdate(H_c),H_j._sprite3D=H_q,H_a.push(H_j)}else H_j._batchIndexEnd=H_e._batchIndexEnd}},H_b._beforeRender=function(H_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H_b._render=function(H_a){var H_b=H_a.renderElement,H_c=H_b._batchIndexStart,H_d=H_b._batchIndexEnd-H_c;H_F.mainContext.drawElements(4,H_d,5123,2*H_c),H_A.drawCall++,H_A.trianglesFaces+=H_d/3},H_b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},H_b._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),this._vertexBuffer},H_f}(),H_Db=function(H_a){function H_b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,H_b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}H_n(H_b,"laya.d3.core.ComponentNode",H_j);var H_c=H_b.prototype;return H_c.addComponent=function(H_a){var H_b,H_c=this._componentsMap.indexOf(H_a);if(-1===H_c)H_b=[],this._componentsMap.push(H_a),this._typeComponentsIndices.push(H_b);else if(H_b=this._typeComponentsIndices[H_c],this._components[H_b[0]].isSingleton)throw new Error("无法单实例创建"+H_a+"组件，"+H_a+"组件已存在！");var H_d=H_e.getInstance(H_a);return H_b.push(this._components.length),this._components.push(H_d),H_d instanceof laya.d3.component.Script&&this._scripts.push(H_d),H_d._initialize(this),H_d},H_c._removeComponent=function(H_a,H_b){var H_c=this._typeComponentsIndices[H_a],H_d=H_c[H_b],H_e=this._components[H_d];this._components.splice(H_d,1),H_e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H_e),1),H_c.splice(H_b,1),0===H_c.length&&(this._typeComponentsIndices.splice(H_a,1),this._componentsMap.splice(H_a,1));for(var H_f=0,H_g=this._componentsMap.length;H_f<H_g;H_f++)for(var H_h=(H_c=this._typeComponentsIndices[H_f]).length-1;0<=H_h;H_h--){var H_i=H_c[H_h];if(!(H_d<H_i))break;H_c[H_h]=--H_i}H_e._destroy()},H_c.getComponentByType=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c=this._componentsMap.indexOf(H_a);return-1===H_c?null:this._components[this._typeComponentsIndices[H_c][H_b]]},H_c.getComponentsByType=function(H_a,H_b){var H_c=this._componentsMap.indexOf(H_a);if(-1!==H_c){var H_d=this._typeComponentsIndices[H_c],H_e=H_d.length;H_b.length=H_e;for(var H_f=0;H_f<H_e;H_f++)H_b[H_f]=this._components[H_d[H_f]]}else H_b.length=0},H_c.getComponentByIndex=function(H_a){return this._components[H_a]},H_c.removeComponentByType=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c=this._componentsMap.indexOf(H_a);-1!==H_c&&this._removeComponent(H_c,H_b)},H_c.removeComponentsByType=function(H_a){var H_b=this._componentsMap.indexOf(H_a);if(-1!==H_b)for(var H_c=this._typeComponentsIndices[H_b],H_d=0,H_e=H_c.length;H_d<H_e;H_c.length<H_e?H_e--:H_d++)this._removeComponent(H_b,H_d)},H_c.removeAllComponent=function(){for(var H_a=0,H_b=this._componentsMap.length;H_a<H_b;this._componentsMap.length<H_b?H_b--:H_a++)this.removeComponentsByType(this._componentsMap[H_a])},H_c._updateComponents=function(H_a){for(var H_b=0,H_c=this._components.length;H_b<H_c;H_b++){var H_d=this._components[H_b];!H_d.started&&(H_d._start(H_a),H_d.started=!0),H_d.enable&&H_d._update(H_a)}},H_c._lateUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._lateUpdate(H_a)}},H_c._preRenderUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._preRenderUpdate(H_a)}},H_c._postRenderUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._postRenderUpdate(H_a)}},H_b}(),H_Eb=function(H_d){function H_a(){H_a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new H_mb,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new H_hb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}H_n(H_a,"laya.d3.core.material.BaseMaterial",H_d);var H_b=H_a.prototype;return H_x.imps(H_b,{"laya.d3.core.IClone":!0}),H_b._addShaderDefine=function(H_a){this._shaderDefineValue|=H_a},H_b._removeShaderDefine=function(H_a){this._shaderDefineValue&=~H_a},H_b._addDisablePublicShaderDefine=function(H_a){this._disablePublicShaderDefine|=H_a},H_b._removeDisablePublicShaderDefine=function(H_a){this._disablePublicShaderDefine&=~H_a},H_b._setBuffer=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b),this._values[H_a]=H_b},H_b._getBuffer=function(H_a){return this._values[H_a]},H_b._setMatrix4x4=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b?H_b.elements:null),this._values[H_a]=H_b},H_b._getMatrix4x4=function(H_a){return this._values[H_a]},H_b._setInt=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b),this._values[H_a]=H_b},H_b._getInt=function(H_a){return this._values[H_a]},H_b._setNumber=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b),this._values[H_a]=H_b},H_b._getNumber=function(H_a){return this._values[H_a]},H_b._setBool=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b),this._values[H_a]=H_b},H_b._getBool=function(H_a){return this._values[H_a]},H_b._setVector2=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b?H_b.elements:null),this._values[H_a]=H_b},H_b._getVector2=function(H_a){return this._values[H_a]},H_b._setColor=function(H_a,H_b){this._shaderValues.setValue(H_a,H_b?H_b.elements:null),this._values[H_a]=H_b},H_b._getColor=function(H_a){return this._values[H_a]},H_b._setTexture=function(H_a,H_b){var H_c=this._values[H_a];this._values[H_a]=H_b,this._shaderValues.setValue(H_a,H_b),0<this.referenceCount&&(H_c&&H_c._removeReference(),H_b&&H_b._addReference())},H_b._getTexture=function(H_a){return this._values[H_a]},H_b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},H_b._getShader=function(H_a,H_b,H_c){var H_d=(H_a|H_b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(H_d,H_c,this._shaderDefineValue),this._shader},H_b._setRenderStateBlendDepth=function(){var H_a=H_F.mainContext;switch(H_G.setDepthMask(H_a,this.depthWrite),0===this.depthTest?H_G.setDepthTest(H_a,!1):(H_G.setDepthTest(H_a,!0),H_G.setDepthFunc(H_a,this.depthTest)),this.blend){case 0:H_G.setBlend(H_a,!1);break;case 1:H_G.setBlend(H_a,!0),H_G.setBlendFunc(H_a,this.srcBlend,this.dstBlend);break;case 2:H_G.setBlend(H_a,!0)}},H_b._setRenderStateFrontFace=function(H_a,H_b){var H_c=H_F.mainContext,H_d=0;switch(this.cull){case 0:H_G.setCullFace(H_c,!1);break;case 1:H_G.setCullFace(H_c,!0),H_d=H_a?H_b&&H_b._isFrontFaceInvert?2305:2304:H_b&&H_b._isFrontFaceInvert?2304:2305,H_G.setFrontFace(H_c,H_d);break;case 2:H_G.setCullFace(H_c,!0),H_d=H_a?H_b&&H_b._isFrontFaceInvert?2304:2305:H_b&&H_b._isFrontFaceInvert?2305:2304,H_G.setFrontFace(H_c,H_d)}},H_b.onAsynLoaded=function(H_a,H_b,H_c){var H_d=H_b[0],H_e=H_b[1];switch(H_d.version){case"LAYAMATERIAL:01":var H_f=0,H_g=0,H_h=H_d.props;for(var H_i in H_h)switch(H_i){case"vectors":var H_j=H_h[H_i];for(H_f=0,H_g=H_j.length;H_f<H_g;H_f++){var H_k=H_j[H_f],H_l=H_k.value;switch(H_l.length){case 2:this[H_k.name]=new H_fb(H_l[0],H_l[1]);break;case 3:this[H_k.name]=new H_gb(H_l[0],H_l[1],H_l[2]);break;case 4:this[H_k.name]=new H_hb(H_l[0],H_l[1],H_l[2],H_l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var H_m=H_h[H_i];for(H_f=0,H_g=H_m.length;H_f<H_g;H_f++){var H_n=H_m[H_f],H_q=H_n.path;H_q&&(this[H_n.name]=H_t.getRes(H_e[H_q]))}break;case"defines":var H_r=H_h[H_i];for(H_f=0,H_g=H_r.length;H_f<H_g;H_f++){var H_s=this._shaderCompile.getMaterialDefineByName(H_r[H_f]);this._addShaderDefine(H_s)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[H_i]=H_h[H_i];break;case"renderQueue":switch(H_h[H_i]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[H_i]=H_h[H_i]}break;case"LAYAMATERIAL:02":for(H_i in H_h=H_d.props)switch(H_i){case"vectors":for(H_f=0,H_g=(H_j=H_h[H_i]).length;H_f<H_g;H_f++)switch((H_l=(H_k=H_j[H_f]).value).length){case 2:this[H_k.name]=new H_fb(H_l[0],H_l[1]);break;case 3:this[H_k.name]=new H_gb(H_l[0],H_l[1],H_l[2]);break;case 4:this[H_k.name]=new H_hb(H_l[0],H_l[1],H_l[2],H_l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(H_f=0,H_g=(H_m=H_h[H_i]).length;H_f<H_g;H_f++)(H_q=(H_n=H_m[H_f]).path)&&(this[H_n.name]=H_t.getRes(H_e[H_q]));break;case"defines":for(H_f=0,H_g=(H_r=H_h[H_i]).length;H_f<H_g;H_f++)H_s=this._shaderCompile.getMaterialDefineByName(H_r[H_f]),this._addShaderDefine(H_s);break;default:this[H_i]=H_h[H_i]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},H_b._addReference=function(){H_d.prototype._addReference.call(this);for(var H_a=0,H_b=this._values.length;H_a<H_b;H_a++){var H_c=this._values[H_a];H_c&&H_c instanceof laya.d3.resource.BaseTexture&&H_c._addReference()}},H_b._removeReference=function(){H_d.prototype._removeReference.call(this);for(var H_a=0,H_b=this._values.length;H_a<H_b;H_a++){var H_c=this._values[H_a];H_c&&H_c instanceof laya.d3.resource.BaseTexture&&H_c._removeReference()}},H_b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},H_b.setShaderName=function(H_a){var H_b=H_Lb.nameKey.getID(H_a);if(-1===H_b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=H_Ab._preCompileShader[H_b]},H_b.cloneTo=function(H_a){var H_b=H_a;H_b.name=this.name,H_b.cull=this.cull,H_b.blend=this.blend,H_b.srcBlend=this.srcBlend,H_b.dstBlend=this.dstBlend,H_b.srcBlendRGB=this.srcBlendRGB,H_b.dstBlendRGB=this.dstBlendRGB,H_b.srcBlendAlpha=this.srcBlendAlpha,H_b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(H_b.blendConstColor),H_b.blendEquation=this.blendEquation,H_b.blendEquationRGB=this.blendEquationRGB,H_b.blendEquationAlpha=this.blendEquationAlpha,H_b.depthTest=this.depthTest,H_b.depthWrite=this.depthWrite,H_b.renderQueue=this.renderQueue,H_b._shader=this._shader,H_b._disablePublicShaderDefine=this._disablePublicShaderDefine,H_b._shaderDefineValue=this._shaderDefineValue;var H_c,H_d=0,H_e=H_b._shaderValues;H_b._shaderValues.data.length=this._shaderValues.data.length;var H_f=this._values.length,H_g=H_b._values;for(H_d=0,H_c=H_g.length=H_f;H_d<H_c;H_d++){var H_h=this._values[H_d];if(H_h)if("number"==typeof H_h)H_g[H_d]=H_h,H_e.data[H_d]=H_h;else if("number"==typeof H_h&&Math.floor(H_h)==H_h)H_g[H_d]=H_h,H_e.data[H_d]=H_h;else if("boolean"==typeof H_h)H_g[H_d]=H_h,H_e.data[H_d]=H_h;else if(H_h instanceof laya.d3.math.Vector2){var H_i=H_g[H_d]||(H_g[H_d]=new H_fb);H_h.cloneTo(H_i),H_e.data[H_d]=H_i.elements}else if(H_h instanceof laya.d3.math.Vector3){var H_j=H_g[H_d]||(H_g[H_d]=new H_gb);H_h.cloneTo(H_j),H_e.data[H_d]=H_j.elements}else if(H_h instanceof laya.d3.math.Vector4){var H_k=H_g[H_d]||(H_g[H_d]=new H_hb);H_h.cloneTo(H_k),H_e.data[H_d]=H_k.elements}else if(H_h instanceof laya.d3.math.Matrix4x4){var H_l=H_g[H_d]||(H_g[H_d]=new H_ab);H_h.cloneTo(H_l),H_e.data[H_d]=H_l.elements}else H_h instanceof laya.d3.resource.BaseTexture&&(H_g[H_d]=H_h,H_e.data[H_d]=H_h)}},H_b.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_q(0,H_b,"alphaTestValue",function(){return this._getNumber(0)},function(H_a){this._setNumber(0,H_a)}),H_q(0,H_b,"alphaTest",function(){return this._alphaTest},function(H_a){(this._alphaTest=H_a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),H_a.__init__=function(){H_a.SHADERDEFINE_ALPHATEST=H_a.shaderDefines.registerDefine("ALPHATEST")},H_a.RENDERQUEUE_OPAQUE=2e3,H_a.RENDERQUEUE_ALPHATEST=2450,H_a.RENDERQUEUE_TRANSPARENT=3e3,H_a.CULL_NONE=0,H_a.CULL_FRONT=1,H_a.CULL_BACK=2,H_a.BLEND_DISABLE=0,H_a.BLEND_ENABLE_ALL=1,H_a.BLEND_ENABLE_SEPERATE=2,H_a.BLENDPARAM_ZERO=0,H_a.BLENDPARAM_ONE=1,H_a.BLENDPARAM_SRC_COLOR=768,H_a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,H_a.BLENDPARAM_DST_COLOR=774,H_a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,H_a.BLENDPARAM_SRC_ALPHA=770,H_a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,H_a.BLENDPARAM_DST_ALPHA=772,H_a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,H_a.BLENDPARAM_SRC_ALPHA_SATURATE=776,H_a.BLENDEQUATION_ADD=0,H_a.BLENDEQUATION_SUBTRACT=1,H_a.BLENDEQUATION_REVERSE_SUBTRACT=2,H_a.DEPTHTEST_OFF=0,H_a.DEPTHTEST_NEVER=512,H_a.DEPTHTEST_LESS=513,H_a.DEPTHTEST_EQUAL=514,H_a.DEPTHTEST_LEQUAL=515,H_a.DEPTHTEST_GREATER=516,H_a.DEPTHTEST_NOTEQUAL=517,H_a.DEPTHTEST_GEQUAL=518,H_a.DEPTHTEST_ALWAYS=519,H_a.SHADERDEFINE_ALPHATEST=1,H_a.ALPHATESTVALUE=0,H_l(H_a,["shaderDefines",function(){return this.shaderDefines=new H_kb}]),H_a}(H_s),H_Fb=function(H_a){function H_b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,H_b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}H_n(H_b,"laya.d3.resource.BaseTexture",H_s);var H_c=H_b.prototype;return H_q(0,H_c,"width",function(){return this._width}),H_q(0,H_c,"repeat",function(){return this._repeat},function(H_a){if(this._repeat!==H_a&&(this._repeat=H_a,this._source)){var H_b=H_F.mainContext;H_G.bindTexture(H_b,this._type,this._source),H_w.isPOT(this._width,this._height)&&this._repeat?(H_b.texParameteri(this._type,10242,10497),H_b.texParameteri(this._type,10243,10497)):(H_b.texParameteri(this._type,10242,33071),H_b.texParameteri(this._type,10243,33071))}}),H_q(0,H_c,"height",function(){return this._height}),H_q(0,H_c,"magFifter",function(){return this._magFifter},function(H_a){(this._magFifter=H_a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(H_a)}),H_q(0,H_c,"wrapModeV",function(){return this._wrapModeV}),H_q(0,H_c,"size",function(){return this._size}),H_q(0,H_c,"wrapModeU",function(){return this._wrapModeU}),H_q(0,H_c,"mipmap",function(){return this._mipmap},function(H_a){this._mipmap=H_a,this._mipmap!=H_a&&this._conchTexture&&this._conchTexture.setMipMap(H_a)}),H_q(0,H_c,"minFifter",function(){return this._minFifter},function(H_a){this._minFifter=H_a,this._minFifter!=H_a&&this._conchTexture&&this._conchTexture.setMinFifter(H_a)}),H_q(0,H_c,"format",function(){return this._format}),H_q(0,H_c,"source",function(){return this.activeResource(),this._source}),H_q(0,H_c,"defaulteTexture",function(){return H_Sb.grayTexture}),H_b.WARPMODE_REPEAT=0,H_b.WARPMODE_CLAMP=1,H_b}(),H_Gb=function(H_a){function H_b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,H_b.__super.call(this),this._boundingBoxCorners=H_d(8,null)}H_n(H_b,"laya.d3.resource.models.BaseMesh",H_s);var H_c=H_b.prototype;return H_c._getPositions=function(){throw new Error("未Override,请重载该属性！")},H_c._generateBoundingObject=function(){this._boundingSphere=new H__a(new H_gb,0),H__a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new H_Za(new H_gb,new H_gb),H_Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},H_c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},H_c.getRenderElement=function(H_a){throw new Error("未Override,请重载该属性！")},H_q(0,H_c,"subMeshCount",function(){return this._subMeshCount}),H_q(0,H_c,"boundingBox",function(){return this._boundingBox}),H_q(0,H_c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),H_q(0,H_c,"boundingSphere",function(){return this._boundingSphere}),H_b}(),H_Hb=(function(H_a){function H_b(){H_b.__super.call(this)}H_n(H_b,"laya.d3.component.Script",H_vb);var H_c=H_b.prototype;H_c.onTriggerEnter=function(H_a){},H_c.onTriggerExit=function(H_a){},H_c.onTriggerStay=function(H_a){},H_q(0,H_c,"isSingleton",function(){return H_b._isSingleton}),H_b._isSingleton=!1}(),function(H_a){function H_b(H_a){this._owner=null,this._sharedMesh=null,H_b.__super.call(this),this._owner=H_a}H_n(H_b,"laya.d3.core.MeshFilter",H_a);var H_c=H_b.prototype;return H_c._sharedMeshLoaded=function(){this.event("loaded")},H_c._destroy=function(){H_a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},H_q(0,H_c,"sharedMesh",function(){return this._sharedMesh},function(H_a){var H_b=this._sharedMesh;H_b&&H_b._removeReference(),(this._sharedMesh=H_a)._addReference(),this.event("meshchanged",[this,H_b,H_a]),H_a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),H_q(0,H_c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),H_q(0,H_c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),H_q(0,H_c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),H_q(0,H_c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),H_b}(H_wb)),H_Ib=function(H_a){function H_b(H_a){H_b.__super.call(this,H_a),H_a.meshFilter.on("meshchanged",this,this._onMeshChanged)}H_n(H_b,"laya.d3.core.MeshRender",H_xb);var H_c=H_b.prototype;return H_c._onMeshChanged=function(H_a,H_b,H_c){H_c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:H_c.once("loaded",this,this._onMeshLoaed)},H_c._onMeshLoaed=function(H_a,H_b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},H_c._calculateBoundingSphereByInitSphere=function(H_a){var H_b=NaN,H_c=this._owner.transform,H_d=H_c.scale.elements,H_e=Math.abs(H_d[0]),H_f=Math.abs(H_d[1]),H_g=Math.abs(H_d[2]);H_b=H_f<=H_e&&H_g<=H_e?H_e:H_g<=H_f?H_f:H_g,H_gb.transformCoordinate(H_a.center,H_c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=H_a.radius*H_b},H_c._calculateBoundBoxByInitCorners=function(H_a){for(var H_b=this._owner.transform.worldMatrix,H_c=0;H_c<8;H_c++)H_gb.transformCoordinate(H_a[H_c],H_b,H_xb._tempBoundBoxCorners[H_c]);H_Za.createfromPoints(H_xb._tempBoundBoxCorners,this._boundingBox)},H_c._calculateBoundingSphere=function(){var H_a=this._owner.meshFilter.sharedMesh;null==H_a||null==H_a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(H_a.boundingSphere)},H_c._calculateBoundingBox=function(){var H_a=this._owner.meshFilter.sharedMesh;null==H_a||null==H_a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(H_a.boundingBoxCorners)},H_c._renderUpdate=function(H_a){var H_b=this._owner.transform;if(H_b){this._setShaderValueMatrix4x4(0,H_b.worldMatrix);var H_c=this._owner.getProjectionViewWorldMatrix(H_a);this._setShaderValueMatrix4x4(1,H_c)}else this._setShaderValueMatrix4x4(0,H_ab.DEFAULT),this._setShaderValueMatrix4x4(1,H_a);return H_tb.debugMode&&this._renderRenderableBoundBox(),!0},H_b}(),H_Jb=function(H_b){function H_d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,H_d.__super.call(this),this._renderState=new H_Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new H_mb,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new H_ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new H_gb(.7,.7,.7),this.ambientColor=new H_gb(.212,.227,.259),H_F.shaderHighPrecision&&this.addShaderDefine(H_Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}H_n(H_d,"laya.d3.core.scene.Scene",H_b);var H_a=H_d.prototype;return H_x.imps(H_a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),H_a._setUrl=function(H_a){this._url=H_a},H_a._getGroup=function(){return this._group},H_a._setGroup=function(H_a){this._group=H_a},H_a._display=function(){H_x.stage._scenes.push(this),H_x.stage._scenes.sort(H_d._sortScenes);for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++){var H_c=this._childs[H_a];H_c.active&&H_c._activeHierarchy()}},H_a._unDisplay=function(){var H_a=H_x.stage._scenes;H_a.splice(H_a.indexOf(this),1);for(var H_b=0,H_c=this._childs.length;H_b<H_c;H_b++){var H_d=this._childs[H_b];H_d.active&&H_d._inActiveHierarchy()}},H_a._addChild3D=function(H_a){H_a.transform._onWorldTransform(),H_a._setBelongScene(this),this.displayedInStage&&H_a.active&&H_a._activeHierarchy()},H_a._removeChild3D=function(H_a){H_a.transform.parent=null,this.displayedInStage&&H_a.active&&H_a._inActiveHierarchy(),H_a._setUnBelongScene()},H_a.initOctree=function(H_a,H_b,H_c,H_d,H_e){void 0===H_e&&(H_e=6),this.treeSize=new H_gb(H_a,H_b,H_c),this.treeLevel=H_e,this.treeRoot=new H_Z(this,0),this.treeRoot.init(H_d,this.treeSize)},H_a._prepareUpdateToRenderState=function(H_a,H_b){H_b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,H_b.scene=this},H_a._prepareSceneToRender=function(H_a){var H_b=this._lights.length;if(0<H_b)for(var H_c=0,H_d=0;H_d<H_b&&!(this._lights[H_d]._prepareToScene(H_a)&&++H_c>=this._enableLightCount);H_d++);},H_a._updateChilds=function(H_a){for(var H_b=0,H_c=this._childs.length;H_b<H_c;++H_b)this._childs[H_b]._update(H_a)},H_a._preRenderScene=function(H_a,H_b,H_c){var H_d,H_e=H_b._viewMatrix,H_f=H_b._projectionMatrix,H_g=H_b._projectionViewMatrix,H_h=0,H_i=H_b.camera;for(H_i.useOcclusionCulling?this.treeRoot?H_ca.renderObjectCullingOctree(H_c,this,H_i,H_e,H_f,H_g):H_ca.renderObjectCulling(H_c,this,H_i,H_e,H_f,H_g):H_ca.renderObjectCullingNoBoundFrustum(this,H_i,H_e,H_f,H_g),H_h=0,H_d=this._quenes.length;H_h<H_d;H_h++)this._quenes[H_h]&&this._quenes[H_h]._preRender(H_b)},H_a._clear=function(H_a,H_b){var H_c=H_b._viewport,H_d=H_b.camera,H_e=H_c.x,H_f=H_d.renderTargetSize.height-H_c.y-H_c.height,H_g=H_c.width,H_h=H_c.height;H_a.viewport(H_e,H_f,H_g,H_h);var H_i=256,H_j=H_d.renderTarget;switch(H_d.clearFlag){case 0:var H_k=H_d.clearColor;if(H_k){H_a.enable(3089),H_a.scissor(H_e,H_f,H_g,H_h);var H_l=H_k.elements;H_a.clearColor(H_l[0],H_l[1],H_l[2],H_l[3]),H_i|=16384}if(H_j)switch(H_k||(H_i=16384),H_j.depthStencilFormat){case 33189:H_i|=256;break;case 36168:H_i|=1024;break;case 34041:H_i|=256,H_i|=1024}H_a.clear(H_i),H_k&&H_a.disable(3089);break;case 1:case 2:if(H_j)switch(H_i=16384,H_j.depthStencilFormat){case 33189:H_i|=256;break;case 36168:H_i|=1024;break;case 34041:H_i|=256,H_i|=1024}H_a.clear(H_i);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},H_a._renderScene=function(H_a,H_b){var H_c,H_d,H_e=H_b.camera,H_f=0;for(H_f=0;H_f<2;H_f++)(H_d=this._quenes[H_f])&&(H_e.renderTarget?H_d._render(H_b,!0):H_d._render(H_b,!1));if(1===H_e.clearFlag){var H_g=H_e.sky;H_g&&(H_G.setCullFace(H_a,!1),H_G.setDepthFunc(H_a,515),H_G.setDepthMask(H_a,!1),H_g._render(H_b),H_G.setDepthFunc(H_a,513),H_G.setDepthMask(H_a,!0))}for(H_f=2,H_c=this._quenes.length;H_f<H_c;H_f++)(H_d=this._quenes[H_f])&&(H_d._sortAlpha(H_b.camera.transform.position),H_e.renderTarget?H_d._render(H_b,!0):H_d._render(H_b,!1))},H_a._set3DRenderConfig=function(H_a){H_a.disable(3042),H_G._blend=!1,H_a.blendFunc(770,771),H_G._sFactor=770,H_G._dFactor=771,H_a.disable(2929),H_G._depthTest=!1,H_a.enable(2884),H_G._cullFace=!0,H_a.depthMask(1),H_G._depthMask=!0,H_a.frontFace(2304),H_G._frontFace=2304},H_a._set2DRenderConfig=function(H_a){H_G.setBlend(H_a,!0),H_G.setBlendFunc(H_a,1,771),H_G.setDepthTest(H_a,!1),H_G.setCullFace(H_a,!1),H_G.setDepthMask(H_a,!0),H_G.setFrontFace(H_a,2305),H_a.viewport(0,0,H_k.width,H_k.height)},H_a._parseCustomProps=function(H_a,H_b,H_c,H_d){var H_e=H_d.customProps.lightmaps,H_f=H_e.length,H_g=this._lightmaps;H_g.length=H_f;for(var H_h=0;H_h<H_f;H_h++)H_g[H_h]=H_t.getRes(H_b[H_e[H_h].replace(".exr",".png")]);this.setlightmaps(H_g);var H_i=H_d.customProps.ambientColor;H_i&&(this.ambientColor=new H_gb(H_i[0],H_i[1],H_i[2]));var H_j=H_d.customProps.fogColor;H_j&&(this.fogColor=new H_gb(H_j[0],H_j[1],H_j[2]))},H_a._addLight=function(H_a){this._lights.indexOf(H_a)<0&&this._lights.push(H_a)},H_a._removeLight=function(H_a){var H_b=this._lights.indexOf(H_a);0<=H_b&&this._lights.splice(H_b,1)},H_a._updateScene=function(){var H_a=this._renderState;this._prepareUpdateToRenderState(H_F.mainContext,H_a),this._updateComponents(H_a),this._updateChilds(H_a),this._lateUpdateComponents(H_a),this._time+=H_a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},H_a._updateSceneConch=function(){var H_a=this._renderState;this._prepareUpdateToRenderState(H_F.mainContext,H_a),this._updateComponents(H_a),this._lateUpdateComponents(H_a),this._prepareSceneToRender(H_a);for(var H_b=0,H_c=this._cameraPool.length;H_b<H_c;H_b++){var H_d=this._cameraPool[H_b];(H_a.camera=H_d)._prepareCameraToRender()}},H_a._preRenderShadow=function(H_a,H_b,H_c,H_d,H_e){this.treeRoot?H_ca.renderShadowObjectCullingOctree(this,H_b,H_c,H_d,H_e):H_ca.renderShadowObjectCulling(this,H_b,H_c,H_d,H_e);for(var H_f=0,H_g=H_c.length;H_f<H_g;H_f++)H_c[H_f]&&H_c[H_f]._preRender(H_a)},H_a._renderShadowMap=function(H_a,H_b,H_c){var H_d=this.parallelSplitShadowMaps[0];H_d._calcAllLightCameraInfo(H_c);var H_e,H_f,H_g,H_h=H_d.PSSMNum;if(this._preRenderShadow(H_b,H_d._lightCulling,H_d._shadowQuenes,H_d._lightVPMatrix[0],H_h),this.addShaderDefine(H_nb.SHADERDEFINE_CAST_SHADOW),1<H_h)for(var H_i=0;H_i<H_h;H_i++)H_e=H_d.getRenderTarget(H_i+1),H_d.beginRenderTarget(H_i+1),H_a.clearColor(1,1,1,1),H_a.clear(16640),H_a.viewport(0,0,H_e.width,H_e.height),H_b.camera=H_g=H_d.getLightCamera(H_i),H_g._prepareCameraToRender(),H_g._prepareCameraViewProject(H_g.viewMatrix,H_g.projectionMatrix),H_b._projectionViewMatrix=H_d._lightVPMatrix[H_i+1],(H_f=H_d._shadowQuenes[H_i])._preRender(H_b),H_f._renderShadow(H_b,!1),H_d.endRenderTarget(H_i+1);else H_e=H_d.getRenderTarget(1),H_d.beginRenderTarget(1),H_a.clearColor(1,1,1,1),H_a.clear(16640),H_a.viewport(0,0,H_e.width,H_e.height),H_b.camera=H_g=H_d.getLightCamera(0),H_g._prepareCameraToRender(),H_g._prepareCameraViewProject(H_g.viewMatrix,H_g.projectionMatrix),H_b._projectionViewMatrix=H_d._lightVPMatrix[0],(H_f=H_d._shadowQuenes[0])._preRender(H_b),H_f._renderShadow(H_b,!0),H_d.endRenderTarget(1);this.removeShaderDefine(H_nb.SHADERDEFINE_CAST_SHADOW)},H_a.addTreeNode=function(H_a){this.treeRoot.addTreeNode(H_a)},H_a.removeTreeNode=function(H_a){this.treeSize&&H_a._treeNode&&H_a._treeNode.removeObject(H_a)},H_a.setlightmaps=function(H_a){this._lightmaps=H_a;for(var H_b=0,H_c=this._renderableSprite3Ds.length;H_b<H_c;H_b++)this._renderableSprite3Ds[H_b]._render._applyLightMapParams()},H_a.getlightmaps=function(){return this._lightmaps},H_a.addChildAt=function(H_a,H_b){if(!(H_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(H_a&&H_a.__className));if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),0<=H_b&&H_b<=this._childs.length){if(H_a._parent===this){var H_c=this.getChildIndex(H_a);this._childs.splice(H_c,1),this._childs.splice(H_b,0,H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,H_b)),this._childChanged()}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H_b,0,H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,H_b),(H_a.parent=this)._addChild3D(H_a);return H_a}throw new Error("appendChildAt:The index is out of bounds")},H_a.addChild=function(H_a){if(!(H_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),H_a._parent===this){var H_b=this.getChildIndex(H_a);H_b!==this._childs.length-1&&(this._childs.splice(H_b,1),this._childs.push(H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1)),this._childChanged())}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1),(H_a.parent=this)._childChanged(),this._addChild3D(H_a);return H_a},H_a.removeChildAt=function(H_a){var H_b=this.getChildAt(H_a);return H_b&&(this._removeChild3D(H_b),this._childs.splice(H_a,1),this.conchModel&&this.conchModel.removeChild(H_b.conchModel),H_b.parent=null),H_b},H_a.removeChildren=function(H_a,H_b){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=2147483647),this._childs&&0<this._childs.length){var H_c=this._childs;if(0===H_a&&H_f<=H_b){var H_d=H_c;this._childs=H_j.ARRAY_EMPTY}else H_d=H_c.splice(H_a,H_b-H_a);for(var H_e=0,H_f=H_d.length;H_e<H_f;H_e++)this._removeChild3D(H_d[H_e]),H_d[H_e].parent=null,this.conchModel&&this.conchModel.removeChild(H_d[H_e].conchModel)}return this},H_a.addFrustumCullingObject=function(H_a){this.treeRoot?this.addTreeNode(H_a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(H_a):this._cullingRenders[this._cullingRendersLength]=H_a,H_a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},H_a.removeFrustumCullingObject=function(H_a){if(this.treeRoot)this.removeTreeNode(H_a);else{this._cullingRendersLength--;var H_b=H_a._indexInSceneFrustumCullingObjects;if(H_b!==this._cullingRendersLength){var H_c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[H_b]=H_c)._indexInSceneFrustumCullingObjects=H_b,H_a._indexInSceneFrustumCullingObjects=-1}}},H_a.getRenderQueue=function(H_a){return H_a<3e3?this._quenes[1]||(this._quenes[1]=new H_X(this)):this._quenes[2]||(this._quenes[2]=new H_X(this))},H_a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new H_X(this)},H_a.addShaderDefine=function(H_a){this._shaderDefineValue|=H_a},H_a.removeShaderDefine=function(H_a){this._shaderDefineValue&=~H_a},H_a.addScript=function(H_a){return this._addComponent(H_a)},H_a.getScriptByType=function(H_a,H_b){return void 0===H_b&&(H_b=0),this._getComponentByType(H_a,H_b)},H_a.getScriptsByType=function(H_a,H_b){this._getComponentsByType(H_a,H_b)},H_a.getScriptByIndex=function(H_a){return this._getComponentByIndex(H_a)},H_a.removeScriptByType=function(H_a,H_b){void 0===H_b&&(H_b=0),this._removeComponentByType(H_a,H_b)},H_a.removeScriptsByType=function(H_a){this._removeComponentByType(H_a)},H_a.removeAllScript=function(){this._removeAllComponent()},H_a.render=function(H_a,H_b,H_c){(H_r._context.ctx._renderKey=0)<this._childs.length&&H_a.addRenderObject(this)},H_a.renderSubmit=function(){var H_a=H_F.mainContext,H_b=this._renderState;this._set3DRenderConfig(H_a),this._prepareSceneToRender(this._renderState);var H_c,H_d=0,H_e=0;if(H_tb.debugMode||H_Z.debugMode)for(H_d=0,H_e=this._cameraPool.length;H_d<H_e;H_d++)H_c=this._cameraPool[H_d],H_tb._debugPhasorSprite.begin(1,H_c),H_c.activeInHierarchy&&H_c._renderCamera(H_a,H_b,this),H_tb._debugPhasorSprite.end();else for(H_d=0,H_e=this._cameraPool.length;H_d<H_e;H_d++)(H_c=this._cameraPool[H_d]).activeInHierarchy&&H_c._renderCamera(H_a,H_b,this);return this._set2DRenderConfig(H_a),1},H_a.onAsynLoaded=function(H_a,H_b,H_c){var H_d=H_b[0];if("Scene"!==H_d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var H_e=H_b[1];H_sb._createNodeByJson(this,H_d,this,H_e),this.event("hierarchyloaded",[this]),this.__loaded=!0},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),this.destroyed||(H_b.prototype.destroy.call(this,H_a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,H_t.clearRes(this.url),this.loaded||H_tb._cancelLoadByUrl(this.url))},H_a.getRenderType=function(){return 0},H_a.releaseRender=function(){},H_a._addComponent=function(H_a){var H_b,H_c=this._componentsMap.indexOf(H_a);if(-1===H_c)H_b=[],this._componentsMap.push(H_a),this._typeComponentsIndices.push(H_b);else if(H_b=this._typeComponentsIndices[H_c],this._components[H_b[0]].isSingleton)throw new Error("无法单实例创建"+H_a+"组件，"+H_a+"组件已存在！");var H_d=H_e.getInstance(H_a);H_b.push(this._components.length),this._components.push(H_d);return H_d._initialize(this),H_d},H_a._removeComponent=function(H_a,H_b){var H_c=this._typeComponentsIndices[H_a],H_d=H_c[H_b],H_e=this._components[H_d];this._components.splice(H_d,1),H_c.splice(H_b,1),0===H_c.length&&(this._typeComponentsIndices.splice(H_a,1),this._componentsMap.splice(H_a,1));for(var H_f=0,H_g=this._componentsMap.length;H_f<H_g;H_f++)for(var H_h=(H_c=this._typeComponentsIndices[H_f]).length-1;0<=H_h;H_h--){var H_i=H_c[H_h];if(!(H_d<H_i))break;H_c[H_h]=--H_i}H_e._destroy()},H_a._getComponentByType=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c=this._componentsMap.indexOf(H_a);return-1===H_c?null:this._components[this._typeComponentsIndices[H_c][H_b]]},H_a._getComponentsByType=function(H_a,H_b){var H_c=this._componentsMap.indexOf(H_a);if(-1!==H_c){var H_d=this._typeComponentsIndices[H_c],H_e=H_d.length;H_b.length=H_e;for(var H_f=0;H_f<H_e;H_f++)H_b[H_f]=this._components[H_d[H_f]]}else H_b.length=0},H_a._getComponentByIndex=function(H_a){return this._components[H_a]},H_a._removeComponentByType=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c=this._componentsMap.indexOf(H_a);-1!==H_c&&this._removeComponent(H_c,H_b)},H_a._removeComponentsByType=function(H_a){var H_b=this._componentsMap.indexOf(H_a);if(-1!==H_b)for(var H_c=this._typeComponentsIndices[H_b],H_d=0,H_e=H_c.length;H_d<H_e;H_c.length<H_e?H_e--:H_d++)this._removeComponent(H_b,H_d)},H_a._removeAllComponent=function(){for(var H_a=0,H_b=this._componentsMap.length;H_a<H_b;this._componentsMap.length<H_b?H_b--:H_a++)this._removeComponentsByType(this._componentsMap[H_a])},H_a._updateComponents=function(H_a){for(var H_b=0,H_c=this._components.length;H_b<H_c;H_b++){var H_d=this._components[H_b];!H_d.started&&(H_d._start(H_a),H_d.started=!0),H_d.enable&&H_d._update(H_a)}},H_a._lateUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._lateUpdate(H_a)}},H_a._preRenderUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._preRenderUpdate(H_a)}},H_a._postRenderUpdateComponents=function(H_a){for(var H_b=0;H_b<this._components.length;H_b++){var H_c=this._components[H_b];!H_c.started&&(H_c._start(H_a),H_c.started=!0),H_c.enable&&H_c._postRenderUpdate(H_a)}},H_q(0,H_a,"_loaded",null,function(H_a){this.__loaded=H_a}),H_q(0,H_a,"fogColor",function(){return this._fogColor},function(H_a){this._fogColor=H_a,this._shaderValues.setValue(0,H_a.elements)}),H_q(0,H_a,"enableFog",function(){return this._enableFog},function(H_a){this._enableFog!==H_a&&((this._enableFog=H_a)?(this.addShaderDefine(H_Ab.SHADERDEFINE_FOG),this.removeShaderDefine(H_Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(H_Ab.SHADERDEFINE_FOG))}),H_q(0,H_a,"url",function(){return this._url}),H_q(0,H_a,"loaded",function(){return this.__loaded}),H_q(0,H_a,"enableDepthFog",function(){return this._enableDepthFog},function(H_a){this._enableDepthFog!=H_a&&((this._enableDepthFog=H_a)?(this.addShaderDefine(H_Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(H_Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(H_Ab.SAHDERDEFINE_DEPTHFOG))}),H_q(0,H_a,"fogStart",function(){return this._fogStart},function(H_a){this._fogStart=H_a,this._shaderValues.setValue(1,H_a)}),H_q(0,H_a,"fogRange",function(){return this._fogRange},function(H_a){this._fogRange=H_a,this._shaderValues.setValue(2,H_a)}),H_q(0,H_a,"ambientColor",function(){return this._ambientColor},function(H_a){this._ambientColor=H_a,this._shaderValues.setValue(21,H_a.elements)}),H_q(0,H_a,"scene",function(){return this}),H_q(0,H_a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),H_d._sortScenes=function(H_a,H_b){if(H_a.parent!==H_x.stage||H_b.parent!==H_x.stage)return H_a.parent!==H_x.stage&&H_b.parent!==H_x.stage?H_d._sortScenes(H_a.parent,H_b.parent):H_a.parent===H_x.stage?-1:1;var H_c=H_x.stage._childs;return H_c.indexOf(H_a)-H_c.indexOf(H_b)},H_d.load=function(H_a){return H_x.loader.create(H_a,null,null,H_d)},H_d.FOGCOLOR=0,H_d.FOGSTART=1,H_d.FOGRANGE=2,H_d.LIGHTDIRECTION=3,H_d.LIGHTDIRCOLOR=4,H_d.POINTLIGHTPOS=5,H_d.POINTLIGHTRANGE=6,H_d.POINTLIGHTATTENUATION=7,H_d.POINTLIGHTCOLOR=8,H_d.SPOTLIGHTPOS=9,H_d.SPOTLIGHTDIRECTION=10,H_d.SPOTLIGHTSPOT=11,H_d.SPOTLIGHTRANGE=12,H_d.SPOTLIGHTATTENUATION=13,H_d.SPOTLIGHTCOLOR=14,H_d.SHADOWDISTANCE=15,H_d.SHADOWLIGHTVIEWPROJECT=16,H_d.SHADOWMAPPCFOFFSET=17,H_d.SHADOWMAPTEXTURE1=18,H_d.SHADOWMAPTEXTURE2=19,H_d.SHADOWMAPTEXTURE3=20,H_d.AMBIENTCOLOR=21,H_d.TIME=22,H_d}(H_z),H_Kb=function(H_a){function H_b(H_a){H_b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new H_ab,this._shaderValues=new H_mb,this._colliders=[],this._id=++H_b._uniqueIDCounter,this._transform=new H_yb(this),this.name=H_a||"Sprite3D-"+H_b._nameNumberCounter++,this.layer=H_I.currentCreationLayer,this.active=!0}H_n(H_b,"laya.d3.core.Sprite3D",H_Db);var H_c=H_b.prototype;return H_x.imps(H_c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),H_c._setUrl=function(H_a){this._url=H_a},H_c._getGroup=function(){return this._group},H_c._setGroup=function(H_a){this._group=H_a},H_c._addChild3D=function(H_a){H_a.transform.parent=this.transform,this._hierarchyAnimator&&(!H_a._hierarchyAnimator&&H_a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H_a,!0,[H_a.name])),this._scene&&(H_a._setBelongScene(this._scene),this._activeInHierarchy&&H_a._active&&H_a._activeHierarchy())},H_c._removeChild3D=function(H_a){H_a.transform.parent=null,this._scene&&(this._activeInHierarchy&&H_a._active&&H_a._inActiveHierarchy(),H_a._setUnBelongScene()),this._hierarchyAnimator&&(H_a._hierarchyAnimator==this._hierarchyAnimator&&H_a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H_a,!1,[H_a.name]))},H_c._parseBaseCustomProps=function(H_a){var H_b=this.transform.localPosition;H_a.translate?(H_b.fromArray(H_a.translate),H_b.x*=100,H_b.y*=100,H_b.z*=100):H_b.elements.fill(0),this.transform.localPosition=H_b;var H_c=this.transform.localRotation;H_a.rotation?H_c.fromArray(H_a.rotation):H_c.fromArray([0,0,0,-1]),this.transform.localRotation=H_c;var H_d=this.transform.localScale;H_a.scale?H_d.fromArray(H_a.scale):H_d.elements.fill(1),this.transform.localScale=H_d;var H_e=H_a.layer;null!=H_e&&(this.layer=H_I.getLayerByNumber(H_e))},H_c._parseCustomComponent=function(H_a,H_b,H_c){for(var H_d in H_c){var H_e=H_c[H_d];switch(H_d){case"Animator":var H_f=this.addComponent(Animator);if(H_e.avatarPath)H_f.avatar=H_t.getRes(H_b[H_e.avatarPath]);else{var H_g=H_e.avatar;if(H_g){H_f.avatar=H_t.getRes(H_b[H_g.path]);var H_h=H_g.linkSprites;H_h&&H_a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[H_f,H_h])}}for(var H_i=H_e.clipPaths,H_j=H_i.length,H_k=0;H_k<H_j;H_k++)H_f.addClip(H_t.getRes(H_b[H_i[H_k]]));H_f.clip=H_t.getRes(H_b[H_i[0]]);var H_l=H_e.playOnWake;void 0!==H_l&&(H_f.playOnWake=H_l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var H_m=this.addComponent(SphereCollider);H_m.isTrigger=H_e.isTrigger;var H_n=H_m.center;H_n.fromArray(H_e.center),H_m.center=H_n,H_m.radius=H_e.radius;break;case"BoxCollider":var H_q=this.addComponent(BoxCollider);H_q.isTrigger=H_e.isTrigger,H_q.center.fromArray(H_e.center);var H_r=H_q.size;H_r.fromArray(H_e.size),H_q.size=H_r;break;case"MeshCollider":this.addComponent(MeshCollider)}}},H_c._onRootNodeHierarchyLoaded=function(H_a,H_b){for(var H_c in H_b){for(var H_d=this,H_e=H_b[H_c],H_f=0,H_g=H_e.length;H_f<H_g;H_f++){var H_h=H_e[H_f];if(""===H_h)break;if(!(H_d=H_d.getChildByName(H_h)))break}H_d&&H_a.linkSprite3DToAvatarNode(H_c,H_d)}},H_c._setHierarchyAnimator=function(H_a,H_b){this._changeHierarchyAnimator(H_a);for(var H_c=0,H_d=this._childs.length;H_c<H_d;H_c++){var H_e=this._childs[H_c];H_e._hierarchyAnimator==H_b&&H_e._setHierarchyAnimator(H_a,H_b)}},H_c._clearHierarchyAnimator=function(H_a,H_b){this._changeHierarchyAnimator(H_b);for(var H_c=0,H_d=this._childs.length;H_c<H_d;H_c++){var H_e=this._childs[H_c];H_e._hierarchyAnimator==H_a&&H_e._clearHierarchyAnimator(H_a,H_b)}},H_c._getAnimatorToLinkSprite3D=function(H_a,H_b,H_c){var H_d=this.getComponentByType(Animator);if(H_d&&(H_d.avatar?H_d.avatar._version||H_a._setAnimatorToLinkAvatar(H_d,H_b):H_a._setAnimatorToLinkSprite3DNoAvatar(H_d,H_b,H_c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){H_c.unshift(this._parent.name);var H_e=this._parent;H_e._hierarchyAnimator&&H_e._getAnimatorToLinkSprite3D(H_a,H_b,H_c)}},H_c._setAnimatorToLinkSprite3DNoAvatar=function(H_a,H_b,H_c){var H_d=0,H_e=0;for(H_d=0,H_e=H_a.getClipCount();H_d<H_e;H_d++)H_a._handleSpriteOwnersBySprite(H_d,H_b,H_c,this);for(H_d=0,H_e=this._childs.length;H_d<H_e;H_d++){var H_f=this._childs[H_d],H_g=H_c.length;H_c.push(H_f.name),H_f._setAnimatorToLinkSprite3DNoAvatar(H_a,H_b,H_c),H_c.splice(H_g,1)}},H_c._changeHierarchyAnimator=function(H_a){this._hierarchyAnimator=H_a},H_c._isLinkSpriteToAnimationNode=function(H_a,H_b,H_c){var H_d=H_a._avatarNodes.indexOf(H_b),H_e=H_a._cacheSpriteToNodesMap;if(H_c)this._transform.dummy=H_b.transform,H_a._cacheNodesToSpriteMap[H_d]=H_e.length,H_e.push(H_d);else{this._transform.dummy=null;var H_f=H_a._cacheNodesToSpriteMap[H_d];H_a._cacheNodesToSpriteMap[H_d]=null,H_e.splice(H_f,1)}},H_c._setBelongScene=function(H_a){this._scene=H_a;for(var H_b=0,H_c=this._childs.length;H_b<H_c;H_b++)this._childs[H_b]._setBelongScene(H_a)},H_c._setUnBelongScene=function(){this._scene=null;for(var H_a=0,H_b=this._childs.length;H_a<H_b;H_a++)this._childs[H_a]._setUnBelongScene()},H_c._activeHierarchy=function(){var H_a=0,H_b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),H_a=0,H_b=this._colliders.length;H_a<H_b;H_a++)this._layer._addCollider(this._colliders[H_a]);for(this.event("activeinhierarchychanged",!0),H_a=0,H_b=this._childs.length;H_a<H_b;H_a++){var H_c=this._childs[H_a];H_c._active&&H_c._activeHierarchy()}},H_c._inActiveHierarchy=function(){var H_a=0,H_b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),H_a=0,H_b=this._colliders.length;H_a<H_b;H_a++){var H_c=this._colliders[H_a];H_c._clearCollsionMap(),this._layer._removeCollider(H_c)}for(this.event("activeinhierarchychanged",!1),H_a=0,H_b=this._childs.length;H_a<H_b;H_a++){var H_d=this._childs[H_a];H_d._active&&H_d._inActiveHierarchy()}},H_c.addComponent=function(H_a){var H_b,H_c=this._componentsMap.indexOf(H_a);if(-1===H_c)H_b=[],this._componentsMap.push(H_a),this._typeComponentsIndices.push(H_b);else if(H_b=this._typeComponentsIndices[H_c],this._components[H_b[0]].isSingleton)throw new Error("无法单实例创建"+H_a+"组件，"+H_a+"组件已存在！");var H_d=H_e.getInstance(H_a);return H_b.push(this._components.length),this._components.push(H_d),H_d instanceof laya.d3.component.Script&&this._scripts.push(H_d),H_d._initialize(this),H_d},H_c._removeComponent=function(H_a,H_b){var H_c,H_d=0,H_e=this._typeComponentsIndices[H_a],H_f=H_e[H_b],H_g=this._components[H_f];for(H_g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H_g),1),H_e.splice(H_b,1),0===H_e.length&&(this._typeComponentsIndices.splice(H_a,1),this._componentsMap.splice(H_a,1)),H_d=0,H_c=this._componentsMap.length;H_d<H_c;H_d++)for(var H_h=(H_e=this._typeComponentsIndices[H_d]).length-1;0<=H_h;H_h--){var H_i=H_e[H_h];if(!(H_f<H_i))break;H_e[H_h]=--H_i}H_g._destroy()},H_c._clearSelfRenderObjects=function(){},H_c._addSelfRenderObjects=function(){},H_c._parseCustomProps=function(H_a,H_b,H_c,H_d){},H_c._updateChilds=function(H_a){var H_b=this._childs.length;if(0!==H_b)for(var H_c=0;H_c<H_b;++H_c)this._childs[H_c]._update(H_a)},H_c._getSortID=function(H_a,H_b){return 1e3*H_b.id+H_a._getVertexBuffer().vertexDeclaration.id},H_c._update=function(H_a){(H_a.owner=this)._activeInHierarchy&&(this._updateComponents(H_a),this._lateUpdateComponents(H_a),H_A.spriteCount++,this._childs.length&&this._updateChilds(H_a))},H_c.getProjectionViewWorldMatrix=function(H_a){return H_ab.multiply(H_a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},H_c.loadHierarchy=function(H_a){this.addChild(laya.d3.core.Sprite3D.load(H_a))},H_c.addChildAt=function(H_a,H_b){if(!(H_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),0<=H_b&&H_b<=this._childs.length){if(H_a._parent===this){var H_c=this.getChildIndex(H_a);this._childs.splice(H_c,1),this._childs.splice(H_b,0,H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,H_b)),this._childChanged()}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H_b,0,H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,H_b),(H_a.parent=this)._addChild3D(H_a);return H_a}throw new Error("appendChildAt:The index is out of bounds")},H_c.addChild=function(H_a){if(!(H_a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H_a||this.destroyed||H_a===this)return H_a;if(H_a.zOrder&&this._set$P("hasZorder",!0),H_a._parent===this){var H_b=this.getChildIndex(H_a);H_b!==this._childs.length-1&&(this._childs.splice(H_b,1),this._childs.push(H_a),this.conchModel&&(this.conchModel.removeChild(H_a.conchModel),this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1)),this._childChanged())}else H_a.parent&&H_a.parent.removeChild(H_a),this._childs===H_j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H_a),this.conchModel&&this.conchModel.addChildAt(H_a.conchModel,this._childs.length-1),(H_a.parent=this)._childChanged(),this._addChild3D(H_a);return H_a},H_c.removeChildAt=function(H_a){var H_b=this.getChildAt(H_a);return H_b&&(this._removeChild3D(H_b),this._childs.splice(H_a,1),this.conchModel&&this.conchModel.removeChild(H_b.conchModel),H_b.parent=null),H_b},H_c.removeChildren=function(H_a,H_b){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=2147483647),this._childs&&0<this._childs.length){var H_c=this._childs;if(0===H_a&&H_f<=H_b){var H_d=H_c;this._childs=H_j.ARRAY_EMPTY}else H_d=H_c.splice(H_a,H_b-H_a);for(var H_e=0,H_f=H_d.length;H_e<H_f;H_e++)this._removeChild3D(H_d[H_e]),H_d[H_e].parent=null,this.conchModel&&this.conchModel.removeChild(H_d[H_e].conchModel)}return this},H_c.onAsynLoaded=function(H_a,H_b,H_c){var H_d=H_b[0];if("Sprite3D"!==H_d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var H_e=H_b[1];H_sb._createNodeByJson(this,H_d,this,H_e),this.event("hierarchyloaded",[this]),this.__loaded=!0},H_c.cloneTo=function(H_a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var H_b=H_a;H_b.name=this.name,H_b._destroyed=this._destroyed,H_b.timer=this.timer,H_b._$P=this._$P,H_b.active=this._active;var H_c=H_b.transform.localPosition;this.transform.localPosition.cloneTo(H_c),H_b.transform.localPosition=H_c;var H_d=H_b.transform.localRotation;this.transform.localRotation.cloneTo(H_d),H_b.transform.localRotation=H_d;var H_e=H_b.transform.localScale;this.transform.localScale.cloneTo(H_e),H_b.transform.localScale=H_e,H_b.isStatic=this.isStatic;var H_f=0,H_g=0;for(H_f=0,H_g=this._componentsMap.length;H_f<H_g;H_f++){var H_h=H_b.addComponent(this._componentsMap[H_f]);this._components[H_f]._cloneTo(H_h)}for(H_f=0,H_g=this._childs.length;H_f<H_g;H_f++)H_b.addChild(this._childs[H_f].clone());var H_i=H_b.getComponentByType(Animator);if(H_i){var H_j=H_i._linkSpritesData;if(H_j)for(var H_k in H_j){for(var H_l=H_j[H_k],H_m=H_b,H_n=0,H_q=H_l.length;H_n<H_q&&(H_m=H_m.getChildByName(H_l[H_n]));H_n++);if(H_m){var H_r=H_i._avatarNodeMap[H_k];H_m._isLinkSpriteToAnimationNode(H_i,H_r,!0)}}}},H_c.clone=function(){var H_a=new this.constructor;return this.cloneTo(H_a),H_a},H_c.destroy=function(H_a){if(void 0===H_a&&(H_a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,H_a);var H_b,H_c=0;for(H_c=0,H_b=this._components.length;H_c<H_b;H_c++)this._components[H_c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,H_t.clearRes(this.url),this.loaded||H_tb._cancelLoadByUrl(this.url)}},H_c._handleSpriteToAvatar=function(H_a,H_b){H_a._avatarNodes;var H_c=H_a._avatarNodeMap[this.name];H_c&&H_c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(H_a,H_c,H_b)},H_c._setAnimatorToLinkAvatar=function(H_a,H_b){this._handleSpriteToAvatar(H_a,H_b);for(var H_c=0,H_d=this._childs.length;H_c<H_d;H_c++){this._childs[H_c]._setAnimatorToLinkAvatar(H_a,H_b)}},H_q(0,H_c,"activeInHierarchy",function(){return this._activeInHierarchy}),H_q(0,H_c,"_loaded",null,function(H_a){this.__loaded=H_a}),H_q(0,H_c,"active",function(){return this._active},function(H_a){this._active!==H_a&&(this._active=H_a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(H_a?this._activeHierarchy():this._inActiveHierarchy()))}),H_q(0,H_c,"componentsCount",function(){return this._components.length}),H_q(0,H_c,"loaded",function(){return this.__loaded}),H_q(0,H_c,"id",function(){return this._id}),H_q(0,H_c,"url",function(){return this._url}),H_q(0,H_c,"layer",function(){return this._layer},function(H_a){if(this._layer!==H_a){if(!H_a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var H_b=0,H_c=this._colliders.length;if(this._layer)for(H_b=0;H_b<H_c;H_b++)this._layer._removeCollider(this._colliders[H_b]);for(H_b=0;H_b<H_c;H_b++)H_a._addCollider(this._colliders[H_b])}this._layer=H_a,this.event("layerchanged",H_a)}}),H_q(0,H_c,"scene",function(){return this._scene}),H_q(0,H_c,"transform",function(){return this._transform}),H_b.instantiate=function(H_a,H_b,H_c,H_d,H_e){void 0===H_c&&(H_c=!0);var H_f=H_a.clone();H_b&&H_b.addChild(H_f);var H_g=H_f.transform;if(H_c){var H_h=H_g.worldMatrix;H_a.transform.worldMatrix.cloneTo(H_h),H_g.worldMatrix=H_h}else H_d&&(H_g.position=H_d),H_e&&(H_g.rotation=H_e);return H_f},H_b.load=function(H_a){return H_x.loader.create(H_a,null,null,H_b)},H_b.WORLDMATRIX=0,H_b.MVPMATRIX=1,H_b._uniqueIDCounter=0,H_b._nameNumberCounter=0,H_b}(),H_Lb=function(H_a){function H_k(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],H_k.__super.call(this),!H_a||!H_b)throw"Shader Error";this._id=++H_k._count,this._vs=H_a,this._ps=H_b,this._attributeMap=H_c,this._sceneUniformMap=H_d,this._cameraUniformMap=H_e,this._spriteUniformMap=H_f,this._materialUniformMap=H_g,this._renderElementUniformMap=H_h,this._precompile=H_i,this._define=H_j,this._precompile&&H_k.extCompileObj&&H_k.extCompileFunc?H_k.extCompileFunc.call(H_k.extCompileObj,H_a,H_b,H_j):this.recreateResource()}H_n(H_k,"laya.d3.shader.Shader3D",H_c);var H_b=H_k.prototype;return H_b.recreateResource=function(){H_H.now();this._compile(),this.completeCreate(),this.memorySize=0},H_b.disposeResource=function(){H_F.mainContext.deleteShader(this._vshader),H_F.mainContext.deleteShader(this._pshader),H_F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},H_b._compile=function(){if(!H_F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var H_a=[this._vs,this._ps],H_b=H_F.mainContext;if(this._program=H_b.createProgram(),this._vshader=H_k._createShader(H_b,H_a[0],35633),this._pshader=H_k._createShader(H_b,H_a[1],35632),H_b.attachShader(this._program,this._vshader),H_b.attachShader(this._program,this._pshader),H_b.linkProgram(this._program),!H_r.isConchApp&&H_Ab.debugMode&&!H_b.getProgramParameter(this._program,35714))throw H_b.getProgramInfoLog(this._program);var H_c,H_d=0,H_e=0,H_f=0;for(H_f=H_r.isConchApp?H_b.getProgramParameterEx(this._vs,this._ps,"",35721):H_b.getProgramParameter(this._program,35721),H_d=0;H_d<H_f;H_d++){var H_g=null;H_c={vartype:"attribute",ivartype:0,attrib:H_g=H_r.isConchApp?H_b.getActiveAttribEx(this._vs,this._ps,"",H_d):H_b.getActiveAttrib(this._program,H_d),location:H_b.getAttribLocation(this._program,H_g.name),name:H_g.name,type:H_g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(H_c)}var H_h=0;for(H_h=H_r.isConchApp?H_b.getProgramParameterEx(this._vs,this._ps,"",35718):H_b.getProgramParameter(this._program,35718),H_d=0;H_d<H_h;H_d++){var H_i=null;H_i=H_r.isConchApp?H_b.getActiveUniformEx(this._vs,this._ps,"",H_d):H_b.getActiveUniform(this._program,H_d),0<(H_c={vartype:"uniform",ivartype:1,attrib:H_g,location:H_b.getUniformLocation(this._program,H_i.name),name:H_i.name,type:H_i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H_c.name=H_c.name.substr(0,H_c.name.length-3),H_c.isArray=!0,H_c.location=H_b.getUniformLocation(this._program,H_c.name)),this._uniformParams.push(H_c)}for(H_d=0,H_e=this._attributeParams.length;H_d<H_e;H_d++)(H_c=this._attributeParams[H_d]).indexOfParams=H_d,H_c.index=1,H_c.value=[H_c.location,null],H_c.codename=H_c.name,H_c.name=null!=this._attributeMap[H_c.codename]?this._attributeMap[H_c.codename]:H_c.codename,this._attributeParamsMap.push(H_c.name),this._attributeParamsMap.push(H_c),H_c._this=this,H_c.uploadedValue=[],H_c.fun=this._attribute;for(H_d=0,H_e=this._uniformParams.length;H_d<H_e;H_d++)switch((H_c=this._uniformParams[H_d]).indexOfParams=H_d,H_c.index=1,H_c.value=[H_c.location,null],H_c.codename=H_c.name,null!=this._sceneUniformMap[H_c.codename]?(H_c.name=this._sceneUniformMap[H_c.codename],this._sceneUniformParamsMap.push(H_c.name),this._sceneUniformParamsMap.push(H_c)):null!=this._cameraUniformMap[H_c.codename]?(H_c.name=this._cameraUniformMap[H_c.codename],this._cameraUniformParamsMap.push(H_c.name),this._cameraUniformParamsMap.push(H_c)):null!=this._spriteUniformMap[H_c.codename]?(H_c.name=this._spriteUniformMap[H_c.codename],this._spriteUniformParamsMap.push(H_c.name),this._spriteUniformParamsMap.push(H_c)):null!=this._materialUniformMap[H_c.codename]?(H_c.name=this._materialUniformMap[H_c.codename],this._materialUniformParamsMap.push(H_c.name),this._materialUniformParamsMap.push(H_c)):null!=this._renderElementUniformMap[H_c.codename]?(H_c.name=this._renderElementUniformMap[H_c.codename],this._renderElementUniformParamsMap.push(H_c.name),this._renderElementUniformParamsMap.push(H_c)):console.log("Shader:can't find uinform name:"+H_c.codename+" in shader file."),H_c._this=this,H_c.uploadedValue=[],H_c.type){case 5124:H_c.fun=H_c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H_c.fun=H_c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H_c.fun=H_c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H_c.fun=H_c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H_c.fun=H_c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H_c.fun=this._uniform_sampler2D;break;case 35680:H_c.fun=this._uniform_samplerCube;break;case 35676:H_c.fun=this._uniformMatrix4fv;break;case 35670:H_c.fun=this._uniform1i;break;case 35674:H_c.fun=this._uinformMatrix2fv;break;case 35675:H_c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},H_b._attribute=function(H_a,H_b){var H_c=H_F.mainContext,H_d=H_h._enableAtributes,H_e=H_a.location;return H_d[H_e]||H_c.enableVertexAttribArray(H_e),H_c.vertexAttribPointer(H_e,H_b[0],H_b[1],H_b[2],H_b[3],H_b[4]),H_d[H_e]=H_h._bindVertexBuffer,1},H_b._uniform1f=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b?(H_F.mainContext.uniform1f(H_a.location,H_c[0]=H_b),1):0},H_b._uniform1fv=function(H_a,H_b){if(H_b.length<4){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_F.mainContext.uniform1fv(H_a.location,H_b),H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3],1):0}return H_F.mainContext.uniform1fv(H_a.location,H_b),1},H_b._uniform_vec2=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]?(H_F.mainContext.uniform2f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1]),1):0},H_b._uniform_vec2v=function(H_a,H_b){if(H_b.length<2){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_F.mainContext.uniform2fv(H_a.location,H_b),H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3],1):0}return H_F.mainContext.uniform2fv(H_a.location,H_b),1},H_b._uniform_vec3=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]?(H_F.mainContext.uniform3f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2]),1):0},H_b._uniform_vec3v=function(H_a,H_b){return H_F.mainContext.uniform3fv(H_a.location,H_b),1},H_b._uniform_vec4=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_F.mainContext.uniform4f(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3]),1):0},H_b._uniform_vec4v=function(H_a,H_b){return H_F.mainContext.uniform4fv(H_a.location,H_b),1},H_b._uniformMatrix2fv=function(H_a,H_b){return H_F.mainContext.uniformMatrix2fv(H_a.location,!1,H_b),1},H_b._uniformMatrix3fv=function(H_a,H_b){return H_F.mainContext.uniformMatrix3fv(H_a.location,!1,H_b),1},H_b._uniformMatrix4fv=function(H_a,H_b){return H_F.mainContext.uniformMatrix4fv(H_a.location,!1,H_b),1},H_b._uinformMatrix2fv=function(H_a,H_b){return H_F.mainContext.uniformMatrix2fv(H_a.location,!1,H_b),1},H_b._uinformMatrix3fv=function(H_a,H_b){return H_F.mainContext.uniformMatrix3fv(H_a.location,!1,H_b),1},H_b._uniform1i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b?(H_F.mainContext.uniform1i(H_a.location,H_c[0]=H_b),1):0},H_b._uniform1iv=function(H_a,H_b){return H_F.mainContext.uniform1iv(H_a.location,H_b),1},H_b._uniform_ivec2=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]?(H_F.mainContext.uniform2i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1]),1):0},H_b._uniform_ivec2v=function(H_a,H_b){return H_F.mainContext.uniform2iv(H_a.location,H_b),1},H_b._uniform_vec3i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]?(H_F.mainContext.uniform3i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2]),1):0},H_b._uniform_vec3vi=function(H_a,H_b){return H_F.mainContext.uniform3iv(H_a.location,H_b),1},H_b._uniform_vec4i=function(H_a,H_b){var H_c=H_a.uploadedValue;return H_c[0]!==H_b[0]||H_c[1]!==H_b[1]||H_c[2]!==H_b[2]||H_c[3]!==H_b[3]?(H_F.mainContext.uniform4i(H_a.location,H_c[0]=H_b[0],H_c[1]=H_b[1],H_c[2]=H_b[2],H_c[3]=H_b[3]),1):0},H_b._uniform_vec4vi=function(H_a,H_b){return H_F.mainContext.uniform4iv(H_a.location,H_b),1},H_b._uniform_sampler2D=function(H_a,H_b){var H_c=H_b.source||H_b.defaulteTexture.source,H_d=H_F.mainContext,H_e=H_a.uploadedValue;if(null!=H_e[0])return H_d.activeTexture(H_k._TEXTURES[H_e[0]]),H_c&&H_G.bindTexture(H_d,3553,H_c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H_e[0]=this._curActTexIndex,H_d.uniform1i(H_a.location,this._curActTexIndex),H_d.activeTexture(H_k._TEXTURES[this._curActTexIndex]),H_c&&H_G.bindTexture(H_d,3553,H_c),this._curActTexIndex++,1},H_b._uniform_samplerCube=function(H_a,H_b){var H_c=H_b.source||H_b.defaulteTexture.source,H_d=H_F.mainContext,H_e=H_a.uploadedValue;if(null!=H_e[0])return H_d.activeTexture(H_k._TEXTURES[H_e[0]]),H_c?H_G.bindTexture(H_d,34067,H_c):H_G.bindTexture(H_d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H_e[0]=this._curActTexIndex,H_d.uniform1i(H_a.location,this._curActTexIndex),H_d.activeTexture(H_k._TEXTURES[this._curActTexIndex]),H_c?H_G.bindTexture(H_d,34067,H_c):H_G.bindTexture(H_d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},H_b._noSetValue=function(H_a){console.log("no....:"+H_a.name)},H_b.bind=function(){return H_c.activeShader=this,(H_c.bindShader=this).activeResource(),H_G.UseProgram(this._program)},H_b.uploadAttributes=function(H_a,H_b){for(var H_c,H_d,H_e=0,H_f=0,H_g=this._attributeParamsMap.length;H_f<H_g;H_f+=2)H_d=this._attributeParamsMap[H_f+1],null!=(H_c=H_a[this._attributeParamsMap[H_f]])&&(H_b&&H_b[H_d.name]&&H_b[H_d.name].bind(),H_e+=H_d.fun.call(this,H_d,H_c));H_A.shaderCall+=H_e},H_b.uploadAttributesX=function(H_a,H_b){for(var H_c,H_d,H_e=0,H_f=0,H_g=this._attributeParamsMap.length;H_f<H_g;H_f+=2)H_d=this._attributeParamsMap[H_f+1],null!=(H_c=H_a[this._attributeParamsMap[H_f]])&&(H_b._bind(),H_e+=H_d.fun.call(this,H_d,H_c));H_A.shaderCall+=H_e},H_b.uploadSceneUniforms=function(H_a){for(var H_b,H_c,H_d=0,H_e=0,H_f=this._sceneUniformParamsMap.length;H_e<H_f;H_e+=2)H_c=this._sceneUniformParamsMap[H_e+1],null!=(H_b=H_a[this._sceneUniformParamsMap[H_e]])&&(H_d+=H_c.fun.call(this,H_c,H_b));H_A.shaderCall+=H_d},H_b.uploadCameraUniforms=function(H_a){for(var H_b,H_c,H_d=0,H_e=0,H_f=this._cameraUniformParamsMap.length;H_e<H_f;H_e+=2)H_c=this._cameraUniformParamsMap[H_e+1],null!=(H_b=H_a[this._cameraUniformParamsMap[H_e]])&&(H_d+=H_c.fun.call(this,H_c,H_b));H_A.shaderCall+=H_d},H_b.uploadSpriteUniforms=function(H_a){for(var H_b,H_c,H_d=0,H_e=0,H_f=this._spriteUniformParamsMap.length;H_e<H_f;H_e+=2)H_c=this._spriteUniformParamsMap[H_e+1],null!=(H_b=H_a[this._spriteUniformParamsMap[H_e]])&&(H_d+=H_c.fun.call(this,H_c,H_b));H_A.shaderCall+=H_d},H_b.uploadMaterialUniforms=function(H_a){for(var H_b,H_c,H_d=0,H_e=0,H_f=this._materialUniformParamsMap.length;H_e<H_f;H_e+=2)H_c=this._materialUniformParamsMap[H_e+1],null!=(H_b=H_a[this._materialUniformParamsMap[H_e]])&&(H_d+=H_c.fun.call(this,H_c,H_b));H_A.shaderCall+=H_d},H_b.uploadRenderElementUniforms=function(H_a){for(var H_b,H_c,H_d=0,H_e=0,H_f=this._renderElementUniformParamsMap.length;H_e<H_f;H_e+=2)H_c=this._renderElementUniformParamsMap[H_e+1],null!=(H_b=H_a[this._renderElementUniformParamsMap[H_e]])&&(H_d+=H_c.fun.call(this,H_c,H_b));H_A.shaderCall+=H_d},H_k.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return new H_k(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j)},H_k.addInclude=function(H_a,H_b){H_v.addInclude(H_a,H_b)},H_k._createShader=function(H_a,H_b,H_c){var H_d=H_a.createShader(H_c);if(H_a.shaderSource(H_d,H_b),H_a.compileShader(H_d),H_Ab.debugMode&&!H_a.getShaderParameter(H_d,35713))throw H_a.getShaderInfoLog(H_d);return H_d},H_k.PERIOD_RENDERELEMENT=0,H_k.PERIOD_MATERIAL=1,H_k.PERIOD_SPRITE=2,H_k.PERIOD_CAMERA=3,H_k.PERIOD_SCENE=4,H_k._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],H_k._count=0,H_k._preCompile=!1,H_k.extCompileFunc=null,H_k.extCompileObj=null,H_l(H_k,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new H_B}]),H_k}(),H_Mb=function(H_h){function H_i(){this._transformUV=null,H_i.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new H_gb(.6,.6,.6)),this._setColor(10,new H_gb(1,1,1)),this._setColor(11,new H_hb(1,1,1,8)),this._setColor(12,new H_gb(1,1,1)),this._setColor(7,new H_hb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new H_hb(1,1,0,0)),this.renderMode=1}H_n(H_i,"laya.d3.core.material.StandardMaterial",H_h);var H_a=H_i.prototype;return H_a.disableLight=function(){this._addDisablePublicShaderDefine(H_Ab.SHADERDEFINE_POINTLIGHT|H_Ab.SHADERDEFINE_SPOTLIGHT|H_Ab.SHADERDEFINE_DIRECTIONLIGHT)},H_a.disableFog=function(){this._addDisablePublicShaderDefine(H_Ab.SHADERDEFINE_FOG)},H_a.onAsynLoaded=function(H_a,H_b,H_c){var H_d=H_b[0];if(H_d.version)H_h.prototype.onAsynLoaded.call(this,H_a,H_b,H_c);else{var H_e=H_b[1],H_f=H_d.props;for(var H_g in H_f)this[H_g]=H_f[H_g];H_i._parseStandardMaterial(H_e,this,H_d),this._endLoaded()}},H_a.cloneTo=function(H_a){H_h.prototype.cloneTo.call(this,H_a);var H_b=H_a;this._transformUV&&(H_b._transformUV=this._transformUV.clone())},H_q(0,H_a,"ambientColor",function(){return this._getColor(9)},function(H_a){this._setColor(9,H_a)}),H_q(0,H_a,"ambientTexture",function(){return this._getTexture(5)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,H_a)}),H_q(0,H_a,"renderMode",null,function(H_a){switch(H_a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H_i.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(H_a)}),H_q(0,H_a,"reflectColor",function(){return this._getColor(12)},function(H_a){this._setColor(12,H_a)}),H_q(0,H_a,"tilingOffset",function(){return this._getColor(15)},function(H_a){if(H_a){var H_b=H_a.elements;1!=H_b[0]||1!=H_b[1]||0!=H_b[2]||0!=H_b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,H_a)}),H_q(0,H_a,"albedo",function(){return this._getColor(7)},function(H_a){this._setColor(7,H_a)}),H_q(0,H_a,"diffuseColor",function(){return this._getColor(10)},function(H_a){this._setColor(10,H_a)}),H_q(0,H_a,"albedoColor",function(){return this._getColor(7)},function(H_a){this._setColor(7,H_a)}),H_q(0,H_a,"specularColor",function(){return this._getColor(11)},function(H_a){this._setColor(11,H_a)}),H_q(0,H_a,"diffuseTexture",function(){return this._getTexture(1)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,H_a)}),H_q(0,H_a,"normalTexture",function(){return this._getTexture(2)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,H_a)}),H_q(0,H_a,"specularTexture",function(){return this._getTexture(3)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,H_a)}),H_q(0,H_a,"emissiveTexture",function(){return this._getTexture(4)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,H_a)}),H_q(0,H_a,"reflectTexture",function(){return this._getTexture(6)},function(H_a){H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,H_a)}),H_q(0,H_a,"transformUV",function(){return this._transformUV},function(H_a){this._transformUV=H_a,this._setMatrix4x4(13,H_a.matrix),H_a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,H_a.matrix.elements,0)}),H_i.__init__=function(){H_i.SHADERDEFINE_DIFFUSEMAP=H_i.shaderDefines.registerDefine("DIFFUSEMAP"),H_i.SHADERDEFINE_NORMALMAP=H_i.shaderDefines.registerDefine("NORMALMAP"),H_i.SHADERDEFINE_SPECULARMAP=H_i.shaderDefines.registerDefine("SPECULARMAP"),H_i.SHADERDEFINE_EMISSIVEMAP=H_i.shaderDefines.registerDefine("EMISSIVEMAP"),H_i.SHADERDEFINE_AMBIENTMAP=H_i.shaderDefines.registerDefine("AMBIENTMAP"),H_i.SHADERDEFINE_REFLECTMAP=H_i.shaderDefines.registerDefine("REFLECTMAP"),H_i.SHADERDEFINE_UVTRANSFORM=H_i.shaderDefines.registerDefine("UVTRANSFORM"),H_i.SHADERDEFINE_TILINGOFFSET=H_i.shaderDefines.registerDefine("TILINGOFFSET"),H_i.SHADERDEFINE_ADDTIVEFOG=H_i.shaderDefines.registerDefine("ADDTIVEFOG")},H_i.load=function(H_a){return H_x.loader.create(H_a,null,null,H_i)},H_i._parseStandardMaterial=function(H_a,H_b,H_c){var H_d=H_c.customProps,H_e=H_d.ambientColor;H_b.ambientColor=new H_gb(H_e[0],H_e[1],H_e[2]);var H_f=H_d.diffuseColor;H_b.diffuseColor=new H_gb(H_f[0],H_f[1],H_f[2]);var H_g=H_d.specularColor;H_b.specularColor=new H_hb(H_g[0],H_g[1],H_g[2],H_g[3]);var H_h=H_d.reflectColor;H_b.reflectColor=new H_gb(H_h[0],H_h[1],H_h[2]);var H_i=H_d.albedoColor;H_i&&(H_b.albedo=new H_hb(H_i[0],H_i[1],H_i[2],H_i[3]));var H_j=H_d.diffuseTexture.texture2D;H_j&&(H_b.diffuseTexture=H_t.getRes(H_a[H_j]));var H_k=H_d.normalTexture.texture2D;H_k&&(H_b.normalTexture=H_t.getRes(H_a[H_k]));var H_l=H_d.specularTexture.texture2D;H_l&&(H_b.specularTexture=H_t.getRes(H_a[H_l]));var H_m=H_d.emissiveTexture.texture2D;H_m&&(H_b.emissiveTexture=H_t.getRes(H_a[H_m]));var H_n=H_d.ambientTexture.texture2D;H_n&&(H_b.ambientTexture=H_t.getRes(H_a[H_n]));var H_q=H_d.reflectTexture.texture2D;H_q&&(H_b.reflectTexture=H_t.getRes(H_a[H_q]))},H_i.RENDERMODE_OPAQUE=1,H_i.RENDERMODE_OPAQUEDOUBLEFACE=2,H_i.RENDERMODE_CUTOUT=3,H_i.RENDERMODE_CUTOUTDOUBLEFACE=4,H_i.RENDERMODE_TRANSPARENT=13,H_i.RENDERMODE_TRANSPARENTDOUBLEFACE=14,H_i.RENDERMODE_ADDTIVE=15,H_i.RENDERMODE_ADDTIVEDOUBLEFACE=16,H_i.RENDERMODE_DEPTHREAD_TRANSPARENT=5,H_i.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,H_i.RENDERMODE_DEPTHREAD_ADDTIVE=7,H_i.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,H_i.RENDERMODE_NONDEPTH_TRANSPARENT=9,H_i.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,H_i.RENDERMODE_NONDEPTH_ADDTIVE=11,H_i.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,H_i.SHADERDEFINE_DIFFUSEMAP=0,H_i.SHADERDEFINE_NORMALMAP=0,H_i.SHADERDEFINE_SPECULARMAP=0,H_i.SHADERDEFINE_EMISSIVEMAP=0,H_i.SHADERDEFINE_AMBIENTMAP=0,H_i.SHADERDEFINE_REFLECTMAP=0,H_i.SHADERDEFINE_UVTRANSFORM=0,H_i.SHADERDEFINE_TILINGOFFSET=0,H_i.SHADERDEFINE_ADDTIVEFOG=0,H_i.DIFFUSETEXTURE=1,H_i.NORMALTEXTURE=2,H_i.SPECULARTEXTURE=3,H_i.EMISSIVETEXTURE=4,H_i.AMBIENTTEXTURE=5,H_i.REFLECTTEXTURE=6,H_i.ALBEDO=7,H_i.UVANIAGE=8,H_i.MATERIALAMBIENT=9,H_i.MATERIALDIFFUSE=10,H_i.MATERIALSPECULAR=11,H_i.MATERIALREFLECT=12,H_i.UVMATRIX=13,H_i.UVAGE=14,H_i.TILINGOFFSET=15,H_l(H_i,["defaultMaterial",function(){var H_a=new H_i;return H_a.lock=!0,this.defaultMaterial=H_a},"shaderDefines",function(){return this.shaderDefines=new H_kb(H_Eb.shaderDefines)}]),H_i}(H_Eb),H_Nb=function(H_a){function H_g(H_a,H_b,H_c,H_d,H_e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===H_c&&(H_c=35044),void 0===H_d&&(H_d=!1),H_g.__super.call(this),this._indexType=H_a,this._indexCount=H_b,this._bufferUsage=H_c,this._bufferType=34963,this._canRead=H_d;var H_f;if("ushort"==H_a)this._indexTypeByteCount=2;else{if("ubyte"!=H_a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}H_f=this._indexTypeByteCount*H_b,this._byteLength=H_f,this._bind(),H_h._gl.bufferData(this._bufferType,H_f,this._bufferUsage),this.uri=H_e,H_d?("ushort"==H_a?this._buffer=new Uint16Array(H_b):"ubyte"==H_a&&(this._buffer=new Uint8Array(H_b)),this.memorySize=2*H_f):this.memorySize=H_f}H_n(H_g,"laya.d3.graphics.IndexBuffer3D",H_a);var H_b=H_g.prototype;return H_b.setData=function(H_a,H_b,H_c,H_d){void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=4294967295);var H_e=0;if("ushort"==this._indexType?(H_e=2,0===H_c&&4294967295===H_d||(H_a=new Uint16Array(H_a.buffer,H_c*H_e,H_d))):"ubyte"==this._indexType&&(H_e=1,0===H_c&&4294967295===H_d||(H_a=new Uint8Array(H_a.buffer,H_c*H_e,H_d))),this._bind(),H_h._gl.bufferSubData(this._bufferType,H_b*H_e,H_a),this._canRead)if(0!==H_b||0!==H_c||4294967295!==H_d){var H_f=this._buffer.length-H_b;H_f<H_d&&(H_d=H_f);for(var H_g=0;H_g<H_d;H_g++)this._buffer[H_b+H_g]=H_a[H_g]}else this._buffer=H_a},H_b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H_b.disposeResource=function(){H_a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},H_q(0,H_b,"indexType",function(){return this._indexType}),H_q(0,H_b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),H_q(0,H_b,"indexCount",function(){return this._indexCount}),H_q(0,H_b,"canRead",function(){return this._canRead}),H_g.INDEXTYPE_UBYTE="ubyte",H_g.INDEXTYPE_USHORT="ushort",H_g.create=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_c&&(H_c=35044),void 0===H_d&&(H_d=!1),new H_g(H_a,H_b,H_c,H_d,H_e)},H_g}(H_h),H_Ob=function(H_f){function H_g(H_a,H_b,H_c,H_d,H_e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===H_d&&(H_d=!1),H_g.__super.call(this),this._vertexDeclaration=H_a,this._vertexCount=H_b,this._bufferUsage=H_c,this._bufferType=34962,this._canRead=H_d,this.uri=H_e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*H_b,this._bind(),H_h._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),H_d&&(this._buffer=new Float32Array(this._byteLength/4))}H_n(H_g,"laya.d3.graphics.VertexBuffer3D",H_f);var H_a=H_g.prototype;return H_a.bindWithIndexBuffer=function(H_a){H_a&&H_a._bind(),this._bind()},H_a.setData=function(H_a,H_b,H_c,H_d){if(void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=4294967295),0===H_c&&4294967295===H_d||(H_a=new Float32Array(H_a.buffer,4*H_c,H_d)),this._bind(),H_h._gl.bufferSubData(this._bufferType,4*H_b,H_a),this._canRead)if(0!==H_b||0!==H_c||4294967295!==H_d){var H_e=this._buffer.length-H_b;H_e<H_d&&(H_d=H_e);for(var H_f=0;H_f<H_d;H_f++)this._buffer[H_b+H_f]=H_a[H_f]}else this._buffer=H_a},H_a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H_a.disposeResource=function(){for(var H_a=H_F.mainContext,H_b=this._vertexDeclaration.getVertexElements(),H_c=H_h._enableAtributes,H_d=0,H_e=H_b.length;H_d<H_e;H_d++)H_c[H_d]===this._glBuffer&&(H_a.disableVertexAttribArray(H_d),H_c[H_d]=null);H_f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},H_q(0,H_a,"vertexDeclaration",function(){return this._vertexDeclaration}),H_q(0,H_a,"vertexCount",function(){return this._vertexCount}),H_q(0,H_a,"canRead",function(){return this._canRead}),H_g.create=function(H_a,H_b,H_c,H_d,H_e){return void 0===H_c&&(H_c=35044),void 0===H_d&&(H_d=!1),new H_g(H_a,H_b,H_c,H_d,H_e)},H_g}(H_h),H_Pb=function(H_a){function H_v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,H_v.__super.call(this),this._type=3553}H_n(H_v,"laya.d3.resource.DataTexture2D",H_Fb);var H_b=H_v.prototype;return H_b.genDebugMipmaps=function(){var H_a=[];return H_a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),H_a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),H_a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),H_a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),H_a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),H_a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),H_a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),H_a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),H_a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),H_a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),H_a},H_b._onTextureLoaded=function(H_a){},H_b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var H_a=H_F.mainContext,H_b=this._source=H_a.createTexture(),H_c=this._width,H_d=this._height,H_e=H_G.curBindTexTarget,H_f=H_G.curBindTexValue,H_g=!1;if(H_G.bindTexture(H_a,this._type,H_b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var H_h=0;H_a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var H_i=0;H_i<this._mipmaps.length;H_i++){if(this._mipmaps[H_i].byteLength!=H_j*H_k*4)throw"mipmap size error  level:"+H_i;H_a.texSubImage2D(this._type,0,H_v.simLodRect[H_h++],H_v.simLodRect[H_h++],H_v.simLodRect[H_h++],H_v.simLodRect[H_h++],6408,5121,new Uint8Array(this._mipmaps[H_i]))}this.minFifter=9729,this.magFifter=9729}else{var H_j=this._width,H_k=this._height;for(H_h=0,H_a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),H_i=0;H_i<this._mipmaps.length;H_i++){if(this._mipmaps[H_i].byteLength!=H_j*H_k*4)throw"mipmap size error  level:"+H_i;H_a.texImage2D(this._type,H_i,6408,H_j,H_k,0,6408,5121,new Uint8Array(this._mipmaps[H_i])),(H_j/=2)<1&&(H_j=1),(H_k/=2)<1&&(H_k=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&H_a.pixelStorei(H_a.UNPACK_ALIGNMENT,1),H_a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var H_l=0,H_m=!1,H_n=!1;this._buffer.byteLength==4*H_c*H_d?(H_l=6408,H_m=!0):this._buffer.byteLength==3*H_c*H_d?(H_l=6407,H_n=!0):H_l=this._format,H_m||H_n?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),H_n&&H_a.pixelStorei(H_a.UNPACK_ALIGNMENT,1),H_a.texImage2D(this._type,0,H_l,H_c,H_d,0,H_l,5121,this._buffer)):H_a&&H_l==H_a.ALPHA?(H_a.texImage2D(3553,0,H_l,H_c,H_d,0,H_l,H_a.UNSIGNED_BYTE,this._buffer),H_g=!0):0!=H_l&&(H_a.compressedTexImage2D(3553,0,H_l,H_c,H_d,0,this._buffer),H_g=!0)}var H_q=this._minFifter,H_r=this._magFifter,H_s=0==this._wrapModeU?10497:33071,H_t=0==this._wrapModeV?10497:33071,H_u=H_w.isPOT(H_c,H_d);H_u?(this._mipmap||this._mipmaps?-1!==H_q||(H_q=9987):-1!==H_q||(H_q=9729),-1!==H_r||(H_r=9729),H_a.texParameteri(this._type,10241,H_q),H_a.texParameteri(this._type,10240,H_r),H_a.texParameteri(this._type,10242,H_s),H_a.texParameteri(this._type,10243,H_t),this._mipmap&&H_a.generateMipmap(this._type)):(-1!==H_q||(H_q=9729),-1!==H_r||(H_r=9729),H_a.texParameteri(this._type,10241,H_q),H_a.texParameteri(this._type,10240,H_r),H_a.texParameteri(this._type,10242,33071),H_a.texParameteri(this._type,10243,33071)),H_e&&H_f&&H_G.bindTexture(H_a,H_e,H_f),this.memorySize=H_g?this._buffer.length:H_u?H_c*H_d*4*(1+1/3):H_c*H_d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},H_b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},H_b.onAsynLoaded=function(H_a,H_b,H_c){var H_d;H_c&&(H_d=H_c[0].call(this,H_b)),H_d&&(this._width=H_d.width,this._height=H_d.height,this._buffer=H_d.data),this._src=H_a,this._size=new H_rb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},H_b.getPixels=function(){return new Uint8Array(this._buffer)},H_b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(H_F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},H_q(0,H_b,"src",function(){return this._src}),H_v.create=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){if(void 0===H_d&&(H_d=9729),void 0===H_e&&(H_e=9729),void 0===H_f&&(H_f=!0),!H_a||H_a.byteLength<H_b*H_c*4)throw"DataTexture2D create error";var H_h=new H_v;return H_h.uri=H_g,H_h._buffer=H_a,H_h._width=H_b,H_h._height=H_c,H_h._mipmap=H_f,H_h._magFifter=H_d,H_h._minFifter=H_e,H_h._size=new H_rb(H_h._width,H_h._height),H_h._conchTexture?alert("怎么给runtime传递datatexture数据"):H_h.activeResource(),H_h},H_v.load=function(H_a,H_b,H_c,H_d,H_e){if(void 0===H_b&&(H_b=0),void 0===H_c&&(H_c=0),void 0===H_d&&(H_d=9729),void 0===H_e&&(H_e=9729),"mipmaps"===H_C.getFileExtension(H_a)){var H_f=H_x.loader.create(H_a,null,null,H_v,[function(H_a){this._mipmaps=[];var H_b=new Uint32Array(H_a);this._width=H_b[0];var H_c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,H_c=1024),this._width!=H_c)throw"现在只支持512x256的环境贴图。当前的是"+H_b[0];this._height=H_b[1];for(var H_d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,H_e=this._height,H_f=8;;){var H_g=H_d*H_e*4;if(H_f+H_g>H_a.byteLength)throw"load mipmaps data size error ";var H_h=new Uint8Array(H_a,H_f,H_g);if(this._mipmaps.push(H_h),H_f+=H_g,1==H_d&&1==H_e)break;(H_d/=2)<1&&(H_d=1),(H_e/=2)<1&&(H_e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){H_f.simLodInfo=new Float32Array(40);for(var H_g=0;H_g<H_f.simLodInfo.length;)H_f.simLodInfo[H_g]=(H_v.simLodRect[H_g]+.5)/1024,H_g++,H_f.simLodInfo[H_g]=(H_v.simLodRect[H_g]+.5)/256,H_g++,H_f.simLodInfo[H_g]=Math.max(H_v.simLodRect[H_g]-1,.1)/1024,H_g++,H_f.simLodInfo[H_g]=Math.max(H_v.simLodRect[H_g]-1.5,.1)/256,H_g++}return H_f}if("number"==typeof H_b)return H_x.loader.create(H_a,null,null,H_v,[function(H_a){return this._width=H_b,this._height=H_c,this._buffer=H_a,null}]);if("function"==typeof H_b)return H_x.loader.create(H_a,null,null,H_v,[H_b]);throw new Error("unknown params.")},H_v.lodasatlas=!1,H_l(H_v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),H_v}(),H_Qb=function(H_a){function H_b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,H_b.__super.call(this)}H_n(H_b,"laya.d3.resource.models.PrimitiveMesh",H_Gb);var H_c=H_b.prototype;return H_x.imps(H_c,{"laya.d3.core.render.IRenderable":!0}),H_c._getVertexBuffer=function(H_a){return void 0===H_a&&(H_a=0),0===H_a?this._vertexBuffer:null},H_c._getVertexBuffers=function(){return null},H_c._getIndexBuffer=function(){return this._indexBuffer},H_c._getPositions=function(){var H_a,H_b=[],H_c=this._vertexBuffer.vertexDeclaration.getVertexElements(),H_d=0;for(H_d=0;H_d<H_c.length;H_d++){var H_e=H_c[H_d];if("vector3"===H_e.elementFormat&&0===H_e.elementUsage){H_a=H_e;break}}var H_f=this._vertexBuffer.getData();for(H_d=0;H_d<H_f.length;H_d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var H_g=H_d+H_a.offset/4,H_h=new H_gb(H_f[H_g+0],H_f[H_g+1],H_f[H_g+2]);H_b.push(H_h)}return H_b},H_c.getRenderElement=function(H_a){return this},H_c.getRenderElementsCount=function(){return 1},H_c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},H_c._beforeRender=function(H_a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H_c._render=function(H_a){H_F.mainContext.drawElements(4,this._numberIndices,5123,0),H_A.drawCall++,H_A.trianglesFaces+=this._numberIndices/3},H_q(0,H_c,"_vertexBufferCount",function(){return 1}),H_q(0,H_c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H_b}(),H_Rb=function(H_a){function H_b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,H_b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}H_n(H_b,"laya.d3.resource.models.Mesh",H_Gb);var H_c=H_b.prototype;return H_c._getPositions=function(){var H_a,H_b,H_c,H_d,H_e,H_f=[],H_g=0,H_h=0,H_i=0;if(0!==this._vertexBuffers.length){var H_j=this._vertexBuffers.length;for(H_g=0;H_g<H_j;H_g++){for(H_c=(H_a=this._vertexBuffers[H_g]).vertexDeclaration.getVertexElements(),H_h=0;H_h<H_c.length;H_h++)if("vector3"===(H_d=H_c[H_h]).elementFormat&&0===H_d.elementUsage){H_b=H_d;break}for(H_e=H_a.getData(),H_h=0;H_h<H_e.length;H_h+=H_a.vertexDeclaration.vertexStride/4)H_i=H_h+H_b.offset/4,H_f.push(new H_gb(H_e[H_i+0],H_e[H_i+1],H_e[H_i+2]))}}else{var H_k=this._subMeshes.length;for(H_g=0;H_g<H_k;H_g++){for(H_c=(H_a=this._subMeshes[H_g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),H_h=0;H_h<H_c.length;H_h++)if("vector3"===(H_d=H_c[H_h]).elementFormat&&0===H_d.elementUsage){H_b=H_d;break}for(H_e=H_a.getData(),H_h=0;H_h<H_e.length;H_h+=H_a.vertexDeclaration.vertexStride/4)H_i=H_h+H_b.offset/4,H_f.push(new H_gb(H_e[H_i+0],H_e[H_i+1],H_e[H_i+2]))}}return H_f},H_c._setSubMeshes=function(H_a){this._subMeshes=H_a,this._subMeshCount=H_a.length;for(var H_b=0;H_b<this._subMeshCount;H_b++)H_a[H_b]._indexInMesh=H_b;this._positions=this._getPositions(),this._generateBoundingObject()},H_c.onAsynLoaded=function(H_a,H_b,H_c){var H_d=H_b[0],H_e=H_b[1];H_Ya.read(H_d,this,this._materials,this._subMeshes,H_e),this.completeCreate(),this._endLoaded()},H_c.getSubMesh=function(H_a){return this._subMeshes[H_a]},H_c.getSubMeshCount=function(){return this._subMeshes.length},H_c.getRenderElementsCount=function(){return this._subMeshes.length},H_c.getRenderElement=function(H_a){return this._subMeshes[H_a]},H_c.disposeResource=function(){for(var H_a=0;H_a<this._subMeshes.length;H_a++)this._subMeshes[H_a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},H_q(0,H_c,"materials",function(){return this._materials.slice()}),H_q(0,H_c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),H_b.load=function(H_a){return H_x.loader.create(H_a,null,null,H_b)},H_b}(),H_Sb=(function(H_a){function H_j(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===H_c&&(H_c=6408),void 0===H_d&&(H_d=5121),void 0===H_e&&(H_e=33189),void 0===H_f&&(H_f=!1),void 0===H_g&&(H_g=!1),void 0===H_h&&(H_h=-1),void 0===H_i&&(H_i=-1),H_j.__super.call(this),this._type=3553,this._width=H_a,this._height=H_b,this._size=new H_rb(H_a,H_b),this._surfaceFormat=H_c,this._surfaceType=H_d,this._depthStencilFormat=H_e,H_r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=H_f,this._repeat=H_g,this._minFifter=H_h,this._magFifter=H_i,this.activeResource(),this._alreadyResolved=!0}H_n(H_j,"laya.d3.resource.RenderTexture",H_Fb);var H_b=H_j.prototype;H_b.recreateResource=function(){var H_a=H_F.mainContext;this._frameBuffer=H_a.createFramebuffer(),this._source=H_a.createTexture();var H_b=H_G.curBindTexTarget,H_c=H_G.curBindTexValue;H_G.bindTexture(H_a,this._type,this._source),H_a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var H_d=this._minFifter,H_e=this._magFifter,H_f=this._repeat?10497:33071;if(H_w.isPOT(this._width,this._height)?(this._mipmap?-1!==H_d||(H_d=9987):-1!==H_d||(H_d=9729),-1!==H_e||(H_e=9729),H_a.texParameteri(this._type,10241,H_d),H_a.texParameteri(this._type,10240,H_e),H_a.texParameteri(this._type,10242,H_f),H_a.texParameteri(this._type,10243,H_f),this._mipmap&&H_a.generateMipmap(this._type)):(-1!==H_d||(H_d=9729),-1!==H_e||(H_e=9729),H_a.texParameteri(this._type,10241,H_d),H_a.texParameteri(this._type,10240,H_e),H_a.texParameteri(this._type,10242,33071),H_a.texParameteri(this._type,10243,33071)),H_b&&H_c&&H_G.bindTexture(H_a,H_b,H_c),H_a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=H_a.createRenderbuffer(),H_a.bindRenderbuffer(36161,this._depthStencilBuffer),H_a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),H_a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:H_a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H_a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H_a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H_a.framebufferTexture2D(36160,36064,3553,this._source,0),H_a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},H_b.start=function(){H_F.mainContext.bindFramebuffer(36160,this.frameBuffer),(H_j._currentRenderTarget=this)._alreadyResolved=!1},H_b.end=function(){H_F.mainContext.bindFramebuffer(36160,null),H_j._currentRenderTarget=null,this._alreadyResolved=!0},H_b.getData=function(H_a,H_b,H_c,H_d){var H_e=H_F.mainContext;if(H_e.bindFramebuffer(36160,this._frameBuffer),!(36053===H_e.checkFramebufferStatus(36160)))return H_e.bindFramebuffer(36160,null),null;var H_f=new Uint8Array(this._width*this._height*4);return H_e.readPixels(H_a,H_b,H_c,H_d,this._surfaceFormat,this._surfaceType,H_f),H_e.bindFramebuffer(36160,null),H_f},H_b.disposeResource=function(){if(this._frameBuffer){var H_a=H_F.mainContext;H_a.deleteTexture(this._source),H_a.deleteFramebuffer(this._frameBuffer),H_a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},H_q(0,H_b,"surfaceFormat",function(){return this._surfaceFormat}),H_q(0,H_b,"surfaceType",function(){return this._surfaceType}),H_q(0,H_b,"depthStencilFormat",function(){return this._depthStencilFormat}),H_q(0,H_b,"source",function(){return this._alreadyResolved?H_x.superGet(H_Fb,this,"source"):null}),H_q(0,H_b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H_q(0,H_b,"frameBuffer",function(){return this._frameBuffer}),H_j._currentRenderTarget=null}(),function(H_a){function H_b(H_a){this._color=null,this._pixels=null,H_b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new H_rb(this.width,this.height),this._color=H_a,this._pixels=new Uint8Array([255*H_a.x,255*H_a.y,255*H_a.z,255*H_a.w]),this.uri="SolidColorTexture2D_"+this.id}H_n(H_b,"laya.d3.resource.SolidColorTexture2D",H_Fb);var H_c=H_b.prototype;return H_c._createWebGlTexture=function(){var H_a=H_F.mainContext,H_b=this._source=H_a.createTexture(),H_c=this._width,H_d=this._height,H_e=H_G.curBindTexTarget,H_f=H_G.curBindTexValue;H_G.bindTexture(H_a,this._type,H_b),H_a.texImage2D(this._type,0,6408,H_c,H_d,0,6408,5121,this._pixels);var H_g=this._minFifter,H_h=this._magFifter,H_i=this._repeat?10497:33071,H_j=H_w.isPOT(H_c,H_d);H_j?(this._mipmap?-1!==H_g||(H_g=9987):-1!==H_g||(H_g=9729),-1!==H_h||(H_h=9729),H_a.texParameteri(this._type,10241,H_g),H_a.texParameteri(this._type,10240,H_h),H_a.texParameteri(this._type,10242,H_i),H_a.texParameteri(this._type,10243,H_i),this._mipmap&&H_a.generateMipmap(this._type)):(-1!==H_g||(H_g=9729),-1!==H_h||(H_h=9729),H_a.texParameteri(this._type,10241,H_g),H_a.texParameteri(this._type,10240,H_h),H_a.texParameteri(this._type,10242,33071),H_a.texParameteri(this._type,10243,33071)),H_e&&H_f&&H_G.bindTexture(H_a,H_e,H_f),this.memorySize=H_j?H_c*H_d*4*(1+1/3):H_c*H_d*4},H_c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H_c.disposeResource=function(){this._source&&(H_F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H_l(H_b,["magentaTexture",function(){var H_a=new H_b(new H_hb(1,0,1,1));return H_a.lock=!0,this.magentaTexture=H_a},"grayTexture",function(){var H_a=new H_b(new H_hb(.5,.5,.5,1));return H_a.lock=!0,this.grayTexture=H_a}]),H_b}()),H_Tb=function(H_a){function H_e(H_a,H_b,H_c,H_d){this._canRead=!1,this._image=null,this._pixels=null,void 0===H_a&&(H_a=!1),void 0===H_b&&(H_b=!0),void 0===H_c&&(H_c=6408),void 0===H_d&&(H_d=!0),H_e.__super.call(this),this._type=3553,this._repeat=H_b,this._canRead=H_a,this._format=H_c,this._mipmap=H_d}H_n(H_e,"laya.d3.resource.Texture2D",H_Fb);var H_b=H_e.prototype;return H_b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H_a=H_F.mainContext,H_b=this._source=H_a.createTexture(),H_c=this._width,H_d=this._height,H_e=H_G.curBindTexTarget,H_f=H_G.curBindTexValue;switch(H_G.bindTexture(H_a,this._type,H_b),this._format){case 6407:case 6408:this._canRead?H_a.texImage2D(this._type,0,this._format,H_c,H_d,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?H_a.texImage2D(this._type,0,this._image._format,H_c,H_d,0,this._image._format,5121,this._image.atlasSource):H_a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case H_F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H_a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var H_g=this._minFifter,H_h=this._magFifter,H_i=this._repeat?10497:33071,H_j=0==this._wrapModeU?10497:33071,H_k=0==this._wrapModeV?10497:33071,H_l=H_w.isPOT(H_c,H_d);H_l?(this._mipmap?-1!==H_g||(H_g=9987):-1!==H_g||(H_g=9729),-1!==H_h||(H_h=9729),H_a.texParameteri(this._type,10241,H_g),H_a.texParameteri(this._type,10240,H_h),H_a.texParameteri(this._type,10242,H_i),H_a.texParameteri(this._type,10243,H_i),H_a.texParameteri(this._type,10242,H_j),H_a.texParameteri(this._type,10243,H_k),this._mipmap&&H_a.generateMipmap(this._type)):(-1!==H_g||(H_g=9729),-1!==H_h||(H_h=9729),H_a.texParameteri(this._type,10241,H_g),H_a.texParameteri(this._type,10240,H_h),H_a.texParameteri(this._type,10242,33071),H_a.texParameteri(this._type,10243,33071)),H_e&&H_f&&H_G.bindTexture(H_a,H_e,H_f),this._image.onload=null,this._image=null,this.memorySize=H_l?H_c*H_d*4*(1+1/3):H_c*H_d*4},H_b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H_b.onAsynLoaded=function(H_a,H_b,H_c){if(H_c){var H_d=H_c[0];void 0!==H_d&&(this._canRead=H_d);var H_e=H_c[1];void 0!==H_e&&(this._repeat=H_e);var H_f=H_c[2];void 0!==H_f&&(this._format=H_f);var H_g=H_c[3];void 0!==H_g&&(this._mipmap=H_g);var H_h=H_c.wrapModeU;void 0!==H_h&&(this._wrapModeU=H_h);var H_i=H_c.wrapModeV;void 0!==H_i&&(this._wrapModeV=H_i)}switch(this._format){case 6407:case 6408:var H_j=(this._image=H_b).width,H_k=H_b.height;this._width=H_j,this._height=H_k,this._size=new H_rb(H_j,H_k),this._canRead&&(H_r.isConchApp?H_b instanceof H_m.HTMLElement&&(this._pixels=new Uint8Array(H_b.getImageData(0,0,H_j,H_k))):(H_H.canvas.size(H_j,H_k),H_H.canvas.clear(),H_H.context.drawImage(H_b,0,0,H_j,H_k),this._pixels=new Uint8Array(H_H.context.getImageData(0,0,H_j,H_k).data.buffer)));break;case H_F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var H_l=new H_y(H_b);H_l.readUTFBytes(4),H_l.readUTFBytes(2),H_l.getInt16();H_l.endian="bigEndian",this._width=H_l.getInt16(),this._height=H_l.getInt16(),this._size=new H_rb(this._width,this._height);H_l.getInt16(),H_l.getInt16();this._image=new Uint8Array(H_b,H_l.pos)}this.recreateResource(),this._endLoaded()},H_b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},H_b.disposeResource=function(){this._source&&(H_F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},H_q(0,H_b,"_src",function(){return this.url}),H_q(0,H_b,"src",function(){return this.url}),H_e.load=function(H_a){return H_x.loader.create(H_a,null,null,H_e)},H_e}(),H_Ub=function(H_b){function H_c(H_a,H_b){H_c.__super.call(this),void 0===H_a&&(H_a=.3),void 0===H_b&&(H_b=1e3),this._tempVector3=new H_gb,this._position=new H_gb,this._up=new H_gb,this._forward=new H_gb,this._right=new H_gb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=H_rb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=H_a,this._farPlane=H_b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),H_x.stage.on("resize",this,this._onScreenSizeChanged)}H_n(H_c,"laya.d3.core.BaseCamera",H_b);var H_a=H_c.prototype;return H_a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var H_a=this.scene._cameraPool,H_b=H_a.length-1,H_c=0;H_c<H_b;H_c++)if(H_a[H_c].renderingOrder>H_a[H_b].renderingOrder){var H_d=H_a[H_c];H_a[H_c]=H_a[H_b],H_a[H_b]=H_d}},H_a._calculateProjectionMatrix=function(){},H_a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},H_a._prepareCameraToRender=function(){H_I._currentCameraCullingMask=this.cullingMask;var H_a=this._shaderValues;H_a.setValue(0,this.transform.position.elements),H_a.setValue(5,this.forward.elements),H_a.setValue(6,this.up.elements)},H_a._prepareCameraViewProject=function(H_a,H_b){var H_c=this._shaderValues;H_c.setValue(1,H_a.elements),H_c.setValue(2,H_b.elements)},H_a._renderCamera=function(H_a,H_b,H_c){},H_a.addLayer=function(H_a){29!==H_a.number&&30!=H_a.number&&(this.cullingMask=this.cullingMask|H_a.mask)},H_a.removeLayer=function(H_a){29!==H_a.number&&30!=H_a.number&&(this.cullingMask=this.cullingMask&~H_a.mask)},H_a.addAllLayers=function(){this.cullingMask=2147483647},H_a.removeAllLayers=function(){this.cullingMask=0|H_I.getLayerByNumber(29).mask|H_I.getLayerByNumber(30).mask},H_a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},H_a.moveForward=function(H_a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=H_a,this.transform.translate(this._tempVector3)},H_a.moveRight=function(H_a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=H_a,this.transform.translate(this._tempVector3)},H_a.moveVertical=function(H_a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=H_a,this.transform.translate(this._tempVector3,!1)},H_a._addSelfRenderObjects=function(){var H_a=this.scene._cameraPool,H_b=H_a.length;if(0<H_b){for(var H_c=H_b-1;0<=H_c;H_c--)if(this.renderingOrder<=H_a[H_c].renderingOrder){H_a.splice(H_c+1,0,this);break}}else H_a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},H_a._clearSelfRenderObjects=function(){var H_a=this.scene._cameraPool;H_a.splice(H_a.indexOf(this),1)},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,H_x.stage.off("resize",this,this._onScreenSizeChanged),H_b.prototype.destroy.call(this,H_a)},H_q(0,H_a,"sky",function(){return this._sky},function(H_a){(this._sky=H_a)._ownerCamera=this}),H_q(0,H_a,"forward",function(){var H_a=this.transform.worldMatrix.elements,H_b=this._forward.elements;return H_b[0]=-H_a[8],H_b[1]=-H_a[9],H_b[2]=-H_a[10],this._forward}),H_q(0,H_a,"position",function(){var H_a=this.transform.worldMatrix.elements,H_b=this._position.elements;return H_b[0]=H_a[12],H_b[1]=H_a[13],H_b[2]=H_a[14],this._position}),H_q(0,H_a,"renderTarget",function(){return this._renderTarget},function(H_a){null!=(this._renderTarget=H_a)&&(this._renderTargetSize=H_a.size)}),H_q(0,H_a,"up",function(){var H_a=this.transform.worldMatrix.elements,H_b=this._up.elements;return H_b[0]=H_a[4],H_b[1]=H_a[5],H_b[2]=H_a[6],this._up}),H_q(0,H_a,"right",function(){var H_a=this.transform.worldMatrix.elements,H_b=this._right.elements;return H_b[0]=H_a[0],H_b[1]=H_a[1],H_b[2]=H_a[2],this._right}),H_q(0,H_a,"renderTargetSize",function(){return this._renderTargetSize},function(H_a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"fieldOfView",function(){return this._fieldOfView},function(H_a){this._fieldOfView=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"nearPlane",function(){return this._nearPlane},function(H_a){this._nearPlane=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"farPlane",function(){return this._farPlane},function(H_a){this._farPlane=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"orthographic",function(){return this._orthographic},function(H_a){this._orthographic=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(H_a){this._orthographicVerticalSize=H_a,this._calculateProjectionMatrix()}),H_q(0,H_a,"renderingOrder",function(){return this._renderingOrder},function(H_a){this._renderingOrder=H_a,this._sortCamerasByRenderingOrder()}),H_c.CAMERAPOS=0,H_c.VIEWMATRIX=1,H_c.PROJECTMATRIX=2,H_c.VPMATRIX=3,H_c.VPMATRIX_NO_TRANSLATE=4,H_c.CAMERADIRECTION=5,H_c.CAMERAUP=6,H_c.ENVIRONMENTDIFFUSE=7,H_c.ENVIRONMENTSPECULAR=8,H_c.SIMLODINFO=9,H_c.DIFFUSEIRRADMATR=10,H_c.DIFFUSEIRRADMATG=11,H_c.DIFFUSEIRRADMATB=12,H_c.HDREXPOSURE=13,H_c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",H_c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",H_c.CLEARFLAG_SOLIDCOLOR=0,H_c.CLEARFLAG_SKY=1,H_c.CLEARFLAG_DEPTHONLY=2,H_c.CLEARFLAG_NONE=3,H_l(H_c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new H_ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new H_ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new H_ab}]),H_c}(H_Kb),H_Vb=function(H_c){function H_b(H_a){this._render=null,this._geometryFilter=null,H_b.__super.call(this,H_a)}H_n(H_b,"laya.d3.core.RenderableSprite3D",H_c);var H_a=H_b.prototype;return H_a._addToInitStaticBatchManager=function(){},H_a._setBelongScene=function(H_a){H_c.prototype._setBelongScene.call(this,H_a),H_a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},H_a._setUnBelongScene=function(){var H_a=this._scene._renderableSprite3Ds,H_b=H_a.indexOf(this);H_a.splice(H_b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),H_c.prototype._setUnBelongScene.call(this)},H_a._update=function(H_a){(H_a.owner=this)._activeInHierarchy&&(this._updateComponents(H_a),this._render._updateOctreeNode(),this._lateUpdateComponents(H_a),H_A.spriteCount++,this._childs.length&&this._updateChilds(H_a))},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_c.prototype.destroy.call(this,H_a),this._render._destroy(),this._render=null},H_b.__init__=function(){H_b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=H_b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),H_b.SAHDERDEFINE_LIGHTMAP=H_b.shaderDefines.registerDefine("LIGHTMAP")},H_b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,H_b.SAHDERDEFINE_LIGHTMAP=4,H_b.LIGHTMAPSCALEOFFSET=2,H_b.LIGHTMAP=3,H_l(H_b,["shaderDefines",function(){return this.shaderDefines=new H_kb}]),H_b}(H_Kb),H_Wb=(function(H_a){function H_d(H_a,H_b,H_c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===H_a&&(H_a=1),void 0===H_b&&(H_b=1),void 0===H_c&&(H_c=1),H_d.__super.call(this),this._long=H_a,this._width=H_b,this._height=H_c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H_n(H_d,"laya.d3.resource.models.BoxMesh",H_Qb);var H_b=H_d.prototype;H_b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var H_a=H_Fa.vertexDeclaration,H_b=(H_a.vertexStride,this._long/2),H_c=this._height/2,H_d=this._width/2,H_e=new Float32Array([-H_b,H_c,-H_d,0,1,0,0,0,H_b,H_c,-H_d,0,1,0,1,0,H_b,H_c,H_d,0,1,0,1,1,-H_b,H_c,H_d,0,1,0,0,1,-H_b,-H_c,-H_d,0,-1,0,0,1,H_b,-H_c,-H_d,0,-1,0,1,1,H_b,-H_c,H_d,0,-1,0,1,0,-H_b,-H_c,H_d,0,-1,0,0,0,-H_b,H_c,-H_d,-1,0,0,0,0,-H_b,H_c,H_d,-1,0,0,1,0,-H_b,-H_c,H_d,-1,0,0,1,1,-H_b,-H_c,-H_d,-1,0,0,0,1,H_b,H_c,-H_d,1,0,0,1,0,H_b,H_c,H_d,1,0,0,0,0,H_b,-H_c,H_d,1,0,0,0,1,H_b,-H_c,-H_d,1,0,0,1,1,-H_b,H_c,H_d,0,0,1,0,0,H_b,H_c,H_d,0,0,1,1,0,H_b,-H_c,H_d,0,0,1,1,1,-H_b,-H_c,H_d,0,0,1,0,1,-H_b,H_c,-H_d,0,0,-1,1,0,H_b,H_c,-H_d,0,0,-1,0,0,H_b,-H_c,-H_d,0,0,-1,0,1,-H_b,-H_c,-H_d,0,0,-1,1,1]),H_f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new H_Ob(H_a,this._numberVertices,35044,!0),this._indexBuffer=new H_Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(H_e),this._indexBuffer.setData(H_f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H_q(0,H_b,"long",function(){return this._long},function(H_a){this._long!==H_a&&(this._long=H_a,this.releaseResource(),this.activeResource())}),H_q(0,H_b,"width",function(){return this._width},function(H_a){this._width!==H_a&&(this._width=H_a,this.releaseResource(),this.activeResource())}),H_q(0,H_b,"height",function(){return this._height},function(H_a){this._height!==H_a&&(this._height=H_a,this.releaseResource(),this.activeResource())})}(),function(H_a){function H_e(H_a,H_b,H_c,H_d){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===H_a&&(H_a=10),void 0===H_b&&(H_b=10),void 0===H_c&&(H_c=10),void 0===H_d&&(H_d=10),H_e.__super.call(this),this._long=H_a,this._width=H_b,this._stacks=H_c,this._slices=H_d,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H_n(H_e,"laya.d3.resource.models.PlaneMesh",H_Qb);var H_b=H_e.prototype;H_b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var H_a=new Uint16Array(this._numberIndices),H_b=H_Fa.vertexDeclaration,H_c=H_b.vertexStride/4,H_d=new Float32Array(this._numberVertices*H_c),H_e=this._long/2,H_f=this._width/2,H_g=this._long/this._stacks,H_h=this._width/this._slices,H_i=0,H_j=0;H_j<=this._slices;H_j++)for(var H_k=0;H_k<=this._stacks;H_k++)H_d[H_i++]=H_k*H_g-H_e,H_d[H_i++]=0,H_d[H_i++]=H_j*H_h-H_f,H_d[H_i++]=0,H_d[H_i++]=1,H_d[H_i++]=0,H_d[H_i++]=1*H_k/this._stacks,H_d[H_i++]=1*H_j/this._slices;var H_l=0;for(H_j=0;H_j<this._slices;H_j++)for(H_k=0;H_k<this._stacks;H_k++)H_a[H_l++]=(H_j+1)*(this._stacks+1)+H_k,H_a[H_l++]=H_j*(this._stacks+1)+H_k,H_a[H_l++]=(H_j+1)*(this._stacks+1)+H_k+1,H_a[H_l++]=H_j*(this._stacks+1)+H_k,H_a[H_l++]=H_j*(this._stacks+1)+H_k+1,H_a[H_l++]=(H_j+1)*(this._stacks+1)+H_k+1;this._vertexBuffer=new H_Ob(H_b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new H_Nb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(H_d),this._indexBuffer.setData(H_a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H_q(0,H_b,"long",function(){return this._long},function(H_a){this._long!==H_a&&(this._long=H_a,this.releaseResource(),this.activeResource())}),H_q(0,H_b,"width",function(){return this._width},function(H_a){this._width!==H_a&&(this._width=H_a,this.releaseResource(),this.activeResource())}),H_q(0,H_b,"stacks",function(){return this._stacks},function(H_a){this._stacks!==H_a&&(this._stacks=H_a,this.releaseResource(),this.activeResource())}),H_q(0,H_b,"slices",function(){return this._slices},function(H_a){this._slices!==H_a&&(this._slices=H_a,this.releaseResource(),this.activeResource())})}(),function(H_a){function H_g(H_a,H_b,H_c){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=.3),void 0===H_c&&(H_c=1e3),this._viewMatrix=new H_ab,this._projectionMatrix=new H_ab,this._projectionViewMatrix=new H_ab,this._viewport=new H_ib(0,0,0,0),this._normalizedViewport=new H_ib(0,0,1,1),this._aspectRatio=H_a,this._boundFrustumUpdate=!0,this._boundFrustum=new H_$a(H_ab.DEFAULT),H_g.__super.call(this,H_b,H_c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}H_n(H_g,"laya.d3.core.Camera",H_Ub);var H_b=H_g.prototype;return H_b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},H_b._parseCustomProps=function(H_a,H_b,H_c,H_d){var H_e=H_c.clearColor;this.clearColor=new H_hb(H_e[0],H_e[1],H_e[2],H_e[3]);var H_f=H_c.viewport;this.normalizedViewport=new H_ib(H_f[0],H_f[1],H_f[2],H_f[3])},H_b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var H_a=this.orthographicVerticalSize*this.aspectRatio*.5,H_b=.5*this.orthographicVerticalSize;H_ab.createOrthoOffCenterRH(-H_a,H_a,-H_b,H_b,this.nearPlane,this.farPlane,this._projectionMatrix)}else H_ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},H_b._update=function(H_a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,H_a)},H_b._renderCamera=function(H_a,H_b,H_c){var H_d,H_e;H_c.parallelSplitShadowMaps[0]&&H_c._renderShadowMap(H_a,H_b,this),(H_b.camera=this)._prepareCameraToRender(),H_c._preRenderUpdateComponents(H_b),H_d=H_b._viewMatrix=this.viewMatrix;var H_f=this._renderTarget;H_f?(H_f.start(),H_ab.multiply(H_Ub._invertYScaleMatrix,this._projectionMatrix,H_Ub._invertYProjectionMatrix),H_ab.multiply(H_Ub._invertYScaleMatrix,this.projectionViewMatrix,H_Ub._invertYProjectionViewMatrix),H_e=H_b._projectionMatrix=H_Ub._invertYProjectionMatrix,H_b._projectionViewMatrix=H_Ub._invertYProjectionViewMatrix):(H_e=H_b._projectionMatrix=this._projectionMatrix,H_b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(H_d,H_e),H_b._viewport=this.viewport,H_c._preRenderScene(H_a,H_b,this.boundFrustum),H_c._clear(H_a,H_b),H_c._renderScene(H_a,H_b),H_c._postRenderUpdateComponents(H_b),H_f&&H_f.end()},H_b.viewportPointToRay=function(H_a,H_b){H_qb.calculateCursorRay(H_a,this.viewport,this._projectionMatrix,this.viewMatrix,null,H_b)},H_b.normalizedViewportPointToRay=function(H_a,H_b){var H_c=H_g._tempVector20,H_d=this.viewport,H_e=H_a.elements,H_f=H_c.elements;H_f[0]=H_e[0]*H_d.width,H_f[1]=H_e[1]*H_d.height,H_qb.calculateCursorRay(H_c,this.viewport,this._projectionMatrix,this.viewMatrix,null,H_b)},H_b.worldToViewportPoint=function(H_a,H_b){H_ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(H_a,this._projectionViewMatrix,H_b);var H_c=H_b.elements;H_c[0]=H_c[0]/H_x.stage.clientScaleX,H_c[1]=H_c[1]/H_x.stage.clientScaleY},H_b.worldToNormalizedViewportPoint=function(H_a,H_b){H_ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(H_a,this._projectionViewMatrix,H_b);var H_c=H_b.elements;H_c[0]=H_c[0]/H_x.stage.clientScaleX,H_c[1]=H_c[1]/H_x.stage.clientScaleY},H_b.convertScreenCoordToOrthographicCoord=function(H_a,H_b){if(this._orthographic){var H_c=H_Y.clientWidth,H_d=H_Y.clientHeight,H_e=this.orthographicVerticalSize*this.aspectRatio/H_c,H_f=this.orthographicVerticalSize/H_d,H_g=H_a.elements,H_h=H_b.elements;return H_h[0]=(-H_c/2+H_g[0])*H_e,H_h[1]=(H_d/2-H_g[1])*H_f,H_h[2]=(this.nearPlane-this.farPlane)*(H_g[2]+1)/2-this.nearPlane,H_gb.transformCoordinate(H_b,this.transform.worldMatrix,H_b),!0}return!1},H_q(0,H_b,"projectionViewMatrix",function(){return H_ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),H_q(0,H_b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var H_a=this.viewport;return H_a.width/H_a.height},function(H_a){if(H_a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=H_a,this._calculateProjectionMatrix()}),H_q(0,H_b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),H_q(0,H_b,"needViewport",function(){var H_a=this.normalizedViewport;return 0===H_a.x&&0===H_a.y&&1===H_a.width&&1===H_a.height}),H_q(0,H_b,"viewport",function(){if(this._viewportExpressedInClipSpace){var H_a=this._normalizedViewport,H_b=this.renderTargetSize,H_c=H_b.width,H_d=H_b.height;this._viewport.x=H_a.x*H_c,this._viewport.y=H_a.y*H_d,this._viewport.width=H_a.width*H_c,this._viewport.height=H_a.height*H_d}return this._viewport},function(H_a){if(null!=this.renderTarget&&(H_a.x<0||H_a.y<0||0==H_a.width||0==H_a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=H_a,this._calculateProjectionMatrix()}),H_q(0,H_b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var H_a=this._viewport,H_b=this.renderTargetSize,H_c=H_b.width,H_d=H_b.height;this._normalizedViewport.x=H_a.x/H_c,this._normalizedViewport.y=H_a.y/H_d,this._normalizedViewport.width=H_a.width/H_c,this._normalizedViewport.height=H_a.height/H_d}return this._normalizedViewport},function(H_a){H_a.x<0&&(H_a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),H_a.y<0&&(H_a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<H_a.x+H_a.width&&(H_a.width=1-H_a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<H_a.y+H_a.height&&(H_a.height=1-H_a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=H_a,this._calculateProjectionMatrix()}),H_q(0,H_b,"projectionMatrix",function(){return this._projectionMatrix},function(H_a){this._projectionMatrix=H_a,this._useUserProjectionMatrix=!0}),H_q(0,H_b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),H_l(H_g,["_tempVector20",function(){return this._tempVector20=new H_fb}]),H_g}()),H_Xb=function(H_c){function H_d(H_a,H_b){H_d.__super.call(this,H_b),this._geometryFilter=new H_Hb(this),this._render=new H_Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),H_a&&(this._geometryFilter.sharedMesh=H_a)instanceof laya.d3.resource.models.Mesh&&(H_a.loaded?this._render.sharedMaterials=H_a.materials:H_a.once("loaded",this,this._applyMeshMaterials))}H_n(H_d,"laya.d3.core.MeshSprite3D",H_c);var H_a=H_d.prototype;return H_a._changeRenderObjectByMesh=function(H_a){var H_b=this._render._renderElements,H_c=H_b[H_a];H_c||(H_c=H_b[H_a]=new H_zb),H_c._render=this._render;var H_d=this._render.sharedMaterials[H_a];H_d||(H_d=H_Mb.defaultMaterial);var H_e=this._geometryFilter.sharedMesh.getRenderElement(H_a);return H_c._mainSortID=this._getSortID(H_e,H_d),H_c._sprite3D=this,H_c.renderObj=H_e,H_c._material=H_d,H_c},H_a._changeRenderObjectByMaterial=function(H_a,H_b){var H_c=this._render._renderElements[H_a];H_b||(H_b=H_Mb.defaultMaterial);var H_d=this._geometryFilter.sharedMesh.getRenderElement(H_a);return H_c._mainSortID=this._getSortID(H_d,H_b),H_c._sprite3D=this,H_c.renderObj=H_d,H_c._material=H_b,H_c},H_a._changeRenderObjectsByMesh=function(){var H_a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=H_a;for(var H_b=0;H_b<H_a;H_b++)this._changeRenderObjectByMesh(H_b)},H_a._onMeshChanged=function(H_a){var H_b=H_a.sharedMesh;H_b.loaded?this._changeRenderObjectsByMesh():H_b.once("loaded",this,this._onMeshLoaded)},H_a._onMeshLoaded=function(H_a){H_a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},H_a._onMaterialChanged=function(H_a,H_b,H_c){H_b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(H_b,H_c)},H_a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},H_a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},H_a._parseCustomProps=function(H_a,H_b,H_c,H_d){var H_e=this.meshRender,H_f=H_c.lightmapIndex;null!=H_f&&(H_e.lightmapIndex=H_f);var H_g,H_h,H_i=H_c.lightmapScaleOffset;if(H_i&&(H_e.lightmapScaleOffset=new H_hb(H_i[0],H_i[1],H_i[2],H_i[3])),H_d.instanceParams)(H_g=H_d.instanceParams.loadPath)&&(H_h=H_t.getRes(H_b[H_g]),(this.meshFilter.sharedMesh=H_h).loaded?H_e.sharedMaterials=H_h.materials:H_h.once("loaded",this,this._applyMeshMaterials));else{(H_g=H_c.meshPath)&&(H_h=H_t.getRes(H_b[H_g]),this.meshFilter.sharedMesh=H_h);var H_j=H_c.materials;if(H_j){var H_k=H_e.sharedMaterials,H_l=H_j.length;H_k.length=H_l;for(var H_m=0;H_m<H_l;H_m++)H_k[H_m]=H_t.getRes(H_b[H_j[H_m].path]);H_e.sharedMaterials=H_k}}},H_a._applyMeshMaterials=function(H_a){for(var H_b=this._render.sharedMaterials,H_c=H_a.materials,H_d=0,H_e=H_c.length;H_d<H_e;H_d++)H_b[H_d]||(H_b[H_d]=H_c[H_d]);this._render.sharedMaterials=H_b},H_a._addToInitStaticBatchManager=function(){H_d._staticBatchManager._addInitBatchSprite(this)},H_a.cloneTo=function(H_a){var H_b=H_a;H_b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var H_c=this._render,H_d=H_b._render;H_d.enable=H_c.enable,H_d.sharedMaterials=H_c.sharedMaterials,H_d.castShadow=H_c.castShadow;var H_e=H_c.lightmapScaleOffset;H_e&&(H_d.lightmapScaleOffset=H_e.clone()),H_d.lightmapIndex=H_c.lightmapIndex,H_d.receiveShadow=H_c.receiveShadow,H_d.sortingFudge=H_c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,H_a)},H_a.destroy=function(H_a){if(void 0===H_a&&(H_a=!0),!this.destroyed){var H_b=this.meshFilter.sharedMesh;null!=H_b&&(H_b.loaded||H_b.off("loaded",this,this._applyMeshMaterials)),H_c.prototype.destroy.call(this,H_a),this._geometryFilter._destroy()}},H_q(0,H_a,"meshFilter",function(){return this._geometryFilter}),H_q(0,H_a,"meshRender",function(){return this._render}),H_d.__init__=function(){H_da._staticBatchManagers.push(H_d._staticBatchManager)},H_d.load=function(H_a){return H_x.loader.create(H_a,null,null,H_d)},H_l(H_d,["_staticBatchManager",function(){return this._staticBatchManager=new H_Bb}]),H_d}(H_Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}}),function(H_a,H_b,H_ea){H_ea.un,H_ea.uns;var H_c=H_ea.static,H_d=H_ea.class,H_f=H_ea.getset,H_r=H_ea.__newvec,H_h=laya.maths.Bezier,H_l=laya.utils.Browser,H_Fa=laya.utils.Byte,H_e=(laya.events.Event,laya.events.EventDispatcher),H_g=laya.display.Graphics,H_i=(laya.resource.HTMLCanvas,laya.utils.Handler),H_j=laya.net.Loader,H_m=laya.maths.MathUtil,H_Ga=laya.maths.Matrix,H_s=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),H_k=(laya.renders.RenderContext,laya.resource.Resource),H_n=laya.utils.RunDriver,H_fa=laya.display.Sprite,H_q=laya.utils.Stat,H_Ha=laya.resource.Texture,H_t=(laya.net.URL,laya.utils.Utils),H_G=function(){function H_a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return H_d(H_a,"laya.ani.AnimationContent"),H_a}(),H_H=function(){function H_a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return H_d(H_a,"laya.ani.AnimationNodeContent"),H_a}(),H_v=function(){function H_a(){}return H_d(H_a,"laya.ani.AnimationParser01"),H_a.parse=function(H_a,H_b){var H_c=H_b.__getBuffer(),H_d=0,H_e=0,H_f=0,H_g=0,H_h=0,H_i=0,H_j=0,H_k=H_b.readUTFString();H_a._aniClassName=H_k;var H_l,H_m=H_b.readUTFString().split("\n"),H_n=H_b.getUint8(),H_q=H_b.getUint32(),H_r=H_b.getUint32();0<H_q&&(H_l=H_c.slice(H_q,H_r));var H_s=new H_Fa(H_l);for(0<H_r&&(H_a._publicExtData=H_c.slice(H_r,H_c.byteLength)),H_a._useParent=!!H_b.getUint8(),H_a._anis.length=H_n,H_d=0;H_d<H_n;H_d++){var H_t=H_a._anis[H_d]=new H_G;H_t.nodes=new Array;var H_u=H_t.name=H_m[H_b.getUint16()];H_a._aniMap[H_u]=H_d,H_t.bone3DMap={},H_t.playTime=H_b.getFloat32(),H_t.playTime<=0&&console.error("播放时间不能为0  url="+H_a.url+" name="+H_t.name);var H_v=H_t.nodes.length=H_b.getUint8();for(H_e=H_t.totalKeyframeDatasLength=0;H_e<H_v;H_e++){var H_w=H_t.nodes[H_e]=new H_H;H_w.childs=[];var H_x=H_b.getInt16();0<=H_x&&(H_w.name=H_m[H_x],H_t.bone3DMap[H_w.name]=H_e),H_w.keyFrame=new Array,H_w.parentIndex=H_b.getInt16(),-1==H_w.parentIndex?H_w.parent=null:H_w.parent=H_t.nodes[H_w.parentIndex],H_w.lerpType=H_b.getUint8();var H_y=H_b.getUint32();H_s.pos=H_y;var H_z=H_w.keyframeWidth=H_s.getUint16();if(H_t.totalKeyframeDatasLength+=H_z,0===H_w.lerpType||1===H_w.lerpType)for(H_w.interpolationMethod=[],H_w.interpolationMethod.length=H_z,H_f=0;H_f<H_z;H_f++)H_w.interpolationMethod[H_f]=H_K.interpolation[H_s.getUint8()];null!=H_w.parent&&H_w.parent.childs.push(H_w);var H_A=H_b.getUint16();0<H_A&&(H_w.extenData=H_c.slice(H_b.pos,H_b.pos+H_A),H_b.pos+=H_A);var H_B,H_C=H_b.getUint16(),H_D=0;for(H_f=0,H_g=H_w.keyFrame.length=H_C;H_f<H_g;H_f++){if((H_B=H_w.keyFrame[H_f]=new H_I).duration=H_b.getFloat32(),H_B.startTime=H_D,2===H_w.lerpType){H_B.interpolationData=[];var H_E,H_F=H_b.getUint8();switch(H_E=H_b.getFloat32()){case 254:for(H_B.interpolationData.length=H_z,H_j=0;H_j<H_z;H_j++)H_B.interpolationData[H_j]=0;break;case 255:for(H_B.interpolationData.length=H_z,H_j=0;H_j<H_z;H_j++)H_B.interpolationData[H_j]=5;break;default:for(H_B.interpolationData.push(H_E),H_i=1;H_i<H_F;H_i++)H_B.interpolationData.push(H_b.getFloat32())}}for(H_B.data=new Float32Array(H_z),H_h=0;H_h<H_z;H_h++)H_B.data[H_h]=H_b.getFloat32(),-1e-8<H_B.data[H_h]&&H_B.data[H_h]<1e-8&&(H_B.data[H_h]=0);H_D+=H_B.duration}H_B.startTime=H_t.playTime,H_w.playTime=H_t.playTime,H_a._calculateKeyFrame(H_w,H_C,H_z)}}},H_a}(),H_w=function(){function H_x(){}return H_d(H_x,"laya.ani.AnimationParser02"),H_x.READ_DATA=function(){H_x._DATA.offset=H_x._reader.getUint32(),H_x._DATA.size=H_x._reader.getUint32()},H_x.READ_BLOCK=function(){for(var H_a=H_x._BLOCK.count=H_x._reader.getUint16(),H_b=H_x._BLOCK.blockStarts=[],H_c=H_x._BLOCK.blockLengths=[],H_d=0;H_d<H_a;H_d++)H_b.push(H_x._reader.getUint32()),H_c.push(H_x._reader.getUint32())},H_x.READ_STRINGS=function(){var H_a=H_x._reader.getUint32(),H_b=H_x._reader.getUint16(),H_c=H_x._reader.pos;H_x._reader.pos=H_a+H_x._DATA.offset;for(var H_d=0;H_d<H_b;H_d++)H_x._strings[H_d]=H_x._reader.readUTFString();H_x._reader.pos=H_c},H_x.parse=function(H_a,H_b){H_x._templet=H_a;(H_x._reader=H_b).__getBuffer();H_x.READ_DATA(),H_x.READ_BLOCK(),H_x.READ_STRINGS();for(var H_c=0,H_d=H_x._BLOCK.count;H_c<H_d;H_c++){var H_e=H_b.getUint16(),H_f=H_x._strings[H_e],H_g=H_x["READ_"+H_f];if(null==H_g)throw new Error("model file err,no this function:"+H_e+" "+H_f);H_g.call()}},H_x.READ_ANIMATIONS=function(){var H_a=H_x._reader,H_b=H_a.__getBuffer(),H_c=0,H_d=0,H_e=0,H_f=0,H_g=H_a.getUint16(),H_h=[];for(H_h.length=H_g,H_c=0;H_c<H_g;H_c++)H_h[H_c]=H_K.interpolation[H_a.getByte()];var H_i=H_a.getUint8();for(H_x._templet._anis.length=H_i,H_c=0;H_c<H_i;H_c++){var H_j=H_x._templet._anis[H_c]={};H_j.nodes=new Array;var H_k=H_j.name=H_x._strings[H_a.getUint16()];H_x._templet._aniMap[H_k]=H_c,H_j.bone3DMap={},H_j.playTime=H_a.getFloat32();var H_l=H_j.nodes.length=H_a.getInt16();for(H_d=H_j.totalKeyframeDatasLength=0;H_d<H_l;H_d++){var H_m=H_j.nodes[H_d]={};H_m.keyframeWidth=H_g,H_m.childs=[];var H_n=H_a.getUint16();0<=H_n&&(H_m.name=H_x._strings[H_n],H_j.bone3DMap[H_m.name]=H_d),H_m.keyFrame=new Array,H_m.parentIndex=H_a.getInt16(),-1==H_m.parentIndex?H_m.parent=null:H_m.parent=H_j.nodes[H_m.parentIndex],H_j.totalKeyframeDatasLength+=H_g,H_m.interpolationMethod=H_h,null!=H_m.parent&&H_m.parent.childs.push(H_m);var H_q=H_a.getUint16(),H_r=null,H_s=null;for(H_e=0,H_f=H_m.keyFrame.length=H_q;H_e<H_f;H_e++){(H_r=H_m.keyFrame[H_e]={}).startTime=H_a.getFloat32(),H_s&&(H_s.duration=H_r.startTime-H_s.startTime);var H_t=H_x._DATA.offset,H_u=H_a.getUint32(),H_v=4*H_g,H_w=H_b.slice(H_t+H_u,H_t+H_u+H_v);H_r.data=new Float32Array(H_w),H_s=H_r}H_r.duration=0,H_m.playTime=H_j.playTime,H_x._templet._calculateKeyFrame(H_m,H_q,H_g)}}},H_x._templet=null,H_x._reader=null,H_x._strings=[],H_c(H_x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H_x}(),H_Ia=(function(){function H_a(){}H_d(H_a,"laya.ani.AnimationState"),H_a.stopped=0,H_a.paused=1,H_a.playing=2}(),function(){function H_e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new H_Va,this.resultMatrix=new H_Ga,this._children=[]}H_d(H_e,"laya.ani.bone.Bone");var H_a=H_e.prototype;return H_a.setTempMatrix=function(H_a){this._tempMatrix=H_a;var H_b,H_c=0;for(H_c=0,H_b=this._children.length;H_c<H_b;H_c++)this._children[H_c].setTempMatrix(this._tempMatrix)},H_a.update=function(H_a){var H_b;if(this.rotation=this.transform.skX,H_a)H_b=this.resultTransform.getMatrix(),H_Ga.mul(H_b,H_a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)H_b=this.resultTransform.getMatrix(),H_Ga.mul(H_b,this.parentBone.resultMatrix,this.resultMatrix);else{var H_c=this.parentBone,H_d=NaN,H_e=NaN,H_f=NaN,H_g=this.parentBone.resultMatrix;H_b=this.resultTransform.getMatrix();var H_h=H_g.a*H_b.tx+H_g.c*H_b.ty+H_g.tx,H_i=H_g.b*H_b.tx+H_g.d*H_b.ty+H_g.ty,H_j=new H_Ga;this.inheritRotation?(H_d=Math.atan2(H_c.resultMatrix.b,H_c.resultMatrix.a),H_e=Math.cos(H_d),H_f=Math.sin(H_d),H_j.setTo(H_e,H_f,-H_f,H_e,0,0),H_Ga.mul(this._tempMatrix,H_j,H_Ga.TEMP),H_Ga.TEMP.copyTo(H_j),H_b=this.resultTransform.getMatrix(),H_Ga.mul(H_b,H_j,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,H_b=this.resultTransform.getMatrix(),H_Ga.TEMP.identity(),H_Ga.TEMP.d=this.d,H_Ga.mul(H_b,H_Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=H_h,this.resultMatrix.ty=H_i}else(H_b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var H_k,H_l=0;for(H_l=0,H_k=this._children.length;H_l<H_k;H_l++)this._children[H_l].update()},H_a.updateChild=function(){var H_a,H_b=0;for(H_b=0,H_a=this._children.length;H_b<H_a;H_b++)this._children[H_b].update()},H_a.setRotation=function(H_a){this._sprite&&(this._sprite.rotation=180*H_a/Math.PI)},H_a.updateDraw=function(H_a,H_b){H_e.ShowBones&&!H_e.ShowBones[this.name]||(this._sprite||(this._sprite=new H_fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),H_ea.stage.addChild(this._sprite)),this._sprite.x=H_a+this.resultMatrix.tx,this._sprite.y=H_b+this.resultMatrix.ty);var H_c,H_d=0;for(H_d=0,H_c=this._children.length;H_d<H_c;H_d++)this._children[H_d].updateDraw(H_a,H_b)},H_a.addChild=function(H_a){this._children.push(H_a),H_a.parentBone=this},H_a.findBone=function(H_a){if(this.name==H_a)return this;var H_b,H_c,H_d=0;for(H_d=0,H_b=this._children.length;H_d<H_b;H_d++)if(H_c=this._children[H_d].findBone(H_a))return H_c;return null},H_a.localToWorld=function(H_a){var H_b=H_a[0],H_c=H_a[1];H_a[0]=H_b*this.resultMatrix.a+H_c*this.resultMatrix.c+this.resultMatrix.tx,H_a[1]=H_b*this.resultMatrix.b+H_c*this.resultMatrix.d+this.resultMatrix.ty},H_e.ShowBones={},H_e}()),H_Ja=function(){function H_r(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}H_d(H_r,"laya.ani.bone.BoneSlot");var H_a=H_r.prototype;return H_a.showSlotData=function(H_a,H_b){void 0===H_b&&(H_b=!0),this.currSlotData=H_a,H_b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},H_a.showDisplayByName=function(H_a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(H_a))},H_a.replaceDisplayByName=function(H_a,H_b){if(this.currSlotData){var H_c;H_c=this.currSlotData.getDisplayByName(H_a);var H_d;H_d=this.currSlotData.getDisplayByName(H_b),this.replaceDisplayByIndex(H_c,H_d)}},H_a.replaceDisplayByIndex=function(H_a,H_b){this.currSlotData&&(this._replaceDic[H_a]=H_b,this.displayIndex==H_a&&this.showDisplayByIndex(H_a))},H_a.showDisplayByIndex=function(H_a){if(null!=this._replaceDic[H_a]&&(H_a=this._replaceDic[H_a]),this.currSlotData&&-1<H_a&&H_a<this.currSlotData.displayArr.length){if(this.displayIndex=H_a,this.currDisplayData=this.currSlotData.displayArr[H_a],this.currDisplayData){var H_b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(H_b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!H_s.isConchApp||H_s.isConchApp&&"0.9.15"<H_fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},H_a.replaceSkin=function(H_a){this._diyTexture=H_a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},H_a.setParentMatrix=function(H_a){this._parentMatrix=H_a},H_a.draw=function(H_a,H_b,H_c,H_d){if(void 0===H_c&&(H_c=!1),void 0===H_d&&(H_d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var H_e,H_f=this.currTexture;switch(this._diyTexture&&(H_f=this._diyTexture),this.currDisplayData.type){case 0:if(H_a){var H_g=this.getDisplayMatrix();if(this._parentMatrix){var H_h=!1;if(H_g){var H_i;if(H_Ga.mul(H_g,this._parentMatrix,H_Ga.TEMP),H_i=H_c?(null==this._resultMatrix&&(this._resultMatrix=new H_Ga),this._resultMatrix):new H_Ga,!H_s.isWebGL&&this.currDisplayData.uvs||H_s.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var H_j=H_r._tempMatrix;H_j.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H_j.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H_h=!0,H_j.rotate(-Math.PI/2)),H_Ga.mul(H_j,H_Ga.TEMP,H_i)}else H_Ga.TEMP.copyTo(H_i);H_h?H_a.drawTexture(H_f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,H_i):H_a.drawTexture(H_f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,H_i)}}}break;case 1:if(null==(H_e=H_c?(null==this._skinSprite&&(this._skinSprite=H_r.createSkinMesh()),this._skinSprite):H_r.createSkinMesh()))return;var H_k;if(null==this.currDisplayData.bones){var H_l,H_m=this.currDisplayData.weights;this.deformData&&(H_m=this.deformData),H_l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H_z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H_z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=H_m;this.currDisplayData.triangles.length;H_k=this.currDisplayData.triangles,H_e.init2(H_f,null,H_k,this._mVerticleArr,H_l);var H_n,H_q=this.getDisplayMatrix();if(this._parentMatrix)if(H_q)H_Ga.mul(H_q,this._parentMatrix,H_Ga.TEMP),H_n=H_c?(null==this._resultMatrix&&(this._resultMatrix=new H_Ga),this._resultMatrix):new H_Ga,H_Ga.TEMP.copyTo(H_n),H_e.transform=H_n}else this.skinMesh(H_b,H_e,H_d);H_a.drawSkin(H_e);break;case 2:if(null==(H_e=H_c?(null==this._skinSprite&&(this._skinSprite=H_r.createSkinMesh()),this._skinSprite):H_r.createSkinMesh()))return;this.skinMesh(H_b,H_e,H_d),H_a.drawSkin(H_e)}}},H_a.skinMesh=function(H_a,H_b,H_c){var H_d,H_e=this.currTexture,H_f=this.currDisplayData.bones;H_d=this._diyTexture?(H_e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H_z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H_z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var H_g,H_h,H_i=this.currDisplayData.weights,H_j=this.currDisplayData.triangles,H_k=0,H_l=0,H_m=0,H_n=NaN,H_q=NaN,H_r=0,H_s=0,H_t=[],H_u=0,H_v=0;if(this.deformData&&0<this.deformData.length){var H_w=0;for(H_u=0,H_v=H_f.length;H_u<H_v;){for(H_m=H_f[H_u++]+H_u,H_l=H_k=0;H_u<H_m;H_u++)H_h=H_a[H_f[H_u]],H_n=H_i[H_r]+this.deformData[H_w++],H_q=H_i[H_r+1]+this.deformData[H_w++],H_s=H_i[H_r+2],H_k+=(H_n*H_h.a+H_q*H_h.c+H_h.tx)*H_s,H_l+=(H_n*H_h.b+H_q*H_h.d+H_h.ty)*H_s,H_r+=3;H_t.push(H_k,H_l)}}else for(H_u=0,H_v=H_f.length;H_u<H_v;){for(H_m=H_f[H_u++]+H_u,H_l=H_k=0;H_u<H_m;H_u++)H_h=H_a[H_f[H_u]],H_n=H_i[H_r],H_q=H_i[H_r+1],H_s=H_i[H_r+2],H_k+=(H_n*H_h.a+H_q*H_h.c+H_h.tx)*H_s,H_l+=(H_n*H_h.b+H_q*H_h.d+H_h.ty)*H_s,H_r+=3;H_t.push(H_k,H_l)}this._mVerticleArr=H_t,H_g=H_j,H_b.init2(H_e,null,H_g,this._mVerticleArr,H_d)},H_a.drawBonePoint=function(H_a){H_a&&this._parentMatrix&&H_a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},H_a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},H_a.getMatrix=function(){return this._resultMatrix},H_a.copy=function(){var H_a=new H_r;return H_a.type="copy",H_a.name=this.name,H_a.attachmentName=this.attachmentName,H_a.srcDisplayIndex=this.srcDisplayIndex,H_a.parent=this.parent,H_a.displayIndex=this.displayIndex,H_a.templet=this.templet,H_a.currSlotData=this.currSlotData,H_a.currTexture=this.currTexture,H_a.currDisplayData=this.currDisplayData,H_a},H_r.createSkinMesh=function(){return H_s.isWebGL||H_s.isConchApp?H_n.skinAniSprite():(H_s.isWebGL,null)},H_c(H_r,["_tempMatrix",function(){return this._tempMatrix=new H_Ga}]),H_r}(),H_Ka=function(){function H_a(){this.skinName=null,this.deformSlotDataList=[]}return H_d(H_a,"laya.ani.bone.DeformAniData"),H_a}(),H_La=function(){function H_a(){this.deformSlotDisplayList=[]}return H_d(H_a,"laya.ani.bone.DeformSlotData"),H_a}(),H_Ma=function(){function H_a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}H_d(H_a,"laya.ani.bone.DeformSlotDisplayData");var H_b=H_a.prototype;return H_b.binarySearch1=function(H_a,H_b){var H_c=0,H_d=H_a.length-2;if(0==H_d)return 1;for(var H_e=H_d>>>1;;){if(H_a[Math.floor(H_e+1)]<=H_b?H_c=H_e+1:H_d=H_e,H_c==H_d)return H_c+1;H_e=H_c+H_d>>>1}return 0},H_b.apply=function(H_a,H_b,H_c){if(void 0===H_c&&(H_c=1),H_a+=.05,!(this.timeList.length<=0)){var H_d=0;if(!(H_a<this.timeList[0])){var H_e=this.vectices[0].length,H_f=[],H_g=this.binarySearch1(this.timeList,H_a);if(this.frameIndex=H_g,H_a>=this.timeList[this.timeList.length-1]){var H_h=this.vectices[this.vectices.length-1];if(H_c<1)for(H_d=0;H_d<H_e;H_d++)H_f[H_d]+=(H_h[H_d]-H_f[H_d])*H_c;else for(H_d=0;H_d<H_e;H_d++)H_f[H_d]=H_h[H_d];this.deformData=H_f}else{this.tweenKeyList[this.frameIndex];var H_i=this.vectices[this.frameIndex-1],H_j=this.vectices[this.frameIndex],H_k=this.timeList[this.frameIndex-1],H_l=this.timeList[this.frameIndex];H_c=this.tweenKeyList[H_g-1]?(H_a-H_k)/(H_l-H_k):0;var H_m=NaN;for(H_d=0;H_d<H_e;H_d++)H_m=H_i[H_d],H_f[H_d]=H_m+(H_j[H_d]-H_m)*H_c;this.deformData=H_f}}}},H_a}(),H_Na=function(){function H_a(){this.time=NaN,this.drawOrder=[]}return H_d(H_a,"laya.ani.bone.DrawOrderData"),H_a}(),H_Oa=function(){function H_a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return H_d(H_a,"laya.ani.bone.EventData"),H_a}(),H_u=function(){function H_da(H_a,H_b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=H_a,this._targetBone=H_b[H_a.targetBoneIndex],this.isSpine=H_a.isSpine,null==this._bones&&(this._bones=[]);for(var H_c=this._bones.length=0,H_d=H_a.boneIndexs.length;H_c<H_d;H_c++)this._bones.push(H_b[H_a.boneIndexs[H_c]]);this.name=H_a.name,this.mix=H_a.mix,this.bendDirection=H_a.bendDirection}H_d(H_da,"laya.ani.bone.IkConstraint");var H_a=H_da.prototype;return H_a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},H_a._applyIk1=function(H_a,H_b,H_c,H_d){var H_e=H_a.parentBone,H_f=1/(H_e.resultMatrix.a*H_e.resultMatrix.d-H_e.resultMatrix.b*H_e.resultMatrix.c),H_g=H_b-H_e.resultMatrix.tx,H_h=H_c-H_e.resultMatrix.ty,H_i=(H_g*H_e.resultMatrix.d-H_h*H_e.resultMatrix.c)*H_f-H_a.transform.x,H_j=(H_h*H_e.resultMatrix.a-H_g*H_e.resultMatrix.b)*H_f-H_a.transform.y,H_k=Math.atan2(H_j,H_i)*H_da.radDeg-0-H_a.transform.skX;H_a.transform.scX<0&&(H_k+=180),180<H_k?H_k-=360:H_k<-180&&(H_k+=360),H_a.transform.skX=H_a.transform.skY=H_a.transform.skX+H_k*H_d,H_a.update()},H_a.updatePos=function(H_a,H_b){this._sp&&this._sp.pos(H_a,H_b)},H_a._applyIk2=function(H_a,H_b,H_c,H_d,H_e,H_f){if(0!=H_f){var H_g=H_a.resultTransform.x,H_h=H_a.resultTransform.y,H_i=H_a.transform.scX,H_j=H_a.transform.scY,H_k=H_b.transform.scX,H_l=0,H_m=0,H_n=0;H_n=H_i<0?(H_i=-H_i,H_l=180,-1):(H_l=0,1),H_j<0&&(H_j=-H_j,H_n=-H_n),H_m=H_k<0?(H_k=-H_k,180):0;var H_q=H_b.resultTransform.x,H_r=NaN,H_s=NaN,H_t=NaN,H_u=H_a.resultMatrix.a,H_v=H_a.resultMatrix.c,H_w=H_a.resultMatrix.b,H_x=H_a.resultMatrix.d,H_y=Math.abs(H_i-H_j)<=1e-4;H_t=H_y?(H_s=H_u*H_q+H_v*(H_r=H_b.resultTransform.y)+H_a.resultMatrix.tx,H_w*H_q+H_x*H_r+H_a.resultMatrix.ty):(H_r=0,H_s=H_u*H_q+H_a.resultMatrix.tx,H_w*H_q+H_a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new H_fa,H_ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H_c,H_d,15,"#ffff00"),this._sp.graphics.drawCircle(H_s,H_t,15,"#ff00ff")),H_a.setRotation(Math.atan2(H_t-H_a.resultMatrix.ty,H_s-H_a.resultMatrix.tx));var H_z=H_a.parentBone;H_u=H_z.resultMatrix.a,H_v=H_z.resultMatrix.c,H_w=H_z.resultMatrix.b;var H_A=1/(H_u*(H_x=H_z.resultMatrix.d)-H_v*H_w),H_B=H_c-H_z.resultMatrix.tx,H_C=H_d-H_z.resultMatrix.ty,H_D=(H_B*H_x-H_C*H_v)*H_A-H_g,H_E=(H_C*H_u-H_B*H_w)*H_A-H_h,H_F=((H_B=H_s-H_z.resultMatrix.tx)*H_x-(H_C=H_t-H_z.resultMatrix.ty)*H_v)*H_A-H_g,H_G=(H_C*H_u-H_B*H_w)*H_A-H_h,H_H=Math.sqrt(H_F*H_F+H_G*H_G),H_I=H_b.length*H_k,H_J=NaN,H_K=NaN;if(H_y){var H_L=(H_D*H_D+H_E*H_E-H_H*H_H-(H_I*=H_i)*H_I)/(2*H_H*H_I);H_L<-1?H_L=-1:1<H_L&&(H_L=1),H_K=Math.acos(H_L)*H_e,H_u=H_H+H_I*H_L,H_v=H_I*Math.sin(H_K),H_J=Math.atan2(H_E*H_u-H_D*H_v,H_D*H_u+H_E*H_v)}else{var H_M=(H_u=H_i*H_I)*H_u,H_N=(H_v=H_j*H_I)*H_v,H_O=H_D*H_D+H_E*H_E,H_P=Math.atan2(H_E,H_D),H_Q=-2*H_N*H_H,H_R=H_N-H_M;if(0<(H_x=H_Q*H_Q-4*H_R*(H_w=H_N*H_H*H_H+H_M*H_O-H_M*H_N))){var H_S=Math.sqrt(H_x);H_Q<0&&(H_S=-H_S);var H_T=(H_S=-(H_Q+H_S)/2)/H_R,H_U=H_w/H_S,H_V=Math.abs(H_T)<Math.abs(H_U)?H_T:H_U;H_V*H_V<=H_O&&(H_C=Math.sqrt(H_O-H_V*H_V)*H_e,H_J=H_P-Math.atan2(H_C,H_V),H_K=Math.atan2(H_C/H_j,(H_V-H_H)/H_i))}var H_W=0,H_X=Number.MAX_VALUE,H_Y=0,H_Z=0,H_$=0,H__=0,H_o=0,H_p=0;H__<(H_x=(H_B=H_H+H_u)*H_B)&&(H_$=0,H__=H_x,H_o=H_B),(H_x=(H_B=H_H-H_u)*H_B)<H_X&&(H_W=Math.PI,H_X=H_x,H_Y=H_B);var H_aa=Math.acos(-H_u*H_H/(H_M-H_N));(H_x=(H_B=H_u*Math.cos(H_aa)+H_H)*H_B+(H_C=H_v*Math.sin(H_aa))*H_C)<H_X&&(H_W=H_aa,H_X=H_x,H_Y=H_B,H_Z=H_C),H__<H_x&&(H_$=H_aa,H__=H_x,H_o=H_B,H_p=H_C),H_K=H_O<=(H_X+H__)/2?(H_J=H_P-Math.atan2(H_Z*H_e,H_Y),H_W*H_e):(H_J=H_P-Math.atan2(H_p*H_e,H_o),H_$*H_e)}var H_ba=Math.atan2(H_r,H_q)*H_n,H_ca=H_a.resultTransform.skX;180<(H_J=(H_J-H_ba)*H_da.radDeg+H_l-H_ca)?H_J-=360:H_J<-180&&(H_J+=360),H_a.resultTransform.x=H_g,H_a.resultTransform.y=H_h,H_a.resultTransform.skX=H_a.resultTransform.skY=H_ca+H_J*H_f,H_ca=H_b.resultTransform.skX,180<(H_K=((H_K+H_ba)*H_da.radDeg-0)*H_n+H_m-(H_ca%=360))?H_K-=360:H_K<-180&&(H_K+=360),H_b.resultTransform.x=H_q,H_b.resultTransform.y=H_r,H_b.resultTransform.skX=H_b.resultTransform.skY=H_b.resultTransform.skY+H_K*H_f,H_a.update()}},H_a._applyIk3=function(H_a,H_b,H_c,H_d,H_e,H_f){if(0!=H_f){var H_g,H_h,H_i=H_b.resultMatrix.a*H_b.length,H_j=H_b.resultMatrix.b*H_b.length,H_k=H_i*H_i+H_j*H_j,H_l=Math.sqrt(H_k),H_m=H_a.resultMatrix.tx,H_n=H_a.resultMatrix.ty,H_q=H_b.resultMatrix.tx,H_r=H_b.resultMatrix.ty,H_s=H_q-H_m,H_t=H_r-H_n,H_u=H_s*H_s+H_t*H_t,H_v=Math.sqrt(H_u),H_w=(H_s=H_c-H_a.resultMatrix.tx)*H_s+(H_t=H_d-H_a.resultMatrix.ty)*H_t,H_x=Math.sqrt(H_w);if(H_l+H_v<=H_x||H_x+H_l<=H_v||H_x+H_v<=H_l){var H_y=NaN;H_q=H_m+(H_y=H_l+H_v<=H_x?1:-1)*(H_c-H_m)*H_v/H_x,H_r=H_n+H_y*(H_d-H_n)*H_v/H_x}else{var H_z=(H_u-H_k+H_w)/(2*H_w),H_A=Math.sqrt(H_u-H_z*H_z*H_w)/H_x,H_B=H_m+H_s*H_z,H_C=H_n+H_t*H_z,H_D=-H_t*H_A,H_E=H_s*H_A;H_r=0<H_e?(H_q=H_B-H_D,H_C-H_E):(H_q=H_B+H_D,H_C+H_E)}H_g=H_q,H_h=H_r,this.isDebug&&(this._sp||(this._sp=new H_fa,H_ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H_m,H_n,15,"#ff00ff"),this._sp.graphics.drawCircle(H_c,H_d,15,"#ffff00"),this._sp.graphics.drawCircle(H_g,H_h,15,"#ff00ff"));var H_F,H_G;H_F=Math.atan2(H_h-H_a.resultMatrix.ty,H_g-H_a.resultMatrix.tx),H_a.setRotation(H_F),(H_G=H_da._tempMatrix).identity(),H_G.rotate(H_F),H_G.scale(H_a.resultMatrix.getScaleX(),H_a.resultMatrix.getScaleY()),H_G.translate(H_a.resultMatrix.tx,H_a.resultMatrix.ty),H_G.copyTo(H_a.resultMatrix),H_a.updateChild();var H_H,H_I;H_H=Math.atan2(H_d-H_h,H_c-H_g),H_b.setRotation(H_H),(H_I=H_da._tempMatrix).identity(),H_I.rotate(H_H),H_I.scale(H_b.resultMatrix.getScaleX(),H_b.resultMatrix.getScaleY()),H_I.translate(H_g,H_h),H_G.copyTo(H_b.resultMatrix),H_b.updateChild()}},H_c(H_da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new H_Ga}]),H_da}(),H_Pa=function(){function H_a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return H_d(H_a,"laya.ani.bone.IkConstraintData"),H_a}(),H_x=function(){function H_I(H_a,H_b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=H_a,this.position=H_a.position,this.spacing=H_a.spacing,this.rotateMix=H_a.rotateMix,this.translateMix=H_a.translateMix,this.bones=[];for(var H_c=this.data.bones,H_d=0,H_e=H_c.length;H_d<H_e;H_d++)this.bones.push(H_b[H_c[H_d]])}H_d(H_I,"laya.ani.bone.PathConstraint");var H_a=H_I.prototype;return H_a.apply=function(H_a,H_b){if(this.target){var H_c=this.translateMix,H_d=this.translateMix,H_e=0<H_d,H_f=this.data.spacingMode,H_g="length"==H_f,H_h=this.data.rotateMode,H_i="tangent"==H_h,H_j="chainScale"==H_h,H_k=[],H_l=this.bones.length,H_m=H_i?H_l:H_l+1,H_n=[];(this._spaces=H_n)[0]=this.position;var H_q=this.spacing;if(H_j||H_g)for(var H_r=0,H_s=H_m-1;H_r<H_s;){var H_t=this.bones[H_r],H_u=H_t.length,H_v=H_u*H_t.resultMatrix.a,H_w=H_u*H_t.resultMatrix.b;H_u=Math.sqrt(H_v*H_v+H_w*H_w),H_j&&(H_k[H_r]=H_u),H_n[++H_r]=H_g?Math.max(0,H_u+H_q):H_q}else for(H_r=1;H_r<H_m;H_r++)H_n[H_r]=H_q;var H_x=this.computeWorldPositions(this.target,H_a,H_b,H_m,H_i,"percent"==this.data.positionMode,"percent"==H_f);if(this._debugKey){for(H_r=0;H_r<H_x.length;H_r++)H_b.drawCircle(H_x[H_r++],H_x[H_r++],5,"#00ff00");var H_y=[];for(H_r=0;H_r<H_x.length;H_r++)H_y.push(H_x[H_r++],H_x[H_r++]);H_b.drawLines(0,0,H_y,"#ff0000")}var H_z=H_x[0],H_A=H_x[1],H_B=this.data.offsetRotation,H_C="chain"==H_h&&0==H_B,H_D=NaN;for(H_r=0,H_D=3;H_r<H_l;H_r++,H_D+=3){(H_t=this.bones[H_r]).resultMatrix.tx+=(H_z-H_t.resultMatrix.tx)*H_c,H_t.resultMatrix.ty+=(H_A-H_t.resultMatrix.ty)*H_c;var H_E=(H_v=H_x[H_D])-H_z,H_F=(H_w=H_x[H_D+1])-H_A;if(H_j&&0!=(H_u=H_k[H_r])){var H_G=(Math.sqrt(H_E*H_E+H_F*H_F)/H_u-1)*H_d+1;H_t.resultMatrix.a*=H_G,H_t.resultMatrix.c*=H_G}if(H_z=H_v,H_A=H_w,H_e){var H_H=H_t.resultMatrix.a,H_I=H_t.resultMatrix.c,H_J=H_t.resultMatrix.b,H_K=H_t.resultMatrix.d,H_L=NaN,H_M=NaN,H_N=NaN;H_L=H_i?H_x[H_D-1]:0==H_n[H_r+1]?H_x[H_D+2]:Math.atan2(H_F,H_E),H_L-=Math.atan2(H_J,H_H)-H_B/180*Math.PI,H_C&&(H_M=Math.cos(H_L),H_N=Math.sin(H_L),H_z+=((H_u=H_t.length)*(H_M*H_H-H_N*H_J)-H_E)*H_d,H_A+=(H_u*(H_N*H_H+H_M*H_J)-H_F)*H_d),H_L>Math.PI?H_L-=2*Math.PI:H_L<-Math.PI&&(H_L+=2*Math.PI),H_L*=H_d,H_M=Math.cos(H_L),H_N=Math.sin(H_L),H_t.resultMatrix.a=H_M*H_H-H_N*H_J,H_t.resultMatrix.c=H_M*H_I-H_N*H_K,H_t.resultMatrix.b=H_N*H_H+H_M*H_J,H_t.resultMatrix.d=H_N*H_I+H_M*H_K}}}},H_a.computeWorldVertices2=function(H_a,H_b,H_c,H_d,H_e,H_f){var H_g,H_h,H_i=H_a.currDisplayData.bones,H_j=H_a.currDisplayData.weights,H_k=H_a.currDisplayData.triangles,H_l=0,H_m=0,H_n=0,H_q=0,H_r=0,H_s=0,H_t=0,H_u=0,H_v=0,H_w=0,H_x=0;if(null!=H_i){for(H_l=0;H_l<H_c;H_l+=2)H_m+=(H_q=H_i[H_m])+1,H_n+=H_q;var H_y=H_b;for(H_r=H_f,H_s=3*H_n;H_r<H_d;H_r+=2){for(H_u=H_t=0,H_q=H_i[H_m++],H_q+=H_m;H_m<H_q;H_m++,H_s+=3){H_g=H_y[H_i[H_m]].resultMatrix,H_v=H_j[H_s],H_w=H_j[H_s+1];var H_z=H_j[H_s+2];H_t+=(H_v*H_g.a+H_w*H_g.c+H_g.tx)*H_z,H_u+=(H_v*H_g.b+H_w*H_g.d+H_g.ty)*H_z}H_e[H_r]=H_t,H_e[H_r+1]=H_u}}else{var H_A,H_B;if(H_k||(H_k=H_j),H_a.deformData&&(H_k=H_a.deformData),H_A=H_a.parent,H_b)for(H_x=H_b.length,H_l=0;H_l<H_x;H_l++)if(H_b[H_l].name==H_A){H_h=H_b[H_l];break}H_h&&(H_B=H_h.resultMatrix),H_B||(H_B=H_I._tempMt);var H_C=H_B.tx,H_D=H_B.ty,H_E=H_B.a,H_F=H_B.b,H_G=H_B.c,H_H=H_B.d;for(H_h&&(H_H*=H_h.d),H_m=H_c,H_r=H_f;H_r<H_d;H_m+=2,H_r+=2)H_v=H_k[H_m],H_w=H_k[H_m+1],H_e[H_r]=H_v*H_E+H_w*H_F+H_C,H_e[H_r+1]=-(H_v*H_G+H_w*H_H+H_D)}},H_a.computeWorldPositions=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g){H_a.currDisplayData.bones,H_a.currDisplayData.weights,H_a.currDisplayData.triangles;var H_h=[],H_i=0,H_j=H_a.currDisplayData.verLen,H_k=this.position,H_l=this._spaces,H_m=[],H_n=[],H_q=H_j/6,H_r=-1,H_s=NaN,H_t=0,H_u=0,H_v=NaN,H_w=NaN,H_x=NaN,H_y=NaN;if(H_q--,H_j-=4,this.computeWorldVertices2(H_a,H_b,2,H_j,H_h,0),this._debugKey)for(H_i=0;H_i<H_h.length;)H_c.drawCircle(H_h[H_i++],H_h[H_i++],10,"#ff0000");H_m=H_h,this._curves.length=H_q;var H_z=this._curves,H_A=H_m[H_s=0],H_B=H_m[1],H_C=0,H_D=0,H_E=0,H_F=0,H_G=0,H_H=0,H_I=NaN,H_J=NaN,H_K=NaN,H_L=NaN,H_M=NaN,H_N=NaN,H_O=NaN,H_P=NaN,H_Q=0;for(H_i=0,H_Q=2;H_i<H_q;H_i++,H_Q+=6)H_C=H_m[H_Q],H_D=H_m[H_Q+1],H_E=H_m[H_Q+2],H_F=H_m[H_Q+3],H_M=2*(H_I=.1875*(H_A-2*H_C+H_E))+(H_K=.09375*(3*(H_C-H_E)-H_A+(H_G=H_m[H_Q+4]))),H_N=2*(H_J=.1875*(H_B-2*H_D+H_F))+(H_L=.09375*(3*(H_D-H_F)-H_B+(H_H=H_m[H_Q+5]))),H_O=.75*(H_C-H_A)+H_I+.16666667*H_K,H_P=.75*(H_D-H_B)+H_J+.16666667*H_L,H_s+=Math.sqrt(H_O*H_O+H_P*H_P),H_O+=H_M,H_P+=H_N,H_M+=H_K,H_N+=H_L,H_s+=Math.sqrt(H_O*H_O+H_P*H_P),H_O+=H_M,H_P+=H_N,H_s+=Math.sqrt(H_O*H_O+H_P*H_P),H_O+=H_M+H_K,H_P+=H_N+H_L,H_s+=Math.sqrt(H_O*H_O+H_P*H_P),H_z[H_i]=H_s,H_A=H_G,H_B=H_H;if(H_f&&(H_k*=H_s),H_g)for(H_i=0;H_i<H_d;H_i++)H_l[H_i]*=H_s;var H_R=this._segments,H_S=0,H_T=0;for(H_T=H_u=H_t=H_i=0;H_i<H_d;H_i++,H_t+=3)if((H_v=H_k+=H_w=H_l[H_i])<0)this.addBeforePosition(H_v,H_m,0,H_n,H_t);else if(H_s<H_v)this.addAfterPosition(H_v-H_s,H_m,H_j-4,H_n,H_t);else{for(;;H_u++)if(!((H_y=H_z[H_u])<H_v)){0==H_u?H_v/=H_y:H_v=(H_v-(H_x=H_z[H_u-1]))/(H_y-H_x);break}if(H_u!=H_r){var H_U=6*(H_r=H_u);for(H_A=H_m[H_U],H_B=H_m[H_U+1],H_C=H_m[H_U+2],H_D=H_m[H_U+3],H_E=H_m[H_U+4],H_F=H_m[H_U+5],H_M=2*(H_I=.03*(H_A-2*H_C+H_E))+(H_K=.006*(3*(H_C-H_E)-H_A+(H_G=H_m[H_U+6]))),H_N=2*(H_J=.03*(H_B-2*H_D+H_F))+(H_L=.006*(3*(H_D-H_F)-H_B+(H_H=H_m[H_U+7]))),H_O=.3*(H_C-H_A)+H_I+.16666667*H_K,H_P=.3*(H_D-H_B)+H_J+.16666667*H_L,H_S=Math.sqrt(H_O*H_O+H_P*H_P),H_R[0]=H_S,H_U=1;H_U<8;H_U++)H_O+=H_M,H_P+=H_N,H_M+=H_K,H_N+=H_L,H_S+=Math.sqrt(H_O*H_O+H_P*H_P),H_R[H_U]=H_S;H_O+=H_M,H_P+=H_N,H_S+=Math.sqrt(H_O*H_O+H_P*H_P),H_R[8]=H_S,H_O+=H_M+H_K,H_P+=H_N+H_L,H_S+=Math.sqrt(H_O*H_O+H_P*H_P),H_R[9]=H_S,H_T=0}for(H_v*=H_S;;H_T++)if(!((H_y=H_R[H_T])<H_v)){0==H_T?H_v/=H_y:H_v=H_T+(H_v-(H_x=H_R[H_T-1]))/(H_y-H_x);break}this.addCurvePosition(.1*H_v,H_A,H_B,H_C,H_D,H_E,H_F,H_G,H_H,H_n,H_t,H_e||0<H_i&&0==H_w)}return H_n},H_a.addBeforePosition=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_b[H_c],H_g=H_b[H_c+1],H_h=H_b[H_c+2]-H_f,H_i=H_b[H_c+3]-H_g,H_j=Math.atan2(H_i,H_h);H_d[H_e]=H_f+H_a*Math.cos(H_j),H_d[H_e+1]=H_g+H_a*Math.sin(H_j),H_d[H_e+2]=H_j},H_a.addAfterPosition=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_b[H_c+2],H_g=H_b[H_c+3],H_h=H_f-H_b[H_c],H_i=H_g-H_b[H_c+1],H_j=Math.atan2(H_i,H_h);H_d[H_e]=H_f+H_a*Math.cos(H_j),H_d[H_e+1]=H_g+H_a*Math.sin(H_j),H_d[H_e+2]=H_j},H_a.addCurvePosition=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k,H_l){0==H_a&&(H_a=1e-4);var H_m=H_a*H_a,H_n=H_m*H_a,H_q=1-H_a,H_r=H_q*H_q,H_s=H_r*H_q,H_t=H_q*H_a,H_u=3*H_t,H_v=H_q*H_u,H_w=H_u*H_a,H_x=H_b*H_s+H_d*H_v+H_f*H_w+H_h*H_n,H_y=H_c*H_s+H_e*H_v+H_g*H_w+H_i*H_n;H_j[H_k]=H_x,H_j[H_k+1]=H_y,H_j[H_k+2]=H_l?Math.atan2(H_y-(H_c*H_r+H_e*H_t*2+H_g*H_m),H_x-(H_b*H_r+H_d*H_t*2+H_f*H_m)):0},H_I.NONE=-1,H_I.BEFORE=-2,H_I.AFTER=-3,H_c(H_I,["_tempMt",function(){return this._tempMt=new H_Ga}]),H_I}(),H_Qa=function(){function H_a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return H_d(H_a,"laya.ani.bone.PathConstraintData"),H_a}(),H_Ra=function(){function H_a(){this.name=null,this.slotArr=[]}return H_d(H_a,"laya.ani.bone.SkinData"),H_a}(),H_Sa=function(){function H_a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}H_d(H_a,"laya.ani.bone.SkinSlotDisplayData");var H_b=H_a.prototype;return H_b.createTexture=function(H_a){return this.texture||(this.texture=new H_Ha(H_a.bitmap,this.uvs),H_a.bitmap.alphaTexture&&(this.texture.alphaTexture=new H_Ha(H_a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=H_a.height,this.texture.height=H_a.width,this.texture.offsetX=-H_a.offsetX,this.texture.offsetY=-H_a.offsetY,this.texture.sourceWidth=H_a.sourceHeight,this.texture.sourceHeight=H_a.sourceWidth):(this.texture.width=H_a.width,this.texture.height=H_a.height,this.texture.offsetX=-H_a.offsetX,this.texture.offsetY=-H_a.offsetY,this.texture.sourceWidth=H_a.sourceWidth,this.texture.sourceHeight=H_a.sourceHeight),H_s.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},H_b.destory=function(){this.texture&&this.texture.destroy()},H_a}(),H_Ta=function(){function H_a(){this.name=null,this.displayArr=[]}return H_d(H_a,"laya.ani.bone.SlotData"),H_a.prototype.getDisplayByName=function(H_a){for(var H_b=0,H_c=this.displayArr.length;H_b<H_c;H_b++)if(this.displayArr[H_b].attachmentName==H_a)return H_b;return-1},H_a}(),H_y=function(){function H_a(H_a,H_b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=H_r(2,0),this._data=H_a,null==this._bones&&(this._bones=[]),this.target=H_b[H_a.targetIndex];var H_c,H_d=0;for(H_d=0,H_c=H_a.boneIndexs.length;H_d<H_c;H_d++)this._bones.push(H_b[H_a.boneIndexs[H_d]]);this.rotateMix=H_a.rotateMix,this.translateMix=H_a.translateMix,this.scaleMix=H_a.scaleMix,this.shearMix=H_a.shearMix}return H_d(H_a,"laya.ani.bone.TfConstraint"),H_a.prototype.apply=function(){for(var H_a,H_b=this.target.resultMatrix.a,H_c=this.target.resultMatrix.b,H_d=this.target.resultMatrix.c,H_e=this.target.resultMatrix.d,H_f=0,H_g=this._bones.length;H_f<H_g;H_f++){if(H_a=this._bones[H_f],0<this.rotateMix){var H_h=H_a.resultMatrix.a,H_i=H_a.resultMatrix.b,H_j=H_a.resultMatrix.c,H_k=H_a.resultMatrix.d,H_l=Math.atan2(H_d,H_b)-Math.atan2(H_j,H_h)+this._data.offsetRotation*Math.PI/180;H_l>Math.PI?H_l-=2*Math.PI:H_l<-Math.PI&&(H_l+=2*Math.PI),H_l*=this.rotateMix;var H_m=Math.cos(H_l),H_n=Math.sin(H_l);H_a.resultMatrix.a=H_m*H_h-H_n*H_j,H_a.resultMatrix.b=H_m*H_i-H_n*H_k,H_a.resultMatrix.c=H_n*H_h+H_m*H_j,H_a.resultMatrix.d=H_n*H_i+H_m*H_k}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),H_a.resultMatrix.tx+=(this._temp[0]-H_a.resultMatrix.tx)*this.translateMix,H_a.resultMatrix.ty+=(this._temp[1]-H_a.resultMatrix.ty)*this.translateMix,H_a.updateChild()),0<this.scaleMix){var H_q=Math.sqrt(H_a.resultMatrix.a*H_a.resultMatrix.a+H_a.resultMatrix.c*H_a.resultMatrix.c),H_r=Math.sqrt(H_b*H_b+H_d*H_d),H_s=1e-5<H_q?(H_q+(H_r-H_q+this._data.offsetScaleX)*this.scaleMix)/H_q:0;H_a.resultMatrix.a*=H_s,H_a.resultMatrix.c*=H_s,H_q=Math.sqrt(H_a.resultMatrix.b*H_a.resultMatrix.b+H_a.resultMatrix.d*H_a.resultMatrix.d),H_r=Math.sqrt(H_c*H_c+H_e*H_e),H_s=1e-5<H_q?(H_q+(H_r-H_q+this._data.offsetScaleY)*this.scaleMix)/H_q:0,H_a.resultMatrix.b*=H_s,H_a.resultMatrix.d*=H_s}if(0<this.shearMix){H_i=H_a.resultMatrix.b,H_k=H_a.resultMatrix.d;var H_t=Math.atan2(H_k,H_i);(H_l=Math.atan2(H_e,H_c)-Math.atan2(H_d,H_b)-(H_t-Math.atan2(H_a.resultMatrix.c,H_a.resultMatrix.a)))>Math.PI?H_l-=2*Math.PI:H_l<-Math.PI&&(H_l+=2*Math.PI),H_l=H_t+(H_l+this._data.offsetShearY*Math.PI/180)*this.shearMix,H_s=Math.sqrt(H_i*H_i+H_k*H_k),H_a.resultMatrix.b=Math.cos(H_l)*H_s,H_a.resultMatrix.d=Math.sin(H_l)*H_s}}},H_a}(),H_Ua=function(){function H_a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return H_d(H_a,"laya.ani.bone.TfConstraintData"),H_a}(),H_Va=function(){function H_a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}H_d(H_a,"laya.ani.bone.Transform");var H_b=H_a.prototype;return H_b.initData=function(H_a){null!=H_a.x&&(this.x=H_a.x),null!=H_a.y&&(this.y=H_a.y),null!=H_a.skX&&(this.skX=H_a.skX),null!=H_a.skY&&(this.skY=H_a.skY),null!=H_a.scX&&(this.scX=H_a.scX),null!=H_a.scY&&(this.scY=H_a.scY)},H_b.getMatrix=function(){var H_a;return(H_a=this.mMatrix?this.mMatrix:this.mMatrix=new H_Ga).identity(),H_a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(H_a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),H_a.rotate(this.skX*Math.PI/180),H_a.translate(this.x,this.y),H_a},H_b.skew=function(H_a,H_b,H_c){var H_d=Math.sin(H_c),H_e=Math.cos(H_c),H_f=Math.sin(H_b),H_g=Math.cos(H_b);return H_a.setTo(H_a.a*H_g-H_a.b*H_d,H_a.a*H_f+H_a.b*H_e,H_a.c*H_g-H_a.d*H_d,H_a.c*H_f+H_a.d*H_e,H_a.tx*H_g-H_a.ty*H_d,H_a.tx*H_f+H_a.ty*H_e),H_a},H_a}(),H_z=function(){function H_a(){}return H_d(H_a,"laya.ani.bone.UVTools"),H_a.getRelativeUV=function(H_a,H_b,H_c){var H_d=H_a[0],H_e=H_a[2]-H_a[0],H_f=H_a[1],H_g=H_a[5]-H_a[1];H_c||(H_c=[]),H_c.length=H_b.length;var H_h,H_i=0;H_h=H_c.length;var H_j=1/H_e,H_k=1/H_g;for(H_i=0;H_i<H_h;H_i+=2)H_c[H_i]=(H_b[H_i]-H_d)*H_j,H_c[H_i+1]=(H_b[H_i+1]-H_f)*H_k;return H_c},H_a.getAbsoluteUV=function(H_a,H_b,H_c){if(0==H_a[0]&&0==H_a[1]&&1==H_a[4]&&1==H_a[5])return H_c?(H_t.copyArray(H_c,H_b),H_c):H_b;var H_d=H_a[0],H_e=H_a[2]-H_a[0],H_f=H_a[1],H_g=H_a[5]-H_a[1];H_c||(H_c=[]),H_c.length=H_b.length;var H_h,H_i=0;for(H_h=H_c.length,H_i=0;H_i<H_h;H_i+=2)H_c[H_i]=H_b[H_i]*H_e+H_d,H_c[H_i+1]=H_b[H_i+1]*H_g+H_f;return H_c},H_a}(),H_I=function(){function H_a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return H_d(H_a,"laya.ani.KeyFramesContent"),H_a}(),H_A=function(){function H_k(){}return H_d(H_k,"laya.ani.math.BezierLerp"),H_k.getBezierRate=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_k._getBezierParamKey(H_b,H_c,H_d,H_e),H_g=100*H_f+H_a;if(H_k._bezierResultCache[H_g])return H_k._bezierResultCache[H_g];var H_h,H_i=H_k._getBezierPoints(H_b,H_c,H_d,H_e,H_f),H_j=0;for(H_h=H_i.length,H_j=0;H_j<H_h;H_j+=2)if(H_a<=H_i[H_j])return H_k._bezierResultCache[H_g]=H_i[H_j+1],H_i[H_j+1];return H_k._bezierResultCache[H_g]=1},H_k._getBezierParamKey=function(H_a,H_b,H_c,H_d){return 100*(100*(100*(100*H_a+H_b)+H_c)+H_d)},H_k._getBezierPoints=function(H_a,H_b,H_c,H_d,H_e){return H_k._bezierPointsCache[H_e]?H_k._bezierPointsCache[H_e]:(H_f=[0,0,H_a,H_b,H_c,H_d,1,1],H_g=(new H_h).getBezierPoints(H_f,100,3),H_k._bezierPointsCache[H_e]=H_g);var H_f,H_g},H_k._bezierResultCache={},H_k._bezierPointsCache={},H_k}(),H_B=function(H_a){function H_b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,H_b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}H_d(H_b,"laya.ani.AnimationPlayer",H_e);var H_c=H_b.prototype;return H_ea.imps(H_c,{"laya.resource.IDestroy":!0}),H_c._onTempletLoadedComputeFullKeyframeIndices=function(H_a,H_b,H_c){this._templet===H_c&&this._cachePlayRate===H_a&&this._cacheFrameRate===H_b&&this._computeFullKeyframeIndices()},H_c._computeFullKeyframeIndices=function(){for(var H_a=this._fullFrames=[],H_b=this._templet,H_c=this._cacheFrameRateInterval*this._cachePlayRate,H_d=0,H_e=H_b.getAnimationCount();H_d<H_e;H_d++){for(var H_f=[],H_g=0,H_h=H_b.getAnimation(H_d).nodes.length;H_g<H_h;H_g++){for(var H_i=H_b.getAnimation(H_d).nodes[H_g],H_j=Math.floor(H_i.playTime/H_c+.01),H_k=new Uint16Array(H_j+1),H_l=-1,H_m=0,H_n=H_i.keyFrame.length;H_m<H_n;H_m++){var H_q=H_i.keyFrame[H_m],H_r=H_q.startTime,H_s=H_r+H_q.duration+H_c;do{for(var H_t=Math.floor(H_r/H_c+.5),H_u=H_l+1;H_u<H_t;H_u++)H_k[H_u]=H_m;H_k[H_l=H_t]=H_m,H_r+=H_c}while(H_r<=H_s)}H_f.push(H_k)}H_a.push(H_f)}},H_c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},H_c._calculatePlayDuration=function(){if(0!==this.state){var H_a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=H_a),this._playEnd>H_a&&(this._playEnd=H_a),this._playDuration=this._playEnd-this._playStart}},H_c._setPlayParams=function(H_a,H_b){this._currentTime=H_a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H_b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H_b},H_c._setPlayParamsWhenStop=function(H_a,H_b){this._currentTime=H_a,this._currentKeyframeIndex=Math.max(Math.floor(H_a/H_b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H_b,this._currentAnimationClipIndex=-1},H_c._update=function(H_a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var H_b=this._cacheFrameRateInterval*this._cachePlayRate,H_c=0;this._startUpdateLoopCount!==H_q.loopCount&&(H_c=H_a*this.playbackRate,this._elapsedPlaybackTime+=H_c);var H_d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=H_d)return this._setPlayParamsWhenStop(H_d,H_b),void this.event("stopped");if(H_c+=this._currentTime,0<H_d)if(H_d<=H_c)do{if(H_c-=H_d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H_d,H_b),this._stopWhenCircleFinish=!1,void this.event("stopped");H_c<H_d&&(this._setPlayParams(H_c,H_b),this.event("complete"))}while(H_d<=H_c);else this._setPlayParams(H_c,H_b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H_d,H_b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},H_c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},H_c.play=function(H_a,H_b,H_c,H_d,H_e){if(void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=1),void 0===H_c&&(H_c=2147483647),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(H_c<0||H_d<0||H_e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==H_e&&H_e<H_d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=H_b,this._overallDuration=H_c,this._playStart=H_d,this._playEnd=H_e,this._paused=!1,this._currentAnimationClipIndex=H_a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=H_q.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},H_c.playByFrame=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_a&&(H_a=0),void 0===H_b&&(H_b=1),void 0===H_c&&(H_c=2147483647),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=30);var H_g=1e3/H_f;this.play(H_a,H_b,H_c,H_d*H_g,H_e*H_g)},H_c.stop=function(H_a){void 0===H_a&&(H_a=!0),H_a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},H_f(0,H_c,"playEnd",function(){return this._playEnd}),H_f(0,H_c,"templet",function(){return this._templet},function(H_a){0===!this.state&&this.stop(!0),this._templet!==H_a&&((this._templet=H_a).loaded?this._computeFullKeyframeIndices():H_a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),H_f(0,H_c,"playStart",function(){return this._playStart}),H_f(0,H_c,"playDuration",function(){return this._playDuration}),H_f(0,H_c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),H_f(0,H_c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),H_f(0,H_c,"overallDuration",function(){return this._overallDuration}),H_f(0,H_c,"currentFrameTime",function(){return this._currentFrameTime}),H_f(0,H_c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),H_f(0,H_c,"currentPlayTime",function(){return this._currentTime+this._playStart}),H_f(0,H_c,"cachePlayRate",function(){return this._cachePlayRate},function(H_a){this._cachePlayRate!==H_a&&(this._cachePlayRate=H_a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[H_a,this._cacheFrameRate])))}),H_f(0,H_c,"cacheFrameRate",function(){return this._cacheFrameRate},function(H_a){this._cacheFrameRate!==H_a&&(this._cacheFrameRate=H_a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,H_a])))}),H_f(0,H_c,"currentTime",null,function(H_a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(H_a<this._playStart||H_a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=H_q.loopCount;var H_b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=H_a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H_b),0),this._currentFrameTime=this._currentKeyframeIndex*H_b}}),H_f(0,H_c,"paused",function(){return this._paused},function(H_a){(this._paused=H_a)&&this.event("paused")}),H_f(0,H_c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),H_f(0,H_c,"destroyed",function(){return this._destroyed}),H_b}(),H_J=function(H_a){function H_b(){H_b.__super.call(this),H_s.isConchNode&&(this.drawSkin=function(H_a){H_a.transform||(H_a.transform=H_Ga.EMPTY),this._addCmd([H_a]),this.setSkinMesh&&this.setSkinMesh(H_a._ps,H_a.mVBData,H_a.mEleNum,0,H_a.mTexture,H_a.transform)})}return H_d(H_b,"laya.ani.GraphicsAni",H_g),H_b.prototype.drawSkin=function(H_a){var H_b=[H_a];this._saveToCmd(H_s._context._drawSkin,H_b)},H_b.create=function(){return H_b._caches.pop()||new H_b},H_b.recycle=function(H_a){H_a.clear(),H_b._caches.push(H_a)},H_b._caches=[],H_b}(),H_K=function(H_a){function H_u(){this._aniMap={},this.unfixedLastAniIndex=-1,H_u.__super.call(this),this._anis=new Array}H_d(H_u,"laya.ani.AnimationTemplet",H_k);var H_b=H_u.prototype;return H_b.parse=function(H_a){var H_b=new H_Fa(H_a);this._aniVersion=H_b.readUTFString(),H_v.parse(this,H_b)},H_b._calculateKeyFrame=function(H_a,H_b,H_c){var H_d=H_a.keyFrame;H_d[H_b]=H_d[0];for(var H_e=0;H_e<H_b;H_e++){var H_f=H_d[H_e];H_f.nextData=0===H_f.duration?H_f.data:H_d[H_e+1].data}H_d.length--},H_b.onAsynLoaded=function(H_a,H_b,H_c){var H_d=new H_Fa(H_b);switch(this._aniVersion=H_d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":H_w.parse(this,H_d);break;default:H_v.parse(this,H_d)}this._endLoaded()},H_b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},H_b.getAnimationCount=function(){return this._anis.length},H_b.getAnimation=function(H_a){return this._anis[H_a]},H_b.getAniDuration=function(H_a){return this._anis[H_a].playTime},H_b.getNodes=function(H_a){return this._anis[H_a].nodes},H_b.getNodeIndexWithName=function(H_a,H_b){return this._anis[H_a].bone3DMap[H_b]},H_b.getNodeCount=function(H_a){return this._anis[H_a].nodes.length},H_b.getTotalkeyframesLength=function(H_a){return this._anis[H_a].totalKeyframeDatasLength},H_b.getPublicExtData=function(){return this._publicExtData},H_b.getAnimationDataWithCache=function(H_a,H_b,H_c,H_d){var H_e=H_b[H_c];if(H_e){var H_f=H_e[H_a];return H_f?H_f[H_d]:null}return null},H_b.setAnimationDataWithCache=function(H_a,H_b,H_c,H_d,H_e){var H_f=H_b[H_c]||(H_b[H_c]={});(H_f[H_a]||(H_f[H_a]=[]))[H_d]=H_e},H_b.getOriginalData=function(H_a,H_b,H_c,H_d,H_e){for(var H_f=this._anis[H_a].nodes,H_g=0,H_h=0,H_i=H_f.length,H_j=0;H_h<H_i;H_h++){var H_k,H_l=H_f[H_h];H_k=H_l.keyFrame[H_c[H_h][H_d]],H_l.dataOffset=H_j;var H_m=H_e-H_k.startTime,H_n=H_l.lerpType;if(H_n)switch(H_n){case 0:case 1:for(H_g=0;H_g<H_l.keyframeWidth;)H_g+=H_l.interpolationMethod[H_g](H_l,H_g,H_b,H_j+H_g,H_k.data,H_m,null,H_k.duration,H_k.nextData);break;case 2:var H_q=H_k.interpolationData,H_r=H_q.length,H_s=0;for(H_g=0;H_g<H_r;){var H_t=H_q[H_g];switch(H_t){case 6:case 7:H_g+=H_u.interpolation[H_t](H_l,H_s,H_b,H_j+H_s,H_k.data,H_m,null,H_k.duration,H_k.nextData,H_q,H_g+1);break;default:H_g+=H_u.interpolation[H_t](H_l,H_s,H_b,H_j+H_s,H_k.data,H_m,null,H_k.duration,H_k.nextData)}H_s++}}else for(H_g=0;H_g<H_l.keyframeWidth;)H_g+=H_l.interpolationMethod[H_g](H_l,H_g,H_b,H_j+H_g,H_k.data,H_m,null,H_k.duration,H_k.nextData);H_j+=H_l.keyframeWidth}},H_b.getNodesCurrentFrameIndex=function(H_a,H_b){var H_c=this._anis[H_a].nodes;H_a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H_c.length),this.unfixedCurrentTimes=new Float32Array(H_c.length),this.unfixedLastAniIndex=H_a);for(var H_d=0,H_e=H_c.length;H_d<H_e;H_d++){var H_f=H_c[H_d];for(H_b<this.unfixedCurrentTimes[H_d]&&(this.unfixedCurrentFrameIndexes[H_d]=0),this.unfixedCurrentTimes[H_d]=H_b;this.unfixedCurrentFrameIndexes[H_d]<H_f.keyFrame.length&&!(H_f.keyFrame[this.unfixedCurrentFrameIndexes[H_d]].startTime>this.unfixedCurrentTimes[H_d]);)this.unfixedCurrentFrameIndexes[H_d]++;this.unfixedCurrentFrameIndexes[H_d]--}return this.unfixedCurrentFrameIndexes},H_b.getOriginalDataUnfixedRate=function(H_a,H_b,H_c){var H_d=this._anis[H_a].nodes;H_a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H_d.length),this.unfixedCurrentTimes=new Float32Array(H_d.length),this.unfixedKeyframes=H_r(H_d.length),this.unfixedLastAniIndex=H_a);for(var H_e=0,H_f=0,H_g=H_d.length,H_h=0;H_f<H_g;H_f++){var H_i=H_d[H_f];for(H_c<this.unfixedCurrentTimes[H_f]&&(this.unfixedCurrentFrameIndexes[H_f]=0),this.unfixedCurrentTimes[H_f]=H_c;this.unfixedCurrentFrameIndexes[H_f]<H_i.keyFrame.length&&!(H_i.keyFrame[this.unfixedCurrentFrameIndexes[H_f]].startTime>this.unfixedCurrentTimes[H_f]);)this.unfixedKeyframes[H_f]=H_i.keyFrame[this.unfixedCurrentFrameIndexes[H_f]],this.unfixedCurrentFrameIndexes[H_f]++;var H_j=this.unfixedKeyframes[H_f];H_i.dataOffset=H_h;var H_k=H_c-H_j.startTime;if(H_i.lerpType)switch(H_i.lerpType){case 0:case 1:for(H_e=0;H_e<H_i.keyframeWidth;)H_e+=H_i.interpolationMethod[H_e](H_i,H_e,H_b,H_h+H_e,H_j.data,H_k,null,H_j.duration,H_j.nextData);break;case 2:var H_l=H_j.interpolationData,H_m=H_l.length,H_n=0;for(H_e=0;H_e<H_m;){var H_q=H_l[H_e];switch(H_q){case 6:case 7:H_e+=H_u.interpolation[H_q](H_i,H_n,H_b,H_h+H_n,H_j.data,H_k,null,H_j.duration,H_j.nextData,H_l,H_e+1);break;default:H_e+=H_u.interpolation[H_q](H_i,H_n,H_b,H_h+H_n,H_j.data,H_k,null,H_j.duration,H_j.nextData)}H_n++}}else for(H_e=0;H_e<H_i.keyframeWidth;)H_e+=H_i.interpolationMethod[H_e](H_i,H_e,H_b,H_h+H_e,H_j.data,H_k,null,H_j.duration,H_j.nextData);H_h+=H_i.keyframeWidth}},H_u._LinearInterpolation_0=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){var H_k=0===H_h?0:H_f/H_h;return H_c[H_d]=(1-H_k)*H_e[H_b]+H_k*H_i[H_b],1},H_u._QuaternionInterpolation_1=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){var H_k=0===H_h?0:H_f/H_h;return H_m.slerpQuaternionArray(H_e,H_b,H_i,H_b,H_k,H_c,H_d),4},H_u._AngleInterpolation_2=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return 0},H_u._RadiansInterpolation_3=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return 0},H_u._Matrix4x4Interpolation_4=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){for(var H_k=0;H_k<16;H_k++,H_b++)H_c[H_d+H_k]=H_e[H_b]+H_f*H_g[H_b];return 16},H_u._NoInterpolation_5=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j){return H_c[H_d]=H_e[H_b],1},H_u._BezierInterpolation_6=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k){return void 0===H_k&&(H_k=0),H_c[H_d]=H_e[H_b]+(H_i[H_b]-H_e[H_b])*H_A.getBezierRate(H_f/H_h,H_j[H_k],H_j[H_k+1],H_j[H_k+2],H_j[H_k+3]),5},H_u._BezierInterpolation_7=function(H_a,H_b,H_c,H_d,H_e,H_f,H_g,H_h,H_i,H_j,H_k){return void 0===H_k&&(H_k=0),H_c[H_d]=H_j[H_k+4]+H_j[H_k+5]*H_A.getBezierRate((.001*H_f+H_j[H_k+6])/H_j[H_k+7],H_j[H_k],H_j[H_k+1],H_j[H_k+2],H_j[H_k+3]),9},H_u.load=function(H_a){return H_ea.loader.create(H_a,null,null,H_u)},H_u.interpolation=[H_u._LinearInterpolation_0,H_u._QuaternionInterpolation_1,H_u._AngleInterpolation_2,H_u._RadiansInterpolation_3,H_u._Matrix4x4Interpolation_4,H_u._NoInterpolation_5,H_u._BezierInterpolation_6,H_u._BezierInterpolation_7],H_u}(),H_C=function(H_b){function H_c(H_a,H_b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,H_c.__super.call(this),void 0===H_b&&(H_b=0),H_a&&this.init(H_a,H_b)}H_d(H_c,"laya.ani.bone.Skeleton",H_b);var H_a=H_c.prototype;return H_a.init=function(H_a,H_b){void 0===H_b&&(H_b=0);var H_c,H_d,H_e,H_f=0,H_g=0;if(1==H_b)for(this._graphicsCache=[],H_f=0,H_g=H_a.getAnimationCount();H_f<H_g;H_f++)this._graphicsCache.push([]);if(this._yReverseMatrix=H_a.yReverseMatrix,this._aniMode=H_b,this._templet=H_a,this._player=new H_B,this._player.cacheFrameRate=H_a.rate,this._player.templet=H_a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=H_a.mBoneArr,this._rootBone=H_a.mRootBone,this._aniSectionDic=H_a.aniSectionDic,0<H_a.ikArr.length)for(this._ikArr=[],H_f=0,H_g=H_a.ikArr.length;H_f<H_g;H_f++)this._ikArr.push(new H_u(H_a.ikArr[H_f],this._boneList));if(0<H_a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),H_f=0,H_g=H_a.pathArr.length;H_f<H_g;H_f++)H_c=H_a.pathArr[H_f],H_d=new H_x(H_c,this._boneList),(H_e=this._boneSlotDic[H_c.name])&&((H_d=new H_x(H_c,this._boneList)).target=H_e),this._pathDic[H_c.name]=H_d;if(0<H_a.tfArr.length)for(this._tfArr=[],H_f=0,H_g=H_a.tfArr.length;H_f<H_g;H_f++)this._tfArr.push(new H_y(H_a.tfArr[H_f],this._boneList));if(0<H_a.skinDataArray.length){var H_h=this._templet.skinDataArray[this._skinIndex];this._skinName=H_h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},H_a.load=function(H_a,H_b,H_c){},H_a._onLoaded=function(){},H_a._parseComplete=function(){var H_a=H_D.TEMPLET_DICTIONARY[this._aniPath];H_a&&(this.init(H_a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},H_a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},H_a._onPlay=function(){this.event("played")},H_a._onStop=function(){var H_a,H_b=this._templet.eventAniArr[this._aniClipIndex];if(H_b&&this._eventIndex<H_b.length)for(;this._eventIndex<H_b.length;this._eventIndex++)(H_a=H_b[this._eventIndex]).time>=this._player.playStart&&H_a.time<=this._player.playEnd&&this.event("label",H_a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},H_a._onPause=function(){this.event("paused")},H_a._parseSrcBoneMatrix=function(){var H_a=0,H_b=0;for(H_b=this._templet.srcBoneMatrixArr.length,H_a=0;H_a<H_b;H_a++)this._boneMatrixArray.push(new H_Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var H_c,H_d,H_e=this._templet.boneSlotArray;for(H_a=0,H_b=H_e.length;H_a<H_b;H_a++)H_c=H_e[H_a],null==(H_d=this._bindBoneBoneSlotDic[H_c.parent])&&(this._bindBoneBoneSlotDic[H_c.parent]=H_d=[]),this._boneSlotDic[H_c.name]=H_c=H_c.copy(),H_d.push(H_c),this._boneSlotArray.push(H_c)}},H_a._emitMissedEvents=function(H_a,H_b,H_c){void 0===H_c&&(H_c=0);var H_d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(H_d){var H_e,H_f,H_g=0;for(H_e=H_d.length,H_g=H_c;H_g<H_e;H_g++)(H_f=H_d[H_g]).time>=this._player.playStart&&H_f.time<=this._player.playEnd&&this.event("label",H_f)}},H_a._update=function(H_a){if(void 0===H_a&&(H_a=!0),!(this._pause||H_a&&this._indexControl)){var H_b=this.timer.currTimer,H_c=this._player.currentKeyframeIndex,H_d=H_b-this._lastTime;if(H_a?this._player._update(H_d):H_c=-1,this._lastTime=H_b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<H_d&&this._clipIndex==H_c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var H_e;this._lastUpdateAniClipIndex=this._aniClipIndex,H_c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var H_f,H_g=this._templet.eventAniArr[this._aniClipIndex];if(H_g&&this._eventIndex<H_g.length&&((H_e=H_g[this._eventIndex]).time>=this._player.playStart&&H_e.time<=this._player.playEnd?this._player.currentPlayTime>=H_e.time&&(this.event("label",H_e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(H_f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H_f&&(this.graphics=H_f));var H_h=0,H_i=0;for(H_i=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,H_i-1)&&0<H_i;)H_i--;if(H_i<this._clipIndex)for(H_h=H_i;H_h<this._clipIndex;H_h++)this._createGraphics(H_h)}else if(1==this._aniMode){if(H_f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H_f&&(this.graphics=H_f));for(H_i=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,H_i-1)&&0<H_i;)H_i--;if(H_i<this._clipIndex)for(H_h=H_i;H_h<this._clipIndex;H_h++)this._createGraphics(H_h)}this._createGraphics()}}},H_a._createGraphics=function(H_a){void 0===H_a&&(H_a=-1),-1==H_a&&(H_a=this._clipIndex);var H_b,H_c,H_d=H_a*this._player.cacheFrameRateInterval,H_e=this._templet.drawOrderAniArr[this._aniClipIndex];if(H_e&&0<H_e.length)for(this._drawOrderIndex=0,H_b=H_e[this._drawOrderIndex];H_d>=H_b.time&&(this._drawOrder=H_b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=H_e.length));)H_b=H_e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=H_J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=H_J.create(),H_c=this.graphics;var H_f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],H_a,H_d);var H_g,H_h,H_i,H_j,H_k=this._aniSectionDic[this._aniClipIndex],H_l=0,H_m=0,H_n=0,H_q=0,H_r=0,H_s=this._templet.srcBoneMatrixArr.length;for(H_r=H_k[H_m=0];H_m<H_s;H_m++)H_j=this._boneList[H_m],H_i=this._templet.srcBoneMatrixArr[H_m],H_j.resultTransform.scX=H_i.scX*this._curOriginalData[H_l++],H_j.resultTransform.skX=H_i.skX+this._curOriginalData[H_l++],H_j.resultTransform.skY=H_i.skY+this._curOriginalData[H_l++],H_j.resultTransform.scY=H_i.scY*this._curOriginalData[H_l++],H_j.resultTransform.x=H_i.x+this._curOriginalData[H_l++],H_j.resultTransform.y=H_i.y+this._curOriginalData[H_l++],8===this._templet.tMatrixDataLen&&(H_j.resultTransform.skewX=H_i.skewX+this._curOriginalData[H_l++],H_j.resultTransform.skewY=H_i.skewY+this._curOriginalData[H_l++]);var H_t,H_u={},H_v={};for(H_r+=H_k[1];H_m<H_r;H_m++)H_u[(H_t=H_f[H_m]).name]=this._curOriginalData[H_l++],H_v[H_t.name]=this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++];var H_w,H_x,H_y={},H_z={};for(H_r+=H_k[2];H_m<H_r;H_m++)H_y[(H_t=H_f[H_m]).name]=this._curOriginalData[H_l++],H_z[H_t.name]=this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++],this._curOriginalData[H_l++];if(this._pathDic)for(H_r+=H_k[3];H_m<H_r;H_m++){if(H_t=H_f[H_m],H_w=this._pathDic[H_t.name])switch(new H_Fa(H_t.extenData).getByte()){case 1:H_w.position=this._curOriginalData[H_l++];break;case 2:H_w.spacing=this._curOriginalData[H_l++];break;case 3:H_w.rotateMix=this._curOriginalData[H_l++],H_w.translateMix=this._curOriginalData[H_l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(H_Ga.TEMP.identity()),this._ikArr)for(H_m=0,H_r=this._ikArr.length;H_m<H_r;H_m++)H_x=this._ikArr[H_m],H_y.hasOwnProperty(H_x.name)&&(H_x.bendDirection=H_y[H_x.name]),H_z.hasOwnProperty(H_x.name)&&(H_x.mix=H_z[H_x.name]),H_x.apply();if(this._pathDic)for(var H_A in this._pathDic)(H_w=this._pathDic[H_A]).apply(this._boneList,H_c);if(this._tfArr)for(H_m=0,H_q=this._tfArr.length;H_m<H_q;H_m++)this._tfArr[H_m].apply();for(H_m=0,H_q=this._boneList.length;H_m<H_q;H_m++)if(H_j=this._boneList[H_m],H_h=this._bindBoneBoneSlotDic[H_j.name],H_j.resultMatrix.copyTo(this._boneMatrixArray[H_m]),H_h)for(H_n=0,H_r=H_h.length;H_n<H_r;H_n++)(H_g=H_h[H_n])&&H_g.setParentMatrix(H_j.resultMatrix);var H_B,H_C,H_D,H_E,H_F={},H_G=this._templet.deformAniArr;if(H_G&&0<H_G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,H_m=0,H_r=this._boneSlotArray.length;H_m<H_r;H_m++)(H_g=this._boneSlotArray[H_m]).deformData=null;var H_H,H_I=H_G[this._aniClipIndex];for(H_H in H_B=H_I.default,this._setDeform(H_B,H_F,this._boneSlotArray,H_d),H_I)"default"!=H_H&&H_H!=this._skinName&&(H_B=H_I[H_H],this._setDeform(H_B,H_F,this._boneSlotArray,H_d));H_B=H_I[this._skinName],this._setDeform(H_B,H_F,this._boneSlotArray,H_d)}if(this._drawOrder)for(H_m=0,H_r=this._drawOrder.length;H_m<H_r;H_m++)H_C=H_u[(H_g=this._boneSlotArray[this._drawOrder[H_m]]).name],H_D=H_v[H_g.name],isNaN(H_D)||(H_c.save(),H_c.alpha(H_D)),isNaN(H_C)||-2==H_C||(this._templet.attachmentNames?H_g.showDisplayByName(this._templet.attachmentNames[H_C]):H_g.showDisplayByIndex(H_C)),H_F[this._drawOrder[H_m]]?(H_E=H_F[this._drawOrder[H_m]],H_g.currDisplayData&&H_E[H_g.currDisplayData.attachmentName]?H_g.deformData=H_E[H_g.currDisplayData.attachmentName]:H_g.deformData=null):H_g.deformData=null,isNaN(H_D)?H_g.draw(H_c,this._boneMatrixArray,2==this._aniMode):H_g.draw(H_c,this._boneMatrixArray,2==this._aniMode,H_D),isNaN(H_D)||H_c.restore();else for(H_m=0,H_r=this._boneSlotArray.length;H_m<H_r;H_m++)H_C=H_u[(H_g=this._boneSlotArray[H_m]).name],H_D=H_v[H_g.name],isNaN(H_D)||(H_c.save(),H_c.alpha(H_D)),isNaN(H_C)||-2==H_C||(this._templet.attachmentNames?H_g.showDisplayByName(this._templet.attachmentNames[H_C]):H_g.showDisplayByIndex(H_C)),H_F[H_m]?(H_E=H_F[H_m],H_g.currDisplayData&&H_E[H_g.currDisplayData.attachmentName]?H_g.deformData=H_E[H_g.currDisplayData.attachmentName]:H_g.deformData=null):H_g.deformData=null,isNaN(H_D)?H_g.draw(H_c,this._boneMatrixArray,2==this._aniMode):H_g.draw(H_c,this._boneMatrixArray,2==this._aniMode,H_D),isNaN(H_D)||H_c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,H_a,H_c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,H_a,H_c)},H_a._setDeform=function(H_a,H_b,H_c,H_d){if(H_a){var H_e,H_f,H_g,H_h=0,H_i=0,H_j=0;if(H_a)for(H_h=0,H_i=H_a.deformSlotDataList.length;H_h<H_i;H_h++)for(H_e=H_a.deformSlotDataList[H_h],H_j=0;H_j<H_e.deformSlotDisplayList.length;H_j++)H_g=H_c[(H_f=H_e.deformSlotDisplayList[H_j]).slotIndex],H_f.apply(H_d,H_g),H_b[H_f.slotIndex]||(H_b[H_f.slotIndex]={}),H_b[H_f.slotIndex][H_f.attachment]=H_f.deformData}},H_a.getAnimNum=function(){return this._templet.getAnimationCount()},H_a.getAniNameByIndex=function(H_a){return this._templet.getAniNameByIndex(H_a)},H_a.getSlotByName=function(H_a){return this._boneSlotDic[H_a]},H_a.showSkinByName=function(H_a,H_b){void 0===H_b&&(H_b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(H_a),H_b)},H_a.showSkinByIndex=function(H_a,H_b){void 0===H_b&&(H_b=!0);for(var H_c=0;H_c<this._boneSlotArray.length;H_c++)this._boneSlotArray[H_c].showSlotData(null,H_b);if(this._templet.showSkinByIndex(this._boneSlotDic,H_a,H_b)){var H_d=this._templet.skinDataArray[H_a];this._skinIndex=H_a,this._skinName=H_d.name}this._clearCache()},H_a.showSlotSkinByIndex=function(H_a,H_b){if(0!=this._aniMode){var H_c=this.getSlotByName(H_a);H_c&&H_c.showDisplayByIndex(H_b),this._clearCache()}},H_a.showSlotSkinByName=function(H_a,H_b){if(0!=this._aniMode){var H_c=this.getSlotByName(H_a);H_c&&H_c.showDisplayByName(H_b),this._clearCache()}},H_a.replaceSlotSkinName=function(H_a,H_b,H_c){if(0!=this._aniMode){var H_d=this.getSlotByName(H_a);H_d&&H_d.replaceDisplayByName(H_b,H_c),this._clearCache()}},H_a.replaceSlotSkinByIndex=function(H_a,H_b,H_c){if(0!=this._aniMode){var H_d=this.getSlotByName(H_a);H_d&&H_d.replaceDisplayByIndex(H_b,H_c),this._clearCache()}},H_a.setSlotSkin=function(H_a,H_b){if(0!=this._aniMode){var H_c=this.getSlotByName(H_a);H_c&&H_c.replaceSkin(H_b),this._clearCache()}},H_a._clearCache=function(){if(1==this._aniMode)for(var H_a=0,H_b=this._graphicsCache.length;H_a<H_b;H_a++){for(var H_c=0,H_d=this._graphicsCache[H_a].length;H_c<H_d;H_c++){var H_e=this._graphicsCache[H_a][H_c];H_e!=this.graphics&&H_J.recycle(H_e)}this._graphicsCache[H_a].length=0}},H_a.play=function(H_a,H_b,H_c,H_d,H_e,H_f){void 0===H_c&&(H_c=!0),void 0===H_d&&(H_d=0),void 0===H_e&&(H_e=0),void 0===H_f&&(H_f=!0),this._indexControl=!1;var H_g=-1,H_h=NaN;if(H_h=H_b?2147483647:0,"string"==typeof H_a)for(var H_i=0,H_j=this._templet.getAnimationCount();H_i<H_j;H_i++){var H_k=this._templet.getAnimation(H_i);if(H_k&&H_a==H_k.name){H_g=H_i;break}}else H_g=H_a;-1<H_g&&H_g<this.getAnimNum()&&(this._aniClipIndex=H_g,(H_c||this._pause||this._currAniIndex!=H_g)&&(this._currAniIndex=H_g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(H_g)),this._drawOrder=null,this._eventIndex=0,this._player.play(H_g,this._player.playbackRate,H_h,H_d,H_e),H_f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=H_l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},H_a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},H_a.playbackRate=function(H_a){this._player&&(this._player.playbackRate=H_a)},H_a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},H_a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=H_l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},H_a._getGrahicsDataWithCache=function(H_a,H_b){return this._graphicsCache[H_a][H_b]},H_a._setGrahicsDataWithCache=function(H_a,H_b,H_c){this._graphicsCache[H_a][H_b]=H_c},H_a.destroy=function(H_a){void 0===H_a&&(H_a=!0),H_b.prototype.destroy.call(this,H_a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},H_f(0,H_a,"url",function(){return this._aniPath},function(H_a){this.load(H_a)}),H_f(0,H_a,"index",function(){return this._index},function(H_a){this.player&&(this._index=H_a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),H_f(0,H_a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),H_f(0,H_a,"templet",function(){return this._templet}),H_f(0,H_a,"player",function(){return this._player}),H_c.useSimpleMeshInCanvas=!1,H_c}(H_fa),H_D=function(H_b){function H_e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,H_e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}H_d(H_e,"laya.ani.bone.Templet",H_b);var H_a=H_e.prototype;return H_a.getLoadList=function(){return this._loadList},H_a.loadAni=function(H_a){this._skBufferUrl=H_a,H_ea.loader.load(H_a,H_i.create(this,this.onComplete),null,"arraybuffer")},H_a.onComplete=function(H_a){if(this._isDestroyed)this.destroy();else{var H_b=H_j.getRes(this._skBufferUrl);H_b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,H_b)):this.event("error","load failed:"+this._skBufferUrl)}},H_a.parseData=function(H_a,H_b,H_c){void 0===H_c&&(H_c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=H_a,this._mainTexture&&H_s.isWebGL&&H_a.bitmap&&(H_a.bitmap.enableMerageInAtlas=!1),this._rate=H_c,this.parse(H_b)},H_a.buildArmature=function(H_a){return void 0===H_a&&(H_a=0),new H_C(this,H_a)},H_a.parse=function(H_a){H_b.prototype.parse.call(this,H_a),this._endLoaded(),this._aniVersion!=H_e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+H_e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},H_a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var H_a=0;this._loadList=[];var H_b,H_c=new H_Fa(this.getPublicExtData()),H_d=0,H_e=0,H_f=0,H_g=H_c.getInt32(),H_h=H_c.readUTFString(),H_i=H_h.split("\n");for(H_a=0;H_a<H_g;H_a++)H_b=this._path+H_i[2*H_a],H_h=H_i[2*H_a+1],H_c.getFloat32(),H_c.getFloat32(),H_d=H_c.getFloat32(),H_e=H_c.getFloat32(),H_f=H_c.getFloat32(),isNaN(H_f)?0:H_f,H_f=H_c.getFloat32(),isNaN(H_f)?0:H_f,H_f=H_c.getFloat32(),isNaN(H_f)?H_d:H_f,H_f=H_c.getFloat32(),isNaN(H_f)?H_e:H_f,-1==this._loadList.indexOf(H_b)&&this._loadList.push(H_b);this.event("inited",this)}},H_a._textureComplete=function(){for(var H_a,H_b,H_c=0,H_d=this._loadList.length;H_c<H_d;H_c++)H_b=this._loadList[H_c],H_a=this._textureDic[H_b]=H_j.getRes(H_b),H_s.isWebGL&&H_a&&H_a.bitmap&&(H_a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},H_a._parsePublicExtData=function(){var H_a=0,H_b=0,H_c=0,H_d=0,H_e=0;for(H_a=0,H_e=this.getAnimationCount();H_a<H_e;H_a++)this._graphicsCache.push([]);var H_f;H_f="Dragon"!=this._aniClassName;var H_g,H_h,H_i=new H_Fa(this.getPublicExtData()),H_j=0,H_k=0,H_l=0,H_m=0,H_n=0,H_q=0,H_r=0,H_s=0,H_t=0,H_u=H_i.getInt32(),H_v=H_i.readUTFString(),H_w=H_v.split("\n");for(H_a=0;H_a<H_u;H_a++){if(H_g=this._mainTexture,H_h=this._path+H_w[2*H_a],H_v=H_w[2*H_a+1],null==this._mainTexture&&(H_g=this._textureDic[H_h]),!H_g)return this.event("error",this),void(this.isParseFail=!0);H_j=H_i.getFloat32(),H_k=H_i.getFloat32(),H_l=H_i.getFloat32(),H_m=H_i.getFloat32(),H_t=H_i.getFloat32(),H_n=isNaN(H_t)?0:H_t,H_t=H_i.getFloat32(),H_q=isNaN(H_t)?0:H_t,H_t=H_i.getFloat32(),H_r=isNaN(H_t)?H_l:H_t,H_t=H_i.getFloat32(),H_s=isNaN(H_t)?H_m:H_t,this.subTextureDic[H_v]=H_Ha.create(H_g,H_j,H_k,H_l,H_m,-H_n,-H_q,H_r,H_s),H_g.alphaTexture&&(this.subTextureDic[H_v].alphaTexture=H_Ha.create(H_g.alphaTexture,H_j,H_k,H_l,H_m,-H_n,-H_q,H_r,H_s))}this._mainTexture=H_g;var H_x,H_y,H_z,H_A,H_B,H_C=H_i.getUint16();for(H_a=0;H_a<H_C;H_a++)(H_x=[]).push(H_i.getUint16()),H_x.push(H_i.getUint16()),H_x.push(H_i.getUint16()),H_x.push(H_i.getUint16()),this.aniSectionDic[H_a]=H_x;var H_D,H_E=H_i.getInt16(),H_F={};for(H_a=0;H_a<H_E;H_a++)H_y=new H_Ia,0==H_a?H_D=H_y:H_y.root=H_D,H_y.d=H_f?-1:1,H_A=H_i.readUTFString(),H_B=H_i.readUTFString(),H_y.length=H_i.getFloat32(),1==H_i.getByte()&&(H_y.inheritRotation=!1),1==H_i.getByte()&&(H_y.inheritScale=!1),H_y.name=H_A,H_B&&((H_z=H_F[H_B])?H_z.addChild(H_y):this.mRootBone=H_y),H_F[H_A]=H_y,this.mBoneArr.push(H_y);this.tMatrixDataLen=H_i.getUint16();var H_G,H_H,H_I=H_i.getUint16(),H_J=Math.floor(H_I/this.tMatrixDataLen),H_K=this.srcBoneMatrixArr;for(H_a=0;H_a<H_J;H_a++)(H_G=new H_Va).scX=H_i.getFloat32(),H_G.skX=H_i.getFloat32(),H_G.skY=H_i.getFloat32(),H_G.scY=H_i.getFloat32(),H_G.x=H_i.getFloat32(),H_G.y=H_i.getFloat32(),8===this.tMatrixDataLen&&(H_G.skewX=H_i.getFloat32(),H_G.skewY=H_i.getFloat32()),H_K.push(H_G),(H_y=this.mBoneArr[H_a]).transform=H_G;var H_L,H_M=H_i.getUint16(),H_N=0;for(H_a=0;H_a<H_M;H_a++){for(H_H=new H_Pa,H_N=H_i.getUint16(),H_b=0;H_b<H_N;H_b++)H_H.boneNames.push(H_i.readUTFString()),H_H.boneIndexs.push(H_i.getInt16());H_H.name=H_i.readUTFString(),H_H.targetBoneName=H_i.readUTFString(),H_H.targetBoneIndex=H_i.getInt16(),H_H.bendDirection=H_i.getFloat32(),H_H.mix=H_i.getFloat32(),H_H.isSpine=H_f,this.ikArr.push(H_H)}var H_O,H_P=H_i.getUint16(),H_Q=0;for(H_a=0;H_a<H_P;H_a++){for(H_L=new H_Ua,H_Q=H_i.getUint16(),H_b=0;H_b<H_Q;H_b++)H_L.boneIndexs.push(H_i.getInt16());H_L.name=H_i.getUTFString(),H_L.targetIndex=H_i.getInt16(),H_L.rotateMix=H_i.getFloat32(),H_L.translateMix=H_i.getFloat32(),H_L.scaleMix=H_i.getFloat32(),H_L.shearMix=H_i.getFloat32(),H_L.offsetRotation=H_i.getFloat32(),H_L.offsetX=H_i.getFloat32(),H_L.offsetY=H_i.getFloat32(),H_L.offsetScaleX=H_i.getFloat32(),H_L.offsetScaleY=H_i.getFloat32(),H_L.offsetShearY=H_i.getFloat32(),this.tfArr.push(H_L)}var H_R=H_i.getUint16(),H_S=0;for(H_a=0;H_a<H_R;H_a++){for((H_O=new H_Qa).name=H_i.readUTFString(),H_S=H_i.getUint16(),H_b=0;H_b<H_S;H_b++)H_O.bones.push(H_i.getInt16());H_O.target=H_i.readUTFString(),H_O.positionMode=H_i.readUTFString(),H_O.spacingMode=H_i.readUTFString(),H_O.rotateMode=H_i.readUTFString(),H_O.offsetRotation=H_i.getFloat32(),H_O.position=H_i.getFloat32(),H_O.spacing=H_i.getFloat32(),H_O.rotateMix=H_i.getFloat32(),H_O.translateMix=H_i.getFloat32(),this.pathArr.push(H_O)}var H_T,H_U,H_V,H_W,H_X,H_Y=0,H_Z=0,H_$=0,H__=NaN,H_o=0,H_p=H_i.getInt16();for(H_a=0;H_a<H_p;H_a++){var H_aa=H_i.getUint8(),H_ba={};this.deformAniArr.push(H_ba);for(var H_ca=0;H_ca<H_aa;H_ca++)for((H_T=new H_Ka).skinName=H_i.getUTFString(),H_ba[H_T.skinName]=H_T,H_Y=H_i.getInt16(),H_b=0;H_b<H_Y;H_b++)for(H_U=new H_La,H_T.deformSlotDataList.push(H_U),H_Z=H_i.getInt16(),H_c=0;H_c<H_Z;H_c++)for(H_V=new H_Ma,H_U.deformSlotDisplayList.push(H_V),H_V.slotIndex=H_i.getInt16(),H_V.attachment=H_i.getUTFString(),H_$=H_i.getInt16(),H_d=0;H_d<H_$;H_d++)for(1==H_i.getByte()?H_V.tweenKeyList.push(!0):H_V.tweenKeyList.push(!1),H__=H_i.getFloat32(),H_V.timeList.push(H__),H_W=[],H_V.vectices.push(H_W),H_o=H_i.getInt16(),H_e=0;H_e<H_o;H_e++)H_W.push(H_i.getFloat32())}var H_da,H_ea,H_fa=H_i.getInt16(),H_ga=0,H_ha=0;for(H_a=0;H_a<H_fa;H_a++){for(H_ga=H_i.getInt16(),H_X=[],H_b=0;H_b<H_ga;H_b++){for((H_da=new H_Na).time=H_i.getFloat32(),H_ha=H_i.getInt16(),H_c=0;H_c<H_ha;H_c++)H_da.drawOrder.push(H_i.getInt16());H_X.push(H_da)}this.drawOrderAniArr.push(H_X)}var H_ia,H_ja=H_i.getInt16(),H_ka=0;for(H_a=0;H_a<H_ja;H_a++){for(H_ka=H_i.getInt16(),H_ea=[],H_b=0;H_b<H_ka;H_b++)(H_ia=new H_Oa).name=H_i.getUTFString(),H_ia.intValue=H_i.getInt32(),H_ia.floatValue=H_i.getFloat32(),H_ia.stringValue=H_i.getUTFString(),H_ia.time=H_i.getFloat32(),H_ea.push(H_ia);this.eventAniArr.push(H_ea)}var H_la=H_i.getInt16();if(0<H_la)for(this.attachmentNames=[],H_a=0;H_a<H_la;H_a++)this.attachmentNames.push(H_i.getUTFString());var H_ma,H_na,H_qa=H_i.getInt16();for(H_a=0;H_a<H_qa;H_a++)(H_ma=new H_Ja).name=H_i.readUTFString(),H_ma.parent=H_i.readUTFString(),H_ma.attachmentName=H_i.readUTFString(),H_ma.srcDisplayIndex=H_ma.displayIndex=H_i.getInt16(),(H_ma.templet=this).boneSlotDic[H_ma.name]=H_ma,null==(H_na=this.bindBoneBoneSlotDic[H_ma.parent])&&(this.bindBoneBoneSlotDic[H_ma.parent]=H_na=[]),H_na.push(H_ma),this.boneSlotArray.push(H_ma);var H_ra,H_sa,H_ta,H_ua=H_i.readUTFString().split("\n"),H_va=0,H_wa=H_i.getUint8(),H_xa=0,H_ya=0,H_za=0,H_Aa=0,H_Ba=0,H_Ca=0,H_Da=0;for(H_a=0;H_a<H_wa;H_a++){for((H_ra=new H_Ra).name=H_ua[H_va++],H_xa=H_i.getUint8(),H_b=0;H_b<H_xa;H_b++){for((H_sa=new H_Ta).name=H_ua[H_va++],H_ma=this.boneSlotDic[H_sa.name],H_ya=H_i.getUint8(),H_c=0;H_c<H_ya;H_c++){if(H_ta=new H_Sa,this.skinSlotDisplayDataArr.push(H_ta),H_ta.name=H_ua[H_va++],H_ta.attachmentName=H_ua[H_va++],H_ta.transform=new H_Va,H_ta.transform.scX=H_i.getFloat32(),H_ta.transform.skX=H_i.getFloat32(),H_ta.transform.skY=H_i.getFloat32(),H_ta.transform.scY=H_i.getFloat32(),H_ta.transform.x=H_i.getFloat32(),H_ta.transform.y=H_i.getFloat32(),H_sa.displayArr.push(H_ta),H_ta.width=H_i.getFloat32(),H_ta.height=H_i.getFloat32(),H_ta.type=H_i.getUint8(),H_ta.verLen=H_i.getUint16(),0<(H_E=H_i.getUint16()))for(H_ta.bones=[],H_d=0;H_d<H_E;H_d++){var H_Ea=H_i.getUint16();H_ta.bones.push(H_Ea)}if(0<(H_za=H_i.getUint16()))for(H_ta.uvs=[],H_d=0;H_d<H_za;H_d++)H_ta.uvs.push(H_i.getFloat32());if(0<(H_Aa=H_i.getUint16()))for(H_ta.weights=[],H_d=0;H_d<H_Aa;H_d++)H_ta.weights.push(H_i.getFloat32());if(0<(H_Ba=H_i.getUint16()))for(H_ta.triangles=[],H_d=0;H_d<H_Ba;H_d++)H_ta.triangles.push(H_i.getUint16());if(0<(H_Ca=H_i.getUint16()))for(H_ta.vertices=[],H_d=0;H_d<H_Ca;H_d++)H_ta.vertices.push(H_i.getFloat32());if(0<(H_Da=H_i.getUint16()))for(H_ta.lengths=[],H_d=0;H_d<H_Da;H_d++)H_ta.lengths.push(H_i.getFloat32())}H_ra.slotArr.push(H_sa)}this.skinDic[H_ra.name]=H_ra,this.skinDataArray.push(H_ra)}1==H_i.getUint8()?(this.yReverseMatrix=new H_Ga(1,0,0,-1,0,0),H_D&&H_D.setTempMatrix(this.yReverseMatrix)):H_D&&H_D.setTempMatrix(new H_Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},H_a.getTexture=function(H_a){var H_b=this.subTextureDic[H_a];return H_b||(H_b=this.subTextureDic[H_a.substr(0,H_a.length-1)]),null==H_b?this._mainTexture:H_b},H_a.showSkinByIndex=function(H_a,H_b,H_c){if(void 0===H_c&&(H_c=!0),H_b<0&&H_b>=this.skinDataArray.length)return!1;var H_d,H_e,H_f=0,H_g=0,H_h=this.skinDataArray[H_b];if(H_h){for(H_f=0,H_g=H_h.slotArr.length;H_f<H_g;H_f++)(H_e=H_h.slotArr[H_f])&&(H_d=H_a[H_e.name])&&(H_d.showSlotData(H_e,H_c),H_c&&"undefined"!=H_d.attachmentName&&"null"!=H_d.attachmentName?H_d.showDisplayByName(H_d.attachmentName):H_d.showDisplayByIndex(H_d.displayIndex));return!0}return!1},H_a.getSkinIndexByName=function(H_a){for(var H_b=0,H_c=this.skinDataArray.length;H_b<H_c;H_b++)if(this.skinDataArray[H_b].name==H_a)return H_b;return-1},H_a.getGrahicsDataWithCache=function(H_a,H_b){return this._graphicsCache[H_a][H_b]},H_a.setGrahicsDataWithCache=function(H_a,H_b,H_c){this._graphicsCache[H_a][H_b]=H_c},H_a.destroy=function(){var H_a;for(var H_b in this._isDestroyed=!0,this.subTextureDic)(H_a=this.subTextureDic[H_b])&&H_a.destroy();for(H_b in this._textureDic)(H_a=this._textureDic[H_b])&&H_a.destroy();for(var H_c=0,H_d=this.skinSlotDisplayDataArr.length;H_c<H_d;H_c++)this.skinSlotDisplayDataArr[H_c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete H_e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},H_a.getAniNameByIndex=function(H_a){var H_b=this.getAnimation(H_a);return H_b?H_b.name:null},H_f(0,H_a,"rate",function(){return this._rate},function(H_a){this._rate=H_a}),H_e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",H_e.TEMPLET_DICTIONARY=null,H_e}(H_K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H_a,H_b){"use strict";for(var H_c in Object.defineProperty(H_b,"__esModule",{value:!0}),Laya){var H_d=Laya[H_c];H_d&&H_d.__isclass&&(H_b[H_c]=H_d)}});