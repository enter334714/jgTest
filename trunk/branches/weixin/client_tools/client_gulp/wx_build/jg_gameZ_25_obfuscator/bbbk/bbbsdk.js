var _=wx.y$;require(_[30308]);var config={game_id:_[30309],game_pkg:_[30310],partner_label:_[30311],partner_id:_[30312],game_ver:_[30313],platId:1e3,gameId:298,channelVer:_[30314],mode:2,is_auth:!0};window.config=config;var p$2R5_V=p$25V_R();var HOST=_[30315];var p$2R5V_=null;var p$25_VR=null;var partner_data={};function p$25V_R(){var l={};return{order_data:{},init:function(e,r){e=e&&e.game_ver?e.game_ver:0,console.log(_[30316]);var t=this;var a;a=wx.getStorageSync(_[30317])?0:(a=t.uuid(16,32),wx.setStorageSync(_[30317],a),1),wx.getStorageSync(_[30318])||(o=t.uuid(16,32),wx.setStorageSync(_[30318],o));var o=wx.getLaunchOptionsSync();var n=o.scene||"";a&&o.query&&o.query.ad_code&&wx.setStorageSync(_[30319],o.query.ad_code),t.log(_[282],{install:a,scene:n}),ddtSDKPlat.init({platId:config.platId,gameId:config.gameId,channelVer:config.channelVer,mode:config.mode},function(e,r){switch(e){case _[30320]:console.log(_[30321],e,r);break;case _[30322]:console.log(_[30323],e,r);break;case _[30324]:console.log(_[30325],e,r),t.do_login(r);break;case _[30326]:console.log(_[30327],e,r),l[_[30328]]&&l[_[30328]](1,{errMsg:r.msg});break;case _[30329]:console.log(_[30330],e,r);break;case _[30331]:console.log(_[30332],e,r),l[_[30333]]&&l[_[30333]](1,{errMsg:r.errMsg})}},!0),wx.showShareMenu({withShareTicket:!0}),console.log(_[30334]+ddtSDKPlat.version);var i=o.query&&o.query.invite?o.query.invite:"";o=o.query&&o.query.invite_type?o.query.invite_type:"",i&&(p$25_VR={invite:i,invite_type:o,is_new:a,scene:n}),e&&this.checkGameVersion(e,function(e){r&&r(e)})},login:function(e,r){console.log(_[30335]),l[_[30328]]=typeof r==_[29936]?r:null},do_login:function(e){var t=this;partner_data={uid:e.uid,gameToken:e.gameToken,time:e.time,sign:e.sign};var r=t.getPublicData();if(r[_[30336]]=1,r[_[30337]]=JSON.stringify(partner_data),p$25_VR&&typeof p$25_VR==_[277])for(var a in p$25_VR)r[a]=p$25_VR[a];wx.request({url:_[26267]+HOST+_[30338],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:r,success:function(e){if(console.log(_[30341]),console.log(e),200===e.statusCode){if((e=e.data).state){try{wx.setStorageSync(_[30342],e.data.sdk_token),wx.setStorageSync(_[30343],e.data.user_id),wx.setStorageSync(_[30344],e.data.username),e.data.ext&&wx.setStorageSync(_[30345],e.data.ext)}catch(e){}var r={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};l[_[30328]]&&l[_[30328]](0,r)}else l[_[30328]]&&l[_[30328]](1,{errMsg:e.msg});t.getShareInfo(_[30346],function(e){console.log(_[30347]),wx.onShareAppMessage(function(){return t.logStartShare(_[30346]),{title:e.title,imageUrl:e.img,query:e.query}})})}else l[_[30328]]&&l[_[30328]](1,{errMsg:_[30348]})}})},share:function(e){l[_[30349]]=typeof callback==_[29936]?callback:null;var r=e.type||_[30349];console.log(_[30350]+r);var t=this;this.getShareInfo(r,function(e){t.logStartShare(r),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var r=wx.getStorageSync(_[30342]);wx.request({url:_[26267]+HOST+_[30351],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:r,server_id:p$2R5V_?p$2R5V_.server_id:"",role_id:p$2R5V_?p$2R5V_.role_id:"",type:e},success:function(e){}})},openService:function(){ddtSDKPlat.toService()},checkGameVersion:function(e,t){console.log(_[30352]),wx.getStorageSync(_[30342]),wx.request({url:_[26267]+HOST+_[30353],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var r;console.log(_[30354]),console.log(e),200==e.statusCode&&(r=e.data).state?t&&t(r.data):t&&t({develop:0})}})},getShareInfo:function(e,r){console.log(_[30355]);var t=wx.getStorageSync(_[30342]);wx.request({url:_[26267]+HOST+_[30356],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,type:e,server_id:p$2R5V_?p$2R5V_.server_id:"",role_id:p$2R5V_?p$2R5V_.role_id:"",no_log:1},success:function(e){console.log(_[30357]),console.log(e),200==e.statusCode?(e=e.data).state?r&&r(e.data):l[_[30349]]&&l[_[30349]](1,{errMsg:_[30358]+e.msg}):l[_[30349]]&&l[_[30349]](1,{errMsg:_[30359]})}})},updateShare:function(e,r,t,a,o,n){console.log(_[30360]);var i=wx.getStorageSync(_[30342]);wx.request({url:_[26267]+HOST+_[30361],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:r,is_new:t,role_id:a,sever_id:o,scene:n},success:function(e){console.log(_[30362]),console.log(e)}})},msgCheck:function(e,r){console.log(_[30363]);var t=wx.getStorageSync(_[30342]);wx.request({url:_[26267]+HOST+_[30364]+config.partner_id+"/"+config.game_pkg,method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,content:e,gameToken:partner_data.gameToken,uid:partner_data.uid,channelVer:config.channelVer,gameId:config.gameId,platId:config.platId},success:function(e){console.log(_[30365]),console.log(e),r&&r(e)}})},pay:function(e,r){this.startPay(e,r)},startPay:function(e,r){console.log(_[30366]),console.log(e);var t=this;l[_[30333]]=typeof r==_[29936]?r:null,r=wx.getStorageSync(_[30342]);var a=wx.getStorageSync(_[30345]);var o;r||a?(o=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:r,session_key:a,platform:o.platform},t.order_data=e,(r=t.getPublicData())[_[30368]]=JSON.stringify(e),r[_[30336]]=1,wx.request({url:_[26267]+HOST+_[30369],method:_[30339],dataType:_[6065],header:{"content-type":_[30340]},data:r,success:function(e){var r;console.log(_[30370]),console.log(e),200==e.statusCode?""==(e=e.data).data.ext?e.state&&e.data.pay_data&&""==e.data.ext?(console.log(_[30371]+JSON.stringify(e.data.pay_data)),r={billNo:e.data.pay_data.billNo,amount:e.data.pay_data.amount,serverId:e.data.pay_data.serverId,roleId:e.data.pay_data.roleId,roleName:e.data.pay_data.roleName,roleLevel:e.data.pay_data.roleLevel,subject:e.data.pay_data.subject,productDesc:e.data.pay_data.productDesc,extraInfo:e.data.pay_data.extraInfo},ddtSDKPlat.pay(r)):t.extDo({ext1:e.data.ext,ext2:e.data.pay_data}):l[_[30333]]&&l[_[30333]](1,{errMsg:e.errMsg}):l[_[30328]]&&l[_[30328]](1,{errMsg:_[30348]})}})):l[_[30333]]&&l[_[30333]](1,{errMsg:_[30367]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:_[30372]+e.ext2.extraInfo+_[30373]+e.ext2.amount,extraData:{},envVersion:_[30374],success(e){}})},logCreateRole:function(e){var r=wx.getStorageSync(_[30343]);var t=wx.getStorageSync(_[30344]);var a={};a[_[30375]]=r,a[_[30376]]=t,a[_[11136]]=e.roleid,a[_[30377]]=e.rolelevel,a[_[30378]]=e.rolename,a[_[11813]]=e.serverid,e.roleid&&e.serverid&&(p$2R5V_={role_id:e.roleid,server_id:e.serverid}),this.log(_[6],a),r={roleLevel:e.rolelevel+"",roleId:e.roleid+"",roleName:e.rolename,serverName:e.servername,serverId:e.serverid+""},ddtSDKPlat.submitData(_[8097],r)},logEnterGame:function(e,r){var t=wx.getStorageSync(_[30343]);var a=wx.getStorageSync(_[30344]);var o={};o[_[30375]]=t,o[_[30376]]=a,o[_[11136]]=e.roleid,o[_[30377]]=e.rolelevel,o[_[30378]]=e.rolename,o[_[11813]]=e.serverid,e.roleid&&e.serverid&&(p$2R5V_={role_id:e.roleid,server_id:e.serverid}),this.log(_[5947],o),t={roleLevel:e.rolelevel,roleId:e.roleid,roleName:e.rolename,serverName:e.servername,serverId:e.serverid},ddtSDKPlat.submitData(_[12283],t),p$25_VR&&this.updateShare(p$25_VR.invite,p$25_VR.invite_type,p$25_VR.is_new,e.roleid,e.serverid,p$25_VR.scene)},logRoleUpLevel:function(e,r){var t=wx.getStorageSync(_[30343]);var a=wx.getStorageSync(_[30344]);this.log(_[30379],e);var o={};o[_[30375]]=t,o[_[30376]]=a,o[_[11136]]=e.roleid,o[_[30377]]=e.rolelevel,o[_[30378]]=e.rolename,o[_[11813]]=e.serverid,e.roleid&&e.serverid&&(p$2R5V_={role_id:e.roleid,server_id:e.serverid,role_level:e.rolelevel,role_createtime:e.rolecreatetime}),t={roleLevel:e.rolelevel,roleId:e.roleid,roleName:e.rolename,serverName:e.servername,serverId:e.serverid,rolecreatetime:e.rolecreatetime,vipLevel:"",power:"",roleSex:"",partyId:"",partyName:""},ddtSDKPlat.submitData(_[30380],t)},subscribeMessage:function(e,r){console.log(_[30381]+e),l[_[30382]]=typeof r==_[29936]?r:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(_[30383]),console.log(e),l[_[30382]]&&l[_[30382]](e)},fail(e){console.log(_[30384]),console.log(e),l[_[30382]]&&l[_[30382]](e)}})},weiduanHelper:function(){console.log(_[30385]),ddtSDKPlat.jump()},uuid:function(e,r){var t=_[30386].split("");var a,o=[];var n;if(e=e||t.length,r)for(a=0;a<r;a++)o[a]=t[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",a=0;a<36;a++)o[a]||(n=0|16*Math.random(),o[a]=t[19==a?3&n|8:n]);return o.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var r=wx.getStorageSync(_[30317]);var t=wx.getStorageSync(_[30318]);var a=wx.getStorageSync(_[30319]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:a,uuid:r,idfv:t,dname:e.model,mac:_[30387],net_type:0==e.wifiSignal?"4G":_[30388],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==_[30389]?1:2}},log:function(e,r){var t=this.getPublicData();for(var a in r)t[a]=r[a];console.log(_[30390]+e),console.log(t),wx.request({url:_[26267]+HOST+_[30391]+e+_[30392]+encodeURIComponent(JSON.stringify(t))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()}}}function run(e,r,t){e in p$2R5_V&&p$2R5_V[e](r,t)}exports.init=function(e,r){run(_[363],e,r)},exports.login=function(e){run(_[30328],"",e)},exports.pay=function(e,r){run(_[30333],e,r)},exports.openService=function(){run(_[24342])},exports.logCreateRole=function(e,r,t,a,o){run(_[30393],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o})},exports.logEnterGame=function(e,r,t,a,o,n,i){run(_[30394],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o,rolecreatetime:n},i)},exports.logRoleUpLevel=function(e,r,t,a,o,n,i){run(_[30395],{serverid:e,servername:r,roleid:t,rolename:a,rolelevel:o,rolecreatetime:n},i)},exports.share=function(e){run(_[30349],{type:e})},exports.subscribeMessage=function(e,r){run(_[30382],e,r)},exports.msgCheck=function(e,r){run(_[12518],e,r)},exports.downloadClient=function(){run(_[30396])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(_[30397])},exports.weiduanHelper=function(){run(_[24232])};