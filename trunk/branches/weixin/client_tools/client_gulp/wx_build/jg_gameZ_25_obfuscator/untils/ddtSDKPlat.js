var _=wx.y$;!function(o){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=o,n.c=r,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){var h,_,m,P,S;h=n(2),_=n(1).utf8,m=n(3),P=n(1).bin,(S=function(t,u){t.constructor==String?t=(u&&"binary"===u.encoding?P:_).stringToBytes(t):m(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var e=h.bytesToWords(t),n=(t=8*t.length,1732584193),o=-271733879,r=-1732584194,i=271733878,a=0;a<e.length;a++)e[a]=16711935&(e[a]<<8|e[a]>>>24)|4278255360&(e[a]<<24|e[a]>>>8);e[t>>>5]|=128<<t%32,e[14+(64+t>>>9<<4)]=t;var s=S._ff,l=S._gg,c=S._hh,p=S._ii;for(a=0;a<e.length;a+=16){var d=n,f=o,g=r,y=i;n=s(n,o,r,i,e[a+0],7,-680876936),i=s(i,n,o,r,e[a+1],12,-389564586),r=s(r,i,n,o,e[a+2],17,606105819),o=s(o,r,i,n,e[a+3],22,-1044525330),n=s(n,o,r,i,e[a+4],7,-176418897),i=s(i,n,o,r,e[a+5],12,1200080426),r=s(r,i,n,o,e[a+6],17,-1473231341),o=s(o,r,i,n,e[a+7],22,-45705983),n=s(n,o,r,i,e[a+8],7,1770035416),i=s(i,n,o,r,e[a+9],12,-1958414417),r=s(r,i,n,o,e[a+10],17,-42063),o=s(o,r,i,n,e[a+11],22,-1990404162),n=s(n,o,r,i,e[a+12],7,1804603682),i=s(i,n,o,r,e[a+13],12,-40341101),r=s(r,i,n,o,e[a+14],17,-1502002290),n=l(n,o=s(o,r,i,n,e[a+15],22,1236535329),r,i,e[a+1],5,-165796510),i=l(i,n,o,r,e[a+6],9,-1069501632),r=l(r,i,n,o,e[a+11],14,643717713),o=l(o,r,i,n,e[a+0],20,-373897302),n=l(n,o,r,i,e[a+5],5,-701558691),i=l(i,n,o,r,e[a+10],9,38016083),r=l(r,i,n,o,e[a+15],14,-660478335),o=l(o,r,i,n,e[a+4],20,-405537848),n=l(n,o,r,i,e[a+9],5,568446438),i=l(i,n,o,r,e[a+14],9,-1019803690),r=l(r,i,n,o,e[a+3],14,-187363961),o=l(o,r,i,n,e[a+8],20,1163531501),n=l(n,o,r,i,e[a+13],5,-1444681467),i=l(i,n,o,r,e[a+2],9,-51403784),r=l(r,i,n,o,e[a+7],14,1735328473),n=c(n,o=l(o,r,i,n,e[a+12],20,-1926607734),r,i,e[a+5],4,-378558),i=c(i,n,o,r,e[a+8],11,-2022574463),r=c(r,i,n,o,e[a+11],16,1839030562),o=c(o,r,i,n,e[a+14],23,-35309556),n=c(n,o,r,i,e[a+1],4,-1530992060),i=c(i,n,o,r,e[a+4],11,1272893353),r=c(r,i,n,o,e[a+7],16,-155497632),o=c(o,r,i,n,e[a+10],23,-1094730640),n=c(n,o,r,i,e[a+13],4,681279174),i=c(i,n,o,r,e[a+0],11,-358537222),r=c(r,i,n,o,e[a+3],16,-722521979),o=c(o,r,i,n,e[a+6],23,76029189),n=c(n,o,r,i,e[a+9],4,-640364487),i=c(i,n,o,r,e[a+12],11,-421815835),r=c(r,i,n,o,e[a+15],16,530742520),n=p(n,o=c(o,r,i,n,e[a+2],23,-995338651),r,i,e[a+0],6,-198630844),i=p(i,n,o,r,e[a+7],10,1126891415),r=p(r,i,n,o,e[a+14],15,-1416354905),o=p(o,r,i,n,e[a+5],21,-57434055),n=p(n,o,r,i,e[a+12],6,1700485571),i=p(i,n,o,r,e[a+3],10,-1894986606),r=p(r,i,n,o,e[a+10],15,-1051523),o=p(o,r,i,n,e[a+1],21,-2054922799),n=p(n,o,r,i,e[a+8],6,1873313359),i=p(i,n,o,r,e[a+15],10,-30611744),r=p(r,i,n,o,e[a+6],15,-1560198380),o=p(o,r,i,n,e[a+13],21,1309151649),n=p(n,o,r,i,e[a+4],6,-145523070),i=p(i,n,o,r,e[a+11],10,-1120210379),r=p(r,i,n,o,e[a+2],15,718787259),o=p(o,r,i,n,e[a+9],21,-343485551),n=n+d>>>0,o=o+f>>>0,r=r+g>>>0,i=i+y>>>0}return h.endian([n,o,r,i])})._ff=function(t,e,n,o,r,i,a){return((a=t+(e&n|~e&o)+(r>>>0)+a)<<i|a>>>32-i)+e},S._gg=function(t,e,n,o,r,i,a){return((a=t+(e&o|n&~o)+(r>>>0)+a)<<i|a>>>32-i)+e},S._hh=function(t,e,n,o,r,i,a){return((a=t+(e^n^o)+(r>>>0)+a)<<i|a>>>32-i)+e},S._ii=function(t,e,n,o,r,i,a){return((a=t+(n^(e|~o))+(r>>>0)+a)<<i|a>>>32-i)+e},S._blocksize=16,S._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);return t=h.wordsToBytes(S(t,e)),e&&e.asBytes?t:e&&e.asString?P.bytesToString(t):h.bytesToHex(t)}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e){var i,n;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];0<t;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,o=0;n<t.length;n++,o+=8)e[o>>>5]|=t[n]<<24-o%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],r=0;r<4;r++)8*n+6*r<=8*t.length?e.push(i.charAt(o>>>6*(3-r)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&e.push((i.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|i.indexOf(t.charAt(n))>>>6-2*o);return e}},t.exports=n},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))||!!t._isBuffer)}},function(a,t,e){"use strict";var d,f,o;e.r(t),(t=d={})[t.WXMG=1e3]="WXMG",t[t.OPPO=1001]="OPPO",t[t.VIVO=1002]="VIVO",(t={})[t.TEST=0]="TEST",t[t.DEV=1]="DEV",t[t.ONLINE=2]="ONLINE",(t=f={}).createRole="createRole",t.upRoleLevel="upRoleLevel",t.enterGame="enterGame",t.enterServer="enterServer",(t=o={}).INIT_SUCCESS="init_success",t.INIT_FAIL="init_fail",t.LOGIN_SUCCESS="login_success",t.LOGIN_FAIL="login_fail",t.PAY_SUCCESS="pay_success",t.PAY_FAIL="pay_fail",t.PAY_CANCEL="pay_cancel",t.PAY_TYPE="pay_type",t.CHECK_INFO="check_info",s.track_url="https://api.mengxuanwl.com/Api/MiniGame/sdkTrack",s.sdk_base_url="https://api.mengxuanwl.com",s.sdk_config_url="/Api/MiniGame/init",s.sdk_device_url="",s.data_up_url="",s.gameToken="",s.login_url="",s.place_order_url="",s.reply_order_url="",s.checkExtInfo_url="",s.plat_extend_info=[],s.userInfo={},s.curApiParams={},s.platExtInfo={},s.switchZFlag=!1,s.system="";var u=s;function s(){}Object.defineProperty(c,"inst",{get:function(){return c._inst=null==c._inst?new c:c._inst},enumerable:!1,configurable:!0}),c.prototype.init=function(t){this.isShowLog=t||!1},c.prototype.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.isShowLog&&console.error(t,e)},c.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.isShowLog&&console.log(t,e)},c.prototype.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.isShowLog&&console.warn(t,e)},c._inst=null;var r=c;function c(){this.isShowLog=!1}p.isObject=function(t){return"[Object Object]"===Object.prototype.toString.call(t)},p.objKeySort=function(t){for(var e=Object.keys(t).sort(),n={},o=0;o<e.length;o++)n[e[o]]=t[e[o]];return n},p.procRequestParams=function(t){var e,n,o=Object.keys(t).sort(),r=[];for(e in o)void 0!==t[o[e]]?(n=(n=(n=(n=(n=(n=encodeURIComponent(t[o[e]].toString())).replace(/!/g,"%21")).replace(/\*/g,"%2A")).replace(/\'/g,"%27")).replace(/\(/g,"%28")).replace(/\)/g,"%29"),r.push(o[e]+"="+n)):r.push(o[e]+"=");return r.join("&")},p.isHasVer=function(t){return-1!=u.initOps.channelVer.indexOf(t)},p.judgeClient=function(){var t="";return/(iPhone|iPad|iPod|iOS)/i.test(u.system)?t="ios":/(Android)/i.test(u.system)&&(t="android"),t},p.charToUnicode=function(t){return escape(t).toLocaleLowerCase().replace(/%u/gi,"\\u").replace(/%7b/gi,"{").replace(/%7d/gi,"}").replace(/%3a/gi,":").replace(/%2c/gi,",").replace(/%27/gi,"'").replace(/%22/gi,'"').replace(/%5b/gi,"{").replace(/%5d/gi,"]").replace(/%3D/gi,"=").replace(/%20/gi," ").replace(/%3E/gi,">").replace(/%3C/gi,"<").replace(/%3F/gi,"?").replace(/%5c/gi,"\\")};var l=p;function p(){}t=e(0);var y=e.n(t),i=(g.postData=function(t,e,n,o){o=(o=void 0!==o&&o)?{time:Math.round(Date.now()/1e3),stamp:u.curFlag}:{gameToken:u.gameToken,time:Math.round(Date.now()/1e3)},o=Object.assign({},u.initOps,e,o),u.curApiParams=o,o=l.objKeySort(o),o=l.procRequestParams(o),o=(o=decodeURIComponent(o))+"&sign="+y()(o);var r=new XMLHttpRequest,i=l.isHasVer("jzxjz");i&&(r.responseType="text"),r.open("POST",t,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),r.onreadystatechange=function(){4!=r.readyState||200!=r.status&&304!=r.status||(i?n.call(this,r.response):n.call(this,JSON.parse(r.responseText)))},r.send(o)},g);function g(){}var _=function(){return(_=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function h(){}var m;h.prototype.init=function(){var e=this;i.postData(u.track_url,{flag:"\u5f00\u59cb\u521d\u59cb\u5316sdk"},function(){},!0);var t={device:l.judgeClient()};i.postData(u.sdk_base_url+u.sdk_config_url,t,function(t){if(!t.result)return r.inst.error("ddtSDKPlat ====== \u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u5931\u8d25",t),u.callback(o.INIT_FAIL,"\u521d\u59cb\u5316\u5931\u8d25"),void i.postData(u.track_url,{url:u.sdk_base_url+u.sdk_config_url,data:JSON.stringify(u.curApiParams),msg:JSON.stringify(t),flag:"\u521d\u59cb\u5316\u63a5\u53e3\u5931\u8d25"},function(){},!0);r.inst.log("ddtSDKPlat ====== \u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\u6210\u529f",t),i.postData(u.track_url,{url:u.sdk_base_url+u.sdk_config_url,data:JSON.stringify(u.curApiParams),msg:JSON.stringify(t),flag:"\u521d\u59cb\u5316\u63a5\u53e3\u6210\u529f"},function(){},!0),t=t.data,u.data_up_url=t.dataUpUrl,u.gameToken=t.gameToken,u.login_url=t.loginUrl,u.place_order_url=t.placeOrderUrl,u.reply_order_url=t.replyOrderUrl,u.sdk_device_url=t.deviceUrl,u.plat_extend_info=t.platExtInfo,u.switchZFlag=t.is_change,u.checkExtInfo_url=t.checkExtInfo,u.callback(o.PAY_TYPE,t.is_change),u.callback(o.INIT_SUCCESS,"\u521d\u59cb\u5316\u6210\u529f"),e.login()})},h.prototype.login=function(){var e=this;i.postData(u.track_url,{flag:"\u5f00\u59cb\u52a0\u8f7d\u767b\u5f55\u63a5\u53e3"},function(){},!0),i.postData(u.login_url,u.platExtInfo,function(t){if(!t.result)return r.inst.error("ddtSDKPlat ====== \u67e5\u8be2\u767b\u5f55\u5931\u8d25",t),u.callback(o.LOGIN_FAIL,"\u767b\u5f55\u5931\u8d25"),void i.postData(u.track_url,{url:u.login_url,data:JSON.stringify(u.curApiParams),msg:JSON.stringify(t),flag:"\u767b\u5f55\u63a5\u53e3\u5931\u8d25"},function(){},!0);r.inst.log("ddtSDKPlat ====== \u67e5\u8be2\u767b\u5f55\u6210\u529f",t),u.userInfo=t.data,i.postData(u.track_url,{url:u.login_url,data:JSON.stringify(u.curApiParams),msg:JSON.stringify(t),flag:"\u767b\u5f55\u63a5\u53e3\u6210\u529f"},function(){},!0),t=t.data,u.uid=t.uid,u.gameToken=t.gameToken,u.ddtPlatExtInfo=t.ddtPlatExtInfo,t={uid:t.uid,gameToken:t.gameToken,time:t.time,sign:t.sign},u.callback(o.LOGIN_SUCCESS,t),e.checkExtInfo()})},h.prototype.submitData=function(e,t){t=_({sceneId:e,uid:u.uid},t),i.postData(u.data_up_url,t,function(t){t.result?r.inst.log("ddtSDKPlat ====== \u6570\u636e\u4e0a\u62a5\u6210\u529f\uff0c\u7c7b\u578b\uff1a"+e,t):r.inst.error("ddtSDKPlat ====== \u6570\u636e\u4e0a\u62a5\u5931\u8d25\uff0c\u7c7b\u578b\uff1a"+e,t)})},h.prototype.createOrder=function(t){var e=this;t=_(_(_({uid:u.uid},t),u.platExtInfo),{device:l.judgeClient()}),i.postData(u.place_order_url,t,function(t){return t.result?(r.inst.log("ddtSDKPlat ====== \u9884\u4e0b\u5355\u6210\u529f",t),u.ddtPlatPayInfo=t.data,void e.pay()):(r.inst.error("ddtSDKPlat ====== \u9884\u4e0b\u5355\u5931\u8d25",t),void(1e3===u.initOps.platId&&wx.showToast({title:t.data.msg,icon:"none"})))})},h.prototype.pay=function(){},h.prototype.jump=function(){r.inst.error("ddtSDKPlat ====== \u8df3\u8f6c\u5b9e\u4f53"),console.log("\u8df3\u8f6c\u5b9e\u4f53")},h.prototype.toService=function(){console.log("\u8df3\u8f6c\u5b9e\u4f53\u516c\u4f17\u53f7")},h.prototype.checkExtInfo=function(){i.postData(u.checkExtInfo_url,{uid:u.uid,device:l.judgeClient()},function(t){t.result?(r.inst.log("ddtSDKPlat ====== \u83b7\u53d6\u6269\u5c55\u4fe1\u606f\u6210\u529f"),u.callback(o.CHECK_INFO,t.data)):r.inst.error("ddtSDKPlat ====== \u83b7\u53d6\u6269\u5c55\u4fe1\u606f\u9519\u8bef")})},O=S=e=h,m=I=P,(Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(m,O),I.prototype=null===O?Object.create(O):(n.prototype=O.prototype,new n),P.prototype.createSole=function(){var t=u.initOps.gameId.toString(),e=u.initOps.channelVer.toString();this.soleKey=y()(t+e+this.RANDOM_STR)},P.prototype.getADParams=function(){var e=wx.getLaunchOptionsSync();wx.onShow(function(t){e=t});var t=(l=e.query).adver,n=l.gdt_vid,o=l.weixinadinfo,r=l.clue_token,i=l.ad_id,a=l.creative_id,s=l.click_id,l=l.qz_gdt;t?(this.adver=t,wx.setStorageSync(this.soleKey,t)):this.adver=wx.getStorageSync(this.soleKey)||"",this.clue_token=r,this.ad_id=i,this.creative_id=a,this.gdt_vid=n||s||l,this.weixinadinfo=o,o={gdt_vid:this.gdt_vid,weixinadinfo:this.weixinadinfo,adver:this.adver,clue_token:this.clue_token,ad_id:this.ad_id,creative_id:this.creative_id},Object.assign(u.platExtInfo,o)},P.prototype.init=function(){u.system=wx.getSystemInfoSync().system,console.log(u.system),S.prototype.init.call(this)},P.prototype.login=function(){this.getWxSystemInfo(),this.loginAuth()},P.prototype.createOrder=function(t){if("android"===l.judgeClient())try{this.lostOrderId=wx.getStorageSync("ddtPayOrderLogs")||[],this.lostOrderId&&null!=this.lostOrderId&&0<this.lostOrderId.length&&(this.replyOrder(this.lostOrderId[0]),this.lostOrderId.splice(0,1))}catch(t){console.log(t)}S.prototype.createOrder.call(this,t)},P.prototype.pay=function(){S.prototype.pay.call(this),"ios"===l.judgeClient()&&u.switchZFlag?this.otherPay():this.platPay()},P.prototype.otherPay=function(){wx.openCustomerServiceConversation({showMessageCard:!0})},P.prototype.test=function(){wx.openCustomerServiceConversation({showMessageCard:!0})},P.prototype.platPay=function(){var e=this;wx.requestMidasPayment({mode:"game",env:u.ddtPlatPayInfo.env,offerId:u.ddtPlatPayInfo.offer,platform:"android",currencyType:"CNY",buyQuantity:u.ddtPlatPayInfo.count,zoneId:"1",success:function(){u.callback(o.PAY_SUCCESS,"\u652f\u4ed8\u6210\u529f");var t=u.ddtPlatPayInfo.orderId;e.replyOrder(t)},fail:function(t){r.inst.log("ddtSDKPlat ===== wx\u652f\u4ed8\u5931\u8d25",t),u.callback(o.PAY_FAIL,"\u652f\u4ed8\u5931\u8d25")}})},P.prototype.getWxSystemInfo=function(){wx.getSystemInfo({success:function(t){t={channelVer:u.initOps.channelVer,platId:u.initOps.platId,gameId:u.initOps.gameId,mode:t.model,brand:t.brand,language:t.language,platform:t.platform,system:t.system,version:t.version},i.postData(u.sdk_device_url,t,function(t){t.result?r.inst.log("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u6210\u529f",t):r.inst.error("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u5931\u8d25",t)})}})},P.prototype.loginAuth=function(){var n=this;wx.login({success:function(t){var e={code:t.code};Object.assign(u.platExtInfo,e),r.inst.log("ddtSDKPlat ==== \u5fae\u4fe1\u6388\u6743\u767b\u5f55\u6210\u529f",t),S.prototype.login.call(n)},fail:function(t){r.inst.log("ddtSDKPlat ==== \u5fae\u4fe1\u6388\u6743\u767b\u5f55\u5931\u8d25",t)}})},P.prototype.replyOrder=function(e){var n=this,t={channelVer:u.initOps.channelVer,platId:u.initOps.platId,gameId:u.initOps.gameId,uid:u.uid,orderId:e,session:u.ddtPlatExtInfo.session,gameToken:u.gameToken},o=l.objKeySort(t);o=l.procRequestParams(o),o=decodeURIComponent(o),t.sign=y()(o),wx.request({url:u.reply_order_url,data:t,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded;"},success:function(t){t.result||(r.inst.error("ddtSDKPlat ====== \u6263\u6b3e\u53d1\u8d27\u5931\u8d25",t.data.msg),n.lostOrderId.unshift(e)),wx.setStorageSync("ddtPayOrderLogs",n.lostOrderId)},fail:function(t){r.inst.error("ddtSDKPlat ==== \u6263\u6b3e\u53d1\u8d27\u8bf7\u6c42\u5931\u8d25",t.data.msg),n.lostOrderId.unshift(e),wx.setStorageSync("ddtPayOrderLogs",n.lostOrderId)}})};var S,v=P;function n(){this.constructor=I}var I,O;function P(){var t=S.call(this)||this;return t.RANDOM_STR="ly",t.createSole(),t.getADParams(),t}b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var b,w,D=function(){return(D=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},x=((t=function(t,e){function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(k,w=e),k.prototype.init=function(){w.prototype.init.call(this)},k.prototype.login=function(){this._getSystemInfo(),this.loginAuth()},k.prototype.pay=function(){w.prototype.pay.call(this),this.platPay()},k.prototype.createOrder=function(t){t=D(D({},t),{token:this.login_token,appVersion:u.gameVersion,engineVersion:this.engineVersion}),w.prototype.createOrder.call(this,t)},k.prototype.platPay=function(){qg.pay({appId:u.ddtPlatPayInfo.appId,token:this.login_token,timestamp:u.ddtPlatPayInfo.timestamp,paySign:u.ddtPlatPayInfo.paySign,orderNo:u.ddtPlatPayInfo.orderId,success:function(t){u.callback(o.PAY_SUCCESS,"\u652f\u4ed8\u6210\u529f"),r.inst.log("ddtSDKPlat ===== oppo\u652f\u4ed8\u6210\u529f",t)},fail:function(t){r.inst.error("ddtSDKPlat ===== oppo\u652f\u4ed8\u5931\u8d25",t),u.callback(o.PAY_FAIL,"\u652f\u4ed8\u5931\u8d25")}})},k.prototype._getSystemInfo=function(){var t,e=qg.getSystemInfoSync();e&&(t={channelVer:u.initOps.channelVer,platId:u.initOps.platId,gameId:u.initOps.gameId,version:e.COREVersion,brand:e.brand,model:e.model,language:e.language,platform:e.platform,platformVersion:e.platformVersion,system:e.system},this.engineVersion=e.platformVersion,i.postData(u.sdk_device_url,t,function(t){t.result?r.inst.log("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u6210\u529f",t):r.inst.error("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u5931\u8d25",t)}))},k.prototype.loginAuth=function(){var n=this,o=this;qg.login({success:function(t){var e=t.data?t.data.token:"unkown";u.platExtInfo={token:e,pkgName:u.pkgName},o.login_token=e,r.inst.log("ddtSDKPlat ==== oppo\u767b\u5f55\u6210\u529f",t),w.prototype.login.call(n)},fail:function(t){r.inst.error("ddtSDKPlat ==== oppo\u767b\u5f55\u5931\u8d25",t)}})},k);function k(){return w.call(this)||this}V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(C,j=e),C.prototype.init=function(){j.prototype.init.call(this)},C.prototype.login=function(){this._getSystemInfo(),this.loginAuth()},C.prototype.pay=function(){j.prototype.pay.call(this),this.platPay()},C.prototype.createOrder=function(t){this.payInfo=t,1056<=this.platformVersionCode?j.prototype.createOrder.call(this,t):r.inst.error("ddtSDKPlat ==== pay:VIVO\u8fd0\u884c\u7248\u672c\u53f7\u8981\u57281056\u4ee5\u4e0a\u54e6")},C.prototype.platPay=function(){var t;1056<=this.platformVersionCode?(t=100*parseInt(this.payInfo.amount),t={productDesc:this.payInfo.productDesc,appId:u.ddtPlatPayInfo.appId,orderAmount:t,productName:this.payInfo.subject,cpOrderNumber:u.ddtPlatPayInfo.orderId,notifyUrl:u.ddtPlatPayInfo.notifyUrl,vivoSignature:u.ddtPlatPayInfo.vivoSignature},qg.pay({orderInfo:JSON.stringify(t),success:function(t){u.callback(o.PAY_SUCCESS,"\u652f\u4ed8\u6210\u529f"),r.inst.log("ddtSDKPlat ==== VIVO\u652f\u4ed8\u6210\u529f",t)},fail:function(t){u.callback(o.PAY_FAIL,"\u652f\u4ed8\u5931\u8d25"),r.inst.error("ddtSDKPlat ==== VIVO\u652f\u4ed8\u5931\u8d25",t)}})):r.inst.error("ddtSDKPlat ==== pay:VIVO\u8fd0\u884c\u7248\u672c\u53f7\u8981\u57281056\u4ee5\u4e0a\u54e6")},C.prototype._getSystemInfo=function(){var t,e=qg.getSystemInfoSync();e&&(t={channelVer:u.initOps.channelVer,platId:u.initOps.platId,gameId:u.initOps.gameId,brand:e.brand,model:e.model,osType:e.osType,osVersionCode:e.osVersionCode,platformVersionName:e.platformVersionName,platformVersionCode:e.platformVersionCode,language:e.language,wifiSignal:e.wifiSignal,isHole:e.isHole,hole_x:e.hole_x,hole_y:e.hole_y,hole_radius:e.hole_radius,isNotch:e.isNotch,statusBarHeight:e.statusBarHeight},this.platformVersionCode=e.platformVersionCode,i.postData(u.sdk_device_url,t,function(t){t.result?r.inst.log("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u6210\u529f",t):r.inst.error("ddtSDKPlat ====== \u8bbe\u5907\u6536\u96c6\u4e0a\u62a5\u5931\u8d25",t)}))},C.prototype.loginAuth=function(){var n=this,o=this;1053<=qg.getSystemInfoSync().platformVersionCode?qg.login().then(function(t){var e=t.data?t.data.token:"unkown";u.platExtInfo={token:e,pkgName:u.pkgName},o.login_token=e,r.inst.log("ddtSDKPlat ==== VIVO\u767b\u5f55\u6210\u529f",t),j.prototype.login.call(n)},function(t){r.inst.error("ddtSDKPlat ==== VIVO\u767b\u5f55\u5931\u8d25",t)}):r.inst.error("ddtSDKPlat ==== login:VIVO\u8fd0\u884c\u7248\u672c\u53f7\u8981\u57281053\u4ee5\u4e0a\u54e6")};var V,j,K=C;function C(){return j.call(this)||this}T.dispatchPlatform=function(t){switch(t){case d.WXMG:return new v;case d.OPPO:return new x;case d.VIVO:return new K;default:r.inst.log("ddtSDKPlat ===== \u6ca1\u6709\u8be5\u5e73\u53f0id",t)}},T.dispatchUpData=function(t,e){switch(t){case f.createRole:u.mPlat.submitData(f.createRole,e);break;case f.upRoleLevel:u.mPlat.submitData(f.upRoleLevel,e);break;case f.enterGame:u.mPlat.submitData(f.enterGame,e);break;case f.enterServer:u.mPlat.submitData(f.enterServer,e);break;default:r.inst.log("ddtSDKPlat ===== \u6ca1\u6709\u8be5\u6570\u636e\u4e0a\u62a5\u7c7b\u578b",t)}};var N=T;function T(){}function A(){this._version="1.1.9"}A.prototype.init=function(t,e,n){void 0===n&&(n=!1),u.curFlag=y()(t.gameId+t.channelVer+Math.round(Date.now()/1e3)),u.initOps=t,u.callback=e,u.pkgName=t.pkgName,u.gameVersion=t.gameVersion,r.inst.init(n),u.mPlat=N.dispatchPlatform(t.platId),u.mPlat.init()},A.prototype.submitData=function(t,e){N.dispatchUpData(t,e)},A.prototype.pay=function(t){u.mPlat.createOrder(t)},A.prototype.jump=function(t){var e=u.curApiParams;console.log(e);var n,o={adver:"",channelVer:"",code:"",gameId:"",gameToken:"",gdt_vid:"",mode:"",platId:"",time:"",weixinadinfo:"",sign:"",uid:""},r={};for(n in e)for(var i in o)n==i&&(r[i]=e[i]);var a=l.objKeySort(r);a=l.procRequestParams(a),a=(a=decodeURIComponent(a))+"&sign="+y()(a),wx.openCustomerServiceConversation({sendMessagePath:a,sessionFrom:t||"turngame",showMessageCard:!0})},A.prototype.toService=function(){wx.openCustomerServiceConversation({sessionFrom:"service"})},Object.defineProperty(A.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e=A,window&&(window.ddtSDKPlat=e),e=new e,window&&(window.ddtSDKPlat=e)}]);